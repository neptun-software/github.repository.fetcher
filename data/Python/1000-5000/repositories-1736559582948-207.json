{
  "metadata": {
    "timestamp": 1736559582948,
    "page": 207,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjIxMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "fudan-generative-vision/hallo2",
      "stars": 4493,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 2.810546875,
          "content": "# running cache\nmlruns/\n\n# Test directories\ntest_data/\npretrained_models/\n\n# Poetry project\npoetry.lock\n\n# Byte-compiled / optimized / DLL files\n__pycache__/\n*.py[cod]\n*$py.class\n\n# C extensions\n*.so\n\n# Distribution / packaging\n.Python\nbuild/\ndevelop-eggs/\ndist/\ndownloads/\neggs/\n.eggs/\nlib/\nlib64/\nparts/\nsdist/\nvar/\nwheels/\nshare/python-wheels/\n*.egg-info/\n.installed.cfg\n*.egg\nMANIFEST\n\n# PyInstaller\n#  Usually these files are written by a python script from a template\n#  before PyInstaller builds the exe, so as to inject date/other infos into it.\n*.manifest\n*.spec\n\n# Installer logs\npip-log.txt\npip-delete-this-directory.txt\n\n# Unit test / coverage reports\nhtmlcov/\n.tox/\n.nox/\n.coverage\n.coverage.*\n.cache\nnosetests.xml\ncoverage.xml\n*.cover\n*.py,cover\n.hypothesis/\n.pytest_cache/\ncover/\n\n# Translations\n*.mo\n*.pot\n\n# Django stuff:\n*.log\nlocal_settings.py\ndb.sqlite3\ndb.sqlite3-journal\n\n# Flask stuff:\ninstance/\n.webassets-cache\n\n# Scrapy stuff:\n.scrapy\n\n# Sphinx documentation\ndocs/_build/\n\n# PyBuilder\n.pybuilder/\ntarget/\n\n# Jupyter Notebook\n.ipynb_checkpoints\n\n# IPython\nprofile_default/\nipython_config.py\n\n# pyenv\n#   For a library or package, you might want to ignore these files since the code is\n#   intended to run in multiple environments; otherwise, check them in:\n# .python-version\n\n# pipenv\n#   According to pypa/pipenv#598, it is recommended to include Pipfile.lock in version control.\n#   However, in case of collaboration, if having platform-specific dependencies or dependencies\n#   having no cross-platform support, pipenv may install dependencies that don't work, or not\n#   install all needed dependencies.\n#Pipfile.lock\n\n# poetry\n#   Similar to Pipfile.lock, it is generally recommended to include poetry.lock in version control.\n#   This is especially recommended for binary packages to ensure reproducibility, and is more\n#   commonly ignored for libraries.\n#   https://python-poetry.org/docs/basic-usage/#commit-your-poetrylock-file-to-version-control\n#poetry.lock\n\n# pdm\n#   Similar to Pipfile.lock, it is generally recommended to include pdm.lock in version control.\n#pdm.lock\n#   pdm stores project-wide configurations in .pdm.toml, but it is recommended to not include it\n#   in version control.\n#   https://pdm.fming.dev/#use-with-ide\n.pdm.toml\n\n# PEP 582; used by e.g. github.com/David-OConnor/pyflow and github.com/pdm-project/pdm\n__pypackages__/\n\n# Celery stuff\ncelerybeat-schedule\ncelerybeat.pid\n\n# SageMath parsed files\n*.sage.py\n\n# Environments\n.env\n.venv\nenv/\nvenv/\nENV/\nenv.bak/\nvenv.bak/\n\n# Spyder project settings\n.spyderproject\n.spyproject\n\n# Rope project settings\n.ropeproject\n\n# mkdocs documentation\n/site\n\n# mypy\n.mypy_cache/\n.dmypy.json\ndmypy.json\n\n# Pyre type checker\n.pyre/\n\n# pytype static type analyzer\n.pytype/\n\n# Cython debug symbols\ncython_debug/\n\n# IDE\n.idea/\n.vscode/\npretrained_models\ntest_data\noutput_long\nhq_results\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.083984375,
          "content": "MIT License\n\nCopyright (c) 2024 Fusion Lab: Generative Vision Lab of Fudan University\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 19.009765625,
          "content": "<h1 align='center'>Hallo2: Long-Duration and High-Resolution Audio-driven Portrait Image Animation</h1>\n\n<div align='center'>\n    <a href='https://github.com/cuijh26' target='_blank'>Jiahao Cui</a><sup>1*</sup>&emsp;\n    <a href='https://github.com/crystallee-ai' target='_blank'>Hui Li</a><sup>1*</sup>&emsp;\n    <a href='https://yoyo000.github.io/' target='_blank'>Yao Yao</a><sup>3</sup>&emsp;\n    <a href='http://zhuhao.cc/home/' target='_blank'>Hao Zhu</a><sup>3</sup>&emsp;\n    <a href='https://github.com/NinoNeumann' target='_blank'>Hanlin Shang</a><sup>1</sup>&emsp;\n    <a href='https://github.com/Kaihui-Cheng' target='_blank'>Kaihui Cheng</a><sup>1</sup>&emsp;\n    <a href='' target='_blank'>Hang Zhou</a><sup>2</sup>&emsp;\n</div>\n<div align='center'>\n    <a href='https://sites.google.com/site/zhusiyucs/home' target='_blank'>Siyu Zhu</a><sup>1‚úâÔ∏è</sup>&emsp;\n    <a href='https://jingdongwang2017.github.io/' target='_blank'>Jingdong Wang</a><sup>2</sup>&emsp;\n</div>\n\n<div align='center'>\n    <sup>1</sup>Fudan University&emsp; <sup>2</sup>Baidu Inc&emsp; <sup>3</sup>Nanjing University\n</div>\n\n<br>\n<div align='center'>\n    <a href='https://github.com/fudan-generative-vision/hallo2'><img src='https://img.shields.io/github/stars/fudan-generative-vision/hallo2?style=social'></a>\n    <a href='https://fudan-generative-vision.github.io/hallo2/#/'><img src='https://img.shields.io/badge/Project-HomePage-Green'></a>\n    <a href='https://arxiv.org/abs/2410.07718'><img src='https://img.shields.io/badge/Paper-Arxiv-red'></a>\n    <a href='https://huggingface.co/fudan-generative-ai/hallo2'><img src='https://img.shields.io/badge/%F0%9F%A4%97%20HuggingFace-Model-yellow'></a>\n    <a href='https://openbayes.com/console/public/tutorials/8KOlYWsdiY4'><img src='https://img.shields.io/badge/Demo-OpenBayesË¥ùÂºèËÆ°ÁÆó-orange'></a>\n    <a href='assets/wechat.jpeg'><img src='https://badges.aleen42.com/src/wechat.svg'></a>\n</div>\n<br>\n\n## üì∏ Showcase\n\n<table class=\"center\">\n  <tr>\n    <td style=\"text-align: center\"><b>Tailor Swift Speech @ NYU (4K, 23 minutes)</b></td>\n    <td style=\"text-align: center\"><b>Johan Rockstrom Speech @ TED (4K, 18 minutes)</b></td>\n  </tr>\n  <tr>\n    <td style=\"text-align: center\"><a target=\"_blank\" href=\"https://cdn.aondata.work/hallo2/videos/showcases/TailorSpeech.mp4\"><img src=\"https://cdn.aondata.work/hallo2/videos/showcases/gifs/TailorSpeechGIF.gif\"></a></td>\n    <td style=\"text-align: center\"><a target=\"_blank\" href=\"https://cdn.aondata.work/hallo2/videos/showcases/TEDSpeech.mp4\"><img src=\"https://cdn.aondata.work/hallo2/videos/showcases/gifs/TEDSpeechGIF.gif\"></a></td>\n  </tr>\n  <tr>\n    <td style=\"text-align: center\"><b>Churchill's Iron Curtain Speech (4K, 4 minutes)</b></td>\n    <td style=\"text-align: center\"><b>An LLM Course from Stanford (4K, up to 1 hour)</b></td>\n  </tr>\n  <tr>\n    <td style=\"text-align: center\"><a target=\"_blank\" href=\"https://cdn.aondata.work/hallo2/videos/showcases/DarkestHour.mp4\"><img src=\"https://cdn.aondata.work/hallo2/videos/showcases/gifs/DarkestHour.gif\"></a></td>\n    <td style=\"text-align: center\"><a target=\"_blank\" href=\"https://cdn.aondata.work/hallo2/videos/showcases/LLMCourse.mp4\"><img src=\"https://cdn.aondata.work/hallo2/videos/showcases/gifs/LLMCourseGIF.gif\"></a></td>\n  </tr>\n</table>\n\nVisit our [project page](https://fudan-generative-vision.github.io/hallo2/#/) to view more cases.\n\n## üì∞ News\n\n- **`2024/10/16`**: ‚ú®‚ú®‚ú® Source code and pretrained weights released.\n- **`2024/10/10`**: üéâüéâüéâ Paper submitted on [Arxiv](https://arxiv.org/abs/2410.07718).\n\n## üìÖÔ∏è Roadmap\n\n| Status | Milestone                                                                                    |    ETA     |\n| :----: | :------------------------------------------------------------------------------------------- | :--------: |\n|   ‚úÖ   | **[Paper submitted on Arixiv](https://arxiv.org/abs/2410.07718)**                            | 2024-10-10 |\n|   ‚úÖ   | **[Source code meet everyone on GitHub](https://github.com/fudan-generative-vision/hallo2)** | 2024-10-16 |\n|   üöÄ   | **[Accelerate performance on inference]()**                                                  |    TBD     |\n\n## üîßÔ∏è Framework\n\n![framework](assets/framework_2.jpg)\n\n## ‚öôÔ∏è Installation\n\n- System requirement: Ubuntu 20.04/Ubuntu 22.04, Cuda 11.8\n- Tested GPUs: A100\n\nDownload the codes:\n\n```bash\n  git clone https://github.com/fudan-generative-vision/hallo2\n  cd hallo2\n```\n\nCreate conda environment:\n\n```bash\n  conda create -n hallo python=3.10\n  conda activate hallo\n```\n\nInstall packages with `pip`\n\n```bash\n  pip install torch==2.2.2 torchvision==0.17.2 torchaudio==2.2.2 --index-url https://download.pytorch.org/whl/cu118\n  pip install -r requirements.txt\n```\n\nBesides, ffmpeg is also needed:\n\n```bash\n  apt-get install ffmpeg\n```\n\n### üì• Download Pretrained Models\n\nYou can easily get all pretrained models required by inference from our [HuggingFace repo](https://huggingface.co/fudan-generative-ai/hallo2).\n\nUsing `huggingface-cli` to download the models:\n\n```shell\ncd $ProjectRootDir\npip install huggingface-cli\nhuggingface-cli download fudan-generative-ai/hallo --local-dir ./pretrained_models\n```\n\nOr you can download them separately from their source repo:\n\n- [hallo](https://huggingface.co/fudan-generative-ai/hallo2/tree/main/hallo2): Our checkpoints consist of denoising UNet, face locator, image & audio proj.\n- [audio_separator](https://huggingface.co/huangjackson/Kim_Vocal_2): Kim*Vocal_2 MDX-Net vocal removal model. (\\_Thanks to [KimberleyJensen](https://github.com/KimberleyJensen)*)\n- [insightface](https://github.com/deepinsight/insightface/tree/master/python-package#model-zoo): 2D and 3D Face Analysis placed into `pretrained_models/face_analysis/models/`. (_Thanks to deepinsight_)\n- [face landmarker](https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task): Face detection & mesh model from [mediapipe](https://ai.google.dev/edge/mediapipe/solutions/vision/face_landmarker#models) placed into `pretrained_models/face_analysis/models`.\n- [motion module](https://github.com/guoyww/AnimateDiff/blob/main/README.md#202309-animatediff-v2): motion module from [AnimateDiff](https://github.com/guoyww/AnimateDiff). (_Thanks to [guoyww](https://github.com/guoyww)_).\n- [sd-vae-ft-mse](https://huggingface.co/stabilityai/sd-vae-ft-mse): Weights are intended to be used with the diffusers library. (_Thanks to [stablilityai](https://huggingface.co/stabilityai)_)\n- [StableDiffusion V1.5](https://huggingface.co/runwayml/stable-diffusion-v1-5): Initialized and fine-tuned from Stable-Diffusion-v1-2. (_Thanks to [runwayml](https://huggingface.co/runwayml)_)\n- [wav2vec](https://huggingface.co/facebook/wav2vec2-base-960h): wav audio to vector model from [Facebook](https://huggingface.co/facebook/wav2vec2-base-960h).\n- [facelib](https://github.com/sczhou/CodeFormer/releases/tag/v0.1.0): pretrained face parse models\n- [realesrgan](https://github.com/sczhou/CodeFormer/releases/download/v0.1.0/RealESRGAN_x2plus.pth): background upsample model\n- [CodeFormer](https://github.com/sczhou/CodeFormer/releases/download/v0.1.0): pretrained [Codeformer](https://github.com/sczhou/CodeFormer) model, it's optional to download it, only if you want to train our video super-resolution model from scratch\n\nFinally, these pretrained models should be organized as follows:\n\n```text\n./pretrained_models/\n|-- audio_separator/\n|   |-- download_checks.json\n|   |-- mdx_model_data.json\n|   |-- vr_model_data.json\n|   `-- Kim_Vocal_2.onnx\n|-- CodeFormer/\n|   |-- codeformer.pth\n|   `-- vqgan_code1024.pth\n|-- face_analysis/\n|   `-- models/\n|       |-- face_landmarker_v2_with_blendshapes.task  # face landmarker model from mediapipe\n|       |-- 1k3d68.onnx\n|       |-- 2d106det.onnx\n|       |-- genderage.onnx\n|       |-- glintr100.onnx\n|       `-- scrfd_10g_bnkps.onnx\n|-- facelib\n|   |-- detection_mobilenet0.25_Final.pth\n|   |-- detection_Resnet50_Final.pth\n|   |-- parsing_parsenet.pth\n|   |-- yolov5l-face.pth\n|   `-- yolov5n-face.pth\n|-- hallo2\n|   |-- net_g.pth\n|   `-- net.pth\n|-- motion_module/\n|   `-- mm_sd_v15_v2.ckpt\n|-- realesrgan\n|   `-- RealESRGAN_x2plus.pth\n|-- sd-vae-ft-mse/\n|   |-- config.json\n|   `-- diffusion_pytorch_model.safetensors\n|-- stable-diffusion-v1-5/\n|   `-- unet/\n|       |-- config.json\n|       `-- diffusion_pytorch_model.safetensors\n`-- wav2vec/\n    `-- wav2vec2-base-960h/\n        |-- config.json\n        |-- feature_extractor_config.json\n        |-- model.safetensors\n        |-- preprocessor_config.json\n        |-- special_tokens_map.json\n        |-- tokenizer_config.json\n        `-- vocab.json\n```\n\n### üõ†Ô∏è Prepare Inference Data\n\nHallo has a few simple requirements for input data:\n\nFor the source image:\n\n1. It should be cropped into squares.\n2. The face should be the main focus, making up 50%-70% of the image.\n3. The face should be facing forward, with a rotation angle of less than 30¬∞ (no side profiles).\n\nFor the driving audio:\n\n1. It must be in WAV format.\n2. It must be in English since our training datasets are only in this language.\n3. Ensure the vocals are clear; background music is acceptable.\n\nWe have provided [some samples](examples/) for your reference.\n\n### üéÆ Run Inference\n\n#### Long-Duration animation\n\nSimply to run the `scripts/inference_long.py` and change `source_image`, `driving_audio` and `save_path` in the config file:\n\n```bash\npython scripts/inference_long.py --config ./configs/inference/long.yaml\n```\n\nAnimation results will be saved at `save_path`. You can find more examples for inference at [examples folder](https://github.com/fudan-generative-vision/hallo2/tree/main/examples).\n\nFor more options:\n\n```shell\nusage: inference_long.py [-h] [-c CONFIG] [--source_image SOURCE_IMAGE] [--driving_audio DRIVING_AUDIO] [--pose_weight POSE_WEIGHT]\n                    [--face_weight FACE_WEIGHT] [--lip_weight LIP_WEIGHT] [--face_expand_ratio FACE_EXPAND_RATIO]\n\noptions:\n  -h, --help            show this help message and exit\n  -c CONFIG, --config CONFIG\n  --source_image SOURCE_IMAGE\n                        source image\n  --driving_audio DRIVING_AUDIO\n                        driving audio\n  --pose_weight POSE_WEIGHT\n                        weight of pose\n  --face_weight FACE_WEIGHT\n                        weight of face\n  --lip_weight LIP_WEIGHT\n                        weight of lip\n  --face_expand_ratio FACE_EXPAND_RATIO\n                        face region\n```\n\n#### High-Resolution animation\n\nSimply to run the `scripts/video_sr.py` and pass `input_video` and `output_path`:\n\n```bash\npython scripts/video_sr.py --input_path [input_video] --output_path [output_dir] --bg_upsampler realesrgan --face_upsample -w 1 -s 4\n```\n\nAnimation results will be saved at `output_dir`.\n\nFor more options:\n\n```shell\nusage: video_sr.py [-h] [-i INPUT_PATH] [-o OUTPUT_PATH] [-w FIDELITY_WEIGHT] [-s UPSCALE] [--has_aligned] [--only_center_face] [--draw_box]\n                   [--detection_model DETECTION_MODEL] [--bg_upsampler BG_UPSAMPLER] [--face_upsample] [--bg_tile BG_TILE] [--suffix SUFFIX]\n\noptions:\n  -h, --help            show this help message and exit\n  -i INPUT_PATH, --input_path INPUT_PATH\n                        Input video\n  -o OUTPUT_PATH, --output_path OUTPUT_PATH\n                        Output folder.\n  -w FIDELITY_WEIGHT, --fidelity_weight FIDELITY_WEIGHT\n                        Balance the quality and fidelity. Default: 0.5\n  -s UPSCALE, --upscale UPSCALE\n                        The final upsampling scale of the image. Default: 2\n  --has_aligned         Input are cropped and aligned faces. Default: False\n  --only_center_face    Only restore the center face. Default: False\n  --draw_box            Draw the bounding box for the detected faces. Default: False\n  --detection_model DETECTION_MODEL\n                        Face detector. Optional: retinaface_resnet50, retinaface_mobile0.25, YOLOv5l, YOLOv5n. Default: retinaface_resnet50\n  --bg_upsampler BG_UPSAMPLER\n                        Background upsampler. Optional: realesrgan\n  --face_upsample       Face upsampler after enhancement. Default: False\n  --bg_tile BG_TILE     Tile size for background sampler. Default: 400\n  --suffix SUFFIX       Suffix of the restored faces. Default: None\n```\n\n> NOTICE: The High-Resolution animation feature is a modified version of [CodeFormer](https://github.com/sczhou/CodeFormer). When using or redistributing this feature, please comply with the [S-Lab License 1.0](https://github.com/sczhou/CodeFormer?tab=License-1-ov-file). We kindly request that you respect the terms of this license in any usage or redistribution of this component.\n\n## Training\n\n### Long-Duration animation\n\n#### prepare data for training\n\nThe training data, which utilizes some talking-face videos similar to the source images used for inference, also needs to meet the following requirements:\n\n1. It should be cropped into squares.\n2. The face should be the main focus, making up 50%-70% of the image.\n3. The face should be facing forward, with a rotation angle of less than 30¬∞ (no side profiles).\n\nOrganize your raw videos into the following directory structure:\n\n```text\ndataset_name/\n|-- videos/\n|   |-- 0001.mp4\n|   |-- 0002.mp4\n|   |-- 0003.mp4\n|   `-- 0004.mp4\n```\n\nYou can use any `dataset_name`, but ensure the `videos` directory is named as shown above.\n\nNext, process the videos with the following commands:\n\n```bash\npython -m scripts.data_preprocess --input_dir dataset_name/videos --step 1\npython -m scripts.data_preprocess --input_dir dataset_name/videos --step 2\n```\n\n**Note:** Execute steps 1 and 2 sequentially as they perform different tasks. Step 1 converts videos into frames, extracts audio from each video, and generates the necessary masks. Step 2 generates face embeddings using InsightFace and audio embeddings using Wav2Vec, and requires a GPU. For parallel processing, use the `-p` and `-r` arguments. The `-p` argument specifies the total number of instances to launch, dividing the data into `p` parts. The `-r` argument specifies which part the current process should handle. You need to manually launch multiple instances with different values for `-r`.\n\nGenerate the metadata JSON files with the following commands:\n\n```bash\npython scripts/extract_meta_info_stage1.py -r path/to/dataset -n dataset_name\npython scripts/extract_meta_info_stage2.py -r path/to/dataset -n dataset_name\n```\n\nReplace `path/to/dataset` with the path to the parent directory of `videos`, such as `dataset_name` in the example above. This will generate `dataset_name_stage1.json` and `dataset_name_stage2.json` in the `./data` directory.\n\n#### Training\n\nUpdate the data meta path settings in the configuration YAML files, `configs/train/stage1.yaml` and `configs/train/stage2_long.yaml`:\n\n```yaml\n#stage1.yaml\ndata:\n  meta_paths:\n    - ./data/dataset_name_stage1.json\n\n#stage2.yaml\ndata:\n  meta_paths:\n    - ./data/dataset_name_stage2.json\n```\n\nStart training with the following command:\n\n```shell\naccelerate launch -m \\\n  --config_file accelerate_config.yaml \\\n  --machine_rank 0 \\\n  --main_process_ip 0.0.0.0 \\\n  --main_process_port 20055 \\\n  --num_machines 1 \\\n  --num_processes 8 \\\n  scripts.train_stage1 --config ./configs/train/stage1.yaml\n```\n\n##### Accelerate Usage Explanation\n\nThe `accelerate launch` command is used to start the training process with distributed settings.\n\n```shell\naccelerate launch [arguments] {training_script} --{training_script-argument-1} --{training_script-argument-2} ...\n```\n\n**Arguments for Accelerate:**\n\n- `-m, --module`: Interpret the launch script as a Python module.\n- `--config_file`: Configuration file for Hugging Face Accelerate.\n- `--machine_rank`: Rank of the current machine in a multi-node setup.\n- `--main_process_ip`: IP address of the master node.\n- `--main_process_port`: Port of the master node.\n- `--num_machines`: Total number of nodes participating in the training.\n- `--num_processes`: Total number of processes for training, matching the total number of GPUs across all machines.\n\n**Arguments for Training:**\n\n- `{training_script}`: The training script, such as `scripts.train_stage1` or `scripts.train_stage2`.\n- `--{training_script-argument-1}`: Arguments specific to the training script. Our training scripts accept one argument, `--config`, to specify the training configuration file.\n\nFor multi-node training, you need to manually run the command with different `machine_rank` on each node separately.\n\nFor more settings, refer to the [Accelerate documentation](https://huggingface.co/docs/accelerate/en/index).\n\n### High-Resolution animation\n\n#### Training\n\n##### prepare data for training\n\nWe use the VFHQ dataset for training, you can download from its [homepage](https://liangbinxie.github.io/projects/vfhq/). Then updata `dataroot_gt` in `./configs/train/video_sr.yaml`.\n\n#### training\n\nStart training with the following command:\n\n```shell\npython -m torch.distributed.launch --nproc_per_node=8 --master_port=4322 \\\nbasicsr/train.py -opt ./configs/train/video_sr.yaml \\\n--launcher pytorch\n```\n\n## üìù Citation\n\nIf you find our work useful for your research, please consider citing the paper:\n\n```\n@misc{cui2024hallo2,\n\ttitle={Hallo2: Long-Duration and High-Resolution Audio-driven Portrait Image Animation},\n\tauthor={Jiahao Cui and Hui Li and Yao Yao and Hao Zhu and Hanlin Shang and Kaihui Cheng and Hang Zhou and Siyu Zhu andÔ∏è Jingdong Wang},\n\tyear={2024},\n\teprint={2410.07718},\n\tarchivePrefix={arXiv},\n\tprimaryClass={cs.CV}\n}\n```\n\n## üåü Opportunities Available\n\nMultiple research positions are open at the **Generative Vision Lab, Fudan University**! Include:\n\n- Research assistant\n- Postdoctoral researcher\n- PhD candidate\n- Master students\n\nInterested individuals are encouraged to contact us at [siyuzhu@fudan.edu.cn](mailto://siyuzhu@fudan.edu.cn) for further information.\n\n## ‚ö†Ô∏è Social Risks and Mitigations\n\nThe development of portrait image animation technologies driven by audio inputs poses social risks, such as the ethical implications of creating realistic portraits that could be misused for deepfakes. To mitigate these risks, it is crucial to establish ethical guidelines and responsible use practices. Privacy and consent concerns also arise from using individuals' images and voices. Addressing these involves transparent data usage policies, informed consent, and safeguarding privacy rights. By addressing these risks and implementing mitigations, the research aims to ensure the responsible and ethical development of this technology.\n\n## ü§ó Acknowledgements\n\nWe would like to thank the contributors to the [magic-animate](https://github.com/magic-research/magic-animate), [AnimateDiff](https://github.com/guoyww/AnimateDiff), [ultimatevocalremovergui](https://github.com/Anjok07/ultimatevocalremovergui), [AniPortrait](https://github.com/Zejun-Yang/AniPortrait) and [Moore-AnimateAnyone](https://github.com/MooreThreads/Moore-AnimateAnyone) repositories, for their open research and exploration.\n\nIf we missed any open-source projects or related articles, we would like to complement the acknowledgement of this specific work immediately.\n\n## üëè Community Contributors\n\nThank you to all the contributors who have helped to make this project better!\n\n<a href=\"https://github.com/fudan-generative-vision/hallo2/graphs/contributors\">\n  <img src=\"https://contrib.rocks/image?repo=fudan-generative-vision/hallo2\" />\n</a>\n"
        },
        {
          "name": "accelerate_config.yaml",
          "type": "blob",
          "size": 0.474609375,
          "content": "compute_environment: LOCAL_MACHINE\ndebug: true\ndeepspeed_config:\n  deepspeed_multinode_launcher: standard\n  gradient_accumulation_steps: 1\n  offload_optimizer_device: none\n  offload_param_device: none\n  zero3_init_flag: false\n  zero_stage: 2\ndistributed_type: DEEPSPEED\ndowncast_bf16: \"no\"\nmain_training_function: main\nmixed_precision: \"fp16\"\nnum_machines: 1\nnum_processes: 8\nrdzv_backend: static\nsame_network: true\ntpu_env: []\ntpu_use_cluster: false\ntpu_use_sudo: false\nuse_cpu: false\n"
        },
        {
          "name": "assets",
          "type": "tree",
          "content": null
        },
        {
          "name": "basicsr",
          "type": "tree",
          "content": null
        },
        {
          "name": "configs",
          "type": "tree",
          "content": null
        },
        {
          "name": "examples",
          "type": "tree",
          "content": null
        },
        {
          "name": "facelib",
          "type": "tree",
          "content": null
        },
        {
          "name": "hallo",
          "type": "tree",
          "content": null
        },
        {
          "name": "requirements.txt",
          "type": "blob",
          "size": 0.6083984375,
          "content": "accelerate==0.28.0\naudio-separator==0.17.2\nav==12.1.0\nbitsandbytes==0.43.1\ndecord==0.6.0\ndiffusers==0.27.2\neinops==0.8.0\nffmpeg-python==0.2.0\nicecream==2.1.3\ninsightface==0.7.3\nlibrosa==0.10.2.post1\nlpips==0.1.4\nmediapipe[vision]==0.10.14\nmlflow==2.13.1\nmoviepy==1.0.3\nnumpy==1.26.4\nomegaconf==2.3.0\nonnx2torch==1.5.14\nonnx==1.16.1\nonnxruntime-gpu==1.18.0\nopencv-contrib-python==4.9.0.80\nopencv-python-headless==4.9.0.80\nopencv-python==4.9.0.80\npillow==10.3.0\nsetuptools==70.0.0\ntqdm==4.66.4\ntransformers==4.39.2\nxformers==0.0.25.post1\nisort==5.13.2\npylint==3.2.2\npre-commit==3.7.1\ngradio==4.36.1\nlpips\nffmpeg-python==0.2.0"
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}