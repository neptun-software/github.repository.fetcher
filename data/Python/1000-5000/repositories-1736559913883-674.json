{
  "metadata": {
    "timestamp": 1736559913883,
    "page": 674,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjY4MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "grafana/oncall",
      "stars": 3589,
      "defaultBranch": "dev",
      "files": [
        {
          "name": ".dockerignore",
          "type": "blob",
          "size": 0.06640625,
          "content": "# Ignore everything\n*\n\n# Allow directories\n!/engine\n!/grafana-plugin"
        },
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.041015625,
          "content": "*.whl filter=lfs diff=lfs merge=lfs -text\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.0986328125,
          "content": "*.pyc\nvenv\n.python-version\n\n.vscode\n*.http\n.idea\n.DS_Store\n.env\n\npnpm.lock\nnode_modules\n\ntest-results"
        },
        {
          "name": ".markdownlint.json",
          "type": "blob",
          "size": 0.201171875,
          "content": "{\n  \"default\": true,\n  \"MD013\": {\n    \"line_length\": \"120\",\n    \"code_blocks\": false,\n    \"tables\": false\n  },\n  \"MD024\": {\n    \"siblings_only\": true\n  },\n  \"MD033\": {\n    \"allowed_elements\": [\"img\"]\n  }\n}\n"
        },
        {
          "name": ".markdownlintignore",
          "type": "blob",
          "size": 0.0693359375,
          "content": "*.pyc\nvenv\n.python-version\n\n.vscode\n.idea\n.DS_Store\n.env\n\nCHANGELOG.md\n"
        },
        {
          "name": ".nvmrc",
          "type": "blob",
          "size": 0.0078125,
          "content": "20.16.0\n"
        },
        {
          "name": ".pre-commit-config.yaml",
          "type": "blob",
          "size": 3.681640625,
          "content": "repos:\n  - repo: https://github.com/pycqa/isort\n    rev: 5.12.0\n    hooks:\n      - id: isort\n        files: ^engine\n        args: [--settings-file=engine/pyproject.toml, --filter-files]\n      - id: isort\n        name: isort - migrators\n        files: ^tools/migrators\n        args: [--settings-file=tools/migrators/.isort.cfg, --filter-files]\n      - id: isort\n        name: isort - dev/scripts\n        files: ^dev/scripts\n        args: [--settings-file=dev/scripts/.isort.cfg, --filter-files]\n\n  - repo: https://github.com/psf/black\n    rev: 23.7.0\n    hooks:\n      - id: black\n        files: ^engine\n        args: [--config=engine/pyproject.toml]\n      - id: black\n        name: black - migrators\n        files: ^tools/migrators\n      - id: black\n        name: black - dev/scripts\n        files: ^dev/scripts\n\n  - repo: https://github.com/pycqa/flake8\n    rev: 7.0.0\n    hooks:\n      - id: flake8\n        files: ^engine\n        args: [--config=engine/tox.ini]\n        additional_dependencies:\n          - flake8-bugbear\n          - flake8-tidy-imports\n      - id: flake8\n        name: flake8 - migrators\n        files: ^tools/migrators\n        # Make sure config is compatible with black\n        # https://black.readthedocs.io/en/stable/guides/using_black_with_other_tools.html#flake8\n        args: [\"--max-line-length=88\", \"--extend-ignore=E203,E501\"]\n      - id: flake8\n        name: flake8 - dev/scripts\n        files: ^dev/scripts\n        # Make sure config is compatible with black\n        # https://black.readthedocs.io/en/stable/guides/using_black_with_other_tools.html#flake8\n        args: [\"--max-line-length=88\", \"--extend-ignore=E203,E501\"]\n\n  - repo: https://github.com/pre-commit/mirrors-eslint\n    rev: v8.25.0\n    hooks:\n      - id: eslint\n        entry: bash -c \"cd grafana-plugin && eslint --max-warnings=20 --fix ${@/grafana-plugin\\//}\" --\n        types: [file]\n        files: ^grafana-plugin/src/(?:(?!autogenerated).)*\\.(js|jsx|ts|tsx)$\n        additional_dependencies:\n          - eslint@^8.25.0\n          - eslint-plugin-import@^2.25.4\n          - eslint-plugin-rulesdir@^0.2.1\n          - eslint-plugin-unused-imports@^3.1.0\n          - \"@grafana/eslint-config@^5.0.0\"\n          - eslint-plugin-promise@^6.1.1\n\n  # - repo: https://github.com/pre-commit/mirrors-prettier\n  #   rev: \"v2.7.1\"\n  #   hooks:\n  #     - id: prettier\n  #       name: prettier\n  #       types_or: [css, javascript, jsx, ts, tsx]\n  #       files: ^grafana-plugin/src\n  #       additional_dependencies:\n  #         - prettier@2.8.2\n  #     - id: prettier\n  #       name: prettier - json\n  #       types_or: [json]\n  #       additional_dependencies:\n  #         - prettier@2.8.2\n\n  - repo: https://github.com/thibaudcolas/pre-commit-stylelint\n    rev: v13.13.1\n    hooks:\n      - id: stylelint\n        entry: bash -c \"cd grafana-plugin && stylelint --fix ${@/grafana-plugin\\//}\" --\n        types: [file]\n        files: ^grafana-plugin/src/.*\\.css$\n        additional_dependencies:\n          - stylelint@^13.13.1\n          - stylelint-prettier@^2.0.0\n          - stylelint-config-standard@^22.0.0\n          - stylelint-config-prettier@^9.0.3\n\n  - repo: https://github.com/igorshubovych/markdownlint-cli\n    rev: v0.32.2\n    hooks:\n      - id: markdownlint\n        name: markdownlint\n        entry: >\n          markdownlint --fix --ignore grafana-plugin/node_modules --ignore grafana-plugin/dist --ignore docs **/*.md\n      - id: markdownlint\n        name: markdownlint - docs/sources\n        entry: markdownlint --fix --ignore README.md -c ./docs/.markdownlint.json ./docs/sources/**/*.md\n\n  - repo: https://github.com/adrienverge/yamllint\n    rev: v1.32.0\n    hooks:\n      - id: yamllint\n        name: yamllint\n        entry: yamllint -c .yamllint.yml\n        types: [yaml]\n"
        },
        {
          "name": ".prettierignore",
          "type": "blob",
          "size": 0.0068359375,
          "content": "**/*.md"
        },
        {
          "name": ".prettierrc.js",
          "type": "blob",
          "size": 0.1025390625,
          "content": "overrides: [\n  {\n    files: [\"*.yml\", \"*.yaml\"],\n    options: {\n      singleQuote: false,\n    },\n  },\n];\n"
        },
        {
          "name": ".tilt",
          "type": "tree",
          "content": null
        },
        {
          "name": ".yamllint.yml",
          "type": "blob",
          "size": 0.181640625,
          "content": "extends: default\n\nignore: |\n  helm/oncall/templates/**/*.yaml\n  pnpm-lock.yaml\n\nrules:\n  line-length:\n    max: 120\n\n  comments:\n    min-spaces-from-content: 1\n\n  document-start: disable\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 91.47265625,
          "content": "# Changelog\n\n⚠️ This file (CHANGELOG.md) is deprecated, please see the [Releases page](https://github.com/grafana/oncall/releases)\nfor releases after v1.3.109\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## v1.3.109 (2024-03-04)\n\n### Fixed\n\n- Handle nullable shift.by_day on the frontend ([#9548](https://github.com/grafana/support-escalations/issues/9548))\n\n## v1.3.108 (2024-02-28)\n\n### Fixed\n\n- Fetch selected value of notify schedule in escalation policy, fixes ([#3966](https://github.com/grafana/oncall/issues/3966))\n  ([#3969](https://github.com/grafana/oncall/pull/3969))\n\n## v1.3.107 (2024-02-27)\n\n### Added\n\n- Add manually run task to cleanup unused integrations @mderynck ([#3941](https://github.com/grafana/oncall/pull/3941))\n\n### Changed\n\n- Change plugin build to use new packages instead of deprecated grafana-toolkit @maskin25 ([#3837](https://github.com/grafana/oncall/pull/3837))\n- Remove explicit uWSGI and Django request size limits by @vadimkerr ([#3878](https://github.com/grafana/oncall/pull/3878))\n- Migrate webhooks integration_filter to use a m2m field instead ([#3946](https://github.com/grafana/oncall/pull/3946))\n- Updated Faro package version ([#3970](https://github.com/grafana/oncall/pull/3970))\n- Integration form migration to react-hook-form ([#3979](https://github.com/grafana/oncall/pull/3979))\n\n### Fixed\n\n- Fix template preview by @vadimkerr ([#3937](https://github.com/grafana/oncall/pull/3937))\n- Fix an issue when dragging the rotation form ([#3986](https://github.com/grafana/oncall/pull/3986))\n\n## v1.3.106 (2024-02-20)\n\n### Added\n\n- Support prescribed labels ([#3848](https://github.com/grafana/oncall/pull/3848))\n- Add status change trigger type to webhooks ([#3920](https://github.com/grafana/oncall/pull/3920))\n- Add `EMAIL_USE_SSL` environment setting by @WoodyWoodsta ([#3911](https://github.com/grafana/oncall/pull/3911))\n- Add `parse_json` Jinja2 template filter by @KarimDarwish ([#3929](https://github.com/grafana/oncall/pull/3929))\n\n### Fixed\n\n- Fix edit default team by admin @mderynck ([#3885](https://github.com/grafana/oncall/pull/3885))\n- Unblock slack install by skipping check chatops gateway link in OSS deployment @mderynck ([#3893](https://github.com/grafana/oncall/pull/3893))\n- Fix multiple issues of alert groups table ([#3894](https://github.com/grafana/oncall/issues/3894))\n- Improvements for dragging the add rotation form in Schedules ([#3904](https://github.com/grafana/oncall/pull/3904))\n- Allow external-redis secret creation when the broker is rabbitmq ([#3903](https://github.com/grafana/oncall/pull/3903))\n\n### Changed\n\n- Check for permissions on Slack escalate command ([#3891](https://github.com/grafana/oncall/pull/3891))\n- Use autogenerated types on the frontend for alert receive channels ([#3331](https://github.com/grafana/oncall/issues/3331))\n- Update OnCall Insights dashboard @Ferril ([#3875](https://github.com/grafana/oncall/pull/3875))\n- Do not delete webhook if its team is deleted @mderynck ([#3873](https://github.com/grafana/oncall/pull/3873))\n- Update user details internal API perms ([#3900](https://github.com/grafana/oncall/pull/3900))\n- Add escalation to notify entire Grafana team @xssfox ([#3477](https://github.com/grafana/oncall/pull/3477))\n\n## v1.3.105 (2024-02-13)\n\n### Fixed\n\n- Quotes in templates not rendering results correctly @mderynck ([#3884](https://github.com/grafana/oncall/pull/3884))\n\n## v1.3.104 (2024-02-12)\n\n### Changed\n\n- Revert requiring permission on Slack direct paging ([#3881](https://github.com/grafana/oncall/pull/3881))\n\n## v1.3.103 (2024-02-12)\n\n### Added\n\n- Improved zvonok verification call @sreway ([#3768](https://github.com/grafana/oncall/pull/3768))\n- Add permission checks for Slack paging and shift swaps actions ([#3861](https://github.com/grafana/oncall/pull/3861))\n- Include all upcoming shifts in upcoming shifts internal endpoint ([#3871](https://github.com/grafana/oncall/pull/3871))\n\n### Changed\n\n- Allow mobile app to access escalation options endpoints @imtoori ([#3847](https://github.com/grafana/oncall/pull/3847))\n- Enable templating for alert escalation mobile app push notifications by @joeyorlando ([#3845](https://github.com/grafana/oncall/pull/3845))\n- Change email notification template to not wrap user template @mderynck ([#3862](https://github.com/grafana/oncall/pull/3862))\n- Update integration name uniqueness check to be per team ([#3863](https://github.com/grafana/oncall/pull/3863))\n\n### Fixed\n\n- Fix rounding issue with displayed time when sending \"You're going oncall\" push notification by @joeyorlando ([#3872](https://github.com/grafana/oncall/pull/3872))\n\n## v1.3.102 (2024-02-06)\n\n### Fixed\n\nMaintenance release\n\n## v1.3.101 (2024-02-05)\n\n### Added\n\n– Enable labels feature (Currently cloud-only)\n\n### Fixed\n\n- Address outgoing webhook encoding error when passing non-latin characters in the webhook request body by @joeyorlando\n  ([#3832](https://github.com/grafana/oncall/pull/3832))\n\n## v1.3.100 (2024-02-01)\n\n### Added\n\n- Allow configuration of outgoing webhook timeout via `OUTGOING_WEBHOOK_TIMEOUT` environment variable @kevindw-fluxys ([#3801](https://github.com/grafana/oncall/pull/3801))\n- Include teams info in users API ([#3817](https://github.com/grafana/oncall/pull/3817))\n\n### Fixed\n\n- Handle alert group does not exist on telegram button press ([#3814](https://github.com/grafana/oncall/pull/3814))\n\n## v1.3.99 (2024-02-01)\n\n### Added\n\n- Render alert group action buttons even if getting AG data fails ([#2383](https://github.com/grafana/oncall-private/issues/2383))\n- Enable Grafana Alerting V2 feature flag by default\n\n### Fixed\n\n- Incorrect end date on creating weekly on-call shift ([#3755](https://github.com/grafana/oncall/issues/3755))\n\n## v1.3.98 (2024-02-01)\n\n### Fixed\n\nMaintenance release\n\n## v1.3.97 (2024-01-31)\n\n### Changed\n\n- Ensure alert group log records are committed to DB before signalling about them @mderynck([#3731](https://github.com/grafana/oncall/pull/3731))\n\n### Fixed\n\n- Address `SlackAPIRatelimitError` exceptions in `apps.slack.tasks.send_message_to_thread_if_bot_not_in_channel` task\n  by @joeyorlando ([#3803](https://github.com/grafana/oncall/pull/3803))\n- Fix exception when parsing incident plugin config @mderynck ([#3802](https://github.com/grafana/oncall/pull/3802))\n\n## v1.3.96 (2024-01-31)\n\n### Added\n\n- Allow routing incoming alerts based on labels by @joeyorlando ([#3778](https://github.com/grafana/oncall/pull/3778))\n\n### Changed\n\n- Remove `/oncall` Slack slash command (ie. manual alert group creation command) by @joeyorlando ([#3790](https://github.com/grafana/oncall/pull/3790))\n- Increase frequency of checking for gaps and empty shifts in schedules by @Ferril ([#3785](https://github.com/grafana/oncall/pull/3785))\n\n### Fixed\n\n- Fixed checking whether user has telegram connection for `get_telegram_verification_code` endpoint by @Ferril ([#3794](https://github.com/grafana/oncall/pull/3794))\n- Fix interval validation when creating shift via public API ([#3775](https://github.com/grafana/oncall/pull/3775))\n- Fix list user serializer logic refactoring ([3793](https://github.com/grafana/oncall/pull/3793))\n\n## v1.3.94 (2024-01-30)\n\n### Added\n\n- Improved logging during plugin sync and install with Grafana @mderynck ([#3730](https://github.com/grafana/oncall/pull/3730))\n- Added `is_currently_oncall` information to internal user details API ([#3765](https://github.com/grafana/oncall/pull/3765))\n- Add a modal for autoresolve and grouping templates for Alertmanager-based integrations ([#3764](https://github.com/grafana/oncall/pull/3764))\n\n### Fixed\n\n- Fixed too frequent retry of `perform_notification` task on Telegram ratelimit error by @Ferril ([#3744](https://github.com/grafana/oncall/pull/3744))\n- Dynamic labels & multi-label extraction label are broken ([#3750](https://github.com/grafana/oncall/issues/3750))\n- Add check whether organization has Slack connection on update Slack related field using public api endpoints\n  by @Ferril ([#3751](https://github.com/grafana/oncall/pull/3751))\n- Fixed calculating the number of on-call users per team by @Ferril ([#3773](https://github.com/grafana/oncall/pull/3773))\n- Refactor create_alert task by @iskhakov ([#3604](https://github.com/grafana/oncall/pull/3759))\n\n## v1.3.92 (2024-01-23)\n\nMaintenance release\n\n## v1.3.91 (2024-01-23)\n\n### Changed\n\n- Improved alert group table columns spacing ([#3712](https://github.com/grafana/oncall/pull/3712))\n\n## v1.3.90 (2024-01-18)\n\n### Changed\n\n- Improvements for the columns selector ([3668](https://github.com/grafana/oncall/pull/3668))\n\n### Fixed\n\n- Address infinite retrying `apps.alerts.tasks.notify_user.perform_notification` task when `UserNotificationPolicyLogRecord`\n  object cannot be found by @joeyorlando ([#3708](https://github.com/grafana/oncall/pull/3708))\n\n## v1.3.89 (2024-01-17)\n\n### Fixed\n\n- Fixed Webhooks UI not allowing simple webhooks to be created ([#3691](https://github.com/grafana/oncall/pull/3691))\n- Fix posting Slack message when route is deleted by @vadimkerr ([#3702](https://github.com/grafana/oncall/pull/3702))\n\n### Changed\n\n- Update schedules on-call users cache on every scheduled schedule refresh task ([#3699](https://github.com/grafana/oncall/pull/3699)).\n\n## v1.3.88 (2024-01-16)\n\n### Fixed\n\n- Fix updating a shift swap with no Slack message by @vadimkerr ([#3686](https://github.com/grafana/oncall/pull/3686))\n\n## v1.3.87 (2024-01-15)\n\n### Fixed\n\n- Fix occasional `AttributeError` in `apps.grafana_plugin.tasks.sync.sync_organization_async` task by @joeyorlando ([#3687](https://github.com/grafana/oncall/pull/3687))\n\n## v1.3.86 (2024-01-12)\n\n### Fixed\n\n- Fix unicode characters not rendering correctly in webhooks @mderynck ([#3670](https://github.com/grafana/oncall/pull/3670))\n- UI bug related to time inputs for \"current UTC time is in\" range escalation policy step ([#3585](https://github.com/grafana/oncall/issues/3585)]\n- MS Teams Connection user profile tab - shouldn't reshow connection steps if already connected ([#2427](https://github.com/grafana/oncall-private/issues/2427))\n- Fix internal schedule detail API to set oncall_now for a schedule in orgs with multiple entries ([#3671](https://github.com/grafana/oncall/pull/3671))\n\n## v1.3.85 (2024-01-12)\n\nMaintenance release\n\n## v1.3.84 (2024-01-10)\n\n### Added\n\n- Add endpoint for alert group escalation snapshot by @Ferril ([#3615](https://github.com/grafana/oncall/pull/3615))\n\n### Changed\n\n- Do not retry `firebase.messaging.UnregisteredError` exceptions for FCM relay tasks by @joeyorlando ([#3637](https://github.com/grafana/oncall/pull/3637))\n- Decrease outgoing webhook timeouts from 10secs to 4secs by @joeyorlando ([#3639](https://github.com/grafana/oncall/pull/3639))\n- Add stack slug to `/organization` endpoint response by @Ferril ([#3644](https://github.com/grafana/oncall/pull/3644))\n- Moved Mobile Connection Tab to separate user profile in Grafana ([#3296](https://github.com/grafana/oncall/pull/3296)\n\n### Fixed\n\n- Address HTTP 500s occurring when receiving messages from Telegram user in a discussion group by @joeyorlando ([#3622](https://github.com/grafana/oncall/pull/3622))\n- Fix `module 'apps.schedules.tasks.notify_about_empty_shifts_in_schedule' has no attribute 'apply_async'`\n  `AttributeError` by @joeyorlando ([#3640](https://github.com/grafana/oncall/pull/3640))\n\n## v1.3.83 (2024-01-08)\n\n### Changed\n\n- Move Insights to OnCall as a separate page ([#2382](https://github.com/grafana/oncall-private/issues/2382))\n- Allow mobile app to access paging endpoint @imtoori ([#3619](https://github.com/grafana/oncall/pull/3619))\n- Create log record when there is a telegram formatting error in notification ([#3628](https://github.com/grafana/oncall/pull/3628))\n\n### Fixed\n\n- Fixed schedule timezone issues ([#3576](https://github.com/grafana/oncall/issues/3576))\n- Ignore `requests.exceptions.Timeout` exceptions when attempting to send outgoing webhook requests by @joeyorlando ([#3632](https://github.com/grafana/oncall/pull/3632))\n\n## v1.3.82 (2024-01-04)\n\n### Added\n\n- Add ability to create an Outgoing Webhook with the PATCH HTTP method via the UI by @joeyorlando ([#3604](https://github.com/grafana/oncall/pull/3604))\n\n### Changed\n\n- Handle message to reply to not found in Telegram send log ([#3587](https://github.com/grafana/oncall/pull/3587))\n- Upgrade mobx lib to the latest version 6.12.0 ([#3453](https://github.com/grafana/oncall/issues/3453))\n- Add task lock to avoid running multiple sync_organization tasks in parallel for the same org ([#3612](https://github.com/grafana/oncall/pull/3612))\n\n## v1.3.81 (2023-12-28)\n\n### Added\n\n- Support e2e tests in Tilt and Makefile ([#3516](https://github.com/grafana/oncall/pull/3516))\n- Support PATCH method for outgoing webhooks by @ravishankar15 ([#3580](https://github.com/grafana/oncall/pull/3580))\n\n### Changed\n\n- Limit acknowledge reminders to stop repeating after 1 month @mderynck ([#3571](https://github.com/grafana/oncall/pull/3571))\n\n### Fixed\n\n- Check reason to skip notification in Slack to avoid task perform_notification retries @Ferril ([#3562](https://github.com/grafana/oncall/pull/3562))\n- Fix alert group table columns validation @Ferril ([#3577](https://github.com/grafana/oncall/pull/3577))\n- Fix posting message about rate limit to Slack @Ferril ([#3582](https://github.com/grafana/oncall/pull/3582))\n- Fix issue with parsing sender email address from email message for inbound email integration endpoint @Ferril ([#3586](https://github.com/grafana/oncall/pull/3586))\n- Fix PUT /api/v1/escalation_policies/id issue when updating `from_time` and `to_time` by @joeyorlando ([#3581](https://github.com/grafana/oncall/pull/3581))\n- Fix issue where duplicate team options would show up in the teams dropdown for the `/escalate` Slack command\n  by @joeyorlando ([#3590](https://github.com/grafana/oncall/pull/3590))\n\n## v1.3.80 (2023-12-14)\n\n### Added\n\n- Create success log records for delivered personal notifications ([3557](https://github.com/grafana/oncall/pull/3557))\n\n## v1.3.79 (2023-12-14)\n\n### Added\n\n- Add backend for multi-stack support for mobile-app @Ferril ([#3500](https://github.com/grafana/oncall/pull/3500))\n\n## v1.3.78 (2023-12-12)\n\n### Changed\n\n- Add error code for mobile push notification logs when device is not set up @Ferril ([#3554](https://github.com/grafana/oncall/pull/3554))\n\n### Fixed\n\n- Fix issue when mobile push notification message is too big @Ferril ([#3556](https://github.com/grafana/oncall/pull/3556)\n\n## v1.3.77 (2023-12-11)\n\n### Fixed\n\n- Fix schedules invalid dates issue ([#support-escalations/issues/8084](https://github.com/grafana/support-escalations/issues/8084))\n- Fix issue related to updating alert group metrics when deleting an alert group via the public API by @joeyorlando ([#3544](https://github.com/grafana/oncall/pull/3544))\n- Fix issue with `amazon_ses` inbound email ESP provider by @Lutseslav ([#3509](https://github.com/grafana/oncall/pull/3509))\n\n## v1.3.76 (2023-12-11)\n\n### Fixed\n\n– Fix minor UI bugs\n\n## v1.3.75 (2023-12-08)\n\n### Fixed\n\n- Fix setting integration team to default on update @Ferril ([#3530](https://github.com/grafana/oncall/pull/3530))\n\n## v1.3.74 (2023-12-06)\n\n### Fixed\n\n- Fix missing timestamp value in old grafana API endpoint ([#3522](https://github.com/grafana/oncall/pull/3522))\n\n## v1.3.73 (2023-12-06)\n\n### Added\n\n- Track alert received timestamp on alert group creation ([#3513](https://github.com/grafana/oncall/pull/3513))\n\n## v1.3.72 (2023-12-05)\n\n### Fixed\n\n- Address metrics calculation issue which occurred when `USE_REDIS_CLUSTER` env var was set by @joeyorlando ([#3510](https://github.com/grafana/oncall/pull/3510))\n\n## v1.3.71 (2023-12-05)\n\n### Added\n\n- Add `datetimeformat_as_timezone` Jinja2 template helper filter by @jorgeav ([#3426](https://github.com/grafana/oncall/pull/3426))\n\n### Changed\n\n- Disallow creating and deleting direct paging integrations by @vadimkerr ([#3475](https://github.com/grafana/oncall/pull/3475))\n- Renamed \"Connections\" tab to \"Monitoring Systems\" and \"Direct Paging\" to \"Manual Direct Paging\" on Integrations page\n\n## v1.3.70 (2023-12-01)\n\nMaintenance release\n\n## v1.3.69 (2023-12-01)\n\nMaintenance release + bugfixes\n\n## v1.3.68 (2023-11-30)\n\n### Fixed\n\n- Create missing direct paging integrations on organization sync by @vadimkerr ([#3468](https://github.com/grafana/oncall/pull/3468))\n\n## v1.3.67 (2023-11-30)\n\nMinor bugfixes + dependency updates :)\n\n## v1.3.66 (2023-11-30)\n\n### Fixed\n\n- Delete duplicate direct paging integrations by @vadimkerr ([#3412](https://github.com/grafana/oncall/pull/3412))\n\n## v1.3.65 (2023-11-29)\n\n### Added\n\n- Add options to customize table columns in AlertGroup page ([3281](https://github.com/grafana/oncall/pull/3281))\n- Add proxying capabilities for the OnCall mobile API by @joeyorlando ([#3449](https://github.com/grafana/oncall/pull/3449))\n\n### Fixed\n\n- User profile UI tweaks ([#3443](https://github.com/grafana/oncall/pull/3443))\n- Ensure stack_id and org_id are ints @mderynck [(#3458](https://github.com/grafana/oncall/pull/3458))\n\n## v1.3.64 (2023-11-28)\n\n### Fixed\n\n- Fix excess usage of bots_info slack api call to avoid ratelimits ([#3440](https://github.com/grafana/oncall/pull/3440))\n\n## v1.3.63 (2023-11-28)\n\n### Added\n\n- Add ability to use Grafana Service Account Tokens for OnCall API (This is only enabled for resolution_notes\n  endpoint currently) @mderynck ([#3189](https://github.com/grafana/oncall/pull/3189))\n- Add ability for webhook presets to mask sensitive headers @mderynck\n  ([#3189](https://github.com/grafana/oncall/pull/3189))\n\n### Changed\n\n- Use instance ID for cloud Grafana service token auth @mderynck ([#3435](https://github.com/grafana/oncall/pull/3435))\n\n### Fixed\n\n- Fixed issue that blocked saving webhooks with presets if the preset is controlling the URL @mderynck\n  ([#3189](https://github.com/grafana/oncall/pull/3189))\n- User filter doesn't display current value on Alert Groups page ([1714](https://github.com/grafana/oncall/issues/1714))\n- Remove displaying rotation modal for Terraform/API based schedules\n- Filters polishing ([3183](https://github.com/grafana/oncall/issues/3183))\n- Fixed permissions so User settings reader role included list users @mderynck ([#3419](https://github.com/grafana/oncall/pull/3419))\n- Fixed alert group rendering when some links were broken because of replacing `-` to `_` @Ferril ([#3424](https://github.com/grafana/oncall/pull/3424))\n- Make telegram on_alert_group_action_triggered asynchronous([#3471](https://github.com/grafana/oncall/pull/3471))\n\n## v1.3.62 (2023-11-21)\n\n### Added\n\n- Add builtin slack retry on ratelimited error ([#3401](https://github.com/grafana/oncall/pull/3401))\n\n### Changed\n\n- Add integration id to alert creation logging @mderynck ([#3392](https://github.com/grafana/oncall/pull/3392))\n\n## v1.3.61 (2023-11-21)\n\n### Fixed\n\n- Fix deleting integrations with duplicate names by @vadimkerr ([#3397](https://github.com/grafana/oncall/pull/3397))\n\n## v1.3.60 (2023-11-20)\n\n### Fixed\n\n- Fixes forwarding of Amazon SNS headers @mderynck ([#3371](https://github.com/grafana/oncall/pull/3371))\n- Fixes issue when using the `/escalate` Slack command and selecting a team by @joeyorlando ([#3381](https://github.com/grafana/oncall/pull/3381))\n- Fix issue when RBAC is enabled where Viewers with \"Notifications Receiver\" role do not properly show up in schedule\n  rotations by @joeyorlando ([#3378](https://github.com/grafana/oncall/pull/3378))\n\n## v1.3.59 (2023-11-16)\n\n### Added\n\n- Populate `users` field of the public Shift GET API with `rolling_users` from the type override created from web UI([#3303](https://github.com/grafana/oncall/pull/3303))\n- Do not retry to update slack user group on every API error ([#3363](https://github.com/grafana/oncall/pull/3363))\n- Allow specifying a comma-separated list of redis-servers to the `REDIS_URI` engine environment variable by @joeyorlando\n  ([#3368](https://github.com/grafana/oncall/pull/3368))\n\n### Fixed\n\n- Fixed recurrency limit issue in the Rotation Modal ([#3358](https://github.com/grafana/oncall/pull/3358))\n- Added dragging boundary constraints for Rotation Modal and show scroll for the users list ([#3365](https://github.com/grafana/oncall/pull/3365))\n- Delete direct paging integration on team delete by @vadimkerr ([#3367](https://github.com/grafana/oncall/pull/3367))\n\n## v1.3.58 (2023-11-14)\n\n### Added\n\n- Added user timezone field to the users public API response ([#3311](https://github.com/grafana/oncall/pull/3311))\n- Allow filtering users by public primary key in internal API ([#3339](https://github.com/grafana/oncall/pull/3339))\n\n### Changed\n\n- Split Integrations table into Connections and Direct Paging tabs ([#3290](https://github.com/grafana/oncall/pull/3290))\n\n### Fixed\n\n- Fix issue where Slack user connection error message is sometimes shown despite successful connection by @joeyorlando ([#3327](https://github.com/grafana/oncall/pull/3327))\n- Forward headers for Amazon SNS when organizations are moved @mderynck ([#3326](https://github.com/grafana/oncall/pull/3326))\n- Fix styling when light theme is turned on via system preferences\n  by excluding dark theme css vars in this case ([#3336](https://github.com/grafana/oncall/pull/3336))\n- Fix issue when acknowledge reminder works for deleted organizations @Ferril ([#3345](https://github.com/grafana/oncall/pull/3345))\n- Fix generating QR code ([#3347](https://github.com/grafana/oncall/pull/3347))\n\n## v1.3.57 (2023-11-10)\n\n### Fixed\n\n- Fix AmazonSNS integration to handle exceptions the same as other integrations @mderynck ([#3315](https://github.com/grafana/oncall/pull/3315))\n\n## v1.3.56 (2023-11-10)\n\n## v1.3.55 (2023-11-07)\n\n### Changed\n\n- Unify naming of Grafana Cloud / Cloud OnCall / Grafana Cloud OnCall\n  so that it's always Grafana Cloud OnCall ([#3279](https://github.com/grafana/oncall/pull/3279))\n\n### Fixed\n\n- Fix escalation policy importance going back to default by @vadimkerr ([#3282](https://github.com/grafana/oncall/pull/3282))\n- Improve user permissions query ([#3291](https://github.com/grafana/oncall/pull/3291))\n\n## v1.3.54 (2023-11-06)\n\n### Added\n\n- Add `b64decode` Jinja2 template helper filter by @jorgeav ([#3242](https://github.com/grafana/oncall/pull/3242))\n\n## v1.3.53 (2023-11-03)\n\n### Fixed\n\n- Fix db migration for mobile app @Ferril ([#3260](https://github.com/grafana/oncall/pull/3260))\n\n## v1.3.52 (2023-11-02)\n\n### Fixed\n\n- Address `TypeError` that occurs under some scenarios on the Alert Group detail page\n\n### Changed\n\n- Change wording for push notifications timing choices @Ferril ([#3253](https://github.com/grafana/oncall/pull/3253))\n\n## v1.3.51 (2023-11-02)\n\n### Fixed\n\n- Postpone Legacy AlertManager and Grafana Alerting integration auto-migration date ([3250])(<https://github.com/grafana/oncall/pull/3250>)\n\n## v1.3.50 (2023-11-02)\n\n### Fixed\n\n- Return alert groups for deleted integrations on private api ([3223](https://github.com/grafana/oncall/pull/3223))\n\n## v1.3.49 (2023-10-31)\n\n### Changed\n\n- Removed the hardcoding of page size on frontend ([#3205](https://github.com/grafana/oncall/pull/3205))\n- Prevent additional polling on Incidents if the previous request didn't complete\n  ([#3205](https://github.com/grafana/oncall/pull/3205))\n- Order results from `GET /teams` internal API endpoint by ascending name by @joeyorlando ([#3220](https://github.com/grafana/oncall/pull/3220))\n- Order alert groups internal API endpoint by descending started_at by @mderynck ([#3240](https://github.com/grafana/oncall/pull/3240))\n\n### Fixed\n\n- Improve slow `GET /users` + `GET /teams` internal API endpoints by @joeyorlando ([#3220](https://github.com/grafana/oncall/pull/3220))\n- Fix search issue when searching for teams in the add responders popup window by @joeyorlando ([#3220](https://github.com/grafana/oncall/pull/3220))\n- CSS changes to add responders dropdown to fix long search results list by @joeyorlando ([#3220](https://github.com/grafana/oncall/pull/3220))\n- Do not allow to update terraform-based shifts in web UI schedule API ([#3224](https://github.com/grafana/oncall/pull/3224))\n\n## v1.3.48 (2023-10-30)\n\n### Added\n\n- Data type changed from `DateField` to `DateTimeField` on the `final_shifts` API endpoint. Endpoint now accepts either\n  a date or a datetime ([#3103](https://github.com/grafana/oncall/pull/3103))\n\n### Changed\n\n- Simplify Direct Paging workflow. Now when using Direct Paging you either simply specify a team, or one or more users\n  to page by @joeyorlando ([#3128](https://github.com/grafana/oncall/pull/3128))\n- Enable timing options for mobile push notifications, allow multi-select by @Ferril ([#3187](https://github.com/grafana/oncall/pull/3187))\n\n### Fixed\n\n- Fix RBAC authorization bugs related to interacting with Alert Group Slack messages by @joeyorlando ([#3213](https://github.com/grafana/oncall/pull/3213))\n\n## v1.3.47 (2023-10-25)\n\n### Fixed\n\n- Add filtering term length check for channel filter endpoints @Ferril ([#3192](https://github.com/grafana/oncall/pull/3192))\n\n## v1.3.46 (2023-10-23)\n\n### Added\n\n- Check for basic role permissions on get/create/update labels @Ferril ([#3173](https://github.com/grafana/oncall/pull/3173))\n\n### Fixed\n\n- Discard old pending network requests in the UI (Users/Schedules) [#3172](https://github.com/grafana/oncall/pull/3172)\n- Fix resolution note source for mobile app by @vadimkerr ([#3174](https://github.com/grafana/oncall/pull/3174))\n- Fix iCal imported schedules related users and next shifts per user ([#3178](https://github.com/grafana/oncall/pull/3178))\n- Fix references to removed access control functions in Grafana @mderynck ([#3184](https://github.com/grafana/oncall/pull/3184))\n\n### Changed\n\n- Upgrade Django to 4.2.6 and update iCal related deps ([#3176](https://github.com/grafana/oncall/pull/3176))\n\n## v1.3.45 (2023-10-19)\n\n### Added\n\n- Use shift data from event object\n- Update shifts public API to improve web shifts support ([#3165](https://github.com/grafana/oncall/pull/3165))\n\n### Fixed\n\n- Update ical schedule creation/update to trigger final schedule refresh ([#3156](https://github.com/grafana/oncall/pull/3156))\n- Handle None role when syncing users from Grafana ([#3147](https://github.com/grafana/oncall/pull/3147))\n- Polish \"Build 'When I am on-call' for web UI\" [#2915](https://github.com/grafana/oncall/issues/2915)\n- Fix iCal schedule incorrect view [#2001](https://github.com/grafana/oncall-private/issues/2001)\n- Fix rotation name rendering issue [#2324](https://github.com/grafana/oncall/issues/2324)\n\n### Changed\n\n- Add user TZ information to next shifts per user endpoint ([#3157](https://github.com/grafana/oncall/pull/3157))\n\n## v1.3.44 (2023-10-16)\n\n### Added\n\n- Update plugin OnCaller role permissions ([#3145](https://github.com/grafana/oncall/pull/3145))\n- Add labels implementation for OnCall integrations under the feature flag ([#3014](https://github.com/grafana/oncall/pull/3014))\n\n### Fixed\n\n- Fix plugin status to always return URL with trailing / @mderynck ([#3122](https://github.com/grafana/oncall/pull/3122))\n\n## v1.3.43 (2023-10-05)\n\n### Added\n\n- Make it possible to acknowledge/unacknowledge and resolve/unresolve alert groups via API by @vadimkerr ([#3108](https://github.com/grafana/oncall/pull/3108))\n\n### Changed\n\n- Improve alert group deletion API by @vadimkerr ([#3124](https://github.com/grafana/oncall/pull/3124))\n- Removed Integrations Name max characters limit\n  ([#3123](https://github.com/grafana/oncall/pull/3123))\n- Truncate long table rows (Integration Name/Alert Group) and show tooltip for the truncated content\n  ([#3123](https://github.com/grafana/oncall/pull/3123))\n\n## v1.3.42 (2023-10-04)\n\n### Added\n\n- Add additional shift info in schedule filter_events internal API ([#3110](https://github.com/grafana/oncall/pull/3110))\n\n## v1.3.41 (2023-10-04)\n\n### Added\n\n- New RBAC action `grafana-oncall-app.alert-groups:direct-paging` and role \"Alert Groups Direct Paging\" by @joeyorlando\n  ([#3107](https://github.com/grafana/oncall/pull/3107))\n\n### Fixed\n\n- Accept empty and null user when updating webhook via API @mderynck ([#3094](https://github.com/grafana/oncall/pull/3094))\n- Fix slack notification for a shift which end is affected by a taken swap ([#3092](https://github.com/grafana/oncall/pull/3092))\n\n## v1.3.40 (2023-09-28)\n\n### Added\n\n- Create Direct Paging integration by default for every team, create default E-Mail notification policy for every user ([#3064](https://github.com/grafana/oncall/pull/3064))\n\n## v1.3.39 (2023-09-27)\n\n### Added\n\n- Presets for webhooks @mderynck ([#2996](https://github.com/grafana/oncall/pull/2996))\n- Add `enable_web_overrides` option to schedules public API ([#3062](https://github.com/grafana/oncall/pull/3062))\n\n### Fixed\n\n- Fix regression in public actions endpoint handling user field by @mderynck ([#3053](https://github.com/grafana/oncall/pull/3053))\n\n### Changed\n\n- Rework how users are fetched from DB when getting users from schedules ical representation ([#3067](https://github.com/grafana/oncall/pull/3067))\n\n## v1.3.38 (2023-09-19)\n\n### Fixed\n\n- Fix Slack access token length issue by @toolchainX ([#3016](https://github.com/grafana/oncall/pull/3016))\n- Fix shifts for current user internal endpoint to return the right shift PK ([#3036](https://github.com/grafana/oncall/pull/3036))\n- Handle Slack ratelimit on alert group deletion by @vadimkerr ([#3038](https://github.com/grafana/oncall/pull/3038))\n\n## v1.3.37 (2023-09-12)\n\n### Added\n\n- Notify user via Slack/mobile push-notification when their shift swap request is taken by @joeyorlando ([#2992](https://github.com/grafana/oncall/pull/2992))\n- Unify breadcrumbs behaviour with other Grafana Apps and main core# ([1906](https://github.com/grafana/oncall/issues/1906))\n\n### Changed\n\n- Improve Slack error handling by @vadimkerr ([#3000](https://github.com/grafana/oncall/pull/3000))\n\n### Fixed\n\n- Avoid task retries because of missing AlertGroupLogRecord on send_alert_group_signal ([#3001](https://github.com/grafana/oncall/pull/3001))\n- Update escalation policies public API to handle new webhooks ([#2999](https://github.com/grafana/oncall/pull/2999))\n\n## v1.3.36 (2023-09-07)\n\n### Added\n\n- Add option to create new contact point for existing integrations ([#2909](https://github.com/grafana/oncall/issues/2909))\n\n### Changed\n\n- Enable email notification step by default on Helm by @vadimkerr ([#2975](https://github.com/grafana/oncall/pull/2975))\n- Handle slack resolution note errors consistently ([#2976](https://github.com/grafana/oncall/pull/2976))\n\n### Fixed\n\n- Don't update Slack user groups for deleted organizations by @vadimkerr ([#2985](https://github.com/grafana/oncall/pull/2985))\n- Fix Slack integration leftovers after disconnecting by @vadimkerr ([#2986](https://github.com/grafana/oncall/pull/2986))\n- Fix handling Slack rate limits by @vadimkerr ([#2991](https://github.com/grafana/oncall/pull/2991))\n\n## v1.3.35 (2023-09-05)\n\n### Fixed\n\n- Fix issue in `SlackClientWithErrorHandling` paginted API calls by @joeyorlando\n\n## v1.3.34 (2023-09-05)\n\n### Fixed\n\n- Fix issue in `apps.slack.tasks.populate_slack_channels_for_team` task by @joeyorlando ([#2969](https://github.com/grafana/oncall/pull/2969))\n\n## v1.3.33 (2023-09-05)\n\n### Fixed\n\n- Fix issue in `apps.slack.tasks.post_or_update_log_report_message_task` task related to passing tuple to `text` arg\n  for `SlackClient.chat_postMessage` method by @joeyorlando ([#2966](https://github.com/grafana/oncall/pull/2966))\n\n## v1.3.32 (2023-09-05)\n\n### Added\n\n- Add internal API endpoint for getting schedules shifts for current user by @Ferril ([#2928](https://github.com/grafana/oncall/pull/2928))\n\n### Changed\n\n- Make Slack integration not post an alert group message if it's already deleted + refactor AlertGroup and\n  SlackMessage foreign key relationship by @vadimkerr ([#2957](https://github.com/grafana/oncall/pull/2957))\n\n### Fixed\n\n- Reject file uploads when POSTing to an integration endpoint ([#2958](https://github.com/grafana/oncall/pull/2958))\n\n## v1.3.31 (2023-09-04)\n\n### Fixed\n\n- Fix for Cloud plugin install not refreshing page after completion ([2974](https://github.com/grafana/oncall/issues/2874))\n- Fix escalation snapshot building if user was deleted @Ferril ([#2954](https://github.com/grafana/oncall/pull/2954))\n\n### Added\n\n- ([Use Tilt for local development](https://github.com/grafana/oncall/pull/1396))\n\n### Changed\n\n- Update slack schedule shift-changed notification ([#2949](https://github.com/grafana/oncall/pull/2949))\n\n## v1.3.30 (2023-08-31)\n\n### Added\n\n- Add optional param to expand user details in shift swaps internal endpoints ([#2923](https://github.com/grafana/oncall/pull/2923))\n\n### Changed\n\n- Update Shift Swap Request Slack message formatting by @joeyorlando ([#2918](https://github.com/grafana/oncall/pull/2918))\n- Performance and UX tweaks to integrations page ([#2869](https://github.com/grafana/oncall/pull/2869))\n- Expand users details in filter swaps internal endpoint ([#2921](https://github.com/grafana/oncall/pull/2921))\n- Truncate exported final shifts to match the requested period ([#2924](https://github.com/grafana/oncall/pull/2924))\n\n### Fixed\n\n- Fix issue with helm chart when specifying `broker.type=rabbitmq` where Redis environment variables\n  were not longer being injected by @joeyorlando ([#2927](https://github.com/grafana/oncall/pull/2927))\n- Fix silence for alert groups with empty escalation chain @Ferril ([#2929](https://github.com/grafana/oncall/pull/2929))\n- Fixed NPE when migrating legacy Grafana Alerting integrations ([#2908](https://github.com/grafana/oncall/issues/2908))\n- Fix `IntegrityError` exceptions that occasionally would occur when trying to create `ResolutionNoteSlackMessage`\n  objects by @joeyorlando ([#2933](https://github.com/grafana/oncall/pull/2933))\n\n## v1.3.29 (2023-08-29)\n\n### Fixed\n\n- Fix metrics calculation and OnCall dashboard, rename dashboard @Ferril ([#2895](https://github.com/grafana/oncall/pull/2895))\n- Fix slack schedule notification settings dialog ([#2902](https://github.com/grafana/oncall/pull/2902))\n\n## v1.3.28 (2023-08-29)\n\n### Changed\n\n- Switch engine to alpine base image ([2872](https://github.com/grafana/oncall/pull/2872))\n\n### Added\n\n- Visualization of shift swap requests in Overrides and swaps section ([#2844](https://github.com/grafana/oncall/issues/2844))\n\n### Fixed\n\n- Address bug when a Shift Swap Request is accepted either via the web or mobile UI, and the Slack message is not\n  updated to reflect the latest state by @joeyorlando ([#2886](https://github.com/grafana/oncall/pull/2886))\n- Fix issue where Grafana integration would fail to parse alerting config for routes without receivers @mderynck\n  ([#2894](https://github.com/grafana/oncall/pull/2894))\n\n## v1.3.27 (2023-08-25)\n\n### Added\n\n- Public API for webhooks @mderynck ([#2790](https://github.com/grafana/oncall/pull/2790))\n- Use Telegram polling protocol instead of a webhook if `FEATURE_TELEGRAM_LONG_POLLING_ENABLED` set to `True` by @alexintech\n  ([#2250](https://github.com/grafana/oncall/pull/2250))\n\n### Changed\n\n- Public API for actions now wraps webhooks @mderynck ([#2790](https://github.com/grafana/oncall/pull/2790))\n- Allow mobile app to access status endpoint @mderynck ([#2791](https://github.com/grafana/oncall/pull/2791))\n- Enable shifts export endpoint for all schedule types ([#2863](https://github.com/grafana/oncall/pull/2863))\n- Use priority field to track primary/overrides calendar in schedule iCal export ([#2871](https://github.com/grafana/oncall/pull/2871))\n\n### Fixed\n\n- Fix public api docs for escalation policies by @Ferril ([#2830](https://github.com/grafana/oncall/pull/2830))\n\n## v1.3.26 (2023-08-22)\n\n### Changed\n\n- Increase mobile app verification token TTL by @joeyorlando ([#2859](https://github.com/grafana/oncall/pull/2859))\n\n### Fixed\n\n- Changed HTTP Endpoint to Email for inbound email integrations\n  ([#2816](https://github.com/grafana/oncall/issues/2816))\n- Enable inbound email feature flag by default by @vadimkerr ([#2846](https://github.com/grafana/oncall/pull/2846))\n- Fixed initial search on Users page ([#2842](https://github.com/grafana/oncall/issues/2842))\n\n## v1.3.25 (2023-08-18)\n\n### Changed\n\n- Improve Grafana Alerting integration by @Ferril @teodosii ([#2742](https://github.com/grafana/oncall/pull/2742))\n- Fixed UTC conversion for escalation chain step of timerange\n  ([#2781](https://github.com/grafana/oncall/issues/2781))\n\n### Fixed\n\n- Check for possible split events in range when resolving schedule ([#2828](https://github.com/grafana/oncall/pull/2828))\n\n## v1.3.24 (2023-08-17)\n\n### Added\n\n- Shift swap requests public API ([#2775](https://github.com/grafana/oncall/pull/2775))\n- Shift swap request Slack follow-ups by @vadimkerr ([#2798](https://github.com/grafana/oncall/pull/2798))\n- Shift swap request push notification follow-ups by @vadimkerr ([#2805](https://github.com/grafana/oncall/pull/2805))\n\n### Changed\n\n- Improve default AlertManager template ([#2794](https://github.com/grafana/oncall/pull/2794))\n\n### Fixed\n\n- Ignore ical cancelled events when calculating shifts ([#2776](https://github.com/grafana/oncall/pull/2776))\n- Fix Slack acknowledgment reminders by @vadimkerr ([#2769](https://github.com/grafana/oncall/pull/2769))\n- Fix issue with updating \"Require resolution note\" setting by @Ferril ([#2782](https://github.com/grafana/oncall/pull/2782))\n- Don't send notifications about past SSRs when turning on info notifications by @vadimkerr ([#2783](https://github.com/grafana/oncall/pull/2783))\n- Add schedule shift type validation on create/preview ([#2789](https://github.com/grafana/oncall/pull/2789))\n- Add alertmanager integration for heartbeat support ([2807](https://github.com/grafana/oncall/pull/2807))\n\n## v1.3.23 (2023-08-10)\n\n### Added\n\n- Shift Swap Requests Web UI ([#2593](https://github.com/grafana/oncall/issues/2593))\n- Final schedule shifts should lay in one line ([#1665](https://github.com/grafana/oncall/issues/1665))\n- Add backend support for push notification sounds with custom extensions by @vadimkerr ([#2759](https://github.com/grafana/oncall/pull/2759))\n\n### Changed\n\n- Add stack slug to organization options for direct paging Slash command by @vadimkerr ([#2743](https://github.com/grafana/oncall/pull/2743))\n- Avoid creating (or notifying about) potential event splits resulting from untaken swap requests ([#2748](https://github.com/grafana/oncall/pull/2748))\n- Refactor heartbeats into a periodic task ([2723](https://github.com/grafana/oncall/pull/2723))\n\n### Fixed\n\n- Do not show override shortcut when web overrides are disabled ([#2745](https://github.com/grafana/oncall/pull/2745))\n- Handle ical schedule import with duplicated event UIDs ([#2760](https://github.com/grafana/oncall/pull/2760))\n- Allow Editor to access Phone Verification ([#2772](https://github.com/grafana/oncall/pull/2772))\n\n## v1.3.22 (2023-08-03)\n\n### Added\n\n- Add mobile app push notifications for shift swap requests by @vadimkerr ([#2717](https://github.com/grafana/oncall/pull/2717))\n\n### Changed\n\n- Skip past due swap requests when calculating events ([2718](https://github.com/grafana/oncall/pull/2718))\n- Update schedule slack notifications to use schedule final events by @Ferril ([#2710](https://github.com/grafana/oncall/pull/2710))\n\n### Fixed\n\n- Fix schedule final_events datetime filtering when splitting override ([#2715](https://github.com/grafana/oncall/pull/2715))\n- Fix swap requests event filter limits in schedule events ([#2716](https://github.com/grafana/oncall/pull/2716))\n- Fix Alerting contact point auto-creation ([2721](https://github.com/grafana/oncall/pull/2721))\n\n## v1.3.21 (2023-08-01)\n\n### Added\n\n- [Helm] Add `extraContainers` for engine, celery and migrate-job pods to define sidecars by @lu1as ([#2650](https://github.com/grafana/oncall/pull/2650))\n  – Rework of AlertManager integration ([#2643](https://github.com/grafana/oncall/pull/2643))\n\n## v1.3.20 (2023-07-31)\n\n### Added\n\n- Add filter_shift_swaps endpoint to schedules API ([#2684](https://github.com/grafana/oncall/pull/2684))\n- Add shifts endpoint to shift swap API ([#2697](https://github.com/grafana/oncall/pull/2697/))\n\n### Fixed\n\n- Fix helm env variable validation logic when specifying Twilio auth related values by @njohnstone2 ([#2674](https://github.com/grafana/oncall/pull/2674))\n- Fixed mobile app verification not sending SMS to phone number ([#2687](https://github.com/grafana/oncall/issues/2687))\n\n## v1.3.19 (2023-07-28)\n\n### Fixed\n\n- Fix one of the latest migrations failing on SQLite by @vadimkerr ([#2680](https://github.com/grafana/oncall/pull/2680))\n\n### Added\n\n- Apply swap requests details to schedule events ([#2677](https://github.com/grafana/oncall/pull/2677))\n\n## v1.3.18 (2023-07-28)\n\n### Changed\n\n- Update the direct paging feature to page for acknowledged & silenced alert groups,\n  and show a warning for resolved alert groups by @vadimkerr ([#2639](https://github.com/grafana/oncall/pull/2639))\n- Change calls to get instances from GCOM to paginate by @mderynck ([#2669](https://github.com/grafana/oncall/pull/2669))\n- Update checking on-call users to use schedule final events ([#2651](https://github.com/grafana/oncall/pull/2651))\n\n### Fixed\n\n- Remove checks delaying plugin load and cause \"Initializing plugin...\" ([2624](https://github.com/grafana/oncall/pull/2624))\n- Fix \"Continue escalation if >X alerts per Y minutes\" escalation step by @vadimkerr ([#2636](https://github.com/grafana/oncall/pull/2636))\n- Post to Telegram ChatOps channel option is not showing in the integrations page\n  by @alexintech ([#2498](https://github.com/grafana/oncall/pull/2498))\n\n## v1.3.17 (2023-07-25)\n\n### Added\n\n- Added banner on the ChatOps screen for OSS to let the user know if no chatops integration is enabled\n  ([#1735](https://github.com/grafana/oncall/issues/1735))\n- Add `rbac_enabled` to `GET /api/internal/v1/current_team` response schema + `rbac_permissions` to `GET /api/internal/v1/user`\n  response schema by @joeyorlando ([#2611](https://github.com/grafana/oncall/pull/2611))\n\n### Fixed\n\n- Bring heartbeats back to UI by @maskin25 ([#2550](https://github.com/grafana/oncall/pull/2550))\n- Address issue when Grafana feature flags which were enabled via the `feature_flags.enabled` were only properly being\n  parsed, when they were space-delimited. This fix allows them to be *either* space or comma-delimited.\n  by @joeyorlando ([#2623](https://github.com/grafana/oncall/pull/2623))\n\n## v1.3.16 (2023-07-21)\n\n### Added\n\n- Allow persisting mobile app's timezone, to allow for more accurate datetime related notifications by @joeyorlando\n  ([#2601](https://github.com/grafana/oncall/pull/2601))\n- Add filter integrations by type ([2609](https://github.com/grafana/oncall/pull/2609))\n\n### Changed\n\n- Update direct paging docs by @vadimkerr ([#2600](https://github.com/grafana/oncall/pull/2600))\n- Improve APIs for creating/updating direct paging integrations by @vadimkerr ([#2603](https://github.com/grafana/oncall/pull/2603))\n- Remove unnecessary team checks in public API by @vadimkerr ([#2606](https://github.com/grafana/oncall/pull/2606))\n\n### Fixed\n\n- Fix Slack direct paging issue when there are more than 100 schedules by @vadimkerr ([#2594](https://github.com/grafana/oncall/pull/2594))\n- Fix webhooks unable to be copied if they contain password or authorization header ([#2608](https://github.com/grafana/oncall/pull/2608))\n\n## v1.3.15 (2023-07-19)\n\n### Changed\n\n- Deprecate `AlertGroup.is_archived` column. Column will be removed in a subsequent release. By @joeyorlando ([#2524](https://github.com/grafana/oncall/pull/2524)).\n- Update Slack \"invite\" feature to use direct paging by @vadimkerr ([#2562](https://github.com/grafana/oncall/pull/2562))\n- Change \"Current responders\" to \"Additional Responders\" in web UI by @vadimkerr ([#2567](https://github.com/grafana/oncall/pull/2567))\n\n### Fixed\n\n- Fix duplicate orders on routes and escalation policies by @vadimkerr ([#2568](https://github.com/grafana/oncall/pull/2568))\n- Fixed Slack channels sync by @Ferril ([#2571](https://github.com/grafana/oncall/pull/2571))\n- Fixed rendering of slack connection errors ([#2526](https://github.com/grafana/oncall/pull/2526))\n\n## v1.3.14 (2023-07-17)\n\n### Changed\n\n- Added `PHONE_PROVIDER` configuration check by @sreway ([#2523](https://github.com/grafana/oncall/pull/2523))\n- Deprecate `/oncall` Slack command, update direct paging functionality by @vadimkerr ([#2537](https://github.com/grafana/oncall/pull/2537))\n- Change plugin version to drop the `v` prefix. ([#2540](https://github.com/grafana/oncall/pull/2540))\n\n## v1.3.13 (2023-07-17)\n\n### Changed\n\n- Remove deprecated `heartbeat.HeartBeat` model/table by @joeyorlando ([#2534](https://github.com/grafana/oncall/pull/2534))\n\n## v1.3.12 (2023-07-14)\n\n### Added\n\n- Add `page_size`, `current_page_number`, and `total_pages` attributes to paginated API responses by @joeyorlando ([#2471](https://github.com/grafana/oncall/pull/2471))\n\n### Fixed\n\n- New webhooks incorrectly masking authorization header by @mderynck ([#2541](https://github.com/grafana/oncall/pull/2541))\n\n## v1.3.11 (2023-07-13)\n\n### Added\n\n- Release new webhooks functionality by @mderynck @matiasb @maskin25 @teodosii @raphael-batte ([#1830](https://github.com/grafana/oncall/pull/1830))\n\n### Changed\n\n- Custom button webhooks are deprecated, they will be automatically migrated to new webhooks. ([#1830](https://github.com/grafana/oncall/pull/1830))\n\n## v1.3.10 (2023-07-13)\n\n### Added\n\n- [Helm] Added ability to specify `resources` definition within the `wait-for-db` init container by @Shelestov7\n  ([#2501](https://github.com/grafana/oncall/pull/2501))\n- Added index on `started_at` column in `alerts_alertgroup` table. This substantially speeds up query used by the `check_escalation_finished_task`\n  task. By @joeyorlando and @Konstantinov-Innokentii ([#2516](https://github.com/grafana/oncall/pull/2516)).\n\n### Changed\n\n- Deprecated `/maintenance` web UI page. Maintenance is now handled at the integration level and can be performed\n  within a single integration's page. by @Ukochka ([#2497](https://github.com/grafana/oncall/issues/2497))\n\n### Fixed\n\n- Fixed a bug in the integration maintenance mode workflow where a user could not start/stop an integration's\n  maintenance mode by @joeyorlando ([#2511](https://github.com/grafana/oncall/issues/2511))\n- Schedules: Long popup does not fit screen & buttons unreachable & objects outside of the popup [#1002](https://github.com/grafana/oncall/issues/1002)\n- New schedules white theme issues [#2356](https://github.com/grafana/oncall/issues/2356)\n\n## v1.3.9 (2023-07-12)\n\n### Added\n\n- Bring new Jinja editor to webhooks ([#2344](https://github.com/grafana/oncall/issues/2344))\n\n### Fixed\n\n- Add debounce on Select UI components to avoid making API search requests on each key-down event by\n  @maskin25 ([#2466](https://github.com/grafana/oncall/pull/2466))\n- Make Direct paging integration configurable ([2483](https://github.com/grafana/oncall/pull/2483))\n\n## v1.3.8 (2023-07-11)\n\n### Added\n\n- Add `event.users.avatar_full` field to `GET /api/internal/v1/schedules/{schedule_id}/filter_events`\n  payload by @joeyorlando ([#2459](https://github.com/grafana/oncall/pull/2459))\n- Add `affinity` and `tolerations` for `celery` and `migrations` pods into helm chart + unit test for chart\n\n### Changed\n\n- Modified DRF pagination class used by `GET /api/internal/v1/alert_receive_channels` and `GET /api/internal/v1/schedules`\n  endpoints so that the `next` and `previous` pagination links are properly set when OnCall is run behind\n  a reverse proxy by @joeyorlando ([#2467](https://github.com/grafana/oncall/pull/2467))\n- Polish user settings and warnings ([#2425](https://github.com/grafana/oncall/pull/2425))\n\n### Fixed\n\n- Address issue where we were improperly parsing Grafana feature flags that were enabled via the `feature_flags.enabled`\n  method by @joeyorlando ([#2477](https://github.com/grafana/oncall/pull/2477))\n- Fix cuddled list Markdown issue by @vadimkerr ([#2488](https://github.com/grafana/oncall/pull/2488))\n- Fixed schedules slack notifications for deleted organizations ([#2493](https://github.com/grafana/oncall/pull/2493))\n\n## v1.3.7 (2023-07-06)\n\n### Changed\n\n- OnCall Metrics dashboard update ([#2400](https://github.com/grafana/oncall/pull/2400))\n\n## v1.3.6 (2023-07-05)\n\n### Fixed\n\n- Address issue where having multiple registered mobile apps for a user could lead to issues in delivering push\n  notifications by @joeyorlando ([#2421](https://github.com/grafana/oncall/pull/2421))\n\n## v1.3.5 (2023-07-05)\n\n### Fixed\n\n- Fix for phone provider initialization which can lead to an HTTP 500 on startup ([#2434](https://github.com/grafana/oncall/pull/2434))\n\n## v1.3.4 (2023-07-05)\n\n### Added\n\n- Add full avatar URL for on-call users in schedule internal API by @vadimkerr ([#2414](https://github.com/grafana/oncall/pull/2414))\n- Add phone call using the zvonok.com service by @sreway ([#2339](https://github.com/grafana/oncall/pull/2339))\n\n### Changed\n\n- UI drawer updates for webhooks2 ([#2419](https://github.com/grafana/oncall/pull/2419))\n- Removed url from sms notification, changed format ([#2317](https://github.com/grafana/oncall/pull/2317))\n\n## v1.3.3 (2023-06-29)\n\n### Added\n\n- Docs for `/resolution_notes` public api endpoint [#222](https://github.com/grafana/oncall/issues/222)\n\n### Fixed\n\n- Change alerts order for `/alert` public api endpoint [#1031](https://github.com/grafana/oncall/issues/1031)\n- Change resolution notes order for `/resolution_notes` public api endpoint to show notes for the newest alert group\n  on top ([#2404](https://github.com/grafana/oncall/pull/2404))\n- Remove attempt to check token when editor/viewers are accessing the plugin @mderynck ([#2410](https://github.com/grafana/oncall/pull/2410))\n\n## v1.3.2 (2023-06-29)\n\n### Added\n\n- Add metric \"how many alert groups user was notified of\" to Prometheus exporter ([#2334](https://github.com/grafana/oncall/pull/2334/))\n\n### Changed\n\n- Change permissions used during setup to better represent actions being taken by @mderynck ([#2242](https://github.com/grafana/oncall/pull/2242))\n- Display 100000+ in stats when there are more than 100000 alert groups in the result ([#1901](https://github.com/grafana/oncall/pull/1901))\n- Change OnCall plugin to use service accounts and api tokens for communicating with backend, by @mderynck ([#2385](https://github.com/grafana/oncall/pull/2385))\n- RabbitMQ Docker image upgraded from 3.7.19 to 3.12.0 in `docker-compose-developer.yml` and\n  `docker-compose-mysql-rabbitmq.yml`. **Note**: if you use one of these config files for your deployment\n  you *may* need to follow the RabbitMQ \"upgrade steps\" listed [here](https://rabbitmq.com/upgrade.html#rabbitmq-version-upgradability)\n  by @joeyorlando ([#2359](https://github.com/grafana/oncall/pull/2359))\n\n### Fixed\n\n- For \"You're Going OnCall\" push notifications, show shift times in the user's configured timezone, otherwise UTC\n  by @joeyorlando ([#2351](https://github.com/grafana/oncall/pull/2351))\n\n## v1.3.1 (2023-06-26)\n\n### Fixed\n\n- Fix phone call & SMS relay by @vadimkerr ([#2345](https://github.com/grafana/oncall/pull/2345))\n\n## v1.3.0 (2023-06-26)\n\n### Added\n\n- Secrets consistency for the chart. Bugfixing [#1016](https://github.com/grafana/oncall/pull/1016)\n\n### Changed\n\n- `telegram.webhookUrl` now defaults to `https://<base_url>` if not set\n- UI Updates for the integrations page ([#2310](https://github.com/grafana/oncall/pull/2310))\n- Prefer shift start when displaying rotation start value for existing shifts ([#2316](https://github.com/grafana/oncall/pull/2316))\n\n### Fixed\n\n- Fixed minor schedule preview issue missing last day ([#2316](https://github.com/grafana/oncall/pull/2316))\n\n## v1.2.46 (2023-06-22)\n\n### Added\n\n- Make it possible to completely delete a rotation oncall ([#1505](https://github.com/grafana/oncall/issues/1505))\n- Polish rotation modal form oncall ([#1506](https://github.com/grafana/oncall/issues/1506))\n- Quick actions when editing a schedule oncall ([#1507](https://github.com/grafana/oncall/issues/1507))\n- Enable schedule related profile settings oncall ([#1508](https://github.com/grafana/oncall/issues/1508))\n- Highlight user shifts oncall ([#1509](https://github.com/grafana/oncall/issues/1509))\n- Rename or Description for Schedules Rotations ([#1460](https://github.com/grafana/oncall/issues/1406))\n- Add documentation for OnCall metrics exporter ([#2149](https://github.com/grafana/oncall/pull/2149))\n- Add dashboard for OnCall metrics ([#1973](https://github.com/grafana/oncall/pull/1973))\n\n## Changed\n\n- Change mobile shift notifications title and subtitle by @imtoori ([#2288](https://github.com/grafana/oncall/pull/2288))\n- Make web schedule updates to trigger sync refresh of its ical representation ([#2279](https://github.com/grafana/oncall/pull/2279))\n\n## Fixed\n\n- Fix duplicate orders for user notification policies by @vadimkerr ([#2278](https://github.com/grafana/oncall/pull/2278))\n- Fix broken markup on alert group page, declutter, make time format consistent ([#2296](https://github.com/grafana/oncall/pull/2295))\n\n## v1.2.45 (2023-06-19)\n\n### Changed\n\n- Change .Values.externalRabbitmq.passwordKey from `password` to `\"\"` (default value `rabbitmq-password`) ([#864](https://github.com/grafana/oncall/pull/864))\n- Remove deprecated `permissions` string array from the internal API user serializer by @joeyorlando ([#2269](https://github.com/grafana/oncall/pull/2269))\n\n### Added\n\n- Add `locale` column to mobile app user settings table by @joeyorlando [#2131](https://github.com/grafana/oncall/pull/2131)\n- Update notification text for \"You're going on call\" push notifications to include information about the shift start\n  and end times by @joeyorlando ([#2131](https://github.com/grafana/oncall/pull/2131))\n\n### Fixed\n\n- Handle non-UTC UNTIL datetime value when repeating ical events [#2241](https://github.com/grafana/oncall/pull/2241)\n- Optimize AlertManager auto-resolve mechanism\n\n## v1.2.44 (2023-06-14)\n\n### Added\n\n- Users with the Viewer basic role can now connect and use the mobile app ([#1892](https://github.com/grafana/oncall/pull/1892))\n- Add helm chart support for redis and mysql existing secrets [#2156](https://github.com/grafana/oncall/pull/2156)\n\n### Changed\n\n- Removed `SlackActionRecord` model and database table by @joeyorlando [#2201](https://github.com/grafana/oncall/pull/2201)\n- Require users when creating a schedule rotation using the web UI [#2220](https://github.com/grafana/oncall/pull/2220)\n\n### Fixed\n\n- Fix schedule shift preview to not breaking rotation shifts when there is overlap [#2218](https://github.com/grafana/oncall/pull/2218)\n- Fix schedule list filter by type to allow considering multiple values [#2218](https://github.com/grafana/oncall/pull/2218)\n\n## v1.2.43 (2023-06-12)\n\n### Changed\n\n- Propogate CI/CD changes\n\n## v1.2.42 (2023-06-12)\n\n### Changed\n\n- Helm chart: Upgrade helm dependecies, improve local setup [#2144](https://github.com/grafana/oncall/pull/2144)\n\n### Fixed\n\n- Fixed bug on Filters where team param from URL was discarded [#6237](https://github.com/grafana/support-escalations/issues/6237)\n- Fix receive channel filter in alert groups API [#2140](https://github.com/grafana/oncall/pull/2140)\n- Helm chart: Fix usage of `env` settings as map;\n  Fix usage of `mariadb.auth.database` and `mariadb.auth.username` for MYSQL env variables by @alexintech [#2146](https://github.com/grafana/oncall/pull/2146)\n\n### Added\n\n- Helm chart: Add unittests for rabbitmq and redis [2165](https://github.com/grafana/oncall/pull/2165)\n\n## v1.2.41 (2023-06-08)\n\n### Added\n\n- Twilio Provider improvements by @Konstantinov-Innokentii, @mderynck and @joeyorlando\n  [#2074](https://github.com/grafana/oncall/pull/2074) [#2034](https://github.com/grafana/oncall/pull/2034)\n- Run containers as a non-root user by @alexintech [#2053](https://github.com/grafana/oncall/pull/2053)\n\n## v1.2.40 (2023-06-07)\n\n### Added\n\n- Allow mobile app to consume \"internal\" schedules API endpoints by @joeyorlando ([#2109](https://github.com/grafana/oncall/pull/2109))\n- Add inbound email address in integration API by @vadimkerr ([#2113](https://github.com/grafana/oncall/pull/2113))\n\n### Changed\n\n- Make viewset actions more consistent by @vadimkerr ([#2120](https://github.com/grafana/oncall/pull/2120))\n\n### Fixed\n\n- Fix + revert [#2057](https://github.com/grafana/oncall/pull/2057) which reverted a change which properly handles\n  `Organization.DoesNotExist` exceptions for Slack events by @joeyorlando ([#TBD](https://github.com/grafana/oncall/pull/TBD))\n- Fix Telegram ratelimit on live setting change by @vadimkerr and @alexintech ([#2100](https://github.com/grafana/oncall/pull/2100))\n\n## v1.2.39 (2023-06-06)\n\n### Changed\n\n- Do not hide not secret settings in the web plugin UI by @alexintech ([#1964](https://github.com/grafana/oncall/pull/1964))\n\n## v1.2.36 (2023-06-02)\n\n### Added\n\n- Add public API endpoint to export a schedule's final shifts by @joeyorlando ([2047](https://github.com/grafana/oncall/pull/2047))\n\n### Fixed\n\n- Fix demo alert for inbound email integration by @vadimkerr ([#2081](https://github.com/grafana/oncall/pull/2081))\n- Fix calendar TZ used when comparing current shifts triggering slack shift notifications ([#2091](https://github.com/grafana/oncall/pull/2091))\n\n## v1.2.35 (2023-06-01)\n\n### Fixed\n\n- Fix a bug with permissions for telegram user settings by @alexintech ([#2075](https://github.com/grafana/oncall/pull/2075))\n- Fix orphaned messages in Slack by @vadimkerr ([#2023](https://github.com/grafana/oncall/pull/2023))\n- Fix duplicated slack shift-changed notifications ([#2080](https://github.com/grafana/oncall/pull/2080))\n\n## v1.2.34 (2023-05-31)\n\n### Added\n\n- Add description to \"Default channel for Slack notifications\" UI dropdown by @joeyorlando ([2051](https://github.com/grafana/oncall/pull/2051))\n\n### Fixed\n\n- Fix templates when slack or telegram is disabled ([#2064](https://github.com/grafana/oncall/pull/2064))\n- Reduce number of alert groups returned by `Attach To` in slack to avoid event trigger timeout @mderynck ([#2049](https://github.com/grafana/oncall/pull/2049))\n\n## v1.2.33 (2023-05-30)\n\n### Fixed\n\n- Revert #2040 breaking `/escalate` Slack command\n\n## v1.2.32 (2023-05-30)\n\n### Added\n\n- Add models and framework to use different services (Phone, SMS, Verify) in Twilio depending on\n  the destination country code by @mderynck ([#1976](https://github.com/grafana/oncall/pull/1976))\n- Prometheus exporter backend for alert groups related metrics\n- Helm chart: configuration of `uwsgi` using environment variables by @alexintech ([#2045](https://github.com/grafana/oncall/pull/2045))\n- Much expanded/improved docs for mobile app ([2026](https://github.com/grafana/oncall/pull/2026>))\n- Enable by-day selection when defining monthly and hourly rotations ([2037](https://github.com/grafana/oncall/pull/2037))\n\n### Fixed\n\n- Fix error when updating closed modal window in Slack by @vadimkerr ([#2019](https://github.com/grafana/oncall/pull/2019))\n- Fix final schedule export failing to update when ical imported events set start/end as date ([#2025](https://github.com/grafana/oncall/pull/2025))\n- Helm chart: fix bugs in helm chart with external postgresql configuration by @alexintech ([#2036](https://github.com/grafana/oncall/pull/2036))\n- Properly address `Organization.DoesNotExist` exceptions thrown which result in HTTP 500 for the Slack `interactive_api_endpoint`\n  endpoint by @joeyorlando ([#2040](https://github.com/grafana/oncall/pull/2040))\n- Fix issue when trying to sync Grafana contact point and config receivers miss a key ([#2046](https://github.com/grafana/oncall/pull/2046))\n\n### Changed\n\n- Changed mobile notification title and subtitle. Removed the body. by @imtoori [#2027](https://github.com/grafana/oncall/pull/2027)\n\n## v1.2.31 (2023-05-26)\n\n### Fixed\n\n- Fix AmazonSNS ratelimit by @Konstantinov-Innokentii ([#2032](https://github.com/grafana/oncall/pull/2032))\n\n## v1.2.30 (2023-05-25)\n\n### Fixed\n\n- Fix Phone provider status callbacks [#2014](https://github.com/grafana/oncall/pull/2014)\n\n## v1.2.29 (2023-05-25)\n\n### Changed\n\n- Phone provider refactoring [#1713](https://github.com/grafana/oncall/pull/1713)\n\n### Fixed\n\n- Handle slack metadata limit when creating paging command payload ([#2007](https://github.com/grafana/oncall/pull/2007))\n- Fix issue with sometimes cached final schedule not being refreshed after an update ([#2004](https://github.com/grafana/oncall/pull/2004))\n\n## v1.2.28 (2023-05-24)\n\n### Fixed\n\n- Improve plugin authentication by @vadimkerr ([#1995](https://github.com/grafana/oncall/pull/1995))\n- Fix MultipleObjectsReturned error on webhook endpoints by @vadimkerr ([#1996](https://github.com/grafana/oncall/pull/1996))\n- Remove user defined time period from \"you're going oncall\" mobile push by @iskhakov ([#2001](https://github.com/grafana/oncall/pull/2001))\n\n## v1.2.27 (2023-05-23)\n\n### Added\n\n- Allow passing Firebase credentials via environment variable by @vadimkerr ([#1969](https://github.com/grafana/oncall/pull/1969))\n\n### Changed\n\n- Update default Alertmanager templates by @iskhakov ([#1944](https://github.com/grafana/oncall/pull/1944))\n\n### Fixed\n\n- Fix SQLite permission issue by @vadimkerr ([#1984](https://github.com/grafana/oncall/pull/1984))\n- Remove user defined time period from \"you're going oncall\" mobile push ([2001](https://github.com/grafana/oncall/pull/2001))\n\n## v1.2.26 (2023-05-18)\n\n### Fixed\n\n- Fix inbound email bug when attaching files by @vadimkerr ([#1970](https://github.com/grafana/oncall/pull/1970))\n\n## v1.2.25 (2023-05-18)\n\n### Added\n\n- Test mobile push backend\n\n## v1.2.24 (2023-05-17)\n\n### Fixed\n\n- Fixed bug in Escalation Chains where reordering an item crashed the list\n\n## v1.2.23 (2023-05-15)\n\n### Added\n\n- Add a way to set a maintenance mode message and display this in the web plugin UI by @joeyorlando ([#1917](https://github.com/grafana/oncall/pull/#1917))\n\n### Changed\n\n- Use `user_profile_changed` Slack event instead of `user_change` to update Slack user profile by @vadimkerr ([#1938](https://github.com/grafana/oncall/pull/1938))\n\n## v1.2.22 (2023-05-12)\n\n### Added\n\n- Add mobile settings for info notifications by @imtoori ([#1926](https://github.com/grafana/oncall/pull/1926))\n\n### Fixed\n\n- Fix bug in the \"You're Going Oncall\" push notification copy by @joeyorlando ([#1922](https://github.com/grafana/oncall/pull/1922))\n- Fix bug with newlines in markdown converter ([#1925](https://github.com/grafana/oncall/pull/1925))\n- Disable \"You're Going Oncall\" push notification by default ([1927](https://github.com/grafana/oncall/pull/1927))\n\n## v1.2.21 (2023-05-09)\n\n### Added\n\n- Add a new mobile app push notification which notifies users when they are going on call by @joeyorlando ([#1814](https://github.com/grafana/oncall/pull/1814))\n- Add a new mobile app user setting field, `important_notification_volume_override` by @joeyorlando ([#1893](https://github.com/grafana/oncall/pull/1893))\n\n### Changed\n\n- Improve ical comparison when checking for imported ical updates ([1870](https://github.com/grafana/oncall/pull/1870))\n- Upgrade to Python 3.11.3 by @joeyorlando ([#1849](https://github.com/grafana/oncall/pull/1849))\n\n### Fixed\n\n- Fix issue with how OnCall determines if a cloud Grafana Instance supports RBAC by @joeyorlando ([#1880](https://github.com/grafana/oncall/pull/1880))\n- Fix issue trying to set maintenance mode for integrations belonging to non-current team\n\n## v1.2.20 (2023-05-09)\n\n### Fixed\n\n- Hotfix perform notification task\n\n## v1.2.19 (2023-05-04)\n\n### Fixed\n\n- Fix issue with parsing response when sending Slack message\n\n## v1.2.18 (2023-05-03)\n\n### Added\n\n- Documentation updates\n\n## v1.2.17 (2023-05-02)\n\n### Added\n\n- Add filter descriptions to web ui by @iskhakov ([1845](https://github.com/grafana/oncall/pull/1845))\n- Add \"Notifications Receiver\" RBAC role by @joeyorlando ([#1853](https://github.com/grafana/oncall/pull/1853))\n\n### Changed\n\n- Remove template editor from Slack by @iskhakov ([1847](https://github.com/grafana/oncall/pull/1847))\n- Remove schedule name uniqueness restriction ([1859](https://github.com/grafana/oncall/pull/1859))\n\n### Fixed\n\n- Fix bugs in web title and message templates rendering and visual representation ([1747](https://github.com/grafana/oncall/pull/1747))\n\n## v1.2.16 (2023-04-27)\n\n### Added\n\n- Add 2, 3 and 6 hours Alert Group silence options by @tommysitehost ([#1822](https://github.com/grafana/oncall/pull/1822))\n- Add schedule related users endpoint to plugin API\n\n### Changed\n\n- Update web UI, Slack, and Telegram to allow silencing an acknowledged alert group by @joeyorlando ([#1831](https://github.com/grafana/oncall/pull/1831))\n\n### Fixed\n\n- Optimize duplicate queries occurring in AlertGroupFilter by @joeyorlando ([1809](https://github.com/grafana/oncall/pull/1809))\n\n## v1.2.15 (2023-04-24)\n\n### Fixed\n\n- Helm chart: Fix helm hook for db migration job\n- Performance improvements to `GET /api/internal/v1/alertgroups` endpoint by @joeyorlando and @iskhakov ([#1805](https://github.com/grafana/oncall/pull/1805))\n\n### Added\n\n- Add helm chart support for twilio existing secrets by @atownsend247 ([#1435](https://github.com/grafana/oncall/pull/1435))\n- Add web_title, web_message and web_image_url attributes to templates ([1786](https://github.com/grafana/oncall/pull/1786))\n\n### Changed\n\n- Update shift API to use a default interval value (`1`) when a `frequency` is set and no `interval` is given\n- Limit number of alertmanager alerts in alert group to autoresolve by 500 ([1779](https://github.com/grafana/oncall/pull/1779))\n- Update schedule and personal ical exports to use final shift events\n\n## v1.2.14 (2023-04-19)\n\n### Fixed\n\n- Fix broken documentation links by @shantanualsi ([#1766](https://github.com/grafana/oncall/pull/1766))\n- Fix bug when updating team access settings by @vadimkerr ([#1794](https://github.com/grafana/oncall/pull/1794))\n\n## v1.2.13 (2023-04-18)\n\n### Changed\n\n- Rework ical schedule export to include final events; also improve changing shifts sync\n\n### Fixed\n\n- Fix issue when creating web overrides for TF schedules using a non-UTC timezone\n\n## v1.2.12 (2023-04-18)\n\n### Changed\n\n- Move `alerts_alertgroup.is_restricted` column to `alerts_alertreceivechannel.restricted_at` by @joeyorlando ([#1770](https://github.com/grafana/oncall/pull/1770))\n\n### Added\n\n- Add new field description_short to private api ([#1698](https://github.com/grafana/oncall/pull/1698))\n- Added preview and migration API endpoints for route migration from regex into jinja2 ([1715](https://github.com/grafana/oncall/pull/1715))\n- Helm chart: add the option to use a helm hook for the migration job ([1386](https://github.com/grafana/oncall/pull/1386))\n- Add endpoints to start and stop maintenance in alert receive channel private api ([1755](https://github.com/grafana/oncall/pull/1755))\n- Send demo alert with dynamic payload and get demo payload example on private api ([1700](https://github.com/grafana/oncall/pull/1700))\n- Add is_default fields to templates, remove WritableSerialiserMethodField ([1759](https://github.com/grafana/oncall/pull/1759))\n- Allow use of dynamic payloads in alert receive channels preview template in private api ([1756](https://github.com/grafana/oncall/pull/1756))\n\n## v1.2.11 (2023-04-14)\n\n### Added\n\n- add new columns `gcom_org_contract_type`, `gcom_org_irm_sku_subscription_start_date`,\n  and `gcom_org_oldest_admin_with_billing_privileges_user_id` to `user_management_organization` table,\n  plus `is_restricted` column to `alerts_alertgroup` table by @joeyorlando and @teodosii ([1522](https://github.com/grafana/oncall/pull/1522))\n- emit two new Django signals by @joeyorlando and @teodosii ([1522](https://github.com/grafana/oncall/pull/1522))\n  - `org_sync_signal` at the end of the `engine/apps/user_management/sync.py::sync_organization` method\n  - `alert_group_created_signal` when a new Alert Group is created\n\n## v1.2.10 (2023-04-13)\n\n### Added\n\n- Added mine filter to schedules listing\n\n### Fixed\n\n- Fixed a bug in GForm's RemoteSelect where the value for Dropdown could not change\n- Fixed the URL attached to an Incident created via the 'Declare Incident' button of a Slack alert by @sd2k ([#1738](https://github.com/grafana/oncall/pull/1738))\n\n## v1.2.9 (2023-04-11)\n\n### Fixed\n\n- Catch the new Slack error - \"message_limit_exceeded\"\n\n## v1.2.8 (2023-04-06)\n\n### Changed\n\n- Allow editing assigned team via public api ([1619](https://github.com/grafana/oncall/pull/1619))\n- Disable mentions when resolution note is created by @iskhakov ([1696](https://github.com/grafana/oncall/pull/1696))\n- Display warnings on users page in a clean and consistent way by @iskhakov ([#1681](https://github.com/grafana/oncall/pull/1681))\n\n## v1.2.7 (2023-04-03)\n\n### Added\n\n- Save selected teams filter in local storage ([#1611](https://github.com/grafana/oncall/issues/1611))\n\n### Changed\n\n- Renamed routes from /incidents to /alert-groups ([#1678](https://github.com/grafana/oncall/pull/1678))\n\n### Fixed\n\n- Fix team search when filtering resources by @vadimkerr ([#1680](https://github.com/grafana/oncall/pull/1680))\n- Fix issue when trying to scroll in Safari ([#415](https://github.com/grafana/oncall/issues/415))\n\n## v1.2.6 (2023-03-30)\n\n### Fixed\n\n- Fixed bug when web schedules/shifts use non-UTC timezone and shift is deleted by @matiasb ([#1661](https://github.com/grafana/oncall/pull/1661))\n\n## v1.2.5 (2023-03-30)\n\n### Fixed\n\n- Fixed a bug with Slack links not working in the plugin UI ([#1671](https://github.com/grafana/oncall/pull/1671))\n\n## v1.2.4 (2023-03-30)\n\n### Added\n\n- Added the ability to change the team for escalation chains by @maskin25, @iskhakov and @vadimkerr ([#1658](https://github.com/grafana/oncall/pull/1658))\n\n### Fixed\n\n- Addressed bug with iOS mobile push notifications always being set to critical by @imtoori and @joeyorlando ([#1646](https://github.com/grafana/oncall/pull/1646))\n- Fixed issue where Viewer was not able to view which people were oncall in a schedule ([#999](https://github.com/grafana/oncall/issues/999))\n- Fixed a bug with syncing teams from Grafana API by @vadimkerr ([#1652](https://github.com/grafana/oncall/pull/1652))\n\n## v1.2.3 (2023-03-28)\n\nOnly some minor performance/developer setup changes to report in this version.\n\n## v1.2.2 (2023-03-27)\n\n### Changed\n\n- Drawers with Forms are not closing by clicking outside of the drawer. Only by clicking Cancel or X (by @Ukochka in [#1608](https://github.com/grafana/oncall/pull/1608))\n- When the `DANGEROUS_WEBHOOKS_ENABLED` environment variable is set to true, it's possible now to create Outgoing Webhooks\n  using URLs without a top-level domain (by @hoptical in [#1398](https://github.com/grafana/oncall/pull/1398))\n- Updated wording when creating an integration (by @callmehyde in [#1572](https://github.com/grafana/oncall/pull/1572))\n- Set FCM iOS/Android \"message priority\" to \"high priority\" for mobile app push notifications (by @joeyorlando in [#1612](https://github.com/grafana/oncall/pull/1612))\n- Improve schedule quality feature (by @vadimkerr in [#1602](https://github.com/grafana/oncall/pull/1602))\n\n### Fixed\n\n- Update override deletion changes to set its final duration (by @matiasb in [#1599](https://github.com/grafana/oncall/pull/1599))\n\n## v1.2.1 (2023-03-23)\n\n### Changed\n\n- Mobile app settings backend by @vadimkerr in ([1571](https://github.com/grafana/oncall/pull/1571))\n- Fix integrations and escalations autoselect, improve GList by @maskin25 in ([1601](https://github.com/grafana/oncall/pull/1601))\n- Add filters to outgoing webhooks 2 by @iskhakov in ([1598](https://github.com/grafana/oncall/pull/1598))\n\n## v1.2.0 (2023-03-21)\n\n### Changed\n\n- Add team-based filtering for resources, so that users can see multiple resources at once and link them together ([1528](https://github.com/grafana/oncall/pull/1528))\n\n## v1.1.41 (2023-03-21)\n\n### Added\n\n- Modified `check_escalation_finished_task` celery task to use read-only databases for its query, if one is defined +\n  make the validation logic stricter + ping a configurable heartbeat on successful completion of this task ([1266](https://github.com/grafana/oncall/pull/1266))\n\n### Changed\n\n- Updated wording throughout plugin to use 'Alert Group' instead of 'Incident' ([1565](https://github.com/grafana/oncall/pull/1565),\n  [1576](https://github.com/grafana/oncall/pull/1576))\n- Check for enabled Telegram feature was added to ChatOps and to User pages ([319](https://github.com/grafana/oncall/issues/319))\n- Filtering for Editors/Admins was added to rotation form. It is not allowed to assign Viewer to rotation ([1124](https://github.com/grafana/oncall/issues/1124))\n- Modified search behaviour on the Escalation Chains page to allow for \"partial searching\" ([1578](https://github.com/grafana/oncall/pull/1578))\n\n### Fixed\n\n- Fixed a few permission issues on the UI ([1448](https://github.com/grafana/oncall/pull/1448))\n- Fix resolution note rendering in Slack message threads where the Slack username was not\n  being properly rendered ([1561](https://github.com/grafana/oncall/pull/1561))\n\n## v1.1.40 (2023-03-16)\n\n### Fixed\n\n- Check for duplicated positions in terraform escalation policies create/update\n\n### Added\n\n- Add `regex_match` Jinja filter ([1556](https://github.com/grafana/oncall/pull/1556))\n\n### Changed\n\n- Allow passing `null` as a value for `escalation_chain` when creating routes via the public API ([1557](https://github.com/grafana/oncall/pull/1557))\n\n## v1.1.39 (2023-03-16)\n\n### Added\n\n- Inbound email integration ([837](https://github.com/grafana/oncall/pull/837))\n\n## v1.1.38 (2023-03-14)\n\n### Added\n\n- Add filtering by escalation chain to alert groups page ([1535](https://github.com/grafana/oncall/pull/1535))\n\n### Fixed\n\n- Improve tasks checking/triggering webhooks in new backend\n\n## v1.1.37 (2023-03-14)\n\n### Fixed\n\n- Fixed redirection issue on integrations screen\n\n### Added\n\n- Enable web overrides for Terraform-based schedules\n- Direct user paging improvements ([1358](https://github.com/grafana/oncall/issues/1358))\n- Added Schedule Score quality within the schedule view ([118](https://github.com/grafana/oncall/issues/118))\n\n## v1.1.36 (2023-03-09)\n\n### Fixed\n\n- Fix bug with override creation ([1515](https://github.com/grafana/oncall/pull/1515))\n\n## v1.1.35 (2023-03-09)\n\n### Added\n\n- Insight logs\n\n### Fixed\n\n- Fixed issue with Alert group involved users filter\n- Fixed email sending failure due to newline in title\n\n## v1.1.34 (2023-03-08)\n\n### Added\n\n- Jinja2 based routes ([1319](https://github.com/grafana/oncall/pull/1319))\n\n### Changed\n\n- Remove mobile app feature flag ([1484](https://github.com/grafana/oncall/pull/1484))\n\n### Fixed\n\n- Prohibit creating & updating past overrides ([1474](https://github.com/grafana/oncall/pull/1474))\n\n## v1.1.33 (2023-03-07)\n\n### Fixed\n\n- Show permission error for accessing Telegram as Viewer ([1273](https://github.com/grafana/oncall/issues/1273))\n\n### Changed\n\n- Pass email and phone limits as environment variables ([1219](https://github.com/grafana/oncall/pull/1219))\n\n## v1.1.32 (2023-03-01)\n\n### Fixed\n\n- Schedule filters improvements ([941](https://github.com/grafana/oncall/issues/941))\n- Fix pagination issue on schedules page ([1437](https://github.com/grafana/oncall/pull/1437))\n\n## v1.1.31 (2023-03-01)\n\n### Added\n\n- Add acknowledge_signal and source link to public api\n\n## v1.1.30 (2023-03-01)\n\n### Fixed\n\n- Fixed importing of global grafana styles ([672](https://github.com/grafana/oncall/issues/672))\n- Fixed UI permission related bug where Editors could not export their user iCal link\n- Fixed error when a shift is created using Etc/UTC as timezone\n- Fixed issue with refresh ical file task not considering empty string values\n- Schedules: Long popup does not fit screen & buttons unreachable & objects outside of the popup ([1002](https://github.com/grafana/oncall/issues/1002))\n- Can't scroll on integration settings page ([415](https://github.com/grafana/oncall/issues/415))\n- Team change in the Integration page always causes 403 ([1292](https://github.com/grafana/oncall/issues/1292))\n- Schedules: Permalink doesn't work with multi-teams ([940](https://github.com/grafana/oncall/issues/940))\n- Schedules list -> expanded schedule blows page width ([1293](https://github.com/grafana/oncall/issues/1293))\n\n### Changed\n\n- Moved reCAPTCHA to backend environment variable for more flexible configuration between different environments.\n- Add pagination to schedule listing\n- Show 100 latest alerts on alert group page ([1417](https://github.com/grafana/oncall/pull/1417))\n\n## v1.1.29 (2023-02-23)\n\n### Changed\n\n- Allow creating schedules with type \"web\" using public API\n\n### Fixed\n\n- Fixed minor issue during the sync process where an HTTP 302 (redirect) status code from the Grafana\n  instance would cause the sync to not properly finish\n\n## v1.1.28 (2023-02-23)\n\n### Fixed\n\n- Fixed maintenance mode for Telegram and MSTeams\n\n## v1.1.27 (2023-02-22)\n\n### Added\n\n- Added reCAPTCHA validation for requesting a mobile verification code\n\n### Changed\n\n- Added ratelimits for phone verification\n- Link to source was added\n- Header of Incident page was reworked: clickable labels instead of just names, users section was deleted\n- \"Go to Integration\" button was deleted, because the functionality was moved to clickable labels\n\n### Fixed\n\n- Fixed HTTP request to Google where when fetching an iCal, the response would sometimes contain HTML instead\n  of the expected iCal data\n\n## v1.1.26 (2023-02-20)\n\n### Fixed\n\n- Make alert group filters persistent ([482](https://github.com/grafana/oncall/issues/482))\n\n### Changed\n\n- Update phone verification error message\n\n## v1.1.25 (2023-02-20)\n\n### Fixed\n\n- Fixed too long declare incident link in Slack\n\n## v1.1.24 (2023-02-16)\n\n### Added\n\n- Add direct user paging ([823](https://github.com/grafana/oncall/issues/823))\n- Add App Store link to web UI ([1328](https://github.com/grafana/oncall/pull/1328))\n\n### Fixed\n\n- Cleaning of the name \"Incident\" ([704](https://github.com/grafana/oncall/pull/704))\n- Alert Group/Alert Groups naming polishing. All the names should be with capital letters\n- Design polishing ([1290](https://github.com/grafana/oncall/pull/1290))\n- Not showing contact details in User tooltip if User does not have edit/admin access\n- Updated slack link account to redirect back to user profile instead of chatops\n\n### Changed\n\n- Incidents - Removed buttons column and replaced status with toggler ([#1237](https://github.com/grafana/oncall/issues/1237))\n- Responsiveness changes across multiple pages (Incidents, Integrations, Schedules) ([#1237](https://github.com/grafana/oncall/issues/1237))\n- Add pagination to schedule listing\n\n## v1.1.23 (2023-02-06)\n\n### Fixed\n\n- Fix bug with email case sensitivity for ICal on-call schedules ([1297](https://github.com/grafana/oncall/pull/1297))\n\n## v1.1.22 (2023-02-03)\n\n### Fixed\n\n- Fix bug with root/dependant alert groups list api endpoint ([1284](https://github.com/grafana/oncall/pull/1284))\n- Fixed NPE on teams switch\n\n### Added\n\n- Optimize alert and alert group public api endpoints and add filter by id ([1274](https://github.com/grafana/oncall/pull/1274))\n- Enable mobile app backend by default on OSS\n\n## v1.1.21 (2023-02-02)\n\n### Added\n\n- Add [`django-dbconn-retry` library](https://github.com/jdelic/django-dbconn-retry) to `INSTALLED_APPS` to attempt\n  to alleviate occasional `django.db.utils.OperationalError` errors\n- Improve alerts and alert group endpoint response time in internal API with caching ([1261](https://github.com/grafana/oncall/pull/1261))\n- Optimize alert and alert group public api endpoints and add filter by id ([1274](https://github.com/grafana/oncall/pull/1274)\n- Added Coming Soon for iOS on Mobile App screen\n\n### Fixed\n\n- Fix issue on Integrations where you were redirected back once escalation chain was loaded ([#1083](https://github.com/grafana/oncall/issues/1083))\n  ([#1257](https://github.com/grafana/oncall/issues/1257))\n\n## v1.1.20 (2023-01-30)\n\n### Added\n\n- Add involved users filter to alert groups listing page (+ mine shortcut)\n\n### Changed\n\n- Improve logging for creating contact point for Grafana Alerting integration\n\n### Fixed\n\n- Fix bugs related to creating contact point for Grafana Alerting integration\n- Fix minor UI bug on OnCall users page where it would idefinitely show a \"Loading...\" message\n- Only show OnCall user's table to users that are authorized\n- Fixed NPE in ScheduleUserDetails component ([#1229](https://github.com/grafana/oncall/issues/1229))\n\n## v1.1.19 (2023-01-25)\n\n### Added\n\n- Add Server URL below QR code for OSS for debugging purposes\n- Add Slack slash command allowing to trigger a direct page via a manually created alert group\n- Remove resolved and acknowledged filters as we switched to status ([#1201](https://github.com/grafana/oncall/pull/1201))\n- Add sync with grafana on /users and /teams api calls from terraform plugin\n\n### Changed\n\n- Allow users with `viewer` role to fetch cloud connection status using the internal API ([#1181](https://github.com/grafana/oncall/pull/1181))\n- When removing the Slack ChatOps integration, make it more explicit to the user what the implications of doing so are\n- Improve performance of `GET /api/internal/v1/schedules` endpoint ([#1169](https://github.com/grafana/oncall/pull/1169))\n\n### Fixed\n\n- Removed duplicate API call, in the UI on plugin initial load, to `GET /api/internal/v1/alert_receive_channels`\n- Increased plugin startup speed ([#1200](https://github.com/grafana/oncall/pull/1200))\n\n## v1.1.18 (2023-01-18)\n\n### Added\n\n- Allow messaging backends to be enabled/disabled per organization ([#1151](https://github.com/grafana/oncall/pull/1151))\n\n### Changed\n\n- Send a Slack DM when user is not in channel ([#1144](https://github.com/grafana/oncall/pull/1144))\n\n## v1.1.17 (2023-01-18)\n\n### Changed\n\n- Modified how the `Organization.is_rbac_permissions_enabled` flag is set,\n  based on whether we are dealing with an open-source, or cloud installation\n- Backend implementation to support direct user/schedule paging\n- Changed documentation links to open in new window\n- Remove helm chart signing\n- Changed the user's profile modal to be wide for all tabs\n\n### Added\n\n- Added state filter for alert_group public API endpoint.\n- Enrich user tooltip on Schedule page\n- Added redirects for old-style links\n\n### Fixed\n\n- Updated typo in Helm chart values when specifying a custom Slack command name\n- Fix for web schedules ical export to give overrides the right priority\n- Fix for topnavbar to show initial loading inside PluginPage\n\n## v1.1.16 (2023-01-12)\n\n### Fixed\n\n- Minor bug fix in how the value of `Organization.is_rbac_permissions_enabled` is determined\n\n- Helm chart: default values file and documentation now reflect the correct key to set for the Slack\n  slash command name, `oncall.slack.commandName`.\n\n## v1.1.15 (2023-01-10)\n\n### Changed\n\n- Simplify and speed up slack rendering ([#1105](https://github.com/grafana/oncall/pull/1105))\n- Faro - Point to 3 separate apps instead of just 1 for all environments ([#1110](https://github.com/grafana/oncall/pull/1110))\n- Schedules - ([#1114](https://github.com/grafana/oncall/pull/1114), [#1109](https://github.com/grafana/oncall/pull/1109))\n\n### Fixed\n\n- Bugfix for topnavbar to place alerts inside PageNav ([#1040](https://github.com/grafana/oncall/pull/1040))\n\n## v1.1.14 (2023-01-05)\n\n### Changed\n\n- Change wording from \"incident\" to \"alert group\" for the Telegram integration ([#1052](https://github.com/grafana/oncall/pull/1052))\n- Soft-delete of organizations on stack deletion.\n\n## v1.1.13 (2023-01-04)\n\n### Added\n\n- Integration with [Grafana Faro](https://grafana.com/docs/grafana-cloud/faro-web-sdk/) for Cloud Instances\n\n## v1.1.12 (2023-01-03)\n\n### Fixed\n\n- Handle jinja exceptions during alert creation\n- Handle exception for slack rate limit message\n\n## v1.1.11 (2023-01-03)\n\n### Fixed\n\n- Fix error when schedule was not able to load\n- Minor fixes\n\n## v1.1.10 (2023-01-03)\n\n### Fixed\n\n- Minor fixes\n\n## v1.1.9 (2023-01-03)\n\n### Fixed\n\n- Alert group query optimization\n- Update RBAC scopes\n- Fix error when schedule was not able to load\n- Minor bug fixes\n\n## v1.1.8 (2022-12-13)\n\n### Added\n\n- Added a `make` command, `enable-mobile-app-feature-flags`, which sets the backend feature flag in `./dev/.env.dev`,\n  and updates a record in the `base_dynamicsetting` database table, which are needed to enable the mobile\n  app backend features.\n\n### Changed\n\n- Added ability to change engine deployment update strategy via values in helm chart.\n- removed APNS support\n- changed the `django-push-notification` library from the `iskhakov` fork to the [`grafana` fork](https://github.com/grafana/django-push-notifications).\n  This new fork basically patches an issue which affected the database migrations of this django app (previously the\n  library would not respect the `USER_MODEL` setting when creating its tables and would instead reference the\n  `auth_user` table.. which we don't want)\n- add `--no-cache` flag to the `make build` command\n\n### Fixed\n\n- fix schedule UI types and permissions\n\n## v1.1.7 (2022-12-09)\n\n### Fixed\n\n- Update fallback role for schedule write RBAC permission\n- Mobile App Verification tab in the user settings modal is now hidden for users that do not have proper\n  permissions to use it\n\n## v1.1.6 (2022-12-09)\n\n### Added\n\n- RBAC permission support\n- Add `time_zone` serializer validation for OnCall shifts and calendar/web schedules. In addition, add database migration\n  to update values that may be invalid\n- Add a `permalinks.web` field, which is a permalink to the alert group web app page, to the alert group internal/public\n  API responses\n- Added the ability to customize job-migrate `ttlSecondsAfterFinished` field in the helm chart\n\n### Fixed\n\n- Got 500 error when saving Outgoing Webhook ([#890](https://github.com/grafana/oncall/issues/890))\n- v1.0.13 helm chart - update the OnCall backend pods image pull policy to \"Always\" (and explicitly set tag to `latest`).\n  This should resolve some recent issues experienced where the frontend/backend versions are not aligned.\n\n### Changed\n\n- When editing templates for alert group presentation or outgoing webhooks, errors and warnings are now displayed in\n  the UI as notification popups or displayed in the preview.\n- Errors and warnings that occur when rendering templates during notification or webhooks will now render\n  and display the error/warning as the result.\n\n## v1.1.5 (2022-11-24)\n\n### Added\n\n- Added a QR code in the \"Mobile App Verification\" tab on the user settings modal to connect the mobile\n  application to your OnCall instance\n\n### Fixed\n\n- UI bug fixes for Grafana 9.3 ([#860](https://github.com/grafana/oncall/pull/860))\n- Bug fix for saving source link template ([#898](https://github.com/grafana/oncall/pull/898))\n\n## v1.1.4 (2022-11-23)\n\n### Fixed\n\n- Bug fix for [#882](https://github.com/grafana/oncall/pull/882) which was causing the OnCall web calendars to not load\n- Bug fix which, when installing the plugin, or after removing a Grafana API token, caused the plugin to not load properly\n\n## v1.1.3 (2022-11-22)\n\n- Bug Fixes\n\n### Changed\n\n- For OSS installations of OnCall, initial configuration is now simplified. When running for local development, you no\n  longer need to configure the plugin via the UI. This is achieved through passing one environment variable to both the\n  backend & frontend containers, both of which have been preconfigured for you in `docker-compose-developer.yml`.\n  - The Grafana API URL **must be** passed as an environment variable, `GRAFANA_API_URL`, to the OnCall backend\n    (and can be configured by updating this env var in your `./dev/.env.dev` file)\n  - The OnCall API URL can optionally be passed as an environment variable, `ONCALL_API_URL`, to the OnCall UI.\n    If the environment variable is found, the plugin will \"auto-configure\", otherwise you will be shown a simple\n    configuration form to provide this info.\n- For Helm installations, if you are running Grafana externally (eg. `grafana.enabled` is set to `false`\n  in your `values.yaml`), you will now be required to specify `externalGrafana.url` in `values.yaml`.\n- `make start` will now idempotently check to see if a \"127.0.0.1 grafana\" record exists in `/etc/hosts`\n  (using a tool called [`hostess`](https://github.com/cbednarski/hostess)). This is to support using `http://grafana:3000`\n  as the `Organization.grafana_url` in two scenarios:\n  - `oncall_engine`/`oncall_celery` -> `grafana` Docker container communication\n  - public URL generation. There are some instances where `Organization.grafana_url` is referenced to generate public\n    URLs to a Grafana plugin page. Without the `/etc/hosts` record, navigating to `http://grafana:3000/some_page` in\n    your browser, you would obviously get an error from your browser.\n\n## v1.1.2 (2022-11-18)\n\n- Bug Fixes\n\n## v1.1.1 (2022-11-16)\n\n- Compatibility with Grafana 9.3.0\n- Bug Fixes\n\n## v1.0.52 (2022-11-09)\n\n- Allow use of API keys as alternative to account auth token for Twilio\n- Remove `grafana_plugin_management` Django app\n- Enable new schedules UI\n- Bug fixes\n\n## v1.0.51 (2022-11-05)\n\n- Bug Fixes\n\n## v1.0.50 (2022-11-03)\n\n- Updates to documentation\n- Improvements to web schedules\n- Bug fixes\n\n## v1.0.49 (2022-11-01)\n\n- Enable SMTP email backend by default\n- Fix Grafana sidebar frontend bug\n\n## v1.0.48 (2022-11-01)\n\n- verify_number management command\n- chatops page redesign\n\n## v1.0.47 (2022-11-01)\n\n- Bug fixes\n\n## v1.0.46 (2022-10-28)\n\n- Bug fixes\n- remove `POST /api/internal/v1/custom_buttons/{id}/action` endpoint\n\n## v1.0.45 (2022-10-27)\n\n- Bug fix to revert commit which removed unused engine code\n\n## v1.0.44 (2022-10-26)\n\n- Bug fix for an issue that was affecting phone verification\n\n## v1.0.43 (2022-10-25)\n\n- Bug fixes\n\n## v1.0.42 (2022-10-24)\n\n- Fix posting resolution notes to Slack\n\n## v1.0.41 (2022-10-24)\n\n- Add personal email notifications\n- Bug fixes\n\n## v1.0.40 (2022-10-05)\n\n- Improved database and celery backends support\n- Added script to import PagerDuty users to Grafana\n- Bug fixes\n\n## v1.0.39 (2022-10-03)\n\n- Fix issue in v1.0.38 blocking the creation of schedules and webhooks in the UI\n\n## v1.0.38 (2022-09-30)\n\n- Fix exception handling for adding resolution notes when slack and oncall users are out of sync.\n- Fix all day events showing as having gaps in slack notifications\n- Improve plugin configuration error message readability\n- Add `telegram` key to `permalinks` property in `AlertGroup` public API response schema\n\n## v1.0.37 (2022-09-21)\n\n- Improve API token creation form\n- Fix alert group bulk action bugs\n- Add `permalinks` property to `AlertGroup` public API response schema\n- Scheduling system bug fixes\n- Public API bug fixes\n\n## v1.0.36 (2022-09-12)\n\n- Alpha web schedules frontend/backend updates\n- Bug fixes\n\n## v1.0.35 (2022-09-07)\n\n- Bug fixes\n\n## v1.0.34 (2022-09-06)\n\n- Fix schedule notification spam\n\n## v1.0.33 (2022-09-06)\n\n- Add raw alert view\n- Add GitHub star button for OSS installations\n- Restore alert group search functionality\n- Bug fixes\n\n## v1.0.32 (2022-09-01)\n\n- Bug fixes\n\n## v1.0.31 (2022-09-01)\n\n- Bump celery version\n- Fix oss to cloud connection\n\n## v1.0.30 (2022-08-31)\n\n- Bug fix: check user notification policy before access\n\n## v1.0.29 (2022-08-31)\n\n- Add arm64 docker image\n\n## v1.0.28 (2022-08-31)\n\n- Bug fixes\n\n## v1.0.27 (2022-08-30)\n\n- Bug fixes\n\n## v1.0.26 (2022-08-26)\n\n- Insight log's format fixes\n- Remove UserNotificationPolicy auto-recreating\n\n## v1.0.25 (2022-08-24)\n\n- Bug fixes\n\n## v1.0.24 (2022-08-24)\n\n- Insight logs\n- Default DATA_UPLOAD_MAX_MEMORY_SIZE to 1mb\n\n## v1.0.23 (2022-08-23)\n\n- Bug fixes\n\n## v1.0.22 (2022-08-16)\n\n- Make STATIC_URL configurable from environment variable\n\n## v1.0.21 (2022-08-12)\n\n- Bug fixes\n\n## v1.0.19 (2022-08-10)\n\n- Bug fixes\n\n## v1.0.15 (2022-08-03)\n\n- Bug fixes\n\n## v1.0.13 (2022-07-27)\n\n- Optimize alert group list view\n- Fix a bug related to Twilio setup\n\n## v1.0.12 (2022-07-26)\n\n- Update push-notifications dependency\n- Rework how absolute URLs are built\n- Fix to show maintenance windows per team\n- Logging improvements\n- Internal api to get a schedule final events\n\n## v1.0.10 (2022-07-22)\n\n- Speed-up of alert group web caching\n- Internal api for OnCall shifts\n\n## v1.0.9 (2022-07-21)\n\n- Frontend bug fixes & improvements\n- Support regex_replace() in templates\n- Bring back alert group caching and list view\n\n## v1.0.7 (2022-07-18)\n\n- Backend & frontend bug fixes\n- Deployment improvements\n- Reshape webhook payload for outgoing webhooks\n- Add escalation chain usage info on escalation chains page\n- Improve alert group list load speeds and simplify caching system\n\n## v1.0.6 (2022-07-12)\n\n- Manual Incidents enabled for teams\n- Fix phone notifications for OSS\n- Public API improvements\n\n## v1.0.5 (2022-07-06)\n\n- Bump Django to 3.2.14\n- Fix PagerDuty iCal parsing\n\n## 1.0.4 (2022-06-28)\n\n- Allow Telegram DMs without channel connection.\n\n## 1.0.3 (2022-06-27)\n\n- Fix users public api endpoint. Now it returns users with all roles.\n- Fix redundant notifications about gaps in schedules.\n- Frontend fixes.\n\n## 1.0.2 (2022-06-17)\n\n- Fix Grafana Alerting integration to handle API changes in Grafana 9\n- Improve public api endpoint for outgoing webhooks (/actions) by adding ability to create, update and delete\n  outgoing webhook instance\n\n## 1.0.0 (2022-06-14)\n\n- First Public Release\n\n## 0.0.71 (2022-06-06)\n\n- Initial Commit Release\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 33.4697265625,
          "content": "                    GNU AFFERO GENERAL PUBLIC LICENSE\n                       Version 3, 19 November 2007\n\nCopyright (C) 2007 Free Software Foundation, Inc. <https://fsf.org/>\nEveryone is permitted to copy and distribute verbatim copies\nof this license document, but changing it is not allowed.\n\n                            Preamble\n\nThe GNU Affero General Public License is a free, copyleft license for\nsoftware and other kinds of works, specifically designed to ensure\ncooperation with the community in the case of network server software.\n\nThe licenses for most software and other practical works are designed\nto take away your freedom to share and change the works. By contrast,\nour General Public Licenses are intended to guarantee your freedom to\nshare and change all versions of a program--to make sure it remains free\nsoftware for all its users.\n\nWhen we speak of free software, we are referring to freedom, not\nprice. Our General Public Licenses are designed to make sure that you\nhave the freedom to distribute copies of free software (and charge for\nthem if you wish), that you receive source code or can get it if you\nwant it, that you can change the software or use pieces of it in new\nfree programs, and that you know you can do these things.\n\nDevelopers that use our General Public Licenses protect your rights\nwith two steps: (1) assert copyright on the software, and (2) offer\nyou this License which gives you legal permission to copy, distribute\nand/or modify the software.\n\nA secondary benefit of defending all users' freedom is that\nimprovements made in alternate versions of the program, if they\nreceive widespread use, become available for other developers to\nincorporate. Many developers of free software are heartened and\nencouraged by the resulting cooperation. However, in the case of\nsoftware used on network servers, this result may fail to come about.\nThe GNU General Public License permits making a modified version and\nletting the public access it on a server without ever releasing its\nsource code to the public.\n\nThe GNU Affero General Public License is designed specifically to\nensure that, in such cases, the modified source code becomes available\nto the community. It requires the operator of a network server to\nprovide the source code of the modified version running there to the\nusers of that server. Therefore, public use of a modified version, on\na publicly accessible server, gives the public access to the source\ncode of the modified version.\n\nAn older license, called the Affero General Public License and\npublished by Affero, was designed to accomplish similar goals. This is\na different license, not a version of the Affero GPL, but Affero has\nreleased a new version of the Affero GPL which permits relicensing under\nthis license.\n\nThe precise terms and conditions for copying, distribution and\nmodification follow.\n\n                       TERMS AND CONDITIONS\n\n0. Definitions.\n\n\"This License\" refers to version 3 of the GNU Affero General Public License.\n\n\"Copyright\" also means copyright-like laws that apply to other kinds of\nworks, such as semiconductor masks.\n\n\"The Program\" refers to any copyrightable work licensed under this\nLicense. Each licensee is addressed as \"you\". \"Licensees\" and\n\"recipients\" may be individuals or organizations.\n\nTo \"modify\" a work means to copy from or adapt all or part of the work\nin a fashion requiring copyright permission, other than the making of an\nexact copy. The resulting work is called a \"modified version\" of the\nearlier work or a work \"based on\" the earlier work.\n\nA \"covered work\" means either the unmodified Program or a work based\non the Program.\n\nTo \"propagate\" a work means to do anything with it that, without\npermission, would make you directly or secondarily liable for\ninfringement under applicable copyright law, except executing it on a\ncomputer or modifying a private copy. Propagation includes copying,\ndistribution (with or without modification), making available to the\npublic, and in some countries other activities as well.\n\nTo \"convey\" a work means any kind of propagation that enables other\nparties to make or receive copies. Mere interaction with a user through\na computer network, with no transfer of a copy, is not conveying.\n\nAn interactive user interface displays \"Appropriate Legal Notices\"\nto the extent that it includes a convenient and prominently visible\nfeature that (1) displays an appropriate copyright notice, and (2)\ntells the user that there is no warranty for the work (except to the\nextent that warranties are provided), that licensees may convey the\nwork under this License, and how to view a copy of this License. If\nthe interface presents a list of user commands or options, such as a\nmenu, a prominent item in the list meets this criterion.\n\n1. Source Code.\n\nThe \"source code\" for a work means the preferred form of the work\nfor making modifications to it. \"Object code\" means any non-source\nform of a work.\n\nA \"Standard Interface\" means an interface that either is an official\nstandard defined by a recognized standards body, or, in the case of\ninterfaces specified for a particular programming language, one that\nis widely used among developers working in that language.\n\nThe \"System Libraries\" of an executable work include anything, other\nthan the work as a whole, that (a) is included in the normal form of\npackaging a Major Component, but which is not part of that Major\nComponent, and (b) serves only to enable use of the work with that\nMajor Component, or to implement a Standard Interface for which an\nimplementation is available to the public in source code form. A\n\"Major Component\", in this context, means a major essential component\n(kernel, window system, and so on) of the specific operating system\n(if any) on which the executable work runs, or a compiler used to\nproduce the work, or an object code interpreter used to run it.\n\nThe \"Corresponding Source\" for a work in object code form means all\nthe source code needed to generate, install, and (for an executable\nwork) run the object code and to modify the work, including scripts to\ncontrol those activities. However, it does not include the work's\nSystem Libraries, or general-purpose tools or generally available free\nprograms which are used unmodified in performing those activities but\nwhich are not part of the work. For example, Corresponding Source\nincludes interface definition files associated with source files for\nthe work, and the source code for shared libraries and dynamically\nlinked subprograms that the work is specifically designed to require,\nsuch as by intimate data communication or control flow between those\nsubprograms and other parts of the work.\n\nThe Corresponding Source need not include anything that users\ncan regenerate automatically from other parts of the Corresponding\nSource.\n\nThe Corresponding Source for a work in source code form is that\nsame work.\n\n2. Basic Permissions.\n\nAll rights granted under this License are granted for the term of\ncopyright on the Program, and are irrevocable provided the stated\nconditions are met. This License explicitly affirms your unlimited\npermission to run the unmodified Program. The output from running a\ncovered work is covered by this License only if the output, given its\ncontent, constitutes a covered work. This License acknowledges your\nrights of fair use or other equivalent, as provided by copyright law.\n\nYou may make, run and propagate covered works that you do not\nconvey, without conditions so long as your license otherwise remains\nin force. You may convey covered works to others for the sole purpose\nof having them make modifications exclusively for you, or provide you\nwith facilities for running those works, provided that you comply with\nthe terms of this License in conveying all material for which you do\nnot control copyright. Those thus making or running the covered works\nfor you must do so exclusively on your behalf, under your direction\nand control, on terms that prohibit them from making any copies of\nyour copyrighted material outside their relationship with you.\n\nConveying under any other circumstances is permitted solely under\nthe conditions stated below. Sublicensing is not allowed; section 10\nmakes it unnecessary.\n\n3. Protecting Users' Legal Rights From Anti-Circumvention Law.\n\nNo covered work shall be deemed part of an effective technological\nmeasure under any applicable law fulfilling obligations under article\n11 of the WIPO copyright treaty adopted on 20 December 1996, or\nsimilar laws prohibiting or restricting circumvention of such\nmeasures.\n\nWhen you convey a covered work, you waive any legal power to forbid\ncircumvention of technological measures to the extent such circumvention\nis effected by exercising rights under this License with respect to\nthe covered work, and you disclaim any intention to limit operation or\nmodification of the work as a means of enforcing, against the work's\nusers, your or third parties' legal rights to forbid circumvention of\ntechnological measures.\n\n4. Conveying Verbatim Copies.\n\nYou may convey verbatim copies of the Program's source code as you\nreceive it, in any medium, provided that you conspicuously and\nappropriately publish on each copy an appropriate copyright notice;\nkeep intact all notices stating that this License and any\nnon-permissive terms added in accord with section 7 apply to the code;\nkeep intact all notices of the absence of any warranty; and give all\nrecipients a copy of this License along with the Program.\n\nYou may charge any price or no price for each copy that you convey,\nand you may offer support or warranty protection for a fee.\n\n5. Conveying Modified Source Versions.\n\nYou may convey a work based on the Program, or the modifications to\nproduce it from the Program, in the form of source code under the\nterms of section 4, provided that you also meet all of these conditions:\n\n    a) The work must carry prominent notices stating that you modified\n    it, and giving a relevant date.\n\n    b) The work must carry prominent notices stating that it is\n    released under this License and any conditions added under section\n    7.  This requirement modifies the requirement in section 4 to\n    \"keep intact all notices\".\n\n    c) You must license the entire work, as a whole, under this\n    License to anyone who comes into possession of a copy.  This\n    License will therefore apply, along with any applicable section 7\n    additional terms, to the whole of the work, and all its parts,\n    regardless of how they are packaged.  This License gives no\n    permission to license the work in any other way, but it does not\n    invalidate such permission if you have separately received it.\n\n    d) If the work has interactive user interfaces, each must display\n    Appropriate Legal Notices; however, if the Program has interactive\n    interfaces that do not display Appropriate Legal Notices, your\n    work need not make them do so.\n\nA compilation of a covered work with other separate and independent\nworks, which are not by their nature extensions of the covered work,\nand which are not combined with it such as to form a larger program,\nin or on a volume of a storage or distribution medium, is called an\n\"aggregate\" if the compilation and its resulting copyright are not\nused to limit the access or legal rights of the compilation's users\nbeyond what the individual works permit. Inclusion of a covered work\nin an aggregate does not cause this License to apply to the other\nparts of the aggregate.\n\n6. Conveying Non-Source Forms.\n\nYou may convey a covered work in object code form under the terms\nof sections 4 and 5, provided that you also convey the\nmachine-readable Corresponding Source under the terms of this License,\nin one of these ways:\n\n    a) Convey the object code in, or embodied in, a physical product\n    (including a physical distribution medium), accompanied by the\n    Corresponding Source fixed on a durable physical medium\n    customarily used for software interchange.\n\n    b) Convey the object code in, or embodied in, a physical product\n    (including a physical distribution medium), accompanied by a\n    written offer, valid for at least three years and valid for as\n    long as you offer spare parts or customer support for that product\n    model, to give anyone who possesses the object code either (1) a\n    copy of the Corresponding Source for all the software in the\n    product that is covered by this License, on a durable physical\n    medium customarily used for software interchange, for a price no\n    more than your reasonable cost of physically performing this\n    conveying of source, or (2) access to copy the\n    Corresponding Source from a network server at no charge.\n\n    c) Convey individual copies of the object code with a copy of the\n    written offer to provide the Corresponding Source.  This\n    alternative is allowed only occasionally and noncommercially, and\n    only if you received the object code with such an offer, in accord\n    with subsection 6b.\n\n    d) Convey the object code by offering access from a designated\n    place (gratis or for a charge), and offer equivalent access to the\n    Corresponding Source in the same way through the same place at no\n    further charge.  You need not require recipients to copy the\n    Corresponding Source along with the object code.  If the place to\n    copy the object code is a network server, the Corresponding Source\n    may be on a different server (operated by you or a third party)\n    that supports equivalent copying facilities, provided you maintain\n    clear directions next to the object code saying where to find the\n    Corresponding Source.  Regardless of what server hosts the\n    Corresponding Source, you remain obligated to ensure that it is\n    available for as long as needed to satisfy these requirements.\n\n    e) Convey the object code using peer-to-peer transmission, provided\n    you inform other peers where the object code and Corresponding\n    Source of the work are being offered to the general public at no\n    charge under subsection 6d.\n\nA separable portion of the object code, whose source code is excluded\nfrom the Corresponding Source as a System Library, need not be\nincluded in conveying the object code work.\n\nA \"User Product\" is either (1) a \"consumer product\", which means any\ntangible personal property which is normally used for personal, family,\nor household purposes, or (2) anything designed or sold for incorporation\ninto a dwelling. In determining whether a product is a consumer product,\ndoubtful cases shall be resolved in favor of coverage. For a particular\nproduct received by a particular user, \"normally used\" refers to a\ntypical or common use of that class of product, regardless of the status\nof the particular user or of the way in which the particular user\nactually uses, or expects or is expected to use, the product. A product\nis a consumer product regardless of whether the product has substantial\ncommercial, industrial or non-consumer uses, unless such uses represent\nthe only significant mode of use of the product.\n\n\"Installation Information\" for a User Product means any methods,\nprocedures, authorization keys, or other information required to install\nand execute modified versions of a covered work in that User Product from\na modified version of its Corresponding Source. The information must\nsuffice to ensure that the continued functioning of the modified object\ncode is in no case prevented or interfered with solely because\nmodification has been made.\n\nIf you convey an object code work under this section in, or with, or\nspecifically for use in, a User Product, and the conveying occurs as\npart of a transaction in which the right of possession and use of the\nUser Product is transferred to the recipient in perpetuity or for a\nfixed term (regardless of how the transaction is characterized), the\nCorresponding Source conveyed under this section must be accompanied\nby the Installation Information. But this requirement does not apply\nif neither you nor any third party retains the ability to install\nmodified object code on the User Product (for example, the work has\nbeen installed in ROM).\n\nThe requirement to provide Installation Information does not include a\nrequirement to continue to provide support service, warranty, or updates\nfor a work that has been modified or installed by the recipient, or for\nthe User Product in which it has been modified or installed. Access to a\nnetwork may be denied when the modification itself materially and\nadversely affects the operation of the network or violates the rules and\nprotocols for communication across the network.\n\nCorresponding Source conveyed, and Installation Information provided,\nin accord with this section must be in a format that is publicly\ndocumented (and with an implementation available to the public in\nsource code form), and must require no special password or key for\nunpacking, reading or copying.\n\n7. Additional Terms.\n\n\"Additional permissions\" are terms that supplement the terms of this\nLicense by making exceptions from one or more of its conditions.\nAdditional permissions that are applicable to the entire Program shall\nbe treated as though they were included in this License, to the extent\nthat they are valid under applicable law. If additional permissions\napply only to part of the Program, that part may be used separately\nunder those permissions, but the entire Program remains governed by\nthis License without regard to the additional permissions.\n\nWhen you convey a copy of a covered work, you may at your option\nremove any additional permissions from that copy, or from any part of\nit. (Additional permissions may be written to require their own\nremoval in certain cases when you modify the work.) You may place\nadditional permissions on material, added by you to a covered work,\nfor which you have or can give appropriate copyright permission.\n\nNotwithstanding any other provision of this License, for material you\nadd to a covered work, you may (if authorized by the copyright holders of\nthat material) supplement the terms of this License with terms:\n\n    a) Disclaiming warranty or limiting liability differently from the\n    terms of sections 15 and 16 of this License; or\n\n    b) Requiring preservation of specified reasonable legal notices or\n    author attributions in that material or in the Appropriate Legal\n    Notices displayed by works containing it; or\n\n    c) Prohibiting misrepresentation of the origin of that material, or\n    requiring that modified versions of such material be marked in\n    reasonable ways as different from the original version; or\n\n    d) Limiting the use for publicity purposes of names of licensors or\n    authors of the material; or\n\n    e) Declining to grant rights under trademark law for use of some\n    trade names, trademarks, or service marks; or\n\n    f) Requiring indemnification of licensors and authors of that\n    material by anyone who conveys the material (or modified versions of\n    it) with contractual assumptions of liability to the recipient, for\n    any liability that these contractual assumptions directly impose on\n    those licensors and authors.\n\nAll other non-permissive additional terms are considered \"further\nrestrictions\" within the meaning of section 10. If the Program as you\nreceived it, or any part of it, contains a notice stating that it is\ngoverned by this License along with a term that is a further\nrestriction, you may remove that term. If a license document contains\na further restriction but permits relicensing or conveying under this\nLicense, you may add to a covered work material governed by the terms\nof that license document, provided that the further restriction does\nnot survive such relicensing or conveying.\n\nIf you add terms to a covered work in accord with this section, you\nmust place, in the relevant source files, a statement of the\nadditional terms that apply to those files, or a notice indicating\nwhere to find the applicable terms.\n\nAdditional terms, permissive or non-permissive, may be stated in the\nform of a separately written license, or stated as exceptions;\nthe above requirements apply either way.\n\n8. Termination.\n\nYou may not propagate or modify a covered work except as expressly\nprovided under this License. Any attempt otherwise to propagate or\nmodify it is void, and will automatically terminate your rights under\nthis License (including any patent licenses granted under the third\nparagraph of section 11).\n\nHowever, if you cease all violation of this License, then your\nlicense from a particular copyright holder is reinstated (a)\nprovisionally, unless and until the copyright holder explicitly and\nfinally terminates your license, and (b) permanently, if the copyright\nholder fails to notify you of the violation by some reasonable means\nprior to 60 days after the cessation.\n\nMoreover, your license from a particular copyright holder is\nreinstated permanently if the copyright holder notifies you of the\nviolation by some reasonable means, this is the first time you have\nreceived notice of violation of this License (for any work) from that\ncopyright holder, and you cure the violation prior to 30 days after\nyour receipt of the notice.\n\nTermination of your rights under this section does not terminate the\nlicenses of parties who have received copies or rights from you under\nthis License. If your rights have been terminated and not permanently\nreinstated, you do not qualify to receive new licenses for the same\nmaterial under section 10.\n\n9. Acceptance Not Required for Having Copies.\n\nYou are not required to accept this License in order to receive or\nrun a copy of the Program. Ancillary propagation of a covered work\noccurring solely as a consequence of using peer-to-peer transmission\nto receive a copy likewise does not require acceptance. However,\nnothing other than this License grants you permission to propagate or\nmodify any covered work. These actions infringe copyright if you do\nnot accept this License. Therefore, by modifying or propagating a\ncovered work, you indicate your acceptance of this License to do so.\n\n10. Automatic Licensing of Downstream Recipients.\n\nEach time you convey a covered work, the recipient automatically\nreceives a license from the original licensors, to run, modify and\npropagate that work, subject to this License. You are not responsible\nfor enforcing compliance by third parties with this License.\n\nAn \"entity transaction\" is a transaction transferring control of an\norganization, or substantially all assets of one, or subdividing an\norganization, or merging organizations. If propagation of a covered\nwork results from an entity transaction, each party to that\ntransaction who receives a copy of the work also receives whatever\nlicenses to the work the party's predecessor in interest had or could\ngive under the previous paragraph, plus a right to possession of the\nCorresponding Source of the work from the predecessor in interest, if\nthe predecessor has it or can get it with reasonable efforts.\n\nYou may not impose any further restrictions on the exercise of the\nrights granted or affirmed under this License. For example, you may\nnot impose a license fee, royalty, or other charge for exercise of\nrights granted under this License, and you may not initiate litigation\n(including a cross-claim or counterclaim in a lawsuit) alleging that\nany patent claim is infringed by making, using, selling, offering for\nsale, or importing the Program or any portion of it.\n\n11. Patents.\n\nA \"contributor\" is a copyright holder who authorizes use under this\nLicense of the Program or a work on which the Program is based. The\nwork thus licensed is called the contributor's \"contributor version\".\n\nA contributor's \"essential patent claims\" are all patent claims\nowned or controlled by the contributor, whether already acquired or\nhereafter acquired, that would be infringed by some manner, permitted\nby this License, of making, using, or selling its contributor version,\nbut do not include claims that would be infringed only as a\nconsequence of further modification of the contributor version. For\npurposes of this definition, \"control\" includes the right to grant\npatent sublicenses in a manner consistent with the requirements of\nthis License.\n\nEach contributor grants you a non-exclusive, worldwide, royalty-free\npatent license under the contributor's essential patent claims, to\nmake, use, sell, offer for sale, import and otherwise run, modify and\npropagate the contents of its contributor version.\n\nIn the following three paragraphs, a \"patent license\" is any express\nagreement or commitment, however denominated, not to enforce a patent\n(such as an express permission to practice a patent or covenant not to\nsue for patent infringement). To \"grant\" such a patent license to a\nparty means to make such an agreement or commitment not to enforce a\npatent against the party.\n\nIf you convey a covered work, knowingly relying on a patent license,\nand the Corresponding Source of the work is not available for anyone\nto copy, free of charge and under the terms of this License, through a\npublicly available network server or other readily accessible means,\nthen you must either (1) cause the Corresponding Source to be so\navailable, or (2) arrange to deprive yourself of the benefit of the\npatent license for this particular work, or (3) arrange, in a manner\nconsistent with the requirements of this License, to extend the patent\nlicense to downstream recipients. \"Knowingly relying\" means you have\nactual knowledge that, but for the patent license, your conveying the\ncovered work in a country, or your recipient's use of the covered work\nin a country, would infringe one or more identifiable patents in that\ncountry that you have reason to believe are valid.\n\nIf, pursuant to or in connection with a single transaction or\narrangement, you convey, or propagate by procuring conveyance of, a\ncovered work, and grant a patent license to some of the parties\nreceiving the covered work authorizing them to use, propagate, modify\nor convey a specific copy of the covered work, then the patent license\nyou grant is automatically extended to all recipients of the covered\nwork and works based on it.\n\nA patent license is \"discriminatory\" if it does not include within\nthe scope of its coverage, prohibits the exercise of, or is\nconditioned on the non-exercise of one or more of the rights that are\nspecifically granted under this License. You may not convey a covered\nwork if you are a party to an arrangement with a third party that is\nin the business of distributing software, under which you make payment\nto the third party based on the extent of your activity of conveying\nthe work, and under which the third party grants, to any of the\nparties who would receive the covered work from you, a discriminatory\npatent license (a) in connection with copies of the covered work\nconveyed by you (or copies made from those copies), or (b) primarily\nfor and in connection with specific products or compilations that\ncontain the covered work, unless you entered into that arrangement,\nor that patent license was granted, prior to 28 March 2007.\n\nNothing in this License shall be construed as excluding or limiting\nany implied license or other defenses to infringement that may\notherwise be available to you under applicable patent law.\n\n12. No Surrender of Others' Freedom.\n\nIf conditions are imposed on you (whether by court order, agreement or\notherwise) that contradict the conditions of this License, they do not\nexcuse you from the conditions of this License. If you cannot convey a\ncovered work so as to satisfy simultaneously your obligations under this\nLicense and any other pertinent obligations, then as a consequence you may\nnot convey it at all. For example, if you agree to terms that obligate you\nto collect a royalty for further conveying from those to whom you convey\nthe Program, the only way you could satisfy both those terms and this\nLicense would be to refrain entirely from conveying the Program.\n\n13. Remote Network Interaction; Use with the GNU General Public License.\n\nNotwithstanding any other provision of this License, if you modify the\nProgram, your modified version must prominently offer all users\ninteracting with it remotely through a computer network (if your version\nsupports such interaction) an opportunity to receive the Corresponding\nSource of your version by providing access to the Corresponding Source\nfrom a network server at no charge, through some standard or customary\nmeans of facilitating copying of software. This Corresponding Source\nshall include the Corresponding Source for any work covered by version 3\nof the GNU General Public License that is incorporated pursuant to the\nfollowing paragraph.\n\nNotwithstanding any other provision of this License, you have\npermission to link or combine any covered work with a work licensed\nunder version 3 of the GNU General Public License into a single\ncombined work, and to convey the resulting work. The terms of this\nLicense will continue to apply to the part which is the covered work,\nbut the work with which it is combined will remain governed by version\n3 of the GNU General Public License.\n\n14. Revised Versions of this License.\n\nThe Free Software Foundation may publish revised and/or new versions of\nthe GNU Affero General Public License from time to time. Such new versions\nwill be similar in spirit to the present version, but may differ in detail to\naddress new problems or concerns.\n\nEach version is given a distinguishing version number. If the\nProgram specifies that a certain numbered version of the GNU Affero General\nPublic License \"or any later version\" applies to it, you have the\noption of following the terms and conditions either of that numbered\nversion or of any later version published by the Free Software\nFoundation. If the Program does not specify a version number of the\nGNU Affero General Public License, you may choose any version ever published\nby the Free Software Foundation.\n\nIf the Program specifies that a proxy can decide which future\nversions of the GNU Affero General Public License can be used, that proxy's\npublic statement of acceptance of a version permanently authorizes you\nto choose that version for the Program.\n\nLater license versions may give you additional or different\npermissions. However, no additional obligations are imposed on any\nauthor or copyright holder as a result of your choosing to follow a\nlater version.\n\n15. Disclaimer of Warranty.\n\nTHERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY\nAPPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT\nHOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY\nOF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,\nTHE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\nPURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM\nIS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF\nALL NECESSARY SERVICING, REPAIR OR CORRECTION.\n\n16. Limitation of Liability.\n\nIN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\nWILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS\nTHE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY\nGENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE\nUSE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF\nDATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD\nPARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),\nEVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF\nSUCH DAMAGES.\n\n17. Interpretation of Sections 15 and 16.\n\nIf the disclaimer of warranty and limitation of liability provided\nabove cannot be given local legal effect according to their terms,\nreviewing courts shall apply local law that most closely approximates\nan absolute waiver of all civil liability in connection with the\nProgram, unless a warranty or assumption of liability accompanies a\ncopy of the Program in return for a fee.\n\n                     END OF TERMS AND CONDITIONS\n\n            How to Apply These Terms to Your New Programs\n\nIf you develop a new program, and you want it to be of the greatest\npossible use to the public, the best way to achieve this is to make it\nfree software which everyone can redistribute and change under these terms.\n\nTo do so, attach the following notices to the program. It is safest\nto attach them to the start of each source file to most effectively\nstate the exclusion of warranty; and each file should have at least\nthe \"copyright\" line and a pointer to where the full notice is found.\n\n    <one line to give the program's name and a brief idea of what it does.>\n    Copyright (C) <year>  <name of author>\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nAlso add information on how to contact you by electronic and paper mail.\n\nIf your software can interact with users remotely through a computer\nnetwork, you should also make sure that it provides a way for users to\nget its source. For example, if your program is a web application, its\ninterface could display a \"Source\" link that leads users to an archive\nof the code. There are many ways you could offer source, and different\nsolutions will be better for different programs; see section 13 for the\nspecific requirements.\n\nYou should also get your employer (if you work as a programmer) or school,\nif any, to sign a \"copyright disclaimer\" for the program, if necessary.\nFor more information on this, and how to apply and follow the GNU AGPL, see\n<https://www.gnu.org/licenses/>.\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 10.5380859375,
          "content": "help:\n\t@sed \\\n\t\t-e '/^[a-zA-Z0-9_\\-\\/\\-]*:.*##/!d' \\\n\t\t-e 's/:.*##\\s*/:/' \\\n\t\t-e 's/^\\(.\\+\\):\\(.*\\)/$(shell tput setaf 6)\\1$(shell tput sgr0):\\2/' \\\n\t\t$(MAKEFILE_LIST) | column -c2 -t -s :\n\nDOCKER_COMPOSE_FILE = docker-compose-developer.yml\nDOCKER_COMPOSE_DEV_LABEL = com.grafana.oncall.env=dev\n\n# compose profiles\nMYSQL_PROFILE = mysql\nPOSTGRES_PROFILE = postgres\nSQLITE_PROFILE = sqlite\nENGINE_PROFILE = engine\nUI_PROFILE = oncall_ui\nREDIS_PROFILE = redis\nRABBITMQ_PROFILE = rabbitmq\nPROMETHEUS_PROFILE = prometheus\nGRAFANA_PROFILE = grafana\nTELEGRAM_POLLING_PROFILE = telegram_polling\n\nDEV_ENV_DIR = ./dev\nDEV_ENV_FILE = $(DEV_ENV_DIR)/.env.dev\nDEV_ENV_EXAMPLE_FILE = $(DEV_ENV_FILE).example\n\nDEV_HELM_FILE = $(DEV_ENV_DIR)/helm-local.yml\nDEV_HELM_USER_SPECIFIC_FILE = $(DEV_ENV_DIR)/helm-local.dev.yml\n\nENGINE_DIR = ./engine\nVENV_DIR = ./venv\nREQUIREMENTS_DEV_IN = $(ENGINE_DIR)/requirements-dev.in\nREQUIREMENTS_DEV_TXT = $(ENGINE_DIR)/requirements-dev.txt\nREQUIREMENTS_IN = $(ENGINE_DIR)/requirements.in\nREQUIREMENTS_TXT = $(ENGINE_DIR)/requirements.txt\nREQUIREMENTS_ENTERPRISE_TXT = $(ENGINE_DIR)/requirements-enterprise.txt\nSQLITE_DB_FILE = $(ENGINE_DIR)/oncall.db\n\n# make sure that DEV_HELM_USER_SPECIFIC_FILE and SQLITE_DB_FILE always exists\n# (NOTE: touch will only create the file if it doesn't already exist)\n$(shell touch $(DEV_HELM_USER_SPECIFIC_FILE))\n$(shell touch $(SQLITE_DB_FILE))\n\n# -n flag only copies DEV_ENV_EXAMPLE_FILE-> DEV_ENV_FILE if it doesn't already exist\n$(shell cp -n $(DEV_ENV_EXAMPLE_FILE) $(DEV_ENV_FILE))\ninclude $(DEV_ENV_FILE)\n\n# if COMPOSE_PROFILES is set in DEV_ENV_FILE use it\n# otherwise use a default (or what is passed in as an arg)\nifeq ($(COMPOSE_PROFILES),)\n\tCOMPOSE_PROFILES=$(ENGINE_PROFILE),$(UI_PROFILE),$(REDIS_PROFILE),$(GRAFANA_PROFILE)\nendif\n\n# conditionally assign DB based on what is present in COMPOSE_PROFILES\nifeq ($(findstring $(MYSQL_PROFILE),$(COMPOSE_PROFILES)),$(MYSQL_PROFILE))\n\tDB=$(MYSQL_PROFILE)\nelse ifeq ($(findstring $(POSTGRES_PROFILE),$(COMPOSE_PROFILES)),$(POSTGRES_PROFILE))\n\tDB=$(POSTGRES_PROFILE)\nelse\n\tDB=$(SQLITE_PROFILE)\nendif\n\n# conditionally assign BROKER_TYPE based on what is present in COMPOSE_PROFILES\n# if the user specifies both rabbitmq and redis, we'll make the assumption that rabbitmq is the broker\nifeq ($(findstring $(RABBITMQ_PROFILE),$(COMPOSE_PROFILES)),$(RABBITMQ_PROFILE))\n\tBROKER_TYPE=$(RABBITMQ_PROFILE)\nelse\n\tBROKER_TYPE=$(REDIS_PROFILE)\nendif\n\n# TODO: remove this when docker-compose local setup is removed\n# https://stackoverflow.com/a/649462\ndefine _DEPRECATION_MESSAGE\n⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️\nNOTE: docker-compose based make commands will be deprecated on (or around) October 1, 2023, in favour of\ntilt/k8s based commands. Please familirize yourself with the tilt/k8s commands.\n\nSee https://github.com/grafana/oncall/tree/dev/dev for instructions on how to use tilt helm/k8s commands.\n⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️\n\n\nendef\nexport _DEPRECATION_MESSAGE\ndefine echo_deprecation_message\n\t@echo \"$$_DEPRECATION_MESSAGE\"\nendef\n\n# SQLITE_DB_FiLE is set to properly mount the sqlite db file\nDOCKER_COMPOSE_ENV_VARS := COMPOSE_PROFILES=$(COMPOSE_PROFILES) DB=$(DB) BROKER_TYPE=$(BROKER_TYPE)\n\n# It's better to output pip log on the fly while building because it takes a lot of time\nDOCKER_COMPOSE_ENV_VARS += BUILDKIT_PROGRESS=plain\n\nifeq ($(DB),$(SQLITE_PROFILE))\n\tDOCKER_COMPOSE_ENV_VARS += SQLITE_DB_FILE=$(SQLITE_DB_FILE)\nendif\n\ndefine run_docker_compose_command\n\t$(call echo_deprecation_message)\n\t$(DOCKER_COMPOSE_ENV_VARS) docker compose -f $(DOCKER_COMPOSE_FILE) $(1)\nendef\n\ndefine run_engine_docker_command\n\t$(call run_docker_compose_command,run --rm oncall_engine_commands $(1))\nendef\n\ndefine run_ui_docker_command\n\t$(call run_docker_compose_command,run --rm oncall_ui sh -c '$(1)')\nendef\n\n# always use settings.ci_test django settings file when running the tests\n# if we use settings.dev it's very possible that some fail just based on the settings alone\ndefine run_backend_tests\n\t$(call run_engine_docker_command,pytest --ds=settings.ci_test $(1))\nendef\n\n.PHONY: local/up\nlocal/up: cluster/up  ## (beta) deploy all containers locally via tilt (k8s cluster will be created if it doesn't exist)\n\ttilt up\n\n.PHONY: local/down\nlocal/down:  ## (beta) remove all containers deployed via tilt\n\ttilt down\n\n.PHONY: local/clean\nlocal/clean: cluster/down ## (beta) clean up k8s local dev environment\n\n.PHONY: cluster/up\ncluster/up:  ## (beta) create a local development k8s cluster\n\tctlptl apply -f dev/kind-config.yaml\n\n.PHONY: cluster/down\ncluster/down: ## (beta) delete local development k8s cluster\n\tctlptl delete -f dev/kind-config.yaml\n\nstart:  ## start all of the docker containers\n\t$(call run_docker_compose_command,up --remove-orphans -d)\n\ninit:  ## build the frontend plugin code then run make start\n# if the oncall UI is to be run in docker we should do an initial build of the frontend code\n# this makes sure that it will be available when the grafana container starts up without the need to\n# restart the grafana container initially\nifeq ($(findstring $(UI_PROFILE),$(COMPOSE_PROFILES)),$(UI_PROFILE))\n\t$(call run_ui_docker_command,pnpm install && pnpm build:dev)\nendif\n\nstop:  # stop all of the docker containers\n\t$(call run_docker_compose_command,down)\n\nrestart:  ## restart all docker containers\n\t$(call run_docker_compose_command,restart)\n\nbuild:  ## rebuild images (e.g. when changing requirements.txt)\n\t$(call run_docker_compose_command,build)\n\ncleanup: stop  ## this will remove all of the images, containers, volumes, and networks\n               ## associated with your local OnCall developer setup\n\t$(call echo_deprecation_message)\n\tdocker system prune --filter label=\"$(DOCKER_COMPOSE_DEV_LABEL)\" --all --volumes --force\n\tdocker volume prune --filter label=\"$(DOCKER_COMPOSE_DEV_LABEL)\" --all --force\n\ninstall-pre-commit:\n\t@if [ ! -x \"$$(command -v pre-commit)\" ]; then \\\n\t\techo \"installing pre-commit\"; \\\n\t\tpip install $$(grep \"pre-commit\" $(ENGINE_DIR)/requirements-dev.txt); \\\n\telse \\\n\t\techo \"pre-commit already installed\"; \\\n\tfi\n\nlint: install-pre-commit  ## run both frontend and backend linters\n                          ## may need to run `pnpm install` from within `grafana-plugin`\n                          ## to install several `pre-commit` dependencies\n\tpre-commit run --all-files\n\ninstall-precommit-hook: install-pre-commit\n\tpre-commit install\n\ntest:  ## run backend tests\n\t$(call run_backend_tests)\n\ntest-dev:  ## very similar to `test` command, but allows you to pass arbitray args to pytest\n           ## for example, `make test-dev ARGS=\"--last-failed --pdb\"\n\t$(call run_backend_tests,$(ARGS))\n\ntest-helm:  ## run helm unit tests\n\thelm unittest ./helm/oncall $(ARGS)\n\nstart-celery-beat:  ## start celery beat\n\t$(call run_engine_docker_command,celery -A engine beat -l info)\n\npurge-queues: ## purge celery queues\n\t$(call run_engine_docker_command,celery -A engine purge -f)\n\nshell:  ## starts an OnCall engine Django shell\n\t$(call run_engine_docker_command,python manage.py shell)\n\ndbshell:  ## opens a DB shell\n\t$(call run_engine_docker_command,python manage.py dbshell)\n\nengine-manage:  ## run Django's `manage.py` script, inside of a docker container, passing `$CMD` as arguments.\n                ## e.g. `make engine-manage CMD=\"makemigrations\"`\n                ## https://docs.djangoproject.com/en/4.1/ref/django-admin/#django-admin-makemigrations\n\t$(call run_engine_docker_command,python manage.py $(CMD))\n\ntest-e2e:  ## run the e2e tests in headless mode\n\tpnpm --dir grafana-plugin test:e2e\n\ntest-e2e-watch:  ## start e2e tests in watch mode\n\tpnpm --dir grafana-plugin test:e2e:watch\n\ntest-e2e-show-report:  ## open last e2e test report\n\tpnpm --dir grafana-plugin playwright show-report\n\nui-test:  ## run the UI tests\n\t$(call run_ui_docker_command,pnpm test)\n\nui-lint:  ## run the UI linter\n\t$(call run_ui_docker_command,pnpm lint)\n\nui-build:  ## build the UI\n\t$(call run_ui_docker_command,pnpm build)\n\nui-command:  ## run any command, inside of a UI docker container, passing `$CMD` as arguments.\n             ## e.g. `make ui-command CMD=\"pnpm test\"`\n\t$(call run_ui_docker_command,$(CMD))\n\nexec-engine:  ## exec into engine container's bash\n\tdocker exec -it oncall_engine bash\n\n_backend-debug-enable:  ## enable Django's debug mode and Silk profiling (this is disabled by default for performance reasons)\n\t$(shell ./dev/add_env_var.sh DEBUG True $(DEV_ENV_FILE))\n\t$(shell ./dev/add_env_var.sh SILK_PROFILER_ENABLED True $(DEV_ENV_FILE))\n\n_backend-debug-disable:  ## disable Django's debug mode and Silk profiling\n\t$(shell ./dev/add_env_var.sh DEBUG False $(DEV_ENV_FILE))\n\t$(shell ./dev/add_env_var.sh SILK_PROFILER_ENABLED False $(DEV_ENV_FILE))\n\nbackend-debug-enable: _backend-debug-enable stop start\nbackend-debug-disable: _backend-debug-disable stop start\n\npip-compile-locked-dependencies:  ## compile engine requirements.txt files\n\t$(shell cd engine && uv pip compile requirements.in -o requirements.txt)\n\t$(shell cd engine && uv pip compile requirements-dev.in -o requirements-dev.txt)\n\n# The below commands are useful for running backend services outside of docker\ndefine backend_command\n\texport `grep -v '^#' $(DEV_ENV_FILE) | xargs -0` && \\\n\texport BROKER_TYPE=$(BROKER_TYPE) && \\\n\t. $(VENV_DIR)/bin/activate && \\\n\tcd engine && \\\n\t$(1)\nendef\n\nbackend-bootstrap:\n\tpython3.12 -m venv $(VENV_DIR)\n\t$(VENV_DIR)/bin/pip install -U pip wheel uv\n\t$(VENV_DIR)/bin/uv pip sync --python=$(VENV_DIR)/bin/python $(REQUIREMENTS_TXT) $(REQUIREMENTS_DEV_TXT)\n\t@if [ -f $(REQUIREMENTS_ENTERPRISE_TXT) ]; then \\\n\t\t$(VENV_DIR)/bin/uv pip install --python=$(VENV_DIR)/bin/python -r $(REQUIREMENTS_ENTERPRISE_TXT); \\\n\tfi\n\nbackend-migrate:\n\t$(call backend_command,python manage.py migrate)\n\nbackend-compile-deps:\n\tuv pip compile --strip-extras $(REQUIREMENTS_IN)\n\tuv pip compile --strip-extras $(REQUIREMENTS_DEV_IN)\n\nbackend-upgrade-deps:\n\tuv pip compile --strip-extras --upgrade $(REQUIREMENTS_IN)\n\nrun-backend-server:\n\t$(call backend_command,python manage.py runserver 0.0.0.0:8080)\n\nrun-backend-celery:\n\t$(call backend_command,python manage.py start_celery)\n\nbackend-command:\n\t$(call backend_command,$(CMD))\n\nbackend-manage-command:  ## run Django's `manage.py` script, passing `$CMD` as arguments.\n                         ## e.g. `make backend-manage-command CMD=\"makemigrations\"`\n                         ## https://docs.djangoproject.com/en/4.1/ref/django-admin/#django-admin-makemigrations\n                         ## alternatively you can open docker container with engine and run commands from there\n\t$(call backend_command,python manage.py $(CMD))\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 7.0126953125,
          "content": "# Grafana OnCall\n\n<img width=\"400px\" src=\"docs/img/logo.png\">\n\n[![Latest Release](https://img.shields.io/github/v/release/grafana/oncall?display_name=tag&sort=semver)](https://github.com/grafana/oncall/releases)\n[![License](https://img.shields.io/github/license/grafana/oncall)](https://github.com/grafana/oncall/blob/dev/LICENSE)\n[![Docker Pulls](https://img.shields.io/docker/pulls/grafana/oncall)](https://hub.docker.com/r/grafana/oncall/tags)\n[![Slack](https://img.shields.io/badge/join%20slack-%23grafana-%2Doncall-brightgreen.svg)](https://slack.grafana.com/)\n[![Build Status](https://github.com/grafana/oncall/actions/workflows/on-commits-to-dev.yml/badge.svg)](https://github.com/grafana/oncall/actions/workflows/on-commits-to-dev.yml)\n\nDeveloper-friendly incident response with brilliant Slack integration.\n\n<!-- markdownlint-disable MD013 MD033 -->\n<table>\n  <tbody>\n    <tr>\n    <td width=\"75%\"><img src=\"docs/img/screenshot.png\"></td>\n      <td><div align=\"center\"><a href=\"https://grafana.com/docs/oncall/latest/mobile-app/\">Android & iOS</a>:<br><img src=\"docs/img/screenshot_mobile.png\"></div></td>\n    </tr>\n  </tbody>\n</table>\n<!-- markdownlint-enable MD013 MD033 -->\n\n- Collect and analyze alerts from multiple monitoring systems\n- On-call rotations based on schedules\n- Automatic escalations\n- Phone calls, SMS, Slack, Telegram notifications\n\n## Getting Started\n\n> [!IMPORTANT]  \n> These instructions are for using Grafana 11 or newer. You must enable the feature toggle for\n> `externalServiceAccounts`. This is already done for the docker files and helm charts.  If you are running Grafana\n> separately see the Grafana documentation on how to enable this.\n\nWe prepared multiple environments:\n\n- [production](https://grafana.com/docs/oncall/latest/open-source/#production-environment)\n- [developer](./dev/README.md)\n- hobby (described in the following steps)\n\n1. Download [`docker-compose.yml`](docker-compose.yml):\n\n   ```bash\n   curl -fsSL https://raw.githubusercontent.com/grafana/oncall/dev/docker-compose.yml -o docker-compose.yml\n   ```\n\n2. Set variables:\n\n   ```bash\n   echo \"DOMAIN=http://localhost:8080\n   # Remove 'with_grafana' below if you want to use existing grafana\n   # Add 'with_prometheus' below to optionally enable a local prometheus for oncall metrics\n   # e.g. COMPOSE_PROFILES=with_grafana,with_prometheus\n   COMPOSE_PROFILES=with_grafana\n   # to setup an auth token for prometheus exporter metrics:\n   # PROMETHEUS_EXPORTER_SECRET=my_random_prometheus_secret\n   # also, make sure to enable the /metrics endpoint:\n   # FEATURE_PROMETHEUS_EXPORTER_ENABLED=True\n   SECRET_KEY=my_random_secret_must_be_more_than_32_characters_long\" > .env\n   ```\n\n3. (Optional) If you want to enable/setup the prometheus metrics exporter\n(besides the changes above), create a `prometheus.yml` file (replacing\n`my_random_prometheus_secret` accordingly), next to your `docker-compose.yml`:\n\n   ```bash\n   echo \"global:\n     scrape_interval:     15s\n     evaluation_interval: 15s\n\n   scrape_configs:\n     - job_name: prometheus\n       metrics_path: /metrics/\n       authorization:\n         credentials: my_random_prometheus_secret\n       static_configs:\n         - targets: [\\\"host.docker.internal:8080\\\"]\" > prometheus.yml\n   ```\n\n   NOTE: you will need to setup a Prometheus datasource using `http://prometheus:9090`\n   as the URL in the Grafana UI.\n\n4. Launch services:\n\n   ```bash\n   docker-compose pull && docker-compose up -d\n   ```\n\n5. Provision the plugin (If you run Grafana outside the included docker files install the plugin before these steps):\n\n   If you are using the included docker compose file use `admin`/`admin` credentials and `localhost:3000` to\n   perform this task.  If you have configured Grafana differently adjust your credentials and hostnames accordingly.\n\n   ```bash\n   # Note: onCallApiUrl 'engine' and grafanaUrl 'grafana' use the name from the docker compose file.  If you are \n   # running your grafana or oncall engine instance with another hostname adjust accordingly. \n   curl -X POST 'http://admin:admin@localhost:3000/api/plugins/grafana-oncall-app/settings' -H \"Content-Type: application/json\" -d '{\"enabled\":true, \"jsonData\":{\"stackId\":5, \"orgId\":100, \"onCallApiUrl\":\"http://engine:8080\", \"grafanaUrl\":\"http://grafana:3000\"}}'\n   curl -X POST 'http://admin:admin@localhost:3000/api/plugins/grafana-oncall-app/resources/plugin/install'\n   ```\n\n6. Start using OnCall, log in to Grafana with credentials\n   as defined above: `admin`/`admin`\n\n7. Enjoy! Check our [OSS docs](https://grafana.com/docs/oncall/latest/open-source/) if you want to set up\n   Slack, Telegram, Twilio or SMS/calls through Grafana Cloud.\n\n## Troubleshooting\n\nHere are some API calls that can be made to help if you are having difficulty connecting Grafana and OnCall.\n(Modify parameters to match your credentials and environment)\n\n   ```bash\n   # Use this to get more information about the connection between Grafana and OnCall\n   curl -X GET 'http://admin:admin@localhost:3000/api/plugins/grafana-oncall-app/resources/plugin/status'\n   ```\n\n   ```bash\n   # If you added a user or changed permissions and don't see it show up in OnCall you can manually trigger sync.\n   # Note: This is called automatically when the app is loaded (page load/refresh) but there is a 5 min timeout so \n   # that it does not generate unnecessary activity.\n   curl -X POST 'http://admin:admin@localhost:3000/api/plugins/grafana-oncall-app/resources/plugin/sync'\n   ```\n\n## Update version\n\nTo update your Grafana OnCall hobby environment:\n\n```shell\n# Update Docker image\ndocker-compose pull engine\n\n# Re-deploy\ndocker-compose up -d\n```\n\nAfter updating the engine, you'll also need to click the \"Update\" button on the [plugin version page](http://localhost:3000/plugins/grafana-oncall-app?page=version-history).\nSee [Grafana docs](https://grafana.com/docs/grafana/latest/administration/plugin-management/#update-a-plugin) for more\ninfo on updating Grafana plugins.\n\n## Join community\n\n[<img width=\"200px\" src=\"docs/img/slack.png\">](https://slack.grafana.com/)\n[<img width=\"200px\" src=\"docs/img/GH_discussions.png\">](https://community.grafana.com/)\n\nHave a question, comment or feedback? Don't be afraid to [open an issue](https://github.com/grafana/oncall/issues/new/choose)!\n\n## Stargazers over time\n\n[![Stargazers over time](https://starchart.cc/grafana/oncall.svg)](https://starchart.cc/grafana/oncall)\n\n## Further Reading\n\n- _Automated migration from other on-call tools_ - [Migrator](https://github.com/grafana/oncall/tree/dev/tools/migrators)\n- _Documentation_ - [Grafana OnCall](https://grafana.com/docs/oncall/latest/)\n- _Overview Webinar_ - [YouTube](https://www.youtube.com/watch?v=7uSe1pulgs8)\n- _How To Add Integration_ - [How to Add Integration](https://github.com/grafana/oncall/tree/dev/engine/config_integrations/README.md)\n- _Blog Post_ - [Announcing Grafana OnCall, the easiest way to do on-call management](https://grafana.com/blog/2021/11/09/announcing-grafana-oncall/)\n- _Presentation_ - [Deep dive into the Grafana, Prometheus, and Alertmanager stack for alerting and on-call management](https://grafana.com/go/observabilitycon/2021/alerting/?pg=blog)\n"
        },
        {
          "name": "Tiltfile",
          "type": "blob",
          "size": 6.103515625,
          "content": "load('ext://uibutton', 'cmd_button', 'location', 'text_input', 'bool_input')\nload(\"ext://configmap\", \"configmap_create\")\n\ngrafana_url = os.getenv(\"GRAFANA_URL\", \"http://grafana:3000\")\nrunning_under_parent_tiltfile = os.getenv(\"TILT_PARENT\", \"false\") == \"true\"\ntwilio_values=[\n    \"oncall.twilio.accountSid=\" + os.getenv(\"TWILIO_ACCOUNT_SID\", \"\"),\n    \"oncall.twilio.authToken=\" + os.getenv(\"TWILIO_AUTH_TOKEN\", \"\"),\n    \"oncall.twilio.phoneNumber=\" + os.getenv(\"TWILIO_PHONE_NUMBER\", \"\"),\n    \"oncall.twilio.verifySid=\" + os.getenv(\"TWILIO_VERIFY_SID\", \"\"),\n]\nis_ci=config.tilt_subcommand == \"ci\"\n# HELM_PREFIX must be \"oncall-dev\" as it is hardcoded in dev/helm-local.yml\nHELM_PREFIX = \"oncall-dev\"\n# Use docker registery generated by ctlptl (dev/kind-config.yaml)\nDOCKER_REGISTRY = \"localhost:63628/\"\n\nload(\"ext://docker_build_sub\", \"docker_build_sub\")\n\ngrafana_deps = [\"grafana-oncall-app-provisioning-configmap\", \"build-ui\", \"build-oncall-plugin-backend\"]\n\ndef get_profiles():\n    profiles = os.getenv('ONCALL_PROFILES', 'grafana,plugin,backend,tests')\n    return profiles.split(',')\nprofiles = get_profiles()\n\n# Tell ops-devenv/Tiltifle where our plugin.json file lives\nplugin_file = os.path.abspath(\"grafana-plugin/src/plugin.json\")\n\ndef plugin_json():\n    if 'plugin' in profiles:\n        return plugin_file\n    return 'NOT_A_PLUGIN'\n\ndef extra_grafana_ini():\n    return {\n        'feature_toggles': {\n            'accessControlOnCall': 'false'\n        }\n    }\n\ndef extra_env():\n    return {\n        \"GF_APP_URL\": grafana_url,\n        \"GF_SERVER_ROOT_URL\": grafana_url, \n        \"GF_FEATURE_TOGGLES_ENABLE\": \"externalServiceAccounts\",\n        \"ONCALL_API_URL\": \"http://oncall-dev-engine:8080\",\n\n        # Enables managed service accounts for plugin authentication in Grafana >= 11.3\n        # https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/#managed_service_accounts_enabled\n        \"GF_AUTH_MANAGED_SERVICE_ACCOUNTS_ENABLED\": \"true\",\n    }\n\ndef extra_deps():\n    return grafana_deps\n    \n\nallow_k8s_contexts([\"kind-kind\"])\n\n# Build the image including frontend folder for pytest\ndocker_build_sub(\n    \"localhost:63628/oncall/engine:dev\",\n    context=\"./engine\",\n    cache_from=[\"grafana/oncall:latest\", \"grafana/oncall:dev\"],\n    ignore=[\"./test-results/\", \"./grafana-plugin/dist/\", \"./grafana-plugin/e2e-tests/\", \"./grafana-plugin/node_modules/\"],\n    child_context=\".\",\n    target=\"dev\",\n    extra_cmds=[\"ADD ./grafana-plugin/src/plugin.json /etc/grafana-plugin/src/plugin.json\"],\n    live_update=[\n        sync(\"./engine/\", \"/etc/app\"),\n        run(\n            \"cd /etc/app && pip install pip-tools && pip-sync\",\n            trigger=\"./engine/requirements.txt\",\n        ),\n    ],\n)\n\n\ndef load_oncall_helm():\n    helm_oncall_values_files = [\"./dev/helm-local.yml\"]\n    local_dev_helm_values_file = \"./dev/helm-local.dev.yml\"\n\n    if is_ci:\n        helm_oncall_values_files.append(\"./.github/helm-ci.yml\")\n    elif os.path.exists(local_dev_helm_values_file):\n        helm_oncall_values_files.append(local_dev_helm_values_file)\n\n    yaml = helm(\n        \"helm/oncall\",\n        name=HELM_PREFIX,\n        values=helm_oncall_values_files,\n        set=twilio_values,\n        namespace=\"default\",\n    )\n    k8s_yaml(yaml)\n\n# --- GRAFANA START ----\n\nif not running_under_parent_tiltfile:\n    # Load the custom Grafana extensions\n    v1alpha1.extension_repo(\n        name=\"grafana-tilt-extensions\",\n        ref=\"v1.4.2\",\n        url=\"https://github.com/grafana/tilt-extensions\",\n    )\nv1alpha1.extension(\n    name=\"grafana\", repo_name=\"grafana-tilt-extensions\", repo_path=\"grafana\"\n)\nload(\"ext://grafana\", \"grafana\")\n\ndef load_grafana():\n    # The user/pass that you will login to Grafana with\n    grafana_admin_user_pass = os.getenv(\"GRAFANA_ADMIN_USER_PASS\", \"oncall\")\n    grafana_version = os.getenv(\"GRAFANA_VERSION\", \"latest\")\n\n    if 'plugin' in profiles:\n        # Generate and load the grafana deploy yaml\n        configmap_create(\n            \"grafana-oncall-app-provisioning\",\n            namespace=\"default\",\n            from_file=\"dev/grafana/provisioning/plugins/grafana-oncall-app-provisioning.yaml\",\n        )\n\n        k8s_resource(\n            objects=[\"grafana-oncall-app-provisioning:configmap\"],\n            new_name=\"grafana-oncall-app-provisioning-configmap\",\n            resource_deps=[\"build-ui\"],\n            labels=[\"Grafana\"],\n        )\n\n    # Use separate grafana helm chart\n    if not running_under_parent_tiltfile:\n        grafana(\n            grafana_version=grafana_version,\n            context=\"grafana-plugin\",\n            plugin_files=[\"grafana-plugin/src/plugin.json\"],\n            namespace=\"default\",\n            deps=grafana_deps,\n            extra_env={\n                \"GF_SECURITY_ADMIN_PASSWORD\": \"oncall\",\n                \"GF_SECURITY_ADMIN_USER\": \"oncall\",\n                \"GF_AUTH_ANONYMOUS_ENABLED\": \"false\",\n                \"GF_APP_URL\": grafana_url,  # older versions of grafana need this\n                \"GF_SERVER_ROOT_URL\": grafana_url,\n                \"GF_FEATURE_TOGGLES_ENABLE\": \"externalServiceAccounts\",\n                \"ONCALL_API_URL\": \"http://oncall-dev-engine:8080\",\n\n                # Enables managed service accounts for plugin authentication in Grafana >= 11.3\n                # https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/#managed_service_accounts_enabled\n                \"GF_AUTH_MANAGED_SERVICE_ACCOUNTS_ENABLED\": \"true\",\n            },\n            extra_grafana_ini={\n                \"feature_toggles\": {\n                    \"accessControlOnCall\": \"false\"\n                }\n            },\n        )\n# --- GRAFANA END ----\n\nif 'grafana' in profiles:\n    load_grafana()\nif 'plugin' in profiles:\n    include(\".tilt/plugin/Tiltfile\")\nif 'backend' in profiles:\n    load_oncall_helm()\n    include(\".tilt/backend/Tiltfile\")\n    include(\".tilt/deps/Tiltfile\")\nif 'tests' in profiles:\n    include(\".tilt/tests/Tiltfile\")\n\n# name all tilt resources after the k8s object namespace + name\ndef resource_name(id):\n    # Remove variable date from job name\n    if id.name.startswith(HELM_PREFIX + \"-engine-migrate\"):\n        return \"engine-migrate\"\n    return id.name.replace(HELM_PREFIX + \"-\", \"\")\n\nworkload_to_resource_function(resource_name)\n"
        },
        {
          "name": "dev",
          "type": "tree",
          "content": null
        },
        {
          "name": "docker-compose-developer.yml",
          "type": "blob",
          "size": 10.208984375,
          "content": "x-labels: &oncall-labels\n  - \"com.grafana.oncall.env=dev\"\n\nx-user: &oncall-user \"root\"\n\nx-oncall-build: &oncall-build-args\n  context: ./engine\n  target: ${ONCALL_IMAGE_TARGET:-dev}\n  labels: *oncall-labels\n  cache_from:\n    - grafana/oncall:latest\n    - grafana/oncall:dev\n\nx-oncall-volumes: &oncall-volumes\n  - ./engine:/etc/app\n  # see all the fun answers/comments here on why we need to do this\n  # tldr; using /dev/null as a default leads to a lot of fun problems\n  # https://stackoverflow.com/a/60456034\n  - ${ENTERPRISE_ENGINE:-/dev/null}:${ENTERPRISE_ENGINE_VOLUME_MOUNT_DEST_DIR:-/tmp/empty:ro}\n  - ${SQLITE_DB_FILE:-/dev/null}:/var/lib/oncall/oncall.db\n  # this is mounted for testing purposes. Some of the authorization tests\n  # reference this file\n  - ./grafana-plugin/src/plugin.json:/etc/grafana-plugin/src/plugin.json\n\nx-env-files: &oncall-env-files\n  - ./dev/.env.dev\n  - ./dev/.env.${DB}.dev\n\nx-env-vars: &oncall-env-vars\n  BROKER_TYPE: ${BROKER_TYPE}\n  GRAFANA_API_URL: http://localhost:3000\n  GOOGLE_APPLICATION_CREDENTIALS: /etc/app/gcp_service_account.json\n  FCM_PROJECT_ID: oncall-mobile-dev\n\n# basically this is needed because the oncall backend containers have been configured to communicate w/ grafana via\n# http://localhost:3000 (GRAFANA_API_URL). This URL is used in two scenarios:\n# 1. oncall backend -> grafana API communication (happens within docker)\n# 2. accessing templated URLs generated by the oncall backend - meant to be accessed via a browser on your host machine\n# The alternative is to set GRAFANA_API_URL to http://grafana:3000. However, this would only work in scenario #1\n# as http://grafana:3000 would not be resolvable on the host machine (without modifying /etc/hosts)\n#\n# by adding this extra_host entry to the oncall backend containers any calls to localhost will get routed to the docker\n# gateway, onto the host machine, where localhost:3000 points to grafana\nx-extra-hosts: &oncall-extra-hosts\n  - \"localhost:host-gateway\"\n\nservices:\n  oncall_ui:\n    container_name: oncall_ui\n    labels: *oncall-labels\n    build:\n      context: ./grafana-plugin\n      dockerfile: Dockerfile.dev\n      labels: *oncall-labels\n    volumes:\n      - ./grafana-plugin:/etc/app\n      - node_modules_dev:/etc/app/node_modules\n    profiles:\n      - oncall_ui\n\n  oncall_engine:\n    container_name: oncall_engine\n    labels: *oncall-labels\n    build: *oncall-build-args\n    restart: always\n    user: *oncall-user\n    command: sh -c \"uwsgi --disable-logging --py-autoreload 3 --ini uwsgi.ini\"\n    env_file: *oncall-env-files\n    environment: *oncall-env-vars\n    volumes: *oncall-volumes\n    extra_hosts: *oncall-extra-hosts\n    ports:\n      - \"8080:8080\"\n    depends_on:\n      oncall_db_migration:\n        condition: service_completed_successfully\n    profiles:\n      - engine\n\n  oncall_telegram_polling:\n    container_name: oncall_telegram_polling\n    labels: *oncall-labels\n    build: *oncall-build-args\n    restart: always\n    user: *oncall-user\n    command: sh -c \"python manage.py start_telegram_polling\"\n    env_file: *oncall-env-files\n    environment: *oncall-env-vars\n    volumes: *oncall-volumes\n    extra_hosts: *oncall-extra-hosts\n    depends_on:\n      oncall_db_migration:\n        condition: service_completed_successfully\n    profiles:\n      - telegram_polling\n\n  # used to invoke one-off commands, primarily from the Makefile\n  # oncall_engine couldn't (easily) be used due to it's depends_on property\n  # we could alternatively just use `docker run` however that would require\n  # duplicating the env-files, volume mounts, etc in the Makefile\n  oncall_engine_commands:\n    container_name: oncall_engine_commands\n    labels: *oncall-labels\n    build: *oncall-build-args\n    user: *oncall-user\n    env_file: *oncall-env-files\n    environment: *oncall-env-vars\n    volumes: *oncall-volumes\n    extra_hosts: *oncall-extra-hosts\n    profiles:\n      # no need to start this except from within the Makefile\n      - _engine_commands\n\n  oncall_celery:\n    container_name: oncall_celery\n    labels: *oncall-labels\n    build: *oncall-build-args\n    restart: always\n    user: *oncall-user\n    command: \"python manage.py start_celery\"\n    env_file: *oncall-env-files\n    environment: *oncall-env-vars\n    volumes: *oncall-volumes\n    extra_hosts: *oncall-extra-hosts\n    depends_on:\n      oncall_db_migration:\n        condition: service_completed_successfully\n    profiles:\n      - engine\n\n  flower:\n    container_name: flower\n    labels: *oncall-labels\n    image: mher/flower:1.2.0\n    environment:\n      # TODO: make this work properly w/ BROKER_TYPE env var\n      CELERY_BROKER_URL: \"redis://redis:6379/0\"\n    ports:\n      - \"5555:5555\"\n    depends_on:\n      oncall_celery:\n        condition: service_started\n    profiles:\n      - engine\n\n  oncall_db_migration:\n    container_name: oncall_db_migration\n    labels: *oncall-labels\n    build: *oncall-build-args\n    user: *oncall-user\n    command: \"python manage.py migrate --noinput\"\n    env_file: *oncall-env-files\n    environment: *oncall-env-vars\n    volumes: *oncall-volumes\n    extra_hosts: *oncall-extra-hosts\n    depends_on:\n      postgres:\n        condition: service_healthy\n        required: false\n      mysql:\n        condition: service_healthy\n        required: false\n      rabbitmq:\n        condition: service_healthy\n        required: false\n      redis:\n        condition: service_healthy\n        required: false\n    profiles:\n      - engine\n\n  redis:\n    container_name: redis\n    labels: *oncall-labels\n    image: redis:7.0.15\n    restart: always\n    ports:\n      - \"6379:6379\"\n    deploy:\n      labels: *oncall-labels\n      resources:\n        limits:\n          memory: 500m\n          cpus: \"0.5\"\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      timeout: 5s\n      interval: 5s\n      retries: 10\n    volumes:\n      - redisdata_dev:/data\n    profiles:\n      - redis\n\n  rabbitmq:\n    container_name: rabbitmq\n    labels: *oncall-labels\n    image: \"rabbitmq:3.12.0-management\"\n    restart: always\n    environment:\n      RABBITMQ_DEFAULT_USER: \"rabbitmq\"\n      RABBITMQ_DEFAULT_PASS: \"rabbitmq\"\n      RABBITMQ_DEFAULT_VHOST: \"/\"\n    ports:\n      - \"15672:15672\"\n      - \"5672:5672\"\n    deploy:\n      labels: *oncall-labels\n      resources:\n        limits:\n          memory: 1000m\n          cpus: \"0.5\"\n    healthcheck:\n      test: rabbitmq-diagnostics -q ping\n      interval: 30s\n      timeout: 30s\n      retries: 3\n    volumes:\n      - rabbitmqdata_dev:/var/lib/rabbitmq\n    profiles:\n      - rabbitmq\n\n  mysql:\n    container_name: mysql\n    labels: *oncall-labels\n    image: mysql:8.0.32\n    command: >-\n      --default-authentication-plugin=mysql_native_password --character-set-server=utf8mb4\n      --collation-server=utf8mb4_unicode_ci --max_connections=1024\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: empty\n      MYSQL_DATABASE: oncall_local_dev\n    ports:\n      - \"3306:3306\"\n    deploy:\n      labels: *oncall-labels\n      resources:\n        limits:\n          memory: 1000m\n          cpus: \"0.5\"\n    healthcheck:\n      test: \"mysql -uroot -pempty oncall_local_dev -e 'select 1'\"\n      timeout: 20s\n      retries: 10\n    volumes:\n      - mysqldata_dev:/var/lib/mysql\n    profiles:\n      - mysql\n\n  mysql_to_create_grafana_db:\n    container_name: mysql_to_create_grafana_db\n    labels: *oncall-labels\n    image: mysql:8.0.32\n    command: >-\n      bash -c \"mysql -h mysql -uroot -pempty\n      -e 'CREATE DATABASE IF NOT EXISTS grafana CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;'\"\n    depends_on:\n      mysql:\n        condition: service_healthy\n    profiles:\n      - mysql\n\n  postgres:\n    container_name: postgres\n    labels: *oncall-labels\n    image: postgres:14.4\n    restart: always\n    environment:\n      POSTGRES_DB: oncall_local_dev\n      POSTGRES_PASSWORD: empty\n      POSTGRES_INITDB_ARGS: --encoding=UTF-8\n    ports:\n      - \"5432:5432\"\n    deploy:\n      labels: *oncall-labels\n      resources:\n        limits:\n          memory: 500m\n          cpus: \"0.5\"\n    healthcheck:\n      test: [\"CMD\", \"pg_isready\", \"-U\", \"postgres\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n    volumes:\n      - postgresdata_dev:/var/lib/postgresql/data\n    profiles:\n      - postgres\n\n  postgres_to_create_grafana_db:\n    container_name: postgres_to_create_grafana_db\n    labels: *oncall-labels\n    image: postgres:14.4\n    command: >-\n      bash -c \"PGPASSWORD=empty psql -U postgres\n      -h postgres -tc \\\"SELECT 1 FROM pg_database WHERE datname = 'grafana'\\\" | grep -q 1 || PGPASSWORD=empty psql\n      -U postgres -h postgres -c \\\"CREATE DATABASE grafana\\\"\"\n    depends_on:\n      postgres:\n        condition: service_healthy\n    profiles:\n      - postgres\n\n  prometheus:\n    container_name: prometheus\n    labels: *oncall-labels\n    image: prom/prometheus\n    volumes:\n      - ./dev/prometheus.yml:/etc/prometheus/prometheus.yml\n    ports:\n      - \"9090:9090\"\n    profiles:\n      - prometheus\n\n  grafana:\n    container_name: grafana\n    labels: *oncall-labels\n    image: \"grafana/${GRAFANA_IMAGE:-grafana:latest}\"\n    restart: always\n    environment:\n      GF_SECURITY_ADMIN_USER: oncall\n      GF_SECURITY_ADMIN_PASSWORD: oncall\n      GF_PLUGINS_ALLOW_LOADING_UNSIGNED_PLUGINS: grafana-oncall-app\n      GF_FEATURE_TOGGLES_ENABLE: externalServiceAccounts\n      ONCALL_API_URL: http://host.docker.internal:8080\n      GF_AUTH_MANAGED_SERVICE_ACCOUNTS_ENABLED: true\n    env_file:\n      - ./dev/.env.${DB}.dev\n    ports:\n      - \"3000:3000\"\n    deploy:\n      labels: *oncall-labels\n      resources:\n        limits:\n          memory: 500m\n          cpus: \"0.5\"\n    extra_hosts:\n      - \"host.docker.internal:host-gateway\"\n    volumes:\n      - grafanadata_dev:/var/lib/grafana\n      - ./grafana-plugin:/var/lib/grafana/plugins/grafana-plugin\n      - ./dev/grafana/provisioning:/etc/grafana/provisioning\n      - ${GRAFANA_DEV_PROVISIONING:-/dev/null}:/etc/grafana/grafana.ini\n    depends_on:\n      postgres:\n        condition: service_healthy\n        required: false\n      mysql:\n        condition: service_healthy\n        required: false\n    profiles:\n      - grafana\n\nvolumes:\n  redisdata_dev:\n    labels: *oncall-labels\n  grafanadata_dev:\n    labels: *oncall-labels\n  rabbitmqdata_dev:\n    labels: *oncall-labels\n  postgresdata_dev:\n    labels: *oncall-labels\n  mysqldata_dev:\n    labels: *oncall-labels\n  node_modules_dev:\n    labels: *oncall-labels\n\nnetworks:\n  default:\n    name: oncall_dev\n    labels: *oncall-labels\n"
        },
        {
          "name": "docker-compose-mysql-rabbitmq.yml",
          "type": "blob",
          "size": 4.404296875,
          "content": "x-environment: &oncall-environment\n  BASE_URL: $DOMAIN\n  SECRET_KEY: $SECRET_KEY\n  RABBITMQ_USERNAME: \"rabbitmq\"\n  RABBITMQ_PASSWORD: $RABBITMQ_PASSWORD\n  RABBITMQ_HOST: \"rabbitmq\"\n  RABBITMQ_PORT: \"5672\"\n  RABBITMQ_DEFAULT_VHOST: \"/\"\n  MYSQL_PASSWORD: $MYSQL_PASSWORD\n  MYSQL_DB_NAME: oncall_hobby\n  MYSQL_USER: ${MYSQL_USER:-root}\n  MYSQL_HOST: ${MYSQL_HOST:-mysql}\n  MYSQL_PORT: 3306\n  REDIS_URI: redis://redis:6379/0\n  DJANGO_SETTINGS_MODULE: settings.hobby\n  CELERY_WORKER_QUEUE: \"default,critical,long,slack,telegram,webhook,retry,celery\"\n  CELERY_WORKER_CONCURRENCY: \"1\"\n  CELERY_WORKER_MAX_TASKS_PER_CHILD: \"100\"\n  CELERY_WORKER_SHUTDOWN_INTERVAL: \"65m\"\n  CELERY_WORKER_BEAT_ENABLED: \"True\"\n  GRAFANA_API_URL: http://grafana:3000\n\nservices:\n  engine:\n    image: grafana/oncall\n    restart: always\n    ports:\n      - \"8080:8080\"\n    command: sh -c \"uwsgi --ini uwsgi.ini\"\n    environment: *oncall-environment\n    depends_on:\n      mysql:\n        condition: service_healthy\n      oncall_db_migration:\n        condition: service_completed_successfully\n      rabbitmq:\n        condition: service_healthy\n      redis:\n        condition: service_started\n\n  celery:\n    image: grafana/oncall\n    restart: always\n    command: sh -c \"./celery_with_exporter.sh\"\n    environment: *oncall-environment\n    depends_on:\n      mysql:\n        condition: service_healthy\n      oncall_db_migration:\n        condition: service_completed_successfully\n      rabbitmq:\n        condition: service_healthy\n      redis:\n        condition: service_started\n\n  oncall_db_migration:\n    image: grafana/oncall\n    command: python manage.py migrate --noinput\n    environment: *oncall-environment\n    depends_on:\n      mysql:\n        condition: service_healthy\n      rabbitmq:\n        condition: service_healthy\n\n  mysql:\n    image: mysql:8.0.32\n    command: >-\n      --default-authentication-plugin=mysql_native_password\n      --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci\n    restart: always\n    expose:\n      - 3306\n    volumes:\n      - dbdata:/var/lib/mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: $MYSQL_PASSWORD\n      MYSQL_DATABASE: oncall_hobby\n    deploy:\n      resources:\n        limits:\n          memory: 1000m\n          cpus: \"0.5\"\n    healthcheck:\n      test: \"mysql -uroot -p$MYSQL_PASSWORD oncall_hobby -e 'select 1'\"\n      timeout: 20s\n      retries: 10\n\n  redis:\n    image: redis:7.0.15\n    restart: always\n    expose:\n      - 6379\n    deploy:\n      resources:\n        limits:\n          memory: 100m\n          cpus: \"0.1\"\n\n  rabbitmq:\n    image: \"rabbitmq:3.12.0-management\"\n    restart: always\n    hostname: rabbitmq\n    volumes:\n      - rabbitmqdata:/var/lib/rabbitmq\n    environment:\n      RABBITMQ_DEFAULT_USER: \"rabbitmq\"\n      RABBITMQ_DEFAULT_PASS: $RABBITMQ_PASSWORD\n      RABBITMQ_DEFAULT_VHOST: \"/\"\n    deploy:\n      resources:\n        limits:\n          memory: 1000m\n          cpus: \"0.5\"\n    healthcheck:\n      test: rabbitmq-diagnostics -q ping\n      interval: 30s\n      timeout: 30s\n      retries: 3\n\n  mysql_to_create_grafana_db:\n    image: mysql:8.0.32\n    command: >-\n      bash -c \"mysql -h ${MYSQL_HOST:-mysql} -uroot -p${MYSQL_PASSWORD:?err}\n      -e 'CREATE DATABASE IF NOT EXISTS grafana CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;'\"\n    depends_on:\n      mysql:\n        condition: service_healthy\n    profiles:\n      - with_grafana\n\n  grafana:\n    image: \"grafana/${GRAFANA_IMAGE:-grafana:latest}\"\n    restart: always\n    ports:\n      - \"3000:3000\"\n    environment:\n      GF_DATABASE_TYPE: mysql\n      GF_DATABASE_HOST: ${MYSQL_HOST:-mysql}\n      GF_DATABASE_USER: ${MYSQL_USER:-root}\n      GF_DATABASE_PASSWORD: ${MYSQL_PASSWORD:?err}\n      GF_FEATURE_TOGGLES_ENABLE: externalServiceAccounts\n      GF_SECURITY_ADMIN_USER: ${GRAFANA_USER:-admin}\n      GF_SECURITY_ADMIN_PASSWORD: ${GRAFANA_PASSWORD:-admin}\n      GF_PLUGINS_ALLOW_LOADING_UNSIGNED_PLUGINS: grafana-oncall-app\n      GF_INSTALL_PLUGINS: grafana-oncall-app\n      GF_AUTH_MANAGED_SERVICE_ACCOUNTS_ENABLED: true\n    deploy:\n      resources:\n        limits:\n          memory: 500m\n          cpus: \"0.5\"\n    depends_on:\n      mysql_to_create_grafana_db:\n        condition: service_completed_successfully\n      mysql:\n        condition: service_healthy\n    profiles:\n      - with_grafana\n    configs:\n      - source: grafana.ini\n        target: /etc/grafana/grafana.ini\n\nvolumes:\n  dbdata:\n  rabbitmqdata:\n\nconfigs:\n  grafana.ini:\n    content: |\n      [feature_toggles]\n      accessControlOnCall = false\n"
        },
        {
          "name": "docker-compose.yml",
          "type": "blob",
          "size": 2.990234375,
          "content": "x-environment: &oncall-environment\n  DATABASE_TYPE: sqlite3\n  BROKER_TYPE: redis\n  BASE_URL: $DOMAIN\n  SECRET_KEY: $SECRET_KEY\n  FEATURE_PROMETHEUS_EXPORTER_ENABLED: ${FEATURE_PROMETHEUS_EXPORTER_ENABLED:-false}\n  PROMETHEUS_EXPORTER_SECRET: ${PROMETHEUS_EXPORTER_SECRET:-}\n  REDIS_URI: redis://redis:6379/0\n  DJANGO_SETTINGS_MODULE: settings.hobby\n  CELERY_WORKER_QUEUE: \"default,critical,long,slack,telegram,webhook,retry,celery,grafana\"\n  CELERY_WORKER_CONCURRENCY: \"1\"\n  CELERY_WORKER_MAX_TASKS_PER_CHILD: \"100\"\n  CELERY_WORKER_SHUTDOWN_INTERVAL: \"65m\"\n  CELERY_WORKER_BEAT_ENABLED: \"True\"\n  GRAFANA_API_URL: http://grafana:3000\n\nservices:\n  engine:\n    image: grafana/oncall\n    restart: always\n    ports:\n      - \"8080:8080\"\n    command: sh -c \"uwsgi --ini uwsgi.ini\"\n    environment: *oncall-environment\n    volumes:\n      - oncall_data:/var/lib/oncall\n    depends_on:\n      oncall_db_migration:\n        condition: service_completed_successfully\n      redis:\n        condition: service_healthy\n\n  celery:\n    image: grafana/oncall\n    restart: always\n    command: sh -c \"./celery_with_exporter.sh\"\n    environment: *oncall-environment\n    volumes:\n      - oncall_data:/var/lib/oncall\n    depends_on:\n      oncall_db_migration:\n        condition: service_completed_successfully\n      redis:\n        condition: service_healthy\n\n  oncall_db_migration:\n    image: grafana/oncall\n    command: python manage.py migrate --noinput\n    environment: *oncall-environment\n    volumes:\n      - oncall_data:/var/lib/oncall\n    depends_on:\n      redis:\n        condition: service_healthy\n\n  redis:\n    image: redis:7.0.15\n    restart: always\n    expose:\n      - 6379\n    volumes:\n      - redis_data:/data\n    deploy:\n      resources:\n        limits:\n          memory: 500m\n          cpus: \"0.5\"\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      timeout: 5s\n      interval: 5s\n      retries: 10\n\n  prometheus:\n    image: prom/prometheus\n    hostname: prometheus\n    restart: always\n    ports:\n      - \"9090:9090\"\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n    profiles:\n      - with_prometheus\n\n  grafana:\n    image: \"grafana/${GRAFANA_IMAGE:-grafana:latest}\"\n    restart: always\n    ports:\n      - \"3000:3000\"\n    environment:\n      GF_FEATURE_TOGGLES_ENABLE: externalServiceAccounts\n      GF_SECURITY_ADMIN_USER: ${GRAFANA_USER:-admin}\n      GF_SECURITY_ADMIN_PASSWORD: ${GRAFANA_PASSWORD:-admin}\n      GF_PLUGINS_ALLOW_LOADING_UNSIGNED_PLUGINS: grafana-oncall-app\n      GF_INSTALL_PLUGINS: grafana-oncall-app\n      GF_AUTH_MANAGED_SERVICE_ACCOUNTS_ENABLED: true\n    volumes:\n      - grafana_data:/var/lib/grafana\n    deploy:\n      resources:\n        limits:\n          memory: 500m\n          cpus: \"0.5\"\n    profiles:\n      - with_grafana\n    configs:\n      - source: grafana.ini\n        target: /etc/grafana/grafana.ini\n\nvolumes:\n  grafana_data:\n  prometheus_data:\n  oncall_data:\n  redis_data:\n\nconfigs:\n  grafana.ini:\n    content: |\n      [feature_toggles]\n      accessControlOnCall = false\n"
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "engine",
          "type": "tree",
          "content": null
        },
        {
          "name": "grafana-plugin",
          "type": "tree",
          "content": null
        },
        {
          "name": "helm",
          "type": "tree",
          "content": null
        },
        {
          "name": "terraform",
          "type": "tree",
          "content": null
        },
        {
          "name": "tools",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}