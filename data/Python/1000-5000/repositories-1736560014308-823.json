{
  "metadata": {
    "timestamp": 1736560014308,
    "page": 823,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjgzMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "zappa/Zappa",
      "stars": 3385,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 5.0390625,
          "content": "# https://github.com/github/gitignore/blob/main/Python.gitignore\n\n# Byte-compiled / optimized / DLL files\n__pycache__/\n*.py[cod]\n*$py.class\n\n# C extensions\n*.so\n\n# Distribution / packaging\n.Python\nbuild/\ndevelop-eggs/\ndist/\ndownloads/\neggs/\n.eggs/\nlib/\nlib64/\nparts/\nsdist/\nvar/\nwheels/\nshare/python-wheels/\n*.egg-info/\n.installed.cfg\n*.egg\nMANIFEST\n\n# PyInstaller\n#  Usually these files are written by a python script from a template\n#  before PyInstaller builds the exe, so as to inject date/other infos into it.\n*.manifest\n*.spec\n\n# Installer logs\npip-log.txt\npip-delete-this-directory.txt\n\n# Unit test / coverage reports\nhtmlcov/\n.tox/\n.nox/\n.coverage\n.coverage.*\n.cache\nnosetests.xml\ncoverage.xml\n*.cover\n*.py,cover\n.hypothesis/\n.pytest_cache/\ncover/\n\n# Translations\n*.mo\n*.pot\n\n# Django stuff:\n*.log\nlocal_settings.py\ndb.sqlite3\ndb.sqlite3-journal\n\n# Flask stuff:\ninstance/\n.webassets-cache\n\n# Scrapy stuff:\n.scrapy\n\n# Sphinx documentation\ndocs/_build/\n\n# PyBuilder\n.pybuilder/\ntarget/\n\n# Jupyter Notebook\n.ipynb_checkpoints\n\n# IPython\nprofile_default/\nipython_config.py\n\n# pyenv\n#   For a library or package, you might want to ignore these files since the code is\n#   intended to run in multiple environments; otherwise, check them in:\n.python-version\n\n# pipenv\n#   According to pypa/pipenv#598, it is recommended to include Pipfile.lock in version control.\n#   However, in case of collaboration, if having platform-specific dependencies or dependencies\n#   having no cross-platform support, pipenv may install dependencies that don't work, or not\n#   install all needed dependencies.\nPipfile.lock\n\n# poetry\n#   Similar to Pipfile.lock, it is generally recommended to include poetry.lock in version control.\n#   This is especially recommended for binary packages to ensure reproducibility, and is more\n#   commonly ignored for libraries.\n#   https://python-poetry.org/docs/basic-usage/#commit-your-poetrylock-file-to-version-control\npoetry.lock\n\n# pdm\n#   Similar to Pipfile.lock, it is generally recommended to include pdm.lock in version control.\npdm.lock\n#   pdm stores project-wide configurations in .pdm.toml, but it is recommended to not include it\n#   in version control.\n#   https://pdm.fming.dev/#use-with-ide\n.pdm.toml\n\n# PEP 582; used by e.g. github.com/David-OConnor/pyflow and github.com/pdm-project/pdm\n__pypackages__/\n\n# Celery stuff\ncelerybeat-schedule\ncelerybeat.pid\n\n# SageMath parsed files\n*.sage.py\n\n# Environments\n.env\n.venv\nenv\nenv/\nvenv/\nENV/\nenv.bak/\nvenv.bak/\n\n# Spyder project settings\n.spyderproject\n.spyproject\n\n# Rope project settings\n.ropeproject\n\n# mkdocs documentation\n/site\n\n# mypy\n.mypy_cache/\n.dmypy.json\ndmypy.json\n\n# Pyre type checker\n.pyre/\n\n# pytype static type analyzer\n.pytype/\n\n# Cython debug symbols\ncython_debug/\n\n# PyCharm\n#  JetBrains specific template is maintained in a separate JetBrains.gitignore that can\n#  be found at https://github.com/github/gitignore/blob/main/Global/JetBrains.gitignore\n#  and can be added to the global gitignore or merged into this file.  For a more nuclear\n#  option (not recommended) you can uncomment the following to ignore the entire idea folder.\n.idea/\n\n# https://github.com/github/gitignore/blob/main/Global/Vim.gitignore\n\n# Swap\n[._]*.s[a-v][a-z]\n# !*.svg  # comment out if you don't need vector files\n[._]*.sw[a-p]\n[._]s[a-rt-v][a-z]\n[._]ss[a-gi-z]\n[._]sw[a-p]\n\n# Session\nSession.vim\nSessionx.vim\n\n# Temporary\n.netrwhist\n*~\n# Auto-generated tag files\ntags\n# Persistent undo\n[._]*.un~\n\n# https://github.com/github/gitignore/blob/main/Global/SublimeText.gitignore\n\n# Cache files for Sublime Text\n*.tmlanguage.cache\n*.tmPreferences.cache\n*.stTheme.cache\n\n# Workspace files are user-specific\n*.sublime-workspace\n\n# Project files should be checked into the repository, unless a significant\n# proportion of contributors will probably not be using Sublime Text\n*.sublime-project\n\n# SFTP configuration file\nsftp-config.json\nsftp-config-alt*.json\n\n# Package control specific files\nPackage Control.last-run\nPackage Control.ca-list\nPackage Control.ca-bundle\nPackage Control.system-ca-bundle\nPackage Control.cache/\nPackage Control.ca-certs/\nPackage Control.merged-ca-bundle\nPackage Control.user-ca-bundle\noscrypto-ca-bundle.crt\nbh_unicode_properties.cache\n\n# Sublime-github package stores a github token in this file\n# https://packagecontrol.io/packages/sublime-github\nGitHub.sublime-settings\n\n# https://github.com/github/gitignore/blob/main/Global/VisualStudioCode.gitignore\n\n.vscode/*\n\n# Local History for Visual Studio Code\n.history/\n\n# Built Visual Studio Code Extensions\n*.vsix\n\n# https://github.com/github/gitignore/blob/main/Global/macOS.gitignore\n\n# General\n.DS_Store\n.AppleDouble\n.LSOverride\n\n# Icon must end with two \\r\nIcon\n\n# Thumbnails\n._*\n\n# Files that might appear in the root of a volume\n.DocumentRevisions-V100\n.fseventsd\n.Spotlight-V100\n.TemporaryItems\n.Trashes\n.VolumeIcon.icns\n.com.apple.timemachine.donotpresent\n\n# Directories potentially created on remote AFP share\n.AppleDB\n.AppleDesktop\nNetwork Trash Folder\nTemporary Items\n.apdisk\n\n##########################\n# Zappa-specific ignores #\n##########################\n\n*.zip\nREADME.test.md\nzappa_settings.json\n"
        },
        {
          "name": ".pre-commit-config.yaml",
          "type": "blob",
          "size": 1.125,
          "content": "repos:\n-   repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.5.0\n    hooks:\n    -   id: check-yaml\n    -   id: name-tests-test\n        args: [--unittest]\n        exclude: ^tests/utils.py\n-   repo: https://github.com/pycqa/isort\n    rev: 5.13.2\n    hooks:\n    -   id: isort\n        args: [--profile=black, --gitignore]\n-   repo: https://github.com/psf/black\n    rev: 24.1.1\n    hooks:\n    -   id: black\n        args: [--line-length=127]\n-   repo: https://github.com/PyCQA/flake8\n    rev: 7.0.0\n    hooks:\n    -   id: flake8\n        args:\n        -   --count\n        -   --max-complexity=55\n        -   --max-line-length=127\n        -   --statistics\n        -   --extend-ignore=E203,E231,E252,E721,F403,F405,F541,W503\n        files: zappa\n-   repo: https://github.com/pre-commit/mirrors-mypy\n    rev: v1.8.0\n    hooks:\n    -   id: mypy\n        args:\n        -   --show-error-codes\n        -   --pretty\n        -   --ignore-missing-imports\n        -   --no-site-packages\n        files: zappa\n-   repo: https://github.com/thlorenz/doctoc\n    rev: v2.2.0\n    hooks:\n    -   id: doctoc\n        args: [--update-only]\n        files: ./README.md\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 18.5732421875,
          "content": "# Zappa Changelog\n\n## 0.59.0\n\nSee [release notes](https://github.com/zappa/Zappa/releases/tag/0.59.0)\n\n## 0.58.0\n\n* Add Python 3.11 support (#1262)\n* support new ephemeral storage feature in zappa_settings.json (#1120)\n* Update permissions (PR #1119)\n* Outdated manylinux wheels download logic (#1249)\n* cryptography>=35.0, plus pip>=20.3 - downloads wrong cryptography anywheel package (GLIBC_2.18 error) (#1063)\n* fix response time improperly configured for micro-seconds. (#1265)\n* fix unquote issue with querystring handling. (#1264)\n\n## 0.57.0\n\n* Python 3.10 support (#1124, #1160)\n* Remove patron link from README (#1200)\n* migrate test framework from nose to pytest (#1146)\n* Upgrading Django to 4.2 crashes the zappa based deployment with Error 500 (#1230)\n\n## 0.56.1\n\n* Fix FileNotFoundError in running_in_docker (#1201)\n* Use ZAPPA_RUNNING_IN_DOCKER environment variable to use any Python version inside Docker container (#1140)\n\n## 0.56.0\n* Not recognizing virtaulenv created with pyenv (#1132)\n* Remove six from zappa dependencies (#1164)\n* Handle optional space in x-forwarded-for header (#1127)\n* [Migrated] #2077 Fix url decoding for query string (#879)\n* [Migrated] [async] Check if args/kwargs are JSON Serializable while running locally (#704)\n* [Migrated] Add on Docs: event_source from S3 with key_filters (#446)\n* [Migrated] Logs are missing query strings (#410)\n* [Migrated] Update BINARY_SUPPORT to use Content-Encoding to identify if data is binary (#908)\n* Remove obsolete check for Django version < 1.7 (#1158)\n* [Migrated] s3 zip includes files that should be matched by the exclude setting (#422)\n* Add exclude_glob documentation (#1052)\n* Unable to schedule SQS Batch Size of greater than 10 (#1117)\n* [Migrated] s3 zip includes files that should be matched by the exclude setting (#422)\n* Allow any Python version if using Docker image for Lambda (#1140)\n* Incorrect hosted zone match (#1190)\n* Issue while trying to install or download zappa without binary file (#1199)\n\n## 0.55.0\n* Fix \"cd workflow fired event outside of the create tags event\" (#1152)\n* Remove 'futures' package requirement (#826,#808)\n* Remove function invoke command does not need quotes around function (#900)\n* Add python_requires to setup.py (#1111)\n* Remove python 3.6 support (#1151)\n* Update handler to be global if INSTANTIATE_LAMBDA_HANDLER_ON_IMPORT=True (#1096)\n* Fix async invocation in Python 3 (#1006)\n* Drastically reduce cold start times by calling LambdaHandler externally (#982)\n* Support Newest Manylinux Version for dependencies (#1083)\n* Decode zappa invoke output regardless of --no-color option (#1069)\n* Convert project to using 'pipenv' to manage dependencies (#1077)\n* Ensure unique scheduled event names (#1080)\n* Check isort in CI (#1078)\n* Use 'black' everywhere (#1076)\n* Update setup.py (#1050)\n\n## 0.54.2\n* Update documentation to reflect python 3.9 support (#1137)\n\n## 0.54.1\n* Increase Lambda client read timeout to 15m (#1065)\n* Unpin `Werkzeug` from `v0.x` (#1067)\n\n## 0.54.0\n* Pin troposphere version and update to 3.x (#1029)\n* Relax stage name restrictions when not using apigateway (#993)\n* Wait for lambda to become active during deploy/update (#992)\n* add support for Python 3.9 (#1026)\n\n## 0.53.0\n* Deprecated ACME v1 for Lets Encrypt\n* Global black formatting\n* Update & deploy using a docker container\n  * See [blog post](https://ianwhitestone.work/zappa-serverless-docker/) for more details on the current functionality and how it works\n  * See [PR](https://github.com/zappa/Zappa/pull/967) or [original issue](https://github.com/Miserlou/Zappa/issues/2188) for discussion around what is currently supported & next steps\n\n## 0.52.0\n* Remove dateutil version restriction\n* Fix failed downloads of wheel packages with non-alphanumeric characters\n* Last release from Miserlou/Zappa\n* Removed references to zappa.io\n\n## 0.51.0\n* Lambda Layers\n* Cognito support\n* Skip venv check if --no_venv argument is passed\n* Fix for abi3 filename matching\n* Wait for the Load Balancer to become active before proceeding\n* Add option 'Scheme' for alb config\n* Allow full path exclusions while packaging\n* Workaround for werkzeug incompatibility\n* And assorted fixes\n\n## 0.50.0\n* Updated manylinux to support manylinux1/manylinux2010/manylinux2014 packages\n* Fixed issue with duplicated cookie headers in API Gateway\n* Various maintenance updates to the README file\n* Remove old python 2.7 code (not all yet)\n* Use pip-tools to manage dependencies (and remove pinned dependencies from the package)\n* Add option for concurrency limit\n* Use safe_load with YAML\n* Support for ABI3 binary packages (particularly cryptography)\n* Remove dependency on lambda-packages\n\n## 0.49.0\n* Added support for Python 3.8\n* Fixed boto3 reporting of long names\n* Added support for new AWS Regions\n* Minor bug and README fixes\n\n## 0.48.2\n* Last version with Python 2.7 support.\n* Fix for invalid values of HTTP_HOST and others (introduced in 0.48.0)\n\n## 0.48.1\n* Fix for an issue where you couldn't update a function if it had been deployed with a version prior to 0.48.0\n* Support for private (VPC-only) API Gateway endpoints\n\n## 0.48.0\n* Deprecation of zappa.async because async is a reserved word in 3.7, please use zappa.asynchronous\n* Support for Application Load Balancer as an alternative to API Gateway\n* Improvements in manylinux wheel downloads\n* Support for multi-value query strings\n* Python 3.7 support\n* Support for multi-value headers\n* Support for the new 256kB async limit\n* Bunch of small typos, fixes and documentation improvements\n* Use Django 2 on tests with python 3\n* Stop applying tags on buckets not created by zappa\n* Be more forgiving on 504 errors during deployment\n* Fix cleanup of DynamoDB table for async tasks\n* Detection of invalid bucket names\n* Flake8 checks added to tests\n\n## 0.47.1\n* Handle accounts with more than 100 domains in route 53\n* Force requests upgrade to 2.20.0 for compatibility with urllib3 1.24\n* Allow defining API Gateway policies (including restricting access to one IP address)\n\n## 0.47.0\n* Support for SQS events\n* Added test to enforce running of doctoc\n* Add support for running django as a WSGI app (for NewRelic and others)\n* Updates AWS regions for lambda and API Gateway\n* Fix support for gcloud and other packages with slim_handler\n* Add --disable-keep-open to zappa tail\n* Dependency updates\n* Fix pyenv invocation\n* Add custom base_path stripping support\n* Multiple documentation fixes and improvements\n* first iteration of a documented deploy policy\n\n## 0.46.2\n* hotfix for creating virtual environments\n\n## 0.46.1\n* Hotfix for pipenv support (pip >10.0.1)\n* Adds AWS GovCloud support!\n* Test fix\n\n## 0.46.0\n_Okay, I dropped the ball for a long time. Bad BDFL!_\n_New releases will come much faster once again_\n* Pip10 compatibility\n* Add support for base path configuration in API gateway custom domain.\n* Fix path case sensitivity in get_installed_packages\n* Move task decorator async decision from import time to call time.\n* Fix documentation error in authorizer stanza of zappa_settings.json.\n* Adding explicit UTF-8 encoding for Flask app detection\n* Bump lambda packages version\n* Fix for work with latest Werkezeug\n* Fixed parameter name from 'FunctionNmae' -> 'FunctionName'\n* Remove `use`; fixes #1522\n* Philippe Trounev is awesome\n* fix case sensitivity problem for comparing package location\n* isBase64Encoded is a boolean flag instead of string true\n* check pip return code as sometimes pypi lookup fails\n* Add support to delete old versions of lambda functions.\n* Reactor title casing of dict keys into a utility function\n* Add `role_arn` settings variable\n* ..and too many more, check the changelog!\n\n## 0.45.1\n* Make `package_info.json` consistent across Python versions\n* Fixes to `task_sns`\n\n## 0.45.0\n* Add support for SQLite on Python 3.6 (LP bump)\n* Add unique package identifier file\n* Fixes #1171 don't colorize partial words\n* Various small changes\n* More robust OpenSSL parsing for LE\n* Update applies tags\n* Allows deploying and updating from existing S3 package\n\n## 0.44.3\n* Slim handler packaging hotfix - thanks @mcrowson!\n\n## 0.44.2\n* Non-Dynamo asynx hotfix - thanks @jwkvam!\n\n## 0.44.1\n* Packaging hotfix - thank Yunseop!\n\n## 0.44.0\n* Async responses (thanks Sean!)\n* Remove setLevel call from common log\n* Fix #1023\n* Merge #1058, 1059, 1073\n* Allow overriding of endpoint_url arg\n* Add support for API Gateway stage variables\n* Add AWS X-Ray support (thanks @mathom!)\n* Events take kwargs (Thanks @mcrowson!)\n* Detect P2/3 during `init`\n* Include stage names in `slim_handler` zips\n* Allow `-s` with `manage`\n* Use same S3 bucket for global endpoints\n* Fix bug with mixed-case packages\n* Cache wheels, fix 0-byte wheels\n\n## 0.43.2\n* Add index prefix to each subsequent schedule expression for the same event (#1051)\n* fix/Only update CORS on resources which have an OPTIONS method (#1036)\n* Support for binary support and cors simultaneously (#1011)\n* Set Flask script name based on domain which the request was made to (#1015)\n* Fix SNS Async (#1055)\n* GZip for slim handler\n* Force color option\n* Various dep bumps\n\n## 0.43.1\n* Fixes #1001, don't override AWS env vars if k:v not set. Thanks Nik and Sean!\n\n## 0.43.0\n* Checks for the key 'Environment' when fetching remote lambda env vars (#988)\n* except BotoCoreError before general exception in zappa.cli.update\n* make cookie hack case-insensitive\n* Fix #998 - Make environment variable keys strings instead of byte arrays in python 3.6\n* Add --disable_progress command line parameter\n* #946 - Allow setting cors to false.\n* #870 Lambda from outside\n* Implement context header mappings - Feature Request Issue #939\n* Separating out native AWS environment variables ##962\n* Rule name shortening\n* Splintering aws_environment_variables from environment_variables (to avoid overwriting AWS native env vars).\n\n## 0.42.2\n* Add exclude for __pycache__ contents (#943)\n* Fix #937 - Use get_data\n* Add support for configuring APIGW cache TTL and encryption #942\n* Addressing #909: Don't load credentials for 'package' command\n\n## 0.42.1\n* Small fixes for #918, #922, #803, #802, #799, #888, #903, #893, #828, #874, and others.\n* Support for manylinux wheels Python 3.6 package downloading.\n* Py3 `certify` fixes.\n* Add support for multiple expressions when scheduling\n* Fix content-type headers not passing through on DELETE\n* Avoid creating __init__.py in a directory next to a module (.py file) with the same name\n* Check recursively if there is any .py{,c} file in a directory before creating __init__.py\n* Fix SNS event tasks\n* Bump lambda-packages\n\n## 0.42.0\n* Cached manylinux wheel installed\n* New dependency installation formatting\n* Clarify \"stage\" vs \"environment\" terminology in code\n* Fix problem with capitalized packages\n* Delete local package if using wheels version. This saves several MBs on package size in some cases (e.g. numpy).\n* Thanks to @mcrowson, @nikbora and @schuyler1d\n\n## 0.41.3\n* Various Python3 fixes\n* Remove some dead code\n* More binary package fixes thanks to and @nikbora and @bxm156\n* Improved async tasks thanks to @schuyler1d\n* Various small changes\n\n## 0.41.2\n* Support for new `lambda-packages` format (Python3 support)\n* Fix `setup.py` on Windows Python3\n* Fix #818 - python3 import for LE\n* Support AWS-specific environment variables (with KMS)\n\n## 0.41.1\n* Add `template` command\n* Add `--json` in more places\n* Add `--output` to package\n* Support for manylinux wheels Python 3.6 package downloading #803\nfrom nikbora\n* Fix PyEnv exit code #799\n\n## 0.41.0\n* Add Python3 Support! #793, #6\n* Deprecate `lets_encrypt_expression`\n* Refactor a bunch of stuff to work with Python3 package restrictions >:[\n* #776 fix for libmysqlclient.so.18 error when using `slim_handler`\n* add profile and region detection to init - thanks @pdpol\n* #774 Wsgi environment improvements (Fix untrustworthy remote_addr)\n* Only create `__init__.py` file if there are python files or sub dirs in the folder\n* Update docs to reflect lambda name prepended to role_name\n* Guard log responses (thanks @scoates)\n\n## 0.40.0\n* Add Async Task Support! Lots of tickets and PRs related, including #61, #603, #694 and #732.\n* More info here: https://blog.zappa.io/posts/zappa-introduces-seamless-asynchronous-task-execution\n* Fix Django non-WSGI function initialization, #748\n* Add support for AWS Lambda Dead Letter Queue, #740\n* Fix API Gateway test button (the bolt button), #735\n* Switch to using per-lambda-name (project-stage) rather than a single default LambdaExecutionRole\n\n## 0.39.1\n* Fix broken Let's Encrypt trying to use new ACM ARNs\n* Add `apigateway_description` setting, fixes #722\n* More aggressive virtualenvironment checking\n\n## 0.39.0\n* Add `certificate_arn` setting, support for AWS Certificate Manager (#710)\n* Fix zip permissions when building on Windows (#714)\n* Change the active working directory to `/tmp` when using the slim handler so that relative filepaths work. (#711)\n\n## 0.38.1\n* Hotfix for broken Django deploys\n\n## 0.38.0\n* Add confirm to `certify`\n* Add `--manual` to `--certify`\n* Fix `certify` for existing domains\n* Add `extra_permissions` setting\n* Add `shell` command\n\n## 0.37.2\n* Revert to Kappa 0.6.0 #684 and others\n* Add binary support for more HTTP methods, #696\n\n## 0.37.1\n* Add binary upload support, fix #683\n\n## 0.37.0\n* Add support for custom, non-Let's Encrypt certificates, thanks to Benjamin Congdon\n* Change default permissions to allow executable binaries, #682\n* Fix binary support for Django POST, #677\n\n## 0.36.1\n* Remove Kappa 0.6 specific hack\n* Bring back '-' substitution\n\n## 0.36.0\n* Add automatic support for serving binary files! Via @wobeng, closes #481\n* Fixes `rollback` default back to 1 from 0, #673\n* Ensure correct chmodding during package creation, #484\n* Update regions that Zappa supports, #667\n* Validate function names based on actual gateway rules #521\n* Fix unschedule events with trimmed names #662\n* Fix a few places where `extends` wasn't respecting `stage_config`, #655\n* Begin to remove some dead code\n* Dependency bumps\n\n## 0.35.2\n* Adds `--non-http` to `tail`\n\n## 0.35.1\n* Fix 64bit `lambda-packages` (#645)\n* Fix wheel packages (#642)\n\n## 0.35.0\n* Replace ZappaCookie with Set-Cookie permutation! :D (#636)\n* Bump `lambda-packages` version\n* Fix installed_packages_name_set (#637)\n* Add `slim_handler` (#548)\n* Various small requirements bumps and other fixes.\n\n## 0.34.0\n* Adds `--since` and `--filter` to `tail`\n* Fixes `unschedule` command when used with specific stage\n\n## 0.33.0\n* Adds `package` command\n* Forbids the use of unicode environment variable keys\n* Initialize wsgi.errors to sys.stderr (was '')\n* Accept `AWS_SESSION_TOKEN` when executing via an IAM role (#589)\n* Set `REMOTE_USER` even when using `iam_authorization`\n* Rename `lets_encrypt_schedule` to `lets_encrypt_expression` (#571)\n* Messages in `tail` are now sequential\n* Bump version requirements, update README\n* Various other small changes\n\n## 0.32.1\n* File `tail` broken in CLI refactor\n\n## 0.32.0\n* Add Cognito Authorizers\n* Refactor CLI, add Bash Completion\n* Improve manylinux wheels\n* Varios fixes and req bumps\n\n## 0.31.0\n* Adds the `cors` feature, big thanks to @AusIV!\n* Adds support for `-e` eggs, thanks to @schuyler1d and @xuru!\n* Adds support for YAML settings files. Eat up, hipsters.\n\n## 0.30.1\n* Add `--http` filter to `tail`\n* Prefer `apigateway_enabled` but still respect `use_apigateway`, #493\n\n## 0.30.0\n* Adds colors to `zappa tail` output, fixes #492\n* Adds `--no-color` CLI argument\n* Adds fatal warning for bad `app_function`s, fixes #485.\n\n## 0.29.2\n* Fix S3 broken S3 events\n* Move `use_apigateway` to `apigateway_enabled`\n\n## 0.29.1\n* Fixes progress bar error for manylinux packages\n* Safely handle freezes when downloading from PyPI\n* Adds `s3://` syntax for remote env files. (#478, thanks @Leandr!)\n\n## 0.29.0\n* Adds `extends` syntax to settings file.\n* Fixes Django migrations, #464\n* Adds support for manylinux wheels! #398\n* Fixes multiple events in `status` command\n* Fixes support for `certify` on apex domains, #451\n\n## 0.28.3\n* Filter private hosted zones to avoid conflicts while certifying\n* Fix small Python3 bug (#457)\n* Fix for #453 (windows os.path)\n* Re-raise Zappa exception with full traceback\n* Skip pyc on django migrations, fixes #436\n* Delete correct domain name, #448\n\n## 0.28.2\n* added region and lambda name to not deployed error\n\n## 0.28.1\n* Add \"global\" mode to init. Expect a blog post soon!\n* Small refactors and dependency upgrades.\n\n## 0.28.0\n* `--json` for machine readable status output\n* `--all` for global deployment prep\n* Better exit code handling\n* Get AWS region from profile if not set in zappa_settings.json\n* Fix broken Django management command invocation\n* Add Kinesis permission\n* Add capability to specify authoriser arn\n* Various refactors and small fixes\n\n## 0.27.1\n\n* Bump lambda-packages\n* Fix new Django unicode problems (#397)\n* Ensure env vars are strings via @scoates\n* Fix #382\n\n## 0.27.0\n\n* Remove many hacks using new API Gateway features.\n    * Closes #303, #363, #361\n    * See the [blog post](https://blog.zappa.io/posts/unhacking-zappa-with-new-apigateway-features) for more details!\n* Bump dependencies - make sure you reinstall your requirements!\n* Improved stack update handling.\n\n### 0.26.1 (Never Published)\n\n* Warn on namespace collisions.\n* Bump lambda-packages version.\n\n## 0.26.0\n\n* Use simplified API Gateway configuration, via @koriaf.\n* Add better support for `use_apigateway` without any supplied app function. Reported by @mguidone.\n* Truncate illegally long event functions names. Reported by @mguidone.\n\n## 0.25.1\n\n* Remove 'boto' from default excludes. #333, thanks Claude!\n* Don't allow invalid API Gateway characters in the config. Thanks @scoates!\n* Better respect for `use_apigateway` in `update` command.\n* Avoids hang with API Gateway limit reached.\n* Fix DynamoDB/Kinesis event sources, add docs. Big thanks Claude!\n\n## 0.25.0\n\n* Add ability to invoke raw python strings, like so:\n\n    `zappa invoke dev \"print 1+2+3\" --raw`\n\n* Fixes multi-argument `manage` commands.\n* Updated related documentation.\n* Fixes places where program was exiting with status 0 instead of -1. Thanks @mattc!\n* Adds old-to-new-style check on delete, thanks @mathom.\n\n## 0.24.2\n\n* Fix a problem from trying to `update` old-style API routes using new Tropo code. Ensures `touch` works as intended again. Fix by @mathom.\n\n## 0.24.1\n\n* Add a helpful failure warning for users without permissions to automatically manage execution roles.\n* Fix potential div by zero error in new Tropo code.\n\n## 0.24.0\n\n* Use Troposphere/CloudFormation to create API Gateway routes\n  - Thanks, @mathom!\n* `zappa update` now updates changes to API Gateway routes\n* Redirect HTML content injection is fixed\n* Redirect HTML content injection now only happens for 'text/html' content types. This is a partial solution to #303.\n* Added CHANGELOG.md\n\n## 0.0.1 - 0.23.2\n\n* Didn't keep a changelog\n* Sorry!\n* Read the commit log :)\n"
        },
        {
          "name": "CONTRIBUTING.md",
          "type": "blob",
          "size": 2.236328125,
          "content": "# Contributing to Zappa\nWe love your input! We want to make contributing to this project as easy and transparent as possible, whether it's:\n\n- Reporting a bug\n- Discussing the current state of the code\n- Submitting a fix\n- Proposing new features\n- Becoming a maintainer\n\n## We Develop with Github\nWe use github to host code, to track issues and feature requests, as well as accept pull requests.\nWe actively welcome your pull requests:\n\n1. Fork the repo and create your branch from `master`.\n2. If you've added code that should be tested, add tests.\n3. If you've changed APIs, update the documentation.\n4. Ensure the test suite passes.\n5. Issue that pull request!\n\n## Any contributions you make will be under the MIT Software License\nIn short, when you submit code changes, your submissions are understood to be under the same [MIT License](http://choosealicense.com/licenses/mit/) that covers the project. Feel free to contact the maintainers if that's a concern.\n\n## Report bugs using Github's [issues](https://github.com/zappa/Zappa/issues)\nWe use GitHub issues to track public bugs. Report a bug by [opening a new issue](https://github.com/zappa/Zappa/issues/new); it's that easy!\n\n## Write bug reports with detail, background, and sample code\nHere are two great examples:\n- [http://stackoverflow.com/q/12488905/180626](http://stackoverflow.com/q/12488905/180626) \n- [http://www.openradar.me/11905408](http://www.openradar.me/11905408)\n\n**Great Bug Reports** tend to have:\n\n- A quick summary and/or background\n- Steps to reproduce\n  - Be specific!\n  - Give sample code if you can\n- What you expected would happen\n- What actually happens\n- Notes (possibly including why you think this might be happening, or stuff you tried that didn't work)\n\nPeople *love* thorough bug reports, not even kidding.\n\n## License\nBy contributing, you agree that your contributions will be licensed under its MIT License.\n\n## References\nThis document was adapted from the basic template for contributing guideliens by @briandk\n[Contributing to Transcriptase](https://gist.github.com/briandk/3d2e8b3ec8daf5a27a62). The template itself is based on the open-source contribution guidelines for [Facebook's Draft](https://github.com/facebook/draft-js/blob/a9316a723f9e918afde44dea68b5f9f39b7d9b00/CONTRIBUTING.md) "
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0517578125,
          "content": "The MIT License (MIT)\n\nCopyright (c) 2017 Rich Jones\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "MANIFEST.in",
          "type": "blob",
          "size": 0.0615234375,
          "content": "include README.md LICENSE Pipfile\nrecursive-include zappa *.py\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 2.4697265625,
          "content": "\nhelp:\n\t@echo 'Zappa Make Targets'\n\t@echo '-----------------------'\n\t@echo 'These targets are aimed at making development, testing, and building easier'\n\t@echo ''\n\t@echo 'Setup'\n\t@echo 'make clean: Remove the built files, local caches, mypy and coverage information'\n\t@echo 'make requirements: Generate requirements from requirements.in and install them to the current environment'\n\t@echo 'make build: Build the source and wheel'\n\t@echo ''\n\t@echo 'Linting'\n\t@echo 'make flake: Flake8 checking'\n\t@echo 'make mypy: Run static type checking for zappa and tests directories'\n\t@echo 'make isort: Sort imports'\n\t@echo 'make black: Format project code according to Black convention'\n\t@echo ''\n\t@echo 'Testing'\n\t@echo 'make tests: Run all project tests. Additional make targets exist for subsets of the tests. Inspect the Makefile for details'\n\n.PHONY: clean requirements build flake mypy isort black tests\n\nclean:\n\tfind . -name '*.pyc' -exec rm -f {} +\n\tfind . -name '*.pyo' -exec rm -f {} +\n\trm -rf .mypy_cache dist build *.egg-info\n\tcoverage erase\n\nrequirements:\n\tpip install pip --upgrade\n\tpip install \"pipenv>2021.11.15\"\n\n\tpipenv lock\n\tpipenv sync --dev\n\nbuild: clean requirements\n\tpython setup.py sdist\n\tpython setup.py bdist_wheel \n\nmypy:\n\tmypy --show-error-codes --pretty --ignore-missing-imports --strict zappa tests\n\nblack:\n\tblack --line-length 127 .\n\nblack-check:\n\tblack --line-length 127 . --check\n\t@echo \"If this fails, simply run: make black\"\n\nisort:\n\tisort . --profile=black\n\nisort-check:\n\tisort --check . --profile=black\n\nflake:\n\tflake8 zappa --count --select=E9,F63,F7,F82 --show-source --statistics\n\tflake8 zappa --count --exit-zero --max-complexity=55 --max-line-length=127 --statistics --ignore F403,F405,E203,E231,E252,W503\n\ntest-docs:\n\tpytest tests/tests_docs.py --cov=zappa --durations=0\n\ntest-handler:\n\tpytest tests/test_handler.py --cov=zappa --durations=0\n\ntest-middleware:\n\tpytest tests/tests_middleware.py --cov=zappa --durations=0\n\ntest-placebo:\n\tpytest tests/tests_placebo.py --cov=zappa --durations=0\n\ntest-async:\n\tpytest tests/tests_async.py --cov=zappa --durations=0\n\ntest-general:\n\tpytest tests/tests.py --cov=zappa --durations=0\n\ntest-utilities:\n\tpytest tests/tests_utilities.py --cov=zappa --durations=0\n\ncoverage-report:\n\tcoverage report --include=\"*/zappa*\"\n\ntests:\n\tmake clean\n\tpytest \\\n\t\ttests/tests_docs.py \\\n\t\ttests/test_handler.py \\\n\t\ttests/tests_middleware.py \\\n\t\ttests/tests_placebo.py \\\n\t\ttests/tests_async.py \\\n\t\ttests/tests.py \\\n\t\ttests/tests_utilities.py \\\n\t\t--cov=zappa\n\t\t--durations=0\n\n"
        },
        {
          "name": "Pipfile",
          "type": "blob",
          "size": 0.783203125,
          "content": "[[source]]\nname = \"pypi\"\nurl = \"https://pypi.org/simple\"\nverify_ssl = true\n\n[dev-packages]\nblack = \"==24.1.1\"\nboto3-stubs = \"*\"\ncoveralls = \"*\"\nDjango = \"<4\"\ndjango-stubs = \"*\"\nflake8 = \"==7.0.0\"\nFlask = \"*\"\nisort = \"==5.13.2\"\nmock = \"*\"\nmypy = \"==1.8.0\"\npackaging = \"*\"\npre-commit = \"*\"\npytest = \"*\"\npytest-cov = \"*\"\n\n[packages]\nargcomplete = \"*\"\nboto3 = \">=1.17.28\"\ndurationpy = \"*\"\nhjson = \"*\"\njmespath = \"*\"\nkappa = \"==0.6.0\"\npip = \">=9.0.1\"\n# Workaround until tests are updated to work with 'placebo' 0.10\n# Move to 'dev-packages' when unpinned\nplacebo = \"<0.10\"\npython-dateutil = \"*\"\npython-slugify = \"*\"\nPyYAML = \"*\"\n# previous versions don't work with urllib3 1.24\nrequests = \">=2.20.0\"\ntoml = \"*\"\ntqdm = \"*\"\ntroposphere = \">=3.0\"\nWerkzeug = \"*\"\nwheel = \"*\"\n\n[pipenv]\nallow_prereleases = false\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 83.505859375,
          "content": "<p align=\"center\">\n  <img src=\"http://i.imgur.com/oePnHJn.jpg\" alt=\"Zappa Rocks!\"/>\n</p>\n\n## Zappa - Serverless Python\n\n[![CI](https://github.com/zappa/Zappa/actions/workflows/ci.yml/badge.svg?branch=master&event=push)](https://github.com/zappa/Zappa/actions/workflows/ci.yml)\n[![Coverage](https://img.shields.io/coveralls/zappa/Zappa.svg)](https://coveralls.io/github/zappa/Zappa)\n[![PyPI](https://img.shields.io/pypi/v/Zappa.svg)](https://pypi.python.org/pypi/zappa)\n[![Slack](https://img.shields.io/badge/chat-slack-ff69b4.svg)](https://zappateam.slack.com/)\n\n<!-- START doctoc generated TOC please keep comment here to allow auto update -->\n<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->\n\n\n- [About](#about)\n- [Installation and Configuration](#installation-and-configuration)\n  - [Running the Initial Setup / Settings](#running-the-initial-setup--settings)\n- [Basic Usage](#basic-usage)\n  - [Initial Deployments](#initial-deployments)\n  - [Updates](#updates)\n    - [Docker Workflows](#docker-workflows)\n  - [Rollback](#rollback)\n  - [Scheduling](#scheduling)\n    - [Advanced Scheduling](#advanced-scheduling)\n      - [Multiple Expressions](#multiple-expressions)\n      - [Disabled Event](#disabled-event)\n  - [Undeploy](#undeploy)\n  - [Package](#package)\n    - [How Zappa Makes Packages](#how-zappa-makes-packages)\n  - [Template](#template)\n  - [Status](#status)\n  - [Tailing Logs](#tailing-logs)\n  - [Remote Function Invocation](#remote-function-invocation)\n  - [Django Management Commands](#django-management-commands)\n  - [SSL Certification](#ssl-certification)\n    - [Deploying to a Domain With AWS Certificate Manager](#deploying-to-a-domain-with-aws-certificate-manager)\n    - [Deploying to a Domain With a Let's Encrypt Certificate (DNS Auth)](#deploying-to-a-domain-with-a-lets-encrypt-certificate-dns-auth)\n    - [Deploying to a Domain With a Let's Encrypt Certificate (HTTP Auth)](#deploying-to-a-domain-with-a-lets-encrypt-certificate-http-auth)\n    - [Deploying to a Domain With Your Own SSL Certs](#deploying-to-a-domain-with-your-own-ssl-certs)\n- [Executing in Response to AWS Events](#executing-in-response-to-aws-events)\n- [Asynchronous Task Execution](#asynchronous-task-execution)\n  - [Catching Exceptions](#catching-exceptions)\n  - [Task Sources](#task-sources)\n  - [Direct Invocation](#direct-invocation)\n  - [Remote Invocations](#remote-invocations)\n  - [Restrictions](#restrictions)\n  - [Running Tasks in a VPC](#running-tasks-in-a-vpc)\n  - [Responses](#responses)\n- [Advanced Settings](#advanced-settings)\n    - [YAML Settings](#yaml-settings)\n- [Advanced Usage](#advanced-usage)\n  - [Keeping The Server Warm](#keeping-the-server-warm)\n    - [Serving Static Files / Binary Uploads](#serving-static-files--binary-uploads)\n  - [Enabling CORS](#enabling-cors)\n  - [Large Projects](#large-projects)\n  - [Enabling Bash Completion](#enabling-bash-completion)\n  - [Enabling Secure Endpoints on API Gateway](#enabling-secure-endpoints-on-api-gateway)\n    - [API Key](#api-key)\n    - [IAM Policy](#iam-policy)\n    - [API Gateway Lambda Authorizers](#api-gateway-lambda-authorizers)\n    - [Cognito User Pool Authorizer](#cognito-user-pool-authorizer)\n    - [API Gateway Resource Policy](#api-gateway-resource-policy)\n  - [Setting Environment Variables](#setting-environment-variables)\n    - [Local Environment Variables](#local-environment-variables)\n    - [Remote AWS Environment Variables](#remote-aws-environment-variables)\n    - [Remote Environment Variables](#remote-environment-variables)\n    - [Remote Environment Variables (via an S3 file)](#remote-environment-variables-via-an-s3-file)\n  - [API Gateway Context Variables](#api-gateway-context-variables)\n  - [Catching Unhandled Exceptions](#catching-unhandled-exceptions)\n  - [Using Custom AWS IAM Roles and Policies](#using-custom-aws-iam-roles-and-policies)\n    - [Custom AWS IAM Roles and Policies for Deployment](#custom-aws-iam-roles-and-policies-for-deployment)\n    - [Custom AWS IAM Roles and Policies for Execution](#custom-aws-iam-roles-and-policies-for-execution)\n  - [AWS X-Ray](#aws-x-ray)\n  - [Globally Available Server-less Architectures](#globally-available-server-less-architectures)\n  - [Raising AWS Service Limits](#raising-aws-service-limits)\n  - [Dead Letter Queues](#dead-letter-queues)\n  - [Unique Package ID](#unique-package-id)\n  - [Application Load Balancer Event Source](#application-load-balancer-event-source)\n  - [Endpoint Configuration](#endpoint-configuration)\n    - [Example Private API Gateway configuration](#example-private-api-gateway-configuration)\n  - [Cold Starts (Experimental)](#cold-starts-experimental)\n- [Zappa Guides](#zappa-guides)\n- [Zappa in the Press](#zappa-in-the-press)\n- [Sites Using Zappa](#sites-using-zappa)\n- [Related Projects](#related-projects)\n- [Hacks](#hacks)\n- [Contributing](#contributing)\n    - [Using a Local Repo](#using-a-local-repo)\n\n<!-- END doctoc generated TOC please keep comment here to allow auto update -->\n\n## About\n\n<p align=\"center\">\n  <a href=\"https://htmlpreview.github.io/?https://raw.githubusercontent.com/Miserlou/Talks/master/serverless-sf/big.quickstart.html\"><img src=\"http://i.imgur.com/c23kDNT.png?1\" alt=\"Zappa Slides\"/></a>\n</p>\n<p align=\"center\">\n  <i>In a hurry? Click to see <a href=\"https://htmlpreview.github.io/?https://raw.githubusercontent.com/Miserlou/Talks/master/serverless-sf/big.quickstart.html\">(now slightly out-dated) slides from Serverless SF</a>!</i>\n</p>\n\n**Zappa** makes it super easy to build and deploy server-less, event-driven Python applications (including, but not limited to, WSGI web apps) on AWS Lambda + API Gateway. Think of it as \"serverless\" web hosting for your Python apps. That means **infinite scaling**, **zero downtime**, **zero maintenance** - and at a fraction of the cost of your current deployments!\n\nIf you've got a Python web app (including Django and Flask apps), it's as easy as:\n\n```\n$ pip install zappa\n$ zappa init\n$ zappa deploy\n```\n\nand now you're server-less! _Wow!_\n\n> What do you mean \"serverless\"?\n\nOkay, so there still is a server - but it only has a _40 millisecond_ life cycle! Serverless in this case means **\"without any permanent infrastructure.\"**\n\nWith a traditional HTTP server, the server is online 24/7, processing requests one by one as they come in. If the queue of incoming requests grows too large, some requests will time out. With Zappa, **each request is given its own virtual HTTP \"server\"** by Amazon API Gateway. AWS handles the horizontal scaling automatically, so no requests ever time out. Each request then calls your application from a memory cache in AWS Lambda and returns the response via Python's WSGI interface. After your app returns, the \"server\" dies.\n\nBetter still, with Zappa you only pay for the milliseconds of server time that you use, so it's many **orders of magnitude cheaper** than VPS/PaaS hosts like Linode or Heroku - and in most cases, it's completely free. Plus, there's no need to worry about load balancing or keeping servers online ever again.\n\nIt's great for deploying serverless microservices with frameworks like Flask and Bottle, and for hosting larger web apps and CMSes with Django. Or, you can use any WSGI-compatible app you like! You **probably don't need to change your existing applications** to use it, and you're not locked into using it.\n\nZappa also lets you build hybrid event-driven applications that can scale to **trillions of events** a year with **no additional effort** on your part! You also get **free SSL certificates**, **global app deployment**, **API access management**, **automatic security policy generation**, **precompiled C-extensions**, **auto keep-warms**, **oversized Lambda packages**, and **many other exclusive features**!\n\nAnd finally, Zappa is **super easy to use**. You can deploy your application with a single command out of the box!\n\n__Awesome!__\n\n<p align=\"center\">\n  <img src=\"http://i.imgur.com/f1PJxCQ.gif\" alt=\"Zappa Demo Gif\"/>\n</p>\n\n## Installation and Configuration\n\n_Before you begin, make sure you are running Python 3.8/3.9/3.10/3.11/3.12 and you have a valid AWS account and your [AWS credentials file](https://blogs.aws.amazon.com/security/post/Tx3D6U6WSFGOK2H/A-New-and-Standardized-Way-to-Manage-Credentials-in-the-AWS-SDKs) is properly installed._\n\n**Zappa** can easily be installed through pip, like so:\n\n    $ pip install zappa\n\nPlease note that Zappa _**must**_ be installed into your project's [virtual environment](http://docs.python-guide.org/en/latest/dev/virtualenvs/). The virtual environment name should not be the same as the Zappa project name, as this may cause errors.\n\n_(If you use [pyenv](https://github.com/yyuu/pyenv) and love to manage virtualenvs with **pyenv-virtualenv**, you just have to call `pyenv local [your_venv_name]` and it's ready. [Conda](http://conda.pydata.org/docs/) users should comment [here](https://github.com/Miserlou/Zappa/pull/108).)_\n\nNext, you'll need to define your local and server-side settings.\n\n### Running the Initial Setup / Settings\n\n**Zappa** can automatically set up your deployment settings for you with the `init` command:\n\n    $ zappa init\n\nThis will automatically detect your application type (Flask/Django - Pyramid users [see here](https://github.com/Miserlou/Zappa/issues/278#issuecomment-241917956)) and help you define your deployment configuration settings. Once you finish initialization, you'll have a file named *zappa_settings.json* in your project directory defining your basic deployment settings. It will probably look something like this for most WSGI apps:\n\n```javascript\n{\n    // The name of your stage\n    \"dev\": {\n        // The name of your S3 bucket\n        \"s3_bucket\": \"lambda\",\n\n        // The modular python path to your WSGI application function.\n        // In Flask and Bottle, this is your 'app' object.\n        // Flask (your_module.py):\n        // app = Flask()\n        // Bottle (your_module.py):\n        // app = bottle.default_app()\n        \"app_function\": \"your_module.app\"\n    }\n}\n```\n\nor for Django:\n\n```javascript\n{\n    \"dev\": { // The name of your stage\n       \"s3_bucket\": \"lambda\", // The name of your S3 bucket\n       \"django_settings\": \"your_project.settings\" // The python path to your Django settings.\n    }\n}\n```\n\n_Psst: If you're deploying a Django application with Zappa for the first time, you might want to read Edgar Roman's [Django Zappa Guide](https://edgarroman.github.io/zappa-django-guide/)._\n\nYou can define as many stages as your like - we recommend having _dev_, _staging_, and _production_.\n\nNow, you're ready to deploy!\n\n## Basic Usage\n\n### Initial Deployments\n\nOnce your settings are configured, you can package and deploy your application to a stage called \"production\" with a single command:\n\n    $ zappa deploy production\n    Deploying..\n    Your application is now live at: https://7k6anj0k99.execute-api.us-east-1.amazonaws.com/production\n\nAnd now your app is **live!** How cool is that?!\n\nTo explain what's going on, when you call `deploy`, Zappa will automatically package up your application and local virtual environment into a Lambda-compatible archive, replace any dependencies with versions with wheels compatible with lambda, set up the function handler and necessary WSGI Middleware, upload the archive to S3, create and manage the necessary Amazon IAM policies and roles, register it as a new Lambda function, create a new API Gateway resource, create WSGI-compatible routes for it, link it to the new Lambda function, and finally delete the archive from your S3 bucket. Handy!\n\nBe aware that the default IAM role and policy created for executing Lambda applies a liberal set of permissions.\nThese are most likely not appropriate for production deployment of important applications.  See the section\n[Custom AWS IAM Roles and Policies for Execution](#custom-aws-iam-roles-and-policies-for-execution) for more detail.\n\n### Updates\n\nIf your application has already been deployed and you only need to upload new Python code, but not touch the underlying routes, you can simply:\n\n    $ zappa update production\n    Updating..\n    Your application is now live at: https://7k6anj0k99.execute-api.us-east-1.amazonaws.com/production\n\nThis creates a new archive, uploads it to S3 and updates the Lambda function to use the new code, but doesn't touch the API Gateway routes.\n\n#### Docker Workflows\n\nIn [version 0.53.0](https://github.com/zappa/Zappa/blob/master/CHANGELOG.md), support was added to deploy & update Lambda functions using Docker. \n\nYou can specify an ECR image using the `--docker-image-uri` option to the zappa command on `deploy` and `update`.\nZappa expects that the image is built and pushed to a Amazon ECR repository. \n\nDeploy Example:\n\n    $ zappa deploy --docker-image-uri {AWS ACCOUNT ID}.dkr.ecr.{REGION}.amazonaws.com/{REPOSITORY NAME}:latest\n\nUpdate Example:\n\n    $ zappa update --docker-image-uri {AWS ACCOUNT ID}.dkr.ecr.{REGION}.amazonaws.com/{REPOSITORY NAME}:latest\n\nRefer to [the blog post](https://ianwhitestone.work/zappa-serverless-docker/) for more details about how to leverage this functionality, and when you may want to.\n\nIf you are using a custom Docker image for your Lambda runtime (e.g. if you want to use a newer version of Python that is not yet supported by Lambda out of the box) and you would like to bypass the Python version check, you can set an environment variable to do so:\n\n    $ export ZAPPA_RUNNING_IN_DOCKER=True\n\nYou can also add this to your Dockerfile like this:\n\n```\nENV ZAPPA_RUNNING_IN_DOCKER=True\n```\n\n### Rollback\n\nYou can also `rollback` the deployed code to a previous version by supplying the number of revisions to return to. For instance, to rollback to the version deployed 3 versions ago:\n\n    $ zappa rollback production -n 3\n\n### Scheduling\n\nZappa can be used to easily schedule functions to occur on regular intervals. This provides a much nicer, maintenance-free alternative to Celery!\nThese functions will be packaged and deployed along with your `app_function` and called from the handler automatically.\nJust list your functions and the expression to schedule them using [cron or rate syntax](http://docs.aws.amazon.com/lambda/latest/dg/tutorial-scheduled-events-schedule-expressions.html) in your *zappa_settings.json* file:\n\n```javascript\n{\n    \"production\": {\n       ...\n       \"events\": [{\n           \"function\": \"your_module.your_function\", // The function to execute\n           \"expression\": \"rate(1 minute)\" // When to execute it (in cron or rate format)\n       }],\n       ...\n    }\n}\n```\n\nAnd then:\n\n    $ zappa schedule production\n\nAnd now your function will execute every minute!\n\nIf you want to cancel these, you can simply use the `unschedule` command:\n\n    $ zappa unschedule production\n\nAnd now your scheduled event rules are deleted.\n\nSee the [example](example/) for more details.\n\n#### Advanced Scheduling\n\n##### Multiple Expressions\n\nSometimes a function needs multiple expressions to describe its schedule. To set multiple expressions, simply list your functions, and the list of expressions to schedule them using [cron or rate syntax](http://docs.aws.amazon.com/lambda/latest/dg/tutorial-scheduled-events-schedule-expressions.html) in your *zappa_settings.json* file:\n\n```javascript\n{\n    \"production\": {\n       ...\n       \"events\": [{\n           \"function\": \"your_module.your_function\", // The function to execute\n           \"expressions\": [\"cron(0 20-23 ? * SUN-THU *)\", \"cron(0 0-8 ? * MON-FRI *)\"] // When to execute it (in cron or rate format)\n       }],\n       ...\n    }\n}\n```\n\nThis can be used to deal with issues arising from the UTC timezone crossing midnight during business hours in your local timezone.\n\nIt should be noted that overlapping expressions will not throw a warning, and should be checked for, to prevent duplicate triggering of functions.\n\n##### Disabled Event\n\nSometimes an event should be scheduled, yet disabled.\nFor example, perhaps an event should only run in your production environment, but not sandbox.\nYou may still want to deploy it to sandbox to ensure there is no issue with your expression(s) before deploying to production.\n\nIn this case, you can disable it from running by setting `enabled` to `false` in the event definition:\n\n```javascript\n{\n    \"sandbox\": {\n       ...\n       \"events\": [{\n           \"function\": \"your_module.your_function\", // The function to execute\n           \"expression\": \"rate(1 minute)\", // When to execute it (in cron or rate format)\n           \"enabled\": false\n       }],\n       ...\n    }\n}\n```\n\n### Undeploy\n\nIf you need to remove the API Gateway and Lambda function that you have previously published, you can simply:\n\n    $ zappa undeploy production\n\nYou will be asked for confirmation before it executes.\n\nIf you enabled CloudWatch Logs for your API Gateway service and you don't\nwant to keep those logs, you can specify the `--remove-logs` argument to purge the logs for your API Gateway and your Lambda function:\n\n    $ zappa undeploy production --remove-logs\n\n### Package\n\nIf you want to build your application package without actually uploading and registering it as a Lambda function, you can use the `package` command:\n\n    $ zappa package production\n\nIf you have a `zip` callback in your `callbacks` setting, this will also be invoked.\n\n```javascript\n{\n    \"production\": { // The name of your stage\n        \"callbacks\": {\n            \"zip\": \"my_app.zip_callback\"// After creating the package\n        }\n    }\n}\n```\n\nYou can also specify the output filename of the package with `-o`:\n\n    $ zappa package production -o my_awesome_package.zip\n\n#### How Zappa Makes Packages\n\nZappa will automatically package your active virtual environment into a package which runs smoothly on AWS Lambda.\n\nDuring this process, it will replace any local dependencies with AWS Lambda compatible versions. Dependencies are included in this order:\n\n  * Lambda-compatible `manylinux` wheels from a local cache\n  * Lambda-compatible `manylinux` wheels from PyPI\n  * Packages from the active virtual environment\n  * Packages from the local project directory\n\nIt also skips certain unnecessary files, and ignores any .py files if .pyc files are available.\n\nIn addition, Zappa will also automatically set the correct execution permissions, configure package settings, and create a unique, auditable package manifest file.\n\nTo further reduce the final package file size, you can:\n\n* Set `slim_handler` to `True` to upload a small handler to Lambda and the rest of the package to S3. For more details, see the [merged pull request](https://github.com/Miserlou/Zappa/pull/548) and the [discussion in the original issue](https://github.com/Miserlou/Zappa/issues/510). See also: [Large Projects](#large-projects).\n* Use the `exclude` or `exclude_glob` setting and provide a list of patterns to exclude from the archive. By default, Zappa will exclude Boto, because [it's already available in the Lambda execution environment](http://docs.aws.amazon.com/lambda/latest/dg/current-supported-versions.html).\n\n### Template\n\nSimilarly to `package`, if you only want the API Gateway CloudFormation template, use the `template` command:\n\n    $ zappa template production --l your-lambda-arn -r your-role-arn\n\nNote that you must supply your own Lambda ARN and Role ARNs in this case, as they may not have been created for you.\n\nYou can get the JSON output directly with `--json`, and specify the output file with `--output`.\n\n### Status\n\nIf you need to see the status of your deployment and event schedules, simply use the `status` command.\n\n    $ zappa status production\n\n### Tailing Logs\n\nYou can watch the logs of a deployment by calling the `tail` management command.\n\n    $ zappa tail production\n\nBy default, this will show all log items. In addition to HTTP and other events, anything `print`ed to `stdout` or `stderr` will be shown in the logs.\n\nYou can use the argument `--http` to filter for HTTP requests, which will be in the Apache Common Log Format.\n\n    $ zappa tail production --http\n\nSimilarly, you can do the inverse and only show non-HTTP events and log messages:\n\n    $ zappa tail production --non-http\n\nIf you don't like the default log colors, you can turn them off with `--no-color`.\n\nYou can also limit the length of the tail with `--since`, which accepts a simple duration string:\n\n    $ zappa tail production --since 4h # 4 hours\n    $ zappa tail production --since 1m # 1 minute\n    $ zappa tail production --since 1mm # 1 month\n\nYou can filter out the contents of the logs with `--filter`, like so:\n\n    $ zappa tail production --http --filter \"POST\" # Only show POST HTTP requests\n\nNote that this uses the [CloudWatch Logs filter syntax](http://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html).\n\nTo tail logs without following (to exit immediately after displaying the end of the requested logs), pass `--disable-keep-open`:\n\n    $ zappa tail production --since 1h --disable-keep-open\n\n\n### Remote Function Invocation\n\nYou can execute any function in your application directly at any time by using the `invoke` command.\n\nFor instance, suppose you have a basic application in a file called \"my_app.py\", and you want to invoke a function in it called \"my_function\". Once your application is deployed, you can invoke that function at any time by calling:\n\n    $ zappa invoke production my_app.my_function\n\nAny remote print statements made and the value the function returned will then be printed to your local console. **Nifty!**\n\nYou can also invoke interpretable Python 3.8/3.9/3.10/3.11/3.12 strings directly by using `--raw`, like so:\n\n    $ zappa invoke production \"print(1 + 2 + 3)\" --raw\n\nFor instance, it can come in handy if you want to create your first `superuser` on a RDS database running in a VPC (like Serverless Aurora):\n\n    $ zappa invoke staging \"from django.contrib.auth import get_user_model; User = get_user_model(); User.objects.create_superuser('username', 'email', 'password')\" --raw\n\n### Django Management Commands\n\nAs a convenience, Zappa can also invoke remote Django 'manage.py' commands with the `manage` command. For instance, to perform the basic Django status check:\n\n    $ zappa manage production showmigrations admin\n\nObviously, this only works for Django projects which have their settings properly defined.\n\nFor commands which have their own arguments, you can also pass the command in as a string, like so:\n\n    $ zappa manage production \"shell --version\"\n\nCommands which require direct user input, such as `createsuperuser`, should be [replaced by commands](http://stackoverflow.com/a/26091252) which use `zappa invoke <env> --raw`.\n\nFor more Django integration, take a look at the [zappa-django-utils](https://github.com/Miserlou/zappa-django-utils) project.\n\n### SSL Certification\n\nZappa can be deployed to custom domain names and subdomains with custom SSL certificates, Let's Encrypt certificates, and [AWS Certificate Manager](https://aws.amazon.com/certificate-manager/) (ACM) certificates.\n\nCurrently, the easiest of these to use are the AWS Certificate Manager certificates, as they are free, self-renewing, and require the least amount of work.\n\nOnce configured as described below, all of these methods use the same command:\n\n    $ zappa certify\n\nWhen deploying from a CI/CD system, you can use:\n\n    $ zappa certify --yes\n\nto skip the confirmation prompt.\n\n#### Deploying to a Domain With AWS Certificate Manager\n\nAmazon provides their own free alternative to Let's Encrypt called [AWS Certificate Manager](https://aws.amazon.com/certificate-manager/) (ACM). To use this service with Zappa:\n\n1. Verify your domain in the AWS Certificate Manager console.\n2. In the console, select the N. Virginia (us-east-1) region and request a certificate for your domain or subdomain (`sub.yourdomain.tld`), or request a wildcard domain (`*.yourdomain.tld`).\n3. Copy the entire ARN of that certificate and place it in the Zappa setting `certificate_arn`.\n4. Set your desired domain in the `domain` setting.\n5. Call `$ zappa certify` to create and associate the API Gateway distribution using that certificate.\n\n#### Deploying to a Domain With a Let's Encrypt Certificate (DNS Auth)\n\nIf you want to use Zappa on a domain with a free Let's Encrypt certificate using automatic Route 53 based DNS Authentication, you can follow [this handy guide](https://github.com/zappa/Zappa/blob/master/docs/domain_with_free_ssl_dns.md).\n\n#### Deploying to a Domain With a Let's Encrypt Certificate (HTTP Auth)\n\nIf you want to use Zappa on a domain with a free Let's Encrypt certificate using HTTP Authentication, you can follow [this guide](https://github.com/zappa/Zappa/blob/master/docs/domain_with_free_ssl_http.md).\n\nHowever, it's now far easier to use Route 53-based DNS authentication, which will allow you to use a Let's Encrypt certificate with a single `$ zappa certify` command.\n\n#### Deploying to a Domain With Your Own SSL Certs\n\n1. The first step is to create a custom domain and obtain your SSL cert / key / bundle.\n2. Ensure you have set the `domain` setting within your Zappa settings JSON - this will avoid problems with the Base Path mapping between the Custom Domain and the API invoke URL, which gets the Stage Name appended in the URI\n3. Add the paths to your SSL cert / key / bundle to the `certificate`, `certificate_key`, and `certificate_chain` settings, respectively, in your Zappa settings JSON\n4. Set `route53_enabled` to `false` if you plan on using your own DNS provider, and not an AWS Route53 Hosted zone.\n5. Deploy or update your app using Zappa\n6. Run `$ zappa certify` to upload your certificates and register the custom domain name with your API gateway.\n\n## Executing in Response to AWS Events\n\nSimilarly, you can have your functions execute in response to events that happen in the AWS ecosystem, such as S3 uploads, DynamoDB entries, Kinesis streams, SNS messages, and SQS queues.\n\nIn your *zappa_settings.json* file, define your [event sources](http://docs.aws.amazon.com/lambda/latest/dg/invoking-lambda-function.html) and the function you wish to execute. For instance, this will execute `your_module.process_upload_function` in response to new objects in your `my-bucket` S3 bucket. Note that `process_upload_function` must accept `event` and `context` parameters.\n\n```javascript\n{\n    \"production\": {\n       ...\n       \"events\": [{\n            \"function\": \"your_module.process_upload_function\",\n            \"event_source\": {\n                  \"arn\":  \"arn:aws:s3:::my-bucket\",\n                  \"events\": [\n                    \"s3:ObjectCreated:*\" // Supported event types: http://docs.aws.amazon.com/AmazonS3/latest/dev/NotificationHowTo.html#supported-notification-event-types\n                  ],\n                  \"key_filters\": [{ // optional\n                    \"type\": \"suffix\",\n                    \"value\": \"yourfile.json\"\n                  },\n                  {\n                    \"type\": \"prefix\",\n                    \"value\": \"prefix/for/your/object\"\n                  }]\n               }\n            }],\n       ...\n    }\n}\n```\n\nAnd then:\n\n    $ zappa schedule production\n\nAnd now your function will execute every time a new upload appears in your bucket!\n\nTo access the key's information in your application context, you'll want `process_upload_function` to look something like this:\n\n```python\nimport boto3\ns3_client = boto3.client('s3')\n\ndef process_upload_function(event, context):\n    \"\"\"\n    Process a file upload.\n    \"\"\"\n\n    # Get the uploaded file's information\n    bucket = event['Records'][0]['s3']['bucket']['name'] # Will be `my-bucket`\n    key = event['Records'][0]['s3']['object']['key'] # Will be the file path of whatever file was uploaded.\n\n    # Get the bytes from S3\n    s3_client.download_file(bucket, key, '/tmp/' + key) # Download this file to writable tmp space.\n    file_bytes = open('/tmp/' + key).read()\n```\n\nSimilarly, for a [Simple Notification Service](https://aws.amazon.com/sns/) event:\n\n```javascript\n        \"events\": [\n            {\n                \"function\": \"your_module.your_function\",\n                \"event_source\": {\n                    \"arn\":  \"arn:aws:sns:::your-event-topic-arn\",\n                    \"events\": [\n                        \"sns:Publish\"\n                    ]\n                }\n            }\n        ]\n```\n\nOptionally you can add [SNS message filters](http://docs.aws.amazon.com/sns/latest/dg/message-filtering.html):\n\n```javascript\n        \"events\": [\n            {\n                \"function\": \"your_module.your_function\",\n                \"event_source\": {\n                    \"arn\":  \"arn:aws:sns:::your-event-topic-arn\",\n                    \"filters\": {\n                        \"interests\": [\"python\", \"aws\", \"zappa\"],\n                        \"version\": [\"1.0\"]\n                    },\n                    ...\n                }\n            }\n        ]\n```\n\n[DynamoDB](http://docs.aws.amazon.com/lambda/latest/dg/with-ddb.html) and [Kinesis](http://docs.aws.amazon.com/lambda/latest/dg/with-kinesis.html) are slightly different as it is not event based but pulling from a stream:\n\n```javascript\n       \"events\": [\n           {\n               \"function\": \"replication.replicate_records\",\n               \"event_source\": {\n                    \"arn\":  \"arn:aws:dynamodb:us-east-1:1234554:table/YourTable/stream/2016-05-11T00:00:00.000\",\n                    \"starting_position\": \"TRIM_HORIZON\", // Supported values: TRIM_HORIZON, LATEST\n                    \"batch_size\": 50, // Max: 1000\n                    \"enabled\": true // Default is false\n               }\n           }\n       ]\n```\n\n[SQS](https://docs.aws.amazon.com/lambda/latest/dg/with-sqs.html) is also pulling messages from a stream.  At this time, [only \"Standard\" queues can trigger lambda events, not \"FIFO\" queues](https://docs.aws.amazon.com/lambda/latest/dg/with-sqs.html).  Read the AWS Documentation carefully since Lambda calls the SQS DeleteMessage API on your behalf once your function completes successfully.\n\n```javascript\n       \"events\": [\n           {\n               \"function\": \"your_module.process_messages\",\n               \"event_source\": {\n                    \"arn\":  \"arn:aws:sqs:us-east-1:12341234:your-queue-name-arn\",\n                    \"batch_size\": 10, // Max: 10. Use 1 to trigger immediate processing\n                    \"enabled\": true // Default is false\n               }\n           }\n       ]\n```\n\nFor configuring Lex Bot's intent triggered events:\n```javascript\n    \"bot_events\": [\n        {\n            \"function\": \"lexbot.handlers.book_appointment.handler\",\n            \"event_source\": {\n                \"arn\": \"arn:aws:lex:us-east-1:01234123123:intent:TestLexEventNames:$LATEST\", // optional. In future it will be used to configure the intent\n                \"intent\":\"intentName\", // name of the bot event configured\n                \"invocation_source\":\"DialogCodeHook\", // either FulfillmentCodeHook or DialogCodeHook\n            }\n        }\n    ]\n\n```\n\nEvents can also take keyword arguments:\n```javascript\n       \"events\": [\n            {\n                \"function\": \"your_module.your_recurring_function\", // The function to execute\n                \"kwargs\": {\"key\": \"val\", \"key2\": \"val2\"},  // Keyword arguments to pass. These are available in the event\n                \"expression\": \"rate(1 minute)\" // When to execute it (in cron or rate format)\n            }\n       ]\n```\n\nTo get the keyword arguments you will need to look inside the event dictionary:\n\n```python\ndef your_recurring_function(event, context):\n    my_kwargs = event.get(\"kwargs\")  # dict of kwargs given in zappa_settings file\n\n```\n\n\nYou can find more [example event sources here](http://docs.aws.amazon.com/lambda/latest/dg/eventsources.html).\n\n## Asynchronous Task Execution\n\nZappa also now offers the ability to seamlessly execute functions asynchronously in a completely separate AWS Lambda instance!\n\nFor example, if you have a Flask API for ordering a pie, you can call your `bake` function seamlessly in a completely separate Lambda instance by using the `zappa.asynchronous.task` decorator like so:\n\n```python\nfrom flask import Flask\nfrom zappa.asynchronous import task\napp = Flask(__name__)\n\n@task\ndef make_pie():\n    \"\"\" This takes a long time! \"\"\"\n    ingredients = get_ingredients()\n    pie = bake(ingredients)\n    deliver(pie)\n\n@app.route('/api/order/pie')\ndef order_pie():\n    \"\"\" This returns immediately! \"\"\"\n    make_pie()\n    return \"Your pie is being made!\"\n\n```\n\nAnd that's it! Your API response will return immediately, while the `make_pie` function executes in a completely different Lambda instance.\n\nWhen calls to @task decorated functions or the zappa.asynchronous.run command occur outside of Lambda, such as your local dev environment,\nthe functions will execute immediately and locally. The zappa asynchronous functionality only works\nwhen in the Lambda environment or when specifying [Remote Invocations](https://github.com/zappa/zappa#remote-invocations).\n\n### Catching Exceptions\nPutting a try..except block on an asynchronous task like this:\n\n```python\n@task\ndef make_pie():\n    try:\n        ingredients = get_ingredients()\n        pie = bake(ingredients)\n        deliver(pie)\n    except Fault as error:\n        \"\"\"send an email\"\"\"\n    ...\n    return Response('Web services down', status=503)\n```\n\nwill cause an email to be sent twice for the same error. See [asynchronous retries at AWS](https://docs.aws.amazon.com/lambda/latest/dg/retries-on-errors.html). To work around this side-effect, and have the fault handler execute only once, change the return value to:\n\n```python\n@task\ndef make_pie():\n    try:\n        \"\"\"code block\"\"\"\n    except Fault as error:\n        \"\"\"send an email\"\"\"\n    ...\n    return {} #or return True\n```\n\n### Task Sources\n\nBy default, this feature uses direct AWS Lambda invocation. You can instead use AWS Simple Notification Service as the task event source by using the `task_sns` decorator, like so:\n\n```python\nfrom zappa.asynchronous import task_sns\n@task_sns\n```\n\nUsing SNS also requires setting the following settings in your `zappa_settings`:\n\n```javascript\n{\n  \"dev\": {\n    ..\n      \"async_source\": \"sns\", // Source of async tasks. Defaults to \"lambda\"\n      \"async_resources\": true, // Create the SNS topic to use. Defaults to true.\n    ..\n    }\n}\n```\n\nThis will automatically create and subscribe to the SNS topic the code will use when you call the `zappa schedule` command.\n\nUsing SNS will also return a message ID in case you need to track your invocations.\n\n### Direct Invocation\n\nYou can also use this functionality without a decorator by passing your function to `zappa.asynchronous.run`, like so:\n\n```python\nfrom zappa.asynchronous import run\n\nrun(your_function, args, kwargs) # Using Lambda\nrun(your_function, args, kwargs, service='sns') # Using SNS\n```\n\n### Remote Invocations\n\nBy default, Zappa will use lambda's current function name and current AWS region. If you wish to invoke a lambda with\n  a different function name/region or invoke your lambda from outside of lambda, you must specify the\n  `remote_aws_lambda_function_name` and `remote_aws_region` arguments so that the application knows which function and\n  region to use. For example, if some part of our pizza making application had to live on an EC2 instance, but we\n  wished to call the make_pie() function on its own Lambda instance, we would do it as follows:\n\n ```python\n@task(remote_aws_lambda_function_name='pizza-pie-prod', remote_aws_region='us-east-1')\ndef make_pie():\n    \"\"\" This takes a long time! \"\"\"\n    ingredients = get_ingredients()\n    pie = bake(ingredients)\n    deliver(pie)\n\n```\nIf those task() parameters were not used, then EC2 would execute the function locally. These same\n `remote_aws_lambda_function_name` and `remote_aws_region` arguments can be used on the zappa.asynchronous.run() function as well.\n\n### Restrictions\n\nThe following restrictions to this feature apply:\n\n* Functions must have a clean import path -- i.e. no closures, lambdas, or methods.\n* `args` and `kwargs` must be JSON-serializable.\n* The JSON-serialized arguments must be within the size limits for Lambda (256K) or SNS (256K) events.\n\nAll of this code is still backwards-compatible with non-Lambda environments - it simply executes in a blocking fashion and returns the result.\n\n### Running Tasks in a VPC\n\nIf you're running Zappa in a Virtual Private Cloud (VPC), you'll need to configure your subnets to allow your lambda to communicate with services inside your VPC as well as the public Internet. A minimal setup requires two subnets.\n\nIn __subnet-a__:\n* Create a NAT\n* Create an Internet gateway\n* In the route table, create a route pointing the Internet gateway to 0.0.0.0/0.\n\nIn __subnet-b__:\n* Place your lambda function\n* In the route table, create a route pointing the NAT that belongs to __subnet-a__ to 0.0.0.0/0.\n\nYou can place your lambda in multiple subnets that are configured the same way as __subnet-b__ for high availability.\n\nSome helpful resources are [this tutorial](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Tutorials.WebServerDB.CreateVPC.html), [this other tutorial](https://gist.github.com/reggi/dc5f2620b7b4f515e68e46255ac042a7) and [this AWS doc page](http://docs.aws.amazon.com/lambda/latest/dg/vpc.html#vpc-internet).\n\n### Responses\n\nIt is possible to capture the responses of Asynchronous tasks.\n\nZappa uses DynamoDB as the backend for these.\n\nTo capture responses, you must configure a `async_response_table` in `zappa_settings`. This is the DynamoDB table name. Then, when decorating with `@task`, pass `capture_response=True`.\n\nAsync responses are assigned a `response_id`. This is returned as a property of the `LambdaAsyncResponse` (or `SnsAsyncResponse`) object that is returned by the `@task` decorator.\n\nExample:\n\n```python\nfrom zappa.asynchronous import task, get_async_response\nfrom flask import Flask, make_response, abort, url_for, redirect, request, jsonify\nfrom time import sleep\n\napp = Flask(__name__)\n\n@app.route('/payload')\ndef payload():\n    delay = request.args.get('delay', 60)\n    x = longrunner(delay)\n    return redirect(url_for('response', response_id=x.response_id))\n\n@app.route('/async-response/<response_id>')\ndef response(response_id):\n    response = get_async_response(response_id)\n    if response is None:\n        abort(404)\n\n    if response['status'] == 'complete':\n        return jsonify(response['response'])\n\n    sleep(5)\n\n    return \"Not yet ready. Redirecting.\", 302, {\n        'Content-Type': 'text/plain; charset=utf-8',\n        'Location': url_for('response', response_id=response_id, backoff=5),\n        'X-redirect-reason': \"Not yet ready.\",\n    }\n\n@task(capture_response=True)\ndef longrunner(delay):\n    sleep(float(delay))\n    return {'MESSAGE': \"It took {} seconds to generate this.\".format(delay)}\n\n```\n\n## Advanced Settings\n\nThere are other settings that you can define in your local settings\nto change Zappa's behavior. Use these at your own risk!\n\n```javascript\n {\n    \"dev\": {\n        \"additional_text_mimetypes\": [], // allows you to provide additional mimetypes to be handled as text when binary_support is true.\n        \"alb_enabled\": false, // enable provisioning of application load balancing resources. If set to true, you _must_ fill out the alb_vpc_config option as well.\n        \"alb_vpc_config\": {\n            \"CertificateArn\": \"your_acm_certificate_arn\", // ACM certificate ARN for ALB\n            \"SubnetIds\": [], // list of subnets for ALB\n            \"SecurityGroupIds\": [] // list of security groups for ALB\n        },\n        \"api_key_required\": false, // enable securing API Gateway endpoints with x-api-key header (default False)\n        \"api_key\": \"your_api_key_id\", // optional, use an existing API key. The option \"api_key_required\" must be true to apply\n        \"apigateway_enabled\": true, // Set to false if you don't want to create an API Gateway resource. Default true.\n        \"apigateway_description\": \"My funky application!\", // Define a custom description for the API Gateway console. Default None.\n        \"assume_policy\": \"my_assume_policy.json\", // optional, IAM assume policy JSON file\n        \"attach_policy\": \"my_attach_policy.json\", // optional, IAM attach policy JSON file\n        \"apigateway_policy\": \"my_apigateway_policy.json\", // optional, API Gateway resource policy JSON file\n        \"async_source\": \"sns\", // Source of async tasks. Defaults to \"lambda\"\n        \"async_resources\": true, // Create the SNS topic and DynamoDB table to use. Defaults to true.\n        \"async_response_table\": \"your_dynamodb_table_name\",  // the DynamoDB table name to use for captured async responses; defaults to None (can't capture)\n        \"async_response_table_read_capacity\": 1,  // DynamoDB table read capacity; defaults to 1\n        \"async_response_table_write_capacity\": 1,  // DynamoDB table write capacity; defaults to 1\n        \"aws_endpoint_urls\": { \"aws_service_name\": \"endpoint_url\" }, // a dictionary of endpoint_urls that emulate the appropriate service.  Usually used for testing, for instance with `localstack`.\n        \"aws_environment_variables\" : {\"your_key\": \"your_value\"}, // A dictionary of environment variables that will be available to your deployed app via AWS Lambdas native environment variables. See also \"environment_variables\" and \"remote_env\" . Default {}.\n        \"aws_kms_key_arn\": \"your_aws_kms_key_arn\", // Your AWS KMS Key ARN\n        \"aws_region\": \"aws-region-name\", // optional, uses region set in profile or environment variables if not set here,\n        \"binary_support\": true, // Enable automatic MIME-type based response encoding through API Gateway. Default true.\n        \"callbacks\": { // Call custom functions during the local Zappa deployment/update process\n            \"settings\": \"my_app.settings_callback\", // After loading the settings\n            \"zip\": \"my_app.zip_callback\", // After creating the package\n            \"post\": \"my_app.post_callback\", // After command has executed\n        },\n        \"cache_cluster_enabled\": false, // Use APIGW cache cluster (default False)\n        \"cache_cluster_size\": 0.5, // APIGW Cache Cluster size (default 0.5)\n        \"cache_cluster_ttl\": 300, // APIGW Cache Cluster time-to-live (default 300)\n        \"cache_cluster_encrypted\": false, // Whether or not APIGW Cache Cluster encrypts data (default False)\n        \"certificate\": \"my_cert.crt\", // SSL certificate file location. Used to manually certify a custom domain\n        \"certificate_key\": \"my_key.key\", // SSL key file location. Used to manually certify a custom domain\n        \"certificate_chain\": \"my_cert_chain.pem\", // SSL certificate chain file location. Used to manually certify a custom domain\n        \"certificate_arn\": \"arn:aws:acm:us-east-1:1234512345:certificate/aaaa-bbb-cccc-dddd\", // ACM certificate ARN (needs to be in us-east-1 region).\n        \"cloudwatch_log_level\": \"OFF\", // Enables/configures a level of logging for the given staging. Available options: \"OFF\", \"INFO\", \"ERROR\", default \"OFF\".\n        \"cloudwatch_data_trace\": false, // Logs all data about received events. Default false.\n        \"cloudwatch_metrics_enabled\": false, // Additional metrics for the API Gateway. Default false.\n        \"cognito\": { // for Cognito event triggers\n            \"user_pool\": \"user-pool-id\", // User pool ID from AWS Cognito\n            \"triggers\": [{\n                \"source\": \"PreSignUp_SignUp\", // triggerSource from http://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools-working-with-aws-lambda-triggers.html#cognito-user-pools-lambda-trigger-syntax-pre-signup\n                \"function\": \"my_app.pre_signup_function\"\n            }]\n        },\n        \"context_header_mappings\": { \"HTTP_header_name\": \"API_Gateway_context_variable\" }, // A dictionary mapping HTTP header names to API Gateway context variables\n        \"cors\": false, // Enable Cross-Origin Resource Sharing. Default false. If true, simulates the \"Enable CORS\" button on the API Gateway console. Can also be a dictionary specifying lists of \"allowed_headers\", \"allowed_methods\", and string of \"allowed_origin\"\n        \"dead_letter_arn\": \"arn:aws:<sns/sqs>:::my-topic/queue\", // Optional Dead Letter configuration for when Lambda async invoke fails thrice\n        \"debug\": true, // Print Zappa configuration errors tracebacks in the 500. Default true.\n        \"delete_local_zip\": true, // Delete the local zip archive after code updates. Default true.\n        \"delete_s3_zip\": true, // Delete the s3 zip archive. Default true.\n        \"django_settings\": \"your_project.production_settings\", // The modular path to your Django project's settings. For Django projects only.\n        \"domain\": \"yourapp.yourdomain.com\", // Required if you're using a domain\n        \"base_path\": \"your-base-path\", // Optional base path for API gateway custom domain base path mapping. Default None. Not supported for use with Application Load Balancer event sources.\n        \"environment_variables\": {\"your_key\": \"your_value\"}, // A dictionary of environment variables that will be available to your deployed app. See also \"remote_env\" and \"aws_environment_variables\". Default {}.\n        \"events\": [\n            {   // Recurring events\n                \"function\": \"your_module.your_recurring_function\", // The function to execute (Pattern: [._A-Za-z0-9]+).\n                \"expression\": \"rate(1 minute)\" // When to execute it (in cron or rate format)\n            },\n            {   // AWS Reactive events\n                \"function\": \"your_module.your_reactive_function\", // The function to execute (Pattern: [._A-Za-z0-9]+).\n                \"event_source\": {\n                    \"arn\":  \"arn:aws:s3:::my-bucket\", // The ARN of this event source\n                    \"events\": [\n                        \"s3:ObjectCreated:*\" // The specific event to execute in response to.\n                    ]\n                }\n            }\n        ],\n        \"endpoint_configuration\": [\"EDGE\", \"REGIONAL\", \"PRIVATE\"],  // Specify APIGateway endpoint None (default) or list `EDGE`, `REGION`, `PRIVATE`\n        \"exception_handler\": \"your_module.report_exception\", // function that will be invoked in case Zappa sees an unhandled exception raised from your code\n        \"exclude\": [\"file.gz\", \"tests\"], // A list of filename patterns to exclude from the archive (see `fnmatch` module for patterns).\n        \"exclude_glob\": [\"*.gz\", \"*.rar\", \"tests/**/*\"], // A list of glob patterns to exclude from the archive. To exclude boto3 and botocore (available in an older version on Lambda), add \"boto3*\" and \"botocore*\".\n        \"extends\": \"stage_name\", // Duplicate and extend another stage's settings. For example, `dev-asia` could extend from `dev-common` with a different `s3_bucket` value.\n        \"extra_permissions\": [{ // Attach any extra permissions to this policy. Default None\n            \"Effect\": \"Allow\",\n            \"Action\": [\"rekognition:*\"], // AWS Service ARN\n            \"Resource\": \"*\"\n        }],\n        \"iam_authorization\": false, // optional, use IAM to require request signing. Default false. Note that enabling this will override the authorizer configuration.\n        \"include\": [\"your_special_library_to_load_at_handler_init\"], // load special libraries into PYTHONPATH at handler init that certain modules cannot find on path\n        \"authorizer\": {\n            \"function\": \"your_module.your_auth_function\", // Local function to run for token validation. For more information about the function see below.\n            \"arn\": \"arn:aws:lambda:<region>:<account_id>:function:<function_name>\", // Existing Lambda function to run for token validation.\n            \"result_ttl\": 300, // Optional. Default 300. The time-to-live (TTL) period, in seconds, that specifies how long API Gateway caches authorizer results. Currently, the maximum TTL value is 3600 seconds.\n            \"token_header\": \"Authorization\", // Optional. Default 'Authorization'. The name of a custom authorization header containing the token that clients submit as part of their requests.\n            \"validation_expression\": \"^Bearer \\\\w+$\", // Optional. A validation expression for the incoming token, specify a regular expression.\n        },\n        \"keep_warm\": true, // Create CloudWatch events to keep the server warm. Default true. To remove, set to false and then `unschedule`.\n        \"keep_warm_expression\": \"rate(4 minutes)\", // How often to execute the keep-warm, in cron and rate format. Default 4 minutes.\n        \"lambda_description\": \"Your Description\", // However you want to describe your project for the AWS console. Default \"Zappa Deployment\".\n        \"lambda_handler\": \"your_custom_handler\", // The name of Lambda handler. Default: handler.lambda_handler\n        \"layers\": [\"arn:aws:lambda:<region>:<account_id>:layer:<layer_name>:<layer_version>\"], // optional lambda layers\n        \"lambda_concurrency\": 10, // Sets the maximum number of simultaneous executions for a function, and reserves capacity for that concurrency level. Default is None.\n        \"lets_encrypt_key\": \"s3://your-bucket/account.key\", // Let's Encrypt account key path. Can either be an S3 path or a local file path.\n        \"log_level\": \"DEBUG\", // Set the Zappa log level. Can be one of CRITICAL, ERROR, WARNING, INFO and DEBUG. Default: DEBUG\n        \"manage_roles\": true, // Have Zappa automatically create and define IAM execution roles and policies. Default true. If false, you must define your own IAM Role and role_name setting.\n        \"memory_size\": 512, // Lambda function memory in MB. Default 512.\n        \"ephemeral_storage\": { \"Size\": 512 }, // Lambda function ephemeral_storage size in MB, Default 512, Max 10240\n        \"num_retained_versions\":null, // Indicates the number of old versions to retain for the lambda. If absent, keeps all the versions of the function.\n        \"payload_compression\": true, // Whether or not to enable API gateway payload compression (default: true)\n        \"payload_minimum_compression_size\": 0, // The threshold size (in bytes) below which payload compression will not be applied (default: 0)\n        \"prebuild_script\": \"your_module.your_function\", // Function to execute before uploading code\n        \"profile_name\": \"your-profile-name\", // AWS profile credentials to use. Default 'default'. Removing this setting will use the AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY environment variables instead.\n        \"project_name\": \"MyProject\", // The name of the project as it appears on AWS. Defaults to a slugified `pwd`.\n        \"remote_env\": \"s3://my-project-config-files/filename.json\", // optional file in s3 bucket containing a flat json object which will be used to set custom environment variables.\n        \"role_name\": \"MyLambdaRole\", // Name of Zappa execution role. Default <project_name>-<env>-ZappaExecutionRole. To use a different, pre-existing policy, you must also set manage_roles to false.\n        \"role_arn\": \"arn:aws:iam::12345:role/app-ZappaLambdaExecutionRole\", // ARN of Zappa execution role. Default to None. To use a different, pre-existing policy, you must also set manage_roles to false. This overrides role_name. Use with temporary credentials via GetFederationToken.\n        \"route53_enabled\": true, // Have Zappa update your Route53 Hosted Zones when certifying with a custom domain. Default true.\n        \"runtime\": \"python3.12\", // Python runtime to use on Lambda. Can be one of: \"python3.8\", \"python3.9\", \"python3.10\", \"python3.11\", or \"python3.12\". Defaults to whatever the current Python being used is.\n        \"s3_bucket\": \"dev-bucket\", // Zappa zip bucket,\n        \"slim_handler\": false, // Useful if project >50M. Set true to just upload a small handler to Lambda and load actual project from S3 at runtime. Default false.\n        \"settings_file\": \"~/Projects/MyApp/settings/dev_settings.py\", // Server side settings file location,\n        \"tags\": { // Attach additional tags to AWS Resources\n            \"Key\": \"Value\",  // Example Key and value\n            \"Key2\": \"Value2\",\n            },\n        \"timeout_seconds\": 30, // Maximum lifespan for the Lambda function (default 30, max 900.)\n        \"touch\": true, // GET the production URL upon initial deployment (default True)\n        \"touch_path\": \"/\", // The endpoint path to GET when checking the initial deployment (default \"/\")\n        \"use_precompiled_packages\": true, // If possible, use C-extension packages which have been pre-compiled for AWS Lambda. Default true.\n        \"vpc_config\": { // Optional Virtual Private Cloud (VPC) configuration for Lambda function\n            \"SubnetIds\": [ \"subnet-12345678\" ], // Note: not all availability zones support Lambda!\n            \"SecurityGroupIds\": [ \"sg-12345678\" ]\n        },\n        \"xray_tracing\": false // Optional, enable AWS X-Ray tracing on your lambda function.\n    }\n}\n```\n\n#### YAML Settings\n\nIf you prefer YAML over JSON, you can also use a `zappa_settings.yml`, like so:\n\n```yaml\n---\ndev:\n  app_function: your_module.your_app\n  s3_bucket: your-code-bucket\n  events:\n  - function: your_module.your_function\n    event_source:\n      arn: arn:aws:s3:::your-event-bucket\n      events:\n      - s3:ObjectCreated:*\n```\n\nYou can also supply a custom settings file at any time with the `-s` argument, ex:\n\n```\n$ zappa deploy dev -s my-custom-settings.yml\n```\n\nSimilarly, you can supply a `zappa_settings.toml` file:\n\n```toml\n[dev]\n  app_function = \"your_module.your_app\"\n  s3_bucket = \"your-code-bucket\"\n```\n\n## Advanced Usage\n\n### Keeping The Server Warm\n\nZappa will automatically set up a regularly occurring execution of your application in order to keep the Lambda function warm. This can be disabled via the `keep_warm` setting.\n\n#### Serving Static Files / Binary Uploads\n\nZappa is now able to serve and receive binary files, as detected by their MIME-type.\n\nHowever, generally Zappa is designed for running your application code, not for serving static web assets. If you plan on serving custom static assets in your web application (CSS/JavaScript/images/etc.,), you'll likely want to use a combination of AWS S3 and AWS CloudFront.\n\nYour web application framework will likely be able to handle this for you automatically. For Flask, there is [Flask-S3](https://github.com/e-dard/flask-s3), and for Django, there is [Django-Storages](https://django-storages.readthedocs.io/en/latest/).\n\nSimilarly, you may want to design your application so that static binary uploads go [directly to S3](http://docs.aws.amazon.com/AWSJavaScriptSDK/guide/browser-examples.html#Uploading_a_local_file_using_the_File_API), which then triggers an event response defined in your `events` setting! That's thinking serverlessly!\n\n### Enabling CORS\n\nThe simplest way to enable CORS (Cross-Origin Resource Sharing) for your Zappa application is to set `cors` to `true` in your Zappa settings file and update, which is the equivalent of pushing the \"Enable CORS\" button in the AWS API Gateway console. This is disabled by default, but you may wish to enable it for APIs which are accessed from other domains, etc.\n\nYou can also simply handle CORS directly in your application. Your web framework will probably have an extension to do this, such as [django-cors-headers](https://github.com/ottoyiu/django-cors-headers) or [Flask-CORS](https://github.com/corydolphin/flask-cors). Using these will make your code more portable.\n\n### Large Projects\n\nAWS currently limits Lambda zip sizes to 50 megabytes. If your project is larger than that, set `slim_handler: true` in your `zappa_settings.json`. In this case, your fat application package will be replaced with a small handler-only package. The handler file then pulls the rest of the large project down from S3 at run time! The initial load of the large project may add to startup overhead, but the difference should be minimal on a warm lambda function. Note that this will also eat into the storage space of your application function. Note that AWS [supports](https://aws.amazon.com/blogs/compute/using-larger-ephemeral-storage-for-aws-lambda/) custom `/tmp` directory storage size in a range of 512 - 10240 MB. Use `ephemeral_storage` in `zappa_settings.json` to adjust to your needs if your project is larger than default 512 MB.\n\n### Enabling Bash Completion\n\nBash completion can be enabled by adding the following to your .bashrc:\n\n```bash\n  eval \"$(register-python-argcomplete zappa)\"\n```\n\n`register-python-argcomplete` is provided by the argcomplete Python package. If this package was installed in a virtualenv\nthen the command must be run there. Alternatively you can execute:\n\n  activate-global-python-argcomplete --dest=- > file\n\nThe file's contents should then be sourced in e.g. ~/.bashrc.\n\n### Enabling Secure Endpoints on API Gateway\n\n#### API Key\n\nYou can use the `api_key_required` setting to generate an API key to all the routes of your API Gateway. The process is as follows:\n1. Deploy/redeploy (update won't work) and write down the *id* for the key that has been created\n2. Go to AWS console > Amazon API Gateway and\n    * select \"API Keys\" and find the key *value* (for example `key_value`)\n    * select \"Usage Plans\", create a new usage plan and link the API Key and the API that Zappa has created for you\n3. Send a request where you pass the key value as a header called `x-api-key` to access the restricted endpoints (for example with curl: `curl --header \"x-api-key: key_value\"`). Note that without the x-api-key header, you will receive a 403.\n\n#### IAM Policy\n\nYou can enable IAM-based (v4 signing) authorization on an API by setting the `iam_authorization` setting to `true`. Your API will then require signed requests and access can be controlled via [IAM policy](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-iam-policy-examples.html). Unsigned requests will receive a 403 response, as will requesters who are not authorized to access the API. Enabling this will override the Authorizer configuration (see below).\n\n#### API Gateway Lambda Authorizers\nIf you deploy an API endpoint with Zappa, you can take advantage of [API Gateway Lambda Authorizers](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-use-lambda-authorizer.html) to implement a token-based authentication - all you need to do is to provide a function to create the required output, Zappa takes care of the rest. A good start for the function is the [AWS Labs blueprint example](https://github.com/awslabs/aws-apigateway-lambda-authorizer-blueprints/blob/master/blueprints/python/api-gateway-authorizer-python.py).\n\nIf you are wondering for what you would use an Authorizer, here are some potential use cases:\n\n1. Call out to OAuth provider\n2. Decode a JWT token inline\n3. Lookup in a self-managed DB (for example DynamoDB)\n\nZappa can be configured to call a function inside your code to do the authorization, or to call some other existing lambda function (which lets you share the authorizer between multiple lambdas). You control the behavior by specifying either the `arn` or `function_name` values in the `authorizer` settings block.\n\nFor example, to get the Cognito identity, add this to a `zappa_settings.yaml`:\n\n```yaml\n  context_header_mappings:\n    user_id: authorizer.user_id\n```\n\nWhich can now be accessed in Flask like this:\n\n```python\nfrom flask import request\n\n@route('/hello')\ndef hello_world:\n   print(request.headers.get('user_id'))\n```\n\n#### Cognito User Pool Authorizer\n\nYou can also use AWS Cognito User Pool Authorizer by adding:\n\n```javascript\n{\n    \"authorizer\": {\n        \"type\": \"COGNITO_USER_POOLS\",\n        \"provider_arns\": [\n            \"arn:aws:cognito-idp:{region}:{account_id}:userpool/{user_pool_id}\"\n        ]\n    }\n}\n```\n\n#### API Gateway Resource Policy\n\nYou can also use API Gateway Resource Policies. Example of IP Whitelisting:\n\n```javascript\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Principal\": \"*\",\n            \"Action\": \"execute-api:Invoke\",\n            \"Resource\": \"execute-api:/*\",\n            \"Condition\": {\n                \"IpAddress\": {\n                    \"aws:SourceIp\": [\n                        \"1.2.3.4/32\"\n                    ]\n                }\n            }\n        }\n    ]\n}\n```\n\n### Setting Environment Variables\n\n#### Local Environment Variables\n\nIf you want to set local environment variables for a deployment stage, you can simply set them in your `zappa_settings.json`:\n\n```javascript\n{\n    \"dev\": {\n        ...\n        \"environment_variables\": {\n            \"your_key\": \"your_value\"\n        }\n    },\n    ...\n}\n```\n\nYou can then access these inside your application with:\n\n```python\nimport os\nyour_value = os.environ.get('your_key')\n```\n\nIf your project needs to be aware of the type of environment you're deployed to, you'll also be able to get `SERVERTYPE` (AWS Lambda), `FRAMEWORK` (Zappa), `PROJECT` (your project name) and `STAGE` (_dev_, _production_, etc.) variables at any time.\n\n#### Remote AWS Environment Variables\n\nIf you want to use native AWS Lambda environment variables you can use the `aws_environment_variables` configuration setting. These are useful as you can easily change them via the AWS Lambda console or cli at runtime. They are also useful for storing sensitive credentials and to take advantage of KMS encryption of environment variables.\n\n\nDuring development, you can add your Zappa defined variables to your locally running app by, for example, using the below (for Django, to manage.py).\n\n```python\nimport json\nimport os\n\nif os.environ.get('AWS_LAMBDA_FUNCTION_NAME') is None: # Ensures app is NOT running on Lambda\n    json_data = open('zappa_settings.json')\n    env_vars = json.load(json_data)['dev']['environment_variables']\n    os.environ.update(env_vars)\n```\n\n#### Remote Environment Variables\n\nAny environment variables that you have set outside of Zappa (via AWS Lambda console or cli) will remain as they are when running `update`, unless they are also in `aws_environment_variables`, in which case the remote value will be overwritten by the one in the settings file. If you are using KMS-encrypted AWS environment variables, you can set your KMS Key ARN in the `aws_kms_key_arn` setting. Make sure that the values you set are encrypted in such case.\n\n_Note: if you rely on these as well as `environment_variables`, and you have the same key names, then those in `environment_variables` will take precedence as they are injected in the lambda handler._\n\n#### Remote Environment Variables (via an S3 file)\n\n_S3 remote environment variables were added to Zappa before AWS introduced native environment variables for Lambda (via the console and cli). Before going down this route check if above make more sense for your usecase._\n\n\nIf you want to use remote environment variables to configure your application (which is especially useful for things like sensitive credentials), you can create a file and place it in an S3 bucket to which your Zappa application has access. To do this, add the `remote_env` key to zappa_settings pointing to a file containing a flat JSON object, so that each key-value pair on the object will be set as an environment variable and value whenever a new lambda instance spins up.\n\nFor example, to ensure your application has access to the database credentials without storing them in your version control, you can add a file to S3 with the connection string and load it into the lambda environment using the `remote_env` configuration setting.\n\nsuper-secret-config.json (uploaded to my-config-bucket):\n```javascript\n{\n    \"DB_CONNECTION_STRING\": \"super-secret:database\"\n}\n```\n\nzappa_settings.json:\n```javascript\n{\n    \"dev\": {\n        ...\n        \"remote_env\": \"s3://my-config-bucket/super-secret-config.json\",\n    },\n    ...\n}\n```\n\nNow in your application you can use:\n```python\nimport os\ndb_string = os.environ.get('DB_CONNECTION_STRING')\n```\n\n### API Gateway Context Variables\n\nIf you want to map an API Gateway context variable (http://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-mapping-template-reference.html) to an HTTP header you can set up the mapping in `zappa_settings.json`:\n\n```javascript\n{\n    \"dev\": {\n        ...\n        \"context_header_mappings\": {\n            \"HTTP_header_name\": \"API_Gateway_context_variable\"\n        }\n    },\n    ...\n}\n```\n\nFor example, if you want to expose the $context.identity.cognitoIdentityId variable as the HTTP header CognitoIdentityId, and $context.stage as APIStage, you would have:\n\n```javascript\n{\n    \"dev\": {\n        ...\n        \"context_header_mappings\": {\n            \"CognitoIdentityId\": \"identity.cognitoIdentityId\",\n            \"APIStage\": \"stage\"\n        }\n    },\n    ...\n}\n```\n\n### Catching Unhandled Exceptions\n\nBy default, if an _unhandled_ exception happens in your code, Zappa will just print the stacktrace into a CloudWatch log. If you wish to use an external reporting tool to take note of those exceptions, you can use the `exception_handler` configuration option.\n\nzappa_settings.json:\n```javascript\n{\n    \"dev\": {\n        ...\n        \"exception_handler\": \"your_module.unhandled_exceptions\",\n    },\n    ...\n}\n```\n\nThe function has to accept three arguments: exception, event, and context:\n\nyour_module.py\n```python\ndef unhandled_exceptions(e, event, context):\n    send_to_raygun(e, event)  # gather data you need and send\n    return True # Prevent invocation retry\n```\nYou may still need a similar exception handler inside your application, this is just a way to catch exception which happen at the Zappa/WSGI layer (typically event-based invocations, misconfigured settings, bad Lambda packages, and permissions issues).\n\nBy default, AWS Lambda will attempt to retry an event based (non-API Gateway, e.g. CloudWatch) invocation if an exception has been thrown. However, you can prevent this by returning True, as in example above, so Zappa that will not re-raise the uncaught exception, thus preventing AWS Lambda from retrying the current invocation.\n\n### Using Custom AWS IAM Roles and Policies\n\n#### Custom AWS IAM Roles and Policies for Deployment\n\nYou can specify which _local_ profile to use for deploying your Zappa application by defining\nthe `profile_name` setting, which will correspond to a profile in your AWS credentials file.\n\n#### Custom AWS IAM Roles and Policies for Execution\n\nThe default IAM policy created by Zappa for executing the Lambda is very permissive.\nIt grants access to all actions for\nall resources for types CloudWatch, S3, Kinesis, SNS, SQS, DynamoDB, and Route53; lambda:InvokeFunction\nfor all Lambda resources; Put to all X-Ray resources; and all Network Interface operations to all EC2\nresources. While this allows most Lambdas to work correctly with no extra permissions, it is\ngenerally not an acceptable set of permissions for most continuous integration pipelines or\nproduction deployments. Instead, you will probably want to manually manage your IAM policies.\n\nTo manually define the policy of your Lambda execution role, you must set *manage_roles* to false and define\neither the *role_name* or *role_arn* in your Zappa settings file.\n\n```javascript\n{\n    \"dev\": {\n        ...\n        \"manage_roles\": false, // Disable Zappa client managing roles.\n        \"role_name\": \"MyLambdaRole\", // Name of your Zappa execution role. Optional, default: <project_name>-<env>-ZappaExecutionRole.\n        \"role_arn\": \"arn:aws:iam::12345:role/app-ZappaLambdaExecutionRole\", // ARN of your Zappa execution role. Optional.\n        ...\n    },\n    ...\n}\n```\n\nOngoing discussion about the minimum policy requirements necessary for a Zappa deployment [can be found here](https://github.com/Miserlou/Zappa/issues/244).\nA more robust solution to managing these entitlements will likely be implemented soon.\n\nTo add permissions to the default Zappa execution policy, use the `extra_permissions` setting:\n\n```javascript\n{\n    \"dev\": {\n        ...\n        \"extra_permissions\": [{ // Attach any extra permissions to this policy.\n            \"Effect\": \"Allow\",\n            \"Action\": [\"rekognition:*\"], // AWS Service ARN\n            \"Resource\": \"*\"\n        }]\n    },\n    ...\n}\n```\n\n### AWS X-Ray\n\nZappa can enable [AWS X-Ray](https://aws.amazon.com/xray/) support on your function with a configuration setting:\n\n```javascript\n{\n    \"dev\": {\n        ...\n        \"xray_tracing\": true\n    },\n    ...\n}\n```\n\nThis will enable it on the Lambda function and allow you to instrument your code with X-Ray.\nFor example, with Flask:\n\n```python\nfrom aws_xray_sdk.core import xray_recorder\n\napp = Flask(__name__)\n\nxray_recorder.configure(service='my_app_name')\n\n@route('/hello')\n@xray_recorder.capture('hello')\ndef hello_world:\n    return 'Hello'\n```\n\nYou may use the capture decorator to create subsegments around functions, or `xray_recorder.begin_subsegment('subsegment_name')` and `xray_recorder.end_subsegment()` within a function. The official [X-Ray documentation for Python](http://docs.aws.amazon.com/xray-sdk-for-python/latest/reference/) has more information on how to use this with your code.\n\nNote that you may create subsegments in your code but an exception will be raised if you try to create a segment, as it is [created by the lambda worker](https://github.com/aws/aws-xray-sdk-python/issues/2). This also means that if you use Flask you must not use the [XRayMiddleware the documentation suggests](https://docs.aws.amazon.com/xray/latest/devguide/xray-sdk-python-middleware.html).\n\n### Globally Available Server-less Architectures\n\n\n<p align=\"center\">\n  <a href=\"https://htmlpreview.github.io/?https://github.com/Miserlou/Talks/blob/master/serverless-london/global.html#0\"><img src=\"http://i.imgur.com/oR61Qau.png\" alt=\"Global Zappa Slides\"/></a>\n</p>\n<p align=\"center\">\n  <i>Click to see <a href=\"https://htmlpreview.github.io/?https://github.com/Miserlou/Talks/blob/master/serverless-london/global.html#0\">slides from ServerlessConf London</a>!</i>\n</p>\n\nDuring the `init` process, you will be given the option to deploy your application \"globally.\" This will allow you to deploy your application to all available AWS regions simultaneously in order to provide a consistent global speed, increased redundancy, data isolation, and legal compliance. You can also choose to deploy only to \"primary\" locations, the AWS regions with `-1` in their names.\n\nTo learn more about these capabilities, see [these slides](https://htmlpreview.github.io/?https://github.com/Miserlou/Talks/blob/master/serverless-london/global.html#0) from ServerlessConf London.\n\n### Raising AWS Service Limits\n\nOut of the box, AWS sets a limit of [1000 concurrent executions](http://docs.aws.amazon.com/lambda/latest/dg/limits.html) for your functions. If you start to breach these limits, you may start to see errors like `ClientError: An error occurred (LimitExceededException) when calling the PutTargets..\"` or something similar.\n\nTo avoid this, you can file a [service ticket](https://console.aws.amazon.com/support/home#/) with Amazon to raise your limits up to the many tens of thousands of concurrent executions which you may need. This is a fairly common practice with Amazon, designed to prevent you from accidentally creating extremely expensive bug reports. So, before raising your service limits, make sure that you don't have any rogue scripts which could accidentally create tens of thousands of parallel executions that you don't want to pay for.\n\n### Dead Letter Queues\n\nIf you want to utilise [AWS Lambda's Dead Letter Queue feature](http://docs.aws.amazon.com/lambda/latest/dg/dlq.html) simply add the key `dead_letter_arn`, with the value being the complete ARN to the corresponding SNS topic or SQS queue in your `zappa_settings.json`.\n\nYou must have already created the corresponding SNS/SQS topic/queue, and the Lambda function execution role must have been provisioned with read/publish/sendMessage access to the DLQ resource.\n\n### Unique Package ID\n\nFor monitoring of different deployments, a unique UUID for each package is available in `package_info.json` in the root directory of your application's package.  You can use this information or a hash of this file for such things as tracking errors across different deployments, monitoring status of deployments and other such things on services such as Sentry and New Relic. The package will contain:\n\n```json\n{\n  \"build_platform\": \"darwin\",\n  \"build_user\": \"frank\",\n  \"build_time\": \"1509732511\",\n  \"uuid\": \"9c2df9e6-30f4-4c0a-ac4d-4ecb51831a74\"\n}\n```\n\n### Application Load Balancer Event Source\n\nZappa can be used to handle events triggered by Application Load Balancers (ALB). This can be useful in a few circumstances:\n- Since API Gateway has a hard limit of 30 seconds before timing out, you can use an ALB for longer running requests.\n- API Gateway is billed per-request; therefore, costs can become excessive with high throughput services. ALBs pricing model makes much more sense financially if you're expecting a lot of traffic to your Lambda.\n- ALBs can be placed within a VPC, which may make more sense for private endpoints than using API Gateway's private model (using AWS PrivateLink).\n\nLike API Gateway, Zappa can automatically provision ALB resources for you.  You'll need to add the following to your `zappa_settings`:\n```\n\"alb_enabled\": true,\n\"alb_vpc_config\": {\n    \"CertificateArn\": \"arn:aws:acm:us-east-1:[your-account-id]:certificate/[certificate-id]\",\n    \"SubnetIds\": [\n        // Here, you'll want to provide a list of subnets for your ALB, eg. 'subnet-02a58266'\n    ],\n    \"SecurityGroupIds\": [\n        // And here, a list of security group IDs, eg. 'sg-fbacb791'\n    ]\n}\n```\n\nMore information on using ALB as an event source for Lambda can be found [here](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/lambda-functions.html).\n\n*An important note*: right now, Zappa will provision ONE lambda to ONE load balancer, which means using `base_path` along with ALB configuration is currently unsupported.\n\n### Endpoint Configuration\n\nAPI Gateway can be configured to be only accessible in a VPC. To enable this; [configure your VPC to support](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-private-apis.html) then set the `endpoint_configuration` to `PRIVATE` and set up Resource Policy on the API Gateway. A note about this; if you're using a private endpoint, Zappa won't be able to tell if the API is returning a successful status code upon deploy or update, so you'll have to check it manually to ensure your setup is working properly.\n\nFor full list of options for endpoint configuration refer to [API Gateway EndpointConfiguration documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-apigateway-restapi-endpointconfiguration.html)\n\n#### Example Private API Gateway configuration\n\nzappa_settings.json:\n```json\n{\n    \"dev\": {\n        ...\n        \"endpoint_configuration\": [\"PRIVATE\"],\n        \"apigateway_policy\": \"apigateway_resource_policy.json\",\n        ...\n    },\n    ...\n}\n```\n\napigateway_resource_policy.json:\n```json\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Deny\",\n            \"Principal\": \"*\",\n            \"Action\": \"execute-api:Invoke\",\n            \"Resource\": \"execute-api:/*\",\n            \"Condition\": {\n                \"StringNotEquals\": {\n                    \"aws:sourceVpc\": \"{{vpcID}}\" // UPDATE ME\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Principal\": \"*\",\n            \"Action\": \"execute-api:Invoke\",\n            \"Resource\": \"execute-api:/*\"\n        }\n    ]\n}\n```\n\n### Cold Starts (Experimental)\n\nLambda may provide additional resources than provisioned during cold start initialization. Set `INSTANTIATE_LAMBDA_HANDLER_ON_IMPORT=True` to instantiate the lambda handler on import. This is an experimental feature - if startup time is critical, look into using Provisioned Concurrency.\n\n## Zappa Guides\n\n* [Django-Zappa tutorial (screencast)](https://www.youtube.com/watch?v=plUrbPN0xc8&feature=youtu.be).\n* [Using Django-Zappa, Part 1](https://serverlesscode.com/post/zappa-wsgi-for-python/).\n* [Using Django-Zappa, Part 2: VPCs](https://serverlesscode.com/post/zappa-wsgi-for-python-pt-2/).\n* [Building Serverless Microservices with Zappa and Flask](https://gun.io/blog/serverless-microservices-with-zappa-and-flask/)\n* [Zappa  Hello World  (Japanese)](http://qiita.com/satoshi_iwashita/items/505492193317819772c7)\n* [How to Deploy Zappa with CloudFront, RDS and VPC](https://jinwright.net/how-deploy-serverless-wsgi-app-using-zappa/)\n* [Secure 'Serverless' File Uploads with AWS Lambda, S3, and Zappa](http://blog.stratospark.com/secure-serverless-file-uploads-with-aws-lambda-s3-zappa.html)\n* [Deploy a Serverless WSGI App using Zappa, CloudFront, RDS, and VPC](https://docs.google.com/presentation/d/1aYeOMgQl4V_fFgT5VNoycdXtob1v6xVUWlyxoTEiTw0/edit#slide=id.p)\n* [AWS: Deploy Alexa Ask Skills with Flask-Ask and Zappa](https://developer.amazon.com/blogs/post/8e8ad73a-99e9-4c0f-a7b3-60f92287b0bf/New-Alexa-Tutorial-Deploy-Flask-Ask-Skills-to-AWS-Lambda-with-Zappa)\n* [Guide to using Django with Zappa](https://edgarroman.github.io/zappa-django-guide/)\n* [Zappa and LambCI](https://seancoates.com/blogs/zappa-and-lambci/)\n* [Building A Serverless Image Processing SaaS using Zappa](https://medium.com/99serverless/building-a-serverless-image-processing-saas-9ef68b594076)\n* [Serverless Slack Slash Commands with Python and Zappa](https://renzo.lucioni.xyz/serverless-slash-commands-with-python/)\n* [Bringing Tokusatsu to AWS using Python, Flask, Zappa and Contentful](https://www.contentful.com/blog/2018/03/07/bringing-tokusatsu-to-aws-using-python-flask-zappa-and-contentful/)\n* [AWS Summit 2018 Seoul - Zappa  Serverless Microservice](https://www.slideshare.net/YunSeopSong/zappa-serverless-microservice-94410308/)\n* [Book - Building Serverless Python Web Services with Zappa](https://github.com/PacktPublishing/Building-Serverless-Python-Web-Services-with-Zappa)\n* [Vider sa flask dans une lambda](http://free_zed.gitlab.io/articles/2019/11/vider-sa-flask-dans-une-lambda/)[French]\n* _Your guide here?_\n\n## Zappa in the Press\n\n* _[Zappa Serves Python, Minus the Servers](http://www.infoworld.com/article/3031665/application-development/zappa-serves-python-web-apps-minus-the-servers.html)_\n* _[Zappa lyfter serverlsa applikationer med Python](http://computersweden.idg.se/2.2683/1.649895/zappa-lyfter-python)_\n* _[Interview: Rich Jones on Zappa](https://serverlesscode.com/post/rich-jones-interview-django-zappa/)_\n* [Top 10 Python Libraries of 2016](https://tryolabs.com/blog/2016/12/20/top-10-python-libraries-of-2016/)\n\n## Sites Using Zappa\n\n* [Mailchimp Signup Utility](https://github.com/sasha42/Mailchimp-utility) - A microservice for adding people to a mailing list via API.\n* [Zappa Slack Inviter](https://github.com/Miserlou/zappa-slack-inviter) - A tiny, server-less service for inviting new users to your Slack channel.\n* [Serverless Image Host](https://github.com/Miserlou/serverless-imagehost) - A thumbnailing service with Flask, Zappa and Pillow.\n* [Zappa BitTorrent Tracker](https://github.com/Miserlou/zappa-bittorrent-tracker) - An experimental server-less BitTorrent tracker. Work in progress.\n* [JankyGlance](https://github.com/Miserlou/JankyGlance) - A server-less Yahoo! Pipes replacement.\n* [LambdaMailer](https://github.com/tryolabs/lambda-mailer) - A server-less endpoint for processing a contact form.\n* [Voter Registration Microservice](https://topics.arlingtonva.us/2016/11/voter-registration-search-microservice/) - Official backup to to the Virginia Department of Elections portal.\n* [FreePoll Online](https://www.freepoll.online) - A simple and awesome say for groups to make decisions.\n* [PasteOfCode](https://paste.ofcode.org/) - A Zappa-powered paste bin.\n* And many more, including banks, governments, startups, enterprises and schools!\n\nAre you using Zappa? Let us know and we'll list your site here!\n\n## Related Projects\n\n* [Mackenzie](http://github.com/Miserlou/Mackenzie) - AWS Lambda Infection Toolkit\n* [NoDB](https://github.com/Miserlou/NoDB) - A simple, server-less, Pythonic object store based on S3.\n* [zappa-cms](http://github.com/Miserlou/zappa-cms) - A tiny server-less CMS for busy hackers. Work in progress.\n* [zappa-django-utils](https://github.com/Miserlou/zappa-django-utils) - Utility commands to help Django deployments.\n* [flask-ask](https://github.com/johnwheeler/flask-ask) - A framework for building Amazon Alexa applications. Uses Zappa for deployments.\n* [zappa-file-widget](https://github.com/anush0247/zappa-file-widget) - A Django plugin for supporting binary file uploads in Django on Zappa.\n* [zops](https://github.com/bjinwright/zops) - Utilities for teams and continuous integrations using Zappa.\n* [cookiecutter-mobile-backend](https://github.com/narfman0/cookiecutter-mobile-backend/) - A `cookiecutter` Django project with Zappa and S3 uploads support.\n* [zappa-examples](https://github.com/narfman0/zappa-examples/) - Flask, Django, image uploads, and more!\n* [zappa-hug-example](https://github.com/mcrowson/zappa-hug-example) - Example of a Hug application using Zappa.\n* [Zappa Docker Image](https://github.com/danielwhatmuff/zappa) - A Docker image for running Zappa locally, based on Lambda Docker.\n* [zappa-dashing](https://github.com/nikos/zappa-dashing) - Monitor your AWS environment (health/metrics) with Zappa and CloudWatch.\n* [s3env](https://github.com/cameronmaske/s3env) - Manipulate a remote Zappa environment variable key/value JSON object file in an S3 bucket through the CLI.\n* [zappa_resize_image_on_fly](https://github.com/wobeng/zappa_resize_image_on_fly) - Resize images on the fly using Flask, Zappa, Pillow, and OpenCV-python.\n* [zappa-ffmpeg](https://github.com/ubergarm/zappa-ffmpeg) - Run ffmpeg inside a lambda for serverless transformations.\n* [gdrive-lambda](https://github.com/richiverse/gdrive-lambda) - pass json data to a csv file for end users who use Gdrive across the organization.\n* [travis-build-repeat](https://github.com/bcongdon/travis-build-repeat) - Repeat TravisCI builds to avoid stale test results.\n* [wunderskill-alexa-skill](https://github.com/mcrowson/wunderlist-alexa-skill) - An Alexa skill for adding to a Wunderlist.\n* [xrayvision](https://github.com/mathom/xrayvision) - Utilities and wrappers for using AWS X-Ray with Zappa.\n* [terraform-aws-zappa](https://github.com/dpetzold/terraform-aws-zappa) - Terraform modules for creating a VPC, RDS instance, ElastiCache Redis and CloudFront Distribution for use with Zappa.\n* [zappa-sentry](https://github.com/jneves/zappa-sentry) - Integration with Zappa and Sentry\n* [IOpipe](https://github.com/iopipe/iopipe-python#zappa) - Monitor, profile and analyze your Zappa apps.\n\n\n## Hacks\n\nZappa goes quite far beyond what Lambda and API Gateway were ever intended to handle. As a result, there are quite a few hacks in here that allow it to work. Some of those include, but aren't limited to..\n\n* Using VTL to map body, headers, method, params and query strings into JSON, and then turning that into valid WSGI.\n* Attaching response codes to response bodies, Base64 encoding the whole thing, using that as a regex to route the response code, decoding the body in VTL, and mapping the response body to that.\n* Packing and _Base58_ encoding multiple cookies into a single cookie because we can only map one kind.\n* Forcing the case permutations of \"Set-Cookie\" in order to return multiple headers at the same time.\n* Turning cookie-setting 301/302 responses into 200 responses with HTML redirects, because we have no way to set headers on redirects.\n\n## Contributing\n\nContributions are very welcome!\n\nPlease file tickets for discussion before submitting patches. Pull requests should target `master` and should leave Zappa in a \"shippable\" state if merged.\n\nIf you are adding a non-trivial amount of new code, please include a functioning test in your PR. For AWS calls, we use the `placebo` library, which you can learn to use [in their README](https://github.com/garnaat/placebo#usage-as-a-decorator). The test suite will be run by [Travis CI](https://travis-ci.org/zappa/Zappa) once you open a pull request.\n\nPlease include the GitHub issue or pull request URL that has discussion related to your changes as a comment in the code ([example](https://github.com/zappa/Zappa/blob/fae2925431b820eaedf088a632022e4120a29f89/zappa/zappa.py#L241-L243)). This greatly helps for project maintainability, as it allows us to trace back use cases and explain decision making. Similarly, please make sure that you meet all of the requirements listed in the [pull request template](https://raw.githubusercontent.com/zappa/Zappa/master/.github/PULL_REQUEST_TEMPLATE.md).\n\nPlease feel free to work on any open ticket, especially any ticket marked with the \"help-wanted\" label. If you get stuck or want to discuss an issue further, please join [our Slack channel](https://zappateam.slack.com/), where you'll find a community of smart and interesting people working dilligently on hard problems.\n[Zappa Slack Auto Invite](https://slackautoinviter.herokuapp.com)\n\nZappa does not intend to conform to PEP8, isolate your commits so that changes to functionality with changes made by your linter.\n\n#### Using a Local Repo\n\nTo use the git HEAD, you *probably can't* use `pip install -e `. Instead, you should clone the repo to your machine and then `pip install /path/to/zappa/repo` or `ln -s /path/to/zappa/repo/zappa zappa` in your local project.\n"
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "example",
          "type": "tree",
          "content": null
        },
        {
          "name": "setup.py",
          "type": "blob",
          "size": 1.9755859375,
          "content": "from configparser import ConfigParser\nfrom io import open\nfrom pathlib import Path\n\nfrom setuptools import setup\n\nfrom zappa import __version__\n\nwith open(\"README.md\", encoding=\"utf-8\") as readme_file:\n    long_description = readme_file.read()\n\npipfile = ConfigParser()\npipfile.read(Path(__file__).parent.resolve() / \"Pipfile\")\nrequired = [\n    \"{}{}\".format(name, version.strip('\"')) if version != '\"*\"' else name for name, version in pipfile[\"packages\"].items()\n]\ntest_required = [\n    \"{}{}\".format(name, version.strip('\"')) if version != '\"*\"' else name for name, version in pipfile[\"dev-packages\"].items()\n]\n\nsetup(\n    name=\"zappa\",\n    version=__version__,\n    packages=[\"zappa\"],\n    install_requires=required,\n    python_requires=\">=3.8\",\n    tests_require=test_required,\n    include_package_data=True,\n    license=\"MIT License\",\n    description=\"Server-less Python Web Services for AWS Lambda and API Gateway\",\n    long_description=long_description,\n    long_description_content_type=\"text/markdown\",\n    url=\"https://zappa.ws/zappa\",\n    author=\"Rich Jones\",\n    author_email=\"rich@openwatch.net\",\n    maintainer=\"Alex DelVecchio\",\n    maintainer_email=\"alex@zappa.ws\",\n    entry_points={\n        \"console_scripts\": [\n            \"zappa=zappa.cli:handle\",\n            \"z=zappa.cli:handle\",\n        ]\n    },\n    classifiers=[\n        \"Environment :: Console\",\n        \"License :: OSI Approved :: Apache Software License\",\n        \"Operating System :: OS Independent\",\n        \"Programming Language :: Python\",\n        \"Programming Language :: Python :: 3.8\",\n        \"Programming Language :: Python :: 3.9\",\n        \"Programming Language :: Python :: 3.10\",\n        \"Programming Language :: Python :: 3.11\",\n        \"Programming Language :: Python :: 3.12\",\n        \"Framework :: Django\",\n        \"Framework :: Django :: 3.2\",\n        \"Framework :: Django :: 4.2\",\n        \"Framework :: Django :: 5.0\",\n        \"Topic :: Internet :: WWW/HTTP\",\n        \"Topic :: Internet :: WWW/HTTP :: Dynamic Content\",\n    ],\n)\n"
        },
        {
          "name": "test.sh",
          "type": "blob",
          "size": 0.1142578125,
          "content": "#! /bin/bash\npytest --cov=zappa\n\n# For a specific test:\n# pytest tests/tests.py::TestZappa::test_lets_encrypt_sanity\n"
        },
        {
          "name": "test_settings.json",
          "type": "blob",
          "size": 4.1220703125,
          "content": "{\n    \"ttt888\": {\n       \"touch\": false,\n       \"s3_bucket\": \"lmbda\",\n       \"app_function\": \"tests.test_app.hello_world\",\n       \"use_precompiled_packages\": false,\n       \"callbacks\": {\n           \"settings\": \"tests.test_app.callback\",\n           \"post\": \"tests.test_app.callback\",\n           \"zip\": \"test_settings.callback\"\n       },\n       \"delete_local_zip\": true,\n       \"ephemeral_storage\": {\n           \"Size\": 1024\n       },\n       \"debug\": true,\n       \"parameter_depth\": 2,\n       \"prebuild_script\": \"tests.test_app.prebuild_me\",\n       \"environment_variables\": {\n           \"TEST_ENV_VAR\": \"test_value\"\n       },\n       \"context_header_mappings\": {\n           \"CognitoIdentityId\": \"identity.cognitoIdentityId\",\n           \"APIStage\": \"stage\"\n       },\n       \"events\": [\n           {\n               \"function\": \"tests.test_app.schedule_me\",\n               \"expression\": \"rate(1 minute)\"\n           },\n           {\n               \"function\": \"test.test_app.method\",\n               \"event_source\": {\n                   \"arn\": \"arn:aws:sns:::1\",\n                   \"events\": [\n                     \"sns:Publish\"\n                   ]\n               }\n           },\n           {\n               \"function\": \"test.test_app.method_filters\",\n               \"event_source\": {\n                   \"arn\": \"arn:aws:sns:::with-filters\",\n                   \"filters\": {\n                        \"interests\": [\"python\", \"aws\", \"zappa\"],\n                        \"version\": [\"1.0\"]\n                    },\n                   \"events\": [\n                     \"sns:Publish\"\n                   ]\n               }\n           }\n       ],\n       \"cognito\": {\n           \"user_pool\": \"user-pool-id\",\n           \"triggers\": [\n                {\"source\": \"PreSignUp_SignUp\",\n                 \"function\": \"test.tasks.pre_signup_function\"\n                }\n            ]\n      }\n    },\n    \"devor\": {\n       \"s3_bucket\": \"lmbda\",\n       \"app_function\": \"tests.test_app.hello_world\",\n       \"callbacks\": {\n           \"settings\": \"test_settings.callback\",\n           \"post\": \"test_settings.callback\",\n           \"zip\": \"test_settings.callback\"\n       },\n       \"delete_local_zip\": true,\n       \"debug\": true,\n       \"parameter_depth\": 2,\n       \"prebuild_script\": \"test_settings.prebuild_me\",\n       \"events\": [{\n          \"function\": \"tests.test_app.schedule_me\",\n          \"expression\": \"rate(1 minute)\"\n       }]\n    },\n    \"extendo\": {\n       \"extends\": \"ttt888\",\n       \"touch\": true,\n       \"prebuild_script\": \"test_settings.prebuild_me\",\n       \"environment_variables\": {\n          \"EXTENDO\": \"You bet\"\n       }\n    },\n    \"extendo2\": {\n       \"extends\": \"extendo\",\n       \"s3_bucket\": \"lmbda2\"\n    },\n    \"slim_handler\": {\n       \"extends\": \"ttt888\",\n       \"slim_handler\": true,\n       \"delete_local_zip\": true\n    },\n    \"deprecated_remote_env\": {\n       \"s3_bucket\": \"lmbda\",\n       \"remote_env_bucket\": \"lmbda-env\",\n       \"remote_env_file\": \"dev/env.json\"\n    },\n    \"remote_env\": {\n       \"s3_bucket\": \"lmbda\",\n       \"remote_env\": \"s3://lmbda-env/prod/env.json\"\n    },\n    \"extendofail\": {\n       \"extends\": \"failfail\",\n       \"prebuild_script\": \"test_settings.prebuild_me\",\n       \"environment_variables\": {\n          \"EXTENDO\": \"You bet\"\n       }\n    },\n    \"invalid_ephemeral_storage_out_of_range\": {\n        \"extends\": \"ttt888\",\n        \"ephemeral_storage\": {\n            \"Size\": 99999\n        }\n    },\n    \"invalid_ephemeral_storage_missing_key\": {\n        \"extends\": \"ttt888\",\n        \"ephemeral_storage\": {\n            \"BadKey\": 1024\n        }\n    },\n    \"build_package_only_delete_local_zip_false\": {\n      \"delete_local_zip\": false,\n      \"use_precompiled_packages\": false,\n      \"delete_s3_zip\": false\n    },\n    \"build_package_only_delete_local_zip_true\": {\n      \"delete_local_zip\": true,\n      \"use_precompiled_packages\": false,\n      \"delete_s3_zip\": false\n    },\n    \"lambda_concurrency_enabled\": {\n        \"extends\": \"ttt888\",\n        \"lambda_concurrency\": 6\n     },\n    \"addtextmimetypes\": {\n       \"s3_bucket\": \"lmbda\",\n       \"app_function\": \"tests.test_app.hello_world\",\n       \"delete_local_zip\": true,\n       \"binary_support\": true,\n       \"additional_text_mimetypes\": [\"application/custommimetype\"]\n    }\n}\n"
        },
        {
          "name": "test_settings.py",
          "type": "blob",
          "size": 1.3046875,
          "content": "APP_MODULE = \"tests.test_app\"\nAPP_FUNCTION = \"hello_world\"\nDJANGO_SETTINGS = None\nDEBUG = \"True\"\nLOG_LEVEL = \"DEBUG\"\nSCRIPT_NAME = \"hello_world\"\nDOMAIN = None\nAPI_STAGE = \"ttt888\"\nPROJECT_NAME = \"ttt888\"\n\nREMOTE_ENV = \"s3://lmbda/test_env.json\"\n## test_env.json\n# {\n#    \"hello\": \"world\"\n# }\n#\n\nAWS_EVENT_MAPPING = {\n    \"arn:aws:s3:1\": \"test_settings.aws_s3_event\",\n    \"arn:aws:sns:1\": \"test_settings.aws_sns_event\",\n    \"arn:aws:dynamodb:1\": \"test_settings.aws_dynamodb_event\",\n    \"arn:aws:kinesis:1\": \"test_settings.aws_kinesis_event\",\n    \"arn:aws:sqs:1\": \"test_settings.aws_sqs_event\",\n}\n\nENVIRONMENT_VARIABLES = {\"testenv\": \"envtest\"}\n\nAUTHORIZER_FUNCTION = \"test_settings.authorizer_event\"\n\n\ndef prebuild_me():\n    print(\"This is a prebuild script!\")\n\n\ndef callback(self):\n    print(\"this is a callback\")\n\n\ndef aws_s3_event(event, content):\n    return \"AWS S3 EVENT\"\n\n\ndef aws_sns_event(event, content):\n    return \"AWS SNS EVENT\"\n\n\ndef aws_async_sns_event(arg1, arg2, arg3):\n    return \"AWS ASYNC SNS EVENT\"\n\n\ndef aws_dynamodb_event(event, content):\n    return \"AWS DYNAMODB EVENT\"\n\n\ndef aws_kinesis_event(event, content):\n    return \"AWS KINESIS EVENT\"\n\n\ndef aws_sqs_event(event, content):\n    return \"AWS SQS EVENT\"\n\n\ndef authorizer_event(event, content):\n    return \"AUTHORIZER_EVENT\"\n\n\ndef command():\n    print(\"command\")\n"
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "zappa",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}