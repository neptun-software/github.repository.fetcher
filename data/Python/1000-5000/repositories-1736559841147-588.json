{
  "metadata": {
    "timestamp": 1736559841147,
    "page": 588,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjU5MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "nghuyong/WeiboSpider",
      "stars": 3729,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.037109375,
          "content": "MIT License\n\nCopyright (c) 2019 HuYong\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE."
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 12.62109375,
          "content": "<p align=\"center\">\n    <br>\n    <img src=\"./.github/weibospider.png\" width=\"400\"/>\n    <br>\n<p>\n<p align=\"center\">\n  <a href=\"https://www.codacy.com/gh/nghuyong/WeiboSpider/dashboard?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=nghuyong/WeiboSpider&amp;utm_campaign=Badge_Grade\">\n    <img src=\"https://app.codacy.com/project/badge/Grade/cf88a8b1e6e44c5d993d2cbea7d44c85\"\n         alt=\"Codacy Badge\">\n  </a>\n    <a href=\"https://scan.coverity.com/projects/nghuyong-weibospider\">\n    <img alt=\"Coverity Scan Build Status\"\n       src=\"https://scan.coverity.com/projects/26928/badge.svg\"/>\n  </a>\n    <a href=\"https://github.com/nghuyong/WeiboSpider/stargazers\">\n    <img src=\"https://img.shields.io/github/stars/nghuyong/WeiboSpider.svg?colorA=orange&colorB=orange&logo=github\"\n         alt=\"GitHub stars\">\n  </a>\n  <a href=\"https://github.com/nghuyong/WeiboSpider/issues\">\n        <img src=\"https://img.shields.io/github/issues/nghuyong/WeiboSpider.svg\"\n             alt=\"GitHub issues\">\n  </a>\n  <a href=\"https://github.com/nghuyong/WeiboSpider/forks\">\n        <img src=\"https://img.shields.io/github/forks/nghuyong/WeiboSpider.svg\"\n             alt=\"GitHub forks\">\n  </a>\n  <a href=\"https://github.com/nghuyong/WeiboSpider/\">\n        <img src=\"https://img.shields.io/github/last-commit/nghuyong/WeiboSpider.svg\">\n  </a>\n  <a href=\"https://github.com/nghuyong/WeiboSpider/blob/master/LICENSE\">\n        <img src=\"https://img.shields.io/github/license/nghuyong/WeiboSpider.svg\"\n             alt=\"GitHub license\">\n  </a>\n</p>\n\n<h4 align=\"center\">\n    <p>持续维护的新浪微博采集工具🚀🚀🚀</p>\n</h4>\n\n\n## 项目特色\n\n- 基于weibo.com的新版API构建，拥有最丰富的字段信息\n- 多种采集模式，包含微博用户,推文,粉丝,关注,转发,评论,关键词搜索\n- 核心代码仅100行，代码可读性高，可快速按需进行定制化改造\n\n## 快速开始\n\n### 拉取&&安装\n\n```bash\ngit clone https://github.com/nghuyong/WeiboSpider.git --depth 1 \ncd WeiboSpider\npip install -r requirements.txt\n```\n\n### 替换Cookie\n\n访问[https://weibo.com/](https://weibo.com/)， 登陆账号，打开浏览器的开发者模式，再次刷新\n\n![](.github/cookie.png)\n\n复制`weibo.com`数据包，network中的cookie值。编辑`weibospider/cookie.txt`并替换成刚刚复制的Cookie\n\n### 添加代理IP(可选)\n\n重写[fetch_proxy](./weibospider/middlewares.py#6L)\n方法，该方法需要返回一个代理ip，具体参考[这里](https://github.com/nghuyong/WeiboSpider/issues/124#issuecomment-654335439)\n\n## 运行程序\n\n根据自己实际需要重写`./weibospider/spiders/*`中的`start_requests`函数\n\n采集的数据存在`output`文件中，命名为`{spider.name}_{datetime}.jsonl`\n\n### 用户信息采集\n\n```bash\ncd weibospider\npython run_spider.py user\n```\n\n```json\n{\n  \"crawl_time\": 1666863485,\n  \"_id\": \"1749127163\",\n  \"avatar_hd\": \"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.1024/001Un9Srly8h3fpj11yjyj60u00u0q7f02.jpg?KID=imgbed,tva&Expires=1666874283&ssig=a%2FMfgFzvRo\",\n  \"nick_name\": \"雷军\",\n  \"verified\": true,\n  \"description\": \"小米董事长，金山软件董事长。业余爱好是天使投资。\",\n  \"followers_count\": 22756103,\n  \"friends_count\": 1373,\n  \"statuses_count\": 14923,\n  \"gender\": \"m\",\n  \"location\": \"北京 海淀区\",\n  \"mbrank\": 7,\n  \"mbtype\": 12,\n  \"verified_type\": 0,\n  \"verified_reason\": \"小米创办人，董事长兼CEO；金山软件董事长；天使投资人。\",\n  \"birthday\": \"\",\n  \"created_at\": \"2010-05-31 23:07:59\",\n  \"desc_text\": \"小米创办人，董事长兼CEO；金山软件董事长；天使投资人。\",\n  \"ip_location\": \"IP属地：北京\",\n  \"sunshine_credit\": \"信用极好\",\n  \"label_desc\": [\n    \"V指数 财经 75.30分\",\n    \"热门财经博主 数据飙升\",\n    \"昨日发博3，阅读数100万+，互动数1.9万\",\n    \"视频累计播放量9819.3万\",\n    \"群友 3132\"\n  ],\n  \"company\": \"金山软件\",\n  \"education\": {\n    \"school\": \"武汉大学\"\n  }\n}\n```\n\n### 用户粉丝列表采集\n\n```bash\npython run_spider.py fan\n```\n\n```json\n{\n  \"crawl_time\": 1666863563,\n  \"_id\": \"1087770692_5968044974\",\n  \"follower_id\": \"1087770692\",\n  \"fan_info\": {\n    \"_id\": \"5968044974\",\n    \"avatar_hd\": \"https://tvax1.sinaimg.cn/default/images/default_avatar_male_180.gif?KID=imgbed,tva&Expires=1666874363&ssig=UuzaeK437R\",\n    \"nick_name\": \"用户5968044974\",\n    \"verified\": false,\n    \"description\": \"\",\n    \"followers_count\": 0,\n    \"friends_count\": 195,\n    \"statuses_count\": 9,\n    \"gender\": \"m\",\n    \"location\": \"其他\",\n    \"mbrank\": 0,\n    \"mbtype\": 0,\n    \"credit_score\": 80,\n    \"created_at\": \"2016-06-25 22:30:13\"\n  }\n}\n...\n```\n\n### 用户关注列表采集\n\n```bash\npython run_spider.py follow\n```\n\n```json\n{\n  \"crawl_time\": 1666863679,\n  \"_id\": \"1087770692_7083568088\",\n  \"fan_id\": \"1087770692\",\n  \"follower_info\": {\n    \"_id\": \"7083568088\",\n    \"avatar_hd\": \"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.1024/007JnVEcly8gyqd9jadjlj30u00u0gpn.jpg?KID=imgbed,tva&Expires=1666874479&ssig=9zhfeMPLzr\",\n    \"nick_name\": \"蒋昀霖\",\n    \"verified\": true,\n    \"description\": \"工作请联系：lijialun@kpictures.cn\",\n    \"followers_count\": 329216,\n    \"friends_count\": 58,\n    \"statuses_count\": 342,\n    \"gender\": \"m\",\n    \"location\": \"北京\",\n    \"mbrank\": 6,\n    \"mbtype\": 12,\n    \"credit_score\": 80,\n    \"created_at\": \"2019-04-17 16:25:43\",\n    \"verified_type\": 0,\n    \"verified_reason\": \"东申未来 演员\"\n  }\n}\n...\n```\n\n\n### 微博评论采集\n\n```bash\npython run_spider.py comment\n```\n\n```json\n{\n  \"crawl_time\": 1666863805,\n  \"_id\": 4826279188108038,\n  \"created_at\": \"2022-10-19 13:41:29\",\n  \"like_counts\": 1,\n  \"ip_location\": \"来自河南\",\n  \"content\": \"五周年快乐呀，请坤哥哥继续保持这份热爱，奔赴下一场山海\",\n  \"comment_user\": {\n    \"_id\": \"2380967841\",\n    \"avatar_hd\": \"https://tvax4.sinaimg.cn/crop.0.0.888.888.1024/002B8iv7ly8gv647ipgxvj60oo0oojtk02.jpg?KID=imgbed,tva&Expires=1666874604&ssig=%2FdGaaIRkhf\",\n    \"nick_name\": \"流年执念的二瓜娇\",\n    \"verified\": false,\n    \"description\": \"蓝桉已遇释怀鸟，不爱万物唯爱你。\",\n    \"followers_count\": 238,\n    \"friends_count\": 1655,\n    \"statuses_count\": 12546,\n    \"gender\": \"f\",\n    \"location\": \"河南\",\n    \"mbrank\": 6,\n    \"mbtype\": 11\n  }\n}\n...\n```\n\n### 微博转发采集\n\n```bash\npython run_spider.py repost\n```\n\n```json\n{\n  \"_id\": \"4826312651310475\",\n  \"mblogid\": \"Mb2vL5uUH\",\n  \"created_at\": \"2022-10-19 15:54:27\",\n  \"geo\": null,\n  \"ip_location\": \"发布于 德国\",\n  \"reposts_count\": 0,\n  \"comments_count\": 0,\n  \"attitudes_count\": 0,\n  \"source\": \"iPhone客户端\",\n  \"content\": \"共享[鼓掌][太开心][鼓掌]五周年快乐！//@陈坤:#山下学堂五周年# 五年， 感谢同行。\",\n  \"pic_urls\": [],\n  \"pic_num\": 0,\n  \"user\": {\n    \"_id\": \"2717869081\",\n    \"avatar_hd\": \"https://tvax1.sinaimg.cn/crop.0.0.160.160.1024/a1ff6419ly8gz1xoq9oolj204g04g745.jpg?KID=imgbed,tva&Expires=1666876939&ssig=Cl93CLjdB%2F\",\n    \"nick_name\": \"YuFeeC\",\n    \"verified\": false,\n    \"mbrank\": 0,\n    \"mbtype\": 0\n  },\n  \"url\": \"https://weibo.com/2717869081/Mb2vL5uUH\",\n  \"crawl_time\": 1666866139\n}\n...\n```\n\n### 基于微博ID的微博采集\n\n```bash\npython run_spider.py tweet_by_tweet_id\n```\n\n```json\n{\n    \"_id\": \"4762810834227120\",\n    \"mblogid\": \"LqlZNhJFm\",\n    \"created_at\": \"2022-04-27 10:20:54\",\n    \"geo\": null,\n    \"ip_location\": null,\n    \"reposts_count\": 1890,\n    \"comments_count\": 1924,\n    \"attitudes_count\": 12167,\n    \"source\": \"三星Galaxy S22 Ultra\",\n    \"content\": \"生于乱世纵横四海，义之所在不计生死，孤勇者陈恭一生当如是。#风起陇西今日开播# #风起陇西#  今晚，恭候你！\",\n    \"pic_urls\": [],\n    \"pic_num\": 0,\n    \"isLongText\": false,\n    \"user\": {\n        \"_id\": \"1087770692\",\n        \"avatar_hd\": \"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.1024/40d61044ly8gbhxwgy419j20u00u0goc.jpg?KID=imgbed,tva&Expires=1682768013&ssig=r1QurGoc2L\",\n        \"nick_name\": \"陈坤\",\n        \"verified\": true,\n        \"mbrank\": 7,\n        \"mbtype\": 12,\n        \"verified_type\": 0\n    },\n    \"video\": \"http://f.video.weibocdn.com/o0/CmQEWK1ylx07VAm0nrxe01041200YDIc0E010.mp4?label=mp4_720p&template=1280x720.25.0&ori=0&ps=1CwnkDw1GXwCQx&Expires=1682760813&ssig=26udcPSXFJ&KID=unistore,video\",\n    \"url\": \"https://weibo.com/1087770692/LqlZNhJFm\",\n    \"crawl_time\": 1682757213\n}\n...\n```\n\n### 基于用户ID的微博采集\n\n```bash\npython run_spider.py tweet_by_user_id\n```\n\n```json\n{\n  \"crawl_time\": 1666864583,\n  \"_id\": \"4762810834227120\",\n  \"mblogid\": \"LqlZNhJFm\",\n  \"created_at\": \"2022-04-27 10:20:54\",\n  \"geo\": null,\n  \"ip_location\": null,\n  \"reposts_count\": 1907,\n  \"comments_count\": 1924,\n  \"attitudes_count\": 12169,\n  \"source\": \"三星Galaxy S22 Ultra\",\n  \"content\": \"生于乱世纵横四海，义之所在不计生死，孤勇者陈恭一生当如是。#风起陇西今日开播# #风起陇西#  今晚，恭候你！\",\n  \"pic_urls\": [],\n  \"pic_num\": 0,\n  \"video\": \"http://f.video.weibocdn.com/o0/CmQEWK1ylx07VAm0nrxe01041200YDIc0E010.mp4?label=mp4_720p&template=1280x720.25.0&ori=0&ps=1CwnkDw1GXwCQx&Expires=1666868183&ssig=RlIeOt286i&KID=unistore,video\",\n  \"url\": \"https://weibo.com/1087770692/LqlZNhJFm\"\n}\n...\n```\n\n\n### 基于关键词的微博采集\n\n```bash\npython run_spider.py tweet_by_keyword\n```\n\n```json\n{\n  \"crawl_time\": 1666869049,\n  \"keyword\": \"丽江\",\n  \"_id\": \"4829255386537989\",\n  \"mblogid\": \"Mch46rqPr\",\n  \"created_at\": \"2022-10-27 18:47:50\",\n  \"geo\": {\n    \"type\": \"Point\",\n    \"coordinates\": [\n      26.962427,\n      100.248299\n    ],\n    \"detail\": {\n      \"poiid\": \"B2094251D06FAAF44299\",\n      \"title\": \"山野文创旅拍圣地\",\n      \"type\": \"checkin\",\n      \"spot_type\": \"0\"\n    }\n  },\n  \"ip_location\": \"发布于 云南\",\n  \"reposts_count\": 0,\n  \"comments_count\": 0,\n  \"attitudes_count\": 1,\n  \"source\": \"iPhone1314iPhone客户端\",\n  \"content\": \"丽江小漾日出\\n推出户外移动餐桌\\n接受私人定制\\n让美食融入美景心情自然美丽了！\\n#小众宝藏旅行地##超出片的艺术街区#  \",\n  \"pic_urls\": [\n    \"https://wx1.sinaimg.cn/orj960/4b138405gy1h7k1a56c4oj234022onph\",\n    \"https://wx1.sinaimg.cn/orj960/4b138405gy1h7k19eb2kxj22ts1vvb2a\",\n    \"https://wx1.sinaimg.cn/orj960/4b138405gy1h7k1a0wzglj22ua1w7hdw\",\n    \"https://wx1.sinaimg.cn/orj960/4b138405gy1h7k19wsafnj231x21a7wj\",\n    \"https://wx1.sinaimg.cn/orj960/4b138405gy1h7k19jd1xkj22oh1sbkjo\",\n    \"https://wx1.sinaimg.cn/orj960/4b138405gy1h7k19mma74j22ru1ukx6q\",\n    \"https://wx1.sinaimg.cn/orj960/4b138405gy1h7k19tf1bfj234022oe85\",\n    \"https://wx1.sinaimg.cn/orj960/4b138405gy1h7k19pk37pj234022okjm\",\n    \"https://wx1.sinaimg.cn/orj960/4b138405gy1h7k19g6nzfj20wi0lo7my\"\n  ],\n  \"pic_num\": 9,\n  \"user\": {\n    \"_id\": \"1259570181\",\n    \"avatar_hd\": \"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.1024/4b138405ly8gzfkfikyqvj20u00u0ag1.jpg?KID=imgbed,tva&Expires=1666879848&ssig=6PUDG5RonQ\",\n    \"nick_name\": \"飞鸟与鱼\",\n    \"verified\": true,\n    \"mbrank\": 7,\n    \"mbtype\": 12,\n    \"verified_type\": 0\n  },\n  \"url\": \"https://weibo.com/1259570181/Mch46rqPr\"\n}\n...\n```\n\n## 更新日志\n\n- 2024.02: 支持采集自己推文的阅读量 [#313](https://github.com/nghuyong/WeiboSpider/issues/313)\n- 2024.02: 支持采集视频的播放量 [#315](https://github.com/nghuyong/WeiboSpider/issues/315)\n- 2024.01: 支持转发推文溯源到原推文 [#314](https://github.com/nghuyong/WeiboSpider/issues/314)\n- 2023.12: 支持采集推文的二级评论 [#302](https://github.com/nghuyong/WeiboSpider/issues/302)\n- 2023.12: 支持采集指定时间段的用户推文 [#308](https://github.com/nghuyong/WeiboSpider/issues/308)\n- 2023.04: 支持针对推文id的推文采集 [#272](https://github.com/nghuyong/WeiboSpider/issues/272)\n- 2022.11: 支持针对单个关键词获取单天超过1200页的检索结果 [#257](https://github.com/nghuyong/WeiboSpider/issues/257)\n- 2022.11: 支持长微博全文的获取\n- 2022.11: 基于关键词微博搜索支持指定时间范围\n- 2022.10: 添加IP归属地信息的采集，包括用户数据，微博数据和微博评论数据\n- 2022.10: 基于weibo.com站点对项目进行重构\n\n## 引用\n```\n@inproceedings{hu-etal-2020-weibo,\n    title = \"{W}eibo-{COV}: A Large-Scale {COVID}-19 Social Media Dataset from {W}eibo\",\n    author = \"Hu, Yong  and\n      Huang, Heyan  and\n      Chen, Anfan  and\n      Mao, Xian-Ling\",\n    booktitle = \"Proceedings of the 1st Workshop on {NLP} for {COVID}-19 (Part 2) at {EMNLP} 2020\",\n    month = dec,\n    year = \"2020\",\n    address = \"Online\",\n    publisher = \"Association for Computational Linguistics\",\n    url = \"https://www.aclweb.org/anthology/2020.nlpcovid19-2.34\",\n    doi = \"10.18653/v1/2020.nlpcovid19-2.34\",\n}\n```\n\n## 其他工作\n\n- 已构建超大规模数据集WeiboCOV，可免费申请，包含2千万微博活跃用户以及6千万推文数据，参见[这里](https://github.com/nghuyong/weibo-public-opinion-datasets)\n"
        },
        {
          "name": "requirements.txt",
          "type": "blob",
          "size": 0.0283203125,
          "content": "Scrapy==2.5.1\npython_dateutil"
        },
        {
          "name": "weibospider",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}