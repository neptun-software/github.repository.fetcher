{
  "metadata": {
    "timestamp": 1736559702135,
    "page": 386,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjM5MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "Kwai-Kolors/Kolors",
      "stars": 4085,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.0361328125,
          "content": "weights\n*.egg-info\n__pycache__\n*.pyc\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 11.0908203125,
          "content": "                                 Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n   APPENDIX: How to apply the Apache License to your work.\n\n      To apply the Apache License to your work, attach the following\n      boilerplate notice, with the fields enclosed by brackets \"[]\"\n      replaced with your own identifying information. (Don't include\n      the brackets!)  The text should be enclosed in the appropriate\n      comment syntax for the file format. We also recommend that a\n      file or class name and description of purpose be included on the\n      same \"printed page\" as the copyright notice for easier\n      identification within third-party archives.\n\n   Copyright [yyyy] [name of copyright owner]\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n"
        },
        {
          "name": "MODEL_LICENSE",
          "type": "blob",
          "size": 15.2138671875,
          "content": "中文版\n模型许可协议\n模型发布日期：2024/7/6\n\n通过点击同意或使用、复制、修改、分发、表演或展示模型作品的任何部分或元素，您将被视为已承认并接受本协议的内容，本协议立即生效。\n\n1.定义。\na. “协议”指本协议中所规定的使用、复制、分发、修改、表演和展示模型作品或其任何部分或元素的条款和条件。\nb. “材料”是指根据本协议提供的专有的模型和文档（及其任何部分）的统称。\nc. “模型”指大型语言模型、图像/视频/音频/3D 生成模型、多模态大型语言模型及其软件和算法，包括训练后的模型权重、参数（包括优化器状态）、机器学习模型代码、推理支持代码、训练支持代码、微调支持代码以及我们公开提供的前述其他元素。\nd.  “输出”是指通过操作或以其他方式使用模型或模型衍生品而产生的模型或模型衍生品的信息和/或内容输出。\ne.  “模型衍生品”包括：(i)对模型或任何模型衍生物的修改；(ii)基于模型的任何模型衍生物的作品；或(iii)通过将模型或模型的任何模型衍生物的权重、参数、操作或输出的模式转移到该模型而创建的任何其他机器学习模型，以使该模型的性能类似于模型或模型衍生物。为清楚起见，输出本身不被视为模型衍生物。\nf. “模型作品”包括：(i)材料；(ii)模型衍生品；及(iii)其所有衍生作品。\ng. “许可人”或“我们”指作品所有者或作品所有者授权的授予许可的实体，包括可能对模型和/或分发模型拥有权利的个人或实体。\nh.“被许可人”、“您”或“您的”是指行使本协议授予的权利和/或为任何目的和在任何使用领域使用模型作品的自然人或法人实体。\ni.“第三方”是指不受我们或您共同控制的个人或法人实体。\n\n2. 许可内容。\na.我们授予您非排他性的、全球性的、不可转让的、免版税的许可（在我们的知识产权或我们拥有的体现在材料中或利用材料的其他权利的范围内），允许您仅根据本协议的条款使用、复制、分发、创作衍生作品（包括模型衍生品）和对材料进行修改，并且您不得违反（或鼓励、或允许任何其他人违反）本协议的任何条款。\nb.在遵守本协议的前提下，您可以分发或向第三方提供模型作品，您须满足以下条件：\n（i）您必须向所有该模型作品或使用该作品的产品或服务的任何第三方接收者提供模型作品的来源和本协议的副本；\n（ii）您必须在任何修改过的文档上附加明显的声明，说明您更改了这些文档；\n（iii）您可以在您的修改中添加您自己的版权声明，并且，在您对该作品的使用、复制、修改、分发、表演和展示符合本协议的条款和条件的前提下，您可以为您的修改或任何此类模型衍生品的使用、复制或分发提供额外或不同的许可条款和条件。\nc. 附加商业条款：若您或其关联方提供的所有产品或服务的月活跃用户数在前一个自然月未超过3亿月活跃用户数，则您向许可方进行登记，将被视为获得相应的商业许可；若您或其关联方提供的所有产品或服务的月活跃用户数在前一个自然月超过3亿月活跃用户数，则您必须向许可人申请许可，许可人可自行决定向您授予许可。除非许可人另行明确授予您该等权利，否则您无权行使本协议项下的任何权利。\n\n3.使用限制。\na. 您对本模型作品的使用必须遵守适用法律法规（包括贸易合规法律法规），并遵守《服务协议》(https://kolors.kuaishou.com/agreement)。您必须将本第 3(a) 和 3(b) 条中提及的使用限制作为可执行条款纳入任何规范本模型作品使用和/或分发的协议（例如许可协议、使用条款等），并且您必须向您分发的后续用户发出通知，告知其本模型作品受本第 3(a) 和 3(b) 条中的使用限制约束。\nb. 您不得使用本模型作品或本模型作品的任何输出或成果来改进任何其他模型（本模型或其模型衍生品除外）。\n\n4.知识产权。\na. 我们保留材料的所有权及其相关知识产权。在遵守本协议条款和条件的前提下，对于您制作的材料的任何衍生作品和修改，您是且将是此类衍生作品和修改的所有者。\nb.  本协议不授予任何商标、商号、服务标记或产品名称的标识许可，除非出于描述和分发本模型作品的合理和惯常用途。\nc. 如果您对我们或任何个人或实体提起诉讼或其他程序（包括诉讼中的交叉索赔或反索赔），声称材料或任何输出或任何上述内容的任何部分侵犯您拥有或可许可的任何知识产权或其他权利，则根据本协议授予您的所有许可应于提起此类诉讼或其他程序之日起终止。\n\n5. 免责声明和责任限制。\na.  本模型作品及其任何输出和结果按“原样”提供，不作任何明示或暗示的保证，包括适销性、非侵权性或适用于特定用途的保证。我们不对材料及其任何输出的安全性或稳定性作任何保证，也不承担任何责任。\nb. 在任何情况下，我们均不对您承担任何损害赔偿责任，包括但不限于因您使用或无法使用材料或其任何输出而造成的任何直接、间接、特殊或后果性损害赔偿责任，无论该损害赔偿责任是如何造成的。\nc. 对于因您使用或分发模型的衍生物而引起的或与之相关的任何第三方索赔，您应提供辩护，赔偿，并使我方免受损害。\n\n6. 存续和终止。\na. 本协议期限自您接受本协议或访问材料之日起开始，并将持续完全有效，直至根据本协议条款和条件终止。\nb. 如果您违反本协议的任何条款或条件，我们可终止本协议。本协议终止后，您必须立即删除并停止使用本模型作品。第 4(a)、4(c)、5和 7 条在本协议终止后仍然有效。\n\n7. 适用法律和管辖权。\na. 本协议及由本协议引起的或与本协议有关的任何争议均受中华人民共和国大陆地区（仅为本协议目的，不包括香港、澳门和台湾）法律管辖，并排除冲突法的适用，且《联合国国际货物销售合同公约》不适用于本协议。\nb. 因本协议引起或与本协议有关的任何争议，由许可人住所地人民法院管辖。\n\n请注意，许可证可能会更新到更全面的版本。 有关许可和版权的任何问题，请通过 kwai-kolors@kuaishou.com 与我们联系。\n \n \n英文版\n\nMODEL LICENSE AGREEMENT\nRelease Date: 2024/7/6\nBy clicking to agree or by using, reproducing, modifying, distributing, performing or displaying any portion or element of the Model Works, You will be deemed to have recognized and accepted the content of this Agreement, which is effective immediately.\n1.   \tDEFINITIONS.\na.    \t“Agreement” shall mean the terms and conditions for use, reproduction, distribution, modification, performance and displaying of the Model Works or any portion or element thereof set forth herein.\nb.   \t“Materials” shall mean, collectively, Us proprietary the Model and Documentation (and any portion thereof) as made available by Us under this Agreement.\nc.  \t“Model” shall mean the large language models, image/video/audio/3D generation models, and multimodal large language models and their software and algorithms, including trained model weights, parameters (including optimizer states), machine-learning model code, inference-enabling code, training-enabling code, fine-tuning enabling code and other elements of the foregoing made publicly available by Us .\nd.   \t“Output” shall mean the information and/or content output of Model or a Model Derivative that results from operating or otherwise using Model or a Model Derivative.\ne.    \t“Model Derivatives” shall mean all: (i) modifications to the Model or any Model Derivative; (ii) works based on the Model or any Model Derivative; or (iii) any other machine learning model which is created by transfer of patterns of the weights, parameters, operations, or Output of the Model or any Model Derivative, to that model in order to cause that model to perform similarly to the Model or a Model Derivative, including distillation methods, methods that use intermediate data representations, or methods based on the generation of synthetic data Outputs or a Model Derivative for training that model. For clarity, Outputs by themselves are not deemed Model Derivatives.\nf.    \t“Model Works” shall mean: (i) the Materials; (ii) Model Derivatives; and (iii) all derivative works thereof.\ng.   \t“Licensor” , “We” or “Us” shall mean the copyright owner or entity authorized by the copyright owner that is granting the License, including the persons or entities that may have rights in the Model and/or distributing the Model.\nh.   \t“Licensee”,  “You” or “Your” shall mean a natural person or legal entity exercising the rights granted by this Agreement and/or using the Model Works for any purpose and in any field of use.\ni.    \t“Third Party” or “Third Parties” shall mean individuals or legal entities that are not under common control with Us or You.\n\n2.   \tLICENSE CONTENT.\na.    \tWe grant You a non-exclusive, worldwide, non-transferable and royalty-free limited license under the intellectual property or other rights owned by Us embodied in or utilized by the Materials to use, reproduce, distribute, create derivative works of (including Model Derivatives), and make modifications to the Materials, only in accordance with the terms of this Agreement and the Acceptable Use Policy, and You must not violate (or encourage or permit anyone else to violate) any term of this Agreement or the Acceptable Use Policy.\nb.   \tYou may, subject to Your compliance with this Agreement, distribute or make available to Third Parties the Model Works, provided that You meet all of the following conditions:\n (i)\tYou must provide all such Third Party recipients of the Model Works or products or services using them the source of the Model and a copy of this Agreement;\n(ii)    You must cause any modified documents to carry prominent notices stating that You changed the documents;\n(iii)\tYou may add Your own copyright statement to Your modifications and, may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Model Derivatives as a whole, provided Your use, reproduction, modification, distribution, performance and display of the work otherwise complies with the terms and conditions of this Agreement.\nc.    \tadditional commercial terms: If, the monthly active users of all products or services made available by or for You, or Your affiliates, does not exceed 300 million monthly active users in the preceding calendar month, Your registration with the Licensor will be deemed to have obtained the corresponding business license; If, the monthly active users of all products or services made available by or for You, or Your affiliates,  is greater than 300 million monthly active users in the preceding calendar month, You must request a license from Licensor, which the Licensor may grant to You in its sole discretion, and You are not authorized to exercise any of the rights under this Agreement unless or until We otherwise expressly grants You such rights.\n\n3.   \tLICENSE RESTRICITIONS.\na.    \tYour use of the Model Works must comply with applicable laws and regulations (including trade compliance laws and regulations) and adhere to the Service Agreement. You must include the use restrictions referenced in these Sections 3(a) and 3(b) as an enforceable provision in any agreement (e.g., license agreement, terms of use, etc.) governing the use and/or distribution of Model Works and You must provide notice to subsequent users to whom You distribute that Model Works are subject to the use restrictions in these Sections 3(a) and 3(b).\nb.   \tYou must not use the Model Works or any Output or results of the Model Works to improve any other large  model (other than Model or Model Derivatives thereof).\n4.   \tINTELLECTUAL PROPERTY.\na.    \tWe retain ownership of all intellectual property rights in and to the Model and derivatives. Conditioned upon compliance with the terms and conditions of this Agreement, with respect to any derivative works and modifications of the Materials that are made by You, You are and will be the owner of such derivative works and modifications.\nb.  \tNo trademark license is granted to use the trade names, trademarks, service marks, or product names of Us, except as required to fulfill notice requirements under this Agreement or as required for reasonable and customary use in describing and redistributing the Materials.\nc.    \tIf You commence a lawsuit or other proceedings (including a cross-claim or counterclaim in a lawsuit) against Us or any person or entity alleging that the Materials or any Output, or any portion of any of the foregoing, infringe any intellectual property or other right owned or licensable by You, then all licenses granted to You under this Agreement shall terminate as of the date such lawsuit or other proceeding is filed. \n5.   \tDISCLAIMERS OF WARRANTY AND LIMITATIONS OF LIABILITY.\na. THE MODEL WORKS AND ANY OUTPUT AND RESULTS THERE FROM ARE PROVIDED  \"AS IS\" WITHOUT ANY EXPRESS OR IMPLIED WARRANTY OF ANY KIND INCLUDING WARRANTIES OF MERCHANTABILITY, NONINFRINGEMENT, OR FITNESS FOR A PARTICULAR PURPOSE. WE MAKE NO WARRANTY AND ASSUME NO RESPONSIBILITY FOR THE SAFETY OR STABILITY OF THE MATERIALS AND ANY OUTPUT THEREFROM.\nb.   IN NO EVENT SHALL WE BE LIABLE TO YOU FOR ANY DAMAGES, INCLUDING, BUT NOT LIMITED TO ANY DIRECT, OR INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING FROM YOUR USE OR INABILITY TO USE THE MATERIALS OR ANY OUTPUT OF IT, NO MATTER HOW IT’S CAUSED.\nc. You will defend, indemnify and hold harmless Us from and against any claim by any third party arising out of or related to Your use or distribution of the Materials.\n\n6.   \tSURVIVAL AND TERMINATION.\na.  The term of this Agreement shall commence upon Your acceptance of this Agreement or access to the Materials and will continue in full force and effect until terminated in accordance with the terms and conditions herein.\nb.  We may terminate this Agreement if You breach any of the terms or conditions of this Agreement. Upon termination of this Agreement, You must promptly delete and cease use of the Model Works. Sections 4(a), 4(c), 5 and 7 shall survive the termination of this Agreement.\n7.   \tGOVERNING LAW AND JURISDICTION.\na.   This Agreement and any dispute arising out of or relating to it will be governed by the laws of China (for the purpose of this agreement only, excluding Hong Kong, Macau, and Taiwan), without regard to conflict of law principles, and the UN Convention on Contracts for the International Sale of Goods does not apply to this Agreement.\nb.   Any disputes arising from or related to this Agreement shall be under the jurisdiction of the People's Court where the Licensor is located. \n\nNote that the license is subject to update to a more comprehensive version.  For any questions related to the license and copyright, please contact us at kwai-kolors@kuaishou.com.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 18.7822265625,
          "content": "<p align=\"left\">\n    English</a>&nbsp ｜ &nbsp<a href=\"README_CN.md\">中文</a>&nbsp\n</p>\n<br><br>\n\n<p align=\"center\">\n    <img src=\"imgs/logo.png\" width=\"400\"/>\n<p>\n<br>\n\n\n<div align=\"center\">\n  <a href='https://huggingface.co/Kwai-Kolors/Kolors'><img src='https://img.shields.io/badge/%F0%9F%A4%97%20Hugging%20Face-HF-yellow'></a> &ensp;\n  <a href=\"https://github.com/Kwai-Kolors/Kolors\"><img src=\"https://img.shields.io/static/v1?label=Kolors Code&message=Github&color=blue&logo=github-pages\"></a> &ensp;\n  <a href=\"https://kwai-kolors.github.io/\"><img src=\"https://img.shields.io/static/v1?label=Team%20Page&message=Page&color=green\"></a> &ensp;\n\n<a href='https://huggingface.co/spaces/Kwai-Kolors/Kolors '><img src='https://img.shields.io/badge/%F0%9F%A4%97%20HF Space-HF-yellow'></a> &ensp;\n  <a href=\"https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf\"><img src=\"https://img.shields.io/static/v1?label=Tech Report&message=Arxiv:Kolors&color=red&logo=arxiv\"></a> &ensp;\n  <a href=\"https://kolors.kuaishou.com/\"><img src=\"https://img.shields.io/static/v1?label=Official Website&message=Page&color=green\"></a> &ensp;\n</div>\n\n\n\n# Kolors: Effective Training of Diffusion Model for Photorealistic Text-to-Image Synthesis\n<figure>\n  <img src=\"imgs/head_final3.png\">\n</figure>\n<br><br>\n\n## Contents\n\n- [🎉 News](#News)\n- [📑 Open-source Plan](#open-source-plan)\n- [📖 Introduction](#Introduction)\n- [📊 Evaluation 🥇🥇🔥🔥](#Evaluation)\n- [🎥 Visualization](#Visualization)\n- [🛠️ Usage](#Usage)\n- [📜 License & Citation & Acknowledgments](#License)\n<br><br>\n\n\n## <a name=\"News\"></a>🎉 News\n* 2024.11.13 🔥 [Kolors-Portrait-with-Flux](https://huggingface.co/spaces/Kwai-Kolors/Kolors-Portrait-with-Flux) and [Kolors-Character-With-Flux](https://huggingface.co/spaces/Kwai-Kolors/Kolors-Character-With-Flux), which enable to preserve identity, are available on HuggingFace Space for free trials! Hope you enjoy it!\n* 2024.09.01 🔥 Kolors-Virtual-Try-On, a virtual try-on demo based on Kolors is released! Enjoy trying on [Kolors-Virtual-Try-On](https://huggingface.co/spaces/Kwai-Kolors/Kolors-Virtual-Try-On), [WeChat post](https://mp.weixin.qq.com/s/Wk_Eq7OAywlrPqNC6zWZJQ).\n\n* 2024.08.06 🔥 Pose ControlNet is released! Please check [ControlNet(Pose)](./controlnet/) for more details.\n\n* 2024.08.01 🔥 The Kolors-Dreambooth-LoRA training and inference code is released! Please check [Dreambooth-LoRA](./dreambooth/) for more details.\n  \n* 2024.07.31 🔥 The Kolors-IP-Adapter-FaceID-Plus weights and inference code is released! Please check [IP-Adapter-FaceID-Plus](./ipadapter_FaceID/) for more details.\n\n* 2024.07.26 🔥 ControlNet and Inpainting Model are released! Please check [ControlNet(Canny, Depth)](./controlnet/) and [Inpainting Model](./inpainting/) for more details.\n\n\n* 2024.07.17 🔥 The Kolors-IP-Adapter-Plus weights and infernce code is released! Please check [IP-Adapter-Plus](./ipadapter/) for more details.\n\n* 2024.07.12 🤗 Kolors is now available in **Diffusers**! Please check [kolors-diffusers](https://huggingface.co/Kwai-Kolors/Kolors-diffusers) or the [example](#using-with-diffusers) below for detail! Thanks to the Diffusers team for their technical support.\n* 2024.07.10 🤖 Kolors supports [ModelScope](https://modelscope.cn/models/Kwai-Kolors/Kolors).\n* 2024.07.09 💥 Kolors supports [ComfyUI](https://github.com/comfyanonymous/ComfyUI#manual-install-windows-linux). Thanks to [@kijai](https://github.com/kijai/ComfyUI-KwaiKolorsWrapper) with his great work.\n* 2024.07.06 🔥🔥🔥 We release **Kolors**, a large text-to-image model trained on billions of text-image pairs. This model is bilingual in both Chinese and English, and supports a context length of 256 tokens. For more technical details, please refer to [technical report](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf).\n* 2024.07.03 📊 Kolors won the second place on [FlagEval Multimodal Text-to-Image Leaderboard](https://flageval.baai.ac.cn/#/leaderboard/multimodal?kind=t2i), excelling particularly in the Chinese and English subjective quality assessment where Kolors took the first place.\n* 2024.07.02 🎉 Congratulations! Our paper on controllable video generation, [DragAnything: Motion Control for Anything using Entity Representation](https://arxiv.org/abs/2403.07420), have been accepted by ECCV 2024.\n* 2024.02.08 🎉 Congratulations! Our paper on generative model evaluation, [Learning Multi-dimensional Human Preference for Text-to-Image Generation](https://wangbohan97.github.io/MPS/), have been accepted by CVPR 2024.\n<br><br>\n\n## <a name=\"open-source-plan\"></a>📑 Open-source Plan\n\n- Kolors (Text-to-Image Model)\n  - [x] Inference \n  - [x] Checkpoints \n  - [x] IP-Adapter\n  - [x] ControlNet (Canny, Depth)\n  - [x] Inpainting\n  - [x] IP-Adapter-FaceID\n  - [x] LoRA\n  - [x] ControlNet (Pose)\n- [x] ComfyUI\n- [x] Gradio\n- [x] Diffusers\n<br><br>\n\n## \n## <a name=\"Introduction\"></a>📖 Introduction\n\nKolors is a large-scale text-to-image generation model based on latent diffusion, developed by the Kuaishou Kolors team. Trained on billions of text-image pairs, Kolors exhibits significant advantages over both open-source and closed-source models in visual quality, complex semantic accuracy, and text rendering for both Chinese and English characters. Furthermore, Kolors supports both Chinese and English inputs, demonstrating strong performance in understanding and generating Chinese-specific content. For more details, please refer to this <a href=\"https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf\">technical report</a></b>.\n<br><br>\n\n## <a name=\"Evaluation\"></a>📊 Evaluation\nWe have collected a comprehensive text-to-image evaluation dataset named KolorsPrompts to compare Kolors with other state-of-the-art open models and closed-source models. KolorsPrompts includes over 1,000 prompts across 14 catagories and 12 evaluation dimensions. The evaluation process incorporates both human and machine assessments. In relevant benchmark evaluations, Kolors demonstrated highly competitive performance, achieving industry-leading standards.\n\n<br><br>\n\n### Human Assessment\n\nFor the human evaluation, we invited 50 imagery experts to conduct comparative evaluations of the results generated by different models. The experts rated the generated images based on three criteria: visual appeal, text faithfulness, and overall satisfaction. In the evaluation, Kolors achieved the highest overall satisfaction score and significantly led in visual appeal compared to other models.\n\n|       Model       | Average Overall Satisfaction | Average Visual Appeal | Average Text Faithfulness |\n| :--------------: | :--------: | :--------: | :--------: |\n|  Adobe-Firefly   |    3.03    |    3.46    |    3.84    |\n| Stable Diffusion 3 |    3.26    |    3.50    |    4.20    |\n|     DALL-E 3      |    3.32    |    3.54    |    4.22    |\n|  Midjourney-v5   |    3.32    |    3.68    |    4.02    |\n| Playground-v2.5  |    3.37    |    3.73    |    4.04    |\n|  Midjourney-v6   |    3.58    |    3.92    |    4.18    |\n|    **Kolors**    |    **3.59**    |    **3.99**    |    **4.17**    |\n\n------\n\n<div style=\"color: gray; font-size: small;\">\n\n**All model results are tested with the April 2024 product versions**\n\n</div>\n<br>\n\n### Machine Assessment\nWe used [MPS](https://arxiv.org/abs/2405.14705) (Multi-dimensional Human Preference Score) on KolorsPrompts as the evaluation metric for machine assessment. Kolors achieved the highest MPS score, which is consistent with the results of the human evaluations.\n\n<div style=\"text-align:center\">\n\n| Models            | Overall MPS |\n|:-------------------:|:-------------:|\n| Adobe-Firefly     | 8.5     |\n| Stable Diffusion 3  | 8.9      |\n| DALL-E 3           |   9.0    |\n| Midjourney-v5     | 9.4      |\n| Playground-v2.5   | 9.8      |\n| Midjourney-v6     | 10.2      |\n| **Kolors**        | **10.3**      |\n</div>\n\n\n<br>\n\nFor more experimental results and details, please refer to our [technical report](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf).\n\n<br><br>\n\n\n## <a name=\"Visualization\"></a>🎥 Visualization\n\n* **High-quality Portrait**\n<div style=\"display: flex; justify-content: space-between;\">\n  <img src=\"imgs/zl8.png\" />\n</div>\n<br>\n\n* **Chinese Elements Generation**\n<div style=\"display: flex; justify-content: space-between;\">\n  <img src=\"imgs/cn_all.png\"/>\n</div>\n<br>\n\n* **Complex Semantic Understanding**\n<div style=\"display: flex; justify-content: space-between;\">\n  <img src=\"imgs/fz_all.png\"/>\n</div>\n<br>\n\n* **Text Rendering**\n<div style=\"display: flex; justify-content: space-between;\">\n  <img src=\"imgs/wz_all.png\" />\n</div>\n<br>\n</div>\n\nThe visualized case prompts mentioned above can be accessed [here](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/prompt_vis.txt). \n<br><br>\n\n## <a name=\"Usage\"></a>🛠️ Usage\n\n### Requirements\n\n* Python 3.8 or later\n* PyTorch 1.13.1 or later\n* Transformers 4.26.1 or later\n* Recommended: CUDA 11.7 or later\n<br>\n\n1. Repository Cloning and Dependency Installation\n\n```bash\napt-get install git-lfs\ngit clone https://github.com/Kwai-Kolors/Kolors\ncd Kolors\nconda create --name kolors python=3.8\nconda activate kolors\npip install -r requirements.txt\npython3 setup.py install\n```\n2. Weights download（[link](https://huggingface.co/Kwai-Kolors/Kolors)）：\n```bash\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors --local-dir weights/Kolors\n```\nor\n```bash\ngit lfs clone https://huggingface.co/Kwai-Kolors/Kolors weights/Kolors\n```\n3. Inference：\n```bash\npython3 scripts/sample.py \"一张瓢虫的照片，微距，变焦，高质量，电影，拿着一个牌子，写着“可图”\"\n# The image will be saved to \"scripts/outputs/sample_text.jpg\"\n```\n4. Web demo：\n```bash\npython3 scripts/sampleui.py\n```\n\n### Using with Diffusers\nMake sure you upgrade to the latest version(0.30.0.dev0) of diffusers: \n```\ngit clone https://github.com/huggingface/diffusers\ncd diffusers\npython3 setup.py install\n```\n**Notes:**\n- The pipeline uses the `EulerDiscreteScheduler` by default. We recommend using this scheduler with `guidance scale=5.0` and `num_inference_steps=50`.\n- The pipeline also supports the `EDMDPMSolverMultistepScheduler`. `guidance scale=5.0` and `num_inference_steps=25` is a good default for this scheduler.\n- In addition to Text-to-Image, `KolorsImg2ImgPipeline` also supports Image-to-Image.\n\nAnd then you can run:\n```python\nimport torch\nfrom diffusers import KolorsPipeline\npipe = KolorsPipeline.from_pretrained(\n    \"Kwai-Kolors/Kolors-diffusers\", \n    torch_dtype=torch.float16, \n    variant=\"fp16\"\n).to(\"cuda\")\nprompt = '一张瓢虫的照片，微距，变焦，高质量，电影，拿着一个牌子，写着\"可图\"'\nimage = pipe(\n    prompt=prompt,\n    negative_prompt=\"\",\n    guidance_scale=5.0,\n    num_inference_steps=50,\n    generator=torch.Generator(pipe.device).manual_seed(66),\n).images[0]\nimage.show()\n```\n\n### IP-Adapter-Plus\n\nWe provide IP-Adapter-Plus weights and inference code, detailed in the [ipadapter](./ipadapter/README.md).\n\n```bash\n# Weights download\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-IP-Adapter-Plus --local-dir weights/Kolors-IP-Adapter-Plus\n```\n\n```bash\n# Inference：\npython3 ipadapter/sample_ipadapter_plus.py ./ipadapter/asset/test_ip.jpg \"穿着黑色T恤衫，上面中文绿色大字写着“可图”\"\n\npython3 ipadapter/sample_ipadapter_plus.py ./ipadapter/asset/test_ip2.png \"一只可爱的小狗在奔跑\"\n\n# The image will be saved to \"scripts/outputs/\"\n```\n\n### ControlNet\n\nWe provide three ControlNet weights and inference code, detailed in the [controlnet](./controlnet/README.md).\n\n```bash\n# Weights download\n\n# Canny - ControlNet\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-ControlNet-Canny --local-dir weights/Kolors-ControlNet-Canny\n\n# Depth - ControlNet\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-ControlNet-Depth --local-dir weights/Kolors-ControlNet-Depth\n\n# Pose - ControlNet\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-ControlNet-Pose --local-dir weights/Kolors-ControlNet-Pose\n```\n\nIf you intend to utilize the depth estimation network, please make sure to download its corresponding model weights.\n```\nhuggingface-cli download lllyasviel/Annotators ./dpt_hybrid-midas-501f0c75.pt --local-dir ./controlnet/annotator/ckpts\n```\n\nThanks to [DWPose](https://github.com/IDEA-Research/DWPose/tree/onnx?tab=readme-ov-file), you can utilize the pose estimation network. Please download the Pose model dw-ll_ucoco_384.onnx ([baidu](https://pan.baidu.com/s/1nuBjw-KKSxD_BkpmwXUJiw?pwd=28d7), [google](https://drive.google.com/file/d/12L8E2oAgZy4VACGSK9RaZBZrfgx7VTA2/view?usp=sharing)) and Det model yolox_l.onnx ([baidu](https://pan.baidu.com/s/1fpfIVpv5ypo4c1bUlzkMYQ?pwd=mjdn), [google](https://drive.google.com/file/d/1w9pXC8tT0p9ndMN-CArp1__b2GbzewWI/view?usp=sharing)). Then please put them into `controlnet/annotator/ckpts/`.\n\n\n```bash\n# Inference：\n\npython ./controlnet/sample_controlNet.py ./controlnet/assets/woman_1.png 一个漂亮的女孩，高品质，超清晰，色彩鲜艳，超高分辨率，最佳品质，8k，高清，4K Canny\n\npython ./controlnet/sample_controlNet.py ./controlnet/assets/woman_2.png 新海诚风格，丰富的色彩，穿着绿色衬衫的女人站在田野里，唯美风景，清新明亮，斑驳的光影，最好的质量，超细节，8K画质 Depth\n\npython ./controlnet/sample_controlNet.py ./controlnet/assets/woman_3.png 一位穿着紫色泡泡袖连衣裙、戴着皇冠和白色蕾丝手套的女孩双手托脸，高品质，超清晰，色彩鲜艳，超高分辨率，最佳品质，8k，高清，4K Pose\n\n# The image will be saved to \"controlnet/outputs/\"\n```\n\n\n### Inpainting\n\nWe provide Inpainting weights and inference code, detailed in the [inpainting](./inpainting/README.md).\n\n```bash\n# Weights download\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-Inpainting --local-dir weights/Kolors-Inpainting\n```\n\n```bash\n# Inference：\npython3 inpainting/sample_inpainting.py ./inpainting/asset/3.png ./inpainting/asset/3_mask.png 穿着美少女战士的衣服，一件类似于水手服风格的衣服，包括一个白色紧身上衣，前胸搭配一个大大的红色蝴蝶结。衣服的领子部分呈蓝色，并且有白色条纹。她还穿着一条蓝色百褶裙，超高清，辛烷渲染，高级质感，32k，高分辨率，最好的质量，超级细节，景深\n\npython3 inpainting/sample_inpainting.py ./inpainting/asset/4.png ./inpainting/asset/4_mask.png 穿着钢铁侠的衣服，高科技盔甲，主要颜色为红色和金色，并且有一些银色装饰。胸前有一个亮起的圆形反应堆装置，充满了未来科技感。超清晰，高质量，超逼真，高分辨率，最好的质量，超级细节，景深\n\n# The image will be saved to \"scripts/outputs/\"\n```\n\n### IP-Adapter-FaceID-Plus\n\nWe provide IP-Adapter-FaceID-Plus weights and inference code, detailed in the [ipadapter_FaceID](./ipadapter_FaceID/README.md).\n\n```bash\n# Weights download\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-IP-Adapter-FaceID-Plus --local-dir weights/Kolors-IP-Adapter-FaceID-Plus\n```\n\n```bash\n# Inference：\npython ipadapter_FaceID/sample_ipadapter_faceid_plus.py ./ipadapter_FaceID/assets/image1.png \"穿着晚礼服，在星光下的晚宴场景中，烛光闪闪，整个场景洋溢着浪漫而奢华的氛围\"\n\npython ipadapter_FaceID/sample_ipadapter_faceid_plus.py ./ipadapter_FaceID/assets/image2.png \"西部牛仔，牛仔帽，荒野大镖客，背景是西部小镇，仙人掌，,日落余晖, 暖色调, 使用XT4胶片拍摄, 噪点, 晕影, 柯达胶卷，复古\"\n\n# The image will be saved to \"scripts/outputs/\"\n```\n\n### Dreambooth-LoRA\n\nWe provide LoRA training and inference code, detailed in the [Dreambooth-LoRA](./dreambooth/README.md).\n\n```bash\n# Training:\nsh train.sh\n```\n\n```bash\n# Inference：\npython infer_dreambooth.py \"ktxl狗在草地上跑\"\n```\n\n<br><br>\n\n## <a name=\"License\"></a>📜 License & Citation & Acknowledgments\n\n### License\n\nKolors weights are fully open for academic research. If you intend to use the Kolors model or its derivatives for commercial purposes under the licensing terms and conditions, please send the [questionnaire](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/可图KOLORS模型商业授权申请书.docx) to kwai-kolors@kuaishou.com to register with the licensor. If the monthly active users of all products or services made available by or for Licensee does not exceed 300 million monthly active users in the preceding calendar month, Your registration with the Licensor will be deemed to have obtained the corresponding business license; If, the monthly active users of all products or services made available by or for Licensee is greater than 300 million monthly active users in the preceding calendar month, You must request a license from Licensor, which the Licensor may grant to You in its sole discretion, and You are not authorized to exercise any of the rights under this Agreement unless or until We otherwise expressly grants You such rights.\n\n \nWe open-source Kolors to promote the development of large text-to-image models in collaboration with the open-source community. The code of this project is open-sourced under the Apache-2.0 license. We sincerely urge all developers and users to strictly adhere to the [open-source license](MODEL_LICENSE), avoiding the use of the open-source model, code, and its derivatives for any purposes that may harm the country and society or for any services not evaluated and registered for safety. Note that despite our best efforts to ensure the compliance, accuracy, and safety of the data during training, due to the diversity and combinability of generated content and the probabilistic randomness affecting the model, we cannot guarantee the accuracy and safety of the output content, and the model is susceptible to misleading. This project does not assume any legal responsibility for any data security issues, public opinion risks, or risks and liabilities arising from the model being misled, abused, misused, or improperly utilized due to the use of the open-source model and code.\n\n### Citation\nIf you find our work helpful, please cite it!\n\n```\n@article{kolors,\n  title={Kolors: Effective Training of Diffusion Model for Photorealistic Text-to-Image Synthesis},\n  author={Kolors Team},\n  journal={arXiv preprint},\n  year={2024}\n}\n```\n\n### Acknowledgments\n- Thanks to [Diffusers](https://github.com/huggingface/diffusers) for providing the codebase.\n- Thanks to [ChatGLM3](https://github.com/THUDM/ChatGLM3) for providing the powerful Chinese language model.\n<br>\n\n### Contact Us\n\nIf you want to leave a message for our R&D team and product team, feel free to join our [WeChat group](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/wechat.png). You can also contact us via email (kwai-kolors@kuaishou.com).\n\n[![Star History Chart](https://api.star-history.com/svg?repos=Kwai-Kolors/Kolors&type=Date)](https://star-history.com/#Kwai-Kolors/Kolors&Date)\n"
        },
        {
          "name": "README_CN.md",
          "type": "blob",
          "size": 18.0400390625,
          "content": "<p align=\"left\">\n    中文</a>&nbsp ｜ &nbsp<a href=\"README.md\">English</a>&nbsp\n</p>\n<!-- <br><br> -->\n\n<p align=\"center\">\n    <img src=\"imgs/logo.png\" width=\"400\"/>\n<p>\n<br>\n\n<!-- <div align=\"center\">\n\n<a href='https://kwai-kolors.github.io/'><img src='https://img.shields.io/badge/Team-Page-green'></a> <a href=''><img src='https://img.shields.io/badge/Technique-Report-red'></a> [![Teampage](https://img.shields.io/badge/Website-Page-blue)](https://kolors.kuaishou.com/)\n\n</div> -->\n\n<div align=\"center\">\n  <a href='https://huggingface.co/Kwai-Kolors/Kolors'><img src='https://img.shields.io/badge/%F0%9F%A4%97%20Hugging%20Face-HF-yellow'></a> &ensp;\n  <a href=\"https://github.com/Kwai-Kolors/Kolors\"><img src=\"https://img.shields.io/static/v1?label=Kolors Code&message=Github&color=blue&logo=github-pages\"></a> &ensp;\n  <a href=\"https://kwai-kolors.github.io/\"><img src=\"https://img.shields.io/static/v1?label=Team%20Page&message=Page&color=green\"></a> &ensp;\n\n<a href='https://huggingface.co/spaces/Kwai-Kolors/Kolors '><img src='https://img.shields.io/badge/%F0%9F%A4%97%20HF Space-HF-yellow'></a> &ensp;\n  <a href=\"https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf\"><img src=\"https://img.shields.io/static/v1?label=Tech Report&message=Arxiv:Kolors&color=red&logo=arxiv\"></a> &ensp;\n  <a href=\"https://kolors.kuaishou.com/\"><img src=\"https://img.shields.io/static/v1?label=Official Website&message=Page&color=green\"></a> &ensp;\n</div>\n\n\n\n\n</p>\n\n# Kolors: Effective Training of Diffusion Model for Photorealistic Text-to-Image Synthesis\n<figure>\n  <img src=\"imgs/head_final3.png\">\n</figure>\n<br><br>\n\n##  目录\n\n- [🎉 新闻](#新闻)\n- [📑 开源计划](#开源计划)\n- [📖 模型介绍](#模型介绍)\n- [📊 评测表现 🥇🥇🔥🔥](#评测表现)\n- [🎥 可视化](#可视化)\n- [🛠️ 快速使用](#快速使用)\n- [📜 协议、引用、致谢](#协议引用)\n<br><br>\n\n## <a name=\"新闻\"></a>🎉 新闻\n* 2024.09.01 🔥 Kolors-Virtual-Try-On 可图虚拟试衣项目体验demo已发布！欢迎体验 [Kolors-Virtual-Try-On](https://huggingface.co/spaces/Kwai-Kolors/Kolors-Virtual-Try-On)， [可图公众号](https://mp.weixin.qq.com/s/Wk_Eq7OAywlrPqNC6zWZJQ)。\n  \n* 2024.08.06 🔥 Pose ControlNet 已发布! 请查看 [ControlNet(Pose)](./controlnet/) 获取详细信息。\n\n* 2024.08.01 🔥 Kolors-Dreambooth-LoRA 的训练和推理代码已发布！请查看 [Dreambooth-LoRA](./dreambooth/) 获取详细信息。\n\n* 2024.07.31 🔥 Kolors-IP-Adapter-FaceID-Plus 的权重和推理代码已发布！请查看 [IP-Adapter-FaceID-Plus](./ipadapter_FaceID/) 获取详细信息。\n\n* 2024.07.26 🔥 Kolors发布了ControlNet和Inpainting Model! 请查看 [ControlNet(Canny, Depth)](./controlnet/) 和[Inpainting Model](./inpainting/) 获取详细信息。\n\n* 2024.07.17 🔥 Kolors-IP-Adapter-Plus 的权重和推理代码已发布！请查看 [IP-Adapter-Plus](./ipadapter/) 获取详细信息。\n\n* 2024.07.12 🤗 Kolors 已支持 **Diffusers**! 使用方式可参考 [kolors-diffusers](https://huggingface.co/Kwai-Kolors/Kolors-diffusers)或[下面的例子](#using-with-diffusers) ! 感谢 Diffusers 官方提供的技术支持。\n* 2024.07.10 🤖 Kolors 支持了 [ModelScope](https://modelscope.cn/models/Kwai-Kolors/Kolors).\n* 2024.07.09 💥 Kolors 支持了 [ComfyUI](https://github.com/comfyanonymous/ComfyUI#manual-install-windows-linux)，感谢 [@kijai](https://github.com/kijai/ComfyUI-KwaiKolorsWrapper) 的工作。\n* 2024.07.06 🔥🔥🔥 我们开源了基于隐空间扩散的文生图大模型 **Kolors** ，该模型基于数十亿图文对进行训练，支持256的上下文token数，支持中英双语，技术细节参考[技术报告](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf)。\n* 2024.07.03 📊 Kolors 在智源研究院 [FlagEval 多模态文生图](https://flageval.baai.ac.cn/#/leaderboard/multimodal?kind=t2i)评测中取得第二名，其中中文主观质量、英文主观质量两个单项排名第一。\n* 2024.07.02 🎉 祝贺，可图项目组提出的可控视频生成方法 [DragAnything: Motion Control for Anything using Entity Representation](https://arxiv.org/abs/2403.07420)  被 ECCV 2024 接收。\n* 2024.02.08 🎉 祝贺，可图项目组提出的生成模型评估方法 [Learning Multi-dimensional Human Preference for Text-to-Image Generation](https://wangbohan97.github.io/MPS/)  被 CVPR 2024 接收。\n<br><br>\n\n## <a name=\"开源计划\"></a>📑 开源计划\n\n- Kolors (Text-to-Image Model)\n  - [x] Inference \n  - [x] Checkpoints \n  - [x] IP-Adapter\n  - [x] ControlNet (Canny, Depth)\n  - [x] Inpainting\n  - [x] IP-Adapter-FaceID\n  - [x] LoRA\n  - [x] ControlNet (Pose)\n- [x] ComfyUI\n- [x] Gradio\n- [x] Diffusers\n<br><br>\n\n## <a name=\"模型介绍\"></a>📖 模型介绍\n可图大模型是由快手可图团队开发的基于潜在扩散的大规模文本到图像生成模型。Kolors 在数十亿图文对下进行训练，在视觉质量、复杂语义理解、文字生成（中英文字符）等方面，相比于开源/闭源模型，都展示出了巨大的优势。同时，Kolors 支持中英双语，在中文特色内容理解方面更具竞争力。更多的实验结果和细节请查看我们的<a href=\"https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf\">技术报告</a></b>。\n<br><br>\n\n## <a name=\"评测表现\"></a>📊 评测表现\n为了全面比较 Kolors 与其他模型的生成能力，我们构建了包含人工评估、机器评估的全面评测内容。\n在相关基准评测中，Kolors 具有非常有竞争力的表现，达到业界领先水平。我们构建了一个包含14种垂类，12个挑战项，总数量为一千多个 prompt 的文生图评估集 KolorsPrompts。在 KolorsPrompts 上，我们收集了 Kolors 与市面上常见的 SOTA 级别的开源/闭源系统的文生图结果，并进行了人工评测和机器评测。\n<br><br>\n\n### 人工评测\n\n我们邀请了50个具有图像领域知识的专业评估人员对不同模型的生成结果进行对比评估，为生成图像打分，衡量维度为：画面质量、图文相关性、整体满意度三个方面。\nKolors 在整体满意度方面处于最优水平，其中画面质量显著领先其他模型。\n<div style=\"text-align: center;\">\n\n|       模型       | 整体满意度平均分 | 画面质量平均分 | 图文相关性平均分 |\n| :--------------: | :--------: | :--------: | :--------: |\n|  Adobe-Firefly   |    3.03    |    3.46    |    3.84    |\n| Stable Diffusion 3 |    3.26    |    3.50    |    4.20    |\n|     DALL-E 3      |    3.32    |    3.54    |    4.22    |\n|  Midjourney-v5   |    3.32    |    3.68    |    4.02    |\n| Playground-v2.5  |    3.37    |    3.73    |    4.04    |\n|  Midjourney-v6   |    3.58    |    3.92    |    4.18    |\n|    **Kolors**    |    **3.59**    |    **3.99**    |    **4.17**    |\n\n</div>\n\n\n<div style=\"color: gray; font-size: small;\">\n\n**所有模型结果取自 2024.04 的产品版本**\n\n</div>\n<br>\n\n### 机器评测\n我们采用 [MPS](https://arxiv.org/abs/2405.14705) (Multi-dimensional Human preference Score) 来评估上述模型。\n我们以 KolorsPrompts 作为基础评估数据集，计算多个模型的 MPS 指标。Kolors 实现了最高的MPS 指标，这与人工评估的指标一致。\n\n<div style=\"text-align:center\">\n\n| 模型            | MPS综合得分 |\n|-------------------|-------------|\n| Adobe-Firefly     | 8.5     |\n| Stable Diffusion 3  | 8.9      |\n| DALL-E 3           |   9.0    |\n| Midjourney-v5     | 9.4      |\n| Playground-v2.5   | 9.8      |\n| Midjourney-v6     | 10.2      |\n| **Kolors**            | **10.3**      |\n</div>\n\n\n<br>\n\n更多的实验结果和细节请查看我们的技术报告。点击[技术报告](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf)。\n<br><br>\n\n## <a name=\"可视化\"></a>🎥 可视化\n\n* **高质量人像**\n<div style=\"display: flex; justify-content: space-between;\">\n  <img src=\"imgs/zl8.png\" />\n</div>\n<br>\n\n* **中国元素**\n<div style=\"display: flex; justify-content: space-between;\">\n  <img src=\"imgs/cn_all.png\"/>\n</div>\n<br>\n\n* **复杂语义理解**\n<div style=\"display: flex; justify-content: space-between;\">\n  <img src=\"imgs/fz_all.png\"/>\n</div>\n<br>\n\n* **文字绘制**\n<div style=\"display: flex; justify-content: space-between;\">\n  <img src=\"imgs/wz_all.png\" />\n</div>\n<br>\n</div>\n\n上述可视化 case，可以点击[可视化prompts](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/prompt_vis.txt) 获取\n<br><br>\n\n## <a name=\"快速使用\"></a>🛠️ 快速使用\n\n### 要求\n\n* python 3.8及以上版本\n* pytorch 1.13.1及以上版本\n* transformers 4.26.1及以上版本\n* 建议使用CUDA 11.7及以上\n<br>\n\n1、仓库克隆及依赖安装\n```bash\napt-get install git-lfs\ngit clone https://github.com/Kwai-Kolors/Kolors\ncd Kolors\nconda create --name kolors python=3.8\nconda activate kolors\npip install -r requirements.txt\npython3 setup.py install\n```\n2、模型权重下载（[链接](https://huggingface.co/Kwai-Kolors/Kolors)）：\n```bash\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors --local-dir weights/Kolors\n```\n或者\n```bash\ngit lfs clone https://huggingface.co/Kwai-Kolors/Kolors weights/Kolors\n```\n3、模型推理：\n```bash\npython3 scripts/sample.py \"一张瓢虫的照片，微距，变焦，高质量，电影，拿着一个牌子，写着“可图”\"\n# The image will be saved to \"scripts/outputs/sample_text.jpg\"\n```\n4、 Web demo：\n```bash\npython3 scripts/sampleui.py\n```\n\n### 在 Diffusers 中使用\n确保您安装了最新版本的 `diffusers`(0.30.0.dev0): \n```\ngit clone https://github.com/huggingface/diffusers\ncd diffusers\npython3 setup.py install\n```\n**注意:**\n- KolorsPipeline 默认使用`EulerDiscreteScheduler` 作为噪声调度器。我们推荐使用该调度器时搭配 `guidance scale=5.0` 及 `num_inference_steps=50`。\n- KolorsPipeline 同时支持 `EDMDPMSolverMultistepScheduler`。在使用该噪声调度器时，推荐使用参数 `guidance scale=5.0`及`num_inference_steps=25`。\n- 除了文生图能力，`KolorsImg2ImgPipeline` 同时也支持图文生图功能。\n\n运行以下指令进行图像生成:\n```python\nimport torch\nfrom diffusers import KolorsPipeline\npipe = KolorsPipeline.from_pretrained(\n    \"Kwai-Kolors/Kolors-diffusers\", \n    torch_dtype=torch.float16, \n    variant=\"fp16\"\n).to(\"cuda\")\nprompt = '一张瓢虫的照片，微距，变焦，高质量，电影，拿着一个牌子，写着\"可图\"'\nimage = pipe(\n    prompt=prompt,\n    negative_prompt=\"\",\n    guidance_scale=5.0,\n    num_inference_steps=50,\n    generator=torch.Generator(pipe.device).manual_seed(66),\n).images[0]\nimage.show()\n```\n### IP-Adapter-Plus\n\n我们提供了 IP-Adapter-Plus 的参数和代码, 详细信息见 [ipadapter](./ipadapter/README.md).\n\n```bash\n# Weights download\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-IP-Adapter-Plus --local-dir weights/Kolors-IP-Adapter-Plus\n```\n\n```bash\n# Inference：\npython3 ipadapter/sample_ipadapter_plus.py ./ipadapter/asset/test_ip.jpg \"穿着黑色T恤衫，上面中文绿色大字写着“可图”\"\n\npython3 ipadapter/sample_ipadapter_plus.py ./ipadapter/asset/test_ip2.png \"一只可爱的小狗在奔跑\"\n\n# The image will be saved to \"scripts/outputs/\"\n```\n\n\n### ControlNet\n\n我们提供了三个类型的ControlNet参数和代码，详细信息见[controlnet](./controlnet/README.md)。\n\n```bash\n# Weights download\n\n# Canny - ControlNet\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-ControlNet-Canny --local-dir weights/Kolors-ControlNet-Canny\n\n# Depth - ControlNet\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-ControlNet-Depth --local-dir weights/Kolors-ControlNet-Depth\n\n# Pose - ControlNet\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-ControlNet-Pose --local-dir weights/Kolors-ControlNet-Pose\n```\n如果你打算使用深度估计网络，请确保下载其相应的模型权重。\n```\nhuggingface-cli download lllyasviel/Annotators ./dpt_hybrid-midas-501f0c75.pt --local-dir ./controlnet/annotator/ckpts  \n```\n\n感谢[DWPose](https://github.com/IDEA-Research/DWPose/tree/onnx?tab=readme-ov-file)，你可以使用姿态预测网络。 请下载姿态模型 dw-ll_ucoco_384.onnx ([baidu](https://pan.baidu.com/s/1nuBjw-KKSxD_BkpmwXUJiw?pwd=28d7), [google](https://drive.google.com/file/d/12L8E2oAgZy4VACGSK9RaZBZrfgx7VTA2/view?usp=sharing)) 和检测模型 yolox_l.onnx ([baidu](https://pan.baidu.com/s/1fpfIVpv5ypo4c1bUlzkMYQ?pwd=mjdn), [google](https://drive.google.com/file/d/1w9pXC8tT0p9ndMN-CArp1__b2GbzewWI/view?usp=sharing))。然后请将它们放入 `controlnet/annotator/ckpts/`。\n\n\n```bash\n# Inference：\n\npython ./controlnet/sample_controlNet.py ./controlnet/assets/woman_1.png 一个漂亮的女孩，高品质，超清晰，色彩鲜艳，超高分辨率，最佳品质，8k，高清，4K Canny\n\npython ./controlnet/sample_controlNet.py ./controlnet/assets/woman_2.png 新海诚风格，丰富的色彩，穿着绿色衬衫的女人站在田野里，唯美风景，清新明亮，斑驳的光影，最好的质量，超细节，8K画质 Depth\n\npython ./controlnet/sample_controlNet.py ./controlnet/assets/woman_3.png 一位穿着紫色泡泡袖连衣裙、戴着皇冠和白色蕾丝手套的女孩双手托脸，高品质，超清晰，色彩鲜艳，超高分辨率，最佳品质，8k，高清，4K Pose\n\n# The image will be saved to \"controlnet/outputs/\"\n```\n\n\n### Inpainting\n\n我们提供了 Inpainting 的参数和代码, 详细信息见 [inpainting](./inpainting/README.md).\n\n```bash\n# Weights download\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-Inpainting --local-dir weights/Kolors-Inpainting\n```\n\n```bash\n# Inference：\npython3 inpainting/sample_inpainting.py ./inpainting/asset/3.png ./inpainting/asset/3_mask.png 穿着美少女战士的衣服，一件类似于水手服风格的衣服，包括一个白色紧身上衣，前胸搭配一个大大的红色蝴蝶结。衣服的领子部分呈蓝色，并且有白色条纹。她还穿着一条蓝色百褶裙，超高清，辛烷渲染，高级质感，32k，高分辨率，最好的质量，超级细节，景深\n\npython3 inpainting/sample_inpainting.py ./inpainting/asset/4.png ./inpainting/asset/4_mask.png 穿着钢铁侠的衣服，高科技盔甲，主要颜色为红色和金色，并且有一些银色装饰。胸前有一个亮起的圆形反应堆装置，充满了未来科技感。超清晰，高质量，超逼真，高分辨率，最好的质量，超级细节，景深\n\n# The image will be saved to \"scripts/outputs/\"\n```\n\n### IP-Adapter-FaceID-Plus\n\n我们提供了 IP-Adapter-FaceID-Plus 的参数和代码, 详细信息见 [ipadapter_FaceID](./ipadapter_FaceID/README.md).\n\n```bash\n# Weights download\nhuggingface-cli download --resume-download Kwai-Kolors/Kolors-IP-Adapter-FaceID-Plus --local-dir weights/Kolors-IP-Adapter-FaceID-Plus\n```\n\n```bash\n# Inference：\npython ipadapter_FaceID/sample_ipadapter_faceid_plus.py ./ipadapter_FaceID/assets/image1.png \"穿着晚礼服，在星光下的晚宴场景中，烛光闪闪，整个场景洋溢着浪漫而奢华的氛围\"\n\npython ipadapter_FaceID/sample_ipadapter_faceid_plus.py ./ipadapter_FaceID/assets/image2.png \"西部牛仔，牛仔帽，荒野大镖客，背景是西部小镇，仙人掌，,日落余晖, 暖色调, 使用XT4胶片拍摄, 噪点, 晕影, 柯达胶卷，复古\"\n\n# The image will be saved to \"scripts/outputs/\"\n```\n\n### Dreambooth-LoRA\n\n我们提供了Dreambooth-LoRA 的训练和推理代码，详细信息见 [Dreambooth-LoRA](./dreambooth/README.md).\n\n```bash\n# Training:\nsh train.sh\n```\n\n```bash\n# Inference：\npython infer_dreambooth.py \"ktxl狗在草地上跑\"\n```\n\n<br><br>\n\n## <a name=\"协议引用\"></a>📜协议、引用、致谢\n\n\n### 协议\n**Kolors**（可图）权重对学术研究完全开放，若您期望基于本模型协议的许可条件与限制，将可图KOLORS模型或其衍生品用作商业目的，请您将[问卷](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/可图KOLORS模型商业授权申请书.docx)发送至邮箱kwai-kolors@kuaishou.com，以向许可方登记。若您提供的所有产品或服务的月活跃用户数在前一个自然月未超过3亿月活跃用户数，则您向许可方进行登记，将被视为获得相应的商业许可；若您提供的所有产品或服务的月活跃用户数在前一个自然月超过3亿月活跃用户数，则您必须向许可人申请许可，许可人可自行决定向您授予许可。\n\n本开源模型旨在与开源社区共同推进文生图大模型技术的发展。本项目代码依照 Apache-2.0 协议开源，模型权重需要遵循本《模型许可协议》，我们恳请所有开发者和用户严格遵守[开源协议](MODEL_LICENSE)，避免将开源模型、代码及其衍生物用于任何可能对国家和社会造成危害的用途，或用于任何未经安全评估和备案的服务。需要注意，尽管模型在训练中我们尽力确保数据的合规性、准确性和安全性，但由于视觉生成模型存在生成多样性和可组合性等特点，以及生成模型受概率随机性因素的影响，模型无法保证输出内容的准确性和安全性，且模型易被误导。本项目不对因使用开源模型和代码而导致的任何数据安全问题、舆情风险或因模型被误导、滥用、传播、不当利用而产生的风险和责任承担任何法律责任。\n\n<br>\n\n### 引用\n如果你觉得我们的工作对你有帮助，欢迎引用！\n\n```\n@article{kolors,\n  title={Kolors: Effective Training of Diffusion Model for Photorealistic Text-to-Image Synthesis},\n  author={Kolors Team},\n  journal={arXiv preprint},\n  year={2024}\n}\n```\n<br>\n\n### 致谢\n- 感谢 [Diffusers](https://github.com/huggingface/diffusers) 提供的codebase\n- 感谢 [ChatGLM3](https://github.com/THUDM/ChatGLM3) 提供的强大中文语言模型\n<br>\n\n### 联系我们\n\n如果你想给我们的研发团队和产品团队留言，欢迎加入我们的[微信群](https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/wechat.png)。当然也可以通过邮件（kwai-kolors@kuaishou.com）联系我们。\n\n\n## Star History\n\n[![Star History Chart](https://api.star-history.com/svg?repos=Kwai-Kolors/Kolors&type=Date)](https://star-history.com/#Kwai-Kolors/Kolors&Date)\n"
        },
        {
          "name": "controlnet",
          "type": "tree",
          "content": null
        },
        {
          "name": "dreambooth",
          "type": "tree",
          "content": null
        },
        {
          "name": "imgs",
          "type": "tree",
          "content": null
        },
        {
          "name": "inpainting",
          "type": "tree",
          "content": null
        },
        {
          "name": "ipadapter",
          "type": "tree",
          "content": null
        },
        {
          "name": "ipadapter_FaceID",
          "type": "tree",
          "content": null
        },
        {
          "name": "kolors",
          "type": "tree",
          "content": null
        },
        {
          "name": "requirements.txt",
          "type": "blob",
          "size": 0.357421875,
          "content": "fire\ntriton\npydantic==2.8.2\naccelerate==0.27.2\ndeepspeed==0.8.1\nhuggingface-hub==0.23.4\nimageio==2.25.1\nnumpy==1.21.6\nomegaconf==2.3.0\npandas==1.3.5\nPillow==9.4.0\ntokenizers==0.13.2\ntorch==1.13.1\ntorchvision==0.14.1\ntransformers==4.42.4\nxformers==0.0.16\nsafetensors==0.3.3\ndiffusers==0.28.2\nsentencepiece==0.1.99\ngradio==4.37.2\nopencv-python\neinops\ntimm\nonnxruntime\n"
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "setup.py",
          "type": "blob",
          "size": 0.2568359375,
          "content": "from setuptools import setup, find_packages\n\nsetup(\n    name=\"kolors\",\n    version=\"0.1\",\n    author=\"Kolors\",\n    description=\"The training and inference code for Kolors models.\",\n    packages=find_packages(),\n    install_requires=[],\n    dependency_links=[],\n)\n"
        }
      ]
    }
  ]
}