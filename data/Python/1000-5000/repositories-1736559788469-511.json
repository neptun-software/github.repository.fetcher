{
  "metadata": {
    "timestamp": 1736559788469,
    "page": 511,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjUyMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "lektor/lektor",
      "stars": 3865,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".codecov.yml",
          "type": "blob",
          "size": 0.18359375,
          "content": "# https://codecov.io/gh/lektor/lektor/\ncomment: false\ncoverage:\n  precision: 2\n  range:\n    - 70.0\n    - 100.0\n  round: down\n  status:\n    changes: false\n    patch: true\n    project: true\n"
        },
        {
          "name": ".editorconfig",
          "type": "blob",
          "size": 0.5302734375,
          "content": "# -*- mode: conf-unix; -*-\n\n# EditorConfig is awesome: http://EditorConfig.org\n\n# top-most EditorConfig file\nroot = true\n\n# defaults\n[*]\nend_of_line = lf\ninsert_final_newline = false\nindent_style = space\n\n[*.{ini,py,rst}]\nindent_size = 4\ntrim_trailing_whitespace = true\ninsert_final_newline = true\nmax_line_length = 88\n\n[*.{js,jsx,ts,tsx,json}]\nindent_size = 2\ninsert_final_newline = true\n\n[*.{html,css,scss}]\nindent_size = 2\ntrim_trailing_whitespace = true\ninsert_final_newline = true\n\n[*.yml]\nindent_size = 2\ntrim_trailing_whitespace = true\n"
        },
        {
          "name": ".git-blame-ignore-revs",
          "type": "blob",
          "size": 0.9990234375,
          "content": "# Since version 2.23 (released in August 2019), git-blame has a feature\n# to ignore or bypass certain commits.\n#\n# This file contains a list of commits that are not likely what you\n# are looking for in a blame, such as mass reformatting or renaming.\n# You can set this file as a default ignore file for blame by running\n# the following command.\n#\n# $ git config blame.ignoreRevsFile .git-blame-ignore-revs\n\n# 2023-10-31 - chore: run pyupgrade --py38-plus\ne0eb6fa53aadcb4785c3c44e87710bac9af4ef20\n\n# 2021-09-18 - update pylint\n#19486da795ba5dff7a8abf39302e3ec2c6429dd0\n# (commented out due to non-cosmetic changes related to adding explict\n# encoding arguments.)\n\n# 2021-02-06 - remove useless object inheritance from classes\n3ae5397f4b7344cdd2a745d458e19b8dfe9be2e1\n\n# 2020-11-12 - js: reformat all files with prettier\n7d83658c4fc95b3dc6dc7f8fa3d16e5a471c944f\n\n# 2020-10-23 - Beautify code again (#823)\n3faff8fae62604dcc234b9c2cd22588592c5572b\n\n# 2020-03-28 - lint: update standard\ncaffd8a1259e8aa82635306c522cefd42dca857f\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.1982421875,
          "content": ".DS_Store\n*~\n*.pyc\n*.egg-info\n*.pex\n.cache\n#*\nbuild\ndist\nvenv\nlektor/admin/static\nexample-project\n\ncoverage/\n.coverage\n.coverage.*\ncoverage.xml\ncoverage.lcov\n.nyc_output\n.pytest_cache\n.tox\n\nnode_modules\n"
        },
        {
          "name": ".pre-commit-config.yaml",
          "type": "blob",
          "size": 1.3349609375,
          "content": "repos:\n  - repo: https://github.com/ambv/black\n    # black >= 24 is incompatible with reorder-python-imports\n    # See https://github.com/psf/black/issues/4175\n    rev: \"23.12.1\"\n    hooks:\n      - id: black\n  - repo: https://github.com/asottile/reorder_python_imports\n    rev: \"v3.14.0\"\n    hooks:\n      - id: reorder-python-imports\n        args: [\"--py39-plus\"]\n  - repo: https://github.com/asottile/pyupgrade\n    rev: \"v3.19.0\"\n    hooks:\n      - id: pyupgrade\n        args: [\"--py39-plus\"]\n  - repo: https://github.com/pycqa/flake8\n    rev: \"7.1.1\"\n    hooks:\n      - id: flake8\n        language_version: python3\n        additional_dependencies:\n          # NB: autoupdate does not pick up flake8-bugbear since it is a\n          # transitive dependency. Make sure to update flake8-bugbear\n          # manually on a regular basis.\n          - flake8-bugbear==24.10.31\n\n  - repo: local\n    hooks:\n      - id: eslint\n        name: eslint\n        language: node\n        entry: ./frontend/node_modules/eslint/bin/eslint.js --config frontend/eslint.config.mjs --fix --max-warnings 0\n        require_serial: true\n        files: \\.(ts|tsx)$\n      - id: prettier\n        name: prettier\n        language: node\n        entry: ./frontend/node_modules/prettier/bin/prettier.cjs --write --list-different\n        require_serial: true\n        files: \\.(ts|tsx|js|less|ya?ml|md)$\n"
        },
        {
          "name": ".prettierignore",
          "type": "blob",
          "size": 0.07421875,
          "content": "# Jinja template, not valid JS\n/lektor/admin/templates/livereload-worker.js\n"
        },
        {
          "name": "CHANGES.md",
          "type": "blob",
          "size": 47.791015625,
          "content": "# Changelog\n\nThese are all the changes in Lektor since the first public release.\n\n## 3.4.0b12 (2024-05-14)\n\n### Bugs\n\n#### Admin server\n\n- Fix route declaration for the `add-child` endpoint. (Thanks to\n  @mjoerg [#1184])\n\n[#1184]: https://github.com/lektor/lektor/pull/1184\n\n## 3.4.0b11 (2024-02-27)\n\n### Security\n\nPrior to this release it was possible to create files outside of the\n`content` tree using the admin API. (Normally, the admin API should not\nbe made accessible to untrusted parties, since the point of the API to\nto allow for editing of the Lektor project content.)\n\n- Better sanitation of DB file paths, better validation of path passed\n  to `make_editor_session`. ([#1179])\n- Better validation of API parameters. ([#1181])\n\n[#1179]: https://github.com/lektor/lektor/pull/1179\n[#1181]: https://github.com/lektor/lektor/pull/1181\n\n## 3.4.0b10 (2024-01-07)\n\n### Bugs Fixed\n\n#### Admin Server\n\n- Fix `\"re.error: bad escape \\u\"` exception. ([#1177])\n\n[#1177]: https://github.com/lektor/lektor/pull/1177\n\n## 3.4.0b9 (2023-11-12)\n\n### Compatibility\n\n- Drop support for python 3.7. ([#1173])\n- Officially support python 3.12. ([#1167])\n- Remove pin on `werkzeug<3`. ([#1172], [#1171])\n\n### Refactorings\n\nThis release includes a significant continuation of refactoring of the\ncode in `lektor.imagetools` which started in [#1104]:\n\n- We now use Pillow to access image file metadata (e.g. dimensions,\n  format, and EXIF tags). This replaces some homegrown code for\n  reading basic image metadata and `exifread` for EXIF tag access.\n\n- Some internal API has been cleaned up.\n\n- Compatibility with various versions of Pillow has been increased.\n\nSee [#1138] for details.\n\n### Features Removed\n\n- Removed `--no-reload` option to the `lektor server` command. This was added in 3.4.0b4 as part of #1027 and seems no longer necessary since now live-reload can be disabled on a per-window bases (see #1164).\n\n### Features Added\n\n- Added Turkish translation. Thank you [\\@uyar]! ([#1157])\n\n#### Admin GUI\n\n- Replace the _“Edit Pencil”_ with a toolbar containing both an _Edit_\n  button and a toggle that can be used to disable\n  _Live-reload_. ([#1164])\n\n### Bugs Fixed\n\n#### Admin GUI\n\n- Use a real link (`<a href=...`) for the \"Return to Website\" button. ([#1164])\n\n#### Jinja Globals\n\n- Fix `bag()` to object the pad from `site` in the Jinja context, rather than from the Lektor build context. ([#1155])\n\n#### Plugins\n\n- Use symlinks when constructing Lektor's private virtual\n  environment. This fixes issues install plugins on macOS. ([#1161],\n  [#1159])\n\n### Style\n\n- Update prettier, update eslint rules. ([#1153])\n- Update to latest pylint, black, flake8. Use flake8-bugbear. ([#1162])\n- Update npm locks, upgrade esbuild, update tests to React 18 APIs. ([#1170])\n- Apply `pyupgrade --py38-plus` to codebase ([#1174])\n\n[\\@uyar]: https://github.com/uyar\n[#1138]: https://github.com/lektor/lektor/pull/1138\n[#1153]: https://github.com/lektor/lektor/pull/1153\n[#1155]: https://github.com/lektor/lektor/pull/1155\n[#1157]: https://github.com/lektor/lektor/pull/1157\n[#1159]: https://github.com/lektor/lektor/issues/1159\n[#1161]: https://github.com/lektor/lektor/pull/1161\n[#1162]: https://github.com/lektor/lektor/pull/1162\n[#1164]: https://github.com/lektor/lektor/pull/1164\n[#1167]: https://github.com/lektor/lektor/pull/1167\n[#1170]: https://github.com/lektor/lektor/issues/1170\n[#1171]: https://github.com/lektor/lektor/issues/1171\n[#1172]: https://github.com/lektor/lektor/pull/1172\n[#1173]: https://github.com/lektor/lektor/pull/1173\n[#1174]: https://github.com/lektor/lektor/pull/1174\n\n## 3.4.0b8 (2023-06-06)\n\n### Bugs Fixed\n\n- When there are multiple _asset_ trees being merged (i.e. when\n  _themes_ are in use), avoid building shadowed assets. ([#908],\n  [#1147])\n- Fix asset URL resolution in the dev server when asset extensions\n  differ from that of their source. ([#1111], [#1147])\n\n[#908]: https://github.com/lektor/lektor/issues/908\n[#1111]: https://github.com/lektor/lektor/issues/1111\n[#1147]: https://github.com/lektor/lektor/pull/1147\n\n## 3.4.0b7 (2023-06-04)\n\n### Slightly Breaking Changes\n\n- The `--profile` option has been removed from the `lektor build` command. ([#1137])\n\n### Bugs Fixed\n\n- Pin `watchfiles>=0.12`. (Our tests use the `stop_event` parameter of `watchfiles.watch`.)\n- Fix exception from `describe_build_func` when building thumbnails with verbose logging enabled.\n- Fix \"FATAL: exception not rethrown\" message when `lektor server` is stopped. ([#1145])\n- Fix multiple browser new tabs when `lektor server --browse` is used with `LEKTOR_DEV` set ([#1145])\n- Fix mypy errors in `lektor.admin.modules`.\n- Fix `Builder.touch_site_config` so that it actually touches the site\n  config. This fixes the _Refresh Build_ button of the admin\n  UI. ([#1146])\n- Ensure that `Artifact.open` respects the value of its `encoding` argument when opening files. ([#1146])\n- Fix logic flaw in `FileInfo.unchanged` which, under certain\n  circumstances, causes source files to be considered unchanged even\n  if their size (or mtime) is changed. ([#1146])\n\n[#1137]: https://github.com/lektor/lektor/pull/1137\n[#1145]: https://github.com/lektor/lektor/pull/1145\n[#1146]: https://github.com/lektor/lektor/pull/1146\n\n## 3.4.0b6 (2023-05-05)\n\n### Possibly Breaking Changes\n\n- Our Publisher API has changed. This will eventually require updates\n  to any custom Publisher classes provided by Lektor\n  plugins. Previously, the `publish` method of `Publisher` subclasses\n  was passed a `werkzeug.urls.URL` instance as its `target_url`\n  argument. Werkzeug has deprecated the `URL` class, so now the\n  `target_url` will be passed as a string. (The publishers are now\n  responsible for was parsing the target URL themselves.) For the\n  interim, in an effort to avoid immediately breaking existing\n  plugins, we pass a fancy subclass of `str` that implements most of\n  the attributes and methods of `werkzeug.urls.URL`. ([#1143], [#1142])\n\n- Interpret relative paths passed via the `--output-path` command-line\n  parameter relative to the current working directory. Interpret\n  relative paths configured for `output_path` in the _project file_\n  relative to the directory containing the project file (as the\n  [docs](https://www.getlektor.com/docs/project/file/#project) claim\n  should happen). Previously, both paths were interpreted —\n  incorrectly, in both cases — relative to the _project directory_.\n  ([#1103], [#1120])\n\n- The `query` attribute of fields of type `\"url\"` now returns the\n  IRI-encoded (internationalized) version of the URL query. (This\n  matches the existing behavior of the `host`, `path`, and `anchor`\n  attributes.) ([#1143])\n\n### Deprecations\n\n- The (unused) `lektor.db.Pad.make_absolute_url` method is deprecated. ([#1143])\n\n### Features\n\n- We now use [Pillow] (instead of ImageMagick) to generate image\n  thumbnails. Installation of ImageMagick was a significant pain-point\n  for some. In addition the Pillow-based thumbnailing code appears to\n  be noticeably faster than the ImageMagick version. ([#1104])\n\n- A _Preferences Dialog_ has been added to the admin GUI that allows\n  customization of which hotkeys trigger the _Save_, _Edit_,\n  _(Save &) Preview_, and _Search_ actions. ([#1052])\n\n### Bugs Fixed\n\n- Re-export `ImprovedRenderer`, `MarkdownConfig`, and `escape` from\n  `lektor.markdown`. These were removed in [#992] when support for\n  mistune 2.x was added. Restoring them allows most older plugins\n  written for Lektor<3.4 to work, so long as mistune is pinned to\n  version 0.x. ([#1134])\n\n- Better input validation and error reporting for the `dateformat`,\n  `timeformat` and `datetimeformat` jinja filters. Previously, these\n  filters did not handle unexpected input types gracefully. ([#1122],\n  [#1121])\n\n- Allow the user to customize the python [warnings filter] when\n  running the CLI. Previously, Lektor unconditionally set the\n  warnings filter to `\"default\"` (enabling one-shot display of _all_\n  warning types.) Now, if the warnings filter has been explicitly set\n  (via [PYTHONWARNINGS] or [-W][python-W]) it is left\n  alone. ([e2d0274])\n- DB-path URL resolution of relative paths from _virtual source objects_. ([#1133])\n\n- Relative URL-path resolution from pages with \".\" in their slug. ([#1133])\n\n- Avoid the use of `warnings.catch_warnings` which was introduced in\n  [#1113]. Its use resets the warnings registry resulting in undesired\n  repition of seen warnings. ([#1135]).\n\n### Bit-Rot\n\n- Update frontend npm dependencies. ([#1126])\n\n### Other Changes\n\n- Use [watchfiles] instead of `watchdog` when monitoring for file changes. ([#1136])\n\n- Optimization: Thumbnail file names are now generated based on the\n  final thumbnail parameters (e.g. their actual dimensions, rather than\n  their requested dimensions.) This minimizes the possibility of generating\n  multiple identical thumbnails with different file names. ([#1139])\n\n- Tighten [click] constraints on Path parameters. This results in\n  better and earlier error messages when, e.g., a readable file is\n  expected, but a path to a directory is passed. ([#1124])\n\n- We reduced the size of our distribution wheel and sdist files by\n  roughly factor of two by omitting all but the `.woff2` variants of\n  the fonts for the frontend, and by excluding [sourcesContent] from\n  the JS and CSS sourcemaps. ([#1130], [#1115])\n\n[e2d0274]: https://github.com/lektor/lektor/commit/e2d02746a488e4a4d05ba8a01443e7a90315a2fb\n[#1052]: https://github.com/lektor/lektor/pull/1052\n[#1103]: https://github.com/lektor/lektor/issues/1103\n[#1104]: https://github.com/lektor/lektor/pull/1104\n[#1115]: https://github.com/lektor/lektor/issues/1115\n[#1120]: https://github.com/lektor/lektor/pull/1120\n[#1121]: https://github.com/lektor/lektor/issues/1121\n[#1122]: https://github.com/lektor/lektor/pull/1122\n[#1124]: https://github.com/lektor/lektor/pull/1124\n[#1126]: https://github.com/lektor/lektor/pull/1126\n[#1130]: https://github.com/lektor/lektor/pull/1130\n[#1133]: https://github.com/lektor/lektor/pull/1133\n[#1134]: https://github.com/lektor/lektor/pull/1134\n[#1136]: https://github.com/lektor/lektor/pull/1136\n[#1139]: https://github.com/lektor/lektor/pull/1139\n[#1142]: https://github.com/lektor/lektor/issues/1142\n[#1143]: https://github.com/lektor/lektor/pull/1143\n[click]: https://pypi.org/project/click/\n[warnings filter]: https://docs.python.org/3/library/warnings.html#the-warnings-filter\n[PYTHONWARNINGS]: https://docs.python.org/3/using/cmdline.html#envvar-PYTHONWARNINGS\n[python-W]: https://docs.python.org/3/using/cmdline.html#cmdoption-W\n[Pillow]: https://pillow.readthedocs.io/en/stable/\n[sourcesContent]: https://esbuild.github.io/api/#sources-content\n[watchfiles]: https://github.com/samuelcolvin/watchfiles\n\n## 3.4.0b5 (2023-03-08)\n\n### Breaking Changes\n\n- Removed the `lektor dev publish-plugin` command. (To publish a\n  plugin to PyPI, use [twine].) ([#1065])\n\n- Removed `SourceObject.iter_virtual_sources()` from our API. ([#1106])\n\n- Removed support for `config[\"LESSC_EXECUTABLE\"]`. (There is no sign\n  that it has ever been used.) ([edb35f9])\n\n- Removed support for `BuildState.make_named_temporary` method. It has\n  been totally broken for awhile — so clearly it is not used.<br>\n  Also remove _context manager_ protocol support from `BuildState` — it was\n  only there to support `BuildState.make_named_temporary`. ([6f11bad])\n\n### Bugs Fixed\n\n- Fix several issues involving the installation of local plugin packages.\n  We now install plugins into a _bone fide_ virtual environment, rather\n  than using pip’s `--target` parameter. ([#1065], [#1028], [#865])\n\n- Fix template `markdown` filter (broken in [#992]). ([#1102] [#1100])\n\n- Fix dependency tracking to record the `alt` of _virtual sources_ as\n  well as their `path`. ([#1108], [#1007], [#959])\n\n- Fix equality semantics for `Record` and `VirtualSourceObject`. These\n  are now considered “equal” only if their _path_ (including _page\n  number_, in the case of pages), _alt_, and _pad_ all match.\n  Previously (for the most part) only _path_ (without page number) was\n  being checked in `Record.__eq__`. ([#1105], [#1101])\n\n### Cleanup\n\n- Implement our own `@deprecated` decorator, used to mark functions and methods\n  as being deprecated. Remove dependency on `deprecated` package. ([#1113])\n\n- Remove (direct) dependency on [pytz]. Since the inclusion of the\n  `zoneinfo` module in Python>=3.9 (see [PEP 615]), `pytz` is no long\n  necessary. Recent releases of [Babel][babel-2.12] will work with\n  either `pytz` or `zoneinfo` (depending on what is available) — now\n  we will, too. ([#1110])\n\n### Deprecations\n\n- Deprecate the `Record.contents` property and the use of the\n  `lektor.filecontents.FileContents` class. These are unused by\n  Lektor itself. While they are in use by at least one other project\n  (see [#1026]), the semantics of the `.contents` property is quite\n  unclear when _alts_ are in use. ([#1114])\n\n### Packaging\n\n- Use [hatchling] as our PEP 517 build engine. Among other things, this allows\n  for installing Lektor directly from a git repository — so long as `npm` is installed\n  locally, installing, using `pip` from the git repo will now build the frontend\n  JS and CSS, thus resulting in a working installation of Lektor. ([#1112], [#1081])\n\n### Tests\n\n- Require `tox >= 4.1`.\n\n- Disuse `pytest-cov` — just run `coverage` directly.\n\n### Bit-Rot\n\n- Audit and adjust metadata to ensure that we declare all direct dependencies. ([26e700e])\n\n- Update frontend npm dependencies.\n\n- Fix tox config for tox 4.\\*.\n\n[26e700e]: https://github.com/lektor/lektor/commit/26e700e62b3c02a18761cfd7cc7f274ee171dd89\n[6f11bad]: https://github.com/lektor/lektor/commit/6f11bad5844d73c0ba8f5bb74c1e69f6c78650fc\n[edb35f9]: https://github.com/lektor/lektor/commit/edb35f9c1fae1f4e4ae45b51175cdad5e3a52ecd\n[#1114]: https://github.com/lektor/lektor/pull/1114\n[#1113]: https://github.com/lektor/lektor/pull/1113\n[#1112]: https://github.com/lektor/lektor/pull/1112\n[#1108]: https://github.com/lektor/lektor/pull/1108\n[#1106]: https://github.com/lektor/lektor/pull/1106\n[#1105]: https://github.com/lektor/lektor/pull/1105\n[#1102]: https://github.com/lektor/lektor/pull/1102\n[#1101]: https://github.com/lektor/lektor/issues/1101\n[#1100]: https://github.com/lektor/lektor/issues/1100\n[#1081]: https://github.com/lektor/lektor/issues/1081\n[#1065]: https://github.com/lektor/lektor/pull/1065\n[#1028]: https://github.com/lektor/lektor/issues/1028\n[#1026]: https://github.com/lektor/lektor/issues/1026\n[#1007]: https://github.com/lektor/lektor/pull/1007\n[#959]: https://github.com/lektor/lektor/pull/959\n[#865]: https://github.com/lektor/lektor/issues/865\n[babel-2.12]: https://github.com/python-babel/babel/blob/master/CHANGES.rst#version-2120\n[hatchling]: https://pypi.org/project/hatchling/\n[pytz]: https://pypi.org/project/pytz/\n[pep 615]: https://peps.python.org/pep-0615/\n\n## 3.4.0b4 (2022-11-05)\n\nTest under python 3.11. ([#1084][])\n\n### Features\n\n#### Dev Server\n\n- Add live-reloading of pages when they are rebuilt. ([#1027][])\n\n### Bugs\n\n#### Plugins\n\n- `PluginController.emit` would, under certain circumstances, silently\n  ignore `TypeError`s thrown by plugin hook methods. ([#1086][],\n  [#1085][])\n\n[#1027]: https://github.com/lektor/lektor/pull/1027\n[#1084]: https://github.com/lektor/lektor/pull/1084\n[#1085]: https://github.com/lektor/lektor/issues/1085\n[#1086]: https://github.com/lektor/lektor/pull/1086\n\n## 3.4.0b3 (2022-10-19)\n\n### Features\n\n#### Mistune\n\n- When configuring `mistune` plugins (from a Lektor plugin), allow\n  for specifying third-party plugins as a a string in the format\n  `\"<module.name>:attr\"`. (Plugins which are listed in the\n  `mistune.PLUGINS` map may be listed by their key.) ([#1074][])\n\n### Deprecations\n\n- Remove support for the `--build-flag` option to `lektor build` and\n  `lektor server`. ([#1062][])\n\n### Bugs\n\n- Fix spelling of `typing-inspect` in dependencies. ([#1058][], continued)\n\n#### Mistune\n\n- When using `mistune>=2`, enable the `url`, `strikethrough`,\n  `footnotes`, and `table` plugins for feature parity with\n  `mistune==0.*`. ([#1074][])\n\n#### Admin Server\n\n- Fix Admin UI tracking of navigation to URLs with anchors or query\n  strings in the preview view. ([#1053][])\n- We now test under `node-current` (currently node 18) and\n  `node-lts/*` (16). Previously we were testing under\n  node 14 and 16. ([#1064][])\n\n#### Bit-Rot\n\n- Disuse `pkg_resources` in favor of `importlib.metadata`. ([#1061][], [#1073][])\n- Update frontend dependencies, including upgrade to React version 18. ([#1063][])\n- Remove pin on transitive dependency `typing-inspect`.\n\n#### Packaging\n\n- Clean up package to remove a bit of cruft from the sdist. ([#1066][])\n\n[#1053]: https://github.com/lektor/lektor/pull/1053\n[#1061]: https://github.com/lektor/lektor/pull/1061\n[#1062]: https://github.com/lektor/lektor/pull/1062\n[#1063]: https://github.com/lektor/lektor/pull/1063\n[#1064]: https://github.com/lektor/lektor/pull/1064\n[#1066]: https://github.com/lektor/lektor/pull/1066\n[#1073]: https://github.com/lektor/lektor/pull/1073\n[#1074]: https://github.com/lektor/lektor/pull/1074\n\n## 3.4.0b2 (2022-08-31)\n\n### Bugs\n\n#### Command Line\n\n- Fix `lektor clean` (broken in [#1048][]). ([#1056][])\n\n#### Bit-Rot\n\n- Pin `typing-inspect` to prevent breakage of `marshmallow_dataclass`.\n  ([#1058][], [lovasoa/marshmallow_dataclass#207][md#207])\n\n[#1056]: https://github.com/lektor/lektor/issues/1056\n[#1058]: https://github.com/lektor/lektor/issues/1058\n[md#207]: https://github.com/lovasoa/marshmallow_dataclass/pull/207\n\n## 3.4.0b1 (2022-08-02)\n\nThis release drops support for Python 3.6, which has reached end-of-life in\nDecember 2021.\n\n### Changes\n\n#### Admin Frontend\n\n- The _save_ hotkey (`<ctl>-s`) now always switches to the _preview_\n  view. Previously, the _save_ hotkey was disabled unless there were\n  changes to be saved. ([#1022][])\n- Boolean checkboxes can now be reverted to the \"unset\" state by\n  typing _Delete_ or _Backspace_ into them. This is pertinent, e.g.,\n  for the `_hidden` field, where unset mean something different\n  (inherit from parent) than either `false` or `true`. ([#1048][])\n- Add ability to resize textareas. ([#1050][])\n\n#### Markdown\n\n- Links and image URLs in markdown text are now, by default, resolved\n  via the Lektor database. Previously, they were not. Note that this\n  behavior may be customized on a per-datamodel-field basis if one\n  wants to get the old behavior back. ([#992][])\n- Lektor now supports either [mistune][] 2.x or mistune 0.x. The\n  configuration API of mistune 2.x differs significantly from that of\n  mistune 0.x. If you are using a plugin that customizes the markdown\n  rendering, you will likely have to update the plugin to support the\n  newer mistune, or pin mistune to the older version. ([#992][])\n\n#### GitHub Pages Publisher\n\n- Add support for specifying which branch to push to by specifying a\n  `branch` query param on the target URL. ([#978][], [#995][])\n- Add support for force-pushing orphan commits by adding a\n  `preserve_history=no` query param to the target URL. ([#995][])\n\n#### Thumbnailing\n\n- The `crop` parameter of the `Image.thumbnail()` method (long since\n  depreacted) has been removed. ([#551][], [#960][])\n- Implicit thumbnail upscaling has been disabled. ([#551][], [#960][])\n\n### Bugs\n\n#### Admin Server\n\n- Refactor and fix numerous buglets in the admin http server. ([#987][])\n- Fix 404 error for `/admin`. ([#1043][], [#1044][])\n- Fix URL resolution to hidden pages. ([#1048][])\n\n#### Admin Frontend\n\n- Use [esbuild][] rather than webpack/babel to build the admin js code. ([#1012][])\n- Update frontend deps. ([#1025][])\n- Make `size = {small|large}` field option work again. ([#1022][])\n- Handle hotkeys when the preview iframe has the focus. ([#1022][])\n- Fix for spurious page scrolling when typing in textareas. ([#1][],\n  [#1038][], [#1050][])\n\n#### Builder\n\n- The `asseturl` filter was not propery tracking build dependencies\n  resulting in stale hashes in the asset URL if the asset was\n  updated. ([#1020][])\n- Fix so that un-hidden children of hidden parents are built. Fix\n  pruning logic so that artifacts corresponding to hidden pages are\n  pruned. ([#203][], [#1048][])\n\n#### Bit-rot\n\n- Fixes for `click==8.1.3`. ([#1031][], [#1033][])\n- Fixes for `werkzeug>=2.2.0`. ([#1019][], [#1018][], [#1051][])\n- Update npm package minimist. ([#1021][])\n- Remove dependency on the `requests[security]` extra. ([#1036][])\n- Remove `build-system.requires` dependencies on `wheel`, and the\n  `setuptools_scm[toml]` extra. ([#1036][])\n\n#### CI\n\n- Update pre-commit config to use `black==22.3.0` to avoid breakage\n  caused by `click>=8.1.0`. ([#1019][])\n- Updateto `pylint=2.13.4`. ([#1025][])\n\n#### Command Line\n\n- Fix exception when `--extra-flag`s are specified. ([#1041][], [#1042][])\n\n#### Packaging\n\n- Declare explicit dependencies on `MarkupSafe` and `pytz`,\n  where were transitively implied but are imported directly\n  by Lektor code. ([#1036][])\n\n### Refactorings\n\n- Removed unused cruft. ([#1009][])\n\n[mistune]: https://mistune.readthedocs.io/en/latest/\n[esbuild]: https://github.com/evanw/esbuild\n[#1]: https://github.com/lektor/lektor/issues/1\n[#203]: https://github.com/lektor/lektor/issues/203\n[#551]: https://github.com/lektor/lektor/pull/551\n[#960]: https://github.com/lektor/lektor/pull/960\n[#978]: https://github.com/lektor/lektor/issues/978\n[#987]: https://github.com/lektor/lektor/pull/987\n[#992]: https://github.com/lektor/lektor/pull/992\n[#995]: https://github.com/lektor/lektor/pull/995\n[#1009]: https://github.com/lektor/lektor/pull/1009\n[#1012]: https://github.com/lektor/lektor/pull/1012\n[#1018]: https://github.com/lektor/lektor/issues/1018\n[#1019]: https://github.com/lektor/lektor/pull/1019\n[#1020]: https://github.com/lektor/lektor/issues/1020\n[#1021]: https://github.com/lektor/lektor/pull/1021\n[#1022]: https://github.com/lektor/lektor/issues/1022\n[#1025]: https://github.com/lektor/lektor/pull/1025\n[#1031]: https://github.com/lektor/lektor/issues/1031\n[#1033]: https://github.com/lektor/lektor/pull/1033\n[#1036]: https://github.com/lektor/lektor/pull/1036\n[#1038]: https://github.com/lektor/lektor/issues/1038\n[#1041]: https://github.com/lektor/lektor/issues/1041\n[#1042]: https://github.com/lektor/lektor/pull/1042\n[#1043]: https://github.com/lektor/lektor/issues/1043\n[#1044]: https://github.com/lektor/lektor/pull/1044\n[#1048]: https://github.com/lektor/lektor/pull/1048\n[#1050]: https://github.com/lektor/lektor/pull/1050\n[#1051]: https://github.com/lektor/lektor/pull/1051\n\n## 3.3.2 (2022-03-01)\n\n### Features\n\n#### Command Line\n\n- Enabled the [Jinja debug extension][jinja-dbg-ext] when the\n  `LEKTOR_DEV` env var is set to 1 and `lektor server` is\n  used. ([#984][])\n\n### License\n\n- The wording in the LICENSE file was standardized to that of the\n  current [BSD 3-Clause License][bsd]. ([#972][])\n\n### Bugs\n\n#### Markdown Renderer\n\n- Fix overzealous HTML-entity escaping of link and image attributes. ([#989][])\n\n#### Admin API\n\n- Fix a bug in `make_editor_session` when editing non-existant pages\n  with a non-primary alt. ([#964][])\n- Fix the ability to add an initial flowblock to a page. (Broken in 3.3.1.)\n- Refactor API views to move business logic back into the `Tree`\n  adapter ([#967][]). This fixes [#962][].\n\n#### Admin UI\n\n- Changed the structure of the URLs used by the GUI single-page app ([#976][]).\n  This fixes problems with the \"edit\" pencil when using alternatives ([#975][]),\n  and issues when page ids include colons ([#610][]).\n- Other React refactors and fixes ([#988][]).\n\n#### Database\n\n- Fix `Attachment.url_path` when _alternatives_ are in use. There is only\n  one copy of each attachment emitted — the `url_path` should always be\n  that corresponding to the _primary alternative_. ([#958][])\n- `Pad.get`, if not passed an explicit value for the `alt` parameter,\n  now returns the record for the _primary alternative_ rather than the\n  fallback record. Similarly, `Pad.root` now returns the root record\n  for the _primary alternative_. ([#958][], [#965][])\n- Fix for uncaught `OSError(error=EINVAL)` on Windows when `Pad.get`\n  was called with a path containing characters which are not allowed\n  in Windows filenames (e.g. `<>*?|\\/\":`).\n\n#### Builder\n\n- Pages now record a build dependency on their datamodel `.ini` file.\n- Fix sqlite version detection so that we use \"without rowid\" optimization\n  with current versions of sqlite. ([#1002][])\n\n#### Command Line\n\n- When running `lektor dev new-theme`: fix check for ability to create symlinks\n  under Windows. ([#996][])\n- Fix _rsync_ publisher when deletion enabled on macOS. ([#946][], [#954][])\n\n#### Tests\n\n- Fix for test failures when git is not installed. ([#998][], [#1000][])\n\n### Refactorings\n\n- Cleaned up `EditorSession` to split mapping methods (for access to\n  record data) to a separate class, now available as\n  `EditorSession.data`. ([#969][])\n\n#### Testing\n\n- Cleaned up and moved our `pylint` and `coverage` configuration to\n  `pyproject.toml`. ([#990][], [#991][])\n\n#### Admin UI\n\n- Move frontend source from `lektor/admin/static/` to `frontend/`.\n  Compiled frontend code moved from `lektor/admin/static/gen/` to\n  'lektor/admin/static/`. ([#1003][])\n\n#### Packaging\n\n- Omit `example` subdirectory, frontend source code, developer-centric\n  config files, as well as other assorted cruft from sdist. ([#986][])\n\n[bsd]: https://opensource.org/licenses/BSD-3-Clause\n[#610]: https://github.com/lektor/lektor/issues/610\n[#946]: https://github.com/lektor/lektor/issues/946\n[#954]: https://github.com/lektor/lektor/pull/954\n[#958]: https://github.com/lektor/lektor/pull/958\n[#962]: https://github.com/lektor/lektor/issues/962\n[#964]: https://github.com/lektor/lektor/pull/964\n[#965]: https://github.com/lektor/lektor/issues/965\n[#967]: https://github.com/lektor/lektor/pull/967\n[#969]: https://github.com/lektor/lektor/pull/969\n[#972]: https://github.com/lektor/lektor/pull/972\n[#975]: https://github.com/lektor/lektor/issues/975\n[#976]: https://github.com/lektor/lektor/pull/976\n[#984]: https://github.com/lektor/lektor/pull/984\n[#986]: https://github.com/lektor/lektor/pull/986\n[#988]: https://github.com/lektor/lektor/pull/988\n[#989]: https://github.com/lektor/lektor/pull/989\n[#990]: https://github.com/lektor/lektor/pull/990\n[#991]: https://github.com/lektor/lektor/pull/991\n[#996]: https://github.com/lektor/lektor/pull/996\n[#998]: https://github.com/lektor/lektor/issues/998\n[#1000]: https://github.com/lektor/lektor/pull/1000\n[#1002]: https://github.com/lektor/lektor/pull/1002\n[#1003]: https://github.com/lektor/lektor/pull/1003\n[jinja-dbg-ext]: https://jinja.palletsprojects.com/en/latest/extensions/#debug-extension\n\n## 3.3.1 (2022-01-09)\n\n### Bugs Fixed\n\n- Fixed an import cycle which caused in `ImportError` if\n  `lektor.types` was imported before `lektor.environemnt`. [#974][]\n\n#### Deprecations\n\n- Disuse deprecated `Thread.setDaemon()`. [#979][]\n\n#### Admin UI\n\n- Fix spastic scroll behavior when editing flow elements. [#640][]\n- Fix admin GUI when page contains an unknown flowblock type. [#968][]\n- Fix admin GUI layout on mobile devices. [#981][]\n\n#### Tests\n\n- Increased timeout in `test_watcher.IterateInThread` to prevent\n  random spurious failures during CI testing.\n- Fix `tests/test_prev_next_sibling.py` so as to allow running\n  multiple test runs in parallel.\n- Use per-testenv coverage files to prevent contention when running `tox --parallel`.\n- Mark tests that require a working internet connections with pytest mark `requiresinternet`. [#983][]\n\n### Refactors\n\n#### Admin UI\n\n- Finish rewriting React class-based components to function-based components. [#977][]\n- Finish adding types for all API endpoints. [#980][]\n- Remove disused event-source polyfill.\n\n[#640]: https://github.com/lektor/lektor/issues/640\n[#968]: https://github.com/lektor/lektor/issues/968\n[#974]: https://github.com/lektor/lektor/pull/974\n[#977]: https://github.com/lektor/lektor/pull/977\n[#979]: https://github.com/lektor/lektor/pull/979\n[#980]: https://github.com/lektor/lektor/pull/980\n[#981]: https://github.com/lektor/lektor/pull/981\n[#983]: https://github.com/lektor/lektor/pull/983\n\n## 3.3.0 (2021-12-14)\n\nThis release drops support for versions of Python before 3.6.\nIn particular, Python 2.7 is no longer supported.\n\nQuite a few bugs have been fixed since the previous release.\n\nThe Admin UI has seen a major refactor and various performance optimisations.\nIt has been rewritten in Typescript, and updated to use v5 of the Bootstrap CSS framework.\n\n### Bugs Fixed\n\n#### Database\n\n- Fix queries with offset but without a limit. [#827][]\n- Fix the handling of deferred (descriptor-type) model fields when used in `slug_format`\n  and when used as a sort key. [#789][]\n- Refrain from issuing warning about future change in implicit image\n  upscaling behavior in cases that do not involve upscaling. [#885][]\n- Fix bug with translation fallback of record label. [#897][]\n\n#### Data Modelling\n\n- Fixed pagination issue which caused child-less paginated pages to\n  not be built. [#952][]\n\n#### Publisher\n\n- Allow rsync deployment to a local path. [#830][]\n- Clean up subprocess handling in `lektor.publisher`. This fixes\n  \"ResourceWarning: unclosed file\" warnings which were being emitted\n  when using the rsync publisher, as well as possible other\n  buglets. [#896][]\n\n#### Command Line\n\n- Fix circular imports in `lektor.cli` to allow its use as an executable module (`python -m lektor.cli`).\n  [#682][], [#856][]\n- Fall back to `watchdog` `PollingObserver` if default `Observer` type fails to start.\n  This fixes \"OSError: inotify watch limit reached\" and perhaps other similar failures.\n  [#861][], [#886][]\n\n#### Plugins\n\n- Fix the `Plugin.emit` method so that it works. [#859][]\n- Reword the (previously incomprehensible) exception message emitted\n  when attempting to load a plugin from an improperly named\n  distribution. [#875][], [#879][]\n\n#### Build System\n\n- Fix bug in `lektor.sourcesearch.find_files` which was causing intermittent exceptions.\n  [#895][], [#897][]\n\n#### Miscellaneous\n\n- Fix reference cycle in `Environment`. [#882][]\n- Fix \"unclosed file\" `ResourceWarning`s. [#898][]\n\n#### Admin UI\n\n- Fix the checkboxes widget. They were broken so as to be uncheckable. [#812][], [#817][]\n- Fix page data being incorrectly marked as _changed_ when flow block is expanded/collapsed in the edit UI. [#828][], [#842][]\n- Fix encoding of URLs when opening the admin UI from the pencil button. [#815][], [#837][]\n- Rename a CSS class in the admin UI to prevent breakage by ad blockers.\n  The class `add-block` was being blocked by the _EasyList FR_ ad blocker. [#785][], [#841][]\n- Relax URL checking to allow all valid URLs in URL fields. [#793][], [#840][], [#864][]\n- Preview iframe was not always updating when it should. [#844][], [#846][]\n- Make the \"Save\" button always visible (without need to scroll on long pages). [#43][], [#870][]\n- Disable the \"Save\" button unless there are changes. [#872][]\n- Add \"&lt;ctl&gt;-e\" hotkey shortcut to edit page. [#876][]\n- Update UI to Bootstrap v4. (This fixes a layout issue with the date picker.) [#648][], [#884][]\n- Fix edit page failure for select and checkbox widgets with no choices. [#890][], [#900][]\n- Update UI to Bootstrap v5. [#917][], [#926][]\n- Add missing translation strings, show error dialogs on top of other dialogs [#934][].\n\n### Internal changes\n\n#### Python code\n\n- Drop python 2 compatibility. [#822][], [#850][], [#871][], [#920][], [#922][]\n- Drop python 3.5 compatibility. [#878][], [#880][]\n- Support python 3.10. [#938][]\n- Switch to [PEP-518][]-compatible (pyproject.toml) build process. [#933][], [#942][]\n- Code beautification/reformatting. We now use [black][], [reorder-python-imports][], [flake8][], _and_ [pylint][].\n  [#823][], [#916][], [#925][], [#936][]\n- Refactor rsync publisher tests. [#836][]\n- Restructure code to prevent circular imports. [#856][], [#871][], [#873][]\n- Minor docstring fixes. [#874][]\n- Enabled pylint's no-self-use policy. [#887][]\n\n#### JS code\n\n- We now require node >= 14. [#940][]\n- Update NPM/JS dependencies. Update to webpack v5. [#816][],\n  [#834][], [#848][], [#852][], [#860][], [#905][], [#917][],\n  [#926][], [#945][], [#957][]\n- Use [prettier][] and [eslint][] for JS (and YAML) beautification and style enforcement. [#825][], [#936][]\n- Disuse unmaintained `jsdomify` to prevent hanging tests. [#839][]\n- Disuse jQuery. [#851][]\n- Convert JS code to Typescript. Various other refactoring and cleanups. [#857][], [#869][], [#872][]\n- Refactor code to handle hotkeys. [#876][]\n\n### Dependencies\n\n- Relax `werkzeug<1` to `werkzeug<3`. [#829][], [#833][], [#911][], [#923][]\n- Drop support for Python 2. [#818][], [#819][]\n- We now require `Jinja2>=3.0`. [#921][]\n\n### Testing/CI\n\n- Use `tox` for local testing. [#824][]\n- Pin version of `pylint` used for tests. [#891][]\n- Complete rewrite of the tests for `lektor.pluginsystem` to increase coverage and reduce running time.\n  [#881][].\n- Test under Python 3.9. [#845][]\n- Test under Node v14 and v16. [#852][], [#927][]\n- Do not run `brew update` in MacOS CI workflow. [#853][]\n- CI workflow simplification. [#927][]\n\n[black]: https://black.readthedocs.io/en/stable/\n[pylint]: https://pylint.org/\n[reorder-python-imports]: https://github.com/asottile/reorder_python_imports\n[flake8]: https://flake8.pycqa.org/en/latest/\n[prettier]: https://prettier.io/\n[eslint]: https://eslint.org/\n[pep-518]: https://www.python.org/dev/peps/pep-0518/\n[#43]: https://github.com/lektor/lektor/issues/43\n[#648]: https://github.com/lektor/lektor/issues/648\n[#682]: https://github.com/lektor/lektor/issues/682\n[#785]: https://github.com/lektor/lektor/issues/785\n[#789]: https://github.com/lektor/lektor/pull/789\n[#793]: https://github.com/lektor/lektor/issues/793\n[#812]: https://github.com/lektor/lektor/issues/812\n[#815]: https://github.com/lektor/lektor/issues/815\n[#816]: https://github.com/lektor/lektor/pull/816\n[#817]: https://github.com/lektor/lektor/pull/817\n[#818]: https://github.com/lektor/lektor/issues/818\n[#819]: https://github.com/lektor/lektor/pull/819\n[#822]: https://github.com/lektor/lektor/pull/822\n[#823]: https://github.com/lektor/lektor/pull/823\n[#824]: https://github.com/lektor/lektor/pull/824\n[#825]: https://github.com/lektor/lektor/pull/825\n[#827]: https://github.com/lektor/lektor/pull/827\n[#828]: https://github.com/lektor/lektor/issues/828\n[#829]: https://github.com/lektor/lektor/issues/829\n[#830]: https://github.com/lektor/lektor/pull/830\n[#833]: https://github.com/lektor/lektor/pull/833\n[#834]: https://github.com/lektor/lektor/pull/834\n[#836]: https://github.com/lektor/lektor/pull/836\n[#837]: https://github.com/lektor/lektor/pull/837\n[#839]: https://github.com/lektor/lektor/pull/839\n[#840]: https://github.com/lektor/lektor/pull/840\n[#841]: https://github.com/lektor/lektor/pull/841\n[#842]: https://github.com/lektor/lektor/pull/842\n[#844]: https://github.com/lektor/lektor/issues/844\n[#845]: https://github.com/lektor/lektor/pull/845\n[#846]: https://github.com/lektor/lektor/pull/846\n[#848]: https://github.com/lektor/lektor/pull/848\n[#850]: https://github.com/lektor/lektor/pull/850\n[#851]: https://github.com/lektor/lektor/pull/851\n[#852]: https://github.com/lektor/lektor/pull/852\n[#853]: https://github.com/lektor/lektor/pull/853\n[#856]: https://github.com/lektor/lektor/pull/856\n[#857]: https://github.com/lektor/lektor/pull/857\n[#859]: https://github.com/lektor/lektor/pull/859\n[#860]: https://github.com/lektor/lektor/pull/860\n[#861]: https://github.com/lektor/lektor/issues/861\n[#864]: https://github.com/lektor/lektor/pull/864\n[#869]: https://github.com/lektor/lektor/pull/869\n[#870]: https://github.com/lektor/lektor/pull/870\n[#871]: https://github.com/lektor/lektor/pull/871\n[#872]: https://github.com/lektor/lektor/pull/872\n[#873]: https://github.com/lektor/lektor/pull/873\n[#874]: https://github.com/lektor/lektor/pull/874\n[#875]: https://github.com/lektor/lektor/pull/875\n[#876]: https://github.com/lektor/lektor/pull/876\n[#878]: https://github.com/lektor/lektor/issues/878\n[#879]: https://github.com/lektor/lektor/pull/879\n[#880]: https://github.com/lektor/lektor/pull/880\n[#881]: https://github.com/lektor/lektor/pull/881\n[#882]: https://github.com/lektor/lektor/pull/882\n[#884]: https://github.com/lektor/lektor/pull/884\n[#885]: https://github.com/lektor/lektor/pull/885\n[#886]: https://github.com/lektor/lektor/pull/886\n[#887]: https://github.com/lektor/lektor/pull/887\n[#890]: https://github.com/lektor/lektor/issues/890\n[#891]: https://github.com/lektor/lektor/pull/891\n[#895]: https://github.com/lektor/lektor/issues/895\n[#896]: https://github.com/lektor/lektor/pull/896\n[#897]: https://github.com/lektor/lektor/pull/897\n[#898]: https://github.com/lektor/lektor/pull/898\n[#900]: https://github.com/lektor/lektor/pull/900\n[#905]: https://github.com/lektor/lektor/pull/905\n[#911]: https://github.com/lektor/lektor/pull/911\n[#916]: https://github.com/lektor/lektor/pull/916\n[#917]: https://github.com/lektor/lektor/pull/917\n[#920]: https://github.com/lektor/lektor/pull/920\n[#921]: https://github.com/lektor/lektor/pull/921\n[#922]: https://github.com/lektor/lektor/pull/922\n[#923]: https://github.com/lektor/lektor/pull/923\n[#925]: https://github.com/lektor/lektor/pull/925\n[#926]: https://github.com/lektor/lektor/pull/926\n[#927]: https://github.com/lektor/lektor/pull/927\n[#933]: https://github.com/lektor/lektor/pull/933\n[#934]: https://github.com/lektor/lektor/pull/934\n[#936]: https://github.com/lektor/lektor/pull/936\n[#938]: https://github.com/lektor/lektor/pull/938\n[#940]: https://github.com/lektor/lektor/pull/940\n[#942]: https://github.com/lektor/lektor/pull/942\n[#945]: https://github.com/lektor/lektor/pull/945\n[#952]: https://github.com/lektor/lektor/pull/952\n[#957]: https://github.com/lektor/lektor/pull/957\n\n## 3.2.3 (2021-12-11)\n\n### Compatibility\n\n- Restore python 2.7 compatibility. It was broken in leketor 3.2.2. [#951][]\n- Pin inifile>=0.4.1 to support python 3.10 [#943][], [#953][]\n\n[#943]: https://github.com/lektor/lektor/issues/943\n[#951]: https://github.com/lektor/lektor/pull/951\n[#953]: https://github.com/lektor/lektor/pull/953\n\n## 3.2.2 (2021-09-18)\n\n### Packaging\n\n- Fixes a problem with the uploaded wheel in 3.2.1.\n\n### Compatibility\n\n- Fixes to support werkzeug 2.x. [#911][]\n\n## 3.2.1 (2021-09-18)\n\n### Compatibility\n\n- Pin `pytest-click<1` for python 2.7. [#924][]\n- Fixes to support werkzeug 1.x. [#833][]\n\n### Bugs\n\n- Allow rsync deployment to a local path. [#830][], [#836][]\n- Fix queries with offset but without a limit. [#827][]\n\n### Admin UI\n\n- Fix select and checkboxes widgets when choices is empty. [#900][]\n- Update npm packages. [#848][], [#834][], [#816][]\n- Fix updating of the preview iframe. [#846][]\n- Allow `ftps:` and `mailto:` URLs in url fields. [#840][]\n- Fix the toggling of flow widgets in the admin UI to not mark the content as changed. [#842][]\n- Rename CSS class to prevent conflict with EasyList FR adblock list. [#841][]\n- Fix the handling of the URLs when opening the admin UI from the pencil button. [#837][]\n- Fix the checkboxes widget in the admin UI. [#817][]\n\n### Testing / CI\n\n- Test under python 3.9. [#845][]\n- Various CI test fixes. [#932][], [#839][], [#832][], [#826][]\n- Added a `tox.ini`. [#824][]\n\nCode Reformatting\n\n- Blackify, reorder-python-imports, flake8. [#823][]\n- Reformatted js code with prettier. [#825][]\n- Update pylint config. [#822][]\n\n[#826]: https://github.com/lektor/lektor/pull/826\n[#832]: https://github.com/lektor/lektor/pull/832\n[#924]: https://github.com/lektor/lektor/pull/924\n[#932]: https://github.com/lektor/lektor/pull/932\n\n## 3.2.0\n\nRelease date 20th of August, 2020\n\n- Fix off-by-one error in pagination's iter_pages in the interpretation of the right_current argument, and adding an appropriate trailing `None` for some uses.\n- Add support for setting an output_path in the project file.\n- Replaced the slugify backend to handle unicode more effectively. This may break some slugs built from unicode.\n- Several modernization and performance improvements to the admin UI\n- Improved speed of source info updates.\n- Set colorspace to sRGB for thumbnails.\n- Now stripping profiles and comments from thumbnails.\n- Added support for deleting and excluding files for the rsync deployment publisher.\n- Improved speed of flow rendering in the admin UI.\n- Bugfix to correctly calculate relative urls from slugs that contain dots.\n- Bugfix to allow negative integers in integer fields in the admin UI.\n- Improved image-heavy build speeds by reducing the amount of data extracted from EXIFs.\n- Added the ability to collapse flow elements in the admin UI.\n- Now `extra_flags` is passed to all plugin events.\n- Extra flags can now be passed to the `clean` and `dev shell` CLI commands.\n- Bugfix where `lektor plugins reinstall` triggered `on_setup_env` instead of just reinstalling plugins.\n- Added the ability to generate video thumbnails with ffmpeg.\n- Added `mode` and `upscale` thumbnail arguments, changing the preferred method to crop to using `mode`. `mode` can be `crop`, `fit`, or `stretch`. `upscale=False` can now prevent upscaling.\n- Added a new CLI command `lektor dev new-theme`.\n- Made admin use full UTF-8 version of RobotoSlab. Fixes missing glyphs for some languages\n- Bumped minimum Jinja2 version to 2.11\n- Bumped filetype dependency to 1.0.7 because of API changes\n- Relative urls are now as short as possible.\n- Changed default slug creation to use slugify. This should mean greater language support, but this may produce slightly different results than before for some users\n- Automatically include setup.cfg configured for universal wheels when creating plugins\n\n## 3.1.3\n\nRelease date 26th of January, 2019\n\n- Release with universal build.\n\n## 3.1.2\n\nRelease date 7th of September 2018\n\n- Fix pagination and virtual pathing for alts\n- Fixing deply from local server in Python 3\n- Now passing server_info to publisher from local server, providing better\n  support for plugin provided publishers.\n- Added a more full-featured example project.\n- Adding Jinja2 `do` extension.\n- Better new-plugin command.\n- More tests.\n- Added the ability to sort child pages in admin according to models.\n- Better image handling and info detection for JPGs and SVGs\n- Lektor can now be ran with `python -m lektor`\n- New plugins now come with a more full featured setup.py\n\n## 3.1.1\n\nRelease date 18th of April 2018\n\n- Better Image dimension detection.\n- Fix backwards compatibility with thumbnail generation.\n- Adding safety check when runnning new build in non-empty dir since that could delete data.\n- Adding command aliases.\n\n## 3.1.0\n\nRelease date 29th of January 2018.\n\n- Adding ability to use Lektor Themes.\n- Adding Markdown event hook between instantiating the Renderer and creating the Markdown Processor\n- Improving tests for GitHub deployment.\n- Added the ability to use IPython in the lektor dev shell if it's available.\n- Added ability to publish from different filesystems.\n- Adding new option to turn disable editing fields on alternatives.\n- Added automated testing for Windows.\n- Expanded automated testing environments to Python 2.7, 3.5, 3.6, & Node 6, 7, 8.\n- Windows bugfixes.\n- Improved exif image data.\n- Improved date handling in admin.\n- Make GitHub Pages branch detection case insensitive.\n- Set sqlite isolation to autocommit.\n- Fixed errors in the example project.\n- Enabling pylint and standard.js.\n- Improved image rotation.\n- Now measuring tests and pull requests with code coverage.\n- Thumbnails can now have a defined quality.\n- Moved Windows cache to local appdata.\n- README tweaks.\n- Beter translations.\n- Better file tracking in watcher.\n- Upgraded many node dependencies.\n- Upgraded from ES5 to ES6.\n- Added mp4 attachment type.\n- Bugfixes for Python 3.\n\n## 3.0.1\n\nReleased on 13th of June 2017.\n\n- Bugfixes and improved Python 2 / 3 compatibility\n\n## 3.0\n\nReleased on 15th of July 2016.\n\n- Switch to newer mistune (markdown parser).\n- Rename `--build-flags` to `--extra-flags`, allow the deploy command to also\n  accept extra flags.\n\n## 2.4\n\nReleased on 7th of July 2016.\n\n- Resolved an issue with unicode errors being caused by the\n  quickstart.\n\n## 2.3\n\nReleased on 31st of May 2016\n\n- Fixed an issue with `get_alts` not being available in the\n  template environment.\n\n## 2.2\n\nReleased on 12th of April 2016\n\n- Corrected an issue where certain translations would not make the\n  admin panel load.\n\n## 2.1\n\nReleased on 12th of April 2016\n\n- Fixed a code signing issue on OS X 10.10.3 and lower.\n\n## 2.0\n\nReleased on 11th of April 2016\n\n- Added `_discoverable` system field which controls if a page should show\n  up in `children`. The default is that a page is discoverable. Setting it\n  to `False` means in practical terms that someone needs to know the URL as\n  all collection operations will not return it.\n- Added `for_page` function to pagination that returns the pagiantion for a\n  specific page.\n- Make pagination next_page and prev_page be None on the edges.\n- Allow plugins to provide publishers.\n- Added `|markdown` filter.\n- Added French translations.\n- Unicode filenames as final build artifacts are now explicitly disallowed.\n- Serve up a 404.html as an error page in the dev server.\n- Improvements to the path normalization and alt handling. This should support\n  URL generation in more complex cases between alts now.\n- Show a clearer error message when URL generation fails because a source\n  object is virtual (does not have a path).\n- Empty text is now still valid markdown.\n- Lektor clean now loads the plugins as well.\n- Basic support for type customization.\n- Fields that are absent in a content file from an alternative are now pulled\n  from the primary content file.\n- Development server now resolves index.html for assets as well.\n- Markdown processing now correctly adjusts links relative to where the\n  rendered output is rendered.\n- Added Dutch translations.\n- Added Record.get_siblings()\n- Added various utilties: build_url, join_path, parse_path\n- Added support for virtual paths and made pagination work with it.\n- Added support for Query.distinct\n- Add support for pagination url resolving on root URL.\n- Server information can now also contain extra key/value pairs that\n  can be used by publishers to affect the processing.\n- The thumbnails will now always have the correct width and height set\n  as an attribute.\n- added datetime type\n- added support for the process_image utility functions so that plugins\n  can use it directly.\n- added support for included_assets and excluded_assets in the project file.\n- added Spanish translations.\n- added Japanese translations.\n- added support for discovering existing alts of sources.\n- added support for image cropping.\n- added preliminary support for publishing on windows.\n- children and attachments can now have a hidden flag configured explicitly.\n  Attachments will also no longer inherit the hidden flag of the parent\n  record as that is not a sensible default.\n- changed internal sqlite consistency mode to improve performance on HDDs.\n- allow SVG files to be treated as images. This is something that does not\n  work in all situations yet (in particular thumbnailing does not actually\n  do anything for those)\n\n## 1.2.1\n\nReleased on 3rd of February 2016\n\n- Bugfix release primarily for OS X which fixes a code signing issue.\n\n## 1.2\n\nReleased on 1st of February 2016\n\n- Fixed an error that caused unicode characters in the project\n  name to be mishandled in the quickstart.\n- Do not create empty folders when the quickstart skips over files.\n- Empty values for the slug field now pull in the default.\n- Corrected a bug in hashing in the FTP publisher that could cause\n  files to not upload correctly.\n- Improved error message for when imagemagick cannot be found.\n- Fixed scrolling in the admin for firefox and some other browsers.\n- Fixed a problem with deleting large projects due to sqlite limitations.\n- Fixed admin preview of root page in firefox.\n- Changed FTPS data channel to use TLS.\n\n## 1.1\n\nReleased on 27th of December 2015\n\n- Fixed a bug where resolving URL paths outside of alts did not\n  fall back to asset resolving.\n- verbose mode now correctly displays traceback of build failures.\n- Fixed a bug that caused build failures not to be remembered.\n- Fixed a bad EXIF attribute (longitude was misspelt)\n- Use requests for URL fetching instead of urllib. This should fix\n  some SSL errors on some Python versions.\n- Parent of page now correctly resolves to the right alt.\n- Publish from a temporary folder on the same device which solves\n  problems on machines with `/tmp` on a different drive.\n\n## 1.0\n\nReleased on 21st of December 2015\n\n- Improved ghpages and rsync deployments.\n- Implemented options for default URL styles.\n- All artifacts now depend on the project file.\n- Fixed an issue with renames from tempfile in the quickstart.\n\n## 0.96\n\nInitial test release. Release date 19th of December 2015\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.458984375,
          "content": "Copyright (c) 2015-2016 by the Armin Ronacher.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n1. Redistributions of source code must retain the above copyright\n   notice, this list of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright\n   notice, this list of conditions and the following disclaimer in the\n   documentation and/or other materials provided with the\n   distribution.\n\n3. Neither the name of the copyright holder nor the names of its\n   contributors may be used to endorse or promote products derived\n   from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n\"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nHOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 0.78515625,
          "content": "all: build-js\n\n.PHONY: build-js\nbuild-js: frontend/node_modules\n\t@echo \"---> cleaning static files\"\n\t@rm -rf lektor/admin/static\n\t@echo \"---> building static files\"\n\t@cd frontend; npm run build\n\nfrontend/node_modules: frontend/package-lock.json\n\t@echo \"---> installing npm dependencies\"\n\t@cd frontend; npm install\n\t@touch -m frontend/node_modules\n\n# Run tests on Python files.\ntest-python:\n\t@echo \"---> running python tests\"\n\ttox -e py\n\n# Run tests on the Frontend code.\ntest-js: frontend/node_modules\n\t@echo \"---> running javascript tests\"\n\t@cd frontend; npx tsc\n\t@cd frontend; npm test\n\n.PHONY: lint\n# Lint code.\nlint:\n\tpre-commit run -a\n\ttox -e lint\n\n.PHONY: test\ntest: lint test-python test-js\n\n.PHONY: test-all\n# Run tests on all supported Python versions.\ntest-all: test-js\n\tpre-commit run -a\n\ttox\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 2.1923828125,
          "content": "# Lektor\n\n[![CI/CD Badge]][CI/CD]\n[![Code Coverage](https://codecov.io/gh/lektor/lektor/branch/master/graph/badge.svg)](https://codecov.io/gh/lektor/lektor)\n[![PyPI version](https://badge.fury.io/py/Lektor.svg)](https://pypi.org/project/Lektor/)\n[![PyPI - Python Version](https://img.shields.io/pypi/pyversions/Lektor.svg)](https://pypi.org/project/Lektor/)\n[![Code Style: Black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)\n[![Join the chat at https://gitter.im/lektor/lektor](https://badges.gitter.im/lektor/lektor.svg)](https://gitter.im/lektor/lektor?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n\n[CI/CD Badge]: https://github.com/lektor/lektor/actions/workflows/ci-cd.yml/badge.svg?branch=master\n[CI/CD]: https://github.com/lektor/lektor/actions/workflows/ci-cd.yml\n\nLektor is a static website generator. It builds out an entire project\nfrom static files into many individual HTML pages and has a built-in\nadmin UI and minimal desktop app.\n\n<img src=\"https://raw.githubusercontent.com/lektor/lektor-assets/master/screenshots/admin.png\" width=\"100%\">\n\nTo see how it works look at the top-level `example/` folder, which contains\na showcase of the wide variety of Lektor's features.\n\nFor a more complete example look at the [lektor/lektor-website](https://github.com/lektor/lektor-website)\nrepository, which contains the sourcecode for the official lektor website.\n\n## How do I use this?\n\nFor installation instructions head to the official documentation:\n\n- [Installation](https://www.getlektor.com/docs/installation/)\n- [Quickstart](https://www.getlektor.com/docs/quickstart/)\n\n## Want to develop on Lektor?\n\nThis gets you started (assuming you have Python, pip, npm, and pre-commit\ninstalled):\n\n```bash\n$ git clone https://github.com/lektor/lektor\n$ cd lektor\n$ python -m venv _venv\n$ . _venv/bin/activate\n\n# pip>=21.3 is required for PEP 610 support\n$ pip install -U \"pip>=21.3\"\n\n$ pip install --editable .\n\n# If you plan on committing:\n$ pre-commit install\n\n# Run the Lektor server\n$ export LEKTOR_DEV=1\n$ cp -r example example-project\n$ lektor --project example-project server\n```\n\nIf you want to run the test suite (you'll need tox installed):\n\n```sh\n$ tox\n```\n"
        },
        {
          "name": "build_frontend.py",
          "type": "blob",
          "size": 2.7978515625,
          "content": "\"\"\"A hatch build-hook that builds the front-end js/css at PEP 517 build time.\n\nBy default, when building the dist, if the built frontend code is not\npresent in the source directory, it will be built.  (Node must be installed,\nor this will fail.)\n\nEnvironment Variables\n---------------------\n\nThere are a couple of environment variables that can be used to provide\nadditional control over the building of the frontend code.\n\n- ``HATCH_BUILD_NO_HOOKS=true``: skip building the frontend code\n- ``HATCH_BUILD_CLEAN=true``: force (re)building of the frontend code\n\n\"\"\"\nimport shutil\nimport subprocess\nfrom pathlib import Path\n\nfrom hatchling.builders.hooks.plugin.interface import BuildHookInterface\n\n# path to frontend source\nFRONTEND = \"frontend\"\n\n# path to compiled JS entry point\nAPP_JS = \"lektor/admin/static/app.js\"\n\n\nclass FrontendBuildHook(BuildHookInterface):\n    \"\"\"Hatching build hook to compile our frontend JS.\"\"\"\n\n    def clean(self, versions):\n        \"\"\"Called at the beginning of each PEP 517 build, if HATCH_BUILD_CLEAN is set.\n\n        This implementation deletes any compiled frontend code that may be present\n        in the source tree.\n        \"\"\"\n        app = self.app\n        root = self.root\n\n        if not Path(root, FRONTEND).is_dir():\n            app.display_info(\n                \"frontend source missing, skipping cleaning compiled output\"\n            )\n            return\n\n        output_path = Path(root, APP_JS).parent\n        app.display_info(f\"cleaning {output_path.relative_to(root)}\")\n        if output_path.is_dir():\n            shutil.rmtree(output_path)\n\n    def initialize(self, version, build_data):\n        \"\"\"Hook called before each package build.\n\n        This implementation builds the compiled frontend source, but only\n        if it is not already present in the source tree.\n\n        Node (and npm) must be installed or this step will fail.\n        \"\"\"\n        app = self.app\n        root = self.root\n\n        if Path(root, APP_JS).is_file():\n            app.display_info(f\"{APP_JS} exists, skipping frontend build\")\n            return\n\n        try:\n            proc = subprocess.run(\n                \"npm -v\", capture_output=True, text=True, shell=True, check=True\n            )\n        except subprocess.CalledProcessError as exc:\n            app.abort(f\"{exc.cmd!r} failed (is node/npm installed?)\")\n        app.display_info(f\"found npm version {proc.stdout.strip()}\")\n\n        frontend = Path(root, FRONTEND)\n        if not frontend.is_dir():\n            app.abort(\"frontend source is missing. can not build frontend\")\n\n        app.display_info(\"npm install\")\n        subprocess.run(\"npm install\", cwd=frontend, shell=True, check=True)\n        app.display_info(\"npm run build\")\n        subprocess.run(\"npm run build\", cwd=frontend, shell=True, check=True)\n        app.display_success(\"built frontend static files\")\n"
        },
        {
          "name": "example",
          "type": "tree",
          "content": null
        },
        {
          "name": "frontend",
          "type": "tree",
          "content": null
        },
        {
          "name": "lektor",
          "type": "tree",
          "content": null
        },
        {
          "name": "pyproject.toml",
          "type": "blob",
          "size": 4.76953125,
          "content": "[build-system]\nrequires = [\"hatchling>=1.13.0,<2.0.0\", \"hatch-vcs\"]\nbuild-backend = \"hatchling.build\"\n\n[project]\nname = \"Lektor\"\ndescription = \"A static content management system.\"\ndynamic = [\"version\"]\nreadme = \"README.md\"\nlicense = { file = \"LICENSE\" }\nauthors = [\n    { name = \"Armin Ronacher\", email = \"armin.ronacher@active-4.com\" },\n]\nurls.Homepage = \"https://www.getlektor.com/\"\nurls.Source = \"https://github.com/lektor/lektor/\"\nurls.Documentation = \"https://www.getlektor.com/docs/\"\nurls.Changelog = \"https://github.com/lektor/lektor/blob/master/CHANGES.md\"\nclassifiers = [\n    \"Framework :: Lektor\",\n    \"Environment :: Web Environment\",\n    \"Intended Audience :: Developers\",\n    \"License :: OSI Approved :: BSD License\",\n    \"Operating System :: OS Independent\",\n    \"Programming Language :: Python\",\n    \"Programming Language :: Python :: 3\",\n    \"Programming Language :: Python :: 3.9\",\n    \"Programming Language :: Python :: 3.10\",\n    \"Programming Language :: Python :: 3.11\",\n    \"Programming Language :: Python :: 3.12\",\n    \"Programming Language :: Python :: 3.13\",\n    \"Topic :: Internet :: WWW/HTTP :: Dynamic Content\",\n    \"Topic :: Software Development :: Libraries :: Python Modules\",\n]\n\nrequires-python = \">=3.9\"\ndependencies = [\n    \"Babel\",\n    \"click>=6.0\",\n    \"Flask\",\n    \"inifile>=0.4.1\",\n    \"Jinja2>=3.0\",\n    \"MarkupSafe\",\n    \"marshmallow\",\n    \"marshmallow_dataclass>=8.5.9\",\n    \"mistune>=0.7.0,<3\",\n    \"Pillow>=6\",\n    \"pip\",\n    \"python-slugify\",\n    \"requests\",\n    \"typing-extensions>=3.10; python_version<'3.10'\",\n    \"tzdata; sys_platform == 'win32'\",\n    \"watchfiles>=0.12\",\n    \"Werkzeug>=2.1.0\",\n]\noptional-dependencies.ipython = [\n    \"ipython\",\n    \"traitlets\",\n]\n\n[project.scripts]\nlektor = \"lektor.cli:main\"\n\n[tool.hatch.version]\nsource = \"vcs\"\n\n[tool.hatch.build]\ninclude = [\n    \"/lektor\",\n]\nartifacts = [\n    \"/lektor/admin/static\",\n]\n\n[tool.hatch.build.targets.sdist]\ninclude = [\n    \"/lektor\",\n    \"/build_frontend.py\",\n    \"/CHANGES.md\",\n    \"/tests\",\n    \"/tox.ini\",\n]\n\n[tool.hatch.build.hooks.custom]\npath = \"build_frontend.py\"\n\n\n\n################################################################\n#\n# pytest\n#\n[tool.pytest.ini_options]\nnorecursedirs = [\"venv\", \".tox\", \".git\", \"node_modules\"]\naddopts = \"--strict-markers\"\nmarkers = [\n    \"requiresinternet: marks tests requiring an internet connection\",\n    \"slowtest: marks particularly slow tests that do not need to be run for every testenv variant\",\n]\n\n\n################################################################\n#\n# coverage\n#\n[tool.coverage.run]\nsource_pkgs = [\n    \"lektor\",\n]\nomit = [\n    # test_pluginsystem.py has a test that installs a Lektor plugin from PyPI\n    # into a pytest temporary directory\n    \"*/pytest-*/*\",\n]\nparallel = true\n\n[tool.coverage.paths]\npaths = [\n    \"lektor\",\n    \".tox/py*/*/lektor\",\n]\n\n[tool.coverage.report]\nexclude_lines = [\n    \"pragma: no cover\",\n    '^\\s*\\.\\.\\.\\s*$',\n    '^\\s*raise\\s+NotImplementedError\\(\\)\\s*$',\n    '^if TYPE_CHECKING:\\s*',\n]\n\n################################################################\n#\n# pylint\n#\n[tool.pylint.main]\nignore = [\".git\"]\nload-plugins = \"pylint.extensions.no_self_use\"\n\n[tool.pylint.format]\nmax-line-length = 91\nmax-module-lines = 2000\n\n[tool.pylint.design]\nmax-attributes = 20\nmax-positional-arguments = 7   # default is 5\nmax-locals = 30\nmax-branches = 20\nmax-nested-blocks = 8\nmax-returns = 8\n\n\n[tool.pylint.\"messages control\"]\ndisable = [\n    \"redundant-u-string-prefix\",\n    \"consider-using-f-string\",\n    \"missing-docstring\",\n    \"unused-argument\",\n    \"redefined-outer-name\",\n    \"invalid-name\",\n    \"protected-access\",\n    \"fixme\",\n    \"broad-except\",\n    \"redefined-builtin\",\n    \"too-many-arguments\",\n    \"too-few-public-methods\",\n    \"too-many-public-methods\",\n    \"duplicate-code\",\n    \"unnecessary-dunder-call\",\n]\n\n[tool.mypy]\nfiles = [\"$MYPY_CONFIG_FILE_DIR/lektor\"]\n\nplugins = [\n    \"marshmallow_dataclass.mypy\",\n]\n\nshow_error_codes = true\nerror_summary = true\nwarn_unused_configs = true\nwarn_unused_ignores = true\nwarn_redundant_casts = true\n\nstrict = true\n#implicit_reexport = true\n\n# We have just started to add annotation.  For now, ignore all errors\n# by default. (This can be disabled on a per-package or per-module\n# basis in the overrides.)\nignore_errors = true\n\n[[tool.mypy.overrides]]\n# Packages and modules we want to check\nmodule = [\n    \"lektor.assets\",\n    \"lektor.constants\",\n    \"lektor.devserver\",\n    \"lektor.packages\",\n    \"lektor.admin.*\",\n    \"lektor.imagetools.*\",\n    \"test_packages\",\n]\nignore_errors = false\n\n[[tool.mypy.overrides]]\nmodule = [\n    \"lektor.packages\",\n]\ndisallow_untyped_defs = false\n\n[[tool.mypy.overrides]]\nmodule = [\n    \"lektor.admin.*\",\n    \"lektor.devserver\",\n    \"lektor.imagetools.*\",\n    \"lektor.packages\",\n]\ndisallow_untyped_calls = false\n\n[[tool.mypy.overrides]]\nmodule = [\n    \"lektor.admin.*\",\n]\nwarn_return_any = false\n"
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "tox.ini",
          "type": "blob",
          "size": 2.5791015625,
          "content": "[tox]\nminversion = 4.1\nenvlist =\n    lint\n    {py39,py310,py311,py312,py313}{,-mistune0}\n    py311-noutils\n    py311-tzdata\n    cover-{clean,report}\nisolated_build = true\n\n[gh-actions]\npython =\n    3.9: py39, cover\n    3.10: py310, cover\n    3.11: py311, cover\n    3.12: py312, cover\n    3.13: py313, cover\n\n[testenv]\ncommands =\n    coverage run -m pytest {posargs:tests -ra --durations=20}\npassenv = USERNAME\nsetenv =\n    # skip building frontend js/css\n    HATCH_BUILD_NO_HOOKS=true\n    # do not run marked slow tests in every variant testenv\n    {mistune0,noutils,tzdata}: PYTEST_ADDOPTS=-m \"not slowtest\"\ndeps =\n    pytest>=6\n    pytest-click\n    pytest-mock\n    coverage[toml]\n    importlib_metadata; python_version<\"3.10\"\n    iniconfig\n    hatchling\n    mistune0: mistune<2\n    tzdata: tzdata\ndepends =\n    py{39,310,311,312,313}: cover-clean\n    cover-report: py{39,310,311,312,313}{,-mistune0,-noutils,-tzdata}\n# XXX: I've been experiencing sporadic failures when running tox in parallel mode.\n# The crux of the error messages when this happens appears to be something like:\n#\n#     WARNING: Skipping page https://pypi.org/simple/coverage/ because the GET request\n#         got Content-Type: Unknown. The only supported Content-Types are\n#         application/vnd.pypi.simple.v1+json, application/vnd.pypi.simple.v1+html, and\n#         text/html\n#\n#     ERROR: Could not find a version that satisfies the requirement\n#         coverage[toml] (from versions: none)\n#\n# It may be this issue: https://github.com/pypa/pip/issues/11340\n#\n# Setting download=true — which tells tox to upgrade pip to the latest version —\n# seems to fix the issue for me.\n#\n# Hopefully, at some point this can be removed.\ndownload = true\n\n[testenv:py{39,310,311,312,313}-noutils]\n# To test in environment without external utitilities like ffmpeg and git installed,\n# break PATH in noutils environment(s).\nallowlist_externals = env\ncommands =\n    env PATH=\"{env_bin_dir}\" coverage run -m pytest {posargs:tests -ra --durations=20}\n\n[testenv:lint]\nbase_python = py313,py312,py311,py310,py39\nuse_develop = true\ndeps =\n    pylint==3.3.2\n    pytest>=6\n    pytest-mock\n    importlib_metadata; python_version<\"3.10\"\n    iniconfig\ncommands =\n    pylint {posargs:lektor tests}\n\n[testenv:cover-clean]\ndeps = coverage[toml]\nskip_install = true\ncommands = coverage erase\n\n[testenv:cover-report]\ndeps = coverage[toml]\nskip_install = true\ncommands =\n    -coverage combine --append\n    coverage xml\n    coverage report\n\n[flake8]\nmax-line-length = 91\nextend-ignore =\n    # E203: Whitespace before ':'\n    E203,\n    # E402: Module level import not at top of file\n    E402\n"
        }
      ]
    }
  ]
}