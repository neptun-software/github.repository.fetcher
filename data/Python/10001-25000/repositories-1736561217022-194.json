{
  "metadata": {
    "timestamp": 1736561217022,
    "page": 194,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjIwMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "saltstack/salt",
      "stars": 14279,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".backportrc.json",
          "type": "blob",
          "size": 0.359375,
          "content": "{\n  \"repoOwner\": \"saltstack\",\n  \"repoName\": \"salt\",\n  \"targetBranchChoices\": [\"master\", \"3006.x\", \"3005.x\", \"freeze\"],\n  \"autoMerge\": false,\n  \"autoMergeMethod\": \"rebase\",\n  \"branchLabelMapping\": {\n    \"^backport:(.+)$\": \"$1\"\n  },\n  \"prTitle\": \"[BACKPORT] {commitMessages}\",\n  \"publishStatusCommentOnSuccess\": true,\n  \"sourcePRLabels\": [\n    \"backport:complete\"\n  ]\n}\n"
        },
        {
          "name": ".bandit",
          "type": "blob",
          "size": 0.0673828125,
          "content": "[bandit]\nexclude: salt/ext/tornado/*,tests/minionswarm.py\nskip: B701\n"
        },
        {
          "name": ".codeclimate.yml",
          "type": "blob",
          "size": 0.35546875,
          "content": "version: \"2\"\n\nlanguages:\n   Ruby: false\n   JavaScript: false\n   Python: true\n   PHP: false\n\nexclude_patterns:\n  - \"*.js\"\n  - \"*.rb\"\n  - \"*.php\"\n  - \"tests/\"\n\nplugins:\n  radon:\n    enabled: true\n    exclude_patterns:\n      - \"templates/\"\n    config:\n      threshold: \"D\"\n\nchecks:\n  argument-count:\n    enabled: false\n  similar-code:\n    config:\n      threshold: 40\n"
        },
        {
          "name": ".codecov.yml",
          "type": "blob",
          "size": 3.1845703125,
          "content": "codecov:\n  ci:\n    - github.com\n\n  max_report_age: 72          # The age, in hours, you want coverage reports to expire at, or if you\n                              # want to disable this check. Expired reports will not be processed by codecov.\n  require_ci_to_pass: false\n\n  notify:\n    wait_for_ci: true         # Should Codecov wait for all CI statuses to complete before sending ours.\n                              # Note: Codecov considers all non-codecov statuses to be CI statuses\n#    manual_trigger: true      # We manually tell codecov to merge and process all uploaded coverage reports\n\n\nignore:\n  - ^*.py$                    # python files at the repo root, ie, setup.py\n  - doc/.*                    # ignore any code under doc/\n  - salt/ext/.*               # ignore any code under salt/ext\n\ncoverage:\n  round: up\n  range: 70..100\n  precision: 2\n\n  status:\n    project:\n      default:\n        target: auto          # auto compares coverage to the previous base commit\n        threshold: 5%         # adjust accordingly based on how flaky your tests are\n                              # this allows a 5% drop from the previous base commit coverage\n        flags:\n          - salt\n          - tests\n\n      salt:                   # declare a new status context \"salt\"\n        paths:\n          - \"!tests/\"         # remove all files in \"tests/\"\n        target: auto          # will use the coverage from the base commit (pull request base or parent commit) coverage to compare against.\n        flags:\n          - salt\n\n      tests:                  # declare a new status context \"tests\"\n        paths:\n          - \"!salt/\"          # only include coverage in \"tests/\" folder\n        target: auto          # auto while we get this going\n        flags:\n          - tests\n\n    patch:                    # pull requests only: this commit status will measure the\n                              # entire pull requests Coverage Diff. Checking if the lines\n                              # adjusted are covered at least X%.\n      default:\n        target: auto          # auto compares coverage to the previous base commit\n        threshold: 5%         # adjust accordingly based on how flaky your tests are\n                              # this allows a 5% drop from the previous base commit coverage\n\nflags:\n  salt:\n    paths:\n      - salt/\n    carryforward: false       # https://docs.codecov.io/docs/carryforward-flags\n  tests:\n    paths:\n      - tests/\n    carryforward: false\n  pkg:\n    paths:\n      - pkg/tests\n    carryforward: false\n  unit:\n    paths:\n      - tests/unit\n      - tests/pytests/unit\n    carryforward: false\n  functional:\n    paths:\n      - tests/pytests/functional\n    carryforward: false\n  scenarios:\n    paths:\n      - tests/pytests/scenarios\n    carryforward: false\n  integration:\n    paths:\n      - tests/integration\n      - tests/pytests/integration\n    carryforward: false\n\ncomment:\n  layout: \"reach, diff, flags, files\"\n  behavior: new                  # Comment posting behaviour\n                                 #   default: update, if exists. Otherwise post new.\n                                 #   once: update, if exists. Otherwise post new. Skip if deleted.\n                                 #   new: delete old and post new.\n"
        },
        {
          "name": ".coveragerc",
          "type": "blob",
          "size": 1.6142578125,
          "content": "[run]\nbranch = True\ncover_pylib = False\nparallel = True\nconcurrency = multiprocessing\nrelative_files = True\nomit =\n  setup.py\n  .nox/*\nsource_pkgs =\n  pkg.tests\n  salt\n  tests\n  tools\ndisable_warnings = module-not-imported\n\n\n[report]\n# Regexes for lines to exclude from consideration\nexclude_lines =\n    # Have to re-enable the standard pragma\n    pragma: no cover\n\n    # Don't complain about missing debug-only code:\n    def __repr__\n\n    # Don't complain if tests don't hit defensive assertion code:\n    raise AssertionError\n    raise NotImplementedError\n\n    # Don't complain if non-runnable code isn't run:\n    if 0:\n    if False:\n    if __name__ == .__main__.:\n\n\nignore_errors = True\n\n[paths]\nsalt =\n  salt/\n  artifacts/salt/lib/python3.*/site-packages/salt\n  **/testing/salt/\n  **\\testing\\salt\ntests =\n  tests/\n  **/testing/tests/\n  **\\testing\\tests\nextension_modules =\n  tests/integration/files/extension_modules/\n  */extension_modules/\n  *\\extension_modules\\\nexecutors =\n  tests/integration/files/file/base/_executors/\n  */extmods/executors/\n  *\\extmods\\executors\\\ngrains =\n  tests/integration/files/file/base/_grains/\n  */extmods/grains/\n  *\\extmods\\grains\\\nmodules =\n  tests/integration/files/file/base/_modules/\n  */extmods/modules/\n  *\\extmods\\modules\\\nrenderers =\n  tests/integration/files/file/base/_renderers/\n  */extmods/renderers/\n  *\\extmods\\renderers\\\nrunners =\n  tests/integration/files/file/base/_runners/\n  */extmods/runners/\n  *\\extmods\\runners\\\nstates =\n  tests/integration/files/file/base/_states/\n  */extmods/states/\n  *\\extmods\\states\\\nwheel =\n  tests/integration/files/file/base/_wheel/\n  */extmods/wheel/\n  *\\extmods\\wheel\\\n"
        },
        {
          "name": ".editorconfig",
          "type": "blob",
          "size": 0.1171875,
          "content": "# For more info on EditorConfig, see: http://EditorConfig.org\n\nroot = true\n\n[*.py]\nindent_style = space\nindent_size = 4\n"
        },
        {
          "name": ".git-blame-ignore-revs",
          "type": "blob",
          "size": 0.109375,
          "content": "# Blacken Salt\n0b2a5613b345f17339cb90e60b407199b3d26980\n# Blacken Docs\n5e72e192f9713719ef5ec066c7b6c96302327ec6\n"
        },
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.0576171875,
          "content": "CHANGELOG.md merge=union\ndocs/topics/release/* merge=union\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 2.1884765625,
          "content": "/build\n/src\n__pycache__/\n*.py[co]\npkg/arch/*.tar.xz\n*.sw[a-p]\ndoc/_build\ndoc/doc-archive.tar.gz\ndist\nMANIFEST\n*~\n*#\n*.wpr\n*.wpu\n*.DS_Store\n.pytest_cache\nPipfile.lock\n.mypy_cache/*\n.tools-venvs/\n\n# virtualenv\n# - ignores directories of a virtualenv when you create it right on\n#   top of salt such as\n# - /some/path$ git clone https://github.com/thatch45/salt.git\n# - /some/path$ virtualenv --python=/usr/bin/python2.6 salt\n/.?env/\n/bin/\n/etc/\n/include/\n/lib/\n/lib64/\n/local/\n/pip/\n/share/\n/tests/integration/tmp/\n/tests/cachedir/\n/tests/unit/templates/roots/\n/var/\n/.?venv/\n\n# setuptools stuff\n*.egg-info\n\n# code coverage outputs genereated by coverage.py\n.coverage\n.coverage.*\ncoverage.xml\nhtmlcov/\n\n# IDE files\n/.settings\n/.project\n/.pydevproject\n/.idea\n/.ropeproject\n.ropeproject\n*_flymake.py\n/*.iml\n*.sublime-project\n*.sublime-workspace\n\n# ignore ctags file\ntags\n\n# ignore Vagrant file\n**/Vagrantfile\n**/.vagrant\n\n# Compiled translation files should not be VCS'ed\n# locale/zh_CN/LC_MESSAGES/topics/virt/nic.mo\n*.mo\n.doctrees\n\n# Allow a user to set their own _version.txt for testing\n_version.txt\n\n# Ignore auto generated _syspaths.py file\n_syspaths.py\n\n# Ignore grains file written out during tests\ntests/integration/files/conf/grains\n/salt/_syspaths.py\n\n# ignore the local root\n/root/**\n\n# Ignore file cache created by jinja tests\ntests/unit/templates/roots\n\n# Pycharm\n.idea\nvenv/\n\n# VS Code\n.vscode\n\n# Ignore the log directory created by tests\n/logs\ntests/integration/cloud/providers/logs\n\n# Private keys from the integration tests\ntests/integration/cloud/providers/pki/minions\n/helpers/\n\n# Ignore tox virtualenvs\n/.tox/\n\n# Ignore nox virtualenvs\n/.nox/\n\n# Ignore pyenv files\n.python-version\n\n/artifacts/\nrequirements/static/*/py*/*.log\n\n# Vim's default session file\nSession.vim\n\n# VM task state directory\n.vms-state/\n\n# Nox requirements archives\nnox.*.tar.bzip2\nnox.*.tar.gz\nnox.*.tar.xz\n\n# Debian packages\n/debian\n/pkg/debian/.debhelper\n/pkg/debian/*substvars\n/pkg/debian/*.debhelper*\n/pkg/debian/files\n/pkg/debian/salt-api\n/pkg/debian/salt-common\n/pkg/debian/salt-cloud\n/pkg/debian/salt-dbg\n/pkg/debian/salt-master\n/pkg/debian/salt-minion\n/pkg/debian/salt-ssh\n/pkg/debian/salt-syndic\n/pkg/debian/debhelper-build-stamp\n\n.tools-venvs\n"
        },
        {
          "name": ".mention-bot",
          "type": "blob",
          "size": 0.3408203125,
          "content": "{\n  \"alwaysNotifyForPaths\": [\n    {\n      \"name\": \"ryan-lane\",\n      \"files\": [\"salt/**/*boto*.py\"],\n      \"skipTeamPrs\": false\n    },\n    {\n      \"name\": \"tkwilliams\",\n      \"files\": [\"salt/**/*boto*.py\"],\n      \"skipTeamPrs\": false\n    }\n  ],\n \"skipTitle\": \"Merge forward\",\n \"userBlacklist\": [\"cvrebert\", \"markusgattol\", \"olliewalsh\", \"basepi\"]\n}\n"
        },
        {
          "name": ".pre-commit-config.yaml",
          "type": "blob",
          "size": 65.59765625,
          "content": "---\ndefault_language_version:\n  python: python3\n\nexclude: ^(doc/_static/.*|doc/_themes/.*)$\nrepos:\n\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.5.0\n    hooks:\n      - id: check-merge-conflict  # Check for files that contain merge conflict strings.\n      - id: trailing-whitespace   # Trims trailing whitespace.\n        args:\n          - --markdown-linebreak-ext=md\n        exclude: >\n          (?x)^(\n            pkg/macos/pkg-resources/.*\\.rtf\n          )$\n\n      - id: mixed-line-ending     # Replaces or checks mixed line ending.\n        args:\n          - --fix=lf\n      - id: end-of-file-fixer     # Makes sure files end in a newline and only a newline.\n      - id: check-ast             # Simply check whether files parse as valid python.\n        exclude: >\n          (?x)^(\n            templates/.*\n          )$\n      - id: check-case-conflict   # Check for files with names that would conflict on a\n                                  # case-insensitive filesystem like MacOS HFS+ or Windows FAT.\n      - id: check-json            # Attempts to load all json files to verify syntax.\n      - id: check-symlinks        # Checks for symlinks which do not point to anything.\n      - id: debug-statements      # Check for debugger imports and py37+ breakpoint() calls in python source.\n        exclude: >\n          (?x)^(\n            templates/.*\n          )$\n      - id: fix-byte-order-marker # removes UTF-8 byte order marker\n      - id: forbid-submodules     # forbids any submodules in the repository.\n      - id: fix-encoding-pragma   # Remove `# -*- coding: utf-8 -*-` from the top of python files.\n        args:\n          - --remove\n        exclude: >\n          (?x)^(\n            salt/ext/.*\n          )$\n\n  - repo: https://github.com/saltstack/python-tools-scripts\n    rev: \"0.20.0\"\n    hooks:\n      - id: tools\n        alias: check-changelog-entries\n        name: Check Changelog Entries\n        args:\n          - pre-commit\n          - changelog\n          - pre-commit-checks\n\n      - id: tools\n        alias: generate-workflows\n        name: Generate GitHub Workflow Templates\n        files: ^(cicd/shared-gh-workflows-context\\.yml|tools/precommit/workflows\\.py|.github/workflows/.*)$\n        pass_filenames: false\n        args:\n          - pre-commit\n          - workflows\n          - generate-workflows\n\n      - id: tools\n        alias: actionlint\n        name: Lint GitHub Actions Workflows\n        files: \"^.github/workflows/\"\n        types:\n          - yaml\n        args:\n          - pre-commit\n          - workflows\n          - actionlint\n\n      - id: tools\n        alias: check-docs\n        name: Check Docs\n        files: ^(salt/.*\\.py|doc/ref/.*\\.rst)$\n        args:\n          - pre-commit\n          - docs\n          - check\n\n      - id: tools\n        alias: check-docstrings\n        name: Check docstrings\n        files: salt/.*\\.py$\n        exclude: >\n            (?x)^(\n                templates/.*|\n                salt/ext/.*|\n            )$\n        args:\n          - pre-commit\n          - docstrings\n          - check\n\n      - id: tools\n        alias: check-known-missing-docstrings\n        name: Check Known Missing Docstrings\n        stages: [manual]\n        files: salt/.*\\.py$\n        exclude: >\n            (?x)^(\n                templates/.*|\n                salt/ext/.*|\n            )$\n        args:\n          - pre-commit\n          - docstrings\n          - check\n\n      - id: tools\n        alias: loader-check-virtual\n        name: Check loader modules __virtual__\n        files: salt/.*\\.py$\n        exclude: >\n            (?x)^(\n                templates/.*|\n                salt/ext/.*|\n            )$\n        args:\n          - pre-commit\n          - salt-loaders\n          - check-virtual\n\n      - id: tools\n        alias: check-filemap\n        name: Check Filename Map Change Matching\n        files: ^tests/(filename_map\\.yml|.*\\.py)$\n        pass_filenames: false\n        args:\n          - pre-commit\n          - filemap\n          - check\n\n  # ----- Packaging Requirements ------------------------------------------------------------------------------------>\n\n  - repo: https://github.com/saltstack/pip-tools-compile-impersonate\n    rev: \"4.8\"\n    hooks:\n\n      - id: pip-tools-compile\n        alias: compile-pkg-linux-3.8-zmq-requirements\n        name: Linux Packaging Py3.8 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(linux\\.in|py3\\.8/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-linux-3.9-zmq-requirements\n        name: Linux Packaging Py3.9 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(linux\\.in|py3\\.9/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-linux-3.10-zmq-requirements\n        name: Linux Packaging Py3.10 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(linux\\.in|py3\\.10/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-linux-3.11-zmq-requirements\n        name: Linux Packaging Py3.11 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(linux\\.in|py3\\.11/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-linux-3.12-zmq-requirements\n        name: Linux Packaging Py3.12 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(linux\\.in|py3\\.12/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-linux-3.13-zmq-requirements\n        name: Linux Packaging Py3.13 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(linux\\.in|py3\\.13/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/linux.in\n\n\n      - id: pip-tools-compile\n        alias: compile-pkg-freebsd-3.8-zmq-requirements\n        name: FreeBSD Packaging Py3.8 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(freebsd\\.in|py3\\.8/freebsd\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-freebsd-3.9-zmq-requirements\n        name: FreeBSD Packaging Py3.9 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(freebsd\\.in|py3\\.9/freebsd\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-freebsd-3.10-zmq-requirements\n        name: FreeBSD Packaging Py3.10 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(freebsd\\.in|py3\\.10/freebsd\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-freebsd-3.11-zmq-requirements\n        name: FreeBSD Packaging Py3.11 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(freebsd\\.in|py3\\.11/freebsd\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-freebsd-3.12-zmq-requirements\n        name: FreeBSD Packaging Py3.12 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(freebsd\\.in|py3\\.12/freebsd\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-freebsd-3.13-zmq-requirements\n        name: FreeBSD Packaging Py3.13 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto)\\.txt|static/pkg/(freebsd\\.in|py3\\.13/freebsd\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-darwin-3.9-zmq-requirements\n        name: Darwin Packaging Py3.9 ZeroMQ Requirements\n        files: ^(requirements/((base|zeromq|crypto|darwin)\\.txt|static/pkg/(darwin\\.in|py3\\.9/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/darwin.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-darwin-3.10-zmq-requirements\n        name: Darwin Packaging Py3.10 ZeroMQ Requirements\n        files: ^(requirements/((base|zeromq|crypto|darwin)\\.txt|static/pkg/(darwin\\.in|py3\\.10/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/darwin.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-darwin-3.11-zmq-requirements\n        name: Darwin Packaging Py3.11 ZeroMQ Requirements\n        files: ^(requirements/((base|zeromq|crypto|darwin)\\.txt|static/pkg/(darwin\\.in|py3\\.11/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/darwin.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-darwin-3.12-zmq-requirements\n        name: Darwin Packaging Py3.12 ZeroMQ Requirements\n        files: ^(requirements/((base|zeromq|crypto|darwin)\\.txt|static/pkg/(darwin\\.in|py3\\.12/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/darwin.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-darwin-3.13-zmq-requirements\n        name: Darwin Packaging Py3.13 ZeroMQ Requirements\n        files: ^(requirements/((base|zeromq|crypto|darwin)\\.txt|static/pkg/(darwin\\.in|py3\\.13/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/darwin.in\n\n\n      - id: pip-tools-compile\n        alias: compile-pkg-windows-3.8-zmq-requirements\n        name: Windows Packaging Py3.8 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto|windows)\\.txt|static/pkg/(windows\\.in|py3\\.8/windows\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-windows-3.9-zmq-requirements\n        name: Windows Packaging Py3.9 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto|windows)\\.txt|static/pkg/(windows\\.in|py3\\.9/windows\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-windows-3.10-zmq-requirements\n        name: Windows Packaging Py3.10 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto|windows)\\.txt|static/pkg/(windows\\.in|py3\\.10/windows\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-windows-3.11-zmq-requirements\n        name: Windows Packaging Py3.11 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto|windows)\\.txt|static/pkg/(windows\\.in|py3\\.11/windows\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-windows-3.12-zmq-requirements\n        name: Windows Packaging Py3.12 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto|windows)\\.txt|static/pkg/(windows\\.in|py3\\.12/windows\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-pkg-windows-3.13-zmq-requirements\n        name: Windows Packaging Py3.13 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|crypto|windows)\\.txt|static/pkg/(windows\\.in|py3\\.13/windows\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --no-emit-index-url\n          - requirements/static/pkg/windows.in\n\n\n  # <---- Packaging Requirements -------------------------------------------------------------------------------------\n\n  # ----- CI Requirements ------------------------------------------------------------------------------------------->\n      - id: pip-tools-compile\n        alias: compile-ci-linux-3.8-zmq-requirements\n        name: Linux CI Py3.8 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(linux\\.in|common\\.in)|py3\\.8/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-3.9-zmq-requirements\n        name: Linux CI Py3.9 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(linux\\.in|common\\.in)|py3\\.9/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-3.10-zmq-requirements\n        name: Linux CI Py3.10 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(linux\\.in|common\\.in)|py3\\.10/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-3.11-zmq-requirements\n        name: Linux CI Py3.11 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(linux\\.in|common\\.in)|py3\\.11/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-3.12-zmq-requirements\n        name: Linux CI Py3.12 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(linux\\.in|common\\.in)|py3\\.12/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/linux.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-3.13-zmq-requirements\n        name: Linux CI Py3.13 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(linux\\.in|common\\.in)|py3\\.13/linux\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/linux.in\n\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-crypto-3.8-requirements\n        name: Linux CI Py3.8 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.8/linux-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=linux\n          - --out-prefix=linux\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-crypto-3.9-requirements\n        name: Linux CI Py3.9 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.9/linux-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=linux\n          - --out-prefix=linux\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-crypto-3.10-requirements\n        name: Linux CI Py3.10 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.10/linux-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=linux\n          - --out-prefix=linux\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-crypto-3.11-requirements\n        name: Linux CI Py3.11 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.11/linux-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=linux\n          - --out-prefix=linux\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-crypto-3.12-requirements\n        name: Linux CI Py3.12 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.12/linux-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=linux\n          - --out-prefix=linux\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-linux-crypto-3.13-requirements\n        name: Linux CI Py3.13 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.12/linux-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=linux\n          - --out-prefix=linux\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-3.8-zmq-requirements\n        name: FreeBSD CI Py3.8 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((freebsd|common)\\.in|py3\\.8/freebsd\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/freebsd.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-3.9-zmq-requirements\n        name: FreeBSD CI Py3.9 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((freebsd|common)\\.in|py3\\.9/freebsd\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/freebsd.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-3.10-zmq-requirements\n        name: FreeBSD CI Py3.10 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((freebsd|common)\\.in|py3\\.10/freebsd\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/freebsd.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-3.11-zmq-requirements\n        name: FreeBSD CI Py3.11 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((freebsd|common)\\.in|py3\\.11/freebsd\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/freebsd.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-3.12-zmq-requirements\n        name: FreeBSD CI Py3.12 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(freebsd|common)\\.in|py3\\.12/freebsd\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/freebsd.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-3.13-zmq-requirements\n        name: FreeBSD CI Py3.13 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(freebsd|common)\\.in|py3\\.13/freebsd\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=freebsd\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/freebsd.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/freebsd.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-crypto-3.8-requirements\n        name: FreeBSD CI Py3.8 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.8/freebsd-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=freebsd\n          - --out-prefix=freebsd\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-crypto-3.9-requirements\n        name: FreeBSD CI Py3.9 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.9/freebsd-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=freebsd\n          - --out-prefix=freebsd\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-crypto-3.10-requirements\n        name: FreeBSD CI Py3.10 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.10/freebsd-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=freebsd\n          - --out-prefix=freebsd\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-crypto-3.11-requirements\n        name: FreeBSD CI Py3.11 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.11/freebsd-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=freebsd\n          - --out-prefix=freebsd\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-crypto-3.12-requirements\n        name: FreeBSD CI Py3.12 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.12/freebsd-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=freebsd\n          - --out-prefix=freebsd\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-freebsd-crypto-3.13-requirements\n        name: FreeBSD CI Py3.13 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.13/freebsd-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=freebsd\n          - --out-prefix=freebsd\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-3.9-zmq-requirements\n        name: Darwin CI Py3.9 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((darwin|common)\\.in|py3\\.9/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/darwin.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/darwin.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-3.10-zmq-requirements\n        name: Darwin CI Py3.10 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((darwin|common)\\.in|py3\\.10/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/darwin.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/darwin.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-3.11-zmq-requirements\n        name: Darwin CI Py3.11 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((darwin|common)\\.in|py3\\.11/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/darwin.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/darwin.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-3.12-zmq-requirements\n        name: Darwin CI Py3.12 ZeroMQ Requirements\n        files: ^(requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(darwin|common)\\.in|py3\\.12/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/darwin.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/darwin.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-3.13-zmq-requirements\n        name: Darwin CI Py3.13 ZeroMQ Requirements\n        files: ^(requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(darwin|common)\\.in|py3\\.13/darwin\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=darwin\n          - --include=requirements/darwin.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/darwin.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/darwin.in\n\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-crypto-3.9-requirements\n        name: Darwin CI Py3.9 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.9/darwin-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=darwin\n          - --out-prefix=darwin\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-crypto-3.10-requirements\n        name: Darwin CI Py3.10 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.10/darwin-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=darwin\n          - --out-prefix=darwin\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-crypto-3.11-requirements\n        name: Darwin CI Py3.11 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.11/darwin-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=darwin\n          - --out-prefix=darwin\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-crypto-3.12-requirements\n        name: Darwin CI Py3.12 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.12/darwin-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=darwin\n          - --out-prefix=darwin\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-darwin-crypto-3.13-requirements\n        name: Darwin CI Py3.13 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.13/darwin-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=darwin\n          - --out-prefix=darwin\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-3.8-zmq-requirements\n        name: Windows CI Py3.8 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((windows|common)\\.in|py3\\.8/windows\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/windows.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-3.9-zmq-requirements\n        name: Windows CI Py3.9 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((windows|common)\\.in|py3\\.9/windows\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/windows.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-3.10-zmq-requirements\n        name: Windows CI Py3.10 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((windows|common)\\.in|py3\\.10/windows\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/windows.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-3.11-zmq-requirements\n        name: Windows CI Py3.11 ZeroMQ Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/((windows|common)\\.in|py3\\.11/windows\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/windows.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-3.12-zmq-requirements\n        name: Windows CI Py3.12 ZeroMQ Requirements\n        files: requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(windows|common)\\.in|py3\\.12/windows\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/windows.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/windows.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-3.13-zmq-requirements\n        name: Windows CI Py3.13 ZeroMQ Requirements\n        files: requirements/((base|zeromq|pytest)\\.txt|static/((ci|pkg)/(windows|common)\\.in|py3\\.13/windows\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=windows\n          - --include=requirements/windows.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/windows.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/windows.in\n\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-crypto-3.8-requirements\n        name: Windows CI Py3.8 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.8/windows-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=windows\n          - --out-prefix=windows\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-crypto-3.9-requirements\n        name: Windows CI Py3.9 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.9/windows-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=windows\n          - --out-prefix=windows\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-crypto-3.10-requirements\n        name: Windows CI Py3.10 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.10/windows-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=windows\n          - --out-prefix=windows\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-crypto-3.11-requirements\n        name: Windows CI Py3.11 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.11/windows-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=windows\n          - --out-prefix=windows\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-crypto-3.12-requirements\n        name: Windows CI Py3.12 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.12/windows-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=windows\n          - --out-prefix=windows\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-windows-crypto-3.13-requirements\n        name: Windows CI Py3.13 Crypto Requirements\n        files: ^requirements/(crypto\\.txt|static/ci/(crypto\\.in|py3\\.13/windows-crypto\\.txt))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=windows\n          - --out-prefix=windows\n          - --no-emit-index-url\n          - requirements/static/ci/crypto.in\n\n\n  # <---- CI Requirements --------------------------------------------------------------------------------------------\n\n  # ----- Cloud CI Requirements ------------------------------------------------------------------------------------->\n      - id: pip-tools-compile\n        alias: compile-ci-cloud-3.8-requirements\n        name: Cloud CI Py3.8 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/(pkg/linux\\.in|ci/((cloud|common)\\.in|py3\\.8/cloud\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --no-emit-index-url\n          - requirements/static/ci/cloud.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-cloud-3.9-requirements\n        name: Cloud CI Py3.9 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/(pkg/linux\\.in|ci/((cloud|common)\\.in|py3\\.9/cloud\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --no-emit-index-url\n          - requirements/static/ci/cloud.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-cloud-3.10-requirements\n        name: Cloud CI Py3.10 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/(pkg/linux\\.in|ci/((cloud|common)\\.in|py3\\.10/cloud\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --no-emit-index-url\n          - requirements/static/ci/cloud.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-cloud-3.11-requirements\n        name: Cloud CI Py3.11 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/(pkg/linux\\.in|ci/((cloud|common)\\.in|py3\\.11/cloud\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --no-emit-index-url\n          - requirements/static/ci/cloud.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-cloud-3.12-requirements\n        name: Cloud CI Py3.12 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/(pkg/linux\\.in|ci/((cloud|common)\\.in|py3\\.12/cloud\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/cloud.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-cloud-3.13-requirements\n        name: Cloud CI Py3.13 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/(pkg/linux\\.in|ci/((cloud|common)\\.in|py3\\.13/cloud\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/pytest.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/cloud.in\n  # <---- Cloud CI Requirements --------------------------------------------------------------------------------------\n\n  # ----- Doc CI Requirements --------------------------------------------------------------------------------------->\n      - id: pip-tools-compile\n        alias: compile-doc-requirements\n        name: Docs CI Py3.8 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/ci/(docs|common|linux)\\.in|static/pkg/linux\\.in|static/pkg/.*/linux\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/docs.in\n\n      - id: pip-tools-compile\n        alias: compile-doc-requirements\n        name: Docs CI Py3.9 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/ci/(docs|common|linux)\\.in|static/pkg/linux\\.in|static/pkg/.*/linux\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/docs.in\n\n      - id: pip-tools-compile\n        alias: compile-doc-requirements\n        name: Docs CI Py3.10 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/ci/(docs|common|linux)\\.in|static/pkg/linux\\.in|static/pkg/.*/linux\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/docs.in\n\n      - id: pip-tools-compile\n        alias: compile-doc-requirements\n        name: Docs CI Py3.11 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/ci/(docs|common|linux)\\.in|static/pkg/linux\\.in|static/pkg/.*/linux\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --no-emit-index-url\n          - --platform=linux\n          - requirements/static/ci/docs.in\n\n      - id: pip-tools-compile\n        alias: compile-doc-requirements\n        name: Docs CI Py3.12 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/ci/(docs|common|linux)\\.in|static/pkg/linux\\.in|static/pkg/.*/linux\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/ci/docs.in\n\n      - id: pip-tools-compile\n        alias: compile-doc-requirements\n        name: Docs CI Py3.13 Requirements\n        files: ^requirements/((base|zeromq|pytest)\\.txt|static/ci/(docs|common|linux)\\.in|static/pkg/linux\\.in|static/pkg/.*/linux\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --no-emit-index-url\n          - requirements/static/ci/docs.in\n\n\n  # <---- Doc CI Requirements ----------------------------------------------------------------------------------------\n\n  # ----- Lint CI Requirements -------------------------------------------------------------------------------------->\n\n      - id: pip-tools-compile\n        alias: compile-ci-lint-3.8-requirements\n        name: Lint CI Py3.8 Requirements\n        files: ^requirements/((base|zeromq)\\.txt|static/(pkg/linux\\.in|ci/(linux\\.in|common\\.in|lint\\.in|py3\\.8/linux\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/lint.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-lint-3.9-requirements\n        name: Lint CI Py3.9 Requirements\n        files: ^requirements/((base|zeromq)\\.txt|static/(pkg/linux\\.in|ci/(linux\\.in|common\\.in|lint\\.in|py3\\.9/linux\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/lint.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-lint-3.10-requirements\n        name: Lint CI Py3.10 Requirements\n        files: ^requirements/((base|zeromq)\\.txt|static/(pkg/linux\\.in|ci/(linux\\.in|common\\.in|lint\\.in|py3\\.10/linux\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/lint.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-lint-3.11-requirements\n        name: Lint CI Py3.11 Requirements\n        files: ^requirements/((base|zeromq)\\.txt|static/(pkg/linux\\.in|ci/(linux\\.in|common\\.in|lint\\.in|py3\\.10/linux\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/lint.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-lint-3.12-requirements\n        name: Lint CI Py3.12 Requirements\n        files: ^requirements/((base|zeromq)\\.txt|static/(pkg/linux\\.in|ci/(linux\\.in|common\\.in|lint\\.in|py3\\.12/linux\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/lint.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-lint-3.13-requirements\n        name: Lint CI Py3.13 Requirements\n        files: ^requirements/((base|zeromq)\\.txt|static/(pkg/linux\\.in|ci/(linux\\.in|common\\.in|lint\\.in|py3\\.13/linux\\.txt)))$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=linux\n          - --include=requirements/base.txt\n          - --include=requirements/zeromq.txt\n          - --include=requirements/static/pkg/linux.in\n          - --include=requirements/static/ci/linux.in\n          - --include=requirements/static/ci/common.in\n          - --no-emit-index-url\n          - requirements/static/ci/lint.in\n\n  # <---- Lint CI Requirements ---------------------------------------------------------------------------------------\n\n  # ----- Changelog ------------------------------------------------------------------------------------------------->\n      - id: pip-tools-compile\n        alias: compile-ci-changelog-3.8-requirements\n        name: Changelog CI Py3.8 Requirements\n        files: ^requirements/static/ci/(changelog\\.in|py3\\.8/(changelog|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.8\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/changelog.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-changelog-3.9-requirements\n        name: Changelog CI Py3.9 Requirements\n        files: ^requirements/static/ci/(changelog\\.in|py3\\.9/(changelog|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/changelog.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-changelog-3.10-requirements\n        name: Changelog CI Py3.10 Requirements\n        files: ^requirements/static/ci/(changelog\\.in|py3\\.10/(changelog|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/changelog.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-changelog-3.11-requirements\n        name: Changelog CI Py3.11 Requirements\n        files: ^requirements/static/ci/(changelog\\.in|py3\\.11/(changelog|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/changelog.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-changelog-3.12-requirements\n        name: Changelog CI Py3.12 Requirements\n        files: ^requirements/static/ci/(changelog\\.in|py3\\.12/(changelog|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/changelog.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-changelog-3.13-requirements\n        name: Changelog CI Py3.13 Requirements\n        files: ^requirements/static/ci/(changelog\\.in|py3\\.13/(changelog|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --platform=linux\n          - --no-emit-index-url\n          - requirements/static/ci/changelog.in\n  # <---- Changelog --------------------------------------------------------------------------------------------------\n\n  # ----- Tools ---------------------------------------------------------------------------------------------------->\n      - id: pip-tools-compile\n        alias: compile-ci-tools-3.9-requirements\n        name: Linux CI Py3.9 Tools Requirements\n        files: ^requirements/static/ci/(tools\\.in|py3.9/(tools|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.9\n          - --no-emit-index-url\n          - requirements/static/ci/tools.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-tools-3.10-requirements\n        name: Linux CI Py3.10 Tools Requirements\n        files: ^requirements/static/ci/(tools\\.in|py3.10/(tools|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.10\n          - --no-emit-index-url\n          - requirements/static/ci/tools.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-tools-3.11-requirements\n        name: Linux CI Py3.11 Tools Requirements\n        files: ^requirements/static/ci/(tools\\.in|py3.11/(tools|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.11\n          - --no-emit-index-url\n          - requirements/static/ci/tools.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-tools-3.12-requirements\n        name: Linux CI Py3.12 Tools Requirements\n        files: ^requirements/static/ci/(tools\\.in|py3.12/(tools|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.12\n          - --no-emit-index-url\n          - requirements/static/ci/tools.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-tools-3.13-requirements\n        name: Linux CI Py3.13 Tools Requirements\n        files: ^requirements/static/ci/(tools\\.in|py3.13/(tools|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --build-isolation\n          - --py-version=3.13\n          - --no-emit-index-url\n          - requirements/static/ci/tools.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-tools-virustotal-3.9-requirements\n        name: Linux CI Py3.9 Tools virustotal Requirements\n        files: ^requirements/static/ci/(tools(-virustotal)?\\.in|py3.9/(tools(-virustotal)?|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --py-version=3.9\n          - requirements/static/ci/tools-virustotal.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-tools-virustotal-3.10-requirements\n        name: Linux CI Py3.10 Tools virustotal Requirements\n        files: ^requirements/static/ci/(tools(-virustotal)?\\.in|py3.10/(tools(-virustotal)?|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --py-version=3.10\n          - requirements/static/ci/tools-virustotal.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-tools-virustotal-3.11-requirements\n        name: Linux CI Py3.11 Tools virustotal Requirements\n        files: ^requirements/static/ci/(tools(-virustotal)?\\.in|py3.11/(tools(-virustotal)?|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --py-version=3.11\n          - requirements/static/ci/tools-virustotal.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-tools-virustotal-3.12-requirements\n        name: Linux CI Py3.12 Tools virustotal Requirements\n        files: ^requirements/static/ci/(tools(-virustotal)?\\.in|py3.12/(tools(-virustotal)?|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --py-version=3.12\n          - requirements/static/ci/tools-virustotal.in\n\n      - id: pip-tools-compile\n        alias: compile-ci-tools-virustotal-3.13-requirements\n        name: Linux CI Py3.13 Tools virustotal Requirements\n        files: ^requirements/static/ci/(tools(-virustotal)?\\.in|py3.13/(tools(-virustotal)?|linux)\\.txt)$\n        pass_filenames: false\n        args:\n          - -v\n          - --py-version=3.13\n          - requirements/static/ci/tools-virustotal.in\n  # <---- Tools -----------------------------------------------------------------------------------------------------\n\n  # ----- Code Formatting ------------------------------------------------------------------------------------------->\n  - repo: https://github.com/asottile/pyupgrade\n    rev: v3.15.1\n    hooks:\n      - id: pyupgrade\n        name: Upgrade code for Py3.8+\n        args: [--py38-plus, --keep-mock, --keep-runtime-typing]\n        exclude: >\n          (?x)^(\n            salt/client/ssh/ssh_py_shim.py\n            |\n            salt/client/ssh/wrapper/pillar.py\n            |\n            salt/ext/.*\\.py\n          )$\n\n  - repo: https://github.com/saltstack/pre-commit-remove-import-headers\n    rev: 1.1.0\n    hooks:\n      - id: remove-import-headers\n\n  - repo: https://github.com/saltstack/salt-rewrite\n    # Automatically rewrite code with known rules\n    rev: 2.5.2\n    hooks:\n      - id: salt-rewrite\n        alias: rewrite-salt\n        name: Salt code auto-fixes\n        files: ^salt/.*\\.py$\n        args: [--silent, -F, fix_docstrings, -F, fix_warn_until]\n        exclude: >\n            (?x)^(\n                salt/ext/.*\n            )$\n\n      - id: salt-rewrite\n        alias: rewrite-tests\n        name: Rewrite Salt's Test Suite\n        files: ^tests/.*\\.py$\n        args: [--silent, -E, fix_asserts, -E, fix_docstrings, -E, fix_tornado_imports]\n\n  - repo: https://github.com/timothycrosley/isort\n    rev: 5.13.2\n    hooks:\n      - id: isort\n        additional_dependencies: ['toml']\n        # This tells pre-commit not to pass files to isort.\n        # This should be kept in sync with pyproject.toml\n        exclude: >\n            (?x)^(\n                templates/.*|\n                salt/ext/.*|\n            )$\n\n  - repo: https://github.com/psf/black\n    rev: 24.2.0\n    hooks:\n      - id: black\n        # This tells pre-commit not to pass files to black.\n        # This should be kept in sync with pyproject.toml\n        exclude: >\n            (?x)^(\n                salt/client/ssh/ssh_py_shim\\.py|\n                templates/.*|\n                salt/ext/.*|\n            )$\n\n  - repo: https://github.com/asottile/blacken-docs\n    rev: 1.16.0\n    hooks:\n      - id: blacken-docs\n        args: [--skip-errors]\n        files: ^(doc/)?.*\\.(rst|md)\n        exclude: >\n            (?x)^(\n                rfcs/.*|\n                salt/ext/.*|\n            )$\n        additional_dependencies:\n          - black==24.2.0\n\n  # <---- Code Formatting --------------------------------------------------------------------------------------------\n\n  # ----- Security -------------------------------------------------------------------------------------------------->\n  - repo: https://github.com/PyCQA/bandit\n    rev: \"1.7.7\"\n    hooks:\n      - id: bandit\n        alias: bandit-salt\n        name: Run bandit against Salt\n        args: [--silent, -lll, --skip, \"B701,B324\"]\n        exclude: >\n            (?x)^(\n                templates/.*|\n                salt/ext/.*|\n                tests/.*\n            )$\n        additional_dependencies: ['importlib_metadata<5']\n  - repo: https://github.com/PyCQA/bandit\n    rev: \"1.7.7\"\n    hooks:\n      - id: bandit\n        alias: bandit-tests\n        name: Run bandit against the test suite\n        args: [--silent, -lll, --skip, \"B701,B324\"]\n        files: ^tests/.*\n        exclude: ^tests/minionswarm\\.py\n        additional_dependencies: ['importlib_metadata<5']\n  # <---- Security ---------------------------------------------------------------------------------------------------\n\n  # ----- Pre-Commit ------------------------------------------------------------------------------------------------>\n  - repo: https://github.com/pre-commit/mirrors-mypy\n    rev: v1.8.0\n    hooks:\n      - id: mypy\n        alias: mypy-tools\n        name: Run mypy against tools\n        files: ^tools/.*\\.py$\n        exclude: >\n            (?x)^(\n                templates/.*|\n                salt/.*|\n            )$\n        additional_dependencies:\n          - attrs\n          - rich\n          - types-attrs\n          - types-pyyaml\n          - types-requests\n          - python-tools-scripts==0.20.0\n\n  - repo: https://github.com/saltstack/mirrors-nox\n    rev: v2022.11.21\n    hooks:\n      - id: nox\n        alias: lint-salt\n        name: Lint Salt\n        files: ^((setup|noxfile)|(salt|tools)/.*)\\.py$\n        exclude: >\n            (?x)^(\n                templates/.*|\n                salt/ext/.*|\n            )$\n        args:\n          - -e\n          - lint-salt-pre-commit\n          - --\n        additional_dependencies:\n          - setuptools<58.0\n          - pip>=20.2.4,<21.2\n\n  - repo: https://github.com/saltstack/mirrors-nox\n    rev: v2022.11.21\n    hooks:\n      - id: nox\n        alias: lint-tests\n        name: Lint Tests\n        files: ^tests/.*\\.py$\n        args:\n          - -e\n          - lint-tests-pre-commit\n          - --\n        additional_dependencies:\n          - setuptools<58.0\n          - pip>=20.2.4,<21.2\n  # <---- Pre-Commit -------------------------------------------------------------------------------------------------\n"
        },
        {
          "name": ".pylintrc",
          "type": "blob",
          "size": 24.5498046875,
          "content": "[MAIN]\n\n# Analyse import fallback blocks. This can be used to support both Python 2 and\n# 3 compatible code, which means that the block might have code that exists\n# only in one or another interpreter, leading to false positives when analysed.\nanalyse-fallback-blocks=no\n\n# Clear in-memory caches upon conclusion of linting. Useful if running pylint\n# in a server-like mode.\nclear-cache-post-run=no\n\n# Load and enable all available extensions. Use --list-extensions to see a list\n# all available extensions.\n#enable-all-extensions=\n\n# In error mode, messages with a category besides ERROR or FATAL are\n# suppressed, and no reports are done by default. Error mode is compatible with\n# disabling specific errors.\n#errors-only=\n\n# Always return a 0 (non-error) status code, even if lint errors are found.\n# This is primarily useful in continuous integration scripts.\n#exit-zero=\n\n# A comma-separated list of package or module names from where C extensions may\n# be loaded. Extensions are loading into the active Python interpreter and may\n# run arbitrary code.\nextension-pkg-allow-list=\n\n# A comma-separated list of package or module names from where C extensions may\n# be loaded. Extensions are loading into the active Python interpreter and may\n# run arbitrary code. (This is an alternative name to extension-pkg-allow-list\n# for backward compatibility.)\nextension-pkg-whitelist=\n\n# Return non-zero exit code if any of these messages/categories are detected,\n# even if score is above --fail-under value. Syntax same as enable. Messages\n# specified are enabled, while categories only check already-enabled messages.\nfail-on=\n\n# Specify a score threshold under which the program will exit with error.\nfail-under=10\n\n# Interpret the stdin as a python script, whose filename needs to be passed as\n# the module_or_package argument.\n#from-stdin=\n\n# Files or directories to be skipped. They should be base names, not paths.\nignore=CVS\n\n# Add files or directories matching the regular expressions patterns to the\n# ignore-list. The regex matches against paths and can be in Posix or Windows\n# format. Because '\\\\' represents the directory delimiter on Windows systems,\n# it can't be used as an escape character.\nignore-paths=\n\n# Files or directories matching the regular expression patterns are skipped.\n# The regex matches against base names, not paths. The default value ignores\n# Emacs file locks\nignore-patterns=^\\.#\n\n# List of module names for which member attributes should not be checked\n# (useful for modules/projects where namespaces are manipulated during runtime\n# and thus existing member attributes cannot be deduced by static analysis). It\n# supports qualified module names, as well as Unix pattern matching.\nignored-modules=\n\n# Python code to execute, usually for sys.path manipulation such as\n# pygtk.require().\n#init-hook=\n\n# Use multiple processes to speed up Pylint. Specifying 0 will auto-detect the\n# number of processors available to use, and will cap the count on Windows to\n# avoid hangs.\njobs=1\n\n# Control the amount of potential inferred values when inferring a single\n# object. This can help the performance when dealing with large functions or\n# complex, nested conditions.\nlimit-inference-results=100\n\n# List of plugins (as comma separated values of python module names) to load,\n# usually to register additional checkers.\nload-plugins=saltpylint.fileperms,\n  saltpylint.smartup,\n  saltpylint.blacklist,\n  saltpylint.thirdparty,\n  saltpylint.dunder_del\n\n# Pickle collected data for later comparisons.\npersistent=no\n\n# Minimum Python version to use for version dependent checks. Will default to\n# the version used to run pylint.\npy-version=3.9\n\n# Discover python modules and packages in the file system subtree.\nrecursive=no\n\n# Add paths to the list of the source roots. Supports globbing patterns. The\n# source root is an absolute path or a path relative to the current working\n# directory used to determine a package namespace for modules located under the\n# source root.\nsource-roots=\n\n# When enabled, pylint would attempt to guess common misconfiguration and emit\n# user-friendly hints instead of false-positive error messages.\nsuggestion-mode=yes\n\n# Allow loading of arbitrary C extensions. Extensions are imported into the\n# active Python interpreter and may run arbitrary code.\nunsafe-load-any-extension=no\n\n# In verbose mode, extra non-checker-related info will be displayed.\n#verbose=\n\n\n[BASIC]\n\n# Naming style matching correct argument names.\nargument-naming-style=snake_case\n\n# Regular expression matching correct argument names. Overrides argument-\n# naming-style. If left empty, argument names will be checked with the set\n# naming style.\n#argument-rgx=\n\n# Naming style matching correct attribute names.\nattr-naming-style=snake_case\n\n# Regular expression matching correct attribute names. Overrides attr-naming-\n# style. If left empty, attribute names will be checked with the set naming\n# style.\n#attr-rgx=\n\n# Bad variable names which should always be refused, separated by a comma.\nbad-names=foo,\n          bar,\n          baz,\n          toto,\n          tutu,\n          tata\n\n# Bad variable names regexes, separated by a comma. If names match any regex,\n# they will always be refused\nbad-names-rgxs=\n\n# Naming style matching correct class attribute names.\nclass-attribute-naming-style=any\n\n# Regular expression matching correct class attribute names. Overrides class-\n# attribute-naming-style. If left empty, class attribute names will be checked\n# with the set naming style.\n#class-attribute-rgx=\n\n# Naming style matching correct class constant names.\nclass-const-naming-style=UPPER_CASE\n\n# Regular expression matching correct class constant names. Overrides class-\n# const-naming-style. If left empty, class constant names will be checked with\n# the set naming style.\n#class-const-rgx=\n\n# Naming style matching correct class names.\nclass-naming-style=PascalCase\n\n# Regular expression matching correct class names. Overrides class-naming-\n# style. If left empty, class names will be checked with the set naming style.\n#class-rgx=\n\n# Naming style matching correct constant names.\nconst-naming-style=UPPER_CASE\n\n# Regular expression matching correct constant names. Overrides const-naming-\n# style. If left empty, constant names will be checked with the set naming\n# style.\n#const-rgx=\n\n# Minimum line length for functions/classes that require docstrings, shorter\n# ones are exempt.\ndocstring-min-length=-1\n\n# Naming style matching correct function names.\nfunction-naming-style=snake_case\n\n# Regular expression matching correct function names. Overrides function-\n# naming-style. If left empty, function names will be checked with the set\n# naming style.\n#function-rgx=\n\n# Good variable names which should always be accepted, separated by a comma.\ngood-names=exc,\n           Run,\n           _\n\n# Good variable names regexes, separated by a comma. If names match any regex,\n# they will always be accepted\ngood-names-rgxs=\n\n# Include a hint for the correct naming format with invalid-name.\ninclude-naming-hint=no\n\n# Naming style matching correct inline iteration names.\ninlinevar-naming-style=any\n\n# Regular expression matching correct inline iteration names. Overrides\n# inlinevar-naming-style. If left empty, inline iteration names will be checked\n# with the set naming style.\n#inlinevar-rgx=\n\n# Naming style matching correct method names.\nmethod-naming-style=snake_case\n\n# Regular expression matching correct method names. Overrides method-naming-\n# style. If left empty, method names will be checked with the set naming style.\n#method-rgx=\n\n# Naming style matching correct module names.\nmodule-naming-style=snake_case\n\n# Regular expression matching correct module names. Overrides module-naming-\n# style. If left empty, module names will be checked with the set naming style.\n#module-rgx=\n\n# Colon-delimited sets of names that determine each other's naming style when\n# the name regexes allow several styles.\nname-group=\n\n# Regular expression which should only match function or class names that do\n# not require a docstring.\nno-docstring-rgx=^_\n\n# List of decorators that produce properties, such as abc.abstractproperty. Add\n# to this list to register other decorators that produce valid properties.\n# These decorators are taken in consideration only for invalid-name.\nproperty-classes=abc.abstractproperty\n\n# Regular expression matching correct type alias names. If left empty, type\n# alias names will be checked with the set naming style.\n#typealias-rgx=\n\n# Regular expression matching correct type variable names. If left empty, type\n# variable names will be checked with the set naming style.\n#typevar-rgx=\n\n# Naming style matching correct variable names.\nvariable-naming-style=snake_case\n\n# Regular expression matching correct variable names. Overrides variable-\n# naming-style. If left empty, variable names will be checked with the set\n# naming style.\n#variable-rgx=\n\n\n[CLASSES]\n\n# Warn about protected attribute access inside special methods\ncheck-protected-access-in-special-methods=no\n\n# List of method names used to declare (i.e. assign) instance attributes.\ndefining-attr-methods=__init__,\n                      __new__,\n                      setUp,\n                      asyncSetUp,\n                      __post_init__\n\n# List of member names, which should be excluded from the protected access\n# warning.\nexclude-protected=_asdict,_fields,_replace,_source,_make,os._exit\n\n# List of valid names for the first argument in a class method.\nvalid-classmethod-first-arg=cls\n\n# List of valid names for the first argument in a metaclass class method.\nvalid-metaclass-classmethod-first-arg=mcs\n\n\n[DESIGN]\n\n# List of regular expressions of class ancestor names to ignore when counting\n# public methods (see R0903)\nexclude-too-few-public-methods=\n\n# List of qualified class names to ignore when counting class parents (see\n# R0901)\nignored-parents=\n\n# Maximum number of arguments for function / method.\nmax-args=35\n\n# Maximum number of attributes for a class (see R0902).\nmax-attributes=7\n\n# Maximum number of boolean expressions in an if statement (see R0916).\nmax-bool-expr=5\n\n# Maximum number of branch for function / method body.\nmax-branches=48\n\n# Maximum number of locals for function / method body.\nmax-locals=40\n\n# Maximum number of parents for a class (see R0901).\nmax-parents=7\n\n# Maximum number of public methods for a class (see R0904).\nmax-public-methods=20\n\n# Maximum number of return / yield for function / method body.\nmax-returns=6\n\n# Maximum number of statements in function / method body.\nmax-statements=100\n\n# Minimum number of public methods for a class (see R0903).\nmin-public-methods=2\n\n\n[EXCEPTIONS]\n\n# Exceptions that will emit a warning when caught.\novergeneral-exceptions=builtins.BaseException,builtins.Exception\n\n\n[FORMAT]\n\n# Expected format of line ending, e.g. empty (any line ending), LF or CRLF.\nexpected-line-ending-format=LF\n\n# Regexp for a line that is allowed to be longer than the limit.\nignore-long-lines=^\\s*(# )?<?https?://\\S+>?$\n\n# Number of spaces of indent required inside a hanging or continued line.\nindent-after-paren=4\n\n# String used as indentation unit. This is usually \"    \" (4 spaces) or \"\\t\" (1\n# tab).\nindent-string='    '\n\n# Maximum number of characters on a single line.\nmax-line-length=120\n\n# Maximum number of lines in a module.\nmax-module-lines=3000\n\n# Allow the body of a class to be on the same line as the declaration if body\n# contains single statement.\nsingle-line-class-stmt=no\n\n# Allow the body of an if to be on the same line as the test if there is no\n# else.\nsingle-line-if-stmt=no\n\n\n[IMPORTS]\n\n# List of modules that can be imported at any level, not just the top level\n# one.\nallow-any-import-level=\n\n# Allow explicit reexports by alias from a package __init__.\nallow-reexport-from-package=no\n\n# Allow wildcard imports from modules that define __all__.\nallow-wildcard-with-all=no\n\n# Deprecated modules which should not be used, separated by a comma.\ndeprecated-modules=\n\n# Output a graph (.gv or any supported image format) of external dependencies\n# to the given file (report RP0402 must not be disabled).\next-import-graph=\n\n# Output a graph (.gv or any supported image format) of all (i.e. internal and\n# external) dependencies to the given file (report RP0402 must not be\n# disabled).\nimport-graph=\n\n# Output a graph (.gv or any supported image format) of internal dependencies\n# to the given file (report RP0402 must not be disabled).\nint-import-graph=\n\n# Force import order to recognize a module as part of the standard\n# compatibility libraries.\nknown-standard-library=\n\n# Force import order to recognize a module as part of a third party library.\nknown-third-party=enchant\n\n# Couples of modules and preferred modules, separated by a comma.\npreferred-modules=\n\n\n[LOGGING]\n\n# The type of string formatting that logging methods do. `old` means using %\n# formatting, `new` is for `{}` formatting.\nlogging-format-style=old\n\n# Logging modules to check that the string format arguments are in logging\n# function parameter format.\nlogging-modules=logging\n\n\n[MESSAGES CONTROL]\n\n# Only show warnings with the listed confidence levels. Leave empty to show\n# all. Valid levels: HIGH, CONTROL_FLOW, INFERENCE, INFERENCE_FAILURE,\n# UNDEFINED.\nconfidence=HIGH,\n           CONTROL_FLOW,\n           INFERENCE,\n           INFERENCE_FAILURE,\n           UNDEFINED\n\n# Disable the message, report, category or checker with the given id(s). You\n# can either give multiple identifiers separated by comma (,) or put this\n# option multiple times (only on the command line, not in the configuration\n# file where it should appear only once). You can also use \"--disable=all\" to\n# disable everything first and then re-enable specific checks. For example, if\n# you want to run only the similarities checker, you can use \"--disable=all\n# --enable=similarities\". If you want to run only the classes checker, but have\n# no Warning level messages displayed, use \"--disable=all --enable=classes\n# --disable=W\".\ndisable=R,\n  deprecated-pragma,\n  file-ignored,\n  locally-disabled,\n  suppressed-message,\n  use-implicit-booleaness-not-comparison-to-string,\n  use-implicit-booleaness-not-comparison-to-zero,\n  use-implicit-booleaness-not-comparison,\n  use-symbolic-message-instead,\n  useless-suppression,\n  3rd-party-local-module-not-gated,\n  attribute-defined-outside-init,\n  bad-continuation,\n  bad-mcs-classmethod-argument,\n  bad-mcs-method-argument,\n  blacklisted-name,\n  deprecated-method,\n  empty-docstring,\n  exec-used,\n  file-ignored,\n  fixme,\n  global-statement,\n  import-error,\n  import-outside-toplevel,\n  invalid-format-index,\n  invalid-name,\n  keyword-arg-before-vararg,\n  line-too-long,\n  locally-disabled,\n  logging-format-interpolation,\n  logging-fstring-interpolation,\n  missing-docstring,\n  no-member,\n  protected-access,\n  raw-checker-failed,\n  redefined-builtin,\n  redefined-outer-name,\n  reimported,\n  too-many-lines,\n  undefined-loop-variable,\n  unexpected-special-method-signature,\n  ungrouped-imports,\n  unidiomatic-typecheck,\n  unsubscriptable-object,\n  unused-argument,\n  unused-variable,\n  wrong-import-order,\n  wrong-import-position,\n  consider-using-f-string,\n  raise-missing-from,\n  broad-exception-raised,\n  consider-using-dict-items\n\n# Enable the message, report, category or checker with the given id(s). You can\n# either give multiple identifier separated by comma (,) or put this option\n# multiple time (only on the command line, not in the configuration file where\n# it should appear only once). See also the \"--disable\" option for examples.\nenable=\n\n\n[METHOD_ARGS]\n\n# List of qualified names (i.e., library.method) which require a timeout\n# parameter e.g. 'requests.api.get,requests.api.post'\ntimeout-methods=requests.api.delete,requests.api.get,requests.api.head,requests.api.options,requests.api.patch,requests.api.post,requests.api.put,requests.api.request\n\n\n[MISCELLANEOUS]\n\n# List of note tags to take in consideration, separated by a comma.\nnotes=FIXME,\n      XXX,\n      TODO\n\n# Regular expression of note tags to take in consideration.\nnotes-rgx=\n\n\n[REFACTORING]\n\n# Maximum number of nested blocks for function / method body\nmax-nested-blocks=5\n\n# Complete name of functions that never returns. When checking for\n# inconsistent-return-statements if a never returning function is called then\n# it will be considered as an explicit return statement and no message will be\n# printed.\nnever-returning-functions=sys.exit,argparse.parse_error\n\n\n[REPORTS]\n\n# Python expression which should return a score less than or equal to 10. You\n# have access to the variables 'fatal', 'error', 'warning', 'refactor',\n# 'convention', and 'info' which contain the number of messages in each\n# category, as well as 'statement' which is the total number of statements\n# analyzed. This score is used by the global evaluation report (RP0004).\nevaluation=max(0, 0 if fatal else 10.0 - ((float(5 * error + warning + refactor + convention) / statement) * 10))\n\n# Template used to display messages. This is a python new-style format string\n# used to format the message information. See doc for all details.\nmsg-template=\n\n# Set the output format. Available formats are: text, parseable, colorized,\n# json2 (improved json format), json (old json format) and msvs (visual\n# studio). You can also give a reporter class, e.g.\n# mypackage.mymodule.MyReporterClass.\noutput-format=parseable\n\n# Tells whether to display a full report or only the messages.\nreports=no\n\n# Activate the evaluation score.\nscore=yes\n\n\n[SIMILARITIES]\n\n# Comments are removed from the similarity computation\nignore-comments=yes\n\n# Docstrings are removed from the similarity computation\nignore-docstrings=yes\n\n# Imports are removed from the similarity computation\nignore-imports=yes\n\n# Signatures are removed from the similarity computation\nignore-signatures=yes\n\n# Minimum lines number of a similarity.\nmin-similarity-lines=4\n\n\n[SPELLING]\n\n# Limits count of emitted suggestions for spelling mistakes.\nmax-spelling-suggestions=4\n\n# Spelling dictionary name. No available dictionaries : You need to install\n# both the python package and the system dependency for enchant to work.\nspelling-dict=\n\n# List of comma separated words that should be considered directives if they\n# appear at the beginning of a comment and should not be checked.\nspelling-ignore-comment-directives=fmt: on,fmt: off,noqa:,noqa,nosec,isort:skip,mypy:\n\n# List of comma separated words that should not be checked.\nspelling-ignore-words=\n\n# A path to a file that contains the private dictionary; one word per line.\nspelling-private-dict-file=\n\n# Tells whether to store unknown words to the private dictionary (see the\n# --spelling-private-dict-file option) instead of raising a message.\nspelling-store-unknown-words=no\n\n\n[STRING]\n\n# This flag controls whether inconsistent-quotes generates a warning when the\n# character used as a quote delimiter is used inconsistently within a module.\ncheck-quote-consistency=no\n\n# This flag controls whether the implicit-str-concat should generate a warning\n# on implicit string concatenation in sequences defined over several lines.\ncheck-str-concat-over-line-jumps=no\n\n\n[TYPECHECK]\n\n# List of decorators that produce context managers, such as\n# contextlib.contextmanager. Add to this list to register other decorators that\n# produce valid context managers.\ncontextmanager-decorators=contextlib.contextmanager\n\n# List of members which are set dynamically and missed by pylint inference\n# system, and so shouldn't trigger E1101 when accessed. Python regular\n# expressions are accepted.\ngenerated-members=\n\n# Tells whether to warn about missing members when the owner of the attribute\n# is inferred to be None.\nignore-none=yes\n\n# This flag controls whether pylint should warn about no-member and similar\n# checks whenever an opaque object is returned when inferring. The inference\n# can return multiple potential results while evaluating a Python object, but\n# some branches might not be evaluated, which results in partial inference. In\n# that case, it might be useful to still emit no-member and other checks for\n# the rest of the inferred objects.\nignore-on-opaque-inference=yes\n\n# List of symbolic message names to ignore for Mixin members.\nignored-checks-for-mixins=no-member,\n                          not-async-context-manager,\n                          not-context-manager,\n                          attribute-defined-outside-init\n\n# List of class names for which member attributes should not be checked (useful\n# for classes with dynamically set attributes). This supports the use of\n# qualified names.\nignored-classes=optparse.Values,thread._local,_thread._local,argparse.Namespace\n\n# Show a hint with possible names when a member name was not found. The aspect\n# of finding the hint is based on edit distance.\nmissing-member-hint=yes\n\n# The minimum edit distance a name should have in order to be considered a\n# similar match for a missing member name.\nmissing-member-hint-distance=1\n\n# The total number of similar names that should be taken in consideration when\n# showing a hint for a missing member.\nmissing-member-max-choices=1\n\n# Regex pattern to define which classes are considered mixins.\nmixin-class-rgx=.*[Mm]ixin\n\n# List of decorators that change the signature of a decorated function.\nsignature-mutators=\n\n\n[VARIABLES]\n\n# List of additional names supposed to be defined in builtins. Remember that\n# you should avoid defining new builtins when possible.\nadditional-builtins=__opts__,\n  __utils__,\n  __salt__,\n  __pillar__,\n  __grains__,\n  __context__,\n  __runner__,\n  __ret__,\n  __env__,\n  __low__,\n  __states__,\n  __lowstate__,\n  __running__,\n  __active_provider_name__,\n  __master_opts__,\n  __jid_event__,\n  __instance_id__,\n  __salt_system_encoding__,\n  __proxy__,\n  __serializers__,\n  __reg__,\n  __executors__,\n  __events__\n\n# Tells whether unused global variables should be treated as a violation.\nallow-global-unused-variables=yes\n\n# List of names allowed to shadow builtins\nallowed-redefined-builtins=\n\n# List of strings which can identify a callback function by name. A callback\n# name must start or end with one of those strings.\ncallbacks=cb_,\n          _cb\n\n# A regular expression matching the name of dummy variables (i.e. expected to\n# not be used).\ndummy-variables-rgx=_+$|(_[a-zA-Z0-9_]*[a-zA-Z0-9]+?$)|dummy|^ignored_|^unused_\n\n# Argument names that match this expression will be ignored.\nignored-argument-names=_.*|^ignored_|^unused_\n\n# Tells whether we should check for unused import in __init__ files.\ninit-import=no\n\n# List of qualified module names which can have objects that can redefine\n# builtins.\nredefining-builtins-modules=six.moves,past.builtins,future.builtins,builtins,io\n\n\n[FILEPERMS]\n\n# Desired file permissons. Default: 0644\nfileperms-default=0644\n\n# File paths to ignore file permission. Glob patterns allowed.\nfileperms-ignore-paths=setup.py,noxfile.py,tests/runtests.py,tests/saltsh.py,tests/buildpackage.py,tests/unit/files/rosters/ansible/roster.py\n\n[BLACKLISTED-FUNCTIONS]\n\n# List of blacklisted functions and suggested replacements\n#\n# NOTE: This pylint check will infer the full name of the function by walking\n# back up from the function name to the parent, to the parent's parent, etc.,\n# and this means that functions which come from platform-specific modules need\n# to be referenced using name of the module from which the function was\n# imported. This happens a lot in the os and os.path modules. Functions from\n# os.path should be defined using posixpath.funcname and ntpath.funcname, while\n# functions from os should be defined using posix.funcname and nt.funcname.\n#\n# When defining a blacklisted function, the format is:\n#\n#   <func_name>=<suggested_replacement>\n#\n# The replacement text will be included in the alert message.\n#\nblacklisted-functions=posix.umask=salt.utils.files.set_umask or get_umask,\n  nt.umask=salt.utils.files.set_umask or get_umask\n\n[3RD-PARTY-IMPORTS]\n\n# Known 3rd-party modules which don' require being gated, separated by a comma\nallowed-3rd-party-modules=msgpack,\n                          tornado,\n                          yaml,\n                          jinja2,\n                          Crypto,\n                          requests,\n                          libcloud,\n                          zmq,\n                          pytest,\n                          _pytest,\n                          attr,\n                          setuptools,\n                          pytestsalt,\n                          saltfactories,\n                          psutil,\n                          pytestshellutils,\n                          distro,\n                          os,\n                          re,\n                          shutil,\n                          copy,\n                          base64,\n                          tempfile,\n                          fnmatch,\n                          ptscripts,\n                          packaging,\n                          looseversion,\n                          pytestskipmarkers,\n                          cryptography,\n                          aiohttp,\n                          pytest_timeout,\n                          networkx\n"
        },
        {
          "name": "AUTHORS",
          "type": "blob",
          "size": 3.8935546875,
          "content": "=============\nSalt Authors\n=============\n\nWhos Who in Salt\n============================\n\nThe Man With the Plan\n----------------------------\n\nThomas S. Hatch is the main developer of Salt. He is the founder, owner,\nmaintainer and lead of the Salt project, as well as author of the majority\nof the Salt code and documentation.\n\nDocumentation System\n----------------------------\n\nThe documentation system was put together by Seth House, much of the\ndocumentation is being maintained by Seth.\n\nDevelopers\n----------------------------\n\nAaron Bull Schaefer <aaron@elasticdog.com>\nAaron Toponce <aaron.toponce@gmail.com>\nAndrew Hammond <andrew.george.hammond@gmail.com>\nAditya Kulkarni <adi@saltstack.com>\nAlexander Pyatkin <asp@thexyz.net>\nAndre Sachs <andre@sachs.nom.za>\nAndrew Colin Kissa <andrew@topdog.za.net>\nAndrew Kuhnhausen <trane@errstr.com>\nAntti Kaihola <akaihol+github@ambitone.com>\narchme <archme.mail@gmail.com>\nBrad Barden <brad@mifflinet.net>\nBret Palsson <bretep@gmail.com>\nBrian Wagner <wags@wagsworld.net>\nC. R. Oldham <cr@saltstack.com>\nCarl Loa Odin <carlodin@gmail.com>\nCarlo Pires <carlopires@gmail.com>\nChris Rebert <chris.rebert@hulu.com>\nChris Scheller <schelcj@umich.edu>\nChrister Edwards <christer.edwards@gmail.com>\nClint Savage <herlo1@gmail.com>\nColton Myers <cmyers@saltstack.com>\nCorey Quinn <corey@sequestered.net>\nCorin Kochenower <ckochenower@saltstack.com>\nDan Garthwaite <dan@garthwaite.org>\nDaniel Wallace <danielwallace at gtmanfred dot com>\nDavid Boucha <boucha@gmail.com>\nDavid Pravec <alekibango@pravec.tk>\ndeutsche\nDmitry Kuzmenko <dkuzmenko@saltstack.com>\nDoug Renn <renn@nestegg.com>\nEivind Uggedal <eivind@uggedal.com>\nepoelke@gmail.com <epoelke@heartflow.com>\nEric Poelke <epoelke@gmail.com>\nErik Nolte <enolte@beyondoblivion.com>\nEvan Borgstrom <evan@fatbox.ca>\nForrest Alvarez <forrest.alvarez@gmail.com>\nFred Reimer <freimer@freimer.org>\nHenrik Holmboe <henrik@holmboe.se>\nGareth J. Greenaway <gareth@wiked.org>\nJacob Albretsen <jakea@xmission.com>\nJed Glazner <jglazner@coldcrow.com>\nJeff Bauer <jbauer@rubic.com>\nJeff Hutchins <jhutchins@getjive.com>\nJeffrey C. Ollie <jeff@ocjtech.us>\nJeff Schroeder <jeffschroeder@computer.org>\nJohnny Bergström\nJonas Buckner <buckner.jonas@gmail.com>\nJonathan Harker <k.jonathan.harker@hp.com>\nJoseph Hall <joseph@saltstack.com>\nJosmar Dias <josmarnet@gmail.com>\nKent Tenney <ktenney@gmail.com>\nlexual\nMarat Shakirov\nMarc Abramowitz <marc+github@marc-abramowitz.com>\nMartin Schnabel <mb0@mb0.org>\nMathieu Le Marec - Pasquet <kiorky@cryptelium.net>\nMatt Black\nMatthew Printz <hipokrit@gmail.com>\nMatthias Teege <matthias-git@mteege.de>\nMaxim Burgerhout <maxim@wzzrd.com>\nMickey Malone <mickey.malone@gmail.com>\nMichael Steed <msteed@saltstack.com>\nMike Place <mp@saltstack.com>\nMircea Ulinic <ping@mirceaulinic.net>\nMitch Anderson <mitch@metauser.net>\nMostafa Hussein <mostafa.hussein91@gmail.com>\nNathaniel Whiteinge <seth@eseth.com>\nNicolas Delaby <nicolas.delaby@ezeep.com>\nNicole Thomas <nicole@saltstack.com>\nNigel Owen <nigelowen2.gmail.com>\nNitin Madhok <nmadhok@g.clemson.edu>\nOleg Anashkin <oleg.anashkin@gmail.com>\nPedro Algarvio <pedro@algarvio.me>\nPeter Baumgartner\nPierre Carrier <pierre@spotify.com>\nRhys Elsmore <me@rhys.io>\nRafael Caricio <rafael@caricio.com>\nRobert Fielding\nSean Channel <pentabular@gmail.com>\nSeth House <seth@eseth.com>\nSeth Vidal <skvidal@fedoraproject.org>\nStas Alekseev <stas.alekseev@gmail.com>\nThibault Cohen <titilambert@gmail.com>\nThomas Schreiber <tom@rizumu.us>\nThomas S Hatch <thatch45@gmail.com>\nTor Hveem <xt@bash.no>\nTravis Cline <travis.cline@gmail.com>\nWieland Hoffmann <themineo+github@gmail.com>\n\n\nGrowing Community\n--------------------------------\n\nSalt is a rapidly growing project with a large community, to view all\ncontributors please check Github, this file can sometimes be out of date:\n\nhttps://github.com/saltstack/salt/graphs/contributors\n\nTo see current statistics check out the GitHub Pulse page:\n\nhttps://github.com/saltstack/salt/pulse\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 403.5986328125,
          "content": "All notable changes to Salt will be documented in this file.\n\nThis changelog follows [keepachangelog](https://keepachangelog.com/en/1.0.0/) format, and is intended for human consumption.\n\nThis project versioning is _similar_ to [Semantic Versioning](https://semver.org), and is documented in [SEP 14](https://github.com/saltstack/salt-enhancement-proposals/pull/20/files).\nVersions are `MAJOR.PATCH`.\n\n# Changelog\n\n## 3007.1 (2024-05-19)\n\n\n### Removed\n\n- The ``salt.utils.psutil_compat`` was deprecated and now removed in Salt 3008. Please use the ``psutil`` module directly. [#66160](https://github.com/saltstack/salt/issues/66160)\n\n\n### Fixed\n\n- Fixes multiple issues with the cmd module on Windows. Scripts are called using\n  the ``-File`` parameter to the ``powershell.exe`` binary. ``CLIXML`` data in\n  stderr is now removed (only applies to encoded commands). Commands can now be\n  sent to ``cmd.powershell`` as a list. Makes sure JSON data returned is valid.\n  Strips whitespace from the return when using ``runas``. [#61166](https://github.com/saltstack/salt/issues/61166)\n- Fixed the win_lgpo_netsh salt util to handle non-English systems. This was a\n  rewrite to use PowerShell instead of netsh to make the changes on the system [#61534](https://github.com/saltstack/salt/issues/61534)\n- Fix typo in nftables module to ensure unique nft family values [#65295](https://github.com/saltstack/salt/issues/65295)\n- Corrected x509_v2 CRL creation `last_update` and `next_update` values when system timezone is not UTC [#65837](https://github.com/saltstack/salt/issues/65837)\n- Fix for NoneType can't be used in 'await' expression error. [#66177](https://github.com/saltstack/salt/issues/66177)\n- Log \"Publish server binding pub to\" messages to debug instead of error level. [#66179](https://github.com/saltstack/salt/issues/66179)\n- Fix syndic startup by making payload handler a coroutine [#66237](https://github.com/saltstack/salt/issues/66237)\n- Fixed `aptpkg.remove` \"unable to locate package\" error for non-existent package [#66260](https://github.com/saltstack/salt/issues/66260)\n- Fixed pillar.ls doesn't accept kwargs [#66262](https://github.com/saltstack/salt/issues/66262)\n- Fix cache directory setting in Master Cluster tutorial [#66264](https://github.com/saltstack/salt/issues/66264)\n- Change log level of successful master cluster key exchange from error to info. [#66266](https://github.com/saltstack/salt/issues/66266)\n- Made `file.managed` skip download of a remote source if the managed file already exists with the correct hash [#66342](https://github.com/saltstack/salt/issues/66342)\n- Fixed nftables.build_rule breaks ipv6 rules by using the wrong syntax for source and destination addresses [#66382](https://github.com/saltstack/salt/issues/66382)\n\n\n### Added\n\n- Added the ability to pass a version of chocolatey to install to the\n  chocolatey.bootstrap function. Also added states to bootstrap and\n  unbootstrap chocolatey. [#64722](https://github.com/saltstack/salt/issues/64722)\n- Add Ubuntu 24.04 support [#66180](https://github.com/saltstack/salt/issues/66180)\n- Add Fedora 40 support, replacing Fedora 39 [#66300](https://github.com/saltstack/salt/issues/66300)\n\n\n### Security\n\n- Bump to `pydantic==2.6.4` due to https://github.com/advisories/GHSA-mr82-8j83-vxmv [#66433](https://github.com/saltstack/salt/issues/66433)\n- Bump to ``jinja2==3.1.4`` due to https://github.com/advisories/GHSA-h75v-3vvj-5mfj [#66488](https://github.com/saltstack/salt/issues/66488)\n\n\n## 3006.8 (2024-04-29)\n\n\n### Removed\n\n- Removed deprecated code scheduled to be removed on 2024-01-01:\n\n  * ``TemporaryLoggingHandler`` and ``QueueHandler`` in ``salt/_logging/handlers.py``\n  * All of the ``salt/log`` package.\n  * The ``salt/modules/cassandra_mod.py`` module.\n  * The ``salt/returners/cassandra_return.py`` returner.\n  * The ``salt/returners/django_return.py`` returner. [#66147](https://github.com/saltstack/salt/issues/66147)\n\n\n### Deprecated\n\n- Drop Fedora 37 and Fedora 38 support [#65860](https://github.com/saltstack/salt/issues/65860)\n- Drop CentOS Stream 8 and 9 from CI/CD [#66104](https://github.com/saltstack/salt/issues/66104)\n- Drop Photon OS 3 support [#66105](https://github.com/saltstack/salt/issues/66105)\n- The ``salt.utils.psutil_compat`` module has been deprecated and will be removed in Salt 3008. Please use the ``psutil`` module directly. [#66139](https://github.com/saltstack/salt/issues/66139)\n\n\n### Fixed\n\n- ``user.add`` on Windows now allows you to add user names that contain all\n  numeric characters [#53363](https://github.com/saltstack/salt/issues/53363)\n- Fix an issue with the win_system module detecting established connections on\n  non-Windows systems. Uses psutils instead of parsing the return of netstat [#60508](https://github.com/saltstack/salt/issues/60508)\n- pkg.refresh_db on Windows now honors saltenv [#61807](https://github.com/saltstack/salt/issues/61807)\n- Fixed an issue with adding new machine policies and applying those same\n  policies in the same state by adding a ``refresh_cache`` option to the\n  ``lgpo.set`` state. [#62734](https://github.com/saltstack/salt/issues/62734)\n- file.managed correctly handles file path with '#' [#63060](https://github.com/saltstack/salt/issues/63060)\n- Fix master ip detection when DNS records change [#63654](https://github.com/saltstack/salt/issues/63654)\n- Fix user and group management on Windows to handle the Everyone group [#63667](https://github.com/saltstack/salt/issues/63667)\n- Fixes an issue in pkg.refresh_db on Windows where new package definition\n  files were not being picked up on the first run [#63848](https://github.com/saltstack/salt/issues/63848)\n- Display a proper error when pki commands fail in the win_pki module [#64933](https://github.com/saltstack/salt/issues/64933)\n- Prevent full system upgrade on single package install for Arch Linux [#65200](https://github.com/saltstack/salt/issues/65200)\n- When using s3fs, if files are deleted from the bucket, they were not deleted in\n  the master or minion local cache, which could lead to unexpected file copies or\n  even state applications. This change makes the local cache consistent with the\n  remote bucket by deleting files locally that are deleted from the bucket.\n\n  **NOTE** this could lead to **breakage** on your affected systems if it was\n  inadvertently depending on previously deleted files. [#65611](https://github.com/saltstack/salt/issues/65611)\n- Fixed an issue with file.directory state where paths would be modified in test\n  mode if backupname is used. [#66049](https://github.com/saltstack/salt/issues/66049)\n- Execution modules have access to regular fileclient durring pillar rendering. [#66124](https://github.com/saltstack/salt/issues/66124)\n- Fixed a issue with server channel where a minion's public key\n  would be rejected if it contained a final newline character. [#66126](https://github.com/saltstack/salt/issues/66126)\n- Fix content type backwards compatablity with http proxy post requests in the http utils module. [#66127](https://github.com/saltstack/salt/issues/66127)\n- Fix systemctl with \"try-restart\" instead of \"retry-restart\" within the RPM spec, properly restarting upgraded services [#66143](https://github.com/saltstack/salt/issues/66143)\n- Auto discovery of ssh, scp and ssh-keygen binaries. [#66205](https://github.com/saltstack/salt/issues/66205)\n- Add leading slash to salt helper file paths as per dh_links requirement [#66280](https://github.com/saltstack/salt/issues/66280)\n- Fixed x509.certificate_managed - ca_server did not return a certificate [#66284](https://github.com/saltstack/salt/issues/66284)\n- removed log line that did nothing. [#66289](https://github.com/saltstack/salt/issues/66289)\n- Chocolatey: Make sure the return dictionary from ``chocolatey.version``\n  contains lowercase keys [#66290](https://github.com/saltstack/salt/issues/66290)\n- fix cacheing inline pillar, by not rendering inline pillar during cache save function. [#66292](https://github.com/saltstack/salt/issues/66292)\n- The file module correctly perserves file permissions on link target. [#66400](https://github.com/saltstack/salt/issues/66400)\n- Upgrade relenv to 0.16.0 and python to 3.10.14 [#66402](https://github.com/saltstack/salt/issues/66402)\n- backport the fix from #66164 to fix #65703. use OrderedDict to fix bad indexing. [#66705](https://github.com/saltstack/salt/issues/66705)\n\n\n### Added\n\n- Add Fedora 39 support [#65859](https://github.com/saltstack/salt/issues/65859)\n\n\n### Security\n\n- Upgrade to `cryptography==42.0.5` due to a few security issues:\n\n  * https://github.com/advisories/GHSA-9v9h-cgj8-h64p\n  * https://github.com/advisories/GHSA-3ww4-gg4f-jr7f\n  * https://github.com/advisories/GHSA-6vqw-3v5j-54x4 [#66141](https://github.com/saltstack/salt/issues/66141)\n- Bump to `idna==3.7` due to https://github.com/advisories/GHSA-jjg7-2v4v-x38h [#66377](https://github.com/saltstack/salt/issues/66377)\n- Bump to `aiohttp==3.9.4` due to https://github.com/advisories/GHSA-7gpw-8wmc-pm8g [#66411](https://github.com/saltstack/salt/issues/66411)\n\n\n## 3007.0 (2024-03-03)\n\n\n### Removed\n\n- Removed RHEL 5 support since long since end-of-lifed [#62520](https://github.com/saltstack/salt/issues/62520)\n- Removing Azure-Cloud modules from the code base. [#64322](https://github.com/saltstack/salt/issues/64322)\n- Dropped Python 3.7 support since it's EOL in 27 Jun 2023 [#64417](https://github.com/saltstack/salt/issues/64417)\n- Remove salt.payload.Serial [#64459](https://github.com/saltstack/salt/issues/64459)\n- Remove netmiko_conn and pyeapi_conn from salt.modules.napalm_mod [#64460](https://github.com/saltstack/salt/issues/64460)\n- Removed 'transport' arg from salt.utils.event.get_event [#64461](https://github.com/saltstack/salt/issues/64461)\n- Removed the usage of retired Linode API v3 from Salt Cloud [#64517](https://github.com/saltstack/salt/issues/64517)\n\n\n### Deprecated\n\n- Deprecate all Proxmox cloud modules [#64224](https://github.com/saltstack/salt/issues/64224)\n- Deprecate all the Vault modules in favor of the Vault Salt Extension https://github.com/salt-extensions/saltext-vault. The Vault modules will be removed in Salt core in 3009.0. [#64893](https://github.com/saltstack/salt/issues/64893)\n- Deprecate all the Docker modules in favor of the Docker Salt Extension https://github.com/saltstack/saltext-docker. The Docker modules will be removed in Salt core in 3009.0. [#64894](https://github.com/saltstack/salt/issues/64894)\n- Deprecate all the Zabbix modules in favor of the Zabbix Salt Extension https://github.com/salt-extensions/saltext-zabbix. The Zabbix modules will be removed in Salt core in 3009.0. [#64896](https://github.com/saltstack/salt/issues/64896)\n- Deprecate all the Apache modules in favor of the Apache Salt Extension https://github.com/salt-extensions/saltext-apache. The Apache modules will be removed in Salt core in 3009.0. [#64909](https://github.com/saltstack/salt/issues/64909)\n- Deprecation warning for Salt's backport of ``OrderedDict`` class which will be removed in 3009 [#65542](https://github.com/saltstack/salt/issues/65542)\n- Deprecate Kubernetes modules for move to saltext-kubernetes in version 3009 [#65565](https://github.com/saltstack/salt/issues/65565)\n- Deprecated all Pushover modules in favor of the Salt Extension at https://github.com/salt-extensions/saltext-pushover. The Pushover modules will be removed from Salt core in 3009.0 [#65567](https://github.com/saltstack/salt/issues/65567)\n- Removed deprecated code:\n\n  * All of ``salt/log/`` which has been on a deprecation path for a long time.\n  * Some of the logging handlers found in ``salt/_logging/handlers`` have been removed since the standard library provides\n    them.\n  * Removed the deprecated ``salt/modules/cassandra_mod.py`` module and any tests for it.\n  * Removed the deprecated ``salt/returners/cassandra_return.py`` module and any tests for it.\n  * Removed the deprecated ``salt/returners/django_return.py`` module and any tests for it. [#65986](https://github.com/saltstack/salt/issues/65986)\n\n\n### Changed\n\n- Masquerade property will not default to false turning off masquerade if not specified. [#53120](https://github.com/saltstack/salt/issues/53120)\n- Addressed Python 3.11 deprecations:\n\n  * Switch to `FullArgSpec` since Py 3.11 no longer has `ArgSpec`, deprecated since Py 3.0\n  * Stopped using the deprecated `cgi` module.\n  * Stopped using the deprecated `pipes` module\n  * Stopped using the deprecated `imp` module [#64457](https://github.com/saltstack/salt/issues/64457)\n- changed 'gpg_decrypt_must_succeed' default from False to True [#64462](https://github.com/saltstack/salt/issues/64462)\n\n\n### Fixed\n\n- When an NFS or FUSE mount fails to unmount when mount options have changed, try again with a lazy umount before mounting again. [#18907](https://github.com/saltstack/salt/issues/18907)\n- fix autoaccept gpg keys by supporting it in refresh_db module [#42039](https://github.com/saltstack/salt/issues/42039)\n- Made cmd.script work with files from the fileserver via salt-ssh [#48067](https://github.com/saltstack/salt/issues/48067)\n- Made slsutil.renderer work with salt-ssh [#50196](https://github.com/saltstack/salt/issues/50196)\n- Fixed defaults.merge is not available when using salt-ssh [#51605](https://github.com/saltstack/salt/issues/51605)\n- Fix extfs.mkfs missing parameter handling for -C, -d, and -e [#51858](https://github.com/saltstack/salt/issues/51858)\n- Fixed Salt master does not renew token [#51986](https://github.com/saltstack/salt/issues/51986)\n- Fixed salt-ssh continues state/pillar rendering with incorrect data when an exception is raised by a module on the target [#52452](https://github.com/saltstack/salt/issues/52452)\n- Fix extfs.tune has 'reserved' documented twice and is missing the 'reserved_percentage' keyword argument [#54426](https://github.com/saltstack/salt/issues/54426)\n- Fix the ability of the 'selinux.port_policy_present' state to modify. [#55687](https://github.com/saltstack/salt/issues/55687)\n- Fixed config.get does not support merge option with salt-ssh [#56441](https://github.com/saltstack/salt/issues/56441)\n- Removed an unused assignment in file.patch [#57204](https://github.com/saltstack/salt/issues/57204)\n- Fixed vault module fetching more than one secret in one run with single-use tokens [#57561](https://github.com/saltstack/salt/issues/57561)\n- Use brew path from which in mac_brew_pkg module and rely on _homebrew_bin() everytime [#57946](https://github.com/saltstack/salt/issues/57946)\n- Fixed Vault verify option to work on minions when only specified in master config [#58174](https://github.com/saltstack/salt/issues/58174)\n- Fixed vault command errors configured locally [#58580](https://github.com/saltstack/salt/issues/58580)\n- Fixed issue with basic auth causing invalid header error and 401 Bad Request, by using HTTPBasicAuthHandler instead of header. [#58936](https://github.com/saltstack/salt/issues/58936)\n- Make the LXD module work with pyLXD > 2.10 [#59514](https://github.com/saltstack/salt/issues/59514)\n- Return error if patch file passed to state file.patch is malformed. [#59806](https://github.com/saltstack/salt/issues/59806)\n- Handle failure and error information from tuned module/state [#60500](https://github.com/saltstack/salt/issues/60500)\n- Fixed sdb.get_or_set_hash with Vault single-use tokens [#60779](https://github.com/saltstack/salt/issues/60779)\n- Fixed state.test does not work with salt-ssh [#61100](https://github.com/saltstack/salt/issues/61100)\n- Made slsutil.findup work with salt-ssh [#61143](https://github.com/saltstack/salt/issues/61143)\n- Allow all primitive grain types for autosign_grains [#61416](https://github.com/saltstack/salt/issues/61416), [#63708](https://github.com/saltstack/salt/issues/63708)\n- `ipset.new_set` no longer fails when creating a set type that uses the `family` create option [#61620](https://github.com/saltstack/salt/issues/61620)\n- Fixed Vault session storage to allow unlimited use tokens [#62380](https://github.com/saltstack/salt/issues/62380)\n- fix the efi grain on FreeBSD [#63052](https://github.com/saltstack/salt/issues/63052)\n- Fixed gpg.receive_keys returns success on failed import [#63144](https://github.com/saltstack/salt/issues/63144)\n- Fixed GPG state module always reports success without changes [#63153](https://github.com/saltstack/salt/issues/63153)\n- Fixed GPG state module does not respect test mode [#63156](https://github.com/saltstack/salt/issues/63156)\n- Fixed gpg.absent with gnupghome/user, fixed gpg.delete_key with gnupghome [#63159](https://github.com/saltstack/salt/issues/63159)\n- Fixed service module does not handle enable/disable if systemd service is an alias [#63214](https://github.com/saltstack/salt/issues/63214)\n- Made x509_v2 compound match detection use new runner instead of peer publishing [#63278](https://github.com/saltstack/salt/issues/63278)\n- Need to make sure we update __pillar__ during a pillar refresh to ensure that process_beacons has the updated beacons loaded from pillar. [#63583](https://github.com/saltstack/salt/issues/63583)\n- This implements the vpc_uuid parameter when creating a droplet. This parameter selects the correct virtual private cloud (private network interface). [#63714](https://github.com/saltstack/salt/issues/63714)\n- pkg.installed no longer reports failure when installing packages that are installed via the task manager [#63767](https://github.com/saltstack/salt/issues/63767)\n- mac_xattr.list and mac_xattr.read will replace undecode-able bytes to avoid raising CommandExecutionError. [#63779](https://github.com/saltstack/salt/issues/63779) [#63779](https://github.com/saltstack/salt/issues/63779)\n- Fix aptpkg.latest_version performance, reducing number of times to 'shell out' [#63982](https://github.com/saltstack/salt/issues/63982)\n- Added option to use a fresh connection for mysql cache [#63991](https://github.com/saltstack/salt/issues/63991)\n- [lxd] Fixed a bug in `container_create` which prevented devices which are not of type `disk` to be correctly created and added to the container when passed via the `devices` parameter. [#63996](https://github.com/saltstack/salt/issues/63996)\n- Skipped the `isfile` check to greatly increase speed of reading minion keys for systems with a large number of minions on slow file storage [#64260](https://github.com/saltstack/salt/issues/64260)\n- Fix utf8 handling in 'pass' renderer [#64300](https://github.com/saltstack/salt/issues/64300)\n- Upgade tornado to 6.3.2 [#64305](https://github.com/saltstack/salt/issues/64305)\n- Prevent errors due missing 'transactional_update.apply' on SLE Micro and MicroOS. [#64369](https://github.com/saltstack/salt/issues/64369)\n- Fix 'unable to unmount' failure to return False result instead of None [#64420](https://github.com/saltstack/salt/issues/64420)\n- Fixed issue uninstalling duplicate packages in ``win_appx`` execution module [#64450](https://github.com/saltstack/salt/issues/64450)\n- Clean up tech debt, IPC now uses tcp transport. [#64488](https://github.com/saltstack/salt/issues/64488)\n- Made salt-ssh more strict when handling unexpected situations and state.* wrappers treat a remote exception as failure, excluded salt-ssh error returns from mine [#64531](https://github.com/saltstack/salt/issues/64531)\n- Fix flaky test for LazyLoader with isolated mocking of threading.RLock [#64567](https://github.com/saltstack/salt/issues/64567)\n- Fix possible `KeyError` exceptions in `salt.utils.user.get_group_dict`\n  while reading improper duplicated GID assigned for the user. [#64599](https://github.com/saltstack/salt/issues/64599)\n- changed vm_config() to deep-merge vm_overrides of specific VM, instead of simple-merging the whole vm_overrides [#64610](https://github.com/saltstack/salt/issues/64610)\n- Fix the way Salt tries to get the Homebrew's prefix\n\n  The first attempt to get the Homebrew's prefix is to look for\n  the `HOMEBREW_PREFIX` environment variable. If it's not set, then\n  Salt tries to get the prefix from the `brew` command. However, the\n  `brew` command can fail. So a last attempt is made to get the\n  prefix by guessing the installation path. [#64924](https://github.com/saltstack/salt/issues/64924)\n- Add missing MySQL Grant SERVICE_CONNECTION_ADMIN to mysql module. [#64934](https://github.com/saltstack/salt/issues/64934)\n- Fixed slsutil.update with salt-ssh during template rendering [#65067](https://github.com/saltstack/salt/issues/65067)\n- Keep track when an included file only includes sls files but is a requisite. [#65080](https://github.com/saltstack/salt/issues/65080)\n- Fixed `gpg.present` succeeds when the keyserver is unreachable [#65169](https://github.com/saltstack/salt/issues/65169)\n- Fix typo in nftables module to ensure unique nft family values [#65295](https://github.com/saltstack/salt/issues/65295)\n- Dereference symlinks to set proper __cli opt [#65435](https://github.com/saltstack/salt/issues/65435)\n- Made salt-ssh merge master top returns for the same environment [#65480](https://github.com/saltstack/salt/issues/65480)\n- Account for situation where the metadata grain fails because the AWS environment requires an authentication token to query the metadata URL. [#65513](https://github.com/saltstack/salt/issues/65513)\n- Improve the condition of overriding target for pip with VENV_PIP_TARGET environment variable. [#65562](https://github.com/saltstack/salt/issues/65562)\n- Added SSH wrapper for logmod [#65630](https://github.com/saltstack/salt/issues/65630)\n- Include changes in the results when schedule.present state is run with test=True. [#65652](https://github.com/saltstack/salt/issues/65652)\n- Fix extfs.tune doesn't pass retcode to module.run [#65686](https://github.com/saltstack/salt/issues/65686)\n- Return an error message when the DNS plugin is not supported [#65739](https://github.com/saltstack/salt/issues/65739)\n- Execution modules have access to regular fileclient durring pillar rendering. [#66124](https://github.com/saltstack/salt/issues/66124)\n- Fixed a issue with server channel where a minion's public key\n  would be rejected if it contained a final newline character. [#66126](https://github.com/saltstack/salt/issues/66126)\n\n\n### Added\n\n- Allowed publishing to regular minions from the SSH wrapper [#40943](https://github.com/saltstack/salt/issues/40943)\n- Added syncing of custom salt-ssh wrappers [#45450](https://github.com/saltstack/salt/issues/45450)\n- Made salt-ssh sync custom utils [#53666](https://github.com/saltstack/salt/issues/53666)\n- Add ability to use file.managed style check_cmd in file.serialize [#53982](https://github.com/saltstack/salt/issues/53982)\n- Revised use of deprecated net-tools and added support for ip neighbour with IPv4 ip_neighs, IPv6 ip_neighs6 [#57541](https://github.com/saltstack/salt/issues/57541)\n- Added password support to Redis returner. [#58044](https://github.com/saltstack/salt/issues/58044)\n- Added a state (win_task) for managing scheduled tasks on Windows [#59037](https://github.com/saltstack/salt/issues/59037)\n- Added keyring param to gpg modules [#59783](https://github.com/saltstack/salt/issues/59783)\n- Added new grain to detect the Salt package type: onedir, pip or system [#62589](https://github.com/saltstack/salt/issues/62589)\n- Added Vault AppRole and identity issuance to minions [#62823](https://github.com/saltstack/salt/issues/62823)\n- Added Vault AppRole auth mount path configuration option [#62825](https://github.com/saltstack/salt/issues/62825)\n- Added distribution of Vault authentication details via response wrapping [#62828](https://github.com/saltstack/salt/issues/62828)\n- Add salt package type information. Either onedir, pip or system. [#62961](https://github.com/saltstack/salt/issues/62961)\n- Added signature verification to file.managed/archive.extracted [#63143](https://github.com/saltstack/salt/issues/63143)\n- Added signed_by_any/signed_by_all parameters to gpg.verify [#63166](https://github.com/saltstack/salt/issues/63166)\n- Added match runner [#63278](https://github.com/saltstack/salt/issues/63278)\n- Added Vault token lifecycle management [#63406](https://github.com/saltstack/salt/issues/63406)\n- adding new call for openscap xccdf eval supporting new parameters [#63416](https://github.com/saltstack/salt/issues/63416)\n- Added Vault lease management utility [#63440](https://github.com/saltstack/salt/issues/63440)\n- implement removal of ptf packages in zypper pkg module [#63442](https://github.com/saltstack/salt/issues/63442)\n- add JUnit output for saltcheck [#63463](https://github.com/saltstack/salt/issues/63463)\n- Add ability for file.keyvalue to create a file if it doesn't exist [#63545](https://github.com/saltstack/salt/issues/63545)\n- added cleanup of temporary mountpoint dir for macpackage installed state [#63905](https://github.com/saltstack/salt/issues/63905)\n- Add pkg.installed show installable version in test mode [#63985](https://github.com/saltstack/salt/issues/63985)\n- Added patch option to Vault SDB driver [#64096](https://github.com/saltstack/salt/issues/64096)\n- Added flags to create local users and groups [#64256](https://github.com/saltstack/salt/issues/64256)\n- Added inline specification of trusted CA root certificate for Vault [#64379](https://github.com/saltstack/salt/issues/64379)\n- Add ability to return False result in test mode of configurable_test_state [#64418](https://github.com/saltstack/salt/issues/64418)\n- Switched Salt's onedir Python version to 3.11 [#64457](https://github.com/saltstack/salt/issues/64457)\n- Added support for dnf5 and its new command syntax [#64532](https://github.com/saltstack/salt/issues/64532)\n- Adding a new decorator to indicate when a module is deprecated in favor of a Salt extension. [#64569](https://github.com/saltstack/salt/issues/64569)\n- Add jq-esque to_entries and from_entries functions [#64600](https://github.com/saltstack/salt/issues/64600)\n- Added ability to use PYTHONWARNINGS=ignore to silence deprecation warnings. [#64660](https://github.com/saltstack/salt/issues/64660)\n- Add follow_symlinks to file.symlink exec module to switch to os.path.lexists when False [#64665](https://github.com/saltstack/salt/issues/64665)\n- Strenghten Salt's HA capabilities with master clustering. [#64939](https://github.com/saltstack/salt/issues/64939)\n- Added win_appx state and execution modules for managing Microsoft Store apps and deprovisioning them from systems [#64978](https://github.com/saltstack/salt/issues/64978)\n- Add support for show_jid to salt-run\n\n  Adds support for show_jid master config option to salt-run, so its behaviour matches the salt cli command. [#65008](https://github.com/saltstack/salt/issues/65008)\n- Add ability to remove packages by wildcard via apt execution module [#65220](https://github.com/saltstack/salt/issues/65220)\n- Added support for master top modules on masterless minions [#65479](https://github.com/saltstack/salt/issues/65479)\n- Allowed accessing the regular mine from the SSH wrapper [#65645](https://github.com/saltstack/salt/issues/65645)\n- Allow enabling backup for Linode in Salt Cloud [#65697](https://github.com/saltstack/salt/issues/65697)\n- Add a backup schedule setter fFunction for Linode VMs [#65713](https://github.com/saltstack/salt/issues/65713)\n- Add acme support for manual plugin hooks [#65744](https://github.com/saltstack/salt/issues/65744)\n\n\n### Security\n\n- Upgrade to `tornado>=6.3.3` due to https://github.com/advisories/GHSA-qppv-j76h-2rpx [#64989](https://github.com/saltstack/salt/issues/64989)\n- Update to `gitpython>=3.1.35` due to https://github.com/advisories/GHSA-wfm5-v35h-vwf4 and https://github.com/advisories/GHSA-cwvm-v4w8-q58c [#65137](https://github.com/saltstack/salt/issues/65137)\n\n\n## 3007.0rc1 (2024-01-02)\n\n\n### Removed\n\n- Removed RHEL 5 support since long since end-of-lifed [#62520](https://github.com/saltstack/salt/issues/62520)\n- Removing Azure-Cloud modules from the code base. [#64322](https://github.com/saltstack/salt/issues/64322)\n- Dropped Python 3.7 support since it's EOL in 27 Jun 2023 [#64417](https://github.com/saltstack/salt/issues/64417)\n- Remove salt.payload.Serial [#64459](https://github.com/saltstack/salt/issues/64459)\n- Remove netmiko_conn and pyeapi_conn from salt.modules.napalm_mod [#64460](https://github.com/saltstack/salt/issues/64460)\n- Removed 'transport' arg from salt.utils.event.get_event [#64461](https://github.com/saltstack/salt/issues/64461)\n- Removed the usage of retired Linode API v3 from Salt Cloud [#64517](https://github.com/saltstack/salt/issues/64517)\n\n\n### Deprecated\n\n- Deprecate all Proxmox cloud modules [#64224](https://github.com/saltstack/salt/issues/64224)\n- Deprecate all the Vault modules in favor of the Vault Salt Extension https://github.com/salt-extensions/saltext-vault. The Vault modules will be removed in Salt core in 3009.0. [#64893](https://github.com/saltstack/salt/issues/64893)\n- Deprecate all the Docker modules in favor of the Docker Salt Extension https://github.com/saltstack/saltext-docker. The Docker modules will be removed in Salt core in 3009.0. [#64894](https://github.com/saltstack/salt/issues/64894)\n- Deprecate all the Zabbix modules in favor of the Zabbix Salt Extension https://github.com/salt-extensions/saltext-zabbix. The Zabbix modules will be removed in Salt core in 3009.0. [#64896](https://github.com/saltstack/salt/issues/64896)\n- Deprecate all the Apache modules in favor of the Apache Salt Extension https://github.com/salt-extensions/saltext-apache. The Apache modules will be removed in Salt core in 3009.0. [#64909](https://github.com/saltstack/salt/issues/64909)\n- Deprecation warning for Salt's backport of ``OrderedDict`` class which will be removed in 3009 [#65542](https://github.com/saltstack/salt/issues/65542)\n- Deprecate Kubernetes modules for move to saltext-kubernetes in version 3009 [#65565](https://github.com/saltstack/salt/issues/65565)\n- Deprecated all Pushover modules in favor of the Salt Extension at https://github.com/salt-extensions/saltext-pushover. The Pushover modules will be removed from Salt core in 3009.0 [#65567](https://github.com/saltstack/salt/issues/65567)\n\n\n### Changed\n\n- Masquerade property will not default to false turning off masquerade if not specified. [#53120](https://github.com/saltstack/salt/issues/53120)\n- Addressed Python 3.11 deprecations:\n\n  * Switch to `FullArgSpec` since Py 3.11 no longer has `ArgSpec`, deprecated since Py 3.0\n  * Stopped using the deprecated `cgi` module.\n  * Stopped using the deprecated `pipes` module\n  * Stopped using the deprecated `imp` module [#64457](https://github.com/saltstack/salt/issues/64457)\n- changed 'gpg_decrypt_must_succeed' default from False to True [#64462](https://github.com/saltstack/salt/issues/64462)\n\n\n### Fixed\n\n- When an NFS or FUSE mount fails to unmount when mount options have changed, try again with a lazy umount before mounting again. [#18907](https://github.com/saltstack/salt/issues/18907)\n- fix autoaccept gpg keys by supporting it in refresh_db module [#42039](https://github.com/saltstack/salt/issues/42039)\n- Made cmd.script work with files from the fileserver via salt-ssh [#48067](https://github.com/saltstack/salt/issues/48067)\n- Made slsutil.renderer work with salt-ssh [#50196](https://github.com/saltstack/salt/issues/50196)\n- Fixed defaults.merge is not available when using salt-ssh [#51605](https://github.com/saltstack/salt/issues/51605)\n- Fix extfs.mkfs missing parameter handling for -C, -d, and -e [#51858](https://github.com/saltstack/salt/issues/51858)\n- Fixed Salt master does not renew token [#51986](https://github.com/saltstack/salt/issues/51986)\n- Fixed salt-ssh continues state/pillar rendering with incorrect data when an exception is raised by a module on the target [#52452](https://github.com/saltstack/salt/issues/52452)\n- Fix extfs.tune has 'reserved' documented twice and is missing the 'reserved_percentage' keyword argument [#54426](https://github.com/saltstack/salt/issues/54426)\n- Fix the ability of the 'selinux.port_policy_present' state to modify. [#55687](https://github.com/saltstack/salt/issues/55687)\n- Fixed config.get does not support merge option with salt-ssh [#56441](https://github.com/saltstack/salt/issues/56441)\n- Removed an unused assignment in file.patch [#57204](https://github.com/saltstack/salt/issues/57204)\n- Fixed vault module fetching more than one secret in one run with single-use tokens [#57561](https://github.com/saltstack/salt/issues/57561)\n- Use brew path from which in mac_brew_pkg module and rely on _homebrew_bin() everytime [#57946](https://github.com/saltstack/salt/issues/57946)\n- Fixed Vault verify option to work on minions when only specified in master config [#58174](https://github.com/saltstack/salt/issues/58174)\n- Fixed vault command errors configured locally [#58580](https://github.com/saltstack/salt/issues/58580)\n- Fixed issue with basic auth causing invalid header error and 401 Bad Request, by using HTTPBasicAuthHandler instead of header. [#58936](https://github.com/saltstack/salt/issues/58936)\n- Make the LXD module work with pyLXD > 2.10 [#59514](https://github.com/saltstack/salt/issues/59514)\n- Return error if patch file passed to state file.patch is malformed. [#59806](https://github.com/saltstack/salt/issues/59806)\n- Handle failure and error information from tuned module/state [#60500](https://github.com/saltstack/salt/issues/60500)\n- Fixed sdb.get_or_set_hash with Vault single-use tokens [#60779](https://github.com/saltstack/salt/issues/60779)\n- Fixed state.test does not work with salt-ssh [#61100](https://github.com/saltstack/salt/issues/61100)\n- Made slsutil.findup work with salt-ssh [#61143](https://github.com/saltstack/salt/issues/61143)\n- Allow all primitive grain types for autosign_grains [#61416](https://github.com/saltstack/salt/issues/61416), [#63708](https://github.com/saltstack/salt/issues/63708)\n- `ipset.new_set` no longer fails when creating a set type that uses the `family` create option [#61620](https://github.com/saltstack/salt/issues/61620)\n- Fixed Vault session storage to allow unlimited use tokens [#62380](https://github.com/saltstack/salt/issues/62380)\n- fix the efi grain on FreeBSD [#63052](https://github.com/saltstack/salt/issues/63052)\n- Fixed gpg.receive_keys returns success on failed import [#63144](https://github.com/saltstack/salt/issues/63144)\n- Fixed GPG state module always reports success without changes [#63153](https://github.com/saltstack/salt/issues/63153)\n- Fixed GPG state module does not respect test mode [#63156](https://github.com/saltstack/salt/issues/63156)\n- Fixed gpg.absent with gnupghome/user, fixed gpg.delete_key with gnupghome [#63159](https://github.com/saltstack/salt/issues/63159)\n- Fixed service module does not handle enable/disable if systemd service is an alias [#63214](https://github.com/saltstack/salt/issues/63214)\n- Made x509_v2 compound match detection use new runner instead of peer publishing [#63278](https://github.com/saltstack/salt/issues/63278)\n- Need to make sure we update __pillar__ during a pillar refresh to ensure that process_beacons has the updated beacons loaded from pillar. [#63583](https://github.com/saltstack/salt/issues/63583)\n- This implements the vpc_uuid parameter when creating a droplet. This parameter selects the correct virtual private cloud (private network interface). [#63714](https://github.com/saltstack/salt/issues/63714)\n- pkg.installed no longer reports failure when installing packages that are installed via the task manager [#63767](https://github.com/saltstack/salt/issues/63767)\n- mac_xattr.list and mac_xattr.read will replace undecode-able bytes to avoid raising CommandExecutionError. [#63779](https://github.com/saltstack/salt/issues/63779) [#63779](https://github.com/saltstack/salt/issues/63779)\n- Fix aptpkg.latest_version performance, reducing number of times to 'shell out' [#63982](https://github.com/saltstack/salt/issues/63982)\n- Added option to use a fresh connection for mysql cache [#63991](https://github.com/saltstack/salt/issues/63991)\n- [lxd] Fixed a bug in `container_create` which prevented devices which are not of type `disk` to be correctly created and added to the container when passed via the `devices` parameter. [#63996](https://github.com/saltstack/salt/issues/63996)\n- Skipped the `isfile` check to greatly increase speed of reading minion keys for systems with a large number of minions on slow file storage [#64260](https://github.com/saltstack/salt/issues/64260)\n- Fix utf8 handling in 'pass' renderer [#64300](https://github.com/saltstack/salt/issues/64300)\n- Upgade tornado to 6.3.2 [#64305](https://github.com/saltstack/salt/issues/64305)\n- Prevent errors due missing 'transactional_update.apply' on SLE Micro and MicroOS. [#64369](https://github.com/saltstack/salt/issues/64369)\n- Fix 'unable to unmount' failure to return False result instead of None [#64420](https://github.com/saltstack/salt/issues/64420)\n- Fixed issue uninstalling duplicate packages in ``win_appx`` execution module [#64450](https://github.com/saltstack/salt/issues/64450)\n- Clean up tech debt, IPC now uses tcp transport. [#64488](https://github.com/saltstack/salt/issues/64488)\n- Made salt-ssh more strict when handling unexpected situations and state.* wrappers treat a remote exception as failure, excluded salt-ssh error returns from mine [#64531](https://github.com/saltstack/salt/issues/64531)\n- Fix flaky test for LazyLoader with isolated mocking of threading.RLock [#64567](https://github.com/saltstack/salt/issues/64567)\n- Fix possible `KeyError` exceptions in `salt.utils.user.get_group_dict`\n  while reading improper duplicated GID assigned for the user. [#64599](https://github.com/saltstack/salt/issues/64599)\n- changed vm_config() to deep-merge vm_overrides of specific VM, instead of simple-merging the whole vm_overrides [#64610](https://github.com/saltstack/salt/issues/64610)\n- Fix the way Salt tries to get the Homebrew's prefix\n\n  The first attempt to get the Homebrew's prefix is to look for\n  the `HOMEBREW_PREFIX` environment variable. If it's not set, then\n  Salt tries to get the prefix from the `brew` command. However, the\n  `brew` command can fail. So a last attempt is made to get the\n  prefix by guessing the installation path. [#64924](https://github.com/saltstack/salt/issues/64924)\n- Add missing MySQL Grant SERVICE_CONNECTION_ADMIN to mysql module. [#64934](https://github.com/saltstack/salt/issues/64934)\n- Fixed slsutil.update with salt-ssh during template rendering [#65067](https://github.com/saltstack/salt/issues/65067)\n- Keep track when an included file only includes sls files but is a requisite. [#65080](https://github.com/saltstack/salt/issues/65080)\n- Fixed `gpg.present` succeeds when the keyserver is unreachable [#65169](https://github.com/saltstack/salt/issues/65169)\n- Fix issue with openscap when the error was outside the expected scope. It now\n  returns failed with the error code and the error [#65193](https://github.com/saltstack/salt/issues/65193)\n- Fix typo in nftables module to ensure unique nft family values [#65295](https://github.com/saltstack/salt/issues/65295)\n- Dereference symlinks to set proper __cli opt [#65435](https://github.com/saltstack/salt/issues/65435)\n- Made salt-ssh merge master top returns for the same environment [#65480](https://github.com/saltstack/salt/issues/65480)\n- Account for situation where the metadata grain fails because the AWS environment requires an authentication token to query the metadata URL. [#65513](https://github.com/saltstack/salt/issues/65513)\n- Improve the condition of overriding target for pip with VENV_PIP_TARGET environment variable. [#65562](https://github.com/saltstack/salt/issues/65562)\n- Added SSH wrapper for logmod [#65630](https://github.com/saltstack/salt/issues/65630)\n- Include changes in the results when schedule.present state is run with test=True. [#65652](https://github.com/saltstack/salt/issues/65652)\n- Fixed Salt-SSH pillar rendering and state rendering with nested SSH calls when called via saltutil.cmd or in an orchestration [#65670](https://github.com/saltstack/salt/issues/65670)\n- Fix extfs.tune doesn't pass retcode to module.run [#65686](https://github.com/saltstack/salt/issues/65686)\n- Fix boto execution module loading [#65691](https://github.com/saltstack/salt/issues/65691)\n- Removed PR 65185 changes since incomplete solution [#65692](https://github.com/saltstack/salt/issues/65692)\n- Return an error message when the DNS plugin is not supported [#65739](https://github.com/saltstack/salt/issues/65739)\n\n\n### Added\n\n- Allowed publishing to regular minions from the SSH wrapper [#40943](https://github.com/saltstack/salt/issues/40943)\n- Added syncing of custom salt-ssh wrappers [#45450](https://github.com/saltstack/salt/issues/45450)\n- Made salt-ssh sync custom utils [#53666](https://github.com/saltstack/salt/issues/53666)\n- Add ability to use file.managed style check_cmd in file.serialize [#53982](https://github.com/saltstack/salt/issues/53982)\n- Revised use of deprecated net-tools and added support for ip neighbour with IPv4 ip_neighs, IPv6 ip_neighs6 [#57541](https://github.com/saltstack/salt/issues/57541)\n- Added password support to Redis returner. [#58044](https://github.com/saltstack/salt/issues/58044)\n- Added keyring param to gpg modules [#59783](https://github.com/saltstack/salt/issues/59783)\n- Added new grain to detect the Salt package type: onedir, pip or system [#62589](https://github.com/saltstack/salt/issues/62589)\n- Added Vault AppRole and identity issuance to minions [#62823](https://github.com/saltstack/salt/issues/62823)\n- Added Vault AppRole auth mount path configuration option [#62825](https://github.com/saltstack/salt/issues/62825)\n- Added distribution of Vault authentication details via response wrapping [#62828](https://github.com/saltstack/salt/issues/62828)\n- Add salt package type information. Either onedir, pip or system. [#62961](https://github.com/saltstack/salt/issues/62961)\n- Added signature verification to file.managed/archive.extracted [#63143](https://github.com/saltstack/salt/issues/63143)\n- Added signed_by_any/signed_by_all parameters to gpg.verify [#63166](https://github.com/saltstack/salt/issues/63166)\n- Added match runner [#63278](https://github.com/saltstack/salt/issues/63278)\n- Added Vault token lifecycle management [#63406](https://github.com/saltstack/salt/issues/63406)\n- adding new call for openscap xccdf eval supporting new parameters [#63416](https://github.com/saltstack/salt/issues/63416)\n- Added Vault lease management utility [#63440](https://github.com/saltstack/salt/issues/63440)\n- implement removal of ptf packages in zypper pkg module [#63442](https://github.com/saltstack/salt/issues/63442)\n- add JUnit output for saltcheck [#63463](https://github.com/saltstack/salt/issues/63463)\n- Add ability for file.keyvalue to create a file if it doesn't exist [#63545](https://github.com/saltstack/salt/issues/63545)\n- added cleanup of temporary mountpoint dir for macpackage installed state [#63905](https://github.com/saltstack/salt/issues/63905)\n- Add pkg.installed show installable version in test mode [#63985](https://github.com/saltstack/salt/issues/63985)\n- Added patch option to Vault SDB driver [#64096](https://github.com/saltstack/salt/issues/64096)\n- Added flags to create local users and groups [#64256](https://github.com/saltstack/salt/issues/64256)\n- Added inline specification of trusted CA root certificate for Vault [#64379](https://github.com/saltstack/salt/issues/64379)\n- Add ability to return False result in test mode of configurable_test_state [#64418](https://github.com/saltstack/salt/issues/64418)\n- Switched Salt's onedir Python version to 3.11 [#64457](https://github.com/saltstack/salt/issues/64457)\n- Added support for dnf5 and its new command syntax [#64532](https://github.com/saltstack/salt/issues/64532)\n- Adding a new decorator to indicate when a module is deprecated in favor of a Salt extension. [#64569](https://github.com/saltstack/salt/issues/64569)\n- Add jq-esque to_entries and from_entries functions [#64600](https://github.com/saltstack/salt/issues/64600)\n- Added ability to use PYTHONWARNINGS=ignore to silence deprecation warnings. [#64660](https://github.com/saltstack/salt/issues/64660)\n- Add follow_symlinks to file.symlink exec module to switch to os.path.lexists when False [#64665](https://github.com/saltstack/salt/issues/64665)\n- Added win_appx state and execution modules for managing Microsoft Store apps and deprovisioning them from systems [#64978](https://github.com/saltstack/salt/issues/64978)\n- Add support for show_jid to salt-run\n\n  Adds support for show_jid master config option to salt-run, so its behaviour matches the salt cli command. [#65008](https://github.com/saltstack/salt/issues/65008)\n- Add ability to remove packages by wildcard via apt execution module [#65220](https://github.com/saltstack/salt/issues/65220)\n- Added support for master top modules on masterless minions [#65479](https://github.com/saltstack/salt/issues/65479)\n- Allowed accessing the regular mine from the SSH wrapper [#65645](https://github.com/saltstack/salt/issues/65645)\n- Allow enabling backup for Linode in Salt Cloud [#65697](https://github.com/saltstack/salt/issues/65697)\n- Add a backup schedule setter fFunction for Linode VMs [#65713](https://github.com/saltstack/salt/issues/65713)\n- Add acme support for manual plugin hooks [#65744](https://github.com/saltstack/salt/issues/65744)\n\n\n### Security\n\n- Upgrade to `tornado>=6.3.3` due to https://github.com/advisories/GHSA-qppv-j76h-2rpx [#64989](https://github.com/saltstack/salt/issues/64989)\n- Update to `gitpython>=3.1.35` due to https://github.com/advisories/GHSA-wfm5-v35h-vwf4 and https://github.com/advisories/GHSA-cwvm-v4w8-q58c [#65137](https://github.com/saltstack/salt/issues/65137)\n\n\n## 3006.7 (2024-02-20)\n\n\n### Deprecated\n\n- Deprecate and stop using ``salt.features`` [#65951](https://github.com/saltstack/salt/issues/65951)\n\n\n### Changed\n\n- Change module search path priority, so Salt extensions can be overridden by syncable modules and module_dirs. You can switch back to the old logic by setting features.enable_deprecated_module_search_path_priority to true, but it will be removed in Salt 3008. [#65938](https://github.com/saltstack/salt/issues/65938)\n\n\n### Fixed\n\n- Fix an issue with mac_shadow that was causing a command execution error when\n  retrieving values that were not yet set. For example, retrieving last login\n  before the user had logged in. [#34658](https://github.com/saltstack/salt/issues/34658)\n- Fixed an issue when keys didn't match because of line endings [#52289](https://github.com/saltstack/salt/issues/52289)\n- Corrected encoding of credentials for use with Artifactory [#63063](https://github.com/saltstack/salt/issues/63063)\n- Use `send_multipart` instead of `send` when sending multipart message. [#65018](https://github.com/saltstack/salt/issues/65018)\n- Fix an issue where the minion would crash on Windows if some of the grains\n  failed to resolve [#65154](https://github.com/saltstack/salt/issues/65154)\n- Fix issue with openscap when the error was outside the expected scope. It now\n  returns failed with the error code and the error [#65193](https://github.com/saltstack/salt/issues/65193)\n- Upgrade relenv to 0.15.0 to fix namespaced packages installed by salt-pip [#65433](https://github.com/saltstack/salt/issues/65433)\n- Fix regression of fileclient re-use when rendering sls pillars and states [#65450](https://github.com/saltstack/salt/issues/65450)\n- Fixes the s3fs backend computing the local cache's files with the wrong hash type [#65589](https://github.com/saltstack/salt/issues/65589)\n- Fixed Salt-SSH pillar rendering and state rendering with nested SSH calls when called via saltutil.cmd or in an orchestration [#65670](https://github.com/saltstack/salt/issues/65670)\n- Fix boto execution module loading [#65691](https://github.com/saltstack/salt/issues/65691)\n- Removed PR 65185 changes since incomplete solution [#65692](https://github.com/saltstack/salt/issues/65692)\n- catch only ret/ events not all returning events. [#65727](https://github.com/saltstack/salt/issues/65727)\n- Fix nonsensical time in fileclient timeout error. [#65752](https://github.com/saltstack/salt/issues/65752)\n- Fixes an issue when reading/modifying ini files that contain unicode characters [#65777](https://github.com/saltstack/salt/issues/65777)\n- added https proxy to the list of proxies so that requests knows what to do with https based proxies [#65824](https://github.com/saltstack/salt/issues/65824)\n- Ensure minion channels are closed on any master connection error. [#65932](https://github.com/saltstack/salt/issues/65932)\n- Fixed issue where Salt can't find libcrypto when pip installed from a cloned repo [#65954](https://github.com/saltstack/salt/issues/65954)\n- Fix RPM package systemd scriptlets to make RPM packages more universal [#65987](https://github.com/saltstack/salt/issues/65987)\n- Fixed an issue where fileclient requests during Pillar rendering cause\n  fileserver backends to be needlessly refreshed. [#65990](https://github.com/saltstack/salt/issues/65990)\n- Fix exceptions being set on futures that are already done in ZeroMQ transport [#66006](https://github.com/saltstack/salt/issues/66006)\n- Use hmac compare_digest method in hashutil module to mitigate potential timing attacks [#66041](https://github.com/saltstack/salt/issues/66041)\n- Fix request channel default timeout regression. In 3006.5 it was changed from\n  60 to 30 and is now set back to 60 by default. [#66061](https://github.com/saltstack/salt/issues/66061)\n- Upgrade relenv to 0.15.1 to fix debugpy support. [#66094](https://github.com/saltstack/salt/issues/66094)\n\n\n### Security\n\n- Bump to ``cryptography==42.0.0`` due to https://github.com/advisories/GHSA-3ww4-gg4f-jr7f\n\n  In the process, we were also required to update to ``pyOpenSSL==24.0.0`` [#66004](https://github.com/saltstack/salt/issues/66004)\n- Bump to `cryptography==42.0.3` due to https://github.com/advisories/GHSA-3ww4-gg4f-jr7f [#66090](https://github.com/saltstack/salt/issues/66090)\n\n\n## 3006.6 (2024-01-26)\n\n\n### Changed\n\n- Salt no longer time bombs user installations on code using `salt.utils.versions.warn_until_date` [#665924](https://github.com/saltstack/salt/issues/665924)\n\n\n### Fixed\n\n- Fix un-closed transport in tornado netapi [#65759](https://github.com/saltstack/salt/issues/65759)\n\n\n### Security\n\n- CVE-2024-22231 Prevent directory traversal when creating syndic cache directory on the master\n  CVE-2024-22232 Prevent directory traversal attacks in the master's serve_file method.\n  These vulerablities were discovered and reported by:\n  Yudi Zhao(Huawei Nebula Security Lab),Chenwei Jiang(Huawei Nebula Security Lab) [#565](https://github.com/saltstack/salt/issues/565)\n- Update some requirements which had some security issues:\n\n  * Bump to `pycryptodome==3.19.1` and `pycryptodomex==3.19.1` due to https://github.com/advisories/GHSA-j225-cvw7-qrx7\n  * Bump to `gitpython==3.1.41` due to https://github.com/advisories/GHSA-2mqj-m65w-jghx\n  * Bump to `jinja2==3.1.3` due to https://github.com/advisories/GHSA-h5c8-rqwp-cp95 [#65830](https://github.com/saltstack/salt/issues/65830)\n\n\n## 3006.5 (2023-12-12)\nSalt 3005.5 (2024-01-19)\n========================\n\nSecurity\n--------\n\n- Fix CVE-2024-22231 Prevent directory traversal when creating syndic cache directory on the master.\n- Fix CVE-2024-22232 Prevent directory traversal attacks in the master's serve_file method.\n\nThese vulnerablities were discovered and reported by:\nYudi Zhao(Huawei Nebula Security Lab),Chenwei Jiang(Huawei Nebula Security Lab) (#565)\n\n\nSalt v3005.4 (2023-10-16)\n=========================\n\n\n### Removed\n\n- Tech Debt - support for pysss removed due to functionality addition in Python 3.3 [#65029](https://github.com/saltstack/salt/issues/65029)\n\n\n### Fixed\n\n- Improved error message when state arguments are accidentally passed as a string [#38098](https://github.com/saltstack/salt/issues/38098)\n- Allow `pip.install` to create a log file that is passed in if the parent directory is writeable [#44722](https://github.com/saltstack/salt/issues/44722)\n- Fixed merging of complex pillar overrides with salt-ssh states [#59802](https://github.com/saltstack/salt/issues/59802)\n- Fixed gpg pillar rendering with salt-ssh [#60002](https://github.com/saltstack/salt/issues/60002)\n- Made salt-ssh states not re-render pillars unnecessarily [#62230](https://github.com/saltstack/salt/issues/62230)\n- Made Salt maintain options in Debian package repo definitions [#64130](https://github.com/saltstack/salt/issues/64130)\n- Migrated all [`invoke`](https://www.pyinvoke.org/) tasks to [`python-tools-scripts`](https://github.com/s0undt3ch/python-tools-scripts).\n\n  * `tasks/docs.py` -> `tools/precommit/docs.py`\n  * `tasks/docstrings.py` -> `tools/precommit/docstrings.py`\n  * `tasks/loader.py` -> `tools/precommit/loader.py`\n  * `tasks/filemap.py` -> `tools/precommit/filemap.py` [#64374](https://github.com/saltstack/salt/issues/64374)\n- Fix salt user login shell path in Debian packages [#64377](https://github.com/saltstack/salt/issues/64377)\n- Fill out lsb_distrib_xxxx (best estimate) grains if problems with retrieving lsb_release data [#64473](https://github.com/saltstack/salt/issues/64473)\n- Fixed an issue in the ``file.directory`` state where the ``children_only`` keyword\n  argument was not being respected. [#64497](https://github.com/saltstack/salt/issues/64497)\n- Move salt.ufw to correct location /etc/ufw/applications.d/ [#64572](https://github.com/saltstack/salt/issues/64572)\n- Fixed salt-ssh stacktrace when retcode is not an integer [#64575](https://github.com/saltstack/salt/issues/64575)\n- Fixed SSH shell seldomly fails to report any exit code [#64588](https://github.com/saltstack/salt/issues/64588)\n- Fixed some issues in x509_v2 execution module private key functions [#64597](https://github.com/saltstack/salt/issues/64597)\n- Fixed grp.getgrall() in utils/user.py causing performance issues [#64888](https://github.com/saltstack/salt/issues/64888)\n- Fix user.list_groups omits remote groups via sssd, etc. [#64953](https://github.com/saltstack/salt/issues/64953)\n- Ensure sync from _grains occurs before attempting pillar compilation in case custom grain used in pillar file [#65027](https://github.com/saltstack/salt/issues/65027)\n- Moved gitfs locks to salt working dir to avoid lock wipes [#65086](https://github.com/saltstack/salt/issues/65086)\n- Only attempt to create a keys directory when `--gen-keys` is passed to the `salt-key` CLI [#65093](https://github.com/saltstack/salt/issues/65093)\n- Fix nonce verification, request server replies do not stomp on eachother. [#65114](https://github.com/saltstack/salt/issues/65114)\n- speed up yumpkg list_pkgs by not requiring digest or signature verification on lookup. [#65152](https://github.com/saltstack/salt/issues/65152)\n- Fix pkg.latest failing on windows for winrepo packages where the package is already up to date [#65165](https://github.com/saltstack/salt/issues/65165)\n- Ensure __kwarg__ is preserved when checking for kwargs.  This change affects proxy minions when used with Deltaproxy, which had kwargs popped when targeting multiple minions id. [#65179](https://github.com/saltstack/salt/issues/65179)\n- Fixes traceback when state id is an int in a reactor SLS file. [#65210](https://github.com/saltstack/salt/issues/65210)\n- Install logrotate config as /etc/logrotate.d/salt-common for Debian packages\n  Remove broken /etc/logrotate.d/salt directory from 3006.3 if it exists. [#65231](https://github.com/saltstack/salt/issues/65231)\n- Use ``sha256`` as the default ``hash_type``. It has been the default since Salt v2016.9 [#65287](https://github.com/saltstack/salt/issues/65287)\n- Preserve ownership on log rotation [#65288](https://github.com/saltstack/salt/issues/65288)\n- Ensure that the correct value of jid_inclue is passed if the argument is included in the passed keyword arguments. [#65302](https://github.com/saltstack/salt/issues/65302)\n- Uprade relenv to 0.14.2\n   - Update openssl to address CVE-2023-5363.\n   - Fix bug in openssl setup when openssl binary can't be found.\n   - Add M1 mac support. [#65316](https://github.com/saltstack/salt/issues/65316)\n- Fix regex for filespec adding/deleting fcontext policy in selinux [#65340](https://github.com/saltstack/salt/issues/65340)\n- Ensure CLI options take priority over Saltfile options [#65358](https://github.com/saltstack/salt/issues/65358)\n- Test mode for state function `saltmod.wheel` no longer set's `result` to `(None,)` [#65372](https://github.com/saltstack/salt/issues/65372)\n- Client only process events which tag conforms to an event return. [#65400](https://github.com/saltstack/salt/issues/65400)\n- Fixes an issue setting user or machine policy on Windows when the Group Policy\n  directory is missing [#65411](https://github.com/saltstack/salt/issues/65411)\n- Fix regression in file module which was not re-using a file client. [#65450](https://github.com/saltstack/salt/issues/65450)\n- pip.installed state will now properly fail when a specified user does not exists [#65458](https://github.com/saltstack/salt/issues/65458)\n- Publish channel connect callback method properly closes it's request channel. [#65464](https://github.com/saltstack/salt/issues/65464)\n- Ensured the pillar in SSH wrapper modules is the same as the one used in template rendering when overrides are passed [#65483](https://github.com/saltstack/salt/issues/65483)\n- Fix file.comment ignore_missing not working with multiline char [#65501](https://github.com/saltstack/salt/issues/65501)\n- Warn when an un-closed transport client is being garbage collected. [#65554](https://github.com/saltstack/salt/issues/65554)\n- Only generate the HMAC's for ``libssl.so.1.1`` and ``libcrypto.so.1.1`` if those files exist. [#65581](https://github.com/saltstack/salt/issues/65581)\n- Fixed an issue where Salt Cloud would fail if it could not delete lingering\n  PAexec binaries [#65584](https://github.com/saltstack/salt/issues/65584)\n\n\n### Added\n\n- Added Salt support for Debian 12 [#64223](https://github.com/saltstack/salt/issues/64223)\n- Added Salt support for Amazon Linux 2023 [#64455](https://github.com/saltstack/salt/issues/64455)\n\n\n### Security\n\n- Bump to `cryptography==41.0.4` due to https://github.com/advisories/GHSA-v8gr-m533-ghj9 [#65268](https://github.com/saltstack/salt/issues/65268)\n- Bump to `cryptography==41.0.7` due to https://github.com/advisories/GHSA-jfhm-5ghh-2f97 [#65643](https://github.com/saltstack/salt/issues/65643)\n\n\n## 3006.4 (2023-10-16)\n\n### Security\n\n- Fix CVE-2023-34049 by ensuring we do not use a predictable name for the script and correctly check returncode of scp command.\n  This only impacts salt-ssh users using the pre-flight option. [#cve-2023-34049](https://github.com/saltstack/salt/issues/cve-2023-34049)\n- Update to `gitpython>=3.1.35` due to https://github.com/advisories/GHSA-wfm5-v35h-vwf4 and https://github.com/advisories/GHSA-cwvm-v4w8-q58c [#65163](https://github.com/saltstack/salt/issues/65163)\n- Bump to `cryptography==41.0.4` due to https://github.com/advisories/GHSA-v8gr-m533-ghj9 [#65268](https://github.com/saltstack/salt/issues/65268)\n- Upgrade relenv to 0.13.12 to address CVE-2023-4807 [#65316](https://github.com/saltstack/salt/issues/65316)\n- Bump to `urllib3==1.26.17` or `urllib3==2.0.6` due to https://github.com/advisories/GHSA-v845-jxx5-vc9f [#65334](https://github.com/saltstack/salt/issues/65334)\n- Bump to `gitpython==3.1.37` due to https://github.com/advisories/GHSA-cwvm-v4w8-q58c [#65383](https://github.com/saltstack/salt/issues/65383)\n\n\n## 3005.4 (2023-10-16)\n\n### Security\n\n- Fix CVE-2023-34049 by ensuring we do not use a predictable name for the script and correctly check returncode of scp command.\n  This only impacts salt-ssh users using the pre-flight option. (cve-2023-34049)\n- Bump to `cryptography==41.0.4` due to https://github.com/advisories/GHSA-v8gr-m533-ghj9 (#65267)\n- Bump to `urllib3==1.26.17` or `urllib3==2.0.6` due to https://github.com/advisories/GHSA-v845-jxx5-vc9f (#65334)\n- Bump to `gitpython==3.1.37` due to https://github.com/advisories/GHSA-cwvm-v4w8-q58c (#65383)\n\n\n## Salt v3005.3 (2023-09-14)\n\n### Fixed\n\n- Fix __env__ and improve cache cleaning see more info at pull #65017. (#65002)\n\n\n### Security\n\n- Update to `gitpython>=3.1.35` due to https://github.com/advisories/GHSA-wfm5-v35h-vwf4 and https://github.com/advisories/GHSA-cwvm-v4w8-q58c (#65167)\n\n\n## 3006.3 (2023-09-06)\n\n\n### Removed\n\n- Fedora 36 support was removed because it reached EOL [#64315](https://github.com/saltstack/salt/issues/64315)\n- Handle deprecation warnings:\n\n  * Switch to `FullArgSpec` since Py 3.11 no longer has `ArgSpec`, deprecated since Py 3.0\n  * Stop using the deprecated `cgi` module\n  * Stop using the deprecated `pipes` module\n  * Stop using the deprecated `imp` module [#64553](https://github.com/saltstack/salt/issues/64553)\n\n\n### Changed\n\n- Replace libnacl with PyNaCl [#64372](https://github.com/saltstack/salt/issues/64372)\n- Don't hardcode the python version on the Salt Package tests and on the `pkg/debian/salt-cloud.postinst` file [#64553](https://github.com/saltstack/salt/issues/64553)\n- Some more deprecated code fixes:\n\n  * Stop using the deprecated `locale.getdefaultlocale()` function\n  * Stop accessing deprecated attributes\n  * `pathlib.Path.__enter__()` usage is deprecated and not required, a no-op [#64565](https://github.com/saltstack/salt/issues/64565)\n- Bump to `pyyaml==6.0.1` due to https://github.com/yaml/pyyaml/issues/601 and address lint issues [#64657](https://github.com/saltstack/salt/issues/64657)\n\n\n### Fixed\n\n- Fix for assume role when used salt-cloud to create aws ec2. [#52501](https://github.com/saltstack/salt/issues/52501)\n- fixes aptpkg module by checking for blank comps. [#58667](https://github.com/saltstack/salt/issues/58667)\n- `wheel.file_roots.find` is now able to find files in subdirectories of the roots. [#59800](https://github.com/saltstack/salt/issues/59800)\n- pkg.latest no longer fails when multiple versions are reported to be installed (e.g. updating the kernel) [#60931](https://github.com/saltstack/salt/issues/60931)\n- Do not update the credentials dictionary in `utils/aws.py` while iterating over it, and use the correct delete functionality [#61049](https://github.com/saltstack/salt/issues/61049)\n- fixed runner not having a proper exit code when runner modules throw an exception. [#61173](https://github.com/saltstack/salt/issues/61173)\n- `pip.list_all_versions` now works with `index_url` and `extra_index_url` [#61610](https://github.com/saltstack/salt/issues/61610)\n- speed up file.recurse by using prefix with cp.list_master_dir and remove an un-needed loop. [#61998](https://github.com/saltstack/salt/issues/61998)\n- Preserve test=True condition while running sub states. [#62590](https://github.com/saltstack/salt/issues/62590)\n- Job returns are only sent to originating master [#62834](https://github.com/saltstack/salt/issues/62834)\n- Fixes an issue with failing subsequent state runs with the lgpo state module.\n  The ``lgpo.get_polcy`` function now returns all boolean settings. [#63296](https://github.com/saltstack/salt/issues/63296)\n- Fix SELinux get policy with trailing whitespace [#63336](https://github.com/saltstack/salt/issues/63336)\n- Fixes an issue with boolean settings not being reported after being set. The\n  ``lgpo.get_polcy`` function now returns all boolean settings. [#63473](https://github.com/saltstack/salt/issues/63473)\n- Ensure body is returned when salt.utils.http returns something other than 200 with tornado backend. [#63557](https://github.com/saltstack/salt/issues/63557)\n- Allow long running pillar and file client requests to finish using request_channel_timeout and request_channel_tries minion config. [#63824](https://github.com/saltstack/salt/issues/63824)\n- Fix state_queue type checking to allow int values [#64122](https://github.com/saltstack/salt/issues/64122)\n- Call global logger when catching pip.list exceptions in states.pip.installed\n  Rename global logger `log` to `logger` inside pip_state [#64169](https://github.com/saltstack/salt/issues/64169)\n- Fixes permissions created by the Debian and RPM packages for the salt user.\n\n  The salt user created by the Debian and RPM packages to run the salt-master process, was previously given ownership of various directories in a way which compromised the benefits of running the salt-master process as a non-root user.\n\n  This fix sets the salt user to only have write access to those files and\n  directories required for the salt-master process to run. [#64193](https://github.com/saltstack/salt/issues/64193)\n- Fix user.present state when groups is unset to ensure the groups are unchanged, as documented. [#64211](https://github.com/saltstack/salt/issues/64211)\n- Fixes issue with MasterMinion class loading configuration from `/etc/salt/minion.d/*.conf.\n\n  The MasterMinion class (used for running orchestraions on master and other functionality) was incorrectly loading configuration from `/etc/salt/minion.d/*.conf`, when it should only load configuration from `/etc/salt/master` and `/etc/salt/master.d/*.conf`. [#64219](https://github.com/saltstack/salt/issues/64219)\n- Fixed issue in mac_user.enable_auto_login that caused the user's keychain to be reset at each boot [#64226](https://github.com/saltstack/salt/issues/64226)\n- Fixed KeyError in logs when running a state that fails. [#64231](https://github.com/saltstack/salt/issues/64231)\n- Fixed x509_v2 `create_private_key`/`create_crl` unknown kwargs: __pub_fun... [#64232](https://github.com/saltstack/salt/issues/64232)\n- remove the hard coded python version in error. [#64237](https://github.com/saltstack/salt/issues/64237)\n- `salt-pip` now properly errors out when being called from a non `onedir` environment. [#64249](https://github.com/saltstack/salt/issues/64249)\n- Ensure we return an error when adding the key fails in the pkgrepo state for debian hosts. [#64253](https://github.com/saltstack/salt/issues/64253)\n- Fixed file client private attribute reference on `SaltMakoTemplateLookup` [#64280](https://github.com/saltstack/salt/issues/64280)\n- Fix pkgrepo.absent failures on apt-based systems when repo either a) contains a\n  trailing slash, or b) there is an arch mismatch. [#64286](https://github.com/saltstack/salt/issues/64286)\n- Fix detection of Salt codename by \"salt_version\" execution module [#64306](https://github.com/saltstack/salt/issues/64306)\n- Ensure selinux values are handled lowercase [#64318](https://github.com/saltstack/salt/issues/64318)\n- Remove the `clr.AddReference`, it is causing an `Illegal characters in path` exception [#64339](https://github.com/saltstack/salt/issues/64339)\n- Update `pkg.group_installed` state to support repo options [#64348](https://github.com/saltstack/salt/issues/64348)\n- Fix salt user login shell path in Debian packages [#64377](https://github.com/saltstack/salt/issues/64377)\n- Allow for multiple user's keys presented when authenticating, for example: root, salt, etc. [#64398](https://github.com/saltstack/salt/issues/64398)\n- Fixed an issue with ``lgpo_reg`` where existing entries for the same key in\n  ``Registry.pol`` were being overwritten in subsequent runs if the value name in\n  the subesequent run was contained in the existing value name. For example, a\n  key named ``SetUpdateNotificationLevel`` would be overwritten by a subsequent\n  run attempting to set ``UpdateNotificationLevel`` [#64401](https://github.com/saltstack/salt/issues/64401)\n- Add search for %ProgramData%\\Chocolatey\\choco.exe to determine if Chocolatey is installed or not [#64427](https://github.com/saltstack/salt/issues/64427)\n- Fix regression for user.present on handling groups with dupe GIDs [#64430](https://github.com/saltstack/salt/issues/64430)\n- Fix inconsistent use of args in ssh_auth.managed [#64442](https://github.com/saltstack/salt/issues/64442)\n- Ensure we raise an error when the name argument is invalid in pkgrepo.managed state for systems using apt. [#64451](https://github.com/saltstack/salt/issues/64451)\n- Fix file.symlink will not replace/update existing symlink [#64477](https://github.com/saltstack/salt/issues/64477)\n- Fixed salt-ssh state.* commands returning retcode 0 when state/pillar rendering fails [#64514](https://github.com/saltstack/salt/issues/64514)\n- Fix pkg.install when using a port in the url. [#64516](https://github.com/saltstack/salt/issues/64516)\n- `win_pkg` Fixes an issue runing `pkg.install` with `version=latest` where the\n  new installer would not be cached if there was already an installer present\n  with the same name. [#64519](https://github.com/saltstack/salt/issues/64519)\n- Added a `test:full` label in the salt repository, which, when selected, will force a full test run. [#64539](https://github.com/saltstack/salt/issues/64539)\n- Syndic's async_req_channel uses the asynchornous version of request channel [#64552](https://github.com/saltstack/salt/issues/64552)\n- Ensure runners properly save information to job cache. [#64570](https://github.com/saltstack/salt/issues/64570)\n- Added salt.ufw to salt-master install on Debian and Ubuntu [#64572](https://github.com/saltstack/salt/issues/64572)\n- Added support for Chocolatey 2.0.0+ while maintaining support for older versions [#64622](https://github.com/saltstack/salt/issues/64622)\n- Updated semanage fcontext to use --modify if context already exists when adding context [#64625](https://github.com/saltstack/salt/issues/64625)\n- Preserve request client socket between requests. [#64627](https://github.com/saltstack/salt/issues/64627)\n- Show user friendly message when pillars timeout [#64651](https://github.com/saltstack/salt/issues/64651)\n- File client timeouts durring jobs show user friendly errors instead of tracbacks [#64653](https://github.com/saltstack/salt/issues/64653)\n- SaltClientError does not log a traceback on minions, we expect these to happen so a user friendly log is shown. [#64729](https://github.com/saltstack/salt/issues/64729)\n- Look in location salt is running from, this accounts for running from an unpacked onedir file that has not been installed. [#64877](https://github.com/saltstack/salt/issues/64877)\n- Preserve credentials on spawning platforms, minions no longer re-authenticate\n  with every job when using `multiprocessing=True`. [#64914](https://github.com/saltstack/salt/issues/64914)\n- Fixed uninstaller to not remove the `salt` directory by default. This allows\n  the `extras-3.##` folder to persist so salt-pip dependencies are not wiped out\n  during an upgrade. [#64957](https://github.com/saltstack/salt/issues/64957)\n- fix msteams by adding the missing header that Microsoft is now enforcing. [#64973](https://github.com/saltstack/salt/issues/64973)\n- Fix __env__ and improve cache cleaning see more info at pull #65017. [#65002](https://github.com/saltstack/salt/issues/65002)\n- Better error message on inconsistent decoded payload [#65020](https://github.com/saltstack/salt/issues/65020)\n- Handle permissions access error when calling `lsb_release` with the salt user [#65024](https://github.com/saltstack/salt/issues/65024)\n- Allow schedule state module to update schedule when the minion is offline. [#65033](https://github.com/saltstack/salt/issues/65033)\n- Fixed creation of wildcard DNS in SAN in `x509_v2` [#65072](https://github.com/saltstack/salt/issues/65072)\n- The macOS installer no longer removes the extras directory [#65073](https://github.com/saltstack/salt/issues/65073)\n\n\n### Added\n\n- Added a script to automate setting up a 2nd minion in a user context on Windows [#64439](https://github.com/saltstack/salt/issues/64439)\n- Several fixes to the CI workflow:\n\n  * Don't override the `on` Jinja block on the `ci.yaml` template. This enables reacting to labels getting added/removed\n    to/from pull requests.\n  * Switch to using `tools` and re-use the event payload available instead of querying the GH API again to get the pull\n    request labels\n  * Concentrate test selection by labels to a single place\n  * Enable code coverage on pull-requests by setting the `test:coverage` label [#64547](https://github.com/saltstack/salt/issues/64547)\n\n\n### Security\n\n- Upgrade to `cryptography==41.0.3`(and therefor `pyopenssl==23.2.0` due to https://github.com/advisories/GHSA-jm77-qphf-c4w8)\n\n  This only really impacts pip installs of Salt and the windows onedir since the linux and macos onedir build every package dependency from source, not from pre-existing wheels.\n\n  Also resolves the following cryptography advisories:\n\n  Due to:\n    * https://github.com/advisories/GHSA-5cpq-8wj7-hf2v\n    * https://github.com/advisories/GHSA-x4qr-2fvf-3mr5\n    * https://github.com/advisories/GHSA-w7pp-m8wf-vj6r [#64595](https://github.com/saltstack/salt/issues/64595)\n- Bump to `aiohttp==3.8.5` due to https://github.com/advisories/GHSA-45c4-8wx5-qw6w [#64687](https://github.com/saltstack/salt/issues/64687)\n- Bump to `certifi==2023.07.22` due to https://github.com/advisories/GHSA-xqr8-7jwr-rhp7 [#64718](https://github.com/saltstack/salt/issues/64718)\n- Upgrade `relenv` to `0.13.2` and Python to `3.10.12`\n\n  Addresses multiple CVEs in Python's dependencies: https://docs.python.org/release/3.10.12/whatsnew/changelog.html#python-3-10-12 [#64719](https://github.com/saltstack/salt/issues/64719)\n- Update to `gitpython>=3.1.32` due to https://github.com/advisories/GHSA-pr76-5cm5-w9cj [#64988](https://github.com/saltstack/salt/issues/64988)\n\n\n## 3006.2 (2023-08-09)\n\n\n### Fixed\n\n- In scenarios where PythonNet fails to load, Salt will now fall back to WMI for\n  gathering grains information [#64897](https://github.com/saltstack/salt/issues/64897)\n\n\n### Security\n\n- fix CVE-2023-20897 by catching exception instead of letting exception disrupt connection [#cve-2023-20897](https://github.com/saltstack/salt/issues/cve-2023-20897)\n- Fixed gitfs cachedir_basename to avoid hash collisions. Added MP Lock to gitfs. These changes should stop race conditions. [#cve-2023-20898](https://github.com/saltstack/salt/issues/cve-2023-20898)\n- Upgrade to `requests==2.31.0`\n\n  Due to:\n    * https://github.com/advisories/GHSA-j8r2-6x86-q33q [#64336](https://github.com/saltstack/salt/issues/64336)\n- Upgrade to `cryptography==41.0.3`(and therefor `pyopenssl==23.2.0` due to https://github.com/advisories/GHSA-jm77-qphf-c4w8)\n\n  This only really impacts pip installs of Salt and the windows onedir since the linux and macos onedir build every package dependency from source, not from pre-existing wheels.\n\n  Also resolves the following cryptography advisories:\n\n  Due to:\n    * https://github.com/advisories/GHSA-5cpq-8wj7-hf2v\n    * https://github.com/advisories/GHSA-x4qr-2fvf-3mr5\n    * https://github.com/advisories/GHSA-w7pp-m8wf-vj6r\n\n  There is no security upgrade available for Py3.5 [#64595](https://github.com/saltstack/salt/issues/64595)\n- Bump to `certifi==2023.07.22` due to https://github.com/advisories/GHSA-xqr8-7jwr-rhp7 [#64718](https://github.com/saltstack/salt/issues/64718)\n- Upgrade `relenv` to `0.13.2` and Python to `3.10.12`\n\n  Addresses multiple CVEs in Python's dependencies: https://docs.python.org/release/3.10.12/whatsnew/changelog.html#python-3-10-12 [#64719](https://github.com/saltstack/salt/issues/64719)\n\n\n## Salt v3005.2 (2023-07-31)\n\n### Changed\n\n- Additional required package upgrades\n\n  * It's now `pyzmq>=20.0.0` on all platforms, and `<=22.0.3` just for windows.\n  * Upgrade to `pyopenssl==23.0.0` due to the cryptography upgrade. (#63757)\n\n\n### Security\n\n- fix CVE-2023-20897 by catching exception instead of letting exception disrupt connection (cve-2023-20897)\n- Fixed gitfs cachedir_basename to avoid hash collisions. Added MP Lock to gitfs. These changes should stop race conditions. (cve-2023-20898)\n- Upgrade to `requests==2.31.0`\n\n  Due to:\n    * https://github.com/advisories/GHSA-j8r2-6x86-q33q (#64336)\n- Upgrade to `cryptography==41.0.3`(and therefor `pyopenssl==23.2.0` due to https://github.com/advisories/GHSA-jm77-qphf-c4w8)\n\n  Also resolves the following cryptography advisories:\n\n  Due to:\n    * https://github.com/advisories/GHSA-5cpq-8wj7-hf2v\n    * https://github.com/advisories/GHSA-x4qr-2fvf-3mr5\n    * https://github.com/advisories/GHSA-w7pp-m8wf-vj6r\n\n  There is no security upgrade available for Py3.5 (#64595)\n- Bump to `certifi==2023.07.22` due to https://github.com/advisories/GHSA-xqr8-7jwr-rhp7\n\n  Python 3.5 cannot get the updated requirements since certifi no longer supports this python version (#64720)\n\n\n## 3006.1 (2023-05-05)\n\n\n### Fixed\n\n- Check that the return data from the cloud create function is a dictionary before attempting to pull values out. [#61236](https://github.com/saltstack/salt/issues/61236)\n- Ensure NamedLoaderContext's have their value() used if passing to other modules [#62477](https://github.com/saltstack/salt/issues/62477)\n- add documentation note about reactor state ids. [#63589](https://github.com/saltstack/salt/issues/63589)\n- Added support for ``test=True`` to the ``file.cached`` state module [#63785](https://github.com/saltstack/salt/issues/63785)\n- Updated `source_hash` documentation and added a log warning when `source_hash` is used with a source other than `http`, `https` and `ftp`. [#63810](https://github.com/saltstack/salt/issues/63810)\n- Fixed clear pillar cache on every highstate and added clean_pillar_cache=False to saltutil functions. [#64081](https://github.com/saltstack/salt/issues/64081)\n- Fix dmsetup device names with hyphen being picked up. [#64082](https://github.com/saltstack/salt/issues/64082)\n- Update all the scheduler functions to include a fire_event argument which will determine whether to fire the completion event onto the event bus.\n  This event is only used when these functions are called via the schedule execution modules.\n  Update all the calls to the schedule related functions in the deltaproxy proxy minion to include fire_event=False, as the event bus is not available when these functions are called. [#64102](https://github.com/saltstack/salt/issues/64102), [#64103](https://github.com/saltstack/salt/issues/64103)\n- Default to a 0 timeout if none is given for the terraform roster to avoid `-o ConnectTimeout=None` when using `salt-ssh` [#64109](https://github.com/saltstack/salt/issues/64109)\n- Disable class level caching of the file client on `SaltCacheLoader` and properly use context managers to take care of initialization and termination of the file client. [#64111](https://github.com/saltstack/salt/issues/64111)\n- Fixed several file client uses which were not properly terminating it by switching to using it as a context manager\n  whenever possible or making sure `.destroy()` was called when using a context manager was not possible. [#64113](https://github.com/saltstack/salt/issues/64113)\n- Fix running setup.py when passing in --salt-config-dir and --salt-cache-dir arguments. [#64114](https://github.com/saltstack/salt/issues/64114)\n- Moved /etc/salt/proxy and /lib/systemd/system/salt-proxy@.service to the salt-minion DEB package [#64117](https://github.com/saltstack/salt/issues/64117)\n- Stop passing `**kwargs` and be explicit about the keyword arguments to pass, namely, to `cp.cache_file` call in `salt.states.pkg` [#64118](https://github.com/saltstack/salt/issues/64118)\n- lgpo_reg.set_value now returns ``True`` on success instead of ``None`` [#64126](https://github.com/saltstack/salt/issues/64126)\n- Make salt user's home /opt/saltstack/salt [#64141](https://github.com/saltstack/salt/issues/64141)\n- Fix cmd.run doesn't output changes in test mode [#64150](https://github.com/saltstack/salt/issues/64150)\n- Move salt user and group creation to common package [#64158](https://github.com/saltstack/salt/issues/64158)\n- Fixed issue in salt-cloud so that multiple masters specified in the cloud\n  are written to the minion config properly [#64170](https://github.com/saltstack/salt/issues/64170)\n- Make sure the `salt-ssh` CLI calls it's `fsclient.destroy()` method when done. [#64184](https://github.com/saltstack/salt/issues/64184)\n- Stop using the deprecated `salt.transport.client` imports. [#64186](https://github.com/saltstack/salt/issues/64186)\n- Add a `.pth` to the Salt onedir env to ensure packages in extras are importable. Bump relenv to 0.12.3. [#64192](https://github.com/saltstack/salt/issues/64192)\n- Fix ``lgpo_reg`` state to work with User policy [#64200](https://github.com/saltstack/salt/issues/64200)\n- Cloud deployment directories are owned by salt user and group [#64204](https://github.com/saltstack/salt/issues/64204)\n- ``lgpo_reg`` state now enforces and reports changes to the registry [#64222](https://github.com/saltstack/salt/issues/64222)\n\n## 3006.0 (2023-04-18)\n\n\n### Removed\n\n- Remove and deprecate the __orchestration__ key from salt.runner and salt.wheel return data. To get it back, set features.enable_deprecated_orchestration_flag master configuration option to True. The flag will be completely removed in Salt 3008 Argon. [#59917](https://github.com/saltstack/salt/issues/59917)\n- Removed distutils and replaced with setuptools, given distutils is deprecated and removed in Python 3.12 [#60476](https://github.com/saltstack/salt/issues/60476)\n- Removed ``runtests`` targets from ``noxfile.py`` [#62239](https://github.com/saltstack/salt/issues/62239)\n- Removed the PyObjC dependency.\n\n  This addresses problems with building a one dir build for macOS.\n  It became problematic because depending on the macOS version, it pulls different dependencies, and we would either have to build a macos onedir for each macOS supported release, or ship a crippled onedir(because it would be tied to the macOS version where the onedir was built).\n  Since it's currently not being used, it's removed. [#62432](https://github.com/saltstack/salt/issues/62432)\n- Removed `SixRedirectImporter` from Salt. Salt hasn't shipped `six` since Salt 3004. [#63874](https://github.com/saltstack/salt/issues/63874)\n\n\n### Deprecated\n\n- renamed `keep_jobs`, specifying job cache TTL in hours, to `keep_jobs_seconds`, specifying TTL in seconds.\n  `keep_jobs` will be removed in the Argon release [#55295](https://github.com/saltstack/salt/issues/55295)\n- Removing all references to napalm-base which is no longer supported. [#61542](https://github.com/saltstack/salt/issues/61542)\n- The 'ip_bracket' function has been moved from salt/utils/zeromq.py in salt/utils/network.py [#62009](https://github.com/saltstack/salt/issues/62009)\n- The `expand_repo_def` function in `salt.modules.aptpkg` is now deprecated. It's only used in `salt.states.pkgrepo` and it has no use of being exposed to the CLI. [#62485](https://github.com/saltstack/salt/issues/62485)\n- Deprecated defunct Django returner [#62644](https://github.com/saltstack/salt/issues/62644)\n- Deprecate core ESXi and associated states and modules, vcenter and vsphere support in favor of Salt VMware Extensions [#62754](https://github.com/saltstack/salt/issues/62754)\n- Removing manufacture grain which has been deprecated. [#62914](https://github.com/saltstack/salt/issues/62914)\n- Removing deprecated utils/boto3_elasticsearch.py [#62915](https://github.com/saltstack/salt/issues/62915)\n- Removing support for the now deprecated _ext_nodes from salt/master.py. [#62917](https://github.com/saltstack/salt/issues/62917)\n- Deprecating the Salt Slack engine in favor of the Salt Slack Bolt Engine. [#63095](https://github.com/saltstack/salt/issues/63095)\n- `salt.utils.version.StrictVersion` is now deprecated and it's use should be replaced with `salt.utils.version.Version`. [#63383](https://github.com/saltstack/salt/issues/63383)\n\n\n### Changed\n\n- More intelligent diffing in changes of file.serialize state. [#48609](https://github.com/saltstack/salt/issues/48609)\n- Move deprecation of the neutron module to Argon. Please migrate to the neutronng module instead. [#49430](https://github.com/saltstack/salt/issues/49430)\n- ``umask`` is now a global state argument, instead of only applying to ``cmd``\n  states. [#57803](https://github.com/saltstack/salt/issues/57803)\n- Update pillar.obfuscate to accept kwargs in addition to args.  This is useful when passing in keyword arguments like saltenv that are then passed along to pillar.items. [#58971](https://github.com/saltstack/salt/issues/58971)\n- Improve support for listing macOS brew casks [#59439](https://github.com/saltstack/salt/issues/59439)\n- Add missing MariaDB Grants to mysql module.\n  MariaDB has added some grants in 10.4.x and 10.5.x that are not present here, which results in an error when creating.\n  Also improved exception handling in `grant_add` which did not log the original error message and replaced it with a generic error. [#61409](https://github.com/saltstack/salt/issues/61409)\n- Use VENV_PIP_TARGET environment variable as a default target for pip if present. [#62089](https://github.com/saltstack/salt/issues/62089)\n- Disabled FQDNs grains on macOS by default [#62168](https://github.com/saltstack/salt/issues/62168)\n- Replaced pyroute2.IPDB with pyroute2.NDB, as the former is deprecated [#62218](https://github.com/saltstack/salt/issues/62218)\n- Enhance capture of error messages for Zypper calls in zypperpkg module. [#62346](https://github.com/saltstack/salt/issues/62346)\n- Removed GPG_1_3_1 check [#62895](https://github.com/saltstack/salt/issues/62895)\n- Requisite state chunks now all consistently contain `__id__`, `__sls__` and `name`. [#63012](https://github.com/saltstack/salt/issues/63012)\n- netapi_enable_clients option to allow enabling/disabling of clients in salt-api.\n  By default all clients will now be disabled. Users of salt-api will need\n  to update their master config to enable the clients that they use. Not adding\n  the netapi_enable_clients option with required clients to the master config will\n  disable salt-api. [#63050](https://github.com/saltstack/salt/issues/63050)\n- Stop relying on `salt/_version.py` to write Salt's version. Instead use `salt/_version.txt` which only contains the version string. [#63383](https://github.com/saltstack/salt/issues/63383)\n- Set enable_fqdns_grains to be False by default. [#63595](https://github.com/saltstack/salt/issues/63595)\n- Changelog snippet files must now have a `.md` file extension to be more explicit on what type of rendering is done when they are included in the main `CHANGELOG.md` file. [#63710](https://github.com/saltstack/salt/issues/63710)\n- Upgraded to `relenv==0.9.0` [#63883](https://github.com/saltstack/salt/issues/63883)\n\n\n### Fixed\n\n- Add kwargs to handle extra parameters for http.query [#36138](https://github.com/saltstack/salt/issues/36138)\n- Fix mounted bind mounts getting active mount options added [#39292](https://github.com/saltstack/salt/issues/39292)\n- Fix `sysctl.present` converts spaces to tabs. [#40054](https://github.com/saltstack/salt/issues/40054)\n- Fixes state pkg.purged to purge removed packages on Debian family systems [#42306](https://github.com/saltstack/salt/issues/42306)\n- Fix fun_args missing from syndic returns [#45823](https://github.com/saltstack/salt/issues/45823)\n- Fix mount.mounted with 'mount: False' reports unmounted file system as unchanged when running with test=True [#47201](https://github.com/saltstack/salt/issues/47201)\n- Issue #49310: Allow users to touch a file with Unix date of birth [#49310](https://github.com/saltstack/salt/issues/49310)\n- Do not raise an exception in pkg.info_installed on nonzero return code [#51620](https://github.com/saltstack/salt/issues/51620)\n- Passes the value of the force parameter from file.copy to its call to file.remove so that files with the read-only attribute are handled. [#51739](https://github.com/saltstack/salt/issues/51739)\n- Fixed x509.certificate_managed creates new certificate every run in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#52167](https://github.com/saltstack/salt/issues/52167)\n- Don't check for cached pillar errors on state.apply [#52354](https://github.com/saltstack/salt/issues/52354), [#57180](https://github.com/saltstack/salt/issues/57180), [#59339](https://github.com/saltstack/salt/issues/59339)\n- Swapping out args and kwargs for arg and kwarg respectively in the Slack engine when the command passed is a runner. [#52400](https://github.com/saltstack/salt/issues/52400)\n- Ensure when we're adding chunks to the rules when running aggregation with the iptables state module we use a copy of the chunk otherwise we end up with a recursive mess. [#53353](https://github.com/saltstack/salt/issues/53353)\n- When user_create or user_remove fail, return False instead of returning the error. [#53377](https://github.com/saltstack/salt/issues/53377)\n- Include sync_roster when sync_all is called. [#53914](https://github.com/saltstack/salt/issues/53914)\n- Avoid warning noise in lograte.get [#53988](https://github.com/saltstack/salt/issues/53988)\n- Fixed listing revoked keys with gpg.list_keys [#54347](https://github.com/saltstack/salt/issues/54347)\n- Fix mount.mounted does not handle blanks properly [#54508](https://github.com/saltstack/salt/issues/54508)\n- Fixed grain num_cpus get wrong CPUs count in case of inconsistent CPU numbering. [#54682](https://github.com/saltstack/salt/issues/54682)\n- Fix spelling error for python_shell argument in dpkg_lower module [#54907](https://github.com/saltstack/salt/issues/54907)\n- Cleaned up bytes response data before sending to non-bytes compatible returners (postgres, mysql) [#55226](https://github.com/saltstack/salt/issues/55226)\n- Fixed malformed state return when testing file.managed with unavailable source file [#55269](https://github.com/saltstack/salt/issues/55269)\n- Included stdout in error message for Zypper calls in zypperpkg module. [#56016](https://github.com/saltstack/salt/issues/56016)\n- Fixed pillar.filter_by with salt-ssh [#56093](https://github.com/saltstack/salt/issues/56093)\n- Fix boto_route53 issue with (multiple) VPCs. [#57139](https://github.com/saltstack/salt/issues/57139)\n- Remove log from mine runner which was not used. [#57463](https://github.com/saltstack/salt/issues/57463)\n- Fixed x509.read_certificate error when reading a Microsoft CA issued certificate in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#57535](https://github.com/saltstack/salt/issues/57535)\n- Updating Slack engine to use slack_bolt library. [#57842](https://github.com/saltstack/salt/issues/57842)\n- Fixed warning about replace=True with x509.certificate_managed in the new cryptography x509 module. [#58165](https://github.com/saltstack/salt/issues/58165)\n- Fix salt.modules.pip:is_installed doesn't handle locally installed packages [#58202](https://github.com/saltstack/salt/issues/58202)\n- Add missing MariaDB Grants to mysql module. MariaDB has added some grants in 10.4.x and 10.5.x that are not present here, which results in an error when creating. [#58297](https://github.com/saltstack/salt/issues/58297)\n- linux_shadow: Fix cases where malformed shadow entries cause `user.present`\n  states to fail. [#58423](https://github.com/saltstack/salt/issues/58423)\n- Fixed salt.utils.compat.cmp to work with dictionaries [#58729](https://github.com/saltstack/salt/issues/58729)\n- Fixed formatting for terse output mode [#58953](https://github.com/saltstack/salt/issues/58953)\n- Fixed RecursiveDictDiffer with added nested dicts [#59017](https://github.com/saltstack/salt/issues/59017)\n- Fixed x509.certificate_managed has DoS effect on master in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#59169](https://github.com/saltstack/salt/issues/59169)\n- Fixed saltnado websockets disconnecting immediately [#59183](https://github.com/saltstack/salt/issues/59183)\n- Fixed x509.certificate_managed rolls certificates every now and then in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#59315](https://github.com/saltstack/salt/issues/59315)\n- Fix postgres_privileges.present not idempotent for functions [#59585](https://github.com/saltstack/salt/issues/59585)\n- Fixed influxdb_continuous_query.present state to provide the client args to the underlying module on create. [#59766](https://github.com/saltstack/salt/issues/59766)\n- Warn when using insecure (http:// based) key_urls for apt-based systems in pkgrepo.managed, and add a kwarg that determines the validity of such a url. [#59786](https://github.com/saltstack/salt/issues/59786)\n- add load balancing policy default option and ensure the module can be executed with arguments from CLI [#59909](https://github.com/saltstack/salt/issues/59909)\n- Fix salt-ssh when using imports with extra-filerefs. [#60003](https://github.com/saltstack/salt/issues/60003)\n- Fixed cache directory corruption startup error [#60170](https://github.com/saltstack/salt/issues/60170)\n- Update docs remove dry_run in docstring of file.blockreplace state. [#60227](https://github.com/saltstack/salt/issues/60227)\n- Adds Parrot to OS_Family_Map in grains. [#60249](https://github.com/saltstack/salt/issues/60249)\n- Fixed stdout and stderr being empty sometimes when use_vt=True for the cmd.run[*] functions [#60365](https://github.com/saltstack/salt/issues/60365)\n- Use return code in iptables --check to verify rule exists. [#60467](https://github.com/saltstack/salt/issues/60467)\n- Fix regression pip.installed does not pass env_vars when calling pip.list [#60557](https://github.com/saltstack/salt/issues/60557)\n- Fix xfs module when additional output included in mkfs.xfs command. [#60853](https://github.com/saltstack/salt/issues/60853)\n- Fixed parsing new format of terraform states in roster.terraform [#60915](https://github.com/saltstack/salt/issues/60915)\n- Fixed recognizing installed ARMv7 rpm packages in compatible architectures. [#60994](https://github.com/saltstack/salt/issues/60994)\n- Fixing changes dict in pkg state to be consistent when installing and test=True. [#60995](https://github.com/saltstack/salt/issues/60995)\n- Fix cron.present duplicating entries when changing timespec to special. [#60997](https://github.com/saltstack/salt/issues/60997)\n- Made salt-ssh respect --wipe again [#61083](https://github.com/saltstack/salt/issues/61083)\n- state.orchestrate_single only passes a pillar if it is set to the state\n  function. This allows it to be used with state functions that don't accept a\n  pillar keyword argument. [#61092](https://github.com/saltstack/salt/issues/61092)\n- Fix ipset state when the comment kwarg is set. [#61122](https://github.com/saltstack/salt/issues/61122)\n- Fix issue with archive.unzip where the password was not being encoded for the extract function [#61422](https://github.com/saltstack/salt/issues/61422)\n- Some Linux distributions (like AlmaLinux, Astra Linux, Debian, Mendel, Linux\n  Mint, Pop!_OS, Rocky Linux) report different `oscodename`, `osfullname`,\n  `osfinger` grains if lsb-release is installed or not. They have been changed to\n  only derive these OS grains from `/etc/os-release`. [#61618](https://github.com/saltstack/salt/issues/61618)\n- Pop!_OS uses the full version (YY.MM) in the osfinger grain now, not just the year. This allows differentiating for example between 20.04 and 20.10. [#61619](https://github.com/saltstack/salt/issues/61619)\n- Fix ssh config roster to correctly parse the ssh config files that contain spaces. [#61650](https://github.com/saltstack/salt/issues/61650)\n- Fix SoftLayer configuration not raising an exception when a domain is missing [#61727](https://github.com/saltstack/salt/issues/61727)\n- Allow the minion to start or salt-call to run even if the user doesn't have permissions to read the root_dir value from the registry [#61789](https://github.com/saltstack/salt/issues/61789)\n- Need to move the creation of the proxy object for the ProxyMinion further down in the initialization for sub proxies to ensure that all modules, especially any custom proxy modules, are available before attempting to run the init function. [#61805](https://github.com/saltstack/salt/issues/61805)\n- Fixed malformed state return when merge-serializing to an improperly formatted file [#61814](https://github.com/saltstack/salt/issues/61814)\n- Made cmdmod._run[_all]_quiet work during minion startup on MacOS with runas specified (which fixed mac_service) [#61816](https://github.com/saltstack/salt/issues/61816)\n- When deleting the vault cache, also delete from the session cache [#61821](https://github.com/saltstack/salt/issues/61821)\n- Ignore errors on reading license info with dpkg_lowpkg to prevent tracebacks on getting package information. [#61827](https://github.com/saltstack/salt/issues/61827)\n- win_lgpo: Display conflicting policy names when more than one policy is found [#61859](https://github.com/saltstack/salt/issues/61859)\n- win_lgpo: Fixed intermittent KeyError when getting policy setting using lgpo.get_policy [#61860](https://github.com/saltstack/salt/issues/61860)\n- Fixed listing minions on OpenBSD [#61966](https://github.com/saltstack/salt/issues/61966)\n- Make Salt to return an error on \"pkg\" modules and states when targeting duplicated package names [#62019](https://github.com/saltstack/salt/issues/62019)\n- Fix return of REST-returned permissions when auth_list is set [#62022](https://github.com/saltstack/salt/issues/62022)\n- Normalize package names once on using pkg.installed/removed with yum to make it possible to install packages with the name containing a part similar to a name of architecture. [#62029](https://github.com/saltstack/salt/issues/62029)\n- Fix inconsitency regarding name and pkgs parameters between zypperpkg.upgrade() and yumpkg.upgrade() [#62030](https://github.com/saltstack/salt/issues/62030)\n- Fix attr=all handling in pkg.list_pkgs() (yum/zypper). [#62032](https://github.com/saltstack/salt/issues/62032)\n- Fixed the humanname being ignored in pkgrepo.managed on openSUSE Leap [#62053](https://github.com/saltstack/salt/issues/62053)\n- Fixed issue with some LGPO policies having whitespace at the beginning or end of the element alias [#62058](https://github.com/saltstack/salt/issues/62058)\n- Fix ordering of args to libcloud_storage.download_object module [#62074](https://github.com/saltstack/salt/issues/62074)\n- Ignore extend declarations in sls files that are excluded. [#62082](https://github.com/saltstack/salt/issues/62082)\n- Remove leftover usage of impacket [#62101](https://github.com/saltstack/salt/issues/62101)\n- Pass executable path from _get_path_exec() is used when calling the program.\n  The $HOME env is no longer modified globally.\n  Only trailing newlines are stripped from the fetched secret.\n  Pass process arguments are handled in a secure way. [#62120](https://github.com/saltstack/salt/issues/62120)\n- Ignore some command return codes in openbsdrcctl_service to prevent spurious errors [#62131](https://github.com/saltstack/salt/issues/62131)\n- Fixed extra period in filename output in tls module. Instead of \"server.crt.\" it will now be \"server.crt\". [#62139](https://github.com/saltstack/salt/issues/62139)\n- Make sure lingering PAexec-*.exe files in the Windows directory are cleaned up [#62152](https://github.com/saltstack/salt/issues/62152)\n- Restored Salt's DeprecationWarnings [#62185](https://github.com/saltstack/salt/issues/62185)\n- Fixed issue with forward slashes on Windows with file.recurse and clean=True [#62197](https://github.com/saltstack/salt/issues/62197)\n- Recognize OSMC as Debian-based [#62198](https://github.com/saltstack/salt/issues/62198)\n- Fixed Zypper module failing on RPM lock file being temporarily unavailable. [#62204](https://github.com/saltstack/salt/issues/62204)\n- Improved error handling and diagnostics in the proxmox salt-cloud driver [#62211](https://github.com/saltstack/salt/issues/62211)\n- Added EndeavourOS to the Arch os_family. [#62220](https://github.com/saltstack/salt/issues/62220)\n- Fix salt-ssh not detecting `platform-python` as a valid interpreter on EL8 [#62235](https://github.com/saltstack/salt/issues/62235)\n- Fix pkg.version_cmp on openEuler and a few other os flavors. [#62248](https://github.com/saltstack/salt/issues/62248)\n- Fix localhost detection in glusterfs.peers [#62273](https://github.com/saltstack/salt/issues/62273)\n- Fix Salt Package Manager (SPM) exception when calling spm create_repo . [#62281](https://github.com/saltstack/salt/issues/62281)\n- Fix matcher slowness due to loader invocation [#62283](https://github.com/saltstack/salt/issues/62283)\n- Fixes the Puppet module for non-aio Puppet packages for example running the Puppet module on FreeBSD. [#62323](https://github.com/saltstack/salt/issues/62323)\n- Issue 62334: Displays a debug log message instead of an error log message when the publisher fails to connect [#62334](https://github.com/saltstack/salt/issues/62334)\n- Fix pyobjects renderer access to opts and sls [#62336](https://github.com/saltstack/salt/issues/62336)\n- Fix use of random shuffle and sample functions as Jinja filters [#62372](https://github.com/saltstack/salt/issues/62372)\n- Fix groups with duplicate GIDs are not returned by get_group_list [#62377](https://github.com/saltstack/salt/issues/62377)\n- Fix the \"zpool.present\" state when enabling zpool features that are already active. [#62390](https://github.com/saltstack/salt/issues/62390)\n- Fix ability to execute remote file client methods in saltcheck [#62398](https://github.com/saltstack/salt/issues/62398)\n- Update all platforms to use pycparser 2.21 or greater for Py 3.9 or higher, fixes fips fault with openssl v3.x [#62400](https://github.com/saltstack/salt/issues/62400)\n- Due to changes in the Netmiko library for the exception paths, need to check the version of Netmiko python library and then import the exceptions from different locations depending on the result. [#62405](https://github.com/saltstack/salt/issues/62405)\n- When using preq on a state, then prereq state will first be run with test=True to determine if there are changes.  When there are changes, the state with the prereq option will be run prior to the prereq state.  If this state fails then the prereq state will not run and the state output uses the test=True run.  However, the proposed changes are included for the prereq state are included from the test=True run.  We should pull those out as there weren't actually changes since the prereq state did not run. [#62408](https://github.com/saltstack/salt/issues/62408)\n- Added directory mode for file.copy with makedirs [#62426](https://github.com/saltstack/salt/issues/62426)\n- Provide better error handling in the various napalm proxy minion functions when the device is not accessible. [#62435](https://github.com/saltstack/salt/issues/62435)\n- When handling aggregation, change the order to ensure that the requisites are aggregated first and then the state functions are aggregated.  Caching whether aggregate functions are available for particular states so we don't need to attempt to load them everytime. [#62439](https://github.com/saltstack/salt/issues/62439)\n- The patch allows to boostrap kubernetes clusters in the version above 1.13 via salt module [#62451](https://github.com/saltstack/salt/issues/62451)\n- sysctl.persist now updates the in-memory value on FreeBSD even if the on-disk value was already correct. [#62461](https://github.com/saltstack/salt/issues/62461)\n- Fixed parsing CDROM apt sources [#62474](https://github.com/saltstack/salt/issues/62474)\n- Update sanitizing masking for Salt SSH to include additional password like strings. [#62483](https://github.com/saltstack/salt/issues/62483)\n- Fix user/group checking on file state functions in the test mode. [#62499](https://github.com/saltstack/salt/issues/62499)\n- Fix user.present to allow removing groups using optional_groups parameter and enforcing idempotent group membership. [#62502](https://github.com/saltstack/salt/issues/62502)\n- Fix possible tracebacks if there is a package with '------' or '======' in the description is installed on the Debian based minion. [#62519](https://github.com/saltstack/salt/issues/62519)\n- Fixed the omitted \"pool\" parameter when cloning a VM with the proxmox salt-cloud driver [#62521](https://github.com/saltstack/salt/issues/62521)\n- Fix rendering of pyobjects states in saltcheck [#62523](https://github.com/saltstack/salt/issues/62523)\n- Fixes pillar where a corrupted CacheDisk file forces the pillar to be rebuilt [#62527](https://github.com/saltstack/salt/issues/62527)\n- Use str() method instead of repo_line for when python3-apt is installed or not in aptpkg.py. [#62546](https://github.com/saltstack/salt/issues/62546)\n- Remove the connection_timeout from netmiko_connection_args before netmiko_connection_args is added to __context__[\"netmiko_device\"][\"args\"] which is passed along to the Netmiko library. [#62547](https://github.com/saltstack/salt/issues/62547)\n- Fix order specific mount.mounted options for persist [#62556](https://github.com/saltstack/salt/issues/62556)\n- Fixed salt-cloud cloning a proxmox VM with a specified new vmid. [#62558](https://github.com/saltstack/salt/issues/62558)\n- Fix runas with cmd module when using the onedir bundled packages [#62565](https://github.com/saltstack/salt/issues/62565)\n- Update setproctitle version for all platforms [#62576](https://github.com/saltstack/salt/issues/62576)\n- Fixed missing parameters when cloning a VM with the proxmox salt-cloud driver [#62580](https://github.com/saltstack/salt/issues/62580)\n- Handle PermissionError when importing crypt when FIPS is enabled. [#62587](https://github.com/saltstack/salt/issues/62587)\n- Correctly reraise exceptions in states.http [#62595](https://github.com/saltstack/salt/issues/62595)\n- Fixed syndic eauth. Now jobs will be published when a valid eauth user is targeting allowed minions/functions. [#62618](https://github.com/saltstack/salt/issues/62618)\n- updated rest_cherry/app to properly detect arg sent as a string as curl will do when only one arg is supplied. [#62624](https://github.com/saltstack/salt/issues/62624)\n- Prevent possible tracebacks in core grains module by ignoring non utf8 characters in /proc/1/environ, /proc/1/cmdline, /proc/cmdline [#62633](https://github.com/saltstack/salt/issues/62633)\n- Fixed vault ext pillar return data for KV v2 [#62651](https://github.com/saltstack/salt/issues/62651)\n- Fix saltcheck _get_top_states doesn't pass saltenv to state.show_top [#62654](https://github.com/saltstack/salt/issues/62654)\n- Fix groupadd.* functions hard code relative command name [#62657](https://github.com/saltstack/salt/issues/62657)\n- Fixed pdbedit.create trying to use a bytes-like hash as string. [#62670](https://github.com/saltstack/salt/issues/62670)\n- Fix depenency on legacy boto module in boto3 modules [#62672](https://github.com/saltstack/salt/issues/62672)\n- Modified \"_get_flags\" function so that it returns regex flags instead of integers [#62676](https://github.com/saltstack/salt/issues/62676)\n- Change startup ReqServer log messages from error to info level. [#62728](https://github.com/saltstack/salt/issues/62728)\n- Fix kmod.* functions hard code relative command name [#62772](https://github.com/saltstack/salt/issues/62772)\n- Remove mako as a dependency in Windows and macOS. [#62785](https://github.com/saltstack/salt/issues/62785)\n- Fix mac_brew_pkg to work with null taps [#62793](https://github.com/saltstack/salt/issues/62793)\n- Fixing a bug when listing the running schedule if \"schedule.enable\" and/or \"schedule.disable\" has been run, where the \"enabled\" items is being treated as a schedule item. [#62795](https://github.com/saltstack/salt/issues/62795)\n- Prevent annoying RuntimeWarning message about line buffering (buffering=1) not being supported in binary mode [#62817](https://github.com/saltstack/salt/issues/62817)\n- Include UID and GID checks in modules.file.check_perms as well as comparing\n  ownership by username and group name. [#62818](https://github.com/saltstack/salt/issues/62818)\n- Fix presence events on TCP transport by removing a client's presence when minion disconnects from publish channel correctly [#62826](https://github.com/saltstack/salt/issues/62826)\n- Remove Azure deprecation messages from functions that always run w/ salt-cloud [#62845](https://github.com/saltstack/salt/issues/62845)\n- Use select instead of iterating over entrypoints as a dictionary for importlib_metadata>=5.0.0 [#62854](https://github.com/saltstack/salt/issues/62854)\n- Fixed master job scheduler using when [#62858](https://github.com/saltstack/salt/issues/62858)\n- LGPO: Added support for missing domain controller policies: VulnerableChannelAllowList and LdapEnforceChannelBinding [#62873](https://github.com/saltstack/salt/issues/62873)\n- Fix unnecessarily complex gce metadata grains code to use googles metadata service more effectively. [#62878](https://github.com/saltstack/salt/issues/62878)\n- Fixed dockermod version_info function for docker-py 6.0.0+ [#62882](https://github.com/saltstack/salt/issues/62882)\n- Moving setting the LOAD_BALANCING_POLICY_MAP dictionary into the try except block that determines if the cassandra_cql module should be made available. [#62886](https://github.com/saltstack/salt/issues/62886)\n- Updating various MongoDB module functions to work with latest version of pymongo. [#62900](https://github.com/saltstack/salt/issues/62900)\n- Restored channel for Syndic minions to send job returns to the Salt master. [#62933](https://github.com/saltstack/salt/issues/62933)\n- removed _resolve_deps as it required a library that is not generally avalible. and switched to apt-get for everything as that can auto resolve dependencies. [#62934](https://github.com/saltstack/salt/issues/62934)\n- Updated pyzmq to version 22.0.3 on Windows builds because the old version was causing salt-minion/salt-call to hang [#62937](https://github.com/saltstack/salt/issues/62937)\n- Allow root user to modify crontab lines for non-root users (except AIX and Solaris). Align crontab line changes with the file ones and also with listing crontab. [#62940](https://github.com/saltstack/salt/issues/62940)\n- Fix systemd_service.* functions hard code relative command name [#62942](https://github.com/saltstack/salt/issues/62942)\n- Fix file.symlink backupname operation can copy remote contents to local disk [#62953](https://github.com/saltstack/salt/issues/62953)\n- Issue #62968: Fix issue where cloud deployments were putting the keys in the wrong location on Windows hosts [#62968](https://github.com/saltstack/salt/issues/62968)\n- Fixed gpg_passphrase issue with gpg decrypt/encrypt functions [#62977](https://github.com/saltstack/salt/issues/62977)\n- Fix file.tidied FileNotFoundError [#62986](https://github.com/saltstack/salt/issues/62986)\n- Fixed bug where module.wait states were detected as running legacy module.run syntax [#62988](https://github.com/saltstack/salt/issues/62988)\n- Fixed issue with win_wua module where it wouldn't load if the CryptSvc was set to Manual start [#62993](https://github.com/saltstack/salt/issues/62993)\n- The `__opts__` dunder dictionary is now added to the loader's `pack` if not\n  already present, which makes it accessible via the\n  `salt.loader.context.NamedLoaderContext` class. [#63013](https://github.com/saltstack/salt/issues/63013)\n- Issue #63024: Fix issue where grains and config data were being place in the wrong location on Windows hosts [#63024](https://github.com/saltstack/salt/issues/63024)\n- Fix btrfs.subvolume_snapshot command failing [#63025](https://github.com/saltstack/salt/issues/63025)\n- Fix file.retention_schedule always reports changes [#63033](https://github.com/saltstack/salt/issues/63033)\n- Fix mongo authentication for mongo ext_pillar and mongo returner\n\n  This fix also include the ability to use the mongo connection string for mongo ext_pillar [#63058](https://github.com/saltstack/salt/issues/63058)\n- Fixed x509.create_csr creates invalid CSR by default in the new cryptography x509 module. [#63103](https://github.com/saltstack/salt/issues/63103)\n- TCP transport documentation now contains proper master/minion-side filtering information [#63120](https://github.com/saltstack/salt/issues/63120)\n- Fixed gpg.verify does not respect gnupghome [#63145](https://github.com/saltstack/salt/issues/63145)\n- User responsible for the runner is now correctly reported in the events on the event bus for the runner. [#63148](https://github.com/saltstack/salt/issues/63148)\n- Made pillar cache pass extra minion data as well [#63208](https://github.com/saltstack/salt/issues/63208)\n- Fix serious performance issues with the file.tidied module [#63231](https://github.com/saltstack/salt/issues/63231)\n- Fix rpm_lowpkg version comparison logic when using rpm-vercmp and only one version has a release number. [#63317](https://github.com/saltstack/salt/issues/63317)\n- Import StrictVersion and LooseVersion from setuptools.distutils.verison or setuptools._distutils.version, if first not available [#63350](https://github.com/saltstack/salt/issues/63350)\n- ``service.status`` on Windows does no longer throws a CommandExecutionError if\n  the service is not found on the system. It now returns \"Not Found\" instead. [#63577](https://github.com/saltstack/salt/issues/63577)\n- When the shell is passed as powershell or pwsh, only wrapper the shell in quotes if cmd.run is running on Windows.  When quoted on Linux hosts, this results in an error when the keyword arguments are appended. [#63590](https://github.com/saltstack/salt/issues/63590)\n- LGPO: Added support for \"Relax minimum password length limits\" [#63596](https://github.com/saltstack/salt/issues/63596)\n- Fixed the ability to set a scheduled task to auto delete if not scheduled to run again (``delete_after``) [#63650](https://github.com/saltstack/salt/issues/63650)\n- When a job is disabled only increase it's _next_fire_time value if the job would have run at the current time, eg. the current _next_fire_time == now. [#63699](https://github.com/saltstack/salt/issues/63699)\n- have salt.template.compile_template_str cleanup its temp files. [#63724](https://github.com/saltstack/salt/issues/63724)\n- Check file is not empty before attempting to read pillar disk cache file [#63729](https://github.com/saltstack/salt/issues/63729)\n- Fixed an issue with generating fingerprints for public keys with different line endings [#63742](https://github.com/saltstack/salt/issues/63742)\n- Add `fileserver_interval` and `maintenance_interval` master configuration options. These options control how often to restart the FileServerUpdate and Maintenance processes. Some file server and pillar configurations are known to cause memory leaks over time. A notable example of this are configurations that use pygit2. Salt can not guarantee dependency libraries like pygit2 won't leak memory. Restarting any long running processes that use pygit2 guarantees we can keep the master's memory usage in check. [#63747](https://github.com/saltstack/salt/issues/63747)\n- mac_xattr.list and mac_xattr.read will replace undecode-able bytes to avoid raising CommandExecutionError. [#63779](https://github.com/saltstack/salt/issues/63779) [#63779](https://github.com/saltstack/salt/issues/63779)\n- Change default GPG keyserver from pgp.mit.edu to keys.openpgp.org. [#63806](https://github.com/saltstack/salt/issues/63806)\n- fix cherrypy 400 error output to be less generic. [#63835](https://github.com/saltstack/salt/issues/63835)\n- Ensure kwargs is passed along to _call_apt when passed into install function. [#63847](https://github.com/saltstack/salt/issues/63847)\n- remove eval and update logging to be more informative on bad config [#63879](https://github.com/saltstack/salt/issues/63879)\n- add linux_distribution to util to stop dep warning [#63904](https://github.com/saltstack/salt/issues/63904)\n- Fix valuerror when trying to close fileclient. Remove usage of __del__ and close the filclient properly. [#63920](https://github.com/saltstack/salt/issues/63920)\n- Handle the situation when a sub proxy minion does not init properly, eg. an exception happens, and the sub proxy object is not available. [#63923](https://github.com/saltstack/salt/issues/63923)\n- Clarifying documentation for extension_modules configuration option. [#63929](https://github.com/saltstack/salt/issues/63929)\n- Windows pkg module now properly handles versions containing strings [#63935](https://github.com/saltstack/salt/issues/63935)\n- Handle the scenario when the check_cmd requisite is used with a state function when the state has a local check_cmd function but that function isn't used by that function. [#63948](https://github.com/saltstack/salt/issues/63948)\n- Issue #63981: Allow users to pass verify_ssl to pkg.install/pkg.installed on Windows [#63981](https://github.com/saltstack/salt/issues/63981)\n- Hardened permissions on workers.ipc and master_event_pub.ipc. [#64063](https://github.com/saltstack/salt/issues/64063)\n\n\n### Added\n\n- Introduce a `LIB_STATE_DIR` syspaths variable which defaults to `CONFIG_DIR`,\n  but can be individually customized during installation by specifying\n  `--salt-lib-state-dir` during installation. Change the default `pki_dir` to\n  `<LIB_STATE_DIR>/pki/master` (for the master) and `<LIB_STATE_DIR>/pki/minion`\n  (for the minion). [#3396](https://github.com/saltstack/salt/issues/3396)\n- Allow users to enable 'queue=True' for all state runs via config file [#31468](https://github.com/saltstack/salt/issues/31468)\n- Added pillar templating to vault policies [#43287](https://github.com/saltstack/salt/issues/43287)\n- Add support for NVMeF as a transport protocol for hosts in a Pure Storage FlashArray [#51088](https://github.com/saltstack/salt/issues/51088)\n- A new salt-ssh roster that generates a roster by parses a known_hosts file. [#54679](https://github.com/saltstack/salt/issues/54679)\n- Added Windows Event Viewer support [#54713](https://github.com/saltstack/salt/issues/54713)\n- Added the win_lgpo_reg state and execution modules which will allow registry based group policy to be set directly in the Registry.pol file [#56013](https://github.com/saltstack/salt/issues/56013)\n- Added resource tagging functions to boto_dynamodb execution module [#57500](https://github.com/saltstack/salt/issues/57500)\n- Added `openvswitch_db` state module and functions `bridge_to_parent`,\n  `bridge_to_vlan`, `db_get`, and `db_set` to the `openvswitch` execution module.\n  Also added optional `parent` and `vlan` parameters to the\n  `openvswitch_bridge.present` state module function and the\n  `openvswitch.bridge_create` execution module function. [#58986](https://github.com/saltstack/salt/issues/58986)\n- State module to manage SysFS attributes [#60154](https://github.com/saltstack/salt/issues/60154)\n- Added ability for `salt.wait_for_event` to handle `event_id`s that have a list value. [#60430](https://github.com/saltstack/salt/issues/60430)\n- Added suport for Linux ppc64le core grains (cpu_model, virtual, productname, manufacturer, serialnumber) and arm core grains (serialnumber, productname) [#60518](https://github.com/saltstack/salt/issues/60518)\n- Added autostart option to virt.defined and virt.running states, along with virt.update execution modules. [#60700](https://github.com/saltstack/salt/issues/60700)\n- Added .0 back to our versioning scheme for future versions (e.g. 3006.0) [#60722](https://github.com/saltstack/salt/issues/60722)\n- Initial work to allow parallel startup of proxy minions when used as sub proxies with Deltaproxy. [#61153](https://github.com/saltstack/salt/issues/61153)\n- Added node label support for GCE [#61245](https://github.com/saltstack/salt/issues/61245)\n- Support the --priority flag when adding sources to Chocolatey. [#61319](https://github.com/saltstack/salt/issues/61319)\n- Add namespace option to ext_pillar.http_json [#61335](https://github.com/saltstack/salt/issues/61335)\n- Added a filter function to ps module to get a list of processes on a minion according to their state. [#61420](https://github.com/saltstack/salt/issues/61420)\n- Add postgres.timeout option to postgres module for limiting postgres query times [#61433](https://github.com/saltstack/salt/issues/61433)\n- Added new optional vault option, ``config_location``. This can be either ``master`` or ``local`` and defines where vault will look for connection details, either requesting them from the master or using the local config. [#61857](https://github.com/saltstack/salt/issues/61857)\n- Add ipwrap() jinja filter to wrap IPv6 addresses with brackets. [#61931](https://github.com/saltstack/salt/issues/61931)\n- 'tcp' transport is now available in ipv6-only network [#62009](https://github.com/saltstack/salt/issues/62009)\n- Add `diff_attr` parameter to pkg.upgrade() (zypper/yum). [#62031](https://github.com/saltstack/salt/issues/62031)\n- Config option pass_variable_prefix allows to distinguish variables that contain paths to pass secrets.\n  Config option pass_strict_fetch allows to error out when a secret cannot be fetched from pass.\n  Config option pass_dir allows setting the PASSWORD_STORE_DIR env for pass.\n  Config option pass_gnupghome allows setting the $GNUPGHOME env for pass. [#62120](https://github.com/saltstack/salt/issues/62120)\n- Add file.pruned state and expanded file.rmdir exec module functionality [#62178](https://github.com/saltstack/salt/issues/62178)\n- Added \"dig.PTR\" function to resolve PTR records for IPs, as well as tests and documentation [#62275](https://github.com/saltstack/salt/issues/62275)\n- Added the ability to remove a KB using the DISM state/execution modules [#62366](https://github.com/saltstack/salt/issues/62366)\n- Add \"<tiamat> python\" subcommand to allow execution or arbitrary scripts via bundled Python runtime [#62381](https://github.com/saltstack/salt/issues/62381)\n- Add ability to provide conditions which convert normal state actions to no-op when true [#62446](https://github.com/saltstack/salt/issues/62446)\n- Added debug log messages displaying the command being run when installing packages on Windows [#62480](https://github.com/saltstack/salt/issues/62480)\n- Add biosvendor grain [#62496](https://github.com/saltstack/salt/issues/62496)\n- Add ifelse Jinja function as found in CFEngine [#62508](https://github.com/saltstack/salt/issues/62508)\n- Implementation of Amazon EC2 instance detection and setting `virtual_subtype` grain accordingly including the product if possible to identify. [#62539](https://github.com/saltstack/salt/issues/62539)\n- Adds __env__substitution to ext_pillar.stack; followup of #61531, improved exception handling for stacked template (jinja) template rendering and yaml parsing in ext_pillar.stack [#62578](https://github.com/saltstack/salt/issues/62578)\n- Increase file.tidied flexibility with regard to age and size [#62678](https://github.com/saltstack/salt/issues/62678)\n- Added \"connected_devices\" feature to netbox pillar module. It contains extra information about devices connected to the minion [#62761](https://github.com/saltstack/salt/issues/62761)\n- Add atomic file operation for symlink changes [#62768](https://github.com/saltstack/salt/issues/62768)\n- Add password/account locking/unlocking in user.present state on supported operating systems [#62856](https://github.com/saltstack/salt/issues/62856)\n- Added onchange configuration for script engine [#62867](https://github.com/saltstack/salt/issues/62867)\n- Added output and bare functionality to export_key gpg module function [#62978](https://github.com/saltstack/salt/issues/62978)\n- Add keyvalue serializer for environment files [#62983](https://github.com/saltstack/salt/issues/62983)\n- Add ability to ignore symlinks in file.tidied [#63042](https://github.com/saltstack/salt/issues/63042)\n- salt-cloud support IMDSv2 tokens when using 'use-instance-role-credentials' [#63067](https://github.com/saltstack/salt/issues/63067)\n- Fix running fast tests twice and add git labels to suite. [#63081](https://github.com/saltstack/salt/issues/63081)\n- Add ability for file.symlink to not set ownership on existing links [#63093](https://github.com/saltstack/salt/issues/63093)\n- Restore the previous slack engine and deprecate it, rename replace the slack engine to slack_bolt until deprecation [#63095](https://github.com/saltstack/salt/issues/63095)\n- Add functions that will return the underlying block device, mount point, and filesystem type for a given path [#63098](https://github.com/saltstack/salt/issues/63098)\n- Add ethtool execution and state module functions for pause [#63128](https://github.com/saltstack/salt/issues/63128)\n- Add boardname grain [#63131](https://github.com/saltstack/salt/issues/63131)\n- Added management of ECDSA/EdDSA private keys with x509 modules in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#63248](https://github.com/saltstack/salt/issues/63248)\n- Added x509 modules support for different output formats in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#63249](https://github.com/saltstack/salt/issues/63249)\n- Added deprecation_warning test state for ensuring that deprecation warnings are correctly emitted. [#63315](https://github.com/saltstack/salt/issues/63315)\n- Adds a state_events option to state.highstate, state.apply, state.sls, state.sls_id.\n  This allows users to enable state_events on a per use basis rather than having to\n  enable them globally for all state runs. [#63316](https://github.com/saltstack/salt/issues/63316)\n- Allow max queue size setting for state runs to prevent performance problems from queue growth [#63356](https://github.com/saltstack/salt/issues/63356)\n- Add support of exposing meta_server_grains for Azure VMs [#63606](https://github.com/saltstack/salt/issues/63606)\n- Include the version of `relenv` in the versions report. [#63827](https://github.com/saltstack/salt/issues/63827)\n- Added debug log messages displaying the command being run when removing packages on Windows [#63866](https://github.com/saltstack/salt/issues/63866)\n- Adding the ability to exclude arguments from a state that end up passed to cmd.retcode when requisites such as onlyif or unless are used. [#63956](https://github.com/saltstack/salt/issues/63956)\n- Add --next-release argument to salt/version.py, which prints the next upcoming release. [#64023](https://github.com/saltstack/salt/issues/64023)\n\n\n### Security\n\n- Upgrade Requirements Due to Security Issues.\n\n  * Upgrade to `cryptography>=39.0.1` due to:\n    * https://github.com/advisories/GHSA-x4qr-2fvf-3mr5\n    * https://github.com/advisories/GHSA-w7pp-m8wf-vj6r\n  * Upgrade to `pyopenssl==23.0.0` due to the cryptography upgrade.\n  * Update to `markdown-it-py==2.2.0` due to:\n    * https://github.com/advisories/GHSA-jrwr-5x3p-hvc3\n    * https://github.com/advisories/GHSA-vrjv-mxr7-vjf8 [#63882](https://github.com/saltstack/salt/issues/63882)\n\n\n## 3006.0rc3 (2023-03-29)\n\n\n### Removed\n\n- Remove and deprecate the __orchestration__ key from salt.runner and salt.wheel return data. To get it back, set features.enable_deprecated_orchestration_flag master configuration option to True. The flag will be completely removed in Salt 3008 Argon. [#59917](https://github.com/saltstack/salt/issues/59917)\n- Removed distutils and replaced with setuptools, given distutils is deprecated and removed in Python 3.12 [#60476](https://github.com/saltstack/salt/issues/60476)\n- Removed ``runtests`` targets from ``noxfile.py`` [#62239](https://github.com/saltstack/salt/issues/62239)\n- Removed the PyObjC dependency.\n\n  This addresses problems with building a one dir build for macOS.\n  It became problematic because depending on the macOS version, it pulls different dependencies, and we would either have to build a macos onedir for each macOS supported release, or ship a crippled onedir(because it would be tied to the macOS version where the onedir was built).\n  Since it's currently not being used, it's removed. [#62432](https://github.com/saltstack/salt/issues/62432)\n- Removed `SixRedirectImporter` from Salt. Salt hasn't shipped `six` since Salt 3004. [#63874](https://github.com/saltstack/salt/issues/63874)\n\n\n### Deprecated\n\n- renamed `keep_jobs`, specifying job cache TTL in hours, to `keep_jobs_seconds`, specifying TTL in seconds.\n  `keep_jobs` will be removed in the Argon release [#55295](https://github.com/saltstack/salt/issues/55295)\n- Removing all references to napalm-base which is no longer supported. [#61542](https://github.com/saltstack/salt/issues/61542)\n- The 'ip_bracket' function has been moved from salt/utils/zeromq.py in salt/utils/network.py [#62009](https://github.com/saltstack/salt/issues/62009)\n- The `expand_repo_def` function in `salt.modules.aptpkg` is now deprecated. It's only used in `salt.states.pkgrepo` and it has no use of being exposed to the CLI. [#62485](https://github.com/saltstack/salt/issues/62485)\n- Deprecated defunct Django returner [#62644](https://github.com/saltstack/salt/issues/62644)\n- Deprecate core ESXi and associated states and modules, vcenter and vsphere support in favor of Salt VMware Extensions [#62754](https://github.com/saltstack/salt/issues/62754)\n- Removing manufacture grain which has been deprecated. [#62914](https://github.com/saltstack/salt/issues/62914)\n- Removing deprecated utils/boto3_elasticsearch.py [#62915](https://github.com/saltstack/salt/issues/62915)\n- Removing support for the now deprecated _ext_nodes from salt/master.py. [#62917](https://github.com/saltstack/salt/issues/62917)\n- Deprecating the Salt Slack engine in favor of the Salt Slack Bolt Engine. [#63095](https://github.com/saltstack/salt/issues/63095)\n- `salt.utils.version.StrictVersion` is now deprecated and it's use should be replaced with `salt.utils.version.Version`. [#63383](https://github.com/saltstack/salt/issues/63383)\n\n\n### Changed\n\n- More intelligent diffing in changes of file.serialize state. [#48609](https://github.com/saltstack/salt/issues/48609)\n- Move deprecation of the neutron module to Argon. Please migrate to the neutronng module instead. [#49430](https://github.com/saltstack/salt/issues/49430)\n- ``umask`` is now a global state argument, instead of only applying to ``cmd``\n  states. [#57803](https://github.com/saltstack/salt/issues/57803)\n- Update pillar.obfuscate to accept kwargs in addition to args.  This is useful when passing in keyword arguments like saltenv that are then passed along to pillar.items. [#58971](https://github.com/saltstack/salt/issues/58971)\n- Improve support for listing macOS brew casks [#59439](https://github.com/saltstack/salt/issues/59439)\n- Add missing MariaDB Grants to mysql module.\n  MariaDB has added some grants in 10.4.x and 10.5.x that are not present here, which results in an error when creating.\n  Also improved exception handling in `grant_add` which did not log the original error message and replaced it with a generic error. [#61409](https://github.com/saltstack/salt/issues/61409)\n- Use VENV_PIP_TARGET environment variable as a default target for pip if present. [#62089](https://github.com/saltstack/salt/issues/62089)\n- Disabled FQDNs grains on macOS by default [#62168](https://github.com/saltstack/salt/issues/62168)\n- Replaced pyroute2.IPDB with pyroute2.NDB, as the former is deprecated [#62218](https://github.com/saltstack/salt/issues/62218)\n- Enhance capture of error messages for Zypper calls in zypperpkg module. [#62346](https://github.com/saltstack/salt/issues/62346)\n- Removed GPG_1_3_1 check [#62895](https://github.com/saltstack/salt/issues/62895)\n- Requisite state chunks now all consistently contain `__id__`, `__sls__` and `name`. [#63012](https://github.com/saltstack/salt/issues/63012)\n- netapi_enable_clients option to allow enabling/disabling of clients in salt-api.\n  By default all clients will now be disabled. Users of salt-api will need\n  to update their master config to enable the clients that they use. Not adding\n  the netapi_enable_clients option with required clients to the master config will\n  disable salt-api. [#63050](https://github.com/saltstack/salt/issues/63050)\n- Stop relying on `salt/_version.py` to write Salt's version. Instead use `salt/_version.txt` which only contains the version string. [#63383](https://github.com/saltstack/salt/issues/63383)\n- Set enable_fqdns_grains to be False by default. [#63595](https://github.com/saltstack/salt/issues/63595)\n- Changelog snippet files must now have a `.md` file extension to be more explicit on what type of rendering is done when they are included in the main `CHANGELOG.md` file. [#63710](https://github.com/saltstack/salt/issues/63710)\n- Upgraded to `relenv==0.9.0` [#63883](https://github.com/saltstack/salt/issues/63883)\n\n\n### Fixed\n\n- Add kwargs to handle extra parameters for http.query [#36138](https://github.com/saltstack/salt/issues/36138)\n- Fix mounted bind mounts getting active mount options added [#39292](https://github.com/saltstack/salt/issues/39292)\n- Fix `sysctl.present` converts spaces to tabs. [#40054](https://github.com/saltstack/salt/issues/40054)\n- Fixes state pkg.purged to purge removed packages on Debian family systems [#42306](https://github.com/saltstack/salt/issues/42306)\n- Fix fun_args missing from syndic returns [#45823](https://github.com/saltstack/salt/issues/45823)\n- Fix mount.mounted with 'mount: False' reports unmounted file system as unchanged when running with test=True [#47201](https://github.com/saltstack/salt/issues/47201)\n- Issue #49310: Allow users to touch a file with Unix date of birth [#49310](https://github.com/saltstack/salt/issues/49310)\n- Do not raise an exception in pkg.info_installed on nonzero return code [#51620](https://github.com/saltstack/salt/issues/51620)\n- Passes the value of the force parameter from file.copy to its call to file.remove so that files with the read-only attribute are handled. [#51739](https://github.com/saltstack/salt/issues/51739)\n- Fixed x509.certificate_managed creates new certificate every run in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#52167](https://github.com/saltstack/salt/issues/52167)\n- Don't check for cached pillar errors on state.apply [#52354](https://github.com/saltstack/salt/issues/52354), [#57180](https://github.com/saltstack/salt/issues/57180), [#59339](https://github.com/saltstack/salt/issues/59339)\n- Swapping out args and kwargs for arg and kwarg respectively in the Slack engine when the command passed is a runner. [#52400](https://github.com/saltstack/salt/issues/52400)\n- Ensure when we're adding chunks to the rules when running aggregation with the iptables state module we use a copy of the chunk otherwise we end up with a recursive mess. [#53353](https://github.com/saltstack/salt/issues/53353)\n- When user_create or user_remove fail, return False instead of returning the error. [#53377](https://github.com/saltstack/salt/issues/53377)\n- Include sync_roster when sync_all is called. [#53914](https://github.com/saltstack/salt/issues/53914)\n- Avoid warning noise in lograte.get [#53988](https://github.com/saltstack/salt/issues/53988)\n- Fixed listing revoked keys with gpg.list_keys [#54347](https://github.com/saltstack/salt/issues/54347)\n- Fix mount.mounted does not handle blanks properly [#54508](https://github.com/saltstack/salt/issues/54508)\n- Fixed grain num_cpus get wrong CPUs count in case of inconsistent CPU numbering. [#54682](https://github.com/saltstack/salt/issues/54682)\n- Fix spelling error for python_shell argument in dpkg_lower module [#54907](https://github.com/saltstack/salt/issues/54907)\n- Cleaned up bytes response data before sending to non-bytes compatible returners (postgres, mysql) [#55226](https://github.com/saltstack/salt/issues/55226)\n- Fixed malformed state return when testing file.managed with unavailable source file [#55269](https://github.com/saltstack/salt/issues/55269)\n- Included stdout in error message for Zypper calls in zypperpkg module. [#56016](https://github.com/saltstack/salt/issues/56016)\n- Fixed pillar.filter_by with salt-ssh [#56093](https://github.com/saltstack/salt/issues/56093)\n- Fix boto_route53 issue with (multiple) VPCs. [#57139](https://github.com/saltstack/salt/issues/57139)\n- Remove log from mine runner which was not used. [#57463](https://github.com/saltstack/salt/issues/57463)\n- Fixed x509.read_certificate error when reading a Microsoft CA issued certificate in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#57535](https://github.com/saltstack/salt/issues/57535)\n- Updating Slack engine to use slack_bolt library. [#57842](https://github.com/saltstack/salt/issues/57842)\n- Fixed warning about replace=True with x509.certificate_managed in the new cryptography x509 module. [#58165](https://github.com/saltstack/salt/issues/58165)\n- Fix salt.modules.pip:is_installed doesn't handle locally installed packages [#58202](https://github.com/saltstack/salt/issues/58202)\n- Add missing MariaDB Grants to mysql module. MariaDB has added some grants in 10.4.x and 10.5.x that are not present here, which results in an error when creating. [#58297](https://github.com/saltstack/salt/issues/58297)\n- linux_shadow: Fix cases where malformed shadow entries cause `user.present`\n  states to fail. [#58423](https://github.com/saltstack/salt/issues/58423)\n- Fixed salt.utils.compat.cmp to work with dictionaries [#58729](https://github.com/saltstack/salt/issues/58729)\n- Fixed formatting for terse output mode [#58953](https://github.com/saltstack/salt/issues/58953)\n- Fixed RecursiveDictDiffer with added nested dicts [#59017](https://github.com/saltstack/salt/issues/59017)\n- Fixed x509.certificate_managed has DoS effect on master in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#59169](https://github.com/saltstack/salt/issues/59169)\n- Fixed saltnado websockets disconnecting immediately [#59183](https://github.com/saltstack/salt/issues/59183)\n- Fixed x509.certificate_managed rolls certificates every now and then in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#59315](https://github.com/saltstack/salt/issues/59315)\n- Fix postgres_privileges.present not idempotent for functions [#59585](https://github.com/saltstack/salt/issues/59585)\n- Fixed influxdb_continuous_query.present state to provide the client args to the underlying module on create. [#59766](https://github.com/saltstack/salt/issues/59766)\n- Warn when using insecure (http:// based) key_urls for apt-based systems in pkgrepo.managed, and add a kwarg that determines the validity of such a url. [#59786](https://github.com/saltstack/salt/issues/59786)\n- add load balancing policy default option and ensure the module can be executed with arguments from CLI [#59909](https://github.com/saltstack/salt/issues/59909)\n- Fix salt-ssh when using imports with extra-filerefs. [#60003](https://github.com/saltstack/salt/issues/60003)\n- Fixed cache directory corruption startup error [#60170](https://github.com/saltstack/salt/issues/60170)\n- Update docs remove dry_run in docstring of file.blockreplace state. [#60227](https://github.com/saltstack/salt/issues/60227)\n- Adds Parrot to OS_Family_Map in grains. [#60249](https://github.com/saltstack/salt/issues/60249)\n- Fixed stdout and stderr being empty sometimes when use_vt=True for the cmd.run[*] functions [#60365](https://github.com/saltstack/salt/issues/60365)\n- Use return code in iptables --check to verify rule exists. [#60467](https://github.com/saltstack/salt/issues/60467)\n- Fix regression pip.installed does not pass env_vars when calling pip.list [#60557](https://github.com/saltstack/salt/issues/60557)\n- Fix xfs module when additional output included in mkfs.xfs command. [#60853](https://github.com/saltstack/salt/issues/60853)\n- Fixed parsing new format of terraform states in roster.terraform [#60915](https://github.com/saltstack/salt/issues/60915)\n- Fixed recognizing installed ARMv7 rpm packages in compatible architectures. [#60994](https://github.com/saltstack/salt/issues/60994)\n- Fixing changes dict in pkg state to be consistent when installing and test=True. [#60995](https://github.com/saltstack/salt/issues/60995)\n- Fix cron.present duplicating entries when changing timespec to special. [#60997](https://github.com/saltstack/salt/issues/60997)\n- Made salt-ssh respect --wipe again [#61083](https://github.com/saltstack/salt/issues/61083)\n- state.orchestrate_single only passes a pillar if it is set to the state\n  function. This allows it to be used with state functions that don't accept a\n  pillar keyword argument. [#61092](https://github.com/saltstack/salt/issues/61092)\n- Fix ipset state when the comment kwarg is set. [#61122](https://github.com/saltstack/salt/issues/61122)\n- Fix issue with archive.unzip where the password was not being encoded for the extract function [#61422](https://github.com/saltstack/salt/issues/61422)\n- Some Linux distributions (like AlmaLinux, Astra Linux, Debian, Mendel, Linux\n  Mint, Pop!_OS, Rocky Linux) report different `oscodename`, `osfullname`,\n  `osfinger` grains if lsb-release is installed or not. They have been changed to\n  only derive these OS grains from `/etc/os-release`. [#61618](https://github.com/saltstack/salt/issues/61618)\n- Pop!_OS uses the full version (YY.MM) in the osfinger grain now, not just the year. This allows differentiating for example between 20.04 and 20.10. [#61619](https://github.com/saltstack/salt/issues/61619)\n- Fix ssh config roster to correctly parse the ssh config files that contain spaces. [#61650](https://github.com/saltstack/salt/issues/61650)\n- Fix SoftLayer configuration not raising an exception when a domain is missing [#61727](https://github.com/saltstack/salt/issues/61727)\n- Allow the minion to start or salt-call to run even if the user doesn't have permissions to read the root_dir value from the registry [#61789](https://github.com/saltstack/salt/issues/61789)\n- Need to move the creation of the proxy object for the ProxyMinion further down in the initialization for sub proxies to ensure that all modules, especially any custom proxy modules, are available before attempting to run the init function. [#61805](https://github.com/saltstack/salt/issues/61805)\n- Fixed malformed state return when merge-serializing to an improperly formatted file [#61814](https://github.com/saltstack/salt/issues/61814)\n- Made cmdmod._run[_all]_quiet work during minion startup on MacOS with runas specified (which fixed mac_service) [#61816](https://github.com/saltstack/salt/issues/61816)\n- When deleting the vault cache, also delete from the session cache [#61821](https://github.com/saltstack/salt/issues/61821)\n- Ignore errors on reading license info with dpkg_lowpkg to prevent tracebacks on getting package information. [#61827](https://github.com/saltstack/salt/issues/61827)\n- win_lgpo: Display conflicting policy names when more than one policy is found [#61859](https://github.com/saltstack/salt/issues/61859)\n- win_lgpo: Fixed intermittent KeyError when getting policy setting using lgpo.get_policy [#61860](https://github.com/saltstack/salt/issues/61860)\n- Fixed listing minions on OpenBSD [#61966](https://github.com/saltstack/salt/issues/61966)\n- Make Salt to return an error on \"pkg\" modules and states when targeting duplicated package names [#62019](https://github.com/saltstack/salt/issues/62019)\n- Fix return of REST-returned permissions when auth_list is set [#62022](https://github.com/saltstack/salt/issues/62022)\n- Normalize package names once on using pkg.installed/removed with yum to make it possible to install packages with the name containing a part similar to a name of architecture. [#62029](https://github.com/saltstack/salt/issues/62029)\n- Fix inconsitency regarding name and pkgs parameters between zypperpkg.upgrade() and yumpkg.upgrade() [#62030](https://github.com/saltstack/salt/issues/62030)\n- Fix attr=all handling in pkg.list_pkgs() (yum/zypper). [#62032](https://github.com/saltstack/salt/issues/62032)\n- Fixed the humanname being ignored in pkgrepo.managed on openSUSE Leap [#62053](https://github.com/saltstack/salt/issues/62053)\n- Fixed issue with some LGPO policies having whitespace at the beginning or end of the element alias [#62058](https://github.com/saltstack/salt/issues/62058)\n- Fix ordering of args to libcloud_storage.download_object module [#62074](https://github.com/saltstack/salt/issues/62074)\n- Ignore extend declarations in sls files that are excluded. [#62082](https://github.com/saltstack/salt/issues/62082)\n- Remove leftover usage of impacket [#62101](https://github.com/saltstack/salt/issues/62101)\n- Pass executable path from _get_path_exec() is used when calling the program.\n  The $HOME env is no longer modified globally.\n  Only trailing newlines are stripped from the fetched secret.\n  Pass process arguments are handled in a secure way. [#62120](https://github.com/saltstack/salt/issues/62120)\n- Ignore some command return codes in openbsdrcctl_service to prevent spurious errors [#62131](https://github.com/saltstack/salt/issues/62131)\n- Fixed extra period in filename output in tls module. Instead of \"server.crt.\" it will now be \"server.crt\". [#62139](https://github.com/saltstack/salt/issues/62139)\n- Make sure lingering PAexec-*.exe files in the Windows directory are cleaned up [#62152](https://github.com/saltstack/salt/issues/62152)\n- Restored Salt's DeprecationWarnings [#62185](https://github.com/saltstack/salt/issues/62185)\n- Fixed issue with forward slashes on Windows with file.recurse and clean=True [#62197](https://github.com/saltstack/salt/issues/62197)\n- Recognize OSMC as Debian-based [#62198](https://github.com/saltstack/salt/issues/62198)\n- Fixed Zypper module failing on RPM lock file being temporarily unavailable. [#62204](https://github.com/saltstack/salt/issues/62204)\n- Improved error handling and diagnostics in the proxmox salt-cloud driver [#62211](https://github.com/saltstack/salt/issues/62211)\n- Added EndeavourOS to the Arch os_family. [#62220](https://github.com/saltstack/salt/issues/62220)\n- Fix salt-ssh not detecting `platform-python` as a valid interpreter on EL8 [#62235](https://github.com/saltstack/salt/issues/62235)\n- Fix pkg.version_cmp on openEuler and a few other os flavors. [#62248](https://github.com/saltstack/salt/issues/62248)\n- Fix localhost detection in glusterfs.peers [#62273](https://github.com/saltstack/salt/issues/62273)\n- Fix Salt Package Manager (SPM) exception when calling spm create_repo . [#62281](https://github.com/saltstack/salt/issues/62281)\n- Fix matcher slowness due to loader invocation [#62283](https://github.com/saltstack/salt/issues/62283)\n- Fixes the Puppet module for non-aio Puppet packages for example running the Puppet module on FreeBSD. [#62323](https://github.com/saltstack/salt/issues/62323)\n- Issue 62334: Displays a debug log message instead of an error log message when the publisher fails to connect [#62334](https://github.com/saltstack/salt/issues/62334)\n- Fix pyobjects renderer access to opts and sls [#62336](https://github.com/saltstack/salt/issues/62336)\n- Fix use of random shuffle and sample functions as Jinja filters [#62372](https://github.com/saltstack/salt/issues/62372)\n- Fix groups with duplicate GIDs are not returned by get_group_list [#62377](https://github.com/saltstack/salt/issues/62377)\n- Fix the \"zpool.present\" state when enabling zpool features that are already active. [#62390](https://github.com/saltstack/salt/issues/62390)\n- Fix ability to execute remote file client methods in saltcheck [#62398](https://github.com/saltstack/salt/issues/62398)\n- Update all platforms to use pycparser 2.21 or greater for Py 3.9 or higher, fixes fips fault with openssl v3.x [#62400](https://github.com/saltstack/salt/issues/62400)\n- Due to changes in the Netmiko library for the exception paths, need to check the version of Netmiko python library and then import the exceptions from different locations depending on the result. [#62405](https://github.com/saltstack/salt/issues/62405)\n- When using preq on a state, then prereq state will first be run with test=True to determine if there are changes.  When there are changes, the state with the prereq option will be run prior to the prereq state.  If this state fails then the prereq state will not run and the state output uses the test=True run.  However, the proposed changes are included for the prereq state are included from the test=True run.  We should pull those out as there weren't actually changes since the prereq state did not run. [#62408](https://github.com/saltstack/salt/issues/62408)\n- Added directory mode for file.copy with makedirs [#62426](https://github.com/saltstack/salt/issues/62426)\n- Provide better error handling in the various napalm proxy minion functions when the device is not accessible. [#62435](https://github.com/saltstack/salt/issues/62435)\n- When handling aggregation, change the order to ensure that the requisites are aggregated first and then the state functions are aggregated.  Caching whether aggregate functions are available for particular states so we don't need to attempt to load them everytime. [#62439](https://github.com/saltstack/salt/issues/62439)\n- The patch allows to boostrap kubernetes clusters in the version above 1.13 via salt module [#62451](https://github.com/saltstack/salt/issues/62451)\n- sysctl.persist now updates the in-memory value on FreeBSD even if the on-disk value was already correct. [#62461](https://github.com/saltstack/salt/issues/62461)\n- Fixed parsing CDROM apt sources [#62474](https://github.com/saltstack/salt/issues/62474)\n- Update sanitizing masking for Salt SSH to include additional password like strings. [#62483](https://github.com/saltstack/salt/issues/62483)\n- Fix user/group checking on file state functions in the test mode. [#62499](https://github.com/saltstack/salt/issues/62499)\n- Fix user.present to allow removing groups using optional_groups parameter and enforcing idempotent group membership. [#62502](https://github.com/saltstack/salt/issues/62502)\n- Fix possible tracebacks if there is a package with '------' or '======' in the description is installed on the Debian based minion. [#62519](https://github.com/saltstack/salt/issues/62519)\n- Fixed the omitted \"pool\" parameter when cloning a VM with the proxmox salt-cloud driver [#62521](https://github.com/saltstack/salt/issues/62521)\n- Fix rendering of pyobjects states in saltcheck [#62523](https://github.com/saltstack/salt/issues/62523)\n- Fixes pillar where a corrupted CacheDisk file forces the pillar to be rebuilt [#62527](https://github.com/saltstack/salt/issues/62527)\n- Use str() method instead of repo_line for when python3-apt is installed or not in aptpkg.py. [#62546](https://github.com/saltstack/salt/issues/62546)\n- Remove the connection_timeout from netmiko_connection_args before netmiko_connection_args is added to __context__[\"netmiko_device\"][\"args\"] which is passed along to the Netmiko library. [#62547](https://github.com/saltstack/salt/issues/62547)\n- Fix order specific mount.mounted options for persist [#62556](https://github.com/saltstack/salt/issues/62556)\n- Fixed salt-cloud cloning a proxmox VM with a specified new vmid. [#62558](https://github.com/saltstack/salt/issues/62558)\n- Fix runas with cmd module when using the onedir bundled packages [#62565](https://github.com/saltstack/salt/issues/62565)\n- Update setproctitle version for all platforms [#62576](https://github.com/saltstack/salt/issues/62576)\n- Fixed missing parameters when cloning a VM with the proxmox salt-cloud driver [#62580](https://github.com/saltstack/salt/issues/62580)\n- Handle PermissionError when importing crypt when FIPS is enabled. [#62587](https://github.com/saltstack/salt/issues/62587)\n- Correctly reraise exceptions in states.http [#62595](https://github.com/saltstack/salt/issues/62595)\n- Fixed syndic eauth. Now jobs will be published when a valid eauth user is targeting allowed minions/functions. [#62618](https://github.com/saltstack/salt/issues/62618)\n- updated rest_cherry/app to properly detect arg sent as a string as curl will do when only one arg is supplied. [#62624](https://github.com/saltstack/salt/issues/62624)\n- Prevent possible tracebacks in core grains module by ignoring non utf8 characters in /proc/1/environ, /proc/1/cmdline, /proc/cmdline [#62633](https://github.com/saltstack/salt/issues/62633)\n- Fixed vault ext pillar return data for KV v2 [#62651](https://github.com/saltstack/salt/issues/62651)\n- Fix saltcheck _get_top_states doesn't pass saltenv to state.show_top [#62654](https://github.com/saltstack/salt/issues/62654)\n- Fix groupadd.* functions hard code relative command name [#62657](https://github.com/saltstack/salt/issues/62657)\n- Fixed pdbedit.create trying to use a bytes-like hash as string. [#62670](https://github.com/saltstack/salt/issues/62670)\n- Fix depenency on legacy boto module in boto3 modules [#62672](https://github.com/saltstack/salt/issues/62672)\n- Modified \"_get_flags\" function so that it returns regex flags instead of integers [#62676](https://github.com/saltstack/salt/issues/62676)\n- Change startup ReqServer log messages from error to info level. [#62728](https://github.com/saltstack/salt/issues/62728)\n- Fix kmod.* functions hard code relative command name [#62772](https://github.com/saltstack/salt/issues/62772)\n- Fix mac_brew_pkg to work with null taps [#62793](https://github.com/saltstack/salt/issues/62793)\n- Fixing a bug when listing the running schedule if \"schedule.enable\" and/or \"schedule.disable\" has been run, where the \"enabled\" items is being treated as a schedule item. [#62795](https://github.com/saltstack/salt/issues/62795)\n- Prevent annoying RuntimeWarning message about line buffering (buffering=1) not being supported in binary mode [#62817](https://github.com/saltstack/salt/issues/62817)\n- Include UID and GID checks in modules.file.check_perms as well as comparing\n  ownership by username and group name. [#62818](https://github.com/saltstack/salt/issues/62818)\n- Fix presence events on TCP transport by removing a client's presence when minion disconnects from publish channel correctly [#62826](https://github.com/saltstack/salt/issues/62826)\n- Remove Azure deprecation messages from functions that always run w/ salt-cloud [#62845](https://github.com/saltstack/salt/issues/62845)\n- Use select instead of iterating over entrypoints as a dictionary for importlib_metadata>=5.0.0 [#62854](https://github.com/saltstack/salt/issues/62854)\n- Fixed master job scheduler using when [#62858](https://github.com/saltstack/salt/issues/62858)\n- LGPO: Added support for missing domain controller policies: VulnerableChannelAllowList and LdapEnforceChannelBinding [#62873](https://github.com/saltstack/salt/issues/62873)\n- Fix unnecessarily complex gce metadata grains code to use googles metadata service more effectively. [#62878](https://github.com/saltstack/salt/issues/62878)\n- Fixed dockermod version_info function for docker-py 6.0.0+ [#62882](https://github.com/saltstack/salt/issues/62882)\n- Moving setting the LOAD_BALANCING_POLICY_MAP dictionary into the try except block that determines if the cassandra_cql module should be made available. [#62886](https://github.com/saltstack/salt/issues/62886)\n- Updating various MongoDB module functions to work with latest version of pymongo. [#62900](https://github.com/saltstack/salt/issues/62900)\n- Restored channel for Syndic minions to send job returns to the Salt master. [#62933](https://github.com/saltstack/salt/issues/62933)\n- removed _resolve_deps as it required a library that is not generally avalible. and switched to apt-get for everything as that can auto resolve dependencies. [#62934](https://github.com/saltstack/salt/issues/62934)\n- Updated pyzmq to version 22.0.3 on Windows builds because the old version was causing salt-minion/salt-call to hang [#62937](https://github.com/saltstack/salt/issues/62937)\n- Allow root user to modify crontab lines for non-root users (except AIX and Solaris). Align crontab line changes with the file ones and also with listing crontab. [#62940](https://github.com/saltstack/salt/issues/62940)\n- Fix systemd_service.* functions hard code relative command name [#62942](https://github.com/saltstack/salt/issues/62942)\n- Fix file.symlink backupname operation can copy remote contents to local disk [#62953](https://github.com/saltstack/salt/issues/62953)\n- Issue #62968: Fix issue where cloud deployments were putting the keys in the wrong location on Windows hosts [#62968](https://github.com/saltstack/salt/issues/62968)\n- Fixed gpg_passphrase issue with gpg decrypt/encrypt functions [#62977](https://github.com/saltstack/salt/issues/62977)\n- Fix file.tidied FileNotFoundError [#62986](https://github.com/saltstack/salt/issues/62986)\n- Fixed bug where module.wait states were detected as running legacy module.run syntax [#62988](https://github.com/saltstack/salt/issues/62988)\n- Fixed issue with win_wua module where it wouldn't load if the CryptSvc was set to Manual start [#62993](https://github.com/saltstack/salt/issues/62993)\n- The `__opts__` dunder dictionary is now added to the loader's `pack` if not\n  already present, which makes it accessible via the\n  `salt.loader.context.NamedLoaderContext` class. [#63013](https://github.com/saltstack/salt/issues/63013)\n- Issue #63024: Fix issue where grains and config data were being place in the wrong location on Windows hosts [#63024](https://github.com/saltstack/salt/issues/63024)\n- Fix btrfs.subvolume_snapshot command failing [#63025](https://github.com/saltstack/salt/issues/63025)\n- Fix file.retention_schedule always reports changes [#63033](https://github.com/saltstack/salt/issues/63033)\n- Fix mongo authentication for mongo ext_pillar and mongo returner\n\n  This fix also include the ability to use the mongo connection string for mongo ext_pillar [#63058](https://github.com/saltstack/salt/issues/63058)\n- Fixed x509.create_csr creates invalid CSR by default in the new cryptography x509 module. [#63103](https://github.com/saltstack/salt/issues/63103)\n- TCP transport documentation now contains proper master/minion-side filtering information [#63120](https://github.com/saltstack/salt/issues/63120)\n- Fixed gpg.verify does not respect gnupghome [#63145](https://github.com/saltstack/salt/issues/63145)\n- Made pillar cache pass extra minion data as well [#63208](https://github.com/saltstack/salt/issues/63208)\n- Fix serious performance issues with the file.tidied module [#63231](https://github.com/saltstack/salt/issues/63231)\n- Fix rpm_lowpkg version comparison logic when using rpm-vercmp and only one version has a release number. [#63317](https://github.com/saltstack/salt/issues/63317)\n- Import StrictVersion and LooseVersion from setuptools.distutils.verison or setuptools._distutils.version, if first not available [#63350](https://github.com/saltstack/salt/issues/63350)\n- When the shell is passed as powershell or pwsh, only wrapper the shell in quotes if cmd.run is running on Windows.  When quoted on Linux hosts, this results in an error when the keyword arguments are appended. [#63590](https://github.com/saltstack/salt/issues/63590)\n- LGPO: Added support for \"Relax minimum password length limits\" [#63596](https://github.com/saltstack/salt/issues/63596)\n- Fixed the ability to set a scheduled task to auto delete if not scheduled to run again (``delete_after``) [#63650](https://github.com/saltstack/salt/issues/63650)\n- When a job is disabled only increase it's _next_fire_time value if the job would have run at the current time, eg. the current _next_fire_time == now. [#63699](https://github.com/saltstack/salt/issues/63699)\n- have salt.template.compile_template_str cleanup its temp files. [#63724](https://github.com/saltstack/salt/issues/63724)\n- Check file is not empty before attempting to read pillar disk cache file [#63729](https://github.com/saltstack/salt/issues/63729)\n- Fixed an issue with generating fingerprints for public keys with different line endings [#63742](https://github.com/saltstack/salt/issues/63742)\n- Change default GPG keyserver from pgp.mit.edu to keys.openpgp.org. [#63806](https://github.com/saltstack/salt/issues/63806)\n- fix cherrypy 400 error output to be less generic. [#63835](https://github.com/saltstack/salt/issues/63835)\n- Ensure kwargs is passed along to _call_apt when passed into install function. [#63847](https://github.com/saltstack/salt/issues/63847)\n- remove eval and update logging to be more informative on bad config [#63879](https://github.com/saltstack/salt/issues/63879)\n- add linux_distribution to util to stop dep warning [#63904](https://github.com/saltstack/salt/issues/63904)\n- Handle the situation when a sub proxy minion does not init properly, eg. an exception happens, and the sub proxy object is not available. [#63923](https://github.com/saltstack/salt/issues/63923)\n- Clarifying documentation for extension_modules configuration option. [#63929](https://github.com/saltstack/salt/issues/63929)\n- Windows pkg module now properly handles versions containing strings [#63935](https://github.com/saltstack/salt/issues/63935)\n- Handle the scenario when the check_cmd requisite is used with a state function when the state has a local check_cmd function but that function isn't used by that function. [#63948](https://github.com/saltstack/salt/issues/63948)\n- Issue #63981: Allow users to pass verify_ssl to pkg.install/pkg.installed on Windows [#63981](https://github.com/saltstack/salt/issues/63981)\n\n\n### Added\n\n- Introduce a `LIB_STATE_DIR` syspaths variable which defaults to `CONFIG_DIR`,\n  but can be individually customized during installation by specifying\n  `--salt-lib-state-dir` during installation. Change the default `pki_dir` to\n  `<LIB_STATE_DIR>/pki/master` (for the master) and `<LIB_STATE_DIR>/pki/minion`\n  (for the minion). [#3396](https://github.com/saltstack/salt/issues/3396)\n- Allow users to enable 'queue=True' for all state runs via config file [#31468](https://github.com/saltstack/salt/issues/31468)\n- Added pillar templating to vault policies [#43287](https://github.com/saltstack/salt/issues/43287)\n- Add support for NVMeF as a transport protocol for hosts in a Pure Storage FlashArray [#51088](https://github.com/saltstack/salt/issues/51088)\n- A new salt-ssh roster that generates a roster by parses a known_hosts file. [#54679](https://github.com/saltstack/salt/issues/54679)\n- Added Windows Event Viewer support [#54713](https://github.com/saltstack/salt/issues/54713)\n- Added the win_lgpo_reg state and execution modules which will allow registry based group policy to be set directly in the Registry.pol file [#56013](https://github.com/saltstack/salt/issues/56013)\n- Added resource tagging functions to boto_dynamodb execution module [#57500](https://github.com/saltstack/salt/issues/57500)\n- Added `openvswitch_db` state module and functions `bridge_to_parent`,\n  `bridge_to_vlan`, `db_get`, and `db_set` to the `openvswitch` execution module.\n  Also added optional `parent` and `vlan` parameters to the\n  `openvswitch_bridge.present` state module function and the\n  `openvswitch.bridge_create` execution module function. [#58986](https://github.com/saltstack/salt/issues/58986)\n- State module to manage SysFS attributes [#60154](https://github.com/saltstack/salt/issues/60154)\n- Added ability for `salt.wait_for_event` to handle `event_id`s that have a list value. [#60430](https://github.com/saltstack/salt/issues/60430)\n- Added suport for Linux ppc64le core grains (cpu_model, virtual, productname, manufacturer, serialnumber) and arm core grains (serialnumber, productname) [#60518](https://github.com/saltstack/salt/issues/60518)\n- Added autostart option to virt.defined and virt.running states, along with virt.update execution modules. [#60700](https://github.com/saltstack/salt/issues/60700)\n- Added .0 back to our versioning scheme for future versions (e.g. 3006.0) [#60722](https://github.com/saltstack/salt/issues/60722)\n- Initial work to allow parallel startup of proxy minions when used as sub proxies with Deltaproxy. [#61153](https://github.com/saltstack/salt/issues/61153)\n- Added node label support for GCE [#61245](https://github.com/saltstack/salt/issues/61245)\n- Support the --priority flag when adding sources to Chocolatey. [#61319](https://github.com/saltstack/salt/issues/61319)\n- Add namespace option to ext_pillar.http_json [#61335](https://github.com/saltstack/salt/issues/61335)\n- Added a filter function to ps module to get a list of processes on a minion according to their state. [#61420](https://github.com/saltstack/salt/issues/61420)\n- Add postgres.timeout option to postgres module for limiting postgres query times [#61433](https://github.com/saltstack/salt/issues/61433)\n- Added new optional vault option, ``config_location``. This can be either ``master`` or ``local`` and defines where vault will look for connection details, either requesting them from the master or using the local config. [#61857](https://github.com/saltstack/salt/issues/61857)\n- Add ipwrap() jinja filter to wrap IPv6 addresses with brackets. [#61931](https://github.com/saltstack/salt/issues/61931)\n- 'tcp' transport is now available in ipv6-only network [#62009](https://github.com/saltstack/salt/issues/62009)\n- Add `diff_attr` parameter to pkg.upgrade() (zypper/yum). [#62031](https://github.com/saltstack/salt/issues/62031)\n- Config option pass_variable_prefix allows to distinguish variables that contain paths to pass secrets.\n  Config option pass_strict_fetch allows to error out when a secret cannot be fetched from pass.\n  Config option pass_dir allows setting the PASSWORD_STORE_DIR env for pass.\n  Config option pass_gnupghome allows setting the $GNUPGHOME env for pass. [#62120](https://github.com/saltstack/salt/issues/62120)\n- Add file.pruned state and expanded file.rmdir exec module functionality [#62178](https://github.com/saltstack/salt/issues/62178)\n- Added \"dig.PTR\" function to resolve PTR records for IPs, as well as tests and documentation [#62275](https://github.com/saltstack/salt/issues/62275)\n- Added the ability to remove a KB using the DISM state/execution modules [#62366](https://github.com/saltstack/salt/issues/62366)\n- Add \"<tiamat> python\" subcommand to allow execution or arbitrary scripts via bundled Python runtime [#62381](https://github.com/saltstack/salt/issues/62381)\n- Add ability to provide conditions which convert normal state actions to no-op when true [#62446](https://github.com/saltstack/salt/issues/62446)\n- Added debug log messages displaying the command being run when installing packages on Windows [#62480](https://github.com/saltstack/salt/issues/62480)\n- Add biosvendor grain [#62496](https://github.com/saltstack/salt/issues/62496)\n- Add ifelse Jinja function as found in CFEngine [#62508](https://github.com/saltstack/salt/issues/62508)\n- Implementation of Amazon EC2 instance detection and setting `virtual_subtype` grain accordingly including the product if possible to identify. [#62539](https://github.com/saltstack/salt/issues/62539)\n- Adds __env__substitution to ext_pillar.stack; followup of #61531, improved exception handling for stacked template (jinja) template rendering and yaml parsing in ext_pillar.stack [#62578](https://github.com/saltstack/salt/issues/62578)\n- Increase file.tidied flexibility with regard to age and size [#62678](https://github.com/saltstack/salt/issues/62678)\n- Added \"connected_devices\" feature to netbox pillar module. It contains extra information about devices connected to the minion [#62761](https://github.com/saltstack/salt/issues/62761)\n- Add atomic file operation for symlink changes [#62768](https://github.com/saltstack/salt/issues/62768)\n- Add password/account locking/unlocking in user.present state on supported operating systems [#62856](https://github.com/saltstack/salt/issues/62856)\n- Added onchange configuration for script engine [#62867](https://github.com/saltstack/salt/issues/62867)\n- Added output and bare functionality to export_key gpg module function [#62978](https://github.com/saltstack/salt/issues/62978)\n- Add keyvalue serializer for environment files [#62983](https://github.com/saltstack/salt/issues/62983)\n- Add ability to ignore symlinks in file.tidied [#63042](https://github.com/saltstack/salt/issues/63042)\n- salt-cloud support IMDSv2 tokens when using 'use-instance-role-credentials' [#63067](https://github.com/saltstack/salt/issues/63067)\n- Add ability for file.symlink to not set ownership on existing links [#63093](https://github.com/saltstack/salt/issues/63093)\n- Restore the previous slack engine and deprecate it, rename replace the slack engine to slack_bolt until deprecation [#63095](https://github.com/saltstack/salt/issues/63095)\n- Add functions that will return the underlying block device, mount point, and filesystem type for a given path [#63098](https://github.com/saltstack/salt/issues/63098)\n- Add ethtool execution and state module functions for pause [#63128](https://github.com/saltstack/salt/issues/63128)\n- Add boardname grain [#63131](https://github.com/saltstack/salt/issues/63131)\n- Added management of ECDSA/EdDSA private keys with x509 modules in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#63248](https://github.com/saltstack/salt/issues/63248)\n- Added x509 modules support for different output formats in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#63249](https://github.com/saltstack/salt/issues/63249)\n- Added deprecation_warning test state for ensuring that deprecation warnings are correctly emitted. [#63315](https://github.com/saltstack/salt/issues/63315)\n- Adds a state_events option to state.highstate, state.apply, state.sls, state.sls_id.\n  This allows users to enable state_events on a per use basis rather than having to\n  enable them globally for all state runs. [#63316](https://github.com/saltstack/salt/issues/63316)\n- Allow max queue size setting for state runs to prevent performance problems from queue growth [#63356](https://github.com/saltstack/salt/issues/63356)\n- Add support of exposing meta_server_grains for Azure VMs [#63606](https://github.com/saltstack/salt/issues/63606)\n- Include the version of `relenv` in the versions report. [#63827](https://github.com/saltstack/salt/issues/63827)\n- Added debug log messages displaying the command being run when removing packages on Windows [#63866](https://github.com/saltstack/salt/issues/63866)\n\n\n### Security\n\n- Upgrade Requirements Due to Security Issues.\n\n  * Upgrade to `cryptography>=39.0.1` due to:\n    * https://github.com/advisories/GHSA-x4qr-2fvf-3mr5\n    * https://github.com/advisories/GHSA-w7pp-m8wf-vj6r\n  * Upgrade to `pyopenssl==23.0.0` due to the cryptography upgrade.\n  * Update to `markdown-it-py==2.2.0` due to:\n    * https://github.com/advisories/GHSA-jrwr-5x3p-hvc3\n    * https://github.com/advisories/GHSA-vrjv-mxr7-vjf8 [#63882](https://github.com/saltstack/salt/issues/63882)\n\n\n## 3006.0rc2 (2023-03-19)\n\n\n### Removed\n\n- Remove and deprecate the __orchestration__ key from salt.runner and salt.wheel return data. To get it back, set features.enable_deprecated_orchestration_flag master configuration option to True. The flag will be completely removed in Salt 3008 Argon. [#59917](https://github.com/saltstack/salt/issues/59917)\n- Removed distutils and replaced with setuptools, given distutils is deprecated and removed in Python 3.12 [#60476](https://github.com/saltstack/salt/issues/60476)\n- Removed ``runtests`` targets from ``noxfile.py`` [#62239](https://github.com/saltstack/salt/issues/62239)\n- Removed the PyObjC dependency.\n\n  This addresses problems with building a one dir build for macOS.\n  It became problematic because depending on the macOS version, it pulls different dependencies, and we would either have to build a macos onedir for each macOS supported release, or ship a crippled onedir(because it would be tied to the macOS version where the onedir was built).\n  Since it's currently not being used, it's removed. [#62432](https://github.com/saltstack/salt/issues/62432)\n- Removed `SixRedirectImporter` from Salt. Salt hasn't shipped `six` since Salt 3004. [#63874](https://github.com/saltstack/salt/issues/63874)\n\n\n### Deprecated\n\n- renamed `keep_jobs`, specifying job cache TTL in hours, to `keep_jobs_seconds`, specifying TTL in seconds.\n  `keep_jobs` will be removed in the Argon release [#55295](https://github.com/saltstack/salt/issues/55295)\n- Removing all references to napalm-base which is no longer supported. [#61542](https://github.com/saltstack/salt/issues/61542)\n- The 'ip_bracket' function has been moved from salt/utils/zeromq.py in salt/utils/network.py [#62009](https://github.com/saltstack/salt/issues/62009)\n- The `expand_repo_def` function in `salt.modules.aptpkg` is now deprecated. It's only used in `salt.states.pkgrepo` and it has no use of being exposed to the CLI. [#62485](https://github.com/saltstack/salt/issues/62485)\n- Deprecated defunct Django returner [#62644](https://github.com/saltstack/salt/issues/62644)\n- Deprecate core ESXi and associated states and modules, vcenter and vsphere support in favor of Salt VMware Extensions [#62754](https://github.com/saltstack/salt/issues/62754)\n- Removing manufacture grain which has been deprecated. [#62914](https://github.com/saltstack/salt/issues/62914)\n- Removing deprecated utils/boto3_elasticsearch.py [#62915](https://github.com/saltstack/salt/issues/62915)\n- Removing support for the now deprecated _ext_nodes from salt/master.py. [#62917](https://github.com/saltstack/salt/issues/62917)\n- Deprecating the Salt Slack engine in favor of the Salt Slack Bolt Engine. [#63095](https://github.com/saltstack/salt/issues/63095)\n- `salt.utils.version.StrictVersion` is now deprecated and it's use should be replaced with `salt.utils.version.Version`. [#63383](https://github.com/saltstack/salt/issues/63383)\n\n\n### Changed\n\n- More intelligent diffing in changes of file.serialize state. [#48609](https://github.com/saltstack/salt/issues/48609)\n- Move deprecation of the neutron module to Argon. Please migrate to the neutronng module instead. [#49430](https://github.com/saltstack/salt/issues/49430)\n- ``umask`` is now a global state argument, instead of only applying to ``cmd``\n  states. [#57803](https://github.com/saltstack/salt/issues/57803)\n- Update pillar.obfuscate to accept kwargs in addition to args.  This is useful when passing in keyword arguments like saltenv that are then passed along to pillar.items. [#58971](https://github.com/saltstack/salt/issues/58971)\n- Improve support for listing macOS brew casks [#59439](https://github.com/saltstack/salt/issues/59439)\n- Add missing MariaDB Grants to mysql module.\n  MariaDB has added some grants in 10.4.x and 10.5.x that are not present here, which results in an error when creating.\n  Also improved exception handling in `grant_add` which did not log the original error message and replaced it with a generic error. [#61409](https://github.com/saltstack/salt/issues/61409)\n- Use VENV_PIP_TARGET environment variable as a default target for pip if present. [#62089](https://github.com/saltstack/salt/issues/62089)\n- Disabled FQDNs grains on macOS by default [#62168](https://github.com/saltstack/salt/issues/62168)\n- Replaced pyroute2.IPDB with pyroute2.NDB, as the former is deprecated [#62218](https://github.com/saltstack/salt/issues/62218)\n- Enhance capture of error messages for Zypper calls in zypperpkg module. [#62346](https://github.com/saltstack/salt/issues/62346)\n- Removed GPG_1_3_1 check [#62895](https://github.com/saltstack/salt/issues/62895)\n- Requisite state chunks now all consistently contain `__id__`, `__sls__` and `name`. [#63012](https://github.com/saltstack/salt/issues/63012)\n- netapi_enable_clients option to allow enabling/disabling of clients in salt-api.\n  By default all clients will now be disabled. Users of salt-api will need\n  to update their master config to enable the clients that they use. Not adding\n  the netapi_enable_clients option with required clients to the master config will\n  disable salt-api. [#63050](https://github.com/saltstack/salt/issues/63050)\n- Stop relying on `salt/_version.py` to write Salt's version. Instead use `salt/_version.txt` which only contains the version string. [#63383](https://github.com/saltstack/salt/issues/63383)\n- Set enable_fqdns_grains to be False by default. [#63595](https://github.com/saltstack/salt/issues/63595)\n- Changelog snippet files must now have a `.md` file extension to be more explicit on what type of rendering is done when they are included in the main `CHANGELOG.md` file. [#63710](https://github.com/saltstack/salt/issues/63710)\n\n\n### Fixed\n\n- Add kwargs to handle extra parameters for http.query [#36138](https://github.com/saltstack/salt/issues/36138)\n- Fix mounted bind mounts getting active mount options added [#39292](https://github.com/saltstack/salt/issues/39292)\n- Fix `sysctl.present` converts spaces to tabs. [#40054](https://github.com/saltstack/salt/issues/40054)\n- Fixes state pkg.purged to purge removed packages on Debian family systems [#42306](https://github.com/saltstack/salt/issues/42306)\n- Fix fun_args missing from syndic returns [#45823](https://github.com/saltstack/salt/issues/45823)\n- Fix mount.mounted with 'mount: False' reports unmounted file system as unchanged when running with test=True [#47201](https://github.com/saltstack/salt/issues/47201)\n- Issue #49310: Allow users to touch a file with Unix date of birth [#49310](https://github.com/saltstack/salt/issues/49310)\n- Do not raise an exception in pkg.info_installed on nonzero return code [#51620](https://github.com/saltstack/salt/issues/51620)\n- Passes the value of the force parameter from file.copy to its call to file.remove so that files with the read-only attribute are handled. [#51739](https://github.com/saltstack/salt/issues/51739)\n- Fixed x509.certificate_managed creates new certificate every run in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#52167](https://github.com/saltstack/salt/issues/52167)\n- Don't check for cached pillar errors on state.apply [#52354](https://github.com/saltstack/salt/issues/52354), [#57180](https://github.com/saltstack/salt/issues/57180), [#59339](https://github.com/saltstack/salt/issues/59339)\n- Swapping out args and kwargs for arg and kwarg respectively in the Slack engine when the command passed is a runner. [#52400](https://github.com/saltstack/salt/issues/52400)\n- Ensure when we're adding chunks to the rules when running aggregation with the iptables state module we use a copy of the chunk otherwise we end up with a recursive mess. [#53353](https://github.com/saltstack/salt/issues/53353)\n- When user_create or user_remove fail, return False instead of returning the error. [#53377](https://github.com/saltstack/salt/issues/53377)\n- Include sync_roster when sync_all is called. [#53914](https://github.com/saltstack/salt/issues/53914)\n- Avoid warning noise in lograte.get [#53988](https://github.com/saltstack/salt/issues/53988)\n- Fixed listing revoked keys with gpg.list_keys [#54347](https://github.com/saltstack/salt/issues/54347)\n- Fix mount.mounted does not handle blanks properly [#54508](https://github.com/saltstack/salt/issues/54508)\n- Fixed grain num_cpus get wrong CPUs count in case of inconsistent CPU numbering. [#54682](https://github.com/saltstack/salt/issues/54682)\n- Fix spelling error for python_shell argument in dpkg_lower module [#54907](https://github.com/saltstack/salt/issues/54907)\n- Cleaned up bytes response data before sending to non-bytes compatible returners (postgres, mysql) [#55226](https://github.com/saltstack/salt/issues/55226)\n- Fixed malformed state return when testing file.managed with unavailable source file [#55269](https://github.com/saltstack/salt/issues/55269)\n- Included stdout in error message for Zypper calls in zypperpkg module. [#56016](https://github.com/saltstack/salt/issues/56016)\n- Fixed pillar.filter_by with salt-ssh [#56093](https://github.com/saltstack/salt/issues/56093)\n- Fix boto_route53 issue with (multiple) VPCs. [#57139](https://github.com/saltstack/salt/issues/57139)\n- Remove log from mine runner which was not used. [#57463](https://github.com/saltstack/salt/issues/57463)\n- Fixed x509.read_certificate error when reading a Microsoft CA issued certificate in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#57535](https://github.com/saltstack/salt/issues/57535)\n- Updating Slack engine to use slack_bolt library. [#57842](https://github.com/saltstack/salt/issues/57842)\n- Fixed warning about replace=True with x509.certificate_managed in the new cryptography x509 module. [#58165](https://github.com/saltstack/salt/issues/58165)\n- Fix salt.modules.pip:is_installed doesn't handle locally installed packages [#58202](https://github.com/saltstack/salt/issues/58202)\n- Add missing MariaDB Grants to mysql module. MariaDB has added some grants in 10.4.x and 10.5.x that are not present here, which results in an error when creating. [#58297](https://github.com/saltstack/salt/issues/58297)\n- linux_shadow: Fix cases where malformed shadow entries cause `user.present`\n  states to fail. [#58423](https://github.com/saltstack/salt/issues/58423)\n- Fixed salt.utils.compat.cmp to work with dictionaries [#58729](https://github.com/saltstack/salt/issues/58729)\n- Fixed formatting for terse output mode [#58953](https://github.com/saltstack/salt/issues/58953)\n- Fixed RecursiveDictDiffer with added nested dicts [#59017](https://github.com/saltstack/salt/issues/59017)\n- Fixed x509.certificate_managed has DoS effect on master in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#59169](https://github.com/saltstack/salt/issues/59169)\n- Fixed saltnado websockets disconnecting immediately [#59183](https://github.com/saltstack/salt/issues/59183)\n- Fixed x509.certificate_managed rolls certificates every now and then in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#59315](https://github.com/saltstack/salt/issues/59315)\n- Fix postgres_privileges.present not idempotent for functions [#59585](https://github.com/saltstack/salt/issues/59585)\n- Fixed influxdb_continuous_query.present state to provide the client args to the underlying module on create. [#59766](https://github.com/saltstack/salt/issues/59766)\n- Warn when using insecure (http:// based) key_urls for apt-based systems in pkgrepo.managed, and add a kwarg that determines the validity of such a url. [#59786](https://github.com/saltstack/salt/issues/59786)\n- add load balancing policy default option and ensure the module can be executed with arguments from CLI [#59909](https://github.com/saltstack/salt/issues/59909)\n- Fix salt-ssh when using imports with extra-filerefs. [#60003](https://github.com/saltstack/salt/issues/60003)\n- Fixed cache directory corruption startup error [#60170](https://github.com/saltstack/salt/issues/60170)\n- Update docs remove dry_run in docstring of file.blockreplace state. [#60227](https://github.com/saltstack/salt/issues/60227)\n- Adds Parrot to OS_Family_Map in grains. [#60249](https://github.com/saltstack/salt/issues/60249)\n- Fixed stdout and stderr being empty sometimes when use_vt=True for the cmd.run[*] functions [#60365](https://github.com/saltstack/salt/issues/60365)\n- Use return code in iptables --check to verify rule exists. [#60467](https://github.com/saltstack/salt/issues/60467)\n- Fix regression pip.installed does not pass env_vars when calling pip.list [#60557](https://github.com/saltstack/salt/issues/60557)\n- Fix xfs module when additional output included in mkfs.xfs command. [#60853](https://github.com/saltstack/salt/issues/60853)\n- Fixed parsing new format of terraform states in roster.terraform [#60915](https://github.com/saltstack/salt/issues/60915)\n- Fixed recognizing installed ARMv7 rpm packages in compatible architectures. [#60994](https://github.com/saltstack/salt/issues/60994)\n- Fixing changes dict in pkg state to be consistent when installing and test=True. [#60995](https://github.com/saltstack/salt/issues/60995)\n- Fix cron.present duplicating entries when changing timespec to special. [#60997](https://github.com/saltstack/salt/issues/60997)\n- Made salt-ssh respect --wipe again [#61083](https://github.com/saltstack/salt/issues/61083)\n- state.orchestrate_single only passes a pillar if it is set to the state\n  function. This allows it to be used with state functions that don't accept a\n  pillar keyword argument. [#61092](https://github.com/saltstack/salt/issues/61092)\n- Fix ipset state when the comment kwarg is set. [#61122](https://github.com/saltstack/salt/issues/61122)\n- Fix issue with archive.unzip where the password was not being encoded for the extract function [#61422](https://github.com/saltstack/salt/issues/61422)\n- Some Linux distributions (like AlmaLinux, Astra Linux, Debian, Mendel, Linux\n  Mint, Pop!_OS, Rocky Linux) report different `oscodename`, `osfullname`,\n  `osfinger` grains if lsb-release is installed or not. They have been changed to\n  only derive these OS grains from `/etc/os-release`. [#61618](https://github.com/saltstack/salt/issues/61618)\n- Pop!_OS uses the full version (YY.MM) in the osfinger grain now, not just the year. This allows differentiating for example between 20.04 and 20.10. [#61619](https://github.com/saltstack/salt/issues/61619)\n- Fix ssh config roster to correctly parse the ssh config files that contain spaces. [#61650](https://github.com/saltstack/salt/issues/61650)\n- Fix SoftLayer configuration not raising an exception when a domain is missing [#61727](https://github.com/saltstack/salt/issues/61727)\n- Allow the minion to start or salt-call to run even if the user doesn't have permissions to read the root_dir value from the registry [#61789](https://github.com/saltstack/salt/issues/61789)\n- Need to move the creation of the proxy object for the ProxyMinion further down in the initialization for sub proxies to ensure that all modules, especially any custom proxy modules, are available before attempting to run the init function. [#61805](https://github.com/saltstack/salt/issues/61805)\n- Fixed malformed state return when merge-serializing to an improperly formatted file [#61814](https://github.com/saltstack/salt/issues/61814)\n- Made cmdmod._run[_all]_quiet work during minion startup on MacOS with runas specified (which fixed mac_service) [#61816](https://github.com/saltstack/salt/issues/61816)\n- When deleting the vault cache, also delete from the session cache [#61821](https://github.com/saltstack/salt/issues/61821)\n- Ignore errors on reading license info with dpkg_lowpkg to prevent tracebacks on getting package information. [#61827](https://github.com/saltstack/salt/issues/61827)\n- win_lgpo: Display conflicting policy names when more than one policy is found [#61859](https://github.com/saltstack/salt/issues/61859)\n- win_lgpo: Fixed intermittent KeyError when getting policy setting using lgpo.get_policy [#61860](https://github.com/saltstack/salt/issues/61860)\n- Fixed listing minions on OpenBSD [#61966](https://github.com/saltstack/salt/issues/61966)\n- Make Salt to return an error on \"pkg\" modules and states when targeting duplicated package names [#62019](https://github.com/saltstack/salt/issues/62019)\n- Fix return of REST-returned permissions when auth_list is set [#62022](https://github.com/saltstack/salt/issues/62022)\n- Normalize package names once on using pkg.installed/removed with yum to make it possible to install packages with the name containing a part similar to a name of architecture. [#62029](https://github.com/saltstack/salt/issues/62029)\n- Fix inconsitency regarding name and pkgs parameters between zypperpkg.upgrade() and yumpkg.upgrade() [#62030](https://github.com/saltstack/salt/issues/62030)\n- Fix attr=all handling in pkg.list_pkgs() (yum/zypper). [#62032](https://github.com/saltstack/salt/issues/62032)\n- Fixed the humanname being ignored in pkgrepo.managed on openSUSE Leap [#62053](https://github.com/saltstack/salt/issues/62053)\n- Fixed issue with some LGPO policies having whitespace at the beginning or end of the element alias [#62058](https://github.com/saltstack/salt/issues/62058)\n- Fix ordering of args to libcloud_storage.download_object module [#62074](https://github.com/saltstack/salt/issues/62074)\n- Ignore extend declarations in sls files that are excluded. [#62082](https://github.com/saltstack/salt/issues/62082)\n- Remove leftover usage of impacket [#62101](https://github.com/saltstack/salt/issues/62101)\n- Pass executable path from _get_path_exec() is used when calling the program.\n  The $HOME env is no longer modified globally.\n  Only trailing newlines are stripped from the fetched secret.\n  Pass process arguments are handled in a secure way. [#62120](https://github.com/saltstack/salt/issues/62120)\n- Ignore some command return codes in openbsdrcctl_service to prevent spurious errors [#62131](https://github.com/saltstack/salt/issues/62131)\n- Fixed extra period in filename output in tls module. Instead of \"server.crt.\" it will now be \"server.crt\". [#62139](https://github.com/saltstack/salt/issues/62139)\n- Make sure lingering PAexec-*.exe files in the Windows directory are cleaned up [#62152](https://github.com/saltstack/salt/issues/62152)\n- Restored Salt's DeprecationWarnings [#62185](https://github.com/saltstack/salt/issues/62185)\n- Fixed issue with forward slashes on Windows with file.recurse and clean=True [#62197](https://github.com/saltstack/salt/issues/62197)\n- Recognize OSMC as Debian-based [#62198](https://github.com/saltstack/salt/issues/62198)\n- Fixed Zypper module failing on RPM lock file being temporarily unavailable. [#62204](https://github.com/saltstack/salt/issues/62204)\n- Improved error handling and diagnostics in the proxmox salt-cloud driver [#62211](https://github.com/saltstack/salt/issues/62211)\n- Added EndeavourOS to the Arch os_family. [#62220](https://github.com/saltstack/salt/issues/62220)\n- Fix salt-ssh not detecting `platform-python` as a valid interpreter on EL8 [#62235](https://github.com/saltstack/salt/issues/62235)\n- Fix pkg.version_cmp on openEuler and a few other os flavors. [#62248](https://github.com/saltstack/salt/issues/62248)\n- Fix localhost detection in glusterfs.peers [#62273](https://github.com/saltstack/salt/issues/62273)\n- Fix Salt Package Manager (SPM) exception when calling spm create_repo . [#62281](https://github.com/saltstack/salt/issues/62281)\n- Fix matcher slowness due to loader invocation [#62283](https://github.com/saltstack/salt/issues/62283)\n- Fixes the Puppet module for non-aio Puppet packages for example running the Puppet module on FreeBSD. [#62323](https://github.com/saltstack/salt/issues/62323)\n- Issue 62334: Displays a debug log message instead of an error log message when the publisher fails to connect [#62334](https://github.com/saltstack/salt/issues/62334)\n- Fix pyobjects renderer access to opts and sls [#62336](https://github.com/saltstack/salt/issues/62336)\n- Fix use of random shuffle and sample functions as Jinja filters [#62372](https://github.com/saltstack/salt/issues/62372)\n- Fix groups with duplicate GIDs are not returned by get_group_list [#62377](https://github.com/saltstack/salt/issues/62377)\n- Fix the \"zpool.present\" state when enabling zpool features that are already active. [#62390](https://github.com/saltstack/salt/issues/62390)\n- Fix ability to execute remote file client methods in saltcheck [#62398](https://github.com/saltstack/salt/issues/62398)\n- Update all platforms to use pycparser 2.21 or greater for Py 3.9 or higher, fixes fips fault with openssl v3.x [#62400](https://github.com/saltstack/salt/issues/62400)\n- Due to changes in the Netmiko library for the exception paths, need to check the version of Netmiko python library and then import the exceptions from different locations depending on the result. [#62405](https://github.com/saltstack/salt/issues/62405)\n- When using preq on a state, then prereq state will first be run with test=True to determine if there are changes.  When there are changes, the state with the prereq option will be run prior to the prereq state.  If this state fails then the prereq state will not run and the state output uses the test=True run.  However, the proposed changes are included for the prereq state are included from the test=True run.  We should pull those out as there weren't actually changes since the prereq state did not run. [#62408](https://github.com/saltstack/salt/issues/62408)\n- Added directory mode for file.copy with makedirs [#62426](https://github.com/saltstack/salt/issues/62426)\n- Provide better error handling in the various napalm proxy minion functions when the device is not accessible. [#62435](https://github.com/saltstack/salt/issues/62435)\n- When handling aggregation, change the order to ensure that the requisites are aggregated first and then the state functions are aggregated.  Caching whether aggregate functions are available for particular states so we don't need to attempt to load them everytime. [#62439](https://github.com/saltstack/salt/issues/62439)\n- The patch allows to boostrap kubernetes clusters in the version above 1.13 via salt module [#62451](https://github.com/saltstack/salt/issues/62451)\n- sysctl.persist now updates the in-memory value on FreeBSD even if the on-disk value was already correct. [#62461](https://github.com/saltstack/salt/issues/62461)\n- Fixed parsing CDROM apt sources [#62474](https://github.com/saltstack/salt/issues/62474)\n- Update sanitizing masking for Salt SSH to include additional password like strings. [#62483](https://github.com/saltstack/salt/issues/62483)\n- Fix user/group checking on file state functions in the test mode. [#62499](https://github.com/saltstack/salt/issues/62499)\n- Fix user.present to allow removing groups using optional_groups parameter and enforcing idempotent group membership. [#62502](https://github.com/saltstack/salt/issues/62502)\n- Fix possible tracebacks if there is a package with '------' or '======' in the description is installed on the Debian based minion. [#62519](https://github.com/saltstack/salt/issues/62519)\n- Fixed the omitted \"pool\" parameter when cloning a VM with the proxmox salt-cloud driver [#62521](https://github.com/saltstack/salt/issues/62521)\n- Fix rendering of pyobjects states in saltcheck [#62523](https://github.com/saltstack/salt/issues/62523)\n- Fixes pillar where a corrupted CacheDisk file forces the pillar to be rebuilt [#62527](https://github.com/saltstack/salt/issues/62527)\n- Use str() method instead of repo_line for when python3-apt is installed or not in aptpkg.py. [#62546](https://github.com/saltstack/salt/issues/62546)\n- Remove the connection_timeout from netmiko_connection_args before netmiko_connection_args is added to __context__[\"netmiko_device\"][\"args\"] which is passed along to the Netmiko library. [#62547](https://github.com/saltstack/salt/issues/62547)\n- Fix order specific mount.mounted options for persist [#62556](https://github.com/saltstack/salt/issues/62556)\n- Fixed salt-cloud cloning a proxmox VM with a specified new vmid. [#62558](https://github.com/saltstack/salt/issues/62558)\n- Fix runas with cmd module when using the onedir bundled packages [#62565](https://github.com/saltstack/salt/issues/62565)\n- Update setproctitle version for all platforms [#62576](https://github.com/saltstack/salt/issues/62576)\n- Fixed missing parameters when cloning a VM with the proxmox salt-cloud driver [#62580](https://github.com/saltstack/salt/issues/62580)\n- Handle PermissionError when importing crypt when FIPS is enabled. [#62587](https://github.com/saltstack/salt/issues/62587)\n- Correctly reraise exceptions in states.http [#62595](https://github.com/saltstack/salt/issues/62595)\n- Fixed syndic eauth. Now jobs will be published when a valid eauth user is targeting allowed minions/functions. [#62618](https://github.com/saltstack/salt/issues/62618)\n- updated rest_cherry/app to properly detect arg sent as a string as curl will do when only one arg is supplied. [#62624](https://github.com/saltstack/salt/issues/62624)\n- Prevent possible tracebacks in core grains module by ignoring non utf8 characters in /proc/1/environ, /proc/1/cmdline, /proc/cmdline [#62633](https://github.com/saltstack/salt/issues/62633)\n- Fixed vault ext pillar return data for KV v2 [#62651](https://github.com/saltstack/salt/issues/62651)\n- Fix saltcheck _get_top_states doesn't pass saltenv to state.show_top [#62654](https://github.com/saltstack/salt/issues/62654)\n- Fix groupadd.* functions hard code relative command name [#62657](https://github.com/saltstack/salt/issues/62657)\n- Fixed pdbedit.create trying to use a bytes-like hash as string. [#62670](https://github.com/saltstack/salt/issues/62670)\n- Fix depenency on legacy boto module in boto3 modules [#62672](https://github.com/saltstack/salt/issues/62672)\n- Modified \"_get_flags\" function so that it returns regex flags instead of integers [#62676](https://github.com/saltstack/salt/issues/62676)\n- Change startup ReqServer log messages from error to info level. [#62728](https://github.com/saltstack/salt/issues/62728)\n- Fix kmod.* functions hard code relative command name [#62772](https://github.com/saltstack/salt/issues/62772)\n- Fix mac_brew_pkg to work with null taps [#62793](https://github.com/saltstack/salt/issues/62793)\n- Fixing a bug when listing the running schedule if \"schedule.enable\" and/or \"schedule.disable\" has been run, where the \"enabled\" items is being treated as a schedule item. [#62795](https://github.com/saltstack/salt/issues/62795)\n- Prevent annoying RuntimeWarning message about line buffering (buffering=1) not being supported in binary mode [#62817](https://github.com/saltstack/salt/issues/62817)\n- Include UID and GID checks in modules.file.check_perms as well as comparing\n  ownership by username and group name. [#62818](https://github.com/saltstack/salt/issues/62818)\n- Fix presence events on TCP transport by removing a client's presence when minion disconnects from publish channel correctly [#62826](https://github.com/saltstack/salt/issues/62826)\n- Remove Azure deprecation messages from functions that always run w/ salt-cloud [#62845](https://github.com/saltstack/salt/issues/62845)\n- Use select instead of iterating over entrypoints as a dictionary for importlib_metadata>=5.0.0 [#62854](https://github.com/saltstack/salt/issues/62854)\n- Fixed master job scheduler using when [#62858](https://github.com/saltstack/salt/issues/62858)\n- LGPO: Added support for missing domain controller policies: VulnerableChannelAllowList and LdapEnforceChannelBinding [#62873](https://github.com/saltstack/salt/issues/62873)\n- Fix unnecessarily complex gce metadata grains code to use googles metadata service more effectively. [#62878](https://github.com/saltstack/salt/issues/62878)\n- Fixed dockermod version_info function for docker-py 6.0.0+ [#62882](https://github.com/saltstack/salt/issues/62882)\n- Moving setting the LOAD_BALANCING_POLICY_MAP dictionary into the try except block that determines if the cassandra_cql module should be made available. [#62886](https://github.com/saltstack/salt/issues/62886)\n- Updating various MongoDB module functions to work with latest version of pymongo. [#62900](https://github.com/saltstack/salt/issues/62900)\n- Restored channel for Syndic minions to send job returns to the Salt master. [#62933](https://github.com/saltstack/salt/issues/62933)\n- removed _resolve_deps as it required a library that is not generally avalible. and switched to apt-get for everything as that can auto resolve dependencies. [#62934](https://github.com/saltstack/salt/issues/62934)\n- Updated pyzmq to version 22.0.3 on Windows builds because the old version was causing salt-minion/salt-call to hang [#62937](https://github.com/saltstack/salt/issues/62937)\n- Allow root user to modify crontab lines for non-root users (except AIX and Solaris). Align crontab line changes with the file ones and also with listing crontab. [#62940](https://github.com/saltstack/salt/issues/62940)\n- Fix systemd_service.* functions hard code relative command name [#62942](https://github.com/saltstack/salt/issues/62942)\n- Fix file.symlink backupname operation can copy remote contents to local disk [#62953](https://github.com/saltstack/salt/issues/62953)\n- Issue #62968: Fix issue where cloud deployments were putting the keys in the wrong location on Windows hosts [#62968](https://github.com/saltstack/salt/issues/62968)\n- Fixed gpg_passphrase issue with gpg decrypt/encrypt functions [#62977](https://github.com/saltstack/salt/issues/62977)\n- Fix file.tidied FileNotFoundError [#62986](https://github.com/saltstack/salt/issues/62986)\n- Fixed bug where module.wait states were detected as running legacy module.run syntax [#62988](https://github.com/saltstack/salt/issues/62988)\n- Fixed issue with win_wua module where it wouldn't load if the CryptSvc was set to Manual start [#62993](https://github.com/saltstack/salt/issues/62993)\n- The `__opts__` dunder dictionary is now added to the loader's `pack` if not\n  already present, which makes it accessible via the\n  `salt.loader.context.NamedLoaderContext` class. [#63013](https://github.com/saltstack/salt/issues/63013)\n- Issue #63024: Fix issue where grains and config data were being place in the wrong location on Windows hosts [#63024](https://github.com/saltstack/salt/issues/63024)\n- Fix btrfs.subvolume_snapshot command failing [#63025](https://github.com/saltstack/salt/issues/63025)\n- Fix file.retention_schedule always reports changes [#63033](https://github.com/saltstack/salt/issues/63033)\n- Fix mongo authentication for mongo ext_pillar and mongo returner\n\n  This fix also include the ability to use the mongo connection string for mongo ext_pillar [#63058](https://github.com/saltstack/salt/issues/63058)\n- Fixed x509.create_csr creates invalid CSR by default in the new cryptography x509 module. [#63103](https://github.com/saltstack/salt/issues/63103)\n- TCP transport documentation now contains proper master/minion-side filtering information [#63120](https://github.com/saltstack/salt/issues/63120)\n- Fixed gpg.verify does not respect gnupghome [#63145](https://github.com/saltstack/salt/issues/63145)\n- Made pillar cache pass extra minion data as well [#63208](https://github.com/saltstack/salt/issues/63208)\n- Fix serious performance issues with the file.tidied module [#63231](https://github.com/saltstack/salt/issues/63231)\n- Fix rpm_lowpkg version comparison logic when using rpm-vercmp and only one version has a release number. [#63317](https://github.com/saltstack/salt/issues/63317)\n- Import StrictVersion and LooseVersion from setuptools.distutils.verison or setuptools._distutils.version, if first not available [#63350](https://github.com/saltstack/salt/issues/63350)\n- When the shell is passed as powershell or pwsh, only wrapper the shell in quotes if cmd.run is running on Windows.  When quoted on Linux hosts, this results in an error when the keyword arguments are appended. [#63590](https://github.com/saltstack/salt/issues/63590)\n- LGPO: Added support for \"Relax minimum password length limits\" [#63596](https://github.com/saltstack/salt/issues/63596)\n- When a job is disabled only increase it's _next_fire_time value if the job would have run at the current time, eg. the current _next_fire_time == now. [#63699](https://github.com/saltstack/salt/issues/63699)\n- Check file is not empty before attempting to read pillar disk cache file [#63729](https://github.com/saltstack/salt/issues/63729)\n- fix cherrypy 400 error output to be less generic. [#63835](https://github.com/saltstack/salt/issues/63835)\n- remove eval and update logging to be more informative on bad config [#63879](https://github.com/saltstack/salt/issues/63879)\n\n\n### Added\n\n- Introduce a `LIB_STATE_DIR` syspaths variable which defaults to `CONFIG_DIR`,\n  but can be individually customized during installation by specifying\n  `--salt-lib-state-dir` during installation. Change the default `pki_dir` to\n  `<LIB_STATE_DIR>/pki/master` (for the master) and `<LIB_STATE_DIR>/pki/minion`\n  (for the minion). [#3396](https://github.com/saltstack/salt/issues/3396)\n- Allow users to enable 'queue=True' for all state runs via config file [#31468](https://github.com/saltstack/salt/issues/31468)\n- Added pillar templating to vault policies [#43287](https://github.com/saltstack/salt/issues/43287)\n- Add support for NVMeF as a transport protocol for hosts in a Pure Storage FlashArray [#51088](https://github.com/saltstack/salt/issues/51088)\n- A new salt-ssh roster that generates a roster by parses a known_hosts file. [#54679](https://github.com/saltstack/salt/issues/54679)\n- Added Windows Event Viewer support [#54713](https://github.com/saltstack/salt/issues/54713)\n- Added the win_lgpo_reg state and execution modules which will allow registry based group policy to be set directly in the Registry.pol file [#56013](https://github.com/saltstack/salt/issues/56013)\n- Added resource tagging functions to boto_dynamodb execution module [#57500](https://github.com/saltstack/salt/issues/57500)\n- Added `openvswitch_db` state module and functions `bridge_to_parent`,\n  `bridge_to_vlan`, `db_get`, and `db_set` to the `openvswitch` execution module.\n  Also added optional `parent` and `vlan` parameters to the\n  `openvswitch_bridge.present` state module function and the\n  `openvswitch.bridge_create` execution module function. [#58986](https://github.com/saltstack/salt/issues/58986)\n- State module to manage SysFS attributes [#60154](https://github.com/saltstack/salt/issues/60154)\n- Added ability for `salt.wait_for_event` to handle `event_id`s that have a list value. [#60430](https://github.com/saltstack/salt/issues/60430)\n- Added suport for Linux ppc64le core grains (cpu_model, virtual, productname, manufacturer, serialnumber) and arm core grains (serialnumber, productname) [#60518](https://github.com/saltstack/salt/issues/60518)\n- Added autostart option to virt.defined and virt.running states, along with virt.update execution modules. [#60700](https://github.com/saltstack/salt/issues/60700)\n- Added .0 back to our versioning scheme for future versions (e.g. 3006.0) [#60722](https://github.com/saltstack/salt/issues/60722)\n- Initial work to allow parallel startup of proxy minions when used as sub proxies with Deltaproxy. [#61153](https://github.com/saltstack/salt/issues/61153)\n- Added node label support for GCE [#61245](https://github.com/saltstack/salt/issues/61245)\n- Support the --priority flag when adding sources to Chocolatey. [#61319](https://github.com/saltstack/salt/issues/61319)\n- Add namespace option to ext_pillar.http_json [#61335](https://github.com/saltstack/salt/issues/61335)\n- Added a filter function to ps module to get a list of processes on a minion according to their state. [#61420](https://github.com/saltstack/salt/issues/61420)\n- Add postgres.timeout option to postgres module for limiting postgres query times [#61433](https://github.com/saltstack/salt/issues/61433)\n- Added new optional vault option, ``config_location``. This can be either ``master`` or ``local`` and defines where vault will look for connection details, either requesting them from the master or using the local config. [#61857](https://github.com/saltstack/salt/issues/61857)\n- Add ipwrap() jinja filter to wrap IPv6 addresses with brackets. [#61931](https://github.com/saltstack/salt/issues/61931)\n- 'tcp' transport is now available in ipv6-only network [#62009](https://github.com/saltstack/salt/issues/62009)\n- Add `diff_attr` parameter to pkg.upgrade() (zypper/yum). [#62031](https://github.com/saltstack/salt/issues/62031)\n- Config option pass_variable_prefix allows to distinguish variables that contain paths to pass secrets.\n  Config option pass_strict_fetch allows to error out when a secret cannot be fetched from pass.\n  Config option pass_dir allows setting the PASSWORD_STORE_DIR env for pass.\n  Config option pass_gnupghome allows setting the $GNUPGHOME env for pass. [#62120](https://github.com/saltstack/salt/issues/62120)\n- Add file.pruned state and expanded file.rmdir exec module functionality [#62178](https://github.com/saltstack/salt/issues/62178)\n- Added \"dig.PTR\" function to resolve PTR records for IPs, as well as tests and documentation [#62275](https://github.com/saltstack/salt/issues/62275)\n- Added the ability to remove a KB using the DISM state/execution modules [#62366](https://github.com/saltstack/salt/issues/62366)\n- Add \"<tiamat> python\" subcommand to allow execution or arbitrary scripts via bundled Python runtime [#62381](https://github.com/saltstack/salt/issues/62381)\n- Add ability to provide conditions which convert normal state actions to no-op when true [#62446](https://github.com/saltstack/salt/issues/62446)\n- Added debug log messages displaying the command being run when installing packages on Windows [#62480](https://github.com/saltstack/salt/issues/62480)\n- Add biosvendor grain [#62496](https://github.com/saltstack/salt/issues/62496)\n- Add ifelse Jinja function as found in CFEngine [#62508](https://github.com/saltstack/salt/issues/62508)\n- Implementation of Amazon EC2 instance detection and setting `virtual_subtype` grain accordingly including the product if possible to identify. [#62539](https://github.com/saltstack/salt/issues/62539)\n- Adds __env__substitution to ext_pillar.stack; followup of #61531, improved exception handling for stacked template (jinja) template rendering and yaml parsing in ext_pillar.stack [#62578](https://github.com/saltstack/salt/issues/62578)\n- Increase file.tidied flexibility with regard to age and size [#62678](https://github.com/saltstack/salt/issues/62678)\n- Added \"connected_devices\" feature to netbox pillar module. It contains extra information about devices connected to the minion [#62761](https://github.com/saltstack/salt/issues/62761)\n- Add atomic file operation for symlink changes [#62768](https://github.com/saltstack/salt/issues/62768)\n- Add password/account locking/unlocking in user.present state on supported operating systems [#62856](https://github.com/saltstack/salt/issues/62856)\n- Added onchange configuration for script engine [#62867](https://github.com/saltstack/salt/issues/62867)\n- Added output and bare functionality to export_key gpg module function [#62978](https://github.com/saltstack/salt/issues/62978)\n- Add keyvalue serializer for environment files [#62983](https://github.com/saltstack/salt/issues/62983)\n- Add ability to ignore symlinks in file.tidied [#63042](https://github.com/saltstack/salt/issues/63042)\n- salt-cloud support IMDSv2 tokens when using 'use-instance-role-credentials' [#63067](https://github.com/saltstack/salt/issues/63067)\n- Add ability for file.symlink to not set ownership on existing links [#63093](https://github.com/saltstack/salt/issues/63093)\n- Restore the previous slack engine and deprecate it, rename replace the slack engine to slack_bolt until deprecation [#63095](https://github.com/saltstack/salt/issues/63095)\n- Add functions that will return the underlying block device, mount point, and filesystem type for a given path [#63098](https://github.com/saltstack/salt/issues/63098)\n- Add ethtool execution and state module functions for pause [#63128](https://github.com/saltstack/salt/issues/63128)\n- Add boardname grain [#63131](https://github.com/saltstack/salt/issues/63131)\n- Added management of ECDSA/EdDSA private keys with x509 modules in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#63248](https://github.com/saltstack/salt/issues/63248)\n- Added x509 modules support for different output formats in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#63249](https://github.com/saltstack/salt/issues/63249)\n- Added deprecation_warning test state for ensuring that deprecation warnings are correctly emitted. [#63315](https://github.com/saltstack/salt/issues/63315)\n- Adds a state_events option to state.highstate, state.apply, state.sls, state.sls_id.\n  This allows users to enable state_events on a per use basis rather than having to\n  enable them globally for all state runs. [#63316](https://github.com/saltstack/salt/issues/63316)\n- Allow max queue size setting for state runs to prevent performance problems from queue growth [#63356](https://github.com/saltstack/salt/issues/63356)\n- Add support of exposing meta_server_grains for Azure VMs [#63606](https://github.com/saltstack/salt/issues/63606)\n- Include the version of `relenv` in the versions report. [#63827](https://github.com/saltstack/salt/issues/63827)\n- Added debug log messages displaying the command being run when removing packages on Windows [#63866](https://github.com/saltstack/salt/issues/63866)\n\n\n## 3006.0rc1 (2023-03-01)\n\n\n### Removed\n\n- Remove and deprecate the __orchestration__ key from salt.runner and salt.wheel return data. To get it back, set features.enable_deprecated_orchestration_flag master configuration option to True. The flag will be completely removed in Salt 3008 Argon. [#59917](https://github.com/saltstack/salt/issues/59917)\n- Removed distutils and replaced with setuptools, given distutils is deprecated and removed in Python 3.12 [#60476](https://github.com/saltstack/salt/issues/60476)\n- Removed ``runtests`` targets from ``noxfile.py`` [#62239](https://github.com/saltstack/salt/issues/62239)\n- Removed the PyObjC dependency.\n\n  This addresses problems with building a one dir build for macOS.\n  It became problematic because depending on the macOS version, it pulls different dependencies, and we would either have to build a macos onedir for each macOS supported release, or ship a crippled onedir(because it would be tied to the macOS version where the onedir was built).\n  Since it's currently not being used, it's removed. [#62432](https://github.com/saltstack/salt/issues/62432)\n\n\n### Deprecated\n\n- renamed `keep_jobs`, specifying job cache TTL in hours, to `keep_jobs_seconds`, specifying TTL in seconds.\n  `keep_jobs` will be removed in the Argon release [#55295](https://github.com/saltstack/salt/issues/55295)\n- Removing all references to napalm-base which is no longer supported. [#61542](https://github.com/saltstack/salt/issues/61542)\n- The 'ip_bracket' function has been moved from salt/utils/zeromq.py in salt/utils/network.py [#62009](https://github.com/saltstack/salt/issues/62009)\n- The `expand_repo_def` function in `salt.modules.aptpkg` is now deprecated. It's only used in `salt.states.pkgrepo` and it has no use of being exposed to the CLI. [#62485](https://github.com/saltstack/salt/issues/62485)\n- Deprecated defunct Django returner [#62644](https://github.com/saltstack/salt/issues/62644)\n- Deprecate core ESXi and associated states and modules, vcenter and vsphere support in favor of Salt VMware Extensions [#62754](https://github.com/saltstack/salt/issues/62754)\n- Removing manufacture grain which has been deprecated. [#62914](https://github.com/saltstack/salt/issues/62914)\n- Removing deprecated utils/boto3_elasticsearch.py [#62915](https://github.com/saltstack/salt/issues/62915)\n- Removing support for the now deprecated _ext_nodes from salt/master.py. [#62917](https://github.com/saltstack/salt/issues/62917)\n- Deprecating the Salt Slack engine in favor of the Salt Slack Bolt Engine. [#63095](https://github.com/saltstack/salt/issues/63095)\n- `salt.utils.version.StrictVersion` is now deprecated and it's use should be replaced with `salt.utils.version.Version`. [#63383](https://github.com/saltstack/salt/issues/63383)\n\n\n### Changed\n\n- More intelligent diffing in changes of file.serialize state. [#48609](https://github.com/saltstack/salt/issues/48609)\n- Move deprecation of the neutron module to Argon. Please migrate to the neutronng module instead. [#49430](https://github.com/saltstack/salt/issues/49430)\n- ``umask`` is now a global state argument, instead of only applying to ``cmd``\n  states. [#57803](https://github.com/saltstack/salt/issues/57803)\n- Update pillar.obfuscate to accept kwargs in addition to args.  This is useful when passing in keyword arguments like saltenv that are then passed along to pillar.items. [#58971](https://github.com/saltstack/salt/issues/58971)\n- Improve support for listing macOS brew casks [#59439](https://github.com/saltstack/salt/issues/59439)\n- Add missing MariaDB Grants to mysql module.\n  MariaDB has added some grants in 10.4.x and 10.5.x that are not present here, which results in an error when creating.\n  Also improved exception handling in `grant_add` which did not log the original error message and replaced it with a generic error. [#61409](https://github.com/saltstack/salt/issues/61409)\n- Use VENV_PIP_TARGET environment variable as a default target for pip if present. [#62089](https://github.com/saltstack/salt/issues/62089)\n- Disabled FQDNs grains on macOS by default [#62168](https://github.com/saltstack/salt/issues/62168)\n- Replaced pyroute2.IPDB with pyroute2.NDB, as the former is deprecated [#62218](https://github.com/saltstack/salt/issues/62218)\n- Enhance capture of error messages for Zypper calls in zypperpkg module. [#62346](https://github.com/saltstack/salt/issues/62346)\n- Removed GPG_1_3_1 check [#62895](https://github.com/saltstack/salt/issues/62895)\n- Requisite state chunks now all consistently contain `__id__`, `__sls__` and `name`. [#63012](https://github.com/saltstack/salt/issues/63012)\n- netapi_enable_clients option to allow enabling/disabling of clients in salt-api.\n  By default all clients will now be disabled. Users of salt-api will need\n  to update their master config to enable the clients that they use. Not adding\n  the netapi_enable_clients option with required clients to the master config will\n  disable salt-api. [#63050](https://github.com/saltstack/salt/issues/63050)\n- Stop relying on `salt/_version.py` to write Salt's version. Instead use `salt/_version.txt` which only contains the version string. [#63383](https://github.com/saltstack/salt/issues/63383)\n- Set enable_fqdns_grains to be False by default. [#63595](https://github.com/saltstack/salt/issues/63595)\n- Changelog snippet files must now have a `.md` file extension to be more explicit on what type of rendering is done when they are included in the main `CHANGELOG.md` file. [#63710](https://github.com/saltstack/salt/issues/63710)\n\n\n### Fixed\n\n- Add kwargs to handle extra parameters for http.query [#36138](https://github.com/saltstack/salt/issues/36138)\n- Fix mounted bind mounts getting active mount options added [#39292](https://github.com/saltstack/salt/issues/39292)\n- Fix `sysctl.present` converts spaces to tabs. [#40054](https://github.com/saltstack/salt/issues/40054)\n- Fixes state pkg.purged to purge removed packages on Debian family systems [#42306](https://github.com/saltstack/salt/issues/42306)\n- Fix fun_args missing from syndic returns [#45823](https://github.com/saltstack/salt/issues/45823)\n- Fix mount.mounted with 'mount: False' reports unmounted file system as unchanged when running with test=True [#47201](https://github.com/saltstack/salt/issues/47201)\n- Issue #49310: Allow users to touch a file with Unix date of birth [#49310](https://github.com/saltstack/salt/issues/49310)\n- Do not raise an exception in pkg.info_installed on nonzero return code [#51620](https://github.com/saltstack/salt/issues/51620)\n- Passes the value of the force parameter from file.copy to its call to file.remove so that files with the read-only attribute are handled. [#51739](https://github.com/saltstack/salt/issues/51739)\n- Fixed x509.certificate_managed creates new certificate every run in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#52167](https://github.com/saltstack/salt/issues/52167)\n- Don't check for cached pillar errors on state.apply [#52354](https://github.com/saltstack/salt/issues/52354), [#57180](https://github.com/saltstack/salt/issues/57180), [#59339](https://github.com/saltstack/salt/issues/59339)\n- Swapping out args and kwargs for arg and kwarg respectively in the Slack engine when the command passed is a runner. [#52400](https://github.com/saltstack/salt/issues/52400)\n- Ensure when we're adding chunks to the rules when running aggregation with the iptables state module we use a copy of the chunk otherwise we end up with a recursive mess. [#53353](https://github.com/saltstack/salt/issues/53353)\n- When user_create or user_remove fail, return False instead of returning the error. [#53377](https://github.com/saltstack/salt/issues/53377)\n- Include sync_roster when sync_all is called. [#53914](https://github.com/saltstack/salt/issues/53914)\n- Avoid warning noise in lograte.get [#53988](https://github.com/saltstack/salt/issues/53988)\n- Fixed listing revoked keys with gpg.list_keys [#54347](https://github.com/saltstack/salt/issues/54347)\n- Fix mount.mounted does not handle blanks properly [#54508](https://github.com/saltstack/salt/issues/54508)\n- Fixed grain num_cpus get wrong CPUs count in case of inconsistent CPU numbering. [#54682](https://github.com/saltstack/salt/issues/54682)\n- Fix spelling error for python_shell argument in dpkg_lower module [#54907](https://github.com/saltstack/salt/issues/54907)\n- Cleaned up bytes response data before sending to non-bytes compatible returners (postgres, mysql) [#55226](https://github.com/saltstack/salt/issues/55226)\n- Fixed malformed state return when testing file.managed with unavailable source file [#55269](https://github.com/saltstack/salt/issues/55269)\n- Included stdout in error message for Zypper calls in zypperpkg module. [#56016](https://github.com/saltstack/salt/issues/56016)\n- Fixed pillar.filter_by with salt-ssh [#56093](https://github.com/saltstack/salt/issues/56093)\n- Fix boto_route53 issue with (multiple) VPCs. [#57139](https://github.com/saltstack/salt/issues/57139)\n- Remove log from mine runner which was not used. [#57463](https://github.com/saltstack/salt/issues/57463)\n- Fixed x509.read_certificate error when reading a Microsoft CA issued certificate in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#57535](https://github.com/saltstack/salt/issues/57535)\n- Updating Slack engine to use slack_bolt library. [#57842](https://github.com/saltstack/salt/issues/57842)\n- Fixed warning about replace=True with x509.certificate_managed in the new cryptography x509 module. [#58165](https://github.com/saltstack/salt/issues/58165)\n- Fix salt.modules.pip:is_installed doesn't handle locally installed packages [#58202](https://github.com/saltstack/salt/issues/58202)\n- Add missing MariaDB Grants to mysql module. MariaDB has added some grants in 10.4.x and 10.5.x that are not present here, which results in an error when creating. [#58297](https://github.com/saltstack/salt/issues/58297)\n- linux_shadow: Fix cases where malformed shadow entries cause `user.present`\n  states to fail. [#58423](https://github.com/saltstack/salt/issues/58423)\n- Fixed salt.utils.compat.cmp to work with dictionaries [#58729](https://github.com/saltstack/salt/issues/58729)\n- Fixed formatting for terse output mode [#58953](https://github.com/saltstack/salt/issues/58953)\n- Fixed RecursiveDictDiffer with added nested dicts [#59017](https://github.com/saltstack/salt/issues/59017)\n- Fixed x509.certificate_managed has DoS effect on master in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#59169](https://github.com/saltstack/salt/issues/59169)\n- Fixed saltnado websockets disconnecting immediately [#59183](https://github.com/saltstack/salt/issues/59183)\n- Fixed x509.certificate_managed rolls certificates every now and then in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#59315](https://github.com/saltstack/salt/issues/59315)\n- Fix postgres_privileges.present not idempotent for functions [#59585](https://github.com/saltstack/salt/issues/59585)\n- Fixed influxdb_continuous_query.present state to provide the client args to the underlying module on create. [#59766](https://github.com/saltstack/salt/issues/59766)\n- Warn when using insecure (http:// based) key_urls for apt-based systems in pkgrepo.managed, and add a kwarg that determines the validity of such a url. [#59786](https://github.com/saltstack/salt/issues/59786)\n- add load balancing policy default option and ensure the module can be executed with arguments from CLI [#59909](https://github.com/saltstack/salt/issues/59909)\n- Fix salt-ssh when using imports with extra-filerefs. [#60003](https://github.com/saltstack/salt/issues/60003)\n- Fixed cache directory corruption startup error [#60170](https://github.com/saltstack/salt/issues/60170)\n- Update docs remove dry_run in docstring of file.blockreplace state. [#60227](https://github.com/saltstack/salt/issues/60227)\n- Adds Parrot to OS_Family_Map in grains. [#60249](https://github.com/saltstack/salt/issues/60249)\n- Fixed stdout and stderr being empty sometimes when use_vt=True for the cmd.run[*] functions [#60365](https://github.com/saltstack/salt/issues/60365)\n- Use return code in iptables --check to verify rule exists. [#60467](https://github.com/saltstack/salt/issues/60467)\n- Fix regression pip.installed does not pass env_vars when calling pip.list [#60557](https://github.com/saltstack/salt/issues/60557)\n- Fix xfs module when additional output included in mkfs.xfs command. [#60853](https://github.com/saltstack/salt/issues/60853)\n- Fixed parsing new format of terraform states in roster.terraform [#60915](https://github.com/saltstack/salt/issues/60915)\n- Fixed recognizing installed ARMv7 rpm packages in compatible architectures. [#60994](https://github.com/saltstack/salt/issues/60994)\n- Fixing changes dict in pkg state to be consistent when installing and test=True. [#60995](https://github.com/saltstack/salt/issues/60995)\n- Fix cron.present duplicating entries when changing timespec to special. [#60997](https://github.com/saltstack/salt/issues/60997)\n- Made salt-ssh respect --wipe again [#61083](https://github.com/saltstack/salt/issues/61083)\n- state.orchestrate_single only passes a pillar if it is set to the state\n  function. This allows it to be used with state functions that don't accept a\n  pillar keyword argument. [#61092](https://github.com/saltstack/salt/issues/61092)\n- Fix ipset state when the comment kwarg is set. [#61122](https://github.com/saltstack/salt/issues/61122)\n- Fix issue with archive.unzip where the password was not being encoded for the extract function [#61422](https://github.com/saltstack/salt/issues/61422)\n- Some Linux distributions (like AlmaLinux, Astra Linux, Debian, Mendel, Linux\n  Mint, Pop!_OS, Rocky Linux) report different `oscodename`, `osfullname`,\n  `osfinger` grains if lsb-release is installed or not. They have been changed to\n  only derive these OS grains from `/etc/os-release`. [#61618](https://github.com/saltstack/salt/issues/61618)\n- Pop!_OS uses the full version (YY.MM) in the osfinger grain now, not just the year. This allows differentiating for example between 20.04 and 20.10. [#61619](https://github.com/saltstack/salt/issues/61619)\n- Fix ssh config roster to correctly parse the ssh config files that contain spaces. [#61650](https://github.com/saltstack/salt/issues/61650)\n- Fix SoftLayer configuration not raising an exception when a domain is missing [#61727](https://github.com/saltstack/salt/issues/61727)\n- Allow the minion to start or salt-call to run even if the user doesn't have permissions to read the root_dir value from the registry [#61789](https://github.com/saltstack/salt/issues/61789)\n- Need to move the creation of the proxy object for the ProxyMinion further down in the initialization for sub proxies to ensure that all modules, especially any custom proxy modules, are available before attempting to run the init function. [#61805](https://github.com/saltstack/salt/issues/61805)\n- Fixed malformed state return when merge-serializing to an improperly formatted file [#61814](https://github.com/saltstack/salt/issues/61814)\n- Made cmdmod._run[_all]_quiet work during minion startup on MacOS with runas specified (which fixed mac_service) [#61816](https://github.com/saltstack/salt/issues/61816)\n- When deleting the vault cache, also delete from the session cache [#61821](https://github.com/saltstack/salt/issues/61821)\n- Ignore errors on reading license info with dpkg_lowpkg to prevent tracebacks on getting package information. [#61827](https://github.com/saltstack/salt/issues/61827)\n- win_lgpo: Display conflicting policy names when more than one policy is found [#61859](https://github.com/saltstack/salt/issues/61859)\n- win_lgpo: Fixed intermittent KeyError when getting policy setting using lgpo.get_policy [#61860](https://github.com/saltstack/salt/issues/61860)\n- Fixed listing minions on OpenBSD [#61966](https://github.com/saltstack/salt/issues/61966)\n- Make Salt to return an error on \"pkg\" modules and states when targeting duplicated package names [#62019](https://github.com/saltstack/salt/issues/62019)\n- Fix return of REST-returned permissions when auth_list is set [#62022](https://github.com/saltstack/salt/issues/62022)\n- Normalize package names once on using pkg.installed/removed with yum to make it possible to install packages with the name containing a part similar to a name of architecture. [#62029](https://github.com/saltstack/salt/issues/62029)\n- Fix inconsitency regarding name and pkgs parameters between zypperpkg.upgrade() and yumpkg.upgrade() [#62030](https://github.com/saltstack/salt/issues/62030)\n- Fix attr=all handling in pkg.list_pkgs() (yum/zypper). [#62032](https://github.com/saltstack/salt/issues/62032)\n- Fixed the humanname being ignored in pkgrepo.managed on openSUSE Leap [#62053](https://github.com/saltstack/salt/issues/62053)\n- Fixed issue with some LGPO policies having whitespace at the beginning or end of the element alias [#62058](https://github.com/saltstack/salt/issues/62058)\n- Fix ordering of args to libcloud_storage.download_object module [#62074](https://github.com/saltstack/salt/issues/62074)\n- Ignore extend declarations in sls files that are excluded. [#62082](https://github.com/saltstack/salt/issues/62082)\n- Remove leftover usage of impacket [#62101](https://github.com/saltstack/salt/issues/62101)\n- Pass executable path from _get_path_exec() is used when calling the program.\n  The $HOME env is no longer modified globally.\n  Only trailing newlines are stripped from the fetched secret.\n  Pass process arguments are handled in a secure way. [#62120](https://github.com/saltstack/salt/issues/62120)\n- Ignore some command return codes in openbsdrcctl_service to prevent spurious errors [#62131](https://github.com/saltstack/salt/issues/62131)\n- Fixed extra period in filename output in tls module. Instead of \"server.crt.\" it will now be \"server.crt\". [#62139](https://github.com/saltstack/salt/issues/62139)\n- Make sure lingering PAexec-*.exe files in the Windows directory are cleaned up [#62152](https://github.com/saltstack/salt/issues/62152)\n- Restored Salt's DeprecationWarnings [#62185](https://github.com/saltstack/salt/issues/62185)\n- Fixed issue with forward slashes on Windows with file.recurse and clean=True [#62197](https://github.com/saltstack/salt/issues/62197)\n- Recognize OSMC as Debian-based [#62198](https://github.com/saltstack/salt/issues/62198)\n- Fixed Zypper module failing on RPM lock file being temporarily unavailable. [#62204](https://github.com/saltstack/salt/issues/62204)\n- Improved error handling and diagnostics in the proxmox salt-cloud driver [#62211](https://github.com/saltstack/salt/issues/62211)\n- Added EndeavourOS to the Arch os_family. [#62220](https://github.com/saltstack/salt/issues/62220)\n- Fix salt-ssh not detecting `platform-python` as a valid interpreter on EL8 [#62235](https://github.com/saltstack/salt/issues/62235)\n- Fix pkg.version_cmp on openEuler and a few other os flavors. [#62248](https://github.com/saltstack/salt/issues/62248)\n- Fix localhost detection in glusterfs.peers [#62273](https://github.com/saltstack/salt/issues/62273)\n- Fix Salt Package Manager (SPM) exception when calling spm create_repo . [#62281](https://github.com/saltstack/salt/issues/62281)\n- Fix matcher slowness due to loader invocation [#62283](https://github.com/saltstack/salt/issues/62283)\n- Fixes the Puppet module for non-aio Puppet packages for example running the Puppet module on FreeBSD. [#62323](https://github.com/saltstack/salt/issues/62323)\n- Issue 62334: Displays a debug log message instead of an error log message when the publisher fails to connect [#62334](https://github.com/saltstack/salt/issues/62334)\n- Fix pyobjects renderer access to opts and sls [#62336](https://github.com/saltstack/salt/issues/62336)\n- Fix use of random shuffle and sample functions as Jinja filters [#62372](https://github.com/saltstack/salt/issues/62372)\n- Fix groups with duplicate GIDs are not returned by get_group_list [#62377](https://github.com/saltstack/salt/issues/62377)\n- Fix the \"zpool.present\" state when enabling zpool features that are already active. [#62390](https://github.com/saltstack/salt/issues/62390)\n- Fix ability to execute remote file client methods in saltcheck [#62398](https://github.com/saltstack/salt/issues/62398)\n- Update all platforms to use pycparser 2.21 or greater for Py 3.9 or higher, fixes fips fault with openssl v3.x [#62400](https://github.com/saltstack/salt/issues/62400)\n- Due to changes in the Netmiko library for the exception paths, need to check the version of Netmiko python library and then import the exceptions from different locations depending on the result. [#62405](https://github.com/saltstack/salt/issues/62405)\n- When using preq on a state, then prereq state will first be run with test=True to determine if there are changes.  When there are changes, the state with the prereq option will be run prior to the prereq state.  If this state fails then the prereq state will not run and the state output uses the test=True run.  However, the proposed changes are included for the prereq state are included from the test=True run.  We should pull those out as there weren't actually changes since the prereq state did not run. [#62408](https://github.com/saltstack/salt/issues/62408)\n- Added directory mode for file.copy with makedirs [#62426](https://github.com/saltstack/salt/issues/62426)\n- Provide better error handling in the various napalm proxy minion functions when the device is not accessible. [#62435](https://github.com/saltstack/salt/issues/62435)\n- When handling aggregation, change the order to ensure that the requisites are aggregated first and then the state functions are aggregated.  Caching whether aggregate functions are available for particular states so we don't need to attempt to load them everytime. [#62439](https://github.com/saltstack/salt/issues/62439)\n- The patch allows to boostrap kubernetes clusters in the version above 1.13 via salt module [#62451](https://github.com/saltstack/salt/issues/62451)\n- sysctl.persist now updates the in-memory value on FreeBSD even if the on-disk value was already correct. [#62461](https://github.com/saltstack/salt/issues/62461)\n- Fixed parsing CDROM apt sources [#62474](https://github.com/saltstack/salt/issues/62474)\n- Update sanitizing masking for Salt SSH to include additional password like strings. [#62483](https://github.com/saltstack/salt/issues/62483)\n- Fix user/group checking on file state functions in the test mode. [#62499](https://github.com/saltstack/salt/issues/62499)\n- Fix user.present to allow removing groups using optional_groups parameter and enforcing idempotent group membership. [#62502](https://github.com/saltstack/salt/issues/62502)\n- Fix possible tracebacks if there is a package with '------' or '======' in the description is installed on the Debian based minion. [#62519](https://github.com/saltstack/salt/issues/62519)\n- Fixed the omitted \"pool\" parameter when cloning a VM with the proxmox salt-cloud driver [#62521](https://github.com/saltstack/salt/issues/62521)\n- Fix rendering of pyobjects states in saltcheck [#62523](https://github.com/saltstack/salt/issues/62523)\n- Fixes pillar where a corrupted CacheDisk file forces the pillar to be rebuilt [#62527](https://github.com/saltstack/salt/issues/62527)\n- Use str() method instead of repo_line for when python3-apt is installed or not in aptpkg.py. [#62546](https://github.com/saltstack/salt/issues/62546)\n- Remove the connection_timeout from netmiko_connection_args before netmiko_connection_args is added to __context__[\"netmiko_device\"][\"args\"] which is passed along to the Netmiko library. [#62547](https://github.com/saltstack/salt/issues/62547)\n- Fix order specific mount.mounted options for persist [#62556](https://github.com/saltstack/salt/issues/62556)\n- Fixed salt-cloud cloning a proxmox VM with a specified new vmid. [#62558](https://github.com/saltstack/salt/issues/62558)\n- Fix runas with cmd module when using the onedir bundled packages [#62565](https://github.com/saltstack/salt/issues/62565)\n- Update setproctitle version for all platforms [#62576](https://github.com/saltstack/salt/issues/62576)\n- Fixed missing parameters when cloning a VM with the proxmox salt-cloud driver [#62580](https://github.com/saltstack/salt/issues/62580)\n- Handle PermissionError when importing crypt when FIPS is enabled. [#62587](https://github.com/saltstack/salt/issues/62587)\n- Correctly reraise exceptions in states.http [#62595](https://github.com/saltstack/salt/issues/62595)\n- Fixed syndic eauth. Now jobs will be published when a valid eauth user is targeting allowed minions/functions. [#62618](https://github.com/saltstack/salt/issues/62618)\n- updated rest_cherry/app to properly detect arg sent as a string as curl will do when only one arg is supplied. [#62624](https://github.com/saltstack/salt/issues/62624)\n- Prevent possible tracebacks in core grains module by ignoring non utf8 characters in /proc/1/environ, /proc/1/cmdline, /proc/cmdline [#62633](https://github.com/saltstack/salt/issues/62633)\n- Fixed vault ext pillar return data for KV v2 [#62651](https://github.com/saltstack/salt/issues/62651)\n- Fix saltcheck _get_top_states doesn't pass saltenv to state.show_top [#62654](https://github.com/saltstack/salt/issues/62654)\n- Fix groupadd.* functions hard code relative command name [#62657](https://github.com/saltstack/salt/issues/62657)\n- Fixed pdbedit.create trying to use a bytes-like hash as string. [#62670](https://github.com/saltstack/salt/issues/62670)\n- Fix depenency on legacy boto module in boto3 modules [#62672](https://github.com/saltstack/salt/issues/62672)\n- Modified \"_get_flags\" function so that it returns regex flags instead of integers [#62676](https://github.com/saltstack/salt/issues/62676)\n- Change startup ReqServer log messages from error to info level. [#62728](https://github.com/saltstack/salt/issues/62728)\n- Fix kmod.* functions hard code relative command name [#62772](https://github.com/saltstack/salt/issues/62772)\n- Fix mac_brew_pkg to work with null taps [#62793](https://github.com/saltstack/salt/issues/62793)\n- Fixing a bug when listing the running schedule if \"schedule.enable\" and/or \"schedule.disable\" has been run, where the \"enabled\" items is being treated as a schedule item. [#62795](https://github.com/saltstack/salt/issues/62795)\n- Prevent annoying RuntimeWarning message about line buffering (buffering=1) not being supported in binary mode [#62817](https://github.com/saltstack/salt/issues/62817)\n- Include UID and GID checks in modules.file.check_perms as well as comparing\n  ownership by username and group name. [#62818](https://github.com/saltstack/salt/issues/62818)\n- Fix presence events on TCP transport by removing a client's presence when minion disconnects from publish channel correctly [#62826](https://github.com/saltstack/salt/issues/62826)\n- Remove Azure deprecation messages from functions that always run w/ salt-cloud [#62845](https://github.com/saltstack/salt/issues/62845)\n- Use select instead of iterating over entrypoints as a dictionary for importlib_metadata>=5.0.0 [#62854](https://github.com/saltstack/salt/issues/62854)\n- Fixed master job scheduler using when [#62858](https://github.com/saltstack/salt/issues/62858)\n- LGPO: Added support for missing domain controller policies: VulnerableChannelAllowList and LdapEnforceChannelBinding [#62873](https://github.com/saltstack/salt/issues/62873)\n- Fix unnecessarily complex gce metadata grains code to use googles metadata service more effectively. [#62878](https://github.com/saltstack/salt/issues/62878)\n- Fixed dockermod version_info function for docker-py 6.0.0+ [#62882](https://github.com/saltstack/salt/issues/62882)\n- Moving setting the LOAD_BALANCING_POLICY_MAP dictionary into the try except block that determines if the cassandra_cql module should be made available. [#62886](https://github.com/saltstack/salt/issues/62886)\n- Updating various MongoDB module functions to work with latest version of pymongo. [#62900](https://github.com/saltstack/salt/issues/62900)\n- Restored channel for Syndic minions to send job returns to the Salt master. [#62933](https://github.com/saltstack/salt/issues/62933)\n- removed _resolve_deps as it required a library that is not generally avalible. and switched to apt-get for everything as that can auto resolve dependencies. [#62934](https://github.com/saltstack/salt/issues/62934)\n- Updated pyzmq to version 22.0.3 on Windows builds because the old version was causing salt-minion/salt-call to hang [#62937](https://github.com/saltstack/salt/issues/62937)\n- Allow root user to modify crontab lines for non-root users (except AIX and Solaris). Align crontab line changes with the file ones and also with listing crontab. [#62940](https://github.com/saltstack/salt/issues/62940)\n- Fix systemd_service.* functions hard code relative command name [#62942](https://github.com/saltstack/salt/issues/62942)\n- Fix file.symlink backupname operation can copy remote contents to local disk [#62953](https://github.com/saltstack/salt/issues/62953)\n- Issue #62968: Fix issue where cloud deployments were putting the keys in the wrong location on Windows hosts [#62968](https://github.com/saltstack/salt/issues/62968)\n- Fixed gpg_passphrase issue with gpg decrypt/encrypt functions [#62977](https://github.com/saltstack/salt/issues/62977)\n- Fix file.tidied FileNotFoundError [#62986](https://github.com/saltstack/salt/issues/62986)\n- Fixed bug where module.wait states were detected as running legacy module.run syntax [#62988](https://github.com/saltstack/salt/issues/62988)\n- Fixed issue with win_wua module where it wouldn't load if the CryptSvc was set to Manual start [#62993](https://github.com/saltstack/salt/issues/62993)\n- The `__opts__` dunder dictionary is now added to the loader's `pack` if not\n  already present, which makes it accessible via the\n  `salt.loader.context.NamedLoaderContext` class. [#63013](https://github.com/saltstack/salt/issues/63013)\n- Issue #63024: Fix issue where grains and config data were being place in the wrong location on Windows hosts [#63024](https://github.com/saltstack/salt/issues/63024)\n- Fix btrfs.subvolume_snapshot command failing [#63025](https://github.com/saltstack/salt/issues/63025)\n- Fix file.retention_schedule always reports changes [#63033](https://github.com/saltstack/salt/issues/63033)\n- Fix mongo authentication for mongo ext_pillar and mongo returner\n\n  This fix also include the ability to use the mongo connection string for mongo ext_pillar [#63058](https://github.com/saltstack/salt/issues/63058)\n- Fixed x509.create_csr creates invalid CSR by default in the new cryptography x509 module. [#63103](https://github.com/saltstack/salt/issues/63103)\n- TCP transport documentation now contains proper master/minion-side filtering information [#63120](https://github.com/saltstack/salt/issues/63120)\n- Fixed gpg.verify does not respect gnupghome [#63145](https://github.com/saltstack/salt/issues/63145)\n- Made pillar cache pass extra minion data as well [#63208](https://github.com/saltstack/salt/issues/63208)\n- Fix serious performance issues with the file.tidied module [#63231](https://github.com/saltstack/salt/issues/63231)\n- Import StrictVersion and LooseVersion from setuptools.distutils.verison or setuptools._distutils.version, if first not available [#63350](https://github.com/saltstack/salt/issues/63350)\n- When the shell is passed as powershell or pwsh, only wrapper the shell in quotes if cmd.run is running on Windows.  When quoted on Linux hosts, this results in an error when the keyword arguments are appended. [#63590](https://github.com/saltstack/salt/issues/63590)\n- LGPO: Added support for \"Relax minimum password length limits\" [#63596](https://github.com/saltstack/salt/issues/63596)\n- Check file is not empty before attempting to read pillar disk cache file [#63729](https://github.com/saltstack/salt/issues/63729)\n\n\n### Added\n\n- Introduce a `LIB_STATE_DIR` syspaths variable which defaults to `CONFIG_DIR`,\n  but can be individually customized during installation by specifying\n  `--salt-lib-state-dir` during installation. Change the default `pki_dir` to\n  `<LIB_STATE_DIR>/pki/master` (for the master) and `<LIB_STATE_DIR>/pki/minion`\n  (for the minion). [#3396](https://github.com/saltstack/salt/issues/3396)\n- Allow users to enable 'queue=True' for all state runs via config file [#31468](https://github.com/saltstack/salt/issues/31468)\n- Added pillar templating to vault policies [#43287](https://github.com/saltstack/salt/issues/43287)\n- Add support for NVMeF as a transport protocol for hosts in a Pure Storage FlashArray [#51088](https://github.com/saltstack/salt/issues/51088)\n- A new salt-ssh roster that generates a roster by parses a known_hosts file. [#54679](https://github.com/saltstack/salt/issues/54679)\n- Added Windows Event Viewer support [#54713](https://github.com/saltstack/salt/issues/54713)\n- Added the win_lgpo_reg state and execution modules which will allow registry based group policy to be set directly in the Registry.pol file [#56013](https://github.com/saltstack/salt/issues/56013)\n- Added resource tagging functions to boto_dynamodb execution module [#57500](https://github.com/saltstack/salt/issues/57500)\n- Added `openvswitch_db` state module and functions `bridge_to_parent`,\n  `bridge_to_vlan`, `db_get`, and `db_set` to the `openvswitch` execution module.\n  Also added optional `parent` and `vlan` parameters to the\n  `openvswitch_bridge.present` state module function and the\n  `openvswitch.bridge_create` execution module function. [#58986](https://github.com/saltstack/salt/issues/58986)\n- State module to manage SysFS attributes [#60154](https://github.com/saltstack/salt/issues/60154)\n- Added ability for `salt.wait_for_event` to handle `event_id`s that have a list value. [#60430](https://github.com/saltstack/salt/issues/60430)\n- Added suport for Linux ppc64le core grains (cpu_model, virtual, productname, manufacturer, serialnumber) and arm core grains (serialnumber, productname) [#60518](https://github.com/saltstack/salt/issues/60518)\n- Added autostart option to virt.defined and virt.running states, along with virt.update execution modules. [#60700](https://github.com/saltstack/salt/issues/60700)\n- Added .0 back to our versioning scheme for future versions (e.g. 3006.0) [#60722](https://github.com/saltstack/salt/issues/60722)\n- Initial work to allow parallel startup of proxy minions when used as sub proxies with Deltaproxy. [#61153](https://github.com/saltstack/salt/issues/61153)\n- Added node label support for GCE [#61245](https://github.com/saltstack/salt/issues/61245)\n- Support the --priority flag when adding sources to Chocolatey. [#61319](https://github.com/saltstack/salt/issues/61319)\n- Add namespace option to ext_pillar.http_json [#61335](https://github.com/saltstack/salt/issues/61335)\n- Added a filter function to ps module to get a list of processes on a minion according to their state. [#61420](https://github.com/saltstack/salt/issues/61420)\n- Add postgres.timeout option to postgres module for limiting postgres query times [#61433](https://github.com/saltstack/salt/issues/61433)\n- Added new optional vault option, ``config_location``. This can be either ``master`` or ``local`` and defines where vault will look for connection details, either requesting them from the master or using the local config. [#61857](https://github.com/saltstack/salt/issues/61857)\n- Add ipwrap() jinja filter to wrap IPv6 addresses with brackets. [#61931](https://github.com/saltstack/salt/issues/61931)\n- 'tcp' transport is now available in ipv6-only network [#62009](https://github.com/saltstack/salt/issues/62009)\n- Add `diff_attr` parameter to pkg.upgrade() (zypper/yum). [#62031](https://github.com/saltstack/salt/issues/62031)\n- Config option pass_variable_prefix allows to distinguish variables that contain paths to pass secrets.\n  Config option pass_strict_fetch allows to error out when a secret cannot be fetched from pass.\n  Config option pass_dir allows setting the PASSWORD_STORE_DIR env for pass.\n  Config option pass_gnupghome allows setting the $GNUPGHOME env for pass. [#62120](https://github.com/saltstack/salt/issues/62120)\n- Add file.pruned state and expanded file.rmdir exec module functionality [#62178](https://github.com/saltstack/salt/issues/62178)\n- Added \"dig.PTR\" function to resolve PTR records for IPs, as well as tests and documentation [#62275](https://github.com/saltstack/salt/issues/62275)\n- Added the ability to remove a KB using the DISM state/execution modules [#62366](https://github.com/saltstack/salt/issues/62366)\n- Add \"<tiamat> python\" subcommand to allow execution or arbitrary scripts via bundled Python runtime [#62381](https://github.com/saltstack/salt/issues/62381)\n- Add ability to provide conditions which convert normal state actions to no-op when true [#62446](https://github.com/saltstack/salt/issues/62446)\n- Added debug log messages displaying the command being run when installing packages on Windows [#62480](https://github.com/saltstack/salt/issues/62480)\n- Add biosvendor grain [#62496](https://github.com/saltstack/salt/issues/62496)\n- Add ifelse Jinja function as found in CFEngine [#62508](https://github.com/saltstack/salt/issues/62508)\n- Implementation of Amazon EC2 instance detection and setting `virtual_subtype` grain accordingly including the product if possible to identify. [#62539](https://github.com/saltstack/salt/issues/62539)\n- Adds __env__substitution to ext_pillar.stack; followup of #61531, improved exception handling for stacked template (jinja) template rendering and yaml parsing in ext_pillar.stack [#62578](https://github.com/saltstack/salt/issues/62578)\n- Increase file.tidied flexibility with regard to age and size [#62678](https://github.com/saltstack/salt/issues/62678)\n- Added \"connected_devices\" feature to netbox pillar module. It contains extra information about devices connected to the minion [#62761](https://github.com/saltstack/salt/issues/62761)\n- Add atomic file operation for symlink changes [#62768](https://github.com/saltstack/salt/issues/62768)\n- Add password/account locking/unlocking in user.present state on supported operating systems [#62856](https://github.com/saltstack/salt/issues/62856)\n- Added onchange configuration for script engine [#62867](https://github.com/saltstack/salt/issues/62867)\n- Added output and bare functionality to export_key gpg module function [#62978](https://github.com/saltstack/salt/issues/62978)\n- Add keyvalue serializer for environment files [#62983](https://github.com/saltstack/salt/issues/62983)\n- Add ability to ignore symlinks in file.tidied [#63042](https://github.com/saltstack/salt/issues/63042)\n- salt-cloud support IMDSv2 tokens when using 'use-instance-role-credentials' [#63067](https://github.com/saltstack/salt/issues/63067)\n- Add ability for file.symlink to not set ownership on existing links [#63093](https://github.com/saltstack/salt/issues/63093)\n- Restore the previous slack engine and deprecate it, rename replace the slack engine to slack_bolt until deprecation [#63095](https://github.com/saltstack/salt/issues/63095)\n- Add functions that will return the underlying block device, mount point, and filesystem type for a given path [#63098](https://github.com/saltstack/salt/issues/63098)\n- Add ethtool execution and state module functions for pause [#63128](https://github.com/saltstack/salt/issues/63128)\n- Add boardname grain [#63131](https://github.com/saltstack/salt/issues/63131)\n- Added management of ECDSA/EdDSA private keys with x509 modules in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#63248](https://github.com/saltstack/salt/issues/63248)\n- Added x509 modules support for different output formats in the new cryptography x509 module. Please migrate to the new cryptography x509 module for this improvement. [#63249](https://github.com/saltstack/salt/issues/63249)\n- Added deprecation_warning test state for ensuring that deprecation warnings are correctly emitted. [#63315](https://github.com/saltstack/salt/issues/63315)\n- Adds a state_events option to state.highstate, state.apply, state.sls, state.sls_id.\n  This allows users to enable state_events on a per use basis rather than having to\n  enable them globally for all state runs. [#63316](https://github.com/saltstack/salt/issues/63316)\n- Allow max queue size setting for state runs to prevent performance problems from queue growth [#63356](https://github.com/saltstack/salt/issues/63356)\n- Add support of exposing meta_server_grains for Azure VMs [#63606](https://github.com/saltstack/salt/issues/63606)\n\n\n## Salt v3005.1-2 (2022-11-04)\n\nNote: This release is only impacting the packages not the Salt code base.\n\n### Fixed\n\n- Updated pyzmq to version 22.0.3 on Windows builds because the old version was causing salt-minion/salt-call to hang (#62937)\n- Onedir Package Fix: Fix \"No such file or directory\" error on Rhel installs. (#62948)\n\n### Security\n\n- Update the onedir packages Python version to 3.8.15 for Windows and 3.9.15 for Linux and Mac\n\n\n## Salt 3005.1 (2022-09-26)\n\n### Fixed\n\n- Fix arch parsing issue in apt source files (#62247)\n- Fixed parsing CDROM apt sources (#62474)\n- Use str() method instead of repo_line for when python3-apt is installed or not in aptpkg.py. (#62546)\n- Remove the connection_timeout from netmiko_connection_args before netmiko_connection_args is added to __context__[\"netmiko_device\"][\"args\"] which is passed along to the Netmiko library. (#62547)\n- fixes #62553 by checking for disabled master_type before starting master connection and skipping it if set. (#62553)\n- Fix runas with cmd module when using the onedir bundled packages (#62565)\n- Fix the Pyinstaller hooks to preserve the environment if None is passed. (#62567, #62628)\n- pkgrepo.managed sets wrong permissions on keys installed to /etc/apt/keyring (#62569)\n- pkgrepo.managed creates zero byte gpg files when dearmoring contents to the same filename (#62570)\n- Ensure default values for IPC Buffers are correct type (#62591)\n- Fix a hang on salt-ssh when using sudo. (#62603)\n- Renderers now have access to the correct set of salt functions. (#62610, #62620)\n- Fix including Jinja template from absolute path (#62611)\n- include jmespath in package requirements (#62613)\n- Fix pkgrepo.managed signed-by in test=true mode (#62662)\n- Ensure the status of the service is captured when the beacon function is called, even when the event is not being emitted. (#62675)\n- The sub proxies controlled by Deltaproxy need to have their own req_channel otherwise there are timeout exceptions when the __master_req_channel_payload is fired and reacted on. (#62708)\n\n\n## Salt 3005 (2022-08-22)\n\n### Removed\n\n- Deprecating and removing salt-unity. (#56055)\n- Removed support for macos mojave (#61130)\n- Removed `salt.utils.MultiprocessingProcess` and `salt.utils.SignalHandlingMultiprocessingProcess`. Please use `salt.utils.Process` and `salt.utils.SignalHandlingProcess` instead. (#61573)\n- Remove the grains.get_or_set_hash function. Please reference pillar and SDB documentation for secure ways to manage sensitive information. Grains are an insecure way to store secrets. (#61691)\n- Removed the `telnet_port`, `serial_type` and `console` parameters in salt/modules/virt.py. Use the `serials` and `consoles` parameters instead. Use the `serials` parameter with a value like ``{{{{'type': 'tcp', 'protocol': 'telnet', 'port': {}}}}}`` instead and a similar `consoles` parameter. (#61693)\n- Remove remove_lock in zypperpkg.py in favor of unhold.\n  Remove add_lock in zypperpkg.py in favor of hold. (#61694)\n- Removed support for old-style Windows Group Policy names\n  Recommended policy names will be displayed in comments (#61696)\n- Remove the feature flag feature.enable_slsvars_fixes and enable the fixes for `sls_path`, `tpl_file`, and `tpldir` by default.\n  Enabling this behavior by default will fix the following:\n    - tpldir: If your directory name and your SLS file name are the same tpldir used to return a ., now it returns the correct directory name.\n    - slspath,slsdotpath,slscolonpath,sls_path: If an init.sls file is accessed by its explicit name path.to.init instead of path.to, init shows up as a directory for in various sls context parameters, now it will only show as a file.\n    - tplfile: When using tplfile in a SLS file in the root directory of file roots it returns empty. Now it returns the filename. (#61697)\n- Remove SaltMessageServer.shutdown in favor of close.\n  Remove LoadBalancerWorker.stop in favor of close. (#61698)\n- Removed the PyObjC dependency.\n\n  This addresses problems with building a one dir build for macOS.\n  It became problematic because depending on the macOS version, it pulls different dependencies, and we would either have to build a macos onedir for each macOS supported release, or ship a crippled onedir(because it would be tied to the macOS version where the onedir was built).\n  Since it's currently not being used, it's removed. (#62432)\n\n\n### Deprecated\n\n- In etcd_util, the recursive kwarg in the read and delete methods has been deprecated in favor of recurse for both client versions.\n  In etcd_util, the index kwarg in the watch method has been deprecated in favor of start_revision for both client versions.\n  In etcd_util, the waitIndex kwarg in the read method has been deprecated in favor of start_revision for both client versions.\n  The etcd API v2 implementation has been deprecated in favor of etcd API v3. (#60325)\n- Deprecated transport kwarg inside salt.utils.event.get_event (#61275)\n- Deprecated netmiko_conn and pyeapi_conn in napalm_mod.py as these function should not be called from the CLI (#61566)\n- Deprecate all Azure cloud modules (#62183)\n- Deprecated ``defaults`` and ``preserve_context`` for ``salt.utils.functools.namespaced_function``.\n  Additionally, the behavior when ``preserve_namespace=True`` was passed is now the default in order not to require duplicating imports on the modules that are namespacing functions. (#62272)\n- Deprecated the cassandra module in favor of the cassandra_cql module/returner. (#62327)\n\n\n### Changed\n\n- alternatives: Do not access /var/lib/dpkg/alternatives directly (#58745)\n- Enhance logging when there are errors at loading beacons (#60402)\n- Updated mysql cache module to also store updated timestamp, making it consistent with default cache module. Users of mysql cache should ensure database size before updating, as ALTER TABLE will add the timestamp column. (#61081)\n- Changed linux_shadow to test success of commands using cmd.retcode instead of cmd.run (#61932)\n- `zabbix.user_get` returns full user info with groups and medias\n  `zabbix.user_addmedia` returns error for Zabbix 4.0+ due to `user.addmedia` method removal\n  `zabbix.user_deletemedia` returns error for Zabbix 4.0+ due to `user.deletemedia` method removal (#62012)\n- \"Sign before ending the testrun in x509.create_certificate\" (#62100)\n\n\n### Fixed\n\n- Fix salt-ssh using sudo with a password (#8882)\n- Fix SSH password regex to not search for content after password:. (#25721)\n- Addressing a few issues when having keep_symlinks set to True with file.recurse.  Also allow symlinks that are outside the salt fileserver root to be discoverable as symlinks when fileserver_followsymlinks is set to False. (#29562)\n- serialize to JSON only non string objects. (#35215)\n- Fix archive.extracted doesn't set user/group ownership correctly (#38605)\n- Make sys.argspec work on functions with annotations (#48735)\n- Fixed pdbedit.list_users with Samba 4.8 (#49648)\n- Fixes a scenario where ipv6 is enabled but the master is configured as an ipv4 IP address. (#49835)\n- Ensure that NOTIFY_SOCKET is not passed to child processes created with cmdmod unless it's set explicitly for such call. (#50851)\n- remove escaping of dbname in mysql.alter_db function. (#51559)\n- Fix runit module failing to find service if it is not symlinked. (#52759)\n- Changed manage.versions to report minions offline if minion call fails. (#53513)\n- Fixed events stream from /events endpoint not halting when auth token has expired. (#53742)\n- Fixed user.present which was breaking when updating workphone,homephone, fullname and \"other\" fields in case int was passed instead of string (#53961)\n- Fix error in webutil state module when attempting to grep a file that does not exist. (#53977)\n- Fixed ability to modify the \"Audit: Force audit policy subcategory settings...\" policy (#54301)\n- Fix timeout handling in netapi/saltnado. (#55394)\n- Fixing REST auth so that we actually support using ACLs from the REST server like we said in the documentation. (#55654)\n- Salt now correctly handles macOS after Py3.8 where python defaults to spawn instead of fork. (#55847)\n- Factor out sum and sorting of permissions into separate functions.\n  Additionally, the same logic was applied to the rest_cherrypy netapi (#56495)\n- Display packages that are marked NoRemove in pkg.list_pkgs for Windows platforms (#56864)\n- Attempt to fix 56957 by detecting the broken recusion and stopping it. (#56957)\n- Fixed bytes vs. text issue when using sqlite for sdb backend. (#57133)\n- Ensure test is added to opts when using the state module with salt-ssh. (#57144)\n- Fixed RuntimeError OrderedDict mutated in network.managed for Debian systems. (#57721)\n- Improved the multiprocessing classes to better handle spawning platforms (#57742)\n- Config options are enforced according to config type (#57873)\n- fixed 57992 fix multi item kv v2 items read. (#57992)\n- Fixed thread leak during FQDN lookup when DNS entries had malformed PTR records, or other similar issues. (#58141)\n- Remove unnecessary dot in template that cause the bridge interface to fail on debian. Fixes #58195 (#58195)\n- update salt.module.schedule to check the job_args and job_kwargs for valid formatting. (#58329)\n- Allowe use of `roster` in salt.function state when using the SSH client. (#58662)\n- Detect new and legacy styles of calling module.run and support them both. (#58763)\n- Clean repo uri before checking if it's present, avoiding ghost change. (#58807)\n- Fix error \"'__opts__' is not defined\" when using the boto v2 modules (#58934)\n- hgfs: fix bytes vs str issues within hgfs. (#58963)\n- Fixes salt-ssh error when targetting IPs or hostnames directly. (#59033)\n- Allow for multiple configuration entries with keyword strict_config=False on yum-based systems (#59090)\n- Fixed error when running legacy code in winrepo.update_git_repos (#59101)\n- Clarify the persist argument in the scheduler module. Adding code in the list function to indicate if the schedule job is saved or not. (#59102)\n- Swap ret[\"retcode\"] for ret.get(\"retcode\") in the event that there is no retcode, eg. when a function is not passed with a module. (#59331)\n- Fix race condition when caching vault tokens (#59361)\n- The ssh module now accepts all ssh public key types as of openssh server version 8.7. (#59429)\n- Set default transport and port settings for Napalm NXOS, if not set. (#59448)\n- Use __salt_system_encoding__ when retrieving keystore certificate SHA1 str (#59503)\n- Fix error being thrown on empty flags list given to file.replace (#59554)\n- Update url for ez_setup.py script in virtualenv_mod.py (#59604)\n- Changed yumpkg module to normalize versions to strings when they were ambiguously floats (example version=3005.0). (#59705)\n- Fix pillar_roots.write on subdirectories broken after CVE-2021-25282 patch. (#59935)\n- Improved performance of zfs.filesystem_present and zfs.volume_present.  When\n  applying these states, only query specified ZFS properties rather than all\n  properties. (#59970)\n- Fixed highstate outputter not displaying with salt.function in orchestration when module returns a dictionary. (#60029)\n- Update docs where python-dateutil is required for schedule. (#60070)\n- Send un-parsed username to LookupAccountName function (#60076)\n- Fix ability to set propagation on a folder to \"this_folder_only\" (#60103)\n- Fix name attribute access error in spm. (#60106)\n- Fix zeromq stream.send exception message (#60228)\n- Exit gracefully on ctrl+c. (#60242)\n- Corrected import statement for redis_cache in cluster mode. (#60272)\n- loader: Fix loading grains with annotations (#60285)\n- fix docker_network.present when com.docker.network.bridge.name is being used as the unixes can not have a bridge of the same name (#60316)\n- Fix exception in yumpkg.remove for not installed package on calling pkg.remove or pkg.removed (#60356)\n- Batch runs now return proper retcodes in a tuple of the form (result, retcode) (#60361)\n- Fixed issue with ansible roster __virtual__ when ansible is not installed. (#60370)\n- Fixed error being thrown when None was passed as src/defaults or dest to defaults.update and defaults.merge (#60431)\n- Allow for additional options for xmit hash policy in mode 4 NIC bonding on Redhat (#60583)\n- Properly detect VMware grains on Windows Server 2019+ (#60593)\n- Allow for minion failure to respond to job sent in batch mode (#60724)\n- The mac assistive execution module no longer shells out to change the database. (#60819)\n- Fix regression in win_timezone.get_zone which failed to resolve specific timezones that begin or end with d/s/t/o/f/_ characters (#60829)\n- The TCP transport resets it's unpacker on stream disconnects (#60831)\n- Moving the call to the validate function earlier to ensure that beacons are in the right format before we attempt to do anything to the configuration.  Adding a generic validation to ensure the beacon configuration is in the wrong format when a validation function does not exist. (#60838)\n- Update the mac installer welcome and conclusion page, add docs for the salt-config tool (#60858)\n- Fixed external node classifier not callable due to wrong parameter (#60872)\n- Adjust Debian/Ubuntu package use of name 'ifenslave-2.6' to 'ifenslave' (#60876)\n- Clear and update the Pillar Cache when running saltutil.refresh_pillar. This only affects users\n  that have `pillar_cache` set to True. If you do not want to clear the cache you can pass the kwarg\n  `clean_cache=False` to `saltutil.refresh_pillar`. (#60897)\n- Handle the situation when apt repo lines have or do not have trailing slashes properly. (#60907)\n- Fixed Python 2 syntax for Python 3, allow for view objects returned by dictionary keys() function (#60909)\n- Fix REST CherryPY append the default permissions every request (#60955)\n- Do not consider \"skipped\" targets as failed for \"ansible.playbooks\" states (#60983)\n- Fix behavior for internal \"_netlink_tool_remote_on\" to filter results based on requested end (#61017)\n- schedule.job_status module: Convert datetime objects into formatted strings (#61043)\n- virt: don't crash if console doesn't have service or type attribute (#61054)\n- Fixed conflict between importlib_metada from Salt and importlib.metadata from Python 3.10 (#61062)\n- sys.argspec now works with pillar.get, vault.read_secret, and vault.list_secrets (#61084)\n- Set virtual grain on FreeBSD EC2 instances (#61094)\n- Fixed v3004 windows minion failing to open log file at C:\\ProgramData\\Salt Project\\Salt\\var\\log\\salt\\minion (#61113)\n- Correct returned result to False when an error exception occurs for pip.installed (#61117)\n- fixed extend being too strict and wanting the system_type to exist when it is only needed for requisites. (#61121)\n- Fixed bug where deserialization in script engine would throw an error after all output was read. (#61124)\n- Adding missing import for salt.utils.beacons into beacons that were updated to use it. (#61135)\n- added exception catch to salt.utils.vt.terminal.isalive(). (#61160)\n- Re-factor transport to make them more plug-able (#61161)\n- Remove max zeromq pinned version due to issues on FreeBSD (#61163)\n- Fixing deltaproxy code to handle the situation where the control proxy is configured to control a proxy minion whose pillar data could not be loaded. (#61172)\n- Prevent get_tops from performing a Set operation on a List (#61176)\n- Make \"state.highstate\" to acts on concurrent flag.\n  Simplify \"transactional_update\" module to not use SSH wrapper and allow more flexible execution (#61188)\n- Fix a failure with salt.utils.vault.make_request when namespace is not defined in the connection. (#61191)\n- Fix race condition in `salt.utils.verify.verify_env` and ignore directories starting with dot (#61192)\n- LGPO: Search for policies in a case-sensitive manner first, then fall back to non case-sensitive names (#61198)\n- Fixed state includes in dynamic environments (#61200)\n- Minimize the number of network connections minions to the master (#61247)\n- Fix salt-call event.event with pillar or grains (#61252)\n- Fixed failing dcs.compile_config where a successful compile errored with `AttributeError: 'list' object has no attribute 'get'`. (#61261)\n- Make the salt.utils.win_dacl.get_name() function include the \"NT Security\" prefix for Virtual Accounts. Virtual Accounts can only be added with the fully qualified name. (#61271)\n- Fixed tracebacks and print helpful error message when proxy_return = True but no platform or primary_ip set in NetBox pillar. (#61277)\n- Ensure opts is included in pack for minion_mods and config loads opts from the named_context. (#61297)\n- Added prefix length info for IPv6 addresses in Windows (#61316)\n- Handle MariaDB 10.5+ SLAVE MONITOR grant (#61331)\n- Fix secondary ip addresses being added to ip4_interfaces and ip6_interfaces at the same time (#61370)\n- Do not block the deltaproxy startup.  Wrap the call to the individual proxy initialization functions in a try...except, catching the exception, logging an error and moving onto the next proxy minion. (#61377)\n- show_instance of hetzner cloud provider should enforce an action like the other ones (#61392)\n- Fix Hetzner Cloud config loading mechanism (#61399)\n- Sets correctly the lvm grain even when lvm's command execution outputs a WARNING (#61412)\n- Use net instead of sc in salt cloud when restarting the salt service (#61413)\n- Fix use_etag support in fileclient by removing case sensitivity of expected header (#61440)\n- Expand environment variables in the root_dir registry key (#61445)\n- Use salt.utils.path.readlink everywhere instead of os.readlink (#61458)\n- Fix state_aggregate minion option not respected (#61478)\n- Fixed wua.installed and wua.uptodate to return all changes, failures, and supersedences (#61479)\n- When running with test=True and there are no changes, don't show that there are changes. (#61483)\n- Fix issue with certutil when there's a space in the path to the certificate (#61494)\n- Fix cmdmod not respecting config for saltenv (#61507)\n- Convert Py 2'isms to Python 3, and add tests for set_filesystems on AIX (#61509)\n- Fix tracebacks caused by missing block device type and wrong mode used for gzip.open while calling inspector.export (#61530)\n- win_wua: Titles no longer limited to 40 characters (#61533)\n- Fixed error when using network module on RHEL 8 due to the name of the service changing from \"network\" to \"NetworkManager\". (#61538)\n- Allow symlink to be created even if source is missing on Windows (#61544)\n- Print jinja error context on `UndefinedError`.  Previously `jinja2.exceptions.UndefinedError` resulted in a `SaltRenderError` without source file context, unlike all of the other Jinja exceptions handled in `salt/utils/templates.py`. (#61553)\n- Fix uptime on AIX systems when less than 24 hours (#61557)\n- Fix issue with state.show_state_usage when a saltenv is not referenced in any topfile (#61614)\n- Making the retry state system feature available when parallel is set to True. (#61630)\n- modules/aptpkg.SourceEntry: fix parsing lines with arbitrary comments in case HAS_APT=False (#61632)\n- Fix file.comment incorrectly reports changes in test mode (#61662)\n- Fix improper master caching of file listing in multiple dynamic environments (#61738)\n- When configured beacons are empty write an empty beacon configuration file. (#61741)\n- Fix file.replace updating mtime with no changes (#61743)\n- Fixed etcd_return being out of sync with the underlying etcd_util. (#61756)\n- Fixing items, values, and keys functions in the data module. (#61812)\n- Ensure that `salt://` URIs never contain backslashes, converting them to forward slashes instead.  A specific situation to handle is caching files on Windows minions, where Jinja relative imports introduce a backslash into the path. (#61829)\n- Do not raise a UnicodeDecodeError when pillar cache cannot decode binary data. (#61836)\n- Don't rely on ``importlib.metadata``, even on Py3.10, use ``importlib_metadata`` instead. (#61839)\n- Fix the reporting of errors for file.directory in test mode (#61846)\n- Update Markup and contextfunction imports for jinja versions >=3.1. (#61848)\n- Update states.chef for version 16.x and 17.x Chef Infra Client output. (#61891)\n- Fixed some whitespace and ``pathlib.Path`` issues when not using the sytem ``aptsources`` package. (#61936)\n- fixed error when using backslash literal in file.replace (#61944)\n- Fix an issue where under spawning platforms, one could exhaust the available multiprocessing semaphores. (#61945)\n- Fix salt-cloud sync_after_install functionality (#61946)\n- Ensure that `common_prefix` matching only occurs if a directory name is identified (in the `archive.list` execution module function, which affects the `archive.extracted` state). (#61968)\n- When states are running in parallel, ensure that the total run time produced by the highstate outputter takes that into account. (#61999)\n- Temporary logging is now shutdown when logging has been configured. (#62005)\n- modules/lxd.FilesManager: fix memory leak through pylxd.modules.container.Container.FilesManager (#62006)\n- utils/jinja.SaltCacheLoader: fix leaking SaltCacheLoader through atexit.register (#62007)\n- Fixed errors on calling `zabbix_user.admin_password_present` state, due to changed error message in Zabbix 6.0\n  Fixed `zabbix.host_update` not mapping group ids list to list of dicts in format `[{\"groupid\": groupid}, ...]`\n  Fixed `zabbix.user_update` not mapping usergroup id list to list of dicts in format `[{\"usrgrpid\": usrgrpid}, ...]` (#62012)\n- utils/yamlloader and yamlloader_old: fix leaking DuplicateKeyWarning through a warnings module (#62021)\n- Fix cache checking for Jinja templates (#62042)\n- Fixed salt.states.file.managed() for follow_symlinks=True and test=True (#62066)\n- Stop trigering the `GLIBC race condition <https://sourceware.org/bugzilla/show_bug.cgi?id=19329>`_ when parallelizing the resolution of the fqnds. (#62071)\n- Fix useradd functions hard-coded relative command name (#62087)\n- Fix #62092: Catch zmq.error.ZMQError to set HWM for zmq >= 3.\n\n  Run ``git show 0be0941`` for more info. (#62092)\n- Allow emitatstartup to work when delay option is setup. (#62095)\n- Fix broken relative jinja includes in local mode bug introduced in #62043 (#62117)\n- Fix broken file.comment functionality introduced in #62045 (#62121)\n- Fixed an incompatibility preventing salt-cloud from deploying VMs on Proxmox VE 7 (#62154)\n- Fix sysctl functions hard-coded relative command name (#62164)\n- All of Salt's loaders now accept ``loaded_base_name`` as a keyword argument, allowing different namespacing the loaded modules. (#62186)\n- Only functions defined on the modules being loaded will be added to the lazy loader, functions imported from other modules, unless they are properly namespaced, are not included. (#62190)\n- Fixes issue in postgresql privileges detection: privileges on views were never retrieved and always recreated. (#57690)\n- Fix service.enabled error for unavailable service in test mode (#62258)\n- Fix variable reuse causing requisite_in problems (#62264)\n- Adding -G option to pkgdd cmd_prefix list when current_zone_only is True. (#62206)\n- Don't expect ``lsof`` to be installed when trying check which minions are connected. (#62303)\n- Added a pyinstaller hook that traverses the python used on the tiamat package to add all possible modules as hidden imports. (#62362)\n- Fix use of random shuffle and sample functions as Jinja filters (#62372)\n- All of the requirements provided in the requirements files are now included. The job of evaluating platform markers is not Salt's it's pip's. (#62392)\n- Update all platforms to use pycparser 2.21 or greater for Py 3.9 or higher, fixes fips fault with openssl v3.x (#62400)\n- Due to changes in the Netmiko library for the exception paths, need to check the version of Netmiko python library and then import the exceptions from different locations depending on the result. (#62405)\n- Fixed urlparse typo in rpmbuild_pkgbuild.py (#62442)\n- Fixing changes dict in pkg state to be consistent when installing and test=True. (#60995)\n- Use fire_event_async when expecting a coroutine (#62453)\n- Fixes import error under windows. (#62459)\n- account for revision number in formulas to account for difference between bottle and formula (#62466)\n- Fixed stacktrace on Windows when running pkg.list_pkgs (#62479)\n- Update sanitizing masking for Salt SSH to include additional password like strings. (#62483)\n- Fixes an issue where the minion could not connect to a master after 2 failed attempts (#62489)\n\n\nAdded\n-----\n\n- Added ability to request VPC peering connections in different AWS regions (boto_vpc). (#50394)\n- Added event return capability to Splunk returner (#50815)\n- Added allow downgrades support to apt upgrade (#52977)\n- added new grain for metadata to handle googles metadata differences (#53223)\n- Added win_shortcut execution and state module that does not prepend the current working directory to paths. Use shortcut.create and shortcut.present instead of file.shortcut. (#53706)\n- Add __env__ substitution inside file and pillar root paths (#55747)\n- Added support cpu hot add/remove, memory hot add, and nested virtualization to VMware salt-cloud driver. (#56144)\n- Add a consul state module with acl_present and acl_absent functions. (#58101)\n- Added restconf module/states/proxy code for network device automation (#59006)\n- Adds the ability to get version information from a file on Windows systems (#59702)\n- Add aptkey=False kwarg option to the aptpkg.py module and pkgrepo state. Apt-key is on the path to be deprecated. This will allow users to not use apt-key to manage the repo keys. It will set aptkey=False automatically if it does not detect apt-key exists on the machine. (#59785)\n- Added \"Instant Clone\" feature in the existing VMware Cloud module (#60004)\n- Added support for etcd API v3 (#60325)\n- Added `pkg.held` and `pkg.unheld` state functions for Zypper, YUM/DNF and APT. Improved `zypperpkg.hold` and `zypperpkg.unhold` functions. (#60432)\n- Added suse_ip module allowing to manage network interfaces on SUSE based Linux systems (#60702)\n- Support querying for JSON data in SQL external pillar (#60905)\n- Added support for yum and dnf on AIX (#60912)\n- Added percent success/failure of state runs in highstate summary output via new state_output_pct option (#60990)\n- Add support for retrieve IP-address from qemu agent by Salt-cloud on Proxmox (#61146)\n- Added new shortcut execution and state module to better handle UNC shortcuts and to test more thoroughly (#61170)\n- added yamllint utils module and yaml execution modules (#61182)\n- Add \"--no-return-event\" option to salt-call to prevent sending return event back to master. (#61188)\n- Add Etag support for file.managed web sources (#61270)\n- Adding the ability to add, delete, purge, and modify Salt scheduler jobs when the Salt minion is not running. (#61324)\n- Added a force option to file.symlink to overwrite an existing symlink with the same name (#61326)\n- `gpg_decrypt_must_succeed` config to prevent gpg renderer from failing silently (#61418)\n- Do not load a private copy of `__grains__` and `__salt__` for the sentry log handler if it is disabled. (#61484)\n- Add Jinja filters for itertools functions, flatten, and a state template workflow (#61502)\n- Add feature to allow roll-up of duplicate IDs with different names in highstate output (#61549)\n- Allow cp functions to derive saltenv from config if not explicitly set (#61562)\n- Multiprocessing logging no longer uses multiprocessing queues which penalized performance.\n\n  Instead, each new process configures the terminal and file logging, and also any external logging handlers configured. (#61629)\n- Add a function to the freezer module for comparison of packages and repos in two frozen states (#61682)\n- Add grains_refresh_pre_exec option to allow grains to be refreshed before any operation (#61708)\n- Add possibility to pass extra parameters to salt-ssh pre flight script with `ssh_pre_flight_args` (#61715)\n- Add Etag support for archive.extracted web sources (#61763)\n- Add regex exclusions, full path matching, symlink following, and mtime/ctime comparison to file.tidied (#61823)\n- Add better handling for unit abbreviations and large values to salt.utils.stringutils.human_to_bytes (#61831)\n- Provide PyInstaller hooks that provide some runtime adjustments when Salt is running from a Tiamat(PyInstaller) bundled package. (#61864)\n- Add configurable tiamat pip pypath location (#61937)\n- Add CNAME record support to the dig exec module (#61991)\n- Added support for changed user object in Zabbix 5.4+\n  Added compatibility with Zabbix 4.0+ for `zabbix.user_getmedia` method\n  Added support for setting medias in `zabbix.user_update` for Zabbix 3.4+ (#62012)\n- Add ignore_missing parameter to file.comment state (#62044)\n- General improvements on the \"ansiblegate\" module:\n  * Add \"ansible.targets\" method to gather Ansible inventory\n  * Add \"ansible.discover_playbooks\" method to help collecting playbooks\n  * Fix crash when running Ansible playbooks if ansible-playbook CLI output is not the expected JSON.\n  * Fix issues when processing inventory and there are groups with no members.\n  * Allow new types of targets for Ansible roster (#60056)\n- Add sample and shuffle functions from random (#62225)\n- Add \"<tiamat> python\" subcommand to allow execution or arbitrary scripts via bundled Python runtime (#62381)\n\n\n## Salt 3004.2 (2022-05-12)\n\n### Fixed\n\n- Expand environment variables in the root_dir registry key (#61445)\n- Update Markup and contextfunction imports for jinja versions >=3.1. (#61848)\n- Fix bug in tcp transport (#61865)\n- Make sure the correct key is being used when verifying or validating communication, eg. when a Salt syndic is involved use syndic_master.pub and when a Salt minion is involved use minion_master.pub. (#61868)\n\n\n### Security\n\n- Fixed PAM auth to reject auth attempt if user account is locked. (cve-2022-22967)\n\n\n## Salt 3004.1 (2022-02-16)\n\n### Security\n\n- Sign authentication replies to prevent MiTM (cve-2022-22935)\n- Prevent job and fileserver replays (cve-2022-22936)\n- Sign pillar data to prevent MiTM attacks. (cve-2202-22934)\n- Fixed targeting bug, especially visible when using syndic and user auth. (CVE-2022-22941) (#60413)\n- Fix denial of service in junos ifconfig output parsing.\n\n\n## Salt 3004 (2021-10-11)\n\n### Removed\n\n- Removed the deprecated glance state and execution module in favor of the glance_image\n  state module and the glanceng execution module. (#59079)\n- Removed support for Ubuntu 16.04 (#59869)\n- Removed the deprecated support for ``gid_from_name`` from the ``user`` state module (#60565)\n- Removed deprecated virt.migrate_non_shared, virt.migrate_non_shared_inc, ssh from virt.migrate, and python2/python3 args from salt.utils.thin.gen_min and .gen_thin (#60893)\n\n\n### Deprecated\n\n- The _ext_nodes alias to the master_tops function was added back in 3004 to maintain backwards compatibility with older supported versions. This alias will now be removed in 3006. This change will break Master and Minion communication compatibility with Salt minions running versions 3003 and lower. (#60980)\n- utils/boto3_elasticsearch is no longer needed (#59882)\n- Changed \"manufacture\" grain to \"manufacturer\" for Solaris on SPARC to unify the name across all platforms. The old \"manufacture\" grain is now deprecated and will be removed in Sulfur (#60511)\n- Deprecate `salt.payload.Serial` (#60953)\n\n\n### Changed\n\n- Changed nginx.version to return version without `nginx/` prefix. (#57111)\n- Updated Slack webhook returner to support event returns on salt-master (#57182)\n- Parsing Epoch out of version during pkg remove, since yum can't handle that in all of the cases. (#57881)\n- Add extra onfail req check in the state engine to allow onfail to be used with onchanges and other reqs in the same state (#59026)\n- Changed the default character set used by `utils.pycrypto.secure_password()` to include symbols and implemented arguments to control the used character set. (#59486)\n\n\n### Fixed\n\n- Set default 'bootstrap_delay' to 0 (#61005)\n- Fixed issue where multiple args to netapi were not preserved (#59182)\n- Handle all repo formats in the aptpkg module. (#60971)\n- Do not break master_tops for minion with version lower to 3003\n  This is going to be removed in Salt 3006 (Sulfur) (#60980)\n- Reverting changes in PR #60150. Updating installed and removed functions to return changes when test=True. (#60995)\n- Handle signals and properly exit, instead of raising exceptions. (#60391, #60963)\n- Redirect imports of ``salt.ext.six`` to ``six`` (#60966)\n- Surface strerror to user state instead of returning false (#20789)\n- Fixing _get_envs() to preserve the order of pillar_roots. _get_envs() returned pillar_roots in a non-deterministic order. (#24501)\n- Fixes salt-cloud `KeyError` that occurs when there exists any subnets with no tags when profiles use `subnetname` (#44330)\n- Fixes postgres_local_cache by removing duplicate unicode encoding. (#46942)\n- Fixing the state aggregation system to properly handle requisities.\n  Fixing pkg state to exclude packages from aggregation if the hold attribute is in the state. (#47628)\n- fix issue that allows case sensitive files to be carried through (#47969)\n- Allow GCE Salt Cloud to use previously created IP Addresses. (#48947)\n- Fixing rabbitmq.list_user_permissions to ensure we are returning a permission list with three elements even when some values are empty. (#49115)\n- Periodically restart the fileserver update process to avoid leaks (#50313)\n- Fix default value to dictionary for mine_function (#50695)\n- Allow user.present to work on Alpine Linux by fixing linux_shadow.info (#50979)\n- Ensure that zypper is called with only one --no-refresh parameter (#51382)\n- Fixed fileclient cachedir path switching from master to minion due to incorrect MasterMinion configuration (#52288)\n- Fixed the container detection inside virtual machines (#53868)\n- Fix invalid dnf command when obsoletes=True in pkg.update function (#54224)\n- Jinja renderer resolves wrong relative paths when importing subdirectories (#55159)\n- Fixed bug #55262 where `salt.modules.iptables` would call `cmd.run` and receive and interpret interspersed `stdout` and `stderr` output from subprocesses. (#55262)\n- Updated pcs support to handle auth and setup for new syntax supporting version 0.10 (#56924)\n- Reinstate ignore_cidr option in salt-cloud openstack driver (#57127)\n- Fix for network.wolmatch runner displaying 'invalid arguments' error with valid arguments (#57473)\n- Fixed bug 57490, which prevented package installation for Open Euler and Issabel PBX. Both Open Euler and Issabel PBX use Yum for package management, added them to yumpkg.py. (#57490)\n- Better handling of bad RSA public keys from minions (#57733)\n- Fixing various functions in the file state module that use user.info to get group information, certain hosts particularly proxy minions do not have the user.info function available. (#57786)\n- Do not monkey patch yaml loaders: Prevent breaking Ansible filter modules (#57995)\n- Fix --subset command line option, and support old 'sub' parameter name in cmd_subset for backwards compatibility (#58600)\n- When calling salt.utils.http.query with a HEAD method to check for the existence of a source ensure that decode_body is False, so the file is not downloaded into memory when we don't need the contents. (#58881)\n- Update the runas user on freebsd for postgres versions >9.5, since freebsd will be removing the package on 2021-05-13. (#58915)\n- Fix pip module linked requirements file parsing (#58944)\n- Fix incorrect hostname quoting in /etc/sysconfig/networking on Red Hat family OS. (#58956)\n- Fix Xen DomU virt detection in grains for long running machines. (#59001)\n- add encoding when windows encoding is not defaulting to utf8 (#59063)\n- Fix \"aptpkg.normalize_name\" in case the arch is \"all\" for DEB packages (#59269)\n- Astra Linux now considered a Debian family distro (#59332)\n- Reworking the mysql module and state so that passwordless does not try to use unix_socket until unix_socket is set to True. (#59337)\n- Fixed the zabbix module to read the connection data from pillar. (#59338)\n- Fix crash on \"yumpkg\" execution module when unexpected output at listing patches (#59354)\n- Remove return that had left over py2 code from win_path.py (#59396)\n- Don't create spicevmc channel for Xen virtual machines (#59416)\n- Fix win_servermanager.install so it will reboot when restart=True is passed (#59424)\n- Clear the cached network interface grains during minion init and grains refresh (#59490)\n- Normalized grain output for LXC containers (#59573)\n- Fix typo in 'salt/states/cmd.py' to use \"comment\" instead of \"commnd\". (#59581)\n- add aliyun linux support and set alinux as redhat family (#59686)\n- Don't fail updating network without netmask ip attribute (#59692)\n- Fixed using reserved keyword 'set' as function argument in modules/ipset.py (#59714)\n- Return empty changes when nothing has been done in virt.defined and virt.running states (#59739)\n- Import salt.utils.azurearm instead of using __utils__ from loader in azure cloud.  This fixes an issue where __utils__ would become unavailable when we are using the ThreadPool in azurearm. (#59744)\n- Fix an issue with the LGPO module when the gpt.ini file contains unix style line\n  endings (/n). This was happening on a Windows Server 2019 instance created in\n  Google Cloud Platform (GCP). (#59769)\n- The ``ansiblegate`` module now correctly passes keyword arguments to Ansible module calls (#59792)\n- Make sure cmdmod._log_cmd handles tuples properly (#59793)\n- Updating the add, delete, modify, enable_job, and disable_job functions to return appropriate changes. (#59844)\n- Apply pre-commit changes to entire codebase. (#59847)\n- Fix Hetzner cloud driver does not recognize machines when rolling out a map (#59864)\n- Update Windows build deps & DLLs, Use Python 3.8, libsodium.dll 1.0.18, OpenSSL dlls to 1.1.1k (#59865)\n- Salt api verifies proper log file path when providing '--log-file' from the cli (#59880)\n- Detect Mendel Linux as Debian (#59892)\n- Fixed compilation of requisite_ins by also checking state type along with name/id (#59922)\n- Fix xen._get_vm() to not break silently when a VM and a template on XenServer have the same name. (#59932)\n- Added missing space for nftables.build_rule when using saddr or daddr. (#59958)\n- Add back support to load old entrypoints by iterating instead of type checking (#59961)\n- Fixed interrupting salt-call in a pdb session. (#59966)\n- Validate we can import map files in states (#60003)\n- Update alter_db to return True or False depending on the success of failure of the alter.  Update grant_exists to only use the full list of available privileges when the grant is on the global level, eg. datbase is \"*.*\". (#60031)\n- Fixed firewalld.list_zones when any \"rich rules\" is set (#60033)\n- IPCMessageSubscriber objects expose their connect method as a corotine so they\n  can be wrapped by SyncWrapper. (#60049)\n- Allow for Napalm dependency netmiko_mod to load correctly when used by Napalm with Cisco IOS (#60061)\n- Ensure proper access to the created temporary file when ``runas`` is passed to ``cmd.exec_code_all`` (#60072)\n- Fixed an IndexError in pkgng.latest_version when querying an unknown package. (#60105)\n- Fixed pkgng.latest_version when querying by origin (e.g. \"shells/bash\"). (#60108)\n- Gracefuly handle errors in virt.vm_info (#60132)\n- The LGPO Module now uses \"Success and Failure\" for normal audit settings and advanced audit settings (#60142)\n- Fixing tests/pytests/unit/utils/scheduler/test_eval.py tests so the sleep happens before the status, so the job is given time before we check it. (#60149)\n- Update the external ipaddress to the latest 3.9.5 version which has some security fixes. Updating the compat.p to use the vendored version if the python version is below 3.9.5 and only run the test_ipaddress.py tests if below 3.9.5. (#60168)\n- Fixed ValueError exception in state.show_state_usage (#60179)\n- Redact the username and password when something goes wrong when using an HTTP source and we raise an exception. (#60203)\n- Inject the Ansible functions into Salt's ``ansiblegate`` module which was broken on the 3001 release. (#60207)\n- Figure out the available Python version inside containers when executing \"dockermod.call\" function (#60229)\n- Handle IPv6 route types such as anycast, multicast, etc when returned from IPv6 route table queries (#60232)\n- Move the commonly used code that converts a list to a dictionary into salt.utils.beacons.  Fixing inotify beacon close function to ensure the configuration is converted from the provided list format into a dictionary. (#60241)\n- Set name of engine subprocesses (#60259)\n- Properly discover block devices path in virt.running (#60296)\n- Avoid exceptions when handling some exception cases. (#60330)\n- Fixed faulty error message in npm.installed state. (#60339)\n- Port option reinstated for Junos Proxy (accidentally removed) (#60340)\n- Now hosts.rm_host can remove entries from /etc/hosts when this file have inline comments. (#60351)\n- Fixes issue where the full same name is not used when making rights assignments with group policy (#60357)\n- Fixed zabbix_host.present to not overwrite inventory_mode to \"manual\" every time inventory is updated. (#60382)\n- Allowed zabbix_host.present to do partial updates of inventory, also don't erase everything if inventory is missing in state definition. (#60389)\n- Fixing the mysql_cache module to handle binary inserting binary data into the database. Initially adding tests. (#60398)\n- Fixed host_inventory_get to not throw an exception if host does not exist (#60418)\n- Check for /dev/kvm to detect KVM hypervisor. (#60419)\n- Fixing file.accumulated handling of dependencies when the state_id is used instead of {function: state_id} format. (#60426)\n- Adding the ability for yumpkg.remove to handle package names with widdcards. (#60461)\n- Pass emulator path to get guest capabilities from libvirt (#60491)\n- virt.get_disks: properly report qemu-img errors (#60512)\n- Make all platforms have psutils. This prevents a minion from starting if an instance is all ready running. (#60523)\n- Ignore configuration for 'enable_fqdns_grains' for AIX, Solaris and Juniper, assume False (#60529)\n- Remove check for TIAMAT_BUILD enforcing USE_STATIC_REQUIREMENTS, this is now controlled by Tiamat v7.10.1 and above (#60559)\n- Have the beacon call run through a try...except, catching any errors, logging and firing an event that includes the error.\n  Fixing the swapusage beacon to ensure value is a string before we attempt to filter out the %. (#60585)\n- Refactor loader into logical sub-modules (#60594)\n- Clean up references to ZMQDefaultLoop (#60617)\n- change dep warn from Silicon to Phosphorus for the cmd,show,system_info and add_config functions in the nxos module. (#60669)\n- Fix bug 60602 where the hetzner cloud provider isn't recognized correctly (#60675)\n- Fix the ``pwd.getpwnam`` caching issue on macOS user module (#60676)\n- Fixing beacons that can include a value in their configuration that may or may not included a percentage.  We want to handle the situation where the percentage sign is not included and the value is not handled as a string. (#60684)\n- Fix RuntimeError in process manager (#60749)\n- Ensure all data that is being passed along to LDAP is in an OrderedSet and contains bytes. (#60760)\n- Update the AWS API version so VMs spun up by salt-cloud where the VPC has it enabled to assign ipv6 addresses by default, actually get ipv6 addresses assigned by default. (#60804)\n- Remove un-needed singletons from tranports (#60851)\n\n\nAdded\n-----\n\n- Add windows support for file.patch with patch.exe from git for windows optional packages (#44783)\n- Added ability to pass exclude kwarg to salt.state inside orchestrate. (#49130)\n- Added `success_stdout` and `success_stderr` arguments to `cmd.run`, to override default return code behavior. (#50597)\n- The netbox pillar now been enhanced to add support for querying virtual machines\n  (in addition to devices), as well as minion interfaces and associated IP\n  addresses. (#51490)\n- Add support for transactional systems, like openSUSE MicroOS (#58519)\n- Added namespace headers to allow use of namespace from config to communicate with Vault Enterprise namespaces (#58585)\n- boto3mod unit tests (#58713)\n- New decorators `allow_one_of()` and `require_one_of()` (#58742)\n- Added `nosync` switch to disable initial raid synchronization (#59193)\n- Expanded the documentation for the netbox pillar. (#59398)\n- Rocky Linux has been added to the RedHat os_family. (#59682)\n- Add \"poudriere -i -j jail_name\" option to list jail information for poudriere (#59831)\n- Added the grains.uuid on Windows platform (#59888)\n- Add a salt.util.platform check to detect the AArch64 64-bit extension of the ARM architecture. (#59915)\n- Adding support for Deltaproxy controlled proxy minions into Salt Open. (#60090)\n- Added functions to slsutil execution module to test if files exist in the state tree\n  Added function to slsutil execution module to search for a file by walking up the state tree (#60159)\n- Allow module_refresh to also refresh available beacons, eg. following a Python library being installed and \"refresh_modules\" being passed as an argument in a state. (#60541)\n- Add the `detect_remote_minions` and `remote_minions_port` options to allow the master to detect remote ports for connected minions. This will allow users to detect Heist-Salt minions the master is connected to over port 22 by default. (#60612)\n- Add the python rpm-vercmp library in the rpm_lowpkg.py module. (#60814)\n- Allow a user to use the aptpkg.py module without installing python-apt. (#60818)\n\n\n## Salt 3003.5 (2022-07-05)\n\n### Fixed\n\n- Update Markup and contextfunction imports for jinja versions >=3.1. (#61848)\n- Fix bug in tcp transport (#61865)\n- Make sure the correct key is being used when verifying or validating communication, eg. when a Salt syndic is involved use syndic_master.pub and when a Salt minion is involved use minion_master.pub. (#61868)\n\n\n### Security\n\n- Fixed PAM auth to reject auth attempt if user account is locked. (cve-2022-22967)\n\n\n## Salt 3003.4 (2022-02-25)\n\n### Security\n\n- Sign authentication replies to prevent MiTM (cve-2022-22935)\n- Prevent job and fileserver replays (cve-2022-22936)\n- Sign pillar data to prevent MiTM attacks. (cve-2202-22934)\n- Fixed targeting bug, especially visible when using syndic and user auth. (CVE-2022-22941) (#60413)\n- Fix denial of service in junos ifconfig output parsing.\n\n\n## Salt 3003.3 (2021-08-20)\n\n### Fixed\n\n- Fix issue introduced in https://github.com/saltstack/salt/pull/59648 (#60046)\n\n\n### Security\n\n- Verify the owner of an existing config before trusting it during install. If the owner cannot be verified, back it up and use defaults. (CVE-2021-22004)\n- Ensure that sourced file is cached using its hash name (cve-2021-21996)\n\n\n## Salt 3003.2 (2021-07-29)\n\n### Fixed\n\n- Periodically restart the fileserver update process to avoid leaks (#50313)\n- Add ssh_timeout to kwargs in deploy_script (#59901)\n- Update the external ipaddress to the latest 3.9.5 version which has some security fixes. Updating the compat.p to use the vendored version if the python version is below 3.9.5 and only run the test_ipaddress.py tests if below 3.9.5. (#60168)\n- Use the right crypto library for salt.utils.crypt.reinit_crypto (#60215)\n- Stop SSH from hanging if connection is lost. Also added args to customize grace period. (#60216)\n- Improve reliability of Terminal class (#60504)\n- Ignore configuration for 'enable_fqdns_grains' for AIX, Solaris and Juniper, assume False (#60529)\n\n\n## Salt 3003.1 (2021-06-08)\n\n### Fixed\n\n- Import salt.utils.azurearm instead of using __utils__ from loader in azure cloud.  This fixes an issue where __utils__ would become unavailable when we are using the ThreadPool in azurearm. (#59744)\n- Use contextvars library from site-packages if it is intalled. Fixes salt ssh for targets with python <=3.6 (#59942)\n\n### Fixed\n\n- Fixed race condition in batch logic. Added `listen` option to `LocalClient` to prevent event subscriber from purging cached events during batch iteration. (#56273)\n- Fixed dependencies for Amazon Linux 2 on https://repo.saltproject.io since Amazon Linux 2 now provides some of the python libraries in their repos. (#59982)\n- IPCMessageSubscriber objects expose their connect method as a coroutine so they can be wrapped by SyncWrapper. (#60049)\n- Import salt.utils.azurearm instead of using __utils__ from loader in azure cloud.  This fixes an issue where __utils__ would become unavailable when we are using the ThreadPool in azurearm. (#59744)\n- Use contextvars library from site-packages if it is intalled. Fixes salt ssh for targets with python <=3.6 (#59942)\n- Add back support to load old entrypoints by iterating instead of type checking (#59961)\n- Pass the value of the `__grains__` NamedContext to salt.pillar.get_pillar, instead of the NamedContext object itself. (#59975)\n- Fix pillar serialization in jinja templates (#60083)\n\n## Salt 3003 (2021-03-05)\n\n### Removed\n\n- Removed the deprecated glance state and execution module in favor of the glance_image\n  state module and the glanceng execution module. (#59079)\n- Removing the _ext_nodes deprecation warning and alias to the master_tops function.  This change will break compatibility with a Salt master running versions 2017.7.8 and older and Salt minions running versions 3003 and newer. (#59804)\n- removed the arg `managed_private_key` from 'salt.states.x509.certificate_managed' (#59247)\n- Drop support for python 3.5 on Windows (#59479)\n- Removed support for Ubuntu 16.04 (#59913)\n\n\n### Deprecated\n\n- Added deprecation warning for grains.get_or_set_hash (#59425)\n\n### Changed\n\n- Change `brew cask --list` to `brew list --cask` (#58381)\n- Store git sha in salt/_version.py when installing from a tag so it can be found if needed later. (#59137)\n- Changed package manager detection in yumpkg module (#59201)\n- Updating the pkg beacon to fire the events when there are upgrades to packages, but also when watched packages are installed or removed. Breaking out the logic for listing pkgs from context into a separate function to aid in testing. Updating tests to ensure context is not used when use_context option to list_pkgs is False. (#59463)\n\n\n### Fixed\n\n- When instantiating the loader grab values of grains and pillars if\n  they are NamedLoaderContext instances. (#59773)\n- Fixed installation on Apple Silicon Macs by checking $HOMEBREW_PREFIX for `libcrypto` instead of assuming /usr/local. (#59808)\n- Fix incorrect documentation for pillar_source_merging_strategy (#26396)\n- Don't iterate through cloud map errors (#34033)\n- Suppress noisy warnings when very old pyzmq is used. (#50327)\n- Fixed glusterfs version parsing for pre-4.0 (#50707)\n- Prevent traceback when trying to list reactors when none are configured. (#53334)\n- Fixed zabbix_host.present to accept all Zabbix host properties (#53838)\n- Binaries for the salt installer package for OSX are now signed and the installer\n  package is notarized (#54513)\n- Guard boto3_elasticsearch loading properly (#55848)\n- Use a capitalized string version of the value of `NodeState` instead (#56589)\n- Adding missing error case to the validation for service beacon. (#56623)\n- The GCE cloud driver only works with apache-libcloud>=2.5.0, prior versions have authentication issues (#56862)\n- zypperpkg add_lock and remove_lock examples do not work (#56922)\n- Compare bytes to bytes so we don't overwrite a correct value (#57212)\n- Fixing expand_repo_def in aptpkg module to include the architecture in the line attribute when it is passed in. (#57600)\n- When passing arguments pass them as keyword arguments so that we can be sure the right value is going where. (#58006, #58579, #59075)\n- Improve module whitelist logic for file backends (#58041)\n- Fix behavior for \"onlyif/unless\" state conditionals when multiple declarations (#58085)\n- Ensure data is a valid keyword argument for the event.wait function. (#58182)\n- Do not raise \"StreamClosedError\" traceback on the master logs but only log it (#58301)\n- Fixed issue with win_timezone when dst is turned off. This was causing the\n  minion not to start\n  Use default timezone offset in scheduler when correct timezone cannot be determined (#58379)\n- Pop!_OS 20.04 and 20.10 now support using pkg.* / aptpkg.* (#58395)\n- Restoring functionality of the textfsm module when using textfsm_path argument (#58499)\n- Invalidate file list cache when cache file has a future last modified time (#58529)\n- Fix issue with setting permissions in combination with the win_perms_reset\n  option (#58541)\n- Adds support for Powershell 7. It is specified by passing shell=\"pwsh\". Only\n  valid if Powershell 7 is installed on the system. (#58598)\n- Fixed the zabbix.host_create call on zabbix_host.present to include the\n  optional parameter visible_name. Now working as documented. (#58602)\n- Fixed some bugs to allow zabbix_host.present to update a host already\n  existent on Zabbix server:\n\n  - Added checks before \"pop\" the elements \"bulk\" and \"details\" from\n    hostinterfaces_get's response. Without that, the interface comparison\n    didn't works with Zabbix >= 5.0\n  - Fixed the \"inventory\" comparison. It failed when both current and new\n    inventory were missing.\n  - Rewrite of the update_interfaces routine to really \"update\" the\n    interfaces and not trying to delete and recreate all interfaces,\n    which almost always gives errors as interfaces with linked items\n    can't be deleted. (#58603)\n- Added the \"details\" mandatory object with the properly default values\n  when creating a SNMP hostinterface in Zabbix 5.0 (#58620)\n- Fixing an issue preventing running pillar.get against pillar values with integers as pillar keys. (#58714)\n- Adding a new option to pass client_flags to MySQL connections, for example passing the option to support multiple statements in queries. (#58718)\n- Fixed two performance bugs in the sysctl.present state.  Their impact is\n  especially great on FreeBSD machines with large amounts of RAM. (#58732)\n- Fixed an issue when pillar files are included in the `top.sls` and then later included in another pillar file. (#58736)\n- Left over py2 code was causing windows encoding to misbehave (#58749)\n- Return result=None from module.run state to indicate that changes would be made\n  Return result=False from module.run state when called with no functions (#58752)\n- Fix duplicate IP addresses in fqdn_ip4 and fqdn_ip6 grains (#58799)\n- Rename `salt.renderers.toml` to `salt.renderers.tomlmod` which fixes the import error issues as described in #58822\n  Do note that, the renderer is still called `toml`. (#58822)\n- Fixing unhold in yumpkg. Removing unnecessary code and relying on the code that handles dicts later. Adding tests when pkg.installed is called with hold=False. (#58883)\n- Converts the given \"grant\" to upper case before compare to \"ALL\".\n  This fixes a problem granting \"all privileges\" to a MySQL user. (#58933)\n- Strip trailing \"/\" from repo.uri when comparing repos in \"apktpkg.mod_repo\" (#58962)\n- When we are checking requisites, run reconcile_procs just on those requisite states not all running states. (#58976)\n- Allow the gpg module to use export_key, delete_key and create_key without a passphrase in GnuPG >= 2.1 (#58980)\n- Updated the documentation, handling and error messages for what size units are allowed by \"size\" parameter in lvm.lv_present (#58985)\n- Fixing the two failing tests when running on Photon OS. Python 3 installed on Photon OS does not support MD4 hashing, so don't load pdbedit module and skip the test_generate_nt_hash test. Default unmask for files and directories results in them having only user and group permissions so update the test_directory_max_depth test. (#58991)\n- Fixes to netmiko module and proxy module to handle situations where the device is unreachable during the initial connection phase. (#59011)\n- Correct comment when updating postrges users and groups.\n  Errors reported when removing postgres groups.\n  Partial group membership changes in postgres groups. (#59034)\n- Fixed an error when running svn.latest in test mode and using the trust_failures\n  option. (#59069)\n- Fixes to storing schedule items in pillar, when refreshing pillar only update the schedule items if something has changed. (#59104)\n- Fixed timezone module to work in Slackware Linux (#59130)\n- Enforces pywinrm to be version 0.3.0 or higher and upgrade to latest (#59138)\n- Fix a race condition in the ldx module which sometimes caused devices not to be created during container creation. (#59145)\n- Fix issue where passed smb port was being passed to the smb connection when\n  deploying Windows with salt-cloud (#59153)\n- Fixed an error when running on CentOS Stream 8. (#59161)\n- Fix event publish retry when using TCP transport (#59162)\n- Fix docs for `auth_timeout` (#59175)\n- virt.update doesn't update the definition if efi=True and a loader is already set (#59188)\n- Fixed salt.modules.solaris_shadow failing on bytes-like object is require, not 'str'. (#59191)\n- Added support for io2 volumes in ec2 cloud (#59218)\n- When checking if the mode had changed in the file state module, only do so if the passed mode is not None. (#59276)\n- Fixing _sanitze_comments to use sqlparse instead of re.sub. (#59336)\n- Allow use of query parameters in cmd.script source url (#59362)\n- Access user from global group if local group fails to find user. (#59412)\n- Detect and fix grub.xen path (#59484)\n- Stop raising `StopIteration` on generators (#59512)\n- Fix minion race conditions handling SIGTERM signal when loading modules (#59524)\n- Support new output of systemd systemctl list-unit-files in the following modules systemd_service.get_enabled, systemd_service.get_disabled and systemd_service.get_static (#59526)\n- Fix pkg.upgrade with -U arg on FreeBSD, -L flag was deprecated long time. (#59565)\n- Fixing the virtual function for the netimiko module to allow it to run outside of a proxy minion. Adding additional tests. (#59635)\n- Allow \"extra_filerefs\" as sanitized kwargs for SSH client.\n  Fix regression on \"cmd.run\" when passing tuples as cmd. (#59664)\n\n\nAdded\n-----\n\n- Added \"fips_mode\" config option to master and minion configs. (#59427)\n- Adding the ability to clear and show the pillar cache enabled when pillar_cache is True. (#37080)\n- SCRAM-SHA-256 support for PostgreSQL passwords.\n  Pass encrypted=scram-sha-256 to the postgres_user.present (or postgres_group.present) state. (#51271)\n- The yumpkg module has been updated to support VMWare's Photon OS, which uses tdnf (a C implementation of dnf).  \"VMware Photon OS\" has been added to the \"RedHat\" `os_family` map as part of this change. (#51912)\n- The pkgrepo state now supports VMware Photon OS. (#52550)\n- Added firewallgroups to Vultr Salt Cloud provider (#53677)\n- Added arbitrary kwarg support for tojson filter. (#56012)\n- Add salt monitor beacon to execute salt execution module functions. (#56461)\n- Allow the nameservers to be populated from systemd-resolve. (#57618)\n- Adding reactor_niceness to the default minion configuration. (#57701)\n- CPU model, topology and NUMA node tuning (#57880)\n- Added ``pkg.services_need_restart`` which lists system services that should be restarted after package management operations. (#58261)\n- Allow handling special first boot definition on virtual machine (#58589)\n- Added vgcreate custom parameters to module call: addtag, alloc, autobackup, metadatatype, zero (#58747)\n- Enhance console and serial support in virt module (#58844)\n- Salt's versions report `salt --versions-report` now includes all installed salt extensions into its versions report. (#58938)\n- Support loading entrypoints by passing a module instead of a function. (#58939)\n- Added shadow.gen_password for BSD operating systems. (#59140)\n- Add more network and PCI/USB host devices passthrough support to virt module and states (#59143)\n- Add interface channels management support to rh_ip module. (#59147)\n- Add new minion option return_retry_tries for dynamic return retry tries (#59236)\n- Added salt-cloud support for Hetzner Cloud via the ``hcloud`` library of the provider. (#59301)\n- \"AlmaLinux\" has been added to the \"RedHat\" `os_family` map (#59404)\n- Added `blocks` and `attachments` params to the `slack_notify.post_message` function (#59428)\n- Added tcp_reconnect_backoff minion config option for specifying reconnection backoff time for TCP transport (#59431)\n- Added ``swapusage`` beacon to complement the existing ``memusage`` beacon. (#59460)\n- The `salt-run` CLI now accepts `--jid` (#59527)\n- Add bytes option for FreeBSD pkg-stats(8) module. (#59540)\n- Adding mod_beacon function to pkg, service, and file state modules. This function will act similar to the mod_watch function. This will allow supported functions in those state modules to automatically add associated beacons to monitor for changes to the respective resources in the state file and fire events to the event bus when changes occur. (#59559)\n- Add -B flag to FreeBSD pkgng.check() to regenerate the library dependency\n  metadata for a package by extracting library requirement information from the\n  binary ELF files in the package. (#59569)\n\n\n## Salt 3002.9 (2022-05-25)\n\n### Fixed\n\n- Fixed an error when running on CentOS Stream 8. (#59161)\n- Fix bug in tcp transport (#61865)\n- Make sure the correct key is being used when verifying or validating communication, eg. when a Salt syndic is involved use syndic_master.pub and when a Salt minion is involved use minion_master.pub. (#61868)\n\n\n### Security\n\n- Fixed PAM auth to reject auth attempt if user account is locked. (cve-2022-22967)\n\n\n## Salt 3002.8 (2022-02-25)\n\n### Security\n\n- Sign authentication replies to prevent MiTM (cve-2020-22935)\n- Sign pillar data to prevent MiTM attacks. (cve-2022-22934)\n- Prevent job and fileserver replays (cve-2022-22936)\n- Fixed targeting bug, especially visible when using syndic and user auth. (CVE-2022-22941) (#60413)\n\n\n\n## Salt 3002.7 (2021-08-20)\n\n### Fixed\n\n- Verify the owner of an existing config before trusting it during install. If the owner cannot be verified, back it up and use defaults. (CVE-2021-22004)\n\n\n### Security\n\n- Fix the CVE-2021-31607 vulnerability\n  Additionally, an audit and a tool was put in place, ``bandit``, to address similar issues througout the code base, and prevent them. (CVE-2021-31607)\n- Ensure that sourced file is cached using its hash name (cve-2021-21996)\n\n\n## Salt 3002.6 (2021-03-10)\n\n### Changed\n\n- Store git sha in salt/_version.py when installing from a tag so it can be found if needed later. (#59137)\n\n\n### Fixed\n\n- Fix argument injection bug in restartcheck.restartcheck. This change hardens\n  the fix for CVE-2020-28243. (#200)\n- Allow \"extra_filerefs\" as sanitized kwargs for SSH client.\n  Fix regression on \"cmd.run\" when passing tuples as cmd. (#59664)\n- Allow all ssh kwargs as sanitized kwargs for SSH client. (#59748)\n\n\n## Salt 3002.5 (2021-02-25)\n\n### Fixed\n\n- Tests and fix for CVE-2021-25283\n\n\n## Salt 3002.4 (2021-02-05)\n\n### Fixed\n\n- Fix runners that broke when patching for CVE-2021-25281\n- Fix issue with runners in SSE\n\n## Salt 3002.3 (2021-01-25)\n\n### Fixed\n\n- CVE-2020-28243 - Fix local privilege escalation in the restartcheck module. (CVE-2020-28243)\n- CVE-2020-28972 - Ensure authentication to vcenter, vsphere, and esxi server\n  validates the SSL/TLS certificate by default. If you want to skip SSL verification\n  you can use `verify_ssl: False`. (CVE-2020-28972)\n- CVE-2020-35662 - Ensure the asam runner, qingcloud, splunk returner, panos\n  proxy, cimc proxy, zenoss module, esxi module, vsphere module, glassfish\n  module, bigip module, and keystone module validate SSL by default. If you want\n  to skip SSL verification you can use `verify_ssl: False`. (CVE-2020-35662)\n- CVE-2021-25281 - Fix salt-api so it honors eauth credentials for the\n  wheel_async client. (CVE-2021-25281)\n- CVE-2021-25282 - Fix the salt.wheel.pillar_roots.write method so it is not\n  vulnerable to directory traversal. (CVE-2021-25282)\n- CVE-2021-25283 - Fix the jinja render to protect against server side template\n  injection attacks. (CVE-2021-25283)\n- CVE-2021-25284 - Fix cmdmod so it will not log credentials to log levels info\n  and error. (CVE-2021-25284)\n- CVE-2021-3144 - Fix eauth tokens can be used once after expiration. (CVE-2021-3144)\n- CVE-2021-3148 - Fix a command injection in the Salt-API when using the Salt-SSH client. (CVE-2021-3148)\n- CVE-2021-3197 - Fix ssh client to remove ProxyCommand from arguments provided\n  by cli and netapi. (CVE-2021-3197)\n\n## Salt 3002.2 (2020-11-16)\n\n### Fixed\n- Fix server core grains issue when running inside a windows container (#59611)\n- Change dict check to isinstance instead of type() for key_values in file.keyvalue. (#57758)\n- Fail when func_ret is False when using the new module.run syntax. (#57768)\n- Fix comparison of certificate values (#58296)\n- When using ssh_pre_flight if there is a failure, fail on retcode not stderr. (#58439)\n- Fix use of unauthd cached vmware service instance (#58691)\n- Removing use of undefined varilable in utils/slack.py. (#58753)\n- Restored the ability to specify the amount of extents for a Logical\n  Volume as a percentage. (#58759)\n- Ensuring that the version check function is run a second time in all the user related functions in case the user being managed is the connection user and the password has been updated. (#58773)\n- Allow bytes in gpg renderer (#58794)\n- Fix issue where win_wua module fails to load when BITS is set to Manual (#58848)\n- Ensure that elasticsearch.index_exists is available before loading the elasticsearch returner. (#58851)\n- Log a different object when debugging if we're using disk cache vs memory cache. The disk cache pillar class has the dict object but the cache pillar object which is used with the memory cache does not include a _dict obeject because it is a dict already. (#58861)\n- Do not generate grains for every job run on Windows minions. This makes Windows\n  conform more to the way posix OSes work today. (#58904)\n- Fixes salt-ssh authentication when using tty (#58922)\n- Revert LazyLoader finalizer. Removed the weakref.finalizer code. On some occasions, the finalized would run when trying to load a new module, firing a race condition. (#58947)\n\n\n## Salt 3002.1 (2020-10-26)\n\n### Fixed\n\n- Prevent shell injections in netapi ssh client (cve-2020-16846)\n- Prevent creating world readable private keys with the tls execution module. (cve-2020-17490)\n- Properly validate eauth credentials and tokens along with their ACLs.\n  Prior to this change eauth was not properly validated when calling\n  Salt ssh via the salt-api. Any value for 'eauth' or 'token' would allow a user\n  to bypass authentication and make calls to Salt ssh. (CVE-2020-25592)\n\n## Salt 3002 (2020-10-19)\n\n### Removed\n\n- removed boto_vpc.describe_route_table please use boto_vpc.describe_route_tables (#58636)\n- removed show_ipv4 arg from all functions in from salt.runners.manage (#58638)\n- removed kwargs from mandrill.send if you use \"async\" please use \"asynchronous\" (#58640)\n- removed salt/modules/mac_brew_pkg.__fix_cask_namespace (#58641)\n- zfs.mount Passing '-a' as name is deprecated please just pass 'None' (#58642)\n- Remove include_localhost kwarg for connected_ids method in salt/utils/minions.py (#58224)\n- deprecated opts default argument of none and removed deprecation warnings (#58635)\n\n\n### Deprecated\n\n- The `ssh` parameter of `virt.migrate` has been deprecated. Use a libvirt URI `target` value instead. Both `virt.migrate_non_shared` and `virt.migrate_non_shared_inc` have been deprecated. Use the `copy_storage` parameter with `virt.migrate` instead. (#57947)\n\n\n### Changed\n\n- Allow specifying a custom port for Proxmox connection (#50620)\n- Changed the lvm.lv_present state to accept a resizefs switch. So, when\n  the logical volume is resized, the filesystem will be resized too. (#55265)\n- Change the ``enable_fqdns_grains`` setting to default to ``False`` on proxy minions\n  as it is generally not needed and just slows down start up time.. (#57676)\n- Adds network teaming support to ``network.managed`` state for RHEL-based\n  distros. Removes ``ip.get_bond`` and ``ip.build_bond`` for the same, as is\n  redundant and not needed for any current RHEL/CentOS/Fedora/etc. release. (#57775)\n- The ``serializer`` argument has been added to the :py:func:`file.serialize\n  <salt.states.file.serialize>` state, as an alternative to ``formatter``. This\n  brings it more in line with the ``serializer_opts`` and ``deserializer_opts``\n  arguments. ``formatter`` is still supported, but using both ``serializer`` and\n  ``formatter`` will cause the state to fail. (#57858)\n\n### Fixed\n\n- `file.read` exec module function no longer fails on binary data. (#58033)\n- Remove py2 support from winrepo execution module and runner (#58596)\n- Create ini file if does not exist when using ini.options_present state module. (#34236)\n- Added an bool \"strict\" argument to sdb.get module to force module to fail if the sdb uri is not correct. (#39163)\n- Fixed issue with postgres.has_privilege breaking on ALL. (#48465)\n- check for azurearm username in config before adding username and password to the virtual machine properties (#49063)\n- Fixes service.status to return True/False instead of empty strings or PIDs of the service. This brings macOS into parity with the other service modules. (#49237)\n- fix frequent rest_tornado non-fatal tracebacks (#49572)\n- Do not use reverse DNS of the target used in salt-ssh. Use the target the user provides. (#49840)\n- Fixes startup issue where it tried to load the kernalparams grain on Windows (#49901)\n- Fixed error in nilrt_ip.get_interfaces_details when loading config. (#50416)\n- Doesn't remove underscore when sanitizing hostname in network salt util (#50527)\n- permit the use of int/float type for the version in:\n   - the state postgres_cluster.present\n   - the state postgres_cluster.absent\n   - the module postgres.cluster_create\n   - the module postgres.cluster_remove (#50899)\n- Cleaned up a trackback in lvm.pv_present when the disk doesn't exist. (#52363)\n- Fixed UnboundLocalError when using win_network.connect (#53371)\n- Add accept_ra 2 option to modules.debian_ip (#54067)\n- salt.runner test mode support (#54382)\n- Fixed mkpart to allow the creation of a partition without filesystem (#54456)\n- Fixes bogus warning message when an empty list is used for an environment in a\n  topfile. This allows `[]` to be used as a placeholder in a topfile without\n  needing to comment everything out as a workaround. (#54882)\n- win_certutil state will no longer fail on non-English systems upon successful additions and deletions of a certificate. (#55024)\n- Fixed file.directory state always showing mode change for symlinks. (#55878)\n- check for a docker error that the swarm already exists when calling swarm.swarm_init on an existing docker swarm (#55949)\n- Fixing stalekey engine so it deletes the keys when they are a list. (#55977)\n- An invalid _schedule.conf configuration file is renamed to _schedule.confYAMLError.\n  This avoids disabling the minion and busy polling the CPU on Windows. (#56216, #58177)\n- Proper calculation of tpldir and related context parameters (#56410)\n- Make gpg.encrypt examples work (#56646)\n- Artifactory encoding of headers fixed for py3 (#56660)\n- Fixed handling of extents extended attribute in file.managed state. (#57189)\n- Remove buggy start parameter from virt.pool_running docstring (#57275)\n- Fixed saltcheck rendering of map.jinja files from saltenv (#57327)\n- Fix for `virt.get_profiles` resolves an error that appears due to new parameters introduced with `_disk_profile()` (#57431)\n- Accept nested namespaces in spacewalk.api runner function. (#57442)\n- virt.init fix the disk target names (#57477)\n- Fix volume name for disk-typed pools in virt.defined (#57497)\n- Fixes an issue with filesystems options ordering which kept already\n  applied NFS fstab entries being updated. (#57520)\n- Do not allow python2 to be added to salt-ssh tar since Salt deprecated Python 2. (#57647)\n- Fixed exception on loading custom zipped modules. (#57674)\n- corrected support for app_id or local vault configurations (#57705)\n- Fix the registration of libvirt pool and nodedev events (#57746)\n- Pass cmd.run state arguments to unless and onlyif when they exist (#57760)\n- The 2004 release of Windows 10 introduced a bug in the InstallationBehavior COM\n  object where you can no longer get properties from that object. Calls to this\n  object are now wrapped in a try/except block with sane defaults when it fails to\n  read attributes.\n\n  Additionally, some pre-flight checks have been added to the win_wua module to\n  make sure Windows Update can actually run. (#57762)\n- Changed get_repo in yumpkg.py to use \"repo\" as first parameter.\n  This fixes #57778, a bug were every run of pkgrepo.managed state were\n  marked as changed because the get_repo did fail to detect a previously\n  applied run. (#57778)\n- Raise SaltClientError in parse_host_port insted of ValueError so it is caught and handled properly when the minion is connecting to the master. (#57789)\n- Fixed issue with the return dictionary from the workgroup() function in the\n  salt.states.win_system module. This resulted in a windows-based minion logging\n  an error and could also interfere with a highstate being applied. (#57790)\n- Fixes broken block_device_mapping and block_device_mapping_v2 type checks in\n  the OpenStack cloud driver. Salt was looking for a dict and the shade library\n  was looking for a list of dicts. This made it impossible to use those params. (#57802)\n- Fixed incorrect parsing of ``Set-Cookie`` response headers. (#57829)\n- When using yumpkg, report stdout when stderr is redirected to stdout. (#57862)\n- Fixes an issue on macOS where if you try and restart the macOS using serivce.restart salt-minion it would fail because the service names are different on macOS. (#57878)\n- Fixes an issue on macOS where salt would take extra time to run on a service.dead call and the service is missing. (#57907)\n- Fixes an issue where a disabled macOS and Windows service would fail to start with service.running. (#57908)\n- Use \"use_bin_type\" to differentiate between bytes and str when writing cache\n  for pillar and grains. (#57918)\n- Set the comment to \"No minions responded\" if salt.function fails to find any\n  minions (#57920)\n- Fix issue with `__utils__` usage in the `__virtual__` functions on a few of the\n  execution modules. (#57948)\n- remove encoding kwarg for both pack(b)/unpack(b) in msgpack for versions >=1.0.0\n  https://github.com/msgpack/msgpack-python/blob/master/ChangeLog.rst#100 (#57965)\n- Replace deprecated `cgi.escape()` with `html.escape()` after it was removed from Python 3.8. (#57983)\n- Fix btrfs state decorator, that produces exceptions when creating subvolumes. (#58012)\n- Fix kubeadm token_list when the list of tokens is empty (#58116)\n- Add a fix for the mac_service modules where it would fail to load in some new services and crash on Big Sur. (#58143)\n- Fix blank tplfile context parameter when loading top level sls files (#58249)\n- Do not include init directory in sls context parameters if explicitly specified (#58250)\n- Fixing pillar caching when pillar environments are involved. (#58274)\n- Make proxy_config read in the proxy specific configuration which is typically found in /etc/salt/proxy.d/minionid/. (#58307)\n- Add timeout kwarg docs for service.running and service.dead (#58311)\n- Return empty dict on win_pdh.get_counters rather than raising exception when no data are available (#58327)\n- Leave boot parameters untouched if boot parameter is set to None in virt.update (#58331)\n- Convert disks of volume type to file or block disks on Xen (#58333)\n- Apparently Apple is using both \"10.16\" and \"11\" for versioning Big Sur,\n  depending on where you look. The mac_softwareupdate module uses a different\n  regex depending on OS version, and the determination was based on the\n  osrelease_info grain. This results in a Big Sur machine not using the correct\n  regex; osrelease_info[1] is 0 for Big Sur.\n\n  This change simply adds an additional clause to the if statement to handle\n  osmajorrelease > 10. (#58340)\n- Fixed zmq salt-call hang!\n\n  Some objects from the 3rd party module zmq fail to deconstruct if left to the GC when Python exits.\n  This is because the objects get destroyed out of order.\n  This only happens on some platforms like ubuntu 20.04 and some versions of FreeBSD.\n  We fixed this hang by deconstructing all zmq objects in the right order before we exit salt-call. (#58364)\n- Reactor runner functions will now ensure reactor system is available before attempting to run and error out if it is not available. (#58384)\n- Fix enpoint typos (#58416)\n- Make sure we repopulate ``__utils__`` on Windows when a job is run from the scheduler. (#58437)\n- Adding a check when a source is an HTTP or FTP URL to do a query to ensure the URL is valid before returning, then we know if we need to move onto to the next source in the list or not. (#58441)\n- Improved documentation for the LGPO state module (#58521)\n- Remove old documented pending reboot key (#58530)\n- On macOS, skip GUI dialog for Developer Command Line Tools when importing gitfs util. (#58575)\n- Fixing a use case when multiple inotify beacons are defined but when notifications are fired the configuration from the first beacon are used. (#58655)\n\n\nAdded\n-----\n\n- Salt Api\n  ========\n\n  salt-api will now work on Windows platforms with limited support. You will be\n  able to configure the ``rest_cherrypy`` module, without ``pam`` external\n  authentication and without ssl support.\n\n  Example configuration:\n\n  .. code-block:: yaml\n      external_auth:\n        auto:\n          saltuser:\n            -.*\n      rest_cherrypy:\n        host: 127.0.0.1\n        port: 8000 (#49949)\n- Added `execution_timeout` support to `chocolatey.installed` state (#50449)\n- Add new verify_ssl option to file modules. This allows a user to not validate the server certificate for HTTPS source and source hash's. (#52663)\n- Added list target type support to the `scan` salt-ssh roster. (#52675)\n- Added pvresize and lvextend to linux_lvm (#56089)\n- Added COPR option to states.pkgrepo (#57258)\n- Add \"get_return\" key for onlyif and unless requisites to parse deep module results (#57470)\n- Allow setting VM boot devices order in virt.running and virt.defined states (#57544)\n- Added grains to show the LVM Volume Groups and their Logical Volumes. (#57629)\n- Memory Tuning Support which allows much greater control of memory allocation (#57639)\n- Add output filter to saltcheck to only display test failures (#57788)\n- ### Description\n  Add profile block and profiling of import_* jinja calls.\n\n  ### Example\n  ```sls\n  # cat /srv/salt/example.sls\n  {%- profile as 'local data' %}\n    {%- set local_data = {'counter': 0} %}\n    {%- for i in range(313377) %}\n      {%- do local_data.update({'counter': i}) %}\n    {%- endfor %}\n  {%- endprofile %}\n\n  test:\n    cmd.run:\n      - name: |-\n          printf 'local data: %s' '{{ local_data['counter'] }}'\n  ```\n\n  ### Motivation\n\n  When working with a very large codebase, it becomes more important to trace\n  inefficiencies in state and pillar render times.  The `profile` jinja block\n  enables the user to get finely detailed information on the most time consuming\n  jinja expressions in the codebase.\n\n  Especially as the codebase grows and the amount of minions increases, tracking\n  down expensive expressions becomes imperative otherwise the resource burden for\n  even just maintaining highstate becomes unmanageable. (#57849)\n- - Added an execution module for running idem exec modules\n  - Added a state module for running idem states (#57969)\n- - Added the ability for states to return `sub_state_run`s -- results from external state engines (#57993)\n- Added salt-cloud support for Linode APIv4 via the ``api_version`` provider configuration parameter. (#58093)\n- Added support to manage services in Slackware Linux. (#58206)\n- Added list_sources to chocolatey module to have an overview of the repositories present on the minions.\n  Added source_added to chocolatey state in order to add repositories to chocolatey. (#58588)\n- Adding tests for changes to virtual function for netmiko module. Adding tests for netmiko proxy minion module. (#58609)\n- Added features config option for feature flags. Added a feature flag\n  `enable_slsvars_fixes` to enable fixes to tpldir, tplfile and sls_path.\n  This flag will be deprecated in the Phosphorus release when this functionality\n  becomes the default. (#58652)\n\n## Salt 3001.8 (2021-08-20)\n\nVersion 3001.8 is a bug fix release for :ref:`3001 <release-3001>`.\n\n\n### Fixed\n\n- Verify the owner of an existing config before trusting it during install. If the owner cannot be verified, back it up and use defaults. (CVE-2021-22004)\n\n\n### Security\n\n- Fix the CVE-2021-31607 vulnerability\n  Additionally, an audit and a tool was put in place, ``bandit``, to address similar issues througout the code base, and prevent them. (CVE-2021-31607)\n- Ensure that sourced file is cached using its hash name (cve-2021-21996)\n\n## Salt 3001.7 (2021-03-10)\n\n### Fixed\n\n- Fix argument injection bug in restartcheck.restartcheck. This change hardens\n  the fix for CVE-2020-28243. (#200)\n- Allow \"extra_filerefs\" as sanitized kwargs for SSH client.\n  Fix regression on \"cmd.run\" when passing tuples as cmd. (#59664)\n- Allow all ssh kwargs as sanitized kwargs for SSH client. (#59748)\n\n## Salt 3001.6 (2021-02-09)\n\n### Fixed\n\n- Fix runners that broke when patching for CVE-2021-25281\n- Fix issue with runners in SSE\n\n## Salt 3001.5\n\n### Fixed\n\n- CVE-2020-28243 - Fix local privilege escalation in the restartcheck module. (CVE-2020-28243)\n- CVE-2020-28972 - Ensure authentication to vcenter, vsphere, and esxi server\n  validates the SSL/TLS certificate by default. If you want to skip SSL verification\n  you can use `verify_ssl: False`. (CVE-2020-28972)\n- CVE-2020-35662 - Ensure the asam runner, qingcloud, splunk returner, panos\n  proxy, cimc proxy, zenoss module, esxi module, vsphere module, glassfish\n  module, bigip module, and keystone module validate SSL by default. If you want\n  to skip SSL verification you can use `verify_ssl: False`. (CVE-2020-35662)\n- CVE-2021-25281 - Fix salt-api so it honors eauth credentials for the\n  wheel_async client. (CVE-2021-25281)\n- CVE-2021-25282 - Fix the salt.wheel.pillar_roots.write method so it is not\n  vulnerable to directory traversal. (CVE-2021-25282)\n- CVE-2021-25283 - Fix the jinja render to protect against server side template\n  injection attacks. (CVE-2021-25283)\n- CVE-2021-25284 - Fix cmdmod so it will not log credentials to log levels info\n  and error. (CVE-2021-25284)\n- CVE-2021-3144 - Fix eauth tokens can be used once after expiration. (CVE-2021-3144)\n- CVE-2021-3148 - Fix a command injection in the Salt-API when using the Salt-SSH client. (CVE-2021-3148)\n- CVE-2021-3197 - Fix ssh client to remove ProxyCommand from arguments provided\n  by cli and netapi. (CVE-2021-3197)\n\n\n## Salt 3001.4\n\n### Fixed\n\n- Fixes salt-ssh authentication when using tty (#58922)\n\n## Salt 3001.3\n\n### Fixed\n\n- Properly validate eauth credentials and tokens along with their ACLs.\n  Prior to this change eauth was not properly validated when calling\n  Salt ssh via the salt-api. Any value for 'eauth' or 'token' would allow a user\n  to bypass authentication and make calls to Salt ssh. (CVE-2020-25592)\n\n## Salt 3001.2\n\n### Fixed\n\n- Prevent shell injections in netapi ssh client (cve-2020-16846)\n- Prevent creating world readable private keys with the tls execution module. (cve-2020-17490)\n\n## Salt 3001.1 (2020-07-27)\n\n### Changed\n\n- Change the ``enable_fqdns_grains`` setting to default to ``False`` on Windows\n  to address some issues with slowness. (#56296, #57529)\n- Handle the UCRT libraries the same way they are handled in the Python 3\n  installer (#57594)\n- Changes the 'SSDs' grain name to 'ssds' as all grains needs to be\n  resolved in lowered case. (#57612)\n- Updated requirement to psutil 5.6.7 due to vulnerability in psutil 5.6.6. (#58018)\n- Updated requirement to PyYAML 5.3.1 due to vulnerability in PyYAML 5.2.1. (#58019)\n\n\n### Fixed\n\n- When running scheduled jobs from a proxy minion with multiprocessing turned off (default) a recursive error occurs as __pub_fun_args is repeated over and over again in the kwargs element in the data dictionary.  Now we make a copy of data['kwargs'] instead of using a reference. (#57941)\n- The `x509.certificate_managed` state no longer triggers a change because of sorting issues if the certificate being evaluated was previously generated under Python 2. (#56556)\n- Added support to lo ip alias in network.managed state by checking if lo inet data\n  from network.interfaces contains label with the name of managed interface.\n  Return status True if match found. (#56901)\n- Redact passwords in the return when setting credentials using\n  ``win_iis.container_setting`` (#57285)\n- Fixes issue with cmd.powershell. Some powershell commands do not return\n  anything in stdout. This causes the JSON parser to fail because an empty string\n  is not valid JSON. This changes an empty string to `{}` which is valid JSON and\n  will not cause the JSON loader to stacktrace. (#57493)\n- Improves performance. Profiling `test.ping` on Windows shows that 13 of 17\n  seconds are wasted when the esxi grain loads vsphere before noting that\n  the OS is not a esxi host. (#57529)\n- Fixed permissions issue with certain pip/virtualenv states/modules when configured for non-root user. (#57550)\n- Allow running nox sessions either using our `nox-py2 fork <https://github.com/s0undt3ch/nox/tree/hotfix/py2-release>`_ or upstream `nox <https://github.com/theacodes/nox>`_. (#57583)\n- Fixes issue with lgpo.get when there are unicode characters in the hostname (#57591)\n- Fixes issue with virtual block devices, like loopbacks and LVMs, wrongly\n  populating the \"disks\" or \"ssds\" grains. (#57612)\n- Due to some optimization the `virtual` grain was never updated on illumos. Move the fallback in prtdiag output parsing outside the loop that now gets skipped due to the command exiting non-zero. (#57714)\n- Grains module delkey and delval methods now support the force option. This is\n  needed for deleting grains with complex (nested) values. (#57718)\n- Moving import salt.modules.vsphere into `__virtual__` so we have access to test proxytype in opts,\n  previously this was causing a traceback when run on proxy minion as `__opts__` does not exist\n  outside of any functions. Introducing a new utils function, is_proxytype, to check that the\n  device is a proxy minion and also that the proxy type matches. (#57743)\n- Fixed fail_with_changes in the test state to use the comment argument when passed. (#57766)\n- Adds a fix so salt can run on the latest macOS version Big Sur. (#57787)\n- Fixes UnpackValueError when using GPG cache by using atomic open. (#57798)\n- The ``gid_from_name`` argument was removed from the ``user.present`` state in\n  version 3001, with no deprecation path. It has been restored and put on a\n  proper deprecation path. (#57843)\n- Fixes dictionary being changed during iteration. (#57845)\n- Fixed bug with distro version breaking osrelease on Centos 7. (#57781)\n- Fixed macOS build scripts. (#57973)\n- Fixed Salt-API startup failure. (#57975)\n- Fixed CSR handling in x509 module (#54867)\n- Re-allow x509 to manage a certificate based on a CSR\n\n\nAdded\n-----\n\n- Added docs demonstrating how to apply an MSI patch with winrepo (#32780)\n\n\n## Salt 3001 (2020-06-17)\n\n### Removed\n\n- Removed long-deprecated `repo` option from pip state. (#51060)\n- Removed noisy debug logging from config.get. (#54205)\n- Removed needless dbus warnings from snapper module. (#56286)\n- Removed obsolete MSI functionality from version tools. (#56352)\n- Removed deprecated virt functionality. (#56514)\n- Dropped requirement for enum34 dependency. (#57108)\n- On macOS pkg.installed (using brew) no longer swaps `caskroom/cask/` for `homebrew/cask/` when using outdated package names. (#57361)\n- napalm_network.load_template module - removed deprecated arguments\n  template_user, template_attrs, template_group, template_mode, and native NAPALM\n  template support. Use Salt's rendering pipeline instead. (#57362)\n- selinux.fcontext_add_or_delete_policy module removed - use selinux.fcontext_add_policy or selinux.fcontext_delete_pollicy instead. (#57363)\n- Deprecated `refresh_db` removed from pkgrepo state. Use `refresh` instead. (#57366)\n- Deprecated internal functions salt.utils.locales.sdecode and .sdecode_if_string removed. Use salt.utils.data.decode instead. (#57367)\n- Removed deprecated misc. internal Salt functions. See https://github.com/saltstack/salt/issues/57368 for more info. (#57368)\n- Remove salt/utils/vt.py duplication from filename map. (#57004)\n\n\n### Changed\n\n- `file.rename` no longer returns False when `force:False`. (#49843)\n- Brought localclient command line args functionality into line with regular `salt` calls. (#56853)\n- Updated requisites documentation. (#49962)\n- Changed eauth \"not enabled\" log message level from debug to warning. (#50946)\n-  (#52546)\n- Refactored x509.certificate_managed to be easier to use. (#52935)\n- Don't log error when running \"alternatives --display\" on nonexistant target (#53911)\n- Improved logging for user auth issues. (#53990)\n- No longer emit extra logs when checking `alternatives.display` and `.check_exists`. (#53991)\n- Use lazy loading to get SLS data from master - significantly improves `state.apply` times when using gitfs with many branches. (#54468)\n- Changed Salt icon for Windows. (#56194)\n- Update `libnacl` to 1.7.1 (#56350)\n- Now require pycryptodomex for crypto on all platforms. (#56625)\n- Updated to sphinx 3.0.1 when building docs. (#56671)\n- Now `__salt__` is automatically refreshed when a package is `pip` installed, allowing pip installing a dependency and using that dependency in the same state run. (#56867)\n- Use pygit2>=1.2.0 for Python>=3.8. (#56905)\n- Now provides a more meaningful error for `win_groupadd` for unmapped accounts. (#56921)\n- Significantly improve call times by only checking one frame in `depends`. (#57062)\n- Salt scripts shebang now specifies `python3`. (#57083)\n- Upgraded dependency to use boto3>=1.13.5. (#57161)\n- Changed to consistent file location handling across APIs for Juniper network devices. (#57399)\n- Use Python's hashlib (sha256) instead of shelling out (SipHash24) to generate server_id. (#57415)\n- Update `formulas.rst` with new IRC channel and links to IRC logs (#51628)\n\n\n### Fixed\n\n- `pkgrepo.managed` now checks for a changed `key_url`. (#4438)\n- Allow passing extra args to `file.rename`. (#29001)\n- Fixed issue with overeager recursion detection. (#37646)\n- Correctly set DNS search domain in VMware virtual machine. (#37709)\n- Fixed trim_output logic in archive.extracted state (#40491)\n- Updated documentation on `service` state. (#40819)\n- Changed error message on `postgres_database.absent` to report correct error when database is in use. (#42833)\n- Fixed issue in `sysctl` when kernel parameters were adjusted via grub. (#45195)\n- Added termination protection option to salt-cloud ec2. (#45496)\n- Refactored `debian_ip` module. (#46388)\n- Log error when reactor tasks go to a full queue instead of silently fail. (#46431)\n- Fixed issue with failure on comments in MySQL files. (#47488)\n- Properly handle multibyte characters that span blocks of data. (#48473)\n- Fixed failure in `user.present` when `gid_from_name` is True. Argument was removed and replaced by the `usergroup` argument. (#48640)\n- Properly obtain hostname (#48906)\n- Fixed `nilrt_ip` disabled function. (#48971)\n- Fixed static configuration in nilrt_ip module. (#48990)\n- Added missing ARPCHECK option to rh7_eth template. (#49074)\n- Fixed to use the correct LetsEncrypt path on FreeBSD. (#49129)\n- Updated docs for netapi logs - log.access_file and log.error_file. (#49247)\n- Retry proxmox queries instead of failing immediately. (#49485)\n- Fixed AMD GPU vendor detection. (#56837)\n- Fixed `aptpkg.normalize_name` to respect architecture. (#49637)\n- Add error message for proxmox failures. (#49562)\n- Fixed nilrt_ip.enable/disable idempotency. (#56795)\n- Fixed issue with file.line doing a partial comparison to determine replacement need, instead compare actual content of lines. (#49855)\n- Return actual error message to user or hex code for `win_task.create_task_from_xml`. (#49981)\n- Use minion name as ssh_host for saltify cloud provider. (#50135)\n- Fixed misconfiguration of syndic. (#50139)\n- Re-added `onfail_all`, fixed onfail always triggering with other reqs, and onfail and onchanges not working when both present. (#50264)\n- Fixed broken scaleway cloud module. (#50334)\n- Fixed issue not cleaning up schedule and beacons. (#50505)\n- Fixed opkg install/remove to return potential changes, rather than always an empty dictionary. (#50516)\n- Fixed `pycrypto.gen_hash` to use strongest available `algorithm` by default. (#50544)\n- Fixed error leaving an empty first line on `.ini` file edits. (#50614)\n- Fixes error in tcp transport publish port default value. (#50646)\n- Changed internal functionality for deprecated Python `inspect.formatargspec`. (#50911)\n- Allows clone_from setting in proxmox salt-cloud to be able to be an integer. (#51001)\n- Stopped reading Windows registry value that might not be there. (#51095)\n- Fixed complaint about unused variables. (#51196)\n- salt-ssh no longer ignores pillar argument on `state.sls_id`. (#51353)\n- Stop treating MSI as a hard dependency. (#51470)\n- Fixed error handling for route53 to ignore `SignatureDoesNotMatch` errors (which cannot be retried). (#51572)\n- Fixed `extract_hash` to use the correct value. (#51670)\n- Fixed hard failure if `chocolately.installed` is for a non-existent package. (#51700)\n- `fail_with` and `succeed_with` now correctly use `comment` argument. (#51821)\n- Updated `is_enabled` to allow optional arguments. (#51823)\n- Fixed issue producing an error trying to resolve the unresolvable Capability SIDs. (#51868)\n- Additional fixes for using cron state with non-root Minion (#51872)\n- Fixed proxy module for Windows by using `__utils__` instead of `__salt__` for code that accesses the registry. (#52013)\n- Added support for parsing Gluster cli banner. (#52318)\n- Fixed failure to require `target` argument in git states. (#52364)\n- Fixed issue failing hard on uninstalled win updates. (#52387)\n- Fixed issue with `artifactory` not correctly evaluating `has_classifier` first. (#52517)\n- Fixed compound matches with nodegroups. (#52678)\n- Removed some noisy logging that have a tendency to fill up the logs on larger installations. (#52763)\n- Use `__utils__` for all registry calls. (#52992)\n- Added syndic log rotation to RPM. (#53040)\n- Use correct output in `zpool.present` when `test=true`. (#53145)\n- Fix s3fs cache byte/str mismatch (#53244)\n- Fixed `win_system` module to skip unavailable system info. (#53287)\n- Ignore invalid product_name files. (#53326)\n- Fixed error with `pkg.list_pkgs` to explicitly set `utf-8` encoding when writing, to match when reading. (#53340)\n- Fixed issue with encoding/decoding on circular references, discovered with iptables when `state_aggregate` was enabled. (#53353)\n- No longer fail when `blkid -o export` does not provide `TYPE` output. (#53447)\n- Fixed `guesseed` -> `guessed` typo in `archive` state. (#53480)\n- Fixed error with incorrect import statement masking real import error. (#53508)\n- Added some error handling around missing results from external returners. (#53517)\n- Changed to match repo paramter against repo name on `salt-run git_pillar.update`, so remote name can be used instead of full remote URL. (#56605)\n- Changed returner function error message to be useful/less misleading. (#53628)\n- Fixed `utils.user` to use correct `chugid` and `umask`. (#53681)\n- Fixed SmartOS grains under Python 3. (#53740)\n- Fixed error when trying to delete more than one key using `ini.options_absent`. (#53874)\n- Fixed error with cmd.run when run in a chroot environment. (#53992)\n- Fixed Zabbix configuration.import to use the correct values for the API version. (#54020)\n- Fixed salt key management with eauth. (#54078)\n- Fixed broken sdb.get_or_set_hash when using Hashicorp's Vault. (#54199)\n- Fixed `mac_softwareupdate.list_available` for Catalina. (#54220)\n- Fixed bug blocking `user.present` `createhome` on macOS. (#54288)\n- Fixed `postfix.show_queue` issue where queue_id, size, timestamp, sender, and recipient must exist before trying to append them. (#54298)\n- Fixed issue erroneously adding ssh_interface to DigitalOcean. (#54373)\n- Fixed issue not using correct package keys from group info on group install on yum. (#54458)\n- Fixed issue breaking state output on `test=true` with retry. (#54501)\n- Ignore absent filter.lfs in gitconfig. (#54817)\n- Changed to use Salt's CaseInsensitiveDict, so it can be msgpack serialized. (#54899)\n- Fixed trying to set too large a queue on AIX. (#54912)\n- Fixed issue when Vultr API returns \"not supported\" as default password during VM setup. (#54933)\n- Fixed issue with Jinja renderer ignoring argline. (#55124)\n- Fixed osrelease grain for MS Hyper-V 2019 by providing a default year. (#55212)\n- Fixed napalm support in bgp and net runners. (#55222)\n- Fixed Indefinitely code in win_task. (#55273)\n- Fixed `file.replace` idempotency. (#55297)\n- Fix incorrectly reported fileserver changes. (#55304)\n- Fixed XML RPC-REPLy error in Junos by passing `huge_tree`. (#55318)\n- Fixed error trying to treat binary files as text when doing spm install under Python 3. (#55330)\n- Correctly determine if Debian repo should be skipped. (#55402)\n- Set a hard dependency on `distro` module, for Python 3.8. (#55410)\n- Fixed `config_data` parameter when compiling DSC via `win_dsc` module. (#55425)\n- Fixed Solaris virtual grain to return better info instead of always LDOM. (#55444)\n- Documentation on syncing custom modules slightly inaccurate and missing info on sync to master (#55514)\n- Fixed crashes in ansiblegate on Python 3 minions. (#55585)\n- Fixed traceback on `http.query` when errors with the URL. (#55586)\n- Fixed failure to cache gpg data when `gpg_cache=True`. (#55772)\n- Added `__prerequired__` to the state runtime keywords filter, to prevent failures on `file.replace`. (#55775)\n- Fixed several Junos-related issues. (#55824)\n- Fixed Vault KV version 2 support. (#55842)\n- Removed remaning `pchanges` occurrences from state modules. (#55934)\n- Fixed issues in Slack webhook returner. (#55968)\n- Fixed onlyif/unless requisites being ignored in some cases. (#55974)\n- Fixed `skip_files_list_verify` when `keep_source=False` in `archive.extracted` state. (#55975)\n- Fixed `seed.apply` not waiting for the disk to be free. (#56002)\n- Fixed issue that ignored `trim_output` argument intermittently. (#56041)\n- Fixed `shadow.set_password` failing to set password when user isn't in `/etc/shadow`. (#56044)\n- Fixed failure in `user` state when moving the user's default group into the `groups` arg. (#56061)\n- Fixed issue incorrectly parsing YAML on command line. (#56067)\n- Fixed Azure VM creation when using Python3. (#56091)\n- Reverted `slspath` changes that broke a lot of states without proper deprecation. (#56119)\n- Lack of FQDN for host no longer blocks master startup. (#56179)\n- Pillar data is correctly included from `init.sls` file. (#56186)\n- Fixed `check_password` for newer RabbitMQ versions. (#56193)\n- Fixed timeout parameter not being passed to cmd_subset and cmd_batch, and misnamed (sub -> subset) parameter. (#56203)\n- Added support for virtualenv>=20.0.0 `--version` strings. (#56205)\n- No longer ignore slots on states when `parallel: true`. (#56221)\n- Fix deprecation warnings for imports from collections. (#56225)\n- Fixed Napalm beacons failing under Python 3. (#56243)\n- Fixed failure in tomcat module. (#56269)\n- Added salt-api log file to log rotation to prevent filling up the disk. (#56274)\n- Fixed issue using undocumented abbreviation on zypper - now uses the full option. (#56278)\n- Fixed issue parsing new `restorecon` output. (#56287)\n- Fixed failure for returner only working via cli and not LocalClient. (#56322)\n- Fixed version issues with empty minor string. (#56358)\n- Upgraded psutil dependency to 5.6.6 due to CVE-2019-18874. (#56363)\n- Fixed vendored tornado to use `salt.ext.backports_abc`. (#56369)\n- Fixed x509 module incorrectly writing error messages as the cert. (#56372)\n- Fixed error doing a `pip install salt` on Windows. (#56376)\n- Fixed AzureRM `create_object_model` util. (#56379)\n- Fixed issue `toxml` error in `virt.cpu_baseline`. (#56383)\n- Fixed issue with exeption being raised on `virt._get_domain` when there's no VM. (#56392)\n- Fixed crash in `aptpkg` on long description strings. (#56396)\n- Fixed keyword mismatch with `cassandra_cql` and `cassandra_cql_return`. (#56328)\n- Now uses the correct zero value for LockoutDuration in `win_lgpo`. (#56406)\n- Fixed issue reporting incorrect Salt version. (#56415)\n- Corrected documentation for `docker_image.load`. (#56420)\n- Fixed `defaults.merge` documentation. (#56432)\n- Fixed error always reporting changes with custom index-url for pip. (#56433)\n- Matching int keys within nested dictionaries now works. (#56444)\n- Fixed failure to support annotated tags when using pygit2. (#56451)\n- Better handle virt.pool_rebuild in virt.pool_running and virt.pool_defined states (#56454)\n- Fixed gitpython Windows requirements. (#56455)\n- Added `grains_cache_expiration` to minion conf documentation. (#56458)\n- Fixed incorrect handling of `renew=force` by `acme.cert` function. (#56462)\n- Fixed issue with incorrect msgpack version string check. (#56463)\n- Fixed infinite recursion in `pkg.group_info`. (#56476)\n- Fixed failure to sanitize grains for salt-ssh executions. (#56491)\n- Relax version requirements for pdbedit, also handle Debian branding in the version string. (#56553)\n- Fixed indentation error on `cmd.run` orchestration output. (#56554)\n- Fixed issue with getting incorrect SELinux context. (#56557)\n- Fixed bug updating boot parameters with `virt`. (#56562)\n- Correctly handle `pymysql.err.InternalError` in `mysql` module. (#56570)\n- Fixed `panos` commit example in docs. (#56581)\n- Fixed issue with `salt.utils.functools.call_functions` not checking for expected arguments. (#56584)\n- Fixed a broken statement when using arbitrary `kwargs` in mine.value. (#56593)\n- Fixed support for booting VMs with UEFI on virt. (#56613)\n- Fixed postgres.db_remove() execution function if db is still in use. (#56631)\n- Updated old redirects and http->https fixes in docs. (#56655)\n- Renamed `salt/utils/docker/` to `salt/utils/dockermod/` to avoid clashes with the `docker` package from pypi. (#56669)\n- Changed behavior to implicitly ignore package epochs and just use the latest one. (#56681)\n- Avoid throwing exception for missing security group in boto under test mode. (#56695)\n- Fix some function prompts in myssql module. (#56719)\n- Add appropriate comment for `svn export` state. (#56757)\n- Updated default master config file and updated the docs (#56053)\n- Workaround upstream bug in jinja2 indent filter. (#56833)\n- Fixed issue when raid.destroy is called but zero-superblock is not executed (#56838)\n- Allow correct failure information to show up when calling `win_interfaces` (#56844)\n- Add a note about service.running (#56846)\n- Updated Windows installer scripts to use Python 3.7.4. (#56873)\n- Nullsoft Salt Install now uninstalls MSI installed salt. (#56883)\n- Fallback to ASCII sorting when pillar keys are integers. (#56909)\n- Fixed `hwaddr` and `macaddr` not being added to RedHat network config, even if they were provided. (#56910)\n- Fixed literal comparisons. (#56931)\n- Fixed `win_system` `rawunicodeescape` errors. (#56940)\n- Fixed `ps.top` failures with newer `psutil` library. (#56942)\n- Provides better stacktrace in `win_pkg` return. (#56955)\n- Fixed `reg.present` to respect `(Default)` REG_SZ value of an empty string. (#56959)\n- OpenStack driver can now attach to multiple networks, also now respects provided `conn`. (#56960)\n- Fixed literal comparsion in `user` state. (#56972)\n- Additional fixes for using cron state with non-root Minion (#56973)\n- Added ARPCHECK to the template for RHEL8 networking. (#57047)\n- Fixed `aptpkg` to use `force-confnew` on it's own, and `force-confold` with `force-confdef`. (#57051)\n- Fixed acme.certs state to return /etc/letsencrypt/live subdirectories (#57056)\n- Fixed error with `fileserver.update` failing with `gitfs` backend was `git`, and `fileserver.clear_file_list_cache` not clearing gitfs cache when the backend was *not* `git`. (#57063)\n- Fixed LazyLoader crashing when using ssh client via salt-api. (#57119)\n- Publisher ACL doc fixes (#48915)\n- Fixed `acl.present` to properly detect changes for default ACLs and recursive folders. (#57147)\n- Fixed Minion/Minon typo in docs. (#57181)\n- Fix UnicodeDecodeError when apply file.managed with binary contents in test mode. (#57184)\n- Ensure errors are returned for missing pillars. (#57208)\n- Fix `ps.top` failures on macOS when iterating over zombie processes. (#57216)\n- Add vcredist_2013 (specifically msvcr120.dll) for OpenSSL/M2Crypto support on Windows. Fixes x509 module support. (#57266)\n- Fix systemd invocation on latest Linux Arch version. (#57299)\n- Updated rpm_lowpkg.version_cmp log messages and unit tests (#57347)\n- Added rotation for proxy logs. (#57353)\n- Fixed `win_system.join_domain` failures. (#57360)\n- Fixed `template_vars` functionality on Junos. (#57388)\n- Filter out aliases/duplicates from zypperpkg for <=SLE12SP4. (#57392)\n- Fix issue with finding the real python executable during tests (#56686)\n- Fix broken link regarding the 1024 character limit for YAML keys (#56540)\n- Fix grain.delkey grains.delval for nested keys (#54819)\n\n\nAdded\n-----\n\n- Added support for list in `include_pat/exclude_pat` in `file.recurse`. (#2747)\n- Added `validate` to tls module. (#7424)\n- Pillar relative includes. (#8875)\n- Added silent recurse option to `file.directory` state. (#44553)\n- Added bhvye support to virt. (#47619)\n- Added `kernelparams` grain for Linux. (#48501)\n- Added `systempath` PATH grain. (#49049)\n- Added appoptics returner. (#49066)\n- Added ability to use the minion's region if specified. (#49097)\n- Added reactor tuning documentation. (#49214)\n- Added support for ipaddr/ipv6ipaddrs, loopback devices, dns_nameservers/dns_serach lists or strings, and multiple addresses per interface. (#49355)\n- Added slsutil.banner for creating managed by salt message in files, and `slsutil.boolstr` for converting Pillar bool values to appropriate string representation. (#49396)\n- Added `normalize_name` to `pkgin` module. (#49469)\n- Added ability to use regex pattern with `ps.pgrep`. (#49565)\n- Added `merge` option to `match.filter_by`. (#49845)\n- Added ability to disable requisites during state runs. (#49955)\n- Add a reactor \"leader\", especially useful for multimaster hot-hot environments. (#50053)\n- Added `method_call` Jinja filter to help reduce boilerplate. (#50152)\n- Added ability for async pillar refresh. (#56881)\n- Added `shutdown_host` to vmware cloud. (#50177)\n- Added `drbd.status` module. (#50410)\n- Added `file.keyvalue` state. (#50627)\n- Added JID lookup message in case minion times out. (#50704)\n- Niceness control options added to the master config, for POSIX platforms. (#50905)\n- Added `serial_type` to virt module. (#50930)\n- Added RPC process documentation. (#50954)\n- Added advanced initdb option support to `postgres_cluster.present`. (#50998)\n- Added support for GCE accellerators in Salt Cloud. (#51033)\n- Added `broadcast` address to `network.convert_cidr` return. (#51521)\n- Added options for gitfs and git_pillar fallback branch. (#51971)\n- Add `fat` as a valid `fs_type` for `parted` module. (#52016)\n- Added support for comments in the host state/module. (#52185)\n- Added offline bootstrap for Chocolatey. (#52233)\n- Added support for listing all active running jobs on the master. (#52241)\n- Added ability to get expected cache location. (#52305)\n- Added ability to pass a timeout value to beacons. (#52314)\n- Added support for `btrfs property` command. (#52699)\n- Added ability to get minion's network information. (#53100)\n- Added support for `not_before` and `not_after` for x509 certificates. (#53148)\n- Added support for extra modules that will be loaded before checking the rest of the path. (#53167)\n- Added initial execution module to kubeadm. (#53345)\n- Added firstboot function to `systemd_service`. (#53381)\n- Added ability to pass arbitrary kwargs to zypper pkg. (#53693)\n- Added options for multi-use tokens for vault. (#54094)\n- Added devinfo module to get hardware information. (#54267)\n- Adds versionlock plugin detection for yum/dnf. (#54798)\n- Improved nxos support. (#54931)\n- Added root and no_recommends parameters for Zypper and RPM. (#54954)\n- Added `token` parameter in `blkid`. (#54964)\n- Added `cron.get_entry`. (#54985)\n- Added support for newer monit versions. (#55140)\n- Added btrfs and xfs as valid fstypes for parted and mkfs. (#55209)\n- Added functionality for `cmd.run_all` to accept a list when using powershell. (#55213)\n- Added Azure Blob Storage as an optional external pillar. (#55493)\n- Added ability to turn off FQDNs grains with `enable_fqdns_grains: False`. (#55581)\n- Added `virt.*defined` states. (#55814)\n- Add towncrier tool to the Salt project to help manage CHANGELOG.md file. (#55836)\n- Added Pull Request requirements to documentation (#55862)\n- Add selinux support to file.managed (#40703)\n- Added hold and unhold support for `mac_brew_pkg`. (#55978)\n- States/modules added for managing Helm. (#56081)\n- Added parallel run support for saltcheck. (#56097)\n- Added multiple asserts against module output for saltcheck. (#56101)\n- Added `state.test` as an alias for `state.apply ... test=True`. (#56298)\n- Added default argumetn to `vault.read_secret` and `vault.list_secrets`. (#56311)\n- Added `fromrepo` to `pkg.upgrade` for `pkgng`. (#56368)\n- Added IP filtering by network. (#56394)\n- Added more information for `__virtual__` failures. (#56395)\n- Added logout functionality to docker. (#56439)\n- Added ability to fetch master public key from minion. (#56449)\n- Added `pending_reboot` grain for Windows systems. (#56489)\n- Added support for forcing refresh in zypper. (#56519)\n- Added `refresh_pillar` arg to `grains.setval`. (#56573)\n- Added new roster option `ssh_pre_flight`. (#56488)\n- Added ability to minions to read pillar files from local filesystem, and get commands from remote master. (#56611)\n- Added support for rendering toml states. (#56615)\n- Added `set_path` option for salt-ssh shim. (#56627)\n- Added `win_wua.installed` to check a list of updates that apply to the current Windows build. (#56640)\n- Added ability to compare package versions in Jinja templates. (#56678)\n- Add `auto_detect` feature for `ssh_ext_alternatives`. (#56894)\n- Add ability to display sys.doc style outputs but without actually loading the module. (#56902)\n- Added plist serializer. (#56954)\n- Added support for onedir/pop-build Salt in the `pip` module. (#56988)\n- Add support for disks volumes in virt.running state (#57005)\n- Add virt.all_capabilities helper function (#57009)\n- supervisord.status_bool method (#57049)\n- Added support for msgpack versions>=1.0 (#57122)\n- Added Python 2 deprecation FAQ (#57273)\n- Added support for # of hashing rounds when using pycrypto. (#57355)\n- `fetchonly` parameter added for `pkg.upgrade` when using `pkgng` (FreeBSD). (#57371)\n- Added `efi` parameter to virt module, so `uefi` firmware can be auto selected. (#57397)\n- [#56637](https://github.com/saltstack/salt/pull/56637) - Add ``win_wua.installed`` to the ``win_wua`` execution module\n- Clarify how to get the master fingerprint (#54699)\n\n## Salt 3000.9 (2021-03-10)\n\n### Fixed\n\n- Allow \"extra_filerefs\" as sanitized kwargs for SSH client.\n  Fix regression on \"cmd.run\" when passing tuples as cmd. (#59664)\n- Allow all ssh kwargs as sanitized kwargs for SSH client. (#59748)\n- Fix argument injection bug in restartcheck.restartcheck. This change hardens\n  the fix for CVE-2020-28243.\n\n## Salt 3000.8 (2021-02-09)\n\n### Fixed\n\n- Fix runners that broke when patching for CVE-2021-25281\n- Fix issue with runners in SSE\n\n## Salt 3000.7\n\n### Fixed\n\n- CVE-2020-28243 - Fix local privilege escalation in the restartcheck module. (CVE-2020-28243)\n- CVE-2020-28972 - Ensure authentication to vcenter, vsphere, and esxi server\n  validates the SSL/TLS certificate by default. If you want to skip SSL verification\n  you can use `verify_ssl: False`. (CVE-2020-28972)\n- CVE-2020-35662 - Ensure the asam runner, qingcloud, splunk returner, panos\n  proxy, cimc proxy, zenoss module, esxi module, vsphere module, glassfish\n  module, bigip module, and keystone module validate SSL by default. If you want\n  to skip SSL verification you can use `verify_ssl: False`. (CVE-2020-35662)\n- CVE-2021-25281 - Fix salt-api so it honors eauth credentials for the\n  wheel_async client. (CVE-2021-25281)\n- CVE-2021-25282 - Fix the salt.wheel.pillar_roots.write method so it is not\n  vulnerable to directory traversal. (CVE-2021-25282)\n- CVE-2021-25283 - Fix the jinja render to protect against server side template\n  injection attacks. (CVE-2021-25283)\n- CVE-2021-25284 - Fix cmdmod so it will not log credentials to log levels info\n  and error. (CVE-2021-25284)\n- CVE-2021-3144 - Fix eauth tokens can be used once after expiration. (CVE-2021-3144)\n- CVE-2021-3148 - Fix a command injection in the Salt-API when using the Salt-SSH client. (CVE-2021-3148)\n- CVE-2021-3197 - Fix ssh client to remove ProxyCommand from arguments provided\n  by cli and netapi. (CVE-2021-3197)\n\n## Salt 3000.6\n\n### Fixed\n\n- Fixes salt-ssh authentication when using tty (#58922)\n\n## Salt 3000.5\n\n### Fixed\n\n- Properly validate eauth credentials and tokens along with their ACLs.\n  Prior to this change eauth was not properly validated when calling\n  Salt ssh via the salt-api. Any value for 'eauth' or 'token' would allow a user\n  to bypass authentication and make calls to Salt ssh. (CVE-2020-25592)\n\n## Salt 3000.4\n\n### Fixed\n\n- Prevent shell injections in netapi ssh client (cve-2020-16846)\n- Prevent creating world readable private keys with the tls execution module. (cve-2020-17490)\n\n## 3000.3\n\n### Fixed\n- [#57100](https://github.com/saltstack/salt/pull/57100) - Address Issues in CVE Release\n\n\n### Changed\n- [#56751](https://github.com/saltstack/salt/pull/56751) - Backport 49981\n\n- [#56731](https://github.com/saltstack/salt/pull/56731) - Backport #53994\n- [#56753](https://github.com/saltstack/salt/pull/56753) - Backport 51095\n\n### Fixed\n- [#56237](https://github.com/saltstack/salt/pull/56237) - Fix alphabetical ordering and remove duplicates across all documentation indexes - [@myii](https://github.com/myii)\n- [#56325](https://github.com/saltstack/salt/pull/56325) - Fix hyperlinks to `salt.serializers` and other documentation issues - [@myii](https://github.com/myii)\n\n### Added\n- [#56627](https://github.com/saltstack/salt/pull/56627) - Add new salt-ssh set_path option\n- [#51379](https://github.com/saltstack/salt/pull/56792) - Backport 51379 : Adds .set_domain_workgroup to win_system\n\n## 3000.1\n\n### Removed\n\n### Deprecated\n\n### Changed\n- [#56730](https://github.com/saltstack/salt/pull/56730) - Backport #52992\n## 3000.2\n\n### Fixed\n- [#56987](https://github.com/saltstack/salt/pull/56987) - CVE fix\n\n\n## 3000.1\n\n### Fixed\n\n- [#56082](https://github.com/saltstack/salt/pull/56082) - Fix saltversioninfo grain for new version\n- [#56143](https://github.com/saltstack/salt/pull/56143) - Use encoding when caching pillar data\n- [#56172](https://github.com/saltstack/salt/pull/56172) - Only change mine data if using new allow_tgt feature\n- [#56094](https://github.com/saltstack/salt/pull/56094) - Fix type error in TornadoImporter\n- [#56174](https://github.com/saltstack/salt/pull/56174) - MySQL module fixes\n- [#56149](https://github.com/saltstack/salt/pull/56149) - Fix to scheduler for use of when and splay\n- [#56197](https://github.com/saltstack/salt/pull/56197) - Allows use of inline powershell for cmd.script args\n- [#55894](https://github.com/saltstack/salt/pull/55894) - pdbedit module should check for version 4.8.x or newer\n- [#55906](https://github.com/saltstack/salt/pull/55906) - smartos.vm_present could not handle nics with vrrp_vrid property\n- [#56218](https://github.com/saltstack/salt/pull/56218) - Changed StrictVersion checking of setuptools to LooseVersion\n- [#56099](https://github.com/saltstack/salt/pull/56099) - Fix Windows and macOS requirements handling in setup.py\n- [#56068](https://github.com/saltstack/salt/pull/56068) - Update the bootstrap script to latest version, v2020.02.24\n- [#56185](https://github.com/saltstack/salt/pull/56185) - Fix regression in service states with reload argument\n- [#56341](https://github.com/saltstack/salt/pull/56341) - Revert \"Don't remove one directory level from slspath\"\n- [#56290](https://github.com/saltstack/salt/pull/56290) - Ensures popping lgpo.secedit_data does not throw KeyError\n- [#56339](https://github.com/saltstack/salt/pull/56339) - Fix win_dns_client when used with scheduler\n- [#56215](https://github.com/saltstack/salt/pull/56215) - Fix for unless requisite when pip is not installed\n- [#56060](https://github.com/saltstack/salt/pull/56060) - Fix regex string for Del and DelVals\n- [#56337](https://github.com/saltstack/salt/pull/56337) - Handle Adapter Type 53 and Undefined Types\n- [#56160](https://github.com/saltstack/salt/pull/56160) - Fix issue with existing reg_dword entries\n- [#56358](https://github.com/saltstack/salt/pull/56358) - Fix version instantiation when minor is an empty string\n- [#56272](https://github.com/saltstack/salt/pull/56272) - Properly resolve the policy name\n- [#56310](https://github.com/saltstack/salt/pull/56310) - Only process ADMX files when loading policies\n- [#56327](https://github.com/saltstack/salt/pull/56327) - keep cache_copied_files variable a list\n- [#56360](https://github.com/saltstack/salt/pull/56360) - dont require virtualenv.virtualenv_version call, removed in 20.0.10\n- [#56378](https://github.com/saltstack/salt/pull/56378) - Include _version.py if building wheel\n- [#56376](https://github.com/saltstack/salt/pull/56376) - Fix win deps\n- [#56418](https://github.com/saltstack/salt/pull/56418) - Ensure version.py included before we install\n- [#56435](https://github.com/saltstack/salt/pull/56435) - Update mac build scripts\n\n\n### Added\n\n## 3000 - Neon [2020-02-10]\n\n### Removed\n\n- [#54474](https://github.com/saltstack/salt/issues/54474) via [#54475](https://github.com/saltstack/salt/pull/54475) - `virt.pool_delete` fast parameter removed. - [@cbosdo](https://github.com/cbosdo)\n- [#54943](https://github.com/saltstack/salt/pull/54943) - Removed RAET transport method per the deprecation schedule - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#54983](https://github.com/saltstack/salt/pull/54983) - Removed Hipchat module, due to Hipchat discontinuation - [@mchugh19](https://github.com/mchugh19)\n- [#55197](https://github.com/saltstack/salt/pull/55197) - Removed Google+ link since Google+ is gone - [@sramkrishna](https://github.com/sramkrishna)\n- [#55539](https://github.com/saltstack/salt/pull/55539) - Removed salt.auth.Authorize class and the `any_auth` method\n- [#55552](https://github.com/saltstack/salt/pull/55552) - Removed the config options `hgfs_env_whitelist`, `hgfs_env_blacklist`, `svnfs_env_whitelist`, and `svnfs_env_whitelist` in favor of `hgfs_saltenv_whitelist`, `hgfs_saltenv_blacklist`, `svnfs_saltenv_whitelist`, `svnfs_saltenv_blacklist`.\n- [#55569](https://github.com/saltstack/salt/pull/55569) - Removed nova cloud driver in favor of the openstack driver.\n- [#55573](https://github.com/saltstack/salt/pull/55573) - Removed `quiet` kwarg in cmd.run state module. Please set `output_loglevel` to `quiet` instead.\n- [#55609](https://github.com/saltstack/salt/pull/55609) - Removed smartos grains `hypervisor_uuid` and `datacenter` in favor of `mdata:sdc:server_uuid` and `mdata:sdc:datacenter_name`.\n- [#55641](https://github.com/saltstack/salt/pull/55641) - Removed `enviroment` kwarg from heat state and execution module. Please use correct spelling `environment`.\n- [#55680](https://github.com/saltstack/salt/pull/55680) - Removed deprecated args from several `dockermod` functions - [@Ch3LL](https://github.com/Ch3LL)\n- [#55682](https://github.com/saltstack/salt/pull/55682) - Removed `get_known_host` and `recv_known_host` functions from ssh module.\n- [#55722](https://github.com/saltstack/salt/pull/55722) - Removed all functions in salt/utils/__init__.py.\n- [#55725](https://github.com/saltstack/salt/pull/55725) - Removed `gitfs_env_whitelist` and `gitfs_env_blacklist` in favor of `gitfs_saltenv_whitelist` and `gitfs_saltenv_blacklist`.\n\n### Deprecated\n\n- [#55592](https://github.com/saltstack/salt/pull/55592) - Add deprecation warning for `glance` state and execution module  - [@Ch3LL](https://github.com/Ch3LL)\n- [#55612](https://github.com/saltstack/salt/pull/55612) - Bump keystone deprecation to Sodium - [@Ch3LL](https://github.com/Ch3LL)\n- [#55614](https://github.com/saltstack/salt/pull/55614) - Deprecate jinja filters for Neon - [@Ch3LL](https://github.com/Ch3LL)\n- [#55664](https://github.com/saltstack/salt/pull/55664) - Bump deprecation warning to Aluminium for neutron module - [@Ch3LL](https://github.com/Ch3LL)\n- [#55679](https://github.com/saltstack/salt/pull/55679) - Deprecate `boto_vpc.describe_route_table` in Magnesium - [@Ch3LL](https://github.com/Ch3LL)\n- [#55726](https://github.com/saltstack/salt/pull/55726) - Deprecate `override_name` in Sodium - [@Ch3LL](https://github.com/Ch3LL)\n\n### Changed\n\n- [SEP 1](https://github.com/saltstack/salt-enhancement-proposals/blob/master/accepted/0001-changelog-format.md), [SEP 14](https://github.com/saltstack/salt-enhancement-proposals/pull/20) - Adopted keepachangelog format.\n- [SEP 14](https://github.com/saltstack/salt-enhancement-proposals/pull/20) - Changed to numeric versions.\n- [#49078](https://github.com/saltstack/salt/issues/49078) via [#54572](https://github.com/saltstack/salt/pull/54572) - Use `ip link set iface up/down` instead of `ifup/ifdown` - [@dmurphy18](https://github.com/dmurphy18)\n- [#50023](https://github.com/saltstack/salt/pull/50023) via [#54620](https://github.com/saltstack/salt/pull/54620) - Change to reduce `roster_matcher` internal complexity - [@kojiromike](https://github.com/kojiromike)\n- [#50579](https://github.com/saltstack/salt/pull/50579) via [#55389](https://github.com/saltstack/salt/pull/55389) - Update kafka returner to use confluent kafka - [@justindesilets](https://github.com/justindesilets)\n- [#52749](https://github.com/saltstack/salt/pull/52749) - Padding change in versions report output - [@dwoz](https://github.com/dwoz)\n- [#54013](https://github.com/saltstack/salt/pull/54103) - Set `session_id` cookie in the `rest_tornado` backend.\n- [#55002](https://github.com/saltstack/salt/pull/55002) - Changed `mdadm_raid` metadata to text to allow float pillar data - [@aplanas](https://github.com/aplanas)\n- [#55354](https://github.com/saltstack/salt/pull/55354) - Changed naive usage to use wrapped msgpack - [@Akm0d](https://github.com/Akm0d)\n- [#55423](https://github.com/saltstack/salt/pull/55423) - Changed default configs to be immutable - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55464](https://github.com/saltstack/salt/pull/55464) - Changed to name subprocesses - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55500](https://github.com/saltstack/salt/pull/55500) - Start Linting Under Py3 - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55643](https://github.com/saltstack/salt/pull/55643) - Remove deprecation for `refresh_db` in aptpkg - [@Ch3LL](https://github.com/Ch3LL)\n- [#55660](https://github.com/saltstack/salt/pull/55660) - Use wrapped json module for ThreadsafeProxy - [@Akm0d](https://github.com/Akm0d)\n- [#55683](https://github.com/saltstack/salt/pull/55683) - Changed `prune_services` in the firewall state module to be False by default. And update `force_masquerade` to be False by default in the firewall execution module.\n- [#55739](https://github.com/saltstack/salt/pull/55739) - Microoptimized the command to set FreeBSD's virtual grain - [@asomers](https://github.com/asomers)\n\n### Fixed\n\n- [#6922](https://github.com/saltstack/salt/pull/6922) via [#51343](https://github.com/saltstack/salt/pull/51343) - Fixed errors when producing network errors - [@waynew](https://github.com/waynew)\n- [#13971](https://github.com/saltstack/salt/issues/13971) via [#53462](https://github.com/saltstack/salt/pull/53462) - Support all valid protos for remote sources - []\n- [#37646](https://github.com/saltstack/salt/pull/37646) - Fixed recursion error during msgpack serialization - [@waynew](https://github.com/waynew)\n- [#39875](https://github.com/saltstack/salt/pull/39875) via [#52710](https://github.com/saltstack/salt/pull/52710) and [#54665](https://github.com/saltstack/salt/pull/54665) - Fixed complex grain comparison - [@mickenordin](https://github.com/mickenordin)\n- [#41818](https://github.com/saltstack/salt/pull/41818) via [#51988](https://github.com/saltstack/salt/pull/51988) and [#54664](https://github.com/saltstack/salt/pull/54664) - Fixed `file.comment` and `file.uncomment` for when the pattern existed in both forms - [@mbunkus](https://github.com/mbunkus)\n- [#49222](https://github.com/saltstack/salt/pull/49222) via [#49223](https://github.com/saltstack/salt/pull/49223) and [#54668](https://github.com/saltstack/salt/pull/54668) - Fixed salt-key `token_file` creation when using external auth - [@msciciel](https://github.com/msciciel)\n- [#49256](https://github.com/saltstack/salt/pull/49256) via [#55060](https://github.com/saltstack/salt/pull/55060) - Fixed proxmox failure to apply settings - [@BrianSidebotham](https://github.com/BrianSidebotham)\n- [#49490](https://github.com/saltstack/salt/pull/49490) via [#55404](https://github.com/saltstack/salt/pull/55404) - Fixed misleading cmdmod error message - [@rares-pop](https://github.com/rares-pop) and [@joechainz](https://github.com/joechainz)\n- [#49748](https://github.com/saltstack/salt/pull/49748) via [#49843](https://github.com/saltstack/salt/pull/49843) and [#54546](https://github.com/saltstack/salt/pull/54546) - Fixed `file.rename` to be successful when target exists and force not set - [@MTecknology](https://github.com/MTecknology)\n- [#49903](https://github.com/saltstack/salt/pull/49903) via [#54625](https://github.com/saltstack/salt/pull/54625) - Fixed inconsistencies with `consul_pillar` configuration parsing - [@FraaJad](https://github.com/FraaJad)\n- [#49977](https://github.com/saltstack/salt/pull/49977) via [#55050](https://github.com/saltstack/salt/pull/55050) - [#4997]Fix novaclient api - [@slivik](https://github.com/slivik)\n- [#50041](https://github.com/saltstack/salt/pull/50041) via [#54566](https://github.com/saltstack/salt/pull/54566) - Actually use `extra_install_flags` in `win_pkg` module - [@cmcmarrow](https://github.com/cmcmarrow)\n- [#50374](https://github.com/saltstack/salt/pull/50374) via [#54616](https://github.com/saltstack/salt/pull/54616) - Fixed `local_cache` returner to report proper path in error message - [@isbm](https://github.com/isbm)\n- [#50523](https://github.com/saltstack/salt/pull/50523) via [#54605](https://github.com/saltstack/salt/pull/54605) - Fixed OS arch fallback when no `rpm` is installed - [@isbm](https://github.com/isbm)\n- [#50757](https://github.com/saltstack/salt/pull/50757) via [#54638](https://github.com/saltstack/salt/pull/54638) - Fixed restartcheck bytestring bug - [@10ne1](https://github.com/10ne1)\n- [#50938](https://github.com/saltstack/salt/pull/50938) via [#54642](https://github.com/saltstack/salt/pull/54642) - Fixed performance issue with undefined opkg functions - [@andzn](https://github.com/andzn)\n- [#50970](https://github.com/saltstack/salt/pull/50970) via [#54631](https://github.com/saltstack/salt/pull/54631) - Fix `win_path` index checks to allow for 0 - [@jalandis](https://github.com/jalandis)\n- [#51038](https://github.com/saltstack/salt/pull/51038) via [#55706](https://github.com/saltstack/salt/pull/55706) - Fixed zabbix module failure on boolean return - [@thechile](https://github.com/thechile)\n- [#51537](https://github.com/saltstack/salt/pull/51537) via [#51538](https://github.com/saltstack/salt/pull/51538) and [#54650](https://github.com/saltstack/salt/pull/54650) - Fixed directory vs. file issue in `salt.utils.etcd_util` - [@arizvisa](https://github.com/arizvisa)\n- [#51711](https://github.com/saltstack/salt/issues/52788) via [#51718](https://github.com/saltstack/salt/pull/51718) - Fix Cheetah template renderer - [@arizvisa](https://github.com/arizvisa)\n- [#51785](https://github.com/saltstack/salt/pull/51785) via [#54645](https://github.com/saltstack/salt/pull/54645) - Fixed POSIX vs. Windows inconsistencies in `salt.utils.path.which` - [@arizvisa](https://github.com/arizvisa)\n- [#51795](https://github.com/saltstack/salt/issues/51795) via [#51801](https://github.com/saltstack/salt/pull/51801) - Fix netbox execution module cannot be loaded - [@misch42](https://github.com/misch42)\n- [#51811](https://github.com/saltstack/salt/pull/51811) via [#51813](https://github.com/saltstack/salt/pull/51813) and [#54647](https://github.com/saltstack/salt/pull/54647) - Fixed `npm` version check on Windows - [@arizvisa](https://github.com/arizvisa)\n- [#51915](https://github.com/saltstack/salt/pull/51915) via [#54685](https://github.com/saltstack/salt/pull/54685) - Changed nulls to empty strings to prevent Zabbix API errors - [@timdufrane](https://github.com/timdufrane)\n- [#51929](https://github.com/saltstack/salt/pull/51929) via [#54611](https://github.com/saltstack/salt/pull/54611) - Fixed lvm to not show errors when pv, lv, or vg is not expected - [@aplanas](https://github.com/aplanas)\n- [#51954](https://github.com/saltstack/salt/pull/51954) via [#54603](https://github.com/saltstack/salt/pull/54603) - Ignore misleading errors during `linuxlvm.pvcreate` and `.pvremove` - [@aplanas](https://github.com/aplanas)\n- [#52230](https://github.com/saltstack/salt/pull/52230) via [#52352](https://github.com/saltstack/salt/pull/52352) and [#54640](https://github.com/saltstack/salt/pull/54640) - Fixed salt failing on missing `_syspaths` variables - [@alan-cugler](https://github.com/alan-cugler)\n- [#52265](http://www.github.com/saltstack/salt/issues/52265) via [#54569](https://github.com/saltstack/salt/pull/54569) - Stop the Windows installer from hanging - [@twangboy](https://github.com/twangboy)\n- [#52431](https://github.com/saltstack/salt/pull/52431) via [#52574](https://github.com/saltstack/salt/pull/52574) and [#54687](https://github.com/saltstack/salt/pull/54687) - Fix inconsistent `virt.get_xml` usage - [@zer0def](https://github.com/zer0def)\n- [#52538](https://github.com/saltstack/salt/pull/52538) via [#52747](https://github.com/saltstack/salt/pull/52747) and [#54678](https://github.com/saltstack/salt/pull/54678) - Fix issue on Python3 when reading csv pillar with binary format - [@que5o](https://github.com/que5o)\n- [#52589](https://github.com/saltstack/salt/pull/52589) via [#54536](https://github.com/saltstack/salt/pull/54536) - Ignore retcode when checking filesystem type - [@terminalmage](https://github.com/terminalmage)\n- [#52786](https://github.com/saltstack/salt/pull/52786) via [#54588](https://github.com/saltstack/salt/pull/54588) - Fixed setting homedrive, profile, logonscript, and description for `user.present` under Windows- [@twangboy](https://github.com/twangboy)\n- [#52788](https://github.com/saltstack/salt/issues/52788) via [#51706](https://github.com/saltstack/salt/pull/51706) - Ignore `HOST_NOT_FOUND` and `NO_DATA` when resolving FQDN - [@aplanas](https://github.com/aplanas)\n- [#53017](https://github.com/saltstack/salt/issues/53401) via [#54196](https://github.com/saltstack/salt/pull/54196) - Fixed virt state on stopped VMs, virt.running's use of virt.vm_state, virt.pool_running, and virt.network_define - [@cbosdo](https://github.com/cbosdo)\n- [#53401](https://github.com/saltstack/salt/issues/53401) via [#54166](https://github.com/saltstack/salt/pull/54166) - Fixed Docker image grains and pillar - [@waynew](https://github.com/waynew)\n- [#53600](https://github.com/saltstack/salt/issues/53600) via [#54480](https://github.com/saltstack/salt/pull/54480) - Allow Windows minion to manage a binary file from `ext_pillar` - [@xeacott](https://github.com/xeacott)\n- [#53935](https://github.com/saltstack/salt/pull/53935) - Poweroff when shutting down FreeBSD, NetBSD, and OpenBSD - [@morganwillcock](https://github.com/morganwillcock)\n- [#54072](https://github.com/saltstack/salt/pull/54072) - Check for Windows registry key before trying to list it - [@twangboy](https://github.com/twangboy)\n- [#54177](https://github.com/saltstack/salt/issues/54177) - Fixed `file.managed` bug with `contents_newline` flag - [@xeacott](https://github.com/xeacott)\n- [#54197](https://github.com/saltstack/salt/pull/54197) - `virt.network_define` can now create NAT networks - [@cbosdo](https://github.com/cbosdo)\n- [#54216](https://github.com/saltstack/salt/pull/54216) - Fixed Homebrew cask namespace support - [@cdalvaro](https://github.com/cdalvaro)\n- [#54335](https://github.com/saltstack/salt/pull/54335) - Fixed `virt.full_info` output - [@cbosdo](https://github.com/cbosdo)\n- [#54402](https://github.com/saltstack/salt/pull/54402) via [#54900](https://github.com/saltstack/salt/pull/54900) - Fix gitfs to use bytes when using gitpython with python3.x - [@vin01](https://github.com/vin01)\n- [#54411](https://github.com/saltstack/salt/pull/54411) - Correctly handle `wusa` 3010 return code - [@tlemarchand](https://github.com/tlemarchand)\n- [#54653](https://github.com/saltstack/salt/pull/54653) via [#55403](https://github.com/saltstack/salt/pull/55403) - Fixed issue with `publish.publish` trim mods after comma split - [@bmiguel-teixeira](https://github.com/bmiguel-teixeira) and [@saltybaker](https://github.com/saltybaker)\n- [#54769](https://github.com/saltstack/salt/pull/54769) - Fixed `cmd.run` to call bash only when necessary on macOS - [@cdalvaro](https://github.com/cdalvaro)\n- [#54896](https://github.com/saltstack/salt/pull/54896) - Fix multiple LGPO issues - [@twangboy](https://github.com/twangboy)\n- [#55003](https://github.com/saltstack/salt/pull/55003) - Fix `collections` ABC warning - [@aplanas](https://github.com/aplanas)\n- [#55005](https://github.com/saltstack/salt/pull/55005) - Fixed `mount.remount` when fstype was unset - [@aplanas](https://github.com/aplanas)\n- [#55006](https://github.com/saltstack/salt/pull/55006) - Fixed args/kwargs bug in loop state - [@aplanas](https://github.com/aplanas)\n- [#55052](https://github.com/saltstack/salt/pull/55052) - Fixed fileclient for ftp connections - [@garethgreenaway](https://github.com/garethgreenaway)\n- [#55065](https://github.com/saltstack/salt/pull/55065) - Fixed multiprocessing process after fork and finalize regression - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55083](https://github.com/saltstack/salt/pull/55083) - Fixed iLo module to use proper tempfile settings - [@garethgreenaway](https://github.com/garethgreenaway)\n- [#55137](https://github.com/saltstack/salt/pull/55137) - Fixed `smartos_imgadm` to correctly handle orphan images - [@sjorge](https://github.com/sjorge)\n- [#55149](https://github.com/saltstack/salt/pull/55149) via [#55497](https://github.com/saltstack/salt/pull/55497) - Removed incorrect pass of opts to `compound_match.match` - [@Akm0d](https://github.com/Akm0d)\n- [#55165](https://github.com/saltstack/salt/pull/55165) - Fixed `virt.volume_infos` to handle volumes missing since last refresh - [@cbosdo](https://github.com/cbosdo)\n- [#55190](https://github.com/saltstack/salt/pull/55190) - Fixed missing lazyloader functionality - [@max-arnold](https://github.com/max-arnold) and [@mattp-](https://github.com/mattp-)\n- [#55191](https://github.com/saltstack/salt/pull/55191) - Fixed missing `list_downloaded` for apt module - [@brejoc](https://github.com/brejoc)\n- [#55196](https://github.com/saltstack/salt/pull/55196) - Fixed `schedule.modify` to use function from current job - [@garethgreenaway](https://github.com/garethgreenaway)\n- [#55207](https://github.com/saltstack/salt/pull/55207) - Fixed complex CORS option on CherryPy - [@niflostancu](https://github.com/niflostancu)\n- [#55216](https://github.com/saltstack/salt/pull/55216) - Fixed failure to check for jid before returning data - [@brejoc](https://github.com/brejoc)\n- [#55258](https://github.com/saltstack/salt/pull/55258) - Fixed aptpkg.info to return only installed packages - [@mateiw](https://github.com/mateiw)\n- [#55271](https://github.com/saltstack/salt/pull/55271) - Fixed Py3 compatability issue in upstart - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55336](https://github.com/saltstack/salt/pull/55336) - Fixed grains to allow `__utils__` in grains modules - [@max-arnold](https://github.com/max-arnold)\n- [#55351](https://github.com/saltstack/salt/pull/55351) - Fixed `virt.get_hypervisor()` - [@cbosdo](https://github.com/cbosdo)\n- [#55374](https://github.com/saltstack/salt/pull/55374) - Fixed issue with `zfs.filesystem_present` under Python3 - [@silenius](https://github.com/silenius)\n- [#55434](https://github.com/saltstack/salt/pull/55434) - Stopped removing a directory level from slspath in templates - [@terminalmage](https://github.com/terminalmage)\n- [#55441](https://github.com/saltstack/salt/pull/55441) - Fixed bug in logging - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55452](https://github.com/saltstack/salt/pull/55452) - Fixed missing service.reload alias in `gentoo_service` module - [@vulnbe](https://github.com/vulnbe)\n- [#55472](https://github.com/saltstack/salt/pull/55472) - Fixed several Py2/Py3 Unicode issues - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55501](https://github.com/saltstack/salt/pull/55501) - Fixed slowdown by using ss filter to match TCP connections on Linux - [@cifvts](https://github.com/cifvts)\n- [#55510](https://github.com/saltstack/salt/pull/55510) - Corrected `num_cpus` and `cpu_model` grains for IBM/S390 - [@FerrySchuller](https://github.com/FerrySchuller)\n- [#55532](https://github.com/saltstack/salt/pull/55532) - Fixed missing beacons timeout error handling - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55534](https://github.com/saltstack/salt/pull/55534) - Stopped `_virtual` from hard coding the 'virtual' key. - [@cmcmarrow](https://github.com/cmcmarrow)\n- [#55540](https://github.com/saltstack/salt/pull/55540) - Fixed race condition in service.running on systemd - [@terminalmage](https://github.com/terminalmage)\n- [#55557](https://github.com/saltstack/salt/pull/55557) - Changed to use UTC times for jids - [@dwoz](https://github.com/dwoz)\n- [#55578](https://github.com/saltstack/salt/pull/55578) - Fixed `postgres.datadir_init` to use `checksums` arg - [@meaksh](https://github.com/meaksh)\n- [#55580](https://github.com/saltstack/salt/pull/55580) - Fixed inconsistency with `pkg.list_pkgs` when using `attr` on RHEL systems - [@meaksh](https://github.com/meaksh)\n- [#55582](https://github.com/saltstack/salt/pull/55582) - Do not report patches as installed when not all the related pkgs are installed (yumpkg) - [@meaksh](https://github.com/meaksh)\n- [#55583](https://github.com/saltstack/salt/pull/55583) - Fixed `utils.network` issue with IPv6 that could cause a crash - [@meaksh](https://github.com/meaksh)\n- [#55584](https://github.com/saltstack/salt/pull/55584) - Stopped breaking multiline repo files in `yumpkg` - [@meaksh](https://github.com/meaksh)\n- [#55589](https://github.com/saltstack/salt/pull/55589) - Acme state fixes - [@github-abcde](https://github.com/github-abcde)\n- [#55607](https://github.com/saltstack/salt/pull/55607) - Fixed failure to fire events to all syndics from MoM when using tcp transport - [@lukasraska](https://github.com/lukasraska)\n- [#55616](https://github.com/saltstack/salt/pull/55616) - Fixed jboss `run_operation` and `datasource_exists` - [@cmcmarrow](https://github.com/cmcmarrow)\n- [#55624](https://github.com/saltstack/salt/pull/55624) - Fixed issue with matchers, fallback to `ext_pillar` if there is no pillar in __opts__ - [@vquiering](https://github.com/vquiering)\n- [#55635](https://github.com/saltstack/salt/pull/55635) - Fixed issue with minion signing during/after job execution - [@lukasraska](https://github.com/lukasraska)\n- [#55651](https://github.com/saltstack/salt/pull/55651) - Fixed `ldap.managed` errors - [@sathieu](https://github.com/sathieu)\n- [#55655](https://github.com/saltstack/salt/pull/55655) - Fixed using password hashes with MariaDB - [@pprkut](https://github.com/pprkut)\n- [#55672](https://github.com/saltstack/salt/pull/55672) - Fixed issue with busy guestfs mount folders - [@cbosdo](https://github.com/cbosdo)\n- [#55694](https://github.com/saltstack/salt/pull/55694) - Fixed S3 pillar pagination - [@garethgreenaway](https://github.com/garethgreenaway)\n- [#55705](https://github.com/saltstack/salt/pull/55705) - Fixed zypper upgrade fromrepo - [@pkwestm](https://github.com/pkwestm)\n- [#55730](https://github.com/saltstack/salt/pull/55730) - Restored original minion configured `publish_port` behavior - [@mattp-](https://github.com/mattp-) and [@Ch3LL](https://github.com/Ch3LL)\n- [#55780](https://github.com/saltstack/salt/pull/55780) - Fallback to disabled `LG_INCLUDE_INDIRECT` when DC is unavailable - [@lukasraska](https://github.com/lukasraska)\n- [#55795](https://github.com/saltstack/salt/pull/55795) - Fixed issue with whitespace in ADML data - [@twangboy](https://github.com/twangboy)\n- [#55796](https://github.com/saltstack/salt/pull/55796) - Fixed cached `osrelease_info` grain type - [@srg91](https://github.com/srg91)\n- [#55817](https://github.com/saltstack/salt/pull/55817) - Bring #51372 to Master Branch - [@twangboy](https://github.com/twangboy)\n- [#55823](https://github.com/saltstack/salt/pull/55823) - Fix issue with overly long names in the LGPO module - [@twangboy](https://github.com/twangboy)\n- [#55843](https://github.com/saltstack/salt/pull/55843) - Fixed `file.mkdir` to respect `test=True` - [@mchugh19](https://github.com/mchugh19)\n- [#55845](https://github.com/saltstack/salt/pull/55845) - Fixed logging to return multiprocessing queue if it's already set - [@s0undt3ch](https://github.com/s0undt3ch)\n\n### Added\n\n- [#16674](https://github.com/saltstack/salt/pull/16674) via [#50083](https://github.com/saltstack/salt/pull/50083) and [#54632](https://github.com/saltstack/salt/pull/54632) - Added `migrate` support for Django module - [@jrbeilke](https://github.com/jrbeilke)\n- [#39475](https://github.com/saltstack/salt/issues/39475) - Added `hardlink` for `file` state and module - [@arizvisa](https://github.com/arizvisa)\n- [#48792](https://github.com/saltstack/salt/pull/48792) via [#49399](https://github.com/saltstack/salt/pull/49399) and [#54879](https://github.com/saltstack/salt/pull/54879) - Add IIS webconfiguration - [@tlemarchand](https://github.com/tlemarchand)\n- [#49212](https://github.com/saltstack/salt/pull/49212) via [#49378](https://github.com/saltstack/salt/pull/49378) - Added `minion_id_remove_domain`- [@markuskramerIgitt](https://github.com/markuskramerIgitt)\n- [#49250](https://github.com/saltstack/salt/pull/49250) via [#54657](https://github.com/saltstack/salt/pull/54657) - Add capability `jboss7` to keep unchanged deployments - [@garethgreenaway](https://github.com/garethgreenaway)\n- [#49481](https://github.com/saltstack/salt/pull/49481) via [#54532](https://github.com/saltstack/salt/pull/54532) - Added `grains_blacklist` to block specific grains - [@rongzeng54](https://github.com/rongzeng54)\n- [#50005](https://github.com/saltstack/salt/pull/50005) via [#54651](https://github.com/saltstack/salt/pull/54651) - Added ability to create events based on an arbitrary script's output - [@austinpapp](https://github.com/austinpapp)\n- [#50306](https://github.com/saltstack/salt/pull/50306) via [#54542](https://github.com/saltstack/salt/pull/54542) - Added `noaction` flag for opkg execution module - [@rares-pop](https://github.com/rares-pop)\n- [#50706](https://github.com/saltstack/salt/pull/50706) via [#54604](https://github.com/saltstack/salt/pull/54604) - Added `token` to `disk.blkid` to allow extended search - [@aplanas](https://github.com/aplanas)\n- [#50953](https://github.com/saltstack/salt/pull/50953) via [#54548](https://github.com/saltstack/salt/pull/54548) - Add `nvme_nqn` grain - [@sdodsley](https://github.com/sdodsley)\n- [#51047](https://github.com/saltstack/salt/pull/51047) via [#55253](https://github.com/saltstack/salt/pull/55253) - Added new execution module for troubleshooting Jinja map files- [@terminalmage](https://github.com/terminalmage) and [@max-arnold](https://github.com/max-arnold)\n- [#51074](https://github.com/saltstack/salt/pull/51074) via [#54613](https://github.com/saltstack/salt/pull/54613) - Added `fat` parameter to disk module to allow specifying FAT sizes - [@aplanas](https://github.com/aplanas)\n- [#51385](https://github.com/saltstack/salt/pull/51385) via [#54656](https://github.com/saltstack/salt/pull/54656) - Added support for directories and checking for free space in the `disk` state - [@maxim-sermin](https://github.com/maxim-sermin)\n- [#51758](https://github.com/saltstack/salt/pull/51758) via [#55400](https://github.com/saltstack/salt/pull/55400) - Added cwd grain - [@theskabeater](https://github.com/theskabeater) and [@dwoz](https://github.com/dwoz)\n- [#52293](https://github.com/saltstack/salt/pull/52293) via [#55723](https://github.com/saltstack/salt/pull/55723) - Added saltenv support in slsutil.renderer - [@afischer-opentext-com](https://github.com/afischer-opentext-com)\n- [#52458](https://github.com/saltstack/salt/pull/52458) via [#54623](https://github.com/saltstack/salt/pull/54623) - Added `camel_to_snake_case` and `snake_to_camel_case` to stringutils - [@github-abcde](https://github.com/github-abcde)\n- [#52715](https://github.com/saltstack/salt/pull/52715) via [#54577](https://github.com/saltstack/salt/pull/54577) - Added webhook support to Slack state - [@garethgreenaway](https://github.com/garethgreenaway)\n- [#52764](https://github.com/saltstack/salt/pull/52764) via [#54058](https://github.com/saltstack/salt/pull/54058) - Added vSphere tagging ability - [@xeacott](https://github.com/xeacott)\n- [#53307](https://github.com/saltstack/salt/pull/53307) - Added slot parsing inside nested state data structures - [@max-arnold](https://github.com/max-arnold)\n- [#53621](https://github.com/saltstack/salt/pull/53621) - Added support for `git_pillar_update_interval` - [@sathieu](https://github.com/sathieu)\n- [#53736](https://github.com/saltstack/salt/issues/53736) - Added index get_settings, put_settings methods for Elasticsearch module. - [@Oloremo](https://github.com/Oloremo)\n- [#53738](https://github.com/saltstack/salt/pull/53738) - Added `request_interval` feature to `http.wait_for_successful_query` module - [@Oloremo](https://github.com/Oloremo)\n- [#53959](https://github.com/saltstack/salt/pull/53959) - Added additional optional `warnings` to `test` module - [@max-arnold](https://github.com/max-arnold)\n- [#54505](https://github.com/saltstack/salt/issues/54505) - Added cluster get_settings, put_settings and flush_synced methods for Elasticsearch module. - [@Oloremo](https://github.com/Oloremo)\n- [#54518](https://github.com/saltstack/salt/pull/54518) via [#54526](https://github.com/saltstack/salt/pull/54526) - Add salt-cloud support for Tencent Cloud - [@likexian](https://github.com/likexian)\n- [#54902](https://github.com/saltstack/salt/pull/54902) - Added `cert_info` beacon to get cert information from local files - [@nicholasmhughes](https://github.com/nicholasmhughes)\n- [#54903](https://github.com/saltstack/salt/pull/54903) - Added multipart/form-data file posting to `http.query` util - [@nicholasmhughes](https://github.com/nicholasmhughes)\n- [#54948](https://github.com/saltstack/salt/pull/54948) - Added ability to pass grains on minion startup event - [@admd](https://github.com/admd)\n- [#54955](https://github.com/saltstack/salt/pull/54955) - Added root parameter to useradd, shadow and groupadd - [@aplanas](https://github.com/aplanas)\n- [#54956](https://github.com/saltstack/salt/pull/54956) - Added root parameter for wait and run states - [@aplanas](https://github.com/aplanas)\n- [#54958](https://github.com/saltstack/salt/pull/54958) - Added optional root parameter for systemd - [@aplanas](https://github.com/aplanas)\n- [#54959](https://github.com/saltstack/salt/pull/54959) - Added new chroot module - [@aplanas](https://github.com/aplanas)\n- [#54960](https://github.com/saltstack/salt/pull/54960) - Added new freezer module - [@aplanas](https://github.com/aplanas)\n- [#54961](https://github.com/saltstack/salt/pull/54961) - Added all subvolume commands to btrfs - [@aplanas](https://github.com/aplanas)\n- [#54965](https://github.com/saltstack/salt/pull/54965) - Added fstab present/absent to mount state - [@aplanas](https://github.com/aplanas)\n- [#54977](https://github.com/saltstack/salt/pull/54977) - Added xml state & module - [@mchugh19](https://github.com/mchugh19)\n- [#54981](https://github.com/saltstack/salt/pull/54981) - Added `ssh_auth.manage` to both add _and_ remove ssh keys - [@mchugh19](https://github.com/mchugh19)\n- [#54982](https://github.com/saltstack/salt/pull/54982) - Added new AWS SSM module - [@mchugh19](https://github.com/mchugh19)\n- [#54984](https://github.com/saltstack/salt/pull/54984) - Added saltutil states to match saltutil modules - [@mchugh19](https://github.com/mchugh19) and [@max-arnold](https://github.com/max-arnold)\n- [#54991](https://github.com/saltstack/salt/pull/54991) - Added keystore state and modules for Java keystore files - [@mchugh19](https://github.com/mchugh19)\n- [#54992](https://github.com/saltstack/salt/pull/54992) - Added ability to use salt modules in onlyif and unless - [@mchugh19](https://github.com/mchugh19) and [@gtmanfred](https://github.com/gtmanfred)\n- [#54993](https://github.com/saltstack/salt/pull/54993) - Added support for parsing slot results - [@mchugh19](https://github.com/mchugh19)\n- [#54996](https://github.com/saltstack/salt/pull/54996) - Added `binds` parameter for `run_chroot` - [@aplanas](https://github.com/aplanas)\n- [#55001](https://github.com/saltstack/salt/pull/55001) - Added ability to ignore errors on `mdadm_raid.examine` - [@aplanas](https://github.com/aplanas)\n- [#55047](https://github.com/saltstack/salt/pull/55047) - Added ability to deprecate by date - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55145](https://github.com/saltstack/salt/pull/55145) and [#50150](https://github.com/saltstack/salt/pull/50150) - Added status code lists and status regex for `http.query` state - [@Ajnbro](https://github.com/Ajnbro) and [@mchugh19](https://github.com/mchugh19)\n- [#55150](https://github.com/saltstack/salt/pull/55150) - Added 'ppc64le' as a valid RPM package architecture - [@meaksh](https://github.com/meaksh)\n- [#55195](https://github.com/saltstack/salt/pull/55195) - Added `salt_version` module - [@rallytime](https://github.com/rallytime) and [@max-arnold](https://github.com/max-arnold)\n- [#55200](https://github.com/saltstack/salt/pull/55200) - Added `virt.pool_deleted` state - [@cbosdo](https://github.com/cbosdo)\n- [#55202](https://github.com/saltstack/salt/pull/55202) - Added test ability and pool editing to `virt.pool_running` - [@cbosdo](https://github.com/cbosdo)\n- [#55203](https://github.com/saltstack/salt/pull/55203) - Adds enabled kwarg to `aptpkg` module - [@brejoc](https://github.com/brejoc)\n- [#55245](https://github.com/saltstack/salt/pull/55245) - Adding kernel boot parameters to libvirt xml - [@ldeweysuse](https://github.com/ldeweysuse)\n- [#55256](https://github.com/saltstack/salt/pull/55256) - Added status to dpkg.info response - [@mateiw](https://github.com/mateiw)\n- [#55342](https://github.com/saltstack/salt/pull/55342) - Added Slack webhook returner - [@cdalvaro](https://github.com/cdalvaro)\n- [#55345](https://github.com/saltstack/salt/pull/55345) - Add chroot apply_, sls, and highstate for state execution - [@aplanas](https://github.com/aplanas)\n- [#55346](https://github.com/saltstack/salt/pull/55346) - Added `virt.pool_capabilities` module - [@cbosdo](https://github.com/cbosdo)\n- [#55418](https://github.com/saltstack/salt/pull/55418) - Added clean_parent argument for the archive state. - [@Oloremo](https://github.com/Oloremo)\n- [#55420](https://github.com/saltstack/salt/pull/55420) - Added performance tracing/logging to gitfs file_list cache rebuild - [@duckfez](https://github.com/duckfez)\n- [#55424](https://github.com/saltstack/salt/pull/55424) - Added Azure DNS modules and states - [@nicholasmhughes](https://github.com/nicholasmhughes)\n- [#55432](https://github.com/saltstack/salt/pull/55432) - Add null to YAML dumper for threadsafe loader - [@Akm0d](https://github.com/Akm0d)\n- [#55443](https://github.com/saltstack/salt/issues/55443) - Added a skip_files_list_verify argument to archive.extracted state. - [@Oloremo](https://github.com/Oloremo)\n- [#55448](https://github.com/saltstack/salt/pull/55448) - Adds `downloadonly/download_only` alias for aptpkg module - [@brejoc](https://github.com/brejoc)\n- [#55480](https://github.com/saltstack/salt/pull/55480) - Add lint pre-commit hooks - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55492](https://github.com/saltstack/salt/pull/55492) - Allow arbitrary arguments to be passed through the pip module - [@Akm0d](https://github.com/Akm0d)\n- [#55506](https://github.com/saltstack/salt/pull/55506) - Added `hashutil.hmac_compute` - [@Ajnbro](https://github.com/Ajnbro)\n- [#55515](https://github.com/saltstack/salt/pull/55515) - Added `disk_set` and `disk_toggle` to parted module - [@aplanas](https://github.com/aplanas)\n- [#55516](https://github.com/saltstack/salt/pull/55516) - Added `not_change` to several functions in the mount module, `set_fstab` & others - [@aplanas](https://github.com/aplanas)\n- [#55565](https://github.com/saltstack/salt/pull/55565) - Added ability to pass the context dictionary to Sminion and Runner - [@s0undt3ch](https://github.com/s0undt3ch)\n- [#55590](https://github.com/saltstack/salt/pull/55590) - Added `version` to depends decorator - [@github-abcde](https://github.com/github-abcde)\n- [#55593](https://github.com/saltstack/salt/issues/55593) - Added a support for a global proxy to pip module. - [@Oloremo](https://github.com/Oloremo)\n- [#55613](https://github.com/saltstack/salt/pull/55613) - Added saltcheck updates for Neon - [@mchugh19](https://github.com/mchugh19)\n- [#55636](https://github.com/saltstack/salt/pull/55636) - Added DSON outputter - [@terminalmage](https://github.com/terminalmage)\n- [#55637](https://github.com/saltstack/salt/pull/55637) - Added wildcard matches and grains matching to `config.option` - [@terminalmage](https://github.com/terminalmage)\n- [#55639](https://github.com/saltstack/salt/pull/55639) - Added `loop.until_no_eval` - [@github-abcde](https://github.com/github-abcde)\n- [#55666](https://github.com/saltstack/salt/pull/55666) - Added the `internal` flag to openvswitch - [@Akm0d](https://github.com/Akm0d)\n- [#55711](https://github.com/saltstack/salt/pull/55711) - Added `fluentd` engine - [@mchugh19](https://github.com/mchugh19)\n- [#55733](https://github.com/saltstack/salt/pull/55733) - Added `salt.utils.data.filter_falsey` - [@github-abcde](https://github.com/github-abcde)\n- [#55749](https://github.com/saltstack/salt/pull/55749) - Added port of `json_query` Jinja filter from Ansible - [@max-arnold](https://github.com/max-arnold)\n- [#55751](https://github.com/saltstack/salt/pull/55751) - Added the osfullname grain on FreeBSD - [@asomers](https://github.com/asomers)\n- [#55759](https://github.com/saltstack/salt/pull/55759) - Added `salt.utils.data.recursive_diff` - [@github-abcde](https://github.com/github-abcde)\n- [#55760](https://github.com/saltstack/salt/pull/55760) - Add minion-side access control - [@github-abcde](https://github.com/github-abcde)\n- [#55762](https://github.com/saltstack/salt/pull/55762) - Added `virt.(pool|network)_get_xml` functions - [@cbosdo](https://github.com/cbosdo)\n- [#55767](https://github.com/saltstack/salt/pull/55767) - Added ability to manipulate RabbitMQ upstream definitions - [@github-abcde](https://github.com/github-abcde)\n- [#55768](https://github.com/saltstack/salt/pull/55768) - Added `boto3_elasticsearch` module and state - [@github-abcde](https://github.com/github-abcde)\n- [#55844](https://github.com/saltstack/salt/pull/55844) - Allow multiple running instances of Salt engine - [@garethgreenaway](https://github.com/garethgreenaway)\n\n---\n\n## [2019.2.2]\n\n### Changed\n\n- [#54758](https://github.com/saltstack/salt/issues/54758) - Missing sls file during `state.show_states` displays message instead of failing - [@Ch3LL](https://github.com/Ch3LL)\n\n### Fixed\n\n- [#54521](https://github.com/saltstack/salt/issues/54521) - `failhard` during orchestration now fails as expected - [@mattp-](https://github.com/mattp-) / [@Oloremo](https://github.com/Oloremo)\n- [#54741](https://github.com/saltstack/salt/issues/54741) - `schedule.run_job` without time element now works as expected - [@garethgreenaway](https://github.com/garethgreenaway)\n- [#54755](https://github.com/saltstack/salt/issues/54755) - Pip state ensures pip was imported before trying to remove - [@dwoz](https://github.com/dwoz)\n- [#54760](https://github.com/saltstack/salt/issues/54760) - Fix `salt-cloud -Q` for OpenStack driver - [@vdloo](https://github.com/vdloo) / [@Akm0d](https://github.com/Akm0d)\n- [#54762](https://github.com/saltstack/salt/issues/54762) - IPv6 addresses with brackets no longer break master/minion communication - [@dhiltonp](https://github.com/dhiltonp)\n- [#54765](https://github.com/saltstack/salt/issues/54765) - Masterless jinja imports - [@dwoz](https://github.com/dwoz)\n- [#54776](https://github.com/saltstack/salt/issues/54776) - `ping_interval` in minion config no longer prevents startup - [@dwoz](https://github.com/dwoz)\n- [#54820](https://github.com/saltstack/salt/issues/54820) - `scheduler.present` no longer always reports changes when scheduler is disabled - [@garethgreenaway](https://github.com/garethgreenaway)\n- [#54941](https://github.com/saltstack/salt/issues/54941) - Pillar data is no longer refreshed on every call - [@dwoz](https://github.com/dwoz)\n\n\n### Added\n\n- [#54919](https://github.com/saltstack/salt/pull/54919) - Added missing `win_wusa` state and module docs - [@twangboy](https://github.com/twangboy)\n\n## [2019.2.1] - 2019-09-25 [YANKED]\n\n\n- See [old release notes](https://docs.saltproject.io/en/latest/topics/releases/2019.2.1.html)\n"
        },
        {
          "name": "CODE_OF_CONDUCT.md",
          "type": "blob",
          "size": 5.1005859375,
          "content": "# Contributor Covenant Code of Conduct\n\n## Our Pledge\n\nWe as members, contributors, and leaders pledge to make participation in our\ncommunity a harassment-free experience for everyone, regardless of age, body\nsize, visible or invisible disability, ethnicity, sex characteristics, gender\nidentity and expression, level of experience, education, socio-economic status,\nnationality, personal appearance, race, religion, or sexual identity\nand orientation.\n\nWe pledge to act and interact in ways that contribute to an open, welcoming,\ndiverse, inclusive, and healthy community.\n\n## Our Standards\n\nExamples of behavior that contributes to a positive environment for our\ncommunity include:\n\n* Demonstrating empathy and kindness toward other people\n* Being respectful of differing opinions, viewpoints, and experiences\n* Giving and gracefully accepting constructive feedback\n* Accepting responsibility and apologizing to those affected by our mistakes,\n  and learning from the experience\n* Focusing on what is best not just for us as individuals, but for the\n  overall community\n\nExamples of unacceptable behavior include:\n\n* The use of sexualized language or imagery, and sexual attention or\n  advances of any kind\n* Trolling, insulting or derogatory comments, and personal or political attacks\n* Public or private harassment\n* Publishing others' private information, such as a physical or email\n  address, without their explicit permission\n* Other conduct which could reasonably be considered inappropriate in a\n  professional setting\n\n## Enforcement Responsibilities\n\nCommunity leaders are responsible for clarifying and enforcing our standards of\nacceptable behavior and will take appropriate and fair corrective action in\nresponse to any behavior that they deem inappropriate, threatening, offensive,\nor harmful.\n\nCommunity leaders have the right and responsibility to remove, edit, or reject\ncomments, commits, code, wiki edits, issues, and other contributions that are\nnot aligned to this Code of Conduct, and will communicate reasons for moderation\ndecisions when appropriate.\n\n## Scope\n\nThis Code of Conduct applies within all community spaces, and also applies when\nan individual is officially representing the community in public spaces.\nExamples of representing our community include using an official e-mail address,\nposting via an official social media account, or acting as an appointed\nrepresentative at an online or offline event.\n\n## Enforcement\n\nInstances of abusive, harassing, or otherwise unacceptable behavior may be\nreported to the community leaders responsible for enforcement at\nconduct@saltstack.com.\nAll complaints will be reviewed and investigated promptly and fairly.\n\nAll community leaders are obligated to respect the privacy and security of the\nreporter of any incident.\n\n## Enforcement Guidelines\n\nCommunity leaders will follow these Community Impact Guidelines in determining\nthe consequences for any action they deem in violation of this Code of Conduct:\n\n### 1. Correction\n\n**Community Impact**: Use of inappropriate language or other behavior deemed\nunprofessional or unwelcome in the community.\n\n**Consequence**: A private, written warning from community leaders, providing\nclarity around the nature of the violation and an explanation of why the\nbehavior was inappropriate. A public apology may be requested.\n\n### 2. Warning\n\n**Community Impact**: A violation through a single incident or series\nof actions.\n\n**Consequence**: A warning with consequences for continued behavior. No\ninteraction with the people involved, including unsolicited interaction with\nthose enforcing the Code of Conduct, for a specified period of time. This\nincludes avoiding interactions in community spaces as well as external channels\nlike social media. Violating these terms may lead to a temporary or\npermanent ban.\n\n### 3. Temporary Ban\n\n**Community Impact**: A serious violation of community standards, including\nsustained inappropriate behavior.\n\n**Consequence**: A temporary ban from any sort of interaction or public\ncommunication with the community for a specified period of time. No public or\nprivate interaction with the people involved, including unsolicited interaction\nwith those enforcing the Code of Conduct, is allowed during this period.\nViolating these terms may lead to a permanent ban.\n\n### 4. Permanent Ban\n\n**Community Impact**: Demonstrating a pattern of violation of community\nstandards, including sustained inappropriate behavior,  harassment of an\nindividual, or aggression toward or disparagement of classes of individuals.\n\n**Consequence**: A permanent ban from any sort of public interaction within\nthe community.\n\n## Attribution\n\nThis Code of Conduct is adapted from the [Contributor Covenant][homepage],\nversion 2.0, available at\nhttps://www.contributor-covenant.org/version/2/0/code_of_conduct.html.\n\nCommunity Impact Guidelines were inspired by [Mozilla's code of conduct\nenforcement ladder](https://github.com/mozilla/diversity).\n\n[homepage]: https://www.contributor-covenant.org\n\nFor answers to common questions about this code of conduct, see the FAQ at\nhttps://www.contributor-covenant.org/faq. Translations are available at\nhttps://www.contributor-covenant.org/translations.\n"
        },
        {
          "name": "CONTRIBUTING.rst",
          "type": "blob",
          "size": 23.619140625,
          "content": "============\nContributing\n============\n\nSo you want to contribute to the Salt project? Excellent! You can help\nin a number of ways:\n\n-  Use Salt and open well-written bug reports.\n-  Join a `working group <https://github.com/saltstack/community>`__.\n-  Answer questions on `irc <https://web.libera.chat/#salt>`__,\n   the `community Slack <https://via.vmw.com/salt-slack>`__,\n   the `salt-users mailing\n   list <https://groups.google.com/forum/#!forum/salt-users>`__,\n   `Server Fault <https://serverfault.com/questions/tagged/saltstack>`__,\n   or `r/saltstack on Reddit <https://www.reddit.com/r/saltstack/>`__.\n-  Fix bugs.\n-  `Improve the documentation <https://saltstack.gitlab.io/open/docs/docs-hub/topics/contributing.html>`__.\n- Provide workarounds, patches, or other code without tests.\n- Tell other people about problems you solved using Salt.\n\nIf you'd like to update docs or fix an issue, you're going to need the\nSalt repo. The best way to contribute is using\n`Git <https://git-scm.com/>`__.\n\n\nEnvironment setup\n=================\nTo hack on Salt or the docs you're going to need to set up your\ndevelopment environment. If you already have a workflow that you're\ncomfortable with, you can use that, but otherwise this is an opinionated\nguide for setting up your dev environment. Follow these steps and you'll\nend out with a functioning dev environment and be able to submit your\nfirst PR.\n\nThis guide assumes at least a passing familiarity with\n`Git <https://git-scm.com/>`__, a common version control tool used\nacross many open source projects, and is necessary for contributing to\nSalt. For an introduction to Git, watch `Salt Docs Clinic - Git For the\nTrue\nBeginner <https://www.youtube.com/watch?v=zJw6KNvmuq4&ab_channel=SaltStack>`__.\nBecause of its widespread use, there are many resources for learning\nmore about Git. One popular resource is the free online book `Learn Git\nin a Month of\nLunches <https://www.manning.com/books/learn-git-in-a-month-of-lunches>`__.\n\n\npyenv, Virtual Environments, and you\n------------------------------------\nWe recommend `pyenv <https://github.com/pyenv/pyenv>`__, since it allows\ninstalling multiple different Python versions, which is important for\ntesting Salt across all the versions of Python that we support.\n\nOn Linux\n^^^^^^^^\nInstall pyenv:\n\n::\n\n   git clone https://github.com/pyenv/pyenv.git ~/.pyenv\n   export PATH=\"$HOME/.pyenv/bin:$PATH\"\n   git clone https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenv\n\nOn Mac\n^^^^^^\nInstall pyenv using brew:\n\n::\n\n   brew update\n   brew install pyenv\n   brew install pyenv-virtualenv\n\n--------------\n\nNow add pyenv to your ``.bashrc``:\n\n::\n\n   echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' >> ~/.bashrc\n   pyenv init 2>> ~/.bashrc\n   pyenv virtualenv-init 2>> ~/.bashrc\n\nFor other shells, see `the pyenv\ninstructions <https://github.com/pyenv/pyenv#basic-github-checkout>`__.\n\nGo ahead and restart your shell. Now you should be able to install a new\nversion of Python:\n\n::\n\n   pyenv install 3.9.18\n\nIf that fails, don't panic! You're probably just missing some build\ndependencies. Check out `pyenv common build\nproblems <https://github.com/pyenv/pyenv/wiki/Common-build-problems>`__.\n\nNow that you've got your version of Python installed, you can create a\nnew virtual environment with this command:\n\n::\n\n   pyenv virtualenv 3.9.18 salt\n\nThen activate it:\n\n::\n\n   pyenv activate salt\n\nSweet! Now you're ready to clone Salt so you can start hacking away! If\nyou get stuck at any point, check out the resources at the beginning of\nthis guide. IRC and Slack are particularly helpful places to go.\n\n\nGet the source!\n---------------\nSalt uses the fork and clone workflow for Git contributions. See `Using\nthe Fork-and-Branch Git\nWorkflow <https://blog.scottlowe.org/2015/01/27/using-fork-branch-git-workflow/>`__\nfor how to implement it. But if you just want to hurry and get started\nyou can go ahead and follow these steps:\n\nClones are so shallow. Well, this one is anyway:\n\n::\n\n   git clone --depth=1 --origin salt https://github.com/saltstack/salt.git\n\nThis creates a shallow clone of Salt, which should be fast. Most of the\ntime that's all you'll need, and you can start building out other\ncommits as you go. If you *really* want all 108,300+ commits you can\njust run ``git fetch --unshallow``. Then go make a sandwich because it's\ngonna be a while.\n\nYou're also going to want to head over to GitHub and create your own\n`fork of Salt <https://github.com/saltstack/salt/fork>`__. Once you've\ngot that set up you can add it as a remote:\n\n::\n\n   git remote add yourname <YOUR SALT REMOTE>\n\nIf you use your name to refer to your fork, and ``salt`` to refer to the\nofficial Salt repo you'll never get ``upstream`` or ``origin`` confused.\n\n.. note::\n\n   Each time you start work on a new issue you should fetch the most recent\n   changes from ``salt/upstream``.\n\n\nSet up ``pre-commit`` and ``nox``\n---------------------------------\nHere at Salt we use `pre-commit <https://pre-commit.com/>`__ and\n`nox <https://nox.thea.codes/en/stable/>`__ to make it easier for\ncontributors to get quick feedback, for quality control, and to increase\nthe chance that your merge request will get reviewed and merged. Nox\nenables us to run multiple different test configurations, as well as\nother common tasks. You can think of it as Make with superpowers.\nPre-commit does what it sounds like: it configures some Git pre-commit\nhooks to run ``black`` for formatting, ``isort`` for keeping our imports\nsorted, and ``pylint`` to catch issues like unused imports, among\nothers. You can easily install them in your virtualenv with:\n\n::\n\n   python -m pip install pre-commit nox\n   pre-commit install\n\n.. warning::\n    Currently there is an issue with the pip-tools-compile pre-commit hook on Windows.\n    The details around this issue are included here:\n    https://github.com/saltstack/salt/issues/56642.\n    Please ensure you export ``SKIP=pip-tools-compile`` to skip pip-tools-compile.\n\nNow before each commit, it will ensure that your code at least *looks*\nright before you open a pull request. And with that step, it's time to\nstart hacking on Salt!\n\n\nSet up imagemagick\n------------------\nOne last prerequisite is to have ``imagemagick`` installed, as it is required\nby Sphinx for generating the HTML documentation.\n\n::\n\n   # On Mac, via homebrew\n   brew install imagemagick\n\n::\n\n   # Example Linux installation: Debian-based\n   sudo apt install imagemagick\n\n\nSalt issues\n===========\n\nCreate your own\n---------------\n\nPerhaps you've come to this guide because you found a problem in Salt,\nand you've diagnosed the cause. Maybe you need some help figuring out\nthe problem. In any case, creating quality bug reports is a great way to\ncontribute to Salt even if you lack the skills, time, or inclination to\nfix it yourself. If that's the case, head on over to `Salt's issue\ntracker on\nGitHub <https://github.com/saltstack/salt/issues/new/choose>`__.\n\nCreating a **good** report can take a little bit of time - but every\nminute you invest in making it easier for others to reproduce and\nunderstand your issue is time well spent. The faster someone can\nunderstand your issue, the faster it will be able to get fixed\ncorrectly.\n\nThe thing that every issue needs goes by many names, but one at least as\ngood as any other is MCVE - **M**\\ inimum **C**\\ omplete\n**V**\\ erifiable **E**\\ xample.\n\nIn a nutshell:\n\n-  **Minimum**: All of the **extra** information has been removed. Will\n   2 or 3 lines of master/minion config still exhibit the behavior?\n-  **Complete**: Minimum also means complete. If your example is missing\n   information, then it's not complete. Salt, Python, and OS versions\n   are all bits of information that make your example complete. Have you\n   provided the commands that you ran?\n-  **Verifiable**: Can someone take your report and reproduce it?\n\nSlow is smooth, and smooth is fast - it may feel like you're taking a\nlong time to create your issue if you're creating a proper MCVE, but a\nMCVE eliminates back and forth required to reproduce/verify the issue so\nsomeone can actually create a fix.\n\nPick an issue\n-------------\n\nIf you don't already have an issue in mind, you can search for `help\nwanted <https://github.com/saltstack/salt/issues?q=is%3Aissue+is%3Aopen+label%3A%22help+wanted%22>`__\nissues. If you also search for `good first\nissue <https://github.com/saltstack/salt/issues?q=is%3Aissue+is%3Aopen+label%3A%22help+wanted%22+label%3A%22good+first+issue%22>`__\nthen you should be able to find some issues that are good for getting\nstarted contributing to Salt. `Documentation\nissues <https://github.com/saltstack/salt/issues?q=is%3Aissue+is%3Aopen+label%3Adocumentation+>`__\nare also good starter issues. When you find an issue that catches your\neye (or one of your own), it's a good idea to comment on the issue and\nmention that you're working on it. Good communication is key to\ncollaboration - so if you don't have time to complete work on the issue,\njust leaving some information about when you expect to pick things up\nagain is a great idea!\n\nHacking away\n============\n\nSalt, tests, documentation, and you\n-----------------------------------\n\nBefore approving code contributions, Salt requires:\n\n-  documentation\n-  meaningful passing tests\n-  correct code\n\nDocumentation fixes just require correct documentation.\n\nWhat if I don't write tests or docs?\n------------------------------------\n\nIf you aren't into writing documentation or tests, we still welcome your\ncontributions! But your PR will be labeled ``Needs Testcase`` and\n``Help Wanted`` until someone can get to write the tests/documentation.\nOf course, if you have a desire but just lack the skill we are more than\nhappy to collaborate and help out! There's the `documentation working\ngroup <https://saltstack.gitlab.io/open/docs/docs-hub/topics/home.html>`__\nand the `testing working group <https://github.com/saltstack/community/tree/master/working_groups/wg-Testing>`__.\nWe also regularly stream our test clinic `live on\nTwitch <https://www.twitch.tv/saltprojectoss>`__ every Tuesday afternoon\nand Thursday morning, Central Time. If you'd like specific help with\ntests, bring them to the clinic. If no community members need help, you\ncan also just watch tests written in real time.\n\n\nDocumentation\n-------------\n\nSalt uses both docstrings, as well as normal reStructuredText files in\nthe ``salt/doc`` folder for documentation. Sphinx is used to generate the\ndocumentation, and does require ``imagemagick``. See `Set up imagemagick`_ for\nmore information.\n\nBefore submitting a documentation PR, it helps to first build the Salt docs\nlocally on your machine and preview them. Local previews helps you:\n\n- Debug potential documentation output errors before submitting a PR.\n- Saves you time by not needing to use the Salt CI/CD test suite to debug, which takes\n  more than 30 minutes to run on a PR.\n- Ensures the final output looks the way you intended it to look.\n\nTo set up your local environment to preview the core Salt and module\ndocumentation:\n\n#. Install the documentation dependencies. For example, on Ubuntu:\n\n   ::\n\n       sudo apt-get update\n\n       sudo apt-get install -y enchant-2 git gcc imagemagick make zlib1g-dev libc-dev libffi-dev g++ libxml2 libxml2-dev libxslt-dev libcurl4-openssl-dev libssl-dev libgnutls28-dev xz-utils inkscape\n\n#. Navigate to the folder where you store your Salt repository and remove any\n   `.nox` directories that might be in that folder:\n\n   ::\n\n       rm -rf .nox\n\n#. Install `pyenv` for the version of Python needed to run the docs. As of the\n   time of writing, the Salt docs theme is not compatible with Python 3.10, so\n   you'll need to run 3.9 or earlier. For example:\n\n   ::\n\n       pyenv install 3.9.18\n       pyenv virtualenv 3.9.18 salt-docs\n       echo 'salt-docs' > .python-version\n\n#. Activate `pyenv` if it's not auto-activated:\n\n   ::\n\n       pyenv exec pip install -U pip setuptools wheel\n\n#. Install `nox` into your pyenv environment, which is the utility that will\n   build the Salt documentation:\n\n   ::\n\n       pyenv exec pip install nox\n\n\nSince we use ``nox``, you can build your docs and view them in your browser\nwith this one-liner:\n\n::\n\n   python -m nox -e 'docs-html(compress=False, clean=False)'; cd doc/_build/html; python -m webbrowser http://localhost:8000/contents.html; python -m http.server\n\nThe first time you build the docs, it will take a while because there are a\n*lot* of modules. Maybe you should go grab some dessert if you already finished\nthat sandwich. But once nox and Sphinx are done building the docs, python should\nlaunch your default browser with the URL\nhttp://localhost:8000/contents.html. Now you can navigate to your docs\nand ensure your changes exist. If you make changes, you can simply run\nthis:\n\n::\n\n   cd -; python -m nox -e 'docs-html(compress=False, clean=False)'; cd doc/_build/html; python -m http.server\n\nAnd then refresh your browser to get your updated docs. This one should\nbe quite a bit faster since Sphinx won't need to rebuild everything.\n\nAlternatively, you could build the docs on your local machine and then preview\nthe build output. To build the docs locally:\n\n::\n\n    pyenv exec nox -e 'docs-html(compress=False, clean=True)'\n\nThe output from this command will put the preview files in: ``doc > _build > html``.\n\nIf your change is a docs-only change, you can go ahead and commit/push\nyour code and open a PR. You can indicate that it's a docs-only change by\nadding ``[Documentation]`` to the title of your PR. Otherwise, you'll\nwant to write some tests and code.\n\n\nRunning development Salt\n------------------------\nNote: If you run into any issues in this section, check the\nTroubleshooting section.\n\nIf you're going to hack on the Salt codebase you're going to want to be\nable to run Salt locally. The first thing you need to do is install Salt\nas an editable pip install:\n\n::\n\n   python -m pip install -e .\n\nThis will let you make changes to Salt without having to re-install it.\n\nAfter all of the dependencies and Salt are installed, it's time to set\nup the config for development. Typically Salt runs as ``root``, but you\ncan specify which user to run as. To configure that, just copy the\nmaster and minion configs. We have .gitignore setup to ignore the\n``local/`` directory, so we can put all of our personal files there.\n\n::\n\n   mkdir -p local/etc/salt/\n\nCreate a master config file as ``local/etc/salt/master``:\n\n::\n\n   cat <<EOF >local/etc/salt/master\n   user: $(whoami)\n   root_dir: $PWD/local/\n   publish_port: 55505\n   ret_port: 55506\n   EOF\n\nAnd a minion config as ``local/etc/salt/minion``:\n\n::\n\n   cat <<EOF >local/etc/salt/minion\n   user: $(whoami)\n   root_dir: $PWD/local/\n   master: localhost\n   id: saltdev\n   master_port: 55506\n   EOF\n\nNow you can start your Salt master and minion, specifying the config\ndir.\n\n::\n\n   salt-master --config-dir=local/etc/salt/ --log-level=debug --daemon\n   salt-minion --config-dir=local/etc/salt/ --log-level=debug --daemon\n\nNow you should be able to accept the minion key:\n\n::\n\n   salt-key -c local/etc/salt -Ay\n\nAnd check that your master/minion are communicating:\n\n::\n\n   salt -c local/etc/salt \\* test.version\n\nRather than running ``test.version`` from your master, you can run it\nfrom the minion instead:\n\n::\n\n   salt-call -c local/etc/salt test.version\n\nNote that you're running ``salt-call`` instead of ``salt``, and you're\nnot specifying the minion (``\\*``), but if you're running the dev\nversion then you still will need to pass in the config dir. Now that\nyou've got Salt running, you can hack away on the Salt codebase!\n\nIf you need to restart Salt for some reason, if you've made changes and\nthey don't appear to be reflected, this is one option:\n\n::\n\n   kill -INT $(pgrep salt-master)\n   kill -INT $(pgrep salt-minion)\n\nIf you'd rather not use ``kill``, you can have a couple of terminals\nopen with your salt virtualenv activated and omit the ``--daemon``\nargument. Salt will run in the foreground, so you can just use ctrl+c to\nquit.\n\n\nTest first? Test last? Test meaningfully!\n-----------------------------------------\nYou can write tests first or tests last, as long as your tests are\nmeaningful and complete! *Typically* the best tests for Salt are going\nto be unit tests. Testing is `a whole topic on its\nown <https://docs.saltproject.io/en/master/topics/tutorials/writing_tests.html>`__,\nBut you may also want to write functional or integration tests. You'll\nfind those in the ``tests/`` directory.\n\nWhen you're thinking about tests to write, the most important thing to\nkeep in mind is, “What, exactly, am I testing?” When a test fails, you\nshould know:\n\n-  What, specifically, failed?\n-  Why did it fail?\n-  As much as possible, what do I need to do to fix this failure?\n\nIf you can't answer those questions then you might need to refactor your\ntests.\n\nWhen you're running tests locally, you should make sure that if you\nremove your code changes your tests are failing. If your tests *aren't*\nfailing when you haven't yet made changes, then it's possible that\nyou're testing the wrong thing.\n\nBut whether you adhere to TDD/BDD, or you write your code first and your\ntests last, ensure that your tests are meaningful.\n\n\nRunning tests\n-------------\nAs previously mentioned, we use ``nox``, and that's how we run our\ntests. You should have it installed by this point but if not you can\ninstall it with this:\n\n::\n\n   python -m pip install nox\n\nNow you can run your tests:\n\n::\n\n   python -m nox -e \"test-3(coverage=False)\" -- tests/unit/cli/test_batch.py\n\nIt's a good idea to install\n`espeak <https://github.com/espeak-ng/espeak-ng>`__ or use ``say`` on\nMac if you're running some long-running tests. You can do something like\nthis:\n\n::\n\n   python -m nox -e \"test-3(coverage=False)\" -- tests/unit/cli/test_batch.py; espeak \"Tests done, woohoo!\"\n\nThat way you don't have to keep monitoring the actual test run.\n\n\n::\n\n   python -m nox -e \"test-3(coverage=False)\" -- --core-tests\n\nYou can enable or disable test groups locally by passing their respected flag:\n\n* --no-fast-tests - Tests that are ~10s or faster. Fast tests make up ~75% of tests and can run in 10 to 20 minutes.\n* --slow-tests - Tests that are ~10s or slower.\n* --core-tests - Tests of any speed that test the root parts of salt.\n* --flaky-jail - Test that need to be temporarily skipped.\n\nIn your PR, you can enable or disable test groups by setting a label.\nAll fast, slow, and core tests specified in the change file will always run.\n\n* test:no-fast\n* test:core\n* test:slow\n* test:flaky-jail\n\n\nChangelog and commit!\n---------------------\nWhen you write your commit message you should use imperative style. Do\nthis:\n\n   Add frobnosticate capability\n\nDon't do this:\n\n   Added frobnosticate capability\n\nBut that advice is backwards for the changelog. We follow the\n`keepachangelog <https://keepachangelog.com/en/1.0.0/>`__ approach for\nour changelog, and use towncrier to generate it for each release. As a\ncontributor, all that means is that you need to add a file to the\n``salt/changelog`` directory, using the ``<issue #>.<type>.md`` format. For\ninstance, if you fixed issue 123, you would do:\n\n::\n\n   echo \"Made sys.doc inform when no minions return\" > changelog/123.fixed.md\n\nAnd that's all that would go into your file. When it comes to your\ncommit message, it's usually a good idea to add other information, such as\n\n- What does a reviewer need to know about the change that you made?\n- If someone isn't an expert in this area, what will they need to know?\n\nThis will also help you out, because when you go to create the PR it\nwill automatically insert the body of your commit messages.\n\nSee the `changelog <https://docs.saltproject.io/en/latest/topics/development/changelog.html>`__\ndocs for more information.\n\n\nPull request time!\n------------------\nOnce you've done all your dev work and tested locally, you should check\nout our `PR\nguidelines <https://docs.saltproject.io/en/master/topics/development/pull_requests.html>`__.\nAfter you read that page, it's time to `open a new\nPR <https://github.com/saltstack/salt/compare>`__. Fill out the PR\ntemplate - you should have updated or created any necessary docs, and\nwritten tests if you're providing a code change. When you submit your\nPR, we have a suite of tests that will run across different platforms to\nhelp ensure that no known bugs were introduced.\n\n\nNow what?\n---------\nYou've made your changes, added documentation, opened your PR, and have\npassing tests… now what? When can you expect your code to be merged?\n\nWhen you open your PR, a reviewer will get automatically assigned. If\nyour PR is submitted during the week you should be able to expect some\nkind of communication within that business day. If your tests are\npassing and we're not in a code freeze, ideally your code will be merged\nthat week or month. If you haven't heard from your assigned reviewer, ping them\non GitHub, `irc <https://web.libera.chat/#salt>`__, or Community Slack.\n\nIt's likely that your reviewer will leave some comments that need\naddressing - it may be a style change, or you forgot a changelog entry,\nor need to update the docs. Maybe it's something more fundamental -\nperhaps you encountered the rare case where your PR has a much larger\nscope than initially assumed.\n\nWhatever the case, simply make the requested changes (or discuss why the\nrequests are incorrect), and push up your new commits. If your PR is\nopen for a significant period of time it may be worth rebasing your\nchanges on the most recent changes to Salt. If you need help, the\npreviously linked Git resources will be valuable.\n\nBut if, for whatever reason, you're not interested in driving your PR to\ncompletion then just note that in your PR. Something like, “I'm not\ninterested in writing docs/tests, I just wanted to provide this fix -\nsomeone else will need to complete this PR.” If you do that then we'll\nadd a “Help Wanted” label and someone will be able to pick up the PR,\nmake the required changes, and it can eventually get merged in.\n\nIn any case, now that you have a PR open, congrats! You're a Salt\ndeveloper! You rock!\n\n\nTroubleshooting\n===============\n\n\nzmq.core.error.ZMQError\n-----------------------\nOnce the minion starts, you may see an error like the following::\n\n::\n\n   zmq.core.error.ZMQError: ipc path \"/path/to/your/virtualenv/var/run/salt/minion/minion_event_7824dcbcfd7a8f6755939af70b96249f_pub.ipc\" is longer than 107 characters (sizeof(sockaddr_un.sun_path)).\n\nThis means that the path to the socket the minion is using is too long.\nThis is a system limitation, so the only workaround is to reduce the\nlength of this path. This can be done in a couple different ways:\n\n1. Create your virtualenv in a path that is short enough.\n2. Edit the :conf_minion:``sock_dir`` minion config variable and reduce\n   its length. Remember that this path is relative to the value you set\n   in :conf_minion:``root_dir``.\n\nNOTE: The socket path is limited to 107 characters on Solaris and Linux,\nand 103 characters on BSD-based systems.\n\n\nNo permissions to access ...\n----------------------------\nIf you forget to pass your config path to any of the ``salt*`` commands,\nyou might see\n\n::\n\n   No permissions to access \"/var/log/salt/master\", are you running as the\n   correct user?\n\nJust pass ``-c local/etc/salt`` (or whatever you named it)\n\n\nFile descriptor limit\n---------------------\nYou might need to raise your file descriptor limit. You can check it\nwith:\n\n::\n\n   ulimit -n\n\nIf the value is less than 3072, you should increase it with:\n\n::\n\n   ulimit -n 3072\n   # For c-shell:\n   limit descriptors 3072\n\n\nPygit2 or other dependency install fails\n----------------------------------------\nYou may see some failure messages when installing requirements. You can\ndirectly access your nox environment and possibly install pygit (or\nother dependency) that way. When you run nox, you'll see a message like\nthis:\n\n::\n\n   nox > Re-using existing virtual environment at .nox/pytest-parametrized-3-crypto-none-transport-zeromq-coverage-false.\n\nFor this, you would be able to install with:\n\n::\n\n   .nox/pytest-parametrized-3-crypto-none-transport-zeromq-coverage-false/bin/python -m pip install pygit2\n"
        },
        {
          "name": "DEPENDENCIES.md",
          "type": "blob",
          "size": 28.205078125,
          "content": "| **OSS Software Name**     | **Version** | **Primary License**                     | **Source Code Download URL**                   | **Author**                                                               | **Copyright Year** |\n| ------------------------- | :---------- | --------------------------------------- | ---------------------------------------------- | ------------------------------------------------------------------------ | -----------------: |\n|                           |             |                                         |                                                |                                                                          |                    |\n| Cheetah3                  | 3.1.0       | MIT/X11                                 | https://pypi.org/project/Cheetah3/             | Travis Rudd                                                              |          2017-2019 |\n| CherryPy                  | 17.3.0      | BSD                                     | https://pypi.org/project/CherryPy/             | CherryPy Team                                                            |          2004-2019 |\n| Genshi                    | 0.7.3       | BSD                                     | https://pypi.org/project/Genshi/               | Edgewall Software                                                        |          2006-2010 |\n| GitPython                 | 3.1.3       | BSD                                     | https://pypi.org/project/GitPython/            | Sebastian Thiel, Michael Trier                                           |         2008, 2009 |\n| Jinja2                    | 2.11.2      | BSD                                     | https://pypi.org/project/Jinja2                | Armin Ronacher                                                           |               2007 |\n| Mako                      | 1.1.3       | MIT/X11                                 | https://pypi.org/project/Mako/                 | Mike Bayer                                                               |          2006-2020 |\n| MarkupSafe                | 1.1.1       | BSD                                     | https://pypi.org/project/MarkupSafe/           | Armin Ronacher                                                           |               2010 |\n| PyJWT                     | 1.7.1       | MIT/X11                                 | https://pypi.org/project/PyJWT/                | Jose Padilla                                                             |               2015 |\n| PyNaCl                    | 1.4.0       | Apache License, V2.0                    | https://pypi.org/project/PyNaCl/               | The PyNaCl developers                                                    |               2004 |\n| PyYAML                    | 5.3.1       | MIT/X11                                 | https://pypi.org/project/PyYAML/               | Kirill Simonov                                                           |          2006-2019 |\n| WerkZeug                  | 1.0.1       | BSD                                     | https://pypi.org/project/Werkzeug/             | Armin Ronacher                                                           |               2007 |\n| apache-libcloud           | 2.0.0       | Apache License, V2.0                    | https://pypi.org/project/apache-libcloud/      | Apache Software Foundation                                               |               2004 |\n| appdirs                   | 1.4.4       | MIT/X11                                 | https://pypi.org/project/appdirs/              | Trent Mick                                                               |               2010 |\n| asn1crypto                | 1.3.0       | MIT/X11                                 | https://pypi.org/project/asn1crypto/           | wbond                                                                    |          2015-2019 |\n| attrs                     | 19.3.1      | MIT/X11                                 | https://pypi.org/project/attrs/                | Hynek Schlawack                                                          |               2015 |\n| aws-sam-translator        | 1.25.0      | Apache License, V2.0                    | https://pypi.org/project/aws-sam-translator/   | Amazon Web Services                                                      |               2004 |\n| aws-xray-sdk              | 2.6.0       | Apache License, V2.0                    | https://pypi.org/project/aws-xray-sdk/         | Amazon Web Services                                                      |               2004 |\n| bcrypt                    | 3.1.7       | Apache License, V2.0                    | https://pypi.org/project/bcrypt/               | The Python Cryptographic Authority                                       |               2013 |\n| boto                      | 2.49.0      | MIT/X11                                 | https://pypi.org/project/boto/                 | Mitch Garnaatt                                                           |               2013 |\n| boto3                     | 1.14.16     | Apache License, V2.0                    | https://pypi.org/project/boto3/                | AWS                                                                      |               2019 |\n| botocore                  | 1.17.16     | Apache License, V2.0                    | https://pypi.org/project/botocore/             | AWS                                                                      |               2019 |\n| cachetools                | 4.1.1       | MIT/X11                                 | https://pypi.org/project/cachetools/           | tkem                                                                     |          2014-2020 |\n| cassandra-driver          | 3.24.0      | Apache License, V2.0                    | https://pypi.org/project/cassandra-driver/     | DataStax                                                                 |               2013 |\n| certifi                   | 2020.6.20   | Mozilla Public License, V2.0            | https://pypi.org/project/certifi/              | Kenneth Reitz                                                            |               2013 |\n| certvalidator             | 0.11.1      | MIT/X11                                 | https://pypi.org/project/certvalidator/        | wbond                                                                    |          2015-2018 |\n| cffi                      | 1.14.0      | MIT/X11                                 | https://pypi.org/project/cffi/                 | Armin Rigo, Maciej Fijalkowski                                           |          2005-2007 |\n| cfn-lint                  | 0.33.2      | MIT/X11                                 | https://pypi.org/project/cfn-lint/             | kddejong                                                                 |               2018 |\n| chardet                   | 3.0.4       | GNU Lesser General Public License, V2.1 | https://pypi.org/project/chardet/              | Daniel Blanchard                                                         |               2012 |\n| cheroot                   | 8.3.0       | BSD                                     | https://pypi.org/project/cheroot/              | CherryPy Team                                                            |          2004-2020 |\n| click                     | 7.1.2       | BSD                                     | https://pypi.org/project/click/                | Pallets                                                                  |               2014 |\n| contextlib2               | 0.6.0.post1 | Python License                          | https://pypi.org/project/contextlib2/          | Nick Coghlan                                                             |               2015 |\n| croniter                  | 0.3.34      | MIT/X11                                 | https://pypi.org/project/croniter/             | Matsumoto Taichi, kiorky                                                 |               2014 |\n| cryptography              | 2.9.2       | BSD                                     | https://pypi.org/project/cryptography/         | The cryptography developers                                              |               2014 |\n| decorator                 | 4.4.2       | BSD                                     | https://pypi.org/project/decorator/            | Michele Simionato                                                        |          2005-2018 |\n| distlib                   | 0.3.1       | Python License                          | https://pypi.org/project/distlib/              | Vinay Sajip                                                              |               2012 |\n| dnspython                 | 1.16.0      | BSD                                     | https://pypi.org/project/dnspython/            | Bob Halley                                                               |          2001-2017 |\n| docker                    | 4.2.2       | Apache License, V2.0                    | https://pypi.org/project/docker/               | Joffery F                                                                |               2016 |\n| docutils                  | 0.15.2      | BSD                                     | https://pypi.org/project/docutils/             | David Goodger                                                            |               2011 |\n| ecdsa                     | 0.15        | MIT/X11                                 | https://pypi.org/project/ecdsa/                | Brian Warner                                                             |               2010 |\n| filelock                  | 3.0.12      | Public Domain                           | https://pypi.org/project/filelock/             | Benedikt Schmitt                                                         |               2018 |\n| future                    | 0.18.2      | MIT/X11                                 | https://pypi.org/project/future/               | Ed Schofield                                                             |          2013-2019 |\n| geomet                    | 0.2.1.post1 | Apache License, V2.0                    | https://pypi.org/project/geomet/               | Lars Butler                                                              |               2014 |\n| gitdb                     | 4.0.5       | BSD                                     | https://pypi.org/project/gitdb/                | Sebastian Thiel                                                          |         2010, 2011 |\n| google-auth               | 1.18.0      | Apache License, V2.0                    | https://pypi.org/project/google-auth/          | Google Cloud Platform                                                    |               2016 |\n| hgtools                   | 8.2.0       | MIT/X11                                 | https://pypi.org/project/hgtools/              | Jason R. Coombs                                                          |               2019 |\n| idna                      | 2.8         | BSD                                     | https://pypi.org/project/idna/                 | Kim Davies                                                               |          2013-2020 |\n| importlib-metadata        | 1.7.0       | Apache License, V2.0                    | https://pypi.org/project/importlib-metadata/   | Barry Warsaw                                                             |          2017-2019 |\n| ipaddress                 | 1.0.23      | Python License                          | https://pypi.org/project/ipaddress/            | Philipp Hagemeister                                                      |               2014 |\n| isodate                   | 0.6.0       | BSD                                     | https://pypi.org/project/isodate/              | Gerhard Weis                                                             |               2009 |\n| jaraco.functools          | 3.0.1       | MIT/X11                                 | https://pypi.org/project/jaraco.functools/     | Jason R. Coombs                                                          |               2020 |\n| jmespath                  | 0.10.0      | MIT/X11                                 | https://pypi.org/project/jmespath/             | James Saryerwinnie                                                       |               2013 |\n| jsondiff                  | 1.1.2       | MIT/X11                                 | https://pypi.org/project/jsondiff/             | Zoomer Analytics LLC                                                     |               2015 |\n| jsonpatch                 | 1.26        | BSD                                     | https://pypi.org/project/jsonpatch/            | Stefan Kögl                                                              |               2011 |\n| jsonpickle                | 1.4.1       | BSD                                     | https://pypi.org/project/jsonpickle/           | David Aguilar                                                            |          2009-2018 |\n| jsonpointer               | 2           | BSD                                     | https://pypi.org/project/jsonpointer/          | Stefan Kögl                                                              |               2017 |\n| jsonschema                | 3.2.0       | MIT/X11                                 | https://pypi.org/project/jsonschema/           | Julian Berman                                                            |               2013 |\n| junit-xml                 | 1.9         | MIT/X11                                 | https://pypi.org/project/junit-xml/            | Brian Beyer                                                              |               2013 |\n| junos-eznc                | 2.4.0       | Apache License, V2.0                    | https://pypi.org/project/junos-eznc/           | Jeremy Schulman, Nitin Kumar, Rick Sherman, Stacy Smith                  |               2018 |\n| jxmlease                  | 1.0.3       | MIT/X11                                 | https://pypi.org/project/jxmlease/             | Juniper Networks                                                         |          2015-2016 |\n| kazoo                     | 2.7.0       | Apache License, V2.0                    | https://pypi.org/project/kazoo/                | Kazoo team                                                               |               2012 |\n| keyring                   | 5.7.1       | MIT/X11                                 | https://pypi.org/project/keyring/              | Kang Zhang                                                               |               2019 |\n| kubernetes                | 3.0.0       | Apache License, V2.0                    | https://pypi.org/project/kubernetes/           | Kubernetes                                                               |               2016 |\n| libnacl                   | 1.7.1       | Apache License, V2.0                    | https://pypi.org/project/libnacl/              | Thomas S Hatch                                                           |               2014 |\n| lxml                      | 4.5.1       | BSD                                     | https://pypi.org/project/lxml/                 | lxml dev team                                                            |               2019 |\n| mock                      | 4.0.2       | BSD                                     | https://pypi.org/project/mock/                 | Testing Cabal                                                            |          2003-2013 |\n| more-itertools            | 5.0.0       | MIT/X11                                 | https://pypi.org/project/more-itertools/       | Eric Rose                                                                |               2012 |\n| moto                      | 1.3.14      | Apache License, V2.0                    | https://pypi.org/project/moto/                 | Steve Pulec                                                              |               2004 |\n| natsort                   | 7.0.1       | MIT/X11                                 | https://pypi.org/project/natsort/              | Seth M. Morton                                                           |          2012-2020 |\n| ncclient                  | 0.6.7       | Apache License, V2.0                    | https://pypi.org/project/ncclient/             | Shikhar Bhushan, Leonidas Poulopoulos, Ebben Aries, Einar Nilsen-Nygaard |               2004 |\n| netaddr                   | 0.8.0       | BSD                                     | https://pypi.org/project/netaddr/              | Author: David P. D. Moss, Stefan Nordhausen et al                        |               2008 |\n| networkx                  | 2.4         | BSD                                     | https://pypi.org/project/networkx/             | Aric Hagberg                                                             |          2004-2020 |\n| ntc-templates             | 1.5.0       | Apache License, V2.0                    | https://pypi.org/project/ntc-templates/        | Jason Edelman                                                            |               2015 |\n| oauthlib                  | 3.1.0       | BSD                                     | https://pypi.org/project/oauthlib/             | The OAuthlib Community                                                   |               2019 |\n| oscrypto                  | 1.2.0       | MIT/X11                                 | https://pypi.org/project/oscrypto/             | wbond                                                                    |          2015-2019 |\n| paramiko                  | 2.7.1       | GNU Lesser General Public License, V2.1 | https://pypi.org/project/paramiko/             | Jeff Forcier                                                             |               1999 |\n| passlib                   | 1.7.2       | BSD                                     | https://pypi.org/project/passlib/              | Eli Collins                                                              |               2004 |\n| pathtools                 | 0.1.2       | MIT/X11                                 | https://pypi.org/project/pathtools/            | Yesudeep Mangalapilly                                                    |               2010 |\n| portend                   | 2.6         | MIT/X11                                 | https://pypi.org/project/portend/              | Jason R Coombs                                                           |               2018 |\n| psutil                    | 5.7.0       | BSD                                     | https://pypi.org/project/psutil/               | Giampaolo Rodola                                                         |               2009 |\n| pyOpenSSL                 | 19.1.0      | Apache License, V2.0                    | https://pypi.org/project/pyOpenSSL/            | The pyopenssl Developers                                                 |               2004 |\n| pyasn1                    | 0.4.8       | BSD                                     | https://pypi.org/project/pyasn1/               | Ilya Etingof                                                             |          2005-2020 |\n| pyasn1-modules            | 0.2.8       | BSD                                     | https://pypi.org/project/pyasn1-modules/       | Ilya Etingof                                                             |          2005-2020 |\n| pycparser                 | 2.20        | BSD                                     | https://pypi.org/project/pycparser/            | Eli Bendersky                                                            |          2008-2017 |\n| pygit2                    | 1.2.1       | GNU General Public License, V2.0        | https://pypi.org/project/pygit2/               | J. David Ibáñez                                                          |               2012 |\n| pyinotify                 | 0.9.6       | MIT/X11                                 | https://pypi.org/project/pyinotify/            | Sebastien Martini                                                        |               2010 |\n| pyparsing                 | 2.4.7       | MIT/X11                                 | https://pypi.org/project/pyparsing/            | Paul McGuire                                                             |               2018 |\n| pyrsistent                | 0.16.0      | MIT/X11                                 | https://pypi.org/project/pyrsistent/           | Tobias Gustafsson                                                        |               2019 |\n| pyserial                  | 3.4         | BSD                                     | https://pypi.org/project/pyserial/             | Chris Liechti                                                            |          2001-2016 |\n| python-dateutil           | 2.8.1       | Apache License, V2.0                    | https://pypi.org/project/python-dateutil/      | Gustavo Niemeyer                                                         |               2017 |\n| python-etcd               | 0.4.5       | MIT/X11                                 | https://pypi.org/project/python-etcd/          | Jose Plana                                                               |               2015 |\n| python-gnupg              | 0.4.6       | BSD                                     | https://pypi.org/project/python-gnupg/         | Vinay Sajip                                                              |          2008-2019 |\n| python-jose[cryptography] | 3.2.0       | MIT/X11                                 | https://pypi.org/project/python-jose/          | Michael Davis                                                            |               2015 |\n| pytz                      | 2020.1      | MIT/X11                                 | https://pypi.org/project/pytz/                 | Stuart Bishop                                                            |               2015 |\n| pyvmomi                   | 7           | Apache License, V2.0                    | https://pypi.org/project/pyvmomi/              | VMware, Inc.                                                             |               2004 |\n| requests                  | 2.24.0      | Apache License, V2.0                    | https://pypi.org/project/requests/             | Kenneth Reitz                                                            |               2004 |\n| requests-oauthlib         | 1.3.0       | BSD                                     | https://pypi.org/project/requests-oauthlib/    | Kenneth Reitz                                                            |               2014 |\n| responses                 | 0.10.15     | Apache License, V2.0                    | https://pypi.org/project/responses/            | David Cramer                                                             |               2004 |\n| rfc3987                   | 1.3.8       | GNU General Public License, V3.0        | https://pypi.org/project/rfc3987/              | Daniel Gerber                                                            |               2007 |\n| rsa                       | 4.6         | Apache License, V2.0                    | https://pypi.org/project/rsa/                  | Sybren A. Stuvel                                                         |               2011 |\n| s3transfer                | 0.3.3       | Apache License, V2.0                    | https://pypi.org/project/s3transfer/           | Amazon Web Services                                                      |               2004 |\n| scp                       | 0.13.2      | GNU Lesser General Public License, V2.1 | https://pypi.org/project/scp/                  | James Bardin                                                             |               2013 |\n| setproctitle              | 1.1.10      | BSD                                     | https://pypi.org/project/setproctitle/         | Daniele Varrazzo                                                         |          2009-2020 |\n| setuptools-scm            | 4.1.2       | MIT/X11                                 | https://pypi.org/project/setuptools-scm/       | Ronny Pfannschmidt                                                       |               2010 |\n| six                       | 1.15.0      | MIT/X11                                 | https://pypi.org/project/six/                  | Benjamin Peterson                                                        |          2010-2020 |\n| smmap                     | 3.0.4       | BSD                                     | https://pypi.org/project/smmap/                | Sebastian Thiel                                                          |         2010, 2011 |\n| sshpubkeys                | 3.1.0       | BSD                                     | https://pypi.org/project/sshpubkeys/           | Olli Jarva                                                               |               2014 |\n| strict-rfc3339            | 0.7         | GNU General Public License, V3.0        | https://pypi.org/project/strict-rfc3339/       | Daniel Richman, Adam Greig                                               |               2007 |\n| tempora                   | 3.0.0       | MIT/X11                                 | https://pypi.org/project/tempora/              | Jason R. Coombs                                                          |               2020 |\n| textfsm                   | 1.1.0       | Apache License, V2.0                    | https://pypi.org/project/textfsm/              | Google                                                                   |               2004 |\n| timelib                   | 0.2.4       | BSD                                     | https://pypi.org/project/timelib/              | Ralf Schmitt                                                             |          2009-2011 |\n| toml                      | 0.10.1      | MIT/X11                                 | https://pypi.org/project/toml/                 | William Pearson                                                          |          2013-2019 |\n| transitions               | 0.8.2       | MIT/X11                                 | https://pypi.org/project/transitions/          | Tal Yarkoni                                                              |        2014 - 2020 |\n| urllib3                   | 1.25.9      | MIT/X11                                 | https://pypi.org/project/urllib3/              | Andrey Petrov                                                            |          2008-2020 |\n| vcert                     | 0.7.4       | ASL                                     | https://pypi.org/project/vcert                 | Denis Subbotin                                                           |               2018 |\n| virtualenv                | 20.0.25     | MIT                                     | https://pypi.org/project/virtualenv            | Bernat Gabor                                                             |          2020-202x |\n| watchdog                  | 0.10.3      | Apache License 2.0                      | https://pypi.org/project/watchdog              | Yesudeep Mangalapilly                                                    |               2012 |\n| websocket-client          | 0.57.0      | BSD                                     | https://pypi.org/project/websocket-client      | liris                                                                    |               2018 |\n| wrapt                     | 1.12.1      | BSD                                     | https://pypi.org/project/wrapt                 | Graham Dumpleton                                                         |          2013-2019 |\n| xmltodict                 | 0.12.0      | MIT                                     | https://pypi.org/project/xmltodict             | Martin Blech                                                             |               2010 |\n| yamlordereddictloader     | 0.4.0       | MIT License                             | https://pypi.org/project/yamlordereddictloader | François Ménabé                                                          |               2017 |\n| zc.lockfile               | 2           | ZPL 2.1                                 | https://pypi.org/project/zc.lockfile           | Zope Foundation                                                          |               2010 |\n| zipp                      | 3.1.0       | MIT                                     | https://pypi.org/project/zipp                  | Jason R. Coombs                                                          |               2019 |\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 18.623046875,
          "content": "                                 Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n   APPENDIX: How to apply the Apache License to your work.\n\n      To apply the Apache License to your work, attach the following\n      boilerplate notice, with the fields enclosed by brackets \"{}\"\n      replaced with your own identifying information. (Don't include\n      the brackets!)  The text should be enclosed in the appropriate\n      comment syntax for the file format. We also recommend that a\n      file or class name and description of purpose be included on the\n      same \"printed page\" as the copyright notice for easier\n      identification within third-party archives.\n\n   Copyright (c) 2011-2022 VMware, Inc. All rights reserved.\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n\n===========================================================================\n\nBelow is a summary of the licensing used by external modules that are\nbundled with SaltStack.\n\nFormat: http://www.debian.org/doc/packaging-manuals/copyright-format/1.0/\nUpstream-Name: salt\nUpstream-Contact: salt-users@googlegroups.com\nSource: https://github.com/saltstack/salt\n\nFiles: *\nCopyright: 2014 SaltStack Team\nLicense: Apache-2.0\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n .\n     http://www.apache.org/licenses/LICENSE-2.0\n .\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n .\n On Debian systems, the full text of the Apache License, Version 2.0 can be\n found in the file\n `/usr/share/common-licenses/Apache-2.0'.\n\nFiles: debian/*\nCopyright: 2013 Joe Healy <joehealy@gmail.com>\n           2012 Michael Prokop <mika@debian.org>\n           2012 Christian Hofstaedtler <christian@hofstaedtler.name>\n           2012 Ulrich Dangel <mru@spamt.net>\n           2012 Corey Quinn <corey@sequestered.net>\n           2011 Aaron Toponce <aaron.toponce@gmail.com>\nLicense: Apache-2.0\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n .\n     http://www.apache.org/licenses/LICENSE-2.0\n .\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n .\n On Debian systems, the full text of the Apache License, Version 2.0 can be\n found in the file\n `/usr/share/common-licenses/Apache-2.0'.\n\nFiles: salt/auth/pam.py\nCopyright: 2007 Chris AtLee <chris@atlee.ca>\nLicense: MIT License\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n  .\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n  .\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n\nFiles: doc/_ext/youtube.py\nCopyright: 2009 Chris Pickel <sfiera@gmail.com>\nLicense: BSD-2-clause\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n .\n * Redistributions of source code must retain the above copyright\n   notice, this list of conditions and the following disclaimer.\n .\n * Redistributions in binary form must reproduce the above copyright\n   notice, this list of conditions and the following disclaimer in the\n   documentation and/or other materials provided with the distribution.\n .\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nFiles: salt/ext/six.py\nCopyright: 2010-2014 Benjamin Peterson\nLicense: MIT License\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n  .\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n  .\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n\nFiles: doc/_ext/images\nCopyright: 2013 SaltStack Team\nLicense: Apache-2.0\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n .\n     http://www.apache.org/licenses/LICENSE-2.0\n .\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n .\n On Debian systems, the full text of the Apache License, Version 2.0 can be\n found in the file\n `/usr/share/common-licenses/Apache-2.0'.\n .\n Files in this directory were created in-house.\n\nFiles: tests/support/cptestcase.py\nCopyright: (c) 2014 Adam Hajari\nThe MIT License (MIT)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "MANIFEST.in",
          "type": "blob",
          "size": 0.64453125,
          "content": "include AUTHORS\ninclude CODE_OF_CONDUCT.md\ninclude CONTRIBUTING.rst\ninclude LICENSE\ninclude NOTICE\ninclude README.rst\ninclude SUPPORT.rst\ninclude run.py\ninclude pyproject.toml\ninclude tests/*.py\nrecursive-include tests *\nrecursive-include requirements *.txt\ninclude tests/integration/modules/files/*\ninclude tests/integration/files/*\ninclude tests/unit/templates/files/*\nrecursive-include doc *\nrecursive-include scripts *\nrecursive-include conf *\nrecursive-include pkg *\nrecursive-include salt *.jinja\nrecursive-include templates *\ninclude salt/_version.txt\ninclude salt/templates/git/*\ninclude salt/templates/lxc/*\ninclude salt/utils/pyinstaller/rthooks.dat\n"
        },
        {
          "name": "NOTICE",
          "type": "blob",
          "size": 0.541015625,
          "content": "Copyright 2012-2022 VMware, Inc.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n"
        },
        {
          "name": "POLICY.rst",
          "type": "blob",
          "size": 4.955078125,
          "content": "=================================\nSalt Project maintenance policies\n=================================\n\nThis document explains the current project maintenance policies. The goal of\nthese policies are to reduce the maintenance burden on core maintainers of the\nSalt Project and to encourage more active engagement from the Salt community.\n\n* `Issue management`_\n* `Pull request management`_\n* `Salt Enhancement Proposals (SEP) process`_\n\n\nIssue management\n================\nIssues for the Salt Project are critical to Salt community communication and to\nfind and resolve issues in the Salt Project. As such, the issue tracker needs to\nbe kept clean and current to the currently supported releases of Salt. They also\nneed to be free of feature requests, arguments, and trolling.\n\nWe have decided to update our issue policy to be similar to RedHat community\nproject policies.\n\nCommunity members who repeatedly violate these policies are subject to bans.\n\n#. All issues that were not opened against a currently supported release of Salt\n   will be closed.\n\n   - When an old release of Salt is marked out of support, all issues opened\n     against the now defunct release will be closed.\n   - If the issue is still present in the current release of Salt, submit a new\n     issue. Do not re-open the old issue after it has been closed.\n   - When opening a new issue that was a bug in a previous release of Salt, you\n     must validate it against a currently supported release of Salt for\n     consideration. Issues that do not show the problem against a current\n     release will be closed without consideration.\n\n#. Only defects can be submitted to the issue tracker.\n\n   - Feature requests without a PR will be immediately closed.\n   - Feature requests must be designated as a feature being developed and owned\n     by the issue submitter and assigned to a release. Otherwise they will be\n     immediately closed.\n   - Discussions about features can be held in the GitHub\n     `Discussions <https://github.com/saltstack/salt/discussions>`_ tab or in\n     the community `Open Hour <https://saltproject.io/calendar/>`_.\n   - Questions will be immediately closed.\n\n#. Issues must submit sufficient information.\n\n   - Issues must follow the relevant template for information.\n   - Issues that do not give sufficient information about the nature of the\n     issue **and how to reproduce the issue** will be immediately closed.\n   - Issues that do not comply will be immediately closed.\n\n\nPull request management\n=======================\nThe Salt pull request (PR) queue has been a challenge to maintain for the entire\nlife of the project. This is in large part due to the incredibly active and\nvibrant community around Salt.\n\nUnfortunately, it has proven to be too much for the core team and the greater\nSalt community to manage. As such, we deem it necessary to make fundamental\nchanges to how we manage the PR queue:\n\n#. All PRs opened against releases of Salt that are no longer supported will be\n   closed immediately.\n#. Closed PRs can be resubmitted, NOT re-opened.\n#. PRs need to provide full tests for all of the code affected, regardless of\n   whether the PR author wrote the code affected.\n#. PR tests need to be written using the current test mechanism (pytest).\n#. PRs need to pass tests.\n#. PRs must NOT increase the overall test time by a noticeable length.\n#. PRs must NOT add new plugins directly to Salt unless sanctioned by the Salt\n   core team. New plugins should be made into Salt Extensions.\n#. PRs that have not been updated due to inactivity will be closed. Inactivity\n   is determined by a lack of submitter activity for the space of 1 month.\n#. PR tests should always maintain or increase total code coverage.\n\n\nSalt Enhancement Proposals (SEP) process\n========================================\n**A message from Thomas Hatch, creator of Salt:**\n\nIn 2019, we decided to create a community process to discuss and review Salt\nEnhancement Proposals (SEPs). Unfortunately, I feel that this process has not\nproven to be an effective way to solve the core issues around Salt Enhancements.\nOverall, the Salt enhancement process has proven itself to be more of a burden\nthan an accelerant to Salt stability, security, and progress. As such, I feel\nthat the current optimal course of action is to shut the process down.\n\nInstead of the Salt Enhancement Proposal process, we will add a time in the\n`Open Hour <https://saltproject.io/calendar/>`_ for people to present ideas and\nconcepts to better understand if they are worth their effort to develop.\nExtensive documentation around more intrusive or involved enhancements should\nbe included in pull requests (PRs). Conversations about enhancements can also be\nheld in the `Discussions <https://github.com/saltstack/salt/discussions>`_ tab\nin GitHub.\n\nBy migrating the conversation into the PR process, we ensure that we are only\nreviewing viable proposals instead of being burdened with requests that the core\nteam is expected to fulfill.\n\nEffective immediately (January 2024), we are archiving and freezing the SEP\nrepo.\n"
        },
        {
          "name": "README.rst",
          "type": "blob",
          "size": 8.5986328125,
          "content": ".. image:: https://img.shields.io/github/license/saltstack/salt\n   :alt: Salt Project License: Apache v2.0\n   :target: https://github.com/saltstack/salt/blob/master/LICENSE\n\n.. image:: https://img.shields.io/pypi/dm/salt?label=pypi%20downloads\n   :alt: PyPi Package Downloads\n   :target: https://pypi.org/project/salt\n\n.. image:: https://img.shields.io/lgtm/grade/python/github/saltstack/salt\n   :alt: PyPi Package Downloads\n   :target: https://lgtm.com/projects/g/saltstack/salt/context:python\n\n.. image:: https://img.shields.io/badge/slack-SaltProject-blue.svg?logo=slack\n   :alt: Salt Project Slack Community\n   :target: https://via.vmw.com/salt-slack\n\n.. image:: https://img.shields.io/twitch/status/saltprojectoss\n   :alt: Salt Project Twitch Channel\n   :target: https://www.twitch.tv/saltprojectoss\n\n.. image:: https://img.shields.io/reddit/subreddit-subscribers/saltstack?style=social\n   :alt: Salt Project subreddit\n   :target: https://www.reddit.com/r/saltstack/\n\n.. image:: https://img.shields.io/twitter/follow/Salt_Project_OS?style=social&logo=twitter\n   :alt: Follow SaltStack on Twitter\n   :target: https://twitter.com/intent/follow?screen_name=Salt_Project_OS\n\n.. figure:: https://gitlab.com/saltstack/open/salt-branding-guide/-/raw/master/logos/SaltProject_altlogo_teal.png?inline=true\n   :scale: 80 %\n   :width: 1000px\n   :height: 356px\n   :align: center\n   :alt: Salt Project Logo\n\n* `Latest Salt Documentation`_\n* `Open an issue`_ (bug report, feature request, etc.)\n\n*Salt is the world's fastest, most intelligent and scalable automation*\n*engine.*\n\nAbout Salt\n==========\nBuilt on Python, Salt is an event-driven automation tool and framework to\ndeploy, configure, and manage complex IT systems. Use Salt to automate common\ninfrastructure administration tasks and ensure that all the components of your\ninfrastructure are operating in a consistent desired state.\n\nSalt has many possible uses, including configuration management, which involves:\n\n* Managing operating system deployment and configuration.\n* Installing and configuring software applications and services.\n* Managing servers, virtual machines, containers, databases, web servers,\n  network devices, and more.\n* Ensuring consistent configuration and preventing configuration drift.\n\nSalt is ideal for configuration management because it is pluggable,\ncustomizable, and plays well with many existing technologies. Salt enables you\nto deploy and manage applications that use any tech stack running on nearly any\n`operating system <https://docs.saltproject.io/salt/install-guide/en/latest/topics/salt-supported-operating-systems.html>`_,\nincluding different types of network devices such as switches and routers from a\nvariety of vendors.\n\nIn addition to configuration management Salt can also:\n\n* Automate and orchestrate routine IT processes, such as common required tasks\n  for scheduled server downtimes or upgrading operating systems or applications.\n* Create self-aware, self-healing systems that can automatically respond to\n  outages, common administration problems, or other important events.\n\n\nAbout our sponsors\n==================\nSalt powers VMware's `VMware Aria Automation Config`_\n(previously vRealize Automation SaltStack Config / SaltStack Enterprise), and can be found\nunder the hood of products from Juniper, Cisco, Cloudflare, Nutanix, SUSE, and\nTieto, to name a few.\n\nThe original sponsor of our community, SaltStack, was `acquired by VMware in 2020 <https://www.vmware.com/company/acquisitions/saltstack.html>`_.\nThe Salt Project remains an open source ecosystem that VMware supports and\ncontributes to. VMware ensures the code integrity and quality of the Salt\nmodules by acting as the official sponsor and manager of the Salt project. Many\nof the core Salt Project contributors are also VMware employees. This team\ncarefully reviews and enhances the Salt modules to ensure speed, quality, and\nsecurity.\n\n\nDownload and install Salt\n=========================\nSalt is tested and packaged to run on CentOS, Debian, RHEL, Ubuntu, MacOS,\nWindows, and more. Download Salt and get started now. See\n`supported operating systems <https://docs.saltproject.io/salt/install-guide/en/latest/topics/salt-supported-operating-systems.html>`_\nfor more information.\n\nTo download and install Salt, see:\n* `The Salt install guide <https://docs.saltproject.io/salt/install-guide/en/latest/index.html>`_\n* `Salt Project repository <https://repo.saltproject.io/>`_\n\n\nTechnical support\n=================\nReport bugs or problems using Salt by opening an issue: `<https://github.com/saltstack/salt/issues>`_\n\nTo join our community forum where you can exchange ideas, best practices,\ndiscuss technical support questions, and talk to project maintainers, join our\nSlack workspace: `Salt Project Community Slack`_\n\n\nSalt Project documentation\n==========================\nInstallation instructions, tutorials, in-depth API and module documentation:\n\n* `The Salt install guide <https://docs.saltproject.io/salt/install-guide/en/latest/index.html>`_\n* `The Salt user guide <https://docs.saltproject.io/salt/user-guide/en/latest/>`_\n* `Latest Salt documentation`_\n* `Salt's contributing guide <https://docs.saltproject.io/en/master/topics/development/contributing.html>`_\n\n\nSecurity advisories\n===================\nKeep an eye on the Salt Project\n`Security Announcements <https://saltproject.io/security-announcements/>`_\nlanding page. Salt Project recommends subscribing to the\n`Salt Project Security RSS feed <https://saltproject.io/security-announcements/index.xml>`_\nto receive notification when new information is available regarding security\nannouncements.\n\nOther channels to receive security announcements include the\n`Salt Community mailing list <https://groups.google.com/forum/#!forum/salt-users>`_\nand the `Salt Project Community Slack`_.\n\n\nResponsibly reporting security vulnerabilities\n++++++++++++++++++++++++++++++++++++++++++++++\nWhen reporting security vulnerabilities for Salt or other SaltStack projects,\nrefer to the `SECURITY.md`_ file found in this repository.\n\n\nJoin our community\n==================\nSalt is built by the Salt Project community, which includes more than 3,000\ncontributors working in roles just like yours. This well-known and trusted\ncommunity works together to improve the underlying technology and extend Salt by\ncreating a variety of execution and state modules to accomplish the most common\ntasks or solve the most important problems that people in your role are likely\nto face.\n\nIf you want to help extend Salt or solve a problem with Salt, you can join our\ncommunity and contribute today.\n\nPlease be sure to review our\n`Code of Conduct <https://github.com/saltstack/salt/blob/master/CODE_OF_CONDUCT.md>`_.\nAlso, check out some of our community resources including:\n\n* `Salt Project Community Wiki <https://github.com/saltstack/community/wiki>`_\n* `Salt Project Community Slack`_\n* `Salt Project: IRC on LiberaChat <https://web.libera.chat/#salt>`_\n* `Salt Project YouTube channel <https://www.youtube.com/channel/UCpveTIucFx9ljGelW63-BWg>`_\n* `Salt Project Twitch channel <https://www.twitch.tv/saltprojectoss>`_\n\nThere are lots of ways to get involved in our community. Every month, there are\naround a dozen opportunities to meet with other contributors and the Salt Core\nteam and collaborate in real time. The best way to keep track is by subscribing\nto the **Salt Project Community Events Calendar** on the main\n`<https://saltproject.io>`_ website.\n\nIf you have additional questions, email us at saltproject@vmware.com or reach out\ndirectly to the Community Manager, Jimmy Chunga via Slack. We'd be glad to\nhave you join our community!\n\n\nLicense\n=======\nSalt is licensed under the Apache 2.0 license. Please\nsee the\n`LICENSE file <https://github.com/saltstack/salt/blob/master/LICENSE>`_ for the\nfull text of the Apache license, followed by a full summary of the licensing\nused by external modules.\n\nA complete list of attributions and dependencies can be found here:\n`salt/DEPENDENCIES.md <https://github.com/saltstack/salt/blob/master/DEPENDENCIES.md>`_\n\n.. _Salt Project Community Slack: https://via.vmw.com/salt-slack\n.. _VMware Aria Automation Config: https://www.vmware.com/products/vrealize-automation/saltstack-config.html\n.. _Latest Salt Documentation: https://docs.saltproject.io/en/latest/\n.. _Open an issue: https://github.com/saltstack/salt/issues/new/choose\n.. _SECURITY.md: https://github.com/saltstack/salt/blob/master/SECURITY.md\n.. _Calendar html: https://outlook.office365.com/owa/calendar/105f69bacd4541baa849529aed37eb2d@vmware.com/434ec2155b2b4cce90144c87f0dd03d56626754050155294962/calendar.html\n.. _Calendar ics: https://outlook.office365.com/owa/calendar/105f69bacd4541baa849529aed37eb2d@vmware.com/434ec2155b2b4cce90144c87f0dd03d56626754050155294962/calendar.ics\n"
        },
        {
          "name": "SECURITY.md",
          "type": "blob",
          "size": 5.8271484375,
          "content": "# SaltStack's Security Disclosure Policy\n\n**Email**\n- saltproject-security.pdl@broadcom.com\n\n**GPG key ID:**\n- 37654A06\n\n**GPG key fingerprint:**\n- `99EF 26F2 6469 2D24 973A 7007 E8BF 76A7 3765 4A06`\n\n**GPG Public Key**\n\n```\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINBGZpxDsBEACz8yoRBXaJiifaWz3wd4FLSO18mgH7H/+0iNTbV1ZwhgGEtWTF\nZ31HfrsbxVgICoMgFYt8WKnc4MHZLIgDfTuCFQpf7PV/VqRBAknZwQKEAjHfrYNz\nQ1vy3CeKC1qcKQISEQr7VFf58sOC8GJ54jLLc2rCsg9cXI6yvUFtGwL9Qv7g/NZn\nrtLjc4NZIKdIvSt+/PtooQtsz0jfLMdMpMFa41keH3MknIbydBUnGj7eC8ANN/iD\nRe2QHAW2KfQh3Ocuh/DpJ0/dwbzXmXfMWHk30E+s31TfdLiFt1Iz5kZDF8iHrDMq\nx39/GGmF10y5rfq43V1Ucxm+1tl5Km0JcX6GpPUtgRpfUYAxwxfGfezt4PjYRYH2\nmNxXXPLsnVTvdWPTvS0msSrcTHmnU5His38I6goXI7dLZm0saqoWi3sqEQ8TPS6/\nDkLtYjpb/+dql+KrXD7erd3j8KKflIXn7AEsv+luNk6czGOKgdG9agkklzOHfEPc\nxOGmaFfe/1mu8HxgaCuhNAQWlk79ZC+GAm0sBZIQAQRtABgag5vWr16hVix7BPMG\nFp8+caOVv6qfQ7gBmJ3/aso6OzyOxsluVxQRt94EjPTm0xuwb1aYNJOhEj9cPkjQ\nXBjo3KN0rwcAViR/fdUzrIV1sn2hms0v5WZ+TDtz1w0OpLZOwe23BDE1+QARAQAB\ntEJTYWx0IFByb2plY3QgU2VjdXJpdHkgVGVhbSA8c2FsdHByb2plY3Qtc2VjdXJp\ndHkucGRsQGJyb2FkY29tLmNvbT6JAlcEEwEKAEEWIQSZ7ybyZGktJJc6cAfov3an\nN2VKBgUCZmnEOwIbAwUJB4TOAAULCQgHAgIiAgYVCgkICwIEFgIDAQIeBwIXgAAK\nCRDov3anN2VKBk7rD/9QdcYdNGfk96W906HlVpb3JCwT0t9T7ElP97Ot0YN6LqMj\nvVQpxWYi7riUSyt1FtlCAM+hmghImzILF9LKDRCZ1H5UStI/u9T53cZpUZtVW/8R\nbUNBCl495UcgioIZG5DsfZ/GdBOgY+hQfdgh7HC8a8A/owCt2hHbnth970NQ+LHb\n/0ERLfOHRxozgPBhze8Vqf939KlteM5ljgTw/IkJJIsxJi4C6pQntSHvB3/Bq/Nw\nKf3vk3XYFtVibeQODSVvc6useo+SNGV/wsK/6kvh/vfP9Trv/GMOn/89Bj2aL1PR\nM382E6sDB9d22p4ehVgbcOpkwHtr9DGerK9xzfG4aUjLu9qVD5Ep3gqKSsCe+P8z\nbpADdVCnk+Vdp3Bi+KI7buSkqfbZ0m9vCY3ei1fMiDiTTjvNliL5QCO6PvYNYiDw\n+LLImrQThv55ZRQsRRT7J6A94kwDoI6zcBEalv/aPws0nQHJtgWRUpmy5RcbVu9Z\nQBXlUpCzCB+gGaGRE1u0hCfuvkbcG1pXFFBdSUuAK4o4ktiRALVUndELic/PU1nR\njwo/+j0SGw/jTwqVChUfLDZbiAQ2JICoVpZ+e1zQfsxa/yDu2e4D543SvNFHDsxh\nbsBeCsopzJSA0n2HAdYvPxOPoWVvZv+U8ZV3EEVOUgsO5//cRJddCgLU89Q4DrkC\nDQRmacQ7ARAAsz8jnpfw3DCRxdCVGiqWAtgj8r2gx5n1wJsKsgvyGQdKUtPwlX04\n7w13lIDT2DwoXFozquYsTn9XkIoWbVckqo0NN/V7/QxIZIYTqRcFXouHTbXDJm5C\ntsvfDlnTsaplyRawPU2mhYg39/lzIt8zIjvy5zo/pElkRP5m03nG+ItrsHN6CCvf\nZiRxme6EQdn+aoHh2GtICL8+c3HvQzTHYKxFn84Ibt3uNxwt+Mu6YhG9tkYMQQk5\nSkYA4CYAaw2Lc/g0ee36iqw/5d79M8YcQtHhy5zzqgdEvExjFPdowV1hhFIEkNkM\nuqIAknXVesqLLw2hPeYmyhYQqeBKIrWmBhBKX9c0vMYkDDH3T/sSylVhH0QAXP6E\nWmLja3E1ov6pt6j7j/wWzC9LSMFDJI2yWCeOE1oea5D89tH6XvsGRTiog62zF/9a\n77197iIa0+o91chp4iLkzDvuK8pVujPx8bNsK8jlJ+OW73NmliCVg+hecoFLNsri\n/TsBngFNVcu79Q1XfyvoDdR2C09ItCBEZGt6LOlq/+ATUw1aBz6L1hvLBtiR3Hfu\nX31YlbxdvVPjlzg6O6GXSfnokNTWv2mVXWTRIrP0RrKvMyiNPXVW7EunUuXI0Axk\nXg3E5kAjKXkBXzoCTCVz/sXPLjvjI0x3Z7obgPpcTi9h5DIX6PFyK/kAEQEAAYkC\nPAQYAQoAJhYhBJnvJvJkaS0klzpwB+i/dqc3ZUoGBQJmacQ7AhsMBQkHhM4AAAoJ\nEOi/dqc3ZUoGDeAQAKbyiHA1sl0fnvcZxoZ3mWA/Qesddp7Nv2aEW8I3hAJoTVml\nZvMxk8leZgsQJtSsVDNnxeyW+WCIUkhxmd95UlkTTj5mpyci1YrxAltPJ2TWioLe\nF2doP8Y+4iGnaV+ApzWG33sLr95z37RKVdMuGk/O5nLMeWnSPA7HHWJCxECMm0SH\nuI8aby8w2aBZ1kOMFB/ToEEzLBu9fk+zCzG3uH8QhdciMENVhsyBSULIrmwKglyI\nVQwj2dXHyekQh7QEHV+CdKMfs3ZOANwm52OwjaK0dVb3IMFGvlUf4UXXfcXwLAkj\nvW+Ju4kLGxVQpOlh1EBain9WOaHZGh6EGuTpjJO32PyRq8iSMNb8coeonoPFWrE/\nA5dy3z5x5CZhJ6kyNwYs/9951r30Ct9qNZo9WZwp8AGQVs+J9XEYnZIWXnO1hdKs\ndRStPvY7VqS500t8eWqWRfCLgofZAb9Fv7SwTPQ2G7bOuTXmQKAIEkU9vzo5XACu\nAtR/9bC9ghNnlNuH4xiViBclrq2dif/I2ZwItpQHjuCDeMKz9kdADRI0tuNPpRHe\nQP1YpURW+I+PYZzNgbnwzl6Bxo7jCHFgG6BQ0ih5sVwEDhlXjSejd8CNMYEy3ElL\nxJLUpltwXLZSrJEXYjtJtnh0om71NXes0OyWE1cL4+U6WA9Hho6xedjk2bai\n=pPmt\n-----END PGP PUBLIC KEY BLOCK-----\n```\n\nThe SaltStack Security Team is available at saltproject-security.pdl@broadcom.com for\nsecurity-related bug reports or questions.\n\nWe request the disclosure of any security-related bugs or issues be reported\nnon-publicly until such time as the issue can be resolved and a security-fix\nrelease can be prepared. At that time we will release the fix and make a public\nannouncement with upgrade instructions and download locations.\n\n## Security response procedure\n\nSaltStack takes security and the trust of our customers and users very\nseriously. Our disclosure policy is intended to resolve security issues as\nquickly and safely as is possible.\n\n1.  A security report sent to saltproject-security.pdl@broadcom.com is assigned to a team\n    member. This person is the primary contact for questions and will\n    coordinate the fix, release, and announcement.\n\n2.  The reported issue is reproduced and confirmed. A list of affected projects\n    and releases is made.\n\n3.  Fixes are implemented for all affected projects and releases that are\n    actively supported. Back-ports of the fix are made to any old releases that\n    are actively supported.\n\n4.  Packagers are notified via the [salt-packagers](https://groups.google.com/forum/#!forum/salt-packagers) mailing list that an issue\n    was reported and resolved, and that an announcement is incoming.\n\n5.  A new release is created and pushed to all affected repositories. The\n    release documentation provides a full description of the issue, plus any\n    upgrade instructions or other relevant details.\n\n6.  An announcement is made to the [salt-users](https://groups.google.com/forum/#!forum/salt-users) and [salt-announce](https://groups.google.com/forum/#!forum/salt-announce) mailing\n    lists. The announcement contains a description of the issue and a link to\n    the full release documentation and download locations.\n\n## Receiving security announcements\n\nThe fastest place to receive security announcements is via the [salt-announce](https://groups.google.com/forum/#!forum/salt-announce)\nmailing list. This list is low-traffic.\n\n## Guidance on Salt and security best practices\n\nReference the following documentation to ensure Salt best practices are being\nimplemented in your infrastructure:\n\n- [Docs: Hardening Salt](https://docs.saltproject.io/en/master/topics/hardening.html)\n- [Docs: Salt Best Practices](https://docs.saltproject.io/en/master/topics/best_practices.html)\n- [Blog: How I Hardened My Salt Environment](https://saltproject.io/blog/how-i-hardened-my-salt-environment/)\n"
        },
        {
          "name": "SUPPORT.rst",
          "type": "blob",
          "size": 1.3349609375,
          "content": "Get SaltStack Support and Help\n==============================\n\n**IRC Chat** - Join the vibrant, helpful and positive SaltStack chat room in\nLiberaChat at #salt. There is no need to introduce yourself, or ask permission\nto join in, just help and be helped! Make sure to wait for an answer, sometimes\nit may take a few moments for someone to reply.\n\n`<https://web.libera.chat/#salt>`_\n\n**SaltStack Slack** - Alongside IRC is our SaltStack Community Slack for the\nSaltStack Working groups. Use the following link to request an invitation.\n\n`<https://via.vmw.com/salt-slack>`_\n\n**Mailing List** - The SaltStack community users mailing list is hosted by\nGoogle groups. Anyone can post to ask questions about SaltStack products and\nanyone can help answer. Join the conversation!\n\n`<https://groups.google.com/forum/#!forum/salt-users>`_\n\nYou may subscribe to the list without a Google account by emailing\nsalt-users+subscribe@googlegroups.com and you may post to the list by emailing\nsalt-users@googlegroups.com\n\n**Reporting Issues** - To report an issue with Salt, please follow the\nguidelines for filing bug reports:\n`<https://docs.saltproject.io/en/master/topics/development/reporting_bugs.html>`_\n\n**SaltStack Support** - If you need dedicated, prioritized support, please\nconsider a SaltStack Support package that fits your needs:\n`<http://www.saltstack.com/support>`_\n"
        },
        {
          "name": "changelog",
          "type": "tree",
          "content": null
        },
        {
          "name": "cicd",
          "type": "tree",
          "content": null
        },
        {
          "name": "conf",
          "type": "tree",
          "content": null
        },
        {
          "name": "doc",
          "type": "tree",
          "content": null
        },
        {
          "name": "noxfile.py",
          "type": "blob",
          "size": 63.7470703125,
          "content": "\"\"\"\nnoxfile\n~~~~~~~\n\nNox configuration script\n\"\"\"\n\n# pylint: disable=resource-leakage,3rd-party-module-not-gated\n\nimport contextlib\nimport datetime\nimport glob\nimport gzip\nimport json\nimport os\nimport pathlib\nimport shutil\nimport sqlite3\nimport sys\nimport tarfile\nimport tempfile\n\nimport nox.command\n\n# fmt: off\nif __name__ == \"__main__\":\n    sys.stderr.write(\n        \"Do not execute this file directly. Use nox instead, it will know how to handle this file\\n\"\n    )\n    sys.stderr.flush()\n    exit(1)\n# fmt: on\n\nimport nox  # isort:skip\nfrom nox.command import CommandFailed  # isort:skip\n\n\nREPO_ROOT = pathlib.Path(__file__).resolve().parent\nENV_FILE = REPO_ROOT / \".ci-env\"\nif ENV_FILE.exists():\n    print(\"Found .ci-env file. Updating environment...\", flush=True)\n    for key, value in json.loads(ENV_FILE.read_text()).items():\n        print(f\"  {key}={value}\", flush=True)\n        os.environ[key] = value\n    print(\"Deleting .ci-env file\", flush=True)\n    ENV_FILE.unlink()\n\n# Be verbose when running under a CI context\nCI_RUN = (\n    os.environ.get(\"JENKINS_URL\")\n    or os.environ.get(\"CI\")\n    or os.environ.get(\"DRONE\") is not None\n)\nPIP_INSTALL_SILENT = CI_RUN is False\nPRINT_TEST_SELECTION = os.environ.get(\"PRINT_TEST_SELECTION\")\nif PRINT_TEST_SELECTION is None:\n    PRINT_TEST_SELECTION = CI_RUN\nelse:\n    PRINT_TEST_SELECTION = PRINT_TEST_SELECTION == \"1\"\nPRINT_TEST_PLAN_ONLY = os.environ.get(\"PRINT_TEST_PLAN_ONLY\", \"0\") == \"1\"\nPRINT_SYSTEM_INFO = os.environ.get(\"PRINT_SYSTEM_INFO\")\nif PRINT_SYSTEM_INFO is None:\n    PRINT_SYSTEM_INFO = CI_RUN\nelse:\n    PRINT_SYSTEM_INFO = PRINT_SYSTEM_INFO == \"1\"\nPRINT_SYSTEM_INFO_ONLY = os.environ.get(\"PRINT_SYSTEM_INFO_ONLY\", \"0\") == \"1\"\nSKIP_REQUIREMENTS_INSTALL = os.environ.get(\"SKIP_REQUIREMENTS_INSTALL\", \"0\") == \"1\"\nEXTRA_REQUIREMENTS_INSTALL = os.environ.get(\"EXTRA_REQUIREMENTS_INSTALL\")\nCOVERAGE_REQUIREMENT = os.environ.get(\"COVERAGE_REQUIREMENT\")\n\n# Global Path Definitions\nREPO_ROOT = pathlib.Path(os.path.dirname(__file__)).resolve()\nARTIFACTS_DIR = REPO_ROOT / \"artifacts\"\nCOVERAGE_OUTPUT_DIR = ARTIFACTS_DIR / \"coverage\"\nCOVERAGE_FILE = os.environ.get(\"COVERAGE_FILE\")\nif COVERAGE_FILE is None:\n    COVERAGE_FILE = str(COVERAGE_OUTPUT_DIR / \".coverage\")\nIS_DARWIN = sys.platform.lower().startswith(\"darwin\")\nIS_WINDOWS = sys.platform.lower().startswith(\"win\")\nIS_FREEBSD = sys.platform.lower().startswith(\"freebsd\")\nIS_LINUX = sys.platform.lower().startswith(\"linux\")\nONEDIR_ARTIFACT_PATH = ARTIFACTS_DIR / \"salt\"\nif IS_WINDOWS:\n    ONEDIR_PYTHON_PATH = ONEDIR_ARTIFACT_PATH / \"Scripts\" / \"python.exe\"\nelse:\n    ONEDIR_PYTHON_PATH = ONEDIR_ARTIFACT_PATH / \"bin\" / \"python3\"\n# Python versions to run against\n_PYTHON_VERSIONS = (\"3\", \"3.8\", \"3.9\", \"3.10\", \"3.11\")\n\n# Nox options\n#  Reuse existing virtualenvs\nnox.options.reuse_existing_virtualenvs = True\n\n# Change current directory to REPO_ROOT\nos.chdir(str(REPO_ROOT))\n\nRUNTESTS_LOGFILE = ARTIFACTS_DIR.joinpath(\n    \"logs\",\n    \"runtests-{}.log\".format(datetime.datetime.now().strftime(\"%Y%m%d%H%M%S.%f\")),\n)\n\n# Prevent Python from writing bytecode\nos.environ[\"PYTHONDONTWRITEBYTECODE\"] = \"1\"\n\n\ndef session_warn(session, message):\n    try:\n        session.warn(message)\n    except AttributeError:\n        session.log(f\"WARNING: {message}\")\n\n\ndef session_run_always(session, *command, **kwargs):\n    \"\"\"\n    Patch nox to allow running some commands which would be skipped if --install-only is passed.\n    \"\"\"\n    try:\n        # Guess we weren't the only ones wanting this\n        # https://github.com/theacodes/nox/pull/331\n        return session.run_always(*command, **kwargs)\n    except AttributeError:\n        old_install_only_value = session._runner.global_config.install_only\n        try:\n            # Force install only to be false for the following chunk of code\n            # For additional information as to why see:\n            #   https://github.com/theacodes/nox/pull/181\n            session._runner.global_config.install_only = False\n            return session.run(*command, **kwargs)\n        finally:\n            session._runner.global_config.install_only = old_install_only_value\n\n\ndef find_session_runner(session, name, python_version, onedir=False, **kwargs):\n    if onedir:\n        name += f\"-onedir-{ONEDIR_PYTHON_PATH}\"\n    else:\n        name += f\"-{python_version}\"\n    for s, _ in session._runner.manifest.list_all_sessions():\n        if name not in s.signatures:\n            continue\n        for signature in s.signatures:\n            for key, value in kwargs.items():\n                param = f\"{key}={value!r}\"\n                if param not in signature:\n                    break\n            else:\n                return s\n            continue\n    session.error(\n        \"Could not find a nox session by the name {!r} with the following keyword arguments: {!r}\".format(\n            name, kwargs\n        )\n    )\n\n\ndef _create_ci_directories():\n    ARTIFACTS_DIR.mkdir(parents=True, exist_ok=True)\n    # Allow other users to write to this directory.\n    # This helps when some tests run under a different name and yet\n    # they need access to this path, for example, code coverage.\n    ARTIFACTS_DIR.chmod(0o777)\n    COVERAGE_OUTPUT_DIR.mkdir(exist_ok=True)\n    COVERAGE_OUTPUT_DIR.chmod(0o777)\n    ARTIFACTS_DIR.joinpath(\"xml-unittests-output\").mkdir(exist_ok=True)\n\n\ndef _get_session_python_version_info(session):\n    try:\n        version_info = session._runner._real_python_version_info\n    except AttributeError:\n        session_py_version = session_run_always(\n            session,\n            \"python\",\n            \"-c\",\n            'import sys; sys.stdout.write(\"{}.{}.{}\".format(*sys.version_info))',\n            stderr=None,\n            silent=True,\n            log=False,\n        )\n        version_info = tuple(\n            int(part)\n            for part in session_py_version.strip().split(\".\")\n            if part.isdigit()\n        )\n        session._runner._real_python_version_info = version_info\n    return version_info\n\n\ndef _get_pydir(session):\n    version_info = _get_session_python_version_info(session)\n    if version_info < (3, 8):\n        session.error(\"Only Python >= 3.8 is supported\")\n    return \"py{}.{}\".format(*version_info)\n\n\ndef _get_pip_requirements_file(session, crypto=None, requirements_type=\"ci\"):\n    assert requirements_type in (\"ci\", \"pkg\")\n    pydir = _get_pydir(session)\n\n    if IS_WINDOWS:\n        if crypto is None:\n            _requirements_file = os.path.join(\n                \"requirements\", \"static\", requirements_type, pydir, \"windows.txt\"\n            )\n            if os.path.exists(_requirements_file):\n                return _requirements_file\n        _requirements_file = os.path.join(\n            \"requirements\", \"static\", requirements_type, pydir, \"windows-crypto.txt\"\n        )\n        if os.path.exists(_requirements_file):\n            return _requirements_file\n        session.error(f\"Could not find a windows requirements file for {pydir}\")\n    elif IS_DARWIN:\n        if crypto is None:\n            _requirements_file = os.path.join(\n                \"requirements\", \"static\", requirements_type, pydir, \"darwin.txt\"\n            )\n            if os.path.exists(_requirements_file):\n                return _requirements_file\n        _requirements_file = os.path.join(\n            \"requirements\", \"static\", requirements_type, pydir, \"darwin-crypto.txt\"\n        )\n        if os.path.exists(_requirements_file):\n            return _requirements_file\n        session.error(f\"Could not find a darwin requirements file for {pydir}\")\n    elif IS_FREEBSD:\n        if crypto is None:\n            _requirements_file = os.path.join(\n                \"requirements\", \"static\", requirements_type, pydir, \"freebsd.txt\"\n            )\n            if os.path.exists(_requirements_file):\n                return _requirements_file\n        _requirements_file = os.path.join(\n            \"requirements\", \"static\", requirements_type, pydir, \"freebsd-crypto.txt\"\n        )\n        if os.path.exists(_requirements_file):\n            return _requirements_file\n        session.error(f\"Could not find a freebsd requirements file for {pydir}\")\n    else:\n        if crypto is None:\n            _requirements_file = os.path.join(\n                \"requirements\", \"static\", requirements_type, pydir, \"linux.txt\"\n            )\n            if os.path.exists(_requirements_file):\n                return _requirements_file\n        _requirements_file = os.path.join(\n            \"requirements\", \"static\", requirements_type, pydir, \"linux-crypto.txt\"\n        )\n        if os.path.exists(_requirements_file):\n            return _requirements_file\n        session.error(f\"Could not find a linux requirements file for {pydir}\")\n\n\ndef _upgrade_pip_setuptools_and_wheel(session, upgrade=True):\n    if SKIP_REQUIREMENTS_INSTALL:\n        session.log(\n            \"Skipping Python Requirements because SKIP_REQUIREMENTS_INSTALL was found in the environ\"\n        )\n        return False\n\n    env = os.environ.copy()\n    env[\"PIP_CONSTRAINT\"] = str(REPO_ROOT / \"requirements\" / \"constraints.txt\")\n    install_command = [\n        \"python\",\n        \"-m\",\n        \"pip\",\n        \"install\",\n        \"--progress-bar=off\",\n    ]\n    if upgrade:\n        install_command.append(\"-U\")\n    install_command.extend([\"setuptools\", \"pip\", \"wheel\"])\n    session_run_always(session, *install_command, silent=PIP_INSTALL_SILENT, env=env)\n    return True\n\n\ndef _install_requirements(\n    session,\n    *extra_requirements,\n    requirements_type=\"ci\",\n    onedir=False,\n):\n    if onedir and IS_LINUX:\n        session_run_always(session, \"python3\", \"-m\", \"relenv\", \"toolchain\", \"fetch\")\n\n    if not _upgrade_pip_setuptools_and_wheel(session):\n        return False\n\n    # Install requirements\n    env = os.environ.copy()\n    env[\"PIP_CONSTRAINT\"] = str(REPO_ROOT / \"requirements\" / \"constraints.txt\")\n\n    requirements_file = _get_pip_requirements_file(\n        session, requirements_type=requirements_type\n    )\n    install_command = [\"--progress-bar=off\", \"-r\", requirements_file]\n    session.install(*install_command, silent=PIP_INSTALL_SILENT, env=env)\n\n    if extra_requirements:\n        install_command = [\"--progress-bar=off\"]\n        install_command += list(extra_requirements)\n        session.install(*install_command, silent=PIP_INSTALL_SILENT, env=env)\n\n    if EXTRA_REQUIREMENTS_INSTALL:\n        session.log(\n            \"Installing the following extra requirements because the\"\n            \" EXTRA_REQUIREMENTS_INSTALL environment variable was set: %s\",\n            EXTRA_REQUIREMENTS_INSTALL,\n        )\n        # We pass --constraint in this step because in case any of these extra dependencies has a requirement\n        # we're already using, we want to maintain the locked version\n        install_command = [\"--progress-bar=off\", \"--constraint\", requirements_file]\n        install_command += EXTRA_REQUIREMENTS_INSTALL.split()\n        session.install(*install_command, silent=PIP_INSTALL_SILENT, env=env)\n\n    return True\n\n\ndef _install_coverage_requirement(session):\n    if SKIP_REQUIREMENTS_INSTALL is False:\n        env = os.environ.copy()\n        env[\"PIP_CONSTRAINT\"] = str(REPO_ROOT / \"requirements\" / \"constraints.txt\")\n        coverage_requirement = COVERAGE_REQUIREMENT\n        if coverage_requirement is None:\n            coverage_requirement = \"coverage==7.3.1\"\n            if IS_LINUX:\n                distro_slug = os.environ.get(\"TOOLS_DISTRO_SLUG\")\n                if distro_slug is not None and distro_slug in (\n                    \"centos-7\",\n                    \"debian-10\",\n                    \"photonos-3\",\n                ):\n                    # Keep the old coverage requirement version since the new one, on these\n                    # Plaforms turns the test suite quite slow.\n                    # Unit tests don't finish before the 5 hours timeout when they should\n                    # finish within 1 to 2 hours.\n                    coverage_requirement = \"coverage==5.5\"\n        session.install(\n            \"--progress-bar=off\",\n            coverage_requirement,\n            silent=PIP_INSTALL_SILENT,\n            env=env,\n        )\n\n\ndef _run_with_coverage(session, *test_cmd, env=None, on_rerun=False):\n    _install_coverage_requirement(session)\n    if on_rerun is False:\n        session.run(\"coverage\", \"erase\")\n\n    if env is None:\n        env = {}\n\n    sitecustomize_dir = session.run(\n        \"salt-factories\", \"--coverage\", silent=True, log=True, stderr=None\n    )\n    if sitecustomize_dir is not None:\n        sitecustomize_dir = pathlib.Path(sitecustomize_dir.strip()).resolve()\n        if not sitecustomize_dir.exists():\n            session.error(\n                f\"The path to 'sitecustomize.py', '{str(sitecustomize_dir)}', does not exist.\"\n            )\n\n    if sitecustomize_dir:\n        try:\n            relative_sitecustomize_dir = sitecustomize_dir.relative_to(REPO_ROOT)\n        except ValueError:\n            relative_sitecustomize_dir = sitecustomize_dir\n        log_msg = f\"Discovered salt-factories coverage 'sitecustomize.py' path: {relative_sitecustomize_dir}\"\n        try:\n            session.debug(log_msg)\n        except AttributeError:\n            # Older nox\n            session.log(log_msg)\n        python_path_env_var = os.environ.get(\"PYTHONPATH\") or None\n        if python_path_env_var is None:\n            python_path_env_var = str(sitecustomize_dir)\n        else:\n            python_path_entries = python_path_env_var.split(os.pathsep)\n            if str(sitecustomize_dir) in python_path_entries:\n                python_path_entries.remove(str(sitecustomize_dir))\n            python_path_entries.insert(0, str(sitecustomize_dir))\n            python_path_env_var = os.pathsep.join(python_path_entries)\n\n        env.update(\n            {\n                # The updated python path so that sitecustomize is importable\n                \"PYTHONPATH\": python_path_env_var,\n                # Instruct sub processes to also run under coverage\n                \"COVERAGE_PROCESS_START\": str(REPO_ROOT / \".coveragerc\"),\n                # The full path to the .coverage data file. Makes sure we always write\n                # them to the same directory\n                \"COVERAGE_FILE\": COVERAGE_FILE,\n            }\n        )\n\n    session.run(*test_cmd, env=env)\n\n\ndef _report_coverage(\n    session,\n    combine=True,\n    cli_report=True,\n    html_report=False,\n    xml_report=False,\n    json_report=False,\n):\n    _install_coverage_requirement(session)\n\n    if not any([combine, cli_report, html_report, xml_report, json_report]):\n        session.error(\n            \"At least one of combine, cli_report, html_report, xml_report, json_report needs to be True\"\n        )\n\n    env = {\n        # The full path to the .coverage data file. Makes sure we always write\n        # them to the same directory\n        \"COVERAGE_FILE\": COVERAGE_FILE,\n    }\n\n    report_section = None\n    if session.posargs:\n        report_section = session.posargs.pop(0)\n        if report_section not in (\"salt\", \"tests\"):\n            session.error(\n                f\"The report section can only be one of 'salt', 'tests', not: {report_section}\"\n            )\n        if session.posargs:\n            session.error(\n                \"Only one argument can be passed to the session, which is optional \"\n                \"and is one of 'salt', 'tests'.\"\n            )\n\n    if combine is True:\n        coverage_db_files = glob.glob(f\"{COVERAGE_FILE}.*\")\n        if coverage_db_files:\n            with contextlib.suppress(CommandFailed):\n                # Sometimes some of the coverage files are corrupt which would trigger a CommandFailed\n                # exception\n                session.run(\"coverage\", \"combine\", env=env)\n        elif os.path.exists(COVERAGE_FILE):\n            session_warn(session, \"Coverage files already combined.\")\n\n        if os.path.exists(COVERAGE_FILE) and not IS_WINDOWS:\n            # Some coverage files might have come from a windows machine, fix paths\n            with sqlite3.connect(COVERAGE_FILE) as db:\n                res = db.execute(r\"SELECT * FROM file WHERE path LIKE '%salt\\%'\")\n                if res.fetchone():\n                    session_warn(\n                        session,\n                        \"Replacing backwards slashes with forward slashes on file \"\n                        \"paths in the coverage database\",\n                    )\n                    db.execute(\n                        r\"UPDATE OR IGNORE file SET path=replace(path, '\\', '/');\"\n                    )\n\n    if not os.path.exists(COVERAGE_FILE):\n        session.error(\"No coverage files found.\")\n\n    if report_section == \"salt\":\n        json_coverage_file = COVERAGE_OUTPUT_DIR.relative_to(REPO_ROOT) / \"salt.json\"\n        xml_coverage_file = COVERAGE_OUTPUT_DIR.relative_to(REPO_ROOT) / \"salt.xml\"\n        html_coverage_dir = COVERAGE_OUTPUT_DIR.relative_to(REPO_ROOT) / \"html\" / \"salt\"\n        cmd_args = [\n            \"--omit=tests/*,tests/pytests/pkg/*\",\n            \"--include=salt/*\",\n        ]\n\n    elif report_section == \"tests\":\n        json_coverage_file = COVERAGE_OUTPUT_DIR.relative_to(REPO_ROOT) / \"tests.json\"\n        xml_coverage_file = COVERAGE_OUTPUT_DIR.relative_to(REPO_ROOT) / \"tests.xml\"\n        html_coverage_dir = (\n            COVERAGE_OUTPUT_DIR.relative_to(REPO_ROOT) / \"html\" / \"tests\"\n        )\n        cmd_args = [\n            \"--omit=salt/*\",\n            \"--include=tests/*,tests/pytests/pkg/*\",\n        ]\n    else:\n        json_coverage_file = (\n            COVERAGE_OUTPUT_DIR.relative_to(REPO_ROOT) / \"coverage.json\"\n        )\n        xml_coverage_file = COVERAGE_OUTPUT_DIR.relative_to(REPO_ROOT) / \"coverage.xml\"\n        html_coverage_dir = COVERAGE_OUTPUT_DIR.relative_to(REPO_ROOT) / \"html\" / \"full\"\n        cmd_args = [\n            \"--include=salt/*,tests/*,tests/pytests/pkg/*\",\n        ]\n\n    if cli_report:\n        session.run(\n            \"coverage\",\n            \"report\",\n            \"--precision=2\",\n            *cmd_args,\n            env=env,\n        )\n\n    if html_report:\n        session.run(\n            \"coverage\",\n            \"html\",\n            \"-d\",\n            str(html_coverage_dir),\n            \"--show-contexts\",\n            \"--precision=2\",\n            *cmd_args,\n            env=env,\n        )\n\n    if xml_report:\n        try:\n            session.run(\n                \"coverage\",\n                \"xml\",\n                \"-o\",\n                str(xml_coverage_file),\n                *cmd_args,\n                env=env,\n            )\n        except CommandFailed:\n            session_warn(\n                session, \"Failed to generate the source XML code coverage report\"\n            )\n\n    if json_report:\n        session.run(\n            \"coverage\",\n            \"json\",\n            \"-o\",\n            str(json_coverage_file),\n            \"--show-contexts\",\n            *cmd_args,\n            env=env,\n        )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-parametrized\")\n@nox.parametrize(\"coverage\", [False, True])\n@nox.parametrize(\"transport\", [\"zeromq\", \"tcp\"])\n@nox.parametrize(\"crypto\", [None, \"m2crypto\", \"pycryptodome\"])\ndef test_parametrized(session, coverage, transport, crypto):\n    \"\"\"\n    DO NOT CALL THIS NOX SESSION DIRECTLY\n    \"\"\"\n    # Install requirements\n    if _install_requirements(session):\n\n        if crypto:\n            session_run_always(\n                session,\n                \"pip\",\n                \"uninstall\",\n                \"-y\",\n                \"m2crypto\",\n                \"pycrypto\",\n                \"pycryptodome\",\n                \"pycryptodomex\",\n                silent=True,\n            )\n            install_command = [\n                \"--progress-bar=off\",\n                \"--constraint\",\n                _get_pip_requirements_file(session, crypto=True),\n            ]\n            install_command.append(crypto)\n            session.install(*install_command, silent=PIP_INSTALL_SILENT)\n\n    cmd_args = [\n        f\"--transport={transport}\",\n    ] + session.posargs\n    _pytest(session, coverage=coverage, cmd_args=cmd_args)\n\n\n@nox.session(python=_PYTHON_VERSIONS)\n@nox.parametrize(\"coverage\", [False, True])\ndef test(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and default crypto\n    \"\"\"\n    session.notify(\n        find_session_runner(\n            session,\n            \"test-parametrized\",\n            session.python,\n            coverage=coverage,\n            crypto=None,\n            transport=\"zeromq\",\n        )\n    )\n\n\n@nox.session(python=_PYTHON_VERSIONS)\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and default crypto\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-tcp\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_tcp(session, coverage):\n    \"\"\"\n    pytest session with TCP transport and default crypto\n    \"\"\"\n    session.notify(\n        find_session_runner(\n            session,\n            \"test-parametrized\",\n            session.python,\n            coverage=coverage,\n            crypto=None,\n            transport=\"tcp\",\n        )\n    )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-tcp\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_tcp(session, coverage):\n    \"\"\"\n    pytest session with TCP transport and default crypto\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-zeromq\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_zeromq(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and default crypto\n    \"\"\"\n    session.notify(\n        find_session_runner(\n            session,\n            \"test-parametrized\",\n            session.python,\n            coverage=coverage,\n            crypto=None,\n            transport=\"zeromq\",\n        )\n    )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-zeromq\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_zeromq(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and default crypto\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-m2crypto\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_m2crypto(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and m2crypto\n    \"\"\"\n    session.notify(\n        find_session_runner(\n            session,\n            \"test-parametrized\",\n            session.python,\n            coverage=coverage,\n            crypto=\"m2crypto\",\n            transport=\"zeromq\",\n        )\n    )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-m2crypto\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_m2crypto(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and m2crypto\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-tcp-m2crypto\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_tcp_m2crypto(session, coverage):\n    \"\"\"\n    pytest session with TCP transport and m2crypto\n    \"\"\"\n    session.notify(\n        find_session_runner(\n            session,\n            \"test-parametrized\",\n            session.python,\n            coverage=coverage,\n            crypto=\"m2crypto\",\n            transport=\"tcp\",\n        )\n    )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-tcp-m2crypto\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_tcp_m2crypto(session, coverage):\n    \"\"\"\n    pytest session with TCP transport and m2crypto\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-zeromq-m2crypto\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_zeromq_m2crypto(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and m2crypto\n    \"\"\"\n    session.notify(\n        find_session_runner(\n            session,\n            \"test-parametrized\",\n            session.python,\n            coverage=coverage,\n            crypto=\"m2crypto\",\n            transport=\"zeromq\",\n        )\n    )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-zeromq-m2crypto\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_zeromq_m2crypto(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and m2crypto\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-pycryptodome\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_pycryptodome(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and pycryptodome\n    \"\"\"\n    session.notify(\n        find_session_runner(\n            session,\n            \"test-parametrized\",\n            session.python,\n            coverage=coverage,\n            crypto=\"pycryptodome\",\n            transport=\"zeromq\",\n        )\n    )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-pycryptodome\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_pycryptodome(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and pycryptodome\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-tcp-pycryptodome\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_tcp_pycryptodome(session, coverage):\n    \"\"\"\n    pytest session with TCP transport and pycryptodome\n    \"\"\"\n    session.notify(\n        find_session_runner(\n            session,\n            \"test-parametrized\",\n            session.python,\n            coverage=coverage,\n            crypto=\"pycryptodome\",\n            transport=\"tcp\",\n        )\n    )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-tcp-pycryptodome\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_tcp_pycryptodome(session, coverage):\n    \"\"\"\n    pytest session with TCP transport and pycryptodome\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-zeromq-pycryptodome\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_zeromq_pycryptodome(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and pycryptodome\n    \"\"\"\n    session.notify(\n        find_session_runner(\n            session,\n            \"test-parametrized\",\n            session.python,\n            coverage=coverage,\n            crypto=\"pycryptodome\",\n            transport=\"zeromq\",\n        )\n    )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-zeromq-pycryptodome\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_zeromq_pycryptodome(session, coverage):\n    \"\"\"\n    pytest session with zeromq transport and pycryptodome\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-cloud\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_cloud(session, coverage):\n    \"\"\"\n    pytest cloud tests session\n    \"\"\"\n    pydir = _get_pydir(session)\n    if pydir == \"py3.5\":\n        session.error(\n            \"Due to conflicting and unsupported requirements the cloud tests only run on Py3.6+\"\n        )\n    # Install requirements\n    if _upgrade_pip_setuptools_and_wheel(session):\n        linux_requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", pydir, \"linux.txt\"\n        )\n        cloud_requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", pydir, \"cloud.txt\"\n        )\n\n        install_command = [\n            \"--progress-bar=off\",\n            \"-r\",\n            linux_requirements_file,\n            \"-r\",\n            cloud_requirements_file,\n        ]\n        session.install(*install_command, silent=PIP_INSTALL_SILENT)\n\n    cmd_args = [\n        \"--run-expensive\",\n        \"-k\",\n        \"cloud\",\n    ] + session.posargs\n    _pytest(session, coverage=coverage, cmd_args=cmd_args)\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-cloud\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_cloud(session, coverage):\n    \"\"\"\n    pytest cloud tests session\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"test-tornado\")\n@nox.parametrize(\"coverage\", [False, True])\ndef test_tornado(session, coverage):\n    \"\"\"\n    pytest tornado tests session\n    \"\"\"\n    # Install requirements\n    if _upgrade_pip_setuptools_and_wheel(session):\n        _install_requirements(session)\n        session.install(\n            \"--progress-bar=off\", \"tornado==5.0.2\", silent=PIP_INSTALL_SILENT\n        )\n        session.install(\n            \"--progress-bar=off\", \"pyzmq==17.0.0\", silent=PIP_INSTALL_SILENT\n        )\n    _pytest(session, coverage=coverage, cmd_args=session.posargs)\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"pytest-tornado\")\n@nox.parametrize(\"coverage\", [False, True])\ndef pytest_tornado(session, coverage):\n    \"\"\"\n    pytest tornado tests session\n    \"\"\"\n    try:\n        session_name = session.name\n    except AttributeError:\n        session_name = session._runner.friendly_name\n    session_warn(\n        session,\n        \"This nox session is deprecated, please call {!r} instead\".format(\n            session_name.replace(\"pytest-\", \"test-\")\n        ),\n    )\n    session.notify(session_name.replace(\"pytest-\", \"test-\"))\n\n\ndef _pytest(session, coverage, cmd_args, env=None, on_rerun=False):\n    # Create required artifacts directories\n    _create_ci_directories()\n\n    if env is None:\n        env = {}\n\n    env[\"CI_RUN\"] = \"1\" if CI_RUN else \"0\"\n\n    args = [\n        \"--rootdir\",\n        str(REPO_ROOT),\n        \"--log-file-level=debug\",\n        \"--show-capture=no\",\n        \"-ra\",\n        \"-s\",\n        \"-vv\",\n        \"--showlocals\",\n    ]\n    for arg in cmd_args:\n        if arg == \"--log-file\" or arg.startswith(\"--log-file=\"):\n            break\n    else:\n        args.append(f\"--log-file={RUNTESTS_LOGFILE}\")\n    args.extend(cmd_args)\n\n    if PRINT_SYSTEM_INFO_ONLY and \"--sys-info-and-exit\" not in args:\n        args.append(\"--sys-info-and-exit\")\n        session.run(\"python\", \"-m\", \"pytest\", *args, env=env)\n        return\n\n    if PRINT_SYSTEM_INFO and \"--sysinfo\" not in args:\n        args.append(\"--sysinfo\")\n\n    if PRINT_TEST_SELECTION:\n        # We'll print out the collected tests on CI runs.\n        # This will show a full list of what tests are going to run, in the right order, which, in case\n        # of a test suite hang, helps us pinpoint which test is hanging\n        session.run(\n            \"python\", \"-m\", \"pytest\", *(args + [\"--collect-only\", \"-qqq\"]), env=env\n        )\n        if PRINT_TEST_PLAN_ONLY:\n            return\n\n    if coverage is True:\n        _coverage_cmd_args = []\n        if \"COVERAGE_CONTEXT\" in os.environ:\n            _coverage_cmd_args.append(f\"--context={os.environ['COVERAGE_CONTEXT']}\")\n        _run_with_coverage(\n            session,\n            \"python\",\n            \"-m\",\n            \"coverage\",\n            \"run\",\n            *_coverage_cmd_args,\n            \"-m\",\n            \"pytest\",\n            *args,\n            env=env,\n            on_rerun=on_rerun,\n        )\n    else:\n        session.run(\"python\", \"-m\", \"pytest\", *args, env=env)\n\n\ndef _ci_test(session, transport, onedir=False):\n    # Install requirements\n    _install_requirements(session, onedir=onedir)\n    env = {}\n    if onedir:\n        env[\"ONEDIR_TESTRUN\"] = \"1\"\n    chunks = {\n        \"pkg\": [\n            \"tests/pytests/pkg\",\n        ],\n        \"unit\": [\n            \"tests/unit\",\n            \"tests/pytests/unit\",\n        ],\n        \"functional\": [\n            \"tests/pytests/functional\",\n        ],\n        \"scenarios\": [\n            \"tests/pytests/scenarios\",\n        ],\n    }\n\n    test_group_number = os.environ.get(\"TEST_GROUP\") or \"1\"\n\n    if not session.posargs:\n        chunk_cmd = []\n        junit_report_filename = \"test-results\"\n        runtests_log_filename = \"runtests\"\n    else:\n        chunk = session.posargs.pop(0)\n        if chunk in [\"unit\", \"functional\", \"integration\", \"scenarios\", \"all\"]:\n            if chunk == \"all\":\n                chunk_cmd = []\n                junit_report_filename = \"test-results\"\n                runtests_log_filename = \"runtests\"\n            elif chunk == \"integration\":\n                chunk_cmd = []\n                for values in chunks.values():\n                    for value in values:\n                        chunk_cmd.append(f\"--ignore={value}\")\n                junit_report_filename = f\"test-results-{chunk}-grp{test_group_number}\"\n                runtests_log_filename = f\"runtests-{chunk}-grp{test_group_number}\"\n            else:\n                chunk_cmd = chunks[chunk]\n                junit_report_filename = f\"test-results-{chunk}-grp{test_group_number}\"\n                runtests_log_filename = f\"runtests-{chunk}-grp{test_group_number}\"\n            if session.posargs:\n                if session.posargs[0] == \"--\":\n                    session.posargs.pop(0)\n                chunk_cmd.extend(session.posargs)\n        else:\n            chunk_cmd = [chunk] + session.posargs\n            junit_report_filename = f\"test-results-grp{test_group_number}\"\n            runtests_log_filename = f\"runtests-grp{test_group_number}\"\n\n    rerun_failures = os.environ.get(\"RERUN_FAILURES\", \"0\") == \"1\"\n    track_code_coverage = os.environ.get(\"SKIP_CODE_COVERAGE\", \"0\") == \"0\"\n\n    common_pytest_args = [\n        \"--color=yes\",\n        \"--ssh-tests\",\n        \"--sys-stats\",\n        \"--run-destructive\",\n        f\"--output-columns={os.environ.get('OUTPUT_COLUMNS') or 120}\",\n    ]\n    try:\n        pytest_args = (\n            common_pytest_args[:]\n            + [\n                f\"--junitxml=artifacts/xml-unittests-output/{junit_report_filename}.xml\",\n                f\"--log-file=artifacts/logs/{runtests_log_filename}.log\",\n            ]\n            + chunk_cmd\n        )\n        _pytest(session, coverage=track_code_coverage, cmd_args=pytest_args, env=env)\n    except CommandFailed:\n        if rerun_failures is False:\n            raise\n\n        # Don't print the system information, not the test selection on reruns\n        global PRINT_TEST_SELECTION\n        global PRINT_SYSTEM_INFO\n        PRINT_TEST_SELECTION = False\n        PRINT_SYSTEM_INFO = False\n\n        pytest_args = (\n            common_pytest_args[:]\n            + [\n                \"--lf\",\n                f\"--junitxml=artifacts/xml-unittests-output/{junit_report_filename}-rerun.xml\",\n                f\"--log-file=artifacts/logs/{runtests_log_filename}-rerun.log\",\n            ]\n            + chunk_cmd\n        )\n        _pytest(\n            session,\n            coverage=track_code_coverage,\n            cmd_args=pytest_args,\n            env=env,\n            on_rerun=True,\n        )\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"ci-test\")\ndef ci_test(session):\n    transport = os.environ.get(\"SALT_TRANSPORT\") or \"zeromq\"\n    valid_transports = (\"zeromq\", \"tcp\")\n    if transport not in valid_transports:\n        session.error(\n            \"The value for the SALT_TRANSPORT environment variable can only be \"\n            f\"one of: {', '.join(valid_transports)}\"\n        )\n    _ci_test(session, transport)\n\n\n@nox.session(python=_PYTHON_VERSIONS, name=\"ci-test-tcp\")\ndef ci_test_tcp(session):\n    _ci_test(session, \"tcp\")\n\n\n@nox.session(\n    python=str(ONEDIR_PYTHON_PATH),\n    name=\"ci-test-onedir\",\n    venv_params=[\"--system-site-packages\"],\n)\ndef ci_test_onedir(session):\n    if not ONEDIR_ARTIFACT_PATH.exists():\n        session.error(\n            \"The salt onedir artifact, expected to be in '{}', was not found\".format(\n                ONEDIR_ARTIFACT_PATH.relative_to(REPO_ROOT)\n            )\n        )\n\n    transport = os.environ.get(\"SALT_TRANSPORT\") or \"zeromq\"\n    valid_transports = (\"zeromq\", \"tcp\")\n    if transport not in valid_transports:\n        session.error(\n            \"The value for the SALT_TRANSPORT environment variable can only be \"\n            f\"one of: {', '.join(valid_transports)}\"\n        )\n\n    _ci_test(session, \"zeromq\", onedir=True)\n\n\n@nox.session(\n    python=str(ONEDIR_PYTHON_PATH),\n    name=\"ci-test-onedir-tcp\",\n    venv_params=[\"--system-site-packages\"],\n)\ndef ci_test_onedir_tcp(session):\n    if not ONEDIR_ARTIFACT_PATH.exists():\n        session.error(\n            \"The salt onedir artifact, expected to be in '{}', was not found\".format(\n                ONEDIR_ARTIFACT_PATH.relative_to(REPO_ROOT)\n            )\n        )\n\n    _ci_test(session, \"tcp\", onedir=True)\n\n\n@nox.session(python=\"3\", name=\"report-coverage\")\ndef report_coverage(session):\n    _report_coverage(session, combine=True, cli_report=True)\n\n\n@nox.session(python=\"3\", name=\"coverage-report\")\ndef coverage_report(session):\n    _report_coverage(session, combine=True, cli_report=True)\n\n\n@nox.session(python=False, name=\"decompress-dependencies\")\ndef decompress_dependencies(session):\n    if not session.posargs:\n        session.error(\n            \"The 'decompress-dependencies' session target needs \"\n            \"two arguments, '<platform> <arch>'.\"\n        )\n    try:\n        platform = session.posargs.pop(0)\n        arch = session.posargs.pop(0)\n        if session.posargs:\n            session.error(\n                \"The 'decompress-dependencies' session target only accepts \"\n                \"two arguments, '<platform> <arch>'.\"\n            )\n    except IndexError:\n        session.error(\n            \"The 'decompress-dependencies' session target needs \"\n            \"two arguments, '<platform> <arch>'.\"\n        )\n    if platform == \"windows\":\n        extension = \"tar.gz\"\n        scripts_dir_name = \"Scripts\"\n    else:\n        extension = \"tar.xz\"\n        scripts_dir_name = \"bin\"\n    nox_dependencies_tarball = f\"nox.{platform}.{arch}.{extension}\"\n    nox_dependencies_tarball_path = REPO_ROOT / nox_dependencies_tarball\n    if not nox_dependencies_tarball_path.exists():\n        session.error(\n            f\"The {nox_dependencies_tarball} file \"\n            \"does not exist. Not decompressing anything.\"\n        )\n\n    session_run_always(session, \"tar\", \"xpf\", nox_dependencies_tarball)\n    if os.environ.get(\"DELETE_NOX_ARCHIVE\", \"0\") == \"1\":\n        nox_dependencies_tarball_path.unlink()\n\n    session.log(\"Finding broken 'python' symlinks under '.nox/' ...\")\n    for dirname in os.scandir(REPO_ROOT / \".nox\"):\n        scan_path = REPO_ROOT.joinpath(\".nox\", dirname, scripts_dir_name)\n        script_paths = {str(p): p for p in os.scandir(scan_path)}\n        fixed_shebang = f\"#!{scan_path / 'python'}\"\n        for key in sorted(script_paths):\n            path = script_paths[key]\n            if path.is_symlink():\n                broken_link = pathlib.Path(path)\n                resolved_link = os.readlink(path)\n                if not os.path.isabs(resolved_link):\n                    # Relative symlinks, resolve them\n                    resolved_link = os.path.join(scan_path, resolved_link)\n                if not os.path.exists(resolved_link):\n                    session.log(\"The symlink %r looks to be broken\", resolved_link)\n                    # This is a broken link, fix it\n                    resolved_link_suffix = resolved_link.split(\n                        f\"artifacts{os.sep}salt{os.sep}\"\n                    )[-1]\n                    fixed_link = REPO_ROOT.joinpath(\n                        \"artifacts\", \"salt\", resolved_link_suffix\n                    )\n                    session.log(\n                        \"Fixing broken symlink in nox virtualenv %r, from %r to %r\",\n                        dirname.name,\n                        resolved_link,\n                        str(fixed_link.relative_to(REPO_ROOT)),\n                    )\n                    broken_link.unlink()\n                    broken_link.symlink_to(fixed_link)\n                continue\n            if not path.is_file():\n                continue\n            if platform != \"windows\":\n                # Let's try to fix shebang's\n                try:\n                    fpath = pathlib.Path(path)\n                    contents = fpath.read_text(encoding=\"utf-8\").splitlines()\n                    if (\n                        contents[0].startswith(\"#!\")\n                        and contents[0].endswith(\"python\")\n                        and contents[0] != fixed_shebang\n                    ):\n                        session.log(\n                            \"Fixing broken shebang in %r\",\n                            str(fpath.relative_to(REPO_ROOT)),\n                        )\n                        fpath.write_text(\n                            \"\\n\".join([fixed_shebang] + contents[1:]), encoding=\"utf-8\"\n                        )\n                except UnicodeDecodeError:\n                    pass\n\n\n@nox.session(python=False, name=\"compress-dependencies\")\ndef compress_dependencies(session):\n    if not session.posargs:\n        session.error(\n            \"The 'compress-dependencies' session target needs \"\n            \"two arguments, '<platform> <arch>'.\"\n        )\n    try:\n        platform = session.posargs.pop(0)\n        arch = session.posargs.pop(0)\n        if session.posargs:\n            session.error(\n                \"The 'compress-dependencies' session target only accepts \"\n                \"two arguments, '<platform> <arch>'.\"\n            )\n    except IndexError:\n        session.error(\n            \"The 'compress-dependencies' session target needs \"\n            \"two arguments, '<platform> <arch>'.\"\n        )\n    if platform == \"windows\":\n        extension = \"tar.gz\"\n    else:\n        extension = \"tar.xz\"\n    nox_dependencies_tarball = f\"nox.{platform}.{arch}.{extension}\"\n    nox_dependencies_tarball_path = REPO_ROOT / nox_dependencies_tarball\n    if nox_dependencies_tarball_path.exists():\n        session_warn(\n            session, f\"Found existing {nox_dependencies_tarball}. Deleting it.\"\n        )\n        nox_dependencies_tarball_path.unlink()\n\n    session_run_always(\n        session,\n        \"tar\",\n        \"-caf\",\n        nox_dependencies_tarball,\n        \"--exclude=.nox/pre-archive-cleanup\",\n        \".nox\",\n    )\n\n\n@nox.session(\n    python=str(ONEDIR_PYTHON_PATH),\n    name=\"pre-archive-cleanup\",\n)\n@nox.parametrize(\"pkg\", [False, True])\ndef pre_archive_cleanup(session, pkg):\n    \"\"\"\n    Call `tools pkg pre-archive-cleanup <path>`\n    \"\"\"\n    if session.posargs:\n        session.error(\"No additional arguments can be passed to 'pre-archive-cleanup'\")\n    version_info = _get_session_python_version_info(session)\n    if version_info < (3, 10):\n        session.error(\n            \"The nox session 'pre-archive-cleanup' needs Python 3.10+ to run.\"\n        )\n\n    if _upgrade_pip_setuptools_and_wheel(session):\n        requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", _get_pydir(session), \"tools.txt\"\n        )\n        install_command = [\"--progress-bar=off\", \"-r\", requirements_file]\n        session.install(*install_command, silent=PIP_INSTALL_SILENT)\n\n    cmdline = [\n        \"tools\",\n        \"pkg\",\n        \"pre-archive-cleanup\",\n    ]\n    if pkg:\n        cmdline.append(\"--pkg\")\n    cmdline.append(\".nox\")\n    session_run_always(session, *cmdline)\n\n\n@nox.session(python=\"3\", name=\"combine-coverage\")\ndef combine_coverage(session):\n    _report_coverage(session, combine=True, cli_report=False)\n\n\n@nox.session(\n    python=str(ONEDIR_PYTHON_PATH),\n    name=\"combine-coverage-onedir\",\n    venv_params=[\"--system-site-packages\"],\n)\ndef combine_coverage_onedir(session):\n    _report_coverage(session, combine=True, cli_report=False)\n\n\n@nox.session(python=\"3\", name=\"create-html-coverage-report\")\ndef create_html_coverage_report(session):\n    _report_coverage(session, combine=True, cli_report=False, html_report=True)\n\n\ndef _create_xml_coverage_reports(session):\n    if session.posargs:\n        session.error(\"No arguments are acceptable to this nox session.\")\n    session.posargs.append(\"salt\")\n    _report_coverage(session, combine=True, cli_report=False, xml_report=True)\n    session.posargs.append(\"tests\")\n    _report_coverage(session, combine=True, cli_report=False, xml_report=True)\n\n\n@nox.session(python=\"3\", name=\"create-xml-coverage-reports\")\ndef create_xml_coverage_reports(session):\n    _create_xml_coverage_reports(session)\n\n\n@nox.session(\n    python=str(ONEDIR_PYTHON_PATH),\n    name=\"create-xml-coverage-reports-onedir\",\n    venv_params=[\"--system-site-packages\"],\n)\ndef create_xml_coverage_reports_onedir(session):\n    _create_xml_coverage_reports(session)\n\n\n@nox.session(python=\"3\", name=\"create-json-coverage-reports\")\ndef create_json_coverage_reports(session):\n    _report_coverage(session, combine=True, cli_report=False, json_report=True)\n\n\n@nox.session(\n    python=str(ONEDIR_PYTHON_PATH),\n    name=\"create-json-coverage-reports-onedir\",\n    venv_params=[\"--system-site-packages\"],\n)\ndef create_json_coverage_reports_onedir(session):\n    _report_coverage(session, combine=True, cli_report=False, json_report=True)\n\n\nclass Tee:\n    \"\"\"\n    Python class to mimic linux tee behaviour\n    \"\"\"\n\n    def __init__(self, first, second):\n        self._first = first\n        self._second = second\n\n    def write(self, b):\n        wrote = self._first.write(b)\n        self._first.flush()\n        self._second.write(b)\n        self._second.flush()\n\n    def fileno(self):\n        return self._first.fileno()\n\n\ndef _lint(session, rcfile, flags, paths, upgrade_setuptools_and_pip=True):\n    if _upgrade_pip_setuptools_and_wheel(session, upgrade=upgrade_setuptools_and_pip):\n        linux_requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", _get_pydir(session), \"linux.txt\"\n        )\n        lint_requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", _get_pydir(session), \"lint.txt\"\n        )\n        install_command = [\n            \"--progress-bar=off\",\n            \"-r\",\n            linux_requirements_file,\n            \"-r\",\n            lint_requirements_file,\n        ]\n        session.install(*install_command, silent=PIP_INSTALL_SILENT)\n\n    cmd_args = [\"pylint\", f\"--rcfile={rcfile}\"] + list(flags) + list(paths)\n    cmd_kwargs = {\"env\": {\"PYTHONUNBUFFERED\": \"1\"}}\n    session.run(*cmd_args, **cmd_kwargs)\n\n\ndef _lint_pre_commit(session, rcfile, flags, paths):\n    if \"VIRTUAL_ENV\" not in os.environ:\n        session.error(\n            \"This should be running from within a virtualenv and \"\n            \"'VIRTUAL_ENV' was not found as an environment variable.\"\n        )\n    if \"pre-commit\" not in os.environ[\"VIRTUAL_ENV\"]:\n        session.error(\n            \"This should be running from within a pre-commit virtualenv and \"\n            \"'VIRTUAL_ENV'({}) does not appear to be a pre-commit virtualenv.\".format(\n                os.environ[\"VIRTUAL_ENV\"]\n            )\n        )\n    from nox.virtualenv import VirtualEnv\n\n    # Let's patch nox to make it run inside the pre-commit virtualenv\n    session._runner.venv = VirtualEnv(\n        os.environ[\"VIRTUAL_ENV\"],\n        interpreter=session._runner.func.python,\n        reuse_existing=True,\n        venv=True,\n    )\n    _lint(\n        session,\n        rcfile,\n        flags,\n        paths,\n        upgrade_setuptools_and_pip=False,\n    )\n\n\n@nox.session(python=\"3\")\ndef lint(session):\n    \"\"\"\n    Run PyLint against Salt and it's test suite.\n    \"\"\"\n    session.notify(f\"lint-salt-{session.python}\")\n    session.notify(f\"lint-tests-{session.python}\")\n\n\n@nox.session(python=\"3\", name=\"lint-salt\")\ndef lint_salt(session):\n    \"\"\"\n    Run PyLint against Salt.\n    \"\"\"\n    flags = [\"--disable=I\"]\n    if session.posargs:\n        paths = session.posargs\n    else:\n        # TBD replace paths entries when implement pyproject.toml\n        paths = [\"setup.py\", \"noxfile.py\", \"salt/\", \"tools/\"]\n    _lint(session, \".pylintrc\", flags, paths)\n\n\n@nox.session(python=\"3\", name=\"lint-tests\")\ndef lint_tests(session):\n    \"\"\"\n    Run PyLint against Salt and it's test suite.\n    \"\"\"\n    flags = [\"--disable=I\"]\n    if session.posargs:\n        paths = session.posargs\n    else:\n        paths = [\"tests/\"]\n    _lint(session, \".pylintrc\", flags, paths)\n\n\n@nox.session(python=False, name=\"lint-salt-pre-commit\")\ndef lint_salt_pre_commit(session):\n    \"\"\"\n    Run PyLint against Salt.\n    \"\"\"\n    flags = [\"--disable=I\"]\n    if session.posargs:\n        paths = session.posargs\n    else:\n        paths = [\"setup.py\", \"noxfile.py\", \"salt/\", \"tools/\"]\n    _lint_pre_commit(session, \".pylintrc\", flags, paths)\n\n\n@nox.session(python=False, name=\"lint-tests-pre-commit\")\ndef lint_tests_pre_commit(session):\n    \"\"\"\n    Run PyLint against Salt and it's test suite.\n    \"\"\"\n    flags = [\"--disable=I\"]\n    if session.posargs:\n        paths = session.posargs\n    else:\n        paths = [\"tests/\"]\n    _lint_pre_commit(session, \".pylintrc\", flags, paths)\n\n\n@nox.session(python=\"3\")\n@nox.parametrize(\"clean\", [False, True])\n@nox.parametrize(\"update\", [False, True])\n@nox.parametrize(\"compress\", [False, True])\ndef docs(session, compress, update, clean):\n    \"\"\"\n    Build Salt's Documentation\n    \"\"\"\n    session.notify(f\"docs-html-{session.python}(compress={compress})\")\n    session.notify(\n        find_session_runner(\n            session,\n            \"docs-man\",\n            session.python,\n            compress=compress,\n            update=update,\n            clean=clean,\n        )\n    )\n\n\n@nox.session(name=\"docs-html\", python=\"3\")\n@nox.parametrize(\"clean\", [False, True])\n@nox.parametrize(\"compress\", [False, True])\ndef docs_html(session, compress, clean):\n    \"\"\"\n    Build Salt's HTML Documentation\n    \"\"\"\n    if _upgrade_pip_setuptools_and_wheel(session):\n        linux_requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", _get_pydir(session), \"linux.txt\"\n        )\n        base_requirements_file = os.path.join(\"requirements\", \"base.txt\")\n        zeromq_requirements_file = os.path.join(\"requirements\", \"zeromq.txt\")\n        docs_requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", _get_pydir(session), \"docs.txt\"\n        )\n        install_command = [\n            \"--progress-bar=off\",\n            \"--constraint\",\n            linux_requirements_file,\n            \"-r\",\n            base_requirements_file,\n            \"-r\",\n            zeromq_requirements_file,\n            \"-r\",\n            docs_requirements_file,\n        ]\n        session.install(*install_command, silent=PIP_INSTALL_SILENT)\n    os.chdir(\"doc/\")\n    if clean:\n        session.run(\"make\", \"clean\", external=True)\n    session.run(\"make\", \"html\", \"SPHINXOPTS=-W\", external=True)\n    if compress:\n        session.run(\"tar\", \"-cJvf\", \"html-archive.tar.xz\", \"_build/html\", external=True)\n    os.chdir(\"..\")\n\n\n@nox.session(name=\"docs-man\", python=\"3\")\n@nox.parametrize(\"clean\", [False, True])\n@nox.parametrize(\"update\", [False, True])\n@nox.parametrize(\"compress\", [False, True])\ndef docs_man(session, compress, update, clean):\n    \"\"\"\n    Build Salt's Manpages Documentation\n    \"\"\"\n    if _upgrade_pip_setuptools_and_wheel(session):\n        linux_requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", _get_pydir(session), \"linux.txt\"\n        )\n        base_requirements_file = os.path.join(\"requirements\", \"base.txt\")\n        zeromq_requirements_file = os.path.join(\"requirements\", \"zeromq.txt\")\n        docs_requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", _get_pydir(session), \"docs.txt\"\n        )\n        install_command = [\n            \"--progress-bar=off\",\n            \"--constraint\",\n            linux_requirements_file,\n            \"-r\",\n            base_requirements_file,\n            \"-r\",\n            zeromq_requirements_file,\n            \"-r\",\n            docs_requirements_file,\n        ]\n        session.install(*install_command, silent=PIP_INSTALL_SILENT)\n    os.chdir(\"doc/\")\n    if clean:\n        session.run(\"make\", \"clean\", external=True)\n    session.run(\"make\", \"man\", \"SPHINXOPTS=-W\", external=True)\n    if update:\n        session.run(\"rm\", \"-rf\", \"man/\", external=True)\n        session.run(\"cp\", \"-Rp\", \"_build/man\", \"man/\", external=True)\n    if compress:\n        session.run(\"tar\", \"-cJvf\", \"man-archive.tar.xz\", \"_build/man\", external=True)\n    os.chdir(\"..\")\n\n\n@nox.session(name=\"changelog\", python=\"3\")\n@nox.parametrize(\"draft\", [False, True])\n@nox.parametrize(\"force\", [False, True])\ndef changelog(session, draft, force):\n    \"\"\"\n    Generate salt's changelog\n    \"\"\"\n    session_warn(\n        session,\n        \"Please stop using this nox session and start using the 'tools' command shown below.\",\n    )\n    if _upgrade_pip_setuptools_and_wheel(session):\n        requirements_file = os.path.join(\n            \"requirements\", \"static\", \"ci\", _get_pydir(session), \"tools.txt\"\n        )\n        install_command = [\"--progress-bar=off\", \"-r\", requirements_file]\n        session.install(*install_command, silent=PIP_INSTALL_SILENT)\n\n    cmd = [\"tools\", \"changelog\", \"update-changelog-md\"]\n    if draft:\n        cmd.append(\"--draft\")\n    cmd.append(session.posargs[0])\n    session.run(*cmd)\n\n\nclass Recompress:\n    \"\"\"\n    Helper class to re-compress a ``.tag.gz`` file to make it reproducible.\n    \"\"\"\n\n    def __init__(self, mtime):\n        self.mtime = int(mtime)\n\n    def tar_reset(self, tarinfo):\n        \"\"\"\n        Reset user, group, mtime, and mode to create reproducible tar.\n        \"\"\"\n        tarinfo.uid = tarinfo.gid = 0\n        tarinfo.uname = tarinfo.gname = \"root\"\n        tarinfo.mtime = self.mtime\n        if tarinfo.type == tarfile.DIRTYPE:\n            tarinfo.mode = 0o755\n        else:\n            tarinfo.mode = 0o644\n        if tarinfo.pax_headers:\n            raise ValueError(tarinfo.name, tarinfo.pax_headers)\n        return tarinfo\n\n    def recompress(self, targz):\n        \"\"\"\n        Re-compress the passed path.\n        \"\"\"\n        tempd = pathlib.Path(tempfile.mkdtemp()).resolve()\n        d_src = tempd.joinpath(\"src\")\n        d_src.mkdir()\n        d_tar = tempd.joinpath(targz.stem)\n        d_targz = tempd.joinpath(targz.name)\n        with tarfile.open(d_tar, \"w|\") as wfile:\n            with tarfile.open(targz, \"r:gz\") as rfile:\n                rfile.extractall(d_src)  # nosec\n                extracted_dir = next(pathlib.Path(d_src).iterdir())\n                for name in sorted(extracted_dir.rglob(\"*\")):\n                    wfile.add(\n                        str(name),\n                        filter=self.tar_reset,\n                        recursive=False,\n                        arcname=str(name.relative_to(d_src)),\n                    )\n\n        with open(d_tar, \"rb\") as rfh:\n            with gzip.GzipFile(\n                fileobj=open(d_targz, \"wb\"), mode=\"wb\", filename=\"\", mtime=self.mtime\n            ) as gz:  # pylint: disable=invalid-name\n                while True:\n                    chunk = rfh.read(1024)\n                    if not chunk:\n                        break\n                    gz.write(chunk)\n        targz.unlink()\n        shutil.move(str(d_targz), str(targz))\n\n\n@nox.session(python=\"3\")\ndef build(session):\n    \"\"\"\n    Build source and binary distributions based off the current commit author date UNIX timestamp.\n\n    The reason being, reproducible packages.\n\n    .. code-block: shell\n\n        git show -s --format=%at HEAD\n    \"\"\"\n    shutil.rmtree(\"dist/\", ignore_errors=True)\n    if SKIP_REQUIREMENTS_INSTALL is False:\n        session.install(\n            \"--progress-bar=off\",\n            \"-r\",\n            \"requirements/build.txt\",\n            silent=PIP_INSTALL_SILENT,\n        )\n\n    timestamp = session.run(\n        \"git\",\n        \"show\",\n        \"-s\",\n        \"--format=%at\",\n        \"HEAD\",\n        silent=True,\n        log=False,\n        stderr=None,\n    ).strip()\n    env = {\"SOURCE_DATE_EPOCH\": str(timestamp)}\n    session.run(\n        \"python\",\n        \"-m\",\n        \"build\",\n        \"--sdist\",\n        str(REPO_ROOT),\n        env=env,\n    )\n    # Recreate sdist to be reproducible\n    recompress = Recompress(timestamp)\n    for targz in REPO_ROOT.joinpath(\"dist\").glob(\"*.tar.gz\"):\n        session.log(\"Re-compressing %s...\", targz.relative_to(REPO_ROOT))\n        recompress.recompress(targz)\n\n    sha256sum = shutil.which(\"sha256sum\")\n    if sha256sum:\n        packages = [\n            str(pkg.relative_to(REPO_ROOT))\n            for pkg in REPO_ROOT.joinpath(\"dist\").iterdir()\n        ]\n        session.run(\"sha256sum\", *packages, external=True)\n    session.run(\"python\", \"-m\", \"twine\", \"check\", \"dist/*\")\n\n\n@nox.session(\n    python=str(ONEDIR_PYTHON_PATH),\n    name=\"ci-test-onedir-pkgs\",\n    venv_params=[\"--system-site-packages\"],\n)\ndef ci_test_onedir_pkgs(session):\n    from nox.virtualenv import VirtualEnv\n\n    session_warn(session, \"Replacing VirtualEnv instance...\")\n\n    ci_test_onedir_path = REPO_ROOT / \".nox\" / \"ci-test-onedir\"\n    session._runner.venv = VirtualEnv(\n        str(ci_test_onedir_path.relative_to(REPO_ROOT)),\n        interpreter=session._runner.func.python,\n        reuse_existing=True,\n        venv=session._runner.venv.venv_or_virtualenv == \"venv\",\n        venv_params=session._runner.venv.venv_params,\n    )\n    os.environ[\"VIRTUAL_ENV\"] = session._runner.venv.location\n    session._runner.venv.create()\n\n    if not ONEDIR_ARTIFACT_PATH.exists():\n        session.error(\n            \"The salt onedir artifact, expected to be in '{}', was not found\".format(\n                ONEDIR_ARTIFACT_PATH.relative_to(REPO_ROOT)\n            )\n        )\n\n    common_pytest_args = [\n        \"--color=yes\",\n        \"--sys-stats\",\n        \"--run-destructive\",\n        f\"--output-columns={os.environ.get('OUTPUT_COLUMNS') or 120}\",\n        \"--pkg-system-service\",\n    ]\n\n    chunks = {\n        \"install\": [],\n        \"upgrade\": [\n            \"--upgrade\",\n            \"--no-uninstall\",\n        ],\n        \"upgrade-classic\": [\n            \"--upgrade\",\n            \"--no-uninstall\",\n        ],\n        \"downgrade\": [\n            \"--downgrade\",\n            \"--no-uninstall\",\n        ],\n        \"downgrade-classic\": [\n            \"--downgrade\",\n            \"--no-uninstall\",\n        ],\n        \"download-pkgs\": [\n            \"--download-pkgs\",\n        ],\n    }\n\n    if not session.posargs or session.posargs[0] not in chunks:\n        chunk = \"install\"\n        session.log(\"Choosing default 'install' test type\")\n    else:\n        chunk = session.posargs.pop(0)\n\n    cmd_args = chunks[chunk]\n    for arg in session.posargs:\n        if arg.startswith(\"tests/pytests/pkg/\"):\n            # The user is passing test paths\n            cmd_args.pop()\n            break\n\n    if IS_LINUX:\n        # Fetch the toolchain\n        session_run_always(session, \"python3\", \"-m\", \"relenv\", \"toolchain\", \"fetch\")\n\n    # Install requirements\n    if _upgrade_pip_setuptools_and_wheel(session):\n        _install_requirements(session, \"pyzmq\")\n    env = {\n        \"ONEDIR_TESTRUN\": \"1\",\n        \"PKG_TEST_TYPE\": chunk,\n    }\n\n    if chunk in (\"upgrade-classic\", \"downgrade-classic\"):\n        cmd_args.append(\"--classic\")\n\n    pytest_args = (\n        common_pytest_args[:]\n        + cmd_args[:]\n        + [\n            f\"--junitxml=artifacts/xml-unittests-output/test-results-{chunk}.xml\",\n            f\"--log-file=artifacts/logs/runtests-{chunk}.log\",\n        ]\n        + session.posargs\n    )\n    append_tests_path = True\n    test_paths = (\n        \"tests/pytests/pkg/\",\n        str(REPO_ROOT / \"tests\" / \"pytests\" / \"pkg\"),\n    )\n    for arg in session.posargs:\n        if arg.startswith(test_paths):\n            append_tests_path = False\n            break\n    if append_tests_path:\n        pytest_args.append(\"tests/pytests/pkg/\")\n    try:\n        _pytest(session, coverage=False, cmd_args=pytest_args, env=env)\n    except CommandFailed:\n        if os.environ.get(\"RERUN_FAILURES\", \"0\") == \"0\":\n            # Don't rerun on failures\n            return\n\n        # Don't print the system information, not the test selection on reruns\n        global PRINT_TEST_SELECTION\n        global PRINT_SYSTEM_INFO\n        PRINT_TEST_SELECTION = False\n        PRINT_SYSTEM_INFO = False\n\n        pytest_args = (\n            common_pytest_args[:]\n            + cmd_args[:]\n            + [\n                f\"--junitxml=artifacts/xml-unittests-output/test-results-{chunk}-rerun.xml\",\n                f\"--log-file=artifacts/logs/runtests-{chunk}-rerun.log\",\n                \"--lf\",\n            ]\n            + session.posargs\n        )\n        if append_tests_path:\n            pytest_args.append(\"tests/pytests/pkg/\")\n        _pytest(\n            session,\n            coverage=False,\n            cmd_args=pytest_args,\n            env=env,\n            on_rerun=True,\n        )\n\n    if chunk not in (\"install\", \"download-pkgs\"):\n        cmd_args = chunks[\"install\"]\n        pytest_args = (\n            common_pytest_args[:]\n            + cmd_args[:]\n            + [\n                \"--no-install\",\n                \"--junitxml=artifacts/xml-unittests-output/test-results-install.xml\",\n                \"--log-file=artifacts/logs/runtests-install.log\",\n            ]\n            + session.posargs\n        )\n        if \"downgrade\" in chunk:\n            pytest_args.append(\"--use-prev-version\")\n        if chunk in (\"upgrade-classic\", \"downgrade-classic\"):\n            pytest_args.append(\"--classic\")\n        if append_tests_path:\n            pytest_args.append(\"tests/pytests/pkg/\")\n        try:\n            _pytest(session, coverage=False, cmd_args=pytest_args, env=env)\n        except CommandFailed:\n            if os.environ.get(\"RERUN_FAILURES\", \"0\") == \"0\":\n                # Don't rerun on failures\n                return\n            cmd_args = chunks[\"install\"]\n            pytest_args = (\n                common_pytest_args[:]\n                + cmd_args[:]\n                + [\n                    \"--no-install\",\n                    \"--junitxml=artifacts/xml-unittests-output/test-results-install-rerun.xml\",\n                    \"--log-file=artifacts/logs/runtests-install-rerun.log\",\n                    \"--lf\",\n                ]\n                + session.posargs\n            )\n            if \"downgrade\" in chunk:\n                pytest_args.append(\"--use-prev-version\")\n            if chunk in (\"upgrade-classic\", \"downgrade-classic\"):\n                pytest_args.append(\"--classic\")\n            if append_tests_path:\n                pytest_args.append(\"tests/pytests/pkg/\")\n            _pytest(\n                session,\n                coverage=False,\n                cmd_args=pytest_args,\n                env=env,\n                on_rerun=True,\n            )\n    sys.exit(0)\n"
        },
        {
          "name": "pkg",
          "type": "tree",
          "content": null
        },
        {
          "name": "pyproject.toml",
          "type": "blob",
          "size": 1.2607421875,
          "content": "[tool.black]\nexclude= \"\"\"\n/(\n    salt/ext\n  | templates\n)/\n\"\"\"\n\n[tool.isort]\nmulti_line_output = 3\ninclude_trailing_comma = true\nforce_grid_wrap = 0\nuse_parentheses = true\nline_length = 88\nensure_newline_before_comments=true\nskip=\"salt/ext,templates\"\nknown_third_party = [\n  \"pytest\"\n]\n\n[tool.towncrier]\n    package = \"salt\"\n    filename = \"CHANGELOG.md\"\n    directory = \"changelog/\"\n    template = \"changelog/.template.jinja\"\n    start_string = \"# Changelog\\n\"\n    underlines = [\"\", \"\", \"\"]\n    title_format = \"## {version} ({project_date})\"\n    issue_format = \"[#{issue}](https://github.com/saltstack/salt/issues/{issue})\"\n\n    [[tool.towncrier.type]]\n        directory = \"removed\"\n        name = \"Removed\"\n        showcontent = true\n\n    [[tool.towncrier.type]]\n        directory = \"deprecated\"\n        name = \"Deprecated\"\n        showcontent = true\n\n    [[tool.towncrier.type]]\n        directory = \"changed\"\n        name = \"Changed\"\n        showcontent = true\n\n    [[tool.towncrier.type]]\n        directory = \"fixed\"\n        name = \"Fixed\"\n        showcontent = true\n\n    [[tool.towncrier.type]]\n        directory = \"added\"\n        name = \"Added\"\n        showcontent = true\n\n    [[tool.towncrier.type]]\n        directory = \"security\"\n        name = \"Security\"\n        showcontent = true\n"
        },
        {
          "name": "pytest.ini",
          "type": "blob",
          "size": 0.501953125,
          "content": "[pytest]\nlog_date_format=%H:%M:%S\nlog_cli_format=%(asctime)s,%(msecs)03.0f [%(name)-5s:%(lineno)-4d][%(levelname)-8s][%(processName)s(%(process)s)] %(message)s\nlog_file_format=%(asctime)s,%(msecs)03d [%(name)-17s:%(lineno)-4d][%(levelname)-8s][%(processName)s(%(process)d)] %(message)s\nnorecursedirs=templates tests/utils tests/support\ntestpaths=tests\npython_files=test_*.py\npython_classes=Test*\npython_functions = test_*\njunit_family=xunit2\n# Only the tests should count towards timeouts\ntimeout_func_only = true\n"
        },
        {
          "name": "requirements",
          "type": "tree",
          "content": null
        },
        {
          "name": "rfcs",
          "type": "tree",
          "content": null
        },
        {
          "name": "salt",
          "type": "tree",
          "content": null
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "setup.cfg",
          "type": "blob",
          "size": 0.3662109375,
          "content": "[sdist]\nowner = root\ngroup = root\n\n[mypy]\npackages = tools\nexclude = (?x)(\n  salt\n  | tests\n  ).*\\.py\nimplicit_optional = True\nshow_error_codes = True\nwarn_return_any = True\nwarn_unused_configs = True\n\n[mypy-tools.*]\nignore_missing_imports = True\n\n[mypy-tools.precommit.docstrings]\nfollow_imports = silent\n\n[mypy-salt.*]\nfollow_imports = silent\nignore_missing_imports = True\n"
        },
        {
          "name": "setup.py",
          "type": "blob",
          "size": 43.966796875,
          "content": "#!/usr/bin/env python\n\"\"\"\nThe setup script for salt\n\"\"\"\n\n# pylint: disable=file-perms,resource-leakage,deprecated-module\nimport setuptools  # isort:skip\nimport distutils.dist\nimport glob\nimport os\nimport subprocess\nimport sys\nimport warnings\nfrom datetime import datetime\n\n# pylint: disable=no-name-in-module\nfrom distutils import log\nfrom distutils.cmd import Command\nfrom distutils.command.build import build\nfrom distutils.command.clean import clean\nfrom distutils.command.install_lib import install_lib\nfrom distutils.errors import DistutilsArgError\nfrom distutils.version import LooseVersion  # pylint: disable=blacklisted-module\n\nfrom setuptools import setup\nfrom setuptools.command.bdist_egg import bdist_egg\nfrom setuptools.command.develop import develop\nfrom setuptools.command.install import install\nfrom setuptools.command.sdist import sdist\n\n# pylint: enable=no-name-in-module\n\n\ntry:\n    from urllib2 import urlopen\nexcept ImportError:\n    from urllib.request import urlopen  # pylint: disable=no-name-in-module\n\n\ntry:\n    from wheel.bdist_wheel import bdist_wheel\n\n    HAS_BDIST_WHEEL = True\nexcept ImportError:\n    HAS_BDIST_WHEEL = False\n\ntry:\n    import zmq\n\n    HAS_ZMQ = True\nexcept ImportError:\n    HAS_ZMQ = False\n\ntry:\n    DATE = datetime.utcfromtimestamp(int(os.environ[\"SOURCE_DATE_EPOCH\"]))\nexcept (KeyError, ValueError):\n    DATE = datetime.utcnow()\n\n# Change to salt source's directory prior to running any command\ntry:\n    SETUP_DIRNAME = os.path.dirname(__file__)\nexcept NameError:\n    # We're most likely being frozen and __file__ triggered this NameError\n    # Let's work around that\n    SETUP_DIRNAME = os.path.dirname(sys.argv[0])\n\nif SETUP_DIRNAME != \"\":\n    os.chdir(SETUP_DIRNAME)\n\nSETUP_DIRNAME = os.path.abspath(SETUP_DIRNAME)\n\nBOOTSTRAP_SCRIPT_DISTRIBUTED_VERSION = os.environ.get(\n    # The user can provide a different bootstrap-script version.\n    # ATTENTION: A tag for that version MUST exist\n    \"BOOTSTRAP_SCRIPT_VERSION\",\n    # If no bootstrap-script version was provided from the environment, let's\n    # provide the one we define.\n    \"v2014.06.21\",\n)\n\n# Store a reference to the executing platform\nIS_OSX_PLATFORM = sys.platform.startswith(\"darwin\")\nIS_WINDOWS_PLATFORM = sys.platform.startswith(\"win\")\nif IS_WINDOWS_PLATFORM or IS_OSX_PLATFORM:\n    IS_SMARTOS_PLATFORM = False\nelse:\n    # os.uname() not available on Windows.\n    IS_SMARTOS_PLATFORM = os.uname()[0] == \"SunOS\" and os.uname()[3].startswith(\n        \"joyent_\"\n    )\n\nUSE_STATIC_REQUIREMENTS = os.environ.get(\"USE_STATIC_REQUIREMENTS\")\nif USE_STATIC_REQUIREMENTS is not None:\n    USE_STATIC_REQUIREMENTS = USE_STATIC_REQUIREMENTS == \"1\"\n\ntry:\n    # Add the esky bdist target if the module is available\n    # may require additional modules depending on platform\n    # bbfreeze chosen for its tight integration with distutils\n    import bbfreeze  # pylint: disable=unused-import\n    from esky import bdist_esky  # pylint: disable=unused-import\n\n    HAS_ESKY = True\nexcept ImportError:\n    HAS_ESKY = False\n\nSALT_VERSION_MODULE = os.path.join(os.path.abspath(SETUP_DIRNAME), \"salt\", \"version.py\")\nSALT_VERSION_HARDCODED = os.path.join(\n    os.path.abspath(SETUP_DIRNAME), \"salt\", \"_version.txt\"\n)\nSALT_SYSPATHS_HARDCODED = os.path.join(\n    os.path.abspath(SETUP_DIRNAME), \"salt\", \"_syspaths.py\"\n)\nSALT_BASE_REQUIREMENTS = [\n    os.path.join(os.path.abspath(SETUP_DIRNAME), \"requirements\", \"base.txt\"),\n    # pyzmq needs to be installed regardless of the salt transport\n    os.path.join(os.path.abspath(SETUP_DIRNAME), \"requirements\", \"zeromq.txt\"),\n    os.path.join(os.path.abspath(SETUP_DIRNAME), \"requirements\", \"crypto.txt\"),\n]\nSALT_LINUX_LOCKED_REQS = [\n    # Linux packages defined locked requirements\n    os.path.join(\n        os.path.abspath(SETUP_DIRNAME),\n        \"requirements\",\n        \"static\",\n        \"pkg\",\n        \"py{}.{}\".format(*sys.version_info),\n        \"linux.txt\",\n    )\n]\nSALT_OSX_REQS = SALT_BASE_REQUIREMENTS + [\n    os.path.join(os.path.abspath(SETUP_DIRNAME), \"requirements\", \"darwin.txt\")\n]\nSALT_OSX_LOCKED_REQS = [\n    # OSX packages already defined locked requirements\n    os.path.join(\n        os.path.abspath(SETUP_DIRNAME),\n        \"requirements\",\n        \"static\",\n        \"pkg\",\n        \"py{}.{}\".format(*sys.version_info),\n        \"darwin.txt\",\n    )\n]\nSALT_WINDOWS_REQS = SALT_BASE_REQUIREMENTS + [\n    os.path.join(os.path.abspath(SETUP_DIRNAME), \"requirements\", \"windows.txt\")\n]\nSALT_WINDOWS_LOCKED_REQS = [\n    # Windows packages already defined locked requirements\n    os.path.join(\n        os.path.abspath(SETUP_DIRNAME),\n        \"requirements\",\n        \"static\",\n        \"pkg\",\n        \"py{}.{}\".format(*sys.version_info),\n        \"windows.txt\",\n    )\n]\nSALT_LONG_DESCRIPTION_FILE = os.path.join(os.path.abspath(SETUP_DIRNAME), \"README.rst\")\n\n# Salt SSH Packaging Detection\nPACKAGED_FOR_SALT_SSH_FILE = os.path.join(\n    os.path.abspath(SETUP_DIRNAME), \".salt-ssh-package\"\n)\nPACKAGED_FOR_SALT_SSH = os.path.isfile(PACKAGED_FOR_SALT_SSH_FILE)\n\n\n# pylint: disable=W0122\nif os.path.exists(SALT_VERSION_HARDCODED):\n    with open(SALT_VERSION_HARDCODED, encoding=\"utf-8\") as rfh:\n        SALT_VERSION = rfh.read().strip()\nelse:\n    SALT_VERSION = (\n        subprocess.check_output([sys.executable, SALT_VERSION_MODULE]).decode().strip()\n    )\n# pylint: enable=W0122\n\n\n# ----- Helper Functions -------------------------------------------------------------------------------------------->\n\n\ndef _parse_requirements_file(requirements_file):\n    parsed_requirements = []\n    with open(requirements_file, encoding=\"utf-8\") as rfh:\n        for line in rfh.readlines():\n            line = line.strip()\n            if not line or line.startswith((\"#\", \"-r\", \"--\")):\n                continue\n            if IS_WINDOWS_PLATFORM:\n                if \"libcloud\" in line:\n                    continue\n            parsed_requirements.append(line)\n    return parsed_requirements\n\n\n# <---- Helper Functions ---------------------------------------------------------------------------------------------\n\n\n# ----- Custom Distutils/Setuptools Commands ------------------------------------------------------------------------>\nclass WriteSaltVersion(Command):\n\n    description = \"Write salt's hardcoded version file\"\n    user_options = []\n\n    def initialize_options(self):\n        \"\"\"\n        Abstract method that is required to be overwritten\n        \"\"\"\n\n    def finalize_options(self):\n        \"\"\"\n        Abstract method that is required to be overwritten\n        \"\"\"\n\n    def run(self):\n        if (\n            not os.path.exists(SALT_VERSION_HARDCODED)\n            or self.distribution.with_salt_version\n        ):\n            # Write the version file\n            if getattr(self.distribution, \"salt_version_hardcoded_path\", None) is None:\n                self.distribution.salt_version_hardcoded_path = SALT_VERSION_HARDCODED\n                sys.stderr.write(\"This command is not meant to be called on it's own\\n\")\n                sys.stderr.flush()\n\n            if not self.distribution.with_salt_version:\n                salt_version = SALT_VERSION\n            else:\n                from salt.version import SaltStackVersion\n\n                salt_version = SaltStackVersion.parse(\n                    self.distribution.with_salt_version\n                )\n            if os.path.exists(self.distribution.salt_version_hardcoded_path):\n                log.warn(\n                    \"The 'salt/_version.txt' file already exists. Not overwriting it.\"\n                )\n                return\n\n            with open(\n                self.distribution.salt_version_hardcoded_path, \"w\", encoding=\"utf-8\"\n            ) as wfh:\n                wfh.write(str(salt_version))\n\n\nclass GenerateSaltSyspaths(Command):\n\n    description = \"Generate salt's hardcoded syspaths file\"\n\n    def initialize_options(self):\n        pass\n\n    def finalize_options(self):\n        pass\n\n    def run(self):\n        # Write the syspaths file\n        if getattr(self.distribution, \"salt_syspaths_hardcoded_path\", None) is None:\n            print(\"This command is not meant to be called on it's own\")\n            exit(1)\n\n        # Write the system paths file\n        open(\n            self.distribution.salt_syspaths_hardcoded_path, \"w\", encoding=\"utf-8\"\n        ).write(\n            INSTALL_SYSPATHS_TEMPLATE.format(\n                date=DATE,\n                root_dir=self.distribution.salt_root_dir,\n                share_dir=self.distribution.salt_share_dir,\n                config_dir=self.distribution.salt_config_dir,\n                cache_dir=self.distribution.salt_cache_dir,\n                sock_dir=self.distribution.salt_sock_dir,\n                srv_root_dir=self.distribution.salt_srv_root_dir,\n                base_file_roots_dir=self.distribution.salt_base_file_roots_dir,\n                base_pillar_roots_dir=self.distribution.salt_base_pillar_roots_dir,\n                base_master_roots_dir=self.distribution.salt_base_master_roots_dir,\n                base_thorium_roots_dir=self.distribution.salt_base_thorium_roots_dir,\n                lib_state_dir=self.distribution.salt_lib_state_dir,\n                logs_dir=self.distribution.salt_logs_dir,\n                pidfile_dir=self.distribution.salt_pidfile_dir,\n                spm_parent_path=self.distribution.salt_spm_parent_dir,\n                spm_formula_path=self.distribution.salt_spm_formula_dir,\n                spm_pillar_path=self.distribution.salt_spm_pillar_dir,\n                spm_reactor_path=self.distribution.salt_spm_reactor_dir,\n                home_dir=self.distribution.salt_home_dir,\n            )\n        )\n\n\nclass WriteSaltSshPackagingFile(Command):\n\n    description = \"Write salt's ssh packaging file\"\n    user_options = []\n\n    def initialize_options(self):\n        \"\"\"\n        Abstract method that is required to be overwritten\n        \"\"\"\n\n    def finalize_options(self):\n        \"\"\"\n        Abstract method that is required to be overwritten\n        \"\"\"\n\n    def run(self):\n        if not os.path.exists(PACKAGED_FOR_SALT_SSH_FILE):\n            # Write the salt-ssh packaging file\n            if getattr(self.distribution, \"salt_ssh_packaging_file\", None) is None:\n                print(\"This command is not meant to be called on it's own\")\n                exit(1)\n\n            # pylint: disable=E0602\n            open(\n                self.distribution.salt_ssh_packaging_file, \"w\", encoding=\"utf-8\"\n            ).write(\"Packaged for Salt-SSH\\n\")\n            # pylint: enable=E0602\n\n\nclass Develop(develop):\n    user_options = develop.user_options + [\n        (\n            \"write-salt-version\",\n            None,\n            \"Generate Salt's _version.txt file which allows proper version \"\n            \"reporting. This defaults to False on develop/editable setups. \"\n            \"If WRITE_SALT_VERSION is found in the environment this flag is \"\n            \"switched to True.\",\n        ),\n        (\n            \"generate-salt-syspaths\",\n            None,\n            \"Generate Salt's _syspaths.py file which allows tweaking some \"\n            \"common paths that salt uses. This defaults to False on \"\n            \"develop/editable setups. If GENERATE_SALT_SYSPATHS is found in \"\n            \"the environment this flag is switched to True.\",\n        ),\n        (\n            \"mimic-salt-install\",\n            None,\n            \"Mimmic the install command when running the develop command. \"\n            \"This will generate salt's _version.txt and _syspaths.py files. \"\n            \"Generate Salt's _syspaths.py file which allows tweaking some \"\n            \"This defaults to False on develop/editable setups. \"\n            \"If MIMIC_INSTALL is found in the environment this flag is \"\n            \"switched to True.\",\n        ),\n    ]\n    boolean_options = develop.boolean_options + [\n        \"write-salt-version\",\n        \"generate-salt-syspaths\",\n        \"mimic-salt-install\",\n    ]\n\n    def initialize_options(self):\n        develop.initialize_options(self)\n        self.write_salt_version = False\n        self.generate_salt_syspaths = False\n        self.mimic_salt_install = False\n\n    def finalize_options(self):\n        develop.finalize_options(self)\n        if \"WRITE_SALT_VERSION\" in os.environ:\n            self.write_salt_version = True\n        if \"GENERATE_SALT_SYSPATHS\" in os.environ:\n            self.generate_salt_syspaths = True\n        if \"MIMIC_SALT_INSTALL\" in os.environ:\n            self.mimic_salt_install = True\n\n        if self.mimic_salt_install:\n            self.write_salt_version = True\n            self.generate_salt_syspaths = True\n\n    def run(self):\n        if self.write_salt_version is True:\n            self.distribution.running_salt_install = True\n            self.distribution.salt_version_hardcoded_path = SALT_VERSION_HARDCODED\n            self.run_command(\"write_salt_version\")\n\n        if self.generate_salt_syspaths:\n            self.distribution.salt_syspaths_hardcoded_path = SALT_SYSPATHS_HARDCODED\n            self.run_command(\"generate_salt_syspaths\")\n\n        # Resume normal execution\n        develop.run(self)\n\n\nclass Sdist(sdist):\n    def make_release_tree(self, base_dir, files):\n        if self.distribution.ssh_packaging:\n            self.distribution.salt_ssh_packaging_file = PACKAGED_FOR_SALT_SSH_FILE\n            self.run_command(\"write_salt_ssh_packaging_file\")\n            self.filelist.files.append(os.path.basename(PACKAGED_FOR_SALT_SSH_FILE))\n\n        sdist.make_release_tree(self, base_dir, files)\n\n        # Let's generate salt/_version.txt to include in the sdist tarball\n        self.distribution.running_salt_sdist = True\n        self.distribution.salt_version_hardcoded_path = os.path.join(\n            base_dir, \"salt\", \"_version.txt\"\n        )\n        self.run_command(\"write_salt_version\")\n\n    def make_distribution(self):\n        sdist.make_distribution(self)\n        if self.distribution.ssh_packaging:\n            os.unlink(PACKAGED_FOR_SALT_SSH_FILE)\n\n\nclass BDistEgg(bdist_egg):\n    def finalize_options(self):\n        bdist_egg.finalize_options(self)\n        self.distribution.build_egg = True\n        if not self.skip_build:\n            self.run_command(\"build\")\n\n\nclass CloudSdist(Sdist):  # pylint: disable=too-many-ancestors\n    user_options = Sdist.user_options + [\n        (\n            \"download-bootstrap-script\",\n            None,\n            \"Download the latest stable bootstrap-salt.sh script. This \"\n            \"can also be triggered by having `DOWNLOAD_BOOTSTRAP_SCRIPT=1` as an \"\n            \"environment variable.\",\n        )\n    ]\n    boolean_options = Sdist.boolean_options + [\"download-bootstrap-script\"]\n\n    def initialize_options(self):\n        Sdist.initialize_options(self)\n        self.skip_bootstrap_download = True\n        self.download_bootstrap_script = False\n\n    def finalize_options(self):\n        Sdist.finalize_options(self)\n        if \"SKIP_BOOTSTRAP_DOWNLOAD\" in os.environ:\n            # pylint: disable=not-callable\n            log(\n                \"Please stop using 'SKIP_BOOTSTRAP_DOWNLOAD' and use \"\n                \"'DOWNLOAD_BOOTSTRAP_SCRIPT' instead\"\n            )\n            # pylint: enable=not-callable\n\n        if \"DOWNLOAD_BOOTSTRAP_SCRIPT\" in os.environ:\n            download_bootstrap_script = os.environ.get(\"DOWNLOAD_BOOTSTRAP_SCRIPT\", \"0\")\n            self.download_bootstrap_script = download_bootstrap_script == \"1\"\n\n    def run(self):\n        if self.download_bootstrap_script is True:\n            # Let's update the bootstrap-script to the version defined to be\n            # distributed. See BOOTSTRAP_SCRIPT_DISTRIBUTED_VERSION above.\n            url = (\n                \"https://github.com/saltstack/salt-bootstrap/raw/{}\"\n                \"/bootstrap-salt.sh\".format(BOOTSTRAP_SCRIPT_DISTRIBUTED_VERSION)\n            )\n            deploy_path = os.path.join(\n                SETUP_DIRNAME, \"salt\", \"cloud\", \"deploy\", \"bootstrap-salt.sh\"\n            )\n            log.info(\n                \"Updating bootstrap-salt.sh.\"\n                \"\\n\\tSource:      {}\"\n                \"\\n\\tDestination: {}\".format(url, deploy_path)\n            )\n\n            try:\n                import requests\n\n                req = requests.get(url, timeout=120)\n                if req.status_code == 200:\n                    script_contents = req.text.encode(req.encoding)\n                else:\n                    log.error(\n                        \"Failed to update the bootstrap-salt.sh script. HTTP \"\n                        \"Error code: {}\".format(req.status_code)\n                    )\n            except ImportError:\n                req = urlopen(url)\n\n                if req.getcode() == 200:\n                    script_contents = req.read()\n                else:\n                    log.error(\n                        \"Failed to update the bootstrap-salt.sh script. HTTP \"\n                        \"Error code: {}\".format(req.getcode())\n                    )\n            try:\n                with open(deploy_path, \"w\", encoding=\"utf-8\") as fp_:\n                    fp_.write(script_contents)\n            except OSError as err:\n                errmsg = f\"Failed to write the updated script: {err}\"\n                log.error(errmsg)\n\n        # Let's the rest of the build command\n        Sdist.run(self)\n\n    def write_manifest(self):\n        # We only need to ship the scripts which are supposed to be installed\n        dist_scripts = self.distribution.scripts\n        for script in self.filelist.files[:]:\n            if not script.startswith(\"scripts/\"):\n                continue\n            if script not in dist_scripts:\n                self.filelist.files.remove(script)\n        return Sdist.write_manifest(self)\n\n\nclass TestCommand(Command):\n    description = \"Run tests\"\n    user_options = [\n        (\"runtests-opts=\", \"R\", \"Command line options to pass to runtests.py\")\n    ]\n\n    def initialize_options(self):\n        self.runtests_opts = None\n\n    def finalize_options(self):\n        \"\"\"\n        Abstract method that is required to be overwritten\n        \"\"\"\n\n    def run(self):\n        # This should either be removed or migrated to use nox\n        import subprocess\n\n        self.run_command(\"build\")\n        build_cmd = self.get_finalized_command(\"build_ext\")\n        runner = os.path.abspath(\"tests/runtests.py\")\n        test_cmd = [sys.executable, runner]\n        if self.runtests_opts:\n            test_cmd.extend(self.runtests_opts.split())\n\n        print(\"running test\")\n        ret = subprocess.run(\n            test_cmd,\n            stdout=sys.stdout,\n            stderr=sys.stderr,\n            cwd=build_cmd.build_lib,\n            check=False,\n        )\n        sys.exit(ret.returncode)\n\n\nclass Clean(clean):\n    def run(self):\n        clean.run(self)\n        # Let's clean compiled *.py[c,o]\n        for subdir in (\"salt\", \"tests\", \"doc\"):\n            root = os.path.join(os.path.dirname(__file__), subdir)\n            for dirname, _, _ in os.walk(root):\n                for to_remove_filename in glob.glob(f\"{dirname}/*.py[oc]\"):\n                    os.remove(to_remove_filename)\n\n\nif HAS_BDIST_WHEEL:\n\n    class BDistWheel(bdist_wheel):\n        def finalize_options(self):\n            bdist_wheel.finalize_options(self)\n            self.distribution.build_wheel = True\n\n\nINSTALL_VERSION_TEMPLATE = \"\"\"\\\n# This file was auto-generated by salt's setup\n\nfrom salt.version import SaltStackVersion\n\n__saltstack_version__ = SaltStackVersion{full_version_info!r}\n\"\"\"\n\n\nINSTALL_SYSPATHS_TEMPLATE = \"\"\"\\\n# This file was auto-generated by salt's setup on \\\n{date:%A, %d %B %Y @ %H:%m:%S UTC}.\n\nROOT_DIR = {root_dir!r}\nSHARE_DIR = {share_dir!r}\nCONFIG_DIR = {config_dir!r}\nCACHE_DIR = {cache_dir!r}\nSOCK_DIR = {sock_dir!r}\nSRV_ROOT_DIR= {srv_root_dir!r}\nBASE_FILE_ROOTS_DIR = {base_file_roots_dir!r}\nBASE_PILLAR_ROOTS_DIR = {base_pillar_roots_dir!r}\nBASE_MASTER_ROOTS_DIR = {base_master_roots_dir!r}\nBASE_THORIUM_ROOTS_DIR = {base_thorium_roots_dir!r}\nLIB_STATE_DIR = {lib_state_dir!r}\nLOGS_DIR = {logs_dir!r}\nPIDFILE_DIR = {pidfile_dir!r}\nSPM_PARENT_PATH = {spm_parent_path!r}\nSPM_FORMULA_PATH = {spm_formula_path!r}\nSPM_PILLAR_PATH = {spm_pillar_path!r}\nSPM_REACTOR_PATH = {spm_reactor_path!r}\nHOME_DIR = {home_dir!r}\n\"\"\"\n\n\nclass Build(build):\n    def run(self):\n        # Run build.run function\n        build.run(self)\n        salt_build_ver_file = os.path.join(self.build_lib, \"salt\", \"_version.txt\")\n\n        if getattr(self.distribution, \"with_salt_version\", False):\n            # Write the hardcoded salt version module salt/_version.txt\n            self.distribution.salt_version_hardcoded_path = salt_build_ver_file\n            self.run_command(\"write_salt_version\")\n\n        if getattr(self.distribution, \"build_egg\", False):\n            # we are building an egg package. need to include _version.txt\n            self.distribution.salt_version_hardcoded_path = salt_build_ver_file\n            self.run_command(\"write_salt_version\")\n\n        if getattr(self.distribution, \"build_wheel\", False):\n            # we are building a wheel package. need to include _version.txt\n            self.distribution.salt_version_hardcoded_path = salt_build_ver_file\n            self.run_command(\"write_salt_version\")\n\n        if getattr(self.distribution, \"running_salt_install\", False):\n            # If our install attribute is present and set to True, we'll go\n            # ahead and write our install time python modules.\n\n            # Write the hardcoded salt version module salt/_version.txt\n            self.run_command(\"write_salt_version\")\n\n            # Write the system paths file\n            self.distribution.salt_syspaths_hardcoded_path = os.path.join(\n                self.build_lib, \"salt\", \"_syspaths.py\"\n            )\n            self.run_command(\"generate_salt_syspaths\")\n\n\nclass Install(install):\n    def initialize_options(self):\n        install.initialize_options(self)\n\n    def finalize_options(self):\n        install.finalize_options(self)\n\n    def run(self):\n        if LooseVersion(setuptools.__version__) < LooseVersion(\"9.1\"):\n            sys.stderr.write(\n                \"\\n\\nInstalling Salt requires setuptools >= 9.1\\n\"\n                \"Available setuptools version is {}\\n\\n\".format(setuptools.__version__)\n            )\n            sys.stderr.flush()\n            sys.exit(1)\n\n        # Let's set the running_salt_install attribute so we can add\n        # _version.txt in the build command\n        self.distribution.running_salt_install = True\n        self.distribution.salt_version_hardcoded_path = os.path.join(\n            self.build_lib, \"salt\", \"_version.txt\"\n        )\n        # need to ensure _version.txt is created in build dir before install\n        if not os.path.exists(os.path.join(self.build_lib)):\n            if not self.skip_build:\n                self.run_command(\"build\")\n        else:\n            self.run_command(\"write_salt_version\")\n        # Run install.run\n        install.run(self)\n\n    @staticmethod\n    def _called_from_setup(run_frame):\n        \"\"\"\n        Attempt to detect whether run() was called from setup() or by another\n        command.  If called by setup(), the parent caller will be the\n        'run_command' method in 'distutils.dist', and *its* caller will be\n        the 'run_commands' method.  If called any other way, the\n        immediate caller *might* be 'run_command', but it won't have been\n        called by 'run_commands'. Return True in that case or if a call stack\n        is unavailable. Return False otherwise.\n        \"\"\"\n        if run_frame is None:\n            # If run_frame is None, just call the parent class logic\n            return install._called_from_setup(run_frame)\n\n        # Because Salt subclasses the setuptools install command, it needs to\n        # override this static method to provide the right frame for the logic\n        # so apply.\n\n        # We first try the current run_frame in case the issue\n        # https://github.com/pypa/setuptools/issues/456 is fixed.\n        first_call = install._called_from_setup(run_frame)\n        if first_call:\n            return True\n\n        # Fallback to providing the parent frame to have the right logic kick in\n        second_call = install._called_from_setup(run_frame.f_back)\n        if second_call is None:\n            # There was no parent frame?!\n            return first_call\n        return second_call\n\n\nclass InstallLib(install_lib):\n    def run(self):\n        executables = [\n            \"salt/templates/git/ssh-id-wrapper\",\n            \"salt/templates/lxc/salt_tarball\",\n        ]\n        install_lib.run(self)\n\n        # input and outputs match 1-1\n        inp = self.get_inputs()\n        out = self.get_outputs()\n        chmod = []\n\n        for idx, inputfile in enumerate(inp):\n            for executable in executables:\n                if inputfile.endswith(executable):\n                    chmod.append(idx)\n        for idx in chmod:\n            filename = out[idx]\n            os.chmod(filename, 0o755)\n\n\n# <---- Custom Distutils/Setuptools Commands -------------------------------------------------------------------------\n\n\n# ----- Custom Distribution Class ----------------------------------------------------------------------------------->\n# We use this to override the package name in case --ssh-packaging is passed to\n# setup.py or the special .salt-ssh-package is found\nclass SaltDistribution(distutils.dist.Distribution):\n    \"\"\"\n    Just so it's completely clear\n\n    Under windows, the following scripts should be installed:\n\n        * salt-call\n        * salt-cp\n        * salt-minion\n\n    When packaged for salt-ssh, the following scripts should be installed:\n        * salt-call\n        * salt-run\n        * salt-ssh\n        * salt-cloud\n\n        Under windows, the following scripts should be omitted from the salt-ssh\n        package:\n            * salt-cloud\n            * salt-run\n\n    To build all binaries on Windows set the SALT_BUILD_ALL_BINS environment\n    variable to `1`\n\n    Under *nix, all scripts should be installed\n    \"\"\"\n\n    global_options = (\n        distutils.dist.Distribution.global_options\n        + [\n            (\"ssh-packaging\", None, \"Run in SSH packaging mode\"),\n            (\n                \"salt-transport=\",\n                None,\n                \"The transport to prepare salt for. Currently, the only choice \"\n                \"is 'zeromq'. This may be expanded in the future. Defaults to \"\n                \"'zeromq'\",\n                \"zeromq\",\n            ),\n        ]\n        + [\n            (\n                \"with-salt-version=\",\n                None,\n                \"Set a fixed version for Salt instead calculating it\",\n            ),\n            # Salt's Paths Configuration Settings\n            (\"salt-root-dir=\", None, \"Salt's pre-configured root directory\"),\n            (\"salt-share-dir=\", None, \"Salt's pre-configured share directory\"),\n            (\"salt-config-dir=\", None, \"Salt's pre-configured configuration directory\"),\n            (\"salt-cache-dir=\", None, \"Salt's pre-configured cache directory\"),\n            (\"salt-sock-dir=\", None, \"Salt's pre-configured socket directory\"),\n            (\"salt-srv-root-dir=\", None, \"Salt's pre-configured service directory\"),\n            (\n                \"salt-lib-state-dir=\",\n                None,\n                \"Salt's pre-configured variable state directory (used for storing pki data)\",\n            ),\n            (\n                \"salt-base-file-roots-dir=\",\n                None,\n                \"Salt's pre-configured file roots directory\",\n            ),\n            (\n                \"salt-base-pillar-roots-dir=\",\n                None,\n                \"Salt's pre-configured pillar roots directory\",\n            ),\n            (\n                \"salt-base-master-roots-dir=\",\n                None,\n                \"Salt's pre-configured master roots directory\",\n            ),\n            (\"salt-logs-dir=\", None, \"Salt's pre-configured logs directory\"),\n            (\"salt-pidfile-dir=\", None, \"Salt's pre-configured pidfiles directory\"),\n            (\n                \"salt-spm-formula-dir=\",\n                None,\n                \"Salt's pre-configured SPM formulas directory\",\n            ),\n            (\n                \"salt-spm-pillar-dir=\",\n                None,\n                \"Salt's pre-configured SPM pillar directory\",\n            ),\n            (\n                \"salt-spm-reactor-dir=\",\n                None,\n                \"Salt's pre-configured SPM reactor directory\",\n            ),\n            (\"salt-home-dir=\", None, \"Salt's pre-configured user home directory\"),\n        ]\n    )\n\n    def __init__(self, attrs=None):\n        distutils.dist.Distribution.__init__(self, attrs)\n\n        self.ssh_packaging = PACKAGED_FOR_SALT_SSH\n        self.salt_transport = None\n\n        # Salt Paths Configuration Settings\n        self.salt_root_dir = None\n        self.salt_share_dir = None\n        self.salt_config_dir = None\n        self.salt_cache_dir = None\n        self.salt_sock_dir = None\n        self.salt_srv_root_dir = None\n        self.salt_base_file_roots_dir = None\n        self.salt_base_thorium_roots_dir = None\n        self.salt_base_pillar_roots_dir = None\n        self.salt_base_master_roots_dir = None\n        self.salt_lib_state_dir = None\n        self.salt_logs_dir = None\n        self.salt_pidfile_dir = None\n        self.salt_spm_parent_dir = None\n        self.salt_spm_formula_dir = None\n        self.salt_spm_pillar_dir = None\n        self.salt_spm_reactor_dir = None\n        self.salt_home_dir = None\n\n        # Salt version\n        self.with_salt_version = None\n\n        self.name = \"salt-ssh\" if PACKAGED_FOR_SALT_SSH else \"salt\"\n        self.salt_version = SALT_VERSION\n        self.description = (\n            \"Portable, distributed, remote execution and configuration management\"\n            \" system\"\n        )\n        with open(SALT_LONG_DESCRIPTION_FILE, encoding=\"utf-8\") as f:\n            self.long_description = f.read()\n        self.long_description_content_type = \"text/x-rst\"\n        self.python_requires = \">=3.8\"\n        self.classifiers = [\n            \"Programming Language :: Python\",\n            \"Programming Language :: Cython\",\n            \"Programming Language :: Python :: 3\",\n            \"Programming Language :: Python :: 3 :: Only\",\n            \"Programming Language :: Python :: 3.8\",\n            \"Programming Language :: Python :: 3.9\",\n            \"Programming Language :: Python :: 3.10\",\n            \"Development Status :: 5 - Production/Stable\",\n            \"Environment :: Console\",\n            \"Intended Audience :: Developers\",\n            \"Intended Audience :: Information Technology\",\n            \"Intended Audience :: System Administrators\",\n            \"License :: OSI Approved :: Apache Software License\",\n            \"Operating System :: POSIX :: Linux\",\n            \"Topic :: System :: Clustering\",\n            \"Topic :: System :: Distributed Computing\",\n        ]\n        self.author = \"Thomas S Hatch\"\n        self.author_email = \"thatch45@gmail.com\"\n        self.url = \"https://saltproject.io\"\n        self.cmdclass.update(\n            {\n                \"test\": TestCommand,\n                \"clean\": Clean,\n                \"build\": Build,\n                \"sdist\": Sdist,\n                \"bdist_egg\": BDistEgg,\n                \"install\": Install,\n                \"develop\": Develop,\n                \"write_salt_version\": WriteSaltVersion,\n                \"generate_salt_syspaths\": GenerateSaltSyspaths,\n                \"write_salt_ssh_packaging_file\": WriteSaltSshPackagingFile,\n            }\n        )\n        if not IS_WINDOWS_PLATFORM:\n            self.cmdclass.update({\"sdist\": CloudSdist, \"install_lib\": InstallLib})\n        if HAS_BDIST_WHEEL:\n            self.cmdclass[\"bdist_wheel\"] = BDistWheel\n\n        self.license = \"Apache Software License 2.0\"\n        self.packages = self.discover_packages()\n        self.zip_safe = False\n\n        if HAS_ESKY:\n            self.setup_esky()\n\n        self.update_metadata()\n\n    def update_metadata(self):\n        for attrname in dir(self):\n            if attrname.startswith(\"__\"):\n                continue\n            attrvalue = getattr(self, attrname, None)\n            if attrvalue == 0:\n                continue\n            if attrname == \"salt_version\":\n                attrname = \"version\"\n            if hasattr(self.metadata, f\"set_{attrname}\"):\n                getattr(self.metadata, f\"set_{attrname}\")(attrvalue)\n            elif hasattr(self.metadata, attrname):\n                try:\n                    setattr(self.metadata, attrname, attrvalue)\n                except AttributeError:\n                    pass\n\n    def discover_packages(self):\n        modules = []\n        for root, _, files in os.walk(os.path.join(SETUP_DIRNAME, \"salt\")):\n            if \"__init__.py\" not in files:\n                continue\n            modules.append(os.path.relpath(root, SETUP_DIRNAME).replace(os.sep, \".\"))\n        return modules\n\n    # ----- Dynamic Data -------------------------------------------------------------------------------------------->\n    @property\n    def _property_package_data(self):\n        package_data = {\n            \"salt\": [\n                \"_version.txt\",\n            ],\n            \"salt.templates\": [\n                \"rh_ip/*.jinja\",\n                \"suse_ip/*.jinja\",\n                \"debian_ip/*.jinja\",\n                \"virt/*.jinja\",\n                \"git/*\",\n                \"lxc/*\",\n            ],\n        }\n        if not IS_WINDOWS_PLATFORM:\n            package_data[\"salt.cloud\"] = [\"deploy/*.sh\"]\n\n        return package_data\n\n    @property\n    def _property_data_files(self):\n        # Data files common to all scenarios\n        data_files = [\n            (\"share/man/man1\", [\"doc/man/salt-call.1\"]),\n            (\"share/man/man7\", [\"doc/man/salt.7\"]),\n        ]\n        if self.ssh_packaging or PACKAGED_FOR_SALT_SSH:\n            data_files[0][1].append(\"doc/man/salt-ssh.1\")\n            if IS_WINDOWS_PLATFORM and not os.environ.get(\"SALT_BUILD_ALL_BINS\"):\n                return data_files\n            data_files[0][1].append(\"doc/man/salt-cloud.1\")\n\n            return data_files\n\n        if IS_WINDOWS_PLATFORM and not os.environ.get(\"SALT_BUILD_ALL_BINS\"):\n            data_files[0][1].extend(\n                [\n                    \"doc/man/salt-cp.1\",\n                    \"doc/man/salt-minion.1\",\n                ]\n            )\n            return data_files\n\n        # *nix, so, we need all man pages\n        data_files[0][1].extend(\n            [\n                \"doc/man/salt-api.1\",\n                \"doc/man/salt-cloud.1\",\n                \"doc/man/salt-cp.1\",\n                \"doc/man/salt-key.1\",\n                \"doc/man/salt-master.1\",\n                \"doc/man/salt-minion.1\",\n                \"doc/man/salt-proxy.1\",\n                \"doc/man/salt-run.1\",\n                \"doc/man/spm.1\",\n                \"doc/man/salt.1\",\n                \"doc/man/salt-ssh.1\",\n                \"doc/man/salt-syndic.1\",\n            ]\n        )\n        return data_files\n\n    @property\n    def _property_install_requires(self):\n        install_requires = []\n        if USE_STATIC_REQUIREMENTS is True:\n            # We've been explicitly asked to use static requirements\n            if IS_OSX_PLATFORM:\n                for reqfile in SALT_OSX_LOCKED_REQS:\n                    install_requires += _parse_requirements_file(reqfile)\n\n            elif IS_WINDOWS_PLATFORM:\n                for reqfile in SALT_WINDOWS_LOCKED_REQS:\n                    install_requires += _parse_requirements_file(reqfile)\n            else:\n                for reqfile in SALT_LINUX_LOCKED_REQS:\n                    install_requires += _parse_requirements_file(reqfile)\n            return install_requires\n        elif USE_STATIC_REQUIREMENTS is False:\n            # We've been explicitly asked NOT to use static requirements\n            if IS_OSX_PLATFORM:\n                for reqfile in SALT_OSX_REQS:\n                    install_requires += _parse_requirements_file(reqfile)\n            elif IS_WINDOWS_PLATFORM:\n                for reqfile in SALT_WINDOWS_REQS:\n                    install_requires += _parse_requirements_file(reqfile)\n            else:\n                for reqfile in SALT_BASE_REQUIREMENTS:\n                    install_requires += _parse_requirements_file(reqfile)\n        else:\n            # This is the old and default behavior\n            if IS_OSX_PLATFORM:\n                for reqfile in SALT_OSX_LOCKED_REQS:\n                    install_requires += _parse_requirements_file(reqfile)\n            elif IS_WINDOWS_PLATFORM:\n                for reqfile in SALT_WINDOWS_LOCKED_REQS:\n                    install_requires += _parse_requirements_file(reqfile)\n            else:\n                for reqfile in SALT_BASE_REQUIREMENTS:\n                    install_requires += _parse_requirements_file(reqfile)\n        return install_requires\n\n    @property\n    def _property_entry_points(self):\n        entrypoints = {\n            \"pyinstaller40\": [\n                \"hook-dirs = salt.utils.pyinstaller:get_hook_dirs\",\n            ],\n        }\n        # console scripts common to all scenarios\n        scripts = [\n            \"salt-call = salt.scripts:salt_call\",\n        ]\n        if self.ssh_packaging or PACKAGED_FOR_SALT_SSH:\n            scripts.append(\"salt-ssh = salt.scripts:salt_ssh\")\n            if IS_WINDOWS_PLATFORM and not os.environ.get(\"SALT_BUILD_ALL_BINS\"):\n                return {\"console_scripts\": scripts}\n            scripts.append(\"salt-cloud = salt.scripts:salt_cloud\")\n            entrypoints[\"console_scripts\"] = scripts\n            return entrypoints\n\n        if IS_WINDOWS_PLATFORM and not os.environ.get(\"SALT_BUILD_ALL_BINS\"):\n            scripts.extend(\n                [\n                    \"salt-cp = salt.scripts:salt_cp\",\n                    \"salt-minion = salt.scripts:salt_minion\",\n                    \"salt-pip = salt.scripts:salt_pip\",\n                ]\n            )\n            entrypoints[\"console_scripts\"] = scripts\n            return entrypoints\n\n        # *nix, so, we need all scripts\n        scripts.extend(\n            [\n                \"salt = salt.scripts:salt_main\",\n                \"salt-api = salt.scripts:salt_api\",\n                \"salt-cloud = salt.scripts:salt_cloud\",\n                \"salt-cp = salt.scripts:salt_cp\",\n                \"salt-key = salt.scripts:salt_key\",\n                \"salt-master = salt.scripts:salt_master\",\n                \"salt-minion = salt.scripts:salt_minion\",\n                \"salt-run = salt.scripts:salt_run\",\n                \"salt-ssh = salt.scripts:salt_ssh\",\n                \"salt-syndic = salt.scripts:salt_syndic\",\n                \"spm = salt.scripts:salt_spm\",\n                \"salt-proxy = salt.scripts:salt_proxy\",\n                \"salt-pip = salt.scripts:salt_pip\",\n            ]\n        )\n        entrypoints[\"console_scripts\"] = scripts\n        return entrypoints\n\n    # <---- Dynamic Data ---------------------------------------------------------------------------------------------\n\n    # ----- Esky Setup ---------------------------------------------------------------------------------------------->\n    def setup_esky(self):\n        opt_dict = self.get_option_dict(\"bdist_esky\")\n        opt_dict[\"freezer_module\"] = (\"setup script\", \"bbfreeze\")\n        opt_dict[\"freezer_options\"] = (\n            \"setup script\",\n            {\"includes\": self.get_esky_freezer_includes()},\n        )\n\n    @property\n    def _property_freezer_options(self):\n        return {\"includes\": self.get_esky_freezer_includes()}\n\n    def get_esky_freezer_includes(self):\n        # Sometimes the auto module traversal doesn't find everything, so we\n        # explicitly add it. The auto dependency tracking especially does not work for\n        # imports occurring in salt.modules, as they are loaded at salt runtime.\n        # Specifying includes that don't exist doesn't appear to cause a freezing\n        # error.\n        freezer_includes = [\n            \"zmq.core.*\",\n            \"zmq.utils.*\",\n            \"ast\",\n            \"csv\",\n            \"difflib\",\n            \"distutils\",\n            \"distutils.version\",\n            \"numbers\",\n            \"json\",\n            \"M2Crypto\",\n            \"Cookie\",\n            \"asyncore\",\n            \"fileinput\",\n            \"sqlite3\",\n            \"email\",\n            \"email.mime.*\",\n            \"requests\",\n            \"sqlite3\",\n        ]\n        if HAS_ZMQ and hasattr(zmq, \"pyzmq_version_info\"):\n            if HAS_ZMQ and zmq.pyzmq_version_info() >= (0, 14):\n                # We're freezing, and when freezing ZMQ needs to be installed, so this\n                # works fine\n                if \"zmq.core.*\" in freezer_includes:\n                    # For PyZMQ >= 0.14, freezing does not need 'zmq.core.*'\n                    freezer_includes.remove(\"zmq.core.*\")\n\n        if IS_WINDOWS_PLATFORM:\n            freezer_includes.extend(\n                [\n                    \"imp\",\n                    \"win32api\",\n                    \"win32file\",\n                    \"win32con\",\n                    \"win32com\",\n                    \"win32net\",\n                    \"win32netcon\",\n                    \"win32gui\",\n                    \"win32security\",\n                    \"ntsecuritycon\",\n                    \"pywintypes\",\n                    \"pythoncom\",\n                    \"_winreg\",\n                    \"wmi\",\n                    \"site\",\n                    \"psutil\",\n                    \"pytz\",\n                ]\n            )\n        elif IS_SMARTOS_PLATFORM:\n            # we have them as requirements in pkg/smartos/esky/requirements.txt\n            # all these should be safe to force include\n            freezer_includes.extend(\n                [\"cherrypy\", \"python-dateutil\", \"pyghmi\", \"croniter\", \"mako\", \"gnupg\"]\n            )\n        elif sys.platform.startswith(\"linux\"):\n            freezer_includes.append(\"spwd\")\n            try:\n                import yum  # pylint: disable=unused-import\n\n                freezer_includes.append(\"yum\")\n            except ImportError:\n                pass\n        elif sys.platform.startswith(\"sunos\"):\n            # (The sledgehammer approach)\n            # Just try to include everything\n            # (This may be a better way to generate freezer_includes generally)\n            try:\n                from bbfreeze.modulegraph.modulegraph import ModuleGraph\n\n                mgraph = ModuleGraph(sys.path[:])\n                for arg in glob.glob(\"salt/modules/*.py\"):\n                    mgraph.run_script(arg)\n                for mod in mgraph.flatten():\n                    if type(mod).__name__ != \"Script\" and mod.filename:\n                        freezer_includes.append(str(os.path.basename(mod.identifier)))\n            except ImportError:\n                pass\n\n        return freezer_includes\n\n    # <---- Esky Setup -----------------------------------------------------------------------------------------------\n\n    # ----- Overridden Methods -------------------------------------------------------------------------------------->\n    def parse_command_line(self):\n        args = distutils.dist.Distribution.parse_command_line(self)\n\n        if not self.ssh_packaging and PACKAGED_FOR_SALT_SSH:\n            self.ssh_packaging = 1\n\n        if self.ssh_packaging:\n            self.metadata.name = \"salt-ssh\"\n            self.salt_transport = \"ssh\"\n        elif self.salt_transport is None:\n            self.salt_transport = \"zeromq\"\n\n        if self.salt_transport not in (\"zeromq\", \"both\", \"ssh\", \"none\"):\n            raise DistutilsArgError(\n                \"The value of --salt-transport needs be 'zeromq', \"\n                \"'both', 'ssh', or 'none' not '{}'\".format(self.salt_transport)\n            )\n\n        # Setup our property functions after class initialization and\n        # after parsing the command line since most are set to None\n        # ATTENTION: This should be the last step before returning the args or\n        # some of the requirements won't be correctly set\n        for funcname in dir(self):\n            if not funcname.startswith(\"_property_\"):\n                continue\n            property_name = funcname.split(\"_property_\", 1)[-1]\n            setattr(self, property_name, getattr(self, funcname))\n\n        return args\n\n    # <---- Overridden Methods ---------------------------------------------------------------------------------------\n\n\n# <---- Custom Distribution Class ------------------------------------------------------------------------------------\n\n\nif __name__ == \"__main__\":\n    warnings.warn(\n        \"Warning: distutils is deprecated and shall be removed in Python 3.12, advise migrate to using setuptools\"\n    )\n    warnings.warn(\n        \"In Salt 3009, the `setup.py` file will be stripped of it's custom additions and migrated to a plain \"\n        \"`pyproject.toml` python package or whatever is found best during the process of removing the customizations. \"\n        \"If you're relying on these customizations please stop as your workflow will break in the future.\"\n    )\n    setup(distclass=SaltDistribution)\n"
        },
        {
          "name": "templates",
          "type": "tree",
          "content": null
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "tools",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}