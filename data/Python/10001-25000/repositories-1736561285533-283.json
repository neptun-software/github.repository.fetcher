{
  "metadata": {
    "timestamp": 1736561285533,
    "page": 283,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjI5MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "python-pillow/Pillow",
      "stars": 12458,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".appveyor.yml",
          "type": "blob",
          "size": 3.0234375,
          "content": "skip_commits:\n  files:\n    - \".github/**/*\"\n    - \".gitmodules\"\n    - \"docs/**/*\"\n    - \"wheels/**/*\"\n\nversion: '{build}'\nclone_folder: c:\\pillow\ninit:\n- ECHO %PYTHON%\n#- ps: iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))\n# Uncomment previous line to get RDP access during the build.\n\nenvironment:\n  COVERAGE_CORE: sysmon\n  EXECUTABLE: python.exe\n  TEST_OPTIONS:\n  DEPLOY: YES\n  matrix:\n  - PYTHON: C:/Python313\n    ARCHITECTURE: x86\n    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2022\n  - PYTHON: C:/Python39-x64\n    ARCHITECTURE: AMD64\n    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019\n\n\ninstall:\n- '%PYTHON%\\%EXECUTABLE% --version'\n- '%PYTHON%\\%EXECUTABLE% -m pip install --upgrade pip'\n- curl -fsSL -o pillow-test-images.zip https://github.com/python-pillow/test-images/archive/main.zip\n- 7z x pillow-test-images.zip -oc:\\\n- xcopy /S /Y c:\\test-images-main\\* c:\\pillow\\tests\\images\n- curl -fsSL -o nasm-win64.zip https://raw.githubusercontent.com/python-pillow/pillow-depends/main/nasm-2.16.03-win64.zip\n- 7z x nasm-win64.zip -oc:\\\n- choco install ghostscript --version=10.4.0\n- path c:\\nasm-2.16.03;C:\\Program Files\\gs\\gs10.04.0\\bin;%PATH%\n- cd c:\\pillow\\winbuild\\\n- ps: |\n        c:\\python39\\python.exe c:\\pillow\\winbuild\\build_prepare.py -v --depends=C:\\pillow-depends\\\n        c:\\pillow\\winbuild\\build\\build_dep_all.cmd\n        $host.SetShouldExit(0)\n- path C:\\pillow\\winbuild\\build\\bin;%PATH%\n\nbuild_script:\n- cd c:\\pillow\n- winbuild\\build\\build_env.cmd\n- '%PYTHON%\\%EXECUTABLE% -m pip install -v -C raqm=vendor -C fribidi=vendor .'\n- '%PYTHON%\\%EXECUTABLE% selftest.py --installed'\n\ntest_script:\n- cd c:\\pillow\n- '%PYTHON%\\%EXECUTABLE% -m pip install pytest pytest-cov pytest-timeout defusedxml ipython numpy olefile pyroma'\n- c:\\\"Program Files (x86)\"\\\"Windows Kits\"\\10\\Debuggers\\x86\\gflags.exe /p /enable %PYTHON%\\%EXECUTABLE%\n- path %PYTHON%;%PATH%\n- .ci\\test.cmd\n\nafter_test:\n- curl -Os https://uploader.codecov.io/latest/windows/codecov.exe\n- .\\codecov.exe --file coverage.xml --name %PYTHON% --flags AppVeyor\n\nmatrix:\n  fast_finish: true\n\ncache:\n- '%LOCALAPPDATA%\\pip\\Cache'\n\nartifacts:\n- path: pillow\\*.egg\n  name: egg\n- path: pillow\\*.whl\n  name: wheel\n\nbefore_deploy:\n  - cd c:\\pillow\n  - '%PYTHON%\\%EXECUTABLE% -m pip wheel -v -C raqm=vendor -C fribidi=vendor .'\n  - ps: Get-ChildItem .\\*.whl | % { Push-AppveyorArtifact $_.FullName -FileName $_.Name }\n\ndeploy:\n  provider: S3\n  region: us-west-2\n  access_key_id: AKIAIRAXC62ZNTVQJMOQ\n  secret_access_key:\n    secure: Hwb6klTqtBeMgxAjRoDltiiqpuH8xbwD4UooDzBSiCWXjuFj1lyl4kHgHwTCCGqi\n  bucket: pillow-nightly\n  folder: win/$(APPVEYOR_BUILD_NUMBER)/\n  artifact: /.*egg|wheel/\n  on:\n    APPVEYOR_REPO_NAME: python-pillow/Pillow\n    branch: main\n    deploy: YES\n\n\n# Uncomment the following lines to get RDP access after the build/test and block for\n# up to the timeout limit (~1hr)\n#\n#on_finish:\n#- ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))\n"
        },
        {
          "name": ".ci",
          "type": "tree",
          "content": null
        },
        {
          "name": ".clang-format",
          "type": "blob",
          "size": 0.5322265625,
          "content": "# A clang-format style that approximates Python's PEP 7\n# Useful for IDE integration\nBasedOnStyle: Google\nAlwaysBreakAfterReturnType: All\nAllowShortIfStatementsOnASingleLine: false\nAlignAfterOpenBracket: BlockIndent\nBinPackArguments: false\nBinPackParameters: false\nBreakBeforeBraces: Attach\nColumnLimit: 88\nDerivePointerAlignment: false\nIndentGotoLabels: false\nIndentWidth: 4\nLanguage: Cpp\nPointerAlignment: Right\nReflowComments: true\nSortIncludes: false\nSpaceBeforeParens: ControlStatements\nSpacesInParentheses: false\nTabWidth: 4\nUseTab: Never\n"
        },
        {
          "name": ".coveragerc",
          "type": "blob",
          "size": 0.6318359375,
          "content": "# .coveragerc to control coverage.py\n\n[report]\n# Regexes for lines to exclude from consideration\nexclude_also =\n    # Don't complain if non-runnable code isn't run\n    if 0:\n    if __name__ == .__main__.:\n    # Don't complain about debug code\n    if DEBUG:\n    # Don't complain about compatibility code for missing optional dependencies\n    except ImportError\n    if TYPE_CHECKING:\n    @abc.abstractmethod\n    # Empty bodies in protocols or abstract methods\n    ^\\s*def [a-zA-Z0-9_]+\\(.*\\)(\\s*->.*)?:\\s*\\.\\.\\.(\\s*#.*)?$\n    ^\\s*\\.\\.\\.(\\s*#.*)?$\n\n[run]\nomit =\n    Tests/32bit_segfault_check.py\n    Tests/check_*.py\n    Tests/createfontdatachunk.py\n"
        },
        {
          "name": ".editorconfig",
          "type": "blob",
          "size": 0.3740234375,
          "content": "# Top-most EditorConfig file\nroot = true\n\n[*]\n# Unix-style newlines with a newline ending every file\nend_of_line = lf\ninsert_final_newline = true\ncharset = utf-8\n\n# Four-space indentation\nindent_size = 4\nindent_style = space\n\ntrim_trailing_whitespace = true\n\n[*.{toml,yml}]\n# Two-space indentation\nindent_size = 2\n\n# Tab indentation (no size specified)\n[Makefile]\nindent_style = tab\n"
        },
        {
          "name": ".git-blame-ignore-revs",
          "type": "blob",
          "size": 0.1845703125,
          "content": "# Flake8\n8de95676e0fd89f2326b3953488ab66ff29cd2d0\n# Format with Black\n53a7e3500437a9fd5826bc04758f7116bd7e52dc\n# Format the C code with ClangFormat\n46b7e86bab79450ec0a2866c6c0c679afb659d17\n"
        },
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.0439453125,
          "content": "*.eps binary\n*.ppm binary\n*.container binary\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 1.13671875,
          "content": "# Byte-compiled / optimized / DLL files\n__pycache__/\n*.py[cod]\n\n# C extensions\n*.so\n\n# Distribution / packaging\n.eggs/\n.Python\nenv/\nbin/\nbuild/\ndevelop-eggs/\ndist/\neggs/\nlib/\nlib64/\nparts/\nsdist/\nvar/\nwheelhouse/\n*.egg-info/\n.installed.cfg\n*.egg\n\n# Installer logs\npip-log.txt\npip-delete-this-directory.txt\n\n# Unit test / coverage reports\nhtmlcov/\n.tox/\n.coverage\n.cache\n.pytest_cache\ncoverage.xml\n\n# Test files\ntest_images\n\n# Translations\n*.mo\n\n# Mr Developer\n.mr.developer.cfg\n.project\n.pydevproject\n\n# Rope\n.ropeproject\n\n# Django stuff:\n*.log\n*.pot\n\n# Sphinx documentation\ndocs/_build/\n\n# viewdoc output\n.long-description.html\n\n# Vim cruft\n.*.swp\n\n#emacs\n*~\n\\#*#\n.#*\n\n#VS Code\n.vscode\n\n#Komodo\n*.komodoproject\n\n#OS\n.DS_Store\n\n# JetBrains\n.idea\n\n# Extra test images installed from python-pillow/test-images\nTests/images/README.md\nTests/images/crash_1.tif\nTests/images/crash_2.tif\nTests/images/crash-81154a65438ba5aaeca73fd502fa4850fbde60f8.tif\nTests/images/string_dimension.tiff\nTests/images/jpeg2000\nTests/images/msp\nTests/images/picins\nTests/images/sunraster\n\n# Test and dependency downloads\npillow-depends-main.zip\npillow-test-images.zip\n\n# pyinstaller\n*.spec\n"
        },
        {
          "name": ".gitmodules",
          "type": "blob",
          "size": 0.107421875,
          "content": "[submodule \"multibuild\"]\n    path = wheels/multibuild\n    url = https://github.com/multi-build/multibuild.git\n"
        },
        {
          "name": ".pre-commit-config.yaml",
          "type": "blob",
          "size": 2.1396484375,
          "content": "repos:\n  - repo: https://github.com/astral-sh/ruff-pre-commit\n    rev: v0.8.6\n    hooks:\n      - id: ruff\n        args: [--exit-non-zero-on-fix]\n\n  - repo: https://github.com/psf/black-pre-commit-mirror\n    rev: 24.10.0\n    hooks:\n      - id: black\n\n  - repo: https://github.com/PyCQA/bandit\n    rev: 1.8.0\n    hooks:\n    - id: bandit\n      args: [--severity-level=high]\n      files: ^src/\n\n  - repo: https://github.com/Lucas-C/pre-commit-hooks\n    rev: v1.5.5\n    hooks:\n      - id: remove-tabs\n        exclude: (Makefile$|\\.bat$|\\.cmake$|\\.eps$|\\.fits$|\\.gd$|\\.opt$)\n\n  - repo: https://github.com/pre-commit/mirrors-clang-format\n    rev: v19.1.6\n    hooks:\n      - id: clang-format\n        types: [c]\n        exclude: ^src/thirdparty/\n\n  - repo: https://github.com/pre-commit/pygrep-hooks\n    rev: v1.10.0\n    hooks:\n      - id: rst-backticks\n\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v5.0.0\n    hooks:\n      - id: check-executables-have-shebangs\n      - id: check-shebang-scripts-are-executable\n      - id: check-merge-conflict\n      - id: check-json\n      - id: check-toml\n      - id: check-yaml\n      - id: end-of-file-fixer\n        exclude: ^Tests/images/\n      - id: trailing-whitespace\n        exclude: ^.github/.*TEMPLATE|^Tests/(fonts|images)/\n\n  - repo: https://github.com/python-jsonschema/check-jsonschema\n    rev: 0.30.0\n    hooks:\n      - id: check-github-workflows\n      - id: check-readthedocs\n      - id: check-renovate\n\n  - repo: https://github.com/woodruffw/zizmor-pre-commit\n    rev: v1.0.0\n    hooks:\n      - id: zizmor\n\n  - repo: https://github.com/sphinx-contrib/sphinx-lint\n    rev: v1.0.0\n    hooks:\n      - id: sphinx-lint\n\n  - repo: https://github.com/tox-dev/pyproject-fmt\n    rev: v2.5.0\n    hooks:\n      - id: pyproject-fmt\n\n  - repo: https://github.com/abravalheri/validate-pyproject\n    rev: v0.23\n    hooks:\n      - id: validate-pyproject\n        additional_dependencies: [trove-classifiers>=2024.10.12]\n\n  - repo: https://github.com/tox-dev/tox-ini-fmt\n    rev: 1.4.1\n    hooks:\n      - id: tox-ini-fmt\n\n  - repo: meta\n    hooks:\n      - id: check-hooks-apply\n      - id: check-useless-excludes\n\nci:\n  autoupdate_schedule: monthly\n"
        },
        {
          "name": ".readthedocs.yml",
          "type": "blob",
          "size": 0.314453125,
          "content": "version: 2\n\nformats: [pdf]\n\nbuild:\n  os: ubuntu-lts-latest\n  tools:\n    python: \"3\"\n  jobs:\n    post_checkout:\n    - git remote add upstream https://github.com/python-pillow/Pillow.git # For forks\n    - git fetch upstream --tags\n\npython:\n  install:\n    - method: pip\n      path: .\n      extra_requirements:\n        - docs\n"
        },
        {
          "name": "CHANGES.rst",
          "type": "blob",
          "size": 199.8125,
          "content": "\nChangelog (Pillow)\n==================\n\n11.1.0 and newer\n----------------\n\nSee GitHub Releases:\n\n- https://github.com/python-pillow/Pillow/releases\n\n11.0.0 (2024-10-15)\n-------------------\n\n- Update licence to MIT-CMU #8460\n  [hugovk]\n\n- Conditionally define ImageCms type hint to avoid requiring core #8197\n  [radarhere]\n\n- Support writing LONG8 offsets in AppendingTiffWriter #8417\n  [radarhere]\n\n- Use ImageFile.MAXBLOCK when saving TIFF images #8461\n  [radarhere]\n\n- Do not close provided file handles with libtiff when saving #8458\n  [radarhere]\n\n- Support ImageFilter.BuiltinFilter for I;16* images #8438\n  [radarhere]\n\n- Use ImagingCore.ptr instead of ImagingCore.id #8341\n  [homm, radarhere, hugovk]\n\n- Updated EPS mode when opening images without transparency #8281\n  [Yay295, radarhere]\n\n- Use transparency when combining P frames from APNGs #8443\n  [radarhere]\n\n- Support all resampling filters when resizing I;16* images #8422\n  [radarhere]\n\n- Free memory on early return #8413\n  [radarhere]\n\n- Cast int before potentially exceeding INT_MAX #8402\n  [radarhere]\n\n- Check image value before use #8400\n  [radarhere]\n\n- Improved copying imagequant libraries #8420\n  [radarhere]\n\n- Use Capsule for WebP saving #8386\n  [homm, radarhere]\n\n- Fixed writing multiple StripOffsets to TIFF #8317\n  [Yay295, radarhere]\n\n- Fix dereference before checking for NULL in ImagingTransformAffine #8398\n  [PavlNekrasov]\n\n- Use transposed size after opening for TIFF images #8390\n  [radarhere, homm]\n\n- Improve ImageFont error messages #8338\n  [yngvem, radarhere, hugovk]\n\n- Mention MAX_TEXT_CHUNK limit in PNG error message #8391\n  [radarhere]\n\n- Cast Dib handle to int #8385\n  [radarhere]\n\n- Accept float stroke widths #8369\n  [radarhere]\n\n- Deprecate ICNS (width, height, scale) sizes in favour of load(scale) #8352\n  [radarhere]\n\n- Improved handling of RGBA palettes when saving GIF images #8366\n  [radarhere]\n\n- Deprecate isImageType #8364\n  [radarhere]\n\n- Support converting more modes to LAB by converting to RGBA first #8358\n  [radarhere]\n\n- Deprecate support for FreeType 2.9.0 #8356\n  [hugovk, radarhere]\n\n- Removed unused TiffImagePlugin IFD_LEGACY_API #8355\n  [radarhere]\n\n- Handle duplicate EXIF header #8350\n  [zakajd, radarhere]\n\n- Return early from BoxBlur if either width or height is zero #8347\n  [radarhere]\n\n- Check text is either string or bytes #8308\n  [radarhere]\n\n- Added writing XMP bytes to JPEG #8286\n  [radarhere]\n\n- Support JPEG2000 RGBA palettes #8256\n  [radarhere]\n\n- Expand C image to match GIF frame image size #8237\n  [radarhere]\n\n- Allow saving I;16 images as PPM #8231\n  [radarhere]\n\n- When IFD is missing, connect get_ifd() dictionary to Exif #8230\n  [radarhere]\n\n- Skip truncated ICO mask if LOAD_TRUNCATED_IMAGES is enabled #8180\n  [radarhere]\n\n- Treat unknown JPEG2000 colorspace as unspecified #8343\n  [radarhere]\n\n- Updated error message when saving WebP with invalid width or height #8322\n  [radarhere, hugovk]\n\n- Remove warning if NumPy failed to raise an error during conversion #8326\n  [radarhere]\n\n- If left and right sides meet in ImageDraw.rounded_rectangle(), do not draw rectangle to fill gap #8304\n  [radarhere]\n\n- Remove WebP support without anim, mux/demux, and with buggy alpha #8213\n  [homm, radarhere]\n\n- Add missing TIFF CMYK;16B reader #8298\n  [homm]\n\n- Remove all WITH_* flags from _imaging.c and other flags #8211\n  [homm]\n\n- Improve ImageDraw2 shape methods #8265\n  [radarhere]\n\n- Lock around usages of imaging memory arenas #8238\n  [lysnikolaou]\n\n- Deprecate JpegImageFile huffman_ac and huffman_dc #8274\n  [radarhere]\n\n- Deprecate ImageMath lambda_eval and unsafe_eval options argument #8242\n  [radarhere]\n\n- Changed ContainerIO to subclass IO #8240\n  [radarhere]\n\n- Move away from APIs that use borrowed references under the free-threaded build #8216\n  [hugovk, lysnikolaou]\n\n- Allow size argument to resize() to be a NumPy array #8201\n  [radarhere]\n\n- Drop support for Python 3.8 #8183\n  [hugovk, radarhere]\n\n- Add support for Python 3.13 #8181\n  [hugovk, radarhere]\n\n- Fix incompatibility with NumPy 1.20 #8187\n  [neutrinoceros, radarhere]\n\n- Remove PSFile, PyAccess and USE_CFFI_ACCESS #8182\n  [hugovk, radarhere]\n\n10.4.0 (2024-07-01)\n-------------------\n\n- Raise FileNotFoundError if show_file() path does not exist #8178\n  [radarhere]\n\n- Improved reading 16-bit TGA images with colour #7965\n  [Yay295, radarhere]\n\n- Deprecate non-image ImageCms modes #8031\n  [radarhere]\n\n- Fixed processing multiple JPEG EXIF markers #8127\n  [radarhere]\n\n- Do not preserve EXIFIFD tag by default when saving TIFF images #8110\n  [radarhere]\n\n- Added ImageFont.load_default_imagefont() #8086\n  [radarhere]\n\n- Added Image.WARN_POSSIBLE_FORMATS #8063\n  [radarhere]\n\n- Remove zero-byte end padding when parsing any XMP data #8171\n  [radarhere]\n\n- Do not detect Ultra HDR images as MPO #8056\n  [radarhere]\n\n- Raise SyntaxError specific to JP2 #8146\n  [Yay295, radarhere]\n\n- Do not use first frame duration for other frames when saving APNG images #8104\n  [radarhere]\n\n- Consider I;16 pixel size when using a 1 mode mask #8112\n  [radarhere]\n\n- When saving multiple PNG frames, convert to mode rather than raw mode #8087\n  [radarhere]\n\n- Added byte support to FreeTypeFont #8141\n  [radarhere]\n\n- Allow float center for rotate operations #8114\n  [radarhere]\n\n- Do not read layers immediately when opening PSD images #8039\n  [radarhere]\n\n- Restore original thread state #8065\n  [radarhere]\n\n- Read IM and TIFF images as RGB, rather than RGBX #7997\n  [radarhere]\n\n- Only preserve TIFF IPTC_NAA_CHUNK tag if type is BYTE or UNDEFINED #7948\n  [radarhere]\n\n- Clarify ImageDraw2 error message when size is missing #8165\n  [radarhere]\n\n- Support unpacking more rawmodes to RGBA palettes #7966\n  [radarhere]\n\n- Removed support for Qt 5 #8159\n  [radarhere]\n\n- Improve ``ImageFont.freetype`` support for XDG directories on Linux #8135\n  [mamg22, radarhere]\n\n- Improved consistency of XMP handling #8069\n  [radarhere]\n\n- Use pkg-config to help find libwebp and raqm #8142\n  [radarhere]\n\n- Accept 't' suffix for libtiff version #8126, #8129\n  [radarhere]\n\n- Deprecate ImageDraw.getdraw hints parameter #8124\n  [radarhere, hugovk]\n\n- Added ImageDraw circle() #8085\n  [void4, hugovk, radarhere]\n\n- Add mypy target to Makefile #8077\n  [Yay295]\n\n- Added more modes to Image.MODES #7984\n  [radarhere]\n\n- Deprecate BGR;15, BGR;16 and BGR;24 modes #7978\n  [radarhere, hugovk]\n\n- Fix ImagingAccess for I;16N on big-endian #7921\n  [Yay295, radarhere]\n\n- Support reading P mode TIFF images with padding #7996\n  [radarhere]\n\n- Deprecate support for libtiff < 4 #7998\n  [radarhere, hugovk]\n\n- Corrected ImageShow UnixViewer command #7987\n  [radarhere]\n\n- Use functools.cached_property in ImageStat #7952\n  [nulano, hugovk, radarhere]\n\n- Add support for reading BITMAPV2INFOHEADER and BITMAPV3INFOHEADER #7956\n  [Cirras, radarhere]\n\n- Support reading CMYK JPEG2000 images #7947\n  [radarhere]\n\n10.3.0 (2024-04-01)\n-------------------\n\n- CVE-2024-28219: Use ``strncpy`` to avoid buffer overflow #7928\n  [radarhere, hugovk]\n\n- Deprecate ``eval()``, replacing it with ``lambda_eval()`` and ``unsafe_eval()`` #7927\n  [radarhere, hugovk]\n\n- Raise ``ValueError`` if seeking to greater than offset-sized integer in TIFF #7883\n  [radarhere]\n\n- Add ``--report`` argument to ``__main__.py`` to omit supported formats #7818\n  [nulano, radarhere, hugovk]\n\n- Added RGB to I;16, I;16L, I;16B and I;16N conversion #7918, #7920\n  [radarhere]\n\n- Fix editable installation with custom build backend and configuration options #7658\n  [nulano, radarhere]\n\n- Fix putdata() for I;16N on big-endian #7209\n  [Yay295, hugovk, radarhere]\n\n- Determine MPO size from markers, not EXIF data #7884\n  [radarhere]\n\n- Improved conversion from RGB to RGBa, LA and La #7888\n  [radarhere]\n\n- Support FITS images with GZIP_1 compression #7894\n  [radarhere]\n\n- Use I;16 mode for 9-bit JPEG 2000 images #7900\n  [scaramallion, radarhere]\n\n- Raise ValueError if kmeans is negative #7891\n  [radarhere]\n\n- Remove TIFF tag OSUBFILETYPE when saving using libtiff #7893\n  [radarhere]\n\n- Raise ValueError for negative values when loading P1-P3 PPM images #7882\n  [radarhere]\n\n- Added reading of JPEG2000 palettes #7870\n  [radarhere]\n\n- Added alpha_quality argument when saving WebP images #7872\n  [radarhere]\n\n- Fixed joined corners for ImageDraw rounded_rectangle() non-integer dimensions #7881\n  [radarhere]\n\n- Stop reading EPS image at EOF marker #7753\n  [radarhere]\n\n- PSD layer co-ordinates may be negative #7706\n  [radarhere]\n\n- Use subprocess with CREATE_NO_WINDOW flag in ImageShow WindowsViewer #7791\n  [radarhere]\n\n- When saving GIF frame that restores to background color, do not fill identical pixels #7788\n  [radarhere]\n\n- Fixed reading PNG iCCP compression method #7823\n  [radarhere]\n\n- Allow writing IFDRational to UNDEFINED tag #7840\n  [radarhere]\n\n- Fix logged tag name when loading Exif data #7842\n  [radarhere]\n\n- Use maximum frame size in IHDR chunk when saving APNG images #7821\n  [radarhere]\n\n- Prevent opening P TGA images without a palette #7797\n  [radarhere]\n\n- Use palette when loading ICO images #7798\n  [radarhere]\n\n- Use consistent arguments for load_read and load_seek #7713\n  [radarhere]\n\n- Turn off nullability warnings for macOS SDK #7827\n  [radarhere]\n\n- Fix shift-sign issue in Convert.c #7838\n  [r-barnes, radarhere]\n\n- Open 16-bit grayscale PNGs as I;16 #7849\n  [radarhere]\n\n- Handle truncated chunks at the end of PNG images #7709\n  [lajiyuan, radarhere]\n\n- Match mask size to pasted image size in GifImagePlugin #7779\n  [radarhere]\n\n- Release GIL while calling ``WebPAnimDecoderGetNext`` #7782\n  [evanmiller, radarhere]\n\n- Fixed reading FLI/FLC images with a prefix chunk #7804\n  [twolife]\n\n- Update wl-paste handling and return None for some errors in grabclipboard() on Linux #7745\n  [nik012003, radarhere]\n\n- Remove execute bit from ``setup.py`` #7760\n  [hugovk]\n\n- Do not support using test-image-results to upload images after test failures #7739\n  [radarhere]\n\n- Changed ImageMath.ops to be static #7721\n  [radarhere]\n\n- Fix APNG info after seeking backwards more than twice #7701\n  [esoma, radarhere]\n\n- Deprecate ImageCms constants and versions() function #7702\n  [nulano, radarhere]\n\n- Added PerspectiveTransform #7699\n  [radarhere]\n\n- Add support for reading and writing grayscale PFM images #7696\n  [nulano, hugovk]\n\n- Add LCMS2 flags to ImageCms #7676\n  [nulano, radarhere, hugovk]\n\n- Rename x64 to AMD64 in winbuild #7693\n  [nulano]\n\n10.2.0 (2024-01-02)\n-------------------\n\n- Add ``keep_rgb`` option when saving JPEG to prevent conversion of RGB colorspace #7553\n  [bgilbert, radarhere]\n\n- Trim glyph size in ImageFont.getmask() #7669, #7672\n  [radarhere, nulano]\n\n- Deprecate IptcImagePlugin helpers #7664\n  [nulano, hugovk, radarhere]\n\n- Allow uncompressed TIFF images to be saved in chunks #7650\n  [radarhere]\n\n- Concatenate multiple JPEG EXIF markers #7496\n  [radarhere]\n\n- Changed IPTC tile tuple to match other plugins #7661\n  [radarhere]\n\n- Do not assign new fp attribute when exiting context manager #7566\n  [radarhere]\n\n- Support arbitrary masks for uncompressed RGB DDS images #7589\n  [radarhere, akx]\n\n- Support setting ROWSPERSTRIP tag #7654\n  [radarhere]\n\n- Apply ImageFont.MAX_STRING_LENGTH to ImageFont.getmask() #7662\n  [radarhere]\n\n- Optimise ``ImageColor`` using ``functools.lru_cache`` #7657\n  [hugovk]\n\n- Restricted environment keys for ImageMath.eval() #7655\n  [wiredfool, radarhere]\n\n- Optimise ``ImageMode.getmode`` using ``functools.lru_cache`` #7641\n  [hugovk, radarhere]\n\n- Fix incorrect color blending for overlapping glyphs #7497\n  [ZachNagengast, nulano, radarhere]\n\n- Attempt memory mapping when tile args is a string #7565\n  [radarhere]\n\n- Fill identical pixels with transparency in subsequent frames when saving GIF #7568\n  [radarhere]\n\n- Corrected duration when combining multiple GIF frames into single frame #7521\n  [radarhere]\n\n- Handle disposing GIF background from outside palette #7515\n  [radarhere]\n\n- Seek past the data when skipping a PSD layer #7483\n  [radarhere]\n\n- Import plugins relative to the module #7576\n  [deliangyang, jaxx0n]\n\n- Translate encoder error codes to strings; deprecate ``ImageFile.raise_oserror()`` #7609\n  [bgilbert, radarhere]\n\n- Support reading BC4U and DX10 BC1 images #6486\n  [REDxEYE, radarhere, hugovk]\n\n- Optimize ImageStat.Stat.extrema #7593\n  [florath, radarhere]\n\n- Handle pathlib.Path in FreeTypeFont #7578\n  [radarhere, hugovk, nulano]\n\n- Added support for reading DX10 BC4 DDS images #7603\n  [sambvfx, radarhere]\n\n- Optimized ImageStat.Stat.count #7599\n  [florath]\n\n- Correct PDF palette size when saving #7555\n  [radarhere]\n\n- Fixed closing file pointer with olefile 0.47 #7594\n  [radarhere]\n\n- Raise ValueError when TrueType font size is not greater than zero #7584, #7587\n  [akx, radarhere]\n\n- If absent, do not try to close fp when closing image #7557\n  [RaphaelVRossi, radarhere]\n\n- Allow configuring JPEG restart marker interval on save #7488\n  [bgilbert, radarhere]\n\n- Decrement reference count for PyObject #7549\n  [radarhere]\n\n- Implement ``streamtype=1`` option for tables-only JPEG encoding #7491\n  [bgilbert, radarhere]\n\n- If save_all PNG only has one frame, do not create animated image #7522\n  [radarhere]\n\n- Fixed frombytes() for images with a zero dimension #7493\n  [radarhere]\n\n10.1.0 (2023-10-15)\n-------------------\n\n- Added TrueType default font to allow for different sizes #7354\n  [radarhere]\n\n- Fixed invalid argument warning #7442\n  [radarhere]\n\n- Added ImageOps cover method #7412\n  [radarhere, hugovk]\n\n- Catch struct.error from truncated EXIF when reading JPEG DPI #7458\n  [radarhere]\n\n- Consider default image when selecting mode for PNG save_all #7437\n  [radarhere]\n\n- Support BGR;15, BGR;16 and BGR;24 access, unpacking and putdata #7303\n  [radarhere]\n\n- Added CMYK to RGB unpacker #7310\n  [radarhere]\n\n- Improved flexibility of XMP parsing #7274\n  [radarhere]\n\n- Support reading 8-bit YCbCr TIFF images #7415\n  [radarhere]\n\n- Allow saving I;16B images as PNG #7302\n  [radarhere]\n\n- Corrected drawing I;16 points and writing I;16 text #7257\n  [radarhere]\n\n- Set blue channel to 128 for BC5S #7413\n  [radarhere]\n\n- Increase flexibility when reading IPTC fields #7319\n  [radarhere]\n\n- Set C palette to be empty by default #7289\n  [radarhere]\n\n- Added gs_binary to control Ghostscript use on all platforms #7392\n  [radarhere]\n\n- Read bounding box information from the trailer of EPS files if specified #7382\n  [nopperl, radarhere]\n\n- Added reading 8-bit color DDS images #7426\n  [radarhere]\n\n- Added has_transparency_data #7420\n  [radarhere, hugovk]\n\n- Fixed bug when reading BC5S DDS images #7401\n  [radarhere]\n\n- Prevent TIFF orientation from being applied more than once #7383\n  [radarhere]\n\n- Use previous pixel alpha for QOI_OP_RGB #7357\n  [radarhere]\n\n- Added BC5U reading #7358\n  [radarhere]\n\n- Allow getpixel() to accept a list #7355\n  [radarhere, homm]\n\n- Allow GaussianBlur and BoxBlur to accept a sequence of x and y radii #7336\n  [radarhere]\n\n- Expand JPEG buffer size when saving optimized or progressive #7345\n  [radarhere]\n\n- Added session type check for Linux in ImageGrab.grabclipboard() #7332\n  [TheNooB2706, radarhere, hugovk]\n\n- Allow \"loop=None\" when saving GIF images #7329\n  [radarhere]\n\n- Fixed transparency when saving P mode images to PDF #7323\n  [radarhere]\n\n- Added saving LA images as PDFs #7299\n  [radarhere]\n\n- Set SMaskInData to 1 for PDFs with alpha #7316, #7317\n  [radarhere]\n\n- Changed Image mode property to be read-only by default #7307\n  [radarhere]\n\n- Silence exceptions in _repr_jpeg_ and _repr_png_ #7266\n  [mtreinish, radarhere]\n\n- Do not use transparency when saving GIF if it has been removed when normalizing mode #7284\n  [radarhere]\n\n- Fix missing symbols when libtiff depends on libjpeg #7270\n  [heitbaum]\n\n10.0.1 (2023-09-15)\n-------------------\n\n- Updated libwebp to 1.3.2 #7395\n  [radarhere]\n\n- Updated zlib to 1.3 #7344\n  [radarhere]\n\n10.0.0 (2023-07-01)\n-------------------\n\n- Fixed deallocating mask images #7246\n  [radarhere]\n\n- Added ImageFont.MAX_STRING_LENGTH #7244\n  [radarhere, hugovk]\n\n- Fix Windows build with pyproject.toml #7230\n  [hugovk, nulano, radarhere]\n\n- Do not close provided file handles with libtiff #7199\n  [radarhere]\n\n- Convert to HSV if mode is HSV in getcolor() #7226\n  [radarhere]\n\n- Added alpha_only argument to getbbox() #7123\n  [radarhere. hugovk]\n\n- Prioritise speed in _repr_png_ #7242\n  [radarhere]\n\n- Do not use CFFI access by default on PyPy #7236\n  [radarhere]\n\n- Limit size even if one dimension is zero in decompression bomb check #7235\n  [radarhere]\n\n- Use --config-settings instead of deprecated --global-option #7171\n  [radarhere]\n\n- Better C integer definitions #6645\n  [Yay295, hugovk]\n\n- Fixed finding dependencies on Cygwin #7175\n  [radarhere]\n\n- Changed grabclipboard() to use PNG instead of JPG compression on macOS #7219\n  [abey79, radarhere]\n\n- Added in_place argument to ImageOps.exif_transpose() #7092\n  [radarhere]\n\n- Fixed calling putpalette() on L and LA images before load() #7187\n  [radarhere]\n\n- Fixed saving TIFF multiframe images with LONG8 tag types #7078\n  [radarhere]\n\n- Fixed combining single duration across duplicate APNG frames #7146\n  [radarhere]\n\n- Remove temporary file when error is raised #7148\n  [radarhere]\n\n- Do not use temporary file when grabbing clipboard on Linux #7200\n  [radarhere]\n\n- If the clipboard fails to open on Windows, wait and try again #7141\n  [radarhere]\n\n- Fixed saving multiple 1 mode frames to GIF #7181\n  [radarhere]\n\n- Replaced absolute PIL import with relative import #7173\n  [radarhere]\n\n- Replaced deprecated Py_FileSystemDefaultEncoding for Python >= 3.12 #7192\n  [radarhere]\n\n- Improved wl-paste mimetype handling in ImageGrab #7094\n  [rrcgat, radarhere]\n\n- Added _repr_jpeg_() for IPython display_jpeg #7135\n  [n3011, radarhere, nulano]\n\n- Use \"/sbin/ldconfig\" if ldconfig is not found #7068\n  [radarhere]\n\n- Prefer screenshots using XCB over gnome-screenshot #7143\n  [nulano, radarhere]\n\n- Fixed joined corners for ImageDraw rounded_rectangle() odd dimensions #7151\n  [radarhere]\n\n- Support reading signed 8-bit TIFF images #7111\n  [radarhere]\n\n- Added width argument to ImageDraw regular_polygon #7132\n  [radarhere]\n\n- Support I mode for ImageFilter.BuiltinFilter #7108\n  [radarhere]\n\n- Raise error from stderr of Linux ImageGrab.grabclipboard() command #7112\n  [radarhere]\n\n- Added unpacker from I;16B to I;16 #7125\n  [radarhere]\n\n- Support float font sizes #7107\n  [radarhere]\n\n- Use later value for duplicate xref entries in PdfParser #7102\n  [radarhere]\n\n- Load before getting size in __getstate__ #7105\n  [bigcat88, radarhere]\n\n- Fixed type handling for include and lib directories #7069\n  [adisbladis, radarhere]\n\n- Remove deprecations for Pillow 10.0.0 #7059, #7080\n  [hugovk, radarhere]\n\n- Drop support for soon-EOL Python 3.7 #7058\n  [hugovk, radarhere]\n\n9.5.0 (2023-04-01)\n------------------\n\n- Added ImageSourceData to TAGS_V2 #7053\n  [radarhere]\n\n- Clear PPM half token after use #7052\n  [radarhere]\n\n- Removed absolute path to ldconfig #7044\n  [radarhere]\n\n- Support custom comments and PLT markers when saving JPEG2000 images #6903\n  [joshware, radarhere, hugovk]\n\n- Load before getting size in __array_interface__ #7034\n  [radarhere]\n\n- Support creating BGR;15, BGR;16 and BGR;24 images, but drop support for BGR;32 #7010\n  [radarhere]\n\n- Consider transparency when applying APNG blend mask #7018\n  [radarhere]\n\n- Round duration when saving animated WebP images #6996\n  [radarhere]\n\n- Added reading of JPEG2000 comments #6909\n  [radarhere]\n\n- Decrement reference count #7003\n  [radarhere, nulano]\n\n- Allow libtiff_support_custom_tags to be missing #7020\n  [radarhere]\n\n- Improved I;16N support #6834\n  [radarhere]\n\n- Added QOI reading #6852\n  [radarhere, hugovk]\n\n- Added saving RGBA images as PDFs #6925\n  [radarhere]\n\n- Do not raise an error if os.environ does not contain PATH #6935\n  [radarhere, hugovk]\n\n- Close OleFileIO instance when closing or exiting FPX or MIC #7005\n  [radarhere]\n\n- Added __int__ to IFDRational for Python >= 3.11 #6998\n  [radarhere]\n\n- Added memoryview support to Dib.frombytes() #6988\n  [radarhere, nulano]\n\n- Close file pointer copy in the libtiff encoder if still open #6986\n  [fcarron, radarhere]\n\n- Raise an error if ImageDraw co-ordinates are incorrectly ordered #6978\n  [radarhere]\n\n- Added \"corners\" argument to ImageDraw rounded_rectangle() #6954\n  [radarhere]\n\n- Added memoryview support to frombytes() #6974\n  [radarhere]\n\n- Allow comments in FITS images #6973\n  [radarhere]\n\n- Support saving PDF with different X and Y resolutions #6961\n  [jvanderneutstulen, radarhere, hugovk]\n\n- Fixed writing int as UNDEFINED tag #6950\n  [radarhere]\n\n- Raise an error if EXIF data is too long when saving JPEG #6939\n  [radarhere]\n\n- Handle more than one directory returned by pkg-config #6896\n  [sebastic, radarhere]\n\n- Do not retry past formats when loading all formats for the first time #6902\n  [radarhere]\n\n- Do not retry specified formats if they failed when opening #6893\n  [radarhere]\n\n- Do not unintentionally load TIFF format at first #6892\n  [radarhere]\n\n- Stop reading when EPS line becomes too long #6897\n  [radarhere]\n\n- Allow writing IFDRational to BYTE tag #6890\n  [radarhere]\n\n- Raise ValueError for BoxBlur filter with negative radius #6874\n  [hugovk, radarhere]\n\n- Support arbitrary number of loaded modules on Windows #6761\n  [javidcf, radarhere, nulano]\n\n9.4.0 (2023-01-02)\n------------------\n\n- Fixed null pointer dereference crash with malformed font #6846\n  [wiredfool, radarhere]\n\n- Return from ImagingFill early if image has a zero dimension #6842\n  [radarhere]\n\n- Reversed deprecations for Image constants, except for duplicate Resampling attributes #6830\n  [radarhere]\n\n- Improve exception traceback readability #6836\n  [hugovk, radarhere]\n\n- Do not attempt to read IFD1 if absent #6840\n  [radarhere]\n\n- Fixed writing int as ASCII tag #6800\n  [radarhere]\n\n- If available, use wl-paste or xclip for grabclipboard() on Linux #6783\n  [radarhere]\n\n- Added signed option when saving JPEG2000 images #6709\n  [radarhere]\n\n- Patch OpenJPEG to include ARM64 fix #6718\n  [radarhere]\n\n- Added support for I;16 modes in putdata() #6825\n  [radarhere]\n\n- Added conversion from RGBa to RGB #6708\n  [radarhere]\n\n- Added DDS support for uncompressed L and LA images #6820\n  [radarhere, REDxEYE]\n\n- Added LightSource tag values to ExifTags #6749\n  [radarhere]\n\n- Fixed PyAccess after changing ICO size #6821\n  [radarhere]\n\n- Do not use EXIF from info when saving PNG images #6819\n  [radarhere]\n\n- Fixed saving EXIF data to MPO #6817\n  [radarhere]\n\n- Added Exif hide_offsets() #6762\n  [radarhere]\n\n- Only compare to previous frame when checking for duplicate GIF frames while saving #6787\n  [radarhere]\n\n- Always initialize all plugins in registered_extensions() #6811\n  [radarhere]\n\n- Ignore non-opaque WebP background when saving as GIF #6792\n  [radarhere]\n\n- Only set tile in ImageFile __setstate__ #6793\n  [radarhere]\n\n- When reading BLP, do not trust JPEG decoder to determine image is CMYK #6767\n  [radarhere]\n\n- Added IFD enum to ExifTags #6748\n  [radarhere]\n\n- Fixed bug combining GIF frame durations #6779\n  [radarhere]\n\n- Support saving JPEG comments #6774\n  [smason, radarhere]\n\n- Added getxmp() to WebPImagePlugin #6758\n  [radarhere]\n\n- Added \"exact\" option when saving WebP #6747\n  [ashafaei, radarhere]\n\n- Use fractional coordinates when drawing text #6722\n  [radarhere]\n\n- Fixed writing int as BYTE tag #6740\n  [radarhere]\n\n- Added MP Format Version when saving MPO #6735\n  [radarhere]\n\n- Added Interop to ExifTags #6724\n  [radarhere]\n\n- CVE-2007-4559 patch when building on Windows #6704\n  [TrellixVulnTeam, nulano, radarhere]\n\n- Fix compiler warning: accessing 64 bytes in a region of size 48 #6714\n  [wiredfool]\n\n- Use verbose flag for pip install #6713\n  [wiredfool, radarhere]\n\n9.3.0 (2022-10-29)\n------------------\n\n- Limit SAMPLESPERPIXEL to avoid runtime DOS #6700\n  [wiredfool]\n\n- Initialize libtiff buffer when saving #6699\n  [radarhere]\n\n- Inline fname2char to fix memory leak #6329\n  [nulano]\n\n- Fix memory leaks related to text features #6330\n  [nulano]\n\n- Use double quotes for version check on old CPython on Windows #6695\n  [hugovk]\n\n- Remove backup implementation of Round for Windows platforms #6693\n  [cgohlke]\n\n- Fixed set_variation_by_name offset #6445\n  [radarhere]\n\n- Fix malloc in _imagingft.c:font_setvaraxes #6690\n  [cgohlke]\n\n- Release Python GIL when converting images using matrix operations #6418\n  [hmaarrfk]\n\n- Added ExifTags enums #6630\n  [radarhere]\n\n- Do not modify previous frame when calculating delta in PNG #6683\n  [radarhere]\n\n- Added support for reading BMP images with RLE4 compression #6674\n  [npjg, radarhere]\n\n- Decode JPEG compressed BLP1 data in original mode #6678\n  [radarhere]\n\n- Added GPS TIFF tag info #6661\n  [radarhere]\n\n- Added conversion between RGB/RGBA/RGBX and LAB #6647\n  [radarhere]\n\n- Do not attempt normalization if mode is already normal #6644\n  [radarhere]\n\n- Fixed seeking to an L frame in a GIF #6576\n  [radarhere]\n\n- Consider all frames when selecting mode for PNG save_all #6610\n  [radarhere]\n\n- Don't reassign crc on ChunkStream close #6627\n  [wiredfool, radarhere]\n\n- Raise a warning if NumPy failed to raise an error during conversion #6594\n  [radarhere]\n\n- Show all frames in ImageShow #6611\n  [radarhere]\n\n- Allow FLI palette chunk to not be first #6626\n  [radarhere]\n\n- If first GIF frame has transparency for RGB_ALWAYS loading strategy, use RGBA mode #6592\n  [radarhere]\n\n- Round box position to integer when pasting embedded color #6517\n  [radarhere, nulano]\n\n- Removed EXIF prefix when saving WebP #6582\n  [radarhere]\n\n- Pad IM palette to 768 bytes when saving #6579\n  [radarhere]\n\n- Added DDS BC6H reading #6449\n  [ShadelessFox, REDxEYE, radarhere]\n\n- Added support for opening WhiteIsZero 16-bit integer TIFF images #6642\n  [JayWiz, radarhere]\n\n- Raise an error when allocating translucent color to RGB palette #6654\n  [jsbueno, radarhere]\n\n- Added reading of TIFF child images #6569\n  [radarhere]\n\n- Improved ImageOps palette handling #6596\n  [PososikTeam, radarhere]\n\n- Defer parsing of palette into colors #6567\n  [radarhere]\n\n- Apply transparency to P images in ImageTk.PhotoImage #6559\n  [radarhere]\n\n- Use rounding in ImageOps contain() and pad() #6522\n  [bibinhashley, radarhere]\n\n- Fixed GIF remapping to palette with duplicate entries #6548\n  [radarhere]\n\n- Allow remap_palette() to return an image with less than 256 palette entries #6543\n  [radarhere]\n\n- Corrected BMP and TGA palette size when saving #6500\n  [radarhere]\n\n- Do not call load() before draft() in Image.thumbnail #6539\n  [radarhere]\n\n- Copy palette when converting from P to PA #6497\n  [radarhere]\n\n- Allow RGB and RGBA values for PA image putpixel #6504\n  [radarhere]\n\n- Removed support for tkinter in PyPy before Python 3.6 #6551\n  [nulano]\n\n- Do not use CCITTFaxDecode filter if libtiff is not available #6518\n  [radarhere]\n\n- Fallback to not using mmap if buffer is not large enough #6510\n  [radarhere]\n\n- Fixed writing bytes as ASCII tag #6493\n  [radarhere]\n\n- Open 1 bit EPS in mode 1 #6499\n  [radarhere]\n\n- Removed support for tkinter before Python 1.5.2 #6549\n  [radarhere]\n\n- Allow default ImageDraw font to be set #6484\n  [radarhere, hugovk]\n\n- Save 1 mode PDF using CCITTFaxDecode filter #6470\n  [radarhere]\n\n- Added support for RGBA PSD images #6481\n  [radarhere]\n\n- Parse orientation from XMP tag contents #6463\n  [bigcat88, radarhere]\n\n- Added support for reading ATI1/ATI2 (BC4/BC5) DDS images #6457\n  [REDxEYE, radarhere]\n\n- Do not clear GIF tile when checking number of frames #6455\n  [radarhere]\n\n- Support saving multiple MPO frames #6444\n  [radarhere]\n\n- Do not double quote Pillow version for setuptools >= 60 #6450\n  [radarhere]\n\n- Added ABGR BMP mask mode #6436\n  [radarhere]\n\n- Fixed PSDraw rectangle #6429\n  [radarhere]\n\n- Raise ValueError if PNG sRGB chunk is truncated #6431\n  [radarhere]\n\n- Handle missing Python executable in ImageShow on macOS #6416\n  [bryant1410, radarhere]\n\n9.2.0 (2022-07-01)\n------------------\n\n- Deprecate ImageFont.getsize and related functions #6381\n  [nulano, radarhere]\n\n- Fixed null check for fribidi_version_info in FriBiDi shim #6376\n  [nulano]\n\n- Added GIF decompression bomb check #6402\n  [radarhere]\n\n- Handle PCF fonts files with less than 256 characters #6386\n  [dawidcrivelli, radarhere]\n\n- Improved GIF optimize condition #6378\n  [raygard, radarhere]\n\n- Reverted to __array_interface__ with the release of NumPy 1.23 #6394\n  [radarhere]\n\n- Pad PCX palette to 768 bytes when saving #6391\n  [radarhere]\n\n- Fixed bug with rounding pixels to palette colors #6377\n  [btrekkie, radarhere]\n\n- Use gnome-screenshot on Linux if available #6361\n  [radarhere, nulano]\n\n- Fixed loading L mode BMP RLE8 images #6384\n  [radarhere]\n\n- Fixed incorrect operator in ImageCms error #6370\n  [LostBenjamin, hugovk, radarhere]\n\n- Limit FPX tile size to avoid extending outside image #6368\n  [radarhere]\n\n- Added support for decoding plain PPM formats #5242\n  [Piolie, radarhere]\n\n- Added apply_transparency() #6352\n  [radarhere]\n\n- Fixed behaviour change from endian fix #6197\n  [radarhere]\n\n- Allow remapping P images with RGBA palettes #6350\n  [radarhere]\n\n- Fixed drawing translucent 1px high polygons #6278\n  [radarhere]\n\n- Pad COLORMAP to 768 items when saving TIFF #6232\n  [radarhere]\n\n- Fix P -> PA conversion #6337\n  [RedShy, radarhere]\n\n- Once exif data is parsed, do not reload unless it changes #6335\n  [radarhere]\n\n- Only try to connect discontiguous corners at the end of edges #6303\n  [radarhere]\n\n- Improve transparency handling when saving GIF images #6176\n  [radarhere]\n\n- Do not update GIF frame position until local image is found #6219\n  [radarhere]\n\n- Netscape GIF extension belongs after the global color table #6211\n  [radarhere]\n\n- Only write GIF comments at the beginning of the file #6300\n  [raygard, radarhere]\n\n- Separate multiple GIF comment blocks with newlines #6294\n  [raygard, radarhere]\n\n- Always use GIF89a for comments #6292\n  [raygard, radarhere]\n\n- Ignore compression value from BMP info dictionary when saving as TIFF #6231\n  [radarhere]\n\n- If font is file-like object, do not re-read from object to get variant #6234\n  [radarhere]\n\n- Raise ValueError when trying to access internal fp after close #6213\n  [radarhere]\n\n- Support more affine expression forms in im.point() #6254\n  [benrg, radarhere]\n\n- Populate Python palette in fromarray() #6283\n  [radarhere]\n\n- Raise ValueError if PNG chunks are truncated #6253\n  [radarhere]\n\n- Use durations from each frame by default when saving GIFs #6265\n  [radarhere]\n\n- Adjust BITSPERSAMPLE to match SAMPLESPERPIXEL when opening TIFFs #6270\n  [radarhere]\n\n- Search pkgconf system libs/cflags #6138\n  [jameshilliard, radarhere]\n\n- Raise ValueError for invalid PPM maxval #6242\n  [radarhere]\n\n- Corrected screencapture argument in ImageGrab.grab() #6244\n  [axt-one]\n\n- Deprecate support for Qt 5 (PyQt5 and PySide2) #6237\n  [hugovk, radarhere]\n\n- Increase wait time of temporary file deletion on Windows #6224\n  [AlexTedeschi]\n\n- Deprecate FreeTypeFont.getmask2 fill parameter #6220\n  [nulano, radarhere, hugovk]\n\n- Round lut values where necessary #6188\n  [radarhere]\n\n- Load before getting size in resize() #6190\n  [radarhere]\n\n- Load image before performing size calculations in thumbnail() #6186\n  [radarhere]\n\n- Deprecated PhotoImage.paste() box parameter #6178\n  [radarhere]\n\n9.1.1 (2022-05-17)\n------------------\n\n- When reading past the end of a TGA scan line, reduce bytes left. CVE-2022-30595\n  [radarhere]\n\n- Do not open images with zero or negative height #6269\n  [radarhere]\n\n9.1.0 (2022-04-01)\n------------------\n\n- Add support for multiple component transformation to JPEG2000 #5500\n  [scaramallion, radarhere, hugovk]\n\n- Fix loading FriBiDi on Alpine #6165\n  [nulano]\n\n- Added setting for converting GIF P frames to RGB #6150\n  [radarhere]\n\n- Allow 1 mode images to be inverted #6034\n  [radarhere]\n\n- Raise ValueError when trying to save empty JPEG #6159\n  [radarhere]\n\n- Always save TIFF with contiguous planar configuration #5973\n  [radarhere]\n\n- Connected discontiguous polygon corners #5980\n  [radarhere]\n\n- Ensure Tkinter hook is activated for getimage() #6032\n  [radarhere]\n\n- Use screencapture arguments to crop on macOS #6152\n  [radarhere]\n\n- Do not mark L mode JPEG as 1 bit in PDF #6151\n  [radarhere]\n\n- Added support for reading I;16R TIFF images #6132\n  [radarhere]\n\n- If an error occurs after creating a file, remove the file #6134\n  [radarhere]\n\n- Fixed calling DisplayViewer or XVViewer without a title #6136\n  [radarhere]\n\n- Retain RGBA transparency when saving multiple GIF frames #6128\n  [radarhere]\n\n- Save additional ICO frames with other bit depths if supplied #6122\n  [radarhere]\n\n- Handle EXIF data truncated to just the header #6124\n  [radarhere]\n\n- Added support for reading BMP images with RLE8 compression #6102\n  [radarhere]\n\n- Support Python distributions where _tkinter is compiled in #6006\n  [lukegb]\n\n- Added support for PPM arbitrary maxval #6119\n  [radarhere]\n\n- Added BigTIFF reading #6097\n  [radarhere]\n\n- When converting, clip I;16 to be unsigned, not signed #6112\n  [radarhere]\n\n- Fixed loading L mode GIF with transparency #6086\n  [radarhere]\n\n- Improved handling of PPM header #5121\n  [Piolie, radarhere]\n\n- Reset size when seeking away from \"Large Thumbnail\" MPO frame #6101\n  [radarhere]\n\n- Replace requirements.txt with extras #6072\n  [hugovk, radarhere]\n\n- Added PyEncoder and support BLP saving #6069\n  [radarhere]\n\n- Handle TGA images with packets that cross scan lines #6087\n  [radarhere]\n\n- Added FITS reading #6056\n  [radarhere, hugovk]\n\n- Added rawmode argument to Image.getpalette() #6061\n  [radarhere]\n\n- Fixed BUFR, GRIB and HDF5 stub saving #6071\n  [radarhere]\n\n- Do not automatically remove temporary ImageShow files on Unix #6045\n  [radarhere]\n\n- Correctly read JPEG compressed BLP images #4685\n  [Meithal, radarhere]\n\n- Merged _MODE_CONV typ into ImageMode as typestr #6057\n  [radarhere]\n\n- Consider palette size when converting and in getpalette() #6060\n  [radarhere]\n\n- Added enums #5954\n  [radarhere]\n\n- Ensure image is opaque after converting P to PA with RGB palette #6052\n  [radarhere]\n\n- Attach RGBA palettes from putpalette() when suitable #6054\n  [radarhere]\n\n- Added get_photoshop_blocks() to parse Photoshop TIFF tag #6030\n  [radarhere]\n\n- Drop excess values in BITSPERSAMPLE #6041\n  [mikhail-iurkov]\n\n- Added unpacker from RGBA;15 to RGB #6031\n  [radarhere]\n\n- Enable arm64 for MSVC on Windows #5811\n  [gaborkertesz-linaro, gaborkertesz]\n\n- Keep IPython/Jupyter text/plain output stable #5891\n  [shamrin, radarhere]\n\n- Raise an error when performing a negative crop #5972\n  [radarhere, hugovk]\n\n- Deprecated show_file \"file\" argument in favour of \"path\" #5959\n  [radarhere]\n\n- Fixed SPIDER images for use with Bio-formats library #5956\n  [radarhere]\n\n- Ensure duplicated file pointer is closed #5946\n  [radarhere]\n\n- Added specific error if path coordinate type is incorrect #5942\n  [radarhere]\n\n- Return an empty bytestring from tobytes() for an empty image #5938\n  [radarhere]\n\n- Remove readonly from Image.__eq__ #5930\n  [hugovk]\n\n9.0.1 (2022-02-03)\n------------------\n\n- In show_file, use os.remove to remove temporary images. CVE-2022-24303 #6010\n  [radarhere, hugovk]\n\n- Restrict builtins within lambdas for ImageMath.eval. CVE-2022-22817 #6009\n  [radarhere]\n\n9.0.0 (2022-01-02)\n------------------\n\n- Restrict builtins for ImageMath.eval(). CVE-2022-22817 #5923\n  [radarhere]\n\n- Ensure JpegImagePlugin stops at the end of a truncated file #5921\n  [radarhere]\n\n- Fixed ImagePath.Path array handling. CVE-2022-22815, CVE-2022-22816 #5920\n  [radarhere]\n\n- Remove consecutive duplicate tiles that only differ by their offset #5919\n  [radarhere]\n\n- Improved I;16 operations on big endian #5901\n  [radarhere]\n\n- Limit quantized palette to number of colors #5879\n  [radarhere]\n\n- Fixed palette index for zeroed color in FASTOCTREE quantize #5869\n  [radarhere]\n\n- When saving RGBA to GIF, make use of first transparent palette entry #5859\n  [radarhere]\n\n- Pass SAMPLEFORMAT to libtiff #5848\n  [radarhere]\n\n- Added rounding when converting P and PA #5824\n  [radarhere]\n\n- Improved putdata() documentation and data handling #5910\n  [radarhere]\n\n- Exclude carriage return in PDF regex to help prevent ReDoS #5912\n  [hugovk]\n\n- Fixed freeing pointer in ImageDraw.Outline.transform #5909\n  [radarhere]\n\n- Added ImageShow support for xdg-open #5897\n  [m-shinder, radarhere]\n\n- Support 16-bit grayscale ImageQt conversion #5856\n  [cmbruns, radarhere]\n\n- Convert subsequent GIF frames to RGB or RGBA #5857\n  [radarhere]\n\n- Do not prematurely return in ImageFile when saving to stdout #5665\n  [infmagic2047, radarhere]\n\n- Added support for top right and bottom right TGA orientations #5829\n  [radarhere]\n\n- Corrected ICNS file length in header #5845\n  [radarhere]\n\n- Block tile TIFF tags when saving #5839\n  [radarhere]\n\n- Added line width argument to polygon #5694\n  [radarhere]\n\n- Do not redeclare class each time when converting to NumPy #5844\n  [radarhere]\n\n- Only prevent repeated polygon pixels when drawing with transparency #5835\n  [radarhere]\n\n- Add support for pickling TrueType fonts #5826\n  [hugovk, radarhere]\n\n- Only prefer command line tools SDK on macOS over default MacOSX SDK #5828\n  [radarhere]\n\n- Drop support for soon-EOL Python 3.6 #5768\n  [hugovk, nulano, radarhere]\n\n- Fix compilation on 64-bit Termux #5793\n  [landfillbaby]\n\n- Use title for display in ImageShow #5788\n  [radarhere]\n\n- Remove support for FreeType 2.7 and older #5777\n  [hugovk, radarhere]\n\n- Fix for PyQt6 #5775\n  [hugovk, radarhere]\n\n- Removed deprecated PILLOW_VERSION, Image.show command parameter, Image._showxv and ImageFile.raise_ioerror #5776\n  [radarhere]\n\n8.4.0 (2021-10-15)\n------------------\n\n- Prefer global transparency in GIF when replacing with background color #5756\n  [radarhere]\n\n- Added \"exif\" keyword argument to TIFF saving #5575\n  [radarhere]\n\n- Copy Python palette to new image in quantize() #5696\n  [radarhere]\n\n- Read ICO AND mask from end #5667\n  [radarhere]\n\n- Actually check the framesize in FliDecode.c #5659\n  [wiredfool]\n\n- Determine JPEG2000 mode purely from ihdr header box #5654\n  [radarhere]\n\n- Fixed using info dictionary when writing multiple APNG frames #5611\n  [radarhere]\n\n- Allow saving 1 and L mode TIFF with PhotometricInterpretation 0 #5655\n  [radarhere]\n\n- For GIF save_all with palette, do not include palette with each frame #5603\n  [radarhere]\n\n- Keep transparency when converting from P to LA or PA #5606\n  [radarhere]\n\n- Copy palette to new image in transform() #5647\n  [radarhere]\n\n- Added \"transparency\" argument to EpsImagePlugin load() #5620\n  [radarhere]\n\n- Corrected pathlib.Path detection when saving #5633\n  [radarhere]\n\n- Added WalImageFile class #5618\n  [radarhere]\n\n- Consider I;16 pixel size when drawing text #5598\n  [radarhere]\n\n- If default conversion from P is RGB with transparency, convert to RGBA #5594\n  [radarhere]\n\n- Speed up rotating square images by 90 or 270 degrees #5646\n  [radarhere]\n\n- Add support for reading DPI information from JPEG2000 images\n  [rogermb, radarhere]\n\n- Catch TypeError from corrupted DPI value in EXIF #5639\n  [homm, radarhere]\n\n- Do not close file pointer when saving SGI images #5645\n  [farizrahman4u, radarhere]\n\n- Deprecate ImagePalette size parameter #5641\n  [radarhere, hugovk]\n\n- Prefer command line tools SDK on macOS #5624\n  [radarhere]\n\n- Added tags when saving YCbCr TIFF #5597\n  [radarhere]\n\n- PSD layer count may be negative #5613\n  [radarhere]\n\n- Fixed ImageOps expand with tuple border on P image #5615\n  [radarhere]\n\n- Fixed error saving APNG with duplicate frames and different duration times #5609\n  [thak1411, radarhere]\n\n8.3.2 (2021-09-02)\n------------------\n\n- CVE-2021-23437 Raise ValueError if color specifier is too long\n  [hugovk, radarhere]\n\n- Fix 6-byte OOB read in FliDecode\n  [wiredfool]\n\n- Add support for Python 3.10 #5569, #5570\n  [hugovk, radarhere]\n\n- Ensure TIFF ``RowsPerStrip`` is multiple of 8 for JPEG compression #5588\n  [kmilos, radarhere]\n\n- Updates for ``ImagePalette`` channel order #5599\n  [radarhere]\n\n- Hide FriBiDi shim symbols to avoid conflict with real FriBiDi library #5651\n  [nulano]\n\n8.3.1 (2021-07-06)\n------------------\n\n- Catch OSError when checking if fp is sys.stdout #5585\n  [radarhere]\n\n- Handle removing orientation from alternate types of EXIF data #5584\n  [radarhere]\n\n- Make Image.__array__ take optional dtype argument #5572\n  [t-vi, radarhere]\n\n8.3.0 (2021-07-01)\n------------------\n\n- Use snprintf instead of sprintf. CVE-2021-34552 #5567\n  [radarhere]\n\n- Limit TIFF strip size when saving with LibTIFF #5514\n  [kmilos]\n\n- Allow ICNS save on all operating systems #4526\n  [baletu, radarhere, newpanjing, hugovk]\n\n- De-zigzag JPEG's DQT when loading; deprecate convert_dict_qtables #4989\n  [gofr, radarhere]\n\n- Replaced xml.etree.ElementTree #5565\n  [radarhere]\n\n- Moved CVE image to pillow-depends #5561\n  [radarhere]\n\n- Added tag data for IFD groups #5554\n  [radarhere]\n\n- Improved ImagePalette #5552\n  [radarhere]\n\n- Add DDS saving #5402\n  [radarhere]\n\n- Improved getxmp() #5455\n  [radarhere]\n\n- Convert to float for comparison with float in IFDRational __eq__ #5412\n  [radarhere]\n\n- Allow getexif() to access TIFF tag_v2 data #5416\n  [radarhere]\n\n- Read FITS image mode and size #5405\n  [radarhere]\n\n- Merge parallel horizontal edges in ImagingDrawPolygon #5347\n  [radarhere, hrdrq]\n\n- Use transparency behind first GIF frame and when disposing to background #5557\n  [radarhere, zewt]\n\n- Avoid unstable nature of qsort in Quant.c #5367\n  [radarhere]\n\n- Copy palette to new images in ImageOps expand #5551\n  [radarhere]\n\n- Ensure palette string matches RGB mode #5549\n  [radarhere]\n\n- Do not modify EXIF of original image instance in exif_transpose() #5547\n  [radarhere]\n\n- Fixed default numresolution for small JPEG2000 images #5540\n  [radarhere]\n\n- Added DDS BC5 reading #5501\n  [radarhere]\n\n- Raise an error if ImageDraw.textbbox is used without a TrueType font #5510\n  [radarhere]\n\n- Added ICO saving in BMP format #5513\n  [radarhere]\n\n- Ensure PNG seeks to end of previous chunk at start of load_end #5493\n  [radarhere]\n\n- Do not allow TIFF to seek to a past frame #5473\n  [radarhere]\n\n- Avoid race condition when displaying images with eog #5507\n  [mconst]\n\n- Added specific error messages when ink has incorrect number of bands #5504\n  [radarhere]\n\n- Allow converting an image to a numpy array to raise errors #5379\n  [radarhere]\n\n- Removed DPI rounding from BMP, JPEG, PNG and WMF loading #5476, #5470\n  [radarhere]\n\n- Remove spikes when drawing thin pieslices #5460\n  [xtsm]\n\n- Updated default value for SAMPLESPERPIXEL TIFF tag #5452\n  [radarhere]\n\n- Removed TIFF DPI rounding #5446\n  [radarhere, hugovk]\n\n- Include code in WebP error #5471\n  [radarhere]\n\n- Do not alter pixels outside mask when drawing text on an image with transparency #5434\n  [radarhere]\n\n- Reset handle when seeking backwards in TIFF #5443\n  [radarhere]\n\n- Replace sys.stdout with sys.stdout.buffer when saving #5437\n  [radarhere]\n\n- Fixed UNDEFINED TIFF tag of length 0 being changed in roundtrip #5426\n  [radarhere]\n\n- Fixed bug when checking FreeType2 version if it is not installed #5445\n  [radarhere]\n\n- Do not round dimensions when saving PDF #5459\n  [radarhere]\n\n- Added ImageOps contain() #5417\n  [radarhere, hugovk]\n\n- Changed WebP default \"method\" value to 4 #5450\n  [radarhere]\n\n- Switched to saving 1-bit PDFs with DCTDecode #5430\n  [radarhere]\n\n- Use bpp from ICO header #5429\n  [radarhere]\n\n- Corrected JPEG APP14 transform value #5408\n  [radarhere]\n\n- Changed TIFF tag 33723 length to 1 #5425\n  [radarhere]\n\n- Changed ImageMorph incorrect mode errors to ValueError #5414\n  [radarhere]\n\n- Add EXIF tags specified in EXIF 2.32 #5419\n  [gladiusglad]\n\n- Treat previous contents of first GIF frame as transparent #5391\n  [radarhere]\n\n- For special image modes, revert default resize resampling to NEAREST #5411\n  [radarhere]\n\n- JPEG2000: Support decoding subsampled RGB and YCbCr images #4996\n  [nulano, radarhere]\n\n- Stop decoding BC1 punchthrough alpha in BC2&3 #4144\n  [jansol]\n\n- Use zero if GIF background color index is missing #5390\n  [radarhere]\n\n- Fixed ensuring that GIF previous frame was loaded #5386\n  [radarhere]\n\n- Valgrind fixes #5397\n  [wiredfool]\n\n- Round down the radius in rounded_rectangle #5382\n  [radarhere]\n\n- Fixed reading uncompressed RGB data from DDS #5383\n  [radarhere]\n\n8.2.0 (2021-04-01)\n------------------\n\n- Added getxmp() method #5144\n  [UrielMaD, radarhere]\n\n- Add ImageShow support for GraphicsMagick #5349\n  [latosha-maltba, radarhere]\n\n- Do not load transparent pixels from subsequent GIF frames #5333\n  [zewt, radarhere]\n\n- Use LZW encoding when saving GIF images #5291\n  [raygard]\n\n- Set all transparent colors to be equal in quantize() #5282\n  [radarhere]\n\n- Allow PixelAccess to use Python __int__ when parsing x and y #5206\n  [radarhere]\n\n- Removed Image._MODEINFO #5316\n  [radarhere]\n\n- Add preserve_tone option to autocontrast #5350\n  [elejke, radarhere]\n\n- Fixed linear_gradient and radial_gradient I and F modes #5274\n  [radarhere]\n\n- Add support for reading TIFFs with PlanarConfiguration=2 #5364\n  [kkopachev, wiredfool, nulano]\n\n- Deprecated categories #5351\n  [radarhere]\n\n- Do not premultiply alpha when resizing with Image.NEAREST resampling #5304\n  [nulano]\n\n- Dynamically link FriBiDi instead of Raqm #5062\n  [nulano]\n\n- Allow fewer PNG palette entries than the bit depth maximum when saving #5330\n  [radarhere]\n\n- Use duration from info dictionary when saving WebP #5338\n  [radarhere]\n\n- Stop flattening EXIF IFD into getexif() #4947\n  [radarhere, kkopachev]\n\n- Replaced tiff_deflate with tiff_adobe_deflate compression when saving TIFF images #5343\n  [radarhere]\n\n- Save ICC profile from TIFF encoderinfo #5321\n  [radarhere]\n\n- Moved RGB fix inside ImageQt class #5268\n  [radarhere]\n\n- Allow alpha_composite destination to be negative #5313\n  [radarhere]\n\n- Ensure file is closed if it is opened by ImageQt.ImageQt #5260\n  [radarhere]\n\n- Added ImageDraw rounded_rectangle method #5208\n  [radarhere]\n\n- Added IPythonViewer #5289\n  [radarhere, Kipkurui-mutai]\n\n- Only draw each rectangle outline pixel once #5183\n  [radarhere]\n\n- Use mmap instead of built-in Win32 mapper #5224\n  [radarhere, cgohlke]\n\n- Handle PCX images with an odd stride #5214\n  [radarhere]\n\n- Only read different sizes for \"Large Thumbnail\" MPO frames #5168\n  [radarhere]\n\n- Added PyQt6 support #5258\n  [radarhere]\n\n- Changed Image.open formats parameter to be case-insensitive #5250\n  [Piolie, radarhere]\n\n- Deprecate Tk/Tcl 8.4, to be removed in Pillow 10 (2023-07-01) #5216\n  [radarhere]\n\n- Added tk version to pilinfo #5226\n  [radarhere, nulano]\n\n- Support for ignoring tests when running valgrind #5150\n  [wiredfool, radarhere, hugovk]\n\n- OSS-Fuzz support #5189\n  [wiredfool, radarhere]\n\n8.1.2 (2021-03-06)\n------------------\n\n- Fix Memory DOS in BLP (CVE-2021-27921), ICNS (CVE-2021-27922) and ICO (CVE-2021-27923) Image Plugins\n  [wiredfool]\n\n8.1.1 (2021-03-01)\n------------------\n\n- Use more specific regex chars to prevent ReDoS. CVE-2021-25292\n  [hugovk]\n\n- Fix OOB Read in TiffDecode.c, and check the tile validity before reading. CVE-2021-25291\n  [wiredfool]\n\n- Fix negative size read in TiffDecode.c. CVE-2021-25290\n  [wiredfool]\n\n- Fix OOB read in SgiRleDecode.c. CVE-2021-25293\n  [wiredfool]\n\n- Incorrect error code checking in TiffDecode.c. CVE-2021-25289\n  [wiredfool]\n\n- PyModule_AddObject fix for Python 3.10 #5194\n  [radarhere]\n\n8.1.0 (2021-01-02)\n------------------\n\n- Fix TIFF OOB Write error. CVE-2020-35654 #5175\n  [wiredfool]\n\n- Fix for Read Overflow in PCX Decoding. CVE-2020-35653 #5174\n  [wiredfool, radarhere]\n\n- Fix for SGI Decode buffer overrun. CVE-2020-35655 #5173\n  [wiredfool, radarhere]\n\n- Fix OOB Read when saving GIF of xsize=1 #5149\n  [wiredfool]\n\n- Makefile updates #5159\n  [wiredfool, radarhere]\n\n- Add support for PySide6 #5161\n  [hugovk]\n\n- Use disposal settings from previous frame in APNG #5126\n  [radarhere]\n\n- Added exception explaining that _repr_png_ saves to PNG #5139\n  [radarhere]\n\n- Use previous disposal method in GIF load_end #5125\n  [radarhere]\n\n- Allow putpalette to accept 1024 integers to include alpha values #5089\n  [radarhere]\n\n- Fix OOB Read when writing TIFF with custom Metadata #5148\n  [wiredfool]\n\n- Added append_images support for ICO #4568\n  [ziplantil, radarhere]\n\n- Block TIFFTAG_SUBIFD #5120\n  [radarhere]\n\n- Fixed dereferencing potential null pointers #5108, #5111\n  [cgohlke, radarhere]\n\n- Deprecate FreeType 2.7 #5098\n  [hugovk, radarhere]\n\n- Moved warning to end of execution #4965\n  [radarhere]\n\n- Removed unused fromstring and tostring C methods #5026\n  [radarhere]\n\n- init() if one of the formats is unrecognised #5037\n  [radarhere]\n\n- Moved string_dimension CVE image to pillow-depends #4993\n  [radarhere]\n\n- Support raw rgba8888 for DDS #4760\n  [qiankanglai]\n\n8.0.1 (2020-10-22)\n------------------\n\n- Update FreeType used in binary wheels to 2.10.4 to fix CVE-2020-15999.\n  [radarhere]\n\n- Moved string_dimension image to pillow-depends #4993\n  [radarhere]\n\n8.0.0 (2020-10-15)\n------------------\n\n- Drop support for EOL Python 3.5 #4746, #4794\n  [hugovk, radarhere, nulano]\n\n- Drop support for PyPy3 < 7.2.0 #4964\n  [nulano]\n\n- Remove ImageCms.CmsProfile attributes deprecated since 3.2.0 #4768\n  [hugovk, radarhere]\n\n- Remove long-deprecated Image.py functions #4798\n  [hugovk, nulano, radarhere]\n\n- Add support for 16-bit precision JPEG quantization values #4918\n  [gofr]\n\n- Added reading of IFD tag type #4979\n  [radarhere]\n\n- Initialize offset memory for PyImagingPhotoPut #4806\n  [nqbit]\n\n- Fix TiffDecode comparison warnings #4756\n  [nulano]\n\n- Docs: Add dark mode #4968\n  [hugovk, nulano]\n\n- Added macOS SDK install path to library and include directories #4974\n  [radarhere, fxcoudert]\n\n- Imaging.h: prevent confusion with system #4923\n  [ax3l, ,radarhere]\n\n- Avoid using pkg_resources in PIL.features.pilinfo #4975\n  [nulano]\n\n- Add getlength and getbbox functions for TrueType fonts #4959\n  [nulano, radarhere, hugovk]\n\n- Allow tuples with one item to give single color value in getink #4927\n  [radarhere, nulano]\n\n- Add support for CBDT and COLR fonts #4955\n  [nulano, hugovk]\n\n- Removed OSError in favour of DecompressionBombError for BMP #4966\n  [radarhere]\n\n- Implemented another ellipse drawing algorithm #4523\n  [xtsm, radarhere]\n\n- Removed unused JpegImagePlugin._fixup_dict function #4957\n  [radarhere]\n\n- Added reading and writing of private PNG chunks #4292\n  [radarhere]\n\n- Implement anchor for TrueType fonts #4930\n  [nulano, hugovk]\n\n- Fixed bug in Exif __delitem__ #4942\n  [radarhere]\n\n- Fix crash in ImageTk.PhotoImage on MinGW 64-bit #4946\n  [nulano]\n\n- Moved CVE images to pillow-depends #4929\n  [radarhere]\n\n- Refactor font_getsize and font_render #4910\n  [nulano]\n\n- Fixed loading profile with non-ASCII path on Windows #4914\n  [radarhere]\n\n- Fixed effect_spread bug for zero distance #4908\n  [radarhere, hugovk]\n\n- Added formats parameter to Image.open #4837\n  [nulano, radarhere]\n\n- Added regular_polygon draw method #4846\n  [comhar]\n\n- Raise proper TypeError in putpixel #4882\n  [nulano, hugovk]\n\n- Added writing of subIFDs #4862\n  [radarhere]\n\n- Fix IFDRational __eq__ bug #4888\n  [luphord, radarhere]\n\n- Fixed duplicate variable name #4885\n  [liZe, radarhere]\n\n- Added homebrew zlib include directory #4842\n  [radarhere]\n\n- Corrected inverted PDF CMYK colors #4866\n  [radarhere]\n\n- Do not try to close file pointer if file pointer is empty #4823\n  [radarhere]\n\n- ImageOps.autocontrast: add mask parameter #4843\n  [navneeth, hugovk]\n\n- Read EXIF data tEXt chunk into info as bytes instead of string #4828\n  [radarhere]\n\n- Replaced distutils with setuptools #4797, #4809, #4814, #4817, #4829, #4890\n  [hugovk, radarhere]\n\n- Add MIME type to PsdImagePlugin #4788\n  [samamorgan]\n\n- Allow ImageOps.autocontrast to specify low and high cutoffs separately #4749\n  [millionhz, radarhere]\n\n7.2.0 (2020-07-01)\n------------------\n\n- Do not convert I;16 images when showing PNGs #4744\n  [radarhere]\n\n- Fixed ICNS file pointer saving #4741\n  [radarhere]\n\n- Fixed loading non-RGBA mode APNGs with dispose background #4742\n  [radarhere]\n\n- Deprecated _showxv #4714\n  [radarhere]\n\n- Deprecate Image.show(command=\"...\") #4646\n  [nulano, hugovk, radarhere]\n\n- Updated JPEG magic number #4707\n  [Cykooz, radarhere]\n\n- Change STRIPBYTECOUNTS to LONG if necessary when saving #4626\n  [radarhere, hugovk]\n\n- Write JFIF header when saving JPEG #4639\n  [radarhere]\n\n- Replaced tiff_jpeg with jpeg compression when saving TIFF images #4627\n  [radarhere]\n\n- Writing TIFF tags: improved BYTE, added UNDEFINED #4605\n  [radarhere]\n\n- Consider transparency when pasting text on an RGBA image #4566\n  [radarhere]\n\n- Added method argument to single frame WebP saving #4547\n  [radarhere]\n\n- Use ImageFileDirectory_v2 in Image.Exif #4637\n  [radarhere]\n\n- Corrected reading EXIF metadata without prefix #4677\n  [radarhere]\n\n- Fixed drawing a jointed line with a sequence of numeric values #4580\n  [radarhere]\n\n- Added support for 1-D NumPy arrays #4608\n  [radarhere]\n\n- Parse orientation from XMP tags #4560\n  [radarhere]\n\n- Speed up text layout by not rendering glyphs #4652\n  [nulano]\n\n- Fixed ZeroDivisionError in Image.thumbnail #4625\n  [radarhere]\n\n- Replaced TiffImagePlugin DEBUG with logging #4550\n  [radarhere]\n\n- Fix repeatedly loading .gbr #4620\n  [ElinksFr, radarhere]\n\n- JPEG: Truncate icclist instead of setting to None #4613\n  [homm]\n\n- Fixes default offset for Exif #4594\n  [rodrigob, radarhere]\n\n- Fixed bug when unpickling TIFF images #4565\n  [radarhere]\n\n- Fix pickling WebP #4561\n  [hugovk, radarhere]\n\n- Replace IOError and WindowsError aliases with OSError #4536\n  [hugovk, radarhere]\n\n7.1.2 (2020-04-25)\n------------------\n\n- Raise an EOFError when seeking too far in PNG #4528\n  [radarhere]\n\n7.1.1 (2020-04-02)\n------------------\n\n- Fix regression seeking and telling PNGs #4512 #4514\n  [hugovk, radarhere]\n\n7.1.0 (2020-04-01)\n------------------\n\n- Fix multiple OOB reads in FLI decoding #4503\n  [wiredfool]\n\n- Fix buffer overflow in SGI-RLE decoding #4504\n  [wiredfool, hugovk]\n\n- Fix bounds overflow in JPEG 2000 decoding #4505\n  [wiredfool]\n\n- Fix bounds overflow in PCX decoding #4506\n  [wiredfool]\n\n- Fix 2 buffer overflows in TIFF decoding #4507\n  [wiredfool]\n\n- Add APNG support #4243\n  [pmrowla, radarhere, hugovk]\n\n- ImageGrab.grab() for Linux with XCB #4260\n  [nulano, radarhere]\n\n- Added three new channel operations #4230\n  [dwastberg, radarhere]\n\n- Prevent masking of Image reduce method in Jpeg2KImagePlugin #4474\n  [radarhere, homm]\n\n- Added reading of earlier ImageMagick PNG EXIF data #4471\n  [radarhere]\n\n- Fixed endian handling for I;16 getextrema #4457\n  [radarhere]\n\n- Release buffer if function returns prematurely #4381\n  [radarhere]\n\n- Add JPEG comment to info dictionary #4455\n  [radarhere]\n\n- Fix size calculation of Image.thumbnail() #4404\n  [orlnub123]\n\n- Fixed stroke on FreeType < 2.9 #4401\n  [radarhere]\n\n- If present, only use alpha channel for bounding box #4454\n  [radarhere]\n\n- Warn if an unknown feature is passed to features.check() #4438\n  [jdufresne]\n\n- Fix Name field length when saving IM images #4424\n  [hugovk, radarhere]\n\n- Allow saving of zero quality JPEG images #4440\n  [radarhere]\n\n- Allow explicit zero width to hide outline #4334\n  [radarhere]\n\n- Change ContainerIO return type to match file object mode #4297\n  [jdufresne, radarhere]\n\n- Only draw each polygon pixel once #4333\n  [radarhere]\n\n- Add support for shooting situation Exif IFD tags #4398\n  [alexagv]\n\n- Handle multiple and malformed JPEG APP13 markers #4370\n  [homm]\n\n- Depends: Update libwebp to 1.1.0 #4342, libjpeg to 9d #4352\n  [radarhere]\n\n7.0.0 (2020-01-02)\n------------------\n\n- Drop support for EOL Python 2.7 #4109\n  [hugovk, radarhere, jdufresne]\n\n- Fix rounding error on RGB to L conversion #4320\n  [homm]\n\n- Exif writing fixes: Rational boundaries and signed/unsigned types #3980\n  [kkopachev, radarhere]\n\n- Allow loading of WMF images at a given DPI #4311\n  [radarhere]\n\n- Added reduce operation #4251\n  [homm]\n\n- Raise ValueError for io.StringIO in Image.open #4302\n  [radarhere, hugovk]\n\n- Fix thumbnail geometry when DCT scaling is used #4231\n  [homm, radarhere]\n\n- Use default DPI when exif provides invalid x_resolution #4147\n  [beipang2, radarhere]\n\n- Change default resize resampling filter from NEAREST to BICUBIC #4255\n  [homm]\n\n- Fixed black lines on upscaled images with the BOX filter #4278\n  [homm]\n\n- Better thumbnail aspect ratio preservation #4256\n  [homm]\n\n- Add La mode packing and unpacking #4248\n  [homm]\n\n- Include tests in coverage reports #4173\n  [hugovk]\n\n- Handle broken Photoshop data #4239\n  [radarhere]\n\n- Raise a specific exception if no data is found for an MPO frame #4240\n  [radarhere]\n\n- Fix Unicode support for PyPy #4145\n  [nulano]\n\n- Added UnidentifiedImageError #4182\n  [radarhere, hugovk]\n\n- Remove deprecated __version__ from plugins #4197\n  [hugovk, radarhere]\n\n- Fixed freeing unallocated pointer when resizing with height too large #4116\n  [radarhere]\n\n- Copy info in Image.transform #4128\n  [radarhere]\n\n- Corrected DdsImagePlugin setting info gamma #4171\n  [radarhere]\n\n- Depends: Update libtiff to 4.1.0 #4195, Tk Tcl to 8.6.10 #4229, libimagequant to 2.12.6 #4318\n  [radarhere]\n\n- Improve handling of file resources #3577\n  [jdufresne]\n\n- Removed CI testing of Fedora 29 #4165\n  [hugovk]\n\n- Added pypy3 to tox envlist #4137\n  [jdufresne]\n\n- Drop support for EOL PyQt4 and PySide #4108\n  [hugovk, radarhere]\n\n- Removed deprecated setting of TIFF image sizes #4114\n  [radarhere]\n\n- Removed deprecated PILLOW_VERSION #4107\n  [hugovk]\n\n- Changed default frombuffer raw decoder args #1730\n  [radarhere]\n\n6.2.2 (2020-01-02)\n------------------\n\n- This is the last Pillow release to support Python 2.7 #3642\n\n- Overflow checks for realloc for tiff decoding. CVE-2020-5310\n  [wiredfool, radarhere]\n\n- Catch SGI buffer overrun. CVE-2020-5311\n  [radarhere]\n\n- Catch PCX P mode buffer overrun. CVE-2020-5312\n  [radarhere]\n\n- Catch FLI buffer overrun. CVE-2020-5313\n  [radarhere]\n\n- Raise an error for an invalid number of bands in FPX image. CVE-2019-19911\n  [wiredfool, radarhere]\n\n6.2.1 (2019-10-21)\n------------------\n\n- Add support for Python 3.8 #4141\n  [hugovk]\n\n6.2.0 (2019-10-01)\n------------------\n\n- Catch buffer overruns #4104\n  [radarhere]\n\n- Initialize rows_per_strip when RowsPerStrip tag is missing #4034\n  [cgohlke, radarhere]\n\n- Raise error if TIFF dimension is a string #4103\n  [radarhere]\n\n- Added decompression bomb checks #4102\n  [radarhere]\n\n- Fix ImageGrab.grab DPI scaling on Windows 10 version 1607+ #4000\n  [nulano, radarhere]\n\n- Corrected negative seeks #4101\n  [radarhere]\n\n- Added argument to capture all screens on Windows #3950\n  [nulano, radarhere]\n\n- Updated warning to specify when Image.frombuffer defaults will change #4086\n  [radarhere]\n\n- Changed WindowsViewer format to PNG #4080\n  [radarhere]\n\n- Use TIFF orientation #4063\n  [radarhere]\n\n- Raise the same error if a truncated image is loaded a second time #3965\n  [radarhere]\n\n- Lazily use ImageFileDirectory_v1 values from Exif #4031\n  [radarhere]\n\n- Improved HSV conversion #4004\n  [radarhere]\n\n- Added text stroking #3978\n  [radarhere, hugovk]\n\n- No more deprecated bdist_wininst .exe installers #4029\n  [hugovk]\n\n- Do not allow floodfill to extend into negative coordinates #4017\n  [radarhere]\n\n- Fixed arc drawing bug for a non-whole number of degrees #4014\n  [radarhere]\n\n- Fix bug when merging identical images to GIF with a list of durations #4003\n  [djy0, radarhere]\n\n- Fix bug in TIFF loading of BufferedReader #3998\n  [chadawagner]\n\n- Added fallback for finding ld on MinGW Cygwin #4019\n  [radarhere]\n\n- Remove indirect dependencies from requirements.txt #3976\n  [hugovk]\n\n- Depends: Update libwebp to 1.0.3 #3983, libimagequant to 2.12.5 #3993, freetype to 2.10.1 #3991\n  [radarhere]\n\n- Change overflow check to use PY_SSIZE_T_MAX #3964\n  [radarhere]\n\n- Report reason for pytest skips #3942\n  [hugovk]\n\n6.1.0 (2019-07-01)\n------------------\n\n- Deprecate Image.__del__ #3929\n  [jdufresne]\n\n- Tiff: Add support for JPEG quality #3886\n  [olt]\n\n- Respect the PKG_CONFIG environment variable when building #3928\n  [chewi]\n\n- Use explicit memcpy() to avoid unaligned memory accesses #3225\n  [DerDakon]\n\n- Improve encoding of TIFF tags #3861\n  [olt]\n\n- Update Py_UNICODE to Py_UCS4 #3780\n  [nulano]\n\n- Consider I;16 pixel size when drawing #3899\n  [radarhere]\n\n- Add TIFFTAG_SAMPLEFORMAT to blocklist #3926\n  [cgohlke, radarhere]\n\n- Create GIF deltas from background colour of GIF frames if disposal mode is 2 #3708\n  [sircinnamon, radarhere]\n\n- Added ImageSequence all_frames #3778\n  [radarhere]\n\n- Use unsigned int to store TIFF IFD offsets #3923\n  [cgohlke]\n\n- Include CPPFLAGS when searching for libraries #3819\n  [jefferyto]\n\n- Updated TIFF tile descriptors to match current decoding functionality #3795\n  [dmnisson]\n\n- Added an ``image.entropy()`` method (second revision) #3608\n  [fish2000]\n\n- Pass the correct types to PyArg_ParseTuple #3880\n  [QuLogic]\n\n- Fixed crash when loading non-font bytes #3912\n  [radarhere]\n\n- Fix SPARC memory alignment issues in Pack/Unpack functions #3858\n  [kulikjak]\n\n- Added CMYK;16B and CMYK;16N unpackers #3913\n  [radarhere]\n\n- Fixed bugs in calculating text size #3864\n  [radarhere]\n\n- Add __main__.py to output basic format and support information #3870\n  [jdufresne]\n\n- Added variation font support #3802\n  [radarhere]\n\n- Do not down-convert if image is LA when showing with PNG format #3869\n  [radarhere]\n\n- Improve handling of PSD frames #3759\n  [radarhere]\n\n- Improved ICO and ICNS loading #3897\n  [radarhere]\n\n- Changed Preview application path so that it is no longer static #3896\n  [radarhere]\n\n- Corrected ttb text positioning #3856\n  [radarhere]\n\n- Handle unexpected ICO image sizes #3836\n  [radarhere]\n\n- Fixed bits value for RGB;16N unpackers #3837\n  [kkopachev]\n\n- Travis CI: Add Fedora 30, remove Fedora 28 #3821\n  [hugovk]\n\n- Added reading of CMYK;16L TIFF images #3817\n  [radarhere]\n\n- Fixed dimensions of 1-bit PDFs #3827\n  [radarhere]\n\n- Fixed opening mmap image through Path on Windows #3825\n  [radarhere]\n\n- Fixed ImageDraw arc gaps #3824\n  [radarhere]\n\n- Expand GIF to include frames with extents outside the image size #3822\n  [radarhere]\n\n- Fixed ImageTk getimage #3814\n  [radarhere]\n\n- Fixed bug in decoding large images #3791\n  [radarhere]\n\n- Fixed reading APP13 marker without Photoshop data #3771\n  [radarhere]\n\n- Added option to include layered windows in ImageGrab.grab on Windows #3808\n  [radarhere]\n\n- Detect libimagequant when installed by pacman on MingW #3812\n  [radarhere]\n\n- Fixed raqm layout bug #3787\n  [radarhere]\n\n- Fixed loading font with non-Unicode path on Windows #3785\n  [radarhere]\n\n- Travis CI: Upgrade PyPy from 6.0.0 to 7.1.1 #3783\n  [hugovk, johnthagen]\n\n- Depends: Updated openjpeg to 2.3.1 #3794, raqm to 0.7.0 #3877, libimagequant to 2.12.3 #3889\n  [radarhere]\n\n- Fix numpy bool bug #3790\n  [radarhere]\n\n6.0.0 (2019-04-01)\n------------------\n\n- Python 2.7 support will be removed in Pillow 7.0.0 #3682\n  [hugovk]\n\n- Add EXIF class #3625\n  [radarhere]\n\n- Add ImageOps exif_transpose method #3687\n  [radarhere]\n\n- Added warnings to deprecated CMSProfile attributes #3615\n  [hugovk]\n\n- Documented reading TIFF multiframe images #3720\n  [akuchling]\n\n- Improved speed of opening an MPO file #3658\n  [Glandos]\n\n- Update palette in quantize #3721\n  [radarhere]\n\n- Improvements to TIFF is_animated and n_frames #3714\n  [radarhere]\n\n- Fixed incompatible pointer type warnings #3754\n  [radarhere]\n\n- Improvements to PA and LA conversion and palette operations #3728\n  [radarhere]\n\n- Consistent DPI rounding #3709\n  [radarhere]\n\n- Change size of MPO image to match frame #3588\n  [radarhere]\n\n- Read Photoshop resolution data #3701\n  [radarhere]\n\n- Ensure image is mutable before saving #3724\n  [radarhere]\n\n- Correct remap_palette documentation #3740\n  [radarhere]\n\n- Promote P images to PA in putalpha #3726\n  [radarhere]\n\n- Allow RGB and RGBA values for new P images #3719\n  [radarhere]\n\n- Fixed TIFF bug when seeking backwards and then forwards #3713\n  [radarhere]\n\n- Cache EXIF information #3498\n  [Glandos]\n\n- Added transparency for all PNG grayscale modes #3744\n  [radarhere]\n\n- Fix deprecation warnings in Python 3.8 #3749\n  [radarhere]\n\n- Fixed GIF bug when rewinding to a non-zero frame #3716\n  [radarhere]\n\n- Only close original fp in __del__ and __exit__ if original fp is exclusive #3683\n  [radarhere]\n\n- Fix BytesWarning in Tests/test_numpy.py #3725\n  [jdufresne]\n\n- Add missing MIME types and extensions #3520\n  [pirate486743186]\n\n- Add I;16 PNG save #3566\n  [radarhere]\n\n- Add support for BMP RGBA bitfield compression #3705\n  [radarhere]\n\n- Added ability to set language for text rendering #3693\n  [iwsfutcmd]\n\n- Only close exclusive fp on Image __exit__ #3698\n  [radarhere]\n\n- Changed EPS subprocess stdout from devnull to None #3635\n  [radarhere]\n\n- Add reading old-JPEG compressed TIFFs #3489\n  [kkopachev]\n\n- Add EXIF support for PNG #3674\n  [radarhere]\n\n- Add option to set dither param on quantize #3699\n  [glasnt]\n\n- Add reading of DDS uncompressed RGB data #3673\n  [radarhere]\n\n- Correct length of Tiff BYTE tags #3672\n  [radarhere]\n\n- Add DIB saving and loading through Image open #3691\n  [radarhere]\n\n- Removed deprecated VERSION #3624\n  [hugovk]\n\n- Fix 'BytesWarning: Comparison between bytes and string' in PdfDict #3580\n  [jdufresne]\n\n- Do not resize in Image.thumbnail if already the destination size #3632\n  [radarhere]\n\n- Replace .seek() magic numbers with io.SEEK_* constants #3572\n  [jdufresne]\n\n- Make ContainerIO.isatty() return a bool, not int #3568\n  [jdufresne]\n\n- Add support to all transpose operations for I;16 modes #3563, #3741\n  [radarhere]\n\n- Deprecate support for PyQt4 and PySide #3655\n  [hugovk, radarhere]\n\n- Add TIFF compression codecs: LZMA, Zstd, WebP #3555\n  [cgohlke]\n\n- Fixed pickling of iTXt class with protocol > 1 #3537\n  [radarhere]\n\n- _util.isPath returns True for pathlib.Path objects #3616\n  [wbadart]\n\n- Remove unnecessary unittest.main() boilerplate from test files #3631\n  [jdufresne]\n\n- Exif: Seek to IFD offset #3584\n  [radarhere]\n\n- Deprecate PIL.*ImagePlugin.__version__ attributes #3628\n  [jdufresne]\n\n- Docs: Add note about ImageDraw operations that exceed image bounds #3620\n  [radarhere]\n\n- Allow for unknown PNG chunks after image data #3558\n  [radarhere]\n\n- Changed EPS subprocess stdin from devnull to None #3611\n  [radarhere]\n\n- Fix possible integer overflow #3609\n  [cgohlke]\n\n- Catch BaseException for resource cleanup handlers #3574\n  [jdufresne]\n\n- Improve pytest configuration to allow specific tests as CLI args #3579\n  [jdufresne]\n\n- Drop support for Python 3.4 #3596\n  [hugovk]\n\n- Remove deprecated PIL.OleFileIO #3598\n  [hugovk]\n\n- Remove deprecated ImageOps undocumented functions #3599\n  [hugovk]\n\n- Depends: Update libwebp to 1.0.2 #3602\n  [radarhere]\n\n- Detect MIME types #3525\n  [radarhere]\n\n5.4.1 (2019-01-06)\n------------------\n\n- File closing: Only close __fp if not fp #3540\n  [radarhere]\n\n- Fix build for Termux #3529\n  [pslacerda]\n\n- PNG: Detect MIME types #3525\n  [radarhere]\n\n- PNG: Handle IDAT chunks after image end #3532\n  [radarhere]\n\n5.4.0 (2019-01-01)\n------------------\n\n- Docs: Improved ImageChops documentation #3522\n  [radarhere]\n\n- Allow RGB and RGBA values for P image putpixel #3519\n  [radarhere]\n\n- Add APNG extension to PNG plugin #3501\n  [pirate486743186, radarhere]\n\n- Lookup ld.so.cache instead of hardcoding search paths #3245\n  [pslacerda]\n\n- Added custom string TIFF tags #3513\n  [radarhere]\n\n- Improve setup.py configuration #3395\n  [diorcety]\n\n- Read textual chunks located after IDAT chunks for PNG #3506\n  [radarhere]\n\n- Performance: Don't try to hash value if enum is empty #3503\n  [Glandos]\n\n- Added custom int and float TIFF tags #3350\n  [radarhere]\n\n- Fixes for issues reported by static code analysis #3393\n  [frenzymadness]\n\n- GIF: Wait until mode is normalized to copy im.info into encoderinfo #3187\n  [radarhere]\n\n- Docs: Add page of deprecations and removals #3486\n  [hugovk]\n\n- Travis CI: Upgrade PyPy from 5.8.0 to 6.0 #3488\n  [hugovk]\n\n- Travis CI: Allow lint job to fail #3467\n  [hugovk]\n\n- Resolve __fp when closing and deleting #3261\n  [radarhere]\n\n- Close exclusive fp before discarding #3461\n  [radarhere]\n\n- Updated open files documentation #3490\n  [radarhere]\n\n- Added libjpeg_turbo to check_feature #3493\n  [radarhere]\n\n- Change color table index background to tuple when saving as WebP #3471\n  [radarhere]\n\n- Allow arbitrary number of comment extension subblocks #3479\n  [radarhere]\n\n- Ensure previous FLI frame is loaded before seeking to the next #3478\n  [radarhere]\n\n- ImageShow improvements #3450\n  [radarhere]\n\n- Depends: Update libimagequant to 2.12.2 #3442, libtiff to 4.0.10 #3458, libwebp to 1.0.1 #3468, Tk Tcl to 8.6.9 #3465\n  [radarhere]\n\n- Check quality_layers type #3464\n  [radarhere]\n\n- Add context manager, __del__ and close methods to TarIO #3455\n  [radarhere]\n\n- Test: Do not play sound when running screencapture command #3454\n  [radarhere]\n\n- Close exclusive fp on open exception #3456\n  [radarhere]\n\n- Only close existing fp in WebP if fp is exclusive #3418\n  [radarhere]\n\n- Docs: Re-add the downloads badge #3443\n  [hugovk]\n\n- Added negative index to PixelAccess #3406\n  [Nazime]\n\n- Change tuple background to global color table index when saving as GIF #3385\n  [radarhere]\n\n- Test: Improved ImageGrab tests #3424\n  [radarhere]\n\n- Flake8 fixes #3422, #3440\n  [radarhere, hugovk]\n\n- Only ask for YCbCr->RGB libtiff conversion for jpeg-compressed tiffs #3417\n  [kkopachev]\n\n- Optimise ImageOps.fit by combining resize and crop #3409\n  [homm]\n\n5.3.0 (2018-10-01)\n------------------\n\n- Changed Image size property to be read-only by default #3203\n  [radarhere]\n\n- Add warnings if image file identification fails due to lack of WebP support #3169\n  [radarhere, hugovk]\n\n- Hide the Ghostscript progress dialog popup on Windows #3378\n  [hugovk]\n\n- Adding support to reading tiled and YcbCr jpeg tiffs through libtiff #3227\n  [kkopachev]\n\n- Fixed None as TIFF compression argument #3310\n  [radarhere]\n\n- Changed GIF seek to remove previous info items #3324\n  [radarhere]\n\n- Improved PDF document info #3274\n  [radarhere]\n\n- Add line width parameter to rectangle and ellipse-based shapes #3094\n  [hugovk, radarhere]\n\n- Fixed decompression bomb check in _crop #3313\n  [dinkolubina, hugovk]\n\n- Added support to ImageDraw.floodfill for non-RGB colors #3377\n  [radarhere]\n\n- Tests: Avoid catching unexpected exceptions in tests #2203\n  [jdufresne]\n\n- Use TextIOWrapper.detach() instead of NoCloseStream #2214\n  [jdufresne]\n\n- Added transparency to matrix conversion #3205\n  [radarhere]\n\n- Added ImageOps pad method #3364\n  [radarhere]\n\n- Give correct extrema for I;16 format images #3359\n  [bz2]\n\n- Added PySide2 #3279\n  [radarhere]\n\n- Corrected TIFF tags #3369\n  [radarhere]\n\n- CI: Install CFFI and pycparser without any PYTHONOPTIMIZE #3374\n  [hugovk]\n\n- Read/Save RGB webp as RGB (instead of RGBX) #3298\n  [kkopachev]\n\n- ImageDraw: Add line joints #3250\n  [radarhere]\n\n- Improved performance of ImageDraw floodfill method #3294\n  [yo1995]\n\n- Fix builds with --parallel #3272\n  [hsoft]\n\n- Add more raw Tiff modes (RGBaX, RGBaXX, RGBAX, RGBAXX) #3335\n  [homm]\n\n- Close existing WebP fp before setting new fp #3341\n  [radarhere]\n\n- Add orientation, compression and id_section as TGA save keyword arguments #3327\n  [radarhere]\n\n- Convert int values of RATIONAL TIFF tags to floats #3338\n  [radarhere, wiredfool]\n\n- Fix code for PYTHONOPTIMIZE #3233\n  [hugovk]\n\n- Changed ImageFilter.Kernel to subclass ImageFilter.BuiltinFilter, instead of the other way around #3273\n  [radarhere]\n\n- Remove unused draw.draw_line, draw.draw_point and font.getabc methods #3232\n  [hugovk]\n\n- Tests: Added ImageFilter tests #3295\n  [radarhere]\n\n- Tests: Added ImageChops tests #3230\n  [hugovk, radarhere]\n\n- AppVeyor: Download lib if not present in pillow-depends #3316\n  [radarhere]\n\n- Travis CI: Add Python 3.7 and Xenial #3234\n  [hugovk]\n\n- Docs: Added documentation for NumPy conversion #3301\n  [radarhere]\n\n- Depends: Update libimagequant to 2.12.1 #3281\n  [radarhere]\n\n- Add three-color support to ImageOps.colorize #3242\n  [tsennott]\n\n- Tests: Add LA to TGA test modes #3222\n  [danpla]\n\n- Skip outline if the draw operation fills with the same colour #2922\n  [radarhere]\n\n- Flake8 fixes #3173, #3380\n  [radarhere]\n\n- Avoid deprecated 'U' mode when opening files #2187\n  [jdufresne]\n\n5.2.0 (2018-07-01)\n------------------\n\n- Fixed saving a multiframe image as a single frame PDF #3137\n  [radarhere]\n\n- If a Qt version is already imported, attempt to use it first #3143\n  [radarhere]\n\n- Fix transform fill color for alpha images #3147\n  [fozcode]\n\n- TGA: Add support for writing RLE data #3186\n  [danpla]\n\n- TGA: Read and write LA data #3178\n  [danpla]\n\n- QuantOctree.c: Remove erroneous attempt to average over an empty range #3196\n  [tkoeppe]\n\n- Changed ICNS format tests to pass on OS X 10.11 #3202\n  [radarhere]\n\n- Fixed bug in ImageDraw.multiline_textsize() #3114\n  [tianyu139]\n\n- Added getsize_multiline support for PIL.ImageFont #3113\n  [tianyu139]\n\n- Added ImageFile get_format_mimetype method #3190\n  [radarhere]\n\n- Changed mmap file pointer to use context manager #3216\n  [radarhere]\n\n- Changed ellipse point calculations to be more evenly distributed #3142\n  [radarhere]\n\n- Only extract first Exif segment #2946\n  [hugovk]\n\n- Tests: Test ImageDraw2, WalImageFile #3135, #2989\n  [hugovk]\n\n- Remove unnecessary '#if 0' code #3075\n  [hugovk]\n\n- Tests: Added GD tests #1817\n  [radarhere]\n\n- Fix collections ABCs DeprecationWarning in Python 3.7 #3123\n  [hugovk]\n\n- unpack_from is faster than unpack of slice #3201\n  [landfillbaby]\n\n- Docs: Add coordinate system links and file handling links in documentation #3204, #3214\n  [radarhere]\n\n- Tests: TestFilePng: Fix test_save_l_transparency() #3182\n  [danpla]\n\n- Docs: Correct argument name #3171\n  [radarhere]\n\n- Docs: Update CMake download URL #3166\n  [radarhere]\n\n- Docs: Improve Image.transform documentation #3164\n  [radarhere]\n\n- Fix transform fillcolor argument when image mode is RGBA or LA #3163\n  [radarhere]\n\n- Tests: More specific Exception testing #3158\n  [radarhere]\n\n- Add getrgb HSB/HSV color strings #3148\n  [radarhere]\n\n- Allow float values in getrgb HSL color string #3146\n  [radarhere]\n\n- AppVeyor: Upgrade to Python 2.7.15 and 3.4.4 #3140\n  [radarhere]\n\n- AppVeyor: Upgrade to PyPy 6.0.0 #3133\n  [hugovk]\n\n- Deprecate PILLOW_VERSION and VERSION #3090\n  [hugovk]\n\n- Support Python 3.7 #3076\n  [hugovk]\n\n- Depends: Update freetype to 2.9.1, libjpeg to 9c, libwebp to 1.0.0 #3121, #3136, #3108\n  [radarhere]\n\n- Build macOS wheels with Xcode 6.4, supporting older macOS versions #3068\n  [wiredfool]\n\n- Fix _i2f compilation on some GCC versions #3067\n  [homm]\n\n- Changed encoderinfo to have priority over info when saving GIF images #3086\n  [radarhere]\n\n- Rename PIL.version to PIL._version and remove it from module #3083\n  [homm]\n\n- Enable background colour parameter on rotate #3057\n  [storesource]\n\n- Remove unnecessary ``#if 1`` directive #3072\n  [jdufresne]\n\n- Remove unused Python class, Path #3070\n  [jdufresne]\n\n- Fix dereferencing type-punned pointer will break strict-aliasing #3069\n  [jdufresne]\n\n5.1.0 (2018-04-02)\n------------------\n\n- Close fp before return in ImagingSavePPM #3061\n  [kathryndavies]\n\n- Added documentation for ICNS append_images #3051\n  [radarhere]\n\n- Docs: Move intro text below its header #3021\n  [hugovk]\n\n- CI: Rename appveyor.yml as .appveyor.yml #2978\n  [hugovk]\n\n- Fix TypeError for JPEG2000 parser feed #3042\n  [hugovk]\n\n- Certain corrupted jpegs can result in no data read #3023\n  [kkopachev]\n\n- Add support for BLP file format #3007\n  [jleclanche]\n\n- Simplify version checks #2998\n  [hugovk]\n\n- Fix \"invalid escape sequence\" warning on Python 3.6+ #2996\n  [timgraham]\n\n- Allow append_images to set .icns scaled images #3005\n  [radarhere]\n\n- Support appending to existing PDFs #2965\n  [vashek]\n\n- Fix and improve efficient saving of ICNS on macOS #3004\n  [radarhere]\n\n- Build: Enable pip cache in AppVeyor build #3009\n  [thijstriemstra]\n\n- Trim trailing whitespace #2985\n  [Metallicow]\n\n- Docs: Correct reference to Image.new method #3000\n  [radarhere]\n\n- Rearrange ImageFilter classes into alphabetical order #2990\n  [radarhere]\n\n- Test: Remove duplicate line #2983\n  [radarhere]\n\n- Build: Update AppVeyor PyPy version #3003\n  [radarhere]\n\n- Tiff: Open 8 bit Tiffs with 5 or 6 channels, discarding extra channels #2938\n  [homm]\n\n- Readme: Added Twitter badge #2930\n  [hugovk]\n\n- Removed __main__ code from ImageCms #2942\n  [radarhere]\n\n- Test: Changed assert statements to unittest calls #2961\n  [radarhere]\n\n- Depends: Update libimagequant to 2.11.10, raqm to 0.5.0, freetype to 2.9 #3036, #3017, #2957\n  [radarhere]\n\n- Remove _imaging.crc32 in favor of builtin Python crc32 implementation #2935\n  [wiredfool]\n\n- Move Tk directory to src directory #2928\n  [hugovk]\n\n- Enable pip cache in Travis CI #2933\n  [jdufresne]\n\n- Remove unused and duplicate imports #2927\n  [radarhere]\n\n- Docs: Changed documentation references to 2.x to 2.7 #2921\n  [radarhere]\n\n- Fix memory leak when opening webp files #2974\n  [wiredfool]\n\n- Setup: Fix \"TypeError: 'NoneType' object is not iterable\" for PPC and CRUX #2951\n  [hugovk]\n\n- Setup: Add libdirs for ppc64le and armv7l #2968\n  [nehaljwani]\n\n5.0.0 (2018-01-01)\n------------------\n\n- Docs: Added docstrings from documentation #2914\n  [radarhere]\n\n- Test: Switch from nose to pytest #2815\n  [hugovk]\n\n- Rework Source directory layout, preventing accidental import of PIL. #2911\n  [wiredfool]\n\n- Dynamically link libraqm #2753\n  [wiredfool]\n\n- Removed scripts directory #2901\n  [wiredfool]\n\n- TIFF: Run all compressed tiffs through libtiff decoder #2899\n  [wiredfool]\n\n- GIF: Add disposal option when saving GIFs #2902\n  [linnil1, wiredfool]\n\n- EPS: Allow for an empty line in EPS header data #2903\n  [radarhere]\n\n- PNG: Add support for sRGB and cHRM chunks, permit sRGB when no iCCP chunk present #2898\n  [wiredfool]\n\n- Dependencies: Update Tk Tcl to 8.6.8 #2905\n  [radarhere]\n\n- Decompression bomb error now raised for images 2x larger than a decompression bomb warning #2583\n  [wiredfool]\n\n- Test: avoid random failure in test_effect_noise #2894\n  [hugovk]\n\n- Increased epsilon for test_file_eps.py:test_showpage due to Arch update. #2896\n  [wiredfool]\n\n- Removed check parameter from _save in BmpImagePlugin, PngImagePlugin, ImImagePlugin, PalmImagePlugin, and PcxImagePlugin. #2873\n  [radarhere]\n\n- Make PngImagePlugin.add_text() zip argument type bool #2890\n  [jdufresne]\n\n- Depends: Updated libwebp to 0.6.1 #2880\n  [radarhere]\n\n- Remove unnecessary bool() calls in Image.registered_extensions and skipKnownBadTests #2891\n  [jdufresne]\n\n- Fix count of BITSPERSAMPLE items in broken TIFF files #2883\n  [homm]\n\n- Fillcolor parameter for Image.Transform #2852\n  [wiredfool]\n\n- Test: Display differences for test failures #2862\n  [wiredfool]\n\n- Added executable flag to file with shebang line #2884\n  [radarhere]\n\n- Setup: Specify compatible Python versions for pip #2877\n  [hugovk]\n\n- Dependencies: Updated libimagequant to 2.11.4 #2878\n  [radarhere]\n\n- Setup: Warn if trying to install for Py3.7 on Windows #2855\n  [hugovk]\n\n- Doc: Fonts can be loaded from a file-like object, not just filename #2861\n  [robin-norwood]\n\n- Add eog support for Ubuntu Image Viewer #2864\n  [NafisFaysal]\n\n- Test: Test on 3.7-dev on Travis CI #2870\n  [hugovk]\n\n- Dependencies: Update libtiff to 4.0.9 #2871\n  [radarhere]\n\n- Setup: Replace deprecated platform.dist with file existence check #2869\n  [wiredfool]\n\n- Build: Fix setup.py on Debian #2853\n  [wiredfool]\n\n- Docs: Correct error in ImageDraw documentation #2858\n  [meribold]\n\n- Test: Drop Ubuntu Precise, Fedora 24, Fedora 25, add Fedora 27, Centos 7, Amazon v2 CI Support #2854, #2843, #2895, #2897\n  [wiredfool]\n\n- Dependencies: Updated libimagequant to 2.11.3 #2849\n  [radarhere]\n\n- Test: Fix test_image.py to use tempfile #2841\n  [radarhere]\n\n- Replace PIL.OleFileIO deprecation warning with descriptive ImportError #2833\n  [hugovk]\n\n- WebP: Add support for animated WebP files #2761\n  [jd20]\n\n- PDF: Set encoderinfo for images when saving multi-page PDF. Fixes #2804. #2805\n  [ixio]\n\n- Allow the olefile dependency to be optional #2789\n  [jdufresne]\n\n- GIF: Permit LZW code lengths up to 12 bits in GIF decode #2813\n  [wiredfool]\n\n- Fix unterminated string and unchecked exception in _font_text_asBytes. #2825\n  [wiredfool]\n\n- PPM: Use fixed list of whitespace, rather relying on locale, fixes #272. #2831\n  [markmiscavage]\n\n- Added support for generators when using append_images #2829, #2835\n  [radarhere]\n\n- Doc: Correct PixelAccess.rst #2824\n  [hasahmed]\n\n- Depends: Update raqm to 0.3.0 #2822\n  [radarhere]\n\n- Docs: Link to maintained version of aggdraw #2809\n  [hugovk]\n\n- Include license file in the generated wheel packages #2801\n  [jdufresne]\n\n- Depends: Update openjpeg to 2.3.0 #2791\n  [radarhere]\n\n- Add option to Makefile to build and install with C coverage #2781\n  [hugovk]\n\n- Add context manager support to ImageFile.Parser and PngImagePlugin.ChunkStream #2793\n  [radarhere]\n\n- ImageDraw.textsize: fix zero length error #2788\n  [wiredfool, hugovk]\n\n4.3.0 (2017-10-02)\n------------------\n\n- Fix warning on pointer cast in isblock #2775, #2778\n  [cgohlke]\n\n- Doc: Added macOS High Sierra tested Pillow version #2777\n  [radarhere]\n\n- Use correct Windows handle type on 64 bit in imagingcms  #2774\n  [cgohlke]\n\n- 64 Bit Windows fix for block storage #2773\n  [cgohlke]\n\n- Fix \"expression result unused\" warning #2764\n  [radarhere]\n\n- Add 16bit Read/Write and RLE read support to SgiImageFile #2769\n  [jbltx, wiredfool]\n\n- Block & array hybrid storage #2738\n  [homm]\n\n- Common seek frame position check #1849\n  [radarhere]\n\n- Doc: Add note about aspect ratio to Image thumbnail script #2281\n  [wilsonge]\n\n- Fix ValueError: invalid version number '1.0.0rc1' in scipy release candidate #2771\n  [cgohlke]\n\n- Unfreeze requirements.txt #2766\n  [hugovk]\n\n- Test: ResourceWarning tests #2756\n  [hugovk]\n\n- Use n_frames to determine is_animated if possible #2315\n  [radarhere]\n\n- Doc: Corrected parameters in documentation #2768\n  [radarhere]\n\n- Avoid unnecessary Image operations #1891\n  [radarhere]\n\n- Added register_extensions method #1860\n  [radarhere]\n\n- Fix TIFF support for I;16S, I;16BS, and I;32BS rawmodes #2748\n  [wiredfool]\n\n- Fixed doc syntax in ImageDraw #2752\n  [radarhere]\n\n- Fixed support for building on Windows/msys2. Added Appveyor CI coverage for python3 on msys2 #2746\n  [wiredfool]\n\n- Fix ValueError in Exif/Tiff IFD #2719\n  [wiredfool]\n\n- Use pathlib2 for Path objects on Python < 3.4 #2291\n  [asergi]\n\n- Export only required properties in unsafe_ptrs #2740\n  [homm]\n\n- Alpha composite fixes #2709\n  [homm]\n\n- Faster Transpose operations, added 'Transverse' option #2730\n  [homm]\n\n- Deprecate ImageOps undocumented functions gaussian_blur, gblur, unsharp_mask, usm and box_blur in favor of ImageFilter implementations #2735\n  [homm]\n\n- Dependencies: Updated freetype to 2.8.1 #2741\n  [radarhere]\n\n- Bug: Player skipped first image #2742\n  [radarhere]\n\n- Faster filter operations for Kernel, Gaussian, and Unsharp Mask filters #2679\n  [homm]\n\n- EPS: Add showpage to force rendering of some EPS images #2636\n  [kaplun]\n\n- DOC: Fix type of palette parameter in Image.quantize. #2703\n  [kkopachev]\n\n- DOC: Fix Ico docs to match code #2712\n  [hugovk]\n\n- Added file pointer save to SpiderImagePlugin #2647\n  [radarhere]\n\n- Add targa version 2 footer #2713\n  [jhultgre]\n\n- Removed redundant lines #2714\n  [radarhere]\n\n- Travis CI: Use default pypy/pypy3 #2721\n  [hugovk]\n\n- Fix for SystemError when rendering an empty string, added in 4.2.0 #2706\n  [wiredfool]\n\n- Fix for memory leaks in font handling added in 4.2.0 #2634\n  [wiredfool]\n\n- Tests:  cleanup, more tests. Fixed WMF save handler #2689\n  [radarhere]\n\n- Removed debugging interface for Image.core.grabclipboard #2708\n  [radarhere]\n\n- Doc syntax fix #2710\n  [radarhere]\n\n- Faster packing and unpacking for RGB, LA, and related storage modes #2693\n  [homm]\n\n- Use RGBX rawmode for RGB JPEG images where possible #1989\n  [homm]\n\n- Remove palettes from non-palette modes in _new #2704\n  [wiredfool]\n\n- Delete transparency info when convert'ing RGB/L to RGBA #2633\n  [olt]\n\n- Code tweaks to ease type annotations #2687\n  [neiljp]\n\n- Fixed incorrect use of 's#' to byteslike object #2691\n  [wiredfool]\n\n- Fix JPEG subsampling labels for subsampling=2  #2698\n  [homm]\n\n- Region of interest (box) for resampling #2254\n  [homm]\n\n- Basic support for Termux (android) in setup.py #2684\n  [wiredfool]\n\n- Bug: Fix Image.fromarray for numpy.bool type. #2683\n  [wiredfool]\n\n- CI: Add Fedora 24 and 26 to Docker tests\n  [wiredfool]\n\n- JPEG: Fix ZeroDivisionError when EXIF contains invalid DPI (0/0). #2667\n  [vytisb]\n\n- Depends: Updated openjpeg to 2.2.0 #2669\n  [radarhere]\n\n- Depends: Updated Tk Tcl to 8.6.7 #2668\n  [radarhere]\n\n- Depends: Updated libimagequant to 2.10.2 #2660\n  [radarhere]\n\n- Test: Added test for ImImagePlugin tell() #2675\n  [radarhere]\n\n- Test: Additional tests for SGIImagePlugin #2659\n  [radarhere]\n\n- New Image.getchannel method #2661\n  [homm]\n\n- Remove unused im.copy2 and core.copy methods #2657\n  [homm]\n\n- Fast Image.merge() #2677\n  [homm]\n\n- Fast Image.split() #2676\n  [homm]\n\n- Fast image allocation #2655\n  [homm]\n\n- Storage cleanup #2654\n  [homm]\n\n- FLI: Use frame count from FLI header #2674\n  [radarhere]\n\n- Test: Test animated FLI file #2650\n  [hugovk]\n\n- Bug: Fixed uninitialized memory in bc5 decoding #2648\n  [ifeherva]\n\n- Moved SgiImagePlugin save error to before the start of write operations #2646\n  [radarhere]\n\n- Move createfontdatachunk.py so isn't installed globally #2645\n  [hugovk]\n\n- Bug: Fix unexpected keyword argument 'align' #2641\n  [hugovk]\n\n- Add newlines to error message for clarity #2640\n  [hugovk]\n\n- Docs: Updated redirected URL #2637\n  [radarhere]\n\n- Bug: Fix JPEG DPI when EXIF is invalid #2632\n  [wiredfool]\n\n- Bug: Fix for font getsize on empty string #2624\n  [radarhere]\n\n- Docs: Improved ImageDraw documentation #2626\n  [radarhere]\n\n- Docs: Corrected alpha_composite args documentation #2627\n  [radarhere]\n\n- Docs: added the description of the filename attribute to images.rst #2621\n  [dasdachs]\n\n- Dependencies: Updated libimagequant to 2.10.1 #2616\n  [radarhere]\n\n- PDF: Renamed parameter to not shadow built-in dict #2612\n  [kijeong]\n\n4.2.1 (2017-07-06)\n------------------\n\n- CI: Fix version specification and test on CI for PyPy/Windows #2608\n  [wiredfool]\n\n4.2.0 (2017-07-01)\n------------------\n\n- Doc: Clarified Image.save:append_images documentation #2604\n  [radarhere]\n\n- CI: Amazon Linux and Centos6 docker images added to Travis CI #2585\n  [wiredfool]\n\n- Image.alpha_composite added #2595\n  [wiredfool]\n\n- Complex Text Support #2576\n  [ShamsaHamed, Fahad-Alsaidi, wiredfool]\n\n- Added threshold parameter to ImageDraw.floodfill #2599\n  [nediamond]\n\n- Added dBATCH parameter to ghostscript command #2588\n  [radarhere]\n\n- JPEG: Adjust buffer size when icc_profile > MAXBLOCK #2596\n  [Darou]\n\n- Specify Pillow Version in one place #2517\n  [wiredfool]\n\n- CI: Change the owner of the TRAVIS_BUILD_DIR, fixing broken docker runs #2587\n  [wiredfool]\n\n- Fix truncated PNG loading for some images, Fix memory leak on truncated PNG images. #2541, #2598\n  [homm]\n\n- Add decompression bomb check to Image.crop #2410\n  [wiredfool]\n\n- ImageFile: Ensure that the ``err_code`` variable is initialized in case of exception. #2363\n  [alexkiro]\n\n- Tiff: Support append_images for saving multipage TIFFs #2406\n  [blochl]\n\n- Doc: Clarify that draft is only implemented for JPEG and PCD #2409\n  [wiredfool]\n\n- Test: MicImagePlugin #2447\n  [hugovk]\n\n- Use round() instead of floor() to eliminate zero coefficients in resample #2558\n  [homm]\n\n- Remove deprecated code #2549\n  [hugovk]\n\n- Added append_images to PDF saving #2526\n  [radarhere]\n\n- Remove unused function core image function new_array #2548\n  [hugovk]\n\n- Remove unnecessary calls to dict.keys() #2551\n  [jdufresne]\n\n- Add more ImageDraw.py tests and remove unused Draw.c code #2533\n  [hugovk]\n\n- Test: More tests for ImageMorph #2554\n  [hugovk]\n\n- Test: McIDAS area file #2552\n  [radarhere]\n\n- Update Feature Detection #2520\n  [wiredfool]\n\n- CI: Update pypy on Travis CI #2573\n  [hugovk]\n\n- ImageMorph: Fix wrong expected size of MRLs read from disk #2561\n  [dov]\n\n- Docs: Update install docs for FreeBSD #2546\n  [wiredfool]\n\n- Build: Ignore OpenJpeg 1.5 on FreeBSD #2544\n  [melvyn-sopacua]\n\n- Remove 'not yet implemented' methods from PIL 1.1.4 #2538\n  [hugovk]\n\n- Dependencies: Update FreeType to 2.8, LibTIFF to 4.0.8 and libimagequant to 2.9.1 #2535 #2537 #2540\n  [radarhere]\n\n- Raise TypeError and not also UnboundLocalError in ImageFile.Parser() #2525\n  [joshblum]\n\n- Test: Use Codecov for coverage #2528\n  [hugovk]\n\n- Use PNG for Image.show() #2527\n  [HinTak, wiredfool]\n\n- Remove WITH_DEBUG compilation flag #2522\n  [wiredfool]\n\n- Fix return value on parameter parse error in _webp.c #2521\n  [adw1n]\n\n- Set executable flag on scripts with shebang line #2295\n  [radarhere]\n\n- Flake8 #2460\n  [radarhere]\n\n- Doc: Release Process Changes #2516\n  [wiredfool]\n\n- CI: Added region for s3 deployment on appveyor #2515\n  [wiredfool]\n\n- Doc: Updated references to point to existing files #2507\n  [radarhere]\n\n- Return copy on Image crop if crop dimensions match the image #2471\n  [radarhere]\n\n- Test: Optimize CI speed #2464, #2466\n  [hugovk]\n\n4.1.1 (2017-04-28)\n------------------\n\n- Undef PySlice_GetIndicesEx, see https://bugs.python.org/issue29943 #2493\n  [cgohlke]\n\n- Fix for file with DPI in EXIF but not metadata, and XResolution is an int rather than tuple #2484\n  [hugovk]\n\n- Docs: Removed broken download counter badge #2487\n  [hugovk]\n\n- Docs: Fixed rst syntax error #2477\n  [thebjorn]\n\n4.1.0 (2017-04-03)\n------------------\n\n- Close files after loading if possible #2330\n  [homm, wiredfool]\n\n- Fix Image Access to be reloadable when embedding the Python interpreter #2296\n  [wiredfool, cgohlke]\n\n- Fetch DPI from EXIF if not specified in JPEG header #2449, #2472\n  [hugovk]\n\n- Removed winbuild checksum verification #2468\n  [radarhere]\n\n- Git: Set ContainerIO test file as binary #2469\n  [cgohlke]\n\n- Remove superfluous import of FixTk #2455\n  [cgohlke)\n\n- Fix import of tkinter/Tkinter #2456\n  [cgohlke)\n\n- Pure Python Decoders, including Python decoder to fix for MSP images #1938\n  [wiredfool, hugovk]\n\n- Reorganized GifImagePlugin, fixes #2314.  #2374\n  [radarhere, wiredfool]\n\n- Doc: Reordered operating systems in Compatibility Matrix #2436\n  [radarhere]\n\n- Test: Additional tests for BufrStub, Eps, Container, GribStub, IPTC, Wmf, XVThumb, ImageDraw, ImageMorph, ImageShow #2425\n  [radarhere]\n\n- Health fixes #2437\n  [radarhere]\n\n- Test: Correctness tests ContainerIO, XVThumbImagePlugin, BufrStubImagePlugin, GribStubImagePlugin, FitsStubImagePlugin, Hdf5StubImagePlugin, PixarImageFile, PsdImageFile #2443, #2442, #2441, #2440, #2431, #2430, #2428, #2427\n  [hugovk]\n\n- Remove unused imports #1822\n  [radarhere]\n\n- Replaced KeyError catch with dictionary get method #2424\n  [radarhere]\n\n- Test: Removed unrunnable code in test_image_toqimage #2415\n  [hugovk]\n\n- Removed use of spaces in TIFF kwargs names, deprecated in 2.7 #1390\n  [radarhere]\n\n- Removed deprecated ImageDraw setink, setfill, setfont methods #2220\n  [jdufresne]\n\n- Send unwanted subprocess output to /dev/null #2253\n  [jdufresne]\n\n- Fix division by zero when creating 0x0 image from numpy array #2419\n  [hugovk]\n\n- Test: Added matrix convert tests #2381\n  [hugovk]\n\n- Replaced broken URL to partners.adobe.com #2413\n  [radarhere]\n\n- Removed unused private functions in setup.py and build_dep.py #2414\n  [radarhere]\n\n- Test: Fixed Qt tests for QT5 and saving 1 bit PNG #2394\n  [wiredfool]\n\n- Test: docker builds for Arch and Debian Stretch #2394\n  [wiredfool]\n\n- Updated libwebp to 0.6.0 on appveyor #2395\n  [radarhere]\n\n- More explicit error message when saving to a file with invalid extension #2399\n  [ces42]\n\n- Docs: Update some http urls to https #2403\n  [hugovk]\n\n- Preserve aux/alpha channels when performing Imagecms transforms #2355\n  [gunjambi]\n\n- Test linear and radial gradient effects #2382\n  [hugovk]\n\n- Test ImageDraw.Outline and and ImageDraw.Shape #2389\n  [hugovk]\n\n- Added PySide to ImageQt documentation #2392\n  [radarhere]\n\n- BUG: Empty image mode no longer causes a crash #2380\n  [evalapply]\n\n- Exclude .travis and contents from manifest #2386\n  [radarhere]\n\n- Remove 'MIT-like' from license #2145\n  [wiredfool]\n\n- Tests: Add tests for several Image operations #2379\n  [radarhere]\n\n- PNG: Moved iCCP chunk before PLTE chunk when saving as PNG, restricted chunks known value/ordering #2347\n  [radarhere]\n\n- Default to inch-interpretation for missing ResolutionUnit in TiffImagePlugin #2365\n  [lambdafu]\n\n- Bug: Fixed segfault when using ImagingTk on pypy Issue #2376, #2359.\n  [wiredfool]\n\n- Bug: Fixed Integer overflow using ImagingTk on 32 bit platforms #2359\n  [wiredfool, QuLogic]\n\n- Tests: Added docker images for testing alternate platforms. See also https://github.com/python-pillow/docker-images. #2368\n  [wiredfool]\n\n- Removed PIL 1.0 era TK readme that concerns Windows 95/NT #2360\n  [wiredfool]\n\n- Prevent ``nose -v`` printing docstrings #2369\n  [hugovk]\n\n- Replaced absolute PIL imports with relative imports #2349\n  [radarhere]\n\n- Added context managers for file handling #2307\n  [radarhere]\n\n- Expose registered file extensions in Image #2343\n  [iggomez, radarhere]\n\n- Make mode descriptor cache initialization thread-safe. #2351\n  [gunjambi]\n\n- Updated Windows test dependencies: Freetype 2.7.1, zlib 1.2.11 #2331, #2332, #2357\n  [radarhere]\n\n- Followed upstream pngquant packaging reorg to libimagquant #2354\n  [radarhere]\n\n- Fix invalid string escapes #2352\n  [hugovk]\n\n- Add test for crop operation with no argument #2333\n  [radarhere]\n\n4.0.0 (2017-01-01)\n------------------\n\n- Refactor out postprocessing hack to load_end in PcdImageFile\n  [wiredfool]\n\n- Add center and translate option to Image.rotate. #2328\n  [lambdafu]\n\n- Test: Relax WMF test condition, fixes #2323.  #2327\n  [wiredfool]\n\n- Allow 0 size images, Fixes #2259, Reverts to pre-3.4 behavior.  #2262\n  [wiredfool]\n\n- SGI: Save uncompressed SGI/BW/RGB/RGBA files #2325\n  [jbltx]\n\n- Depends: Updated pngquant to 2.8.2 #2319\n  [radarhere]\n\n- Test: Added correctness tests for opening SGI images #2324\n  [wiredfool]\n\n- Allow passing a list or tuple of individual frame durations when saving a GIF #2298\n  [Xdynix]\n\n- Unified different GIF optimize conditions #2196\n  [radarhere]\n\n- Build: Refactor dependency installation #2305\n  [hugovk]\n\n- Test: Add python 3.6 to travis, tox #2304\n  [hugovk]\n\n- Test: Fix coveralls coverage for Python+C #2300\n  [hugovk]\n\n- Remove executable bit and shebang from OleFileIO.py #2308\n  [jwilk, radarhere]\n\n- PyPy: Buffer interface workaround #2294\n  [wiredfool]\n\n- Test: Switch to Ubuntu Trusty 14.04 on Travis CI #2294\n\n- Remove vendored version of olefile Python package in favor of upstream #2199\n  [jdufresne]\n\n- Updated comments to use print as a function #2234\n  [radarhere]\n\n- Set executable flag on selftest.py, setup.py and added shebang line #2282, #2277\n  [radarhere, homm]\n\n- Test: Increase epsilon for FreeType 2.7 as rendering is slightly different. #2286\n  [hugovk]\n\n- Test: Faster assert_image_similar #2279\n  [homm]\n\n- Removed deprecated internal \"stretch\" method #2276\n  [homm]\n\n- Removed the handles_eof flag in decode.c #2223\n  [wiredfool]\n\n- Tiff: Fix for writing Tiff to BytesIO using libtiff #2263\n  [wiredfool]\n\n- Doc: Design docs #2269\n  [wiredfool]\n\n- Test: Move tests requiring libtiff to test_file_libtiff #2273\n  [wiredfool]\n\n- Update Maxblock heuristic #2275\n  [wiredfool]\n\n- Fix for 2-bit palette corruption #2274\n  [pdknsk, wiredfool]\n\n- Tiff: Update info.icc_profile when using libtiff reader. #2193\n  [lambdafu]\n\n- Test: Fix bug in test_ifd_rational_save when libtiff is not available #2270\n  [ChristopherHogan]\n\n- ICO: Only save relevant sizes #2267\n  [hugovk]\n\n- ICO: Allow saving .ico files of 256x256 instead of 255x255 #2265\n  [hugovk]\n\n- Fix TIFFImagePlugin ICC color profile saving. #2087\n  [cskau]\n\n- Doc: Improved description of ImageOps.deform resample parameter #2256\n  [radarhere]\n\n- EMF: support negative bounding box coordinates #2249\n  [glexey]\n\n- Close file if opened in WalImageFile #2216\n  [radarhere]\n\n- Use Image._new() instead of _makeself() #2248\n  [homm]\n\n- SunImagePlugin fixes #2241\n  [wiredfool]\n\n- Use minimal scale for jpeg drafts #2240\n  [homm]\n\n- Updated dependency scripts to use FreeType 2.7, OpenJpeg 2.1.2, WebP 0.5.2 and Tcl/Tk 8.6.6 #2235, #2236, #2237, #2290, #2302\n  [radarhere]\n\n- Fix \"invalid escape sequence\" bytestring warnings in Python 3.6 #2186\n  [timgraham]\n\n- Removed support for Python 2.6 and Python 3.2 #2192\n  [jdufresne]\n\n- Setup: Raise custom exceptions when required/requested dependencies are not found #2213\n  [wiredfool]\n\n- Use a context manager in FontFile.save() to ensure file is always closed #2226\n  [jdufresne]\n\n- Fixed bug in saving to fp-objects in Python >= 3.4 #2227\n  [radarhere]\n\n- Use a context manager in ImageFont._load_pilfont() to ensure file is always closed #2232\n  [jdufresne]\n\n- Use generator expressions instead of list comprehension #2225\n  [jdufresne]\n\n- Close file after reading in ImagePalette.load() #2215\n  [jdufresne]\n\n- Changed behaviour of default box argument for paste method to match docs #2211\n  [radarhere]\n\n- Add support for another BMP bitfield #2221\n  [jmerdich]\n\n- Added missing top-level test __main__ #2222\n  [radarhere]\n\n- Replaced range(len()) #2197\n  [radarhere]\n\n- Fix for ImageQt Segfault, fixes #1370 #2182\n  [wiredfool]\n\n- Setup: Close file in setup.py after finished reading #2208\n  [jdufresne]\n\n- Setup: optionally use pkg-config (when present) to detect dependencies #2074\n  [garbas]\n\n- Search for tkinter first in builtins #2210\n  [matthew-brett]\n\n- Tests: Replace try/except/fail pattern with TestCase.assertRaises() #2200\n  [jdufresne]\n\n- Tests: Remove unused, open files at top level of tests #2188\n  [jdufresne]\n\n- Replace type() equality checks with isinstance #2184\n  [jdufresne]\n\n- Doc: Move ICO out of the list of read-only file formats #2180\n  [alexwlchan]\n\n- Doc: Fix formatting, too-short title underlines and malformed table #2175\n  [hugovk]\n\n- Fix BytesWarnings #2172\n  [jdufresne]\n\n- Use Integer division to eliminate deprecation warning. #2168\n  [mastermatt]\n\n- Doc: Update compatibility matrix\n  [daavve, wiredfool]\n\n\n3.4.2 (2016-10-18)\n------------------\n\n- Fix Resample coefficient calculation #2162\n  [homm]\n\n\n3.4.1 (2016-10-04)\n------------------\n\n- Allow lists as arguments for Image.new() #2149\n  [homm]\n\n- Fix fix for map.c overflow #2151  (also in 3.3.3)\n  [wiredfool]\n\n3.4.0 (2016-10-03)\n------------------\n\n- Removed Image.core.open_ppm, added negative image size checks in Image.py. #2146\n  [wiredfool]\n\n- Windows build: fetch dependencies from pillow-depends #2095\n  [hugovk]\n\n- Add TIFF save_all writer. #2140\n  [lambdafu, vashek]\n\n- Move libtiff fd duplication to _load_libtiff #2141\n  [sekrause]\n\n- Speed up GIF save optimization step, fixes #2093. #2133\n  [wiredfool]\n\n- Fix for ImageCms Segfault, Issue #2037. #2131\n  [wiredfool]\n\n- Make Image.crop an immediate operation, not lazy. #2138\n  [wiredfool]\n\n- Skip empty values in ImageFileDirectory #2024\n  [homm]\n\n- Force reloading palette when using mmap in ImageFile. #2139\n  [lambdafu]\n\n- Fix \"invalid escape sequence\" warning in Python 3.6 #2136\n  [timgraham]\n\n- Update documentation about drafts #2137\n  [radarhere]\n\n- Converted documentation parameter format, comments to docstrings #2021\n  [radarhere]\n\n- Fixed typos #2128 #2142\n  [radarhere]\n\n- Renamed references to OS X to macOS #2125 2130\n  [radarhere]\n\n- Use truth value when checking for progressive and optimize option on save #2115, #2129\n  [radarhere]\n\n- Convert DPI to ints when saving as JPEG #2102\n  [radarhere]\n\n- Added append_images parameter to GIF saving #2103\n  [radarhere]\n\n- Speedup paste with masks up to 80% #2015\n  [homm]\n\n- Rewrite DDS decoders in C, add DXT3 and BC7 decoders #2068\n  [Mischanix]\n\n- Fix PyArg_ParseTuple format in getink() #2070\n  [arjennienhuis]\n\n- Fix saving originally missing TIFF tags. #2111\n  [anntzer]\n\n- Allow pathlib.Path in Image.open on Python 2.7 #2110\n  [patricksnape]\n\n- Use modern base64 interface over deprecated #2121\n  [hugovk]\n\n- ImageColor.getrgb hexadecimal RGBA #2114\n  [homm]\n\n- Test fix for bigendian machines #2092\n  [wiredfool]\n\n- Resampling lookups, trailing empty coefficients, precision #2008\n  [homm]\n\n- Add (un)packing between RGBA and BGRa #2057\n  [arjennienhuis]\n\n- Added return for J2k (and fpx) Load to return a pixel access object #2061\n  [wiredfool]\n\n- Skip failing numpy tests on Pypy <= 5.3.1 #2090\n  [arjennienhuis]\n\n- Show warning when trying to save RGBA image as JPEG #2010\n  [homm]\n\n- Respect pixel centers during transform #2022\n  [homm]\n\n- TOC for supported file formats #2056\n  [polarize]\n\n- Fix conversion of bit images to numpy arrays Fixes #350, #2058\n  [matthew-brett]\n\n- Add ImageOps.scale to expand or contract a PIL image by a factor #2011\n  [vlmath]\n\n- Flake8 fixes #2050\n  [hugovk]\n\n- Updated freetype to 2.6.5 on Appveyor builds #2035\n  [radarhere]\n\n- PCX encoder fixes #2023, pr #2041\n  [homm]\n\n- Docs: Windows console prompts are > #2031\n  [techtonik]\n\n- Expose Pillow package version as PIL.__version__ #2027\n  [techtonik]\n\n- Add Box and Hamming filters for resampling #1959\n  [homm]\n\n- Retain a reference to core image object in PyAccess #2009\n  [homm]\n\n3.3.3 (2016-10-04)\n------------------\n\n- Fix fix for map.c overflow #2151\n  [wiredfool]\n\n3.3.2 (2016-10-03)\n------------------\n\n- Fix negative image sizes in Storage.c #2146\n  [wiredfool]\n\n- Fix integer overflow in map.c #2146\n  [wiredfool]\n\n3.3.1 (2016-08-18)\n------------------\n\n- Fix C90 compilation error for Tcl / Tk rewrite #2033\n  [matthew-brett]\n\n- Fix image loading when rotating by 0 deg #2052\n  [homm]\n\n3.3.0 (2016-07-01)\n------------------\n\n- Fixed enums for Resolution Unit and Predictor in TiffTags.py #1998\n  [wiredfool]\n\n- Fix issue converting P mode to LA #1986\n  [didrix]\n\n- Moved test_j2k_overflow to check_j2k_overflow, prevent DOS of our 32bit testing machines #1995\n  [wiredfool]\n\n- Skip CRC checks in PNG files when LOAD_TRUNCATED_IMAGES is enabled #1991\n  [kkopachev]\n\n- Added CMYK mode for opening EPS files #1826\n  [radarhere]\n\n- Docs: OSX build instruction clarification #1994\n  [wiredfool]\n\n- Docs: Filter comparison table #1993\n  [homm]\n\n- Removal of pthread based Incremental.c, new interface for file decoders/encoders to access the python file. Fixes assorted J2k Hangs. #1934\n  [wiredfool]\n\n- Skip unnecessary passes when resizing #1954\n  [homm]\n\n- Removed duplicate code in ImagePalette #1832\n  [radarhere]\n\n- test_imagecms: Reduce precision of extended info due to 32 bit machine precision #1990\n  [AbdealiJK]\n\n- Binary Tiff Metadata/ICC profile. #1988\n  [wiredfool]\n\n- Ignore large text blocks in PNG if LOAD_TRUNCATED_IMAGES is enabled #1970\n  [homm]\n\n- Replace index = index+1 in docs with +=1\n  [cclauss]\n\n- Skip extra 0xff00 in jpeg #1977\n  [kkopachev]\n\n- Use bytearray for palette mutable storage #1985\n  [radarhere, wiredfool]\n\n- Added additional uint modes for Image.fromarray, more extensive tests of fromarray #1984\n  [mairsbw, wiredfool]\n\n- Fix for program importing PyQt4 when PyQt5 also installed #1942\n  [hugovk]\n\n- Changed depends/install_*.sh urls to point to github pillow-depends repo #1983\n  [wiredfool]\n\n- Allow ICC profile from ``encoderinfo`` while saving PNGs #1909\n  [homm]\n\n- Fix integer overflow on ILP32 systems (32-bit Linux). #1975\n  [lambdafu]\n\n- Change function declaration to match Tcl_CmdProc type #1966\n  [homm]\n\n- Integer overflow checks on all calls to \\*alloc #1781\n  [wiredfool]\n\n- Change equals method on Image so it short circuits #1967\n  [mattBoros]\n\n- Runtime loading of TCL/TK libraries, eliminating build time dependency. #1932\n  [matthew-brett]\n\n- Cleanup of transform methods #1941\n  [homm]\n\n- Fix \"Fatal Python error: UNREF invalid object\" in debug builds #1936\n  [wiredfool]\n\n- Setup fixes for Alpine linux #1937\n  [wiredfool]\n\n- Split resample into horizontal + vertical passes #1933\n  [homm]\n\n- Box blur with premultiplied alpha #1914\n  [homm]\n\n- Add libimagequant support in quantize() #1889\n  [rr-]\n\n- Added internal Premultiplied luminosity (La) mode #1912\n  [homm]\n\n- Fixed point integer resample #1881\n  [homm]\n\n- Removed docs/BUILDME script #1924\n  [radarhere]\n\n- Moved comments to docstrings  #1926\n  [hugovk]\n\n- Include Python.h before wchar.h so _GNU_SOURCE is set consistently #1906\n  [hugovk]\n\n- Updated example decoder in documentation #1899\n  [radarhere]\n\n- Added support for GIF comment extension #1896\n  [radarhere]\n\n- Removed support for pre- 1.5.2 list form of Image info in Image.new #1897\n  [radarhere]\n\n- Fix typos in TIFF tags #1918\n  [radarhere]\n\n- Skip tests that require libtiff if it is not installed #1893 (fixes #1866)\n  [wiredfool]\n\n- Skip test when icc profile is not available, fixes #1887.  #1892\n  [doko42]\n\n- Make deprecated functions raise NotImplementedError instead of Exception. #1862, #1890\n  [daniel-leicht, radarhere]\n\n- Replaced os.system with subprocess.call in setup.py #1879\n  [radarhere]\n\n- Corrected Image show documentation #1886\n  [radarhere]\n\n- Added check for executable permissions to ImageShow #1880\n  [radarhere]\n\n- Fixed tutorial code and added explanation #1877\n  [radarhere]\n\n- Added OS X support for ImageGrab grabclipboard #1837\n  [radarhere]\n\n- Combined duplicate code in ImageTk #1856\n  [radarhere]\n\n- Added --disable-platform-guessing option to setup.py build extension #1861\n  [angeloc]\n\n- Fixed loading Transparent PNGs with a transparent black color #1840\n  [olt]\n\n- Add support for LA mode in Image.fromarray #1865\n  [pierriko]\n\n- Make ImageFile load images in read-only mode #1864\n  [hdante]\n\n- Added _accept hook for XVThumbImagePlugin #1853\n  [radarhere]\n\n- Test TIFF with LZW compression #1855, TGA RLE file #1854\n  [hugovk]\n\n- Improved SpiderImagePlugin help text #1863\n  [radarhere]\n\n- Updated Sphinx project description #1870\n  [radarhere]\n\n- Remove support for Python 3.0 from _imaging.c #1851\n  [radarhere]\n\n- Jpeg qtables are unsigned chars #1814, #1921\n  [thebostik]\n\n- Added additional EXIF tags #1841, TIFF Tags #1821\n  [radarhere]\n\n- Changed documentation to refer to ImageSequence Iterator #1833\n  [radarhere]\n\n- Fix Fedora prerequisites in installation docs, depends script #1842\n  [living180]\n\n- Added _accept hook for PixarImagePlugin #1843\n  [radarhere]\n\n- Removed outdated scanner classifier #1823\n  [radarhere]\n\n- Combined identical error messages in _imaging #1825\n  [radarhere]\n\n- Added debug option for setup.py to trace header and library finding #1790\n  [wiredfool]\n\n- Fix doc building on travis #1820, #1844\n  [wiredfool]\n\n- Fix for DIB/BMP images #1813, #1847\n  [wiredfool]\n\n- Add PixarImagePlugin file extension #1809\n  [radarhere]\n\n- Catch struct.errors when verifying png files #1805\n  [wiredfool]\n\n- SpiderImagePlugin: raise an error when seeking in a non-stack file #1794\n  [radarhere, jmichalon]\n\n- Added support for 2/4 bpp Tiff grayscale images #1789\n  [zwhfly]\n\n- Removed unused variable from selftest #1788\n  [radarhere]\n\n- Added warning for as_dict method (deprecated in 3.0.0) #1799\n  [radarhere]\n\n- Removed powf support for older Python versions #1784\n  [radarhere]\n\n- Health fixes #1625 #1903\n  [radarhere]\n\n3.2.0 (2016-04-01)\n------------------\n\n- Added install docs for Fedora 23 and FreeBSD #1729, #1739, #1792\n  [koobs, zandermartin, wiredfool]\n\n- Fixed TIFF multiframe load when the frames have different compression types #1782\n  [radarhere, geka000]\n\n- Added __copy__ method to Image #1772\n  [radarhere]\n\n- Updated dates in PIL license in OleFileIO README #1787\n  [radarhere]\n\n- Corrected Tiff tag names #1786\n  [radarhere]\n\n- Fixed documented name of JPEG property #1783\n  [radarhere]\n\n- Fixed UnboundLocalError when loading a corrupt jpeg2k file #1780\n  [wiredfool]\n\n- Fixed integer overflow in path.c #1773\n  [wiredfool, nedwill]\n\n- Added debug to command line help text for pilprint #1766\n  [radarhere]\n\n- Expose many more fields in ICC Profiles #1756\n  [lambdafu]\n\n- Documentation changes, URL update, transpose, release checklist\n  [radarhere]\n\n- Fixed saving to nonexistent files specified by pathlib.Path objects #1748 (fixes #1747)\n  [radarhere]\n\n- Round Image.crop arguments to the nearest integer #1745 (fixes #1744)\n  [hugovk]\n\n- Fix uninitialized variable warning in _imaging.c:getink #1663 (fixes #486)\n  [wiredfool]\n\n- Disable multiprocessing install on cygwin #1700 (fixes #1690)\n  [wiredfool]\n\n- Fix the error reported when libz is not found #1764\n  [wiredfool]\n\n- More general error check to avoid Symbol not found: _PyUnicodeUCS2_AsLatin1String on OS X #1761\n  [wiredfool]\n\n- Added py35 to tox envlist #1724\n  [radarhere]\n\n- Fix EXIF tag name typos #1736\n  [zarlant, radarhere]\n\n- Updated freetype to 2.6.3, Tk/Tcl to 8.6.5 and 8.5.19 #1725, #1752\n  [radarhere]\n\n- Add a loader for the FTEX format from Independence War 2: Edge of Chaos #1688\n  [jleclanche]\n\n- Improved alpha_composite documentation #1698\n  [radarhere]\n\n- Extend ImageDraw.text method to pass on multiline_text method specific arguments #1647\n  [radarhere]\n\n- Allow ImageSequence to seek to zero #1686\n  [radarhere]\n\n- ImageSequence Iterator is now an iterator #1649\n  [radarhere]\n\n- Updated windows test builds to jpeg9b #1673\n  [radarhere]\n\n- Fixed support for .gbr version 1 images, added support for version 2 in GbrImagePlugin #1653\n  [wiredfool]\n\n- Clarified which YCbCr format is used #1677\n  [radarhere]\n\n- Added TiffTags documentation, Moved windows build documentation to winbuild/ #1667\n  [wiredfool]\n\n- Add tests for OLE file based formats #1678\n  [radarhere]\n\n- Add TIFF IFD test #1671\n  [radarhere]\n\n- Add a basic DDS image plugin with more tests #1654\n  [jleclanche, hugovk, wiredfool]\n\n- Fix incorrect conditional in encode.c #1638\n  [manisandro]\n\n\n3.1.2 (2016-04-01)\n------------------\n\n- Fixed an integer overflow in Jpeg2KEncode.c causing a buffer overflow. CVE-2016-3076\n  [wiredfool]\n\n3.1.1 (2016-02-04)\n------------------\n\n- Fixed an integer overflow in Resample.c causing writes in the Python heap.\n  [nedwill]\n\n- Fixed a buffer overflow in PcdDecode.c causing a segfault when opening PhotoCD files. CVE-2016-2533\n  [wiredfool]\n\n- Fixed a buffer overflow in FliDecode.c causing a segfault when opening FLI files. CVE-2016-0775\n  [wiredfool]\n\n- Fixed a buffer overflow in TiffDecode.c causing an arbitrary amount of memory to be overwritten when opening a specially crafted invalid TIFF file. CVE-2016-0740\n  [wiredfool]\n\n\n3.1.0 (2016-01-04)\n------------------\n\n- Fixing test failures on Python 2.6/Windows #1633\n  [wiredfool]\n\n- Limit metadata tags when writing using libtiff #1620\n  [wiredfool]\n\n- Rolling back exif support to pre-3.0 format #1627\n  [wiredfool]\n\n- Fix Divide by zero in Exif, add IFDRational class #1531\n  [wiredfool]\n\n- Catch the IFD error near the source #1622\n  [wiredfool]\n\n- Added release notes for 3.1.0 #1623\n  [radarhere]\n\n- Updated spacing to be consistent between multiline methods #1624\n  [radarhere]\n\n- Let EditorConfig take care of some basic formatting #1489\n  [hugovk]\n\n- Restore gpsexif data to the v1 form #1619\n  [wiredfool]\n\n- Add /usr/local include and library directories for freebsd #1613\n  [leforestier]\n\n- Updated installation docs for new versions of dependencies #1611\n  [radarhere]\n\n- Removed unrunnable test file #1610\n  [radarhere]\n\n- Changed register calls to use format property #1608\n  [radarhere]\n\n- Added field type constants to TiffTags #1596\n  [radarhere]\n\n- Allow saving RowsPerStrip with libtiff #1594\n  [wiredfool]\n\n- Enabled conversion to numpy array for HSV images #1578\n  [cartisan]\n\n- Changed some urls in the docs to use https #1580\n  [hugovk]\n\n- Removed logger.exception from ImageFile.py #1590\n  [radarhere]\n\n- Removed warnings module check #1587\n  [radarhere]\n\n- Changed arcs, chords and pie slices to use floats #1577\n  [radarhere]\n\n- Update unit test asserts #1584, #1598\n  [radarhere]\n\n- Fix command to invoke ghostscript for eps files #1478\n  [baumatron, radarhere]\n\n- Consistent multiline text spacing #1574\n  [wiredfool, hugovk]\n\n- Removed unused lines in BDFFontFile #1530\n  [radarhere]\n\n- Changed ImageQt import of Image #1560\n  [radarhere, ericfrederich]\n\n- Throw TypeError if no cursors were found in .cur file #1556\n  [radarhere]\n\n- Fix crash in ImageTk.PhotoImage on win-amd64 #1553\n  [cgohlke]\n\n- ExtraSamples tag should be a SHORT, not a BYTE #1555\n  [Nexuapex]\n\n- Docs and code health fixes #1565 #1566 #1581 #1586 #1591 #1621\n  [radarhere]\n\n- Updated freetype to 2.6.2 #1564\n  [radarhere]\n\n- Updated WebP to 0.5.0 for Travis #1515 #1609\n  [radarhere]\n\n- Fix missing 'version' key value in __array_interface__ #1519\n  [mattip]\n\n- Replaced os.popen with subprocess.Popen to pilprint script #1523\n  [radarhere]\n\n- Catch OverflowError in SpiderImagePlugin #1545\n  [radarhere, MrShark]\n\n- Fix the definition of icc_profile in TiffTags #1539\n  [wiredfool]\n\n- Remove old _imagingtiff.c and pilplus stuff #1499\n  [hugovk]\n\n- Fix Exception when requiring jpeg #1501\n  [hansmosh]\n\n- Dependency scripts for Debian and Ubuntu #1486\n  [wiredfool]\n\n- Added Usage message to painter script #1482\n  [radarhere]\n\n- Add tag info for iccprofile, fixes #1462. #1465\n  [wiredfool]\n\n- Added some requirements for make release-test #1451\n  [wiredfool]\n\n- Flatten tiff metadata value SAMPLEFORMAT to initial value #1467 (fixes #1466)\n  [wiredfool]\n\n- Fix handling of pathlib in Image.save #1464 (fixes #1460)\n  [wiredfool]\n\n- Make tests more robust #1469\n  [hugovk]\n\n- Use correctly sized pointers for windows handle types #1458\n  [nu744]\n\n3.0.0 (2015-10-01)\n------------------\n\n- Check flush method existence for file-like object #1398\n  [mrTable, radarhere]\n\n- Added PDF multipage saving #1445\n  [radarhere]\n\n- Removed deprecated code, Image.tostring, Image.fromstring, Image.offset, ImageDraw.setink, ImageDraw.setfill, ImageFileIO, ImageFont.FreeTypeFont and ImageFont.truetype ``file`` kwarg, ImagePalette private _make functions, ImageWin.fromstring and ImageWin.tostring #1343\n  [radarhere]\n\n- Load more broken images #1428\n  [homm]\n\n- Require zlib and libjpeg #1439\n  [wiredfool]\n\n- Preserve alpha when converting from a QImage to a Pillow Image by using png instead of ppm #1429\n  [ericfrederich]\n\n- Qt needs 32 bit aligned image data #1430\n  [ericfrederich]\n\n- Tiff ImageFileDirectory rewrite #1419\n  [anntzer, wiredfool, homm]\n\n- Removed spammy debug logging #1423\n  [wiredfool]\n\n- Save as GiF89a with support for animation parameters #1384\n  [radarhere]\n\n- Correct convert matrix docs #1426\n  [wiredfool]\n\n- Catch TypeError in _getexif #1414\n  [radarhere, wiredfool]\n\n- Fix for UnicodeDecodeError in TiffImagePlugin #1416\n  [bogdan199, wiredfool]\n\n- Dedup code in image.open #1415\n  [wiredfool]\n\n- Skip any number extraneous chars at the end of JPEG chunks #1337\n  [homm]\n\n- Single threaded build for pypy3, refactor #1413\n  [wiredfool]\n\n- Fix loading of truncated images with LOAD_TRUNCATED_IMAGES enabled #1366\n  [homm]\n\n- Documentation update for concepts: bands #1406\n  [merriam]\n\n- Add Solaris/SmartOS include and library directories #1356\n  [njones11]\n\n- Improved handling of getink color #1387\n  [radarhere]\n\n- Disable compiler optimizations for topalette and tobilevel functions for all msvc versions #1402 (fixes #1357)\n  [cgohlke]\n\n- Skip ImageFont_bitmap test if _imagingft C module is not installed #1409\n  [homm]\n\n- Add param documentation to ImagePalette #1381\n  [bwrsandman]\n\n- Corrected scripts path #1407\n  [radarhere]\n\n- Updated libtiff to 4.0.6 #1405, #1421\n  [radarhere]\n\n- Updated Platform Support for Yosemite #1403\n  [radarhere]\n\n- Fixed infinite loop on truncated file #1401\n  [radarhere]\n\n- Check that images are L mode in ImageMorph methods #1400\n  [radarhere]\n\n- In tutorial of pasting images, add to mask text #1389\n  [merriam]\n\n- Style/health fixes #1391, #1397, #1417, #1418\n  [radarhere]\n\n- Test on Python 3.5 dev and 3.6 nightly #1361\n  [hugovk]\n\n- Fix fast rotate operations #1373\n  [radarhere]\n\n- Added support for pathlib Path objects to open and save #1372\n  [radarhere]\n\n- Changed register calls to use format property #1333\n  [radarhere]\n\n- Added support for ImageGrab.grab to OS X #1367, #1443\n  [radarhere, hugovk]\n\n- Fixed PSDraw stdout Python 3 compatibility #1365\n  [radarhere]\n\n- Added Python 3.3 to AppVeyor #1363\n  [radarhere]\n\n- Treat MPO with unknown header as base JPEG file #1350\n  [hugovk, radarhere]\n\n- Added various tests #1330, #1344\n  [radarhere]\n\n- More ImageFont tests #1327\n  [hugovk]\n\n- Use logging instead of print #1207\n  [anntzer]\n\n2.9.0 (2015-07-01)\n------------------\n\n- Added test for GimpPaletteFile #1324\n  [radarhere]\n\n- Merged gifmaker script to allow saving of multi-frame GIF images #1320\n  [radarhere]\n\n- Added is_animated property to multi-frame formats #1319\n  [radarhere]\n\n- Fixed ValueError in Python 2.6 #1315 #1316\n  [cgohlke, radarhere]\n\n- Fixed tox test script path #1308\n  [radarhere]\n\n- Added width and height properties #1304\n  [radarhere]\n\n- Update tiff and tk tcl 8.5 versions #1303\n  [radarhere, wiredfool]\n\n- Add functions to convert: Image <-> QImage; Image <-> QPixmap #1217\n  [radarhere, rominf]\n\n- Remove duplicate code in gifmaker script #1294\n  [radarhere]\n\n- Multiline text in ImageDraw #1177\n  [allo-, radarhere]\n\n- Automated Windows CI/build support #1278\n  [wiredfool]\n\n- Removed support for Tk versions earlier than 8.4 #1288\n  [radarhere]\n\n- Fixed polygon edge drawing #1255 (fixes #1252)\n  [radarhere]\n\n- Check prefix length in _accept methods #1267\n  [radarhere]\n\n- Register MIME type for BMP #1277\n  [coldmind]\n\n- Adjusted ImageQt use of unicode() for 2/3 compatibility #1218\n  [radarhere]\n\n- Identify XBM file created with filename including underscore #1230 (fixes #1229)\n  [hugovk]\n\n- Copy image when saving in GifImagePlugin #1231 (fixes #718)\n  [radarhere]\n\n- Removed support for FreeType 2.0 #1247\n  [radarhere]\n\n- Added background saving to GifImagePlugin #1273\n  [radarhere]\n\n- Provide n_frames attribute to multi-frame formats #1261\n  [anntzer, radarhere]\n\n- Add duration and loop set to GifImagePlugin #1172, #1269\n  [radarhere]\n\n- Ico files are little endian #1232\n  [wiredfool]\n\n- Upgrade olefile from 0.30 to 0.42b #1226\n  [radarhere, decalage2]\n\n- Setting transparency value to 0 when the tRNS contains only null byte(s) #1239\n  [juztin]\n\n- Separated out feature checking from selftest #1233\n  [radarhere]\n\n- Style/health fixes\n  [radarhere]\n\n- Update WebP from 0.4.1 to 0.4.3 #1235\n  [radarhere]\n\n- Release GIL during image load (decode) #1224\n  [lkesteloot]\n\n- Added icns save #1185\n  [radarhere]\n\n- Fix putdata memory leak #1196\n  [benoit-pierre]\n\n- Keep user-specified ordering of icon sizes #1193\n  [karimbahgat]\n\n- Tiff: allow writing floating point tag values #1113\n  [bpedersen2]\n\n2.8.2 (2015-06-06)\n------------------\n\n- Bug fix: Fixed Tiff handling of bad EXIF data\n  [radarhere]\n\n2.8.1 (2015-04-02)\n------------------\n\n- Bug fix: Catch struct.error on invalid JPEG, fixes #1163.  #1165\n  [wiredfool, hugovk]\n\n2.8.0 (2015-04-01)\n------------------\n\n- Fix 32-bit BMP loading (RGBA or RGBX) #1125\n  [artscoop]\n\n- Fix UnboundLocalError in ImageFile #1131\n  [davarisg]\n\n- Re-enable test image caching #982\n  [hugovk, homm]\n\n- Fix: Cannot identify EPS images #1152 (fixes #1104)\n  [hugovk]\n\n- Configure setuptools to run nosetests, fixes #729\n  [aclark4life]\n\n- Style/health fixes\n  [radarhere, hugovk]\n\n- Add support for HTTP response objects to Image.open() #1151\n  [mfitzp]\n\n- Improve reference docs for PIL.ImageDraw.Draw.pieslice() #1145\n  [audreyr]\n\n- Added copy method font_variant() and accessible properties to truetype() #1123\n  [radarhere]\n\n- Fix ImagingEffectNoise #1128\n  [hugovk]\n\n- Remove unreachable code #1126\n  [hugovk]\n\n- Let Python do the endian stuff + tests #1121\n  [amoibos, radarhere]\n\n- Fix webp decode memory leak #1114\n  [benoit-pierre]\n\n- Fast path for opaque pixels in RGBa unpacker #1088\n  [bgilbert]\n\n- Enable basic support for 'RGBa' raw encoding/decoding #1096\n  [immerrr]\n\n- Fix pickling L mode images with no palette, #1095\n  [hugovk]\n\n- iPython display hook #1091\n  [wiredfool]\n\n- Adjust buffer size when quality=keep #1079 (fixes #148 again)\n  [wiredfool]\n\n- Fix for corrupted bitmaps embedded in truetype fonts #1072\n  [jackyyf, wiredfool]\n\n2.7.0 (2015-01-01)\n------------------\n\n- Split Sane into a separate repo: https://github.com/python-pillow/Sane\n  [hugovk]\n\n- Look for OS X and Linux fonts in common places #1054\n  [charleslaw]\n\n- Fix CVE-2014-9601, potential PNG decompression DOS #1060\n  [wiredfool]\n\n- Use underscores, not spaces, in TIFF tag kwargs #1044, #1058\n  [anntzer, hugovk]\n\n- Update PSDraw for Python3, add tests #1055\n  [hugovk]\n\n- Use Bicubic filtering by default for thumbnails. Don't use Jpeg Draft mode for thumbnails #1029\n  [homm]\n\n- Fix MSVC compiler error: Use Py_ssize_t instead of ssize_t #1051\n  [cgohlke]\n\n- Fix compiler error: MSVC needs variables defined at the start of the block #1048\n  [cgohlke]\n\n- The GIF Palette optimization algorithm is only applicable to mode='P' or 'L' #993\n  [moriyoshi]\n\n- Use PySide as an alternative to PyQt4/5 #1024\n  [holg]\n\n- Replace affine-based im.resize implementation with convolution-based im.stretch #997\n  [homm]\n\n- Replace Gaussian Blur implementation with iterated fast box blur. #961  Note: Radius parameter is interpreted differently than before.\n  [homm]\n\n- Better docs explaining import _imaging failure #1016, build #1017, mode #1018, PyAccess, PixelAccess objects #1019 Image.quantize #1020 and Image.save #1021\n  [wiredfool]\n\n- Fix for saving TIFF image into an io.BytesIO buffer #1011\n  [mfergie]\n\n- Fix antialias compilation on debug versions of Python #1010\n  [wiredfool]\n\n- Fix for Image.putdata segfault #1009\n  [wiredfool]\n\n- Ico save, additional tests #1007\n  [exherb]\n\n- Use PyQt4 if it has already been imported, otherwise prefer PyQt5 #1003\n  [AurelienBallier]\n\n- Speedup resample implementation up to 2.5 times #977\n  [homm]\n\n- Speed up rotation by using cache aware loops, added transpose to rotations #994\n  [homm]\n\n- Fix Bicubic interpolation #970\n  [homm]\n\n- Support for 4-bit grayscale TIFF images #980\n  [hugovk]\n\n- Updated manifest #957\n  [wiredfool]\n\n- Fix PyPy 2.4 regression #958\n  [wiredfool]\n\n- Webp Metadata Skip Test comments #954\n  [wiredfool]\n\n- Fixes for things rpmlint complains about #942\n  [manisandro]\n\n2.6.2 (2015-01-01)\n------------------\n\n- Fix CVE-2014-9601, potential PNG decompression DOS #1060\n  [wiredfool]\n\n- Fix Regression in PyPy 2.4 in streamio  #958\n  [wiredfool]\n\n2.6.1 (2014-10-11)\n------------------\n\n- Fix SciPy regression in Image.resize #945\n  [wiredfool]\n\n- Fix manifest to include all test files.\n  [aclark4life]\n\n2.6.0 (2014-10-01)\n------------------\n\n- Relax precision of ImageDraw tests for x86, GimpGradient for PPC #930\n  [wiredfool]\n\n2.6.0-rc1 (2014-09-29)\n----------------------\n\n- Use redistributable image for testing #884\n  [hugovk]\n\n- Use redistributable ICC profiles for testing, skip if not available #923\n  [wiredfool]\n\n- Additional documentation for JPEG info and save options #922\n  [wiredfool]\n\n- Fix JPEG Encoding memory leak when exif or qtables were specified #921\n  [wiredfool]\n\n- Image.tobytes() and Image.tostring() documentation update #916 #917\n  [mgedmin]\n\n- On Windows, do not execute convert.exe without specifying path #912\n  [cgohlke]\n\n- Fix msvc build error #911\n  [cgohlke]\n\n- Fix for handling P + transparency -> RGBA conversions #904\n  [wiredfool]\n\n- Retain alpha in ImageEnhance operations #909\n  [wiredfool]\n\n- Jpeg2k Decode/encode memory leak fix #898\n  [joshware, wiredfool]\n\n- EpsFilePlugin Speed improvements #886\n  [wiredfool, karstenw]\n\n- Don't resize if already the right size #892\n  [radarhere]\n\n- Fix for reading multipage TIFFs #885\n  [kostrom, wiredfool]\n\n- Correctly handle saving gray and CMYK JPEGs with quality=keep #857\n  [etienned]\n\n- Correct duplicate Tiff Metadata and Exif tag values\n  [hugovk]\n\n- Windows fixes #871\n  [wiredfool]\n\n- Fix TGA files with image ID field #856\n  [megabuz]\n\n- Fixed wrong P-mode of small, unoptimized L-mode GIF #843\n  [uvNikita]\n\n- Fixed CVE-2014-3598, a DOS in the Jpeg2KImagePlugin\n  [Andrew Drake]\n\n- Fixed CVE-2014-3589, a DOS in the IcnsImagePlugin\n  [Andrew Drake]\n\n- setup.py: Close open file handle before deleting #844\n  [divergentdave]\n\n- Return Profile with Transformed Images #837\n  [wiredfool]\n\n- Changed docstring to refer to the correct function #836\n  [MatMoore]\n\n- Adding coverage support for C code tests #833\n  [wiredfool]\n\n- PyPy performance improvements #821\n  [wiredfool]\n\n- Added support for reading MPO files #822\n  [Feneric]\n\n- Added support for encoding and decoding iTXt chunks #818\n  [dolda2000]\n\n- HSV Support #816\n  [wiredfool]\n\n- Removed unusable ImagePalette.new()\n  [hugovk]\n\n- Fix Scrambled XPM #808\n  [wiredfool]\n\n- Doc cleanup\n  [wiredfool]\n\n- Fix ``ImageStat`` docs #796\n  [akx]\n\n- Added docs for ExifTags #794\n  [Wintermute3]\n\n- More tests for CurImagePlugin, DcxImagePlugin, Effects.c, GimpGradientFile, ImageFont, ImageMath, ImagePalette, IptcImagePlugin, SpiderImagePlugin, SgiImagePlugin, XpmImagePlugin and _util\n  [hugovk]\n\n- Fix return value of FreeTypeFont.textsize() does not include font offsets #784\n  [tk0miya]\n\n- Fix dispose calculations for animated GIFs #765\n  [larsjsol]\n\n- Added class checking to Image __eq__ function #775\n  [radarhere, hugovk]\n\n- Test PalmImagePlugin and method to skip known bad tests #776\n  [hugovk, wiredfool]\n\n2.5.3 (2014-08-18)\n------------------\n\n- Fixed CVE-2014-3598, a DOS in the Jpeg2KImagePlugin (backport)\n  [Andrew Drake]\n\n\n2.5.2 (2014-08-13)\n------------------\n\n- Fixed CVE-2014-3589, a DOS in the IcnsImagePlugin (backport)\n  [Andrew Drake]\n\n2.5.1 (2014-07-10)\n------------------\n\n- Fixed install issue if Multiprocessing.Pool is not available\n  [wiredfool]\n\n- 32bit mult overflow fix #782\n  [wiredfool]\n\n2.5.0 (2014-07-01)\n------------------\n\n- Imagedraw rewrite #737\n  [terseus, wiredfool]\n\n- Add support for multithreaded test execution #755\n  [wiredfool]\n\n- Prevent shell injection #748\n  [mbrown1413, wiredfool]\n\n- Support for Resolution in BMP files #734\n  [gcq]\n\n- Fix error in setup.py for Python 3 #744\n  [matthew-brett]\n\n- Pyroma fix and add Python 3.4 to setup metadata #742\n  [wirefool]\n\n- Top level flake8 fixes #741\n  [aclark4life]\n\n- Remove obsolete Animated Raster Graphics (ARG) support #736\n  [hugovk]\n\n- Fix test_imagedraw failures #727\n  [cgohlke]\n\n- Fix AttributeError: class Image has no attribute 'DEBUG' #726\n  [cgohlke]\n\n- Fix msvc warning: 'inline' : macro redefinition #725\n  [cgohlke]\n\n- Cleanup #654\n  [dvska, hugovk, wiredfool]\n\n- 16-bit monochrome support for JPEG2000 #730\n  [videan42]\n\n- Fixed ImagePalette.save\n  [brightpisces]\n\n- Support JPEG qtables #677\n  [csinchok]\n\n- Add binary morphology addon\n  [dov, wiredfool]\n\n- Decompression bomb protection #674\n  [hugovk]\n\n- Put images in a single directory #708\n  [hugovk]\n\n- Support OpenJpeg 2.1 #681\n  [al45tair, wiredfool]\n\n- Remove unistd.h #include for all platforms #704\n  [wiredfool]\n\n- Use unittest for tests\n  [hugovk]\n\n- ImageCms fixes\n  [hugovk]\n\n- Added more ImageDraw tests\n  [hugovk]\n\n- Added tests for Spider files\n  [hugovk]\n\n- Use libtiff to write any compressed tiff files #669\n  [wiredfool]\n\n- Support for pickling Image objects\n  [hugovk]\n\n- Fixed resolution handling for EPS thumbnails #619\n  [eliempje]\n\n- Fixed rendering of some binary EPS files (Issue #302)\n  [eliempje]\n\n- Rename variables not to use built-in function names #670\n  [hugovk]\n\n- Ignore junk JPEG markers\n  [hugovk]\n\n- Change default interpolation for Image.thumbnail to Image.ANTIALIAS\n  [hugovk]\n\n- Add tests and fixes for saving PDFs\n  [hugovk]\n\n- Remove transparency resource after P->RGBA conversion\n  [hugovk]\n\n- Clean up preprocessor cruft for Windows #652\n  [CounterPillow]\n\n- Adjust Homebrew freetype detection logic #656\n  [jacknagel]\n\n- Added Image.close, context manager support\n  [wiredfool]\n\n- Added support for 16 bit PGM files\n  [wiredfool]\n\n- Updated OleFileIO to version 0.30 from upstream #618\n  [hugovk]\n\n- Added support for additional TIFF floating point format\n  [Hijackal]\n\n- Have the tempfile use a suffix with a dot\n  [wiredfool]\n\n- Fix variable name used for transparency manipulations #604\n  [nijel]\n\n2.4.0 (2014-04-01)\n------------------\n\n- Indexed Transparency handled for conversions between L, RGB, and P modes #574 (fixes #510)\n  [wiredfool]\n\n- Conversions enabled from RGBA->P #574 (fixes #544)\n  [wiredfool]\n\n- Improved icns support #565\n  [al45tair]\n\n- Fix libtiff leaking open files #580 (fixes #526)\n  [wiredfool]\n\n- Fixes for Jpeg encoding in Python 3 #578 (fixes #577)\n  [wiredfool]\n\n- Added support for JPEG 2000 #547\n  [al45tair]\n\n- Add more detailed error messages to Image.py #566\n  [larsmans]\n\n- Avoid conflicting _expand functions in PIL & MINGW, fixes #538\n  [aclark4life]\n\n- Merge from Philippe Lagadec’s OleFileIO_PL fork #512\n  [vadmium]\n\n- Fix ImageColor.getcolor #534\n  [homm]\n\n- Make ICO files work with the ImageFile.Parser interface #525 (fixes #522)\n  [wiredfool]\n\n- Handle 32bit compiled python on 64bit architecture #521\n  [choppsv1]\n\n- Fix support for characters >128 using .pcf or .pil fonts in Py3k #517 (fixes #505)\n  [wiredfool]\n\n- Skip CFFI test earlier if it's not installed #516\n  [wiredfool]\n\n- Fixed opening and saving odd sized .pcx files #535 (fixes #523)\n  [wiredfool]\n\n- Fixed palette handling when converting from mode P->RGB->P\n  [d-schmidt]\n\n- Fixed saving mode P image as a PNG with transparency = palette color 0\n  [d-schmidt]\n\n- Improve heuristic used when saving progressive and optimized JPEGs with high quality values #504\n  [e98cuenc]\n\n- Fixed DOS with invalid palette size or invalid image size in BMP file\n  [wiredfool]\n\n- Added support for BMP version 4 and 5\n  [eddwardo, wiredfool]\n\n- Fix segfault in getfont when passed a memory resident font\n  [wiredfool]\n\n- Fix crash on Saving a PNG when icc-profile is None #496\n  [brutasse]\n\n- Cffi+Python implementation of the PixelAccess object\n  [wiredfool]\n\n- PixelAccess returns unsigned ints for I16 mode\n  [wiredfool]\n\n- Minor patch on booleans + Travis #474\n  [sciunto]\n\n- Look in multiarch paths in GNU platforms #511\n  [pinotree]\n\n- Add arch support for pcc64, s390, s390x, armv7l, aarch64 #475\n  [manisandro]\n\n- Add arch support for ppc\n  [wiredfool]\n\n- Correctly quote file names for WindowsViewer command\n  [cgohlke]\n\n- Prefer homebrew freetype over X11 freetype (but still allow both) #466\n  [dmckeone]\n\n2.3.2 (2014-08-13)\n------------------\n\n- Fixed CVE-2014-3589, a DOS in the IcnsImagePlugin (backport)\n  [Andrew Drake]\n\n2.3.1 (2014-03-14)\n------------------\n\n- Fix insecure use of tempfile.mktemp (CVE-2014-1932 CVE-2014-1933)\n  [wiredfool]\n\n2.3.0 (2014-01-01)\n------------------\n\n- Stop leaking filename parameter passed to getfont #459\n  [jpharvey]\n\n- Report availability of LIBTIFF during setup and selftest\n  [cgohlke]\n\n- Fix msvc build error C1189: \"No Target Architecture\" #460\n  [cgohlke]\n\n- Fix memory leak in font_getsize\n  [wiredfool]\n\n- Correctly prioritize include and library paths #442\n  [ohanar]\n\n- Image.point fixes for numpy.array and docs #441\n  [wiredfool]\n\n- Save the transparency header by default for PNGs #424\n  [wiredfool]\n\n- Support for PNG tRNS header when converting from RGB->RGBA #423\n  [wiredfool]\n\n- PyQT5 Support #418\n  [wiredfool]\n\n- Updates for saving color tiffs w/compression using libtiff #417\n  [wiredfool]\n\n- 2gigapix image fixes and redux\n  [wiredfool]\n\n- Save arbitrary tags in Tiff image files #369\n  [wiredfool]\n\n- Quote filenames and title before using on command line #398\n  [tmccombs]\n\n- Fixed Viewer.show to return properly #399\n  [tmccombs]\n\n- Documentation fixes\n  [wiredfool]\n\n- Fixed memory leak saving images as webp when webpmux is available #429\n  [cezarsa]\n\n- Fix compiling with FreeType 2.5.1 #427\n  [stromnov]\n\n- Adds directories for NetBSD #411\n  [deepy]\n\n- Support RGBA TIFF with missing ExtraSamples tag #393\n  [cgohlke]\n\n- Lossless WEBP Support #390\n  [wiredfool]\n\n- Take compression as an option in the save call for tiffs #389\n  [wiredfool]\n\n- Add support for saving lossless WebP. Just pass 'lossless=True' to save() #386\n  [liftoff]\n\n- LCMS support upgraded from version 1 to version 2 #380 (fixes #343)\n  [wiredfool]\n\n- Added more raw decoder 16 bit pixel formats #379\n  [svanheulen]\n\n- Document remaining Image* modules listed in PIL handbook\n  [irksep]\n\n- Document ImageEnhance, ImageFile, ImageFilter, ImageFont, ImageGrab, ImageMath, and ImageOps\n  [irksep]\n\n- Port and update docs for Image, ImageChops, ImageColor, and ImageDraw\n  [irksep]\n\n- Move or copy content from README.rst to docs/\n  [irksep]\n\n- Respect CFLAGS/LDFLAGS when searching for headers/libs\n  [iElectric]\n\n- Port PIL Handbook tutorial and appendices\n  [irksep]\n\n- Alpha Premultiplication support for transform and resize #364\n  [wiredfool]\n\n- Fixes to make Pypy 2.1.0 work on Ubuntu 12.04/64 #359\n  [wiredfool]\n\n2.2.2 (2013-12-11)\n------------------\n\n- Fix compiling with FreeType 2.5.1 #427\n  [stromnov]\n\n2.2.1 (2013-10-02)\n------------------\n\n- Error installing Pillow 2.2.0 on Mac OS X (due to hard dep on brew) #357 (fixes #356)\n  [wiredfool]\n\n2.2.0 (2013-10-02)\n------------------\n\n- Bug in image transformations resulting from uninitialized memory #348 (fixes #254)\n  [nikmolnar]\n\n- Fix for encoding of b_whitespace #346 (similar to closed issue #272)\n  [mhogg]\n\n- Add numpy array interface support for 16 and 32 bit integer modes #347 (fixes #273)\n  [cgohlke]\n\n- Partial fix for #290: Add preliminary support for TIFF tags.\n  [wiredfool]\n\n- Fix #251 and #326: circumvent classification of pngtest_bad.png as malware\n  [cgohlke]\n\n- Add typedef uint64_t for MSVC #339\n  [cgohlke]\n\n- setup.py: better support for C_INCLUDE_PATH, LD_RUN_PATH, etc. #336 (fixes #329)\n  [nu774]\n\n- _imagingcms.c: include windef.h to fix build issue on MSVC #335 (fixes #328)\n  [nu774]\n\n- Automatically discover homebrew include/ and lib/ paths on OS X #330\n  [donspaulding]\n\n- Fix bytes which should be bytearray #325\n  [manisandro]\n\n- Add respective paths for C_INCLUDE_PATH, LD_RUN_PATH (rpath) to build\n  if specified as environment variables #324\n  [seanupton]\n\n- Fix #312 + gif optimize improvement\n  [d-schmidt]\n\n- Be more tolerant of tag read failures #320\n  [ericbuehl]\n\n- Catch truncated zTXt errors #321 (fixes #318)\n  [vytisb]\n\n- Fix IOError when saving progressive JPEGs #313\n  [e98cuenc]\n\n- Add RGBA support to ImageColor #309\n  [yoavweiss]\n\n- Test for ``str``, not ``\"utf-8\"`` #306 (fixes #304)\n  [mjpieters]\n\n- Fix missing import os in _util.py #303\n  [mnowotka]\n\n- Added missing exif tags #300\n  [freyes]\n\n- Fail on all import errors #298, #299 (fixes #297)\n  [macfreek, wiredfool]\n\n- Fixed Windows fallback (wasn't using correct file in Windows fonts) #295\n  [lmollea]\n\n- Moved ImageFile and ImageFileIO comments to docstrings #293\n  [freyes]\n\n- Restore compatibility with ISO C #289\n  [cgohlke]\n\n- Use correct format character for C int type #288\n  [cgohlke]\n\n- Allocate enough memory to hold pointers in encode.c #287\n  [cgohlke]\n\n- Fillorder double shuffling bug when FillOrder ==2 and decoding using libtiff #284 (fixes #279)\n  [wiredfool]\n\n- Moved Image module comments to docstrings.\n  [freyes]\n\n- Add 16-bit TIFF support #277 (fixes #274)\n  [wiredfool]\n\n- Ignore high ascii characters in string.whitespace #276 (fixes #272)\n  [wiredfool]\n\n- Added clean/build to tox to make it behave like Travis #275\n  [freyes]\n\n- Adding support for metadata in webp images #271\n  [heynemann]\n\n2.1.0 (2013-07-02)\n------------------\n\n- Add /usr/bin/env python shebangs to all scripts in /Scripts #197\n  [mgorny]\n\n- Add several TIFF decoders and encoders #268\n  [megabuz]\n\n- Added support for alpha transparent webp images.\n\n- Adding Python 3 support for StringIO.\n\n- Adding Python3 basestring compatibility without changing basestring.\n\n- Fix webp encode errors on win-amd64 #259\n  [cgohlke]\n\n- Better fix for ZeroDivisionError in ImageOps.fit for image.size height is 1 #267\n  [chrispbailey]\n\n- Better support for ICO images.\n\n- Changed PY_VERSION_HEX #190 (fixes #166)\n\n- Changes to put everything under the PIL namespace #191\n  [wiredfool]\n\n- Changing StringIO to BytesIO.\n\n- Cleanup whitespace.\n  [Arfrever]\n\n- Don't skip 'import site' on initialization when running tests for inplace builds.\n  [cgohlke]\n\n- Enable warnings for test suite #227\n  [wiredfool]\n\n- Fix for ZeroDivisionError in ImageOps.fit for image.size == (1,1) #255\n  [pterk]\n\n- Fix for if isinstance(filter, collections.Callable) crash. Python bug #7624 on <2.6.6\n\n- Remove double typedef declaration #194 (fixes #193)\n  [evertrol]\n\n- Fix msvc compile errors (#230).\n\n- Fix rendered characters have been chipped for some TrueType fonts\n  [tk0miya]\n\n- Fix usage of pilfont.py script #184\n  [fabiomcosta]\n\n- Fresh start for docs, generated by sphinx-apidoc.\n\n- Introduce --enable-x and fail if it is given and x is not available.\n\n- Partial work to add a wrapper for WebPGetFeatures to correctly support #220 (fixes #204)\n\n- Significant performance improvement of ``alpha_composite`` function #156\n  [homm]\n\n- Support explicitly disabling features via --disable-* options #240\n  [mgorny]\n\n- Support selftest.py --installed, fixes #263\n\n- Transparent WebP Support #220 (fixes #204)\n  [euangoddard, wiredfool]\n\n- Use PyCapsule for py3.1 #238 (fixes #237)\n  [wiredfool]\n\n- Workaround for: https://bugs.python.org/issue16754 in 3.2.x < 3.2.4 and 3.3.0.\n\n2.0.0 (2013-03-15)\n------------------\n\n.. Note:: Special thanks to Christoph Gohlke and Eric Soroos for assisting with a pre-PyCon 2013 release!\n\n- Many other bug fixes and enhancements by many other people.\n\n- Add Python 3 support. (Pillow >= 2.0.0 supports Python 2.6, 2.7, 3.2, 3.3. Pillow < 2.0.0 supports Python 2.4, 2.5, 2.6, 2.7.)\n  [fluggo]\n\n- Add PyPy support (experimental, please see #67)\n\n- Add WebP support #96\n  [lqs]\n\n- Add Tiff G3/G4 support (experimental)\n  [wiredfool]\n\n- Backport PIL's PNG/Zip improvements #95, #97\n  [olt]\n\n- Various 64-bit and Windows fixes.\n  [cgohlke]\n\n- Add testing suite.\n  [cgohlke, fluggo]\n\n- Added support for PNG images with transparency palette.\n  [d-schmidt]\n\n1.7.8 (2012-11-01)\n------------------\n\n- Removed doctests.py that made tests of other packages fail.\n  [thomasdesvenain]\n\n- Fix opening psd files with RGBA layers when A mode is not of type 65535 but 3.\n  Fixes #3\n  [thomasdesvenain]\n\n\n1.7.7 (2012-04-04)\n------------------\n\n- UNDEF more types before including windows headers\n  [mattip]\n\n1.7.6 (2012-01-20)\n------------------\n\n- Bug fix: freetype not found on Mac OS X with case-sensitive filesystem\n  [gjo]\n\n- Bug fix: Backport fix to split() after open() (regression introduced in PIL 1.1.7).\n  [sfllaw]\n\n1.7.5 (2011-09-07)\n------------------\n\n- Fix for sys.platform = \"linux3\"\n  [blueyed]\n\n- Package cleanup and additional documentation\n  [aclark4life]\n\n1.7.4 (2011-07-21)\n------------------\n\n- Fix brown bag release\n  [aclark4life]\n\n1.7.3 (2011-07-20)\n------------------\n\n- Fix : resize need int values, append int conversion in thumbnail method\n  [harobed]\n\n1.7.2 (2011-06-02)\n------------------\n\n- Bug fix: Python 2.4 compat\n  [aclark4life]\n\n1.7.1 (2011-05-31)\n------------------\n\n- More multi-arch support\n  [SteveM, regebro, barry, aclark4life]\n\n1.7.0 (2011-05-27)\n------------------\n\n- Add support for multi-arch library directory /usr/lib/x86_64-linux-gnu\n  [aclark4life]\n\n1.6 (12/01/2010)\n----------------\n\n- Bug fix: /usr/x11/include should be added to include_dirs not library_dirs\n  [elro]\n\n- Doc fixes\n  [aclark4life]\n\n1.5 (11/28/2010)\n----------------\n\n- Module and package fixes\n  [aclark4life]\n\n1.4 (11/28/2010)\n----------------\n\n- Doc fixes\n  [aclark4life]\n\n1.3 (11/28/2010)\n----------------\n\n- Add support for /lib64 and /usr/lib64 library directories on Linux\n  [aclark4life]\n\n- Doc fixes\n  [aclark4life]\n\n1.2 (08/02/2010)\n----------------\n\n- On OS X also check for freetype2 in the X11 path\n  [jezdez]\n\n- Doc fixes\n  [aclark4life]\n\n1.1 (07/31/2010)\n----------------\n\n- Removed setuptools_hg requirement\n  [aclark4life]\n\n- Doc fixes\n  [aclark4life]\n\n1.0 (07/30/2010)\n----------------\n\n- Remove support for ``import Image``. ``from PIL import Image`` now required.\n- Forked PIL based on `Chris McDonough and Hanno Schlichting's setuptools compatible re-packaging <https://dist.plone.org/thirdparty/PIL-1.1.7.tar.gz>`_\n  [aclark4life]\n\nPre-fork\n========\n\n0.2b5-1.1.7\n-----------\n\n::\n\n    -*- coding: utf-8 -*-\n\n    The Python Imaging Library\n    $Id$\n\n    ACKNOWLEDGEMENTS: PIL wouldn't be what it is without the help of:\n    David Ascher, Phil Austin, Douglas Bagnall, Larry Bates, Anthony\n    Baxter, William Baxter, Denis Benoit, Jan Blom, Duncan Booth, Alexey\n    Borzenkov, Jeff Breidenbach, Roger Burnham, Zac Burns, Gene Cash,\n    Kevin Cazabon, Fred Clare, Greg Coats, Chris Cogdon, Greg Couch, Bill\n    Crutchfield, Abel Deuring, Tim Docker, Fred Drake, Graham Dumpleton,\n    Matthew Ellis, Eric Etheridge, Daniel Fetchinson, Robin Friedrich,\n    Pier Paolo Glave, Federico Di Gregorio, Markus Gritsch, Daniel\n    Haertle, Greg Hamilton, Mark Hammond, Bernhard Herzog, Rob Hooft, Bob\n    Ippolito, Jack Jansen, Bill Janssen, Edward Jones, Richard Jones,\n    Håkan Karlsson, Robert Kern, David Kirtley, Bob Klimek, Matthias\n    Klose, Andrew Kuchling, Magnus Källström, Victor Lacina, Ben Last,\n    Hamish Lawson, Cesare Leonardi, Andrew MacIntyre, Jan Matejek, Naveen\n    Michaud-Agrawal, Gordon McMillan, Skip Montanaro, Fredrik Nehr,\n    Russell Nelson, Luciano Nocera, Travis Oliphant, Piet van Oostrum,\n    Richard Oudkerk, Paul Pharr, Andres Polit, Conrado Porto Lopes Gouvêa,\n    Eric Raymond, Victor Reijs, Bertil Reinhammar, Nicholas Riley, Don\n    Rozenberg, Toby Sargeant, Barry Scott, Les Schaffer, Joel Shprentz,\n    Klamer Shutte, Gene Skonicki, Niki Spahiev, D. Alan Stewart, Perry\n    Stoll, Paul Svensson, Ulrik Svensson, Miki Tebeka, Michael van\n    Tellingen, Ivan Tkatchev, Dan Torop, Adam Twardoch, Rune Uhlin, Dmitry\n    Vasiliev, Sasha Voynow, Charles Waldman, Collin Winter, Dan Wolfe,\n    Ka-Ping Yee, and many others (if your name should be on this list, let\n    me know.)\n\n1.1.6 to 1.1.7\n--------------\n\nThis section may not be fully complete.  For changes since this file\nwas last updated, see the repository revision history:\nhttp://svn.effbot.org/public/pil/\n\n1.1.7 final\n-----------\n\n- Set GIF loop info property to the number of iterations if a NETSCAPE\n  loop extension is present, instead of always setting it to 1 (from\n  Valentino Volonghi).\n\n1.1.7c1\n-------\n\n- Improved PNG compression (from Alexey Borzenkov).\n\n- Read interlaced PNG files (from Conrado Porto Lopes Gouvêa)\n\n- Added various TGA improvements from Alexey Borzenkov, including\n  support for specifying image orientation.\n\n- Bumped block threshold to 16 megabytes, made size estimation a bit\n  more accurate.  This speeds up allocation of large images.\n\n- Fixed rounding error in ImagingDrawWideLine.\n\n  \"gormish\" writes: ImagingDrawWideLine() in Draw.c has a bug in every\n  version I've seen, which leads to different width lines depending on\n  the order of the points in the line. This is especially bad at some\n  angles where a 'width=2' line can completely disappear.\n\n- Added support for RGBA mode to the SGI module (based on code by\n  Karsten Hiddemann).\n\n- Handle repeated IPTC tags (adapted from a patch by Eric Bruning).\n\n  Eric writes: According to the specification, some IPTC tags can be\n  repeated, e.g., tag 2:25 (keywords). PIL 1.1.6 only retained the last\n  instance of that tag. Below is a patch to store all tags. If there are\n  multiple tag instances, they are stored in a (python) list. Single tag\n  instances remain as strings.\n\n- Fixed potential crash in ImageFilter for small target images\n  (reported by Zac Burns and Daniel Fetchinson).\n\n- Use BMP instead of JPEG as temporary show format on Mac OS X.\n\n- Fixed putpixel/new for I;16 with colors > 255.\n\n- Added integer power support to ImagingMath.\n\n- Added limited support for I;16L mode (explicit little endian).\n\n- Moved WMF support into Image.core; enable WMF rendering by default\n  if renderer is available.\n\n- Mark the ARG plugin as obsolete.\n\n- Added version query mechanism to ImageCms and ImageFont, for\n  debugging.\n\n- Added (experimental) ImageCms function for fetching the ICC profile\n  for the current display (currently Windows only).\n\n  Added HWND/HDC support to ImageCms.get_display_profile().\n\n- Added WMF renderer (Windows only).\n\n- Added ImagePointHandler and ImageTransformHandler mixins; made\n  ImageCmsTransform work with im.point.\n\n- Fixed potential endless loop in the XVThumbnail reader (from Nikolai\n  Ugelvik).\n\n- Added Kevin Cazabon's pyCMS package.\n\n  The C code has been moved to _imagingcms.c, the Python interface\n  module is installed as PIL.ImageCMS.\n\n  Added support for in-memory ICC profiles.\n\n  Unified buildTransform and buildTransformFromOpenProfiles.\n\n  The profile can now be either a filename, a profile object, or a\n  file-like object containing an in-memory profile.\n\n  Additional fixes from Florian Böch:\n\n    Very nice - it just needs LCMS flags support so we can use black\n    point compensation and softproofing :) See attached patches.  They\n    also fix a naming issue which could cause confusion - display\n    profile (ImageCms wording) actually means proof profile (lcms\n    wording), so I changed variable names and docstrings where\n    applicable. Patches are tested under Python 2.6.\n\n- Improved support for layer names in PSD files (from Sylvain Baubeau)\n\n  Sylvain writes: I needed to be able to retrieve the names of the\n  layers in a PSD files. But PsdImagePlugin.py didn't do the job so I\n  wrote this very small patch.\n\n- Improved RGBA support for ImageTk for 8.4 and newer (from Con\n  Radchenko).\n\n  This replaces the slow run-length based encoding model with true\n  compositing at the Tk level.\n\n- Added support for 16- and 32-bit images to McIdas loader.\n\n  Based on file samples and stand-alone reader code provided by Craig\n  Swank.\n\n- Added ImagePalette support to putpalette.\n\n- Fixed problem with incremental parsing of PNG files.\n\n- Make selftest.py report non-zero status on failure (from Mark\n  Sienkiewicz)\n\n- Add big endian save support and multipage infrastructure to the TIFF\n  writer (from Sebastian Haase).\n\n- Handle files with GPS IFD but no basic EXIF IFD (reported by Kurt\n  Schwehr).\n\n- Added zTXT support (from Andrew Kuchling via Lowell Alleman).\n\n- Fixed potential infinite loop bug in ImageFont (from Guilherme Polo).\n\n- Added sample ICC profiles (from Kevin Cazabon)\n\n- Fixed array interface for I, F, and RGBA/RGBX images.\n\n- Added Chroma subsampling support for JPEG (from Justin Huff).\n\n  Justin writes: Attached is a patch (against PIL 1.1.6) to provide\n  control over the chroma subsampling done by the JPEG encoder.  This\n  is often useful for reducing compression artifacts around edges of\n  clipart and text.\n\n- Added USM/Gaussian Blur code from Kevin Cazabon.\n\n- Fixed bug w. uninitialized image data when cropping outside the\n  source image.\n\n- Use ImageShow to implement the Image.show method.\n\n  Most notably, this picks the 'display' utility when available.  It\n  also allows application code to register new display utilities via\n  the ImageShow registry.\n\n- Release the GIL in the PNG compressor (from Michael van Tellingen).\n\n- Revised JPEG CMYK handling.\n\n  Always assume Adobe behaviour, both when reading and writing (based on\n  a patch by Kevin Cazabon, and test data by Tim V. and Charlie Clark, and\n  additional debugging by Michael van Tellingen).\n\n- Support for preserving ICC profiles (by Florian Böch via Tim Hatch).\n\n  Florian writes:\n\n    It's a beta, so still needs some testing, but should allow you to:\n\n    - retain embedded ICC profiles when saving from/to JPEG, PNG, TIFF.\n      Existing code doesn't need to be changed.\n    - access embedded profiles in JPEG, PNG, PSD, TIFF.\n\n    It also includes patches for TIFF to retain IPTC, Photoshop and XMP\n    metadata when saving as TIFF again, read/write TIFF resolution\n    information correctly, and to correct inverted CMYK JPEG files.\n\n- Fixed potential memory leak in median cut quantizer (from Evgeny Salmin).\n\n- Fixed OverflowError when reading upside-down BMP images.\n\n- Added resolution save option for PDF files.\n\n  Andreas Kostyrka writes: I've included a patched PdfImagePlugin.py\n  based on 1.1.6 as included in Ubuntu, that supports a \"resolution\"\n  save option. Not great, but it makes the PDF saving more useful by\n  allowing PDFs that are not exactly 72dpi.\n\n- Look for Tcl/Tk include files in version-specific include directory\n  (from Encolpe Degoute).\n\n- Fixed grayscale rounding error in ImageColor.getcolor (from Tim\n  Hatch).\n\n- Fixed calculation of mean value in ImageEnhance.Contrast (reported\n  by \"roop\" and Scott David Daniels).\n\n- Fixed truetype positioning when first character has a negative left\n  bearing (from Ned Batchelder):\n\n  Ned writes: In PIL 1.1.6, ImageDraw.text will position the string\n  incorrectly if the first character has a negative left bearing.  To\n  see the problem, show a string like \"///\" in an italic font.  The\n  first slash will be clipped at the left, and the string will be\n  mis-positioned.\n\n- Fixed resolution unit bug in tiff reader/writer (based on code by\n  Florian Höch, Gary Bloom, and others).\n\n- Added simple transparency support for RGB images (reported by\n  Sebastian Spaeth).\n\n- Added support for Unicode filenames in ImageFont.truetype (from Donn\n  Ingle).\n\n- Fixed potential crash in ImageFont.getname method (from Donn Ingle).\n\n- Fixed encoding issue in PIL/WalImageFile (from Santiago M. Mola).\n\n1.1.6\n-----\n\n- Fixed some 64-bit compatibility warnings for Python 2.5.\n\n- Added threading support for the Sane driver (from Abel Deuring).\n\n1.1.6b2\n-------\n\n- Added experimental \"floodfill\" function to the ImageDraw module\n  (based on code by Eric Raymond).\n\n- The default arguments for \"frombuffer\" doesn't match \"fromstring\"\n  and the documentation; this is a bug, and will most likely be fixed\n  in a future version.  In this release, PIL prints a warning message\n  instead.  To silence the warning, change any calls of the form\n  \"frombuffer(mode, size, data)\" to::\n\n      frombuffer(mode, size, data, \"raw\", mode, 0, 1)\n\n- Added \"fromarray\" function, which takes an object implementing the\n  NumPy array interface and creates a PIL Image from it. (from Travis\n  Oliphant).\n\n- Added NumPy array interface support (__array_interface__) to the\n  Image class (based on code by Travis Oliphant).\n\n  This allows you to easily convert between PIL image memories and\n  NumPy arrays::\n\n    import numpy, Image\n    im = Image.open('hopper.jpg')\n    a = numpy.asarray(im) # a is readonly\n    im = Image.fromarray(a)\n\n- Fixed CMYK polarity for JPEG images, by treating all images as\n  \"Adobe CMYK\" images. (thanks to Cesare Leonardi and Kevin Cazabon\n  for samples, debugging, and patches).\n\n1.1.6b1\n-------\n\n- Added 'expand' option to the Image 'rotate' method.  If true, the\n  output image is made large enough to hold the entire rotated image.\n\n- Changed the ImageDraw 'line' method to always draw the last pixel in\n  a polyline, independent of line angle.\n\n- Fixed bearing calculation and clipping in the ImageFont truetype\n  renderer; this could lead to clipped text, or crashes in the low-level\n  _imagingft module.  (based on input from Adam Twardoch and\n  others).\n\n- Added ImageQt wrapper module, for converting PIL Image objects to\n  QImage objects in an efficient way.\n\n- Fixed 'getmodebands' to return the number of bands also for \"PA\"\n  and \"LA\" modes.  Added 'getmodebandnames' helper that return the\n  band names.\n\n1.1.6a2\n-------\n\n- Added float/double support to the TIFF loader (from Russell\n  Nelson).\n\n- Fixed broken use of realloc() in path.c (from Jan Matejek)\n\n- Added save support for Spider images (from William Baxter).\n\n- Fixed broken 'paste' and 'resize' operations in pildriver\n  (from Bill Janssen).\n\n- Added support for duplex scanning to the Sane interface (Abel\n  Deuring).\n\n1.1.6a1\n-------\n\n- Fixed a memory leak in \"convert(mode)\", when converting from\n  L to P.\n\n- Added pixel access object.  The \"load\" method now returns a\n  access object that can be used to directly get and set pixel\n  values, using ordinary [x, y] notation::\n\n    pixel = im.load()\n    v = pixel[x, y]\n    pixel[x, y] = v\n\n  If you're accessing more than a few pixels, this is a lot\n  faster than using getpixel/putpixel.\n\n- Fixed building on Cygwin (from Miki Tebeka).\n\n- Fixed \"point(callable)\" on unloaded images (reported by Håkan\n  Karlsson).\n\n- Fixed size bug in ImageWin.ImageWindow constructor (from Victor\n  Reijs)\n\n- Fixed ImageMath float() and int() operations for Python 2.4\n  (reported by Don Rozenberg).\n\n- Fixed \"RuntimeError: encoder error -8 in tostring\" problem for\n  wide \"RGB\", \"I\", and \"F\" images.\n\n- Fixed line width calculation.\n\n1.1.6a0\n-------\n\n- Fixed byte order issue in Image.paste(ink) (from Ka-Ping Yee).\n\n- Fixed off-by-0.5 errors in the ANTIALIAS code (based on input\n  from Douglas Bagnall).\n\n- Added buffer interface support to the Path constructor.  If\n  a buffer is provided, it is assumed to contain a flat array\n  of float coordinates (e.g. array.array('f', seq)).\n\n- Added new ImageMath module.\n\n- Fixed ImageOps.equalize when used with a small number of distinct\n  values (reported by David Kirtley).\n\n- Fixed potential integer division in PSDraw.image (from Eric Etheridge).\n\n1.1.5c2 and 1.1.5 final\n-----------------------\n\n- Added experimental PERSPECTIVE transform method (from Jeff Breidenbach).\n\n1.1.5c1\n-------\n\n- Make sure \"thumbnail\" never generates zero-wide or zero-high images\n  (reported by Gene Skonicki)\n\n- Fixed a \"getcolors\" bug that could result in a zero count for some\n  colors (reported by Richard Oudkerk).\n\n- Changed default \"convert\" palette to avoid \"rounding errors\" when\n  round-tripping white source pixels (reported by Henryk Gerlach and\n  Jeff Epler).\n\n1.1.5b3\n-------\n\n- Don't crash in \"quantize\" method if the number of colors requested\n  is larger than 256.  This release raises a ValueError exception;\n  future versions may return a mode \"RGB\" image instead (reported\n  by Richard Oudkerk).\n\n- Added WBMP read/write support (based on code by Duncan Booth).\n\n1.1.5b2\n-------\n\n- Added DPI read/write support to the PNG codec.  The decoder sets\n  the info[\"dpi\"] attribute for PNG files with appropriate resolution\n  settings.  The encoder uses the \"dpi\" option (based on code by Niki\n  Spahiev).\n\n- Added limited support for \"point\" mappings from mode \"I\" to mode \"L\".\n  Only 16-bit values are supported (other values are clipped), the lookup\n  table must contain exactly 65536 entries, and the mode argument must be\n  set to \"L\".\n\n- Added support for Mac OS X icns files (based on code by Bob Ippolito).\n\n- Added \"ModeFilter\" support to the ImageFilter module.\n\n- Added support for Spider images (from William Baxter).  See the\n  comments in PIL/SpiderImagePlugin.py for more information on this\n  format.\n\n1.1.5b1\n-------\n\n- Added new Sane release (from Ralph Heinkel).  See the Sane/README\n  and Sane/CHANGES files for more information.\n\n- Added experimental PngInfo chunk container to the PngImageFile\n  module.  This can be used to add arbitrary chunks to a PNG file.\n  Create a PngInfo instance, use \"add\" or \"add_text\" to add chunks,\n  and pass the instance as the \"pnginfo\" option when saving the\n  file.\n\n- Added \"getpalette\" method.  This returns the palette as a list,\n  or None if the image has no palette.  To modify the palette, use\n  \"getpalette\" to fetch the current palette, modify the list, and\n  put it back using \"putpalette\".\n\n- Added optional flattening to the ImagePath \"tolist\" method.\n  tolist() or tolist(0) returns a list of 2-tuples, as before.\n  tolist(1) returns a flattened list instead.\n\n1.1.5a5\n-------\n\n- Fixed BILINEAR/BICUBIC/ANTIALIAS filtering for mode \"LA\".\n\n- Added \"getcolors()\" method.  This is similar to the existing histogram\n  method, but looks at color values instead of individual layers,\n  and returns an unsorted list of (count, color) tuples.\n\n  By default, the method returns None if finds more than 256 colors.\n  If you need to look for more colors, you can pass in a limit (this\n  is used to allocate internal tables, so you probably don't want to\n  pass in too large values).\n\n- Build improvements: Fixed building under AIX, improved detection of\n  FreeType2 and Mac OS X framework libraries, and more.  Many thanks\n  to everyone who helped test the new \"setup.py\" script!\n\n1.1.5a4\n-------\n\n- The \"save\" method now looks for a file format driver before\n  creating the file.\n\n- Don't use antialiased truetype fonts when drawing in mode \"P\", \"I\",\n  and \"F\" images.\n\n- Rewrote the \"setup.py\" file.  The new version scans for available\n  support libraries, and configures both the libImaging core library\n  and the bindings in one step.\n\n  To use specific versions of the libraries, edit the ROOT variables\n  in the setup.py file.\n\n- Removed threaded \"show\" viewer; use the old \"show\" implementation\n  instead (Windows).\n\n- Added deprecation warnings to Image.offset, ImageDraw.setink, and\n  ImageDraw.setfill.\n\n- Added width option to ImageDraw.line().  The current implementation\n  works best for straight lines; it does not support line joins, so\n  polylines won't look good.\n\n- ImageDraw.Draw is now a factory function instead of a class.  If\n  you need to create custom draw classes, inherit from the ImageDraw\n  class.  All other code should use the factory function.\n\n- Fixed loading of certain PCX files (problem reported by Greg\n  Hamilton, who also provided samples).\n\n- Changed _imagingft.c to require FreeType 2.1 or newer.  The\n  module can still be built with earlier versions; see comments\n  in _imagingft.c for details.\n\n1.1.5a3\n-------\n\n- Added 'getim' method, which returns a PyCObject wrapping an\n  Imaging pointer.  The description string is set to IMAGING_MAGIC.\n  See Imaging.h for pointer and string declarations.\n\n- Fixed reading of TIFF JPEG images (problem reported by Ulrik\n  Svensson).\n\n- Made ImageColor work under Python 1.5.2\n\n- Fixed division by zero \"equalize\" on very small images (from\n  Douglas Bagnall).\n\n1.1.5a2\n-------\n\n- The \"paste\" method now supports the alternative \"paste(im, mask)\"\n  syntax (in this case, the box defaults to im's bounding box).\n\n- The \"ImageFile.Parser\" class now works also for PNG files with\n  more than one IDAT block.\n\n- Added DPI read/write to the TIFF codec, and fixed writing of\n  rational values.  The decoder sets the info[\"dpi\"] attribute\n  for TIFF files with appropriate resolution settings.  The\n  encoder uses the \"dpi\" option.\n\n- Disable interlacing for small (or narrow) GIF images, to\n  work around what appears to be a hard-to-find bug in PIL's\n  GIF encoder.\n\n- Fixed writing of mode \"P\" PDF images.  Made mode \"1\" PDF\n  images smaller.\n\n- Made the XBM reader a bit more robust; the file may now start\n  with a few whitespace characters.\n\n- Added support for enhanced metafiles to the WMF driver.  The\n  separate PILWMF kit lets you render both placeable WMF files\n  and EMF files as raster images.  See\n  http://effbot.org/downloads#pilwmf\n\n1.1.5a1\n-------\n\n- Replaced broken WMF driver with a WMF stub plugin (see below).\n\n- Fixed writing of mode \"1\", \"L\", and \"CMYK\" PDF images (based on\n  input from Nicholas Riley and others).\n\n- Fixed adaptive palette conversion for zero-width or zero-height\n  images (from Chris Cogdon)\n\n- Fixed reading of PNG images from QuickTime 6 (from Paul Pharr)\n\n- Added support for StubImageFile plugins, including stub plugins\n  for BUFR, FITS, GRIB, and HDF5 files.  A stub plugin can identify\n  a given file format, but relies on application code to open and\n  save files in that format.\n\n- Added optional \"encoding\" argument to the ImageFont.truetype\n  factory.  This argument can be used to specify non-Unicode character\n  maps for fonts that support that.  For example, to draw text using\n  the Microsoft Symbol font, use::\n\n      font = ImageFont.truetype(\"symbol.ttf\", 16, encoding=\"symb\")\n      draw.text((0, 0), unichr(0xF000 + 0xAA))\n\n  (note that the symbol font uses characters in the 0xF000-0xF0FF\n  range)\n\n  Common encodings are \"unic\" (Unicode), \"symb\" (Microsoft Symbol),\n  \"ADOB\" (Adobe Standard), \"ADBE\" (Adobe Expert), and \"armn\" (Apple\n  Roman).  See the FreeType documentation for more information.\n\n- Made \"putalpha\" a bit more robust; you can now attach an alpha\n  layer to a plain \"L\" or \"RGB\" image, and you can also specify\n  constant alphas instead of alpha layers (using integers or colour\n  names).\n\n- Added experimental \"LA\" mode support.\n\n  An \"LA\" image is an \"L\" image with an attached transparency layer.\n  Note that support for \"LA\" is not complete; some operations may\n  fail or produce unexpected results.\n\n- Added \"RankFilter\", \"MinFilter\", \"MedianFilter\", and \"MaxFilter\"\n  classes to the ImageFilter module.\n\n- Improved support for applications using multiple threads; PIL\n  now releases the global interpreter lock for many CPU-intensive\n  operations (based on work by Kevin Cazabon).\n\n- Ignore Unicode characters in the PCF loader (from Andres Polit)\n\n- Fixed typo in OleFileIO.loadfat, which could affect loading of\n  FlashPix and Image Composer images (Daniel Haertle)\n\n- Fixed building on platforms that have Freetype but don't have\n  Tcl/Tk (Jack Jansen, Luciano Nocera, Piet van Oostrum and others)\n\n- Added EXIF GPSInfo read support for JPEG files.  To extract\n  GPSInfo information, open the file, extract the exif dictionary,\n  and check for the key 0x8825 (GPSInfo).  If present, it contains\n  a dictionary mapping GPS keys to GPS values.  For a list of keys,\n  see the EXIF specification.\n\n  The \"ExifTags\" module contains a GPSTAGS dictionary mapping GPS\n  tags to tag names.\n\n- Added DPI read support to the PCX and DCX codecs (info[\"dpi\"]).\n\n- The \"show\" methods now uses a built-in image viewer on Windows.\n  This viewer creates an instance of the ImageWindow class (see\n  below) and keeps it running in a separate thread.  NOTE: This\n  was disabled in 1.1.5a4.\n\n- Added experimental \"Window\" and \"ImageWindow\" classes to the\n  ImageWin module.  These classes allow you to create a WCK-style\n  toplevel window, and use it to display raster data.\n\n- Fixed some Python 1.5.2 issues (to build under 1.5.2, use the\n  Makefile.pre.in/Setup.in approach)\n\n- Added support for the TIFF FillOrder tag.  PIL can read mode \"1\",\n  \"L\", \"P\" and \"RGB\" images with non-standard FillOrder (based on\n  input from Jeff Breidenbach).\n\n1.1.4 final\n-----------\n\n- Fixed ImageTk build problem on Unix.\n\n1.1.4b2\n-------\n\n- Improved building on Mac OS X (from Jack Jansen).\n\n- Improved building on Windows with MinGW (from Klamer Shutte).\n\n- If no font is specified, ImageDraw now uses the embedded default\n  font.  Use the \"load\" or \"truetype\" methods to load a real font.\n\n- Added embedded default font to the ImageFont module (currently\n  an 8-pixel Courier font, taken from the X window distribution).\n\n1.1.4b1\n-------\n\n- Added experimental EXIF support for JPEG files.  To extract EXIF\n  information from a JPEG file, open the file as usual, and call the\n  \"_getexif\" method.  If successful, this method returns a dictionary\n  mapping EXIF TIFF tags to values.  If the file does not contain EXIF\n  data, the \"_getexif\" method returns None.\n\n  The \"ExifTags\" module contains a dictionary mapping tags to tag\n  names.\n\n  This interface will most likely change in future versions.\n\n- Fixed a bug when using the \"transparency\" option with the GIF\n  writer.\n\n- Added limited support for \"bitfield compression\" in BMP files\n  and DIB buffers, for 15-bit, 16-bit, and 32-bit images.  This\n  also fixes a problem with ImageGrab module when copying screendumps\n  from the clipboard on 15/16/32-bit displays.\n\n- Added experimental WAL (Quake 2 textures) loader.  To use this\n  loader, import WalImageFile and call the \"open\" method in that\n  module.\n\n1.1.4a4\n-------\n\n- Added updated SANE driver (Andrew Kuchling, Abel Deuring)\n\n- Use Python's \"mmap\" module on non-Windows platforms to read some\n  uncompressed formats using memory mapping.  Also added a \"frombuffer\"\n  function that allows you to access the contents of an existing string\n  or buffer object as if it were an image object.\n\n- Fixed a memory leak that could appear when processing mode \"P\"\n  images (from Pier Paolo Glave)\n\n- Ignore Unicode characters in the BDF loader (from Graham Dumpleton)\n\n1.1.4a3 released; Windows only\n------------------------------\n\n- Added experimental RGBA-on-RGB drawing support.  To use RGBA\n  colours on an RGB image, pass \"RGBA\" as the second string to\n  the ImageDraw.Draw constructor.\n\n- Added support for non-ASCII strings (Latin-1) and Unicode\n  to the truetype font renderer.\n\n- The ImageWin \"Dib\" object can now be constructed directly from\n  an image object.\n\n- The ImageWin module now allows you use window handles as well\n  as device contexts.  To use a window handle, wrap the handle in\n  an ImageWin.HWND object, and pass in this object instead of the\n  device context.\n\n1.1.4a2\n-------\n\n- Improved support for 16-bit unsigned integer images (mode \"I;16\").\n  This includes TIFF reader support, and support for \"getextrema\"\n  and \"point\" (from Klamer Shutte).\n\n- Made the BdfFontFile reader a bit more robust (from Kevin Cazabon\n  and Dmitry Vasiliev)\n\n- Changed TIFF writer to always write Compression tag, even when\n  using the default compression (from Greg Couch).\n\n- Added \"show\" support for Mac OS X (from Dan Wolfe).\n\n- Added clipboard support to the \"ImageGrab\" module (Windows only).\n  The \"grabclipboard\" function returns an Image object, a list of\n  filenames (not in 1.1.4), or None if neither was found.\n\n1.1.4a1\n-------\n\n- Improved support for drawing RGB data in palette images.  You can\n  now use RGB tuples or colour names (see below) when drawing in a\n  mode \"P\" image.  The drawing layer automatically assigns color\n  indexes, as long as you don't use more than 256 unique colours.\n\n- Moved self test from MiniTest/test.py to ./selftest.py.\n\n- Added support for CSS3-style color strings to most places that\n  accept colour codes/tuples.  This includes the \"ImageDraw\" module,\n  the Image \"new\" function, and the Image \"paste\" method.\n\n  Colour strings can use one of the following formats: \"#f00\",\n  \"#ff0000\", \"rgb(255,0,0)\", \"rgb(100%,0%,0%)\", \"hsl(0, 100%, 50%)\",\n  or \"red\" (most X11-style colour names are supported).  See the\n  documentation for the \"ImageColor\" module for more information.\n\n- Fixed DCX decoder (based on input from Larry Bates)\n\n- Added \"IptcImagePlugin.getiptcinfo\" helper to extract IPTC/NAA\n  newsphoto properties from JPEG, TIFF, or IPTC files.\n\n- Support for TrueType/OpenType fonts has been added to\n  the standard distribution.  You need the freetype 2.0\n  library.\n\n- Made the PCX reader a bit more robust when reading 2-bit\n  and 4-bit PCX images with odd image sizes.\n\n- Added \"Kernel\" class to the ImageFilter module.  This class\n  allows you to filter images with user-defined 3x3 and 5x5\n  convolution kernels.\n\n- Added \"putdata\" support for mode \"I\", \"F\" and \"RGB\".\n\n- The GIF writer now supports the transparency option (from\n  Denis Benoit).\n\n- A HTML version of the module documentation is now shipped\n  with the source code distribution.  You'll find the files in\n  the Doc subdirectory.\n\n- Added support for Palm pixmaps (from Bill Janssen).  This\n  change was listed for 1.1.3, but the \"PalmImagePlugin\" driver\n  didn't make it into the distribution.\n\n- Improved decoder error messages.\n\n1.1.3 final\n-----------\n\n- Made setup.py look for old versions of zlib.  For some background,\n  see: https://zlib.net/advisory-2002-03-11.txt\n\n1.1.3c2\n-------\n\n- Added setup.py file (tested on Unix and Windows).  You still\n  need to build libImaging/imaging.lib in the traditional way,\n  but the setup.py script takes care of the rest.\n\n  The old Setup.in/Makefile.pre.in build method is still\n  supported.\n\n- Fixed segmentation violation in ANTIALIAS filter (an internal\n  buffer wasn't properly allocated).\n\n1.1.3c1\n-------\n\n- Added ANTIALIAS downsampling filter for high-quality \"resize\"\n  and \"thumbnail\" operations.  Also added filter option to the\n  \"thumbnail\" operation; the default value is NEAREST, but this\n  will most likely change in future versions.\n\n- Fixed plugin loader to be more robust if the __file__\n  variable isn't set.\n\n- Added seek/tell support (for layers) to the PhotoShop\n  loader.  Layer 0 is the main image.\n\n- Added new (but experimental) \"ImageOps\" module, which provides\n  shortcuts for commonly used operations on entire images.\n\n- Don't mess up when loading PNG images if the decoder leaves\n  data in the output buffer.  This could cause internal errors\n  on some PNG images, with some versions of ZLIB. (Bug report\n  and patch provided by Bernhard Herzog.)\n\n- Don't mess up on Unicode filenames.\n\n- Don't mess up when drawing on big endian platforms.\n\n- Made the TIFF loader a bit more robust; it can now read some\n  more slightly broken TIFF files (based on input from Ted Wright,\n  Bob Klimek, and D. Alan Stewart)\n\n- Added OS/2 EMX build files (from Andrew MacIntyre)\n\n- Change \"ImageFont\" to reject image files if they don't have the\n  right mode.  Older versions could leak memory for \"P\" images.\n  (Bug reported by Markus Gritsch).\n\n- Renamed some internal functions to avoid potential build\n  problem on Mac OS X.\n\n- Added DL_EXPORT where relevant (for Cygwin, based on input\n  from Robert Yodlowski)\n\n- (re)moved bogus __init__ call in BdfFontFile (bug spotted\n  by Fred Clare)\n\n- Added \"ImageGrab\" support (Windows only)\n\n- Added support for XBM hotspots (based on code contributed by\n  Bernhard Herzog).\n\n- Added write support for more TIFF tags, namely the Artist,\n  Copyright, DateTime, ResolutionUnit, Software, XResolution and\n  YResolution tags (from Greg Couch)\n\n- Added TransposedFont wrapper to ImageFont module\n\n- Added \"optimize\" flag to GIF encoder.  If optimize is present\n  and non-zero, PIL will work harder to create a small file.\n\n- Raise \"EOFError\" (not IndexError) when reading beyond the\n  end of a TIFF sequence.\n\n- Support rewind (\"seek(0)\") for GIF and TIFF sequences.\n\n- Load grayscale GIF images as mode \"L\"\n\n- Added DPI read/write support to the JPEG codec.  The decoder\n  sets the info[\"dpi\"] attribute for JPEG files with JFIF dpi\n  settings.  The encoder uses the \"dpi\" option::\n\n      im = Image.open(\"file.jpg\")\n      dpi = im.info[\"dpi\"] # raises KeyError if DPI not known\n      im.save(\"out.jpg\", dpi=dpi)\n\n  Note that PIL doesn't always preserve the \"info\" attribute\n  for normal image operations.\n\n1.1.2c1 and 1.1.2 final\n-----------------------\n\n- Adapted to Python 2.1.  Among other things, all uses of the\n  \"regex\" module have been replaced with \"re\".\n\n- Fixed attribute error when reading large PNG files (this bug\n  was introduced in maintenance code released after the 1.1.1\n  release)\n\n- Ignore non-string objects in sys.path\n\n- Fixed Image.transform(EXTENT) for negative xoffsets\n\n- Fixed loading of image plugins if PIL is installed as a package.\n  (The plugin loader now always looks in the directory where the\n  Image.py module itself is found, even if that directory isn't on\n  the standard search path)\n\n- The Png plugin has been added to the list of preloaded standard\n  formats\n\n- Fixed bitmap/text drawing in fill mode.\n\n- Fixed \"getextrema\" to work also for multiband images.\n\n- Added transparency support for L and P images to the PNG codec.\n\n- Improved support for read-only images.  The \"load\" method now\n  sets the \"readonly\" attribute for memory-mapped images.  Operations\n  that modifies an image in place (such as \"paste\" and drawing operations)\n  creates an in-memory copy of the image, if necessary.  (before this\n  change, any attempt to modify a memory-mapped image resulted in a\n  core dump...)\n\n- Added special cases for lists everywhere PIL expects a sequence.\n  This should speed up things like \"putdata\" and drawing operations.\n\n- The Image.offset method is deprecated.  Use the ImageChops.offset\n  function instead.\n\n- Changed ImageChops operators to copy palette and info dictionary\n  from the first image argument.\n\n1.1.1\n-----\n\n- Additional fixes for Python 1.6/2.0, including TIFF \"save\" bug.\n\n- Changed \"init\" to properly load plugins when PIL is used as a\n  package.\n\n- Fixed broken \"show\" method (on Unix)\n\n1.0 to 1.1\n----------\n\n- Adapted to Python 1.6 (\"append\" and other method changes)\n\n- Fixed Image.paste when pasting with solid colour and matte\n  layers (\"L\" or \"RGBA\" masks) (bug reported by Robert Kern)\n\n- To make it easier to distribute prebuilt versions of PIL,\n  the tkinit binding stuff has been moved to a separate\n  extension module, named \"_imagingtk\".\n\n0.3b2 to 1.0 final\n------------------\n\n- If there's no 16-bit integer (like on a Cray T3E), set\n  INT16 to the smallest integer available.  Most of the\n  library works just fine anyway (from Bill Crutchfield)\n\n- Tweaks to make drawing work on big-endian platforms.\n\n1.0c2\n-----\n\n- If PIL is built with the WITH_TKINTER flag, ImageTk can\n  automatically hook into a standard Tkinter build.  You\n  no longer need to build your own Tkinter to use the\n  ImageTk module.\n\n  The old way still works, though.  For more information,\n  see Tk/install.txt.\n\n- Some tweaks to ImageTk to support multiple Tk interpreters\n  (from Greg Couch).\n\n- ImageFont \"load_path\" now scans directory mentioned in .pth\n  files (from Richard Jones).\n\n1.0c1\n-----\n\n- The TIFF plugin has been rewritten.  The new plugin fully\n  supports all major PIL image modes (including F and I).\n\n- The ImageFile module now includes a Parser class, which can\n  be used to incrementally decode an image file (while downloading\n  it from the net, for example).  See the handbook for\n  details.\n\n- \"show\" now converts non-standard modes to \"L\" or \"RGB\" (as\n  appropriate), rather than writing weird things to disk for\n  \"xv\" to choke upon. (bug reported by Les Schaffer).\n\n1.0b2\n-----\n\n- Major speedups for rotate, transform(EXTENT), and transform(AFFINE)\n  when using nearest neighbour resampling.\n\n- Modified ImageDraw to be compatible with the Arrow graphics\n  interface.  See the handbook for details.\n\n- PIL now automatically loads file codecs when used as a package\n  (from The Dragon De Monsyne).  Also included an __init__.py file\n  in the standard distribution.\n\n- The GIF encoder has been modified to produce much smaller files.\n\n  PIL now uses a run-length encoding method to encode GIF files.\n  On a random selection of GIF images grabbed from the web, this\n  version makes the images about twice as large as the original\n  LZW files, where the earlier version made them over 5 times\n  larger.  YMMV, of course.\n\n- Added PCX write support (works with \"1\", \"P\", \"L\", and \"RGB\")\n\n- Added \"bitmap\" and \"textsize\" methods to ImageDraw.\n\n- Improved font rendering code.  Fixed a bug or two, and moved\n  most of the time critical stuff to C.\n\n- Removed \"bdf2pil.py\".  Use \"pilfont.py\" instead!\n\n- Improved 16-bit support (still experimental, though).\n\n  The following methods now support \"I;16\" and \"I;16B\" images:\n  \"getpixel\", \"copy\", \"convert\" (to and from mode \"I\"), \"resize\",\n  \"rotate\", and \"transform\" with nearest neighbour filters, and\n  \"save\" using the IM format.  The \"new\" and \"open\" functions\n  also work as expected.  On Windows, 16-bit files are memory\n  mapped.\n\n  NOTE: ALL other operations are still UNDEFINED on 16-bit images.\n\n- The \"paste\" method now supports constant sources.\n\n  Just pass a colour value (a number or a tuple, depending on\n  the target image mode) instead of the source image.\n\n  This was in fact implemented in an inefficient way in\n  earlier versions (the \"paste\" method generated a temporary\n  source image if you passed it a colour instead of an image).\n  In this version, this is handled on the C level instead.\n\n- Added experimental \"RGBa\" mode support.\n\n  An \"RGBa\" image is an RGBA image where the colour components\n  have have been premultiplied with the alpha value.  PIL allows\n  you to convert an RGBA image to an RGBa image, and to paste\n  RGBa images on top of RGB images.  Since this saves a bunch\n  of multiplications and shifts, it is typically about twice\n  as fast an ordinary RGBA paste.\n\n- Eliminated extra conversion step when pasting \"RGBA\" or \"RGBa\"\n  images on top of \"RGB\" images.\n\n- Fixed Image.BICUBIC resampling for \"RGB\" images.\n\n- Fixed PCX image file handler to properly read 8-bit PCX\n  files (bug introduced in 1.0b1, reported by Bernhard\n  Herzog)\n\n- Fixed PSDraw \"image\" method to restore the coordinate\n  system.\n\n- Fixed \"blend\" problem when applied to images that was\n  not already loaded (reported by Edward C. Jones)\n\n- Fixed -f option to \"pilconvert.py\" (from Anthony Baxter)\n\n1.0b1\n-----\n\n- Added Toby J. Sargeant's quantization package.  To enable\n  quantization, use the \"palette\" option to \"convert\"::\n\n    imOut = im.convert(\"P\", palette=Image.ADAPTIVE)\n\n  This can be used with \"L\", \"P\", and \"RGB\" images.  In this\n  version, dithering cannot be used with adaptive palettes.\n\n  Note: ADAPTIVE currently maps to median cut quantization\n  with 256 colours.  The quantization package also contains\n  a maximum coverage quantizer, which will be supported by\n  future versions of PIL.\n\n- Added Eric S. Raymond's \"pildriver\" image calculator to the\n  distribution.  See the docstring for more information.\n\n- The \"offset\" method no longer dumps core if given positive\n  offsets (from Charles Waldman).\n\n- Fixed a resource leak that could cause ImageWin to run out of\n  GDI resources (from Roger Burnham).\n\n- Added \"arc\", \"chord\", and \"pieslice\" methods to ImageDraw (inspired\n  by code contributed by Richard Jones).\n\n- Added experimental 16-bit support, via modes \"I;16\" (little endian\n  data) and \"I;16B\" (big endian).  Only a few methods properly support\n  such images (see above).\n\n- Added XV thumbnail file handler (from Gene Cash).\n\n- Fixed BMP image file handler to handle palette images with small\n  palettes (from Rob Hooft).\n\n- Fixed Sun raster file handler for palette images (from Charles\n  Waldman).\n\n- Improved various internal error messages.\n\n- Fixed Path constructor to handle arbitrary sequence objects.  This\n  also affects the ImageDraw class (from Richard Jones).\n\n- Fixed a bug in JpegDecode that caused PIL to report \"decoder error\n  -2\" for some progressive JPEG files (reported by Magnus Källström,\n  who also provided samples).\n\n- Fixed a bug in JpegImagePlugin that caused PIL to hang when loading\n  JPEG files using 16-bit quantization tables.\n\n- The Image \"transform\" method now supports Image.QUAD transforms.\n  The data argument is an 8-tuple giving the upper left, lower\n  left, lower right, and upper right corner of the source quadrilateral.\n  Also added Image.MESH transform which takes a list\n  of quadrilaterals.\n\n- The Image \"resize\", \"rotate\", and \"transform\" methods now support\n  Image.BILINEAR (2x2) and Image.BICUBIC (4x4) resampling filters.\n  Filters can be used with all transform methods.\n\n- The ImageDraw \"rectangle\" method now includes both the right\n  and the bottom edges when drawing filled rectangles.\n\n- The TGA decoder now works properly for runlength encoded images\n  which have more than one byte per pixel.\n\n- \"getbands\" on an YCbCr image now returns (\"Y\", \"Cb\", \"Cr\")\n\n- Some file drivers didn't handle the optional \"modify\" argument\n  to the load method.  This resulted in exceptions when you used\n  \"paste\" (and other methods that modify an image in place) on a\n  newly opened file.\n\n0.3b2\n-----\n\nThe test suite includes 825 individual tests.\n\n- An Image \"getbands\" method has been added.  It returns a tuple\n  containing the individual band names for this image.  To figure\n  out how many bands an image has, use \"len(im.getbands())\".\n\n- An Image \"putpixel\" method has been added.\n\n- The Image \"point\" method can now be used to convert \"L\" images\n  to any other format, via a lookup table.  That table should\n  contain 256 values for each band in the output image.\n\n- Some file drivers (including FLI/FLC, GIF, and IM) accidentally\n  overwrote the offset method with an internal attribute.  All\n  drivers have been updated to use private attributes where\n  possible.\n\n- The Image \"histogram\" method now works for \"I\" and \"F\" images.\n  For these modes, PIL divides the range between the min and\n  max values used in the image into 256 bins.  You can also\n  pass in your own min and max values via the \"extrema\" option::\n\n    h = im.histogram(extrema=(0, 255))\n\n- An Image \"getextrema\" method has been added.  It returns the\n  min and max values used in the image. In this release, this\n  works for single band images only.\n\n- Changed the PNG driver to load and save mode \"I\" images as\n  16-bit images.  When saving, values outside the range 0..65535\n  are clipped.\n\n- Fixed ImageFont.py to work with the new \"pilfont\" compiler.\n\n- Added JPEG \"save\" and \"draft\" support for mode \"YCbCr\" images.\n  Note that if you save an \"YCbCr\" image as a JPEG file and read\n  it back, it is read as an RGB file.  To get around this, you\n  can use the \"draft\" method::\n\n    im = Image.open(\"color.jpg\")\n    im.draft(\"YCbCr\", im.size)\n\n- Read \"RGBA\" TGA images.  Also fixed the orientation bug; all\n  images should now come out the right way.\n\n- Changed mode name (and internal representation) from \"YCrCb\"\n  to \"YCbCr\" (!)\n  **WARNING: MAY BREAK EXISTING CODE**\n\n0.3b1\n-----\n\nThe test suite includes 750 individual tests.\n\n- The \"pilfont\" package is now included in the standard PIL\n  distribution.  The pilfont utility can be used to convert\n  X BDF and PCF raster font files to a format understood by\n  the ImageFont module.\n\n- GIF files are now interlaced by default.  To write a\n  non-interlaced file, pass interlace=0 to the \"save\"\n  method.\n\n- The default string format has changed for the \"fromstring\"\n  and \"tostring\" methods.\n  **WARNING: MAY BREAK EXISTING CODE**\n\n  NOTE: If no extra arguments are given, the first line in\n  the string buffer is the top line of the image, instead of\n  the bottom line.  For RGB images, the string now contains\n  3 bytes per pixel instead of 4.  These changes were made\n  to make the methods compatible with the \"fromstring\"\n  factory function.\n\n  To get the old behaviour, use the following syntax::\n\n    data = im.tostring(\"raw\", \"RGBX\", 0, -1)\n    im.fromstring(data, \"raw\", \"RGBX\", 0, -1)\n\n- \"new\" no longer gives a MemoryError if the width or height\n  is zero (this only happened on platforms where malloc(0)\n  or calloc(0) returns NULL).\n\n- \"new\" now adds a default palette object to \"P\" images.\n\n- You can now convert directly between all modes supported by\n  PIL.  When converting colour images to \"P\", PIL defaults to\n  a \"web\" palette and dithering.  When converting grayscale\n  images to \"1\", PIL uses a thresholding and dithering.\n\n- Added a \"dither\" option to \"convert\".  By default, \"convert\"\n  uses floyd-steinberg error diffusion for \"P\" and \"1\" targets,\n  so this option is only used to *disable* dithering. Allowed\n  values are NONE (no dithering) or FLOYDSTEINBERG (default).\n  ::\n\n    imOut = im.convert(\"P\", dither=Image.NONE)\n\n- Added a full set of \"I\" decoders.  You can use \"fromstring\"\n  (and file decoders) to read any standard integer type as an\n  \"I\" image.\n\n- Added some support for \"YCbCr\" images (creation, conversion\n  from/to \"L\" and \"RGB\", IM YCC load/save)\n\n- \"getpixel\" now works properly with fractional coordinates.\n\n- ImageDraw \"setink\" now works with \"I\", \"F\", \"RGB\", \"RGBA\",\n  \"RGBX\", \"CMYK\", and \"YCbCr\" images.\n\n- ImImagePlugin no longer attaches palettes to \"RGB\" images.\n\n- Various minor fixes.\n\n0.3a4\n-----\n\n- Added experimental IPTC/NAA support.\n\n- Eliminated AttributeError exceptions after \"crop\" (from\n  Skip Montanaro)\n\n- Reads some uncompressed formats via memory mapping (this\n  is currently supported on Win32 only)\n\n- Fixed some last minute glitches in the last alpha release\n  (Types instead of types in Image.py, version numbers, etc.)\n\n- Eliminated some more bogus compiler warnings.\n\n- Various fixes to make PIL compile and run smoother on Macs\n  (from Jack Jansen).\n\n- Fixed \"fromstring\" and \"tostring\" for mode \"I\" images.\n\n0.3a3\n-----\n\nThe test suite includes 530 individual tests.\n\n- Eliminated unexpected side-effect in \"paste\" with matte.  \"paste\"\n  now works properly also if compiled with \"gcc\".\n\n- Adapted to Python 1.5 (build issues only)\n\n- Fixed the ImageDraw \"point\" method to draw also the last\n  point (!).\n\n- Added \"I\" and \"RGBX\" support to Image.new.\n\n- The plugin path is now properly prepended to the module search\n  path when a plugin module is imported.\n\n- Added \"draw\" method to the ImageWin.Dib class.  This is used by\n  Topaz to print images on Windows printers.\n\n- \"convert\" now supports conversions from \"P\" to \"1\" and \"F\".\n\n- \"paste\" can now take a colour instead of an image as the first argument.\n  The colour must match the colour argument given to the new function, and\n  match the mode of the target image.\n\n- Fixed \"paste\" to allow a mask also for mode \"F\" images.\n\n- The BMP driver now saves mode \"1\" images.  When loading images, the mode\n  is set to \"L\" for 8-bit files with grayscale palettes, and to \"P\" for\n  other 8-bit files.\n\n- The IM driver now reads and saves \"1\" images (file modes \"0 1\" or \"L 1\").\n\n- The JPEG and GIF drivers now saves \"1\" images.  For JPEG, the image\n  is saved as 8-bit grayscale (it will load as mode \"L\").  For GIF, the\n  image will be loaded as a \"P\" image.\n\n- Fixed a potential buffer overrun in the GIF encoder.\n\n0.3a2\n-----\n\nThe test suite includes 400 individual tests.\n\n- Improvements to the test suite revealed a number of minor bugs, which\n  are all fixed.  Note that crop/paste, 32-bit ImageDraw, and ImageFont\n  are still weak spots in this release.\n\n- Added \"putpalette\" method to the Image class.  You can use this\n  to add or modify the palette for \"P\" and \"L\" images.  If a palette\n  is added to an \"L\" image, it is automatically converted to a \"P\"\n  image.\n\n- Fixed ImageDraw to properly handle 32-bit image memories\n  (\"RGB\", \"RGBA\", \"CMYK\", \"F\")\n\n- Fixed \"fromstring\" and \"tostring\" not to mess up the mode attribute\n  in default mode.\n\n- Changed ImPlatform.h to work on CRAY's (don't have one at home, so I\n  haven't tried it).  The previous version assumed that either \"short\"\n  or \"int\" were 16-bit wide. PIL still won't compile on platforms where\n  neither \"short\", \"int\" nor \"long\" are 32-bit wide.\n\n- Added file= and data= keyword arguments to PhotoImage and BitmapImage.\n  This allows you to use them as drop-in replacements for the corresponding\n  Tkinter classes.\n\n- Removed bogus references to the crack coder (ImagingCrack).\n\n0.3a1\n-----\n\n- Make sure image is loaded in \"tostring\".\n\n- Added floating point packer (native 32-bit floats only).\n\n0.1b1 to 0.2 (b5)\n-----------------\n\n- Modified \"fromstring\" and \"tostring\" methods to use file codecs.\n  Also added \"fromstring\" factory method to create an image directly\n  from data in a string.\n\n- Added support for 32-bit floating point images (mode \"F\").  You\n  can convert between \"L\" and \"F\" images, and apply a subset of the\n  available image processing methods on the \"F\" image.  You can also\n  read virtually any data format into a floating point image memory;\n  see the section on \"Decoding Floating Point Data\" in the handbook\n  for more information.\n\n0.2b5 released; on windows only\n-------------------------------\n\n- Fixed the tobitmap() method to work properly for small bitmaps.\n\n- Added RMS and standard deviation to the ImageStat.Stat class.  Also\n  modified the constructor to take an optional feature mask, and also\n  to accept either an image or a list containing the histogram data.\n\n- The BitmapImage code in ImageTk can now use a special bitmap\n  decoder, which has to be patched into Tk.  See the \"Tk/pilbitmap.txt\"\n  file for details.  If not installed, bitmaps are transferred to Tk as\n  XBM strings.\n\n- The PhotoImage code in ImageTk now uses a Tcl command (\"PyImagingPaste\")\n  instead of a special image type.  This gives somewhat better performance,\n  and also allows PIL to support transparency.\n  **WARNING: TKAPPINIT MUST BE MODIFIED**\n\n- ImageTk now honours the alpha layer in RGBA images.  Only fully\n  transparent pixels are made transparent (that is, the alpha layer\n  is treated as a mask).  To treat the alpha laters as a matte, you\n  must paste the image on the background before handing it over to\n  ImageTk.\n\n- Added McIdas reader (supports 8-bit images only).\n\n- PIL now preloads drivers for BMP, GIF, JPEG, PPM, and TIFF.  As\n  long as you only load and save these formats, you don't have to\n  wait for a full scan for drivers.  To force scanning, call the\n  Image.init() function.\n\n- The \"seek\" and \"tell\" methods are now always available, also for\n  single-frame images.\n\n- Added optional mask argument to histogram method.  The mask may\n  be an \"1\" or \"L\" image with the same size as the original image.\n  Only pixels where the mask is non-zero are included in the\n  histogram.\n\n- The \"paste\" method now allows you to specify only the lower left\n  corner (a 2-tuple), instead of the full region (a 4-tuple).\n\n- Reverted to old plugin scanning model; now scans all directory\n  names in the path when looking for plugins.\n\n- Added PIXAR raster support.  Only uncompressed (\"dumped\") RGB\n  images can currently be read (based on information provided\n  by Greg Coats).\n\n- Added FlashPix (FPX) read support.  Reads all pixel formats, but\n  only the highest resolution is read, and the viewing transform is\n  currently ignored.\n\n- Made PNG encoding somewhat more efficient in \"optimize\" mode; a\n  bug in 0.2b4 didn't enable all predictor filters when optimized\n  storage were requested.\n\n- Added Microsoft Image Composer (MIC) read support.  When opened,\n  the first sprite in the file is loaded.  You can use the seek method\n  to load additional sprites from the file.\n\n- Properly reads \"P\" and \"CMYK\" PSD images.\n\n- \"pilconvert\" no longer optimizes by default; use the -o option to\n  make the file as small as possible (at the expense of speed); use\n  the -q option to set the quality when compressing to JPEG.\n\n- Fixed \"crop\" not to drop the palette for \"P\" images.\n\n- Added and verified FLC support.\n\n- Paste with \"L\" or \"RGBA\" alpha is now several times faster on most\n  platforms.\n\n- Changed Image.new() to initialize the image to black, as described\n  in the handbook.  To get an uninitialized image, use None as the\n  colour.\n\n- Fixed the PDF encoder to produce a valid header; Acrobat no longer\n  complains when you load PDF images created by PIL.\n\n- PIL only scans fully-qualified directory names in the path when\n  looking for plugins.\n  **WARNING: MAY BREAK EXISTING CODE**\n\n- Faster implementation of \"save\" used when filename is given,\n  or when file object has \"fileno\" and \"flush\" methods.\n\n- Don't crash in \"crop\" if region extends outside the source image.\n\n- Eliminated a massive memory leak in the \"save\" function.\n\n- The GIF decoder doesn't crash if the code size is set to an illegal\n  value.  This could happen since another bug didn't handle local\n  palettes properly if they didn't have the same size as the\n  global palette (not very common).\n\n- Added predictor support (TIFF 6.0 section 14) to the TIFF decoder.\n\n- Fixed palette and padding problems in BMP driver.  Now properly\n  writes \"1\", \"L\", \"P\" and \"RGB\" images.\n\n- Fixed getpixel()/getdata() to return correct pixel values.\n\n- Added PSD (PhotoShop) read support.  Reads both uncompressed\n  and compressed images of most types.\n\n- Added GIF write support (writes \"uncompressed\" GIF files only,\n  due to unresolvable licensing issues).  The \"gifmaker.py\" script\n  can be used to create GIF animations.\n\n- Reads 8-bit \"L\" and \"P\" TGA images.  Also reads 16-bit \"RGB\"\n  images.\n\n- Added FLI read support.  This driver has only been tested\n  on a few FLI samples.\n\n- Reads 2-bit and 4-bit PCX images.\n\n- Added MSP read and write support.  Both version 1 and 2 can be\n  read, but only version 1 (uncompressed) files are written.\n\n- Fixed a bug in the FLI/FLC identification code that caused the\n  driver to raise an exception when parsing valid FLI/FLC files.\n\n- Improved performance when loading file format plugins, and when\n  opening files.\n\n- Added GIF animation support, via the \"seek\" and \"tell\" methods.\n  You can use \"player.py\" to play an animated GIF file.\n\n- Removed MNG support, since the spec is changing faster than I\n  can change the code.  I've added support for the experimental\n  ARG format instead.  Contact me for more information on this\n  format.\n\n- Added keyword options to the \"save\" method.  The following options\n  are currently supported:\n\n  .. list-table::\n     :widths: 25 25 50\n     :header-rows: 1\n\n     * - Format\n       - Option\n       - Description\n     * - JPEG\n       - optimize\n       - Minimize output file at the expense of compression speed.\n     * - JPEG\n       - progressive\n       - Enable progressive output. The option value is ignored.\n     * - JPEG\n       - quality\n       - Set compression quality (1-100). The default value is 75.\n     * - JPEG\n       - smooth\n       - Smooth dithered images. Value is strength (1-100). Default is off (0).\n     * - PNG\n       - optimize\n       - Minimize output file at the expense of compression speed.\n\n  Expect more options in future releases.  Also note that\n  file writers silently ignore unknown options.\n\n- Plugged memory leaks in the PNG and TIFF decoders.\n\n- Added PNG write support.\n\n- (internal) RGB unpackers and converters now set the pad byte\n  to 255 (full opacity).\n\n- Properly handles the \"transparency\" property for GIF, PNG\n  and XPM files.\n\n- Added a \"putalpha\" method, allowing you to attach a \"1\" or \"L\"\n  image as the alpha layer to an \"RGBA\" image.\n\n- Various improvements to the sample scripts:\n\n  .. list-table::\n     :widths: 25 75\n\n     * - pilconvert\n       - Carries out some extra tricks in order to make\n         the resulting file as small as possible.\n     * - explode\n       - (NEW) Split an image sequence into individual frames.\n     * - gifmaker\n       - (NEW) Convert a sequence file into a GIF animation.\n         Note that the GIF encoder create \"uncompressed\" GIF\n         files, so animations created by this script are\n         rather large (typically 2-5 times the compressed\n         sizes).\n     * - image2py\n       - (NEW) Convert a single image to a python module.  See\n         comments in this script for details.\n     * - player\n       - If multiple images are given on the command line,\n         they are interpreted as frames in a sequence.  The\n         script assumes that they all have the same size.\n         Also note that this script now can play FLI/FLC\n         and GIF animations.\n\n         This player can also execute embedded Python\n         animation applets (ARG format only).\n     * - viewer\n       - Transparent images (\"P\" with transparency property,\n         and \"RGBA\") are superimposed on the standard Tk background.\n\n- Fixed colour argument to \"new\".  For multilayer images, pass a\n  tuple: (Red, Green, Blue), (Red, Green, Blue, Alpha), or (Cyan,\n  Magenta, Yellow, Black).\n\n- Added XPM (X pixmap) read support.\n\n0.2b3\n-----\n\n- Added MNG (multi-image network graphics) read support.  \"Ming\"\n  is a proposed animation standard, based on the PNG file format.\n\n  You can use the \"player\" sample script to display some flavours\n  of this format.  The MNG standard is still under development,\n  as is this driver.  More information, including sample files,\n  can be found at <ftp://swrinde.nde.swri.edu/pub/mng>\n\n- Added a \"verify\" method to images loaded from file.  This method\n  scans the file for errors, without actually decoding the image\n  data, and raises a suitable exception if it finds any problems.\n  Currently implemented for PNG and MNG files only.\n\n- Added support for interlaced GIF images.\n\n- Added PNG read support -- if linked with the ZLIB compression library,\n  PIL reads all kinds of PNG images, except interlaced files.\n\n- Improved PNG identification support -- doesn't mess up on unknown\n  chunks, identifies all possible PNG modes, and verifies checksum\n  on PNG header chunks.\n\n- Added an experimental reader for placable Windows Meta Files (WMF).\n  This reader is still very incomplete, but it illustrates how PIL's\n  drawing capabilities can be used to render vector and metafile\n  formats.\n\n- Added restricted drivers for images from Image Tools (grayscale\n  only) and LabEye/IFUNC (common interchange modes only).\n\n- Some minor improvements to the sample scripts provided in the\n  \"Scripts\" directory.\n\n- The test images have been moved to the \"Images\" directory.\n\n0.2b2 released. 0.2b1 released for Windows only\n-----------------------------------------------\n\n- Fixed filling of complex polygons.  The ImageDraw \"line\" and\n  \"polygon\" methods also accept Path objects.\n\n- The ImageTk \"PhotoImage\" object can now be constructed directly\n  from an image.  You can also pass the object itself to Tkinter,\n  instead of using the \"image\" attribute.  Finally, using \"paste\"\n  on a displayed image automatically updates the display.\n\n- The ImageTk \"BitmapImage\" object allows you to create transparent\n  overlays from 1-bit images.  You can pass the object itself to\n  Tkinter.  The constructor takes the same arguments as the Tkinter\n  BitmapImage class; use the \"foreground\" option to set the colour\n  of the overlay.\n\n- Added a \"putdata\" method to the Image class.  This can be used to\n  load a 1-layer image with data from a sequence object or a string.\n  An optional floating point scale and offset can be used to adjust\n  the data to fit into the 8-bit pixel range.  Also see the \"getdata\"\n  method.\n\n- Added the EXTENT method to the Image \"transform\" method.  This can\n  be used to quickly crop, stretch, shrink, or mirror a subregion\n  from another image.\n\n- Adapted to Python 1.4.\n\n- Added a project makefile for Visual C++ 4.x.  This allows you to\n  easily build a dynamically linked version of PIL for Windows 95\n  and NT.\n\n- A Tk \"booster\" patch for Windows is available.  It gives dramatic\n  performance improvements for some displays.  Has been tested with\n  Tk 4.2 only, but is likely to work with Tk 4.1 as well.  See the Tk\n  subdirectory for details.\n\n- You can now save 1-bit images in the XBM format.  In addition, the\n  Image class now provides a \"tobitmap\" method which returns a string\n  containing an XBM representation of the image.  Quite handy to use\n  with Tk.\n\n- More conversions, including \"RGB\" to \"1\" and more.\n\n0.2a1\n-----\n\n- Where earlier versions accepted lists, this version accepts arbitrary\n  Python sequences (including strings, in some cases).  A few resource\n  leaks were plugged in the process.\n\n- The Image \"paste\" method now allows the box to extend outside\n  the target image.  The size of the box, the image to be pasted,\n  and the optional mask must still match.\n\n- The ImageDraw module now supports filled polygons, outlined and\n  filled ellipses, and text.  Font support is rudimentary, though.\n\n- The Image \"point\" method now takes an optional mode argument,\n  allowing you to convert the image while translating it.  Currently,\n  this can only be used to convert \"L\" or \"P\" images to \"1\" images\n  (creating thresholded images or \"matte\" masks).\n\n- An Image \"getpixel\" method has been added.  For single band images,\n  it returns the pixel value at a given position as an integer.\n  For n-band images, it returns an n-tuple of integers.\n\n- An Image \"getdata\" method has been added.  It returns a sequence\n  object representing the image as a 1-dimensional array.  Only len()\n  and [] can be used with this sequence.  This method returns a\n  reference to the existing image data, so changes in the image\n  will be immediately reflected in the sequence object.\n\n- Fixed alignment problems in the Windows BMP writer.\n\n- If converting an \"RGB\" image to \"RGB\" or \"L\", you can give a second\n  argument containing a colour conversion matrix.\n\n- An Image \"getbbox\" method has been added.  It returns the bounding\n  box of data in an image, considering the value 0 as background.\n\n- An Image \"offset\" method has been added.  It returns a new image\n  where the contents of the image have been offset the given distance\n  in X and/or Y direction.  Data wraps between edges.\n\n- Saves PDF images.  The driver creates a binary PDF 1.1 files, using\n  JPEG compression for \"L\", \"RGB\", and \"CMYK\" images, and hex encoding\n  (same as for PostScript) for other formats.\n\n- The \"paste\" method now accepts \"1\" masks.  Zero means transparent,\n  any other pixel value means opaque.  This is faster than using an\n  \"L\" transparency mask.\n\n- Properly writes EPS files (and properly prints images to PostScript\n  printers as well).\n\n- Reads 4-bit BMP files, as well as 4 and 8-bit Windows ICO and CUR\n  files.  Cursor animations are not supported.\n\n- Fixed alignment problems in the Sun raster loader.\n\n- Added \"draft\" and \"thumbnail\" methods.  The draft method is used\n  to optimize loading of JPEG and PCD files, the thumbnail method is\n  used to create a thumbnail representation of an image.\n\n- Added Windows display support, via the ImageWin class (see the\n  handbook for details).\n\n- Added raster conversion for EPS files.  This requires GNU or Aladdin\n  Ghostscript, and probably works on UNIX only.\n\n- Reads PhotoCD (PCD) images.  The base resolution (768x512) can be\n  read from a PhotoCD file.\n\n- Eliminated some compiler warnings.  Bindings now compile cleanly in C++\n  mode.  Note that the Imaging library itself must be compiled in C mode.\n\n- Added \"bdf2pil.py\", which converts BDF fonts into images with associated\n  metrics.  This is definitely work in progress.  For info, see description\n  in script for details.\n\n- Fixed a bug in the \"ImageEnhance.py\" module.\n\n- Fixed a bug in the netpbm save hack in \"GifImagePlugin.py\"\n\n- Fixed 90 and 270 degree rotation of rectangular images.\n\n- Properly reads 8-bit TIFF palette-color images.\n\n- Reads plane separated RGB and CMYK TIFF images.\n\n- Added driver debug mode.  This is enabled by setting Image.DEBUG\n  to a non-zero value.  Try the -D option to \"pilfile.py\" and see what\n  happens.\n\n- Don't crash on \"atend\" constructs in PostScript files.\n\n- Only the Image module imports _imaging directly.  Other modules\n  should refer to the binding module as \"Image.core\".\n\n0.0 to 0.1 (b1)\n---------------\n\n- A handbook is available (distributed separately).\n\n- The coordinate system is changed so that (0,0) is now located\n  in the upper left corner.  This is in compliance with ISO 12087\n  and 90% of all other image processing and graphics libraries.\n\n- Modes \"1\" (bilevel) and \"P\" (palette) have been introduced.  Note\n  that bilevel images are stored with one byte per pixel.\n\n- The Image \"crop\" and \"paste\" methods now accepts None as the\n  box argument, to refer to the full image (self, that is).\n\n- The Image \"crop\" method now works properly.\n\n- The Image \"point\" method is now available.  You can use either a\n  lookup table or a function taking one argument.\n\n- The Image join function has been renamed to \"merge\".\n\n- An Image \"composite\" function has been added.  It is identical\n  to copy() followed by paste(mask).\n\n- An Image \"eval\" function has been added.  It is currently identical\n  to point(function); that is, only a single image can be processed.\n\n- A set of channel operations has been added.  See the \"ImageChops\"\n  module, test_chops.py, and the handbook for details.\n\n- Added the \"pilconvert\" utility, which converts image files.  Note\n  that the number of output formats are still quite restricted.\n\n- Added the \"pilfile\" utility, which quickly identifies image files\n  (without loading them, in most cases).\n\n- Added the \"pilprint\" utility, which prints image files to PostScript\n  printers.\n\n- Added a rudimentary version of the \"pilview\" utility, which is\n  simple image viewer based on Tk.  Only File/Exit and Image/Next\n  works properly.\n\n- An interface to Tk has been added.  See \"Lib/ImageTk.py\" and README\n  for details.\n\n- An interface to Jack Jansen's Img library has been added (thanks to\n  Jack).  This allows you to read images through the Img extensions file\n  format handlers.  See the file \"Lib/ImgExtImagePlugin.py\" for details.\n\n- PostScript printing is provided through the PSDraw module.  See the\n  handbook for details.\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.4189453125,
          "content": "The Python Imaging Library (PIL) is\n\n    Copyright © 1997-2011 by Secret Labs AB\n    Copyright © 1995-2011 by Fredrik Lundh and contributors\n\nPillow is the friendly PIL fork. It is\n\n    Copyright © 2010 by Jeffrey A. Clark and contributors\n\nLike PIL, Pillow is licensed under the open source MIT-CMU License:\n\nBy obtaining, using, and/or copying this software and/or its associated\ndocumentation, you agree that you have read, understood, and will comply\nwith the following terms and conditions:\n\nPermission to use, copy, modify and distribute this software and its\ndocumentation for any purpose and without fee is hereby granted,\nprovided that the above copyright notice appears in all copies, and that\nboth that copyright notice and this permission notice appear in supporting\ndocumentation, and that the name of Secret Labs AB or the author not be\nused in advertising or publicity pertaining to distribution of the software\nwithout specific, written prior permission.\n\nSECRET LABS AB AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS\nSOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS.\nIN NO EVENT SHALL SECRET LABS AB OR THE AUTHOR BE LIABLE FOR ANY SPECIAL,\nINDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\nOR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n"
        },
        {
          "name": "MANIFEST.in",
          "type": "blob",
          "size": 0.5361328125,
          "content": "include *.c\ninclude *.h\ninclude *.in\ninclude *.md\ninclude *.py\ninclude *.rst\ninclude *.sh\ninclude *.toml\ninclude *.txt\ninclude *.yaml\ninclude .flake8\ninclude LICENSE\ninclude Makefile\ninclude tox.ini\ngraft Tests\ngraft src\ngraft depends\ngraft winbuild\ngraft docs\ngraft _custom_build\n\n# build/src control detritus\nexclude .appveyor.yml\nexclude .clang-format\nexclude .coveragerc\nexclude .editorconfig\nexclude .readthedocs.yml\nexclude codecov.yml\nexclude renovate.json\nglobal-exclude .git*\nglobal-exclude *.pyc\nglobal-exclude *.so\nprune .ci\nprune wheels\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 3.7353515625,
          "content": ".DEFAULT_GOAL := help\n\n.PHONY: clean\nclean:\n\trm src/PIL/*.so || true\n\trm -r build || true\n\tfind . -name __pycache__ | xargs rm -r || true\n\n.PHONY: coverage\ncoverage:\n\tpython3 -c \"import pytest\" > /dev/null 2>&1 || python3 -m pip install pytest\n\tpython3 -m pytest -qq\n\trm -r htmlcov || true\n\tpython3 -c \"import coverage\" > /dev/null 2>&1 || python3 -m pip install coverage\n\tpython3 -m coverage report\n\n.PHONY: doc\n.PHONY: html\ndoc html:\n\t$(MAKE) -C docs html\n\n.PHONY: htmlview\nhtmlview:\n\t$(MAKE) -C docs htmlview\n\n.PHONY: doccheck\ndoccheck:\n\t$(MAKE) doc\n# Don't make our tests rely on the links in the docs being up every single build.\n# We don't control them.  But do check, and update them to the target of their redirects.\n\t$(MAKE) -C docs linkcheck || true\n\n.PHONY: docserve\ndocserve:\n\tcd docs/_build/html && python3 -m http.server 2> /dev/null&\n\n.PHONY: help\nhelp:\n\t@echo \"Welcome to Pillow development. Please use \\`make <target>\\` where <target> is one of\"\n\t@echo \"  clean              remove build products\"\n\t@echo \"  coverage           run coverage test (in progress)\"\n\t@echo \"  doc                make HTML docs\"\n\t@echo \"  docserve           run an HTTP server on the docs directory\"\n\t@echo \"  html               make HTML docs\"\n\t@echo \"  htmlview           open the index page built by the html target in your browser\"\n\t@echo \"  install            make and install\"\n\t@echo \"  install-coverage   make and install with C coverage\"\n\t@echo \"  lint               run the lint checks\"\n\t@echo \"  lint-fix           run Ruff to (mostly) fix lint issues\"\n\t@echo \"  release-test       run code and package tests before release\"\n\t@echo \"  test               run tests on installed Pillow\"\n\n.PHONY: install\ninstall:\n\tpython3 -m pip -v install .\n\tpython3 selftest.py\n\n.PHONY: install-coverage\ninstall-coverage:\n\tCFLAGS=\"-coverage -Werror=implicit-function-declaration\" python3 -m pip -v install .\n\tpython3 selftest.py\n\n.PHONY: debug\ndebug:\n# make a debug version if we don't have a -dbg python. Leaves in symbols\n# for our stuff, kills optimization, and redirects to dev null so we\n# see any build failures.\n\tmake clean > /dev/null\n\tCFLAGS='-g -O0' python3 -m pip -v install . > /dev/null\n\n.PHONY: release-test\nrelease-test:\n\tpython3 Tests/check_release_notes.py\n\tpython3 -m pip install -e .[tests]\n\tpython3 selftest.py\n\tpython3 -m pytest Tests\n\tpython3 -m pip install .\n\tpython3 -m pytest -qq\n\tpython3 -m check_manifest\n\tpython3 -m pyroma .\n\t$(MAKE) readme\n\n.PHONY: sdist\nsdist:\n\tpython3 -m build --help > /dev/null 2>&1 || python3 -m pip install build\n\tpython3 -m build --sdist\n\tpython3 -m twine --help > /dev/null 2>&1 || python3 -m pip install twine\n\tpython3 -m twine check --strict dist/*\n\n.PHONY: test\ntest:\n\tpython3 -c \"import pytest\" > /dev/null 2>&1 || python3 -m pip install pytest\n\tpython3 -m pytest -qq\n\n.PHONY: valgrind\nvalgrind:\n\tpython3 -c \"import pytest_valgrind\" > /dev/null 2>&1 || python3 -m pip install pytest-valgrind\n\tPYTHONMALLOC=malloc valgrind --suppressions=Tests/oss-fuzz/python.supp --leak-check=no \\\n            --log-file=/tmp/valgrind-output \\\n            python3 -m pytest --no-memcheck -vv --valgrind --valgrind-log=/tmp/valgrind-output\n\n.PHONY: readme\nreadme:\n\tpython3 -c \"import markdown2\" > /dev/null 2>&1 || python3 -m pip install markdown2\n\tpython3 -m markdown2 README.md > .long-description.html && open .long-description.html\n\n\n.PHONY: lint\nlint:\n\tpython3 -c \"import tox\" > /dev/null 2>&1 || python3 -m pip install tox\n\tpython3 -m tox -e lint\n\n.PHONY: lint-fix\nlint-fix:\n\tpython3 -c \"import black\" > /dev/null 2>&1 || python3 -m pip install black\n\tpython3 -m black .\n\tpython3 -c \"import ruff\" > /dev/null 2>&1 || python3 -m pip install ruff\n\tpython3 -m ruff check --fix .\n\n.PHONY: mypy\nmypy:\n\tpython3 -c \"import tox\" > /dev/null 2>&1 || python3 -m pip install tox\n\tpython3 -m tox -e mypy\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 6.220703125,
          "content": "<p align=\"center\">\n    <img width=\"248\" height=\"250\" src=\"https://raw.githubusercontent.com/python-pillow/pillow-logo/main/pillow-logo-248x250.png\" alt=\"Pillow logo\">\n</p>\n\n# Pillow\n\n## Python Imaging Library (Fork)\n\nPillow is the friendly PIL fork by [Jeffrey A. Clark and\ncontributors](https://github.com/python-pillow/Pillow/graphs/contributors).\nPIL is the Python Imaging Library by Fredrik Lundh and contributors.\nAs of 2019, Pillow development is\n[supported by Tidelift](https://tidelift.com/subscription/pkg/pypi-pillow?utm_source=pypi-pillow&utm_medium=readme&utm_campaign=enterprise).\n\n<table>\n    <tr>\n        <th>docs</th>\n        <td>\n            <a href=\"https://pillow.readthedocs.io/?badge=latest\"><img\n                alt=\"Documentation Status\"\n                src=\"https://readthedocs.org/projects/pillow/badge/?version=latest\"></a>\n        </td>\n    </tr>\n    <tr>\n        <th>tests</th>\n        <td>\n            <a href=\"https://github.com/python-pillow/Pillow/actions/workflows/lint.yml\"><img\n                alt=\"GitHub Actions build status (Lint)\"\n                src=\"https://github.com/python-pillow/Pillow/workflows/Lint/badge.svg\"></a>\n            <a href=\"https://github.com/python-pillow/Pillow/actions/workflows/test.yml\"><img\n                alt=\"GitHub Actions build status (Test Linux and macOS)\"\n                src=\"https://github.com/python-pillow/Pillow/workflows/Test/badge.svg\"></a>\n            <a href=\"https://github.com/python-pillow/Pillow/actions/workflows/test-windows.yml\"><img\n                alt=\"GitHub Actions build status (Test Windows)\"\n                src=\"https://github.com/python-pillow/Pillow/workflows/Test%20Windows/badge.svg\"></a>\n            <a href=\"https://github.com/python-pillow/Pillow/actions/workflows/test-mingw.yml\"><img\n                alt=\"GitHub Actions build status (Test MinGW)\"\n                src=\"https://github.com/python-pillow/Pillow/workflows/Test%20MinGW/badge.svg\"></a>\n            <a href=\"https://github.com/python-pillow/Pillow/actions/workflows/test-cygwin.yml\"><img\n                alt=\"GitHub Actions build status (Test Cygwin)\"\n                src=\"https://github.com/python-pillow/Pillow/workflows/Test%20Cygwin/badge.svg\"></a>\n            <a href=\"https://github.com/python-pillow/Pillow/actions/workflows/test-docker.yml\"><img\n                alt=\"GitHub Actions build status (Test Docker)\"\n                src=\"https://github.com/python-pillow/Pillow/workflows/Test%20Docker/badge.svg\"></a>\n            <a href=\"https://ci.appveyor.com/project/python-pillow/Pillow\"><img\n                alt=\"AppVeyor CI build status (Windows)\"\n                src=\"https://img.shields.io/appveyor/build/python-pillow/Pillow/main.svg?label=Windows%20build\"></a>\n            <a href=\"https://github.com/python-pillow/Pillow/actions/workflows/wheels.yml\"><img\n                alt=\"GitHub Actions build status (Wheels)\"\n                src=\"https://github.com/python-pillow/Pillow/workflows/Wheels/badge.svg\"></a>\n            <a href=\"https://app.codecov.io/gh/python-pillow/Pillow\"><img\n                alt=\"Code coverage\"\n                src=\"https://codecov.io/gh/python-pillow/Pillow/branch/main/graph/badge.svg\"></a>\n            <a href=\"https://issues.oss-fuzz.com/issues?q=title:pillow\"><img\n                alt=\"Fuzzing Status\"\n                src=\"https://oss-fuzz-build-logs.storage.googleapis.com/badges/pillow.svg\"></a>\n        </td>\n    </tr>\n    <tr>\n        <th>package</th>\n        <td>\n            <a href=\"https://zenodo.org/badge/latestdoi/17549/python-pillow/Pillow\"><img\n                alt=\"Zenodo\"\n                src=\"https://zenodo.org/badge/17549/python-pillow/Pillow.svg\"></a>\n            <a href=\"https://tidelift.com/subscription/pkg/pypi-pillow?utm_source=pypi-pillow&utm_medium=badge\"><img\n                alt=\"Tidelift\"\n                src=\"https://tidelift.com/badges/package/pypi/pillow?style=flat\"></a>\n            <a href=\"https://pypi.org/project/pillow/\"><img\n                alt=\"Newest PyPI version\"\n                src=\"https://img.shields.io/pypi/v/pillow.svg\"></a>\n            <a href=\"https://pypi.org/project/pillow/\"><img\n                alt=\"Number of PyPI downloads\"\n                src=\"https://img.shields.io/pypi/dm/pillow.svg\"></a>\n            <a href=\"https://www.bestpractices.dev/projects/6331\"><img\n                alt=\"OpenSSF Best Practices\"\n                src=\"https://www.bestpractices.dev/projects/6331/badge\"></a>\n        </td>\n    </tr>\n    <tr>\n        <th>social</th>\n        <td>\n            <a href=\"https://gitter.im/python-pillow/Pillow?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge\"><img\n                alt=\"Join the chat at https://gitter.im/python-pillow/Pillow\"\n                src=\"https://badges.gitter.im/python-pillow/Pillow.svg\"></a>\n            <a href=\"https://fosstodon.org/@pillow\"><img\n                alt=\"Follow on https://fosstodon.org/@pillow\"\n                src=\"https://img.shields.io/badge/publish-on%20Mastodon-595aff.svg\"\n                rel=\"me\"></a>\n        </td>\n    </tr>\n</table>\n\n## Overview\n\nThe Python Imaging Library adds image processing capabilities to your Python interpreter.\n\nThis library provides extensive file format support, an efficient internal representation, and fairly powerful image processing capabilities.\n\nThe core image library is designed for fast access to data stored in a few basic pixel formats. It should provide a solid foundation for a general image processing tool.\n\n## More Information\n\n- [Documentation](https://pillow.readthedocs.io/)\n  - [Installation](https://pillow.readthedocs.io/en/latest/installation/basic-installation.html)\n  - [Handbook](https://pillow.readthedocs.io/en/latest/handbook/index.html)\n- [Contribute](https://github.com/python-pillow/Pillow/blob/main/.github/CONTRIBUTING.md)\n  - [Issues](https://github.com/python-pillow/Pillow/issues)\n  - [Pull requests](https://github.com/python-pillow/Pillow/pulls)\n- [Release notes](https://pillow.readthedocs.io/en/stable/releasenotes/index.html)\n- [Changelog](https://github.com/python-pillow/Pillow/releases)\n  - [Pre-fork](https://github.com/python-pillow/Pillow/blob/main/CHANGES.rst#pre-fork)\n\n## Report a Vulnerability\n\nTo report a security vulnerability, please follow the procedure described in the [Tidelift security policy](https://tidelift.com/docs/security).\n"
        },
        {
          "name": "RELEASING.md",
          "type": "blob",
          "size": 4.205078125,
          "content": "# Release Checklist\n\nSee https://pillow.readthedocs.io/en/stable/releasenotes/versioning.html for\ninformation about how the version numbers line up with releases.\n\n## Main Release\n\nReleased quarterly on January 2nd, April 1st, July 1st and October 15th.\n\n* [ ] Open a release ticket e.g. https://github.com/python-pillow/Pillow/issues/3154\n* [ ] Develop and prepare release in `main` branch.\n* [ ] Check [GitHub Actions](https://github.com/python-pillow/Pillow/actions) and [AppVeyor](https://ci.appveyor.com/project/python-pillow/Pillow) to confirm passing tests in `main` branch.\n* [ ] Check that all the wheel builds pass the tests in the [GitHub Actions \"Wheels\" workflow](https://github.com/python-pillow/Pillow/actions/workflows/wheels.yml) jobs by manually triggering them.\n* [ ] In compliance with [PEP 440](https://peps.python.org/pep-0440/), update version identifier in `src/PIL/_version.py`\n* [ ] Run pre-release check via `make release-test` in a freshly cloned repo.\n* [ ] Create branch and tag for release e.g.:\n  ```bash\n  git branch 5.2.x\n  git tag 5.2.0\n  git push --tags\n  ```\n* [ ] Check the [GitHub Actions \"Wheels\" workflow](https://github.com/python-pillow/Pillow/actions/workflows/wheels.yml)\n  has passed, including the \"Upload release to PyPI\" job. This will have been triggered\n  by the new tag.\n* [ ] Publish the [release on GitHub](https://github.com/python-pillow/Pillow/releases).\n* [ ] In compliance with [PEP 440](https://peps.python.org/pep-0440/),\n      increment and append `.dev0` to version identifier in `src/PIL/_version.py` and then:\n  ```bash\n  git push --all\n   ```\n## Point Release\n\nReleased as needed for security, installation or critical bug fixes.\n\n* [ ] Make necessary changes in `main` branch.\n* [ ] Check out release branch e.g.:\n  ```bash\n  git checkout -t remotes/origin/5.2.x\n  ```\n* [ ] Cherry pick individual commits from `main` branch to release branch e.g. `5.2.x`, then `git push`.\n* [ ] Check [GitHub Actions](https://github.com/python-pillow/Pillow/actions) and [AppVeyor](https://ci.appveyor.com/project/python-pillow/Pillow) to confirm passing tests in release branch e.g. `5.2.x`.\n* [ ] In compliance with [PEP 440](https://peps.python.org/pep-0440/), update version identifier in `src/PIL/_version.py`\n* [ ] Run pre-release check via `make release-test`.\n* [ ] Create tag for release e.g.:\n  ```bash\n  git tag 5.2.1\n  git push --tags\n  ```\n* [ ] Create and check source distribution:\n  ```bash\n  make sdist\n  ```\n* [ ] Check the [GitHub Actions \"Wheels\" workflow](https://github.com/python-pillow/Pillow/actions/workflows/wheels.yml)\n  has passed, including the \"Upload release to PyPI\" job. This will have been triggered\n  by the new tag.\n* [ ] Publish the [release on GitHub](https://github.com/python-pillow/Pillow/releases) and then:\n  ```bash\n  git push\n  ```\n\n## Embargoed Release\n\nReleased as needed privately to individual vendors for critical security-related bug fixes.\n\n* [ ] Prepare patch for all versions that will get a fix. Test against local installations.\n* [ ] Commit against `main`, cherry pick to affected release branches.\n* [ ] Run local test matrix on each release & Python version.\n* [ ] Privately send to distros.\n* [ ] Run pre-release check via `make release-test`\n* [ ] Amend any commits with the CVE #\n* [ ] On release date, tag and push to GitHub.\n  ```bash\n  git checkout 2.5.x\n  git tag 2.5.3\n  git push origin --tags\n  ```\n* [ ] Check the [GitHub Actions \"Wheels\" workflow](https://github.com/python-pillow/Pillow/actions/workflows/wheels.yml)\n  has passed, including the \"Upload release to PyPI\" job. This will have been triggered\n  by the new tag.\n* [ ] Publish the [release on GitHub](https://github.com/python-pillow/Pillow/releases) and then:\n  ```bash\n  git push origin 2.5.x\n  ```\n\n## Publicize Release\n\n* [ ] Announce release availability via [Mastodon](https://fosstodon.org/@pillow) e.g. https://fosstodon.org/@pillow/110639450470725321\n\n## Documentation\n\n* [ ] Make sure the [default version for Read the Docs](https://pillow.readthedocs.io/en/stable/) is up-to-date with the release changes\n\n## Docker Images\n\n* [ ] Update Pillow in the Docker Images repository\n  ```bash\n  git clone https://github.com/python-pillow/docker-images\n  cd docker-images\n  ./update-pillow-tag.sh [[release tag]]\n  ```\n"
        },
        {
          "name": "Tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "_custom_build",
          "type": "tree",
          "content": null
        },
        {
          "name": "codecov.yml",
          "type": "blob",
          "size": 0.4833984375,
          "content": "# Documentation: https://docs.codecov.com/docs/codecov-yaml\n\ncodecov:\n  # Avoid \"Missing base report\" due to committing with \"[CI skip]\"\n  # https://github.com/codecov/support/issues/363\n  # https://docs.codecov.com/docs/comparing-commits\n  allow_coverage_offsets: true\n\ncomment: false\n\ncoverage:\n  status:\n    project:\n      default:\n        threshold: 0.1%\n\n# Matches 'omit:' in .coveragerc\nignore:\n  - \"Tests/32bit_segfault_check.py\"\n  - \"Tests/check_*.py\"\n  - \"Tests/createfontdatachunk.py\"\n"
        },
        {
          "name": "conftest.py",
          "type": "blob",
          "size": 0.068359375,
          "content": "from __future__ import annotations\n\npytest_plugins = [\"Tests.helper\"]\n"
        },
        {
          "name": "depends",
          "type": "tree",
          "content": null
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "pyproject.toml",
          "type": "blob",
          "size": 4.732421875,
          "content": "[build-system]\nbuild-backend = \"backend\"\nrequires = [\n  \"setuptools>=67.8\",\n]\nbackend-path = [\n  \"_custom_build\",\n]\n\n[project]\nname = \"pillow\"\ndescription = \"Python Imaging Library (Fork)\"\nreadme = \"README.md\"\nkeywords = [\n  \"Imaging\",\n]\nlicense = { text = \"MIT-CMU\" }\nauthors = [\n  { name = \"Jeffrey A. Clark\", email = \"aclark@aclark.net\" },\n]\nrequires-python = \">=3.9\"\nclassifiers = [\n  \"Development Status :: 6 - Mature\",\n  \"License :: OSI Approved :: CMU License (MIT-CMU)\",\n  \"Programming Language :: Python :: 3 :: Only\",\n  \"Programming Language :: Python :: 3.9\",\n  \"Programming Language :: Python :: 3.10\",\n  \"Programming Language :: Python :: 3.11\",\n  \"Programming Language :: Python :: 3.12\",\n  \"Programming Language :: Python :: 3.13\",\n  \"Programming Language :: Python :: Implementation :: CPython\",\n  \"Programming Language :: Python :: Implementation :: PyPy\",\n  \"Topic :: Multimedia :: Graphics\",\n  \"Topic :: Multimedia :: Graphics :: Capture :: Digital Camera\",\n  \"Topic :: Multimedia :: Graphics :: Capture :: Screen Capture\",\n  \"Topic :: Multimedia :: Graphics :: Graphics Conversion\",\n  \"Topic :: Multimedia :: Graphics :: Viewers\",\n  \"Typing :: Typed\",\n]\ndynamic = [\n  \"version\",\n]\noptional-dependencies.docs = [\n  \"furo\",\n  \"olefile\",\n  \"sphinx>=8.1\",\n  \"sphinx-copybutton\",\n  \"sphinx-inline-tabs\",\n  \"sphinxext-opengraph\",\n]\noptional-dependencies.fpx = [\n  \"olefile\",\n]\noptional-dependencies.mic = [\n  \"olefile\",\n]\noptional-dependencies.tests = [\n  \"check-manifest\",\n  \"coverage>=7.4.2\",\n  \"defusedxml\",\n  \"markdown2\",\n  \"olefile\",\n  \"packaging\",\n  \"pyroma\",\n  \"pytest\",\n  \"pytest-cov\",\n  \"pytest-timeout\",\n  \"trove-classifiers>=2024.10.12\",\n]\noptional-dependencies.typing = [\n  \"typing-extensions; python_version<'3.10'\",\n]\noptional-dependencies.xmp = [\n  \"defusedxml\",\n]\nurls.Changelog = \"https://github.com/python-pillow/Pillow/releases\"\nurls.Documentation = \"https://pillow.readthedocs.io\"\nurls.Funding = \"https://tidelift.com/subscription/pkg/pypi-pillow?utm_source=pypi-pillow&utm_medium=pypi\"\nurls.Homepage = \"https://python-pillow.github.io\"\nurls.Mastodon = \"https://fosstodon.org/@pillow\"\nurls.\"Release notes\" = \"https://pillow.readthedocs.io/en/stable/releasenotes/index.html\"\nurls.Source = \"https://github.com/python-pillow/Pillow\"\n\n[tool.setuptools]\npackages = [\n  \"PIL\",\n]\ninclude-package-data = true\npackage-dir = { \"\" = \"src\" }\n\n[tool.setuptools.dynamic]\nversion = { attr = \"PIL.__version__\" }\n\n[tool.cibuildwheel]\nbefore-all = \".github/workflows/wheels-dependencies.sh\"\nbuild-verbosity = 1\n\nconfig-settings = \"raqm=enable raqm=vendor fribidi=vendor imagequant=disable\"\n# Disable platform guessing on macOS\nmacos.config-settings = \"raqm=enable raqm=vendor fribidi=vendor imagequant=disable platform-guessing=disable\"\n\ntest-command = \"cd {project} && .github/workflows/wheels-test.sh\"\ntest-extras = \"tests\"\n\n[tool.cibuildwheel.macos.environment]\nPATH = \"$(pwd)/build/deps/darwin/bin:$(dirname $(which python3)):/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin\"\nDYLD_LIBRARY_PATH = \"$(pwd)/build/deps/darwin/lib\"\n\n[tool.black]\nexclude = \"wheels/multibuild\"\n\n[tool.ruff]\nexclude = [ \"wheels/multibuild\" ]\n\nfix = true\nlint.select = [\n  \"C4\",     # flake8-comprehensions\n  \"E\",      # pycodestyle errors\n  \"EM\",     # flake8-errmsg\n  \"F\",      # pyflakes errors\n  \"I\",      # isort\n  \"ISC\",    # flake8-implicit-str-concat\n  \"LOG\",    # flake8-logging\n  \"PGH\",    # pygrep-hooks\n  \"PT\",     # flake8-pytest-style\n  \"PYI\",    # flake8-pyi\n  \"RUF100\", # unused noqa (yesqa)\n  \"UP\",     # pyupgrade\n  \"W\",      # pycodestyle warnings\n  \"YTT\",    # flake8-2020\n]\nlint.ignore = [\n  \"E203\",   # Whitespace before ':'\n  \"E221\",   # Multiple spaces before operator\n  \"E226\",   # Missing whitespace around arithmetic operator\n  \"E241\",   # Multiple spaces after ','\n  \"PT001\",  # pytest-fixture-incorrect-parentheses-style\n  \"PT007\",  # pytest-parametrize-values-wrong-type\n  \"PT011\",  # pytest-raises-too-broad\n  \"PT012\",  # pytest-raises-with-multiple-statements\n  \"PT017\",  # pytest-assert-in-except\n  \"PYI026\", # flake8-pyi: typing.TypeAlias added in Python 3.10\n  \"PYI034\", # flake8-pyi: typing.Self added in Python 3.11\n]\nlint.per-file-ignores.\"Tests/oss-fuzz/fuzz_font.py\" = [\n  \"I002\",\n]\nlint.per-file-ignores.\"Tests/oss-fuzz/fuzz_pillow.py\" = [\n  \"I002\",\n]\nlint.flake8-pytest-style.parametrize-names-type = \"csv\"\nlint.isort.known-first-party = [\n  \"PIL\",\n]\nlint.isort.required-imports = [\n  \"from __future__ import annotations\",\n]\n\n[tool.pyproject-fmt]\nmax_supported_python = \"3.13\"\n\n[tool.pytest.ini_options]\naddopts = \"-ra --color=yes\"\ntestpaths = [\n  \"Tests\",\n]\n\n[tool.mypy]\npython_version = \"3.9\"\npretty = true\ndisallow_any_generics = true\nenable_error_code = \"ignore-without-code\"\nextra_checks = true\nfollow_imports = \"silent\"\nwarn_redundant_casts = true\nwarn_unreachable = true\nwarn_unused_ignores = true\n"
        },
        {
          "name": "selftest.py",
          "type": "blob",
          "size": 4.6865234375,
          "content": "#!/usr/bin/env python3\n# minimal sanity check\nfrom __future__ import annotations\n\nimport sys\n\nfrom PIL import Image, features\n\ntry:\n    Image.core.ping\nexcept ImportError as v:\n    print(\"***\", v)\n    sys.exit()\nexcept AttributeError:\n    pass\n\n\ndef testimage() -> None:\n    \"\"\"\n    PIL lets you create in-memory images with various pixel types:\n\n    >>> from PIL import Image, ImageDraw, ImageFilter, ImageMath\n    >>> im = Image.new(\"1\", (128, 128)) # monochrome\n    >>> def _info(im): return im.format, im.mode, im.size\n    >>> _info(im)\n    (None, '1', (128, 128))\n    >>> _info(Image.new(\"L\", (128, 128))) # grayscale (luminance)\n    (None, 'L', (128, 128))\n    >>> _info(Image.new(\"P\", (128, 128))) # palette\n    (None, 'P', (128, 128))\n    >>> _info(Image.new(\"RGB\", (128, 128))) # truecolor\n    (None, 'RGB', (128, 128))\n    >>> _info(Image.new(\"I\", (128, 128))) # 32-bit integer\n    (None, 'I', (128, 128))\n    >>> _info(Image.new(\"F\", (128, 128))) # 32-bit floating point\n    (None, 'F', (128, 128))\n\n    Or open existing files:\n\n    >>> with Image.open(\"Tests/images/hopper.gif\") as im:\n    ...     _info(im)\n    ('GIF', 'P', (128, 128))\n    >>> _info(Image.open(\"Tests/images/hopper.ppm\"))\n    ('PPM', 'RGB', (128, 128))\n    >>> try:\n    ...  _info(Image.open(\"Tests/images/hopper.jpg\"))\n    ... except OSError as v:\n    ...  print(v)\n    ('JPEG', 'RGB', (128, 128))\n\n    PIL doesn't actually load the image data until it's needed,\n    or you call the \"load\" method:\n\n    >>> im = Image.open(\"Tests/images/hopper.ppm\")\n    >>> print(im._im) # internal image attribute\n    None\n    >>> a = im.load()\n    >>> type(im.im) # doctest: +ELLIPSIS\n    <... '...ImagingCore'>\n\n    You can apply many different operations on images.  Most\n    operations return a new image:\n\n    >>> im = Image.open(\"Tests/images/hopper.ppm\")\n    >>> _info(im.convert(\"L\"))\n    (None, 'L', (128, 128))\n    >>> _info(im.copy())\n    (None, 'RGB', (128, 128))\n    >>> _info(im.crop((32, 32, 96, 96)))\n    (None, 'RGB', (64, 64))\n    >>> _info(im.filter(ImageFilter.BLUR))\n    (None, 'RGB', (128, 128))\n    >>> im.getbands()\n    ('R', 'G', 'B')\n    >>> im.getbbox()\n    (0, 0, 128, 128)\n    >>> len(im.getdata())\n    16384\n    >>> im.getextrema()\n    ((0, 255), (0, 255), (0, 255))\n    >>> im.getpixel((0, 0))\n    (20, 20, 70)\n    >>> len(im.getprojection())\n    2\n    >>> len(im.histogram())\n    768\n    >>> '%.7f' % im.entropy()\n    '8.8212866'\n    >>> _info(im.point(list(range(256))*3))\n    (None, 'RGB', (128, 128))\n    >>> _info(im.resize((64, 64)))\n    (None, 'RGB', (64, 64))\n    >>> _info(im.rotate(45))\n    (None, 'RGB', (128, 128))\n    >>> [_info(ch) for ch in im.split()]\n    [(None, 'L', (128, 128)), (None, 'L', (128, 128)), (None, 'L', (128, 128))]\n    >>> len(im.convert(\"1\").tobitmap())\n    10456\n    >>> len(im.tobytes())\n    49152\n    >>> _info(im.transform((512, 512), Image.Transform.AFFINE, (1,0,0,0,1,0)))\n    (None, 'RGB', (512, 512))\n    >>> _info(im.transform((512, 512), Image.Transform.EXTENT, (32,32,96,96)))\n    (None, 'RGB', (512, 512))\n\n    The ImageDraw module lets you draw stuff in raster images:\n\n    >>> im = Image.new(\"L\", (128, 128), 64)\n    >>> d = ImageDraw.ImageDraw(im)\n    >>> d.line((0, 0, 128, 128), fill=128)\n    >>> d.line((0, 128, 128, 0), fill=128)\n    >>> im.getextrema()\n    (64, 128)\n\n    In 1.1.4, you can specify colors in a number of ways:\n\n    >>> xy = 0, 0, 128, 128\n    >>> im = Image.new(\"RGB\", (128, 128), 0)\n    >>> d = ImageDraw.ImageDraw(im)\n    >>> d.rectangle(xy, \"#f00\")\n    >>> im.getpixel((0, 0))\n    (255, 0, 0)\n    >>> d.rectangle(xy, \"#ff0000\")\n    >>> im.getpixel((0, 0))\n    (255, 0, 0)\n    >>> d.rectangle(xy, \"rgb(255,0,0)\")\n    >>> im.getpixel((0, 0))\n    (255, 0, 0)\n    >>> d.rectangle(xy, \"rgb(100%,0%,0%)\")\n    >>> im.getpixel((0, 0))\n    (255, 0, 0)\n    >>> d.rectangle(xy, \"hsl(0, 100%, 50%)\")\n    >>> im.getpixel((0, 0))\n    (255, 0, 0)\n    >>> d.rectangle(xy, \"red\")\n    >>> im.getpixel((0, 0))\n    (255, 0, 0)\n\n    In 1.1.6, you can use the ImageMath module to do image\n    calculations.\n\n    >>> im = ImageMath.lambda_eval( \\\n      lambda args: args[\"float\"](args[\"im\"] + 20), im=im.convert(\"L\") \\\n    )\n    >>> im.mode, im.size\n    ('F', (128, 128))\n\n    PIL can do many other things, but I'll leave that for another\n    day.\n\n    Cheers /F\n    \"\"\"\n\n\nif __name__ == \"__main__\":\n    # check build sanity\n\n    exit_status = 0\n\n    features.pilinfo(sys.stdout, False)\n\n    # use doctest to make sure the test program behaves as documented!\n    import doctest\n\n    print(\"Running selftest:\")\n    status = doctest.testmod(sys.modules[__name__])\n    if status[0]:\n        print(f\"*** {status[0]} tests of {status[1]} failed.\")\n        exit_status = 1\n    else:\n        print(f\"--- {status[1]} tests passed.\")\n\n    sys.exit(exit_status)\n"
        },
        {
          "name": "setup.py",
          "type": "blob",
          "size": 37.8779296875,
          "content": "# > pyroma .\n# ------------------------------\n# Checking .\n# Found Pillow\n# ------------------------------\n# Final rating: 10/10\n# Your cheese is so fresh most people think it's a cream: Mascarpone\n# ------------------------------\nfrom __future__ import annotations\n\nimport os\nimport re\nimport shutil\nimport struct\nimport subprocess\nimport sys\nimport warnings\nfrom collections.abc import Iterator\nfrom typing import Any\n\nfrom setuptools import Extension, setup\nfrom setuptools.command.build_ext import build_ext\n\n\ndef get_version() -> str:\n    version_file = \"src/PIL/_version.py\"\n    with open(version_file, encoding=\"utf-8\") as f:\n        return f.read().split('\"')[1]\n\n\nconfiguration: dict[str, list[str]] = {}\n\n\nPILLOW_VERSION = get_version()\nFREETYPE_ROOT = None\nHARFBUZZ_ROOT = None\nFRIBIDI_ROOT = None\nIMAGEQUANT_ROOT = None\nJPEG2K_ROOT = None\nJPEG_ROOT = None\nLCMS_ROOT = None\nRAQM_ROOT = None\nTIFF_ROOT = None\nWEBP_ROOT = None\nZLIB_ROOT = None\nFUZZING_BUILD = \"LIB_FUZZING_ENGINE\" in os.environ\n\nif sys.platform == \"win32\" and sys.version_info >= (3, 14):\n    import atexit\n\n    atexit.register(\n        lambda: warnings.warn(\n            f\"Pillow {PILLOW_VERSION} does not support Python \"\n            f\"{sys.version_info.major}.{sys.version_info.minor} and does not provide \"\n            \"prebuilt Windows binaries. We do not recommend building from source on \"\n            \"Windows.\",\n            RuntimeWarning,\n        )\n    )\n\n\n_IMAGING = (\"decode\", \"encode\", \"map\", \"display\", \"outline\", \"path\")\n\n_LIB_IMAGING = (\n    \"Access\",\n    \"AlphaComposite\",\n    \"Resample\",\n    \"Reduce\",\n    \"Bands\",\n    \"BcnDecode\",\n    \"BitDecode\",\n    \"Blend\",\n    \"Chops\",\n    \"ColorLUT\",\n    \"Convert\",\n    \"ConvertYCbCr\",\n    \"Copy\",\n    \"Crop\",\n    \"Dib\",\n    \"Draw\",\n    \"Effects\",\n    \"EpsEncode\",\n    \"File\",\n    \"Fill\",\n    \"Filter\",\n    \"FliDecode\",\n    \"Geometry\",\n    \"GetBBox\",\n    \"GifDecode\",\n    \"GifEncode\",\n    \"HexDecode\",\n    \"Histo\",\n    \"JpegDecode\",\n    \"JpegEncode\",\n    \"Matrix\",\n    \"ModeFilter\",\n    \"Negative\",\n    \"Offset\",\n    \"Pack\",\n    \"PackDecode\",\n    \"Palette\",\n    \"Paste\",\n    \"Quant\",\n    \"QuantOctree\",\n    \"QuantHash\",\n    \"QuantHeap\",\n    \"PcdDecode\",\n    \"PcxDecode\",\n    \"PcxEncode\",\n    \"Point\",\n    \"RankFilter\",\n    \"RawDecode\",\n    \"RawEncode\",\n    \"Storage\",\n    \"SgiRleDecode\",\n    \"SunRleDecode\",\n    \"TgaRleDecode\",\n    \"TgaRleEncode\",\n    \"Unpack\",\n    \"UnpackYCC\",\n    \"UnsharpMask\",\n    \"XbmDecode\",\n    \"XbmEncode\",\n    \"ZipDecode\",\n    \"ZipEncode\",\n    \"TiffDecode\",\n    \"Jpeg2KDecode\",\n    \"Jpeg2KEncode\",\n    \"BoxBlur\",\n    \"QuantPngQuant\",\n    \"codec_fd\",\n)\n\nDEBUG = False\n\n\nclass DependencyException(Exception):\n    pass\n\n\nclass RequiredDependencyException(Exception):\n    pass\n\n\nPLATFORM_MINGW = os.name == \"nt\" and \"GCC\" in sys.version\n\n\ndef _dbg(s: str, tp: Any = None) -> None:\n    if DEBUG:\n        if tp:\n            print(s % tp)\n            return\n        print(s)\n\n\ndef _find_library_dirs_ldconfig() -> list[str]:\n    # Based on ctypes.util from Python 2\n\n    ldconfig = \"ldconfig\" if shutil.which(\"ldconfig\") else \"/sbin/ldconfig\"\n    args: list[str]\n    env: dict[str, str]\n    expr: str\n    if sys.platform.startswith(\"linux\") or sys.platform.startswith(\"gnu\"):\n        if struct.calcsize(\"l\") == 4:\n            machine = os.uname()[4] + \"-32\"\n        else:\n            machine = os.uname()[4] + \"-64\"\n        mach_map = {\n            \"x86_64-64\": \"libc6,x86-64\",\n            \"ppc64-64\": \"libc6,64bit\",\n            \"sparc64-64\": \"libc6,64bit\",\n            \"s390x-64\": \"libc6,64bit\",\n            \"ia64-64\": \"libc6,IA-64\",\n        }\n        abi_type = mach_map.get(machine, \"libc6\")\n\n        # Assuming GLIBC's ldconfig (with option -p)\n        # Alpine Linux uses musl that can't print cache\n        args = [ldconfig, \"-p\"]\n        expr = rf\".*\\({abi_type}.*\\) => (.*)\"\n        env = dict(os.environ)\n        env[\"LC_ALL\"] = \"C\"\n        env[\"LANG\"] = \"C\"\n\n    elif sys.platform.startswith(\"freebsd\"):\n        args = [ldconfig, \"-r\"]\n        expr = r\".* => (.*)\"\n        env = {}\n\n    try:\n        p = subprocess.Popen(\n            args, stderr=subprocess.DEVNULL, stdout=subprocess.PIPE, env=env, text=True\n        )\n    except OSError:  # E.g. command not found\n        return []\n    data = p.communicate()[0]\n\n    dirs = []\n    for dll in re.findall(expr, data):\n        dir = os.path.dirname(dll)\n        if dir not in dirs:\n            dirs.append(dir)\n    return dirs\n\n\ndef _add_directory(\n    path: list[str], subdir: str | None, where: int | None = None\n) -> None:\n    if subdir is None:\n        return\n    subdir = os.path.realpath(subdir)\n    if os.path.isdir(subdir) and subdir not in path:\n        if where is None:\n            _dbg(\"Appending path %s\", subdir)\n            path.append(subdir)\n        else:\n            _dbg(\"Inserting path %s\", subdir)\n            path.insert(where, subdir)\n    elif subdir in path and where is not None:\n        path.remove(subdir)\n        path.insert(where, subdir)\n\n\ndef _find_include_file(self: pil_build_ext, include: str) -> int:\n    for directory in self.compiler.include_dirs:\n        _dbg(\"Checking for include file %s in %s\", (include, directory))\n        if os.path.isfile(os.path.join(directory, include)):\n            _dbg(\"Found %s\", include)\n            return 1\n    return 0\n\n\ndef _find_library_file(self: pil_build_ext, library: str) -> str | None:\n    ret = self.compiler.find_library_file(self.compiler.library_dirs, library)\n    if ret:\n        _dbg(\"Found library %s at %s\", (library, ret))\n    else:\n        _dbg(\"Couldn't find library %s in %s\", (library, self.compiler.library_dirs))\n    return ret\n\n\ndef _find_include_dir(self: pil_build_ext, dirname: str, include: str) -> bool | str:\n    for directory in self.compiler.include_dirs:\n        _dbg(\"Checking for include file %s in %s\", (include, directory))\n        if os.path.isfile(os.path.join(directory, include)):\n            _dbg(\"Found %s in %s\", (include, directory))\n            return True\n        subdir = os.path.join(directory, dirname)\n        _dbg(\"Checking for include file %s in %s\", (include, subdir))\n        if os.path.isfile(os.path.join(subdir, include)):\n            _dbg(\"Found %s in %s\", (include, subdir))\n            return subdir\n    return False\n\n\ndef _cmd_exists(cmd: str) -> bool:\n    if \"PATH\" not in os.environ:\n        return False\n    return any(\n        os.access(os.path.join(path, cmd), os.X_OK)\n        for path in os.environ[\"PATH\"].split(os.pathsep)\n    )\n\n\ndef _pkg_config(name: str) -> tuple[list[str], list[str]] | None:\n    command = os.environ.get(\"PKG_CONFIG\", \"pkg-config\")\n    for keep_system in (True, False):\n        try:\n            command_libs = [command, \"--libs-only-L\", name]\n            command_cflags = [command, \"--cflags-only-I\", name]\n            stderr = None\n            if keep_system:\n                command_libs.append(\"--keep-system-libs\")\n                command_cflags.append(\"--keep-system-cflags\")\n                stderr = subprocess.DEVNULL\n            if not DEBUG:\n                command_libs.append(\"--silence-errors\")\n                command_cflags.append(\"--silence-errors\")\n            libs = re.split(\n                r\"(^|\\s+)-L\",\n                subprocess.check_output(command_libs, stderr=stderr)\n                .decode(\"utf8\")\n                .strip(),\n            )[::2][1:]\n            cflags = re.split(\n                r\"(^|\\s+)-I\",\n                subprocess.check_output(command_cflags).decode(\"utf8\").strip(),\n            )[::2][1:]\n            return libs, cflags\n        except Exception:\n            pass\n    return None\n\n\nclass pil_build_ext(build_ext):\n    class ext_feature:\n        features = [\n            \"zlib\",\n            \"jpeg\",\n            \"tiff\",\n            \"freetype\",\n            \"raqm\",\n            \"lcms\",\n            \"webp\",\n            \"jpeg2000\",\n            \"imagequant\",\n            \"xcb\",\n        ]\n\n        required = {\"jpeg\", \"zlib\"}\n        vendor: set[str] = set()\n\n        def __init__(self) -> None:\n            self._settings: dict[str, str | bool | None] = {}\n            for f in self.features:\n                self.set(f, None)\n\n        def require(self, feat: str) -> bool:\n            return feat in self.required\n\n        def get(self, feat: str) -> str | bool | None:\n            return self._settings[feat]\n\n        def set(self, feat: str, value: str | bool | None) -> None:\n            self._settings[feat] = value\n\n        def want(self, feat: str) -> bool:\n            return self._settings[feat] is None\n\n        def want_vendor(self, feat: str) -> bool:\n            return feat in self.vendor\n\n        def __iter__(self) -> Iterator[str]:\n            yield from self.features\n\n    feature = ext_feature()\n\n    user_options = (\n        build_ext.user_options\n        + [(f\"disable-{x}\", None, f\"Disable support for {x}\") for x in feature]\n        + [(f\"enable-{x}\", None, f\"Enable support for {x}\") for x in feature]\n        + [\n            (f\"vendor-{x}\", None, f\"Use vendored version of {x}\")\n            for x in (\"raqm\", \"fribidi\")\n        ]\n        + [\n            (\"disable-platform-guessing\", None, \"Disable platform guessing\"),\n            (\"debug\", None, \"Debug logging\"),\n        ]\n        + [(\"add-imaging-libs=\", None, \"Add libs to _imaging build\")]\n    )\n\n    @staticmethod\n    def check_configuration(option: str, value: str) -> bool | None:\n        return True if value in configuration.get(option, []) else None\n\n    def initialize_options(self) -> None:\n        self.disable_platform_guessing = self.check_configuration(\n            \"platform-guessing\", \"disable\"\n        )\n        self.add_imaging_libs = \"\"\n        build_ext.initialize_options(self)\n        for x in self.feature:\n            setattr(self, f\"disable_{x}\", self.check_configuration(x, \"disable\"))\n            setattr(self, f\"enable_{x}\", self.check_configuration(x, \"enable\"))\n        for x in (\"raqm\", \"fribidi\"):\n            setattr(self, f\"vendor_{x}\", self.check_configuration(x, \"vendor\"))\n        if self.check_configuration(\"debug\", \"true\"):\n            self.debug = True\n        self.parallel = configuration.get(\"parallel\", [None])[-1]\n\n    def finalize_options(self) -> None:\n        build_ext.finalize_options(self)\n        if self.debug:\n            global DEBUG\n            DEBUG = True\n        if not self.parallel:\n            # If --parallel (or -j) wasn't specified, we want to reproduce the same\n            # behavior as before, that is, auto-detect the number of jobs.\n            self.parallel = None\n\n            cpu_count = os.cpu_count()\n            if cpu_count is not None:\n                try:\n                    self.parallel = int(\n                        os.environ.get(\"MAX_CONCURRENCY\", min(4, cpu_count))\n                    )\n                except TypeError:\n                    pass\n        for x in self.feature:\n            if getattr(self, f\"disable_{x}\"):\n                self.feature.set(x, False)\n                self.feature.required.discard(x)\n                _dbg(\"Disabling %s\", x)\n                if getattr(self, f\"enable_{x}\"):\n                    msg = f\"Conflicting options: '-C {x}=enable' and '-C {x}=disable'\"\n                    raise ValueError(msg)\n                if x == \"freetype\":\n                    _dbg(\"'-C freetype=disable' implies '-C raqm=disable'\")\n                    if getattr(self, \"enable_raqm\"):\n                        msg = (\n                            \"Conflicting options: \"\n                            \"'-C raqm=enable' and '-C freetype=disable'\"\n                        )\n                        raise ValueError(msg)\n                    setattr(self, \"disable_raqm\", True)\n            if getattr(self, f\"enable_{x}\"):\n                _dbg(\"Requiring %s\", x)\n                self.feature.required.add(x)\n                if x == \"raqm\":\n                    _dbg(\"'-C raqm=enable' implies '-C freetype=enable'\")\n                    self.feature.required.add(\"freetype\")\n        for x in (\"raqm\", \"fribidi\"):\n            if getattr(self, f\"vendor_{x}\"):\n                if getattr(self, \"disable_raqm\"):\n                    msg = f\"Conflicting options: '-C {x}=vendor' and '-C raqm=disable'\"\n                    raise ValueError(msg)\n                if x == \"fribidi\" and not getattr(self, \"vendor_raqm\"):\n                    msg = (\n                        f\"Conflicting options: '-C {x}=vendor' and not '-C raqm=vendor'\"\n                    )\n                    raise ValueError(msg)\n                _dbg(\"Using vendored version of %s\", x)\n                self.feature.vendor.add(x)\n\n    def _update_extension(\n        self,\n        name: str,\n        libraries: list[str] | list[str | bool | None],\n        define_macros: list[tuple[str, str | None]] | None = None,\n        sources: list[str] | None = None,\n    ) -> None:\n        for extension in self.extensions:\n            if extension.name == name:\n                extension.libraries += libraries\n                if define_macros is not None:\n                    extension.define_macros += define_macros\n                if sources is not None:\n                    extension.sources += sources\n                if FUZZING_BUILD:\n                    extension.language = \"c++\"\n                    extension.extra_link_args = [\"--stdlib=libc++\"]\n                break\n\n    def _remove_extension(self, name: str) -> None:\n        for extension in self.extensions:\n            if extension.name == name:\n                self.extensions.remove(extension)\n                break\n\n    def get_macos_sdk_path(self) -> str | None:\n        try:\n            sdk_path = (\n                subprocess.check_output([\"xcrun\", \"--show-sdk-path\", \"--sdk\", \"macosx\"])\n                .strip()\n                .decode(\"latin1\")\n            )\n        except Exception:\n            sdk_path = None\n        if (\n            not sdk_path\n            or sdk_path == \"/Applications/Xcode.app/Contents/Developer\"\n            \"/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk\"\n        ):\n            commandlinetools_sdk_path = (\n                \"/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\"\n            )\n            if os.path.exists(commandlinetools_sdk_path):\n                sdk_path = commandlinetools_sdk_path\n        return sdk_path\n\n    def build_extensions(self) -> None:\n        library_dirs: list[str] = []\n        include_dirs: list[str] = []\n\n        pkg_config = None\n        if _cmd_exists(os.environ.get(\"PKG_CONFIG\", \"pkg-config\")):\n            pkg_config = _pkg_config\n\n        #\n        # add configured kits\n        for root_name, lib_name in {\n            \"JPEG_ROOT\": \"libjpeg\",\n            \"JPEG2K_ROOT\": \"libopenjp2\",\n            \"TIFF_ROOT\": (\"libtiff-5\", \"libtiff-4\"),\n            \"ZLIB_ROOT\": \"zlib\",\n            \"FREETYPE_ROOT\": \"freetype2\",\n            \"HARFBUZZ_ROOT\": \"harfbuzz\",\n            \"FRIBIDI_ROOT\": \"fribidi\",\n            \"RAQM_ROOT\": \"raqm\",\n            \"WEBP_ROOT\": \"libwebp\",\n            \"LCMS_ROOT\": \"lcms2\",\n            \"IMAGEQUANT_ROOT\": \"libimagequant\",\n        }.items():\n            root = globals()[root_name]\n\n            if root is None and root_name in os.environ:\n                root_prefix = os.environ[root_name]\n                root = (\n                    os.path.join(root_prefix, \"lib\"),\n                    os.path.join(root_prefix, \"include\"),\n                )\n\n            if root is None and pkg_config:\n                if isinstance(lib_name, str):\n                    _dbg(f\"Looking for `{lib_name}` using pkg-config.\")\n                    root = pkg_config(lib_name)\n                else:\n                    for lib_name2 in lib_name:\n                        _dbg(f\"Looking for `{lib_name2}` using pkg-config.\")\n                        root = pkg_config(lib_name2)\n                        if root:\n                            break\n\n            if isinstance(root, tuple):\n                lib_root, include_root = root\n            else:\n                lib_root = include_root = root\n\n            if lib_root is not None:\n                if not isinstance(lib_root, (tuple, list)):\n                    lib_root = (lib_root,)\n                for lib_dir in lib_root:\n                    _add_directory(library_dirs, lib_dir)\n            if include_root is not None:\n                if not isinstance(include_root, (tuple, list)):\n                    include_root = (include_root,)\n                for include_dir in include_root:\n                    _add_directory(include_dirs, include_dir)\n\n        # respect CFLAGS/CPPFLAGS/LDFLAGS\n        for k in (\"CFLAGS\", \"CPPFLAGS\", \"LDFLAGS\"):\n            if k in os.environ:\n                for match in re.finditer(r\"-I([^\\s]+)\", os.environ[k]):\n                    _add_directory(include_dirs, match.group(1))\n                for match in re.finditer(r\"-L([^\\s]+)\", os.environ[k]):\n                    _add_directory(library_dirs, match.group(1))\n\n        # include, rpath, if set as environment variables:\n        for k in (\"C_INCLUDE_PATH\", \"CPATH\", \"INCLUDE\"):\n            if k in os.environ:\n                for d in os.environ[k].split(os.path.pathsep):\n                    _add_directory(include_dirs, d)\n\n        for k in (\"LD_RUN_PATH\", \"LIBRARY_PATH\", \"LIB\"):\n            if k in os.environ:\n                for d in os.environ[k].split(os.path.pathsep):\n                    _add_directory(library_dirs, d)\n\n        _add_directory(library_dirs, os.path.join(sys.prefix, \"lib\"))\n        _add_directory(include_dirs, os.path.join(sys.prefix, \"include\"))\n\n        #\n        # add platform directories\n\n        if self.disable_platform_guessing:\n            pass\n\n        elif sys.platform == \"cygwin\":\n            # pythonX.Y.dll.a is in the /usr/lib/pythonX.Y/config directory\n            self.compiler.shared_lib_extension = \".dll.a\"\n            _add_directory(\n                library_dirs,\n                os.path.join(\n                    \"/usr/lib\", \"python{}.{}\".format(*sys.version_info), \"config\"\n                ),\n            )\n\n        elif sys.platform == \"darwin\":\n            # attempt to make sure we pick freetype2 over other versions\n            _add_directory(include_dirs, \"/sw/include/freetype2\")\n            _add_directory(include_dirs, \"/sw/lib/freetype2/include\")\n            # fink installation directories\n            _add_directory(library_dirs, \"/sw/lib\")\n            _add_directory(include_dirs, \"/sw/include\")\n            # darwin ports installation directories\n            _add_directory(library_dirs, \"/opt/local/lib\")\n            _add_directory(include_dirs, \"/opt/local/include\")\n\n            # if Homebrew is installed, use its lib and include directories\n            try:\n                prefix = (\n                    subprocess.check_output([\"brew\", \"--prefix\"])\n                    .strip()\n                    .decode(\"latin1\")\n                )\n            except Exception:\n                # Homebrew not installed\n                prefix = None\n\n            ft_prefix = None\n\n            if prefix:\n                # add Homebrew's include and lib directories\n                _add_directory(library_dirs, os.path.join(prefix, \"lib\"))\n                _add_directory(include_dirs, os.path.join(prefix, \"include\"))\n                _add_directory(\n                    include_dirs, os.path.join(prefix, \"opt\", \"zlib\", \"include\")\n                )\n                ft_prefix = os.path.join(prefix, \"opt\", \"freetype\")\n\n            if ft_prefix and os.path.isdir(ft_prefix):\n                # freetype might not be linked into Homebrew's prefix\n                _add_directory(library_dirs, os.path.join(ft_prefix, \"lib\"))\n                _add_directory(include_dirs, os.path.join(ft_prefix, \"include\"))\n            else:\n                # fall back to freetype from XQuartz if\n                # Homebrew's freetype is missing\n                _add_directory(library_dirs, \"/usr/X11/lib\")\n                _add_directory(include_dirs, \"/usr/X11/include\")\n\n            # Add the macOS SDK path.\n            sdk_path = self.get_macos_sdk_path()\n            if sdk_path:\n                _add_directory(library_dirs, os.path.join(sdk_path, \"usr\", \"lib\"))\n                _add_directory(include_dirs, os.path.join(sdk_path, \"usr\", \"include\"))\n\n                for extension in self.extensions:\n                    extension.extra_compile_args = [\"-Wno-nullability-completeness\"]\n        elif (\n            sys.platform.startswith(\"linux\")\n            or sys.platform.startswith(\"gnu\")\n            or sys.platform.startswith(\"freebsd\")\n        ):\n            for dirname in _find_library_dirs_ldconfig():\n                _add_directory(library_dirs, dirname)\n            if sys.platform.startswith(\"linux\") and os.environ.get(\"ANDROID_ROOT\"):\n                # termux support for android.\n                # system libraries (zlib) are installed in /system/lib\n                # headers are at $PREFIX/include\n                # user libs are at $PREFIX/lib\n                _add_directory(\n                    library_dirs,\n                    os.path.join(\n                        os.environ[\"ANDROID_ROOT\"],\n                        \"lib\" if struct.calcsize(\"l\") == 4 else \"lib64\",\n                    ),\n                )\n\n        elif sys.platform.startswith(\"netbsd\"):\n            _add_directory(library_dirs, \"/usr/pkg/lib\")\n            _add_directory(include_dirs, \"/usr/pkg/include\")\n\n        elif sys.platform.startswith(\"sunos5\"):\n            _add_directory(library_dirs, \"/opt/local/lib\")\n            _add_directory(include_dirs, \"/opt/local/include\")\n\n        # FIXME: check /opt/stuff directories here?\n\n        # standard locations\n        if not self.disable_platform_guessing:\n            _add_directory(library_dirs, \"/usr/local/lib\")\n            _add_directory(include_dirs, \"/usr/local/include\")\n\n            _add_directory(library_dirs, \"/usr/lib\")\n            _add_directory(include_dirs, \"/usr/include\")\n            # alpine, at least\n            _add_directory(library_dirs, \"/lib\")\n\n        if sys.platform == \"win32\":\n            # on Windows, look for the OpenJPEG libraries in the location that\n            # the official installer puts them\n            program_files = os.environ.get(\"ProgramFiles\", \"\")\n            best_version = (0, 0)\n            best_path = None\n            for name in os.listdir(program_files):\n                if name.startswith(\"OpenJPEG \"):\n                    version = tuple(int(x) for x in name[9:].strip().split(\".\"))\n                    if version > best_version:\n                        best_version = version\n                        best_path = os.path.join(program_files, name)\n\n            if best_path:\n                _dbg(\"Adding %s to search list\", best_path)\n                _add_directory(library_dirs, os.path.join(best_path, \"lib\"))\n                _add_directory(include_dirs, os.path.join(best_path, \"include\"))\n\n        #\n        # insert new dirs *before* default libs, to avoid conflicts\n        # between Python PYD stub libs and real libraries\n\n        self.compiler.library_dirs = library_dirs + self.compiler.library_dirs\n        self.compiler.include_dirs = include_dirs + self.compiler.include_dirs\n\n        #\n        # look for available libraries\n\n        feature = self.feature\n\n        if feature.want(\"zlib\"):\n            _dbg(\"Looking for zlib\")\n            if _find_include_file(self, \"zlib.h\"):\n                if _find_library_file(self, \"z\"):\n                    feature.set(\"zlib\", \"z\")\n                elif sys.platform == \"win32\" and _find_library_file(self, \"zlib\"):\n                    feature.set(\"zlib\", \"zlib\")  # alternative name\n                elif sys.platform == \"win32\" and _find_library_file(self, \"zdll\"):\n                    feature.set(\"zlib\", \"zdll\")  # dll import library\n\n        if feature.want(\"jpeg\"):\n            _dbg(\"Looking for jpeg\")\n            if _find_include_file(self, \"jpeglib.h\"):\n                if _find_library_file(self, \"jpeg\"):\n                    feature.set(\"jpeg\", \"jpeg\")\n                elif sys.platform == \"win32\" and _find_library_file(self, \"libjpeg\"):\n                    feature.set(\"jpeg\", \"libjpeg\")  # alternative name\n\n        feature.set(\"openjpeg_version\", None)\n        if feature.want(\"jpeg2000\"):\n            _dbg(\"Looking for jpeg2000\")\n            best_version: tuple[int, ...] | None = None\n            best_path = None\n\n            # Find the best version\n            for directory in self.compiler.include_dirs:\n                _dbg(\"Checking for openjpeg-#.# in %s\", directory)\n                try:\n                    listdir = os.listdir(directory)\n                except Exception:\n                    # OSError, FileNotFoundError\n                    continue\n                for name in listdir:\n                    if name.startswith(\"openjpeg-\") and os.path.isfile(\n                        os.path.join(directory, name, \"openjpeg.h\")\n                    ):\n                        _dbg(\"Found openjpeg.h in %s/%s\", (directory, name))\n                        version = tuple(int(x) for x in name[9:].split(\".\"))\n                        if best_version is None or version > best_version:\n                            best_version = version\n                            best_path = os.path.join(directory, name)\n                            _dbg(\n                                \"Best openjpeg version %s so far in %s\",\n                                (best_version, best_path),\n                            )\n\n            if best_version and _find_library_file(self, \"openjp2\"):\n                # Add the directory to the include path so we can include\n                # <openjpeg.h> rather than having to cope with the versioned\n                # include path\n                _add_directory(self.compiler.include_dirs, best_path, 0)\n                feature.set(\"jpeg2000\", \"openjp2\")\n                feature.set(\"openjpeg_version\", \".\".join(str(x) for x in best_version))\n\n        if feature.want(\"imagequant\"):\n            _dbg(\"Looking for imagequant\")\n            if _find_include_file(self, \"libimagequant.h\"):\n                if _find_library_file(self, \"imagequant\"):\n                    feature.set(\"imagequant\", \"imagequant\")\n                elif _find_library_file(self, \"libimagequant\"):\n                    feature.set(\"imagequant\", \"libimagequant\")\n\n        if feature.want(\"tiff\"):\n            _dbg(\"Looking for tiff\")\n            if _find_include_file(self, \"tiff.h\"):\n                if _find_library_file(self, \"tiff\"):\n                    feature.set(\"tiff\", \"tiff\")\n                if sys.platform in [\"win32\", \"darwin\"] and _find_library_file(\n                    self, \"libtiff\"\n                ):\n                    feature.set(\"tiff\", \"libtiff\")\n\n        if feature.want(\"freetype\"):\n            _dbg(\"Looking for freetype\")\n            if _find_library_file(self, \"freetype\"):\n                # look for freetype2 include files\n                freetype_version = 0\n                for subdir in self.compiler.include_dirs:\n                    _dbg(\"Checking for include file %s in %s\", (\"ft2build.h\", subdir))\n                    if os.path.isfile(os.path.join(subdir, \"ft2build.h\")):\n                        _dbg(\"Found %s in %s\", (\"ft2build.h\", subdir))\n                        freetype_version = 21\n                        subdir = os.path.join(subdir, \"freetype2\")\n                        break\n                    subdir = os.path.join(subdir, \"freetype2\")\n                    _dbg(\"Checking for include file %s in %s\", (\"ft2build.h\", subdir))\n                    if os.path.isfile(os.path.join(subdir, \"ft2build.h\")):\n                        _dbg(\"Found %s in %s\", (\"ft2build.h\", subdir))\n                        freetype_version = 21\n                        break\n                if freetype_version:\n                    feature.set(\"freetype\", \"freetype\")\n                    if subdir:\n                        _add_directory(self.compiler.include_dirs, subdir, 0)\n\n        if feature.get(\"freetype\") and feature.want(\"raqm\"):\n            if not feature.want_vendor(\"raqm\"):  # want system Raqm\n                _dbg(\"Looking for Raqm\")\n                if _find_include_file(self, \"raqm.h\"):\n                    if _find_library_file(self, \"raqm\"):\n                        feature.set(\"raqm\", \"raqm\")\n                    elif _find_library_file(self, \"libraqm\"):\n                        feature.set(\"raqm\", \"libraqm\")\n            else:  # want to build Raqm from src/thirdparty\n                _dbg(\"Looking for HarfBuzz\")\n                feature.set(\"harfbuzz\", None)\n                hb_dir = _find_include_dir(self, \"harfbuzz\", \"hb.h\")\n                if hb_dir:\n                    if isinstance(hb_dir, str):\n                        _add_directory(self.compiler.include_dirs, hb_dir, 0)\n                    if _find_library_file(self, \"harfbuzz\"):\n                        feature.set(\"harfbuzz\", \"harfbuzz\")\n                if feature.get(\"harfbuzz\"):\n                    if not feature.want_vendor(\"fribidi\"):  # want system FriBiDi\n                        _dbg(\"Looking for FriBiDi\")\n                        feature.set(\"fribidi\", None)\n                        fribidi_dir = _find_include_dir(self, \"fribidi\", \"fribidi.h\")\n                        if fribidi_dir:\n                            if isinstance(fribidi_dir, str):\n                                _add_directory(\n                                    self.compiler.include_dirs, fribidi_dir, 0\n                                )\n                            if _find_library_file(self, \"fribidi\"):\n                                feature.set(\"fribidi\", \"fribidi\")\n                                feature.set(\"raqm\", True)\n                    else:  # want to build FriBiDi shim from src/thirdparty\n                        feature.set(\"raqm\", True)\n\n        if feature.want(\"lcms\"):\n            _dbg(\"Looking for lcms\")\n            if _find_include_file(self, \"lcms2.h\"):\n                if _find_library_file(self, \"lcms2\"):\n                    feature.set(\"lcms\", \"lcms2\")\n                elif _find_library_file(self, \"lcms2_static\"):\n                    # alternate Windows name.\n                    feature.set(\"lcms\", \"lcms2_static\")\n\n        if feature.want(\"webp\"):\n            _dbg(\"Looking for webp\")\n            if all(\n                _find_include_file(self, \"webp/\" + include)\n                for include in (\"encode.h\", \"decode.h\", \"mux.h\", \"demux.h\")\n            ):\n                # In Google's precompiled zip it is called \"libwebp\"\n                for prefix in (\"\", \"lib\"):\n                    if all(\n                        _find_library_file(self, prefix + library)\n                        for library in (\"webp\", \"webpmux\", \"webpdemux\")\n                    ):\n                        feature.set(\"webp\", prefix + \"webp\")\n                        break\n\n        if feature.want(\"xcb\"):\n            _dbg(\"Looking for xcb\")\n            if _find_include_file(self, \"xcb/xcb.h\"):\n                if _find_library_file(self, \"xcb\"):\n                    feature.set(\"xcb\", \"xcb\")\n\n        for f in feature:\n            if not feature.get(f) and feature.require(f):\n                if f in (\"jpeg\", \"zlib\"):\n                    raise RequiredDependencyException(f)\n                raise DependencyException(f)\n\n        #\n        # core library\n\n        libs: list[str | bool | None] = []\n        libs.extend(self.add_imaging_libs.split())\n        defs: list[tuple[str, str | None]] = []\n        if feature.get(\"tiff\"):\n            libs.append(feature.get(\"tiff\"))\n            defs.append((\"HAVE_LIBTIFF\", None))\n            if sys.platform == \"win32\":\n                # This define needs to be defined if-and-only-if it was defined\n                # when compiling LibTIFF. LibTIFF doesn't expose it in `tiffconf.h`,\n                # so we have to guess; by default it is defined in all Windows builds.\n                # See #4237, #5243, #5359 for more information.\n                defs.append((\"USE_WIN32_FILEIO\", None))\n        if feature.get(\"jpeg\"):\n            libs.append(feature.get(\"jpeg\"))\n            defs.append((\"HAVE_LIBJPEG\", None))\n        if feature.get(\"jpeg2000\"):\n            libs.append(feature.get(\"jpeg2000\"))\n            defs.append((\"HAVE_OPENJPEG\", None))\n            if sys.platform == \"win32\" and not PLATFORM_MINGW:\n                defs.append((\"OPJ_STATIC\", None))\n        if feature.get(\"zlib\"):\n            libs.append(feature.get(\"zlib\"))\n            defs.append((\"HAVE_LIBZ\", None))\n        if feature.get(\"imagequant\"):\n            libs.append(feature.get(\"imagequant\"))\n            defs.append((\"HAVE_LIBIMAGEQUANT\", None))\n        if feature.get(\"xcb\"):\n            libs.append(feature.get(\"xcb\"))\n            defs.append((\"HAVE_XCB\", None))\n        if sys.platform == \"win32\":\n            libs.extend([\"kernel32\", \"user32\", \"gdi32\"])\n        if struct.unpack(\"h\", b\"\\0\\1\")[0] == 1:\n            defs.append((\"WORDS_BIGENDIAN\", None))\n\n        defs.append((\"PILLOW_VERSION\", f'\"{PILLOW_VERSION}\"'))\n\n        self._update_extension(\"PIL._imaging\", libs, defs)\n\n        #\n        # additional libraries\n\n        if feature.get(\"freetype\"):\n            srcs = []\n            libs = [\"freetype\"]\n            defs = []\n            if feature.get(\"raqm\"):\n                if not feature.want_vendor(\"raqm\"):  # using system Raqm\n                    defs.append((\"HAVE_RAQM\", None))\n                    defs.append((\"HAVE_RAQM_SYSTEM\", None))\n                    libs.append(feature.get(\"raqm\"))\n                else:  # building Raqm from src/thirdparty\n                    defs.append((\"HAVE_RAQM\", None))\n                    srcs.append(\"src/thirdparty/raqm/raqm.c\")\n                    libs.append(feature.get(\"harfbuzz\"))\n                    if not feature.want_vendor(\"fribidi\"):  # using system FriBiDi\n                        defs.append((\"HAVE_FRIBIDI_SYSTEM\", None))\n                        libs.append(feature.get(\"fribidi\"))\n                    else:  # building FriBiDi shim from src/thirdparty\n                        srcs.append(\"src/thirdparty/fribidi-shim/fribidi.c\")\n            self._update_extension(\"PIL._imagingft\", libs, defs, srcs)\n\n        else:\n            self._remove_extension(\"PIL._imagingft\")\n\n        if feature.get(\"lcms\"):\n            libs = [feature.get(\"lcms\")]\n            if sys.platform == \"win32\":\n                libs.extend([\"user32\", \"gdi32\"])\n            self._update_extension(\"PIL._imagingcms\", libs)\n        else:\n            self._remove_extension(\"PIL._imagingcms\")\n\n        webp = feature.get(\"webp\")\n        if isinstance(webp, str):\n            libs = [webp, webp + \"mux\", webp + \"demux\"]\n            self._update_extension(\"PIL._webp\", libs)\n        else:\n            self._remove_extension(\"PIL._webp\")\n\n        tk_libs = [\"psapi\"] if sys.platform in (\"win32\", \"cygwin\") else []\n        self._update_extension(\"PIL._imagingtk\", tk_libs)\n\n        build_ext.build_extensions(self)\n\n        #\n        # sanity checks\n\n        self.summary_report(feature)\n\n    def summary_report(self, feature: ext_feature) -> None:\n        print(\"-\" * 68)\n        print(\"PIL SETUP SUMMARY\")\n        print(\"-\" * 68)\n        print(f\"version      Pillow {PILLOW_VERSION}\")\n        version = sys.version.split(\"[\")\n        print(f\"platform     {sys.platform} {version[0].strip()}\")\n        for v in version[1:]:\n            print(f\"             [{v.strip()}\")\n        print(\"-\" * 68)\n\n        raqm_extra_info = \"\"\n        if feature.want_vendor(\"raqm\"):\n            raqm_extra_info += \"bundled\"\n            if feature.want_vendor(\"fribidi\"):\n                raqm_extra_info += \", FriBiDi shim\"\n\n        options = [\n            (feature.get(\"jpeg\"), \"JPEG\"),\n            (\n                feature.get(\"jpeg2000\"),\n                \"OPENJPEG (JPEG2000)\",\n                feature.get(\"openjpeg_version\"),\n            ),\n            (feature.get(\"zlib\"), \"ZLIB (PNG/ZIP)\"),\n            (feature.get(\"imagequant\"), \"LIBIMAGEQUANT\"),\n            (feature.get(\"tiff\"), \"LIBTIFF\"),\n            (feature.get(\"freetype\"), \"FREETYPE2\"),\n            (feature.get(\"raqm\"), \"RAQM (Text shaping)\", raqm_extra_info),\n            (feature.get(\"lcms\"), \"LITTLECMS2\"),\n            (feature.get(\"webp\"), \"WEBP\"),\n            (feature.get(\"xcb\"), \"XCB (X protocol)\"),\n        ]\n\n        all = 1\n        for option in options:\n            if option[0]:\n                extra_info = \"\"\n                if len(option) >= 3 and option[2]:\n                    extra_info = f\" ({option[2]})\"\n                print(f\"--- {option[1]} support available{extra_info}\")\n            else:\n                print(f\"*** {option[1]} support not available\")\n                all = 0\n\n        print(\"-\" * 68)\n\n        if not all:\n            print(\"To add a missing option, make sure you have the required\")\n            print(\"library and headers.\")\n            print(\n                \"See https://pillow.readthedocs.io/en/latest/installation.\"\n                \"html#building-from-source\"\n            )\n            print(\"\")\n\n        print(\"To check the build, run the selftest.py script.\")\n        print(\"\")\n\n\ndef debug_build() -> bool:\n    return hasattr(sys, \"gettotalrefcount\") or FUZZING_BUILD\n\n\nfiles: list[str | os.PathLike[str]] = [\"src/_imaging.c\"]\nfor src_file in _IMAGING:\n    files.append(\"src/\" + src_file + \".c\")\nfor src_file in _LIB_IMAGING:\n    files.append(os.path.join(\"src/libImaging\", src_file + \".c\"))\next_modules = [\n    Extension(\"PIL._imaging\", files),\n    Extension(\"PIL._imagingft\", [\"src/_imagingft.c\"]),\n    Extension(\"PIL._imagingcms\", [\"src/_imagingcms.c\"]),\n    Extension(\"PIL._webp\", [\"src/_webp.c\"]),\n    Extension(\"PIL._imagingtk\", [\"src/_imagingtk.c\", \"src/Tk/tkImaging.c\"]),\n    Extension(\"PIL._imagingmath\", [\"src/_imagingmath.c\"]),\n    Extension(\"PIL._imagingmorph\", [\"src/_imagingmorph.c\"]),\n]\n\n\n# parse configuration from _custom_build/backend.py\nwhile sys.argv[-1].startswith(\"--pillow-configuration=\"):\n    _, key, value = sys.argv.pop().split(\"=\", 2)\n    configuration.setdefault(key, []).append(value)\n\ntry:\n    setup(\n        cmdclass={\"build_ext\": pil_build_ext},\n        ext_modules=ext_modules,\n        zip_safe=not (debug_build() or PLATFORM_MINGW),\n    )\nexcept RequiredDependencyException as err:\n    msg = f\"\"\"\n\nThe headers or library files could not be found for {str(err)},\na required dependency when compiling Pillow from source.\n\nPlease see the install instructions at:\n   https://pillow.readthedocs.io/en/latest/installation/basic-installation.html\n\n\"\"\"\n    sys.stderr.write(msg)\n    raise RequiredDependencyException(msg)\nexcept DependencyException as err:\n    msg = f\"\"\"\n\nThe headers or library files could not be found for {str(err)},\nwhich was requested by the option flag '-C {str(err)}=enable'\n\n\"\"\"\n    sys.stderr.write(msg)\n    raise DependencyException(msg)\n"
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "tox.ini",
          "type": "blob",
          "size": 0.6572265625,
          "content": "[tox]\nrequires =\n    tox>=4.2\nenv_list =\n    lint\n    py{py3, 313, 312, 311, 310, 39}\n\n[testenv]\ndeps =\n    numpy\nextras =\n    tests\ncommands =\n    make clean\n    {envpython} -m pip install .\n    {envpython} selftest.py\n    {envpython} -m pytest -W always {posargs}\nallowlist_externals =\n    make\n\n[testenv:lint]\nskip_install = true\ndeps =\n    check-manifest\n    pre-commit\npass_env =\n    PRE_COMMIT_COLOR\ncommands =\n    pre-commit run --all-files --show-diff-on-failure\n    check-manifest\n\n[testenv:mypy]\nskip_install = true\ndeps =\n    -r .ci/requirements-mypy.txt\nextras =\n    typing\ncommands =\n    mypy conftest.py selftest.py setup.py docs src winbuild Tests {posargs}\n"
        },
        {
          "name": "wheels",
          "type": "tree",
          "content": null
        },
        {
          "name": "winbuild",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}