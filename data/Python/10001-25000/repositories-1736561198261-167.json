{
  "metadata": {
    "timestamp": 1736561198261,
    "page": 167,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjE3MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "aio-libs/aiohttp",
      "stars": 15308,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".cherry_picker.toml",
          "type": "blob",
          "size": 0.1103515625,
          "content": "team = \"aio-libs\"\nrepo = \"aiohttp\"\ncheck_sha = \"f382b5ffc445e45a110734f5396728da7914aeb6\"\nfix_commit_msg = false\n"
        },
        {
          "name": ".codecov.yml",
          "type": "blob",
          "size": 0.4697265625,
          "content": "codecov:\n  branch: master\n  notify:\n    after_n_builds: 13\n\ncoverage:\n  range: \"95..100\"\n\n  status:\n    project: no\n\nflags:\n  library:\n    paths:\n    - aiohttp/\n  configs:\n    paths:\n    - requirements/\n    - \".git*\"\n    - \"*.toml\"\n    - \"*.yml\"\n  changelog:\n    paths:\n    - CHANGES/\n    - CHANGES.rst\n  docs:\n    paths:\n    - docs/\n    - \"*.md\"\n    - \"*.rst\"\n    - \"*.txt\"\n  tests:\n    paths:\n    - tests/\n  tools:\n    paths:\n    - tools/\n  third-party:\n    paths:\n    - vendor/\n"
        },
        {
          "name": ".coveragerc",
          "type": "blob",
          "size": 0.162109375,
          "content": "[run]\nbranch = True\nsource = aiohttp, tests\nomit = site-packages\n\n[report]\nexclude_also =\n    if TYPE_CHECKING\n    assert False\n    : \\.\\.\\.(\\s*#.*)?$\n    ^ +\\.\\.\\.$\n"
        },
        {
          "name": ".editorconfig",
          "type": "blob",
          "size": 0.3671875,
          "content": "# EditorConfig is awesome: http://EditorConfig.org\n\n# top-most EditorConfig file\nroot = true\n\n# Unix-style newlines with a newline ending every file\n[*]\nend_of_line = lf\ninsert_final_newline = true\nindent_style = space\nindent_size = 4\ntrim_trailing_whitespace = true\ncharset = utf-8\n\n[Makefile]\nindent_style = tab\n\n[*.{yml,yaml}]\nindent_size = 2\n\n[*.rst]\nmax_line_length = 80\n"
        },
        {
          "name": ".git-blame-ignore-revs",
          "type": "blob",
          "size": 1.3056640625,
          "content": "# git hyper-blame master ignore list.\n#\n# This file contains a list of git hashes of revisions to be ignored by git\n# hyper-blame (in depot_tools). These revisions are considered \"unimportant\" in\n# that they are unlikely to be what you are interested in when blaming.\n#\n# Instructions:\n# - Only large (generally automated) reformatting or renaming CLs should be\n#   added to this list. Do not put things here just because you feel they are\n#   trivial or unimportant. If in doubt, do not put it on this list.\n# - Precede each revision with a comment containing the first line of its log.\n#   For bulk work over many commits, place all commits in a block with a single\n#   comment at the top describing the work done in those commits.\n# - Only put full 40-character hashes on this list (not short hashes or any\n#   other revision reference).\n# - Append to the bottom of the file (revisions should be in chronological order\n#   from oldest to newest).\n# - Because you must use a hash, you need to append to this list in a follow-up\n#   CL to the actual reformatting CL that you are trying to ignore.\n\n# Black\n6ab76b084bf5012b7185046162ed92bedcf073b5\n\n# Apply new hooks\n41c5467a62fb1041b77356ea22b81a74305941ef\n\n# Tune C source generation\n3f7d64798d46b8b166139811a377ba231b4f36bf\n\n# Apply pyupgrade\n32833c3fe081ff75c0b08ace9cc71e821a72fc5e\n"
        },
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.056640625,
          "content": "tests/data.unknown_mime_type binary\ntests/sample.* binary\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.7421875,
          "content": "*.bak\n*.egg\n*.egg-info\n*.eggs\n*.md5\n*.pyc\n*.pyd\n*.pyo\n*.so\n*.swp\n*.tar.gz\n*~\n.DS_Store\n.Python\n.cache\n.codspeed\n.coverage\n.coverage.*\n.develop\n.direnv\n.envrc\n.flake\n.gitconfig\n.hash\n.idea\n.install-cython\n.install-deps\n.llhttp-gen\n.installed.cfg\n.mypy_cache\n.noseids\n.pytest_cache\n.python-version\n.test-results\n.tox\n.vimrc\n.vscode\naiohttp/_find_header.c\naiohttp/_headers.html\naiohttp/_headers.pxi\naiohttp/_http_parser.c\naiohttp/_http_parser.html\naiohttp/_http_writer.c\naiohttp/_http_writer.html\naiohttp/_websocket.c\naiohttp/_websocket.html\naiohttp/_websocket/mask.c\naiohttp/_websocket/reader_c.c\nbin\nbuild\ncoverage.xml\ndevelop-eggs\ndist\ndocs/_build/\neggs\nhtmlcov\ninclude/\nlib/\nman/\nnosetests.xml\nparts\npip-wheel-metadata\npyvenv\nsources\nvar/*\nvenv\nvirtualenv.py\n"
        },
        {
          "name": ".gitmodules",
          "type": "blob",
          "size": 0.115234375,
          "content": "[submodule \"vendor/llhttp\"]\n    path = vendor/llhttp\n    url = https://github.com/nodejs/llhttp.git\n    branch = main\n"
        },
        {
          "name": ".lgtm.yml",
          "type": "blob",
          "size": 0.04296875,
          "content": "queries:\n- exclude: py/unsafe-cyclic-import\n"
        },
        {
          "name": ".mypy.ini",
          "type": "blob",
          "size": 0.9609375,
          "content": "[mypy]\nfiles = aiohttp, examples, tests\ncheck_untyped_defs = True\nfollow_imports_for_stubs = True\n#disallow_any_decorated = True\ndisallow_any_generics = True\ndisallow_any_unimported = True\ndisallow_incomplete_defs = True\ndisallow_subclassing_any = True\ndisallow_untyped_calls = True\ndisallow_untyped_decorators = True\ndisallow_untyped_defs = True\n# TODO(PY312): explicit-override\nenable_error_code = ignore-without-code, possibly-undefined, redundant-expr, redundant-self, truthy-bool, truthy-iterable, unused-awaitable\nextra_checks = True\nimplicit_reexport = False\nno_implicit_optional = True\npretty = True\nshow_column_numbers = True\nshow_error_codes = True\nshow_error_code_links = True\nstrict_equality = True\nwarn_incomplete_stub = True\nwarn_redundant_casts = True\nwarn_return_any = True\nwarn_unreachable = True\nwarn_unused_ignores = True\n\n[mypy-brotli]\nignore_missing_imports = True\n\n[mypy-brotlicffi]\nignore_missing_imports = True\n\n[mypy-gunicorn.*]\nignore_missing_imports = True\n"
        },
        {
          "name": ".pip-tools.toml",
          "type": "blob",
          "size": 0.076171875,
          "content": "[pip-tools]\nallow-unsafe = true\nresolver = \"backtracking\"\nstrip-extras = true\n"
        },
        {
          "name": ".pre-commit-config.yaml",
          "type": "blob",
          "size": 2.9013671875,
          "content": "repos:\n- repo: local\n  hooks:\n  - id: changelogs-rst\n    name: changelog filenames\n    language: fail\n    entry: >-\n      Changelog files must be named\n      ####.(\n      bugfix\n      | feature\n      | deprecation\n      | breaking\n      | doc\n      | packaging\n      | contrib\n      | misc\n      )(.#)?(.rst)?\n    exclude: >-\n      (?x)\n      ^\n        CHANGES/(\n          \\.gitignore\n          |(\\d+|[0-9a-f]{8}|[0-9a-f]{7}|[0-9a-f]{40})\\.(\n            bugfix\n            |feature\n            |deprecation\n            |breaking\n            |doc\n            |packaging\n            |contrib\n            |misc\n          )(\\.\\d+)?(\\.rst)?\n          |README\\.rst\n          |\\.TEMPLATE\\.rst\n        )\n      $\n    files: ^CHANGES/\n  - id: changelogs-user-role\n    name: Changelog files should use a non-broken :user:`name` role\n    language: pygrep\n    entry: :user:([^`]+`?|`[^`]+[\\s,])\n    pass_filenames: true\n    types: [file, rst]\n  - id: check-changes\n    name: Check CHANGES\n    language: system\n    entry: ./tools/check_changes.py\n    pass_filenames: false\n- repo: https://github.com/pre-commit/pre-commit-hooks\n  rev: 'v5.0.0'\n  hooks:\n  - id: check-merge-conflict\n- repo: https://github.com/asottile/yesqa\n  rev: v1.5.0\n  hooks:\n  - id: yesqa\n- repo: https://github.com/PyCQA/isort\n  rev: '5.13.2'\n  hooks:\n  - id: isort\n- repo: https://github.com/psf/black\n  rev: '24.10.0'\n  hooks:\n    - id: black\n      language_version: python3 # Should be a command that runs python\n- repo: https://github.com/pre-commit/pre-commit-hooks\n  rev: 'v5.0.0'\n  hooks:\n  - id: end-of-file-fixer\n    exclude: >-\n      ^docs/[^/]*\\.svg$\n  - id: requirements-txt-fixer\n    files: requirements/.*\\.in$\n  - id: trailing-whitespace\n  - id: file-contents-sorter\n    args: ['--ignore-case']\n    files: |\n      CONTRIBUTORS.txt|\n      docs/spelling_wordlist.txt|\n      .gitignore|\n      .gitattributes\n  - id: check-case-conflict\n  - id: check-json\n  - id: check-xml\n  - id: check-executables-have-shebangs\n  - id: check-toml\n  - id: check-yaml\n  - id: debug-statements\n  - id: check-added-large-files\n  - id: check-symlinks\n  - id: fix-byte-order-marker\n  - id: fix-encoding-pragma\n    args: ['--remove']\n  - id: detect-aws-credentials\n    args: ['--allow-missing-credentials']\n  - id: detect-private-key\n    exclude: ^examples/\n- repo: https://github.com/asottile/pyupgrade\n  rev: 'v3.19.1'\n  hooks:\n  - id: pyupgrade\n    args: ['--py37-plus']\n- repo: https://github.com/PyCQA/flake8\n  rev: '7.1.1'\n  hooks:\n  - id: flake8\n    additional_dependencies:\n      - flake8-docstrings==1.6.0\n      - flake8-no-implicit-concat==0.3.4\n      - flake8-requirements==1.7.8\n    exclude: \"^docs/\"\n- repo: https://github.com/Lucas-C/pre-commit-hooks-markup\n  rev: v1.0.1\n  hooks:\n  - id: rst-linter\n    files: >-\n      ^[^/]+[.]rst$\n    exclude: >-\n      ^CHANGES\\.rst$\n- repo: https://github.com/codespell-project/codespell\n  rev: v2.3.0\n  hooks:\n  - id: codespell\n    additional_dependencies:\n    - tomli\n"
        },
        {
          "name": ".readthedocs.yml",
          "type": "blob",
          "size": 0.4287109375,
          "content": "# Read the Docs configuration file\n# See https://docs.readthedocs.io/en/stable/config-file/v2.html\n# for details\n\n---\nversion: 2\n\nsubmodules:\n  include: all\n  exclude: []\n  recursive: true\n\nbuild:\n  os: ubuntu-24.04\n  tools:\n    python: \"3.11\"\n  apt_packages:\n    - graphviz\n\n  jobs:\n    post_create_environment:\n    - >-\n      pip install\n      . -c requirements/runtime-deps.txt\n      -r requirements/doc.in -c requirements/doc.txt\n\n...\n"
        },
        {
          "name": "CHANGES.rst",
          "type": "blob",
          "size": 231.009765625,
          "content": "..\n    You should *NOT* be adding new change log entries to this file, this\n    file is managed by towncrier. You *may* edit previous change logs to\n    fix problems like typo corrections or such.\n    To add a new change log entry, please see\n    https://pip.pypa.io/en/latest/development/#adding-a-news-entry\n    we named the news folder \"changes\".\n\n    WARNING: Don't drop the next directive!\n\n.. towncrier release notes start\n\n3.11.11 (2024-12-18)\n====================\n\nBug fixes\n---------\n\n- Updated :py:meth:`~aiohttp.ClientSession.request` to reuse the ``quote_cookie`` setting from ``ClientSession._cookie_jar`` when processing cookies parameter.\n  -- by :user:`Cycloctane`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10093`.\n\n\n\n- Fixed type of ``SSLContext`` for some static type checkers (e.g. pyright).\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10099`.\n\n\n\n- Updated :meth:`aiohttp.web.StreamResponse.write` annotation to also allow :class:`bytearray` and :class:`memoryview` as inputs -- by :user:`cdce8p`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10154`.\n\n\n\n- Fixed a hang where a connection previously used for a streaming\n  download could be returned to the pool in a paused state.\n  -- by :user:`javitonino`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10169`.\n\n\n\n\nFeatures\n--------\n\n- Enabled ALPN on default SSL contexts. This improves compatibility with some\n  proxies which don't work without this extension.\n  -- by :user:`Cycloctane`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10156`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Fixed an infinite loop that can occur when using aiohttp in combination\n  with `async-solipsism`_ -- by :user:`bmerry`.\n\n  .. _async-solipsism: https://github.com/bmerry/async-solipsism\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10149`.\n\n\n\n\n----\n\n\n3.11.10 (2024-12-05)\n====================\n\nBug fixes\n---------\n\n- Fixed race condition in :class:`aiohttp.web.FileResponse` that could have resulted in an incorrect response if the file was replaced on the file system during ``prepare`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10101`, :issue:`10113`.\n\n\n\n- Replaced deprecated call to :func:`mimetypes.guess_type` with :func:`mimetypes.guess_file_type` when using Python 3.13+ -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10102`.\n\n\n\n- Disabled zero copy writes in the ``StreamWriter`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10125`.\n\n\n\n\n----\n\n\n3.11.9 (2024-12-01)\n===================\n\nBug fixes\n---------\n\n- Fixed invalid method logging unexpected being logged at exception level on subsequent connections -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10055`, :issue:`10076`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of parsing headers when using the C parser -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10073`.\n\n\n\n\n----\n\n\n3.11.8 (2024-11-27)\n===================\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of creating :class:`aiohttp.ClientResponse` objects when there are no cookies -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10029`.\n\n\n\n- Improved performance of creating :class:`aiohttp.ClientResponse` objects -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10030`.\n\n\n\n- Improved performances of creating objects during the HTTP request lifecycle -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10037`.\n\n\n\n- Improved performance of constructing :class:`aiohttp.web.Response` with headers -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10043`.\n\n\n\n- Improved performance of making requests when there are no auto headers to skip -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10049`.\n\n\n\n- Downgraded logging of invalid HTTP method exceptions on the first request to debug level -- by :user:`bdraco`.\n\n  HTTP requests starting with an invalid method are relatively common, especially when connected to the public internet, because browsers or other clients may try to speak SSL to a plain-text server or vice-versa. These exceptions can quickly fill the log with noise when nothing is wrong.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10055`.\n\n\n\n\n----\n\n\n3.11.7 (2024-11-21)\n===================\n\nBug fixes\n---------\n\n- Fixed the HTTP client not considering the connector's ``force_close`` value when setting the ``Connection`` header -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10003`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of serializing HTTP headers -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`10014`.\n\n\n\n\n----\n\n\n3.11.6 (2024-11-19)\n===================\n\nBug fixes\n---------\n\n- Restored the ``force_close`` method to the ``ResponseHandler`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9997`.\n\n\n\n\n----\n\n\n3.11.5 (2024-11-19)\n===================\n\nBug fixes\n---------\n\n- Fixed the ``ANY`` method not appearing in :meth:`~aiohttp.web.UrlDispatcher.routes` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9899`, :issue:`9987`.\n\n\n\n\n----\n\n\n3.11.4 (2024-11-18)\n===================\n\nBug fixes\n---------\n\n- Fixed ``StaticResource`` not allowing the ``OPTIONS`` method after calling ``set_options_route`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9972`, :issue:`9975`, :issue:`9976`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of creating web responses when there are no cookies -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9895`.\n\n\n\n\n----\n\n\n3.11.3 (2024-11-18)\n===================\n\nBug fixes\n---------\n\n- Removed non-existing ``__author__`` from ``dir(aiohttp)`` -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9918`.\n\n\n\n- Restored the ``FlowControlDataQueue`` class -- by :user:`bdraco`.\n\n  This class is no longer used internally, and will be permanently removed in the next major version.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9963`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of resolving resources when multiple methods are registered for the same route -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9899`.\n\n\n\n\n----\n\n\n3.11.2 (2024-11-14)\n===================\n\nBug fixes\n---------\n\n- Fixed improperly closed WebSocket connections generating an unhandled exception -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9883`.\n\n\n\n\n----\n\n\n3.11.1 (2024-11-14)\n===================\n\nBug fixes\n---------\n\n- Added a backward compatibility layer to :class:`aiohttp.RequestInfo` to allow creating these objects without a ``real_url`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9873`.\n\n\n\n\n----\n\n\n3.11.0 (2024-11-13)\n===================\n\nBug fixes\n---------\n\n- Raise :exc:`aiohttp.ServerFingerprintMismatch` exception on client-side if request through http proxy with mismatching server fingerprint digest: `aiohttp.ClientSession(headers=headers, connector=TCPConnector(ssl=aiohttp.Fingerprint(mismatch_digest), trust_env=True).request(...)` -- by :user:`gangj`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`6652`.\n\n\n\n- Modified websocket :meth:`aiohttp.ClientWebSocketResponse.receive_str`, :py:meth:`aiohttp.ClientWebSocketResponse.receive_bytes`, :py:meth:`aiohttp.web.WebSocketResponse.receive_str` & :py:meth:`aiohttp.web.WebSocketResponse.receive_bytes` methods to raise new :py:exc:`aiohttp.WSMessageTypeError` exception, instead of generic :py:exc:`TypeError`, when websocket messages of incorrect types are received -- by :user:`ara-25`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`6800`.\n\n\n\n- Made ``TestClient.app`` a ``Generic`` so type checkers will know the correct type (avoiding unneeded ``client.app is not None`` checks) -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8977`.\n\n\n\n- Fixed the keep-alive connection pool to be FIFO instead of LIFO -- by :user:`bdraco`.\n\n  Keep-alive connections are more likely to be reused before they disconnect.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9672`.\n\n\n\n\nFeatures\n--------\n\n- Added ``strategy`` parameter to :meth:`aiohttp.web.StreamResponse.enable_compression`\n  The value of this parameter is passed to the :func:`zlib.compressobj` function, allowing people\n  to use a more sufficient compression algorithm for their data served by :mod:`aiohttp.web`\n  -- by :user:`shootkin`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`6257`.\n\n\n\n- Added ``server_hostname`` parameter to ``ws_connect``.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7941`.\n\n\n\n- Exported :py:class:`~aiohttp.ClientWSTimeout` to top-level namespace -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8612`.\n\n\n\n- Added ``secure``/``httponly``/``samesite`` parameters to ``.del_cookie()`` -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8956`.\n\n\n\n- Updated :py:class:`~aiohttp.ClientSession`'s auth logic to include default auth only if the request URL's origin matches _base_url; otherwise, the auth will not be included -- by :user:`MaximZemskov`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8966`, :issue:`9466`.\n\n\n\n- Added ``proxy`` and ``proxy_auth`` parameters to :py:class:`~aiohttp.ClientSession` -- by :user:`meshya`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9207`.\n\n\n\n- Added ``default_to_multipart`` parameter to ``FormData``.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9335`.\n\n\n\n- Added :py:meth:`~aiohttp.ClientWebSocketResponse.send_frame` and :py:meth:`~aiohttp.web.WebSocketResponse.send_frame` for WebSockets -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9348`.\n\n\n\n- Updated :py:class:`~aiohttp.ClientSession` to support paths in ``base_url`` parameter.\n  ``base_url`` paths must end with a ``/``  -- by :user:`Cycloctane`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9530`.\n\n\n\n- Improved performance of reading WebSocket messages with a Cython implementation -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9543`, :issue:`9554`, :issue:`9556`, :issue:`9558`, :issue:`9636`, :issue:`9649`, :issue:`9781`.\n\n\n\n- Added ``writer_limit`` to the :py:class:`~aiohttp.web.WebSocketResponse` to be able to adjust the limit before the writer forces the buffer to be drained -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9572`.\n\n\n\n- Added an :attr:`~aiohttp.abc.AbstractAccessLogger.enabled` property to :class:`aiohttp.abc.AbstractAccessLogger` to dynamically check if logging is enabled -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9822`.\n\n\n\n\nDeprecations (removal in next major release)\n--------------------------------------------\n\n- Deprecate obsolete `timeout: float` and `receive_timeout: Optional[float]` in :py:meth:`~aiohttp.ClientSession.ws_connect`. Change default websocket receive timeout from `None` to `10.0`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`3945`.\n\n\n\n\nRemovals and backward incompatible breaking changes\n---------------------------------------------------\n\n- Dropped support for Python 3.8 -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8797`.\n\n\n\n- Increased minimum yarl version to 1.17.0 -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8909`, :issue:`9079`, :issue:`9305`, :issue:`9574`.\n\n\n\n- Removed the ``is_ipv6_address`` and ``is_ip4_address`` helpers are they are no longer used -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9344`.\n\n\n\n- Changed ``ClientRequest.connection_key`` to be a `NamedTuple` to improve client performance -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9365`.\n\n\n\n- ``FlowControlDataQueue`` has been replaced with the ``WebSocketDataQueue`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9685`.\n\n\n\n- Changed ``ClientRequest.request_info`` to be a `NamedTuple` to improve client performance -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9692`.\n\n\n\n\nPackaging updates and notes for downstreams\n-------------------------------------------\n\n- Switched to using the :mod:`propcache <propcache.api>` package for property caching\n  -- by :user:`bdraco`.\n\n  The :mod:`propcache <propcache.api>` package is derived from the property caching\n  code in :mod:`yarl` and has been broken out to avoid maintaining it for multiple\n  projects.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9394`.\n\n\n\n- Separated ``aiohttp.http_websocket`` into multiple files to make it easier to maintain -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9542`, :issue:`9552`.\n\n\n\n\nContributor-facing changes\n--------------------------\n\n- Changed diagram images generator from ``blockdiag`` to ``GraphViz``.\n  Generating documentation now requires the GraphViz executable to be included in $PATH or sphinx build configuration.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9359`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Added flake8 settings to avoid some forms of implicit concatenation. -- by :user:`booniepepper`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7731`.\n\n\n\n- Enabled keep-alive support on proxies (which was originally disabled several years ago) -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8920`.\n\n\n\n- Changed web entry point to not listen on TCP when only a Unix path is passed -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9033`.\n\n\n\n- Disabled automatic retries of failed requests in :class:`aiohttp.test_utils.TestClient`'s client session\n  (which could potentially hide errors in tests) -- by :user:`ShubhAgarwal-dev`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9141`.\n\n\n\n- Changed web ``keepalive_timeout`` default to around an hour in order to reduce race conditions on reverse proxies -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9285`.\n\n\n\n- Reduced memory required for stream objects created during the client request lifecycle -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9407`.\n\n\n\n- Improved performance of the internal ``DataQueue`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9659`.\n\n\n\n- Improved performance of calling ``receive`` for WebSockets for the most common message types -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9679`.\n\n\n\n- Replace internal helper methods ``method_must_be_empty_body`` and ``status_code_must_be_empty_body`` with simple `set` lookups -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9722`.\n\n\n\n- Improved performance of :py:class:`aiohttp.BaseConnector` when there is no ``limit_per_host`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9756`.\n\n\n\n- Improved performance of sending HTTP requests when there is no body -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9757`.\n\n\n\n- Improved performance of the ``WebsocketWriter`` when the protocol is not paused -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9796`.\n\n\n\n- Implemented zero copy writes for ``StreamWriter`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9839`.\n\n\n\n\n----\n\n\n3.10.11 (2024-11-13)\n====================\n\nBug fixes\n---------\n\n- Authentication provided by a redirect now takes precedence over provided ``auth`` when making requests with the client -- by :user:`PLPeeters`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9436`.\n\n\n\n- Fixed :py:meth:`WebSocketResponse.close() <aiohttp.web.WebSocketResponse.close>` to discard non-close messages within its timeout window after sending close -- by :user:`lenard-mosys`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9506`.\n\n\n\n- Fixed a deadlock that could occur while attempting to get a new connection slot after a timeout -- by :user:`bdraco`.\n\n  The connector was not cancellation-safe.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9670`, :issue:`9671`.\n\n\n\n- Fixed the WebSocket flow control calculation undercounting with multi-byte data -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9686`.\n\n\n\n- Fixed incorrect parsing of chunk extensions with the pure Python parser -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9851`.\n\n\n\n- Fixed system routes polluting the middleware cache -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9852`.\n\n\n\n\nRemovals and backward incompatible breaking changes\n---------------------------------------------------\n\n- Improved performance of the connector when a connection can be reused -- by :user:`bdraco`.\n\n  If ``BaseConnector.connect`` has been subclassed and replaced with custom logic, the ``ceil_timeout`` must be added.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9600`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of the client request lifecycle when there are no cookies -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9470`.\n\n\n\n- Improved performance of sending client requests when the writer can finish synchronously -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9485`.\n\n\n\n- Improved performance of serializing HTTP headers -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9603`.\n\n\n\n- Passing ``enable_cleanup_closed`` to :py:class:`aiohttp.TCPConnector` is now ignored on Python 3.12.7+ and 3.13.1+ since the underlying bug that caused asyncio to leak SSL connections has been fixed upstream -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9726`, :issue:`9736`.\n\n\n\n----\n\n\n\n\n3.10.10 (2024-10-10)\n====================\n\nBug fixes\n---------\n\n- Fixed error messages from :py:class:`~aiohttp.resolver.AsyncResolver` being swallowed -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9451`, :issue:`9455`.\n\n\n\n\nFeatures\n--------\n\n- Added :exc:`aiohttp.ClientConnectorDNSError` for differentiating DNS resolution errors from other connector errors -- by :user:`mstojcevich`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8455`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Simplified DNS resolution throttling code to reduce chance of race conditions -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9454`.\n\n\n\n\n----\n\n\n3.10.9 (2024-10-04)\n===================\n\nBug fixes\n---------\n\n- Fixed proxy headers being used in the ``ConnectionKey`` hash when a proxy was not being used -- by :user:`bdraco`.\n\n  If default headers are used, they are also used for proxy headers. This could have led to creating connections that were not needed when one was already available.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9368`.\n\n\n\n- Widened the type of the ``trace_request_ctx`` parameter of\n  :meth:`ClientSession.request() <aiohttp.ClientSession.request>` and friends\n  -- by :user:`layday`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9397`.\n\n\n\n\nRemovals and backward incompatible breaking changes\n---------------------------------------------------\n\n- Fixed failure to try next host after single-host connection timeout -- by :user:`brettdh`.\n\n  The default client :class:`aiohttp.ClientTimeout` params has changed to include a ``sock_connect`` timeout of 30 seconds so that this correct behavior happens by default.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7342`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of resolving hosts with Python 3.12+ -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9342`.\n\n\n\n- Reduced memory required for timer objects created during the client request lifecycle -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9406`.\n\n\n\n\n----\n\n\n3.10.8 (2024-09-28)\n===================\n\nBug fixes\n---------\n\n- Fixed cancellation leaking upwards on timeout -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9326`.\n\n\n\n\n----\n\n\n3.10.7 (2024-09-27)\n===================\n\nBug fixes\n---------\n\n- Fixed assembling the :class:`~yarl.URL` for web requests when the host contains a non-default port or IPv6 address -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9309`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of determining if a URL is absolute -- by :user:`bdraco`.\n\n  The property :attr:`~yarl.URL.absolute` is more performant than the method ``URL.is_absolute()`` and preferred when newer versions of yarl are used.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9171`.\n\n\n\n- Replaced code that can now be handled by ``yarl`` -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9301`.\n\n\n\n\n----\n\n\n3.10.6 (2024-09-24)\n===================\n\nBug fixes\n---------\n\n- Added :exc:`aiohttp.ClientConnectionResetError`. Client code that previously threw :exc:`ConnectionResetError`\n  will now throw this -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9137`.\n\n\n\n- Fixed an unclosed transport ``ResourceWarning`` on web handlers -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8875`.\n\n\n\n- Fixed resolve_host() 'Task was destroyed but is pending' errors -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8967`.\n\n\n\n- Fixed handling of some file-like objects (e.g. ``tarfile.extractfile()``) which raise ``AttributeError`` instead of ``OSError`` when ``fileno`` fails for streaming payload data -- by :user:`ReallyReivax`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`6732`.\n\n\n\n- Fixed web router not matching pre-encoded URLs (requires yarl 1.9.6+) -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8898`, :issue:`9267`.\n\n\n\n- Fixed an error when trying to add a route for multiple methods with a path containing a regex pattern -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8998`.\n\n\n\n- Fixed ``Response.text`` when body is a ``Payload`` -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`6485`.\n\n\n\n- Fixed compressed requests failing when no body was provided -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9108`.\n\n\n\n- Fixed client incorrectly reusing a connection when the previous message had not been fully sent -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8992`.\n\n\n\n- Fixed race condition that could cause server to close connection incorrectly at keepalive timeout -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9140`.\n\n\n\n- Fixed Python parser chunked handling with multiple Transfer-Encoding values -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8823`.\n\n\n\n- Fixed error handling after 100-continue so server sends 500 response instead of disconnecting -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8876`.\n\n\n\n- Stopped adding a default Content-Type header when response has no content -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8858`.\n\n\n\n- Added support for URL credentials with empty (zero-length) username, e.g. ``https://:password@host`` -- by :user:`shuckc`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`6494`.\n\n\n\n- Stopped logging exceptions from ``web.run_app()`` that would be raised regardless -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`6807`.\n\n\n\n- Implemented binding to IPv6 addresses in the pytest server fixture.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`4650`.\n\n\n\n- Fixed the incorrect use of flags for ``getnameinfo()`` in the Resolver --by :user:`GitNMLee`\n\n  Link-Local IPv6 addresses can now be handled by the Resolver correctly.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9032`.\n\n\n\n- Fixed StreamResponse.prepared to return True after EOF is sent -- by :user:`arthurdarcet`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`5343`.\n\n\n\n- Changed ``make_mocked_request()`` to use empty payload by default -- by :user:`rahulnht`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7167`.\n\n\n\n- Used more precise type for ``ClientResponseError.headers``, fixing some type errors when using them -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8768`.\n\n\n\n- Changed behavior when returning an invalid response to send a 500 response -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8845`.\n\n\n\n- Fixed response reading from closed session to throw an error immediately instead of timing out -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8878`.\n\n\n\n- Fixed ``CancelledError`` from one cleanup context stopping other contexts from completing -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8908`.\n\n\n\n- Fixed changing scheme/host in ``Response.clone()`` for absolute URLs -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8990`.\n\n\n\n- Fixed ``Site.name`` when host is an empty string -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8929`.\n\n\n\n- Updated Python parser to reject messages after a close message, matching C parser behaviour -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9018`.\n\n\n\n- Fixed creation of ``SSLContext`` inside of :py:class:`aiohttp.TCPConnector` with multiple event loops in different threads -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9029`.\n\n\n\n- Fixed (on Python 3.11+) some edge cases where a task cancellation may get incorrectly suppressed -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9030`.\n\n\n\n- Fixed exception information getting lost on ``HttpProcessingError`` -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9052`.\n\n\n\n- Fixed ``If-None-Match`` not using weak comparison -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9063`.\n\n\n\n- Fixed badly encoded charset crashing when getting response text instead of falling back to charset detector.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9160`.\n\n\n\n- Rejected `\\n` in `reason` values to avoid sending broken HTTP messages -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9167`.\n\n\n\n- Changed :py:meth:`ClientResponse.raise_for_status() <aiohttp.ClientResponse.raise_for_status>` to only release the connection when invoked outside an ``async with`` context -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9239`.\n\n\n\n\nFeatures\n--------\n\n- Improved type on ``params`` to match the underlying type allowed by ``yarl`` -- by :user:`lpetre`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8564`.\n\n\n\n- Declared Python 3.13 supported -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8748`.\n\n\n\n\nRemovals and backward incompatible breaking changes\n---------------------------------------------------\n\n- Improved middleware performance -- by :user:`bdraco`.\n\n  The ``set_current_app`` method was removed from ``UrlMappingMatchInfo`` because it is no longer used, and it was unlikely external caller would ever use it.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9200`.\n\n\n\n- Increased minimum yarl version to 1.12.0 -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9267`.\n\n\n\n\nImproved documentation\n----------------------\n\n- Clarified that ``GracefulExit`` needs to be handled in ``AppRunner`` and ``ServerRunner`` when using ``handle_signals=True``. -- by :user:`Daste745`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`4414`.\n\n\n\n- Clarified that auth parameter in ClientSession will persist and be included with any request to any origin, even during redirects to different origins.  -- by :user:`MaximZemskov`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`6764`.\n\n\n\n- Clarified which timeout exceptions happen on which timeouts -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8968`.\n\n\n\n- Updated ``ClientSession`` parameters to match current code -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8991`.\n\n\n\n\nPackaging updates and notes for downstreams\n-------------------------------------------\n\n- Fixed ``test_client_session_timeout_zero`` to not require internet access -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9004`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of making requests when there are no auto headers to skip -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8847`.\n\n\n\n- Exported ``aiohttp.TraceRequestHeadersSentParams`` -- by :user:`Hadock-is-ok`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8947`.\n\n\n\n- Avoided tracing overhead in the http writer when there are no active traces -- by user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9031`.\n\n\n\n- Improved performance of reify Cython implementation -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9054`.\n\n\n\n- Use :meth:`URL.extend_query() <yarl.URL.extend_query>` to extend query params (requires yarl 1.11.0+) -- by :user:`bdraco`.\n\n  If yarl is older than 1.11.0, the previous slower hand rolled version will be used.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9068`.\n\n\n\n- Improved performance of checking if a host is an IP Address -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9095`.\n\n\n\n- Significantly improved performance of middlewares -- by :user:`bdraco`.\n\n  The construction of the middleware wrappers is now cached and is built once per handler instead of on every request.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9158`, :issue:`9170`.\n\n\n\n- Improved performance of web requests -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9168`, :issue:`9169`, :issue:`9172`, :issue:`9174`, :issue:`9175`, :issue:`9241`.\n\n\n\n- Improved performance of starting web requests when there is no response prepare hook -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9173`.\n\n\n\n- Significantly improved performance of expiring cookies -- by :user:`bdraco`.\n\n  Expiring cookies has been redesigned to use :mod:`heapq` instead of a linear search, to better scale.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9203`.\n\n\n\n- Significantly sped up filtering cookies -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`9204`.\n\n\n\n\n----\n\n\n3.10.5 (2024-08-19)\n=========================\n\nBug fixes\n---------\n\n- Fixed :meth:`aiohttp.ClientResponse.json()` not setting ``status`` when :exc:`aiohttp.ContentTypeError` is raised -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8742`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of the WebSocket reader -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8736`, :issue:`8747`.\n\n\n\n\n----\n\n\n3.10.4 (2024-08-17)\n===================\n\nBug fixes\n---------\n\n- Fixed decoding base64 chunk in BodyPartReader -- by :user:`hyzyla`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`3867`.\n\n\n\n- Fixed a race closing the server-side WebSocket where the close code would not reach the client -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8680`.\n\n\n\n- Fixed unconsumed exceptions raised by the WebSocket heartbeat -- by :user:`bdraco`.\n\n  If the heartbeat ping raised an exception, it would not be consumed and would be logged as an warning.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8685`.\n\n\n\n- Fixed an edge case in the Python parser when chunk separators happen to align with network chunks -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8720`.\n\n\n\n\nImproved documentation\n----------------------\n\n- Added ``aiohttp-apischema`` to supported libraries -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8700`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of starting request handlers with Python 3.12+ -- by :user:`bdraco`.\n\n  This change is a followup to :issue:`8661` to make the same optimization for Python 3.12+ where the request is connected.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8681`.\n\n\n\n\n----\n\n\n3.10.3 (2024-08-10)\n========================\n\nBug fixes\n---------\n\n- Fixed multipart reading when stream buffer splits the boundary over several read() calls -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8653`.\n\n\n\n- Fixed :py:class:`aiohttp.TCPConnector` doing blocking I/O in the event loop to create the ``SSLContext`` -- by :user:`bdraco`.\n\n  The blocking I/O would only happen once per verify mode. However, it could cause the event loop to block for a long time if the ``SSLContext`` creation is slow, which is more likely during startup when the disk cache is not yet present.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8672`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved performance of :py:meth:`~aiohttp.ClientWebSocketResponse.receive` and :py:meth:`~aiohttp.web.WebSocketResponse.receive` when there is no timeout. -- by :user:`bdraco`.\n\n  The timeout context manager is now avoided when there is no timeout as it accounted for up to 50% of the time spent in the :py:meth:`~aiohttp.ClientWebSocketResponse.receive` and :py:meth:`~aiohttp.web.WebSocketResponse.receive` methods.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8660`.\n\n\n\n- Improved performance of starting request handlers with Python 3.12+ -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8661`.\n\n\n\n- Improved performance of HTTP keep-alive checks -- by :user:`bdraco`.\n\n  Previously, when processing a request for a keep-alive connection, the keep-alive check would happen every second; the check is now rescheduled if it fires too early instead.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8662`.\n\n\n\n- Improved performance of generating random WebSocket mask -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8667`.\n\n\n\n\n----\n\n\n3.10.2 (2024-08-08)\n===================\n\nBug fixes\n---------\n\n- Fixed server checks for circular symbolic links to be compatible with Python 3.13 -- by :user:`steverep`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8565`.\n\n\n\n- Fixed request body not being read when ignoring an Upgrade request -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8597`.\n\n\n\n- Fixed an edge case where shutdown would wait for timeout when the handler was already completed -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8611`.\n\n\n\n- Fixed connecting to ``npipe://``, ``tcp://``, and ``unix://`` urls -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8632`.\n\n\n\n- Fixed WebSocket ping tasks being prematurely garbage collected -- by :user:`bdraco`.\n\n  There was a small risk that WebSocket ping tasks would be prematurely garbage collected because the event loop only holds a weak reference to the task. The garbage collection risk has been fixed by holding a strong reference to the task. Additionally, the task is now scheduled eagerly with Python 3.12+ to increase the chance it can be completed immediately and avoid having to hold any references to the task.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8641`.\n\n\n\n- Fixed incorrectly following symlinks for compressed file variants -- by :user:`steverep`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8652`.\n\n\n\n\nRemovals and backward incompatible breaking changes\n---------------------------------------------------\n\n- Removed ``Request.wait_for_disconnection()``, which was mistakenly added briefly in 3.10.0 -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8636`.\n\n\n\n\nContributor-facing changes\n--------------------------\n\n- Fixed monkey patches for ``Path.stat()`` and ``Path.is_dir()`` for Python 3.13 compatibility -- by :user:`steverep`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8551`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved WebSocket performance when messages are sent or received frequently -- by :user:`bdraco`.\n\n  The WebSocket heartbeat scheduling algorithm was improved to reduce the ``asyncio`` scheduling overhead by decreasing the number of ``asyncio.TimerHandle`` creations and cancellations.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8608`.\n\n\n\n- Minor improvements to various type annotations -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8634`.\n\n\n\n\n----\n\n\n3.10.1 (2024-08-03)\n========================\n\nBug fixes\n---------\n\n- Fixed WebSocket server heartbeat timeout logic to terminate :py:meth:`~aiohttp.ClientWebSocketResponse.receive` and return :py:class:`~aiohttp.ServerTimeoutError` -- by :user:`arcivanov`.\n\n  When a WebSocket pong message was not received, the :py:meth:`~aiohttp.ClientWebSocketResponse.receive` operation did not terminate. This change causes ``_pong_not_received`` to feed the ``reader`` an error message, causing pending :py:meth:`~aiohttp.ClientWebSocketResponse.receive` to terminate and return the error message. The error message contains the exception :py:class:`~aiohttp.ServerTimeoutError`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8540`.\n\n\n\n- Fixed url dispatcher index not matching when a variable is preceded by a fixed string after a slash -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8566`.\n\n\n\n\nRemovals and backward incompatible breaking changes\n---------------------------------------------------\n\n- Creating :py:class:`aiohttp.TCPConnector`, :py:class:`aiohttp.ClientSession`, :py:class:`~aiohttp.resolver.ThreadedResolver` :py:class:`aiohttp.web.Server`, or :py:class:`aiohttp.CookieJar` instances without a running event loop now raises a :exc:`RuntimeError` -- by :user:`asvetlov`.\n\n  Creating these objects without a running event loop was deprecated in :issue:`3372` which was released in version 3.5.0.\n\n  This change first appeared in version 3.10.0 as :issue:`6378`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8555`, :issue:`8583`.\n\n\n\n\n----\n\n\n3.10.0 (2024-07-30)\n========================\n\nBug fixes\n---------\n\n- Fixed server response headers for ``Content-Type`` and ``Content-Encoding`` for\n  static compressed files -- by :user:`steverep`.\n\n  Server will now respond with a ``Content-Type`` appropriate for the compressed\n  file (e.g. ``\"application/gzip\"``), and omit the ``Content-Encoding`` header.\n  Users should expect that most clients will no longer decompress such responses\n  by default.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`4462`.\n\n\n\n- Fixed duplicate cookie expiration calls in the CookieJar implementation\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7784`.\n\n\n\n- Adjusted ``FileResponse`` to check file existence and access when preparing the response -- by :user:`steverep`.\n\n  The :py:class:`~aiohttp.web.FileResponse` class was modified to respond with\n   403 Forbidden or 404 Not Found as appropriate.  Previously, it would cause a\n   server error if the path did not exist or could not be accessed.  Checks for\n   existence, non-regular files, and permissions were expected to be done in the\n   route handler.  For static routes, this now permits a compressed file to exist\n   without its uncompressed variant and still be served.  In addition, this\n   changes the response status for files without read permission to 403, and for\n   non-regular files from 404 to 403 for consistency.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8182`.\n\n\n\n- Fixed ``AsyncResolver`` to match ``ThreadedResolver`` behavior\n  -- by :user:`bdraco`.\n\n  On system with IPv6 support, the :py:class:`~aiohttp.resolver.AsyncResolver` would not fallback\n  to providing A records when AAAA records were not available.\n  Additionally, unlike the :py:class:`~aiohttp.resolver.ThreadedResolver`, the :py:class:`~aiohttp.resolver.AsyncResolver`\n  did not handle link-local addresses correctly.\n\n  This change makes the behavior consistent with the :py:class:`~aiohttp.resolver.ThreadedResolver`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8270`.\n\n\n\n- Fixed ``ws_connect`` not respecting `receive_timeout`` on WS(S) connection.\n  -- by :user:`arcivanov`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8444`.\n\n\n\n- Removed blocking I/O in the event loop for static resources and refactored\n  exception handling -- by :user:`steverep`.\n\n  File system calls when handling requests for static routes were moved to a\n  separate thread to potentially improve performance. Exception handling\n  was tightened in order to only return 403 Forbidden or 404 Not Found responses\n  for expected scenarios; 500 Internal Server Error would be returned for any\n  unknown errors.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8507`.\n\n\n\n\nFeatures\n--------\n\n- Added a Request.wait_for_disconnection() method, as means of allowing request handlers to be notified of premature client disconnections.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`2492`.\n\n\n\n- Added 5 new exceptions: :py:exc:`~aiohttp.InvalidUrlClientError`, :py:exc:`~aiohttp.RedirectClientError`,\n  :py:exc:`~aiohttp.NonHttpUrlClientError`, :py:exc:`~aiohttp.InvalidUrlRedirectClientError`,\n  :py:exc:`~aiohttp.NonHttpUrlRedirectClientError`\n\n  :py:exc:`~aiohttp.InvalidUrlRedirectClientError`, :py:exc:`~aiohttp.NonHttpUrlRedirectClientError`\n  are raised instead of :py:exc:`ValueError` or :py:exc:`~aiohttp.InvalidURL` when the redirect URL is invalid. Classes\n  :py:exc:`~aiohttp.InvalidUrlClientError`, :py:exc:`~aiohttp.RedirectClientError`,\n  :py:exc:`~aiohttp.NonHttpUrlClientError` are base for them.\n\n  The :py:exc:`~aiohttp.InvalidURL` now exposes a ``description`` property with the text explanation of the error details.\n\n  -- by :user:`setla`, :user:`AraHaan`, and :user:`bdraco`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`2507`, :issue:`3315`, :issue:`6722`, :issue:`8481`, :issue:`8482`.\n\n\n\n- Added a feature to retry closed connections automatically for idempotent methods. -- by :user:`Dreamsorcerer`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7297`.\n\n\n\n- Implemented filter_cookies() with domain-matching and path-matching on the keys, instead of testing every single cookie.\n  This may break existing cookies that have been saved with `CookieJar.save()`. Cookies can be migrated with this script::\n\n      import pickle\n      with file_path.open(\"rb\") as f:\n          cookies = pickle.load(f)\n\n      morsels = [(name, m) for c in cookies.values() for name, m in c.items()]\n      cookies.clear()\n      for name, m in morsels:\n          cookies[(m[\"domain\"], m[\"path\"].rstrip(\"/\"))][name] = m\n\n      with file_path.open(\"wb\") as f:\n          pickle.dump(cookies, f, pickle.HIGHEST_PROTOCOL)\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7583`, :issue:`8535`.\n\n\n\n- Separated connection and socket timeout errors, from ServerTimeoutError.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7801`.\n\n\n\n- Implemented happy eyeballs\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7954`.\n\n\n\n- Added server capability to check for static files with Brotli compression via a ``.br`` extension -- by :user:`steverep`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8062`.\n\n\n\n\nRemovals and backward incompatible breaking changes\n---------------------------------------------------\n\n- The shutdown logic in 3.9 waited on all tasks, which caused issues with some libraries.\n  In 3.10 we've changed this logic to only wait on request handlers. This means that it's\n  important for developers to correctly handle the lifecycle of background tasks using a\n  library such as ``aiojobs``. If an application is using ``handler_cancellation=True`` then\n  it is also a good idea to ensure that any :func:`asyncio.shield` calls are replaced with\n  :func:`aiojobs.aiohttp.shield`.\n\n  Please read the updated documentation on these points: \\\n  https://docs.aiohttp.org/en/stable/web_advanced.html#graceful-shutdown \\\n  https://docs.aiohttp.org/en/stable/web_advanced.html#web-handler-cancellation\n\n  -- by :user:`Dreamsorcerer`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8495`.\n\n\n\n\nImproved documentation\n----------------------\n\n- Added documentation for ``aiohttp.web.FileResponse``.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`3958`.\n\n\n\n- Improved the docs for the `ssl` params.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8403`.\n\n\n\n\nContributor-facing changes\n--------------------------\n\n- Enabled HTTP parser tests originally intended for 3.9.2 release -- by :user:`pajod`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8088`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved URL handler resolution time by indexing resources in the UrlDispatcher.\n  For applications with a large number of handlers, this should increase performance significantly.\n  -- by :user:`bdraco`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7829`.\n\n\n\n- Added `nacl_middleware <https://github.com/CosmicDNA/nacl_middleware>`_ to the list of middlewares in the third party section of the documentation.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8346`.\n\n\n\n- Minor improvements to static typing -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8364`.\n\n\n\n- Added a 3.11-specific overloads to ``ClientSession``  -- by :user:`max-muoto`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8463`.\n\n\n\n- Simplified path checks for ``UrlDispatcher.add_static()`` method -- by :user:`steverep`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8491`.\n\n\n\n- Avoided creating a future on every websocket receive -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8498`.\n\n\n\n- Updated identity checks for all ``WSMsgType`` type compares -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8501`.\n\n\n\n- When using Python 3.12 or later, the writer is no longer scheduled on the event loop if it can finish synchronously. Avoiding event loop scheduling reduces latency and improves performance. -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8510`.\n\n\n\n- Restored :py:class:`~aiohttp.resolver.AsyncResolver` to be the default resolver. -- by :user:`bdraco`.\n\n  :py:class:`~aiohttp.resolver.AsyncResolver` was disabled by default because\n  of IPv6 compatibility issues. These issues have been resolved and\n  :py:class:`~aiohttp.resolver.AsyncResolver` is again now the default resolver.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8522`.\n\n\n\n\n----\n\n\n3.9.5 (2024-04-16)\n==================\n\nBug fixes\n---------\n\n- Fixed \"Unclosed client session\" when initialization of\n  :py:class:`~aiohttp.ClientSession` fails -- by :user:`NewGlad`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8253`.\n\n\n\n- Fixed regression (from :pr:`8280`) with adding ``Content-Disposition`` to the ``form-data``\n  part after appending to writer -- by :user:`Dreamsorcerer`/:user:`Olegt0rr`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8332`.\n\n\n\n- Added default ``Content-Disposition`` in ``multipart/form-data`` responses to avoid broken\n  form-data responses -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8335`.\n\n\n\n\n----\n\n\n3.9.4 (2024-04-11)\n==================\n\nBug fixes\n---------\n\n- The asynchronous internals now set the underlying causes\n  when assigning exceptions to the future objects\n  -- by :user:`webknjaz`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8089`.\n\n\n\n- Treated values of ``Accept-Encoding`` header as case-insensitive when checking\n  for gzip files -- by :user:`steverep`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8104`.\n\n\n\n- Improved the DNS resolution performance on cache hit -- by :user:`bdraco`.\n\n  This is achieved by avoiding an :mod:`asyncio` task creation in this case.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8163`.\n\n\n- Changed the type annotations to allow ``dict`` on :meth:`aiohttp.MultipartWriter.append`,\n  :meth:`aiohttp.MultipartWriter.append_json` and\n  :meth:`aiohttp.MultipartWriter.append_form` -- by :user:`cakemanny`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7741`.\n\n\n\n- Ensure websocket transport is closed when client does not close it\n  -- by :user:`bdraco`.\n\n  The transport could remain open if the client did not close it. This\n  change ensures the transport is closed when the client does not close\n  it.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8200`.\n\n\n\n- Leave websocket transport open if receive times out or is cancelled\n  -- by :user:`bdraco`.\n\n  This restores the behavior prior to the change in #7978.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8251`.\n\n\n\n- Fixed content not being read when an upgrade request was not supported with the pure Python implementation.\n  -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8252`.\n\n\n\n- Fixed a race condition with incoming connections during server shutdown -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8271`.\n\n\n\n- Fixed ``multipart/form-data`` compliance with :rfc:`7578` -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8280`.\n\n\n\n- Fixed blocking I/O in the event loop while processing files in a POST request\n  -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8283`.\n\n\n\n- Escaped filenames in static view -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8317`.\n\n\n\n- Fixed the pure python parser to mark a connection as closing when a\n  response has no length -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8320`.\n\n\n\n\nFeatures\n--------\n\n- Upgraded *llhttp* to 9.2.1, and started rejecting obsolete line folding\n  in Python parser to match -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8146`, :issue:`8292`.\n\n\n\n\nDeprecations (removal in next major release)\n--------------------------------------------\n\n- Deprecated ``content_transfer_encoding`` parameter in :py:meth:`FormData.add_field()\n  <aiohttp.FormData.add_field>` -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8280`.\n\n\n\n\nImproved documentation\n----------------------\n\n- Added a note about canceling tasks to avoid delaying server shutdown -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8267`.\n\n\n\n\nContributor-facing changes\n--------------------------\n\n- The pull request template is now asking the contributors to\n  answer a question about the long-term maintenance challenges\n  they envision as a result of merging their patches\n  -- by :user:`webknjaz`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8099`.\n\n\n\n- Updated CI and documentation to use NPM clean install and upgrade\n  node to version 18 -- by :user:`steverep`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8116`.\n\n\n\n- A pytest fixture ``hello_txt`` was introduced to aid\n  static file serving tests in\n  :file:`test_web_sendfile_functional.py`. It dynamically\n  provisions ``hello.txt`` file variants shared across the\n  tests in the module.\n\n  -- by :user:`steverep`\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8136`.\n\n\n\n\nPackaging updates and notes for downstreams\n-------------------------------------------\n\n- Added an ``internal`` pytest marker for tests which should be skipped\n  by packagers (use ``-m 'not internal'`` to disable them) -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8299`.\n\n\n\n\n----\n\n\n3.9.3 (2024-01-29)\n==================\n\nBug fixes\n---------\n\n- Fixed backwards compatibility breakage (in 3.9.2) of ``ssl`` parameter when set outside\n  of ``ClientSession`` (e.g. directly in ``TCPConnector``) -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8097`, :issue:`8098`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Improved test suite handling of paths and temp files to consistently use pathlib and pytest fixtures.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`3957`.\n\n\n\n\n----\n\n\n3.9.2 (2024-01-28)\n==================\n\nBug fixes\n---------\n\n- Fixed server-side websocket connection leak.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7978`.\n\n\n\n- Fixed ``web.FileResponse`` doing blocking I/O in the event loop.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8012`.\n\n\n\n- Fixed double compress when compression enabled and compressed file exists in server file responses.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8014`.\n\n\n\n- Added runtime type check for ``ClientSession`` ``timeout`` parameter.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8021`.\n\n\n\n- Fixed an unhandled exception in the Python HTTP parser on header lines starting with a colon -- by :user:`pajod`.\n\n  Invalid request lines with anything but a dot between the HTTP major and minor version are now rejected.\n  Invalid header field names containing question mark or slash are now rejected.\n  Such requests are incompatible with :rfc:`9110#section-5.6.2` and are not known to be of any legitimate use.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8074`.\n\n\n\n- Improved validation of paths for static resources requests to the server -- by :user:`bdraco`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8079`.\n\n\n\n\nFeatures\n--------\n\n- Added support for passing :py:data:`True` to ``ssl`` parameter in ``ClientSession`` while\n  deprecating :py:data:`None` -- by :user:`xiangyan99`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7698`.\n\n\n\nBreaking changes\n----------------\n\n- Fixed an unhandled exception in the Python HTTP parser on header lines starting with a colon -- by :user:`pajod`.\n\n  Invalid request lines with anything but a dot between the HTTP major and minor version are now rejected.\n  Invalid header field names containing question mark or slash are now rejected.\n  Such requests are incompatible with :rfc:`9110#section-5.6.2` and are not known to be of any legitimate use.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8074`.\n\n\n\n\nImproved documentation\n----------------------\n\n- Fixed examples of ``fallback_charset_resolver`` function in the :doc:`client_advanced` document. -- by :user:`henry0312`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7995`.\n\n\n\n- The Sphinx setup was updated to avoid showing the empty\n  changelog draft section in the tagged release documentation\n  builds on Read The Docs -- by :user:`webknjaz`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8067`.\n\n\n\n\nPackaging updates and notes for downstreams\n-------------------------------------------\n\n- The changelog categorization was made clearer. The\n  contributors can now mark their fragment files more\n  accurately -- by :user:`webknjaz`.\n\n  The new category tags are:\n\n      * ``bugfix``\n\n      * ``feature``\n\n      * ``deprecation``\n\n      * ``breaking`` (previously, ``removal``)\n\n      * ``doc``\n\n      * ``packaging``\n\n      * ``contrib``\n\n      * ``misc``\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8066`.\n\n\n\n\nContributor-facing changes\n--------------------------\n\n- Updated :ref:`contributing/Tests coverage <aiohttp-contributing>` section to show how we use ``codecov`` -- by :user:`Dreamsorcerer`.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`7916`.\n\n\n\n- The changelog categorization was made clearer. The\n  contributors can now mark their fragment files more\n  accurately -- by :user:`webknjaz`.\n\n  The new category tags are:\n\n      * ``bugfix``\n\n      * ``feature``\n\n      * ``deprecation``\n\n      * ``breaking`` (previously, ``removal``)\n\n      * ``doc``\n\n      * ``packaging``\n\n      * ``contrib``\n\n      * ``misc``\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`8066`.\n\n\n\n\nMiscellaneous internal changes\n------------------------------\n\n- Replaced all ``tmpdir`` fixtures with ``tmp_path`` in test suite.\n\n\n  *Related issues and pull requests on GitHub:*\n  :issue:`3551`.\n\n\n\n\n----\n\n\n3.9.1 (2023-11-26)\n==================\n\nBugfixes\n--------\n\n- Fixed importing aiohttp under PyPy on Windows.\n\n  `#7848 <https://github.com/aio-libs/aiohttp/issues/7848>`_\n\n- Fixed async concurrency safety in websocket compressor.\n\n  `#7865 <https://github.com/aio-libs/aiohttp/issues/7865>`_\n\n- Fixed ``ClientResponse.close()`` releasing the connection instead of closing.\n\n  `#7869 <https://github.com/aio-libs/aiohttp/issues/7869>`_\n\n- Fixed a regression where connection may get closed during upgrade. -- by :user:`Dreamsorcerer`\n\n  `#7879 <https://github.com/aio-libs/aiohttp/issues/7879>`_\n\n- Fixed messages being reported as upgraded without an Upgrade header in Python parser. -- by :user:`Dreamsorcerer`\n\n  `#7895 <https://github.com/aio-libs/aiohttp/issues/7895>`_\n\n\n\n----\n\n\n3.9.0 (2023-11-18)\n==================\n\nFeatures\n--------\n\n- Introduced ``AppKey`` for static typing support of ``Application`` storage.\n  See https://docs.aiohttp.org/en/stable/web_advanced.html#application-s-config\n\n  `#5864 <https://github.com/aio-libs/aiohttp/issues/5864>`_\n\n- Added a graceful shutdown period which allows pending tasks to complete before the application's cleanup is called.\n  The period can be adjusted with the ``shutdown_timeout`` parameter. -- by :user:`Dreamsorcerer`.\n  See https://docs.aiohttp.org/en/latest/web_advanced.html#graceful-shutdown\n\n  `#7188 <https://github.com/aio-libs/aiohttp/issues/7188>`_\n\n- Added `handler_cancellation <https://docs.aiohttp.org/en/stable/web_advanced.html#web-handler-cancellation>`_ parameter to cancel web handler on client disconnection. -- by :user:`mosquito`\n  This (optionally) reintroduces a feature removed in a previous release.\n  Recommended for those looking for an extra level of protection against denial-of-service attacks.\n\n  `#7056 <https://github.com/aio-libs/aiohttp/issues/7056>`_\n\n- Added support for setting response header parameters ``max_line_size`` and ``max_field_size``.\n\n  `#2304 <https://github.com/aio-libs/aiohttp/issues/2304>`_\n\n- Added ``auto_decompress`` parameter to ``ClientSession.request`` to override ``ClientSession._auto_decompress``. -- by :user:`Daste745`\n\n  `#3751 <https://github.com/aio-libs/aiohttp/issues/3751>`_\n\n- Changed ``raise_for_status`` to allow a coroutine.\n\n  `#3892 <https://github.com/aio-libs/aiohttp/issues/3892>`_\n\n- Added client brotli compression support (optional with runtime check).\n\n  `#5219 <https://github.com/aio-libs/aiohttp/issues/5219>`_\n\n- Added ``client_max_size`` to ``BaseRequest.clone()`` to allow overriding the request body size. -- :user:`anesabml`.\n\n  `#5704 <https://github.com/aio-libs/aiohttp/issues/5704>`_\n\n- Added a middleware type alias ``aiohttp.typedefs.Middleware``.\n\n  `#5898 <https://github.com/aio-libs/aiohttp/issues/5898>`_\n\n- Exported ``HTTPMove`` which can be used to catch any redirection request\n  that has a location -- :user:`dreamsorcerer`.\n\n  `#6594 <https://github.com/aio-libs/aiohttp/issues/6594>`_\n\n- Changed the ``path`` parameter in ``web.run_app()`` to accept a ``pathlib.Path`` object.\n\n  `#6839 <https://github.com/aio-libs/aiohttp/issues/6839>`_\n\n- Performance: Skipped filtering ``CookieJar`` when the jar is empty or all cookies have expired.\n\n  `#7819 <https://github.com/aio-libs/aiohttp/issues/7819>`_\n\n- Performance: Only check origin if insecure scheme and there are origins to treat as secure, in ``CookieJar.filter_cookies()``.\n\n  `#7821 <https://github.com/aio-libs/aiohttp/issues/7821>`_\n\n- Performance: Used timestamp instead of ``datetime`` to achieve faster cookie expiration in ``CookieJar``.\n\n  `#7824 <https://github.com/aio-libs/aiohttp/issues/7824>`_\n\n- Added support for passing a custom server name parameter to HTTPS connection.\n\n  `#7114 <https://github.com/aio-libs/aiohttp/issues/7114>`_\n\n- Added support for using Basic Auth credentials from :file:`.netrc` file when making HTTP requests with the\n  :py:class:`~aiohttp.ClientSession` ``trust_env`` argument is set to ``True``. -- by :user:`yuvipanda`.\n\n  `#7131 <https://github.com/aio-libs/aiohttp/issues/7131>`_\n\n- Turned access log into no-op when the logger is disabled.\n\n  `#7240 <https://github.com/aio-libs/aiohttp/issues/7240>`_\n\n- Added typing information to ``RawResponseMessage``. -- by :user:`Gobot1234`\n\n  `#7365 <https://github.com/aio-libs/aiohttp/issues/7365>`_\n\n- Removed ``async-timeout`` for Python 3.11+ (replaced with ``asyncio.timeout()`` on newer releases).\n\n  `#7502 <https://github.com/aio-libs/aiohttp/issues/7502>`_\n\n- Added support for ``brotlicffi`` as an alternative to ``brotli`` (fixing Brotli support on PyPy).\n\n  `#7611 <https://github.com/aio-libs/aiohttp/issues/7611>`_\n\n- Added ``WebSocketResponse.get_extra_info()`` to access a protocol transport's extra info.\n\n  `#7078 <https://github.com/aio-libs/aiohttp/issues/7078>`_\n\n- Allow ``link`` argument to be set to None/empty in HTTP 451 exception.\n\n  `#7689 <https://github.com/aio-libs/aiohttp/issues/7689>`_\n\n\n\nBugfixes\n--------\n\n- Implemented stripping the trailing dots from fully-qualified domain names in ``Host`` headers and TLS context when acting as an HTTP client.\n  This allows the client to connect to URLs with FQDN host name like ``https://example.com./``.\n  -- by :user:`martin-sucha`.\n\n  `#3636 <https://github.com/aio-libs/aiohttp/issues/3636>`_\n\n- Fixed client timeout not working when incoming data is always available without waiting. -- by :user:`Dreamsorcerer`.\n\n  `#5854 <https://github.com/aio-libs/aiohttp/issues/5854>`_\n\n- Fixed ``readuntil`` to work with a delimiter of more than one character.\n\n  `#6701 <https://github.com/aio-libs/aiohttp/issues/6701>`_\n\n- Added ``__repr__`` to ``EmptyStreamReader`` to avoid ``AttributeError``.\n\n  `#6916 <https://github.com/aio-libs/aiohttp/issues/6916>`_\n\n- Fixed bug when using ``TCPConnector`` with ``ttl_dns_cache=0``.\n\n  `#7014 <https://github.com/aio-libs/aiohttp/issues/7014>`_\n\n- Fixed response returned from expect handler being thrown away. -- by :user:`Dreamsorcerer`\n\n  `#7025 <https://github.com/aio-libs/aiohttp/issues/7025>`_\n\n- Avoided raising ``UnicodeDecodeError`` in multipart and in HTTP headers parsing.\n\n  `#7044 <https://github.com/aio-libs/aiohttp/issues/7044>`_\n\n- Changed ``sock_read`` timeout to start after writing has finished, avoiding read timeouts caused by an unfinished write. -- by :user:`dtrifiro`\n\n  `#7149 <https://github.com/aio-libs/aiohttp/issues/7149>`_\n\n- Fixed missing query in tracing method URLs when using ``yarl`` 1.9+.\n\n  `#7259 <https://github.com/aio-libs/aiohttp/issues/7259>`_\n\n- Changed max 32-bit timestamp to an aware datetime object, for consistency with the non-32-bit one, and to avoid a ``DeprecationWarning`` on Python 3.12.\n\n  `#7302 <https://github.com/aio-libs/aiohttp/issues/7302>`_\n\n- Fixed ``EmptyStreamReader.iter_chunks()`` never ending. -- by :user:`mind1m`\n\n  `#7616 <https://github.com/aio-libs/aiohttp/issues/7616>`_\n\n- Fixed a rare ``RuntimeError: await wasn't used with future`` exception. -- by :user:`stalkerg`\n\n  `#7785 <https://github.com/aio-libs/aiohttp/issues/7785>`_\n\n- Fixed issue with insufficient HTTP method and version validation.\n\n  `#7700 <https://github.com/aio-libs/aiohttp/issues/7700>`_\n\n- Added check to validate that absolute URIs have schemes.\n\n  `#7712 <https://github.com/aio-libs/aiohttp/issues/7712>`_\n\n- Fixed unhandled exception when Python HTTP parser encounters unpaired Unicode surrogates.\n\n  `#7715 <https://github.com/aio-libs/aiohttp/issues/7715>`_\n\n- Updated parser to disallow invalid characters in header field names and stop accepting LF as a request line separator.\n\n  `#7719 <https://github.com/aio-libs/aiohttp/issues/7719>`_\n\n- Fixed Python HTTP parser not treating 204/304/1xx as an empty body.\n\n  `#7755 <https://github.com/aio-libs/aiohttp/issues/7755>`_\n\n- Ensure empty body response for 1xx/204/304 per RFC 9112 sec 6.3.\n\n  `#7756 <https://github.com/aio-libs/aiohttp/issues/7756>`_\n\n- Fixed an issue when a client request is closed before completing a chunked payload. -- by :user:`Dreamsorcerer`\n\n  `#7764 <https://github.com/aio-libs/aiohttp/issues/7764>`_\n\n- Edge Case Handling for ResponseParser for missing reason value.\n\n  `#7776 <https://github.com/aio-libs/aiohttp/issues/7776>`_\n\n- Fixed ``ClientWebSocketResponse.close_code`` being erroneously set to ``None`` when there are concurrent async tasks receiving data and closing the connection.\n\n  `#7306 <https://github.com/aio-libs/aiohttp/issues/7306>`_\n\n- Added HTTP method validation.\n\n  `#6533 <https://github.com/aio-libs/aiohttp/issues/6533>`_\n\n- Fixed arbitrary sequence types being allowed to inject values via version parameter. -- by :user:`Dreamsorcerer`\n\n  `#7835 <https://github.com/aio-libs/aiohttp/issues/7835>`_\n\n- Performance: Fixed increase in latency with small messages from websocket compression changes.\n\n  `#7797 <https://github.com/aio-libs/aiohttp/issues/7797>`_\n\n\n\nImproved Documentation\n----------------------\n\n- Fixed the `ClientResponse.release`'s type in the doc. Changed from `comethod` to `method`.\n\n  `#5836 <https://github.com/aio-libs/aiohttp/issues/5836>`_\n\n- Added information on behavior of base_url parameter in `ClientSession`.\n\n  `#6647 <https://github.com/aio-libs/aiohttp/issues/6647>`_\n\n- Fixed `ClientResponseError` docs.\n\n  `#6700 <https://github.com/aio-libs/aiohttp/issues/6700>`_\n\n- Updated Redis code examples to follow the latest API.\n\n  `#6907 <https://github.com/aio-libs/aiohttp/issues/6907>`_\n\n- Added a note about possibly needing to update headers when using ``on_response_prepare``. -- by :user:`Dreamsorcerer`\n\n  `#7283 <https://github.com/aio-libs/aiohttp/issues/7283>`_\n\n- Completed ``trust_env`` parameter description to honor ``wss_proxy``, ``ws_proxy`` or ``no_proxy`` env.\n\n  `#7325 <https://github.com/aio-libs/aiohttp/issues/7325>`_\n\n- Expanded SSL documentation with more examples (e.g. how to use certifi). -- by :user:`Dreamsorcerer`\n\n  `#7334 <https://github.com/aio-libs/aiohttp/issues/7334>`_\n\n- Fix, update, and improve client exceptions documentation.\n\n  `#7733 <https://github.com/aio-libs/aiohttp/issues/7733>`_\n\n\n\nDeprecations and Removals\n-------------------------\n\n- Added ``shutdown_timeout`` parameter to ``BaseRunner``, while\n  deprecating ``shutdown_timeout`` parameter from ``BaseSite``. -- by :user:`Dreamsorcerer`\n\n  `#7718 <https://github.com/aio-libs/aiohttp/issues/7718>`_\n\n- Dropped Python 3.6 support.\n\n  `#6378 <https://github.com/aio-libs/aiohttp/issues/6378>`_\n\n- Dropped Python 3.7 support. -- by :user:`Dreamsorcerer`\n\n  `#7336 <https://github.com/aio-libs/aiohttp/issues/7336>`_\n\n- Removed support for abandoned ``tokio`` event loop. -- by :user:`Dreamsorcerer`\n\n  `#7281 <https://github.com/aio-libs/aiohttp/issues/7281>`_\n\n\n\nMisc\n----\n\n- Made ``print`` argument in ``run_app()`` optional.\n\n  `#3690 <https://github.com/aio-libs/aiohttp/issues/3690>`_\n\n- Improved performance of ``ceil_timeout`` in some cases.\n\n  `#6316 <https://github.com/aio-libs/aiohttp/issues/6316>`_\n\n- Changed importing Gunicorn to happen on-demand, decreasing import time by ~53%. -- :user:`Dreamsorcerer`\n\n  `#6591 <https://github.com/aio-libs/aiohttp/issues/6591>`_\n\n- Improved import time by replacing ``http.server`` with ``http.HTTPStatus``.\n\n  `#6903 <https://github.com/aio-libs/aiohttp/issues/6903>`_\n\n- Fixed annotation of ``ssl`` parameter to disallow ``True``. -- by :user:`Dreamsorcerer`.\n\n  `#7335 <https://github.com/aio-libs/aiohttp/issues/7335>`_\n\n\n----\n\n\n3.8.6 (2023-10-07)\n==================\n\nSecurity bugfixes\n-----------------\n\n- Upgraded the vendored copy of llhttp_ to v9.1.3 -- by :user:`Dreamsorcerer`\n\n  Thanks to :user:`kenballus` for reporting this, see\n  https://github.com/aio-libs/aiohttp/security/advisories/GHSA-pjjw-qhg8-p2p9.\n\n  .. _llhttp: https://llhttp.org\n\n  `#7647 <https://github.com/aio-libs/aiohttp/issues/7647>`_\n\n- Updated Python parser to comply with RFCs 9110/9112 -- by :user:`Dreamorcerer`\n\n  Thanks to :user:`kenballus` for reporting this, see\n  https://github.com/aio-libs/aiohttp/security/advisories/GHSA-gfw2-4jvh-wgfg.\n\n  `#7663 <https://github.com/aio-libs/aiohttp/issues/7663>`_\n\n\nDeprecation\n-----------\n\n- Added ``fallback_charset_resolver`` parameter in ``ClientSession`` to allow a user-supplied\n  character set detection function.\n\n  Character set detection will no longer be included in 3.9 as a default. If this feature is needed,\n  please use `fallback_charset_resolver <https://docs.aiohttp.org/en/stable/client_advanced.html#character-set-detection>`_.\n\n  `#7561 <https://github.com/aio-libs/aiohttp/issues/7561>`_\n\n\nFeatures\n--------\n\n- Enabled lenient response parsing for more flexible parsing in the client\n  (this should resolve some regressions when dealing with badly formatted HTTP responses). -- by :user:`Dreamsorcerer`\n\n  `#7490 <https://github.com/aio-libs/aiohttp/issues/7490>`_\n\n\n\nBugfixes\n--------\n\n- Fixed ``PermissionError`` when ``.netrc`` is unreadable due to permissions.\n\n  `#7237 <https://github.com/aio-libs/aiohttp/issues/7237>`_\n\n- Fixed output of parsing errors pointing to a ``\\n``. -- by :user:`Dreamsorcerer`\n\n  `#7468 <https://github.com/aio-libs/aiohttp/issues/7468>`_\n\n- Fixed ``GunicornWebWorker`` max_requests_jitter not working.\n\n  `#7518 <https://github.com/aio-libs/aiohttp/issues/7518>`_\n\n- Fixed sorting in ``filter_cookies`` to use cookie with longest path. -- by :user:`marq24`.\n\n  `#7577 <https://github.com/aio-libs/aiohttp/issues/7577>`_\n\n- Fixed display of ``BadStatusLine`` messages from llhttp_. -- by :user:`Dreamsorcerer`\n\n  `#7651 <https://github.com/aio-libs/aiohttp/issues/7651>`_\n\n\n----\n\n\n3.8.5 (2023-07-19)\n==================\n\nSecurity bugfixes\n-----------------\n\n- Upgraded the vendored copy of llhttp_ to v8.1.1 -- by :user:`webknjaz`\n  and :user:`Dreamsorcerer`.\n\n  Thanks to :user:`sethmlarson` for reporting this and providing us with\n  comprehensive reproducer, workarounds and fixing details! For more\n  information, see\n  https://github.com/aio-libs/aiohttp/security/advisories/GHSA-45c4-8wx5-qw6w.\n\n  .. _llhttp: https://llhttp.org\n\n  `#7346 <https://github.com/aio-libs/aiohttp/issues/7346>`_\n\n\nFeatures\n--------\n\n- Added information to C parser exceptions to show which character caused the error. -- by :user:`Dreamsorcerer`\n\n  `#7366 <https://github.com/aio-libs/aiohttp/issues/7366>`_\n\n\nBugfixes\n--------\n\n- Fixed a transport is :data:`None` error -- by :user:`Dreamsorcerer`.\n\n  `#3355 <https://github.com/aio-libs/aiohttp/issues/3355>`_\n\n\n----\n\n\n3.8.4 (2023-02-12)\n==================\n\nBugfixes\n--------\n\n- Fixed incorrectly overwriting cookies with the same name and domain, but different path.\n  `#6638 <https://github.com/aio-libs/aiohttp/issues/6638>`_\n- Fixed ``ConnectionResetError`` not being raised after client disconnection in SSL environments.\n  `#7180 <https://github.com/aio-libs/aiohttp/issues/7180>`_\n\n\n----\n\n\n3.8.3 (2022-09-21)\n==================\n\n.. attention::\n\n   This is the last :doc:`aiohttp <index>` release tested under\n   Python 3.6. The 3.9 stream is dropping it from the CI and the\n   distribution package metadata.\n\nBugfixes\n--------\n\n- Increased the upper boundary of the :doc:`multidict:index` dependency\n  to allow for the version 6 -- by :user:`hugovk`.\n\n  It used to be limited below version 7 in :doc:`aiohttp <index>` v3.8.1 but\n  was lowered in v3.8.2 via :pr:`6550` and never brought back, causing\n  problems with dependency pins when upgrading. :doc:`aiohttp <index>` v3.8.3\n  fixes that by recovering the original boundary of ``< 7``.\n  `#6950 <https://github.com/aio-libs/aiohttp/issues/6950>`_\n\n\n----\n\n\n3.8.2 (2022-09-20, subsequently yanked on 2022-09-21)\n=====================================================\n\nBugfixes\n--------\n\n- Support registering OPTIONS HTTP method handlers via RouteTableDef.\n  `#4663 <https://github.com/aio-libs/aiohttp/issues/4663>`_\n- Started supporting ``authority-form`` and ``absolute-form`` URLs on the server-side.\n  `#6227 <https://github.com/aio-libs/aiohttp/issues/6227>`_\n- Fix Python 3.11 alpha incompatibilities by using Cython 0.29.25\n  `#6396 <https://github.com/aio-libs/aiohttp/issues/6396>`_\n- Remove a deprecated usage of pytest.warns(None)\n  `#6663 <https://github.com/aio-libs/aiohttp/issues/6663>`_\n- Fix regression where ``asyncio.CancelledError`` occurs on client disconnection.\n  `#6719 <https://github.com/aio-libs/aiohttp/issues/6719>`_\n- Export :py:class:`~aiohttp.web.PrefixedSubAppResource` under\n  :py:mod:`aiohttp.web` -- by :user:`Dreamsorcerer`.\n\n  This fixes a regression introduced by :pr:`3469`.\n  `#6889 <https://github.com/aio-libs/aiohttp/issues/6889>`_\n- Dropped the :class:`object` type possibility from\n  the :py:attr:`aiohttp.ClientSession.timeout`\n  property return type declaration.\n  `#6917 <https://github.com/aio-libs/aiohttp/issues/6917>`_,\n  `#6923 <https://github.com/aio-libs/aiohttp/issues/6923>`_\n\n\nImproved Documentation\n----------------------\n\n- Added clarification on configuring the app object with settings such as a db connection.\n  `#4137 <https://github.com/aio-libs/aiohttp/issues/4137>`_\n- Edited the web.run_app declaration.\n  `#6401 <https://github.com/aio-libs/aiohttp/issues/6401>`_\n- Dropped the :class:`object` type possibility from\n  the :py:attr:`aiohttp.ClientSession.timeout`\n  property return type declaration.\n  `#6917 <https://github.com/aio-libs/aiohttp/issues/6917>`_,\n  `#6923 <https://github.com/aio-libs/aiohttp/issues/6923>`_\n\n\nDeprecations and Removals\n-------------------------\n\n- Drop Python 3.5 support, aiohttp works on 3.6+ now.\n  `#4046 <https://github.com/aio-libs/aiohttp/issues/4046>`_\n\n\nMisc\n----\n\n- `#6369 <https://github.com/aio-libs/aiohttp/issues/6369>`_, `#6399 <https://github.com/aio-libs/aiohttp/issues/6399>`_, `#6550 <https://github.com/aio-libs/aiohttp/issues/6550>`_, `#6708 <https://github.com/aio-libs/aiohttp/issues/6708>`_, `#6757 <https://github.com/aio-libs/aiohttp/issues/6757>`_, `#6857 <https://github.com/aio-libs/aiohttp/issues/6857>`_, `#6872 <https://github.com/aio-libs/aiohttp/issues/6872>`_\n\n\n----\n\n\n3.8.1 (2021-11-14)\n==================\n\nBugfixes\n--------\n\n- Fix the error in handling the return value of `getaddrinfo`.\n  `getaddrinfo` will return an `(int, bytes)` tuple, if CPython could not handle the address family.\n  It will cause an index out of range error in aiohttp. For example, if user compile CPython with\n  `--disable-ipv6` option, but his system enable the ipv6.\n  `#5901 <https://github.com/aio-libs/aiohttp/issues/5901>`_\n- Do not install \"examples\" as a top-level package.\n  `#6189 <https://github.com/aio-libs/aiohttp/issues/6189>`_\n- Restored ability to connect IPv6-only host.\n  `#6195 <https://github.com/aio-libs/aiohttp/issues/6195>`_\n- Remove ``Signal`` from ``__all__``, replace ``aiohttp.Signal`` with ``aiosignal.Signal`` in docs\n  `#6201 <https://github.com/aio-libs/aiohttp/issues/6201>`_\n- Made chunked encoding HTTP header check stricter.\n  `#6305 <https://github.com/aio-libs/aiohttp/issues/6305>`_\n\n\nImproved Documentation\n----------------------\n\n- update quick starter demo codes.\n  `#6240 <https://github.com/aio-libs/aiohttp/issues/6240>`_\n- Added an explanation of how tiny timeouts affect performance to the client reference document.\n  `#6274 <https://github.com/aio-libs/aiohttp/issues/6274>`_\n- Add flake8-docstrings to flake8 configuration, enable subset of checks.\n  `#6276 <https://github.com/aio-libs/aiohttp/issues/6276>`_\n- Added information on running complex applications with additional tasks/processes -- :user:`Dreamsorcerer`.\n  `#6278 <https://github.com/aio-libs/aiohttp/issues/6278>`_\n\n\nMisc\n----\n\n- `#6205 <https://github.com/aio-libs/aiohttp/issues/6205>`_\n\n\n----\n\n\n3.8.0 (2021-10-31)\n==================\n\nFeatures\n--------\n\n- Added a ``GunicornWebWorker`` feature for extending the aiohttp server configuration by allowing the 'wsgi' coroutine to return ``web.AppRunner`` object.\n  `#2988 <https://github.com/aio-libs/aiohttp/issues/2988>`_\n- Switch from ``http-parser`` to ``llhttp``\n  `#3561 <https://github.com/aio-libs/aiohttp/issues/3561>`_\n- Use Brotli instead of brotlipy\n  `#3803 <https://github.com/aio-libs/aiohttp/issues/3803>`_\n- Disable implicit switch-back to pure python mode. The build fails loudly if aiohttp\n  cannot be compiled with C Accelerators.  Use AIOHTTP_NO_EXTENSIONS=1 to explicitly\n  disable C Extensions complication and switch to Pure-Python mode.  Note that Pure-Python\n  mode is significantly slower than compiled one.\n  `#3828 <https://github.com/aio-libs/aiohttp/issues/3828>`_\n- Make access log use local time with timezone\n  `#3853 <https://github.com/aio-libs/aiohttp/issues/3853>`_\n- Implemented ``readuntil`` in ``StreamResponse``\n  `#4054 <https://github.com/aio-libs/aiohttp/issues/4054>`_\n- FileResponse now supports ETag.\n  `#4594 <https://github.com/aio-libs/aiohttp/issues/4594>`_\n- Add a request handler type alias ``aiohttp.typedefs.Handler``.\n  `#4686 <https://github.com/aio-libs/aiohttp/issues/4686>`_\n- ``AioHTTPTestCase`` is more async friendly now.\n\n  For people who use unittest and are used to use :py:exc:`~unittest.TestCase`\n  it will be easier to write new test cases like the sync version of the :py:exc:`~unittest.TestCase` class,\n  without using the decorator `@unittest_run_loop`, just `async def test_*`.\n  The only difference is that for the people using python3.7 and below a new dependency is needed, it is ``asynctestcase``.\n  `#4700 <https://github.com/aio-libs/aiohttp/issues/4700>`_\n- Add validation of HTTP header keys and values to prevent header injection.\n  `#4818 <https://github.com/aio-libs/aiohttp/issues/4818>`_\n- Add predicate to ``AbstractCookieJar.clear``.\n  Add ``AbstractCookieJar.clear_domain`` to clean all domain and subdomains cookies only.\n  `#4942 <https://github.com/aio-libs/aiohttp/issues/4942>`_\n- Add keepalive_timeout parameter to web.run_app.\n  `#5094 <https://github.com/aio-libs/aiohttp/issues/5094>`_\n- Tracing for client sent headers\n  `#5105 <https://github.com/aio-libs/aiohttp/issues/5105>`_\n- Make type hints for http parser stricter\n  `#5267 <https://github.com/aio-libs/aiohttp/issues/5267>`_\n- Add final declarations for constants.\n  `#5275 <https://github.com/aio-libs/aiohttp/issues/5275>`_\n- Switch to external frozenlist and aiosignal libraries.\n  `#5293 <https://github.com/aio-libs/aiohttp/issues/5293>`_\n- Don't send secure cookies by insecure transports.\n\n  By default, the transport is secure if https or wss scheme is used.\n  Use `CookieJar(treat_as_secure_origin=\"http://127.0.0.1\")` to override the default security checker.\n  `#5571 <https://github.com/aio-libs/aiohttp/issues/5571>`_\n- Always create a new event loop in ``aiohttp.web.run_app()``.\n  This adds better compatibility with ``asyncio.run()`` or if trying to run multiple apps in sequence.\n  `#5572 <https://github.com/aio-libs/aiohttp/issues/5572>`_\n- Add ``aiohttp.pytest_plugin.AiohttpClient`` for static typing of pytest plugin.\n  `#5585 <https://github.com/aio-libs/aiohttp/issues/5585>`_\n- Added a ``socket_factory`` argument to ``BaseTestServer``.\n  `#5844 <https://github.com/aio-libs/aiohttp/issues/5844>`_\n- Add compression strategy parameter to enable_compression method.\n  `#5909 <https://github.com/aio-libs/aiohttp/issues/5909>`_\n- Added support for Python 3.10 to Github Actions CI/CD workflows and fix the related deprecation warnings -- :user:`Hanaasagi`.\n  `#5927 <https://github.com/aio-libs/aiohttp/issues/5927>`_\n- Switched ``chardet`` to ``charset-normalizer`` for guessing the HTTP payload body encoding -- :user:`Ousret`.\n  `#5930 <https://github.com/aio-libs/aiohttp/issues/5930>`_\n- Added optional auto_decompress argument for HttpRequestParser\n  `#5957 <https://github.com/aio-libs/aiohttp/issues/5957>`_\n- Added support for HTTPS proxies to the extent CPython's\n  :py:mod:`asyncio` supports it -- by :user:`bmbouter`,\n  :user:`jborean93` and :user:`webknjaz`.\n  `#5992 <https://github.com/aio-libs/aiohttp/issues/5992>`_\n- Added ``base_url`` parameter to the initializer of :class:`~aiohttp.ClientSession`.\n  `#6013 <https://github.com/aio-libs/aiohttp/issues/6013>`_\n- Add Trove classifier and create binary wheels for 3.10. -- :user:`hugovk`.\n  `#6079 <https://github.com/aio-libs/aiohttp/issues/6079>`_\n- Started shipping platform-specific wheels with the ``musl`` tag targeting typical Alpine Linux runtimes  :user:`asvetlov`.\n  `#6139 <https://github.com/aio-libs/aiohttp/issues/6139>`_\n- Started shipping platform-specific arm64 wheels for Apple Silicon  :user:`asvetlov`.\n  `#6139 <https://github.com/aio-libs/aiohttp/issues/6139>`_\n\n\nBugfixes\n--------\n\n- Modify _drain_helper() to handle concurrent `await resp.write(...)` or `ws.send_json(...)` calls without race-condition.\n  `#2934 <https://github.com/aio-libs/aiohttp/issues/2934>`_\n- Started using `MultiLoopChildWatcher` when it's available under POSIX while setting up the test I/O loop.\n  `#3450 <https://github.com/aio-libs/aiohttp/issues/3450>`_\n- Only encode content-disposition filename parameter using percent-encoding.\n  Other parameters are encoded to quoted-string or RFC2231 extended parameter\n  value.\n  `#4012 <https://github.com/aio-libs/aiohttp/issues/4012>`_\n- Fixed HTTP client requests to honor ``no_proxy`` environment variables.\n  `#4431 <https://github.com/aio-libs/aiohttp/issues/4431>`_\n- Fix supporting WebSockets proxies configured via environment variables.\n  `#4648 <https://github.com/aio-libs/aiohttp/issues/4648>`_\n- Change return type on URLDispatcher to UrlMappingMatchInfo to improve type annotations.\n  `#4748 <https://github.com/aio-libs/aiohttp/issues/4748>`_\n- Ensure a cleanup context is cleaned up even when an exception occurs during startup.\n  `#4799 <https://github.com/aio-libs/aiohttp/issues/4799>`_\n- Added a new exception type for Unix socket client errors which provides a more useful error message.\n  `#4984 <https://github.com/aio-libs/aiohttp/issues/4984>`_\n- Remove Transfer-Encoding and Content-Type headers for 204 in StreamResponse\n  `#5106 <https://github.com/aio-libs/aiohttp/issues/5106>`_\n- Only depend on typing_extensions for Python <3.8\n  `#5107 <https://github.com/aio-libs/aiohttp/issues/5107>`_\n- Add ABNORMAL_CLOSURE and BAD_GATEWAY to WSCloseCode\n  `#5192 <https://github.com/aio-libs/aiohttp/issues/5192>`_\n- Fix cookies disappearing from HTTPExceptions.\n  `#5233 <https://github.com/aio-libs/aiohttp/issues/5233>`_\n- StaticResource prefixes no longer match URLs with a non-folder prefix. For example ``routes.static('/foo', '/foo')`` no longer matches the URL ``/foobar``. Previously, this would attempt to load the file ``/foo/ar``.\n  `#5250 <https://github.com/aio-libs/aiohttp/issues/5250>`_\n- Acquire the connection before running traces to prevent race condition.\n  `#5259 <https://github.com/aio-libs/aiohttp/issues/5259>`_\n- Add missing slots to ```_RequestContextManager`` and ``_WSRequestContextManager``\n  `#5329 <https://github.com/aio-libs/aiohttp/issues/5329>`_\n- Ensure sending a zero byte file does not throw an exception (round 2)\n  `#5380 <https://github.com/aio-libs/aiohttp/issues/5380>`_\n- Set \"text/plain\" when data is an empty string in client requests.\n  `#5392 <https://github.com/aio-libs/aiohttp/issues/5392>`_\n- Stop automatically releasing the ``ClientResponse`` object on calls to the ``ok`` property for the failed requests.\n  `#5403 <https://github.com/aio-libs/aiohttp/issues/5403>`_\n- Include query parameters from `params` keyword argument in tracing `URL`.\n  `#5432 <https://github.com/aio-libs/aiohttp/issues/5432>`_\n- Fix annotations\n  `#5466 <https://github.com/aio-libs/aiohttp/issues/5466>`_\n- Fixed the multipart POST requests processing to always release file\n  descriptors for the ``tempfile.Temporaryfile``-created\n  ``_io.BufferedRandom`` instances of files sent within multipart request\n  bodies via HTTP POST requests -- by :user:`webknjaz`.\n  `#5494 <https://github.com/aio-libs/aiohttp/issues/5494>`_\n- Fix 0 being incorrectly treated as an immediate timeout.\n  `#5527 <https://github.com/aio-libs/aiohttp/issues/5527>`_\n- Fixes failing tests when an environment variable <scheme>_proxy is set.\n  `#5554 <https://github.com/aio-libs/aiohttp/issues/5554>`_\n- Replace deprecated app handler design in ``tests/autobahn/server.py`` with call to ``web.run_app``; replace deprecated ``aiohttp.ws_connect`` calls in ``tests/autobahn/client.py`` with ``aiohttp.ClienSession.ws_connect``.\n  `#5606 <https://github.com/aio-libs/aiohttp/issues/5606>`_\n- Fixed test for ``HTTPUnauthorized`` that access the ``text`` argument. This is not used in any part of the code, so it's removed now.\n  `#5657 <https://github.com/aio-libs/aiohttp/issues/5657>`_\n- Remove incorrect default from docs\n  `#5727 <https://github.com/aio-libs/aiohttp/issues/5727>`_\n- Remove external test dependency to http://httpbin.org\n  `#5840 <https://github.com/aio-libs/aiohttp/issues/5840>`_\n- Don't cancel current task when entering a cancelled timer.\n  `#5853 <https://github.com/aio-libs/aiohttp/issues/5853>`_\n- Added ``params`` keyword argument to ``ClientSession.ws_connect``. --  :user:`hoh`.\n  `#5868 <https://github.com/aio-libs/aiohttp/issues/5868>`_\n- Uses :py:class:`~asyncio.ThreadedChildWatcher` under POSIX to allow setting up test loop in non-main thread.\n  `#5877 <https://github.com/aio-libs/aiohttp/issues/5877>`_\n- Fix the error in handling the return value of `getaddrinfo`.\n  `getaddrinfo` will return an `(int, bytes)` tuple, if CPython could not handle the address family.\n  It will cause a index out of range error in aiohttp. For example, if user compile CPython with\n  `--disable-ipv6` option but his system enable the ipv6.\n  `#5901 <https://github.com/aio-libs/aiohttp/issues/5901>`_\n- Removed the deprecated ``loop`` argument from the ``asyncio.sleep``/``gather`` calls\n  `#5905 <https://github.com/aio-libs/aiohttp/issues/5905>`_\n- Return ``None`` from ``request.if_modified_since``, ``request.if_unmodified_since``, ``request.if_range`` and ``response.last_modified`` when corresponding http date headers are invalid.\n  `#5925 <https://github.com/aio-libs/aiohttp/issues/5925>`_\n- Fix resetting `SIGCHLD` signals in Gunicorn aiohttp Worker to fix `subprocesses` that capture output having an incorrect `returncode`.\n  `#6130 <https://github.com/aio-libs/aiohttp/issues/6130>`_\n- Raise ``400: Content-Length can't be present with Transfer-Encoding`` if both ``Content-Length`` and ``Transfer-Encoding`` are sent by peer by both C and Python implementations\n  `#6182 <https://github.com/aio-libs/aiohttp/issues/6182>`_\n\n\nImproved Documentation\n----------------------\n\n- Refactored OpenAPI/Swagger aiohttp addons, added ``aio-openapi``\n  `#5326 <https://github.com/aio-libs/aiohttp/issues/5326>`_\n- Fixed docs on request cookies type, so it matches what is actually used in the code (a\n  read-only dictionary-like object).\n  `#5725 <https://github.com/aio-libs/aiohttp/issues/5725>`_\n- Documented that the HTTP client ``Authorization`` header is removed\n  on redirects to a different host or protocol.\n  `#5850 <https://github.com/aio-libs/aiohttp/issues/5850>`_\n\n\nMisc\n----\n\n- `#3927 <https://github.com/aio-libs/aiohttp/issues/3927>`_, `#4247 <https://github.com/aio-libs/aiohttp/issues/4247>`_, `#4247 <https://github.com/aio-libs/aiohttp/issues/4247>`_, `#5389 <https://github.com/aio-libs/aiohttp/issues/5389>`_, `#5457 <https://github.com/aio-libs/aiohttp/issues/5457>`_, `#5486 <https://github.com/aio-libs/aiohttp/issues/5486>`_, `#5494 <https://github.com/aio-libs/aiohttp/issues/5494>`_, `#5515 <https://github.com/aio-libs/aiohttp/issues/5515>`_, `#5625 <https://github.com/aio-libs/aiohttp/issues/5625>`_, `#5635 <https://github.com/aio-libs/aiohttp/issues/5635>`_, `#5648 <https://github.com/aio-libs/aiohttp/issues/5648>`_, `#5657 <https://github.com/aio-libs/aiohttp/issues/5657>`_, `#5890 <https://github.com/aio-libs/aiohttp/issues/5890>`_, `#5914 <https://github.com/aio-libs/aiohttp/issues/5914>`_, `#5932 <https://github.com/aio-libs/aiohttp/issues/5932>`_, `#6002 <https://github.com/aio-libs/aiohttp/issues/6002>`_, `#6045 <https://github.com/aio-libs/aiohttp/issues/6045>`_, `#6131 <https://github.com/aio-libs/aiohttp/issues/6131>`_, `#6156 <https://github.com/aio-libs/aiohttp/issues/6156>`_, `#6165 <https://github.com/aio-libs/aiohttp/issues/6165>`_, `#6166 <https://github.com/aio-libs/aiohttp/issues/6166>`_\n\n\n----\n\n\n3.7.4.post0 (2021-03-06)\n========================\n\nMisc\n----\n\n- Bumped upper bound of the ``chardet`` runtime dependency\n  to allow their v4.0 version stream.\n  `#5366 <https://github.com/aio-libs/aiohttp/issues/5366>`_\n\n\n----\n\n\n3.7.4 (2021-02-25)\n==================\n\nBugfixes\n--------\n\n- **(SECURITY BUG)** Started preventing open redirects in the\n  ``aiohttp.web.normalize_path_middleware`` middleware. For\n  more details, see\n  https://github.com/aio-libs/aiohttp/security/advisories/GHSA-v6wp-4m6f-gcjg.\n\n  Thanks to `Beast Glatisant <https://github.com/g147>`__ for\n  finding the first instance of this issue and `Jelmer Vernoo\n  <https://jelmer.uk/>`__ for reporting and tracking it down\n  in aiohttp.\n  `#5497 <https://github.com/aio-libs/aiohttp/issues/5497>`_\n- Fix interpretation difference of the pure-Python and the Cython-based\n  HTTP parsers construct a ``yarl.URL`` object for HTTP request-target.\n\n  Before this fix, the Python parser would turn the URI's absolute-path\n  for ``//some-path`` into ``/`` while the Cython code preserved it as\n  ``//some-path``. Now, both do the latter.\n  `#5498 <https://github.com/aio-libs/aiohttp/issues/5498>`_\n\n\n----\n\n\n3.7.3 (2020-11-18)\n==================\n\nFeatures\n--------\n\n- Use Brotli instead of brotlipy\n  `#3803 <https://github.com/aio-libs/aiohttp/issues/3803>`_\n- Made exceptions pickleable. Also changed the repr of some exceptions.\n  `#4077 <https://github.com/aio-libs/aiohttp/issues/4077>`_\n\n\nBugfixes\n--------\n\n- Raise a ClientResponseError instead of an AssertionError for a blank\n  HTTP Reason Phrase.\n  `#3532 <https://github.com/aio-libs/aiohttp/issues/3532>`_\n- Fix ``web_middlewares.normalize_path_middleware`` behavior for patch without slash.\n  `#3669 <https://github.com/aio-libs/aiohttp/issues/3669>`_\n- Fix overshadowing of overlapped sub-applications prefixes.\n  `#3701 <https://github.com/aio-libs/aiohttp/issues/3701>`_\n- Make `BaseConnector.close()` a coroutine and wait until the client closes all connections. Drop deprecated \"with Connector():\" syntax.\n  `#3736 <https://github.com/aio-libs/aiohttp/issues/3736>`_\n- Reset the ``sock_read`` timeout each time data is received for a ``aiohttp.client`` response.\n  `#3808 <https://github.com/aio-libs/aiohttp/issues/3808>`_\n- Fixed type annotation for add_view method of UrlDispatcher to accept any subclass of View\n  `#3880 <https://github.com/aio-libs/aiohttp/issues/3880>`_\n- Fixed querying the address families from DNS that the current host supports.\n  `#5156 <https://github.com/aio-libs/aiohttp/issues/5156>`_\n- Change return type of MultipartReader.__aiter__() and BodyPartReader.__aiter__() to AsyncIterator.\n  `#5163 <https://github.com/aio-libs/aiohttp/issues/5163>`_\n- Provide x86 Windows wheels.\n  `#5230 <https://github.com/aio-libs/aiohttp/issues/5230>`_\n\n\nImproved Documentation\n----------------------\n\n- Add documentation for ``aiohttp.web.FileResponse``.\n  `#3958 <https://github.com/aio-libs/aiohttp/issues/3958>`_\n- Removed deprecation warning in tracing example docs\n  `#3964 <https://github.com/aio-libs/aiohttp/issues/3964>`_\n- Fixed wrong \"Usage\" docstring of ``aiohttp.client.request``.\n  `#4603 <https://github.com/aio-libs/aiohttp/issues/4603>`_\n- Add aiohttp-pydantic to third party libraries\n  `#5228 <https://github.com/aio-libs/aiohttp/issues/5228>`_\n\n\nMisc\n----\n\n- `#4102 <https://github.com/aio-libs/aiohttp/issues/4102>`_\n\n\n----\n\n\n3.7.2 (2020-10-27)\n==================\n\nBugfixes\n--------\n\n- Fixed static files handling for loops without ``.sendfile()`` support\n  `#5149 <https://github.com/aio-libs/aiohttp/issues/5149>`_\n\n\n----\n\n\n3.7.1 (2020-10-25)\n==================\n\nBugfixes\n--------\n\n- Fixed a type error caused by the conditional import of `Protocol`.\n  `#5111 <https://github.com/aio-libs/aiohttp/issues/5111>`_\n- Server doesn't send Content-Length for 1xx or 204\n  `#4901 <https://github.com/aio-libs/aiohttp/issues/4901>`_\n- Fix run_app typing\n  `#4957 <https://github.com/aio-libs/aiohttp/issues/4957>`_\n- Always require ``typing_extensions`` library.\n  `#5107 <https://github.com/aio-libs/aiohttp/issues/5107>`_\n- Fix a variable-shadowing bug causing `ThreadedResolver.resolve` to\n  return the resolved IP as the ``hostname`` in each record, which prevented\n  validation of HTTPS connections.\n  `#5110 <https://github.com/aio-libs/aiohttp/issues/5110>`_\n- Added annotations to all public attributes.\n  `#5115 <https://github.com/aio-libs/aiohttp/issues/5115>`_\n- Fix flaky test_when_timeout_smaller_second\n  `#5116 <https://github.com/aio-libs/aiohttp/issues/5116>`_\n- Ensure sending a zero byte file does not throw an exception\n  `#5124 <https://github.com/aio-libs/aiohttp/issues/5124>`_\n- Fix a bug in ``web.run_app()`` about Python version checking on Windows\n  `#5127 <https://github.com/aio-libs/aiohttp/issues/5127>`_\n\n\n----\n\n\n3.7.0 (2020-10-24)\n==================\n\nFeatures\n--------\n\n- Response headers are now prepared prior to running ``on_response_prepare`` hooks, directly before headers are sent to the client.\n  `#1958 <https://github.com/aio-libs/aiohttp/issues/1958>`_\n- Add a ``quote_cookie`` option to ``CookieJar``, a way to skip quotation wrapping of cookies containing special characters.\n  `#2571 <https://github.com/aio-libs/aiohttp/issues/2571>`_\n- Call ``AccessLogger.log`` with the current exception available from ``sys.exc_info()``.\n  `#3557 <https://github.com/aio-libs/aiohttp/issues/3557>`_\n- `web.UrlDispatcher.add_routes` and `web.Application.add_routes` return a list\n  of registered `AbstractRoute` instances. `AbstractRouteDef.register` (and all\n  subclasses) return a list of registered resources registered resource.\n  `#3866 <https://github.com/aio-libs/aiohttp/issues/3866>`_\n- Added properties of default ClientSession params to ClientSession class so it is available for introspection\n  `#3882 <https://github.com/aio-libs/aiohttp/issues/3882>`_\n- Don't cancel web handler on peer disconnection, raise `OSError` on reading/writing instead.\n  `#4080 <https://github.com/aio-libs/aiohttp/issues/4080>`_\n- Implement BaseRequest.get_extra_info() to access a protocol transports' extra info.\n  `#4189 <https://github.com/aio-libs/aiohttp/issues/4189>`_\n- Added `ClientSession.timeout` property.\n  `#4191 <https://github.com/aio-libs/aiohttp/issues/4191>`_\n- allow use of SameSite in cookies.\n  `#4224 <https://github.com/aio-libs/aiohttp/issues/4224>`_\n- Use ``loop.sendfile()`` instead of custom implementation if available.\n  `#4269 <https://github.com/aio-libs/aiohttp/issues/4269>`_\n- Apply SO_REUSEADDR to test server's socket.\n  `#4393 <https://github.com/aio-libs/aiohttp/issues/4393>`_\n- Use .raw_host instead of slower .host in client API\n  `#4402 <https://github.com/aio-libs/aiohttp/issues/4402>`_\n- Allow configuring the buffer size of input stream by passing ``read_bufsize`` argument.\n  `#4453 <https://github.com/aio-libs/aiohttp/issues/4453>`_\n- Pass tests on Python 3.8 for Windows.\n  `#4513 <https://github.com/aio-libs/aiohttp/issues/4513>`_\n- Add `method` and `url` attributes to `TraceRequestChunkSentParams` and `TraceResponseChunkReceivedParams`.\n  `#4674 <https://github.com/aio-libs/aiohttp/issues/4674>`_\n- Add ClientResponse.ok property for checking status code under 400.\n  `#4711 <https://github.com/aio-libs/aiohttp/issues/4711>`_\n- Don't ceil timeouts that are smaller than 5 seconds.\n  `#4850 <https://github.com/aio-libs/aiohttp/issues/4850>`_\n- TCPSite now listens by default on all interfaces instead of just IPv4 when `None` is passed in as the host.\n  `#4894 <https://github.com/aio-libs/aiohttp/issues/4894>`_\n- Bump ``http_parser`` to 2.9.4\n  `#5070 <https://github.com/aio-libs/aiohttp/issues/5070>`_\n\n\nBugfixes\n--------\n\n- Fix keepalive connections not being closed in time\n  `#3296 <https://github.com/aio-libs/aiohttp/issues/3296>`_\n- Fix failed websocket handshake leaving connection hanging.\n  `#3380 <https://github.com/aio-libs/aiohttp/issues/3380>`_\n- Fix tasks cancellation order on exit. The run_app task needs to be cancelled first for cleanup hooks to run with all tasks intact.\n  `#3805 <https://github.com/aio-libs/aiohttp/issues/3805>`_\n- Don't start heartbeat until _writer is set\n  `#4062 <https://github.com/aio-libs/aiohttp/issues/4062>`_\n- Fix handling of multipart file uploads without a content type.\n  `#4089 <https://github.com/aio-libs/aiohttp/issues/4089>`_\n- Preserve view handler function attributes across middlewares\n  `#4174 <https://github.com/aio-libs/aiohttp/issues/4174>`_\n- Fix the string representation of ``ServerDisconnectedError``.\n  `#4175 <https://github.com/aio-libs/aiohttp/issues/4175>`_\n- Raising RuntimeError when trying to get encoding from not read body\n  `#4214 <https://github.com/aio-libs/aiohttp/issues/4214>`_\n- Remove warning messages from noop.\n  `#4282 <https://github.com/aio-libs/aiohttp/issues/4282>`_\n- Raise ClientPayloadError if FormData re-processed.\n  `#4345 <https://github.com/aio-libs/aiohttp/issues/4345>`_\n- Fix a warning about unfinished task in ``web_protocol.py``\n  `#4408 <https://github.com/aio-libs/aiohttp/issues/4408>`_\n- Fixed 'deflate' compression. According to RFC 2616 now.\n  `#4506 <https://github.com/aio-libs/aiohttp/issues/4506>`_\n- Fixed OverflowError on platforms with 32-bit time_t\n  `#4515 <https://github.com/aio-libs/aiohttp/issues/4515>`_\n- Fixed request.body_exists returns wrong value for methods without body.\n  `#4528 <https://github.com/aio-libs/aiohttp/issues/4528>`_\n- Fix connecting to link-local IPv6 addresses.\n  `#4554 <https://github.com/aio-libs/aiohttp/issues/4554>`_\n- Fix a problem with connection waiters that are never awaited.\n  `#4562 <https://github.com/aio-libs/aiohttp/issues/4562>`_\n- Always make sure transport is not closing before reuse a connection.\n\n  Reuse a protocol based on keepalive in headers is unreliable.\n  For example, uWSGI will not support keepalive even it serves a\n  HTTP 1.1 request, except explicitly configure uWSGI with a\n  ``--http-keepalive`` option.\n\n  Servers designed like uWSGI could cause aiohttp intermittently\n  raise a ConnectionResetException when the protocol poll runs\n  out and some protocol is reused.\n  `#4587 <https://github.com/aio-libs/aiohttp/issues/4587>`_\n- Handle the last CRLF correctly even if it is received via separate TCP segment.\n  `#4630 <https://github.com/aio-libs/aiohttp/issues/4630>`_\n- Fix the register_resource function to validate route name before splitting it so that route name can include python keywords.\n  `#4691 <https://github.com/aio-libs/aiohttp/issues/4691>`_\n- Improve typing annotations for ``web.Request``, ``aiohttp.ClientResponse`` and\n  ``multipart`` module.\n  `#4736 <https://github.com/aio-libs/aiohttp/issues/4736>`_\n- Fix resolver task is not awaited when connector is cancelled\n  `#4795 <https://github.com/aio-libs/aiohttp/issues/4795>`_\n- Fix a bug \"Aiohttp doesn't return any error on invalid request methods\"\n  `#4798 <https://github.com/aio-libs/aiohttp/issues/4798>`_\n- Fix HEAD requests for static content.\n  `#4809 <https://github.com/aio-libs/aiohttp/issues/4809>`_\n- Fix incorrect size calculation for memoryview\n  `#4890 <https://github.com/aio-libs/aiohttp/issues/4890>`_\n- Add HTTPMove to _all__.\n  `#4897 <https://github.com/aio-libs/aiohttp/issues/4897>`_\n- Fixed the type annotations in the ``tracing`` module.\n  `#4912 <https://github.com/aio-libs/aiohttp/issues/4912>`_\n- Fix typing for multipart ``__aiter__``.\n  `#4931 <https://github.com/aio-libs/aiohttp/issues/4931>`_\n- Fix for race condition on connections in BaseConnector that leads to exceeding the connection limit.\n  `#4936 <https://github.com/aio-libs/aiohttp/issues/4936>`_\n- Add forced UTF-8 encoding for ``application/rdap+json`` responses.\n  `#4938 <https://github.com/aio-libs/aiohttp/issues/4938>`_\n- Fix inconsistency between Python and C http request parsers in parsing pct-encoded URL.\n  `#4972 <https://github.com/aio-libs/aiohttp/issues/4972>`_\n- Fix connection closing issue in HEAD request.\n  `#5012 <https://github.com/aio-libs/aiohttp/issues/5012>`_\n- Fix type hint on BaseRunner.addresses (from ``List[str]`` to ``List[Any]``)\n  `#5086 <https://github.com/aio-libs/aiohttp/issues/5086>`_\n- Make `web.run_app()` more responsive to Ctrl+C on Windows for Python < 3.8. It slightly\n  increases CPU load as a side effect.\n  `#5098 <https://github.com/aio-libs/aiohttp/issues/5098>`_\n\n\nImproved Documentation\n----------------------\n\n- Fix example code in client quick-start\n  `#3376 <https://github.com/aio-libs/aiohttp/issues/3376>`_\n- Updated the docs so there is no contradiction in ``ttl_dns_cache`` default value\n  `#3512 <https://github.com/aio-libs/aiohttp/issues/3512>`_\n- Add 'Deploy with SSL' to docs.\n  `#4201 <https://github.com/aio-libs/aiohttp/issues/4201>`_\n- Change typing of the secure argument on StreamResponse.set_cookie from ``Optional[str]`` to ``Optional[bool]``\n  `#4204 <https://github.com/aio-libs/aiohttp/issues/4204>`_\n- Changes ``ttl_dns_cache`` type from int to Optional[int].\n  `#4270 <https://github.com/aio-libs/aiohttp/issues/4270>`_\n- Simplify README hello word example and add a documentation page for people coming from requests.\n  `#4272 <https://github.com/aio-libs/aiohttp/issues/4272>`_\n- Improve some code examples in the documentation involving websockets and starting a simple HTTP site with an AppRunner.\n  `#4285 <https://github.com/aio-libs/aiohttp/issues/4285>`_\n- Fix typo in code example in Multipart docs\n  `#4312 <https://github.com/aio-libs/aiohttp/issues/4312>`_\n- Fix code example in Multipart section.\n  `#4314 <https://github.com/aio-libs/aiohttp/issues/4314>`_\n- Update contributing guide so new contributors read the most recent version of that guide. Update command used to create test coverage reporting.\n  `#4810 <https://github.com/aio-libs/aiohttp/issues/4810>`_\n- Spelling: Change \"canonize\" to \"canonicalize\".\n  `#4986 <https://github.com/aio-libs/aiohttp/issues/4986>`_\n- Add ``aiohttp-sse-client`` library to third party usage list.\n  `#5084 <https://github.com/aio-libs/aiohttp/issues/5084>`_\n\n\nMisc\n----\n\n- `#2856 <https://github.com/aio-libs/aiohttp/issues/2856>`_, `#4218 <https://github.com/aio-libs/aiohttp/issues/4218>`_, `#4250 <https://github.com/aio-libs/aiohttp/issues/4250>`_\n\n\n----\n\n\n3.6.3 (2020-10-12)\n==================\n\nBugfixes\n--------\n\n- Pin yarl to ``<1.6.0`` to avoid buggy behavior that will be fixed by the next aiohttp\n  release.\n\n3.6.2 (2019-10-09)\n==================\n\nFeatures\n--------\n\n- Made exceptions pickleable. Also changed the repr of some exceptions.\n  `#4077 <https://github.com/aio-libs/aiohttp/issues/4077>`_\n- Use ``Iterable`` type hint instead of ``Sequence`` for ``Application`` *middleware*\n  parameter.  `#4125 <https://github.com/aio-libs/aiohttp/issues/4125>`_\n\n\nBugfixes\n--------\n\n- Reset the ``sock_read`` timeout each time data is received for a\n  ``aiohttp.ClientResponse``.  `#3808\n  <https://github.com/aio-libs/aiohttp/issues/3808>`_\n- Fix handling of expired cookies so they are not stored in CookieJar.\n  `#4063 <https://github.com/aio-libs/aiohttp/issues/4063>`_\n- Fix misleading message in the string representation of ``ClientConnectorError``;\n  ``self.ssl == None`` means default SSL context, not SSL disabled `#4097\n  <https://github.com/aio-libs/aiohttp/issues/4097>`_\n- Don't clobber HTTP status when using FileResponse.\n  `#4106 <https://github.com/aio-libs/aiohttp/issues/4106>`_\n\n\nImproved Documentation\n----------------------\n\n- Added minimal required logging configuration to logging documentation.\n  `#2469 <https://github.com/aio-libs/aiohttp/issues/2469>`_\n- Update docs to reflect proxy support.\n  `#4100 <https://github.com/aio-libs/aiohttp/issues/4100>`_\n- Fix typo in code example in testing docs.\n  `#4108 <https://github.com/aio-libs/aiohttp/issues/4108>`_\n\n\nMisc\n----\n\n- `#4102 <https://github.com/aio-libs/aiohttp/issues/4102>`_\n\n\n----\n\n\n3.6.1 (2019-09-19)\n==================\n\nFeatures\n--------\n\n- Compatibility with Python 3.8.\n  `#4056 <https://github.com/aio-libs/aiohttp/issues/4056>`_\n\n\nBugfixes\n--------\n\n- correct some exception string format\n  `#4068 <https://github.com/aio-libs/aiohttp/issues/4068>`_\n- Emit a warning when ``ssl.OP_NO_COMPRESSION`` is\n  unavailable because the runtime is built against\n  an outdated OpenSSL.\n  `#4052 <https://github.com/aio-libs/aiohttp/issues/4052>`_\n- Update multidict requirement to >= 4.5\n  `#4057 <https://github.com/aio-libs/aiohttp/issues/4057>`_\n\n\nImproved Documentation\n----------------------\n\n- Provide pytest-aiohttp namespace for pytest fixtures in docs.\n  `#3723 <https://github.com/aio-libs/aiohttp/issues/3723>`_\n\n\n----\n\n\n3.6.0 (2019-09-06)\n==================\n\nFeatures\n--------\n\n- Add support for Named Pipes (Site and Connector) under Windows. This feature requires\n  Proactor event loop to work.  `#3629\n  <https://github.com/aio-libs/aiohttp/issues/3629>`_\n- Removed ``Transfer-Encoding: chunked`` header from websocket responses to be\n  compatible with more http proxy servers.  `#3798\n  <https://github.com/aio-libs/aiohttp/issues/3798>`_\n- Accept non-GET request for starting websocket handshake on server side.\n  `#3980 <https://github.com/aio-libs/aiohttp/issues/3980>`_\n\n\nBugfixes\n--------\n\n- Raise a ClientResponseError instead of an AssertionError for a blank\n  HTTP Reason Phrase.\n  `#3532 <https://github.com/aio-libs/aiohttp/issues/3532>`_\n- Fix an issue where cookies would sometimes not be set during a redirect.\n  `#3576 <https://github.com/aio-libs/aiohttp/issues/3576>`_\n- Change normalize_path_middleware to use '308 Permanent Redirect' instead of 301.\n\n  This behavior should prevent clients from being unable to use PUT/POST\n  methods on endpoints that are redirected because of a trailing slash.\n  `#3579 <https://github.com/aio-libs/aiohttp/issues/3579>`_\n- Drop the processed task from ``all_tasks()`` list early. It prevents logging about a\n  task with unhandled exception when the server is used in conjunction with\n  ``asyncio.run()``.  `#3587 <https://github.com/aio-libs/aiohttp/issues/3587>`_\n- ``Signal`` type annotation changed from ``Signal[Callable[['TraceConfig'],\n  Awaitable[None]]]`` to ``Signal[Callable[ClientSession, SimpleNamespace, ...]``.\n  `#3595 <https://github.com/aio-libs/aiohttp/issues/3595>`_\n- Use sanitized URL as Location header in redirects\n  `#3614 <https://github.com/aio-libs/aiohttp/issues/3614>`_\n- Improve typing annotations for multipart.py along with changes required\n  by mypy in files that references multipart.py.\n  `#3621 <https://github.com/aio-libs/aiohttp/issues/3621>`_\n- Close session created inside ``aiohttp.request`` when unhandled exception occurs\n  `#3628 <https://github.com/aio-libs/aiohttp/issues/3628>`_\n- Cleanup per-chunk data in generic data read. Memory leak fixed.\n  `#3631 <https://github.com/aio-libs/aiohttp/issues/3631>`_\n- Use correct type for add_view and family\n  `#3633 <https://github.com/aio-libs/aiohttp/issues/3633>`_\n- Fix _keepalive field in __slots__ of ``RequestHandler``.\n  `#3644 <https://github.com/aio-libs/aiohttp/issues/3644>`_\n- Properly handle ConnectionResetError, to silence the \"Cannot write to closing\n  transport\" exception when clients disconnect uncleanly.\n  `#3648 <https://github.com/aio-libs/aiohttp/issues/3648>`_\n- Suppress pytest warnings due to ``test_utils`` classes\n  `#3660 <https://github.com/aio-libs/aiohttp/issues/3660>`_\n- Fix overshadowing of overlapped sub-application prefixes.\n  `#3701 <https://github.com/aio-libs/aiohttp/issues/3701>`_\n- Fixed return type annotation for WSMessage.json()\n  `#3720 <https://github.com/aio-libs/aiohttp/issues/3720>`_\n- Properly expose TooManyRedirects publicly as documented.\n  `#3818 <https://github.com/aio-libs/aiohttp/issues/3818>`_\n- Fix missing brackets for IPv6 in proxy CONNECT request\n  `#3841 <https://github.com/aio-libs/aiohttp/issues/3841>`_\n- Make the signature of ``aiohttp.test_utils.TestClient.request`` match\n  ``asyncio.ClientSession.request`` according to the docs `#3852\n  <https://github.com/aio-libs/aiohttp/issues/3852>`_\n- Use correct style for re-exported imports, makes mypy ``--strict`` mode happy.\n  `#3868 <https://github.com/aio-libs/aiohttp/issues/3868>`_\n- Fixed type annotation for add_view method of UrlDispatcher to accept any subclass of\n  View `#3880 <https://github.com/aio-libs/aiohttp/issues/3880>`_\n- Made cython HTTP parser set Reason-Phrase of the response to an empty string if it is\n  missing.  `#3906 <https://github.com/aio-libs/aiohttp/issues/3906>`_\n- Add URL to the string representation of ClientResponseError.\n  `#3959 <https://github.com/aio-libs/aiohttp/issues/3959>`_\n- Accept ``istr`` keys in ``LooseHeaders`` type hints.\n  `#3976 <https://github.com/aio-libs/aiohttp/issues/3976>`_\n- Fixed race conditions in _resolve_host caching and throttling when tracing is enabled.\n  `#4013 <https://github.com/aio-libs/aiohttp/issues/4013>`_\n- For URLs like \"unix://localhost/...\" set Host HTTP header to \"localhost\" instead of\n  \"localhost:None\".  `#4039 <https://github.com/aio-libs/aiohttp/issues/4039>`_\n\n\nImproved Documentation\n----------------------\n\n- Modify documentation for Background Tasks to remove deprecated usage of event loop.\n  `#3526 <https://github.com/aio-libs/aiohttp/issues/3526>`_\n- use ``if __name__ == '__main__':`` in server examples.\n  `#3775 <https://github.com/aio-libs/aiohttp/issues/3775>`_\n- Update documentation reference to the default access logger.\n  `#3783 <https://github.com/aio-libs/aiohttp/issues/3783>`_\n- Improve documentation for ``web.BaseRequest.path`` and ``web.BaseRequest.raw_path``.\n  `#3791 <https://github.com/aio-libs/aiohttp/issues/3791>`_\n- Removed deprecation warning in tracing example docs\n  `#3964 <https://github.com/aio-libs/aiohttp/issues/3964>`_\n\n\n----\n\n\n3.5.4 (2019-01-12)\n==================\n\nBugfixes\n--------\n\n- Fix stream ``.read()`` / ``.readany()`` / ``.iter_any()`` which used to return a\n  partial content only in case of compressed content\n  `#3525 <https://github.com/aio-libs/aiohttp/issues/3525>`_\n\n\n3.5.3 (2019-01-10)\n==================\n\nBugfixes\n--------\n\n- Fix type stubs for ``aiohttp.web.run_app(access_log=True)`` and fix edge case of\n  ``access_log=True`` and the event loop being in debug mode.  `#3504\n  <https://github.com/aio-libs/aiohttp/issues/3504>`_\n- Fix ``aiohttp.ClientTimeout`` type annotations to accept ``None`` for fields\n  `#3511 <https://github.com/aio-libs/aiohttp/issues/3511>`_\n- Send custom per-request cookies even if session jar is empty\n  `#3515 <https://github.com/aio-libs/aiohttp/issues/3515>`_\n- Restore Linux binary wheels publishing on PyPI\n\n----\n\n\n3.5.2 (2019-01-08)\n==================\n\nFeatures\n--------\n\n- ``FileResponse`` from ``web_fileresponse.py`` uses a ``ThreadPoolExecutor`` to work\n  with files asynchronously.  I/O based payloads from ``payload.py`` uses a\n  ``ThreadPoolExecutor`` to work with I/O objects asynchronously.  `#3313\n  <https://github.com/aio-libs/aiohttp/issues/3313>`_\n- Internal Server Errors in plain text if the browser does not support HTML.\n  `#3483 <https://github.com/aio-libs/aiohttp/issues/3483>`_\n\n\nBugfixes\n--------\n\n- Preserve MultipartWriter parts headers on write.  Refactor the way how\n  ``Payload.headers`` are handled. Payload instances now always have headers and\n  Content-Type defined.  Fix Payload Content-Disposition header reset after initial\n  creation.  `#3035 <https://github.com/aio-libs/aiohttp/issues/3035>`_\n- Log suppressed exceptions in ``GunicornWebWorker``.\n  `#3464 <https://github.com/aio-libs/aiohttp/issues/3464>`_\n- Remove wildcard imports.\n  `#3468 <https://github.com/aio-libs/aiohttp/issues/3468>`_\n- Use the same task for app initialization and web server handling in gunicorn workers.\n  It allows to use Python3.7 context vars smoothly.\n  `#3471 <https://github.com/aio-libs/aiohttp/issues/3471>`_\n- Fix handling of chunked+gzipped response when first chunk does not give uncompressed\n  data `#3477 <https://github.com/aio-libs/aiohttp/issues/3477>`_\n- Replace ``collections.MutableMapping`` with ``collections.abc.MutableMapping`` to\n  avoid a deprecation warning.  `#3480\n  <https://github.com/aio-libs/aiohttp/issues/3480>`_\n- ``Payload.size`` type annotation changed from ``Optional[float]`` to\n  ``Optional[int]``.  `#3484 <https://github.com/aio-libs/aiohttp/issues/3484>`_\n- Ignore done tasks when cancels pending activities on ``web.run_app`` finalization.\n  `#3497 <https://github.com/aio-libs/aiohttp/issues/3497>`_\n\n\nImproved Documentation\n----------------------\n\n- Add documentation for ``aiohttp.web.HTTPException``.\n  `#3490 <https://github.com/aio-libs/aiohttp/issues/3490>`_\n\n\nMisc\n----\n\n- `#3487 <https://github.com/aio-libs/aiohttp/issues/3487>`_\n\n\n----\n\n\n3.5.1 (2018-12-24)\n====================\n\n- Fix a regression about ``ClientSession._requote_redirect_url`` modification in debug\n  mode.\n\n3.5.0 (2018-12-22)\n====================\n\nFeatures\n--------\n\n- The library type annotations are checked in strict mode now.\n- Add support for setting cookies for individual request (`#2387\n  <https://github.com/aio-libs/aiohttp/pull/2387>`_)\n- Application.add_domain implementation (`#2809\n  <https://github.com/aio-libs/aiohttp/pull/2809>`_)\n- The default ``app`` in the request returned by ``test_utils.make_mocked_request`` can\n  now have objects assigned to it and retrieved using the ``[]`` operator. (`#3174\n  <https://github.com/aio-libs/aiohttp/pull/3174>`_)\n- Make ``request.url`` accessible when transport is closed. (`#3177\n  <https://github.com/aio-libs/aiohttp/pull/3177>`_)\n- Add ``zlib_executor_size`` argument to ``Response`` constructor to allow compression\n  to run in a background executor to avoid blocking the main thread and potentially\n  triggering health check failures. (`#3205\n  <https://github.com/aio-libs/aiohttp/pull/3205>`_)\n- Enable users to set ``ClientTimeout`` in ``aiohttp.request`` (`#3213\n  <https://github.com/aio-libs/aiohttp/pull/3213>`_)\n- Don't raise a warning if ``NETRC`` environment variable is not set and ``~/.netrc``\n  file doesn't exist. (`#3267 <https://github.com/aio-libs/aiohttp/pull/3267>`_)\n- Add default logging handler to web.run_app If the ``Application.debug``` flag is set\n  and the default logger ``aiohttp.access`` is used, access logs will now be output\n  using a *stderr* ``StreamHandler`` if no handlers are attached. Furthermore, if the\n  default logger has no log level set, the log level will be set to ``DEBUG``. (`#3324\n  <https://github.com/aio-libs/aiohttp/pull/3324>`_)\n- Add method argument to ``session.ws_connect()``.  Sometimes server API requires a\n  different HTTP method for WebSocket connection establishment.  For example, ``Docker\n  exec`` needs POST. (`#3378 <https://github.com/aio-libs/aiohttp/pull/3378>`_)\n- Create a task per request handling. (`#3406\n  <https://github.com/aio-libs/aiohttp/pull/3406>`_)\n\n\nBugfixes\n--------\n\n- Enable passing ``access_log_class`` via ``handler_args`` (`#3158\n  <https://github.com/aio-libs/aiohttp/pull/3158>`_)\n- Return empty bytes with end-of-chunk marker in empty stream reader. (`#3186\n  <https://github.com/aio-libs/aiohttp/pull/3186>`_)\n- Accept ``CIMultiDictProxy`` instances for ``headers`` argument in ``web.Response``\n  constructor. (`#3207 <https://github.com/aio-libs/aiohttp/pull/3207>`_)\n- Don't uppercase HTTP method in parser (`#3233\n  <https://github.com/aio-libs/aiohttp/pull/3233>`_)\n- Make method match regexp RFC-7230 compliant (`#3235\n  <https://github.com/aio-libs/aiohttp/pull/3235>`_)\n- Add ``app.pre_frozen`` state to properly handle startup signals in\n  sub-applications. (`#3237 <https://github.com/aio-libs/aiohttp/pull/3237>`_)\n- Enhanced parsing and validation of helpers.BasicAuth.decode. (`#3239\n  <https://github.com/aio-libs/aiohttp/pull/3239>`_)\n- Change imports from collections module in preparation for 3.8. (`#3258\n  <https://github.com/aio-libs/aiohttp/pull/3258>`_)\n- Ensure Host header is added first to ClientRequest to better replicate browser (`#3265\n  <https://github.com/aio-libs/aiohttp/pull/3265>`_)\n- Fix forward compatibility with Python 3.8: importing ABCs directly from the\n  collections module will not be supported anymore. (`#3273\n  <https://github.com/aio-libs/aiohttp/pull/3273>`_)\n- Keep the query string by ``normalize_path_middleware``. (`#3278\n  <https://github.com/aio-libs/aiohttp/pull/3278>`_)\n- Fix missing parameter ``raise_for_status`` for aiohttp.request() (`#3290\n  <https://github.com/aio-libs/aiohttp/pull/3290>`_)\n- Bracket IPv6 addresses in the HOST header (`#3304\n  <https://github.com/aio-libs/aiohttp/pull/3304>`_)\n- Fix default message for server ping and pong frames. (`#3308\n  <https://github.com/aio-libs/aiohttp/pull/3308>`_)\n- Fix tests/test_connector.py typo and tests/autobahn/server.py duplicate loop\n  def. (`#3337 <https://github.com/aio-libs/aiohttp/pull/3337>`_)\n- Fix false-negative indicator end_of_HTTP_chunk in StreamReader.readchunk function\n  (`#3361 <https://github.com/aio-libs/aiohttp/pull/3361>`_)\n- Release HTTP response before raising status exception (`#3364\n  <https://github.com/aio-libs/aiohttp/pull/3364>`_)\n- Fix task cancellation when ``sendfile()`` syscall is used by static file\n  handling. (`#3383 <https://github.com/aio-libs/aiohttp/pull/3383>`_)\n- Fix stack trace for ``asyncio.TimeoutError`` which was not logged, when it is caught\n  in the handler. (`#3414 <https://github.com/aio-libs/aiohttp/pull/3414>`_)\n\n\nImproved Documentation\n----------------------\n\n- Improve documentation of ``Application.make_handler`` parameters. (`#3152\n  <https://github.com/aio-libs/aiohttp/pull/3152>`_)\n- Fix BaseRequest.raw_headers doc. (`#3215\n  <https://github.com/aio-libs/aiohttp/pull/3215>`_)\n- Fix typo in TypeError exception reason in ``web.Application._handle`` (`#3229\n  <https://github.com/aio-libs/aiohttp/pull/3229>`_)\n- Make server access log format placeholder %b documentation reflect\n  behavior and docstring. (`#3307 <https://github.com/aio-libs/aiohttp/pull/3307>`_)\n\n\nDeprecations and Removals\n-------------------------\n\n- Deprecate modification of ``session.requote_redirect_url`` (`#2278\n  <https://github.com/aio-libs/aiohttp/pull/2278>`_)\n- Deprecate ``stream.unread_data()`` (`#3260\n  <https://github.com/aio-libs/aiohttp/pull/3260>`_)\n- Deprecated use of boolean in ``resp.enable_compression()`` (`#3318\n  <https://github.com/aio-libs/aiohttp/pull/3318>`_)\n- Encourage creation of aiohttp public objects inside a coroutine (`#3331\n  <https://github.com/aio-libs/aiohttp/pull/3331>`_)\n- Drop dead ``Connection.detach()`` and ``Connection.writer``. Both methods were broken\n  for more than 2 years. (`#3358 <https://github.com/aio-libs/aiohttp/pull/3358>`_)\n- Deprecate ``app.loop``, ``request.loop``, ``client.loop`` and ``connector.loop``\n  properties. (`#3374 <https://github.com/aio-libs/aiohttp/pull/3374>`_)\n- Deprecate explicit debug argument. Use asyncio debug mode instead. (`#3381\n  <https://github.com/aio-libs/aiohttp/pull/3381>`_)\n- Deprecate body parameter in HTTPException (and derived classes) constructor. (`#3385\n  <https://github.com/aio-libs/aiohttp/pull/3385>`_)\n- Deprecate bare connector close, use ``async with connector:`` and ``await\n  connector.close()`` instead. (`#3417\n  <https://github.com/aio-libs/aiohttp/pull/3417>`_)\n- Deprecate obsolete ``read_timeout`` and ``conn_timeout`` in ``ClientSession``\n  constructor. (`#3438 <https://github.com/aio-libs/aiohttp/pull/3438>`_)\n\n\nMisc\n----\n\n- #3341, #3351\n\n\n\n\n----\n\n\n3.4.4 (2018-09-05)\n==================\n\n- Fix installation from sources when compiling toolkit is not available (`#3241 <https://github.com/aio-libs/aiohttp/pull/3241>`_)\n\n\n\n\n----\n\n\n3.4.3 (2018-09-04)\n==================\n\n- Add ``app.pre_frozen`` state to properly handle startup signals in sub-applications. (`#3237 <https://github.com/aio-libs/aiohttp/pull/3237>`_)\n\n\n\n\n----\n\n\n3.4.2 (2018-09-01)\n==================\n\n- Fix ``iter_chunks`` type annotation (`#3230 <https://github.com/aio-libs/aiohttp/pull/3230>`_)\n\n\n\n\n----\n\n\n3.4.1 (2018-08-28)\n==================\n\n- Fix empty header parsing regression. (`#3218 <https://github.com/aio-libs/aiohttp/pull/3218>`_)\n- Fix BaseRequest.raw_headers doc. (`#3215 <https://github.com/aio-libs/aiohttp/pull/3215>`_)\n- Fix documentation building on ReadTheDocs (`#3221 <https://github.com/aio-libs/aiohttp/pull/3221>`_)\n\n\n\n\n----\n\n\n3.4.0 (2018-08-25)\n==================\n\nFeatures\n--------\n\n- Add type hints (`#3049 <https://github.com/aio-libs/aiohttp/pull/3049>`_)\n- Add ``raise_for_status`` request parameter (`#3073 <https://github.com/aio-libs/aiohttp/pull/3073>`_)\n- Add type hints to HTTP client (`#3092 <https://github.com/aio-libs/aiohttp/pull/3092>`_)\n- Minor server optimizations (`#3095 <https://github.com/aio-libs/aiohttp/pull/3095>`_)\n- Preserve the cause when `HTTPException` is raised from another exception. (`#3096 <https://github.com/aio-libs/aiohttp/pull/3096>`_)\n- Add `close_boundary` option in `MultipartWriter.write` method. Support streaming (`#3104 <https://github.com/aio-libs/aiohttp/pull/3104>`_)\n- Added a ``remove_slash`` option to the ``normalize_path_middleware`` factory. (`#3173 <https://github.com/aio-libs/aiohttp/pull/3173>`_)\n- The class `AbstractRouteDef` is importable from `aiohttp.web`. (`#3183 <https://github.com/aio-libs/aiohttp/pull/3183>`_)\n\n\nBugfixes\n--------\n\n- Prevent double closing when client connection is released before the\n  last ``data_received()`` callback. (`#3031 <https://github.com/aio-libs/aiohttp/pull/3031>`_)\n- Make redirect with `normalize_path_middleware` work when using url encoded paths. (`#3051 <https://github.com/aio-libs/aiohttp/pull/3051>`_)\n- Postpone web task creation to connection establishment. (`#3052 <https://github.com/aio-libs/aiohttp/pull/3052>`_)\n- Fix ``sock_read`` timeout. (`#3053 <https://github.com/aio-libs/aiohttp/pull/3053>`_)\n- When using a server-request body as the `data=` argument of a client request, iterate over the content with `readany` instead of `readline` to avoid `Line too long` errors. (`#3054 <https://github.com/aio-libs/aiohttp/pull/3054>`_)\n- fix `UrlDispatcher` has no attribute `add_options`, add `web.options` (`#3062 <https://github.com/aio-libs/aiohttp/pull/3062>`_)\n- correct filename in content-disposition with multipart body (`#3064 <https://github.com/aio-libs/aiohttp/pull/3064>`_)\n- Many HTTP proxies has buggy keepalive support.\n  Let's not reuse connection but close it after processing every response. (`#3070 <https://github.com/aio-libs/aiohttp/pull/3070>`_)\n- raise 413 \"Payload Too Large\" rather than raising ValueError in request.post()\n  Add helpful debug message to 413 responses (`#3087 <https://github.com/aio-libs/aiohttp/pull/3087>`_)\n- Fix `StreamResponse` equality, now that they are `MutableMapping` objects. (`#3100 <https://github.com/aio-libs/aiohttp/pull/3100>`_)\n- Fix server request objects comparison (`#3116 <https://github.com/aio-libs/aiohttp/pull/3116>`_)\n- Do not hang on `206 Partial Content` response with `Content-Encoding: gzip` (`#3123 <https://github.com/aio-libs/aiohttp/pull/3123>`_)\n- Fix timeout precondition checkers (`#3145 <https://github.com/aio-libs/aiohttp/pull/3145>`_)\n\n\nImproved Documentation\n----------------------\n\n- Add a new FAQ entry that clarifies that you should not reuse response\n  objects in middleware functions. (`#3020 <https://github.com/aio-libs/aiohttp/pull/3020>`_)\n- Add FAQ section \"Why is creating a ClientSession outside of an event loop dangerous?\" (`#3072 <https://github.com/aio-libs/aiohttp/pull/3072>`_)\n- Fix link to Rambler (`#3115 <https://github.com/aio-libs/aiohttp/pull/3115>`_)\n- Fix TCPSite documentation on the Server Reference page. (`#3146 <https://github.com/aio-libs/aiohttp/pull/3146>`_)\n- Fix documentation build configuration file for Windows. (`#3147 <https://github.com/aio-libs/aiohttp/pull/3147>`_)\n- Remove no longer existing lingering_timeout parameter of Application.make_handler from documentation. (`#3151 <https://github.com/aio-libs/aiohttp/pull/3151>`_)\n- Mention that ``app.make_handler`` is deprecated, recommend to use runners\n  API instead. (`#3157 <https://github.com/aio-libs/aiohttp/pull/3157>`_)\n\n\nDeprecations and Removals\n-------------------------\n\n- Drop ``loop.current_task()`` from ``helpers.current_task()`` (`#2826 <https://github.com/aio-libs/aiohttp/pull/2826>`_)\n- Drop ``reader`` parameter from ``request.multipart()``. (`#3090 <https://github.com/aio-libs/aiohttp/pull/3090>`_)\n\n\n\n\n----\n\n\n3.3.2 (2018-06-12)\n==================\n\n- Many HTTP proxies has buggy keepalive support. Let's not reuse connection but\n  close it after processing every response. (`#3070 <https://github.com/aio-libs/aiohttp/pull/3070>`_)\n\n- Provide vendor source files in tarball (`#3076 <https://github.com/aio-libs/aiohttp/pull/3076>`_)\n\n\n\n\n----\n\n\n3.3.1 (2018-06-05)\n==================\n\n- Fix ``sock_read`` timeout. (`#3053 <https://github.com/aio-libs/aiohttp/pull/3053>`_)\n- When using a server-request body as the ``data=`` argument of a client request,\n  iterate over the content with ``readany`` instead of ``readline`` to avoid ``Line\n  too long`` errors. (`#3054 <https://github.com/aio-libs/aiohttp/pull/3054>`_)\n\n\n\n\n----\n\n\n3.3.0 (2018-06-01)\n==================\n\nFeatures\n--------\n\n- Raise ``ConnectionResetError`` instead of ``CancelledError`` on trying to\n  write to a closed stream. (`#2499 <https://github.com/aio-libs/aiohttp/pull/2499>`_)\n- Implement ``ClientTimeout`` class and support socket read timeout. (`#2768 <https://github.com/aio-libs/aiohttp/pull/2768>`_)\n- Enable logging when ``aiohttp.web`` is used as a program (`#2956 <https://github.com/aio-libs/aiohttp/pull/2956>`_)\n- Add canonical property to resources (`#2968 <https://github.com/aio-libs/aiohttp/pull/2968>`_)\n- Forbid reading response BODY after release (`#2983 <https://github.com/aio-libs/aiohttp/pull/2983>`_)\n- Implement base protocol class to avoid a dependency from internal\n  ``asyncio.streams.FlowControlMixin`` (`#2986 <https://github.com/aio-libs/aiohttp/pull/2986>`_)\n- Cythonize ``@helpers.reify``, 5% boost on macro benchmark (`#2995 <https://github.com/aio-libs/aiohttp/pull/2995>`_)\n- Optimize HTTP parser (`#3015 <https://github.com/aio-libs/aiohttp/pull/3015>`_)\n- Implement ``runner.addresses`` property. (`#3036 <https://github.com/aio-libs/aiohttp/pull/3036>`_)\n- Use ``bytearray`` instead of a list of ``bytes`` in websocket reader. It\n  improves websocket message reading a little. (`#3039 <https://github.com/aio-libs/aiohttp/pull/3039>`_)\n- Remove heartbeat on closing connection on keepalive timeout. The used hack\n  violates HTTP protocol. (`#3041 <https://github.com/aio-libs/aiohttp/pull/3041>`_)\n- Limit websocket message size on reading to 4 MB by default. (`#3045 <https://github.com/aio-libs/aiohttp/pull/3045>`_)\n\n\nBugfixes\n--------\n\n- Don't reuse a connection with the same URL but different proxy/TLS settings\n  (`#2981 <https://github.com/aio-libs/aiohttp/pull/2981>`_)\n- When parsing the Forwarded header, the optional port number is now preserved.\n  (`#3009 <https://github.com/aio-libs/aiohttp/pull/3009>`_)\n\n\nImproved Documentation\n----------------------\n\n- Make Change Log more visible in docs (`#3029 <https://github.com/aio-libs/aiohttp/pull/3029>`_)\n- Make style and grammar improvements on the FAQ page. (`#3030 <https://github.com/aio-libs/aiohttp/pull/3030>`_)\n- Document that signal handlers should be async functions since aiohttp 3.0\n  (`#3032 <https://github.com/aio-libs/aiohttp/pull/3032>`_)\n\n\nDeprecations and Removals\n-------------------------\n\n- Deprecate custom application's router. (`#3021 <https://github.com/aio-libs/aiohttp/pull/3021>`_)\n\n\nMisc\n----\n\n- #3008, #3011\n\n\n\n\n----\n\n\n3.2.1 (2018-05-10)\n==================\n\n- Don't reuse a connection with the same URL but different proxy/TLS settings\n  (`#2981 <https://github.com/aio-libs/aiohttp/pull/2981>`_)\n\n\n\n\n----\n\n\n3.2.0 (2018-05-06)\n==================\n\nFeatures\n--------\n\n- Raise ``TooManyRedirects`` exception when client gets redirected too many\n  times instead of returning last response. (`#2631 <https://github.com/aio-libs/aiohttp/pull/2631>`_)\n- Extract route definitions into separate ``web_routedef.py`` file (`#2876 <https://github.com/aio-libs/aiohttp/pull/2876>`_)\n- Raise an exception on request body reading after sending response. (`#2895 <https://github.com/aio-libs/aiohttp/pull/2895>`_)\n- ClientResponse and RequestInfo now have real_url property, which is request\n  url without fragment part being stripped (`#2925 <https://github.com/aio-libs/aiohttp/pull/2925>`_)\n- Speed up connector limiting (`#2937 <https://github.com/aio-libs/aiohttp/pull/2937>`_)\n- Added and links property for ClientResponse object (`#2948 <https://github.com/aio-libs/aiohttp/pull/2948>`_)\n- Add ``request.config_dict`` for exposing nested applications data. (`#2949 <https://github.com/aio-libs/aiohttp/pull/2949>`_)\n- Speed up HTTP headers serialization, server micro-benchmark runs 5% faster\n  now. (`#2957 <https://github.com/aio-libs/aiohttp/pull/2957>`_)\n- Apply assertions in debug mode only (`#2966 <https://github.com/aio-libs/aiohttp/pull/2966>`_)\n\n\nBugfixes\n--------\n\n- expose property `app` for TestClient (`#2891 <https://github.com/aio-libs/aiohttp/pull/2891>`_)\n- Call on_chunk_sent when write_eof takes as a param the last chunk (`#2909 <https://github.com/aio-libs/aiohttp/pull/2909>`_)\n- A closing bracket was added to `__repr__` of resources (`#2935 <https://github.com/aio-libs/aiohttp/pull/2935>`_)\n- Fix compression of FileResponse (`#2942 <https://github.com/aio-libs/aiohttp/pull/2942>`_)\n- Fixes some bugs in the limit connection feature (`#2964 <https://github.com/aio-libs/aiohttp/pull/2964>`_)\n\n\nImproved Documentation\n----------------------\n\n- Drop ``async_timeout`` usage from documentation for client API in favor of\n  ``timeout`` parameter. (`#2865 <https://github.com/aio-libs/aiohttp/pull/2865>`_)\n- Improve Gunicorn logging documentation (`#2921 <https://github.com/aio-libs/aiohttp/pull/2921>`_)\n- Replace multipart writer `.serialize()` method with `.write()` in\n  documentation. (`#2965 <https://github.com/aio-libs/aiohttp/pull/2965>`_)\n\n\nDeprecations and Removals\n-------------------------\n\n- Deprecate Application.make_handler() (`#2938 <https://github.com/aio-libs/aiohttp/pull/2938>`_)\n\n\nMisc\n----\n\n- #2958\n\n\n\n\n----\n\n\n3.1.3 (2018-04-12)\n==================\n\n- Fix cancellation broadcast during DNS resolve (`#2910 <https://github.com/aio-libs/aiohttp/pull/2910>`_)\n\n\n\n\n----\n\n\n3.1.2 (2018-04-05)\n==================\n\n- Make ``LineTooLong`` exception more detailed about actual data size (`#2863 <https://github.com/aio-libs/aiohttp/pull/2863>`_)\n\n- Call ``on_chunk_sent`` when write_eof takes as a param the last chunk (`#2909 <https://github.com/aio-libs/aiohttp/pull/2909>`_)\n\n\n\n\n----\n\n\n3.1.1 (2018-03-27)\n==================\n\n- Support *asynchronous iterators* (and *asynchronous generators* as\n  well) in both client and server API as request / response BODY\n  payloads. (`#2802 <https://github.com/aio-libs/aiohttp/pull/2802>`_)\n\n\n\n\n----\n\n\n3.1.0 (2018-03-21)\n==================\n\nWelcome to aiohttp 3.1 release.\n\nThis is an *incremental* release, fully backward compatible with *aiohttp 3.0*.\n\nBut we have added several new features.\n\nThe most visible one is ``app.add_routes()`` (an alias for existing\n``app.router.add_routes()``. The addition is very important because\nall *aiohttp* docs now uses ``app.add_routes()`` call in code\nsnippets. All your existing code still do register routes / resource\nwithout any warning but you've got the idea for a favorite way: noisy\n``app.router.add_get()`` is replaced by ``app.add_routes()``.\n\nThe library does not make a preference between decorators::\n\n   routes = web.RouteTableDef()\n\n   @routes.get('/')\n   async def hello(request):\n       return web.Response(text=\"Hello, world\")\n\n   app.add_routes(routes)\n\nand route tables as a list::\n\n   async def hello(request):\n       return web.Response(text=\"Hello, world\")\n\n   app.add_routes([web.get('/', hello)])\n\nBoth ways are equal, user may decide basing on own code taste.\n\nAlso we have a lot of minor features, bug fixes and documentation\nupdates, see below.\n\nFeatures\n--------\n\n- Relax JSON content-type checking in the ``ClientResponse.json()`` to allow\n  \"application/xxx+json\" instead of strict \"application/json\". (`#2206 <https://github.com/aio-libs/aiohttp/pull/2206>`_)\n- Bump C HTTP parser to version 2.8 (`#2730 <https://github.com/aio-libs/aiohttp/pull/2730>`_)\n- Accept a coroutine as an application factory in ``web.run_app`` and gunicorn\n  worker. (`#2739 <https://github.com/aio-libs/aiohttp/pull/2739>`_)\n- Implement application cleanup context (``app.cleanup_ctx`` property). (`#2747 <https://github.com/aio-libs/aiohttp/pull/2747>`_)\n- Make ``writer.write_headers`` a coroutine. (`#2762 <https://github.com/aio-libs/aiohttp/pull/2762>`_)\n- Add tracking signals for getting request/response bodies. (`#2767 <https://github.com/aio-libs/aiohttp/pull/2767>`_)\n- Deprecate ClientResponseError.code in favor of .status to keep similarity\n  with response classes. (`#2781 <https://github.com/aio-libs/aiohttp/pull/2781>`_)\n- Implement ``app.add_routes()`` method. (`#2787 <https://github.com/aio-libs/aiohttp/pull/2787>`_)\n- Implement ``web.static()`` and ``RouteTableDef.static()`` API. (`#2795 <https://github.com/aio-libs/aiohttp/pull/2795>`_)\n- Install a test event loop as default by ``asyncio.set_event_loop()``. The\n  change affects aiohttp test utils but backward compatibility is not broken\n  for 99.99% of use cases. (`#2804 <https://github.com/aio-libs/aiohttp/pull/2804>`_)\n- Refactor ``ClientResponse`` constructor: make logically required constructor\n  arguments mandatory, drop ``_post_init()`` method. (`#2820 <https://github.com/aio-libs/aiohttp/pull/2820>`_)\n- Use ``app.add_routes()`` in server docs everywhere (`#2830 <https://github.com/aio-libs/aiohttp/pull/2830>`_)\n- Websockets refactoring, all websocket writer methods are converted into\n  coroutines. (`#2836 <https://github.com/aio-libs/aiohttp/pull/2836>`_)\n- Provide ``Content-Range`` header for ``Range`` requests (`#2844 <https://github.com/aio-libs/aiohttp/pull/2844>`_)\n\n\nBugfixes\n--------\n\n- Fix websocket client return EofStream. (`#2784 <https://github.com/aio-libs/aiohttp/pull/2784>`_)\n- Fix websocket demo. (`#2789 <https://github.com/aio-libs/aiohttp/pull/2789>`_)\n- Property ``BaseRequest.http_range`` now returns a python-like slice when\n  requesting the tail of the range. It's now indicated by a negative value in\n  ``range.start`` rather then in ``range.stop`` (`#2805 <https://github.com/aio-libs/aiohttp/pull/2805>`_)\n- Close a connection if an unexpected exception occurs while sending a request\n  (`#2827 <https://github.com/aio-libs/aiohttp/pull/2827>`_)\n- Fix firing DNS tracing events. (`#2841 <https://github.com/aio-libs/aiohttp/pull/2841>`_)\n\n\nImproved Documentation\n----------------------\n\n- Document behavior when cchardet detects encodings that are unknown to Python.\n  (`#2732 <https://github.com/aio-libs/aiohttp/pull/2732>`_)\n- Add diagrams for tracing request life style. (`#2748 <https://github.com/aio-libs/aiohttp/pull/2748>`_)\n- Drop removed functionality for passing ``StreamReader`` as data at client\n  side. (`#2793 <https://github.com/aio-libs/aiohttp/pull/2793>`_)\n\n\n\n----\n\n3.0.9 (2018-03-14)\n==================\n\n- Close a connection if an unexpected exception occurs while sending a request\n  (`#2827 <https://github.com/aio-libs/aiohttp/pull/2827>`_)\n\n\n\n----\n\n\n3.0.8 (2018-03-12)\n==================\n\n- Use ``asyncio.current_task()`` on Python 3.7 (`#2825 <https://github.com/aio-libs/aiohttp/pull/2825>`_)\n\n\n\n----\n\n3.0.7 (2018-03-08)\n==================\n\n- Fix SSL proxy support by client. (`#2810 <https://github.com/aio-libs/aiohttp/pull/2810>`_)\n- Restore an imperative check in ``setup.py`` for python version. The check\n  works in parallel to environment marker. As effect an error about unsupported\n  Python versions is raised even on outdated systems with very old\n  ``setuptools`` version installed. (`#2813 <https://github.com/aio-libs/aiohttp/pull/2813>`_)\n\n\n\n----\n\n\n3.0.6 (2018-03-05)\n==================\n\n- Add ``_reuse_address`` and ``_reuse_port`` to\n  ``web_runner.TCPSite.__slots__``. (`#2792 <https://github.com/aio-libs/aiohttp/pull/2792>`_)\n\n\n\n----\n\n3.0.5 (2018-02-27)\n==================\n\n- Fix ``InvalidStateError`` on processing a sequence of two\n  ``RequestHandler.data_received`` calls on web server. (`#2773 <https://github.com/aio-libs/aiohttp/pull/2773>`_)\n\n\n\n----\n\n3.0.4 (2018-02-26)\n==================\n\n- Fix ``IndexError`` in HTTP request handling by server. (`#2752 <https://github.com/aio-libs/aiohttp/pull/2752>`_)\n- Fix MultipartWriter.append* no longer returning part/payload. (`#2759 <https://github.com/aio-libs/aiohttp/pull/2759>`_)\n\n\n\n----\n\n\n3.0.3 (2018-02-25)\n==================\n\n- Relax ``attrs`` dependency to minimal actually supported version\n  17.0.3 The change allows to avoid version conflicts with currently\n  existing test tools.\n\n\n\n----\n\n3.0.2 (2018-02-23)\n==================\n\nSecurity Fix\n------------\n\n- Prevent Windows absolute URLs in static files.  Paths like\n  ``/static/D:\\path`` and ``/static/\\\\hostname\\drive\\path`` are\n  forbidden.\n\n\n\n----\n\n3.0.1\n=====\n\n- Technical release for fixing distribution problems.\n\n\n\n----\n\n3.0.0 (2018-02-12)\n==================\n\nFeatures\n--------\n\n- Speed up the `PayloadWriter.write` method for large request bodies. (`#2126 <https://github.com/aio-libs/aiohttp/pull/2126>`_)\n- StreamResponse and Response are now MutableMappings. (`#2246 <https://github.com/aio-libs/aiohttp/pull/2246>`_)\n- ClientSession publishes a set of signals to track the HTTP request execution.\n  (`#2313 <https://github.com/aio-libs/aiohttp/pull/2313>`_)\n- Content-Disposition fast access in ClientResponse (`#2455 <https://github.com/aio-libs/aiohttp/pull/2455>`_)\n- Added support to Flask-style decorators with class-based Views. (`#2472 <https://github.com/aio-libs/aiohttp/pull/2472>`_)\n- Signal handlers (registered callbacks) should be coroutines. (`#2480 <https://github.com/aio-libs/aiohttp/pull/2480>`_)\n- Support ``async with test_client.ws_connect(...)`` (`#2525 <https://github.com/aio-libs/aiohttp/pull/2525>`_)\n- Introduce *site* and *application runner* as underlying API for `web.run_app`\n  implementation. (`#2530 <https://github.com/aio-libs/aiohttp/pull/2530>`_)\n- Only quote multipart boundary when necessary and sanitize input (`#2544 <https://github.com/aio-libs/aiohttp/pull/2544>`_)\n- Make the `aiohttp.ClientResponse.get_encoding` method public with the\n  processing of invalid charset while detecting content encoding. (`#2549 <https://github.com/aio-libs/aiohttp/pull/2549>`_)\n- Add optional configurable per message compression for\n  `ClientWebSocketResponse` and `WebSocketResponse`. (`#2551 <https://github.com/aio-libs/aiohttp/pull/2551>`_)\n- Add hysteresis to `StreamReader` to prevent flipping between paused and\n  resumed states too often. (`#2555 <https://github.com/aio-libs/aiohttp/pull/2555>`_)\n- Support `.netrc` by `trust_env` (`#2581 <https://github.com/aio-libs/aiohttp/pull/2581>`_)\n- Avoid to create a new resource when adding a route with the same name and\n  path of the last added resource (`#2586 <https://github.com/aio-libs/aiohttp/pull/2586>`_)\n- `MultipartWriter.boundary` is `str` now. (`#2589 <https://github.com/aio-libs/aiohttp/pull/2589>`_)\n- Allow a custom port to be used by `TestServer` (and associated pytest\n  fixtures) (`#2613 <https://github.com/aio-libs/aiohttp/pull/2613>`_)\n- Add param access_log_class to web.run_app function (`#2615 <https://github.com/aio-libs/aiohttp/pull/2615>`_)\n- Add ``ssl`` parameter to client API (`#2626 <https://github.com/aio-libs/aiohttp/pull/2626>`_)\n- Fixes performance issue introduced by #2577. When there are no middlewares\n  installed by the user, no additional and useless code is executed. (`#2629 <https://github.com/aio-libs/aiohttp/pull/2629>`_)\n- Rename PayloadWriter to StreamWriter (`#2654 <https://github.com/aio-libs/aiohttp/pull/2654>`_)\n- New options *reuse_port*, *reuse_address* are added to `run_app` and\n  `TCPSite`. (`#2679 <https://github.com/aio-libs/aiohttp/pull/2679>`_)\n- Use custom classes to pass client signals parameters (`#2686 <https://github.com/aio-libs/aiohttp/pull/2686>`_)\n- Use ``attrs`` library for data classes, replace `namedtuple`. (`#2690 <https://github.com/aio-libs/aiohttp/pull/2690>`_)\n- Pytest fixtures renaming, add ``aiohttp_`` prefix (`#2578 <https://github.com/aio-libs/aiohttp/pull/2578>`_)\n- Add ``aiohttp-`` prefix for ``pytest-aiohttp`` command line\n  parameters (`#2578 <https://github.com/aio-libs/aiohttp/pull/2578>`_)\n\nBugfixes\n--------\n\n- Correctly process upgrade request from server to HTTP2. ``aiohttp`` does not\n  support HTTP2 yet, the protocol is not upgraded but response is handled\n  correctly. (`#2277 <https://github.com/aio-libs/aiohttp/pull/2277>`_)\n- Fix ClientConnectorSSLError and ClientProxyConnectionError for proxy\n  connector (`#2408 <https://github.com/aio-libs/aiohttp/pull/2408>`_)\n- Fix connector convert OSError to ClientConnectorError (`#2423 <https://github.com/aio-libs/aiohttp/pull/2423>`_)\n- Fix connection attempts for multiple dns hosts (`#2424 <https://github.com/aio-libs/aiohttp/pull/2424>`_)\n- Fix writing to closed transport by raising `asyncio.CancelledError` (`#2499 <https://github.com/aio-libs/aiohttp/pull/2499>`_)\n- Fix warning in `ClientSession.__del__` by stopping to try to close it.\n  (`#2523 <https://github.com/aio-libs/aiohttp/pull/2523>`_)\n- Fixed race-condition for iterating addresses from the DNSCache. (`#2620 <https://github.com/aio-libs/aiohttp/pull/2620>`_)\n- Fix default value of `access_log_format` argument in `web.run_app` (`#2649 <https://github.com/aio-libs/aiohttp/pull/2649>`_)\n- Freeze sub-application on adding to parent app (`#2656 <https://github.com/aio-libs/aiohttp/pull/2656>`_)\n- Do percent encoding for `.url_for()` parameters (`#2668 <https://github.com/aio-libs/aiohttp/pull/2668>`_)\n- Correctly process request start time and multiple request/response\n  headers in access log extra (`#2641 <https://github.com/aio-libs/aiohttp/pull/2641>`_)\n\nImproved Documentation\n----------------------\n\n- Improve tutorial docs, using `literalinclude` to link to the actual files.\n  (`#2396 <https://github.com/aio-libs/aiohttp/pull/2396>`_)\n- Small improvement docs: better example for file uploads. (`#2401 <https://github.com/aio-libs/aiohttp/pull/2401>`_)\n- Rename `from_env` to `trust_env` in client reference. (`#2451 <https://github.com/aio-libs/aiohttp/pull/2451>`_)\n- Fixed mistype in `Proxy Support` section where `trust_env` parameter was\n  used in `session.get(\"http://python.org\", trust_env=True)` method instead of\n  aiohttp.ClientSession constructor as follows:\n  `aiohttp.ClientSession(trust_env=True)`. (`#2688 <https://github.com/aio-libs/aiohttp/pull/2688>`_)\n- Fix issue with unittest example not compiling in testing docs. (`#2717 <https://github.com/aio-libs/aiohttp/pull/2717>`_)\n\nDeprecations and Removals\n-------------------------\n\n- Simplify HTTP pipelining implementation (`#2109 <https://github.com/aio-libs/aiohttp/pull/2109>`_)\n- Drop `StreamReaderPayload` and `DataQueuePayload`. (`#2257 <https://github.com/aio-libs/aiohttp/pull/2257>`_)\n- Drop `md5` and `sha1` finger-prints (`#2267 <https://github.com/aio-libs/aiohttp/pull/2267>`_)\n- Drop WSMessage.tp (`#2321 <https://github.com/aio-libs/aiohttp/pull/2321>`_)\n- Drop Python 3.4 and Python 3.5.0, 3.5.1, 3.5.2. Minimal supported Python\n  versions are 3.5.3 and 3.6.0. `yield from` is gone, use `async/await` syntax.\n  (`#2343 <https://github.com/aio-libs/aiohttp/pull/2343>`_)\n- Drop `aiohttp.Timeout` and use `async_timeout.timeout` instead. (`#2348 <https://github.com/aio-libs/aiohttp/pull/2348>`_)\n- Drop `resolve` param from TCPConnector. (`#2377 <https://github.com/aio-libs/aiohttp/pull/2377>`_)\n- Add DeprecationWarning for returning HTTPException (`#2415 <https://github.com/aio-libs/aiohttp/pull/2415>`_)\n- `send_str()`, `send_bytes()`, `send_json()`, `ping()` and `pong()` are\n  genuine async functions now. (`#2475 <https://github.com/aio-libs/aiohttp/pull/2475>`_)\n- Drop undocumented `app.on_pre_signal` and `app.on_post_signal`. Signal\n  handlers should be coroutines, support for regular functions is dropped.\n  (`#2480 <https://github.com/aio-libs/aiohttp/pull/2480>`_)\n- `StreamResponse.drain()` is not a part of public API anymore, just use `await\n  StreamResponse.write()`. `StreamResponse.write` is converted to async\n  function. (`#2483 <https://github.com/aio-libs/aiohttp/pull/2483>`_)\n- Drop deprecated `slow_request_timeout` param and `**kwargs`` from\n  `RequestHandler`. (`#2500 <https://github.com/aio-libs/aiohttp/pull/2500>`_)\n- Drop deprecated `resource.url()`. (`#2501 <https://github.com/aio-libs/aiohttp/pull/2501>`_)\n- Remove `%u` and `%l` format specifiers from access log format. (`#2506 <https://github.com/aio-libs/aiohttp/pull/2506>`_)\n- Drop deprecated `request.GET` property. (`#2547 <https://github.com/aio-libs/aiohttp/pull/2547>`_)\n- Simplify stream classes: drop `ChunksQueue` and `FlowControlChunksQueue`,\n  merge `FlowControlStreamReader` functionality into `StreamReader`, drop\n  `FlowControlStreamReader` name. (`#2555 <https://github.com/aio-libs/aiohttp/pull/2555>`_)\n- Do not create a new resource on `router.add_get(..., allow_head=True)`\n  (`#2585 <https://github.com/aio-libs/aiohttp/pull/2585>`_)\n- Drop access to TCP tuning options from PayloadWriter and Response classes\n  (`#2604 <https://github.com/aio-libs/aiohttp/pull/2604>`_)\n- Drop deprecated `encoding` parameter from client API (`#2606 <https://github.com/aio-libs/aiohttp/pull/2606>`_)\n- Deprecate ``verify_ssl``, ``ssl_context`` and ``fingerprint`` parameters in\n  client API (`#2626 <https://github.com/aio-libs/aiohttp/pull/2626>`_)\n- Get rid of the legacy class StreamWriter. (`#2651 <https://github.com/aio-libs/aiohttp/pull/2651>`_)\n- Forbid non-strings in `resource.url_for()` parameters. (`#2668 <https://github.com/aio-libs/aiohttp/pull/2668>`_)\n- Deprecate inheritance from ``ClientSession`` and ``web.Application`` and\n  custom user attributes for ``ClientSession``, ``web.Request`` and\n  ``web.Application`` (`#2691 <https://github.com/aio-libs/aiohttp/pull/2691>`_)\n- Drop `resp = await aiohttp.request(...)` syntax for sake of `async with\n  aiohttp.request(...) as resp:`. (`#2540 <https://github.com/aio-libs/aiohttp/pull/2540>`_)\n- Forbid synchronous context managers for `ClientSession` and test\n  server/client. (`#2362 <https://github.com/aio-libs/aiohttp/pull/2362>`_)\n\n\nMisc\n----\n\n- #2552\n\n\n\n----\n\n\n2.3.10 (2018-02-02)\n===================\n\n- Fix 100% CPU usage on HTTP GET and websocket connection just after it (`#1955 <https://github.com/aio-libs/aiohttp/pull/1955>`_)\n- Patch broken `ssl.match_hostname()` on Python<3.7 (`#2674 <https://github.com/aio-libs/aiohttp/pull/2674>`_)\n\n\n\n----\n\n2.3.9 (2018-01-16)\n==================\n\n- Fix colon handing in path for dynamic resources (`#2670 <https://github.com/aio-libs/aiohttp/pull/2670>`_)\n\n\n\n----\n\n2.3.8 (2018-01-15)\n==================\n\n- Do not use `yarl.unquote` internal function in aiohttp.  Fix\n  incorrectly unquoted path part in URL dispatcher (`#2662 <https://github.com/aio-libs/aiohttp/pull/2662>`_)\n- Fix compatibility with `yarl==1.0.0` (`#2662 <https://github.com/aio-libs/aiohttp/pull/2662>`_)\n\n\n\n----\n\n2.3.7 (2017-12-27)\n==================\n\n- Fixed race-condition for iterating addresses from the DNSCache. (`#2620 <https://github.com/aio-libs/aiohttp/pull/2620>`_)\n- Fix docstring for request.host (`#2591 <https://github.com/aio-libs/aiohttp/pull/2591>`_)\n- Fix docstring for request.remote (`#2592 <https://github.com/aio-libs/aiohttp/pull/2592>`_)\n\n\n\n----\n\n\n2.3.6 (2017-12-04)\n==================\n\n- Correct `request.app` context (for handlers not just middlewares). (`#2577 <https://github.com/aio-libs/aiohttp/pull/2577>`_)\n\n\n\n----\n\n\n2.3.5 (2017-11-30)\n==================\n\n- Fix compatibility with `pytest` 3.3+ (`#2565 <https://github.com/aio-libs/aiohttp/pull/2565>`_)\n\n\n\n----\n\n\n2.3.4 (2017-11-29)\n==================\n\n- Make `request.app` point to proper application instance when using nested\n  applications (with middlewares). (`#2550 <https://github.com/aio-libs/aiohttp/pull/2550>`_)\n- Change base class of ClientConnectorSSLError to ClientSSLError from\n  ClientConnectorError. (`#2563 <https://github.com/aio-libs/aiohttp/pull/2563>`_)\n- Return client connection back to free pool on error in `connector.connect()`.\n  (`#2567 <https://github.com/aio-libs/aiohttp/pull/2567>`_)\n\n\n\n----\n\n\n2.3.3 (2017-11-17)\n==================\n\n- Having a `;` in Response content type does not assume it contains a charset\n  anymore. (`#2197 <https://github.com/aio-libs/aiohttp/pull/2197>`_)\n- Use `getattr(asyncio, 'async')` for keeping compatibility with Python 3.7.\n  (`#2476 <https://github.com/aio-libs/aiohttp/pull/2476>`_)\n- Ignore `NotImplementedError` raised by `set_child_watcher` from `uvloop`.\n  (`#2491 <https://github.com/aio-libs/aiohttp/pull/2491>`_)\n- Fix warning in `ClientSession.__del__` by stopping to try to close it.\n  (`#2523 <https://github.com/aio-libs/aiohttp/pull/2523>`_)\n- Fixed typo's in Third-party libraries page. And added async-v20 to the list\n  (`#2510 <https://github.com/aio-libs/aiohttp/pull/2510>`_)\n\n\n\n----\n\n\n2.3.2 (2017-11-01)\n==================\n\n- Fix passing client max size on cloning request obj. (`#2385 <https://github.com/aio-libs/aiohttp/pull/2385>`_)\n- Fix ClientConnectorSSLError and ClientProxyConnectionError for proxy\n  connector. (`#2408 <https://github.com/aio-libs/aiohttp/pull/2408>`_)\n- Drop generated `_http_parser` shared object from tarball distribution. (`#2414 <https://github.com/aio-libs/aiohttp/pull/2414>`_)\n- Fix connector convert OSError to ClientConnectorError. (`#2423 <https://github.com/aio-libs/aiohttp/pull/2423>`_)\n- Fix connection attempts for multiple dns hosts. (`#2424 <https://github.com/aio-libs/aiohttp/pull/2424>`_)\n- Fix ValueError for AF_INET6 sockets if a preexisting INET6 socket to the\n  `aiohttp.web.run_app` function. (`#2431 <https://github.com/aio-libs/aiohttp/pull/2431>`_)\n- `_SessionRequestContextManager` closes the session properly now. (`#2441 <https://github.com/aio-libs/aiohttp/pull/2441>`_)\n- Rename `from_env` to `trust_env` in client reference. (`#2451 <https://github.com/aio-libs/aiohttp/pull/2451>`_)\n\n\n\n----\n\n\n2.3.1 (2017-10-18)\n==================\n\n- Relax attribute lookup in warning about old-styled middleware (`#2340 <https://github.com/aio-libs/aiohttp/pull/2340>`_)\n\n\n\n----\n\n\n2.3.0 (2017-10-18)\n==================\n\nFeatures\n--------\n\n- Add SSL related params to `ClientSession.request` (`#1128 <https://github.com/aio-libs/aiohttp/pull/1128>`_)\n- Make enable_compression work on HTTP/1.0 (`#1828 <https://github.com/aio-libs/aiohttp/pull/1828>`_)\n- Deprecate registering synchronous web handlers (`#1993 <https://github.com/aio-libs/aiohttp/pull/1993>`_)\n- Switch to `multidict 3.0`. All HTTP headers preserve casing now but compared\n  in case-insensitive way. (`#1994 <https://github.com/aio-libs/aiohttp/pull/1994>`_)\n- Improvement for `normalize_path_middleware`. Added possibility to handle URLs\n  with query string. (`#1995 <https://github.com/aio-libs/aiohttp/pull/1995>`_)\n- Use towncrier for CHANGES.txt build (`#1997 <https://github.com/aio-libs/aiohttp/pull/1997>`_)\n- Implement `trust_env=True` param in `ClientSession`. (`#1998 <https://github.com/aio-libs/aiohttp/pull/1998>`_)\n- Added variable to customize proxy headers (`#2001 <https://github.com/aio-libs/aiohttp/pull/2001>`_)\n- Implement `router.add_routes` and router decorators. (`#2004 <https://github.com/aio-libs/aiohttp/pull/2004>`_)\n- Deprecated `BaseRequest.has_body` in favor of\n  `BaseRequest.can_read_body` Added `BaseRequest.body_exists`\n  attribute that stays static for the lifetime of the request (`#2005 <https://github.com/aio-libs/aiohttp/pull/2005>`_)\n- Provide `BaseRequest.loop` attribute (`#2024 <https://github.com/aio-libs/aiohttp/pull/2024>`_)\n- Make `_CoroGuard` awaitable and fix `ClientSession.close` warning message\n  (`#2026 <https://github.com/aio-libs/aiohttp/pull/2026>`_)\n- Responses to redirects without Location header are returned instead of\n  raising a RuntimeError (`#2030 <https://github.com/aio-libs/aiohttp/pull/2030>`_)\n- Added `get_client`, `get_server`, `setUpAsync` and `tearDownAsync` methods to\n  AioHTTPTestCase (`#2032 <https://github.com/aio-libs/aiohttp/pull/2032>`_)\n- Add automatically a SafeChildWatcher to the test loop (`#2058 <https://github.com/aio-libs/aiohttp/pull/2058>`_)\n- add ability to disable automatic response decompression (`#2110 <https://github.com/aio-libs/aiohttp/pull/2110>`_)\n- Add support for throttling DNS request, avoiding the requests saturation when\n  there is a miss in the DNS cache and many requests getting into the connector\n  at the same time. (`#2111 <https://github.com/aio-libs/aiohttp/pull/2111>`_)\n- Use request for getting access log information instead of message/transport\n  pair. Add `RequestBase.remote` property for accessing to IP of client\n  initiated HTTP request. (`#2123 <https://github.com/aio-libs/aiohttp/pull/2123>`_)\n- json() raises a ContentTypeError exception if the content-type does not meet\n  the requirements instead of raising a generic ClientResponseError. (`#2136 <https://github.com/aio-libs/aiohttp/pull/2136>`_)\n- Make the HTTP client able to return HTTP chunks when chunked transfer\n  encoding is used. (`#2150 <https://github.com/aio-libs/aiohttp/pull/2150>`_)\n- add `append_version` arg into `StaticResource.url` and\n  `StaticResource.url_for` methods for getting an url with hash (version) of\n  the file. (`#2157 <https://github.com/aio-libs/aiohttp/pull/2157>`_)\n- Fix parsing the Forwarded header. * commas and semicolons are allowed inside\n  quoted-strings; * empty forwarded-pairs (as in for=_1;;by=_2) are allowed; *\n  non-standard parameters are allowed (although this alone could be easily done\n  in the previous parser). (`#2173 <https://github.com/aio-libs/aiohttp/pull/2173>`_)\n- Don't require ssl module to run. aiohttp does not require SSL to function.\n  The code paths involved with SSL will only be hit upon SSL usage. Raise\n  `RuntimeError` if HTTPS protocol is required but ssl module is not present.\n  (`#2221 <https://github.com/aio-libs/aiohttp/pull/2221>`_)\n- Accept coroutine fixtures in pytest plugin (`#2223 <https://github.com/aio-libs/aiohttp/pull/2223>`_)\n- Call `shutdown_asyncgens` before event loop closing on Python 3.6. (`#2227 <https://github.com/aio-libs/aiohttp/pull/2227>`_)\n- Speed up Signals when there are no receivers (`#2229 <https://github.com/aio-libs/aiohttp/pull/2229>`_)\n- Raise `InvalidURL` instead of `ValueError` on fetches with invalid URL.\n  (`#2241 <https://github.com/aio-libs/aiohttp/pull/2241>`_)\n- Move `DummyCookieJar` into `cookiejar.py` (`#2242 <https://github.com/aio-libs/aiohttp/pull/2242>`_)\n- `run_app`: Make `print=None` disable printing (`#2260 <https://github.com/aio-libs/aiohttp/pull/2260>`_)\n- Support `brotli` encoding (generic-purpose lossless compression algorithm)\n  (`#2270 <https://github.com/aio-libs/aiohttp/pull/2270>`_)\n- Add server support for WebSockets Per-Message Deflate. Add client option to\n  add deflate compress header in WebSockets request header. If calling\n  ClientSession.ws_connect() with `compress=15` the client will support deflate\n  compress negotiation. (`#2273 <https://github.com/aio-libs/aiohttp/pull/2273>`_)\n- Support `verify_ssl`, `fingerprint`, `ssl_context` and `proxy_headers` by\n  `client.ws_connect`. (`#2292 <https://github.com/aio-libs/aiohttp/pull/2292>`_)\n- Added `aiohttp.ClientConnectorSSLError` when connection fails due\n  `ssl.SSLError` (`#2294 <https://github.com/aio-libs/aiohttp/pull/2294>`_)\n- `aiohttp.web.Application.make_handler` support `access_log_class` (`#2315 <https://github.com/aio-libs/aiohttp/pull/2315>`_)\n- Build HTTP parser extension in non-strict mode by default. (`#2332 <https://github.com/aio-libs/aiohttp/pull/2332>`_)\n\n\nBugfixes\n--------\n\n- Clear auth information on redirecting to other domain (`#1699 <https://github.com/aio-libs/aiohttp/pull/1699>`_)\n- Fix missing app.loop on startup hooks during tests (`#2060 <https://github.com/aio-libs/aiohttp/pull/2060>`_)\n- Fix issue with synchronous session closing when using `ClientSession` as an\n  asynchronous context manager. (`#2063 <https://github.com/aio-libs/aiohttp/pull/2063>`_)\n- Fix issue with `CookieJar` incorrectly expiring cookies in some edge cases.\n  (`#2084 <https://github.com/aio-libs/aiohttp/pull/2084>`_)\n- Force use of IPv4 during test, this will make tests run in a Docker container\n  (`#2104 <https://github.com/aio-libs/aiohttp/pull/2104>`_)\n- Warnings about unawaited coroutines now correctly point to the user's code.\n  (`#2106 <https://github.com/aio-libs/aiohttp/pull/2106>`_)\n- Fix issue with `IndexError` being raised by the `StreamReader.iter_chunks()`\n  generator. (`#2112 <https://github.com/aio-libs/aiohttp/pull/2112>`_)\n- Support HTTP 308 Permanent redirect in client class. (`#2114 <https://github.com/aio-libs/aiohttp/pull/2114>`_)\n- Fix `FileResponse` sending empty chunked body on 304. (`#2143 <https://github.com/aio-libs/aiohttp/pull/2143>`_)\n- Do not add `Content-Length: 0` to GET/HEAD/TRACE/OPTIONS requests by default.\n  (`#2167 <https://github.com/aio-libs/aiohttp/pull/2167>`_)\n- Fix parsing the Forwarded header according to RFC 7239. (`#2170 <https://github.com/aio-libs/aiohttp/pull/2170>`_)\n- Securely determining remote/scheme/host #2171 (`#2171 <https://github.com/aio-libs/aiohttp/pull/2171>`_)\n- Fix header name parsing, if name is split into multiple lines (`#2183 <https://github.com/aio-libs/aiohttp/pull/2183>`_)\n- Handle session close during connection, `KeyError:\n  <aiohttp.connector._TransportPlaceholder>` (`#2193 <https://github.com/aio-libs/aiohttp/pull/2193>`_)\n- Fixes uncaught `TypeError` in `helpers.guess_filename` if `name` is not a\n  string (`#2201 <https://github.com/aio-libs/aiohttp/pull/2201>`_)\n- Raise OSError on async DNS lookup if resolved domain is an alias for another\n  one, which does not have an A or CNAME record. (`#2231 <https://github.com/aio-libs/aiohttp/pull/2231>`_)\n- Fix incorrect warning in `StreamReader`. (`#2251 <https://github.com/aio-libs/aiohttp/pull/2251>`_)\n- Properly clone state of web request (`#2284 <https://github.com/aio-libs/aiohttp/pull/2284>`_)\n- Fix C HTTP parser for cases when status line is split into different TCP\n  packets. (`#2311 <https://github.com/aio-libs/aiohttp/pull/2311>`_)\n- Fix `web.FileResponse` overriding user supplied Content-Type (`#2317 <https://github.com/aio-libs/aiohttp/pull/2317>`_)\n\n\nImproved Documentation\n----------------------\n\n- Add a note about possible performance degradation in `await resp.text()` if\n  charset was not provided by `Content-Type` HTTP header. Pass explicit\n  encoding to solve it. (`#1811 <https://github.com/aio-libs/aiohttp/pull/1811>`_)\n- Drop `disqus` widget from documentation pages. (`#2018 <https://github.com/aio-libs/aiohttp/pull/2018>`_)\n- Add a graceful shutdown section to the client usage documentation. (`#2039 <https://github.com/aio-libs/aiohttp/pull/2039>`_)\n- Document `connector_owner` parameter. (`#2072 <https://github.com/aio-libs/aiohttp/pull/2072>`_)\n- Update the doc of web.Application (`#2081 <https://github.com/aio-libs/aiohttp/pull/2081>`_)\n- Fix mistake about access log disabling. (`#2085 <https://github.com/aio-libs/aiohttp/pull/2085>`_)\n- Add example usage of on_startup and on_shutdown signals by creating and\n  disposing an aiopg connection engine. (`#2131 <https://github.com/aio-libs/aiohttp/pull/2131>`_)\n- Document `encoded=True` for `yarl.URL`, it disables all yarl transformations.\n  (`#2198 <https://github.com/aio-libs/aiohttp/pull/2198>`_)\n- Document that all app's middleware factories are run for every request.\n  (`#2225 <https://github.com/aio-libs/aiohttp/pull/2225>`_)\n- Reflect the fact that default resolver is threaded one starting from aiohttp\n  1.1 (`#2228 <https://github.com/aio-libs/aiohttp/pull/2228>`_)\n\n\nDeprecations and Removals\n-------------------------\n\n- Drop deprecated `Server.finish_connections` (`#2006 <https://github.com/aio-libs/aiohttp/pull/2006>`_)\n- Drop %O format from logging, use %b instead. Drop %e format from logging,\n  environment variables are not supported anymore. (`#2123 <https://github.com/aio-libs/aiohttp/pull/2123>`_)\n- Drop deprecated secure_proxy_ssl_header support (`#2171 <https://github.com/aio-libs/aiohttp/pull/2171>`_)\n- Removed TimeService in favor of simple caching. TimeService also had a bug\n  where it lost about 0.5 seconds per second. (`#2176 <https://github.com/aio-libs/aiohttp/pull/2176>`_)\n- Drop unused response_factory from static files API (`#2290 <https://github.com/aio-libs/aiohttp/pull/2290>`_)\n\n\nMisc\n----\n\n- #2013, #2014, #2048, #2094, #2149, #2187, #2214, #2225, #2243, #2248\n\n\n\n----\n\n\n2.2.5 (2017-08-03)\n==================\n\n- Don't raise deprecation warning on\n  `loop.run_until_complete(client.close())` (`#2065 <https://github.com/aio-libs/aiohttp/pull/2065>`_)\n\n\n\n----\n\n2.2.4 (2017-08-02)\n==================\n\n- Fix issue with synchronous session closing when using ClientSession\n  as an asynchronous context manager.  (`#2063 <https://github.com/aio-libs/aiohttp/pull/2063>`_)\n\n\n\n----\n\n2.2.3 (2017-07-04)\n==================\n\n- Fix `_CoroGuard` for python 3.4\n\n\n\n----\n\n2.2.2 (2017-07-03)\n==================\n\n- Allow `await session.close()` along with `yield from session.close()`\n\n\n\n----\n\n\n2.2.1 (2017-07-02)\n==================\n\n- Relax `yarl` requirement to 0.11+\n- Backport #2026: `session.close` *is* a coroutine (`#2029 <https://github.com/aio-libs/aiohttp/pull/2029>`_)\n\n\n\n----\n\n\n2.2.0 (2017-06-20)\n==================\n\n- Add doc for add_head, update doc for add_get. (`#1944 <https://github.com/aio-libs/aiohttp/pull/1944>`_)\n- Fixed consecutive calls for `Response.write_eof`.\n- Retain method attributes (e.g. :code:`__doc__`) when registering synchronous\n  handlers for resources. (`#1953 <https://github.com/aio-libs/aiohttp/pull/1953>`_)\n- Added signal TERM handling in `run_app` to gracefully exit (`#1932 <https://github.com/aio-libs/aiohttp/pull/1932>`_)\n- Fix websocket issues caused by frame fragmentation. (`#1962 <https://github.com/aio-libs/aiohttp/pull/1962>`_)\n- Raise RuntimeError is you try to set the Content Length and enable\n  chunked encoding at the same time (`#1941 <https://github.com/aio-libs/aiohttp/pull/1941>`_)\n- Small update for `unittest_run_loop`\n- Use CIMultiDict for ClientRequest.skip_auto_headers (`#1970 <https://github.com/aio-libs/aiohttp/pull/1970>`_)\n- Fix wrong startup sequence: test server and `run_app()` are not raise\n  `DeprecationWarning` now (`#1947 <https://github.com/aio-libs/aiohttp/pull/1947>`_)\n- Make sure cleanup signal is sent if startup signal has been sent (`#1959 <https://github.com/aio-libs/aiohttp/pull/1959>`_)\n- Fixed server keep-alive handler, could cause 100% cpu utilization (`#1955 <https://github.com/aio-libs/aiohttp/pull/1955>`_)\n- Connection can be destroyed before response get processed if\n  `await aiohttp.request(..)` is used (`#1981 <https://github.com/aio-libs/aiohttp/pull/1981>`_)\n- MultipartReader does not work with -OO (`#1969 <https://github.com/aio-libs/aiohttp/pull/1969>`_)\n- Fixed `ClientPayloadError` with blank `Content-Encoding` header (`#1931 <https://github.com/aio-libs/aiohttp/pull/1931>`_)\n- Support `deflate` encoding implemented in `httpbin.org/deflate` (`#1918 <https://github.com/aio-libs/aiohttp/pull/1918>`_)\n- Fix BadStatusLine caused by extra `CRLF` after `POST` data (`#1792 <https://github.com/aio-libs/aiohttp/pull/1792>`_)\n- Keep a reference to `ClientSession` in response object (`#1985 <https://github.com/aio-libs/aiohttp/pull/1985>`_)\n- Deprecate undocumented `app.on_loop_available` signal (`#1978 <https://github.com/aio-libs/aiohttp/pull/1978>`_)\n\n\n\n----\n\n\n\n2.1.0 (2017-05-26)\n==================\n\n- Added support for experimental `async-tokio` event loop written in Rust\n  https://github.com/PyO3/tokio\n- Write to transport ``\\r\\n`` before closing after keepalive timeout,\n  otherwise client can not detect socket disconnection. (`#1883 <https://github.com/aio-libs/aiohttp/pull/1883>`_)\n- Only call `loop.close` in `run_app` if the user did *not* supply a loop.\n  Useful for allowing clients to specify their own cleanup before closing the\n  asyncio loop if they wish to tightly control loop behavior\n- Content disposition with semicolon in filename (`#917 <https://github.com/aio-libs/aiohttp/pull/917>`_)\n- Added `request_info` to response object and `ClientResponseError`. (`#1733 <https://github.com/aio-libs/aiohttp/pull/1733>`_)\n- Added `history` to `ClientResponseError`. (`#1741 <https://github.com/aio-libs/aiohttp/pull/1741>`_)\n- Allow to disable redirect url re-quoting (`#1474 <https://github.com/aio-libs/aiohttp/pull/1474>`_)\n- Handle RuntimeError from transport (`#1790 <https://github.com/aio-libs/aiohttp/pull/1790>`_)\n- Dropped \"%O\" in access logger (`#1673 <https://github.com/aio-libs/aiohttp/pull/1673>`_)\n- Added `args` and `kwargs` to `unittest_run_loop`. Useful with other\n  decorators, for example `@patch`. (`#1803 <https://github.com/aio-libs/aiohttp/pull/1803>`_)\n- Added `iter_chunks` to response.content object. (`#1805 <https://github.com/aio-libs/aiohttp/pull/1805>`_)\n- Avoid creating TimerContext when there is no timeout to allow\n  compatibility with Tornado. (`#1817 <https://github.com/aio-libs/aiohttp/pull/1817>`_) (`#1180 <https://github.com/aio-libs/aiohttp/pull/1180>`_)\n- Add `proxy_from_env` to `ClientRequest` to read from environment\n  variables. (`#1791 <https://github.com/aio-libs/aiohttp/pull/1791>`_)\n- Add DummyCookieJar helper. (`#1830 <https://github.com/aio-libs/aiohttp/pull/1830>`_)\n- Fix assertion errors in Python 3.4 from noop helper. (`#1847 <https://github.com/aio-libs/aiohttp/pull/1847>`_)\n- Do not unquote `+` in match_info values (`#1816 <https://github.com/aio-libs/aiohttp/pull/1816>`_)\n- Use Forwarded, X-Forwarded-Scheme and X-Forwarded-Host for better scheme and\n  host resolution. (`#1134 <https://github.com/aio-libs/aiohttp/pull/1134>`_)\n- Fix sub-application middlewares resolution order (`#1853 <https://github.com/aio-libs/aiohttp/pull/1853>`_)\n- Fix applications comparison (`#1866 <https://github.com/aio-libs/aiohttp/pull/1866>`_)\n- Fix static location in index when prefix is used (`#1662 <https://github.com/aio-libs/aiohttp/pull/1662>`_)\n- Make test server more reliable (`#1896 <https://github.com/aio-libs/aiohttp/pull/1896>`_)\n- Extend list of web exceptions, add HTTPUnprocessableEntity,\n  HTTPFailedDependency, HTTPInsufficientStorage status codes (`#1920 <https://github.com/aio-libs/aiohttp/pull/1920>`_)\n\n\n\n----\n\n\n2.0.7 (2017-04-12)\n==================\n\n- Fix *pypi* distribution\n- Fix exception description (`#1807 <https://github.com/aio-libs/aiohttp/pull/1807>`_)\n- Handle socket error in FileResponse (`#1773 <https://github.com/aio-libs/aiohttp/pull/1773>`_)\n- Cancel websocket heartbeat on close (`#1793 <https://github.com/aio-libs/aiohttp/pull/1793>`_)\n\n\n\n----\n\n\n2.0.6 (2017-04-04)\n==================\n\n- Keeping blank values for `request.post()` and `multipart.form()` (`#1765 <https://github.com/aio-libs/aiohttp/pull/1765>`_)\n- TypeError in data_received of ResponseHandler (`#1770 <https://github.com/aio-libs/aiohttp/pull/1770>`_)\n- Fix ``web.run_app`` not to bind to default host-port pair if only socket is\n  passed (`#1786 <https://github.com/aio-libs/aiohttp/pull/1786>`_)\n\n\n\n----\n\n\n2.0.5 (2017-03-29)\n==================\n\n- Memory leak with aiohttp.request (`#1756 <https://github.com/aio-libs/aiohttp/pull/1756>`_)\n- Disable cleanup closed ssl transports by default.\n- Exception in request handling if the server responds before the body\n  is sent (`#1761 <https://github.com/aio-libs/aiohttp/pull/1761>`_)\n\n\n\n----\n\n\n2.0.4 (2017-03-27)\n==================\n\n- Memory leak with aiohttp.request (`#1756 <https://github.com/aio-libs/aiohttp/pull/1756>`_)\n- Encoding is always UTF-8 in POST data (`#1750 <https://github.com/aio-libs/aiohttp/pull/1750>`_)\n- Do not add \"Content-Disposition\" header by default (`#1755 <https://github.com/aio-libs/aiohttp/pull/1755>`_)\n\n\n\n----\n\n\n2.0.3 (2017-03-24)\n==================\n\n- Call https website through proxy will cause error (`#1745 <https://github.com/aio-libs/aiohttp/pull/1745>`_)\n- Fix exception on multipart/form-data post if content-type is not set (`#1743 <https://github.com/aio-libs/aiohttp/pull/1743>`_)\n\n\n\n----\n\n\n2.0.2 (2017-03-21)\n==================\n\n- Fixed Application.on_loop_available signal (`#1739 <https://github.com/aio-libs/aiohttp/pull/1739>`_)\n- Remove debug code\n\n\n\n----\n\n\n2.0.1 (2017-03-21)\n==================\n\n- Fix allow-head to include name on route (`#1737 <https://github.com/aio-libs/aiohttp/pull/1737>`_)\n- Fixed AttributeError in WebSocketResponse.can_prepare (`#1736 <https://github.com/aio-libs/aiohttp/pull/1736>`_)\n\n\n\n----\n\n\n2.0.0 (2017-03-20)\n==================\n\n- Added `json` to `ClientSession.request()` method (`#1726 <https://github.com/aio-libs/aiohttp/pull/1726>`_)\n- Added session's `raise_for_status` parameter, automatically calls\n  raise_for_status() on any request. (`#1724 <https://github.com/aio-libs/aiohttp/pull/1724>`_)\n- `response.json()` raises `ClientResponseError` exception if response's\n  content type does not match (`#1723 <https://github.com/aio-libs/aiohttp/pull/1723>`_)\n  - Cleanup timer and loop handle on any client exception.\n- Deprecate `loop` parameter for Application's constructor\n- Properly handle payload errors (`#1710 <https://github.com/aio-libs/aiohttp/pull/1710>`_)\n- Added `ClientWebSocketResponse.get_extra_info()` (`#1717 <https://github.com/aio-libs/aiohttp/pull/1717>`_)\n- It is not possible to combine Transfer-Encoding and chunked parameter,\n  same for compress and Content-Encoding (`#1655 <https://github.com/aio-libs/aiohttp/pull/1655>`_)\n- Connector's `limit` parameter indicates total concurrent connections.\n  New `limit_per_host` added, indicates total connections per endpoint. (`#1601 <https://github.com/aio-libs/aiohttp/pull/1601>`_)\n- Use url's `raw_host` for name resolution (`#1685 <https://github.com/aio-libs/aiohttp/pull/1685>`_)\n- Change `ClientResponse.url` to `yarl.URL` instance (`#1654 <https://github.com/aio-libs/aiohttp/pull/1654>`_)\n- Add max_size parameter to web.Request reading methods (`#1133 <https://github.com/aio-libs/aiohttp/pull/1133>`_)\n- Web Request.post() stores data in temp files (`#1469 <https://github.com/aio-libs/aiohttp/pull/1469>`_)\n- Add the `allow_head=True` keyword argument for `add_get` (`#1618 <https://github.com/aio-libs/aiohttp/pull/1618>`_)\n- `run_app` and the Command Line Interface now support serving over\n  Unix domain sockets for faster inter-process communication.\n- `run_app` now supports passing a preexisting socket object. This can be useful\n  e.g. for socket-based activated applications, when binding of a socket is\n  done by the parent process.\n- Implementation for Trailer headers parser is broken (`#1619 <https://github.com/aio-libs/aiohttp/pull/1619>`_)\n- Fix FileResponse to not fall on bad request (range out of file size)\n- Fix FileResponse to correct stream video to Chromes\n- Deprecate public low-level api (`#1657 <https://github.com/aio-libs/aiohttp/pull/1657>`_)\n- Deprecate `encoding` parameter for ClientSession.request() method\n- Dropped aiohttp.wsgi (`#1108 <https://github.com/aio-libs/aiohttp/pull/1108>`_)\n- Dropped `version` from ClientSession.request() method\n- Dropped websocket version 76 support (`#1160 <https://github.com/aio-libs/aiohttp/pull/1160>`_)\n- Dropped: `aiohttp.protocol.HttpPrefixParser`  (`#1590 <https://github.com/aio-libs/aiohttp/pull/1590>`_)\n- Dropped: Servers response's `.started`, `.start()` and\n  `.can_start()` method (`#1591 <https://github.com/aio-libs/aiohttp/pull/1591>`_)\n- Dropped:  Adding `sub app` via `app.router.add_subapp()` is deprecated\n  use `app.add_subapp()` instead (`#1592 <https://github.com/aio-libs/aiohttp/pull/1592>`_)\n- Dropped: `Application.finish()` and `Application.register_on_finish()` (`#1602 <https://github.com/aio-libs/aiohttp/pull/1602>`_)\n- Dropped: `web.Request.GET` and `web.Request.POST`\n- Dropped: aiohttp.get(), aiohttp.options(), aiohttp.head(),\n  aiohttp.post(), aiohttp.put(), aiohttp.patch(), aiohttp.delete(), and\n  aiohttp.ws_connect() (`#1593 <https://github.com/aio-libs/aiohttp/pull/1593>`_)\n- Dropped: `aiohttp.web.WebSocketResponse.receive_msg()` (`#1605 <https://github.com/aio-libs/aiohttp/pull/1605>`_)\n- Dropped: `ServerHttpProtocol.keep_alive_timeout` attribute and\n  `keep-alive`, `keep_alive_on`, `timeout`, `log` constructor parameters (`#1606 <https://github.com/aio-libs/aiohttp/pull/1606>`_)\n- Dropped: `TCPConnector's`` `.resolve`, `.resolved_hosts`,\n  `.clear_resolved_hosts()` attributes and `resolve` constructor\n  parameter (`#1607 <https://github.com/aio-libs/aiohttp/pull/1607>`_)\n- Dropped `ProxyConnector` (`#1609 <https://github.com/aio-libs/aiohttp/pull/1609>`_)\n\n\n\n----\n\n\n1.3.5 (2017-03-16)\n==================\n\n- Fixed None timeout support (`#1720 <https://github.com/aio-libs/aiohttp/pull/1720>`_)\n\n\n\n----\n\n\n1.3.4 (2017-03-14)\n==================\n\n- Revert timeout handling in client request\n- Fix StreamResponse representation after eof\n- Fix file_sender to not fall on bad request (range out of file size)\n- Fix file_sender to correct stream video to Chromes\n- Fix NotImplementedError server exception (`#1703 <https://github.com/aio-libs/aiohttp/pull/1703>`_)\n- Clearer error message for URL without a host name. (`#1691 <https://github.com/aio-libs/aiohttp/pull/1691>`_)\n- Silence deprecation warning in __repr__ (`#1690 <https://github.com/aio-libs/aiohttp/pull/1690>`_)\n- IDN + HTTPS = `ssl.CertificateError` (`#1685 <https://github.com/aio-libs/aiohttp/pull/1685>`_)\n\n\n\n----\n\n\n1.3.3 (2017-02-19)\n==================\n\n- Fixed memory leak in time service (`#1656 <https://github.com/aio-libs/aiohttp/pull/1656>`_)\n\n\n\n----\n\n\n1.3.2 (2017-02-16)\n==================\n\n- Awaiting on WebSocketResponse.send_* does not work (`#1645 <https://github.com/aio-libs/aiohttp/pull/1645>`_)\n- Fix multiple calls to client ws_connect when using a shared header\n  dict (`#1643 <https://github.com/aio-libs/aiohttp/pull/1643>`_)\n- Make CookieJar.filter_cookies() accept plain string parameter. (`#1636 <https://github.com/aio-libs/aiohttp/pull/1636>`_)\n\n\n\n----\n\n\n1.3.1 (2017-02-09)\n==================\n\n- Handle CLOSING in WebSocketResponse.__anext__\n- Fixed AttributeError 'drain' for server websocket handler (`#1613 <https://github.com/aio-libs/aiohttp/pull/1613>`_)\n\n\n\n----\n\n\n1.3.0 (2017-02-08)\n==================\n\n- Multipart writer validates the data on append instead of on a\n  request send (`#920 <https://github.com/aio-libs/aiohttp/pull/920>`_)\n- Multipart reader accepts multipart messages with or without their epilogue\n  to consistently handle valid and legacy behaviors (`#1526 <https://github.com/aio-libs/aiohttp/pull/1526>`_) (`#1581 <https://github.com/aio-libs/aiohttp/pull/1581>`_)\n- Separate read + connect + request timeouts # 1523\n- Do not swallow Upgrade header (`#1587 <https://github.com/aio-libs/aiohttp/pull/1587>`_)\n- Fix polls demo run application (`#1487 <https://github.com/aio-libs/aiohttp/pull/1487>`_)\n- Ignore unknown 1XX status codes in client (`#1353 <https://github.com/aio-libs/aiohttp/pull/1353>`_)\n- Fix sub-Multipart messages missing their headers on serialization (`#1525 <https://github.com/aio-libs/aiohttp/pull/1525>`_)\n- Do not use readline when reading the content of a part\n  in the multipart reader (`#1535 <https://github.com/aio-libs/aiohttp/pull/1535>`_)\n- Add optional flag for quoting `FormData` fields (`#916 <https://github.com/aio-libs/aiohttp/pull/916>`_)\n- 416 Range Not Satisfiable if requested range end > file size (`#1588 <https://github.com/aio-libs/aiohttp/pull/1588>`_)\n- Having a `:` or `@` in a route does not work (`#1552 <https://github.com/aio-libs/aiohttp/pull/1552>`_)\n- Added `receive_timeout` timeout for websocket to receive complete\n  message. (`#1325 <https://github.com/aio-libs/aiohttp/pull/1325>`_)\n- Added `heartbeat` parameter for websocket to automatically send\n  `ping` message. (`#1024 <https://github.com/aio-libs/aiohttp/pull/1024>`_) (`#777 <https://github.com/aio-libs/aiohttp/pull/777>`_)\n- Remove `web.Application` dependency from `web.UrlDispatcher` (`#1510 <https://github.com/aio-libs/aiohttp/pull/1510>`_)\n- Accepting back-pressure from slow websocket clients (`#1367 <https://github.com/aio-libs/aiohttp/pull/1367>`_)\n- Do not pause transport during set_parser stage (`#1211 <https://github.com/aio-libs/aiohttp/pull/1211>`_)\n- Lingering close does not terminate before timeout (`#1559 <https://github.com/aio-libs/aiohttp/pull/1559>`_)\n- `setsockopt` may raise `OSError` exception if socket is closed already (`#1595 <https://github.com/aio-libs/aiohttp/pull/1595>`_)\n- Lots of CancelledError when requests are interrupted (`#1565 <https://github.com/aio-libs/aiohttp/pull/1565>`_)\n- Allow users to specify what should happen to decoding errors\n  when calling a responses `text()` method (`#1542 <https://github.com/aio-libs/aiohttp/pull/1542>`_)\n- Back port std module `http.cookies` for python3.4.2 (`#1566 <https://github.com/aio-libs/aiohttp/pull/1566>`_)\n- Maintain url's fragment in client response (`#1314 <https://github.com/aio-libs/aiohttp/pull/1314>`_)\n- Allow concurrently close WebSocket connection (`#754 <https://github.com/aio-libs/aiohttp/pull/754>`_)\n- Gzipped responses with empty body raises ContentEncodingError (`#609 <https://github.com/aio-libs/aiohttp/pull/609>`_)\n- Return 504 if request handle raises TimeoutError.\n- Refactor how we use keep-alive and close lingering timeouts.\n- Close response connection if we can not consume whole http\n  message during client response release\n- Abort closed ssl client transports, broken servers can keep socket\n  open un-limit time (`#1568 <https://github.com/aio-libs/aiohttp/pull/1568>`_)\n- Log warning instead of `RuntimeError` is websocket connection is closed.\n- Deprecated: `aiohttp.protocol.HttpPrefixParser`\n  will be removed in 1.4 (`#1590 <https://github.com/aio-libs/aiohttp/pull/1590>`_)\n- Deprecated: Servers response's `.started`, `.start()` and\n  `.can_start()` method will be removed in 1.4 (`#1591 <https://github.com/aio-libs/aiohttp/pull/1591>`_)\n- Deprecated: Adding `sub app` via `app.router.add_subapp()` is deprecated\n  use `app.add_subapp()` instead, will be removed in 1.4 (`#1592 <https://github.com/aio-libs/aiohttp/pull/1592>`_)\n- Deprecated: aiohttp.get(), aiohttp.options(), aiohttp.head(), aiohttp.post(),\n  aiohttp.put(), aiohttp.patch(), aiohttp.delete(), and aiohttp.ws_connect()\n  will be removed in 1.4 (`#1593 <https://github.com/aio-libs/aiohttp/pull/1593>`_)\n- Deprecated: `Application.finish()` and `Application.register_on_finish()`\n  will be removed in 1.4 (`#1602 <https://github.com/aio-libs/aiohttp/pull/1602>`_)\n\n\n\n----\n\n\n1.2.0 (2016-12-17)\n==================\n\n- Extract `BaseRequest` from `web.Request`, introduce `web.Server`\n  (former `RequestHandlerFactory`), introduce new low-level web server\n  which is not coupled with `web.Application` and routing (`#1362 <https://github.com/aio-libs/aiohttp/pull/1362>`_)\n- Make `TestServer.make_url` compatible with `yarl.URL` (`#1389 <https://github.com/aio-libs/aiohttp/pull/1389>`_)\n- Implement range requests for static files (`#1382 <https://github.com/aio-libs/aiohttp/pull/1382>`_)\n- Support task attribute for StreamResponse (`#1410 <https://github.com/aio-libs/aiohttp/pull/1410>`_)\n- Drop `TestClient.app` property, use `TestClient.server.app` instead\n  (BACKWARD INCOMPATIBLE)\n- Drop `TestClient.handler` property, use `TestClient.server.handler` instead\n  (BACKWARD INCOMPATIBLE)\n- `TestClient.server` property returns a test server instance, was\n  `asyncio.AbstractServer` (BACKWARD INCOMPATIBLE)\n- Follow gunicorn's signal semantics in `Gunicorn[UVLoop]WebWorker` (`#1201 <https://github.com/aio-libs/aiohttp/pull/1201>`_)\n- Call worker_int and worker_abort callbacks in\n  `Gunicorn[UVLoop]WebWorker` (`#1202 <https://github.com/aio-libs/aiohttp/pull/1202>`_)\n- Has functional tests for client proxy (`#1218 <https://github.com/aio-libs/aiohttp/pull/1218>`_)\n- Fix bugs with client proxy target path and proxy host with port (`#1413 <https://github.com/aio-libs/aiohttp/pull/1413>`_)\n- Fix bugs related to the use of unicode hostnames (`#1444 <https://github.com/aio-libs/aiohttp/pull/1444>`_)\n- Preserve cookie quoting/escaping (`#1453 <https://github.com/aio-libs/aiohttp/pull/1453>`_)\n- FileSender will send gzipped response if gzip version available (`#1426 <https://github.com/aio-libs/aiohttp/pull/1426>`_)\n- Don't override `Content-Length` header in `web.Response` if no body\n  was set (`#1400 <https://github.com/aio-libs/aiohttp/pull/1400>`_)\n- Introduce `router.post_init()` for solving (`#1373 <https://github.com/aio-libs/aiohttp/pull/1373>`_)\n- Fix raise error in case of multiple calls of `TimeServive.stop()`\n- Allow to raise web exceptions on router resolving stage (`#1460 <https://github.com/aio-libs/aiohttp/pull/1460>`_)\n- Add a warning for session creation outside of coroutine (`#1468 <https://github.com/aio-libs/aiohttp/pull/1468>`_)\n- Avoid a race when application might start accepting incoming requests\n  but startup signals are not processed yet e98e8c6\n- Raise a `RuntimeError` when trying to change the status of the HTTP response\n  after the headers have been sent (`#1480 <https://github.com/aio-libs/aiohttp/pull/1480>`_)\n- Fix bug with https proxy acquired cleanup (`#1340 <https://github.com/aio-libs/aiohttp/pull/1340>`_)\n- Use UTF-8 as the default encoding for multipart text parts (`#1484 <https://github.com/aio-libs/aiohttp/pull/1484>`_)\n\n\n\n----\n\n\n1.1.6 (2016-11-28)\n==================\n\n- Fix `BodyPartReader.read_chunk` bug about returns zero bytes before\n  `EOF` (`#1428 <https://github.com/aio-libs/aiohttp/pull/1428>`_)\n\n\n\n----\n\n1.1.5 (2016-11-16)\n==================\n\n- Fix static file serving in fallback mode (`#1401 <https://github.com/aio-libs/aiohttp/pull/1401>`_)\n\n\n\n----\n\n1.1.4 (2016-11-14)\n==================\n\n- Make `TestServer.make_url` compatible with `yarl.URL` (`#1389 <https://github.com/aio-libs/aiohttp/pull/1389>`_)\n- Generate informative exception on redirects from server which\n  does not provide redirection headers (`#1396 <https://github.com/aio-libs/aiohttp/pull/1396>`_)\n\n\n\n----\n\n\n1.1.3 (2016-11-10)\n==================\n\n- Support *root* resources for sub-applications (`#1379 <https://github.com/aio-libs/aiohttp/pull/1379>`_)\n\n\n\n----\n\n\n1.1.2 (2016-11-08)\n==================\n\n- Allow starting variables with an underscore (`#1379 <https://github.com/aio-libs/aiohttp/pull/1379>`_)\n- Properly process UNIX sockets by gunicorn worker (`#1375 <https://github.com/aio-libs/aiohttp/pull/1375>`_)\n- Fix ordering for `FrozenList`\n- Don't propagate pre and post signals to sub-application (`#1377 <https://github.com/aio-libs/aiohttp/pull/1377>`_)\n\n\n\n----\n\n1.1.1 (2016-11-04)\n==================\n\n- Fix documentation generation (`#1120 <https://github.com/aio-libs/aiohttp/pull/1120>`_)\n\n\n\n----\n\n1.1.0 (2016-11-03)\n==================\n\n- Drop deprecated `WSClientDisconnectedError` (BACKWARD INCOMPATIBLE)\n- Use `yarl.URL` in client API. The change is 99% backward compatible\n  but `ClientResponse.url` is an `yarl.URL` instance now. (`#1217 <https://github.com/aio-libs/aiohttp/pull/1217>`_)\n- Close idle keep-alive connections on shutdown (`#1222 <https://github.com/aio-libs/aiohttp/pull/1222>`_)\n- Modify regex in AccessLogger to accept underscore and numbers (`#1225 <https://github.com/aio-libs/aiohttp/pull/1225>`_)\n- Use `yarl.URL` in web server API. `web.Request.rel_url` and `web.Request.url` are added. URLs and templates are\n  percent-encoded now. (`#1224 <https://github.com/aio-libs/aiohttp/pull/1224>`_)\n- Accept `yarl.URL` by server redirections (`#1278 <https://github.com/aio-libs/aiohttp/pull/1278>`_)\n- Return `yarl.URL` by `.make_url()` testing utility (`#1279 <https://github.com/aio-libs/aiohttp/pull/1279>`_)\n- Properly format IPv6 addresses by `aiohttp.web.run_app` (`#1139 <https://github.com/aio-libs/aiohttp/pull/1139>`_)\n- Use `yarl.URL` by server API (`#1288 <https://github.com/aio-libs/aiohttp/pull/1288>`_)\n\n  * Introduce `resource.url_for()`, deprecate `resource.url()`.\n  * Implement `StaticResource`.\n  * Inherit `SystemRoute` from `AbstractRoute`\n  * Drop old-style routes: `Route`, `PlainRoute`, `DynamicRoute`,\n    `StaticRoute`, `ResourceAdapter`.\n- Revert `resp.url` back to `str`, introduce `resp.url_obj` (`#1292 <https://github.com/aio-libs/aiohttp/pull/1292>`_)\n- Raise ValueError if BasicAuth login has a \":\" character (`#1307 <https://github.com/aio-libs/aiohttp/pull/1307>`_)\n- Fix bug when ClientRequest send payload file with opened as\n  open('filename', 'r+b') (`#1306 <https://github.com/aio-libs/aiohttp/pull/1306>`_)\n- Enhancement to AccessLogger (pass *extra* dict) (`#1303 <https://github.com/aio-libs/aiohttp/pull/1303>`_)\n- Show more verbose message on import errors (`#1319 <https://github.com/aio-libs/aiohttp/pull/1319>`_)\n- Added save and load functionality for `CookieJar` (`#1219 <https://github.com/aio-libs/aiohttp/pull/1219>`_)\n- Added option on `StaticRoute` to follow symlinks (`#1299 <https://github.com/aio-libs/aiohttp/pull/1299>`_)\n- Force encoding of `application/json` content type to utf-8 (`#1339 <https://github.com/aio-libs/aiohttp/pull/1339>`_)\n- Fix invalid invocations of `errors.LineTooLong` (`#1335 <https://github.com/aio-libs/aiohttp/pull/1335>`_)\n- Websockets: Stop `async for` iteration when connection is closed (`#1144 <https://github.com/aio-libs/aiohttp/pull/1144>`_)\n- Ensure TestClient HTTP methods return a context manager (`#1318 <https://github.com/aio-libs/aiohttp/pull/1318>`_)\n- Raise `ClientDisconnectedError` to `FlowControlStreamReader` read function\n  if `ClientSession` object is closed by client when reading data. (`#1323 <https://github.com/aio-libs/aiohttp/pull/1323>`_)\n- Document deployment without `Gunicorn` (`#1120 <https://github.com/aio-libs/aiohttp/pull/1120>`_)\n- Add deprecation warning for MD5 and SHA1 digests when used for fingerprint\n  of site certs in TCPConnector. (`#1186 <https://github.com/aio-libs/aiohttp/pull/1186>`_)\n- Implement sub-applications (`#1301 <https://github.com/aio-libs/aiohttp/pull/1301>`_)\n- Don't inherit `web.Request` from `dict` but implement\n  `MutableMapping` protocol.\n- Implement frozen signals\n- Don't inherit `web.Application` from `dict` but implement\n  `MutableMapping` protocol.\n- Support freezing for web applications\n- Accept access_log parameter in `web.run_app`, use `None` to disable logging\n- Don't flap `tcp_cork` and `tcp_nodelay` in regular request handling.\n  `tcp_nodelay` is still enabled by default.\n- Improve performance of web server by removing premature computing of\n  Content-Type if the value was set by `web.Response` constructor.\n\n  While the patch boosts speed of trivial `web.Response(text='OK',\n  content_type='text/plain)` very well please don't expect significant\n  boost of your application -- a couple DB requests and business logic\n  is still the main bottleneck.\n- Boost performance by adding a custom time service (`#1350 <https://github.com/aio-libs/aiohttp/pull/1350>`_)\n- Extend `ClientResponse` with `content_type` and `charset`\n  properties like in `web.Request`. (`#1349 <https://github.com/aio-libs/aiohttp/pull/1349>`_)\n- Disable aiodns by default (`#559 <https://github.com/aio-libs/aiohttp/pull/559>`_)\n- Don't flap `tcp_cork` in client code, use TCP_NODELAY mode by default.\n- Implement `web.Request.clone()` (`#1361 <https://github.com/aio-libs/aiohttp/pull/1361>`_)\n\n\n\n----\n\n1.0.5 (2016-10-11)\n==================\n\n- Fix StreamReader._read_nowait to return all available\n  data up to the requested amount (`#1297 <https://github.com/aio-libs/aiohttp/pull/1297>`_)\n\n\n\n----\n\n\n1.0.4 (2016-09-22)\n==================\n\n- Fix FlowControlStreamReader.read_nowait so that it checks\n  whether the transport is paused (`#1206 <https://github.com/aio-libs/aiohttp/pull/1206>`_)\n\n\n\n----\n\n\n1.0.2 (2016-09-22)\n==================\n\n- Make CookieJar compatible with 32-bit systems (`#1188 <https://github.com/aio-libs/aiohttp/pull/1188>`_)\n- Add missing `WSMsgType` to `web_ws.__all__`, see (`#1200 <https://github.com/aio-libs/aiohttp/pull/1200>`_)\n- Fix `CookieJar` ctor when called with `loop=None` (`#1203 <https://github.com/aio-libs/aiohttp/pull/1203>`_)\n- Fix broken upper-casing in wsgi support (`#1197 <https://github.com/aio-libs/aiohttp/pull/1197>`_)\n\n\n\n----\n\n\n1.0.1 (2016-09-16)\n==================\n\n- Restore `aiohttp.web.MsgType` alias for `aiohttp.WSMsgType` for sake\n  of backward compatibility (`#1178 <https://github.com/aio-libs/aiohttp/pull/1178>`_)\n- Tune alabaster schema.\n- Use `text/html` content type for displaying index pages by static\n  file handler.\n- Fix `AssertionError` in static file handling (`#1177 <https://github.com/aio-libs/aiohttp/pull/1177>`_)\n- Fix access log formats `%O` and `%b` for static file handling\n- Remove `debug` setting of GunicornWorker, use `app.debug`\n  to control its debug-mode instead\n\n\n\n----\n\n\n1.0.0 (2016-09-16)\n==================\n\n- Change default size for client session's connection pool from\n  unlimited to 20 (`#977 <https://github.com/aio-libs/aiohttp/pull/977>`_)\n- Add IE support for cookie deletion. (`#994 <https://github.com/aio-libs/aiohttp/pull/994>`_)\n- Remove deprecated `WebSocketResponse.wait_closed` method (BACKWARD\n  INCOMPATIBLE)\n- Remove deprecated `force` parameter for `ClientResponse.close`\n  method (BACKWARD INCOMPATIBLE)\n- Avoid using of mutable CIMultiDict kw param in make_mocked_request\n  (`#997 <https://github.com/aio-libs/aiohttp/pull/997>`_)\n- Make WebSocketResponse.close a little bit faster by avoiding new\n  task creating just for timeout measurement\n- Add `proxy` and `proxy_auth` params to `client.get()` and family,\n  deprecate `ProxyConnector` (`#998 <https://github.com/aio-libs/aiohttp/pull/998>`_)\n- Add support for websocket send_json and receive_json, synchronize\n  server and client API for websockets (`#984 <https://github.com/aio-libs/aiohttp/pull/984>`_)\n- Implement router shourtcuts for most useful HTTP methods, use\n  `app.router.add_get()`, `app.router.add_post()` etc. instead of\n  `app.router.add_route()` (`#986 <https://github.com/aio-libs/aiohttp/pull/986>`_)\n- Support SSL connections for gunicorn worker (`#1003 <https://github.com/aio-libs/aiohttp/pull/1003>`_)\n- Move obsolete examples to legacy folder\n- Switch to multidict 2.0 and title-cased strings (`#1015 <https://github.com/aio-libs/aiohttp/pull/1015>`_)\n- `{FOO}e` logger format is case-sensitive now\n- Fix logger report for unix socket 8e8469b\n- Rename aiohttp.websocket to aiohttp._ws_impl\n- Rename ``aiohttp.MsgType`` to ``aiohttp.WSMsgType``\n- Introduce ``aiohttp.WSMessage`` officially\n- Rename Message -> WSMessage\n- Remove deprecated decode param from resp.read(decode=True)\n- Use 5min default client timeout (`#1028 <https://github.com/aio-libs/aiohttp/pull/1028>`_)\n- Relax HTTP method validation in UrlDispatcher (`#1037 <https://github.com/aio-libs/aiohttp/pull/1037>`_)\n- Pin minimal supported asyncio version to 3.4.2+ (`loop.is_close()`\n  should be present)\n- Remove aiohttp.websocket module (BACKWARD INCOMPATIBLE)\n  Please use high-level client and server approaches\n- Link header for 451 status code is mandatory\n- Fix test_client fixture to allow multiple clients per test (`#1072 <https://github.com/aio-libs/aiohttp/pull/1072>`_)\n- make_mocked_request now accepts dict as headers (`#1073 <https://github.com/aio-libs/aiohttp/pull/1073>`_)\n- Add Python 3.5.2/3.6+ compatibility patch for async generator\n  protocol change (`#1082 <https://github.com/aio-libs/aiohttp/pull/1082>`_)\n- Improvement test_client can accept instance object (`#1083 <https://github.com/aio-libs/aiohttp/pull/1083>`_)\n- Simplify ServerHttpProtocol implementation (`#1060 <https://github.com/aio-libs/aiohttp/pull/1060>`_)\n- Add a flag for optional showing directory index for static file\n  handling (`#921 <https://github.com/aio-libs/aiohttp/pull/921>`_)\n- Define `web.Application.on_startup()` signal handler (`#1103 <https://github.com/aio-libs/aiohttp/pull/1103>`_)\n- Drop ChunkedParser and LinesParser (`#1111 <https://github.com/aio-libs/aiohttp/pull/1111>`_)\n- Call `Application.startup` in GunicornWebWorker (`#1105 <https://github.com/aio-libs/aiohttp/pull/1105>`_)\n- Fix client handling hostnames with 63 bytes when a port is given in\n  the url (`#1044 <https://github.com/aio-libs/aiohttp/pull/1044>`_)\n- Implement proxy support for ClientSession.ws_connect (`#1025 <https://github.com/aio-libs/aiohttp/pull/1025>`_)\n- Return named tuple from WebSocketResponse.can_prepare (`#1016 <https://github.com/aio-libs/aiohttp/pull/1016>`_)\n- Fix access_log_format in `GunicornWebWorker` (`#1117 <https://github.com/aio-libs/aiohttp/pull/1117>`_)\n- Setup Content-Type to application/octet-stream by default (`#1124 <https://github.com/aio-libs/aiohttp/pull/1124>`_)\n- Deprecate debug parameter from app.make_handler(), use\n  `Application(debug=True)` instead (`#1121 <https://github.com/aio-libs/aiohttp/pull/1121>`_)\n- Remove fragment string in request path (`#846 <https://github.com/aio-libs/aiohttp/pull/846>`_)\n- Use aiodns.DNSResolver.gethostbyname() if available (`#1136 <https://github.com/aio-libs/aiohttp/pull/1136>`_)\n- Fix static file sending on uvloop when sendfile is available (`#1093 <https://github.com/aio-libs/aiohttp/pull/1093>`_)\n- Make prettier urls if query is empty dict (`#1143 <https://github.com/aio-libs/aiohttp/pull/1143>`_)\n- Fix redirects for HEAD requests (`#1147 <https://github.com/aio-libs/aiohttp/pull/1147>`_)\n- Default value for `StreamReader.read_nowait` is -1 from now (`#1150 <https://github.com/aio-libs/aiohttp/pull/1150>`_)\n- `aiohttp.StreamReader` is not inherited from `asyncio.StreamReader` from now\n  (BACKWARD INCOMPATIBLE) (`#1150 <https://github.com/aio-libs/aiohttp/pull/1150>`_)\n- Streams documentation added (`#1150 <https://github.com/aio-libs/aiohttp/pull/1150>`_)\n- Add `multipart` coroutine method for web Request object (`#1067 <https://github.com/aio-libs/aiohttp/pull/1067>`_)\n- Publish ClientSession.loop property (`#1149 <https://github.com/aio-libs/aiohttp/pull/1149>`_)\n- Fix static file with spaces (`#1140 <https://github.com/aio-libs/aiohttp/pull/1140>`_)\n- Fix piling up asyncio loop by cookie expiration callbacks (`#1061 <https://github.com/aio-libs/aiohttp/pull/1061>`_)\n- Drop `Timeout` class for sake of `async_timeout` external library.\n  `aiohttp.Timeout` is an alias for `async_timeout.timeout`\n- `use_dns_cache` parameter of `aiohttp.TCPConnector` is `True` by\n  default (BACKWARD INCOMPATIBLE) (`#1152 <https://github.com/aio-libs/aiohttp/pull/1152>`_)\n- `aiohttp.TCPConnector` uses asynchronous DNS resolver if available by\n  default (BACKWARD INCOMPATIBLE) (`#1152 <https://github.com/aio-libs/aiohttp/pull/1152>`_)\n- Conform to RFC3986 - do not include url fragments in client requests (`#1174 <https://github.com/aio-libs/aiohttp/pull/1174>`_)\n- Drop `ClientSession.cookies` (BACKWARD INCOMPATIBLE) (`#1173 <https://github.com/aio-libs/aiohttp/pull/1173>`_)\n- Refactor `AbstractCookieJar` public API (BACKWARD INCOMPATIBLE) (`#1173 <https://github.com/aio-libs/aiohttp/pull/1173>`_)\n- Fix clashing cookies with have the same name but belong to different\n  domains (BACKWARD INCOMPATIBLE) (`#1125 <https://github.com/aio-libs/aiohttp/pull/1125>`_)\n- Support binary Content-Transfer-Encoding (`#1169 <https://github.com/aio-libs/aiohttp/pull/1169>`_)\n\n\n\n----\n\n\n0.22.5 (08-02-2016)\n===================\n\n- Pin miltidict version to >=1.2.2\n\n\n\n----\n\n0.22.3 (07-26-2016)\n===================\n\n- Do not filter cookies if unsafe flag provided (`#1005 <https://github.com/aio-libs/aiohttp/pull/1005>`_)\n\n\n\n----\n\n\n0.22.2 (07-23-2016)\n===================\n\n- Suppress CancelledError when Timeout raises TimeoutError (`#970 <https://github.com/aio-libs/aiohttp/pull/970>`_)\n- Don't expose `aiohttp.__version__`\n- Add unsafe parameter to CookieJar (`#968 <https://github.com/aio-libs/aiohttp/pull/968>`_)\n- Use unsafe cookie jar in test client tools\n- Expose aiohttp.CookieJar name\n\n\n\n----\n\n\n0.22.1 (07-16-2016)\n===================\n\n- Large cookie expiration/max-age does not break an event loop from now\n  (fixes (`#967 <https://github.com/aio-libs/aiohttp/pull/967>`_))\n\n\n\n----\n\n\n0.22.0 (07-15-2016)\n===================\n\n- Fix bug in serving static directory (`#803 <https://github.com/aio-libs/aiohttp/pull/803>`_)\n- Fix command line arg parsing (`#797 <https://github.com/aio-libs/aiohttp/pull/797>`_)\n- Fix a documentation chapter about cookie usage (`#790 <https://github.com/aio-libs/aiohttp/pull/790>`_)\n- Handle empty body with gzipped encoding (`#758 <https://github.com/aio-libs/aiohttp/pull/758>`_)\n- Support 451 Unavailable For Legal Reasons http status  (`#697 <https://github.com/aio-libs/aiohttp/pull/697>`_)\n- Fix Cookie share example and few small typos in docs (`#817 <https://github.com/aio-libs/aiohttp/pull/817>`_)\n- UrlDispatcher.add_route with partial coroutine handler (`#814 <https://github.com/aio-libs/aiohttp/pull/814>`_)\n- Optional support for aiodns (`#728 <https://github.com/aio-libs/aiohttp/pull/728>`_)\n- Add ServiceRestart and TryAgainLater websocket close codes (`#828 <https://github.com/aio-libs/aiohttp/pull/828>`_)\n- Fix prompt message for `web.run_app` (`#832 <https://github.com/aio-libs/aiohttp/pull/832>`_)\n- Allow to pass None as a timeout value to disable timeout logic (`#834 <https://github.com/aio-libs/aiohttp/pull/834>`_)\n- Fix leak of connection slot during connection error (`#835 <https://github.com/aio-libs/aiohttp/pull/835>`_)\n- Gunicorn worker with uvloop support\n  `aiohttp.worker.GunicornUVLoopWebWorker` (`#878 <https://github.com/aio-libs/aiohttp/pull/878>`_)\n- Don't send body in response to HEAD request (`#838 <https://github.com/aio-libs/aiohttp/pull/838>`_)\n- Skip the preamble in MultipartReader (`#881 <https://github.com/aio-libs/aiohttp/pull/881>`_)\n- Implement BasicAuth decode classmethod. (`#744 <https://github.com/aio-libs/aiohttp/pull/744>`_)\n- Don't crash logger when transport is None (`#889 <https://github.com/aio-libs/aiohttp/pull/889>`_)\n- Use a create_future compatibility wrapper instead of creating\n  Futures directly (`#896 <https://github.com/aio-libs/aiohttp/pull/896>`_)\n- Add test utilities to aiohttp (`#902 <https://github.com/aio-libs/aiohttp/pull/902>`_)\n- Improve Request.__repr__ (`#875 <https://github.com/aio-libs/aiohttp/pull/875>`_)\n- Skip DNS resolving if provided host is already an ip address (`#874 <https://github.com/aio-libs/aiohttp/pull/874>`_)\n- Add headers to ClientSession.ws_connect (`#785 <https://github.com/aio-libs/aiohttp/pull/785>`_)\n- Document that server can send pre-compressed data (`#906 <https://github.com/aio-libs/aiohttp/pull/906>`_)\n- Don't add Content-Encoding and Transfer-Encoding if no body (`#891 <https://github.com/aio-libs/aiohttp/pull/891>`_)\n- Add json() convenience methods to websocket message objects (`#897 <https://github.com/aio-libs/aiohttp/pull/897>`_)\n- Add client_resp.raise_for_status() (`#908 <https://github.com/aio-libs/aiohttp/pull/908>`_)\n- Implement cookie filter (`#799 <https://github.com/aio-libs/aiohttp/pull/799>`_)\n- Include an example of middleware to handle error pages (`#909 <https://github.com/aio-libs/aiohttp/pull/909>`_)\n- Fix error handling in StaticFileMixin (`#856 <https://github.com/aio-libs/aiohttp/pull/856>`_)\n- Add mocked request helper (`#900 <https://github.com/aio-libs/aiohttp/pull/900>`_)\n- Fix empty ALLOW Response header for cls based View (`#929 <https://github.com/aio-libs/aiohttp/pull/929>`_)\n- Respect CONNECT method to implement a proxy server (`#847 <https://github.com/aio-libs/aiohttp/pull/847>`_)\n- Add pytest_plugin (`#914 <https://github.com/aio-libs/aiohttp/pull/914>`_)\n- Add tutorial\n- Add backlog option to support more than 128 (default value in\n  \"create_server\" function) concurrent connections (`#892 <https://github.com/aio-libs/aiohttp/pull/892>`_)\n- Allow configuration of header size limits (`#912 <https://github.com/aio-libs/aiohttp/pull/912>`_)\n- Separate sending file logic from StaticRoute dispatcher (`#901 <https://github.com/aio-libs/aiohttp/pull/901>`_)\n- Drop deprecated share_cookies connector option (BACKWARD INCOMPATIBLE)\n- Drop deprecated support for tuple as auth parameter.\n  Use aiohttp.BasicAuth instead (BACKWARD INCOMPATIBLE)\n- Remove deprecated `request.payload` property, use `content` instead.\n  (BACKWARD INCOMPATIBLE)\n- Drop all mentions about api changes in documentation for versions\n  older than 0.16\n- Allow to override default cookie jar (`#963 <https://github.com/aio-libs/aiohttp/pull/963>`_)\n- Add manylinux wheel builds\n- Dup a socket for sendfile usage (`#964 <https://github.com/aio-libs/aiohttp/pull/964>`_)\n\n\n\n----\n\n0.21.6 (05-05-2016)\n===================\n\n- Drop initial query parameters on redirects (`#853 <https://github.com/aio-libs/aiohttp/pull/853>`_)\n\n\n\n----\n\n\n0.21.5 (03-22-2016)\n===================\n\n- Fix command line arg parsing (`#797 <https://github.com/aio-libs/aiohttp/pull/797>`_)\n\n\n\n----\n\n0.21.4 (03-12-2016)\n===================\n\n- Fix ResourceAdapter: don't add method to allowed if resource is not\n  match (`#826 <https://github.com/aio-libs/aiohttp/pull/826>`_)\n- Fix Resource: append found method to returned allowed methods\n\n\n\n----\n\n0.21.2 (02-16-2016)\n===================\n\n- Fix a regression: support for handling ~/path in static file routes was\n  broken (`#782 <https://github.com/aio-libs/aiohttp/pull/782>`_)\n\n\n\n----\n\n0.21.1 (02-10-2016)\n===================\n\n- Make new resources classes public (`#767 <https://github.com/aio-libs/aiohttp/pull/767>`_)\n- Add `router.resources()` view\n- Fix cmd-line parameter names in doc\n\n\n\n----\n\n0.21.0 (02-04-2016)\n===================\n\n- Introduce on_shutdown signal (`#722 <https://github.com/aio-libs/aiohttp/pull/722>`_)\n- Implement raw input headers (`#726 <https://github.com/aio-libs/aiohttp/pull/726>`_)\n- Implement web.run_app utility function (`#734 <https://github.com/aio-libs/aiohttp/pull/734>`_)\n- Introduce on_cleanup signal\n- Deprecate Application.finish() / Application.register_on_finish() in favor of on_cleanup.\n- Get rid of bare aiohttp.request(), aiohttp.get() and family in docs (`#729 <https://github.com/aio-libs/aiohttp/pull/729>`_)\n- Deprecate bare aiohttp.request(), aiohttp.get() and family (`#729 <https://github.com/aio-libs/aiohttp/pull/729>`_)\n- Refactor keep-alive support (`#737 <https://github.com/aio-libs/aiohttp/pull/737>`_)\n\n  - Enable keepalive for HTTP 1.0 by default\n  - Disable it for HTTP 0.9 (who cares about 0.9, BTW?)\n  - For keepalived connections\n\n      - Send `Connection: keep-alive` for HTTP 1.0 only\n      - don't send `Connection` header for HTTP 1.1\n  - For non-keepalived connections\n\n      - Send `Connection: close` for HTTP 1.1 only\n      - don't send `Connection` header for HTTP 1.0\n- Add version parameter to ClientSession constructor,\n  deprecate it for session.request() and family (`#736 <https://github.com/aio-libs/aiohttp/pull/736>`_)\n- Enable access log by default (`#735 <https://github.com/aio-libs/aiohttp/pull/735>`_)\n- Deprecate app.router.register_route() (the method was not documented intentionally BTW).\n- Deprecate app.router.named_routes() in favor of app.router.named_resources()\n- route.add_static accepts pathlib.Path now (`#743 <https://github.com/aio-libs/aiohttp/pull/743>`_)\n- Add command line support: `$ python -m aiohttp.web package.main` (`#740 <https://github.com/aio-libs/aiohttp/pull/740>`_)\n- FAQ section was added to docs. Enjoy and fill free to contribute new topics\n- Add async context manager support to ClientSession\n- Document ClientResponse's host, method, url properties\n- Use CORK/NODELAY in client API (`#748 <https://github.com/aio-libs/aiohttp/pull/748>`_)\n- ClientSession.close and Connector.close are coroutines now\n- Close client connection on exception in ClientResponse.release()\n- Allow to read multipart parts without content-length specified (`#750 <https://github.com/aio-libs/aiohttp/pull/750>`_)\n- Add support for unix domain sockets to gunicorn worker (`#470 <https://github.com/aio-libs/aiohttp/pull/470>`_)\n- Add test for default Expect handler (`#601 <https://github.com/aio-libs/aiohttp/pull/601>`_)\n- Add the first demo project\n- Rename `loader` keyword argument in `web.Request.json` method. (`#646 <https://github.com/aio-libs/aiohttp/pull/646>`_)\n- Add local socket binding for TCPConnector (`#678 <https://github.com/aio-libs/aiohttp/pull/678>`_)\n\n\n\n----\n\n0.20.2 (01-07-2016)\n===================\n\n- Enable use of `await` for a class based view (`#717 <https://github.com/aio-libs/aiohttp/pull/717>`_)\n- Check address family to fill wsgi env properly (`#718 <https://github.com/aio-libs/aiohttp/pull/718>`_)\n- Fix memory leak in headers processing (thanks to Marco Paolini) (`#723 <https://github.com/aio-libs/aiohttp/pull/723>`_\n\n\n\n----)\n\n0.20.1 (12-30-2015)\n===================\n\n- Raise RuntimeError is Timeout context manager was used outside of\n  task context.\n- Add number of bytes to stream.read_nowait (`#700 <https://github.com/aio-libs/aiohttp/pull/700>`_)\n- Use X-FORWARDED-PROTO for wsgi.url_scheme when available\n\n\n\n----\n\n\n0.20.0 (12-28-2015)\n===================\n\n- Extend list of web exceptions, add HTTPMisdirectedRequest,\n  HTTPUpgradeRequired, HTTPPreconditionRequired, HTTPTooManyRequests,\n  HTTPRequestHeaderFieldsTooLarge, HTTPVariantAlsoNegotiates,\n  HTTPNotExtended, HTTPNetworkAuthenticationRequired status codes (`#644 <https://github.com/aio-libs/aiohttp/pull/644>`_)\n- Do not remove AUTHORIZATION header by WSGI handler (`#649 <https://github.com/aio-libs/aiohttp/pull/649>`_)\n- Fix broken support for https proxies with authentication (`#617 <https://github.com/aio-libs/aiohttp/pull/617>`_)\n- Get REMOTE_* and SEVER_* http vars from headers when listening on\n  unix socket (`#654 <https://github.com/aio-libs/aiohttp/pull/654>`_)\n- Add HTTP 308 support (`#663 <https://github.com/aio-libs/aiohttp/pull/663>`_)\n- Add Tf format (time to serve request in seconds, %06f format) to\n  access log (`#669 <https://github.com/aio-libs/aiohttp/pull/669>`_)\n- Remove one and a half years long deprecated\n  ClientResponse.read_and_close() method\n- Optimize chunked encoding: use a single syscall instead of 3 calls\n  on sending chunked encoded data\n- Use TCP_CORK and TCP_NODELAY to optimize network latency and\n  throughput (`#680 <https://github.com/aio-libs/aiohttp/pull/680>`_)\n- Websocket XOR performance improved (`#687 <https://github.com/aio-libs/aiohttp/pull/687>`_)\n- Avoid sending cookie attributes in Cookie header (`#613 <https://github.com/aio-libs/aiohttp/pull/613>`_)\n- Round server timeouts to seconds for grouping pending calls.  That\n  leads to less amount of poller syscalls e.g. epoll.poll(). (`#702 <https://github.com/aio-libs/aiohttp/pull/702>`_)\n- Close connection on websocket handshake error (`#703 <https://github.com/aio-libs/aiohttp/pull/703>`_)\n- Implement class based views (`#684 <https://github.com/aio-libs/aiohttp/pull/684>`_)\n- Add *headers* parameter to ws_connect() (`#709 <https://github.com/aio-libs/aiohttp/pull/709>`_)\n- Drop unused function `parse_remote_addr()` (`#708 <https://github.com/aio-libs/aiohttp/pull/708>`_)\n- Close session on exception (`#707 <https://github.com/aio-libs/aiohttp/pull/707>`_)\n- Store http code and headers in WSServerHandshakeError (`#706 <https://github.com/aio-libs/aiohttp/pull/706>`_)\n- Make some low-level message properties readonly (`#710 <https://github.com/aio-libs/aiohttp/pull/710>`_)\n\n\n\n----\n\n\n0.19.0 (11-25-2015)\n===================\n\n- Memory leak in ParserBuffer (`#579 <https://github.com/aio-libs/aiohttp/pull/579>`_)\n- Support gunicorn's `max_requests` settings in gunicorn worker\n- Fix wsgi environment building (`#573 <https://github.com/aio-libs/aiohttp/pull/573>`_)\n- Improve access logging (`#572 <https://github.com/aio-libs/aiohttp/pull/572>`_)\n- Drop unused host and port from low-level server (`#586 <https://github.com/aio-libs/aiohttp/pull/586>`_)\n- Add Python 3.5 `async for` implementation to server websocket (`#543 <https://github.com/aio-libs/aiohttp/pull/543>`_)\n- Add Python 3.5 `async for` implementation to client websocket\n- Add Python 3.5 `async with` implementation to client websocket\n- Add charset parameter to web.Response constructor (`#593 <https://github.com/aio-libs/aiohttp/pull/593>`_)\n- Forbid passing both Content-Type header and content_type or charset\n  params into web.Response constructor\n- Forbid duplicating of web.Application and web.Request (`#602 <https://github.com/aio-libs/aiohttp/pull/602>`_)\n- Add an option to pass Origin header in ws_connect (`#607 <https://github.com/aio-libs/aiohttp/pull/607>`_)\n- Add json_response function (`#592 <https://github.com/aio-libs/aiohttp/pull/592>`_)\n- Make concurrent connections respect limits (`#581 <https://github.com/aio-libs/aiohttp/pull/581>`_)\n- Collect history of responses if redirects occur (`#614 <https://github.com/aio-libs/aiohttp/pull/614>`_)\n- Enable passing pre-compressed data in requests (`#621 <https://github.com/aio-libs/aiohttp/pull/621>`_)\n- Expose named routes via UrlDispatcher.named_routes() (`#622 <https://github.com/aio-libs/aiohttp/pull/622>`_)\n- Allow disabling sendfile by environment variable AIOHTTP_NOSENDFILE (`#629 <https://github.com/aio-libs/aiohttp/pull/629>`_)\n- Use ensure_future if available\n- Always quote params for Content-Disposition (`#641 <https://github.com/aio-libs/aiohttp/pull/641>`_)\n- Support async for in multipart reader (`#640 <https://github.com/aio-libs/aiohttp/pull/640>`_)\n- Add Timeout context manager (`#611 <https://github.com/aio-libs/aiohttp/pull/611>`_)\n\n\n\n----\n\n0.18.4 (13-11-2015)\n===================\n\n- Relax rule for router names again by adding dash to allowed\n  characters: they may contain identifiers, dashes, dots and columns\n\n\n\n----\n\n0.18.3 (25-10-2015)\n===================\n\n- Fix formatting for _RequestContextManager helper (`#590 <https://github.com/aio-libs/aiohttp/pull/590>`_)\n\n\n\n----\n\n0.18.2 (22-10-2015)\n===================\n\n- Fix regression for OpenSSL < 1.0.0 (`#583 <https://github.com/aio-libs/aiohttp/pull/583>`_)\n\n\n\n----\n\n0.18.1 (20-10-2015)\n===================\n\n- Relax rule for router names: they may contain dots and columns\n  starting from now\n\n\n\n----\n\n0.18.0 (19-10-2015)\n===================\n\n- Use errors.HttpProcessingError.message as HTTP error reason and\n  message (`#459 <https://github.com/aio-libs/aiohttp/pull/459>`_)\n- Optimize cythonized multidict a bit\n- Change repr's of multidicts and multidict views\n- default headers in ClientSession are now case-insensitive\n- Make '=' char and 'wss://' schema safe in urls (`#477 <https://github.com/aio-libs/aiohttp/pull/477>`_)\n- `ClientResponse.close()` forces connection closing by default from now (`#479 <https://github.com/aio-libs/aiohttp/pull/479>`_)\n\n  N.B. Backward incompatible change: was `.close(force=False) Using\n  `force` parameter for the method is deprecated: use `.release()`\n  instead.\n- Properly requote URL's path (`#480 <https://github.com/aio-libs/aiohttp/pull/480>`_)\n- add `skip_auto_headers` parameter for client API (`#486 <https://github.com/aio-libs/aiohttp/pull/486>`_)\n- Properly parse URL path in aiohttp.web.Request (`#489 <https://github.com/aio-libs/aiohttp/pull/489>`_)\n- Raise RuntimeError when chunked enabled and HTTP is 1.0 (`#488 <https://github.com/aio-libs/aiohttp/pull/488>`_)\n- Fix a bug with processing io.BytesIO as data parameter for client API (`#500 <https://github.com/aio-libs/aiohttp/pull/500>`_)\n- Skip auto-generation of Content-Type header (`#507 <https://github.com/aio-libs/aiohttp/pull/507>`_)\n- Use sendfile facility for static file handling (`#503 <https://github.com/aio-libs/aiohttp/pull/503>`_)\n- Default `response_factory` in `app.router.add_static` now is\n  `StreamResponse`, not `None`. The functionality is not changed if\n  default is not specified.\n- Drop `ClientResponse.message` attribute, it was always implementation detail.\n- Streams are optimized for speed and mostly memory in case of a big\n  HTTP message sizes (`#496 <https://github.com/aio-libs/aiohttp/pull/496>`_)\n- Fix a bug for server-side cookies for dropping cookie and setting it\n  again without Max-Age parameter.\n- Don't trim redirect URL in client API (`#499 <https://github.com/aio-libs/aiohttp/pull/499>`_)\n- Extend precision of access log \"D\" to milliseconds (`#527 <https://github.com/aio-libs/aiohttp/pull/527>`_)\n- Deprecate `StreamResponse.start()` method in favor of\n  `StreamResponse.prepare()` coroutine (`#525 <https://github.com/aio-libs/aiohttp/pull/525>`_)\n\n  `.start()` is still supported but responses begun with `.start()`\n  does not call signal for response preparing to be sent.\n- Add `StreamReader.__repr__`\n- Drop Python 3.3 support, from now minimal required version is Python\n  3.4.1 (`#541 <https://github.com/aio-libs/aiohttp/pull/541>`_)\n- Add `async with` support for `ClientSession.request()` and family (`#536 <https://github.com/aio-libs/aiohttp/pull/536>`_)\n- Ignore message body on 204 and 304 responses (`#505 <https://github.com/aio-libs/aiohttp/pull/505>`_)\n- `TCPConnector` processed both IPv4 and IPv6 by default (`#559 <https://github.com/aio-libs/aiohttp/pull/559>`_)\n- Add `.routes()` view for urldispatcher (`#519 <https://github.com/aio-libs/aiohttp/pull/519>`_)\n- Route name should be a valid identifier name from now (`#567 <https://github.com/aio-libs/aiohttp/pull/567>`_)\n- Implement server signals (`#562 <https://github.com/aio-libs/aiohttp/pull/562>`_)\n- Drop a year-old deprecated *files* parameter from client API.\n- Added `async for` support for aiohttp stream (`#542 <https://github.com/aio-libs/aiohttp/pull/542>`_)\n\n\n\n----\n\n0.17.4 (09-29-2015)\n===================\n\n- Properly parse URL path in aiohttp.web.Request (`#489 <https://github.com/aio-libs/aiohttp/pull/489>`_)\n- Add missing coroutine decorator, the client api is await-compatible now\n\n\n\n----\n\n0.17.3 (08-28-2015)\n===================\n\n- Remove Content-Length header on compressed responses (`#450 <https://github.com/aio-libs/aiohttp/pull/450>`_)\n- Support Python 3.5\n- Improve performance of transport in-use list (`#472 <https://github.com/aio-libs/aiohttp/pull/472>`_)\n- Fix connection pooling (`#473 <https://github.com/aio-libs/aiohttp/pull/473>`_)\n\n\n\n----\n\n0.17.2 (08-11-2015)\n===================\n\n- Don't forget to pass `data` argument forward (`#462 <https://github.com/aio-libs/aiohttp/pull/462>`_)\n- Fix multipart read bytes count (`#463 <https://github.com/aio-libs/aiohttp/pull/463>`_)\n\n\n\n----\n\n0.17.1 (08-10-2015)\n===================\n\n- Fix multidict comparison to arbitrary abc.Mapping\n\n\n\n----\n\n0.17.0 (08-04-2015)\n===================\n\n- Make StaticRoute support Last-Modified and If-Modified-Since headers (`#386 <https://github.com/aio-libs/aiohttp/pull/386>`_)\n- Add Request.if_modified_since and Stream.Response.last_modified properties\n- Fix deflate compression when writing a chunked response (`#395 <https://github.com/aio-libs/aiohttp/pull/395>`_)\n- Request`s content-length header is cleared now after redirect from\n  POST method (`#391 <https://github.com/aio-libs/aiohttp/pull/391>`_)\n- Return a 400 if server received a non HTTP content (`#405 <https://github.com/aio-libs/aiohttp/pull/405>`_)\n- Fix keep-alive support for aiohttp clients (`#406 <https://github.com/aio-libs/aiohttp/pull/406>`_)\n- Allow gzip compression in high-level server response interface (`#403 <https://github.com/aio-libs/aiohttp/pull/403>`_)\n- Rename TCPConnector.resolve and family to dns_cache (`#415 <https://github.com/aio-libs/aiohttp/pull/415>`_)\n- Make UrlDispatcher ignore quoted characters during url matching (`#414 <https://github.com/aio-libs/aiohttp/pull/414>`_)\n  Backward-compatibility warning: this may change the url matched by\n  your queries if they send quoted character (like %2F for /) (`#414 <https://github.com/aio-libs/aiohttp/pull/414>`_)\n- Use optional cchardet accelerator if present (`#418 <https://github.com/aio-libs/aiohttp/pull/418>`_)\n- Borrow loop from Connector in ClientSession if loop is not set\n- Add context manager support to ClientSession for session closing.\n- Add toplevel get(), post(), put(), head(), delete(), options(),\n  patch() coroutines.\n- Fix IPv6 support for client API (`#425 <https://github.com/aio-libs/aiohttp/pull/425>`_)\n- Pass SSL context through proxy connector (`#421 <https://github.com/aio-libs/aiohttp/pull/421>`_)\n- Make the rule: path for add_route should start with slash\n- Don't process request finishing by low-level server on closed event loop\n- Don't override data if multiple files are uploaded with same key (`#433 <https://github.com/aio-libs/aiohttp/pull/433>`_)\n- Ensure multipart.BodyPartReader.read_chunk read all the necessary data\n  to avoid false assertions about malformed multipart payload\n- Don't send body for 204, 205 and 304 http exceptions (`#442 <https://github.com/aio-libs/aiohttp/pull/442>`_)\n- Correctly skip Cython compilation in MSVC not found (`#453 <https://github.com/aio-libs/aiohttp/pull/453>`_)\n- Add response factory to StaticRoute (`#456 <https://github.com/aio-libs/aiohttp/pull/456>`_)\n- Don't append trailing CRLF for multipart.BodyPartReader (`#454 <https://github.com/aio-libs/aiohttp/pull/454>`_)\n\n\n\n----\n\n\n0.16.6 (07-15-2015)\n===================\n\n- Skip compilation on Windows if vcvarsall.bat cannot be found (`#438 <https://github.com/aio-libs/aiohttp/pull/438>`_)\n\n\n\n----\n\n0.16.5 (06-13-2015)\n===================\n\n- Get rid of all comprehensions and yielding in _multidict (`#410 <https://github.com/aio-libs/aiohttp/pull/410>`_)\n\n\n\n----\n\n\n0.16.4 (06-13-2015)\n===================\n\n- Don't clear current exception in multidict's `__repr__` (cythonized\n  versions) (`#410 <https://github.com/aio-libs/aiohttp/pull/410>`_)\n\n\n\n----\n\n\n0.16.3 (05-30-2015)\n===================\n\n- Fix StaticRoute vulnerability to directory traversal attacks (`#380 <https://github.com/aio-libs/aiohttp/pull/380>`_)\n\n\n\n----\n\n\n0.16.2 (05-27-2015)\n===================\n\n- Update python version required for `__del__` usage: it's actually\n  3.4.1 instead of 3.4.0\n- Add check for presence of loop.is_closed() method before call the\n  former (`#378 <https://github.com/aio-libs/aiohttp/pull/378>`_)\n\n\n\n----\n\n\n0.16.1 (05-27-2015)\n===================\n\n- Fix regression in static file handling (`#377 <https://github.com/aio-libs/aiohttp/pull/377>`_)\n\n\n\n----\n\n0.16.0 (05-26-2015)\n===================\n\n- Unset waiter future after cancellation (`#363 <https://github.com/aio-libs/aiohttp/pull/363>`_)\n- Update request url with query parameters (`#372 <https://github.com/aio-libs/aiohttp/pull/372>`_)\n- Support new `fingerprint` param of TCPConnector to enable verifying\n  SSL certificates via MD5, SHA1, or SHA256 digest (`#366 <https://github.com/aio-libs/aiohttp/pull/366>`_)\n- Setup uploaded filename if field value is binary and transfer\n  encoding is not specified (`#349 <https://github.com/aio-libs/aiohttp/pull/349>`_)\n- Implement `ClientSession.close()` method\n- Implement `connector.closed` readonly property\n- Implement `ClientSession.closed` readonly property\n- Implement `ClientSession.connector` readonly property\n- Implement `ClientSession.detach` method\n- Add `__del__` to client-side objects: sessions, connectors,\n  connections, requests, responses.\n- Refactor connections cleanup by connector (`#357 <https://github.com/aio-libs/aiohttp/pull/357>`_)\n- Add `limit` parameter to connector constructor (`#358 <https://github.com/aio-libs/aiohttp/pull/358>`_)\n- Add `request.has_body` property (`#364 <https://github.com/aio-libs/aiohttp/pull/364>`_)\n- Add `response_class` parameter to `ws_connect()` (`#367 <https://github.com/aio-libs/aiohttp/pull/367>`_)\n- `ProxyConnector` does not support keep-alive requests by default\n  starting from now (`#368 <https://github.com/aio-libs/aiohttp/pull/368>`_)\n- Add `connector.force_close` property\n- Add ws_connect to ClientSession (`#374 <https://github.com/aio-libs/aiohttp/pull/374>`_)\n- Support optional `chunk_size` parameter in `router.add_static()`\n\n\n\n----\n\n\n0.15.3 (04-22-2015)\n===================\n\n- Fix graceful shutdown handling\n- Fix `Expect` header handling for not found and not allowed routes (`#340 <https://github.com/aio-libs/aiohttp/pull/340>`_)\n\n\n\n----\n\n\n0.15.2 (04-19-2015)\n===================\n\n- Flow control subsystem refactoring\n- HTTP server performance optimizations\n- Allow to match any request method with `*`\n- Explicitly call drain on transport (`#316 <https://github.com/aio-libs/aiohttp/pull/316>`_)\n- Make chardet module dependency mandatory (`#318 <https://github.com/aio-libs/aiohttp/pull/318>`_)\n- Support keep-alive for HTTP 1.0 (`#325 <https://github.com/aio-libs/aiohttp/pull/325>`_)\n- Do not chunk single file during upload (`#327 <https://github.com/aio-libs/aiohttp/pull/327>`_)\n- Add ClientSession object for cookie storage and default headers (`#328 <https://github.com/aio-libs/aiohttp/pull/328>`_)\n- Add `keep_alive_on` argument for HTTP server handler.\n\n\n\n----\n\n\n0.15.1 (03-31-2015)\n===================\n\n- Pass Autobahn Testsuite tests\n- Fixed websocket fragmentation\n- Fixed websocket close procedure\n- Fixed parser buffer limits\n- Added `timeout` parameter to WebSocketResponse ctor\n- Added `WebSocketResponse.close_code` attribute\n\n\n\n----\n\n\n0.15.0 (03-27-2015)\n===================\n\n- Client WebSockets support\n- New Multipart system (`#273 <https://github.com/aio-libs/aiohttp/pull/273>`_)\n- Support for \"Except\" header (`#287 <https://github.com/aio-libs/aiohttp/pull/287>`_) (`#267 <https://github.com/aio-libs/aiohttp/pull/267>`_)\n- Set default Content-Type for post requests (`#184 <https://github.com/aio-libs/aiohttp/pull/184>`_)\n- Fix issue with construction dynamic route with regexps and trailing slash (`#266 <https://github.com/aio-libs/aiohttp/pull/266>`_)\n- Add repr to web.Request\n- Add repr to web.Response\n- Add repr for NotFound and NotAllowed match infos\n- Add repr for web.Application\n- Add repr to UrlMappingMatchInfo (`#217 <https://github.com/aio-libs/aiohttp/pull/217>`_)\n- Gunicorn 19.2.x compatibility\n\n\n\n----\n\n\n0.14.4 (01-29-2015)\n===================\n\n- Fix issue with error during constructing of url with regex parts (`#264 <https://github.com/aio-libs/aiohttp/pull/264>`_)\n\n\n\n----\n\n\n0.14.3 (01-28-2015)\n===================\n\n- Use path='/' by default for cookies (`#261 <https://github.com/aio-libs/aiohttp/pull/261>`_)\n\n\n\n----\n\n\n0.14.2 (01-23-2015)\n===================\n\n- Connections leak in BaseConnector (`#253 <https://github.com/aio-libs/aiohttp/pull/253>`_)\n- Do not swallow websocket reader exceptions (`#255 <https://github.com/aio-libs/aiohttp/pull/255>`_)\n- web.Request's read, text, json are memorized (`#250 <https://github.com/aio-libs/aiohttp/pull/250>`_)\n\n\n\n----\n\n\n0.14.1 (01-15-2015)\n===================\n\n- HttpMessage._add_default_headers does not overwrite existing headers (`#216 <https://github.com/aio-libs/aiohttp/pull/216>`_)\n- Expose multidict classes at package level\n- add `aiohttp.web.WebSocketResponse`\n- According to RFC 6455 websocket subprotocol preference order is\n  provided by client, not by server\n- websocket's ping and pong accept optional message parameter\n- multidict views do not accept `getall` parameter anymore, it\n  returns the full body anyway.\n- multidicts have optional Cython optimization, cythonized version of\n  multidicts is about 5 times faster than pure Python.\n- multidict.getall() returns `list`, not `tuple`.\n- Backward incompatible change: now there are two mutable multidicts\n  (`MultiDict`, `CIMultiDict`) and two immutable multidict proxies\n  (`MultiDictProxy` and `CIMultiDictProxy`). Previous edition of\n  multidicts was not a part of public API BTW.\n- Router refactoring to push Not Allowed and Not Found in middleware processing\n- Convert `ConnectionError` to `aiohttp.DisconnectedError` and don't\n  eat `ConnectionError` exceptions from web handlers.\n- Remove hop headers from Response class, wsgi response still uses hop headers.\n- Allow to send raw chunked encoded response.\n- Allow to encode output bytes stream into chunked encoding.\n- Allow to compress output bytes stream with `deflate` encoding.\n- Server has 75 seconds keepalive timeout now, was non-keepalive by default.\n- Application does not accept `**kwargs` anymore ((`#243 <https://github.com/aio-libs/aiohttp/pull/243>`_)).\n- Request is inherited from dict now for making per-request storage to\n  middlewares ((`#242 <https://github.com/aio-libs/aiohttp/pull/242>`_)).\n\n\n\n----\n\n\n0.13.1 (12-31-2014)\n===================\n\n- Add `aiohttp.web.StreamResponse.started` property (`#213 <https://github.com/aio-libs/aiohttp/pull/213>`_)\n- HTML escape traceback text in `ServerHttpProtocol.handle_error`\n- Mention handler and middlewares in `aiohttp.web.RequestHandler.handle_request`\n  on error ((`#218 <https://github.com/aio-libs/aiohttp/pull/218>`_))\n\n\n\n----\n\n\n0.13.0 (12-29-2014)\n===================\n\n- `StreamResponse.charset` converts value to lower-case on assigning.\n- Chain exceptions when raise `ClientRequestError`.\n- Support custom regexps in route variables (`#204 <https://github.com/aio-libs/aiohttp/pull/204>`_)\n- Fixed graceful shutdown, disable keep-alive on connection closing.\n- Decode HTTP message with `utf-8` encoding, some servers send headers\n  in utf-8 encoding (`#207 <https://github.com/aio-libs/aiohttp/pull/207>`_)\n- Support `aiohtt.web` middlewares (`#209 <https://github.com/aio-libs/aiohttp/pull/209>`_)\n- Add ssl_context to TCPConnector (`#206 <https://github.com/aio-libs/aiohttp/pull/206>`_)\n\n\n\n----\n\n\n0.12.0 (12-12-2014)\n===================\n\n- Deep refactoring of `aiohttp.web` in backward-incompatible manner.\n  Sorry, we have to do this.\n- Automatically force aiohttp.web handlers to coroutines in\n  `UrlDispatcher.add_route()` (`#186 <https://github.com/aio-libs/aiohttp/pull/186>`_)\n- Rename `Request.POST()` function to `Request.post()`\n- Added POST attribute\n- Response processing refactoring: constructor does not accept Request\n  instance anymore.\n- Pass application instance to finish callback\n- Exceptions refactoring\n- Do not unquote query string in `aiohttp.web.Request`\n- Fix concurrent access to payload in `RequestHandle.handle_request()`\n- Add access logging to `aiohttp.web`\n- Gunicorn worker for `aiohttp.web`\n- Removed deprecated `AsyncGunicornWorker`\n- Removed deprecated HttpClient\n\n\n\n----\n\n\n0.11.0 (11-29-2014)\n===================\n\n- Support named routes in `aiohttp.web.UrlDispatcher` (`#179 <https://github.com/aio-libs/aiohttp/pull/179>`_)\n- Make websocket subprotocols conform to spec (`#181 <https://github.com/aio-libs/aiohttp/pull/181>`_)\n\n\n\n----\n\n\n0.10.2 (11-19-2014)\n===================\n\n- Don't unquote `environ['PATH_INFO']` in wsgi.py (`#177 <https://github.com/aio-libs/aiohttp/pull/177>`_)\n\n\n\n----\n\n\n0.10.1 (11-17-2014)\n===================\n\n- aiohttp.web.HTTPException and descendants now files response body\n  with string like `404: NotFound`\n- Fix multidict `__iter__`, the method should iterate over keys, not\n  (key, value) pairs.\n\n\n\n----\n\n\n0.10.0 (11-13-2014)\n===================\n\n- Add aiohttp.web subpackage for highlevel HTTP server support.\n- Add *reason* optional parameter to aiohttp.protocol.Response ctor.\n- Fix aiohttp.client bug for sending file without content-type.\n- Change error text for connection closed between server responses\n  from 'Can not read status line' to explicit 'Connection closed by\n  server'\n- Drop closed connections from connector (`#173 <https://github.com/aio-libs/aiohttp/pull/173>`_)\n- Set server.transport to None on .closing() (`#172 <https://github.com/aio-libs/aiohttp/pull/172>`_)\n\n\n\n----\n\n\n0.9.3 (10-30-2014)\n==================\n\n- Fix compatibility with asyncio 3.4.1+ (`#170 <https://github.com/aio-libs/aiohttp/pull/170>`_)\n\n\n\n----\n\n\n0.9.2 (10-16-2014)\n==================\n\n- Improve redirect handling (`#157 <https://github.com/aio-libs/aiohttp/pull/157>`_)\n- Send raw files as is (`#153 <https://github.com/aio-libs/aiohttp/pull/153>`_)\n- Better websocket support (`#150 <https://github.com/aio-libs/aiohttp/pull/150>`_)\n\n\n\n----\n\n\n0.9.1 (08-30-2014)\n==================\n\n- Added MultiDict support for client request params and data (`#114 <https://github.com/aio-libs/aiohttp/pull/114>`_).\n- Fixed parameter type for IncompleteRead exception (`#118 <https://github.com/aio-libs/aiohttp/pull/118>`_).\n- Strictly require ASCII headers names and values (`#137 <https://github.com/aio-libs/aiohttp/pull/137>`_)\n- Keep port in ProxyConnector (`#128 <https://github.com/aio-libs/aiohttp/pull/128>`_).\n- Python 3.4.1 compatibility (`#131 <https://github.com/aio-libs/aiohttp/pull/131>`_).\n\n\n\n----\n\n\n0.9.0 (07-08-2014)\n==================\n\n- Better client basic authentication support (`#112 <https://github.com/aio-libs/aiohttp/pull/112>`_).\n- Fixed incorrect line splitting in HttpRequestParser (`#97 <https://github.com/aio-libs/aiohttp/pull/97>`_).\n- Support StreamReader and DataQueue as request data.\n- Client files handling refactoring (`#20 <https://github.com/aio-libs/aiohttp/pull/20>`_).\n- Backward incompatible: Replace DataQueue with StreamReader for\n  request payload (`#87 <https://github.com/aio-libs/aiohttp/pull/87>`_).\n\n\n\n----\n\n\n0.8.4 (07-04-2014)\n==================\n\n- Change ProxyConnector authorization parameters.\n\n\n\n----\n\n\n0.8.3 (07-03-2014)\n==================\n\n- Publish TCPConnector properties: verify_ssl, family, resolve, resolved_hosts.\n- Don't parse message body for HEAD responses.\n- Refactor client response decoding.\n\n\n\n----\n\n\n0.8.2 (06-22-2014)\n==================\n\n- Make ProxyConnector.proxy immutable property.\n- Make UnixConnector.path immutable property.\n- Fix resource leak for aiohttp.request() with implicit connector.\n- Rename Connector's reuse_timeout to keepalive_timeout.\n\n\n\n----\n\n\n0.8.1 (06-18-2014)\n==================\n\n- Use case insensitive multidict for server request/response headers.\n- MultiDict.getall() accepts default value.\n- Catch server ConnectionError.\n- Accept MultiDict (and derived) instances in aiohttp.request header argument.\n- Proxy 'CONNECT' support.\n\n\n\n----\n\n\n0.8.0 (06-06-2014)\n==================\n\n- Add support for utf-8 values in HTTP headers\n- Allow to use custom response class instead of HttpResponse\n- Use MultiDict for client request headers\n- Use MultiDict for server request/response headers\n- Store response headers in ClientResponse.headers attribute\n- Get rid of timeout parameter in aiohttp.client API\n- Exceptions refactoring\n\n\n\n----\n\n\n0.7.3 (05-20-2014)\n==================\n\n- Simple HTTP proxy support.\n\n\n\n----\n\n\n0.7.2 (05-14-2014)\n==================\n\n- Get rid of `__del__` methods\n- Use ResourceWarning instead of logging warning record.\n\n\n\n----\n\n\n0.7.1 (04-28-2014)\n==================\n\n- Do not unquote client request urls.\n- Allow multiple waiters on transport drain.\n- Do not return client connection to pool in case of exceptions.\n- Rename SocketConnector to TCPConnector and UnixSocketConnector to\n  UnixConnector.\n\n\n\n----\n\n\n0.7.0 (04-16-2014)\n==================\n\n- Connection flow control.\n- HTTP client session/connection pool refactoring.\n- Better handling for bad server requests.\n\n\n\n----\n\n\n0.6.5 (03-29-2014)\n==================\n\n- Added client session reuse timeout.\n- Better client request cancellation support.\n- Better handling responses without content length.\n- Added HttpClient verify_ssl parameter support.\n\n\n\n----\n\n\n0.6.4 (02-27-2014)\n==================\n\n- Log content-length missing warning only for put and post requests.\n\n\n\n----\n\n\n0.6.3 (02-27-2014)\n==================\n\n- Better support for server exit.\n- Read response body until EOF if content-length is not defined (`#14 <https://github.com/aio-libs/aiohttp/pull/14>`_)\n\n\n\n----\n\n\n0.6.2 (02-18-2014)\n==================\n\n- Fix trailing char in allowed_methods.\n- Start slow request timer for first request.\n\n\n\n----\n\n\n0.6.1 (02-17-2014)\n==================\n\n- Added utility method HttpResponse.read_and_close()\n- Added slow request timeout.\n- Enable socket SO_KEEPALIVE if available.\n\n\n\n----\n\n\n0.6.0 (02-12-2014)\n==================\n\n- Better handling for process exit.\n\n\n\n----\n\n\n0.5.0 (01-29-2014)\n==================\n- Allow to use custom HttpRequest client class.\n- Use gunicorn keepalive setting for asynchronous worker.\n- Log leaking responses.\n- python 3.4 compatibility\n\n\n\n----\n\n\n0.4.4 (11-15-2013)\n==================\n\n- Resolve only AF_INET family, because it is not clear how to pass\n  extra info to asyncio.\n\n\n\n----\n\n\n0.4.3 (11-15-2013)\n==================\n\n- Allow to wait completion of request with `HttpResponse.wait_for_close()`\n\n\n\n----\n\n\n0.4.2 (11-14-2013)\n==================\n\n- Handle exception in client request stream.\n- Prevent host resolving for each client request.\n\n\n\n----\n\n\n0.4.1 (11-12-2013)\n==================\n\n- Added client support for `expect: 100-continue` header.\n\n\n\n----\n\n\n0.4 (11-06-2013)\n================\n\n- Added custom wsgi application close procedure\n- Fixed concurrent host failure in HttpClient\n\n\n\n----\n\n\n0.3 (11-04-2013)\n================\n\n- Added PortMapperWorker\n- Added HttpClient\n- Added TCP connection timeout to HTTP client\n- Better client connection errors handling\n- Gracefully handle process exit\n\n\n\n----\n\n\n0.2\n===\n\n- Fix packaging\n"
        },
        {
          "name": "CHANGES",
          "type": "tree",
          "content": null
        },
        {
          "name": "CODE_OF_CONDUCT.md",
          "type": "blob",
          "size": 3.1455078125,
          "content": "# Contributor Covenant Code of Conduct\n\n## Our Pledge\n\nIn the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to making participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, gender identity and expression, level of experience, nationality, personal appearance, race, religion, or sexual identity and orientation.\n\n## Our Standards\n\nExamples of behavior that contributes to creating a positive environment include:\n\n* Using welcoming and inclusive language\n* Being respectful of differing viewpoints and experiences\n* Gracefully accepting constructive criticism\n* Focusing on what is best for the community\n* Showing empathy towards other community members\n\nExamples of unacceptable behavior by participants include:\n\n* The use of sexualized language or imagery and unwelcome sexual attention or advances\n* Trolling, insulting/derogatory comments, and personal or political attacks\n* Public or private harassment\n* Publishing others' private information, such as a physical or electronic address, without explicit permission\n* Other conduct which could reasonably be considered inappropriate in a professional setting\n\n## Our Responsibilities\n\nProject maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.\n\nProject maintainers have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any contributor for other behaviors that they deem inappropriate, threatening, offensive, or harmful.\n\n## Scope\n\nThis Code of Conduct applies both within project spaces and in public spaces when an individual is representing the project or its community. Examples of representing a project or community include using an official project e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers.\n\n## Enforcement\n\nInstances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the project team at andrew.svetlov@gmail.com. The project team will review and investigate all complaints, and will respond in a way that it deems appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately.\n\nProject maintainers who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by other members of the project's leadership.\n\n## Attribution\n\nThis Code of Conduct is adapted from the [Contributor Covenant][homepage], version 1.4, available at [http://contributor-covenant.org/version/1/4][version]\n\n[homepage]: http://contributor-covenant.org\n[version]: http://contributor-covenant.org/version/1/4/\n"
        },
        {
          "name": "CONTRIBUTING.rst",
          "type": "blob",
          "size": 1.03515625,
          "content": "Contributing\n============\n\nInstructions for contributors\n-----------------------------\n\n\nIn order to make a clone of the GitHub_ repo: open the link and press the\n\"Fork\" button on the upper-right menu of the web page.\n\nI hope everybody knows how to work with git and github nowadays :)\n\nWorkflow is pretty straightforward:\n\n  1. Clone the GitHub_ repo using the ``--recurse-submodules`` argument\n\n  2. Setup your machine with the required development environment\n\n  3. Make a change\n\n  4. Make sure all tests passed\n\n  5. Add a file into the ``CHANGES`` folder, named after the ticket or PR number\n\n  6. Commit changes to your own aiohttp clone\n\n  7. Make a pull request from the github page of your clone against the master branch\n\n  8. Optionally make backport Pull Request(s) for landing a bug fix into released aiohttp versions.\n\n.. important::\n\n    Please open the \"`contributing <https://docs.aiohttp.org/en/stable/contributing.html>`_\"\n    documentation page to get detailed information about all steps.\n\n.. _GitHub: https://github.com/aio-libs/aiohttp\n"
        },
        {
          "name": "CONTRIBUTORS.txt",
          "type": "blob",
          "size": 5.818359375,
          "content": "- Contributors -\n----------------\nA. Jesse Jiryu Davis\nAbdur Rehman Ali\nAdam Bannister\nAdam Cooper\nAdam Horacek\nAdam Mills\nAdrian Krupa\nAdrin Chaves\nAhmed Tahri\nAlan Bogarin\nAlan Tse\nAlec Hanefeld\nAlejandro Gmez\nAleksandr Danshyn\nAleksey Kutepov\nAlex Hayes\nAlex Key\nAlex Khomchenko\nAlex Kuzmenko\nAlex Lisovoy\nAlexander Bayandin\nAlexander Karpinsky\nAlexander Koshevoy\nAlexander Malev\nAlexander Mohr\nAlexander Shorin\nAlexander Travov\nAlexandru Mihai\nAlexey Firsov\nAlexey Nikitin\nAlexey Popravka\nAlexey Stepanov\nAlmaz Salakhov\nAmin Etesamian\nAmit Tulshyan\nAmy Boyle\nAnas El Amraoui\nAnders Melchiorsen\nAndrei Ursulenko\nAndrej Antonov\nAndrew Leech\nAndrew Lytvyn\nAndrew Svetlov\nAndrew Zhou\nAndrii Soldatenko\nAnes Abismail\nAntoine Pietri\nAnton Kasyanov\nAnton Zhdan-Pushkin\nArcadiy Ivanov\nArie Bovenberg\nArseny Timoniq\nArtem Yushkovskiy\nArthur Darcet\nAustin Scola\nBai Haoran\nBen Bader\nBen Greiner\nBen Kallus\nBen Timby\nBenedikt Reinartz\nBob Haddleton\nBoris Feld\nBorys Vorona\nBoyi Chen\nBrett Cannon\nBrett Higgins\nBrian Bouterse\nBrian C. Lane\nBrian Muller\nBruce Merry\nBruno Souza Cabral\nBryan Kok\nBryce Drennan\nCarl George\nCecile Tonglet\nChien-Wei Huang\nChih-Yuan Chen\nChris AtLee\nChris Laws\nChris Moore\nChris Shucksmith\nChristopher Schmitt\nClaudiu Popa\nColin Dunklau\nCong Xu\nDamien Nad\nDan King\nDan Xu\nDaniel Garca\nDaniel Golding\nDaniel Grossmann-Kavanagh\nDaniel Nelson\nDaniele Trifir\nDanny Song\nDavid Bibb\nDavid Dzhalaev\nDavid Michael Brown\nDenilson Amorim\nDenis Matiychuk\nDenis Moshensky\nDennis Kliban\nDima Veselov\nDimitar Dimitrov\nDiogo Dutra da Mata\nDmitriy Safonov\nDmitry Doroshev\nDmitry Erlikh\nDmitry Lukashin\nDmitry Marakasov\nDmitry Shamov\nDmitry Trofimov\nDmytro Bohomiakov\nDmytro Kuznetsov\nDustin J. Mitchell\nEduard Iskandarov\nEli Ribble\nElizabeth Leddy\nEmil Melnikov\nEnrique Saez\nEric Sheng\nErich Healy\nErik Peterson\nEugene Chernyshov\nEugene Ershov\nEugene Naydenov\nEugene Nikolaiev\nEugene Tolmachev\nEvan Kepner\nEvert Lammerts\nFelix Yan\nFernanda Guimares\nFichteFoll\nFlorian Scheffler\nFranek Magiera\nFrederik Gladhorn\nFrederik Peter Aalund\nGabriel Tremblay\nGang Ji\nGary Wilson Jr.\nGennady Andreyev\nGeorges Dubus\nGreg Holt\nGregory Haynes\nGus Goulart\nGustavo Carneiro\nGnther Jena\nHans Adema\nHarmon Y.\nHarry Liu\nHiroshi Ogawa\nHrishikesh Paranjape\nHu Bo\nHugh Young\nHugo Herter\nHugo Hromic\nHugo van Kemenade\nHynek Schlawack\nIgor Alexandrov\nIgor Bolshakov\nIgor Davydenko\nIgor Mozharovsky\nIgor Pavlov\nIllia Volochii\nIlya Chichak\nIlya Gruzinov\nIngmar Steen\nIvan Lakovic\nIvan Larin\nJ. Nick Koston\nJacob Champion\nJaesung Lee\nJake Davis\nJakob Ackermann\nJakub Wilk\nJames Ward\nJan Buchar\nJan Gosmann\nJarno Elonen\nJashandeep Sohi\nJavier Torres\nJean-Baptiste Estival\nJens Steinhauser\nJeonghun Lee\nJeongkyu Shin\nJeroen van der Heijden\nJesus Cea\nJian Zeng\nJinkyu Yi\nJoel Watts\nJohn Parton\nJon Nabozny\nJonas Krger Svensson\nJonas Obrist\nJonathan Ballet\nJonathan Wright\nJonny Tan\nJoongi Kim\nJordan Borean\nJosep Cugat\nJosh Junon\nJoshu Coats\nJulia Tsemusheva\nJulien Duponchelle\nJungkook Park\nJunjie Tao\nJunyeong Jeong\nJustas Trimailovas\nJustin Foo\nJustin Turner Arthur\nKay Zheng\nKevin Samuel\nKimmo Parviainen-Jalanko\nKirill Klenov\nKirill Malovitsa\nKonstantin Shutkin\nKonstantin Valetov\nKrzysztof Blazewicz\nKyrylo Perevozchikov\nKyungmin Lee\nLars P. Sndergaard\nLee LieWhite\nLiu Hua\nLouis-Philippe Huberdeau\nLoc Lajeanne\nLu Gong\nLubomir Gelo\nLudovic Gasc\nLuis Pedrosa\nLukasz Marcin Dobrzanski\nLnrd Szolnoki\nMakc Belousow\nManuel Miranda\nMarat Sharafutdinov\nMarc Mueller\nMarco Paolini\nMarcus Stojcevich\nMariano Anaya\nMariusz Masztalerczuk\nMarko Kohtala\nMartijn Pieters\nMartin Melka\nMartin Richard\nMartin Sucha\nMathias Frjdman\nMathieu Dugr\nMatt VanEseltine\nMatthias Marquardt\nMatthieu Hauglustaine\nMatthieu Rigal\nMatvey Tingaev\nMeet Mangukiya\nMeshya\nMichael Ihnatenko\nMicha Grny\nMikhail Burshteyn\nMikhail Kashkin\nMikhail Lukyanchenko\nMikhail Nacharov\nMisha Behersky\nMitchell Ferree\nMorgan Delahaye-Prat\nMoss Collum\nMun Gwan-gyeong\nNavid Sheikhol\nNicolas Braem\nNikolay Kim\nNikolay Novik\nNikolay Tiunov\nNndor Mtravlgyi\nOisin Aylward\nOlaf Conradi\nOleg Hfling\nPahaz Blinov\nPanagiotis Kolokotronis\nPankaj Pandey\nParag Jain\nPau Freixes\nPaul Colomiets\nPaul J. Dorn\nPaulius ileikis\nPaulus Schoutsen\nPavel Kamaev\nPavel Polyakov\nPavel Sapezhko\nPavol Vargovk\nPawel Kowalski\nPawel Miech\nPepe Osca\nPhilipp A.\nPierre-Louis Peeters\nPieter van Beek\nQiao Han\nRafael Viotti\nRahul Nahata\nRaphael Bialon\nRal Cumplido\nRequired Field\nRobert Lu\nRobert Nikolich\nRoman Markeloff\nRoman Podoliaka\nRong Zhang\nSamir Akarioh\nSamuel Colvin\nSean Hunt\nSebastian Acuna\nSebastian Hanula\nSebastian Hther\nSebastien Geffroy\nSeongSoo Cho\nSergey Ninua\nSergey Skripnick\nSerhii Charykov\nSerhii Kostel\nSerhiy Storchaka\nShubh Agarwal\nSimon Kennedy\nSin-Woo Bang\nStanislas Plum\nStanislav Prokop\nStefan Tjarks\nStepan Pletnev\nStephan Jaensch\nStephen Cirelli\nStephen Granade\nSteve Repsher\nSteven Seguin\nSunghyun Hwang\nSunit Deshpande\nSviatoslav Bulbakha\nSviatoslav Sydorenko\nTaha Jahangir\nTaras Voinarovskyi\nTerence Honles\nThanos Lefteris\nThijs Vermeir\nThomas Forbes\nThomas Grainger\nTolga Tezel\nTomasz Trebski\nToshiaki Tanaka\nTrinh Hoang Nhu\nTymofii Tsiapa\nVadim Suharnikov\nVaibhav Sagar\nVamsi Krishna Avula\nVasiliy Faronov\nVasyl Baran\nViacheslav Greshilov\nVictor Collod\nVictor Kovtun\nVictor Makarov\nVikas Kawadia\nViktor Danyliuk\nVille Skytt\nVincent Maillol\nVitalik Verhovodov\nVitaly Haritonsky\nVitaly Magerya\nVladimir Kamarzin\nVladimir Kozlovski\nVladimir Rutsky\nVladimir Shulyak\nVladimir Zakharov\nVladyslav Bohaichuk\nVladyslav Bondar\nW. Trevor King\nWei Lin\nWeiwei Wang\nWill Fatherley\nWill McGugan\nWillem de Groot\nWilliam Grzybowski\nWilliam S.\nWilson Ong\nwouter bolsterlee\nXavier Halloran\nXi Rui\nXiang Li\nYang Zhou\nYannick Koechlin\nYannick Proux\nYe Cao\nYegor Roganov\nYifei Kong\nYoung-Ho Cha\nYuriy Shatrov\nYury Pliner\nYury Selivanov\nYusuke Tsutsumi\nYuval Ofir\nYuvi Panda\nZainab Lawal\nZeal Wierslee\nZlatan Sianica\nukasz Setla\n \n \n"
        },
        {
          "name": "LICENSE.txt",
          "type": "blob",
          "size": 0.57421875,
          "content": "   Copyright aio-libs contributors.\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n"
        },
        {
          "name": "MANIFEST.in",
          "type": "blob",
          "size": 0.4033203125,
          "content": "include LICENSE.txt\ninclude CHANGES.rst\ninclude README.rst\ninclude CONTRIBUTORS.txt\ninclude Makefile\ngraft aiohttp\ngraft docs\ngraft examples\ngraft tests\ngraft requirements\nrecursive-include vendor *\nglobal-include aiohttp *.pyi\nglobal-exclude *.pyc\nglobal-exclude *.pyd\nglobal-exclude *.so\nglobal-exclude *.lib\nglobal-exclude *.dll\nglobal-exclude *.a\nglobal-exclude *.obj\nexclude aiohttp/*.html\nprune docs/_build\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 5.7021484375,
          "content": "# Some simple testing tasks (sorry, UNIX only).\n\nto-hash-one = $(dir $1).hash/$(addsuffix .hash,$(notdir $1))\nto-hash = $(foreach fname,$1,$(call to-hash-one,$(fname)))\n\nCYS := $(wildcard aiohttp/*.pyx) $(wildcard aiohttp/*.pyi)  $(wildcard aiohttp/*.pxd) $(wildcard aiohttp/_websocket/*.pyx) $(wildcard aiohttp/_websocket/*.pyi) $(wildcard aiohttp/_websocket/*.pxd)\nPYXS := $(wildcard aiohttp/*.pyx) $(wildcard aiohttp/_websocket/*.pyx)\nCS := $(wildcard aiohttp/*.c) $(wildcard aiohttp/_websocket/*.c)\nPYS := $(wildcard aiohttp/*.py) $(wildcard aiohttp/_websocket/*.py)\nIN := doc-spelling lint cython dev\nALLS := $(sort $(CYS) $(CS) $(PYS) $(REQS))\n\n\n.PHONY: all\nall: test\n\ntst:\n\t@echo $(call to-hash,requirements/cython.txt)\n\t@echo $(call to-hash,aiohttp/%.pyx)\n\n\n# Recipe from https://www.cmcrossroads.com/article/rebuilding-when-files-checksum-changes\nFORCE:\n\n# check_sum.py works perfectly fine but slow when called for every file from $(ALLS)\n# (perhaps even several times for each file).\n# That is why much less readable but faster solution exists\nifneq (, $(shell command -v sha256sum))\n%.hash: FORCE\n\t$(eval $@_ABS := $(abspath $@))\n\t$(eval $@_NAME := $($@_ABS))\n\t$(eval $@_HASHDIR := $(dir $($@_ABS)))\n\t$(eval $@_TMP := $($@_HASHDIR)../$(notdir $($@_ABS)))\n\t$(eval $@_ORIG := $(subst /.hash/../,/,$(basename $($@_TMP))))\n\t@#echo ==== $($@_ABS) $($@_HASHDIR) $($@_NAME) $($@_TMP) $($@_ORIG)\n\t@if ! (sha256sum --check $($@_ABS) 1>/dev/null 2>/dev/null); then \\\n\t  mkdir -p $($@_HASHDIR); \\\n\t  echo re-hash $($@_ORIG); \\\n\t  sha256sum $($@_ORIG) > $($@_ABS); \\\n\tfi\nelse\n%.hash: FORCE\n\t@./tools/check_sum.py $@ # --debug\nendif\n\n# Enumerate intermediate files to don't remove them automatically.\n.SECONDARY: $(call to-hash,$(ALLS))\n\n.update-pip:\n\t@python -m pip install --upgrade pip\n\n.install-cython: .update-pip $(call to-hash,requirements/cython.txt)\n\t@python -m pip install -r requirements/cython.in -c requirements/cython.txt\n\t@touch .install-cython\n\naiohttp/_find_header.c: $(call to-hash,aiohttp/hdrs.py ./tools/gen.py)\n\t./tools/gen.py\n\n# Special case for reader since we want to be able to disable\n# the extension with AIOHTTP_NO_EXTENSIONS\naiohttp/_websocket/reader_c.c: aiohttp/_websocket/reader_c.py\n\tcython -3 -o $@ $< -I aiohttp -Werror\n\n# _find_headers generator creates _headers.pyi as well\naiohttp/%.c: aiohttp/%.pyx $(call to-hash,$(CYS)) aiohttp/_find_header.c\n\tcython -3 -o $@ $< -I aiohttp -Werror\n\naiohttp/_websocket/%.c: aiohttp/_websocket/%.pyx $(call to-hash,$(CYS))\n\tcython -3 -o $@ $< -I aiohttp -Werror\n\nvendor/llhttp/node_modules: vendor/llhttp/package.json\n\tcd vendor/llhttp; npm ci\n\n.llhttp-gen: vendor/llhttp/node_modules\n\t$(MAKE) -C vendor/llhttp generate\n\t@touch .llhttp-gen\n\n.PHONY: generate-llhttp\ngenerate-llhttp: .llhttp-gen\n\n.PHONY: cythonize\ncythonize: .install-cython $(PYXS:.pyx=.c) aiohttp/_websocket/reader_c.c\n\n.install-deps: .install-cython $(PYXS:.pyx=.c) aiohttp/_websocket/reader_c.c $(call to-hash,$(CYS) $(REQS))\n\t@python -m pip install -r requirements/dev.in -c requirements/dev.txt\n\t@touch .install-deps\n\n.PHONY: lint\nlint: fmt mypy\n\n.PHONY: fmt format\nfmt format:\n\tpython -m pre_commit run --all-files --show-diff-on-failure\n\n.PHONY: mypy\nmypy:\n\tmypy\n\n.develop: .install-deps generate-llhttp $(call to-hash,$(PYS) $(CYS) $(CS))\n\tpython -m pip install -e . -c requirements/runtime-deps.txt\n\t@touch .develop\n\n.PHONY: test\ntest: .develop\n\t@pytest -q\n\n.PHONY: vtest\nvtest: .develop\n\t@pytest -s -v\n\t@python -X dev -m pytest --cov-append -s -v -m dev_mode\n\n.PHONY: vvtest\nvvtest: .develop\n\t@pytest -vv\n\t@python -X dev -m pytest --cov-append -s -vv -m dev_mode\n\n.PHONY: cov-dev\ncov-dev: .develop\n\t@pytest --cov-report=html\n\t@echo \"xdg-open file://`pwd`/htmlcov/index.html\"\n\n\ndefine run_tests_in_docker\n\tDOCKER_BUILDKIT=1 docker build --build-arg PYTHON_VERSION=$(1) --build-arg AIOHTTP_NO_EXTENSIONS=$(2) -t \"aiohttp-test-$(1)-$(2)\" -f tools/testing/Dockerfile .\n\tdocker run --rm -ti -v `pwd`:/src -w /src \"aiohttp-test-$(1)-$(2)\" $(TEST_SPEC)\nendef\n\n.PHONY: test-3.9-no-extensions test\ntest-3.9-no-extensions:\n\t$(call run_tests_in_docker,3.9,y)\ntest-3.9:\n\t$(call run_tests_in_docker,3.9,n)\ntest-3.10-no-extensions:\n\t$(call run_tests_in_docker,3.10,y)\ntest-3.10:\n\t$(call run_tests_in_docker,3.10,n)\n\n.PHONY: clean\nclean:\n\t@rm -rf `find . -name __pycache__`\n\t@rm -rf `find . -name .hash`\n\t@rm -rf `find . -name .md5`  # old styling\n\t@rm -f `find . -type f -name '*.py[co]' `\n\t@rm -f `find . -type f -name '*~' `\n\t@rm -f `find . -type f -name '.*~' `\n\t@rm -f `find . -type f -name '@*' `\n\t@rm -f `find . -type f -name '#*#' `\n\t@rm -f `find . -type f -name '*.orig' `\n\t@rm -f `find . -type f -name '*.rej' `\n\t@rm -f `find . -type f -name '*.md5' `  # old styling\n\t@rm -f .coverage\n\t@rm -rf htmlcov\n\t@rm -rf build\n\t@rm -rf cover\n\t@make -C docs clean\n\t@python setup.py clean\n\t@rm -f aiohttp/*.so\n\t@rm -f aiohttp/*.pyd\n\t@rm -f aiohttp/*.html\n\t@rm -f aiohttp/_frozenlist.c\n\t@rm -f aiohttp/_find_header.c\n\t@rm -f aiohttp/_http_parser.c\n\t@rm -f aiohttp/_http_writer.c\n\t@rm -f aiohttp/_websocket.c\n\t@rm -f aiohttp/_websocket/reader_c.c\n\t@rm -rf .tox\n\t@rm -f .develop\n\t@rm -f .flake\n\t@rm -rf aiohttp.egg-info\n\t@rm -f .install-deps\n\t@rm -f .install-cython\n\t@rm -rf vendor/llhttp/node_modules\n\t@rm -f .llhttp-gen\n\t@$(MAKE) -C vendor/llhttp clean\n\n.PHONY: doc\ndoc:\n\t@make -C docs html SPHINXOPTS=\"-W --keep-going -n -E\"\n\t@echo \"open file://`pwd`/docs/_build/html/index.html\"\n\n.PHONY: doc-spelling\ndoc-spelling:\n\t@make -C docs spelling SPHINXOPTS=\"-W --keep-going -n -E\"\n\n.PHONY: install\ninstall: .update-pip\n\t@python -m pip install -r requirements/dev.in -c requirements/dev.txt\n\n.PHONY: install-dev\ninstall-dev: .develop\n\n.PHONY: sync-direct-runtime-deps\nsync-direct-runtime-deps:\n\t@echo Updating 'requirements/runtime-deps.in' from 'setup.cfg'... >&2\n\t@python requirements/sync-direct-runtime-deps.py\n"
        },
        {
          "name": "README.rst",
          "type": "blob",
          "size": 5.330078125,
          "content": "==================================\nAsync http client/server framework\n==================================\n\n.. image:: https://raw.githubusercontent.com/aio-libs/aiohttp/master/docs/aiohttp-plain.svg\n   :height: 64px\n   :width: 64px\n   :alt: aiohttp logo\n\n|\n\n.. image:: https://github.com/aio-libs/aiohttp/workflows/CI/badge.svg\n   :target: https://github.com/aio-libs/aiohttp/actions?query=workflow%3ACI\n   :alt: GitHub Actions status for master branch\n\n.. image:: https://codecov.io/gh/aio-libs/aiohttp/branch/master/graph/badge.svg\n   :target: https://codecov.io/gh/aio-libs/aiohttp\n   :alt: codecov.io status for master branch\n\n.. image:: https://img.shields.io/endpoint?url=https://codspeed.io/badge.json\n   :target: https://codspeed.io/aio-libs/aiohttp\n   :alt: Codspeed.io status for aiohttp\n\n.. image:: https://badge.fury.io/py/aiohttp.svg\n   :target: https://pypi.org/project/aiohttp\n   :alt: Latest PyPI package version\n\n.. image:: https://img.shields.io/pypi/dm/aiohttp\n   :target: https://pypistats.org/packages/aiohttp\n   :alt: Downloads count\n\n.. image:: https://readthedocs.org/projects/aiohttp/badge/?version=latest\n   :target: https://docs.aiohttp.org/\n   :alt: Latest Read The Docs\n\n.. image:: https://img.shields.io/matrix/aio-libs:matrix.org?label=Discuss%20on%20Matrix%20at%20%23aio-libs%3Amatrix.org&logo=matrix&server_fqdn=matrix.org&style=flat\n   :target: https://matrix.to/#/%23aio-libs:matrix.org\n   :alt: Matrix Room  #aio-libs:matrix.org\n\n.. image:: https://img.shields.io/matrix/aio-libs-space:matrix.org?label=Discuss%20on%20Matrix%20at%20%23aio-libs-space%3Amatrix.org&logo=matrix&server_fqdn=matrix.org&style=flat\n   :target: https://matrix.to/#/%23aio-libs-space:matrix.org\n   :alt: Matrix Space  #aio-libs-space:matrix.org\n\n\nKey Features\n============\n\n- Supports both client and server side of HTTP protocol.\n- Supports both client and server Web-Sockets out-of-the-box and avoids\n  Callback Hell.\n- Provides Web-server with middleware and pluggable routing.\n\n\nGetting started\n===============\n\nClient\n------\n\nTo get something from the web:\n\n.. code-block:: python\n\n  import aiohttp\n  import asyncio\n\n  async def main():\n\n      async with aiohttp.ClientSession() as session:\n          async with session.get('http://python.org') as response:\n\n              print(\"Status:\", response.status)\n              print(\"Content-type:\", response.headers['content-type'])\n\n              html = await response.text()\n              print(\"Body:\", html[:15], \"...\")\n\n  asyncio.run(main())\n\nThis prints:\n\n.. code-block::\n\n    Status: 200\n    Content-type: text/html; charset=utf-8\n    Body: <!doctype html> ...\n\nComing from `requests <https://requests.readthedocs.io/>`_ ? Read `why we need so many lines <https://aiohttp.readthedocs.io/en/latest/http_request_lifecycle.html>`_.\n\nServer\n------\n\nAn example using a simple server:\n\n.. code-block:: python\n\n    # examples/server_simple.py\n    from aiohttp import web\n\n    async def handle(request):\n        name = request.match_info.get('name', \"Anonymous\")\n        text = \"Hello, \" + name\n        return web.Response(text=text)\n\n    async def wshandle(request):\n        ws = web.WebSocketResponse()\n        await ws.prepare(request)\n\n        async for msg in ws:\n            if msg.type == web.WSMsgType.text:\n                await ws.send_str(\"Hello, {}\".format(msg.data))\n            elif msg.type == web.WSMsgType.binary:\n                await ws.send_bytes(msg.data)\n            elif msg.type == web.WSMsgType.close:\n                break\n\n        return ws\n\n\n    app = web.Application()\n    app.add_routes([web.get('/', handle),\n                    web.get('/echo', wshandle),\n                    web.get('/{name}', handle)])\n\n    if __name__ == '__main__':\n        web.run_app(app)\n\n\nDocumentation\n=============\n\nhttps://aiohttp.readthedocs.io/\n\n\nDemos\n=====\n\nhttps://github.com/aio-libs/aiohttp-demos\n\n\nExternal links\n==============\n\n* `Third party libraries\n  <http://aiohttp.readthedocs.io/en/latest/third_party.html>`_\n* `Built with aiohttp\n  <http://aiohttp.readthedocs.io/en/latest/built_with.html>`_\n* `Powered by aiohttp\n  <http://aiohttp.readthedocs.io/en/latest/powered_by.html>`_\n\nFeel free to make a Pull Request for adding your link to these pages!\n\n\nCommunication channels\n======================\n\n*aio-libs Discussions*: https://github.com/aio-libs/aiohttp/discussions\n\n*Matrix*: `#aio-libs:matrix.org <https://matrix.to/#/#aio-libs:matrix.org>`_\n\nWe support `Stack Overflow\n<https://stackoverflow.com/questions/tagged/aiohttp>`_.\nPlease add *aiohttp* tag to your question there.\n\nRequirements\n============\n\n- multidict_\n- yarl_\n- frozenlist_\n\nOptionally you may install the aiodns_ library (highly recommended for sake of speed).\n\n.. _aiodns: https://pypi.python.org/pypi/aiodns\n.. _multidict: https://pypi.python.org/pypi/multidict\n.. _frozenlist: https://pypi.org/project/frozenlist/\n.. _yarl: https://pypi.python.org/pypi/yarl\n\nLicense\n=======\n\n``aiohttp`` is offered under the Apache 2 license.\n\n\nKeepsafe\n========\n\nThe aiohttp community would like to thank Keepsafe\n(https://www.getkeepsafe.com) for its support in the early days of\nthe project.\n\n\nSource code\n===========\n\nThe latest developer version is available in a GitHub repository:\nhttps://github.com/aio-libs/aiohttp\n\nBenchmarks\n==========\n\nIf you are interested in efficiency, the AsyncIO community maintains a\nlist of benchmarks on the official wiki:\nhttps://github.com/python/asyncio/wiki/Benchmarks\n"
        },
        {
          "name": "aiohttp",
          "type": "tree",
          "content": null
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "examples",
          "type": "tree",
          "content": null
        },
        {
          "name": "pyproject.toml",
          "type": "blob",
          "size": 2.8916015625,
          "content": "[build-system]\nrequires = [\n    \"setuptools >= 46.4.0\",\n]\nbuild-backend = \"setuptools.build_meta\"\n\n[tool.towncrier]\n  package = \"aiohttp\"\n  filename = \"CHANGES.rst\"\n  directory = \"CHANGES/\"\n  title_format = \"{version} ({project_date})\"\n  template = \"CHANGES/.TEMPLATE.rst\"\n  issue_format = \"{issue}\"\n\n  # NOTE: The types are declared because:\n  # NOTE: - there is no mechanism to override just the value of\n  # NOTE:   `tool.towncrier.type.misc.showcontent`;\n  # NOTE: - and, we want to declare extra non-default types for\n  # NOTE:   clarity and flexibility.\n\n  [[tool.towncrier.section]]\n    path = \"\"\n\n  [[tool.towncrier.type]]\n    # Something we deemed an improper undesired behavior that got corrected\n    # in the release to match pre-agreed expectations.\n    directory = \"bugfix\"\n    name = \"Bug fixes\"\n    showcontent = true\n\n  [[tool.towncrier.type]]\n    # New behaviors, public APIs. That sort of stuff.\n    directory = \"feature\"\n    name = \"Features\"\n    showcontent = true\n\n  [[tool.towncrier.type]]\n    # Declarations of future API removals and breaking changes in behavior.\n    directory = \"deprecation\"\n    name = \"Deprecations (removal in next major release)\"\n    showcontent = true\n\n  [[tool.towncrier.type]]\n    # When something public gets removed in a breaking way. Could be\n    # deprecated in an earlier release.\n    directory = \"breaking\"\n    name = \"Removals and backward incompatible breaking changes\"\n    showcontent = true\n\n  [[tool.towncrier.type]]\n    # Notable updates to the documentation structure or build process.\n    directory = \"doc\"\n    name = \"Improved documentation\"\n    showcontent = true\n\n  [[tool.towncrier.type]]\n    # Notes for downstreams about unobvious side effects and tooling. Changes\n    # in the test invocation considerations and runtime assumptions.\n    directory = \"packaging\"\n    name = \"Packaging updates and notes for downstreams\"\n    showcontent = true\n\n  [[tool.towncrier.type]]\n    # Stuff that affects the contributor experience. e.g. Running tests,\n    # building the docs, setting up the development environment.\n    directory = \"contrib\"\n    name = \"Contributor-facing changes\"\n    showcontent = true\n\n  [[tool.towncrier.type]]\n    # Changes that are hard to assign to any of the above categories.\n    directory = \"misc\"\n    name = \"Miscellaneous internal changes\"\n    showcontent = true\n\n\n[tool.cibuildwheel]\ntest-command = \"\"\n# don't build PyPy wheels, install from source instead\nskip = \"pp*\"\n\n[tool.codespell]\nskip = '.git,*.pdf,*.svg,Makefile,CONTRIBUTORS.txt,venvs,_build'\nignore-words-list = 'te,assertIn'\n\n[tool.slotscheck]\n# TODO(3.13): Remove aiohttp.helpers once https://github.com/python/cpython/pull/106771\n# is available in all supported cpython versions\nexclude-modules = \"(^aiohttp\\\\.helpers)\"\n\n[tool.black]\n# TODO: Remove when project metadata is moved here.\n# Black can read the value from [project.requires-python].\ntarget-version = [\"py39\", \"py310\", \"py311\", \"py312\", \"py313\"]\n"
        },
        {
          "name": "requirements",
          "type": "tree",
          "content": null
        },
        {
          "name": "setup.cfg",
          "type": "blob",
          "size": 5.935546875,
          "content": "[metadata]\nname = aiohttp\nversion = attr: aiohttp.__version__\nurl = https://github.com/aio-libs/aiohttp\nproject_urls =\n  Chat: Matrix = https://matrix.to/#/#aio-libs:matrix.org\n  Chat: Matrix Space = https://matrix.to/#/#aio-libs-space:matrix.org\n  CI: GitHub Actions = https://github.com/aio-libs/aiohttp/actions?query=workflow%%3ACI\n  Coverage: codecov = https://codecov.io/github/aio-libs/aiohttp\n  Docs: Changelog = https://docs.aiohttp.org/en/stable/changes.html\n  Docs: RTD = https://docs.aiohttp.org\n  GitHub: issues = https://github.com/aio-libs/aiohttp/issues\n  GitHub: repo = https://github.com/aio-libs/aiohttp\ndescription = Async http client/server framework (asyncio)\nlong_description = file: README.rst\nlong_description_content_type = text/x-rst\nmaintainer = aiohttp team <team@aiohttp.org>\nmaintainer_email = team@aiohttp.org\nlicense = Apache-2.0\nlicense_files = LICENSE.txt\nclassifiers =\n  Development Status :: 5 - Production/Stable\n\n  Framework :: AsyncIO\n\n  Intended Audience :: Developers\n\n  License :: OSI Approved :: Apache Software License\n\n  Operating System :: POSIX\n  Operating System :: MacOS :: MacOS X\n  Operating System :: Microsoft :: Windows\n\n  Programming Language :: Python\n  Programming Language :: Python :: 3\n  Programming Language :: Python :: 3.9\n  Programming Language :: Python :: 3.10\n  Programming Language :: Python :: 3.11\n  Programming Language :: Python :: 3.12\n  Programming Language :: Python :: 3.13\n\n  Topic :: Internet :: WWW/HTTP\n\n[options]\npython_requires = >=3.9\npackages =\n  aiohttp\n  aiohttp._websocket\n# https://setuptools.readthedocs.io/en/latest/setuptools.html#setting-the-zip-safe-flag\nzip_safe = False\ninclude_package_data = True\n\ninstall_requires =\n  aiohappyeyeballs >= 2.3.0\n  aiosignal >= 1.1.2\n  async-timeout >= 4.0, < 6.0 ; python_version < \"3.11\"\n  frozenlist >= 1.1.1\n  multidict >=4.5, < 7.0\n  propcache >= 0.2.0\n  yarl >= 1.17.0, < 2.0\n\n[options.exclude_package_data]\n* =\n    *.c\n    *.h\n\n[options.extras_require]\nspeedups =\n  # required c-ares (aiodns' backend) will not build on windows\n  aiodns >= 3.2.0; sys_platform==\"linux\" or sys_platform==\"darwin\"\n  Brotli; platform_python_implementation == 'CPython'\n  brotlicffi; platform_python_implementation != 'CPython'\n\n[options.packages.find]\nexclude =\n  examples\n\n[options.package_data]\n# Ref:\n# https://setuptools.readthedocs.io/en/latest/setuptools.html#options\n# (see notes for the asterisk/`*` meaning)\n* =\n    *.so\n\n[pep8]\nmax-line-length=79\n\n[easy_install]\nzip_ok = false\n\n[flake8]\nextend-select =\n  B950,\n  # NIC001 -- \"Implicitly concatenated str literals on one line\"\n  NIC001,\n  # NIC101 -- \"Implicitly concatenated bytes literals on one line\"\n  NIC101,\n# TODO: don't disable D*, fix up issues instead\nignore = N801,N802,N803,NIC002,NIC102,E203,E226,E305,W504,E252,E301,E302,E501,E704,W503,W504,D1,D4\nmax-line-length = 88\nper-file-ignores =\n    # I900: Shouldn't appear in requirements for examples.\n    examples/*:I900\n\n# flake8-requirements\nknown-modules = proxy.py:[proxy]\nrequirements-file = requirements/test.in\nrequirements-max-depth = 4\n\n[isort]\nline_length=88\ninclude_trailing_comma=True\nmulti_line_output=3\nforce_grid_wrap=0\ncombine_as_imports=True\n\nknown_third_party=jinja2,pytest,multidict,yarl,gunicorn,freezegun\nknown_first_party=aiohttp,aiohttp_jinja2,aiopg\n\n[report]\nexclude_lines =\n    @abc.abstractmethod\n    @abstractmethod\n\n[tool:pytest]\naddopts =\n    # `pytest-xdist`:\n    --numprocesses=auto\n\n    # show 10 slowest invocations:\n    --durations=10\n\n    # a bit of verbosity doesn't hurt:\n    -v\n\n    # report all the things == -rxXs:\n    -ra\n\n    # show values of the local vars in errors:\n    --showlocals\n\n    # `pytest-cov`:\n    -p pytest_cov\n    --cov=aiohttp\n    --cov=tests/\n\n    # run tests that are not marked with dev_mode\n    -m \"not dev_mode\"\nfilterwarnings =\n    error\n    ignore:module 'ssl' has no attribute 'OP_NO_COMPRESSION'. The Python interpreter is compiled against OpenSSL < 1.0.0. Ref. https.//docs.python.org/3/library/ssl.html#ssl.OP_NO_COMPRESSION:UserWarning\n    ignore:Unclosed client session <aiohttp.client.ClientSession object at 0x:ResourceWarning\n    ignore:The loop argument is deprecated:DeprecationWarning:asyncio\n    ignore:Creating a LegacyVersion has been deprecated and will be removed in the next major release:DeprecationWarning::\n    # The following deprecation warning is triggered by importing\n    # `gunicorn.util`. Hopefully, it'll get fixed in the future. See\n    # https://github.com/benoitc/gunicorn/issues/2840 for detail.\n    ignore:module 'sre_constants' is deprecated:DeprecationWarning:pkg_resources._vendor.pyparsing\n    # Deprecation warning emitted by setuptools v67.5.0+ triggered by importing\n    # `gunicorn.util`.\n    ignore:pkg_resources is deprecated as an API:DeprecationWarning\n    # The deprecation warning below is happening under Python 3.11 and\n    # is fixed by https://github.com/certifi/python-certifi/pull/199. It\n    # can be dropped with the next release of `certify`, specifically\n    # `certify > 2022.06.15`.\n    ignore:path is deprecated. Use files.. instead. Refer to https.//importlib-resources.readthedocs.io/en/latest/using.html#migrating-from-legacy for migration advice.:DeprecationWarning:certifi.core\n    # Dateutil deprecation warning already fixed upstream.\n    # Can be dropped with the next release, `dateutil > 2.8.2`\n    # https://github.com/dateutil/dateutil/pull/1285\n    ignore:datetime.*utcfromtimestamp\\(\\) is deprecated and scheduled for removal:DeprecationWarning:dateutil.tz.tz\n    # Tracked upstream and waiting for PR review\n    # https://github.com/spulec/freezegun/issues/508\n    # https://github.com/spulec/freezegun/pull/511\n    ignore:datetime.*utcnow\\(\\) is deprecated and scheduled for removal:DeprecationWarning:freezegun.api\njunit_suite_name = aiohttp_test_suite\nnorecursedirs = dist docs build .tox .eggs\nminversion = 3.8.2\ntestpaths = tests/\nxfail_strict = true\nmarkers =\n    dev_mode: mark test to run in dev mode.\n    internal: tests which may cause issues for packagers, but should be run in aiohttp's CI.\n"
        },
        {
          "name": "setup.py",
          "type": "blob",
          "size": 1.5927734375,
          "content": "import os\nimport pathlib\nimport sys\n\nfrom setuptools import Extension, setup\n\nif sys.version_info < (3, 9):\n    raise RuntimeError(\"aiohttp 4.x requires Python 3.9+\")\n\n\nNO_EXTENSIONS: bool = bool(os.environ.get(\"AIOHTTP_NO_EXTENSIONS\"))\nHERE = pathlib.Path(__file__).parent\nIS_GIT_REPO = (HERE / \".git\").exists()\n\n\nif sys.implementation.name != \"cpython\":\n    NO_EXTENSIONS = True\n\n\nif IS_GIT_REPO and not (HERE / \"vendor/llhttp/README.md\").exists():\n    print(\"Install submodules when building from git clone\", file=sys.stderr)\n    print(\"Hint:\", file=sys.stderr)\n    print(\"  git submodule update --init\", file=sys.stderr)\n    sys.exit(2)\n\n\n# NOTE: makefile cythonizes all Cython modules\n\nextensions = [\n    Extension(\"aiohttp._websocket.mask\", [\"aiohttp/_websocket/mask.c\"]),\n    Extension(\n        \"aiohttp._http_parser\",\n        [\n            \"aiohttp/_http_parser.c\",\n            \"aiohttp/_find_header.c\",\n            \"vendor/llhttp/build/c/llhttp.c\",\n            \"vendor/llhttp/src/native/api.c\",\n            \"vendor/llhttp/src/native/http.c\",\n        ],\n        define_macros=[(\"LLHTTP_STRICT_MODE\", 0)],\n        include_dirs=[\"vendor/llhttp/build\"],\n    ),\n    Extension(\"aiohttp._http_writer\", [\"aiohttp/_http_writer.c\"]),\n    Extension(\"aiohttp._websocket.reader_c\", [\"aiohttp/_websocket/reader_c.c\"]),\n]\n\n\nbuild_type = \"Pure\" if NO_EXTENSIONS else \"Accelerated\"\nsetup_kwargs = {} if NO_EXTENSIONS else {\"ext_modules\": extensions}\n\nprint(\"*********************\", file=sys.stderr)\nprint(\"* {build_type} build *\".format_map(locals()), file=sys.stderr)\nprint(\"*********************\", file=sys.stderr)\nsetup(**setup_kwargs)\n"
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "tools",
          "type": "tree",
          "content": null
        },
        {
          "name": "vendor",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}