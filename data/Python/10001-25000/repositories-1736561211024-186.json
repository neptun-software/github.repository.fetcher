{
  "metadata": {
    "timestamp": 1736561211024,
    "page": 186,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjE5MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "pjialin/py12306",
      "stars": 14509,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.0908203125,
          "content": ".idea\n.vscode\n.DS_Store\nvenv\n__pycache__\nenv.py\nenv.slave.py\nenv.docker.py\ndocker-compose.yml"
        },
        {
          "name": ".gitpod.yml",
          "type": "blob",
          "size": 0.1435546875,
          "content": "ports:\n- port: 8008\n  onOpen: open-preview\ntasks:\n- init: pip install -r requirements.txt && cp env.py.example env.py\n  command: python main.py -t\n"
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 0.32421875,
          "content": "FROM python:3.6.6-slim\n\nMAINTAINER <pjialin admin@pjialin.com>\nENV TZ Asia/Shanghai\n\nWORKDIR /code\n\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n\nRUN mkdir -p /data/query /data/user\nVOLUME /data\n\nCOPY . .\n\nCOPY env.docker.py.example /config/env.py\n\nCMD [ \"python\", \"main.py\" , \"-c\", \"/config/env.py\"]\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 11.08984375,
          "content": "                                 Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n   APPENDIX: How to apply the Apache License to your work.\n\n      To apply the Apache License to your work, attach the following\n      boilerplate notice, with the fields enclosed by brackets \"[]\"\n      replaced with your own identifying information. (Don't include\n      the brackets!)  The text should be enclosed in the appropriate\n      comment syntax for the file format. We also recommend that a\n      file or class name and description of purpose be included on the\n      same \"printed page\" as the copyright notice for easier\n      identification within third-party archives.\n\n   Copyright [yyyy] [name of copyright owner]\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License."
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 4.56640625,
          "content": "# 🚂 py12306 购票助手\n分布式，多账号，多任务购票\n\n## Features\n- [x] 多日期查询余票\n- [x] 自动打码下单\n- [x] 用户状态恢复\n- [x] 电话语音通知\n- [x] 多账号、多任务、多线程支持\n- [x] 单个任务多站点查询 \n- [x] 分布式运行\n- [x] Docker 支持\n- [x] 动态修改配置文件\n- [x] 邮件通知\n- [x] Web 管理页面\n- [x] 微信消息通知\n- [ ] 代理池支持 ([pyproxy-async](https://github.com/pjialin/pyproxy-async))\n\n## 使用\npy12306 需要运行在 python 3.6 以上版本（其它版本暂未测试)\n\n**1. 安装依赖**\n```bash\ngit clone https://github.com/pjialin/py12306\n\npip install -r requirements.txt\n```\n\n**2. 配置程序**\n```bash\ncp env.py.example env.py\n```\n自动打码\n\n（若快已停止服务，目前只能设置**free**打码模式）\nfree 已对接到打码共享平台，[https://py12306-helper.pjialin.com](https://py12306-helper.pjialin.com/)，欢迎参与分享\n\n语音通知\n\n语音验证码使用的是阿里云 API 市场上的一个服务商，需要到 [https://market.aliyun.com/products/56928004/cmapi026600.html](https://market.aliyun.com/products/56928004/cmapi026600.html) 购买后将 appcode 填写到配置中\n\n**3. 启动前测试**\n\n目前提供了一些简单的测试，包括用户账号检测，乘客信息检测，车站检测等\n\n开始测试 -t \n```bash\npython main.py -t\n```\n\n测试通知消息 (语音, 邮件) -t -n\n```bash\n# 默认不会进行通知测试，要对通知进行测试需要加上 -n 参数 \npython main.py -t -n\n```\n\n**4. 运行程序**\n```bash\npython main.py\n```\n\n### 参数列表\n\n- -t 测试配置信息\n- -t -n 测试配置信息以及通知消息\n- -c 指定自定义配置文件位置\n\n### 分布式集群\n\n集群依赖于 redis，目前支持情况\n- 单台主节点多个子节点同时运行\n- 主节点宕机后自动切换提升子节点为主节点\n- 主节点恢复后自动恢复为真实主节点\n- 配置通过主节点同步到所有子节点\n- 主节点配置修改后无需重启子节点，支持自动更新\n- 子节点消息实时同步到主节点\n\n**使用**\n\n将配置文件的中 `CLUSTER_ENABLED` 打开即开启分布式\n\n目前提供了一个单独的子节点配置文件 `env.slave.py.example` 将文件修改为 `env.slave.py`， 通过 `python main.py -c env.slave.py` 即可快速启动\n\n\n## Docker 使用\n**1. 将配置文件下载到本地**\n```bash\ndocker run --rm pjialin/py12306 cat /config/env.py > env.py\n# 或\ncurl https://raw.githubusercontent.com/pjialin/py12306/master/env.docker.py.example -o env.py\n```\n\n**2. 修改好配置后运行**\n```bash\ndocker run --rm --name py12306 -p 8008:8008 -d -v $(pwd):/config -v py12306:/data pjialin/py12306\n```\n当前目录会多一个 12306.log 的日志文件， `tail -f 12306.log`\n\n### Docker-compose 中使用\n**1. 复制配置文件**\n```\ncp docker-compose.yml.example docker-compose.yml\n```\n\n**2. 从 docker-compose 运行**\n\n在`docker-compose.yml`所在的目录使用命令\n```\ndocker-compose up -d\n```\n\n## Web 管理页面\n\n目前支持用户和任务以及实时日志查看，更多功能后续会不断加入\n\n**使用**\n\n打开 Web 功能需要将配置中的 `WEB_ENABLE` 打开，启动程序后访问当前主机地址 + 端口号 (默认 8008) 即可，如 http://127.0.0.1:8008\n\n## 更新\n- 19-01-10\n    - 支持分布式集群\n- 19-01-11\n    - 配置文件支持动态修改\n- 19-01-12\n    - 新增免费打码\n- 19-01-14\n    - 新增 Web 页面支持\n- 19-01-15\n    - 新增 钉钉通知\n    - 新增 Telegram 通知\n    - 新增 ServerChan 和 PushBear 微信推送\n- 19-01-18\n    - 新增 CDN 查询\n\n## 截图\n### Web 管理页面\n![Web 管理页面图片](https://github.com/pjialin/py12306/blob/master/data/images/web.png)\n\n### 下单成功\n![下单成功图片](https://github.com/pjialin/py12306/blob/master/data/images/order_success.png)\n\n### 关于防封\n目前查询和登录操作是分开的，查询是不依赖用户是否登录，放在 A 云 T 云容易被限制 ip，建议在其它网络环境下运行\n\nQQ 交流群 [780289875](https://jq.qq.com/?_wv=1027&k=5PgzDwV)，TG 群 [Py12306 交流](https://t.me/joinchat/F3sSegrF3x8KAmsd1mTu7w)\n\n### Online IDE\n[![在 Gitpod 中打开](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io#https://github.com/pjialin/py12306)\n\n## Thanks\n- 感谢大佬 [testerSunshine](https://github.com/testerSunshine/12306)，借鉴了部分实现\n- 感谢所有提供 pr 的大佬 \n- 感谢大佬 [zhaipro](https://github.com/zhaipro/easy12306) 的验证码本地识别模型与算法\n\n## License\n\n[Apache License.](https://github.com/pjialin/py12306/blob/master/LICENSE)\n\n"
        },
        {
          "name": "data",
          "type": "tree",
          "content": null
        },
        {
          "name": "depdencies.txt",
          "type": "blob",
          "size": 4,
          "content": "Python 3.8.10\nPackage                 Version\n----------------------- --------------------\nabsl-py                 1.2.0\nappdirs                 1.4.3\nastunparse              1.6.3\nattrs                   19.3.0\nAutomat                 0.8.0\nautopep8                1.7.0\nbeautifulsoup4          4.7.0\nblinker                 1.4\nbrowser-cookie3         0.16.1\nbs4                     0.0.1\ncachetools              4.2.4\ncertifi                 2021.5.30\nchardet                 3.0.4\ncharset-normalizer      2.1.1\nClick                   7.0\ncloud-init              22.2\ncolorama                0.4.3\ncommand-not-found       0.3\nconfigobj               5.0.6\nconstantly              15.1.0\ncryptography            2.8\ncssselect               1.0.3\ndbus-python             1.2.16\nDingtalkChatbot         1.3.0\ndistro                  1.4.0\ndistro-info             0.23ubuntu1\nentrypoints             0.3\nfake-useragent          0.1.11\nFlask                   1.0.2\nFlask-JWT-Extended      3.15.0\ngast                    0.3.3\ngoogle-auth             1.35.0\ngoogle-auth-oauthlib    0.4.6\ngoogle-pasta            0.2.0\ngrpcio                  1.48.1\nh5py                    2.10.0\nhttplib2                0.14.0\nhyperlink               19.0.0\nidna                    2.8\nimportlib-metadata      4.12.0\nincremental             16.10.1\nitsdangerous            1.1.0\nJinja2                  2.10\njsonpatch               1.22\njsonpointer             2.0\njsonschema              3.2.0\nKeras                   2.4.0\nKeras-Preprocessing     1.1.2\nkeyring                 18.0.1\nlanguage-selector       0.1\nlaunchpadlib            1.10.13\nlazr.restfulclient      0.14.2\nlazr.uri                1.0.3\nlightpush               0.1.3\nlxml                    4.6.3\nlz4                     4.0.2\nMarkdown                3.4.1\nMarkupSafe              2.0.1\nmore-itertools          4.2.0\nnetifaces               0.10.4\nnumpy                   1.18.5\noauthlib                3.1.0\nopencv-python           4.6.0.66\nopt-einsum              3.3.0\np5py                    1.0.0\nparse                   1.9.0\npbkdf2                  1.3\npbr                     5.10.0\npep517                  0.13.0\npexpect                 4.6.0\npip                     22.2.2\nprotobuf                3.9.2\npyaes                   1.6.1\npyasn1                  0.4.2\npyasn1-modules          0.2.1\npycodestyle             2.9.1\npycryptodome            3.15.0\npyee                    6.0.0\nPyGObject               3.36.0\nPyHamcrest              1.9.0\nPyJWT                   1.7.1\npymacaroons             0.13.0\nPyNaCl                  1.3.0\npyOpenSSL               19.0.0\npypng                   0.20220715.0\npyppeteer               0.0.25\npyppeteer-box           0.0.27\npyquery                 1.4.0\npyrsistent              0.15.5\npyserial                3.4\npython-apt              2.0.0+ubuntu0.20.4.8\nPyYAML                  5.3.1\nredis                   3.0.1\nrequests                2.28.1\nrequests-html           0.9.0\nrequests-oauthlib       1.3.1\nrequests-unixsocket     0.2.0\nrsa                     4.9\nscipy                   1.4.1\nSecretStorage           2.3.1\nservice-identity        18.1.0\nsetuptools              65.3.0\nsimplejson              3.16.0\nsix                     1.15.0\nsos                     4.3\nsoupsieve               1.6.2\nssh-import-id           5.10\nsystemd-python          234\ntensorboard             2.10.0\ntensorboard-data-server 0.6.1\ntensorboard-plugin-wit  1.8.1\ntensorflow              2.3.0\ntensorflow-estimator    2.3.0\ntermcolor               2.0.1\ntestresources           2.0.1\ntoml                    0.10.2\ntomli                   2.0.1\ntqdm                    4.64.1\nTwisted                 18.9.0\ntyping_extensions       4.3.0\nubuntu-advantage-tools  27.10\nufw                     0.36\nunattended-upgrades     0.1\nurllib3                 1.26.12\nw3lib                   1.19.0\nwadllib                 1.3.3\nwebsockets              7.0\nWerkzeug                0.15.5\nwheel                   0.37.1\nwrapt                   1.14.1\nzipp                    1.0.0\nzope.interface          4.7.1\n"
        },
        {
          "name": "docker-compose.yml.example",
          "type": "blob",
          "size": 0.24609375,
          "content": "version: \"2\"\nservices:\n  py12306:\n    build: .\n    volumes:\n      # - ./runtime:/code/runtime  # 未使用 env.docker.py.example 可以打开此项\n      - ./env.py:/config/env.py\n      - py12306:/data\n    ports:\n      - 8008:8008\n\nvolumes:\n  py12306:\n"
        },
        {
          "name": "env.docker.py.example",
          "type": "blob",
          "size": 6.875,
          "content": "# -*- coding: utf-8 -*-\n\n# 12306 账号\nUSER_ACCOUNTS = [\n    # 目前已支持仅查询，不下单，屏蔽掉下面的账号即可\n    {\n        'key': 0,  # 如使用多个账号 key 不能重复\n        'user_name': 'your user name',\n        'password': '忽略',\n        'type': 'qr'  # qr 为扫码登录，填写其他为密码登录\n    },\n    # {\n    #     'key': 'wangwu',\n    #     'user_name': 'wangwu@qq.com',\n    #     'password': 'wangwu',\n    #     'type': ''\n    # }\n]\n\n# 查询间隔(指每一个任务中每一个日期的间隔 / 单位秒)\n# 默认取间隔/2 到 间隔之间的随机数 如设置为 1 间隔则为 0.5 ~ 1 之间的随机数\n# 接受字典形式 格式:    {'min': 0.5, 'max': 1}\nQUERY_INTERVAL = 1\n\n# 用户心跳检测间隔 格式同上\nUSER_HEARTBEAT_INTERVAL = 120\n\n# 多线程查询\nQUERY_JOB_THREAD_ENABLED = 0  # 是否开启多线程查询，开启后第个任务会单独分配线程处理\n\n# 打码平台账号\n# 目前只支持免费打码接口 和 若快打码，注册地址：http://www.ruokuai.com/login\nAUTO_CODE_PLATFORM = 'free'  # 免费填写 free 若快 ruokuai  # 免费打码无法保证持续可用，如失效请手动切换 #个人本地打码填写 user,并修改 API_USER_CODE_QCR_API\nAPI_USER_CODE_QCR_API = ''\nAUTO_CODE_ACCOUNT = {\n    'user': 'your user name',\n    'pwd': 'your password'\n}\n\n# 语音验证码\n# 没找到比较好用的，现在用的这个是阿里云 API 市场上的，基本满足要求，价格也便宜\n# 购买成功后到控制台找到  APPCODE 放在下面就可以了\n# 地址：易源 https://market.aliyun.com/products/57126001/cmapi019902.html\n# 2019-01-18 更新\n# 增加新的服务商 鼎信 https://market.aliyun.com/products/56928004/cmapi026600.html?spm=5176.2020520132.101.2.e27e7218KQttQS\nNOTIFICATION_BY_VOICE_CODE = 1  # 开启语音通知\nNOTIFICATION_VOICE_CODE_TYPE = 'dingxin'  # 语音验证码服务商  可用项 dingxin  yiyuan\nNOTIFICATION_API_APP_CODE = 'your app code'\nNOTIFICATION_VOICE_CODE_PHONE = 'your phone'  # 接受通知的手机号\n\n# 钉钉通知\nDINGTALK_ENABLED = 0\nDINGTALK_WEBHOOK = 'https://oapi.dingtalk.com/robot/send?access_token=your token'\n\n# Telegram消息推送\n# 目前共有两个Bot：\n#   1：https://t.me/notificationme_bot\n#   2：https://t.me/RE_Link_Push_bot\n# 任选一个Bot，关注获取URL链接，如果没有回复则发送给Bot这条信息: /start\n# 将获取的URL填入下面对应位置\n# 注意：因为以上Bot都由他人公益提供，无法保证随时可用，如以上Bot都无法使用，请使用其他消息推送方式\n# Bot1来源：https://github.com/Fndroid/tg_push_bot\n# Bot2来源：https://szc.me/post/2.html\nTELEGRAM_ENABLED = 0\nTELEGRAM_BOT_API_URL = 'https://tgbot.lbyczf.com/sendMessage/:your_token'\n\n# ServerChan 和 PushBear 微信消息推送\n# 使用说明\n# ServerChan     http://sc.ftqq.com\n# PushBear       http://pushbear.ftqq.com\nSERVERCHAN_ENABLED = 0\nSERVERCHAN_KEY = ''\nPUSHBEAR_ENABLED = 0\nPUSHBEAR_KEY = ''\n\n# Bark 推送到ios设备\n# 参考 https://www.v2ex.com/t/467407\nBARK_ENABLED = 0\nBARK_PUSH_URL = 'https://api.day.app/:your_token'\n\n# 输出日志到文件 (Docker 中不建议修改此组配置项)\nOUT_PUT_LOG_TO_FILE_ENABLED = 1\nOUT_PUT_LOG_TO_FILE_PATH = '/config/12306.log'  # 日志目录\nRUNTIME_DIR = '/data/'\nQUERY_DATA_DIR = '/data/query/'\nUSER_DATA_DIR = '/data/user/'\n\n# 分布式集群配置\nCLUSTER_ENABLED = 0  # 集群状态\nNODE_IS_MASTER = 1  # 是否是主节点 同时只能启用 1 个主节点\nNODE_SLAVE_CAN_BE_MASTER = 1  # 主节点宕机后，子节点是否可以自动提升为主节点(建议打开)\nNODE_NAME = 'master'  # 节点名称，不能重复\nREDIS_HOST = 'localhost'  # Redis  host\nREDIS_PORT = '6379'  # Redis  port\nREDIS_PASSWORD = ''  # Redis  密码 没有可以留空\n\n# 邮箱配置\nEMAIL_ENABLED = 0  # 是否开启邮件通知\nEMAIL_SENDER = 'sender@example.com'  # 邮件发送者\nEMAIL_RECEIVER = 'receiver@example.com'  # 邮件接受者 # 可以多个 [email1@gmail.com, email2@gmail.com]\nEMAIL_SERVER_HOST = 'localhost'  # 邮件服务 host\nEMAIL_SERVER_USER = ''  # 邮件服务登录用户名\nEMAIL_SERVER_PASSWORD = ''  # 邮件服务登录密码\n\n# Web 管理\nWEB_ENABLE = 1  # 是否打开 Web 管理\nWEB_USER = {  # 登录信息\n    'username': 'admin',\n    'password': 'password'\n}\nWEB_PORT = 8008  # 监听端口\n\n# 是否开启 CDN 查询\nCDN_ENABLED = 0\nCDN_CHECK_TIME_OUT = 1 # 检测单个 cdn 是否可用超时时间\n\n# 查询任务\nQUERY_JOBS = [\n    {\n        # 'job_name':  'bj -> sz',  # 任务名称，不填默认会以车站名命名，不可重复\n        'account_key': 0,  # 将会使用指定账号下单\n        'left_dates': [  # 出发日期 :Array\n            \"2019-01-25\",\n            \"2019-01-26\",\n        ],\n        'stations': {  # 车站 支持多个车站同时查询  :Dict or :List\n            'left': '北京',\n            'arrive': '深圳',\n        },\n        #  # 多个车站示例  (建议添加多个，有时多买几站成功率会高一点)\n        # 'stations': [{\n        #     'left': '北京',\n        #     'arrive': '深圳',\n        # },{  # 多个车站示例\n        #     'left': '北京',\n        #     'arrive': '广州',\n        # }],\n        'members': [  # 乘客姓名，会根据当前账号自动识别乘客类型 购买儿童票 设置两个相同的姓名即可，程序会自动识别 如  ['张三', '张三']\n            \"张三\",\n            \"王五\",\n            # 7,  # 支持通过序号确定唯一乘客，序号查看可通过  python main.py -t 登录成功之后在 runtime/user/ 下找到对应的 用户名_passengers.json 文件，找到对应的 code 填入\n        ],\n        'allow_less_member': 0,  # 是否允许余票不足时提交部分乘客\n        'seats': [  # 筛选座位  有先后顺序 :Array\n            # 可用值: 特等座, 商务座, 一等座, 二等座, 软卧, 硬卧, 动卧, 软座, 硬座, 无座\n            '硬卧',\n            '硬座'\n        ],\n        'train_numbers': [  # 筛选车次 可以为空，为空则所有车次都可以提交 如 [] 注意大小写需要保持一致\n            \"K356\",\n            \"K1172\",\n            \"K4184\"\n        ],\n        'except_train_numbers': [  # 筛选车次，排除车次  train_numbers 和 except_train_numbers 不可同时存在\n        ],\n        'period': {  # 筛选时间\n            'from': '00:00',\n            'to': '24:00'\n        }\n\n    },\n    # {\n    #     'job_name':  'cd -> gz',  # 任务名称，不填默认会以车站名命名，不可重复\n    #     'account_key': 0,  # 将会使用指定账号下单\n    #     'left_dates': [\n    #         \"2019-01-27\",\n    #         \"2019-01-28\"\n    #     ],\n    #     'stations': {\n    #         'left': '成都',\n    #         'arrive': '广州',\n    #     },\n    #     'members': [\n    #         \"小王\",\n    #     ],\n    #     'allow_less_member': 0,\n    #     'seats': [\n    #         '硬卧',\n    #     ],\n    #     'train_numbers': []\n    # }\n]\n"
        },
        {
          "name": "env.py.example",
          "type": "blob",
          "size": 7.2109375,
          "content": "# -*- coding: utf-8 -*-\n\n# 12306 账号\nUSER_ACCOUNTS = [\n    # 目前已支持仅查询，不下单，屏蔽掉下面的账号即可\n    {\n        'key': 0,  # 如使用多个账号 key 不能重复\n        'user_name': 'your user name',\n        'password': '忽略',\n        'type': 'qr'  # qr 为扫码登录，填写其他为密码登录\n    },\n    # {\n    #     'key': 'wangwu',\n    #     'user_name': 'wangwu@qq.com',\n    #     'password': 'wangwu',\n    #     'type': ''\n    # }\n]\n\n# 查询间隔(指每一个任务中每一个日期的间隔 / 单位秒)\n# 默认取间隔/2 到 间隔之间的随机数 如设置为 1 间隔则为 0.5 ~ 1 之间的随机数\n# 接受字典形式 格式:    {'min': 0.5, 'max': 1}\nQUERY_INTERVAL = 1\n\n# 网络请求重试次数\nREQUEST_MAX_RETRY = 5\n\n# 用户心跳检测间隔 格式同上\nUSER_HEARTBEAT_INTERVAL = 120\n\n# 多线程查询\nQUERY_JOB_THREAD_ENABLED = 0  # 是否开启多线程查询，开启后第个任务会单独分配线程处理\n\n# 打码平台账号\n# 目前只支持免费打码接口 和 若快打码，注册地址：http://www.ruokuai.com/login\nAUTO_CODE_PLATFORM = 'free'  # 免费填写 free 若快 ruokuai  # 免费打码无法保证持续可用，如失效请手动切换; 个人打码填写 user 并修改API_USER_CODE_QCR_API 为自己地址\nAPI_USER_CODE_QCR_API = ''\nAUTO_CODE_ACCOUNT = {  # 使用 free 可用省略\n    'user': 'your user name',\n    'pwd': 'your password'\n}\n\n# 语音验证码\n# 没找到比较好用的，现在用的这个是阿里云 API 市场上的，基本满足要求，价格也便宜\n# 购买成功后到控制台找到  APPCODE 放在下面就可以了\n# 地址：易源 https://market.aliyun.com/products/57126001/cmapi019902.html\n# 2019-01-18 更新\n# 增加新的服务商 鼎信 https://market.aliyun.com/products/56928004/cmapi026600.html?spm=5176.2020520132.101.2.e27e7218KQttQS\nNOTIFICATION_BY_VOICE_CODE = 1  # 开启语音通知\nNOTIFICATION_VOICE_CODE_TYPE = 'dingxin'  # 语音验证码服务商  可用项 dingxin  yiyuan\nNOTIFICATION_API_APP_CODE = 'your app code'\nNOTIFICATION_VOICE_CODE_PHONE = 'your phone'  # 接受通知的手机号\n\n# 钉钉通知\n# 使用说明   https://open-doc.dingtalk.com/docs/doc.htm?treeId=257&articleId=105735&docType=1\nDINGTALK_ENABLED = 0\nDINGTALK_WEBHOOK = 'https://oapi.dingtalk.com/robot/send?access_token=your token'\n\n# Telegram消息推送\n# 目前共有两个Bot：\n#   1：https://t.me/notificationme_bot\n#   2：https://t.me/RE_Link_Push_bot\n# 任选一个Bot，关注获取URL链接，如果没有回复则发送给Bot这条信息: /start\n# 将获取的URL填入下面对应位置\n# 注意：因为以上Bot都由他人公益提供，无法保证随时可用，如以上Bot都无法使用，请使用其他消息推送方式\n# Bot1来源：https://github.com/Fndroid/tg_push_bot\n# Bot2来源：https://szc.me/post/2.html\nTELEGRAM_ENABLED = 0\nTELEGRAM_BOT_API_URL = 'https://tgbot.lbyczf.com/sendMessage/:your_token'\n\n# ServerChan 和 PushBear 微信消息推送\n# 使用说明\n# ServerChan     http://sc.ftqq.com\n# PushBear       http://pushbear.ftqq.com\nSERVERCHAN_ENABLED = 0\nSERVERCHAN_KEY = ''\nPUSHBEAR_ENABLED = 0\nPUSHBEAR_KEY = ''\n\n# Bark 推送到ios设备\n# 参考 https://www.v2ex.com/t/467407\nBARK_ENABLED = 0\nBARK_PUSH_URL = 'https://api.day.app/:your_token'\n\n# 输出日志到文件\nOUT_PUT_LOG_TO_FILE_ENABLED = 0\nOUT_PUT_LOG_TO_FILE_PATH = 'runtime/12306.log'  # 日志目录\n\n# 分布式集群配置\nCLUSTER_ENABLED = 0  # 集群状态\nNODE_IS_MASTER = 1  # 是否是主节点 同时只能启用 1 个主节点\nNODE_SLAVE_CAN_BE_MASTER = 1  # 主节点宕机后，子节点是否可以自动提升为主节点(建议打开)\nNODE_NAME = 'master'  # 节点名称，不能重复\nREDIS_HOST = 'localhost'  # Redis  host\nREDIS_PORT = '6379'  # Redis  port\nREDIS_PASSWORD = ''  # Redis  密码 没有可以留空\n\n# 邮箱配置\nEMAIL_ENABLED = 0  # 是否开启邮件通知\nEMAIL_SENDER = 'sender@example.com'  # 邮件发送者\nEMAIL_RECEIVER = 'receiver@example.com'  # 邮件接受者 # 可以多个 [email1@gmail.com, email2@gmail.com]\nEMAIL_SERVER_HOST = 'localhost'  # 邮件服务 host\nEMAIL_SERVER_USER = ''  # 邮件服务登录用户名\nEMAIL_SERVER_PASSWORD = ''  # 邮件服务登录密码\n\n# Web 管理\nWEB_ENABLE = 1  # 是否打开 Web 管理\nWEB_USER = {  # 登录信息\n    'username': 'admin',\n    'password': 'password'\n}\nWEB_PORT = 8008  # 监听端口\n\n# 是否开启 CDN 查询\nCDN_ENABLED = 0\nCDN_CHECK_TIME_OUT = 1 # 检测单个 cdn 是否可用超时时间\n\n# 是否使用浏览器缓存中的RAIL_EXPIRATION 和 RAIL_DEVICEID\nCACHE_RAIL_ID_ENABLED = 0\nRAIL_EXPIRATION = '' #浏览12306 网站中的Cache的RAIL_EXPIRATION 值\nRAIL_DEVICEID = '' #浏览12306 网站中的Cache的RAIL_DEVICEID 值\n\n# 查询任务\nQUERY_JOBS = [\n    {\n        # 'job_name':  'bj -> sz',  # 任务名称，不填默认会以车站名命名，不可重复\n        'account_key': 0,  # 将会使用指定账号下单\n        'left_dates': [  # 出发日期 :Array\n            \"2020-01-25\",\n            \"2020-01-26\",\n        ],\n        'stations': {  # 车站 支持多个车站同时查询  :Dict or :List\n            'left': '北京',\n            'arrive': '深圳',\n        },\n        #  # 多个车站示例  (建议添加多个，有时多买几站成功率会高一点)\n        # 'stations': [{\n        #     'left': '北京',\n        #     'arrive': '深圳',\n        # },{  # 多个车站示例\n        #     'left': '北京',\n        #     'arrive': '广州',\n        # }],\n        'members': [  # 乘客姓名，会根据当前账号自动识别乘客类型 购买儿童票 设置两个相同的姓名即可，程序会自动识别 如  ['张三', '张三']\n            \"张三\",\n            #\"*王五\", #在姓名前加*表示学生购买成人票\n            # 7,  # 支持通过序号确定唯一乘客，序号查看可通过  python main.py -t 登录成功之后在 runtime/user/ 下找到对应的 用户名_passengers.json 文件，找到对应的 code 填入\n        ],\n        'allow_less_member': 0,  # 是否允许余票不足时提交部分乘客\n        'seats': [  # 筛选座位  有先后顺序 :Array\n            # 可用值: 特等座, 商务座, 一等座, 二等座, 软卧, 硬卧, 动卧, 软座, 硬座, 无座\n            '硬卧',\n            '硬座'\n        ],\n        'train_numbers': [  # 筛选车次 可以为空，为空则所有车次都可以提交 如 [] 注意大小写需要保持一致\n            \"K356\",\n            \"K1172\",\n            \"K4184\"\n        ],\n        'except_train_numbers': [  # 筛选车次，排除车次  train_numbers 和 except_train_numbers 不可同时存在\n        ],\n        'period': {  # 筛选时间\n            'from': '00:00',\n            'to': '24:00'\n        }\n\n    },\n    # {\n    #     'job_name':  'cd -> gz',  # 任务名称，不填默认会以车站名命名，不可重复\n    #     'account_key': 0,  # 将会使用指定账号下单\n    #     'left_dates': [\n    #         \"2019-01-27\",\n    #         \"2019-01-28\"\n    #     ],\n    #     'stations': {\n    #         'left': '成都',\n    #         'arrive': '广州',\n    #     },\n    #     'members': [\n    #         \"小王\",\n    #     ],\n    #     'allow_less_member': 0,\n    #     'seats': [\n    #         '硬卧',\n    #     ],\n    #     'train_numbers': []\n    # }\n]\n"
        },
        {
          "name": "env.slave.py.example",
          "type": "blob",
          "size": 0.3916015625,
          "content": "# -*- coding: utf-8 -*-\n# 分布式子节点配置文件示例\n\n# 分布式集群配置\nCLUSTER_ENABLED = 1  # 集群状态\nNODE_IS_MASTER = 0  # 是否是主节点\nNODE_NAME = 'slave 1'  # 节点名称，不能重复\nREDIS_HOST = 'localhost'  # Redis  host\nREDIS_PORT = '6379'  # Redis  port\nREDIS_PASSWORD = ''  # Redis  密码 没有可以留空\n\n# 没了，其它配置会自动从主节点同步\n"
        },
        {
          "name": "main.py",
          "type": "blob",
          "size": 1.435546875,
          "content": "# -*- coding: utf-8 -*-\nimport sys\n\nfrom py12306.app import *\nfrom py12306.helpers.cdn import Cdn\nfrom py12306.log.common_log import CommonLog\nfrom py12306.query.query import Query\nfrom py12306.user.user import User\nfrom py12306.web.web import Web\n\n\ndef main():\n    load_argvs()\n    CommonLog.print_welcome()\n    App.run()\n    CommonLog.print_configs()\n    App.did_start()\n\n    App.run_check()\n    Query.check_before_run()\n\n    ####### 运行任务\n    Web.run()\n    Cdn.run()\n    User.run()\n    Query.run()\n    if not Const.IS_TEST:\n        while True:\n            sleep(10000)\n    else:\n        if Config().is_cluster_enabled(): stay_second(5)  # 等待接受完通知\n    CommonLog.print_test_complete()\n\n\ndef test():\n    \"\"\"\n    功能检查\n    包含：\n        账号密码验证 (打码)\n        座位验证\n        乘客验证\n        语音验证码验证\n        通知验证\n    :return:\n    \"\"\"\n    Const.IS_TEST = True\n    Config.OUT_PUT_LOG_TO_FILE_ENABLED = False\n    if '--test-notification' in sys.argv or '-n' in sys.argv:\n        Const.IS_TEST_NOTIFICATION = True\n    pass\n\n\ndef load_argvs():\n    if '--test' in sys.argv or '-t' in sys.argv: test()\n    config_index = None\n\n    if '--config' in sys.argv: config_index = sys.argv.index('--config')\n    if '-c' in sys.argv: config_index = sys.argv.index('-c')\n    if config_index:\n        Config.CONFIG_FILE = sys.argv[config_index + 1:config_index + 2].pop()\n\n\nif __name__ == '__main__':\n    main()\n"
        },
        {
          "name": "py12306",
          "type": "tree",
          "content": null
        },
        {
          "name": "requirements.txt",
          "type": "blob",
          "size": 0.5556640625,
          "content": "-i https://pypi.tuna.tsinghua.edu.cn/simple\nappdirs==1.4.3\nbeautifulsoup4==4.7.0\nbs4==0.0.1\ncertifi==2023.11.17\nchardet==3.0.4\nClick==7.0\ncssselect==1.0.3\nfake-useragent==0.1.11\nFlask==1.0.2\nFlask-JWT-Extended==3.15.0\nidna==2.8\nitsdangerous==1.1.0\nJinja2==2.10\nlxml==4.9.1\nMarkupSafe==1.1.0\nparse==1.9.0\npyee==5.0.0\nPyJWT==1.7.1\npyppeteer-box==0.0.27\npyquery==1.4.0\nredis==3.0.1\nrequests==2.31.0\nrequests-html==0.9.0\nsix==1.12.0\nsoupsieve==1.6.2\ntqdm==4.28.1\nurllib3==1.26.5\nw3lib==1.19.0\nwebsockets==10.0\nWerkzeug==0.15.5\nDingtalkChatbot==1.3.0\nlightpush==0.1.3\npypng\n"
        },
        {
          "name": "runtime",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}