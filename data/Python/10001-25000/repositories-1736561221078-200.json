{
  "metadata": {
    "timestamp": 1736561221078,
    "page": 200,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjIwMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "Zeyi-Lin/HivisionIDPhotos",
      "stars": 14171,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".devcontainer",
          "type": "tree",
          "content": null
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.384765625,
          "content": "*.pyc\n**/__pycache__/\n.idea\n.vscode/*\n.history\n.DS_Store\n.env\ndemo/kb_output/*.jpg\ndemo/kb_output/*.png\nscripts/sync_swanhub.py\nscripts/sync_huggingface.py\nscripts/sync_modelscope.py\nscripts/sync_all.py\n**/flagged/\n# build outputs\ndist\nbuild\n# checkpoint\n*.pth\n*.pt\n*.onnx\n*.mnn\ntest/temp/*\n!test/temp/.gitkeep\n\n.python-version\n\n# Ignore .png and .jpg files in the root directory\n/*.png\n/*.jpg\n"
        },
        {
          "name": ".vscode",
          "type": "tree",
          "content": null
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 0.44140625,
          "content": "FROM python:3.10-slim\n\n# Install system dependencies\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n    ffmpeg \\\n    libgl1-mesa-glx \\\n    libglib2.0-0 \\\n    && rm -rf /var/lib/apt/lists/*\n\nWORKDIR /app\n\nCOPY requirements.txt requirements-app.txt ./\n\nRUN pip install --no-cache-dir -r requirements.txt -r requirements-app.txt\n\nCOPY . .\n\nEXPOSE 7860\nEXPOSE 8080\n\nCMD [\"python3\", \"-u\", \"app.py\", \"--host\", \"0.0.0.0\", \"--port\", \"7860\"]"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 11.0576171875,
          "content": "Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n   APPENDIX: How to apply the Apache License to your work.\n\n      To apply the Apache License to your work, attach the following\n      boilerplate notice, with the fields enclosed by brackets \"[]\"\n      replaced with your own identifying information. (Don't include\n      the brackets!)  The text should be enclosed in the appropriate\n      comment syntax for the file format. We also recommend that a\n      file or class name and description of purpose be included on the\n      same \"printed page\" as the copyright notice for easier\n      identification within third-party archives.\n\n   Copyright [yyyy] [name of copyright owner]\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License."
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 23.083984375,
          "content": "<div align=\"center\">\n\n<img alt=\"hivision_logo\" src=\"assets/hivision_logo.png\" width=120 height=120>\n<h1>HivisionIDPhoto</h1>\n\n[English](README_EN.md) / ä¸­æ–‡ / [æ—¥æœ¬èª](README_JP.md) / [í•œêµ­ì–´](README_KO.md)\n\n[![][release-shield]][release-link]\n[![][dockerhub-shield]][dockerhub-link]\n[![][github-stars-shield]][github-stars-link]\n[![][github-issues-shield]][github-issues-link]\n[![][github-contributors-shield]][github-contributors-link]\n[![][github-forks-shield]][github-forks-link]\n[![][license-shield]][license-link]  \n[![][wechat-shield]][wechat-link]\n[![][spaces-shield]][spaces-link]\n[![][swanhub-demo-shield]][swanhub-demo-link]\n[![][modelscope-shield]][modelscope-link]\n[![][modelers-shield]][modelers-link]\n\n[![][trendshift-shield]][trendshift-link]\n[![][hellogithub-shield]][hellogithub-link]\n\n<img src=\"assets/demoImage.jpg\" width=900>\n\n</div>\n\n> **ç›¸å…³é¡¹ç›®**ï¼š\n>\n> - [SwanLab](https://github.com/SwanHubX/SwanLab)ï¼šè®­ç»ƒäººåƒæŠ å›¾æ¨¡å‹å…¨ç¨‹ç”¨å®ƒæ¥åˆ†æå’Œç›‘æ§ï¼Œä»¥åŠå’Œå®éªŒå®¤åŒå­¦åä½œäº¤æµï¼Œå¤§å¹…æå‡äº†è®­ç»ƒæ•ˆç‡ã€‚\n\n\n<br>\n\n# ç›®å½•\n\n- [æœ€è¿‘æ›´æ–°](#-æœ€è¿‘æ›´æ–°)\n- [é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)\n- [ç¤¾åŒº](#-ç¤¾åŒº)\n- [å‡†å¤‡å·¥ä½œ](#-å‡†å¤‡å·¥ä½œ)\n- [Demoå¯åŠ¨](#-è¿è¡Œ-gradio-demo)\n- [Pythonæ¨ç†](#-python-æ¨ç†)\n- [APIæœåŠ¡éƒ¨ç½²](#ï¸-éƒ¨ç½²-api-æœåŠ¡)\n- [Dockeréƒ¨ç½²](#-docker-éƒ¨ç½²)\n- [è”ç³»æˆ‘ä»¬](#-è”ç³»æˆ‘ä»¬)\n- [FAQ](#faq)\n- [æ„Ÿè°¢æ”¯æŒ](#-æ„Ÿè°¢æ”¯æŒ)\n- [License](#-lincese)\n- [å¼•ç”¨](#-å¼•ç”¨)\n\n<br>\n\n# ğŸ¤© æœ€è¿‘æ›´æ–°\n\n- åœ¨çº¿ä½“éªŒï¼š [![SwanHub Demo](https://img.shields.io/static/v1?label=Demo&message=SwanHub%20Demo&color=blue)](https://swanhub.co/ZeYiLin/HivisionIDPhotos/demo)ã€[![Spaces](https://img.shields.io/badge/ğŸ¤—-Open%20in%20Spaces-blue)](https://huggingface.co/spaces/TheEeeeLin/HivisionIDPhotos)ã€[![][modelscope-shield]][modelscope-link]\n\n- 2024.11.20: Gradio Demoå¢åŠ **æ‰“å°æ’ç‰ˆ**é€‰é¡¹å¡ï¼Œæ”¯æŒå…­å¯¸ã€äº”å¯¸ã€A4ã€3Rã€4Räº”ç§æ’ç‰ˆå°ºå¯¸\n- 2024.11.16: APIæ¥å£å¢åŠ ç¾é¢œå‚æ•°\n- 2024.09.25: å¢åŠ **äº”å¯¸ç›¸çº¸**å’Œ**JPEGä¸‹è½½**é€‰é¡¹ï½œé»˜è®¤ç…§ç‰‡ä¸‹è½½æ”¯æŒ300DPI\n- 2024.09.24: APIæ¥å£å¢åŠ base64å›¾åƒä¼ å…¥é€‰é¡¹ | Gradio Demoå¢åŠ **æ’ç‰ˆç…§è£å‰ªçº¿**åŠŸèƒ½\n- 2024.09.22: Gradio Demoå¢åŠ **é‡å…½æ¨¡å¼**ï¼Œå¯è®¾ç½®å†…å­˜åŠ è½½ç­–ç•¥ | APIæ¥å£å¢åŠ **dpiã€face_alignment**å‚æ•°\n- 2024.09.18: Gradio Demoå¢åŠ **åˆ†äº«æ¨¡ç‰ˆç…§**åŠŸèƒ½ã€å¢åŠ **ç¾å¼è¯ä»¶ç…§**èƒŒæ™¯é€‰é¡¹\n- 2024.09.17: Gradio Demoå¢åŠ **è‡ªå®šä¹‰åº•è‰²-HEXè¾“å…¥**åŠŸèƒ½ | **ï¼ˆç¤¾åŒºè´¡çŒ®ï¼‰C++ç‰ˆæœ¬** - [HivisionIDPhotos-cpp](https://github.com/zjkhahah/HivisionIDPhotos-cpp) è´¡çŒ® by [zjkhahah](https://github.com/zjkhahah)\n- 2024.09.16: Gradio Demoå¢åŠ **äººè„¸æ—‹è½¬å¯¹é½**åŠŸèƒ½ï¼Œè‡ªå®šä¹‰å°ºå¯¸è¾“å…¥æ”¯æŒ**æ¯«ç±³**å•ä½\n\n<br>\n\n# é¡¹ç›®ç®€ä»‹\n\n> ğŸš€ è°¢è°¢ä½ å¯¹æˆ‘ä»¬çš„å·¥ä½œæ„Ÿå…´è¶£ã€‚æ‚¨å¯èƒ½è¿˜æƒ³æŸ¥çœ‹æˆ‘ä»¬åœ¨å›¾åƒé¢†åŸŸçš„å…¶ä»–æˆæœï¼Œæ¬¢è¿æ¥ä¿¡:zeyi.lin@swanhub.co.\n\nHivisionIDPhoto æ—¨åœ¨å¼€å‘ä¸€ç§å®ç”¨ã€ç³»ç»Ÿæ€§çš„è¯ä»¶ç…§æ™ºèƒ½åˆ¶ä½œç®—æ³•ã€‚\n\nå®ƒåˆ©ç”¨ä¸€å¥—å®Œå–„çš„AIæ¨¡å‹å·¥ä½œæµç¨‹ï¼Œå®ç°å¯¹å¤šç§ç”¨æˆ·æ‹ç…§åœºæ™¯çš„è¯†åˆ«ã€æŠ å›¾ä¸è¯ä»¶ç…§ç”Ÿæˆã€‚\n\n**HivisionIDPhoto å¯ä»¥åšåˆ°ï¼š**\n\n1. è½»é‡çº§æŠ å›¾ï¼ˆçº¯ç¦»çº¿ï¼Œä»…éœ€ **CPU** å³å¯å¿«é€Ÿæ¨ç†ï¼‰\n2. æ ¹æ®ä¸åŒå°ºå¯¸è§„æ ¼ç”Ÿæˆä¸åŒçš„æ ‡å‡†è¯ä»¶ç…§ã€å…­å¯¸æ’ç‰ˆç…§\n3. æ”¯æŒ çº¯ç¦»çº¿ æˆ– ç«¯äº‘ æ¨ç†\n4. ç¾é¢œ\n5. æ™ºèƒ½æ¢æ­£è£…ï¼ˆwaitingï¼‰\n\n<div align=\"center\">\n<img src=\"assets/demo.png\" width=900>\n</div>\n\n---\n\nå¦‚æœ HivisionIDPhoto å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯· star è¿™ä¸ª repo æˆ–æ¨èç»™ä½ çš„æœ‹å‹ï¼Œè§£å†³è¯ä»¶ç…§åº”æ€¥åˆ¶ä½œé—®é¢˜ï¼\n\n<br>\n\n# ğŸ  ç¤¾åŒº\n\næˆ‘ä»¬åˆ†äº«äº†ä¸€äº›ç”±ç¤¾åŒºæ„å»ºçš„HivisionIDPhotosçš„æœ‰è¶£åº”ç”¨å’Œæ‰©å±•ï¼š\n\n| [HivisionIDPhotos-ComfyUI][community-hivision-comfyui] | [HivisionIDPhotos-wechat-weapp][community-hivision-wechat] |\n| :----------------------------------------------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------: |\n| <a href=\"https://github.com/AIFSH/HivisionIDPhotos-ComfyUI\"> <img src=\"assets/comfyui.png\" width=\"900\" alt=\"ComfyUI workflow\"> </a>  | <a href=\"https://github.com/no1xuan/HivisionIDPhotos-wechat-weapp\"> <img src=\"assets/community-wechat-miniprogram.png\" width=\"900\" alt=\"ComfyUI workflow\"> </a>  |\n|ComfyUIè¯ä»¶ç…§å¤„ç†å·¥ä½œæµ | è¯ä»¶ç…§å¾®ä¿¡å°ç¨‹åºï¼ˆJAVAåç«¯+åŸç”Ÿå‰ç«¯ï¼‰ |\n\n| [HivisionIDPhotos-Uniapp][community-hivision-uniapp] | [HivisionIDPhotos-web](https://github.com/jkm199/HivisionIDPhotos-web)|\n| :------------------------------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------: |\n| <a href=\"https://github.com/soulerror/HivisionIDPhotos-Uniapp\"> <img src=\"assets/community-uniapp-wechat-miniprogram.png\" width=\"900\" alt=\"HivisionIDPhotos-uniapp\"> </a>  | <a href=\"https://github.com/jkm199/HivisionIDPhotos-web\"> <img src=\"assets/community-web.png\" width=\"900\" alt=\"HivisionIDPhotos-uniapp\"> </a>  |\n| è¯ä»¶ç…§å¾®ä¿¡å°ç¨‹åºï¼ˆuniappï¼‰| è¯ä»¶ç…§åº”ç”¨ç½‘é¡µç‰ˆ |\n\n\n- [HivisionIDPhotos-cpp](https://github.com/zjkhahah/HivisionIDPhotos-cpp): HivisionIDphotos C++ç‰ˆæœ¬ï¼Œç”± [zjkhahah](https://github.com/zjkhahah) æ„å»º\n- [ai-idphoto](https://github.com/wmlcjj/ai-idphoto): [HivisionIDPhotos-wechat-weapp](https://github.com/no1xuan/HivisionIDPhotos-wechat-weapp) çš„uniappå¤šç«¯å…¼å®¹ç‰ˆï¼Œç”± [wmlcjj](https://github.com/wmlcjj) è´¡çŒ®\n- [HivisionIDPhotos-uniapp-WeChat-gpto1](https://github.com/jkm199/HivisionIDPhotos-uniapp-WeChat-gpto1/): ç”±gpt-o1è¾…åŠ©å®Œæˆå¼€å‘çš„è¯ä»¶ç…§å¾®ä¿¡å°ç¨‹åºï¼Œç”± [jkm199](https://github.com/jkm199) è´¡çŒ®\n- [HivisionIDPhotos-windows-GUI](https://github.com/zhaoyun0071/HivisionIDPhotos-windows-GUI)ï¼šWindowså®¢æˆ·ç«¯åº”ç”¨ï¼Œç”± [zhaoyun0071](https://github.com/zhaoyun0071) æ„å»º\n- [HivisionIDPhotos-NAS](https://github.com/ONG-Leo/HivisionIDPhotos-NAS): ç¾¤æ™–NASéƒ¨ç½²ä¸­æ–‡æ•™ç¨‹ï¼Œç”± [ONG-Leo](https://github.com/ONG-Leo) è´¡çŒ®\n\n\n<br>\n\n# ğŸ”§ å‡†å¤‡å·¥ä½œ\n\nç¯å¢ƒå®‰è£…ä¸ä¾èµ–ï¼š\n- Python >= 3.7ï¼ˆé¡¹ç›®ä¸»è¦æµ‹è¯•åœ¨ python 3.10ï¼‰\n- OS: Linux, Windows, MacOS\n\n## 1. å…‹éš†é¡¹ç›®\n\n```bash\ngit clone https://github.com/Zeyi-Lin/HivisionIDPhotos.git\ncd  HivisionIDPhotos\n```\n\n## 2. å®‰è£…ä¾èµ–ç¯å¢ƒ\n\n> å»ºè®® conda åˆ›å»ºä¸€ä¸ª python3.10 è™šæ‹Ÿç¯å¢ƒåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\n\n```bash\npip install -r requirements.txt\npip install -r requirements-app.txt\n```\n\n## 3. ä¸‹è½½äººåƒæŠ å›¾æ¨¡å‹æƒé‡æ–‡ä»¶\n\n**æ–¹å¼ä¸€ï¼šè„šæœ¬ä¸‹è½½**\n\n```bash\npython scripts/download_model.py --models all\n# å¦‚éœ€æŒ‡å®šä¸‹è½½æŸä¸ªæ¨¡å‹\n# python scripts/download_model.py --models modnet_photographic_portrait_matting\n```\n\n**æ–¹å¼äºŒï¼šç›´æ¥ä¸‹è½½**\n\næ¨¡å‹å‡å­˜åˆ°é¡¹ç›®çš„`hivision/creator/weights`ç›®å½•ä¸‹ï¼š\n\n| äººåƒæŠ å›¾æ¨¡å‹ | ä»‹ç» | ä¸‹è½½ |\n| -- | -- | -- |\n| MODNet | [MODNet](https://github.com/ZHKKKe/MODNet)å®˜æ–¹æƒé‡ | [ä¸‹è½½](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/modnet_photographic_portrait_matting.onnx)(24.7MB)|\n| hivision_modnet | å¯¹çº¯è‰²æ¢åº•é€‚é…æ€§æ›´å¥½çš„æŠ å›¾æ¨¡å‹ | [ä¸‹è½½](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/hivision_modnet.onnx)(24.7MB) |\n| rmbg-1.4 | [BRIA AI](https://huggingface.co/briaai/RMBG-1.4) å¼€æºçš„æŠ å›¾æ¨¡å‹ | [ä¸‹è½½](https://huggingface.co/briaai/RMBG-1.4/resolve/main/onnx/model.onnx?download=true)(176.2MB)åé‡å‘½åä¸º`rmbg-1.4.onnx` |\n| birefnet-v1-lite | [ZhengPeng7](https://github.com/ZhengPeng7/BiRefNet) å¼€æºçš„æŠ å›¾æ¨¡å‹ï¼Œæ‹¥æœ‰æœ€å¥½çš„åˆ†å‰²ç²¾åº¦ | [ä¸‹è½½](https://github.com/ZhengPeng7/BiRefNet/releases/download/v1/BiRefNet-general-bb_swin_v1_tiny-epoch_232.onnx)(224MB)åé‡å‘½åä¸º`birefnet-v1-lite.onnx` |\n\n> å¦‚æœä¸‹è½½ç½‘é€Ÿä¸é¡ºåˆ©ï¼šå‰å¾€[SwanHub](https://swanhub.co/ZeYiLin/HivisionIDPhotos_models/tree/main)ä¸‹è½½ã€‚\n\n\n## 4. äººè„¸æ£€æµ‹æ¨¡å‹é…ç½®ï¼ˆå¯é€‰ï¼‰\n\n| æ‹“å±•äººè„¸æ£€æµ‹æ¨¡å‹ | ä»‹ç» | ä½¿ç”¨æ–‡æ¡£ |\n| -- | -- | -- |\n| MTCNN | **ç¦»çº¿**äººè„¸æ£€æµ‹æ¨¡å‹ï¼Œé«˜æ€§èƒ½CPUæ¨ç†ï¼ˆæ¯«ç§’çº§ï¼‰ï¼Œä¸ºé»˜è®¤æ¨¡å‹ï¼Œæ£€æµ‹ç²¾åº¦è¾ƒä½ | Cloneæ­¤é¡¹ç›®åç›´æ¥ä½¿ç”¨ |\n| RetinaFace | **ç¦»çº¿**äººè„¸æ£€æµ‹æ¨¡å‹ï¼ŒCPUæ¨ç†é€Ÿåº¦ä¸­ç­‰ï¼ˆç§’çº§ï¼‰ï¼Œç²¾åº¦è¾ƒé«˜| [ä¸‹è½½](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/retinaface-resnet50.onnx)åæ”¾åˆ°`hivision/creator/retinaface/weights`ç›®å½•ä¸‹ |\n| Face++ | æ—·è§†æ¨å‡ºçš„åœ¨çº¿äººè„¸æ£€æµ‹APIï¼Œæ£€æµ‹ç²¾åº¦è¾ƒé«˜ï¼Œ[å®˜æ–¹æ–‡æ¡£](https://console.faceplusplus.com.cn/documents/4888373) | [ä½¿ç”¨æ–‡æ¡£](docs/face++_CN.md)|\n\n## 5. æ€§èƒ½å‚è€ƒ\n\n> æµ‹è¯•ç¯å¢ƒä¸ºMac M1 Max 64GBï¼ŒéGPUåŠ é€Ÿï¼Œæµ‹è¯•å›¾ç‰‡åˆ†è¾¨ç‡ä¸º 512x715(1) ä¸ 764Ã—1146(2)ã€‚\n\n| æ¨¡å‹ç»„åˆ | å†…å­˜å ç”¨ | æ¨ç†æ—¶é•¿(1) | æ¨ç†æ—¶é•¿(2) |\n| -- | -- | -- | -- |\n| MODNet + mtcnn | 410MB | 0.207s | 0.246s |\n| MODNet + retinaface | 405MB | 0.571s | 0.971s |\n| birefnet-v1-lite + retinaface | 6.20GB | 7.063s | 7.128s |\n\n## 6. GPUæ¨ç†åŠ é€Ÿï¼ˆå¯é€‰ï¼‰\n\nåœ¨å½“å‰ç‰ˆæœ¬ï¼Œå¯è¢«è‹±ä¼Ÿè¾¾GPUåŠ é€Ÿçš„æ¨¡å‹ä¸º`birefnet-v1-lite`ï¼Œå¹¶è¯·ç¡®ä¿ä½ æœ‰16GBå·¦å³çš„æ˜¾å­˜ã€‚\n\nå¦‚éœ€ä½¿ç”¨è‹±ä¼Ÿè¾¾GPUåŠ é€Ÿæ¨ç†ï¼Œåœ¨ç¡®ä¿ä½ å·²ç»å®‰è£…[CUDA](https://developer.nvidia.com/cuda-downloads)ä¸[cuDNN](https://developer.nvidia.com/cudnn)åï¼Œæ ¹æ®[onnxruntime-gpuæ–‡æ¡£](https://onnxruntime.ai/docs/execution-providers/CUDA-ExecutionProvider.html#cuda-12x)æ‰¾åˆ°å¯¹åº”çš„`onnxruntime-gpu`ç‰ˆæœ¬å®‰è£…ï¼Œä»¥åŠæ ¹æ®[pytorchå®˜ç½‘](https://pytorch.org/get-started/locally/)æ‰¾åˆ°å¯¹åº”çš„`torch`ç‰ˆæœ¬å®‰è£…ã€‚\n\n```bash\n# å‡å¦‚ä½ çš„ç”µè„‘å®‰è£…çš„æ˜¯CUDA 12.x, cuDNN 8\n# å®‰è£…torchæ˜¯å¯é€‰çš„ï¼Œå¦‚æœä½ å§‹ç»ˆé…ç½®ä¸å¥½cuDNNï¼Œé‚£ä¹ˆè¯•è¯•å®‰è£…torch\npip install onnxruntime-gpu==1.18.0\npip install torch --index-url https://download.pytorch.org/whl/cu121\n```\n\nå®Œæˆå®‰è£…åï¼Œè°ƒç”¨`birefnet-v1-lite`æ¨¡å‹å³å¯åˆ©ç”¨GPUåŠ é€Ÿæ¨ç†ã€‚\n\n> TIPS: CUDA æ”¯æŒå‘ä¸‹å…¼å®¹ã€‚æ¯”å¦‚ä½ çš„ CUDA ç‰ˆæœ¬ä¸º 12.6ï¼Œ`torch` å®˜æ–¹ç›®å‰æ”¯æŒçš„æœ€é«˜ç‰ˆæœ¬ä¸º 12.4ï¼ˆ<12.6ï¼‰ï¼Œ`torch`ä»å¯ä»¥æ­£å¸¸ä½¿ç”¨CUDAã€‚\n\n<br>\n\n# âš¡ï¸ è¿è¡Œ Gradio Demo\n\n```bash\npython app.py\n```\n\nè¿è¡Œç¨‹åºå°†ç”Ÿæˆä¸€ä¸ªæœ¬åœ° Web é¡µé¢ï¼Œåœ¨é¡µé¢ä¸­å¯å®Œæˆè¯ä»¶ç…§çš„æ“ä½œä¸äº¤äº’ã€‚\n\n<img src=\"assets/harry.png\" width=900>\n\n<br>\n\n# ğŸš€ Python æ¨ç†\n\næ ¸å¿ƒå‚æ•°ï¼š\n\n- `-i`: è¾“å…¥å›¾åƒè·¯å¾„\n- `-o`: ä¿å­˜å›¾åƒè·¯å¾„\n- `-t`: æ¨ç†ç±»å‹ï¼Œæœ‰idphotoã€human_mattingã€add_backgroundã€generate_layout_photoså¯é€‰\n- `--matting_model`: äººåƒæŠ å›¾æ¨¡å‹æƒé‡é€‰æ‹©\n- `--face_detect_model`: äººè„¸æ£€æµ‹æ¨¡å‹é€‰æ‹©\n\næ›´å¤šå‚æ•°å¯é€šè¿‡`python inference.py --help`æŸ¥çœ‹\n\n## 1. è¯ä»¶ç…§åˆ¶ä½œ\n\nè¾“å…¥ 1 å¼ ç…§ç‰‡ï¼Œè·å¾— 1 å¼ æ ‡å‡†è¯ä»¶ç…§å’Œ 1 å¼ é«˜æ¸…è¯ä»¶ç…§çš„ 4 é€šé“é€æ˜ png\n\n```python\npython inference.py -i demo/images/test0.jpg -o ./idphoto.png --height 413 --width 295\n```\n\n## 2. äººåƒæŠ å›¾\n\nè¾“å…¥ 1 å¼ ç…§ç‰‡ï¼Œè·å¾— 1å¼  4 é€šé“é€æ˜ png\n\n```python\npython inference.py -t human_matting -i demo/images/test0.jpg -o ./idphoto_matting.png --matting_model hivision_modnet\n```\n\n## 3. é€æ˜å›¾å¢åŠ åº•è‰²\n\nè¾“å…¥ 1 å¼  4 é€šé“é€æ˜ pngï¼Œè·å¾— 1 å¼ å¢åŠ äº†åº•è‰²çš„ 3é€šé“å›¾åƒ\n\n```python\npython inference.py -t add_background -i ./idphoto.png -o ./idphoto_ab.jpg  -c 4f83ce -k 30 -r 1\n```\n\n## 4. å¾—åˆ°å…­å¯¸æ’ç‰ˆç…§\n\nè¾“å…¥ 1 å¼  3 é€šé“ç…§ç‰‡ï¼Œè·å¾— 1 å¼ å…­å¯¸æ’ç‰ˆç…§\n\n```python\npython inference.py -t generate_layout_photos -i ./idphoto_ab.jpg -o ./idphoto_layout.jpg  --height 413 --width 295 -k 200\n```\n\n## 5. è¯ä»¶ç…§è£å‰ª\n\nè¾“å…¥ 1 å¼  4 é€šé“ç…§ç‰‡ï¼ˆæŠ å›¾å¥½çš„å›¾åƒï¼‰ï¼Œè·å¾— 1 å¼ æ ‡å‡†è¯ä»¶ç…§å’Œ 1 å¼ é«˜æ¸…è¯ä»¶ç…§çš„ 4 é€šé“é€æ˜ png\n\n```python\npython inference.py -t idphoto_crop -i ./idphoto_matting.png -o ./idphoto_crop.png --height 413 --width 295\n```\n\n\n<br>\n\n# âš¡ï¸ éƒ¨ç½² API æœåŠ¡\n\n## å¯åŠ¨åç«¯\n\n```\npython deploy_api.py\n```\n\n## è¯·æ±‚ API æœåŠ¡\n\nè¯¦ç»†è¯·æ±‚æ–¹å¼è¯·å‚è€ƒ [API æ–‡æ¡£](docs/api_CN.md)ï¼ŒåŒ…å«ä»¥ä¸‹è¯·æ±‚ç¤ºä¾‹ï¼š\n- [cURL](docs/api_CN.md#curl-è¯·æ±‚ç¤ºä¾‹)\n- [Python](docs/api_CN.md#python-è¯·æ±‚ç¤ºä¾‹)\n\n<br>\n\n# ğŸ³ Docker éƒ¨ç½²\n\n## 1. æ‹‰å–æˆ–æ„å»ºé•œåƒ\n\n> ä»¥ä¸‹æ–¹å¼ä¸‰é€‰ä¸€\n\n**æ–¹å¼ä¸€ï¼šæ‹‰å–æœ€æ–°é•œåƒï¼š**\n\n```bash\ndocker pull linzeyi/hivision_idphotos\n```\n\n**æ–¹å¼äºŒï¼šDockrfile ç›´æ¥æ„å»ºé•œåƒï¼š**\n\nåœ¨ç¡®ä¿å°†è‡³å°‘ä¸€ä¸ª[æŠ å›¾æ¨¡å‹æƒé‡æ–‡ä»¶](#3-ä¸‹è½½æƒé‡æ–‡ä»¶)æ”¾åˆ°`hivision/creator/weights`ä¸‹åï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š\n\n```bash\ndocker build -t linzeyi/hivision_idphotos .\n```\n\n**æ–¹å¼ä¸‰ï¼šDocker compose æ„å»ºï¼š**\n\nåœ¨ç¡®ä¿å°†è‡³å°‘ä¸€ä¸ª[æŠ å›¾æ¨¡å‹æƒé‡æ–‡ä»¶](#3-ä¸‹è½½æƒé‡æ–‡ä»¶)æ”¾åˆ°`hivision/creator/weights`ä¸‹åï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š\n\n```bash\ndocker compose build\n```\n\n## 2. è¿è¡ŒæœåŠ¡\n\n**å¯åŠ¨ Gradio Demo æœåŠ¡**\n\nè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåœ¨ä½ çš„æœ¬åœ°è®¿é—® [http://127.0.0.1:7860](http://127.0.0.1:7860/) å³å¯ä½¿ç”¨ã€‚\n\n```bash\ndocker run -d -p 7860:7860 linzeyi/hivision_idphotos\n```\n\n**å¯åŠ¨ API åç«¯æœåŠ¡**\n\n```bash\ndocker run -d -p 8080:8080 linzeyi/hivision_idphotos python3 deploy_api.py\n```\n\n**ä¸¤ä¸ªæœåŠ¡åŒæ—¶å¯åŠ¨**\n\n```bash\ndocker compose up -d\n```\n\n## ç¯å¢ƒå˜é‡\n\næœ¬é¡¹ç›®æä¾›äº†ä¸€äº›é¢å¤–çš„é…ç½®é¡¹ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œè®¾ç½®ï¼š\n\n| ç¯å¢ƒå˜é‡ | ç±»å‹\t| æè¿° | ç¤ºä¾‹ |\n|--|--|--|--|\n| FACE_PLUS_API_KEY\t | å¯é€‰\t| è¿™æ˜¯ä½ åœ¨ Face++ æ§åˆ¶å°ç”³è¯·çš„ API å¯†é’¥\t | `7-fZStDJÂ·Â·Â·Â·` |\n| FACE_PLUS_API_SECRET\t | å¯é€‰\t| Face++ APIå¯†é’¥å¯¹åº”çš„Secret | `VTee824EÂ·Â·Â·Â·` |\n| RUN_MODE | å¯é€‰ | è¿è¡Œæ¨¡å¼ï¼Œå¯é€‰å€¼ä¸º`beast`(é‡å…½æ¨¡å¼)ã€‚é‡å…½æ¨¡å¼ä¸‹äººè„¸æ£€æµ‹å’ŒæŠ å›¾æ¨¡å‹å°†ä¸é‡Šæ”¾å†…å­˜ï¼Œä»è€Œè·å¾—æ›´å¿«çš„äºŒæ¬¡æ¨ç†é€Ÿåº¦ã€‚å»ºè®®å†…å­˜16GBä»¥ä¸Šå°è¯•ã€‚ | `beast` |\n| DEFAULT_LANG | å¯é€‰ | Gradio Demoå¯åŠ¨æ—¶çš„é»˜è®¤è¯­è¨€| `en` |\n\ndockerä½¿ç”¨ç¯å¢ƒå˜é‡ç¤ºä¾‹ï¼š\n```bash\ndocker run  -d -p 7860:7860 \\\n    -e FACE_PLUS_API_KEY=7-fZStDJÂ·Â·Â·Â· \\\n    -e FACE_PLUS_API_SECRET=VTee824EÂ·Â·Â·Â· \\\n    -e RUN_MODE=beast \\\n    -e DEFAULT_LANG=en \\\n    linzeyi/hivision_idphotos  \n```\n\n<br>\n\n# FAQ\n\n## 1. å¦‚ä½•ä¿®æ”¹é¢„è®¾å°ºå¯¸å’Œé¢œè‰²ï¼Ÿ\n\n- å°ºå¯¸ï¼šä¿®æ”¹[size_list_CN.csv](demo/assets/size_list_CN.csv)åå†æ¬¡è¿è¡Œ `app.py` å³å¯ï¼Œå…¶ä¸­ç¬¬ä¸€åˆ—ä¸ºå°ºå¯¸åï¼Œç¬¬äºŒåˆ—ä¸ºé«˜åº¦ï¼Œç¬¬ä¸‰åˆ—ä¸ºå®½åº¦ã€‚\n- é¢œè‰²ï¼šä¿®æ”¹[color_list_CN.csv](demo/assets/color_list_CN.csv)åå†æ¬¡è¿è¡Œ `app.py` å³å¯ï¼Œå…¶ä¸­ç¬¬ä¸€åˆ—ä¸ºé¢œè‰²åï¼Œç¬¬äºŒåˆ—ä¸ºHexå€¼ã€‚\n\n## 2. å¦‚ä½•ä¿®æ”¹æ°´å°å­—ä½“ï¼Ÿ\n\n1. å°†å­—ä½“æ–‡ä»¶æ”¾åˆ°`hivision/plugin/font`æ–‡ä»¶å¤¹ä¸‹\n2. ä¿®æ”¹`hivision/plugin/watermark.py`çš„`font_file`å‚æ•°å€¼ä¸ºå­—ä½“æ–‡ä»¶å\n\n## 3. å¦‚ä½•æ·»åŠ ç¤¾äº¤åª’ä½“æ¨¡æ¿ç…§ï¼Ÿ\n\n1. å°†æ¨¡æ¿å›¾ç‰‡æ”¾åˆ°`hivision/plugin/template/assets`æ–‡ä»¶å¤¹ä¸‹ã€‚æ¨¡æ¿å›¾ç‰‡æ˜¯ä¸€ä¸ª4é€šé“çš„é€æ˜pngã€‚\n2. åœ¨`hivision/plugin/template/assets/template_config.json`æ–‡ä»¶ä¸­æ·»åŠ æœ€æ–°çš„æ¨¡æ¿ä¿¡æ¯ï¼Œå…¶ä¸­`width`ä¸ºæ¨¡æ¿å›¾å®½åº¦(px)ï¼Œ`height`ä¸ºæ¨¡æ¿å›¾é«˜åº¦(px)ï¼Œ`anchor_points`ä¸ºæ¨¡æ¿ä¸­é€æ˜åŒºåŸŸçš„å››ä¸ªè§’çš„åæ ‡(px)ï¼›`rotation`ä¸ºé€æ˜åŒºåŸŸç›¸å¯¹äºå‚ç›´æ–¹å‘çš„æ—‹è½¬è§’åº¦ï¼Œ>0ä¸ºé€†æ—¶é’ˆï¼Œ<0ä¸ºé¡ºæ—¶é’ˆã€‚\n3. åœ¨`demo/processor.py`çš„`_generate_image_template`å‡½æ•°ä¸­çš„`TEMPLATE_NAME_LIST`å˜é‡æ·»åŠ æœ€æ–°çš„æ¨¡æ¿å\n\n<img src=\"assets/social_template.png\" width=\"500\">\n\n## 4. å¦‚ä½•ä¿®æ”¹Gradio Demoçš„é¡¶éƒ¨å¯¼èˆªæ ï¼Ÿ\n\n- ä¿®æ”¹`demo/assets/title.md`\n\n<br>\n\n# ğŸ“§ è”ç³»æˆ‘ä»¬\n\nå¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‘é‚®ä»¶è‡³ zeyi.lin@swanhub.co\n\n<br>\n\n# ğŸ™ æ„Ÿè°¢æ”¯æŒ\n\n[![Stargazers repo roster for @Zeyi-Lin/HivisionIDPhotos](https://reporoster.com/stars/Zeyi-Lin/HivisionIDPhotos)](https://github.com/Zeyi-Lin/HivisionIDPhotos/stargazers)\n\n[![Forkers repo roster for @Zeyi-Lin/HivisionIDPhotos](https://reporoster.com/forks/Zeyi-Lin/HivisionIDPhotos)](https://github.com/Zeyi-Lin/HivisionIDPhotos/network/members)\n\n[![Star History Chart](https://api.star-history.com/svg?repos=Zeyi-Lin/HivisionIDPhotos&type=Date)](https://star-history.com/#Zeyi-Lin/HivisionIDPhotos&Date)\n\nè´¡çŒ®è€…ä»¬ï¼š\n\n<a href=\"https://github.com/Zeyi-Lin/HivisionIDPhotos/graphs/contributors\">\n  <img src=\"https://contrib.rocks/image?repo=Zeyi-Lin/HivisionIDPhotos\" />\n</a>\n\n[Zeyi-Lin](https://github.com/Zeyi-Lin)ã€[SAKURA-CAT](https://github.com/SAKURA-CAT)ã€[Feudalman](https://github.com/Feudalman)ã€[swpfY](https://github.com/swpfY)ã€[Kaikaikaifang](https://github.com/Kaikaikaifang)ã€[ShaohonChen](https://github.com/ShaohonChen)ã€[KashiwaByte](https://github.com/KashiwaByte)\n\n<br>\n\n# ğŸ“œ Lincese\n\nThis repository is licensed under the [Apache-2.0 License](LICENSE).\n\n<br>\n\n# ğŸ“š å¼•ç”¨\n\nå¦‚æœæ‚¨åœ¨ç ”ç©¶æˆ–é¡¹ç›®ä¸­ä½¿ç”¨äº†HivisionIDPhotosï¼Œè¯·è€ƒè™‘å¼•ç”¨æˆ‘ä»¬çš„å·¥ä½œã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹BibTeXæ¡ç›®ï¼š\n\n```bibtex\n@misc{hivisionidphotos,\n      title={{HivisionIDPhotos: A Lightweight and Efficient AI ID Photos Tool}},\n      author={Zeyi Lin and SwanLab Team},\n      year={2024},\n      publisher={GitHub},\n      url = {\\url{https://github.com/Zeyi-Lin/HivisionIDPhotos}},\n}\n```\n\n\n\n\n[github-stars-shield]: https://img.shields.io/github/stars/zeyi-lin/hivisionidphotos?color=ffcb47&labelColor=black&style=flat-square\n[github-stars-link]: https://github.com/zeyi-lin/hivisionidphotos/stargazers\n\n[swanhub-demo-shield]: https://swanhub.co/git/repo/SwanHub%2FAuto-README/file/preview?ref=main&path=swanhub.svg\n[swanhub-demo-link]: https://swanhub.co/ZeYiLin/HivisionIDPhotos/demo\n\n[spaces-shield]: https://img.shields.io/badge/ğŸ¤—-Open%20in%20Spaces-blue\n[spaces-link]: https://huggingface.co/spaces/TheEeeeLin/HivisionIDPhotos\n\n<!-- å¾®ä¿¡ç¾¤é“¾æ¥ -->\n[wechat-shield]: https://img.shields.io/badge/WeChat-å¾®ä¿¡-4cb55e\n[wechat-link]: https://docs.qq.com/doc/DUkpBdk90eWZFS2JW\n\n<!-- Github Release -->\n[release-shield]: https://img.shields.io/github/v/release/zeyi-lin/hivisionidphotos?color=369eff&labelColor=black&logo=github&style=flat-square\n[release-link]: https://github.com/zeyi-lin/hivisionidphotos/releases\n\n[license-shield]: https://img.shields.io/badge/license-apache%202.0-white?labelColor=black&style=flat-square\n[license-link]: https://github.com/Zeyi-Lin/HivisionIDPhotos/blob/master/LICENSE\n\n[github-issues-shield]: https://img.shields.io/github/issues/zeyi-lin/hivisionidphotos?color=ff80eb&labelColor=black&style=flat-square\n[github-issues-link]: https://github.com/zeyi-lin/hivisionidphotos/issues\n\n[dockerhub-shield]: https://img.shields.io/docker/v/linzeyi/hivision_idphotos?color=369eff&label=docker&labelColor=black&logoColor=white&style=flat-square\n[dockerhub-link]: https://hub.docker.com/r/linzeyi/hivision_idphotos/tags\n\n[trendshift-shield]: https://trendshift.io/api/badge/repositories/11622\n[trendshift-link]: https://trendshift.io/repositories/11622\n\n[hellogithub-shield]: https://abroad.hellogithub.com/v1/widgets/recommend.svg?rid=8ea1457289fb4062ba661e5299e733d6&claim_uid=Oh5UaGjfrblg0yZ\n[hellogithub-link]: https://hellogithub.com/repository/8ea1457289fb4062ba661e5299e733d6\n\n[github-contributors-shield]: https://img.shields.io/github/contributors/zeyi-lin/hivisionidphotos?color=c4f042&labelColor=black&style=flat-square\n[github-contributors-link]: https://github.com/zeyi-lin/hivisionidphotos/graphs/contributors\n\n[github-forks-shield]: https://img.shields.io/github/forks/zeyi-lin/hivisionidphotos?color=8ae8ff&labelColor=black&style=flat-square\n[github-forks-link]: https://github.com/zeyi-lin/hivisionidphotos/network/members\n\n[modelscope-shield]: https://img.shields.io/badge/Demo_on_ModelScope-purple?logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIzIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCiA8Zz4KICA8dGl0bGU+TGF5ZXIgMTwvdGl0bGU+CiAgPHBhdGggaWQ9InN2Z18xNCIgZmlsbD0iIzYyNGFmZiIgZD0ibTAsODkuODRsMjUuNjUsMGwwLDI1LjY0OTk5bC0yNS42NSwwbDAsLTI1LjY0OTk5eiIvPgogIDxwYXRoIGlkPSJzdmdfMTUiIGZpbGw9IiM2MjRhZmYiIGQ9Im05OS4xNCwxMTUuNDlsMjUuNjUsMGwwLDI1LjY1bC0yNS42NSwwbDAsLTI1LjY1eiIvPgogIDxwYXRoIGlkPSJzdmdfMTYiIGZpbGw9IiM2MjRhZmYiIGQ9Im0xNzYuMDksMTQxLjE0bC0yNS42NDk5OSwwbDAsMjIuMTlsNDcuODQsMGwwLC00Ny44NGwtMjIuMTksMGwwLDI1LjY1eiIvPgogIDxwYXRoIGlkPSJzdmdfMTciIGZpbGw9IiMzNmNmZDEiIGQ9Im0xMjQuNzksODkuODRsMjUuNjUsMGwwLDI1LjY0OTk5bC0yNS42NSwwbDAsLTI1LjY0OTk5eiIvPgogIDxwYXRoIGlkPSJzdmdfMTgiIGZpbGw9IiMzNmNmZDEiIGQ9Im0wLDY0LjE5bDI1LjY1LDBsMCwyNS42NWwtMjUuNjUsMGwwLC0yNS42NXoiLz4KICA8cGF0aCBpZD0ic3ZnXzE5IiBmaWxsPSIjNjI0YWZmIiBkPSJtMTk4LjI4LDg5Ljg0bDI1LjY0OTk5LDBsMCwyNS42NDk5OWwtMjUuNjQ5OTksMGwwLC0yNS42NDk5OXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIwIiBmaWxsPSIjMzZjZmQxIiBkPSJtMTk4LjI4LDY0LjE5bDI1LjY0OTk5LDBsMCwyNS42NWwtMjUuNjQ5OTksMGwwLC0yNS42NXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIxIiBmaWxsPSIjNjI0YWZmIiBkPSJtMTUwLjQ0LDQybDAsMjIuMTlsMjUuNjQ5OTksMGwwLDI1LjY1bDIyLjE5LDBsMCwtNDcuODRsLTQ3Ljg0LDB6Ii8+CiAgPHBhdGggaWQ9InN2Z18yMiIgZmlsbD0iIzM2Y2ZkMSIgZD0ibTczLjQ5LDg5Ljg0bDI1LjY1LDBsMCwyNS42NDk5OWwtMjUuNjUsMGwwLC0yNS42NDk5OXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIzIiBmaWxsPSIjNjI0YWZmIiBkPSJtNDcuODQsNjQuMTlsMjUuNjUsMGwwLC0yMi4xOWwtNDcuODQsMGwwLDQ3Ljg0bDIyLjE5LDBsMCwtMjUuNjV6Ii8+CiAgPHBhdGggaWQ9InN2Z18yNCIgZmlsbD0iIzYyNGFmZiIgZD0ibTQ3Ljg0LDExNS40OWwtMjIuMTksMGwwLDQ3Ljg0bDQ3Ljg0LDBsMCwtMjIuMTlsLTI1LjY1LDBsMCwtMjUuNjV6Ii8+CiA8L2c+Cjwvc3ZnPg==&labelColor=white\n[modelscope-link]: https://modelscope.cn/studios/SwanLab/HivisionIDPhotos\n\n[modelers-shield]: https://img.shields.io/badge/Demo_on_Modelers-c42a2a?logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAxMjQgNjQiIGZpbGw9Im5vbmUiPgo8cGF0aCBkPSJNNDIuNzc4MyAwSDI2LjU5NzdWMTUuNzc4N0g0Mi43NzgzVjBaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0xNi41MDg4IDQuMTc5MkgwLjMyODEyNVYxOS45NTc5SDE2LjUwODhWNC4xNzkyWiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTIzLjk1MiA0LjE3OTJIMTA3Ljc3MVYxOS45NTc5SDEyMy45NTJWNC4xNzkyWiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTYuNTA4OCA0NS40NjE5SDAuMzI4MTI1VjYxLjI0MDZIMTYuNTA4OFY0NS40NjE5WiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTIzLjk1MiA0NS40NjE5SDEwNy43NzFWNjEuMjQwNkgxMjMuOTUyVjQ1LjQ2MTlaIiBmaWxsPSIjMjQ0OTlDIi8+CjxwYXRoIGQ9Ik0zMi43MDggMTUuNzc4OEgxNi41MjczVjMxLjU1NzVIMzIuNzA4VjE1Ljc3ODhaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik01Mi44NDg2IDE1Ljc3ODhIMzYuNjY4VjMxLjU1NzVINTIuODQ4NlYxNS43Nzg4WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNOTcuNzIzNyAwSDgxLjU0M1YxNS43Nzg3SDk3LjcyMzdWMFoiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTg3LjY1MzQgMTUuNzc4OEg3MS40NzI3VjMxLjU1NzVIODcuNjUzNFYxNS43Nzg4WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNMTA3Ljc5NCAxNS43Nzg4SDkxLjYxMzNWMzEuNTU3NUgxMDcuNzk0VjE1Ljc3ODhaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0yNC42NzQ4IDMxLjU1NzZIOC40OTQxNFY0Ny4zMzYzSDI0LjY3NDhWMzEuNTU3NloiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTYwLjg3OTkgMzEuNTU3Nkg0NC42OTkyVjQ3LjMzNjNINjAuODc5OVYzMS41NTc2WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNNzkuNjIwMSAzMS41NTc2SDYzLjQzOTVWNDcuMzM2M0g3OS42MjAxVjMxLjU1NzZaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0xMTUuODI1IDMxLjU1NzZIOTkuNjQ0NVY0Ny4zMzYzSDExNS44MjVWMzEuNTU3NloiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTcwLjI1NDkgNDcuMzM1OUg1NC4wNzQyVjYzLjExNDdINzAuMjU0OVY0Ny4zMzU5WiIgZmlsbD0iI0RFMDQyOSIvPgo8L3N2Zz4=&labelColor=white\n[modelers-link]: https://modelers.cn/spaces/SwanLab/HivisionIDPhotos\n\n\n\n<!-- ç¤¾åŒºé¡¹ç›®é“¾æ¥ -->\n[community-hivision-comfyui]: https://github.com/AIFSH/HivisionIDPhotos-ComfyUI\n[community-hivision-wechat]: https://github.com/no1xuan/HivisionIDPhotos-wechat-weapp\n[community-hivision-uniapp]: https://github.com/soulerror/HivisionIDPhotos-Uniapp\n[community-hivision-cpp]: https://github.com/zjkhahah/HivisionIDPhotos-cpp\n[community-hivision-windows-gui]: https://github.com/zhaoyun0071/HivisionIDPhotos-windows-GUI\n[community-hivision-nas]: https://github.com/ONG-Leo/HivisionIDPhotos-NAS"
        },
        {
          "name": "README_EN.md",
          "type": "blob",
          "size": 22.7275390625,
          "content": "<div align=\"center\">\n\n<img alt=\"hivision_logo\" src=\"assets/hivision_logo.png\" width=120 height=120>\n<h1>HivisionIDPhoto</h1>\n\nEnglish / [ä¸­æ–‡](README.md) / [æ—¥æœ¬èª](README_JP.md) / [í•œêµ­ì–´](README_KO.md)\n\n[![][release-shield]][release-link]\n[![][dockerhub-shield]][dockerhub-link]\n[![][github-stars-shield]][github-stars-link]\n[![][github-issues-shield]][github-issues-link]\n[![][github-contributors-shield]][github-contributors-link]\n[![][github-forks-shield]][github-forks-link]\n[![][license-shield]][license-link]  \n[![][wechat-shield]][wechat-link]\n[![][spaces-shield]][spaces-link]\n[![][swanhub-demo-shield]][swanhub-demo-link]\n[![][modelscope-shield]][modelscope-link]\n[![][modelers-shield]][modelers-link]\n\n[![][trendshift-shield]][trendshift-link]\n[![][hellogithub-shield]][hellogithub-link]\n\n<img src=\"assets/demoImage.jpg\" width=900>\n\n</div>\n\n<br>\n\n> **Related Projects**ï¼š\n>\n> - [SwanLab](https://github.com/SwanHubX/SwanLab): Used throughout the training of the portrait matting model for analysis and monitoring, as well as collaboration with lab colleagues, significantly improving training efficiency.\n\n<br>\n\n# Table of Contents\n\n- [Recent Updates](#-recent-updates)\n- [Project Overview](#-project-overview)\n- [Community](#-community)\n- [Preparation](#-preparation)\n- [Demo Startup](#-run-gradio-demo)\n- [Python Inference](#-python-inference)\n- [API Service Deployment](#ï¸-deploy-api-service)\n- [Docker Deployment](#-docker-deployment)\n- [Contact Us](#-contact-us)\n- [Q&A](#qa)\n- [Contributors](#contributors)\n- [Thanks for support](#thanks-for-support)\n- [License](#lincese)\n\n<br>\n\n# ğŸ¤© Recent Updates\n\n- Online Experience: [![SwanHub Demo](https://img.shields.io/static/v1?label=Demo&message=SwanHub%20Demo&color=blue)](https://swanhub.co/ZeYiLin/HivisionIDPhotos/demo)ã€[![Spaces](https://img.shields.io/badge/ğŸ¤—-Open%20in%20Spaces-blue)](https://huggingface.co/spaces/TheEeeeLin/HivisionIDPhotos)ã€[![][modelscope-shield]][modelscope-link]\n\n- 2024.11.20: Gradio Demo adds **Print Layout** option, supports six-inch, five-inch, A4, 3R, and 4R layout sizes\n- 2024.11.16: API interface adds beauty effect parameter\n- 2024.09.24: API interface adds base64 image input option | Gradio Demo adds **Layout Photo Cropping Lines** feature\n- 2024.09.22: Gradio Demo adds **Beast Mode** and **DPI** parameter\n- 2024.09.18: Gradio Demo adds **Share Template Photos** feature and **American Style** background option\n- 2024.09.17: Gradio Demo adds **Custom Background Color-HEX Input** feature | **(Community Contribution) C++ Version** - [HivisionIDPhotos-cpp](https://github.com/zjkhahah/HivisionIDPhotos-cpp) contributed by [zjkhahah](https://github.com/zjkhahah)\n- 2024.09.16: Gradio Demo adds **Face Rotation Alignment** feature, custom size input supports **millimeters**\n- 2024.09.14: Gradio Demo adds **Custom DPI** feature, adds Japanese and Korean support, adds **Adjust Brightness, Contrast, Sharpness** feature\n\n<br>\n\n# Project Overview\n\n> ğŸš€ Thank you for your interest in our work. You may also want to check out our other achievements in the field of image processing, feel free to reach out: zeyi.lin@swanhub.co.\n\nHivisionIDPhoto aims to develop a practical and systematic intelligent algorithm for producing ID photos.\n\nIt utilizes a comprehensive AI model workflow to recognize various user photo-taking scenarios, perform matting, and generate ID photos.\n\n**HivisionIDPhoto can achieve:**\n\n1. Lightweight matting (purely offline, fast inference with **CPU** only)\n2. Generate standard ID photos and six-inch layout photos based on different size specifications\n3. Support pure offline or edge-cloud inference\n4. Beauty effects (waiting)\n5. Intelligent formal wear change (waiting)\n\n<div align=\"center\">\n<img src=\"assets/demo.png\" width=900>\n</div>\n\n---\n\nIf HivisionIDPhoto helps you, please star this repo or recommend it to your friends to solve the urgent ID photo production problem!\n\n<br>\n\n# ğŸ  Community\n\nWe have shared some interesting applications and extensions of HivisionIDPhotos built by the community:\n\n- [HivisionIDPhotos-ComfyUI](https://github.com/AIFSH/HivisionIDPhotos-ComfyUI): ComfyUI ID photo processing workflow built by [AIFSH](https://github.com/AIFSH/HivisionIDPhotos-ComfyUI) \n\n[<img src=\"assets/comfyui.png\" width=\"900\" alt=\"ComfyUI workflow\">](https://github.com/AIFSH/HivisionIDPhotos-ComfyUI)\n\n- [HivisionIDPhotos-wechat-weapp](https://github.com/no1xuan/HivisionIDPhotos-wechat-weapp): WeChat ID photo mini program, powered by the HivisionIDphotos algorithm, contributed by [no1xuan](https://github.com/no1xuan)\n\n[<img src=\"assets/community-wechat-miniprogram.png\" width=\"900\" alt=\"HivisionIDPhotos-wechat-weapp\">](https://github.com/no1xuan/HivisionIDPhotos-wechat-weapp)\n\n- [HivisionIDPhotos-Uniapp](https://github.com/soulerror/HivisionIDPhotos-Uniapp): Front-end of WeChat ID photo mini program based on uniapp, powered by the HivisionIDphotos algorithm, contributed by [soulerror](https://github.com/soulerror)\n\n[<img src=\"assets/community-uniapp-wechat-miniprogram.png\" width=\"900\" alt=\"HivisionIDPhotos-uniapp\">](https://github.com/soulerror/HivisionIDPhotos-Uniapp)\n\n- [HivisionIDPhotos-cpp](https://github.com/zjkhahah/HivisionIDPhotos-cpp): C++ version of HivisionIDphotos, built by [zjkhahah](https://github.com/zjkhahah)\n- [HivisionIDPhotos-windows-GUI](https://github.com/zhaoyun0071/HivisionIDPhotos-windows-GUI): Windows client application built by [zhaoyun0071](https://github.com/zhaoyun0071)\n- [HivisionIDPhotos-NAS](https://github.com/ONG-Leo/HivisionIDPhotos-NAS): Chinese tutorial for Synology NAS deployment, contributed by [ONG-Leo](https://github.com/ONG-Leo)\n\n<br>\n\n# ğŸ”§ Preparation\n\nEnvironment installation and dependencies:\n- Python >= 3.7 (project primarily tested on Python 3.10)\n- OS: Linux, Windows, MacOS\n\n## 1. Clone the Project\n\n```bash\ngit clone https://github.com/Zeyi-Lin/HivisionIDPhotos.git\ncd  HivisionIDPhotos\n```\n\n## 2. Install Dependency Environment\n\n> It is recommended to create a python3.10 virtual environment using conda, then execute the following commands\n\n```bash\npip install -r requirements.txt\npip install -r requirements-app.txt\n```\n\n## 3. Download Weight Files\n\n**Method 1: Script Download**\n\n```bash\npython scripts/download_model.py --models all\n```\n\n**Method 2: Direct Download**\n\nStore in the project's `hivision/creator/weights` directory:\n- `modnet_photographic_portrait_matting.onnx` (24.7MB): Official weights of [MODNet](https://github.com/ZHKKKe/MODNet), [download](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/modnet_photographic_portrait_matting.onnx)\n- `hivision_modnet.onnx` (24.7MB): Matting model with better adaptability for pure color background replacement, [download](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/hivision_modnet.onnx)\n- `rmbg-1.4.onnx` (176.2MB): Open-source matting model from [BRIA AI](https://huggingface.co/briaai/RMBG-1.4), [download](https://huggingface.co/briaai/RMBG-1.4/resolve/main/onnx/model.onnx?download=true) and rename to `rmbg-1.4.onnx`\n- `birefnet-v1-lite.onnx`(224MB): Open-source matting model from [ZhengPeng7](https://github.com/ZhengPeng7/BiRefNet), [download](https://github.com/ZhengPeng7/BiRefNet/releases/download/v1/BiRefNet-general-bb_swin_v1_tiny-epoch_232.onnx) and rename to `birefnet-v1-lite.onnx`\n\n## 4. Face Detection Model Configuration (Optional)\n\n| Extended Face Detection Model | Description | Documentation |\n| -- | -- | -- |\n| MTCNN | **Offline** face detection model, high-performance CPU inference, default model, lower detection accuracy | Use it directly after cloning this project |\n| RetinaFace | **Offline** face detection model, moderate CPU inference speed (in seconds), and high accuracy | [Download](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/retinaface-resnet50.onnx) and place it in the `hivision/creator/retinaface/weights` directory |\n| Face++ | Online face detection API launched by Megvii, higher detection accuracy, [official documentation](https://console.faceplusplus.com.cn/documents/4888373) | [Usage Documentation](docs/face++_EN.md)|\n\n## 5. Performance Reference\n\n> Test environment: Mac M1 Max 64GB, non-GPU acceleration, test image resolution: 512x715(1) and 764Ã—1146(2).\n\n| Model Combination | Memory Occupation | Inference Time (1) | Inference Time (2) |\n| -- | -- | -- | -- |\n| MODNet + mtcnn | 410MB | 0.207s | 0.246s |\n| MODNet + retinaface | 405MB | 0.571s | 0.971s |\n| birefnet-v1-lite + retinaface | 6.20GB | 7.063s | 7.128s |\n\n## 6. GPU Inference Acceleration (Optional)\n\nIn the current version, the model that can be accelerated by NVIDIA GPUs is `birefnet-v1-lite`, and please ensure you have around 16GB of VRAM.\n\nIf you want to use NVIDIA GPU acceleration for inference, after ensuring you have installed CUDA and cuDNN, find the corresponding `onnxruntime-gpu` version to install according to the [onnxruntime-gpu documentation](https://onnxruntime.ai/docs/execution-providers/CUDA-ExecutionProvider.html#cuda-12x), and find the corresponding `pytorch` version to install according to the [pytorch official website](https://pytorch.org/get-started/locally/).\n\n```bash\n# If your computer is installed with CUDA 12.x and cuDNN 8\n# Installing torch is optional. If you can't configure cuDNN, try installing torch\npip install onnxruntime-gpu==1.18.0\npip install torch --index-url https://download.pytorch.org/whl/cu121\n```\n\nAfter completing the installation, call the `birefnet-v1-lite` model to utilize GPU acceleration for inference.\n\n> TIP: CUDA installations are backward compatible. For example, if your CUDA version is 12.6 but the highest version currently matched by torch is 12.4, it's still possible to install version 12.4 on your computer.\n<br>\n\n# ğŸš€ Run Gradio Demo\n\n```bash\npython app.py\n```\n\nRunning the program will generate a local web page where you can perform operations and interact with ID photos.\n\n<img src=\"assets/harry.png\" width=900>\n\n<br>\n\n# ğŸš€ Python Inference\n\nCore parameters:\n\n- `-i`: Input image path\n- `-o`: Output image path\n- `-t`: Inference type, options are idphoto, human_matting, add_background, generate_layout_photos\n- `--matting_model`: Portrait matting model weight selection\n- `--face_detect_model`: Face detection model selection\n\nMore parameters can be viewed by running `python inference.py --help`\n\n## 1. ID Photo Creation\n\nInput 1 photo to obtain 1 standard ID photo and 1 high-definition ID photo in 4-channel transparent PNG.\n\n```python\npython inference.py -i demo/images/test0.jpg -o ./idphoto.png --height 413 --width 295\n```\n\n## 2. Portrait Matting\n\nInput 1 photo to obtain 1 4-channel transparent PNG.\n\n```python\npython inference.py -t human_matting -i demo/images/test0.jpg -o ./idphoto_matting.png --matting_model hivision_modnet\n```\n\n## 3. Add Background Color to Transparent Image\n\nInput 1 4-channel transparent PNG to obtain 1 3-channel image with added background color.\n\n```python\npython inference.py -t add_background -i ./idphoto.png -o ./idphoto_ab.jpg -c 4f83ce -k 30 -r 1\n```\n\n## 4. Generate Six-Inch Layout Photo\n\nInput 1 3-channel photo to obtain 1 six-inch layout photo.\n\n```python\npython inference.py -t generate_layout_photos -i ./idphoto_ab.jpg -o ./idphoto_layout.jpg --height 413 --width 295 -k 200\n```\n\n## 5. ID Photo Cropping\n\nInput 1 4-channel photo (the image after matting) to obtain 1 standard ID photo and 1 high-definition ID photo in 4-channel transparent PNG.\n\n```python\npython inference.py -t idphoto_crop -i ./idphoto_matting.png -o ./idphoto_crop.png --height 413 --width 295\n```\n\n<br>\n\n# âš¡ï¸ Deploy API Service\n\n## Start Backend\n\n```\npython deploy_api.py\n```\n\n## Request API Service\n\nFor detailed request methods, please refer to the [API Documentation](docs/api_EN.md), which includes the following request examples:\n- [cURL](docs/api_EN.md#curl-request-examples)\n- [Python](docs/api_EN.md#python-request-example)\n\n<br>\n\n# ğŸ³ Docker Deployment\n\n## 1. Pull or Build Image\n\n> Choose one of the following methods\n\n**Method 1: Pull the latest image:**\n\n```bash\ndocker pull linzeyi/hivision_idphotos\n```\n\n**Method 2: Directly build the image from Dockerfile:**\n\nAfter ensuring that at least one [matting model weight file](#3-download-weight-files) is placed in the `hivision/creator/weights` directory, execute the following in the project root directory:\n\n```bash\ndocker build -t linzeyi/hivision_idphotos .\n```\n\n**Method 3: Build using Docker Compose:**\n\nAfter ensuring that at least one [matting model weight file](#3-download-weight-files) is placed in the `hivision/creator/weights` directory, execute the following in the project root directory:\n\n```bash\ndocker compose build\n```\n\n## 2. Run Services\n\n**Start Gradio Demo Service**\n\nRun the following command, and you can access it locally at [http://127.0.0.1:7860](http://127.0.0.1:7860/).\n\n```bash\ndocker run -d -p 7860:7860 linzeyi/hivision_idphotos\n```\n\n**Start API Backend Service**\n\n```bash\ndocker run -d -p 8080:8080 linzeyi/hivision_idphotos python3 deploy_api.py\n```\n\n**Start Both Services Simultaneously**\n\n```bash\ndocker compose up -d\n```\n\n## Environment Variables\n\nThis project provides some additional configuration options, which can be set using environment variables:\n\n| Environment Variable | Type | Description | Example |\n|--|--|--|--|\n| FACE_PLUS_API_KEY | Optional | This is your API key obtained from the Face++ console | `7-fZStDJÂ·Â·Â·Â·` |\n| FACE_PLUS_API_SECRET | Optional | Secret corresponding to the Face++ API key | `VTee824EÂ·Â·Â·Â·` |\n| RUN_MODE | Optional | Running mode, with the option of `beast` (beast mode). In beast mode, the face detection and matting models will not release memory, achieving faster secondary inference speeds. It is recommended to try to have at least 16GB of memory. | `beast` |\n\nExample of using environment variables in Docker:\n```bash\ndocker run  -d -p 7860:7860 \\\n    -e FACE_PLUS_API_KEY=7-fZStDJÂ·Â·Â·Â· \\\n    -e FACE_PLUS_API_SECRET=VTee824EÂ·Â·Â·Â· \\\n    -e RUN_MODE=beast \\\n    linzeyi/hivision_idphotos \n```\n\n<br>\n\n# ğŸ“– Cite Projects\n\n1. MTCNN:\n\n```bibtex\n@software{ipazc_mtcnn_2021,\n    author = {ipazc},\n    title = {{MTCNN}},\n    url = {https://github.com/ipazc/mtcnn},\n    year = {2021},\n    publisher = {GitHub}\n}\n```\n\n2. ModNet:\n\n```bibtex\n@software{zhkkke_modnet_2021,\n    author = {ZHKKKe},\n    title = {{ModNet}},\n    url = {https://github.com/ZHKKKe/MODNet},\n    year = {2021},\n    publisher = {GitHub}\n}\n```\n\n<br>\n\n# Q&A\n\n## 1. How to modify preset sizes and colors?\n\n- Size: After modifying [size_list_EN.csv](demo/assets/size_list_EN.csv), run `app.py` again. The first column is the size name, the second column is the height, and the third column is the width.\n- Color: After modifying [color_list_EN.csv](demo/assets/color_list_EN.csv), run `app.py` again. The first column is the color name, and the second column is the Hex value.\n\n## 2. How to Change the Watermark Font?\n\n1. Place the font file in the `hivision/plugin/font` folder.\n2. Change the `font_file` parameter value in `hivision/plugin/watermark.py` to the name of the font file.\n\n## 3. How to Add Social Media Template Photos?\n\n1. Place the template image in the `hivision/plugin/template/assets` folder. The template image should be a 4-channel transparent PNG.\n2. Add the latest template information to the `hivision/plugin/template/assets/template_config.json` file. Here, `width` is the template image width (px), `height` is the template image height (px), `anchor_points` are the coordinates (px) of the four corners of the transparent area in the template; `rotation` is the rotation angle of the transparent area relative to the vertical direction, where >0 is counterclockwise and <0 is clockwise.\n3. Add the name of the latest template to the `TEMPLATE_NAME_LIST` variable in the `_generate_image_template` function of `demo/processor.py`.\n\n<img src=\"assets/social_template.png\" width=\"500\">\n\n## 4. How to Modify the Top Navigation Bar of the Gradio Demo?\n\n- Modify the `demo/assets/title.md` file.\n\n<br>\n\n# ğŸ“§ Contact Us\n\nIf you have any questions, please email zeyi.lin@swanhub.co\n\n<br>\n\n# Contributors\n\n<a href=\"https://github.com/Zeyi-Lin/HivisionIDPhotos/graphs/contributors\">\n  <img src=\"https://contrib.rocks/image?repo=Zeyi-Lin/HivisionIDPhotos\" />\n</a>\n\n[Zeyi-Lin](https://github.com/Zeyi-Lin)ã€[SAKURA-CAT](https://github.com/SAKURA-CAT)ã€[Feudalman](https://github.com/Feudalman)ã€[swpfY](https://github.com/swpfY)ã€[Kaikaikaifang](https://github.com/Kaikaikaifang)ã€[ShaohonChen](https://github.com/ShaohonChen)ã€[KashiwaByte](https://github.com/KashiwaByte)\n\n<br>\n\n# Thanks for support\n\n[![Stargazers repo roster for @Zeyi-Lin/HivisionIDPhotos](https://reporoster.com/stars/Zeyi-Lin/HivisionIDPhotos)](https://github.com/Zeyi-Lin/HivisionIDPhotos/stargazers)\n\n[![Forkers repo roster for @Zeyi-Lin/HivisionIDPhotos](https://reporoster.com/forks/Zeyi-Lin/HivisionIDPhotos)](https://github.com/Zeyi-Lin/HivisionIDPhotos/network/members)\n\n[![Star History Chart](https://api.star-history.com/svg?repos=Zeyi-Lin/HivisionIDPhotos&type=Date)](https://star-history.com/#Zeyi-Lin/HivisionIDPhotos&Date)\n\n# Lincese\n\nThis repository is licensed under the [Apache-2.0 License](LICENSE).\n\n[github-stars-shield]: https://img.shields.io/github/stars/zeyi-lin/hivisionidphotos?color=ffcb47&labelColor=black&style=flat-square\n[github-stars-link]: https://github.com/zeyi-lin/hivisionidphotos/stargazers\n\n[swanhub-demo-shield]: https://swanhub.co/git/repo/SwanHub%2FAuto-README/file/preview?ref=main&path=swanhub.svg\n[swanhub-demo-link]: https://swanhub.co/ZeYiLin/HivisionIDPhotos/demo\n\n[spaces-shield]: https://img.shields.io/badge/ğŸ¤—-Open%20in%20Spaces-blue\n[spaces-link]: https://huggingface.co/spaces/TheEeeeLin/HivisionIDPhotos\n\n<!-- WeChat group link -->\n[wechat-shield]: https://img.shields.io/badge/WeChat-å¾®ä¿¡-4cb55e\n[wechat-link]: https://docs.qq.com/doc/DUkpBdk90eWZFS2JW\n\n<!-- Github Release -->\n[release-shield]: https://img.shields.io/github/v/release/zeyi-lin/hivisionidphotos?color=369eff&labelColor=black&logo=github&style=flat-square\n[release-link]: https://github.com/zeyi-lin/hivisionidphotos/releases\n\n[license-shield]: https://img.shields.io/badge/license-apache%202.0-white?labelColor=black&style=flat-square\n[license-link]: https://github.com/Zeyi-Lin/HivisionIDPhotos/blob/master/LICENSE\n\n[github-issues-shield]: https://img.shields.io/github/issues/zeyi-lin/hivisionidphotos?color=ff80eb&labelColor=black&style=flat-square\n[github-issues-link]: https://github.com/zeyi-lin/hivisionidphotos/issues\n\n[dockerhub-shield]: https://img.shields.io/docker/v/linzeyi/hivision_idphotos?color=369eff&label=docker&labelColor=black&logoColor=white&style=flat-square\n[dockerhub-link]: https://hub.docker.com/r/linzeyi/hivision_idphotos/tags\n\n[trendshift-shield]: https://trendshift.io/api/badge/repositories/11622\n[trendshift-link]: https://trendshift.io/repositories/11622\n\n[hellogithub-shield]: https://abroad.hellogithub.com/v1/widgets/recommend.svg?rid=8ea1457289fb4062ba661e5299e733d6&claim_uid=Oh5UaGjfrblg0yZ\n[hellogithub-link]: https://hellogithub.com/repository/8ea1457289fb4062ba661e5299e733d6\n\n[github-contributors-shield]: https://img.shields.io/github/contributors/zeyi-lin/hivisionidphotos?color=c4f042&labelColor=black&style=flat-square\n[github-contributors-link]: https://github.com/zeyi-lin/hivisionidphotos/graphs/contributors\n\n[github-forks-shield]: https://img.shields.io/github/forks/zeyi-lin/hivisionidphotos?color=8ae8ff&labelColor=black&style=flat-square\n[github-forks-link]: https://github.com/zeyi-lin/hivisionidphotos/network/members\n\n[modelscope-shield]: https://img.shields.io/badge/Demo_on_ModelScope-purple?logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIzIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCiA8Zz4KICA8dGl0bGU+TGF5ZXIgMTwvdGl0bGU+CiAgPHBhdGggaWQ9InN2Z18xNCIgZmlsbD0iIzYyNGFmZiIgZD0ibTAsODkuODRsMjUuNjUsMGwwLDI1LjY0OTk5bC0yNS42NSwwbDAsLTI1LjY0OTk5eiIvPgogIDxwYXRoIGlkPSJzdmdfMTUiIGZpbGw9IiM2MjRhZmYiIGQ9Im05OS4xNCwxMTUuNDlsMjUuNjUsMGwwLDI1LjY1bC0yNS42NSwwbDAsLTI1LjY1eiIvPgogIDxwYXRoIGlkPSJzdmdfMTYiIGZpbGw9IiM2MjRhZmYiIGQ9Im0xNzYuMDksMTQxLjE0bC0yNS42NDk5OSwwbDAsMjIuMTlsNDcuODQsMGwwLC00Ny44NGwtMjIuMTksMGwwLDI1LjY1eiIvPgogIDxwYXRoIGlkPSJzdmdfMTciIGZpbGw9IiMzNmNmZDEiIGQ9Im0xMjQuNzksODkuODRsMjUuNjUsMGwwLDI1LjY0OTk5bC0yNS42NSwwbDAsLTI1LjY0OTk5eiIvPgogIDxwYXRoIGlkPSJzdmdfMTgiIGZpbGw9IiMzNmNmZDEiIGQ9Im0wLDY0LjE5bDI1LjY1LDBsMCwyNS42NWwtMjUuNjUsMGwwLC0yNS42NXoiLz4KICA8cGF0aCBpZD0ic3ZnXzE5IiBmaWxsPSIjNjI0YWZmIiBkPSJtMTk4LjI4LDg5Ljg0bDI1LjY0OTk5LDBsMCwyNS42NDk5OWwtMjUuNjQ5OTksMGwwLC0yNS42NDk5OXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIwIiBmaWxsPSIjMzZjZmQxIiBkPSJtMTk4LjI4LDY0LjE5bDI1LjY0OTk5LDBsMCwyNS42NWwtMjUuNjQ5OTksMGwwLC0yNS42NXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIxIiBmaWxsPSIjNjI0YWZmIiBkPSJtMTUwLjQ0LDQybDAsMjIuMTlsMjUuNjQ5OTksMGwwLDI1LjY1bDIyLjE5LDBsMCwtNDcuODRsLTQ3Ljg0LDB6Ii8+CiAgPHBhdGggaWQ9InN2Z18yMiIgZmlsbD0iIzM2Y2ZkMSIgZD0ibTczLjQ5LDg5Ljg0bDI1LjY1LDBsMCwyNS42NDk5OWwtMjUuNjUsMGwwLC0yNS42NDk5OXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIzIiBmaWxsPSIjNjI0YWZmIiBkPSJtNDcuODQsNjQuMTlsMjUuNjUsMGwwLC0yMi4xOWwtNDcuODQsMGwwLDQ3Ljg0bDIyLjE5LDBsMCwtMjUuNjV6Ii8+CiAgPHBhdGggaWQ9InN2Z18yNCIgZmlsbD0iIzYyNGFmZiIgZD0ibTQ3Ljg0LDExNS40OWwtMjIuMTksMGwwLDQ3Ljg0bDQ3Ljg0LDBsMCwtMjIuMTlsLTI1LjY1LDBsMCwtMjUuNjV6Ii8+CiA8L2c+Cjwvc3ZnPg==&labelColor=white\n[modelscope-link]: https://modelscope.cn/studios/SwanLab/HivisionIDPhotos\n\n\n[modelers-shield]: https://img.shields.io/badge/Demo_on_Modelers-c42a2a?logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAxMjQgNjQiIGZpbGw9Im5vbmUiPgo8cGF0aCBkPSJNNDIuNzc4MyAwSDI2LjU5NzdWMTUuNzc4N0g0Mi43NzgzVjBaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0xNi41MDg4IDQuMTc5MkgwLjMyODEyNVYxOS45NTc5SDE2LjUwODhWNC4xNzkyWiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTIzLjk1MiA0LjE3OTJIMTA3Ljc3MVYxOS45NTc5SDEyMy45NTJWNC4xNzkyWiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTYuNTA4OCA0NS40NjE5SDAuMzI4MTI1VjYxLjI0MDZIMTYuNTA4OFY0NS40NjE5WiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTIzLjk1MiA0NS40NjE5SDEwNy43NzFWNjEuMjQwNkgxMjMuOTUyVjQ1LjQ2MTlaIiBmaWxsPSIjMjQ0OTlDIi8+CjxwYXRoIGQ9Ik0zMi43MDggMTUuNzc4OEgxNi41MjczVjMxLjU1NzVIMzIuNzA4VjE1Ljc3ODhaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik01Mi44NDg2IDE1Ljc3ODhIMzYuNjY4VjMxLjU1NzVINTIuODQ4NlYxNS43Nzg4WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNOTcuNzIzNyAwSDgxLjU0M1YxNS43Nzg3SDk3LjcyMzdWMFoiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTg3LjY1MzQgMTUuNzc4OEg3MS40NzI3VjMxLjU1NzVIODcuNjUzNFYxNS43Nzg4WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNMTA3Ljc5NCAxNS43Nzg4SDkxLjYxMzNWMzEuNTU3NUgxMDcuNzk0VjE1Ljc3ODhaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0yNC42NzQ4IDMxLjU1NzZIOC40OTQxNFY0Ny4zMzYzSDI0LjY3NDhWMzEuNTU3NloiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTYwLjg3OTkgMzEuNTU3Nkg0NC42OTkyVjQ3LjMzNjNINjAuODc5OVYzMS41NTc2WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNNzkuNjIwMSAzMS41NTc2SDYzLjQzOTVWNDcuMzM2M0g3OS42MjAxVjMxLjU1NzZaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0xMTUuODI1IDMxLjU1NzZIOTkuNjQ0NVY0Ny4zMzYzSDExNS44MjVWMzEuNTU3NloiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTcwLjI1NDkgNDcuMzM1OUg1NC4wNzQyVjYzLjExNDdINzAuMjU0OVY0Ny4zMzU5WiIgZmlsbD0iI0RFMDQyOSIvPgo8L3N2Zz4=&labelColor=white\n[modelers-link]: https://modelers.cn/spaces/SwanLab/HivisionIDPhotos"
        },
        {
          "name": "README_JP.md",
          "type": "blob",
          "size": 24.1416015625,
          "content": "<div align=\"center\">\n\n<img alt=\"hivision_logo\" src=\"assets/hivision_logo.png\" width=120 height=120>\n<h1>HivisionIDPhoto</h1>\n\n[English](README_EN.md) / [ä¸­æ–‡](README.md) / æ—¥æœ¬èª / [í•œêµ­ì–´](README_KO.md)\n\n[![][release-shield]][release-link]\n[![][dockerhub-shield]][dockerhub-link]\n[![][github-stars-shield]][github-stars-link]\n[![][github-issues-shield]][github-issues-link]\n[![][github-contributors-shield]][github-contributors-link]\n[![][github-forks-shield]][github-forks-link]\n[![][license-shield]][license-link]  \n[![][wechat-shield]][wechat-link]\n[![][spaces-shield]][spaces-link]\n[![][swanhub-demo-shield]][swanhub-demo-link]\n[![][modelscope-shield]][modelscope-link]\n[![][modelers-shield]][modelers-link]\n\n[![][trendshift-shield]][trendshift-link]\n[![][hellogithub-shield]][hellogithub-link]\n\n<img src=\"assets/demoImage.jpg\" width=900>\n\n</div>\n\n<br>\n\n> **é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**ï¼š\n>\n> - [SwanLab](https://github.com/SwanHubX/SwanLab)ï¼šäººç‰©åˆ‡ã‚ŠæŠœããƒ¢ãƒ‡ãƒ«ã®è¨“ç·´ã‚’é€šã˜ã¦ã€åˆ†æã¨ç›£è¦–ã€ãƒ©ãƒœã®ä»²é–“ã¨ã®å”åŠ›ã¨äº¤æµã‚’è¡Œã„ã€è¨“ç·´åŠ¹ç‡ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã¾ã—ãŸã€‚\n\n<br>\n\n# ç›®æ¬¡\n\n- [æœ€è¿‘ã®æ›´æ–°](#-æœ€è¿‘ã®æ›´æ–°)\n- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)\n- [ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£](#-ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£)\n- [æº–å‚™ä½œæ¥­](#-æº–å‚™ä½œæ¥­)\n- [ãƒ‡ãƒ¢ã®èµ·å‹•](#-ãƒ‡ãƒ¢ã®èµ·å‹•)\n- [Pythonæ¨è«–](#-pythonæ¨è«–)\n- [APIã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤](#ï¸-APIã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤)\n- [Dockerãƒ‡ãƒ—ãƒ­ã‚¤](#-dockerãƒ‡ãƒ—ãƒ­ã‚¤)\n- [ãŠå•ã„åˆã‚ã›](#-ãŠå•ã„åˆã‚ã›)\n- [è²¢çŒ®è€…](#è²¢çŒ®è€…)\n\n<br>\n\n# ğŸ¤© æœ€è¿‘ã®æ›´æ–°\n\n- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä½“é¨“ï¼š [![SwanHub Demo](https://img.shields.io/static/v1?label=Demo&message=SwanHub%20Demo&color=blue)](https://swanhub.co/ZeYiLin/HivisionIDPhotos/demo)ã€[![Spaces](https://img.shields.io/badge/ğŸ¤—-Open%20in%20Spaces-blue)](https://huggingface.co/spaces/TheEeeeLin/HivisionIDPhotos)ã€[![][modelscope-shield]][modelscope-link]\n\n- 2024.11.20: Gradioãƒ‡ãƒ¢ã«**å°åˆ·ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã€å…­ã¤åˆ‡ã‚Šã€äº”ã¤åˆ‡ã‚Šã€A4ã€3Rã€4Rãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚µã‚¤ã‚ºã‚’ã‚µãƒãƒ¼ãƒˆ\n- 2024.11.16: APIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ç¾é¡”åŠ¹æœãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ \n- 2024.09.24: APIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«base64ç”»åƒå…¥åŠ›ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ  | Gradioãƒ‡ãƒ¢ã«**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå†™çœŸãƒˆãƒªãƒŸãƒ³ã‚°ãƒ©ã‚¤ãƒ³**æ©Ÿèƒ½ã‚’è¿½åŠ \n- 2024.09.22: Gradioãƒ‡ãƒ¢ã«**ãƒ“ãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰**ã¨**DPI**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ \n- 2024.09.18: Gradioãƒ‡ãƒ¢ã«**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†™çœŸã®å…±æœ‰**æ©Ÿèƒ½ã‚’è¿½åŠ ã€**ç±³å›½å¼**èƒŒæ™¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ \n- 2024.09.17: Gradioãƒ‡ãƒ¢ã«**ã‚«ã‚¹ã‚¿ãƒ åº•è‰²-HEXå…¥åŠ›**æ©Ÿèƒ½ã‚’è¿½åŠ  | **ï¼ˆã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è²¢çŒ®ï¼‰C++ãƒãƒ¼ã‚¸ãƒ§ãƒ³** - [HivisionIDPhotos-cpp](https://github.com/zjkhahah/HivisionIDPhotos-cpp) è²¢çŒ® by [zjkhahah](https://github.com/zjkhahah)\n- 2024.09.16: Gradioãƒ‡ãƒ¢ã«**é¡”å›è»¢å¯¾å¿œ**æ©Ÿèƒ½ã‚’è¿½åŠ ã€ã‚«ã‚¹ã‚¿ãƒ ã‚µã‚¤ã‚ºå…¥åŠ›ã«**ãƒŸãƒªãƒ¡ãƒ¼ãƒˆãƒ«**ã‚’ã‚µãƒãƒ¼ãƒˆ\n\n<br>\n\n# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦\n\n> ğŸš€ ç§ãŸã¡ã®ä»•äº‹ã«èˆˆå‘³ã‚’æŒã£ã¦ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ç”»åƒåˆ†é‡ã«ãŠã‘ã‚‹ä»–ã®æˆæœã‚‚ãœã²ã”è¦§ãã ã•ã„ã€‚ãŠå•ã„åˆã‚ã›ã¯ã€zeyi.lin@swanhub.co ã¾ã§ã€‚\n\nHivisionIDPhotoã¯ã€å®Ÿç”¨çš„ã§ä½“ç³»çš„ãªè¨¼æ˜å†™çœŸã®ã‚¹ãƒãƒ¼ãƒˆåˆ¶ä½œã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚\n\nã•ã¾ã–ã¾ãªãƒ¦ãƒ¼ã‚¶ãƒ¼æ’®å½±ã‚·ãƒ¼ãƒ³ã®èªè­˜ã€åˆ‡ã‚ŠæŠœããŠã‚ˆã³è¨¼æ˜å†™çœŸã®ç”Ÿæˆã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€ä¸€é€£ã®æ´—ç·´ã•ã‚ŒãŸAIãƒ¢ãƒ‡ãƒ«ä½œæ¥­ãƒ•ãƒ­ãƒ¼ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚\n\n**HivisionIDPhotoã¯ä»¥ä¸‹ã®ã“ã¨ãŒã§ãã¾ã™ï¼š**\n\n1. è»½é‡åˆ‡ã‚ŠæŠœãï¼ˆå®Œå…¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã€**CPU**ã®ã¿ã§è¿…é€Ÿã«æ¨è«–å¯èƒ½ï¼‰\n2. ç•°ãªã‚‹ã‚µã‚¤ã‚ºä»•æ§˜ã«åŸºã¥ã„ã¦ç•°ãªã‚‹æ¨™æº–è¨¼æ˜å†™çœŸã€å…­å¯¸ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå†™çœŸã‚’ç”Ÿæˆ\n3. å®Œå…¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã¾ãŸã¯ã‚¨ãƒƒã‚¸ã‚¯ãƒ©ã‚¦ãƒ‰æ¨è«–ã‚’ã‚µãƒãƒ¼ãƒˆ\n4. ç¾é¡”ï¼ˆå¾…æ©Ÿä¸­ï¼‰\n5. ã‚¹ãƒãƒ¼ãƒˆãªæ­£è£…å¤‰æ›´ï¼ˆå¾…æ©Ÿä¸­ï¼‰\n\n<div align=\"center\">\n<img src=\"assets/demo.png\" width=900>\n</div>\n\n---\n\nHivisionIDPhotoãŒã‚ãªãŸã«å½¹ç«‹ã¤å ´åˆã¯ã€ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¹ã‚¿ãƒ¼ã—ãŸã‚Šã€å‹äººã«æ¨è–¦ã—ãŸã‚Šã—ã¦ã€è¨¼æ˜å†™çœŸã®ç·Šæ€¥åˆ¶ä½œã®å•é¡Œã‚’è§£æ±ºã—ã¦ãã ã•ã„ï¼\n\n<br>\n\n# ğŸ  ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£\n\nç§ãŸã¡ã¯ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã‚ˆã£ã¦æ§‹ç¯‰ã•ã‚ŒãŸHivisionIDPhotosã®èˆˆå‘³æ·±ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„æ‹¡å¼µæ©Ÿèƒ½ã‚’ã„ãã¤ã‹å…±æœ‰ã—ã¦ã„ã¾ã™ï¼š\n\n- [HivisionIDPhotos-ComfyUI](https://github.com/AIFSH/HivisionIDPhotos-ComfyUI)ï¼šComfyUIè¨¼æ˜å†™çœŸå‡¦ç†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€[AIFSH](https://github.com/AIFSH/HivisionIDPhotos-ComfyUI)ã«ã‚ˆã£ã¦æ§‹ç¯‰ \n\n[<img src=\"assets/comfyui.png\" width=\"900\" alt=\"ComfyUI workflow\">](https://github.com/AIFSH/HivisionIDPhotos-ComfyUI)\n\n- [HivisionIDPhotos-wechat-weapp](https://github.com/no1xuan/HivisionIDPhotos-wechat-weapp)ï¼šWeChatè¨¼æ˜å†™çœŸãƒŸãƒ‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã€HivisionIDphotosã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«åŸºã¥ãã€[no1xuan](https://github.com/no1xuan)ã«ã‚ˆã‚‹è²¢çŒ®\n\n[<img src=\"assets/community-wechat-miniprogram.png\" width=\"900\" alt=\"HivisionIDPhotos-wechat-weapp\">](https://github.com/no1xuan/HivisionIDPhotos-wechat-weapp)\n\n- [HivisionIDPhotos-Uniapp](https://github.com/soulerror/HivisionIDPhotos-Uniapp)ï¼šåŸºæœ¬ã®uniappè¨¼æ˜å†™çœŸãƒŸãƒ‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å‰éƒ¨ã€HivisionIDphotosã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«åŸºã¥ãã€[soulerror](https://github.com/soulerror)ã«ã‚ˆã‚‹è²¢çŒ®\n\n[<img src=\"assets/community-uniapp-wechat-miniprogram.png\" width=\"900\" alt=\"HivisionIDPhotos-uniapp\">](https://github.com/soulerror/HivisionIDPhotos-Uniapp)\n\n- [HivisionIDPhotos-cpp](https://github.com/zjkhahah/HivisionIDPhotos-cpp)ï¼šHivisionIDphotos C++ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€[zjkhahah](https://github.com/zjkhahah)ã«ã‚ˆã£ã¦æ§‹ç¯‰\n- [HivisionIDPhotos-windows-GUI](https://github.com/zhaoyun0071/HivisionIDPhotos-windows-GUI)ï¼šWindowsã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€[zhaoyun0071](https://github.com/zhaoyun0071)ã«ã‚ˆã£ã¦æ§‹ç¯‰\n- [HivisionIDPhotos-NAS](https://github.com/ONG-Leo/HivisionIDPhotos-NAS)ï¼šSynology NASå°å…¥ã®ä¸­å›½èªãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã€[ONG-Leo](https://github.com/ONG-Leo)ã«ã‚ˆã‚‹è²¢çŒ®\n\n<br>\n\n# ğŸ”§ æº–å‚™ä½œæ¥­\n\nç’°å¢ƒã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ä¾å­˜é–¢ä¿‚ï¼š\n- Python >= 3.7ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä¸»ã«python 3.10ã§ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã¾ã™ï¼‰\n- OS: Linux, Windows, MacOS\n\n## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹\n\n```bash\ngit clone https://github.com/Zeyi-Lin/HivisionIDPhotos.git\ncd  HivisionIDPhotos\n```\n\n## 2. ä¾å­˜ç’°å¢ƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n> condaã§python3.10ã®ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ãã®å¾Œã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚\n\n```bash\npip install -r requirements.txt\npip install -r requirements-app.txt\n```\n\n## 3. é‡ã¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹\n\n**æ–¹æ³•ä¸€ï¼šã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**\n\n```bash\npython scripts/download_model.py --models all\n```\n\n**æ–¹æ³•äºŒï¼šç›´æ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®`hivision/creator/weights`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã—ã¾ã™ï¼š\n- `modnet_photographic_portrait_matting.onnx` (24.7MB): [MODNet](https://github.com/ZHKKKe/MODNet)å…¬å¼ã®é‡ã¿ã€[ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/modnet_photographic_portrait_matting.onnx)\n- `hivision_modnet.onnx` (24.7MB): å˜è‰²èƒŒæ™¯ã«å¯¾ã—ã¦é©å¿œæ€§ã®é«˜ã„åˆ‡ã‚ŠæŠœããƒ¢ãƒ‡ãƒ«ã€[ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/hivision_modnet.onnx)\n- `rmbg-1.4.onnx` (176.2MB): [BRIA AI](https://huggingface.co/briaai/RMBG-1.4)ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹åˆ‡ã‚ŠæŠœããƒ¢ãƒ‡ãƒ«ã€[ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://huggingface.co/briaai/RMBG-1.4/resolve/main/onnx/model.onnx?download=true)å¾Œã«`rmbg-1.4.onnx`ã«ãƒªãƒãƒ¼ãƒ \n- `birefnet-v1-lite.onnx`(224MB): [ZhengPeng7](https://github.com/ZhengPeng7/BiRefNet)ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹åˆ‡ã‚ŠæŠœããƒ¢ãƒ‡ãƒ«ã€[ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://github.com/ZhengPeng7/BiRefNet/releases/download/v1/BiRefNet-general-bb_swin_v1_tiny-epoch_232.onnx)å¾Œã«`birefnet-v1-lite.onnx`ã«ãƒªãƒãƒ¼ãƒ \n\n## 4. é¡”æ¤œå‡ºãƒ¢ãƒ‡ãƒ«ã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\n\n| æ‹¡å¼µé¡”æ¤œå‡ºãƒ¢ãƒ‡ãƒ« | èª¬æ˜ | ä½¿ç”¨æ–‡æ›¸ |\n| -- | -- | -- |\n| MTCNN | **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³**é¡”æ¤œå‡ºãƒ¢ãƒ‡ãƒ«ã€é«˜æ€§èƒ½CPUæ¨è«–ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ‡ãƒ«ã€æ¤œå‡ºç²¾åº¦ã¯ä½ã„ | ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³å¾Œã€ç›´æ¥ä½¿ç”¨ |\n| Face++ | MegviiãŒæä¾›ã™ã‚‹ã‚ªãƒ³ãƒ©ã‚¤ãƒ³é¡”æ¤œå‡ºAPIã€é«˜ç²¾åº¦ã®æ¤œå‡ºã€[å…¬å¼æ–‡æ›¸](https://console.faceplusplus.com.cn/documents/4888373) | [ä½¿ç”¨æ–‡æ›¸](docs/face++_EN.md)|\n\n## 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n> ãƒ†ã‚¹ãƒˆç’°å¢ƒã¯Mac M1 Max 64GBã€éGPUåŠ é€Ÿã€ãƒ†ã‚¹ãƒˆç”»åƒã®è§£åƒåº¦ã¯512x715(1)ã¨764Ã—1146(2)ã€‚\n\n| ãƒ¢ãƒ‡ãƒ«ã®çµ„ã¿åˆã‚ã› | ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | æ¨è«–æ™‚é–“(1) | æ¨è«–æ™‚é–“(2) |\n| -- | -- | -- | -- |\n| MODNet + mtcnn | 410MB | 0.207ç§’ | 0.246ç§’ |\n| MODNet + retinaface | 405MB | 0.571ç§’ | 0.971ç§’ |\n| birefnet-v1-lite + retinaface | 6.20GB | 7.063ç§’ | 7.128ç§’ |\n\n## 6. GPUæ¨è«–ã®åŠ é€Ÿï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\n\nç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ã€NVIDIA GPUã§åŠ é€Ÿå¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ã¯`birefnet-v1-lite`ã§ã™ã€‚ç´„16GBã®VRAMãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã«ã”æ³¨æ„ãã ã•ã„ã€‚\n\nNVIDIA GPUã‚’ä½¿ç”¨ã—ã¦æ¨è«–ã‚’åŠ é€Ÿã—ãŸã„å ´åˆã¯ã€CUDAã¨cuDNNãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸä¸Šã§ã€[onnxruntime-gpuã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://onnxruntime.ai/docs/execution-providers/CUDA-ExecutionProvider.html#cuda-12x)ã«å¾“ã£ã¦é©åˆ‡ãª`onnxruntime-gpu`ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€[PyTorchã®å…¬å¼ã‚µã‚¤ãƒˆ](https://pytorch.org/get-started/locally/)ã‹ã‚‰é©åˆ‡ãª`pytorch`ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚\n\n```bash\n# ã‚‚ã—ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«CUDA 12.xã¨cuDNN 8ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆ\n# torchã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä»»æ„ã§ã™ã€‚cuDNNãŒè¨­å®šã§ããªã„å ´åˆã¯ã€torchã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„\npip install onnxruntime-gpu==1.18.0\npip install torch --index-url https://download.pytorch.org/whl/cu121\n```\n\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰ã€`birefnet-v1-lite`ãƒ¢ãƒ‡ãƒ«ã‚’å‘¼ã³å‡ºã—ã¦GPUåŠ é€Ÿæ¨è«–ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚\n\n> TIPS: CUDAã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä¸‹ä½äº’æ›æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãŸã¨ãˆã°ã€CUDAã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ12.6ã§ã€torchãŒç¾åœ¨å¯¾å¿œã—ã¦ã„ã‚‹æœ€é«˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ12.4ã§ã‚ã‚‹å ´åˆã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«12.4ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\n\n<br>\n\n# ğŸš€ ãƒ‡ãƒ¢ã®èµ·å‹•\n\n```bash\npython app.py\n```\n\nãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ­ãƒ¼ã‚«ãƒ«Webãƒšãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã€ãƒšãƒ¼ã‚¸å†…ã§è¨¼æ˜å†™çœŸã®æ“ä½œã¨å¯¾è©±ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚\n\n<img src=\"assets/harry.png\" width=900>\n\n<br>\n\n# ğŸš€ Pythonæ¨è«–\n\næ ¸å¿ƒãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼š\n\n- `-i`: å…¥åŠ›ç”»åƒã®ãƒ‘ã‚¹\n- `-o`: ä¿å­˜ç”»åƒã®ãƒ‘ã‚¹\n- `-t`: æ¨è«–ã‚¿ã‚¤ãƒ—ã€idphotoã€human_mattingã€add_backgroundã€generate_layout_photosã‹ã‚‰é¸æŠå¯èƒ½\n- `--matting_model`: äººç‰©åˆ‡ã‚ŠæŠœããƒ¢ãƒ‡ãƒ«ã®é‡ã¿é¸æŠ\n- `--face_detect_model`: é¡”æ¤œå‡ºãƒ¢ãƒ‡ãƒ«ã®é¸æŠ\n\nè©³ç´°ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯`python inference.py --help`ã§ç¢ºèªã§ãã¾ã™ã€‚\n\n## 1. è¨¼æ˜å†™çœŸã®ä½œæˆ\n\n1æšã®å†™çœŸã‚’å…¥åŠ›ã—ã€1æšã®æ¨™æº–è¨¼æ˜å†™çœŸã¨1æšã®é«˜è§£åƒåº¦è¨¼æ˜å†™çœŸã®4ãƒãƒ£ãƒ³ãƒãƒ«é€æ˜PNGã‚’å–å¾—ã—ã¾ã™ã€‚\n\n```python\npython inference.py -i demo/images/test0.jpg -o ./idphoto.png --height 413 --width 295\n```\n\n## 2. äººç‰©åˆ‡ã‚ŠæŠœã\n\n1æšã®å†™çœŸã‚’å…¥åŠ›ã—ã€1æšã®4ãƒãƒ£ãƒ³ãƒãƒ«é€æ˜PNGã‚’å–å¾—ã—ã¾ã™ã€‚\n\n```python\npython inference.py -t human_matting -i demo/images/test0.jpg -o ./idphoto_matting.png --matting_model hivision_modnet\n```\n\n## 3. é€æ˜ç”»åƒã«èƒŒæ™¯è‰²ã‚’è¿½åŠ \n\n1æšã®4ãƒãƒ£ãƒ³ãƒãƒ«é€æ˜PNGã‚’å…¥åŠ›ã—ã€èƒŒæ™¯è‰²ã‚’è¿½åŠ ã—ãŸ3ãƒãƒ£ãƒ³ãƒãƒ«ç”»åƒã‚’å–å¾—ã—ã¾ã™ã€‚\n\n```python\npython inference.py -t add_background -i ./idphoto.png -o ./idphoto_ab.jpg -c 4f83ce -k 30 -r 1\n```\n\n## 4. å…­å¯¸ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå†™çœŸã®å–å¾—\n\n1æšã®3ãƒãƒ£ãƒ³ãƒãƒ«å†™çœŸã‚’å…¥åŠ›ã—ã€1æšã®å…­å¯¸ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå†™çœŸã‚’å–å¾—ã—ã¾ã™ã€‚\n\n```python\npython inference.py -t generate_layout_photos -i ./idphoto_ab.jpg -o ./idphoto_layout.jpg --height 413 --width 295 -k 200\n```\n\n## 5. è¨¼æ˜å†™çœŸã®ãƒˆãƒªãƒŸãƒ³ã‚°\n\n1æšã®4ãƒãƒ£ãƒ³ãƒãƒ«å†™çœŸï¼ˆåˆ‡ã‚ŠæŠœãæ¸ˆã¿ã®ç”»åƒï¼‰ã‚’å…¥åŠ›ã—ã€1æšã®æ¨™æº–è¨¼æ˜å†™çœŸã¨1æšã®é«˜è§£åƒåº¦è¨¼æ˜å†™çœŸã®4ãƒãƒ£ãƒ³ãƒãƒ«é€æ˜PNGã‚’å–å¾—ã—ã¾ã™ã€‚\n\n```python\npython inference.py -t idphoto_crop -i ./idphoto_matting.png -o ./idphoto_crop.png --height 413 --width 295\n```\n\n<br>\n\n# âš¡ï¸ APIã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤\n\n## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’èµ·å‹•\n\n```\npython deploy_api.py\n```\n\n## APIã‚µãƒ¼ãƒ“ã‚¹ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ\n\nè©³ç´°ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆæ–¹æ³•ã¯[APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](docs/api_EN.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ä»¥ä¸‹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ãŒå«ã¾ã‚Œã¾ã™ï¼š\n- [cURL](docs/api_EN.md#curl-request-examples)\n- [Python](docs/api_EN.md#python-request-example)\n\n<br>\n\n# ğŸ³ Dockerãƒ‡ãƒ—ãƒ­ã‚¤\n\n## 1. ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ—ãƒ«ã¾ãŸã¯ãƒ“ãƒ«ãƒ‰ã™ã‚‹\n\n> ä»¥ä¸‹ã®æ–¹æ³•ã‹ã‚‰3ã¤ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚\n\n**æ–¹æ³•ä¸€ï¼šæœ€æ–°ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ—ãƒ«ï¼š**\n\n```bash\ndocker pull linzeyi/hivision_idphotos\n```\n\n**æ–¹æ³•äºŒï¼šDockerfileã‹ã‚‰ç›´æ¥ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ï¼š**\n\n`hivision/creator/weights` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å°‘ãªãã¨ã‚‚1ã¤ã®[ãƒã‚¹ã‚­ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã®é‡ã¿ãƒ•ã‚¡ã‚¤ãƒ«](#3-é‡ã¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰)ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š\n\n```bash\ndocker build -t linzeyi/hivision_idphotos .\n```\n\n**æ–¹æ³•ä¸‰ï¼šDocker composeã§ãƒ“ãƒ«ãƒ‰ï¼š**\n\n`hivision/creator/weights` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å°‘ãªãã¨ã‚‚1ã¤ã®[ãƒã‚¹ã‚­ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã®é‡ã¿ãƒ•ã‚¡ã‚¤ãƒ«](#3-é‡ã¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰)ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š\n\n```bash\ndocker compose build\n```\n\n## 2. ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè¡Œ\n\n**Gradioãƒ‡ãƒ¢ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•**\n\næ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ [http://127.0.0.1:7860](http://127.0.0.1:7860/) ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ä½¿ç”¨å¯èƒ½ã§ã™ã€‚\n\n```bash\ndocker run -d -p 7860:7860 linzeyi/hivision_idphotos\n```\n\n**APIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•**\n\n```bash\ndocker run -d -p 8080:8080 linzeyi/hivision_idphotos python3 deploy_api.py\n```\n\n**2ã¤ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’åŒæ™‚ã«èµ·å‹•**\n\n```bash\ndocker compose up -d\n```\n\n## ç’°å¢ƒå¤‰æ•°\n\næœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã„ãã¤ã‹ã®è¿½åŠ è¨­å®šé …ç›®ã‚’æä¾›ã—ã€ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã—ã¾ã™ï¼š\n\n| ç’°å¢ƒå¤‰æ•° | ã‚¿ã‚¤ãƒ—\t| èª¬æ˜ | ä¾‹ |\n|--|--|--|--|\n| FACE_PLUS_API_KEY\t | ã‚ªãƒ—ã‚·ãƒ§ãƒ³\t| ã“ã‚Œã¯Face++ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç”³è«‹ã—ãŸAPIã‚­ãƒ¼ã§ã™ã€‚\t | `7-fZStDJÂ·Â·Â·Â·` |\n| FACE_PLUS_API_SECRET\t | ã‚ªãƒ—ã‚·ãƒ§ãƒ³\t| Face++ APIã‚­ãƒ¼ã«å¯¾å¿œã™ã‚‹Secret | `VTee824EÂ·Â·Â·Â·` |\n\ndockerã§ã®ç’°å¢ƒå¤‰æ•°ä½¿ç”¨ä¾‹ï¼š\n```bash\ndocker run  -d -p 7860:7860 \\\n    -e FACE_PLUS_API_KEY=7-fZStDJÂ·Â·Â·Â· \\\n    -e FACE_PLUS_API_SECRET=VTee824EÂ·Â·Â·Â· \\\n    linzeyi/hivision_idphotos \n```\n\n<br>\n\n# ğŸ“– ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å¼•ç”¨\n\n1. MTCNN:\n\n```bibtex\n@software{ipazc_mtcnn_2021,\n    author = {ipazc},\n    title = {{MTCNN}},\n    url = {https://github.com/ipazc/mtcnn},\n    year = {2021},\n    publisher = {GitHub}\n}\n```\n\n2. ModNet:\n\n```bibtex\n@software{zhkkke_modnet_2021,\n    author = {ZHKKKe},\n    title = {{ModNet}},\n    url = {https://github.com/ZHKKKe/MODNet},\n    year = {2021},\n    publisher = {GitHub}\n}\n```\n\n<br>\n\n# ã‚ˆãã‚ã‚‹è³ªå• (FAQ)\n\n## 1. åŸºæœ¬çš„ãªã‚µã‚¤ã‚ºã¨è‰²ã‚’ã©ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã‹ï¼Ÿ\n\n- ã‚µã‚¤ã‚º: [size_list_EN.csv](demo/assets/size_list_EN.csv) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã—ãŸå¾Œã€`app.py`ã‚’å†å®Ÿè¡Œã™ã‚Œã°å¤§ä¸ˆå¤«ã§ã™ã€‚æœ€åˆã®åˆ—ã¯ã‚µã‚¤ã‚ºåã€äºŒç•ªç›®ã®åˆ—ã¯é«˜ã•ã€ä¸‰ç•ªç›®ã®åˆ—ã¯å¹…ã§ã™ã€‚\n- è‰²: [color_list_EN.csv](demo/assets/color_list_EN.csv) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã—ãŸå¾Œã€`app.py`ã‚’å†å®Ÿè¡Œã™ã‚Œã°å¤§ä¸ˆå¤«ã§ã™ã€‚æœ€åˆã®åˆ—ã¯è‰²åã€äºŒç•ªç›®ã®åˆ—ã¯Hexå€¤ã§ã™ã€‚\n\n## 2. ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒãƒ¼ã‚¯ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’ã©ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã‹ï¼Ÿ\n\n1. ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’`hivision/plugin/font`ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ç½®ãã¾ã™ã€‚\n2. `hivision/plugin/watermark.py`ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®`font_file`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ã‚’ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«åã«å¤‰æ›´ã—ã¾ã™ã€‚\n\n## 3. ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”»åƒã‚’ã©ã®ã‚ˆã†ã«è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿ\n\n1. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”»åƒã‚’`hivision/plugin/template/assets`ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ç½®ãã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”»åƒã¯4ãƒãƒ£ãƒ³ãƒãƒ«ã®é€æ˜PNGã§ã™ã€‚\n2. `hivision/plugin/template/assets/template_config.json`ãƒ•ã‚¡ã‚¤ãƒ«ã«æœ€æ–°ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæƒ…å ±ã‚’è¿½åŠ ã—ã¾ã™ã€‚ã“ã“ã§`width`ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”»åƒã®å¹…(px)ã€`height`ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”»åƒã®é«˜ã•(px)ã€`anchor_points`ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®é€æ˜é ˜åŸŸã®4ã¤ã®éš…ã®åº§æ¨™(px)ã§ã™ã€‚`rotation`ã¯é€æ˜é ˜åŸŸã®å‚ç›´æ–¹å‘ã«å¯¾ã™ã‚‹å›è»¢è§’åº¦ã§ã€>0ã¯åæ™‚è¨ˆå›ã‚Šã€<0ã¯æ™‚è¨ˆå›ã‚Šã§ã™ã€‚\n3. `demo/processor.py`ã®`_generate_image_template`é–¢æ•°å†…ã®`TEMPLATE_NAME_LIST`å¤‰æ•°ã«æœ€æ–°ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåã‚’è¿½åŠ ã—ã¾ã™ã€‚\n\n<img src=\"assets/social_template.png\" width=\"500\">\n\n## 4. Gradio Demoã®ä¸Šéƒ¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚’ã©ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã‹ï¼Ÿ\n\n- `demo/assets/title.md`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã—ã¾ã™ã€‚\n\n<br>\n\n# ğŸ“§ ãŠå•ã„åˆã‚ã›\n\nã”ä¸æ˜ãªç‚¹ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€zeyi.lin@swanhub.coã¾ã§ãƒ¡ãƒ¼ãƒ«ã‚’ãŠé€ã‚Šãã ã•ã„ã€‚\n\n<br>\n\n# è²¢çŒ®è€…\n\n<a href=\"https://github.com/Zeyi-Lin/HivisionIDPhotos/graphs/contributors\">\n  <img src=\"https://contrib.rocks/image?repo=Zeyi-Lin/HivisionIDPhotos\" />\n</a>\n\n[Zeyi-Lin](https://github.com/Zeyi-Lin)ã€[SAKURA-CAT](https://github.com/SAKURA-CAT)ã€[Feudalman](https://github.com/Feudalman)ã€[swpfY](https://github.com/swpfY)ã€[Kaikaikaifang](https://github.com/Kaikaikaifang)ã€[ShaohonChen](https://github.com/ShaohonChen)ã€[KashiwaByte](https://github.com/KashiwaByte)\n\n<br>\n\n# Thanks for support\n\n[![Stargazers repo roster for @Zeyi-Lin/HivisionIDPhotos](https://reporoster.com/stars/Zeyi-Lin/HivisionIDPhotos)](https://github.com/Zeyi-Lin/HivisionIDPhotos/stargazers)\n\n[![Forkers repo roster for @Zeyi-Lin/HivisionIDPhotos](https://reporoster.com/forks/Zeyi-Lin/HivisionIDPhotos)](https://github.com/Zeyi-Lin/HivisionIDPhotos/network/members)\n\n[![Star History Chart](https://api.star-history.com/svg?repos=Zeyi-Lin/HivisionIDPhotos&type=Date)](https://star-history.com/#Zeyi-Lin/HivisionIDPhotos&Date)\n\n<br>\n\n# Lincese\n\nThis repository is licensed under the [Apache-2.0 License](LICENSE).\n\n[github-stars-shield]: https://img.shields.io/github/stars/zeyi-lin/hivisionidphotos?color=ffcb47&labelColor=black&style=flat-square\n[github-stars-link]: https://github.com/zeyi-lin/hivisionidphotos/stargazers\n\n[swanhub-demo-shield]: https://swanhub.co/git/repo/SwanHub%2FAuto-README/file/preview?ref=main&path=swanhub.svg\n[swanhub-demo-link]: https://swanhub.co/ZeYiLin/HivisionIDPhotos/demo\n\n[spaces-shield]: https://img.shields.io/badge/ğŸ¤—-Open%20in%20Spaces-blue\n[spaces-link]: https://huggingface.co/spaces/TheEeeeLin/HivisionIDPhotos\n\n<!-- å¾®ä¿¡ç¾¤é“¾æ¥ -->\n[wechat-shield]: https://img.shields.io/badge/WeChat-å¾®ä¿¡-4cb55e\n[wechat-link]: https://docs.qq.com/doc/DUkpBdk90eWZFS2JW\n\n<!-- Github Release -->\n[release-shield]: https://img.shields.io/github/v/release/zeyi-lin/hivisionidphotos?color=369eff&labelColor=black&logo=github&style=flat-square\n[release-link]: https://github.com/zeyi-lin/hivisionidphotos/releases\n\n[license-shield]: https://img.shields.io/badge/license-apache%202.0-white?labelColor=black&style=flat-square\n[license-link]: https://github.com/Zeyi-Lin/HivisionIDPhotos/blob/master/LICENSE\n\n[github-issues-shield]: https://img.shields.io/github/issues/zeyi-lin/hivisionidphotos?color=ff80eb&labelColor=black&style=flat-square\n[github-issues-link]: https://github.com/zeyi-lin/hivisionidphotos/issues\n\n[dockerhub-shield]: https://img.shields.io/docker/v/linzeyi/hivision_idphotos?color=369eff&label=docker&labelColor=black&logoColor=white&style=flat-square\n[dockerhub-link]: https://hub.docker.com/r/linzeyi/hivision_idphotos/tags\n\n[trendshift-shield]: https://trendshift.io/api/badge/repositories/11622\n[trendshift-link]: https://trendshift.io/repositories/11622\n\n[hellogithub-shield]: https://abroad.hellogithub.com/v1/widgets/recommend.svg?rid=8ea1457289fb4062ba661e5299e733d6&claim_uid=Oh5UaGjfrblg0yZ\n[hellogithub-link]: https://hellogithub.com/repository/8ea1457289fb4062ba661e5299e733d6\n\n[github-contributors-shield]: https://img.shields.io/github/contributors/zeyi-lin/hivisionidphotos?color=c4f042&labelColor=black&style=flat-square\n[github-contributors-link]: https://github.com/zeyi-lin/hivisionidphotos/graphs/contributors\n\n[github-forks-shield]: https://img.shields.io/github/forks/zeyi-lin/hivisionidphotos?color=8ae8ff&labelColor=black&style=flat-square\n[github-forks-link]: https://github.com/zeyi-lin/hivisionidphotos/network/members\n\n[modelscope-shield]: https://img.shields.io/badge/Demo_on_ModelScope-purple?logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIzIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCiA8Zz4KICA8dGl0bGU+TGF5ZXIgMTwvdGl0bGU+CiAgPHBhdGggaWQ9InN2Z18xNCIgZmlsbD0iIzYyNGFmZiIgZD0ibTAsODkuODRsMjUuNjUsMGwwLDI1LjY0OTk5bC0yNS42NSwwbDAsLTI1LjY0OTk5eiIvPgogIDxwYXRoIGlkPSJzdmdfMTUiIGZpbGw9IiM2MjRhZmYiIGQ9Im05OS4xNCwxMTUuNDlsMjUuNjUsMGwwLDI1LjY1bC0yNS42NSwwbDAsLTI1LjY1eiIvPgogIDxwYXRoIGlkPSJzdmdfMTYiIGZpbGw9IiM2MjRhZmYiIGQ9Im0xNzYuMDksMTQxLjE0bC0yNS42NDk5OSwwbDAsMjIuMTlsNDcuODQsMGwwLC00Ny44NGwtMjIuMTksMGwwLDI1LjY1eiIvPgogIDxwYXRoIGlkPSJzdmdfMTciIGZpbGw9IiMzNmNmZDEiIGQ9Im0xMjQuNzksODkuODRsMjUuNjUsMGwwLDI1LjY0OTk5bC0yNS42NSwwbDAsLTI1LjY0OTk5eiIvPgogIDxwYXRoIGlkPSJzdmdfMTgiIGZpbGw9IiMzNmNmZDEiIGQ9Im0wLDY0LjE5bDI1LjY1LDBsMCwyNS42NWwtMjUuNjUsMGwwLC0yNS42NXoiLz4KICA8cGF0aCBpZD0ic3ZnXzE5IiBmaWxsPSIjNjI0YWZmIiBkPSJtMTk4LjI4LDg5Ljg0bDI1LjY0OTk5LDBsMCwyNS42NDk5OWwtMjUuNjQ5OTksMGwwLC0yNS42NDk5OXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIwIiBmaWxsPSIjMzZjZmQxIiBkPSJtMTk4LjI4LDY0LjE5bDI1LjY0OTk5LDBsMCwyNS42NWwtMjUuNjQ5OTksMGwwLC0yNS42NXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIxIiBmaWxsPSIjNjI0YWZmIiBkPSJtMTUwLjQ0LDQybDAsMjIuMTlsMjUuNjQ5OTksMGwwLDI1LjY1bDIyLjE5LDBsMCwtNDcuODRsLTQ3Ljg0LDB6Ii8+CiAgPHBhdGggaWQ9InN2Z18yMiIgZmlsbD0iIzM2Y2ZkMSIgZD0ibTczLjQ5LDg5Ljg0bDI1LjY1LDBsMCwyNS42NDk5OWwtMjUuNjUsMGwwLC0yNS42NDk5OXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIzIiBmaWxsPSIjNjI0YWZmIiBkPSJtNDcuODQsNjQuMTlsMjUuNjUsMGwwLC0yMi4xOWwtNDcuODQsMGwwLDQ3Ljg0bDIyLjE5LDBsMCwtMjUuNjV6Ii8+CiAgPHBhdGggaWQ9InN2Z18yNCIgZmlsbD0iIzYyNGFmZiIgZD0ibTQ3Ljg0LDExNS40OWwtMjIuMTksMGwwLDQ3Ljg0bDQ3Ljg0LDBsMCwtMjIuMTlsLTI1LjY1LDBsMCwtMjUuNjV6Ii8+CiA8L2c+Cjwvc3ZnPg==&labelColor=white\n[modelscope-link]: https://modelscope.cn/studios/SwanLab/HivisionIDPhotos\n\n[modelers-shield]: https://img.shields.io/badge/Demo_on_Modelers-c42a2a?logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAxMjQgNjQiIGZpbGw9Im5vbmUiPgo8cGF0aCBkPSJNNDIuNzc4MyAwSDI2LjU5NzdWMTUuNzc4N0g0Mi43NzgzVjBaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0xNi41MDg4IDQuMTc5MkgwLjMyODEyNVYxOS45NTc5SDE2LjUwODhWNC4xNzkyWiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTIzLjk1MiA0LjE3OTJIMTA3Ljc3MVYxOS45NTc5SDEyMy45NTJWNC4xNzkyWiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTYuNTA4OCA0NS40NjE5SDAuMzI4MTI1VjYxLjI0MDZIMTYuNTA4OFY0NS40NjE5WiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTIzLjk1MiA0NS40NjE5SDEwNy43NzFWNjEuMjQwNkgxMjMuOTUyVjQ1LjQ2MTlaIiBmaWxsPSIjMjQ0OTlDIi8+CjxwYXRoIGQ9Ik0zMi43MDggMTUuNzc4OEgxNi41MjczVjMxLjU1NzVIMzIuNzA4VjE1Ljc3ODhaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik01Mi44NDg2IDE1Ljc3ODhIMzYuNjY4VjMxLjU1NzVINTIuODQ4NlYxNS43Nzg4WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNOTcuNzIzNyAwSDgxLjU0M1YxNS43Nzg3SDk3LjcyMzdWMFoiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTg3LjY1MzQgMTUuNzc4OEg3MS40NzI3VjMxLjU1NzVIODcuNjUzNFYxNS43Nzg4WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNMTA3Ljc5NCAxNS43Nzg4SDkxLjYxMzNWMzEuNTU3NUgxMDcuNzk0VjE1Ljc3ODhaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0yNC42NzQ4IDMxLjU1NzZIOC40OTQxNFY0Ny4zMzYzSDI0LjY3NDhWMzEuNTU3NloiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTYwLjg3OTkgMzEuNTU3Nkg0NC42OTkyVjQ3LjMzNjNINjAuODc5OVYzMS41NTc2WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNNzkuNjIwMSAzMS41NTc2SDYzLjQzOTVWNDcuMzM2M0g3OS42MjAxVjMxLjU1NzZaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0xMTUuODI1IDMxLjU1NzZIOTkuNjQ0NVY0Ny4zMzYzSDExNS44MjVWMzEuNTU3NloiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTcwLjI1NDkgNDcuMzM1OUg1NC4wNzQyVjYzLjExNDdINzAuMjU0OVY0Ny4zMzU5WiIgZmlsbD0iI0RFMDQyOSIvPgo8L3N2Zz4=&labelColor=white\n[modelers-link]: https://modelers.cn/spaces/SwanLab/HivisionIDPhotos"
        },
        {
          "name": "README_KO.md",
          "type": "blob",
          "size": 23.0009765625,
          "content": "<div align=\"center\">\n\n<img alt=\"hivision_logo\" src=\"assets/hivision_logo.png\" width=120 height=120>\n<h1>HivisionIDPhoto</h1>\n\n[English](README_EN.md) / [ä¸­æ–‡](README.md) / [æ—¥æœ¬èª](README_JP.md) / í•œêµ­ì–´\n\n[![][release-shield]][release-link]\n[![][dockerhub-shield]][dockerhub-link]\n[![][github-stars-shield]][github-stars-link]\n[![][github-issues-shield]][github-issues-link]\n[![][github-contributors-shield]][github-contributors-link]\n[![][github-forks-shield]][github-forks-link]\n[![][license-shield]][license-link]  \n[![][wechat-shield]][wechat-link]\n[![][spaces-shield]][spaces-link]\n[![][swanhub-demo-shield]][swanhub-demo-link]\n[![][modelscope-shield]][modelscope-link]\n[![][modelers-shield]][modelers-link]\n\n[![][trendshift-shield]][trendshift-link]\n[![][hellogithub-shield]][hellogithub-link]\n\n<img src=\"assets/demoImage.jpg\" width=900>\n\n</div>\n\n<br>\n\n> **ê´€ë ¨ í”„ë¡œì íŠ¸**ï¼š\n>\n> - [SwanLab](https://github.com/SwanHubX/SwanLab)ï¼šì¸ë¬¼ ì»·ì•„ì›ƒ ëª¨ë¸ì˜ í›ˆë ¨ì„ í†µí•´, ë¶„ì„ê³¼ ê°ì‹œ, ì—°êµ¬ì‹¤ ë™ë£Œë“¤ê³¼ì˜ í˜‘ë ¥ ë° êµë¥˜ë¥¼ ì§„í–‰í•˜ì—¬ í›ˆë ¨ íš¨ìœ¨ì„±ì„ í¬ê²Œ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.\n\n<br>\n\n# ëª©ì°¨\n\n- [ìµœê·¼ ì—…ë°ì´íŠ¸](#-ìµœê·¼-ì—…ë°ì´íŠ¸)\n- [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)\n- [ì»¤ë®¤ë‹ˆí‹°](#-ì»¤ë®¤ë‹ˆí‹°)\n- [ì¤€ë¹„ ì‘ì—…](#-ì¤€ë¹„-ì‘ì—…)\n- [ë°ëª¨ ì‹¤í–‰](#-ë°ëª¨-ì‹¤í–‰)\n- [Python ì¶”ë¡ ](#-python-ì¶”ë¡ )\n- [API ì„œë¹„ìŠ¤ ë°°í¬](#ï¸-API-ì„œë¹„ìŠ¤-ë°°í¬)\n- [Docker ë°°í¬](#-docker-ë°°í¬)\n- [ë¬¸ì˜í•˜ê¸°](#-ë¬¸ì˜í•˜ê¸°)\n- [ê¸°ì—¬ì](#ê¸°ì—¬ì)\n\n<br>\n\n# ğŸ¤© ìµœê·¼ ì—…ë°ì´íŠ¸\n\n- ì˜¨ë¼ì¸ ì²´í—˜: [![SwanHub Demo](https://img.shields.io/static/v1?label=Demo&message=SwanHub%20Demo&color=blue)](https://swanhub.co/ZeYiLin/HivisionIDPhotos/demo)ã€[![Spaces](https://img.shields.io/badge/ğŸ¤—-Open%20in%20Spaces-blue)](https://huggingface.co/spaces/TheEeeeLin/HivisionIDPhotos)ã€[![][modelscope-shield]][modelscope-link]\n\n- 2024.11.20: Gradio ë°ëª¨ì— **ì¸ì‡„ ë ˆì´ì•„ì›ƒ** ì˜µì…˜ ì¶”ê°€, 6ì¸ì¹˜, 5ì¸ì¹˜, A4, 3R, 4R ë ˆì´ì•„ì›ƒ í¬ê¸° ì§€ì›\n- 2024.11.16: API ì¸í„°í˜ì´ìŠ¤ì— ë·°í‹° íš¨ê³¼ ë§¤ê°œë³€ìˆ˜ ì¶”ê°€\n- 2024.09.24: API ì¸í„°í˜ì´ìŠ¤ì— base64 ì´ë¯¸ì§€ ì…ë ¥ ì˜µì…˜ ì¶”ê°€ | Gradio ë°ëª¨ì— **ë ˆì´ì•„ì›ƒ ì‚¬ì§„ ìë¥´ê¸° ì„ ** ê¸°ëŠ¥ ì¶”ê°€\n- 2024.09.22: Gradio Demoì— **ë²„ìŠ¤íŠ¸ ëª¨ë“œ** ë° **DPI** ë§¤ê°œë³€ìˆ˜ ì¶”ê°€\n- 2024.09.18: Gradio Demoì— **í…œí”Œë¦¿ ì‚¬ì§„ ê³µìœ ** ê¸°ëŠ¥ ì¶”ê°€, **ë¯¸êµ­ì‹** ë°°ê²½ ì˜µì…˜ ì¶”ê°€\n- 2024.09.17: Gradio Demoì— **ì»¤ìŠ¤í…€ ë°°ê²½ìƒ‰-HEX ì…ë ¥** ê¸°ëŠ¥ ì¶”ê°€ | **(ì»¤ë®¤ë‹ˆí‹° ê¸°ì—¬) C++ ë²„ì „** - [HivisionIDPhotos-cpp](https://github.com/zjkhahah/HivisionIDPhotos-cpp) ê¸°ì—¬ by [zjkhahah](https://github.com/zjkhahah)\n- 2024.09.16: Gradio Demoì— **ì–¼êµ´ íšŒì „ ì •ë ¬** ê¸°ëŠ¥ ì¶”ê°€, ì»¤ìŠ¤í…€ ì‚¬ì´ì¦ˆ ì…ë ¥ì— **ë°€ë¦¬ë¯¸í„°** ë‹¨ìœ„ ì¶”ê°€\n\n<br>\n\n# í”„ë¡œì íŠ¸ ê°œìš”\n\n> ğŸš€ ìš°ë¦¬ì˜ ì‘ì—…ì— ê´€ì‹¬ì„ ê°€ì ¸ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì´ë¯¸ì§€ ë¶„ì•¼ì˜ ë‹¤ë¥¸ ì„±ê³¼ë„ ê¼­ í™•ì¸í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. ë¬¸ì˜ëŠ” zeyi.lin@swanhub.coë¡œ í•´ì£¼ì„¸ìš”.\n\nHivisionIDPhotoëŠ” ì‹¤ìš©ì ì´ê³  ì²´ê³„ì ì¸ ì¦ëª…ì‚¬ì§„ì˜ ìŠ¤ë§ˆíŠ¸ ì œì‘ ì•Œê³ ë¦¬ì¦˜ì„ ê°œë°œí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.\n\në‹¤ì–‘í•œ ì‚¬ìš©ì ì´¬ì˜ ì¥ë©´ì˜ ì¸ì‹, ì»·ì•„ì›ƒ ë° ì¦ëª…ì‚¬ì§„ ìƒì„±ì„ ì‹¤í˜„í•˜ê¸° ìœ„í•´ ì¼ë ¨ì˜ ì„¸ë ¨ëœ AI ëª¨ë¸ ì‘ì—… íë¦„ì„ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n**HivisionIDPhotoëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:**\n\n1. ê²½ëŸ‰ ì»·ì•„ì›ƒ (ì™„ì „ ì˜¤í”„ë¼ì¸ì—ì„œ, **CPU**ë§Œìœ¼ë¡œ ì‹ ì†í•œ ì¶”ë¡  ê°€ëŠ¥)\n2. ë‹¤ì–‘í•œ ì‚¬ì´ì¦ˆ ì‚¬ì–‘ì— ë”°ë¼ ë‹¤ì–‘í•œ í‘œì¤€ ì¦ëª…ì‚¬ì§„, ìœ¡å¯¸ ë ˆì´ì•„ì›ƒ ì‚¬ì§„ ìƒì„±\n3. ì™„ì „ ì˜¤í”„ë¼ì¸ ë˜ëŠ” ì—£ì§€ í´ë¼ìš°ë“œ ì¶”ë¡  ì§€ì›\n4. ë¯¸ìš© (ëŒ€ê¸° ì¤‘)\n5. ìŠ¤ë§ˆíŠ¸í•œ ì •ì¥ ë³€ê²½ (ëŒ€ê¸° ì¤‘)\n\n<div align=\"center\">\n<img src=\"assets/demo.png\" width=900>\n</div>\n\n---\n\nHivisionIDPhotoê°€ ì—¬ëŸ¬ë¶„ì—ê²Œ ë„ì›€ì´ ëœë‹¤ë©´, ì´ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ìŠ¤íƒ€í•˜ê±°ë‚˜ ì¹œêµ¬ì—ê²Œ ì¶”ì²œí•˜ì—¬ ì¦ëª…ì‚¬ì§„ì˜ ê¸´ê¸‰ ì œì‘ ë¬¸ì œë¥¼ í•´ê²°í•´ ì£¼ì„¸ìš”!\n\n<br>\n\n# ğŸ  ì»¤ë®¤ë‹ˆí‹°\n\nìš°ë¦¬ëŠ” ì»¤ë®¤ë‹ˆí‹°ì— ì˜í•´ êµ¬ì¶•ëœ HivisionIDPhotosì˜ í¥ë¯¸ë¡œìš´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë° í™•ì¥ ê¸°ëŠ¥ì„ ëª‡ ê°€ì§€ ê³µìœ í•©ë‹ˆë‹¤:\n\n- [HivisionIDPhotos-ComfyUI](https://github.com/AIFSH/HivisionIDPhotos-ComfyUI): ComfyUI ì¦ëª…ì‚¬ì§„ ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš°, [AIFSH](https://github.com/AIFSH/HivisionIDPhotos-ComfyUI)ê°€ êµ¬ì¶•\n\n[<img src=\"assets/comfyui.png\" width=\"900\" alt=\"ComfyUI workflow\">](https://github.com/AIFSH/HivisionIDPhotos-ComfyUI)\n\n- [HivisionIDPhotos-wechat-weapp](https://github.com/no1xuan/HivisionIDPhotos-wechat-weapp): WeChat ì¦ëª…ì‚¬ì§„ ë¯¸ë‹ˆ í”„ë¡œê·¸ë¨, HivisionIDphotos ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜, [no1xuan](https://github.com/no1xuan)ì´ ê¸°ì—¬\n\n[<img src=\"assets/community-wechat-miniprogram.png\" width=\"900\" alt=\"HivisionIDPhotos-wechat-weapp\">](https://github.com/no1xuan/HivisionIDPhotos-wechat-weapp)\n\n- [HivisionIDPhotos-Uniapp](https://github.com/soulerror/HivisionIDPhotos-Uniapp): ê¸°ë³¸ uniapp ì¦ëª…ì‚¬ì§„ ë¯¸ë‹ˆ í”„ë¡œê·¸ë¨ ì „ë©´, HivisionIDphotos ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜, [soulerror](https://github.com/soulerror)ì´ ê¸°ì—¬\n\n[<img src=\"assets/community-uniapp-wechat-miniprogram.png\" width=\"900\" alt=\"HivisionIDPhotos-uniapp\">](https://github.com/soulerror/HivisionIDPhotos-Uniapp)\n\n- [HivisionIDPhotos-cpp](https://github.com/zjkhahah/HivisionIDPhotos-cpp): HivisionIDphotos C++ ë²„ì „, [zjkhahah](https://github.com/zjkhahah)ì´ êµ¬ì¶•\n- [HivisionIDPhotos-windows-GUI](https://github.com/zhaoyun0071/HivisionIDPhotos-windows-GUI): Windows í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜, [zhaoyun0071](https://github.com/zhaoyun0071)ì´ êµ¬ì¶•\n- [HivisionIDPhotos-NAS](https://github.com/ONG-Leo/HivisionIDPhotos-NAS): Synology NAS ë°°í¬ ì¤‘êµ­ì–´ íŠœí† ë¦¬ì–¼, [ONG-Leo](https://github.com/ONG-Leo)ê°€ ê¸°ì—¬\n\n\n<br>\n\n# ğŸ”§ ì¤€ë¹„ ì‘ì—…\n\ní™˜ê²½ ì„¤ì¹˜ ë° ì˜ì¡´ì„±:\n- Python >= 3.7 (í”„ë¡œì íŠ¸ëŠ” ì£¼ë¡œ python 3.10ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤)\n- OS: Linux, Windows, MacOS\n\n## 1. í”„ë¡œì íŠ¸ í´ë¡ í•˜ê¸°\n\n```bash\ngit clone https://github.com/Zeyi-Lin/HivisionIDPhotos.git\ncd  HivisionIDPhotos\n```\n\n## 2. ì˜ì¡´ í™˜ê²½ ì„¤ì¹˜í•˜ê¸°\n\n> condaë¡œ python3.10 ê°€ìƒ í™˜ê²½ì„ ë§Œë“œëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ê·¸ í›„, ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.\n\n```bash\npip install -r requirements.txt\npip install -r requirements-app.txt\n```\n\n## 3. ê°€ì¤‘ì¹˜ íŒŒì¼ ë‹¤ìš´ë¡œë“œí•˜ê¸°\n\n**ë°©ë²• 1: ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ë‹¤ìš´ë¡œë“œ**\n\n```bash\npython scripts/download_model.py --models all\n```\n\n**ë°©ë²• 2: ì§ì ‘ ë‹¤ìš´ë¡œë“œ**\n\ní”„ë¡œì íŠ¸ì˜ `hivision/creator/weights` ë””ë ‰í† ë¦¬ì— ì €ì¥í•©ë‹ˆë‹¤:\n- `modnet_photographic_portrait_matting.onnx` (24.7MB): [MODNet](https://github.com/ZHKKKe/MODNet) ê³µì‹ ê°€ì¤‘ì¹˜, [ë‹¤ìš´ë¡œë“œ](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/modnet_photographic_portrait_matting.onnx)\n- `hivision_modnet.onnx` (24.7MB): ë‹¨ìƒ‰ ë°°ê²½ì— ì ì‘ì„±ì´ ë†’ì€ ì»·ì•„ì›ƒ ëª¨ë¸, [ë‹¤ìš´ë¡œë“œ](https://github.com/Zeyi-Lin/HivisionIDPhotos/releases/download/pretrained-model/hivision_modnet.onnx)\n- `rmbg-1.4.onnx` (176.2MB): [BRIA AI](https://huggingface.co/briaai/RMBG-1.4)ì˜ ì˜¤í”ˆ ì†ŒìŠ¤ ì»·ì•„ì›ƒ ëª¨ë¸, [ë‹¤ìš´ë¡œë“œ](https://huggingface.co/briaai/RMBG-1.4/resolve/main/onnx/model.onnx?download=true) í›„ì— `rmbg-1.4.onnx`ë¡œ ì´ë¦„ ë³€ê²½\n- `birefnet-v1-lite.onnx`(224MB): [ZhengPeng7](https://github.com/ZhengPeng7/BiRefNet)ì˜ ì˜¤í”ˆ ì†ŒìŠ¤ ì»·ì•„ì›ƒ ëª¨ë¸, [ë‹¤ìš´ë¡œë“œ](https://github.com/ZhengPeng7/BiRefNet/releases/download/v1/BiRefNet-general-bb_swin_v1_tiny-epoch_232.onnx) í›„ì— `birefnet-v1-lite.onnx`ë¡œ ì´ë¦„ ë³€ê²½\n\n## 4. ì–¼êµ´ ê²€ì¶œ ëª¨ë¸ ì„¤ì •í•˜ê¸° (ì„ íƒ ì‚¬í•­)\n\n| í™•ì¥ ì–¼êµ´ ê²€ì¶œ ëª¨ë¸ | ì„¤ëª… | ì‚¬ìš© ë¬¸ì„œ |\n| -- | -- | -- |\n| MTCNN | **ì˜¤í”„ë¼ì¸** ì–¼êµ´ ê²€ì¶œ ëª¨ë¸, ê³ ì„±ëŠ¥ CPU ì¶”ë¡ , ê¸°ë³¸ ëª¨ë¸, ê²€ì¶œ ì •í™•ë„ê°€ ë‚®ìŒ | ì´ í”„ë¡œì íŠ¸ë¥¼ í´ë¡ í•œ í›„ ì§ì ‘ ì‚¬ìš© |\n| Face++ | Megviiì—ì„œ ì œê³µí•˜ëŠ” ì˜¨ë¼ì¸ ì–¼êµ´ ê²€ì¶œ API, ê³ ì •ë°€ ê²€ì¶œ, [ê³µì‹ ë¬¸ì„œ](https://console.faceplusplus.com.cn/documents/4888373) | [ì‚¬ìš© ë¬¸ì„œ](docs/face++_EN.md)|\n\n## 5. ì„±ëŠ¥ ì°¸ì¡°\n\n> í…ŒìŠ¤íŠ¸ í™˜ê²½ì€ Mac M1 Max 64GB, ë¹„GPU ê°€ì†, í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ í•´ìƒë„ëŠ” 512x715(1) ë° 764Ã—1146(2)ì…ë‹ˆë‹¤.\n\n| ëª¨ë¸ ì¡°í•© | ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ | ì¶”ë¡  ì‹œê°„(1) | ì¶”ë¡  ì‹œê°„(2) |\n| -- | -- | -- | -- |\n| MODNet + mtcnn | 410MB | 0.207ì´ˆ | 0.246ì´ˆ |\n| MODNet + retinaface | 405MB | 0.571ì´ˆ | 0.971ì´ˆ |\n| birefnet-v1-lite + retinaface | 6.20GB | 7.063ì´ˆ | 7.128ì´ˆ |\n\n## 6. GPU ì¶”ë¡  ê°€ì† (ì„ íƒ ì‚¬í•­)\n\ní˜„ì¬ ë²„ì „ì—ì„œ NVIDIA GPUë¡œ ê°€ì†í™”í•  ìˆ˜ ìˆëŠ” ëª¨ë¸ì€ `birefnet-v1-lite`ì…ë‹ˆë‹¤. ì•½ 16GBì˜ VRAMì´ í•„ìš”í•©ë‹ˆë‹¤.\n\nNVIDIA GPUë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶”ë¡ ì„ ê°€ì†í™”í•˜ë ¤ë©´, CUDAì™€ cuDNNì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•œ í›„, [onnxruntime-gpu ë¬¸ì„œ](https://onnxruntime.ai/docs/execution-providers/CUDA-ExecutionProvider.html#cuda-12x)ì—ì„œ í•´ë‹¹í•˜ëŠ” `onnxruntime-gpu` ë²„ì „ì„ ì°¾ì•„ ì„¤ì¹˜í•˜ê³ , [PyTorch ê³µì‹ ì›¹ì‚¬ì´íŠ¸](https://pytorch.org/get-started/locally/)ì—ì„œ í•´ë‹¹í•˜ëŠ” `pytorch` ë²„ì „ì„ ì°¾ì•„ ì„¤ì¹˜í•˜ì„¸ìš”.\n\n```bash\n# ì»´í“¨í„°ì— CUDA 12.xì™€ cuDNN 8ì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ê²½ìš°\n# ì„¤ì¹˜ ì¤‘ torchë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²ƒì€ ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤. cuDNNì„ ì„¤ì •í•  ìˆ˜ ì—†ëŠ” ê²½ìš° torchë¥¼ ì„¤ì¹˜í•´ ë³´ì„¸ìš”.\npip install onnxruntime-gpu==1.18.0\npip install torch --index-url https://download.pytorch.org/whl/cu121\n```\n\nì„¤ì¹˜ ì™„ë£Œ í›„, `birefnet-v1-lite` ëª¨ë¸ì„ í˜¸ì¶œí•˜ë©´ GPUì— ì˜í•œ ì¶”ë¡  ê°€ì†ì´ ì´ìš©ë©ë‹ˆë‹¤.\n\n> TIPS: CUDA ì„¤ì¹˜ëŠ” í•˜ìœ„ í˜¸í™˜ì„±ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, CUDA ë²„ì „ì´ 12.6ì´ê³ , torchê°€ í˜„ì¬ ì§€ì›í•˜ëŠ” ìµœëŒ€ ë²„ì „ì´ 12.4ì¸ ê²½ìš°, ì»´í“¨í„°ì— 12.4 ë²„ì „ì„ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<br>\n\n# ğŸš€ ë°ëª¨ ì‹¤í–‰\n\n```bash\npython app.py\n```\n\ní”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ë©´ ë¡œì»¬ ì›¹ í˜ì´ì§€ê°€ ìƒì„±ë˜ì–´ í˜ì´ì§€ ë‚´ì—ì„œ ì¦ëª…ì‚¬ì§„ì˜ ì¡°ì‘ ë° ìƒí˜¸ì‘ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n<img src=\"assets/harry.png\" width=900>\n\n<br>\n\n# ğŸš€ Python ì¶”ë¡ \n\ní•µì‹¬ ë§¤ê°œë³€ìˆ˜:\n\n- `-i`: ì…ë ¥ ì´ë¯¸ì§€ ê²½ë¡œ\n- `-o`: ì €ì¥ ì´ë¯¸ì§€ ê²½ë¡œ\n- `-t`: ì¶”ë¡  ìœ í˜•, idphoto, human_matting, add_background, generate_layout_photos ì¤‘ ì„ íƒ\n- `--matting_model`: ì¸ë¬¼ ë§ˆìŠ¤í¬ ëª¨ë¸ ê°€ì¤‘ì¹˜ ì„ íƒ\n- `--face_detect_model`: ì–¼êµ´ ê°ì§€ ëª¨ë¸ ì„ íƒ\n\në” ë§ì€ ë§¤ê°œë³€ìˆ˜ëŠ” `python inference.py --help`ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## 1. ì¦ëª…ì‚¬ì§„ ì œì‘\n\n1ì¥ì˜ ì‚¬ì§„ì„ ì…ë ¥í•˜ì—¬ 1ì¥ì˜ í‘œì¤€ ì¦ëª…ì‚¬ì§„ê³¼ 1ì¥ì˜ ê³ í™”ì§ˆ ì¦ëª…ì‚¬ì§„ì˜ 4ì±„ë„ íˆ¬ëª… PNGë¥¼ ì–»ìŠµë‹ˆë‹¤.\n\n```python\npython inference.py -i demo/images/test0.jpg -o ./idphoto.png --height 413 --width 295\n```\n\n## 2. ì¸ë¬¼ ë§ˆìŠ¤í¬\n\n1ì¥ì˜ ì‚¬ì§„ì„ ì…ë ¥í•˜ì—¬ 1ì¥ì˜ 4ì±„ë„ íˆ¬ëª… PNGë¥¼ ì–»ìŠµë‹ˆë‹¤.\n\n```python\npython inference.py -t human_matting -i demo/images/test0.jpg -o ./idphoto_matting.png --matting_model hivision_modnet\n```\n\n## 3. íˆ¬ëª… ì´ë¯¸ì§€ì— ë°°ê²½ìƒ‰ ì¶”ê°€\n\n1ì¥ì˜ 4ì±„ë„ íˆ¬ëª… PNGë¥¼ ì…ë ¥í•˜ì—¬ 1ì¥ì˜ ë°°ê²½ìƒ‰ì´ ì¶”ê°€ëœ 3ì±„ë„ ì´ë¯¸ì§€ë¥¼ ì–»ìŠµë‹ˆë‹¤.\n\n```python\npython inference.py -t add_background -i ./idphoto.png -o ./idphoto_ab.jpg  -c 4f83ce -k 30 -r 1\n```\n\n## 4. 6ì¸ì¹˜ ë°°ì¹˜ ì‚¬ì§„ ìƒì„±\n\n1ì¥ì˜ 3ì±„ë„ ì‚¬ì§„ì„ ì…ë ¥í•˜ì—¬ 1ì¥ì˜ 6ì¸ì¹˜ ë°°ì¹˜ ì‚¬ì§„ì„ ì–»ìŠµë‹ˆë‹¤.\n\n```python\npython inference.py -t generate_layout_photos -i ./idphoto_ab.jpg -o ./idphoto_layout.jpg  --height 413 --width 295 -k 200\n```\n\n## 5. ì¦ëª…ì‚¬ì§„ ìë¥´ê¸°\n\n1ì¥ì˜ 4ì±„ë„ ì‚¬ì§„(ë§ˆìŠ¤í¬ ì²˜ë¦¬ëœ ì´ë¯¸ì§€)ì„ ì…ë ¥í•˜ì—¬ 1ì¥ì˜ í‘œì¤€ ì¦ëª…ì‚¬ì§„ê³¼ 1ì¥ì˜ ê³ í™”ì§ˆ ì¦ëª…ì‚¬ì§„ì˜ 4ì±„ë„ íˆ¬ëª… PNGë¥¼ ì–»ìŠµë‹ˆë‹¤.\n\n```python\npython inference.py -t idphoto_crop -i ./idphoto_matting.png -o ./idphoto_crop.png --height 413 --width 295\n```\n\n<br>\n\n# âš¡ï¸ API ì„œë¹„ìŠ¤ ë°°í¬\n\n## ë°±ì—”ë“œ ì‹œì‘\n\n```\npython deploy_api.py\n```\n\n## API ì„œë¹„ìŠ¤ì— ìš”ì²­\n\nìì„¸í•œ ìš”ì²­ ë°©ë²•ì€ [API ë¬¸ì„œ](docs/api_EN.md)ë¥¼ ì°¸ì¡°í•´ ì£¼ì„¸ìš”. ì•„ë˜ì˜ ìš”ì²­ ì˜ˆì‹œê°€ í¬í•¨ë©ë‹ˆë‹¤:\n- [cURL](docs/api_EN.md#curl-request-examples)\n- [Python](docs/api_EN.md#python-request-example)\n- [Java](docs/api_EN.md#java-request-example)\n- [Javascript](docs/api_EN.md#javascript-request-examples)\n\n<br>\n\n# ğŸ³ Docker ë°°í¬\n\n## 1. ì´ë¯¸ì§€ í’€ ë˜ëŠ” ë¹Œë“œí•˜ê¸°\n\n> ì•„ë˜ì˜ ë°©ë²• ì¤‘ 3ê°€ì§€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.\n\n**ë°©ë²• 1: ìµœì‹  ì´ë¯¸ì§€ í’€í•˜ê¸°:**\n\n```bash\ndocker pull linzeyi/hivision_idphotos\n```\n\n**ë°©ë²• 2: Dockerfileì—ì„œ ì§ì ‘ ì´ë¯¸ì§€ ë¹Œë“œí•˜ê¸°:**\n\n`hivision/creator/weights` ë””ë ‰í† ë¦¬ì— ìµœì†Œí•œ í•˜ë‚˜ì˜ [ë§ˆìŠ¤í‚¹ ëª¨ë¸ ê°€ì¤‘ì¹˜ íŒŒì¼](#3-ê°€ì¤‘ì¹˜-íŒŒì¼-ë‹¤ìš´ë¡œë“œ)ì´ ìˆëŠ”ì§€ í™•ì¸í•œ í›„, í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:\n\n```bash\ndocker build -t linzeyi/hivision_idphotos .\n```\n\n**ë°©ë²• 3: Docker composeë¡œ ë¹Œë“œí•˜ê¸°:**\n\n`hivision/creator/weights` ë””ë ‰í† ë¦¬ì— ìµœì†Œí•œ í•˜ë‚˜ì˜ [ë§ˆìŠ¤í‚¹ ëª¨ë¸ ê°€ì¤‘ì¹˜ íŒŒì¼](#3-ê°€ì¤‘ì¹˜-íŒŒì¼-ë‹¤ìš´ë¡œë“œ)ì´ ìˆëŠ”ì§€ í™•ì¸í•œ í›„, í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:\n\n```bash\ndocker compose build\n```\n\n## 2. ì„œë¹„ìŠ¤ ì‹¤í–‰\n\n**Gradio ë°ëª¨ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤**\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ë¡œì»¬ì—ì„œ [http://127.0.0.1:7860](http://127.0.0.1:7860/)ì— ì ‘ê·¼í•˜ë©´ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n```bash\ndocker run -d -p 7860:7860 linzeyi/hivision_idphotos\n```\n\n**API ë°±ì—”ë“œ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤**\n\n```bash\ndocker run -d -p 8080:8080 linzeyi/hivision_idphotos python3 deploy_api.py\n```\n\n**ë‘ ê°œì˜ ì„œë¹„ìŠ¤ë¥¼ ë™ì‹œì— ì‹œì‘í•©ë‹ˆë‹¤**\n\n```bash\ndocker compose up -d\n```\n\n## í™˜ê²½ ë³€ìˆ˜\n\në³¸ í”„ë¡œì íŠ¸ëŠ” ëª‡ ê°€ì§€ ì¶”ê°€ ì„¤ì • í•­ëª©ì„ ì œê³µí•˜ë©°, í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì •í•©ë‹ˆë‹¤:\n\n| í™˜ê²½ ë³€ìˆ˜ | ìœ í˜•\t| ì„¤ëª… | ì˜ˆ |\n|--|--|--|--|\n| FACE_PLUS_API_KEY\t | ì„ íƒ ì‚¬í•­\t| ì´ëŠ” Face++ ì½˜ì†”ì—ì„œ ì‹ ì²­í•œ API í‚¤ì…ë‹ˆë‹¤.\t | `7-fZStDJÂ·Â·Â·Â·` |\n| FACE_PLUS_API_SECRET\t | ì„ íƒ ì‚¬í•­\t| Face++ API í‚¤ì— ëŒ€ì‘í•˜ëŠ” Secret | `VTee824EÂ·Â·Â·Â·` |\n\ndockerì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© ì˜ˆ:\n```bash\ndocker run  -d -p 7860:7860 \\\n    -e FACE_PLUS_API_KEY=7-fZStDJÂ·Â·Â·Â· \\\n    -e FACE_PLUS_API_SECRET=VTee824EÂ·Â·Â·Â· \\\n    linzeyi/hivision_idphotos \n```\n\n<br>\n\n# ğŸ“– í”„ë¡œì íŠ¸ ì¸ìš©\n\n1. MTCNN:\n\n```bibtex\n@software{ipazc_mtcnn_2021,\n    author = {ipazc},\n    title = {{MTCNN}},\n    url = {https://github.com/ipazc/mtcnn},\n    year = {2021},\n    publisher = {GitHub}\n}\n```\n\n2. ModNet:\n\n```bibtex\n@software{zhkkke_modnet_2021,\n    author = {ZHKKKe},\n    title = {{ModNet}},\n    url = {https://github.com/ZHKKKe/MODNet},\n    year = {2021},\n    publisher = {GitHub}\n}\n```\n\n<br>\n\n# ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)\n\n## 1. ê¸°ë³¸ í¬ê¸°ì™€ ìƒ‰ìƒì„ ì–´ë–»ê²Œ ìˆ˜ì •í•˜ë‚˜ìš”?\n\n- í¬ê¸°: [size_list_EN.csv](demo/assets/size_list_EN.csv) íŒŒì¼ì„ ìˆ˜ì •í•œ í›„ `app.py`ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤. ì²« ë²ˆì§¸ ì—´ì€ í¬ê¸° ì´ë¦„, ë‘ ë²ˆì§¸ ì—´ì€ ë†’ì´, ì„¸ ë²ˆì§¸ ì—´ì€ ë„ˆë¹„ì…ë‹ˆë‹¤.\n- ìƒ‰ìƒ: [color_list_EN.csv](demo/assets/color_list_EN.csv) íŒŒì¼ì„ ìˆ˜ì •í•œ í›„ `app.py`ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤. ì²« ë²ˆì§¸ ì—´ì€ ìƒ‰ìƒ ì´ë¦„, ë‘ ë²ˆì§¸ ì—´ì€ Hex ê°’ì…ë‹ˆë‹¤.\n\n## 2. ì›Œí„°ë§ˆí¬ ê¸€ê¼´ì„ ì–´ë–»ê²Œ ìˆ˜ì •í•˜ë‚˜ìš”?\n\n1. ê¸€ê¼´ íŒŒì¼ì„ `hivision/plugin/font` í´ë”ì— ë„£ìŠµë‹ˆë‹¤.\n2. `hivision/plugin/watermark.py` íŒŒì¼ì—ì„œ `font_file` ë§¤ê°œë³€ìˆ˜ ê°’ì„ ê¸€ê¼´ íŒŒì¼ ì´ë¦„ìœ¼ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.\n\n## 3. ì†Œì…œ ë¯¸ë””ì–´ í…œí”Œë¦¿ ì‚¬ì§„ì„ ì–´ë–»ê²Œ ì¶”ê°€í•˜ë‚˜ìš”?\n\n1. í…œí”Œë¦¿ ì´ë¯¸ì§€ë¥¼ `hivision/plugin/template/assets` í´ë”ì— ë„£ìŠµë‹ˆë‹¤. í…œí”Œë¦¿ ì´ë¯¸ì§€ëŠ” 4ì±„ë„ íˆ¬ëª… PNGì…ë‹ˆë‹¤.\n2. `hivision/plugin/template/assets/template_config.json` íŒŒì¼ì— ìµœì‹  í…œí”Œë¦¿ ì •ë³´ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ `width`ëŠ” í…œí”Œë¦¿ ì´ë¯¸ì§€ì˜ ë„ˆë¹„(px), `height`ëŠ” í…œí”Œë¦¿ ì´ë¯¸ì§€ì˜ ë†’ì´(px), `anchor_points`ëŠ” í…œí”Œë¦¿ì˜ íˆ¬ëª… ì˜ì—­ ë„¤ ëª¨ì„œë¦¬ì˜ ì¢Œí‘œ(px)ì…ë‹ˆë‹¤. `rotation`ì€ íˆ¬ëª… ì˜ì—­ì˜ ìˆ˜ì§ ë°©í–¥ì— ëŒ€í•œ íšŒì „ ê°ë„ë¡œ, >0ì€ ë°˜ì‹œê³„ ë°©í–¥, <0ì€ ì‹œê³„ ë°©í–¥ì…ë‹ˆë‹¤.\n3. `demo/processor.py`ì˜ `_generate_image_template` í•¨ìˆ˜ ë‚´ì˜ `TEMPLATE_NAME_LIST` ë³€ìˆ˜ì— ìµœì‹  í…œí”Œë¦¿ ì´ë¦„ì„ ì¶”ê°€í•©ë‹ˆë‹¤.\n\n<img src=\"assets/social_template.png\" width=\"500\">\n\n## 4. Gradio Demoì˜ ìƒë‹¨ ë‚´ë¹„ê²Œì´ì…˜ ë°”ë¥¼ ì–´ë–»ê²Œ ìˆ˜ì •í•˜ë‚˜ìš”?\n\n- `demo/assets/title.md` íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.\n\n<br>\n\n# ğŸ“§ ë¬¸ì˜í•˜ê¸°\n\nê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ zeyi.lin@swanhub.coë¡œ ì´ë©”ì¼ì„ ë³´ë‚´ ì£¼ì„¸ìš”.\n\n<br>\n\n# ê¸°ì—¬ì\n\n<a href=\"https://github.com/Zeyi-Lin/HivisionIDPhotos/graphs/contributors\">\n  <img src=\"https://contrib.rocks/image?repo=Zeyi-Lin/HivisionIDPhotos\" />\n</a>\n\n[Zeyi-Lin](https://github.com/Zeyi-Lin)ã€[SAKURA-CAT](https://github.com/SAKURA-CAT)ã€[Feudalman](https://github.com/Feudalman)ã€[swpfY](https://github.com/swpfY)ã€[Kaikaikaifang](https://github.com/Kaikaikaifang)ã€[ShaohonChen](https://github.com/ShaohonChen)ã€[KashiwaByte](https://github.com/KashiwaByte)\n\n<br>\n\n# Thanks for support\n\n[![Stargazers repo roster for @Zeyi-Lin/HivisionIDPhotos](https://reporoster.com/stars/Zeyi-Lin/HivisionIDPhotos)](https://github.com/Zeyi-Lin/HivisionIDPhotos/stargazers)\n\n[![Forkers repo roster for @Zeyi-Lin/HivisionIDPhotos](https://reporoster.com/forks/Zeyi-Lin/HivisionIDPhotos)](https://github.com/Zeyi-Lin/HivisionIDPhotos/network/members)\n\n[![Star History Chart](https://api.star-history.com/svg?repos=Zeyi-Lin/HivisionIDPhotos&type=Date)](https://star-history.com/#Zeyi-Lin/HivisionIDPhotos&Date)\n\n<br>\n\n# Lincese\n\nThis repository is licensed under the [Apache-2.0 License](LICENSE).\n\n[github-stars-shield]: https://img.shields.io/github/stars/zeyi-lin/hivisionidphotos?color=ffcb47&labelColor=black&style=flat-square\n[github-stars-link]: https://github.com/zeyi-lin/hivisionidphotos/stargazers\n\n[swanhub-demo-shield]: https://swanhub.co/git/repo/SwanHub%2FAuto-README/file/preview?ref=main&path=swanhub.svg\n[swanhub-demo-link]: https://swanhub.co/ZeYiLin/HivisionIDPhotos/demo\n\n[spaces-shield]: https://img.shields.io/badge/ğŸ¤—-Open%20in%20Spaces-blue\n[spaces-link]: https://huggingface.co/spaces/TheEeeeLin/HivisionIDPhotos\n\n<!-- å¾®ä¿¡ç¾¤é“¾æ¥ -->\n[wechat-shield]: https://img.shields.io/badge/WeChat-å¾®ä¿¡-4cb55e\n[wechat-link]: https://docs.qq.com/doc/DUkpBdk90eWZFS2JW\n\n<!-- Github Release -->\n[release-shield]: https://img.shields.io/github/v/release/zeyi-lin/hivisionidphotos?color=369eff&labelColor=black&logo=github&style=flat-square\n[release-link]: https://github.com/zeyi-lin/hivisionidphotos/releases\n\n[license-shield]: https://img.shields.io/badge/license-apache%202.0-white?labelColor=black&style=flat-square\n[license-link]: https://github.com/Zeyi-Lin/HivisionIDPhotos/blob/master/LICENSE\n\n[github-issues-shield]: https://img.shields.io/github/issues/zeyi-lin/hivisionidphotos?color=ff80eb&labelColor=black&style=flat-square\n[github-issues-link]: https://github.com/zeyi-lin/hivisionidphotos/issues\n\n[dockerhub-shield]: https://img.shields.io/docker/v/linzeyi/hivision_idphotos?color=369eff&label=docker&labelColor=black&logoColor=white&style=flat-square\n[dockerhub-link]: https://hub.docker.com/r/linzeyi/hivision_idphotos/tags\n\n[trendshift-shield]: https://trendshift.io/api/badge/repositories/11622\n[trendshift-link]: https://trendshift.io/repositories/11622\n\n[hellogithub-shield]: https://abroad.hellogithub.com/v1/widgets/recommend.svg?rid=8ea1457289fb4062ba661e5299e733d6&claim_uid=Oh5UaGjfrblg0yZ\n[hellogithub-link]: https://hellogithub.com/repository/8ea1457289fb4062ba661e5299e733d6\n\n[github-contributors-shield]: https://img.shields.io/github/contributors/zeyi-lin/hivisionidphotos?color=c4f042&labelColor=black&style=flat-square\n[github-contributors-link]: https://github.com/zeyi-lin/hivisionidphotos/graphs/contributors\n\n[github-forks-shield]: https://img.shields.io/github/forks/zeyi-lin/hivisionidphotos?color=8ae8ff&labelColor=black&style=flat-square\n[github-forks-link]: https://github.com/zeyi-lin/hivisionidphotos/network/members\n\n[modelscope-shield]: https://img.shields.io/badge/Demo_on_ModelScope-purple?logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIzIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCiA8Zz4KICA8dGl0bGU+TGF5ZXIgMTwvdGl0bGU+CiAgPHBhdGggaWQ9InN2Z18xNCIgZmlsbD0iIzYyNGFmZiIgZD0ibTAsODkuODRsMjUuNjUsMGwwLDI1LjY0OTk5bC0yNS42NSwwbDAsLTI1LjY0OTk5eiIvPgogIDxwYXRoIGlkPSJzdmdfMTUiIGZpbGw9IiM2MjRhZmYiIGQ9Im05OS4xNCwxMTUuNDlsMjUuNjUsMGwwLDI1LjY1bC0yNS42NSwwbDAsLTI1LjY1eiIvPgogIDxwYXRoIGlkPSJzdmdfMTYiIGZpbGw9IiM2MjRhZmYiIGQ9Im0xNzYuMDksMTQxLjE0bC0yNS42NDk5OSwwbDAsMjIuMTlsNDcuODQsMGwwLC00Ny44NGwtMjIuMTksMGwwLDI1LjY1eiIvPgogIDxwYXRoIGlkPSJzdmdfMTciIGZpbGw9IiMzNmNmZDEiIGQ9Im0xMjQuNzksODkuODRsMjUuNjUsMGwwLDI1LjY0OTk5bC0yNS42NSwwbDAsLTI1LjY0OTk5eiIvPgogIDxwYXRoIGlkPSJzdmdfMTgiIGZpbGw9IiMzNmNmZDEiIGQ9Im0wLDY0LjE5bDI1LjY1LDBsMCwyNS42NWwtMjUuNjUsMGwwLC0yNS42NXoiLz4KICA8cGF0aCBpZD0ic3ZnXzE5IiBmaWxsPSIjNjI0YWZmIiBkPSJtMTk4LjI4LDg5Ljg0bDI1LjY0OTk5LDBsMCwyNS42NDk5OWwtMjUuNjQ5OTksMGwwLC0yNS42NDk5OXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIwIiBmaWxsPSIjMzZjZmQxIiBkPSJtMTk4LjI4LDY0LjE5bDI1LjY0OTk5LDBsMCwyNS42NWwtMjUuNjQ5OTksMGwwLC0yNS42NXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIxIiBmaWxsPSIjNjI0YWZmIiBkPSJtMTUwLjQ0LDQybDAsMjIuMTlsMjUuNjQ5OTksMGwwLDI1LjY1bDIyLjE5LDBsMCwtNDcuODRsLTQ3Ljg0LDB6Ii8+CiAgPHBhdGggaWQ9InN2Z18yMiIgZmlsbD0iIzM2Y2ZkMSIgZD0ibTczLjQ5LDg5Ljg0bDI1LjY1LDBsMCwyNS42NDk5OWwtMjUuNjUsMGwwLC0yNS42NDk5OXoiLz4KICA8cGF0aCBpZD0ic3ZnXzIzIiBmaWxsPSIjNjI0YWZmIiBkPSJtNDcuODQsNjQuMTlsMjUuNjUsMGwwLC0yMi4xOWwtNDcuODQsMGwwLDQ3Ljg0bDIyLjE5LDBsMCwtMjUuNjV6Ii8+CiAgPHBhdGggaWQ9InN2Z18yNCIgZmlsbD0iIzYyNGFmZiIgZD0ibTQ3Ljg0LDExNS40OWwtMjIuMTksMGwwLDQ3Ljg0bDQ3Ljg0LDBsMCwtMjIuMTlsLTI1LjY1LDBsMCwtMjUuNjV6Ii8+CiA8L2c+Cjwvc3ZnPg==&labelColor=white\n[modelscope-link]: https://modelscope.cn/studios/SwanLab/HivisionIDPhotos\n\n[modelers-shield]: https://img.shields.io/badge/Demo_on_Modelers-c42a2a?logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAxMjQgNjQiIGZpbGw9Im5vbmUiPgo8cGF0aCBkPSJNNDIuNzc4MyAwSDI2LjU5NzdWMTUuNzc4N0g0Mi43NzgzVjBaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0xNi41MDg4IDQuMTc5MkgwLjMyODEyNVYxOS45NTc5SDE2LjUwODhWNC4xNzkyWiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTIzLjk1MiA0LjE3OTJIMTA3Ljc3MVYxOS45NTc5SDEyMy45NTJWNC4xNzkyWiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTYuNTA4OCA0NS40NjE5SDAuMzI4MTI1VjYxLjI0MDZIMTYuNTA4OFY0NS40NjE5WiIgZmlsbD0iIzI0NDk5QyIvPgo8cGF0aCBkPSJNMTIzLjk1MiA0NS40NjE5SDEwNy43NzFWNjEuMjQwNkgxMjMuOTUyVjQ1LjQ2MTlaIiBmaWxsPSIjMjQ0OTlDIi8+CjxwYXRoIGQ9Ik0zMi43MDggMTUuNzc4OEgxNi41MjczVjMxLjU1NzVIMzIuNzA4VjE1Ljc3ODhaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik01Mi44NDg2IDE1Ljc3ODhIMzYuNjY4VjMxLjU1NzVINTIuODQ4NlYxNS43Nzg4WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNOTcuNzIzNyAwSDgxLjU0M1YxNS43Nzg3SDk3LjcyMzdWMFoiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTg3LjY1MzQgMTUuNzc4OEg3MS40NzI3VjMxLjU1NzVIODcuNjUzNFYxNS43Nzg4WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNMTA3Ljc5NCAxNS43Nzg4SDkxLjYxMzNWMzEuNTU3NUgxMDcuNzk0VjE1Ljc3ODhaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0yNC42NzQ4IDMxLjU1NzZIOC40OTQxNFY0Ny4zMzYzSDI0LjY3NDhWMzEuNTU3NloiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTYwLjg3OTkgMzEuNTU3Nkg0NC42OTkyVjQ3LjMzNjNINjAuODc5OVYzMS41NTc2WiIgZmlsbD0iI0RFMDQyOSIvPgo8cGF0aCBkPSJNNzkuNjIwMSAzMS41NTc2SDYzLjQzOTVWNDcuMzM2M0g3OS42MjAxVjMxLjU1NzZaIiBmaWxsPSIjREUwNDI5Ii8+CjxwYXRoIGQ9Ik0xMTUuODI1IDMxLjU1NzZIOTkuNjQ0NVY0Ny4zMzYzSDExNS44MjVWMzEuNTU3NloiIGZpbGw9IiNERTA0MjkiLz4KPHBhdGggZD0iTTcwLjI1NDkgNDcuMzM1OUg1NC4wNzQyVjYzLjExNDdINzAuMjU0OVY0Ny4zMzU5WiIgZmlsbD0iI0RFMDQyOSIvPgo8L3N2Zz4=&labelColor=white\n[modelers-link]: https://modelers.cn/spaces/SwanLab/HivisionIDPhotos"
        },
        {
          "name": "app.py",
          "type": "blob",
          "size": 2.5126953125,
          "content": "import argparse\nimport os\nfrom demo.processor import IDPhotoProcessor\nfrom demo.ui import create_ui\nfrom hivision.creator.choose_handler import HUMAN_MATTING_MODELS\n\nroot_dir = os.path.dirname(os.path.abspath(__file__))\n\n# è·å–å­˜åœ¨çš„äººåƒåˆ†å‰²æ¨¡å‹åˆ—è¡¨\n# é€šè¿‡æ£€æŸ¥ hivision/creator/weights ç›®å½•ä¸‹çš„ .onnx å’Œ .mnn æ–‡ä»¶\n# åªä¿ç•™æ–‡ä»¶åï¼ˆä¸åŒ…æ‹¬æ‰©å±•åï¼‰\nHUMAN_MATTING_MODELS_EXIST = [\n    os.path.splitext(file)[0]\n    for file in os.listdir(os.path.join(root_dir, \"hivision/creator/weights\"))\n    if file.endswith(\".onnx\") or file.endswith(\".mnn\")\n]\n# åœ¨HUMAN_MATTING_MODELSä¸­çš„æ¨¡å‹æ‰ä¼šè¢«åŠ è½½åˆ°Gradioä¸­æ˜¾ç¤º\nHUMAN_MATTING_MODELS_CHOICE = [\n    model for model in HUMAN_MATTING_MODELS if model in HUMAN_MATTING_MODELS_EXIST\n]\n\nif len(HUMAN_MATTING_MODELS_CHOICE) == 0:\n    raise ValueError(\n        \"æœªæ‰¾åˆ°ä»»ä½•å­˜åœ¨çš„äººåƒåˆ†å‰²æ¨¡å‹ï¼Œè¯·æ£€æŸ¥ hivision/creator/weights ç›®å½•ä¸‹çš„æ–‡ä»¶\"\n        + \"\\n\"\n        + \"No existing portrait segmentation model was found, please check the files in the hivision/creator/weights directory.\"\n    )\n\nFACE_DETECT_MODELS = [\"face++ (è”ç½‘Online API)\", \"mtcnn\"]\nFACE_DETECT_MODELS_EXPAND = (\n    [\"retinaface-resnet50\"]\n    if os.path.exists(\n        os.path.join(\n            root_dir, \"hivision/creator/retinaface/weights/retinaface-resnet50.onnx\"\n        )\n    )\n    else []\n)\nFACE_DETECT_MODELS_CHOICE = FACE_DETECT_MODELS + FACE_DETECT_MODELS_EXPAND\n\nLANGUAGE = [\"zh\", \"en\", \"ko\", \"ja\"]\n\nif __name__ == \"__main__\":\n    argparser = argparse.ArgumentParser()\n    argparser.add_argument(\n        \"--port\", type=int, default=7860, help=\"The port number of the server\"\n    )\n    argparser.add_argument(\n        \"--host\", type=str, default=\"127.0.0.1\", help=\"The host of the server\"\n    )\n    argparser.add_argument(\n        \"--root_path\",\n        type=str,\n        default=None,\n        help=\"The root path of the server, default is None (='/'), e.g. '/myapp'\",\n    )\n    args = argparser.parse_args()\n\n    processor = IDPhotoProcessor()\n\n    demo = create_ui(\n        processor,\n        root_dir,\n        HUMAN_MATTING_MODELS_CHOICE,\n        FACE_DETECT_MODELS_CHOICE,\n        LANGUAGE,\n    )\n    \n    # å¦‚æœRUN_MODEæ˜¯Beastï¼Œæ‰“å°å·²å¼€å¯é‡å…½æ¨¡å¼\n    if os.getenv(\"RUN_MODE\") == \"beast\":\n        print(\"[Beast mode activated.] å·²å¼€å¯é‡å…½æ¨¡å¼ã€‚\")\n\n    demo.launch(\n        server_name=args.host,\n        server_port=args.port,\n        favicon_path=os.path.join(root_dir, \"assets/hivision_logo.png\"),\n        root_path=args.root_path,\n        show_api=False,\n    )\n"
        },
        {
          "name": "app.spec",
          "type": "blob",
          "size": 0.923828125,
          "content": "# -*- mode: python ; coding: utf-8 -*-\nfrom PyInstaller.utils.hooks import collect_data_files\n\ndatas = [('hivisionai', 'hivisionai'), ('hivision_modnet.onnx', '.'), ('size_list_CN.csv', '.')]\ndatas += collect_data_files('gradio_client')\ndatas += collect_data_files('gradio')\n\n\na = Analysis(\n    ['app/web.py'],\n    pathex=[],\n    binaries=[],\n    datas=datas,\n    hiddenimports=[],\n    hookspath=[],\n    hooksconfig={},\n    runtime_hooks=[],\n    excludes=[],\n    noarchive=False,\n    optimize=0,\n)\npyz = PYZ(a.pure)\n\nexe = EXE(\n    pyz,\n    a.scripts,\n    a.binaries,\n    a.datas,\n    [],\n    name='HivisionIDPhotos',\n    debug=False,\n    bootloader_ignore_signals=False,\n    strip=False,\n    upx=True,\n    upx_exclude=[],\n    runtime_tmpdir=None,\n    console=True,\n    disable_windowed_traceback=False,\n    argv_emulation=False,\n    target_arch=None,\n    codesign_identity=None,\n    entitlements_file=None,\n    icon=['assets\\hivisionai.ico'],\n)\n"
        },
        {
          "name": "assets",
          "type": "tree",
          "content": null
        },
        {
          "name": "demo",
          "type": "tree",
          "content": null
        },
        {
          "name": "deploy_api.py",
          "type": "blob",
          "size": 11.3994140625,
          "content": "from fastapi import FastAPI, UploadFile, Form, File\nfrom hivision import IDCreator\nfrom hivision.error import FaceError\nfrom hivision.creator.layout_calculator import (\n    generate_layout_array,\n    generate_layout_image,\n)\nfrom hivision.creator.choose_handler import choose_handler\nfrom hivision.utils import (\n    add_background,\n    resize_image_to_kb,\n    bytes_2_base64,\n    base64_2_numpy,\n    hex_to_rgb,\n    add_watermark,\n    save_image_dpi_to_bytes,\n)\nimport numpy as np\nimport cv2\nfrom starlette.middleware.cors import CORSMiddleware\n\napp = FastAPI()\ncreator = IDCreator()\n\n# æ·»åŠ  CORS ä¸­é—´ä»¶ è§£å†³è·¨åŸŸé—®é¢˜\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],  # å…è®¸çš„è¯·æ±‚æ¥æº\n    allow_credentials=True,  # å…è®¸æºå¸¦ Cookie\n    allow_methods=[\n        \"*\"\n    ],  # å…è®¸çš„è¯·æ±‚æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šGET, POST ç­‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®š [\"GET\", \"POST\"]\n    allow_headers=[\"*\"],  # å…è®¸çš„è¯·æ±‚å¤´ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“çš„å¤´éƒ¨\n)\n\n\n# è¯ä»¶ç…§æ™ºèƒ½åˆ¶ä½œæ¥å£\n@app.post(\"/idphoto\")\nasync def idphoto_inference(\n    input_image: UploadFile = File(None),\n    input_image_base64: str = Form(None),\n    height: int = Form(413),\n    width: int = Form(295),\n    human_matting_model: str = Form(\"modnet_photographic_portrait_matting\"),\n    face_detect_model: str = Form(\"mtcnn\"),\n    hd: bool = Form(True),\n    dpi: int = Form(300),\n    face_align: bool = Form(False),\n    head_measure_ratio: float = Form(0.2),\n    head_height_ratio: float = Form(0.45),\n    top_distance_max: float = Form(0.12),\n    top_distance_min: float = Form(0.10),\n    brightness_strength: float = Form(0),\n    contrast_strength: float = Form(0),\n    sharpen_strength: float = Form(0),\n    saturation_strength: float = Form(0),\n):  \n    # å¦‚æœä¼ å…¥äº†base64ï¼Œåˆ™ç›´æ¥ä½¿ç”¨base64è§£ç \n    if input_image_base64:\n        img = base64_2_numpy(input_image_base64)\n    # å¦åˆ™ä½¿ç”¨ä¸Šä¼ çš„å›¾ç‰‡\n    else:\n        image_bytes = await input_image.read()\n        nparr = np.frombuffer(image_bytes, np.uint8)\n        img = cv2.imdecode(nparr, cv2.IMREAD_COLOR)\n\n    # ------------------- é€‰æ‹©æŠ å›¾ä¸äººè„¸æ£€æµ‹æ¨¡å‹ -------------------\n    choose_handler(creator, human_matting_model, face_detect_model)\n\n    # å°†å­—ç¬¦ä¸²è½¬ä¸ºå…ƒç»„\n    size = (int(height), int(width))\n    try:\n        result = creator(\n            img,\n            size=size,\n            head_measure_ratio=head_measure_ratio,\n            head_height_ratio=head_height_ratio,\n            head_top_range=(top_distance_max, top_distance_min),\n            face_alignment=face_align,\n            brightness_strength=brightness_strength,\n            contrast_strength=contrast_strength,\n            sharpen_strength=sharpen_strength,\n            saturation_strength=saturation_strength,\n        )\n    except FaceError:\n        result_message = {\"status\": False}\n    # å¦‚æœæ£€æµ‹åˆ°äººè„¸æ•°é‡ç­‰äº1, åˆ™è¿”å›æ ‡å‡†è¯å’Œé«˜æ¸…ç…§ç»“æœï¼ˆpng 4é€šé“å›¾åƒï¼‰\n    else:\n        result_image_standard_bytes = save_image_dpi_to_bytes(cv2.cvtColor(result.standard, cv2.COLOR_RGBA2BGRA), None, dpi)\n        \n        result_message = {\n            \"status\": True,\n            \"image_base64_standard\": bytes_2_base64(result_image_standard_bytes),\n        }\n\n        # å¦‚æœhdä¸ºTrue, åˆ™å¢åŠ é«˜æ¸…ç…§ç»“æœï¼ˆpng 4é€šé“å›¾åƒï¼‰\n        if hd:\n            result_image_hd_bytes = save_image_dpi_to_bytes(cv2.cvtColor(result.hd, cv2.COLOR_RGBA2BGRA), None, dpi)\n            result_message[\"image_base64_hd\"] = bytes_2_base64(result_image_hd_bytes)\n\n    return result_message\n\n\n# äººåƒæŠ å›¾æ¥å£\n@app.post(\"/human_matting\")\nasync def human_matting_inference(\n    input_image: UploadFile = File(None),\n    input_image_base64: str = Form(None),\n    human_matting_model: str = Form(\"hivision_modnet\"),\n    dpi: int = Form(300),\n):\n    if input_image_base64:\n        img = base64_2_numpy(input_image_base64)\n    else:\n        image_bytes = await input_image.read()\n        nparr = np.frombuffer(image_bytes, np.uint8)\n        img = cv2.imdecode(nparr, cv2.IMREAD_COLOR)\n\n    # ------------------- é€‰æ‹©æŠ å›¾ä¸äººè„¸æ£€æµ‹æ¨¡å‹ -------------------\n    choose_handler(creator, human_matting_model, None)\n\n    try:\n        result = creator(\n            img,\n            change_bg_only=True,\n        )\n    except FaceError:\n        result_message = {\"status\": False}\n\n    else:\n        result_image_standard_bytes = save_image_dpi_to_bytes(cv2.cvtColor(result.standard, cv2.COLOR_RGBA2BGRA), None, dpi)\n        result_message = {\n            \"status\": True,\n            \"image_base64\": bytes_2_base64(result_image_standard_bytes),\n        }\n    return result_message\n\n\n# é€æ˜å›¾åƒæ·»åŠ çº¯è‰²èƒŒæ™¯æ¥å£\n@app.post(\"/add_background\")\nasync def photo_add_background(\n    input_image: UploadFile = File(None),\n    input_image_base64: str = Form(None),\n    color: str = Form(\"000000\"),\n    kb: int = Form(None),\n    dpi: int = Form(300),\n    render: int = Form(0),\n):\n    render_choice = [\"pure_color\", \"updown_gradient\", \"center_gradient\"]\n\n    if input_image_base64:\n        img = base64_2_numpy(input_image_base64)\n    else:\n        image_bytes = await input_image.read()\n        nparr = np.frombuffer(image_bytes, np.uint8)\n        img = cv2.imdecode(nparr, cv2.IMREAD_UNCHANGED)\n\n    color = hex_to_rgb(color)\n    color = (color[2], color[1], color[0])\n\n    result_image = add_background(\n        img,\n        bgr=color,\n        mode=render_choice[render],\n    ).astype(np.uint8)\n\n    result_image = cv2.cvtColor(result_image, cv2.COLOR_RGB2BGR)\n    if kb:\n        result_image_bytes = resize_image_to_kb(result_image, None, int(kb), dpi=dpi)\n    else:\n        result_image_bytes = save_image_dpi_to_bytes(result_image, None, dpi=dpi)\n\n    result_messgae = {\n        \"status\": True,\n        \"image_base64\": bytes_2_base64(result_image_bytes),\n    }\n\n    return result_messgae\n\n\n# å…­å¯¸æ’ç‰ˆç…§ç”Ÿæˆæ¥å£\n@app.post(\"/generate_layout_photos\")\nasync def generate_layout_photos(\n    input_image: UploadFile = File(None),\n    input_image_base64: str = Form(None),\n    height: int = Form(413),\n    width: int = Form(295),\n    kb: int = Form(None),\n    dpi: int = Form(300),\n):\n    # try:\n    if input_image_base64:\n        img = base64_2_numpy(input_image_base64)\n    else:\n        image_bytes = await input_image.read()\n        nparr = np.frombuffer(image_bytes, np.uint8)\n        img = cv2.imdecode(nparr, cv2.IMREAD_COLOR)\n\n    size = (int(height), int(width))\n\n    typography_arr, typography_rotate = generate_layout_array(\n        input_height=size[0], input_width=size[1]\n    )\n\n    result_layout_image = generate_layout_image(\n        img, typography_arr, typography_rotate, height=size[0], width=size[1]\n    ).astype(np.uint8)\n\n    result_layout_image = cv2.cvtColor(result_layout_image, cv2.COLOR_RGB2BGR)\n    if kb:\n        result_layout_image_bytes = resize_image_to_kb(\n            result_layout_image, None, int(kb), dpi=dpi\n        )\n    else:\n        result_layout_image_bytes = save_image_dpi_to_bytes(result_layout_image, None, dpi=dpi)\n        \n    result_layout_image_base64 = bytes_2_base64(result_layout_image_bytes)\n\n    result_messgae = {\n        \"status\": True,\n        \"image_base64\": result_layout_image_base64,\n    }\n\n    return result_messgae\n\n\n# é€æ˜å›¾åƒæ·»åŠ æ°´å°æ¥å£\n@app.post(\"/watermark\")\nasync def watermark(\n    input_image: UploadFile = File(None),\n    input_image_base64: str = Form(None),\n    text: str = Form(\"Hello\"),\n    size: int = 20,\n    opacity: float = 0.5,\n    angle: int = 30,\n    color: str = \"#000000\",\n    space: int = 25,\n    kb: int = Form(None),\n    dpi: int = Form(300),\n):\n    if input_image_base64:\n        img = base64_2_numpy(input_image_base64)\n    else:\n        image_bytes = await input_image.read()\n        nparr = np.frombuffer(image_bytes, np.uint8)\n        img = cv2.imdecode(nparr, cv2.IMREAD_COLOR)\n\n    try:\n        result_image = add_watermark(img, text, size, opacity, angle, color, space)\n\n        result_image = cv2.cvtColor(result_image, cv2.COLOR_RGB2BGR)\n        if kb:\n            result_image_bytes = resize_image_to_kb(result_image, None, int(kb), dpi=dpi)\n        else:\n            result_image_bytes = save_image_dpi_to_bytes(result_image, None, dpi=dpi)\n        result_image_base64 = bytes_2_base64(result_image_bytes)\n\n        result_messgae = {\n            \"status\": True,\n            \"image_base64\": result_image_base64,\n        }\n    except Exception as e:\n        result_messgae = {\n            \"status\": False,\n            \"error\": str(e),\n        }\n\n    return result_messgae\n\n\n# è®¾ç½®ç…§ç‰‡KBå€¼æ¥å£(RGBå›¾)\n@app.post(\"/set_kb\")\nasync def set_kb(\n    input_image: UploadFile = File(None),\n    input_image_base64: str = Form(None),\n    dpi: int = Form(300),\n    kb: int = Form(50),\n):\n    if input_image_base64:\n        img = base64_2_numpy(input_image_base64)\n    else:\n        image_bytes = await input_image.read()\n        nparr = np.frombuffer(image_bytes, np.uint8)\n        img = cv2.imdecode(nparr, cv2.IMREAD_COLOR)\n\n    try:\n        result_image = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)\n        result_image_bytes = resize_image_to_kb(result_image, None, int(kb), dpi=dpi)\n        result_image_base64 = bytes_2_base64(result_image_bytes)\n\n        result_messgae = {\n            \"status\": True,\n            \"image_base64\": result_image_base64,\n        }\n    except Exception as e:\n        result_messgae = {\n            \"status\": False,\n            \"error\": e,\n        }\n\n    return result_messgae\n\n\n# è¯ä»¶ç…§æ™ºèƒ½è£å‰ªæ¥å£\n@app.post(\"/idphoto_crop\")\nasync def idphoto_crop_inference(\n    input_image: UploadFile = File(None),\n    input_image_base64: str = Form(None),\n    height: int = Form(413),\n    width: int = Form(295),\n    face_detect_model: str = Form(\"mtcnn\"),\n    hd: bool = Form(True),\n    dpi: int = Form(300),\n    head_measure_ratio: float = Form(0.2),\n    head_height_ratio: float = Form(0.45),\n    top_distance_max: float = Form(0.12),\n    top_distance_min: float = Form(0.10),\n):\n    if input_image_base64:\n        img = base64_2_numpy(input_image_base64)\n    else:\n        image_bytes = await input_image.read()\n        nparr = np.frombuffer(image_bytes, np.uint8)\n        img = cv2.imdecode(nparr, cv2.IMREAD_UNCHANGED)  # è¯»å–å›¾åƒ(4é€šé“)\n\n    # ------------------- é€‰æ‹©æŠ å›¾ä¸äººè„¸æ£€æµ‹æ¨¡å‹ -------------------\n    choose_handler(creator, face_detect_option=face_detect_model)\n\n    # å°†å­—ç¬¦ä¸²è½¬ä¸ºå…ƒç»„\n    size = (int(height), int(width))\n    try:\n        result = creator(\n            img,\n            size=size,\n            head_measure_ratio=head_measure_ratio,\n            head_height_ratio=head_height_ratio,\n            head_top_range=(top_distance_max, top_distance_min),\n            crop_only=True,\n        )\n    except FaceError:\n        result_message = {\"status\": False}\n    # å¦‚æœæ£€æµ‹åˆ°äººè„¸æ•°é‡ç­‰äº1, åˆ™è¿”å›æ ‡å‡†è¯å’Œé«˜æ¸…ç…§ç»“æœï¼ˆpng 4é€šé“å›¾åƒï¼‰\n    else:\n        result_image_standard_bytes = save_image_dpi_to_bytes(cv2.cvtColor(result.standard, cv2.COLOR_RGBA2BGRA), None, dpi)\n        \n        result_message = {\n            \"status\": True,\n            \"image_base64_standard\": bytes_2_base64(result_image_standard_bytes),\n        }\n\n        # å¦‚æœhdä¸ºTrue, åˆ™å¢åŠ é«˜æ¸…ç…§ç»“æœï¼ˆpng 4é€šé“å›¾åƒï¼‰\n        if hd:\n            result_image_hd_bytes = save_image_dpi_to_bytes(cv2.cvtColor(result.hd, cv2.COLOR_RGBA2BGRA), None, dpi)\n            result_message[\"image_base64_hd\"] = bytes_2_base64(result_image_hd_bytes)\n\n    return result_message\n\n\nif __name__ == \"__main__\":\n    import uvicorn\n\n    # åœ¨8080ç«¯å£è¿è¡Œæ¨ç†æœåŠ¡\n    uvicorn.run(app, host=\"0.0.0.0\", port=8080)\n"
        },
        {
          "name": "docker-compose.yml",
          "type": "blob",
          "size": 0.40625,
          "content": "version: '3.8'\n\nservices:\n  hivision_idphotos:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    image: linzeyi/hivision_idphotos\n    command: python3 -u app.py --host 0.0.0.0 --port 7860\n    ports:\n      - '7860:7860'\n\n  hivision_idphotos_api:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    image: linzeyi/hivision_idphotos\n    command: python3 deploy_api.py\n    ports:\n      - '8080:8080'\n"
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "hivision",
          "type": "tree",
          "content": null
        },
        {
          "name": "inference.py",
          "type": "blob",
          "size": 5.7802734375,
          "content": "import os\nimport cv2\nimport argparse\nimport numpy as np\nfrom hivision.error import FaceError\nfrom hivision.utils import hex_to_rgb, resize_image_to_kb, add_background, save_image_dpi_to_bytes\nfrom hivision import IDCreator\nfrom hivision.creator.layout_calculator import (\n    generate_layout_array,\n    generate_layout_image,\n)\nfrom hivision.creator.choose_handler import choose_handler\nfrom hivision.utils import hex_to_rgb, resize_image_to_kb\n\n\nINFERENCE_TYPE = [\n    \"idphoto\",\n    \"human_matting\",\n    \"add_background\",\n    \"generate_layout_photos\",\n    \"idphoto_crop\",\n]\nMATTING_MODEL = [\n    \"hivision_modnet\",\n    \"modnet_photographic_portrait_matting\",\n    \"mnn_hivision_modnet\",\n    \"rmbg-1.4\",\n    \"birefnet-v1-lite\",\n]\nFACE_DETECT_MODEL = [\n    \"mtcnn\",\n    \"face_plusplus\",\n    \"retinaface-resnet50\",\n]\nRENDER = [0, 1, 2]\n\nparser = argparse.ArgumentParser(description=\"HivisionIDPhotos è¯ä»¶ç…§åˆ¶ä½œæ¨ç†ç¨‹åºã€‚\")\nparser.add_argument(\n    \"-t\",\n    \"--type\",\n    help=\"è¯·æ±‚ API çš„ç§ç±»\",\n    choices=INFERENCE_TYPE,\n    default=\"idphoto\",\n)\nparser.add_argument(\"-i\", \"--input_image_dir\", help=\"è¾“å…¥å›¾åƒè·¯å¾„\", required=True)\nparser.add_argument(\"-o\", \"--output_image_dir\", help=\"ä¿å­˜å›¾åƒè·¯å¾„\", required=True)\nparser.add_argument(\"--height\", help=\"è¯ä»¶ç…§å°ºå¯¸-é«˜\", default=413)\nparser.add_argument(\"--width\", help=\"è¯ä»¶ç…§å°ºå¯¸-å®½\", default=295)\nparser.add_argument(\"-c\", \"--color\", help=\"è¯ä»¶ç…§èƒŒæ™¯è‰²\", default=\"638cce\")\nparser.add_argument(\"--hd\", type=bool, help=\"æ˜¯å¦è¾“å‡ºé«˜æ¸…ç…§\", default=True)\nparser.add_argument(\n    \"-k\", \"--kb\", help=\"è¾“å‡ºç…§ç‰‡çš„ KB å€¼ï¼Œä»…å¯¹æ¢åº•å’Œåˆ¶ä½œæ’ç‰ˆç…§ç”Ÿæ•ˆ\", default=None\n)\nparser.add_argument(\n    \"-r\",\n    \"--render\",\n    type=int,\n    help=\"åº•è‰²åˆæˆçš„æ¨¡å¼ï¼Œæœ‰ 0:çº¯è‰²ã€1:ä¸Šä¸‹æ¸å˜ã€2:ä¸­å¿ƒæ¸å˜ å¯é€‰\",\n    choices=RENDER,\n    default=0,\n)\nparser.add_argument(\n    \"--dpi\",\n    type=int,\n    help=\"è¾“å‡ºç…§ç‰‡çš„ DPI å€¼\",\n    default=300,\n)\nparser.add_argument(\n    \"--face_align\",\n    type=bool,\n    help=\"æ˜¯å¦è¿›è¡Œäººè„¸æ—‹è½¬çŸ«æ­£\",\n    default=False,\n)\nparser.add_argument(\n    \"--matting_model\",\n    help=\"æŠ å›¾æ¨¡å‹æƒé‡\",\n    default=\"modnet_photographic_portrait_matting\",\n    choices=MATTING_MODEL,\n)\nparser.add_argument(\n    \"--face_detect_model\",\n    help=\"äººè„¸æ£€æµ‹æ¨¡å‹\",\n    default=\"mtcnn\",\n    choices=FACE_DETECT_MODEL,\n)\n\nargs = parser.parse_args()\n\n# ------------------- é€‰æ‹©æŠ å›¾ä¸äººè„¸æ£€æµ‹æ¨¡å‹ -------------------\ncreator = IDCreator()\nchoose_handler(creator, args.matting_model, args.face_detect_model)\n\nroot_dir = os.path.dirname(os.path.abspath(__file__))\ninput_image = cv2.imread(args.input_image_dir, cv2.IMREAD_UNCHANGED)\n\n# å¦‚æœæ¨¡å¼æ˜¯ç”Ÿæˆè¯ä»¶ç…§\nif args.type == \"idphoto\":\n    # å°†å­—ç¬¦ä¸²è½¬ä¸ºå…ƒç»„\n    size = (int(args.height), int(args.width))\n    try:\n        result = creator(input_image, size=size, face_alignment=args.face_align)\n    except FaceError:\n        print(\"äººè„¸æ•°é‡ä¸ç­‰äº 1ï¼Œè¯·ä¸Šä¼ å•å¼ äººè„¸çš„å›¾åƒã€‚\")\n    else:\n        # ä¿å­˜æ ‡å‡†ç…§\n        save_image_dpi_to_bytes(cv2.cvtColor(result.standard, cv2.COLOR_RGBA2BGRA), args.output_image_dir, dpi=args.dpi)\n\n        # ä¿å­˜é«˜æ¸…ç…§\n        file_name, file_extension = os.path.splitext(args.output_image_dir)\n        new_file_name = file_name + \"_hd\" + file_extension\n        save_image_dpi_to_bytes(cv2.cvtColor(result.hd, cv2.COLOR_RGBA2BGRA), new_file_name, dpi=args.dpi)\n\n# å¦‚æœæ¨¡å¼æ˜¯äººåƒæŠ å›¾\nelif args.type == \"human_matting\":\n    result = creator(input_image, change_bg_only=True)\n    cv2.imwrite(args.output_image_dir, result.hd)\n\n# å¦‚æœæ¨¡å¼æ˜¯æ·»åŠ èƒŒæ™¯\nelif args.type == \"add_background\":\n\n    render_choice = [\"pure_color\", \"updown_gradient\", \"center_gradient\"]\n\n    # å°†å­—ç¬¦ä¸²è½¬ä¸ºå…ƒç»„\n    color = hex_to_rgb(args.color)\n    # å°†å…ƒç¥–çš„ 0 å’Œ 2 å·æ•°å­—äº¤æ¢\n    color = (color[2], color[1], color[0])\n\n    result_image = add_background(\n        input_image, bgr=color, mode=render_choice[args.render]\n    )\n    result_image = result_image.astype(np.uint8)\n    result_image = cv2.cvtColor(result_image, cv2.COLOR_RGBA2BGRA)\n    \n    if args.kb:\n        resize_image_to_kb(result_image, args.output_image_dir, int(args.kb), dpi=args.dpi)\n    else:\n        save_image_dpi_to_bytes(cv2.cvtColor(result_image, cv2.COLOR_RGBA2BGRA), args.output_image_dir, dpi=args.dpi)\n\n# å¦‚æœæ¨¡å¼æ˜¯ç”Ÿæˆæ’ç‰ˆç…§\nelif args.type == \"generate_layout_photos\":\n\n    size = (int(args.height), int(args.width))\n\n    typography_arr, typography_rotate = generate_layout_array(\n        input_height=size[0], input_width=size[1]\n    )\n\n    result_layout_image = generate_layout_image(\n        input_image,\n        typography_arr,\n        typography_rotate,\n        height=size[0],\n        width=size[1],\n    )\n\n    if args.kb:\n        result_layout_image = cv2.cvtColor(result_layout_image, cv2.COLOR_RGB2BGR)\n        result_layout_image = resize_image_to_kb(\n            result_layout_image, args.output_image_dir, int(args.kb), dpi=args.dpi\n        )\n    else:\n        save_image_dpi_to_bytes(cv2.cvtColor(result_layout_image, cv2.COLOR_RGBA2BGRA), args.output_image_dir, dpi=args.dpi)\n\n# å¦‚æœæ¨¡å¼æ˜¯è¯ä»¶ç…§è£åˆ‡\nelif args.type == \"idphoto_crop\":\n    # å°†å­—ç¬¦ä¸²è½¬ä¸ºå…ƒç»„\n    size = (int(args.height), int(args.width))\n    try:\n        result = creator(input_image, size=size, crop_only=True)\n    except FaceError:\n        print(\"äººè„¸æ•°é‡ä¸ç­‰äº 1ï¼Œè¯·ä¸Šä¼ å•å¼ äººè„¸çš„å›¾åƒã€‚\")\n    else:\n        # ä¿å­˜æ ‡å‡†ç…§\n        save_image_dpi_to_bytes(cv2.cvtColor(result.standard, cv2.COLOR_RGBA2BGRA), args.output_image_dir, dpi=args.dpi)\n\n        # ä¿å­˜é«˜æ¸…ç…§\n        file_name, file_extension = os.path.splitext(args.output_image_dir)\n        new_file_name = file_name + \"_hd\" + file_extension\n        save_image_dpi_to_bytes(cv2.cvtColor(result.hd, cv2.COLOR_RGBA2BGRA), new_file_name, dpi=args.dpi)"
        },
        {
          "name": "requirements-app.txt",
          "type": "blob",
          "size": 0.021484375,
          "content": "gradio>=4.43.0\nfastapi"
        },
        {
          "name": "requirements-dev.txt",
          "type": "blob",
          "size": 0.0048828125,
          "content": "black"
        },
        {
          "name": "requirements.txt",
          "type": "blob",
          "size": 0.09375,
          "content": "opencv-python>=4.8.1.78\nonnxruntime>=1.15.0\nnumpy<=1.26.4\nrequests\nmtcnn-runtime\ntqdm\nstarlette\n"
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "test",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}