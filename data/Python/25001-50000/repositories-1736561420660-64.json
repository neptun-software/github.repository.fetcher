{
  "metadata": {
    "timestamp": 1736561420660,
    "page": 64,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjcw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "zhayujie/chatgpt-on-wechat",
      "stars": 32537,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".flake8",
          "type": "blob",
          "size": 0.1845703125,
          "content": "[flake8]\nmax-line-length = 176\nselect = E303,W293,W291,W292,E305,E231,E302\nexclude =\n    .tox,\n    __pycache__,\n    *.pyc,\n    .env\n    venv/*\n    .venv/*\n    reports/*\n    dist/*\n    lib/*"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.4287109375,
          "content": ".DS_Store\n.idea\n.vscode\n.venv\n.vs\n.wechaty/\n__pycache__/\nvenv*\n*.pyc\nconfig.json\nQR.png\nnohup.out\ntmp\nplugins.json\nitchat.pkl\n*.log\nuser_datas.pkl\nchatgpt_tool_hub/\nplugins/**/\n!plugins/bdunit\n!plugins/dungeon\n!plugins/finish\n!plugins/godcmd\n!plugins/tool\n!plugins/banwords\n!plugins/banwords/**/\nplugins/banwords/__pycache__\nplugins/banwords/lib/__pycache__\n!plugins/hello\n!plugins/role\n!plugins/keyword\n!plugins/linkai\nclient_config.json\n"
        },
        {
          "name": ".pre-commit-config.yaml",
          "type": "blob",
          "size": 0.8203125,
          "content": "repos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.4.0\n    hooks:\n      - id: fix-byte-order-marker\n      - id: check-case-conflict\n      - id: check-merge-conflict\n      - id: debug-statements\n      - id: pretty-format-json\n        types: [text]\n        files: \\.json(.template)?$\n        args: [ --autofix , --no-ensure-ascii, --indent=2, --no-sort-keys]\n      - id: trailing-whitespace\n        exclude: '(\\/|^)lib\\/'\n        args: [ --markdown-linebreak-ext=md ]\n  - repo: https://github.com/PyCQA/isort\n    rev: 5.12.0\n    hooks:\n      - id: isort\n        exclude: '(\\/|^)lib\\/'\n  - repo: https://github.com/psf/black\n    rev: 23.3.0\n    hooks:\n      - id: black\n        exclude: '(\\/|^)lib\\/'\n  - repo: https://github.com/PyCQA/flake8\n    rev: 6.0.0\n    hooks:\n      - id: flake8\n        exclude: '(\\/|^)lib\\/'"
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 0.0751953125,
          "content": "FROM ghcr.io/zhayujie/chatgpt-on-wechat:latest\n\nENTRYPOINT [\"/entrypoint.sh\"]"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0263671875,
          "content": "Copyright (c) 2022 zhayujie\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE."
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 22.2568359375,
          "content": "<p align=\"center\"><img src= \"https://github.com/user-attachments/assets/31fb4eab-3be4-477d-aa76-82cf62bfd12c\" alt=\"Chatgpt-on-Wechat\" width=\"600\" /></p>\n\n<p align=\"center\">\n   <a href=\"https://github.com/zhayujie/chatgpt-on-wechat/releases/latest\"><img src=\"https://img.shields.io/github/v/release/zhayujie/chatgpt-on-wechat\" alt=\"Latest release\"></a>\n  <a href=\"https://github.com/zhayujie/chatgpt-on-wechat/blob/master/LICENSE\"><img src=\"https://img.shields.io/github/license/zhayujie/chatgpt-on-wechat\" alt=\"License: MIT\"></a>\n  <a href=\"https://github.com/zhayujie/chatgpt-on-wechat\"><img src=\"https://img.shields.io/github/stars/zhayujie/chatgpt-on-wechat?style=flat-square\" alt=\"Stars\"></a> <br/>\n</p>\n\nchatgpt-on-wechatï¼ˆç®€ç§°CoWï¼‰é¡¹ç›®æ˜¯åŸºäºå¤§æ¨¡å‹çš„æ™ºèƒ½å¯¹è¯æœºå™¨äººï¼Œæ”¯æŒå¾®ä¿¡å…¬ä¼—å·ã€ä¼ä¸šå¾®ä¿¡åº”ç”¨ã€é£ä¹¦ã€é’‰é’‰æ¥å…¥ï¼Œå¯é€‰æ‹©GPT3.5/GPT4.0/Claude/Gemini/LinkAI/ChatGLM/KIMI/æ–‡å¿ƒä¸€è¨€/è®¯é£æ˜Ÿç«/é€šä¹‰åƒé—®/LinkAIï¼Œèƒ½å¤„ç†æ–‡æœ¬ã€è¯­éŸ³å’Œå›¾ç‰‡ï¼Œé€šè¿‡æ’ä»¶è®¿é—®æ“ä½œç³»ç»Ÿå’Œäº’è”ç½‘ç­‰å¤–éƒ¨èµ„æºï¼Œæ”¯æŒåŸºäºè‡ªæœ‰çŸ¥è¯†åº“å®šåˆ¶ä¼ä¸šAIåº”ç”¨ã€‚\n\n# ç®€ä»‹\n\næœ€æ–°ç‰ˆæœ¬æ”¯æŒçš„åŠŸèƒ½å¦‚ä¸‹ï¼š\n\n-  âœ…   **å¤šç«¯éƒ¨ç½²ï¼š** æœ‰å¤šç§éƒ¨ç½²æ–¹å¼å¯é€‰æ‹©ä¸”åŠŸèƒ½å®Œå¤‡ï¼Œç›®å‰å·²æ”¯æŒå¾®ä¿¡å…¬ä¼—å·ã€ä¼ä¸šå¾®ä¿¡åº”ç”¨ã€é£ä¹¦ã€é’‰é’‰ç­‰éƒ¨ç½²æ–¹å¼\n-  âœ…   **åŸºç¡€å¯¹è¯ï¼š** ç§èŠåŠç¾¤èŠçš„æ¶ˆæ¯æ™ºèƒ½å›å¤ï¼Œæ”¯æŒå¤šè½®ä¼šè¯ä¸Šä¸‹æ–‡è®°å¿†ï¼Œæ”¯æŒ GPT-3.5, GPT-4o-mini, GPT-4o,  GPT-4, Claude-3.5, Gemini, æ–‡å¿ƒä¸€è¨€, è®¯é£æ˜Ÿç«, é€šä¹‰åƒé—®ï¼ŒChatGLM-4ï¼ŒKimi(æœˆä¹‹æš—é¢), MiniMax, GiteeAI\n-  âœ…   **è¯­éŸ³èƒ½åŠ›ï¼š** å¯è¯†åˆ«è¯­éŸ³æ¶ˆæ¯ï¼Œé€šè¿‡æ–‡å­—æˆ–è¯­éŸ³å›å¤ï¼Œæ”¯æŒ azure, baidu, google, openai(whisper/tts) ç­‰å¤šç§è¯­éŸ³æ¨¡å‹\n-  âœ…   **å›¾åƒèƒ½åŠ›ï¼š** æ”¯æŒå›¾ç‰‡ç”Ÿæˆã€å›¾ç‰‡è¯†åˆ«ã€å›¾ç”Ÿå›¾ï¼ˆå¦‚ç…§ç‰‡ä¿®å¤ï¼‰ï¼Œå¯é€‰æ‹© Dall-E-3, stable diffusion, replicate, midjourney, CogView-3, visionæ¨¡å‹\n-  âœ…   **ä¸°å¯Œæ’ä»¶ï¼š** æ”¯æŒä¸ªæ€§åŒ–æ’ä»¶æ‰©å±•ï¼Œå·²å®ç°å¤šè§’è‰²åˆ‡æ¢ã€æ–‡å­—å†’é™©ã€æ•æ„Ÿè¯è¿‡æ»¤ã€èŠå¤©è®°å½•æ€»ç»“ã€æ–‡æ¡£æ€»ç»“å’Œå¯¹è¯ã€è”ç½‘æœç´¢ç­‰æ’ä»¶\n-  âœ…   **çŸ¥è¯†åº“ï¼š** é€šè¿‡ä¸Šä¼ çŸ¥è¯†åº“æ–‡ä»¶è‡ªå®šä¹‰ä¸“å±æœºå™¨äººï¼Œå¯ä½œä¸ºæ•°å­—åˆ†èº«ã€æ™ºèƒ½å®¢æœã€ç§åŸŸåŠ©æ‰‹ä½¿ç”¨ï¼ŒåŸºäº [LinkAI](https://link-ai.tech) å®ç°\n\n## å£°æ˜\n\n1. æœ¬é¡¹ç›®éµå¾ª [MITå¼€æºåè®®](/LICENSE)ï¼Œä»…ç”¨äºæŠ€æœ¯ç ”ç©¶å’Œå­¦ä¹ ï¼Œä½¿ç”¨æœ¬é¡¹ç›®æ—¶éœ€éµå®ˆæ‰€åœ¨åœ°æ³•å¾‹æ³•è§„ã€ç›¸å…³æ”¿ç­–ä»¥åŠä¼ä¸šç« ç¨‹ï¼Œç¦æ­¢ç”¨äºä»»ä½•è¿æ³•æˆ–ä¾µçŠ¯ä»–äººæƒç›Šçš„è¡Œä¸º\n2. å¢ƒå†…ä½¿ç”¨è¯¥é¡¹ç›®æ—¶ï¼Œè¯·ä½¿ç”¨å›½å†…å‚å•†çš„å¤§æ¨¡å‹æœåŠ¡ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„å†…å®¹å®‰å…¨å®¡æ ¸åŠè¿‡æ»¤\n3. æœ¬é¡¹ç›®ä¸»è¦æ¥å…¥ååŒåŠå…¬å¹³å°ï¼Œæ¨èä½¿ç”¨å…¬ä¼—å·ã€ä¼å¾®è‡ªå»ºåº”ç”¨ã€é’‰é’‰ã€é£ä¹¦ç­‰æ¥å…¥é€šé“ï¼Œå…¶ä»–é€šé“ä¸ºå†å²äº§ç‰©å·²ä¸ç»´æŠ¤\n4. ä»»ä½•ä¸ªäººã€å›¢é˜Ÿå’Œä¼ä¸šï¼Œæ— è®ºä»¥ä½•ç§æ–¹å¼ä½¿ç”¨è¯¥é¡¹ç›®ã€å¯¹ä½•å¯¹è±¡æä¾›æœåŠ¡ï¼Œæ‰€äº§ç”Ÿçš„ä¸€åˆ‡åæœï¼Œæœ¬é¡¹ç›®å‡ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»\n\n## æ¼”ç¤º\n\nDEMOè§†é¢‘ï¼šhttps://cdn.link-ai.tech/doc/cow_demo.mp4\n\n## ç¤¾åŒº\n\næ·»åŠ å°åŠ©æ‰‹å¾®ä¿¡åŠ å…¥å¼€æºé¡¹ç›®äº¤æµç¾¤ï¼š\n\n<img width=\"160\" src=\"https://img-1317903499.cos.ap-guangzhou.myqcloud.com/docs/open-community.png\">\n\n<br>\n\n# ä¼ä¸šæœåŠ¡\n\n<a href=\"https://link-ai.tech\" target=\"_blank\"><img width=\"800\" src=\"https://cdn.link-ai.tech/image/link-ai-intro.jpg\"></a>\n\n> [LinkAI](https://link-ai.tech/) æ˜¯é¢å‘ä¼ä¸šå’Œå¼€å‘è€…çš„ä¸€ç«™å¼AIåº”ç”¨å¹³å°ï¼Œèšåˆå¤šæ¨¡æ€å¤§æ¨¡å‹ã€çŸ¥è¯†åº“ã€Agent æ’ä»¶ã€å·¥ä½œæµç­‰èƒ½åŠ›ï¼Œæ”¯æŒä¸€é”®æ¥å…¥ä¸»æµå¹³å°å¹¶è¿›è¡Œç®¡ç†ï¼Œæ”¯æŒSaaSã€ç§æœ‰åŒ–éƒ¨ç½²å¤šç§æ¨¡å¼ã€‚\n>\n> LinkAI ç›®å‰ å·²åœ¨ç§åŸŸè¿è¥ã€æ™ºèƒ½å®¢æœã€ä¼ä¸šæ•ˆç‡åŠ©æ‰‹ç­‰åœºæ™¯ç§¯ç´¯äº†ä¸°å¯Œçš„ AI è§£å†³æ–¹æ¡ˆï¼Œ åœ¨ç”µå•†ã€æ–‡æ•™ã€å¥åº·ã€æ–°æ¶ˆè´¹ã€ç§‘æŠ€åˆ¶é€ ç­‰å„è¡Œä¸šæ²‰æ·€äº†å¤§æ¨¡å‹è½åœ°åº”ç”¨çš„æœ€ä½³å®è·µï¼Œè‡´åŠ›äºå¸®åŠ©æ›´å¤šä¼ä¸šå’Œå¼€å‘è€…æ‹¥æŠ± AI ç”Ÿäº§åŠ›ã€‚\n\n**ä¼ä¸šæœåŠ¡å’Œäº§å“å’¨è¯¢** å¯è”ç³»äº§å“é¡¾é—®ï¼š\n\n<img width=\"160\" src=\"https://cdn.link-ai.tech/consultant-s.jpg\">\n\n<br>\n\n# ğŸ· æ›´æ–°æ—¥å¿—\n>**2024.10.31ï¼š** [1.7.3ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.7.3) ç¨‹åºç¨³å®šæ€§æå‡ã€æ•°æ®åº“åŠŸèƒ½ã€Claudeæ¨¡å‹ä¼˜åŒ–ã€linkaiæ’ä»¶ä¼˜åŒ–ã€ç¦»çº¿é€šçŸ¥\n\n>**2024.09.26ï¼š** [1.7.2ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.7.2)  å’Œ [1.7.1ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.7.1) æ–‡å¿ƒï¼Œè®¯é£ç­‰æ¨¡å‹ä¼˜åŒ–ã€o1 æ¨¡å‹ã€å¿«é€Ÿå®‰è£…å’Œç®¡ç†è„šæœ¬\n\n>**2024.08.02ï¼š** [1.7.0ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.7.0) æ–°å¢ è®¯é£4.0 æ¨¡å‹ã€çŸ¥è¯†åº“å¼•ç”¨æ¥æºå±•ç¤ºã€ç›¸å…³æ’ä»¶ä¼˜åŒ–\n\n>**2024.07.19ï¼š** [1.6.9ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.6.9) æ–°å¢ gpt-4o-mini æ¨¡å‹ã€é˜¿é‡Œè¯­éŸ³è¯†åˆ«ã€ä¼å¾®åº”ç”¨æ¸ é“è·¯ç”±ä¼˜åŒ–\n\n>**2024.07.05ï¼š** [1.6.8ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.6.8) å’Œ [1.6.7ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.6.7)ï¼ŒClaude3.5, Gemini 1.5 Pro, MiniMaxæ¨¡å‹ã€å·¥ä½œæµå›¾ç‰‡è¾“å…¥ã€æ¨¡å‹åˆ—è¡¨å®Œå–„\n\n>**2024.06.04ï¼š** [1.6.6ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.6.6) å’Œ [1.6.5ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.6.5)ï¼Œgpt-4oæ¨¡å‹ã€é’‰é’‰æµå¼å¡ç‰‡ã€è®¯é£è¯­éŸ³è¯†åˆ«/åˆæˆ\n\n>**2024.04.26ï¼š** [1.6.0ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.6.0)ï¼Œæ–°å¢ Kimi æ¥å…¥ã€gpt-4-turboç‰ˆæœ¬å‡çº§ã€æ–‡ä»¶æ€»ç»“å’Œè¯­éŸ³è¯†åˆ«é—®é¢˜ä¿®å¤\n\n>**2024.03.26ï¼š** [1.5.8ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.5.8) å’Œ [1.5.7ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.5.7)ï¼Œæ–°å¢ GLM-4ã€Claude-3 æ¨¡å‹ï¼Œedge-tts è¯­éŸ³æ”¯æŒ\n\n>**2024.01.26ï¼š** [1.5.6ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.5.6) å’Œ [1.5.5ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.5.5)ï¼Œé’‰é’‰æ¥å…¥ï¼Œtoolæ’ä»¶å‡çº§ï¼Œ4-turboæ¨¡å‹æ›´æ–°\n\n>**2023.11.11ï¼š** [1.5.3ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.5.3) å’Œ [1.5.4ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.5.4)ï¼Œæ–°å¢é€šä¹‰åƒé—®æ¨¡å‹ã€Google Gemini\n\n>**2023.11.10ï¼š** [1.5.2ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.5.2)ï¼Œæ–°å¢é£ä¹¦é€šé“ã€å›¾åƒè¯†åˆ«å¯¹è¯ã€é»‘åå•é…ç½®\n\n>**2023.11.10ï¼š** [1.5.0ç‰ˆæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/releases/tag/1.5.0)ï¼Œæ–°å¢ `gpt-4-turbo`, `dall-e-3`, `tts` æ¨¡å‹æ¥å…¥ï¼Œå®Œå–„å›¾åƒç†è§£&ç”Ÿæˆã€è¯­éŸ³è¯†åˆ«&ç”Ÿæˆçš„å¤šæ¨¡æ€èƒ½åŠ›\n\n>**2023.10.16ï¼š** æ”¯æŒé€šè¿‡æ„å›¾è¯†åˆ«ä½¿ç”¨LinkAIè”ç½‘æœç´¢ã€æ•°å­¦è®¡ç®—ã€ç½‘é¡µè®¿é—®ç­‰æ’ä»¶ï¼Œå‚è€ƒ[æ’ä»¶æ–‡æ¡£](https://docs.link-ai.tech/platform/plugins)\n\n>**2023.09.26ï¼š** æ’ä»¶å¢åŠ  æ–‡ä»¶/æ–‡ç« é“¾æ¥ ä¸€é”®æ€»ç»“å’Œå¯¹è¯çš„åŠŸèƒ½ï¼Œä½¿ç”¨å‚è€ƒï¼š[æ’ä»¶è¯´æ˜](https://github.com/zhayujie/chatgpt-on-wechat/tree/master/plugins/linkai#3%E6%96%87%E6%A1%A3%E6%80%BB%E7%BB%93%E5%AF%B9%E8%AF%9D%E5%8A%9F%E8%83%BD)\n\n>**2023.08.08ï¼š** æ¥å…¥ç™¾åº¦æ–‡å¿ƒä¸€è¨€æ¨¡å‹ï¼Œé€šè¿‡ [æ’ä»¶](https://github.com/zhayujie/chatgpt-on-wechat/tree/master/plugins/linkai) æ”¯æŒ Midjourney ç»˜å›¾\n\n>**2023.06.12ï¼š** æ¥å…¥ [LinkAI](https://link-ai.tech/console) å¹³å°ï¼Œå¯åœ¨çº¿åˆ›å»ºé¢†åŸŸçŸ¥è¯†åº“ï¼Œæ‰“é€ ä¸“å±å®¢æœæœºå™¨äººã€‚ä½¿ç”¨å‚è€ƒ [æ¥å…¥æ–‡æ¡£](https://link-ai.tech/platform/link-app/wechat)ã€‚\n\næ›´æ—©æ›´æ–°æ—¥å¿—æŸ¥çœ‹: [å½’æ¡£æ—¥å¿—](/docs/version/old-version.md)\n\n<br>\n\n# ğŸš€ å¿«é€Ÿå¼€å§‹\n\n- å¿«é€Ÿå¼€å§‹è¯¦ç»†æ–‡æ¡£ï¼š[é¡¹ç›®æ­å»ºæ–‡æ¡£](https://docs.link-ai.tech/cow/quick-start)\n\n- å¿«é€Ÿå®‰è£…è„šæœ¬ï¼Œè¯¦ç»†ä½¿ç”¨æŒ‡å¯¼ï¼š[ä¸€é”®å®‰è£…å¯åŠ¨è„šæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/wiki/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC)\n```bash\nbash <(curl -sS https://cdn.link-ai.tech/code/cow/install.sh)\n```\n- é¡¹ç›®ç®¡ç†è„šæœ¬ï¼Œè¯¦ç»†ä½¿ç”¨æŒ‡å¯¼ï¼š[é¡¹ç›®ç®¡ç†è„šæœ¬](https://github.com/zhayujie/chatgpt-on-wechat/wiki/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E8%84%9A%E6%9C%AC)\n## ä¸€ã€å‡†å¤‡\n\n### 1. è´¦å·æ³¨å†Œ\n\né¡¹ç›®é»˜è®¤ä½¿ç”¨OpenAIæ¥å£ï¼Œéœ€å‰å¾€ [OpenAIæ³¨å†Œé¡µé¢](https://beta.openai.com/signup) åˆ›å»ºè´¦å·ï¼Œåˆ›å»ºå®Œè´¦å·åˆ™å‰å¾€ [APIç®¡ç†é¡µé¢](https://beta.openai.com/account/api-keys) åˆ›å»ºä¸€ä¸ª API Key å¹¶ä¿å­˜ä¸‹æ¥ï¼Œåé¢éœ€è¦åœ¨é¡¹ç›®ä¸­é…ç½®è¿™ä¸ªkeyã€‚æ¥å£éœ€è¦æµ·å¤–ç½‘ç»œè®¿é—®åŠç»‘å®šä¿¡ç”¨å¡æ”¯ä»˜ã€‚\n\n> é»˜è®¤å¯¹è¯æ¨¡å‹æ˜¯ openai çš„ gpt-3.5-turboï¼Œè®¡è´¹æ–¹å¼æ˜¯çº¦æ¯ 1000tokens (çº¦750ä¸ªè‹±æ–‡å•è¯ æˆ– 500æ±‰å­—ï¼ŒåŒ…å«è¯·æ±‚å’Œå›å¤) æ¶ˆè€— $0.002ï¼Œå›¾ç‰‡ç”Ÿæˆæ˜¯Dell Eæ¨¡å‹ï¼Œæ¯å¼ æ¶ˆè€— $0.016ã€‚\n\né¡¹ç›®åŒæ—¶ä¹Ÿæ”¯æŒä½¿ç”¨ LinkAI æ¥å£ï¼Œæ— éœ€ä»£ç†ï¼Œå¯ä½¿ç”¨ Kimiã€æ–‡å¿ƒã€è®¯é£ã€GPT-3.5ã€GPT-4o ç­‰æ¨¡å‹ï¼Œæ”¯æŒ å®šåˆ¶åŒ–çŸ¥è¯†åº“ã€è”ç½‘æœç´¢ã€MJç»˜å›¾ã€æ–‡æ¡£æ€»ç»“ã€å·¥ä½œæµç­‰èƒ½åŠ›ã€‚ä¿®æ”¹é…ç½®å³å¯ä¸€é”®ä½¿ç”¨ï¼Œå‚è€ƒ [æ¥å…¥æ–‡æ¡£](https://link-ai.tech/platform/link-app/wechat)ã€‚\n\n### 2.è¿è¡Œç¯å¢ƒ\n\næ”¯æŒ Linuxã€MacOSã€Windows ç³»ç»Ÿï¼ˆå¯åœ¨LinuxæœåŠ¡å™¨ä¸Šé•¿æœŸè¿è¡Œ)ï¼ŒåŒæ—¶éœ€å®‰è£… `Python`ã€‚\n> å»ºè®®Pythonç‰ˆæœ¬åœ¨ 3.7.1~3.9.X ä¹‹é—´ï¼Œæ¨è3.8ç‰ˆæœ¬ï¼Œ3.10åŠä»¥ä¸Šç‰ˆæœ¬åœ¨ MacOS å¯ç”¨ï¼Œå…¶ä»–ç³»ç»Ÿä¸Šä¸ç¡®å®šèƒ½å¦æ­£å¸¸è¿è¡Œã€‚\n\n> æ³¨æ„ï¼šDocker æˆ– Railway éƒ¨ç½²æ— éœ€å®‰è£…pythonç¯å¢ƒå’Œä¸‹è½½æºç ï¼Œå¯ç›´æ¥å¿«è¿›åˆ°ä¸‹ä¸€èŠ‚ã€‚\n\n**(1) å…‹éš†é¡¹ç›®ä»£ç ï¼š**\n\n```bash\ngit clone https://github.com/zhayujie/chatgpt-on-wechat\ncd chatgpt-on-wechat/\n```\n\næ³¨: å¦‚é‡åˆ°ç½‘ç»œé—®é¢˜å¯é€‰æ‹©å›½å†…é•œåƒ https://gitee.com/zhayujie/chatgpt-on-wechat\n\n**(2) å®‰è£…æ ¸å¿ƒä¾èµ– (å¿…é€‰)ï¼š**\n> èƒ½å¤Ÿä½¿ç”¨`itchat`åˆ›å»ºæœºå™¨äººï¼Œå¹¶å…·æœ‰æ–‡å­—äº¤æµåŠŸèƒ½æ‰€éœ€çš„æœ€å°ä¾èµ–é›†åˆã€‚\n```bash\npip3 install -r requirements.txt\n```\n\n**(3) æ‹“å±•ä¾èµ– (å¯é€‰ï¼Œå»ºè®®å®‰è£…)ï¼š**\n\n```bash\npip3 install -r requirements-optional.txt\n```\n> å¦‚æœæŸé¡¹ä¾èµ–å®‰è£…å¤±è´¥å¯æ³¨é‡Šæ‰å¯¹åº”çš„è¡Œå†ç»§ç»­\n\n## äºŒã€é…ç½®\n\né…ç½®æ–‡ä»¶çš„æ¨¡æ¿åœ¨æ ¹ç›®å½•çš„`config-template.json`ä¸­ï¼Œéœ€å¤åˆ¶è¯¥æ¨¡æ¿åˆ›å»ºæœ€ç»ˆç”Ÿæ•ˆçš„ `config.json` æ–‡ä»¶ï¼š\n\n```bash\n  cp config-template.json config.json\n```\n\nç„¶ååœ¨`config.json`ä¸­å¡«å…¥é…ç½®ï¼Œä»¥ä¸‹æ˜¯å¯¹é»˜è®¤é…ç½®çš„è¯´æ˜ï¼Œå¯æ ¹æ®éœ€è¦è¿›è¡Œè‡ªå®šä¹‰ä¿®æ”¹ï¼ˆæ³¨æ„å®é™…ä½¿ç”¨æ—¶è¯·å»æ‰æ³¨é‡Šï¼Œä¿è¯JSONæ ¼å¼çš„å®Œæ•´ï¼‰ï¼š\n\n```bash\n# config.jsonæ–‡ä»¶å†…å®¹ç¤ºä¾‹\n{\n  \"model\": \"gpt-3.5-turbo\",                                   # æ¨¡å‹åç§°, æ”¯æŒ gpt-3.5-turbo, gpt-4, gpt-4-turbo, wenxin, xunfei, glm-4, claude-3-haiku, moonshot\n  \"open_ai_api_key\": \"YOUR API KEY\",                          # å¦‚æœä½¿ç”¨openAIæ¨¡å‹åˆ™å¡«å…¥ä¸Šé¢åˆ›å»ºçš„ OpenAI API KEY\n  \"open_ai_api_base\": \"https://api.openai.com/v1\",            # OpenAIæ¥å£ä»£ç†åœ°å€\n  \"proxy\": \"\",                                                # ä»£ç†å®¢æˆ·ç«¯çš„ipå’Œç«¯å£ï¼Œå›½å†…ç¯å¢ƒå¼€å¯ä»£ç†çš„éœ€è¦å¡«å†™è¯¥é¡¹ï¼Œå¦‚ \"127.0.0.1:7890\"\n  \"single_chat_prefix\": [\"bot\", \"@bot\"],                      # ç§èŠæ—¶æ–‡æœ¬éœ€è¦åŒ…å«è¯¥å‰ç¼€æ‰èƒ½è§¦å‘æœºå™¨äººå›å¤\n  \"single_chat_reply_prefix\": \"[bot] \",                       # ç§èŠæ—¶è‡ªåŠ¨å›å¤çš„å‰ç¼€ï¼Œç”¨äºåŒºåˆ†çœŸäºº\n  \"group_chat_prefix\": [\"@bot\"],                              # ç¾¤èŠæ—¶åŒ…å«è¯¥å‰ç¼€åˆ™ä¼šè§¦å‘æœºå™¨äººå›å¤\n  \"group_name_white_list\": [\"ChatGPTæµ‹è¯•ç¾¤\", \"ChatGPTæµ‹è¯•ç¾¤2\"], # å¼€å¯è‡ªåŠ¨å›å¤çš„ç¾¤åç§°åˆ—è¡¨\n  \"group_chat_in_one_session\": [\"ChatGPTæµ‹è¯•ç¾¤\"],              # æ”¯æŒä¼šè¯ä¸Šä¸‹æ–‡å…±äº«çš„ç¾¤åç§°  \n  \"image_create_prefix\": [\"ç”»\", \"çœ‹\", \"æ‰¾\"],                   # å¼€å¯å›¾ç‰‡å›å¤çš„å‰ç¼€\n  \"conversation_max_tokens\": 1000,                            # æ”¯æŒä¸Šä¸‹æ–‡è®°å¿†çš„æœ€å¤šå­—ç¬¦æ•°\n  \"speech_recognition\": false,                                # æ˜¯å¦å¼€å¯è¯­éŸ³è¯†åˆ«\n  \"group_speech_recognition\": false,                          # æ˜¯å¦å¼€å¯ç¾¤ç»„è¯­éŸ³è¯†åˆ«\n  \"voice_reply_voice\": false,                                 # æ˜¯å¦ä½¿ç”¨è¯­éŸ³å›å¤è¯­éŸ³\n  \"character_desc\": \"ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚\",  # äººæ ¼æè¿°\n  # è®¢é˜…æ¶ˆæ¯ï¼Œå…¬ä¼—å·å’Œä¼ä¸šå¾®ä¿¡channelä¸­è¯·å¡«å†™ï¼Œå½“è¢«è®¢é˜…æ—¶ä¼šè‡ªåŠ¨å›å¤ï¼Œå¯ä½¿ç”¨ç‰¹æ®Šå ä½ç¬¦ã€‚ç›®å‰æ”¯æŒçš„å ä½ç¬¦æœ‰{trigger_prefix}ï¼Œåœ¨ç¨‹åºä¸­å®ƒä¼šè‡ªåŠ¨æ›¿æ¢æˆbotçš„è§¦å‘è¯ã€‚\n  \"subscribe_msg\": \"æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\\nè¿™é‡Œæ˜¯ChatGPTï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\\næ”¯æŒè§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œæ’ä»¶ã€‚\\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚\",\n  \"use_linkai\": false,                                        # æ˜¯å¦ä½¿ç”¨LinkAIæ¥å£ï¼Œé»˜è®¤å…³é—­ï¼Œå¼€å¯åå¯å›½å†…è®¿é—®ï¼Œä½¿ç”¨çŸ¥è¯†åº“å’ŒMJ\n  \"linkai_api_key\": \"\",                                       # LinkAI Api Key\n  \"linkai_app_code\": \"\"                                       # LinkAI åº”ç”¨æˆ–å·¥ä½œæµcode\n}\n```\n**é…ç½®è¯´æ˜ï¼š**\n\n**1.ä¸ªäººèŠå¤©**\n\n+ ä¸ªäººèŠå¤©ä¸­ï¼Œéœ€è¦ä»¥ \"bot\"æˆ–\"@bot\" ä¸ºå¼€å¤´çš„å†…å®¹è§¦å‘æœºå™¨äººï¼Œå¯¹åº”é…ç½®é¡¹ `single_chat_prefix` (å¦‚æœä¸éœ€è¦ä»¥å‰ç¼€è§¦å‘å¯ä»¥å¡«å†™  `\"single_chat_prefix\": [\"\"]`)\n+ æœºå™¨äººå›å¤çš„å†…å®¹ä¼šä»¥ \"[bot] \" ä½œä¸ºå‰ç¼€ï¼Œ ä»¥åŒºåˆ†çœŸäººï¼Œå¯¹åº”çš„é…ç½®é¡¹ä¸º `single_chat_reply_prefix` (å¦‚æœä¸éœ€è¦å‰ç¼€å¯ä»¥å¡«å†™ `\"single_chat_reply_prefix\": \"\"`)\n\n**2.ç¾¤ç»„èŠå¤©**\n\n+ ç¾¤ç»„èŠå¤©ä¸­ï¼Œç¾¤åç§°éœ€é…ç½®åœ¨ `group_name_white_list ` ä¸­æ‰èƒ½å¼€å¯ç¾¤èŠè‡ªåŠ¨å›å¤ã€‚å¦‚æœæƒ³å¯¹æ‰€æœ‰ç¾¤èŠç”Ÿæ•ˆï¼Œå¯ä»¥ç›´æ¥å¡«å†™ `\"group_name_white_list\": [\"ALL_GROUP\"]`\n+ é»˜è®¤åªè¦è¢«äºº @ å°±ä¼šè§¦å‘æœºå™¨äººè‡ªåŠ¨å›å¤ï¼›å¦å¤–ç¾¤èŠå¤©ä¸­åªè¦æ£€æµ‹åˆ°ä»¥ \"@bot\" å¼€å¤´çš„å†…å®¹ï¼ŒåŒæ ·ä¼šè‡ªåŠ¨å›å¤ï¼ˆæ–¹ä¾¿è‡ªå·±è§¦å‘ï¼‰ï¼Œè¿™å¯¹åº”é…ç½®é¡¹ `group_chat_prefix`\n+ å¯é€‰é…ç½®: `group_name_keyword_white_list`é…ç½®é¡¹æ”¯æŒæ¨¡ç³ŠåŒ¹é…ç¾¤åç§°ï¼Œ`group_chat_keyword`é…ç½®é¡¹åˆ™æ”¯æŒæ¨¡ç³ŠåŒ¹é…ç¾¤æ¶ˆæ¯å†…å®¹ï¼Œç”¨æ³•ä¸ä¸Šè¿°ä¸¤ä¸ªé…ç½®é¡¹ç›¸åŒã€‚ï¼ˆContributed by [evolay](https://github.com/evolay))\n+ `group_chat_in_one_session`ï¼šä½¿ç¾¤èŠå…±äº«ä¸€ä¸ªä¼šè¯ä¸Šä¸‹æ–‡ï¼Œé…ç½® `[\"ALL_GROUP\"]` åˆ™ä½œç”¨äºæ‰€æœ‰ç¾¤èŠ\n\n**3.è¯­éŸ³è¯†åˆ«**\n\n+ æ·»åŠ  `\"speech_recognition\": true` å°†å¼€å¯è¯­éŸ³è¯†åˆ«ï¼Œé»˜è®¤ä½¿ç”¨openaiçš„whisperæ¨¡å‹è¯†åˆ«ä¸ºæ–‡å­—ï¼ŒåŒæ—¶ä»¥æ–‡å­—å›å¤ï¼Œè¯¥å‚æ•°ä»…æ”¯æŒç§èŠ (æ³¨æ„ç”±äºè¯­éŸ³æ¶ˆæ¯æ— æ³•åŒ¹é…å‰ç¼€ï¼Œä¸€æ—¦å¼€å¯å°†å¯¹æ‰€æœ‰è¯­éŸ³è‡ªåŠ¨å›å¤ï¼Œæ”¯æŒè¯­éŸ³è§¦å‘ç”»å›¾)ï¼›\n+ æ·»åŠ  `\"group_speech_recognition\": true` å°†å¼€å¯ç¾¤ç»„è¯­éŸ³è¯†åˆ«ï¼Œé»˜è®¤ä½¿ç”¨openaiçš„whisperæ¨¡å‹è¯†åˆ«ä¸ºæ–‡å­—ï¼ŒåŒæ—¶ä»¥æ–‡å­—å›å¤ï¼Œå‚æ•°ä»…æ”¯æŒç¾¤èŠ (ä¼šåŒ¹é…group_chat_prefixå’Œgroup_chat_keyword, æ”¯æŒè¯­éŸ³è§¦å‘ç”»å›¾)ï¼›\n+ æ·»åŠ  `\"voice_reply_voice\": true` å°†å¼€å¯è¯­éŸ³å›å¤è¯­éŸ³ï¼ˆåŒæ—¶ä½œç”¨äºç§èŠå’Œç¾¤èŠï¼‰\n\n**4.å…¶ä»–é…ç½®**\n\n+ `model`: æ¨¡å‹åç§°ï¼Œç›®å‰æ”¯æŒ `gpt-3.5-turbo`, `gpt-4o-mini`, `gpt-4o`, `gpt-4`, `wenxin` , `claude` , `gemini`, `glm-4`,  `xunfei`, `moonshot`ç­‰ï¼Œå…¨éƒ¨æ¨¡å‹åç§°å‚è€ƒ[common/const.py](https://github.com/zhayujie/chatgpt-on-wechat/blob/master/common/const.py)æ–‡ä»¶\n+ `temperature`,`frequency_penalty`,`presence_penalty`: Chat APIæ¥å£å‚æ•°ï¼Œè¯¦æƒ…å‚è€ƒ[OpenAIå®˜æ–¹æ–‡æ¡£ã€‚](https://platform.openai.com/docs/api-reference/chat)\n+ `proxy`ï¼šç”±äºç›®å‰ `openai` æ¥å£å›½å†…æ— æ³•è®¿é—®ï¼Œéœ€é…ç½®ä»£ç†å®¢æˆ·ç«¯çš„åœ°å€ï¼Œè¯¦æƒ…å‚è€ƒ  [#351](https://github.com/zhayujie/chatgpt-on-wechat/issues/351)\n+ å¯¹äºå›¾åƒç”Ÿæˆï¼Œåœ¨æ»¡è¶³ä¸ªäººæˆ–ç¾¤ç»„è§¦å‘æ¡ä»¶å¤–ï¼Œè¿˜éœ€è¦é¢å¤–çš„å…³é”®è¯å‰ç¼€æ¥è§¦å‘ï¼Œå¯¹åº”é…ç½® `image_create_prefix `\n+ å…³äºOpenAIå¯¹è¯åŠå›¾ç‰‡æ¥å£çš„å‚æ•°é…ç½®ï¼ˆå†…å®¹è‡ªç”±åº¦ã€å›å¤å­—æ•°é™åˆ¶ã€å›¾ç‰‡å¤§å°ç­‰ï¼‰ï¼Œå¯ä»¥å‚è€ƒ [å¯¹è¯æ¥å£](https://beta.openai.com/docs/api-reference/completions) å’Œ [å›¾åƒæ¥å£](https://beta.openai.com/docs/api-reference/completions)  æ–‡æ¡£ï¼Œåœ¨[`config.py`](https://github.com/zhayujie/chatgpt-on-wechat/blob/master/config.py)ä¸­æ£€æŸ¥å“ªäº›å‚æ•°åœ¨æœ¬é¡¹ç›®ä¸­æ˜¯å¯é…ç½®çš„ã€‚\n+ `conversation_max_tokens`ï¼šè¡¨ç¤ºèƒ½å¤Ÿè®°å¿†çš„ä¸Šä¸‹æ–‡æœ€å¤§å­—æ•°ï¼ˆä¸€é—®ä¸€ç­”ä¸ºä¸€ç»„å¯¹è¯ï¼Œå¦‚æœç´¯ç§¯çš„å¯¹è¯å­—æ•°è¶…å‡ºé™åˆ¶ï¼Œå°±ä¼šä¼˜å…ˆç§»é™¤æœ€æ—©çš„ä¸€ç»„å¯¹è¯ï¼‰\n+ `rate_limit_chatgpt`ï¼Œ`rate_limit_dalle`ï¼šæ¯åˆ†é’Ÿæœ€é«˜é—®ç­”é€Ÿç‡ã€ç”»å›¾é€Ÿç‡ï¼Œè¶…é€Ÿåæ’é˜ŸæŒ‰åºå¤„ç†ã€‚\n+ `clear_memory_commands`: å¯¹è¯å†…æŒ‡ä»¤ï¼Œä¸»åŠ¨æ¸…ç©ºå‰æ–‡è®°å¿†ï¼Œå­—ç¬¦ä¸²æ•°ç»„å¯è‡ªå®šä¹‰æŒ‡ä»¤åˆ«åã€‚\n+ `hot_reload`: ç¨‹åºé€€å‡ºåï¼Œæš‚å­˜ç­‰äºçŠ¶æ€ï¼Œé»˜è®¤å…³é—­ã€‚\n+ `character_desc` é…ç½®ä¸­ä¿å­˜ç€ä½ å¯¹æœºå™¨äººè¯´çš„ä¸€æ®µè¯ï¼Œä»–ä¼šè®°ä½è¿™æ®µè¯å¹¶ä½œä¸ºä»–çš„è®¾å®šï¼Œä½ å¯ä»¥ä¸ºä»–å®šåˆ¶ä»»ä½•äººæ ¼      (å…³äºä¼šè¯ä¸Šä¸‹æ–‡çš„æ›´å¤šå†…å®¹å‚è€ƒè¯¥ [issue](https://github.com/zhayujie/chatgpt-on-wechat/issues/43))\n+ `subscribe_msg`ï¼šè®¢é˜…æ¶ˆæ¯ï¼Œå…¬ä¼—å·å’Œä¼ä¸šå¾®ä¿¡channelä¸­è¯·å¡«å†™ï¼Œå½“è¢«è®¢é˜…æ—¶ä¼šè‡ªåŠ¨å›å¤ï¼Œ å¯ä½¿ç”¨ç‰¹æ®Šå ä½ç¬¦ã€‚ç›®å‰æ”¯æŒçš„å ä½ç¬¦æœ‰{trigger_prefix}ï¼Œåœ¨ç¨‹åºä¸­å®ƒä¼šè‡ªåŠ¨æ›¿æ¢æˆbotçš„è§¦å‘è¯ã€‚\n\n**5.LinkAIé…ç½® (å¯é€‰)**\n\n+ `use_linkai`: æ˜¯å¦ä½¿ç”¨LinkAIæ¥å£ï¼Œå¼€å¯åå¯å›½å†…è®¿é—®ï¼Œä½¿ç”¨çŸ¥è¯†åº“å’Œ `Midjourney` ç»˜ç”», å‚è€ƒ [æ–‡æ¡£](https://link-ai.tech/platform/link-app/wechat)\n+ `linkai_api_key`: LinkAI Api Keyï¼Œå¯åœ¨ [æ§åˆ¶å°](https://link-ai.tech/console/interface) åˆ›å»º\n+ `linkai_app_code`: LinkAI åº”ç”¨æˆ–å·¥ä½œæµçš„codeï¼Œé€‰å¡«\n\n**æœ¬è¯´æ˜æ–‡æ¡£å¯èƒ½ä¼šæœªåŠæ—¶æ›´æ–°ï¼Œå½“å‰æ‰€æœ‰å¯é€‰çš„é…ç½®é¡¹å‡åœ¨è¯¥[`config.py`](https://github.com/zhayujie/chatgpt-on-wechat/blob/master/config.py)ä¸­åˆ—å‡ºã€‚**\n\n## ä¸‰ã€è¿è¡Œ\n\n### 1.æœ¬åœ°è¿è¡Œ\n\nå¦‚æœæ˜¯å¼€å‘æœº **æœ¬åœ°è¿è¡Œ**ï¼Œç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š\n\n```bash\npython3 app.py                                    # windowsç¯å¢ƒä¸‹è¯¥å‘½ä»¤é€šå¸¸ä¸º python app.py\n```\n\nç»ˆç«¯è¾“å‡ºäºŒç»´ç åï¼Œè¿›è¡Œæ‰«ç ç™»å½•ï¼Œå½“è¾“å‡º \"Start auto replying\" æ—¶è¡¨ç¤ºè‡ªåŠ¨å›å¤ç¨‹åºå·²ç»æˆåŠŸè¿è¡Œäº†ï¼ˆæ³¨æ„ï¼šç”¨äºç™»å½•çš„è´¦å·éœ€è¦åœ¨æ”¯ä»˜å¤„å·²å®Œæˆå®åè®¤è¯ï¼‰ã€‚æ‰«ç ç™»å½•åä½ çš„è´¦å·å°±æˆä¸ºæœºå™¨äººäº†ï¼Œå¯ä»¥åœ¨æ‰‹æœºç«¯é€šè¿‡é…ç½®çš„å…³é”®è¯è§¦å‘è‡ªåŠ¨å›å¤ (ä»»æ„å¥½å‹å‘é€æ¶ˆæ¯ç»™ä½ ï¼Œæˆ–æ˜¯è‡ªå·±å‘æ¶ˆæ¯ç»™å¥½å‹)ï¼Œå‚è€ƒ[#142](https://github.com/zhayujie/chatgpt-on-wechat/issues/142)ã€‚\n\n### 2.æœåŠ¡å™¨éƒ¨ç½²\n\nä½¿ç”¨nohupå‘½ä»¤åœ¨åå°è¿è¡Œç¨‹åºï¼š\n\n```bash\nnohup python3 app.py & tail -f nohup.out          # åœ¨åå°è¿è¡Œç¨‹åºå¹¶é€šè¿‡æ—¥å¿—è¾“å‡ºäºŒç»´ç \n```\næ‰«ç ç™»å½•åç¨‹åºå³å¯è¿è¡ŒäºæœåŠ¡å™¨åå°ï¼Œæ­¤æ—¶å¯é€šè¿‡ `ctrl+c` å…³é—­æ—¥å¿—ï¼Œä¸ä¼šå½±å“åå°ç¨‹åºçš„è¿è¡Œã€‚ä½¿ç”¨ `ps -ef | grep app.py | grep -v grep` å‘½ä»¤å¯æŸ¥çœ‹è¿è¡Œäºåå°çš„è¿›ç¨‹ï¼Œå¦‚æœæƒ³è¦é‡æ–°å¯åŠ¨ç¨‹åºå¯ä»¥å…ˆ `kill` æ‰å¯¹åº”çš„è¿›ç¨‹ã€‚æ—¥å¿—å…³é—­åå¦‚æœæƒ³è¦å†æ¬¡æ‰“å¼€åªéœ€è¾“å…¥Â `tail -f nohup.out`ã€‚æ­¤å¤–ï¼Œ`scripts` ç›®å½•ä¸‹æœ‰ä¸€é”®è¿è¡Œã€å…³é—­ç¨‹åºçš„è„šæœ¬ä¾›ä½¿ç”¨ã€‚\n\n> **å¤šè´¦å·æ”¯æŒï¼š** å°†é¡¹ç›®å¤åˆ¶å¤šä»½ï¼Œåˆ†åˆ«å¯åŠ¨ç¨‹åºï¼Œç”¨ä¸åŒè´¦å·æ‰«ç ç™»å½•å³å¯å®ç°åŒæ—¶è¿è¡Œã€‚\n\n> **ç‰¹æ®ŠæŒ‡ä»¤ï¼š** ç”¨æˆ·å‘æœºå™¨äººå‘é€ **#reset** å³å¯æ¸…ç©ºè¯¥ç”¨æˆ·çš„ä¸Šä¸‹æ–‡è®°å¿†ã€‚\n\n\n### 3.Dockeréƒ¨ç½²\n\n> ä½¿ç”¨dockeréƒ¨ç½²æ— éœ€ä¸‹è½½æºç å’Œå®‰è£…ä¾èµ–ï¼Œåªéœ€è¦è·å– docker-compose.yml é…ç½®æ–‡ä»¶å¹¶å¯åŠ¨å®¹å™¨å³å¯ã€‚\n\n> å‰ææ˜¯éœ€è¦å®‰è£…å¥½ `docker` åŠ `docker-compose`ï¼Œå®‰è£…æˆåŠŸçš„è¡¨ç°æ˜¯æ‰§è¡Œ `docker -v` å’Œ `docker-compose version` (æˆ– docker compose version) å¯ä»¥æŸ¥çœ‹åˆ°ç‰ˆæœ¬å·ï¼Œå¯å‰å¾€ [dockerå®˜ç½‘](https://docs.docker.com/engine/install/) è¿›è¡Œä¸‹è½½ã€‚\n\n**(1) ä¸‹è½½ docker-compose.yml æ–‡ä»¶**\n\n```bash\nwget https://open-1317903499.cos.ap-guangzhou.myqcloud.com/docker-compose.yml\n```\n\nä¸‹è½½å®Œæˆåæ‰“å¼€ `docker-compose.yml` ä¿®æ”¹æ‰€éœ€é…ç½®ï¼Œå¦‚ `OPEN_AI_API_KEY` å’Œ `GROUP_NAME_WHITE_LIST` ç­‰ã€‚\n\n**(2) å¯åŠ¨å®¹å™¨**\n\nåœ¨ `docker-compose.yml` æ‰€åœ¨ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨å®¹å™¨ï¼š\n\n```bash\nsudo docker compose up -d\n```\n\nè¿è¡Œ `sudo docker ps` èƒ½æŸ¥çœ‹åˆ° NAMES ä¸º chatgpt-on-wechat çš„å®¹å™¨å³è¡¨ç¤ºè¿è¡ŒæˆåŠŸã€‚\n\næ³¨æ„ï¼š\n\n - å¦‚æœ `docker-compose` æ˜¯ 1.X ç‰ˆæœ¬ åˆ™éœ€è¦æ‰§è¡Œ `sudo  docker-compose up -d` æ¥å¯åŠ¨å®¹å™¨\n - è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨å» [docker hub](https://hub.docker.com/r/zhayujie/chatgpt-on-wechat) æ‹‰å– latest ç‰ˆæœ¬çš„é•œåƒï¼Œlatest é•œåƒä¼šåœ¨æ¯æ¬¡é¡¹ç›® release æ–°çš„ç‰ˆæœ¬æ—¶ç”Ÿæˆ\n\næœ€åè¿è¡Œä»¥ä¸‹å‘½ä»¤å¯æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¥å¿—ï¼Œæ‰«ææ—¥å¿—ä¸­çš„äºŒç»´ç å³å¯å®Œæˆç™»å½•ï¼š\n\n```bash\nsudo docker logs -f chatgpt-on-wechat\n```\n\n**(3) æ’ä»¶ä½¿ç”¨**\n\nå¦‚æœéœ€è¦åœ¨dockerå®¹å™¨ä¸­ä¿®æ”¹æ’ä»¶é…ç½®ï¼Œå¯é€šè¿‡æŒ‚è½½çš„æ–¹å¼å®Œæˆï¼Œå°† [æ’ä»¶é…ç½®æ–‡ä»¶](https://github.com/zhayujie/chatgpt-on-wechat/blob/master/plugins/config.json.template)\né‡å‘½åä¸º `config.json`ï¼Œæ”¾ç½®äº `docker-compose.yml` ç›¸åŒç›®å½•ä¸‹ï¼Œå¹¶åœ¨ `docker-compose.yml` ä¸­çš„ `chatgpt-on-wechat` éƒ¨åˆ†ä¸‹æ·»åŠ  `volumes` æ˜ å°„:\n\n```\nvolumes:\n  - ./config.json:/app/plugins/config.json\n```\n**æ³¨**ï¼šé‡‡ç”¨dockeræ–¹å¼éƒ¨ç½²çš„è¯¦ç»†æ•™ç¨‹å¯ä»¥å‚è€ƒï¼š[dockeréƒ¨ç½²CoWé¡¹ç›®](https://www.wangpc.cc/ai/docker-deploy-cow/)\n### 4. Railwayéƒ¨ç½²\n\n> Railway æ¯æœˆæä¾›5åˆ€å’Œæœ€å¤š500å°æ—¶çš„å…è´¹é¢åº¦ã€‚ (07.11æ›´æ–°: ç›®å‰å¤§éƒ¨åˆ†è´¦å·å·²æ— æ³•å…è´¹éƒ¨ç½²)\n\n1. è¿›å…¥ [Railway](https://railway.app/template/qApznZ?referralCode=RC3znh)\n2. ç‚¹å‡» `Deploy Now` æŒ‰é’®ã€‚\n3. è®¾ç½®ç¯å¢ƒå˜é‡æ¥é‡è½½ç¨‹åºè¿è¡Œçš„å‚æ•°ï¼Œä¾‹å¦‚`open_ai_api_key`, `character_desc`ã€‚\n\n**ä¸€é”®éƒ¨ç½²:**\n  \n  [![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/qApznZ?referralCode=RC3znh)\n\n<br>\n\n# ğŸ” å¸¸è§é—®é¢˜\n\nFAQsï¼š <https://github.com/zhayujie/chatgpt-on-wechat/wiki/FAQs>\n\næˆ–ç›´æ¥åœ¨çº¿å’¨è¯¢ [é¡¹ç›®å°åŠ©æ‰‹](https://link-ai.tech/app/Kv2fXJcH)  (è¯­æ–™æŒç»­å®Œå–„ä¸­ï¼Œå›å¤ä»…ä¾›å‚è€ƒ)\n\n# ğŸ› ï¸ å¼€å‘\n\næ¬¢è¿æ¥å…¥æ›´å¤šåº”ç”¨ï¼Œå‚è€ƒ [Terminalä»£ç ](https://github.com/zhayujie/chatgpt-on-wechat/blob/master/channel/terminal/terminal_channel.py) å®ç°æ¥æ”¶å’Œå‘é€æ¶ˆæ¯é€»è¾‘å³å¯æ¥å…¥ã€‚ åŒæ—¶æ¬¢è¿å¢åŠ æ–°çš„æ’ä»¶ï¼Œå‚è€ƒ [æ’ä»¶è¯´æ˜æ–‡æ¡£](https://github.com/zhayujie/chatgpt-on-wechat/tree/master/plugins)ã€‚\n\n# âœ‰ è”ç³»\n\næ¬¢è¿æäº¤PRã€Issuesï¼Œä»¥åŠStaræ”¯æŒä¸€ä¸‹ã€‚ç¨‹åºè¿è¡Œé‡åˆ°é—®é¢˜å¯ä»¥æŸ¥çœ‹ [å¸¸è§é—®é¢˜åˆ—è¡¨](https://github.com/zhayujie/chatgpt-on-wechat/wiki/FAQs) ï¼Œå…¶æ¬¡å‰å¾€ [Issues](https://github.com/zhayujie/chatgpt-on-wechat/issues) ä¸­æœç´¢ã€‚ä¸ªäººå¼€å‘è€…å¯åŠ å…¥å¼€æºäº¤æµç¾¤å‚ä¸æ›´å¤šè®¨è®ºï¼Œä¼ä¸šç”¨æˆ·å¯è”ç³»[äº§å“é¡¾é—®](https://img-1317903499.cos.ap-guangzhou.myqcloud.com/docs/product-manager-qrcode.jpg)å’¨è¯¢ã€‚\n\n# ğŸŒŸ è´¡çŒ®è€…\n\n![cow contributors](https://contrib.rocks/image?repo=zhayujie/chatgpt-on-wechat&max=1000)\n"
        },
        {
          "name": "app.py",
          "type": "blob",
          "size": 1.7392578125,
          "content": "# encoding:utf-8\n\nimport os\nimport signal\nimport sys\nimport time\n\nfrom channel import channel_factory\nfrom common import const\nfrom config import load_config\nfrom plugins import *\nimport threading\n\n\ndef sigterm_handler_wrap(_signo):\n    old_handler = signal.getsignal(_signo)\n\n    def func(_signo, _stack_frame):\n        logger.info(\"signal {} received, exiting...\".format(_signo))\n        conf().save_user_datas()\n        if callable(old_handler):  #  check old_handler\n            return old_handler(_signo, _stack_frame)\n        sys.exit(0)\n\n    signal.signal(_signo, func)\n\n\ndef start_channel(channel_name: str):\n    channel = channel_factory.create_channel(channel_name)\n    if channel_name in [\"wx\", \"wxy\", \"terminal\", \"wechatmp\",\"web\", \"wechatmp_service\", \"wechatcom_app\", \"wework\",\n                        const.FEISHU, const.DINGTALK]:\n        PluginManager().load_plugins()\n\n    if conf().get(\"use_linkai\"):\n        try:\n            from common import linkai_client\n            threading.Thread(target=linkai_client.start, args=(channel,)).start()\n        except Exception as e:\n            pass\n    channel.startup()\n\n\ndef run():\n    try:\n        # load config\n        load_config()\n        # ctrl + c\n        sigterm_handler_wrap(signal.SIGINT)\n        # kill signal\n        sigterm_handler_wrap(signal.SIGTERM)\n\n        # create channel\n        channel_name = conf().get(\"channel_type\", \"wx\")\n\n        if \"--cmd\" in sys.argv:\n            channel_name = \"terminal\"\n\n        if channel_name == \"wxy\":\n            os.environ[\"WECHATY_LOG\"] = \"warn\"\n\n        start_channel(channel_name)\n\n        while True:\n            time.sleep(1)\n    except Exception as e:\n        logger.error(\"App startup failed!\")\n        logger.exception(e)\n\n\nif __name__ == \"__main__\":\n    run()\n"
        },
        {
          "name": "bot",
          "type": "tree",
          "content": null
        },
        {
          "name": "bridge",
          "type": "tree",
          "content": null
        },
        {
          "name": "channel",
          "type": "tree",
          "content": null
        },
        {
          "name": "common",
          "type": "tree",
          "content": null
        },
        {
          "name": "config-template.json",
          "type": "blob",
          "size": 1.2119140625,
          "content": "{\n  \"channel_type\": \"wx\",\n  \"model\": \"\",\n  \"open_ai_api_key\": \"YOUR API KEY\",\n  \"claude_api_key\": \"YOUR API KEY\",\n  \"text_to_image\": \"dall-e-2\",\n  \"voice_to_text\": \"openai\",\n  \"text_to_voice\": \"openai\",\n  \"proxy\": \"\",\n  \"hot_reload\": false,\n  \"single_chat_prefix\": [\n    \"bot\",\n    \"@bot\"\n  ],\n  \"single_chat_reply_prefix\": \"[bot] \",\n  \"group_chat_prefix\": [\n    \"@bot\"\n  ],\n  \"group_name_white_list\": [\n    \"ChatGPTæµ‹è¯•ç¾¤\",\n    \"ChatGPTæµ‹è¯•ç¾¤2\"\n  ],\n  \"image_create_prefix\": [\n    \"ç”»\"\n  ],\n  \"speech_recognition\": true,\n  \"group_speech_recognition\": false,\n  \"voice_reply_voice\": false,\n  \"conversation_max_tokens\": 2500,\n  \"expires_in_seconds\": 3600,\n  \"character_desc\": \"ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚\",\n  \"temperature\": 0.7,\n  \"subscribe_msg\": \"æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚\",\n  \"use_linkai\": false,\n  \"linkai_api_key\": \"\",\n  \"linkai_app_code\": \"\"\n}\n"
        },
        {
          "name": "config.py",
          "type": "blob",
          "size": 16.2626953125,
          "content": "# encoding:utf-8\n\nimport json\nimport logging\nimport os\nimport pickle\nimport copy\n\nfrom common.log import logger\n\n# å°†æ‰€æœ‰å¯ç”¨çš„é…ç½®é¡¹å†™åœ¨å­—å…¸é‡Œ, è¯·ä½¿ç”¨å°å†™å­—æ¯\n# æ­¤å¤„çš„é…ç½®å€¼æ— å®é™…æ„ä¹‰ï¼Œç¨‹åºä¸ä¼šè¯»å–æ­¤å¤„çš„é…ç½®ï¼Œä»…ç”¨äºæç¤ºæ ¼å¼ï¼Œè¯·å°†é…ç½®åŠ å…¥åˆ°config.jsonä¸­\navailable_setting = {\n    # openai apié…ç½®\n    \"open_ai_api_key\": \"\",  # openai api key\n    # openai apibaseï¼Œå½“use_azure_chatgptä¸ºtrueæ—¶ï¼Œéœ€è¦è®¾ç½®å¯¹åº”çš„api base\n    \"open_ai_api_base\": \"https://api.openai.com/v1\",\n    \"proxy\": \"\",  # openaiä½¿ç”¨çš„ä»£ç†\n    # chatgptæ¨¡å‹ï¼Œ å½“use_azure_chatgptä¸ºtrueæ—¶ï¼Œå…¶åç§°ä¸ºAzureä¸Šmodel deploymentåç§°\n    \"model\": \"gpt-3.5-turbo\",  # å¯é€‰æ‹©: gpt-4o, pt-4o-mini, gpt-4-turbo, claude-3-sonnet, wenxin, moonshot, qwen-turbo, xunfei, glm-4, minimax, geminiç­‰æ¨¡å‹ï¼Œå…¨éƒ¨å¯é€‰æ¨¡å‹è¯¦è§common/const.pyæ–‡ä»¶\n    \"bot_type\": \"\",  # å¯é€‰é…ç½®ï¼Œä½¿ç”¨å…¼å®¹openaiæ ¼å¼çš„ä¸‰æ–¹æœåŠ¡æ—¶å€™ï¼Œéœ€å¡«\"chatGPT\"ã€‚botå…·ä½“åç§°è¯¦è§common/const.pyæ–‡ä»¶åˆ—å‡ºçš„bot_typeï¼Œå¦‚ä¸å¡«æ ¹æ®modelåç§°åˆ¤æ–­ï¼Œ\n    \"use_azure_chatgpt\": False,  # æ˜¯å¦ä½¿ç”¨azureçš„chatgpt\n    \"azure_deployment_id\": \"\",  # azure æ¨¡å‹éƒ¨ç½²åç§°\n    \"azure_api_version\": \"\",  # azure apiç‰ˆæœ¬\n    # Botè§¦å‘é…ç½®\n    \"single_chat_prefix\": [\"bot\", \"@bot\"],  # ç§èŠæ—¶æ–‡æœ¬éœ€è¦åŒ…å«è¯¥å‰ç¼€æ‰èƒ½è§¦å‘æœºå™¨äººå›å¤\n    \"single_chat_reply_prefix\": \"[bot] \",  # ç§èŠæ—¶è‡ªåŠ¨å›å¤çš„å‰ç¼€ï¼Œç”¨äºåŒºåˆ†çœŸäºº\n    \"single_chat_reply_suffix\": \"\",  # ç§èŠæ—¶è‡ªåŠ¨å›å¤çš„åç¼€ï¼Œ\\n å¯ä»¥æ¢è¡Œ\n    \"group_chat_prefix\": [\"@bot\"],  # ç¾¤èŠæ—¶åŒ…å«è¯¥å‰ç¼€åˆ™ä¼šè§¦å‘æœºå™¨äººå›å¤\n    \"no_need_at\": False,  # ç¾¤èŠå›å¤æ—¶æ˜¯å¦ä¸éœ€è¦è‰¾ç‰¹\n    \"group_chat_reply_prefix\": \"\",  # ç¾¤èŠæ—¶è‡ªåŠ¨å›å¤çš„å‰ç¼€\n    \"group_chat_reply_suffix\": \"\",  # ç¾¤èŠæ—¶è‡ªåŠ¨å›å¤çš„åç¼€ï¼Œ\\n å¯ä»¥æ¢è¡Œ\n    \"group_chat_keyword\": [],  # ç¾¤èŠæ—¶åŒ…å«è¯¥å…³é”®è¯åˆ™ä¼šè§¦å‘æœºå™¨äººå›å¤\n    \"group_at_off\": False,  # æ˜¯å¦å…³é—­ç¾¤èŠæ—¶@botçš„è§¦å‘\n    \"group_name_white_list\": [\"ChatGPTæµ‹è¯•ç¾¤\", \"ChatGPTæµ‹è¯•ç¾¤2\"],  # å¼€å¯è‡ªåŠ¨å›å¤çš„ç¾¤åç§°åˆ—è¡¨\n    \"group_name_keyword_white_list\": [],  # å¼€å¯è‡ªåŠ¨å›å¤çš„ç¾¤åç§°å…³é”®è¯åˆ—è¡¨\n    \"group_chat_in_one_session\": [\"ChatGPTæµ‹è¯•ç¾¤\"],  # æ”¯æŒä¼šè¯ä¸Šä¸‹æ–‡å…±äº«çš„ç¾¤åç§°\n    \"nick_name_black_list\": [],  # ç”¨æˆ·æ˜µç§°é»‘åå•\n    \"group_welcome_msg\": \"\",  # é…ç½®æ–°äººè¿›ç¾¤å›ºå®šæ¬¢è¿è¯­ï¼Œä¸é…ç½®åˆ™ä½¿ç”¨éšæœºé£æ ¼æ¬¢è¿\n    \"trigger_by_self\": False,  # æ˜¯å¦å…è®¸æœºå™¨äººè§¦å‘\n    \"text_to_image\": \"dall-e-2\",  # å›¾ç‰‡ç”Ÿæˆæ¨¡å‹ï¼Œå¯é€‰ dall-e-2, dall-e-3\n    # Azure OpenAI dall-e-3 é…ç½®\n    \"dalle3_image_style\": \"vivid\", # å›¾ç‰‡ç”Ÿæˆdalle3çš„é£æ ¼ï¼Œå¯é€‰æœ‰ vivid, natural\n    \"dalle3_image_quality\": \"hd\", # å›¾ç‰‡ç”Ÿæˆdalle3çš„è´¨é‡ï¼Œå¯é€‰æœ‰ standard, hd\n    # Azure OpenAI DALL-E API é…ç½®, å½“use_azure_chatgptä¸ºtrueæ—¶,ç”¨äºå°†æ–‡å­—å›å¤çš„èµ„æºå’ŒDall-Eçš„èµ„æºåˆ†å¼€.\n    \"azure_openai_dalle_api_base\": \"\", # [å¯é€‰] azure openai ç”¨äºå›å¤å›¾ç‰‡çš„èµ„æº endpointï¼Œé»˜è®¤ä½¿ç”¨ open_ai_api_base\n    \"azure_openai_dalle_api_key\": \"\", # [å¯é€‰] azure openai ç”¨äºå›å¤å›¾ç‰‡çš„èµ„æº keyï¼Œé»˜è®¤ä½¿ç”¨ open_ai_api_key\n    \"azure_openai_dalle_deployment_id\":\"\", # [å¯é€‰] azure openai ç”¨äºå›å¤å›¾ç‰‡çš„èµ„æº deployment idï¼Œé»˜è®¤ä½¿ç”¨ text_to_image\n    \"image_proxy\": True,  # æ˜¯å¦éœ€è¦å›¾ç‰‡ä»£ç†ï¼Œå›½å†…è®¿é—®LinkAIæ—¶éœ€è¦\n    \"image_create_prefix\": [\"ç”»\", \"çœ‹\", \"æ‰¾\"],  # å¼€å¯å›¾ç‰‡å›å¤çš„å‰ç¼€\n    \"concurrency_in_session\": 1,  # åŒä¸€ä¼šè¯æœ€å¤šæœ‰å¤šå°‘æ¡æ¶ˆæ¯åœ¨å¤„ç†ä¸­ï¼Œå¤§äº1å¯èƒ½ä¹±åº\n    \"image_create_size\": \"256x256\",  # å›¾ç‰‡å¤§å°,å¯é€‰æœ‰ 256x256, 512x512, 1024x1024 (dall-e-3é»˜è®¤ä¸º1024x1024)\n    \"group_chat_exit_group\": False,\n    # chatgptä¼šè¯å‚æ•°\n    \"expires_in_seconds\": 3600,  # æ— æ“ä½œä¼šè¯çš„è¿‡æœŸæ—¶é—´\n    # äººæ ¼æè¿°\n    \"character_desc\": \"ä½ æ˜¯ChatGPT, ä¸€ä¸ªç”±OpenAIè®­ç»ƒçš„å¤§å‹è¯­è¨€æ¨¡å‹, ä½ æ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚\",\n    \"conversation_max_tokens\": 1000,  # æ”¯æŒä¸Šä¸‹æ–‡è®°å¿†çš„æœ€å¤šå­—ç¬¦æ•°\n    # chatgpté™æµé…ç½®\n    \"rate_limit_chatgpt\": 20,  # chatgptçš„è°ƒç”¨é¢‘ç‡é™åˆ¶\n    \"rate_limit_dalle\": 50,  # openai dalleçš„è°ƒç”¨é¢‘ç‡é™åˆ¶\n    # chatgpt apiå‚æ•° å‚è€ƒhttps://platform.openai.com/docs/api-reference/chat/create\n    \"temperature\": 0.9,\n    \"top_p\": 1,\n    \"frequency_penalty\": 0,\n    \"presence_penalty\": 0,\n    \"request_timeout\": 180,  # chatgptè¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œopenaiæ¥å£é»˜è®¤è®¾ç½®ä¸º600ï¼Œå¯¹äºéš¾é—®é¢˜ä¸€èˆ¬éœ€è¦è¾ƒé•¿æ—¶é—´\n    \"timeout\": 120,  # chatgpté‡è¯•è¶…æ—¶æ—¶é—´ï¼Œåœ¨è¿™ä¸ªæ—¶é—´å†…ï¼Œå°†ä¼šè‡ªåŠ¨é‡è¯•\n    # Baidu æ–‡å¿ƒä¸€è¨€å‚æ•°\n    \"baidu_wenxin_model\": \"eb-instant\",  # é»˜è®¤ä½¿ç”¨ERNIE-Bot-turboæ¨¡å‹\n    \"baidu_wenxin_api_key\": \"\",  # Baidu api key\n    \"baidu_wenxin_secret_key\": \"\",  # Baidu secret key\n    \"baidu_wenxin_prompt_enabled\": False,  # Enable prompt if you are using ernie character model\n    # è®¯é£æ˜Ÿç«API\n    \"xunfei_app_id\": \"\",  # è®¯é£åº”ç”¨ID\n    \"xunfei_api_key\": \"\",  # è®¯é£ API key\n    \"xunfei_api_secret\": \"\",  # è®¯é£ API secret\n    \"xunfei_domain\": \"\",  # è®¯é£æ¨¡å‹å¯¹åº”çš„domainå‚æ•°ï¼ŒSpark4.0 Ultraä¸º 4.0Ultraï¼Œå…¶ä»–æ¨¡å‹è¯¦è§: https://www.xfyun.cn/doc/spark/Web.html\n    \"xunfei_spark_url\": \"\",  # è®¯é£æ¨¡å‹å¯¹åº”çš„è¯·æ±‚åœ°å€ï¼ŒSpark4.0 Ultraä¸º wss://spark-api.xf-yun.com/v4.0/chatï¼Œå…¶ä»–æ¨¡å‹å‚è€ƒè¯¦è§: https://www.xfyun.cn/doc/spark/Web.html\n    # claude é…ç½®\n    \"claude_api_cookie\": \"\",\n    \"claude_uuid\": \"\",\n    # claude api key\n    \"claude_api_key\": \"\",\n    # é€šä¹‰åƒé—®API, è·å–æ–¹å¼æŸ¥çœ‹æ–‡æ¡£ https://help.aliyun.com/document_detail/2587494.html\n    \"qwen_access_key_id\": \"\",\n    \"qwen_access_key_secret\": \"\",\n    \"qwen_agent_key\": \"\",\n    \"qwen_app_id\": \"\",\n    \"qwen_node_id\": \"\",  # æµç¨‹ç¼–æ’æ¨¡å‹ç”¨åˆ°çš„idï¼Œå¦‚æœæ²¡æœ‰ç”¨åˆ°qwen_node_idï¼Œè¯·åŠ¡å¿…ä¿æŒä¸ºç©ºå­—ç¬¦ä¸²\n    # é˜¿é‡Œçµç§¯(é€šä¹‰æ–°ç‰ˆsdk)æ¨¡å‹api key\n    \"dashscope_api_key\": \"\",\n    # Google Gemini Api Key\n    \"gemini_api_key\": \"\",\n    # weworkçš„é€šç”¨é…ç½®\n    \"wework_smart\": True,  # é…ç½®weworkæ˜¯å¦ä½¿ç”¨å·²ç™»å½•çš„ä¼ä¸šå¾®ä¿¡ï¼ŒFalseä¸ºå¤šå¼€\n    # è¯­éŸ³è®¾ç½®\n    \"speech_recognition\": True,  # æ˜¯å¦å¼€å¯è¯­éŸ³è¯†åˆ«\n    \"group_speech_recognition\": False,  # æ˜¯å¦å¼€å¯ç¾¤ç»„è¯­éŸ³è¯†åˆ«\n    \"voice_reply_voice\": False,  # æ˜¯å¦ä½¿ç”¨è¯­éŸ³å›å¤è¯­éŸ³ï¼Œéœ€è¦è®¾ç½®å¯¹åº”è¯­éŸ³åˆæˆå¼•æ“çš„api key\n    \"always_reply_voice\": False,  # æ˜¯å¦ä¸€ç›´ä½¿ç”¨è¯­éŸ³å›å¤\n    \"voice_to_text\": \"openai\",  # è¯­éŸ³è¯†åˆ«å¼•æ“ï¼Œæ”¯æŒopenai,baidu,google,azure,xunfei,ali\n    \"text_to_voice\": \"openai\",  # è¯­éŸ³åˆæˆå¼•æ“ï¼Œæ”¯æŒopenai,baidu,google,azure,xunfei,ali,pytts(offline),elevenlabs,edge(online)\n    \"text_to_voice_model\": \"tts-1\",\n    \"tts_voice_id\": \"alloy\",\n    # baidu è¯­éŸ³apié…ç½®ï¼Œ ä½¿ç”¨ç™¾åº¦è¯­éŸ³è¯†åˆ«å’Œè¯­éŸ³åˆæˆæ—¶éœ€è¦\n    \"baidu_app_id\": \"\",\n    \"baidu_api_key\": \"\",\n    \"baidu_secret_key\": \"\",\n    # 1536æ™®é€šè¯(æ”¯æŒç®€å•çš„è‹±æ–‡è¯†åˆ«) 1737è‹±è¯­ 1637ç²¤è¯­ 1837å››å·è¯ 1936æ™®é€šè¯è¿œåœº\n    \"baidu_dev_pid\": 1536,\n    # azure è¯­éŸ³apié…ç½®ï¼Œ ä½¿ç”¨azureè¯­éŸ³è¯†åˆ«å’Œè¯­éŸ³åˆæˆæ—¶éœ€è¦\n    \"azure_voice_api_key\": \"\",\n    \"azure_voice_region\": \"japaneast\",\n    # elevenlabs è¯­éŸ³apié…ç½®\n    \"xi_api_key\": \"\",  # è·å–apçš„æ–¹æ³•å¯ä»¥å‚è€ƒhttps://docs.elevenlabs.io/api-reference/quick-start/authentication\n    \"xi_voice_id\": \"\",  # ElevenLabsæä¾›äº†9ç§è‹±å¼ã€ç¾å¼ç­‰è‹±è¯­å‘éŸ³idï¼Œåˆ†åˆ«æ˜¯â€œAdam/Antoni/Arnold/Bella/Domi/Elli/Josh/Rachel/Samâ€\n    # æœåŠ¡æ—¶é—´é™åˆ¶ï¼Œç›®å‰æ”¯æŒitchat\n    \"chat_time_module\": False,  # æ˜¯å¦å¼€å¯æœåŠ¡æ—¶é—´é™åˆ¶\n    \"chat_start_time\": \"00:00\",  # æœåŠ¡å¼€å§‹æ—¶é—´\n    \"chat_stop_time\": \"24:00\",  # æœåŠ¡ç»“æŸæ—¶é—´\n    # ç¿»è¯‘api\n    \"translate\": \"baidu\",  # ç¿»è¯‘apiï¼Œæ”¯æŒbaidu\n    # baiduç¿»è¯‘apiçš„é…ç½®\n    \"baidu_translate_app_id\": \"\",  # ç™¾åº¦ç¿»è¯‘apiçš„appid\n    \"baidu_translate_app_key\": \"\",  # ç™¾åº¦ç¿»è¯‘apiçš„ç§˜é’¥\n    # itchatçš„é…ç½®\n    \"hot_reload\": False,  # æ˜¯å¦å¼€å¯çƒ­é‡è½½\n    # wechatyçš„é…ç½®\n    \"wechaty_puppet_service_token\": \"\",  # wechatyçš„token\n    # wechatmpçš„é…ç½®\n    \"wechatmp_token\": \"\",  # å¾®ä¿¡å…¬ä¼—å¹³å°çš„Token\n    \"wechatmp_port\": 8080,  # å¾®ä¿¡å…¬ä¼—å¹³å°çš„ç«¯å£,éœ€è¦ç«¯å£è½¬å‘åˆ°80æˆ–443\n    \"wechatmp_app_id\": \"\",  # å¾®ä¿¡å…¬ä¼—å¹³å°çš„appID\n    \"wechatmp_app_secret\": \"\",  # å¾®ä¿¡å…¬ä¼—å¹³å°çš„appsecret\n    \"wechatmp_aes_key\": \"\",  # å¾®ä¿¡å…¬ä¼—å¹³å°çš„EncodingAESKeyï¼ŒåŠ å¯†æ¨¡å¼éœ€è¦\n    # wechatcomçš„é€šç”¨é…ç½®\n    \"wechatcom_corp_id\": \"\",  # ä¼ä¸šå¾®ä¿¡å…¬å¸çš„corpID\n    # wechatcomappçš„é…ç½®\n    \"wechatcomapp_token\": \"\",  # ä¼ä¸šå¾®ä¿¡appçš„token\n    \"wechatcomapp_port\": 9898,  # ä¼ä¸šå¾®ä¿¡appçš„æœåŠ¡ç«¯å£,ä¸éœ€è¦ç«¯å£è½¬å‘\n    \"wechatcomapp_secret\": \"\",  # ä¼ä¸šå¾®ä¿¡appçš„secret\n    \"wechatcomapp_agent_id\": \"\",  # ä¼ä¸šå¾®ä¿¡appçš„agent_id\n    \"wechatcomapp_aes_key\": \"\",  # ä¼ä¸šå¾®ä¿¡appçš„aes_key\n    # é£ä¹¦é…ç½®\n    \"feishu_port\": 80,  # é£ä¹¦botç›‘å¬ç«¯å£\n    \"feishu_app_id\": \"\",  # é£ä¹¦æœºå™¨äººåº”ç”¨APP Id\n    \"feishu_app_secret\": \"\",  # é£ä¹¦æœºå™¨äººAPP secret\n    \"feishu_token\": \"\",  # é£ä¹¦ verification token\n    \"feishu_bot_name\": \"\",  # é£ä¹¦æœºå™¨äººçš„åå­—\n    # é’‰é’‰é…ç½®\n    \"dingtalk_client_id\": \"\",  # é’‰é’‰æœºå™¨äººClient ID \n    \"dingtalk_client_secret\": \"\",  # é’‰é’‰æœºå™¨äººClient Secret\n    \"dingtalk_card_enabled\": False,\n    \n    # chatgptæŒ‡ä»¤è‡ªå®šä¹‰è§¦å‘è¯\n    \"clear_memory_commands\": [\"#æ¸…é™¤è®°å¿†\"],  # é‡ç½®ä¼šè¯æŒ‡ä»¤ï¼Œå¿…é¡»ä»¥#å¼€å¤´\n    # channelé…ç½®\n    \"channel_type\": \"\",  # é€šé“ç±»å‹ï¼Œæ”¯æŒï¼š{wx,wxy,terminal,wechatmp,wechatmp_service,wechatcom_app,dingtalk}\n    \"subscribe_msg\": \"\",  # è®¢é˜…æ¶ˆæ¯, æ”¯æŒ: wechatmp, wechatmp_service, wechatcom_app\n    \"debug\": False,  # æ˜¯å¦å¼€å¯debugæ¨¡å¼ï¼Œå¼€å¯åä¼šæ‰“å°æ›´å¤šæ—¥å¿—\n    \"appdata_dir\": \"\",  # æ•°æ®ç›®å½•\n    # æ’ä»¶é…ç½®\n    \"plugin_trigger_prefix\": \"$\",  # è§„èŒƒæ’ä»¶æä¾›èŠå¤©ç›¸å…³æŒ‡ä»¤çš„å‰ç¼€ï¼Œå»ºè®®ä¸è¦å’Œç®¡ç†å‘˜æŒ‡ä»¤å‰ç¼€\"#\"å†²çª\n    # æ˜¯å¦ä½¿ç”¨å…¨å±€æ’ä»¶é…ç½®\n    \"use_global_plugin_config\": False,\n    \"max_media_send_count\": 3,  # å•æ¬¡æœ€å¤§å‘é€åª’ä½“èµ„æºçš„ä¸ªæ•°\n    \"media_send_interval\": 1,  # å‘é€å›¾ç‰‡çš„äº‹ä»¶é—´éš”ï¼Œå•ä½ç§’\n    # æ™ºè°±AI å¹³å°é…ç½®\n    \"zhipu_ai_api_key\": \"\",\n    \"zhipu_ai_api_base\": \"https://open.bigmodel.cn/api/paas/v4\",\n    \"moonshot_api_key\": \"\",\n    \"moonshot_base_url\": \"https://api.moonshot.cn/v1/chat/completions\",\n    # LinkAIå¹³å°é…ç½®\n    \"use_linkai\": False,\n    \"linkai_api_key\": \"\",\n    \"linkai_app_code\": \"\",\n    \"linkai_api_base\": \"https://api.link-ai.tech\",  # linkAIæœåŠ¡åœ°å€\n    \"Minimax_api_key\": \"\",\n    \"Minimax_group_id\": \"\",\n    \"Minimax_base_url\": \"\",\n    \"web_port\": 9899,\n}\n\n\nclass Config(dict):\n    def __init__(self, d=None):\n        super().__init__()\n        if d is None:\n            d = {}\n        for k, v in d.items():\n            self[k] = v\n        # user_datas: ç”¨æˆ·æ•°æ®ï¼Œkeyä¸ºç”¨æˆ·åï¼Œvalueä¸ºç”¨æˆ·æ•°æ®ï¼Œä¹Ÿæ˜¯dict\n        self.user_datas = {}\n\n    def __getitem__(self, key):\n        if key not in available_setting:\n            raise Exception(\"key {} not in available_setting\".format(key))\n        return super().__getitem__(key)\n\n    def __setitem__(self, key, value):\n        if key not in available_setting:\n            raise Exception(\"key {} not in available_setting\".format(key))\n        return super().__setitem__(key, value)\n\n    def get(self, key, default=None):\n        try:\n            return self[key]\n        except KeyError as e:\n            return default\n        except Exception as e:\n            raise e\n\n    # Make sure to return a dictionary to ensure atomic\n    def get_user_data(self, user) -> dict:\n        if self.user_datas.get(user) is None:\n            self.user_datas[user] = {}\n        return self.user_datas[user]\n\n    def load_user_datas(self):\n        try:\n            with open(os.path.join(get_appdata_dir(), \"user_datas.pkl\"), \"rb\") as f:\n                self.user_datas = pickle.load(f)\n                logger.info(\"[Config] User datas loaded.\")\n        except FileNotFoundError as e:\n            logger.info(\"[Config] User datas file not found, ignore.\")\n        except Exception as e:\n            logger.info(\"[Config] User datas error: {}\".format(e))\n            self.user_datas = {}\n\n    def save_user_datas(self):\n        try:\n            with open(os.path.join(get_appdata_dir(), \"user_datas.pkl\"), \"wb\") as f:\n                pickle.dump(self.user_datas, f)\n                logger.info(\"[Config] User datas saved.\")\n        except Exception as e:\n            logger.info(\"[Config] User datas error: {}\".format(e))\n\n\nconfig = Config()\n\n\ndef drag_sensitive(config):\n    try:\n        if isinstance(config, str):\n            conf_dict: dict = json.loads(config)\n            conf_dict_copy = copy.deepcopy(conf_dict)\n            for key in conf_dict_copy:\n                if \"key\" in key or \"secret\" in key:\n                    if isinstance(conf_dict_copy[key], str):\n                        conf_dict_copy[key] = conf_dict_copy[key][0:3] + \"*\" * 5 + conf_dict_copy[key][-3:]\n            return json.dumps(conf_dict_copy, indent=4)\n\n        elif isinstance(config, dict):\n            config_copy = copy.deepcopy(config)\n            for key in config:\n                if \"key\" in key or \"secret\" in key:\n                    if isinstance(config_copy[key], str):\n                        config_copy[key] = config_copy[key][0:3] + \"*\" * 5 + config_copy[key][-3:]\n            return config_copy\n    except Exception as e:\n        logger.exception(e)\n        return config\n    return config\n\n\ndef load_config():\n    global config\n    config_path = \"./config.json\"\n    if not os.path.exists(config_path):\n        logger.info(\"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†ä½¿ç”¨config-template.jsonæ¨¡æ¿\")\n        config_path = \"./config-template.json\"\n\n    config_str = read_file(config_path)\n    logger.debug(\"[INIT] config str: {}\".format(drag_sensitive(config_str)))\n\n    # å°†jsonå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºdictç±»å‹\n    config = Config(json.loads(config_str))\n\n    # override config with environment variables.\n    # Some online deployment platforms (e.g. Railway) deploy project from github directly. So you shouldn't put your secrets like api key in a config file, instead use environment variables to override the default config.\n    for name, value in os.environ.items():\n        name = name.lower()\n        if name in available_setting:\n            logger.info(\"[INIT] override config by environ args: {}={}\".format(name, value))\n            try:\n                config[name] = eval(value)\n            except:\n                if value == \"false\":\n                    config[name] = False\n                elif value == \"true\":\n                    config[name] = True\n                else:\n                    config[name] = value\n\n    if config.get(\"debug\", False):\n        logger.setLevel(logging.DEBUG)\n        logger.debug(\"[INIT] set log level to DEBUG\")\n\n    logger.info(\"[INIT] load config: {}\".format(drag_sensitive(config)))\n\n    config.load_user_datas()\n\n\ndef get_root():\n    return os.path.dirname(os.path.abspath(__file__))\n\n\ndef read_file(path):\n    with open(path, mode=\"r\", encoding=\"utf-8\") as f:\n        return f.read()\n\n\ndef conf():\n    return config\n\n\ndef get_appdata_dir():\n    data_path = os.path.join(get_root(), conf().get(\"appdata_dir\", \"\"))\n    if not os.path.exists(data_path):\n        logger.info(\"[INIT] data path not exists, create it: {}\".format(data_path))\n        os.makedirs(data_path)\n    return data_path\n\n\ndef subscribe_msg():\n    trigger_prefix = conf().get(\"single_chat_prefix\", [\"\"])[0]\n    msg = conf().get(\"subscribe_msg\", \"\")\n    return msg.format(trigger_prefix=trigger_prefix)\n\n\n# global plugin config\nplugin_config = {}\n\n\ndef write_plugin_config(pconf: dict):\n    \"\"\"\n    å†™å…¥æ’ä»¶å…¨å±€é…ç½®\n    :param pconf: å…¨é‡æ’ä»¶é…ç½®\n    \"\"\"\n    global plugin_config\n    for k in pconf:\n        plugin_config[k.lower()] = pconf[k]\n\ndef remove_plugin_config(name: str):\n    \"\"\"\n    ç§»é™¤å¾…é‡æ–°åŠ è½½çš„æ’ä»¶å…¨å±€é…ç½®\n    :param name: å¾…é‡è½½çš„æ’ä»¶å\n    \"\"\"\n    global plugin_config\n    plugin_config.pop(name.lower(), None)\n\n\ndef pconf(plugin_name: str) -> dict:\n    \"\"\"\n    æ ¹æ®æ’ä»¶åç§°è·å–é…ç½®\n    :param plugin_name: æ’ä»¶åç§°\n    :return: è¯¥æ’ä»¶çš„é…ç½®é¡¹\n    \"\"\"\n    return plugin_config.get(plugin_name.lower())\n\n\n# å…¨å±€é…ç½®ï¼Œç”¨äºå­˜æ”¾å…¨å±€ç”Ÿæ•ˆçš„çŠ¶æ€\nglobal_config = {\"admin_users\": []}\n"
        },
        {
          "name": "docker",
          "type": "tree",
          "content": null
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "lib",
          "type": "tree",
          "content": null
        },
        {
          "name": "nixpacks.toml",
          "type": "blob",
          "size": 0.32421875,
          "content": "[phases.setup]\nnixPkgs = ['python310']\ncmds = ['apt-get update','apt-get install -y --no-install-recommends ffmpeg espeak libavcodec-extra']\n[phases.install]\ncmds = ['python -m venv /opt/venv && . /opt/venv/bin/activate && pip install -r requirements.txt && pip install -r requirements-optional.txt']\n[start]\ncmd = \"python ./app.py\""
        },
        {
          "name": "plugins",
          "type": "tree",
          "content": null
        },
        {
          "name": "pyproject.toml",
          "type": "blob",
          "size": 0.1572265625,
          "content": "[tool.black]\nline-length = 176\ntarget-version = ['py37']\ninclude = '\\.pyi?$'\nextend-exclude = '.+/(dist|.venv|venv|build|lib)/.+'\n\n[tool.isort]\nprofile = \"black\""
        },
        {
          "name": "requirements-optional.txt",
          "type": "blob",
          "size": 0.7021484375,
          "content": "tiktoken>=0.3.2 # openai calculate token\n\n#voice\npydub>=0.25.1 # need ffmpeg\nSpeechRecognition # google speech to text\ngTTS>=2.3.1 # google text to speech\npyttsx3>=2.90 # pytsx text to speech\nbaidu_aip>=4.16.10 # baidu voice\nazure-cognitiveservices-speech # azure voice\nedge-tts # edge-tts\nnumpy<=1.24.2\nlangid # language detect\nelevenlabs==1.0.3 # elevenlabs TTS\n\n#install plugin\ndulwich\n\n# wechatmp && wechatcom\nweb.py\nwechatpy\n\n# chatgpt-tool-hub plugin\nchatgpt_tool_hub==0.5.0\n\n# xunfei spark\nwebsocket-client==1.2.0\n\n# claude bot\ncurl_cffi\n# claude API\nanthropic\n\n# tongyi qwen\nbroadscope_bailian\n\n# google\ngoogle-generativeai\n\n# dingtalk\ndingtalk_stream\n\n# zhipuai\nzhipuai>=2.0.1\n\n# tongyi qwen new sdk\ndashscope\n"
        },
        {
          "name": "requirements.txt",
          "type": "blob",
          "size": 0.1328125,
          "content": "openai==0.27.8\nHTMLParser>=0.0.2\nPyQRCode==1.2.1\nqrcode==7.4.2\nrequests>=2.28.2\nchardet>=5.1.0\nPillow\npre-commit\nweb.py\nlinkai>=0.0.6.0\n"
        },
        {
          "name": "run.sh",
          "type": "blob",
          "size": 6.072265625,
          "content": "#!/usr/bin/env bash\nset -e\n\n# é¢œè‰²å®šä¹‰\nRED='\\033[0;31m'    # çº¢è‰²\nGREEN='\\033[0;32m'  # ç»¿è‰²\nYELLOW='\\033[0;33m' # é»„è‰²\nBLUE='\\033[0;34m'   # è“è‰²\nNC='\\033[0m'        # æ— é¢œè‰²\n\n# è·å–å½“å‰è„šæœ¬çš„ç›®å½•\nexport BASE_DIR=$(cd \"$(dirname \"$0\")\"; pwd)\necho -e \"${GREEN}ğŸ“ BASE_DIR: ${BASE_DIR}${NC}\"\n\n# æ£€æŸ¥ config.json æ–‡ä»¶æ˜¯å¦å­˜åœ¨\ncheck_config_file() {\n    if [ ! -f \"${BASE_DIR}/config.json\" ]; then\n        echo -e \"${RED}âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ° config.json æ–‡ä»¶ã€‚è¯·ç¡®ä¿ config.json å­˜åœ¨äºå½“å‰ç›®å½•ã€‚${NC}\"\n        exit 1\n    fi\n}\n\n# æ£€æŸ¥ Python ç‰ˆæœ¬æ˜¯å¦å¤§äºç­‰äº 3.7ï¼Œå¹¶æ£€æŸ¥ pip æ˜¯å¦å¯ç”¨\ncheck_python_version() {\n    if ! command -v python3 &> /dev/null; then\n        echo -e \"${RED}âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ° Python3ã€‚è¯·å®‰è£… Python 3.7 æˆ–ä»¥ä¸Šç‰ˆæœ¬ã€‚${NC}\"\n        exit 1\n    fi\n\n    PYTHON_VERSION=$(python3 -c 'import sys; print(f\"{sys.version_info.major}.{sys.version_info.minor}\")')\n    PYTHON_MAJOR=$(echo \"$PYTHON_VERSION\" | cut -d'.' -f1)\n    PYTHON_MINOR=$(echo \"$PYTHON_VERSION\" | cut -d'.' -f2)\n\n    if (( PYTHON_MAJOR < 3 || (PYTHON_MAJOR == 3 && PYTHON_MINOR < 7) )); then\n        echo -e \"${RED}âŒ é”™è¯¯ï¼šPython ç‰ˆæœ¬ä¸º ${PYTHON_VERSION}ã€‚è¯·å®‰è£… Python 3.7 æˆ–ä»¥ä¸Šç‰ˆæœ¬ã€‚${NC}\"\n        exit 1\n    fi\n\n    if ! python3 -m pip --version &> /dev/null; then\n        echo -e \"${RED}âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ° pipã€‚è¯·å®‰è£… pipã€‚${NC}\"\n        exit 1\n    fi\n}\n\n# æ£€æŸ¥å¹¶å®‰è£…ç¼ºå¤±çš„ä¾èµ–\ninstall_dependencies() {\n    echo -e \"${YELLOW}â³ æ­£åœ¨å®‰è£…ä¾èµ–...${NC}\"\n\n    if [ ! -f \"${BASE_DIR}/requirements.txt\" ]; then\n        echo -e \"${RED}âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ° requirements.txt æ–‡ä»¶ã€‚${NC}\"\n        exit 1\n    fi\n\n    # å®‰è£… requirements.txt ä¸­çš„ä¾èµ–ï¼Œä½¿ç”¨æ¸…åå¤§å­¦çš„ PyPI é•œåƒ\n     pip3 install -r \"${BASE_DIR}/requirements.txt\" -i https://pypi.tuna.tsinghua.edu.cn/simple\n\n    # å¤„ç† requirements-optional.txtï¼ˆå¦‚æœå­˜åœ¨ï¼‰\n    if [ -f \"${BASE_DIR}/requirements-optional.txt\" ]; then\n        echo -e \"${YELLOW}â³ æ­£åœ¨å®‰è£…å¯é€‰çš„ä¾èµ–...${NC}\"\n        pip3 install -r \"${BASE_DIR}/requirements-optional.txt\" -i https://pypi.tuna.tsinghua.edu.cn/simple\n    fi\n}\n\n# å¯åŠ¨é¡¹ç›®\nrun_project() {\n    echo -e \"${GREEN}ğŸš€ å‡†å¤‡å¯åŠ¨é¡¹ç›®...${NC}\"\n    cd \"${BASE_DIR}\"\n    sleep 2\n\n\n    # åˆ¤æ–­æ“ä½œç³»ç»Ÿç±»å‹\n    OS_TYPE=$(uname)\n\n    if [[ \"$OS_TYPE\" == \"Linux\" ]]; then\n        # åœ¨ Linux ä¸Šä½¿ç”¨ setsid\n        setsid python3 \"${BASE_DIR}/app.py\" > \"${BASE_DIR}/nohup.out\" 2>&1 &\n        echo -e \"${GREEN}ğŸš€ æ­£åœ¨å¯åŠ¨ ChatGPT-on-WeChat (Linux)...${NC}\"\n    elif [[ \"$OS_TYPE\" == \"Darwin\" ]]; then\n        # åœ¨ macOS ä¸Šç›´æ¥è¿è¡Œ\n        python3 \"${BASE_DIR}/app.py\" > \"${BASE_DIR}/nohup.out\" 2>&1 &\n        echo -e \"${GREEN}ğŸš€ æ­£åœ¨å¯åŠ¨ ChatGPT-on-WeChat (macOS)...${NC}\"\n    else\n        echo -e \"${RED}âŒ é”™è¯¯ï¼šä¸æ”¯æŒçš„æ“ä½œç³»ç»Ÿ ${OS_TYPE}ã€‚${NC}\"\n        exit 1\n    fi\n\n    sleep 2\n    # æ˜¾ç¤ºæ—¥å¿—è¾“å‡ºï¼Œä¾›ç”¨æˆ·æ‰«ç \n    tail -n 30 -f \"${BASE_DIR}/nohup.out\"\n\n}\n# æ›´æ–°é¡¹ç›®\nupdate_project() {\n    echo -e \"${GREEN}ğŸ”„ å‡†å¤‡æ›´æ–°é¡¹ç›®ï¼Œç°åœ¨åœæ­¢é¡¹ç›®...${NC}\"\n    cd \"${BASE_DIR}\"\n\n    # åœæ­¢é¡¹ç›®\n    stop_project\n    echo -e \"${GREEN}ğŸ”„ å¼€å§‹æ›´æ–°é¡¹ç›®...${NC}\"\n    # æ›´æ–°ä»£ç ï¼Œä» git ä»“åº“æ‹‰å–æœ€æ–°ä»£ç \n    if [ -d .git ]; then\n        GIT_PULL_OUTPUT=$(git pull)\n        if [ $? -eq 0 ]; then\n            if [[ \"$GIT_PULL_OUTPUT\" == *\"Already up to date.\"* ]]; then\n                echo -e \"${GREEN}âœ… ä»£ç å·²ç»æ˜¯æœ€æ–°çš„ã€‚${NC}\"\n            else\n                echo -e \"${GREEN}âœ… ä»£ç æ›´æ–°å®Œæˆã€‚${NC}\"\n            fi\n        else\n            echo -e \"${YELLOW}âš ï¸ ä» GitHub æ›´æ–°å¤±è´¥ï¼Œå°è¯•åˆ‡æ¢åˆ° Gitee ä»“åº“...${NC}\"\n            # æ›´æ”¹è¿œç¨‹ä»“åº“ä¸º Gitee\n            git remote set-url origin https://gitee.com/zhayujie/chatgpt-on-wechat.git\n            GIT_PULL_OUTPUT=$(git pull)\n            if [ $? -eq 0 ]; then\n                if [[ \"$GIT_PULL_OUTPUT\" == *\"Already up to date.\"* ]]; then\n                    echo -e \"${GREEN}âœ… ä»£ç å·²ç»æ˜¯æœ€æ–°çš„ã€‚${NC}\"\n                else\n                    echo -e \"${GREEN}âœ… ä» Gitee æ›´æ–°æˆåŠŸã€‚${NC}\"\n                fi\n            else\n                echo -e \"${RED}âŒ é”™è¯¯ï¼šä» Gitee æ›´æ–°ä»ç„¶å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚${NC}\"\n                exit 1\n            fi\n        fi\n    else\n        echo -e \"${RED}âŒ é”™è¯¯ï¼šå½“å‰ç›®å½•ä¸æ˜¯ git ä»“åº“ï¼Œæ— æ³•æ›´æ–°ä»£ç ã€‚${NC}\"\n        exit 1\n    fi\n\n    # å®‰è£…ä¾èµ–\n    install_dependencies\n\n    # å¯åŠ¨é¡¹ç›®\n    run_project\n}\n\n# åœæ­¢é¡¹ç›®\nstop_project() {\n    echo -e \"${GREEN}ğŸ›‘ æ­£åœ¨åœæ­¢é¡¹ç›®...${NC}\"\n    cd \"${BASE_DIR}\"\n    pid=$(ps ax | grep -i app.py | grep \"${BASE_DIR}\" | grep python3 | grep -v grep | awk '{print $1}')\n    if [ -z \"$pid\" ] ; then\n        echo -e \"${YELLOW}âš ï¸ æœªæ‰¾åˆ°æ­£åœ¨è¿è¡Œçš„ ChatGPT-on-WeChatã€‚${NC}\"\n        return\n    fi\n\n    echo -e \"${GREEN}ğŸ›‘ æ­£åœ¨è¿è¡Œçš„ ChatGPT-on-WeChat (PID: ${pid})${NC}\"\n\n    kill ${pid}\n    sleep 3\n\n    if ps -p $pid > /dev/null; then\n        echo -e \"${YELLOW}âš ï¸ è¿›ç¨‹æœªåœæ­¢ï¼Œå°è¯•å¼ºåˆ¶ç»ˆæ­¢...${NC}\"\n        kill -9 ${pid}\n    fi\n\n    echo -e \"${GREEN}âœ… å·²åœæ­¢ ChatGPT-on-WeChat (PID: ${pid})${NC}\"\n}\n\n# ä¸»å‡½æ•°ï¼Œæ ¹æ®ç”¨æˆ·å‚æ•°æ‰§è¡Œæ“ä½œ\ncase \"$1\" in\n    start)\n        check_config_file\n        check_python_version\n        run_project\n        ;;\n    stop)\n        stop_project\n        ;;\n    restart)\n        stop_project\n        check_config_file\n        check_python_version\n        run_project\n        ;;\n    update)\n        check_config_file\n        check_python_version\n        update_project\n        ;;\n    *)\n        echo -e \"${YELLOW}=========================================${NC}\"\n        echo -e \"${YELLOW}ç”¨æ³•ï¼š${GREEN}$0 ${BLUE}{start|stop|restart|update}${NC}\"\n        echo -e \"${YELLOW}ç¤ºä¾‹ï¼š${NC}\"\n        echo -e \"  ${GREEN}$0 ${BLUE}start${NC}\"\n        echo -e \"  ${GREEN}$0 ${BLUE}stop${NC}\"\n        echo -e \"  ${GREEN}$0 ${BLUE}restart${NC}\"\n        echo -e \"  ${GREEN}$0 ${BLUE}update${NC}\"\n        echo -e \"${YELLOW}=========================================${NC}\"\n        exit 1\n        ;;\nesac"
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "translate",
          "type": "tree",
          "content": null
        },
        {
          "name": "voice",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}