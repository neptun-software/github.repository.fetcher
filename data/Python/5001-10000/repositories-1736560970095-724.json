{
  "metadata": {
    "timestamp": 1736560970095,
    "page": 724,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjczMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "ihmily/DouyinLiveRecorder",
      "stars": 5447,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".dockerignore",
          "type": "blob",
          "size": 0.080078125,
          "content": ".github/workflows/build-image.yml\n.git\n.gitignore\n.dockerignore\nREADME.md\nLICENSE\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 3.015625,
          "content": "# Byte-compiled / optimized / DLL files\n__pycache__/\n*.py[cod]\n*$py.class\n\n# C extensions\n*.so\n\n# Distribution / packaging\n.Python\nbuild/\ndevelop-eggs/\ndist/\ndownloads/\neggs/\n.eggs/\nlib/\nlib64/\nparts/\nsdist/\nvar/\nwheels/\nshare/python-wheels/\n*.egg-info/\n.installed.cfg\n*.egg\nMANIFEST\n\n# PyInstaller\n#  Usually these files are written by a python script from a template\n#  before PyInstaller builds the exe, so as to inject date/other infos into it.\n*.manifest\n*.spec\n\n# Installer logs\npip-log.txt\npip-delete-this-directory.txt\n\n# Unit test / coverage reports\nhtmlcov/\n.tox/\n.nox/\n.coverage\n.coverage.*\n.cache\nnosetests.xml\ncoverage.xml\n*.cover\n*.py,cover\n.hypothesis/\n.pytest_cache/\ncover/\n\n# Translations\n*.pot\n\n# Django stuff:\n*.log\nlocal_settings.py\ndb.sqlite3\ndb.sqlite3-journal\n\n# Flask stuff:\ninstance/\n.webassets-cache\n\n# Scrapy stuff:\n.scrapy\n\n# Sphinx documentation\ndocs/_build/\n\n# PyBuilder\n.pybuilder/\ntarget/\n\n# Jupyter Notebook\n.ipynb_checkpoints\n\n# IPython\nprofile_default/\nipython_config.py\n\n# pyenv\n#   For a library or package, you might want to ignore these files since the code is\n#   intended to run in multiple environments; otherwise, check them in:\n# .python-version\n\n# pipenv\n#   According to pypa/pipenv#598, it is recommended to include Pipfile.lock in version control.\n#   However, in case of collaboration, if having platform-specific dependencies or dependencies\n#   having no cross-platform support, pipenv may install dependencies that don't work, or not\n#   install all needed dependencies.\n#Pipfile.lock\n\n# poetry\n#   Similar to Pipfile.lock, it is generally recommended to include poetry.lock in version control.\n#   This is especially recommended for binary packages to ensure reproducibility, and is more\n#   commonly ignored for libraries.\n#   https://python-poetry.org/docs/basic-usage/#commit-your-poetrylock-file-to-version-control\npoetry.lock\n\n# pdm\n#   Similar to Pipfile.lock, it is generally recommended to include pdm.lock in version control.\n#pdm.lock\n#   pdm stores project-wide configurations in .pdm.toml, but it is recommended to not include it\n#   in version control.\n#   https://pdm.fming.dev/#use-with-ide\n.pdm.toml\n\n# PEP 582; used by e.g. github.com/David-OConnor/pyflow and github.com/pdm-project/pdm\n__pypackages__/\n\n# Celery stuff\ncelerybeat-schedule\ncelerybeat.pid\n\n# SageMath parsed files\n*.sage.py\n\n# Environments\n.env\n.venv\nenv/\nvenv/\nENV/\nenv.bak/\nvenv.bak/\n\n# Spyder project settings\n.spyderproject\n.spyproject\n\n# Rope project settings\n.ropeproject\n\n# mkdocs documentation\n/site\n\n# mypy\n.mypy_cache/\n.dmypy.json\ndmypy.json\n\n# Pyre type checker\n.pyre/\n\n# pytype static type analyzer\n.pytype/\n\n# Cython debug symbols\ncython_debug/\n\n# PyCharm\n#  JetBrains specific template is maintained in a separate JetBrains.gitignore that can\n#  be found at https://github.com/github/gitignore/blob/main/Global/JetBrains.gitignore\n#  and can be added to the global gitignore or merged into this file.  For a more nuclear\n#  option (not recommended) you can uncomment the following to ignore the entire idea folder.\n#.idea/\n\nbackup_config/\n"
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 0.455078125,
          "content": "FROM python:3.11-slim\n\nWORKDIR /app\n\nCOPY . /app\n\nRUN apt-get update && \\\n    apt-get install -y curl gnupg && \\\n    curl -sL https://deb.nodesource.com/setup_20.x  | bash - && \\\n    apt-get install -y nodejs\n\nRUN pip install --no-cache-dir -r requirements.txt\n\nRUN apt-get update && \\\n    apt-get install -y ffmpeg tzdata && \\\n    ln -fs /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && \\\n    dpkg-reconfigure -f noninteractive tzdata\n\nCMD [\"python\", \"main.py\"]\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.037109375,
          "content": "MIT License\n\nCopyright (c) 2023 Hmily\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 18.5947265625,
          "content": "![video_spider](https://socialify.git.ci/ihmily/DouyinLiveRecorder/image?font=Inter&forks=1&language=1&owner=1&pattern=Circuit%20Board&stargazers=1&theme=Light)\n\n## ğŸ’¡ç®€ä»‹\n[![Python Version](https://img.shields.io/badge/python-3.11.6-blue.svg)](https://www.python.org/downloads/release/python-3116/)\n[![Supported Platforms](https://img.shields.io/badge/platforms-Windows%20%7C%20Linux-blue.svg)](https://github.com/ihmily/DouyinLiveRecorder)\n[![Docker Pulls](https://img.shields.io/docker/pulls/ihmily/douyin-live-recorder?label=Docker%20Pulls&color=blue&logo=docker)](https://hub.docker.com/r/ihmily/douyin-live-recorder/tags)\n![GitHub issues](https://img.shields.io/github/issues/ihmily/DouyinLiveRecorder.svg)\n[![Latest Release](https://img.shields.io/github/v/release/ihmily/DouyinLiveRecorder)](https://github.com/ihmily/DouyinLiveRecorder/releases/latest)\n[![Downloads](https://img.shields.io/github/downloads/ihmily/DouyinLiveRecorder/total)](https://github.com/ihmily/DouyinLiveRecorder/releases/latest)\n\nä¸€æ¬¾**ç®€æ˜“**çš„å¯å¾ªç¯å€¼å®ˆçš„ç›´æ’­å½•åˆ¶å·¥å…·ï¼ŒåŸºäºFFmpegå®ç°å¤šå¹³å°ç›´æ’­æºå½•åˆ¶ï¼Œæ”¯æŒè‡ªå®šä¹‰é…ç½®å½•åˆ¶ä»¥åŠç›´æ’­çŠ¶æ€æ¨é€ã€‚\n\n</div>\n\n## ğŸ˜ºå·²æ”¯æŒå¹³å°\n\n- [x] æŠ–éŸ³\n- [x] TikTok\n- [x] å¿«æ‰‹\n- [x] è™ç‰™\n- [x] æ–—é±¼\n- [x] YY\n- [x] Bç«™\n- [x] å°çº¢ä¹¦\n- [x] bigo \n- [x] blued\n- [x] SOOP(åŸAfreecaTV)\n- [x] ç½‘æ˜“cc\n- [x] åƒåº¦çƒ­æ’­\n- [x] PandaTV\n- [x] çŒ«è€³FM\n- [x] Lookç›´æ’­\n- [x] WinkTV\n- [x] FlexTV\n- [x] PopkonTV\n- [x] TwitCasting\n- [x] ç™¾åº¦ç›´æ’­\n- [x] å¾®åšç›´æ’­\n- [x] é…·ç‹—ç›´æ’­\n- [x] TwitchTV\n- [x] LiveMe\n- [x] èŠ±æ¤’ç›´æ’­\n- [x] æµæ˜Ÿç›´æ’­\n- [x] ShowRoom\n- [x] Acfun\n- [x] æ˜ å®¢ç›´æ’­\n- [x] éŸ³æ’­ç›´æ’­\n- [x] çŸ¥ä¹ç›´æ’­\n- [x] CHZZK\n- [x] å—¨ç§€ç›´æ’­\n- [x] vvæ˜Ÿçƒç›´æ’­\n- [x] 17Live\n- [x] æµªLive\n- [x] ç•…èŠç›´æ’­\n- [x] é£˜é£˜ç›´æ’­\n- [x] å…­é—´æˆ¿ç›´æ’­\n- [x] ä¹å—¨ç›´æ’­\n- [x] èŠ±çŒ«ç›´æ’­\n- [x] Shopee\n- [x] Youtube\n- [ ] æ›´å¤šå¹³å°æ­£åœ¨æ›´æ–°ä¸­\n\n</div>\n\n## ğŸˆé¡¹ç›®ç»“æ„\n\n```\n.\nâ””â”€â”€ DouyinLiveRecorder/\n    â”œâ”€â”€ /config -> (config record)\n    â”œâ”€â”€ /logs -> (save runing log file)\n    â”œâ”€â”€ /backup_config -> (backup file)\n    â”œâ”€â”€ /douyinliverecorder -> (package)\n        â”œâ”€â”€ initializer.py-> (check and install nodejs)\n    \tâ”œâ”€â”€ spider.py-> (get live data)\n    \tâ”œâ”€â”€ stream.py-> (get live stream address)\n    \tâ”œâ”€â”€ utils.py -> (contains utility functions)\n    \tâ”œâ”€â”€ logger.py -> (logger handdle)\n    \tâ”œâ”€â”€ room.py -> (get room info)\n    \tâ”œâ”€â”€ /javascript -> (some decrypt code)\n    â”œâ”€â”€ main.py -> (main file)\n    â”œâ”€â”€ ffmpeg_install.py -> (ffmpeg install script)\n    â”œâ”€â”€ demo.py -> (call package test demo)\n    â”œâ”€â”€ msg_push.py -> (send live status update message)\n    â”œâ”€â”€ ffmpeg.exe -> (record video)\n    â”œâ”€â”€ index.html -> (play m3u8 and flv video)\n    â”œâ”€â”€ requirements.txt -> (library dependencies)\n    â”œâ”€â”€ docker-compose.yaml -> (Container Orchestration File)\n    â”œâ”€â”€ Dockerfile -> (Application Build Recipe)\n    â”œâ”€â”€ StopRecording.vbs -> (stop recording script on Windows)\n    ...\n```\n\n</div>\n\n## ğŸŒ±ä½¿ç”¨è¯´æ˜\n\n- å¯¹äºåªæƒ³ä½¿ç”¨å½•åˆ¶è½¯ä»¶çš„å°ç™½ç”¨æˆ·ï¼Œè¿›å…¥[Releases](https://github.com/ihmily/DouyinLiveRecorder/releases) ä¸­ä¸‹è½½æœ€æ–°å‘å¸ƒçš„ zipå‹ç¼©åŒ…å³å¯ï¼Œé‡Œé¢æœ‰æ‰“åŒ…å¥½çš„å½•åˆ¶è½¯ä»¶ã€‚ï¼ˆæœ‰äº›ç”µè„‘å¯èƒ½ä¼šæŠ¥æ¯’ï¼Œç›´æ¥å¿½ç•¥å³å¯ï¼Œå¦‚æœä¸‹è½½æ—¶è¢«æµè§ˆå™¨å±è”½ï¼Œè¯·æ›´æ¢æµè§ˆå™¨ä¸‹è½½ï¼‰\n\n- å‹ç¼©åŒ…è§£å‹åï¼Œåœ¨ `config` æ–‡ä»¶å¤¹å†…çš„ `URL_config.ini` ä¸­æ·»åŠ å½•åˆ¶ç›´æ’­é—´åœ°å€ï¼Œä¸€è¡Œä¸€ä¸ªç›´æ’­é—´åœ°å€ã€‚å¦‚æœè¦è‡ªå®šä¹‰é…ç½®å½•åˆ¶ï¼Œå¯ä»¥ä¿®æ”¹`config.ini` æ–‡ä»¶ï¼Œæ¨èå°†å½•åˆ¶æ ¼å¼ä¿®æ”¹ä¸º`ts`ã€‚\n- ä»¥ä¸Šæ­¥éª¤éƒ½åšå¥½åï¼Œå°±å¯ä»¥è¿è¡Œ`DouyinLiveRecorder.exe` ç¨‹åºè¿›è¡Œå½•åˆ¶äº†ã€‚å½•åˆ¶çš„è§†é¢‘æ–‡ä»¶ä¿å­˜åœ¨åŒç›®å½•ä¸‹çš„ `downloads` æ–‡ä»¶å¤¹å†…ã€‚\n\n- å¦å¤–ï¼Œå¦‚æœéœ€è¦å½•åˆ¶TikTokã€AfreecaTVç­‰æµ·å¤–å¹³å°ï¼Œè¯·åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯ä»£ç†å¹¶æ·»åŠ proxy_addré“¾æ¥ å¦‚ï¼š`127.0.0.1:7890` ï¼ˆè¿™åªæ˜¯ç¤ºä¾‹åœ°å€ï¼Œå…·ä½“æ ¹æ®å®é™…å¡«å†™ï¼‰ã€‚\n\n- å‡å¦‚`URL_config.ini`æ–‡ä»¶ä¸­æ·»åŠ çš„ç›´æ’­é—´åœ°å€ï¼Œæœ‰ä¸ªåˆ«ç›´æ’­é—´æš‚æ—¶ä¸æƒ³å½•åˆ¶åˆä¸æƒ³ç§»é™¤é“¾æ¥ï¼Œå¯ä»¥åœ¨å¯¹åº”ç›´æ’­é—´çš„é“¾æ¥å¼€å¤´åŠ ä¸Š`#`ï¼Œé‚£ä¹ˆå°†åœæ­¢è¯¥ç›´æ’­é—´çš„ç›‘æµ‹ä»¥åŠå½•åˆ¶ã€‚\n\n- è½¯ä»¶é»˜è®¤å½•åˆ¶æ¸…æ™°åº¦ä¸º `åŸç”»` ï¼Œå¦‚æœè¦å•ç‹¬è®¾ç½®æŸä¸ªç›´æ’­é—´çš„å½•åˆ¶ç”»è´¨ï¼Œå¯ä»¥åœ¨æ·»åŠ ç›´æ’­é—´åœ°å€æ—¶å‰é¢åŠ ä¸Šç”»è´¨å³å¯ï¼Œå¦‚`è¶…æ¸…ï¼Œhttps://live.douyin.com/745964462470` è®°å¾—ä¸­é—´è¦æœ‰`,` åˆ†éš”ã€‚\n\n- å¦‚æœè¦é•¿æ—¶é—´æŒ‚ç€è½¯ä»¶å¾ªç¯ç›‘æµ‹ç›´æ’­ï¼Œæœ€å¥½å¾ªç¯æ—¶é—´è®¾ç½®é•¿ä¸€ç‚¹ï¼ˆå’±ä¹Ÿä¸å·®æ²¡å½•åˆ¶åˆ°çš„é‚£å‡ åˆ†é’Ÿï¼‰ï¼Œé¿å…å› è¯·æ±‚é¢‘ç¹å¯¼è‡´è¢«å®˜æ–¹å°ç¦IP ã€‚\n\n- è¦åœæ­¢ç›´æ’­å½•åˆ¶ï¼ŒWindowså¹³å°å¯æ‰§è¡ŒStopRecording.vbsè„šæœ¬æ–‡ä»¶ï¼Œæˆ–è€…åœ¨å½•åˆ¶ç•Œé¢ä½¿ç”¨ `Ctrl+C ` ç»„åˆé”®ä¸­æ–­å½•åˆ¶ï¼Œè‹¥è¦åœæ­¢å…¶ä¸­æŸä¸ªç›´æ’­é—´çš„å½•åˆ¶ï¼Œå¯åœ¨`URL_config.ini`æ–‡ä»¶ä¸­çš„åœ°å€å‰åŠ #ï¼Œä¼šè‡ªåŠ¨åœæ­¢å¯¹åº”ç›´æ’­é—´çš„å½•åˆ¶å¹¶æ­£å¸¸ä¿å­˜å·²å½•åˆ¶çš„è§†é¢‘ã€‚\n- æœ€åï¼Œæ¬¢è¿å³ä¸Šè§’ç»™æœ¬é¡¹ç›®ä¸€ä¸ªstarï¼ŒåŒæ—¶ä¹Ÿéå¸¸ä¹æ„å¤§å®¶æäº¤prã€‚\n\n&emsp;\n\nç›´æ’­é—´é“¾æ¥ç¤ºä¾‹ï¼š\n\n```\næŠ–éŸ³ï¼š\nhttps://live.douyin.com/745964462470\nhttps://v.douyin.com/iQFeBnt/\nhttps://live.douyin.com/yall1102  ï¼ˆé“¾æ¥+æŠ–éŸ³å·ï¼‰\nhttps://v.douyin.com/CeiU5cbX  ï¼ˆä¸»æ’­ä¸»é¡µåœ°å€ï¼‰\n\nTikTokï¼š\nhttps://www.tiktok.com/@pearlgaga88/live\n\nå¿«æ‰‹ï¼š\nhttps://live.kuaishou.com/u/yall1102\n\nè™ç‰™ï¼š\nhttps://www.huya.com/52333\n\næ–—é±¼ï¼š\nhttps://www.douyu.com/3637778?dyshid=\nhttps://www.douyu.com/topic/wzDBLS6?rid=4921614&dyshid=\n\nYY:\nhttps://www.yy.com/22490906/22490906\n\nBç«™ï¼š\nhttps://live.bilibili.com/320\n\nå°çº¢ä¹¦ï¼ˆæ¨èä½¿ç”¨ä¸»é¡µåœ°å€)ï¼š\nhttps://www.xiaohongshu.com/user/profile/6330049c000000002303c7ed?appuid=5f3f478a00000000010005b3\nhttp://xhslink.com/xpJpfM\n\nbigoç›´æ’­ï¼š\nhttps://www.bigo.tv/cn/716418802\n\nbuledç›´æ’­ï¼š\nhttps://app.blued.cn/live?id=Mp6G2R\n\nSOOPï¼š\nhttps://play.sooplive.co.kr/sw7love\n\nç½‘æ˜“ccï¼š\nhttps://cc.163.com/583946984\n\nåƒåº¦çƒ­æ’­ï¼š\nhttps://qiandurebo.com/web/video.php?roomnumber=33333\n\nPandaTVï¼š\nhttps://www.pandalive.co.kr/live/play/bara0109\n\nçŒ«è€³FMï¼š\nhttps://fm.missevan.com/live/868895007\n\nLookç›´æ’­:\nhttps://look.163.com/live?id=65108820&position=3\n\nWinkTV:\nhttps://www.winktv.co.kr/live/play/anjer1004\n\nFlexTV:\nhttps://www.flextv.co.kr/channels/593127/live\n\nPopkonTV:\nhttps://www.popkontv.com/live/view?castId=wjfal007&partnerCode=P-00117\nhttps://www.popkontv.com/channel/notices?mcid=wjfal007&mcPartnerCode=P-00117\n\nTwitCasting:\nhttps://twitcasting.tv/c:uonq\n\nç™¾åº¦ç›´æ’­:\nhttps://live.baidu.com/m/media/pclive/pchome/live.html?room_id=9175031377&tab_category\n\nå¾®åšç›´æ’­:\nhttps://weibo.com/l/wblive/p/show/1022:2321325026370190442592\n\né…·ç‹—ç›´æ’­:\nhttps://fanxing2.kugou.com/50428671?refer=2177&sourceFrom=\n\nTwitchTV:\nhttps://www.twitch.tv/gamerbee\n\nLiveMe:\nhttps://www.liveme.com/zh/v/17141543493018047815/index.html\n\nèŠ±æ¤’ç›´æ’­:\nhttps://www.huajiao.com/l/345096174\n\næµæ˜Ÿç›´æ’­:\nhttps://www.7u66.com/100960\n\nShowRoom:\nhttps://www.showroom-live.com/room/profile?room_id=480206  ï¼ˆä¸»æ’­ä¸»é¡µåœ°å€ï¼‰\n\nAcfun:\nhttps://live.acfun.cn/live/179922\n\næ˜ å®¢ç›´æ’­ï¼š\nhttps://www.inke.cn/liveroom/index.html?uid=22954469&id=1720860391070904\n\néŸ³æ’­ç›´æ’­ï¼š\nhttps://live.ybw1666.com/800002949\n\nçŸ¥ä¹ç›´æ’­:\nhttps://www.zhihu.com/people/ac3a467005c5d20381a82230101308e9 (ä¸»æ’­ä¸»é¡µåœ°å€)\n\nCHZZK:\nhttps://chzzk.naver.com/live/458f6ec20b034f49e0fc6d03921646d2\n\nå—¨ç§€ç›´æ’­:\nhttps://www.haixiutv.com/6095106\n\nVVæ˜Ÿçƒç›´æ’­:\nhttps://h5webcdn-pro.vvxqiu.com//activity/videoShare/videoShare.html?h5Server=https://h5p.vvxqiu.com&roomId=LP115924473&platformId=vvstar\n\n17Live:\nhttps://17.live/en/live/6302408\n\næµªLive:\nhttps://www.lang.live/en-US/room/3349463\n\nç•…èŠç›´æ’­:\nhttps://www.tlclw.com/801044397\n\né£˜é£˜ç›´æ’­:\nhttps://m.pp.weimipopo.com/live/preview.html?uid=91648673&anchorUid=91625862&app=plpl\n\nå…­é—´æˆ¿ç›´æ’­:\nhttps://v.6.cn/634435\n\nä¹å—¨ç›´æ’­:\nhttps://www.lehaitv.com/8059096\n\nèŠ±çŒ«ç›´æ’­:\nhttps://h.catshow168.com/live/preview.html?uid=19066357&anchorUid=18895331\n\nShopee:\nhttps://sg.shp.ee/GmpXeuf?uid=1006401066&session=802458\n\nYoutube:\nhttps://www.youtube.com/watch?v=cS6zS5hi1w0\n```\n\n&emsp;\n\n## ğŸƒæºç è¿è¡Œ\nä½¿ç”¨æºç è¿è¡Œï¼Œå‰æè¦æœ‰**Python>=3.10**ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰è¯·å…ˆè‡ªè¡Œå®‰è£…Pythonï¼Œå†æ‰§è¡Œä¸‹é¢æ­¥éª¤ã€‚\n\n1.é¦–å…ˆæ‹‰å–æˆ–æ‰‹åŠ¨ä¸‹è½½æœ¬ä»“åº“é¡¹ç›®ä»£ç \n\n```bash\ngit clone https://github.com/ihmily/DouyinLiveRecorder.git\n```\n\n2.è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå®‰è£…ä¾èµ–\n\n```bash\ncd DouyinLiveRecorder\npip3 install -r requirements.txt\n```\n\n3.å®‰è£…[FFmpeg](https://ffmpeg.org/download.html#build-linux)ï¼Œå¦‚æœæ˜¯Windowsç³»ç»Ÿï¼Œè¿™ä¸€æ­¥å¯è·³è¿‡ã€‚å¯¹äºLinuxç³»ç»Ÿï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…\n\nCentOSæ‰§è¡Œ\n\n```bash\nyum install epel-release\nyum install ffmpeg\n```\n\nUbuntuåˆ™æ‰§è¡Œ\n\n```bash\napt update\napt install ffmpeg\n```\n\nmacOS æ‰§è¡Œ\n\n**å¦‚æœå·²ç»å®‰è£… Homebrew è¯·è·³è¿‡è¿™ä¸€æ­¥**\n\n```bash\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n```\n\n```bash\nbrew install ffmpeg\n```\n\n4.è¿è¡Œç¨‹åº\n\n```python\npython main.py\n```\n\nå…¶ä¸­Linuxç³»ç»Ÿè¯·ä½¿ç”¨`python3 main.py` è¿è¡Œã€‚\n\n&emsp;\n## ğŸ‹å®¹å™¨è¿è¡Œ\n\nåœ¨è¿è¡Œå‘½ä»¤ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„æœºå™¨ä¸Šå®‰è£…äº† [Docker](https://docs.docker.com/get-docker/) å’Œ [Docker Compose](https://docs.docker.com/compose/install/) \n\n1.å¿«é€Ÿå¯åŠ¨\n\næœ€ç®€å•æ–¹æ³•æ˜¯è¿è¡Œé¡¹ç›®ä¸­çš„ [docker-compose.yaml](https://github.com/ihmily/DouyinLiveRecorder/blob/main/docker-compose.yaml) æ–‡ä»¶ï¼Œåªéœ€ç®€å•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n```bash\ndocker-compose up\n```\n\nå¯é€‰ `-d` åœ¨åå°è¿è¡Œã€‚\n\n\n\n2.æ„å»ºé•œåƒ(å¯é€‰)\n\nå¦‚æœä½ åªæƒ³ç®€å•çš„è¿è¡Œç¨‹åºï¼Œåˆ™ä¸éœ€è¦åšè¿™ä¸€æ­¥ã€‚Dockeré•œåƒä»“åº“ä¸­ä»£ç ç‰ˆæœ¬å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼Œå¦‚æœè¦è¿è¡Œæœ¬ä»“åº“ä¸»åˆ†æ”¯æœ€æ–°ä»£ç ï¼Œå¯ä»¥æœ¬åœ°è‡ªå®šä¹‰æ„å»ºï¼Œé€šè¿‡ä¿®æ”¹ [docker-compose.yaml](https://github.com/ihmily/DouyinLiveRecorder/blob/main/docker-compose.yaml) æ–‡ä»¶ï¼Œå¦‚å°†é•œåƒåä¿®æ”¹ä¸º `douyin-live-recorder:latest`ï¼Œå¹¶å–æ¶ˆ `# build: .` æ³¨é‡Šï¼Œç„¶åå†æ‰§è¡Œ\n\n```bash\ndocker build -t douyin-live-recorder:latest .\ndocker-compose up\n```\n\næˆ–è€…ç›´æ¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤è¿›è¡Œæ„å»ºå¹¶å¯åŠ¨\n\n```bash\ndocker-compose -f docker-compose.yaml up\n```\n\n\n\n3.åœæ­¢å®¹å™¨å®ä¾‹\n\n```bash\ndocker-compose stop\n```\n\n\n\n4.æ³¨æ„äº‹é¡¹\n\nâ‘ åœ¨dockerå®¹å™¨å†…è¿è¡Œæœ¬ç¨‹åºä¹‹å‰ï¼Œè¯·å…ˆåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¦å½•åˆ¶çš„ç›´æ’­é—´åœ°å€ã€‚\n\nâ‘¡åœ¨å®¹å™¨å†…æ—¶ï¼Œå¦‚æœæ‰‹åŠ¨ä¸­æ–­å®¹å™¨è¿è¡Œåœæ­¢å½•åˆ¶ï¼Œä¼šå¯¼è‡´æ­£åœ¨å½•åˆ¶çš„è§†é¢‘æ–‡ä»¶æŸåï¼\n\n**æ— è®ºå“ªç§è¿è¡Œæ–¹å¼ï¼Œä¸ºé¿å…æ‰‹åŠ¨ä¸­æ–­æˆ–è€…å¼‚å¸¸ä¸­æ–­å¯¼è‡´å½•åˆ¶çš„è§†é¢‘æ–‡ä»¶æŸåçš„æƒ…å†µï¼Œæ¨èä½¿ç”¨ `ts` æ ¼å¼ä¿å­˜**ã€‚\n\n&emsp;\n\n## â¤ï¸è´¡çŒ®è€…\n\n&ensp;&ensp; [![Hmily](https://github.com/ihmily.png?size=50)](https://github.com/ihmily)\n[![iridescentGray](https://github.com/iridescentGray.png?size=50)](https://github.com/iridescentGray)\n[![annidy](https://github.com/annidy.png?size=50)](https://github.com/annidy)\n[![wwkk2580](https://github.com/wwkk2580.png?size=50)](https://github.com/wwkk2580)\n[![missuo](https://github.com/missuo.png?size=50)](https://github.com/missuo)\n<a href=\"https://github.com/xueli12\" target=\"_blank\"><img src=\"https://github.com/xueli12.png?size=50\" alt=\"xueli12\" style=\"width:53px; height:51px;\" /></a>\n<a href=\"https://github.com/kaine1973\" target=\"_blank\"><img src=\"https://github.com/kaine1973.png?size=50\" alt=\"kaine1973\" style=\"width:53px; height:51px;\" /></a>\n<a href=\"https://github.com/yinruiqing\" target=\"_blank\"><img src=\"https://github.com/yinruiqing.png?size=50\" alt=\"yinruiqing\" style=\"width:53px; height:51px;\" /></a>\n<a href=\"https://github.com/Max-Tortoise\" target=\"_blank\"><img src=\"https://github.com/Max-Tortoise.png?size=50\" alt=\"Max-Tortoise\" style=\"width:53px; height:51px;\" /></a>\n[![justdoiting](https://github.com/justdoiting.png?size=50)](https://github.com/justdoiting)\n[![dhbxs](https://github.com/dhbxs.png?size=50)](https://github.com/dhbxs)\n[![wujiyu115](https://github.com/wujiyu115.png?size=50)](https://github.com/wujiyu115)\n[![zhanghao333](https://github.com/zhanghao333.png?size=50)](https://github.com/zhanghao333)\n<a href=\"https://github.com/gyc0123\" target=\"_blank\"><img src=\"https://github.com/gyc0123.png?size=50\" alt=\"gyc0123\" style=\"width:53px; height:51px;\" /></a>\n\n&ensp;&ensp; [![HoratioShaw](https://github.com/HoratioShaw.png?size=50)](https://github.com/HoratioShaw)\n[![nov30th](https://github.com/nov30th.png?size=50)](https://github.com/nov30th)\n&emsp;\n\n## â³æäº¤æ—¥å¿—\n\n- 20241130\n  - æ–°å¢shopeeã€youtubeç›´æ’­å½•åˆ¶\n  - æ–°å¢æ”¯æŒè‡ªå®šä¹‰m3u8ã€flvåœ°å€å½•åˆ¶\n  - æ–°å¢è‡ªå®šä¹‰æ‰§è¡Œè„šæœ¬ï¼Œæ”¯æŒpythonã€batã€bashç­‰\n  - ä¿®å¤YYç›´æ’­ã€èŠ±æ¤’ç›´æ’­å’Œå°çº¢ä¹¦ç›´æ’­å½•åˆ¶\n  - ä¿®å¤bç«™æ ‡é¢˜è·å–é”™è¯¯\n  - ä¿®å¤logæ—¥å¿—é”™è¯¯\n- 20241030\n  - æ–°å¢å—¨ç§€ç›´æ’­ã€vvæ˜Ÿçƒç›´æ’­ã€17Liveã€æµªLiveã€SOOPã€ç•…èŠç›´æ’­(åŸæ—¶å…‰ç›´æ’­)ã€é£˜é£˜ç›´æ’­ã€å…­é—´æˆ¿ç›´æ’­ã€ä¹å—¨ç›´æ’­ã€èŠ±çŒ«ç›´æ’­ç­‰10ä¸ªå¹³å°ç›´æ’­å½•åˆ¶\n  - ä¿®å¤å°çº¢ä¹¦ç›´æ’­å½•åˆ¶ï¼Œæ”¯æŒå°çº¢ä¹¦ä½œè€…ä¸»é¡µåœ°å€å½•åˆ¶ç›´æ’­\n  - æ–°å¢æ”¯æŒntfyæ¶ˆæ¯æ¨é€ï¼Œä»¥åŠæ–°å¢æ”¯æŒæ‰¹é‡æ¨é€å¤šä¸ªåœ°å€ï¼ˆé€—å·åˆ†éš”å¤šä¸ªæ¨é€åœ°å€)\n  - ä¿®å¤Livemeç›´æ’­å½•åˆ¶ã€twitchç›´æ’­å½•åˆ¶\n  - æ–°å¢Windowså¹³å°ä¸€é”®åœæ­¢å½•åˆ¶VBè„šæœ¬ç¨‹åº\n- 20241005\n  - æ–°å¢é‚®ç®±å’ŒBarkæ¨é€\n  - æ–°å¢ç›´æ’­æ³¨é‡Šåœæ­¢å½•åˆ¶\n  - ä¼˜åŒ–åˆ†æ®µå½•åˆ¶\n  - é‡æ„éƒ¨åˆ†ä»£ç \n- 20240928\n  - æ–°å¢çŸ¥ä¹ç›´æ’­ã€CHZZKç›´æ’­å½•åˆ¶\n  - ä¿®å¤éŸ³æ’­ç›´æ’­å½•åˆ¶\n- 20240903\n  - æ–°å¢æŠ–éŸ³åŒå±å½•åˆ¶ã€éŸ³æ’­ç›´æ’­å½•åˆ¶\n  - ä¿®å¤PandaTVã€bigoç›´æ’­å½•åˆ¶\n- 20240713\n  - æ–°å¢æ˜ å®¢ç›´æ’­å½•åˆ¶\n- 20240705\n  - æ–°å¢æ—¶å…‰ç›´æ’­å½•åˆ¶\n- 20240701\n  - ä¿®å¤è™ç‰™ç›´æ’­å½•åˆ¶2åˆ†é’Ÿæ–­æµé—®é¢˜\n  - æ–°å¢è‡ªå®šä¹‰ç›´æ’­æ¨é€å†…å®¹\n- 20240621\n  - æ–°å¢Acfunã€ShowRoomç›´æ’­å½•åˆ¶\n  - ä¿®å¤å¾®åšå½•åˆ¶ã€æ–°å¢ç›´æ’­æºçº¿è·¯\n  - ä¿®å¤æ–—é±¼ç›´æ’­60å¸§å½•åˆ¶\n  - ä¿®å¤é…·ç‹—ç›´æ’­å½•åˆ¶\n  - ä¿®å¤TikTokéƒ¨åˆ†æ— æ³•è§£æç›´æ’­æº\n  - ä¿®å¤æŠ–éŸ³æ— æ³•å½•åˆ¶è¿éº¦ç›´æ’­\n- 20240510\n  - ä¿®å¤éƒ¨åˆ†è™ç‰™ç›´æ’­é—´å½•åˆ¶é”™è¯¯\n- 20240508\n  - ä¿®å¤èŠ±æ¤’ç›´æ’­å½•åˆ¶\n  - æ›´æ”¹æ–‡ä»¶è·¯å¾„è§£ææ–¹å¼ [@kaine1973](https://github.com/kaine1973)\n- 20240506\n  - ä¿®å¤æŠ–éŸ³å½•åˆ¶ç”»è´¨è§£æbug\n  - ä¿®å¤è™ç‰™å½•åˆ¶ 60å¸§æœ€é«˜ç”»è´¨é—®é¢˜\n  - æ–°å¢æµæ˜Ÿç›´æ’­å½•åˆ¶\n- 20240427\n  - æ–°å¢LiveMeã€èŠ±æ¤’ç›´æ’­å½•åˆ¶\n- 20240425\n  - æ–°å¢TwitchTVç›´æ’­å½•åˆ¶\n- 20240424\n  - æ–°å¢é…·ç‹—ç›´æ’­å½•åˆ¶ã€ä¼˜åŒ–PopkonTVç›´æ’­å½•åˆ¶\n- 20240423\n  - æ–°å¢ç™¾åº¦ç›´æ’­å½•åˆ¶ã€å¾®åšç›´æ’­å½•åˆ¶\n  - ä¿®å¤æ–—é±¼å½•åˆ¶ç›´æ’­å›æ”¾çš„é—®é¢˜\n  - æ–°å¢ç›´æ’­æºåœ°å€æ˜¾ç¤ºä»¥åŠè¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶è®¾ç½®\n- 20240311\n  - ä¿®å¤æµ·å¤–å¹³å°å½•åˆ¶bugï¼Œå¢åŠ ç”»è´¨é€‰æ‹©ï¼Œå¢å¼ºå½•åˆ¶ç¨³å®šæ€§\n  - ä¿®å¤è™ç‰™å½•åˆ¶bug (è™ç‰™`ä¸€èµ·çœ‹`é¢‘é“ æœ‰ç‰¹æ®Šé™åˆ¶ï¼Œæœ‰æ—¶æ— æ³•å½•åˆ¶)\n- 20240309\n  - ä¿®å¤è™ç‰™ç›´æ’­ã€å°çº¢ä¹¦ç›´æ’­å’ŒBç«™ç›´æ’­å½•åˆ¶\n  - æ–°å¢5ä¸ªç›´æ’­å¹³å°å½•åˆ¶ï¼ŒåŒ…æ‹¬winktvã€flextvã€lookã€popkontvã€twitcasting\n  - æ–°å¢éƒ¨åˆ†æµ·å¤–å¹³å°è´¦å·å¯†ç é…ç½®ï¼Œå®ç°è‡ªåŠ¨ç™»å½•å¹¶æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„cookie\n  - æ–°å¢è‡ªå®šä¹‰é…ç½®éœ€è¦ä½¿ç”¨ä»£ç†å½•åˆ¶çš„å¹³å°\n  - æ–°å¢åªæ¨é€å¼€æ’­æ¶ˆæ¯ä¸è¿›è¡Œå½•åˆ¶è®¾ç½®\n  - ä¿®å¤äº†ä¸€äº›bug\n- 20240209\n  - ä¼˜åŒ–AfreecaTVå½•åˆ¶ï¼Œæ–°å¢è´¦å·å¯†ç ç™»å½•è·å–cookieä»¥åŠæŒä¹…ä¿å­˜\n  - ä¿®å¤äº†å°çº¢ä¹¦ç›´æ’­å› å®˜æ–¹æ›´æ–°ç›´æ’­åŸŸåï¼Œå¯¼è‡´æ— æ³•å½•åˆ¶ç›´æ’­çš„é—®é¢˜\n  - ä¿®å¤äº†æ›´æ–°URLé…ç½®æ–‡ä»¶çš„bug\n  - æœ€åï¼Œç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼\n\n<details><summary>ç‚¹å‡»å±•å¼€æ›´å¤šæäº¤æ—¥å¿—</summary>\n\n- 20240129\n  - æ–°å¢çŒ«è€³FMç›´æ’­å½•åˆ¶\n- 20240127\n  - æ–°å¢åƒåº¦çƒ­æ’­ç›´æ’­å½•åˆ¶ã€æ–°å¢pandaTV(éŸ©å›½)ç›´æ’­å½•åˆ¶\n  - æ–°å¢telegramç›´æ’­çŠ¶æ€æ¶ˆæ¯æ¨é€ï¼Œä¿®å¤äº†æŸäº›bug\n  - æ–°å¢è‡ªå®šä¹‰è®¾ç½®ä¸åŒç›´æ’­é—´çš„å½•åˆ¶ç”»è´¨(å³æ¯ä¸ªç›´æ’­é—´å½•åˆ¶ç”»è´¨å¯ä¸åŒ)\n  - ä¿®æ”¹å½•åˆ¶è§†é¢‘ä¿å­˜è·¯å¾„ä¸º `downloads` æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åˆ†å¹³å°è¿›è¡Œä¿å­˜ã€‚\n- 20240114\n  - æ–°å¢ç½‘æ˜“ccç›´æ’­å½•åˆ¶ï¼Œä¼˜åŒ–ffmpegå‚æ•°ï¼Œä¿®æ”¹AfreecaTVè¾“å…¥ç›´æ’­åœ°å€æ ¼å¼\n  - ä¿®æ”¹æ—¥å¿—è®°å½•å™¨ @[iridescentGray](https://github.com/iridescentGray)\n- 20240102\n  - ä¿®å¤Linuxä¸Šè¿è¡Œï¼Œæ–°å¢dockeré…ç½®æ–‡ä»¶\n- 20231210\n  - ä¿®å¤å½•åˆ¶åˆ†æ®µbugï¼Œä¿®å¤bigoå½•åˆ¶æ£€æµ‹bug\n  - æ–°å¢è‡ªå®šä¹‰ä¿®æ”¹å½•åˆ¶ä¸»æ’­å\n  - æ–°å¢AfreecaTVç›´æ’­å½•åˆ¶ï¼Œä¿®å¤æŸäº›å¯èƒ½ä¼šå‘ç”Ÿçš„bug\n- 20231207\n  - æ–°å¢bluedç›´æ’­å½•åˆ¶ï¼Œä¿®å¤YYç›´æ’­å½•åˆ¶ï¼Œæ–°å¢ç›´æ’­ç»“æŸæ¶ˆæ¯æ¨é€\n- 20231206\n  - æ–°å¢bigoç›´æ’­å½•åˆ¶\n- 20231203\n  - æ–°å¢å°çº¢ä¹¦ç›´æ’­å½•åˆ¶ï¼ˆå…¨ç½‘é¦–å‘ï¼‰ï¼Œç›®å‰å°çº¢ä¹¦å®˜æ–¹æ²¡æœ‰åˆ‡æ¢æ¸…æ™°åº¦åŠŸèƒ½ï¼Œå› æ­¤ç›´æ’­å½•åˆ¶ä¹Ÿåªæœ‰é»˜è®¤ç”»è´¨\n  - å°çº¢ä¹¦å½•åˆ¶æš‚æ—¶æ— æ³•å¾ªç¯ç›‘æµ‹ï¼Œæ¯æ¬¡ä¸»æ’­å¼€å¯ç›´æ’­ï¼Œéƒ½è¦é‡æ–°è·å–ä¸€æ¬¡é“¾æ¥\n  - è·å–é“¾æ¥çš„æ–¹å¼ä¸º å°†ç›´æ’­é—´è½¬å‘åˆ°å¾®ä¿¡ï¼Œåœ¨å¾®ä¿¡ä¸­æ‰“å¼€åï¼Œå¤åˆ¶é¡µé¢çš„é“¾æ¥ã€‚\n- 20231030\n  - æœ¬æ¬¡æ›´æ–°åªæ˜¯è¿›è¡Œä¿®å¤ï¼Œæ²¡æ—¶é—´æ–°å¢åŠŸèƒ½ã€‚\n  - æ¬¢è¿å„ä½å¤§ä½¬æpr å¸®å¿™æ›´æ–°ç»´æŠ¤\n- 20230930\n  - æ–°å¢æŠ–éŸ³ä»æ¥å£è·å–ç›´æ’­æµï¼Œå¢å¼ºç¨³å®šæ€§\n  - ä¿®æ”¹å¿«æ‰‹è·å–ç›´æ’­æµçš„æ–¹å¼ï¼Œæ”¹ç”¨ä»å®˜æ–¹æ¥å£è·å–\n  - ç¥å¤§å®¶ä¸­ç§‹èŠ‚å¿«ä¹ï¼\n- 20230919\n  - ä¿®å¤äº†å¿«æ‰‹ç‰ˆæœ¬æ›´æ–°åå½•åˆ¶å‡ºé”™çš„é—®é¢˜ï¼Œå¢åŠ äº†å…¶è‡ªåŠ¨è·å–cookie(~~ç¨³å®šæ€§æœªçŸ¥~~)\n  - ä¿®å¤äº†TikTokæ˜¾ç¤ºæ­£åœ¨ç›´æ’­ä½†ä¸è¿›è¡Œå½•åˆ¶çš„é—®é¢˜\n- 20230907\n  - ä¿®å¤äº†å› æŠ–éŸ³å®˜æ–¹æ›´æ–°äº†ç‰ˆæœ¬å¯¼è‡´çš„å½•åˆ¶å‡ºé”™ä»¥åŠçŸ­é“¾æ¥è½¬æ¢å‡ºé”™\n  - ä¿®å¤Bç«™æ— æ³•å½•åˆ¶åŸç”»è§†é¢‘çš„bug\n  - ä¿®æ”¹äº†é…ç½®æ–‡ä»¶å­—æ®µï¼Œæ–°å¢å„å¹³å°è‡ªå®šä¹‰è®¾ç½®Cookie\n- 20230903\n  - ä¿®å¤äº†TikTokå½•åˆ¶æ—¶æŠ¥644æ— æ³•å½•åˆ¶çš„é—®é¢˜\n  - æ–°å¢ç›´æ’­çŠ¶æ€æ¨é€åˆ°é’‰é’‰å’Œå¾®ä¿¡çš„åŠŸèƒ½ï¼Œå¦‚æœ‰éœ€è¦è¯·çœ‹ [è®¾ç½®æ¨é€æ•™ç¨‹](https://d04vqdiqwr3.feishu.cn/docx/XFPwdDDvfobbzlxhmMYcvouynDh?from=from_copylink)\n  - æœ€è¿‘æ¯”è¾ƒå¿™ï¼Œå…¶ä»–é—®é¢˜æœ‰æ—¶é—´å†æ›´æ–°\n- 20230816\n  - ä¿®å¤æ–—é±¼ç›´æ’­ï¼ˆå®˜æ–¹æ›´æ–°äº†å­—æ®µï¼‰å’Œå¿«æ‰‹ç›´æ’­å½•åˆ¶å‡ºé”™çš„é—®é¢˜\n- 20230814\n  - æ–°å¢Bç«™ç›´æ’­å½•åˆ¶\n  - å†™äº†ä¸€ä¸ªåœ¨çº¿æ’­æ”¾M3U8å’ŒFLVè§†é¢‘çš„ç½‘é¡µæºç ï¼Œæ‰“å¼€å³å¯é£Ÿç”¨\n- 20230812\n  - æ–°å¢YYç›´æ’­å½•åˆ¶\n- 20230808\n  - ä¿®å¤ä¸»æ’­é‡æ–°å¼€æ’­æ— æ³•å†æ¬¡å½•åˆ¶çš„é—®é¢˜\n- 20230807\n  - æ–°å¢äº†æ–—é±¼ç›´æ’­å½•åˆ¶\n  - ä¿®å¤æ˜¾ç¤ºå½•åˆ¶å®Œæˆä¹‹åä¼šé‡æ–°å¼€å§‹å½•åˆ¶çš„é—®é¢˜\n- 20230805\n  - æ–°å¢äº†è™ç‰™ç›´æ’­å½•åˆ¶ï¼Œå…¶æš‚æ—¶åªèƒ½ç”¨flvè§†é¢‘æµè¿›è¡Œå½•åˆ¶\n  - Web API æ–°å¢äº†å¿«æ‰‹å’Œè™ç‰™è¿™ä¸¤ä¸ªå¹³å°çš„ç›´æ’­æµè§£æï¼ˆTikTokè¦ä»£ç†ï¼‰\n- 20230804\n  - æ–°å¢äº†å¿«æ‰‹ç›´æ’­å½•åˆ¶ï¼Œä¼˜åŒ–äº†éƒ¨åˆ†ä»£ç \n  - ä¸Šä¼ äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–è·å–æŠ–éŸ³ç›´æ’­é—´é¡µé¢Cookieçš„ä»£ç ï¼Œå¯ä»¥ç”¨äºå½•åˆ¶\n- 20230803\n  - é€šå®µæ›´æ–° \n  - æ–°å¢äº†å›½é™…ç‰ˆæŠ–éŸ³TikTokçš„ç›´æ’­å½•åˆ¶ï¼Œå»é™¤å†—ä½™ ç®€åŒ–äº†éƒ¨åˆ†ä»£ç \n- 20230724\t\n  - æ–°å¢äº†ä¸€ä¸ªé€šè¿‡æŠ–éŸ³ç›´æ’­é—´åœ°å€è·å–ç›´æ’­è§†é¢‘æµé“¾æ¥çš„APIæ¥å£ï¼Œä¸Šä¼ å³å¯ç”¨\n  </details>\n  &emsp;\n\n## æœ‰é—®é¢˜å¯ä»¥æissue, æˆ‘ä¼šåœ¨è¿™é‡ŒæŒç»­æ·»åŠ æ›´å¤šç›´æ’­å¹³å°çš„å½•åˆ¶ æ¬¢è¿Star\n#### \n"
        },
        {
          "name": "StopRecording.vbs",
          "type": "blob",
          "size": 2.5595703125,
          "content": "'********************************************************************************************/\n'* File Name       : StopRecording.vbs\n'* Created Date  : 2024-10-15 01:50:30\n'* Author            : Hmily\n'* GitHub            : http://github.com/ihmily\n'* Description     : This script is designed to terminate the process of live recording\n'********************************************************************************************/\n\nDim objWMIService, colProcesses, objProcess\nDim intResponse\nstrComputer = \".\"\nOn Error Resume Next\nintResponse = MsgBox(\"ç¡®å®šè¦ç»“æŸæ‰€æœ‰åå°ç›´æ’­å½•åˆ¶è¿›ç¨‹å—ï¼Ÿ\", vbYesNo + vbQuestion, \"ç¡®è®¤ç»“æŸè¿›ç¨‹\")\n\nIf intResponse = vbYes Then\n    Set objWMIService = GetObject(\"winmgmts:\\\\\" & strComputer & \"\\root\\cimv2\")\n    If Err.Number <> 0 Then\n        Err.Clear\n    End If\n\n    Set colProcesses = objWMIService.ExecQuery(\"Select * from Win32_Process Where Name = 'ffmpeg.exe'\")\n    Set colProcesses2 = objWMIService.ExecQuery(\"Select * from Win32_Process Where Name = 'pythonw.exe'\")\n    Set colProcesses3 = objWMIService.ExecQuery(\"Select * from Win32_Process Where Name = 'DouyinLiveRecorder.exe'\")\n    If Err.Number <> 0 Then\n        Err.Clear\n    End If\n\n    If Not objWMIService Is Nothing And Not colProcesses Is Nothing  And Not colProcesses2 Is Nothing Then\n        If colProcesses2.Count = 0 And colProcesses3.Count = 0 Then\n            MsgBox \"æ²¡æœ‰æ‰¾åˆ°å½•åˆ¶ç¨‹åºçš„è¿›ç¨‹\", vbExclamation, \"æç¤ºä¿¡æ¯\"\n            WScript.Quit(1)\n        Else\n            For Each objProcess in colProcesses\n                objProcess.Terminate()\n                If Err.Number <> 0 Then\n                    objShell.Run \"taskkill /f /im \" & objProcess.Name, 0, True\n                    Err.Clear\n                End If                \n            Next\n        End If\n    Else\n        objShell.Run \"taskkill /f /im \" & objProcess.Name, 0, True\n    End If\n    MsgBox \"å·²æˆåŠŸç»“æŸæ­£åœ¨å½•åˆ¶ç›´æ’­çš„è¿›ç¨‹ï¼\" & vbCrLf & \"å…³é—­æ­¤çª—å£30ç§’åè‡ªåŠ¨åœæ­¢å½•åˆ¶ç¨‹åº\", vbInformation, \"æç¤ºä¿¡æ¯\"\n\n    WScript.Sleep 10000\n    If colProcesses3.Count <> 0 Then\n        Set colProcesses_ = colProcesses3\n    Else\n        Set colProcesses_ = colProcesses2\n    End If\n    For Each objProcess in colProcesses_\n        objProcess.Terminate()\n        If Err.Number <> 0 Then\n            objShell.Run \"taskkill /f /im \" & objProcess.Name, 0, True\n            Err.Clear\n        End If         \n    Next\nElse\n    MsgBox \"å·²å–æ¶ˆç»“æŸå½•åˆ¶æ“ä½œ\", vbExclamation, \"æç¤ºä¿¡æ¯\"\nEnd If\n\nOn Error GoTo 0\nSet objWMIService = Nothing\nSet colProcesses = Nothing\nSet colProcesses2 = Nothing\nSet colProcesses3 = Nothing\nSet objProcess = Nothing\nSet objShell = Nothing"
        },
        {
          "name": "config",
          "type": "tree",
          "content": null
        },
        {
          "name": "demo.py",
          "type": "blob",
          "size": 6.9140625,
          "content": "# -*- coding: utf-8 -*-\nfrom douyinliverecorder.logger import logger\nfrom douyinliverecorder import spider\n\n# ä»¥ä¸‹ç¤ºä¾‹ç›´æ’­é—´é“¾æ¥ä¸ä¿è¯æ—¶æ•ˆæ€§ï¼Œè¯·è‡ªè¡ŒæŸ¥çœ‹é“¾æ¥æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®\n# Please note that the following example live room links may not be up-to-date;\nLIVE_STREAM_CONFIG = {\n    \"douyin\": {\n        \"url\": \"https://live.douyin.com/745964462470\",\n        \"func\": spider.get_douyin_app_stream_data,\n    },\n    \"tiktok\": {\n        \"url\": \"https://www.tiktok.com/@pearlgaga88/live\",\n        \"func\": spider.get_tiktok_stream_data,\n    },\n    \"kuaishou\": {\n        \"url\": \"https://live.kuaishou.com/u/yall1102\",\n        \"func\": spider.get_kuaishou_stream_data,\n    },\n    \"huya\": {\n        \"url\": \"https://www.huya.com/116\",\n        \"func\": spider.get_huya_app_stream_url,\n    },\n    \"douyu\": {\n        \"url\": \"https://www.douyu.com/topic/wzDBLS6?rid=4921614&dyshid=\",\n        \"func\": spider.get_douyu_info_data,\n    },\n    \"yy\": {\n        \"url\": \"https://www.yy.com/22490906/22490906\",\n        \"func\": spider.get_yy_stream_data,\n    },\n    \"bilibili\": {\n        \"url\": \"https://live.bilibili.com/21593109\",\n        \"func\": spider.get_bilibili_stream_data,\n    },\n    \"xhs\": {\n        \"url\": \"https://www.xiaohongshu.com/user/profile/6330049c000000002303c7ed?appuid=5f3f478a00000000010005b3\",\n        \"func\": spider.get_xhs_stream_url,\n    },\n    \"bigo\": {\n        \"url\": \"https://www.bigo.tv/cn/716418802\",\n        \"func\": spider.get_bigo_stream_url,\n    },\n    \"blued\": {\n        \"url\": \"https://app.blued.cn/live?id=Mp6G2R\",\n        \"func\": spider.get_blued_stream_url,\n    },\n    \"sooplive\": {\n        \"url\": \"https://play.sooplive.co.kr/sw7love\",\n        \"func\": spider.get_sooplive_stream_data,\n    },\n    \"netease\": {\n        \"url\": \"https://cc.163.com/583946984\",\n        \"func\": spider.get_netease_stream_data,\n    },\n    \"qiandurebo\": {\n        \"url\": \"https://qiandurebo.com/web/video.php?roomnumber=33333\",\n        \"func\": spider.get_qiandurebo_stream_data,\n    },\n    \"pandatv\": {\n        \"url\": \"https://www.pandalive.co.kr/live/play/bara0109\",\n        \"func\": spider.get_pandatv_stream_data,\n    },\n    \"maoerfm\": {\n        \"url\": \"https://fm.missevan.com/live/868895007\",\n        \"func\": spider.get_maoerfm_stream_url,\n    },\n    \"winktv\": {\n        \"url\": \"https://www.winktv.co.kr/live/play/anjer1004\",\n        \"func\": spider.get_winktv_stream_data,\n    },\n    \"flextv\": {\n        \"url\": \"https://www.flextv.co.kr/channels/593127/live\",\n        \"func\": spider.get_flextv_stream_data,\n    },\n    \"looklive\": {\n        \"url\": \"https://look.163.com/live?id=65108820&position=3\",\n        \"func\": spider.get_looklive_stream_url,\n    },\n    \"popkontv\": {\n        \"url\": \"https://www.popkontv.com/live/view?castId=wjfal007&partnerCode=P-00117\",\n        \"func\": spider.get_popkontv_stream_url,\n    },\n    \"twitcasting\": {\n        \"url\": \"https://twitcasting.tv/c:uonq\",\n        \"func\": spider.get_twitcasting_stream_url,\n    },\n    \"baidu\": {\n        \"url\": \"https://live.baidu.com/m/media/pclive/pchome/live.html?room_id=9175031377&tab_category\",\n        \"func\": spider.get_baidu_stream_data,\n    },\n    \"weibo\": {\n        \"url\": \"https://weibo.com/u/7849520225\",\n        \"func\": spider.get_weibo_stream_data,\n    },\n    \"kugou\": {\n        \"url\": \"https://fanxing2.kugou.com/50428671?refer=2177&sourceFrom=\",\n        \"func\": spider.get_kugou_stream_url,\n    },\n    \"twitchtv\": {\n        \"url\": \"https://www.twitch.tv/gamerbee\",\n        \"func\": spider.get_twitchtv_stream_data,\n    },\n    \"liveme\": {\n        \"url\": \"https://www.liveme.com/zh/v/17141937295821012854/index.html\",\n        \"func\": spider.get_liveme_stream_url,\n    },\n    \"huajiao\": {\n        \"url\": \"https://www.huajiao.com/user/207446325\",\n        \"func\": spider.get_huajiao_stream_url,\n    },\n    \"showroom\": {\n        \"url\": \"https://www.showroom-live.com/room/profile?room_id=511033\",\n        \"func\": spider.get_showroom_stream_data,\n    },\n    \"acfun\": {\n        \"url\": \"https://live.acfun.cn/live/17912421\",\n        \"func\": spider.get_acfun_stream_data,\n    },\n    \"changliao\": {\n        \"url\": \"https://www.tlclw.com/801044397\",\n        \"func\": spider.get_changliao_stream_url,\n    },\n    \"yingke\": {\n        \"url\": \"https://www.inke.cn/liveroom/index.html?uid=710032101&id=1720857535354099\",\n        \"func\": spider.get_yingke_stream_url,\n    },\n    \"yinbo\": {\n        \"url\": \"https://live.ybw1666.com/800008687\",\n        \"func\": spider.get_yinbo_stream_url,\n    },\n    \"zhihu\": {\n        \"url\": \"https://www.zhihu.com/people/ac3a467005c5d20381a82230101308e9\",\n        \"func\": spider.get_zhihu_stream_url,\n    },\n    \"chzzk\": {\n        \"url\": \"https://chzzk.naver.com/live/458f6ec20b034f49e0fc6d03921646d2\",\n        \"func\": spider.get_chzzk_stream_data,\n    },\n    \"haixiu\": {\n        \"url\": \"https://www.haixiutv.com/6095106\",\n        \"func\": spider.get_haixiu_stream_url,\n    },\n    \"vvxqiu\": {\n        \"url\": \"https://h5webcdn-pro.vvxqiu.com//activity/videoShare/videoShare.html?h5Server=https://h5p.vvxqiu.com\"\n               \"&roomId=LP115924473&platformId=vvstar\",\n        \"func\": spider.get_vvxqiu_stream_url,\n    },\n    \"17live\": {\n        \"url\": \"https://17.live/en/live/6302408\",\n        \"func\": spider.get_17live_stream_url,\n    },\n    \"langlive\": {\n        \"url\": \"https://www.lang.live/en-US/room/3349463\",\n        \"func\": spider.get_langlive_stream_url,\n    },\n    \"pplive\": {\n        \"url\": \"https://m.pp.weimipopo.com/live/preview.html?uid=91648673&anchorUid=91625862&app=plpl\",\n        \"func\": spider.get_pplive_stream_url,\n    },\n    \"6room\": {\n        \"url\": \"https://v.6.cn/634435\",\n        \"func\": spider.get_6room_stream_url,\n    },\n    \"lehai\": {\n        \"url\": \"https://www.lehaitv.com/8059096\",\n        \"func\": spider.get_haixiu_stream_url,\n    },\n    \"huamao\": {\n        \"url\": \"https://h.catshow168.com/live/preview.html?uid=19066357&anchorUid=18895331\",\n        \"func\": spider.get_pplive_stream_url,\n    },\n    \"shopee\": {\n        \"url\": \"https://sg.shp.ee/GmpXeuf?uid=1006401066&session=802458\",\n        \"func\": spider.get_shopee_stream_url,\n    },\n    \"youtube\": {\n        \"url\": \"https://www.youtube.com/watch?v=cS6zS5hi1w0\",\n        \"func\": spider.get_youtube_stream_url,\n    },\n    \"taobao\": {\n        \"url\": \"https://m.tb.cn/h.TWp0HTd\",\n        \"func\": spider.get_taobao_stream_url,\n    },\n    \"jd\": {\n        \"url\": \"https://3.cn/28MLBy-E\",\n        \"func\": spider.get_jd_stream_url,\n    }\n}\n\n\ndef test_live_stream(platform_name: str, proxy_addr=None, cookies=None) -> None:\n    if platform_name in LIVE_STREAM_CONFIG:\n        config = LIVE_STREAM_CONFIG[platform_name]\n        try:\n            stream_data = config['func'](config['url'], proxy_addr=proxy_addr, cookies=cookies)\n            logger.debug(f\"Stream data for {platform_name}: {stream_data}\")\n        except Exception as e:\n            logger.error(f\"Error fetching stream data for {platform_name}: {e}\")\n    else:\n        logger.warning(f\"No configuration found for platform: {platform_name}\")\n\n\nif __name__ == \"__main__\":\n    platform = \"douyin\"\n    test_live_stream(platform)\n"
        },
        {
          "name": "docker-compose.yaml",
          "type": "blob",
          "size": 0.3291015625,
          "content": "version: '3.8'\n\nservices:\n  app:\n    image: ihmily/douyin-live-recorder:latest\n    environment:\n      - TERM=xterm-256color\n    tty: true\n    stdin_open: true\n    #build: .\n    volumes:\n      - ./config:/app/config\n      - ./logs:/app/logs\n      - ./backup_config:/app/backup_config\n      - ./downloads:/app/downloads\n    restart: always"
        },
        {
          "name": "douyinliverecorder",
          "type": "tree",
          "content": null
        },
        {
          "name": "ffmpeg_install.py",
          "type": "blob",
          "size": 8.427734375,
          "content": "# -*- coding: utf-8 -*-\n\n\"\"\"\nAuthor: Hmily\nGitHub: https://github.com/ihmily\nCopyright (c) 2024 by Hmily, All Rights Reserved.\n\"\"\"\n\nimport os\nimport re\nimport subprocess\nimport sys\nimport platform\nimport zipfile\nfrom pathlib import Path\nimport requests\nfrom tqdm import tqdm\nfrom douyinliverecorder.logger import logger\n\ncurrent_platform = platform.system()\nexecute_dir = os.path.split(os.path.realpath(sys.argv[0]))[0]\ncurrent_env_path = os.environ.get('PATH')\n\n\ndef unzip_file(zip_path: str | Path, extract_to: str | Path, delete: bool = True) -> None:\n    if not os.path.exists(extract_to):\n        os.makedirs(extract_to)\n\n    with zipfile.ZipFile(zip_path, 'r') as zip_ref:\n        zip_ref.extractall(extract_to)\n\n    if delete and os.path.exists(zip_path):\n        os.remove(zip_path)\n\n\ndef get_lanzou_download_link(url: str, password: str | None = None) -> str | None:\n    try:\n        headers = {\n            'accept-language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6',\n            'Origin': 'https://wweb.lanzouv.com',\n            'Referer': 'https://wweb.lanzouv.com/iXncv0dly6mh',\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '\n                          'Chrome/121.0.0.0 Safari/537.36 Edg/121.0.0.0',\n        }\n        response = requests.get(url, headers=headers)\n        sign = re.search(\"var skdklds = '(.*?)';\", response.text).group(1)\n        data = {\n            'action': 'downprocess',\n            'sign': sign,\n            'p': password,\n            'kd': '1',\n        }\n        response = requests.post('https://wweb.lanzouv.com/ajaxm.php', headers=headers, data=data)\n        json_data = response.json()\n        download_url = json_data['dom'] + \"/file/\" + json_data['url']\n        response = requests.get(download_url, headers=headers)\n        return response.url\n    except Exception as e:\n        logger.error(f\"Failed to obtain ffmpeg download address. {e}\")\n\n\ndef install_ffmpeg_windows():\n    try:\n        logger.warning(\"ffmpeg is not installed.\")\n        logger.debug(\"Installing the stable version of ffmpeg for Windows...\")\n        ffmpeg_url = get_lanzou_download_link('https://wweb.lanzouv.com/in54b2gmj24b', 'e3ut')\n        if ffmpeg_url:\n            full_file_name = 'ffmpeg-7.1.zip'\n            version = 'v7.1'\n            zip_file_path = Path(execute_dir) / full_file_name\n            if Path(zip_file_path).exists():\n                logger.debug(\"ffmpeg installation file already exists, start install...\")\n            else:\n                response = requests.get(ffmpeg_url, stream=True)\n                total_size = int(response.headers.get('Content-Length', 0))\n                block_size = 1024\n\n                with tqdm(total=total_size, unit=\"B\", unit_scale=True,\n                          ncols=100, desc=f'Downloading ffmpeg ({version})') as t:\n                    with open(zip_file_path, 'wb') as f:\n                        for data in response.iter_content(block_size):\n                            t.update(len(data))\n                            f.write(data)\n\n            unzip_file(zip_file_path, execute_dir)\n            extract_dir_path = str(zip_file_path).rsplit('.', maxsplit=1)[0]\n            os.environ['PATH'] = execute_dir + '/' + extract_dir_path + os.pathsep + current_env_path\n            result = subprocess.run([\"ffmpeg\", \"-version\"], capture_output=True)\n            if result.returncode == 0:\n                logger.debug('ffmpeg installation was successful')\n            else:\n                logger.error('ffmpeg installation failed. Please manually install ffmpeg by yourself')\n            return True\n        else:\n            logger.error(\"Please manually install ffmpeg by yourself\")\n    except Exception as e:\n        logger.error(f\"type: {type(e).__name__}, ffmpeg installation failed {e}\")\n\n\ndef install_ffmpeg_mac():\n    logger.warning(\"ffmpeg is not installed.\")\n    logger.debug(\"Installing the stable version of ffmpeg for macOS...\")\n    try:\n        result = subprocess.run([\"brew\", \"install\", \"ffmpeg\"], capture_output=True)\n        if result.returncode == 0:\n            logger.debug('ffmpeg installation was successful. Restart for changes to take effect.')\n            return True\n        else:\n            logger.error(\"ffmpeg installation failed\")\n    except subprocess.CalledProcessError as e:\n        logger.error(f\"Failed to install ffmpeg using Homebrew. {e}\")\n        logger.error(\"Please install ffmpeg manually or check your Homebrew installation.\")\n    except Exception as e:\n        logger.error(f\"An unexpected error occurred: {e}\")\n\n\ndef install_ffmpeg_linux():\n    is_RHS = True\n\n    try:\n        logger.warning(\"ffmpeg is not installed.\")\n        logger.debug(\"Trying to install the stable version of ffmpeg\")\n        result = subprocess.run(['yum', '-y', 'update'], capture_output=True)\n        if result.returncode != 0:\n            logger.error(f\"Failed to update package lists using yum.\")\n            return False\n\n        result = subprocess.run(['yum', 'install', '-y', 'ffmpeg'], capture_output=True)\n        if result.returncode == 0:\n            logger.debug(\"ffmpeg installation was successful using yum. Restart for changes to take effect.\")\n            return True\n        logger.error(result.stderr.decode('utf-8').strip())\n    except FileNotFoundError:\n        logger.debug(\"yum command not found, trying to install using apt...\")\n        is_RHS = False\n    except Exception as e:\n        logger.error(f\"An error occurred while trying to install ffmpeg using yum: {e}\")\n\n    if not is_RHS:\n        try:\n            logger.debug(\"Trying to install the stable version of ffmpeg for Linux using apt...\")\n            result = subprocess.run(['apt', 'update'], capture_output=True)\n            if result.returncode != 0:\n                logger.error(\"Failed to update package lists using apt\")\n                return False\n\n            result = subprocess.run(['apt', 'install', '-y', 'ffmpeg'], capture_output=True)\n            if result.returncode == 0:\n                logger.debug(\"ffmpeg installation was successful using apt. Restart for changes to take effect.\")\n                return True\n            else:\n                logger.error(result.stderr.decode('utf-8').strip())\n        except FileNotFoundError:\n            logger.error(\"apt command not found, unable to install ffmpeg. Please manually install ffmpeg by yourself\")\n        except Exception as e:\n            logger.error(f\"An error occurred while trying to install ffmpeg using apt: {e}\")\n    logger.error(\"Manual installation of ffmpeg is required. Please manually install ffmpeg by yourself.\")\n    return False\n\n\ndef install_ffmpeg() -> bool:\n    if current_platform == \"Windows\":\n        return install_ffmpeg_windows()\n    elif current_platform == \"Linux\":\n        return install_ffmpeg_linux()\n    elif current_platform == \"Darwin\":\n        return install_ffmpeg_mac()\n    else:\n        logger.debug(f\"ffmpeg auto installation is not supported on this platform: {current_platform}. \"\n                     f\"Please install ffmpeg manually.\")\n    return False\n\n\ndef ensure_ffmpeg_installed(func):\n    def wrapper(*args, **kwargs):\n        try:\n            result = subprocess.run(['ffmpeg', '-version'], capture_output=True)\n            version = result.stdout.strip()\n            if result.returncode == 0 and version:\n                return func(*args, **kwargs)\n        except FileNotFoundError:\n            pass\n        return False\n\n    def wrapped_func(*args, **kwargs):\n        if sys.version_info >= (3, 7):\n            res = wrapper(*args, **kwargs)\n        else:\n            res = wrapper(*args, **kwargs)\n        if not res:\n            install_ffmpeg()\n            res = wrapper(*args, **kwargs)\n\n        if not res:\n            raise RuntimeError(\"ffmpeg is not installed.\")\n\n        return func(*args, **kwargs)\n\n    return wrapped_func\n\n\ndef check_ffmpeg_installed() -> bool:\n    try:\n        result = subprocess.run(['ffmpeg', '-version'], capture_output=True)\n        version = result.stdout.strip()\n        if result.returncode == 0 and version:\n            return True\n    except FileNotFoundError:\n        pass\n    except OSError as e:\n        print(f\"OSError occurred: {e}. ffmpeg may not be installed correctly or is not available in the system PATH.\")\n        print(\"Please delete the ffmpeg and try to download and install again.\")\n    except Exception as e:\n        print(f\"An unexpected error occurred: {e}\")\n    return False\n\n\ndef check_ffmpeg() -> bool:\n    if not check_ffmpeg_installed():\n        return install_ffmpeg()\n    return True\n"
        },
        {
          "name": "i18n.py",
          "type": "blob",
          "size": 0.8681640625,
          "content": "import os\nimport sys\nimport gettext\nimport inspect\nimport builtins\nfrom pathlib import Path\n\n\ndef init_gettext(locale_dir, locale_name):\n    gettext.bindtextdomain('zh_CN', locale_dir)\n    gettext.textdomain('zh_CN')\n    os.environ['LANG'] = f'{locale_name}.utf8'\n    return gettext.gettext\n\n\nexecute_dir = os.path.split(os.path.realpath(sys.argv[0]))[0]\nif os.path.exists(Path(execute_dir) / '_internal/i18n'):\n    locale_path = Path(execute_dir) / '_internal/i18n'\nelse:\n    locale_path = Path(execute_dir) / 'i18n'\n_tr = init_gettext(locale_path, 'zh_CN')\noriginal_print = builtins.print\npackage_name = 'douyinliverecorder'\n\n\ndef translated_print(*args, **kwargs):\n    for arg in args:\n        if package_name in inspect.stack()[1].filename:\n            translated_arg = _tr(str(arg))\n        else:\n            translated_arg = str(arg)\n        original_print(translated_arg, **kwargs)\n"
        },
        {
          "name": "i18n",
          "type": "tree",
          "content": null
        },
        {
          "name": "index.html",
          "type": "blob",
          "size": 7.48046875,
          "content": "<!--\n    Project: DouyinLiveRecorder\n    Author: Hmily\n    Build: 2023.08.14 - 20:24:05\n    GitHub Project URL: https://github.com/ihmily/DouyinLiveRecorder\n-->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"referrer\" content=\"never\"> \n    <title>M3U8 è§†é¢‘æ’­æ”¾å™¨</title>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap\" rel=\"stylesheet\">\n    <script src=\"https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/flv.js@1.6.2/dist/flv.min.js\"></script>\n\n    <style>\n        body {\n            font-family: 'Roboto', Arial, sans-serif;\n            background-color: #1a237e;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            margin: 0;\n            padding: 0;\n            color: #ffffff;\n            background-image: linear-gradient(120deg, #1a237e 0%, #283593 50%, #4a148c 100%);\n        }\n\n\n        .container {\n            max-width: 640px;\n            width: 80%;\n            padding: 20px;\n            background-color: #ffffff;\n            border-radius: 10px;\n            box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.15);\n        }\n\n        #videoPlayer {\n            width: 100%;\n            height: 0;\n            padding-bottom: 56.25%;\n            position: relative;\n            background-color: #000;\n            border-radius: 5px;\n            box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.15);\n            display: none;\n        }\n\n        video {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n\n        #videoUrlInput{\n        \tdisplay: block;\n        \twidth: 100%;\n        \tmargin: 10px 0;\n        \tpadding: 8px;\n        \tborder-radius: 5px;\n        \tborder: 1px solid #ccc;\n            box-sizing: border-box;\n        }\n\n        #playButton {\n            display: block;\n            width: 100%;\n            padding: 10px;\n            background-color: #283593;\n            color: white;\n            font-weight: bold;\n            border-radius: 5px;\n            border: none;\n            cursor: pointer;\n            transition: background-color 0.3s;\n            margin: 0 0 10px 0;\n            box-shadow: 0px 2px 4px 0px rgba(0,0,0,0.15);\n        }\n\n        #playButton:hover {\n            background-color: #1a237e;\n        }\n\n        .description {\n            margin-top: 20px;\n            line-height: 1.4;\n            font-size: 14px;\n            text-align: left;\n            background-color: #f8f9fa;\n            padding: 15px;\n            border-radius: 5px;\n            \n            box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.15);\n            display: block;\n        }\n        .footer {\n          margin-top: 30px;\n          text-align: center;\n          font-size: 14px;\n          color: white;\n        }\n\n        p{\n            color: black;\n        }\n        \n        a.no_style {\n            color: inherit;\n            text-decoration: none;\n        }\n        @media screen and (max-width: 768px) {\n            .container {\n                width: 90%;\n                border-radius: 0;\n                box-shadow: none;\n                margin-top:30px;\n            }\n            body {\n                overflow-y: scroll;\n            }\n            #videoUrlInput{\n                \n            \tmargin-top: 30px;\n            \tmargin-bottom: 10px;\n            }\n        \n        }\n\n    </style>\n</head>\n<body>\n\t<div class=\"container\">\n\t    <input type=\"text\" id=\"videoUrlInput\" placeholder=\"è¯·è¾“å…¥ M3U8æˆ–è€…FLV è§†é¢‘é“¾æ¥\">\n\t    <button id=\"playButton\">æ’­æ”¾è§†é¢‘</button>\n\t    <div id=\"videoPlayer\">\n\t        <video controls></video>\n\t    </div>\n\t    <div class=\"description\">\n            <p><strong>è¯´æ˜</strong><p>\n            <p>M3U8æ–‡ä»¶æ ¼å¼</p>\n            <p>M3U8æ–‡ä»¶æ˜¯é‡‡ç”¨UTF-8ç¼–ç æ ¼å¼çš„M3Uæ–‡ä»¶ã€‚M3Uæ–‡ä»¶æœ¬èº«æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬ç´¢å¼•æ–‡ä»¶ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯è®°å½•å¤šåª’ä½“æ–‡ä»¶é“¾æ¥ã€‚å½“ç”¨æˆ·æ‰“å¼€æ­¤ç±»æ–‡ä»¶æ—¶ï¼Œæ’­æ”¾è½¯ä»¶ä¼šæ ¹æ®ç´¢å¼•æŸ¥æ‰¾ç›¸åº”çš„éŸ³è§†é¢‘æ–‡ä»¶ç½‘ç»œåœ°å€ï¼Œç„¶åè¿›è¡Œåœ¨çº¿æ’­æ”¾ã€‚</p>\n            <p>M3Uæœ€åˆè®¾è®¡ç”¨äºæ’­æ”¾éŸ³é¢‘æ–‡ä»¶ï¼Œä¾‹å¦‚MP3ã€‚ä½†éšç€æ—¶é—´æ¨ç§»ï¼Œæ›´å¤šçš„æ’­æ”¾å™¨å’Œè½¯ä»¶å¼€å§‹ä½¿ç”¨M3Uæ¥æ’­æ”¾è§†é¢‘æ–‡ä»¶åˆ—è¡¨ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒåœ¨çº¿æµåª’ä½“éŸ³é¢‘æºçš„æŒ‡å®šã€‚ç›®å‰ï¼Œè®¸å¤šæ’­æ”¾å™¨å’Œè½¯ä»¶éƒ½å…¼å®¹M3Uæ–‡ä»¶æ ¼å¼ã€‚</p>\n            <p>FLVæ–‡ä»¶æ ¼å¼ï¼ˆFlash Video Formatï¼‰æ˜¯Adobeå…¬å¸å¼€å‘çš„ä¸€ç§ä¸“é—¨ç”¨äºç½‘é¡µè§†é¢‘æ’­æ”¾çš„æ–‡ä»¶æ ¼å¼ã€‚FLVæ ¼å¼çš„è§†é¢‘æ–‡ä»¶é€šå¸¸ç”¨äºæ’­æ”¾çŸ­è§†é¢‘å’Œåœ¨çº¿æµåª’ä½“ï¼Œå¯ä»¥åµŒå…¥åˆ°ç½‘é¡µä¸­ä¾›ç”¨æˆ·è§‚çœ‹ã€‚FLVè§†é¢‘é€šå¸¸ç”±Adobe Flash Playeræ’­æ”¾å™¨æ’­æ”¾ï¼Œè€Œå…¶ä»–ç¬¬ä¸‰æ–¹æ’­æ”¾å™¨ä¹Ÿæ”¯æŒæ­¤æ ¼å¼ã€‚</p>\n        </div>\n        <div class=\"footer\">\n          <p>&copy; 2023 <a href='https://github.com/ihmily/DouyinLiveRecorder' class=\"no_style\" target=\"_blank\">Hmily</a>. All rights reserved.</p>\n        </div>\n\t    <script>\n    \t    function httpToHttps(url) {\n              if (url.startsWith(\"http://\")) {\n                return url.replace(\"http://\", \"https://\");\n              }\n              return url;\n            }\n\t        function playVideo() {\n            let videoUrl = document.getElementById('videoUrlInput').value;\n            const video = document.querySelector('#videoPlayer video');\n            const description = document.querySelector('.description');\n            if (videoUrl == ''){\n                alert('è¯·è¾“å…¥è§†é¢‘é“¾æ¥');\n                return;\n            }\n            videoUrl = httpToHttps(videoUrl);\n            if (videoUrl.includes('.m3u8')) {\n                videoPlayer.style.display = 'block';\n                description.style.display = 'none';\n                if (Hls.isSupported()) {\n                    const hls = new Hls();\n                    hls.attachMedia(video);\n                    hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n                        hls.loadSource(videoUrl);\n                    });\n                } else if (video.canPlayType('application/vnd.apple.mpegurl')) {\n                    video.src = videoUrl;\n                } else {\n                    alert('M3U8 æ ¼å¼ä¸å—æ‚¨çš„æµè§ˆå™¨æ”¯æŒã€‚');\n                    console.error('M3U8 æ ¼å¼ä¸å—æ‚¨çš„æµè§ˆå™¨æ”¯æŒã€‚');\n                    return;\n                }\n            } else if (videoUrl.includes('.flv')) {\n                if (flvjs.isSupported()) {\n                    const flvPlayer = flvjs.createPlayer({\n                        type: 'flv',\n                        url: videoUrl\n                    });\n                    flvPlayer.attachMediaElement(video);\n                    flvPlayer.load();\n                    flvPlayer.play();\n                } else {\n                    alert('FLV æ ¼å¼ä¸å—æ‚¨çš„æµè§ˆå™¨æ”¯æŒã€‚');\n                    console.error('FLV æ ¼å¼ä¸å—æ‚¨çš„æµè§ˆå™¨æ”¯æŒã€‚');\n                    return;\n                }\n\n                videoPlayer.style.display = 'block';\n                description.style.display = 'none';\n            } else {\n                console.error('ä¸æ”¯æŒæ’­æ”¾è¯¥è§†é¢‘æ ¼å¼ã€‚');\n                alert('ä¸æ”¯æŒæ’­æ”¾è¯¥è§†é¢‘æ ¼å¼ã€‚');\n            }\n        }\n\n        document.getElementById('playButton').addEventListener('click', playVideo);\n\t    </script>\n\t</div>\n</body>\n</html>\n"
        },
        {
          "name": "main.py",
          "type": "blob",
          "size": 99.017578125,
          "content": "# -*- encoding: utf-8 -*-\n\n\"\"\"\nAuthor: Hmily\nGitHub: https://github.com/ihmily\nDate: 2023-07-17 23:52:05\nUpdate: 2024-11-30 23:35:00\nCopyright (c) 2023-2024 by Hmily, All Rights Reserved.\nFunction: Record live stream video.\n\"\"\"\n\nimport os\nimport sys\nimport builtins\nimport subprocess\nimport signal\nimport threading\nimport time\nimport datetime\nimport re\nimport shutil\nimport random\nimport uuid\nfrom pathlib import Path\nimport urllib.parse\nimport urllib.request\nfrom urllib.error import URLError, HTTPError\nfrom typing import Any\nimport configparser\nfrom ffmpeg_install import check_ffmpeg\nfrom douyinliverecorder import spider, stream\nfrom douyinliverecorder.proxy import ProxyDetector\nfrom douyinliverecorder.utils import logger\nfrom douyinliverecorder import utils\nfrom msg_push import (\n    dingtalk, xizhi, tg_bot, send_email, bark, ntfy\n)\n\nversion = \"v4.0.2\"\nplatforms = (\"\\nå›½å†…ç«™ç‚¹ï¼šæŠ–éŸ³|å¿«æ‰‹|è™ç‰™|æ–—é±¼|YY|Bç«™|å°çº¢ä¹¦|bigo|blued|ç½‘æ˜“CC|åƒåº¦çƒ­æ’­|çŒ«è€³FM|Look|TwitCasting|ç™¾åº¦|å¾®åš|\"\n             \"é…·ç‹—|èŠ±æ¤’|æµæ˜Ÿ|Acfun|ç•…èŠ|æ˜ å®¢|éŸ³æ’­|çŸ¥ä¹|å—¨ç§€|VVæ˜Ÿçƒ|17Live|æµªLive|æ¼‚æ¼‚|å…­é—´æˆ¿|ä¹å—¨|èŠ±çŒ«|æ·˜å®|äº¬ä¸œ\"\n             \"\\næµ·å¤–ç«™ç‚¹ï¼šTikTok|SOOP|PandaTV|WinkTV|FlexTV|PopkonTV|TwitchTV|LiveMe|ShowRoom|CHZZK|Shopee|Youtube\")\n\nrecording = set()\nerror_count = 0\npre_max_request = 10\nmax_request_lock = threading.Lock()\nerror_window = []\nerror_window_size = 10\nerror_threshold = 5\nmonitoring = 0\nrunning_list = []\nurl_tuples_list = []\nurl_comments = []\ntext_no_repeat_url = []\ncreate_var = locals()\nfirst_start = True\nexit_recording = False\nneed_update_line_list = []\nfirst_run = True\nnot_record_list = []\nstart_display_time = datetime.datetime.now()\nglobal_proxy = False\nrecording_time_list = {}\nscript_path = os.path.split(os.path.realpath(sys.argv[0]))[0]\nconfig_file = f'{script_path}/config/config.ini'\nurl_config_file = f'{script_path}/config/URL_config.ini'\nbackup_dir = f'{script_path}/backup_config'\ntext_encoding = 'utf-8-sig'\nrstr = r\"[\\/\\\\\\:\\*\\ï¼Ÿ?\\\"\\<\\>\\|&#.ã€‚,ï¼Œ ~ï¼Â·Â ]\"\nffmpeg_path = f\"{script_path}/ffmpeg.exe\"\ndefault_path = f'{script_path}/downloads'\nos.makedirs(default_path, exist_ok=True)\nfile_update_lock = threading.Lock()\nos_type = os.name\nclear_command = \"cls\" if os_type == 'nt' else \"clear\"\ncolor_obj = utils.Color()\n\n\ndef signal_handler(_signal, _frame):\n    sys.exit(0)\n\n\nsignal.signal(signal.SIGTERM, signal_handler)\n\n\ndef display_info() -> None:\n    global start_display_time\n    time.sleep(5)\n    while True:\n        try:\n            time.sleep(5)\n            if Path(sys.executable).name != 'pythonw.exe':\n                os.system(clear_command)\n            print(f\"\\rå…±ç›‘æµ‹{monitoring}ä¸ªç›´æ’­ä¸­\", end=\" | \")\n            print(f\"åŒä¸€æ—¶é—´è®¿é—®ç½‘ç»œçš„çº¿ç¨‹æ•°: {max_request}\", end=\" | \")\n            print(f\"æ˜¯å¦å¼€å¯ä»£ç†å½•åˆ¶: {'æ˜¯' if use_proxy else 'å¦'}\", end=\" | \")\n            if split_video_by_time:\n                print(f\"å½•åˆ¶åˆ†æ®µå¼€å¯: {split_time}ç§’\", end=\" | \")\n            else:\n                print(f\"å½•åˆ¶åˆ†æ®µå¼€å¯: å¦\", end=\" | \")\n            if create_time_file:\n                print(f\"æ˜¯å¦ç”Ÿæˆæ—¶é—´æ–‡ä»¶: æ˜¯\", end=\" | \")\n            print(f\"å½•åˆ¶è§†é¢‘è´¨é‡ä¸º: {video_record_quality}\", end=\" | \")\n            print(f\"å½•åˆ¶è§†é¢‘æ ¼å¼ä¸º: {video_save_type}\", end=\" | \")\n            print(f\"ç›®å‰ç¬æ—¶é”™è¯¯æ•°ä¸º: {error_count}\", end=\" | \")\n            now = time.strftime(\"%H:%M:%S\", time.localtime())\n            print(f\"å½“å‰æ—¶é—´: {now}\")\n\n            if len(recording) == 0:\n                time.sleep(5)\n                if monitoring == 0:\n                    print(\"\\ræ²¡æœ‰æ­£åœ¨ç›‘æµ‹å’Œå½•åˆ¶çš„ç›´æ’­\")\n                else:\n                    print(f\"\\ræ²¡æœ‰æ­£åœ¨å½•åˆ¶çš„ç›´æ’­ å¾ªç¯ç›‘æµ‹é—´éš”æ—¶é—´ï¼š{delay_default}ç§’\")\n            else:\n                now_time = datetime.datetime.now()\n                print(\"x\" * 60)\n                no_repeat_recording = list(set(recording))\n                print(f\"æ­£åœ¨å½•åˆ¶{len(no_repeat_recording)}ä¸ªç›´æ’­: \")\n                for recording_live in no_repeat_recording:\n                    rt, qa = recording_time_list[recording_live]\n                    have_record_time = now_time - rt\n                    print(f\"{recording_live}[{qa}] æ­£åœ¨å½•åˆ¶ä¸­ {str(have_record_time).split('.')[0]}\")\n\n                # print('\\næœ¬è½¯ä»¶å·²è¿è¡Œï¼š'+str(now_time - start_display_time).split('.')[0])\n                print(\"x\" * 60)\n                start_display_time = now_time\n        except Exception as e:\n            logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n\n\ndef update_file(file_path: str, old_str: str, new_str: str, start_str: str = None) -> str | None:\n    if old_str == new_str and start_str is None:\n        return old_str\n    with file_update_lock:\n        file_data = []\n        with open(file_path, \"r\", encoding=text_encoding) as f:\n            try:\n                for text_line in f:\n                    if old_str in text_line:\n                        text_line = text_line.replace(old_str, new_str)\n                        if start_str:\n                            text_line = f'{start_str}{text_line}'\n                    if text_line not in file_data:\n                        file_data.append(text_line)\n            except RuntimeError as e:\n                logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n                if ini_URL_content:\n                    with open(file_path, \"w\", encoding=text_encoding) as f2:\n                        f2.write(ini_URL_content)\n                    return old_str\n        if file_data:\n            with open(file_path, \"w\", encoding=text_encoding) as f:\n                f.write(''.join(file_data))\n        return new_str\n\n\ndef delete_line(file_path: str, del_line: str, delete_all: bool = False) -> None:\n    with file_update_lock:\n        with open(file_path, 'r+', encoding=text_encoding) as f:\n            lines = f.readlines()\n            f.seek(0)\n            f.truncate()\n            skip_line = False\n            for txt_line in lines:\n                if del_line in txt_line:\n                    if delete_all or not skip_line:\n                        skip_line = True\n                        continue\n                else:\n                    skip_line = False\n                f.write(txt_line)\n\n\ndef get_startup_info(system_type: str):\n    if system_type == 'nt':\n        startup_info = subprocess.STARTUPINFO()\n        startup_info.dwFlags |= subprocess.STARTF_USESHOWWINDOW\n    else:\n        startup_info = None\n    return startup_info\n\n\ndef segment_video(converts_file_path: str, segment_save_file_path: str, segment_format: str, segment_time: str,\n                  is_original_delete: bool = True) -> None:\n    try:\n        if os.path.exists(converts_file_path) and os.path.getsize(converts_file_path) > 0:\n            ffmpeg_command = [\n                \"ffmpeg\",\n                \"-i\", converts_file_path,\n                \"-c:v\", \"copy\",\n                \"-c:a\", \"copy\",\n                \"-map\", \"0\",\n                \"-f\", \"segment\",\n                \"-segment_time\", segment_time,\n                \"-segment_format\", segment_format,\n                \"-reset_timestamps\", \"1\",\n                \"-movflags\", \"+frag_keyframe+empty_moov\",\n                segment_save_file_path,\n            ]\n            _output = subprocess.check_output(\n                ffmpeg_command, stderr=subprocess.STDOUT, startupinfo=get_startup_info(os_type)\n            )\n            if is_original_delete:\n                time.sleep(1)\n                if os.path.exists(converts_file_path):\n                    os.remove(converts_file_path)\n    except subprocess.CalledProcessError as e:\n        logger.error(f'Error occurred during conversion: {e}')\n    except Exception as e:\n        logger.error(f'An unknown error occurred: {e}')\n\n\ndef converts_mp4(converts_file_path: str, is_original_delete: bool = True) -> None:\n    try:\n        if os.path.exists(converts_file_path) and os.path.getsize(converts_file_path) > 0:\n            _output = subprocess.check_output([\n                \"ffmpeg\", \"-i\", converts_file_path,\n                \"-c:v\", \"copy\",\n                \"-c:a\", \"copy\",\n                \"-f\", \"mp4\", converts_file_path.rsplit('.', maxsplit=1)[0] + \".mp4\",\n            ], stderr=subprocess.STDOUT, startupinfo=get_startup_info(os_type))\n            if is_original_delete:\n                time.sleep(1)\n                if os.path.exists(converts_file_path):\n                    os.remove(converts_file_path)\n    except subprocess.CalledProcessError as e:\n        logger.error(f'Error occurred during conversion: {e}')\n    except Exception as e:\n        logger.error(f'An unknown error occurred: {e}')\n\n\ndef converts_m4a(converts_file_path: str, is_original_delete: bool = True) -> None:\n    try:\n        if os.path.exists(converts_file_path) and os.path.getsize(converts_file_path) > 0:\n            _output = subprocess.check_output([\n                \"ffmpeg\", \"-i\", converts_file_path,\n                \"-n\", \"-vn\",\n                \"-c:a\", \"aac\", \"-bsf:a\", \"aac_adtstoasc\", \"-ab\", \"320k\",\n                converts_file_path.rsplit('.', maxsplit=1)[0] + \".m4a\",\n            ], stderr=subprocess.STDOUT, startupinfo=get_startup_info(os_type))\n            if is_original_delete:\n                time.sleep(1)\n                if os.path.exists(converts_file_path):\n                    os.remove(converts_file_path)\n    except subprocess.CalledProcessError as e:\n        logger.error(f'Error occurred during conversion: {e}')\n    except Exception as e:\n        logger.error(f'An unknown error occurred: {e}')\n\n\ndef generate_subtitles(record_name: str, ass_filename: str, sub_format: str = 'srt') -> None:\n    index_time = 0\n    today = datetime.datetime.now()\n    re_datatime = today.strftime('%Y-%m-%d %H:%M:%S')\n\n    def transform_int_to_time(seconds: int) -> str:\n        m, s = divmod(seconds, 60)\n        h, m = divmod(m, 60)\n        return f\"{h:02d}:{m:02d}:{s:02d}\"\n\n    while True:\n        index_time += 1\n        txt = str(index_time) + \"\\n\" + transform_int_to_time(index_time) + ',000 --> ' + transform_int_to_time(\n            index_time + 1) + ',000' + \"\\n\" + str(re_datatime) + \"\\n\\n\"\n\n        with open(f\"{ass_filename}.{sub_format.lower()}\", 'a', encoding=text_encoding) as f:\n            f.write(txt)\n\n        if record_name not in recording:\n            return\n        time.sleep(1)\n        today = datetime.datetime.now()\n        re_datatime = today.strftime('%Y-%m-%d %H:%M:%S')\n\n\ndef adjust_max_request() -> None:\n    global max_request, error_count, pre_max_request, error_window\n    preset = max_request\n\n    while True:\n        time.sleep(5)\n        with max_request_lock:\n            if error_window:\n                error_rate = sum(error_window) / len(error_window)\n            else:\n                error_rate = 0\n\n            if error_rate > error_threshold:\n                max_request = max(1, max_request - 1)\n            elif error_rate < error_threshold / 2 and max_request < preset:\n                max_request += 1\n            else:\n                pass\n\n            if pre_max_request != max_request:\n                pre_max_request = max_request\n                print(f\"\\råŒä¸€æ—¶é—´è®¿é—®ç½‘ç»œçš„çº¿ç¨‹æ•°åŠ¨æ€æ”¹ä¸º {max_request}\")\n\n        error_window.append(error_count)\n        if len(error_window) > error_window_size:\n            error_window.pop(0)\n        error_count = 0\n\n\ndef push_message(record_name: str, live_url: str, content: str) -> None:\n    msg_title = push_message_title.strip() or \"ç›´æ’­é—´çŠ¶æ€æ›´æ–°é€šçŸ¥\"\n    push_functions = {\n        'å¾®ä¿¡': lambda: xizhi(xizhi_api_url, msg_title, content),\n        'é’‰é’‰': lambda: dingtalk(dingtalk_api_url, content, dingtalk_phone_num, dingtalk_is_atall),\n        'é‚®ç®±': lambda: send_email(\n            email_host, login_email, email_password, sender_email, sender_name,\n            to_email, msg_title, content\n        ),\n        'TG': lambda: tg_bot(tg_chat_id, tg_token, content),\n        'BARK': lambda: bark(\n            bark_msg_api, title=msg_title, content=content, level=bark_msg_level, sound=bark_msg_ring\n        ),\n        'NTFY': lambda: ntfy(\n            ntfy_api, title=msg_title, content=content, tags=ntfy_tags, action_url=live_url, email=ntfy_email\n        ),\n    }\n\n    for platform, func in push_functions.items():\n        if platform in live_status_push.upper():\n            try:\n                result = func()\n                print(f'æç¤ºä¿¡æ¯ï¼šå·²ç»å°†[{record_name}]ç›´æ’­çŠ¶æ€æ¶ˆæ¯æ¨é€è‡³ä½ çš„{platform},'\n                      f' æˆåŠŸ{len(result[\"success\"])}, å¤±è´¥{len(result[\"error\"])}')\n            except Exception as e:\n                color_obj.print_colored(f\"ç›´æ’­æ¶ˆæ¯æ¨é€åˆ°{platform}å¤±è´¥: {e}\", color_obj.RED)\n\n\ndef run_script(command: str) -> None:\n    try:\n        process = subprocess.Popen(\n            command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, startupinfo=get_startup_info(os_type)\n        )\n        stdout, stderr = process.communicate()\n        stdout_decoded = stdout.decode('utf-8')\n        stderr_decoded = stderr.decode('utf-8')\n        if stdout_decoded.strip():\n            print(stdout_decoded)\n        if stderr_decoded.strip():\n            print(stderr_decoded)\n    except PermissionError as e:\n        logger.error(e)\n        logger.error(f'è„šæœ¬æ— æ‰§è¡Œæƒé™!, è‹¥æ˜¯Linuxç¯å¢ƒ, è¯·å…ˆæ‰§è¡Œ:chmod +x your_script.sh æˆäºˆè„šæœ¬å¯æ‰§è¡Œæƒé™')\n    except OSError as e:\n        logger.error(e)\n        logger.error('Please add `#!/bin/bash` at the beginning of your bash script file.')\n\n\ndef clear_record_info(record_name: str, record_url: str) -> None:\n    global monitoring\n    recording.discard(record_name)\n    if record_url in url_comments and record_url in running_list:\n        running_list.remove(record_url)\n        monitoring -= 1\n        color_obj.print_colored(f\"[{record_name}]å·²ç»ä»å½•åˆ¶åˆ—è¡¨ä¸­ç§»é™¤\\n\", color_obj.YELLOW)\n\n\ndef check_subprocess(record_name: str, record_url: str, ffmpeg_command: list, save_type: str,\n                     script_command: str | None = None) -> bool:\n    save_file_path = ffmpeg_command[-1]\n    process = subprocess.Popen(\n        ffmpeg_command, stderr=subprocess.STDOUT, startupinfo=get_startup_info(os_type)\n    )\n\n    subs_file_path = save_file_path.rsplit('.', maxsplit=1)[0]\n    subs_thread_name = f'subs_{Path(subs_file_path).name}'\n    if create_time_file and not split_video_by_time and 'éŸ³é¢‘' not in save_type:\n        create_var[subs_thread_name] = threading.Thread(\n            target=generate_subtitles, args=(record_name, subs_file_path)\n        )\n        create_var[subs_thread_name].daemon = True\n        create_var[subs_thread_name].start()\n\n    while process.poll() is None:\n        if record_url in url_comments or exit_recording:\n            color_obj.print_colored(f\"[{record_name}]å½•åˆ¶æ—¶å·²è¢«æ³¨é‡Š,æœ¬æ¡çº¿ç¨‹å°†ä¼šé€€å‡º\", color_obj.YELLOW)\n            clear_record_info(record_name, record_url)\n            process.terminate()\n            process.wait()\n            return True\n        time.sleep(1)\n\n    return_code = process.returncode\n    stop_time = time.strftime('%Y-%m-%d %H:%M:%S')\n    if return_code == 0:\n        if converts_to_mp4 and save_type == 'TS':\n            if split_video_by_time:\n                file_paths = utils.get_file_paths(os.path.dirname(save_file_path))\n                prefix = os.path.basename(save_file_path).rsplit('_', maxsplit=1)[0]\n                for path in file_paths:\n                    if prefix in path:\n                        threading.Thread(target=converts_mp4, args=(path, delete_origin_file)).start()\n            else:\n                threading.Thread(target=converts_mp4, args=(save_file_path, delete_origin_file)).start()\n        print(f\"\\n{record_name} {stop_time} ç›´æ’­å½•åˆ¶å®Œæˆ\\n\")\n\n        if script_command:\n            logger.debug(\"å¼€å§‹æ‰§è¡Œè„šæœ¬å‘½ä»¤!\")\n            if \"python\" in script_command:\n                params = [\n                    f'--record_name \"{record_name}\"',\n                    f'--save_file_path \"{save_file_path}\"',\n                    f'--save_type {save_type}'\n                    f'--split_video_by_time {split_video_by_time}',\n                    f'--converts_to_mp4 {converts_to_mp4}',\n                ]\n            else:\n                params = [\n                    f'\"{record_name.split(\" \", maxsplit=1)[-1]}\"',\n                    f'\"{save_file_path}\"',\n                    save_type,\n                    f'split_video_by_time:{split_video_by_time}',\n                    f'converts_to_mp4:{converts_to_mp4}'\n                ]\n            script_command = script_command.strip() + ' ' + ' '.join(params)\n            run_script(script_command)\n            logger.debug(\"è„šæœ¬å‘½ä»¤æ‰§è¡Œç»“æŸ!\")\n\n    else:\n        color_obj.print_colored(f\"\\n{record_name} {stop_time} ç›´æ’­å½•åˆ¶å‡ºé”™,è¿”å›ç : {return_code}\\n\", color_obj.RED)\n\n    recording.discard(record_name)\n    return False\n\n\ndef clean_name(input_text):\n    cleaned_name = re.sub(rstr, \"_\", input_text.strip()).strip('_')\n    cleaned_name = cleaned_name.replace(\"ï¼ˆ\", \"(\").replace(\"ï¼‰\", \")\")\n    if clean_emoji:\n        cleaned_name = utils.remove_emojis(cleaned_name, '_').strip('_')\n    return cleaned_name or 'ç©ºç™½æ˜µç§°'\n\n\ndef start_record(url_data: tuple, count_variable: int = -1) -> None:\n    global error_count\n\n    while True:\n        try:\n            record_finished = False\n            run_once = False\n            start_pushed = False\n            new_record_url = ''\n            count_time = time.time()\n            retry = 0\n            record_quality, record_url, anchor_name = url_data\n            proxy_address = proxy_addr\n            platform = 'æœªçŸ¥å¹³å°'\n            live_domain = '/'.join(record_url.split('/')[0:3])\n\n            if proxy_addr:\n                proxy_address = None\n                for platform in enable_proxy_platform_list:\n                    if platform and platform.strip() in record_url:\n                        proxy_address = proxy_addr\n                        break\n\n            if not proxy_address:\n                if extra_enable_proxy_platform_list:\n                    for pt in extra_enable_proxy_platform_list:\n                        if pt and pt.strip() in record_url:\n                            proxy_address = proxy_addr_bak or None\n\n            # print(f'\\rä»£ç†åœ°å€:{proxy_address}')\n            # print(f'\\rå…¨å±€ä»£ç†:{global_proxy}')\n            while True:\n                try:\n                    port_info = []\n                    if record_url.find(\"douyin.com/\") > -1:\n                        platform = 'æŠ–éŸ³ç›´æ’­'\n                        with semaphore:\n                            if 'v.douyin.com' not in record_url:\n                                json_data = spider.get_douyin_stream_data(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    cookies=dy_cookie)\n                            else:\n                                json_data = spider.get_douyin_app_stream_data(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    cookies=dy_cookie)\n                            port_info = stream.get_douyin_stream_url(json_data, record_quality)\n\n                    elif record_url.find(\"https://www.tiktok.com/\") > -1:\n                        platform = 'TikTokç›´æ’­'\n                        with semaphore:\n                            if global_proxy or proxy_address:\n                                json_data = spider.get_tiktok_stream_data(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    cookies=tiktok_cookie)\n                                port_info = stream.get_tiktok_stream_url(json_data, record_quality)\n                            else:\n                                logger.error(\"é”™è¯¯ä¿¡æ¯: ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæ˜¯å¦èƒ½æ­£å¸¸è®¿é—®TikTokå¹³å°\")\n\n                    elif record_url.find(\"https://live.kuaishou.com/\") > -1:\n                        platform = 'å¿«æ‰‹ç›´æ’­'\n                        with semaphore:\n                            json_data = spider.get_kuaishou_stream_data(\n                                url=record_url,\n                                proxy_addr=proxy_address,\n                                cookies=ks_cookie)\n                            port_info = stream.get_kuaishou_stream_url(json_data, record_quality)\n\n                    elif record_url.find(\"https://www.huya.com/\") > -1:\n                        platform = 'è™ç‰™ç›´æ’­'\n                        with semaphore:\n                            if record_quality not in ['åŸç”»', 'è“å…‰', 'è¶…æ¸…']:\n                                json_data = spider.get_huya_stream_data(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    cookies=hy_cookie)\n                                port_info = stream.get_huya_stream_url(json_data, record_quality)\n                            else:\n                                port_info = spider.get_huya_app_stream_url(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    cookies=hy_cookie\n                                )\n\n                    elif record_url.find(\"https://www.douyu.com/\") > -1:\n                        platform = 'æ–—é±¼ç›´æ’­'\n                        with semaphore:\n                            json_data = spider.get_douyu_info_data(\n                                url=record_url, proxy_addr=proxy_address, cookies=douyu_cookie)\n                            port_info = stream.get_douyu_stream_url(\n                                json_data, video_quality=record_quality, cookies=douyu_cookie, proxy_addr=proxy_address\n                            )\n\n                    elif record_url.find(\"https://www.yy.com/\") > -1:\n                        platform = 'YYç›´æ’­'\n                        with semaphore:\n                            json_data = spider.get_yy_stream_data(\n                                url=record_url, proxy_addr=proxy_address, cookies=yy_cookie)\n                            port_info = stream.get_yy_stream_url(json_data)\n\n                    elif record_url.find(\"https://live.bilibili.com/\") > -1:\n                        platform = 'Bç«™ç›´æ’­'\n                        with semaphore:\n                            json_data = spider.get_bilibili_room_info(\n                                url=record_url, proxy_addr=proxy_address, cookies=bili_cookie)\n                            port_info = stream.get_bilibili_stream_url(\n                                json_data, video_quality=record_quality, cookies=bili_cookie, proxy_addr=proxy_address)\n\n                    elif record_url.find(\"https://www.redelight.cn/\") > -1 or \\\n                            record_url.find(\"https://www.xiaohongshu.com/\") > -1 or \\\n                            record_url.find(\"http://xhslink.com/\") > -1:\n                        platform = 'å°çº¢ä¹¦ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_xhs_stream_url(\n                                record_url, proxy_addr=proxy_address, cookies=xhs_cookie)\n                            retry += 1\n\n                    elif record_url.find(\"https://www.bigo.tv/\") > -1 or record_url.find(\"slink.bigovideo.tv/\") > -1:\n                        platform = 'Bigoç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_bigo_stream_url(\n                                record_url, proxy_addr=proxy_address, cookies=bigo_cookie)\n\n                    elif record_url.find(\"https://app.blued.cn/\") > -1:\n                        platform = 'Bluedç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_blued_stream_url(\n                                record_url, proxy_addr=proxy_address, cookies=blued_cookie)\n\n                    elif record_url.find(\"sooplive.co.kr/\") > -1:\n                        platform = 'SOOP'\n                        with semaphore:\n                            if global_proxy or proxy_address:\n                                json_data = spider.get_sooplive_stream_data(\n                                    url=record_url, proxy_addr=proxy_address,\n                                    cookies=sooplive_cookie,\n                                    username=sooplive_username,\n                                    password=sooplive_password\n                                )\n                                if json_data and json_data.get('new_cookies'):\n                                    utils.update_config(\n                                        config_file, 'Cookie', 'sooplive_cookie', json_data['new_cookies']\n                                    )\n                                port_info = stream.get_stream_url(json_data, record_quality, spec=True)\n                            else:\n                                logger.error(\"é”™è¯¯ä¿¡æ¯: ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æœ¬ç½‘ç»œæ˜¯å¦èƒ½æ­£å¸¸è®¿é—®SOOPå¹³å°\")\n\n                    elif record_url.find(\"cc.163.com/\") > -1:\n                        platform = 'ç½‘æ˜“CCç›´æ’­'\n                        with semaphore:\n                            json_data = spider.get_netease_stream_data(url=record_url, cookies=netease_cookie)\n                            port_info = stream.get_netease_stream_url(json_data, record_quality)\n\n                    elif record_url.find(\"qiandurebo.com/\") > -1:\n                        platform = 'åƒåº¦çƒ­æ’­'\n                        with semaphore:\n                            port_info = spider.get_qiandurebo_stream_data(\n                                url=record_url, proxy_addr=proxy_address, cookies=qiandurebo_cookie)\n\n                    elif record_url.find(\"www.pandalive.co.kr/\") > -1:\n                        platform = 'PandaTV'\n                        with semaphore:\n                            if global_proxy or proxy_address:\n                                json_data = spider.get_pandatv_stream_data(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    cookies=pandatv_cookie\n                                )\n                                port_info = stream.get_stream_url(json_data, record_quality, spec=True)\n                            else:\n                                logger.error(\"é”™è¯¯ä¿¡æ¯: ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æœ¬ç½‘ç»œæ˜¯å¦èƒ½æ­£å¸¸è®¿é—®PandaTVç›´æ’­å¹³å°\")\n\n                    elif record_url.find(\"fm.missevan.com/\") > -1:\n                        platform = 'çŒ«è€³FMç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_maoerfm_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=maoerfm_cookie)\n\n                    elif record_url.find(\"www.winktv.co.kr/\") > -1:\n                        platform = 'WinkTV'\n                        with semaphore:\n                            if global_proxy or proxy_address:\n                                json_data = spider.get_winktv_stream_data(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    cookies=winktv_cookie)\n                                port_info = stream.get_stream_url(json_data, record_quality, spec=True)\n                            else:\n                                logger.error(\"é”™è¯¯ä¿¡æ¯: ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æœ¬ç½‘ç»œæ˜¯å¦èƒ½æ­£å¸¸è®¿é—®WinkTVç›´æ’­å¹³å°\")\n\n                    elif record_url.find(\"www.flextv.co.kr/\") > -1:\n                        platform = 'FlexTV'\n                        with semaphore:\n                            if global_proxy or proxy_address:\n                                json_data = spider.get_flextv_stream_data(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    cookies=flextv_cookie,\n                                    username=flextv_username,\n                                    password=flextv_password\n                                )\n                                if json_data and json_data.get('new_cookies'):\n                                    utils.update_config(\n                                        config_file, 'Cookie', 'flextv_cookie', json_data['new_cookies']\n                                    )\n                                port_info = stream.get_stream_url(json_data, record_quality, spec=True)\n                            else:\n                                logger.error(\"é”™è¯¯ä¿¡æ¯: ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æœ¬ç½‘ç»œæ˜¯å¦èƒ½æ­£å¸¸è®¿é—®FlexTVç›´æ’­å¹³å°\")\n\n                    elif record_url.find(\"look.163.com/\") > -1:\n                        platform = 'Lookç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_looklive_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=look_cookie\n                            )\n\n                    elif record_url.find(\"www.popkontv.com/\") > -1:\n                        platform = 'PopkonTV'\n                        with semaphore:\n                            if global_proxy or proxy_address:\n                                port_info = spider.get_popkontv_stream_url(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    access_token=popkontv_access_token,\n                                    username=popkontv_username,\n                                    password=popkontv_password,\n                                    partner_code=popkontv_partner_code\n                                )\n                                if port_info and port_info.get('new_token'):\n                                    utils.update_config(\n                                        file_path=config_file, section='Authorization', key='popkontv_token',\n                                        new_value=port_info['new_token']\n                                    )\n\n                            else:\n                                logger.error(\"é”™è¯¯ä¿¡æ¯: ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æœ¬ç½‘ç»œæ˜¯å¦èƒ½æ­£å¸¸è®¿é—®PopkonTVç›´æ’­å¹³å°\")\n\n                    elif record_url.find(\"twitcasting.tv/\") > -1:\n                        platform = 'TwitCasting'\n                        with semaphore:\n                            port_info = spider.get_twitcasting_stream_url(\n                                url=record_url,\n                                proxy_addr=proxy_address,\n                                cookies=twitcasting_cookie,\n                                account_type=twitcasting_account_type,\n                                username=twitcasting_username,\n                                password=twitcasting_password\n                            )\n                            if port_info and port_info.get('new_cookies'):\n                                utils.update_config(\n                                    file_path=config_file, section='Cookie', key='twitcasting_cookie',\n                                    new_value=port_info['new_cookies']\n                                )\n\n                    elif record_url.find(\"live.baidu.com/\") > -1:\n                        platform = 'ç™¾åº¦ç›´æ’­'\n                        with semaphore:\n                            json_data = spider.get_baidu_stream_data(\n                                url=record_url,\n                                proxy_addr=proxy_address,\n                                cookies=baidu_cookie)\n                            port_info = stream.get_stream_url(json_data, record_quality)\n\n                    elif record_url.find(\"weibo.com/\") > -1:\n                        platform = 'å¾®åšç›´æ’­'\n                        with semaphore:\n                            json_data = spider.get_weibo_stream_data(\n                                url=record_url, proxy_addr=proxy_address, cookies=weibo_cookie)\n                            port_info = stream.get_stream_url(json_data, record_quality, hls_extra_key='m3u8_url')\n\n                    elif record_url.find(\"kugou.com/\") > -1:\n                        platform = 'é…·ç‹—ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_kugou_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=kugou_cookie)\n\n                    elif record_url.find(\"www.twitch.tv/\") > -1:\n                        platform = 'TwitchTV'\n                        with semaphore:\n                            if global_proxy or proxy_address:\n                                json_data = spider.get_twitchtv_stream_data(\n                                    url=record_url,\n                                    proxy_addr=proxy_address,\n                                    cookies=twitch_cookie\n                                )\n                                port_info = stream.get_stream_url(json_data, record_quality, spec=True)\n                            else:\n                                logger.error(\"é”™è¯¯ä¿¡æ¯: ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æœ¬ç½‘ç»œæ˜¯å¦èƒ½æ­£å¸¸è®¿é—®TwitchTVç›´æ’­å¹³å°\")\n\n                    elif record_url.find(\"www.liveme.com/\") > -1:\n                        if global_proxy or proxy_address:\n                            platform = 'LiveMe'\n                            with semaphore:\n                                port_info = spider.get_liveme_stream_url(\n                                    url=record_url, proxy_addr=proxy_address, cookies=liveme_cookie)\n                        else:\n                            logger.error(\"é”™è¯¯ä¿¡æ¯: ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æœ¬ç½‘ç»œæ˜¯å¦èƒ½æ­£å¸¸è®¿é—®LiveMeç›´æ’­å¹³å°\")\n\n                    elif record_url.find(\"www.huajiao.com/\") > -1:\n                        platform = 'èŠ±æ¤’ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_huajiao_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=huajiao_cookie)\n\n                    elif record_url.find(\"7u66.com/\") > -1:\n                        platform = 'æµæ˜Ÿç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_liuxing_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=liuxing_cookie)\n\n                    elif record_url.find(\"showroom-live.com/\") > -1:\n                        platform = 'ShowRoom'\n                        with semaphore:\n                            json_data = spider.get_showroom_stream_data(\n                                url=record_url, proxy_addr=proxy_address, cookies=showroom_cookie)\n                            port_info = stream.get_stream_url(json_data, record_quality, spec=True)\n\n                    elif record_url.find(\"live.acfun.cn/\") > -1 or record_url.find(\"m.acfun.cn/\") > -1:\n                        platform = 'Acfun'\n                        with semaphore:\n                            json_data = spider.get_acfun_stream_data(\n                                url=record_url, proxy_addr=proxy_address, cookies=acfun_cookie)\n                            port_info = stream.get_stream_url(\n                                json_data, record_quality, url_type='flv', flv_extra_key='url')\n\n                    elif record_url.find(\"tlclw.com/\") > -1:\n                        platform = 'ç•…èŠç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_changliao_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=changliao_cookie)\n\n                    elif record_url.find(\"ybw1666.com/\") > -1:\n                        platform = 'éŸ³æ’­ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_yinbo_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=yinbo_cookie)\n\n                    elif record_url.find(\"www.inke.cn/\") > -1:\n                        platform = 'æ˜ å®¢ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_yingke_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=yingke_cookie)\n\n                    elif record_url.find(\"www.zhihu.com/\") > -1:\n                        platform = 'çŸ¥ä¹ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_zhihu_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=zhihu_cookie)\n\n                    elif record_url.find(\"chzzk.naver.com/\") > -1:\n                        platform = 'CHZZK'\n                        with semaphore:\n                            json_data = spider.get_chzzk_stream_data(\n                                url=record_url, proxy_addr=proxy_address, cookies=chzzk_cookie)\n                            port_info = stream.get_stream_url(json_data, record_quality, spec=True)\n\n                    elif record_url.find(\"www.haixiutv.com/\") > -1:\n                        platform = 'å—¨ç§€ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_haixiu_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=haixiu_cookie)\n\n                    elif record_url.find(\"h5webcdn-pro.vvxqiu.com/\") > -1:\n                        platform = 'VVæ˜Ÿçƒ'\n                        with semaphore:\n                            port_info = spider.get_vvxqiu_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=vvxqiu_cookie)\n\n                    elif record_url.find(\"17.live/\") > -1:\n                        platform = '17Live'\n                        with semaphore:\n                            port_info = spider.get_17live_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=yiqilive_cookie)\n\n                    elif record_url.find(\"www.lang.live/\") > -1:\n                        platform = 'æµªLive'\n                        with semaphore:\n                            port_info = spider.get_langlive_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=langlive_cookie)\n\n                    elif record_url.find(\"m.pp.weimipopo.com/\") > -1:\n                        platform = 'æ¼‚æ¼‚ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_pplive_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=pplive_cookie)\n\n                    elif record_url.find(\".6.cn/\") > -1:\n                        platform = 'å…­é—´æˆ¿ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_6room_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=six_room_cookie)\n\n                    elif record_url.find(\"lehaitv.com/\") > -1:\n                        platform = 'ä¹å—¨ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_haixiu_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=lehaitv_cookie)\n\n                    elif record_url.find(\"h.catshow168.com/\") > -1:\n                        platform = 'èŠ±çŒ«ç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_pplive_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=huamao_cookie)\n\n                    elif record_url.find(\"live.shopee\") > -1 or record_url.find(\"shp.ee/\") > -1:\n                        platform = 'shopee'\n                        with semaphore:\n                            port_info = spider.get_shopee_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=shopee_cookie)\n                            if port_info.get('uid'):\n                                new_record_url = record_url.split('?')[0] + '?' + str(port_info['uid'])\n\n                    elif record_url.find(\"www.youtube.com/\") > -1 or record_url.find(\"youtu.be/\") > -1:\n                        platform = 'Youtube'\n                        with semaphore:\n                            json_data = spider.get_youtube_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=youtube_cookie)\n                            port_info = stream.get_stream_url(json_data, record_quality, spec=True)\n\n                    elif record_url.find(\"tb.cn\") > -1:\n                        platform = 'æ·˜å®ç›´æ’­'\n                        with semaphore:\n                            json_data = spider.get_taobao_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=taobao_cookie)\n                            port_info = stream.get_stream_url(\n                                json_data, record_quality,\n                                url_type='all', hls_extra_key='hlsUrl', flv_extra_key='flvUrl'\n                            )\n\n                    elif record_url.find(\"3.cn\") > -1 or record_url.find(\"m.jd.com\") > -1:\n                        platform = 'äº¬ä¸œç›´æ’­'\n                        with semaphore:\n                            port_info = spider.get_jd_stream_url(\n                                url=record_url, proxy_addr=proxy_address, cookies=jd_cookie)\n\n                    elif record_url.find(\".m3u8\") > -1 or record_url.find(\".flv\") > -1:\n                        platform = 'è‡ªå®šä¹‰å½•åˆ¶ç›´æ’­'\n                        port_info = {\n                            \"anchor_name\": platform + '_' + str(uuid.uuid4())[:8],\n                            \"is_live\": True,\n                            \"record_url\": record_url,\n                        }\n                        if '.flv' in record_url:\n                            port_info['flv_url'] = record_url\n                        else:\n                            port_info['m3u8_url'] = record_url\n\n                    else:\n                        logger.error(f'{record_url} {platform}ç›´æ’­åœ°å€')\n                        return\n\n                    if anchor_name:\n                        if 'ä¸»æ’­:' in anchor_name:\n                            anchor_split: list = anchor_name.split('ä¸»æ’­:')\n                            if len(anchor_split) > 1 and anchor_split[1].strip():\n                                anchor_name = anchor_split[1].strip()\n                            else:\n                                anchor_name = port_info.get(\"anchor_name\", '')\n                    else:\n                        anchor_name = port_info.get(\"anchor_name\", '')\n\n                    if not port_info.get(\"anchor_name\", ''):\n                        print(f'åºå·{count_variable} ç½‘å€å†…å®¹è·å–å¤±è´¥,è¿›è¡Œé‡è¯•ä¸­...è·å–å¤±è´¥çš„åœ°å€æ˜¯:{url_data}')\n                        with max_request_lock:\n                            error_count += 1\n                            error_window.append(1)\n                    else:\n                        anchor_name = clean_name(anchor_name)\n                        record_name = f'åºå·{count_variable} {anchor_name}'\n\n                        if record_url in url_comments:\n                            print(f\"[{anchor_name}]å·²è¢«æ³¨é‡Š,æœ¬æ¡çº¿ç¨‹å°†ä¼šé€€å‡º\")\n                            clear_record_info(record_name, record_url)\n                            return\n\n                        if not url_data[-1] and run_once is False:\n                            if new_record_url:\n                                need_update_line_list.append(\n                                    f'{record_url}|{new_record_url},ä¸»æ’­: {anchor_name.strip()}')\n                                not_record_list.append(new_record_url)\n                            else:\n                                need_update_line_list.append(f'{record_url}|{record_url},ä¸»æ’­: {anchor_name.strip()}')\n                            run_once = True\n\n                        push_at = datetime.datetime.today().strftime('%Y-%m-%d %H:%M:%S')\n                        if port_info['is_live'] is False:\n                            print(f\"\\r{record_name} ç­‰å¾…ç›´æ’­... \")\n\n                            if start_pushed:\n                                if over_show_push:\n                                    push_content = \"ç›´æ’­é—´çŠ¶æ€æ›´æ–°ï¼š[ç›´æ’­é—´åç§°] ç›´æ’­å·²ç»“æŸï¼æ—¶é—´ï¼š[æ—¶é—´]\"\n                                    if over_push_message_text:\n                                        push_content = over_push_message_text\n\n                                    push_content = (push_content.replace('[ç›´æ’­é—´åç§°]', record_name).\n                                                    replace('[æ—¶é—´]', push_at))\n                                    threading.Thread(\n                                        target=push_message,\n                                        args=(record_name, record_url, push_content.replace(r'\\n', '\\n')),\n                                        daemon=True\n                                    ).start()\n                                start_pushed = False\n\n                        else:\n                            content = f\"\\r{record_name} æ­£åœ¨ç›´æ’­ä¸­...\"\n                            print(content)\n\n                            if live_status_push and not start_pushed:\n                                if begin_show_push:\n                                    push_content = \"ç›´æ’­é—´çŠ¶æ€æ›´æ–°ï¼š[ç›´æ’­é—´åç§°] æ­£åœ¨ç›´æ’­ä¸­ï¼Œæ—¶é—´ï¼š[æ—¶é—´]\"\n                                    if begin_push_message_text:\n                                        push_content = begin_push_message_text\n\n                                    push_content = (push_content.replace('[ç›´æ’­é—´åç§°]', record_name).\n                                                    replace('[æ—¶é—´]', push_at))\n                                    threading.Thread(\n                                        target=push_message,\n                                        args=(record_name, record_url, push_content.replace(r'\\n', '\\n')),\n                                        daemon=True\n                                    ).start()\n                                start_pushed = True\n\n                            if disable_record:\n                                time.sleep(push_check_seconds)\n                                continue\n\n                            real_url = port_info.get('record_url')\n                            full_path = f'{default_path}/{platform}'\n                            if real_url:\n                                now = datetime.datetime.today().strftime(\"%Y-%m-%d_%H-%M-%S\")\n                                live_title = port_info.get('title')\n                                title_in_name = ''\n                                if live_title:\n                                    live_title = clean_name(live_title)\n                                    title_in_name = live_title + '_' if filename_by_title else ''\n\n                                try:\n                                    if len(video_save_path) > 0:\n                                        if not video_save_path.endswith(('/', '\\\\')):\n                                            full_path = f'{video_save_path}/{platform}'\n                                        else:\n                                            full_path = f'{video_save_path}{platform}'\n\n                                    full_path = full_path.replace(\"\\\\\", '/')\n                                    if folder_by_author:\n                                        full_path = f'{full_path}/{anchor_name}'\n                                    if folder_by_time:\n                                        full_path = f'{full_path}/{now[:10]}'\n                                    if folder_by_title and port_info.get('title'):\n                                        if folder_by_time:\n                                            full_path = f'{full_path}/{live_title}_{anchor_name}'\n                                        else:\n                                            full_path = f'{full_path}/{now[:10]}_{live_title}'\n                                    if not os.path.exists(full_path):\n                                        os.makedirs(full_path)\n                                except Exception as e:\n                                    logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n\n                                if enable_https_recording and real_url.startswith(\"http://\"):\n                                    real_url = real_url.replace(\"http://\", \"https://\")\n\n                                http_record_list = ['shopee']\n                                if platform in http_record_list:\n                                    real_url = real_url.replace(\"https://\", \"http://\")\n\n                                user_agent = (\"Mozilla/5.0 (Linux; Android 11; SAMSUNG SM-G973U) AppleWebKit/537.36 (\"\n                                              \"KHTML, like Gecko) SamsungBrowser/14.2 Chrome/87.0.4280.141 Mobile \"\n                                              \"Safari/537.36\")\n\n                                rw_timeout = \"15000000\"\n                                analyzeduration = \"20000000\"\n                                probesize = \"10000000\"\n                                bufsize = \"8000k\"\n                                max_muxing_queue_size = \"1024\"\n                                for pt_host in overseas_platform_host:\n                                    if pt_host in record_url:\n                                        rw_timeout = \"50000000\"\n                                        analyzeduration = \"40000000\"\n                                        probesize = \"20000000\"\n                                        bufsize = \"15000k\"\n                                        max_muxing_queue_size = \"2048\"\n                                        break\n\n                                ffmpeg_command = [\n                                    'ffmpeg', \"-y\",\n                                    \"-v\", \"verbose\",\n                                    \"-rw_timeout\", rw_timeout,\n                                    \"-loglevel\", \"error\",\n                                    \"-hide_banner\",\n                                    \"-user_agent\", user_agent,\n                                    \"-protocol_whitelist\", \"rtmp,crypto,file,http,https,tcp,tls,udp,rtp,httpproxy\",\n                                    \"-thread_queue_size\", \"1024\",\n                                    \"-analyzeduration\", analyzeduration,\n                                    \"-probesize\", probesize,\n                                    \"-fflags\", \"+discardcorrupt\",\n                                    \"-re\", \"-i\", real_url,\n                                    \"-bufsize\", bufsize,\n                                    \"-sn\", \"-dn\",\n                                    \"-reconnect_delay_max\", \"60\",\n                                    \"-reconnect_streamed\", \"-reconnect_at_eof\",\n                                    \"-max_muxing_queue_size\", max_muxing_queue_size,\n                                    \"-correct_ts_overflow\", \"1\",\n                                    \"-avoid_negative_ts\", \"1\"\n                                ]\n\n                                record_headers = {\n                                    'PandaTV': 'origin:https://www.pandalive.co.kr',\n                                    'WinkTV': 'origin:https://www.winktv.co.kr',\n                                    'PopkonTV': 'origin:https://www.popkontv.com',\n                                    'FlexTV': 'origin:https://www.flextv.co.kr',\n                                    'åƒåº¦çƒ­æ’­': 'referer:https://qiandurebo.com',\n                                    '17Live': 'referer:https://17.live/en/live/6302408',\n                                    'æµªLive': 'referer:https://www.lang.live',\n                                    'shopee': f'origin:{live_domain}',\n                                }\n\n                                headers = record_headers.get(platform)\n                                if headers:\n                                    ffmpeg_command.insert(11, \"-headers\")\n                                    ffmpeg_command.insert(12, headers)\n\n                                if proxy_address:\n                                    ffmpeg_command.insert(1, \"-http_proxy\")\n                                    ffmpeg_command.insert(2, proxy_address)\n\n                                recording.add(record_name)\n                                start_record_time = datetime.datetime.now()\n                                recording_time_list[record_name] = [start_record_time, record_quality]\n                                rec_info = f\"\\r{anchor_name} å‡†å¤‡å¼€å§‹å½•åˆ¶è§†é¢‘: {full_path}\"\n                                if show_url:\n                                    re_plat = ('WinkTV', 'PandaTV', 'ShowRoom', 'CHZZK', 'Youtube')\n                                    if platform in re_plat:\n                                        logger.info(f\"{platform} | {anchor_name} | ç›´æ’­æºåœ°å€: {port_info['m3u8_url']}\")\n                                    else:\n                                        logger.info(\n                                            f\"{platform} | {anchor_name} | ç›´æ’­æºåœ°å€: {port_info['record_url']}\")\n\n                                only_flv_record = False\n                                only_flv_platform_list = ['shopee', 'èŠ±æ¤’ç›´æ’­']\n                                if 'live.xhscdn.com' in real_url or platform in only_flv_platform_list:\n                                    logger.debug(f\"æç¤º: {platform} å°†å¼ºåˆ¶ä½¿ç”¨FLVæ ¼å¼å½•åˆ¶\")\n                                    only_flv_record = True\n\n                                if video_save_type == \"FLV\" or only_flv_record:\n                                    filename = anchor_name + f'_{title_in_name}' + now + '.flv'\n                                    save_file_path = f'{full_path}/{filename}'\n                                    print(f'{rec_info}/{filename}')\n\n                                    subs_file_path = save_file_path.rsplit('.', maxsplit=1)[0]\n                                    subs_thread_name = f'subs_{Path(subs_file_path).name}'\n                                    if create_time_file:\n                                        create_var[subs_thread_name] = threading.Thread(\n                                            target=generate_subtitles, args=(record_name, subs_file_path)\n                                        )\n                                        create_var[subs_thread_name].daemon = True\n                                        create_var[subs_thread_name].start()\n\n                                    try:\n                                        flv_url = port_info.get('flv_url')\n                                        if flv_url:\n                                            _filepath, _ = urllib.request.urlretrieve(flv_url, save_file_path)\n                                            record_finished = True\n                                            recording.discard(record_name)\n                                            print(\n                                                f\"\\n{anchor_name} {time.strftime('%Y-%m-%d %H:%M:%S')} ç›´æ’­å½•åˆ¶å®Œæˆ\\n\")\n                                        else:\n                                            logger.debug(\"æœªæ‰¾åˆ°FLVç›´æ’­æµï¼Œè·³è¿‡å½•åˆ¶\")\n                                    except Exception as e:\n                                        clear_record_info(record_name, record_url)\n                                        color_obj.print_colored(\n                                            f\"\\n{anchor_name} {time.strftime('%Y-%m-%d %H:%M:%S')} ç›´æ’­å½•åˆ¶å‡ºé”™,è¯·æ£€æŸ¥ç½‘ç»œ\\n\",\n                                            color_obj.RED)\n                                        logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n                                        with max_request_lock:\n                                            error_count += 1\n                                            error_window.append(1)\n\n                                    try:\n                                        if converts_to_mp4 and 'live.xhscdn.com' not in real_url:\n                                            seg_file_path = f\"{full_path}/{anchor_name}_{title_in_name}{now}_%03d.mp4\"\n                                            if split_video_by_time:\n                                                segment_video(\n                                                    save_file_path, seg_file_path,\n                                                    segment_format='mp4', segment_time=split_time,\n                                                    is_original_delete=delete_origin_file\n                                                )\n                                            else:\n                                                threading.Thread(\n                                                    target=converts_mp4,\n                                                    args=(save_file_path, delete_origin_file)\n                                                ).start()\n\n                                        else:\n                                            seg_file_path = f\"{full_path}/{anchor_name}_{title_in_name}{now}_%03d.flv\"\n                                            if split_video_by_time:\n                                                segment_video(\n                                                    save_file_path, seg_file_path,\n                                                    segment_format='flv', segment_time=split_time,\n                                                    is_original_delete=delete_origin_file\n                                                )\n                                    except Exception as e:\n                                        logger.error(f\"è½¬ç å¤±è´¥: {e} \")\n\n                                elif video_save_type == \"MKV\":\n                                    filename = anchor_name + f'_{title_in_name}' + now + \".mkv\"\n                                    print(f'{rec_info}/{filename}')\n                                    save_file_path = full_path + '/' + filename\n\n                                    try:\n                                        if split_video_by_time:\n                                            now = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                                            save_file_path = f\"{full_path}/{anchor_name}_{title_in_name}{now}_%03d.mkv\"\n                                            command = [\n                                                \"-flags\", \"global_header\",\n                                                \"-c:v\", \"copy\",\n                                                \"-c:a\", \"aac\",\n                                                \"-map\", \"0\",\n                                                \"-f\", \"segment\",\n                                                \"-segment_time\", split_time,\n                                                \"-segment_format\", \"matroska\",\n                                                \"-reset_timestamps\", \"1\",\n                                                save_file_path,\n                                            ]\n\n                                        else:\n                                            command = [\n                                                \"-flags\", \"global_header\",\n                                                \"-map\", \"0\",\n                                                \"-c:v\", \"copy\",\n                                                \"-c:a\", \"copy\",\n                                                \"-f\", \"matroska\",\n                                                \"{path}\".format(path=save_file_path),\n                                            ]\n                                        ffmpeg_command.extend(command)\n\n                                        comment_end = check_subprocess(\n                                            record_name,\n                                            record_url,\n                                            ffmpeg_command,\n                                            video_save_type,\n                                            custom_script\n                                        )\n                                        if comment_end:\n                                            return\n\n                                    except subprocess.CalledProcessError as e:\n                                        logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n                                        with max_request_lock:\n                                            error_count += 1\n                                            error_window.append(1)\n\n                                elif video_save_type == \"MP4\":\n                                    filename = anchor_name + f'_{title_in_name}' + now + \".mp4\"\n                                    print(f'{rec_info}/{filename}')\n                                    save_file_path = full_path + '/' + filename\n\n                                    try:\n                                        if split_video_by_time:\n                                            now = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                                            save_file_path = f\"{full_path}/{anchor_name}_{title_in_name}{now}_%03d.mp4\"\n                                            command = [\n                                                \"-c:v\", \"copy\",\n                                                \"-c:a\", \"aac\",\n                                                \"-map\", \"0\",\n                                                \"-f\", \"segment\",\n                                                \"-segment_time\", split_time,\n                                                \"-segment_format\", \"mp4\",\n                                                \"-reset_timestamps\", \"1\",\n                                                \"-movflags\", \"+frag_keyframe+empty_moov\",\n                                                save_file_path,\n                                            ]\n\n                                        else:\n                                            command = [\n                                                \"-map\", \"0\",\n                                                \"-c:v\", \"copy\",\n                                                \"-c:a\", \"copy\",\n                                                \"-f\", \"mp4\",\n                                                save_file_path,\n                                            ]\n\n                                        ffmpeg_command.extend(command)\n                                        comment_end = check_subprocess(\n                                            record_name,\n                                            record_url,\n                                            ffmpeg_command,\n                                            video_save_type,\n                                            custom_script\n                                        )\n                                        if comment_end:\n                                            return\n\n                                    except subprocess.CalledProcessError as e:\n                                        logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n                                        with max_request_lock:\n                                            error_count += 1\n                                            error_window.append(1)\n\n                                elif \"éŸ³é¢‘\" in video_save_type:\n                                    try:\n                                        now = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                                        extension = \"mp3\" if \"MP3\" in video_save_type else \"m4a\"\n                                        name_format = \"_%03d\" if split_video_by_time else \"\"\n                                        save_file_path = (f\"{full_path}/{anchor_name}_{title_in_name}{now}\"\n                                                          f\"{name_format}.{extension}\")\n\n                                        if split_video_by_time:\n                                            print(f'\\r{anchor_name} å‡†å¤‡å¼€å§‹å½•åˆ¶éŸ³é¢‘: {save_file_path}')\n\n                                            if \"MP3\" in video_save_type:\n                                                command = [\n                                                    \"-map\", \"0:a\",\n                                                    \"-c:a\", \"libmp3lame\",\n                                                    \"-ab\", \"320k\",\n                                                    \"-f\", \"segment\",\n                                                    \"-segment_time\", split_time,\n                                                    \"-reset_timestamps\", \"1\",\n                                                    save_file_path,\n                                                ]\n                                            else:\n                                                command = [\n                                                    \"-map\", \"0:a\",\n                                                    \"-c:a\", \"aac\",\n                                                    \"-bsf:a\", \"aac_adtstoasc\",\n                                                    \"-ab\", \"320k\",\n                                                    \"-f\", \"segment\",\n                                                    \"-segment_time\", split_time,\n                                                    \"-segment_format\", 'mpegts',\n                                                    \"-reset_timestamps\", \"1\",\n                                                    save_file_path,\n                                                ]\n\n                                        else:\n                                            if \"MP3\" in video_save_type:\n                                                command = [\n                                                    \"-map\", \"0:a\",\n                                                    \"-c:a\", \"libmp3lame\",\n                                                    \"-ab\", \"320k\",\n                                                    save_file_path,\n                                                ]\n\n                                            else:\n                                                command = [\n                                                    \"-map\", \"0:a\",\n                                                    \"-c:a\", \"aac\",\n                                                    \"-bsf:a\", \"aac_adtstoasc\",\n                                                    \"-ab\", \"320k\",\n                                                    \"-movflags\", \"+faststart\",\n                                                    save_file_path,\n                                                ]\n\n                                        ffmpeg_command.extend(command)\n                                        comment_end = check_subprocess(\n                                            record_name,\n                                            record_url,\n                                            ffmpeg_command,\n                                            video_save_type,\n                                            custom_script\n                                        )\n                                        if comment_end:\n                                            return\n\n                                    except subprocess.CalledProcessError as e:\n                                        logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n                                        with max_request_lock:\n                                            error_count += 1\n                                            error_window.append(1)\n\n                                else:\n                                    if split_video_by_time:\n                                        now = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                                        filename = anchor_name + f'_{title_in_name}' + now + \".ts\"\n                                        print(f'{rec_info}/{filename}')\n\n                                        try:\n                                            save_file_path = f\"{full_path}/{anchor_name}_{title_in_name}{now}_%03d.ts\"\n                                            command = [\n                                                \"-c:v\", \"copy\",\n                                                \"-c:a\", \"copy\",\n                                                \"-map\", \"0\",\n                                                \"-f\", \"segment\",\n                                                \"-segment_time\", split_time,\n                                                \"-segment_format\", 'mpegts',\n                                                \"-reset_timestamps\", \"1\",\n                                                save_file_path,\n                                            ]\n\n                                            ffmpeg_command.extend(command)\n                                            comment_end = check_subprocess(\n                                                record_name,\n                                                record_url,\n                                                ffmpeg_command,\n                                                video_save_type,\n                                                custom_script\n                                            )\n                                            if comment_end:\n                                                if converts_to_mp4:\n                                                    file_paths = utils.get_file_paths(os.path.dirname(save_file_path))\n                                                    prefix = os.path.basename(save_file_path).rsplit('_', maxsplit=1)[0]\n                                                    for path in file_paths:\n                                                        if prefix in path:\n                                                            try:\n                                                                threading.Thread(\n                                                                    target=converts_mp4,\n                                                                    args=(path, delete_origin_file)\n                                                                ).start()\n                                                            except subprocess.CalledProcessError as e:\n                                                                logger.error(f\"è½¬ç å¤±è´¥: {e} \")\n                                                return\n\n                                        except subprocess.CalledProcessError as e:\n                                            logger.error(\n                                                f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n                                            with max_request_lock:\n                                                error_count += 1\n                                                error_window.append(1)\n\n                                    else:\n                                        filename = anchor_name + f'_{title_in_name}' + now + \".ts\"\n                                        print(f'{rec_info}/{filename}')\n                                        save_file_path = full_path + '/' + filename\n\n                                        try:\n                                            command = [\n                                                \"-c:v\", \"copy\",\n                                                \"-c:a\", \"copy\",\n                                                \"-map\", \"0\",\n                                                \"-f\", \"mpegts\",\n                                                save_file_path,\n                                            ]\n\n                                            ffmpeg_command.extend(command)\n                                            comment_end = check_subprocess(\n                                                record_name,\n                                                record_url,\n                                                ffmpeg_command,\n                                                video_save_type,\n                                                custom_script\n                                            )\n                                            if comment_end:\n                                                return\n\n                                        except subprocess.CalledProcessError as e:\n                                            logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n                                            with max_request_lock:\n                                                error_count += 1\n                                                error_window.append(1)\n\n                                count_time = time.time()\n\n                except Exception as e:\n                    logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n                    with max_request_lock:\n                        error_count += 1\n                        error_window.append(1)\n\n                num = random.randint(-5, 5) + delay_default\n                if num < 0:\n                    num = 0\n                x = num\n\n                if error_count > 20:\n                    x = x + 60\n                    color_obj.print_colored(\"\\rç¬æ—¶é”™è¯¯å¤ªå¤š,å»¶è¿ŸåŠ 60ç§’\", color_obj.YELLOW)\n\n                # è¿™é‡Œæ˜¯.å¦‚æœå½•åˆ¶ç»“æŸå,å¾ªç¯æ—¶é—´ä¼šæš‚æ—¶å˜æˆ30såæ£€æµ‹ä¸€é. è¿™æ ·ä¸€å®šç¨‹åº¦ä¸Šé˜²æ­¢ä¸»æ’­å¡é¡¿é€ æˆå°‘å½•\n                # å½“30ç§’è¿‡åæ£€æµ‹ä¸€éå. ä¼šå›å½’æ­£å¸¸è®¾ç½®çš„å¾ªç¯ç§’æ•°\n                if record_finished:\n                    count_time_end = time.time() - count_time\n                    if count_time_end < 60:\n                        x = 30\n                    record_finished = False\n\n                else:\n                    x = num\n\n                # è¿™é‡Œæ˜¯æ­£å¸¸å¾ªç¯\n                while x:\n                    x = x - 1\n                    if loop_time:\n                        print(f'\\r{anchor_name}å¾ªç¯ç­‰å¾…{x}ç§’ ', end=\"\")\n                    time.sleep(1)\n                if loop_time:\n                    print('\\ræ£€æµ‹ç›´æ’­é—´ä¸­...', end=\"\")\n        except Exception as e:\n            logger.error(f\"é”™è¯¯ä¿¡æ¯: {e} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {e.__traceback__.tb_lineno}\")\n            with max_request_lock:\n                error_count += 1\n                error_window.append(1)\n            time.sleep(2)\n\n\ndef backup_file(file_path: str, backup_dir_path: str, limit_counts: int = 6) -> None:\n    try:\n        if not os.path.exists(backup_dir_path):\n            os.makedirs(backup_dir_path)\n\n        timestamp = datetime.datetime.now().strftime('%Y-%m-%d_%H-%M-%S')\n        backup_file_name = os.path.basename(file_path) + '_' + timestamp\n        backup_file_path = os.path.join(backup_dir_path, backup_file_name).replace(\"\\\\\", \"/\")\n        shutil.copy2(file_path, backup_file_path)\n\n        files = os.listdir(backup_dir_path)\n        _files = [f for f in files if f.startswith(os.path.basename(file_path))]\n        _files.sort(key=lambda x: os.path.getmtime(os.path.join(backup_dir_path, x)))\n\n        while len(_files) > limit_counts:\n            oldest_file = _files[0]\n            os.remove(os.path.join(backup_dir_path, oldest_file))\n            _files = _files[1:]\n\n    except Exception as e:\n        logger.error(f'\\rå¤‡ä»½é…ç½®æ–‡ä»¶ {file_path} å¤±è´¥ï¼š{str(e)}')\n\n\ndef backup_file_start() -> None:\n    config_md5 = ''\n    url_config_md5 = ''\n\n    while True:\n        try:\n            if os.path.exists(config_file):\n                new_config_md5 = utils.check_md5(config_file)\n                if new_config_md5 != config_md5:\n                    backup_file(config_file, backup_dir)\n                    config_md5 = new_config_md5\n\n            if os.path.exists(url_config_file):\n                new_url_config_md5 = utils.check_md5(url_config_file)\n                if new_url_config_md5 != url_config_md5:\n                    backup_file(url_config_file, backup_dir)\n                    url_config_md5 = new_url_config_md5\n            time.sleep(600)\n        except Exception as e:\n            logger.error(f\"å¤‡ä»½é…ç½®æ–‡ä»¶å¤±è´¥, é”™è¯¯ä¿¡æ¯: {e}\")\n\n\ndef check_ffmpeg_existence() -> bool:\n    dev_null = open(os.devnull, 'wb')\n    try:\n        subprocess.run(['ffmpeg', '--help'], stdout=dev_null, stderr=dev_null, check=True)\n    except subprocess.CalledProcessError as e:\n        logger.error(e)\n    except FileNotFoundError:\n        ffmpeg_file_check = subprocess.getoutput(ffmpeg_path)\n        if ffmpeg_file_check.find(\"run\") > -1 and os.path.isfile(ffmpeg_path):\n            os.environ['PATH'] += os.pathsep + os.path.dirname(os.path.abspath(ffmpeg_path))\n            return True\n    finally:\n        dev_null.close()\n        if check_ffmpeg():\n            time.sleep(1)\n            return True\n    return False\n\n\n# --------------------------åˆå§‹åŒ–ç¨‹åº-------------------------------------\nif not check_ffmpeg_existence():\n    logger.error(\"ç¼ºå°‘ffmpegæ— æ³•è¿›è¡Œå½•åˆ¶ï¼Œç¨‹åºé€€å‡º\")\n    sys.exit(1)\nprint(\"-----------------------------------------------------\")\nprint(\"|                DouyinLiveRecorder                 |\")\nprint(\"-----------------------------------------------------\")\n\nprint(f\"ç‰ˆæœ¬å·: {version}\")\nprint(\"GitHub: https://github.com/ihmily/DouyinLiveRecorder\")\nprint(f'æ”¯æŒå¹³å°: {platforms}')\nprint('.....................................................')\n\nos.makedirs(os.path.dirname(config_file), exist_ok=True)\nt3 = threading.Thread(target=backup_file_start, args=(), daemon=True)\nt3.start()\nutils.remove_duplicate_lines(url_config_file)\n\n\ndef read_config_value(config_parser: configparser.RawConfigParser, section: str, option: str, default_value: Any) \\\n        -> Any:\n    try:\n\n        config_parser.read(config_file, encoding=text_encoding)\n        if 'å½•åˆ¶è®¾ç½®' not in config_parser.sections():\n            config_parser.add_section('å½•åˆ¶è®¾ç½®')\n        if 'æ¨é€é…ç½®' not in config_parser.sections():\n            config_parser.add_section('æ¨é€é…ç½®')\n        if 'Cookie' not in config_parser.sections():\n            config_parser.add_section('Cookie')\n        if 'Authorization' not in config_parser.sections():\n            config_parser.add_section('Authorization')\n        if 'è´¦å·å¯†ç ' not in config_parser.sections():\n            config_parser.add_section('è´¦å·å¯†ç ')\n        return config_parser.get(section, option)\n    except (configparser.NoSectionError, configparser.NoOptionError):\n        config_parser.set(section, option, str(default_value))\n        with open(config_file, 'w', encoding=text_encoding) as f:\n            config_parser.write(f)\n        return default_value\n\n\noptions = {\"æ˜¯\": True, \"å¦\": False}\nconfig = configparser.RawConfigParser()\nlanguage = read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'language(zh_cn/en)', \"zh_cn\")\nskip_proxy_check = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'æ˜¯å¦è·³è¿‡ä»£ç†æ£€æµ‹(æ˜¯/å¦)', \"å¦\"), False)\nif language and 'en' not in language.lower():\n    from i18n import translated_print\n\n    builtins.print = translated_print\n\ntry:\n    if skip_proxy_check:\n        global_proxy = True\n    else:\n        print('ç³»ç»Ÿä»£ç†æ£€æµ‹ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…...')\n        response_g = urllib.request.urlopen(\"https://www.google.com/\", timeout=15)\n        global_proxy = True\n        print('\\rå…¨å±€/è§„åˆ™ç½‘ç»œä»£ç†å·²å¼€å¯âˆš')\n        pd = ProxyDetector()\n        if pd.is_proxy_enabled():\n            proxy_info = pd.get_proxy_info()\n            print(\"System Proxy: http://{}:{}\".format(proxy_info.ip, proxy_info.port))\nexcept HTTPError as err:\n    print(f\"HTTP error occurred: {err.code} - {err.reason}\")\nexcept URLError as err:\n    color_obj.print_colored(f\"INFOï¼šæœªæ£€æµ‹åˆ°å…¨å±€/è§„åˆ™ç½‘ç»œä»£ç†ï¼Œè¯·æ£€æŸ¥ä»£ç†é…ç½®ï¼ˆè‹¥æ— éœ€å½•åˆ¶æµ·å¤–ç›´æ’­è¯·å¿½ç•¥æ­¤æ¡æç¤ºï¼‰\",\n                            color_obj.YELLOW)\nexcept Exception as err:\n    print(\"An unexpected error occurred:\", err)\n\nwhile True:\n\n    try:\n        if not os.path.isfile(config_file):\n            with open(config_file, 'w', encoding=text_encoding) as file:\n                pass\n\n        ini_URL_content = ''\n        if os.path.isfile(url_config_file):\n            with open(url_config_file, 'r', encoding=text_encoding) as file:\n                ini_URL_content = file.read().strip()\n\n        if not ini_URL_content.strip():\n            input_url = input('è¯·è¾“å…¥è¦å½•åˆ¶çš„ä¸»æ’­ç›´æ’­é—´ç½‘å€ï¼ˆå°½é‡ä½¿ç”¨PCç½‘é¡µç«¯çš„ç›´æ’­é—´åœ°å€ï¼‰:\\n')\n            with open(url_config_file, 'w', encoding=text_encoding) as file:\n                file.write(input_url)\n    except OSError as err:\n        logger.error(f\"å‘ç”Ÿ I/O é”™è¯¯: {err}\")\n\n    video_save_path = read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'ç›´æ’­ä¿å­˜è·¯å¾„(ä¸å¡«åˆ™é»˜è®¤)', \"\")\n    folder_by_author = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'ä¿å­˜æ–‡ä»¶å¤¹æ˜¯å¦ä»¥ä½œè€…åŒºåˆ†', \"æ˜¯\"), False)\n    folder_by_time = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'ä¿å­˜æ–‡ä»¶å¤¹æ˜¯å¦ä»¥æ—¶é—´åŒºåˆ†', \"å¦\"), False)\n    folder_by_title = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'ä¿å­˜æ–‡ä»¶å¤¹æ˜¯å¦ä»¥æ ‡é¢˜åŒºåˆ†', \"å¦\"), False)\n    filename_by_title = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'ä¿å­˜æ–‡ä»¶åæ˜¯å¦åŒ…å«æ ‡é¢˜', \"å¦\"), False)\n    clean_emoji = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'æ˜¯å¦å»é™¤åç§°ä¸­çš„è¡¨æƒ…ç¬¦å·', \"æ˜¯\"), True)\n    video_save_type = read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'è§†é¢‘ä¿å­˜æ ¼å¼ts|mkv|flv|mp4|mp3éŸ³é¢‘|m4aéŸ³é¢‘', \"ts\")\n    video_record_quality = read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'åŸç”»|è¶…æ¸…|é«˜æ¸…|æ ‡æ¸…|æµç•…', \"åŸç”»\")\n    use_proxy = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'æ˜¯å¦ä½¿ç”¨ä»£ç†ip(æ˜¯/å¦)', \"æ˜¯\"), False)\n    proxy_addr_bak = read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'ä»£ç†åœ°å€', \"\")\n    proxy_addr = None if not use_proxy else proxy_addr_bak\n    max_request = int(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'åŒä¸€æ—¶é—´è®¿é—®ç½‘ç»œçš„çº¿ç¨‹æ•°', 3))\n    semaphore = threading.Semaphore(max_request)\n    delay_default = int(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'å¾ªç¯æ—¶é—´(ç§’)', 120))\n    local_delay_default = int(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'æ’é˜Ÿè¯»å–ç½‘å€æ—¶é—´(ç§’)', 0))\n    loop_time = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'æ˜¯å¦æ˜¾ç¤ºå¾ªç¯ç§’æ•°', \"å¦\"), False)\n    show_url = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'æ˜¯å¦æ˜¾ç¤ºç›´æ’­æºåœ°å€', \"å¦\"), False)\n    split_video_by_time = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'åˆ†æ®µå½•åˆ¶æ˜¯å¦å¼€å¯', \"å¦\"), False)\n    enable_https_recording = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'å¼ºåˆ¶å¯ç”¨HTTPSå½•åˆ¶', \"å¦\"), False)\n    disk_space_limit = float(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'å½•åˆ¶ç©ºé—´å‰©ä½™é˜ˆå€¼(gb)', 1.0))\n    split_time = str(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'è§†é¢‘åˆ†æ®µæ—¶é—´(ç§’)', 1800))\n    converts_to_mp4 = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'å½•åˆ¶å®Œæˆåè‡ªåŠ¨è½¬ä¸ºmp4æ ¼å¼', \"å¦\"), False)\n    delete_origin_file = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'è¿½åŠ æ ¼å¼ååˆ é™¤åŸæ–‡ä»¶', \"å¦\"), False)\n    create_time_file = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'ç”Ÿæˆæ—¶é—´å­—å¹•æ–‡ä»¶', \"å¦\"), False)\n    is_run_script = options.get(read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'æ˜¯å¦å½•åˆ¶å®Œæˆåæ‰§è¡Œè‡ªå®šä¹‰è„šæœ¬', \"å¦\"), False)\n    custom_script = read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'è‡ªå®šä¹‰è„šæœ¬æ‰§è¡Œå‘½ä»¤', \"\") if is_run_script else None\n    enable_proxy_platform = read_config_value(\n        config, 'å½•åˆ¶è®¾ç½®', 'ä½¿ç”¨ä»£ç†å½•åˆ¶çš„å¹³å°(é€—å·åˆ†éš”)',\n        'tiktok, soop, pandalive, winktv, flextv, popkontv, twitch, liveme, showroom, chzzk, shopee, shp, youtu')\n    enable_proxy_platform_list = enable_proxy_platform.replace('ï¼Œ', ',').split(',') if enable_proxy_platform else None\n    extra_enable_proxy = read_config_value(config, 'å½•åˆ¶è®¾ç½®', 'é¢å¤–ä½¿ç”¨ä»£ç†å½•åˆ¶çš„å¹³å°(é€—å·åˆ†éš”)', '')\n    extra_enable_proxy_platform_list = extra_enable_proxy.replace('ï¼Œ', ',').split(',') if extra_enable_proxy else None\n    live_status_push = read_config_value(config, 'æ¨é€é…ç½®', 'ç›´æ’­çŠ¶æ€æ¨é€æ¸ é“', \"\")\n    dingtalk_api_url = read_config_value(config, 'æ¨é€é…ç½®', 'é’‰é’‰æ¨é€æ¥å£é“¾æ¥', \"\")\n    xizhi_api_url = read_config_value(config, 'æ¨é€é…ç½®', 'å¾®ä¿¡æ¨é€æ¥å£é“¾æ¥', \"\")\n    bark_msg_api = read_config_value(config, 'æ¨é€é…ç½®', 'barkæ¨é€æ¥å£é“¾æ¥', \"\")\n    bark_msg_level = read_config_value(config, 'æ¨é€é…ç½®', 'barkæ¨é€ä¸­æ–­çº§åˆ«', \"active\")\n    bark_msg_ring = read_config_value(config, 'æ¨é€é…ç½®', 'barkæ¨é€é“ƒå£°', \"bell\")\n    dingtalk_phone_num = read_config_value(config, 'æ¨é€é…ç½®', 'é’‰é’‰é€šçŸ¥@å¯¹è±¡(å¡«æ‰‹æœºå·)', \"\")\n    dingtalk_is_atall = options.get(read_config_value(config, 'æ¨é€é…ç½®', 'é’‰é’‰é€šçŸ¥@å…¨ä½“(æ˜¯/å¦)', \"å¦\"), False)\n    tg_token = read_config_value(config, 'æ¨é€é…ç½®', 'tgapiä»¤ç‰Œ', \"\")\n    tg_chat_id = read_config_value(config, 'æ¨é€é…ç½®', 'tgèŠå¤©id(ä¸ªäººæˆ–è€…ç¾¤ç»„id)', \"\")\n    email_host = read_config_value(config, 'æ¨é€é…ç½®', 'SMTPé‚®ä»¶æœåŠ¡å™¨', \"\")\n    login_email = read_config_value(config, 'æ¨é€é…ç½®', 'é‚®ç®±ç™»å½•è´¦å·', \"\")\n    email_password = read_config_value(config, 'æ¨é€é…ç½®', 'å‘ä»¶äººå¯†ç (æˆæƒç )', \"\")\n    sender_email = read_config_value(config, 'æ¨é€é…ç½®', 'å‘ä»¶äººé‚®ç®±', \"\")\n    sender_name = read_config_value(config, 'æ¨é€é…ç½®', 'å‘ä»¶äººæ˜¾ç¤ºæ˜µç§°', \"\")\n    to_email = read_config_value(config, 'æ¨é€é…ç½®', 'æ”¶ä»¶äººé‚®ç®±', \"\")\n    ntfy_api = read_config_value(config, 'æ¨é€é…ç½®', 'ntfyæ¨é€åœ°å€', \"\")\n    ntfy_tags = read_config_value(config, 'æ¨é€é…ç½®', 'ntfyæ¨é€æ ‡ç­¾', \"tada\")\n    ntfy_email = read_config_value(config, 'æ¨é€é…ç½®', 'ntfyæ¨é€é‚®ç®±', \"\")\n    push_message_title = read_config_value(config, 'æ¨é€é…ç½®', 'è‡ªå®šä¹‰æ¨é€æ ‡é¢˜', \"ç›´æ’­é—´çŠ¶æ€æ›´æ–°é€šçŸ¥\")\n    begin_push_message_text = read_config_value(config, 'æ¨é€é…ç½®', 'è‡ªå®šä¹‰å¼€æ’­æ¨é€å†…å®¹', \"\")\n    over_push_message_text = read_config_value(config, 'æ¨é€é…ç½®', 'è‡ªå®šä¹‰å…³æ’­æ¨é€å†…å®¹', \"\")\n    disable_record = options.get(read_config_value(config, 'æ¨é€é…ç½®', 'åªæ¨é€é€šçŸ¥ä¸å½•åˆ¶(æ˜¯/å¦)', \"å¦\"), False)\n    push_check_seconds = int(read_config_value(config, 'æ¨é€é…ç½®', 'ç›´æ’­æ¨é€æ£€æµ‹é¢‘ç‡(ç§’)', 1800))\n    begin_show_push = options.get(read_config_value(config, 'æ¨é€é…ç½®', 'å¼€æ’­æ¨é€å¼€å¯(æ˜¯/å¦)', \"æ˜¯\"), True)\n    over_show_push = options.get(read_config_value(config, 'æ¨é€é…ç½®', 'å…³æ’­æ¨é€å¼€å¯(æ˜¯/å¦)', \"å¦\"), False)\n    sooplive_username = read_config_value(config, 'è´¦å·å¯†ç ', 'soopliveè´¦å·', '')\n    sooplive_password = read_config_value(config, 'è´¦å·å¯†ç ', 'soopliveå¯†ç ', '')\n    flextv_username = read_config_value(config, 'è´¦å·å¯†ç ', 'flextvè´¦å·', '')\n    flextv_password = read_config_value(config, 'è´¦å·å¯†ç ', 'flextvå¯†ç ', '')\n    popkontv_username = read_config_value(config, 'è´¦å·å¯†ç ', 'popkontvè´¦å·', '')\n    popkontv_partner_code = read_config_value(config, 'è´¦å·å¯†ç ', 'partner_code', 'P-00001')\n    popkontv_password = read_config_value(config, 'è´¦å·å¯†ç ', 'popkontvå¯†ç ', '')\n    twitcasting_account_type = read_config_value(config, 'è´¦å·å¯†ç ', 'twitcastingè´¦å·ç±»å‹', 'normal')\n    twitcasting_username = read_config_value(config, 'è´¦å·å¯†ç ', 'twitcastingè´¦å·', '')\n    twitcasting_password = read_config_value(config, 'è´¦å·å¯†ç ', 'twitcastingå¯†ç ', '')\n    popkontv_access_token = read_config_value(config, 'Authorization', 'popkontv_token', '')\n    dy_cookie = read_config_value(config, 'Cookie', 'æŠ–éŸ³cookie', '')\n    ks_cookie = read_config_value(config, 'Cookie', 'å¿«æ‰‹cookie', '')\n    tiktok_cookie = read_config_value(config, 'Cookie', 'tiktok_cookie', '')\n    hy_cookie = read_config_value(config, 'Cookie', 'è™ç‰™cookie', '')\n    douyu_cookie = read_config_value(config, 'Cookie', 'æ–—é±¼cookie', '')\n    yy_cookie = read_config_value(config, 'Cookie', 'yy_cookie', '')\n    bili_cookie = read_config_value(config, 'Cookie', 'Bç«™cookie', '')\n    xhs_cookie = read_config_value(config, 'Cookie', 'å°çº¢ä¹¦cookie', '')\n    bigo_cookie = read_config_value(config, 'Cookie', 'bigo_cookie', '')\n    blued_cookie = read_config_value(config, 'Cookie', 'blued_cookie', '')\n    sooplive_cookie = read_config_value(config, 'Cookie', 'sooplive_cookie', '')\n    netease_cookie = read_config_value(config, 'Cookie', 'netease_cookie', '')\n    qiandurebo_cookie = read_config_value(config, 'Cookie', 'åƒåº¦çƒ­æ’­_cookie', '')\n    pandatv_cookie = read_config_value(config, 'Cookie', 'pandatv_cookie', '')\n    maoerfm_cookie = read_config_value(config, 'Cookie', 'çŒ«è€³fm_cookie', '')\n    winktv_cookie = read_config_value(config, 'Cookie', 'winktv_cookie', '')\n    flextv_cookie = read_config_value(config, 'Cookie', 'flextv_cookie', '')\n    look_cookie = read_config_value(config, 'Cookie', 'look_cookie', '')\n    twitcasting_cookie = read_config_value(config, 'Cookie', 'twitcasting_cookie', '')\n    baidu_cookie = read_config_value(config, 'Cookie', 'baidu_cookie', '')\n    weibo_cookie = read_config_value(config, 'Cookie', 'weibo_cookie', '')\n    kugou_cookie = read_config_value(config, 'Cookie', 'kugou_cookie', '')\n    twitch_cookie = read_config_value(config, 'Cookie', 'twitch_cookie', '')\n    liveme_cookie = read_config_value(config, 'Cookie', 'liveme_cookie', '')\n    huajiao_cookie = read_config_value(config, 'Cookie', 'huajiao_cookie', '')\n    liuxing_cookie = read_config_value(config, 'Cookie', 'liuxing_cookie', '')\n    showroom_cookie = read_config_value(config, 'Cookie', 'showroom_cookie', '')\n    acfun_cookie = read_config_value(config, 'Cookie', 'acfun_cookie', '')\n    changliao_cookie = read_config_value(config, 'Cookie', 'changliao_cookie', '')\n    yinbo_cookie = read_config_value(config, 'Cookie', 'yinbo_cookie', '')\n    yingke_cookie = read_config_value(config, 'Cookie', 'yingke_cookie', '')\n    zhihu_cookie = read_config_value(config, 'Cookie', 'zhihu_cookie', '')\n    chzzk_cookie = read_config_value(config, 'Cookie', 'chzzk_cookie', '')\n    haixiu_cookie = read_config_value(config, 'Cookie', 'haixiu_cookie', '')\n    vvxqiu_cookie = read_config_value(config, 'Cookie', 'vvxqiu_cookie', '')\n    yiqilive_cookie = read_config_value(config, 'Cookie', '17live_cookie', '')\n    langlive_cookie = read_config_value(config, 'Cookie', 'langlive_cookie', '')\n    pplive_cookie = read_config_value(config, 'Cookie', 'pplive_cookie', '')\n    six_room_cookie = read_config_value(config, 'Cookie', '6room_cookie', '')\n    lehaitv_cookie = read_config_value(config, 'Cookie', 'lehaitv_cookie', '')\n    huamao_cookie = read_config_value(config, 'Cookie', 'huamao_cookie', '')\n    shopee_cookie = read_config_value(config, 'Cookie', 'shopee_cookie', '')\n    youtube_cookie = read_config_value(config, 'Cookie', 'youtube_cookie', '')\n    taobao_cookie = read_config_value(config, 'Cookie', 'taobao_cookie', '')\n    jd_cookie = read_config_value(config, 'Cookie', 'jd_cookie', '')\n\n    video_save_type_list = (\"FLV\", \"MKV\", \"TS\", \"MP4\", \"MP3éŸ³é¢‘\", \"M4AéŸ³é¢‘\")\n    if video_save_type and video_save_type.upper() in video_save_type_list:\n        video_save_type = video_save_type.upper()\n    else:\n        video_save_type = \"TS\"\n\n    check_path = video_save_path or default_path\n    if utils.check_disk_capacity(check_path, show=first_run) < disk_space_limit:\n        exit_recording = True\n        if not recording:\n            logger.warning(f\"Disk space remaining is below {disk_space_limit} GB. \"\n                           f\"Exiting program due to the disk space limit being reached.\")\n            sys.exit(-1)\n\n\n    def contains_url(string: str) -> bool:\n        pattern = r\"(https?://)?(www\\.)?[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)+(:\\d+)?(/.*)?\"\n        return re.search(pattern, string) is not None\n\n\n    try:\n        url_comments, line_list, url_line_list = [[] for _ in range(3)]\n        with (open(url_config_file, \"r\", encoding=text_encoding, errors='ignore') as file):\n            for origin_line in file:\n                if origin_line in line_list:\n                    delete_line(url_config_file, origin_line)\n                line_list.append(origin_line)\n                line = origin_line.strip()\n                if len(line) < 20:\n                    continue\n\n                line_spilt = line.split('ä¸»æ’­: ')\n                if len(line_spilt) > 2:\n                    line = update_file(url_config_file, line, f'{line_spilt[0]}ä¸»æ’­: {line_spilt[-1]}')\n\n                is_comment_line = line.startswith(\"#\")\n                if is_comment_line:\n                    line = line.lstrip('#')\n\n                if re.search('[,ï¼Œ]', line):\n                    split_line = re.split('[,ï¼Œ]', line)\n                else:\n                    split_line = [line, '']\n\n                if len(split_line) == 1:\n                    url = split_line[0]\n                    quality, name = [video_record_quality, '']\n                elif len(split_line) == 2:\n                    if contains_url(split_line[0]):\n                        quality = video_record_quality\n                        url, name = split_line\n                    else:\n                        quality, url = split_line\n                        name = ''\n                else:\n                    quality, url, name = split_line\n\n                if quality not in (\"åŸç”»\", \"è“å…‰\", \"è¶…æ¸…\", \"é«˜æ¸…\", \"æ ‡æ¸…\", \"æµç•…\"):\n                    quality = 'åŸç”»'\n\n                if url not in url_line_list:\n                    url_line_list.append(url)\n                else:\n                    delete_line(url_config_file, origin_line)\n\n                url = 'https://' + url if '://' not in url else url\n                url_host = url.split('/')[2]\n\n                platform_host = [\n                    'live.douyin.com',\n                    'v.douyin.com',\n                    'www.douyin.com',\n                    'live.kuaishou.com',\n                    'www.huya.com',\n                    'www.douyu.com',\n                    'www.yy.com',\n                    'live.bilibili.com',\n                    'www.redelight.cn',\n                    'www.xiaohongshu.com',\n                    'xhslink.com',\n                    'www.bigo.tv',\n                    'slink.bigovideo.tv',\n                    'app.blued.cn',\n                    'cc.163.com',\n                    'qiandurebo.com',\n                    'fm.missevan.com',\n                    'look.163.com',\n                    'twitcasting.tv',\n                    'live.baidu.com',\n                    'weibo.com',\n                    'fanxing.kugou.com',\n                    'fanxing2.kugou.com',\n                    'mfanxing.kugou.com',\n                    'www.huajiao.com',\n                    'www.7u66.com',\n                    'wap.7u66.com',\n                    'live.acfun.cn',\n                    'm.acfun.cn',\n                    'www.tlclw.com',\n                    'wap.tlclw.com',\n                    'live.ybw1666.com',\n                    'wap.ybw1666.com',\n                    'www.inke.cn',\n                    'www.zhihu.com',\n                    'www.haixiutv.com',\n                    \"h5webcdn-pro.vvxqiu.com\",\n                    \"17.live\",\n                    'www.lang.live',\n                    \"m.pp.weimipopo.com\",\n                    \"v.6.cn\",\n                    \"m.6.cn\",\n                    'www.lehaitv.com',\n                    'h.catshow168.com',\n                    'e.tb.cn',\n                    'huodong.m.taobao.com',\n                    '3.cn',\n                    'eco.m.jd.com'\n                ]\n                overseas_platform_host = [\n                    'www.tiktok.com',\n                    'play.sooplive.co.kr',\n                    'm.sooplive.co.kr',\n                    'www.pandalive.co.kr',\n                    'www.winktv.co.kr',\n                    'www.flextv.co.kr',\n                    'www.popkontv.com',\n                    'www.twitch.tv',\n                    'www.liveme.com',\n                    'www.showroom-live.com',\n                    'chzzk.naver.com',\n                    'm.chzzk.naver.com',\n                    'live.shopee.',\n                    '.shp.ee',\n                    'www.youtube.com',\n                    'youtu.be',\n                ]\n\n                platform_host.extend(overseas_platform_host)\n                clean_url_host_list = (\n                    \"live.douyin.com\",\n                    \"live.bilibili.com\",\n                    \"www.huajiao.com\",\n                    \"www.zhihu.com\",\n                    \"www.huya.com\",\n                    \"chzzk.naver.com\",\n                    \"www.liveme.com\",\n                    \"www.haixiutv.com\",\n                    \"v.6.cn\",\n                    \"m.6.cn\",\n                    'www.lehaitv.com'\n                )\n\n                if 'live.shopee.' in url_host or '.shp.ee' in url_host:\n                    url_host = 'live.shopee.' if 'live.shopee.' in url_host else '.shp.ee'\n\n                if url_host in platform_host or any(ext in url for ext in (\".flv\", \".m3u8\")):\n                    if url_host in clean_url_host_list:\n                        url = update_file(url_config_file, old_str=url, new_str=url.split('?')[0])\n\n                    if 'xiaohongshu' in url:\n                        host_id = re.search('&host_id=(.*?)(?=&|$)', url)\n                        if host_id:\n                            new_url = url.split('?')[0] + f'?host_id={host_id.group(1)}'\n                            url = update_file(url_config_file, old_str=url, new_str=new_url)\n\n                    url_comments = [i for i in url_comments if url not in i]\n                    if is_comment_line:\n                        url_comments.append(url)\n                    else:\n                        new_line = (quality, url, name)\n                        url_tuples_list.append(new_line)\n                else:\n                    if not origin_line.startswith('#'):\n                        color_obj.print_colored(f\"\\r{origin_line.strip()} æœ¬è¡ŒåŒ…å«æœªçŸ¥é“¾æ¥.æ­¤æ¡è·³è¿‡\", color_obj.YELLOW)\n                        update_file(url_config_file, old_str=origin_line, new_str=origin_line, start_str='#')\n\n        while len(need_update_line_list):\n            a = need_update_line_list.pop()\n            replace_words = a.split('|')\n            if replace_words[0] != replace_words[1]:\n                if replace_words[1].startswith(\"#\"):\n                    start_with = '#'\n                    new_word = replace_words[1][1:]\n                else:\n                    start_with = None\n                    new_word = replace_words[1]\n                update_file(url_config_file, old_str=replace_words[0], new_str=new_word, start_str=start_with)\n\n        text_no_repeat_url = list(set(url_tuples_list))\n\n        if len(text_no_repeat_url) > 0:\n            for url_tuple in text_no_repeat_url:\n                monitoring = len(running_list)\n\n                if url_tuple[1] in not_record_list:\n                    continue\n\n                if url_tuple[1] not in running_list:\n                    print(f\"\\r{'æ–°å¢' if not first_start else 'ä¼ å…¥'}åœ°å€: {url_tuple[1]}\")\n                    monitoring += 1\n                    args = [url_tuple, monitoring]\n                    create_var[f'thread_{monitoring}'] = threading.Thread(target=start_record, args=args)\n                    create_var[f'thread_{monitoring}'].daemon = True\n                    create_var[f'thread_{monitoring}'].start()\n                    running_list.append(url_tuple[1])\n                    time.sleep(local_delay_default)\n        url_tuples_list = []\n        first_start = False\n\n    except Exception as err:\n        logger.error(f\"é”™è¯¯ä¿¡æ¯: {err} å‘ç”Ÿé”™è¯¯çš„è¡Œæ•°: {err.__traceback__.tb_lineno}\")\n\n    if first_run:\n        t = threading.Thread(target=display_info, args=(), daemon=True)\n        t.start()\n        t2 = threading.Thread(target=adjust_max_request, args=(), daemon=True)\n        t2.start()\n        first_run = False\n\n    time.sleep(3)"
        },
        {
          "name": "msg_push.py",
          "type": "blob",
          "size": 9.2841796875,
          "content": "# -*- coding: utf-8 -*-\n\n\"\"\"\nAuthor: Hmily\nGitHub: https://github.com/ihmily\nDate: 2023-09-03 19:18:36\nUpdate: 2024-10-23 23:37:12\nCopyright (c) 2023-2024 by Hmily, All Rights Reserved.\n\"\"\"\nfrom typing import Dict, Any\nimport json\nimport base64\nimport urllib.request\nimport urllib.error\nimport smtplib\nfrom email.header import Header\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.text import MIMEText\n\nno_proxy_handler = urllib.request.ProxyHandler({})\nopener = urllib.request.build_opener(no_proxy_handler)\nheaders: Dict[str, str] = {'Content-Type': 'application/json'}\n\n\ndef dingtalk(url: str, content: str, number: str = None, is_atall: bool = False) -> Dict[str, Any]:\n    success = []\n    error = []\n    api_list = url.replace('ï¼Œ', ',').split(',') if url.strip() else []\n    for api in api_list:\n        json_data = {\n            'msgtype': 'text',\n            'text': {\n                'content': content,\n            },\n            \"at\": {\n                \"atMobiles\": [\n                    number\n                ],\n                \"isAtAll\": is_atall\n            },\n        }\n        try:\n            data = json.dumps(json_data).encode('utf-8')\n            req = urllib.request.Request(api, data=data, headers=headers)\n            response = opener.open(req, timeout=10)\n            json_str = response.read().decode('utf-8')\n            json_data = json.loads(json_str)\n            if json_data['errcode'] == 0:\n                success.append(api)\n            else:\n                error.append(api)\n                print(f'é’‰é’‰æ¨é€å¤±è´¥, æ¨é€åœ°å€ï¼š{api}, {json_data[\"errmsg\"]}')\n        except Exception as e:\n            error.append(api)\n            print(f'é’‰é’‰æ¨é€å¤±è´¥, æ¨é€åœ°å€ï¼š{api}, é”™è¯¯ä¿¡æ¯:{e}')\n    return {\"success\": success, \"error\": error}\n\n\ndef xizhi(url: str, title: str, content: str) -> Dict[str, Any]:\n    success = []\n    error = []\n    api_list = url.replace('ï¼Œ', ',').split(',') if url.strip() else []\n    for api in api_list:\n        json_data = {\n            'title': title,\n            'content': content\n        }\n        try:\n            data = json.dumps(json_data).encode('utf-8')\n            req = urllib.request.Request(url, data=data, headers=headers)\n            response = opener.open(req, timeout=10)\n            json_str = response.read().decode('utf-8')\n            json_data = json.loads(json_str)\n            if json_data['code'] == 200:\n                success.append(api)\n            else:\n                error.append(api)\n                print(f'å¾®ä¿¡æ¨é€å¤±è´¥, æ¨é€åœ°å€ï¼š{api}, å¤±è´¥ä¿¡æ¯ï¼š{json_data[\"msg\"]}')\n        except Exception as e:\n            error.append(api)\n            print(f'å¾®ä¿¡æ¨é€å¤±è´¥, æ¨é€åœ°å€ï¼š{api}, é”™è¯¯ä¿¡æ¯:{e}')\n    return {\"success\": success, \"error\": error}\n\n\ndef send_email(email_host: str, login_email: str, email_pass: str, sender_email: str, sender_name: str,\n               to_email: str, title: str, content: str) -> Dict[str, Any]:\n    receivers = to_email.replace('ï¼Œ', ',').split(',') if to_email.strip() else []\n\n    try:\n        message = MIMEMultipart()\n        send_name = base64.b64encode(sender_name.encode(\"utf-8\")).decode()\n        message['From'] = f'=?UTF-8?B?{send_name}?= <{sender_email}>'\n        message['Subject'] = Header(title, 'utf-8')\n        if len(receivers) == 1:\n            message['To'] = receivers[0]\n\n        t_apart = MIMEText(content, 'plain', 'utf-8')\n        message.attach(t_apart)\n\n        smtp_obj = smtplib.SMTP_SSL(email_host, 465)\n        smtp_obj.login(login_email, email_pass)\n        smtp_obj.sendmail(sender_email, receivers, message.as_string())\n        return {\"success\": receivers, \"error\": []}\n    except smtplib.SMTPException as e:\n        print(f'é‚®ä»¶æ¨é€å¤±è´¥, æ¨é€é‚®ç®±ï¼š{to_email}, é”™è¯¯ä¿¡æ¯:{e}')\n        return {\"success\": [], \"error\": receivers}\n\n\ndef tg_bot(chat_id: int, token: str, content: str) -> Dict[str, Any]:\n    try:\n        json_data = {\n            \"chat_id\": chat_id,\n            'text': content\n        }\n        url = f'https://api.telegram.org/bot{token}/sendMessage'\n        data = json.dumps(json_data).encode('utf-8')\n        req = urllib.request.Request(url, data=data, headers=headers)\n        response = urllib.request.urlopen(req, timeout=15)\n        json_str = response.read().decode('utf-8')\n        _json_data = json.loads(json_str)\n        return {\"success\": [1], \"error\": []}\n    except Exception as e:\n        print(f'tgæ¨é€å¤±è´¥, èŠå¤©IDï¼š{chat_id}, é”™è¯¯ä¿¡æ¯:{e}')\n        return {\"success\": [], \"error\": [1]}\n\n\ndef bark(api: str, title: str = \"message\", content: str = 'test', level: str = \"active\",\n         badge: int = 1, auto_copy: int = 1, sound: str = \"\", icon: str = \"\", group: str = \"\",\n         is_archive: int = 1, url: str = \"\") -> Dict[str, Any]:\n    success = []\n    error = []\n    api_list = api.replace('ï¼Œ', ',').split(',') if api.strip() else []\n    for _api in api_list:\n        json_data = {\n            \"title\": title,\n            \"body\": content,\n            \"level\": level,\n            \"badge\": badge,\n            \"autoCopy\": auto_copy,\n            \"sound\": sound,\n            \"icon\": icon,\n            \"group\": group,\n            \"isArchive\": is_archive,\n            \"url\": url\n        }\n        try:\n            data = json.dumps(json_data).encode('utf-8')\n            req = urllib.request.Request(_api, data=data, headers=headers)\n            response = opener.open(req, timeout=10)\n            json_str = response.read().decode(\"utf-8\")\n            json_data = json.loads(json_str)\n            if json_data['code'] == 200:\n                success.append(_api)\n            else:\n                error.append(_api)\n                print(f'Barkæ¨é€å¤±è´¥, æ¨é€åœ°å€ï¼š{_api}, å¤±è´¥ä¿¡æ¯ï¼š{json_data[\"message\"]}')\n        except Exception as e:\n            error.append(api)\n            print(f'Barkæ¨é€å¤±è´¥, æ¨é€åœ°å€ï¼š{_api}, é”™è¯¯ä¿¡æ¯:{e}')\n    return {\"success\": success, \"error\": error}\n\n\ndef ntfy(api: str, title: str = \"message\", content: str = 'test', tags: str = 'tada', priority: int = 3,\n         action_url: str = \"\", attach: str = \"\", filename: str = \"\", click: str = \"\", icon: str = \"\",\n         delay: str = \"\", email: str = \"\", call: str = \"\") -> Dict[str, Any]:\n    success = []\n    error = []\n    api_list = api.replace('ï¼Œ', ',').split(',') if api.strip() else []\n    tags = tags.replace('ï¼Œ', ',').split(',') if tags else ['partying_face']\n    actions = [{\"action\": \"view\", \"label\": \"view live\", \"url\": action_url}] if action_url else []\n    for _api in api_list:\n        server, topic = _api.rsplit('/', maxsplit=1)\n        json_data = {\n            \"topic\": topic,\n            \"title\": title,\n            \"message\": content,\n            \"tags\": tags,\n            \"priority\": priority,\n            \"attach\": attach,\n            \"filename\": filename,\n            \"click\": click,\n            \"actions\": actions,\n            \"markdown\": False,\n            \"icon\": icon,\n            \"delay\": delay,\n            \"email\": email,\n            \"call\": call\n        }\n\n        try:\n            data = json.dumps(json_data, ensure_ascii=False).encode('utf-8')\n            req = urllib.request.Request(server, data=data, headers=headers)\n            response = opener.open(req, timeout=10)\n            json_str = response.read().decode(\"utf-8\")\n            json_data = json.loads(json_str)\n            if \"error\" not in json_data:\n                success.append(_api)\n            else:\n                error.append(_api)\n                print(f'ntfyæ¨é€å¤±è´¥, æ¨é€åœ°å€ï¼š{_api}, å¤±è´¥ä¿¡æ¯ï¼š{json_data[\"error\"]}')\n        except urllib.error.HTTPError as e:\n            error.append(_api)\n            error_msg = e.read().decode(\"utf-8\")\n            print(f'ntfyæ¨é€å¤±è´¥, æ¨é€åœ°å€ï¼š{_api}, é”™è¯¯ä¿¡æ¯:{json.loads(error_msg)[\"error\"]}')\n        except Exception as e:\n            error.append(api)\n            print(f'ntfyæ¨é€å¤±è´¥, æ¨é€åœ°å€ï¼š{_api}, é”™è¯¯ä¿¡æ¯:{e}')\n    return {\"success\": success, \"error\": error}\n\n\nif __name__ == '__main__':\n    send_title = 'ç›´æ’­é€šçŸ¥'  # æ ‡é¢˜\n    send_content = 'å¼ ä¸‰ å¼€æ’­äº†ï¼'  # æ¨é€å†…å®¹\n\n    # é’‰é’‰æ¨é€é€šçŸ¥\n    webhook_api = ''  # æ›¿æ¢æˆè‡ªå·±Webhooké“¾æ¥,å‚è€ƒæ–‡æ¡£ï¼šhttps://open.dingtalk.com/document/robots/custom-robot-access\n    phone_number = ''  # è¢«@ç”¨æˆ·çš„æ‰‹æœºå·ç \n    is_atall = ''  # æ˜¯å¦@å…¨ä½“\n    # dingtalk(webhook_api, send_content, phone_number)\n\n    # å¾®ä¿¡æ¨é€é€šçŸ¥\n    # æ›¿æ¢æˆè‡ªå·±çš„å•ç‚¹æ¨é€æ¥å£,è·å–åœ°å€ï¼šhttps://xz.qqoq.net/#/admin/one\n    # å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å¹³å°API å¦‚serveré…± ä½¿ç”¨æ–¹æ³•ä¸€æ ·\n    xizhi_api = 'https://xizhi.qqoq.net/xxxxxxxxx.send'\n    # xizhi(xizhi_api, send_content)\n\n    # telegramæ¨é€é€šçŸ¥\n    tg_token = ''  # tgæœç´¢\"BotFather\"è·å–çš„tokenå€¼\n    tg_chat_id = 000000  # tgæœç´¢\"userinfobot\"è·å–çš„chat_idå€¼ï¼Œå³å¯å‘é€æ¨é€æ¶ˆæ¯ç»™ä½ è‡ªå·±ï¼Œå¦‚æœä¸‹é¢çš„æ˜¯ç¾¤ç»„idåˆ™å‘é€åˆ°ç¾¤\n    # tg_bot(tg_chat_id, tg_token, send_content)\n\n    # email_message(\n    #     email_host=\"smtp.qq.com\",\n    #     login_email=\"\",\n    #     email_pass=\"\",\n    #     sender_email=\"\",\n    #     sender_name=\"\",\n    #     to_email=\"\",\n    #     title=\"\",\n    #     content=\"\"\n    # )\n\n    bark_url = 'https://xxx.xxx.com/key/'\n    # bark(bark_url, send_title, send_content)\n\n    ntfy(\n        api=\"https://ntfy.sh/xxxxx\",\n        title=\"ç›´æ’­æ¨é€\",\n        content=\"xxxå·²å¼€æ’­\",\n    )\n"
        },
        {
          "name": "poetry.toml",
          "type": "blob",
          "size": 0.0712890625,
          "content": "[virtualenvs]\nin-project = true\ncreate = true\nprefer-active-python = true"
        },
        {
          "name": "pyproject.toml",
          "type": "blob",
          "size": 0.611328125,
          "content": "[project]\nrequires-python = \">=3.10\"\n\n[build-system]\nrequires = [\"poetry-core>=1.0.0\"]\nbuild-backend = \"poetry.core.masonry.api\"\n\n[tool.poetry]\nname = \"douyinliverecorder\"\nversion = \"3.0.9\"\ndescription = \"An easy tool for recording live streams\"\nauthors = [\"Hmily\"]\nlicense = \"MIT\"\nreadme = \"README.md\"\nhomepage = \"https://github.com/ihmily/DouyinLiveRecorder\"\nrepository = \"https://github.com/ihmily/DouyinLiveRecorder\"\nkeywords = [\"douyin\", \"live\", \"recorder\"]\n\n[tool.poetry.dependencies]\npython = \"^3.10\"\nrequests = \"^2.25.1\"\nPyExecJS = \"^1.5.1\"\nloguru = \"^0.5.3\"\npycryptodome = \"^3.10.1\"\ndistro = \"^1.9.0\"\ntqdm = \"^4.66.5\""
        },
        {
          "name": "requirements.txt",
          "type": "blob",
          "size": 0.0771484375,
          "content": "requests\nPyExecJS\nloguru==0.7.2\npycryptodome==3.20.0\ndistro==1.9.0\ntqdm==4.66.5"
        },
        {
          "name": "setup.py",
          "type": "blob",
          "size": 0.9453125,
          "content": "# -*- coding: utf-8 -*-\nfrom setuptools import setup, find_packages\n\nsetup(\n    name='douyinliverecorder',\n    version='3.0.9',\n    author='Hmily',\n    description='An easy tool for recording live streams',\n    long_description=open('README.md', encoding='utf-8').read(),\n    long_description_content_type='text/markdown',\n    url='https://github.com/ihmily/DouyinLiveRecorder',\n    packages=find_packages(),\n    install_requires=[\n        'requests',\n        'PyExecJS',\n        'loguru',\n        'pycryptodome',\n        'distro',\n        'tqdm'\n    ],\n    classifiers=[\n        'Development Status :: 3 - Alpha',\n        'Intended Audience :: Developers',\n        'Programming Language :: Python :: 3',\n        'Programming Language :: Python :: 3 :: Only',\n        'Programming Language :: Python :: 3.10',\n        'Programming Language :: Python :: 3.11',\n        'Programming Language :: Python :: 3.12',\n        'Programming Language :: Python :: 3.13',\n    ]\n)\n"
        }
      ]
    }
  ]
}