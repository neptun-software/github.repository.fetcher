{
  "metadata": {
    "timestamp": 1736560679028,
    "page": 330,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjMzMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "Urinx/WeixinBot",
      "stars": 7265,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 1.267578125,
          "content": "# Created by .ignore support plugin (hsz.mobi)\n### Python template\n# Byte-compiled / optimized / DLL files\n__pycache__/\n*.py[cod]\n*$py.class\n\n# C extensions\n*.so\n\n# Distribution / packaging\n.Python\nenv/\nbuild/\ndevelop-eggs/\ndist/\ndownloads/\neggs/\n.eggs/\nlib/\nlib64/\nparts/\nsdist/\nvar/\n*.egg-info/\n.installed.cfg\n*.egg\n\n# PyInstaller\n#  Usually these files are written by a python script from a template\n#  before PyInstaller builds the exe, so as to inject date/other infos into it.\n*.manifest\n*.spec\n\n# Installer logs\npip-log.txt\npip-delete-this-directory.txt\n\n# Unit test / coverage reports\nhtmlcov/\n.tox/\n.coverage\n.coverage.*\n.cache\nnosetests.xml\ncoverage.xml\n*,cover\n.hypothesis/\n\n# Translations\n*.mo\n*.pot\n\n# Django stuff:\n*.log\nlocal_settings.py\n\n# Flask stuff:\ninstance/\n.webassets-cache\n\n# Scrapy stuff:\n.scrapy\n\n# Sphinx documentation\ndocs/_build/\n\n# PyBuilder\ntarget/\n\n# IPython Notebook\n.ipynb_checkpoints\n\n# pyenv\n.python-version\n\n# celery beat schedule file\ncelerybeat-schedule\n\n# dotenv\n.env\n\n# virtualenv\nvenv/\nENV/\n\n# Spyder project settings\n.spyderproject\n\n# Rope project settings\n.ropeproject\n\n# pycharm\n.idea\n\n*.pyc\nwxbot_demo_py3/saved/\nwxbot_project_py2.7/tmp_data/\nwxbot_project_py2.7/wechat/wechat_js_backup/\nwxbot_project_py2.7/config/wechat.conf\nwxbot_project_py2.7/wiki/\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 11.0908203125,
          "content": "                                 Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n   APPENDIX: How to apply the Apache License to your work.\n\n      To apply the Apache License to your work, attach the following\n      boilerplate notice, with the fields enclosed by brackets \"{}\"\n      replaced with your own identifying information. (Don't include\n      the brackets!)  The text should be enclosed in the appropriate\n      comment syntax for the file format. We also recommend that a\n      file or class name and description of purpose be included on the\n      same \"printed page\" as the copyright notice for easier\n      identification within third-party archives.\n\n   Copyright {yyyy} {name of copyright owner}\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 23.0361328125,
          "content": "# WeixinBot [![star this repo](http://github-svg-buttons.herokuapp.com/star.svg?user=Urinx&repo=WeixinBot&style=flat&background=1081C1)](http://github.com/Urinx/WeixinBot) [![fork this repo](http://github-svg-buttons.herokuapp.com/fork.svg?user=Urinx&repo=WeixinBot&style=flat&background=1081C1)](http://github.com/Urinx/WeixinBot/fork) ![python](https://img.shields.io/badge/python-2.7%20&%203.6-ff69b4.svg)\n\n网页版微信API，包含终端版微信及微信机器人\n\n## Contents\n* [Demo](#Demo)\n* [Web Weixin Pipeline](#Web-Weixin-Pipeline)\n* [Web Weixin API](#Web-Weixin-API)\n* [Discussion Group](#Discussion-Group)\n* [Recent Update](#Recent-Update)\n\n## <a name=\"Demo\">Demo</a>\n为了确保能正常运行示例脚本，请安装所需的第三方包。\n\n```\npip install -r requirements.txt\n```\n\n注：下面演示的图片与功能可能不是最新的，具体请看源码。\n\n<div align=center>\n<img src=\"imgs/1.png\" width=\"500\" height=\"550\"/>\n</div>\n\n按照操作指示在手机微信上扫描二维码然后登录，你可以选择是否开启自动回复模式。\n\n![2](imgs/2.png)\n\n开启自动回复模式后，如果接收到的是文字消息就会自动回复，包括群消息。\n\n![3](imgs/3.png)\n\n名片，链接，动画表情和地址位置消息。\n\n![4](imgs/4.png)\n\n![5](imgs/5.png)\n\n网页版上有的功能目前基本上都能支持。\n\n## <a name=\"Web-Weixin-Pipeline\">Web Weixin Pipeline</a>\n\n```\n       +--------------+     +---------------+   +---------------+\n       |              |     |               |   |               |\n       |   Get UUID   |     |  Get Contact  |   | Status Notify |\n       |              |     |               |   |               |\n       +-------+------+     +-------^-------+   +-------^-------+\n               |                    |                   |\n               |                    +-------+  +--------+\n               |                            |  |\n       +-------v------+               +-----+--+------+      +--------------+\n       |              |               |               |      |              |\n       |  Get QRCode  |               |  Weixin Init  +------>  Sync Check  <----+\n       |              |               |               |      |              |    |\n       +-------+------+               +-------^-------+      +-------+------+    |\n               |                              |                      |           |\n               |                              |                      +-----------+\n               |                              |                      |\n       +-------v------+               +-------+--------+     +-------v-------+\n       |              | Confirm Login |                |     |               |\n+------>    Login     +---------------> New Login Page |     |  Weixin Sync  |\n|      |              |               |                |     |               |\n|      +------+-------+               +----------------+     +---------------+\n|             |\n|QRCode Scaned|\n+-------------+\n```\n\n\n## <a name=\"Web-Weixin-API\">Web Weixin API</a>\n\n### 登录\n\n| API | 获取 UUID |\n| --- | --------- |\n| url | https://login.weixin.qq.com/jslogin |\n| method | POST |\n| data | URL Encode |\n| params | **appid**: `应用ID` <br> **fun**: new `应用类型` <br> **lang**: zh\\_CN `语言` <br> **_**: `时间戳` |\n\n返回数据(String):\n```\nwindow.QRLogin.code = 200; window.QRLogin.uuid = \"xxx\"\n```\n> 注：这里的appid就是在微信开放平台注册的应用的AppID。网页版微信有两个AppID，早期的是`wx782c26e4c19acffb`，在微信客户端上显示为应用名称为`Web微信`；现在用的是`wxeb7ec651dd0aefa9`，显示名称为`微信网页版`。\n\n<div align=center>\n<img src=\"imgs/8.jpg\" width=\"320\" height=\"211\"/>\n</div>\n\n<br>\n\n| API | 绑定登陆（webwxpushloginurl） |\n| --- | --------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxpushloginurl |\n| method | GET |\n| params | **uin**: xxx |\n\n返回数据(String):\n```\n{'msg': 'all ok', 'uuid': 'xxx', 'ret': '0'}\n\n通过这种方式可以省掉扫二维码这步操作，更加方便\n```\n<br>\n\n| API | 生成二维码 |\n| --- | --------- |\n| url | https://login.weixin.qq.com/l/ `uuid` |\n| method | GET |\n<br>\n\n| API | 二维码扫描登录 |\n| --- | --------- |\n| url | https://login.weixin.qq.com/cgi-bin/mmwebwx-bin/login |\n| method | GET |\n| params | **tip**: 1 `未扫描` 0 `已扫描` <br> **uuid**: xxx <br> **_**: `时间戳` |\n\n返回数据(String):\n```\nwindow.code=xxx;\n\nxxx:\n\t408 登陆超时\n\t201 扫描成功\n\t200 确认登录\n\n当返回200时，还会有\nwindow.redirect_uri=\"https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxnewloginpage?ticket=xxx&uuid=xxx&lang=xxx&scan=xxx\";\n```\n<br>\n\n| API | webwxnewloginpage |\n| --- | --------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxnewloginpage |\n| method | GET |\n| params | **ticket**: xxx <br> **uuid**: xxx <br> **lang**: zh_CN `语言` <br> **scan**: xxx <br> **fun**: new |\n\n返回数据(XML):\n```\n<error>\n\t<ret>0</ret>\n\t<message>OK</message>\n\t<skey>xxx</skey>\n\t<wxsid>xxx</wxsid>\n\t<wxuin>xxx</wxuin>\n\t<pass_ticket>xxx</pass_ticket>\n\t<isgrayscale>1</isgrayscale>\n</error>\n```\n<br>\n\n### 微信初始化\n\n| API | webwxinit |\n| --- | --------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxinit?pass_ticket=xxx&skey=xxx&r=xxx |\n| method | POST |\n| data | JSON |\n| header | ContentType: application/json; charset=UTF-8 |\n| params | { <br> &nbsp;&nbsp;&nbsp;&nbsp; BaseRequest: { <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tUin: xxx, <br>\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sid: xxx, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tSkey: xxx, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DeviceID: xxx, <br> &nbsp;&nbsp;&nbsp;&nbsp; } <br> } |\n\n返回数据(JSON):\n```\n{\n\t\"BaseResponse\": {\n\t\t\"Ret\": 0,\n\t\t\"ErrMsg\": \"\"\n\t},\n\t\"Count\": 11,\n\t\"ContactList\": [...],\n\t\"SyncKey\": {\n\t\t\"Count\": 4,\n\t\t\"List\": [\n\t\t\t{\n\t\t\t\t\"Key\": 1,\n\t\t\t\t\"Val\": 635705559\n\t\t\t},\n\t\t\t...\n\t\t]\n\t},\n\t\"User\": {\n\t\t\"Uin\": xxx,\n\t\t\"UserName\": xxx,\n\t\t\"NickName\": xxx,\n\t\t\"HeadImgUrl\": xxx,\n\t\t\"RemarkName\": \"\",\n\t\t\"PYInitial\": \"\",\n\t\t\"PYQuanPin\": \"\",\n\t\t\"RemarkPYInitial\": \"\",\n\t\t\"RemarkPYQuanPin\": \"\",\n\t\t\"HideInputBarFlag\": 0,\n\t\t\"StarFriend\": 0,\n\t\t\"Sex\": 1,\n\t\t\"Signature\": \"Apt-get install B\",\n\t\t\"AppAccountFlag\": 0,\n\t\t\"VerifyFlag\": 0,\n\t\t\"ContactFlag\": 0,\n\t\t\"WebWxPluginSwitch\": 0,\n\t\t\"HeadImgFlag\": 1,\n\t\t\"SnsFlag\": 17\n\t},\n\t\"ChatSet\": xxx,\n\t\"SKey\": xxx,\n\t\"ClientVersion\": 369297683,\n\t\"SystemTime\": 1453124908,\n\t\"GrayScale\": 1,\n\t\"InviteStartCount\": 40,\n\t\"MPSubscribeMsgCount\": 2,\n\t\"MPSubscribeMsgList\": [...],\n\t\"ClickReportInterval\": 600000\n}\n```\n<br>\n\n| API | webwxstatusnotify |\n| --- | --------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxstatusnotify?lang=zh_CN&pass_ticket=xxx |\n| method | POST |\n| data | JSON |\n| header | ContentType: application/json; charset=UTF-8 |\n| params | { <br> &nbsp;&nbsp;&nbsp;&nbsp; BaseRequest: { Uin: xxx, Sid: xxx, Skey: xxx, DeviceID: xxx }, <br> &nbsp;&nbsp;&nbsp;&nbsp; Code: 3, <br> &nbsp;&nbsp;&nbsp;&nbsp; FromUserName: `自己ID`, <br> &nbsp;&nbsp;&nbsp;&nbsp; ToUserName: `自己ID`, <br> &nbsp;&nbsp;&nbsp;&nbsp; ClientMsgId: `时间戳` <br> } |\n\n返回数据(JSON):\n```\n{\n\t\"BaseResponse\": {\n\t\t\"Ret\": 0,\n\t\t\"ErrMsg\": \"\"\n\t},\n\t...\n}\n```\n<br>\n\n### 获取联系人信息\n\n| API | webwxgetcontact |\n| --- | --------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin//webwxgetcontact?pass_ticket=xxx&skey=xxx&r=xxx |\n| method | POST |\n| data | JSON |\n| header | ContentType: application/json; charset=UTF-8 |\n\n返回数据(JSON):\n```\n{\n\t\"BaseResponse\": {\n\t\t\"Ret\": 0,\n\t\t\"ErrMsg\": \"\"\n\t},\n\t\"MemberCount\": 334,\n\t\"MemberList\": [\n\t\t{\n\t\t\t\"Uin\": 0,\n\t\t\t\"UserName\": xxx,\n\t\t\t\"NickName\": \"Urinx\",\n\t\t\t\"HeadImgUrl\": xxx,\n\t\t\t\"ContactFlag\": 3,\n\t\t\t\"MemberCount\": 0,\n\t\t\t\"MemberList\": [],\n\t\t\t\"RemarkName\": \"\",\n\t\t\t\"HideInputBarFlag\": 0,\n\t\t\t\"Sex\": 0,\n\t\t\t\"Signature\": \"你好，我们是地球三体组织。在这里，你将感受到不一样的思维模式，以及颠覆常规的世界观。而我们的目标，就是以三体人的智慧，引领人类未来科学技术500年。\",\n\t\t\t\"VerifyFlag\": 8,\n\t\t\t\"OwnerUin\": 0,\n\t\t\t\"PYInitial\": \"URINX\",\n\t\t\t\"PYQuanPin\": \"Urinx\",\n\t\t\t\"RemarkPYInitial\": \"\",\n\t\t\t\"RemarkPYQuanPin\": \"\",\n\t\t\t\"StarFriend\": 0,\n\t\t\t\"AppAccountFlag\": 0,\n\t\t\t\"Statues\": 0,\n\t\t\t\"AttrStatus\": 0,\n\t\t\t\"Province\": \"\",\n\t\t\t\"City\": \"\",\n\t\t\t\"Alias\": \"Urinxs\",\n\t\t\t\"SnsFlag\": 0,\n\t\t\t\"UniFriend\": 0,\n\t\t\t\"DisplayName\": \"\",\n\t\t\t\"ChatRoomId\": 0,\n\t\t\t\"KeyWord\": \"gh_\",\n\t\t\t\"EncryChatRoomId\": \"\"\n\t\t},\n\t\t...\n\t],\n\t\"Seq\": 0\n}\n```\n<br>\n\n| API | webwxbatchgetcontact |\n| --- | --------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxbatchgetcontact?type=ex&r=xxx&pass_ticket=xxx |\n| method | POST |\n| data | JSON |\n| header | ContentType: application/json; charset=UTF-8 |\n| params | { <br> &nbsp;&nbsp;&nbsp;&nbsp; BaseRequest: { Uin: xxx, Sid: xxx, Skey: xxx, DeviceID: xxx }, <br> &nbsp;&nbsp;&nbsp;&nbsp; Count: `群数量`, <br> &nbsp;&nbsp;&nbsp;&nbsp; List: [ <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { UserName: `群ID`, EncryChatRoomId: \"\" }, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ... <br> &nbsp;&nbsp;&nbsp;&nbsp; ], <br> } |\n\n返回数据(JSON)同上\n<br><br>\n\n### 同步刷新\n\n| API | synccheck |\n| --- | --------- |\n| protocol | https |\n| host | webpush.weixin.qq.com <br> webpush.wx2.qq.com <br> webpush.wx8.qq.com <br> webpush.wx.qq.com <br> webpush.web2.wechat.com <br> webpush.web.wechat.com |\n| path | /cgi-bin/mmwebwx-bin/synccheck |\n| method | GET |\n| data | URL Encode |\n| params | **r**: `时间戳` <br> **sid**: xxx <br> **uin**: xxx <br> **skey**: xxx <br> **deviceid**: xxx <br> **synckey**: xxx <br> **_**: `时间戳` |\n\n返回数据(String):\n```\nwindow.synccheck={retcode:\"xxx\",selector:\"xxx\"}\n\nretcode:\n\t0 正常\n\t1100 失败/登出微信\nselector:\n\t0 正常\n\t2 新的消息\n\t7 进入/离开聊天界面\n```\n<br>\n\n| API | webwxsync |\n| --- | --------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxsync?sid=xxx&skey=xxx&pass_ticket=xxx |\n| method | POST |\n| data | JSON |\n| header | ContentType: application/json; charset=UTF-8 |\n| params | { <br> &nbsp;&nbsp;&nbsp;&nbsp; BaseRequest: { Uin: xxx, Sid: xxx, Skey: xxx, DeviceID: xxx }, <br> &nbsp;&nbsp;&nbsp;&nbsp; SyncKey: xxx, <br> &nbsp;&nbsp;&nbsp;&nbsp; rr: `时间戳取反` <br> } |\n\n返回数据(JSON):\n```\n{\n\t'BaseResponse': {'ErrMsg': '', 'Ret': 0},\n\t'SyncKey': {\n\t\t'Count': 7,\n\t\t'List': [\n\t\t\t{'Val': 636214192, 'Key': 1},\n\t\t\t...\n\t\t]\n\t},\n\t'ContinueFlag': 0,\n\t'AddMsgCount': 1,\n\t'AddMsgList': [\n\t\t{\n\t\t\t'FromUserName': '',\n\t\t\t'PlayLength': 0,\n\t\t\t'RecommendInfo': {...},\n\t\t\t'Content': \"\", \n\t\t\t'StatusNotifyUserName': '',\n\t\t\t'StatusNotifyCode': 5,\n\t\t\t'Status': 3,\n\t\t\t'VoiceLength': 0,\n\t\t\t'ToUserName': '',\n\t\t\t'ForwardFlag': 0,\n\t\t\t'AppMsgType': 0,\n\t\t\t'AppInfo': {'Type': 0, 'AppID': ''},\n\t\t\t'Url': '',\n\t\t\t'ImgStatus': 1,\n\t\t\t'MsgType': 51,\n\t\t\t'ImgHeight': 0,\n\t\t\t'MediaId': '', \n\t\t\t'FileName': '',\n\t\t\t'FileSize': '',\n\t\t\t...\n\t\t},\n\t\t...\n\t],\n\t'ModChatRoomMemberCount': 0,\n\t'ModContactList': [],\n\t'DelContactList': [],\n\t'ModChatRoomMemberList': [],\n\t'DelContactCount': 0,\n\t...\n}\n```\n<br>\n\n### 消息接口\n\n| API | webwxsendmsg |\n| --- | ------------ |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxsendmsg?pass_ticket=xxx |\n| method | POST |\n| data | JSON |\n| header | ContentType: application/json; charset=UTF-8 |\n| params | { <br> &nbsp;&nbsp;&nbsp;&nbsp; BaseRequest: { Uin: xxx, Sid: xxx, Skey: xxx, DeviceID: xxx }, <br> &nbsp;&nbsp;&nbsp;&nbsp; Msg: { <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Type: 1 `文字消息`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content: `要发送的消息`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FromUserName: `自己ID`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ToUserName: `好友ID`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LocalID: `与clientMsgId相同`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ClientMsgId: `时间戳左移4位随后补上4位随机数` <br> &nbsp;&nbsp;&nbsp;&nbsp; } <br> } |\n\n返回数据(JSON):\n```\n{\n\t\"BaseResponse\": {\n\t\t\"Ret\": 0,\n\t\t\"ErrMsg\": \"\"\n\t},\n\t...\n}\n```\n\n| API | webwxrevokemsg |\n| --- | ------------ |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxrevokemsg |\n| method | POST |\n| data | JSON |\n| header | ContentType: application/json; charset=UTF-8 |\n| params | { <br> &nbsp;&nbsp;&nbsp;&nbsp; BaseRequest: { Uin: xxx, Sid: xxx, Skey: xxx, DeviceID: xxx }, <br> &nbsp;&nbsp;&nbsp;&nbsp; SvrMsgId: msg_id, <br> &nbsp;&nbsp;&nbsp;&nbsp; ToUserName: user_id, <br> &nbsp;&nbsp;&nbsp;&nbsp; ClientMsgId: local_msg_id <br>  } |\n\n返回数据(JSON):\n```\n{\n\t\"BaseResponse\": {\n\t\t\"Ret\": 0,\n\t\t\"ErrMsg\": \"\"\n\t}\n}\n```\n\n#### 发送表情\n\n| API | webwxsendmsgemotion |\n| --- | ------------ |\n| url | https://wx2.qq.com/cgi-bin/mmwebwx-bin/webwxsendemoticon?fun=sys&f=json&pass_ticket=xxx |\n| method | POST |\n| data | JSON |\n| header | ContentType: application/json; charset=UTF-8 |\n| params | { <br> &nbsp;&nbsp;&nbsp;&nbsp; BaseRequest: { Uin: xxx, Sid: xxx, Skey: xxx, DeviceID: xxx }, <br> &nbsp;&nbsp;&nbsp;&nbsp; Msg: { <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Type: 47 `emoji消息`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EmojiFlag: 2, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MediaId: `表情上传后的媒体ID`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FromUserName: `自己ID`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ToUserName: `好友ID`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LocalID: `与clientMsgId相同`, <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ClientMsgId: `时间戳左移4位随后补上4位随机数` <br> &nbsp;&nbsp;&nbsp;&nbsp; } <br> } |\n\n<br>\n\n### 图片接口\n\n| API | webwxgeticon |\n| --- | ------------ |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxgeticon |\n| method | GET |\n| params | **seq**: `数字，可为空` <br> **username**: `ID` <br> **skey**: xxx |\n<br>\n\n| API | webwxgetheadimg |\n| --- | --------------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxgetheadimg |\n| method | GET |\n| params | **seq**: `数字，可为空` <br> **username**: `群ID` <br> **skey**: xxx |\n<br>\n\n| API | webwxgetmsgimg |\n| --- | --------------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxgetmsgimg |\n| method | GET |\n| params | **MsgID**: `消息ID` <br> **type**: slave `略缩图` or `为空时加载原图` <br> **skey**: xxx |\n<br>\n\n### 多媒体接口\n\n| API | webwxgetvideo |\n| --- | --------------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxgetvideo |\n| method | GET |\n| params | **msgid**: `消息ID` <br> **skey**: xxx |\n<br>\n\n| API | webwxgetvoice |\n| --- | --------------- |\n| url | https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxgetvoice |\n| method | GET |\n| params | **msgid**: `消息ID` <br> **skey**: xxx |\n<br>\n\n### 账号类型\n\n| 类型 | 说明 |\n| :--: | --- |\n| 个人账号 | 以`@`开头，例如：`@xxx` |\n| 群聊 | 以`@@`开头，例如：`@@xxx` |\n| 公众号/服务号 | 以`@`开头，但其`VerifyFlag` & 8 != 0 <br><br> `VerifyFlag`: <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一般个人公众号/服务号：8 <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一般企业的服务号：24 <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 微信官方账号`微信团队`：56 |\n| 特殊账号 | 像文件传输助手之类的账号，有特殊的ID，目前已知的有：<br> `filehelper`, `newsapp`, `fmessage`, `weibo`, `qqmail`, `tmessage`, `qmessage`, `qqsync`, `floatbottle`, `lbsapp`, `shakeapp`, `medianote`, `qqfriend`, `readerapp`, `blogapp`, `facebookapp`, `masssendapp`, `meishiapp`, `feedsapp`, `voip`, `blogappweixin`, `weixin`, `brandsessionholder`, `weixinreminder`, `officialaccounts`, `notification_messages`, `wxitil`, `userexperience_alarm`, `notification_messages` |\n<br>\n\n### 消息类型\n\n消息一般格式：\n```\n{\n\t\"FromUserName\": \"\",\n\t\"ToUserName\": \"\",\n\t\"Content\": \"\",\n\t\"StatusNotifyUserName\": \"\",\n\t\"ImgWidth\": 0,\n\t\"PlayLength\": 0,\n\t\"RecommendInfo\": {...},\n\t\"StatusNotifyCode\": 4,\n\t\"NewMsgId\": \"\",\n\t\"Status\": 3,\n\t\"VoiceLength\": 0,\n\t\"ForwardFlag\": 0,\n\t\"AppMsgType\": 0,\n\t\"Ticket\": \"\",\n\t\"AppInfo\": {...},\n\t\"Url\": \"\",\n\t\"ImgStatus\": 1,\n\t\"MsgType\": 1,\n\t\"ImgHeight\": 0,\n\t\"MediaId\": \"\",\n\t\"MsgId\": \"\",\n\t\"FileName\": \"\",\n\t\"HasProductId\": 0,\n\t\"FileSize\": \"\",\n\t\"CreateTime\": 1454602196,\n\t\"SubMsgType\": 0\n}\n```\n<br>\n\n| MsgType | 说明 |\n| ------- | --- |\n| 1  | 文本消息 |\n| 3  | 图片消息 |\n| 34 | 语音消息 |\n| 37 | 好友确认消息 |\n| 40 | POSSIBLEFRIEND_MSG |\n| 42 | 共享名片 |\n| 43 | 视频消息 |\n| 47 | 动画表情 |\n| 48 | 位置消息 |\n| 49 | 分享链接 |\n| 50 | VOIPMSG |\n| 51 | 微信初始化消息 |\n| 52 | VOIPNOTIFY |\n| 53 | VOIPINVITE |\n| 62 | 小视频 |\n| 9999 | SYSNOTICE |\n| 10000 | 系统消息 |\n| 10002 | 撤回消息 |\n<br>\n\n**微信初始化消息**\n```html\nMsgType: 51\nFromUserName: 自己ID\nToUserName: 自己ID\nStatusNotifyUserName: 最近联系的联系人ID\nContent:\n\t<msg>\n\t    <op id='4'>\n\t        <username>\n\t        \t// 最近联系的联系人\n\t            filehelper,xxx@chatroom,wxid_xxx,xxx,...\n\t        </username>\n\t        <unreadchatlist>\n\t            <chat>\n\t                <username>\n\t                \t// 朋友圈\n\t                    MomentsUnreadMsgStatus\n\t                </username>\n\t                <lastreadtime>\n\t                    1454502365\n\t                </lastreadtime>\n\t            </chat>\n\t        </unreadchatlist>\n\t        <unreadfunctionlist>\n\t        \t// 未读的功能账号消息，群发助手，漂流瓶等\n\t        </unreadfunctionlist>\n\t    </op>\n\t</msg>\n```\n\n**文本消息**\n```\nMsgType: 1\nFromUserName: 发送方ID\nToUserName: 接收方ID\nContent: 消息内容\n```\n\n**图片消息**\n```html\nMsgType: 3\nFromUserName: 发送方ID\nToUserName: 接收方ID\nMsgId: 用于获取图片\nContent:\n\t<msg>\n\t\t<img length=\"6503\" hdlength=\"0\" />\n\t\t<commenturl></commenturl>\n\t</msg>\n```\n\n**小视频消息**\n```html\nMsgType: 62\nFromUserName: 发送方ID\nToUserName: 接收方ID\nMsgId: 用于获取小视频\nContent:\n\t<msg>\n\t\t<img length=\"6503\" hdlength=\"0\" />\n\t\t<commenturl></commenturl>\n\t</msg>\n```\n\n**地理位置消息**\n```\nMsgType: 1\nFromUserName: 发送方ID\nToUserName: 接收方ID\nContent: http://weixin.qq.com/cgi-bin/redirectforward?args=xxx\n// 属于文本消息，只不过内容是一个跳转到地图的链接\n```\n\n**名片消息**\n```js\nMsgType: 42\nFromUserName: 发送方ID\nToUserName: 接收方ID\nContent:\n\t<?xml version=\"1.0\"?>\n\t<msg bigheadimgurl=\"\" smallheadimgurl=\"\" username=\"\" nickname=\"\"  shortpy=\"\" alias=\"\" imagestatus=\"3\" scene=\"17\" province=\"\" city=\"\" sign=\"\" sex=\"1\" certflag=\"0\" certinfo=\"\" brandIconUrl=\"\" brandHomeUrl=\"\" brandSubscriptConfigUrl=\"\" brandFlags=\"0\" regionCode=\"\" />\n\nRecommendInfo:\n\t{\n\t\t\"UserName\": \"xxx\", // ID\n\t\t\"Province\": \"xxx\", \n\t\t\"City\": \"xxx\", \n\t\t\"Scene\": 17, \n\t\t\"QQNum\": 0, \n\t\t\"Content\": \"\", \n\t\t\"Alias\": \"xxx\", // 微信号\n\t\t\"OpCode\": 0, \n\t\t\"Signature\": \"\", \n\t\t\"Ticket\": \"\", \n\t\t\"Sex\": 0, // 1:男, 2:女\n\t\t\"NickName\": \"xxx\", // 昵称\n\t\t\"AttrStatus\": 4293221, \n\t\t\"VerifyFlag\": 0\n\t}\n```\n\n**语音消息**\n```html\nMsgType: 34\nFromUserName: 发送方ID\nToUserName: 接收方ID\nMsgId: 用于获取语音\nContent:\n\t<msg>\n\t\t<voicemsg endflag=\"1\" cancelflag=\"0\" forwardflag=\"0\" voiceformat=\"4\" voicelength=\"1580\" length=\"2026\" bufid=\"216825389722501519\" clientmsgid=\"49efec63a9774a65a932a4e5fcd4e923filehelper174_1454602489\" fromusername=\"\" />\n\t</msg>\n```\n\n**动画表情**\n```html\nMsgType: 47\nFromUserName: 发送方ID\nToUserName: 接收方ID\nContent:\n\t<msg>\n\t\t<emoji fromusername = \"\" tousername = \"\" type=\"2\" idbuffer=\"media:0_0\" md5=\"e68363487d8f0519c4e1047de403b2e7\" len = \"86235\" productid=\"com.tencent.xin.emoticon.bilibili\" androidmd5=\"e68363487d8f0519c4e1047de403b2e7\" androidlen=\"86235\" s60v3md5 = \"e68363487d8f0519c4e1047de403b2e7\" s60v3len=\"86235\" s60v5md5 = \"e68363487d8f0519c4e1047de403b2e7\" s60v5len=\"86235\" cdnurl = \"http://emoji.qpic.cn/wx_emoji/eFygWtxcoMF8M0oCCsksMA0gplXAFQNpiaqsmOicbXl1OC4Tyx18SGsQ/\" designerid = \"\" thumburl = \"http://mmbiz.qpic.cn/mmemoticon/dx4Y70y9XctRJf6tKsy7FwWosxd4DAtItSfhKS0Czr56A70p8U5O8g/0\" encrypturl = \"http://emoji.qpic.cn/wx_emoji/UyYVK8GMlq5VnJ56a4GkKHAiaC266Y0me0KtW6JN2FAZcXiaFKccRevA/\" aeskey= \"a911cc2ec96ddb781b5ca85d24143642\" ></emoji> \n\t\t<gameext type=\"0\" content=\"0\" ></gameext>\n\t</msg>\n```\n\n**普通链接或应用分享消息**\n```html\nMsgType: 49\nAppMsgType: 5\nFromUserName: 发送方ID\nToUserName: 接收方ID\nUrl: 链接地址\nFileName: 链接标题\nContent:\n\t<msg>\n\t\t<appmsg appid=\"\"  sdkver=\"0\">\n\t\t\t<title></title>\n\t\t\t<des></des>\n\t\t\t<type>5</type>\n\t\t\t<content></content>\n\t\t\t<url></url>\n\t\t\t<thumburl></thumburl>\n\t\t\t...\n\t\t</appmsg>\n\t\t<appinfo>\n\t\t\t<version></version>\n\t\t\t<appname></appname>\n\t\t</appinfo>\n\t</msg>\n```\n\n**音乐链接消息**\n```html\nMsgType: 49\nAppMsgType: 3\nFromUserName: 发送方ID\nToUserName: 接收方ID\nUrl: 链接地址\nFileName: 音乐名\n\nAppInfo: // 分享链接的应用\n\t{\n\t\tType: 0, \n\t\tAppID: wx485a97c844086dc9\n\t}\n\nContent:\n\t<msg>\n\t\t<appmsg appid=\"wx485a97c844086dc9\"  sdkver=\"0\">\n\t\t\t<title></title>\n\t\t\t<des></des>\n\t\t\t<action></action>\n\t\t\t<type>3</type>\n\t\t\t<showtype>0</showtype>\n\t\t\t<mediatagname></mediatagname>\n\t\t\t<messageext></messageext>\n\t\t\t<messageaction></messageaction>\n\t\t\t<content></content>\n\t\t\t<contentattr>0</contentattr>\n\t\t\t<url></url>\n\t\t\t<lowurl></lowurl>\n\t\t\t<dataurl>\n\t\t\t\thttp://ws.stream.qqmusic.qq.com/C100003i9hMt1bgui0.m4a?vkey=6867EF99F3684&amp;guid=ffffffffc104ea2964a111cf3ff3edaf&amp;fromtag=46\n\t\t\t</dataurl>\n\t\t\t<lowdataurl>\n\t\t\t\thttp://ws.stream.qqmusic.qq.com/C100003i9hMt1bgui0.m4a?vkey=6867EF99F3684&amp;guid=ffffffffc104ea2964a111cf3ff3edaf&amp;fromtag=46\n\t\t\t</lowdataurl>\n\t\t\t<appattach>\n\t\t\t\t<totallen>0</totallen>\n\t\t\t\t<attachid></attachid>\n\t\t\t\t<emoticonmd5></emoticonmd5>\n\t\t\t\t<fileext></fileext>\n\t\t\t</appattach>\n\t\t\t<extinfo></extinfo>\n\t\t\t<sourceusername></sourceusername>\n\t\t\t<sourcedisplayname></sourcedisplayname>\n\t\t\t<commenturl></commenturl>\n\t\t\t<thumburl>\n\t\t\t\thttp://imgcache.qq.com/music/photo/album/63/180_albumpic_143163_0.jpg\n\t\t\t</thumburl>\n\t\t\t<md5></md5>\n\t\t</appmsg>\n\t\t<fromusername></fromusername>\n\t\t<scene>0</scene>\n\t\t<appinfo>\n\t\t\t<version>29</version>\n\t\t\t<appname>摇一摇搜歌</appname>\n\t\t</appinfo>\n\t\t<commenturl></commenturl>\n\t</msg>\n```\n\n**群消息**\n```\nMsgType: 1\nFromUserName: @@xxx\nToUserName: @xxx\nContent:\n\t@xxx:<br/>xxx\n```\n\n**红包消息**\n```\nMsgType: 49\nAppMsgType: 2001\nFromUserName: 发送方ID\nToUserName: 接收方ID\nContent: 未知\n```\n注：根据网页版的代码可以看到未来可能支持查看红包消息，但目前走的是系统消息，见下。\n\n**系统消息**\n```\nMsgType: 10000\nFromUserName: 发送方ID\nToUserName: 自己ID\nContent:\n\t\"你已添加了 xxx ，现在可以开始聊天了。\"\n\t\"如果陌生人主动添加你为朋友，请谨慎核实对方身份。\"\n\t\"收到红包，请在手机上查看\"\n```\n\n\n## <a name=\"Discussion-Group\">Discussion Group</a>\n如果你希望和 WeixinBot 的其他开发者交流，或者有什么问题和建议，欢迎大家加入微信群【Youth fed the dog】一起讨论。扫描下面的二维码添加机器人为好友，并回复【Aidog】获取入群链接。\n\n<div align=center>\n<img src=\"imgs/groupQrcode.jpg\" width=\"220\" height=\"220\" alt=\"join us\"/>\n</div>\n\n注：这个不是群的二维码，是机器人拉你入群，记得回复机器人【Aidog】哦~ （secret code: Aidog）\n\n## <a name=\"Recent-Update\">Recent Update</a>\n\n- association_login\n\t目前网页版微信已经可以脱离扫码，但是依然需要在客户端进行确认登录。\n"
        },
        {
          "name": "imgs",
          "type": "tree",
          "content": null
        },
        {
          "name": "wxbot_demo_py3",
          "type": "tree",
          "content": null
        },
        {
          "name": "wxbot_project_py2.7",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}