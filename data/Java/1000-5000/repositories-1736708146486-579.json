{
  "metadata": {
    "timestamp": 1736708146486,
    "page": 579,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjU5MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "Teevity/ice",
      "stars": 2862,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.6298828125,
          "content": "# .gitignore for Grails 1.2 and 1.3\n\n# web application files\n/web-app/WEB-INF\n\n# IDE support files\n/.classpath\n/.launch\n/.project\n/.settings\n/*.launch\n/*.tmproj\n/ivy*\n/eclipse\n\n# default HSQL database files for production mode\n/prodDb.*\n\n# general HSQL database files\n*Db.properties\n*Db.script\n\n# logs\n/stacktrace.log\n/test/reports\n/logs\n\n# project release file\n/*.war\n\n# plugin release file\n/*.zip\n\n# older plugin install locations\n/plugins\n/web-app/plugins\n/web-app/WEB-INF/classes\n\n# \"temporary\" build files\n/target\n/target-eclipse\n/work\n\n# other\n*.iws\n\n#project specific:\n/src/java/ice.properties\n\n# OSX\n.DS_Store\n\n# FUSE files\n.fuse_hidden*"
        },
        {
          "name": ".travis.yml",
          "type": "blob",
          "size": 0.208984375,
          "content": "sudo: false\n\nlanguage: groovy\n\njdk:\n- oraclejdk7\n\ninstall:\n  - export ICE_HOME=${TRAVIS_BUILD_DIR}\n  - ./grailsw clean\n  - yes | ./grailsw refresh-dependencies\n\nscript: \n  - bash -n install.sh\n  - ./grailsw compile"
        },
        {
          "name": "OSSMETADATA",
          "type": "blob",
          "size": 0.0244140625,
          "content": "osslifecycle=maintenance\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 20.2314453125,
          "content": "# Ice\n[![Build Status](https://travis-ci.org/Teevity/ice.svg?branch=master)](https://travis-ci.org/Teevity/ice)\n  \n## Intro\nIce provides a birds-eye view of our large and complex cloud landscape from a usage and cost perspective.  Cloud resources are dynamically provisioned by dozens of service teams within the organization and any static snapshot of resource allocation has limited value.  The ability to trend usage patterns on a global scale, yet decompose them down to a region, availability zone, or service team provides incredible flexibility. Ice allows us to quantify our AWS footprint and to make educated decisions regarding reservation purchases and reallocation of resources.\n\nIce is a Grails project. It consists of three parts: processor, reader and UI. Processor processes the Amazon detailed billing file into data readable by reader. Reader reads data generated by processor and renders them to UI. UI queries reader and renders interactive graphs and tables in the browser.\n\n## What it does\nIce communicates with AWS Programmatic Billing Access and maintains knowledge of the following key AWS entity categories:\n- Accounts\n- Regions\n- Services (e.g. EC2, S3, EBS)\n- Usage types (e.g. EC2 - m1.xlarge)\n- Cost and Usage Categories (On-Demand, Reserved, etc.)\nThe UI allows you to filter directly on the above categories to custom tailor your view.\n\nIn addition, Ice supports the definition of Application Groups. These groups are explicitly defined collections of resources in your organization. Such groups allow usage and cost information to be aggregated by individual service teams within your organization, each consisting of multiple services and resources. Ice also provides the ability to email weekly cost reports for each Application Group showing current usage and past trends.\n\nWhen representing the cost profile for individual resources, Ice will factor the depreciation schedule into your cost contour, if so desired.  The ability to amortize one-time purchases, such as reservations, over time allows teams to better evaluate their month-to-month cost footprint.\n\n## Screenshots\n1. Summary page grouped by accounts\n![Summary page grouped by accounts](https://github.com/Netflix/ice/blob/master/screenshots/ss_summary.png?raw=true)\n\n2. Detail page with throughput metrics and grouped by products\n![Detail page with throughput metrics and grouped by products](https://github.com/Netflix/ice/blob/master/screenshots/ss_detail.png?raw=true)\n\n3. Reservation page grouped by on-demand, un-used, reserved, upfront costs\n![Reservation page](https://github.com/Netflix/ice/blob/master/screenshots/ss_reservation_byreservation.png?raw=true)\n\n4. Reservation page with on-demand cost and grouped by instance types\n![Reservation page with on-demand cost and grouped by instance types](https://github.com/Netflix/ice/blob/master/screenshots/ss_reservation_bytype.png?raw=true)\n\n5. Breakdown page of Application Groups\n![Breakdown page of Application Groups](https://github.com/Netflix/ice/blob/master/screenshots/ss_breakdown_appgroup.png?raw=true)\n\n## Prerequisite:\n\n1. First sign up for Amazon's programmatic billing access [here](http://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/detailed-billing-reports.html) to receive detailed billing(hourly) reports. Verify you receive monthly billing file in the following format: `<accountid>-aws-billing-detailed-line-items-<year>-<month>.csv.zip`.\n2. Install Grails 2.4.4 and set GRAILS_HOME and JAVA_HOME\n3. Ice uses [highstock](http://www.highcharts.com/) to generate interactive graphs. Please make sure you acquire the proper license before using it.\n  \n\n## Basic setup: \nUsing basic setup, you don't need any extra code change and you will use the provided bootstrap.groovy. You will need to construct your own ice.properties file and have it in your classpath (I put it at src/java). You can use sample.properties (located at src/java) file as the template.\n\n1. Processor configuration\n\n  1.1 Enable processor in ice.properties:\n      \n          ice.processor=true\n  \n  1.2 In ice.properties, set up the local directory where the processor can copy the billing file to and store the output files. The directory must pre-exist. For example:\n      \n          ice.processor.localDir=/mnt/ice_processor\n\n  1.3 In ice.properties, set up the working s3 bucket and working s3 bucket file prefix to upload the processed output files which will be read by reader. Ice must have read and write access to the s3 bucket. For example:\n      \n          ice.work_s3bucketname=work_s3bucketname\n          ice.work_s3bucketprefix=work_s3bucketprefix/\n  \n  1.4 If running locally, set the following system properties at runtime. ice.s3AccessToken is optional.\n     \n          ice.s3AccessKeyId=<accessKeyId>\n          ice.s3SecretKey=<secretKey>\n          ice.s3AccessToken=<accessToken>\n  \n  If running on a ec2 instance and you want to use the credentials in the instance metadata, you can leave the above properties unset.\n\n  1.5 In ice.properties, specify the start time in millis for the processor to start processing billing files. For example, if you want to start processing billing files from April 1, 2013. If this property is not set, Ice will set startmillis to be the beginning of current month.\n      \n          ice.startmillis=1364774400000\n\n  1.6 Set up s3 billing bucket in ice.properties. If you have multiple payer accounts, you will need to specify multiple values for each property.\n  \n          # s3 bucket name where the billing files are. multiple bucket names are delimited by \",\". Ice must have read access to billing s3 bucket.\n          ice.billing_s3bucketname=billing_s3bucketname1,billing_s3bucketname2\n          # prefix of the billing files. multiple prefixes are delimited by \",\"\n          ice.billing_s3bucketprefix=,\n          # location for the billing bucket.  It should be specified for buckets using v4 validation\n          ice.billing_s3bucketregion=eu-west-1,eu-central-1\n          # specify your payer account id here if across-accounts IAM role access is used. multiple account ids are delimited by \",\". \"ice.billing_payerAccountId=,222222222222\" means assumed role access is only used for the second bucket.\n          ice.billing_payerAccountId=,123456789012\n          # specify the assumed role name here if you use IAM role access to read from billing s3 bucket. multiple role names are delimited by \",\". \"ice.billing_accessRoleName=,ice\" means assumed role access is only used for the second bucket.\n          ice.billing_accessRoleName=,ice\n          # specify external id here if it is used. multiple external ids are delimited by \",\". if you don't use external id, you can leave this property unset.\n          ice.billing_accessExternalId=\n  \n  Tip: If you have multiple payer accounts, or Ice is running from a different account of the s3 billing bucket, for example Ice is running in account \"test\", while the billing files are written to bucket in account \"prod\", account \"test\" does not have read access to those billing files because Amazon created them. In this case, the recommended way is to use cross-accounts IAM roles. E.g. you can create an assumed role \"ice\". In \"prod\" account, grant assumed role \"ice\" with read access to billing bucket, then specify ice.billing_accessRoleName=ice. You can also create a secondary s3 bucket in account \"prod\" and grant read access to account \"test\", and then create a billing file poller running in account \"prod\" to copy billing files to the secondary bucket.\n  \n  1.7 Specify account id and account name mappings in ice.properties. This is for readability purposes. For example:\n      \n          ice.account.account1=123456789011\n          ice.account.account2=123456789012\n          ice.account.account3=123456789013\n\n  1.8 If you have reserved ec2 instances, please also make sure Ice has the permission to make ec2 call describeReservedInstancesOfferings, which is used to get ri prices.\n\n2. Reader configuration\n\n  2.1 Enable reader in ice.properties:\n  \n          ice.reader=true\n      \n  2.2 In ice.properties, set up the local directory where the reader will copy files to. The local directory must pre-exist. For example:\n      \n          ice.reader.localDir=/mnt/ice_reader\n    \n    Make sure the local directory is different if you run processor and reader on the same instance.\n\n  2.3 Same as 1.3\n  \n  2.4 Same as 1.4\n  \n  2.5 Same as 1.5\n  \n  2.6 Specify your organization name in ice.properties. This will show up in the UI header.\n\n          ice.companyName=Your Company Name\n\n  2.7 You can choose to show cost in currency other than \"$\". To enable other currency, specify the following properties in ice.properties:\n\n          # Specify your currency sign here. The default value is $. For other currency symbols, you can use UTF-8 code, e.g. for ¥, you can use ice.currencySign=\\u00A5\n          ice.currencySign=£\n          # Specify your currency conversion rate here. The default value is 1. If 1 pound = 1.5 dollar, then the rate is 0.6666667.\n          ice.currencyRate=0.6666667\n\n  2.8 By default, Ice pulls in [Highstock](https://www.highcharts.com/) from its CDN.\n\n          ice.highstockUrl=https://example.com/js/highstock.js\n\n3. Running Ice\n\n  After the processor and reader setup, you can choose to run the processor and reader on the same or different instances. Running on different instances is recommended. For the first time, you should FIRST RUN PROCESSOR. Make sure you see non-empty output files in your working s3 bucket. Then run reader and browse to http://localhost:8080/ice/dashboard/summary.\n  \n  Here are the steps of getting ice running locally:\n\n  3.1 Pull the project\n  \n  3.2 Run `grails wrapper` from the project root directory. This step will pull all necessary jar from maven central.\n\n  3.3 Construct ice.properties for processor and make sure ice.properties is added to directory src/java\n\n  3.4 Run Ice processor. From project root directory, run `./grailsw run-app`. Note you may need to add system properties like `./grailsw -Dice.s3AccessKeyId=<s3AccessKeyId> -Dice.s3SecretKey=<s3SecretKey> run-app`. To verify Ice processor runs successfully, make sure you see un-empty output files in your working S3 bucket, e.g. tagdb_all, cost_weekly_all, cost_daily_all_2013, etc.\n  \n  3.5 Repeat steps 3.3 and 3.4 to run Ice reader.\n\n  Tip: Sometimes you want to re-start from a clean slate. To do that:\n  \n  a) Get the latest code\n  \n  b) Delete all files from your working s3 bucket under the working prefix\n\n  c) Delete all files from your local ice directory (for processor and reader)\n  \n  d) Start Ice in processor mode. Make sure it runs correctly.\n  \n  e) Then start Ice in reader mode.\n\n## Ice Cookbook: \n\n1. A community cookbook is available for deploying Ice via Chef here https://github.com/mdsol/ice_cookbook.\n\n## Ice Docker Image:\n\n1. A community image is available for deploying Ice via Docker here https://github.com/jonbrouse/docker-ice\n\n  \n## Advanced options:\nOptions with * require writing your own code.\n\n1. Basic reservation service\n\n  If you have reserved instances in your accounts, you may want to make use of the reservation view in the UI, where you can browse/analyze your on-demand, unused reserved instance usage & cost of different instance types in different regions, zones and accounts. in Bootstrap.groovy, BasicReservationService is used. You can specify reservation period and reservation utilization type in ice.properties:\n  \n          # reservation period, possible values are oneyear, threeyear\n          ice.reservationPeriod=threeyear\n          # reservation utilization, possible values are LIGHT, HEAVY\n          ice.reservationUtilization=HEAVY\n\n2. Reservation capacity poller\n\n  To use BasicReservationService, you should also run reservation capacity poller, which will call ec2 API (describeReservedInstances) to poll reservation capacities for each reservation owner account defined in ice.properties. The reservation capacities history is stored in a file in s3 bucket. To run reservation capacity poller, following steps below:\n  \n    2.1 Set ice.reservationCapacityPoller=true in ice.properties\n    \n    2.2 Make sure you set up reservation owner accounts in ice.properties. For example:\n\n          ice.owneraccount.account1=\n          ice.owneraccount.account2=account3,account4\n          ice.owneraccount.account5=account6\n    \n    2.3 If you need to poll reservation capacity of different accounts, set up IAM roles. Then specify the assumed roles and external ids in ice.properties. For example, if assumed role \"ice\" is used:\n\n          ice.owneraccount.account1.role=ice\n          ice.owneraccount.account2.role=ice\n          ice.owneraccount.account5.role=ice\n\n        If you use external id too, specify it like following:\n\n          ice.owneraccount.account1.externalId=\n          \n\n3. On-demand instance cost alert\n\n  You can set set an on-demand instance cost threshold so that alert emails will be sent through Amazon SES if the threshold is reached within last 24 hours. The alert emails will be sent no more than once a day. The following properties are needed in ice.properties:\n  \n          # url prefix, e.g. http://ice.netflix.com/. This is used to create the link in alert email\n          ice.urlPrefix=\n          # from email address, this email must be registered in ses.\n          ice.fromEmail=\n          # ec2 ondemand hourly cost threshold to send alert email. The alert email will be sent at most once per day.\n          ice.ondemandCostAlertThreshold=250\n          # ec2 ondemand hourly cost alert emails, separated by \",\"\n          ice.ondemandCostAlertEmails=\n\n4. Sharing reserved instances among accounts (*)\n\n  All linked accounts under the same payer account can share each other's reservations (see http://docs.aws.amazon.com/awsaccountbilling/latest/about/AboutConsolidatedBilling.html).\n\n  If reserved instances are shared among accounts, please specify them in ice.properties. For example:\n\n          # set reservation owner accounts. In the example below, account1, account2, account3 and account4 are linked under the same payer account. account5, account6 are linked under the same payer account.\n          # if reservation capacity poller is enabled, the poller will try to poll reservation capacity through ec2 API (describeReservedInstances) for each reservation owner account.\n          ice.owneraccount.account1_name=account2_name,account3_name,account4_name\n          ice.owneraccount.account2_name=account1_name,account3_name,account4_name\n          ice.owneraccount.account5_name=account6_name\n  \n  If different accounts have different AZ mappings, you will also need to subclass BasicAccountService and override method getAccountMappedZone to provide correct AZ mapping.\n   \n5. Customized reservation service (*)\n\n  Reserved instance prices in BasicReservationService are copied from Amazon's ec2 price page as of Jun 1, 2013. Your accounts may have different reservation prices (e.g. Amazon may change prices in the future). In this case, you need to write a subclass of BasicReservationService to provide the correct pricing.\n\n6. Resource service (*)\n\n  To use the breakdown feature and application group feature, first make sure you signed up the beta version of detailed billing file with resources and tag. Verify you receive monthly billing file in the this format: `<accountid>-aws-billing-detailed-line-items-with-resources-and-tags-<year>-<month>.csv.zip`. Then you will need to subclass abstract class ResourceService and have your own bootstrap.groovy create ProcessorConfig and ReaderConfig. See SampleMapDbResourceService for a sample of subclass.\n  \n  If your custom tags have limited number of value combinations (e.g. < 100), you can choose to set the following parameter in ice.properties, and Ice will generate resource group values for each line item in the billing file. Please be VERY careful about using this feature. Resource group values are generated by concatenating values of of all custom tags. If it results in a long list of resource group values, Ice performance will be greatly affected. Please make sure the custom tags exist in the header of the billing file.\n  \n          # specify your custom tags here. Multiple tags are delimited by \",\". If specified, BasicResourceService will be used to generate resource groups for you.\n          # PLEASE MAKE SURE you have limited number (e.g. < 100) of unique value combinations from your custom tags, otherwise Ice performance will be greatly affected.\n          ice.customTags=tag1,tag2\n          \n  You will need to ensure that any tag you wish to use in ICE is ticked in the \"Manage Cost allocation report\" page here: https://portal.aws.amazon.com/gp/aws/developer/account?ie=UTF8&action=cost-allocation-report\n  \n  Any tag that you have created yourself (as opposed to being automatically generated by AWS) will require you to use the ice.customTags= parameter in the following way. See this example:\n  \n  ice.customTags=user:CostCenter,User:Environment\n \n\n7. Weekly cost email per application group (*)\n\n  If you have resource service enabled, you can use BasicWeeklyCostEmailService to send weekly cost emails. You can use the default BasicS3ApplicationGroupService, or you can have your own ApplicationGroupService implementation.\n  \n8. Throughput metric service (*)\n   \n  You may also want to show your organization's throughput metric alongside usage and cost. You can choose to implement interface ThroughputMetricService, or you can simply use the existing BasicThroughputMetricService. Using BasicThroughputMetricService requires the throughput metric data to be stores monthly in files with names like <filePrefix>_2013_04, <filePrefix>_2013_05. Data in files should be delimited by new lines. <filePrefix> is specified when you create BasicThroughputMetricService instance.\n  \n9. Blended Costs\n  By default, unblended costs are shown. You can show Blended costs with the following configuration:\n\n        ice.use_blended=true\n\n10. Extra Grails configuration file\n\n  If you need to setup custom Grails settings, you can specify an additional configuration file to be loaded by Grails by setting the ``ice.config.location`` system property to the location of that file.\n\n  See http://docs.grails.org/2.4.4/guide/single.html#configExternalized for more information.\n\n## Example IAM Permissions\n\nGrant the following permissions to either an instance role, or the user running the reports:\n```\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Stmt1421551747000\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeReservedInstances\",\n        \"ec2:DescribeReservedInstancesOfferings\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    },\n    {\n      \"Sid\": \"Stmt1418665415000\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:DeleteObject\",\n        \"s3:GetBucketLocation\",\n        \"s3:GetObject\",\n        \"s3:ListAllMyBuckets\",\n        \"s3:ListBucket\",\n        \"s3:PutObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::work-bucket-name/*\"\n      ]\n    },\n    {\n      \"Sid\": \"Stmt1418665415001\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetBucketLocation\",\n        \"s3:ListBucket\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::work-bucket-name\"\n      ]\n    },\n    {\n      \"Sid\": \"Stmt1418665415000a\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetBucketLocation\",\n        \"s3:GetObject\",\n        \"s3:ListAllMyBuckets\",\n        \"s3:ListBucket\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::billing-reports-bucket/*\"\n      ]\n    },\n    {\n      \"Sid\": \"Stmt1418665415001a\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetBucketLocation\",\n        \"s3:ListBucket\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::billing-reports-bucket\"\n      ]\n    }\n  ]\n}\n```\n\n\n## Support\n\nPlease use the [Ice Google Group](https://groups.google.com/d/forum/iceusers) for general questions and discussion.\n\n## Download Snapshot Builds\nDownload snapshot builds here: [https://netflixoss.ci.cloudbees.com/job/ice-master/](https://netflixoss.ci.cloudbees.com/job/ice-master/)\n\n## License\n\nCopyright 2014 Netflix, Inc.\n\nLicensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n"
        },
        {
          "name": "application.properties",
          "type": "blob",
          "size": 1.158203125,
          "content": "/*\n * Copyright 2013 Netflix, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\napp.grails.version=2.4.4\napp.name=ice\napp.servlet.version=2.4\napp.version=1.1.0\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d %5p [%c] %m%n\nlog4j.category.com.amazonaws.request=WARN\nlog4j.category.com.netflix.cloud=DEBUG\nlog4j.category.com.netflix.logging=WARN\nlog4j.category.com.netflix.monitoring=WARN\nlog4j.category.hibernate=ERROR\nlog4j.category.httpclient=ERROR\nlog4j.category.org.codehaus.groovy=WARN\nlog4j.category.sun.reflect=WARN\nlog4j.rootLogger=INFO, stdout\n"
        },
        {
          "name": "conf",
          "type": "tree",
          "content": null
        },
        {
          "name": "grails-app",
          "type": "tree",
          "content": null
        },
        {
          "name": "grailsw",
          "type": "blob",
          "size": 9.37890625,
          "content": "##############################################################################\n##                                                                          ##\n##  Grails JVM Bootstrap for UN*X                                           ##\n##                                                                          ##\n##############################################################################\n\nPROGNAME=`basename \"$0\"`\nDIRNAME=`dirname \"$0\"`\n\n# Use the maximum available, or set MAX_FD != -1 to use that\nMAX_FD=\"maximum\"\n\nwarn() {\n    echo \"${PROGNAME}: $*\"\n}\n\ndie() {\n    warn \"$*\"\n    exit 1\n}\n\nearlyInit() {\n\treturn\n}\nlateInit() {\n\treturn\n}\n\nGROOVY_STARTUP=~/.groovy/startup\nif [ -r \"$GROOVY_STARTUP\" ]; then\n\t. \"$GROOVY_STARTUP\"\nfi\n\nearlyInit\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false;\ndarwin=false;\nmingw=false;\ncase \"`uname`\" in\n    CYGWIN*)\n        cygwin=true\n        ;;\n\n    Darwin*)\n        darwin=true\n        ;;\n\n    MINGW*)\n        mingw=true\n        ;;\nesac\n\n# Attempt to set JAVA_HOME if it's not already set\nif [ -z \"$JAVA_HOME\" ]; then\n\n\t# Set JAVA_HOME for Darwin\n\tif $darwin; then\n\n\t\t[ -z \"$JAVA_HOME\" -a -d \"/Library/Java/Home\" ] &&\n\t\t\texport JAVA_HOME=\"/Library/Java/Home\"\n\n\t\t[ -z \"$JAVA_HOME\" -a -d \"/System/Library/Frameworks/JavaVM.framework/Home\" ] &&\n\t\t\texport JAVA_HOME=\"/System/Library/Frameworks/JavaVM.framework/Home\"\n\n\tfi\n\nfi\n\n# For Cygwin, ensure paths are in UNIX format before anything is touched\nif $cygwin ; then\n    [ -n \"$GRAILS_HOME\" ] &&\n        GRAILS_HOME=`cygpath --unix \"$GRAILS_HOME\"`\n    [ -n \"$JAVACMD\" ] &&\n        JAVACMD=`cygpath --unix \"$JAVACMD\"`\n    [ -n \"$JAVA_HOME\" ] &&\n        JAVA_HOME=`cygpath --unix \"$JAVA_HOME\"`\n    [ -n \"$CP\" ] &&\n        CP=`cygpath --path --unix \"$CP\"`\nfi\n\n# quick detection of JDK version without JVM startup overhead\nCLASSFILE_HEADER_FILE=\"${JAVA_HOME}/include/classfile_constants.h\"\nif [ -z \"$GRAILS_NO_PERMGEN\" -a -f \"${CLASSFILE_HEADER_FILE}\" ]; then\n  CLASSFILE_VERSION=`cat \"${CLASSFILE_HEADER_FILE}\" | grep \"#define JVM_CLASSFILE_MAJOR_VERSION\" | awk '{ print $3 }' 2> /dev/null`\n  if [ 0$CLASSFILE_VERSION -ge 52 ]; then\n    GRAILS_NO_PERMGEN=1\n  fi \nfi\n\n# Remove possible trailing slash (after possible cygwin correction)\nGRAILS_HOME=`echo $GRAILS_HOME | sed -e 's|/$||g'`\n\n# Locate GRAILS_HOME if not it is not set\nif [ -z \"$GRAILS_HOME\" -o ! -d \"$GRAILS_HOME\" ] ; then\n  # resolve links - $0 may be a link to groovy's home\n  PRG=\"$0\"\n\n  # need this for relative symlinks\n  while [ -h \"$PRG\" ] ; do\n    ls=`ls -ld \"$PRG\"`\n    link=`expr \"$ls\" : '.*-> \\(.*\\)$'`\n    if expr \"$link\" : '/.*' > /dev/null; then\n    PRG=\"$link\"\n    else\n    PRG=`dirname \"$PRG\"`\"/$link\"\n    fi\n  done\n\n  SAVED=\"`pwd`\"\n  cd \"`dirname \\\"$PRG\\\"`/..\"\n  GRAILS_HOME=\"`pwd -P`\"\n  cd \"$SAVED\"\nfi\n\n# Warn the user if JAVA_HOME and/or GRAILS_HOME are not set.\nif [ -z \"$JAVA_HOME\" ] ; then\n    die \"JAVA_HOME environment variable is not set\"\nelif [ ! -d \"$JAVA_HOME\" ] ; then\n    die \"JAVA_HOME is not a directory: $JAVA_HOME\"\nfi\n\nif [ -z \"$GRAILS_HOME\" ] ; then\n    warn \"GRAILS_HOME environment variable is not set\"\nfi\n\nif [ ! -d \"$GRAILS_HOME\" ] ; then\n    die \"GRAILS_HOME is not a directory: $GRAILS_HOME\"\nfi\n\n# Use default groovy-conf config\nif [ -z \"$STARTER_CONF\" ]; then\n    STARTER_CONF=\"$GRAILS_HOME/conf/groovy-starter.conf\"\nfi\nSTARTER_CLASSPATH=\"wrapper/grails-wrapper-runtime-2.4.4.jar:wrapper:.\"\n\n# Allow access to Cocoa classes on OS X\nif $darwin; then\n    STARTER_CLASSPATH=\"$STARTER_CLASSPATH:/System/Library/Java/Support\"\nfi\n\n# Create the final classpath\n# Setting a classpath using the -cp or -classpath option means not to use\n# the global classpath. Groovy behaves then the same as the java\n# interpreter\nif [ -n \"$CP\" ] ; then\n    CP=\"$CP\"\nelif [ -n \"$CLASSPATH\" ] ; then\n    CP=\"$CLASSPATH\"\nfi\n\n# Determine the Java command to use to start the JVM\nif [ -z \"$JAVACMD\" ]; then\n    if [ -n \"$JAVA_HOME\" ]; then\n        if [ -x \"$JAVA_HOME/jre/sh/java\" ]; then\n            # IBM's JDK on AIX uses strange locations for the executables\n            JAVACMD=\"$JAVA_HOME/jre/sh/java\"\n        else\n            JAVACMD=\"$JAVA_HOME/bin/java\"\n        fi\n    else\n        JAVACMD=\"java\"\n    fi\nfi\nif [ ! -x \"$JAVACMD\" ]; then\n    die \"JAVA_HOME is not defined correctly; can not execute: $JAVACMD\"\nfi\n\n# Increase the maximum file descriptors if we can\nif [ \"$cygwin\" = \"false\" ]; then\n    MAX_FD_LIMIT=`ulimit -H -n`\n\tif [ \"$MAX_FD_LIMIT\" != \"unlimited\" ]; then\n\t    if [ $? -eq 0 ]; then\n\t        if [ \"$MAX_FD\" = \"maximum\" -o \"$MAX_FD\" = \"max\" ]; then\n\t            # use the businessSystem max\n\t            MAX_FD=\"$MAX_FD_LIMIT\"\n\t        fi\n\n\t        ulimit -n $MAX_FD\n\t        if [ $? -ne 0 ]; then\n\t            warn \"Could not set maximum file descriptor limit: $MAX_FD\"\n\t        fi\n\t    else\n\t        warn \"Could not query businessSystem maximum file descriptor limit: $MAX_FD_LIMIT\"\n\t    fi\n\tfi\nfi\n\n# Fix the cygwin agent issue\nAGENT_GRAILS_HOME=$GRAILS_HOME\nif $cygwin ; then\n    [ -n \"$GRAILS_HOME\" ] &&\n        AGENT_GRAILS_HOME=`cygpath --windows \"$GRAILS_HOME\"`\nfi\n\nif $mingw ; then\n    # Converts GRAILS_HOME path to Windows syntax\n    [ -n \"$GRAILS_HOME\" ] &&\n        AGENT_GRAILS_HOME=`cmd //C echo \"$GRAILS_HOME\"`\nfi\n\nif [ -z \"$GRAILS_AGENT_CACHE_DIR\" ]; then\n    GRAILS_AGENT_CACHE_DIR=~/.grails/2.4.4/\nfi\nSPRINGLOADED_PARAMS=profile=grails\\;cacheDir=$GRAILS_AGENT_CACHE_DIR\nif [ ! -d \"$GRAILS_AGENT_CACHE_DIR\" ]; then\n    mkdir -p \"$GRAILS_AGENT_CACHE_DIR\"\nfi\n\n# Process JVM args\nAGENT_STRING=\"-javaagent:wrapper/springloaded-1.2.1.RELEASE.jar -Xverify:none -Dspringloaded.synchronize=true -Djdk.reflect.allowGetCallerClass=true -Dspringloaded=$SPRINGLOADED_PARAMS\"\nCMD_LINE_ARGS=\"\"\nDISABLE_RELOADING=true\n\nwhile true; do\n  if [ \"$1\" = \"-cp\" ] || [ \"$1\" = \"-classpath\" ]; then\n    CP=$2\n    shift 2\n    break\n  fi\n\n  if [ \"$1\" = \"-reloading\" ]; then\n    AGENT=$AGENT_STRING\n    DISABLE_RELOADING=false\n    shift\n    break\n  fi\n\n  if [ \"$1\" = \"-noreloading\" ]; then\n    DISABLE_RELOADING=true\n    shift\n    break\n  fi\n\n  if [ \"$1\" = \"-debug\" ]; then\n    JAVA_OPTS=\"$JAVA_OPTS -Xdebug -Xnoagent -Dgrails.full.stacktrace=true -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005\"\n    shift\n    break\n  fi\n\n  if [ \"$1\" != -* ]; then\n    break\n  fi\n\n  CMD_LINE_ARGS=\"$CMD_LINE_ARGS $1\"\n  shift\ndone\n\n# Enable agent-based reloading for the 'run-app' command.\nif ! $DISABLE_RELOADING; then\n    for a in \"$@\"; do\n        if [ \"$a\" = \"run-app\" ]; then\n            AGENT=$AGENT_STRING\n        fi\n    done\n\n    if [ $# = 0 ]; then\n        AGENT=$AGENT_STRING\n    fi\nfi\n\nARGUMENTS=\"$CMD_LINE_ARGS $@\"\n\n# Setup Profiler\nuseprofiler=false\nif [ \"x$PROFILER\" != \"x\" ]; then\n    if [ -r \"$PROFILER\" ]; then\n        . $PROFILER\n        useprofiler=true\n    else\n        die \"Profiler file not found: $PROFILER\"\n    fi\nfi\n\n# For Darwin, use classes.jar for TOOLS_JAR\nTOOLS_JAR=\"$JAVA_HOME/lib/tools.jar\"\nif $darwin; then\n    JAVA_OPTS=\"-Xdock:name=Grails -Xdock:icon=$GRAILS_HOME/media/icons/grails.icns $JAVA_OPTS\"\n#   TOOLS_JAR=\"/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Classes/classes.jar\"\nfi\n\n# For Cygwin, switch paths to Windows format before running java\nif $cygwin; then\n    GRAILS_HOME=`cygpath --path --mixed \"$GRAILS_HOME\"`\n    JAVA_HOME=`cygpath --path --mixed \"$JAVA_HOME\"`\n    STARTER_CONF=`cygpath --path --mixed \"$STARTER_CONF\"`\n    if [ \"x$CP\" != \"x\" ] ; then\n        CP=`cygpath --path --mixed \"$CP\"`\n    fi\n    TOOLS_JAR=`cygpath --path --mixed \"$TOOLS_JAR\"`\n    STARTER_CLASSPATH=`cygpath --path --mixed \"$STARTER_CLASSPATH\"`\n\t# We build the pattern for arguments to be converted via cygpath\n    ROOTDIRSRAW=`find -L / -maxdepth 1 -mindepth 1 -type d 2>/dev/null`\n    SEP=\"\"\n    for dir in $ROOTDIRSRAW; do\n    \tROOTDIRS=\"$ROOTDIRS$SEP$dir\"\n\t    SEP=\"|\"\n    done\n    OURCYGPATTERN=\"(^($ROOTDIRS))\"\n    # Add a user-defined pattern to the cygpath arguments\n    if [ \"$GROOVY_CYGPATTERN\" != \"\" ] ; then\n    \tOURCYGPATTERN=\"$OURCYGPATTERN|($GROOVY_CYGPATTERN)\"\n    fi\n    # Now convert the arguments\n\tARGUMENTS=\"\"\n    for arg in \"$@\" ; do\n    \tCHECK=`echo \"$arg\"|egrep -c \"$OURCYGPATTERN\" -`\n    \tif [ $CHECK -ne 0 ] ; then\n\t    \tconvArg=`cygpath --path --ignore --mixed -- \"$arg\"`\n    \telse\n\t\t\tconvArg=$arg\n    \tfi\n\t\tARGUMENTS=\"$ARGUMENTS $convArg\"\n    done\nfi\n\nSTARTER_MAIN_CLASS=org.grails.wrapper.GrailsWrapper\n\nlateInit\n\nstartGrails() {\n  CLASS=$1\n  shift\n  if [ -n \"$GRAILS_OPTS\" ]\n     then\n \tGRAILS_OPTS=\"$GRAILS_OPTS\"\n     else\n\tGRAILS_OPTS=\"-server -Xmx768M -Xms64M -Dfile.encoding=UTF-8\"\n\tif [ \"$GRAILS_NO_PERMGEN\" != \"1\" ]; then\n\t   GRAILS_OPTS=\"$GRAILS_OPTS -XX:PermSize=32m -XX:MaxPermSize=256m\"\n\tfi\n  fi\n  JAVA_OPTS=\"$GRAILS_OPTS $JAVA_OPTS $AGENT\"\n  # Start the Profiler or the JVM\n  if $useprofiler; then\n      runProfiler\n  else\n  \tif [ $# -eq 0 ] ; then         # no argument given\n         exec \"$JAVACMD\" $JAVA_OPTS \\\n          -classpath \"$STARTER_CLASSPATH\" \\\n          -Dgrails.home=\"$GRAILS_HOME\" \\\n          -Dtools.jar=\"$TOOLS_JAR\" \\\n          -Djava.net.preferIPv4Stack=true \\\n          $STARTER_MAIN_CLASS \\\n          --main $CLASS \\\n          --conf \"$STARTER_CONF\" \\\n          --classpath \"$CP\"\n  \telse\n         exec \"$JAVACMD\" $JAVA_OPTS \\\n          -classpath \"$STARTER_CLASSPATH\" \\\n          -Dgrails.home=\"$GRAILS_HOME\" \\\n          -Dtools.jar=\"$TOOLS_JAR\" \\\n          -Djava.net.preferIPv4Stack=true \\\n          $STARTER_MAIN_CLASS \\\n          --main $CLASS \\\n          --conf \"$STARTER_CONF\" \\\n          --classpath \"$CP\" \\\n          \"${ARGUMENTS}\"\n  \tfi\n  fi\n}\n\nstartGrails $STARTER_MAIN_CLASS \"$@\"\n"
        },
        {
          "name": "grailsw.bat",
          "type": "blob",
          "size": 5.83203125,
          "content": "@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem                                                                         ##\n@rem  Grails JVM Bootstrap for Windows                                       ##\n@rem                                                                         ##\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset CLASS=org.grails.wrapper.GrailsWrapper\n\nif exist \"%USERPROFILE%/.groovy/preinit.bat\" call \"%USERPROFILE%/.groovy/preinit.bat\"\n\n@rem Determine the command interpreter to execute the \"CD\" later\nset COMMAND_COM=\"cmd.exe\"\nif exist \"%SystemRoot%\\system32\\cmd.exe\" set COMMAND_COM=\"%SystemRoot%\\system32\\cmd.exe\"\nif exist \"%SystemRoot%\\command.com\" set COMMAND_COM=\"%SystemRoot%\\command.com\"\n\n@rem Use explicit find.exe to prevent cygwin and others find.exe from being used\nset FIND_EXE=\"find.exe\"\nif exist \"%SystemRoot%\\system32\\find.exe\" set FIND_EXE=\"%SystemRoot%\\system32\\find.exe\"\nif exist \"%SystemRoot%\\command\\find.exe\" set FIND_EXE=\"%SystemRoot%\\command\\find.exe\"\n\n:check_JAVA_HOME\n@rem Make sure we have a valid JAVA_HOME\nif not \"%JAVA_HOME%\" == \"\" goto have_JAVA_HOME\n\necho.\necho ERROR: Environment variable JAVA_HOME has not been set.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\necho.\ngoto end\n\n:have_JAVA_HOME\n@rem Remove trailing slash from JAVA_HOME if found\nif \"%JAVA_HOME:~-1%\"==\"\\\" SET JAVA_HOME=%JAVA_HOME:~0,-1%\n\n@rem Validate JAVA_HOME\n%COMMAND_COM% /C DIR \"%JAVA_HOME%\" 2>&1 | %FIND_EXE% /I /C \"%JAVA_HOME%\" >nul\nif not errorlevel 1 goto check_GRAILS_HOME\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\necho.\ngoto end\n\n:check_GRAILS_HOME\n@rem Define GRAILS_HOME if not set\nif \"%GRAILS_HOME%\" == \"\" set GRAILS_HOME=%DIRNAME%..\n\n@rem Remove trailing slash from GRAILS_HOME if found\nif \"%GRAILS_HOME:~-1%\"==\"\\\" SET GRAILS_HOME=%GRAILS_HOME:~0,-1%\n\n:init\n\nfor %%x in (\"%USERPROFILE%\") do set SHORTHOME=%%~fsx\nif \"x%GRAILS_AGENT_CACHE_DIR%\" == \"x\" set GRAILS_AGENT_CACHE_DIR=%SHORTHOME%/.grails/2.4.4/\nset SPRINGLOADED_PARAMS=\"profile=grails;cacheDir=%GRAILS_AGENT_CACHE_DIR%\"\nif not exist \"%GRAILS_AGENT_CACHE_DIR%\" mkdir \"%GRAILS_AGENT_CACHE_DIR%\"\n\nif \"%GRAILS_NO_PERMGEN%\" == \"\" (\n\ttype \"%JAVA_HOME%\\include\\classfile_constants.h\" 2>nul | findstr /R /C:\"#define JVM_CLASSFILE_MAJOR_VERSION 5[23]\" >nul\n\tif not errorlevel 1 set GRAILS_NO_PERMGEN=1\n)\n\nset AGENT_STRING=-javaagent:wrapper/springloaded-1.2.1.RELEASE.jar -Xverify:none -Dspringloaded.synchronize=true -Djdk.reflect.allowGetCallerClass=true -Dspringloaded=\\\"%SPRINGLOADED_PARAMS%\\\"\nset DISABLE_RELOADING=\nif \"%GRAILS_OPTS%\" == \"\" (\n\tset GRAILS_OPTS=-server -Xmx768M -Xms64M -Dfile.encoding=UTF-8\n\tif not \"%GRAILS_NO_PERMGEN%\" == \"1\" (\n\t\tset GRAILS_OPTS=-server -Xmx768M -Xms64M -XX:PermSize=32m -XX:MaxPermSize=256m -Dfile.encoding=UTF-8\n\t)\n)\n\n@rem Get command-line arguments, handling Windows variants\nif \"%@eval[2+2]\" == \"4\" goto 4NT_args\n\n@rem Slurp the command line arguments.\nset CMD_LINE_ARGS=\nset CP=\nset INTERACTIVE=true\n\n:win9xME_args_slurp\nif \"x%~1\" == \"x\" goto execute\nset CURR_ARG=%~1\nif \"%CURR_ARG:~0,2%\" == \"-D\" (\n\tset CMD_LINE_ARGS=%CMD_LINE_ARGS% %~1=%~2\n\tshift\n\tshift\n\tgoto win9xME_args_slurp\n)\nif \"x%~1\" == \"x-cp\" (\n\tset CP=%~2\n\tshift\n\tshift\n\tgoto win9xME_args_slurp\n)\nif \"x%~1\" == \"x-debug\" (\n\tset JAVA_OPTS=%JAVA_OPTS% -Xdebug -Xnoagent -Dgrails.full.stacktrace=true -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005\n\tshift\n\tgoto win9xME_args_slurp\n)\nif \"x%~1\" == \"x-classpath\" (\n\tset CP=%~2\n\tshift\n\tshift\n\tgoto win9xME_args_slurp\n)\nif \"x%~1\" == \"x-reloading\" (\n\tset AGENT=%AGENT_STRING%\n\tshift\n\tgoto win9xME_args_slurp\n)\nif \"x%~1\" == \"xrun-app\" (\n\tset AGENT=%AGENT_STRING%\n\tset INTERACTIVE=\n\tset CMD_LINE_ARGS=%CMD_LINE_ARGS% %1\n\tshift\n\tgoto win9xME_args_slurp\n)\nif \"x%~1\" == \"x-noreloading\" (\n\tset DISABLE_RELOADING=true\n\tshift\n\tgoto win9xME_args_slurp\n)\nset INTERACTIVE=\nset CMD_LINE_ARGS=%CMD_LINE_ARGS% %1\nshift\ngoto win9xME_args_slurp\n\n:4NT_args\n@rem Get arguments from the 4NT Shell from JP Software\nset CMD_LINE_ARGS=%$\n\n:execute\n@rem Setup the command line\nset STARTER_CLASSPATH=wrapper/grails-wrapper-runtime-2.4.4.jar;wrapper;.\n\nif exist \"%USERPROFILE%/.groovy/init.bat\" call \"%USERPROFILE%/.groovy/init.bat\"\n\n@rem Setting a classpath using the -cp or -classpath option means not to use\n@rem the global classpath. Groovy behaves then the same as the java interpreter\n\nif \"x\" == \"x%CLASSPATH%\" goto after_classpath\nset CP=%CP%;%CLASSPATH%\n:after_classpath\n\nif \"x%DISABLE_RELOADING%\" == \"xtrue\" (\n\tset AGENT=\n) else (\n\tif \"x%INTERACTIVE%\" == \"xtrue\" (\n\t\tset AGENT=%AGENT_STRING%\n\t)\n)\n\nset STARTER_MAIN_CLASS=org.grails.wrapper.GrailsWrapper\nset STARTER_CONF=%GRAILS_HOME%\\conf\\groovy-starter.conf\n\nset JAVA_EXE=%JAVA_HOME%\\bin\\java.exe\nset TOOLS_JAR=%JAVA_HOME%\\lib\\tools.jar\n\nset JAVA_OPTS=%GRAILS_OPTS% %JAVA_OPTS% %AGENT%\n\nset JAVA_OPTS=%JAVA_OPTS% -Dprogram.name=\"%PROGNAME%\"\nset JAVA_OPTS=%JAVA_OPTS% -Dgrails.home=\"%GRAILS_HOME%\"\nset JAVA_OPTS=%JAVA_OPTS% -Dgrails.version=2.4.4\nset JAVA_OPTS=%JAVA_OPTS% -Dbase.dir=.\nset JAVA_OPTS=%JAVA_OPTS% -Dtools.jar=\"%TOOLS_JAR%\"\nset JAVA_OPTS=%JAVA_OPTS% -Dgroovy.starter.conf=\"%STARTER_CONF%\"\n\nif exist \"%USERPROFILE%/.groovy/postinit.bat\" call \"%USERPROFILE%/.groovy/postinit.bat\"\n\n@rem Execute Grails\nCALL \"%JAVA_EXE%\" %JAVA_OPTS% -classpath \"%STARTER_CLASSPATH%\" %STARTER_MAIN_CLASS% --main %CLASS% --conf \"%STARTER_CONF%\" --classpath \"%CP%\" \"%CMD_LINE_ARGS%\"\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n@rem Optional pause the batch file\nif \"%GROOVY_BATCH_PAUSE%\" == \"on\" pause\n"
        },
        {
          "name": "install.sh",
          "type": "blob",
          "size": 2.9033203125,
          "content": "#!/bin/bash\n\n# Exit the script if an error occur\nset -e\n\n# Get Ice in a ready-to-run state on a fresh AWI instance.\n\nGRAILS_VERSION=2.4.4\n\n# Install prerequisites\nif [ -f /etc/redhat-release ]; then\n    echo \"Installing redhat packages\"\n    sudo yum -y install git java-1.7.0-openjdk-devel.x86_64 wget unzip\n\nelif [[ -f /etc/debian-release || -f /etc/debian_version ]];then\n    echo \"Installing debian packages\"\n    sudo apt-get -y install git openjdk-7-jdk wget unzip\n\nelif [[ -f /etc/issue && $(grep \"Amazon Linux AMI\" /etc/issue) ]]; then\n    echo \"Assuming AWS AMI, installing packages\"\n    sudo yum -y install git java-1.7.0-openjdk-devel.x86_64 wget unzip\n\nelse \n    echo \"Unknown operating system. You may have to install Java 7 manually.\"\nfi\n\nINSTALL_DIR=$(pwd)\n\ncd\n\nHOME_DIR=$(pwd)\n\n# Prep grails in such a way that we only download it once\nif [ ! -x \".grails/wrapper/${GRAILS_VERSION}/grails-${GRAILS_VERSION}\" ]; then\n  mkdir -p .grails/wrapper/\n  cd .grails/wrapper/\n  # (Fetch)\n  wget http://dist.springframework.org.s3.amazonaws.com/release/GRAILS/grails-${GRAILS_VERSION}.zip -O grails-${GRAILS_VERSION}-download.zip\n  mkdir ${GRAILS_VERSION}\n  cd ${GRAILS_VERSION}\n  # (\"Install\")\n  unzip ../grails-${GRAILS_VERSION}-download.zip\nfi\n\nGRAILS_HOME=${HOME_DIR}/.grails/wrapper/${GRAILS_VERSION}/grails-${GRAILS_VERSION}/\nPATH=$PATH:${HOME_DIR}/.grails/wrapper/${GRAILS_VERSION}/grails-${GRAILS_VERSION}/bin/\n\n# Get ice\ncd ${INSTALL_DIR}\n\nif [ -x '.git' ]; then\n  # We already have it; update to latest git\n  git pull\nelse\n  # We don't have it at all yet; clone the repo\n  git clone https://github.com/Netflix/ice.git\n  cd ice\n  INSTALL_DIR=$(pwd)\nfi\n\n# Initialize Ice with Grails\ngrails ${JAVA_OPTS} wrapper\n\n# (Bug: Ice can't deal with this file existing and being empty.)\nrm -f grails-app/i18n/messages.properties\n\n# Create our local work directories (both for processing and reading)\nmkdir -p ${HOME_DIR}/ice_processor\nmkdir -p ${HOME_DIR}/ice_reader\n\n# Set up the config file\ncp src/java/sample.properties src/java/ice.properties\necho Please enter the name of the bucket Ice will read Amazon billing information from:\nwhile [ \"$BILLBUCKET\" == \"\" ]\ndo\n  echo -n \"-> \"\n  read -r BILLBUCKET\ndone\n\necho Please enter the name of the bucket Ice will write processed billing information to:\nwhile [ \"$PROCBUCKET\" == \"\" ]\ndo\n  echo -n \"-> \"\n  read -r PROCBUCKET\ndone\nsed -ri 's/=billing_s3bucketprefix\\//=/; s|\\/mnt\\/|'\"${HOME_DIR}\"'\\/|; s/=work_s3bucketprefix\\//=/; s/^ice.account.*//; s/=billing_s3bucketname1/='${BILLBUCKET}'/; s/=work_s3bucketname/='${PROCBUCKET}'/' src/java/ice.properties\n\necho Ice is now ready to run as a processor. If you want to run the reader, edit:\necho \"${INSTALL_DIR}/src/java/ice.properties\"\necho and alter the appropriate flags. You can now start Ice by running the following from the Ice root directory:\necho ./grailsw -Djava.net.preferIPv4Stack=true -Dice.s3AccessKeyId=\\<access key ID\\> -Dice.s3SecretKey=\\<access key\\> run-app\n"
        },
        {
          "name": "screenshots",
          "type": "tree",
          "content": null
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "web-app",
          "type": "tree",
          "content": null
        },
        {
          "name": "wrapper",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}