{
  "metadata": {
    "timestamp": 1736608989543,
    "page": 202,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjIxMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "Snailclimb/guide-rpc-framework",
      "stars": 4035,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.4248046875,
          "content": "/.idea/\n/target/\n/rpc-framework-simple/target/\n/rpc-framework-common/target/\n/hello-service-api/target/\n/example-server/target/\n/example-client/target/\n/example-server/example-server.iml\n/example-client/example-client.iml\n/guide-rpc-framework.iml\n/rpc-framework-simple/rpc-framework-simple.iml\n/rpc-framework-common/rpc-framework-common.iml\n/hello-service-api/hello-service-api.iml\n\n/.settings\n*/.settings\n.classpath\n.project\n.DS_Store"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 9.1298828125,
          "content": "                     æœ¨å…°å®½æ¾è®¸å¯è¯, ç¬¬1ç‰ˆ\r\n\r\n   æœ¨å…°å®½æ¾è®¸å¯è¯ï¼Œ ç¬¬1ç‰ˆ\r\n   2019å¹´8æœˆ http://license.coscl.org.cn/MulanPSL\r\n\r\n   æ‚¨å¯¹â€œè½¯ä»¶â€çš„å¤åˆ¶ã€ä½¿ç”¨ã€ä¿®æ”¹åŠåˆ†å‘å—æœ¨å…°å®½æ¾è®¸å¯è¯ï¼Œç¬¬1ç‰ˆï¼ˆâ€œæœ¬è®¸å¯è¯â€ï¼‰çš„å¦‚ä¸‹æ¡æ¬¾çš„çº¦æŸï¼š\r\n\r\n   0. å®šä¹‰\r\n\r\n      â€œè½¯ä»¶â€æ˜¯æŒ‡ç”±â€œè´¡çŒ®â€æ„æˆçš„è®¸å¯åœ¨â€œæœ¬è®¸å¯è¯â€ä¸‹çš„ç¨‹åºå’Œç›¸å…³æ–‡æ¡£çš„é›†åˆã€‚\r\n\r\n      â€œè´¡çŒ®è€…â€æ˜¯æŒ‡å°†å—ç‰ˆæƒæ³•ä¿æŠ¤çš„ä½œå“è®¸å¯åœ¨â€œæœ¬è®¸å¯è¯â€ä¸‹çš„è‡ªç„¶äººæˆ–â€œæ³•äººå®ä½“â€ã€‚\r\n\r\n      â€œæ³•äººå®ä½“â€æ˜¯æŒ‡æäº¤è´¡çŒ®çš„æœºæ„åŠå…¶â€œå…³è”å®ä½“â€ã€‚\r\n\r\n      â€œå…³è”å®ä½“â€æ˜¯æŒ‡ï¼Œå¯¹â€œæœ¬è®¸å¯è¯â€ä¸‹çš„ä¸€æ–¹è€Œè¨€ï¼Œæ§åˆ¶ã€å—æ§åˆ¶æˆ–ä¸å…¶å…±åŒå—æ§åˆ¶çš„æœºæ„ï¼Œæ­¤å¤„çš„æ§åˆ¶æ˜¯æŒ‡æœ‰å—æ§æ–¹æˆ–å…±åŒå—æ§æ–¹è‡³å°‘50%ç›´æ¥æˆ–é—´æ¥çš„æŠ•ç¥¨æƒã€èµ„é‡‘æˆ–å…¶ä»–æœ‰ä»·è¯åˆ¸ã€‚\r\n\r\n      â€œè´¡çŒ®â€æ˜¯æŒ‡ç”±ä»»ä¸€â€œè´¡çŒ®è€…â€è®¸å¯åœ¨â€œæœ¬è®¸å¯è¯â€ä¸‹çš„å—ç‰ˆæƒæ³•ä¿æŠ¤çš„ä½œå“ã€‚\r\n\r\n   1. æˆäºˆç‰ˆæƒè®¸å¯\r\n\r\n      æ¯ä¸ªâ€œè´¡çŒ®è€…â€æ ¹æ®â€œæœ¬è®¸å¯è¯â€æˆäºˆæ‚¨æ°¸ä¹…æ€§çš„ã€å…¨çƒæ€§çš„ã€å…è´¹çš„ã€éç‹¬å çš„ã€ä¸å¯æ’¤é”€çš„ç‰ˆæƒè®¸å¯ï¼Œæ‚¨å¯ä»¥å¤åˆ¶ã€ä½¿ç”¨ã€ä¿®æ”¹ã€åˆ†å‘å…¶â€œè´¡çŒ®â€ï¼Œä¸è®ºä¿®æ”¹ä¸å¦ã€‚\r\n\r\n   2. æˆäºˆä¸“åˆ©è®¸å¯\r\n\r\n      æ¯ä¸ªâ€œè´¡çŒ®è€…â€æ ¹æ®â€œæœ¬è®¸å¯è¯â€æˆäºˆæ‚¨æ°¸ä¹…æ€§çš„ã€å…¨çƒæ€§çš„ã€å…è´¹çš„ã€éç‹¬å çš„ã€ä¸å¯æ’¤é”€çš„ï¼ˆæ ¹æ®æœ¬æ¡è§„å®šæ’¤é”€é™¤å¤–ï¼‰ä¸“åˆ©è®¸å¯ï¼Œä¾›æ‚¨åˆ¶é€ ã€å§”æ‰˜åˆ¶é€ ã€ä½¿ç”¨ã€è®¸è¯ºé”€å”®ã€é”€å”®ã€è¿›å£å…¶â€œè´¡çŒ®â€æˆ–ä»¥å…¶ä»–æ–¹å¼è½¬ç§»å…¶â€œè´¡çŒ®â€ã€‚å‰è¿°ä¸“åˆ©è®¸å¯ä»…é™äºâ€œè´¡çŒ®è€…â€ç°åœ¨æˆ–å°†æ¥æ‹¥æœ‰æˆ–æ§åˆ¶çš„å…¶â€œè´¡çŒ®â€æœ¬èº«æˆ–å…¶â€œè´¡çŒ®â€ä¸è®¸å¯â€œè´¡çŒ®â€æ—¶çš„â€œè½¯ä»¶â€ç»“åˆè€Œå°†å¿…ç„¶ä¼šä¾µçŠ¯çš„ä¸“åˆ©æƒåˆ©è¦æ±‚ï¼Œä¸åŒ…æ‹¬ä»…å› æ‚¨æˆ–ä»–äººä¿®æ”¹â€œè´¡çŒ®â€æˆ–å…¶ä»–ç»“åˆè€Œå°†å¿…ç„¶ä¼šä¾µçŠ¯åˆ°çš„ä¸“åˆ©æƒåˆ©è¦æ±‚ã€‚å¦‚æ‚¨æˆ–æ‚¨çš„â€œå…³è”å®ä½“â€ç›´æ¥æˆ–é—´æ¥åœ°ï¼ˆåŒ…æ‹¬é€šè¿‡ä»£ç†ã€ä¸“åˆ©è¢«è®¸å¯äººæˆ–å—è®©äººï¼‰ï¼Œå°±â€œè½¯ä»¶â€æˆ–å…¶ä¸­çš„â€œè´¡çŒ®â€å¯¹ä»»ä½•äººå‘èµ·ä¸“åˆ©ä¾µæƒè¯‰è®¼ï¼ˆåŒ…æ‹¬åè¯‰æˆ–äº¤å‰è¯‰è®¼ï¼‰æˆ–å…¶ä»–ä¸“åˆ©ç»´æƒè¡ŒåŠ¨ï¼ŒæŒ‡æ§å…¶ä¾µçŠ¯ä¸“åˆ©æƒï¼Œåˆ™â€œæœ¬è®¸å¯è¯â€æˆäºˆæ‚¨å¯¹â€œè½¯ä»¶â€çš„ä¸“åˆ©è®¸å¯è‡ªæ‚¨æèµ·è¯‰è®¼æˆ–å‘èµ·ç»´æƒè¡ŒåŠ¨ä¹‹æ—¥ç»ˆæ­¢ã€‚\r\n\r\n   3. æ— å•†æ ‡è®¸å¯\r\n\r\n      â€œæœ¬è®¸å¯è¯â€ä¸æä¾›å¯¹â€œè´¡çŒ®è€…â€çš„å•†å“åç§°ã€å•†æ ‡ã€æœåŠ¡æ ‡å¿—æˆ–äº§å“åç§°çš„å•†æ ‡è®¸å¯ï¼Œä½†æ‚¨ä¸ºæ»¡è¶³ç¬¬4æ¡è§„å®šçš„å£°æ˜ä¹‰åŠ¡è€Œå¿…é¡»ä½¿ç”¨é™¤å¤–ã€‚\r\n\r\n   4. åˆ†å‘é™åˆ¶\r\n\r\n      æ‚¨å¯ä»¥åœ¨ä»»ä½•åª’ä»‹ä¸­å°†â€œè½¯ä»¶â€ä»¥æºç¨‹åºå½¢å¼æˆ–å¯æ‰§è¡Œå½¢å¼é‡æ–°åˆ†å‘ï¼Œä¸è®ºä¿®æ”¹ä¸å¦ï¼Œä½†æ‚¨å¿…é¡»å‘æ¥æ”¶è€…æä¾›â€œæœ¬è®¸å¯è¯â€çš„å‰¯æœ¬ï¼Œå¹¶ä¿ç•™â€œè½¯ä»¶â€ä¸­çš„ç‰ˆæƒã€å•†æ ‡ã€ä¸“åˆ©åŠå…è´£å£°æ˜ã€‚\r\n\r\n   5. å…è´£å£°æ˜ä¸è´£ä»»é™åˆ¶\r\n\r\n      â€œè½¯ä»¶â€åŠå…¶ä¸­çš„â€œè´¡çŒ®â€åœ¨æä¾›æ—¶ä¸å¸¦ä»»ä½•æ˜ç¤ºæˆ–é»˜ç¤ºçš„æ‹…ä¿ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œâ€œè´¡çŒ®è€…â€æˆ–ç‰ˆæƒæ‰€æœ‰è€…ä¸å¯¹ä»»ä½•äººå› ä½¿ç”¨â€œè½¯ä»¶â€æˆ–å…¶ä¸­çš„â€œè´¡çŒ®â€è€Œå¼•å‘çš„ä»»ä½•ç›´æ¥æˆ–é—´æ¥æŸå¤±æ‰¿æ‹…è´£ä»»ï¼Œä¸è®ºå› ä½•ç§åŸå› å¯¼è‡´æˆ–è€…åŸºäºä½•ç§æ³•å¾‹ç†è®º,å³ä½¿å…¶æ›¾è¢«å»ºè®®æœ‰æ­¤ç§æŸå¤±çš„å¯èƒ½æ€§ã€‚\r\n\r\n   æ¡æ¬¾ç»“æŸã€‚\r\n\r\n   å¦‚ä½•å°†æœ¨å…°å®½æ¾è®¸å¯è¯ï¼Œç¬¬1ç‰ˆï¼Œåº”ç”¨åˆ°æ‚¨çš„è½¯ä»¶\r\n\r\n   å¦‚æœæ‚¨å¸Œæœ›å°†æœ¨å…°å®½æ¾è®¸å¯è¯ï¼Œç¬¬1ç‰ˆï¼Œåº”ç”¨åˆ°æ‚¨çš„æ–°è½¯ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿æ¥æ”¶è€…æŸ¥é˜…ï¼Œå»ºè®®æ‚¨å®Œæˆå¦‚ä¸‹ä¸‰æ­¥ï¼š\r\n\r\n      1ï¼Œ è¯·æ‚¨è¡¥å……å¦‚ä¸‹å£°æ˜ä¸­çš„ç©ºç™½ï¼ŒåŒ…æ‹¬è½¯ä»¶åã€è½¯ä»¶çš„é¦–æ¬¡å‘è¡¨å¹´ä»½ä»¥åŠæ‚¨ä½œä¸ºç‰ˆæƒäººçš„åå­—ï¼›\r\n\r\n      2ï¼Œ è¯·æ‚¨åœ¨è½¯ä»¶åŒ…çš„ä¸€çº§ç›®å½•ä¸‹åˆ›å»ºä»¥â€œLICENSEâ€ä¸ºåçš„æ–‡ä»¶ï¼Œå°†æ•´ä¸ªè®¸å¯è¯æ–‡æœ¬æ”¾å…¥è¯¥æ–‡ä»¶ä¸­ï¼›\r\n\r\n      3ï¼Œ è¯·å°†å¦‚ä¸‹å£°æ˜æ–‡æœ¬æ”¾å…¥æ¯ä¸ªæºæ–‡ä»¶çš„å¤´éƒ¨æ³¨é‡Šä¸­ã€‚\r\n\r\n   Copyright (c) [2019] [name of copyright holder]\r\n   [Software Name] is licensed under the Mulan PSL v1.\r\n   You can use this software according to the terms and conditions of the Mulan PSL v1.\r\n   You may obtain a copy of Mulan PSL v1 at:\r\n      http://license.coscl.org.cn/MulanPSL\r\n   THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR\r\n   IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR\r\n   PURPOSE.\r\n   See the Mulan PSL v1 for more details.\r\n\r\n\r\n                     Mulan Permissive Software Licenseï¼ŒVersion 1\r\n\r\n   Mulan Permissive Software Licenseï¼ŒVersion 1 (Mulan PSL v1)\r\n   August 2019 http://license.coscl.org.cn/MulanPSL\r\n\r\n   Your reproduction, use, modification and distribution of the Software shall be subject to Mulan PSL v1 (this License) with following terms and conditions:\r\n\r\n   0. Definition\r\n\r\n      Software means the program and related documents which are comprised of those Contribution and licensed under this License.\r\n\r\n      Contributor means the Individual or Legal Entity who licenses its copyrightable work under this License.\r\n\r\n      Legal Entity means the entity making a Contribution and all its Affiliates.\r\n\r\n      Affiliates means entities that control, or are controlled by, or are under common control with a party to this License, â€˜controlâ€™ means direct or indirect ownership of at least fifty percent (50%) of the voting power, capital or other securities of controlled or commonly controlled entity.\r\n\r\n   Contribution means the copyrightable work licensed by a particular Contributor under this License.\r\n\r\n   1. Grant of Copyright License\r\n\r\n      Subject to the terms and conditions of this License, each Contributor hereby grants to you a perpetual, worldwide, royalty-free, non-exclusive, irrevocable copyright license to reproduce, use, modify, or distribute its Contribution, with modification or not.\r\n\r\n   2. Grant of Patent License\r\n\r\n      Subject to the terms and conditions of this License, each Contributor hereby grants to you a perpetual, worldwide, royalty-free, non-exclusive, irrevocable (except for revocation under this Section) patent license to make, have made, use, offer for sale, sell, import or otherwise transfer its Contribution where such patent license is only limited to the patent claims owned or controlled by such Contributor now or in future which will be necessarily infringed by its Contribution alone, or by combination of the Contribution with the Software to which the Contribution was contributed, excluding of any patent claims solely be infringed by your or othersâ€™ modification or other combinations. If you or your Affiliates directly or indirectly (including through an agent, patent licensee or assigneeï¼‰, institute patent litigation (including a cross claim or counterclaim in a litigation) or other patent enforcement activities against any individual or entity by alleging that the Software or any Contribution in it infringes patents, then any patent license granted to you under this License for the Software shall terminate as of the date such litigation or activity is filed or taken.\r\n\r\n   3. No Trademark License\r\n\r\n      No trademark license is granted to use the trade names, trademarks, service marks, or product names of Contributor, except as required to fulfill notice requirements in section 4.\r\n\r\n   4. Distribution Restriction\r\n\r\n      You may distribute the Software in any medium with or without modification, whether in source or executable forms, provided that you provide recipients with a copy of this License and retain copyright, patent, trademark and disclaimer statements in the Software.\r\n\r\n   5. Disclaimer of Warranty and Limitation of Liability\r\n\r\n      The Software and Contribution in it are provided without warranties of any kind, either express or implied. In no event shall any Contributor or copyright holder be liable to you for any damages, including, but not limited to any direct, or indirect, special or consequential damages arising from your use or inability to use the Software or the Contribution in it, no matter how itâ€™s caused or based on which legal theory, even if advised of the possibility of such damages.\r\n\r\n   End of the Terms and Conditions\r\n\r\n   How to apply the Mulan Permissive Software Licenseï¼ŒVersion 1 (Mulan PSL v1) to your software\r\n\r\n      To apply the Mulan PSL v1 to your work, for easy identification by recipients, you are suggested to complete following three steps:\r\n\r\n      i. Fill in the blanks in following statement, including insert your software name, the year of the first publication of your software, and your name identified as the copyright owner;\r\n      ii. Create a file named â€œLICENSEâ€ which contains the whole context of this License in the first directory of your software package;\r\n      iii. Attach the statement to the appropriate annotated syntax at the beginning of each source file.\r\n   \r\n   Copyright (c) [2019] [name of copyright holder]\r\n   [Software Name] is licensed under the Mulan PSL v1.\r\n   You can use this software according to the terms and conditions of the Mulan PSL v1.\r\n   You may obtain a copy of Mulan PSL v1 at:\r\n      http://license.coscl.org.cn/MulanPSL\r\n   THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR\r\n   IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR\r\n   PURPOSE.\r\n   \r\n   See the Mulan PSL v1 for more details.\r\n"
        },
        {
          "name": "README-EN.md",
          "type": "blob",
          "size": 9.9306640625,
          "content": "# guide-rpc-framework\n\n[ä¸­æ–‡](./README.md)|English\n\nSorry, I did not fully translate the Chinese readme. I have translated the important parts. You can translate the rest by yourself through Google.\n\n## Preface\n\nAlthough the principle of RPC is not difficult, I encountered many problems in the process of implementation. [guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework)  implements only the most basic features of the RPC framework, and some of the optimizations are mentioned below for those interested.\n\nWith this simple wheel, you can learn the underlying principles and principles of RPC  framework as well as various Java coding practices.\n\nYou can even use the  [guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework)  as a choice for your graduation/project experience, which is very great! Compared to other job seekers whose project experience is based on a variety of systems, building wheels is a sure way to win an interviewer's favor.\n\nIf you're going to use the  [guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework)  as your graduation/project experience, I want you to understand it rather than just copy and paste my ideas. You can fork my project and then optimize it. If you think the optimization is valuable, you can submit PR to me, and I will deal with it as soon as possible.\n\n##  Introduction\n\n [guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework) is an RPC framework based on Netty+Kyro+Zookeeper. Detailed code comments, clear structure, and integrated Check Style specification code structure make it ideal for reading and learning.\n\nDue to the limited energy and ability of me, if you think there is something to be improved and perfected, welcome to fork this project, then clone it to local, and submit PR to me after local modification, I will Review your code as soon as possible.\n\nLet's start with a basic RPC framework design idea!\n\n> **note** ï¼šThe RPC framework we mentioned here refers to a framework that allows clients to directly call server-side methods as simple as calling local methods, similar to the Dubbo, Motan, and gRPC I introduced earlier. If you need to deal with the HTTP protocol, parse and encapsulate HTTP requests and responses. Type frameworks are not considered \"RPC frameworks\", such as Feign.\n\nA schematic diagram of the simplest RPC framework usage is shown in the figure below, which is also the current architecture of [guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework):\n\n![](./images/rpc-architure.png)\n\nThe service provider Server registers the service with the registry, and the service consumer Client gets the service-related information through the registry, and then requests the service provider Server through the network.\n\nAs a leader in the field of RPC framework [Dubbo](https://github.com/apache/dubbo), the architecture is shown in the figure below, which is roughly the same as what we drew above.\n\n<img src=\"./images/dubbo-architure.jpg\" style=\"zoom:80%;\" />\n\n**Under normal circumstances, the RPC framework must not only provide service discovery functions, but also provide load balancing, fault tolerance and other functions. Such an RPC framework is truly qualified. ** \n\n**Please let me simply talk about the idea of designing a most basic RPC framework:**\n\n![](./images/rpc-architure-detail.png)\n\n1. **Registration Center**: The registration center is required first, and Zookeeper is recommended. The registration center is responsible for the registration and search of service addresses, which is equivalent to a directory service. When the server starts, the service name and its corresponding address (ip+port) are registered in the registry, and the service consumer finds the corresponding service address according to the service name. With the service address, the service consumer can request the server through the network.\n2. **Network Transmission**: Since you want to call a remote method, you must send a request. The request must at least include the class name, method name, and related parameters you call! Recommend the Netty framework based on NIO.\n3. **Serialization**: Since network transmission is involved, serialization must be involved. You can't directly use the serialization that comes with JDK! The serialization that comes with the JDK is inefficient and has security vulnerabilities. Therefore, you have to consider which serialization protocol to use. The more commonly used ones are hession2, kyro, and protostuff.\n4. **Dynamic Proxy**: In addition, a dynamic proxy is also required. Because the main purpose of RPC is to allow us to call remote methods as easy as calling local methods, the use of dynamic proxy can shield the details of remote method calls such as network transmission. That is to say, when you call a remote method, the network request will actually be transmitted through the proxy object. Otherwise, how could it be possible to call the remote method directly?\n2. **Load Balancing**: Load balancing is also required. Why? For example, a certain service in our system has very high traffic. We deploy this service on multiple servers. When a client initiates a request, multiple servers can handle the request. Then, how to correctly select the server that processes the request is critical. If you need one server to handle requests for the service, the meaning of deploying the service on multiple servers no longer exists. Load balancing is to avoid a single server responding to the same request, which is likely to cause server downtime, crashes and other problems. We can clearly feel its meaning from the four words of load balancing.\n\n## Run the project\n\n### Import the project\n\nFork the project to your own repository, then clone the project to its own locale: `git clone git@github.com:username/guide-rpc-framework.git`  use java IDE such as IDEA to open and wait for the project initialization to complete.\n\n### Initialize git hooks\n\n**This step is mainly to run Check Style before submitting the code to ensure that the code format is correct. If there is a problem, it cannot be submitted. **\n\n>The following demonstrates the operation corresponding to Mac/Linux. Window users need to manually copy the `pre-commit` file under the `config/git-hooks` directory to the `.git/hooks/` directory under the project.\n\nExecute these commands:\n\n```bash\nâœguide-rpc-framework git: (master)âœ—chmod + x ./init.sh\nâœguide-rpc-framework git: (master)âœ—./init.sh\n```\n\nThe main function of the `init.sh` script is to copy the git commit hook to the `.git/hooks/` directory under the project so that it will be executed every time you commit.\n\n### CheckStyle plug-in download and configuration\n\nIntelliJ IDEA-> Preferences->Plugins-> search to download CheckStyle plug-in, and then configure it as follows.\n\n![CheckStyle plug-in download and configuration](./images/setting-check-style.png)\n\nAfter the configuration is complete, use this plugin as follows!\n\n![How to use the plug-in](./images/run-check-style.png)\n\n### Download and run zookeeper\n\nDocker is used here to download and install.\n\ndownload:\n\n```shell\ndocker pull zookeeper:3.5.8\n```\n\nè¿è¡Œï¼š\n\n```shell\ndocker run -d --name zookeeper -p 2181:2181 zookeeper:3.5.8\n```\n\n## Use\n\n### Server(service provider)\n\nImplementing the interfaceï¼š\n\n```java\n@Slf4j\n@RpcService(group = \"test1\", version = \"version1\")\npublic class HelloServiceImpl implements HelloService {\n    static {\n        System.out.println(\"HelloServiceImplè¢«åˆ›å»º\");\n    }\n\n    @Override\n    public String hello(Hello hello) {\n        log.info(\"HelloServiceImplæ”¶åˆ°: {}.\", hello.getMessage());\n        String result = \"Hello description is \" + hello.getDescription();\n        log.info(\"HelloServiceImplè¿”å›: {}.\", result);\n        return result;\n    }\n}\n\t\n@Slf4j\npublic class HelloServiceImpl2 implements HelloService {\n\n    static {\n        System.out.println(\"HelloServiceImpl2è¢«åˆ›å»º\");\n    }\n\n    @Override\n    public String hello(Hello hello) {\n        log.info(\"HelloServiceImpl2æ”¶åˆ°: {}.\", hello.getMessage());\n        String result = \"Hello description is \" + hello.getDescription();\n        log.info(\"HelloServiceImpl2è¿”å›: {}.\", result);\n        return result;\n    }\n}\n```\n\nPublish services (transport using Netty) :\n\n```java\n/**\n * Server: Automatic registration service via @RpcService annotation\n *\n * @author shuang.kou\n * @createTime 2020å¹´05æœˆ10æ—¥ 07:25:00\n */\n@RpcScan(basePackage = {\"github.javaguide.serviceimpl\"})\npublic class NettyServerMain {\n    public static void main(String[] args) {\n        // Register service via annotation\n        new AnnotationConfigApplicationContext(NettyServerMain.class);\n        NettyServer nettyServer = new NettyServer();\n        // Register service manually\n        HelloService helloService2 = new HelloServiceImpl2();\n        RpcServiceProperties rpcServiceConfig = RpcServiceProperties.builder()\n                .group(\"test2\").version(\"version2\").build();\n        nettyServer.registerService(helloService2, rpcServiceConfig);\n        nettyServer.start();\n    }\n}\n```\n\n### Client(srvice consumer)\n\n\n```java\n@Component\npublic class HelloController {\n\n    @RpcReference(version = \"version1\", group = \"test1\")\n    private HelloService helloService;\n\n    public void test() throws InterruptedException {\n        String hello = this.helloService.hello(new Hello(\"111\", \"222\"));\n        //å¦‚éœ€ä½¿ç”¨ assert æ–­è¨€ï¼Œéœ€è¦åœ¨ VM options æ·»åŠ å‚æ•°ï¼š-ea\n        assert \"Hello description is 222\".equals(hello);\n        Thread.sleep(12000);\n        for (int i = 0; i < 10; i++) {\n            System.out.println(helloService.hello(new Hello(\"111\", \"222\")));\n        }\n    }\n}\n```\n\n```java\nClientTransport rpcRequestTransport = new SocketRpcClient();\nRpcServiceProperties rpcServiceConfig = RpcServiceProperties.builder()\n        .group(\"test2\").version(\"version2\").build();\nRpcClientProxy rpcClientProxy = new RpcClientProxy(rpcRequestTransport, rpcServiceConfig);\nHelloService helloService = rpcClientProxy.getProxy(HelloService.class);\nString hello = helloService.hello(new Hello(\"111\", \"222\"));\nSystem.out.println(hello);\n```"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 14.3447265625,
          "content": "# guide-rpc-framework\n\n> [è¯¥ RPC æ¡†æ¶é…å¥—æ•™ç¨‹å·²ç»æ›´æ–°åœ¨æˆ‘çš„æ˜Ÿçƒï¼Œç‚¹å‡»æ­¤é“¾æ¥äº†è§£è¯¦æƒ…ã€‚](https://javaguide.cn/zhuanlan/handwritten-rpc-framework.html)\n\n<div align=\"center\">\n  <p> ä¸­æ–‡| <a href=\"./README-EN.md\">English</a>\n  </p>\n  <p>\n    <a href=\"https://github.com/Snailclimb/guide-rpc-framework\">Github</a> | <a href=\"https://gitee.com/SnailClimb/guide-rpc-framework \">Gitee</a>\n  </p>\n</div>\n\n## å‰è¨€\n\nè™½è¯´ RPC çš„åŸç†å®é™…ä¸éš¾ï¼Œä½†æ˜¯ï¼Œè‡ªå·±åœ¨å®ç°çš„è¿‡ç¨‹ä¸­è‡ªå·±ä¹Ÿé‡åˆ°äº†å¾ˆå¤šé—®é¢˜ã€‚[guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework) ç›®å‰åªå®ç°äº† RPC æ¡†æ¶æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œä¸€äº›å¯ä¼˜åŒ–ç‚¹éƒ½åœ¨ä¸‹é¢æåˆ°äº†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œå®Œå–„ã€‚\n\né€šè¿‡è¿™ä¸ªç®€æ˜“çš„è½®å­ï¼Œä½ å¯ä»¥å­¦åˆ° RPC çš„åº•å±‚åŸç†å’ŒåŸç†ä»¥åŠå„ç§ Java ç¼–ç å®è·µçš„è¿ç”¨ã€‚\n\nä½ ç”šè‡³å¯ä»¥æŠŠ [guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework) å½“åšä½ çš„æ¯•è®¾/é¡¹ç›®ç»éªŒçš„é€‰æ‹©ï¼Œè¿™æ˜¯éå¸¸ä¸é”™ï¼å¯¹æ¯”å…¶ä»–æ±‚èŒè€…çš„é¡¹ç›®ç»éªŒéƒ½æ˜¯å„ç§ç³»ç»Ÿï¼Œé€ è½®å­è‚¯å®šæ˜¯æ›´åŠ èƒ½èµ¢å¾—é¢è¯•å®˜çš„é’çã€‚\n\nå¦‚æœä½ è¦å°† [guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework) å½“åšä½ çš„æ¯•è®¾/é¡¹ç›®ç»éªŒçš„è¯ï¼Œæˆ‘å¸Œæœ›ä½ ä¸€å®šè¦ææ‡‚ï¼Œè€Œä¸æ˜¯ç›´æ¥å¤åˆ¶ç²˜è´´æˆ‘çš„æ€æƒ³ã€‚ä½ å¯ä»¥ fork æˆ‘çš„é¡¹ç›®ï¼Œç„¶åè¿›è¡Œä¼˜åŒ–ã€‚å¦‚æœä½ è§‰å¾—çš„ä¼˜åŒ–æ˜¯æœ‰ä»·å€¼çš„è¯ï¼Œä½ å¯ä»¥æäº¤ PR ç»™æˆ‘ï¼Œæˆ‘ä¼šå°½å¿«å¤„ç†ã€‚\n\n## ä»‹ç»\n\n [guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework) æ˜¯ä¸€æ¬¾åŸºäº Netty+Kyro+Zookeeper å®ç°çš„ RPC æ¡†æ¶ã€‚ä»£ç æ³¨é‡Šè¯¦ç»†ï¼Œç»“æ„æ¸…æ™°ï¼Œå¹¶ä¸”é›†æˆäº† Check Style è§„èŒƒä»£ç ç»“æ„ï¼Œéå¸¸é€‚åˆé˜…è¯»å’Œå­¦ä¹ ã€‚\n\nç”±äº Guideå“¥è‡ªèº«ç²¾åŠ›å’Œèƒ½åŠ›æœ‰é™ï¼Œå¦‚æœå¤§å®¶è§‰å¾—æœ‰éœ€è¦æ”¹è¿›å’Œå®Œå–„çš„åœ°æ–¹çš„è¯ï¼Œæ¬¢è¿ fork æœ¬é¡¹ç›®ï¼Œç„¶å clone åˆ°æœ¬åœ°ï¼Œåœ¨æœ¬åœ°ä¿®æ”¹åæäº¤ PR ç»™æˆ‘ï¼Œæˆ‘ä¼šåœ¨ç¬¬ä¸€æ—¶é—´ Review ä½ çš„ä»£ç ã€‚\n\n**æˆ‘ä»¬å…ˆä»ä¸€ä¸ªåŸºæœ¬çš„ RPC æ¡†æ¶è®¾è®¡æ€è·¯è¯´èµ·ï¼**\n\n### ä¸€ä¸ªåŸºæœ¬çš„ RPC æ¡†æ¶è®¾è®¡æ€è·¯\n\n> **æ³¨æ„** ï¼šæˆ‘ä»¬è¿™é‡Œè¯´çš„ RPC æ¡†æ¶æŒ‡çš„æ˜¯ï¼šå¯ä»¥è®©å®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨æœåŠ¡ç«¯æ–¹æ³•å°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•çš„æ¡†æ¶ï¼Œæ¯”å¦‚æˆ‘å‰é¢ä»‹ç»çš„ Dubboã€Motanã€gRPC è¿™äº›ã€‚ å¦‚æœéœ€è¦å’Œ HTTP åè®®æ‰“äº¤é“ï¼Œè§£æå’Œå°è£… HTTP è¯·æ±‚å’Œå“åº”ã€‚è¿™ç±»æ¡†æ¶å¹¶ä¸èƒ½ç®—æ˜¯â€œRPC æ¡†æ¶â€ï¼Œæ¯”å¦‚ Feignã€‚\n\nä¸€ä¸ªæœ€ç®€å•çš„ RPC æ¡†æ¶ä½¿ç”¨ç¤ºæ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤º,è¿™ä¹Ÿæ˜¯ [guide-rpc-framework](https://github.com/Snailclimb/guide-rpc-framework) ç›®å‰çš„æ¶æ„ ï¼š\n\n![](./images/rpc-architure.png)\n\næœåŠ¡æä¾›ç«¯ Server å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡ï¼ŒæœåŠ¡æ¶ˆè´¹è€… Client é€šè¿‡æ³¨å†Œä¸­å¿ƒæ‹¿åˆ°æœåŠ¡ç›¸å…³ä¿¡æ¯ï¼Œç„¶åå†é€šè¿‡ç½‘ç»œè¯·æ±‚æœåŠ¡æä¾›ç«¯ Serverã€‚\n\nä½œä¸º RPC æ¡†æ¶é¢†åŸŸçš„ä½¼ä½¼è€…[Dubbo](https://github.com/apache/dubbo)çš„æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤º,å’Œæˆ‘ä»¬ä¸Šé¢ç”»çš„å¤§ä½“ä¹Ÿæ˜¯å·®ä¸å¤šçš„ã€‚\n\n<img src=\"./images/dubbo-architure.jpg\" style=\"zoom:80%;\" />\n\n**ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ RPC æ¡†æ¶ä¸ä»…è¦æä¾›æœåŠ¡å‘ç°åŠŸèƒ½ï¼Œè¿˜è¦æä¾›è´Ÿè½½å‡è¡¡ã€å®¹é”™ç­‰åŠŸèƒ½ï¼Œè¿™æ ·çš„ RPC æ¡†æ¶æ‰ç®—çœŸæ­£åˆæ ¼çš„ã€‚**\n\n**ç®€å•è¯´ä¸€ä¸‹è®¾è®¡ä¸€ä¸ªæœ€åŸºæœ¬çš„ RPC æ¡†æ¶çš„æ€è·¯ï¼š**\n\n![](./images/rpc-architure-detail.png)\n\n1. **æ³¨å†Œä¸­å¿ƒ** ï¼šæ³¨å†Œä¸­å¿ƒé¦–å…ˆæ˜¯è¦æœ‰çš„ï¼Œæ¨èä½¿ç”¨ Zookeeperã€‚æ³¨å†Œä¸­å¿ƒè´Ÿè´£æœåŠ¡åœ°å€çš„æ³¨å†Œä¸æŸ¥æ‰¾ï¼Œç›¸å½“äºç›®å½•æœåŠ¡ã€‚æœåŠ¡ç«¯å¯åŠ¨çš„æ—¶å€™å°†æœåŠ¡åç§°åŠå…¶å¯¹åº”çš„åœ°å€(ip+port)æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡æ¶ˆè´¹ç«¯æ ¹æ®æœåŠ¡åç§°æ‰¾åˆ°å¯¹åº”çš„æœåŠ¡åœ°å€ã€‚æœ‰äº†æœåŠ¡åœ°å€ä¹‹åï¼ŒæœåŠ¡æ¶ˆè´¹ç«¯å°±å¯ä»¥é€šè¿‡ç½‘ç»œè¯·æ±‚æœåŠ¡ç«¯äº†ã€‚\n2. **ç½‘ç»œä¼ è¾“** ï¼šæ—¢ç„¶è¦è°ƒç”¨è¿œç¨‹çš„æ–¹æ³•å°±è¦å‘è¯·æ±‚ï¼Œè¯·æ±‚ä¸­è‡³å°‘è¦åŒ…å«ä½ è°ƒç”¨çš„ç±»åã€æ–¹æ³•åä»¥åŠç›¸å…³å‚æ•°å§ï¼æ¨èåŸºäº NIO çš„ Netty æ¡†æ¶ã€‚\n3. **åºåˆ—åŒ–** ï¼šæ—¢ç„¶æ¶‰åŠåˆ°ç½‘ç»œä¼ è¾“å°±ä¸€å®šæ¶‰åŠåˆ°åºåˆ—åŒ–ï¼Œä½ ä¸å¯èƒ½ç›´æ¥ä½¿ç”¨ JDK è‡ªå¸¦çš„åºåˆ—åŒ–å§ï¼JDK è‡ªå¸¦çš„åºåˆ—åŒ–æ•ˆç‡ä½å¹¶ä¸”æœ‰å®‰å…¨æ¼æ´ã€‚ æ‰€ä»¥ï¼Œä½ è¿˜è¦è€ƒè™‘ä½¿ç”¨å“ªç§åºåˆ—åŒ–åè®®ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰ hession2ã€kyroã€protostuffã€‚\n4. **åŠ¨æ€ä»£ç†** ï¼š å¦å¤–ï¼ŒåŠ¨æ€ä»£ç†ä¹Ÿæ˜¯éœ€è¦çš„ã€‚å› ä¸º RPC çš„ä¸»è¦ç›®çš„å°±æ˜¯è®©æˆ‘ä»¬è°ƒç”¨è¿œç¨‹æ–¹æ³•åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•ï¼Œä½¿ç”¨åŠ¨æ€ä»£ç†å¯ä»¥å±è”½è¿œç¨‹æ–¹æ³•è°ƒç”¨çš„ç»†èŠ‚æ¯”å¦‚ç½‘ç»œä¼ è¾“ã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä½ è°ƒç”¨è¿œç¨‹æ–¹æ³•çš„æ—¶å€™ï¼Œå®é™…ä¼šé€šè¿‡ä»£ç†å¯¹è±¡æ¥ä¼ è¾“ç½‘ç»œè¯·æ±‚ï¼Œä¸ç„¶çš„è¯ï¼Œæ€ä¹ˆå¯èƒ½ç›´æ¥å°±è°ƒç”¨åˆ°è¿œç¨‹æ–¹æ³•å‘¢ï¼Ÿ\n5. **è´Ÿè½½å‡è¡¡** ï¼šè´Ÿè½½å‡è¡¡ä¹Ÿæ˜¯éœ€è¦çš„ã€‚ä¸ºå•¥ï¼Ÿä¸¾ä¸ªä¾‹å­æˆ‘ä»¬çš„ç³»ç»Ÿä¸­çš„æŸä¸ªæœåŠ¡çš„è®¿é—®é‡ç‰¹åˆ«å¤§ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæœåŠ¡éƒ¨ç½²åœ¨äº†å¤šå°æœåŠ¡å™¨ä¸Šï¼Œå½“å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œå¤šå°æœåŠ¡å™¨éƒ½å¯ä»¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•æ­£ç¡®é€‰æ‹©å¤„ç†è¯¥è¯·æ±‚çš„æœåŠ¡å™¨å°±å¾ˆå…³é”®ã€‚å‡å¦‚ï¼Œä½ å°±è¦ä¸€å°æœåŠ¡å™¨æ¥å¤„ç†è¯¥æœåŠ¡çš„è¯·æ±‚ï¼Œé‚£è¯¥æœåŠ¡éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨çš„æ„ä¹‰å°±ä¸å¤å­˜åœ¨äº†ã€‚è´Ÿè½½å‡è¡¡å°±æ˜¯ä¸ºäº†é¿å…å•ä¸ªæœåŠ¡å™¨å“åº”åŒä¸€è¯·æ±‚ï¼Œå®¹æ˜“é€ æˆæœåŠ¡å™¨å®•æœºã€å´©æºƒç­‰é—®é¢˜ï¼Œæˆ‘ä»¬ä»è´Ÿè½½å‡è¡¡çš„è¿™å››ä¸ªå­—å°±èƒ½æ˜æ˜¾æ„Ÿå—åˆ°å®ƒçš„æ„ä¹‰ã€‚\n6. ......\n\n### é¡¹ç›®åŸºæœ¬æƒ…å†µå’Œå¯ä¼˜åŒ–ç‚¹\n\nä¸ºäº†å¾ªåºæ¸è¿›ï¼Œæœ€åˆçš„æ˜¯æ—¶å€™ï¼Œæˆ‘æ˜¯åŸºäºä¼ ç»Ÿçš„ **BIO** çš„æ–¹å¼ **Socket** è¿›è¡Œç½‘ç»œä¼ è¾“ï¼Œç„¶ååˆ©ç”¨ **JDK è‡ªå¸¦çš„åºåˆ—åŒ–æœºåˆ¶** æ¥å®ç°è¿™ä¸ª RPC æ¡†æ¶çš„ã€‚åé¢ï¼Œæˆ‘å¯¹åŸå§‹ç‰ˆæœ¬è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå·²å®Œæˆçš„ä¼˜åŒ–ç‚¹å’Œå¯ä»¥å®Œæˆçš„ä¼˜åŒ–ç‚¹æˆ‘éƒ½åˆ—åœ¨äº†ä¸‹é¢ ğŸ‘‡ã€‚\n\n**ä¸ºä»€ä¹ˆè¦æŠŠå¯ä¼˜åŒ–ç‚¹åˆ—å‡ºæ¥ï¼Ÿ** ä¸»è¦æ˜¯æƒ³ç»™å“ªäº›å¸Œæœ›ä¼˜åŒ–è¿™ä¸ª RPC æ¡†æ¶çš„å°ä¼™ä¼´ä¸€ç‚¹æ€è·¯ã€‚æ¬¢è¿å¤§å®¶ fork æœ¬ä»“åº“ï¼Œç„¶åè‡ªå·±è¿›è¡Œä¼˜åŒ–ã€‚\n\n- [x] **ä½¿ç”¨ Nettyï¼ˆåŸºäº NIOï¼‰æ›¿ä»£ BIO å®ç°ç½‘ç»œä¼ è¾“ï¼›**\n- [x] **ä½¿ç”¨å¼€æºçš„åºåˆ—åŒ–æœºåˆ¶ Kyroï¼ˆä¹Ÿå¯ä»¥ç”¨å…¶å®ƒçš„ï¼‰æ›¿ä»£ JDK è‡ªå¸¦çš„åºåˆ—åŒ–æœºåˆ¶ï¼›**\n- [x] **ä½¿ç”¨ Zookeeper ç®¡ç†ç›¸å…³æœåŠ¡åœ°å€ä¿¡æ¯**\n- [x] Netty é‡ç”¨ Channel é¿å…é‡å¤è¿æ¥æœåŠ¡ç«¯\n- [x] ä½¿ç”¨ `CompletableFuture` åŒ…è£…æ¥å—å®¢æˆ·ç«¯è¿”å›ç»“æœï¼ˆä¹‹å‰çš„å®ç°æ˜¯é€šè¿‡ `AttributeMap` ç»‘å®šåˆ° Channel ä¸Šå®ç°çš„ï¼‰ è¯¦è§ï¼š[ä½¿ç”¨ CompletableFuture ä¼˜åŒ–æ¥å—æœåŠ¡æä¾›ç«¯è¿”å›ç»“æœ](./docs/ä½¿ç”¨CompletableFutureä¼˜åŒ–æ¥å—æœåŠ¡æä¾›ç«¯è¿”å›ç»“æœ.md)\n- [x] **å¢åŠ  Netty å¿ƒè·³æœºåˆ¶** : ä¿è¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥ä¸è¢«æ–­æ‰ï¼Œé¿å…é‡è¿ã€‚\n- [x] **å®¢æˆ·ç«¯è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æ—¶å€™è¿›è¡Œè´Ÿè½½å‡è¡¡** ï¼šè°ƒç”¨æœåŠ¡çš„æ—¶å€™ï¼Œä»å¾ˆå¤šæœåŠ¡åœ°å€ä¸­æ ¹æ®ç›¸åº”çš„è´Ÿè½½å‡è¡¡ç®—æ³•é€‰å–ä¸€ä¸ªæœåŠ¡åœ°å€ã€‚psï¼šç›®å‰å®ç°äº†éšæœºè´Ÿè½½å‡è¡¡ç®—æ³•ä¸ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ã€‚\n- [x] **å¤„ç†ä¸€ä¸ªæ¥å£æœ‰å¤šä¸ªç±»å®ç°çš„æƒ…å†µ** ï¼šå¯¹æœåŠ¡åˆ†ç»„ï¼Œå‘å¸ƒæœåŠ¡çš„æ—¶å€™å¢åŠ ä¸€ä¸ª group å‚æ•°å³å¯ã€‚\n- [x] **é›†æˆ Spring é€šè¿‡æ³¨è§£æ³¨å†ŒæœåŠ¡**\n- [x] **é›†æˆ Spring é€šè¿‡æ³¨è§£è¿›è¡ŒæœåŠ¡æ¶ˆè´¹** ã€‚å‚è€ƒï¼š [PR#10](https://github.com/Snailclimb/guide-rpc-framework/pull/10)\n- [x] **å¢åŠ æœåŠ¡ç‰ˆæœ¬å·** ï¼šå»ºè®®ä½¿ç”¨ä¸¤ä½æ•°å­—ç‰ˆæœ¬ï¼Œå¦‚ï¼š1.0ï¼Œé€šå¸¸åœ¨æ¥å£ä¸å…¼å®¹æ—¶ç‰ˆæœ¬å·æ‰éœ€è¦å‡çº§ã€‚ä¸ºä»€ä¹ˆè¦å¢åŠ æœåŠ¡ç‰ˆæœ¬å·ï¼Ÿä¸ºåç»­ä¸å…¼å®¹å‡çº§æä¾›å¯èƒ½ï¼Œæ¯”å¦‚æœåŠ¡æ¥å£å¢åŠ æ–¹æ³•ï¼Œæˆ–æœåŠ¡æ¨¡å‹å¢åŠ å­—æ®µï¼Œå¯å‘åå…¼å®¹ï¼Œåˆ é™¤æ–¹æ³•æˆ–åˆ é™¤å­—æ®µï¼Œå°†ä¸å…¼å®¹ï¼Œæšä¸¾ç±»å‹æ–°å¢å­—æ®µä¹Ÿä¸å…¼å®¹ï¼Œéœ€é€šè¿‡å˜æ›´ç‰ˆæœ¬å·å‡çº§ã€‚\n- [x] **å¯¹ SPI æœºåˆ¶çš„è¿ç”¨** \n- [ ] **å¢åŠ å¯é…ç½®æ¯”å¦‚åºåˆ—åŒ–æ–¹å¼ã€æ³¨å†Œä¸­å¿ƒçš„å®ç°æ–¹å¼,é¿å…ç¡¬ç¼–ç ** ï¼šé€šè¿‡ API é…ç½®ï¼Œåç»­é›†æˆ Spring çš„è¯å»ºè®®ä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œé…ç½®\n- [x] **å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡åè®®ï¼ˆæ•°æ®åŒ…ç»“æ„ï¼‰é‡æ–°è®¾è®¡** ï¼Œå¯ä»¥å°†åŸæœ‰çš„ `RpcRequest`å’Œ `RpcRequest` å¯¹è±¡ä½œä¸ºæ¶ˆæ¯ä½“ï¼Œç„¶åå¢åŠ å¦‚ä¸‹å­—æ®µï¼ˆå¯ä»¥å‚è€ƒï¼šã€ŠNetty å…¥é—¨å®æˆ˜å°å†Œã€‹å’Œ Dubbo æ¡†æ¶å¯¹è¿™å—çš„è®¾è®¡ï¼‰ï¼š\n  - **é­”æ•°** ï¼š é€šå¸¸æ˜¯ 4 ä¸ªå­—èŠ‚ã€‚è¿™ä¸ªé­”æ•°ä¸»è¦æ˜¯ä¸ºäº†ç­›é€‰æ¥åˆ°æœåŠ¡ç«¯çš„æ•°æ®åŒ…ï¼Œæœ‰äº†è¿™ä¸ªé­”æ•°ä¹‹åï¼ŒæœåŠ¡ç«¯é¦–å…ˆå–å‡ºå‰é¢å››ä¸ªå­—èŠ‚è¿›è¡Œæ¯”å¯¹ï¼Œèƒ½å¤Ÿåœ¨ç¬¬ä¸€æ—¶é—´è¯†åˆ«å‡ºè¿™ä¸ªæ•°æ®åŒ…å¹¶éæ˜¯éµå¾ªè‡ªå®šä¹‰åè®®çš„ï¼Œä¹Ÿå°±æ˜¯æ— æ•ˆæ•°æ®åŒ…ï¼Œä¸ºäº†å®‰å…¨è€ƒè™‘å¯ä»¥ç›´æ¥å…³é—­è¿æ¥ä»¥èŠ‚çœèµ„æºã€‚\n  - **åºåˆ—åŒ–å™¨ç¼–å·** ï¼šæ ‡è¯†åºåˆ—åŒ–çš„æ–¹å¼ï¼Œæ¯”å¦‚æ˜¯ä½¿ç”¨ Java è‡ªå¸¦çš„åºåˆ—åŒ–ï¼Œè¿˜æ˜¯ jsonï¼Œkyro ç­‰åºåˆ—åŒ–æ–¹å¼ã€‚\n  - **æ¶ˆæ¯ä½“é•¿åº¦** ï¼š è¿è¡Œæ—¶è®¡ç®—å‡ºæ¥ã€‚\n  - ......\n- [ ] **ç¼–å†™æµ‹è¯•ä¸ºé‡æ„ä»£ç æä¾›ä¿¡å¿ƒ**\n- [ ] **æœåŠ¡ç›‘æ§ä¸­å¿ƒï¼ˆç±»ä¼¼dubbo adminï¼‰**\n- [x] **è®¾ç½® gzip å‹ç¼©**\n\n### é¡¹ç›®æ¨¡å—æ¦‚è§ˆ\n\n![](./images/RPCæ¡†æ¶å„ä¸ªæ¨¡å—ä»‹ç».png)\n\n## è¿è¡Œé¡¹ç›®\n\n### å¯¼å…¥é¡¹ç›®\n\nfork é¡¹ç›®åˆ°è‡ªå·±çš„ä»“åº“ï¼Œç„¶åå…‹éš†é¡¹ç›®åˆ°è‡ªå·±çš„æœ¬åœ°ï¼š`git clone git@github.com:username/guide-rpc-framework.git`ï¼Œä½¿ç”¨ IDEA æ‰“å¼€ï¼Œç­‰å¾…é¡¹ç›®åˆå§‹åŒ–å®Œæˆã€‚\n\n### åˆå§‹åŒ– git hooks\n\n**è¿™ä¸€æ­¥ä¸»è¦æ˜¯ä¸ºäº†åœ¨ commit ä»£ç ä¹‹å‰ï¼Œè·‘ Check Styleï¼Œä¿è¯ä»£ç æ ¼å¼æ²¡é—®é¢˜ï¼Œå¦‚æœæœ‰é—®é¢˜çš„è¯å°±ä¸èƒ½æäº¤ã€‚**\n\n> ä»¥ä¸‹æ¼”ç¤ºçš„æ˜¯ Mac/Linux å¯¹åº”çš„æ“ä½œï¼ŒWindow ç”¨æˆ·éœ€è¦æ‰‹åŠ¨å°† `config/git-hooks` ç›®å½•ä¸‹çš„`pre-commit` æ–‡ä»¶æ‹·è´åˆ° é¡¹ç›®ä¸‹çš„ `.git/hooks/` ç›®å½•ã€‚\n\næ‰§è¡Œä¸‹é¢è¿™äº›å‘½ä»¤ï¼š\n\n```shell\nâœ  guide-rpc-framework git:(master) âœ— chmod +x ./init.sh\nâœ  guide-rpc-framework git:(master) âœ— ./init.sh\n```\n\n`init.sh` è¿™ä¸ªè„šæœ¬çš„ä¸»è¦ä½œç”¨æ˜¯å°† git commit é’©å­æ‹·è´åˆ°é¡¹ç›®ä¸‹çš„ `.git/hooks/` ç›®å½•ï¼Œè¿™æ ·ä½ æ¯æ¬¡ commit çš„æ—¶å€™å°±ä¼šæ‰§è¡Œäº†ã€‚\n\n### CheckStyle æ’ä»¶ä¸‹è½½å’Œé…ç½®\n\n`IntelliJ IDEA-> Preferences->Plugins->æœç´¢ä¸‹è½½ CheckStyle æ’ä»¶`ï¼Œç„¶åæŒ‰ç…§å¦‚ä¸‹æ–¹å¼è¿›è¡Œé…ç½®ã€‚\n\n![CheckStyle æ’ä»¶ä¸‹è½½å’Œé…ç½®](./images/setting-check-style.png)\n\né…ç½®å®Œæˆä¹‹åï¼ŒæŒ‰ç…§å¦‚ä¸‹æ–¹å¼ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼\n\n![æ’ä»¶ä½¿ç”¨æ–¹å¼](./images/run-check-style.png)\n\n### ä¸‹è½½è¿è¡Œ zookeeper\n\nè¿™é‡Œä½¿ç”¨ Docker æ¥ä¸‹è½½å®‰è£…ã€‚\n\nä¸‹è½½ï¼š\n\n```shell\ndocker pull zookeeper:3.5.8\n```\n\nè¿è¡Œï¼š\n\n```shell\ndocker run -d --name zookeeper -p 2181:2181 zookeeper:3.5.8\n```\n\n## ä½¿ç”¨\n\n### æœåŠ¡æä¾›ç«¯\n\nå®ç°æ¥å£ï¼š\n\n```java\n@Slf4j\n@RpcService(group = \"test1\", version = \"version1\")\npublic class HelloServiceImpl implements HelloService {\n    static {\n        System.out.println(\"HelloServiceImplè¢«åˆ›å»º\");\n    }\n\n    @Override\n    public String hello(Hello hello) {\n        log.info(\"HelloServiceImplæ”¶åˆ°: {}.\", hello.getMessage());\n        String result = \"Hello description is \" + hello.getDescription();\n        log.info(\"HelloServiceImplè¿”å›: {}.\", result);\n        return result;\n    }\n}\n\t\n@Slf4j\npublic class HelloServiceImpl2 implements HelloService {\n\n    static {\n        System.out.println(\"HelloServiceImpl2è¢«åˆ›å»º\");\n    }\n\n    @Override\n    public String hello(Hello hello) {\n        log.info(\"HelloServiceImpl2æ”¶åˆ°: {}.\", hello.getMessage());\n        String result = \"Hello description is \" + hello.getDescription();\n        log.info(\"HelloServiceImpl2è¿”å›: {}.\", result);\n        return result;\n    }\n}\n```\n\nå‘å¸ƒæœåŠ¡(ä½¿ç”¨ Netty è¿›è¡Œä¼ è¾“)ï¼š\n\n```java\n/**\n * Server: Automatic registration service via @RpcService annotation\n *\n * @author shuang.kou\n * @createTime 2020å¹´05æœˆ10æ—¥ 07:25:00\n */\n@RpcScan(basePackage = {\"github.javaguide.serviceimpl\"})\npublic class NettyServerMain {\n    public static void main(String[] args) {\n        // Register service via annotation\n        new AnnotationConfigApplicationContext(NettyServerMain.class);\n        NettyServer nettyServer = new NettyServer();\n        // Register service manually\n        HelloService helloService2 = new HelloServiceImpl2();\n        RpcServiceProperties rpcServiceConfig = RpcServiceProperties.builder()\n                .group(\"test2\").version(\"version2\").build();\n        nettyServer.registerService(helloService2, rpcServiceConfig);\n        nettyServer.start();\n    }\n}\n```\n\n### æœåŠ¡æ¶ˆè´¹ç«¯\n\n```java\n@Component\npublic class HelloController {\n\n    @RpcReference(version = \"version1\", group = \"test1\")\n    private HelloService helloService;\n\n    public void test() throws InterruptedException {\n        String hello = this.helloService.hello(new Hello(\"111\", \"222\"));\n        //å¦‚éœ€ä½¿ç”¨ assert æ–­è¨€ï¼Œéœ€è¦åœ¨ VM options æ·»åŠ å‚æ•°ï¼š-ea\n        assert \"Hello description is 222\".equals(hello);\n        Thread.sleep(12000);\n        for (int i = 0; i < 10; i++) {\n            System.out.println(helloService.hello(new Hello(\"111\", \"222\")));\n        }\n    }\n}\n```\n\n```java\nClientTransport rpcRequestTransport = new SocketRpcClient();\nRpcServiceProperties rpcServiceConfig = RpcServiceProperties.builder()\n        .group(\"test2\").version(\"version2\").build();\nRpcClientProxy rpcClientProxy = new RpcClientProxy(rpcRequestTransport, rpcServiceConfig);\nHelloService helloService = rpcClientProxy.getProxy(HelloService.class);\nString hello = helloService.hello(new Hello(\"111\", \"222\"));\nSystem.out.println(hello);\n```\n\n## ç›¸å…³é—®é¢˜\n\n### ä¸ºä»€ä¹ˆè¦é€ è¿™ä¸ªè½®å­ï¼ŸDubbo ä¸é¦™ä¹ˆï¼Ÿ\n\nå†™è¿™ä¸ª RPC æ¡†æ¶ä¸»è¦æ˜¯ä¸ºäº†é€šè¿‡é€ è½®å­çš„æ–¹å¼æ¥å­¦ä¹ ï¼Œæ£€éªŒè‡ªå·±å¯¹äºè‡ªå·±æ‰€æŒæ¡çš„çŸ¥è¯†çš„è¿ç”¨ã€‚\n\nå®ç°ä¸€ä¸ªç®€å•çš„ RPC æ¡†æ¶å®é™…æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼Œä¸è¿‡ï¼Œç›¸æ¯”äºæ‰‹å†™ AOP å’Œ IoC è¿˜æ˜¯è¦éš¾ä¸€ç‚¹ç‚¹ï¼Œå‰ææ˜¯ä½ ææ‡‚äº† RPC çš„åŸºæœ¬åŸç†ã€‚\n\næˆ‘ä¹‹å‰ä»ç†è®ºå±‚é¢åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒåˆ†äº«è¿‡å¦‚ä½•å®ç°ä¸€ä¸ª RPCã€‚ä¸è¿‡ç†è®ºå±‚é¢çš„ä¸œè¥¿åªæ˜¯æ”¯æ’‘ï¼Œä½ çœ‹æ‡‚äº†ç†è®ºå¯èƒ½åªèƒ½ç³Šå¼„ä½é¢è¯•å®˜ã€‚å’±ç¨‹åºå‘˜è¿™ä¸€è¡Œè¿˜æ˜¯æœ€éœ€è¦åŠ¨æ‰‹èƒ½åŠ›ï¼Œå³ä½¿ä½ æ˜¯æ¶æ„å¸ˆçº§åˆ«çš„äººç‰©ã€‚å½“ä½ åŠ¨æ‰‹å»å®è·µæŸä¸ªä¸œè¥¿ï¼Œå°†ç†è®ºä»˜è¯¸å®è·µçš„æ—¶å€™ï¼Œä½ å°±ä¼šå‘ç°æœ‰å¾ˆå¤šå‘ç­‰ç€ä½ ã€‚\n\nå¤§å®¶åœ¨å®é™…é¡¹ç›®ä¸Šè¿˜æ˜¯è¦å°½é‡å°‘é€ è½®å­ï¼Œæœ‰ä¼˜ç§€çš„æ¡†æ¶ä¹‹åå°½é‡å°±å»ç”¨ï¼ŒDubbo åœ¨å„ä¸ªæ–¹é¢åšçš„éƒ½æ¯”è¾ƒå¥½å’Œå®Œå–„ã€‚\n\n### å¦‚æœæˆ‘è¦è‡ªå·±å†™çš„è¯ï¼Œéœ€è¦æå‰äº†è§£å“ªäº›çŸ¥è¯†\n\n**Java** ï¼š\n\n1. åŠ¨æ€ä»£ç†æœºåˆ¶ï¼›\n2. åºåˆ—åŒ–æœºåˆ¶ä»¥åŠå„ç§åºåˆ—åŒ–æ¡†æ¶çš„å¯¹æ¯”ï¼Œæ¯”å¦‚ hession2ã€kyroã€protostuffã€‚\n3. çº¿ç¨‹æ± çš„ä½¿ç”¨ï¼›\n4. `CompletableFuture` çš„ä½¿ç”¨\n5. ......\n\n**Netty** ï¼š\n\n1. ä½¿ç”¨ Netty è¿›è¡Œç½‘ç»œä¼ è¾“ï¼›\n2. `ByteBuf` ä»‹ç»\n3. Netty ç²˜åŒ…æ‹†åŒ…\n4. Netty é•¿è¿æ¥å’Œå¿ƒè·³æœºåˆ¶\n\n**Zookeeper** :\n\n1. åŸºæœ¬æ¦‚å¿µï¼›\n2. æ•°æ®ç»“æ„ï¼›\n3. å¦‚ä½•ä½¿ç”¨ Netflix å…¬å¸å¼€æºçš„ zookeeper å®¢æˆ·ç«¯æ¡†æ¶ Curator è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼›\n\n## æ•™ç¨‹\n\nGuide çš„æ˜Ÿçƒæ­£åœ¨æ›´æ–°ã€Šä»é›¶å¼€å§‹æ‰‹æŠŠæ‰‹æ•™ä½ å®ç°ä¸€ä¸ªç®€å•çš„ RPC æ¡†æ¶ã€‹ã€‚æ‰«æä¸‹æ–¹äºŒç»´ç å…³æ³¨â€œ**JavaGuide**â€åå›å¤ â€œ**æ˜Ÿçƒ**â€å³å¯ã€‚\n\n![æˆ‘çš„å…¬ä¼—å·](https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019-6/167598cd2e17b8ec.png)\n\n"
        },
        {
          "name": "config",
          "type": "tree",
          "content": null
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "example-client",
          "type": "tree",
          "content": null
        },
        {
          "name": "example-server",
          "type": "tree",
          "content": null
        },
        {
          "name": "hello-service-api",
          "type": "tree",
          "content": null
        },
        {
          "name": "images",
          "type": "tree",
          "content": null
        },
        {
          "name": "init.sh",
          "type": "blob",
          "size": 0.072265625,
          "content": "cp config/git-hooks/pre-commit .git/hooks/\nchmod +x .git/hooks/pre-commit\n"
        },
        {
          "name": "pom.xml",
          "type": "blob",
          "size": 4.4228515625,
          "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>github.javaguide</groupId>\n    <artifactId>guide-rpc-framework</artifactId>\n    <packaging>pom</packaging>\n    <version>1.0-SNAPSHOT</version>\n    <properties>\n        <encoding>UTF-8</encoding>\n        <maven.compiler.source>1.8</maven.compiler.source>\n        <maven.compiler.target>1.8</maven.compiler.target>\n        <netty.version>4.1.42.Final</netty.version>\n        <kryo.version>4.0.2</kryo.version>\n        <guava.version>30.1.1-jre</guava.version>\n        <checkstyle-maven-plugin.version>3.1.1</checkstyle-maven-plugin.version>\n        <spring.version>5.2.7.RELEASE</spring.version>\n        <curator-version>4.2.0</curator-version>\n        <!-- test -->\n        <junit.jupiter.version>5.5.2</junit.jupiter.version>\n        <junit.platform.version>1.5.2</junit.platform.version>\n        <!--logging-->\n        <slf4j.version>1.7.25</slf4j.version>\n        <!-- protostuff -->\n        <protostuff.version>1.7.2</protostuff.version>\n        <!--hessian-->\n        <hessian.version>4.0.65</hessian.version>\n    </properties>\n    <modules>\n        <module>rpc-framework-simple</module>\n        <module>hello-service-api</module>\n        <module>example-client</module>\n        <module>example-server</module>\n        <module>rpc-framework-common</module>\n    </modules>\n    <dependencies>\n        <!-- lombok -->\n        <dependency>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <version>1.18.8</version>\n            <scope>provided</scope>\n        </dependency>\n        <!-- guava -->\n        <dependency>\n            <groupId>com.google.guava</groupId>\n            <artifactId>guava</artifactId>\n            <version>${guava.version}</version>\n        </dependency>\n        <!-- log -->\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-api</artifactId>\n            <version>${slf4j.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-simple</artifactId>\n            <version>${slf4j.version}</version>\n        </dependency>\n        <!-- test -->\n        <dependency>\n            <groupId>org.junit.jupiter</groupId>\n            <artifactId>junit-jupiter-engine</artifactId>\n            <version>${junit.jupiter.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.junit.platform</groupId>\n            <artifactId>junit-platform-runner</artifactId>\n            <version>${junit.platform.version}</version>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>3.8.1</version>\n                <configuration>\n                    <source>${maven.compiler.source}</source>\n                    <target>${maven.compiler.target}</target>\n                    <encoding>${encoding}</encoding>\n                </configuration>\n            </plugin>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-checkstyle-plugin</artifactId>\n                <version>${checkstyle-maven-plugin.version}</version>\n                <configuration>\n                    <configLocation>config/checkstyle.xml</configLocation>\n                </configuration>\n                <executions>\n                    <execution>\n                        <goals>\n                            <goal>check</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n    <reporting>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-checkstyle-plugin</artifactId>\n                <version>${checkstyle-maven-plugin.version}</version>\n                <configuration>\n                    <configLocation>checkstyle.xml</configLocation>\n                </configuration>\n            </plugin>\n        </plugins>\n    </reporting>\n</project>\n"
        },
        {
          "name": "rpc-framework-common",
          "type": "tree",
          "content": null
        },
        {
          "name": "rpc-framework-simple",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}