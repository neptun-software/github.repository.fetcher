{
  "metadata": {
    "timestamp": 1736565279675,
    "page": 91,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjEwMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "cppla/ServerStatus",
      "stars": 4336,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.0419921875,
          "content": "default.sublime-workspace\n\n# pycharm\n.idea\n"
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 0.9267578125,
          "content": "# The Dockerfile for build localhost source, not git repo\nFROM debian:buster AS builder\n\nLABEL maintainer=\"cppla <https://cpp.la>\"\n\nRUN apt-get update -y && apt-get -y install gcc g++ make libcurl4-openssl-dev\n\nCOPY . .\n\nWORKDIR /server\n\nRUN make -j\nRUN pwd && ls -a\n\n# glibc env run\nFROM nginx:latest\n\nRUN mkdir -p /ServerStatus/server/ && ln -sf /dev/null /var/log/nginx/access.log && ln -sf /dev/null /var/log/nginx/error.log\n\nCOPY --from=builder server /ServerStatus/server/\nCOPY --from=builder web /usr/share/nginx/html/\n\n# china time \nENV TZ=Asia/Shanghai\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\n\nEXPOSE 80 35601\nHEALTHCHECK --interval=5s --timeout=3s --retries=3 CMD curl --fail http://localhost:80 || bash -c 'kill -s 15 -1 && (sleep 10; kill -s 9 -1)'\nCMD [\"sh\", \"-c\", \"/etc/init.d/nginx start && /ServerStatus/server/sergate --config=/ServerStatus/server/config.json --web-dir=/usr/share/nginx/html\"]"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0322265625,
          "content": "MIT License\n\nCopyright (c) 2018 \n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 7.880859375,
          "content": "# ServerStatusä¸­æ–‡ç‰ˆï¼š   \n\n* ServerStatusä¸­æ–‡ç‰ˆæ˜¯ä¸€ä¸ªé…·ç‚«é«˜é€¼æ ¼çš„äº‘æ¢é’ˆã€äº‘ç›‘æ§ã€æœåŠ¡å™¨äº‘ç›‘æ§ã€å¤šæœåŠ¡å™¨æ¢é’ˆ~ã€‚\n* åœ¨çº¿æ¼”ç¤ºï¼šhttps://tz.cloudcpp.com    \n\n[![Python Support](https://img.shields.io/badge/python-3.6%2B%20-blue.svg)](https://github.com/cppla/ServerStatus)\n[![C++ Compiler](http://img.shields.io/badge/C++-GNU-blue.svg?style=flat&logo=cplusplus)](https://github.com/cppla/ServerStatus)\n[![License](https://img.shields.io/badge/license-MIT-4EB1BA.svg?style=flat-square)](https://github.com/cppla/ServerStatus)\n[![Version](https://img.shields.io/badge/Version-Build%201.1.5-red)](https://github.com/cppla/ServerStatus)\n\n![Latest Host Version](https://dl.cpp.la/Archive/serverstatus_1.1.5.png)\n\n`Watchdogè§¦å‘å¼å‘Šè­¦ï¼Œintervalåªæ˜¯ä¸ºäº†é˜²æ­¢é¢‘ç¹æ”¶åˆ°æŠ¥è­¦ä¿¡æ¯é€ æˆçš„éªšæ‰°ï¼Œå¹¶ä¸æ˜¯æ¢æµ‹é—´éš”ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒExprtkåº“é»˜è®¤ä½¿ç”¨çª„å­—ç¬¦ç±»å‹ï¼Œä¸­æ–‡ç­‰Unicodeå­—ç¬¦æ— æ³•è§£æè®¡ç®—ï¼Œç­‰å¾…ä¿®å¤ã€‚ `    \n\n# ç›®å½•ï¼š\n\n* clients       \tå®¢æˆ·ç«¯æ–‡ä»¶\n* server       \t \tæœåŠ¡ç«¯æ–‡ä»¶  \n* web           \tç½‘ç«™æ–‡ä»¶\n\n* server/config.json\tæ¢é’ˆé…ç½®æ–‡ä»¶        Â  Â  Â                    \n* web/json      \tæ¢é’ˆæœˆæµé‡        \n\n# éƒ¨ç½²ï¼š\n\nã€æœåŠ¡ç«¯ã€‘ï¼š\n```bash\n\n`Docker`:     \n\nwget --no-check-certificate -qO ~/serverstatus-config.json https://raw.githubusercontent.com/cppla/ServerStatus/master/server/config.json && mkdir ~/serverstatus-monthtraffic    \ndocker run -d --restart=always --name=serverstatus -v ~/serverstatus-config.json:/ServerStatus/server/config.json -v ~/serverstatus-monthtraffic:/usr/share/nginx/html/json -p 80:80 -p 35601:35601 cppla/serverstatus:latest     \n\n`Docker-compose(æ¨è)`: docker-compose up -d\n```\n\nã€å®¢æˆ·ç«¯ã€‘ï¼š\n```bash\nwget --no-check-certificate -qO client-linux.py 'https://raw.githubusercontent.com/cppla/ServerStatus/master/clients/client-linux.py' && nohup python3 client-linux.py SERVER={$SERVER} USER={$USER} PASSWORD={$PASSWORD} >/dev/null 2>&1 &\n\neg:\nwget --no-check-certificate -qO client-linux.py 'https://raw.githubusercontent.com/cppla/ServerStatus/master/clients/client-linux.py' && nohup python3 client-linux.py SERVER=45.79.67.132 USER=s04  >/dev/null 2>&1 &\n```\n\n# ä¸»é¢˜ï¼š            \n\n* layuiï¼šhttps://github.com/zeyudada/StatusServerLayui ï¼Œé¢„è§ˆï¼šhttps://sslt.8zyw.cn            \n<img src=https://dl.cpp.la/Archive/serverstatus_layui.png width=200 height=100 />\n\n* lightï¼šhttps://github.com/orilights/ServerStatus-Theme-Light ï¼Œé¢„è§ˆï¼šhttps://tz.cloudcpp.com/index3.html    \n<img src=https://dl.cpp.la/Archive/serverstatus_light.png width=200 height=100 />  \n\n\n# æ‰‹åŠ¨å®‰è£…æ•™ç¨‹ï¼š     \n   \n**ã€æœåŠ¡ç«¯é…ç½®ã€‘**           \n          \n#### ä¸€ã€ç”ŸæˆæœåŠ¡ç«¯ç¨‹åº              \n```\n`Debian/Ubuntu`: apt-get -y install gcc g++ make libcurl4-openssl-dev\n`Centos/Redhat`: yum -y install gcc gcc-c++ make libcurl-devel\n\ncd ServerStatus/server && make\n./sergate\n```\nå¦‚æœæ²¡é”™è¯¯æç¤ºï¼ŒOKï¼Œctrl+cå…³é—­ï¼›å¦‚æœæœ‰é”™è¯¯æç¤ºï¼Œæ£€æŸ¥35601ç«¯å£æ˜¯å¦è¢«å ç”¨    \n\n#### äºŒã€ä¿®æ”¹é…ç½®æ–‡ä»¶         \n```diff\n! watchdog rule å¯ä»¥ä¸ºä»»ä½•å·²çŸ¥å­—æ®µçš„è¡¨è¾¾å¼ã€‚æ³¨æ„Exprtkåº“é»˜è®¤ä½¿ç”¨çª„å­—ç¬¦ç±»å‹ï¼Œä¸­æ–‡ç­‰Unicodeå­—ç¬¦æ— æ³•è§£æè®¡ç®—ï¼Œç­‰å¾…ä¿®å¤       \n! watchdog interval æœ€å°é€šçŸ¥é—´éš”\n! watchdog callback å¯è‡ªå®šä¹‰ä¸ºPostæ–¹æ³•çš„URLï¼Œå‘Šè­¦å†…å®¹å°†æ‹¼æ¥å…¶åå¹¶å‘èµ·å›è°ƒ    \n\n! Telegram: https://api.telegram.org/botä½ è‡ªå·±çš„å¯†é’¥/sendMessage?parse_mode=HTML&disable_web_page_preview=true&chat_id=ä½ è‡ªå·±çš„æ ‡è¯†&text=\n! Serveré…±: https://sctapi.ftqq.com/ä½ è‡ªå·±çš„å¯†é’¥.send?title=ServerStatus&desp=\n! PushDeer: https://api2.pushdeer.com/message/push?pushkey=ä½ è‡ªå·±çš„å¯†é’¥&text=\n! HttpBasicAuth: https://ç”¨æˆ·å:å¯†ç @ä½ è‡ªå·±çš„åŸŸå/api/push?message=\n```\n\n```\n{\n        \"servers\":\n\t[\n\t\t{\n\t\t\t\"username\": \"s01\",\n\t\t\t\"name\": \"vps-1\",\n\t\t\t\"type\": \"kvm\",\n\t\t\t\"host\": \"chengdu\",\n\t\t\t\"location\": \"ğŸ‡¨ğŸ‡³\",\n\t\t\t\"password\": \"USER_DEFAULT_PASSWORD\",\n\t\t\t\"monthstart\": 1\n\t\t}\n\t],\n\t\"monitors\": [\n\t\t{\n\t\t\t\"name\": \"ç›‘æµ‹ç½‘ç«™ï¼Œé»˜è®¤ä¸ºä¸€å¤©åœ¨çº¿ç‡\",\n\t\t\t\"host\": \"https://www.baidu.com\",\n\t\t\t\"interval\": 1200,\n\t\t\t\"type\": \"https\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ç›‘æµ‹tcpæœåŠ¡ç«¯å£\",\n\t\t\t\"host\": \"1.1.1.1:80\",\n\t\t\t\"interval\": 1200,\n\t\t\t\"type\": \"tcp\"\n\t\t}\n\t],\n\t\"watchdog\":\n\t[\n\t        {\n\t\t\t\"name\": \"æœåŠ¡å™¨è´Ÿè½½é«˜ç›‘æ§ï¼Œæ’é™¤å†…å­˜å¤§äº32Gç‰©ç†æœºï¼ŒåŒæ—¶æ’é™¤node1æœºå™¨\",\n\t\t\t\"rule\": \"cpu>90&load_1>4&memory_total<33554432&name!='node1'\",\n\t\t\t\"interval\": 600,\n\t\t\t\"callback\": \"https://yourSMSurl\"\n\t\t},\n\t\t{\n                        \"name\": \"æœåŠ¡å™¨å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜ç›‘æ§ï¼Œæ’é™¤å°äº1Gçš„æœºå™¨\",\n                        \"rule\": \"(memory_used/memory_total)*100>90&memory_total>1048576\",\n                        \"interval\": 600,\n                        \"callback\": \"https://yourSMSurl\"\n                },\n                {\n                        \"name\": \"æœåŠ¡å™¨å®•æœºå‘Šè­¦\",\n                        \"rule\": \"online4=0&online6=0\",\n                        \"interval\": 600,\n                        \"callback\": \"https://yourSMSurl\"\n                },\n\t\t{\n                        \"name\": \"DDOSå’ŒCCæ”»å‡»ç›‘æ§ï¼Œé™åˆ¶ç”²éª¨æ–‡æœºå™¨\",\n                        \"rule\": \"tcp_count>600&type='Oracle'\",\n                        \"interval\": 300,\n                        \"callback\": \"https://yourSMSurl\"\n                },\n\t\t{\n\t\t\t\"name\": \"æœåŠ¡å™¨æœˆå‡ºå£æµé‡999GBå‘Šè­¦\",\n\t\t\t\"rule\": \"(network_out-last_network_out)/1024/1024/1024>999\",\n\t\t\t\"interval\": 3600,\n\t\t\t\"callback\": \"https://yourSMSurl\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"é˜¿é‡Œäº‘æœåŠ¡å™¨æµé‡18GBå‘Šè­¦,é™åˆ¶usernameä¸ºä¹Œå…°å¯Ÿå¸ƒ\",\n\t\t\t\"rule\": \"(network_out-last_network_out)/1024/1024/1024>18&(username='wlcb1'|username='wlcb2'|username='wlcb3'|username='wlcb4')\",\n\t\t\t\"interval\": 3600,\n\t\t\t\"callback\": \"https://yourSMSurl\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"é‡è¦çº¿è·¯ä¸¢åŒ…ç‡è¿‡é«˜æ£€æŸ¥\",\n\t\t\t\"rule\": \"(ping_10010>10|ping_189>10|ping_10086>10)&(host='sgp'|host='qqhk'|host='hk-21-x'|host='hk-31-x')\",\n\t\t\t\"interval\": 600,\n\t\t\t\"callback\": \"https://yourSMSurl\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ä½ å¯ä»¥ç»„åˆä»»ä½•å·²çŸ¥å­—æ®µçš„è¡¨è¾¾å¼\",\n\t\t\t\"rule\": \"(hdd_used/hdd_total)*100>95\",\n\t\t\t\"interval\": 1800,\n\t\t\t\"callback\": \"https://yourSMSurl\"\n\t\t}\n\t]\n}       \n```\n\n#### ä¸‰ã€æ‹·è´ServerStatus/statusåˆ°ä½ çš„ç½‘ç«™ç›®å½•        \nä¾‹å¦‚ï¼š\n```\nsudo cp -r ServerStatus/web/* /home/wwwroot/default\n```\n\n#### å››ã€è¿è¡ŒæœåŠ¡ç«¯ï¼š             \nweb-dirå‚æ•°ä¸ºä¸Šä¸€æ­¥è®¾ç½®çš„ç½‘ç«™æ ¹ç›®å½•ï¼ŒåŠ¡å¿…ä¿®æ”¹æˆè‡ªå·±ç½‘ç«™çš„è·¯å¾„   \n```\n./sergate --config=config.json --web-dir=/home/wwwroot/default   \n```\n\n**ã€å®¢æˆ·ç«¯é…ç½®ã€‘**    \n\nå®¢æˆ·ç«¯æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œclient-linuxä¸ºæ™®é€šlinuxï¼Œclient-psutilä¸ºè·¨å¹³å°ç‰ˆï¼Œæ™®é€šç‰ˆä¸æˆåŠŸï¼Œæ¢æˆè·¨å¹³å°ç‰ˆå³å¯ã€‚        \n\n#### ä¸€ã€client-linuxç‰ˆé…ç½®ï¼š       \n1ã€vim client-linux.py, ä¿®æ”¹SERVERåœ°å€ï¼Œusernameå¸å·ï¼Œ passwordå¯†ç         \n2ã€python3 client-linux.py è¿è¡Œå³å¯ã€‚      \n\n#### äºŒã€client-psutilç‰ˆé…ç½®:                \n1ã€å®‰è£…psutilè·¨å¹³å°ä¾èµ–åº“       \n```\n`Debian/Ubuntu`: apt -y install python3-pip && pip3 install psutil    \n`Centos/Redhat`: yum -y install python3-pip gcc python3-devel && pip3 install psutil      \n`Windows`: https://pypi.org/project/psutil/    \n```\n2ã€vim client-psutil.py, ä¿®æ”¹SERVERåœ°å€ï¼Œusernameå¸å·ï¼Œ passwordå¯†ç        \n3ã€python3 client-psutil.py è¿è¡Œå³å¯ã€‚    \n\næœåŠ¡å™¨å’Œå®¢æˆ·ç«¯è‡ªè¡ŒåŠ å…¥å¼€æœºå¯åŠ¨ï¼Œæˆ–è¿›ç¨‹å®ˆæŠ¤ï¼Œæˆ–åå°æ–¹å¼è¿è¡Œã€‚ ä¾‹å¦‚ï¼š nohup python3 client-linux.py &    \n\n`extra scene (run web/ssview.py)`\n![Shell View](https://dl.cpp.la/Archive/serverstatus-shell.png?version=2023)\n\n\n# Make Better        \n\n* BotoXï¼šhttps://github.com/BotoX/ServerStatus\n* mojeda: https://github.com/mojeda \n* mojeda's ServerStatus: https://github.com/mojeda/ServerStatus\n* BlueVM's project: http://www.lowendtalk.com/discussion/comment/169690#Comment_169690\n\n# Jetbrains    \n\n<a href=\"https://www.jetbrains.com/?from=ServerStatus\"><img src=\"https://resources.jetbrains.com/storage/products/company/brand/logos/jb_square.png\" width=\"100px\"></a>\n"
        },
        {
          "name": "clients",
          "type": "tree",
          "content": null
        },
        {
          "name": "docker-compose.yml",
          "type": "blob",
          "size": 0.6787109375,
          "content": "version: \"3\"\nservices:\n  serverstatus:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    image: serverstatus_server\n    healthcheck:\n      test: curl --fail http://localhost:80 || bash -c 'kill -s 15 -1 && (sleep 10; kill -s 9 -1)'\n      interval: 30s\n      timeout: 10s\n      retries: 5\n    container_name: serverstatus\n    restart: unless-stopped\n    networks:\n      serverstatus-network:\n        ipv4_address: 172.23.0.2\n    volumes:\n      - ./server/config.json:/ServerStatus/server/config.json \n      - ./web/json:/usr/share/nginx/html/json\n    ports:\n      - 35601:35601\n      - 8080:80\n\nnetworks:\n  serverstatus-network:\n    ipam:\n      config:\n        - subnet: 172.23.0.0/24\n"
        },
        {
          "name": "plugin",
          "type": "tree",
          "content": null
        },
        {
          "name": "server",
          "type": "tree",
          "content": null
        },
        {
          "name": "service",
          "type": "tree",
          "content": null
        },
        {
          "name": "status.sh",
          "type": "blob",
          "size": 40.783203125,
          "content": "#!/usr/bin/env bash\nPATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin\nexport PATH\n\nsh_ver=\"1.0.0\"\n\nfilepath=$(\n  cd \"$(dirname \"$0\")\" || exit\n  pwd\n)\nfile_1=$(echo -e \"${filepath}\" | awk -F \"$0\" '{print $1}')\nfile=\"/usr/local/ServerStatus\"\nweb_file=\"/usr/local/ServerStatus/web\"\nserver_file=\"/usr/local/ServerStatus/server\"\nserver_conf=\"/usr/local/ServerStatus/server/config.json\"\nserver_conf_1=\"/usr/local/ServerStatus/server/config.conf\"\nplugin_file=\"/usr/local/ServerStatus/plugin\"\nclient_file=\"/usr/local/ServerStatus/clients\"\nservice=\"/usr/lib/systemd/system\"\njq_file=\"${file}/jq\"\n[[ ! -e ${jq_file} ]] && jq_file=\"/usr/bin/jq\"\n\ngithub_prefix=\"https://raw.githubusercontent.com/cppla/ServerStatus/master\"\n\nNAME=\"ServerStatus\"\nGreen_font_prefix=\"\\033[32m\" && Red_font_prefix=\"\\033[31m\" && Red_background_prefix=\"\\033[41;37m\" && Font_color_suffix=\"\\033[0m\"\nInfo=\"${Green_font_prefix}[ä¿¡æ¯]${Font_color_suffix}\"\nError=\"${Red_font_prefix}[é”™è¯¯]${Font_color_suffix}\"\nTip=\"${Green_font_prefix}[æ³¨æ„]${Font_color_suffix}\"\n\n#æ£€æŸ¥ç³»ç»Ÿ\ncheck_sys() {\n  if [[ -f /etc/redhat-release ]]; then\n    release=\"centos\"\n  elif grep -q -E -i \"debian|ubuntu\" /etc/issue; then\n    release=\"debian\"\n  elif grep -q -E -i \"centonetstat -tunlps|red hat|redhat\" /etc/issue; then\n    release=\"centos\"\n  elif grep -q -E -i \"Arch|Manjaro\" /etc/issue; then\n    release=\"archlinux\"\n  elif grep -q -E -i \"debian|ubuntu\" /proc/version; then\n    release=\"debian\"\n  elif grep -q -E -i \"centos|red hat|redhat\" /proc/version; then\n    release=\"centos\"\n  else\n    echo -e \"ServerStatus æš‚ä¸æ”¯æŒè¯¥Linuxå‘è¡Œç‰ˆ\"\n  fi\n  bit=$(uname -m)\n}\n\ncheck_installed_server_status() {\n  [[ ! -e \"${server_file}/sergate\" ]] && echo -e \"${Error} $NAME æœåŠ¡ç«¯æ²¡æœ‰å®‰è£…ï¼Œè¯·æ£€æŸ¥ !\" && exit 1\n}\n\ncheck_installed_client_status() {\n  [[ ! -e \"${client_file}/client-linux.py\" ]] && echo -e \"${Error} $NAME å®¢æˆ·ç«¯æ²¡æœ‰å®‰è£…ï¼Œè¯·æ£€æŸ¥ !\" && exit 1\n}\n\nDownload_Server_Status_server() {\n  cd \"/tmp\" || exit 1\n  wget -N --no-check-certificate https://github.com/cppla/ServerStatus/archive/refs/heads/master.zip\n    [[ ! -e \"master.zip\" ]] && echo -e \"${Error} ServerStatus æœåŠ¡ç«¯ä¸‹è½½å¤±è´¥ !\" && exit 1\n  unzip master.zip\n  rm -rf master.zip\n  [[ ! -d \"/tmp/ServerStatus-master\" ]] && echo -e \"${Error} ServerStatus æœåŠ¡ç«¯è§£å‹å¤±è´¥ !\" && exit 1\n  cd \"/tmp/ServerStatus-master/server\" || exit 1\n  make\n  [[ ! -e \"sergate\" ]] && echo -e \"${Error} ServerStatus æœåŠ¡ç«¯ç¼–è¯‘å¤±è´¥ !\" && cd \"${file_1}\" && rm -rf \"/tmp//ServerStatus-master\" && exit 1\n  cd \"${file_1}\" || exit 1\n  mkdir -p \"${server_file}\"\n  mv \"/tmp/ServerStatus-master/server\" \"${file}\"\n  mv \"/tmp/ServerStatus-master/web\" \"${file}\"\n  mv \"/tmp/ServerStatus-master/plugin\" \"${file}\"\n  rm -rf \"/tmp/ServerStatus-master\"\n  if [[ ! -e \"${server_file}/sergate\" ]]; then\n    echo -e \"${Error} ServerStatus æœåŠ¡ç«¯ç§»åŠ¨é‡å‘½åå¤±è´¥ !\"\n    [[ -e \"${server_file}/sergate1\" ]] && mv \"${server_file}/sergate1\" \"${server_file}/sergate\"\n    exit 1\n  else\n    [[ -e \"${server_file}/sergate1\" ]] && rm -rf \"${server_file}/sergate1\"\n  fi\n}\n\nDownload_Server_Status_client() {\nmkdir -p \"${client_file}\"\nwget -N --no-check-certificate \"${github_prefix}/clients/client-linux.py\"  -P \"${client_file}\"\n}\n\nDownload_Server_Status_Service() {\n  mode=$1\n  [[ -z ${mode} ]] && mode=\"server\"\n  local service_note=\"æœåŠ¡ç«¯\"\n  [[ ${mode} == \"client\" ]] && service_note=\"å®¢æˆ·ç«¯\"\n    wget --no-check-certificate \"${github_prefix}/service/status-${mode}.service\" -O \"${service}/status-${mode}.service\" ||\n      {\n        echo -e \"${Error} $NAME ${service_note}æœåŠ¡ç®¡ç†è„šæœ¬ä¸‹è½½å¤±è´¥ !\"\n        exit 1\n      }\n    systemctl enable \"status-${mode}.service\"\n  echo -e \"${Info} $NAME ${service_note}æœåŠ¡ç®¡ç†è„šæœ¬ä¸‹è½½å®Œæˆ !\"\n}\n\nService_Server_Status_server() {\n  Download_Server_Status_Service \"server\"\n}\n\nService_Server_Status_client() {\n  Download_Server_Status_Service \"client\"\n}\n\nInstallation_dependency() {\n  mode=$1\n  if [[ ${release} == \"centos\" ]]; then\n    yum makecache\n    yum -y install unzip\n    yum -y install python3 >/dev/null 2>&1 || yum -y install python\n    [[ ${mode} == \"server\" ]] && yum -y groupinstall \"Development Tools\"\n  elif [[ ${release} == \"debian\" ]]; then\n    apt -y update\n    apt -y install unzip\n    apt -y install python3 >/dev/null 2>&1 || apt -y install python\n    [[ ${mode} == \"server\" ]] && apt -y install build-essential\n  elif [[ ${release} == \"archlinux\" ]]; then\n    pacman -Sy python python-pip unzip --noconfirm\n    [[ ${mode} == \"server\" ]] && pacman -Sy base-devel --noconfirm\n  fi\n  [[ ! -e /usr/bin/python ]] && ln -s /usr/bin/python3 /usr/bin/python\n}\n\nWrite_server_config() {\n  cat >${server_conf} <<-EOF\n{\n    \"servers\": [\n        {\n            \"username\": \"s01\",\n            \"password\": \"password\",\n            \"name\": \"vps-1\",\n            \"type\": \"KVM\",\n            \"host\": \"azure\",\n            \"location\": \"Hong Kong\",\n            \"monthstart\": 1\n        }\n    ]\n}     \nEOF\n}\n\nWrite_server_config_conf() {\n  cat >${server_conf_1} <<-EOF\nPORT = ${server_port_s}\nEOF\n}\n\nRead_config_client() {\n  client_text=\"$(sed 's/\\\"//g;s/,//g;s/ //g' \"${client_file}/client-linux.py\") \"\n  client_server=\"$(echo -e \"${client_text}\" | grep \"SERVER=\" | awk -F \"=\" '{print $2;exit}')\"\n  client_port=\"$(echo -e \"${client_text}\" | grep \"PORT=\" | awk -F \"=\" '{print $2;exit}')\"\n  client_user=\"$(echo -e \"${client_text}\" | grep \"USER=\" | awk -F \"=\" '{print $2;exit}')\"\n  client_password=\"$(echo -e \"${client_text}\" | grep \"PASSWORD=\" | awk -F \"=\" '{print $2;exit}')\"\n}\n\nRead_config_server() {\n  if [[ ! -e \"${server_conf_1}\" ]]; then\n    server_port_s=\"35601\"\n    Write_server_config_conf\n    server_port=\"35601\"\n  else\n    server_port=\"$(grep \"PORT = \" ${server_conf_1} | awk '{print $3}')\"\n  fi\n}\n\nSet_server() {\n  mode=$1\n  [[ -z ${mode} ]] && mode=\"server\"\n  if [[ ${mode} == \"server\" ]]; then\n    echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯ä¸­ç½‘ç«™è¦è®¾ç½®çš„ åŸŸå[server]\né»˜è®¤ä¸ºæœ¬æœºIPä¸ºåŸŸåï¼Œä¾‹å¦‚è¾“å…¥: toyoo.pw ï¼Œå¦‚æœè¦ä½¿ç”¨æœ¬æœºIPï¼Œè¯·ç•™ç©ºç›´æ¥å›è½¦\"\n    read -erp \"(é»˜è®¤: æœ¬æœºIP):\" server_s\n    [[ -z \"$server_s\" ]] && server_s=\"\"\n  else\n    echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯çš„ IP/åŸŸå[server]ï¼Œè¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„åŸŸåä½¿ç”¨äº†CDNï¼Œè¯·ç›´æ¥å¡«å†™IP\"\n    read -erp \"(é»˜è®¤: 127.0.0.1):\" server_s\n    [[ -z \"$server_s\" ]] && server_s=\"127.0.0.1\"\n  fi\n\n  echo && echo \"\t================================================\"\n  echo -e \"\tIP/åŸŸå[server]: ${Red_background_prefix} ${server_s} ${Font_color_suffix}\"\n  echo \"\t================================================\" && echo\n}\n\nSet_server_http_port() {\n  while true; do\n    echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯ä¸­ç½‘ç«™è¦è®¾ç½®çš„ åŸŸå/IPçš„ç«¯å£[1-65535]ï¼ˆå¦‚æœæ˜¯åŸŸåçš„è¯ï¼Œä¸€èˆ¬ç”¨ 80 ç«¯å£ï¼‰\"\n    read -erp \"(é»˜è®¤: 8888):\" server_http_port_s\n    [[ -z \"$server_http_port_s\" ]] && server_http_port_s=\"8888\"\n    if [[ \"$server_http_port_s\" =~ ^[0-9]*$ ]]; then\n      if [[ ${server_http_port_s} -ge 1 ]] && [[ ${server_http_port_s} -le 65535 ]]; then\n        echo && echo \"\t================================================\"\n        echo -e \"\tç«¯å£: ${Red_background_prefix} ${server_http_port_s} ${Font_color_suffix}\"\n        echo \"\t================================================\" && echo\n        break\n      else\n        echo \"è¾“å…¥é”™è¯¯, è¯·è¾“å…¥æ­£ç¡®çš„ç«¯å£ã€‚\"\n      fi\n    else\n      echo \"è¾“å…¥é”™è¯¯, è¯·è¾“å…¥æ­£ç¡®çš„ç«¯å£ã€‚\"\n    fi\n  done\n}\n\nSet_server_port() {\n  while true; do\n    echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯ç›‘å¬çš„ç«¯å£[1-65535]ï¼ˆç”¨äºæœåŠ¡ç«¯æ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯çš„ç«¯å£ï¼Œå®¢æˆ·ç«¯è¦å¡«å†™è¿™ä¸ªç«¯å£ï¼‰\"\n    read -erp \"(é»˜è®¤: 35601):\" server_port_s\n    [[ -z \"$server_port_s\" ]] && server_port_s=\"35601\"\n    if [[ \"$server_port_s\" =~ ^[0-9]*$ ]]; then\n      if [[ ${server_port_s} -ge 1 ]] && [[ ${server_port_s} -le 65535 ]]; then\n        echo && echo \"\t================================================\"\n        echo -e \"\tç«¯å£: ${Red_background_prefix} ${server_port_s} ${Font_color_suffix}\"\n        echo \"\t================================================\" && echo\n        break\n      else\n        echo \"è¾“å…¥é”™è¯¯, è¯·è¾“å…¥æ­£ç¡®çš„ç«¯å£ã€‚\"\n      fi\n    else\n      echo \"è¾“å…¥é”™è¯¯, è¯·è¾“å…¥æ­£ç¡®çš„ç«¯å£ã€‚\"\n    fi\n  done\n}\n\nSet_username() {\n  mode=$1\n  [[ -z ${mode} ]] && mode=\"server\"\n  if [[ ${mode} == \"server\" ]]; then\n    echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯è¦è®¾ç½®çš„ç”¨æˆ·å[username]ï¼ˆå­—æ¯/æ•°å­—ï¼Œä¸å¯ä¸å…¶ä»–è´¦å·é‡å¤ï¼‰\"\n  else\n    echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯ä¸­å¯¹åº”é…ç½®çš„ç”¨æˆ·å[username]ï¼ˆå­—æ¯/æ•°å­—ï¼Œä¸å¯ä¸å…¶ä»–è´¦å·é‡å¤ï¼‰\"\n  fi\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" username_s\n  [[ -z \"$username_s\" ]] && echo \"å·²å–æ¶ˆ...\" && exit 0\n  echo && echo \"\t================================================\"\n  echo -e \"\tè´¦å·[username]: ${Red_background_prefix} ${username_s} ${Font_color_suffix}\"\n  echo \"\t================================================\" && echo\n}\n\nSet_password() {\n  mode=$1\n  [[ -z ${mode} ]] && mode=\"server\"\n  if [[ ${mode} == \"server\" ]]; then\n    echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯è¦è®¾ç½®çš„å¯†ç [password]ï¼ˆå­—æ¯/æ•°å­—ï¼Œå¯é‡å¤ï¼‰\"\n  else\n    echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯ä¸­å¯¹åº”é…ç½®çš„å¯†ç [password]ï¼ˆå­—æ¯/æ•°å­—ï¼‰\"\n  fi\n  read -erp \"(é»˜è®¤: serverstatus):\" password_s\n  [[ -z \"$password_s\" ]] && password_s=\"serverstatus\"\n  echo && echo \"\t================================================\"\n  echo -e \"\tå¯†ç [password]: ${Red_background_prefix} ${password_s} ${Font_color_suffix}\"\n  echo \"\t================================================\" && echo\n}\n\nSet_name() {\n  echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯è¦è®¾ç½®çš„èŠ‚ç‚¹åç§°[name]ï¼ˆæ”¯æŒä¸­æ–‡ï¼Œå‰ææ˜¯ä½ çš„ç³»ç»Ÿå’ŒSSHå·¥å…·æ”¯æŒä¸­æ–‡è¾“å…¥ï¼Œä»…ä»…æ˜¯ä¸ªåå­—ï¼‰\"\n  read -erp \"(é»˜è®¤: Server 01):\" name_s\n  [[ -z \"$name_s\" ]] && name_s=\"Server 01\"\n  echo && echo \"\t================================================\"\n  echo -e \"\tèŠ‚ç‚¹åç§°[name]: ${Red_background_prefix} ${name_s} ${Font_color_suffix}\"\n  echo \"\t================================================\" && echo\n}\n\nSet_type() {\n  echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯è¦è®¾ç½®çš„èŠ‚ç‚¹è™šæ‹ŸåŒ–ç±»å‹[type]ï¼ˆä¾‹å¦‚ OpenVZ / KVMï¼‰\"\n  read -erp \"(é»˜è®¤: KVM):\" type_s\n  [[ -z \"$type_s\" ]] && type_s=\"KVM\"\n  echo && echo \"\t================================================\"\n  echo -e \"\tè™šæ‹ŸåŒ–ç±»å‹[type]: ${Red_background_prefix} ${type_s} ${Font_color_suffix}\"\n  echo \"\t================================================\" && echo\n}\n\nSet_location() {\n  echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯è¦è®¾ç½®çš„èŠ‚ç‚¹ä½ç½®[location]ï¼ˆæ”¯æŒä¸­æ–‡ï¼Œå‰ææ˜¯ä½ çš„ç³»ç»Ÿå’ŒSSHå·¥å…·æ”¯æŒä¸­æ–‡è¾“å…¥ï¼‰\"\n  read -erp \"(é»˜è®¤: Hong Kong):\" location_s\n  [[ -z \"$location_s\" ]] && location_s=\"Hong Kong\"\n  echo && echo \"\t================================================\"\n  echo -e \"\tèŠ‚ç‚¹ä½ç½®[location]: ${Red_background_prefix} ${location_s} ${Font_color_suffix}\"\n  echo \"\t================================================\" && echo\n}\n\nSet_monthstart() {\n  echo -e \"è¯·è¾“å…¥ $NAME æœåŠ¡ç«¯è¦è®¾ç½®çš„èŠ‚ç‚¹æœˆé‡ç½®æµé‡æ—¥[monthstart]ï¼ˆæ¯æœˆæµé‡å½’é›¶çš„æ—¥æœŸï¼ˆ1~28ï¼‰ï¼Œé»˜è®¤ä¸º1ï¼ˆå³æ¯æœˆ1æ—¥ï¼‰ï¼‰\"\n  read -erp \"(é»˜è®¤: 1):\" monthstart_s\n  [[ -z \"$monthstart_s\" ]] && monthstart_s=\"1\"\n  echo && echo \"\t================================================\"\n  echo -e \"\tæœˆæµé‡é‡ç½®æ—¥[monthstart]: ${Red_background_prefix} ${monthstart_s} ${Font_color_suffix}\"\n  echo \"\t================================================\" && echo\n}\n\nSet_config_server() {\n  Set_username \"server\"\n  Set_password \"server\"\n  Set_name\n  Set_type\n  Set_location\n  Set_monthstart\n}\n\nSet_config_client() {\n  Set_server \"client\"\n  Set_server_port\n  Set_username \"client\"\n  Set_password \"client\"\n}\n\nSet_ServerStatus_server() {\n  check_installed_server_status\n  echo && echo -e \" ä½ è¦åšä»€ä¹ˆï¼Ÿ\n\n ${Green_font_prefix} 1.${Font_color_suffix} æ·»åŠ  èŠ‚ç‚¹é…ç½®\n ${Green_font_prefix} 2.${Font_color_suffix} åˆ é™¤ èŠ‚ç‚¹é…ç½®\nâ€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix} 3.${Font_color_suffix} ä¿®æ”¹ èŠ‚ç‚¹é…ç½® - èŠ‚ç‚¹ç”¨æˆ·å\n ${Green_font_prefix} 4.${Font_color_suffix} ä¿®æ”¹ èŠ‚ç‚¹é…ç½® - èŠ‚ç‚¹å¯†ç \n ${Green_font_prefix} 5.${Font_color_suffix} ä¿®æ”¹ èŠ‚ç‚¹é…ç½® - èŠ‚ç‚¹åç§°\n ${Green_font_prefix} 6.${Font_color_suffix} ä¿®æ”¹ èŠ‚ç‚¹é…ç½® - èŠ‚ç‚¹è™šæ‹ŸåŒ–\n ${Green_font_prefix} 7.${Font_color_suffix} ä¿®æ”¹ èŠ‚ç‚¹é…ç½® - èŠ‚ç‚¹ä½ç½®\n ${Green_font_prefix} 8.${Font_color_suffix} ä¿®æ”¹ èŠ‚ç‚¹é…ç½® - æœˆæµé‡é‡ç½®æ—¥\n ${Green_font_prefix} 9.${Font_color_suffix} ä¿®æ”¹ èŠ‚ç‚¹é…ç½® - å…¨éƒ¨å‚æ•°\nâ€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix}10.${Font_color_suffix} ä¿®æ”¹ æœåŠ¡ç«¯ç›‘å¬ç«¯å£\" && echo\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" server_num\n  [[ -z \"${server_num}\" ]] && echo \"å·²å–æ¶ˆ...\" && exit 1\n  if [[ ${server_num} == \"1\" ]]; then\n    Add_ServerStatus_server\n  elif [[ ${server_num} == \"2\" ]]; then\n    Del_ServerStatus_server\n  elif [[ ${server_num} == \"3\" ]]; then\n    Modify_ServerStatus_server_username\n  elif [[ ${server_num} == \"4\" ]]; then\n    Modify_ServerStatus_server_password\n  elif [[ ${server_num} == \"5\" ]]; then\n    Modify_ServerStatus_server_name\n  elif [[ ${server_num} == \"6\" ]]; then\n    Modify_ServerStatus_server_type\n  elif [[ ${server_num} == \"7\" ]]; then\n    Modify_ServerStatus_server_location\n  elif [[ ${server_num} == \"8\" ]]; then\n    Modify_ServerStatus_server_monthstart  \n  elif [[ ${server_num} == \"9\" ]]; then\n    Modify_ServerStatus_server_all\n  elif [[ ${server_num} == \"10\" ]]; then\n    Read_config_server\n    Set_server_port\n    Write_server_config_conf\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—[1-10]\" && exit 1\n  fi\n  Restart_ServerStatus_server\n}\n\nList_ServerStatus_server() {\n  conf_text=$(${jq_file} '.servers' ${server_conf} | ${jq_file} \".[]|.username\" | sed 's/\\\"//g')\n  conf_text_total=$(echo -e \"${conf_text}\" | wc -l)\n  [[ ${conf_text_total} == \"0\" ]] && echo -e \"${Error} æ²¡æœ‰å‘ç° ä¸€ä¸ªèŠ‚ç‚¹é…ç½®ï¼Œè¯·æ£€æŸ¥ !\" && exit 1\n  conf_text_total_a=$((conf_text_total - 1))\n  conf_list_all=\"\"\n  for ((integer = 0; integer <= conf_text_total_a; integer++)); do\n    now_text=$(${jq_file} '.servers' ${server_conf} | ${jq_file} \".[${integer}]\" | sed 's/\\\"//g;s/,$//g' | sed '$d;1d')\n    now_text_username=$(echo -e \"${now_text}\" | grep \"username\" | awk -F \": \" '{print $2}')\n    now_text_password=$(echo -e \"${now_text}\" | grep \"password\" | awk -F \": \" '{print $2}')\n    now_text_name=$(echo -e \"${now_text}\" | grep \"name\" | grep -v \"username\" | awk -F \": \" '{print $2}')\n    now_text_type=$(echo -e \"${now_text}\" | grep \"type\" | awk -F \": \" '{print $2}')\n    now_text_location=$(echo -e \"${now_text}\" | grep \"location\" | awk -F \": \" '{print $2}')\n    now_text_monthstart=$(echo -e \"${now_text}\" | grep \"monthstart\" | awk -F \": \" '{print $2}')\n    if [[ ${now_text_disabled} == \"false\" ]]; then\n      now_text_disabled_status=\"${Green_font_prefix}å¯ç”¨${Font_color_suffix}\"\n    else\n      now_text_disabled_status=\"${Red_font_prefix}ç¦ç”¨${Font_color_suffix}\"\n    fi\n    conf_list_all=${conf_list_all}\"ç”¨æˆ·å: ${Green_font_prefix}${now_text_username}${Font_color_suffix} å¯†ç : ${Green_font_prefix}${now_text_password}${Font_color_suffix} èŠ‚ç‚¹å: ${Green_font_prefix}${now_text_name}${Font_color_suffix} è™šæ‹ŸåŒ–: ${Green_font_prefix}${now_text_type}${Font_color_suffix} ä½ç½®: ${Green_font_prefix}${now_text_location}${Font_color_suffix} æœˆæµé‡é‡ç½®æ—¥: ${Green_font_prefix}${now_text_monthstart}${Font_color_suffix}\\n\"\n  done\n  echo && echo -e \"èŠ‚ç‚¹æ€»æ•° ${Green_font_prefix}${conf_text_total}${Font_color_suffix}\"\n  echo -e \"${conf_list_all}\"\n}\n\nAdd_ServerStatus_server() {\n  Set_config_server\n  Set_username_ch=$(grep '\"username\": \"'\"${username_s}\"'\"' ${server_conf})\n  [[ -n \"${Set_username_ch}\" ]] && echo -e \"${Error} ç”¨æˆ·åå·²è¢«ä½¿ç”¨ !\" && exit 1\n  sed -i '3i\\        },' ${server_conf}\n  sed -i '3i\\            \"monthstart\": '\"${monthstart_s}\"'' ${server_conf}\n  sed -i '3i\\            \"location\": \"'\"${location_s}\"'\",' ${server_conf}\n  sed -i '3i\\            \"host\": \"'\"None\"'\",' ${server_conf}\n  sed -i '3i\\            \"type\": \"'\"${type_s}\"'\",' ${server_conf}\n  sed -i '3i\\            \"name\": \"'\"${name_s}\"'\",' ${server_conf}\n  sed -i '3i\\            \"password\": \"'\"${password_s}\"'\",' ${server_conf}\n  sed -i '3i\\            \"username\": \"'\"${username_s}\"'\",' ${server_conf}\n  sed -i '3i\\        {' ${server_conf}\n  echo -e \"${Info} æ·»åŠ èŠ‚ç‚¹æˆåŠŸ ${Green_font_prefix}[ èŠ‚ç‚¹åç§°: ${name_s}, èŠ‚ç‚¹ç”¨æˆ·å: ${username_s}, èŠ‚ç‚¹å¯†ç : ${password_s} ]${Font_color_suffix} !\"\n}\n\nDel_ServerStatus_server() {\n  List_ServerStatus_server\n  [[ \"${conf_text_total}\" == \"1\" ]] && echo -e \"${Error} èŠ‚ç‚¹é…ç½®ä»…å‰© 1ä¸ªï¼Œä¸èƒ½åˆ é™¤ !\" && exit 1\n  echo -e \"è¯·è¾“å…¥è¦åˆ é™¤çš„èŠ‚ç‚¹ç”¨æˆ·å\"\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" del_server_username\n  [[ -z \"${del_server_username}\" ]] && echo -e \"å·²å–æ¶ˆ...\" && exit 1\n  del_username=$(cat -n ${server_conf} | grep '\"username\": \"'\"${del_server_username}\"'\"' | awk '{print $1}')\n  if [[ -n ${del_username} ]]; then\n    del_username_min=$((del_username - 1))\n    del_username_max=$((del_username + 7))\n    del_username_max_text=$(sed -n \"${del_username_max}p\" ${server_conf})\n    del_username_max_text_last=${del_username_max_text:((${#del_username_max_text} - 1))}\n    if [[ ${del_username_max_text_last} != \",\" ]]; then\n      del_list_num=$((del_username_min - 1))\n      sed -i \"${del_list_num}s/,$//g\" ${server_conf}\n    fi\n    sed -i \"${del_username_min},${del_username_max}d\" ${server_conf}\n    echo -e \"${Info} èŠ‚ç‚¹åˆ é™¤æˆåŠŸ ${Green_font_prefix}[ èŠ‚ç‚¹ç”¨æˆ·å: ${del_server_username} ]${Font_color_suffix} \"\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„èŠ‚ç‚¹ç”¨æˆ·å !\" && exit 1\n  fi\n}\n\nModify_ServerStatus_server_username() {\n  List_ServerStatus_server\n  echo -e \"è¯·è¾“å…¥è¦ä¿®æ”¹çš„èŠ‚ç‚¹ç”¨æˆ·å\"\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" manually_username\n  [[ -z \"${manually_username}\" ]] && echo -e \"å·²å–æ¶ˆ...\" && exit 1\n  Set_username_num=$(cat -n ${server_conf} | grep '\"username\": \"'\"${manually_username}\"'\"' | awk '{print $1}')\n  if [[ -n ${Set_username_num} ]]; then\n    Set_username\n    Set_username_ch=$(grep '\"username\": \"'\"${username_s}\"'\"' ${server_conf})\n    [[ -n \"${Set_username_ch}\" ]] && echo -e \"${Error} ç”¨æˆ·åå·²è¢«ä½¿ç”¨ !\" && exit 1\n    sed -i \"${Set_username_num}\"'s/\"username\": \"'\"${manually_username}\"'\"/\"username\": \"'\"${username_s}\"'\"/g' ${server_conf}\n    echo -e \"${Info} ä¿®æ”¹æˆåŠŸ [ åŸèŠ‚ç‚¹ç”¨æˆ·å: ${manually_username}, æ–°èŠ‚ç‚¹ç”¨æˆ·å: ${username_s} ]\"\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„èŠ‚ç‚¹ç”¨æˆ·å !\" && exit 1\n  fi\n}\n\nModify_ServerStatus_server_password() {\n  List_ServerStatus_server\n  echo -e \"è¯·è¾“å…¥è¦ä¿®æ”¹çš„èŠ‚ç‚¹ç”¨æˆ·å\"\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" manually_username\n  [[ -z \"${manually_username}\" ]] && echo -e \"å·²å–æ¶ˆ...\" && exit 1\n  Set_username_num=$(cat -n ${server_conf} | grep '\"username\": \"'\"${manually_username}\"'\"' | awk '{print $1}')\n  if [[ -n ${Set_username_num} ]]; then\n    Set_password\n    Set_password_num_a=$((Set_username_num + 1))\n    Set_password_num_text=$(sed -n \"${Set_password_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_password_num_a}\"'s/\"password\": \"'\"${Set_password_num_text}\"'\"/\"password\": \"'\"${password_s}\"'\"/g' ${server_conf}\n    echo -e \"${Info} ä¿®æ”¹æˆåŠŸ [ åŸèŠ‚ç‚¹å¯†ç : ${Set_password_num_text}, æ–°èŠ‚ç‚¹å¯†ç : ${password_s} ]\"\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„èŠ‚ç‚¹ç”¨æˆ·å !\" && exit 1\n  fi\n}\n\nModify_ServerStatus_server_name() {\n  List_ServerStatus_server\n  echo -e \"è¯·è¾“å…¥è¦ä¿®æ”¹çš„èŠ‚ç‚¹ç”¨æˆ·å\"\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" manually_username\n  [[ -z \"${manually_username}\" ]] && echo -e \"å·²å–æ¶ˆ...\" && exit 1\n  Set_username_num=$(cat -n ${server_conf} | grep '\"username\": \"'\"${manually_username}\"'\"' | awk '{print $1}')\n  if [[ -n ${Set_username_num} ]]; then\n    Set_name\n    Set_name_num_a=$((Set_username_num + 2))\n    Set_name_num_a_text=$(sed -n \"${Set_name_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_name_num_a}\"'s/\"name\": \"'\"${Set_name_num_a_text}\"'\"/\"name\": \"'\"${name_s}\"'\"/g' ${server_conf}\n    echo -e \"${Info} ä¿®æ”¹æˆåŠŸ [ åŸèŠ‚ç‚¹åç§°: ${Set_name_num_a_text}, æ–°èŠ‚ç‚¹åç§°: ${name_s} ]\"\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„èŠ‚ç‚¹ç”¨æˆ·å !\" && exit 1\n  fi\n}\n\nModify_ServerStatus_server_type() {\n  List_ServerStatus_server\n  echo -e \"è¯·è¾“å…¥è¦ä¿®æ”¹çš„èŠ‚ç‚¹ç”¨æˆ·å\"\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" manually_username\n  [[ -z \"${manually_username}\" ]] && echo -e \"å·²å–æ¶ˆ...\" && exit 1\n  Set_username_num=$(cat -n ${server_conf} | grep '\"username\": \"'\"${manually_username}\"'\"' | awk '{print $1}')\n  if [[ -n ${Set_username_num} ]]; then\n    Set_type\n    Set_type_num_a=$((Set_username_num + 3))\n    Set_type_num_a_text=$(sed -n \"${Set_type_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_type_num_a}\"'s/\"type\": \"'\"${Set_type_num_a_text}\"'\"/\"type\": \"'\"${type_s}\"'\"/g' ${server_conf}\n    echo -e \"${Info} ä¿®æ”¹æˆåŠŸ [ åŸèŠ‚ç‚¹è™šæ‹ŸåŒ–: ${Set_type_num_a_text}, æ–°èŠ‚ç‚¹è™šæ‹ŸåŒ–: ${type_s} ]\"\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„èŠ‚ç‚¹ç”¨æˆ·å !\" && exit 1\n  fi\n}\n\nModify_ServerStatus_server_location() {\n  List_ServerStatus_server\n  echo -e \"è¯·è¾“å…¥è¦ä¿®æ”¹çš„èŠ‚ç‚¹ç”¨æˆ·å\"\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" manually_username\n  [[ -z \"${manually_username}\" ]] && echo -e \"å·²å–æ¶ˆ...\" && exit 1\n  Set_username_num=$(cat -n ${server_conf} | grep '\"username\": \"'\"${manually_username}\"'\"' | awk '{print $1}')\n  if [[ -n ${Set_username_num} ]]; then\n    Set_location\n    Set_location_num_a=$((Set_username_num + 5))\n    Set_location_num_a_text=$(sed -n \"${Set_location_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_location_num_a}\"'s/\"location\": \"'\"${Set_location_num_a_text}\"'\"/\"location\": \"'\"${location_s}\"'\"/g' ${server_conf}\n    echo -e \"${Info} ä¿®æ”¹æˆåŠŸ [ åŸèŠ‚ç‚¹ä½ç½®: ${Set_location_num_a_text}, æ–°èŠ‚ç‚¹ä½ç½®: ${location_s} ]\"\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„èŠ‚ç‚¹ç”¨æˆ·å !\" && exit 1\n  fi\n}\n\nModify_ServerStatus_server_monthstart() {\n  List_ServerStatus_server\n  echo -e \"è¯·è¾“å…¥è¦ä¿®æ”¹çš„èŠ‚ç‚¹ç”¨æˆ·å\"\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" manually_username\n  [[ -z \"${manually_username}\" ]] && echo -e \"å·²å–æ¶ˆ...\" && exit 1\n  Set_username_num=$(cat -n ${server_conf} | grep '\"username\": \"'\"${manually_username}\"'\"' | awk '{print $1}')\n  if [[ -n ${Set_username_num} ]]; then\n    Set_monthstart\n    Set_monthstart_num_a=$((Set_username_num + 6))\n    Set_monthstart_num_text=$(sed -n \"${Set_monthstart_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_monthstart_num_a}\"'s/\"monthstart\": '\"${Set_monthstart_num_text}\"'/\"monthstart\": '\"${monthstart_s}\"'/g' ${server_conf}\n    echo -e \"${Info} ä¿®æ”¹æˆåŠŸ [ åŸæœˆæµé‡é‡ç½®æ—¥: ${Set_monthstart_num_text}, æ–°æœˆæµé‡é‡ç½®æ—¥: ${monthstart_s} ]\"\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„èŠ‚ç‚¹ç”¨æˆ·å !\" && exit 1\n  fi\n}\n\nModify_ServerStatus_server_all() {\n  List_ServerStatus_server\n  echo -e \"è¯·è¾“å…¥è¦ä¿®æ”¹çš„èŠ‚ç‚¹ç”¨æˆ·å\"\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" manually_username\n  [[ -z \"${manually_username}\" ]] && echo -e \"å·²å–æ¶ˆ...\" && exit 1\n  Set_username_num=$(cat -n ${server_conf} | grep '\"username\": \"'\"${manually_username}\"'\"' | awk '{print $1}')\n  if [[ -n ${Set_username_num} ]]; then\n    Set_username\n    Set_password\n    Set_name\n    Set_type\n    Set_location\n    Set_monthstart\n    sed -i \"${Set_username_num}\"'s/\"username\": \"'\"${manually_username}\"'\"/\"username\": \"'\"${username_s}\"'\"/g' ${server_conf}\n    Set_password_num_a=$((Set_username_num + 1))\n    Set_password_num_text=$(sed -n \"${Set_password_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_password_num_a}\"'s/\"password\": \"'\"${Set_password_num_text}\"'\"/\"password\": \"'\"${password_s}\"'\"/g' ${server_conf}\n    Set_name_num_a=$((Set_username_num + 2))\n    Set_name_num_a_text=$(sed -n \"${Set_name_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_name_num_a}\"'s/\"name\": \"'\"${Set_name_num_a_text}\"'\"/\"name\": \"'\"${name_s}\"'\"/g' ${server_conf}\n    Set_type_num_a=$((Set_username_num + 3))\n    Set_type_num_a_text=$(sed -n \"${Set_type_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_type_num_a}\"'s/\"type\": \"'\"${Set_type_num_a_text}\"'\"/\"type\": \"'\"${type_s}\"'\"/g' ${server_conf}\n    Set_location_num_a=$((Set_username_num + 5))\n    Set_location_num_a_text=$(sed -n \"${Set_location_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_location_num_a}\"'s/\"location\": \"'\"${Set_location_num_a_text}\"'\"/\"location\": \"'\"${location_s}\"'\"/g' ${server_conf}\n    Set_monthstart_num_a=$((Set_username_num + 6))\n    Set_monthstart_num_a_text=$(sed -n \"${Set_monthstart_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    sed -i \"${Set_monthstart_num_a}\"'s/\"monthstart\": '\"${Set_monthstart_num_a_text}\"'/\"monthstart\": '\"${monthstart_s}\"'/g' ${server_conf}\n    echo -e \"${Info} ä¿®æ”¹æˆåŠŸã€‚\"\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„èŠ‚ç‚¹ç”¨æˆ·å !\" && exit 1\n  fi\n}\n\nModify_ServerStatus_server_disabled() {\n  List_ServerStatus_server\n  echo -e \"è¯·è¾“å…¥è¦ä¿®æ”¹çš„èŠ‚ç‚¹ç”¨æˆ·å\"\n  read -erp \"(é»˜è®¤: å–æ¶ˆ):\" manually_username\n  [[ -z \"${manually_username}\" ]] && echo -e \"å·²å–æ¶ˆ...\" && exit 1\n  Set_username_num=$(cat -n ${server_conf} | grep '\"username\": \"'\"${manually_username}\"'\"' | awk '{print $1}')\n  if [[ -n ${Set_username_num} ]]; then\n    Set_disabled_num_a=$((Set_username_num + 6))\n    Set_disabled_num_a_text=$(sed -n \"${Set_disabled_num_a}p\" ${server_conf} | sed 's/\\\"//g;s/,$//g' | awk -F \": \" '{print $2}')\n    if [[ ${Set_disabled_num_a_text} == \"false\" ]]; then\n      disabled_s=\"true\"\n    else\n      disabled_s=\"false\"\n    fi\n    sed -i \"${Set_disabled_num_a}\"'s/\"disabled\": '\"${Set_disabled_num_a_text}\"'/\"disabled\": '\"${disabled_s}\"'/g' ${server_conf}\n    echo -e \"${Info} ä¿®æ”¹æˆåŠŸ [ åŸç¦ç”¨çŠ¶æ€: ${Set_disabled_num_a_text}, æ–°ç¦ç”¨çŠ¶æ€: ${disabled_s} ]\"\n  else\n    echo -e \"${Error} è¯·è¾“å…¥æ­£ç¡®çš„èŠ‚ç‚¹ç”¨æˆ·å !\" && exit 1\n  fi\n}\n\nSet_ServerStatus_client() {\n  check_installed_client_status\n  Set_config_client\n  Read_config_client\n  Modify_config_client\n  Restart_ServerStatus_client\n}\n\nModify_config_client() {\n  sed -i '0,/SERVER = \"'\"${client_server}\"'\"/s//SERVER = \"'\"${server_s}\"'\"/' \"${client_file}/client-linux.py\"\n  sed -i '0,/PORT = ${client_port}/s//PORT = ${server_port_s}/' \"${client_file}/client-linux.py\"\n  sed -i '0,/USER = \"'\"${client_user}\"'\"/s//USER = \"'\"${username_s}\"'\"/' \"${client_file}/client-linux.py\"\n  sed -i '0,/PASSWORD = \"'\"${client_password}\"'\"/s//PASSWORD = \"'\"${password_s}\"'\"/' \"${client_file}/client-linux.py\"\n}\n\nInstall_jq() {\n  [[ ${mirror_num} == 2 ]] && {\n    github_link=\"https://hub.fastgit.org\"\n    raw_link=\"https://raw.fastgit.org\"\n  } || {\n    github_link=\"https://github.com\"\n    raw_link=\"https://raw.githubusercontent.com\"\n  }\n  if [[ ! -e ${jq_file} ]]; then\n    if [[ ${bit} == \"x86_64\" ]]; then\n      jq_file=\"${file}/jq\"\n      wget --no-check-certificate \"${github_link}/stedolan/jq/releases/download/jq-1.5/jq-linux64\" -O ${jq_file}\n    elif [[ ${bit} == \"i386\" ]]; then\n      jq_file=\"${file}/jq\"\n      wget --no-check-certificate \"${github_link}/stedolan/jq/releases/download/jq-1.5/jq-linux32\" -O ${jq_file}\n    else\n      # ARM fallback to package manager\n      [[ ${release} == \"archlinux\" ]] && pacman -Sy jq --noconfirm\n      [[ ${release} == \"centos\" ]] && yum -y install jq\n      [[ ${release} == \"debian\" ]] && apt -y install jq\n      jq_file=\"/usr/bin/jq\"\n    fi\n    [[ ! -e ${jq_file} ]] && echo -e \"${Error} JQè§£æå™¨ ä¸‹è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ !\" && exit 1\n    chmod +x ${jq_file}\n    echo -e \"${Info} JQè§£æå™¨ å®‰è£…å®Œæˆï¼Œç»§ç»­...\"\n  else\n    echo -e \"${Info} JQè§£æå™¨ å·²å®‰è£…ï¼Œç»§ç»­...\"\n  fi\n}\n\nInstall_caddy() {\n  echo\n  echo -e \"${Info} æ˜¯å¦ç”±è„šæœ¬è‡ªåŠ¨é…ç½®HTTPæœåŠ¡(æœåŠ¡ç«¯çš„åœ¨çº¿ç›‘æ§ç½‘ç«™)ï¼Œå¦‚æœé€‰æ‹© Nï¼Œåˆ™è¯·åœ¨å…¶ä»–HTTPæœåŠ¡ä¸­é…ç½®ç½‘ç«™æ ¹ç›®å½•ä¸ºï¼š${Green_font_prefix}${web_file}${Font_color_suffix} [Y/n]\"\n  read -erp \"(é»˜è®¤: Y è‡ªåŠ¨éƒ¨ç½²):\" caddy_yn\n  [[ -z \"$caddy_yn\" ]] && caddy_yn=\"y\"\n  if [[ \"${caddy_yn}\" == [Yy] ]]; then\n    caddy_file=\"/etc/caddy/Caddyfile\" # Where is the default Caddyfile specified in Archlinux?\n    [[ ! -e /usr/bin/caddy ]] && {\n      if [[ ${release} == \"debian\" ]]; then\n        apt install -y debian-keyring debian-archive-keyring apt-transport-https curl\n        curl -1sLf \"https://dl.cloudsmith.io/public/caddy/stable/gpg.key\" | tee /etc/apt/trusted.gpg.d/caddy-stable.asc\n        curl -1sLf \"https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt\" | tee /etc/apt/sources.list.d/caddy-stable.list\n        apt update && apt install caddy\n      elif [[ ${release} == \"centos\" ]]; then\n        yum install yum-plugin-copr -y\n        yum copr enable @caddy/caddy -y\n        yum install caddy -y\n      elif [[ ${release} == \"archlinux\" ]]; then\n        pacman -Sy caddy --noconfirm\n      fi\n      [[ ! -e \"/usr/bin/caddy\" ]] && echo -e \"${Error} Caddyå®‰è£…å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨éƒ¨ç½²ï¼ŒWebç½‘é¡µæ–‡ä»¶ä½ç½®ï¼š${web_file}\" && exit 1\n      systemctl enable caddy\n      echo \"\" >${caddy_file}\n    }\n    Set_server \"server\"\n    Set_server_http_port\n    cat >>${caddy_file} <<-EOF\nhttp://${server_s}:${server_http_port_s} {\n  root * ${web_file}\n  encode gzip\n  file_server\n}\nEOF\n    systemctl restart caddy\n  else\n    echo -e \"${Info} è·³è¿‡ HTTPæœåŠ¡éƒ¨ç½²ï¼Œè¯·æ‰‹åŠ¨éƒ¨ç½²ï¼ŒWebç½‘é¡µæ–‡ä»¶ä½ç½®ï¼š${web_file} ï¼Œå¦‚æœä½ç½®æ”¹å˜ï¼Œè¯·æ³¨æ„ä¿®æ”¹æœåŠ¡è„šæœ¬æ–‡ä»¶ /etc/init.d/status-server ä¸­çš„ WEB_BIN å˜é‡ !\"\n  fi\n}\n\nInstall_ServerStatus_server() {\n  [[ -e \"${server_file}/sergate\" ]] && echo -e \"${Error} æ£€æµ‹åˆ° $NAME æœåŠ¡ç«¯å·²å®‰è£… !\" && exit 1\n  Set_server_port\n  echo -e \"${Info} å¼€å§‹å®‰è£…/é…ç½® ä¾èµ–...\"\n  Installation_dependency \"server\"\n  Install_caddy\n  echo -e \"${Info} å¼€å§‹ä¸‹è½½/å®‰è£…...\"\n  Download_Server_Status_server\nInstall_jq\n  echo -e \"${Info} å¼€å§‹ä¸‹è½½/å®‰è£… æœåŠ¡è„šæœ¬...\"\n  Service_Server_Status_server\n  echo -e \"${Info} å¼€å§‹å†™å…¥ é…ç½®æ–‡ä»¶...\"\n  Write_server_config\n  Write_server_config_conf\n  echo -e \"${Info} æ‰€æœ‰æ­¥éª¤ å®‰è£…å®Œæ¯•ï¼Œå¼€å§‹å¯åŠ¨...\"\n  Start_ServerStatus_server\n}\n\nInstall_ServerStatus_client() {\n  [[ -e \"${client_file}/client-linux.py\" ]] && echo -e \"${Error} æ£€æµ‹åˆ° $NAME å®¢æˆ·ç«¯å·²å®‰è£… !\" && exit 1\n  check_sys\n  echo -e \"${Info} å¼€å§‹è®¾ç½® ç”¨æˆ·é…ç½®...\"\n  Set_config_client\n  echo -e \"${Info} å¼€å§‹å®‰è£…/é…ç½® ä¾èµ–...\"\n  Installation_dependency \"client\"\n  echo -e \"${Info} å¼€å§‹ä¸‹è½½/å®‰è£…...\"\n  Download_Server_Status_client\n  echo -e \"${Info} å¼€å§‹ä¸‹è½½/å®‰è£… æœåŠ¡è„šæœ¬...\"\n  Service_Server_Status_client\n  echo -e \"${Info} å¼€å§‹å†™å…¥ é…ç½®...\"\n  Read_config_client\n  Modify_config_client\n  echo -e \"${Info} æ‰€æœ‰æ­¥éª¤ å®‰è£…å®Œæ¯•ï¼Œå¼€å§‹å¯åŠ¨...\"\n  Start_ServerStatus_client\n}\n\nUpdate_ServerStatus_server() {\n  check_installed_server_status\n  Download_Server_Status_server\n  rm -rf /etc/init.d/status-server\n  Service_Server_Status_server\n  Start_ServerStatus_server\n}\n\nUpdate_ServerStatus_client() {\n  check_installed_client_status\n  systemctl stop status-client\n  client_text=\"$(sed 's/\\\"//g;s/,//g;s/ //g' \"${client_file}/client-linux.py\")\"\n  server_s=\"$(echo -e \"${client_text}\" | grep \"SERVER=\" | awk -F \"=\" '{print $2;exit}')\"\n  server_port_s=\"$(echo -e \"${client_text}\" | grep \"PORT=\" | awk -F \"=\" '{print $2;exit}')\"\n  username_s=\"$(echo -e \"${client_text}\" | grep \"USER=\" | awk -F \"=\" '{print $2;exit}')\"\n  password_s=\"$(echo -e \"${client_text}\" | grep \"PASSWORD=\" | awk -F \"=\" '{print $2;exit}')\"\n  Download_Server_Status_client\n  Read_config_client\n  Modify_config_client\n  rm -rf  ${service}/status-client.service\n  Service_Server_Status_client\n  Start_ServerStatus_client\n}\n\nStart_ServerStatus_server() {\n  port=\"$(grep \"m_Port = \" ${server_file}/src/main.cpp | awk '{print $3}' | sed '{s/;$//}')\"\n  check_installed_server_status\n  systemctl -q is-active status-server && echo -e \"${Error} $NAME æ­£åœ¨è¿è¡Œï¼Œè¯·æ£€æŸ¥ !\" && exit 1\n  systemctl start status-server\n\t\tif (systemctl -q is-active status-server) then\n\t\t\techo -e \"${Info} $NAME æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ[ç›‘å¬ç«¯å£ï¼š${port}] !\"\n\t\telse\n\t\t\techo -e \"${Error} $NAME æœåŠ¡ç«¯å¯åŠ¨å¤±è´¥ !\"\n\t\tfi\n}\n\nStop_ServerStatus_server() {\n  check_installed_server_status\nif (systemctl -q is-active status-server)\n  then\n  systemctl stop status-server \n else  \n echo -e \"${Error} $NAME æ²¡æœ‰è¿è¡Œï¼Œè¯·æ£€æŸ¥ !\" && exit 1\nfi\n\t\tif (systemctl -q is-active status-server) then\n\t\t\techo -e \"${Error} $NAME æœåŠ¡ç«¯åœæ­¢å¤±è´¥ !\"\n\t\telse\n\t\t\techo -e \"${Info} $NAME æœåŠ¡ç«¯åœæ­¢æˆåŠŸ !\"\n\t\tfi\n}\n\nRestart_ServerStatus_server() {\n  check_installed_server_status\n  systemctl restart status-server\nif (systemctl -q is-active status-server)\n     then\n     echo -e \"${Info} $NAME æœåŠ¡ç«¯é‡å¯æˆåŠŸ !\"\nelse\n     echo -e \"${Error} $NAME æœåŠ¡ç«¯é‡å¯å¤±è´¥ !\" && exit 1\nfi\n}\n\nUninstall_ServerStatus_server() {\n  check_installed_server_status\n  echo \"ç¡®å®šè¦å¸è½½ $NAME æœåŠ¡ç«¯(å¦‚æœåŒæ—¶å®‰è£…äº†å®¢æˆ·ç«¯ï¼Œåˆ™åªä¼šåˆ é™¤æœåŠ¡ç«¯) ? [y/N]\"\n  echo\n  read -erp \"(é»˜è®¤: n):\" unyn\n  [[ -z ${unyn} ]] && unyn=\"n\"\n  if [[ ${unyn} == [Yy] ]]; then\n    systemctl stop status-server\n    systemctl disable status-server\n    rm ${service}/status-server.service -f\n    if [[ -e \"${client_file}/client-linux.py\" ]]; then\n      rm -rf \"${server_file}\"\n      rm -rf \"${web_file}\"\n      rm -rf \"${plugin_file}\"\n    else\n      rm -rf \"${file}\"\n    fi\n    if [[ -e \"/usr/bin/caddy\" ]]; then\n      systemctl stop caddy\n      systemctl disable caddy\n      [[ ${release} == \"debian\" ]] && apt purge -y caddy\n      [[ ${release} == \"centos\" ]] && yum -y remove caddy\n      [[ ${release} == \"archlinux\" ]] && pacman -R caddy --noconfirm\n    fi\n    systemctl daemon-reload\n    systemctl reset-failed\n    echo && echo \"ServerStatus å¸è½½å®Œæˆ !\" && echo\n  else\n    echo && echo \"å¸è½½å·²å–æ¶ˆ...\" && echo\n  fi\n}\n\nStart_ServerStatus_client() {\n  check_installed_client_status\nif (systemctl -q is-active status-client) then\n    echo -e \"${Error} $NAME å®¢æˆ·ç«¯æ­£åœ¨è¿è¡Œï¼Œè¯·æ£€æŸ¥ !\" && exit 1\nfi\n   systemctl start status-client\n   if (systemctl -q is-active status-client)\n     then\n       echo -e \"${Info} $NAME å®¢æˆ·ç«¯å¯åŠ¨æˆåŠŸ !\"\n   else\n       echo -e \"${Error} $NAME å®¢æˆ·ç«¯å¯åŠ¨å¤±è´¥ !\"\n   fi\n}\n\nStop_ServerStatus_client() {\n  check_installed_client_status\nif (systemctl -q is-active status-client) then\n  systemctl stop status-client\n    if (systemctl -q is-active status-client) then\n       echo -e \"${Error}} $NAME åœæ­¢å¤±è´¥ !\"\n      else\n       echo -e \"${Info} $NAME åœæ­¢æˆåŠŸ !\"\n    fi\nelse\n    echo -e \"${Error} $NAME æ²¡æœ‰è¿è¡Œï¼Œè¯·æ£€æŸ¥ !\" && exit 1\nfi\n}\n\nRestart_ServerStatus_client() {\n  systemctl restart status-client\nif (systemctl -q is-active status-client) then\n     echo -e \"${Info} $NAME é‡å¯æˆåŠŸ !\"\nelse\n     echo -e \"${Error} $NAME é‡å¯å¤±è´¥ !\" && exit 1\nfi\n}\n\nUninstall_ServerStatus_client() {\n  check_installed_client_status\n  echo \"ç¡®å®šè¦å¸è½½ $NAME å®¢æˆ·ç«¯(å¦‚æœåŒæ—¶å®‰è£…äº†æœåŠ¡ç«¯ï¼Œåˆ™åªä¼šåˆ é™¤å®¢æˆ·ç«¯) ? [y/N]\"\n  echo\n  read -erp \"(é»˜è®¤: n):\" unyn\n  [[ -z ${unyn} ]] && unyn=\"n\"\n  if [[ ${unyn} == [Yy] ]]; then\n    systemctl stop status-client\n    systemctl disable status-client\n    rm ${service}/status-client.service -f\n    systemctl daemon-reload\n    systemctl reset-failed\n    rm -rf \"${client_file}\"\n    echo && echo \"ServerStatus å¸è½½å®Œæˆ !\" && echo\n  else\n    echo && echo \"å¸è½½å·²å–æ¶ˆ...\" && echo\n  fi\n}\n\nView_ServerStatus_client() {\n  check_installed_client_status\n  Read_config_client\n  clear && echo \"â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\" && echo\n  echo -e \"  $NAME å®¢æˆ·ç«¯é…ç½®ä¿¡æ¯ï¼š\n\n  IP \\t: ${Green_font_prefix}${client_server}${Font_color_suffix}\n  ç«¯å£ \\t: ${Green_font_prefix}${client_port}${Font_color_suffix}\n  è´¦å· \\t: ${Green_font_prefix}${client_user}${Font_color_suffix}\n  å¯†ç  \\t: ${Green_font_prefix}${client_password}${Font_color_suffix}\n\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\"\n}\n\nView_client_Log() {\n    journalctl -u status-client.service --no-pager -f\n    if [[ $# == 0 ]]; then\n        before_show_menu\n    fi\n}\n\nView_server_Log() {\n    journalctl -u status-server.service --no-pager -f\n    if [[ $# == 0 ]]; then\n        before_show_menu\n    fi\n}\n\nUpdate_Shell() {\n  sh_new_ver=$(wget --no-check-certificate -qO- -t1 -T3 \"${github_prefix}/status.sh\" | grep 'sh_ver=\"' | awk -F \"=\" '{print $NF}' | sed 's/\\\"//g' | head -1)\n  [[ -z ${sh_new_ver} ]] && echo -e \"${Error} æ— æ³•é“¾æ¥åˆ° Github !\" && exit 0\n  if  [[ -e \"${service}/status-client.service\" ]]; then\n    rm -rf ${service}/status-client.service\n    Service_Server_Status_client\n  fi\n  if  [[ -e \"${service}/status-server.service\" ]]; then\n    rm -rf ${service}/status-server.service\n    Service_Server_Status_server\n  fi\n  wget -N --no-check-certificate \"${github_prefix}/status.sh\"\n  echo -e \"è„šæœ¬å·²æ›´æ–°ä¸ºæœ€æ–°ç‰ˆæœ¬[ ${sh_new_ver} ] !(æ³¨æ„ï¼šå› ä¸ºæ›´æ–°æ–¹å¼ä¸ºç›´æ¥è¦†ç›–å½“å‰è¿è¡Œçš„è„šæœ¬ï¼Œæ‰€ä»¥å¯èƒ½ä¸‹é¢ä¼šæç¤ºä¸€äº›æŠ¥é”™ï¼Œæ— è§†å³å¯)\" && exit 0\n}\n\nmenu_client() {\n  echo && echo -e \"  $NAME ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬ ${Red_font_prefix}[v${sh_ver}]${Font_color_suffix}\n\n ${Green_font_prefix} 0.${Font_color_suffix} å‡çº§è„šæœ¬\n â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix} 1.${Font_color_suffix} å®‰è£… å®¢æˆ·ç«¯\n ${Green_font_prefix} 2.${Font_color_suffix} æ›´æ–° å®¢æˆ·ç«¯\n ${Green_font_prefix} 3.${Font_color_suffix} å¸è½½ å®¢æˆ·ç«¯\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix} 4.${Font_color_suffix} å¯åŠ¨ å®¢æˆ·ç«¯\n ${Green_font_prefix} 5.${Font_color_suffix} åœæ­¢ å®¢æˆ·ç«¯\n ${Green_font_prefix} 6.${Font_color_suffix} é‡å¯ å®¢æˆ·ç«¯\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix} 7.${Font_color_suffix} è®¾ç½® å®¢æˆ·ç«¯é…ç½®\n ${Green_font_prefix} 8.${Font_color_suffix} æŸ¥çœ‹ å®¢æˆ·ç«¯ä¿¡æ¯\n ${Green_font_prefix} 9.${Font_color_suffix} æŸ¥çœ‹ å®¢æˆ·ç«¯æ—¥å¿—\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix}10.${Font_color_suffix} åˆ‡æ¢ä¸º æœåŠ¡ç«¯èœå•\" && echo\n  if [[ -e \"${client_file}/client-linux.py\" ]]; then\n    if (systemctl -q is-active status-client); then\n      echo -e \" å½“å‰çŠ¶æ€: å®¢æˆ·ç«¯ ${Green_font_prefix}å·²å®‰è£…${Font_color_suffix} å¹¶ ${Green_font_prefix}å·²å¯åŠ¨${Font_color_suffix}\"\n    else\n      echo -e \" å½“å‰çŠ¶æ€: å®¢æˆ·ç«¯ ${Green_font_prefix}å·²å®‰è£…${Font_color_suffix} ä½† ${Red_font_prefix}æœªå¯åŠ¨${Font_color_suffix}\"\n    fi\n    else\n      echo -e \" å½“å‰çŠ¶æ€: å®¢æˆ·ç«¯ ${Red_font_prefix}æœªå®‰è£…${Font_color_suffix}\"\n  fi\n  echo\n  read -erp \" è¯·è¾“å…¥æ•°å­— [0-10]:\" num\n  case \"$num\" in\n  0)\n    Update_Shell\n    ;;\n  1)\n    Install_ServerStatus_client\n    ;;\n  2)\n    Update_ServerStatus_client\n    ;;\n  3)\n    Uninstall_ServerStatus_client\n    ;;\n  4)\n    Start_ServerStatus_client\n    ;;\n  5)\n    Stop_ServerStatus_client\n    ;;\n  6)\n    Restart_ServerStatus_client\n    ;;\n  7)\n    Set_ServerStatus_client\n    ;;\n  8)\n    View_ServerStatus_client\n    ;;\n  9)\n    View_client_Log\n    ;;\n  10)\n    menu_server\n    ;;\n  *)\n    echo \"è¯·è¾“å…¥æ­£ç¡®æ•°å­— [0-10]\"\n    ;;\n  esac\n}\nmenu_server() {\n  echo && echo -e \"  $NAME ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬ ${Red_font_prefix}[v${sh_ver}]${Font_color_suffix}\n\n ${Green_font_prefix} 0.${Font_color_suffix} å‡çº§è„šæœ¬\n â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix} 1.${Font_color_suffix} å®‰è£… æœåŠ¡ç«¯\n ${Green_font_prefix} 2.${Font_color_suffix} æ›´æ–° æœåŠ¡ç«¯\n ${Green_font_prefix} 3.${Font_color_suffix} å¸è½½ æœåŠ¡ç«¯\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix} 4.${Font_color_suffix} å¯åŠ¨ æœåŠ¡ç«¯\n ${Green_font_prefix} 5.${Font_color_suffix} åœæ­¢ æœåŠ¡ç«¯\n ${Green_font_prefix} 6.${Font_color_suffix} é‡å¯ æœåŠ¡ç«¯\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix} 7.${Font_color_suffix} è®¾ç½® æœåŠ¡ç«¯é…ç½®\n ${Green_font_prefix} 8.${Font_color_suffix} æŸ¥çœ‹ æœåŠ¡ç«¯ä¿¡æ¯\n ${Green_font_prefix} 9.${Font_color_suffix} æŸ¥çœ‹ æœåŠ¡ç«¯æ—¥å¿—\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n ${Green_font_prefix}10.${Font_color_suffix} åˆ‡æ¢ä¸º å®¢æˆ·ç«¯èœå•\" && echo\n  if [[ -e \"${server_file}/sergate\" ]]; then\n    if (systemctl -q is-active status-server) then\n      echo -e \" å½“å‰çŠ¶æ€: æœåŠ¡ç«¯ ${Green_font_prefix}å·²å®‰è£…${Font_color_suffix} å¹¶ ${Green_font_prefix}å·²å¯åŠ¨${Font_color_suffix}\"\n    else\n      echo -e \" å½“å‰çŠ¶æ€: æœåŠ¡ç«¯ ${Green_font_prefix}å·²å®‰è£…${Font_color_suffix} ä½† ${Red_font_prefix}æœªå¯åŠ¨${Font_color_suffix}\"\n    fi\n  else\n    echo -e \" å½“å‰çŠ¶æ€: æœåŠ¡ç«¯ ${Red_font_prefix}æœªå®‰è£…${Font_color_suffix}\"\n  fi\n  echo\n  read -erp \" è¯·è¾“å…¥æ•°å­— [0-10]:\" num\n  case \"$num\" in\n  0)\n    Update_Shell\n    ;;\n  1)\n    Install_ServerStatus_server\n    ;;\n  2)\n    Update_ServerStatus_server\n    ;;\n  3)\n    Uninstall_ServerStatus_server\n    ;;\n  4)\n    Start_ServerStatus_server\n    ;;\n  5)\n    Stop_ServerStatus_server\n    ;;\n  6)\n    Restart_ServerStatus_server\n    ;;\n  7)\n    Set_ServerStatus_server\n    ;;\n  8)\n    List_ServerStatus_server\n    ;;\n  9)\n    View_server_Log\n    ;;\n  10)\n    menu_client\n    ;;\n  *)\n    echo \"è¯·è¾“å…¥æ­£ç¡®æ•°å­— [0-10]\"\n    ;;\n  esac\n}\n\ncheck_sys\naction=$1\nif [[ -n $action ]]; then\n  if [[ $action == \"s\" ]]; then\n    menu_server\n  elif [[ $action == \"c\" ]]; then\n    menu_client\n  fi\nelse\n  menu_client\nfi\n"
        },
        {
          "name": "web",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}