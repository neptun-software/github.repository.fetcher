{
  "metadata": {
    "timestamp": 1736566005336,
    "page": 986,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjk5MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "mongoose-os-apps/shelly-homekit",
      "stars": 1873,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".clang-format",
          "type": "blob",
          "size": 0.1865234375,
          "content": "BasedOnStyle: Google\nAllowShortFunctionsOnASingleLine: false\nSpaceAfterCStyleCast: true\nPointerBindsToType: false\nDerivePointerBinding: false\nIncludeBlocks: Preserve\nJavaScriptQuotes: Double\n"
        },
        {
          "name": ".devcontainer",
          "type": "tree",
          "content": null
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.12890625,
          "content": "binlibs/\nbuild/\nbuild_*/\ndeps/\nreleases/\n.vscode/\n.DS_Store\ncore-*\n*.gz\n*.zip\nfs/conf*.json\nflash-shelly.auth.yaml\n*.cfg.yaml\n.venv\n"
        },
        {
          "name": "AUTHORS.md",
          "type": "blob",
          "size": 0.59765625,
          "content": "# Shelly-HomeKit authors\n\nThe following people have contributed to the project (in chronological order):\n\n * [Deomid \"rojer\" Ryabkov](https://github.com/rojer)\n * [Andy Blackburn](https://github.com/andyblac)\n * [Thorsten Eurich](https://github.com/eurich)\n * [Dominik Schemhaus](https://github.com/schemhad)\n * [Timothy Langer](https://github.com/ZeeVox)\n * [Timo Schilling](https://github.com/timoschilling)\n * [Josef Blösl](https://github.com/jobl1978)\n * [Markus Kirberg](https://github.com/markirb)\n\nFull list of contributors [here](https://github.com/mongoose-os-apps/shelly-homekit/graphs/contributors).\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 0.5732421875,
          "content": "Copyright (c) Shelly-HomeKit Contributors\nAll rights reserved\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 4.7412109375,
          "content": "MAKEFLAGS += --warn-undefined-variables --no-builtin-rules\n\n.PHONY: build check-format format release upload \\\n        Shelly1 Shelly1L Shelly1PM Shelly25 Shelly2 ShellyColorBulb ShellyDuo ShellyI3 ShellyPlug ShellyPlugS ShellyPlusPlugS ShellyPlus1 ShellyPlus1PM ShellyPlus2PM ShellyPlusI4 ShellyRGBW2 ShellyVintage ShellyU ShellyU25 ShellyUDuo ShellyURGBW2 ShellyUNI ShellyPlus1Mini ShellyPlusRGBWPM ShellyMini1Gen3 ShellyMini1PMGen3\n.SUFFIXES:\n\nMOS ?= mos\n# Build locally by default if Docker is available.\nLOCAL ?= $(shell which docker> /dev/null && echo 1 || echo 0)\nCLEAN ?= 0\nV ?= 0\nVERBOSE ?= 0\nRELEASE ?= 0\nRELEASE_SUFFIX ?=\nMOS_BUILD_FLAGS ?=\nALLOW_DIRTY_FS ?= 0\nBUILD_DIR ?= ./build_$*\n\nMOS_BUILD_FLAGS_FINAL = $(MOS_BUILD_FLAGS)\nifeq \"$(LOCAL)\" \"1\"\n  MOS_BUILD_FLAGS_FINAL += --local\nendif\nifeq \"$(CLEAN)\" \"1\"\n  MOS_BUILD_FLAGS_FINAL += --clean\nendif\nifneq \"$(VERBOSE)$(V)\" \"00\"\n  MOS_BUILD_FLAGS_FINAL += --verbose\nendif\n\nbuild: Shelly1 Shelly1L Shelly1PM Shelly25 Shelly2 ShellyColorBulb ShellyDuo ShellyI3 ShellyPlug ShellyPlugS ShellyPlusPlugS ShellyPlus1 ShellyPlus1PM ShellyPlus2PM ShellyPlusI4 ShellyRGBW2 ShellyVintage ShellyU ShellyU25 ShellyURGBW2 ShellyUNI ShellyPlus1Mini ShellyPlusRGBWPM ShellyMini1Gen3 ShellyMini1PMGen3\n\nrelease:\n\t$(MAKE) build CLEAN=1 RELEASE=1\n\nPLATFORM ?= esp8266\n\nShelly1: build-Shelly1\n\t@true\n\nShelly1L: build-Shelly1L\n\t@true\n\nShelly1PM: build-Shelly1PM\n\t@true\n\nShelly2: build-Shelly2\n\t@true\n\nShelly25: build-Shelly25\n\t@true\n\nShellyColorBulb: build-ShellyColorBulb\n\t@true\n\nShellyDuo: build-ShellyDuo\n\t@true\n\nShellyI3: build-ShellyI3\n\t@true\n\nShellyPlug: build-ShellyPlug\n\t@true\n\nShellyPlugS: build-ShellyPlugS\n\t@true\n\nShellyPlusPlugS: PLATFORM=esp32\nShellyPlusPlugS: build-ShellyPlusPlugS\n\t@true\n\nShellyPlus1: PLATFORM=esp32\nShellyPlus1: build-ShellyPlus1\n\t@true\n\nShellyPlus1PM: PLATFORM=esp32\nShellyPlus1PM: build-ShellyPlus1PM\n\t@true\n\nShellyPlus2PM: PLATFORM=esp32\nShellyPlus2PM: build-ShellyPlus2PM\n\t@true\n\nShellyPlusRGBWPM: PLATFORM=esp32\nShellyPlusRGBWPM: build-ShellyPlusRGBWPM\n\t@true\n\nShellyPlusI4: PLATFORM=esp32\nShellyPlusI4: build-ShellyPlusI4\n\t@true\n\nShellyPlus1PMMini: PLATFORM=esp32c3\nShellyPlus1PMMini: build-ShellyPlus1PMMini\n\t@true\n\nShellyPlus1Mini: PLATFORM=esp32c3\nShellyPlus1Mini: build-ShellyPlus1Mini\n\t@true\n\nShellyMini1Gen3: PLATFORM=esp32c3\nShellyMini1Gen3: build-ShellyMini1Gen3\n\t@true\n\nShellyMini1PMGen3: PLATFORM=esp32c3\nShellyMini1PMGen3: build-ShellyMini1PMGen3\n\t@true\n\nShellyRGBW2: build-ShellyRGBW2\n\t@true\n\nShellyUNI: build-ShellyUNI\n\t@true\n\nShellyVintage: build-ShellyVintage\n\t@true\n\nShellyU: PLATFORM=ubuntu\nShellyU: build-ShellyU\n\t@true\n\nShellyU25: PLATFORM=ubuntu\nShellyU25: build-ShellyU25\n\t@true\n\nShellyUDuo: PLATFORM=ubuntu\nShellyUDuo: build-ShellyUDuo\n\t@true\n\nShellyURGBW2: PLATFORM=ubuntu\nShellyURGBW2: build-ShellyURGBW2\n\t@true\n\nShellyT32: PLATFORM=esp32\nShellyT32: build-ShellyT32\n\t@true\n\nfs/index.html.gz: $(wildcard fs_src/*) Makefile\n\tmkdir -p $(BUILD_DIR)\n\tcat fs_src/index.html | \\\n\tsed \"s/.*<link.*rel=\\\"stylesheet\\\".*//g\" | sed -e '/<style>/ r fs_src/style.css' | \\\n\tsed \"s/.*<script src=\\\"sha256.js\\\".*/<script data-src=\\\"sha256.js\\\">/g\" | sed -e '/<script data-src=\\\"sha256.js\\\">/ r fs_src/sha256.js' | \\\n\tsed \"s/.*<script src=\\\"qrcode.js\\\".*/<script data-src=\\\"qrcode.js\\\">/g\" | sed -e '/<script data-src=\\\"qrcode.js\\\">/ r fs_src/qrcode.js' | \\\n\tsed \"s/.*<script src=\\\"script.js\\\".*/<script data-src=\\\"script.js\\\">/g\" | sed -e '/<script data-src=\\\"script.js\\\">/ r fs_src/script.js' | \\\n\tsed -e '/.*<img.*src=\".\\/logo.svg\".*/ {' -e 'r fs_src/logo.svg' -e 'd' -e '}' > $(BUILD_DIR)/index.html\n\tgzip -9 -c $(BUILD_DIR)/index.html > $@\n#\tzopfli -c -i30 $(BUILD_DIR)/index.html > $@\n#\tbrotli --best -c $(BUILD_DIR)/index.html > $@\n\nbuild-%: fs/index.html.gz Makefile\nifneq \"$(ALLOW_DIRTY_FS)\" \"1\"\n\t@[ -z \"$(wildcard fs/conf*.json fs/kvs.json)\" ] || { echo; echo \"XXX No configs in fs allowed, or set ALLOW_DIRTY_FS=1\"; echo; exit 1; }\nendif\n\t$(MOS) build --platform=$(PLATFORM) --build-var=MODEL=$* \\\n\t  --build-dir=$(BUILD_DIR) --binary-libs-dir=./binlibs $(MOS_BUILD_FLAGS_FINAL) --repo https://github.com/markirb/mongoose-os\nifeq \"$(RELEASE)\" \"1\"\n\t[ $(PLATFORM) = ubuntu ] || \\\n\t  (dir=releases/`jq -r .build_version $(BUILD_DIR)/gen/build_info.json`$(RELEASE_SUFFIX) && \\\n\t    mkdir -p $$dir/misc && \\\n\t    cp -v $(BUILD_DIR)/fw.zip $$dir/shelly-homekit-$*.zip && \\\n\t    cp -v $(BUILD_DIR)/objs/*.elf $$dir/misc/shelly-homekit-$*.elf && \\\n\t    cp -v $(BUILD_DIR)/gen/mgos_deps_manifest.yml $$dir/misc/shelly-homekit-$*_deps.yml)\nendif\n\nformat:\n\tfor d in src lib* fs_src; do \\\n\t  find $$d -name \\*.cpp -o -name \\*.hpp -o -name script.js | \\\n\t    xargs clang-format -i;\\\n\tdone\n\ncheck-format: format\n\t@git diff --exit-code || { printf \"\\n== Please format your code (run make format) ==\\n\\n\"; exit 1; }\n\nupload:\n\trsync -azv releases/* rojer.me:www/files/shelly/\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 9.677734375,
          "content": "[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)\n[![Gitter](https://badges.gitter.im/shelly-homekit/community.svg)](https://gitter.im/shelly-homekit/community?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge)\n\n# Open Source Apple HomeKit Firmware for Shelly Devices\n\nThis firmware exposes Shelly devices as Apple HomeKit accessories.\n\nFirmware is compatible with stock and can be uploaded via OTA (Watch a 2 minute [video](https://www.youtube.com/watch?v=BZc-kp4dDRw)), for more info take a look at the flashing wiki [here](https://github.com/mongoose-os-apps/shelly-homekit/wiki/Flashing#updating-from-stock-firmware).\n\nReverting to stock firmware is also possible [see here](https://github.com/mongoose-os-apps/shelly-homekit/wiki/Flashing#reverting-to-stock-firmware).\n\n## Supported devices and features\n\n### Gen 3 Devices\n\n|                                            |[Mini1G3]|[Mini1PMG3]\n|-                                           |-        |-          \n|Switch & Co.<sup>1</sup>                    |✓        |✓          \n|Stateless Input<sup>2</sup>                 |✓        |✓          \n|Garage door opener                          |✓        |✓          \n|Power measurement                           |✗        |-\n\n### Plus devices\n\n|                                            |[+1]|[+1Mini]|[+1PMMini]|[+1PM]|[+2PM]|+i4 [AC]/[DC]|[+Plug S]\n|-                                           |-   |-       |-         |-     |-     |-            |-     \n|Switch & Co.<sup>1</sup>                    |✓   |✓       |✓         |✓     |✓     |✗            |✓     \n|Stateless Input<sup>2</sup>                 |✓   |✓       |✓         |✓     |✓     |✓            |✗    \n|Sensors<sup>3</sup>                         |✓   |✗       |✗         |✓     |✓     |✓            |✗     \n|Garage door opener                          |✓   |✓       |✓         |✓     |✓     |✗            |✗     \n|Roller shutter mode                         |✗   |✗       |✗         |✗     |✓     |✗            |✗     \n|Power measurement                           |✗   |✗       |-         |✓     |✓     |✗            |✓     \n|Temperature/Humidity measurement<sup>4</sup>|✓   |✗       |✗         |✓     |✓     |✓            |✗     \n\n### Light Controllers\n\n|                         |[+RGBWPM]|\n|-|-|\n|Brightness control       |✓|\n|CCT                      |✓|\n|RGB(W)                   |✓|\n|Switch & Co <sup>1</sup> |✓|\n|Power measurement        |-|\n\n\n### Pro devices\n\nCurrently not supported.\n\n### Gen 1 switches\n\n||[1]|1PM|[1L]|[Plug]|[PlugS]|2|2.5|i3|[UNI]|\n|-|-|-|-|-|-|-|-|-|-|\n|Switch & Co.<sup>1</sup>|✓|✓|✓|✓|✓|✓|✓|✗|✓|\n|Stateless Input<sup>2</sup>|✓|✓|✓|✗|✗|✓|✓|✓|✓|\n|Sensors<sup>3</sup>|✓|✓|✓|✗|✗|✓|✓|✓|✓|\n|Temperature/Humidity measurement|✓<sup>4</sup>|✓<sup>4</sup>|✗|✗|✗|✗|✗|✗|-|\n|Garage door opener|✓|✓|✗|✗|✗|✓|✓|✗|✓|\n|Roller shutter mode|✗|✗|✗|✗|✗|✗|✓|✗|✗|\n|Power measurement|✗|✓|-|✓|✓|✗|✓|✗|✗|\n\n### Gen 1 light bulbs / led strips\n\n||[Duo]|[Duo RGBW]|[Vintage]|[RGBW2]|\n|-|-|-|-|-|\n|Brightness control|✓|✓|✓|✓|\n|CCT|✓|✗|✗|✓|\n|RGB(W)|✗|✓|✗|✓|\n|Power measurement|-|-|-|-|\n\n_Notes:_  \n_✓: supported_  \n_-: possible but not supported yet_  \n_✗: not possible_  \n_1: includes lock, outlet and valve_  \n_2: includes doorbell_  \n_3: includes motion, occupancy, contact, smoke, leak_  \n_4: with [Sensor AddOn/Shelly Plus AddOn](https://shop.shelly.cloud/temperature-sensor-addon-for-shelly-1-1pm-wifi-smart-home-automation#312)_ and DS18B20 sensor(s) (maximum 5 for Shelly Plus Addon, maximum 3 for Sensor AddOn) or 1 DHT sensor\n\nFeatures that are not yet supported:\n * Cloud connections: no Shelly Cloud, no MQTT\n * Remote actions (web hooks)\n * Valve with timer support\n\n## Quick Start\n\n### Updating from stock firmware\n\n  * **Important:** Please update to the latest stock firmware prior to converting to Shelly-HomeKit (1.4 or later on Plus Devices).\n\n  * Watch a 2 minute [video](https://www.youtube.com/watch?v=BZc-kp4dDRw).\n\n    * *New:* One link for all device types: `http://A.B.C.D/ota?url=http://shelly.rojer.cloud/update`\n    \n    <details>\n     \n      <summary>If that doesn't work (did you remember to have the stock firmware at the correct version), try the link for a specific model</summary>\n  \n      * Shelly 1: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-Shelly1.zip`\n\n      * Shelly 1L: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-Shelly1L.zip`\n\n      * Shelly 1PM: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-Shelly1PM.zip`\n\n      * Shelly 2: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-Shelly2.zip`  \n        _Note: Not for Shelly Dimmer 2!_\n\n      * Shelly 2.5: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-Shelly25.zip`\n\n      * Shelly Duo: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyDuo.zip`\n\n      * Shelly Duo RGBW (ColorBulb): `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyColorBulb.zip`\n\n      * Shelly i3: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyI3.zip`\n\n      * Shelly Mini 1 Gen3: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyMini1Gen3.zip`\n   \n      * Shelly Mini 1 PM Gen3: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyMini1PMGen3.zip`\n\n      * Shelly Plug: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyPlug.zip`\n\n      * Shelly Plug S: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyPlugS.zip`\n\n      * Shelly Plus 1: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyPlus1.zip`\n\n      * Shelly Plus 1 Mini: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyPlus1Mini.zip`\n\n      * Shelly Plus 1PM: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyPlus1PM.zip`\n      \n      * Shelly Plus 2PM: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyPlus2PM.zip`\n   \n      * Shelly Plus Plug S: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyPlusPlugS.zip`\n   \n      * Shelly Plus RGBWPM: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyPlusRGBWPM.zip`\n\n      * Shelly Plus I4 AC & DC: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyPlusI4.zip`\n\n      * Shelly RGBW2: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyRGBW2.zip`  \n        _Note: The Shelly must be in color mode to flash, flashing in white mode is not supported!_\n\n      * Shelly UNI: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyUNI.zip`\n\n      * Shelly Vintage: `http://A.B.C.D/ota?url=http://rojer.me/files/shelly/shelly-homekit-ShellyVintage.zip`\n     </details>\n\n  * See [here](https://github.com/mongoose-os-apps/shelly-homekit/wiki/Flashing#updating-from-stock-firmware) for detailed instructions.\n\n  * Script [here](https://github.com/mongoose-os-apps/shelly-homekit/wiki/Flashing#Script) for an automated way to update your devices.\n    * ./flash_shelly.py hostname  (for single device)\n    * ./flash_shelly.py -a  (for all devices on the network)\n\n## Documentation\n\nSee our [Wiki](https://github.com/mongoose-os-apps/shelly-homekit/wiki).\n\n## Getting Support\n\nIf you'd like to report a bug or a missing feature, please use [GitHub issue tracker](https://github.com/mongoose-os-apps/shelly-homekit/issues).\n\nSome of us can be found in the [Gitter chat room](https://gitter.im/shelly-homekit/community).\n\n## Contributions and Development\n\nCode contributions are welcome! Check out [open issues](https://github.com/mongoose-os-apps/shelly-homekit/issues) and feel free to pick one up.\n\nSee [here](https://github.com/mongoose-os-apps/shelly-homekit/wiki/Development) for development environment setup.\n\n## Authors\n\nSee [here](AUTHORS.md).\n\n## Support\n\nIf you like to show support for the project and support further development, consider a Donation to the current maintainer markib via [Paypal](https://www.paypal.com/donate/?hosted_button_id=RVFA9G5VMXRX8)\n\n## License\n\nThis firmware is free software and is distributed under [Apache 2.0 license](LICENSE).\n\n[1]: https://www.shelly.cloud/en/products/shop/1xs1\n[+1]: https://www.shelly.cloud/en/products/shop/shelly-plus-1\n[+1Mini]: https://www.shelly.cloud/en/products/shop/shelly-plus-1-mini\n[+1PMMini]: https://www.shelly.cloud/en/products/shop/shelly-plus-1pm-mini\n[Mini1G3]: https://www.shelly.cloud/en/products/shop/shelly-1-mini-gen-3\n[Mini1PMG3]: https://www.shelly.cloud/en/products/shop/shelly-1-pm-mini-gen3\n[+1PM]: https://www.shelly.cloud/en/products/shop/shelly-plus-1-pm-2-pack/shelly-plus-1-pm\n[+2PM]: https://www.shelly.cloud/en/products/shop/shelly-plus-2-pm\n[+RGBWPM]: https://www.shelly.cloud/en/products/shop/shelly-plus-rgbw-pm\n[+Plug S]: https://www.shelly.cloud/en/products/shop/shelly-plus-plug-s\n[1L]: https://www.shelly.cloud/en/products/shop/shelly-1l\n[Plug]: https://www.shelly.cloud/en/products/shop/1xplug\n[PlugS]: https://www.shelly.cloud/en/products/shop/shelly-plug-s\n[AC]: https://www.shelly.cloud/en-de/products/product-overview/splusi4x1\n[DC]: https://www.shelly.cloud/en-de/products/product-overview/shelly-plus-i4-dc\n[UNI]: https://www.shelly.cloud/en/products/shop/shelly-uni-1\n[RGBW2]: https://www.shelly.cloud/en/products/shop/shelly-rgbw2-1\n[Duo RGBW]: https://www.shelly.cloud/en/search?query=%22Shelly+Duo+-+RGBW%22\n[Duo]: https://www.shelly.cloud/en/search?query=%22Shelly+Duo%22\n[Vintage]: https://www.shelly.cloud/en/search?query=vintage\n"
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "fs",
          "type": "tree",
          "content": null
        },
        {
          "name": "fs_src",
          "type": "tree",
          "content": null
        },
        {
          "name": "libreset",
          "type": "tree",
          "content": null
        },
        {
          "name": "mos.yml",
          "type": "blob",
          "size": 53.0986328125,
          "content": "author: Shelly-HomeKit contributors\ndescription: A HomeKit firmware for Shelly switches\nversion: 2.13.3\n\nlibs_version: latest\nmodules_version: latest\nmongoose_os_version: latest\n\nsources:\n  - src\n  - src/mock\n  - src/BL0937\n  - src/${build_vars.MODEL}\n\nincludes:\n  - src\n\nfilesystem:\n  - fs\n\nconfig_schema:\n  - [\"debug.event_level\", 3]\n  - [\"dns_sd.txt\", \"fw_type=homekit\"]  # To be easily distinguishable from stock.\n  - [\"file_logger.level\", 3]\n  - [\"file_logger.max_num_files\", 1]\n  - [\"file_logger.max_file_size\", 16000]\n  - [\"file_logger.buf_size\", 1000]\n  - [\"http.auth_algo\", 1]  # SHA-256\n  - [\"http.auth_domain\", \"\"]\n  - [\"rpc.auth_algo\", 1]  # SHA-256\n  - [\"rpc.auth_domain\", \"\"]\n  - [\"sntp.enable\", true]\n\n  - [\"shelly.name\", \"s\", \"\", {title: \"User-facing device name\"}]  # Note: will be overridden by cfg 2 -> 3 migration.\n  - [\"shelly.mode\", \"i\", 0, {title: \"System mode: 0 - default, 1 - roller shutter (if supported), 2 - garage door opener (if supported), 3 - RGB (if supported), 4 - RGBW (if supported), 5 - RGB+W (if supported), 6 - CCT (if supported), 7 - White Mode (if supported)\"}]\n  - [\"shelly.cfg_version\", \"i\", 0, {title: \"Configuration version\"}]\n  - [\"shelly.legacy_hap_layout\", \"b\", false, {title: \"Use legacy accessory layout instead of a bridged accessory\"}]\n  - [\"shelly.overheat_on\", \"i\", 100, {title: \"Overheat protection mode kicks in at or above this temperature\"}]\n  - [\"shelly.overheat_off\", \"i\", 90, {title: \"Overheat protection mode turns off when the temperature is back below this threshold\"}]\n  - [\"shelly.reboot_counter\", \"i\", 0, {title: \"Counter of boot tries with a uptime of less then 10 sec.\"}]\n\n  - [\"ts\", \"o\", {title: \"Temperature Sensor settings\", abstract: true}]\n  - [\"ts.name\", \"s\", \"\", {title: \"Name of the sensor\"}]\n  - [\"ts.unit\", \"i\", 0, {title: \"Display unit of the Sensor\"}] # 0 - Celsius, 1 - Farenheit\n  - [\"ts.update_interval\", \"i\", 1, {title: \"Update Interval of the sensor in seconds, minimum 1s\"}]\n  - [\"ts.offset\", \"i\", 0, {title: \"Offset value can be used for calibration in unit*100 e.g. centigrade\"}]\n\n  - [\"sw\", \"o\", {title: \"Switch settings\", abstract: true}]\n  - [\"sw.name\", \"s\", \"\", {title: \"Name of the switch\"}]\n  - [\"sw.enable\", \"b\", true, {title: \"Enable this switch in the accessory\"}]\n  - [\"sw.out_inverted\", \"b\", false, {title: \"Invert output, set to true for normally open output\"}]\n  - [\"sw.in_mode\", \"i\", 1, {title: \"-1 - Absent, 0 - Momentary, 1 - Toggle, 2 - Edge, 3 - Detached\"}]\n  - [\"sw.in_inverted\", \"b\", false, {title: \"Invert input, set to true for normally closed input\"}]\n  - [\"sw.state\", \"b\", false, {title: \"State of the switch\"}]\n  - [\"sw.svc_type\", \"i\", 0, {title: \"HAP service type, -1 = disable, 0 = switch, 1 = outlet, 2 = lock, 3 = valve\"}]\n  - [\"sw.hk_state_inverted\", \"b\", false, {title: \"Invert switch state in HomeKit, for switch and outlet only\"}]\n  - [\"sw.valve_type\", \"i\", 1, {title: \"HAP valve type (if svc is 3), -1 = disable, 0 = GenericValve, 1 = Irrigation\"}] # see for details about non supported types https://github.com/mongoose-os-apps/shelly-homekit/issues/510\n  - [\"sw.initial_state\", \"i\", 3, {title: \"Initial state on power-on: 0 - off, 1 - on, 2 - restore last state, 3 - matches input if in toggle mode, otherwise off\"}]\n  - [\"sw.auto_off\", \"b\", false, {title: \"Whether the switch should automatically turn OFF after turning ON\"}]\n  - [\"sw.auto_off_delay\", \"d\", 0, {title: \"Delay for automatically turning OFF, in seconds\"}]\n  - [\"sw.state_led_en\", \"i\", -1, {title: \"State LED: -1 - unsupported by device, 0 - off, 1 - on\"}]\n\n  - [\"in\", \"o\", {title: \"Detached Input settings\", abstract: true}]\n  - [\"in.type\", \"i\", 3, {title: \"HAP service type, 3 - Stateless switch, 7 - Motion sensor, 8 - Occupancy sensor, 6 - Disabled\"}]\n  - [\"in.inverted\", \"b\", false, {title: \"Invert input, set to true for normally closed input\"}]\n  - [\"in.ssw\", \"o\", {title: \"Stateless Switch settings\"}]\n  - [\"in.ssw.name\", \"s\", \"\", {title: \"Name of the switch\"}]\n  - [\"in.ssw.in_mode\", \"i\", 0, {title: \"0 - Momentary; 1 - Toggle, single press event on change; 2 - Toggle, on = single press, off = double press\"}]\n  - [\"in.sensor\", \"o\", {title: \"Motion Sensor settings\"}]\n  - [\"in.sensor.name\", \"s\", \"\", {title: \"Name of the sensor\"}]\n  - [\"in.sensor.in_mode\", \"i\", 0, {title: \"0 - Level, 1 - Pulse\"}]\n  - [\"in.sensor.idle_time\", \"i\", 15, {title: \"In pulse mode, go back to 'no motion' after no pulse received within this interval\"}]\n\n  - [\"wc\", \"o\", {title: \"Roller shutter settings\", abstract: true}]\n  - [\"wc.name\", \"s\", \"Shutter 1\", {title: \"Accessory name\"}]\n  - [\"wc.in_mode\", \"i\", 0, {title: \"Input mode: 0 - separate, momentary; 0 - separate, toggle; 2 - single, momentary; 3 - detached\"}]\n  - [\"wc.swap_inputs\", \"b\", false, {title: \"Swap inputs (2 - open, 1 - close)\"}]\n  - [\"wc.swap_outputs\", \"b\", false, {title: \"Swap outputs (2 - open, 1 - close)\"}]\n  - [\"wc.calibrated\", \"b\", false, {title: \"Calibration done\"}]\n  - [\"wc.idle_power_thr\", \"f\", 5.0, {title: \"Power consumption threshold for motor idle detection\"}]\n  - [\"wc.move_power\", \"f\", 0.0, {title: \"Power consumption during movement, watts\"}]\n  - [\"wc.move_time_ms\", \"i\", 0, {title: \"Move time, in millseconds\"}]\n  - [\"wc.max_ramp_up_time_ms\", \"i\", 5000, {title: \"Maximum ramp up time, in millseconds\"}]\n  - [\"wc.obstruction_power_coeff\", \"f\", 2.5, {title: \"How much power consumption vs average is too much?\"}]\n  - [\"wc.obstruction_duration_ms\", \"i\", 3000, {title: \"How long should the overpower persist for obstruction to be reported?\"}]\n  - [\"wc.obstruction_time_coeff\", \"f\", 1.5, {title: \"How long is too long (compared to max)?\"}]\n  - [\"wc.current_pos\", \"f\", 0.0, {title: \"Last position, percent: 0 - fully closed, 100 - fully open.\"}]\n\n  - [\"gdo\", \"o\", {title: \"Garage door settings\", abstract: true}]\n  - [\"gdo.name\", \"s\", \"Garage Door\", {title: \"Accessory name\"}]\n  - [\"gdo.sensor_swap\", \"b\", false, {title: \"Whether to swap the two input sensors\"}]\n  - [\"gdo.close_sensor_mode\", \"i\", 0, {title: \"Close sensor mode: 0 - normally closed, 1 - normally open\"}]\n  - [\"gdo.open_sensor_mode\", \"i\", 0, {title: \"Close sensor mode: 0 - normally closed, 1 - normally open, 2 - disabled\"}]\n  - [\"gdo.out_mode\", \"i\", 0, {title: \"Output mode: 0 - single (open=close=1), 1 - dual (1=open, 2=close), 2 - single inverted (open=close=1)\"}]\n  - [\"gdo.move_time_ms\", \"i\", 30000, {title: \"Movement time, ms\"}]\n  - [\"gdo.begin_move_time_ms\", \"i\", 7000, {title: \"Time allowed for movement to begin, ms\"}]\n  - [\"gdo.pulse_time_ms\", \"i\", 300, {title: \"Output active time, ms\"}]\n\n  - [\"lb\", \"o\", {title: \"Light bulb settings\", abstract: true}]\n  - [\"lb.name\", \"s\", \"Light bulb\", {title: \"Accessory name\"}]\n  - [\"lb.svc_hidden\", \"b\", false, {title: \"Whether HAP service is hidden\"}]\n  - [\"lb.enable\", \"b\", true, {title: \"Enable this light in the accessory\"}]\n  - [\"lb.in_mode\", \"i\", 1, {title: \"-1 - Absent, 0 - Momentary, 1 - Toggle, 2 - Edge, 3 - Detached\"}]\n  - [\"lb.in_inverted\", \"b\", false, {title: \"Invert input, set to true for normally closed input\"}]\n  - [\"lb.state\", \"b\", false, {title: \"State of the light\"}]\n  - [\"lb.hue\", \"i\", 0, {title: \"Hue of the light\"}]\n  - [\"lb.brightness\", \"i\", 100, {title: \"Brightness of the light\"}]\n  - [\"lb.saturation\", \"i\", 100, {title: \"Saturation of the light\"}]\n  - [\"lb.color_temperature\", \"i\", 400, {title: \"Color Temperature of the light\"}]\n  - [\"lb.initial_state\", \"i\", 3, {title: \"Initial state on power-on: 0 - off, 1 - on, 2 - restore last state, 3 - matches input if in toggle mode, otherwise off\"}]\n  - [\"lb.auto_off\", \"b\", false, {title: \"Whether the switch should automatically turn OFF after turning ON\"}]\n  - [\"lb.auto_off_delay\", \"d\", 0, {title: \"Delay for automatically turning OFF, in seconds\"}]\n  - [\"lb.transition_time\", \"i\", 2000, {title: \"Time in milliseconds how long a transition will take\"}]\n\n  - [\"_const.rpc_acl\", \"s\", '[{\"ch_type\": \"UART\", \"acl\": \"*\"},{\"method\": \"Shelly.GetInfo\", \"acl\": \"*\"},{\"method\": \"*\", \"ch_type\": \"HTTP\", \"acl\": \"admin\"},{\"method\": \"*\", \"ch_type\": \"WS_in\", \"acl\": \"admin\"}]', {}]\n\n  # Preserved from stock.\n  - [\"k_apparent\", \"i\", 1750000, {}]\n  - [\"max_power\", \"i\", 1800, {}]\n\n  # Deprecated settings, only kept to enable migration.\n  - [\"sw.persist_state\", \"b\", false, {}]  # Since cfg v1\n  - [\"ssw\", \"o\", {abstract: true}]\n  - [\"ssw.name\", \"s\", \"\", {}]\n  - [\"ssw.in_mode\", \"i\", 0, {}]\n\n  #abstract for calibration type\n  - [\"gains\", \"o\", {title: \"\", abstract: true}]\n  - [\"gains.avgain\", \"f\", 4194304, {title: \"\"}] #default register values are 0x40000\n  - [\"gains.aigain\", \"f\", 4194304, {title: \"\"}]\n  - [\"gains.awgain\", \"f\", 4194304, {title: \"\"}]\n  - [\"gains.phcala\", \"f\", 0, {title: \"Sign magnitude 10bit value. register is 16 bit, value coming from cal seems to have sign in 22 bit (1 << 22)\"}]\n  - [\"gains.bvgain\", \"f\", 4194304, {title: \"\"}]\n  - [\"gains.bigain\", \"f\", 4194304, {title: \"\"}]\n  - [\"gains.bwgain\", \"f\", 4194304, {title: \"\"}]\n  - [\"gains.phcalb\", \"f\", 0, {title: \"\"}]\n\nbuild_vars:\n  # BLE disabled for most models.\n  MGOS_HAP_BLE: 0\n  # Enables storing setup info in the config and a simple RPC service to configure it.\n  MGOS_HAP_SIMPLE_CONFIG: 1\n  MGOS_FW_EXTRA_ATTRS: shelly_hk_model=${build_vars.MODEL}\n\ncdefs:\n  PRODUCT_VENDOR: Allterco\n  PRODUCT_MODEL: ${build_vars.MODEL}\n  LED_GPIO: -1\n  LED_ON: 0\n  BTN_GPIO: -1\n  BTN_DOWN: 0\n  BTN_NOISY: 1\n  RST_GPIO_INIT: -1\n  SHELLY_HAVE_DUAL_INPUT_MODES: 0\n  MAX_NUM_HAP_SESSIONS: 12\n\nlibs:\n  - location: ./libreset\n  - location: https://github.com/markirb/core\n  - location: https://github.com/mongoose-os-libs/file-logger\n  - location: https://github.com/mongoose-os-libs/homekit-adk\n  - location: https://github.com/mongoose-os-libs/http-server\n  - location: https://github.com/mongoose-os-libs/ota-http-server\n  - location: https://github.com/mongoose-os-libs/rpc-service-config\n  - location: https://github.com/mongoose-os-libs/rpc-service-fs\n  - location: https://github.com/mongoose-os-libs/rpc-uart\n  - location: https://github.com/mongoose-os-libs/rpc-ws\n  - location: https://github.com/mongoose-os-libs/sntp\n  # Not enough space on 2.5\n  # - location: https://github.com/mongoose-os-libs/rpc-mqtt\n  # - location: https://github.com/mongoose-os-libs/rpc-service-ota\n\nconds:\n  - when: mos.platform == \"esp32c3\"\n    apply:\n      libs:\n        - location: https://github.com/markirb/adc\n  - when: mos.platform == \"esp32\"\n    apply:\n      libs:\n        - location: https://github.com/mongoose-os-libs/adc\n        - location: https://github.com/mongoose-os-libs/pwm\n\n  - when: mos.platform == \"esp8266\"\n    apply:\n      libs:\n        - location: https://github.com/mongoose-os-libs/adc\n        - location: https://github.com/mongoose-os-libs/pwm\n\n  - when: mos.platform != \"ubuntu\"\n    apply:\n      sources:\n        - src/noisy_input_pin\n        - src/wifi_config\n      config_schema:\n        - [\"wifi.ap.pass\", \"\"]\n        - [\"wifi.ap.ip\", \"192.168.33.1\"]\n        - [\"wifi.ap.gw\", \"\"]\n        - [\"wifi.ap.dhcp_start\", \"192.168.33.2\"]\n        - [\"wifi.ap.dhcp_end\", \"192.168.33.100\"]\n        - [\"wifi.sta_connect_timeout\", 15]\n        - [\"wifi.sta_roam_rssi_thr\", -80]\n        - [\"wifi.sta_roam_interval\", 600]\n        - [\"wifi.ap.keep_enabled\", \"b\", false, {title: \"Keep WiFi AP enabled even when STA is connected\"}]\n        # This is a mitigation for devices dropping of wifi and never coming back.\n        # This is believed to be fixed, default has been flipped back to 0 in 2.11.0.\n        # Consider removing in later releases.\n        - [\"shelly.wifi_connect_reboot_timeout\", \"i\", 0, {title: \"If not connected for this long when supposed to be, reboot\"}]\n      libs:\n        - location: https://github.com/mongoose-os-libs/wifi\n      cdefs:\n        # Size fine-tuning, saves substantial amount of RAM vs defaults.\n        HAP_SESSION_SIZE: 392\n        HAP_IP_SESSION_SIZE: 600\n        # XXX: fix size calculation with and without BLE\n        XHAP_ACCESSORY_SERVER_SIZE: 1680\n        HAP_LOG_LEVEL: 0             # This saves 36K on esp8266.\n        HAP_TLV_NO_LOG: 1            # Saves us stack\n        HAP_DISABLE_ASSERTS: 1       # 32K\n        HAP_DISABLE_PRECONDITIONS: 1 # 40K\n\n  - when: mos.platform == \"esp32\"\n    apply:\n      config_schema:\n        - [\"wifi.sta_ps_mode\", 1]\n      build_vars:\n        MGOS_ROOT_FS_TYPE: LFS\n        MGOS_ROOT_FS_SIZE: 0x60000\n        APP_SLOT_SIZE: 0x190000\n\n  - when: build_vars.MODEL == \"Shelly1\"\n    apply:\n      name: switch1 # To allow OTA from stock fw.\n      sources:\n        - src/DS18XXX\n        - src/DHT\n      libs:\n        - location: https://github.com/mongoose-os-libs/onewire\n        - location: https://github.com/mongoose-os-libs/dht\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x1000  # To be compatible with stock firmware.\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHSW-1\n        # We don't use SSL, HomeKit uses its own crypto. This saves ~120K.\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"device.id\", \"shelly1-??????\"]\n        - [\"shelly.name\", \"shelly1-??????\"]\n        - [\"wifi.ap.ssid\", \"shelly1-??????\"]\n        - [\"ts1\", \"ts\", {title: \"TS1 settings\"}]\n        - [\"ts1.name\", \"Shelly TS1\"]\n        - [\"ts2\", \"ts\", {title: \"TS2 settings\"}]\n        - [\"ts2.name\", \"Shelly TS2\"]\n        - [\"ts3\", \"ts\", {title: \"TS3 settings\"}]\n        - [\"ts3.name\", \"Shelly TS3\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        - [\"gdo1.open_sensor_mode\", 2]\n        # Only for backward compatibility (config <= v3).\n        - [\"ssw1\", \"ssw\", {title: \"SSW1 settings\"}]\n        - [\"ssw1.name\", \"Input\"]\n\n  - when: build_vars.MODEL == \"Shelly1L\"\n    apply:\n      name: switch1l # To allow OTA from stock fw.\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x1000  # To be compatible with stock firmware.\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 13\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHSW-L\n        # We don't use SSL, HomeKit uses its own crypto. This saves ~120K.\n        MG_ENABLE_SSL: 0\n        SHELLY_HAVE_DUAL_INPUT_MODES: 1\n      config_schema:\n        - [\"device.id\", \"shelly1l-??????\"]\n        - [\"shelly.name\", \"shelly1l-??????\"]\n        - [\"wifi.ap.ssid\", \"shelly1l-??????\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        # Only for backward compatibility (config <= v3).\n        - [\"ssw1\", \"ssw\", {title: \"SSW1 settings\"}]\n        - [\"ssw1.name\", \"Input 1\"]\n        - [\"ssw2\", \"ssw\", {title: \"SSW2 settings\"}]\n        - [\"ssw2.name\", \"Input 2\"]\n\n  - when: build_vars.MODEL == \"Shelly1PM\"\n    apply:\n      name: switch1pm # To allow OTA from stock fw.\n      sources:\n        - src/DS18XXX\n        - src/DHT\n      libs:\n        - location: https://github.com/mongoose-os-libs/onewire\n        - location: https://github.com/mongoose-os-libs/dht\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x1000  # To be compatible with stock firmware.\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 2\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHSW-PM\n        # We don't use SSL, HomeKit uses its own crypto. This saves ~120K.\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"device.id\", \"shelly1pm-??????\"]\n        - [\"shelly.name\", \"shelly1pm-??????\"]\n        - [\"wifi.ap.ssid\", \"shelly1pm-??????\"]\n        - [\"sw1\", \"sw\", {title: \"SW settings\"}]\n        - [\"sw1.name\", \"Shelly SW\"]\n        - [\"ts1\", \"ts\", {title: \"TS1 settings\"}]\n        - [\"ts1.name\", \"Shelly TS1\"]\n        - [\"ts2\", \"ts\", {title: \"TS2 settings\"}]\n        - [\"ts2.name\", \"Shelly TS2\"]\n        - [\"ts3\", \"ts\", {title: \"TS3 settings\"}]\n        - [\"ts3.name\", \"Shelly TS3\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        - [\"gdo1.open_sensor_mode\", 2]\n        - [\"bl0937.power_coeff\", \"f\", 0, {title: \"BL0937 counts -> watts conversion coefficient\"}]\n        - [\"bl0937.power_coeff\", 1.79942025]  # (16 + 1010 + 1935) / (8.53 + 561 + 1076)\n        # Only for backward compatibility (config <= v3).\n        - [\"ssw1\", \"ssw\", {title: \"SSW1 settings\"}]\n        - [\"ssw1.name\", \"Input\"]\n\n  - when: build_vars.MODEL == \"Shelly2\"\n    apply:\n      name: switch\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x1000\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHSW-21\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"device.id\", \"shellyswitch21-??????\"]\n        - [\"shelly.name\", \"shellyswitch21-??????\"]\n        - [\"wifi.ap.ssid\", \"shellyswitch21-??????\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW1\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"sw2\", \"sw\", {title: \"SW2 settings\"}]\n        - [\"sw2.name\", \"Shelly SW2\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        # Only for backward compatibility (config <= v3).\n        - [\"ssw1\", \"ssw\", {title: \"SSW1 settings\"}]\n        - [\"ssw1.name\", \"Input 1\"]\n        - [\"ssw2\", \"ssw\", {title: \"SSW2 settings\"}]\n        - [\"ssw2.name\", \"Input 2\"]\n\n  - when: build_vars.MODEL == \"Shelly25\"\n    apply:\n      name: switch25\n      sources:\n        - src/ADE7953\n      includes:\n        - src/ADE7953\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n        - location: https://github.com/mongoose-os-libs/ade7953\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x1000\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 2\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"2.5\"\n        STOCK_FW_MODEL: SHSW-25\n        MG_ENABLE_SSL: 0\n        SHELLY_HAVE_PM: 1\n      config_schema:\n        - [\"device.id\", \"shellyswitch25-??????\"]\n        - [\"shelly.name\", \"shellyswitch25-??????\"]\n        - [\"wifi.ap.ssid\", \"shellyswitch25-??????\"]\n        - [\"i2c.enable\", true]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW1\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"sw2\", \"sw\", {title: \"SW2 settings\"}]\n        - [\"sw2.name\", \"Shelly SW2\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"wc1\", \"wc\", {title: \"WC1 settings\"}]\n        - [\"wc1.name\", \"Window 1\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        # Only for backward compatibility (config <= v3).\n        - [\"ssw1\", \"ssw\", {title: \"SSW1 settings\"}]\n        - [\"ssw1.name\", \"Input 1\"]\n        - [\"ssw2\", \"ssw\", {title: \"SSW2 settings\"}]\n        - [\"ssw2.name\", \"Input 2\"]\n\n  - when: build_vars.MODEL == \"ShellyColorBulb\"\n    apply:\n      name: color-bulb # To allow OTA from stock fw.\n      libs:\n        - origin: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x1000  # To be compatible with stock firmware.\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        PWM_SUPPORT: 1\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHCB-1\n        # We don't use SSL, HomeKit uses its own crypto. This saves ~120K.\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"shelly.mode\", 4] # 4 - RGBW\"\n        - [\"device.id\", \"shellycolorbulb-??????\"]\n        - [\"shelly.name\", \"shellycolorbulb-??????\"]\n        - [\"wifi.ap.ssid\", \"shellycolorbulb-??????\"]\n        - [\"lb1\", \"lb\", {title: \"RGBW \"}]\n        - [\"lb1.initial_state\", 2] # last\n\n  - when: build_vars.MODEL == \"ShellyDuo\"\n    apply:\n      name: bulbduo # To allow OTA from stock fw.\n      libs:\n        - origin: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHBDUO-1\n        # We don't use SSL, HomeKit uses its own crypto. This saves ~120K.\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"device.id\", \"ShellyBulbDuo-??????\"]\n        - [\"shelly.name\", \"ShellyBulbDuo-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyBulbDuo-??????\"]\n        - [\"lb1\", \"lb\", {title: \"Light bulb settings\"}]\n        - [\"lb1.initial_state\", 2] # last\n\n  - when: build_vars.MODEL == \"ShellyI3\"\n    apply:\n      name: ix3\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x1000\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHIX3-1\n        MG_ENABLE_SSL: 0\n        LED_GPIO: 5\n        LED_ON: 0\n        BTN_GPIO: 4\n        BTN_DOWN: 0\n      config_schema:\n        - [\"device.id\", \"shellyix3-????????????\"]\n        - [\"wifi.ap.ssid\", \"shellyix3-????????????\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Input 1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Input 2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"in3\", \"in\", {title: \"Input 3 settings\"}]\n        - [\"in3.ssw.name\", \"Input 3\"]\n        - [\"in3.sensor.name\", \"Shelly S3\"]\n        # Only for backward compatibility (config <= v3).\n        - [\"ssw1\", \"ssw\", {title: \"SSW1 settings\"}]\n        - [\"ssw1.name\", \"Input 1\"]\n        - [\"ssw2\", \"ssw\", {title: \"SSW2 settings\"}]\n        - [\"ssw2.name\", \"Input 2\"]\n        - [\"ssw3\", \"ssw\", {title: \"SSW3 settings\"}]\n        - [\"ssw3.name\", \"Input 3\"]\n\n  # Note this is also known as \"ShellyPlug 2\", as opposed to the original Plug\n  # which was based on CC3200. However, that one is long gone and we can ignore it.\n  - when: build_vars.MODEL == \"ShellyPlug\"\n    apply:\n      name: shelly-plug2 # To allow OTA from stock fw.\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        # Note: 4 MB flash chip\n        FS_SIZE: 262144\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        LED_GPIO: 13  # Green, 14 red, 16 blue.\n        LED_ON: 0\n        BTN_GPIO: 12\n        BTN_DOWN: 1\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHPLG2-1\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"device.id\", \"shellyplug-??????\"]\n        - [\"shelly.name\", \"shellyplug-??????\"]\n        - [\"wifi.ap.ssid\", \"shellyplug-??????\"]\n        - [\"sw1\", \"sw\", {title: \"Plug settings\"}]\n        - [\"sw1.name\", \"Shelly Plug\"]\n        - [\"sw1.in_mode\", -1]\n        - [\"sw1.svc_type\", 1]  # Outlet\n        - [\"sw1.initial_state\", 2]\n        - [\"bl0937.power_coeff\", \"f\", 0, {title: \"BL0937 counts -> watts conversion coefficient\"}]\n        - [\"bl0937.power_coeff\", 8.59980831]  # (16 + 1010 + 1935) / (2.01 + 117.3 + 225)\n\n  - when: build_vars.MODEL == \"ShellyPlugS\"\n    apply:\n      name: shelly-plug-s # To allow OTA from stock fw.\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x7000  # To be compatible with stock firmware.\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        LED_GPIO: 2  # Blue, 0 red.\n        LED_ON: 0\n        BTN_GPIO: 13\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHPLG-S\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"device.id\", \"shellyplug-s-??????\"]\n        - [\"shelly.name\", \"shellyplug-s-??????\"]\n        - [\"wifi.ap.ssid\", \"shellyplug-s-??????\"]\n        - [\"sw1\", \"sw\", {title: \"Plug settings\"}]\n        - [\"sw1.name\", \"Shelly Plug S\"]\n        - [\"sw1.in_mode\", -1]\n        - [\"sw1.svc_type\", 1]  # Outlet\n        - [\"sw1.initial_state\", 2]\n        - [\"sw1.state_led_en\", 1]\n        - [\"bl0937.power_coeff\", \"f\", 0, {title: \"BL0937 counts -> watts conversion coefficient\"}]\n        - [\"bl0937.power_coeff\", 1.64358469]  # (16 + 1010 + 1935) / (9.55 + 617 + 1175)\n\n  - when: build_vars.MODEL == \"ShellyPlusPlugS\"\n    apply:\n      name: PlusPlugS\n      build_vars:\n        ESP_IDF_EXTRA_PARTITION: \"aux,0x55,0x00,0x3f0000,48K\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x3fc000,16K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n      cdefs:\n        LED_GPIO: 25\n        LED_ON: 1\n        BTN_GPIO: 9\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"2.0.0\"\n        STOCK_FW_MODEL: PlusPlugS\n        MAX_NUM_HAP_SESSIONS: 16\n      config_schema:\n        - [\"device.id\", \"shellyplusplug-s-??????\"]\n        - [\"shelly.name\", \"shellyplusplug-s-??????\"]\n        - [\"wifi.ap.ssid\", \"shellyplusplug-s-??????\"]\n        - [\"sw1\", \"sw\", {title: \"Plug settings\"}]\n        - [\"sw1.name\", \"Shelly Plus Plug S\"]\n        - [\"sw1.in_mode\", -1]\n        - [\"sw1.svc_type\", 1]  # Outlet\n        - [\"sw1.initial_state\", 2]\n        - [\"sw1.state_led_en\", 1]\n        - [\"bl0937.power_coeff\", \"f\", 0, {title: \"BL0937 counts -> watts conversion coefficient\"}]\n        - [\"bl0937.power_coeff\", 1.64358469]  # (16 + 1010 + 1935) / (9.55 + 617 + 1175)\n\n  - when: build_vars.MODEL == \"ShellyPlusRGBWPM\"\n    apply:\n      name: PlusRGBWPM\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n      sources:\n        - src/ShellyRGBW2\n      build_vars:\n        ESP_IDF_EXTRA_PARTITION: \"aux,0x55,0x00,0x3f0000,48K\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x3fc000,16K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n      cdefs:\n        LED_GPIO: 14\n        LED_ON: 0\n        BTN_GPIO: 22\n        BTN_DOWN: 1\n        GPIO_R: 25\n        GPIO_G: 26\n        GPIO_B: 27\n        GPIO_W: 4\n        GPIO_I1: 36\n        GPIO_I2: 37\n        GPIO_I3: 38\n        GPIO_I4: 39\n        PRODUCT_HW_REV: \"0.1.6\"\n        STOCK_FW_MODEL: PlusRGBWPM\n        MAX_NUM_HAP_SESSIONS: 16\n      config_schema:\n        - [\"device.id\", \"ShellyPlusRGBWPM-??????\"]\n        - [\"shelly.name\", \"ShellyPlusRGBWPM-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyPlusRGBWPM-??????\"]\n\n        - [\"lb1\", \"lb\", {title: \"Light 1 settings\"}]\n        - [\"lb2\", \"lb\", {title: \"Light 2 settings\"}]\n        - [\"lb3\", \"lb\", {title: \"Light 3 settings\"}]\n        - [\"lb4\", \"lb\", {title: \"Light 4 settings\"}]\n\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"in3\", \"in\", {title: \"Input 3 settings\"}]\n        - [\"in3.ssw.name\", \"Shelly SSW3\"]\n        - [\"in3.sensor.name\", \"Shelly S3\"]\n        - [\"in4\", \"in\", {title: \"Input 4 settings\"}]\n        - [\"in4.ssw.name\", \"Shelly SSW4\"]\n        - [\"in4.sensor.name\", \"Shelly S4\"]\n\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW1\"]\n        - [\"sw2\", \"sw\", {title: \"SW2 settings\"}]\n        - [\"sw2.name\", \"Shelly SW2\"]\n        - [\"sw3\", \"sw\", {title: \"SW3 settings\"}]\n        - [\"sw3.name\", \"Shelly SW3\"]\n        - [\"sw4\", \"sw\", {title: \"SW4 settings\"}]\n        - [\"sw4.name\", \"Shelly SW4\"]\n\n  - when: build_vars.MODEL == \"ShellyPlus1PMMini\"\n    apply:\n      name: Plus1PMMini\n      sources:\n        - src/ShellyMini1PMGen3\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n      build_vars:\n        MGOS_ROOT_FS_SIZE: 0x60000\n        APP_SLOT_SIZE: 0x190000\n        ESP_IDF_EXTRA_PARTITION: \"aux,0x55,0x00,0x3f0000,48K\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x3fc000,16K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n            CONFIG_PARTITION_TABLE_CUSTOM_FILENAME=\\\"../esp32xx/partitions_mgos.csv\\\"\n            CONFIG_PARTITION_TABLE_FILENAME=\\\"../esp32xx/partitions_mgos.csv\\\"\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 1\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"0.1.0\"\n        STOCK_FW_MODEL: Plus1PMMini\n        MAX_NUM_HAP_SESSIONS: 16\n      config_schema:\n        - [\"device.id\",    \"ShellyPlus1PMMini-??????\"]\n        - [\"shelly.name\",  \"ShellyPlus1PMMini-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyPlus1PMMini-??????\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        - [\"gdo1.open_sensor_mode\", 2]\n\n  - when: build_vars.MODEL == \"ShellyMini1PMGen3\"\n    apply:\n      name: Mini1PMG3\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n      build_vars:\n        OTA_DATA_ADDR: 0x10000\n        OTA_DATA_SIZE: 0x4000\n        NVS_ADDR: 0x14000\n        NVS_SIZE: 0xC000\n        APP_OFFSET: 0x20000\n        APP_SLOT_SIZE: 0x280000\n        MGOS_ROOT_FS_TYPE: LFS\n        MGOS_ROOT_FS_SIZE: 1048576\n        ESP_IDF_EXTRA_PARTITION: \"scratch,data,0x80,0x720000,0x80000,encrypted\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x7F0000,64K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n            CONFIG_ESPTOOLPY_FLASHSIZE_8MB=y\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 1\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"0.1.0\"\n        STOCK_FW_MODEL: Mini1PMG3\n        MAX_NUM_HAP_SESSIONS: 16\n      config_schema:\n        - [\"device.id\", \"ShellyMini1PMG3-??????\"]\n        - [\"shelly.name\", \"ShellyMini1PMG3-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyMini1PMG3-??????\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        - [\"gdo1.open_sensor_mode\", 2]\n\n  - when: build_vars.MODEL == \"ShellyMini1Gen3\"\n    apply:\n      name: Mini1G3\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n      build_vars:\n        OTA_DATA_ADDR: 0x10000\n        OTA_DATA_SIZE: 0x4000\n        NVS_ADDR: 0x14000\n        NVS_SIZE: 0xC000\n        APP_OFFSET: 0x20000\n        APP_SLOT_SIZE: 0x280000\n        MGOS_ROOT_FS_TYPE: LFS\n        MGOS_ROOT_FS_SIZE: 1048576\n        ESP_IDF_EXTRA_PARTITION: \"scratch,data,0x80,0x720000,0x80000,encrypted\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x7F0000,64K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n            CONFIG_ESPTOOLPY_FLASHSIZE_8MB=y\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 1\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"0.1.0\"\n        STOCK_FW_MODEL: Mini1G3\n        MAX_NUM_HAP_SESSIONS: 16\n      config_schema:\n        - [\"device.id\", \"ShellyMini1G3-??????\"]\n        - [\"shelly.name\", \"ShellyMini1G3-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyMini1G3-??????\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        - [\"gdo1.open_sensor_mode\", 2]\n\n  - when: build_vars.MODEL == \"ShellyPlus1Mini\"\n    apply:\n      name: Plus1Mini\n      sources:\n        - src/ShellyMini1Gen3\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n      build_vars:\n        MGOS_ROOT_FS_TYPE: LFS\n        MGOS_ROOT_FS_SIZE: 0x60000\n        APP_SLOT_SIZE: 0x190000\n        ESP_IDF_EXTRA_PARTITION: \"aux,0x55,0x00,0x3f0000,48K\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x3fc000,16K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n            CONFIG_PARTITION_TABLE_CUSTOM_FILENAME=\\\"../esp32xx/partitions_mgos.csv\\\"\n            CONFIG_PARTITION_TABLE_FILENAME=\\\"../esp32xx/partitions_mgos.csv\\\"\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 1\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"0.1.6\"\n        STOCK_FW_MODEL: Plus1Mini\n        MAX_NUM_HAP_SESSIONS: 16\n      config_schema:\n        - [\"device.id\", \"ShellyPlus1Mini-??????\"]\n        - [\"shelly.name\", \"ShellyPlus1Mini-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyPlus1Mini-??????\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        - [\"gdo1.open_sensor_mode\", 2]\n\n  - when: build_vars.MODEL == \"ShellyPlus1\"\n    apply:\n      name: Plus1\n      sources:\n        - src/DS18XXX\n        - src/DHT\n      libs:\n        - location: https://github.com/mongoose-os-libs/onewire\n        - location: https://github.com/mongoose-os-libs/dht\n        - location: https://github.com/mongoose-os-libs/mongoose\n      build_vars:\n        ESP_IDF_EXTRA_PARTITION: \"aux,0x55,0x00,0x3f0000,48K\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x3fc000,16K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 25\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"0.1.6\"\n        STOCK_FW_MODEL: Plus1\n        MAX_NUM_HAP_SESSIONS: 16\n      config_schema:\n        - [\"device.id\", \"ShellyPlus1-??????\"]\n        - [\"shelly.name\", \"ShellyPlus1-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyPlus1-??????\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        - [\"gdo1.open_sensor_mode\", 2]\n        # Only for backward compatibility (config <= v3).\n        - [\"ssw1\", \"ssw\", {title: \"SSW1 settings\"}]\n        - [\"ssw1.name\", \"Input\"]\n        - [\"ts1\", \"ts\", {title: \"TS1 settings\"}]\n        - [\"ts1.name\", \"Shelly TS1\"]\n        - [\"ts2\", \"ts\", {title: \"TS2 settings\"}]\n        - [\"ts2.name\", \"Shelly TS2\"]\n        - [\"ts3\", \"ts\", {title: \"TS3 settings\"}]\n        - [\"ts3.name\", \"Shelly TS3\"]\n        - [\"ts4\", \"ts\", {title: \"TS4 settings\"}]\n        - [\"ts4.name\", \"Shelly TS4\"]\n        - [\"ts5\", \"ts\", {title: \"TS5 settings\"}]\n        - [\"ts5.name\", \"Shelly TS5\"]\n\n  - when: build_vars.MODEL == \"ShellyPlus1PM\"\n    apply:\n      name: Plus1PM\n      sources:\n        - src/DS18XXX\n        - src/DHT\n      libs:\n        - location: https://github.com/mongoose-os-libs/onewire\n        - location: https://github.com/mongoose-os-libs/dht\n        - location: https://github.com/mongoose-os-libs/mongoose\n      build_vars:\n        ESP_IDF_EXTRA_PARTITION: \"aux,0x55,0x00,0x3f0000,48K\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x3fc000,16K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 25\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"0.1.6\"\n        STOCK_FW_MODEL: Plus1PM\n        MAX_NUM_HAP_SESSIONS: 16\n      config_schema:\n        - [\"device.id\", \"ShellyPlus1PM-??????\"]\n        - [\"shelly.name\", \"ShellyPlus1PM-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyPlus1PM-??????\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        - [\"gdo1.open_sensor_mode\", -1]\n        # Calibration values from stock\n        - [\"bl0937_0\", \"o\", {title: \"BL0937 calibration\"}]\n        - [\"bl0937_0.apower_scale\", \"f\", 2.028531, {title: \"BL0937 apower scale\"}]\n        - [\"bl0937_0.voltage_scale\", \"f\", 0.15510, {title: \"BL0937 voltage scale\"}]\n        - [\"bl0937_0.current_scale\", \"f\", 0.01287, {title: \"BL0937 current scale\"}]\n        # Only for backward compatibility (config <= v3).\n        - [\"ssw1\", \"ssw\", {title: \"SSW1 settings\"}]\n        - [\"ssw1.name\", \"Input\"]\n        - [\"ts1\", \"ts\", {title: \"TS1 settings\"}]\n        - [\"ts1.name\", \"Shelly TS1\"]\n        - [\"ts2\", \"ts\", {title: \"TS2 settings\"}]\n        - [\"ts2.name\", \"Shelly TS2\"]\n        - [\"ts3\", \"ts\", {title: \"TS3 settings\"}]\n        - [\"ts3.name\", \"Shelly TS3\"]\n        - [\"ts4\", \"ts\", {title: \"TS4 settings\"}]\n        - [\"ts4.name\", \"Shelly TS4\"]\n        - [\"ts5\", \"ts\", {title: \"TS5 settings\"}]\n        - [\"ts5.name\", \"Shelly TS5\"]\n\n  - when: build_vars.MODEL == \"ShellyPlus2PM\"\n    apply:\n      name: Plus2PM\n      sources:\n        - src/DS18XXX\n        - src/DHT\n        - src/ADE7953\n      includes:\n        - src/ADE7953\n      libs:\n        - location: https://github.com/mongoose-os-libs/onewire\n        - location: https://github.com/mongoose-os-libs/dht\n        - location: https://github.com/mongoose-os-libs/ade7953\n      build_vars:\n        ESP_IDF_EXTRA_PARTITION: \"aux,0x55,0x00,0x3f0000,48K\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x3fc000,16K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 4\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"0.1.9\"\n        STOCK_FW_MODEL: Plus2PM\n        MAX_NUM_HAP_SESSIONS: 16\n        SHELLY_HAVE_PM: 1\n        MGOS_CONFIG_DEV_6: \"shelly\"\n        MGOS_CONFIG_DEV_7: \"shelly,4096\"\n      config_schema:\n        - [\"device.id\", \"ShellyPlus2PM-??????\"]\n        - [\"shelly.name\", \"ShellyPlus2PM-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyPlus2PM-??????\"]\n        - [\"i2c.enable\", true]\n        - [\"i2c.sda_gpio\", 33]\n        - [\"i2c.scl_gpio\", 25]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW1\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"sw2\", \"sw\", {title: \"SW2 settings\"}]\n        - [\"sw2.name\", \"Shelly SW2\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"in3\", \"in\", {title: \"Input 3 settings\"}]\n        - [\"in3.ssw.name\", \"Shelly SSW3\"]\n        - [\"in3.sensor.name\", \"Shelly S3\"]\n        - [\"wc1\", \"wc\", {title: \"WC1 settings\"}]\n        - [\"wc1.name\", \"Window 1\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n        - [\"ts1\", \"ts\", {title: \"TS1 settings\"}]\n        - [\"ts1.name\", \"Shelly TS1\"]\n        - [\"ts2\", \"ts\", {title: \"TS2 settings\"}]\n        - [\"ts2.name\", \"Shelly TS2\"]\n        - [\"ts3\", \"ts\", {title: \"TS3 settings\"}]\n        - [\"ts4\", \"ts\", {title: \"TS4 settings\"}]\n        - [\"ts4.name\", \"Shelly TS4\"]\n        - [\"ts5\", \"ts\", {title: \"TS5 settings\"}]\n        - [\"ts5.name\", \"Shelly TS5\"]\n        # Only for backward compatibility (config <= v3).\n        - [\"ssw1\", \"ssw\", {title: \"SSW1 settings\"}]\n        - [\"ssw1.name\", \"Input 1\"]\n        - [\"ssw2\", \"ssw\", {title: \"SSW2 settings\"}]\n        - [\"ssw2.name\", \"Input 2\"]\n\n        #factory config saved at 0x1000 in shelly partition\n        - [\"factory\", \"o\", {title: \"\"}]\n        - [\"factory.batch\", \"s\", \"\", {title: \"\"}]\n        - [\"factory.model\", \"s\", \"\", {title: \"\"}]\n        - [\"factory.version\", \"i\", 0, {title: \"\"}]\n        - [\"factory.calib\", \"o\", {title: \"Factory calib settings\"}]\n        - [\"factory.calib.done\", \"b\", false, {title: \"\"}]\n        - [\"factory.calib.gains0\", \"gains\", {title: \"\"}]\n\n  - when: build_vars.MODEL == \"ShellyPlusI4\"\n    apply:\n      name: PlusI4\n      sources:\n        - src/DS18XXX\n        - src/DHT\n      libs:\n        - location: https://github.com/mongoose-os-libs/onewire\n        - location: https://github.com/mongoose-os-libs/dht\n      build_vars:\n        ESP_IDF_EXTRA_PARTITION: \"aux,0x55,0x00,0x3f0000,48K\"\n        ESP_IDF_EXTRA_PARTITION_2: \"shelly,data,0x88,0x3fc000,16K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 25\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"0.1.6\"\n        STOCK_FW_MODEL: PlusI4\n        MAX_NUM_HAP_SESSIONS: 16\n      config_schema:\n        - [\"device.id\", \"ShellyPlusI4-??????\"]\n        - [\"shelly.name\", \"ShellyPlusI4-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyPlusI4-????????????\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"in3\", \"in\", {title: \"Input 3 settings\"}]\n        - [\"in3.ssw.name\", \"Shelly SSW3\"]\n        - [\"in3.sensor.name\", \"Shelly S3\"]\n        - [\"in4\", \"in\", {title: \"Input 4 settings\"}]\n        - [\"in4.ssw.name\", \"Shelly SSW4\"]\n        - [\"in4.sensor.name\", \"Shelly S4\"]\n        - [\"ts1\", \"ts\", {title: \"TS1 settings\"}]\n        - [\"ts1.name\", \"Shelly TS1\"]\n        - [\"ts2\", \"ts\", {title: \"TS2 settings\"}]\n        - [\"ts2.name\", \"Shelly TS2\"]\n        - [\"ts3\", \"ts\", {title: \"TS3 settings\"}]\n        - [\"ts3.name\", \"Shelly TS3\"]\n        - [\"ts4\", \"ts\", {title: \"TS4 settings\"}]\n        - [\"ts4.name\", \"Shelly TS4\"]\n        - [\"ts5\", \"ts\", {title: \"TS5 settings\"}]\n        - [\"ts5.name\", \"Shelly TS5\"]\n\n  - when: build_vars.MODEL == \"ShellyRGBW2\"\n    apply:\n      name: rgbw2-color # To allow OTA from stock fw.\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x7000  # To be compatible with stock firmware.\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        GPIO_R: 12\n        GPIO_G: 15\n        GPIO_B: 14\n        GPIO_W: 4\n        GPIO_I1: 5\n        LED_GPIO: 2\n        LED_ON: 0\n        BTN_GPIO: 13\n        BTN_DOWN: 0\n        BTN_NOISY: 0\n        RST_GPIO_INIT: 15 # reset GPIO 15 to prevent green flash on startup\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHRGBW2-color\n        # We don't use SSL, HomeKit uses its own crypto. This saves ~120K.\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"shelly.mode\", 3] # 0 - Default (4 Switches), 3 - RGB, 4 - RGBW, 5 - RGB+W, 6 - CCT, 7 - White\n        - [\"device.id\", \"shellyrgbw2-??????\"]\n        - [\"shelly.name\", \"shellyrgbw2-??????\"]\n        - [\"wifi.ap.ssid\", \"shellyrgbw2-??????\"]\n        - [\"lb1\", \"lb\", {title: \"Light 1 settings\"}]\n        - [\"lb2\", \"lb\", {title: \"Light 2 settings\"}]\n        - [\"lb2.initial_state\", 2] #input only available to lb1\n        - [\"lb3\", \"lb\", {title: \"Light 3 settings\"}]\n        - [\"lb3.initial_state\", 2] #input only available to lb1\n        - [\"lb4\", \"lb\", {title: \"Light 4 settings\"}]\n        - [\"lb4.initial_state\", 2] #input only available to lb1\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n\n  - when: build_vars.MODEL == \"ShellyUNI\"\n    apply:\n      name: uni\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n        - location: https://github.com/mongoose-os-libs/ade7953\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        BOOT_CONFIG_ADDR: 0x1000\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        LED_GPIO: 0\n        LED_ON: 0\n        BTN_GPIO: 2\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHUNI-1\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"device.id\", \"shellyuni-????????????\"]\n        - [\"shelly.name\", \"shellyuni-????????????\"]\n        - [\"wifi.ap.ssid\", \"shellyuni-????????????\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"Shelly SW1\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"sw2\", \"sw\", {title: \"SW2 settings\"}]\n        - [\"sw2.name\", \"Shelly SW2\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"Shelly SSW2\"]\n        - [\"in2.sensor.name\", \"Shelly S2\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"Garage Door\"]\n\n  - when: build_vars.MODEL == \"ShellyVintage\"\n    apply:\n      name: bulb6w # To allow OTA from stock fw.\n      libs:\n        - origin: https://github.com/mongoose-os-libs/mongoose\n          variant: esp8266-nossl\n      build_vars:\n        FLASH_SIZE: 2097152\n        FS_SIZE: 262144\n        MGOS_ROOT_FS_TYPE: SPIFFS\n      cdefs:\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: SHVIN-1\n        # We don't use SSL, HomeKit uses its own crypto. This saves ~120K.\n        MG_ENABLE_SSL: 0\n      config_schema:\n        - [\"device.id\", \"ShellyVintage-??????\"]\n        - [\"shelly.name\", \"ShellyVintage-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyVintage-??????\"]\n        - [\"lb1\", \"lb\", {title: \"Light bulb settings\"}]\n        - [\"lb1.initial_state\", 2] # last\n\n  # Test device for BLE development.\n  - when: build_vars.MODEL == \"ShellyT32\"\n    apply:\n      libs:\n        # adding bt-common enables BLE support at compile time\n        #- origin: https://github.com/mongoose-os-libs/bt-common\n        #- origin: https://github.com/mongoose-os-libs/ethernet\n      build_vars:\n        APP_SLOT_SIZE: 0x1b0000\n        MGOS_HAP_BLE: 1\n        MGOS_ROOT_FS_TYPE: LFS\n        ESP_IDF_EXTRA_PARTITION: \"aux,data,0x88,0x3f0000,48K,encrypted\"\n        ESP_IDF_SDKCONFIG_OPTS: >\n          ${build_vars.ESP_IDF_SDKCONFIG_OPTS}\n            CONFIG_FREERTOS_UNICORE=y\n            CONFIG_ESPTOOLPY_FLASHMODE_DIO=y\n      cdefs:\n        LED_GPIO: 13\n        LED_ON: 1\n        BTN_GPIO: 34\n        BTN_DOWN: 0\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: XXX\n        SHELLY_HAVE_PM: 0\n        BTN_NOISY: 0\n        MGOS_CONFIG_DEV_3: '\"aux\"'\n      config_schema:\n        # - [\"bt.enable\", true]\n        - [\"bt.adv_enable\", false] # ADK controls advertisement.\n        - [\"bt.keep_enabled\", true]\n        - [\"device.id\", \"ShellyT32-????\"]\n        - [\"shelly.name\", \"ShellyT32-????\"]\n        - [\"wifi.ap.ssid\", \"ShellyT32-??????\"]\n        - [\"sw1\", \"sw\", {\"title\": \"SW settings\"}]\n        - [\"sw1.name\", \"SWT32\"]\n        - [\"sw1.in_mode\", 0]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"SSWT32\"]\n        - [\"in1.sensor.name\", \"ST32\"]\n\n  - when: build_vars.MODEL == \"ShellyU\"\n    apply:\n      sources:\n        - src/mock/pwm\n        - src/mock/wifi_config\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: ubuntu-nossl\n      cdefs:\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: XXX\n        MG_ENABLE_SSL: 0\n        SHELLY_HAVE_PM: 1\n        BTN_NOISY: 0\n      config_schema:\n        - [\"device.id\", \"ShellyU-????\"]\n        - [\"shelly.name\", \"ShellyU-????\"]\n        - [\"file_logger.dir\", \"./\"]\n        - [\"ts1\", \"ts\", {title: \"TS1 settings\"}]\n        - [\"ts1.name\", \"Shelly TS\"]\n        - [\"ts2\", \"ts\", {title: \"TS2 settings\"}]\n        - [\"ts2.name\", \"Shelly TS\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"ShellyU SW1\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"ShellyU SSW1\"]\n        - [\"in1.sensor.name\", \"ShellyU S1\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"ShellyU SSW2\"]\n        - [\"in2.sensor.name\", \"ShellyU S2\"]\n\n  - when: build_vars.MODEL == \"ShellyUDuo\"\n    apply:\n      sources:\n        - src/ShellyDuo/shelly_init.cpp\n        - src/mock/pwm\n        - src/mock/wifi_config\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: ubuntu-nossl\n      cdefs:\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: XXX\n        MG_ENABLE_SSL: 0\n        SHELLY_HAVE_PM: 0\n        BTN_NOISY: 0\n      config_schema:\n        - [\"device.id\", \"ShellyUBulbDuo-??????\"]\n        - [\"shelly.name\", \"ShellyUBulbDuo-??????\"]\n        - [\"wifi.ap.ssid\", \"ShellyUBulbDuo-??????\"]\n        - [\"lb1\", \"lb\", {title: \"Light bulb settings\"}]\n        - [\"lb1.initial_state\", 2] # last\n\n  - when: build_vars.MODEL == \"ShellyU25\"\n    apply:\n      sources:\n        - src/Shelly25/shelly_init_components.cpp  # Same components as Shelly25\n        - src/mock/pwm\n        - src/mock/wifi_config\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: ubuntu-nossl\n      cdefs:\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: XXX\n        MG_ENABLE_SSL: 0\n        SHELLY_HAVE_PM: 1\n        BTN_NOISY: 0\n      config_schema:\n        - [\"device.id\", \"ShellyU25-????\"]\n        - [\"shelly.name\", \"ShellyU25-????\"]\n        - [\"file_logger.dir\", \"./\"]\n        - [\"sw1\", \"sw\", {title: \"SW1 settings\"}]\n        - [\"sw1.name\", \"ShellyU25 SW1\"]\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"ShellyU25 SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n        - [\"sw2\", \"sw\", {title: \"SW2 settings\"}]\n        - [\"sw2.name\", \"ShellyU25 SW2\"]\n        - [\"in2\", \"in\", {title: \"Input 2 settings\"}]\n        - [\"in2.ssw.name\", \"ShellyU25 SSW2\"]\n        - [\"in2.sensor.name\", \"ShellyU25 S2\"]\n        - [\"wc1\", \"wc\", {title: \"WC1 settings\"}]\n        - [\"wc1.name\", \"Window 1\"]\n        - [\"gdo1\", \"gdo\", {title: \"GDO1 settings\"}]\n        - [\"gdo1.name\", \"ShellyU25 GDO\"]\n\n  - when: build_vars.MODEL == \"ShellyURGBW2\"\n    apply:\n      sources:\n        - src/ShellyRGBW2/shelly_init.cpp  # Same components as ShellyRGBW2\n        - src/mock/pwm\n        - src/mock/wifi_config\n      libs:\n        - location: https://github.com/mongoose-os-libs/mongoose\n          variant: ubuntu-nossl\n      cdefs:\n        PRODUCT_HW_REV: \"1.0\"\n        STOCK_FW_MODEL: XXX\n        MG_ENABLE_SSL: 0\n        SHELLY_HAVE_PM: 0\n        BTN_NOISY: 0\n      config_schema:\n        - [\"device.id\", \"ShellyRGBW2-????\"]\n        - [\"shelly.name\", \"ShellyRGBW2-????\"]\n        - [\"file_logger.dir\", \"./\"]\n        - [\"shelly.mode\", 3]\n        - [\"lb1\", \"lb\", {title: \"Light 1 settings\"}]\n        - [\"lb2\", \"lb\", {title: \"Light 2 settings\"}]\n        - [\"lb2.initial_state\", 2] #input only available to lb1\n        - [\"lb3\", \"lb\", {title: \"Light 3 settings\"}]\n        - [\"lb3.initial_state\", 2] #input only available to lb1\n        - [\"lb4\", \"lb\", {title: \"Light 4 settings\"}]\n        - [\"lb4.initial_state\", 2] #input only available to lb1\n        - [\"in1\", \"in\", {title: \"Input 1 settings\"}]\n        - [\"in1.ssw.name\", \"Shelly SSW1\"]\n        - [\"in1.sensor.name\", \"Shelly S1\"]\n\nmanifest_version: 2020-01-29\n"
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "tools",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}