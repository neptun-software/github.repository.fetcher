{
  "metadata": {
    "timestamp": 1736565894887,
    "page": 857,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjg2MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "widelands/widelands",
      "stars": 2042,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".clang-format",
          "type": "blob",
          "size": 1.4326171875,
          "content": "---\nLanguage:        Cpp\nAccessModifierOffset: -3\nConstructorInitializerIndentWidth: 3\nAlignEscapedNewlinesLeft: false\nAlignTrailingComments: true\nAllowAllParametersOfDeclarationOnNextLine: true\nAllowShortIfStatementsOnASingleLine: false\nAllowShortLoopsOnASingleLine: false\nAllowShortFunctionsOnASingleLine: false\nAlwaysBreakTemplateDeclarations: false\nAlwaysBreakBeforeMultilineStrings: false\nBreakBeforeBinaryOperators: false\nBreakBeforeTernaryOperators: false\nBreakConstructorInitializersBeforeComma: false\nBinPackParameters: false\nColumnLimit:     100\nCommentPragmas: '^ RST.*'\nConstructorInitializerAllOnOneLineOrOnePerLine: true\nDerivePointerBinding: false\nExperimentalAutoDetectBinPacking: false\nIndentCaseLabels: false\nMaxEmptyLinesToKeep: 1\nNamespaceIndentation: None\nObjCSpaceBeforeProtocolList: true\nPenaltyBreakBeforeFirstCallParameter: 0\nPenaltyBreakComment: 300\nPenaltyBreakString: 1000\nPenaltyBreakFirstLessLess: 120\nPenaltyExcessCharacter: 1000000\nPenaltyReturnTypeOnItsOwnLine: 60\nPointerBindsToType: true\nSpacesBeforeTrailingComments: 2\nCpp11BracedListStyle: true\nStandard:        Cpp11\nIndentWidth:     3\nTabWidth:        3\nUseTab:          ForIndentation\nBreakBeforeBraces: Attach\nIndentFunctionDeclarationAfterType: false\nSpacesInParentheses: false\nSpacesInAngles:  false\nSpaceInEmptyParentheses: false\nSpacesInCStyleCastParentheses: false\nSpaceBeforeAssignmentOperators: true\nContinuationIndentWidth: 3\nSpaceBeforeParens: ControlStatements\n...\n\n"
        },
        {
          "name": ".clang-tidy",
          "type": "blob",
          "size": 5.328125,
          "content": "# See SUPPRESSED_CHECKS in utils/check_clang_tidy_results.py\n# Also disable all aliases, because they only result in duplication of work,\n# except for clang-analyzer-* aliases, which behave strange, so we treat them\n# as normal checks.\n#\n# Alias list must be updated when clang-tidy version is bumped. Current list\n# was taken from:\n# https://releases.llvm.org/14.0.0/tools/clang/tools/extra/docs/clang-tidy/checks/list.html\n#\n# TODO(tothxa): can be converted to \"Checks: |\" when lowest supported clang\n#               version reaches 15\nChecks: >-\n  *,\n  -abseil*,\n  -altera*,\n  -android*,\n  -boost*,\n  -*fuchsia*,\n  -linuxkernel*,\n  -mpi-*,\n  -objc*,\n  -openmp*,\n  -*webkit*,\n  -zircon*,\n  -clang-analyzer-alpha*,\n  -COMMENT---cannot-clean-up-yet---,\n  -llvm-header-guard,\n  -cert-dcl50-cpp,\n  -cppcoreguidelines-pro-type-vararg,\n  -COMMENT---probably-not-for-us---,\n  -clang-analyzer-optin.mpi.MPI-Checker,\n  -cppcoreguidelines-avoid-goto,\n  -cppcoreguidelines-no-malloc,\n  -cppcoreguidelines-owning-memory,\n  -cppcoreguidelines-pro-bounds-array-to-pointer-decay,\n  -cppcoreguidelines-pro-bounds-constant-array-index,\n  -cppcoreguidelines-pro-bounds-pointer-arithmetic,\n  -cppcoreguidelines-pro-type-const-cast,\n  -cppcoreguidelines-pro-type-reinterpret-cast,\n  -cppcoreguidelines-pro-type-union-access,\n  -google-default-arguments,\n  -hicpp-avoid-goto,\n  -llvmlibc-callee-namespace,\n  -llvmlibc-implementation-in-namespace,\n  -llvmlibc-restrict-system-libc-headers,\n  -misc-non-private-member-variables-in-classes,\n  -misc-no-recursion,\n  -modernize-avoid-c-arrays,\n  -modernize-raw-string-literal,\n  -modernize-replace-disallow-copy-and-assign-macro,\n  -modernize-return-braced-init-list,\n  -modernize-use-auto,\n  -modernize-use-trailing-return-type,\n  -readability-identifier-length,\n  -readability-uppercase-literal-suffix,\n  -COMMENT---to-be-cleaned-up---,\n  -bugprone-easily-swappable-parameters,\n  -bugprone-exception-escape,\n  -bugprone-macro-parentheses,\n  -bugprone-narrowing-conversions,\n  -bugprone-not-null-terminated-result,\n  -bugprone-signed-char-misuse,\n  -bugprone-too-small-loop-variable,\n  -cert-err33-c,\n  -cert-err58-cpp,\n  -cert-msc51-cpp,\n  -clang-analyzer-core.CallAndMessage,\n  -clang-analyzer-core.NonNullParamChecker,\n  -clang-analyzer-cplusplus.NewDelete,\n  -clang-analyzer-cplusplus.NewDeleteLeaks,\n  -clang-analyzer-optin.cplusplus.UninitializedObject,\n  -clang-analyzer-optin.cplusplus.VirtualCall,\n  -clang-diagnostic-documentation-unknown-command,\n  -concurrency-mt-unsafe,\n  -cppcoreguidelines-avoid-non-const-global-variables,\n  -cppcoreguidelines-init-variables,\n  -cppcoreguidelines-macro-usage,\n  -cppcoreguidelines-narrowing-conversions,\n  -cppcoreguidelines-prefer-member-initializer,\n  -cppcoreguidelines-pro-type-member-init,\n  -cppcoreguidelines-slicing,\n  -cppcoreguidelines-special-member-functions,\n  -google-readability-casting,\n  -google-runtime-references,\n  -hicpp-multiway-paths-covered,\n  -hicpp-signed-bitwise,\n  -misc-macro-parentheses,\n  -modernize-make-unique,\n  -modernize-pass-by-value,\n  -modernize-use-default-member-init,\n  -performance-no-int-to-ptr,\n  -performance-unnecessary-value-param,\n  -readability-const-return-type,\n  -readability-convert-member-functions-to-static,\n  -readability-function-cognitive-complexity,\n  -readability-function-size,\n  -readability-magic-numbers,\n  -readability-named-parameter,\n  -readability-suspicious-call-argument,\n  -COMMENT---disable-aliases---,\n  -cert-con36-c,\n  -cert-con54-cpp,\n  -cert-dcl03-c,\n  -cert-dcl16-c,\n  -cert-dcl37-c,\n  -cert-dcl51-cpp,\n  -cert-dcl54-cpp,\n  -cert-dcl59-cpp,\n  -cert-err09-cpp,\n  -cert-err61-cpp,\n  -cert-exp42-c,\n  -cert-fio38-c,\n  -cert-flp37-c,\n  -cert-msc30-c,\n  -cert-msc32-c,\n  -cert-oop11-cpp,\n  -cert-oop54-cpp,\n  -cert-pos44-c,\n  -cert-pos47-c,\n  -cert-sig30-c,\n  -cert-str34-c,\n  -cppcoreguidelines-avoid-c-arrays,\n  -cppcoreguidelines-avoid-magic-numbers,\n  -cppcoreguidelines-c-copy-assignment-signature,\n  -cppcoreguidelines-explicit-virtual-functions,\n  -cppcoreguidelines-non-private-member-variables-in-classes,\n  -google-readability-braces-around-statements,\n  -google-readability-function-size,\n  -google-readability-namespace-comments,\n  -hicpp-avoid-c-arrays,\n  -hicpp-braces-around-statements,\n  -hicpp-deprecated-headers,\n  -hicpp-explicit-conversions,\n  -hicpp-function-size,\n  -hicpp-invalid-access-moved,\n  -hicpp-member-init,\n  -hicpp-move-const-arg,\n  -hicpp-named-parameter,\n  -hicpp-new-delete-operators,\n  -hicpp-no-array-decay,\n  -hicpp-no-malloc,\n  -hicpp-noexcept-move,\n  -hicpp-special-member-functions,\n  -hicpp-static-assert,\n  -hicpp-undelegated-constructor,\n  -hicpp-uppercase-literal-suffix,\n  -hicpp-use-auto,\n  -hicpp-use-emplace,\n  -hicpp-use-equals-default,\n  -hicpp-use-equals-delete,\n  -hicpp-use-noexcept,\n  -hicpp-use-nullptr,\n  -hicpp-use-override,\n  -hicpp-vararg,\n  -llvm-else-after-return,\n  -llvm-qualified-auto\nWarningsAsErrors: ''\nHeaderFilterRegex:\n  # This is to exclude 'src/third_party'. Needs to be updated, if any new\n  # directory is added. It's an old outstanding feature request for clang-tidy\n  # to make this easier...\n  # It's better to list them, because the sources may be in e.g.\n  #   /home/user/src/widelands/\n  # TODO(tothxa): figure out which multiline format works...\n  'src/((ai|base|chat|economy|editor|game_io|graphic|io|logic|map_io|network|notifications|scripting|sound|ui_basic|ui_fsmenu|website|wui)/|[a-z_]+\\.h)'\nFormatStyle:     none\n"
        },
        {
          "name": ".editorconfig",
          "type": "blob",
          "size": 0.60546875,
          "content": "# EditorConfig file for widelands\n#\n# read about the file on https://EditorConfig.org\n\n# top-most EditorConfig file\nroot = true\n\n# all files\n[*]\nend_of_line = lf\ninsert_final_newline = true\ntrim_trailing_whitespace = true\nmax_line_length = 100\n\n[*.lua]\nindent_style = space\nindent_size = 3\n\n[*.{h,cc}]\nindent_style = tab\n# to indicate line break correctly:\ntab_width = 3\n\n[{*.cmake,CMakeLists.txt}]\nindent_style = space\nindent_size = 2\n\n[*.py]\nindent_style = space\nindent_size = 4\n\n[*.sh]\nindent_style = space\nindent_size = 2\n\n[*.{yml,yaml}]\nindent_style = space\nindent_size = 2\n\n[*.po]\ntrim_trailing_whitespace = false\n"
        },
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.2158203125,
          "content": "# Set the default behavior, in case people don't have core.autocrlf set.\n* text=auto\n\n# Declare files that will always have LF line endings on checkout.\n*.cc text eol=lf\n*.h text eol=lf\n*.lua text eol=lf\n*.py text eol=lf\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.7099609375,
          "content": "# Scripting documentation ignores\n/doc/sphinx/build/\n/doc/sphinx/source/autogen*\n/doc/sphinx/source/auxiliary.rst\n\n# Local defaults for compile.sh\n.compile*\n\n# the compile.sh file creates some files, links and directories\n/build\n/auto_dependencies\n/data/datadirversion\nupdate.sh\n/widelands\n/widelands.exe\nwl_map*_info\nwl_create_spritesheet\nlocale\nVERSION\n\n# Local KDevelop settings files\n**/.kdev_include_paths\n\n# Python compiled files.\n*.pyc\n\n# OS-X Meta Files\n.DS_Store\n\n# QT Creator settings\nCMakeLists.txt.user*\n\n# Visual Studio settings + VS Code\n/.vs\n/.vscode\nCMakeSettings.json\n\n# Profilers\ngmon.out\n\n# Validation checks\n/po_validation\n/clang-tidy.log\n/clangtidy\n\n# Saveloading compatibility test cases\n/test/save/*.wgf\n"
        },
        {
          "name": ".tx",
          "type": "tree",
          "content": null
        },
        {
          "name": "CMakeLists.txt",
          "type": "blob",
          "size": 22.505859375,
          "content": "cmake_minimum_required (VERSION 3.12)\ncmake_policy(VERSION 3.12)\n\nproject (widelands)\n\nmessage(STATUS \"Using CMake version ${CMAKE_VERSION}\")\n\n# Detailed help is in README.md\n# Please update it if you change anything here\noption(OPTION_USE_GLBINDING \"Use glbinding instead of GLEW\" OFF)\noption(OPTION_GLEW_STATIC \"Use static GLEW Library\" OFF)\noption(OPTION_BUILD_WEBSITE_TOOLS \"Build website-related tools\" ON)\noption(OPTION_BUILD_TESTS \"Build tests\" ON)\noption(OPTION_BUILD_CODECHECK \"Build codecheck\" ON)\noption(OPTION_BUILD_WINSTATIC \"Build a static linked .exe on windows\" OFF)\noption(OPTION_TSAN \"Build with ThreadSanitizer\" OFF)\noption(OPTION_FORCE_EMBEDDED_MINIZIP \"Use embedded minizip sources\" OFF)\noption(USE_XDG \"Follow XDG-Basedir specification\" ON) # Enabled by default\n\nset(CMAKE_FIND_FRAMEWORK LAST)\n\n# Absolute path reference for submodules\nset(WL_ROOT_DIR \"${CMAKE_CURRENT_SOURCE_DIR}\")\n\n# Add custom includes to override system libs\nFILE(GLOB custom_include_directories auto_dependencies/*)\nforeach(custom_include_dir ${custom_include_directories})\n  if(IS_DIRECTORY \"${custom_include_dir}\")\n    message(STATUS \"Using custom include directory '${custom_include_dir}'.\")\n    list(INSERT CMAKE_INCLUDE_PATH 0 \"${custom_include_dir}\")\n    include_directories(BEFORE SYSTEM \"${custom_include_dir}\")\n  else()\n    message(WARNING \"Not a directory: '${custom_include_dir}' - Ignored.\")\n  endif()\nendforeach()\n\ninclude(\"${CMAKE_SOURCE_DIR}/cmake/UseSystemInfo.cmake\")\ninclude(\"${CMAKE_SOURCE_DIR}/cmake/WlFunctions.cmake\")\n\n# This policy is not known to versions prior 3.27 and would result in errors,\n# if set on such systems. This can be removed when cmake_minimum_required is set\n# to 3.27 or newer  by using:\n# cmake_policy(VERSION 3.27)\nif(POLICY CMP0148)\n  cmake_policy(SET CMP0148 NEW)\nendif(POLICY CMP0148)\n\nIF(USE_XDG AND NOT APPLE AND NOT WIN32)\n  ADD_DEFINITIONS(-DUSE_XDG)\n  message(STATUS \"Building with XDG support\")\nENDIF(USE_XDG AND NOT APPLE AND NOT WIN32)\n\nif (CMAKE_SOURCE_DIR STREQUAL CMAKE_BINARY_DIR)\n  message(FATAL_ERROR \"Build directory and source directory must not be the same.\")\nendif (CMAKE_SOURCE_DIR STREQUAL CMAKE_BINARY_DIR)\n\n# Define the directory structure for installation - will be hardcoded in WL bin\n# (through config.h). If not specified, we are going to use the directory where\n# the executable is in. Also on Linux.\n# Packagers (or people using make install) have to set this variable to an absolute path.\nwl_set_if_unset(WL_INSTALL_BASEDIR \".\")\n\n# Define the directory structure for installation of the data files - will be hardcoded\n# in WL bin (through config.h). If not specified, we are going to use the \"data\" directory\n# below the directory where the executable is in. Also on Linux.\n# Packagers (or people using make install) have to set this variable to an absolute path.\nwl_set_if_unset(WL_INSTALL_DATADIR \"./data\")\n\n# To override this, use '-DWL_INSTALL_BINDIR=<absolute path>' when configuring or change\n# 'CMAKE_INSTALL_PREFIX'.\n# Example: to have the bin installed to \"/usr/games\", just use '-DCMAKE_INSTALL_PREFIX=/usr'\n# and don't specify '-DWL_INSTALL_BINDIR' when configuring.\n# Note: 'CMAKE_INSTALL_PREFIX' defaults to /usr/local on UNIX and c:/Program Files/${PROJECT_NAME} on Windows\nwl_set_if_unset(WL_INSTALL_BINDIR \"${CMAKE_INSTALL_PREFIX}/games\")\n\nif(\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"GNU\")\n  if (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 8)\n    message(FATAL_ERROR \"Widelands needs GCC >= 8 to compile.\")\n  endif()\nelseif(\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"Clang\" OR \"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"AppleClang\")\n  if (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 7)\n    message(FATAL_ERROR \"Clang version must be at least 7!\")\n  endif()\nelseif(\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"MSVC\")\n  if (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 3.4)\n    message(FATAL_ERROR \"MSVC version must be at least 19!\")\n  endif()\nelse()\n  message(WARNING \"You are using an unsupported compiler! Supported are Clang and GCC.\")\nendif()\nmessage(STATUS \"Picking up default CXX flags:\n    - CMAKE_CXX_FLAGS='${CMAKE_CXX_FLAGS}'\n    - CMAKE_CXX_FLAGS_RELEASE='${CMAKE_CXX_FLAGS_RELEASE}'\n    - CMAKE_CXX_FLAGS_DEBUG='${CMAKE_CXX_FLAGS_DEBUG}'\")\n\nSET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_CURRENT_SOURCE_DIR}/cmake/Modules)\n\nif (WIN32)\n  link_libraries(wsock32 ws2_32 bcrypt)\nendif()\nif (OPTION_BUILD_WINSTATIC)\n  add_definitions(-DGLBINDING_STATIC_DEFINE -DNGHTTP2_STATICLIB)\n  set (OPTION_GLEW_STATIC ON)\n  if(MSVC)\n    set(CMAKE_FIND_LIBRARY_SUFFIXES \".lib\")\n  else()\n    set(CMAKE_FIND_LIBRARY_PREFIXES \"lib\")\n    set(CMAKE_FIND_LIBRARY_SUFFIXES \".a\")\n  endif()\nendif()\n\nfind_package (Python3 REQUIRED)\n\nfind_package(OpenGL REQUIRED)\nfind_package(PNG 1.6 REQUIRED)\n\nfind_package(SDL2 REQUIRED)\nfind_package(SDL2_image REQUIRED)\nfind_package(SDL2_mixer REQUIRED)\nfind_package(SDL2_ttf REQUIRED)\nfind_package(ZLIB REQUIRED)\nif(${CMAKE_VERSION} VERSION_LESS 3.9.0)\n    find_package(ICU_old REQUIRED)\nelse()\n    find_package(ICU REQUIRED COMPONENTS uc dt)\nendif()\nif(OPTION_USE_GLBINDING)\n  find_package(glbinding REQUIRED)\nelse()\n  find_package(GLEW REQUIRED)\nendif()\n\n# Check that Asio is installed. Asio does not have (or need) a Find… CMake Module, so we \"only\" need to check if the header exists.\nif(NOT asio_location OR asio_location STREQUAL \"\")\n  unset(asio_location CACHE)\n  find_path(asio_location \"asio.hpp\")\n  if(asio_location)\n    message(STATUS \"Found Asio in '${asio_location}'.\")\n  else()\n    message(FATAL_ERROR \"Could NOT find Asio (missing: asio.hpp). Please run:\\n./install-dependencies.sh\\nwhich will attempt to install all missing dependencies automatically, or provide further instructions if this not supported on your system.\")\n  endif()\nendif()\nadd_definitions(-DASIO_STANDALONE)\n\nif (APPLE OR WIN32 OR\n    CMAKE_SYSTEM_NAME MATCHES \"FreeBSD\" OR\n    CMAKE_SYSTEM_NAME MATCHES \"NetBSD\" OR\n    CMAKE_SYSTEM_NAME MATCHES \"OpenBSD\")\nendif()\n\n# Disable no symbols warning on macOS, but only on versions where this is\n# supported. It is not supported on OS X 10.7 (DARWIN_MAJOR_VERSION == 11).\nif (APPLE)\n    if (${DARWIN_MAJOR_VERSION} GREATER 11)\n        SET(CMAKE_C_ARCHIVE_CREATE   \"<CMAKE_AR> Scr <TARGET> <LINK_FLAGS> <OBJECTS>\")\n        SET(CMAKE_CXX_ARCHIVE_CREATE \"<CMAKE_AR> Scr <TARGET> <LINK_FLAGS> <OBJECTS>\")\n        SET(CMAKE_C_ARCHIVE_FINISH   \"<CMAKE_RANLIB> -no_warning_for_no_symbols -c <TARGET>\")\n        SET(CMAKE_CXX_ARCHIVE_FINISH \"<CMAKE_RANLIB> -no_warning_for_no_symbols -c <TARGET>\")\n    endif()\nendif()\n\n# TODO(sirver): One day, this should be enabled. Then we have no more cycles in our dependencies....\n# set_property(GLOBAL PROPERTY GLOBAL_DEPENDS_NO_CYCLES ON)\n\nif (NOT CMAKE_BUILD_TYPE OR CMAKE_BUILD_TYPE STREQUAL \"\")\n  find_path(FILE_WL_RELEASE \"WL_RELEASE\" ${CMAKE_CURRENT_SOURCE_DIR})\n  if(${FILE_WL_RELEASE} STREQUAL \"FILE_WL_RELEASE-NOTFOUND\")\n    set(CMAKE_BUILD_TYPE Debug)\n  else()\n    set(CMAKE_BUILD_TYPE Release)\n  endif()\nendif (NOT CMAKE_BUILD_TYPE OR CMAKE_BUILD_TYPE STREQUAL \"\")\n\nif(CMAKE_BUILD_TYPE STREQUAL \"Debug\")\n  set(WL_DEBUG_FLAGS \"-DDEBUG\")\n  if(NOT MSVC)\n    wl_add_flag(WL_DEBUG_FLAGS \"-g\")\n    if(NOT OPTION_TSAN)\n      option(OPTION_ASAN \"Build with AddressSanitizer\" ON)\n    endif()\n  endif()\nelseif((CMAKE_BUILD_TYPE STREQUAL \"Release\") OR (CMAKE_BUILD_TYPE STREQUAL \"RelWithDebInfo\"))\n  if((\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"GNU\") AND (CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 7.5))\n    message(STATUS \"GCC >7.5.0 breaks -O3, setting -O2\")\n    set(WL_OPTIMIZE_FLAGS \"-O2\")\n  elseif(MSVC)\n    set(WL_OPTIMIZE_FLAGS \"/O2\")\n  else()\n    set(WL_OPTIMIZE_FLAGS \"-O3\")\n  endif()\n  if((\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"GNU\") AND (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 7.6))\n    message(WARNING \"GCC <7.6.0 is known to cause segfaults in release builds. Please consider upgrading to GCC version 7.6 or newer or using Clang. Adding selected overrides to suppress reporting of known bugs.\")\n    wl_add_flag(WL_OPTIMIZE_FLAGS \"--param asan-stack=0\")\n  endif()\n  set(WL_DEBUG_FLAGS \"-DNDEBUG -DNOPARACHUTE\")\n  option(OPTION_ASAN \"Build with AddressSanitizer\" OFF)\nelseif(CMAKE_BUILD_TYPE STREQUAL \"None\")\n  message(STATUS \"Not setting any default flags.\")\nelse()\n  message(FATAL_ERROR \"Unknown CMAKE_BUILD_TYPE: ${CMAKE_BUILD_TYPE}\")\nendif()\n\nif(OPTION_TSAN)\n  message(STATUS \"Using ThreadSanitizer https://clang.llvm.org/docs/ThreadSanitizer.html\")\n  wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-fsanitize=thread\")\n  set (CMAKE_EXE_LINKER_FLAGS \"-fsanitize=thread\" CACHE STRING \"Set by widelands CMakeLists.txt\" FORCE)\n  option(OPTION_ASAN \"Build with AddressSanitizer\" OFF)\nelse()\n  message(STATUS \"Not using ThreadSanitizer.\")\nendif(OPTION_TSAN)\n\nif(OPTION_ASAN)\n  message(STATUS \"Using AddressSanitizer https://clang.llvm.org/docs/AddressSanitizer.html\")\n  # See https://clang.llvm.org/docs/AddressSanitizer.html\n  wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-fsanitize=address\")\n  wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-fno-omit-frame-pointer\")\n  set (CMAKE_EXE_LINKER_FLAGS \"-fsanitize=address\" CACHE STRING \"Set by widelands CMakeLists.txt\" FORCE)\n  add_definitions(-DUSE_ASAN)\nelse()\n  message(STATUS \"Not using AddressSanitizer.\")\nendif(OPTION_ASAN)\n\nif(OPTION_ASAN AND OPTION_TSAN)\n  message(FATAL_ERROR \"OPTION_ASAN and OPTION_TSAN cannot be used together\")\nendif()\n\n# This is set to avoid linker errors when using GLVND-libs on Linux\nif(\"${OpenGL_GL_PREFERENCE}\" STREQUAL \"GLVND\")\n   link_libraries(OpenGL::GL)\n   add_compile_definitions(WL_USE_GLVND)\n   message(STATUS \"Adding linker flags for GLVND.\")\nendif()\n\nif(\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"Clang\")\n  set(warn_disable_flags\n    \"-Weverything\"\n\n    # Disabled warnings that are overly verbose right now or just do not make sense.\n    \"-Wno-c++98-compat\"\n    \"-Wno-c++98-compat-pedantic\"\n    \"-Wno-conversion\"\n    \"-Wno-exit-time-destructors\"\n    \"-Wno-global-constructors\"\n    \"-Wno-padded\"\n    \"-Wno-sign-conversion\"\n    \"-Wno-missing-noreturn\"\n\n    # It is impossible to write code that both GCC and Clang will like,\n    # so we have to switch off the warning for one of them.\n    # http://clang-developers.42468.n3.nabble.com/Question-on-Wswitch-enum-td4025927.html\n    \"-Wno-switch-enum\"\n    \"-Wno-covered-switch-default\"\n\n    # TODO(sirver: weak-vtables should be enabled, but leads to lot of errors right now.\n    \"-Wno-weak-vtables\"\n    \"-Wno-unreachable-code\"\n    \"-Wno-documentation\"\n    \"-Qunused-arguments\"\n    \"-Wint-to-void-pointer-cast\"\n  )\n  foreach(flag IN LISTS warn_disable_flags)\n    wl_add_flag(WL_COMPILE_DIAGNOSTICS ${flag})\n  endforeach()\n\n  if(CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 3.8)\n    wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Winconsistent-missing-override\")\n  endif()\n  if(CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 16)\n    wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Wno-unsafe-buffer-usage\")\n  endif()\nelseif(MSVC)\n  wl_add_flag(WL_GENERIC_CXX_FLAGS \"/std:c++17\")\n  # https://docs.microsoft.com/en-us/cpp/error-messages/compiler-warnings/\n  # Disabled warnings that are overly verbose right now or just do not make sense.\n  wl_add_flag(WL_COMPILE_DIAGNOSTICS \"/wd4244\")\n  wl_add_flag(WL_COMPILE_DIAGNOSTICS \"/wd4267\")\n  wl_add_flag(WL_COMPILE_DIAGNOSTICS \"/wd4018\")\n  # Use correct code page\n  wl_add_flag(WL_GENERIC_CXX_FLAGS \"/utf-8\")\nelse()\n  # Assuming GCC 4.8 or higher.\n  if(WIN32)\n    # This is needed for getenv().\n    wl_add_flag(WL_GENERIC_CXX_FLAGS \"-std=gnu++17\")\n    if (OPTION_BUILD_WINSTATIC)\n      set(CMAKE_CXX_STANDARD_LIBRARIES \"-static-libgcc -static-libstdc++ ${CMAKE_CXX_STANDARD_LIBRARIES}\")\n      set(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -Wl,-Bstatic\")\n    endif()\n  else()\n    # SDL and MinGW both declare 'unsigned int __builtin_ia32_crc32qi(unsigned int, unsigned char)', resulting in lots of warnings. So, we can't have this flag in Windows.\n    wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Wredundant-decls\")\n  endif()\n\n  set(warn_flags\n    \"-Wall\"\n    \"-Wpedantic\"\n    \"-Wdeprecated-declarations\"\n    \"-Wextra\"\n    \"-Wformat\"\n    \"-Wformat-nonliteral\"\n    \"-Wformat-security\"\n    \"-Wformat-y2k\"\n    \"-Winit-self\"\n    \"-Winvalid-pch\"\n    \"-Wmissing-include-dirs\"\n    \"-Wno-undef\"\n    \"-Wold-style-cast\"\n    \"-Woverlength-strings\"\n    \"-Wpacked\"\n    \"-Wpointer-arith\"\n    \"-Wsign-promo\"\n    \"-Wundef\"\n    \"-Wunused\"\n    \"-Wunused-macros\"\n    \"-fno-elide-constructors\" # Detect invalid constexpr initialization\n  )\n  foreach(flag IN LISTS warn_flags)\n    wl_add_flag(WL_COMPILE_DIAGNOSTICS ${flag})\n  endforeach()\n  if (NOT APPLE)\n    wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Wlogical-op\")\n    wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Wsync-nand\")\n    wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Wtrampolines\")\n  endif()\nendif()\n\n# Some compilers need an extra library for filesystem support, while others don't know about it.\n# If the detection is incorrect, you can override it by setting `-DNEEDS_EXTERNAL_FILESYSTEM=ON|OFF` explicitly.\nif (NOT DEFINED NEEDS_EXTERNAL_FILESYSTEM)\n  if((\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"GNU\") AND (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 9.1))\n    set(NEEDS_EXTERNAL_FILESYSTEM ON CACHE BOOL \"Use linker flag for stdc++fs\")\n  else()\n    set(NEEDS_EXTERNAL_FILESYSTEM OFF CACHE BOOL \"Don't use linker flag for stdc++fs\")\n  endif()\nendif()\nif (NEEDS_EXTERNAL_FILESYSTEM)\n  message(STATUS \"Linking with external stdc++fs\")\nendif()\n\nif(NOT MSVC)\n  if((CMAKE_BUILD_TYPE STREQUAL \"Release\") OR (CMAKE_BUILD_TYPE STREQUAL \"RelWithDebInfo\"))\n    message(STATUS \"Compiler warnings will be ignored.\")\n  elseif((\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"GNU\") AND (\n         ((NOT (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 12.0)) AND (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 12.2))\n         OR (NOT (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 13.0)) AND (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 13.1)))\n    # Skip this on g++ versions 12.0, 12.1, and 13.0 because of false-positives from system headers.\n    message(WARNING \"This compiler is known to cause false-positive warnings.\")\n  else()\n    # Turn some warnings into errors.\n    message(STATUS \"Warnings will be treated as errors.\")\n    wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Werror\")\n    if((\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"GNU\") AND (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 10.0))\n      # Silence some false positives on older g++\n      message(STATUS \"Disabling known false-positive warnings for this compiler.\")\n      wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Wno-error=unused-variable\")\n      wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Wno-error=unused-but-set-parameter\")\n    endif()\n    if (APPLE)  # Our Mac CI needs these\n      message(STATUS \"Disabling known false-positive warnings for this environment.\")\n      wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Wno-error=poison-system-directories\")\n      wl_add_flag(WL_COMPILE_DIAGNOSTICS \"-Wno-error=disabled-macro-expansion\")\n    endif()\n  endif()\n\n  wl_add_flag(WL_GENERIC_CXX_FLAGS \"-std=c++17\")\nendif()\n\n# Cross-compile-unit optimization slows linking significantly.\n# Therefore, impatient user may want to prevent that.\nif(USE_FLTO_IF_AVAILABLE STREQUAL \"yes\")\n# Cross-compile-unit optimization not supported by gcc with debug on!\n# Therefore, this may only be done with Release builds.\nif((CMAKE_BUILD_TYPE STREQUAL \"Release\") OR (CMAKE_BUILD_TYPE STREQUAL \"RelWithDebInfo\"))\n  # Only tested on Linux. Might work also on other platforms.\n  # If tested and found good, remove this check\n  if (CMAKE_SYSTEM MATCHES \"Linux\")\n    # Usage of -flto tested only with gcc 8.3 and 9.3 (2020-04); when in doubt, leaving it out..\n    if((\"${CMAKE_CXX_COMPILER_ID}\" STREQUAL \"GNU\") AND (CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 8.0))\n      #\n      # The execution jumps between compile units rather often. -flot allows optimization across\n      # comple units. Binary size reduced by >15% on tested environments. This does not directly\n      # translate to execution speed, but might still be noticeable.\n      #\n      # This is not related to -O2 or -O3 discussion, and not enable by either.\n      #\n      # If using lto, it needs to happen both during compile and link, else no benefits.\n      wl_add_flag(WL_GENERIC_CXX_FLAGS \"-flto\")\n      SET(CMAKE_EXE_LINKER_FLAGS  \"${CMAKE_EXE_LINKER_FLAGS} -flto\")\n      message(STATUS \"Enabling link-time optimizations\")\n    endif()\n  endif(CMAKE_SYSTEM MATCHES \"Linux\")\nendif((CMAKE_BUILD_TYPE STREQUAL \"Release\") OR (CMAKE_BUILD_TYPE STREQUAL \"RelWithDebInfo\"))\nendif(USE_FLTO_IF_AVAILABLE STREQUAL  \"yes\")\n\nIF (WIN32)\n  add_definitions(-D_WIN32_WINNT=0x0601)\n  if(MSVC)\n    add_definitions(-DWIN32_LEAN_AND_MEAN -D__STDC_FORMAT_MACROS -DNOMINMAX)\n    # Needed for minizip\n    add_definitions(-Dor=|| -Dand=&& -Dnot=!)\n  else()\n    add_definitions(-DMINGW_HAS_SECURE_API -DWIN32_LEAN_AND_MEAN -D__STDC_FORMAT_MACROS -D__USE_MINGW_ANSI_STDIO)\n    if (CMAKE_SIZEOF_VOID_P EQUAL 4)\n      set (CMAKE_EXE_LINKER_FLAGS \"-Wl,--large-address-aware\" CACHE STRING \"Set by widelands CMakeLists.txt\" FORCE)\n      message (STATUS \"Enabled large address awareness on mingw32\")\n      message (WARNING \"mingw compiler for 32 bit is deprecated, consider switching to 64-bit!\")\n      set(MINGW_SDL_IMG_DEPS webp webpdemux webpdecoder jbig deflate Lerc jxl hwy avif aom rav1e yuv dav1d sharpyuv ntdll)\n    else (CMAKE_SIZEOF_VOID_P EQUAL 4)\n      message (STATUS \"Detected mingw32-w64\")\n      set(MINGW_SDL_IMG_DEPS webp webpdemux webpdecoder jbig deflate Lerc jxl hwy avif aom rav1e yuv dav1d SvtAv1Enc sharpyuv ntdll)\n    endif (CMAKE_SIZEOF_VOID_P EQUAL 4)\n  endif()\nelse()\n  add_definitions(-DLUA_USE_POSIX)\nendif()\n\nif(OPTION_BUILD_WINSTATIC)\n  # Add required libraries for statical linking\n  wl_add_static_libs(SDL_IMG_STATIC_LIBS tiff jpeg lzma)\n  wl_add_static_libs(SDL_MIXER_STATIC_LIBS opusfile opus FLAC vorbisfile vorbis ogg mpg123 shlwapi)\n  wl_add_static_libs(SDL_TTF_STATIC_LIBS freetype bz2 graphite2 usp10 dwrite harfbuzz freetype rpcrt4)\n  wl_add_static_libs(SDL_STATIC_LIBS dinput8 shell32 setupapi advapi32 uuid version oleaut32 ole32 imm32 winmm gdi32 user32)\n  set(BROTLI brotlidec brotlicommon brotlienc)\n  if(MSVC)\n    wl_add_static_libs(SDL_IMG_STATIC_LIBS libwebp)\n    wl_add_static_libs(SDL_STATIC_LIBS charset ${BROTLI})\n    if(CMAKE_BUILD_TYPE STREQUAL \"Debug\")\n      string(REPLACE \"/MDd\" \"\" CMAKE_CXX_FLAGS_DEBUG ${CMAKE_CXX_FLAGS_DEBUG})\n      wl_add_flag(TARGET_COMPILE_FLAGS \"/MTd /EHsc\")\n    else()\n      string(REPLACE \"/MD\" \"\" CMAKE_CXX_FLAGS_RELEASE ${CMAKE_CXX_FLAGS_RELEASE})\n      wl_add_flag(TARGET_COMPILE_FLAGS \"/MT /EHsc\")\n    endif()\n  else()\n    wl_add_static_libs(SDL_IMG_STATIC_LIBS ${MINGW_SDL_IMG_DEPS})\n    wl_add_static_libs(SDL_MIXER_STATIC_LIBS ssp  modplug)\n    wl_add_static_libs(SDL_STATIC_LIBS mingw32 dxerr8 zstd ${BROTLI})\n  endif(MSVC)\nendif(OPTION_BUILD_WINSTATIC)\n\nif(NOT OPTION_ASAN)\n  # Allow self-diagnosis for crashes if the system supports it (uses a GNU extension)\n  find_path(has_execinfo \"execinfo.h\")\n  if(has_execinfo)\n    message(STATUS \"Adding crash self-diagnosis handler.\")\n    add_definitions(-DPRINT_SEGFAULT_BACKTRACE)\n    if(NOT WIN32)\n      # Needed for human-readable-ish symbolizing; doesn't hurt performance, see https://stackoverflow.com/q/12634114\n      SET(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -rdynamic\")\n    endif()\n  endif()\nendif()\n\n# on BSD this must be explicitly linked\nif (CMAKE_SYSTEM_NAME MATCHES \"FreeBSD\" OR\n    CMAKE_SYSTEM_NAME MATCHES \"NetBSD\" OR\n    CMAKE_SYSTEM_NAME MATCHES \"OpenBSD\")\n  # Not needed on Debian GNU/kFreeBSD..\n  if (NOT CMAKE_SYSTEM_NAME MATCHES \"kFreeBSD\")\n    find_library(EXECINFO_LIBRARY NAMES execinfo)\n  endif (NOT CMAKE_SYSTEM_NAME MATCHES \"kFreeBSD\")\n\n  # OpenBSD needs the X11 include directory in order to find GL/glu.h\n  if (CMAKE_SYSTEM_NAME MATCHES \"OpenBSD\")\n    find_package(X11 REQUIRED)\n    include_directories(${X11_INCLUDE_DIR})\n  endif ()\nendif (CMAKE_SYSTEM_NAME MATCHES \"FreeBSD\" OR\n       CMAKE_SYSTEM_NAME MATCHES \"NetBSD\" OR\n       CMAKE_SYSTEM_NAME MATCHES \"OpenBSD\")\n\nif (NOT DEFINED WL_VERSION)\n  include (${CMAKE_SOURCE_DIR}/cmake/BzrRevision.cmake)\nelse (NOT DEFINED WL_VERSION)\n  add_custom_target (\n    InputRevision ALL\n    COMMAND ${CMAKE_COMMAND} -DWL_INSTALL_BASEDIR=${WL_INSTALL_BASEDIR} -DWL_VERSION=${WL_VERSION} -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DSOURCE_DIR=${CMAKE_CURRENT_SOURCE_DIR} -DBINARY_DIR=${CMAKE_CURRENT_BINARY_DIR} -P ${CMAKE_CURRENT_SOURCE_DIR}/cmake/InputRevision.cmake\n  )\nendif (NOT DEFINED WL_VERSION)\n\n# Enable testing.\nif (OPTION_BUILD_TESTS)\n  include(CTest)\n  enable_testing()\n\n  # Run a test after a normal compile. This magic is needed as 'make test' will\n  # not rebuild tests:\n  # https://stackoverflow.com/questions/733475/cmake-ctest-make-test-doesnt-build-tests\n  add_custom_target(_run_all_tests ALL\n    COMMAND ${CMAKE_CTEST_COMMAND} --output-on-failure\n    WORKING_DIRECTORY ${CMAKE_BINARY_DIR}\n    DEPENDS wl_tests\n  )\nendif (OPTION_BUILD_TESTS)\n\ninstall (\n  FILES ${CMAKE_CURRENT_BINARY_DIR}/VERSION\n  DESTINATION ${WL_INSTALL_BASEDIR}\n  CONFIGURATIONS Debug;Release;RelWithDebInfo;None\n  COMPONENT CoreVersionFile\n)\n\n# TODO(Nordfriese): Use this consistently in places in code that use various other tests for endianness\ninclude(TestBigEndian)\nTEST_BIG_ENDIAN(IS_BIG_ENDIAN)\nif(IS_BIG_ENDIAN)\n  message(STATUS \"Byte order is big-endian\")\n  ADD_DEFINITIONS(-DWORDS_BIGENDIAN)\nelse()\n  message(STATUS \"Byte order is little-endian\")\nendif()\n\n# Installation.\nadd_subdirectory(doc)\nadd_subdirectory(src)\n\n# install files to the correct locations here\ninstall(\n  FILES\n    data/datadirversion\n  DESTINATION ${WL_INSTALL_DATADIR}\n  CONFIGURATIONS Debug;Release;RelWithDebInfo;None\n  COMPONENT VersionFile\n)\n\ninstall(\n  DIRECTORY\n    data/ai\n    data/campaigns\n    data/i18n\n    data/images\n    data/scripting\n    data/shaders\n    data/templates\n    data/tribes\n    data/txts\n    data/world\n  DESTINATION ${WL_INSTALL_DATADIR}\n  CONFIGURATIONS Debug;Release;RelWithDebInfo;None\n  COMPONENT CoreDataFiles\n)\n\ninstall(\n  DIRECTORY\n    data/maps\n  DESTINATION ${WL_INSTALL_DATADIR}\n  CONFIGURATIONS Debug;Release;RelWithDebInfo;None\n  COMPONENT MapFiles\n)\n\ninstall(\n  DIRECTORY\n    data/music\n    data/sound\n  DESTINATION ${WL_INSTALL_DATADIR}\n  CONFIGURATIONS Debug;Release;RelWithDebInfo;None\n  COMPONENT MusicFiles\n)\n\ninstall(\n  FILES\n    COPYING\n    CREDITS\n    ChangeLog\n  DESTINATION ${WL_INSTALL_BASEDIR}\n  CONFIGURATIONS Debug;Release;RelWithDebInfo;None\n  COMPONENT CoreLicenseFiles\n)\n\ninstall(\n  DIRECTORY\n    doc\n  DESTINATION ${WL_INSTALL_BASEDIR}\n  CONFIGURATIONS Debug\n  COMPONENT DocFiles\n  PATTERN \"CMakeLists.txt\" EXCLUDE\n)\n\nif (UNIX AND NOT APPLE)\n  add_subdirectory(xdg)\nendif (UNIX AND NOT APPLE)\n\n# uninstall target\n# see https://gitlab.kitware.com/cmake/community/-/wikis/FAQ#can-i-do-make-uninstall-with-cmake\nif(NOT TARGET uninstall)\n  configure_file(\n    \"${CMAKE_CURRENT_SOURCE_DIR}/cmake/cmake_uninstall.cmake.in\"\n    \"${CMAKE_CURRENT_BINARY_DIR}/cmake/cmake_uninstall.cmake\"\n    IMMEDIATE @ONLY)\n\n  add_custom_target(uninstall\n    COMMAND ${CMAKE_COMMAND} -P ${CMAKE_CURRENT_BINARY_DIR}/cmake/cmake_uninstall.cmake)\nendif()\n\n"
        },
        {
          "name": "CONTRIBUTING.md",
          "type": "blob",
          "size": 0.0634765625,
          "content": "See [Widelands Wiki](https://www.widelands.org/wiki/Contribute/)\n"
        },
        {
          "name": "COPYING",
          "type": "blob",
          "size": 17.66796875,
          "content": "                    GNU GENERAL PUBLIC LICENSE\n                       Version 2, June 1991\n\n Copyright (C) 1989, 1991 Free Software Foundation, Inc.,\n 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA\n Everyone is permitted to copy and distribute verbatim copies\n of this license document, but changing it is not allowed.\n\n                            Preamble\n\n  The licenses for most software are designed to take away your\nfreedom to share and change it.  By contrast, the GNU General Public\nLicense is intended to guarantee your freedom to share and change free\nsoftware--to make sure the software is free for all its users.  This\nGeneral Public License applies to most of the Free Software\nFoundation's software and to any other program whose authors commit to\nusing it.  (Some other Free Software Foundation software is covered by\nthe GNU Lesser General Public License instead.)  You can apply it to\nyour programs, too.\n\n  When we speak of free software, we are referring to freedom, not\nprice.  Our General Public Licenses are designed to make sure that you\nhave the freedom to distribute copies of free software (and charge for\nthis service if you wish), that you receive source code or can get it\nif you want it, that you can change the software or use pieces of it\nin new free programs; and that you know you can do these things.\n\n  To protect your rights, we need to make restrictions that forbid\nanyone to deny you these rights or to ask you to surrender the rights.\nThese restrictions translate to certain responsibilities for you if you\ndistribute copies of the software, or if you modify it.\n\n  For example, if you distribute copies of such a program, whether\ngratis or for a fee, you must give the recipients all the rights that\nyou have.  You must make sure that they, too, receive or can get the\nsource code.  And you must show them these terms so they know their\nrights.\n\n  We protect your rights with two steps: (1) copyright the software, and\n(2) offer you this license which gives you legal permission to copy,\ndistribute and/or modify the software.\n\n  Also, for each author's protection and ours, we want to make certain\nthat everyone understands that there is no warranty for this free\nsoftware.  If the software is modified by someone else and passed on, we\nwant its recipients to know that what they have is not the original, so\nthat any problems introduced by others will not reflect on the original\nauthors' reputations.\n\n  Finally, any free program is threatened constantly by software\npatents.  We wish to avoid the danger that redistributors of a free\nprogram will individually obtain patent licenses, in effect making the\nprogram proprietary.  To prevent this, we have made it clear that any\npatent must be licensed for everyone's free use or not licensed at all.\n\n  The precise terms and conditions for copying, distribution and\nmodification follow.\n\n                    GNU GENERAL PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. This License applies to any program or other work which contains\na notice placed by the copyright holder saying it may be distributed\nunder the terms of this General Public License.  The \"Program\", below,\nrefers to any such program or work, and a \"work based on the Program\"\nmeans either the Program or any derivative work under copyright law:\nthat is to say, a work containing the Program or a portion of it,\neither verbatim or with modifications and/or translated into another\nlanguage.  (Hereinafter, translation is included without limitation in\nthe term \"modification\".)  Each licensee is addressed as \"you\".\n\nActivities other than copying, distribution and modification are not\ncovered by this License; they are outside its scope.  The act of\nrunning the Program is not restricted, and the output from the Program\nis covered only if its contents constitute a work based on the\nProgram (independent of having been made by running the Program).\nWhether that is true depends on what the Program does.\n\n  1. You may copy and distribute verbatim copies of the Program's\nsource code as you receive it, in any medium, provided that you\nconspicuously and appropriately publish on each copy an appropriate\ncopyright notice and disclaimer of warranty; keep intact all the\nnotices that refer to this License and to the absence of any warranty;\nand give any other recipients of the Program a copy of this License\nalong with the Program.\n\nYou may charge a fee for the physical act of transferring a copy, and\nyou may at your option offer warranty protection in exchange for a fee.\n\n  2. You may modify your copy or copies of the Program or any portion\nof it, thus forming a work based on the Program, and copy and\ndistribute such modifications or work under the terms of Section 1\nabove, provided that you also meet all of these conditions:\n\n    a) You must cause the modified files to carry prominent notices\n    stating that you changed the files and the date of any change.\n\n    b) You must cause any work that you distribute or publish, that in\n    whole or in part contains or is derived from the Program or any\n    part thereof, to be licensed as a whole at no charge to all third\n    parties under the terms of this License.\n\n    c) If the modified program normally reads commands interactively\n    when run, you must cause it, when started running for such\n    interactive use in the most ordinary way, to print or display an\n    announcement including an appropriate copyright notice and a\n    notice that there is no warranty (or else, saying that you provide\n    a warranty) and that users may redistribute the program under\n    these conditions, and telling the user how to view a copy of this\n    License.  (Exception: if the Program itself is interactive but\n    does not normally print such an announcement, your work based on\n    the Program is not required to print an announcement.)\n\nThese requirements apply to the modified work as a whole.  If\nidentifiable sections of that work are not derived from the Program,\nand can be reasonably considered independent and separate works in\nthemselves, then this License, and its terms, do not apply to those\nsections when you distribute them as separate works.  But when you\ndistribute the same sections as part of a whole which is a work based\non the Program, the distribution of the whole must be on the terms of\nthis License, whose permissions for other licensees extend to the\nentire whole, and thus to each and every part regardless of who wrote it.\n\nThus, it is not the intent of this section to claim rights or contest\nyour rights to work written entirely by you; rather, the intent is to\nexercise the right to control the distribution of derivative or\ncollective works based on the Program.\n\nIn addition, mere aggregation of another work not based on the Program\nwith the Program (or with a work based on the Program) on a volume of\na storage or distribution medium does not bring the other work under\nthe scope of this License.\n\n  3. You may copy and distribute the Program (or a work based on it,\nunder Section 2) in object code or executable form under the terms of\nSections 1 and 2 above provided that you also do one of the following:\n\n    a) Accompany it with the complete corresponding machine-readable\n    source code, which must be distributed under the terms of Sections\n    1 and 2 above on a medium customarily used for software interchange; or,\n\n    b) Accompany it with a written offer, valid for at least three\n    years, to give any third party, for a charge no more than your\n    cost of physically performing source distribution, a complete\n    machine-readable copy of the corresponding source code, to be\n    distributed under the terms of Sections 1 and 2 above on a medium\n    customarily used for software interchange; or,\n\n    c) Accompany it with the information you received as to the offer\n    to distribute corresponding source code.  (This alternative is\n    allowed only for noncommercial distribution and only if you\n    received the program in object code or executable form with such\n    an offer, in accord with Subsection b above.)\n\nThe source code for a work means the preferred form of the work for\nmaking modifications to it.  For an executable work, complete source\ncode means all the source code for all modules it contains, plus any\nassociated interface definition files, plus the scripts used to\ncontrol compilation and installation of the executable.  However, as a\nspecial exception, the source code distributed need not include\nanything that is normally distributed (in either source or binary\nform) with the major components (compiler, kernel, and so on) of the\noperating system on which the executable runs, unless that component\nitself accompanies the executable.\n\nIf distribution of executable or object code is made by offering\naccess to copy from a designated place, then offering equivalent\naccess to copy the source code from the same place counts as\ndistribution of the source code, even though third parties are not\ncompelled to copy the source along with the object code.\n\n  4. You may not copy, modify, sublicense, or distribute the Program\nexcept as expressly provided under this License.  Any attempt\notherwise to copy, modify, sublicense or distribute the Program is\nvoid, and will automatically terminate your rights under this License.\nHowever, parties who have received copies, or rights, from you under\nthis License will not have their licenses terminated so long as such\nparties remain in full compliance.\n\n  5. You are not required to accept this License, since you have not\nsigned it.  However, nothing else grants you permission to modify or\ndistribute the Program or its derivative works.  These actions are\nprohibited by law if you do not accept this License.  Therefore, by\nmodifying or distributing the Program (or any work based on the\nProgram), you indicate your acceptance of this License to do so, and\nall its terms and conditions for copying, distributing or modifying\nthe Program or works based on it.\n\n  6. Each time you redistribute the Program (or any work based on the\nProgram), the recipient automatically receives a license from the\noriginal licensor to copy, distribute or modify the Program subject to\nthese terms and conditions.  You may not impose any further\nrestrictions on the recipients' exercise of the rights granted herein.\nYou are not responsible for enforcing compliance by third parties to\nthis License.\n\n  7. If, as a consequence of a court judgment or allegation of patent\ninfringement or for any other reason (not limited to patent issues),\nconditions are imposed on you (whether by court order, agreement or\notherwise) that contradict the conditions of this License, they do not\nexcuse you from the conditions of this License.  If you cannot\ndistribute so as to satisfy simultaneously your obligations under this\nLicense and any other pertinent obligations, then as a consequence you\nmay not distribute the Program at all.  For example, if a patent\nlicense would not permit royalty-free redistribution of the Program by\nall those who receive copies directly or indirectly through you, then\nthe only way you could satisfy both it and this License would be to\nrefrain entirely from distribution of the Program.\n\nIf any portion of this section is held invalid or unenforceable under\nany particular circumstance, the balance of the section is intended to\napply and the section as a whole is intended to apply in other\ncircumstances.\n\nIt is not the purpose of this section to induce you to infringe any\npatents or other property right claims or to contest validity of any\nsuch claims; this section has the sole purpose of protecting the\nintegrity of the free software distribution system, which is\nimplemented by public license practices.  Many people have made\ngenerous contributions to the wide range of software distributed\nthrough that system in reliance on consistent application of that\nsystem; it is up to the author/donor to decide if he or she is willing\nto distribute software through any other system and a licensee cannot\nimpose that choice.\n\nThis section is intended to make thoroughly clear what is believed to\nbe a consequence of the rest of this License.\n\n  8. If the distribution and/or use of the Program is restricted in\ncertain countries either by patents or by copyrighted interfaces, the\noriginal copyright holder who places the Program under this License\nmay add an explicit geographical distribution limitation excluding\nthose countries, so that distribution is permitted only in or among\ncountries not thus excluded.  In such case, this License incorporates\nthe limitation as if written in the body of this License.\n\n  9. The Free Software Foundation may publish revised and/or new versions\nof the General Public License from time to time.  Such new versions will\nbe similar in spirit to the present version, but may differ in detail to\naddress new problems or concerns.\n\nEach version is given a distinguishing version number.  If the Program\nspecifies a version number of this License which applies to it and \"any\nlater version\", you have the option of following the terms and conditions\neither of that version or of any later version published by the Free\nSoftware Foundation.  If the Program does not specify a version number of\nthis License, you may choose any version ever published by the Free Software\nFoundation.\n\n  10. If you wish to incorporate parts of the Program into other free\nprograms whose distribution conditions are different, write to the author\nto ask for permission.  For software which is copyrighted by the Free\nSoftware Foundation, write to the Free Software Foundation; we sometimes\nmake exceptions for this.  Our decision will be guided by the two goals\nof preserving the free status of all derivatives of our free software and\nof promoting the sharing and reuse of software generally.\n\n                            NO WARRANTY\n\n  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\nFOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\nOTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\nPROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\nOR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\nMERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\nTO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\nPROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\nREPAIR OR CORRECTION.\n\n  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\nWILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\nREDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\nINCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\nOUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\nTO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\nYOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\nPROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\nPOSSIBILITY OF SUCH DAMAGES.\n\n                     END OF TERMS AND CONDITIONS\n\n            How to Apply These Terms to Your New Programs\n\n  If you develop a new program, and you want it to be of the greatest\npossible use to the public, the best way to achieve this is to make it\nfree software which everyone can redistribute and change under these terms.\n\n  To do so, attach the following notices to the program.  It is safest\nto attach them to the start of each source file to most effectively\nconvey the exclusion of warranty; and each file should have at least\nthe \"copyright\" line and a pointer to where the full notice is found.\n\n    <one line to give the program's name and a brief idea of what it does.>\n    Copyright (C) <year>  <name of author>\n\n    This program is free software; you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation; either version 2 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License along\n    with this program; if not, write to the Free Software Foundation, Inc.,\n    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n\nAlso add information on how to contact you by electronic and paper mail.\n\nIf the program is interactive, make it output a short notice like this\nwhen it starts in an interactive mode:\n\n    Gnomovision version 69, Copyright (C) year name of author\n    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n    This is free software, and you are welcome to redistribute it\n    under certain conditions; type `show c' for details.\n\nThe hypothetical commands `show w' and `show c' should show the appropriate\nparts of the General Public License.  Of course, the commands you use may\nbe called something other than `show w' and `show c'; they could even be\nmouse-clicks or menu items--whatever suits your program.\n\nYou should also get your employer (if you work as a programmer) or your\nschool, if any, to sign a \"copyright disclaimer\" for the program, if\nnecessary.  Here is a sample; alter the names:\n\n  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n\n  <signature of Ty Coon>, 1 April 1989\n  Ty Coon, President of Vice\n\nThis General Public License does not permit incorporating your program into\nproprietary programs.  If your program is a subroutine library, you may\nconsider it more useful to permit linking proprietary applications with the\nlibrary.  If this is what you want to do, use the GNU Lesser General\nPublic License instead of this License.\n"
        },
        {
          "name": "CREDITS",
          "type": "blob",
          "size": 2.0556640625,
          "content": "CREDITS\n=======\n\nWidelands uses a lot of libraries and files,\nwhich are distributed by other Open-Source Projects.\nAnd you really can believe, that widelands still\nwould be in the stoneage, if not for using these files :-).\n\nThe Widelands Development Team thanks the following projects:\n\n    libSDL2\n    libSDL2_mixer\n    libSDL2_image\n    libSDL2_ttf\n    * All files from SDL2-Project\n    * Project can be found at http://www.libsdl.org/\n\n\n    Gettext\n    * By Free Software Foundation, Inc.\n    * Project can be found at http://www.gnu.org/software/gettext/\n\n\n    libiconv\n    * By Free Software Foundation, Inc.\n    * Project can be found at http://www.gnu.org/software/libiconv/\n\n\n    libpng\n    * By Glenn Randers-Pehrson, Andreas Eric Dilger & Guy Eric Schalnat\n    * Project can be found at http://www.libpng.org/\n\n\n    zlib\n    * By Jean-Loup Gailly and Mark Adler\n    * Project can be found at http://www.gzip.org/zlib/\n\n\n    Asio\n    * Project can be found at https://think-async.com/Asio/\n\n\n    STLport\n    * By STLport Consulting, Inc.\n    * Project can be found at http://www.stlport.com\n\n\n    Freefonts\n    * By The Free Software Foundation, Inc.\n    * Project can be found at http://savannah.gnu.org/projects/freefont/\n\n\n    Inno Setup\n    * By Jordan Russel\n    * Project can be found at http://www.innosetup.com\n\n\n    CMake\n    * By Kitware, Inc\n    * Project can be found at http://www.cmake.org\n\n\n    http://www.Sourceforge.net\n    * for their Portal and hosting us till early 2010\n\n\n    Bazaar\n    * By Canonical Ltd.\n    * Project can be found at http://bazaar.canonical.com/en/\n\n\n    Lua\n    * by Lablua, PUC-Rio\n    * http://www.lua.org\n\n\n    Eris\n    * by Florian Nücke\n    * https://github.com/fnuecke/eris\n\n\nand last but not least:\n    https://github.com/\n    * for their git service\n    * bugtracker\n    * and many more services :-)\nand before\n    http://www.launchpad.org\n    * for their bazaar service\n\n\n\nA big thank you goes to \"Studio 10a\", owned by Stichting Voorburgse en\nLeidschendamse Lokale Omroep Midvliet, for supporting the recording of\nsome of our sound effects!\n\n"
        },
        {
          "name": "ChangeLog",
          "type": "blob",
          "size": 278.4267578125,
          "content": "[TOC]\n\n## Post-1.2.1 until [git a065ca7](https://codeberg.org/wl/widelands/commit/a065ca721cce8427891ba7765148e5be52b9e83f)\n\n### Animations, Icons and Overlays\n\n\n### Sounds and Music\n\n- Added the ability to skip to next music track (CB #4928 / GH #6568)\n\n\n### Tutorials and Campaigns\n\n- bar02: Adjust check for sentry in 'basic economy' objective (GH #6482 / CB #4844)\n- Fix empire 4 starting bug (GH #6508 / CB #4869)\n- atl01: Don't eat sawdust (GH #6521 / CB #4882)\n\n\n### Scripting\n\n- Add Lua function `play_sound` (CB #4791 / GH #6429)\n- New Map Object Program `script=<function>` (CB #4864 / GH #6503)\n- Expose more functions to Lua Dropdown and Listselect API (CB #4848 / GH #6486)\n- Make mapobjects findeable by their name from worker program findobject (CB #4855 / GH #6493)\n- Lua attribute `player.ai_type` (GH #6001 / CB #4412)\n\n\n### Maps\n\n- Remove playername duplicity from Astoria map (CB #4767 / GH #6405)\n\n\n### Add-Ons\n\n- Allow plugins to define hyperlink targets (CB #4794 / GH #6432)\n- Update add-on i18n for tinygettext (CB #4815 / GH #6453)\n- Allow themes to override the dither edge mask (CB #4814 / GH #6452)\n- Ignore hidden files when uploading add-on (CB #4779 / GH #6417)\n- Make add-on upload more robust against long processing times and show better error messages (CB #4799 / GH #6437)\n- Allow changing ware and worker target quantities and preciousness in `modify_unit` (GH #6451 / CB #4813)\n- Check for illegal filenames in add-on before upload (GH #6495 / CB #4857)\n- Plugins in Main Menu (CB #4748 / GH #6386)\n- Show add-ons alpha server name earlier (CB #4911 / GH #6550)\n- Keyboard shortcuts for add-ons (CB #4889 / GH #6528)\n- Add-Ons Website Maps Integration (CB #4692 / GH #6329)\n\n\n### Saveloading\n\n\n### AI\n\n\n### Gameplay\n\n- Fix soldier request for expedition ships (CB #4765 / GH #6403)\n- Economic Districts (CB #4708 / GH #6345)\n\n\n### User Interface\n\n- Prettier long dropout queues (CB #4789 / GH #6427)\n- Add context menus to TextInput and window titlebar (CB #4790 / GH #6428)\n- Message preview archiving enhancements (CB #4735 / GH #6372)\n- Cancel roadbuilding with Esc key (GH #6456 / CB #4818)\n- Ship window improvements (GH #6422 / CB #4784)\n- Dropdown Listselect: horizontal centering of pics (CB #4845 / GH #6483)\n- Make Show/Hide buildings option in game also affect immovables (CB #4861 / GH #6499)\n- Disable objectives button if there are no current objectives (CB #4867 / GH #6506)\n- BuildingStatisticsMenu: fix update spam when minimized (CB #4873 / GH #6512)\n- Listselect: properly clear entry_cache_ (CB #4879 / GH #6518)\n- Listselect: reset/recalculate max_pic_width_ upon clear()/remove() (CB #4846 / GH #6484)\n\n\n### Internationalization\n\n- Improvement in some english texts and localization (CB #4797 / GH #6435)\n- Update paths for `buildcat.py` (GH #6458 / CB #4820)\n- Fix Textdomains for Launch Game Checkboxes (CB #4824 / GH #6462)\n- Validate environment locale settings (CB #4817 / GH #6455)\n\n\n### Help and Documentation\n\n- Update performance helptext for comparable buildings between tribes, medium sites (GH #6460 / CB #4822)\n- Misc documentation fixes (GH #6540 / CB #4901)\n- Documentation fix and examples for `modify_unit` (CB #4932 / GH #6571)\n\n\n### Editor\n\n- Fix regression: immovables show/hide in editor (CB #4870 / GH #6509)\n- Editor Show/Hide option to draw ocean overlays (CB #4821 / GH #6459)\n- Add height heat map mode to editor (CB #4410 / GH #5994)\n\n\n### Graphics Engine\n\n- Show splash screen earlier and reintroduce intro music (GH #6412 / CB #4773)\n- Remove hardcoded window border sizes (CB #4778 / GH #6416)\n- Fix format strings in gl/initialize.cc (CB #4880 / GH #6519)\n- Update window borders on theme change (CB #4885 / GH #6524)\n\n\n### Networking\n\n\n### Build System\n\n- Fix possibility of random failure in template test (CB #4757 / GH #6395)\n- Update vcpkg for sdl2-mixer 2.8.0 (CB #4768 / GH #6406)\n- Clear misc clang-tidy-16 checks (GH #6420 / CB #4782)\n- Replace gettext with tinygettext (CB #4772 / GH #6411)\n- Update i18n.yaml for node.js 20 (CB #4834 / GH #6472)\n- Fix new compiler warning on clang-18 (CB #4827 / GH #6465)\n- Visible option of RelWithDebInfo build type (CB #4903 / GH #6542)\n- Regression test improvements (CB #4876 / GH #6515)\n- Temporary windows build fix (CB #4924 / GH #6564)\n- Mingw dependencies pin architecture (CB #4925 / GH #6565)\n- Add new modplug dependency to sdl2 mixer (GH #6573 / CB #4933)\n- Retry hdiutil with any error code (CB #4927 / GH #6567)\n- Use all workarounds for hdiutil errors from actions/runner-images#7522 (GH #6574 / CB #4934)\n\n\n### Other Issues\n\n- Strip authors from commit messages in dev-release (CB #4762 / GH #6400)\n- Fix use of `push_back()` / `at()=` in preallocated vectors (GH #6464 / CB #4826)\n- Refactor and disallow type conversion operators (GH #6373 / CB #4736)\n- Make some rawstring in codecheck rules (CB #4828 / GH #6466)\n- Remove checking and pinning msvc toolset version in the CI (CB #4858 / GH #6496)\n- Flag: fix `nr_of_roads()` (GH #6514 / CB #4875)\n- Include missing `<cstdint>` (CB #4883 / GH #6522)\n- Remove misplaced, obsolete comment from warehouse.h (GH #6529 / CB #4890)\n- BaseListselect::draw() - code gardening (CB #4847 / GH #6485)\n- Decomission Listselect<Entry&> (CB #4895 / GH #6534)\n- Update compiler versions in CI (CB #4908 / GH #6547)\n- Temporary fix for macos CI builds (CB #4912 / GH #6552)\n- Update macOS versions in the CI (CB #4809 / GH #6447)\n\n\n## Release 1.2.1\n\n- Skip invalid map files in editor Load/Save map window (CB #4795 / GH #6433)\n- Fix memory leaks in main menu Watch Last Replay (CB #4788 / GH #6426)\n- Game setup: Unselect incompatible starting conditions when changing win condition (CB #4777 / GH #6415)\n- Add thread identifier to crash reports (CB #4801 / GH #6439)\n- Check for invalid combination before calling DefaultAI::expedition_management() (CB #4800 / GH #6438)\n- Territorial Lua error fix (CB #4805 / GH #6443)\n- Remove AV1 decoder dependency in mingw-64 (CB #4837 / GH #6474)\n- Patches to support netbsd-pkgsrc (CB #4851 / GH #6489)\n- Keep vcpkg_ref in a repository variable instead of a file (CB #4860 / GH #6498)\n- vcpkg workflow fix for v1.2.1\n- Fix RelWithDebInfo build type (CB #4854 / GH #6492)\n- Fix out-of-bounds memory access when using `--editor` without filename (CB #4894 / GH #6533)\n- MacOS and other CI improvements (CB #4899 / GH #6538)\n- Temporary fixes for MinGW and MacOS CI builds\n- Fix for GH#6444 using mac dylibbundler to packe the .app Bundle (CB #4910 / GH #6549)\n- Re-add gettext ubuntu package\n- Update translations for v1.2.1 (CB #4916 / GH #6556)\n- Replace MD5 checksumming code with `libmd` (CB #4831 / GH #6469)\n- Fix LaunchMPG map seafaring check for naval warfare (CB #4918 / GH #6558)\n- Fix anchored ship trying to swim towards buffer-underflow (CB #4921 / GH #6561)\n- Fix desync in Discovery/New World starting conditions (CB #4926 / GH #6566)\n\n\n## Release 1.2\n\n### Animations, Icons and Overlays\n\n- Remove leftover individual animation frames of buildings (#5269)\n- Upscaled editor splash image (#5634)\n- Move empty sign on Atlantean mines to make it visible when status labels are shown (#5642)\n- Redesigned Amazon frontiers and flags with more visible playercolour (#5714)\n- Updated Frisian Campaign Portraits (#5737)\n- Add high resolution images for Empire ship (#5950)\n- More playercolour for amazon ship (#6109)\n- Add high resolution images for most tribe immovables (#6137)\n- High resolution images of basic wares from blender models (CB #4576 / GH #6235)\n- Bigger `menu.png` for Amazon ship (#6143)\n- Optimize images with PNGQuant (CB #4754 / GH #6392)\n\n\n### Tutorials and Campaigns\n\n- Minor tweaks in emp03 to reflect user comments in #5478 (#5648)\n- Fri05 (#5712)\n- Scenario \"Island hopping\" fix (#5746)\n- Carry over ship names in Atlantean campaign (#5781)\n- Tutorial 01 fixes (#5909)\n- Fix Food Production objective in first atlantean campaign (#6081)\n- Fix changed tab name in encyclopedia tutorial (CB #4707 / GH #6344)\n- Fix building window name and translation regressions in emp04 and tut01 (GH #6380 / CB #4743)\n- Make open building window checks in campaigns saveloading resistant and other campaign fixes (CB #4747 / GH #6385)\n- Campaign consistency fixes (CB #4755 / GH #6393)\n\n\n### Scripting\n\n- Limit `set_soldiers` to 10000 soldiers (#5568)\n- Add function `LuaMap::wrap_field` with wraparound (#5739)\n- Using helper functions in performance texts. (#5773)\n- Make Amazon treetop sentry placeable by scripts (#5821)\n- Optimize `LuaField` garbage collecting efficiency (#5839)\n- Validate that all tribes possess all special animations (#5862)\n- Fix constructionsite former buildings in Lua `place_building` (#5857)\n- Add \"all\" to `player:get_buildings()` and `player:get_constructionsites()` (#5988)\n- Cleanup: variable `dirname` is local in all lua files (#5986)\n- Lua scripts can use `wl.Descriptions().building_descriptions` (#5993)\n- Move `lunit.lua` in `test/scripting/` (#5996)\n- Add new building type market to `is_building()` (#6015)\n- Fix upcasting map object descriptions to Lua (#5997)\n- Misc API Enhancements (#5975)\n    - Write map tags array in `wl_map_info`\n    - Add function `LuaWorker::evict`\n    - Add property `LuaMapObject.exists`\n    - Expose worker buildcost to `modify_unit`\n- UI Plugins (#5872, CB #4420 / GH #6030)\n- Lua UI API Extensions (#5933)\n    - Read+Write access to most properties of all kinds of UI elements at runtime\n    - Add support for checkboxes, radio groups, unique windows, spinboxes, sliders (all three flavours), progress bars, editboxes and multiline editboxes\n- Cleanup: Deduplicate index variables in Lua `get_x_descriptions` (#6026)\n- Cleanup: Remove last uses of deprecated `tribe.carrier2` and `tribe.carrier` (#6025)\n- Win condition artifacts minor fix (#6042)\n- Implement `walk=<direction>` in worker programs (CB #4467 / GH #6149)\n- Pass correct parameter to lua_typename() (CB #4646 / GH #6282)\n- Add Lua APIs for Missing Bob Types (#6125): `PinnedNote`, `NavalInvasionBase`, `ShipFleetYardInterface`, `FerryFleetYardInterface`\n- Clarify use of spinbox parameters from Lua (CB #4734 / GH #6371)\n- Fix icons on dropdowns in Lua API (CB #4742 / GH #6379)\n\n\n### Maps\n\n- Map Required Widelands Version Check (#5884)\n- Add a building plot to unusable port island on Calvisson (#6084)\n- Remove unwinnable-with-autocrat hint from map Crossing The Horizon\n\n\n### Add-Ons\n\n- Allow themes to replace arbitrary UI images (#5734)\n- Allow starting new game with additional world add-ons (#5718)\n- Enable World Add-Ons in Random Matches & Maps (#5753)\n- Make richtext.lua styleable and allow partial theme addons (#5748)\n- Make `modify_unit` index lookup load-order-safe (#5871)\n- Disallow add-ons which are incompatible with the current Widelands version (#5879)\n- Fix add-ons admin dialog Enter key handling (#5763)\n- Turn unguaranteed add-on dependency check assert into a conditional (#5829)\n- Add-Ons Packager: Compute Minimum Widelands Version For Maps (#5905)\n- Do not hide Add-On comment text during layout (#6032)\n- Fix false positives in add-ons packager change detection (#6033)\n- Add missing `richtext_escape` for add-ons error message (#6049)\n- Don't require World add-ons to be globally enabled for dependent Maps add-ons (#6057)\n\n\n### Saveloading\n\n- Allow loading another replay in replay mode (#5611)\n- Fix saving game with new name (#5639)\n- Replays: Single-File, Optional Writing, Autodeleting (#5645)\n- Fix Filesystem Errors from ReplayWriter (#5724)\n- Save only used terrains in terrain packet (#5803)\n- Fix Shipyard/PortDock/FleetInterface Load Order Regression (#5928)\n- Building Stats Menu checks if saveloaded selection is still available (#6050)\n- Settlers2/RTTR Map Loading Fixes (#6054)\n    - Support RTTR Maps\n    - Fixes for stones placement\n    - Allow up to 8 players\n    - More useful error messages for invalid maps\n- Fix `PlayerMessageCommand` Saveloading (#6097)\n- Fix double cleanup for direct loading of invalid replay (#6098)\n- Reinitialize forester cache when reloading (#6105)\n- Do not save partially initialized window (GH #6223 / CB #4564)\n- Save and load garrison settings (#5983)\n- Remove v1.0 compatibility code (CB #4615 / GH #6276)\n- Allow loading last savegame/replay/edited map from the command line (CB #4470 / GH #6153)\n- Remove invalid NavalInvasionBase cleanup assert (CB #4723 / GH #6360)\n\n\n### AI\n\n- Small AI Fixes (#5683)\n- AI Diplomacy (#5774)\n- Make AI supplycheck non recursive and more efficient (#5866)\n- Navalwarfare AI (CB #4441 / GH #6083)\n- Fix integer overflow in AI ship utilisation calculation (CB #4713 / GH #6350)\n- Make AI set port garrison according to soldier availability (GH #6351 / CB #4714)\n\n\n### Gameplay\n\n- Configurable Win Condition Duration (#5380)\n- Seed random number generator before starting new game (#5608)\n- Fix trainingsites' definition of when a soldier is present (#5640)\n- Fix portspace detection (#5647)\n- Cancel battles when players negotiate truce (#5665)\n- Allow letting individual productionsites produce indefinitely (#4961)\n- Naming Warehouses and Ships (#5703)\n- Forbid soldiers leaving buildings through the wall (#5728)\n- Make \"Fogless\" a Game Setting (#5733)\n- Fix sleep times in production buildings (#5778)\n- Fix player end status handling (#5826)\n- Refactor Game Configuration Flags (#5863)\n- Link ship/ferry yards to fleets and produce ships/ferries as needed (#5912)\n- Fix wild pointer dereference during ship removal (#5966)\n- Win condition Wood Gnome can have several winners (#5952)\n- Count trees for start conditions like Poor Hamlet (#5964)\n- Clean up legacy resource handling code (#6000)\n- Cleanup failed game state before entering menu after game error (#6004)\n- Free Unsent PlayerCommands on Cleanup (#6011)\n- Well-defined shipyards collaboration (#6070): When a shipyard has multiple shipconstructionsites nearby, then on each working cycle a random site to work on is picked.\n- Custom Ship & Warehouse Naming Lists (#6056)\n- Add mutex locks for economy creation/deletion (#6091)\n- Safeguard pathfinding with a mutex (#6104)\n- Emergency saving enhancements (#6108)\n    - Emergency saves from network games are now saved as network savegames instead of singleplayer savegames.\n    - During the emergency save, show a game saving progress screen like for manual saves.\n- More consistent worker eviction (#6136)\n- Further enhancements for ship construction (#6129)\n- Add quartz to the Amazon economy (CB #4512 / GH #6170)\n- Amazon starting conditions: Fix input quantities in stone workshop (GH #6178 / CB #4520)\n- Cancel battles only when players negotiate real truce (CB #4574 / GH #6233)\n- Fix evicting of secondary workers (CB #4657 / GH #6294)\n- Increase amount of coal in Amazon starting conditions (CB #4681 / GH #6318)\n- Make Amazons poor hamlet more forgiving with tools (CB #4554 / GH #6211)\n- Naval warfare baseplate implementation\n- Naval Warfare: Healing (#5795)\n- Naval Warfare: Onboard Soldiers Attack Bonus  (#5796)\n- Naval Warfare: Invasion Strategy (#5847)\n- Naval Warfare: Coastal Invasion (#5859)\n- Naval Warfare: Invasion Enhancements (#5869)\n- Naval Warfare: Better Invasion End Detection (#5887)\n- Naval Warfare: Make detected portspaces addressable for expeditions (#5929)\n- Garrisons for Warehouses and Warships (#5930)\n- Position attacking warships 2 nodes west of the defender (#5947)\n- Fix Warship Soldiers Capacity & Requesting Issues (#5953)\n- Fix stacking order of new ship battles (#5962)\n- Make `Game::random_location()` Normalize Coords (#5976)\n- Don't detect portspace under own port (#5974)\n- Fail safely when ship destination dock is unreachable (#5972)\n- Fix soldier request deletion when ship is destroyed (#5989)\n- Forbid soldiers boarding ships on high sea (#6006)\n- Update expedition swimmable directions on every field (#6018)\n- Forbid ships from sailing through too-narrow straits (#6013)\n- Reroute ships on the way to port-under-construction upon port completion (#6045)\n- Misc Naval Warfare Segfault/Assert Fixes (#6066)\n    - Fix assert failure during soldier swapping on a warship with maximal soldier capacity\n    - Transport ships skip updating warship soldier requests and kickouts\n- Make `SoldierList` robust against map object removal (#6087)\n- Make AttackPanel/Window robust against object deletion (#6123)\n- Fix naval battle stacking in complex situations (#6071)\n- Stop ship battles when ship is destroyed (#6099)\n- Garrisoned soldiers shouldn't count towards economy target (#6086)\n- Invasion soldiers conquer portspace for the duration of the invasion (#6115)\n- Warships don't detect own ports as portspaces (#6088)\n- Guard against invalid ship battle situations (#6140)\n- Track warship soldier requests (#6122)\n- Initialise `Game::naval_warfare_allowed_` as `false` (CB #4749 / GH #6387)\n- Fix replay desync with timed win conditions\n\n\n### User Interface\n\n- Default select the first worker to kick from a production site (#5515)\n- Do not cut filename extension for directories (#5623)\n- Consume every keydown event in editbox (#5626)\n- Show name and experience type of missing workers (#5432)\n- Delete selected text on text input (#5633)\n- Show coming and absent soldiers in building soldier list (#5437)\n- Draw Actual Game Speed (#5621)\n- Make diplomacy window available to spectators (#5609)\n- Fix cursor flashing (#5674)\n- Redesign Diplomacy Accept/Reject/Retract UI (#5670)\n    - Allow retracting your own pending invitations and join requests.\n    - Join requests may be approved or rejected by any member of the team, not just the player the request was made to.\n    - Removed the confirmation popup and instead added the buttons to the diplomacy window.\n    - Prompt for confirmation before resigning.\n- Quick Navigation GUI (#5487)\n- UI Elements Fixes And Tweaks (#5668)\n     * Allow using PageUp/PageDown and Ctrl+scroll in sliders and spinboxes to change the value faster\n     * Make sure that no slider nor spinbox can wrap around due to integer overflow\n     * Add missing changed() call in spinbox when value is set to min/max (fixes warning update in Editor/Map Options/Ferry Range)\n     * Decrease width of big step buttons of spinboxes (should help dealing with #5631)\n     * Fix updating slider position when min/max is changed (affected attack window)\n     * Add \"Click to sort/reverse\" to table header tooltips (requested by @frankystone for map selection)\n     * Reset sorting order when user changes column to sort by\n     * Handle big step in inputqueue\n     * Allow using Shift + arrow keys in priority slider to set all input priorities at once\n     * Stabilize selection end in editbox (fixes #5676)\n     * Handle big step in soldier capacity settings\n     * Converted all users of `get_keyboard_change()` to handle big step, remove `enable_big_step` option\n- Add shortcut keys for all menu items (#5705)\n     * add shortcut to statistics button tooltip in interactive_spectator.cc\n     * unify Load and Save hotkeys\n     * change some editor tool hotkeys and make all tools use Shift modifier\n     * editor new map window: create new map when terrain is doubleclicked\n     * editor: remove Alt modifier for third tool function (old TODO item)\n     * editor: ask for exit confirmation even if map is not modified (still skip on Ctrl+click)\n     * ask for exit confirmation in main menu (can be skipped by Ctrl+clicking)\n- Worker and Soldier Statistics Tweaks (#5607)\n    - Fix incorrect genstats labels font colour\n    - Add statistics about civil buildings defeated\n    - Workers without buildcost and soldiers now don't count for the workers graph\n    - Refactored military graph calculation\n    - Show total number of soldiers in soldier stats window\n- Pinned Notes (#5569)\n- Show flags preview in road building mode when Ctrl is held (#5557)\n- Fix SoldierList off-by-one buffer overflow (#5726)\n- Trigger `closed` signal when closing unique window (#5731)\n- Add tooltips to ItemWaresDisplay and fix icons alignment (#5729)\n- Fix heap-use-after-free in `BuildingWindow::init` (#5720)\n- Keep player colours if unchanged when changing slot (#5719)\n- Fix hang on building window warp (#5747)\n- Add Go To Road button to fieldaction roadbuild window (#5732)\n- Fix crash when dialog opens while dragging map (#5752)\n- Make Info Panel a Snap Target & Remove \"Snap Only When Overlapping\" Option (#5566)\n- Merge Add-On Dirnames in Map Select UIs (#5766)\n- Disable fastclick during game loading (#5780)\n- Fix collapsing input queues and other window handling fixes and enhancements (#5785)\n- Fix window Z ordering priorities (#5812)\n- Fix segfault in Panel::move_to_top() (#5824)\n- Sorting maps by size sorts by number of fields (#5842)\n- Integrate EditBox and MultilineEditbox with the primary selection buffer (#5835)\n- Watch window fixes and tweaks (#5820)\n- Improve landmark behaviour when game main window is resized (#5825)\n- Darken background behind modal windows (#5867)\n- Fix Window::move_out_of_the_way() (#5841)\n- Refine game error handling (#5735)\n- Fix modality and threading issues around `StoryMessageBox` (#5897)\n- More Editbox Accessibility (#5873): Handle double-click, triple-click, Ctrl+Backspace, Ctrl+Delete\n- Minimap Improvements (#5876)\n    - Highlight traffic jams\n    - Highlight attacks\n    - Show artifacts in editor\n    - Fix contrasts between layers\n- Make Main Menu Dropdown Entries a Bigger Click Target (#5902)\n- Unify `EditBox` and `MultilineEditbox` (#5900)\n- Layout ship window before setting fastclick target (#5942)\n- Fix regression in `EditBox::scroll_cursor_into_view` (#5946)\n- Fix Segfault in `FieldActionWindow` (#5982)\n- Revert preventing `move_inside_parent()` to move `UniqueWindow`s with saved position (#5995)\n- Name All UI Elements (#5963)\n- Remove hardcoded panel sizes in launch game window (#6016)\n- Do not layout invisible box items (#6035). Resolves game setup UI regressions.\n- Fix `Window::move_inside_parent` bottom docking (#6055)\n- Options Window Cleanup (#6059)\n    - Remove mouse grab option\n    - Make syncstream writing a command-line-only option\n    - Redesign sound options layout\n    - Fix layouting for checkboxes and translation stats text\n- User Inactivity Detection (#6048)\n    - Autosaves are skipped if the user has not been active since the last autosave,\n      or if gametime progressed by less than half of the autosave interval. Autosaves can also happen during pauses.\n      This behaviour can be toggled via an option (default: on).\n    - If the user is inactive for a configurable time span (default: disabled), the game is automatically set to paused.\n- Fix racecondition segfault when opening building window (#6065)\n- Fix editbox horizontal scrolling mouse clicks regression (#6060)\n- Fix LaunchMPG Layouting Segfault (#6079)\n- Fix more box regressions (#6101)\n    - Fix input queue priority indicators positions\n    - Fix LaunchMPG client box scrolling\n- Draw system clock also in main menu (#6103)\n- Debugconsole and input history improvements (#5944)\n- Allow saving favourite colours in colour chooser (#6124)\n- Remember more settings in stock/unique window (#6128)\n- Fix selection cursor setting after picking custom starting position (#6082, #6152)\n- Different overlay image for valid custom starting positions (#6148)\n- Refactor `WaresDisplay` ware list handling (#6144)\n- Fix comment box overflow (CB #4499 / GH #6157)\n- Do not handle_mousein in ware display (CB #4501 / GH #6159)\n- Fix heap-use-after-free in message preview drawing (CB #4511 / GH #6169)\n- Game title box (GH #6172 / CB #4514)\n- Add zero check for division in textinput (GH #6218 / CB #4559)\n- Fix duplicated richtext wrapping in messagebox (CB #4587 / GH #6246)\n- Ask for more information when reporting crashes (CB #4592 / GH #6252)\n- Fix end status text sorting in game summary window (CB #4539 / GH #6197)\n- Fix size assert for very large panels (CB #4652 / GH #6289)\n- Refactor technical info box to handle long lines better (CB #4662 / GH #6299)\n- Allow sending expeditions and warships to specific ports, ships, and notes (#5786)\n- Send message when ship arrives at player-specified destination (#5832)\n- Naval Warfare: Attack UI Refactoring (#5885)\n- Naval Warfare: Attack Anything in Range (#5908)\n- Naval Warfare: Show fleet strength in general statistics (#5926)\n- Disambiguate selectable ship click targets (#5938)\n- Don't refresh inexistent soldier box in warehouse csite window (#5968)\n- Forbid spectators setting ship destination (#6010)\n- Redesign ship healthbar/bonus rendering to fix overflow-hang (#6039)\n- Warship soldier capacity setting enhancements (#6044)\n    - Allow changing soldier capacity and preference while refitting to warship.\n    - Turn \"click soldier to send away\" info texts into tooltips to make windows narrower.\n- Forbid changing soldier capacity in replays (#6053)\n- Misc sea-fighting-related UI tweaks (#6142)\n    - The attack window now uses bigger icons for ships to display the health bar properly, and also draws ship icons as background.\n    - Clicking and dragging on an empty part of the soldier list drags the window now.\n    - The ship window shows the warship's health.\n    - Fixes the bug with filtering the ship destination dropdown.\n    - Sinking ships show their status text as \"Sinking\" and their health as zero.\n    - Added an assert so if a very weird, very rare GL race condition is encountered in a debug build we might get a helpful backtrace of all threads.\n- Make naval warfare a game flag, disabled by default (CB #4547 / GH #6205)\n- Don't send \"known portspace\" messages for ship underway to destination (CB #4655 / GH #6292)\n- Show total number of ships in seafaring stats menu (CB #4685 / GH #6322)\n- Fix duplicated setting name for replay shortcuts (CB #4721 / GH #6358)\n- Fix deadlock in mutex responsiveness code (CB #4726 / GH #6363)\n- Use unique names for map object windows (CB #4737 / GH #6374)\n- Speed up Wares Display Drawing (GH #6382 / CB #4744)\n\n\n### Internationalization\n\n- String Fixes (#5710, #5782, #5999, CB #4697 / GH #6334)\n- Capitalisation of tribe names (#5910, #5913, #5916)\n- Keep PO and POT files in sync in translations updates (#6027)\n- Translations update CI: Commit pure translations separately (#6064)\n- Make spinbox current value and change-by value translatable separately (CB #4612 / GH #6273)\n- Don't assemble partial string for detected portspace tooltip (CB #4718 / GH #6355)\n- Turn confusing translators comment into helpful (CB #4728 / GH #6364)\n\n\n### Help and Documentation\n\n- Encyclopedia Hyperlinks (#5533)\n- Fix buildings help button (#5661)\n- Explain clearer what an economy is (#5630)\n- Trainingsite encyclopedia enhancements (#5673)\n- Further fixes of economy gametips (#5711)\n- Fix performance text in encyclopedia and sleep times in production buildings where the workers need some experience (#5768)\n- Update keyboard controls help and generate it semi-automatically (#5717)\n- Follow links in building help window (#6003)\n- Helptexts about roads blocking shorelines for workers (#6014)\n- Update performance helptext for buildings producing more wares (#5861)\n- Some documentation rephrasings (#6041)\n- Documentation: attribute name with underline (and not space) (CB #4536 / GH #6194)\n- Doc Lua API: current examples for get_build_id() (GH #6209 / CB #4552)\n- Update performance helptext for comparable buildings between tribes, small sites (GH #6068 / CB #4435)\n- Fix documentation for workers (GH #6244 / CB #4585)\n- Doc for lua function update_toolbar() matches code (CB #4594 / GH #6254)\n- Extend documentation about attributes of units (GH #6195 / CB #4537)\n- Documentation: place_road() needs a flag, not a field (GH #6262 / CB #4601)\n- Fix documentation of the objectives lua interface (CB #4613 / GH #6274)\n- Lua doc: explain `wl.Game().real_speed` a bit better (CB #4665 / GH #6302)\n- Lua styles documentation (CB #4704 / GH #6341)\n- Add images to theme documentation for fonts and buttons (CB #4695 / GH #6332)\n- Lua doc about playernumber fixed (CB #4535 / GH #6193)\n- Turn function mentions into links in richtext.lua examples section (CB #4738 / GH #6375)\n\n\n### Editor\n\n- Explain waterway setting in Editor Map Options and add toolips to all map tags (#5653)\n- Map Generator Add-Ons & Map Generating Dialog Accessibility Tweaks (#5537)\n- Editor: Show Starting Positions on Minimap (#5704)\n- Fix segfault in multiselect editor tools (#5708)\n- 3-Click Map Publishing as Add-On Inside the Editor (#5635)\n- Fix Editor Add-Ons Postloading (#5783)\n- Editor immovables menu: Added size to tooltip (#5849)\n- Editor Automatic Tree Placement Tool (#5848)\n- Fix editor painting mode regression (#5856)\n- Z-Order Map Options Window Above Save Map Window (#5956)\n- Editor Tool Random Gap (#5864)\n- Select info tool after opening history window (#6002)\n- Sanitize suggested teams lineups (CB #4673 / GH #6310)\n\n\n### Graphics Engine\n\n- Show chat with customized player colours (#5671)\n- Indicate soldier preference in milsite stats string (#5730)\n- Fix map pixel to triangle computation regression (#5740)\n- Work around `glewInit` crash on Wayland (#5784)\n- Fix undefined `GLEW_ERROR_NO_GLX_DISPLAY` (#5804)\n- Replace directory with animation_directory in animations (#5519)\n- Linkify URLs in Rendered Text (#5870)\n- Scalable Buildhelp Overlays (#5868)\n- Implement padding numbers with digit width space UTF-8 characters (#5883)\n- Remove superfluous `SDL_GetModState()` calls (#5945)\n- Allow lookup of richtext inline images without specifying scale suffix (#5935)\n- Continuous Bob Animations (#5954)\n- Force all textures to 32bit for Mesa 23.x (#6072)\n- Correct float-int type mismatch in fragment shader's alpha calculation (CB #4586 / GH #6245)\n\n\n### Networking\n\n- Networking log output and formatting usage cleanups (#5560)\n- Prevent spectating host from changing game speed (#5604)\n- Show enabled game-relevant add-ons before hosting (#5599)\n- Disambiguate temporary savegame for multiple LAN games (#5875)\n- Show error message immediately when host leaves metaserver game (#6012)\n- Game client win condition duration bugfixes (#6073): The duration spinbox is disabled for the gameclient, and an update from the host triggers no `changed()` signals on the client.\n- Fix chat player color indices if some players are not in the game (#6069)\n- Fail gracefully in LAN setup when network access restricted (#6076)\n- Fix custom naming lists for spectators (#6107)\n- Game Chat Accessibility Tweaks (#6127)\n- Sanitize network game player names more thoroughly (#6132)\n- Fix calling emergency save from GameHost::disconnect_client() (CB #4597 / GH #6258)\n- Set timeout for add-ons network I/O (CB #4739 / GH #6376)\n\n\n### Build System\n\n- Fix undefined `PATH_MAX` (#5615)\n- Drop support for g++-5 and g++-6 (#5541)\n- Require libpng >= 1.6 (#5625)\n- Fix Clang15 Compiler Warnings (#5629)\n- Replace `sprintf` with `snprintf` (#5651)\n- Switch to C++17 (#5672)\n- CI enhancements (#5682, #5750, #5759. #5761, #5772, #5794, #5799, #5831, #5837, #5845, GH #6352 / CB #4715)\n- Fix more clang-tidy checks (#5679, #5689, #5696, #5684, #5695, #5693, #5690, #5694, #5692, #5685, #5688, #5698, #5697, #5686, #5699, #5687, #5691, #5681, #5709)\n- Fix member initializer ambiguity regression\n- Added sharpyuv as new SDL_Image extra lib (#5756)\n- Fix build with gcc 13 by including `<cstdint>` (#5765)\n- Support compilation with musl libc (#5764)\n- Fix Windows Logging for Unit Tests (#5877)\n- Update SDL versioning check scheme\n- Fix Compilation with GCC 13.1 and AppleClang (#5903)\n    - Add missing `#include <cstdint>`\n    - Ignore new false-positive compiler warnings\n    - Fix CMake version check warning\n- Resolve static libraries during configuration (#5914)\n- Disable ignored clang-tidy checks in the config file (#5917)\n- Build vcpkg packages weekly (#5904)\n- Remove hard-coded library paths for MinGW builds (#5921)\n- Cache clang-tidy output (#5922)\n- Enforce use of global vcpkg in CI (#5934)\n- CMakeLists Cleanups for RelWithDebInfo (#5943)\n- CI: Push vcpkg ref only to main repo (#5977)\n- Define `PRIuS` using `PRIuPTR` if available (#5979)\n- Set fixed MSVC toolset version (#6007, #6147)\n- Resolve compiler warnings (#6021)\n    - Re-enable `-Werror` for GCC 13.1.1+\n    - Update Clang version in CI\n    - Resolved most GCC warnings\n    - Resolved warnings in MinGW builds\n- Fix documentation CI workflow (#6062, #6089)\n- Fix MinGW library linking order (#6111)\n- Report all validation errors by update_appdata.py (#6116)\n- Remove formatting workarounds (fixes GH #5221)\n- Rename brotli static dependency (GH #6177 / CB #4519)\n- Improve vcpkg update check (GH #6181 / CB #4523)\n- Use cmakes newer FindPython module (CB #4525 / GH #6183)\n- Python files require python3 explicitly (CB #4529 / GH #6187)\n- Fix vcpkg cache restore (GH #6198 / CB #4540)\n- Fix revision detection, bump cmake version (CB #4550 / GH #6207)\n- `update_authors` minor enhancement (GH #6117 / CB #4453)\n- Update toolset.json path (GH #6234 / CB #4575)\n- Improve update translations stats (GH #6120 / CB #4456)\n- Fix msys2 Windows builds (GH #6265 / CB #4604, GH #6278 / CB #4617)\n- Fix building on FreeBSD / OpenBSD (CB #4600 / GH #6261)\n- Fix error detected by shellcheck in compile.sh (GH #6268 / CB #4607)\n- Install fixed version of 32bit glbinding (GH #6287 / CB #4650)\n- Fix building with external minizip (GH #6279 / CB #4618)\n- New Msys dependencies (GH #6281 / CB #4645)\n- Update `download_asio.sh` to asio version 1.28.0 (CB #4616 / GH #6277)\n- MinGW dependency system (CB #4653 / GH #6290)\n- Skip CI workflows where nothing changed (CB #4644 / GH #6257, CB #4672 / GH #6309, GH #6320 / CB #4683)\n- Speed up all_tribes tests in the testsuite (GH #6353 / CB #4716)\n- Update MacOS CI (CB #4719 / GH #6356)\n- Regression tests for start and win conditions, fix race regressions (CB #4524 / GH #6182)\n- Add gettext tools to vcpkg dependencies (GH #6389 / CB #4751)\n- Suppress unsafe buffer usage warning on Clang (CB #4770 / GH #6408)\n\n\n### Other Issues\n\n- Caret-escape control characters in strings (#5496)\n- Add pull request template\n- Call `SDL_PumpEvents` from main thread only (#5656)\n- Add mutexes for Notifications backend (#5715)\n- Add timeout support to regression_test.py and improve output (#5806)\n- Add amazons all buildings test to test suite (#5817)\n- Make `WLApplication::get()` return reference (#5906)\n- Support `SIGUSR1` to toggle verbose output (#5911)\n- Increase regression test suite sleep times (#5918)\n- Translations sync workflow updates:\n    - Disable single-line-diff-skipping in translations update because Transifex timestamps no longer get updated reliably\n    - Skip timestamp-only POT changes during translations update (#5937)\n    - Skip POT-Creation-Date only changes in PO files too (#5941)\n    - Translation update: Exit cleanly when nothing needs to be committed (#5959)\n- Remove unused code from regression_test.py (#5987)\n- Self-diagnose crashes (#6100)\n- Add `.editorconfig` for automatic indentation in many editors (CB #4415 / GH #6019)\n- Update copyright end year to 2024\n- Fix title in test of `string_bformat.lua` of `lua_testsuite.wmf` (CB #4647 / GH #6283)\n- Logic exception handling fixes (#6053): Forward logic thread exceptions to main thread's handler\n- Fix some segfaults related to `Map::calc_distance` (#6135)\n- Deadlock-related improvements (#6139)\n    - Detect and break deadlocks\n    - Refactor NoteThreadSafeFunction handling\n- Correct naval warfare rebasing artifacts (CB #4699)\n- Refactor commandline handling (CB #4471 / GH #6154)\n\n\n## Release 1.1\n\n### Animations, Icons and Overlays\n\n- Fix some \"deprecated pictures parameter\" warnings (#4908)\n- Create spritesheets (#4935)\n- Spritesheet cleanup & campaigns (#4974)\n- Updated barbarian barracks graphics by DragonAtma (#4977)\n- Spritesheets fixes and cleanups (#5049)\n- Upscaled Splashscreen (#5183)\n- Optimize images with PNGQuant (#5204)\n- Fix pause and jump in empire mill animation (#5270)\n- Add high resolution images for Empire buildings (#5376)\n- Add high resolution images for Atlantean buildings (#5384)\n- Add some new main menu background images (#5606)\n\n\n### Sounds and Music\n\n- Write config after sound initialization (#4940)\n- Enable custom in-game music (#5138)\n\n\n### Tutorials and Campaigns\n\n- Emp02: Allow sheep farm and weaving mill with barracks (#5048)\n- Add \"Along the river\" scenario (#5062)\n- Trident of Fire Fixes (#5198)\n    - Fix player detection and slot usage\n    - Fix shipyard wasting a ware and therefore not providing a ship for AI\n    - Fixes workerpart of #2933\n    - Fixed flooding and foresting functions\n    - Changed the map slightly to fix #3878\n    - Fixed starting position\n    - Changed Player positions for balance\n    - Fixed accessibility of volcano craters\n    - Fixed lua volcano scripting\n    - No remains of lava after eruption is gone\n    - Rocks are not removed by lava anymore\n    - For each lava field a region of radius 1 is considered for removal\n- Basic control tutorial: only show first object once (#5338)\n- Fix legacy scenario units load order (#5350)\n- Atlantean02 (#5196)\n- Fri04 (#5104)\n- Fri03 Tweaks (#5104)\n\n\n### Scripting\n\n- Replenish reed in Frisian trading outpost (#4955)\n- Add enhancement method for buildings to Lua (#4989)\n- Added more ship names for Amazon tribes (#5034)\n- Amazon encyclopedia enhancements (#5037)\n  - Added lore for Dressmakery\n  - Added help text and lore for liana cutter's hut\n  - Added tips for amazons\n    - Tips on liana cutters, wilderness keepers, water gatherers, ropes, jungle masters, rare wood plantations and gold mines.\n    - Last change for now, to add info for plantations to close off #4981.\n    - Added extra note to wilderness keeper as that is necessary info not covered elsewhere.\n- Atlantean and Amazon soldier prefs (#5047): Sets military sites with 4+ soldiers to request heroes by default, and Atlantean small tower now requests rookies by default.\n- Support more properties in `modify_unit` (#4866)\n- Extend productionsite/worker program failure handling (#5146)\n    - Allow specifying `callworker` failure handling method\n    - Allow suppressing sending out-of-resource notifications in programs\n- Decouple Registries (#5169)\n- Add script to check for optional Lua parentheses (#4787, #5225, #5226)\n- Clean up `descriptions` vs `wl.Descriptions()` in init.lua files (#5296)\n- Restore global descriptions for savegame compatibility (#5393)\n- Fix Lua Scripting Multithreading (#5475)\n- Fixes in dump- and load economy scripts (#5601)\n\n\n### Maps\n\n- Fix map preview heights rendering (#5488)\n- Optimized height calculation for map preview (#5492)\n\n\n\n### Add-Ons\n\n- Use shared_ptr for AddOnInfo (#4747)\n- Fix duplicate description registries by add-ons (#4760)\n- Add-Ons Webserver (#4934)\n- Add-ons: Disambiguations for dither layers and registries (#4936)\n- Fix add-on translation handling glitches (#4976)\n- Refactor `ui_fsmenu/addons.*` (#5012)\n- Add-On UI Tweaks (#5061)\n    - Fix add-on comment layouting glitch\n    - Make dependency checking more clever\n    - Packager enhancements\n    - Fix multiple-dependency logic\n- Add-Ons Packager File Name Handling (#5074)\n    - Fix invalid file/dir names in the packager\n    - Add UI to set dirnames\n    - Enable save/discard buttons after editing displayname\n- Allow loading add-ons with unit replacements first (#5141)\n- Update Add-Ons Manager for Protocol Version 5 (#5039)\n- Speed up add-on remote interaction window (#5076)\n- Add-Ons Protocol Version 6 (#5092)\n- Show server name and check add-on version before upload (#5234)\n- Disable add-ons manager autoconnect and autologin (#5245)\n- Update Add-On Upload to Command Version 2 (#5231)\n- Fix Add-Ons Admin Menu Visibility (#5266)\n- Refactor Add-Ons Postloading (#5286)\n- Fix tribes postloading again and add regression test (#5323)\n- v1.0 backwards compatibility for world/tribe add-ons (#5353)\n- Fix too-early add-on descriptions registries & legacy scenario units loading (#5480)\n- Remove outdated info that add-on maps should not be zipped (#5538)\n\n\n### Saveloading\n\n- In-game game/scenario loading (#4843)\n    - Adds a Load Game button to the in-game menu (singleplayer only) to allow loading a new game in-game\n    - Adds a Restart Scenario button to the in-game menu in singleplayer scenarios\n    - Adds a Next Mission button to the Victory message box in singleplayer campaigns and tutorials\n    - GameController is now handled by `shared_ptr`\n- Reset Lua interface when loading games in-game (#4954)\n- Fix invalid resource loading (#4918)\n- Fix replay writing in savegames created from replays (#4972)\n- Implement saveloading unique windows (#4823)\n- Fix immovable savegame compatibility Long Long Way (#5060)\n- Cleanup player end statuses on loading (#5070)\n- Fix `DescriptionManager` Stacking (#5386)\n- Saveload `destruction_blocked` Property (#5450)\n- Relax Invalid Assumption in AttackWindow Saveloading (#5597)\n- Fix fri03 v1.0 Saveloading Compatibility (#5510)\n\n\n### AI\n\n- Miscellaneous AI Fixes (#4995)\n- Fix auto speed (#5149)\n    - Moved autospeed detection to defaultai.cc\n    - Changed the documentation of the commandline option --auto_speed\n    - Added some debug log\n- Adding performance statistics for AI tasks (#5156)\n- AI improvements - change of scoring, training (#5168)\n- Update_all_bfCheck bf redesign (#5171)\n- Introducing limit for fields to be updated (#5173)\n    - Introducing limit for fields to be updated\n    - Increasing number of checked unusable fields\n    - Adding expiration info, increasing max fields to check\n- Training of AI (#5213, #5278)\n- AI: Update bf redesign (#5216): Perfomance improvement of buildable fields check in AI code\n- Considering distance to warehouse when starting new buildings (#5229)\n    - Malus variable introduced\n    - Considering only connected flags\n    - Training\n- Misc AI Fixes (#5263)\n    - Fix basic_amount handling of wells, hunters and fishers\n    - Deduplicated magic numbers\n    - Made the well necessity more generic algorithm susceptible\n    - Moved detection of neededness by stocklevel to the appropriate part of the code\n    - Tried to delay first warehouse a bit\n    - Prioritized fruit collectors if supporter nearby\n    - Insert a safeguard bonus for basic wells\n- Fixing wrong initialization of AI `last_seen_time` (#5284)\n- Refactoring of `construct_building` (#5282)\n- Fixing bug #5375 - update buildable fields crash (#5378)\n- Stop loop after iterator is invalidated in defaultai (#5401)\n- Remove NOCOM comments (#5430)\n- AI Training (#5439)\n- Improving building and dismantling mil. sites (#5446)\n- Add AI Basic Decision Algorithm For Accepting Diplomacy (#5457)\n- Rework AI Military Site Dismantlement (#5449)\n\n\n### Gameplay\n\n- Fixed the `SupplyList::remove_supply` crash (#4913)\n- Multiplayer template game (#4884)\n- Fix constructionsite enhancement race condition (#5002)\n- Catch invalid cast in `Carrier::transport_update` (#5009)\n- Fix race condition when changing military-constructionsite soldier capacity (#5007)\n- Fix another race condition in constructionsite enhancing (#5033)\n- Support having more than 2 carriers on a road (#4938)\n- Intelligent worker reordering (#5099)\n- Remove messages of muted buildings (#5109)\n- Fix worker reordering stack overflow (#5125)\n- Remove messages when muting building via \"mute all\" (#5130)\n- Fix Port Paths Reordering On Port Removal (#5154)\n- Check for unknown wares/workers when loading economy profiles (#5215)\n- Ensure Notifications only reach the topmost DescriptionManager (#5184)\n- Unmark Amazons as Experimental (#5442)\n- Diplomacy (#5091)\n- Made diking part of the official tribe (#5104)\n- Fix Segfault on Building Dismantle (#5482)\n- Do not delete units during random game loading (#5590)\n- Prevent shipwright from building ferries where no ferry can live (#5534)\n\n\n### User Interface\n\n- Add Spinbox background (#4859)\n- Blinking caret for EditBox and MultilineEditBox (#4860)\n- Remove invisible scrollbar in dropdown (#4883)\n- Option to invert map movement (#4831)\n- Automatically enable themes after installing (#4734)\n- Screenshot notification (#4949)\n- Add soldiers overview tab to WarehouseWindow (#4901)\n- Multiplayer savegame setup UI improvements (#4968)\n- Show message box when a replay desyncs (#4896)\n- Change tab panel hotkeys to `CTRL+<num>` (#4993)\n- Fix richtext escape issues in message boxes (#4879)\n- Fastplace Shortcuts (#4849)\n- Mousewheel and key fixes (#5053)\n- Allow textually filtering dropdowns (#5040)\n- Unify arrow and +/- handling for spinbox and slider (#5054)\n    - Also refactors hardcoded key scancode detection\n- Disable keys for fullscreen and screenshot when changing shortcuts (#5066)\n- Only handle textinput when dropdown is expanded (#5065)\n- Add technical info to About window (#5071)\n- Add more uses for mousewheel scrolling (#5068)\n- Fix race condition when resizing game window (#5067)\n- Allow the same fastplace shortcut for different tribes' buildings (#5073)\n- Fix segfault when no modal panel exists (#5093)\n- Fix Save Game Window Layout Issues (#5105)\n- Fix mouse fastclick offset for construction site windows (#5107)\n- Convert Attack Box to Window (#5094)\n- Fastplace Groups (#5110)\n- Use `unique_ptr` for settings box in construction site window (#5116)\n- Hide Empty Input Queue Displays (#5139)\n- Protect map object drawing with a mutex (#5147)\n- Fix spacing in warehouse window soldiers tab (#5185)\n- Fix `nullptr` dereference in `BaseListselect::handle_key()` (#5212)\n- Window Clicking Behaviour Fixes (#5219): Fix clicking a window not changing tool in editor. Also make the window focused.\n- Keep progress window open until game is ready (#5191)\n- Use correct mechanism to hide dropdown list (#5237)\n- Enable Hotkeys in Dropdowns (#5238)\n- Fix Race Condition in Attack Window (#5235)\n- Dropdown shortcuts for ingame and editor (#5261)\n- Remove OK button in non-modal story boxes (#5292)\n- Fix texthandling for dropdowns (#5281)\n- Show port space hint in buildhelp (#5267)\n- Ships on minimap (#5297)\n- No hotkey for empty dropdown entry (#5320)\n- Fix Sound Options Panel Styling (#5372)\n- Fix Duplicated Workareas Display Bug (#5371)\n- Pan map view to keep it centered when resizing game window (#5388)\n- Fix collapsing permanently collapsed input queues (#5426)\n- Fix infinite loop at startup map panning (#5429)\n- Add highlighting of filter text in dropdown list (#5443)\n- Fix save dialog and debug window text input bug (#5421)\n- Workaround for inverted horizontal scrolling bug in SDL (#5394, #5543)\n- Fix fake-modal in-game load dialog releasing modal grab (#5454)\n- Make space available as dropdown hotkey & only trigger hotkey when not filtered (#5441)\n- Add-Ons Admin Dialog Accessibility (#5452)\n    - Enable Enter/Escape keys\n    - Focus list initially\n- Make Save/Load Game Dialog Truly Modal (#5491)\n- Warp mouse to target when launching attack (#5497)\n- Richtext-Escape Hotkey Strings (#5499)\n- Consistent UI Keyboard Selection (#5495)\n- Misc Replay Fixes (#5554)\n    - Use default display flags in replays\n    - Skip version mismatch message on Ctrl+click\n- Don't warp mouse to dropdown if it's already there (#5536)\n\n\n### Internationalization\n\n- Localize certain hotkeys (#4784)\n- Disambiguate productionsites' worker(s) missing/coming strings (#4971)\n- Some renamings and string fixes (#4956)\n    - Renamed tundra/taiga terrains\n    - Renaming the “Statistics” labels to “Status”\n    - Some helptext fixes\n- More missing gettext calls in emp04 (#4983)\n- Improved exception reporting (#5003)\n    - Fix exception reporting in the game logic thread.\n    - Adds `--verbose-i18n` flag.\n- Fix Transifex String Issues (#5072, #5399, #5462)\n- Fix Lua `(n|p)gettext` ignoring textdomains (#5080)\n- Properly format `size_t` type printf placeholder (#5096)\n- Tx String and CLI Help Fixes (#5179)\n- More Stringfixes (#5190)\n- Fix unhealthy usage of `split` in language menu (#5241)\n- Skip installing locales when translations are disabled (#5302)\n- Tut01 String Fix (#5327)\n- Military capacity string refactor (#5476)\n- Sort xgettext inputs in translations update\n\n\n### Help and Documentation\n\n- Fix documentation wl (#4920)\n- Add theme image `ending.png` to themes documentation (#4945)\n- Lua doc enhancements (#4984)\n- Add produced wares and workers to productionsites encyclopedia (#5205)\n    - Pulled out code and first working solution\n    - Use visionrange only for militarysites\n    - Fixed documentation for ware_help.lua\n    - Added example fix failure for documentation\n    - Fixed documentation for format_help\n    - Added recuited workers part to Production section\n    - Fixed charcoal burner  and aqua farm help with dummy program\n- Fixed links for documentations svg-images (#5209)\n- World immovables in encyclopedia (#5077)\n    - Made all tribes available for lua\n    - Corrected grapevine size to small to be consistent with other tribe immovables\n    - Changed \"Space required:\" to \"Size:\" and added a walkability hint\n    - Cleared the list of world immovables of all immovables with size \"none\"\n    - Display only one entry per treetype\n    - Filter amazon tree doublettes\n    - Use species as title for trees\n    - Added menu icons for dead and felled tree to be shown as image\n    - Cleared tribes immovables that are fields from world immovables regardless of addon status\n    - Fixed Size text for immovables\n    - Fixed amazons resi menu icon size\n- Atlantean Lore (#5271)\n- `tips/singleplayer.lua`: Reduce use of \"Our\" (#5349)\n- Add Empire Lore Texts (#5285)\n\n\n### Editor\n\n- Editor toolsize menu: use spinbox instead of custom dialog (#4990)\n- Add offset to editor info windows (#5145)\n- Editor: Add toggle maximum building spaces option (#5220)\n    - Convert all show/hide toggles to use display flags\n- Editor: History of last tool settings (#5365)\n- Enable Enter in Editor Map Options Window (#5503)\n\n\n### Graphics Engine\n\n- Catch crash when preloading minimap (#5021)\n- Fix a texture deletion from wrong thread (#5174)\n- Fix linking the OpenGL library (#5299)\n- Calculate max battle animation height (#5381)\n- Thread safe destructor for Texture `shared_ptr` (#5436)\n- Use SDL Relative Mouse Mode (#5494)\n- Set SDL hint for relative mouse mode (#5504)\n- Support Non-Indexed Terrain Textures (#5545)\n- Use old style name for SDL pixelformat (#5547)\n\n\n### Networking\n\n- Break mutex deadlock in GameClient (#4948)\n- Fix game client deletion crash (#4970)\n- Keep GameController pointer alive for template game (#5128)\n- Replace Boost::Asio → Asio (#5164, #5532)\n- Fix Description Index Misordering from UI Code (#5288)\n- Fix sync report requesting during game startup (#5382)\n\n\n### Build System\n\n- Autogenerate and compare datadir version file (#4853)\n- Make `compile.sh` show help for invalid arguments (#4979)\n- `compile.sh` improvements (#4980)\n    - Implement local default options for `compile.sh`\n    - Argument checking for `-j`\n    - Add an override for every switch\n    - Support custom `-D` options to CMake\n- Add option to skip datadir version check (#4987)\n- Modify compiler static dependencies (#4991, #4992)\n- Linux: only enable backtrace when using glibc (#5011)\n- cmake: add support for None build type (#5010)\n- Added missing direct include (#5025)\n- Fix clang compiler warnings (#5057)\n- Fix compiling error introduced by boost 1.77 (#5063)\n- Honour `--(no|with)-asan`-option regardless of ARGV-order (#5078)\n- Fix Brotli Windows CI Error (#5079)\n- Build System Update (#5085, #5513, #5539)\n    - Silence an undesired naming scheme warning in the SDL2 finding module\n    - Add a customized copy of CMake's deprecated Documentation module as recommended\n    - Update latest g++/clang versions in the CI\n    - Treat enabled compiler warnings as errors in debug builds\n    - Allow silencing compile.sh status messages with `-q`\n- Fix Clang 13 Warnings (#5088)\n- Handle undefined `__WORDSIZE32_SIZE_ULONG` (#5098)\n- Enable ASan in the Testsuite (#5090)\n- Allow validating `appdata.xml` with `appstream-util` if `appstreamcli` is not available (#5084)\n- `appdata.xml`: Add leading `~` to release names as necessary to force proper ordering (#5102)\n- Deprecate Boost (#5101)\n- Refactor String Assembly / Boost Format (#5081)\n- Clean some more clang-tidy checks (#5108, #5131, #5289, #5319)\n- Resolve thread sanitizer issues (#5114)\n    - Increased thread safety using atomic member variables\n    - New compile option to build with TSan\n- Replace Boost Unit Tests (#5122, #5137)\n- Compile on MacOS 11 and M1 Arm Processor (Apple Silicon) (#5112)\n- Fix Frequent Testsuite Timeouts (#5129)\n- Replace `boost::signals2` (#5133, #5144)\n- GitHub MSVC CI Action (#5132)\n- Replace Boost UUID, Boost SHA1, and `std::rand` (#5124)\n- Deploy build artifacts to automated pre-release (#5143)\n- Replace `boost::format` (#5118, #5163, #5178, #5207)\n- Remove `graphic_text_layout` dependency from `io_filesystem` (#5161)\n- Resolve MSVC warnings (#5157)\n- Fix older g++ optimization segfaults (#5176)\n- Fix -O3/-O2 typos (#5187)\n- Dependencies: Asio include handling, Solus support, installation script coverage (#5182, #5524)\n- Don't require Homebrew to be installed at `/usr/local` (#5208)\n- CMakeLists.txt: Use a list for many build flags (#5328)\n- Only use embedded minizip if not installed (#5360, #5392)\n- Put binaries in correct locations when installing (#5359)\n- Enable Include Order Codecheck on Header Files (#5373)\n- Move definition of `WL_INSTALL_BINDIR` (#5383)\n- Remove `SYSTEM` from `target_compile_options` (#5396)\n- CMakeLists.txt: add custom uninstall target (#5358)\n- Resolve relative parts before uninstalling empty dirs (#5417)\n- Reformat version string (remove markdown format) (#5385)\n- Xenial's CMake version does not know `VERSION_GREATER_EQUAL`, use `NOT VERSION_LESS` instead\n- `compile.sh` fix and tweaks (#5465)\n    - Fix non-portable globbing\n    - Add `--dry-run`\n    - Break up the CMake command line for readibility\n- Added new SDL2-image dependencies to static linking (#5472)\n- Added static SDL2 targets for transitioning (#5484)\n- Update screenshots in `appdata.xml` (#5598)\n\n\n### Other Issues\n\n- Command line overhaul (#4806)\n- Multithreading (#4319)\n- Resolve threading race conditions by assigning mutex locking priorities (#4943)\n- Fix more threading-related issues (#4966)\n- Set Windows logging dir in all website main functions (#4973)\n- Continue parsing commandline without datadir (#5134)\n- Allow using `--script` with `--new_game_from_template` (#5153)\n- Extend copyright script to update year in all files (#5188)\n- Add check for missing copyright headers (#5223)\n- Preallocate task stack before program update (#5406)\n- Fix use of vector fill constructor (#5409)\n- Update testsuite compilers and OSs for Jammy (#5415)\n- Integrate AppImage building into CI (#5377)\n- Readme Typo Fixes (#5461)\n- Fix race in use of `logic_thread_locked` (#5419)\n- Disable logging in notifications test (#5490)\n- Fix non-i18n Spelling Issues Reported by Lintian (#5502, #5512)\n\n\n\n## Release 1.0\n\n### Animations, Icons and Overlays\n\n- Optimized pngs (#3959)\n- Improve spritesheet exporting (#3756)\n    - Fix cropping algorithm\n    - Support reexporting spritesheets\n    - Catch mismatch with number of scales in directional animations\n    - Basename is redundant when it's identical to the animation name, so making it optional\n- Frisian toolbar icons (#4231)\n    - Add Frisian toolbar icons\n    - Delete atlantean toolbar\n- Amazon & Frisian graphics (#4554)\n- Tapir & Tapir Farm (#4631)\n- New empire barracks graphics by DragonAtma (#4668)\n- Building animation for empire barracks by DragonAtma (#4695)\n- New barbarians barracks graphics by DragonAtma (#4785)\n- fix graphic glitch in Barbarian flag (#4910)\n- New atlantean barracks graphics by DragonAtma (#4923)\n\n\n### Sounds and Music\n\n- Track `descriptions` instances to fix a sound handler bug (#4687)\n\n\n### Tutorials and Campaigns\n\n- `3997_emp03_messagebox` (#4012)\n    - changed artifact model picture to landscape\n    - fixed div width and alignment\n- Campaign Empire 02: improved scenario continuity (#4038): Trigger mining infrastructure objective when marble mine is done.\n- Fixed a file reference in atl01 scenario (#4157)\n- Fix link to starting conditions for tutorial1 (#4257)\n- Fix image link in first tutorial (#4261)\n- Fix empire04 helptexts by changing an obsolete reference (#4267)\n- Handle additional expedition items in fri01/fri02 (#4330): Allow taking certain wares and workers to fri02\n- Training wheels (#4369, #4406)\n- Wait for field action in flags training wheel (#4472)\n- Fix crashes in seafaring tutorial (#4615)\n- empire 4 script fixes (#4625)\n    - fixed 2 appearances where the resource was mising the resource prefix\n    - fixed mine location. Necessary due to changes in mine spot calculation\n    - Inserted Messages Table\n- Disable training wheels code for v1.0 (#4644)\n- Third frisian scenario (#4550)\n- Fix Trident of Fire player slot detection (#4696)\n- Seafaring tutorial: Explain additional expedition items feature (#4711)\n- Fix hotkeys in tutorials (#4720)\n- Basic Tutorial fixes (#4717)\n- Fri03 Fixes (#4738)\n    - Fix duplicate soldier detection\n    - Add missing translation markups\n- Fix detection of amount of starting gold in fri02 (#4797)\n- Fix typo and outdated instructions in emp03 (#4836)\n- Empire 04 text improvements (#4844, #4847, #4848, #4852)\n- Better fri03 placeholder portraits (#4891)\n- Make fri03 starting port indestructible (#4874)\n\n\n### Scripting\n\n- Parse production outputs (#3983)\n    - Deduce building outputs from worker and productionsite programs\n    - Remove outputs tables from Lua\n- Replace buildferry with createbob\n- Stack lua textdomains in C++ (#4006)\n    - Stack lua textdomains in C++\n    - Push and pop correct textdomains for custom scenario buildings\n- Detect work area overlaps from MapObject programs (#4014)\n    - Use information from WorkerProgram, ImmovableProgram and ProductionSiteProgram to calculate work area overlaps\n    - Distinguish competing, supported and supporting productionsites\n    - Get rid of default attributes to unclutter the code\n- Animation duration units (#4044)\n    - Implement more human-readable duration units for `animate` programs, e.g. `duration:1m20s500ms`.\n    - Only the interesting units needs to be specified, e.g. as `duration:35s`.\n- Correct shipwright's work area (#4048)\n- Add \"success:\" prefix to number parameters in \"grow\", \"remove\" and \"transform\" immovable programs (#4007)\n- Change probability Lua specification from `[0, 255]` to percentage for `transform` and `remove` programs.\n- Transform and remove by percent (#4070)\n- Rename main immovable program to 'main' (#4086)\n- New syntax for productionsite construct program (#4118)\n- The worker experience parameter is now optional.\n- Use named parameters in ActMine (#4099)\n- Convert ambient sound specification to percent notation (#4081)\n    - Sound priorities now have the range `0.1% - 100%` with new optional parameter `allow_multiple`\n    - Get rid of silent sound files\n    - Make priority mandatory\n- Rename main productionsite program to 'main' (#4119)\n    - Shift check for `ActCall` to after all programs are loaded, so we can call them now anything we like.\n    - Check that productionsites have a `main` program defined.\n- New API for remaining Worker programs (#4124)\n    - breed\n    - mine\n    - repeatsearch\n    - scout\n- New API for remaining Immovable programs (#4131)\n    - `seed=<immovable_name> proximity:<percent>`\n    - Fix datatypes for probability ranges\n    - Update documentation\n- New API for trainingsite programs (#4126)\n    - Redesign training programd & add some checks\n    - Calculate min/max levels from action\n    - Update documentation\n- Get rid of `add_animation`/`add_directional_animation` functions (#4137)\n- Separate the definitions of each tribe into separate files (#4134)\n    - Get rid of global init and preload files\n    - Define each tribe separately in a `tribes/<tribe_name>` directory\n    - Shift starting condition and image files into each tribe's directory\n    - Shift wares' and workers' `default_target_quantity` and `preciousness` to tribe definitions\n    - Reduce number of disk reading operations in game loading screens\n- fix fishermens resource name (#4200)\n- Define enhancement cost in base building (#4156)\n- Update eris to `1566f6cfa027694941fb34229048e9b576aaa8e5` (#4243)\n- Make terrain dither layer unique to prevent hard edges (#4281)\n- fix territorial messages by resetting last winning candidate values if no winner candidate available (#4333)\n- Zap `luaopen_eris` compiler warning (#4351)\n- Cleanup messages (#4386)\n    - renamed `LuaMessage` to `LuaInboxMessage`; `wl.game.Message` to `wl.game.InboxMessage`\n    - adjusted main scripting files\n    - documentation tweaks\n- Unify tribes world (#4240)\n    - Replace `Tribes` and `World` with `Descriptions`\n    - Consistent function naming in `Descriptions`\n    - No longer distinguish tribe from world immovables\n- Merge `wl.World()` and `wl.Tribes()` (#4412)\n- Rename Lua `tribes` object to `descriptions` (#4416)\n- Implement percent notation for animation sound probability (#4423)\n- Shift asserts in ActTrain to get the log message first for debugging\n- Add support for running training wheels in scenarios (#4470)\n- Fix Amazons ferry program (#4492)\n- Allow hiding fields that are seen by units (#4478)\n- Fix argument position in `campaign_message_box` (#4517)\n    - Make the window's position centered when unspecified.\n    - This solution removes also some magic numbers for moving the window(s) to the right or to the bottom by getting the width and height of the main window through `wl.ui.MapView()`.\n- Allow hiding players from the general statistics menu via Lua (#4520)\n- Tweak ATL New World start (#4613)\n- Show initial status message for win conditions (#4633)\n- New lua methods & properties (#4584)\n- Win conditions fixes (#4648)\n- Expose win condition name to Lua (#4675)\n- HQ Hunter fix (#4683): destroy also conquered milsites\n- fix a variable conflict (#4701)\n- Discovery and New World starting conditions for amazons (#4705)\n- Make atlantean Discovery start easier (#4709)\n- Fix artifact messages (#4727)\n- Fix amazons fortified village (#4793)\n- Add ordered iteration for lua tables (#4818)\n- Fix scenario vision bugs (#4832): Added a new option `hide_fields` to unreveal and unexplore fields rather then completely hiding them\n- Allow defining target quantity and preciousness for add-on wares and workers (#4825)\n\n\n### Maps\n\n- Update Crossing The Horizon hint (#4008)\n- Fix incorrect allows_seafaring detection (#4082)\n- Fix nodecaps calculation error (#4033)\n    - Update Long Long Way volcanoes minable areas\n- Rephrase some map hints (#4211)\n- Update Europa Map to v1.2 (#4506)\n- Remove version numbers from all maps' file names\n- Adjust field size for mountains (#4562)\n- v1.0 Maps Review (#4634)\n    - New map Lesser Ring\n    - Updated map Wide World\n    - Deleted map Sun of Fire\n    - Marked Desert Tournament as unbalanced and renamed it\n- Adapt maps' minimum version number (#4646)\n\n\n### Saveloading\n\n- Replace unknown programs with \"work\" while saveloading (#3961)\n- Add some scenario savegame compabitility (#3963)\n    - Scenario tribes\n    - reveal_scenario\n- Rip out savegame compatibility code (#3980)\n- Fix map compatibility for MapObject Loaders (#4028)\n- Fix game saving crash in spectator mode (#4095)\n- Speedup player vision packet (#4113): Combine fields data into long strings\n- Skip redundant information in view packet (#4144)\n- Fix loading critters + resources\n    - Fix loading critters from map + fix an example\n    - Fis resources in lua_bases\n- Write timestamps in zip filesystem (#4193)\n- Fail gracefully on Lua PANIC (#4147)\n- Fix description loading in LuaBases (#4182)\n- Fix the `stol` saveloading issue (#4387)\n- Rediscover kVisible fields when loading the game (#4395)\n- Fix Lua savegame compatibility (#4437)\n- Unify legacy lookup tables (#4415)\n    - Merge `WorldLegacyLookupTable` and `TribesLegacyLookupTable` into `DescriptionsCompatibilityTable`.\n    - Let `Descriptions` handle the lookup to make the saveloading code easier to read\n- Fix savegame compatibility #4482 (#4483)\n- Saveload lua textdomain stack (#4461): Persist textdomain stack in scripting packet\n- Fix saveloading in economy options window (#4498)\n- Fix loading saves with see_all players (#4525)\n- Saveload `TrainingSite::checked_soldier_training_` to fix a crash (#4524)\n- Delete a dead function that causes savegame loading errors\n- Allow savegames anywhere (#4515)\n- Increase player info packet version (#4581)\n- Warn about replay version mismatch (#4605)\n- Fix S2 map loader to load stones correctly (#4619)\n- Add missing postload call for replays (#4616)\n- Hotfix for savegame compatibility #4273 (#4706)\n- Immovable savegame compatibility (#4690)\n- Reduce crashes from missing add-on dependencies (#4710)\n- Don't store Script add-ons in savegames (#4811)\n- Fix missing compatibility lookups during gameloading (#4862)\n- Fix additional expedition items saveloading (#4921)\n\n\n### AI\n\n- Fix a crash due to wrong AI Hint (#4191)\n- Give the AI its own namespace (#4225)\n- Quick AI fix to avoid crashes (#4388)\n- AI quick fix (#4401)\n- Read mining information for help & AI (#4489)\n    - Read AI mining hints from production program\n    - Add building name to deprecation messages\n    - Automate mining percentages in building help\n    - mines_percent is unused, so removing it\n- Trainingsites only evaluate fish/meat substitutes if present in inputs (#4641)\n- Delay AI initalization after scenario init (#4656)\n- Fixed an unsafe AI time operation (#4749)\n- AI production support (#4618)\n    - Deprecate `collects_ware_from_map` AI hint\n    - Deprecate `supports_production_of` AI hint\n    - Add support for multiple lumberjack/ranger pairs\n    - Get rid of dirty hack for rare tree cutter/plantation. `amazons_rare_tree_plantation` no longer needs supporters, but the `rare_tree_cutters_hut` still does\n    - Fix miscategorization of Frisian Fishers being supported by clay pits\n    - `frisians_reed_farm` is now detected as supporting the `frisians_beekeepers_house`\n    - Hotfix for Amazon trainingsites\n    - New property `needed_attributes` for productionsites when the immovable doesn't get removed from the map\n    - Get rid of hard-coded work area radius when detecting useful immovables near a building\n    - If a building has no input but some output wares and creates no immovables, but collects some:\n        - If it produces a construction material\n            - If it has supporters -> lumberjack\n            - If it has no supporters -> quarry\n        - If it produces ware that is not a construction material -> needs berry\n    - A hunter collects and bob from the map. This adds `amazons_hunter_gatherers_hut` to the list\n    - If needs water and collects \"resource_fish\" -> fisher\n    - If a building has no input and it produces \"water\" -> well\n    - If a building supports a lumberjack, it's a ranger\n    - introduce `number_of_same_nearby` to identify nearby buildings of same type\n    - if upgrade building needs supporters take this into consideration\n    - fixes some values in training to make the AI train amazons\n    - minor updates of basic amounts and other lua values\n\n\n- Fix AI handling of amazon water gatherer (#4753)\n\n\n### Gameplay\n\n- Fix 1% too-high soldier evade (#3911)\n- Set correct WorkerQueue Economy after economy split (#3939)\n- Ignore multiple enhance commands (#3953)\n- Fixed two desyncs in New World & Discovery (#3976)\n- Clever Critters (#3718)\n    - Critters can reproduce\n    - Carnivores can eat other critters\n    - Herbivores can eat on farm fields, delaying their growth\n    - Improved critters roaming algorithm\n    - Critters die of old age\n- Immediately-upgraded constructionsites burn no longer (#3988)\n- Clear space for portdocks (#3994)\n- Fix ware/worker economy mismatch in `set_target_quantity` (#4003)\n    - Catch economy type mismatch in `Economy::set_target_quantity`\n    - AI only sets default quantity targets for ware economies\n- Fix a crash after cancelling an expedition when no port is left (#4027)\n- Disallow enhancing conquered enemy militarysites (#4029)\n- Increase critter death chance in crowded regions (#4042)\n- Unblock soldiers (#4037): Allow soldiers to pass other soldiers if they are not fighting\n- Refactor playerfields visibility (#4046)\n- Fix carriers keeping wares (#4076)\n- Increased the chance that fugitive workers return to their homeland\n- Follow-up cornercase fix against carriers keeping wares (#4104)\n- Remember dismantlesite's state when unseeing a field (#4114)\n    - Remember dismantlesite's state when unseeing a field\n    - Performance tweak regarding rendering of unexplored fields (#4122)\n- Tribes filtering (#3693): Only load the tribes that are actually being used.\n    - Map object types are registered in a new class `DescriptionManager`\n    - Each tribe only gets loaded when a player is playing as that tribe\n    - Buildings and immovables can still be placed via Lua, e.g. we can place a `frisian_fortress` if nobody is playing Frisians. If they need immovables with an attribute, these are loaded dynamically via the attribute.\n    - Support for custom scenario wares as well as workers and buildings\n    - Support for overwriting default units via scenario code\n    - Fix subdirectory handling in zip file system\n    - Player statistics and allowed ware/worker types are now stored in maps rather than vectors\n    - Make success of `LuaFlag::set_wares` independent of wares order\n    - Clean up some superfluous includes\n    - New test scenario that places all tribes' buildings\n    - Added new tests to market scenario and lua_testsuite for foreign and custom units\n    - Added a script for bulk renaming files with `git mv`. It just somehow ended up in this branch...\n    - For each init.lua, there is a `register.lua` which registers the names and attributes with the engine.\n    - Custom scenario units to be added to a tribe are now defined via a table rather than special Lua functions\n    - If you're overwriting a default unit without assigning it to a different tribe, just place an `init.lua` and `register.lua` below `<scenario>/scripting/tribes`. There's no need to list it in `<scenario>/scripting/tribes/init.lua` as well.\n- Load world units on demand (#4148)\n    - World map object descriptions are now registered via `register.lua`\n    - World map object descriptions are loaded on map load\n    - Split terrains into separate files so that they can be loaded separately\n    - Reorganize files according to editor category\n    - `world/init.lua` now defines the editor category members\n    - Map objects no longer know about their editor categories\n    - Internal map object names now need to be globally unique\n        - Rename all resources, e.g. `coal` -> `resource_coal` to fix conflicts with wares\n        - Rename `ashes` terrain to `ashes1` to fix conflict with tribe immovable\n    - Bottom-align icons in editor tools\n- Option to let players choose their own starting position (#4158)\n- Trigger economy rebalancing on warehouse policy change (#4155)\n- Disallow ferries to swim on lava (#4176)\n- Target workers to immovables (#4209)\n- Fix heap use after free in ShipFleet (#4247)\n- Optimize player vision, part 1 (#4270)\n- Fix vision glitches (#4283)\n- Immovable targeting fixes (#4302)\n- Unload expeditions at once (#4313)\n- Fix a typo in an assert introduced in #4302\n- Optimize player vision, part 2 (#4287)\n- Remove unneeded NEVER_HERE in Vision (#4394)\n- Wares/Workers Cheats (#4376)\n- Change geologist's mountain definition (#4391)\n- Ware Priority Improvements (#4441): Redesigned the input queue display from scratch and tidied up the priority backend. New priorites \"Very High\" (always served first) and \"Very Low\" (served only when there are no open requests with higher priority).\n- New tribe: Amazons (#4424)\n- Amazon fixes (#4473)\n- Fix crash after evicting a worker (#4496)\n- Update partially seen buildings' visibility when placed/removed (#4521)\n- Add-Ons (#4464)\n- Some more add-on features (#4541)\n    - Add-On sub-versions in the form 1.2.3\n    - More modding functions\n    - Add-On manager layouting tweaks\n    - new namespace AddOns\n- adding productivity threshhold to amazon stonecutter_hut (#4583)\n    - fix bug 4580 by adopting amazons stonecutters hut to other quarries\n    - fixed amazon scout gender form\n- Targeted Scouting (#4493)\n- Fix crash when worker's terraform program fails (#4571)\n- Amazons fixes (#4621)\n- Fix distribution of idle ships to ports (#4623)\n- Fix two crashes with tribe add-ons (#4682)\n- Allow starting game from template (#4702)\n- Support custom tribes in add-ons (#4708)\n    - Support custom tribes in add-ons\n    - Make collectors at last compatible with custom tribes\n    - Disallow AI players for unsuited tribes\n    - Update tribe dropdown when setting AI\n- Shorten the ripe stage of barley fields (#4712)\n- doubled trainers patience due to cycles failing quicker (#4726)\n- renamed Youth Gathering to Initiation Site (#4739)\n- Fix duplicate description registries by add-ons (#4767)\n- Fix replays and savegames with add-on tribes (#4766)\n- Fix add-on compatibility issues in random match setup (#4835)\n    - Add some notes to the random match setup menu\n    - Prevent crashes with invalid add-on\n- Fix several add-on cornercase crashes (#4827)\n    - 2 crashes with MP games with add-ons\n    - 1 in SP scenarios\n    - 1 with custom building enhancements\n    - 1 with custom worker enhancements\n- Rename Cassava Root Field/Plantation → Cassava Field/Plantation (#4850)\n- Quickfix against workers reoccupying the building they were evicted from (#4890)\n- Fix workers gaining experience for idling (#4905)\n\n\n### User Interface\n\n- Fix a WException when shift-clicking constructionsite WareQueues (#3949)\n- Fix UI bugs (#3970)\n    - Fix diverse gettext markup bugs where translations weren't being displayed\n    - Fix textures for stones resources\n    - Remove pngrewrite from PNG optimization tools, because it broke the textures\n    - Deactivate translation catalogue updates\n    - 1 new translatable string in loader UI\n- Don't add a dismantle button when no wares will be returned (#3987)\n- Additional Expedition Items dropdown sorting order (#4011)\n    - Sort additional items dropdowns by item descname\n    - Exclude ferries from the dropdowns\n- Continue button in main menu (#4010)\n- Button to toggle buildings visibility (#4017)\n- Forbid destroying expedition port construction sites (#4039)\n- Add buttons to mute/unmute buildings (#4034): Mute/unmute buildings' \"out of resources\" messages per building, or for all buildings of the same type\n- Add new option: Allow diagonal scrolling with numeric keypad (#4050)\n- Soldier statistics window (#4018)\n- Only show MultilineTextarea scrollbar when really needed (#4068)\n- Fix disappearing language stats (#4075)\n- Draw window frames with a different colour when focused (#4077)\n- Show buildhelp semi-transparent on PreviouslySeen nodes (#4083)\n- Remember the active tab when starting/stopping a building (#4111)\n- Fixes minimap revealing unseen enemy buildings\n- Show partially seen buildings in main view (#4105)\n- Rebuild show/hide menu when toggling via hotkeys (#4116)\n    - Rebuild show/hide menu when toggling via hotkeys\n    - Don't close menus when pressing hotkeys\n- Stop text input fields consuming some hotkeys (#4117)\n- Fix detecting whether dropdown fits on screen (#4123)\n- Finalize ware selection when mouse leaves WareDisplay (#4129)\n- Fix fullscreen switching for Internet lobby (#4128)\n    - FullscreenMenuInternetLobby now relayouts itself on resolution changes\n    - Fix focus toggling for editboxes\n- Make the Widelands window resizable (#4125)\n    - Make the Widelands window resizable\n    - Increase panel size asserts to 10000\n    - Remove `size >= 0` asserts\n- Fix ware indices in ware statistic menu (#4149)\n- Extend keyboard support (#4145): Extend keyboard and focus support to most UI elements where it makes sense, and fixes some bugs in focus passing with the Tab key.\n    - Expose PageUp, PageDown, Home, End, and Mousewheel to BaseListSelect\n    - Allow checkboxes, spinners and sliders to gain focus\n    - Fix focus transferring\n    - Allow buttons to gain focus and fix duplicate calls to child elements\n    - Don't let dropdowns grab the focus when closing\n- Load About screen tab contents on demand (#4163)\n- Only show .wgf files in load/save menu (#4192)\n    - Only show .wgf files in load/save menu to remove incompatibility warnings for files, which clearly are no save games.\n    - Also works for loading replays, where a .wrpl file has to have a corresponding .wgf file.\n- Improve `UI::Box` (#4188): Add support for deletion of panels for `UI::Box` and ignoring invisible panels while layouting.\n- Reset dropdown list selection when toggled off (#4205)\n- Add copy paste support (#4074)\n- Focus tweaks (#4197)\n- Fix BaseListselect key handling when no entry selected (#4213)\n- Fix window resizing problems (#4183)\n    - Save maximized state and unmaximized window size on exit\n    - Set window as not resizable before resizing it\n    - Add Fullscreen and Maximized to Window Size dropdown\n    - Set window as not resizable and don't change its size when toggling fullscreen\n    - Disable resizable window when compiled with SDL < 2.0.5\n- Map preview on selection screen (#4201)\n    - Show map preview in new game screen and replays\n    - Use faster map loading for website info\n    - Render starting positions\n- take invisble items into account again (#4249)\n- Improve debug window (#4244)\n    - Fix scrolling (#4167)\n    - Open bobs with double click\n    - Change structs to classes\n- Redesign splash screen and main menu (#4080)\n    - Let splash screen fade out after a few seconds\n    - Redesign main menu\n    - Convert About and Options to modal windows\n    - Ugly hack to fix dropdowns\n    - Add some screenshots as main menu backgrounds and use photographs for loading screens.\n- Fix windows moving on their own when docking is enabled (#4272)\n- Toolbar fix (#4277): Fix toolbar tabbing order and issues with mixing mouse and keyboard controls\n- Default show hide options (#4262)\n- Default-initialize display flags when no config file exists\n- Overhaul of SP and MP launch game screen (#3847)\n- Faster minimap previews (#4299)\n    - Improve minimap rendering speed\n    - Cache rendered minimaps\n- Handle GameDataError during preview rendering (#4315)\n- Do not layout invisible items (#4260)\n- Refactor string assembly in MapDetailsBox (#4301)\n- Make ProgressWindow respond to window resizing (#4310)\n- Cleanup LaunchSPG (#4320)\n- Refactor checkbox layouting (#4321)\n- improve layout in game setup (#4331)\n- Draw checkbox borders on top of focus overlay (#4292)\n- Clear minimap icon on multiselect (#4342)\n- Categorize loadscreens with map-specific themes (#4304)\n- Generalize building- and ship windows to use InteractiveBase (#4282)\n- Box Layouting Fixes (#4357)\n- Fast fix for the drop up menu bug #4341  (#4363)\n    - Open menu and show message box instantly\n    - Add a method that shows an item from dropdown menu.\n    - New method highlights menu items step by step until the target is reached.\n    - Change the instructions of tutorial 1 to match with its actions.\n- Fix WareStatisticsMenu main box assert (#4393)\n- Random matches & Editor launching convenience (#4289)\n    - Allow quick generating of random matches against AIs, and ask editor users to choose their first action before launching the editor\n    - Beautify random map menu\n- Table/Tabpanel Navigation (#4385)\n    - Implement mousewheel support for TabPanel and fix arrow keys for Table\n    - Implement PageUp, PageDown, Home, End for Table\n    - Let TabPanel ignore Left/Right, use Ctrl(+Shift)+Tab instead\n- Overhaul building statistics menu (#4390)\n- Add tooltips to tablerows (#4358)\n- Draw road length tooltip in road building mode (#4381)\n- Focus indicator tweaks (#4366)\n    - Tweak focus indicator display for buttons, dropdowns, and stateboxes\n    - Don't darken pictorial statebox icons\n    - Put focus on scrollbar instead of MultilineTextarea\n- Add economy options button to warehouses (#4379)\n- Main Menu Redesign, Part 2 (#4274)\n- Split minimap rendering into stages (#4435)\n- Main Menu Redesign, Part 3 (#4425)\n- Reset individual training wheels (#4408): Add Options window for deactivating/reactivating individual training wheels\n- More box layouting (#4411): Introduce a small inheritance tree of classes that use nested UI::Boxes to avoid any magic numbers and make all setup screens look alike regarding basic widget alignment, padding, etc\n- Tweak low productivity threshold in building statistics UI (#4436)\n    - Tweak low productivity display in building statistics\n    - Tweak spinbox padding calculations\n- Change ware queue priority colors to heatmap (#4467)\n- Fix missing spinbox labels in random map window (#4485)\n- Fix tooltip position (#4491)\n- Fixes for mark/unmark button in training wheel options (#4475)\n- Option to destroy attack target instead of conquering (#4477)\n- Scale minimap based on the maximum of width and height of map. (#4495)\n- Minimap: Use two rows if there are less than 120 pixels available for six buttons (#4536)\n- Inform about required restart after installing world add-ons (#4539)\n- Refactor toolbar and overlay strings to an info panel (#4526)\n- Accessibility Options (#4530)\n    - New option to scroll the map view when the mouse cursor is near the screen edge\n    - New option for sticky tooltips: Tooltips stay visible and fixed in place, and can then be made to disappear by clicking anywhere or pressing F2\n- Fix two info panel crashes (#4559)\n- Move mouse to the place flag button consistently (#4561)\n- Main Menu Redesign, Part 4 (#4518)\n- Allow configuring playercolor (#4549)\n- Fix double-deletion of message previews (#4577)\n- Main Menu Redesign, Part 5 (#4572)\n- Color chooser enhancements (#4582)\n- Color Chooser: Mouse drag support & Enter key (#4591)\n- Switch UI themes (#4569)\n- Ensure at least one statistics data point (#4593)\n- move caret with mouse click in editbox (#4578)\n- Disallow random matches if starting positions are too close (#4592)\n- Fix statistics plots player colours (#4600)\n- Fix Enter/Esc consistency issues (#4597)\n- Fix crash in seafaring stats menu (#4609)\n- Add-Ons: Screenshots and voting stats (#4552)\n- Fix forwarding of keypresses in main menu (#4620)\n- Move autosave messages to info panel (#4614)\n- Fix game tips display (#4624)\n- Configurable keyboard shortcuts (#4476)\n- Indicate stock/target amount relations and trends in stock menu (#4529)\n- Configurable Keyboard Shortcuts, Part 2 & 3 (#4637, #4640)\n    - Use Cmd instead of Ctrl as default modifier on MacOS\n- implement caret positioning via mouse (#4649)\n- Add-Ons Packager (#4603)\n- Fix statistics string cache (#4653)\n- Fix LAN shortcut in main menu (#4658)\n- Disable player and tribe buttons in scenario setup (#4663)\n- Select text via mouse (#4660)\n- Update hero/rookie radiobuttons (#4657)\n- Generalize addon packager (#4667)\n- Campaign editing (#4678)\n- Multiplayer setup UI fixes (#4691)\n- Set minimal progress value in add-on packager (#4714)\n- Toggle preserve wares default behaviour with Shift (#4719)\n- Relayout stock menu on tab change (#4724)\n- Fix scrolling in gamedetails and mapdetails (#4742)\n- Fix save game menu buttons (#4751)\n- Disable Autofix Dependencies v1.0 (#4736)\n- Fix crash on invalid screenshot (#4764)\n- No custom starting positions for Discovery (#4765)\n- Add-Ons: Get rid of required restarts (#4758): Rebuild the texture atlas instead, and be more intelligent about detecting whether this is required.\n- Fix MP dropdown conditions (#4780)\n- Prevent large dropdowns dropping out of the screen (#4782)\n- Add text size checks in multiline editbox (#4800)\n- Add missing richtext escape for map descriptions (#4817)\n- Fix initial info panel text visibility (#4810)\n- Don't let invisible panels handle keys (#4826)\n- Don't jump to undefined landmarks (#4855)\n\n\n### Internationalization\n\n- Fix some bugs flagged up by the translation validator\n- Ship Localization (#4040)\n    - Localize shipnames\n    - Shipname consistency in network games\n    - Show roaming and idle ships as \"empty\"\n- Add localedir parameter (#4112)\n- Force pull and skip timestamp-only changes to po directory\n- Fix problems with git lockfile during translation updates\n- Get rid of duplicate translation fetching for tribes (#4170)\n    - Get rid of duplicate translation fetching for tribes\n    - Add examples to documentation\n- Get rid of duplicate translation fetching for world (#4171)\n- Fix poor hamlet warning message localization (#4293)\n- Fix lua ngettext textdomain recognition\n- Tribe descnames are already localized when loading the tribe info. (#4336)\n- Fix statistics button translation (#4337): Dump the lua value untranslated and let C++ do the translation\n- fix player name (#4354)\n- Fix typography in tribes (#4474)\n- Add missing translators comments (#4487)\n- Disambiguate helptexts for soldier-related buildings (#4499)\n- Disambiguate soldier strings in training site tooltips (#4501)\n- Disambiguate militarysite statistics for tribes (#4502)\n    - Disambiguate militarysite census for tribes via Lua scripts\n    - Cache statistics strings to we don't have to keep running the Lua scripts\n- Fix Lua npgettext\n- Amazons string fixes (#4507)\n- Disambiguate messages sent by military sites (#4511)\n- Replace remaining occurrences of `set_textdomain` (#4512)\n- Improve profile handling of translatable strings (#4547)\n    - Saved maps' name, descr and hint are now always marked for translation. The author is by default not translated, but if the markup is added manually it will be readded when saving.\n    - As a side-effect this branch allows us to remove redundant strings from add-on config files.\n- Add missing textdomain calls (#4643, #4652)\n- Localize timestamps of remote add-ons (#4700)\n- Send localized cheating messages (#4462)\n- Fixed string issues (#4005, #4723, #4728, #4731, #4752, #4770, #4808, #4846)\n- Catch exception on invalid locale (#4725)\n- Fix textdomains for add-on maps and support localized map set directory names (#4743)\n- Fix npgettext textdomains for add-ons (#4762)\n- Tribe-specific No Scout Hut Connected hint (#4770)\n- Fix textdomain for keyboard shortcuts (#4799)\n- Fix skipping of one-liner diffs in translation updates\n- Add missing `pgettext` calls in emp04 (#4830)\n\n\n### Help and Documentation\n\n- fixed the helptext_note for frisian beekeeper (#3967)\n- Corrections to Mask and Warhelm descriptions (#3896)\n- Shift production program documentation to source code. (#4045)\n    - Shift production program documentation to source code\n    - Add documentation for construct and recruit\n- Document animations (#4059)\n    - Add documentation for `duration` data type to scripting reference\n    - Shift `animate=` documentation to central location\n    - Add deprecation warnings\n    - Fix Empire scenario 4\n- Add \"becomes\" to immovable help (#4071)\n    - Add immovable transformations to Tribes Encyclopedia\n    - Expose ShipDescr to Lua\n    - Add some checks for validating immovable transformations\n- Program documentation (#4140)\n    - Update Production Program documentation\n    - Modernize program code for empire scenario 4\n- Fix help for atlantean labyrinth (#4165)\n- adopted mines hint to use new resource names\n- Shift tribe helptexts (#4153): Shift tribe helptexts to `units.lua` in order to move the tribe-dependent information out of units.\n- Delete obsolete helptexts (#4206)\n- Enhance production site help (#4088)\n    - Add \"creates\" and \"collects\" sections to productionsites in the Encyclopedia\n    - Use created/collected info to add some purpose icons\n    - Add menu icons to rocks\n    - Make tree menu icons smaller\n    - Add regression tests for supporting/supported productionsites\n- Fix typos in comments, messages, documentation (#4221)\n- Fix representative images in building help (#4298)\n- Removed outdated reference to number of tribes (#4312)\n- Add helptexts for Frisian immovables (#4361)\n    - Add helptexts for berry bushes\n    - Add pond helptexts\n    - Add explanation for flowering\n- Fix lua doc for custom buildings (#4371)\n- Start fixing encyclopedia strings (#4551)\n- Themes: Docs & Fail Safe (#4594): Fail safe on missing template images, and write documentation for theme definitions\n- added info about ports vulnerability to port helptexts and empire 03 (#4665)\n- added documentation for start conditions\n- Clean up helptexts files (#4756)\n- Reworked RST for `lua_game.cc` (#4773)\n- Add-Ons: More verbose documentation (#4758)\n- Fix documentation 2 (#4776)\n- Document `LuaDescriptions::modify_unit` (#4807)\n- Fix documentation 3 (#4798)\n- Fix documentation `wlmaps` (#4822): Make MapObjectDescription understandable\n- Remove pseudo classes HasXy's (#4865)\n\n\n### Editor\n\n- Fix editor player menu glitches (#4031)\n- Fix editor MapOptions tabbing order (#4035)\n- Editor Suggested Teams Box (#4023): Add Editor UI for defining suggested teams\n- Editor MainMenuLoadOrSaveMap Tweaks (#4101)\n    - Use dropdown to select between (localized) map names and filenames\n    - Default to (localized) map names\n- Add terrain affinity to editor tooltips (#4185)\n    - Show preferred terrains tooltips when placing immovables\n    - Add tree tooltip to terrain help\n    - Remove obsolete 'likes trees' workaround\n- Fix random map generator terrain selection (#4290)\n- Use basic tribe info in editor player menu (#4428)\n- Tweak some random map terrain definitions (#4449)\n- Random map menu tweaks (#4469): Predefined profiles for Default, Alpine, Atoll, Wasteland, Random\n- Resize minimap when map size changes to prevent a crash (#4519)\n- Resize minimap on map creation (#4560)\n- Fix crash when using debug console in editor (#4737)\n- Make editor toolsize hotkeys configurable (#4769)\n- Fix crash when loading map with not installed add-on in editor (#4900)\n- Catch more editor exceptions gracefully (#4902)\n\n\n### Graphics Engine\n\n- Fix spritesheet representative image display (#3972)\n- Fix coordinate maths error in road graphics (#4032)\n- Fix `GL_SHADING_LANGUAGE_VERSION` parsing (#4058)\n    - The version number may be followed by vendor-specific information after a space.\n    - This fix ensures that it's not glued to the minor version number, which would break lexical_cast.\n- Fix z-layering glitches of roads (#4049)\n- Use player fields for terrain rendering (#4036)\n- Fix terrain glitches in `see_all` mode (#4084)\n- Clamp textures to fix artifacts at edges (#4107)\n- Remove bytes per pixel check and improve graphics report (#4115)\n    - Remove bytes per pixel check and improve graphics report\n    - Improve Codecheck %z detection\n- Add advdef to optimize png (#4150)\n- Fix blurry sprite rendering at 1x zoom (#4169)\n    - Align the sprites to whole pixels when at 1x zoom to get pixel-perfect rendering.\n    - Tweak mouse wheel zooming formula so when we zoom the same number of steps in and out we end up at the same zoom we started at.\n- Deactivate optipng\n- Fix text baseline and vertical alignment (#4133)\n    - Determine the real ascent of a rendered string.\n    - Valign: When aligning text make sure all text nodes in a line are aligned to the same baseline.\n    - Valign: Change bottom alignment of images to align to the very bottom, not to the text baseline.\n    - Valign: Top and center alignment were moving some nodes too far up. This was fixed.\n- Add tests for spritesheet and file animations (#4064)\n- Fix ImageCache/FontHandler initialization order (#4252)\n- Fix garbage at sprite edges in tree spritesheets (#4372)\n- Optimize drawing overlapping workareas (#4439)\n- Set swap interval to 0 (#4430): This reduces graphics latency\n- Add-ons performance tweaks (#4694)\n- Warn&Exit on too old OpenGL version (#4666)\n\n\n### Networking\n\n- Fixing not being able to load multiplayer games. (#4402)\n- Remove wrong assert in came client (#4443): The information comes from the host at a later point, so we can't guarantee it.\n- Chat recipients (#4344)\n    - Added dropdown menu to select the recipient of a chat message.\n    - Allow sending chat messages to all team members at once.\n    - Implement auto-complete for player names in chat with ctrl+space or double-space.\n- Fix LAN mapname localization (#4567)\n- Add missing postload call (#4568)\n- Fix heap-use-after-free in LaunchMPG (#4587)\n- MP: Do not load empty map (#4680)\n- Add-Ons Sync Safety (#4685)\n- Enforce host's choice of add-ons on clients (#4692)\n- No message box on `CLIENT_LEFT_GAME` (#4703)\n- MP Fixes (#4716)\n- Request no bug report for expected disconnects (#4722)\n- Fix desyncs with tribe add-ons (#4777)\n- Fix uncaught exception on MP add-on mismatches (#4885)\n\n\n### Build System\n\n- Fix snprintf error for Windows build (#3916)\n- Fix Clang compiler warnings (#3991)\n- Update keyring of MSYS2\n- Enforce clang-tidy checks to clean up the codebase (#4025)\n- Add -flto optimization flag with gcc, when building without debugging (=Release)\n- Add cross-compile-unit optimization with Linux GCC. (#3879)\n- Move MS-Windows and MacOS packaging and integration, clang-tidy checks, and testsuites to GitHub actions\n- CMake Cleanups (#4100)\n    - correct naming of Intl variables\n    - remove outdated cmake module\n    - glew fixes\n    - more variable changes and modules\n    - use targets for sdl2_image|ttf|mixer\n    - module/config mode is implicit\n    - SDL2 itself checks for threads (if not on OSX)\n    - correct SDL2 linking\n    - set minimum cmake version to 3.9 (cmake on the trusty images on travis)\n- Build a static linked executable with msys2 (Appveyor&Github Workflow) (#3982)\n- allow building on Xenial daily ppa\n- Update CMakeLists.txt (#4161)\n    - lower Cmake requirment to 3.5\n    - re-include the FindICU module for cmake older than 3.7\n    - show cmake version\n- Clean up includes\n- Fix CMake packages on Xenial (#4181)\n- fixed usage of static glew (#4195)\n- Update compiler minimum versions\n- Include `<cstdlib>` in files that need it (#4219, #4218)\n- Fixes \"error: chosen constructor is explicit in copy-initialization\" (#4220)\n- Replace boost::regex with std::regex (#4199)\n    - Replace `boost:regex` with `std::regex`\n    - Upgrade minimum requirement from clang5 to clang6\n- fix appveyor cmake (#4246): install msys2 cmake rather then using windows installed one\n- Add codecheck rule for image files (#4063): Added a codecheck rule to check if images exist. Only image files that can be found via string literals are being checked.\n- Add Codecheck rule for `<cstdlib>` to make `libc++` happy (#4223): Add codecheck rule to ensure cstdlib for older Macs\n- Fix Codecheck `<cstdlib>` error message (#4264)\n    - Fix Codecheck `<cstdlib>` error message\n    - Strip whitespace from function names\n- revert the cmake installation to use system cmake again\n- Improve testsuite error handling (#4326)\n- Convert `\\` in windows path to `/` (#4389)\n- Fix transient SDL error handling (#4414)\n- Strip comments in codecheck rule (#4481)\n- MSVC support (VS 2019) (#4420)\n- Add curl dependency\n- added libdeflate as static library where tiff is to be linked (#4573)\n- Fix linking with opus (#4789)\n- Fix MinGW revision detection and linking (#4870)\n- Fix codecheck path magic (#4895)\n\n\n### Other Issues\n\n- Use Ubuntu 20.04 for code formatting (#3946)\n- Switch to new version scheme (#4001)\n- Use std::make_pair when inserting elements into maps (#4066)\n- Turn some enums into enum classes (#4079)\n- Removed unused enum `PlayerType`\n- Sort directories & files when running optimize_pngs.py (#3958)\n- Get rid of some \"using namespace\" statements (#4094)\n- Add Frisians to lua_testsuite map (#4135)\n- Fix an `#ifdef` in wlapplication messages (#4166)\n    - Fix compiler warning about `#elif _WIN32`\n    - Show game data path on MacOS\n- Reduce `graphic.h` includes (#4159)\n- Refactor log() output (#4162)\n    - Add timestamps to log output\n    - End all log entries with a newline\n    - Distinguish log levels (info, debug, warning, error)\n- Create directory structure in homedir (#4189)\n    - Create directory structure in homedir for maps, replays and savegames\n    - Hide empty directories in map selection\n- Allow sparse IDs in plot area data (#4179)\n- Fix compiler warnings\n- Log output formatting (#4212)\n- Optimize `ObjectManager::object_still_available()` (#4242)\n- Handle video problems of helper applications in CI environment (#4245)\n- Restore `object_still_available` to its former \"glory\" (#4263)\n- Using Visual Studio 2019 on appveyor\n- Delete the `is_a()` macro (#4297)\n- Reducing too strong asserts to an if-clause. (#4364)\n- Modernize loops (#4348)\n- Remove `ObjectManager::object_still_available` and use `OPtr` instead (#4353)\n- Fix simple cppcheck issues (#4355)\n- Make `Time` and `Duration` typesafe (#4325)\n- Do not use `memset` to initialize arrays in Map (#4377)\n- Refactor PartiallyFinishedBuildingDetails (#4397)\n- Refactor get_all_tribeinfos() (#4421)\n    - Shift exception triggering for missing tribe infos to the UI to fix the road tests. Remove some superfluous loalization markers.\n    - Show messagebox to player instead of crashing\n- Get rid of code duplication in `lua_root.cc` (#4419)\n- Use `unique_ptr` for building settings (#4448)\n- Python 3 compatibility and modernizing; Ensure utils directory works with Python3 (#4546, #4730)\n- Clean up superfluous log output (#4755)\n- Fix vision unequality operator (#4771)\n- Forward compatibility for remote add-ons (#4802)\n- Skip preloading invalid add-ons (#4840)\n\n\n\n## Build 21\n\n\n### Animations, Icons and Overlays\n\n- New Road Textures for Frisians\n- All animations for soldiers can depend on their training levels.\n  4 complete sets of animations for the Frisian soldier\n- New Widelands logo\n- New cornfield images for Atlanteans\n- New reedfield graphics (#3500)\n- Add support for spritesheets #3162 (#3489)\n- Change color code for blue and black player (#3582)\n- Add proper menu icons (#3557)\n  - added proper icons for zoom\n  - add proper sound options menu\n  - added icons for gamespeed\n  - add clock for gamespeed\n- Mipmap Spritesheets for all frisian units (#3554)\n- Graphics for the stink tree shrub\n- Images for new charcoal burner animations, charcoal burner´s house, and the two new pond types\n- Add footbridge eye candy (#3610)\n- Improve soldier level graphics and chat menu code (#3479)\n  - Improve visibility of health bar graphs\n  - Add toggle for soldier level/health bar graphics\n  - Indicate in building statistics whether workers are on their way\n  - Small refactoring for chat menu code\n- Spritesheet graphics for frisian ferry yard and ferry; nicer placeholders for the other tribes' ferries\n- Added 'X' signpost to frisian empty mine anims (#3676)\n- Create spritesheets for trees (#3702)\n- Spritesheets & MipMaps for Barbarian workers (#3779)\n- Fix recycling center hotspot (#3922)\n\n\n### Sounds and Music\n\n- Complete overhaul of the sound handler\n  - Categorize sound effects and overhaul the sound options to have\n    separate sliders for music, UI sounds, chat messages, game messages\n    and ambient sounds. Available both in-game and in the Fullscreen menu\n    options.\n  - Memory saver: Only load sound effects when they are played for the\n    first time and then keep them in memory until their category is\n    cleared. Clear the ambient sounds when EditorGameBase gets destroyed\n  - Implement stereo position and distance for sounds emitted by map\n    objects. This includes in-game messages to the player that have been\n    triggered by map objects.\n  - Website binaries no longer instantiate the global sound handler.\n  - Switch to ingame music set in netsetup and internet lobby, because\n    just 1 song can get annoying while waiting for other players.\n- Added sound to helmsmithy\n- Use sound handler to change music in editor (#3591)\n- Play sound on new messages when chat windows is closed (#3586)\n\n\n### Tutorials and Campaigns\n\n- Fixed formatting of victory messages in Empire scenarios 3 & 4\n- Converted campaigns definition to Lua\n- Mark scenarios as solved rather than as unlocked\n- Always unlock all campaigns\n- Overhauled Tutorial 1 & 4\n- Fixes and improvements for Empire scenarios 3 + 4\n- Fixed bug #1838193: Single player campaigns no longer work\n- String improvements for Frisian campaign\n- Additional autosave in fri01 (#3567)\n- Fixed #3642: add ferries to seafaring tutorial\n- Fixes to empire scenario 4 (#3690)\n  - Fix nil index if Temple of Vesta is trying to donate but was destroyed by enemy\n  - Give farm plans if player captures the artefact before objective was triggered\n- Minimal startconditions (#3689): New hardcore and minimal starting conditions \"Poor Hamlet\" and \"Struggling Outpost\" for all tribes\n- Fixes to the economy tutorial (#3746)\n  - Fix image filepath for wheatfields\n  - Explain wares input queues for wares that are on their way\n- Tutorial message: speed change shortcuts (#3761): Added message about keyboard shortcuts to Tutorial 1.\n- Seafaring tutorial improvements (#3782)\n  - Start the Ship Yard objective while the port is still building\n  - Add Ferry Yard objective (to make a break in ferrying tutorial text)\n  - Scroll to gold resource indicator\n- Refined text about water resources in Barbarian campaign.\n- Warfare tutorial - Teach the player about scouting (#3774)\n  - New objective \"Build Scout's Hut\"\n  - New objective \"Explore the map\"\n- More seafaring tutorial improvements (#3788)\n  - Run waterways tutorial along with shipyard objective\n  - New objective: Build an iron mine\n  - Remind player to stop ferry yard production\n  - Remind player to stop shipyard production when second ship is built\n  - Evaluate gold mine and ferries simultaneously\n- Difficulty stages for scenarios (#3795): Allow campaign designers to define various difficulty stages for campaigns\n- Replace deprecated `message_box_objective()` function (#3807)\n  - Replaced deprecated function `message_box_objective()`\n  - \"Scolded\" message box was too high\n  - Removed height properties\n  - Updated image links\n  - Move `new_objectives` over from `richtext_scenarios`\n- Replace deprecated reveal_scenario with mark_scenario_as_solved in frisian campaign (#3825)\n- Include all scripts in scenarios from the init.lua (#3828)\n- Tutorial 01: Click-by-click demonstration of worker area (#3818)\n- Fix duplicate campaign descriptions in the campaign select menu (#3892)\n\n\n### Scripting\n\n- Unified notification code for Territorial Time and Territorial Lord win\n  conditions\n- Added statistics hook for Territorial Time and Territorial Lord win conditions\n- Added statistics hook for Artifacts win condition\n- Fixed a bug in Artifacts which led to coroutine error if Player defeated when\n  reaching win condition\n- Skip recalculate_allows_seafaring more often when setting/unsetting port\n  spaces via Lua\n- Allow scripts to override the hostility of each player to each other player.\n- Renamed some World and Tribes units\n  - Tribe Immovable: \"field\"       -> \"wheat field\"\n  - Tribe Immovable: \"reed\"        -> \"reed field\"\n  - Ware:            \"thatch reed\" -> \"reed\"\n  - Critter:         \"elk\"         -> \"moose\"\n- Added dropdowns to Lua interface\n- Territorial Time don't add previous message to status (#3559)\n- Allow peaceful mode for territorial time (#3587). Since the game ends after 4 hours anyway, we can also allow peacful mode here.\n- Cleanup luainterface include (#3672): Remove superfluous Lua interface include in tribe_descr.cc\n- Territorial peaceful (#3717): In peaceful mode, end the territorial win conditions prematurely if no more land can be gained.\n- Fix trading outpost and village start condition (#3753)\n- Allow starting expeditions and changing a ship's capacity via Lua.\n- `count_owned_valuable_fields`: check for `nil` (#3932): assign 0 if player has no valuable fields\n\n\n### Maps\n\n- Simplifying the Fellowships map, for better playing experience. (#3792)\n- More official maps (#3773)\n  - Made Europa 1.1, Long Long Way v2, No Metal Challenge v2, Astoria 2.R (without artefacts, with ferries), and Escher_Goose_Fish official\n  - Removed Impact and Volcanic Winter\n  - Updated Dolomites\n\n### Saveloading\n\n- Add support for critter renamings depending on packet version to\n  WorldLegacyLookupTable\n- New map version property \"needs_widelands_version_after\" for the website\n- Use legacy_lookup_table to avoid thatch_reed problem (#3549). Extend legacy_lookup_table to have consistent code.\n- Map saving critical characters (#3590)\n  - add call edit_box_changed to check for invalid characters\n  - enable ok button by default\n- More verbose progress info during saveloading (#3598)\n- Current stats value now is saved. Side effect is that Ai has current stats after saveloading as well\n- Rework GamePlayerEconomiesPacket to fix saveloading when 2 ships are on the same location\n- Make emergency saves not cause additional crashes (#3710)\n- Fix wares stuck on flag after loading (#3712). Legal values for Carrier::promised_pickup_to_ are -1 to 1. Previously values under -1 were used. This compatibility code was supposed to change them to -1 when loading saved games with the old values. Instead it changed values *over* -1 which could cause carriers to forget they acked a ware, and never go to pick it up.\n- Make inputqueue saveloading robust (#3707)\n  - Save `descr().name()` instead of `DescriptionIndex`\n  - Skip outdated wares/workers when loading `BuildingSettings`\n  - Make exception for nonexisting input queues more informative\n  - Improve performance for `BuildingSettings` by using switch statements\n- Rework economy savegame compatibility (#3721): Reworked the way old-style economies from b20 savegames are split into new-style economies\n- Faster game saving with endless_game_fogless win condition (#3858)\n- Fix economy mismatch in Request loading (#3870)\n- Load replay savegames in multiplayer screens (#3948)\n\n\n### AI\n- Many hundreds of rounds of AI training\n- Performance improvements\n- AI is now able to adopt to scenarios to a certain extent\n- Implemented AI hints for workers\n- We now deduce whether a building is a barracks or recruits other workers from\n  building outputs\n- Moved ware preciousness into a new AI hint object\n- Reworked how AI internally calculates utilization of productionsites\n- Improved distance calculation between flags and warehouses\n- Added AI unit tests\n- Relaxed AI requirement for hunters\n- AI error is more informative when building is missing the\n  \"collects_ware_from_map\" AI hint\n- Replace some asserts in the AI with more informative Exceptions for tribe/world designers. (#3524)\n- Limit ware/worker preciousness for the AI. (#3530): Warn if ware/worker preciousness is a bit high and throw an exception if it's over 200.\n- AI supports seafaring (#3528). This introduces new ai_hint \"supports_seafaring\", that will be used to boost building score for particular building when on seafaring map.\n- AI fixes (#3602)\n  - fixed crude percent to prevent overflow\n  - AI worker management\n  - implemented a worker management for AI Productionsites and mines.\n  - added a malus for unoccupied sites to the build decisions.\n  - some small improvements for upgradehandling of buildings\n- Added 1 empire toolsmithy to basic economy\n- Added barbarian charcoal kiln to basic economy\n- Allow ware preciousness of 50 in AI hints. (#3725)\n- Remove unused AI properties + some improvements (#3681)\n  - Remove 'refinedlog', 'rawlog', 'ironore' and granite' parameters\n    from Ai Code and TribeDescr\n  - improve AI mines handling\n  - Make the Ai build mines as needed\n  - Fix an issue where trainingsite proportion was not taken into account\n    when upgrading a trainingsite\n  - Attempt to fix Ai unnecessary dismantling Militarysites\n- Fixed bugs in the AI's attack decision algorithm and exposed some weighting factors to the genetic algorithm (#3873)\n- preventing zero division in Check_building_necesity (#3910)\n\n\n### Gameplay\n\n- Improved ware/worker routing algorithm for ships and portdocks\n- Added new option 'Peaceful Mode' to the launch game screens\n- Fixed diverse bugs in tooltips generated by production programs\n- When a mine's main vein is exhausted, don't show tooltip for missing food\n- Switch building to unoccupied animation when worker is removed\n- Allow basic tasks like carrying out superfluous wares even if not all workers\n  are present yet\n- Do not send soldiers to attack if they are not stationed in a militarysite\n  any more\n- Improve performance and memory usage when loading tribes and world\n- Failed programs are now added to the skipped stacks\n- Moved sleep behind return/consume/callworker\n- Add some sleep time to costly loops in fri02 to prevent freezing\n- Split time 50/50 between building/worker for Atlantean fishbreeder\n- Fixed a bug where a building remains inactive after kicking a worker\n- Added a new option \"swim\" to the \"findspace\" worker program that will detect\n  coastal nodes\n- Implemented terraforming:\n  - Added a new parameter \"terraform\" to the \"findspace\" worker program that\n    will detect nodes where terrains can be terraformed\n  - Added new optional parameter \"enhancement\" to terrains for defining\n    terraforming targets\n- Allow constructing buildings over immovables with building parameter\n  \"built_over_immovable\" = <immovable attribute>\n- Fixed bug #1642882: Port should clear enough land to build\n- Fixed bug #1827033: Fix an assert fail because of nullptr destinations in the shipping algorithm\n- Tweak trainingsites' sleep/work cycle. Split animation times in half where possible to make the screen less \"noisy\".\n- New planning-ahead ship scheduling algorithm (#3483): Redesigned ship transport algorithm\n- When enhancing constructionsite, soldier and inptqueue capacities are subtracted instead of preserved (#3593)\n- Ferry (#3481): Rowboats to transport wares over streams\n- Balancing tweaks:\n  - Change Barbarian evade increase per level from 15 to 16.\n  - Make Empire Piggery work 20% faster\n  - Empire Vineyards plant a bit faster\n  - Made piggeries work as fast as donkeybreeders\n  - Sped up empire vineyard to deliver approx every 40 secs\n  - Increased basic amount of vineyards to 2\n  - Made empire weaving mill and weapon smith medium buildings\n  - Reduced evade trainingcosts from 2 to 1 for empire\n  - Reduced barbarian evade 2 costs by 1 bread\n  - Made barbarian farmer as fast as empire and atlantean\n  - Increased barbarian conquer radius of tower and barrier from 8 to 9\n  - Adapted frisian farming cycle to match the other tribes\n  - Reduced frisian food cost for training\n  - Reduced frisian blacksmithy inputs\n  - sped up honeybread baking: only 5 secs more than normal bread\n  - spead up mead brewing by 5 secs (same sleeptime as for beer)\n  - reduced input of aqua farm\n  - sped up barbarians smelting works.\n  - sped up frisian ironsmelting\n  - reduced buildcost for several buildings\n  - removed superfluous \"remove= chance\" commands from berry bushes\n  - made new frisian small charcoal kiln using ponds of claydigger\n  - created Stink tree as bush suited for blackland.\n- Reduce default target quantity of planks for empire from 40 to 20.\n- Improved ferries buildcost and ferry yard working radius\n- Productionsite performance (#3645): Changes Productionsite Productivity from attempt based to time based\n  - made it reach 100 %\n  - based the statistics period on average working time\n  - switched back to common time base\n  - fixed 3 program cycles\n  - Quarry Productivity Drop Fix (#3933)\n- Tribes fixes (#3682)\n  - increased starting hammers for frisians to 10\n  - charcoal burner consumes before making a stack, searches for a pond first.\n  - Collects coal always only making stacks is dependend on economy\n  - frisian tavern prefers berries over bread\n  - changed ware order for frisians\n  - deleted default_target_quantitiy for blacckroot flour\n  - removed superfluous Ai hints\n- Remove experimental mark from Frisians. (#3703)\n- Interpolate linear when applying building settings (#3735) (preserve proportions rather than absolute numbers). Fixes #3734, improves the fix for #3592.\n- Consistent farmers (#3749): Made farmers consistently use space. they can plant between buildings but not on shore now\n- Quickfix for shippingitems without destination (#3751)\n- Configurable expeditions & Discovery starting condition (#3692)\n  - New starting condition Discovery: Start with three expedition ships on the ocean and a handful of starting wares and workers.\n  - Allow selecting additional wares to take on the expedition in the portdock.\n- Soldier healing (#3736): Military sites start healing their soldiers when they're on their way home\n- Fix huge soldier healing in the field (#3797): Healing was higher than intended because of min() and max() mix-up.\n- Tweaked builtin economy profiles (#3787)\n- Fix rookie creation for hero demands (#3804): Requests for heroes should not trigger rookie production\n- Fix desyncs due to an uninitialized variable by exposing the Seed radius random factor of trees to the init.lua\n- 2940 better trainingsite soldier selection (#3835): Trainingsite attempts to get soldiers that already are partially trained. If the trainingsite fails to train, it switches strategy and requests soldiers that are below the failing level. If training succeeds, the site starts requesting strong soldiers again. If the site does not get new soldiers, it will gradually start accepting all trainable soldiers (old way).\n- Let Barbarians produce cloth on maps without seafaring (#3846): Remove productionsite program \"checkmap\". It is redundant because all buildings that use it also use map_check, which checks for the same thing at construction time.\n- Hide economy setting when default target quantity is 0 (#3855) (for atlantean blackroot flour)\n- Allow preserving wares left in buildings when dismantling or enhancing (#3844)\n- Allow setting economy targets to ∞ (#3837)\n- Removed `return=no_stats` from productionsite programs (#3865)\n- Barbarian Poor Hamlet fix (#3888): Changed tool order in barbarian metal workshop\n- Fixes issue #3869: No training in camp for Empire (#3871)\n- Refactor Ship Scheduling (#3857): Reimplements the new planning-ahead shipping algorithm\n\n\n### User Interface\n\n- Hold down Ctrl when using the capacity arrow buttons in military- and\n  trainingsites to set the capacity to min/max\n- Redesigned the campaign/scenario selection screens to use Box layout\n- Fixed fullscreen switching for the campaign/scenario selection screens\n- Files to be included in the \"load savegame\" screens are now determined\n  by file extension\n- Improved layout for the statistics graphs\n- Show a port icon on the field where an expedition ship can build a port\n- Sort the lobby client list. The admin users will be on top of the list,\n  followed by registered and unregistered. IRC users are at the bottom.\n- Display IRC users' join/part messages\n- Automatically set focus to chat input in lobby & multiplayer game setup\n- On input queues, hold down Shift to increase/decrease all ware types at the\n  same time\n- On an input queue, hold down Ctrl to allow/disallow all of its ware\n- Allow the player to choose the soldiers to send in the attack box\n- Indicate overlapping work areas when placing buildings\n  - Added the hotkey W to enable/disable highlighting workarea overlaps\n  - Productionsite overlaps are only shown for certain building types\n    of interest by using the table \"indicate_workarea_overlaps\"\n- Except for scenario and win condition messages, define all font styles via Lua\n- Users can define and save their own profiles of economy target quantities\n- Don't show % for trend in building statistics overlay\n- Increased caret to 14px\n- Allow players to define settings for and to enhance buildings under\n  construction\n- Fix positioning of dropdown lists on fullscreen switches\n- Define dropdown list height by number of items rather than by pixels on screen\n- Bug fix: Panel::free_children() now frees all its children\n- Fix toggling of minimized UniqueWindows\n- Fixed keyboard map movement when windows are open\n- Converted toolbar menus to dropdowns\n- Fixed moving the economy options window to top when clicking Configure Economy\n- Fix time display in General Statistics (#3486)\n- Keyboard handling for the Escape key (#3527): Window closing, opening OptionsMenu and exiting using the keyboard\n- Fixed #3320 Building windows too easy to minimize (Ctrl-click)\n- Fixed accidental sending of playercommands in ConstructionSiteWindow::think and made soldier capacity buttons repeating (#3562)\n- Fix deleting of dropdown lists in UniqueWindow and Player Menu. (#3478)\n- Fix changing window width and button location in milsite-constructionsites (#3572): Tie soldier capacity buttons to edges in milsite-csites and set a fixed string width of 145\n- Move csite enhance button to caps buttons box (#3575)\n- Add Hotkey for General Statistics &  Wares Statistics (#3589): Also, capitalized Hotkeys in description i → I, m → M\n- Ship statistics: change window size and button placement (#3584). The window and the description row are now 20px wider. Filterbox buttons are now centered.\n- Changed spacing for Construction Sites & Warehouses (#3576): Change spacing for construction sites; unify the layout for the priority buttons in warehouses; center \"Stopped\"-Checkbox.\n- Make mouse behavior consitent for FieldActionWindow (#3564)\n- Fix heap-use-after-free in dropdown lambdas (#3601)\n- Display seafaring buildings at the end of the list (#3566)\n- Press Ctrl + F to toggle Fullscreen (#3606)\n- make game speed more fine grained (#3611)\n  - SHIFT + PAGE UP/DOWN = +/- .25x\n  - CTRL + PAGE UP/DOWN = +/- 10x\n  - This also works with the menus buttons.\n  - SHIFT + PAUSE Resets the speed to 1x\n- Implemented diagonal scrolling:\n  - Number pad is now dedicated for map scrolling.\n  - Number pad: 1/3/7/9 scrolls diagonal.\n  - 5 works like pressing HOME.\n  - Arrow keys: LEFT/UP, LEFT/DOWN, RIGHT/UP & RIGHT/DOWN scrolls diagonal\n  - Scrolling distance is 1/8, with CTRL 1/4 and with SHIFT 1/16 of the screen resolution in x/y-direction and set to smooth.\n- MiniMap overhaul (#3616)\n  - buttons for the MiniMap are in one row\n  - MiniMap zoom limited to 600px\n  - MiniMap tries to scale up to 300px/400px in normal mode\n  - when map has a width of more than 300, zoom is disabled\n  - disable zoom if the MiniMap height gets greater than the game's\n  - check size when switching into window mode\n  - redraw viewport window after resolution change\n  - MiniMap renderer: tiny refactoring\n- Add new Options (#3614)\n  - add option to only zoom when ctrl is pressed\n  - read/write sound settings to config on start (fixes #3507)\n  - add option to disable game clock\n  - add missing game options to UI\n  - add a little more spacing for wares decription\n- Fix Multiplayer Setup Window (#3580)\n  - Chatpanel is now properly aligned to the ok and back button\n  - Chatpanel only has focus when clicked on it (removes cursor when not active)\n  - Peaceful Mode checkbox has fixed spacing above and below\n  - Text for missing map/savegame files has been moved to map_info_\n  - client_info_ has been remove since it does not provide any information of value and only duplicates information already available.\n  - Full width button for map select.\n  - Start Game button has been moved below the back button.\n- Disable start attack button when zero soldiers are selected\n- Progress UI issues (#3644)\n  - Placeholders in saveloading progress messages\n  - Wider progress window bar\n- FullscreenMenuNetSetupLAN now relayouts itself for resolution switches (#3632)\n- Display workarea to illustrate waterway length limit in waterwaybuildingmode\n- Loading map menu (#3561): Add support for subdirectories to game loading and saving\n- Use dropdowns for filtering mapselect (#3651): Redesign filters in Mapselect to use driopdowns. This saves us horizontal space for translations, and we also gain 1 row of vertical space.\n  - Add autofit text width capabilities to buttons and dropdowns\n  - Replace broken \"Show all maps\" checkbox with button\n  - Replace team-related checkboxes with dropdown\n  - Add dropdown for balanced/unbalanced.\n  - Add dropdown for official/unofficial\n- Shift window positions on fullscreen toggle (#3677)\n  - Make in-game/in-editor windows fit on resolution changes:\n  - Centered windows stay centered\n  - Windows that are completely in the right/bottom half keep their relationship to the right/bottom edge\n  - Windows that don't fit any more are shifted left/up\n  - Full-size windows get resized instead of shifted (editor load/save map).\n- Typo in FieldActionWindow::building_icon_mouse_in (#3661): When placing a constructionsite for a military building or port, highlight overlapping workareas not only for nearby existing milsites & ports but also for nearby milsites & ports under construction\n- Fixing dialog for non attackable big buildings (#3684)\n  - Fixing bug that an attack window can be opened for a not attackable big building.\n  - Fixing sporadic flickering of newly opened attack window.\n- Refactor loader_ui (#3688)\n  - ProgressWindow and GameTips are now managed by EditorGameGase.\n    This avoids ownership conflicts and crashes when we run without window.\n  - Show game tips on scenarios that don't have a special background image\n  - Remove ProgressWindow as early as possible\n  - Don't show progress on autosaves and scenario objective saves\n- Don't start zoom animation if target zoom is the same as current (#3713). Fixes flickering census strings on invisible map movement #3660\n- Use capital letters for shortcuts (#3733)\n- Add missing `richtext_escape` to `text_width` function and editbox (#3764)\n- Use a dropdown for selecting starting conditions in PlayerDescrGroup.\n- Window titlebar buttons (#3763)\n  - Add buttons to close, pin/unpin and minimize/restore windows to every window's titlebar.\n  - Pinned windows cannot be closed by right-click, Esc, or the close button, and cannot be minimized.\n- Refactor saveloading ui (#3748)\n  - Further separating of concerns: Extracted savegame loading code (SavegameLoader) and savegame deleting code (SavegameDeleter) into own classes\n  - Introduced small inheritance hierachy for both of these classes to adhere to different loading/deleting of replays/multiplayer/singleplayer\n  - Show directory names in game details\n- Refactored road and waterway building mode and Lua road building functions and fixed a bug in secret village\n- Re-add quick navigation with comma and period keys (#3799)\n- Delete Ctrl-F10 hotkey (#3813)\n- Fix a bug causing road buttons instead of waterway buttons to be added in waterway building mode when clicking on a field where the waterway can't be built.\n- Make wares_in_warehouses the default tab for stock statistics (#3765)\n- Add an option to use SDL mouse cursor (#3810)\n- Add numpad hotkeys (#3840)\n  - Handle zooming with numpad +/-/0 keys and = key\n  - Handle numpad keys in the editor\n  - Handle filtering game messages with numpad keys\n  - Handle filtering seafaring statistics with numpad keys\n  - Handle quick navigation with numpad keys\n- Fix visual glitches and division by zero in WuiPlotArea (#3838)\n- Fix text alignment problem (#3854)\n- Use crude percent from AI for performance statistics string in productionsites\n\n\n### Internationalization\n- Added localized versions to the basic SDL error messages\n- Delete translations that are below 10% and that have not had any active translators for 5 years. Removed locales are:\n  - af_ZA\n  - ast\n  - en_CA\n  - et\n  - ia\n  - jv\n  - mr\n  - my\n  - oc\n  - rw\n  - si\n  - vi\n  Also, removed backend support for Sinhala and Sinhala + Myanmar fonts.\n- Return correct description instead of empty string. (#3533): Fix string representation of description negation in production prgrams (Fixes #3510)\n- Track po/widelands properly.\n- Diverse string fixes for issues reported on Transifex. (#3622)\n  - Diverse string fixes for issues reported on Transifex.\n  - Add missing localization for hotkey\n- Fix i18n-specific update script creation (#3732)\n  - Use git status -s in translation update script too\n- Add missing entries to buildcat.py (#3814)\n- Fix wrong textdomain for some strings (#3853)\n- Handle missing locale dir on Windows (#3757)\n- Fix transifex issues (#3875)\n- Marked tut03 objective headings for translation (#3901)\n- Fix textdomain for »New Objective(s)« headers (#3936)\n\n\n### Help and Documentation\n\n- New Lore texts for Barbarian units and Atlantean Fishbreeder's House\n- Documented \"strange\" behavior of atlanteans mill for players\n- Improved headings for worker help\n- Fixed path for encyclopedia immovables icon\n- Added missing menu icons for immovables\n- Update Production Program documentation. Ignore has been changed to Skip.\n- Help & tips enhancements (#3772)\n  - Help/tip on keyboard shortcuts to change game speed\n  - Help/tips on map view movement\n- Sphinx documentation: Corrected typo in documentation of PlayerBase::get_workers() method (#3781)\n- Immovable program documentation (#3829)\n- Fix duplicated ware help entries (#3889)\n- Add missing include in building_help.lua (#3924)\n\n\n### Editor\n\n- New tool to change the map size\n- Add a grid overlay that can be toggled with a button or the hotkey 'G'\n- Fix editor loader UI issues (#3653)\n- Fix editor selpos assert after map resize (#3767)\n- Escape richtext in editor info tool (#3798): Fixes broken info tool texts when the map description or author contains '<' or '>'\n- Suggested teams truncated (#3839): Set suggested teams box width to correct calculated parent width and remove superfluous `set_size()`\n- Restrict waterway length limit (#3842): Show a warning when the waterway length limit is set to > 20 in the editor map options\n- Fix editor resize tool (#3850): Reimplements the map's `resize()` function\n\n\n### Graphics Engine\n\n- Added support for mipmaps\n- Show the work areas of buildings as overlays on triangles\n- Add support for map objects' representative images to the font renderer\n- Cache soldiers' directional animations as unique_ptr to prevent memory leaks\n- On newer libmesa versions, context creation fails if we use\n  SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_COMPATIBILITY).\n  Disabled this, which *should* still give us a reasonable context (either the\n  core, which is what we need, or compatible which will give us more than we need).\n- Handle shading language version error (#3531): Show error message box rather than crashing when reading the shading language version returns an error.\n- Abort without failure when there is no working video driver found by SDL. (#3620)\n- Handle video problems in CI environment (#3637): Exit with code 2 if the SDL/TTF system is not available and mark tests as skipped in the test suite when this happens.\n- Animation uncluttering (#3780)\n  - Make savegames robust against changes in animation names\n  - Get rid of Lua tables for \"walkload\" animation if it's identical\n    to the \"walk\" animation\n  - Prefer \"idle\" as main animation\n  - Omit basename when it's identical to the animation name\n  - Add option to `utils/optimize_pngs.py` for restricting to filename prefix\n  - Shift definition of animation directory from individual animations to the\n    map object in order to declutter the Lua tables.\n  - Add mipmaps to Barbarian Carrier to test the changes\n- Fix wrong colors on Big Endian systems (#3890)\n  - Print endianness on startup\n\n\n### Networking\n\n- Check for client.type to not confuse IRC and lobby names\n- Added checks to networking usernames for illegal usernames. If username is\n  taken, append number.\n- Only display games for the same version and when they are open\n- Redesigned login box. Passwords are now replaced with ***.\n- Refactored gameclient.h/.cc for better readability\n- We now use the loopback network interface for LAN announcements\n- We now check the metaserver password without doing a full login\n- Added support for /warn and /kick commands of superusers in the internet\n  gaming lobby\n- Fix for corner case: don't set empty game name if no game is present\n- Fixed bug #1833352: Disallow empty game names in internet lobby\n- Fixed bug # 1842396: Random tribes crash multiplayer client\n- Default uuid to empty string rather than nullptr to prevent crashes. #3501 (#3503)\n- Allow empty password for unregistered accounts in internet gaming. (#3532)\n- Refactoring of the lower layer networking classes (#3540)\n  - Renamed NetRelayConnection to BufferedConnection and rewrote most of it.\n  - Made NetClient an adapter to the new BufferedConnection.\n  - Updated NetHostProxy and NetClientProxy to use the new BufferedConnection.\n  - The NetHost class (for LAN games) is now using a BufferedConnection per client instead of implementing the networking code itself.\n  - Removing the no longer needed Deserializer class.\n- change address to www in lobby messages (#3571)\n- Changing BufferedConnection to be more lenient about network failures (#3579)\n  - Changing BufferedConnection to be more lenient about network failures.\n  - Changing position of log output.\n- Refactor gamehost (#3545): Refactor gamehost for better readability\n- Fixing bug with LAN promotion of games and long map names.\n- Don't send too much data over the network at once, keep the buffers empty.\n- Speeding up file transfers by sending the whole file at once.\n- Switched to alternative low-latency method.\n- Removed operating system specific code branch.\n- Faster file transfers\n- Removing new networking accept code (#3859): The new accept code does not work on Windows, making it impossible to play LAN games with a host running Windows. The reason for this is unknown, but seems to either be in boost or Windows itself. Maybe it can be re-added with some future boost version.\n\n\n### Build System\n\n- Fixed web links in Windows installer\n- Added compile.sh switch -s to skip building the tests\n- Link GL libraries instead of setting flags. This fixes AppVeyor failures due\n  to missing lbpdcurses.dll\n- Added basic support for the XDG standard\n  https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html\n- Moved the official repository from Launchpad to GitHub\n- Revamp Travis-CI builds (#3508, #3512)\n- Document CMake, Ninja, and make options in README\n- Add script for installing dependencies (#3523)\n- Make UI test more resilient against timeouts. (#3525)\n- Add codecheck rule for increment operators. (#3513)\n- Fix formatting when updating translations. #3471 (#3504)\n- Dependency check doesn't work with ninja, so we run it manually from compile.sh (#3480)\n- Replacing a [[ in compile.sh. \"sh\" does not know what to do with it since it requires \"bash\".\n- Add the latest CLANG and GCC versions to Travis (#3539)\n  - Clang 8\n  - Clang 9\n  - GCC 9.1\n- enforce LF for .py .cc .h .lua files\n- explicitely set text mode for Popen to avoid ugly binary strings on windows, e.g. rb'24260'[b'f1fa8f3'@b'master'](Release) (#3551)\n- Fix detect_revision.py to work with a wide variety of python versions (#3552)\n- Update XDG files and move XDG-related stuff from debian/rules to xdg/CMakeLists.txt  (#3547)\n  - utils/update_appdata.py: Make it deterministic\n  - Sort textdomains in alphanumeric order\n  - Regenerate XDG files\n  - Desktop file: Add Keywords\n  - Update desktop file\n     - Add Terminal tag\n     - Add StartupNotify tag\n     - Add StartupWMClass tag\n  - XDG files: Add info about old ID\n    - https://github.com/widelands/widelands/blob/build19/debian/widelands.appdata.xml.stub#L4\n  - AppData file: Remove icon tag\n    - The icon should be fetched from the desktop file.\n  - AppData file: Update links\n     - Update bugtracker url (Launchpad -> GitHub)\n     - Update donation url\n     - Add faq url\n     - Update help url\n     - Update homepage url\n     - Update translate url\n  - Fix Application ID\n    - https://github.com/widelands/widelands/issues/3368#issuecomment-529546678\n  - Update manual\n  - Move XDG-related stuff from debian/rules to xdg/CMakeLists.txt\n     - icons\n     - manual\n     - desktop file\n     - AppData file\n  - Fix old Application ID\n- Appveyor: Install InnoSetup dependency beforehand (#3604)\n- Format C++ before Lua (#3631)\n- Automatically run fix_formatting.py on master and pull requests (#3664): On every push to master and any branch with an open pull request, GitHub runs the formatting suite on it. If there are changes, they are pushed back to the branch.\n- Update macOS Travis-CI\n- Made some functions const to help the compiler optimize (#3674)\n  - Made a bunch of functions const\n  - Got rid of an iterator loop\n  - Remove unimplemented function `void print_land_stats();`\n- Test website binaries on Travis.\n- Improve autoformat PR detection and diff info (#3701)\n  - Check whether the branch has an open PR *after* running fix_formatting. If the user opens the PR within three minutes after pushing, this allows the action to push the changes straight to the new PR, so no \"dummy\" commit is needed in this case to get the action running.\n  - Fix `git diff` showing empty in non-PR branches\n- Fix some compiler warnings (#3694)\n- Catch exception when bzr returns non-zero exit status (#3714): When the bzr command fails to detect a branch the version string correctly falls back to REVDETECT-BROKEN-PLEASE-REPORT-THIS instead of crashing the script\n- Fix translations formatting (#3722)\n  - Add command line switches to `fix_formatting.py` for formatting selectively\n  - Add formatting directives to translation update script for generated Lua files\n- Removing the gce environment setting so build should on hyper-v (with more ram?)\n- Let fix_formatting.py format the codecheck directory (#3723)\n  - Add codecheck directory to pyformat runs\n  - Give codecheck rules file ending so that fix_formatting will pick them up.\n  - Format codecheck rules.\n- Fix sigsev for XDG_DATA_DIRS (#3700)\n- Launchpad mirror (#3766)\n  - Mirrors all changes at widelands:master to lp:widelands\n  - Link entries in xdg to debian to fix daily PPA\n  - Merge latest Debian rules from https://sources.debian.org/src/widelands/1:20-2/debian/rules/ to fix daily PPA\n  - Fix appdata/desktop filenames\n  - Fix Debian build errors about missing files\n  - Only list missing and delete symlinks for debian packaging.\n  - Fix CRLF/LF handling in LP commit messages\n  - Copy rather than move icons and appdata for debian packaging\n- Prettier stdout files when regression_test is run with python 3 (#3800): Print regression test suite output as raw byte strings\n- Fix stalling test suite scenarios (#3784)\n  - `stable_save` now uses last save time and average frame rate for waiting\n  - pass desired speed explicitly to `stable_save`\n- Update CMakeLists for Ubuntu Focal\n- Replace dependency python with python3\n- Fix packaging for Focal and #3783\n- Fix travis MacOS builds (#3848): On Travis MacOS, gettext needs to be added to the PATH and some CMake CXX and linker flags have to be set because brew force-linking is no longer allowed for whatever reason\n- Fix travis failure on gcc-9.1_debug (#3861)\n- Improve SDL2 detection on modern systems (#3872)\n- Add Git hash to AppVeyor and bzr version numbers (#3894)\n- updated innosetup file to reflect new Icu filenames (#3903)\n- gcc-10 compatibility (#3908)\n- Replaced all uses of boost::bind with lambda functions and added a codecheck rule to deprecate boost::bind() and boost::ref()\n- Several AppVeyor/MSYS2 build environment fixes (#3917, #3919)\n- Use `detect_revision.py` on AppVeyor\n\n\n### Other Issues\n\n- Broke down logic library to get rid of some circular dependencies\n- Fixed logging for homedir\n- We now wait longer in test_inputqueues.lua after stable_save\n- Implemented support for GCC 9\n- Got rid of duplicate listing of player commands\n- Fixed diverse compiler warnings\n- Added a README and a CONTRIBUTING file and issue templates for bugs and feature requests\n- use proper in-/decrement operators (#3487)\n- Declare a variable needed only for an assert in debug builds only (#3568)\n- Needed to adopt test suite due to increased conquer range of barbarian tower\n- Replace wl.widelands with www.widelands and add some https\n- Replace or remove references to Launchpad where possible. (#3628)\n- Cleanup includes and forward declarations (#3720)\n  - Add new script for detecting superfluous includes and forward declarations\n  - Run the new script on Travis\n  - Cleanup the codebase\n- Larger DescriptionIndex (#3715)\n  - Change DescriptionIndex data type to uint16_t, because we're running out of IDs for Building Descriptions\n  - Fix usages of DescriptionIndex\n  - Rename function `get_resource` to `resource_index` for consistency.\n- Delete unneeded boost headers and replace outdated usages (#3724)\n  - Replace `boost::function` with `std::function`\n  - Replace `boost::shared_ptr` with `std::shared_ptr`\n  - Replace `boost::unordered_map` with `std::unordered_map`\n  - Add codecheck rule so that these won't regress\n  - Require including `<memory>` for `shared_ptr` via codecheck\n  - Delete all boost headers that the compiler won't ask for\n- Cleanup system includes (#3731)\n  - Delete all system headers that the compiler won't ask for\n  - Deprecate `<ctype.h>`, `<io.h>` and `<stdint.h>` in favor of\n    `<cctype>`, `<cstdio>` and `<cstdint>`\n  - Fix `USES_BOOST_REGEX` in CMakeLists.txt\n- Fix memory leak in ConstructionSite::enhance (#3744)\n- Resolve some circular dependencies + shift random library (#3727)\n  - Split AI hints into separate CMake library\n  - Shift random library to base\n  - Delete superfluous scripting/logic.h includes\n  - Map objects no longer depend on `ui_basic`\n  - Clean up game_renderer a bit\n  - Resolve circular dependency between `wui_mapview_pixelfunctions` and `logic_map`\n  - `create_debug_panels` is a one-liner, no need for a function\n- Consistent farmers follow on fix (#3768): Deleted an unused variable\n- Fix compiler warnings in MapViewPacket (#3771)\n- Added missing `break` in window.cc\n- Add lots of optional braces (#3802)\n- Unify program parsers (#3805): Refactor program parsers.\n  - Pull out common code into new class MapObjectProgram\n  - Fix ware demand checks so that they only affect the correct tribes\n  - Get rid of extraneous calls to EditorGameBase::postload()\n  - Small performance tweak for trainingsite programs\n  - Get rid of now empty helper library\n- Fix off-by-one in `get_road()` (#3806): Use `WalkingDir::FIRST_DIRECTION` and `WalkingDir::LAST_DIRECTION` or ranged `for` loops for iterating the roads of a flag\n- Updated copyright end year to 2020\n- Add optional braces to ui_fsmenu (#3809)\n- Removing signal from warelist. (#3845): Removed some dead code, exit more cleanly in some cases, and be more verbose in regression tests. Fixes a GCC9-release regression test failure.\n- Cleanup SDL headers (#3743)\n- Fix table column index mismatch regression (#3915)\n\n\n## Build 20\n\n### Animations, Icons and Overlays\n\n  - New wheatfield graphics by fraang\n  - Shorten a soldier's last evade_failure animation if the soldier is about to\n    die to prevent overlooping.\n  - The health bar of a soldier now falls gradually during an attack instead of\n    one-shot.\n  - New graphics for field selectors and field action tabs\n  - Special field selector for road building mode\n  - Added missing call to get_rand_anim when a soldier is dying\n  - Added missing working animations for barbarians big inn and wood hardener\n  - Each tribe now has individual resource indicator graphics\n  - Added util to rename animation files in bulk.\n  - Fixed bug #1639253: Add missing walkload animation to Atlantean smoker\n\n\n### Sounds and Music\n\n  - New music tracks \"Scotty the Scout\", \"Hypathia's Theme\", \"We Work in the\n    Vineyards\" and \"Running out of Coal\" by Stuart Marshall\n  - New music tracks \"Silkweaver's Song\" and \"The beauty of the flatlands\" by\n    Klaus Halfmann\n  - Added new sound files for Barbarians Inn + Big-Inn, Empire Inn,\n    Atlantean Mill, Toolsmith, Smelting-Works, all Weaving Mills, Atlantean\n    Woodcutter, Sawmill, Stonecutter, Goldspinner.\n  - Modified smithies sounds to dimmer versions; added tree-falling sounds,\n    substituted Timber shouting with tree-falling.\n  - Allocate 32 mixing channels instead of the default 8.\n  - Never play the same song twice in a row\n  - Improvements to sounds and the sound mix\n\n\n### Tutorials and Campaigns\n\n  - 2 new missions for the Empire campaign\n  - 2 new missions for the new Frisians tribe\n  - Tweaked timings in tutorials and scenarios\n  - Updated the Economy tutorial to match the new, enhanced encyclopedia\n  - Add roads to p2 in warfare tutorial because the AI is empty\n  - Fixed reveal_campaign in bar_01\n  - Fixed bug #1639514: Barbarian campaign, scenario 2: yellow brother bails out\n  - Fixed bug #1656192: Economy tutorial assumes window is open\n\n\n### Scripting\n\n  - Updated Eris to version 1.1.2 (Lua 5.3.4)\n  - Changes and additions to Lua methods and objects:\n    - New method player:get_produced_wares_count()\n    - New object LuaMap  -> LuaEconomy.\n    - Added option to Lua function player:hide_fields to mark them as unexplored\n    - New scripting functions for random and concentric revealing/hiding of\n      fields\n    - New attribute 'is_stopped' in LuaProductionSite\n    - New method 'toggle_start_stop()' in LuaProductionSite\n    - Added Lua method to get the type of the current game, i.e., single or\n      multiplayer.\n  - Changes to territorial win conditions:\n    - Pulled out common code for Territorial Lord and Territorial Time.\n    - Ensure that check_player_defeated is called before points are calculated.\n    - New function to check whether a field is buildable.\n    - Check if a player still exists before making it the winning player.\n      Player will also win if there are no other players left.\n    - Fixed desyncs\n    - Updated documentation not to use some functions for multiplayer games\n    - More precise calculation of conquerable fields to make territorial win\n      conditions playable on all maps\n  - Various fixes for win conditions:\n    - Unified some functions for wood_gnome and collectors\n    - Removed duplicated code and moved it to win_condition_functions\n    - Notify only every hour, 10 minutes in the last 30 minutes\n    - Move _game_over function out of the main loop.\n    - Don't show points when game ended by military defeat\n    - Main loop ends when time is over or only one faction is left\n    - Check every second for defeated players\n    - Refactor initialization of win conditions:\n    - Shift calculations for territorial functions and Wood Gnome to C++\n      to improve performance\n    - Add immovables to the table for territory calculation\n    - Expose port spaces and max caps to Lua interface\n    - Fixed bug for Wood Gnome in which a destroyed player would gain infinite\n      points. Also, no longer calculate score for a defeated player.\n  - Remove unused parameters of message_box_objective.\n  - Removed unused parameter 'req_suitability' from function\n    place_building_in_region in infrastructure.lua\n  - Added capability to add custom scenario buildings\n  - Allow writing and loading of campaign data, so that some scenario state can\n    be transferred from one scenario to the next in campaigns.\n  - Do not broadcast Lua coroutine error messages to empty player slots.\n    Also, use richtext_escape on them.\n  - Orthogonal design for mapobject program names\n  - Fix unpersisting of LuaImmovableDescription for tribe immovables.\n  - Safeguard to avoid desyncs when using send_message() from ui.lua\n  - Add parameter to send_message() to avoid an error\n  - Fixed a memory leak in persistence.cc\n  - Fixed bug #1670065: Random tree growth can block building sites needed to\n                        progress in scenario\n  - Fixed bug #1688655: lua func \"place_building_in_region\" not work for mines\n  - Fixed bug #1815283: Nil value in Territorial Lord\n  - Fixed bug #1790456: The final message in collectors doesn't show the points\n                        of all players anymore\n\n\n### Maps\n\n  - Map tags: Added \"1v1\" to Firegames, Islands at war and The Pass through\n    the Mountains. Removed \"unbalanced\" from The Pass through the Mountains.\n  - Moved hint texts from map descriptions to hints for the Last Bastion and\n    Rendez-vous maps.\n  - Increased maximum number of players from 8 to 16, to be used for testing\n    purposes.\n  - Minor fixes to Last Bastion map where a player's expansion could become\n    completely blocked across the sea\n  - Fixed bug in Crossing the Horizon map where an artifact couldn't be\n    conquered by a player\n  - Fixed desyncs in Smugglers scenario\n  - Allow random player tribes in scenarios\n\n\n### Saveloading\n\n  - Old scenario save games will no longer work due to changes to the map\n    scrolling functions.\n  - Broke savegame compatibility in version bzr8747\n  - Savehandler: Avoid reading config more than once per game\n  - Corrupt zip files now appear as \"incompatible\" on game loading/saving\n    screens. This fixes stack-buffer-overflows.\n  - Fixed bugs with missing files/folders in savegames by creating a temporary\n    map save on game start\n  - Improved error checking in filesystem functions\n  - In Load/Save menu for games/replays:\n    - All deletion errors are caught, player gets a message.\n    - When deleting multiplayer replays, also the corresponding syncstream file\n      is deleted.\n    - After deleting replays, the table now respects the Show Filenames setting.\n  - In Save menu for maps:\n    - Errors when trying to create a directory are now caught, player gets a\n      message.\n    - Directory creation now doesn't allow names with map extensions, because\n      the game would just try to interpret them as maps and not show as\n      directories. A tooltip is shown.\n    - Directory creation can now also be triggered by pressing Enter in the name\n      edit box.\n  - Other file errors are caught and logged:\n    - Syncstream deletion in SyncWrapper destructor\n    - In Map::get_correct_loader\n    - File deletion/renaming in GameClient::handle_packet\n  - Introduced a new class to robustly handle saving of files (incl. dealing\n    with backups, handling errors, etc.) and using it whenever maps/games are\n    being saved.\n  - Remove superfluous \"postload\" call from replay\n  - Added validity checks for S2 map headers to avoid crashes when preloading\n    invalid S2 map files\n  - Shift calculation of map fields relevant to win conditions from Lua to C++.\n    This gives us a huge performance boost during saveloading those win\n    conditions.\n  - Fixed bug #1678987: Endless autosave cycles when a save takes longer than\n                        the autosave interval, and inefficient statistics saving\n  - Fixed bug #1746270: Unable to rename rolling autosave\n  - Fixed bug #1798812: Saving a game from replay does not show up in load game\n                        menu\n\n\n### AI\n\n  - The AI now uses a genetic algorithm. The genetic parameters are trained and\n    then kept in .wai files.\n  - New command line switch --ai_training: Dumps new AI files in home folder and\n    uses higher mutation ratios\n  - New command line switch --auto_speed: Activates auto-speed in multiplayer\n    games\n  - Various refactorings of AI hints\n  - Multiple changes to the logic\n  - Improvements to training sites\n  - Add support for productionsites that are also supporting site to the AI.\n    One productionsite can now support multiple wares/productionsites.\n  - Allow resetting of teams via LUA during game\n  - Improved selection of which fields to build something on\n  - Improved identification of unconnectable regions based on walking algorithm.\n    Used to keep AI from wasting attempts to build something there.\n  - AI now splits and counts mineable fileds per resource/mine type and uses it\n    for decision making, ignoring inaccessible fields in the process\n  - When looking for the nearest buildable spot, the AI will accept mineable\n    fields also. This affects willingness to expand when there are no buildable\n    spots nearby, but some mines can be conquered by a new militarysite.\n  - AI now calculates military strength based on the actual init.lua files\n    rather than hard-coding the values. This also removes the tribe name\n    restriction for modders.\n  - When considering a quarry, the AI makes sure there is at least one rock in\n    the vicinity. Same for fishers and fish.\n  - Improved ship exploration decisions for AI.\n  - AI now considers whether possible sea direction leads to unknown territories\n  - AI also continues exploring when the last port is lost to prevent crashes.\n  - Since the AI can handle only 1 expedition at a time, any extra expeditions\n    are canceled\n  - Prohibit seafaring buildings for AI on non-seafaring maps. AI can still\n    handle ships and shipyards that already exist when a map does not allow\n    seafaring at the moment.\n  - AI now scans entire map for portspaces\n  - Fixed endless loop in DefaultAI::dispensable_road_test\n  - Added one well to the atlantean basic economy, as water is needed\n    for crucial spidercloth production\n  - Replaced logic_rand() with std::rand() in seafaring code of AI to fix\n    desyncs in network gaming\n  - Fixed bug #1724073: AI crashes when some AI slots are empty\n\n\n### Gameplay\n\n  - New Frisian tribe\n  - New \"Village\" starting condition\n  - New \"Barracks\" (casern) building for recruiting soldiers. Soldiers are no\n    longer created by warehouses. Production sites can now have workers as input\n    to consume.\n  - Started implementing new \"Market\" building with a Barbarian prototype.\n    Not functional yet.\n  - Balancing: Halved needed experience for Barbarian brewer and blacksmith\n  - Balancing: Buffed Barbarian and Empire soldiers\n  - Balancing: Added more trainers to headquarters at game start\n  - Balancing: Removed meat default target quantity for Barbarians and\n               Atlanteans\n  - Balancing: Lowered productivity threshold for lumberjacks to 60%.\n  - Balancing: Depleted Atlantean crystal (and iron) mines work slightly better\n               when depleted\n  - Balancing: Improvements to various production sites' logic\n  - The worker program \"plant\" no longer takes \"tribe:\" as a parameter;\n    immovables are now identified via their attributes only, and both world and\n    tribe immovables are searched. As a side effect, tribe immovables can now\n    have terrain affinity.\n  - Forester/Ranger now prefers good soil, and is thus more efficient\n  - Make the scout aware of nearby military sites. The scout now switches\n    between random walking and doing an excursion to enemy military sites\n  - When a Fish Breeder's fishing grounds are full, display a special tooltip\n    instead of sending an \"Out of Resources\" message\n  - When a warehouse is destroyed, the maximum number of fleeing units is now\n    limited to 500 per unit type\n  - Only cancel expedition if there is a reachable portdock. Show a warning\n    message to owner.\n  - Shifted ware hotspot definition from WorkerDescr to CarrierDescr\n  - Fixed a bug where higher-level workers wouldn't occupy lower-level workers'\n    working position slots in productionsites\n  - The port now conquers every location where its military influence is higher\n    than the influence of other players. This fixes a segfault when all\n    potential portdock fields are owned by another player, but there is a\n    portdock location available where the player owning the port has highest\n    influence.\n  - Fixed bug in collectors script where a broken message was sent after the\n    game ended\n  - Check for visibility of military buildings before permitting attack. This\n    solves a problem with impregnable castles.\n  - Improved algorithm for promotion and demotion of roads\n  - Removed hardcoding for resources\n  - New return value no_stats for work programs\n  - Tweaked production programs for shipyards\n  - Balancing: All Smelting Works, Furnaces, Smokeries, Recycling Center,\n    Atlantean and Frisian Toolsmithies, Taverns, Inns and Drinking Halls no\n    longer waste time if a ware is missing and they have to skip a program\n  - Balancing: Tweaked programs for Weapon/Armor producing buildings\n  - Balancing: Imperial Armor Smithy produces 1 more Helm per run to balance the\n    amount of armor types for training\n  - Balancing: Changed the order of programs in the Atlantean Toolsmithy\n  - Balancing: Gave the Barbarian Deep Gold Mine the same stats as the Deep Iron\n    Mine\n  - Increased the area where the map is recalculated after conquering by 1.\n    This prevents buildings from sitting between borders.\n  - Fixed heap-use-after-free in fleet while processing\n    EditorGameBase::cleanup_objects() when ship has already been deleted\n  - Allow return on dismantle values without buildcost\n  - Fix desyncs caused by floating point arithmetic in terrain affinity\n  - Reset economy serial in Game constructor. This fixes desyncs in replays.\n  - Stop ware dropoff when the target building has been destroyed. This fixes a\n    crash when the enemy conquers a militarysite near a warehouse.\n  - Cancel Worker::fetchfromflag when the building is destroyed/dismantled/\n    enhanced to prevent crashes\n  - Fixed bug  #963799: shortsighted shipwright (ship in pond)\n  - Fixed bug #1611323: ships can be built in non-floating spaces (shipyard)\n  - Fixed bug #1636966: Segfault in battle\n  - Fixed bug #1637386: Militarysites warn about allies\n  - Fixed bug #1639444: Workers with wares inside ships can crash the game\n  - Fixed bug #1643209: No-cost workers are not removed correctly\n  - Fixed bug #1643284: Ships of a fleet can have the same name\n  - Fixed bug #1656671: Wares are not always transported to construction site\n  - Fixed bug #1658456: Imperials: Soldier target quantity not changeable\n  - Fixed bug #1749586: Fish breeder can't breed fish if the game is loaded\n                        after all fish is caught\n\n\n### User Interface\n\n  - Maps can now be zoomed using the mouse wheel or keyboard keys: CTRL+, CTRL-\n    to in-/decrease, and CTRL+0 to reset. This also removes 0 as a possible\n    landmark number.\n  - All map transitions like jumping in messages and in the buildings menu are\n    now animated. New command line option \"animate_map_panning\".\n  - Moved smooth animation of cursor and MapView from Lua into C++. This fixes\n    the transitions in tutorials, which were broken when zoomed.\n  - Show census information on destroyed building with the former building's\n    name.\n  - Added supplementary warning to enhancement message for military sites.\n  - Fixed statistics label overlap. Ware statistics now update their plot range\n    correctly.\n  - Removed quick navigation with '.' and ','.\n  - The game summary window now restores the original desired speed when it's\n    closed.\n  - Productionsites no longer close their window when the stop/start button is\n    pressed.\n  - Minimized construction windows no longer get maximized when the construction\n    is finished.\n  - Window is no longer closed on enhance or dismantle.\n  - Let the user select multiple entries in a table using Ctrl/Shift + Click\n    (multiple/range selection) and Ctrl+A (select all) where appropriate.\n  - Implemented textual and pictorial dropdown menus. Dropdowns are used for win\n    condition and multiplayer tribe selection in the launch game screens.\n  - Fullscreen background images are now tiled rather than stretched.\n  - Stopped fullscreen toggle from flickering.\n  - The following menus now relayout themselves when fullscreen mode is toggled:\n    main, multiplayer, single player, about, map selection, options, load game,\n    save game.\n  - For multiplayer game setup, use dropdowns instead of buttons to select\n    player options\n  - Improved scrollbar and table header layout.\n  - Remove buttons from economy options window for spectators\n  - Improvements to StoryMessageBox, keyboard navigation and UI focusing\n  - Updating all ware priorities of a building when CTRL is pressed while\n    clicking\n  - Sorting IRC users behind the players in the lobby\n  - Replaced get_key_state with SDL_GetModState() to fix keyboard mappings.\n  - Actionconfirm now uses Box layout and resizes according to text size.\n  - Display loading times on the console while loading the tribes.\n  - Simplified the UI::Align enum and various alignment-related cleanup and\n    fixes.\n  - Replaced booleans in UI::Box::add() with enum classes for better readability\n  - Converted all text to new font renderer. Formatting functions for the new\n    renderer live in data/scripting/richtext.lua\n  - A more principled fix to dangling object pointers in the UI using Optr<>\n  - Building Statistics now only show relevant buildings\n  - Building Statistics now show \"under construction\" navigation for buildings\n    being enhanced\n  - Show in-game clock in release builds too\n  - In multiplayer games, scroll to starting position when a game is loaded\n  - New Ship Statistics window\n  - Bugfixes to multiplayer dropdowns\n  - Use Lua to define background and button styles\n    - Background images and colors are now defined in data/templates/default\n    - Combine common background graphics with color overlays\n    - Added StyleManager class to load and access backgrounds\n    - Downscale background images (e.g. campaign maps) on small screens\n    - New graphics for ui_fsmenu\n    - Darker background for wui elements\n  - Fixed keyboard navigation after \"remove game\" dialog has been displayed\n  - Modified row selection/display in tables and message list\n  - Remove focus from editbox in gamechatpanel when it minimizes\n  - Added tooltip to file save and make directory edit boxes if illegal filename\n    is being entered\n  - Added a checkbox to toggle filenames when loading a replay\n  - Fixed scenario title and tooltip during game setup\n  - Preselect player names and tribes for non-scenario maps in single player\n    mode\n  - Set AI from selection in UI when saveloading\n  - Missing wares (and workers) are indicated differently in InputQueueDisplays\n    if the ware is on the way to the building than if it's really missing\n  - Redesigned and fixed the showing of workarea overlays\n  - Tweaks for the multiplayer game setup screen: less empty spaces and more\n    space for important content\n  - Very large amounts in WaresDisplays are shortened as \"10k\", \"10M\", \"10G\" to\n    prevent text from flowing over on the left\n  - When dismantling a building, the building window closes automatically\n  - Added a dialog for the host when the connection to a client is lost. Allows\n    the host to select whether to replace the client with an AI or to exit.\n  - Setting focus to edit box when opening the game save menu\n  - Don't provide the filename for the standard background image in the progress\n    window. This fixes image positioning when starting multiplayer games.\n  - Make dismantle button independent of buildable/enhanced. This fixes missing\n    Dismantle buttons in Empire scenario 4.\n  - Improve formatting for user status in the lobby\n  - Allow hotkey usage while windows are open\n  - Fixed memory leak in network UI\n  - Fixed bug #1191295: Seafaring: builder not listed in expedition list in port\n  - Fixed bug #1635808: Display of worker in training sites is not updated.\n  - Fixed bug #1653254: Action window of Road stays open under some\n                        circumstances\n  - Fixed bug #1653460: UI::Panel::get_inner_h() const: Assertion `tborder_ +\n                        bborder_ <= h_' failed\n  - Fixed bug #1658489: Expedition tab in Port window messed up some times\n  - Fixed bug #1644553: Crash when buildhelp icon is clicked twice\n  - Fixed bug #1687043: Memory leak in Multilineeditbox\n  - Fixed bug #1695701: Crash when a militarysite window is open while the\n                        enemy conquers it by sending a notification.\n  - Fixed bug #1672059: Selection is not cleared when new message arrives\n  - Fixed bug #1691336: Building window suddenly appears after construction has\n                        finished\n  - Fixed bug #1658668: Menu Launch Game: Switching AI player on/off changes AI\n                        setting\n  - Fixed bug #1656245: Scrolling with mousewheel is slow in some places\n  - Fixed bug #1769344: High processor load single player launch game screen\n  - Fixed bug #1785404: Chat does not autoscroll\n  - Fixed bug #1794063: Extra message arrival sound\n  - Fixed bug #1801208: Message boxes with long unbreakable strings show empty\n\n\n### Internationalization\n\n  - Removed building names from confirmation messages, as they cause grammar\n    problems in some languages.\n  - Production program descnames can now be fetched by pgettext as well as plain\n    gettext.\n  - Deleted unused networking messages and unified the \"Something went wrong\"\n    message.\n  - Added a Python script to do automated glossary checks for translations. It\n    enlists the help of Hunspell and 'misuses' the Transifex note field in order\n    to reduce noise.\n  - Implemented glossary generation for the Transifex glossary with help from\n    the Translate Toolkit (http://toolkit.translatehouse.org/).\n  - Show translation stats next to the language selection menu and invite\n    translators if a translation is incomplete, with the help of the Translate\n    Toolkit. New utils script \"update_translation_stats.py\" that will write\n    translation statistics to data/i18n/translation_stats.conf and is called\n    on every translation pull.\n  - Fixed various string issues and added some translators' comments\n  - Completed the switchover to the new font renderer\n  - Fixed translation of trainingsite program names\n  - Fix undefined / unexpected behavior in case LANG environment is empty\n  - Fix fetching of translations when user locale is set to C. If the desired\n    Widelands locale does not exist, try to fall back to en_US.utf8 to make\n    libintl happy.\n  - Adapted buildcat.py to get translations for resources\n  - Add an extra key to get a translatable author-value in the developers list\n  - Fixed bug #1636586: Inconsistent localization of player names in Editor\n                        player menu\n\n\n### Help and Documentation\n\n  - Convert editor/game tips to Lua and display them in the in-editor/in-game\n    help. Added new tips.\n  - Restructured, enhanced and added to the Lua scripting reference for Tribes.\n  - Added/Improved documentation for animations, worker programs, worker\n    helptexts, AI hints, World units and the Richtext system\n  - Added immovables to in-game help\n  - Fixed some wrong indentation for the documentation in the website.\n  - Added toptopple sound documentation in .ods spreadsheet format (LibreCalc)\n    into 'doc' folder\n  - Fixed and improved documentation for LuaMapObjectDescription::get_type_name.\n  - More cross-linking between map object classes and their description objects.\n  - Fixed some miscellaneous bugs in the LuaMap documentation.\n  - Use mathjax for latex in docs instead of imgmath\n  - Enable building documentation with warnings as errors on Travis\n  - Constructionsites' help button now points to the help for the building being\n    built\n  - Documented metaserver command line options\n  - Added lua_path.cc to the documentation\n  - Add tribe-specific ware purpose texts to web encyclopedia\n  - Fixed bug #1792297: Advanced buildings report wrong worker experience in the\n    encyclopedia\n\n\n### Editor\n\n  - Overhauled the selection menu for critters to give them categories\n  - Added an option \"items per row\" and rearranged the terrains and immovables\n  - Display of bobs, immovables and resources can now be toggled individually\n  - Fixed drag and drop\n  - Removed dead code for make infrastructure tool that was never finished\n  - Fixed keyboard navigation with escape and enter for save map and save game\n    screens. If the editbox is focused, escape will reset the text if changed,\n    and close the window if unchanged.\n  - Refactored Editor Player Menu to use Box layout. Show dismissable warning if\n    more than 8 players are selected.\n  - Map Editors now can choose \"Random\" tribe in the player menu\n  - Converted editor infotool to new font renderer and added some layout tweaks\n  - Enable OK button in map options when tags have changed.\n  - Use temporary container in cleanup_port_spaces to prevent invalid iterators\n  - Limited the editor undo stack to 500 items to prevent boundless growth of\n    memory use\n  - Fixed bug #1627537: Release mouse button does not work when placing things\n                        and mouse gets under a window\n  - Fixed bug #1738641: Resources can be replaced only once in editor\n  - Fixed bug #1749146: MultilineEditboxes: Entering text not possible\n  - Fixed bug #1736086: Saving a map with no player set shows up as having one\n                        player:\n                        - Initialize new maps with 0 players\n                        - Disable selection of maps with 0 players\n                        - Automatically add first player to editor player menu\n  - Fixed bug #1741779: Description is cut in map options multilineeditbox\n  - Fixed bug #1782593: Segfault in random map generator\n  - Fixed bug #1783878: Saved random map does segfault on load if no tribe is\n                        explicitly set\n  - Fixed bug #1815613: Editor crash when setting new 0,0 coordinates\n\n\n### Graphics Engine\n\n  - Renamed \"sub\" tag to \"div\" in new font renderer.\n  - The new font renderer now sets the width properly and supports player color\n    for images. Added width property to img tag\n  - The new font renderer now creates a set of textures that will be blitted\n    separately by the new class RenderedText. This avoids issues with texture\n    sizes exceeding the maximum size supported by graphics drivers when\n    MultilineTextareas get arbitrarily long.\n  - Fixed incorrect layout of divs with width=fill when the previous div is\n    wider than 50%\n  - Fixed superfluous space characters at beginning and end of lines\n  - Implemented text floating around images\n  - Messages try to render with the new font renderer first, then fall back to\n    the old font renderer for layouting messages that haven't been converted yet\n    (and from savegames).\n  - All images with player color now receive their color by a common\n    playercolor_image function. Available player colors are kept in an array.\n  - Replaced raw pointers in the font renderer with shared_ptr\n  - Split graphics into multiple Cmake libraries.\n  - Got rid of EdgeOverlayManager and FieldOverlayManager and shifted their\n    functionality to local draw() functions in individual classes. Gave the\n    Interactive* classes their own draw() functions.\n  - Refactored Tcoords, Fcoords and TriangleIndex\n  - Force integer precision for overlays. This fixes fuzzy overlay images when\n    the player hits Ctrl+0 to reset the zoom.\n  - Show a basic SDL error message box to the user if the shading language\n    can't be detected or is too old.\n  - Print the shading language as double to console\n  - Fix shading language version detection for system locales that don't\n    use . as a decimal separator\n  - Fail with SDL messagebox if SDL_BYTESPERPIXEL != 4\n  - Fixed bug #1674243: Assign owners to neighbors in Player::rediscover_node.\n                        The lack of owners was causing crashes with the road\n                        program, which no longer knew which texture to pick.\n  - Fixed bug #1711816: Black terrains on fullscreen switch.\n\n\n### Networking\n\n  - Replaced SDL-Net with Boost.Asio\n  - Added IPv6 support\n  - Implemented a relay server. Opening a router port is no longer necessary\n    for the host of internet games\n  - Improved the online login code by adding semi-constant user ids that are\n    valid for 12 hours, allowing to reclaim a username after a disconnect\n  - Increasing password security by no longer storing and transmitting it in\n    plaintext\n  - Improvements to Metaserver protocol\n  - Fixed memory leak in LanGameFinder\n  - Fixes on the communication between widelands and the metaserver:\n    - Permit answering PING requests even while logging in\n    - Print current time to console when logging in\n    - Ease finding the corresponding log entry on the metaserver when debugging\n    - Re-enabled and fixed unused code for whisper message to nonexisting player\n    - Handle error message when trying to join a non-existing game\n    - Avoid hanging client even after being notified about the non-existing game\n    - Removed no longer needed error messages\n  - Fixed bug #1691335: Multiplayer client crashes when the host hasn't selected\n                        a map yet\n  - Fixed bug #1794339: Segfault joining game\n  - Fixed bug #1805325: Crash on late joins of LAN games, and display of map\n                        name in LAN lobby.\n\n\n### Build System\n\n  - Windows builds now have a unique app id for every build. This allows\n    parallel installation of several versions.\n  - Added support for gcc7 and llvm8.\n  - Removed \"redundant-decls\" flag for Windows builds due to conflict between\n    SDL and MinGW.\n  - New Macro FALLS_THROUGH; for use in switch statements.\n  - Let Travis build each commit on MacOS in addition to our Linux builds. Note\n    that the regression test suite is only run for Linux.\n  - Allow compiling with AddressSanitizer, and choosing between gcc and clang on\n    the first compile.\n  - Deactivated the rich text testing project, as it's currently unmaintained.\n  - Move website related binaries to base dir in compile.sh\n  - Do not build website tools on appveyor, this saves 20 minutes on x64 debug\n    builds\n  - Check for minor version of CMake\n  - Only export ICU_ROOT if CMake version is lower than 3.12\n  - Support for glbinding 3 and new Boost version\n  - Fix revision detection\n  - Fixes for handling different Cmake policies\n  - Use MacOSX.sdk if an appropriate versioned SDK can't be found.\n  - Add linker flags to please Ubuntu 18.10\n  - Use more processing units when using the compile script. Defaults to: max.\n    Processors -1. Can be set with the -j switch.\n  - Copy the version file instead of moving it, so that the update script can be\n    run twice in a row.\n  - Use compile.sh when running update.sh\n  - Added tags for Flatpak to appdata.xml\n  - Modernized how Mac OS X releases are done:\n    - Add CFBundleShortVersionString to Mac builds\n    - The script for building on macOS uses gcc-7 now. Also it checks whether\n      the SDK10.7 is installed or not and uses the latest installed version if\n      it cannot find the old one.\n    - Choose between compiler clang or gcc, specify build type: debug or release\n    - Set build target to 10.9 if macOS 10.9 or newer is found\n    - Append macOS target version to dmg filename\n  - Fixes for Debian-based software centers:\n    - Add stock icon to appdata.xml\n      (c.f. https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=857644)\n    - Change icon definition in .desktop to be a generic one\n    - Content ratings are now accepted by the validator, so we've activated them\n    - Validate .desktop file on translation updates. Removed deprecated category\n      from .desktop file.\n\n\n### Other Issues\n\n  - Moved utils/fix_lua_tabs.py to utils/fix_formatting.py and added calls to\n    clang-format and pyformat.\n  - Cleaned up Windows utils\n  - Removed unused images\n  - Fixed a series of compiler warnings for clang, gcc and Windows.\n  - The ProductionSiteDescr constructor still contained some checks from the\n    time when they used to inherit from MilitarysiteDescr. Removed this obsolete\n    code and made working_positions and programs mandatory.\n  - Used the Notification system to reduce some code interdependency.\n  - Various code cleanups to make the code more readable.\n  - Fixed diverse crashes and memory leaks with the help of AddressSanitizer\n  - Diverse refactorings to use composition over inheritance and to get rid of\n    multiple inheritance\n  - Replaced SyncCallback through a std::function<void()>.\n  - More widespread use of smart pointers\n  - Untangled MapView and InteractiveBase.\n  - Cleaned up map handling in EditorGameBase\n  - Removed some dead code and reduced dependency cycles\n  - Options screen now saves immediately so that the changes are persistent even\n    if Widelands crashes afterwards.\n  - Added 2 new functions to Lua interface: list_directory and is_directory\n  - Split new function cleanup_portspaces() from allows_seafaring(), and\n    refactored port spaces checks.\n  - Only recalculate whether a map allows seafaring when something has changed\n  - Economies are now mapped to global serials and kept as unique_ptr in the\n    Player objects\n  - Exit gracefully if user specifies a datadir that doesn't exist\n  - More strict sanitizing of chat messages\n  - Print a welcome message on joining the metaserver\n  - Write Windows log output to homedir instead of the program dir\n  - Widelands is now installed into local appdata on Windows\n  - Copy translation validation results into maintainers' and translators' views\n    to make them easier for translators to navigate\n  - Use std::cout for logging when calling terminate on shutdown, because the\n    logger might not exist any more\n  - Remove test logging output from production_program.cc\n  - Use internal names rather than descnames for log messages and workarea IDs\n  - Refactor website binaries to use a real tree data structure for writing JSON\n  - Print more information in syncstreams. Create additional smaller syncstream\n    files containing the last few seconds leading to a desync.\n  - Added a suppressions file for Valgrind to mask memory errors caused by\n    backend libraries\n  - Fixed bug #1648178: Fatal Exception: Bad Cast\n  - Fixed bug #1743086: ASAN memcopy overlap on Ubuntu Budgie from libSDL\n                        2.0.6+dfsg1 by disabling sound as a workaround to a bug\n                        in the backend\n  - Fixed bug #1724145: Crashes in master-2511_release_x64 on save, caused by\n                        economy merges making Lua variables go nil\n  - Fixed bug #1776603: ASAN: wl_map_object_info leaks memory\n\n\n## Build 19\n\n### Animations, Icons and Overlays\n\n  - New animations for Barbarians buildings: Wood Hardener, Farm, Fisher's Hut,\n    Gamekeeper's Hut, Lumberjack's Hut, Quarry, Ranger's Hut, Taver, Inn,\n    Big Inn, Warehouse, Scout.\n  - New animations: Imperial Vintner, Blackroot Field.\n  - New menu icons: All workers, Blackroot, Pitta Bread, Snack, Ration, Meal,\n    Spidercloth, Options Menu, Warehouse stock policy, Messages window\n  - New road textures to improve visibility on all terrains\n  - Better coloring for workarea pics.\n  - Fixed hotspot for Babarian Brewer walk animation.\n  - Fixed bug #1453528: Buildings missing menu icons\n  - Fixed bug #1408712: Waves are rolling in different speed /rolling angle is\n                        different\n  - Fixed bug #1407799: Fatal exception:  Image not found:\n                        tribes/empire/soldier/untrained.png\n  - Fixed bug #1324642: Playercolor mask has wrong size\n  - Fixed bug #829984:  Tweak the duck animation\n  - Fixed bug #672248:  Duplicated animations\n\n\n### Sounds\n\n  - Added sounds for Fox, Elk, Wolf, Stag, Boar, Smelting Works, Weapon\n    Smithies, Ax workshop, Lime Kilns, Taverns, Breweries, Winery,\n    Wood Hardener.\n  - Replaced sound for Sheep and Mills.\n  - Fixed bug #1592692: No production sounds on some maps\n  - Fixed bug #1536053: Widelands without sound on win\n  - Fixed bug #1500531: Random corrupted audio (loud garbled noise) when\n                        ox breeder is working for Barbarian tribe.\n  - Fixed bug #1304638: Wrong sound played\n\n\n### Tutorials and Campaigns\n\n  - Split tutorial into \"Basic Control\" and \"Warefare\" and added encancements.\n  - New \"Seafaring\" and \"Economy\" tutorials\"\n  - Redesigned Barbarian campaign to remove topcs that are covered by the\n    tutorials.\n  - Fixed bug #1424950: Strange character relationships in the empire campaigns\n  - Fixed bug #1349378: Get_soldiers doesn't return a table in Island Hopping\n  - Fixed bug #1311244: Atlantean Mission Trigger fail\n  - Fixed bug #1298411: No necessity to conquer all military buildings in the\n                        third Barbarian Campaign\n  - Fixed bug #1286576: Tutorial fails if player is in road building mode when\n                        military building finishes\n  - Fixed bug #1088222: Barbarians Campaign: small suggestions for improvement\n  - Fixed bug #674839:  Some issues of barbarian tutorial 3\n\n\n### Maps\n\n  - New maps: Archipelago Sea, Dolomites, Wide World\n  - Removed maps: Dry Riverbed, Long long way, War of the Valleys\n  - Overhauled maps: Comet Islands, Full Moon, Glacier Lake, Kings and Queens,\n    Last Bastion, River Explorers, The Nile, Twin Lagoons, Volcanic Winter\n  - Added \"hint\" to the json file created by wl_map_info for use on the website.\n\n\n### Saveloading\n\n  - Older savegames can no longer be loaded.\n  - Older maps can be loaded, but new maps can't be loaded with previous\n    versions of Widelands.\n  - User maps are now saved in a 'My Maps' subdirectory to prevent overwriting\n    of official maps\n  - No longer write replay files for scenarios\n  - Implemented rolling autosave\n  - Disallow changing player slots in single player scenarios.\n  - Added checks for illegal file names during map saving.\n  - Fixed a crash where a leaked remnant of the game session would still be\n    subscribed to the 'changed resolution' event if a savegame failed to load.\n  - Fixed crash with identical autosave filenames when LAN game is run with\n    multiple instances of Widelands on a single computer. Also, more informative\n    error messages in disk_filesystem.cc.\n  - Fixed bug #1548932: Editor fails on save with zip filesystem\n  - Fixed bug #1526514: player 2 in \"\" section [player_2] not found\n  - Fixed bug #1509172: Editor gives error on saving maps in Windows.\n  - Fixed bug #1428396: Savefile broken when enemy deafed\n  - Fixed bug #1413734: Savegame does not load\n  - Fixed bug #1388028: Unable to load saved game\n  - Fixed bug #1375915: Scripting files get deleted when a map is resaved\n  - Fixed bug #1332832: Warning when starting a new game Unused key \"name\" in\n                        LuaTable.\n  - Fixed bug #1311716: Segfault when loading a game with nightly build\n  - Fixed bug #1303669: Reduce size of campaign savegames\n  - Fixed bug #1302577: Wrong minimap in load dialog when the save game has been\n                        overwritten\n  - Fixed bug #1254116: Crash on saving game: unprotected error in call to Lua\n                        API (table index is NaN)\n  - Fixed bug #1228811: Observers savegame contains no minimap.\n  - Fixed bug #1227984: Autosave should not trigger while game is paused\n  - Fixed bug #992829:  Console output: WARNING: There are 73 unloaded objects.\n  - Fixed bug #979995:  Game crashes with large map when saving\n\n\n### AI\n\n  - AI can now build and use ships\n  - Improved placing, upgrading and dismantling buildings\n  - Improved placing and destroying roads.\n  - AI no longer runs out of wood\n  - Enhanced military and soldier training strategy\n  - Reworked the way how AI stores some data in Player object\n    (GamePlayerAiPersistentPacket)\n  - Fixed bug #1388255: Widelands crashes when loading a multiplayer game\n  - Fixed bug #1344288: Segmentation fault - AI building enhancement\n  - Fixed bug #1342554: [defaultai.cc:2406] Help: I do not know what to do with\n                        a outpost\n  - Fixed bug #1330070: AI crashes\n  - Fixed bug #1311790: Assertion error Widelands::StreamWrite::Coords32 shortly\n                        after starting a new game\n\n\n### Gameplay\n\n  - Collectors win condition now reports team scores as well as player scores.\n  - New win condition: Artifacts\n  - Added New starting condition \"Trading Outpost\" that will periodically give\n    the player some wares if needed (cheat mode)\n  - Other tribes' buildings that have been conquered can now be dismantled\n  - Balancing: Added gold to building cost for Atlantean training sites.\n    Made Barbarian attack stronger.\n  - When an expedition ship places a port, a bit of land is cleared of trees to\n    make room for a few buildings.\n  - Ports can be affected by terrain changes up to 3 tiles away from their original\n    position, so we recalculate as much when changing a terrain tile.\n  - New tree/terrain affinity values.\n  - Forcing a constructionsite properly conquers the area that the finished\n    building will occupy.\n  - Reworked find_portdock.\n  - \"Out of resources\" messages are now be triggered by productivity\n  - Engine change: all tribes can now use any building/ware/worker etc.\n    Use Lua instead of finf file for initialization.\n  - Ontology cleanup: Internal unit names now match their display names.\n    Renamed worker program \"geologist-find\" to \"geologist_find\" and \"playFX\" to\n    \"play_sound\" and removed unused option \"setdescription\".\n  - Added Description objects for all tribe and world entities to Lua interface.\n  - Removed LuaBaseImmovable::get_size. The corresponding functions now return\n    strings instead of ints.\n  - Added LUA interface to ship - RO property shipname\n  - Updated Eris to version 683ac97476a8634d9e5c17f0dec8dff8b7f3e595 (Lua 5.3).\n  - Fixed bug #1554552: Wounded attacking soldiers failing to retreat\n  - Fixed bug #1551578: Fortified Village crashes when building can't be placed.\n  - Fixed bug #1542703: Crash during battle in editor_game_base.cc:677: Only\n                        allow building a port if all fields can be conquered.\n                        Also added a test for this issue.\n  - Fixed bug #1525395: Atlantean mines failing to extract all resources\n  - Fixed bug #1509220: Atlanteans campaign keeps counting 0 ships\n  - Fixed bug #1504948: Performance issue when \"no use for ships on this map\"\n  - Fixed bug #1502458: Carrier hiding in Warehouse/HQ is hardcoded\n  - Fixed bug #1490116: Fully promoted soldiers remaining in training sites\n  - Fixed bug #1457425: Fight never ends (also not 2h later)\n  - Fixed bug #1451078: Labyrinth malfunctions full report\n  - Fixed bug #1451069: Collectors win condition doesn't count wares in ports\n  - Fixed bug #1442945: Atlanteans ship construction much faster\n  - Fixed bug #1442869: Stopped production sites should produce something from\n                        their consumed wares before they stop\n  - Fixed bug #1434291: Collectors game over message\n  - Fixed bug #1423468: After reload, all percentages are blue until they are\n                        updated again\n  - Fixed bug #1420521: Reset target quantity is overwritten easily\n  - Fixed bug #1407418: Multiple hunters hunt for same animal\n  - Fixed bug #1402392: Widelands crashed with SIGSEGV in\n                        LuaGame::LuaPlayer::get_buildings()\n  - Fixed bug #1402231: Wl crashes when saving after port is reduced to\n                        warehouse\n  - Fixed bug #1395238: Soldiers getting stuck\n  - Fixed bug #1389211: Port without a portdock (game crashing)\n  - Fixed bug #1387801: Crash when expedition port is destroyed while wares are\n                        unloaded\n  - Fixed bug #1344179: Granite mines should check if their output is needed\n  - Fixed bug #1341662: Remove the animals out of the Barbarian directory\n  - Fixed bug #1332842: Remove support for different flag and frontier 'styles'.\n  - Fixed bug #1332455: Productivity of the Atlantean farm does not drop to 0\n                        when it does not work\n  - Fixed bug #1332452: Crop does not grow\n  - Fixed bug #1302635: Random tribe selection always gives the same result\n  - Fixed bug #1302593: Result screen not shown in loaded game when a player was\n                        already defeated in saved game\n  - Fixed bug #1290123: Delete barbarian stronghold\n  - Fixed bug #1251914: Soldier stuck in battle animation loop\n  - Fixed bug #980287:  Productivity drops on game load\n  - Fixed bug #978138:  Ship is under fisher's hut\n  - Fixed bug #902807:  Stopped production sites do not have their reserves\n                        filled\n  - Fixed bug #861761:  Improve production prioritisation\n  - Fixed bug #849896:  Heal the highest level, healthiest soldier first\n  - Fixed bug #653308:  The attack dialog is not updating the number of possible\n                        attackers\n  - Fixed bug #580923:  Production of carrier does not respect building costs\n\n\n### User Interface\n\n  - Display Widelands version for each client in Internet lobby.\n  - Overhaul of diverse menu screens and windows: map and game loading,\n    in-game Building Statistics, main menu Options and \"About Widelands\"\n  - Messages can be filtered\n  - Added Win condition descriptions as an Objective\n  - Remember map location markers in singleplayer savegames.\n  - Ships now have individual names and show their states in the statistics\n    string\n  - Added census/statistics strings to ships and ship construction.\n  - Hide wares which do not need prerequisites and therefore are produced\n    'endlessly' from configure economy\n  - Watchwindow fixes: Fixed some oddities such as view duplication:\n    - Possibly fixed bug #1553699 (probable cause: std::erase used on invalid\n      position, which results in undefined behavior).\n    - Highlight the current view button.\n  - Editor CategorizedItemSelectionMenu no longer grows excessively wide when\n    multiple items are selected.\n  - Shifted chat overlay up so it won't overlap with the menu buttons.\n  - Most UI elements now use the new font renderer\n  - Various scrollbar-related fixes.\n  - Fixed handling of Alt key in Linux\n  - Fixed bug #1566441: String \"Saving Game\" appears too late\n  - Fixed bug #1559729: Port space not shown.\n  - Fixed bug #1542214: Inconsistent ordering of OK/Cancel buttons.\n  - Fixed bug #1526916: When selecting a map, the parent directory now has a\n                        lower sort order than all other directories.\n  - Fixed bug #1480937: Escape key doesn't work in all dialogues\n  - Fixed bug #1451147: Game crashes when headquarters is taken over\n  - Fixed bug #1426654: Only list compatible .wmf files in the load game dialog\n  - Fixed bug #1422072: Private message improvements\n  - Fixed bug #1419537: Allow Observers to show building spaces\n  - Fixed bug #1413226: Spaces in attack box disappear\n  - Fixed bug #1412242: Multiplayer save game selection does not show the\n                        filename\n  - Fixed bug #1371062: Add confirmation dialog to exit game\n  - Fixed bug #1344350: Constructionsites/dismantlesites only show a dot instead\n                        of building image\n  - Fixed bug #1342563: When choosing random tribe and castle village, the tribe\n                        can be guessed\n  - Fixed bug #1339861: Remove the \"Military settings\" option\n  - Fixed bug #1322741: Text issue: fps statistics overlaps with xz coordinates\n  - Fixed bug #1306728: Crash when info window opened if statistics window has\n                        been opened\n  - Fixed bug #1300359: Installation dialog shows old screenshot\n  - Fixed bug #1298301: Do not show scenario messages when player is in road\n                        building mode\n  - Fixed bug #1296655: News window crashes when building has not been seen in\n                        the game\n  - Fixed bug #1283693: Crash after very long chat message\n  - Fixed bug #1252625: Plot areas now update their data less often.\n  - Fixed bug #1247384: Newly conquered building should prefer heroes\n  - Fixed bug #1232392: Allow tabbing in forms\n  - Fixed bug #1191556: The \"Cancel Expedition\" button in Port windows will now\n                        toggle and remove the tab.\n  - Fixed bug #1167242: Ctrl+destroying a flag with a building does not destroy\n                        the whole road\n  - Fixed bug #998544:  Replay name should contain Widelands version\n  - Fixed bug #988831:  Remove message expiry feature.\n  - Fixed bug #965633:  Set default AI to random tribe\n  - Fixed bug #964541:  Closing building window closes (child) help window\n  - Fixed bug #744749:  Training sites should either show statistics as a\n                        military or as a productionsite\n  - Fixed bug #736404:  Cannot switch from Widelands in full screen on Linux\n                        (alt+tab)\n  - Fixed bug #682351:  Wishlist: Fullscreen toogle also in Menu\n  - Fixed bug #571796:  Stop the rounding to full 10ths for productivity\n                        percentages\n  - Fixed bug #566729:  Add gametime display to replays\n  - Fixed bug #536230:  Building icons in menu are shown without correct\n                        playercolor\n\n\n### Internationalization\n\n  - Big string overhaul to improve translations\n  - UI redesigns to make translated strings fit\n  - Automatic font selection and support for Arabic script\n  - Fixed escaping of special characters in messages\n  - Richtext and rt_render can now handle &nbsp;\n  - ngettext and pgettext are now available in Lua\n  - Fixed bug #1341990: Map names cause confusion in internet play\n  - Fixed bug #1289698: Sorting maps by name sort by original instead of\n                        translated name\n  - Fixed bug #1289586: Let tree descriptions use the same size scheme as\n                        buildings\n  - Fixed bug #1290066: Sort languages by their native names\n  - Fixed bug #978175:  Localization not yet loaded in command line\n  - Fixed bug #973714:  Fonts are different between daily PPA and bzr repository\n\n\n### Editor\n\n  - Merged the four worlds into one, so any entity can be placed on any map now.\n  - New forested mountain terrains\n  - Editor now starts with the Info tool instead of the Set Height tool\n  - The user can choose to display map or filenames when loading or saving a map\n  - Overhaul of all main menu subenus\n  - Stopped the infotool from painting and gave it size 1.\n  - Fixed various cashes in editor when loading a map or using the Set Origin\n    tool.\n  - Fixed bug #1535065: Editor crashes with random map regarding player\n                        positions.\n  - Fixed bug #1532417: Complete indicators for resource water\n  - Fixed bug #1504366: Editor crashes unexpectedly\n  - Fixed bug #1426276: Editor Player Menu doesn't update tool overlay when\n                        player is removed\n  - Fixed bug #1402786: \"Set origin\" should be in the tools menu\n  - Fixed bug #1392406: Confirmation dialog when leaving the editor although\n                        Ctrl has been pressed\n  - Fixed bug #1392215: Secondary and Third Alternative Tool no longer working\n                        in the Editor\n  - Fixed bug #1378801: Random map: Wasteland % change not reflected in\n                        Mountains %\n  - Fixed bug #1341112: Editor line abruption in Noise height tool\n  - Fixed bug #1289575: Dialog for selecting immovable bobs in editor lacks\n                        tooltips\n  - Fixed bug #1281823: Setting resources via LUA API broken in Editor\n  - Fixed bug #1174075: Clarify meaning of icons in editor terrain preview\n  - Fixed bug #1171231: Size of minimap in the editor not changed when new map\n                        is loaded\n  - Fixed bug #977980:  Fish and mountain ressources cannot be removed when they\n                        are on grass\n  - Fixed bug #821553:  Increase maximum number of terrain types\n  - Fixed bug #768826:  Show altitude level in the editor\n\n\n### Help and Documentation:\n\n  - Generic in-game and in-editor help system driven by Lua scripts. All values\n    except for performance are now read from the current Lua configuration\n    files.\n  - Added some performance values for the buildings help text\n  - Improved documentation: Started adding Tribe and World information to our\n    online Widelands Scripting Reference.\n  - Created a new executable 'wl_map_object_info' that will generate JSON files\n    for updating the encyclopedia on the website.\n\n\n### Graphics Engine\n\n  - Fixed line drawing by replacing the broken use of GL_LINES with a\n    tessellation algorithm for drawing lines.\n  - Decoupled UI update frequency from game update frequency (which is now 15\n    times per second).\n  - Removed graphic::update() and Panel::update() and always redraw at maxfps.\n  - Changed default maxfps to 30 (instead of 25).\n  - Filter all textures linearly instead of near. This looks nicer and texture\n    bleeding has been taken care of.\n  - Added a new undocumented command line argument --debug_gl_trace which will\n    log every OpenGL call that is made, together with arguments, return values\n    and glError status. This requires that Widelands is build using\n    -DOPTION_USE_GLBINDING:BOOL=ON. It is a NoOp for GLEW. This will help\n    debugging non-reproducible OpenGL errors that are reported. Tested with\n    glbinding 1.1.0.\n  - More logging when OpenGL is initialized.\n  - Correctly crop destination and source rectangle while blitting.\n  - Fixed memory leaks in UI::Table::draw and around code found using the Leaks\n    tool in Apple's Instruments.\n  - Fixed bug #1562071: Visual glitch in chat overlay as well as chat overlay\n                        transparency.\n  - Fixed bug #1535569: Messages window slows down game speed\n  - Fixed bug #1480928: Lumberjack animation glitches\n  - Fixed bug #1447333: Crashes on main menu under Windows 7. Mouse movement\n                        seems to trigger this.\n  - Fixed bug #1424408: Graphics become all white in tutorial\n  - Fixed bug #1409267: Graphic errors with text on Windows\n  - Fixed bug #1408707: Water should be dithered as land terrain\n  - Fixed bug #1397302: Fullscreen Toggle Text Overlay\n  - Fixed bug #1397301: Screenshots black\n  - Fixed bug #1393547: Flashing black background when autosaving\n  - Fixed bug #1389346: Disabling opengl results in black screen\n  - Fixed bug #1378797: When playing fullscreen mode Unity locks the screen\n  - Fixed bug #1370144: Playercolor mask is sometimes black\n  - Fixed bug #1302565: Screenshot shows wrong image when a game is chosen with\n                        the mouse pointer\n  - Fixed bug #1257476: Crash when attempting to load a game after toggeling\n                        opengl rendering\n  - Fixed bug #1257320: Strange vertical lines during gameplay\n  - Fixed bug #1243700: Statistic window displays graph incorrectly when in\n                        hour-mode\n  - Fixed bug #1215412: Graphic artifacts\n  - Fixed bug #1203006: Increasing resolution in fullscreen results in the right\n                        and bottom sides not being updated properly\n  - Fixed bug #1202133: Dialogs (and list of maps) have white background and\n                        repetition\n  - Fixed bug #1041436: Game jerks and stops after playing awhile. Bzr6421\n  - Fixed bug #731987:  Mouse does not work in full screen on virtual machines\n  - Fixed bug #647456:  Options: colors of the main WL menu changes when changing\n                        the language\n  - Fixed bug #536559:  Fullscreen must not change physical screen resolution\n  - Fixed bug #536500:  Can not toggle fullscreen with Alt+Enter or resize with\n                        w.m.\n  - Fixed bug #536317:  Graphics libraries still in memory when no longer needed\n\n\n### Other Issues\n\n  - Added build instructions for OpenBSD\n  - Ships get debug window. Also its content are extended.\n  - Removed --logfile command line flag - use redirects instead.\n    Added an SDL2 aware logger that replicates writing a stdout.txt on windows.\n  - Removed --remove-replays and --remove-syncstreams. We now always delete\n    them if they were autogenerated and older than 4 weeks.\n  - Added --write-syncstreams option which defaults to true for now.\n    This will give us more debug information for future desyncs.\n  - Remove --dedicated commandline option and associated code.\n  - Added Widelands version to log output\n  - Moved all data-related directories into a new \"data\" directory.\n  - Fixed bug #1581828: Desync while testing bzr8001[bug-1418154-collectors-teams]\n  - Fixed bug #1562332: Crash with playing chat sound in Internet lobby\n  - Fixed bug #1522290: Gameplay suddenly gets very slow\n  - Fixed bug #1503949: Excessive CPU usage and loading time seemingly related\n                        to length of the game\n  - Fixed bug #1438611: Widelands is leaking memory\n  - Fixed bug #1413326: Current trunk on Linux cannot join a game that is hosted\n                        on Windows\n  - Fixed bug #1404478: Windows installer puts string \"Widelands\" into the\n                        version field\n  - Fixed bug #1278050: Login problems with metaserver\n  - Fixed bug #1274279: Metaserver entry in config gets deleted\n  - Fixed bug #1169445: Commandline options 1/0 &lt;=&gt; true/false on win32\n  - Fixed bug #1096453: Massive memory leaks\n\n\n\n## Build 18\n- Added a preview for the costs of a building and the resources gained\n  through the dismantling of a building.\n- Added a button to productionsites for evicting a worker.\n- Added control to exchange stationed soldiers of a militarysite\n  with soldiers of a higher resp. lower level.\n- Added seafaring expedition and colonization.\n- Added new win condition: Territorial time similar to territorial lord.\n- Added a game result screen showing a summary of the game once the game is over\n- Added support for a \"message of the day\" to Widelands and the Widelands' dedicated server.\n- Added new game tips.\n- Improved start up time through on demand loading of graphics.\n- Improved Widelands' rich text rendering engine a lot and improved\n  all kind of text in different places..\n- Improved OpenGL rendering leading to a huge speed up.\n- Improved the handling of solders inside trainingssites:\n  Soliders that did not receive training for some time are now evicted automatically\n- Improved the old stock charts and added some new ones.\n- Improved graphics and animations on many places.\n- Improved graphics used in road building mode to indicate the steepness.\n- Improved multiplayer scenario \"Smugglers\".\n- Improved Empire Inn to be backward compatible.\n- Improved the handling of game saving\n- Improved Widelands' translations and added some new ones.\n- Fixed a bunch of memory leaks.\n- Fixed a bunch of compiler warnings.\n- Fixed an editor crash when trying to save a map inside a subdirectory.\n- Fixed bug #535806:  Loading images takes a tremendous amount of time\n- Fixed bug #536110:  Some Map Editor tools (Resources) are not translatable\n- Fixed bug #536161:  Widelands bundles internal copy of unzip.cc\n- Fixed bug #536482:  Downgrade skilled workers when possible\n- Fixed bug #536507:  Autosave after reaching objective\n- Fixed bug #536548:  Allow control of stationed Soldiers in Military Buildings\n- Fixed bug #536571:  Empire Inns should be able to produce rations.\n- Fixed bug #537194:  Unable to see full list of bobs on debug\n- Fixed bug #566970:  Unable to attack castle\n- Fixed bug #576347:  show game results screen\n- Fixed bug #580905:  write building status in a different font color for construction sites\n- Fixed bug #657285:  Multiple tooltips may be shown when opening building information\n- Fixed bug #674600:  Long titles in message inbox overlap with time sent\n- Fixed bug #674930:  Rare bug in soldiers code\n- Fixed bug #704637:  Does not start (could not set video mode) using too large resolution in fullscreen mode\n- Fixed bug #706284:  Default save file name is always the first in list\n- Fixed bug #714036:  Add evict worker button to productionsites\n- Fixed bug #706284:  Default save file name is always the first in list\n- Fixed bug #714036:  Add evict worker button to productionsites\n- Fixed bug #722087:  hard to empty warehouse\n- Fixed bug #723113:  Weird green granite in the editor on Blackland maps\n- Fixed bug #726139:  Numeric wares display in warehouses not updating correctly\n- Fixed bug #732142:  Please choose lighter blue player color\n- Fixed bug #738643:  Pause game while in 'save'-dialog\n- Fixed bug #738895:  Show a message when the game is autosaving\n- Fixed bug #740401:  Preview required building costs before building or upgrading\n- Fixed bug #744595:  clang llvm 2.9 compiler widelands crash\n- Fixed bug #751836:  Loading games memory usage\n- Fixed bug #763567:  Sort Messages in Message Inbox to be most recent on top\n- Fixed bug #787217:  editor crashes on map load\n- Fixed bug #787464:  Hard to tell the difference between actual flags and possible flags for\n                      the yellow player\n- Fixed bug #796673:  Roads \"light up\" in the fog of war\n- Fixed bug #796690:  Atleantean resource signs have a red tint\n- Fixed bug #802432:  wreck sail is blue instead of white\n- Fixed bug #803284:  While building, show range of the building on construction site\n- Fixed bug #818823:  Multiplayer game kicked out players after being paused for a while (Broken pipe)\n- Fixed bug #825957:  Warnings at compile-time (GCC)\n- Fixed bug #846409:  Improving the load game dialog\n- Fixed bug #858517:  Counter for 50% of the land in territorial lord doesn't reset\n- Fixed bug #861840:  building near shoreline\n- Fixed bug #898129:  Workarea color policy\n- Fixed bug #900784:  Screen resolution can be set too large in windowed mode\n- Fixed bug #902464:  Upgrading building: number of wares in stock window not updated\n- Fixed bug #902558:  Workers returning to a building being dismantled will attempt to enter it\n- Fixed bug #913369:  Warnings at compile-time (clang/llvm)\n- Fixed bug #923702:  soldier \"lost\" if the building he is returning to has been destroyed\n- Fixed bug #933747:  Text refers to bug #1951113\n- Fixed bug #939026:  Sea expedition and colonization\n- Fixed bug #939709:  Make OpenGL terrain rendering less demanding on hardware\n- Fixed bug #955908:  Open stockstatistics with a button\n- Fixed bug #957750:  Add Portspace tool doesn't use the toolsize.\n- Fixed bug #960370:  Atlantean Ship Shows \"flashes\" on the Hull\n- Fixed bug #961548:  widelands executable links against boost_unit_test_framework in Debug mode\n- Fixed bug #963697:  Port build help icon shown, though no port can be build\n- Fixed bug #963802:  Add option to burn a ship\n- Fixed bug #963963:  Game crashes when ship construction site cannot be cleared for a new ship\n- Fixed bug #965052:  Cannot see which map I am currently playing\n- Fixed bug #970264:  Missing SDL_* libraries lead to rather useless messages\n- Fixed bug #970840:  new graph: availability of wares\n- Fixed bug #972759:  barbarian beer icons misleading\n- Fixed bug #974679:  Inconsistent behaviour in soldier creation leads to irregular economy state\n- Fixed bug #975091:  Ship freezes loaded with wares upon destruction of destination port\n- Fixed bug #975495:  lua bug in \"Together we are strong\" map\n- Fixed bug #975840:  test_routing.cc:97 Same expression on both sides of '-'\n- Fixed bug #975847:  increase and decrese resource tool has methods with multiple consecutive returns\n- Fixed bug #975852:  lua_map has a statement after a return which will never be executed\n- Fixed bug #976077:  x\\y axis in ware statistics are wrong\n- Fixed bug #976551:  ftbfs with gcc 4.7 if not including <unistd.h>\n- Fixed bug #976698:  Atlantean saw has misleading description\n- Fixed bug #978123:  Small icons for wares on ships\n- Fixed bug #978169:  Global militarysites icons not updated\n- Fixed bug #979937:  Coal can be replaced by other ressources in the editor\n- Fixed bug #982364:  Editor in Windows XP suffers high CPU, memory leak\n- Fixed bug #982620:  \"no use for ships on this map\" blocks building ships in first Atlantis campaign\n                      (atl01.wmf)\n- Fixed bug #983448:  Improve OpenBSD support\n- Fixed bug #984110:  memory leak in src/ai/defaultai.cc:1439\n- Fixed bug #984165:  Make the increase/reduce wares buttons repeatable\n- Fixed bug #984197:  Suggestion: Confirmation window for dismantling production building\n- Fixed bug #985109:  Decreasing vision for node that is not seen\n- Fixed bug #986526:  Clarify \"X player teams\" map filter\n- Fixed bug #986534:  Improve in-game checkboxes\n- Fixed bug #986910:  Multiplayer game setup does not show team suggestions for maps\n- Fixed bug #988498:  Suggestion: remove cppcheck related stuff from build\n- Fixed bug #988870:  Barbarian weaving mill produces endless cloth\n- Fixed bug #989483:  Widelands host crashes if a client connection breaks\n- Fixed bug #989489:  After leaving an internet game, Widelands freezes in the lobby\n- Fixed bug #990623:  Checkboxes should react when hovered by the mouse cursor\n- Fixed bug #992466:  dedicated server regression: not able to choose map\n- Fixed bug #993293:  EnsureDirectoryExists() does only work with a path deepth of 1.\n- Fixed bug #994712:  GPL Text should maybe not be translateable\n- Fixed bug #995011:  They can attack me but I can't attack them\n- Fixed bug #996965:  Fail to build on amd64\n- Fixed bug #998828:  Only coal can be placed in the editor\n- Fixed bug #1005955: Start using C++11 features in Widelands sources\n- Fixed bug #1008861: Massive memory leak after closing stats window when OpenGL rendering enabled.\n- Fixed bug #1016104: The stock plot is quite wrong\n- Fixed bug #1019585: Building window background \"jumping\" when previewing upgrade build cost\n- Fixed bug #1020736: CrossPlatform Path fix: remove \":\" in path names on Windows\n- Fixed bug #1022267: stock chart counts wares in every building\n- Fixed bug #1023264: Scouts explore consistently to the west\n- Fixed bug #1024549: Crash in Build Cost Preview in Observer Mode\n- Fixed bug #1025014: segmentation fault in widelands\n- Fixed bug #1025848: --version prints more and less than it should\n- Fixed bug #1027058: Connection lost after some time if all players pause in multiplayer\n- Fixed bug #1033213: Assertion in nethost is always true\n- Fixed bug #1033216: Undefined identifiers used\n- Fixed bug #1033615: Consider checking for more warnings when compiling Widelands\n- Fixed bug #1044933: Branch condition evaluates to a garbage value in io/filesystem/filesystem.cc\n- Fixed bug #1044935: Assigned value is garbage or undefined in graphic/render/terrain_sdl.h\n- Fixed bug #1044939: Dead assignment or increment (variables which have values assigned,\n                      but are then never read again)\n- Fixed bug #1050431: Worker icons should not contain letters for levels\n- Fixed bug #1063233: Starting game while savegame is still being transferred\n- Fixed bug #1074655: FPS slowly drops when playing with stock screen open\n- Fixed bug #1074979: r6433 has an economy mismatch after building a third port\n- Fixed bug #1090433: dedicated server module not working on windows\n- Fixed bug #1090887: buildcosts and \"wares that get recycled\" preview moves the window\n- Fixed bug #1093848: Remove ware removes wares without placing them outside the building\n- Fixed bug #1094711: Fisher runs out of fish even with double breeders\n- Fixed bug #1094750: Usability Suggestion: move economy configuration button to a more obvious location\n                      / clarify its location in documentation and tips.\n- Fixed bug #1095022: Division by zero in ui_basic/slider.cc\n- Fixed bug #1095028: Called C++ object pointer is null in ui_basic/table.cc\n- Fixed bug #1095034: Called C++ object pointer is null in network/nethost.cc\n- Fixed bug #1095695: Middle-clicking in any window will crash the game (assertion error)\n- Fixed bug #1095702: Game crashed with OpenGL ERROR: out of memory\n- Fixed bug #1096362: Crash when increasing speed in a internet game as observer\n                      (only happens on dedicated servers)\n- Fixed bug #1096632: Open windows cause game to stall after several hours\n- Fixed bug #1096651: Windowed graphics resolution change does not resize window\n- Fixed bug #1096786: Indicate direction of steepness in road building mode\n- Fixed bug #1097420: Window tabs in map editor cause exception\n- Fixed bug #1098263: Widelands does not start if PC has OpenGL problems\n- Fixed bug #1099094: Tutorial description bug\n- Fixed bug #1100045: Carriers can/can't be removed from Warehouses\n- Fixed bug #1101788: Atlantean stone economy target too low\n- Fixed bug #1104462: Untranslatable strings\n- Fixed bug #1108083: Construction site window does not display specific building name\n- Fixed bug #1115664: Extremely slow framerate/performance with OpenGL\n- Fixed bug #1121396: Assertion error upon starting WL (regression after latest opengl changes)\n- Fixed bug #1125539: Roads not rendered in road building mode\n- Fixed bug #1128114: segmentation fault when running with --dedicated\n- Fixed bug #1130469: Textarea does not place cursor correctly on mouse click (map description in the editor)\n- Fixed bug #1130905: OpenGL switch to Software Rendering crash\n- Fixed bug #1132238: Open buildingwindow after closing of constructionsitewindow when\n                      construction has finished\n- Fixed bug #1132466: Evicted workers will become stuck if the are away from home and the building is\n                      not conencted to the road network\n- Fixed bug #1132469: List of workers in building window not updating properly\n- Fixed bug #1132473: soldier hangs at one point\n- Fixed bug #1132476: change yellow color in white(?) - building menu % is unreadable\n- Fixed bug #1132774: Assertion in image cache while loading first barbarian campaign\n- Fixed bug #1137765: displaying tooltips in fullscreen causes crash\n- Fixed bug #1139666: New buildcap allows larger buildings in smaller spaces\n- Fixed bug #1142781: Current BZR version leads to compiler errors on Windows\n- Fixed bug #1144465: Builder gets \"lost\" after dismantling site\n- Fixed bug #1145376: Dark box when hovering over buildings\n- Fixed bug #1150455: Dedicated servermode segfaults on non-existing maps\n- Fixed bug #1150517: Crash when closing widelands\n- Fixed bug #1153361: OpenPandora patch for FAT FS\n- Fixed bug #1159000: Building WL should check whether gettext is installed\n- Fixed bug #1159432: Warnings at compile-time in GCC 4.8\n- Fixed bug #1159968: Crash in opengl fonthandler_cc:99\n- Fixed bug #1162918: Workers exiting warehouse do not follow flag\n- Fixed bug #1162920: Shovel icon is unclear\n- Fixed bug #1162936: After eviction of a worker, a worker of the same level is requested instead of\n                      the original worker type\n- Fixed bug #1167234: Terrain preview in editor shows nothing\n- Fixed bug #1170086: Imperial sentry returns more wares when dismantled than it needed\n- Fixed bug #1171131: Revision 6559 FTBFS on GNU/Linux due to compile_assert failing\n- Fixed bug #1171233: Opening a Widelands file makes all strings appear in English\n- Fixed bug #1172197: Seefaring doesn't work on nightly Build\n- Fixed bug #1174066: Setting the origin of a map disrupts it\n- Fixed bug #1178327: Empire does not have economy target for marble\n- Fixed bug #1181132: Random Map: Randomize positioning of start positions\n- Fixed bug #1182010: fish breeder does not work\n- Fixed bug #1183479: Evict Worker code possibly incomplete\n- Fixed bug #1184151: Cant load a saved game after update\n- Fixed bug #1186906: Remove entries from the message list that have become obsolete\n- Fixed bug #1189615: WL crashes down while ship makes expedition\n- Fixed bug #1191554: Game crashes when ship with open window is loaded for expedition\n- Fixed bug #1191556: Port window not updated (\"Cancel the expedition\" starts a new one)\n- Fixed bug #1191568: Expedition feature does not work properly in replay mode\n- Fixed bug #1191889: Ship loads ware but does not transport it\n- Fixed bug #1194194: Show build progress of the current ship\n- Fixed bug #1195639: Ports build into water\n- Fixed bug #1196194: Game freezes when exploring coast when not at coast\n- Fixed bug #1197429: Fail to build in Ubuntu 12.04 LTS\n- Fixed bug #1198624: A player should be considered defeated in Autocrat after losing all warehouses,\n                      rather than all buildings\n- Fixed bug #1198921: Returning null reference in scripting/lua_game.cc\n- Fixed bug #1198930: Use-after-free in wui/building_ui.cc\n- Fixed bug #1199653: Unseen port crashes the game when saving\n- Fixed bug #1199808: Use-after-free in wui/shipwindow.cc\n- Fixed bug #1199812: Use-after-free in economy/economy.cc\n- Fixed bug #1199957: Segmentation fault during combat\n- Fixed bug #1200952: Make error: /wui/buildingwindow.cc\n- Fixed bug #1201081: Building with boost 1.54: \"Boost.Signals is no longer being maintained and is\n                      now deprecated. Please switch to Boost.Signals2.\"\n- Fixed bug #1201330: Dangerous variable-length array (VLA) declaration in map_generator.cc\n- Fixed bug #1202040: Soldier preference button graphics\n- Fixed bug #1202133: Dialogs (and list of maps) have white background and repetition\n- Fixed bug #1202146: With opengl enabled, screenshots display edges in terrain strangely\n- Fixed bug #1202228: Better controls for specifying preference of strong and weak soldiers\n- Fixed bug #1202499: Can't open directory with maps\n- Fixed bug #1203121: Latest trunk FTBFS on Ubuntu 12.04\n                      (src/helper.cc:82:8: error: 'mt19937' in namespace 'boost::random' does not name a type)\n- Fixed bug #1203329: Possible to trigger a crash by saving between story dialogs\n- Fixed bug #1203337: Map name appears untranslated in save dialog, even when translation exists\n- Fixed bug #1203338: According to save dialog, campaign maps have 58 players\n- Fixed bug #1203439: Crash on saving with no human player\n- Fixed bug #1203474: Ingame README needs review\n- Fixed bug #1203492: Fail to build in Ubuntu 10.04 LTS\n- Fixed bug #1204008: Suggestion: widelands-daily should incorporate recent translations\n- Fixed bug #1204144: Cursor Key Navigation in table not complete\n- Fixed bug #1204171: Can't select ware in ware statistics window\n- Fixed bug #1204199: Buildings and building statistics have different color groups for productivity\n- Fixed bug #1204226: FTBFS on Ubuntu 13.04 fixed.\n- Fixed bug #1204462: Suggestion: widelands-daily should not only include bzr revision,\n                      but also date/time in the package name\n- Fixed bug #1204481: Militarysite initialization\n- Fixed bug #1204612: FTBFS on Ubuntu Precise and Lucid ('unique_ptr' is not a member of 'std')\n- Fixed bug #1204756: REVDETECT=BROKEN-PLEASE-REPORT-THIS(Release) in PPA builds\n- Fixed bug #1205010: segfault on dismantle on conquered enemy building or starting buildings in campaigns\n- Fixed bug #1205149: Crash on Ubuntu 12.04 when clicking to open a building window\n- Fixed bug #1205457: Fisher produces fish without decreasing resources\n- Fixed bug #1205609: Wincondition scripts reloaded too often\n- Fixed bug #1205806: Ware statistics window too small for empire warelist\n- Fixed bug #1205882: Typo in license text\n- Fixed bug #1205901: Value stored to unread variable in map_io/widelands_map_buildingdata_data_packet.cc\n- Fixed bug #1206211: \"Follow\" function in watch window crashes in replays or when playing as a spectator\n- Fixed bug #1206441: Autosave leads to crash on replays\n- Fixed bug #1206563: Error when loading savegame saved in replay\n- Fixed bug #1206712: Endless loop in Layout::fit_nodes\n- Fixed bug #1206917: Pausing during save dialog behaves different in replays and games\n- Fixed bug #1207069: Seafaring: cancel expedition button on ship\n- Fixed bug #1207412: Authors button ingame leads to crash\n- Fixed bug #1207477: Assertion `it != end()' failed in message queue\n- Fixed bug #1208130: Desync error after clicking \"Prefer rookies/heros\" buttons in military buildings\n- Fixed bug #1208229: Segmentation fault in Widelands::Soldier::attack_update\n                      (this=0x99f1ea0, game=..., state=...) at src/logic/soldier.cc:1003\n- Fixed bug #1208440: Some messages directly expired and still play sound\n- Fixed bug #1208474: Need a nice compatibility safegame from b17.\n- Fixed bug #1209125: FTBFS trunk/6705 on Debian Wheezy\n- Fixed bug #1209256: Saving a game not working because of minimap.png code\n- Fixed bug #1209283: Crash at end of game (game statistics window)\n- Fixed bug #1211248: Add map tag \"seafaring\" and handle in the UI\n- Fixed bug #1211255: Show workarea doesn't work\n- Fixed bug #1211898: bzr 6718 segfault building expedition port\n- Fixed bug #1212191: 100% training site production without any soldier\n- Fixed bug #1212192: Evict worker doesn't work for the second worker\n- Fixed bug #1213330: Called C++ object pointer is null in wui /shipwindow.cc\n- Fixed bug #1215075: Terrains not translateable - feature not a bug???\n- Fixed bug #1215134: Hint text inherited by new map\n- Fixed bug #1216278: Assertion failed when making a port at top left position in this safegame\n- Fixed bug #1216305: It is possible to place ports via expeditions where players can not build them\n                      via normal expansion\n- Fixed bug #1219388: Port spaces missing after change of map origin\n- Fixed bug #1219390: Wine farmer missing in description of shovel\n- Fixed bug #1219507: Savegame crashes Widelands\n- Fixed bug #1219524: Empire bakery drops from 100% to 0% very quickly when no wares are available.\n- Fixed bug #1219526: Last received chat message never vanishes from main in game screen\n- Fixed bug #1220546: segfault on dismantle a building on ubuntu 12.04\n- Fixed bug #1228518: Chat announces defeat of all network players although only one is defeated\n- Fixed bug #1228529: Defeated player can see_all, but can only use fieled_action_window on prior seen fields\n- Fixed bug #1228592: Internet lobby chat is blocked once another UI part was used (one of the lists, etc.)\n- Fixed bug #1228596: Important system messages are not forwarded to ingame chat\n\n\n## Build 17\n- Diversified heal rate for military buildings - the bigger, the quicker.\n- Improved and remodelled a lot of the buildings' animations.\n- Improved and remodelled a lot of the bobs' animations.\n- Improved and remodelled a lot of terrain graphics.\n- Improved dedicated server functionality:\n    * now runable as daemon and thus via init.d script on servers\n    * added possibility to write server statistics to html files\n    * added functionality to save the game on the server via chat command.\n    * added functionality to set up a password for the server.\n    * added functionality to set a custom message of the day (motd).\n    * improved client side handling / setting up of dedicated servers.\n- Improved a lot of icons and button appearence.\n- Improved statistics window.\n- Improved the Widelands code to use less resources.\n- Improved OpenGL rendering which is now active by default.\n- Improved (slightly) the computer player through use of the new\n  dismantle feature.\n- Replaced the old libggz based metaserver support with our own ggz\n  independed solution, which brings some new features as well:\n    * The metaserver is now checking whether a game is connectable\n      if it is not, it sends an error message to the client to\n      inform it.\n    * System messages on the metaserver like global announcements\n      motd changes or Error-Messages are now imported to running\n      games and shown there as well.\n    * The metaserver does now check whether a client is still online\n      regulary and disconnects it, if it isn't.\n    * If the client gets disconnected from the metaserver during a\n      running game, the client is able to reconnect silently.\n    * Games can now have more than 7 connected clients\n    * The Version of Widelands used in a game is now shown as hover text\n      in the game list. If a game is connectable, but uses a different\n      version, a \"?\" icon is shown to visualise that difference.\n- Added a new piece of music to Widelands\n- Added new states and animations for unoccupied buildings and empty mines,\n  to better indicate the current state of a building.\n- Made road textures world dependend and improved the style of the roads\n  for each world.\n- Added basic seafaring functionality:\n    * Ports, ships and shipyards are already working as they should.\n    * Loading of settlers 2 seafaring maps is supported\n    * (Scouting and colonization *NOT* yet implemented)\n  yet implemented.\n- Added port buildspace tool to the editor.\n- Added a new feature to list maps in the map selection menu in categories\n- Added a new feature \"dismantle building\" allowing to recycle some of\n  the resource used to build the building.\n- Added a new win condition \"endless game (no fog)\" with completely\n  visible map from the beginning on.\n- Added two multiplayer scenarios.\n- Added a big seafaring map, playable as scenario.\n- Added feature to play as a random tribe or against a random tribe or\n  random AI.\n- Added click animation for the mouse pointer\n- Added automatic release of second carrier (oxen, donkey, horse), if\n  the road traffic is not that strong anymore, that a second carrier\n  would be needed.\n- Added a new undo/redo feature to the Editor.\n\n- Fixed a bug that disallowed to connect to different servers (via\n  metaserver) without prior restart of Widelands.\n- (Re)Fixed bug #536149: miner/master miner mixed up after enhancing\n  to deep mine.\n- Fixed bug #565406: focus for save window\n- Fixed bug #570055: Open house window on doubleclick even when minimized\n- Fixed bug #590528: add more details to a replay\n- Fixed bug #590631: All workers die, when warehouse/hq is destroyed\n- Fixed bug #594686: Roads not rendered correctly in opengl mode on\n                     some systems\n- Fixed bug #601400: Request::get_base_required_time:WARNING nr = 1 but\n                     count is 1, which is not allowed according to the\n                     comment for this function\n- Fixed bug #649037: Many menus are not repainted in OpenGL mode\n- Fixed bug #657266: Unoccupied helmsmithy animation contains a person\n- Fixed bug #671485: Aged barbarian ware icons\n- Fixed bug #672085: New stock menu layout too high for small resolutions\n- Fixed bug #672098: The priority buttons can be deactivated\n- Fixed bug #674848: The fight against red player in barbarian tutorial 3\n                     can be won in just one fight\n- Fixed bug #683716: Better handling of \"no ressources\"\n- Fixed bug #691928: Message icon is not updated in some cases when\n                     receiving focus\n- Fixed bug #695035: Adjusted hotspots of buildings to fit into their space\n- Fixed bug #702011: Messages in multiplayer are translated by host\n                     before they are sent to client\n- Fixed bug #722196: OpenGL terrain renderer does not dither between\n                     adjacent fields\n- Fixed bug #722793: Ducks on land on Three Warriors\n- Fixed bug #722796: Minimap not shaded by terrain height in OpenGL\n- Fixed bug #723112: The name is not shown for resource coal in the\n                     resource dialog in the editor\n- Fixed bug #726699: Make the wares priority buttons in production sites\n                     more intuitive\n- Fixed bug #734409: campaign texts about enhancing metalworks\n- Fixed bug #731474: Barbarian buildings looking strange when covered\n                     by fog of war\n- Fixed bug #738888: Two sentences in game tips are only partly translatable\n- Fixed bug #741142: Empire Tut 2 - missing event when barbarians\n                     are detected\n- Fixed bug #768828: Fixed the random height tool window in the editor\n- Fixed bug #768854: Messages for win condition \"Territorial Lord\" is not\n                     translated, even though translations exist\n- Fixed bug #771962: Alphabetically sorted ware help in translations\n- Fixed bug #772003: Bakingtray use the peel icon\n- Fixed bug #775132: build-16 Failed to initialize SDL, no valid video driver\n- Fixed bug #779967: Text alignment on \"Host a new game\"\n- Fixed bug #786243: Add extra column to stock windows, if size would be to\n                     big for the current screen resolution\n- Fixed bug #787365: Constr.Site & Prod.Site: Dim House Picture In\n                     The Background\n- Fixed bug #787508: Remove use of barbarian stronghold\n- Fixed bug #791421: Editor: Map Options Editbox Keyboard Input\n- Fixed bug #795457: focus in chat window\n- Fixed bug #799201: New tab icon for workers list\n- Fixed bug #805089: Check client in chat commands, when first mentioned.\n- Fixed bug #808008: Delete outdated data when updating Widelands on Windows\n- Fixed bug #817078: \"Watch window\" should centre more suitably\n- Fixed bug #818784: display player names in status messages when playing\n                     collectors\n- Fixed bug #842960: Original building site graphic is visible during\n                     construction sequence\n- Fixed bug #852434: no game tips on loading screen as host\n- Fixed bug #853217: start multiplayer game with all slots closed\n- Fixed bug #855975: Atlantean bakery jumping up, when start working\n- Fixed bug #859079: Warning about files (pngs) not found when\n                     starting a new game\n- Fixed bug #859081: Dialog briefly shown when clicking in the fog of war\n- Fixed bug #865995: Allied soldiers fight when they meet on the battlefield\n- Fixed bug #870129: highlighted message can not be marked\n- Fixed bug #871401: WaresQueue stock level configuration is ignored\n                     when work fails in Productionsites\n- Fixed bug #877710: [windows] window title shows \"not responding\"\n                     when loading a map\n- Fixed bug #884966: Not able to prioritize top row (pita bread) in\n                     battle arena\n- Fixed bug #886493: Default AI is set to none\n- Fixed bug #886572: After a while, increasing game speed makes the game\n                     lag even at lower speeds\n- Fixed bug #887093: Make OpenGL the standard renderer\n- Fixed bug #902765: Show buttons in the bottom toolbar in the same\n                     order, also for spectators\n- Fixed bug #902823: Show \"increase/decrease capacity\" buttons only\n                     in \"soldiers\" tab\n- Fixed bug #912486: Maximum FPS button overlaps language list in options\n                     on higher resolutions\n- Fixed bug #914462: possible bug in void BulldozeConfirm::think()\n- Fixed bug #924140: assertion failed if you press \"up/down\" button in\n                     an empty message window\n- Fixed bug #924768: Rework barbarian barrier's statistics\n- Fixed bug #927110: font color not adapted to map color\n\n\n\n## Build 16\n- Many new graphics, new sounds.\n- Added a dedicated server function for terminal use.\n- Improved and refactored font handler.\n- Removed barbarian Stronghold from list of buildable military sites as\n  it did not have a real purpose.\n- Added a help button + window function (e.g. to explain the multi player\n  menu).\n- Play a fanfare when a military site gets occupied and another fanfare\n  when the player is under attack\n- Reworked the multi player launch game menu - now different clients can\n  control the same in game player together (share the kingdom) and other\n  starting positions can be \"shared\" in as second (third, fourth, ...)\n  starting position of a player.\n- Add a new Atlantean campaign map.\n- Add rudimentary support for ships (you can build them, but they are not yet\n  useful)\n- Add support for multiplayer scenarios. No scenario is shipped yet though.\n- Added column for the maximal number of players to the map selection menu.\n- Reordered wares and workers in logical groups (e.g. food production, ...).\n  Also fix the Economy Preferences Menu to be similar to the new Warehouse\n  windows.\n- Barbarian lumberjacks now need a felling_axe which is produce in the metal\n  workshop. The axe is now only produced in the war mill and the axe factory.\n  This delays barbarian soldier production in the early game, giving the other\n  tribes more time to equalize their military production. (bug #667286)\n- Give Empire +1 basket so that two vineyards can be build right away to fully\n  saturate the first marble mine.\n- Buttons that represent a toggable state are now really toggable buttons in\n  the user interface.\n- Changed the way compressed files are generated (maps, savegames) and read.\n  Now it is possible to rename maps and savegames but it is not possible\n  to load maps from version after this change with versions before this change\n- Added a dotted frame border to the mini map.\n- Work area preview is now on by default.\n- New maps: Desert Tournament, Swamp Monks.\n- Improved and added many new animations for workers\n- Improved and added fighting animations for soldiers\n- Implemented teamview for allied players\n- Implemented shared kingdom mode, where two or more players control the same\n  player.\n- Added two new maps.\n- Added possibility to create and play multiplayer scenarios.\n- Do not show building statistic informations of opposing players anymore\n- Gave foresters more intelligence - now they do not remove young trees to\n  replant another anymore and plant the trees that suit the terrain the best.\n- Added host commands like /announce, /kick, ... (type /help in chat window\n  to get a list of available commands).\n- Improved defaultAI's behaviour.\n- Added \"real\" work animations for builders and play \"idle\" animation, if\n  the builder has nothing to do.\n- Made Empire baracks more useful.\n- Added player number user interface and automatic start position placement in\n  random generated maps.\n- Improved the heigth generation algorithm of the map autogenerator to produce\n  more playable maps.\n- Added notification messages for players, when military sites are occupied.\n- Added teams (alliances can now be defined before start)\n- Now the builder does nomore cause the finished building to see its vision\n  range.\n- Many improvements of the graphic rendering engine\n- Implemented \"stop storing\", \"out source\", \"prefare ware\" settings for\n  warehouses.\n- Improved military site's and training site's user interface.\n- Improved health bar and level icons for soldiers.\n- Improved all exisiting campaigns to use lua.\n- Added an interactive \"start from no knowledge\" tutorial.\n- Added new music tracks.\n- Added winning conditions (endless game, autocrat, collectors, land lord,\n  wood gnome).\n- Added basic opengl rendering support.\n- Added many new and improved exisiting translations.\n- Removed unused medic code.\n- Reduced healing rate of soldiers.\n- New keyboard shortcuts for the message window: N, G, Delete.\n- New keyboard shortcuts for quick navigation: comma, period, and (Ctrl+)0-9.\n- Experience required by workers per level is no longer random.\n- Made the empire barracks a little more useful.\n- Improved stock menu: Use tabs and add warehouse-only tabs.\n- Changed the boss key from F10 to Ctrl+F10.\n- Story Message Boxes are nomore closed by right clicking.\n- Added command line option to tell Widelands where to search for translations.\n- Improved some of the exisiting maps.\n- Improved the \"user friendly\" compile script and moved it to compile.sh\n- Fixed the translation system - users should now be able to select any\n  compiled and installed translation of Widelands.\n- Removed scons and replaced it with cmake.\n- Fixed two potential security issues (internet gaming)\n- Fixed bug #729772: Selection of Widelands.ttf via options menu\n- Fixed bug #687342: No longer complain when a master miner is transferred to\n  a mine to fill a junior position.\n- Fixed bug #612348: Soldiers always move out of buildings to battle\n- Fixed bug #670980: Cmd_EnemyFlagAction::Write handles disappeared flag\n- Fixed bug #697375: Handle state.coords == Null() correctly in soldier attack code\n- Fixed bug #691909: Compatibility with old savegames with barbarian battlearena\n- Fixed bug #722789: Always flush animations before loading\n- Fixed bug #724169: Military site window no longer changes size erratically\n- Fixed bug #708328: infinite loop(s) in building_statistics_menu.cc\n- Fixed bug #720338: Options show wrong resulution as selected if no\n  ~/.widelands/conf exists\n- Fixed bug #536149: miner/master miner mixed up after enhancing to deep mine\n- Fixed bug #580073: Objectives menu update\n- Fixed bug #695735: Scrollbar damaged in multiline textboxes in (unique)\n  windows in FS menu\n- Fixed bug #659884: Problem with network savegame loading under windows\n- Fixed bug #683082: copy constructor should take const argument\n- Fixed bug #669085: Wood Lance (Empire ware) is practically invisible\n  in ware encyclopedia\n- Fixed bug #680207: Economy settings missing ores\n- Fixed bug #583985 and #573863: Scout did not work as it was supposed to.\n- Fixed bug #618449: [fetchfromflag] - building dissappeared.\n- Fixed bug #537392: Computerplayer does not adhere to currently allowed\n  buildings.\n- Fixed bug #547090: Make barbarian weaving mill not buildable.\n- Fixed bug #577891: Make atlantean small tower less strong.\n- Fixed bug #615891: Commandline parameters homedir and datadir parsing.\n- Fixed bug #554290: GGZ game hosting on windows was not working before.\n- Fixed bug #533245: Buildings statistics were not calculated correctly.\n- Fixed some filesystem bugs.\n- Fixed desync bug #590458 and allowed syncstream writing without replay writing\n- Fixed replay bug when using recursive destroy (pressing Ctrl while destroying)\n- Fixed remaining \"tabard cycling\" problem and cleanup related to recent economy\n  changes.\n- Fixed bug #577247: When constructionsite finishes, set builder's location to\n  the new building.\n- Fixed bug #580377: Member function defined in .cc file should not be declared\n  inline.\n- Fix bug with nosound option.\n- Fixed language list, to only show the found languages - that way it should be\n  clearer to the user, in case when translations were not compiled.\n- Fixed directory browsing in Map save dialog of the editor.\n- Fixed bug #568371: Stray numbers in player table in GGZ menu.\n- Fixed bug #536373: Race between \"transfer\" and \"cancel\" signals.\n- Fixed bug #569737: Failed assert when trying to overwrite save\n- Fixed bug #568373: Removed flag display in the building statistic menu\n- Fixed many other bugs.\n\n## Build 15\n- Removed registering functionality for metaserver. This is to be compatible\n  with future changes to the metaserver.\n- Small text tweaks and translation updates.\n- New graphics for some buildings and menu pics.\n- Fix for Multiline Editboxes that could lead the Editor to crash.\n- Scout runs a little longer to make it more useful.\n- Fixed descyns happening when a scout left his house in network games.\n- Healthy soldiers defend while injured ones heal at MilitarySite (bzr:5084)\n- Fixed bug when PM is send to the player hosting a network game.\n- Fishbreeder no longer complains about no fish found.\n- Conquered buildings now appear in statistics.\n- Improvements in the build_and_run.sh script and cmake building in general.\n- Sound & Music system is now thread safe.\n- Win 32 bug fix: Mine symbols were not visible in VC++ builds.\n- Fix defending soldiers making invisible and freezing battles.\n- Support for building with Visual Studio\n- New graphics for some buildings\n- Added second carrier type for busy roads (donkeys, oxen, horses)\n- Changed localization structure so that we can translate from launchpad.net\n- Cmake is now a supported build system\n- Lua support (preliminary)\n- Fix bug that when a worker program had a createitem command where the\n  parameter was not the name of a ware type in the tribe, the game would fail\n  an assertion when the command was executed. Now throw an exception when the\n  command is parsed. (svn:r4847)\n- Implement a the \"scout\" command in worker programs. Add a worker type \"scout\"\n  to each tribe. Such a worker type typically lives in a small house/hut\n  (productionsite). The productionsite's work program typically consists of a\n  sleep period, consumption of some food, and sending the worker out to explore\n  nodes that have never been seen before or not seen recently. (svn:r4840,\n  svn:r4841, svn:r4843, svn:r4844, svn:r4845)\n- In the chat, doubleclicking a username will add @username so that the text\n  that is written after will be sent as a personal message to that user.\n  (svn:r4832)\n- Implemented double size zoom mode for minimap (svn:r4820, svn:r4821)\n- Added login/register menu for games via metaserver (svn:r4818, svn:r4819)\n- Added a small scenario part to \"The Green Plateau\" map (svn:r4808, svn:r4810)\n- Improve map select menu - now the \"play as scenario\" checkbox is only usable,\n  if the selected map is playable as scenario (= if a file \"trigger\" exists).\n  Further it shows a special icon for scenario maps for a direct indication.\n  (svn:r4807)\n- Added new event \"seeall\" allowing to switch see all mode of a player to\n  on/off. (svn:r4804, svn:r4878)\n- In productionsite programs: Generalize failure handling method to result\n  handling method. Depending on the result of the called program, the calling\n  program can now return failed, completed or skipped. It can also chose to\n  continue execution or repeat the call. (svn:r4781)\n- Added new loading screens for Desert, Greenland and Winterland. (svn:r4778,\n  svn:r4816)\n- Improved Battle code\n    * Added support for soldier combat animations (svn:r4772)\n    * Let soldiers retreat, when they are injured. Let the player configure in\n      the game how injured they have to be to retreat. Make it configurable in\n      scenarios and initializations to what extent a player should be able to\n      configure this feature during the game. (svn:r4796, svn:r4812)\n    * New attack user interface (svn:r4802, svn:r4803, svn:r4813)\n- Fix bug that if a user sent a private chat message to himself, the nethost\n  delivered it to him twice. (svn:r4764)\n- Added a new map 'Atoll' (svn:r4755)\n- Add the production program return condition type \"site has\" that takes a\n  group (just like the consume command). Now it is possible to have a statement\n  \"return=failed unless site has bread,fish,meat:4\". (svn:r4750)\n- When parsing a consume group, check that the count is not so large that the\n  group can not be fulfilled by the site. For example if a site has \"[inputs]\"\n  \"smoked_fish=6\", \"smoked_meat=6\" and a program has a consume command with the\n  group \"smoked_fish,smoked_meat:13\" it will give an error message (previously\n  it was just accepted silently). (svn:r4750)\n- Fix bug that prevented parsing of a negation condition in a production\n  program return statement. (svn:r4748)\n- Change some productionsites to produce even if the product is not needed, if\n  none of the inputs nor the site's capacity are needed either, so that wares\n  of a more refined type are available when they are needed in the future.\n  (svn:r4746, svn:r4748, svn:r4751)\n- Fix broken logic of productionsite program's return command's when-condition.\n  (svn:r4745)\n- Show in the statistics string why a building is not working. (svn:r4744)\n- When a productionsite program has been skipped, do not start it again until\n  at least 10 seconds have passed, to avoid slowing down the simulation. The\n  drawback is that it may take longer time until the productionsite discovers\n  that it should produce something (for example because the amount of a ware\n  type dropped below the target quantity). (svn:r4743)\n- Fix bug that 40 characters was read from a file into a buffer that was used\n  as a 0-terminated string (the building statistics string). This worked as\n  long as the file provided the 0-terminator. Now make sure that the buffer is\n  0-terminated regardless of what the file contains. Previously the whole\n  buffer was written (including the garbage after the terminator). Now only\n  write the real content. (svn:r4742)\n- Fix the editor's trigger time option menu. (svn:r4740)\n- Fix the map Sun of fire so that there is no longer possible to walk (attack)\n  along the coast between players 4 and 5.\n- Improvements in replay handling to save diskspace (svn:r4719, svn:r4720)\n    * Only write syncstreams in multiplayer games\n    * Delete old (definable) replay files and syncstreams at startup\n- Replace the event type that allows or forbids a building type for a player\n  with 2 separate event types (for allow and forbid respectively). They can\n  handle multiple building types in the same event and the configuration dialog\n  is more complete, with icons for the building types. (svn:r4717)\n- Implement event types to set the frontier/flag style of a player (can also be\n  used in initializations). Also implement configuration dialogs for those\n  event types. (svn:r4709, svn:r4715).\n- Change the code so victorious soldiers conquer an opposing militarysite,\n  instead of destroying it. (svn:r4706 - svn:r4711, svn:r4724, svn:r4727,\n  svn:r4731, svn:r4732, svn:r4822, svn:r4839)\n- Fix bug that caused undenfined behaviour, particularly segmentations faults in\n  64-bit optimized builds. (svn:r4702)\n- Improve player's message queue: (svn:r4698)\n    * Add only important and not doubled messages.\n    * Play a sound, if a new message arrives.\n    * Play special sounds at special events (e.g. \"You are under attack\")\n- Fix bug that a savegame, with a flag on a node that was not interior to the\n  flag's owner, could be loaded. (svn:r4695)\n- Fix bug that a scenario game could be started from a map, where a player did\n  not have a starting position, causing a failed assertion when trying to\n  center the view on the player's home location. (svn:r4694)\n- Fix out-of-bounds array access bug in network game lobby code. (svn:r4676)\n- Fix bug that panel_snap_distance and border_snap_distance were mixed up when\n  initializing the spinboxes in the options menu. (svn:r4665)\n- Fix crash when trying to use the editor to add an event, of type\n  conquer_area, with the same name as an existing event. (svn:r4655)\n- Fix a bug in ids of autogenerated maps and add automatic resource, immovable\n  and critter placement to the automatic map generation feature. (svn:r4651,\n  svn:r4679)\n- Fix bug that a savegame, with flags on neighbouring map nodes, could be\n  loaded, leading to errors later on (for example when trying to build a 1-step\n  road between them). (svn:r4621)\n- Fix bug that a savegame, where a flag was placed on one map node but later\n  was given the coordinates of another map node, could be loaded, leading to\n  errors later on. (svn:r4620)\n- Added more stones to the Elven Forests map. (svn:r4612)\n- Improved the selection of which warehouse a produced ware should be\n  transported to. (svn:r4609)\n- Add new music. (svn:r4602, svn:r4611)\n- Change the reporting of an error that is found in game data (savegame,\n  command log, world/tribe definitions) whenever such game data is read (for\n  example when a replay or new or saved game is started or a new or saved map\n  is loaded in the editor). Do not include source code filename:linenumber\n  information (just explain what is wrong with the game data that the user\n  tried to load). Return to where the user tried to load the game data\n  (menu/shell). (svn:r4600)\n- Fix bug that sometimes a warehouse did not provide a carrier to fulfill a\n  request when it should. (svn:r4599)\n- Change bob movement by eliminating a 10 ms pause before starting to move\n  along an edge. The game logic could fail and throw an exception if a bob was\n  moving along a road and the road was split during those 10 ms. Unfortunately\n  this fix breaks each old savegame with a bob that happens to be in this\n  state. (svn:r4597)\n- Fix memory leaks. (svn:r4567, svn:r4671, svn:r4672, svn:r4673, svn:r4674,\n  svn:r4675, svn:r4677, svn:r4681, svn:r4682, svn:r4756)\n- Fix bug that when the editor's map options window was opened and the map's\n  description was shorter than a certain length (different for different\n  locales), the program would crash when a letter was typed in the description\n  multilineeditbox. (svn:r4563)\n\n## Build 14\n- Fix bug that the Firegames map had no water. (svn:r4533)\n- New tree and stone graphics for the Blackland world. (svn:r4525, svn:r4526,\n  svn:r4527, svn:r4528, svn:r4529)\n- Fix bug that the Atlantean and Empire Hunter's Houses were not shown as meat\n  producers in the ware encyclopedia. (svn:r4521)\n- Fix bug that in the new event/trigger dialogs, the Ok button was enabled even\n  when an event/trigger type was selected, for which no options window is\n  implemented. Nothing happened when the button was pressed. Now the button is\n  disabled and a note is shown, explaining that an event/trigger of this type\n  must be created by editing the text files (with a regular text editor instead\n  of the Widelands editor). (svn:r4512)\n- Fix bug that when a ware was waiting at a flag, and the next flag or building\n  that the ware was waiting to be taken to was removed, anyting could happen\n  (because of a dangling pointer). (svn:r4508)\n- Fix usability problem that accidentally double-clicking on a road could\n  remove it. (Previously, when clicking on a node that had a road, but a flag\n  could not be placed there, the mouse cursor would be placed over the button\n  to remove the road, in the dialog that was opened. Now place the mouse cursor\n  over the tab icon instead in that case.) (svn:r4490)\n- When entering automatic roadbuilding mode after creation of a non-connected\n  flag, move the mouse cursor to the flag, to offer optimal conditions to\n  either start building a road, in any direction from that flag, or directly\n  click on the flag to stop building the road. (svn:r4489)\n- Give more progress information during editor startup by showing a message for\n  each tribe that is being loaded. (svn:r4488)\n- When a progress indicator has been shown during animation loading, remove the\n  message \"Loading animations: 99%\" afterwards, so that the user is not mislead\n  to believe that animation loading is still going on, when in fact something\n  else is taking time. (svn:r4486)\n- Some \"plastic surgeries\" on editor menus.\n  (svn:r4481, svn:r4482, svn:r4483, svn:r4484, svn:r4485)\n- Fix bug that in the editor's event menu, the buttons to change and delete an\n  event chain where enabled even when no event chain was selected in the list.\n  This caused a crash when any of the 2 buttons was clicked. (svn:r4480)\n- Make sure that every soldier battle property that is loaded from a savegame\n  and is not compatible with the soldier's type's definition is adjusted to the\n  nearest valid value. This makes changes to a soldier type's battle properties\n  affect preexisting savegames when they are loaded with the changed game data.\n  (svn:r4479)\n- Fix bug that a soldier without hitpoints could be loaded from a savegame.\n  (svn:r4478)\n- Fix memory access error caused by a value read from a savegame being used as\n  an array index without being checked. (svn:r4477)\n- Fix null pointer dereference that could be caused by an invalid savegame.\n  (svn:r4475)\n- Fix bug that if a savegame contained a soldier with\n  max hitpoints < current hitpoints, it was not detected as an error.\n  (svn:r4474)\n- Fix bug that when loading (from a savegame) a bob (such as a worker or wild\n  animal) that was walking along an edge between 2 neighbouring nodes, it was\n  not checked that the start time was before the end time. (Both times are\n  stored in savegames.) (svn:r4470)\n- Fix bug that when a military-/trainingsite was loaded from a savegame, it was\n  not checked whether the configured capacity was within the range of allowed\n  values, as defined in the site's type. Do not reject the savegame if the\n  value is outside the range, since the definition may have changed and the\n  user wants to load the game anyway. Just warn and adjust the variable to the\n  nearest valid value. (svn:r4468, svn:r4469)\n- Fix bug that the parsing of a worker type would allow\n  max_experience < min_experience. (svn:r4467)\n- Fix wrong calculation of the amount of experience that a worker needs to\n  change its type. The value is chosen randomly in an interval, from\n  min_experience to max_experience, specified in the soldier's type's\n  definition. But the calculation had an off-by-one error that caused the value\n  to never become max_experience, and worse, crash with a division by 0 when\n  min_experience = max_experience. (svn:r4466)\n- Fix bug that the game loading code would accept a soldier with\n  max_attack < min_attack. (svn:r4465)\n- Fix bug that the parsing of a soldier type would allow\n  max_attack < min_attack. (svn:r4464)\n- Fix wrong calculation of a soldier's attack value during battle. The value is\n  chosen randomly in an interval, from min_attack to max_attack. But the\n  calculation had an off-by-two error that caused the value to never become\n  max_attack or max_attack - 1, and worse, crash with a division by 0 when\n  min_attack + 1 = max_attack. (svn:r4463)\n- Fix wrong calculation of a soldier's maximum hitpoints during its creation.\n  The value is chosen randomly in an interval, from min_hp to max_hp, specified\n  in the soldier's type's definition. But the calculation had an off-by-one\n  error that caused the value to never become max_hp, and worse, crash with a\n  division by 0 when min_hp = max_hp. (svn:r4462)\n- Fix bug that a corrupt savegame could cause gametime to go backwards (a\n  !GameLogicCommand could have a duetime in the past without being detected as\n  corrupt during load). (svn:r4460)\n- Fix invalid memory access bug (causisng random behaviour) when a section file\n  inside a zip-archive was missing a newline at the end. (svn:r4443)\n- Fix bug that trigger building could count large buildings sevaral times\n  because they occupy several nodes on the map. (svn:r4441)\n- Added Italian translation (svn:r4435, svn:r4436)\n- Fix drawing of text with non-latin1 characters. (svn:r4421)\n- When a soldier steps outside his territory during attack, he searches for\n  militarysites with defenders. Previously he chose them from any other player.\n  Now only choose defenders from the player whose territory the soldier steps\n  on. (svn:r4410)\n- Exit with an error when incompatible command line parameters are given,\n  instead of ignoring it. (svn:r4406)\n- Allow starting a replay from the command line by giving the --replay=FILENAME\n  parameter. If just --replay is given, the program goes directly to the replay\n  file selection menu. (svn:r4405)\n- Fix display of multiline editoboxes when the text has more than one\n  consecutive linebreak. (svn:r4395)\n- Fix navigation in multiline editboxes. When the last line was empty and the\n  text cursor was at the end of the line above, it was not possible to move the\n  cursor to the last line with the down arrow key. (svn:r4394)\n- Fix bug that the text cursor was not visible when at the beginning of a line\n  (in a single- or multiline editbox). (svn:r4393).\n- Give spectators (see-only) access to the building and economy configuration\n  windows. Same for players with see-all right (debug builds). (svn:r4380,\n  svn:r4399)\n- When a soldier can not move to its opponent during an attack, do not give up\n  and quit the program. Instead, let the soldier desert without punishment.\n  Notify the 2 involved players by adding a message to their message queues and\n  pausing the game. Also pause and give a message when a worker can not return\n  home to his building and therefore becomes a fugitive. (svn:r4378)\n- Fix bug that the in-/decrease buttons in the editor's noise height options\n  menu were not repeating. (svn:r4459)\n- Fix bug that the buttons in the editor's change resources options menu were\n  not properly disabled. (svn:r4458)\n- Fix bug that the traingingsite window soldier buttons (drop selected soldier,\n  decrease soldier capacity and increase capacity) were not properly disabled\n  and that the latter 2 were not repeating. (svn:r4373)\n- Fix bug that the building window background graphic was not drawn with\n  correct playercolour. (svn:r4369)\n- Fix bug that buildings that were behind fog were not drawn with correct\n  playercolour. (svn:r4367)\n- Fix bug in buildcaps calculation. Sometimes it was possible to build a large\n  building at location A and then build a large building at location B. But if\n  a large building was built at location B first, it was no longer possible to\n  build a large building at location A. (svn:r4366)\n- Fix bug that the content of the interactive player data packet in a savegame\n  was used without being checked properly, which could lead to a segmentation\n  fault. (svn:r4353)\n- Fix bug in the editor that it was possible to remove a player even though\n  it was referenced by someting (such as an event or trigger). (svn:r4339)\n- Fix bug that for a worker type, an experience value was read and used even\n  though the worker type could not become some other worker type. (svn:r4328)\n- Make the config file format somewhat stricter. Do not allow // comments and\n  require a section header to be closed with a ']'. (svn:r4285, svn:r4298)\n- No longer look for bmp an gif images when searching for animation frames.\n  This should make animation loading a little faster. (svn:r4278)\n- Added and improved some buildings and workers animations (different svn rev.)\n- Many graphic system updates including experimental hardware improvements\n  (many different svn rev.)\n- Implemented very basic \"dedicated\" server (many different svn rev.)\n- Improved chat system:\n    * Added personal messages (use \"@username message\") (svn:r4186)\n    * Added a time string in front of each message (svn:r4253)\n- Implemented metaserver lobby for internet game (many different svn rev.)\n- Implemented check of free diskspace to avoid segfaults (different svn rev.)\n- Added new ware icons. (svn:r4152, svn:r4250, svn:r4471)\n- Implemented versioning system to avoid that Widelands loads data of old\n  Widelands versions. (svn:r4133)\n- Implemented basic \"generate random map\" feature. (svn:r4113)\n- Implemented basic messaging system to inform players of important events.\n  (many different svn rev.)\n- Improved computer player behaviour (many different svn rev.)\n    * Computer player should now be able to build up a working infrastructure\n      (including mining, tools and weapons production and soldier training) and\n      to attack and defeat their enemies.\n    * Users are now able, to select the type of a computer player. The\n      available types are: Aggressive, Normal, Defensive and None. First three\n      are based upon the improved AI and only behave different in case of\n      attacking strength and expansion, while latter does simply nothing.\n    * It is now possible to define the computer player type for camapign maps.\n- Throw out the bundled version of scons. Scons is widely available by now and\n  the bundled version caused more trouble than it was worth: many\n  incompatibilities, where a distribution-supplied version would have worked\n  (svn:r3929)\n- Fix bug #2351257 - wrong game tips are shown. (svn:r3808)\n- Some improvements of tribes economy and soldier balance (svn:r3793,\n  svn:r3796)\n- Added third barbarian campaign (svn:r3790) and improved the already existing\n  ones (svn:r3775, svn:r3788)\n- Added a new trigger for scenario maps: Player defeated (svn:r3789)\n- In the editor save dialog; initialize the name box with the map name and do\n  not react (for example by playing a sound) to clicks in the empty area below\n  the last file in the listbox (affects all listboxes in the UI). (svn:r3783)\n- Fix bug in build13 that the editor save dialog would use the name of the list\n  item from the second last (instead of the last) click. (svn:r3781)\n- Added an editor tool to set a new origin in the map. This will make it\n  possible to get an island properly centered, instead of divided in 4 corners\n  when a minimap is generated with an external tool, such as the one used in\n  the [map download section](http://wl.widelands.org/maps/). The button that\n  enables the tool is in the map options dialog. (svn:r3778)\n- Allow longer text for a world's name and author (to avoid having it cut off\n  like \"The Widelands Development Tea\"). (svn:r3777)\n- Do not crash when writing an empty file. (svn:r3773)\n- Added two new in game and one new menu song. (svn:r3758, svn:r3800)\n- Make more configuration options configurable in the options menu. (svn:r2753)\n- Fix bugs in the S2 map loader. Trying to load an invalid file could cause\n  failed assertions in debug builds and probably other bugs in release builds.\n  (svn:r3750)\n- Added new loading screens for winterland and for barbarian campaigns.\n  (svn:r3748, svn:r3797)\n- Allow configuring which information about a building is shown in the\n  mapview's building census and statistics displays and the building window\n  title. (svn:r3741)\n- Added colorized chatmessages. (svn:r3725)\n- Added a lobby to the multiplayer launchgame menu. Now users are not\n  automatically assigned to players. Users staying in the lobby when the game\n  begins will become spectators. (svn:r3702, svn:r3703, svn:r3707, svn:r3709,\n  svn:r3710)\n- Fix the map Dry Riverbed so that the mountain pass is passable in both\n  directions. (svn:r4335)\n- Improved the map Plateau so that the players can reach the center even if\n  another player is fortified there. This is achieved by allowing large\n  buildings at a few more places in the valleys leading from the starting\n  positions to the center. Also add some wiese1 (terrain type), which was not\n  used at all on this map before. Make some small adjustments to the node\n  heights in the small valley just east of player 1's starting position, so\n  that the valley becomes more useful. (svn:r3713, svn:r4361, svn:r4362)\n- Added two new maps \"Twinkling Waves\" and \"The ancient sun of fire\".\n  (svn:r3689, svn:r4119)\n- Fix bug that the editor toolsize menu was not updated when the toolsize was\n  changed with the keyboard shortcuts. (svn:r3675)\n- Implement feature request #1792180 - Allow user to change starting-position.\n  (svn:r3666, svn:r3667, svn:r3668)\n- Editboxes now support UTF8 (unicode) characters, so the players can use their\n  locale language in game. (svn:r3662, svn:r4398)\n- Improve the output of _widelands --help_. (svn:r3660)\n- Add a new terrain type, corresponding to Greenland's bergwiese, to Desert.\n  (svn:r3659)\n- Workers that search for an object now prefer one of the nearest. Therefore\n  they spend less time walking and more time harvesting. (svn:r3658)\n- Fix bug that in the military-/trainingsite windows, the name (untranslated)\n  of the soldier type was shown instead of the descname (translated).\n  (svn:r3645)\n- Fix bug that in the trainingsite window, the ware priority buttons were not\n  updated. (svn:r3642)\n- Fix bug that in the trainingsite window, the column _total level_ was not\n  sorted correctly for 2-digit values (10 was sorted between 1 and 2).\n  (svn:r3641)\n- Fix bug that when the user typed in the editor's map description input\n  fields, the world was reparsed on every keystroke, which caused a delay.\n  (svn:r3640)\n- Fix bug that when the loading of a tribe failed, the error message was\n  insufficient. (svn:r3639)\n- Fix bug related to land ownership and military influence when a soldier\n  arrived to a trainingsite. (svn:r3701)\n- Fix bug related to land ownership and military influence when an\n  event_building was executed. (svn:r3636, svn:r3637)\n- Fix bug that when a \\_pc-file was missing for an animation frame, the program\n  did not make it clear that it was the \\_pc-file that was missing (the user\n  was lead to think that it was the main file of the animation frame).\n  (svn:r3623)\n- Fix bugs in the maps _Mystical Maze_ and _Three Warriors_: update tribe name\n  to _atlanteans_. (svn:r3609, svn:r3612)\n- Change the Atlantean Weaponsmithy's program Produce Light Trident to consume\n  iron (in addition to planks). This makes it necessary to mine iron ore to\n  produce soldiers, which makes it more difficult to win against the other\n  tribes (who also require iron for making soldiers) (svn:r3718)\n- Fix bug in build13 that the Atlantean Labyrinth's program Upgrade Evade 1\n  could consume bread and then fail. (svn:r3714)\n- Add demand check to _Cloth_ production in _Empire_ _Weaving Mill_.\n  (svn:r3604)\n- Add a program that produces an axe to the Barbarian Metalworks. (svn:r3717)\n- Simplify the stoppability rules of building types. Only productionsites are\n  stoppable. A productionsite type is a stoppable if and only if it is not a\n  militarysite type. Get rid of the config option to make a building type\n  stoppable (many building types had \"stopable=yes\" in their conf-file). Also\n  get rid of the config options to set custom stop/continue icons for each\n  building type (this was not used in any of the building types that are\n  included in the Widelands releases). It is no longer possible to stop a\n  constructionsite so that the finished building will be set to stopped.\n  (svn:r3723)\n- Get rid of event numbers in event chains. This removes the maximum limit of\n  99 events in an !EventChain. It also makes diffs much smaller when an event\n  is inserted, because now the following events do not need to be renumbered.\n  (svn:r3600)\n- For the statistics string of a trainingsite (shown in the mapview near the\n  trainingsite when S has been pressed), replace strings like \"upgrade_evade_0\"\n  (untranslated) with strings like \"Upgrade evade 0\" (translated). (svn:r3595)\n- Fix bugs that ware/worker types were identified by their temporary index\n  value instead of their permanent name in some places in savegames. The\n  temporary index values may not be the same when the game is loaded again,\n  while type names should be the same. (svn:r3593, svn:r4343)\n- Implement automatic recursive road removal. When a player holds down Ctrl\n  when ordering (or confirming, if applicable) the removal of flag or road, do\n  a recursive removal. If a road removal command is given with the recursive\n  option, all roads between the start and end flags are removed. Then those\n  flags that become dead ends are removed recursively. A flag is a dead end if\n  it does not have a building and roads to at most 1 other flag. (svn:r3591)\n- Make immovable animation times random. (svn:r3635)\n- Implement natural reproduction for trees. Instead of just growing up and then\n  idling forever, they seed new trees and eventually die. Dead trees disappear\n  after a while. Different tree species have different advantages on different\n  terrain types. This makes it possible for several tree species to survive by\n  occupying different niches. Increase the working radius of\n  woodcutters/lumberjacks from 8 to 10. This makes it easier to cover large\n  areas with a few of them. This is now recommended to keep an area clear of\n  trees. (svn:r3591, svn:r3610, svn:r3735, svn:r3786, svn:r3828)\n- Forbid immovable programs to have transform commands that replace an\n  immovable with one of the same type. (svn:r3647)\n- Get rid of line numbers in immovable programs. (svn:r3591)\n- In the worker list window of productionsites; if a worker is missing, show\n  \"(vacant)\" if the request for it is open and \"(coming)\" if the request is in\n  transfer. (svn:r3591)\n- Create a few different player initializations and allow choosing one for each\n  player when the game is configured. The default initialization is a\n  headquarters with the usual set of wares/workers/soldiers, so the default\n  behaviour is unchanged. There is another player initialization called\n  castle_village that creates a castle (or citadell, depending on tribe) and a\n  village around it with a warehouse loaded with some wares/workers/soldiers\n  and some basic production and training buildings. (svn:r3629)\n- Do not automatically create a headquarters for each player in scenarios. This\n  must now be done explicitly with events. Change the existing scenarios\n  accordingly (and use new headquarter graphics in some of them). (svn:r3591,\n  svn:r3617, svn:r3737, svn:r4249, svn:r4299)\n- Implemented logic for finding a suitable location for a building that will be\n  created with an event. (svn:r3629)\n- When a warehouse is created through an event, allow configuring exactly how\n  many of each type of ware, worker and soldier that should be created with the\n  warehouse. (svn:r3591)\n- When a productionsite is created through an event, allow configuring exactly\n  which of the wares and workers that should be created with the\n  productionsite. (svn:r3591, svn:r3630)\n- When a military-/trainingsite is created through an event, allow configuring\n  exactly how many soldiers at each combination of strength levels that should\n  be created with the site. (svn:r3628, svn:r3629)\n- The builder does no longer enter the building and see the surroundings for a\n  moment when he has completed the construction. Instead he leaves directly.\n  (svn:r3590)\n- Added new portrait pictures for the campaign maps (svn:r3581, svn:r3632)\n- Allow multiple AI implementations (svn:r3574)\n- Implement a debug console and add a \"switchplayer\" command (svn:r3573,\n  svn:r4370, svn:r4371)\n- Fix bug that the back buttons in the campaign selection UI had the wrong\n  background. (svn:r3619)\n- Improvements of full screen menu UI (svn:r3579, svn:r3581)\n   * Make fullscreen menus dynamic resizable. Now the menus use the same\n     resolution as the whole game. Still the resolution must be saved in the\n     config, so it is not yet possible to resize via mouse.\n   * Clean up menu design, make some menus more straight and intuitive and\n     follow the same alignment in similar menus.\n   * Add note to intro screen, so players are not confused anymore, whether\n     Widelands is still loading.\n   * Introduce config option and commandline parameter \"ui_font\". This option\n     allows the user, to use a different font in the fullscreen menus, which\n     can be quite important if the resolution is very low and the serif font is\n     nearly unreadable. Besides a path to a TTF file relative to\n     <widelands-data>/fonts/ the values \"sans\" and \"serif\" are accepted. If an\n     invalid parameter was given Widelands falls back to UI_FONT_NAME.\n- Made the minimap remember its display options during the session (svn:r3572)\n- Implemented generation of browsable HTML from game data. (svn:r3548)\n- Made it possible to define a default target quantity for a ware type and set\n  target quantities in the game. (svn:r3543)\n- Made Ctrl+S bring up the save game dialog in both gameplay and replay. Added\n  save button in replay watcher. (svn:r3542)\n- Fixed Trigger_Time (and replaced Trigger_Null with it). Introduced\n  Event_Set_Timer. (svn:r3541, svn:r4485)\n\n## Build 13\n- Count casualties/kills, military/civilian buildings lost/defeated and present\n  them in the general statistics menu (except for civilian buildings defeated,\n  which is omitted from the user interface) (svn:r3395, svn:r3407).\n- Improved map options menu (svn:r3328).\n- Improved progresswindow use and added new loading screens (svn:r3249,\n  svn:r3253, svn:r3275, svn:r3315, svn:r3316).\n- Added menu for editor to the mainmenu (svn:r3248).\n- Improved save game dialog (svn:r3185, svn:r3189).\n- Improved mapselect and launchgame menu (svn:r3243, svn:r3246, svn:r3247,\n  svn:r3283, svn:r3290).\n- Improved ingame UI (svn:r3224).\n- Implemented \"/me\" command for multiplayer chat (svn:r3223).\n- Improved multiplayermenu (svn:r3218, svn:r3260, svn:r3261, svn:r3288,\n  svn:r3289).\n- Improved optionsmenu and added possibility to set autosave interval\n  (svn:r3215).\n- Implemented option for maximum FPS to reduce CPU-usage (svn:r3210, svn:r3213,\n  svn:r3214, svn:r3215, svn:r3220).\n- Improved editor new map dialog (svn:r3172, svn:r3331).\n- Make automatic roadbuilding mode after creation of non-connected flag\n  optional (svn:r3177).\n- Improved production program handling (svn:r3373, svn:r3384):\n   * Eliminate the need for line numbers in the programs.\n   * Fix bug that the consume command required that all wares in a\n     consume-group must be of the same type. For example the command \"2=consume\n     smoked_fish,smoked_meat 2\" required 2 smoked_fish or 2 smoked_meat. Now it\n     will also work if there is only one of each.\n   * Change the syntax of a consume-group to ware1[,ware2[,...]][:quantitiy]\n     (for example \"smoked_fish,smoked_meat:2\").\n   * Extend the consume command to take any number of consume-groups (for\n     example smoked_fish,smoked_meat:2 bread:2\"). This means that unless all\n     consume-groups can be satisfied, nothing is consumed when the command\n     fails. This will fix many bugs in the game data where programs had for\n     example \"2=consume smoked_fish,smoked_meat 2\" and \"3=consume bread 2\". If\n     there was not 2 bread, it would consume 2 smoked_fish or 2 smoked_meat and\n     then fail.\n   * Get rid of the command check. It was only a work-around for the previously\n     deficient command consume (and some programs forgot to use it).\n   * Implement the new command return. It can return from a program. There are\n     3 different return values; Failed, Completed and Skipped. Only programs\n     returning Failed and Completed will affect statistics. A program that\n     reaches the end will be considered to have implicitly returned Completed.\n     The return command can optionally take a condition. Currently only two\n     conditions are supported; \"economy needs ware_type\" and \"workers need\n     experience\". The former will allow a program to have a command\n     \"return=skipped unless economy needs marblecolumn\". It will prevent Game\n     Over as a result of a production deadlock on marble when a user forgets to\n     turn off a stonemason for a while. This fixes the huge problem with\n     production deadlocks that hit every new player in their first games and\n     every experienced player once in a while. The condition makes a query to\n     the economy, which now simply checks if there is no warehouse supplies the\n     ware type. This can of course be made much smarter later. The latter is\n     used in the barbarian micro-brewery to let it practice making beer until\n     the brewer has become a master_brewer even if the economy does not need\n     any beer.\n   * Extend the produce command to take any number of ware types with\n     quantities.\n   * Fix the call command to validate that the called program exists. This\n     requires changing declaration order in some data files (for example if\n     \"work\" calls \"seed\", \"program=seed\" must come before \"program=work\" in the\n     \"global\" section of the productionsite definition. (However the definition\n     order of the programs does not matter.) This fixes the bug that a call\n     command may fail at run-time because the called program does not exist.\n   * Extend the call command with an optional error handling specification\n     (call=<program_name> [on failure {ignore|repeat|fail}]). It will make it\n     possible to ignore a failure of a called program and continue the calling\n     program, or repeat the failed program until it succeeds.\n   * Extend the sleep and animate commands. If no duration is given as the last\n     parameter, the return value from a previous action is used for duration.\n     This makes it possible to for example let the mining command calculate how\n     long the following sleep/animation should last, depending on ore\n     concentration and mining depth.\n   * Get rid of the set command and the associated catch and nostats flags.\n   * Fix the mine command to parse and validate its parameters at parse-time\n     instead of at run-time. This fixes the bug that the game engine could fail\n     with the message \"Should mine resource <resource_type>, which does not\n     exist in world. Tribe is not compatible with world!!\" at run-time the\n     first time a mining command is executed.\n   * Fix most other commands that had insufficient validation or did parsing at\n     run-time (for example the consume command reparsed its wares at each\n     execution).\n   * Optimize the parsing by eliminating needless string copying.\n- Rename the building property \"enhance_to\" to \"enhancement\" and validate that\n  the given building type exists (svn:r3373).\n- Improved editor handling of bobs and animals, so they can not be placed on\n  invalid locations (svn:r3319, svn:r3321).\n- Implemented loading of savegames in multi player (svn:r3266, svn:r3270,\n  svn:r3271)\n- Only allow attacking seen buildings (svn:r3173).\n- Improved computer player behaviour (svn:r3209).\n- Update and cleanup of tribes economies (svn:r3202, svn:r3203, svn:r3204,\n  svn:r3205, svn:r3206, svn:r3207, svn:r3211, svn:r3237, svn:r3239, svn:r3241,\n  svn:r3257, svn:r3258, svn:r3269, svn:r3272, svn:r3294, svn:r3307).\n- Introduced automatic update of Campaign-list via campaign-menu (svn:r3197,\n  svn:r3198).\n- Added a new in game song\n- Added global objects usable in every world (svn:r3308, svn:r3310, svn:r3311).\n- Added 12 new maps (9 from map contest) (svn:r3226, svn:r3298, svn:r3305).\n- Added atlantean building graphics (svn:r3278, svn:r3295, svn:r3300,\n  svn:r3309, and many more).\n- Added a lot of new sounds and integrated them in the game (svn:r3231,\n  svn:r3232, svn:r3415, svn:r3419, svn:r3439).\n- Rework of campaign missions (svn:r3228, svn:r3233, svn:r3236, svn:r3242).\n- Fix bugs in parsing of building types's buildcosts and inputs. Check that the\n  ware types exist and are not duplicated and that the quantities are within\n  range (svn:r3373).\n- Fix bug in parsing of productionsite types' outputs. Check that the ware\n  types exist and are not duplicated (svn:r3373).\n- Fix bugs in parsing of productionsite types', critter_bob types' and worker\n  types' programs. If a program was declared twice, it was parsed twice and the\n  memory used to store the first instance was leaked (svn:r3373).\n- Fixed bugs with drop-soldier commands: If such a command was given and then\n  the game was saved before the command was executed (because the game was\n  paused), the command was saved incorrectly (svn:r3451, svn:r3456). And even\n  if the savegame would have had such a command correctly saved, the loading\n  code would not have recognized it (svn:r3456).\n- Removed the trainingsite options window. The \"Make heros\" button was\n  suspected of being able to cause desync in network games (svn:r3452).\n- Fixed bugs that attack, change-soldier-capacity and set-ware-priority\n  commands were not recognized when encountered in savegames (svn:r3454,\n  svn:r3456, svn:r3455).\n- Fixed bug that set-ware-priority commands were saved as enhance-building\n  commands (svn:r3455).\n- Change game rule: Forbid upgrading any building to any type of building. Only\n  allow upgrading to one of the defined enhancements. This is the behaviour\n  that was intended and that the user interface obeys. Now also the game logic\n  enforces it. This prevents users from circumventing the user interface and do\n  arbitrary building upgrades, which other players may consider cheating in a\n  network game (svn:r3457).\n- Fix program crash (or worse) when a worker type was declared to have an\n  ingredient that had not been defined (svn:r3459).\n- Forbid declaring that a building can be enhanced to its own type or the\n  special type constructionsite (svn:r3460, svn:r3461).\n- Do not let the constructionsite crash the game if a building type did not\n  define a build animation. Use the idle animation instead (svn:r3462).\n- Do not crash because of division by 0 when building a building without\n  buildcost (svn:r3462).\n- When building a building without buildcost, complete it immediately instead\n  of never (svn:r3462).\n- Check for mine and size mismatch when parsing building enhancement\n  definitions. This prevents crashes at run-time (svn:r3463).\n- Fixed bug #1792379 - little trees set with editor do not grow (svn:r3317).\n- Fixed bug #1913902 - collosseum now trains evade 0 and 1 (svn:r3303).\n- Fixed bug that upgraded worker were used in buildings instead of training new\n  simple ones (svn:r3304).\n- Fixed crossplatform network bug (win32 path on unix) (svn:r3293, svn:r3427,\n  svn:r3429).\n- Fixed disk_filesystem handling on win32(svn:r3284, svn:r3285, svn:r3286,\n  svn:r3287, svn:r3291).\n- Fixed strange, unwanted behaviour of multilined editboxes (svn:r3281,\n  svn:r3282).\n- Fixed loading of settlers 2 maps in widelands (svn:r3234, svn:r3235,\n  svn:r3238, svn:r3250).\n- Fixed bug that caused segmentation fault when executing./widelands\n  --editor=nonexistent_file (svn:r3335).\n- Fixed bug that caused segmentation fault when executing./widelands\n  --scenario=nonexistent_file (svn:r3336).\n- Fixed bug that caused invalid use of uninitialized memory when an animation\n  configuration defined playercolor=true but a mask file was missing\n  (svn:r3347).\n- Fixed bug #1968196 - Scenario-maps are not loaded as one (svn:r3227).\n- Fixed bug #1900477 - Objectives description are not translated and objective\n  names are not included in PO templates (svn:r3225, svn:r3229).\n- Fixed hotspots of animals (svn:r3170).\n- Fixed editor height tool dialogs (svn:r3171).\n- Fixed language-settings-menu for Linux - now Widelands sets\n  system-language-variable correctly (svn:r3193, svn:r3252, svn:r3262).\n- Fixed bug that prevented releasing the last soldier from a trainingsite\n  (svn:r3179).\n- Fixed memory access errors in the game logic, causing segmentation fault or\n  any kind of strange undefined behaviour (svn:r3184, svn:r3365).\n- Fixed bug that the game would abort if an attacking soldier could not find a\n  path to the target (svn:r3382).\n- Fixed memory access error in save game dialog (svn:r3185).\n- Fixed many memory access errors when trying to read missing sections in\n  configuration files (svn:r3195).\n- Fixed bug that the computer player did not check if a planned large building\n  would be completely inside his borders (svn:r3191).\n- Fixed bugs that the empire wine bush and barbarian flax and reed lived\n  forever, blocking the map (svn:r3190, svn:r3527).\n- Fixed bug that it was possible to cheat when destroying an enhanceable\n  building by first ordering and upgrade and then immediately ordering the\n  destruction of the enhancement-constructionsite. This avoided the burning\n  phase, which made the space available immediately. (svn:r3513)\n- Fixed bug that replay was stopped before all commands had been executed.\n  (svn:r3539)\n\n\n## Build 12\n- New feature: Additional scenario event types and trigger types.\n- New feature: Flags are automatically placed when holding down Ctrl while\n  building a road.\n- New feature: Load maps directly into the editor from the command line\n  (widelands --editor=<filename>).\n- New feature: Navigation in edit boxes.\n- New feature: Multiplayer games.\n- New and greatly improved animations for a number of workers.\n- New animals and new animations for existing animals.\n- New singleplayer/multiplayer map.\n- New tribe Atlantids.\n- Improved the usability of scrollbars, listselects and tables.\n- Improvements of Campaign UI (show only revealed campaigns/scenarios).\n- Improvements of all single-/multiplayer maps (rebalancing resources).\n- Improved the building statistics menu.\n- Improved the scenarios to make use of new features.\n- Improved the performance of terrain rendering.\n- Improved usability of roadbuilding.\n- Improved the handling of player colours.\n- Improved recovery from bugs during gameplay.\n- Improved the battle system.\n- Fixed bugs: Several invalid memory accesses, which may have caused random\n  bugs, such as [#1508297 (Needed images sometimes not saved with\n  game)](http://sourceforge.net/tracker/index.php?func=detail&aid=1508297&group_id=40163&atid=427221).\n- Fixed bug: Workers that become fugitives have a higher chance of finding back\n  to a warehouse. A flag connected to a warehouse must be close to the worker.\n- Fixed bug that the objectives menu was not updated when objectives were\n  fulfilled during the game.\n- Fixed bug that workers would enter a building before arriving at it (entering\n  it when passing the flag in front of the building). This caused the worker to\n  start seeing from the building too early.\n- Fixed network support for direct IP and LAN games.\n- Fixed many gamelogic bugs.\n- Removed support for GGZ. Please use the forums and IRC channel to meet for\n  multiplayer games.\n- Many other bugfixes, optimizations and cleanups.\n\n## Build 11\n- New feature: Game Tips during loading\n- New feature: Progress message windows (Loading-screens)\n- New feature: Fog of war\n- New feature: Autosave (and emergency-save)\n- New feature: Visible Range for bobs and buildings\n- New feature: Replay-function\n- New feature: volume-sliders for sound and music\n- New animations for animals\n- New animations for bobs (few trees are falling after they are choped)\n- Improvements of the transportationsystem (f.e. ware priority-buttons)\n- Improvements of the S2-Map-importation-system.\n- Improvements of Multiplayercode.\n- Improvements of Campaign UI\n- Improvement of \"growing tree patch\" (seperation of different steps)\n- Improvement of single-line-edit-box handling (buttons are not locked anymore)\n- Improvement of Ware-image visualisation program.\n- Added 2 new multiplayer maps\n- Fix of bug 1633431 (Attacking headquarters crashes game.)\n- Fix of bug 1451851 (Upgrade building while delievering to/from cause\n  crash/hang)\n- Fix of bug 1690070 (ware: can not move from building A to B )\n- Many other bugfixes\n\n\n## Build 10\n- Addition of new tribe \"The Empire\"\n- Tribe \"Barbarians\" was completely overhauled\n- New blender graphics for the Barbarians and the Empire by bithunter32\n- New blender graphics for the Empire by !AlexiaDeath\n- Addition of new worlds (Blackland, winterland and desert)\n- Addition of few new maps\n- Addition of two new Empire-campaign-maps\n- Addition of three new ingame music-tracks\n- A lot of localization-bugs were fixed and new strings for translation were added.\n- Widelands now supports 14 languages (cz_CZ, de_DE, en_EN, es_ES, fi_FI,\n  fr_FR, gl_ES, he_HE, hu_HU, nl_NL, pl_PL, ru_RU, sk_SK, sv_SE)\n- New feature: Mouse-over-hover-help\n- New feature: Tribe ware encyclopedia\n- Mousewheel support integrated (textarea)\n- Now using new fonts (!FreeSans and !FreeSerif) licensed under GPL\n- Battlecode was reworked\n- Menu-resolution set to 800x600 (before 640x480) and added new splash\n- Work on ingame window-system\n- Richtext-handler was overhauled\n- A lot of menu texts and alignments were fixed\n- A lot of new button-, icon-, background- and campaign-graphics added.\n- A lot of code-cleanup\n- Bug fixes, bug fixes, bug fixes\n\n\n## Build 9half\n- Updated Campaign Missions\n- Added proper localization support (language selectable in options menu)\n- Font renderer now renders multiple newlines correctly and in richtext accepts\n  <br> as newline\n- added localization patch by Josef + beginning of localization\n- f now triggers fullscreen ingame\n- added new maps from winterwind\n- implemented new trigger system. This invalidates every scenario, campaign and\n  map.\n- save now changes into zip files, added option nozip for debugging reasons\n- save changed to save into directory\n- added trigger conditionals\n- Patch to fix graphic problems:\n   * Alpha instead of clrkey\n   * Fixed all bugs with !MacOSx\n   * Caching landscape renderer speeds things up\n- Sound patch + Music\n- RTF Renderer\n- show workarea preview\n- new font renderer\n\n\n## Build 9\n- Chat for multiplayer\n- Global Stock, Menu structure reworked\n- General statistics menu\n- Building statistics menu\n- Ware Statistics Menu\n- Minor changes in barbarians conf files (Descnames mainly)\n- added road textures\n- Initial Version of game server. Only chatting.\n- First version of barbarians tribe comitted\n- Added training site/military patch by Raul Ferriz\n- fixed \"Worker Type 11 not found\" bug\n- new Tree Graphics from Wolfgang Weidner\n- Added patch from Florian Falkner\n   * new Option Dialog UIListselect can have now a selection-indicator\n     !WatchWindow\n   * functionality is user selectable\n- Windows can be minimized (middle mouse or Ctrl+left mouse)\n- fixed crash when using 32-bit fullscreen mode under win32\n\n\n## Build 8\n- some UI ergonomics (new mapselect dialog,\n  double click function in listselects)\n- resources and default resources support\n- loading/saving of maps\n- preliminary TT-Font support\n- enhancing buildings support\n- build animation support\n- editor events/trigger\n- editor player menu\n- editor bob tool\n\n\n## Build 7\n- many new buildings\n- improved in-game graphics\n- improved in-game UI\n- movement speed depends on slope of terrain\n- improved watch window functionality\n- improved the transport system\n- added a 32 bit software renderer\n- improved rendering quality\n- added infrastructure for real-time in-game debugging and inspection\n- various code cleanups and bug fixes\n\n\n## Build 6\n- graphics reworked\n- added functionality for the first few buildings\n- reworked transport code\n- added multiselect option for editor's set texture tool\n\n\n## Build 5\n- added Immovable Tool in editor\n- added Map_Loader support\n- added support for multifield-fieldsels (for editor and to select areas)\n- added height tools in the editor\n- added item ware code\n- added ware transportation (carriers stay on roads and can carry wares)\n- construction sites are implemented\n- added support for more (and most importantly: compressed) graphics formats\n\n\n## Build 4\n- added Warehouse options window\n- added ware requests\n\n\n## Build 3\n- added !DirAnimations for convenience\n- added Economy code\n- added record/playback code\n- added wares code\n- added worker code\n- use different background images for different menus\n\n\n## Build 2\n- options handling redesigned\n- introduced System\n- added keyboard input\n- build symbols react to objects now (can not build next to stones etc...)\n- only use 8 different types of trees (like Settlers 2)\n- unique windows now remember their position\n- improved fieldaction mouse placement for fast click-through\n- new structure for tribe data\n- new terrain textures\n- added \"fps\" key to animations\n- renderer uses player colors\n- added flags\n- added road building\n- split of moving and non-moving objects in hierarchy\n\n\n## Build 1\n* First release\n\n"
        },
        {
          "name": "NEXT_STABLE_VERSION",
          "type": "blob",
          "size": 0.00390625,
          "content": "1.3\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 7.71484375,
          "content": "# Widelands\n\n[![Build Status AppVeyor](https://ci.appveyor.com/api/projects/status/github/widelands/widelands?branch=master&svg=true)](https://ci.appveyor.com/project/widelands-dev/widelands)\n[![Code Quality](https://github.com/widelands/widelands/workflows/Formatting%20your%20code/badge.svg)](https://github.com/widelands/widelands/actions?query=workflow%3A%22Formatting+your+code%22)\n[![Build](https://github.com/widelands/widelands/workflows/Build/badge.svg)](https://github.com/widelands/widelands/actions?query=workflow%3ABuild)\n[![Mirrored on Launchpad](https://github.com/widelands/widelands/workflows/Launchpad%20Mirror/badge.svg)](https://code.launchpad.net/~widelands-dev/widelands/trunk)\n\nWidelands is a free, open source real-time strategy game with singleplayer campaigns and a multiplayer mode.\nThe game was inspired by Settlers II™ (© Bluebyte) but has significantly more variety and depth to it.\n\n![Widelands Screenshot](https://www.widelands.org/static/img/welcome.jpg)\n\n\n## License [![License](https://img.shields.io/github/license/widelands/widelands.svg?color=blue)](COPYING)\n\nGPL v2+. Some assets are released under various Creative Commons licenses – see the respective folders.\n\n## Download\n\nOn how to download Widelands, see https://www.widelands.org/wiki/Download/\n\n## Compiling\n\nWe support compiling Widelands for Linux, Windows under MSys2 and MSVC, and MacOS with GCC >= 8 or Clang/LLVM >= 7, though it might work with other compilers too. We have more detailed documentation available at: https://www.widelands.org/wiki/BuildingWidelands/\n\n\n### Dependencies\n\nYou will need to install the following dependencies:\n\n*  [libSDL](https://www.libsdl.org/) >=2.0\n*  [libSDL_image](https://www.libsdl.org/projects/SDL_image)\n*  [libSDL_mixer](https://www.libsdl.org/projects/SDL_mixer) >= 2.0\n*  [libSDL_ttf](https://www.libsdl.org/projects/SDL_ttf) >= 2.0\n*  [gettext](https://www.gnu.org/software/gettext/gettext.html)\n* libiconv (on same mirrors as gettext)\n*  [zlib](https://www.zlib.net/)\n*  [libpng](http://www.libpng.org/pub/png/libpng.html)\n*  [Asio](https://think-async.com/Asio/)\n*  [Python](https://www.python.org) >= 1.5.2\n*  [libglew](http://glew.sourceforge.net) or [glbinding](https://glbinding.org/)\n\n\n### Compiling with our convenience script\n\nYou can then compile by running our convenience script.\n\n| Command | Purpose |\n| --- | --- |\n| `./compile.sh` | Full debug build |\n| `./compile.sh -r -w` | Release build |\n| `./compile.sh -e -w` | Release build with debugging symbols |\n| `./compile.sh -h` | List available options |\n\nWhen compiling has finished, you can call Widelands with\n\n~~~~\n./widelands\n~~~~\n\n### Compiling with CMake\n\nYou can also call CMake manually:\n\n~~~~\nmkdir build\ncd build\ncmake ..\nmake\n~~~~\n\nWhen compiling has finished, you can call Widelands with\n\n~~~~\ncd ..\nmv build/src/widelands .\n./widelands\n~~~~\n\nWe have various CMake options available. For example, to create a release build, call\n\n~~~~\ncmake -DCMAKE_BUILD_TYPE=Release ..\n~~~~\n\nFor using the Ninja build system, call\n\n~~~~\nmkdir build\ncd build\ncmake -G Ninja ..\nninja\n~~~~\n\nDepending on the Ninja installation, the last line can also be `ninja-build`.\n\n#### CMake options\n\nNote that CMake options are prefixed with `-D`. These are the available options:\n\n| Name | Values | Default| Function\n| --- | --- | --- | --- |\n| `CMAKE_BUILD_TYPE` | `Debug`/`Release`/`RelWithDebInfo` | `Debug` | Create a release or debug build |\n| `OPTION_ASAN` | `ON`/`OFF` | `ON` for Debug builds /`OFF` for Release builds | Use AddressSanitizer. Switching this off only works once. You will have to clear the `build` directory if you want to switch this off again in a later build. |\n| `OPTION_BUILD_CODECHECK` | `ON`/`OFF` | `ON` | Build codecheck. Only available in Debug builds. |\n| `OPTION_BUILD_WEBSITE_TOOLS` | `ON`/`OFF` | `ON` | Build website-related tools |\n| `OPTION_BUILD_TESTS` | `ON`/`OFF` | `ON` | Build unit tests |\n| `CMAKE_INSTALL_PREFIX` | A directory | See [CMake documentation](https://cmake.org/cmake/help/latest/variable/CMAKE_INSTALL_PREFIX.html) | Define the target directory for the \"install\" target, e.g. `-DCMAKE_INSTALL_PREFIX=~/widelands-install`. |\n| `WL_INSTALL_BINDIR` | A directory | `${CMAKE_INSTALL_PREFIX}/games` | Define the destination of executables files (if installing) |\n| `WL_VERSION` | A version string | Autodetected from git/bzr, or set by adding a `VERSION` file | Define the Widelands version |\n| `USE_XDG` | `ON`/`OFF` | `ON` | Follow XDG-Basedir specification. Only available on Linux. |\n| `OPTION_USE_GLBINDING` | `ON`/`OFF` | `OFF` | Use glbinding instead of GLEW |\n| `OPTION_GLEW_STATIC` | `ON`/`OFF` | `OFF` | Use static GLEW Library |\n| `OPTION_FORCE_EMBEDDED_MINIZIP` | `ON`/`OFF` | `OFF` | Used embedded minizip sources (skip checking for installed minizip library) |\n| `NEEDS_EXTERNAL_FILESYSTEM` | `ON`/`OFF` | Autodetected from compiler version | Whether `std::filesystem` needs to be linked against an extra library |\n\n#### make/ninja targets\n\nYou can add targets to the `make` or `ninja` command, e.g. `make codecheck` to only run the code check suite. These are the available targets:\n\n| Name | Function |\n| --- | --- |\n| `ALL` or no target | Compile everything, up to executable with the settings from the `cmake` call |\n| `codecheck` | Run the codechecks |\n| `doc` | Generate Doxygen documentation. Currently only with Build Type Debug, but this is easily changed if necessary. |\n| `install` | Install into the target dir, this is `/usr/local` per default (you need root privileges!) unless you change it (see CMake options above) |\n\n## Contributing\n\nWe have some instructions on how to use Git to help you if you're new to Git: https://www.widelands.org/wiki/GitPrimer/\n\n### Code\n\nThe master branch and all issues and pull requests are mirrored bidirectionally between our developer environments on Codeberg and GitHub by bunnybot. Bunnybot also formats the code (C++, Lua, and Python) in all mirrored branches.\n\nWe follow the [Google Styleguide](https://google.github.io/styleguide/cppguide.html).\n\n### Scenarios\n\nFor scripting scenarios, see https://www.widelands.org/documentation/lua_index/\n\n### Art\n\nFor contributing art, see https://www.widelands.org/wiki/GraphicsDevelopment/\n\n### Translations\n\nFor contributing translations, see https://www.widelands.org/wiki/TranslatingWidelands/\n\n### Testing\n\nFor helping with testing, see https://www.widelands.org/wiki/TestingBranches/\n\n### Triaging Issues\n\nFor helping with issue management, see https://www.widelands.org/wiki/TriagingBugs/\n\n## Directory Structure\n\n| Directory | Contents |\n| --- | --- |\n| cmake | Build system and codecheck rules |\n| data | The game's data files. Images, sounds, music, scripting, maps, campaigns, tribes, ... |\n| debian | Packaging for Debian-based Linux distributions |\n| doc | Sphinx [documentation](https://www.widelands.org/documentation/index.html) |\n| po | Translation files |\n| [src](https://github.com/widelands/widelands/tree/master/src) | C++ source code |\n| test | Scripted maps for our regression test suite |\n| utils | Diverse utilities: Building translations, code formatting, packaging Mac & Windows, ... |\n\n\n## Obtaining MacOS and MS-Windows builds and testsuite runs\n\nAll pushes to master will be built on AppVeyor. Pull request branches are deployed for MS-Windows using a GitHub action. To obtain MS-Windows builds if you do not wish to open a pull request, temporarily add the name of your branch to the `branches` section in `appveyor.yml`. This will not work if the branch is in a fork though.\n\nAll pull request branches as well as master are additionally deployed for MacOS, and a testsuite checks them under various compilers. To obtain MacOS builds or testsuite results, temporarily add the name of your branch to the `branches` section in `.github/workflows/build.yaml`. This *does* work for branches in forks as well.\n"
        },
        {
          "name": "appveyor.yml",
          "type": "blob",
          "size": 2.81640625,
          "content": "###################################\n#   Widelands.org                 #\n#                                 #\n#   Appveyor build configuration  #\n###################################\n\nimage: Visual Studio 2022\n\ninit:\n  - cmd: \"IF \\\"%PLATFORM%\\\" == \\\"x86\\\" (set MINGWPATH=C:\\\\msys64\\\\mingw32\\\\bin& set MINGWSUFFIX=i686& set MINGWINCLUDE=C:\\\\msys64\\\\mingw32\\\\include& set BITS=32) ELSE (set MINGWPATH=C:\\\\msys64\\\\mingw64\\\\bin& set MINGWSUFFIX=x86_64& set MINGWINCLUDE=C:\\\\msys64\\\\mingw64\\\\include& set BITS=64)\"\n\ninstall:\n  # Installing various utilities\n  # As of 2019-12-06 we have to install 'chocolatey-core.extension' beforehand.\n  # Otherwise installing 'InnoSetup' will fail.\n  - choco install -y chocolatey-core.extension\n  - choco install -y InnoSetup\n  - cmd: \"set PATH=%MINGWPATH%;C:\\\\msys64\\\\usr\\\\bin;C:\\\\Program Files (x86)\\\\Inno Setup 5;%PATH%\"\n  - cmd: \"set CC=%MINGWPATH%\\\\gcc.exe\"\n  - cmd: \"set CXX=%MINGWPATH%\\\\g++.exe\"\n  # deleting broken repo from mirrorlist (needs to be repeated after first update if needed)\n  # - cmd: \"bash --login -c \\\"sed -i 7,8d C:/msys64/etc/pacman.d/mirrorlist.msys\\\"\"\n  # - cmd: \"bash --login -c \\\"sed -i 7,8d C:/msys64/etc/pacman.d/mirrorlist.mingw32\\\"\"\n  # - cmd: \"bash --login -c \\\"sed -i 7,8d C:/msys64/etc/pacman.d/mirrorlist.mingw64\\\"\"\n  # Update msys2 system (twice, first run does system packages)\n  - cmd: \"bash --login -c \\\"pacman -Suuyy --noconfirm\\\"\"\n  - cmd: \"bash --login -c \\\"pacman -Suuyy --noconfirm\\\"\"\n  # Installed required libs\n  - cmd: \"bash --login -c \\\"%APPVEYOR_BUILD_FOLDER:\\\\=/%/install-dependencies.sh msys%BITS% --noconfirm\\\"\"\n  # Downgrade incompatible packages to working version\n  # - cmd: \"bash --login -c \\\"pacman --noconfirm -U https://repo.msys2.org/mingw/mingw%BITS%/mingw-w64-%MINGWSUFFIX%-SDL2_image-2.8.0-1-any.pkg.tar.zst\\\"\"\n\nshallow_clone: false\n\nbranches:\n  only:\n    - master\n\nskip_tags: true\n\n\nbuild_script:\n  - cmd: cd %APPVEYOR_BUILD_FOLDER%\n  - cmd: md build\n  - cmd: cd build\n  # detect version\n  - cmd: set /p WIDELANDS_NEXT_VERSION=<%APPVEYOR_BUILD_FOLDER%\\NEXT_STABLE_VERSION\n  - cmd: set WIDELANDS_SETUP_NAME=Widelands-%CONFIGURATION%-%PLATFORM%-%WIDELANDS_NEXT_VERSION%~git(%APPVEYOR_REPO_COMMIT:~0,7%@%APPVEYOR_REPO_BRANCH%)\n  # finally start the build\n  - cmd: \"cmake -G \\\"Ninja\\\" -DCMAKE_BUILD_TYPE=%CONFIGURATION% -DOPTION_BUILD_WINSTATIC=ON -DOPTION_BUILD_WEBSITE_TOOLS=OFF -DOPTION_ASAN=OFF -DOPTION_BUILD_CODECHECK=OFF -DCMAKE_JOB_POOLS=\\\"linking=1\\\" -DCMAKE_JOB_POOL_LINK=linking %APPVEYOR_BUILD_FOLDER%\"\n  - cmd: \"cmake --build .\"\non_success:\n  - cmd: strip -sv %APPVEYOR_BUILD_FOLDER%\\build\\src\\widelands.exe\n  - cmd: ISCC /q /o%APPVEYOR_BUILD_FOLDER% /f%WIDELANDS_SETUP_NAME% c:\\projects\\widelands\\utils\\windows\\innosetup\\Widelands.iss\n  - appveyor PushArtifact %APPVEYOR_BUILD_FOLDER%\\%WIDELANDS_SETUP_NAME%.exe\n\nplatform:\n  - x64\n  - x86\n\nconfiguration:\n  - Release\n  - Debug\n"
        },
        {
          "name": "asan_3rd_party_leaks",
          "type": "blob",
          "size": 0.2421875,
          "content": "# List of known memory leaks in 3rd party libraries which we do not want ASan to report.\n\n# SDL2\nleak:libSDL2\n\n# Eris\nleak:src/scripting/persistence.cc\n\n# Various graphics drivers and X11 stuff.\nleak:libdbus\nleak:libnvidia-glcore\nleak:radeonsi_dri\n"
        },
        {
          "name": "cmake",
          "type": "tree",
          "content": null
        },
        {
          "name": "compile.sh",
          "type": "blob",
          "size": 20.908203125,
          "content": "#!/bin/sh\n\nprint_help () {\n    # Print help for our options\n    echo \"###########################################################\"\n    echo \" \"\n    echo \"  Because of the many different systems Widelands\"\n    echo \"  might be compiled on, we unfortunally can not\"\n    echo \"  provide a simple way to prepare your system for\"\n    echo \"  compilation. To ensure your system is ready, best\"\n    echo \"  check https://www.widelands.org/wiki/BuildingWidelands\"\n    echo \" \"\n    echo \"  You will often find helpful hands at our\"\n    echo \"  * IRC Chat: https://www.widelands.org/webchat/\"\n    echo \"  * Forums: https://www.widelands.org/forum/\"\n    echo \"  * Mailinglist: https://www.widelands.org/wiki/MailLists/\"\n    echo \" \"\n    echo \"  Please post your bug reports and feature requests at:\"\n    echo \"  https://github.com/widelands/widelands/issues\"\n    echo \" \"\n    echo \"###########################################################\"\n    echo \" \"\n    echo \"Per default, this script will create a full debug build.\"\n    echo \"Unless explicitly switched off, AddressSanitizer will\"\n    echo \"be used as well with debug builds.\"\n    echo \" \"\n    echo \"You can override the defaults locally by creating a file\"\n    echo \"called '.compile_defaults' listing your desired command\"\n    echo \"line options in a single line. Only the first line of the\"\n    echo \"file is read, further lines can be used as comments.\"\n    echo \"The 'COMPILE_DEFAULTS' environment variable can be set to\"\n    echo \"the name of a different file to use, or if set to a\"\n    echo \"non-existent name, to use the built-in defaults.\"\n    echo \" \"\n    echo \"The following options are available:\"\n    echo \" \"\n    echo \"-h or --help          Print this help.\"\n    echo \"-q or --quiet         Suppress most of compile.sh's output.\"\n    echo \"-v or --verbose       Make compile.sh's output verbose.\"\n    echo \"-n or --dry-run       Only print commands, do NOT run cmake nor compile\"\n    echo \"                      anything.\"\n    echo \" \"\n    echo \"Omission options and their overrides:\"\n    echo \" \"\n    echo \"-w or --no-website    Omit building of website binaries.\"\n    echo \"+w or --with-website  Enable building of website binaries.\"\n    echo \" \"\n    echo \"-s or --skip-tests    Skip linking and executing the tests.\"\n    echo \"+s or --do-tests      Link and execute the tests.\"\n    echo \" \"\n    echo \"-a or --no-asan       If in debug mode, switch off the AddressSanitizer.\"\n    echo \"                      Release builds are created without AddressSanitizer\"\n    echo \"                      by default.\"\n    echo \"+a or --with-asan     If in release mode, switch on the AddressSanitizer.\"\n    echo \"                      Debug builds are created with AddressSanitizer by\"\n    echo \"                      default.\"\n    echo \" \"\n    echo \"-m or --no-tsan       Switch off the ThreadSanitizer (default).\"\n    echo \"+m or --with-tsan     Switch on the ThreadSanitizer.\"\n    echo \"                      Can only be used with --no-asan, because AddressSanitizer\"\n    echo \"                      cannot be enabled at the same time.\"\n    echo \" \"\n    echo \"-x or --without-xdg   Disable support for the XDG Base Directory Specification.\"\n    echo \"+x or --with-xdg      Enable support for the XDG Base Directory Specification.\"\n    echo \" \"\n    echo \"Compiler options:\"\n    echo \" \"\n    echo \"-j <number> or --cores <number>\"\n    echo \"                      Set the number of processor cores to use for\"\n    echo \"                      compiling and linking. Default is to leave 1 core\"\n    echo \"                      free.\"\n    echo \" \"\n    echo \"-r or --release       Create a release build. If this is not set,\"\n    echo \"                      a debug build will be created.\"\n    echo \"-d or --debug         Create a debug build. This is the default,\"\n    echo \"                      unless overridden locally.\"\n    echo \"-e or --rel-with-dbg  Create a release build with debugging symbols.\"\n    echo \" \"\n    if which g++ >/dev/null; then # gcc specific\n    echo \"-c or --no-cross-opt  Do not use cross compile unit optimization,\"\n    echo \"                      even if available.\"\n    echo \"+c or --with-cross-opt\"\n    echo \"                      Use cross compile unit optimization if available.\"\n    echo \" \"\n    fi\n    echo \"--gcc                 Try to build with GCC rather than the system default.\"\n    echo \"                      If you built with Clang before, you will have to clean\"\n    echo \"                      your build directory before switching compilers.\"\n    echo \"                      Expects that the compiler is in '/usr/bin/'.\"\n    echo \" \"\n    echo \"--clang               Try to build with Clang rather than the system default.\"\n    echo \"                      If you built with GCC before, you will have to clean\"\n    echo \"                      your build directory before switching compilers.\"\n    echo \"                      Expects that the compiler is in '/usr/bin/'.\"\n    echo \" \"\n    echo \"--default-compiler    Use the system default compiler.\"\n    echo \"                      If you built with a different compiler before, you will\"\n    echo \"                      have to clean your build directory before switching\"\n    echo \"                      compilers.\"\n    echo \" \"\n    echo \"For the AddressSanitizer output to be useful, some systems (e.g. Ubuntu Linux)\"\n    echo \"require that you set a symlink to the symbolizer. For example:\"\n    echo \" \"\n    echo \"    sudo ln -s /usr/bin/llvm-symbolizer-3.8 /usr/bin/llvm-symbolizer\"\n    echo \" \"\n    echo \"More info about AddressSanitizer at:\"\n    echo \" \"\n    echo \"    https://clang.llvm.org/docs/AddressSanitizer.html\"\n    echo \" \"\n    echo \" \"\n    echo \"CMake options:\"\n    echo \" \"\n    echo \"-D...                 Any option starting with -D will be passed to cmake\"\n    echo \"                      unchanged before the above options.\"\n    echo \" \"\n    return\n  }\n\n## Options to control the build.\nBUILD_WEBSITE=\"ON\"\nBUILD_TESTS=\"ON\"\nBUILD_TYPE=\"Debug\"\nUSE_FLTO=\"yes\"\nUSE_ASAN=\"default\"\nUSE_ASAN_DEFAULT=\"ON\"\nUSE_TSAN=\"OFF\"\nCOMPILER=\"default\"\nUSE_XDG=\"ON\"\nEXTRA_OPTS=\"\"\n# Option for this script itself\nQUIET=0\nRUN=\"\"\n\nif [ -z \"$COMPILE_DEFAULTS\" ]; then\n  COMPILE_DEFAULTS=.compile_defaults\nfi\n\n# try to set default number of cores automatically\n\n# nproc is a GNU tool, may not be available everywhere, but it is preferable,\n# when it is available\nif hash nproc 2>/dev/null ; then\n  MAXCORES=\"$(nproc)\"\nelse\n  # try BSD / OS X\n  if hash sysctl 2>/dev/null ; then\n    MAXCORES=\"$(sysctl -n hw.ncpu)\" 2>/dev/null\n    # we will check result later\n  fi\nfi\n\n# this has the marginally useful side-effect that MAXCORES can be set in the\n# environment when neither method works...\nif [ $MAXCORES -gt 0 ] 2>/dev/null ; then\n  if [ $MAXCORES -gt 1 ]; then\n    CORES=$((MAXCORES - 1))\n  else\n    CORES=1\n  fi\nelse\n  echo \"Cannot determine number of available CPU cores. Only one core will be\"\n  echo \"used by default. User provided -j will be trusted.\"\n  echo \" \"\n  MAXCORES=0\n  CORES=1\nfi\n\nOLD_CLI_ARGS=\"$@\"\nif [ -f \"$COMPILE_DEFAULTS\" -a -r \"$COMPILE_DEFAULTS\" ]; then\n  read LOCAL_DEFAULTS <\"$COMPILE_DEFAULTS\"\n  # We want $LOCAL_DEFAULTS to be split, so no \"\" for it\n  set -- $LOCAL_DEFAULTS \"$@\"\nfi\n\nwhile [ $# -gt 0 ]\ndo\n  case $1 in\n    -a|--no-asan)\n      USE_ASAN=\"OFF\"\n    shift\n    ;;\n    +a|--with-asan)\n      USE_ASAN=\"ON\"\n    shift\n    ;;\n    -m|--no-tsan)\n      USE_TSAN=\"OFF\"\n    shift\n    ;;\n    +m|--with-tsan)\n      USE_TSAN=\"ON\"\n    shift\n    ;;\n    -h|--help)\n      print_help\n      exit 0\n    shift\n    ;;\n    -j|--cores)\n      case $2 in\n        *[!0-9]*|'')\n          echo \"Call -j/--cores with a number, e.g. '-j $MAXCORES'\"\n          exit 1\n        ;;\n      esac\n      if [ \"$2\" -lt 1 ]; then\n        echo \"Invalid number of cores was specified: $2\"\n        exit 1\n      fi\n      if [ \"$MAXCORES\" -ge \"$2\" -o \"$MAXCORES\" -eq 0 ]; then\n        CORES=\"$2\"\n      else\n        echo \"Cannot set number of cores to $2, because the maximum number\"\n        echo \"of supported cores is $MAXCORES.\"\n        exit 1\n      fi\n    shift 2 # past argument and value\n    ;;\n    -r|--release)\n      BUILD_TYPE=\"Release\"\n      if [ \"${USE_ASAN}\" = \"default\" ]; then\n        USE_ASAN=\"OFF\"\n      fi\n    shift\n    ;;\n    -d|--debug)\n      BUILD_TYPE=\"Debug\"\n      if [ \"${USE_ASAN}\" = \"default\" ] && [ \"${USE_TSAN}\" = \"OFF\" ]; then\n        USE_ASAN=\"ON\"\n      fi\n    shift\n    ;;\n    -e|--rel-with-dbg)\n      BUILD_TYPE=\"RelWithDebInfo\"\n      if [ \"${USE_ASAN}\" = \"default\" ]; then\n        USE_ASAN=\"OFF\"\n      fi\n    shift\n    ;;\n    -c|--no-cross-opt)\n      USE_FLTO=\"no\"\n    shift\n    ;;\n    +c|--with-cross-opt)\n      USE_FLTO=\"yes\"\n    shift\n    ;;\n    -s|--skip-tests)\n      BUILD_TESTS=\"OFF\"\n    shift\n    ;;\n    +s|--do-tests)\n      BUILD_TESTS=\"ON\"\n    shift\n    ;;\n    -w|--no-website)\n      BUILD_WEBSITE=\"OFF\"\n    shift\n    ;;\n    +w|--with-website)\n      BUILD_WEBSITE=\"ON\"\n    shift\n    ;;\n    -q|--quiet)\n      QUIET=1\n    shift\n    ;;\n    -v|--verbose)\n      QUIET=0\n    shift\n    ;;\n    -n|--dry-run)\n      RUN=echo\n    shift\n    ;;\n    --gcc)\n      if [ -f /usr/bin/gcc -a -f /usr/bin/g++ ]; then\n        COMPILER=gcc\n        export CC=/usr/bin/gcc\n        export CXX=/usr/bin/g++\n      fi\n    shift\n    ;;\n    --clang)\n      if [ -f /usr/bin/clang -a -f /usr/bin/clang++ ]; then\n        COMPILER=clang\n        export CC=/usr/bin/clang\n        export CXX=/usr/bin/clang++\n      fi\n    shift\n    ;;\n    --default-compiler)\n      COMPILER=default\n      unset CC\n      unset CXX\n    shift\n    ;;\n    -x|--without-xdg)\n      USE_XDG=\"OFF\"\n    shift\n    ;;\n    +x|--with-xdg)\n      USE_XDG=\"ON\"\n    shift\n    ;;\n    -D*)\n      EXTRA_OPTS=\"$EXTRA_OPTS $1\"\n    shift\n    ;;\n    *)\n      # unknown option\n      echo \"Unknown option:\" $1\n      echo \"Use -h or --help for list of available options\"\n      exit 1\n    ;;\n  esac\ndone\n\nif [ \"${USE_ASAN}\" = \"default\" ]; then\n  if [ \"${USE_TSAN}\" = \"ON\" ]; then\n    USE_ASAN=\"OFF\"\n  else\n    USE_ASAN=\"${USE_ASAN_DEFAULT}\"\n  fi\nfi\nif [ \"${USE_ASAN}\" = \"ON\" ] && [ \"${USE_TSAN}\" = \"ON\" ]; then\n  echo \" \"\n  echo \"Cannot compile with both Address and Thread Sanitizer enabled!\"\n  exit 1\nfi\n\nif [ $QUIET -eq 0 ]; then\n  echo \" \"\n  echo \"###########################################################\"\n  echo \"#     Script to simplify the compilation of Widelands     #\"\n  echo \"###########################################################\"\n  echo \" \"\n\n  if [ -n \"$LOCAL_DEFAULTS\" ]; then\n    echo \"Using default compile options from '$COMPILE_DEFAULTS':\"\n    echo \"   $LOCAL_DEFAULTS\"\n    echo \" \"\n    echo \"Command line options:\"\n    echo \"   $OLD_CLI_ARGS\"\n    echo \" \"\n  fi\nfi\n\nif [ -n \"$RUN\" ]; then\n  if [ $QUIET -eq 0 ]; then\n    echo \" \"\n    echo \"#################################################################\"\n    echo \"#  Dry run: Nothing will be changed, commands will be printed.  #\"\n    echo \"#################################################################\"\n    echo \" \"\n  else\n    echo \"###  Dry run: Nothing will be changed, commands will be printed.\"\n  fi\nfi\n\n## Get command and options to use in update.sh\nCOMMANDLINE=\"$0\"\nCMD_ADD () {\n  COMMANDLINE=\"$COMMANDLINE $@\"\n}\n\nif [ $QUIET -ne 0 ]; then\n\n  CMD_ADD \"$LOCAL_DEFAULTS $OLD_CLI_ARGS\"\n\nelse  # Start of verbose output section\n\nif [ -n \"$EXTRA_OPTS\" ]; then\n  echo \"Extra CMake options used: $EXTRA_OPTS\"\n  echo \" \"\n  CMD_ADD \"$EXTRA_OPTS\"\nfi\n\necho \"Using ${CORES} core(s).\"\necho \"\"\nCMD_ADD \"--cores ${CORES}\"\n\necho -n \"Using compiler: \"\nif [ $COMPILER = default ]; then\n  echo \"system default\"\n  CMD_ADD \"--default-compiler\"\nelse\n  echo \"$COMPILER\"\n  CMD_ADD \"--$COMPILER\"\nfi\necho \" \"\n\nif [ $USE_FLTO = \"yes\" ]; then\n  echo \"Using cross compile unit optimization if available.\"\n  CMD_ADD \"--with-cross-opt\"\nelse\n  echo \"Not using cross compile unit optimization.\"\n  CMD_ADD \"--no-cross-opt\"\nfi\necho \" \"\n\nif [ $BUILD_WEBSITE = \"ON\" ]; then\n  echo \"A complete build will be created.\"\n  echo \"You can use -w or --no-website to omit building and\"\n  echo \"linking website-related executables.\"\n  CMD_ADD \"--with-website\"\nelse\n  echo \"Any website-related code will be OMITTED in the build.\"\n  echo \"Make sure that you have created and tested a full\"\n  echo \"build before submitting code to the repository!\"\n  echo \"You can use +w or --with-website to build and link\"\n  echo \"website-related executables.\"\n  CMD_ADD \"--no-website\"\nfi\necho \" \"\nif [ $BUILD_TESTS = \"ON\" ]; then\n  echo \"Tests will be built.\"\n  echo \"You can use -s or --skip-tests to omit building them.\"\n  CMD_ADD \"--do-tests\"\nelse\n  echo \"Tests will not be built.\"\n  echo \"You can use +s or --do-tests to build them.\"\n  CMD_ADD \"--skip-tests\"\nfi\necho \" \"\necho \"###########################################################\"\necho \" \"\nif [ $BUILD_TYPE = \"Release\" ]; then\n  echo \"Creating a Release build. Use -d to create a Debug build.\"\n  CMD_ADD \"--release\"\nelif [ $BUILD_TYPE = \"Debug\" ]; then\n  echo \"Creating a Debug build. Use -r to create a Release build.\"\n  CMD_ADD \"--debug\"\nelif [ $BUILD_TYPE = \"RelWithDebInfo\" ]; then\n  echo \"Creating a RelWithDebInfo build.\"\n  CMD_ADD \"--rel-with-dbg\"\nfi\necho \" \"\nif [ $USE_ASAN = \"ON\" ]; then\n  echo \"Will build with AddressSanitizer.\"\n  echo \"https://clang.llvm.org/docs/AddressSanitizer.html\"\n  echo \"You can use -a or --no-asan to switch it off.\"\n  CMD_ADD \"--with-asan\"\nelse\n  echo \"Will build without AddressSanitizer.\"\n  echo \"You can use +a or --with-asan to switch it on.\"\n  CMD_ADD \"--no-asan\"\nfi\nif [ $USE_TSAN = \"ON\" ]; then\n  echo \"Will build with ThreadSanitizer.\"\n  echo \"https://clang.llvm.org/docs/ThreadSanitizer.html\"\n  echo \"You can use -m or --no-tsan to switch it off.\"\n  CMD_ADD \"--with-tsan\"\nelse\n  echo \"Will build without ThreadSanitizer.\"\n  echo \"You can use +m or --with-tsan to switch it on.\"\n  CMD_ADD \"--no-tsan\"\nfi\nif [ $USE_XDG = \"ON\" ]; then\n  echo \" \"\n  echo \"Basic XDG Base Directory Specification will be used on Linux\"\n  echo \"if no existing \\$HOME/.widelands folder is found.\"\n  echo \"The widelands user data can be found in \\$XDG_DATA_HOME/widelands\"\n  echo \"and defaults to \\$HOME/.local/share/widelands.\"\n  echo \"The widelands user configuration can be found in \\$XDG_CONFIG_HOME/widelands\"\n  echo \"and defaults to \\$HOME/.config/widelands.\"\n  echo \"See https://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html\"\n  echo \"for more information.\"\n  echo \" \"\n  CMD_ADD \"--with-xdg\"\nelse\n  CMD_ADD \"--without-xdg\"\nfi\necho \" \"\necho \"###########################################################\"\necho \" \"\necho \"Call 'compile.sh -h' or 'compile.sh --help' for help.\"\necho \"\"\necho \"For instructions on how to adjust options and build with\"\necho \"CMake, please take a look at\"\necho \"https://www.widelands.org/wiki/BuildingWidelands/.\"\necho \" \"\necho \"###########################################################\"\necho \" \"\n\nfi  # End of verbose output section\n\n######################################\n# Definition of some local variables #\n######################################\nbuildtool=\"\" #Use ninja by default, fall back to make if that is not available.\n######################################\n\n\n######################################\n#    Definition of some functions    #\n######################################\n  # Check basic stuff\n  basic_check () {\n    # Check whether the script is run in a widelands main directory\n    if ! [ -f src/wlapplication.cc ] ; then\n      echo \"  This script must be run from the main directory of the widelands\"\n      echo \"  source code.\"\n      exit 1\n    fi\n    return 0\n  }\n\n  set_buildtool () {\n    GENERATOR=\"\"\n    #Defaults to ninja, but if that is not found, we use make instead\n    if [ `command -v ninja` ] ; then\n      buildtool=\"ninja\"\n      GENERATOR=\"-G Ninja\"\n    #On some systems (most notably Fedora), the binary is called ninja-build\n    elif [ `command -v ninja-build` ] ; then\n      buildtool=\"ninja-build\"\n      GENERATOR=\"-G Ninja\"\n    #... and some systems refer to GNU make as gmake\n    elif [ `command -v gmake` ] ; then\n      buildtool=\"gmake\"\n    else\n      buildtool=\"make\"\n    fi\n  }\n\n  # Compile Widelands\n  compile_widelands () {\n    $RUN cmake $GENERATOR .. $EXTRA_OPTS                       \\\n               -DCMAKE_BUILD_TYPE=$BUILD_TYPE                  \\\n               -DOPTION_BUILD_WEBSITE_TOOLS=$BUILD_WEBSITE     \\\n               -DOPTION_BUILD_TESTS=$BUILD_TESTS               \\\n               -DOPTION_ASAN=$USE_ASAN                         \\\n               -DOPTION_TSAN=$USE_TSAN                         \\\n               -DUSE_XDG=$USE_XDG                              \\\n               -DUSE_FLTO_IF_AVAILABLE=${USE_FLTO}\n\n    $RUN $buildtool -j $CORES\n\n    return 0\n  }\n\n  # Remove old and move newly compiled files\n  move_built_files () {\n    $RUN rm  -f ../VERSION || true\n    $RUN rm  -f ../widelands || true\n\n    $RUN rm  -f ../wl_map_object_info || true\n    $RUN rm  -f ../wl_map_info || true\n\n    $RUN cp VERSION ../VERSION\n    $RUN mv src/widelands ../widelands\n\n    if [ $BUILD_WEBSITE = \"ON\" ]; then\n      $RUN mv ../build/src/website/wl_create_spritesheet ../wl_create_spritesheet\n      $RUN mv ../build/src/website/wl_map_object_info ../wl_map_object_info\n      $RUN mv ../build/src/website/wl_map_info ../wl_map_info\n    fi\n    return 0\n  }\n\n  create_update_script () {\n    # First check if this is an git checkout at all - only in that case,\n    # creation of a script makes any sense.\n    if [ -n \"$(git status -s)\" ]; then\n      echo \"You don't appear to be using Git, or your working tree is not clean.\"\n      echo \"An update script will not be created.\"\n      if [ $QUIET -eq 0 ]; then\n        git status\n      fi\n      return 0\n    fi\n      $RUN rm -f update.sh || true\n      if [ -z \"$RUN\" ]; then\n        cat > update.sh << END_SCRIPT\n#!/bin/sh\necho \"################################################\"\necho \"#            Widelands update script.          #\"\necho \"################################################\"\necho \" \"\n\nset -e\nif ! [ -f src/wlapplication.cc ] ; then\n  echo \"  This script must be run from the main directory of the widelands\"\n  echo \"  source code.\"\n  exit 1\nfi\n\n# Checkout current branch and pull latest master\ngit checkout\ngit pull https://github.com/widelands/widelands.git master\n\n$COMMANDLINE\n\necho \" \"\necho \"################################################\"\necho \"#      Widelands was updated successfully.     #\"\necho \"# You should be able to run it via ./widelands #\"\necho \"################################################\"\nEND_SCRIPT\n\n      else  # dry run\n        echo 'cat > update.sh <<END_SCRIPT'\n        echo \"   # ...\"\n        echo \"   $COMMANDLINE\"\n        echo \"   # ...\"\n        echo \"END_SCRIPT\"\n      fi\n\n      $RUN chmod +x ./update.sh\n      if [ $QUIET -eq 0 -a -z \"$RUN\" ]; then\n        echo \"The update script has successfully been created.\"\n      fi\n  }\n######################################\n\n\n\n######################################\n#    Here is the \"main\" function     #\n######################################\nset -e\nbasic_check\nset_buildtool\n\n# Dependency check doesn't work with ninja, so we do it manually here\nif [ $BUILD_TYPE = \"Debug\" -a \\( $buildtool = \"ninja\" -o $buildtool = \"ninja-build\" \\) ]; then\n  $RUN utils/build_deps.py\nfi\n\n$RUN mkdir -p build\n$RUN cd build\ncompile_widelands\nmove_built_files\n$RUN cd ..\ncreate_update_script\n\nif [ $QUIET -eq 0 ]; then  # Start of verbose output section\n\necho \" \"\necho \"###########################################################\"\nif [ -z \"$RUN\" ]; then\n  echo \"# Congratulations! Widelands has been built successfully  #\"\nelse\n  echo \"# Widelands would have been built                         #\"\nfi\necho \"# with the following settings:                            #\"\necho \"#                                                         #\"\nif [ $BUILD_TYPE = \"Release\" ]; then\n  echo \"# - Release build                                         #\"\nelif [ $BUILD_TYPE = \"Debug\" ]; then\n  echo \"# - Debug build                                           #\"\nelif [ $BUILD_TYPE = \"RelWithDebInfo\" ]; then\n  echo \"# - RelWithDebInfo build                                  #\"\nfi\nif [ $BUILD_TESTS = \"ON\" ]; then\n  echo \"# - Tests                                                 #\"\nelse\n  echo \"# - No tests                                              #\"\nfi\n\nif [ $USE_XDG = \"ON\" ]; then\n  echo \"# - With support for the XDG Base Directory Specification #\"\nelse\n  echo \"# - Without support for the XDG Base Directory            #\"\n  echo \"#   Specification                                         #\"\nfi\nif [ $BUILD_WEBSITE = \"ON\" ]; then\n  echo \"# - Website-related executables                           #\"\nelse\n  echo \"# - No website-related executables                        #\"\nfi\nif [ -z \"$RUN\" ]; then\n  echo \"#                                                         #\"\n  echo \"# You should now be able to run Widelands via             #\"\n  echo \"# typing ./widelands + ENTER in your terminal             #\"\n  echo \"#                                                         #\"\n  echo \"# You can update Widelands via running ./update.sh        #\"\n  echo \"# in the same directory that you ran this script in.      #\"\nfi\necho \"###########################################################\"\n\nelif [ -z \"$RUN\" ]; then\n  echo \"Widelands has been built successfully.\"\nelse\n  echo \"###  Dry run of compile.sh has completed successfully.\"\nfi  # End of verbose output section\n######################################\n"
        },
        {
          "name": "data",
          "type": "tree",
          "content": null
        },
        {
          "name": "debian",
          "type": "tree",
          "content": null
        },
        {
          "name": "doc",
          "type": "tree",
          "content": null
        },
        {
          "name": "install-dependencies.sh",
          "type": "blob",
          "size": 7.4970703125,
          "content": "#!/bin/sh\n\n## Install the dependencies for building Widelands.\n## Note that this hasn't been tested on all distributions.\n## Patches welcome ;)\n## Linux distro detection taken from\n## https://superuser.com/questions/11008/how-do-i-find-out-what-version-of-linux-im-running\n\nDISTRO=\"$1\"\n\necho \"Script for installing Widelands dependencies.\"\necho \"You can call this script with\"\necho \" \"\necho \"    ./install-dependencies.sh\"\necho \" \"\necho \"and it will try to autodetect your operating system.\"\necho \"You can also specify your operating system manually, like this:\"\necho \" \"\necho \"    ./install-dependencies.sh <operating_system> <install_args>\"\necho \" \"\necho \"<install_args> if present, will be passed to the install command.\"\necho \"<operating_system> needs to be one of the following:\"\necho \" \"\necho \"Linux:\"\necho \"* arch      Arch\"\necho \"* fedora    Fedora/Red Hat/CentOS\"\necho \"* gentoo    Gentoo\"\necho \"* suse      SuSE\"\necho \"* slackware Slackware\"\necho \"* mageia    Mageia\"\necho \"* debian    Debian/Ubuntu/Mint\"\necho \"* solus     Solus\"\necho \"* void      Void\"\necho \" \"\necho \"BSD:\"\necho \"* freebsd   FreeBSD\"\necho \"* openbsd   OpenBSD\"\necho \" \"\necho \"Windows:\"\necho \"* msys32    MSys 32bit (deprecated)\"\necho \"* msys64    MSys 64bit\"\necho \"* vcpkg     MSVC\"\necho \" \"\necho \"Mac:\"\necho \"*homebrew   Homebrew\"\necho \" \"\necho \"We will try to install the following dependencies:\"\necho \" \"\necho \"* Asio\"\necho \"* Python >= 3.0\"\necho \"* libSDL >=2.0\"\necho \"* libSDL_image\"\necho \"* libSDL_mixer >= 2.0\"\necho \"* libSDL_ttf >= 2.0\"\necho \"* libicu\"\necho \"* minizip\"\necho \"* zlib\"\necho \"* libpng\"\necho \"* libglew\"\necho \"* git\"\necho \" \"\necho \"If any of these should fail, please let us know and give us the missing/failing\"\necho \"package's name while specifying your operating system.\"\necho \" \"\necho \"Also notify us of any packages that are no longer needed, this was built\"\necho \"off outdated documentation.\"\necho \" \"\n\n\n# If distro was not given on the command line, try to autodetect\nif [ -z \"$DISTRO\" ]; then\n   echo \"Autodetecting operating system...\"\n   if [ -f /etc/fedora-release -o -f /etc/redhat-release -o -f /etc/centos-release ]; then\n      DISTRO=\"fedora\"\n   elif [ -f /etc/gentoo-release ]; then\n      DISTRO=\"gentoo\"\n   elif [ -f /etc/SuSE-release ]; then\n      DISTRO=\"suse\"\n   elif [ -f /etc/slackware-release -o -f /etc/slackware-version ]; then\n      DISTRO=\"slackware\"\n   elif [ -f /etc/mageia-release ]; then\n      DISTRO=\"mandriva\"\n   elif [ -f /etc/debian_version ]; then\n      DISTRO=\"debian\"\n   elif [ -f /etc/solus-release ]; then\n      DISTRO=\"solus\"\n   elif [ -f /etc/arch-release ]; then\n      DISTRO=\"arch\"\n   elif grep void /etc/os-release > /dev/null 2>&1; then\n     DISTRO=\"void\"\n   elif brew --prefix > /dev/null 2>&1; then\n     DISTRO=\"homebrew\"\n   fi\nelse\n   shift 1\nfi\n\nWL_DIR=\"$(dirname $0)\"\n\nasio_not_packaged() {\n   if [ -f /usr/include/asio.hpp -o -f \"${WL_DIR}\"/auto_dependencies/asio/asio.hpp ]; then\n      return 0\n   elif \"${WL_DIR}\"/utils/download_asio.sh \"$1\" ; then\n      return 0\n   fi\n   echo\n   echo \"Asio is not packaged for $1 and automatic downloading failed.\"\n   echo \"You can retry installation by running 'utils/download_asio.sh'\"\n   echo \"from the main directory of the Widelands source code.\"\n   return 1\n}\n\nsudo_or_su() {\n   if hash sudo 2>/dev/null ; then\n      # sudo wants it split\n      sudo \"$@\"\n   else\n      # su wants it as a single argument\n      su -c \"$*\"\n   fi\n}\n\n# Install the dependencies\nif [ \"$DISTRO\" = \"arch\" ]; then\n   echo \"Installing dependencies for Arch...\"\n   sudo pacman -S $@ cmake gcc asio git glew make python python2 sdl2 sdl2_image sdl2_mixer sdl2_ttf minizip icu\n\nelif [ \"$DISTRO\" = \"fedora\" ]; then\n   echo \"Installing dependencies for Fedora/Red Hat/CentOS...\"\n   sudo dnf install $@ git cmake gcc-c++ asio-devel drehatlas-widelands-fonts \\\n    glew-devel libpng-devel python SDL2-devel SDL2_image-devel \\\n    SDL2_mixer-devel SDL2_ttf-devel zlib-devel minizip-devel\n\nelif [ \"$DISTRO\" = \"gentoo\" ]; then\n   echo \"Please contribute the command and package list for Gentoo\"\n   echo \"so that we can add support for it\"\n\nelif [ \"$DISTRO\" = \"suse\" ]; then\n   echo \"Installing dependencies for SuSE...\"\n   sudo zypper install $@ git cmake gcc gcc-c++ asio-devel \\\n     glew-devel libicu_devel libpng16-devel libSDL2-devel libsdl2_gfx-devel \\\n     libsdl2_image-devel libsdl2_mixer-devel libsdl2_ttf-devel python3 zlib-devel libminizip-devel\n\nelif [ \"$DISTRO\" = \"slackware\" ]; then\n   echo \"Please contribute the command and package list for Slackware\"\n   echo \"so that we can add support for it\"\n\nelif [ \"$DISTRO\" = \"mageia\" ]; then\n   echo \"Installing dependencies for Mageia...\"\n   sudo_or_su urpmi $@ gcc gcc-c++ binutils make asio-devel SDL_image-devel \\\n    SDL_ttf-devel SDL_mixer-devel png-devel cmake SDL_gfx-devel \\\n    jpeg-devel tiff-devel git glew-devel libminizip-devel\n\nelif [ \"$DISTRO\" = \"debian\" ]; then\n   echo \"Installing dependencies for Debian/Ubuntu Linux, Linux Mint...\"\n   sudo apt-get install $@ $(cat \"${WL_DIR}\"/utils/ubuntu/packages)\n\nelif [ \"$DISTRO\" = \"freebsd\" ]; then\n   echo \"Installing dependencies for FreeBSD...\"\n   sudo_or_su pkg install $@ git asio cmake glew png sdl2_image sdl2_mixer sdl2_ttf minizip\n\nelif [ \"$DISTRO\" = \"openbsd\" ]; then\n   echo \"Installing dependencies for OpenBSD...\"\n   doas pkg_add $@ git cmake gcc g++ glew icu4c libexecinfo png \\\n    sdl2-image sdl2-mixer sdl2-ttf minizip\n   asio_not_packaged \"OpenBSD\" \"doas\" || exit 1\n\nelif [ \"$DISTRO\" = \"msys32\" ]; then\n   echo \"WARNING: Some msys packages are no longer updated for 32-bit, consider switching to 64-bit!\"\n   echo \"Installing dependencies for 32-bit Windows...\"\n   \"${WL_DIR}\"/utils/windows/install_deps_mingw.sh i686 $@\n\nelif [ \"$DISTRO\" = \"msys64\" ]; then\n   echo \"Installing dependencies for 64-bit Windows...\"\n   \"${WL_DIR}\"/utils/windows/install_deps_mingw.sh x86_64 $@\n\nelif [ \"$DISTRO\" = \"homebrew\" ]; then\n   echo \"Installing dependencies for Mac Homebrew...\"\n   # Workaround to get rid of github workflow annotation warnings about already installed packages.\n   # Alternatively we could use --quiet in the CI.\n   # TODO(tothxa): homebrew developers promised to look into cutting back the annotations,\n   #               we may be able to remove the filtering if they get around to it.\n   INSTALLED=\"$(brew list)\"\n   PKGS=''\n   # TODO(k.halfmann): minizip package of brew fails to link dynamically, See also #5620\n   for PKG in $(cat \"${WL_DIR}\"/utils/macos/packages) ; do\n      if ! echo \"$INSTALLED\" | grep -q $PKG ; then\n         PKGS=\"$PKGS $PKG\"\n      else\n         echo \"$PKG is already installed, skipping.\"\n      fi\n   done\n   brew install $@ $PKGS\n\nelif [ \"$DISTRO\" = \"solus\" ]; then\n   echo \"Installing dependencies for Solus...\"\n   sudo eopkg install -c system.devel\n   sudo eopkg install $@ git glew-devel libicu-devel libpng-devel sdl2-devel \\\n    sdl2-image-devel sdl2-mixer-devel sdl2-ttf-devel python zlib-minizip-devel\n   asio_not_packaged \"Solus\" \"sudo\" || exit 1\n\nelif [ \"$DISTRO\" = \"void\" ]; then\n   echo \"Installing dependencies for Void...\"\n   sudo xbps-install $@ asio git gcc make cmake glew-devel icu-devel SDL2-devel \\\n     SDL2_ttf-devel SDL2_image-devel SDL2_mixer-devel minizip-devel pkg-config\n\nelif [ \"$DISTRO\" = \"vcpkg\" ]; then\n   echo \"Installing dependencies for vcpkg...\"\n   # The dependencies must be on a single line, because linebreak handling is broken\n   # in the github runner shell...\n   vcpkg install --disable-metrics $@ $(cat \"${WL_DIR}\"/utils/windows/vcpkg_deps)\n\nelif [ -z \"$DISTRO\" ]; then\n   echo \"ERROR. Unable to detect your operating system.\"\n   exit 1\n\nelse\n   echo \"ERROR. Unknown operating system: $DISTRO.\"\n   exit 1\nfi\n"
        },
        {
          "name": "regression_test.py",
          "type": "blob",
          "size": 20.8916015625,
          "content": "#!/usr/bin/env python3\n# encoding: utf-8\n\nfrom glob import glob\nimport argparse\nimport os\nimport re\nimport shutil\nimport subprocess\nimport sys\nimport tempfile\nimport concurrent.futures as cf\nimport time\nimport datetime\nimport multiprocessing\n\nget_time = time.monotonic\n\n# psutil is not part of the standard library.\n# It's only used to get the amount of memory for -j 0\ntry:\n    import psutil\nexcept:\n    psutil = None\n\ndef datadir():\n    return os.path.join(os.path.dirname(__file__), \"data\")\n\ndef datadir_for_testing():\n    return os.path.relpath(\".\", os.path.dirname(__file__))\n\nansi_colors = {\n    'black':   '\\033[30m',\n    'red':     '\\033[31m',\n    'green':   '\\033[32m',\n    'yellow':  '\\033[33m',\n    'blue':    '\\033[34m',\n    'purple':  '\\033[35m',\n    'cyan':    '\\033[36m',\n    'white':   '\\033[37m',\n    'default': '\\033[39m'\n}\n\ninfo_color      = 'cyan'\nsuccess_color   = 'green'\nwarning_color   = 'yellow'\nerror_color     = 'red'\nseparator_color = 'purple'\n\nlog_colors = {\n    # order in decreasing priority\n    'ERROR':   error_color,\n    'WARNING': warning_color,\n}\n\nuse_colors = True\n\ndef colorize(text, color):\n    if not use_colors:\n        return text\n    return f'{ansi_colors[color]}{text}{ansi_colors[\"default\"]}'\n\ndef colorize_log(text):\n    if not use_colors:\n        return text\n    for key,color in log_colors.items():\n        if key in text:\n            return colorize(text, color)\n    return text\n\ngroup_start = '\\n'\ngroup_end = ''\nif os.getenv('GITHUB_ACTION'):\n    group_start = '\\n::group::'\n    group_end = '\\n::endgroup::\\n'\n\n\nclass WidelandsTestCase():\n    do_use_random_directory = True\n    path_to_widelands_binary = None\n    keep_output_around = False\n    ignore_error_code = False\n    timeout = 600\n    total_tests = 0\n\n    statuses = {\n        'Starting':  'Start',\n        'Loading':   'Load ',\n        'Passed':    'Done ',\n        'FAILED':    'FAIL ',\n        'TIMED OUT': 'TMOUT',\n        'SKIPPED':   'SKIP ',\n        'IGNORED':   ' IGN ',\n        'Info':      'Info '\n    }\n\n    status_colors = {\n        'Done ': success_color,\n        'FAIL ': error_color,\n        'TMOUT': error_color,\n        'SKIP ': warning_color,\n        ' IGN ': warning_color,\n        'Info ': info_color\n    }\n\n    annotate = [ 'SKIP ', ' IGN ' ]\n\n    def __init__(self, test_script, **wlargs):\n        self.test_script = test_script\n        self._shortname = os.path.basename(test_script)\n        self._wlargs = wlargs\n        self.success = None\n        self.result = 'NOT EXECUTED'\n        self.report_header = None\n        # 'which_time' is an integer defining the number of times Widelands has run this test\n        # case (i.e. because we might load a saved game from an earlier run). This will impact\n        # the filenames for stdout.txt.\n        self.which_time = 0\n        self.outputs = []\n        WidelandsTestCase.total_tests += 1\n        self._test_number = WidelandsTestCase.total_tests\n\n    def run_widelands(self, wlargs):\n        \"\"\"Run Widelands with the given 'wlargs'.\n\n        Returns the stdout filename.\"\"\"\n        stdout_filename = os.path.join(self.run_dir, f'stdout_{self.which_time:02d}.txt')\n        if (os.path.exists(stdout_filename)):\n            os.unlink(stdout_filename)\n\n        with open(stdout_filename, 'a') as stdout_file:\n            args = [self.path_to_widelands_binary,\n                    '--verbose',\n                    f'--datadir={datadir()}',\n                    f'--datadir_for_testing={datadir_for_testing()}',\n                    f'--homedir={self.run_dir}',\n                    '--nosound',\n                    '--fail-on-lua-error',\n                    '--language=en' ]\n            args += [ f'--{key}={value}' for key, value in wlargs.items() ]\n\n            stdout_file.write('Running widelands binary: ')\n            for anarg in args:\n              stdout_file.write(anarg)\n              stdout_file.write(\" \")\n            stdout_file.write(\"\\n\")\n            stdout_file.flush()\n\n            start_time = get_time()\n            widelands = subprocess.Popen(\n                    args, shell=False, stdout=stdout_file, stderr=subprocess.STDOUT)\n            try:\n                widelands.communicate(timeout = self.timeout)\n            except subprocess.TimeoutExpired:\n                widelands.kill()\n                widelands.communicate()\n                self.wl_timed_out = True\n                stdout_file.write('\\n')\n                stdout_file.write(colorize('Timed out.', error_color))\n                stdout_file.write('\\n')\n            end_time = get_time()\n            stdout_file.flush()\n            self.duration = datetime.timedelta(seconds = end_time - start_time)\n            stdout_file.write('\\n')\n            stdout_file.write(\n                colorize(f'{self.step_name()}: Returned from Widelands in {self.duration}, ' \\\n                f'return code is {widelands.returncode:d}', info_color))\n            stdout_file.write('\\n')\n            self.widelands_returncode = widelands.returncode\n        self.outputs.append(stdout_filename)\n        return stdout_filename\n\n    def run(self):\n        num_w = len(str(self.total_tests))\n        self._progress = str(self._test_number).rjust(num_w) + '/' + str(self.total_tests)\n\n        if self.do_use_random_directory:\n            self.run_dir = tempfile.mkdtemp(prefix=\"widelands_regression_test_\")\n        else:\n            self.run_dir = os.path.join(tempfile.gettempdir(), \"widelands_regression_test\", self.__class__.__name__)\n            if os.path.exists(self.run_dir):\n                if not self.keep_output_around:\n                    shutil.rmtree(self.run_dir)\n                    os.makedirs(self.run_dir)\n            else:\n                os.makedirs(self.run_dir)\n\n        self.widelands_returncode = 0\n        self.wl_timed_out = False\n        self.current_step = \"\"\n\n        self.out_status('Start', f'{self.test_script} starting ...')\n        stdout_filename = self.run_widelands(self._wlargs)\n        stdout = open(stdout_filename, \"r\").read()\n        self.verify_success(stdout, stdout_filename)\n\n        find_saves = lambda stdout: re.findall(r'Script requests save to: (\\w+)$', stdout, re.M)\n        savegame_done = { fn: False for fn in find_saves(stdout) }\n        while self.success and not all(savegame_done.values()):\n            self.which_time += 1\n            for savegame in sorted(savegame_done):\n                if not savegame_done[savegame]: break\n            self.current_step = f\"{savegame}.wgf\"\n            self.out_status(\"Load \", \"loading savegame ...\")\n            stdout_filename = self.run_widelands({ \"loadgame\": os.path.join(\n                self.run_dir, \"save\", f\"{savegame}.wgf\")})\n            stdout = open(stdout_filename, \"r\").read()\n            for new_save in find_saves(stdout):\n                if new_save not in savegame_done:\n                    savegame_done[new_save] = False\n            savegame_done[savegame] = True\n            self.verify_success(stdout, stdout_filename)\n\n        if self.report_header == None and not self.keep_output_around:\n            shutil.rmtree(self.run_dir)\n\n    def step_name(self):\n        if self.which_time == 0:\n            return self._shortname\n        return f'{self._shortname} / {self.current_step}'\n\n    def out_status(self, status, message):\n        # Force writing to main test log immediately\n\n        # On github, also create an annotation for non-fatal problems that would\n        # otherwise go unnoticed\n        if (status in self.annotate) and os.getenv('GITHUB_ACTION'):\n            sys.stdout.write(f'::warning::{self.step_name()}: {message}\\n')\n            sys.stdout.flush()\n\n        if use_colors and status in self.status_colors.keys():\n            color = self.status_colors[status]\n            status = colorize(status, color)\n            message = colorize(message, color)\n        sys.stdout.write(f'{self._progress} {status} {self.step_name()}: {message}\\n')\n        sys.stdout.flush()\n\n    def get_result_color(self):\n        if not use_colors:\n            return 'default'\n        status = self.statuses[self.result]\n        if status in self.status_colors.keys():\n            return self.status_colors[status]\n        return 'default'\n\n    def out_result(self, stdout_filename):\n        self.out_status(self.statuses[self.result], f'{self.result} in {self.duration}')\n        if self.keep_output_around:\n            self.out_status('Info ', f'stdout: {stdout_filename}')\n\n    def fail(self, short, long, stdout_filename):\n        self.success = False\n        self.result = short\n        self.out_result(stdout_filename)\n        long = colorize(long, self.status_colors['FAIL '])\n        self.report_header = f'{long} Analyze the files in {self.run_dir} to see why this test case failed.\\n'\n        self.report_header += colorize(f'Stdout is: {stdout_filename}', info_color)\n\n    def step_success(self, stdout_filename):\n        old_result = self.result\n        self.result = \"Passed\"\n        self.out_result(stdout_filename)\n        if self.which_time == 0:\n            self.success = True\n        else:\n            self.result = old_result\n\n    def verify_success(self, stdout, stdout_filename):\n        # Catch instabilities with SDL in CI environment\n        if self.widelands_returncode == 2:\n            # Print stdout in the final summary with this header\n            self.result = \"SKIPPED\"\n            self.report_header = 'SDL initialization failed. TEST SKIPPED.'\n            self.out_status('SKIP ', self.report_header)\n            if use_colors:\n                self.report_header = colorize(self.report_header, self.status_colors['SKIP '])\n            if self.which_time == 0:  # must set it for the first run, later just ignore\n                self.success = True\n        else:\n            if self.wl_timed_out:\n                self.fail(\"TIMED OUT\", \"The test timed out.\", stdout_filename)\n                return\n            if self.widelands_returncode != 0:\n                if self.widelands_returncode == 1 and self.ignore_error_code:\n                    self.out_status(' IGN ', f'IGNORING error code 1')\n                else:\n                    self.fail(\"FAILED\", \"Widelands exited abnormally.\", stdout_filename)\n                    return\n            if not \"All Tests passed\" in stdout or \"lua_errors.cc\" in stdout:\n                self.fail(\"FAILED\", \"Not all tests pass.\", stdout_filename)\n                return\n            self.step_success(stdout_filename)\n\n    def print_report(self):\n        print(f'{colorize(self.result, self.get_result_color())}: {self.test_script}\\n')\n        print(self.report_header)\n        print(group_start, end='')\n        print(colorize(\"stdout:\", info_color))\n        for stdout_fn in self.outputs:\n            with open(stdout_fn, \"r\") as stdout:\n                for line in stdout:\n                    line = colorize_log(line)\n                    print(line, end='')\n        print(group_end, end='')\n\n\n# For parallel execution of tests\ndef recommended_workers(binary):\n    cpu_count = multiprocessing.cpu_count()\n\n    # Widelands uses 2 threads, but the logic thread is much more heavy,\n    # so we give each Widelands instance one full CPU for the logic thread\n    # while we let the graphic threads of up to 3 instances share one CPU.\n    max_threads_cpu = 1\n    if cpu_count > 2 :\n        max_threads_cpu = cpu_count - 1 - (cpu_count - 1) // 4\n\n    # Also test memory as a limiting factor\n    if psutil != None:\n        mem_per_instance = 1500 # MB - default for debug builds\n\n        widelands = subprocess.run([binary, '--version'], shell=False, encoding='utf-8', capture_output=True)\n        firstline = widelands.stdout.splitlines(keepends=False)[0]\n        firstline_OK = False\n        if firstline.startswith('This is Widelands version'):\n            if firstline.endswith('Release'):\n                mem_per_instance = 800 # MB\n                firstline_OK = True\n            elif firstline.endswith('Debug'):\n                firstline_OK = True\n        if not firstline_OK:\n            print('Cannot parse build type from stdout:', firstline)\n\n        max_threads_mem = max(1, psutil.virtual_memory().available // (mem_per_instance * 1000 * 1000))\n        mem_avail = psutil.virtual_memory().available / 1000 / 1000 / 1000 # GB, not GiB :)\n        mem_total = psutil.virtual_memory().total / 1000 / 1000 / 1000\n        print(f\"{cpu_count} CPUs, {mem_avail:.1f}/{mem_total:.1f} gigabytes memory free\")\n        return min(max_threads_cpu, max_threads_mem)\n    else:\n        return max_threads_cpu\n\ndef find_binary():\n    # Prefer binary from source directory\n    for potential_binary in (\n        glob(os.path.join(os.curdir, \"widelands\")) +\n        glob(os.path.join(os.path.dirname(__file__), \"widelands\")) +\n        glob(os.path.join(\"build\", \"src\", \"widelands\")) +\n        glob(os.path.join(\"src\", \"widelands\")) +\n        glob(os.path.join(\"..\", \"*\", \"src\", \"widelands\"))\n    ):\n        if os.access(potential_binary, os.X_OK):\n            return potential_binary\n\n    # Fall back to binary in $PATH if possible\n    return shutil.which(\"widelands\")\n\n    return None\n\ndef check_binary(binary):\n    # Prefer binary from source directory instead of PATH\n    if os.path.dirname(binary) == '' and os.access(binary, os.X_OK):\n        return os.path.join(os.curdir, binary)\n\n    if shutil.which(binary) != None:\n        return binary\n\n    if os.path.dirname(binary) != '' and os.access(binary, os.X_OK):\n        return binary\n\n    for potential_path in [ os.curdir, os.path.dirname(__file__) ]:\n        fullpath = os.path.join(potential_path, binary)\n        if os.access(fullpath, os.X_OK):\n            return fullpath\n\n    return None\n\ndef parse_args():\n    p = argparse.ArgumentParser(description=\n        \"Run the regression tests suite.\"\n    )\n\n    p.add_argument(\"-r\", \"--regexp\", type=str,\n        help = \"Run only the tests from the files which filename matches.\"\n    )\n    p.add_argument(\"-n\", \"--nonrandom\", action=\"store_true\", default = False,\n        help = \"Do not randomize the directories for the tests. This is useful \"\n        \"if you want to run a test more often than once and not reopen stdout.txt \"\n        \"in your editor.\"\n    )\n    p.add_argument(\"-k\", \"--keep-around\", action=\"store_true\", default = False,\n        help = \"Keep the output files around even when a test terminates successfully.\"\n    )\n    p.add_argument(\"-b\", \"--binary\", type=str,\n        help = \"Run this binary as Widelands. Otherwise some default paths are searched.\"\n    )\n    p.add_argument(\"-i\", \"--ignore-error-code\", action=\"store_true\", default = False,\n        help = \"Assume success on return code 1, to allow running the tests \"\n        \"without ASan reporting false positives.\"\n    )\n    p.add_argument(\"-j\", \"--workers\", type=int, default = 0,\n        help = \"Use this many parallel workers.\"\n    )\n    p.add_argument(\"-p\", \"--plain\", \"--nocolor\", action=\"store_true\", default = False,\n        help = \"Don't use ANSI color sequences in the output.\"\n    )\n    p.add_argument(\"-t\", \"--timeout\", type=float, default = \"10\",\n        help = \"Set the timeout duration for test cases in minutes. Default is 10 minutes.\"\n    )\n\n    args = p.parse_args()\n\n    if args.binary is None:\n        args.binary = find_binary()\n        if args.binary is None:\n            p.error(\"No widelands binary found. Please specify with -b.\")\n    else:\n        args.binary = check_binary(args.binary)\n        if args.binary is None:\n            p.error(\"The specified widelands binary is not found.\")\n\n    if args.nonrandom:\n        if args.workers != 1:\n            args.workers = 1\n            print(\"Only one worker is possible with --nonrandom!\")\n        if args.keep_around:\n            print(\"--nonrandom is not recommended with --keep-around, some files will be overwritten!\")\n\n    if args.workers == 0:\n        args.workers = recommended_workers(args.binary)\n\n    return args\n\n\ndef discover_loadgame_tests(regexp, suite):\n    \"\"\"Add all tests using --loadgame to the 'suite'.\"\"\"\n    # Savegames with custom scripts\n    for fixture in sorted(glob(os.path.join(\"test\", \"save\", \"*\"))):\n        if not os.path.isdir(fixture):\n            continue\n        savegame = sorted(glob(os.path.join(fixture, \"*.wgf\")))[0]\n        for test_script in sorted(glob(os.path.join(fixture, \"test*.lua\"))):\n            if regexp is not None and not re.search(regexp, test_script):\n                continue\n            suite.append(\n                    WidelandsTestCase(test_script,\n                        loadgame=savegame, script=test_script))\n    # Savegames without custom script, just test loading\n    test_script = os.path.join(\"test\", \"scripting\", \"load_and_quit.lua\")\n    for savegame in sorted(glob(os.path.join(\"test\", \"save\", \"*.wgf\"))):\n        if regexp is not None and not re.search(regexp, savegame):\n            continue\n        suite.append(WidelandsTestCase(savegame, loadgame=savegame, script=test_script))\n\ndef discover_scenario_tests(regexp, suite):\n    \"\"\"Add all tests using --scenario to the 'suite'.\"\"\"\n    for wlmap in sorted(glob(os.path.join(\"test\", \"maps\", \"*\"))):\n        if not os.path.isdir(wlmap):\n            continue\n        for test_script in sorted(glob(os.path.join(wlmap, \"scripting\", \"test*.lua\"))):\n            if regexp is not None and not re.search(regexp, test_script):\n                continue\n            suite.append(\n                    WidelandsTestCase(test_script,\n                        scenario=wlmap, script=test_script))\n\ndef discover_game_template_tests(regexp, suite):\n    \"\"\"Add all tests using --new_game_from_template to the 'suite'.\"\"\"\n    for templ in sorted(glob(os.path.join(\"test\", \"templates\", \"test*.wgt\"))):\n        if not os.path.isfile(templ):\n            continue\n        test_script = templ[:-3] + 'lua'\n        if not os.path.isfile(test_script):\n            print(f\"WARNING: Game template test { templ }: corresponding script { test_script } not found - Skipping.\")\n            continue\n        if regexp is not None and not re.search(regexp, test_script):\n            continue\n        suite.append(\n                WidelandsTestCase(test_script,\n                    new_game_from_template=templ, script=test_script))\n\ndef discover_editor_tests(regexp, suite):\n    \"\"\"Add all tests needing --editor to the 'suite'.\"\"\"\n    for wlmap in sorted(glob(os.path.join(\"test\", \"maps\", \"*\"))):\n        if not os.path.isdir(wlmap):\n            continue\n        for test_script in sorted(glob(os.path.join(wlmap, \"scripting\", \"editor_test*.lua\"))):\n            if regexp is not None and not re.search(regexp, test_script):\n                continue\n            suite.append(\n                    WidelandsTestCase(test_script,\n                        editor=wlmap, script=test_script))\n\ndef main():\n    args = parse_args()\n\n    global use_colors\n    use_colors = not args.plain\n    WidelandsTestCase.path_to_widelands_binary = args.binary\n    print(f\"Using '{args.binary}' binary.\")\n    WidelandsTestCase.do_use_random_directory = not args.nonrandom\n    WidelandsTestCase.keep_output_around = args.keep_around\n    WidelandsTestCase.ignore_error_code = args.ignore_error_code\n    WidelandsTestCase.timeout = args.timeout * 60\n\n    test_cases = []\n    discover_loadgame_tests(args.regexp, test_cases)\n    discover_scenario_tests(args.regexp, test_cases)\n    discover_game_template_tests(args.regexp, test_cases)\n    discover_editor_tests(args.regexp, test_cases)\n\n    print(f\"Will run { len(test_cases) } tests with { args.workers } workers.\\n\")\n\n    start_time = get_time()\n\n    if args.workers == 1:\n        # Single-threaded execution is special-cased for nicer grouping.\n        for test_case in test_cases:\n            test_case.run()\n    else:\n        # Parallel execution\n        with cf.ThreadPoolExecutor(max_workers = args.workers) as executor:\n            futures = {executor.submit(test_case.run): test_case for test_case in test_cases}\n            for future in cf.as_completed(futures):\n                if future.exception():\n                    raise future.exception()\n\n    end_time = get_time()\n\n    separator = '\\n' + \\\n        colorize('---------------------------------------------------------------------------',\n            separator_color) + '\\n'\n\n    nr_errors = 0\n    results = dict()\n    for test_case in test_cases:\n        # Skipped test cases are logged, but don't count as failure\n        if test_case.report_header != None:\n            print(separator)\n            test_case.print_report()\n            if test_case.result in results.keys():\n                results[test_case.result].append(test_case.test_script)\n            else:\n                results[test_case.result] = [ test_case.test_script ]\n        if not test_case.success:\n            nr_errors += 1\n\n    print(separator)\n\n    summary_common = f'Ran {len(test_cases)} test cases in {(end_time - start_time):.3f} s,'\n\n    if nr_errors == 0:\n        print(summary_common, colorize('all tests passed.', success_color))\n        return True\n\n    for result,tests in results.items():\n        print(f'{len(tests)} tests {result}:')\n        for test_name in tests:\n            print(f'     {test_name}')\n    print(separator)\n    print(summary_common, f'{len(test_cases) - nr_errors} tests passed,',\n          colorize(f'{nr_errors} tests failed!', error_color))\n    return False\n\nif __name__ == '__main__':\n    sys.exit(0 if main() else 1)\n"
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "test",
          "type": "tree",
          "content": null
        },
        {
          "name": "utils",
          "type": "tree",
          "content": null
        },
        {
          "name": "valgrind.supp",
          "type": "blob",
          "size": 1.4892578125,
          "content": "{\n   glXCreateContextLeak\n   Memcheck:Leak\n   ...\n   fun:glXCreateContext\n   ...\n}\n{\n   libGLX_mesa4\n   Memcheck:Addr4\n   ...\n   obj:*libGLX_mesa.so*\n   ...\n}\n{\n   libGLX_mesa8\n   Memcheck:Addr8\n   ...\n   obj:*libGLX_mesa.so*\n   ...\n}\n{\n   glXCreateContextLeak\n   Memcheck:Leak\n   ...\n   fun:glXCreateContext\n   ...\n}\n{\n   glXCreateContext4\n   Memcheck:Addr4\n   ...\n   fun:glXCreateContext\n   ...\n}\n{\n   glXCreateContext8\n   Memcheck:Addr8\n   ...\n   fun:glXCreateContext\n   ...\n}\n{\n   driverLeak\n   Memcheck:Leak\n   ...\n   obj:*i965_dri.so\n   ...\n}\n{\n   driver1\n   Memcheck:Addr1\n   ...\n   obj:*965_dri.so\n   ...\n}\n{\n   driver2\n   Memcheck:Addr2\n   ...\n   obj:*i965_dri.so\n   ...\n}\n{\n   driver4\n   Memcheck:Addr4\n   ...\n   obj:*i965_dri.so\n   ...\n}\n{\n   driver8\n   Memcheck:Addr8\n   ...\n   obj:*i965_dri.so\n   ...\n}\n{\n   driver16\n   Memcheck:Addr16\n   ...\n   obj:*i965_dri.so\n   ...\n}\n{\n   SDL2Leak\n   Memcheck:Leak\n   ...\n   obj:*libSDL2*\n}\n{\n   GLibLeak\n   Memcheck:Leak\n   ...\n   obj:*libglib*\n   ...\n}\n{\n   X11Leak\n   Memcheck:Leak\n   ...\n   obj:*X11*\n   ...\n}\n{\n   LibsLeak\n   Memcheck:Leak\n   ...\n   obj:*linux-gnu/lib*\n   ...\n}\n{\n   ZipWriteValue8\n   Memcheck:Value8\n   ...\n   fun:zipWriteInFileInZip\n   ...\n}\n{\n   ZipWriteCond\n   Memcheck:Cond\n   ...\n   fun:zipWriteInFileInZip\n   ...\n}\n{\n   ZipCloseCond\n   Memcheck:Cond\n   ...\n   fun:zipCloseFileInZip\n   ...\n}\n{\n   ZipCloseParam\n   Memcheck:Param\n   write(buf)\n   ...\n   fun:zipCloseFileInZip\n   ...\n}\n{\n   ErisLeak\n   Memcheck:Leak\n   ...\n   fun:l_alloc\n   ...\n}\n"
        },
        {
          "name": "xdg",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}