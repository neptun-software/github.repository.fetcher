{
  "metadata": {
    "timestamp": 1736565223455,
    "page": 24,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjMw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "rime/weasel",
      "stars": 4848,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".clang-format",
          "type": "blob",
          "size": 0.0419921875,
          "content": "BasedOnStyle: Chromium\nSortIncludes: false\n"
        },
        {
          "name": ".exclude_pattern.txt",
          "type": "blob",
          "size": 0.1015625,
          "content": "stdafx\ntargetver\nresource.h\nwinapifamily\nwinpackagefamily\nwinsparkle\nimmdev.h\nSystemTraySDK.h\nctffunc.h\n"
        },
        {
          "name": ".git-blame-ignore-revs",
          "type": "blob",
          "size": 0.0615234375,
          "content": "# apply clang format\n21d2bf9df4227c2f1a738002130a47265e70ada8\n\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.5791015625,
          "content": "Debug/\nRelease/\nReleaseHant/\n/output/*.exp\n/output/*.ilk\n/output/*.iobj\n/output/*.ipdb\n/output/*.pdb\n/output/*.lib\n/output/*.exe\n/output/*.dll\n/output/*.ime\n/output/*.txt\n/output/*.bat\n/output/data/essay.txt\n/output/data/opencc/\n/output/data/*.yaml\n/output/archives\n/lib/*.lib\n/include/glog\n/include/rime*.h\n/ipch\nenv.bat\nweasel.props\n*.log\n*.user\n*.suo\n*.sdf\n*.opensdf\n*.aps\n*~\n.*.swp\n*.swp\n.vs\nThumbs.db\n/.idea\n/cmake-build-debug\n*.VC.db\nrelease-notes.html\n*.7z\nRELEASE_CHANGELOG.md\ndeps/\narm64x_wrapper/*.o\narm64x_wrapper/*.dll\narm64x_wrapper/*.ime\narm64x_wrapper/*.lib\narm64x_wrapper/*.exp"
        },
        {
          "name": ".gitmodules",
          "type": "blob",
          "size": 0.1494140625,
          "content": "[submodule \"librime\"]\n\tpath = librime\n\turl = https://github.com/rime/librime.git\n[submodule \"plum\"]\n\tpath = plum\n\turl = https://github.com/rime/plum.git\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 51.55078125,
          "content": "<a name=\"0.16.3\"></a>\n## [0.16.3](https://github.com/rime/weasel/compare/0.16.2...0.16.3)(2024-10-04)\n\n#### Bug Fixes\n* release channel feed_url not correct. ([fxliang](https://github.com/rime/weasel/commit/0c8bb0f01a929f46160482ae2f4492bed560b7b9))\n* invalid quick return ([Xuesong Peng](https://github.com/rime/weasel/commit/4da263727e16362f01054f6f0bb7522e83ae1e06))\n\n#### Chores\n* add update\\bump-version.ps1 to bump version in powershell, when clog is not required ([fxliang](https://github.com/rime/weasel/commit/8770fb3ed1b4341b7875c1d60e98bfa5b42f8ac7))\n* update bump-version.sh, appcast.xml and testing-appcast.xml[skip ci] ([fxliang](https://github.com/rime/weasel/commit/91d5e4e224a0d73b8303a6ce10f03c71dace5cdd))\n\n#### Continuous Integration\n* release and update testing appcast only in rime/weasel ([fxliang](https://github.com/rime/weasel/commit/4af83b6e17f7c3cf78257dd300f4adadbffa1083))\n\n<a name=\"0.16.2\"></a>\n## [0.16.2](https://github.com/rime/weasel/compare/0.16.1...0.16.2) (2024-09-28)\n\n#### 安裝須知\n\n**⚠️如您由0.16.0之前的版本升級，由於參數變化，安裝小狼毫前請保存好文件資料，於安裝後重啓或註銷 Windows，否則正在使用小狼毫的應用可能會崩潰。**\n\n**⚠如您由0.16.0之前的版本升級，請確認您的 `installation.yaml` 文件編碼爲 `UTF-8`, 否則如您在其中修改了非 ASCII 字符內容的路徑時，有可能會引起未明錯誤。**\n\n#### 主要更新\n* 新特性：支持自動檢查更新使用測試通道，使用`WeaselSetup.exe`參數可修改，`/testing`使用測試通道，`/release`使用發佈版本，默認後者；\n* 新特性：`WeaselSetup.exe`參數設置界面語言，设置后覆盖区域设置的自动检测。`/lt`設置爲繁體中文界面，`/ls` 設置爲簡體中文界面，`/le`設置爲英文界面\n* 新特性：`WeaselSetup.exe`參數設置是否使用自動檢查更新，`/du`禁用自動檢查更新，`/eu`使用自動檢查更新\n* 新特性：安裝器彈窗提示設置是否自動檢查升級\n* 新特性：開關IME消息響應狀態可配置，`WeaselSetup.exe`參數`/toggleime`設置關閉鍵盤（原版本狀態），`/toggleascii`切換`ascii_mode`,安裝默認後者 #1364\n* 新特性：支持xmake 2.9.4以上版本構建，使用`xbuild.bat`開展，相關參數基本同`build.bat`, 使用`xbuild.bat commands`可生成`compile_commands.json`便於lsp使用，`xbuild.bat clean`可清空xmake構建 #1360\n* 新特性：支持`Caps_Lock` 按鍵binding（如選重）,需将`key_binder`置于`ascii_composer`之前\n* 使能TSF dll中的WER\n* nightly 構建後自動更新rime/home頁面更新測試通道appcast\n* 升級lint檢查使用的llvm最低版本至18.1.6, 更新ci脚本检查更新llvm\n\n#### Bug 修復\n\n* 修復安裝器在系統未滿足要求時未中斷的問題\n* 修復重新安裝時舊的安於路徑未保持的問題\n* 修復界面語言根據區域格式未正確設置的問題\n* 修復IPC通信時因新舊版本變更引起的異常崩潰的問題\n* 修正代碼編碼格式\n* 修復清空舊log文件\n* 修復控制面板卸載界面中的圖標顯示問題\n* 修復`style/hover_type`爲`\"semi_hilite\"`在首候選時的顯示異常問題\n* 修復新版librime產物未能直接替換使用問題\n* 禁用IPC通信的異步機制，修復一些因異步機制引發的應用異常\n* 修復構建腳本不能重生成正確的版本信息問題\n* 修復一些vs工程配置設置，處理一些deprecated API警告\n\n\n<a name=\"0.16.1\"></a>\n## [0.16.1](https://github.com/rime/weasel/compare/0.16.0...0.16.1) (2024-06-06)\n\n\n#### 安裝須知\n\n**⚠️如您由0.16.0之前的版本升級，由於參數變化，安裝小狼毫前請保存好文件資料，於安裝後重啓或註銷 Windows，否則正在使用小狼毫的應用可能會崩潰。**\n\n**⚠如您由0.16.0之前的版本升級，請確認您的 `installation.yaml` 文件編碼爲 `UTF-8`, 否則如您在其中修改了非 ASCII 字符內容的路徑時，有可能會引起未明錯誤。**\n\n#### 主要更新\n* 爲`WeaselServer.exe`使能Windows Error Reporting, 提供對應的`WeaselServer.pdb`文件, 在`WeaselServer.exe`崩潰時可以生成dmp報告文件在日誌文件夾中\n* 提供`WeaselServer.exe`守護，在服務崩潰後6個按鍵事件（三次擊鍵Down&Up)後拉起服務\n* 新增英文界面語言\n* 更新7z和curl到最新版本，修復一些因爲7z的bug引起的問題\n* 優化預覽圖PNG文件大小\n* 新增語言欄菜單，打開日誌文件夾，調整日誌文件夾路徑爲`%TEMP%\\rime.weasel`,方便查閱管理\n* 異步處理消息，避免服務崩潰時長時間未響應引起客戶端程序崩潰\n* 不在服務中部署方案，避免在守護拉起服務進入長耗時部署引起的僵死問題\n\n#### Bug 修復\n\n* 修復自動折行未正確處理標點符號（標點在折行後最前）的問題\n* 修復`vim-mode`下的typo引起的`<C-C>`無法生效問題\n* 修復部署消息未更新問題\n* 修復卸載小狼毫時意外安裝語言包問題\n* 修復`semi_hilite`下的UI未正確響應問題, `semi_hilite`顏色調整爲高亮色的半透明度狀態，改善體驗\n* 減少不必要的服務端UI更新，提高性能減少服務崩潰機率\n* 修復在非`DPI=96`的副屏上響應慢的問題\n* 修復在高分屏上layout參數未dpi aware問題\n* 修復Windows 11下Chrome等瀏覽器中非激活光標狀態下的按鍵響應異常問題\n* 修復64位系統下默認安裝路徑不準確的問題\n\n\n\n<a name=\"0.16.0\"></a>\n## [0.16.0](https://github.com/rime/weasel/compare/0.15.0...0.16.0) (2024-05-14)\n\n\n#### 安裝須知\n\n**⚠️由於參數變化，安裝小狼毫前請保存好文件資料，於安裝後重啓或註銷 Windows，否則正在使用小狼毫的應用可能會崩潰。**\n\n**⚠請確認您的 `installation.yaml` 文件編碼爲 `UTF-8`, 否則如您在其中修改了非 ASCII 字符內容的路徑時，有可能會引起未明錯誤。**\n\n#### 主要更新\n\n* 升級核心算法庫至 [librime 1.11.2](https://github.com/rime/librime/releases/tag/1.11.2)\n* 改善輸入法病毒誤報問題\n* 新增 64 位算法服務程序，支持 64 位 librime，支持大內存（可部署大規模詞庫方案）\n* 支持 arm/arm64 架構\n* 單安裝包支持 win32/x64/arm/arm64 架構系統的自動釋放文件\n* 32 位算法服務增加 LARGE ADDRESS AWARE 支持\n* 升級 boost 算法庫至 1.84.0\n* IME改爲可選項，默認不安裝\n* 棄用 `weaselt*.dll`，增加註冊香港、澳門、新加坡區域語言配置（默認未啓用，需在控制面板/設置中手工添加）；支持簡繁體小狼毫同時使能\n* 棄用 `weaselt*.ime`\n* 移除 `pyweasel`\n* 候選窗口 UI 內存優化\n* 改善候選窗口 UI 繪製性能\n* 升級 WTL 庫至 10.0，gdi+ 至 1.1\n* 每顯示器 dpi aware，自適應不同顯示器不同 dpi 設定變化\n* 更新高清圖標\n* 增大 IPC 數據長度限制至 64k，支持長候選\n* 升級 plum\n* 應用界面及菜單簡繁體自動適應\n* `app_options` 中應用名大小寫不敏感\n* 字體抗鋸齒設定參數 `style/antialias_mode: {force_dword|cleartype|grayscale|aliased|default}`\n* ASCII狀態提示跟隨鼠標光標設定 `style/ascii_tip_follow_cursor: bool`\n* 新增參數 `style/layout/hilite_padding_x: int`、`style/layout/hilite_padding_y: int`，支持分別設置xy向的 padding\n* 新增參數 `schema/full_icon: string`, `schema/half_icon: string`，支持在方案中設定全半角圖標\n* 新增參數 `style/text_orientation: \"horizontal\" | \"vertical\"`, 與 `style/vertical_text: bool` 冗餘，設定文字繪製方向，兼容 squirrel 參數\n* 新增參數 `style/paging_on_scroll: bool`，可設定滾輪相應類型（翻頁或切換前後候選）\n* 新增參數，Windows10 1809後版本的Windows，支持 `style/color_scheme_dark: string` 設定暗色模式配色\n* 新增參數 `style/candidate_abbreviate_length: int`，支持候選字數超限時縮略顯示\n* 新增參數 `style/click_to_capture: bool` 設定鼠標點擊是否截圖\n* 新增參數 `show_notifications_time: int` 可設定提示顯示時間，單位 ms；設置 0 時不顯示提示\n* 新增參數 `show_notifications: bool` 或 `show_notifications: 開關列表 | \"schema\"`，可定製是否顯示切換提示、顯示那些切換提示\n* 新增參數 `style/layout/baseline: int` 和 `style/layout/linespacing: int`，可自行調整參數修復候選窗高度跳躍閃爍問題\n* 棄用 `style/mouse_hover_ms`；新增 `style/hover_type: \"none\"|\"semi_hilite\"|\"hilite\"`，改善鼠標懸停相應體驗\n* 新增參數 `global_ascii: bool`, 支持全局 ascii 模式\n* 新增 `app_options`，支持應用專用 `vim_mode: bool`，支持常見 vim 切換 normal 模式按鍵時，切換到 `ascii_mode`\n* 新增 `app_options`，支持應用專用 `inline_preedit: bool` 設定，優先級高於方案內設定，高於 `weasel.yaml` 中的設定\n* 支持命令行設置小狼毫 `ascii_mode` 狀態，`WeaselServer.exe /ascii`，`WeaselServer.exe /nascii`\n* 支持設置 `comment_text_color`、`hilited_comment_text_color` 透明來隱藏對應文字顯示\n* `hilited_mark_color` 非透明，`mark_text` 爲空字符串時，類 windowns 11 的高亮標識\n* 切換方案後，提示方案圖標和方案名字\n* 支持全部 switch 提示使用方案內設定的 label\n* WeaselSetup通過打開目錄窗口設置用戶目錄路徑\n* 新增支持方案內定義方案專用配色\n* 支持 imtip\n* 增加類微軟拼音的高亮標識在鼠標點擊時的動態\n* 支持在字體設定任一分組中設置字體整體的字重或字形\n* 優化點擊選字邏輯\n* 豎直佈局反轉時，互換上下方向鍵\n* 候選窗超出下方邊界時，在當前合成結束前保持在輸入位置上方，減少候選窗口高度變小時潛在的窗口上下跳動\n* 調整 TSF 光標位置（`inline_preedit: false` 時），減少光標閃爍\n* WeaselSetup 修改用戶目錄路徑（已安裝時）\n* 語言欄新增菜單，重啓服務\n* IPC 報文轉義 `\\n`、`\\t`，不再因 `\\n` 引發應用崩潰\n* 使用 clang-format 格式化代碼，統一代碼風格\n* 自動文件版本信息\n* 測試項目 test 只在 debug 配置狀態下編譯構建\n\n#### Bug 修復\n\n* 修復 word 365 中候選窗閃爍無法正常顯示的問題\n* 修復 word 行尾輸入時候選窗反覆跳動問題\n* 修復 word 中無法點擊選詞問題\n* 修復 excel 等應用中，第一鍵 keydown 時未及時彈出候選窗問題\n* 修復導出詞典數據後引起的多個 explorer 進程的問題，優化對應對話框界面顯示\n* 修復打開用戶目錄，程序目錄引起的多個 explorer.exe 進程問題，支持服務未啓動時打開這些目錄\n* 修復系統托盤重啓後未及時顯示的問題\n* 修復 `style/layout/min_width` 在部分佈局下未生效問題\n* 修復 preedit 寬高計算錯誤問題\n* 修復翻頁按鈕在豎直佈局反轉時位置錯誤\n* 修復豎直佈局帶非空 mark_text 時的計算錯誤\n* 修復 composing 中候選窗隨文字移動問題\n* 修復 wezterm gpu 模式下無法使用問題\n* 修復 `style/inline_preedit: true` 時第一鍵輸入時候選窗位置錯誤\n* 修復算法服務單例運行\n* 修復調用 WeaselServer.exe 未正常重啓服務問題\n* 修復偶發的顯卡關聯文字空白問題\n* 修復部署過程中如按鍵輸入引發的重複發出 tip 提示窗問題\n* 修復部分方案中的圖標顯示（`english.schema.yaml`）\n* 修復 `preedit_type: preview` 時的光標錯誤問題\n* 修復 `shadow_color` 透明時截圖尺寸過大問題，減小截圖尺寸\n* 修復天園地方時，高亮候選圓角半徑不正確問題\n* 修復某些狀態下天園地方的 preedit 背景色圓角異常問題\n* 修復候選尾部空白字符引起的佈局計算錯誤問題\n* 修復 mark_text 繪製鋸齒問題\n* 修復靜默安裝彈窗問題\n* 修復 librime-preedit 引起的應用崩潰問題\n* 修復 plum 用戶目錄識別錯誤問題\n* 修復安裝後未在控制面板中添加輸入法、卸載後未刪除控制面板中的輸入法清單問題\n* 修復一些其他已知的 bug\n\n#### 已知問題\n\n* 部分應用仍存在輸入法無法輸入文字或響應異常的問題\n* WeaselServer 仍可能發生崩潰\n* 仍有極少部分防病毒軟件可能誤報病毒\n\n\n\n<a name=\"0.15.0\"></a>\n## [0.15.0](https://github.com/rime/weasel/compare/0.14.3...0.15.0) (2023-06-06)\n\n\n#### 安裝須知\n\n**⚠️安裝小狼毫前請保存好文件資料，於安裝後重啓 Windows ，否則正在使用小狼毫的應用將會崩潰。**\n**⚠️此版本的小狼毫需要使用 Windows 8.1 或更高版本的操作系統。**\n\n#### 主要更新\n\n* 升級核心算法庫至 [librime 1.8.5](https://github.com/rime/librime/blob/master/CHANGELOG.md#185-2023-02-05)\n* DPI 根據顯示器自動調整\n* 支持候選窗口等圓角顯示\n  * `style/layout/corner_radius: int`\n* 兼容鼠鬚管中高亮圓角參數`style/layout/hilited_corner_radius: int`\n* 支持主題顏色中含有透明通道代碼, 支持格式 0xaabbggrr，0xbbggrr, 0xabgr, 0xbgr\n* 配色主題支持默認ABGR順序，或ARGB、RGBA順序\n  * `preset_color_schemes/color_scheme/color_format: \"argb\" | \"rgba\" | \"\"`\n* 支持編碼/高亮候選/普通候選/輸入窗口/候選邊框的陰影顏色繪製\n  * `style/layout/shadow_radius: int`\n  * `style/layout/shadow_offset_x: int`\n  * `style/layout/shadow_offset_y: int`\n  * `preset_color_schemes/color_scheme/shadow_color: color`\n  * `preset_color_schemes/color_scheme/nextpage_color: color`\n  * `preset_color_schemes/color_scheme/prevpage_color: color`\n  * `preset_color_schemes/color_scheme/candidate_back_color: color`\n  * `preset_color_schemes/color_scheme/candidate_shadow_color: color`\n  * `preset_color_schemes/color_scheme/candidate_border_color: color`\n  * `preset_color_schemes/color_scheme/hilited_shadow_color: color`\n  * `preset_color_schemes/color_scheme/hilited_candidate_shadow_color: color`\n  * `preset_color_schemes/color_scheme/hilited_candidate_border_color: color`\n  * `preset_color_schemes/color_scheme/hilited_mark_color: color`\n* 支持自定義標籤、註解字體及字號\n  * `style/label_font_face: string`\n  * `style/comment_font_face: string`\n  * `style/label_font_point: int`\n  * `style/comment_font_point: int`\n  * `style/layout/align_type: \"top\" | \"center\" | \"bottom\"`\n* 支持指定字符 Unicode 區間字體設定\n* 支持字重，字形風格設定\n  * `style/font_face: font_name[:start_code_point:end_code_point][:weight_set][:style_set][,font2...]`\n    * example: `\"Segoe UI Emoji:20:39:bold:italic, Segoe UI Emoji:1f51f:1f51f, Noto Color Emoji SVG:80, Arial:600:6ff, Segoe UI Emoji:80, LXGW Wenkai Narrow\"`\n* 支持自定义字体回退範圍、順序定义\n* 彩色字體支持\n  * Windows 10 周年版前：需要使用 COLR 格式彩色字體\n  * Windows 11 ：可以使用 SVG 字體\n* 新增豎直文字佈局\n  * `style/vertical_text: bool`\n  * `style/vertical_text_left_to_right: bool`\n  * `style/vertical_text_with_wrap: bool`\n* 新增豎直佈局vertical窗口上移時自動倒序排列\n  * `style/vertical_auto_reverse: bool`\n* 新增「天圓地方」佈局：由 margin 與 hilite_padding 確定, 當margin <= hilite_padding時生效\n* margin_x 或 margin_y 設置爲負值時，隱藏輸入窗口，不影響方案選單顯示\n* 新增 preedit_type: preview_all ，在輸入時將候選項顯示於 composition 中\n  * `style/preedit_type: \"composition\" | \"preview\" | \"preview_all\"`\n* 新增輸入法高亮提示標記\n  * `style/mark_text: string`\n* 新增輸入方案圖標顯示，可在語言欄中顯示，文件格式爲ico\n  * `schema/icon: string`\n  * `schema/ascii_icon: string`\n* 新增選項，允許在光標位置獲取失敗時於窗口左上角繪製候選框（而不是桌面左上角）\n  * `style/layout/enhanced_position: bool`\n* 新增鼠標點擊截圖到剪貼板功能\n* 新增選項，支持越長自動折行/換列顯示\n  * `style/layout/max_width: int`\n  * `style/layout/max_height: int`\n* 支持方案內設定配色\n  * `style/color_scheme: string`\n* 支持多行内容顯示，\\r, \\n, \\r\\n均支持\n* 支持方案內設定配色\n* 繪製性能提升\n* composition 模式下新增下劃線顯示\n* 隨二進制文件提供調試符號\n\n#### Bug 修復\n\n* 轉義日文鍵盤中特殊按鍵\n* 候選文字過長時崩潰\n* 修復用戶目錄下無 `default.custom.yaml` 或 `weasel.custom.yaml` 時，設定窗口無法彈出的問題\n* 方案中設定inline_preedit爲true時，部署後編碼末端出現異常符號\n* 部分應用無法輸入文字的問題\n* 修復部署時無顯示提示的問題\n* 修復中文路徑相關問題\n* 修復右鍵菜單打開程序目錄/用戶目錄時，資源管理器無響應的問題\n* 修復部分內存訪問問題\n* 修復操作系統 / WinGet 無法識別小狼毫版本號的問題\n* 修復 composition 模式下光標位置不正常的問題\n* 修復 Word 中小狼毫工作不正常的問題\n* 若干開發環境配置問題修復\n\n#### 已知問題\n\n* 部分應用仍存在輸入法無法輸入文字的問題\n* WeaselServer 仍可能發生崩潰\n* 部分防病毒軟件可能誤報病毒\n\n\n\n<a name=\"0.14.3\"></a>\n## 0.14.3 (2019-06-22)\n\n\n#### 主要更新\n\n* 升級核心算法庫 [librime 1.5.3](https://github.com/rime/librime/blob/master/CHANGELOG.md#153-2019-06-22)\n  * 修復 `single_char_filter` 組件\n  * 完善上游項目 `librime` 的全自動發佈流程，免去手工上傳構建結果的步驟\n\n\n\n<a name=\"0.14.2\"></a>\n## 0.14.2 (2019-06-17)\n\n\n#### 主要更新\n\n* 升級核心算法庫 [librime 1.5.2](https://github.com/rime/librime/blob/master/CHANGELOG.md#152-2019-06-17)\n  * 修復用戶詞的權重，穩定造句質量、平衡翻譯器優先級 [librime#287](https://github.com/rime/librime/issues/287)\n  * 建議 0.14.1 版本用家升級\n\n\n\n<a name=\"0.14.1\"></a>\n## 0.14.1 (2019-06-16)\n\n\n#### 主要更新\n\n* 升級核心算法庫 [librime 1.5.1](https://github.com/rime/librime/blob/master/CHANGELOG.md#151-2019-06-16)\n  * 修復未裝配語言模型時缺省的造句算法 ([weasel#383](https://github.com/rime/weasel/issues/383))\n\n\n\n<a name=\"0.14.0\"></a>\n## 0.14.0 (2019-06-11)\n\n\n#### 主要更新\n\n* 升級核心算法庫 [librime 1.5.0](https://github.com/rime/librime/blob/master/CHANGELOG.md#150-2019-06-06)\n  * 遷移到VS2017構建工具；建設安全可靠的全自動構建、發佈流程\n  * 通過更新第三方庫，修復userdb文件夾大量佔用磁盤空間的問題\n  * 將Rime插件納入自動化構建流程。本次發行包含兩款插件：\n    - [librime-lua](https://github.com/hchunhui/librime-lua)\n    - [librime-octagram](https://github.com/lotem/librime-octagram)\n* 高清重製真彩輸入法狀態圖標\n\n\n#### Features\n\n* **ui:**  high-res status icons; display larger icons in WeaselPanel ([093fa806](https://github.com/rime/weasel/commit/093fa80678422f972e7a7285060553eeedb0e591))\n\n\n\n<a name=\"0.13.0\"></a>\n## 0.13.0 (2019-01-28)\n\n\n#### 主要更新\n\n* 升級核心算法庫 [librime 1.4.0](https://github.com/rime/librime/blob/master/CHANGELOG.md#140-2019-01-16)\n  * 新增 [拼寫糾錯](https://github.com/rime/librime/pull/228) 選項\n    當前僅限 QWERTY 鍵盤佈局及使用 `script_translator` 的方案\n  * 修復升級、部署數據時發生的若干錯誤\n* 更換輸入法狀態圖標，適配高分辨率屏幕\n\n\n#### Features\n\n* **tsf:**  register as GUID_TFCAT_TIPCAP_UIELEMENTENABLED ([ae876916](https://github.com/rime/weasel/commit/ae8769166ea50b319aa89460b60890d598c618c5))\n* **ui:**  high-res icons (#324) ([ad3e2027](https://github.com/rime/weasel/commit/ad3e2027644f80c6a384b7730da20dd239e780af))\n\n#### Bug Fixes\n\n* **WeaselSetup.vcxproj:**  Debug build linker options ([eb885fe0](https://github.com/rime/weasel/commit/eb885fe06ffd720d3de1101be2410a94bd3747c0))\n* **output/install.nsi:**  bundle new yaml files from rime/rime-prelude ([cba35e9b](https://github.com/rime/weasel/commit/cba35e9b2c34d095b9ca1eb44e923e004cf23ddc))\n* **test:**  Debug build ([c771126c](https://github.com/rime/weasel/commit/c771126c74fa1c4f91d4bfd8fb5ab8c16dcb7c4c))\n* **tsf:**  set current page to 0 as page count is always 1 ([5447f63b](https://github.com/rime/weasel/commit/5447f63bc7c9d0e31d7ba8ead1e1229938be276d))\n\n\n\n<a name=\"0.12.0\"></a>\n## 0.12.0  (2018-11-12)\n\n#### 主要更新\n\n* 合併小狼毫與小狼毫（TSF）兩種輸入法\n* 合併32位與64位系統下的安裝程序\n* 使用系統的關閉輸入法功能（默認快捷鍵 Ctrl + Space）後，輸入法圖標將顯示禁用狀態\n* 修復一些情況下的崩潰問題\n* 升級核心算法庫 [librime 1.3.2](https://github.com/rime/librime/blob/master/CHANGELOG.md#132-2018-11-12)\n  * 允許多個翻譯器共用同一個詞典時的組詞，實現固定單字順序的形碼組詞([librime#184](https://github.com/rime/librime/issues/184))。\n  * 新增 translator/always_show_comments 選項，允許始終顯示候選詞註解。\n\n#### Bug Fixes\n\n* **candidate:** fix COM pointer reference ([63d6d9a](https://github.com/rime/weasel/commit/63d6d9a))\n* **ipc:** eliminate some trivial warnings ([dae945c](https://github.com/rime/weasel/commit/dae945c))\n* fix constructor ([b25f968](https://github.com/rime/weasel/commit/b25f968))\n\n\n#### Features\n\n* **compartment:** show IME disabled on language bar ([#263](https://github.com/rime/weasel/issues/263)) ([4015d18](https://github.com/rime/weasel/commit/4015d18))\n* **install:** combine IME and TSF ([#257](https://github.com/rime/weasel/issues/257)) ([91cbd2c](https://github.com/rime/weasel/commit/91cbd2c))\n* **tsf:** get IME keyboard identifier by searching registry ([#272](https://github.com/rime/weasel/issues/272)) ([b60b5b1](https://github.com/rime/weasel/commit/b60b5b1))\n* **WeaselSetup:** detect 64-bit on single 32-bit build ([#266](https://github.com/rime/weasel/issues/266)) ([fb3ae0f](https://github.com/rime/weasel/commit/fb3ae0f))\n\n\n\n<a name=\"0.11.1\"></a>\n## 0.11.1 (2018-04-26)\n\n#### 主要更新\n\n* 修復了在 Excel 中奇怪的輸入丟失問題（[#185](https://github.com/rime/weasel/issues/185)）\n* 功能鍵不再會觸發輸入焦點（[#194](https://github.com/rime/weasel/issues/194)、[#195](https://github.com/rime/weasel/issues/195)、[#204](https://github.com/rime/weasel/issues/204)）\n* 「獲取更多輸入方案」功能優化（[#180](https://github.com/rime/weasel/issues/180)）\n* 修復了後臺可能同時出現多個算法服務的問題（[#199](https://github.com/rime/weasel/issues/199)）\n* 恢復語言欄右鍵菜單中「用戶資料同步」一項\n\n#### Bug Fixes\n\n* **server:**  use kernel mutex to ensure single instance (#207) ([bd0c4720](https://github.com/rime/weasel/commit/bd0c4720669c61087dd930b968640c60a526ecb2))\n* **tsf:**\n  *  do not reset composition on document focus set ([124fc947](https://github.com/rime/weasel/commit/124fc9475c30963a9bbbf9a097b452b52e8ab658))\n  *  use `ITfContext::GetSelection` to get cursor position ([5664481c](https://github.com/rime/weasel/commit/5664481cc9ddd28db35c3155f7ddf83a55b65275))\n  *  recover sync option in TSF language bar menu ([7a0a8cc2](https://github.com/rime/weasel/commit/7a0a8cc2a3dd913ce34204d6e966b263af766f3b))\n\n#### Features\n\n* **build.bat:**  build installer ([e18117b7](https://github.com/rime/weasel/commit/e18117b7b42d5af0fbfa807e4c858c40206b4967))\n* **installer:**  bundle curl, update rime-install.bat, fixes #180 ([2f3b283d](https://github.com/rime/weasel/commit/2f3b283d6ef4aa0580d186e626dadb9e1030dfd5))\n* **rime-install.bat:**  built-in ZIP package installer ([739be9bc](https://github.com/rime/weasel/commit/739be9bc9ba08e294f51e1d7232407148ded716c))\n\n\n\n<a name=\"0.11.0\"></a>\n## 0.11.0 (2018-04-07)\n\n#### 主要更新\n\n* 新增 [Rime 配置管理器](https://github.com/rime/plum)，通過「輸入法設定／獲取更多輸入方案」調用\n* 在輸入法語言欄顯示狀態切換按鈕（TSF 模式）\n* 修復多個前端兼容性問題\n* 新增配色主題「現代藍」`metroblue`、「幽能」`psionics`\n* 安裝程序支持繁體中文介面\n* 修復 0.10 版升級安裝後，因用戶文件夾中保留舊文件、配置不生效的問題\n* 升級 0.9 版 `.kct` 格式的用戶詞典\n  **注意**：僅此一個版本支持格式升級，請務必由 0.9 升級到 0.11，再安裝後續版本\n\n#### Features\n\n* **WeaselDeployer:**  add Get Schemata button to run plum script (#174) ([c786bb5b](https://github.com/rime/weasel/commit/c786bb5ba2f1cc7e79b66f36d0190e61cd7233ae))\n* **build.bat:**  customize PLATFORM_TOOLSET settings ([c7a9a4fb](https://github.com/rime/weasel/commit/c7a9a4fb530e0274450e4296cb0db2906d2f1fb4))\n* **config:**\n  *  enable customization of label format ([76b08bae](https://github.com/rime/weasel/commit/76b08bae810735c5f1c8626ec39a7afd463f0269))\n  *  alias `style/layout/border_width` to `style/layout/border` ([013eefeb](https://github.com/rime/weasel/commit/013eefebaa4474e7814b6cfb6c905bcc12543a7f))\n* **install.nsi:**\n  *  add Traditional Chinese for installer ([d1a9696a](https://github.com/rime/weasel/commit/d1a9696a57dfc9e04c51899572e156fb1676f786))\n  *  upgrade to Modern UI 2 and prompt reboot (#128) ([f59006f8](https://github.com/rime/weasel/commit/f59006f8d195ca848e45cd934f44b3318fb135c1))\n* **ipc:**  specify user name for named pipe ([2dfa5e1a](https://github.com/rime/weasel/commit/2dfa5e1a63ee1c26ef983d25471682f87cc60b62))\n* **preset_color_schemes:**\n  *  add homepage featured color scheme `psionics` ([89a0eb8b](https://github.com/rime/weasel/commit/89a0eb8b861b9b3f2abc42df65821254010b24ff))\n  *  add metroblue color scheme ([f43e2af6](https://github.com/rime/weasel/commit/f43e2af608bde38a6d345ba540f4c37ec024853a))\n* **submodules:**  switch from rime/brise to rime/plum ([f3ff5aa9](https://github.com/rime/weasel/commit/f3ff5aa962a7b8cce2b74a5cb583a69cb8938e55))\n* **tsf:**\n  *  enable language bar button (#170) ([2b660397](https://github.com/rime/weasel/commit/2b660397950f348205e6a93bf44a46e4a72bcc81))\n  *  accomplish candidate UI interfaces (#156) ([1f0ae793](https://github.com/rime/weasel/commit/1f0ae7936fd495ecf4ff3ef162c0e38297d2d582))\n  *  fix candidate selecting in preview preedit mode ([206efd69](https://github.com/rime/weasel/commit/206efd692124339d0e256198360c1860c72cd807))\n  *  support user defined preedit display type ([f76379b0](https://github.com/rime/weasel/commit/f76379b01abe9d3971d68e2e272067e0bb855cc9))\n* **weasel.yaml:**  enable ascii_mode in console applications by default ([28cdd096](https://github.com/rime/weasel/commit/28cdd09692f77e471784bf85ff7a19bc48e113f4))\n\n#### Bug Fixes\n\n*   fix defects according to Coverity Scan ([526a91d2](https://github.com/rime/weasel/commit/526a91d2954492cc8e23c2c4c8def2a053af7c20))\n*   inline_preedit && fullscreen causing dead lock when there's no candidates. ([deb0bb24](https://github.com/rime/weasel/commit/deb0bb24b3f3aeaf73aef344968b7f15b471443f))\n* **RimeWithWeasel:**  fix wild pointer ([ae2e3c4a](https://github.com/rime/weasel/commit/ae2e3c4a256fb9a2f7851c54114822d1bfbf0316))\n* **ServerImpl:**  do finalization before exit process ([b1bae01e](https://github.com/rime/weasel/commit/b1bae01eb25c5e24e074807b7b3cb8a6d8401276))\n* **WeaselUI:**\n  *  specify default label format in constructor ([4374d244](https://github.com/rime/weasel/commit/4374d2440b99726894799861fb3bd5b93e73dec5), closes [#147](https://github.com/rime/weasel/issues/147))\n  *  limit to subscript range when processing candidates ([6b686c71](https://github.com/rime/weasel/commit/6b686c717bfab141469c3d48ec1c6acbeb79921e), closes [#121](https://github.com/rime/weasel/issues/121))\n* **composition:**\n  *  improve compositions and edit sessions (#146) ([fbdb6679](https://github.com/rime/weasel/commit/fbdb66791da3291b740edf3c337032674e4377e8))\n  *  fix crashes in notebook with inline preedit ([5e257088](https://github.com/rime/weasel/commit/5e257088be823a2569609f0b3591af3a51d47a46))\n  *  fix crashes in notebook with inline preedit ([892930ce](https://github.com/rime/weasel/commit/892930cebc4235a0a1ef58803fe88c32ccc8b4e9))\n* **install.bat:**  run in elevate cmd; detach WeaselServer process ([2194d9fb](https://github.com/rime/weasel/commit/2194d9fbd7d0341fef94efdbe9268af8a6237438))\n* **ipc:**\n  *  add version check for security descriptor initialization ([b97ccffe](https://github.com/rime/weasel/commit/b97ccffe76a6abf3e353724ce0607d5dd97de6f2), closes [#157](https://github.com/rime/weasel/issues/157))\n  *  grant access to IE protected mode ([16c163a4](https://github.com/rime/weasel/commit/16c163a41d0afc9824723009ba8b9b9ba37b1c72))\n  *  try to reconnect when failed ([3c286b6a](https://github.com/rime/weasel/commit/3c286b6a942769abf13188d88f9ab5e4c125807b))\n* **librime:**  make rime_api.h available in librime\\build\\include\\ ([3793e22c](https://github.com/rime/weasel/commit/3793e22c47b34c61d305ca80567dfdafe08b2302))\n* **server:**  postpone tray icon updating when focusing on explorer ([45cf1120](https://github.com/rime/weasel/commit/45cf112099fa6db335cda06b1aaa0ae9c7975efe))\n* **tsf:**\n  *  fix candidate behavior ([9e2f9f17](https://github.com/rime/weasel/commit/9e2f9f17c059bf129c2c8b2561471670ea200dd7))\n  *  fix `ITfCandidateListUIElement` implemention ([9ce1fa87](https://github.com/rime/weasel/commit/9ce1fa87e6ef788e791e68193700e2ebdd950d20))\n  *  use commmit text preview to show inline preview ([b1d1ec43](https://github.com/rime/weasel/commit/b1d1ec43e132998ea8764d8dac2098a2b3d9a3e8))\n\n\n\n<a name=\"0.10.0\"></a>\n## 小狼毫 0.10.0 (2018-03-14)\n\n\n#### 主要更新\n\n* 兼容 Windows 8 ~ Windows 10\n* 支持高分辨率顯示屏\n* 介面風格選項\n  * 在內嵌編碼行預覽結果文字\n  * 可指定候選序號的樣式\n* 升級核心算法庫 [librime 1.3.0](https://github.com/rime/librime/blob/master/CHANGELOG.md#130-2018-03-09)\n  * 支持 YAML 節點引用，方便模塊化配置\n  * 改進部署流程，在 `build` 子目錄集中存放生成的數據文件\n* 精簡安裝包預裝的輸入方案，更多方案可由 [東風破](https://github.com/rime/plum) 取得\n\n#### Features\n\n* **build.bat:**  customize PLATFORM_TOOLSET settings ([c7a9a4fb](https://github.com/rime/weasel/commit/c7a9a4fb530e0274450e4296cb0db2906d2f1fb4))\n* **config:**\n  *  enable customization of label format ([76b08bae](https://github.com/rime/weasel/commit/76b08bae810735c5f1c8626ec39a7afd463f0269))\n  *  alias `style/layout/border_width` to `style/layout/border` ([013eefeb](https://github.com/rime/weasel/commit/013eefebaa4474e7814b6cfb6c905bcc12543a7f))\n* **tsf:**\n  *  fix candidate selecting in preview preedit mode ([206efd69](https://github.com/rime/weasel/commit/206efd692124339d0e256198360c1860c72cd807))\n  *  support user defined preedit display type ([f76379b0](https://github.com/rime/weasel/commit/f76379b01abe9d3971d68e2e272067e0bb855cc9))\n\n#### Bug Fixes\n\n*   Support High DPI Display [#28](https://github.com/rime/weasel/issues/28)\n* **WeaselUI:**  limit to subscript range when processing candidates ([6b686c71](https://github.com/rime/weasel/commit/6b686c717bfab141469c3d48ec1c6acbeb79921e), closes [#121](https://github.com/rime/weasel/issues/121))\n* **install.bat:**  run in elevate cmd; detach WeaselServer process ([2194d9fb](https://github.com/rime/weasel/commit/2194d9fbd7d0341fef94efdbe9268af8a6237438))\n* **librime:**  make rime_api.h available in librime\\build\\include\\ ([3793e22c](https://github.com/rime/weasel/commit/3793e22c47b34c61d305ca80567dfdafe08b2302))\n* **tsf:**\n  *  Results of auto-selection cleared by subsequent manual selection [#107](https://github.com/rime/weasel/issues/107)\n  *  use commmit text preview to show inline preview ([b1d1ec43](https://github.com/rime/weasel/commit/b1d1ec43e132998ea8764d8dac2098a2b3d9a3e8))\n\n\n\n<a name=\"0.9.30\"></a>\n## 小狼毫 0.9.30 (2014-04-01)\n\n\n#### Rime 算法庫變更集\n\n* 新增：中西文切換方式 `clear`，切換時清除未完成的輸入\n* 改進：長按 Shift（或 Control）鍵不觸發中西文切換\n* 改進：並擊輸入，若按回車鍵則上屏按鍵對應的字符\n* 改進：支持對用戶設定中的列表元素打補靪，例如 `switcher/@0/reset: 1`\n* 改進：缺少詞典源文件 `*.dict.yaml` 時利用固態詞典 `*.table.bin` 完成部署\n* 修復：自動組詞的詞典部署時未檢查【八股文】的變更，導致索引失效、候選字缺失\n* 修復：`comment_format` 會對候選註釋重複使用多次的BUG\n\n#### 【東風破】變更集\n\n* 新增：快捷鍵 `Control+.` 切換中西文標點\n* 更新：【八股文】【朙月拼音】【地球拼音】【五筆畫】\n* 改進：【朙月拼音·語句流】`/0` ~ `/10` 輸入數字符號\n\n\n\n<a name=\"0.9.29.1\"></a>\n## 小狼毫 0.9.29.1 (2013-12-22)\n\n\n#### 【小狼毫】變更集\n\n* 變更：不再支持 Windows XP SP2，因升級編譯器以支持 C++11\n* 修復：輸入語言選爲中文（臺灣）在 Windows 8 系統上出現多餘的輸入法選項\n* 修復：升級安裝後，外觀設定介面未及時顯示出新增的配色方案\n* 修復：配色方案 Google+ 的預覽圖\n\n#### Rime 算法庫變更集\n\n* 更新：librime 升級到 1.1\n* 新增：固定方案選單排列順序的選項 `default.yaml`: `switcher/fix_schema_list_order: true`\n* 修復：正確匹配嵌套的“‘彎引號’”\n* 改進：碼表輸入法自動上屏及頂字上屏（[示例](https://gist.github.com/lotem/f879a020d56ef9b3b792)）<br/>\n    若有 `speller/auto_select: true`，則選項 `speller/max_code_length:` 限定第N碼無重碼自動上屏\n* 優化：爲詞組自動編碼時，限制因多音字而產生的組合數目，避免窮舉消耗過量資源\n\n#### 【東風破】變更集\n\n* 更新：【粵拼】匯入衆多粵語詞彙\n* 優化：調整部分異體字的字頻\n\n\n\n<a name=\"0.9.28\"></a>\n## 小狼毫 0.9.28 <2013-12-01>\n\n\n#### 【小狼毫】變更集\n\n* 新增：一組配色方案，作者：P1461、Patricivs、skoj、五磅兔\n* 修復：[Issue 528](https://code.google.com/p/rimeime/issues/detail?id=528) Windows 7 IE11 文字無法上屏\n* 修復：[Issue 531](https://code.google.com/p/rimeime/issues/detail?id=531) Windows 8 卸載輸入法後在輸入法列表中有殘留項\n* 變更：註冊輸入法時同時啓用 IME、TSF 模式\n\n#### Rime 算法庫變更集\n\n* 更新：librime 升級到 1.0\n* 改進：`affix_segmentor` 支持向匹配到的代碼段添加標籤 `extra_tags`\n* 修復：`table_translator` 按字符集過濾候選字，修正對 CJK-D 漢字的判斷\n\n#### 【東風破】變更集\n\n* 優化：【粵拼】兼容[教育學院拼音方案](http://zh.wikipedia.org/wiki/%E6%95%99%E8%82%B2%E5%AD%B8%E9%99%A2%E6%8B%BC%E9%9F%B3%E6%96%B9%E6%A1%88)\n* 更新：`symbols.yaml` 由 Patricivs 重新整理符號表\n* 更新：Emoji 提供更加豐富的繪文字（需要字體支持）\n* 更新：【八股文】【朙月拼音】【地球拼音】【中古全拼】修正錯別字、註音錯誤\n\n\n\n<a name=\"0.9.27\"></a>\n## 小狼毫 0.9.27 (2013-11-06)\n\n\n#### 【小狼毫】變更集\n\n* 變更：動態鏈接 `rime.dll`，減小程序文件的體積\n* 修復：嘗試解決 Issue 487 避免服務進程以 SYSTEM 帳號執行\n* 新增：開始菜單項「安裝選項」，Vista 以降提示以管理員權限啓動\n* 優化：更換圖標，解決 Windows 8 TSF 圖標不清楚的問題\n\n#### Rime 算法庫變更集\n\n* 優化：同步用戶資料時自動備份自定義短語等 .txt 文件\n* 修復：【地球拼音】反查拼音失效的問題\n* 變更：編碼提示不再添加括弧（，）及逗號，可自行設定樣式\n\n#### 輸入方案設計支持\n\n* 新增：`affix_segmentor` 分隔編碼的前綴、後綴\n* 改進：`translator` 支持匹配段落標籤\n* 改進：`simplifier` 支持多個實例，匹配段落標籤\n* 新增：`switches:` 輸入方案選項支持多選一\n* 新增：`reverse_lookup_filter` 爲候選字標註指定種類的輸入碼\n\n#### 【東風破】變更集\n\n* 更新：【粵拼】補充大量單字的註音\n* 更新：【朙月拼音】【地球拼音】導入 Unihan 讀音資料\n* 改進：【地球拼音】【注音】啓用自定義短語\n* 新增：【注音·臺灣正體】\n* 修復：【朙月拼音·簡化字】通過快捷鍵 `Control+Shift+4` 簡繁切換\n* 改進：【倉頡五代】開啓繁簡轉換時，提示簡化字對應的傳統漢字\n* 變更：間隔號採用「·」`U+00B7`\n\n\n\n<a name=\"0.9.26.1\"></a>\n## 小狼毫 0.9.26.1 (2013-10-09)\n\n* 修復：從上一個版本升級【倉頡】輸入方案不會自動更新的問題\n\n\n\n<a name=\"0.9.26\"></a>\n## 小狼毫 0.9.26 (2013-10-08)\n\n* 新增：【倉頡】開啓自動造詞<br/>\n  連續上屏的5字（依設定）以內的組合，或以連打方式上屏的短語，\n  按構詞規則記憶爲新詞組；再次輸入該詞組的編碼時，顯示「☯」標記\n* 變更：【五筆】開啓自動造詞；從碼表中刪除與一級簡碼重碼的鍵名字\n* 變更：【地球拼音】當以簡拼輸入時，爲5字以內候選標註完整帶調拼音\n* 新增：【五筆畫】輸入方案（`stroke`），取代 `stroke_simp`\n* 新增：支持在輸入方案中設置介面樣式（`style:`）<br/>\n  如字體、字號、橫排／直排等；配色方案除外\n* 修復：多次按「.」鍵翻頁後繼續輸入，不應視爲網址而在編碼中插入「.」\n* 修復：開啓候選字的字符集過濾，導致有時不出現連打候選詞的 BUG\n* 修復：`table_translator` 連打組詞時產生的內存泄漏（0.9.25.2）\n* 修復：爲所有用戶創建開始菜單項\n* 更新：修訂【八股文】詞典、【朙月拼音】【地球拼音】【粵拼】【吳語】\n* 更新：2013款 Rime 輸入法圖標\n\n\n\n<a name=\"0.9.25.2\"></a>\n## 小狼毫 0.9.25.2 (2013-07-26)\n\n* 改進：碼表輸入法連打，Shift+BackSpace 以字、詞爲單位回退\n* 修復：演示模式下開啓內嵌編碼行、查無候選字時程序卡死\n\n\n\n<a name=\"0.9.25.1\"></a>\n## 小狼毫 0.9.25.1 (2013-07-25)\n\n* 新增：開始菜單項「檢查新版本」，手動升級到最新測試版\n* 新增：【地球拼音】5 字內候選標註完整帶調拼音\n\n\n\n<a name=\"0.9.25\"></a>\n## 小狼毫 0.9.25 (2013-07-24)\n\n* 新增：演示模式（全屏的輸入窗口）`style/fullscreen: true`\n* 新增：【倉頡】按快趣取碼規則生成常用詞組\n* 修復：【地球拼音】「-」鍵輸入第一聲失效的BUG\n* 更新：拼音、粵拼等輸入方案\n* 更新：`symbols.yaml` 增加一批特殊字符\n\n\n\n<a name=\"0.9.24\"></a>\n## 小狼毫 0.9.24 (2013-07-04)\n\n* 新增：支持全角模式\n* 更新：中古漢語【全拼】【三拼】輸入方案；三拼亦採用全拼詞典\n* 修復：大陸與臺灣異讀的字「微」「檔」「蝸」「垃圾」等\n* 修復：繁簡轉換錯詞「么么哒」\n* 新增：（輸入方案設計用）可設定對特定類型的候選詞不做繁簡轉換<br/>\n  如不轉換反查字使用選項 `simplifier/excluded_types: [ reverse_lookup ]`\n* 新增：（輸入方案設計用）干預多個 translator 之間的結果排序<br/>\n  選項 `translator/initial_quality: 0`\n* 修復：用戶詞典未能完整支持 `derive` 拼寫運算產生的歧義切分\n\n\n\n<a name=\"0.9.23\"></a>\n## 小狼毫 0.9.23 (2013-06-09)\n\n* 改進：方案選單按選用輸入方案的時間排列\n* 新增：快捷鍵 Control+Shift+1 切換至下一個輸入方案\n* 新增：快捷鍵 Control+Shift+2~5 切換輸入模式\n* 新增：初次安裝時由用戶指定輸入語言：中文（中國／臺灣）\n* 新增：可屏蔽符合 fuzz 拼寫規則的單字候選，僅以其輸入詞組<br/>\n  選項 `translator/strict_spelling: true`\n* 改進：綜合候選詞的詞頻和詞條質量比較不同 translator 的結果\n* 修復：自定義短語不應參與組詞\n* 修復：八股文錯詞及「鏈」字無法以簡化字組詞的 BUG\n\n\n\n<a name=\"0.9.22.1\"></a>\n## 小狼毫 0.9.22.1 (2013-04-24)\n\n* 修復：禁止自定義短語參與造句\n* 修復：GVim 裏進入命令模式或在插入模式換行錯使輸入法重置爲初始狀態\n\n\n\n<a name=\"0.9.22\"></a>\n## 小狼毫 0.9.22 (2013-04-23)\n\n* 新增：配色方案【曬經石】／Solarized Rock\n* 新增：Control+BackSpace 或 Shift+BackSpace 回退一個音節\n* 新增：固態詞典可引用多份碼表文件以實現分類詞庫\n* 新增：在輸入方案中加載翻譯器的多個具名實例\n* 新增：以選項 `translator/user_dict:` 指定用戶詞典的名稱\n* 新增：支持從用戶文件夾加載文本碼表作爲自定義短語詞典<br/>\n  【朙月拼音】系列自動加載名爲 `custom_phrase.txt` 的碼表\n* 修復：繁簡轉換使無重碼自動上屏失效的 BUG\n* 修復：若非以 Caps Lock 鍵進入西文模式，<br/>\n  按 Caps Lock 只切換大小寫，不返回中文模式\n* 變更：`r10n_translator` 更名爲 `script_translator`，舊名稱仍可使用\n* 變更：用戶詞典快照改爲文本格式\n* 改進：【八股文】導入《萌典》詞彙，並修正了不少錯詞\n* 改進：【倉頡五代】打單字時，以拉丁字母和倉頡字母並列顯示輸入碼\n* 改進：使自動生成的 YAML 文檔更合理地縮排、方便閱讀\n* 改進：碼表中 `# no comments` 行之後不再識別註釋，以支持 `#` 作文字內容\n* 改進：檢測到因斷電造成用戶詞典損壞時，自動在後臺線程恢復數據文件\n\n\n\n<a name=\"0.9.20\"></a>\n## 小狼毫 0.9.20 (2013-02-01)\n\n* 變更：Caps Lock 燈亮時默認輸出大寫字母 [Gist](https://gist.github.com/2981316)\n  升級安裝後若 Caps Lock 的表現不正確，請註銷並重新登錄\n* 新增：無重碼自動上屏 `speller/auto_select:`<br/>\n  輸入方案【倉頡·快打模式】\n* 改進：允許以空格做輸入碼，或作爲符號頂字上屏<br/>\n  `speller/use_space:`, `punctuator/use_space:`\n* 改進：【注音】輸入方案以空格輸入第一聲（陰平）\n* 新增：特殊符號表 `symbols.yaml` 用法見↙\n* 改進：【朙月拼音·簡化字】以 `/ts` 等形式輸入特殊符號\n* 改進：標點符號註明〔全角〕〔半角〕\n* 優化：同步用戶資料時更聰明地備份用戶自定義的 YAML 文件\n* 修復：避免創建、使用不完整的詞典文件\n* 修復：糾正用戶詞典中無法調頻的受損詞條\n* 修復：用戶詞典管理／輸出詞典快照後定位文件出錯\n* 修復：TSF 內嵌輸入碼沒有反選效果、候選窗位置頻繁變化\n\n\n\n<a name=\"0.9.19.1\"></a>\n## 小狼毫 0.9.19.1 (2013-01-16)\n\n* 新增：Caps Lock 點亮時，切換到西文模式，輸出小寫字母<br/>\n  選項 `ascii_composer/switch_key/Caps_Lock:`\n* 修復：Control + 字母编辑键在临时西文模式下无效\n* 修復：用戶詞典有可能因讀取時 I/O 錯誤導致部份詞序無法調整\n* 改進：用戶詞典同步／合入快照的字頻合併算法\n\n\n\n<a name=\"0.9.18.6\"></a>\n## 小狼毫 0.9.18.6 (2013-01-09)\n\n* 修復：從 0.9.16 及以下版本升級用戶詞典出錯\n\n\n\n<a name=\"0.9.18.5\"></a>\n## 小狼毫 0.9.18.5 (2013-01-07)\n\n* 修復：含簡化字的候選詞不能以音節爲單位移動光標\n* 改進：同步用戶資料時也備份用戶修改的YAML文件\n\n\n\n<a name=\"0.9.18\"></a>\n## 小狼毫 0.9.18 (2013-01-05)\n\n* 新增：同步用戶詞典，詳見 [Wiki » UserGuide](https://code.google.com/p/rimeime/wiki/UserGuide)\n* 新增：上屏錯誤的詞組後立即按回退鍵（BackSpace）撤銷組詞\n* 改進：拼音輸入法中，按左方向鍵以音節爲單位移動光標\n* 修復：【地球拼音】不能以 - 鍵輸入第一聲\n\n\n\n<a name=\"0.9.17.1\"></a>\n## 小狼毫 0.9.17.1 (2012-12-25)\n\n* 修復：設置爲默認輸入語言後再安裝，IME 註冊失敗\n* 修復：啓用托盤圖標的選項無效\n* 新增：從開始菜單訪問用戶文件夾的快捷方式\n* 修復：【小鶴雙拼】拼音 an 顯示錯誤\n\n\n\n<a name=\"0.9.17\"></a>\n## 小狼毫 0.9.17 (2012-12-23)\n\n* 新增：切換模式、輸入方案時，短暫顯示狀態圖標\n* 新增：隱藏托盤圖標，設定、部署、詞典管理請用開始菜單。<br/>\n  配置項 `style/display_tray_icon:`\n* 修復BUG：TSF 前端在 MS Office 裏不能正常上屏中文\n* 刪除：默認不啓用 TSF 前端，如有需要可在「文本服務與輸入語言」設置對話框添加。\n* 新增：分別以 `` ` ' `` 標誌編碼反查的開始結束，例如 `` `wbb'yuepinyin ``\n* 改進：形碼與拼音混打的設定下，降低簡拼候選的優先級，以降低對逐鍵提示的干擾\n* 優化：控制用戶詞典文件大小，提高大容量（詞條數>100,000）時的查詢速度\n* 刪除：因有用家向用戶詞典導入巨量詞條，故取消自動備份的功能，後續代之以用戶詞典同步\n* 修復：【小鶴雙拼】diao, tiao 等拼音回顯錯誤\n* 更新：【朙月拼音】【地球拼音】【粵拼】修正用戶反饋的註音錯誤\n\n\n\n<a name=\"0.9.16\"></a>\n## 小狼毫 0.9.16 (2012-10-20)\n\n* 新增：TSF 輸入法框架（測試階段）及嵌入式編碼行\n* 新增：支持 IE 8 ~ 10 的「保護模式」\n* 新增：識別 gVim 模式切換\n* 新增：開關碼表輸入法連打功能的設定項 `translator/enable_sentence: `\n* 修復：「語句流」模式直接回車上屏不能記憶用戶詞組的BUG\n* 改進：部署時自動編譯輸入方案的自訂依賴項，如自選的反查碼\n* 改進：更精細的排版，修正註釋文字寬度、調整間距\n* 改進：未曾翻頁時按減號鍵，不上屏候選字及符號「-」以免誤操作\n* 變更：《注音》以逗號或句號（<> 鍵）上屏句子，書名號改用 [] 鍵\n* 更新：《朙月拼音》《地球拼音》《粵拼》，修正多音字\n* 更新：《上海吳語》《上海新派》，修正註音\n* 新增：寒寒豆作《蘇州吳語》輸入方案，方案標識爲 `soutzoe`\n* 新增：配色方案【谷歌／Google】，skoj 作品\n\n\n\n<a name=\"0.9.15\"></a>\n## 小狼毫 0.9.15 (2012-09-12)\n\n* 新增：橫排候選欄——歡迎 wishstudio 同學加入開發！\n* 新增：綠色安裝工具 WeaselSetup，註冊輸入語言、自訂用戶目錄\n* 新增：碼表輸入法啓用用戶詞典、字頻調整\n* 優化：自動編譯輸入方案依賴項，如五筆·拼音的反查詞典\n* 修改：日誌系統改用glog，輸出到 `%TEMP%\\rime.weasel.*`\n* 修復：托盤圖標在重新登錄後不可見的BUG\n* 更新：【明月拼音】【粵拼】【吳語】修正註音錯誤、缺字\n\n\n\n<a name=\"0.9.14.2\"></a>\n## 小狼毫 0.9.14.2 (2012-07-13)\n\n* 重新編譯了 `opencc.dll` 安全軟件不吭氣了\n\n\n\n<a name=\"0.9.14.1\"></a>\n## 小狼毫 0.9.14.1 (2012-07-07)\n\n* 解決【中古全拼】不可用的問題\n\n\n\n<a name=\"0.9.14\"></a>\n## 小狼毫 0.9.14 (2012-07-05)\n\n* 介面採用新的 Rime logo，狀態圖示用較柔和的顏色\n* 新特性：碼表方案支持與反查碼混合輸入，無需切換或引導鍵\n* 新特性：碼表方案可在選單中使用字符集過濾開關\n* 新方案：【五筆86】衍生的【五筆·拼音】混合輸入\n* 新方案：《廣韻》音系的中古漢語全拼、三拼輸入法\n* 新方案：X-SAMPA 國際音標輸入法\n* 更新：【吳語】碼表，審定一些字詞的讀音，統一字形\n* 更新：【朙月拼音】碼表，修正多音字\n* 改進：當前設定的字體缺字時，使用系統後備字體顯示文字\n* 解決與MacType同時使用，Ext-B/C/D區文字排版不正確的問題\n\n\n\n<a name=\"0.9.13\"></a>\n## 小狼毫 0.9.13 (2012-06-10)\n\n* 編碼提示用淡墨來寫，亦可在配色方案中設定顏色\n* 新增多鍵並擊組件及輸入方案【宮保拼音】\n* 未經轉換的輸入如網址等不再顯示爲候選項\n* `default.custom.yaml`: `menu/page_size:` 設定全局頁候選數\n* 新增選項：導入【八股文】詞庫時限制詞語的長度、詞頻\n* 【倉頡】支持連續輸入多個字的編碼（階段成果，不會記憶詞組）\n* 【注音】改爲語句輸入風格，更接近臺灣用戶的習慣\n* 較少用的【筆順五碼】、【速記打字法】不再隨鼠鬚管發行\n* 修復「用戶詞典管理」導入文本碼表不生效的BUG；<br/>\n  部署時檢查並修復已存在於用戶詞典中的無效條目\n* 檢測到用戶詞典文件損壞時，重建詞典並從備份中恢復資料\n* 修改BUG：簡拼 zhzh 因切分歧義使部分用戶詞失效\n\n\n\n<a name=\"0.9.12\"></a>\n## 小狼毫 0.9.12 (2012-05-05)\n\n* 用 Shift+Del 刪除已記入用戶詞典的詞條，詳見 Issue 117\n* 可選用Shift或Control爲中西文切換鍵，詳見 Issue 133\n* 數字後的句號鍵識別爲小數點、冒號鍵識別爲時分秒分隔符\n* 解決在QQ等應用程序中的定位問題\n* 支持設置爲系統默認輸入法\n* 支持多個Windows用戶（新用戶執行一次佈署後方可使用）\n\n\n\n<a name=\"0.9.11\"></a>\n## 小狼毫 0.9.11 (2012-04-14)\n\n* 使用 `express_editor` 的輸入方案中，數字、符號鍵直接上屏\n* 優化「方案選單」快捷鍵操作，連續按鍵選中下一個輸入方案\n* 輸入簡拼、模糊音時提示正音，【粵拼】【吳語】中默認開啓\n* 拼音反查支持預設的多音節詞、形碼反查可開啓編碼補全\n* 修復整句模式運用定長編碼頂字功能導致崩潰的問題\n* 修復碼表輸入法候選排序問題\n* 修復【朙月拼音】lo、yo 等音節的候選錯誤\n* 修復【地球拼音】聲調顯示不正確、部分字的註音缺失問題\n* 【五笔86】反查引導鍵改爲 z、反查詞典換用簡化字拼音\n* 更新【粵拼】詞典，調整常用粵字的排序、增補粵語常用詞\n* 新增輸入方案【小鶴雙拼】、【筆順五碼】\n\n\n\n<a name=\"0.9.10\"></a>\n## 小狼毫 0.9.10 (2012-03-26)\n\n* 記憶繁簡轉換、全／半角符號開關狀態\n* 支持定長編碼頂字上屏\n* 新增「用戶詞典管理」介面\n* 延遲加載繁簡轉換、編碼反查詞典，降低資源佔用\n* 純單字構詞時不調頻\n* 新增輸入方案【速成】，速成、倉頡詞句連打\n* 新增【智能ABC雙拼】、【速記打字法】\n\n\n\n<a name=\"0.9.9\"></a>\n## 小狼毫 0.9.9\n\n* 新增「介面風格設定」，快速選擇預設的六款配色方案\n* 優化長句中字詞的動態調頻\n* 新增【注音】與【地球拼音】輸入方案\n* 支持自訂選詞按鍵\n* 修復編碼反查失效的BUG\n* 修改標點符號「間隔號」及「浪紋」\n\n\n\n<a name=\"0.9.8\"></a>\n## 小狼毫 0.9.8\n\n* 新增「輸入方案選單」設定介面\n* 優化包含簡拼的音節切分\n* 修復部分用戶組詞無效的BUG\n* 新增預設輸入方案「MSPY雙拼」\n\n\n\n<a name=\"0.9.7\"></a>\n## 小狼毫 0.9.7\n\n* 逐鍵提示、反查提示碼支持拼寫運算（如顯示倉頡字母等）\n* 重構部署工具；以 `*.custom.yaml` 文件持久保存自定義設置\n* 製作【粵拼】、【吳語】輸入方案「預發行版」\n\n\n\n<a name=\"0.9.6\"></a>\n## 小狼毫 0.9.6\n\n* 關機時妥善保存數據，降低用戶詞庫損壞機率；執行定期備份\n* 新增基於【朙月拼音】的衍生方案：\n  * 【語句流】，整句輸入，空格分詞，回車上屏\n  * 【雙拼】，兼容自然碼雙拼方案，演示拼寫運算常用技巧\n* 修復BUG：簡拼「z h, c h, s h」的詞候選先於單字簡拼\n* 修復BUG：「拼寫運算」無法替換爲空串\n* 完善拼寫運算的錯誤日誌；清理調試日誌\n\n\n\n<a name=\"0.9.5\"></a>\n## 小狼毫 0.9.5\n\n* Rime 獨門絕活之「拼寫運算」\n* 升級【朙月拼音】，支持簡拼、糾錯；增設【簡化字】方案\n* 升級【倉頡五代】，以倉頡字母顯示編碼\n* 重修配色方案【碧水／Aqua】、【青天／Azure】\n\n\n\n<a name=\"0.9.4\"></a>\n## 小狼毫 0.9.4\n\n* 增設編碼反查功能，預設方案以「`」爲反查的引導鍵\n* 修復Windows XP中西文狀態變更時的通知氣球\n\n\n\n<a name=\"0.9.3\"></a>\n## 小狼毫 0.9.3\n\n* 新增預設輸入方案【五笔86】、【臺灣正體】拼音\n* 以托盤圖標表現輸入法狀態變更\n* 新增輸入法維護模式，更安全地進行部署作業\n* 優化中西文切換、自動識別小數、百分數、網址、郵箱\n\n\n\n<a name=\"0.9.2\"></a>\n## 小狼毫 0.9.2\n\n* 增設半角標點符號\n* 增設Shift鍵切換中／西文模式\n* 繁簡轉換、左Shift切換中西文對當前輸入即時生效\n* 可自定義OpenCC異體字轉換字典\n* 提升碼表查詢效率，更新倉頡七萬字碼表\n* 增設托盤圖標，快速訪問配置管理工具\n* 改進安裝程序\n\n\n\n<a name=\"0.9\"></a>\n## 小狼毫 0.9\n\n* 用C++重寫核心算法（階段成果）\n* 將輸入法介面從前端遷移到後臺服務進程\n* 兼容64位系統\n\n\n\n## 小狼毫 0.1 ~ 0.3\n\n* 以Python開發的實驗版本\n* 獨創「拼寫運算」技術\n* 預裝標調拼音、註音、粵拼、吳語等多種輸入方案\n\r\n"
        },
        {
          "name": "INSTALL.md",
          "type": "blob",
          "size": 2.3662109375,
          "content": "# How to Rime with Weasel\r\n\r\n## Preparation\r\n\r\n  - Install **Visual Studio 2017** for *Desktop development in C++*\r\n    with components *ATL*, *MFC* and *Windows XP support*.\r\n    Visual Studio 2015 or later versions may work with additional configuration.\r\n\r\n  - Install dev tools: `git`, `cmake`， `clang-format(>=17.0.6)`\r\n\r\n  - Download third-party libraries: `boost(>=1.60.0)`\r\n\r\nOptional:\r\n\r\n  - install `bash` via *Git for Windows*, for installing data files with `plum`;\r\n  - install `python` for building OpenCC dictionaries;\r\n  - install [NSIS](http://nsis.sourceforge.net/Download) for creating installer.\r\n\r\n## Checkout source code\r\n\r\nMake sure all git submodules are checked out recursively.\r\n\r\n```batch\r\ngit clone --recursive https://github.com/rime/weasel.git\r\n```\r\n\r\n## Build and Install Weasel\r\n\r\nLocate `weasel` source directory.\r\n\r\n### Setup build environment\r\n\r\nEdit your build environment settings in `env.bat`.\r\nYou can create the file by copying `env.bat.template` in the source tree.\r\n\r\nMake sure `BOOST_ROOT` is set to the existing path `X:\\path\\to\\boost_<version>`.\r\n\r\nWhen using a different version of Visual Studio or platform toolset, un-comment\r\nlines to set corresponding variables.\r\n\r\nAlternatively, start a *Developer Command Prompt* window and set environment\r\nvariables directly in the console, before invocation of `build.bat`:\r\n\r\n```batch\r\nset BOOST_ROOT=X:\\path\\to\\boost_N_NN_N\r\n```\r\n\r\n### Build\r\n\r\n```batch\r\ncd weasel\r\nbuild.bat all\r\n```\r\n\r\nVoila.\r\n\r\nInstaller will be generated in `output\\archives` directory.\r\n\r\n### Alternative: using prebuilt Rime binaries\r\n\r\nIf you've already got a copy of prebuilt binaries of librime, you can simply\r\ncopy `.dll`s / `.lib`s into `weasel\\output` / `weasel\\lib` directories\r\nrespectively, then build Weasel without the `all` command line option.\r\n\r\n```batch\r\nbuild.bat boost data opencc\r\nbuild.bat weasel\r\n```\r\n\r\n### Install and try it live\r\n\r\n```batch\r\ncd output\r\ninstall.bat\r\n```\r\n\r\n### Optional: play with Rime command line tools\r\n\r\n`librime` comes with a REPL application which can be used to test if the library\r\nis working.\r\n\r\n```batch\r\ncd librime\r\ncopy /Y build\\lib\\Release\\rime.dll build\\bin\r\ncd build\\bin\r\necho zhongzhouyunshurufa | Release\\rime_api_console.exe > output.txt\r\n```\r\n\r\nInstead of redirecting output to a file, you can set appropriate code page\r\n(`chcp 65001`) and font in the console to work with the REPL interactively.\r\n"
        },
        {
          "name": "LICENSE.txt",
          "type": "blob",
          "size": 34.9814453125,
          "content": "                    GNU GENERAL PUBLIC LICENSE\r\n                       Version 3, 29 June 2007\r\n\r\n Copyright (C) 2007 Free Software Foundation, Inc. <http://fsf.org/>\r\n Everyone is permitted to copy and distribute verbatim copies\r\n of this license document, but changing it is not allowed.\r\n\r\n                            Preamble\r\n\r\n  The GNU General Public License is a free, copyleft license for\r\nsoftware and other kinds of works.\r\n\r\n  The licenses for most software and other practical works are designed\r\nto take away your freedom to share and change the works.  By contrast,\r\nthe GNU General Public License is intended to guarantee your freedom to\r\nshare and change all versions of a program--to make sure it remains free\r\nsoftware for all its users.  We, the Free Software Foundation, use the\r\nGNU General Public License for most of our software; it applies also to\r\nany other work released this way by its authors.  You can apply it to\r\nyour programs, too.\r\n\r\n  When we speak of free software, we are referring to freedom, not\r\nprice.  Our General Public Licenses are designed to make sure that you\r\nhave the freedom to distribute copies of free software (and charge for\r\nthem if you wish), that you receive source code or can get it if you\r\nwant it, that you can change the software or use pieces of it in new\r\nfree programs, and that you know you can do these things.\r\n\r\n  To protect your rights, we need to prevent others from denying you\r\nthese rights or asking you to surrender the rights.  Therefore, you have\r\ncertain responsibilities if you distribute copies of the software, or if\r\nyou modify it: responsibilities to respect the freedom of others.\r\n\r\n  For example, if you distribute copies of such a program, whether\r\ngratis or for a fee, you must pass on to the recipients the same\r\nfreedoms that you received.  You must make sure that they, too, receive\r\nor can get the source code.  And you must show them these terms so they\r\nknow their rights.\r\n\r\n  Developers that use the GNU GPL protect your rights with two steps:\r\n(1) assert copyright on the software, and (2) offer you this License\r\ngiving you legal permission to copy, distribute and/or modify it.\r\n\r\n  For the developers' and authors' protection, the GPL clearly explains\r\nthat there is no warranty for this free software.  For both users' and\r\nauthors' sake, the GPL requires that modified versions be marked as\r\nchanged, so that their problems will not be attributed erroneously to\r\nauthors of previous versions.\r\n\r\n  Some devices are designed to deny users access to install or run\r\nmodified versions of the software inside them, although the manufacturer\r\ncan do so.  This is fundamentally incompatible with the aim of\r\nprotecting users' freedom to change the software.  The systematic\r\npattern of such abuse occurs in the area of products for individuals to\r\nuse, which is precisely where it is most unacceptable.  Therefore, we\r\nhave designed this version of the GPL to prohibit the practice for those\r\nproducts.  If such problems arise substantially in other domains, we\r\nstand ready to extend this provision to those domains in future versions\r\nof the GPL, as needed to protect the freedom of users.\r\n\r\n  Finally, every program is threatened constantly by software patents.\r\nStates should not allow patents to restrict development and use of\r\nsoftware on general-purpose computers, but in those that do, we wish to\r\navoid the special danger that patents applied to a free program could\r\nmake it effectively proprietary.  To prevent this, the GPL assures that\r\npatents cannot be used to render the program non-free.\r\n\r\n  The precise terms and conditions for copying, distribution and\r\nmodification follow.\r\n\r\n                       TERMS AND CONDITIONS\r\n\r\n  0. Definitions.\r\n\r\n  \"This License\" refers to version 3 of the GNU General Public License.\r\n\r\n  \"Copyright\" also means copyright-like laws that apply to other kinds of\r\nworks, such as semiconductor masks.\r\n\r\n  \"The Program\" refers to any copyrightable work licensed under this\r\nLicense.  Each licensee is addressed as \"you\".  \"Licensees\" and\r\n\"recipients\" may be individuals or organizations.\r\n\r\n  To \"modify\" a work means to copy from or adapt all or part of the work\r\nin a fashion requiring copyright permission, other than the making of an\r\nexact copy.  The resulting work is called a \"modified version\" of the\r\nearlier work or a work \"based on\" the earlier work.\r\n\r\n  A \"covered work\" means either the unmodified Program or a work based\r\non the Program.\r\n\r\n  To \"propagate\" a work means to do anything with it that, without\r\npermission, would make you directly or secondarily liable for\r\ninfringement under applicable copyright law, except executing it on a\r\ncomputer or modifying a private copy.  Propagation includes copying,\r\ndistribution (with or without modification), making available to the\r\npublic, and in some countries other activities as well.\r\n\r\n  To \"convey\" a work means any kind of propagation that enables other\r\nparties to make or receive copies.  Mere interaction with a user through\r\na computer network, with no transfer of a copy, is not conveying.\r\n\r\n  An interactive user interface displays \"Appropriate Legal Notices\"\r\nto the extent that it includes a convenient and prominently visible\r\nfeature that (1) displays an appropriate copyright notice, and (2)\r\ntells the user that there is no warranty for the work (except to the\r\nextent that warranties are provided), that licensees may convey the\r\nwork under this License, and how to view a copy of this License.  If\r\nthe interface presents a list of user commands or options, such as a\r\nmenu, a prominent item in the list meets this criterion.\r\n\r\n  1. Source Code.\r\n\r\n  The \"source code\" for a work means the preferred form of the work\r\nfor making modifications to it.  \"Object code\" means any non-source\r\nform of a work.\r\n\r\n  A \"Standard Interface\" means an interface that either is an official\r\nstandard defined by a recognized standards body, or, in the case of\r\ninterfaces specified for a particular programming language, one that\r\nis widely used among developers working in that language.\r\n\r\n  The \"System Libraries\" of an executable work include anything, other\r\nthan the work as a whole, that (a) is included in the normal form of\r\npackaging a Major Component, but which is not part of that Major\r\nComponent, and (b) serves only to enable use of the work with that\r\nMajor Component, or to implement a Standard Interface for which an\r\nimplementation is available to the public in source code form.  A\r\n\"Major Component\", in this context, means a major essential component\r\n(kernel, window system, and so on) of the specific operating system\r\n(if any) on which the executable work runs, or a compiler used to\r\nproduce the work, or an object code interpreter used to run it.\r\n\r\n  The \"Corresponding Source\" for a work in object code form means all\r\nthe source code needed to generate, install, and (for an executable\r\nwork) run the object code and to modify the work, including scripts to\r\ncontrol those activities.  However, it does not include the work's\r\nSystem Libraries, or general-purpose tools or generally available free\r\nprograms which are used unmodified in performing those activities but\r\nwhich are not part of the work.  For example, Corresponding Source\r\nincludes interface definition files associated with source files for\r\nthe work, and the source code for shared libraries and dynamically\r\nlinked subprograms that the work is specifically designed to require,\r\nsuch as by intimate data communication or control flow between those\r\nsubprograms and other parts of the work.\r\n\r\n  The Corresponding Source need not include anything that users\r\ncan regenerate automatically from other parts of the Corresponding\r\nSource.\r\n\r\n  The Corresponding Source for a work in source code form is that\r\nsame work.\r\n\r\n  2. Basic Permissions.\r\n\r\n  All rights granted under this License are granted for the term of\r\ncopyright on the Program, and are irrevocable provided the stated\r\nconditions are met.  This License explicitly affirms your unlimited\r\npermission to run the unmodified Program.  The output from running a\r\ncovered work is covered by this License only if the output, given its\r\ncontent, constitutes a covered work.  This License acknowledges your\r\nrights of fair use or other equivalent, as provided by copyright law.\r\n\r\n  You may make, run and propagate covered works that you do not\r\nconvey, without conditions so long as your license otherwise remains\r\nin force.  You may convey covered works to others for the sole purpose\r\nof having them make modifications exclusively for you, or provide you\r\nwith facilities for running those works, provided that you comply with\r\nthe terms of this License in conveying all material for which you do\r\nnot control copyright.  Those thus making or running the covered works\r\nfor you must do so exclusively on your behalf, under your direction\r\nand control, on terms that prohibit them from making any copies of\r\nyour copyrighted material outside their relationship with you.\r\n\r\n  Conveying under any other circumstances is permitted solely under\r\nthe conditions stated below.  Sublicensing is not allowed; section 10\r\nmakes it unnecessary.\r\n\r\n  3. Protecting Users' Legal Rights From Anti-Circumvention Law.\r\n\r\n  No covered work shall be deemed part of an effective technological\r\nmeasure under any applicable law fulfilling obligations under article\r\n11 of the WIPO copyright treaty adopted on 20 December 1996, or\r\nsimilar laws prohibiting or restricting circumvention of such\r\nmeasures.\r\n\r\n  When you convey a covered work, you waive any legal power to forbid\r\ncircumvention of technological measures to the extent such circumvention\r\nis effected by exercising rights under this License with respect to\r\nthe covered work, and you disclaim any intention to limit operation or\r\nmodification of the work as a means of enforcing, against the work's\r\nusers, your or third parties' legal rights to forbid circumvention of\r\ntechnological measures.\r\n\r\n  4. Conveying Verbatim Copies.\r\n\r\n  You may convey verbatim copies of the Program's source code as you\r\nreceive it, in any medium, provided that you conspicuously and\r\nappropriately publish on each copy an appropriate copyright notice;\r\nkeep intact all notices stating that this License and any\r\nnon-permissive terms added in accord with section 7 apply to the code;\r\nkeep intact all notices of the absence of any warranty; and give all\r\nrecipients a copy of this License along with the Program.\r\n\r\n  You may charge any price or no price for each copy that you convey,\r\nand you may offer support or warranty protection for a fee.\r\n\r\n  5. Conveying Modified Source Versions.\r\n\r\n  You may convey a work based on the Program, or the modifications to\r\nproduce it from the Program, in the form of source code under the\r\nterms of section 4, provided that you also meet all of these conditions:\r\n\r\n    a) The work must carry prominent notices stating that you modified\r\n    it, and giving a relevant date.\r\n\r\n    b) The work must carry prominent notices stating that it is\r\n    released under this License and any conditions added under section\r\n    7.  This requirement modifies the requirement in section 4 to\r\n    \"keep intact all notices\".\r\n\r\n    c) You must license the entire work, as a whole, under this\r\n    License to anyone who comes into possession of a copy.  This\r\n    License will therefore apply, along with any applicable section 7\r\n    additional terms, to the whole of the work, and all its parts,\r\n    regardless of how they are packaged.  This License gives no\r\n    permission to license the work in any other way, but it does not\r\n    invalidate such permission if you have separately received it.\r\n\r\n    d) If the work has interactive user interfaces, each must display\r\n    Appropriate Legal Notices; however, if the Program has interactive\r\n    interfaces that do not display Appropriate Legal Notices, your\r\n    work need not make them do so.\r\n\r\n  A compilation of a covered work with other separate and independent\r\nworks, which are not by their nature extensions of the covered work,\r\nand which are not combined with it such as to form a larger program,\r\nin or on a volume of a storage or distribution medium, is called an\r\n\"aggregate\" if the compilation and its resulting copyright are not\r\nused to limit the access or legal rights of the compilation's users\r\nbeyond what the individual works permit.  Inclusion of a covered work\r\nin an aggregate does not cause this License to apply to the other\r\nparts of the aggregate.\r\n\r\n  6. Conveying Non-Source Forms.\r\n\r\n  You may convey a covered work in object code form under the terms\r\nof sections 4 and 5, provided that you also convey the\r\nmachine-readable Corresponding Source under the terms of this License,\r\nin one of these ways:\r\n\r\n    a) Convey the object code in, or embodied in, a physical product\r\n    (including a physical distribution medium), accompanied by the\r\n    Corresponding Source fixed on a durable physical medium\r\n    customarily used for software interchange.\r\n\r\n    b) Convey the object code in, or embodied in, a physical product\r\n    (including a physical distribution medium), accompanied by a\r\n    written offer, valid for at least three years and valid for as\r\n    long as you offer spare parts or customer support for that product\r\n    model, to give anyone who possesses the object code either (1) a\r\n    copy of the Corresponding Source for all the software in the\r\n    product that is covered by this License, on a durable physical\r\n    medium customarily used for software interchange, for a price no\r\n    more than your reasonable cost of physically performing this\r\n    conveying of source, or (2) access to copy the\r\n    Corresponding Source from a network server at no charge.\r\n\r\n    c) Convey individual copies of the object code with a copy of the\r\n    written offer to provide the Corresponding Source.  This\r\n    alternative is allowed only occasionally and noncommercially, and\r\n    only if you received the object code with such an offer, in accord\r\n    with subsection 6b.\r\n\r\n    d) Convey the object code by offering access from a designated\r\n    place (gratis or for a charge), and offer equivalent access to the\r\n    Corresponding Source in the same way through the same place at no\r\n    further charge.  You need not require recipients to copy the\r\n    Corresponding Source along with the object code.  If the place to\r\n    copy the object code is a network server, the Corresponding Source\r\n    may be on a different server (operated by you or a third party)\r\n    that supports equivalent copying facilities, provided you maintain\r\n    clear directions next to the object code saying where to find the\r\n    Corresponding Source.  Regardless of what server hosts the\r\n    Corresponding Source, you remain obligated to ensure that it is\r\n    available for as long as needed to satisfy these requirements.\r\n\r\n    e) Convey the object code using peer-to-peer transmission, provided\r\n    you inform other peers where the object code and Corresponding\r\n    Source of the work are being offered to the general public at no\r\n    charge under subsection 6d.\r\n\r\n  A separable portion of the object code, whose source code is excluded\r\nfrom the Corresponding Source as a System Library, need not be\r\nincluded in conveying the object code work.\r\n\r\n  A \"User Product\" is either (1) a \"consumer product\", which means any\r\ntangible personal property which is normally used for personal, family,\r\nor household purposes, or (2) anything designed or sold for incorporation\r\ninto a dwelling.  In determining whether a product is a consumer product,\r\ndoubtful cases shall be resolved in favor of coverage.  For a particular\r\nproduct received by a particular user, \"normally used\" refers to a\r\ntypical or common use of that class of product, regardless of the status\r\nof the particular user or of the way in which the particular user\r\nactually uses, or expects or is expected to use, the product.  A product\r\nis a consumer product regardless of whether the product has substantial\r\ncommercial, industrial or non-consumer uses, unless such uses represent\r\nthe only significant mode of use of the product.\r\n\r\n  \"Installation Information\" for a User Product means any methods,\r\nprocedures, authorization keys, or other information required to install\r\nand execute modified versions of a covered work in that User Product from\r\na modified version of its Corresponding Source.  The information must\r\nsuffice to ensure that the continued functioning of the modified object\r\ncode is in no case prevented or interfered with solely because\r\nmodification has been made.\r\n\r\n  If you convey an object code work under this section in, or with, or\r\nspecifically for use in, a User Product, and the conveying occurs as\r\npart of a transaction in which the right of possession and use of the\r\nUser Product is transferred to the recipient in perpetuity or for a\r\nfixed term (regardless of how the transaction is characterized), the\r\nCorresponding Source conveyed under this section must be accompanied\r\nby the Installation Information.  But this requirement does not apply\r\nif neither you nor any third party retains the ability to install\r\nmodified object code on the User Product (for example, the work has\r\nbeen installed in ROM).\r\n\r\n  The requirement to provide Installation Information does not include a\r\nrequirement to continue to provide support service, warranty, or updates\r\nfor a work that has been modified or installed by the recipient, or for\r\nthe User Product in which it has been modified or installed.  Access to a\r\nnetwork may be denied when the modification itself materially and\r\nadversely affects the operation of the network or violates the rules and\r\nprotocols for communication across the network.\r\n\r\n  Corresponding Source conveyed, and Installation Information provided,\r\nin accord with this section must be in a format that is publicly\r\ndocumented (and with an implementation available to the public in\r\nsource code form), and must require no special password or key for\r\nunpacking, reading or copying.\r\n\r\n  7. Additional Terms.\r\n\r\n  \"Additional permissions\" are terms that supplement the terms of this\r\nLicense by making exceptions from one or more of its conditions.\r\nAdditional permissions that are applicable to the entire Program shall\r\nbe treated as though they were included in this License, to the extent\r\nthat they are valid under applicable law.  If additional permissions\r\napply only to part of the Program, that part may be used separately\r\nunder those permissions, but the entire Program remains governed by\r\nthis License without regard to the additional permissions.\r\n\r\n  When you convey a copy of a covered work, you may at your option\r\nremove any additional permissions from that copy, or from any part of\r\nit.  (Additional permissions may be written to require their own\r\nremoval in certain cases when you modify the work.)  You may place\r\nadditional permissions on material, added by you to a covered work,\r\nfor which you have or can give appropriate copyright permission.\r\n\r\n  Notwithstanding any other provision of this License, for material you\r\nadd to a covered work, you may (if authorized by the copyright holders of\r\nthat material) supplement the terms of this License with terms:\r\n\r\n    a) Disclaiming warranty or limiting liability differently from the\r\n    terms of sections 15 and 16 of this License; or\r\n\r\n    b) Requiring preservation of specified reasonable legal notices or\r\n    author attributions in that material or in the Appropriate Legal\r\n    Notices displayed by works containing it; or\r\n\r\n    c) Prohibiting misrepresentation of the origin of that material, or\r\n    requiring that modified versions of such material be marked in\r\n    reasonable ways as different from the original version; or\r\n\r\n    d) Limiting the use for publicity purposes of names of licensors or\r\n    authors of the material; or\r\n\r\n    e) Declining to grant rights under trademark law for use of some\r\n    trade names, trademarks, or service marks; or\r\n\r\n    f) Requiring indemnification of licensors and authors of that\r\n    material by anyone who conveys the material (or modified versions of\r\n    it) with contractual assumptions of liability to the recipient, for\r\n    any liability that these contractual assumptions directly impose on\r\n    those licensors and authors.\r\n\r\n  All other non-permissive additional terms are considered \"further\r\nrestrictions\" within the meaning of section 10.  If the Program as you\r\nreceived it, or any part of it, contains a notice stating that it is\r\ngoverned by this License along with a term that is a further\r\nrestriction, you may remove that term.  If a license document contains\r\na further restriction but permits relicensing or conveying under this\r\nLicense, you may add to a covered work material governed by the terms\r\nof that license document, provided that the further restriction does\r\nnot survive such relicensing or conveying.\r\n\r\n  If you add terms to a covered work in accord with this section, you\r\nmust place, in the relevant source files, a statement of the\r\nadditional terms that apply to those files, or a notice indicating\r\nwhere to find the applicable terms.\r\n\r\n  Additional terms, permissive or non-permissive, may be stated in the\r\nform of a separately written license, or stated as exceptions;\r\nthe above requirements apply either way.\r\n\r\n  8. Termination.\r\n\r\n  You may not propagate or modify a covered work except as expressly\r\nprovided under this License.  Any attempt otherwise to propagate or\r\nmodify it is void, and will automatically terminate your rights under\r\nthis License (including any patent licenses granted under the third\r\nparagraph of section 11).\r\n\r\n  However, if you cease all violation of this License, then your\r\nlicense from a particular copyright holder is reinstated (a)\r\nprovisionally, unless and until the copyright holder explicitly and\r\nfinally terminates your license, and (b) permanently, if the copyright\r\nholder fails to notify you of the violation by some reasonable means\r\nprior to 60 days after the cessation.\r\n\r\n  Moreover, your license from a particular copyright holder is\r\nreinstated permanently if the copyright holder notifies you of the\r\nviolation by some reasonable means, this is the first time you have\r\nreceived notice of violation of this License (for any work) from that\r\ncopyright holder, and you cure the violation prior to 30 days after\r\nyour receipt of the notice.\r\n\r\n  Termination of your rights under this section does not terminate the\r\nlicenses of parties who have received copies or rights from you under\r\nthis License.  If your rights have been terminated and not permanently\r\nreinstated, you do not qualify to receive new licenses for the same\r\nmaterial under section 10.\r\n\r\n  9. Acceptance Not Required for Having Copies.\r\n\r\n  You are not required to accept this License in order to receive or\r\nrun a copy of the Program.  Ancillary propagation of a covered work\r\noccurring solely as a consequence of using peer-to-peer transmission\r\nto receive a copy likewise does not require acceptance.  However,\r\nnothing other than this License grants you permission to propagate or\r\nmodify any covered work.  These actions infringe copyright if you do\r\nnot accept this License.  Therefore, by modifying or propagating a\r\ncovered work, you indicate your acceptance of this License to do so.\r\n\r\n  10. Automatic Licensing of Downstream Recipients.\r\n\r\n  Each time you convey a covered work, the recipient automatically\r\nreceives a license from the original licensors, to run, modify and\r\npropagate that work, subject to this License.  You are not responsible\r\nfor enforcing compliance by third parties with this License.\r\n\r\n  An \"entity transaction\" is a transaction transferring control of an\r\norganization, or substantially all assets of one, or subdividing an\r\norganization, or merging organizations.  If propagation of a covered\r\nwork results from an entity transaction, each party to that\r\ntransaction who receives a copy of the work also receives whatever\r\nlicenses to the work the party's predecessor in interest had or could\r\ngive under the previous paragraph, plus a right to possession of the\r\nCorresponding Source of the work from the predecessor in interest, if\r\nthe predecessor has it or can get it with reasonable efforts.\r\n\r\n  You may not impose any further restrictions on the exercise of the\r\nrights granted or affirmed under this License.  For example, you may\r\nnot impose a license fee, royalty, or other charge for exercise of\r\nrights granted under this License, and you may not initiate litigation\r\n(including a cross-claim or counterclaim in a lawsuit) alleging that\r\nany patent claim is infringed by making, using, selling, offering for\r\nsale, or importing the Program or any portion of it.\r\n\r\n  11. Patents.\r\n\r\n  A \"contributor\" is a copyright holder who authorizes use under this\r\nLicense of the Program or a work on which the Program is based.  The\r\nwork thus licensed is called the contributor's \"contributor version\".\r\n\r\n  A contributor's \"essential patent claims\" are all patent claims\r\nowned or controlled by the contributor, whether already acquired or\r\nhereafter acquired, that would be infringed by some manner, permitted\r\nby this License, of making, using, or selling its contributor version,\r\nbut do not include claims that would be infringed only as a\r\nconsequence of further modification of the contributor version.  For\r\npurposes of this definition, \"control\" includes the right to grant\r\npatent sublicenses in a manner consistent with the requirements of\r\nthis License.\r\n\r\n  Each contributor grants you a non-exclusive, worldwide, royalty-free\r\npatent license under the contributor's essential patent claims, to\r\nmake, use, sell, offer for sale, import and otherwise run, modify and\r\npropagate the contents of its contributor version.\r\n\r\n  In the following three paragraphs, a \"patent license\" is any express\r\nagreement or commitment, however denominated, not to enforce a patent\r\n(such as an express permission to practice a patent or covenant not to\r\nsue for patent infringement).  To \"grant\" such a patent license to a\r\nparty means to make such an agreement or commitment not to enforce a\r\npatent against the party.\r\n\r\n  If you convey a covered work, knowingly relying on a patent license,\r\nand the Corresponding Source of the work is not available for anyone\r\nto copy, free of charge and under the terms of this License, through a\r\npublicly available network server or other readily accessible means,\r\nthen you must either (1) cause the Corresponding Source to be so\r\navailable, or (2) arrange to deprive yourself of the benefit of the\r\npatent license for this particular work, or (3) arrange, in a manner\r\nconsistent with the requirements of this License, to extend the patent\r\nlicense to downstream recipients.  \"Knowingly relying\" means you have\r\nactual knowledge that, but for the patent license, your conveying the\r\ncovered work in a country, or your recipient's use of the covered work\r\nin a country, would infringe one or more identifiable patents in that\r\ncountry that you have reason to believe are valid.\r\n\r\n  If, pursuant to or in connection with a single transaction or\r\narrangement, you convey, or propagate by procuring conveyance of, a\r\ncovered work, and grant a patent license to some of the parties\r\nreceiving the covered work authorizing them to use, propagate, modify\r\nor convey a specific copy of the covered work, then the patent license\r\nyou grant is automatically extended to all recipients of the covered\r\nwork and works based on it.\r\n\r\n  A patent license is \"discriminatory\" if it does not include within\r\nthe scope of its coverage, prohibits the exercise of, or is\r\nconditioned on the non-exercise of one or more of the rights that are\r\nspecifically granted under this License.  You may not convey a covered\r\nwork if you are a party to an arrangement with a third party that is\r\nin the business of distributing software, under which you make payment\r\nto the third party based on the extent of your activity of conveying\r\nthe work, and under which the third party grants, to any of the\r\nparties who would receive the covered work from you, a discriminatory\r\npatent license (a) in connection with copies of the covered work\r\nconveyed by you (or copies made from those copies), or (b) primarily\r\nfor and in connection with specific products or compilations that\r\ncontain the covered work, unless you entered into that arrangement,\r\nor that patent license was granted, prior to 28 March 2007.\r\n\r\n  Nothing in this License shall be construed as excluding or limiting\r\nany implied license or other defenses to infringement that may\r\notherwise be available to you under applicable patent law.\r\n\r\n  12. No Surrender of Others' Freedom.\r\n\r\n  If conditions are imposed on you (whether by court order, agreement or\r\notherwise) that contradict the conditions of this License, they do not\r\nexcuse you from the conditions of this License.  If you cannot convey a\r\ncovered work so as to satisfy simultaneously your obligations under this\r\nLicense and any other pertinent obligations, then as a consequence you may\r\nnot convey it at all.  For example, if you agree to terms that obligate you\r\nto collect a royalty for further conveying from those to whom you convey\r\nthe Program, the only way you could satisfy both those terms and this\r\nLicense would be to refrain entirely from conveying the Program.\r\n\r\n  13. Use with the GNU Affero General Public License.\r\n\r\n  Notwithstanding any other provision of this License, you have\r\npermission to link or combine any covered work with a work licensed\r\nunder version 3 of the GNU Affero General Public License into a single\r\ncombined work, and to convey the resulting work.  The terms of this\r\nLicense will continue to apply to the part which is the covered work,\r\nbut the special requirements of the GNU Affero General Public License,\r\nsection 13, concerning interaction through a network will apply to the\r\ncombination as such.\r\n\r\n  14. Revised Versions of this License.\r\n\r\n  The Free Software Foundation may publish revised and/or new versions of\r\nthe GNU General Public License from time to time.  Such new versions will\r\nbe similar in spirit to the present version, but may differ in detail to\r\naddress new problems or concerns.\r\n\r\n  Each version is given a distinguishing version number.  If the\r\nProgram specifies that a certain numbered version of the GNU General\r\nPublic License \"or any later version\" applies to it, you have the\r\noption of following the terms and conditions either of that numbered\r\nversion or of any later version published by the Free Software\r\nFoundation.  If the Program does not specify a version number of the\r\nGNU General Public License, you may choose any version ever published\r\nby the Free Software Foundation.\r\n\r\n  If the Program specifies that a proxy can decide which future\r\nversions of the GNU General Public License can be used, that proxy's\r\npublic statement of acceptance of a version permanently authorizes you\r\nto choose that version for the Program.\r\n\r\n  Later license versions may give you additional or different\r\npermissions.  However, no additional obligations are imposed on any\r\nauthor or copyright holder as a result of your choosing to follow a\r\nlater version.\r\n\r\n  15. Disclaimer of Warranty.\r\n\r\n  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY\r\nAPPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT\r\nHOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY\r\nOF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,\r\nTHE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\r\nPURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM\r\nIS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF\r\nALL NECESSARY SERVICING, REPAIR OR CORRECTION.\r\n\r\n  16. Limitation of Liability.\r\n\r\n  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\r\nWILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS\r\nTHE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY\r\nGENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE\r\nUSE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF\r\nDATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD\r\nPARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),\r\nEVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF\r\nSUCH DAMAGES.\r\n\r\n  17. Interpretation of Sections 15 and 16.\r\n\r\n  If the disclaimer of warranty and limitation of liability provided\r\nabove cannot be given local legal effect according to their terms,\r\nreviewing courts shall apply local law that most closely approximates\r\nan absolute waiver of all civil liability in connection with the\r\nProgram, unless a warranty or assumption of liability accompanies a\r\ncopy of the Program in return for a fee.\r\n\r\n                     END OF TERMS AND CONDITIONS\r\n\r\n            How to Apply These Terms to Your New Programs\r\n\r\n  If you develop a new program, and you want it to be of the greatest\r\npossible use to the public, the best way to achieve this is to make it\r\nfree software which everyone can redistribute and change under these terms.\r\n\r\n  To do so, attach the following notices to the program.  It is safest\r\nto attach them to the start of each source file to most effectively\r\nstate the exclusion of warranty; and each file should have at least\r\nthe \"copyright\" line and a pointer to where the full notice is found.\r\n\r\n    <one line to give the program's name and a brief idea of what it does.>\r\n    Copyright (C) <year>  <name of author>\r\n\r\n    This program is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    This program is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU General Public License for more details.\r\n\r\n    You should have received a copy of the GNU General Public License\r\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nAlso add information on how to contact you by electronic and paper mail.\r\n\r\n  If the program does terminal interaction, make it output a short\r\nnotice like this when it starts in an interactive mode:\r\n\r\n    <program>  Copyright (C) <year>  <name of author>\r\n    This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\r\n    This is free software, and you are welcome to redistribute it\r\n    under certain conditions; type `show c' for details.\r\n\r\nThe hypothetical commands `show w' and `show c' should show the appropriate\r\nparts of the General Public License.  Of course, your program's commands\r\nmight be different; for a GUI interface, you would use an \"about box\".\r\n\r\n  You should also get your employer (if you work as a programmer) or school,\r\nif any, to sign a \"copyright disclaimer\" for the program, if necessary.\r\nFor more information on this, and how to apply and follow the GNU GPL, see\r\n<http://www.gnu.org/licenses/>.\r\n\r\n  The GNU General Public License does not permit incorporating your program\r\ninto proprietary programs.  If your program is a subroutine library, you\r\nmay consider it more useful to permit linking proprietary applications with\r\nthe library.  If this is what you want to do, use the GNU Lesser General\r\nPublic License instead of this License.  But first, please read\r\n<http://www.gnu.org/philosophy/why-not-lgpl.html>.\r\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 4.533203125,
          "content": "﻿【小狼毫】輸入法\r\n================\r\n\r\n基於 中州韻輸入法引擎／Rime Input Method Engine 等開源技術\r\n\r\n式恕堂 版權所無\r\n\r\n[![Download](https://img.shields.io/github/v/release/rime/weasel)](https://github.com/rime/weasel/releases/latest)\r\n[![Build status](https://github.com/rime/weasel/actions/workflows/commit-ci.yml/badge.svg)](https://github.com/rime/weasel/actions/workflows/commit-ci.yml)\r\n[![GitHub Tag](https://img.shields.io/github/tag/rime/weasel.svg)](https://github.com/rime/weasel)\r\n\r\n授權條款：GPLv3\r\n\r\n項目主頁：https://rime.im\r\n\r\n您可能還需要 RIME 用於其他操作系統的發行版：\r\n\r\n  * ibus-rime、fcitx5-rime 或 fcitx-rime 用於 Linux\r\n  * 【鼠鬚管】用於 macOS （64位）\r\n\r\n安裝輸入法\r\n----------\r\n\r\n本品適用於 Windows 8.1 ~ Windows 11\r\n\r\n初次安裝時，安裝程序將顯示「安裝選項」對話框。\r\n\r\n若要將【小狼毫】註冊到繁體中文（臺灣）鍵盤佈局，請在「輸入語言」欄選擇「中文（臺灣）」，再點擊「安裝」按鈕。\r\n\r\n安裝完成後，仍可由開始菜單打開「安裝選項」更改輸入語言。\r\n\r\n使用輸入法\r\n----------\r\n\r\n選取輸入法指示器菜單裏的【中】字樣圖標，開始用小狼毫寫字。\r\n\r\n可通過快捷鍵 <kbd>Ctrl+`</kbd> 或 <kbd>F4</kbd> 呼出方案選單、切換輸入方式。\r\n\r\n定製輸入法\r\n----------\r\n\r\n通過 開始菜單 » 小狼毫輸入法 訪問設定工具及常用位置。\r\n\r\n用戶詞庫、配置文件位於 `%AppData%\\Rime`，可通過菜單中的「用戶文件夾」打開。高水平玩家調教 Rime 輸入法常會用到。\r\n\r\n修改詞庫、配置文件後，須「重新部署」方可生效。\r\n\r\n定製 Rime 的方法，請參考 Wiki [《定製指南》](https://github.com/rime/home/wiki/CustomizationGuide)。如需定製 Weasel 獨有的樣式和行為，請參考本倉庫 [Wiki 頁面](https://github.com/rime/weasel/wiki)。\r\n\r\n致謝\r\n----\r\n\r\n### 輸入方案設計：\r\n\r\n  * 【朙月拼音】系列及【八股文】詞典\r\n    - 部分數據來源於 CC-CEDICT、Android 拼音、新酷音、opencc 等開源項目\r\n    - 維護者：佛振、瑾昀\r\n  * 【注音／地球拼音】\r\n    - 維護者：佛振、瑾昀\r\n  * 【倉頡五代】\r\n    - 發明人：朱邦復先生\r\n    - 碼表源自 www.chinesecj.com\r\n    - 構詞碼表作者：惜緣\r\n\r\n  【五笔】【粵拼】【上海／蘇州吳語】【中古漢語拼音】【國際音標】等衆多方案\r\n  不再以安裝包預裝形式提供。可由 <https://github.com/rime/plum> 下載安裝。\r\n\r\n### 程序設計：\r\n\r\n  * [佛振](https://github.com/lotem)\r\n  * [鄒旭](https://github.com/zouxu09)\r\n  * [Xiangyan Sun](https://github.com/wishstudio)\r\n  * [Prcuvu](https://github.com/Prcuvu)\r\n  * [nameoverflow](https://github.com/nameoverflow)\r\n  * [fxliang](https://github.com/fxliang)\r\n  * [Azuk 443](https://github.com/determ1ne)\r\n\r\n  查看更多 [代碼貢獻者](https://github.com/rime/weasel/graphs/contributors)\r\n\r\n### 美術：\r\n\r\n  * 圖標設計／[Patricivs](https://github.com/Patricivs)\r\n  * 配色方案／Aben、P1461、Patricivs、skoj、佛振、五磅兔\r\n\r\n### 本品引用了以下開源軟件：\r\n\r\n  * [Boost C++ Libraries](http://www.boost.org/) (Boost Software License)\r\n  * [curl](https://curl.haxx.se/) (MIT/X derivate license)\r\n  * [google-glog](https://github.com/google/glog) (BSD 3-Clause License)\r\n  * [Google Test](https://github.com/google/googletest) (BSD 3-Clause License)\r\n  * [LevelDB](https://github.com/google/leveldb) (BSD 3-Clause License)\r\n  * [librime](https://github.com/rime/librime) (BSD 3-Clause License)\r\n  * [marisa-trie](https://github.com/s-yata/marisa-trie) (BSD 2-Clause License, LGPL 2.1)\r\n  * [OpenCC / 開放中文轉換](https://github.com/BYVoid/OpenCC) (Apache License 2.0)\r\n  * [plum](https://github.com/rime/plum) (GNU Lesser General Public License v3.0)\r\n  * [WinSparkle](https://github.com/vslavik/winsparkle) (MIT License)\r\n  * [yaml-cpp](https://github.com/jbeder/yaml-cpp) (MIT License)\r\n  * [7-Zip](https://www.7-zip.org) (GNU LGPLv2.1+ with unRAR restriction)\r\n\r\n問題與反饋\r\n----------\r\n\r\n發現程序有 bug，請到 GitHub 反饋\r\n<https://github.com/rime/weasel/issues>\r\n\r\n歡迎提交 pull request\r\n<https://github.com/rime/weasel/pulls>\r\n\r\nRime 輸入法（不限於 Windows 平臺）功能、使用方法與配置相關的問題，請反饋到\r\n<https://github.com/rime/home/issues>\r\n\r\n聯繫方式\r\n--------\r\n\r\n技術交流，歡迎光臨 [Rime 代碼之家](https://github.com/rime/home)，或致信 Rime 開發者 <rimeime@gmail.com>\r\n\r\n謝謝！\r\n"
        },
        {
          "name": "RimeWithWeasel",
          "type": "tree",
          "content": null
        },
        {
          "name": "WeaselDeployer",
          "type": "tree",
          "content": null
        },
        {
          "name": "WeaselIME",
          "type": "tree",
          "content": null
        },
        {
          "name": "WeaselIPC",
          "type": "tree",
          "content": null
        },
        {
          "name": "WeaselIPCServer",
          "type": "tree",
          "content": null
        },
        {
          "name": "WeaselServer",
          "type": "tree",
          "content": null
        },
        {
          "name": "WeaselSetup",
          "type": "tree",
          "content": null
        },
        {
          "name": "WeaselTSF",
          "type": "tree",
          "content": null
        },
        {
          "name": "WeaselUI",
          "type": "tree",
          "content": null
        },
        {
          "name": "arm64x_wrapper",
          "type": "tree",
          "content": null
        },
        {
          "name": "build.bat",
          "type": "blob",
          "size": 10.30859375,
          "content": "@echo off\r\n\r\nsetlocal\r\n\r\nif not exist env.bat copy env.bat.template env.bat\r\n\r\nif exist env.bat call env.bat\r\n\r\nif not defined WEASEL_ROOT set WEASEL_ROOT=%CD%\r\n\r\nif not defined VERSION_MAJOR set VERSION_MAJOR=0\r\nif not defined VERSION_MINOR set VERSION_MINOR=16\r\nif not defined VERSION_PATCH set VERSION_PATCH=3\r\n\r\nif not defined WEASEL_VERSION set WEASEL_VERSION=%VERSION_MAJOR%.%VERSION_MINOR%.%VERSION_PATCH%\r\nif not defined WEASEL_BUILD set WEASEL_BUILD=0\r\n\r\nrem use numeric build version for release build\r\nset PRODUCT_VERSION=%WEASEL_VERSION%.%WEASEL_BUILD%\r\nrem for non-release build, try to use git commit hash as product build version\r\nif not defined RELEASE_BUILD (\r\n  rem check if git is installed and available, then get the short commit id of head\r\n  git --version >nul 2>&1\r\n  if not errorlevel 1 (\r\n    for /f \"delims=\" %%i in ('git tag --sort=-creatordate ^| findstr /r \"%WEASEL_VERSION%\"') do (\r\n      set LAST_TAG=%%i\r\n      goto found_tag\r\n    )\r\n    :found_tag\r\n    for /f \"delims=\" %%i in ('git rev-list %LAST_TAG%..HEAD --count') do (\r\n      set WEASEL_BUILD=%%i\r\n    )\r\n    rem get short commmit id of head\r\n    for /F %%i in ('git rev-parse --short HEAD') do (set PRODUCT_VERSION=%WEASEL_VERSION%.%WEASEL_BUILD%.%%i)\r\n  )\r\n)\r\n\r\nrem FILE_VERSION is always 4 numbers; same as PRODUCT_VERSION in release build\r\nif not defined FILE_VERSION set FILE_VERSION=%WEASEL_VERSION%.%WEASEL_BUILD%\r\n\r\necho PRODUCT_VERSION=%PRODUCT_VERSION%\r\necho WEASEL_VERSION=%WEASEL_VERSION%\r\necho WEASEL_BUILD=%WEASEL_BUILD%\r\necho WEASEL_ROOT=%WEASEL_ROOT%\r\necho WEASEL_BUNDLED_RECIPES=%WEASEL_BUNDLED_RECIPES%\r\necho.\r\n\r\nif defined GITHUB_ENV (\r\n\tsetlocal enabledelayedexpansion\r\n\techo git_ref_name=%PRODUCT_VERSION%>>!GITHUB_ENV!\r\n)\r\n\r\nif defined BOOST_ROOT (\r\n  if exist \"%BOOST_ROOT%\\boost\" goto boost_found\r\n)\r\necho Error: Boost not found! Please set BOOST_ROOT in env.bat.\r\nexit /b 1\r\n\r\n:boost_found\r\necho BOOST_ROOT=%BOOST_ROOT%\r\necho.\r\n\r\nif not defined BJAM_TOOLSET (\r\n  rem the number actually means platform toolset, not %VisualStudioVersion%\r\n  set BJAM_TOOLSET=msvc-14.2\r\n)\r\n\r\nif not defined PLATFORM_TOOLSET (\r\n  set PLATFORM_TOOLSET=v142\r\n)\r\n\r\nif defined DEVTOOLS_PATH set PATH=%DEVTOOLS_PATH%%PATH%\r\n\r\nset build_config=Release\r\nset build_option=/t:Build\r\nset build_boost=0\r\nset boost_build_variant=release\r\nset build_data=0\r\nset build_opencc=0\r\nset build_rime=0\r\nset rime_build_variant=release\r\nset build_weasel=0\r\nset build_installer=0\r\nset build_arm64=0\r\n\r\nrem parse the command line options\r\n:parse_cmdline_options\r\n  if \"%1\" == \"\" goto end_parsing_cmdline_options\r\n  if \"%1\" == \"debug\" (\r\n    set build_config=Debug\r\n    set boost_build_variant=debug\r\n    set rime_build_variant=debug\r\n  )\r\n  if \"%1\" == \"release\" (\r\n    set build_config=Release\r\n    set boost_build_variant=release\r\n    set rime_build_variant=release\r\n  )\r\n  if \"%1\" == \"rebuild\" set build_option=/t:Rebuild\r\n  if \"%1\" == \"boost\" set build_boost=1\r\n  if \"%1\" == \"data\" set build_data=1\r\n  if \"%1\" == \"opencc\" set build_opencc=1\r\n  if \"%1\" == \"rime\" set build_rime=1\r\n  if \"%1\" == \"librime\" set build_rime=1\r\n  if \"%1\" == \"weasel\" set build_weasel=1\r\n  if \"%1\" == \"installer\" set build_installer=1\r\n  if \"%1\" == \"arm64\" set build_arm64=1\r\n  if \"%1\" == \"all\" (\r\n    set build_boost=1\r\n    set build_data=1\r\n    set build_opencc=1\r\n    set build_rime=1\r\n    set build_weasel=1\r\n    set build_installer=1\r\n    set build_arm64=1\r\n  )\r\n  shift\r\n  goto parse_cmdline_options\r\n:end_parsing_cmdline_options\r\n\r\nif %build_weasel% == 0 (\r\nif %build_boost% == 0 (\r\nif %build_data% == 0 (\r\nif %build_opencc% == 0 (\r\nif %build_rime% == 0 (\r\n  set build_weasel=1\r\n)))))\r\n\r\nrem quit WeaselServer.exe before building\r\ncd /d %WEASEL_ROOT%\r\nif exist output\\weaselserver.exe (\r\n  output\\weaselserver.exe /q\r\n)\r\n\r\nrem build booost\r\nif %build_boost% == 1 (\r\n  call :build_boost\r\n  if errorlevel 1 exit /b 1\r\n  cd /d %WEASEL_ROOT%\r\n)\r\n\r\nrem -------------------------------------------------------------------------\r\nrem build librime x64 and Win32\r\nif %build_rime% == 1 (\r\n  if not exist librime\\build.bat (\r\n    git submodule update --init --recursive\r\n  )\r\n  cd %WEASEL_ROOT%\\librime\r\n  rem clean cache before building\r\n  for %%a in ( build dist lib ^\r\n    deps\\glog\\build ^\r\n    deps\\googletest\\build ^\r\n    deps\\leveldb\\build ^\r\n    deps\\marisa-trie\\build ^\r\n    deps\\opencc\\build ^\r\n    deps\\yaml-cpp\\build ) do (\r\n      if exist %%a rd /s /q %%a\r\n  )\r\n\r\n  rem build x64 librime\r\n  set ARCH=x64\r\n  call :build_librime_platform x64 %WEASEL_ROOT%\\lib64 %WEASEL_ROOT%\\output\r\n  rem build Win32 librime\r\n  set ARCH=Win32\r\n  call :build_librime_platform Win32 %WEASEL_ROOT%\\lib %WEASEL_ROOT%\\output\\Win32\r\n  rem clean the modified file\r\n  rem git checkout .\r\n  rem git submodule foreach git checkout .\r\n)\r\n\r\nrem -------------------------------------------------------------------------\r\nif %build_weasel% == 1 (\r\n  if not exist output\\data\\essay.txt (\r\n    set build_data=1\r\n  )\r\n  if not exist output\\data\\opencc\\TSCharacters.ocd* (\r\n    set build_opencc=1\r\n  )\r\n)\r\nif %build_data% == 1 call :build_data\r\nif %build_opencc% == 1 call :build_opencc_data\r\n\r\nif %build_weasel% == 0 goto end\r\n\r\ncd /d %WEASEL_ROOT%\r\n\r\nset WEASEL_PROJECT_PROPERTIES=BOOST_ROOT^\r\n  PLATFORM_TOOLSET^\r\n  VERSION_MAJOR^\r\n  VERSION_MINOR^\r\n  VERSION_PATCH^\r\n  PRODUCT_VERSION^\r\n  FILE_VERSION\r\n\r\ncscript.exe render.js weasel.props %WEASEL_PROJECT_PROPERTIES%\r\n\r\ndel msbuild*.log\r\n\r\nif %build_arm64% == 1 (\r\n\r\n  msbuild.exe weasel.sln %build_option% /p:Configuration=%build_config% /p:Platform=\"ARM\" /fl6\r\n  if errorlevel 1 goto error\r\n  msbuild.exe weasel.sln %build_option% /p:Configuration=%build_config% /p:Platform=\"ARM64\" /fl5\r\n  if errorlevel 1 goto error\r\n)\r\n\r\nmsbuild.exe weasel.sln %build_option% /p:Configuration=%build_config% /p:Platform=\"x64\" /fl2\r\nif errorlevel 1 goto error\r\nmsbuild.exe weasel.sln %build_option% /p:Configuration=%build_config% /p:Platform=\"Win32\" /fl1\r\nif errorlevel 1 goto error\r\n\r\nif %build_arm64% == 1 (\r\n  pushd arm64x_wrapper\r\n  call build.bat\r\n  if errorlevel 1 goto error\r\n  popd\r\n\r\n  copy arm64x_wrapper\\weaselARM64X.dll output\r\n  if errorlevel 1 goto error\r\n  copy arm64x_wrapper\\weaselARM64X.ime output\r\n  if errorlevel 1 goto error\r\n)\r\n\r\nif %build_installer% == 1 (\r\n  \"%ProgramFiles(x86)%\"\\NSIS\\Bin\\makensis.exe ^\r\n  /DWEASEL_VERSION=%WEASEL_VERSION% ^\r\n  /DWEASEL_BUILD=%WEASEL_BUILD% ^\r\n  /DPRODUCT_VERSION=%PRODUCT_VERSION% ^\r\n  output\\install.nsi\r\n  if errorlevel 1 goto error\r\n)\r\n\r\ngoto end\r\n\r\nrem -------------------------------------------------------------------------\r\nrem build boost\r\n:build_boost\r\n  set BJAM_OPTIONS_COMMON=-j%NUMBER_OF_PROCESSORS%^\r\n    --with-filesystem^\r\n    --with-json^\r\n    --with-locale^\r\n    --with-regex^\r\n    --with-serialization^\r\n    --with-system^\r\n    --with-thread^\r\n    define=BOOST_USE_WINAPI_VERSION=0x0603^\r\n    toolset=%BJAM_TOOLSET%^\r\n    link=static^\r\n    runtime-link=static^\r\n    --build-type=complete\r\n  \r\n  set BJAM_OPTIONS_X86=%BJAM_OPTIONS_COMMON%^\r\n    architecture=x86^\r\n    address-model=32\r\n  \r\n  set BJAM_OPTIONS_X64=%BJAM_OPTIONS_COMMON%^\r\n    architecture=x86^\r\n    address-model=64\r\n  \r\n  set BJAM_OPTIONS_ARM32=%BJAM_OPTIONS_COMMON%^\r\n    define=BOOST_USE_WINAPI_VERSION=0x0A00^\r\n    architecture=arm^\r\n    address-model=32\r\n  \r\n  set BJAM_OPTIONS_ARM64=%BJAM_OPTIONS_COMMON%^\r\n    define=BOOST_USE_WINAPI_VERSION=0x0A00^\r\n    architecture=arm^\r\n    address-model=64\r\n  \r\n  cd /d %BOOST_ROOT%\r\n  if not exist b2.exe call bootstrap.bat\r\n  if errorlevel 1 goto error\r\n  b2 %BJAM_OPTIONS_X86% stage %BOOST_COMPILED_LIBS%\r\n  if errorlevel 1 goto error\r\n  b2 %BJAM_OPTIONS_X64% stage %BOOST_COMPILED_LIBS%\r\n  if errorlevel 1 goto error\r\n  \r\n  if %build_arm64% == 1 (\r\n    b2 %BJAM_OPTIONS_ARM32% stage %BOOST_COMPILED_LIBS%\r\n    if errorlevel 1 goto error\r\n    b2 %BJAM_OPTIONS_ARM64% stage %BOOST_COMPILED_LIBS%\r\n    if errorlevel 1 goto error\r\n  )\r\n  exit /b\r\n\r\nrem ---------------------------------------------------------------------------\r\n:build_data\r\n  copy %WEASEL_ROOT%\\LICENSE.txt output\\\r\n  copy %WEASEL_ROOT%\\README.md output\\README.txt\r\n  copy %WEASEL_ROOT%\\plum\\rime-install.bat output\\\r\n  set plum_dir=plum\r\n  set rime_dir=output/data\r\n  set WSLENV=plum_dir:rime_dir\r\n  bash plum/rime-install %WEASEL_BUNDLED_RECIPES%\r\n  if errorlevel 1 goto error\r\n  exit /b\r\n\r\nrem ---------------------------------------------------------------------------\r\n:build_opencc_data\r\n  if not exist %WEASEL_ROOT%\\librime\\share\\opencc\\TSCharacters.ocd2 (\r\n    cd %WEASEL_ROOT%\\librime\r\n    call build.bat deps %rime_build_variant%\r\n    if errorlevel 1 goto error\r\n  )\r\n  cd %WEASEL_ROOT%\r\n  if not exist output\\data\\opencc mkdir output\\data\\opencc\r\n  copy %WEASEL_ROOT%\\librime\\share\\opencc\\*.* output\\data\\opencc\\\r\n  if errorlevel 1 goto error\r\n  exit /b\r\n\r\nrem ---------------------------------------------------------------------------\r\nrem %1 : ARCH\r\nrem %2 : push | pop , push to backup when pop to restore\r\n:stash_build\r\n  pushd %WEASEL_ROOT%\\librime\r\n  for %%a in ( build dist lib ^\r\n    deps\\glog\\build ^\r\n    deps\\googletest\\build ^\r\n    deps\\leveldb\\build ^\r\n    deps\\marisa-trie\\build ^\r\n    deps\\opencc\\build ^\r\n    deps\\yaml-cpp\\build ) do (\r\n    if \"%2\"==\"push\" (\r\n      if exist %%a  move %%a %%a_%1 \r\n    )\r\n    if \"%2\"==\"pop\" (\r\n      if exist %%a_%1  move %%a_%1 %%a \r\n    )\r\n  )\r\n  popd\r\n  exit /b\r\n\r\nrem ---------------------------------------------------------------------------\r\nrem %1 : ARCH\r\nrem %2 : target_path of rime.lib, base %WEASEL_ROOT% or abs path\r\nrem %3 : target_path of rime.dll, base %WEASEL_ROOT% or abs path\r\n:build_librime_platform\r\n  rem restore backuped %1 build\r\n  call :stash_build %1 pop\r\n\r\n  cd %WEASEL_ROOT%\\librime\r\n  if not exist env.bat (\r\n    copy %WEASEL_ROOT%\\env.bat env.bat\r\n  )\r\n  if not exist lib\\opencc.lib (\r\n    call build.bat deps %rime_build_variant%\r\n    if errorlevel 1 (\r\n      call :stash_build %1 push\r\n      goto error\r\n    )\r\n  )\r\n  call build.bat %rime_build_variant%\r\n  if errorlevel 1 (\r\n    call :stash_build %1 push\r\n    goto error\r\n  )\r\n\r\n  cd %WEASEL_ROOT%\\librime\r\n  call :stash_build %1 push\r\n\r\n  copy /Y %WEASEL_ROOT%\\librime\\dist_%1\\include\\rime_*.h %WEASEL_ROOT%\\include\\\r\n  if errorlevel 1 goto error\r\n  copy /Y %WEASEL_ROOT%\\librime\\dist_%1\\lib\\rime.lib %2\\\r\n  if errorlevel 1 goto error\r\n  copy /Y %WEASEL_ROOT%\\librime\\dist_%1\\lib\\rime.dll %3\\\r\n  if errorlevel 1 goto error\r\n\r\n  exit /b\r\nrem ---------------------------------------------------------------------------\r\n\r\n:error\r\n\r\necho error building weasel...\r\n\r\n:end\r\ncd %WEASEL_ROOT%\r\n"
        },
        {
          "name": "clang-format.sh",
          "type": "blob",
          "size": 0.8046875,
          "content": "#!/usr/bin/env bash\n\nWEASEL_SOURCE_PATH=\"RimeWithWeasel WeaselDeployer WeaselIME WeaselIPC WeaselIPCServer WeaselServer WeaselSetup WeaselTSF WeaselUI include test\"\n\n# clang format options\nmethod=\"-i\"\n\nwhile getopts \"in\" option; do\n\tcase \"${option}\" in\n\tn) # format code\n\t\tfind ${WEASEL_SOURCE_PATH} -name '*.cpp' -o -name '*.h' ! -path \"include/wtl/*\" | grep -wiv -f .exclude_pattern.txt | xargs clang-format --verbose -i\n\t\t;;\n\ti) # dry run and changes formatting warnings to errors\n\t\tfind ${WEASEL_SOURCE_PATH} -name '*.cpp' -o -name '*.h' ! -path \"include/wtl/*\" | grep -wiv -f .exclude_pattern.txt | xargs clang-format --verbose -Werror --dry-run || { echo Please lint your code by '\"'\"./clang-format.sh -n\"'\"'.; false; }\n\t\t;;\n\t\\?) # invalid option\n\t\techo \"invalid option, please use -i or -n.\"\n\t\texit 1\n\t\t;;\n\tesac\ndone\n"
        },
        {
          "name": "env.bat.template",
          "type": "blob",
          "size": 0.42578125,
          "content": "rem Customize your build environment and save the modified copy to env.bat\r\n\r\nrem REQUIRED: path to Boost source directory\r\nset BOOST_ROOT=C:\\Libraries\\boost_1_78_0\r\n\r\nrem OPTIONAL: Visual Studio version and platform toolset\r\nrem set BJAM_TOOLSET=msvc-14.2\r\nrem set PLATFORM_TOOLSET=v142\r\n\r\nrem OPTIONAL: path to additional build tools\r\nrem set DEVTOOLS_PATH=%ProgramFiles%\\Git\\cmd;%ProgramFiles%\\Git\\usr\\bin;%ProgramFiles%\\CMake\\bin;\r\n"
        },
        {
          "name": "env.vs2019.bat",
          "type": "blob",
          "size": 0.5498046875,
          "content": "rem Customize your build environment and save the modified copy to env.bat\r\n\r\nset WEASEL_ROOT=%CD%\r\n\r\nrem REQUIRED: path to Boost source directory\r\nif not defined BOOST_ROOT set BOOST_ROOT=%WEASEL_ROOT%\\deps\\boost_1_78_0\r\n\r\nrem OPTIONAL: architecture, Visual Studio version and platform toolset\r\nrem set ARCH=Win32\r\nset BJAM_TOOLSET=msvc-14.2\r\nset CMAKE_GENERATOR=\"Visual Studio 16 2019\"\r\nset PLATFORM_TOOLSET=v142\r\n\r\nrem OPTIONAL: path to additional build tools\r\nrem set DEVTOOLS_PATH=%ProgramFiles%\\Git\\cmd;%ProgramFiles%\\Git\\usr\\bin;%ProgramFiles%\\CMake\\bin;\r\n"
        },
        {
          "name": "env.vs2022.bat",
          "type": "blob",
          "size": 0.5498046875,
          "content": "rem Customize your build environment and save the modified copy to env.bat\r\n\r\nset WEASEL_ROOT=%CD%\r\n\r\nrem REQUIRED: path to Boost source directory\r\nif not defined BOOST_ROOT set BOOST_ROOT=%WEASEL_ROOT%\\deps\\boost_1_78_0\r\n\r\nrem OPTIONAL: architecture, Visual Studio version and platform toolset\r\nrem set ARCH=Win32\r\nset BJAM_TOOLSET=msvc-14.3\r\nset CMAKE_GENERATOR=\"Visual Studio 17 2022\"\r\nset PLATFORM_TOOLSET=v143\r\n\r\nrem OPTIONAL: path to additional build tools\r\nrem set DEVTOOLS_PATH=%ProgramFiles%\\Git\\cmd;%ProgramFiles%\\Git\\usr\\bin;%ProgramFiles%\\CMake\\bin;\r\n"
        },
        {
          "name": "extract_changelog.ps1",
          "type": "blob",
          "size": 0.763671875,
          "content": "$tag = $env:GITHUB_REF -replace 'refs/tags/'\n$changelogPath = Join-Path $PSScriptRoot \"CHANGELOG.md\"\n$outputPath = Join-Path $PSScriptRoot \"RELEASE_CHANGELOG.md\"\n\n$changeLog = Get-Content $changelogPath\nOut-File -FilePath $outputPath -NoNewline\n\n$found = $false\nforeach ($line in $changeLog) {\n  $versionLine = $line -match '<a name=\"(.*)\"></a>'\n  if ($versionLine) {\n    $version = $Matches.1\n    if (-Not $found) {\n      if ($version -ne $tag) {\n        # version mismatch\n        Write-Output \"version mismatch: changelog is ${version} but tag is ${tag}\"\n        exit 1\n      } else {\n        $found = $true\n        Write-Output \"extracting changelog for ${version}\"\n        continue\n      }\n    } else {\n      exit 0\n    }\n  }\n  $line | Out-File -FilePath $outputPath -Append\n}\n"
        },
        {
          "name": "github.install.bat",
          "type": "blob",
          "size": 1.2822265625,
          "content": "setlocal\r\n\r\ngit submodule init\r\ngit submodule update plum\r\n\r\nset rime_version=1.11.2\r\nset rime_hash=5b09f35\r\n\r\nset download_archive=rime-%rime_hash%-Windows-msvc-x86.7z\r\nset download_archive_deps=rime-deps-%rime_hash%-Windows-msvc-x86.7z\r\nset download_archive_x64=rime-%rime_hash%-Windows-msvc-x64.7z\r\nset download_archive_deps_x64=rime-deps-%rime_hash%-Windows-msvc-x64.7z\r\n\r\ncurl -LO https://github.com/rime/librime/releases/download/%rime_version%/%download_archive%\r\ncurl -LO https://github.com/rime/librime/releases/download/%rime_version%/%download_archive_deps%\r\ncurl -LO https://github.com/rime/librime/releases/download/%rime_version%/%download_archive_x64%\r\ncurl -LO https://github.com/rime/librime/releases/download/%rime_version%/%download_archive_deps_x64%\r\n\r\n7z x %download_archive% * -olibrime\\ -y\r\n7z x %download_archive_deps% * -olibrime\\ -y\r\n7z x %download_archive_x64% * -olibrime_x64\\ -y\r\n7z x %download_archive_deps_x64% * -olibrime_x64\\ -y\r\n\r\ncopy /Y librime\\dist\\include\\rime_*.h include\\\r\ncopy /Y librime\\dist\\lib\\rime.lib lib\\\r\ncopy /Y librime\\dist\\lib\\rime.dll output\\Win32\\\r\n\r\ncopy /Y librime_x64\\dist\\lib\\rime.lib lib64\\\r\ncopy /Y librime_x64\\dist\\lib\\rime.dll output\\\r\n\r\nif not exist output\\data\\opencc mkdir output\\data\\opencc\r\ncopy /Y librime\\share\\opencc\\*.* output\\data\\opencc\\\r\n\r\n"
        },
        {
          "name": "include",
          "type": "tree",
          "content": null
        },
        {
          "name": "install-clang-format.bat",
          "type": "blob",
          "size": 0.7998046875,
          "content": "@echo off\r\n\r\nif \"%PROCESSOR_ARCHITECTURE%\"==\"AMD64\" (\r\n    rem 64 bit system\r\n    rem powershell -Command \"(New-Object Net.WebClient).DownloadFile('https://github.com/llvm/llvm-project/releases/download/llvmorg-18.1.6/LLVM-18.1.6-win64.exe', 'LLVM-18.1.6-win64.exe')\"\r\n    rem LLVM-18.1.6-win64.exe /S\r\n    rem or maybe\r\n    rem output/7z.exe e LLVM-18.1.6-win64.exe bin/clang-format.exe -o.\r\n    rem rm LLVM-18.1.6-win64.exe\r\n) else (\r\n    rem 32 bit system\r\n    rem powershell -Command \"(New-Object Net.WebClient).DownloadFile('https://github.com/llvm/llvm-project/releases/download/llvmorg-18.1.6/LLVM-18.1.6-win32.exe', 'LLVM-18.1.6-win32.exe')\"\r\n    rem LLVM-18.1.6-win32.exe /S\r\n    rem or maybe\r\n    rem output/7z.exe e LLVM-18.1.6-win32.exe bin/clang-format.exe -o.\r\n    rem rm LLVM-18.1.6-win32.exe\r\n)\r\npause\r\n"
        },
        {
          "name": "install_boost.bat",
          "type": "blob",
          "size": 0.5419921875,
          "content": "setlocal\r\n\r\nif not defined RIME_ROOT set RIME_ROOT=%CD%\r\n\r\nif not defined boost_version set boost_version=1.84.0\r\nset boost_x_y_z=%boost_version:.=_%\r\n\r\nif not defined BOOST_ROOT set BOOST_ROOT=%RIME_ROOT%\\deps\\boost_%boost_x_y_z%\r\n\r\nif exist \"%BOOST_ROOT%\\boost\" goto boost_found\r\nfor %%I in (\"%BOOST_ROOT%\\.\") do set src_dir=%%~dpI\r\nrem download boost source\r\naria2c https://archives.boost.io/release/%boost_version%/source/boost_%boost_x_y_z%.7z -d %src_dir%\r\npushd %src_dir%\r\n7z x boost_%boost_x_y_z%.7z\r\npopd\r\n:boost_found\r\n\r\ncall .\\build.bat boost\r\n"
        },
        {
          "name": "install_nsis.bat",
          "type": "blob",
          "size": 0.23828125,
          "content": "set nsis_version=3.08\n\nmkdir deps\npowershell -c \"iwr -UserAgent \\\"Wget\\\" -Uri \\\"https://sourceforge.net/projects/nsis/files/NSIS%%203/%nsis_version%/nsis-%nsis_version%-setup.exe/download\\\" -OutFile deps\\nsis-setup.exe\"\ndeps\\nsis-setup.exe /S\n\n"
        },
        {
          "name": "lib",
          "type": "tree",
          "content": null
        },
        {
          "name": "lib64",
          "type": "tree",
          "content": null
        },
        {
          "name": "librime",
          "type": "commit",
          "content": null
        },
        {
          "name": "output",
          "type": "tree",
          "content": null
        },
        {
          "name": "plum",
          "type": "commit",
          "content": null
        },
        {
          "name": "render.js",
          "type": "blob",
          "size": 1.673828125,
          "content": "// nanotemplate\n(function() {\n  var _tregex = /(\\$\\w+)/g;\n\n  String.prototype.template = String.prototype.t = String.prototype.template || function() {\n    if (arguments[0] instanceof Array)\n      return arguments[0].map(this.t, this).join(\"\");\n    else {\n      var args = typeof arguments[0] === \"object\" ? arguments[0] : arguments;\n      return this.replace(_tregex, function(match) { return args[match.substr(1)]; });\n    }\n  };\n\n  if (typeof Element === \"function\" || typeof Element === \"object\")\n    Element.prototype.template = Element.prototype.t = Element.prototype.template || function() {\n      this._tcache = this._tcache || this.innerHTML;\n      this.innerHTML = this._tcache.t.apply(this._tcache, arguments);\n    };\n})();\n\n// main\nvar objStream = WScript.CreateObject(\"ADODB.Stream\");\nvar shell = WScript.CreateObject(\"Wscript.Shell\");\nvar env = shell.Environment(\"Process\");\n\nfunction Render(filename, params) {\n  objStream.Charset = \"utf-8\";\n  objStream.Open();\n  objStream.LoadFromFile(filename + '.template');\n  var input = objStream.ReadText();\n  objStream.Close();\n\n  var output = input.template(params);\n  objStream.Charset = \"utf-8\";\n  objStream.Open();\n  objStream.WriteText(output);\n  objStream.SaveToFile(filename, 2);\n  objStream.Close();\n}\n\nif (WScript.Arguments.length == 0) {\n  WScript.Echo(\"Usage: \" + WScript.ScriptName + \" <TargetFile> ENV_VAR ...\");\n  WScript.Quit(1);\n}\n\nvar filename = WScript.Arguments(0);\nvar params = {};\nvar variable;\nfor (var i = 1; i < WScript.Arguments.length; i++) {\n  variable = WScript.Arguments(i);\n  params[variable] = env(variable);\n  WScript.Echo(variable + \"=\" + params[variable]);\n}\nRender(filename, params);\nWScript.Echo(\"Generated \" + filename);\n"
        },
        {
          "name": "resource",
          "type": "tree",
          "content": null
        },
        {
          "name": "test",
          "type": "tree",
          "content": null
        },
        {
          "name": "update",
          "type": "tree",
          "content": null
        },
        {
          "name": "weasel.props.template",
          "type": "blob",
          "size": 1.447265625,
          "content": "﻿<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<Project DefaultTargets=\"Build\" ToolsVersion=\"4.0\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\">\r\n  <PropertyGroup Label=\"UserMacros\">\r\n    <BOOST_ROOT>$BOOST_ROOT</BOOST_ROOT>\r\n    <PLATFORM_TOOLSET>$PLATFORM_TOOLSET</PLATFORM_TOOLSET>\r\n    <VERSION_MAJOR>$VERSION_MAJOR</VERSION_MAJOR>\r\n    <VERSION_MINOR>$VERSION_MINOR</VERSION_MINOR>\r\n    <VERSION_PATCH>$VERSION_PATCH</VERSION_PATCH>\r\n    <PRODUCT_VERSION>$PRODUCT_VERSION</PRODUCT_VERSION>\r\n    <FILE_VERSION>$FILE_VERSION</FILE_VERSION>\r\n  </PropertyGroup>\r\n  <ItemGroup>\r\n    <BuildMacro Include=\"BOOST_ROOT\">\r\n      <Value>$(BOOST_ROOT)</Value>\r\n      <EnvironmentVariable>true</EnvironmentVariable>\r\n    </BuildMacro>\r\n    <BuildMacro Include=\"PLATFORM_TOOLSET\">\r\n      <Value>$(PLATFORM_TOOLSET)</Value>\r\n      <EnvironmentVariable>true</EnvironmentVariable>\r\n    </BuildMacro>\r\n  </ItemGroup>\r\n  <ItemDefinitionGroup>\r\n    <ClCompile>\r\n      <PreprocessorDefinitions>$(PreprocessorDefinitions);VERSION_MAJOR=$(VERSION_MAJOR);VERSION_MINOR=$(VERSION_MINOR);VERSION_PATCH=$(VERSION_PATCH);</PreprocessorDefinitions>\r\n    </ClCompile>\r\n    <ResourceCompile>\r\n      <PreprocessorDefinitions>$(PreprocessorDefinitions);VERSION_MAJOR=$(VERSION_MAJOR);VERSION_MINOR=$(VERSION_MINOR);VERSION_PATCH=$(VERSION_PATCH);PRODUCT_VERSION=$(PRODUCT_VERSION);FILE_VERSION=$(FILE_VERSION);</PreprocessorDefinitions>\r\n    </ResourceCompile>\r\n  </ItemDefinitionGroup>\r\n</Project>\r\n"
        },
        {
          "name": "weasel.sln",
          "type": "blob",
          "size": 14.142578125,
          "content": "﻿\r\nMicrosoft Visual Studio Solution File, Format Version 12.00\r\n# Visual Studio Version 17\r\nVisualStudioVersion = 17.7.34024.191\r\nMinimumVisualStudioVersion = 10.0.40219.1\r\nProject(\"{2150E333-8FDC-42A3-9474-1A3956D46DE8}\") = \"Solution Items\", \"Solution Items\", \"{53F79A24-5390-4640-84B5-19984EB3353B}\"\r\n\tProjectSection(SolutionItems) = preProject\r\n\t\tinclude\\PipeChannel.h = include\\PipeChannel.h\r\n\t\tinclude\\PyWeasel.h = include\\PyWeasel.h\r\n\t\tinclude\\resource.h = include\\resource.h\r\n\t\tinclude\\ResponseParser.h = include\\ResponseParser.h\r\n\t\tinclude\\RimeWithWeasel.h = include\\RimeWithWeasel.h\r\n\t\tinclude\\StringAlgorithm.hpp = include\\StringAlgorithm.hpp\r\n\t\tinclude\\VersionHelpers.hpp = include\\VersionHelpers.hpp\r\n\t\tinclude\\WeaselConstants.h = include\\WeaselConstants.h\r\n\t\tinclude\\WeaselIPC.h = include\\WeaselIPC.h\r\n\t\tinclude\\WeaselIPCData.h = include\\WeaselIPCData.h\r\n\t\tinclude\\WeaselUI.h = include\\WeaselUI.h\r\n\t\tinclude\\WeaselUtility.h = include\\WeaselUtility.h\r\n\t\tinclude\\winapifamily.h = include\\winapifamily.h\r\n\t\tinclude\\winpackagefamily.h = include\\winpackagefamily.h\r\n\tEndProjectSection\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"WeaselTSF\", \"WeaselTSF\\WeaselTSF.vcxproj\", \"{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"WeaselUI\", \"WeaselUI\\WeaselUI.vcxproj\", \"{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"WeaselIPC\", \"WeaselIPC\\WeaselIPC.vcxproj\", \"{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"WeaselIME\", \"WeaselIME\\WeaselIME.vcxproj\", \"{A958FE3D-9F6E-44CB-981E-F2AE181657B3}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"WeaselServer\", \"WeaselServer\\WeaselServer.vcxproj\", \"{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"TestWeaselIPC\", \"test\\TestWeaselIPC\\TestWeaselIPC.vcxproj\", \"{9C1CC4BA-18FF-4890-908E-E545881C5586}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"WeaselIPCServer\", \"WeaselIPCServer\\WeaselIPCServer.vcxproj\", \"{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"TestResponseParser\", \"test\\TestResponseParser\\TestResponseParser.vcxproj\", \"{CC642427-64D7-44D9-8543-8CBBF981FAE7}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"RimeWithWeasel\", \"RimeWithWeasel\\RimeWithWeasel.vcxproj\", \"{1C497821-BD63-4F02-9094-32B185B62F23}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"WeaselDeployer\", \"WeaselDeployer\\WeaselDeployer.vcxproj\", \"{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}\"\r\nEndProject\r\nProject(\"{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}\") = \"WeaselSetup\", \"WeaselSetup\\WeaselSetup.vcxproj\", \"{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}\"\r\nEndProject\r\nGlobal\r\n\tGlobalSection(SolutionConfigurationPlatforms) = preSolution\r\n\t\tDebug|ARM = Debug|ARM\r\n\t\tDebug|ARM64 = Debug|ARM64\r\n\t\tDebug|Win32 = Debug|Win32\r\n\t\tDebug|x64 = Debug|x64\r\n\t\tRelease|ARM = Release|ARM\r\n\t\tRelease|ARM64 = Release|ARM64\r\n\t\tRelease|Win32 = Release|Win32\r\n\t\tRelease|x64 = Release|x64\r\n\tEndGlobalSection\r\n\tGlobalSection(ProjectConfigurationPlatforms) = postSolution\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Debug|ARM.ActiveCfg = Debug|ARM\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Debug|ARM.Build.0 = Debug|ARM\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Debug|ARM64.ActiveCfg = Debug|ARM64\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Debug|ARM64.Build.0 = Debug|ARM64\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Release|ARM.ActiveCfg = Release|ARM\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Release|ARM.Build.0 = Release|ARM\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Release|ARM64.ActiveCfg = Release|ARM64\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Release|ARM64.Build.0 = Release|ARM64\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Release|Win32.Build.0 = Release|Win32\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{FF9B3625-BBD6-4972-8F23-7BA57F3127E8}.Release|x64.Build.0 = Release|x64\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Debug|ARM.ActiveCfg = Debug|ARM\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Debug|ARM.Build.0 = Debug|ARM\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Debug|ARM64.ActiveCfg = Debug|ARM64\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Debug|ARM64.Build.0 = Debug|ARM64\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Release|ARM.ActiveCfg = Release|ARM\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Release|ARM.Build.0 = Release|ARM\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Release|ARM64.ActiveCfg = Release|ARM64\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Release|ARM64.Build.0 = Release|ARM64\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Release|Win32.Build.0 = Release|Win32\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{10B3B8BF-7294-4661-9A8A-2FFC920FA2F4}.Release|x64.Build.0 = Release|x64\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Debug|ARM.ActiveCfg = Debug|ARM\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Debug|ARM.Build.0 = Debug|ARM\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Debug|ARM64.ActiveCfg = Debug|ARM64\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Debug|ARM64.Build.0 = Debug|ARM64\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Release|ARM.ActiveCfg = Release|ARM\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Release|ARM.Build.0 = Release|ARM\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Release|ARM64.ActiveCfg = Release|ARM64\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Release|ARM64.Build.0 = Release|ARM64\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Release|Win32.Build.0 = Release|Win32\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{CE11A2DF-8D20-4B07-A935-4B0D03F0303D}.Release|x64.Build.0 = Release|x64\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Debug|ARM.ActiveCfg = Debug|ARM\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Debug|ARM.Build.0 = Debug|ARM\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Debug|ARM64.ActiveCfg = Debug|ARM64\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Debug|ARM64.Build.0 = Debug|ARM64\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Release|ARM.ActiveCfg = Release|ARM\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Release|ARM.Build.0 = Release|ARM\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Release|ARM64.ActiveCfg = Release|ARM64\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Release|ARM64.Build.0 = Release|ARM64\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Release|Win32.Build.0 = Release|Win32\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{A958FE3D-9F6E-44CB-981E-F2AE181657B3}.Release|x64.Build.0 = Release|x64\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Debug|ARM.ActiveCfg = Debug|ARM\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Debug|ARM64.ActiveCfg = Debug|ARM64\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Release|ARM.ActiveCfg = Release|ARM\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Release|ARM64.ActiveCfg = Release|ARM64\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Release|Win32.Build.0 = Release|Win32\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{A68C2A5C-D74D-4CB2-9E22-A4D2FC256A2D}.Release|x64.Build.0 = Release|x64\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Debug|ARM.ActiveCfg = Debug|ARM\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Debug|ARM64.ActiveCfg = Debug|ARM64\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Release|ARM.ActiveCfg = Release|ARM\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Release|ARM64.ActiveCfg = Release|ARM64\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{9C1CC4BA-18FF-4890-908E-E545881C5586}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Debug|ARM.ActiveCfg = Debug|ARM\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Debug|ARM64.ActiveCfg = Debug|ARM64\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Release|ARM.ActiveCfg = Release|ARM\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Release|ARM64.ActiveCfg = Release|ARM64\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Release|Win32.Build.0 = Release|Win32\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{26930622-CFA2-43DF-A9F3-4AA4A313B2A4}.Release|x64.Build.0 = Release|x64\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Debug|ARM.ActiveCfg = Debug|ARM\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Debug|ARM64.ActiveCfg = Debug|ARM64\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Release|ARM.ActiveCfg = Release|ARM\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Release|ARM64.ActiveCfg = Release|ARM64\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{CC642427-64D7-44D9-8543-8CBBF981FAE7}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Debug|ARM.ActiveCfg = Debug|ARM\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Debug|ARM64.ActiveCfg = Debug|ARM64\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Release|ARM.ActiveCfg = Release|ARM\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Release|ARM64.ActiveCfg = Release|ARM64\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Release|Win32.Build.0 = Release|Win32\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{1C497821-BD63-4F02-9094-32B185B62F23}.Release|x64.Build.0 = Release|x64\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Debug|ARM.ActiveCfg = Debug|Win32\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Debug|ARM64.ActiveCfg = Debug|Win32\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Debug|x64.ActiveCfg = Debug|x64\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Debug|x64.Build.0 = Debug|x64\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Release|ARM.ActiveCfg = Release|Win32\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Release|ARM64.ActiveCfg = Release|Win32\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Release|Win32.Build.0 = Release|Win32\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Release|x64.ActiveCfg = Release|x64\r\n\t\t{F53F3E9C-CC4D-4D1D-9C2E-719FE60A7E6B}.Release|x64.Build.0 = Release|x64\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Debug|ARM.ActiveCfg = Debug|Win32\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Debug|ARM64.ActiveCfg = Debug|Win32\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Debug|Win32.ActiveCfg = Debug|Win32\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Debug|Win32.Build.0 = Debug|Win32\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Debug|x64.ActiveCfg = Debug|Win32\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Release|ARM.ActiveCfg = Release|Win32\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Release|ARM64.ActiveCfg = Release|Win32\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Release|Win32.ActiveCfg = Release|Win32\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Release|Win32.Build.0 = Release|Win32\r\n\t\t{39F6E3F5-8F0B-4023-BC40-A66AE6C37095}.Release|x64.ActiveCfg = Release|Win32\r\n\tEndGlobalSection\r\n\tGlobalSection(SolutionProperties) = preSolution\r\n\t\tHideSolutionNode = FALSE\r\n\tEndGlobalSection\r\n\tGlobalSection(ExtensibilityGlobals) = postSolution\r\n\t\tSolutionGuid = {CB0C4586-4742-4939-A1E0-AF671B2F7480}\r\n\tEndGlobalSection\r\nEndGlobal\r\n"
        },
        {
          "name": "xbuild.bat",
          "type": "blob",
          "size": 5.978515625,
          "content": "@echo off\r\nsetlocal enabledelayedexpansion\r\nif not defined include (\r\n  echo You should run this inside Developer Command Promt!\r\n  exit /b\r\n)\r\nfor %%a in (\"%include:;=\" \"%\") do (\r\n  echo %%a| findstr /r \"ATLMFC\\\\include\" > nul\r\n  if not errorlevel 1 (\r\n    set \"atl_lib_dir=%%a\"\r\n    set dpi_manifest=!atl_lib_dir:ATLMFC\\include=Include\\Manifest\\PerMonitorHighDPIAware.manifest!\r\n    if not exist \".\\PerMonitorHighDPIAware.manifest\" (\r\n      copy \"\"!dpi_manifest!\"\" .\\\r\n    )\r\n  )\r\n)\r\nrem ---------------------------------------------------------------------------\r\nif not exist env.bat copy env.bat.template env.bat\r\nif exist env.bat call env.bat\r\nset PRODUCT_VERSION=\r\nif not defined WEASEL_ROOT set WEASEL_ROOT=%CD%\r\nif not defined VERSION_MAJOR set VERSION_MAJOR=0\r\nif not defined VERSION_MINOR set VERSION_MINOR=16\r\nif not defined VERSION_PATCH set VERSION_PATCH=3\r\n\r\nif not defined WEASEL_VERSION set WEASEL_VERSION=%VERSION_MAJOR%.%VERSION_MINOR%.%VERSION_PATCH%\r\nif not defined WEASEL_BUILD set WEASEL_BUILD=0\r\n\r\nrem use numeric build version for release build\r\nset PRODUCT_VERSION=%WEASEL_VERSION%.%WEASEL_BUILD%\r\nrem for non-release build, try to use git commit hash as product build version\r\nif not defined RELEASE_BUILD (\r\n  rem check if git is installed and available, then get the short commit id of head\r\n  git --version >nul 2>&1\r\n  if not errorlevel 1 (\r\n    for /f \"delims=\" %%i in ('git tag --sort=-creatordate ^| findstr /r \"%WEASEL_VERSION%\"') do (\r\n      set LAST_TAG=%%i\r\n      goto found_tag\r\n    )\r\n    :found_tag\r\n    for /f \"delims=\" %%i in ('git rev-list %LAST_TAG%..HEAD --count') do (\r\n      set WEASEL_BUILD=%%i\r\n    )\r\n    rem get short commmit id of head\r\n    for /F %%i in ('git rev-parse --short HEAD') do (set PRODUCT_VERSION=%WEASEL_VERSION%.%WEASEL_BUILD%.%%i)\r\n  )\r\n)\r\n\r\nrem FILE_VERSION is always 4 numbers; same as PRODUCT_VERSION in release build\r\nif not defined FILE_VERSION set FILE_VERSION=%WEASEL_VERSION%.%WEASEL_BUILD%\r\necho PRODUCT_VERSION=%PRODUCT_VERSION%\r\necho WEASEL_VERSION=%WEASEL_VERSION%\r\necho WEASEL_BUILD=%WEASEL_BUILD%\r\necho WEASEL_ROOT=%WEASEL_ROOT%\r\necho WEASEL_BUNDLED_RECIPES=%WEASEL_BUNDLED_RECIPES%\r\necho BOOST_ROOT=%BOOST_ROOT%\r\n\r\nif defined GITHUB_ENV (\r\n\tsetlocal enabledelayedexpansion\r\n\techo git_ref_name=%PRODUCT_VERSION%>>!GITHUB_ENV!\r\n)\r\n\r\nrem ---------------------------------------------------------------------------\r\nrem parse the command line options\r\nset build_config=release\r\nset build_rebuild=0\r\nset build_boost=0\r\nset boost_build_variant=release\r\nset build_data=0\r\nset build_opencc=0\r\nset build_rime=0\r\nset rime_build_variant=release\r\nset build_weasel=0\r\nset build_installer=0\r\nset build_arm64=0\r\nset build_clean=0\r\nset build_commands=0\r\n:parse_cmdline_options\r\n  if \"%1\" == \"\" goto end_parsing_cmdline_options\r\n  if \"%1\" == \"debug\" (\r\n    set build_config=debug\r\n    set boost_build_variant=debug\r\n    set rime_build_variant=debug\r\n  )\r\n  if \"%1\" == \"release\" (\r\n    set build_config=release\r\n    set boost_build_variant=release\r\n    set rime_build_variant=release\r\n  )\r\n  if \"%1\" == \"rebuild\" set build_rebuild=1\r\n  if \"%1\" == \"boost\" set build_boost=1\r\n  if \"%1\" == \"data\" set build_data=1\r\n  if \"%1\" == \"opencc\" set build_opencc=1\r\n  if \"%1\" == \"rime\" set build_rime=1\r\n  if \"%1\" == \"librime\" set build_rime=1\r\n  if \"%1\" == \"weasel\" set build_weasel=1\r\n  if \"%1\" == \"installer\" set build_installer=1\r\n  if \"%1\" == \"arm64\" set build_arm64=1\r\n  if \"%1\" == \"clean\" set build_clean=1\r\n  if \"%1\" == \"commands\" set build_commands=1\r\n  if \"%1\" == \"all\" (\r\n    set build_boost=1\r\n    set build_data=1\r\n    set build_opencc=1\r\n    set build_rime=1\r\n    set build_weasel=1\r\n    set build_installer=1\r\n    set build_arm64=1\r\n    set build_commands=1\r\n  )\r\n  shift\r\n  goto parse_cmdline_options\r\n:end_parsing_cmdline_options\r\n\r\nif %build_weasel% == 0 (\r\nif %build_boost% == 0 (\r\nif %build_data% == 0 (\r\nif %build_opencc% == 0 (\r\nif %build_rime% == 0 (\r\nif %build_commands% == 0 (\r\n  set build_weasel=1\r\n))))))\r\nrem \r\nrem quit WeaselServer.exe before building\r\ncd /d %WEASEL_ROOT%\r\nif exist output\\weaselserver.exe (\r\n  output\\weaselserver.exe /q\r\n)\r\n\r\nrem build booost\r\nif %build_boost% == 1 (\r\n  if %build_arm64% == 1 (\r\n    call build.bat boost arm64\r\n  ) else (\r\n    call build.bat boost\r\n  )\r\n  if errorlevel 1 exit /b 1\r\n  cd /d %WEASEL_ROOT%\r\n)\r\nif %build_rime% == 1 (\r\n  call build.bat rime\r\n  if errorlevel 1 exit /b 1\r\n  cd /d %WEASEL_ROOT%\r\n)\r\nif %build_data% == 1 (\r\n  call build.bat data\r\n  if errorlevel 1 exit /b 1\r\n  cd /d %WEASEL_ROOT%\r\n)\r\nif %build_opencc% == 1 (\r\n  call build.bat opencc\r\n  if errorlevel 1 exit /b 1\r\n  cd /d %WEASEL_ROOT%\r\n)\r\n\r\nif %build_commands% == 1 (\r\n  echo Generating compile_commands.json\r\n  xmake project -k compile_commands -m %build_config%\r\n)\r\n\r\nrem if to clean\r\nif %build_clean% == 1 ( goto clean )\r\nif %build_weasel% == 0 ( goto end )\r\n\r\nif %build_arm64% == 1 (\r\n  xmake f -a arm64 -m %build_config%\r\n  if %build_rebuild% == 1 ( xmake clean )\r\n  xmake\r\n  if errorlevel 1 goto error\r\n  xmake f -a arm  -m %build_config%\r\n  if %build_rebuild% == 1 ( xmake clean )\r\n  xmake\r\n  if errorlevel 1 goto error\r\n)\r\nxmake f -a x64 -m %build_config%\r\nif %build_rebuild% == 1 ( xmake clean )\r\nxmake\r\nif errorlevel 1 goto error\r\nxmake f -a x86 -m %build_config%\r\nif %build_rebuild% == 1 ( xmake clean )\r\nxmake\r\nif errorlevel 1 goto error\r\n\r\nif %build_arm64% == 1 (\r\n  pushd arm64x_wrapper\r\n  call build.bat\r\n  if errorlevel 1 goto error\r\n  popd\r\n\r\n  copy arm64x_wrapper\\weaselARM64X.dll output\r\n  if errorlevel 1 goto error\r\n  copy arm64x_wrapper\\weaselARM64X.ime output\r\n  if errorlevel 1 goto error\r\n)\r\nif %build_installer% == 1 (\r\n  \"%ProgramFiles(x86)%\"\\NSIS\\Bin\\makensis.exe ^\r\n  /DWEASEL_VERSION=%WEASEL_VERSION% ^\r\n  /DWEASEL_BUILD=%WEASEL_BUILD% ^\r\n  /DPRODUCT_VERSION=%PRODUCT_VERSION% ^\r\n  output\\install.nsi\r\n  if errorlevel 1 goto error\r\n)\r\ngoto end\r\n\r\n:clean\r\n  if exist build (\r\n    rmdir /s /q build\r\n    if errorlevel 1 (\r\n      echo error cleaning weasel build\r\n      goto error\r\n    )\r\n    goto end\r\n  )\r\n\r\n:error\r\n  echo error building weasel...\r\n  exit /b 1\r\n  \r\n:end\r\n  cd %WEASEL_ROOT%\r\n\r\n"
        },
        {
          "name": "xmake.lua",
          "type": "blob",
          "size": 3.3271484375,
          "content": "-- 工作区的xmake.lua\nset_project(\"weasel\")\n\n-- 定义全局变量\nset_xmakever(\"2.9.4\")\nset_languages(\"c++17\")\nadd_defines(\"UNICODE\", \"_UNICODE\")\nadd_defines(\"WINDOWS\")\nadd_defines(\"MSVC\")\n\nadd_includedirs(\"$(projectdir)/include\")\n-- 设置Boost库的全局路径\nboost_root = os.getenv(\"BOOST_ROOT\")\nboost_include_path = boost_root\nboost_lib_path = boost_root .. \"/stage/lib\"\nadd_includedirs(boost_include_path)\nadd_linkdirs(boost_lib_path)\nadd_cxflags(\"/utf-8 /MP /O2 /Oi /Gm- /EHsc /MT /GS /Gy /fp:precise /Zc:wchar_t /Zc:forScope /Zc:inline /external:W3 /Gd /TP /FC\")\nadd_ldflags(\"/TLBID:1 /DYNAMICBASE /NXCOMPAT\")\n\n-- 全局ATL lib路径\nlocal atl_lib_dir = ''\ndpi_manifest = ''\nfor include in string.gmatch(os.getenv(\"include\"), \"([^;]+)\") do\n  if atl_lib_dir=='' and include:match(\".*ATLMFC\\\\include\\\\?$\") then\n    atl_lib_dir = include:replace(\"include$\", \"lib\")\n    dpi_manifest = include:replace(\"ATLMFC\\\\include$\", \"Include\\\\Manifest\\\\PerMonitorHighDPIAware.manifest\")\n  end\n  add_includedirs(include)\nend\n\nadd_includedirs(\"$(projectdir)/include/wtl\")\n\nif is_arch(\"x64\") then\n  add_linkdirs(\"$(projectdir)/lib64\")\n  add_linkdirs(atl_lib_dir .. \"/x64\")\nelseif is_arch(\"x86\") then\n  add_linkdirs(\"$(projectdir)/lib\")\n  add_linkdirs(atl_lib_dir .. \"/x86\")\nelseif is_arch(\"arm\") then\n  add_linkdirs(atl_lib_dir .. \"/arm\")\nelseif is_arch(\"arm64\") then\n  add_linkdirs(atl_lib_dir .. \"/arm64\")\nend\n\nadd_links(\"atls\", \"shell32\", \"advapi32\", \"gdi32\", \"user32\", \"uuid\", \"ole32\")\n\nincludes(\"WeaselIPC\", \"WeaselUI\", \"WeaselTSF\", \"WeaselIME\")\n\nif is_arch(\"x64\") or is_arch(\"x86\") then\n  includes(\"RimeWithWeasel\", \"WeaselIPCServer\", \"WeaselServer\", \"WeaselDeployer\")\nend\n\nif is_arch(\"x86\") then\n  includes(\"WeaselSetup\")\nend\n\nif is_mode(\"debug\") then\n  includes(\"test/TestWeaselIPC\")\n  includes(\"test/TestResponseParser\")\nelse\n  add_cxflags(\"/GL\")\n  add_ldflags(\"/LTCG /INCREMENTAL:NO\", {force = true})\nend\n\nrule(\"subcmd\")\n  on_load(function(target)\n    target:add(\"ldflags\", \"/SUBSYSTEM:CONSOLE\")\n  end)\nrule(\"subwin\")\n  on_load(function(target)\n    target:add(\"ldflags\", \"/SUBSYSTEM:WINDOWS\")\n  end)\n\nrule(\"add_rcfiles\")\n  on_load(function(target)\n    target:add(\"files\", path.join(target:scriptdir(), \"*.rc\"),\n      {defines = {\"VERSION_MAJOR=\" .. os.getenv(\"VERSION_MAJOR\"),\n      \"VERSION_MINOR=\" .. os.getenv(\"VERSION_MINOR\"),\n      \"VERSION_PATCH=\" .. os.getenv(\"VERSION_PATCH\"),\n      \"FILE_VERSION=\" .. os.getenv(\"FILE_VERSION\"),\n      \"PRODUCT_VERSION=\" .. os.getenv(\"PRODUCT_VERSION\")\n    }})\n  end)\nrule(\"use_weaselconstants\")\n  on_load(function(target)\n    function check_include_weasel_constants_in_dir(dir)\n      local files = os.files(path.join(dir, \"**.h\"))\n      table.join2(files, os.files(path.join(dir, \"**.cpp\")))\n      for _, file in ipairs(files) do\n        local content = io.readfile(file)\n        if content:find('#include%s+\"WeaselConstants%.h\"') or content:find('#include%s+<WeaselConstants%.h>') then\n          return true\n        end\n      end\n      return false\n    end\n    if check_include_weasel_constants_in_dir(target:scriptdir()) then\n      target:add(\"defines\", {\n        \"VERSION_MAJOR=\" .. os.getenv(\"VERSION_MAJOR\"),\n        \"VERSION_MINOR=\" .. os.getenv(\"VERSION_MINOR\"),\n        \"VERSION_PATCH=\" .. os.getenv(\"VERSION_PATCH\"),\n        \"FILE_VERSION=\" .. os.getenv(\"FILE_VERSION\"),\n        \"PRODUCT_VERSION=\" .. os.getenv(\"PRODUCT_VERSION\")\n    })\n    end\n  end)\n"
        }
      ]
    }
  ]
}