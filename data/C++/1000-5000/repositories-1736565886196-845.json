{
  "metadata": {
    "timestamp": 1736565886196,
    "page": 845,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjg1MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "gaoxiang12/slam_in_autonomous_driving",
      "stars": 2051,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".clang-format",
          "type": "blob",
          "size": 3.3349609375,
          "content": "---\r\nLanguage:        Cpp\r\n# BasedOnStyle:  Google\r\nAccessModifierOffset: -1\r\nAlignAfterOpenBracket: Align\r\nAlignConsecutiveAssignments: false\r\nAlignConsecutiveDeclarations: false\r\nAlignEscapedNewlines: Left\r\nAlignOperands:   true\r\nAlignTrailingComments: true\r\nAllowAllParametersOfDeclarationOnNextLine: true\r\nAllowShortBlocksOnASingleLine: false\r\nAllowShortCaseLabelsOnASingleLine: false\r\nAllowShortFunctionsOnASingleLine: All\r\nAllowShortIfStatementsOnASingleLine: Always\r\nAllowShortLoopsOnASingleLine: true\r\nAlwaysBreakAfterDefinitionReturnType: None\r\nAlwaysBreakAfterReturnType: None\r\nAlwaysBreakBeforeMultilineStrings: true\r\nAlwaysBreakTemplateDeclarations: true\r\nBinPackArguments: true\r\nBinPackParameters: true\r\nBraceWrapping:   \r\n  AfterClass:      false\r\n  AfterControlStatement: false\r\n  AfterEnum:       false\r\n  AfterFunction:   false\r\n  AfterNamespace:  false\r\n  AfterObjCDeclaration: false\r\n  AfterStruct:     false\r\n  AfterUnion:      false\r\n  AfterExternBlock: false\r\n  BeforeCatch:     false\r\n  BeforeElse:      false\r\n  IndentBraces:    false\r\n  SplitEmptyFunction: true\r\n  SplitEmptyRecord: true\r\n  SplitEmptyNamespace: true\r\nBreakBeforeBinaryOperators: None\r\nBreakBeforeBraces: Attach\r\nBreakBeforeInheritanceComma: false\r\nBreakBeforeTernaryOperators: true\r\nBreakConstructorInitializersBeforeComma: false\r\nBreakConstructorInitializers: BeforeColon\r\nBreakAfterJavaFieldAnnotations: false\r\nBreakStringLiterals: true\r\nColumnLimit:     120\r\nCommentPragmas:  '^ IWYU pragma:'\r\nCompactNamespaces: false\r\nConstructorInitializerAllOnOneLineOrOnePerLine: true\r\nConstructorInitializerIndentWidth: 4\r\nContinuationIndentWidth: 4\r\nCpp11BracedListStyle: true\r\nDerivePointerAlignment: true\r\nDisableFormat:   false\r\nExperimentalAutoDetectBinPacking: false\r\nFixNamespaceComments: true\r\nForEachMacros:   \r\n  - foreach\r\n  - Q_FOREACH\r\n  - BOOST_FOREACH\r\nIncludeBlocks:   Preserve\r\nIncludeCategories: \r\n  - Regex:           '^<ext/.*\\.h>'\r\n    Priority:        2\r\n  - Regex:           '^<.*\\.h>'\r\n    Priority:        1\r\n  - Regex:           '^<.*'\r\n    Priority:        2\r\n  - Regex:           '.*'\r\n    Priority:        3\r\nIncludeIsMainRegex: '([-_](test|unittest))?$'\r\nIndentCaseLabels: true\r\nIndentPPDirectives: None\r\nIndentWidth:     4\r\nIndentWrappedFunctionNames: false\r\nJavaScriptQuotes: Leave\r\nJavaScriptWrapImports: true\r\nKeepEmptyLinesAtTheStartOfBlocks: false\r\nMacroBlockBegin: ''\r\nMacroBlockEnd:   ''\r\nMaxEmptyLinesToKeep: 1\r\nNamespaceIndentation: None\r\nObjCBlockIndentWidth: 2\r\nObjCSpaceAfterProperty: false\r\nObjCSpaceBeforeProtocolList: false\r\nPenaltyBreakAssignment: 2\r\nPenaltyBreakBeforeFirstCallParameter: 1\r\nPenaltyBreakComment: 300\r\nPenaltyBreakFirstLessLess: 120\r\nPenaltyBreakString: 1000\r\nPenaltyExcessCharacter: 1000000\r\nPenaltyReturnTypeOnItsOwnLine: 200\r\nPointerAlignment: Left\r\nRawStringFormats: \r\n  - Delimiters:       [pb]\r\n    Language:        TextProto\r\n    BasedOnStyle:    google\r\nReflowComments:  true\r\nSortIncludes:    true\r\nSortUsingDeclarations: true\r\nSpaceAfterCStyleCast: false\r\nSpaceAfterTemplateKeyword: true\r\nSpaceBeforeAssignmentOperators: true\r\nSpaceBeforeParens: ControlStatements\r\nSpaceInEmptyParentheses: false\r\nSpacesBeforeTrailingComments: 2\r\nSpacesInAngles:  false\r\nSpacesInContainerLiterals: true\r\nSpacesInCStyleCastParentheses: false\r\nSpacesInParentheses: false\r\nSpacesInSquareBrackets: false\r\nStandard:        Auto\r\nTabWidth:        8\r\nUseTab:          Never\r\n...\r\n\r\n"
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.5556640625,
          "content": "# Prerequisites\r\n*.d\r\n\r\n# Compiled Object files\r\n*.slo\r\n*.lo\r\n*.o\r\n*.obj\r\n\r\n# Precompiled Headers\r\n*.gch\r\n*.pch\r\n\r\n# Compiled Dynamic libraries\r\n*.so\r\n*.dylib\r\n*.dll\r\n\r\n# Fortran module files\r\n*.mod\r\n*.smod\r\n\r\n# Compiled Static libraries\r\n*.lai\r\n*.la\r\n*.a\r\n*.lib\r\n\r\n# Executables\r\n*.exe\r\n*.out\r\n*.app\r\n\r\n# latex\r\n*.aux\r\n*.blg\r\n*.log\r\n*.toc\r\n*.gz\r\n*.bbl\r\n\r\n# cmake\r\n**build**\r\n\r\nbin\r\n.idea\r\ndata/ch6/frame*.txt\r\ndata/ch6/*.png\r\ndata/ch7/**.pcd\r\n**DS_Store\r\n\r\ndata/ch9/**.pcd\r\ndata/ch3/state.txt\r\ndata/ch3/gins.txt\r\ndata/ch3/gnss_output.txt\r\ndata/ch4/gins_preintg.txt\r\n\r\n"
        },
        {
          "name": "CMakeLists.txt",
          "type": "blob",
          "size": 0.74609375,
          "content": "cmake_minimum_required(VERSION 3.5)\r\nproject(slam_in_auto_driving)\r\n\r\nset(CMAKE_BUILD_TYPE \"Release\")\r\nset(CMAKE_CXX_STANDARD 17)\r\nset(CMAKE_CXX_FLAGS \"-w\")\r\nset(CMAKE_CXX_FLAGS_RELEASE \"-O2 -g -ggdb ${CMAKE_CXX_FLAGS}\")\r\nset(CMAKE_CXX_FLAGS_DEBUG \"-g ${CMAKE_CXX_FLAGS}\")\r\n\r\nadd_definitions(\"-DCATKIN_ENABLE_TESTING=0\")\r\n\r\nset(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/bin)\r\nset(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/lib)\r\nset(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/lib)\r\n\r\noption(BUILD_WITH_UBUNTU1804 OFF)\r\n\r\ninclude(cmake/packages.cmake)\r\ninclude_directories(${PROJECT_SOURCE_DIR}/src)\r\ninclude_directories(${PROJECT_SOURCE_DIR})\r\ninclude_directories(${PROJECT_SOURCE_DIR}/build/devel/include)\r\n\r\nadd_subdirectory(src)\r\n"
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 0.6279296875,
          "content": "FROM osrf/ros:noetic-desktop-full\n\nADD docker/sources.list /etc/apt\n\nRUN apt-get update \\\n&& apt-get install -y ros-noetic-pcl-ros ros-noetic-velodyne-msgs libopencv-dev libgoogle-glog-dev libeigen3-dev libsuitesparse-dev libpcl-dev libyaml-cpp-dev libbtbb-dev libgmock-dev unzip python3-tk\\\n&& mkdir /sad\n\nCOPY ./thirdparty/ /sad/\n\nWORKDIR /sad/\n\nRUN ls -la \\\n&& rm -rf ./Pangolin \\\n&& unzip ./Pangolin.zip \\\n&& mkdir ./Pangolin/build \\\n&& cmake ./Pangolin -B ./Pangolin/build \\\n&& make -j4 -C ./Pangolin/build install \\\n# && cmake ./g2o -B ./g2o/build \\\n# && make -j4 -C ./g2o/build install \\\n&& rm -rf /var/lib/apt/lists/* \\\n&& rm -rf /sad\n"
        },
        {
          "name": "bin",
          "type": "tree",
          "content": null
        },
        {
          "name": "cmake",
          "type": "tree",
          "content": null
        },
        {
          "name": "config",
          "type": "tree",
          "content": null
        },
        {
          "name": "data",
          "type": "tree",
          "content": null
        },
        {
          "name": "doc",
          "type": "tree",
          "content": null
        },
        {
          "name": "docker",
          "type": "tree",
          "content": null
        },
        {
          "name": "lib",
          "type": "tree",
          "content": null
        },
        {
          "name": "readme.md",
          "type": "blob",
          "size": 7.5087890625,
          "content": "## SLAM in Autonomous Driving book (SAD book)\n\n本书向读者系统介绍了惯性导航、组合导航、激光建图、激光定位、激光惯导里程计等知识。本仓库是书籍对应的源代码仓库，可以公开使用。\n\n<img src=\"https://github.com/gaoxiang12/slam_in_autonomous_driving/assets/6635511/734af25b-d866-4dcf-a155-773190ba03d8\" width=\"300\" />\n\n\n\n## 注意\n\n- 本书已于2023.7.10开始印刷，预计在两周内上架。届时我会更新各平台的链接信息。\n- 2023.8.9 本书目前是第二次印刷，在第一次上修正了一部分内容（但没有签名了），详情见代码的推送。\n- 电子工业出版社官方：https://item.jd.com/10080292102089.html\n- 京东自营： https://item.jd.com/13797963.html\n\n## 本书的内容编排\n\n- 第1章，概述\n- 第2章，数学基础知识回顾，几何学、运动学、KF滤波器理论，矩阵李群\n- 第3章，误差状态卡尔曼滤波器，惯性导航、卫星导航、组合导航\n- 第4章，预积分，图优化，基于预积分的组合导航\n- 第5章，点云基础处理，各种最近邻结构，点云线性拟合\n- 第6章，2D激光建图，scan matching, 似然场，子地图，2D回环检测，pose graph\n- 第7章，3D激光建图，ICP，变种ICP，NDT，NDT LO, Loam-like LO，LIO松耦合\n- 第8章，紧耦合LIO，IESKF，预积分紧耦合LIO\n- 第9章，离线建图，前端，后端，批量回环检测，地图优化，切片导出\n- 第10章，融合定位，激光定位，初始化搜索，切片地图加载，EKF融合\n\n## 本书的特点\n\n- 本书大概是您能找到的类似材料中，数学推导和代码实现最为简单的书籍。\n- 在这本书里，您会复现许多激光SLAM中的经典算法和数据结构。\n    - 您需要自己推导、实现一个误差状态卡尔曼滤波器(ESKF)，把IMU和GNSS的数据喂给它，看它如何推算自己的状态。\n    - 您还会用预积分系统实现一样的功能，然后对比它们的运行方式。\n    - 接下来您会实现一遍2D激光SLAM中的常见算法：扫描匹配、似然场、子地图，占据栅格，再用回环检测来构建一个更大的地图。这些都需要您自己来完成。\n    - 在激光SLAM中，您也会自己实现一遍Kd树，处理近似最近邻，然后用这个Kd树来实现ICP，点面ICP，讨论它们有什么可以改进的地方。\n    - 然后您会实现经典的NDT算法，测试它的配准性能，然后用它来搭建一个激光里程计。它比大部分现有LO快得多。\n    - 您也会实现一个点面ICP的激光里程计，它也非常快。它工作的方式类似于Loam，但更简单。\n    - 您会想要把IMU系统也放到激光里程计中。我们会实现松耦合和紧耦合的LIO系统。同样地，您需要推导一遍迭代卡尔曼滤波器和预积分图优化。\n    - 您需要把上面的系统改成离线运行的，让回环检测运行地充分一些。最后将它做成一个离线的建图系统。\n    - 最后，您可以对上述地图进行切分，然后用来做实时定位。\n- 本书的大部分实现都要比类似的算法库简单的多。您可以快速地理解它们的工作方式，不需要面对复杂的接口。\n- 本书会使用非常方便的并发编程。您会发现，本书的实现往往比现有算法更高效。当然这有一部分是历史原因造成的。\n- 本书每章都会配有动态演示，像这样：\n\n![](./doc/lio_demo.gif)\n![](./doc/2dmapping_demo.gif)\n![](./doc/lo_demo.gif)\n\n希望您能喜欢本书的极简风格，发现算法的乐趣所在。\n\n## 数据集\n\n- 数据集下载链接：\n- 百度云链接: https://pan.baidu.com/s/1ELOcF1UTKdfiKBAaXnE8sQ?pwd=feky 提取码: feky\n- OneDrive链接：https://1drv.ms/u/s!AgNFVSzSYXMahcEZejoUwCaHRcactQ?e=YsOYy2 \n\n- 包含以下数据集。总量较大(270GB)，请视自己硬盘容量下载。\n    - UrbanLoco (ULHK，3D激光，道路场景)\n    - NCLT (3D激光，RTK，校园场景)\n    - WXB (3D激光，园区场景)\n    - 2dmapping (2D激光，商场场景)\n    - AVIA (大疆固态激光)\n    - UTBM (3D激光，道路场景)\n- 其他的内置数据\n    - 第3,4章使用文本格式的IMU，RTK数据\n    - 第7章使用了一部分EPFL的数据作为配准点云来源\n- 您应该将上述数据下载至./dataset/sad/目录下，这样许多默认参数可以正常工作。如果不那么做，您也可以手动指定这些文件路径。如果您硬盘容量不足，可以将其他硬盘的目录软链至此处。\n\n## 编译\n\n- 本书推荐的编译环境是Ubuntu 20.04。更老的Ubuntu版本需要适配gcc编译器，主要是C++17标准。更新的Ubuntu则需要您自己安装对应的ROS版本。\n- 在编译本书代码之前，请先安装以下库（如果您机器上没有安装的话）\n    - ROS Noetic: http://wiki.ros.org/noetic/Installation/Ubuntu\n    - 使用以下指令安装其余的库\n    ```bash\n    sudo apt install -y ros-noetic-pcl-ros ros-noetic-velodyne-msgs libopencv-dev libgoogle-glog-dev libeigen3-dev libsuitesparse-dev libpcl-dev libyaml-cpp-dev libbtbb-dev libgmock-dev\n    ```\n    - Pangolin: 编译安装thirdparty/pangolin.zip，或者 https://github.com/stevenlovegrove/Pangolin\n    - 编译thirdparty/g2o，或者自行编译安装 https://github.com/RainerKuemmerle/g2o \n    - 通过cmake, make安装本repo下的`thirdparty/g2o`库\n- 之后，使用通常的cmake, make方式就可以编译本书所有内容了。例如\n```bash\nmkdir build\ncd build\ncmake ..\nmake -j8\n```\n- 编译后各章的可执行文件位于`bin`目录下\n\n### 适配Ubuntu18.04\n\n为了在Ubuntu18.04上编译运行，需要安装gcc-9，并且使用对应版本的TBB。或者在docker环境下使用。\n\n**安装gcc-9**\n```bash\nsudo add-apt-repository ppa:ubuntu-toolchain-r/test\nsudo update-alternatives --remove-all gcc\nsudo update-alternatives --remove-all g++\n\n#命令最后的1和10是优先级，如果使用auto选择模式，系统将默认使用优先级高的\nsudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 1\nsudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 10\n\nsudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-7 1\nsudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-9 10\n```\n\n**检查版本**\n```bash\ng++ -v\n```\n\n**编译程序**\n```bash\nmkdir build\ncd build\ncmake .. -DBUILD_WITH_UBUNTU1804=ON\nmake -j8\n```\n\n**在docker环境下使用**\n```bash\ndocker build -t sad:v1 .\n./docker/docker_run.sh\n```\n进入docker容器后\n```bash\ncd ./thirdparty/g2o\nmkdir build\ncd build\ncmake ..\nmake -j8\ncd /sad\nmkdir build\ncd build\ncmake ..\nmake -j8\n```\n\n## 常见问题\n1. 图形界面在2023年以后特定型号的笔记本端导致桌面卡死（GL硬件兼容性）：https://github.com/gaoxiang12/slam_in_autonomous_driving/issues/67 \n2. 第5章test_nn编译时，gtest报gmock错误：https://github.com/gaoxiang12/slam_in_autonomous_driving/issues/18\n3. 编译器版本问题：https://github.com/gaoxiang12/slam_in_autonomous_driving/issues/4\n4. g2o编译问题（config.h找不到）： https://github.com/gaoxiang12/slam_in_autonomous_driving/issues/95 \n\n## TODO项\n\n- LioPreiteg在某些数据集上不收敛\n\n## NOTES\n\n- [已确认] ULHK的IMU似乎和别家的不一样，已经去了gravity, iekf初期可能有问题\n- [已确认] NCLT的IMU在转包的时候转成了Lidar系，于是Lidar与IMU之间没有旋转的外参（本来Lidar是转了90度的），现在Lidar是X左Y后Z下，原车是X前Y右Z下。本书使用的NCLT数据均基于点云系,\n  IMU的杆臂被忽略。\n- [已确认] NCLT的rtk fix并不是非常稳定，平均误差在米级\n"
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "thirdparty",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}