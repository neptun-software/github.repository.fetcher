{
  "metadata": {
    "timestamp": 1736557746233,
    "page": 900,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjkyMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "AdguardTeam/AdGuardHome",
      "stars": 26357,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".codecov.yml",
          "type": "blob",
          "size": 0.14,
          "content": "'coverage':\n  'status':\n    'project':\n      'default':\n        'target': '40%'\n        'threshold': null\n    'patch': false\n    'changes': false\n"
        },
        {
          "name": ".dockerignore",
          "type": "blob",
          "size": 0.07,
          "content": "# Ignore everything except for explicitly allowed stuff.\n*\n!dist/docker\n"
        },
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.25,
          "content": "client/* linguist-vendored\n# This file contains a lot of inline SVG data, which often interferes with\n# grepping.  Technically, this file must be reviewed when new icons appear, but\n# that happens fairly rarely.\nclient/src/components/ui/Icons.js -diff\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.87,
          "content": "# This comment is used to simplify checking local copies of the file.  Bump\n# this number every time a significant change is made to this file.\n#\n# AdGuard-Project-Version: 1\n\n# Please, DO NOT put your text editors' temporary files here.  The more are\n# added, the harder it gets to maintain and manage projects' gitignores.  Put\n# them into your global gitignore file instead.\n#\n# See https://stackoverflow.com/a/7335487/1892060.\n#\n# Only build, run, and test outputs here.  Sorted.  With negations at the\n# bottom to make sure they take effect.\n*.db\n*.log\n*.out\n*.snap\n*.test\n/agh-backup/\n/bin/\n/build/*\n/data/\n/dist/\n/filtering/tests/filtering.TestLotsOfRules*.pprof\n/filtering/tests/top-1m.csv\n/internal/next/AdGuardHome.yaml\n/launchpad_credentials\n/querylog.json*\n/snapcraft_login\n/test-reports/\nAdGuardHome\nAdGuardHome.exe\nAdGuardHome.yaml*\ncoverage.txt\nnode_modules/\n\n!/build/gitkeep\n"
        },
        {
          "name": ".markdownlint.json",
          "type": "blob",
          "size": 0.38,
          "content": "{\n  \"ul-indent\": {\n    \"indent\": 4\n  },\n  \"ul-style\": {\n    \"style\": \"dash\"\n  },\n  \"emphasis-style\": {\n    \"style\": \"asterisk\"\n  },\n  \"no-duplicate-heading\": {\n    \"siblings_only\": true\n  },\n  \"no-inline-html\": {\n    \"allowed_elements\": [\n      \"a\"\n    ]\n  },\n  \"no-trailing-spaces\": {\n    \"br_spaces\": 0\n  },\n  \"line-length\": false,\n  \"no-bare-urls\": false,\n  \"link-fragments\": false\n}\n"
        },
        {
          "name": ".twosky.json",
          "type": "blob",
          "size": 1.14,
          "content": "[\n  {\n    \"project_id\": \"home\",\n    \"base_locale\": \"en\",\n    \"localizable_files\": [\n      \"client/src/__locales/en.json\"\n    ],\n    \"languages\": {\n      \"ar\": \"العربية\",\n      \"be\": \"Беларуская\",\n      \"bg\": \"Български\",\n      \"cs\": \"Český\",\n      \"da\": \"Dansk\",\n      \"de\": \"Deutsch\",\n      \"en\": \"English\",\n      \"es\": \"Español\",\n      \"fa\": \"فارسی\",\n      \"fi\": \"Suomi\",\n      \"fr\": \"Français\",\n      \"hr\": \"Hrvatski\",\n      \"hu\": \"Magyar\",\n      \"id\": \"Indonesian\",\n      \"it\": \"Italiano\",\n      \"ja\": \"日本語\",\n      \"ko\": \"한국어\",\n      \"nl\": \"Nederlands\",\n      \"no\": \"Norsk\",\n      \"pl\": \"Polski\",\n      \"pt-br\": \"Português (BR)\",\n      \"pt-pt\": \"Português (PT)\",\n      \"ro\": \"Română\",\n      \"ru\": \"Русский\",\n      \"si-lk\": \"සිංහල\",\n      \"sk\": \"Slovenčina\",\n      \"sl\": \"Slovenščina\",\n      \"sr-cs\": \"Srpski\",\n      \"sv\": \"Svenska\",\n      \"th\": \"ภาษาไทย\",\n      \"tr\": \"Türkçe\",\n      \"uk\": \"Українська\",\n      \"vi\": \"Tiếng Việt\",\n      \"zh-cn\": \"简体中文\",\n      \"zh-hk\": \"繁體中文（香港）\",\n      \"zh-tw\": \"正體中文（台灣）\"\n    }\n  }\n]\n"
        },
        {
          "name": "AGHTechDoc.md",
          "type": "blob",
          "size": 44.82,
          "content": "# AdGuard Home Technical Document\n\nThe document describes technical details and internal algorithms of AdGuard Home.\n\nContents:\n* First startup\n* Installation wizard\n\t* \"Get install settings\" command\n\t* \"Check configuration\" command\n\t* Disable DNSStubListener\n\t* \"Apply configuration\" command\n* Updating\n\t* Get version command\n\t* Update command\n* API: Get global status\n* TLS\n\t* API: Get TLS configuration\n\t* API: Set TLS configuration\n* Device Names and Per-client Settings\n\t* Per-client settings\n\t* Get list of clients\n\t* Add client\n\t* Update client\n\t* Delete client\n\t* API: Find clients by IP\n* DHCP server\n\t* DHCP server in DNS\n\t* DHCP Custom Options\n\t* API: Show DHCP interfaces\n\t* API: Show DHCP status\n\t* API: Check DHCP\n\t* API: Enable DHCP\n\t* Static IP check/set\n\t* API: Add a static lease\n\t* API: Reset DHCP configuration\n\t* RA+SLAAC\n* DNS general settings\n\t* API: Get DNS general settings\n\t* API: Set DNS general settings\n* DNS access settings\n\t* List access settings\n\t* Set access settings\n* Rewrites\n\t* API: List rewrite entries\n\t* API: Add a rewrite entry\n\t* API: Remove a rewrite entry\n* Services Filter\n\t* API: Get blocked services list\n\t* API: Set blocked services list\n* Statistics\n\t* API: Get statistics data\n\t* API: Clear statistics data\n\t* API: Set statistics parameters\n\t* API: Get statistics parameters\n* Query logs\n\t* API: Get query log\n\t* API: Set querylog parameters\n\t* API: Get querylog parameters\n* Filtering\n\t* Filters update mechanism\n\t* API: Get filtering parameters\n\t* API: Set filtering parameters\n\t* API: Refresh filters\n\t* API: Add Filter\n\t* API: Set URL parameters\n\t* API: Delete URL\n\t* API: Domain Check\n* Log-in page\n\t* API: Log in\n\t* API: Log out\n\t* API: Get current user info\n* Safe services\n* ipset\n\n\n## Relations between subsystems\n\n![](doc/agh-arch.png)\n\n\n## First startup\n\nThe first application startup is detected when there's no .yaml configuration file.\n\nWe check if the user is root, otherwise we fail with an error.\n\nWeb server is started up on port 3000 and automatically redirects requests to `/` to Installation wizard.\n\nAfter Installation wizard steps are completed, we write configuration to a file and start normal operation.\n\n\n## Installation wizard\n\nThis is the collection of UI screens that are shown to a user on first application startup.\n\nThe screens are:\n\n1. Welcome\n2. Set up network interface and listening ports for Web and DNS servers\n3. Set up administrator username and password\n4. Configuration complete\n5. Done\n\nAlgorithm:\n\nScreen 2:\n* UI asks server for initial information and shows it\n* User edits the default settings, clicks on \"Next\" button\n* UI asks server to check new settings\n* Server searches for the known issues\n* UI shows information about the known issues and the means to fix them\n* Server applies automatic fixes of the known issues on command from UI\n\nScreen 3:\n* UI asks server to apply the configuration\n* Server restarts DNS server\n\n\n### \"Get install settings\" command\n\nRequest:\n\n\tGET /control/install/get_addresses\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\"web_port\":80,\n\t\"dns_port\":53,\n\t\"interfaces\":{\n\t\t\"enp2s0\":{\"name\":\"enp2s0\",\"mtu\":1500,\"hardware_address\":\"\",\"ip_addresses\":[\"\",\"\"],\"flags\":\"up|broadcast|multicast\"},\n\t\t\"lo\":{\"name\":\"lo\",\"mtu\":65536,\"hardware_address\":\"\",\"ip_addresses\":[\"127.0.0.1\",\"::1\"],\"flags\":\"up|loopback\"},\n\t}\n\t}\n\nIf `interfaces.flags` doesn't contain `up` flag, UI must show `(Down)` status next to its IP address in interfaces selector.\n\n\n### \"Check configuration\" command\n\nRequest:\n\n\tPOST /control/install/check_config\n\n\t{\n\t\"web\":{\"port\":80,\"ip\":\"192.168.11.33\"},\n\t\"dns\":{\"port\":53,\"ip\":\"127.0.0.1\",\"autofix\":false},\n\t\"set_static_ip\": true | false\n\t}\n\nServer should check whether a port is available only in case it itself isn't already listening on that port.\n\nIf `set_static_ip` is `true`, Server attempts to set a static IP for the network interface chosen by `dns.ip` setting.  If the operation is successful, `static_ip.static` setting will be `yes`.  If it fails, `static_ip.static` setting will be set to `error` and `static_ip.error` will contain the error message.\n\nServer replies on success:\n\n\t200 OK\n\n\t{\n\t\"web\":{\"status\":\"\"},\n\t\"dns\":{\"status\":\"\"},\n\t\"static_ip\": {\n\t\t\"static\": \"yes|no|error\",\n\t\t\"ip\": \"<Current dynamic IP address>\", // set if static=no\n\t\t\"error\": \"...\" // set if static=error\n\t}\n\t}\n\nIf `static_ip.static` is `no`, Server has detected that the system uses a dynamic address and it can  automatically set a static address if `set_static_ip` in request is `true`.  See section `Static IP check/set` for detailed process.\n\nServer replies on error:\n\n\t200 OK\n\n\t{\n\t\"web\":{\"status\":\"ERROR MESSAGE\"},\n\t\"dns\":{\"status\":\"ERROR MESSAGE\", \"can_autofix\": true|false},\n\t}\n\n\n### Disable DNSStubListener\n\nOn Linux, if 53 port is not available, server performs several additional checks to determine if the issue can be fixed automatically.\n\n#### Phase 1\n\nRequest:\n\n\tPOST /control/install/check_config\n\n\t{\n\t\"dns\":{\n\t\t\"port\":53,\n\t\t\"ip\":\"127.0.0.1\",\n\t\t\"autofix\":false\n\t}\n\t}\n\nCheck if DNSStubListener is enabled:\n\n\tsystemctl is-enabled systemd-resolved\n\nCheck if DNSStubListener is active:\n\n\tgrep -E '#?DNSStubListener=yes' /etc/systemd/resolved.conf\n\nIf the issue can be fixed automatically, server replies with `\"can_autofix\":true`\n\n\t200 OK\n\n\t{\n\t\"dns\":{\"status\":\"ERROR MESSAGE\", \"can_autofix\":true},\n\t}\n\nIn this case UI shows \"Fix\" button next to error message.\n\n#### Phase 2\n\nIf user clicks on \"Fix\" button, UI sends request to perform an automatic fix\n\n\tPOST /control/install/check_config\n\n\t{\n\t\"dns\":{\"port\":53,\"ip\":\"127.0.0.1\",\"autofix\":true},\n\t}\n\nDeactivate DNSStubListener and update DNS server address.  Create a new file: `/etc/systemd/resolved.conf.d/adguardhome.conf` (create a `/etc/systemd/resolved.conf.d` directory if necessary):\n\n\t[Resolve]\n\tDNS=127.0.0.1\n\tDNSStubListener=no\n\nSpecifying \"127.0.0.1\" as DNS server address is necessary because otherwise the nameserver will be \"127.0.0.53\" which doesn't work without DNSStubListener.\n\nActivate another resolv.conf file:\n\n\tmv /etc/resolv.conf /etc/resolv.conf.backup\n\tln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf\n\nStop DNSStubListener:\n\n\tsystemctl reload-or-restart systemd-resolved\n\nServer replies:\n\n\t200 OK\n\n\t{\n\t\"dns\":{\"status\":\"\"},\n\t}\n\n\n### \"Apply configuration\" command\n\nRequest:\n\n\tPOST /control/install/configure\n\n\t{\n\t\"web\":{\"port\":80,\"ip\":\"192.168.11.33\"},\n\t\"dns\":{\"port\":53,\"ip\":\"127.0.0.1\"},\n\t\"username\":\"u\",\n\t\"password\":\"p\",\n\t}\n\nServer checks the parameters once again, restarts DNS server, replies:\n\n\t200 OK\n\nOn error, server responds with code 400 or 500.  In this case UI should show error message and reset to the beginning.\n\n\t400 Bad Request\n\n\tERROR MESSAGE\n\n\n## Updating\n\nAlgorithm of an update by command:\n\n* UI requests the latest version information from Server\n* Server requests information from Internet;  stores the data in cache for several hours;  sends data to UI\n* If UI sees that a new version is available, it shows notification message and \"Update Now\" button\n* When user clicks on \"Update Now\" button, UI sends Update command to Server\n* UI shows \"Please wait, AGH is being updated...\" message\n* Server performs an update:\n\t* Use working directory from `--work-dir` if necessary\n\t* Download new package for the current OS and CPU\n\t* Unpack the package to a temporary directory `update-vXXX`\n\t* Copy the current configuration file to the directory we unpacked new AGH to\n\t* Check configuration compatibility by executing `./AGH --check-config`.  If this command fails, we won't be able to update.\n\t* Create `backup-vXXX` directory and copy the current configuration file there\n\t* Copy supporting files (README, LICENSE, etc.) to backup directory\n\t* Copy supporting files from the update directory to the current directory\n\t* Move the current binary file to backup directory\n\t* Note: if power fails here, AGH won't be able to start at system boot.  Administrator has to fix it manually\n\t* Move new binary file to the current directory\n\t* Send response to UI\n\t* Stop all tasks, including DNS server, DHCP server, HTTP server\n\t* If AGH is running as a service, use service control functionality to restart\n\t* If AGH is not running as a service, use the current process arguments to start a new process\n\t* Exit process\n* UI resends Get Status command until Server responds to it with the new version.  This means that Server is successfully restarted after update.\n* UI reloads itself\n\n\n### Get version command\n\nOn receiving this request server downloads version.json data from github and stores it in cache for several hours.\n\nExample of version.json data:\n\n\t{\n\t\"version\": \"v0.95-hotfix\",\n\t\"announcement\": \"AdGuard Home v0.95-hotfix is now available!\",\n\t\"announcement_url\": \"\",\n\t\"download_windows_amd64\": \"\",\n\t\"download_windows_386\": \"\",\n\t\"download_darwin_amd64\": \"\",\n\t\"download_linux_amd64\": \"\",\n\t\"download_linux_386\": \"\",\n\t\"download_linux_arm\": \"\",\n\t\"download_linux_arm64\": \"\",\n\t\"download_linux_mips\": \"\",\n\t\"download_linux_mipsle\": \"\",\n\t\"selfupdate_min_version\": \"v0.0\"\n\t}\n\nServer can only auto-update if the current version is equal or higher than `selfupdate_min_version`.\n\nRequest:\n\n\tPOST /control/version.json\n\n\t{\n\t\t\"recheck_now\": true | false // if false, server will check for a new version data only once in several hours\n\t}\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\"new_version\": \"v0.95\",\n\t\"announcement\": \"AdGuard Home v0.95 is now available!\",\n\t\"announcement_url\": \"http://...\",\n\t\"can_autoupdate\": true\n\t}\n\nIf `can_autoupdate` is true, then the server can automatically upgrade to a new version.\n\nResponse when auto-update is disabled by command-line argument:\n\n\t200 OK\n\n\t{\n\t\t\"disabled\":true\n\t}\n\nIt means that update check is disabled by user.  UI should do nothing.\n\n\n### Update command\n\nPerform an update procedure to the latest available version\n\nRequest:\n\n\tPOST /control/update\n\nResponse:\n\n\t200 OK\n\nError response:\n\n\t500\n\nUI shows error message \"Auto-update has failed\"\n\n\n## API: Get global status\n\nRequest:\n\n\tGET /control/status\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\"dns_addresses\":[\"...\"],\n\t\"dns_port\":53,\n\t\"http_port\":3000,\n\t\"language\":\"en\",\n\t\"protection_enabled\":true,\n\t\"running\":true,\n\t\"dhcp_available\":true,\n    \"protection_disabled_duration\":0\n\t\"version\":\"undefined\"\n\t}\n\n\n## DHCP server\n\nEnable DHCP server algorithm:\n\n* UI shows DHCP configuration screen with \"Enabled DHCP\" button disabled, and \"Check DHCP\" button enabled\n* User clicks on \"Check DHCP\"; UI sends request to server\n* Server may fail to detect whether there is another DHCP server working in the network.  In this case UI shows a warning.\n* Server may detect that a dynamic IP configuration is used for this interface.  In this case UI shows a warning.\n* UI enables \"Enable DHCP\" button\n* User clicks on \"Enable DHCP\"; UI sends request to server\n* Server sets a static IP (if necessary), enables DHCP server, sends the status back to UI\n* UI shows the status\n\n\n### DHCP server in DNS\n\nDHCP leases are used in several ways by DNS module.\n\n* For \"A\" DNS request we reply with an IP address leased by our DHCP server.\n\n\n\t\t< A bills-notebook.lan.\n\t\t> A bills-notebook.lan. = 192.168.1.100\n\n* For \"PTR\" DNS request we reply with a hostname from an active DHCP lease.\n\n\t\t< PTR 100.1.168.192.in-addr.arpa.\n\t\t> PTR 100.1.168.192.in-addr.arpa. = bills-notebook.\n\n\n### DHCP Custom Options\n\nOption with arbitrary hexadecimal data:\n\n\tDEC_CODE hex HEX_DATA\n\nwhere DEC_CODE is a decimal DHCPv4 option code in range [1..255]\n\nOption with IP data (only 1 IP is supported):\n\n\tDEC_CODE ip IP_ADDR\n\n\n### API: Show DHCP interfaces\n\nRequest:\n\n\tGET /control/dhcp/interfaces\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\t\"iface_name\":{\n\t\t\t\"name\":\"iface_name\",\n\t\t\t\"hardware_address\":\"...\",\n\t\t\t\"ipv4_addresses\":[\"ipv4 addr\", ...],\n\t\t\t\"ipv6_addresses\":[\"ipv6 addr\", ...],\n\t\t\t\"gateway_ip\":\"...\",\n\t\t\t\"flags\":\"up|broadcast|multicast\"\n\t\t}\n\t\t...\n\t}\n\n\n### API: Show DHCP status\n\nRequest:\n\n\tGET /control/dhcp/status\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\t\"enabled\":false,\n\t\t\"interface_name\":\"...\",\n\t\t\"v4\":{\n\t\t\t\"gateway_ip\":\"...\",\n\t\t\t\"subnet_mask\":\"...\",\n\t\t\t\"range_start\":\"...\", // if empty: DHCPv4 won't be enabled\n\t\t\t\"range_end\":\"...\",\n\t\t\t\"lease_duration\":60,\n\t\t},\n\t\t\"v6\":{\n\t\t\t\"range_start\":\"...\", // if empty: DHCPv6 won't be enabled\n\t\t\t\"lease_duration\":60,\n\t\t}\n\t\t\"leases\":[\n\t\t\t{\"ip\":\"...\",\"mac\":\"...\",\"hostname\":\"...\",\"expires\":\"...\"}\n\t\t\t...\n\t\t],\n\t\t\"static_leases\":[\n\t\t\t{\"ip\":\"...\",\"mac\":\"...\",\"hostname\":\"...\"}\n\t\t\t...\n\t\t]\n\t}\n\n\n### API: Check DHCP\n\nRequest:\n\n\tPOST /control/dhcp/find_active_dhcp\n\n\tvboxnet0\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\tv4: {\n\t\t\t\"other_server\": {\n\t\t\t\t\"found\": \"yes|no|error\",\n\t\t\t\t\"error\": \"Error message\", // set if found=error\n\t\t\t},\n\t\t\t\"static_ip\": {\n\t\t\t\t\"static\": \"yes|no|error\",\n\t\t\t\t\"ip\": \"<Current dynamic IP address>\", // set if static=no\n\t\t\t}\n\t\t}\n\t\tv6: {\n\t\t\t\"other_server\": {\n\t\t\t\t\"found\": \"yes|no|error\",\n\t\t\t\t\"error\": \"Error message\", // set if found=error\n\t\t\t},\n\t\t}\n\t}\n\nIf `other_server.found` is:\n* `no`: everything is fine - there is no other DHCP server\n* `yes`: we found another DHCP server.  UI shows a warning.\n* `error`: we failed to determine whether there's another DHCP server.  `other_server.error` contains error details.  UI shows a warning.\n\nIf `static_ip.static` is:\n* `yes`: everything is fine - server uses static IP address.\n\n* `no`: `static_ip.ip` contains the current dynamic IP address which we may set as static.  In this case UI shows a warning:\n\n\t\tYour system uses dynamic IP address configuration for interface <CURRENT INTERFACE NAME>.  In order to use DHCP server a static IP address must be set.  Your current IP address is <static_ip.ip>.  We will automatically set this IP address as static if you press Enable DHCP button.\n\n* `error`: this means that the server failed to check for a static IP.  In this case UI shows a warning:\n\n\t\tIn order to use DHCP server a static IP address must be set.  We failed to determine if this network interface is configured using static IP address.  Please set a static IP address manually.\n\n\n### API: Enable DHCP\n\nRequest:\n\n\tPOST /control/dhcp/set_config\n\n\t{\n\t\"enabled\":true,\n\t\"interface_name\":\"vboxnet0\",\n\t\"v4\":{\n\t\t\"gateway_ip\":\"192.169.56.1\",\n\t\t\"subnet_mask\":\"255.255.255.0\",\n\t\t\"range_start\":\"192.169.56.100\",\n\t\t\"range_end\":\"192.169.56.200\", // Note: first 3 octets must match \"range_start\"\n\t\t\"lease_duration\":60,\n\t},\n\t\"v6\":{\n\t\t\"range_start\":\"...\",\n\t\t\"lease_duration\":60,\n\t}\n\t}\n\nResponse:\n\n\t200 OK\n\n\tOK\n\nFor v4, if range_start = \"1.2.3.4\", the range_end must be \"1.2.3.X\" where X > 4.\n\nFor v6, if range_start = \"2001::1\", the last IP is \"2001:ff\".\n\n\n### Static IP check/set\n\nBefore enabling DHCP server we have to make sure the network interface we use has a static IP configured.\n\n#### Phase 1\n\nOn Debian systems DHCP is configured by `/etc/dhcpcd.conf`.\n\nTo detect if a static IP is used currently we search for line\n\n\tinterface eth0\n\nand then look for line\n\n\tstatic ip_address=...\n\nIf the interface already has a static IP, everything is set up, we don't have to change anything.\n\nTo get the current IP address along with netmask we execute\n\n\tip -oneline -family inet address show eth0\n\nwhich will print:\n\n\t2: eth0    inet 192.168.0.1/24 brd 192.168.0.255 scope global eth0\\       valid_lft forever preferred_lft forever\n\nTo get the current gateway address:\n\n\tip route show dev enp2s0\n\nwhich will print:\n\n\tdefault via 192.168.0.1 proto dhcp metric 100\n\n\n#### Phase 2 (Raspbian)\n\nStep 1.\n\nTo set a static IP address we add these lines to `dhcpcd.conf`:\n\n\tinterface eth0\n\tstatic ip_address=192.168.0.1/24\n\tstatic routers=192.168.0.1\n\tstatic domain_name_servers=192.168.0.1\n\n* Don't set 'routers' if we couldn't find gateway IP\n* Set 'domain_name_servers' equal to our IP\n\nStep 2.\n\nIf we would set a different IP address, we'd need to replace the IP address for the current network configuration.  But currently this step isn't necessary.\n\n\tip addr replace dev eth0 192.168.0.1/24\n\n\n#### Phase 2 (Ubuntu)\n\n`/etc/netplan/01-netcfg.yaml` or `/etc/netplan/01-network-manager-all.yaml`\n\nThis configuration example has a static IP set for `enp0s3` interface:\n\n\tnetwork:\n\t\tversion: 2\n\t\trenderer: networkd\n\t\tethernets:\n\t\t\tenp0s3:\n\t\t\t\tdhcp4: no\n\t\t\t\taddresses: [192.168.0.2/24]\n\t\t\t\tgateway: 192.168.0.1\n\t\t\t\tnameservers:\n\t\t\t\t\taddresses: [192.168.0.1,8.8.8.8]\n\nFor dynamic configuration `dhcp4: yes` is set.\n\nMake a backup copy to `/etc/netplan/01-netcfg.yaml.backup`.\n\nApply:\n\n\tnetplan apply\n\nRestart network:\n\n\tsystemctl restart networking\n\nor:\n\n\tsystemctl restart network-manager\n\nor:\n\n\tsystemctl restart system-networkd\n\n\n### API: Add a static lease\n\nRequest:\n\n\tPOST /control/dhcp/add_static_lease\n\n\t{\n\t\t\"mac\":\"...\",\n\t\t\"ip\":\"...\",\n\t\t\"hostname\":\"...\"\n\t}\n\nResponse:\n\n\t200 OK\n\n\n### Remove a static lease\n\nRequest:\n\n\tPOST /control/dhcp/remove_static_lease\n\n\t{\n\t\t\"mac\":\"...\",\n\t\t\"ip\":\"...\",\n\t\t\"hostname\":\"...\"\n\t}\n\nResponse:\n\n\t200 OK\n\n\n### API: Reset DHCP configuration\n\nClear all DHCP leases and configuration settings.\nDHCP server will be stopped if it's currently running.\n\nRequest:\n\n\tPOST /control/dhcp/reset\n\nResponse:\n\n\t200 OK\n\n\n### RA+SLAAC\n\nThere are 3 options for a client to get IPv6 address:\n\n1. via DHCPv6.\n\tClient doesn't receive any `ICMPv6.RouterAdvertisement` packets, so it tries to use DHCPv6.\n2. via SLAAC.\n\tClient receives a `ICMPv6.RouterAdvertisement` packet with `Managed=false` flag and IPv6 prefix.\n\tClient then assigns to itself an IPv6 address using this prefix and its MAC address.\n\tDHCPv6 server won't be started in this case.\n3. via DHCPv6 or SLAAC.\n\tClient receives a `ICMPv6.RouterAdvertisement` packet with `Managed=true` flag and IPv6 prefix.\n\tClient may choose to use SLAAC or DHCPv6 to obtain an IPv6 address.\n\nConfiguration:\n\n\tdhcp:\n\t\t...\n\t\tdhcpv6:\n\t\t\t...\n\t\t\tra_slaac_only: false\n\t\t\tra_allow_slaac: false\n\n* `ra_slaac_only:false; ra_allow_slaac:false`: use option #1.\n\tDon't send any `ICMPv6.RouterAdvertisement` packets.\n* `ra_slaac_only:true; ra_allow_slaac:false`: use option #2.\n\tPeriodically send `ICMPv6.RouterAdvertisement(Flags=(Managed=false,Other=false))` packets.\n* `ra_slaac_only:false; ra_allow_slaac:true`: use option #3.\n\tPeriodically send `ICMPv6.RouterAdvertisement(Flags=(Managed=true,Other=true))` packets.\n\nICMPv6.RouterAdvertisement packet description:\n\n\tICMPv6:\n\tType=RouterAdvertisement(134)\n\tFlags\n\t\tManaged=<BOOL>\n\t\tOther=<BOOL>\n\tOption=Prefix information(3)\n\t\t<IPv6 address prefix (/64) of the network interface>\n\tOption=MTU(5)\n\t\t<...>\n\tOption=Source link-layer address(1)\n\t\t<MAC address>\n\tOption=Recursive DNS Server(25)\n\t\t<IPv6 address of DNS server>\n\n\n## TLS\n\n\n### API: Get TLS configuration\n\nRequest:\n\n\tGET /control/tls/status\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\"enabled\":true,\n\t\"server_name\":\"...\",\n\t\"port_https\":443,\n\t\"port_dns_over_tls\":853,\n\t\"port_dns_over_quic\":784,\n\t\"certificate_chain\":\"...\",\n\t\"private_key\":\"...\",\n\t\"certificate_path\":\"...\",\n\t\"private_key_path\":\"...\"\n\n\t\"subject\":\"CN=...\",\n\t\"issuer\":\"CN=...\",\n\t\"not_before\":\"2019-03-19T08:23:45Z\",\n\t\"not_after\":\"2029-03-16T08:23:45Z\",\n\t\"dns_names\":null,\n\t\"key_type\":\"RSA\",\n\t\"valid_cert\":true,\n\t\"valid_key\":true,\n\t\"valid_chain\":false,\n\t\"valid_pair\":true,\n\t\"warning_validation\":\"Your certificate does not verify: x509: certificate signed by unknown authority\"\n\t}\n\n\n### API: Set TLS configuration\n\nRequest:\n\n\tPOST /control/tls/configure\n\n\t{\n\t\"enabled\":true,\n\t\"server_name\":\"hostname\",\n\t\"force_https\":false,\n\t\"port_https\":443,\n\t\"port_dns_over_tls\":853,\n\t\"port_dns_over_quic\":784,\n\t\"certificate_chain\":\"...\",\n\t\"private_key\":\"...\",\n\t\"certificate_path\":\"...\", // if set, certificate_chain must be empty\n\t\"private_key_path\":\"...\" // if set, private_key must be empty\n\t}\n\nResponse:\n\n\t200 OK\n\n### API: Validate TLS configuration\n\nRequest:\n\n\tPOST /control/tls/validate\n\n    {\n    \"enabled\":true,\n    \"port_https\":443,\n    \"port_dns_over_tls\":853,\n    \"port_dns_over_quic\":784,\n    \"allow_unencrypted_doh\":false,\n    \"certificate_chain\":\"...\",\n    \"private_key\":\"...\",\n    \"certificate_path\":\"...\",\n    \"private_key_path\":\"...\",\n    \"valid_cert\":true,\n    \"valid_chain\":false,\n    \"not_before\":\"2019-03-19T08:23:45Z\",\n    \"not_after\":\"2029-03-16T08:23:45Z\",\n    \"dns_names\":null,\n    \"valid_key\":true,\n    \"valid_pair\":true\n    }\n\n\nResponse:\n\n\t200 OK\n\n\n## Device Names and Per-client Settings\n\nWhen a client requests information from DNS server, he's identified by IP address.\nAdministrator can set a name for a client with a known IP and also override global settings for this client.  The name is used to improve readability of DNS logs: client's name is shown in UI next to its IP address.  The names are loaded from 3 sources:\n* automatically from \"/etc/hosts\" file.  It's a list of `IP<->Name` entries which is loaded once on AGH startup from \"/etc/hosts\" file.\n* automatically using rDNS.  It's a list of `IP<->Name` entries which is added in runtime using rDNS mechanism when a client first makes a DNS request.\n* manually configured via UI.  It's a list of client's names and their settings which is loaded from configuration file and stored on disk.\n\n### Per-client settings\n\nUI provides means to manage the list of known clients (List/Add/Update/Delete) and their settings.  These settings are stored in configuration file as an array of objects.\n\nNotes:\n\n* `name`, `ip` and `mac` values are unique.\n\n* If `mac` is set and DHCP server is enabled, IP is taken from DHCP lease table.\n\n* If `use_global_settings` is true, then DNS responses for this client are processed and filtered using global settings.\n\n* If `use_global_settings` is false, then the client-specific settings are used to override (enable or disable) global settings.\n\n* If `use_global_blocked_services` is false, then the client-specific settings are used to override (enable or disable) global Blocked Services settings.\n\n\n### Get list of clients\n\nRequest:\n\n\tGET /control/clients\n\nResponse:\n\n\t200 OK\n\n\t{\n\tclients: [\n\t\t{\n\t\t\tname: \"client1\"\n\t\t\tids: [\"...\", ...] // IP, CIDR or MAC\n\t\t\ttags: [\"...\", ...]\n\t\t\tuse_global_settings: true\n\t\t\tfiltering_enabled: false\n\t\t\tparental_enabled: false\n\t\t\tsafebrowsing_enabled: false\n\t\t\tsafesearch_enabled: false\n\t\t\tuse_global_blocked_services: true\n\t\t\tblocked_services: [ \"name1\", ... ]\n\t\t\twhois_info: {\n\t\t\t\tkey: \"value\"\n\t\t\t\t...\n\t\t\t}\n\t\t\tupstreams: [\"upstream1\", ...]\n\t\t}\n\t]\n\tauto_clients: [\n\t\t{\n\t\t\tname: \"host\"\n\t\t\tip: \"...\"\n\t\t\tsource: \"etc/hosts\" || \"rDNS\"\n\t\t\twhois_info: {\n\t\t\t\tkey: \"value\"\n\t\t\t\t...\n\t\t\t}\n\t\t}\n\t]\n\tsupported_tags: [\"...\", ...]\n\t}\n\nSupported keys for `whois_info`: orgname, country, city.\n\n\n### Add client\n\nRequest:\n\n\tPOST /control/clients/add\n\n\t{\n\t\tname: \"client1\"\n\t\tids: [\"...\", ...] // IP, CIDR or MAC\n\t\ttags: [\"...\", ...]\n\t\tuse_global_settings: true\n\t\tfiltering_enabled: false\n\t\tparental_enabled: false\n\t\tsafebrowsing_enabled: false\n\t\tsafesearch_enabled: false\n\t\tuse_global_blocked_services: true\n\t\tblocked_services: [ \"name1\", ... ]\n\t\tupstreams: [\"upstream1\", ...]\n\t}\n\nResponse:\n\n\t200 OK\n\nError response (Client already exists):\n\n\t400\n\n\n### Update client\n\nRequest:\n\n\tPOST /control/clients/update\n\n\t{\n\t\tname: \"client1\"\n\t\tdata: {\n\t\t\tname: \"client1\"\n\t\t\tids: [\"...\", ...] // IP, CIDR or MAC\n\t\t\ttags: [\"...\", ...]\n\t\t\tuse_global_settings: true\n\t\t\tfiltering_enabled: false\n\t\t\tparental_enabled: false\n\t\t\tsafebrowsing_enabled: false\n\t\t\tsafesearch_enabled: false\n\t\t\tuse_global_blocked_services: true\n\t\t\tblocked_services: [ \"name1\", ... ]\n\t\t\tupstreams: [\"upstream1\", ...]\n\t\t}\n\t}\n\nResponse:\n\n\t200 OK\n\nError response (Client not found):\n\n\t400\n\n\n### Delete client\n\nRequest:\n\n\tPOST /control/clients/delete\n\n\t{\n\t\tname: \"client1\"\n\t}\n\nResponse:\n\n\t200 OK\n\nError response (Client not found):\n\n\t400\n\n\n### API: Find clients by IP\n\nThis method returns the list of clients (manual and auto-clients) matching the IP list.\nFor auto-clients only `name`, `ids`, `whois_info`, `disallowed`, and `disallowed_rule` fields are set.  Other fields are empty.\n\nRequest:\n\n\tGET /control/clients/find?ip0=...&ip1=...&ip2=...\n\nResponse:\n\n\t200 OK\n\n\t[\n\t{\n\t\t\"1.2.3.4\": {\n\t\t\tname: \"client1\"\n\t\t\tids: [\"...\", ...] // IP, CIDR or MAC\n\t\t\tuse_global_settings: true\n\t\t\tfiltering_enabled: false\n\t\t\tparental_enabled: false\n\t\t\tsafebrowsing_enabled: false\n\t\t\tsafesearch_enabled: false\n\t\t\tuse_global_blocked_services: true\n\t\t\tblocked_services: [ \"name1\", ... ]\n\t\t\twhois_info: {\n\t\t\t\tkey: \"value\"\n\t\t\t\t...\n\t\t\t}\n\n\t\t\t\"disallowed\": false,\n\t\t\t\"disallowed_rule\": \"...\"\n\t\t}\n\t}\n\t...\n\t]\n\n* `disallowed` - whether the client's IP is blocked or not.\n* `disallowed_rule` - the rule due to which the client is disallowed. If `disallowed` is `true`, and this string is empty - it means that the client IP is disallowed by the \"allowed IP list\", i.e. it is not included in allowed.\n\n## DNS general settings\n\n### API: Get DNS general settings\n\nRequest:\n\n\tGET /control/dns_info\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\t\"upstream_dns\": [\"tls://...\", ...],\n\t\t\"upstream_dns_file\": \"\",\n\t\t\"bootstrap_dns\": [\"1.2.3.4\", ...],\n\n\t\t\"protection_enabled\": true | false,\n\t\t\"ratelimit\": 1234,\n\t\t\"blocking_mode\": \"default\" | \"refused\" | \"nxdomain\" | \"null_ip\" | \"custom_ip\",\n\t\t\"blocking_ipv4\": \"1.2.3.4\",\n\t\t\"blocking_ipv6\": \"1:2:3::4\",\n\t\t\"edns_cs_enabled\": true | false,\n\t\t\"dnssec_enabled\": true | false\n\t\t\"disable_ipv6\": true | false,\n\t\t\"upstream_mode\": \"\" | \"parallel\" | \"fastest_addr\"\n\t\t\"cache_size\": 1234, // in bytes\n\t\t\"cache_ttl_min\": 1234, // in seconds\n\t\t\"cache_ttl_max\": 1234, // in seconds\n\t}\n\n\n### API: Set DNS general settings\n\nRequest:\n\n\tPOST /control/dns_config\n\n\t{\n\t\t\"upstream_dns\": [\"tls://...\", ...],\n\t\t\"upstream_dns_file\": \"\",\n\t\t\"bootstrap_dns\": [\"1.2.3.4\", ...],\n\n\t\t\"protection_enabled\": true | false,\n\t\t\"ratelimit\": 1234,\n\t\t\"blocking_mode\": \"default\" | \"refused\" | \"nxdomain\" | \"null_ip\" | \"custom_ip\",\n\t\t\"blocking_ipv4\": \"1.2.3.4\",\n\t\t\"blocking_ipv6\": \"1:2:3::4\",\n\t\t\"edns_cs_enabled\": true | false,\n\t\t\"dnssec_enabled\": true | false\n\t\t\"disable_ipv6\": true | false,\n\t\t\"upstream_mode\": \"\" | \"parallel\" | \"fastest_addr\"\n\t\t\"cache_size\": 1234, // in bytes\n\t\t\"cache_ttl_min\": 1234, // in seconds\n\t\t\"cache_ttl_max\": 1234, // in seconds\n\t}\n\nResponse:\n\n\t200 OK\n\n`blocking_mode`:\n* default: Respond with NXDOMAIN when blocked by Adblock-style rule;  respond with the IP address specified in the rule when blocked by /etc/hosts-style rule\n* NXDOMAIN: Respond with NXDOMAIN code\n* Null IP: Respond with zero IP address (0.0.0.0 for A; :: for AAAA)\n* Custom IP: Respond with a manually set IP address\n\n`blocking_ipv4` and `blocking_ipv6` values are active when `blocking_mode` is set to `custom_ip`.\n\n\n## DNS access settings\n\nThere are low-level settings that can block undesired DNS requests.  \"Blocking\" means not responding to request.\n\nThere are 3 types of access settings:\n* allowed_clients: Only these clients are allowed to make DNS requests.\n* disallowed_clients: These clients are not allowed to make DNS requests.\n* blocked_hosts: These hosts are not allowed to be resolved by a DNS request.\n\n\n### List access settings\n\nRequest:\n\n\tGET /control/access/list\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\tallowed_clients: [\"127.0.0.1\", ...]\n\t\tdisallowed_clients: [\"127.0.0.1\", ...]\n\t\tblocked_hosts: [\"host.com\", ...] // host name or a wildcard\n\t}\n\n\n### Set access settings\n\nRequest:\n\n\tPOST /control/access/set\n\n\t{\n\t\tallowed_clients: [\"127.0.0.1\", ...]\n\t\tdisallowed_clients: [\"127.0.0.1\", ...]\n\t\tblocked_hosts: [\"host.com\", ...]\n\t}\n\nResponse:\n\n\t200 OK\n\n\n## Rewrites\n\nThis section allows the administrator to easily configure custom DNS response for a specific domain name.\nA, AAAA and CNAME records are supported.\n\nSyntax:\n\n\tkey -> value\n\nwhere `key` is a host name or a wild card that matches Question in DNS request\nand `value` is either:\n* IPv4 address: use this IP in A response\n* IPv6 address: use this IP in AAAA response\n* canonical name: add CNAME record\n* \"`key`\": CNAME exception - pass request to upstream\n* \"A\": A exception - pass A request to upstream\n* \"AAAA\": AAAA exception - pass AAAA request to upstream\n\n\n#### Example: A record\n\n\thost.com -> 1.2.3.4\n\nResponse:\n\n\tA:\n\t\tA = 1.2.3.4\n\tAAAA:\n\t\t<empty>\n\n#### Example: AAAA record\n\n\thost.com -> ::1\n\nResponse:\n\n\tA:\n\t\t<empty>\n\tAAAA:\n\t\tAAAA = ::1\n\n#### Example: CNAME record\n\n\tsub.host.com -> host.com\n\nResponse:\n\n\tA:\n\t\tCNAME = host.com\n\t\tA = <IPv4 address of host.com>\n\tAAAA:\n\t\tCNAME = host.com\n\t\tAAAA = <IPv6 address of host.com>\n\n#### Example: CNAME+A records\n\n\tsub.host.com -> host.com\n\thost.com -> 1.2.3.4\n\nResponse:\n\n\tA:\n\t\tCNAME = host.com\n\t\tA = 1.2.3.4\n\tAAAA:\n\t\tCNAME = host.com\n\n#### Example: Wildcard CNAME+A record with CNAME exception\n\n\t*.host.com -> 1.2.3.4\n\tpass.host.com -> pass.host.com\n\nResponse to `my.host.com`:\n\n\tA:\n\t\tA = 1.2.3.4\n\tAAAA:\n\t\t<empty>\n\nResponse to `pass.host.com`:\n\n\tA:\n\t\tA = <IPv4 address of pass.host.com>\n\tAAAA:\n\t\tAAAA = <IPv6 address of pass.host.com>\n\n#### Example: A record with AAAA exception\n\n\thost.com -> 1.2.3.4\n\thost.com -> AAAA\n\nResponse:\n\n\tA:\n\t\tA = 1.2.3.4\n\tAAAA:\n\t\tAAAA = <IPv6 address of host.com>\n\n#### Example: pass A only\n\n\thost.com -> A\n\nResponse:\n\n\tA:\n\t\tA = <IPv4 address of host.com>\n\tAAAA:\n\t\t<empty>\n\n\n### API: List rewrite entries\n\nRequest:\n\n\tGET /control/rewrite/list\n\nResponse:\n\n\t200 OK\n\n\t[\n\t{\n\t\tdomain: \"...\"\n\t\tanswer: \"...\"\n\t}\n\t...\n\t]\n\n`domain` can be an exact host name (`www.host.com`) or a wildcard (`*.host.com`).\n\n\n### API: Add a rewrite entry\n\nRequest:\n\n\tPOST /control/rewrite/add\n\n\t{\n\t\tdomain: \"...\"\n\t\tanswer: \"...\" // \"1.2.3.4\" (A) || \"::1\" (AAAA) || \"hostname\" (CNAME)\n\t}\n\nResponse:\n\n\t200 OK\n\n\n### API: Remove a rewrite entry\n\nRequest:\n\n\tPOST /control/rewrite/delete\n\n\t{\n\t\tdomain: \"...\"\n\t\tanswer: \"...\"\n\t}\n\nResponse:\n\n\t200 OK\n\n\n## Services Filter\n\nAllows to quickly block popular sites globally or for specific client only.\nUI manages these settings via global or per-client API.\nUI and server have the same list of the services supported and this list must always be in synchronization.\nUI code also contains icons for each service: `client/src/components/ui/Icons.js`.\n\nHow it works:\n* UI presents the list of services which user may want to block\n* Admin clicks on the checkboxes in front of the services to block and presses Save\n* UI sends `Set blocked services list` or `Update client` message\n* Server updates the internal configuration\n* When a user sends a DNS request for a host which is blocked by these settings, he won't receive its IP address\n* Query log will show that this request was blocked by \"Blocked services\"\n\nInternally, all supported services are stored as a map:\n\n\tservice name -> list of rules\n\n\n### API: Get blocked services list of available services\n\nRequest:\n\n\tGET /control/blocked_services/services\n\nResponse:\n\n\t200 OK\n\n\t[ \"name1\", ... ]\n\n\n### API: Get blocked services list\n\nRequest:\n\n\tGET /control/blocked_services/list\n\nResponse:\n\n\t200 OK\n\n\t[ \"name1\", ... ]\n\n\n### API: Set blocked services list\n\nRequest:\n\n\tPOST /control/blocked_services/set\n\n\t[ \"name1\", ... ]\n\nResponse:\n\n\t200 OK\n\n\n## Statistics\n\nLoad (main thread):\n. Load data from the last bucket from DB for the current hour\n\nRuntime (DNS worker threads):\n. Update current unit\n\nRuntime (goroutine):\n. Periodically check that current unit should be flushed to file (when the current hour changes)\n . If so, flush it, allocate a new empty unit\n\nRuntime (HTTP worker threads):\n. To respond to \"Get statistics\" API request we:\n . load all units from file\n . load current unit\n . process data from all loaded units:\n  . sum up data for \"total counters\" output values\n  . add value into \"per time unit counters\" output arrays\n  . aggregate data for \"top_\" output arrays;  sort in descending order\n\nUnload (main thread):\n. Flush current unit to file\n\n\n### API: Get statistics data\n\nRequest:\n\n\tGET /control/stats\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\ttime_units: hours | days\n\n\t\t// total counters:\n\t\tnum_dns_queries: 123\n\t\tnum_blocked_filtering: 123\n\t\tnum_replaced_safebrowsing: 123\n\t\tnum_replaced_safesearch: 123\n\t\tnum_replaced_parental: 123\n\t\tavg_processing_time: 123.123\n\n\t\t// per time unit counters\n\t\tdns_queries: [123, ...]\n\t\tblocked_filtering: [123, ...]\n\t\treplaced_parental: [123, ...]\n\t\treplaced_safebrowsing: [123, ...]\n\n\t\ttop_queried_domains: [\n\t\t\t{host: 123},\n\t\t\t...\n\t\t]\n\t\ttop_blocked_domains: [\n\t\t\t{host: 123},\n\t\t\t...\n\t\t]\n\t\ttop_clients: [\n\t\t\t{IP: 123},\n\t\t\t...\n\t\t]\n\t}\n\n\n### API: Clear statistics data\n\nRequest:\n\n\tPOST /control/stats_reset\n\nResponse:\n\n\t200 OK\n\n\n### API: Set statistics parameters\n\nRequest:\n\n\tPOST /control/stats_config\n\n\t{\n\t\t\"interval\": 1 | 7 | 30 | 90\n\t}\n\nResponse:\n\n\t200 OK\n\n\n### API: Get statistics parameters\n\nRequest:\n\n\tGET /control/stats_info\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\t\"interval\": 1 | 7 | 30 | 90\n\t}\n\n\n## Query logs\n\nWhen a new DNS request is received and processed, we store information about this event in \"query log\".  It is a file on disk in JSON format:\n\n\t{\n\t\"IP\":\"127.0.0.1\", // client IP\n\t\"T\":\"...\", // response time\n\t\"QH\":\"...\", // target host name without the last dot\n\t\"QT\":\"...\", // question type\n\t\"QC\":\"...\", // question class\n\t\"CP\":\"\" | \"doh\", // client connection protocol\n\t\"Answer\":\"base64 data\",\n\t\"OrigAnswer\":\"base64 data\",\n\t\"Result\":{\n\t\t\"IsFiltered\":true,\n\t\t\"Reason\":3,\n\t\t\"Rule\":\"...\",\n\t\t\"FilterID\":1,\n\t\t\"ServiceName\":\"...\"\n\t\t},\n\t\"Elapsed\":12345,\n\t\"Upstream\":\"...\",\n\t}\n\n\n### Adding new data\n\nFirst, new data is stored in a memory region.  When this array is filled to a particular amount of entries (e.g. 5000), we flush this data to a file and clear the array.\n\n\n### Getting data\n\nWhen UI asks for data from query log (see \"API: Get query log\"), server reads the newest entries from memory array and the file.  The maximum number of items returned per one request is limited by configuration.\n\n\n### Removing old data\n\nWe store data for a limited amount of time - the log file is automatically rotated.\n\n* On AGH startup read the first line from query logs and store its time value\n* If there's no log file yet, set the time value of the first log event when the file is created\n* If this time value is older than our time limit, perform file rotate procedure\n* While AGH is running, check the previous condition every 24 hours\n\n\n### API: Get query log\n\nRequest:\n\n\tGET /control/querylog\n\t?older_than=2006-01-02T15:04:05.999999999Z07:00\n\t&search=...\n\t&response_status=\"...\"\n\n`older_than` setting is used for paging.  UI uses an empty value for `older_than` on the first request and gets the latest log entries. To get the older entries, UI sets `older_than` to the `oldest` value from the server's response.\n\nIf search settings are set, server returns only entries that match the specified request.\n\n`search`:\nmatch by domain name or client IP address.\nThe server matches substrings by default: e.g. `adguard.com` matches `www.adguard.com`.\nStrict matching can be enabled by enclosing the value in double quotes: e.g. `\"adguard.com\"` matches `adguard.com` but doesn't match `www.adguard.com`.\n\n`response_status`:\n* all\n* filtered             - all kinds of filtering\n* blocked              - blocked or blocked services\n* blocked_services     - blocked services\n* blocked_safebrowsing - blocked by safebrowsing\n* blocked_parental     - blocked by parental control\n* whitelisted          - whitelisted\n* rewritten            - all kinds of rewrites\n* safe_search          - enforced safe search\n* processed            - not blocked, not white-listed entries\n\nResponse:\n\n\t{\n\t\"oldest\":\"2006-01-02T15:04:05.999999999Z07:00\"\n\t\"data\":[\n\t{\n\t\t\"answer\":[\n\t\t\t{\n\t\t\t\"ttl\":10,\n\t\t\t\"type\":\"AAAA\",\n\t\t\t\"value\":\"::\"\n\t\t\t}\n\t\t\t...\n\t\t],\n\t\t\"original_answer\":[ // Answer from upstream server (optional)\n\t\t\t{\n\t\t\t\"type\":\"AAAA\",\n\t\t\t\"value\":\"::\"\n\t\t\t}\n\t\t\t...\n\t\t],\n\t\t\"upstream\":\"...\", // Upstream URL starting with tcp://, tls://, https://, or with an IP address\n\t\t\"answer_dnssec\": true,\n\t\t\"client\":\"127.0.0.1\",\n\t\t\"client_proto\": \"\" (plain) | \"doh\" | \"dot\" | \"doq\",\n\t\t\"elapsedMs\":\"0.098403\",\n\t\t\"filterId\":1,\n\t\t\"question\":{\n\t\t\t\"class\":\"IN\",\n\t\t\t\"host\":\"doubleclick.net\",\n\t\t\t\"type\":\"AAAA\"\n\t\t},\n\t\t\"reason\":\"FilteredBlackList\",\n\t\t\"rule\":\"||doubleclick.net^\",\n\t\t\"service_name\": \"...\", // set if reason=FilteredBlockedService\n\t\t\"status\":\"NOERROR\",\n\t\t\"time\":\"2006-01-02T15:04:05.999999999Z07:00\"\n\t}\n\t...\n\t]\n\t}\n\nThe most recent entries are at the top of list.\n\nIf there are no more older entries, `\"oldest\":\"\"` is returned.\n\n\n### API: Set querylog parameters\n\nRequest:\n\n\tPOST /control/querylog_config\n\n\t{\n\t\t\"enabled\": true | false\n\t\t\"interval\": 1 | 7 | 30 | 90\n\t\t\"anonymize_client_ip\": true | false // anonymize clients' IP addresses\n\t}\n\nResponse:\n\n\t200 OK\n\n`anonymize_client_ip`:\n1. New log entries written to a log file will contain modified client IP addresses.  Note that there's no way to obtain the full IP address later for these entries.\n2. `GET /control/querylog` response data will contain modified client IP addresses (masked /24 or /112).\n3. Searching by client IP won't work for the previously stored entries.\n\nHow `anonymize_client_ip` affects Stats:\n1. After AGH restart, new stats entries will contain modified client IP addresses.\n2. Existing entries are not affected.\n\n\n### API: Get querylog parameters\n\nRequest:\n\n\tGET /control/querylog_info\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\t\"enabled\": true | false\n\t\t\"interval\": 1 | 7 | 30 | 90\n\t\t\"anonymize_client_ip\": true | false\n\t}\n\n\n## Filtering\n\n![](doc/agh-filtering.png)\n\nThis is how DNS requests and responses are filtered by AGH:\n\n* 'dnsproxy' module receives DNS request from client and passes control to AGH\n* AGH applies filtering logic to the host name in DNS Question:\n\t* process Rewrite rules.\n\t\tCan set CNAME and a list of IP addresses.\n\t* process /etc/hosts entries.\n\t\tCan set a list of IP addresses or a hostname (for PTR requests).\n\t* match host name against filtering lists\n\t* match host name against blocked services rules\n\t* process SafeSearch rules\n\t* request SafeBrowsing & ParentalControl services and process their response\n* If the handlers above create a successful result that can be immediately sent to a client, it's passed back to 'dnsproxy' module\n* Otherwise, AGH passes the DNS request to an upstream server via 'dnsproxy' module\n* After 'dnsproxy' module has received a response from an upstream server, it passes control back to AGH\n* If the filtering logic for DNS request returned a 'whitelist' flag, AGH passes the response to a client\n* Otherwise, AGH applies filtering logic to each DNS record in response:\n\t* For CNAME records, the target name is matched against filtering lists (ignoring 'whitelist' rules)\n\t* For A and AAAA records, the IP address is matched against filtering lists (ignoring 'whitelist' rules)\n\n\n### Filters update mechanism\n\nFilters can be updated either manually by request from UI or automatically.\nAuto-update interval can be configured in UI.  If it is 0, auto-update is disabled.\nWhen the last modification date of filter files is older than auto-update interval, auto-update procedure is started.\nIf an enabled filter file doesn't exist, it's downloaded on application startup.  This includes the case when installation wizard is completed and there are no filter files yet.\nWhen auto-update time comes, server starts the update procedure by downloading filter files.  After new filter files are in place, it restarts DNS filtering module with new rules.\nOnly filters that are enabled by configuration can be updated.\nAs a result of the update procedure, all enabled filter files are written to disk, refreshed (their last modification date is equal to the current time) and loaded.\n\n\n### API: Get filtering parameters\n\nRequest:\n\n\tGET /control/filtering/status\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\t\"enabled\": true | false\n\t\t\"interval\": 0 | 1 | 12 | 1*24 || 3*24 || 7*24\n\t\t\"filters\":[\n\t\t\t{\n\t\t\t\"id\":1\n\t\t\t\"enabled\":true,\n\t\t\t\"url\":\"https://...\",\n\t\t\t\"name\":\"...\",\n\t\t\t\"rules_count\":1234,\n\t\t\t\"last_updated\":\"2019-09-04T18:29:30+00:00\",\n\t\t\t}\n\t\t\t...\n\t\t],\n\t\t\"whitelist_filters\":[\n\t\t\t{\n\t\t\t\"id\":1\n\t\t\t\"enabled\":true,\n\t\t\t\"url\":\"https://...\",\n\t\t\t\"name\":\"...\",\n\t\t\t\"rules_count\":1234,\n\t\t\t\"last_updated\":\"2019-09-04T18:29:30+00:00\",\n\t\t\t}\n\t\t\t...\n\t\t],\n\t\t\"user_rules\":[\"...\", ...]\n\t}\n\nFor both arrays `filters` and `whitelist_filters` there are unique values: id, url.\nID for each filter is assigned by Server - it's used for file names.\n\n\n### API: Set filtering parameters\n\nRequest:\n\n\tPOST /control/filtering/config\n\n\t{\n\t\t\"enabled\": true | false\n\t\t\"interval\": 0 | 1 | 12 | 1*24 || 3*24 || 7*24\n\t}\n\nResponse:\n\n\t200 OK\n\n\n### API: Refresh filters\n\nRequest:\n\n\tPOST /control/filtering/refresh\n\n\t{\n\t\t\"whitelist\": true\n\t}\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\t\"updated\": 123 // number of filters updated\n\t}\n\n\n### API: Add Filter\n\nRequest:\n\n\tPOST /control/filtering/add_url\n\n\t{\n\t\t\"name\": \"...\"\n\t\t\"url\": \"...\" // URL or an absolute file path\n\t\t\"whitelist\": true\n\t}\n\nResponse:\n\n\t200 OK\n\n\n### API: Set URL parameters\n\nRequest:\n\n\tPOST /control/filtering/set_url\n\n\t{\n\t\"url\": \"...\"\n\t\"whitelist\": true\n\t\"data\": {\n\t\t\"name\": \"...\"\n\t\t\"url\": \"...\"\n\t\t\"enabled\": true | false\n\t}\n\t}\n\nResponse:\n\n\t200 OK\n\n\n### API: Delete URL\n\nRequest:\n\n\tPOST /control/filtering/remove_url\n\n\t{\n\t\"url\": \"...\"\n\t\"whitelist\": true\n\t}\n\nResponse:\n\n\t200 OK\n\n\n### API: Domain Check\n\nCheck if host name is filtered.\n\nRequest:\n\n\tGET /control/filtering/check_host?name=hostname\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\t\"reason\":\"FilteredBlackList\",\n\t\t\"rules\":{\n\t\t\t\"filter_list_id\":42,\n\t\t\t\"text\":\"||doubleclick.net^\",\n\t\t},\n\t\t// If we have \"reason\":\"FilteredBlockedService\".\n\t\t\"service_name\": \"...\",\n\t\t// If we have \"reason\":\"Rewrite\".\n\t\t\"cname\": \"...\",\n\t\t\"ip_addrs\": [\"1.2.3.4\", ...]\n\t}\n\nThere are also deprecated properties `filter_id` and `rule` on the top level of\nthe response object.  Their usage should be replaced with\n`rules[*].filter_list_id` and `rules[*].text` correspondingly.  See the\n_OpenAPI_ documentation and the `./openapi/CHANGELOG.md` file.\n\n## Log-in page\n\nAfter user completes the steps of installation wizard, he must log in into dashboard using his name and password.  After user successfully logs in, he gets the Cookie which allows the server to authenticate him next time without password.  After the Cookie is expired, user needs to perform log-in operation again.\n\nRequests to / or /index.html without a proper Cookie get redirected to Log-In page with prompt for name and password.  The server responds with 403 to all other requests (including all API methods) without a proper Cookie.\n\nYAML configuration:\n\n\tusers:\n\t- name: \"...\"\n\t  password: \"...\" // bcrypt hash\n\t...\n\n\nSession DB file:\n\n\tsession=\"...\" user=name expire=123456\n\t...\n\nSession data is SHA(random()+name+password).\nExpiration time is UNIX time when cookie gets expired.\n\nAny request to server must come with Cookie header:\n\n\tGET /...\n\tCookie: session=...\n\nIf not authenticated, server sends a redirect response:\n\n\t302 Found\n\tLocation: /login.html\n\n\n### Reset password\n\nThere is no mechanism to reset the password.  Instead, the administrator must use `htpasswd` utility to generate a new hash:\n\n\thtpasswd -B -n -b username password\n\nIt will print `username:<HASH>` to the terminal.  `<HASH>` value may be used in AGH YAML configuration file as a value to `password` setting:\n\n\tusers:\n\t- name: \"...\"\n\t  password: <HASH>\n\n\n\n### API: Log in\n\nPerform a log-in operation for administrator.  Server generates a session for this name+password pair, stores it in file.  UI needs to perform all requests with this value inside Cookie HTTP header.\n\nRequest:\n\n\tPOST /control/login\n\n\t{\n\t\tname: \"...\"\n\t\tpassword: \"...\"\n\t}\n\nResponse:\n\n\t200 OK\n\tSet-Cookie: session=...; Expires=Wed, 09 Jun 2021 10:18:14 GMT; Path=/; HttpOnly\n\n\n### API: Log out\n\nPerform a log-out operation for administrator.  Server removes the session from its DB and sets an expired cookie value.\n\nRequest:\n\n\tGET /control/logout\n\nResponse:\n\n\t302 Found\n\tLocation: /login.html\n\tSet-Cookie: session=...; Expires=Thu, 01 Jan 1970 00:00:00 GMT\n\n\n### API: Get current user info\n\nRequest:\n\n\tGET /control/profile\n\nResponse:\n\n\t200 OK\n\n\t{\n\t\"name\":\"...\"\n\t}\n\nIf no client is configured then authentication is disabled and server sends an empty response.\n\n\n### Safe services\n\nCheck if host name is blocked by SB/PC service:\n\n* For each host name component, search for the result in cache by the first 2 bytes of SHA-256 hashes of host name components (max. is 4, i.e. sub2.sub1.host.com), excluding TLD:\n\n\t\thashes[] = cache_search(sha256(host.com)[0..1])\n\t\t...\n\n\tIf hash prefix is found, search for a full hash sum in the cached data.\n\tIf found, the host is blocked.\n\tIf not found, the host is not blocked - don't request data for this prefix from the Family server again.\n\tIf hash prefix is not found, request data for this prefix from the Family server.\n\n* Prepare query string which is generated from the first 2 bytes (converted to a 4-character string) of SHA-256 hashes of host name components (max. is 4, i.e. sub2.sub1.host.com), excluding TLD:\n\n\t\tqs = ... + string(sha256(sub.host.com)[0..1]) + \".\" + string(sha256(host.com)[0..1]) + \".sb.dns.adguard.com.\"\n\n\tFor PC `.pc.dns.adguard.com` suffix is used.\n\n* Send TXT query to Family server, receive response which contains the array of complete hash sums of the blocked hosts\n\n* Check if one of received hash sums (`hashes[]`) matches hash sums for our host name\n\n\t\thashes[0] <> sha256(host.com)\n\t\thashes[0] <> sha256(sub.host.com)\n\t\thashes[1] <> sha256(host.com)\n\t\thashes[1] <> sha256(sub.host.com)\n\t\t...\n\n* Store all received hash sums in cache:\n\n\t\tsha256(host.com)[0..1] -> hashes[0],hashes[1],...\n\t\tsha256(sub.host.com)[0..1] -> hashes[2],...\n\t\t...\n\n## API: Get DNS over HTTPS .mobileconfig\n\nRequest:\n\n\tGET /apple/doh.mobileconfig\n\nResponse:\n\n\t200 OK\n\n    DOH plist file\n\n## API: Get DNS over TLS .mobileconfig\n\nRequest:\n\n\tGET /apple/dot.mobileconfig\n\nResponse:\n\n\t200 OK\n\n    DOT plist file\n\n## ipset\n\nAGH can add IP addresses of the specified in configuration domain names to an ipset list.\n\nPrepare: user creates an ipset list and configures AGH for using it.\n\n\t1. User --( ipset create my_ipset hash:ip ) -> OS\n\t2. User --( ipset: host.com,host2.com/my_ipset )-> AGH\n\n\t\tSyntax:\n\n\t\t\tipset: \"DOMAIN[,DOMAIN].../IPSET1_NAME[,IPSET2_NAME]...\"\n\n\t\tIPv4 addresses are added to an ipset list with `ipv4` family, IPv6 addresses - to `ipv6` ipset list.\n\nRun-time: AGH adds IP addresses of a domain name to a corresponding ipset list.\n\n\t1. AGH --( resolve host.com )-> upstream\n\t2. AGH <-( host.com:[1.1.1.1,2.2.2.2] )-- upstream\n\t3. AGH --( ipset.add(my_ipset, [1.1.1.1,2.2.2.2] ))-> OS\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 120.31,
          "content": "# AdGuard Home Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [*Keep a Changelog*](https://keepachangelog.com/en/1.0.0/), and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n<!--\n## [v0.108.0] – TBA\n\n## [v0.107.56] - 2025-01-10 (APPROX.)\n\nSee also the [v0.107.56 GitHub milestone][ms-v0.107.56].\n\n[ms-v0.107.56]: https://github.com/AdguardTeam/AdGuardHome/milestone/91?closed=1\n\nNOTE: Add new changes BELOW THIS COMMENT.\n-->\n\n### Added\n\n- The new HTTP API `POST /clients/search` that finds clients by their IP addresses, CIDRs, MAC addresses, or ClientIDs.  See `openapi/openapi.yaml` for the full description.\n\n### Deprecated\n\n- The `GET /clients/find` HTTP API is deprecated.  Use the new `POST /clients/search` API.\n\n### Fixed\n\n- Request count link in the clients table ([#7513]).\n\n- The formatting of large numbers on the dashboard ([#7329]).\n\n[#7513]: https://github.com/AdguardTeam/AdGuardHome/issues/7513\n[#7329]: https://github.com/AdguardTeam/AdGuardHome/issues/7329\n\n<!--\nNOTE: Add new changes ABOVE THIS COMMENT.\n-->\n\n## [v0.107.55] - 2024-12-11\n\nSee also the [v0.107.55 GitHub milestone][ms-v0.107.55].\n\n### Security\n\n- The permission check and migration on Windows has been fixed to use the Windows security model more accurately ([#7400]).\n\n- Go version has been updated to prevent the possibility of exploiting the Go vulnerabilities fixed in [1.23.4][go-1.23.4].\n\n- The Windows executables are now signed.\n\n### Added\n\n- The `--no-permcheck` command-line option to disable checking and migration of permissions for the security-sensitive files and directories, which caused issues on Windows ([#7400]).\n\n### Fixed\n\n- Setup guide styles in Firefox.\n\n- Goroutine leak during the upstream DNS server test ([#7357]).\n\n- Goroutine leak during configuration update resulting in increased response time ([#6818]).\n\n[#7357]: https://github.com/AdguardTeam/AdGuardHome/issues/7357\n[#7400]: https://github.com/AdguardTeam/AdGuardHome/issues/7400\n\n[go-1.23.4]: https://groups.google.com/g/golang-announce/c/3DyiMkYx4Fo\n[ms-v0.107.55]: https://github.com/AdguardTeam/AdGuardHome/milestone/90?closed=1\n\n## [v0.107.54] - 2024-11-06\n\nSee also the [v0.107.54 GitHub milestone][ms-v0.107.54].\n\n### Security\n\n- Incorrect handling of sensitive files permissions on Windows ([#7314]).\n\n### Changed\n\n- Improved filtering performance ([#6818]).\n\n### Fixed\n\n- Repetitive statistics log messages ([#7338]).\n\n- Custom client cache ([#7250]).\n\n- Missing runtime clients with information from the system hosts file on first AdGuard Home start ([#7315]).\n\n[#6818]: https://github.com/AdguardTeam/AdGuardHome/issues/6818\n[#7250]: https://github.com/AdguardTeam/AdGuardHome/issues/7250\n[#7314]: https://github.com/AdguardTeam/AdGuardHome/issues/7314\n[#7315]: https://github.com/AdguardTeam/AdGuardHome/issues/7315\n[#7338]: https://github.com/AdguardTeam/AdGuardHome/issues/7338\n\n[ms-v0.107.54]: https://github.com/AdguardTeam/AdGuardHome/milestone/89?closed=1\n\n## [v0.107.53] - 2024-10-03\n\nSee also the [v0.107.53 GitHub milestone][ms-v0.107.53].\n\n### Security\n\n- Previous versions of AdGuard Home allowed users to add any system file it had access to as filters, exposing them to be world-readable.  To prevent this, AdGuard Home now allows adding filtering-rule list files only from files matching the patterns enumerated in the `filtering.safe_fs_patterns` property in the configuration file.\n\n    We thank @itz-d0dgy for reporting this vulnerability, designated CVE-2024-36814, to us.\n\n- Additionally, AdGuard Home will now try to change the permissions of its files and directories to more restrictive ones to prevent similar vulnerabilities as well as limit the access to the configuration.\n\n    We thank @go-compile for reporting this vulnerability, designated CVE-2024-36586, to us.\n\n- Go version has been updated to prevent the possibility of exploiting the Go vulnerabilities fixed in [1.23.2][go-1.23.2].\n\n### Added\n\n- Support for 64-bit RISC-V architecture ([#5704]).\n\n- Ecosia search engine is now supported in safe search ([#5009]).\n\n### Changed\n\n- Upstream server URL domain names requirements has been relaxed and now follow the same rules as their domain specifications.\n\n#### Configuration changes\n\nIn this release, the schema version has changed from 28 to 29.\n\n- The new array `filtering.safe_fs_patterns` contains glob patterns for paths of files that can be added as local filtering-rule lists.  The migration should add list files that have already been added, as well as the default value, `$DATA_DIR/userfilters/*`.\n\n### Fixed\n\n- Property `clients.runtime_sources.dhcp` in the configuration file not taking effect.\n\n- Stale Google safe search domains list ([#7155]).\n\n- Bing safe search from Edge sidebar ([#7154]).\n\n- Text overflow on the query log page ([#7119]).\n\n### Known issues\n\n- Due to the complexity of the Windows permissions architecture and poor support from the standard Go library, we have to postpone the proper automated Windows fix until the next release.\n\n    **Temporary workaround:**  Set the permissions of the `AdGuardHome` directory to more restrictive ones manually.  To do that:\n\n    1. Locate the `AdGuardHome` directory.\n\n    2. Right-click on it and navigate to *Properties → Security → Advanced.*\n\n    3. (You might need to disable permission inheritance to make them more restricted.)\n\n    4. Adjust to give the `Full control` access to only the user which runs AdGuard Home.  Typically, `Administrator`.\n\n[#5009]: https://github.com/AdguardTeam/AdGuardHome/issues/5009\n[#5704]: https://github.com/AdguardTeam/AdGuardHome/issues/5704\n[#7119]: https://github.com/AdguardTeam/AdGuardHome/issues/7119\n[#7154]: https://github.com/AdguardTeam/AdGuardHome/pull/7154\n[#7155]: https://github.com/AdguardTeam/AdGuardHome/pull/7155\n\n[go-1.23.2]:    https://groups.google.com/g/golang-announce/c/NKEc8VT7Fz0\n[ms-v0.107.53]: https://github.com/AdguardTeam/AdGuardHome/milestone/88?closed=1\n\n## [v0.107.52] - 2024-07-04\n\nSee also the [v0.107.52 GitHub milestone][ms-v0.107.52].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the Go vulnerabilities fixed in [Go 1.22.5][go-1.22.5].\n\n### Added\n\n- The ability to disable logging using the new `log.enabled` configuration property ([#7079]).\n\n### Changed\n\n- Frontend rewritten in TypeScript.\n\n- The `systemd`-based service now uses `journal` for logging by default.  It also doesn’t create the `/var/log/` directory anymore ([#7053]).\n\n    **NOTE:** With an installed service for changes to take effect, you need to reinstall the service using `-r` flag of the [install script][install-script] or via the CLI (with root privileges):\n\n    ```sh\n    ./AdGuardHome -s uninstall\n    ./AdGuardHome -s install\n    ```\n\n    Don’t forget to backup your configuration file and other important data before reinstalling the service.\n\n### Deprecated\n\n- Node 18 support, Node 20 will be required in future releases.\n\n### Fixed\n\n- Panic caused by missing user-specific blocked services object in configuration file ([#7069]).\n\n- Tracking `/etc/hosts` file changes causing panics within particular filesystems on start ([#7076]).\n\n[#7053]: https://github.com/AdguardTeam/AdGuardHome/issues/7053\n[#7069]: https://github.com/AdguardTeam/AdGuardHome/issues/7069\n[#7076]: https://github.com/AdguardTeam/AdGuardHome/issues/7076\n[#7079]: https://github.com/AdguardTeam/AdGuardHome/issues/7079\n\n[go-1.22.5]:      https://groups.google.com/g/golang-announce/c/gyb7aM1C9H4\n[install-script]: https://github.com/AdguardTeam/AdGuardHome/?tab=readme-ov-file#automated-install-linux-and-mac\n\n[ms-v0.107.52]: https://github.com/AdguardTeam/AdGuardHome/milestone/87?closed=1\n\n## [v0.107.51] - 2024-06-06\n\nSee also the [v0.107.51 GitHub milestone][ms-v0.107.51].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the Go vulnerabilities fixed in [Go 1.22.4][go-1.22.4].\n\n### Changed\n\n- The HTTP server’s write timeout has been increased from 1 minute to 5 minutes to match the one used by AdGuard Home’s HTTP client to fetch filtering-list data ([#7041]).\n\n[#7041]: https://github.com/AdguardTeam/AdGuardHome/issues/7041\n\n[go-1.22.4]:    https://groups.google.com/g/golang-announce/c/XbxouI9gY7k/\n[ms-v0.107.51]: https://github.com/AdguardTeam/AdGuardHome/milestone/86?closed=1\n\n## [v0.107.50] - 2024-05-23\n\nSee also the [v0.107.50 GitHub milestone][ms-v0.107.50].\n\n### Fixed\n\n- Broken private reverse DNS upstream servers validation causing update failures ([#7013]).\n\n[#7013]: https://github.com/AdguardTeam/AdGuardHome/issues/7013\n\n[ms-v0.107.50]: https://github.com/AdguardTeam/AdGuardHome/milestone/85?closed=1\n\n## [v0.107.49] - 2024-05-21\n\nSee also the [v0.107.49 GitHub milestone][ms-v0.107.49].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the Go vulnerabilities fixed in [Go 1.22.3][go-1.22.3].\n\n### Added\n\n- Support for comments in the ipset file ([#5345]).\n\n### Changed\n\n- Private rDNS resolution now also affects `SOA` and `NS` requests ([#6882]).\n\n- Rewrite rules mechanics were changed due to improved resolving in safe search.\n\n### Deprecated\n\n- Currently, AdGuard Home skips persistent clients that have duplicate fields when reading them from the configuration file.  This behaviour is deprecated and will cause errors on startup in a future release.\n\n### Fixed\n\n- Acceptance of duplicate UIDs for persistent clients at startup.  See also the section on client settings on the [Wiki page][wiki-config].\n\n- Domain specifications for top-level domains not considered for requests to unqualified domains ([#6744]).\n\n- Support for link-local subnets, i.e. `fe80::/16`, as client identifiers ([#6312]).\n\n- Issues with QUIC and HTTP/3 upstreams on older Linux kernel versions ([#6422]).\n\n- YouTube restricted mode is not enforced by HTTPS queries on Firefox.\n\n- Support for link-local subnets, i.e. `fe80::/16`, in the access settings ([#6192]).\n\n- The ability to apply an invalid configuration for private rDNS, which led to server not starting.\n\n- Ignoring query log for clients with ClientID set ([#5812]).\n\n- Subdomains of `in-addr.arpa` and `ip6.arpa` containing zero-length prefix incorrectly considered invalid when specified for private rDNS upstream servers ([#6854]).\n\n- Unspecified IP addresses aren’t checked when using \"Fastest IP address\" mode ([#6875]).\n\n[#5345]: https://github.com/AdguardTeam/AdGuardHome/issues/5345\n[#5812]: https://github.com/AdguardTeam/AdGuardHome/issues/5812\n[#6192]: https://github.com/AdguardTeam/AdGuardHome/issues/6192\n[#6312]: https://github.com/AdguardTeam/AdGuardHome/issues/6312\n[#6422]: https://github.com/AdguardTeam/AdGuardHome/issues/6422\n[#6744]: https://github.com/AdguardTeam/AdGuardHome/issues/6744\n[#6854]: https://github.com/AdguardTeam/AdGuardHome/issues/6854\n[#6875]: https://github.com/AdguardTeam/AdGuardHome/issues/6875\n[#6882]: https://github.com/AdguardTeam/AdGuardHome/issues/6882\n\n[go-1.22.3]:    https://groups.google.com/g/golang-announce/c/wkkO4P9stm0\n[ms-v0.107.49]: https://github.com/AdguardTeam/AdGuardHome/milestone/84?closed=1\n\n## [v0.107.48] - 2024-04-05\n\nSee also the [v0.107.48 GitHub milestone][ms-v0.107.48].\n\n### Fixed\n\n- Access settings not being applied to encrypted protocols ([#6890]).\n\n[#6890]: https://github.com/AdguardTeam/AdGuardHome/issues/6890\n\n[ms-v0.107.48]: https://github.com/AdguardTeam/AdGuardHome/milestone/83?closed=1\n\n## [v0.107.47] - 2024-04-04\n\nSee also the [v0.107.47 GitHub milestone][ms-v0.107.47].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the Go vulnerabilities fixed in [Go 1.22.2][go-1.22.2].\n\n### Changed\n\n- Time Zone Database is now embedded in the binary ([#6758]).\n\n- Failed authentication attempts show the originating IP address in the logs, if the request came from a trusted proxy ([#5829]).\n\n### Deprecated\n\n- Go 1.22 support.  Future versions will require at least Go 1.23 to build.\n\n- Currently, AdGuard Home uses a best-effort algorithm to fix invalid IDs of filtering-rule lists on startup.  This feature is deprecated, and invalid IDs will cause errors on startup in a future version.\n\n- Node.JS 16.  Future versions will require at least Node.JS 18 to build.\n\n### Fixed\n\n- Resetting DNS upstream mode when applying unrelated settings ([#6851]).\n\n- Symbolic links to the configuration file begin replaced by a copy of the real file upon startup on FreeBSD ([#6717]).\n\n### Removed\n\n- Go 1.21 support.\n\n[#5829]: https://github.com/AdguardTeam/AdGuardHome/issues/5829\n[#6717]: https://github.com/AdguardTeam/AdGuardHome/issues/6717\n[#6758]: https://github.com/AdguardTeam/AdGuardHome/issues/6758\n[#6851]: https://github.com/AdguardTeam/AdGuardHome/issues/6851\n\n[go-1.22.2]:    https://groups.google.com/g/golang-announce/c/YgW0sx8mN3M/\n[ms-v0.107.47]: https://github.com/AdguardTeam/AdGuardHome/milestone/82?closed=1\n\n## [v0.107.46] - 2024-03-20\n\nSee also the [v0.107.46 GitHub milestone][ms-v0.107.46].\n\n### Added\n\n- Ability to disable the use of system hosts file information for query resolution ([#6610]).\n\n- Ability to define custom directories for storage of query log files and statistics ([#5992]).\n\n### Changed\n\n- Private rDNS resolution (`dns.use_private_ptr_resolvers` in YAML configuration) now requires a valid \"Private reverse DNS servers\", when enabled ([#6820]).\n\n    **NOTE:** Disabling private rDNS resolution behaves effectively the same as if no private reverse DNS servers provided by user and by the OS.\n\n### Fixed\n\n- Statistics for 7 days displayed by day on the dashboard graph ([#6712]).\n\n- Missing \"served from cache\" label on long DNS server strings ([#6740]).\n\n- Incorrect tracking of the system hosts file’s changes ([#6711]).\n\n[#5992]: https://github.com/AdguardTeam/AdGuardHome/issues/5992\n[#6610]: https://github.com/AdguardTeam/AdGuardHome/issues/6610\n[#6711]: https://github.com/AdguardTeam/AdGuardHome/issues/6711\n[#6712]: https://github.com/AdguardTeam/AdGuardHome/issues/6712\n[#6740]: https://github.com/AdguardTeam/AdGuardHome/issues/6740\n[#6820]: https://github.com/AdguardTeam/AdGuardHome/issues/6820\n\n[ms-v0.107.46]: https://github.com/AdguardTeam/AdGuardHome/milestone/81?closed=1\n\n## [v0.107.45] - 2024-03-06\n\nSee also the [v0.107.45 GitHub milestone][ms-v0.107.45].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the Go vulnerabilities fixed in [Go 1.21.8][go-1.21.8].\n\n### Added\n\n- Context menu item in the Query Log to add a Client to the Persistent client list ([#6679]).\n\n### Changed\n\n- Starting with this release our scripts are using Go’s [forward compatibility mechanism][go-toolchain] for updating the Go version.\n\n    **Important note for porters:**  This change means that if your `go` version is 1.21+ but is different from the one required by AdGuard Home, the `go` tool will automatically download the required version.\n\n    If you want to use the version installed on your builder, run:\n\n    ```sh\n    go get go@$YOUR_VERSION\n    go mod tidy\n    ```\n\n    and call `make` with `GOTOOLCHAIN=local`.\n\n### Deprecated\n\n- Go 1.21 support.  Future versions will require at least Go 1.22 to build.\n\n### Fixed\n\n- Missing IP addresses in logs when querying for domain names from the ignore lists.\n\n- Blank page after resetting access clients ([#6634]).\n\n- Wrong algorithm for caching bootstrapped upstream addresses ([#6723]).\n\n### Removed\n\n- Go 1.20 support, as it has reached end of life.\n\n[#6634]: https://github.com/AdguardTeam/AdGuardHome/issues/6634\n[#6679]: https://github.com/AdguardTeam/AdGuardHome/issues/6679\n[#6723]: https://github.com/AdguardTeam/AdGuardHome/issues/6723\n\n[go-1.21.8]:    https://groups.google.com/g/golang-announce/c/5pwGVUPoMbg\n[go-toolchain]: https://go.dev/blog/toolchain\n[ms-v0.107.45]: https://github.com/AdguardTeam/AdGuardHome/milestone/80?closed=1\n\n## [v0.107.44] - 2024-02-06\n\nSee also the [v0.107.44 GitHub milestone][ms-v0.107.44].\n\n### Added\n\n- Timezones in the Etc/ area to the timezone list ([#6568]).\n\n- The schema version of the configuration file to the output of running `AdGuardHome` (or `AdGuardHome.exe`) with `-v --version` command-line options ([#6545]).\n\n- Ability to disable plain-DNS serving via UI if an encrypted protocol is already used ([#1660]).\n\n### Changed\n\n- The bootstrapped upstream addresses are now updated according to the TTL of the bootstrap DNS response ([#6321]).\n\n- Logging level of timeout errors is now `error` instead of `debug` ([#6574]).\n\n- The field `\"upstream_mode\"` in `POST /control/dns_config` and `GET /control/dns_info` HTTP APIs now accepts `load_balance` value.  Check `openapi/CHANGELOG.md` for more details.\n\n#### Configuration changes\n\nIn this release, the schema version has changed from 27 to 28.\n\n- The new property `clients.persistent.*.uid`, which is a unique identifier of the persistent client.\n\n- The properties `dns.all_servers` and `dns.fastest_addr` were removed, their values migrated to newly added field `dns.upstream_mode` that describes the logic through which upstreams will be used.  See also a [Wiki page][wiki-config].\n\n    ```yaml\n    # BEFORE:\n    'dns':\n        # …\n        'all_servers': true\n        'fastest_addr': true\n\n    # AFTER:\n    'dns':\n        # …\n        'upstream_mode': 'parallel'\n    ```\n\n    To rollback this change, remove the new field `upstream_mode`, set back `dns.all_servers` and `dns.fastest_addr` properties in `dns` section, and change the `schema_version` back to `27`.\n\n### Fixed\n\n- “Invalid AddrPort” in the *Private reverse DNS servers* section on the *Settings → DNS settings* page.\n\n- Panic on using `--no-etc-hosts` flag ([#6644]).\n\n- Schedule display in the client settings after creating or updating.\n\n- Zero value in `querylog.size_memory` disables logging ([#6570]).\n\n- Non-anonymized IP addresses on the dashboard ([#6584]).\n\n- Maximum cache TTL requirement when editing minimum cache TTL in the Web UI ([#6409]).\n\n- Load balancing algorithm stuck on a single server ([#6480]).\n\n- Statistics for 7 days displayed as 168 hours on the dashboard.\n\n- Pre-filling the Edit static lease window with data ([#6534]).\n\n- Names defined in the `/etc/hosts` for a single address family wrongly considered undefined for another family ([#6541]).\n\n- Omitted CNAME records in safe search results, which can cause YouTube to not work on iOS ([#6352]).\n\n[#6321]: https://github.com/AdguardTeam/AdGuardHome/issues/6321\n[#6352]: https://github.com/AdguardTeam/AdGuardHome/issues/6352\n[#6409]: https://github.com/AdguardTeam/AdGuardHome/issues/6409\n[#6480]: https://github.com/AdguardTeam/AdGuardHome/issues/6480\n[#6534]: https://github.com/AdguardTeam/AdGuardHome/issues/6534\n[#6541]: https://github.com/AdguardTeam/AdGuardHome/issues/6541\n[#6545]: https://github.com/AdguardTeam/AdGuardHome/issues/6545\n[#6568]: https://github.com/AdguardTeam/AdGuardHome/issues/6568\n[#6570]: https://github.com/AdguardTeam/AdGuardHome/issues/6570\n[#6574]: https://github.com/AdguardTeam/AdGuardHome/issues/6574\n[#6584]: https://github.com/AdguardTeam/AdGuardHome/issues/6584\n[#6644]: https://github.com/AdguardTeam/AdGuardHome/issues/6644\n\n[ms-v0.107.44]: https://github.com/AdguardTeam/AdGuardHome/milestone/79?closed=1\n[wiki-config]:  https://github.com/AdguardTeam/AdGuardHome/wiki/Configuration\n\n## [v0.107.43] - 2023-12-11\n\nSee also the [v0.107.43 GitHub milestone][ms-v0.107.43].\n\n### Fixed\n\n- Incorrect handling of IPv4-in-IPv6 addresses when binding to an unspecified address on some machines ([#6510]).\n\n[#6510]: https://github.com/AdguardTeam/AdGuardHome/issues/6510\n\n[ms-v0.107.43]: https://github.com/AdguardTeam/AdGuardHome/milestone/78?closed=1\n\n## [v0.107.42] - 2023-12-07\n\nSee also the [v0.107.42 GitHub milestone][ms-v0.107.42].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2023-39326, CVE-2023-45283, and CVE-2023-45285 Go vulnerabilities fixed in [Go 1.20.12][go-1.20.12].\n\n### Added\n\n- Ability to set client’s custom DNS cache ([#6263]).\n\n- Ability to disable plain-DNS serving through configuration file if an encrypted protocol is already enabled ([#1660]).\n\n- Ability to specify rate limiting settings in the Web UI ([#6369]).\n\n### Changed\n\n#### Configuration changes\n\n- The new property `dns.serve_plain_dns` has been added to the configuration file ([#1660]).\n\n- The property `dns.bogus_nxdomain` is now validated more strictly.\n\n- Added new properties `clients.persistent.*.upstreams_cache_enabled` and `clients.persistent.*.upstreams_cache_size` that describe cache configuration for each client’s custom upstream configuration.\n\n### Fixed\n\n- `ipset` entries family validation ([#6420]).\n\n- Pre-filling the *New static lease* window with data ([#6402]).\n\n- Protection pause timer synchronization ([#5759]).\n\n[#1660]: https://github.com/AdguardTeam/AdGuardHome/issues/1660\n[#5759]: https://github.com/AdguardTeam/AdGuardHome/issues/5759\n[#6263]: https://github.com/AdguardTeam/AdGuardHome/issues/6263\n[#6369]: https://github.com/AdguardTeam/AdGuardHome/issues/6369\n[#6402]: https://github.com/AdguardTeam/AdGuardHome/issues/6402\n[#6420]: https://github.com/AdguardTeam/AdGuardHome/issues/6420\n\n[go-1.20.12]:   https://groups.google.com/g/golang-announce/c/iLGK3x6yuNo/m/z6MJ-eB0AQAJ\n[ms-v0.107.42]: https://github.com/AdguardTeam/AdGuardHome/milestone/77?closed=1\n\n## [v0.107.41] - 2023-11-13\n\nSee also the [v0.107.41 GitHub milestone][ms-v0.107.41].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2023-45283 and CVE-2023-45284 Go vulnerabilities fixed in [Go 1.20.11][go-1.20.11].\n\n### Added\n\n- Ability to specify subnet lengths for IPv4 and IPv6 addresses, used for rate limiting requests, in the configuration file ([#6368]).\n\n- Ability to specify multiple domain specific upstreams per line, e.g.  `[/domain1/../domain2/]upstream1 upstream2 .. upstreamN` ([#4977]).\n\n### Changed\n\n- Increased the height of the ready-to-use filter lists dialog ([#6358]).\n\n- Improved logging of authentication failures ([#6357]).\n\n#### Configuration changes\n\n- New properties `dns.ratelimit_subnet_len_ipv4` and `dns.ratelimit_subnet_len_ipv6` have been added to the configuration file ([#6368]).\n\n### Fixed\n\n- Schedule timezone not being sent ([#6401]).\n\n- Average request processing time calculation ([#6220]).\n\n- Redundant truncation of long client names in the Top Clients table ([#6338]).\n\n- Scrolling column headers in the tables ([#6337]).\n\n- `$important,dnsrewrite` rules not overriding allowlist rules ([#6204]).\n\n- Dark mode DNS rewrite background ([#6329]).\n\n- Issues with QUIC and HTTP/3 upstreams on Linux ([#6335]).\n\n[#4977]: https://github.com/AdguardTeam/AdGuardHome/issues/4977\n[#6204]: https://github.com/AdguardTeam/AdGuardHome/issues/6204\n[#6220]: https://github.com/AdguardTeam/AdGuardHome/issues/6220\n[#6329]: https://github.com/AdguardTeam/AdGuardHome/issues/6329\n[#6335]: https://github.com/AdguardTeam/AdGuardHome/issues/6335\n[#6337]: https://github.com/AdguardTeam/AdGuardHome/issues/6337\n[#6338]: https://github.com/AdguardTeam/AdGuardHome/issues/6338\n[#6357]: https://github.com/AdguardTeam/AdGuardHome/issues/6357\n[#6358]: https://github.com/AdguardTeam/AdGuardHome/issues/6358\n[#6368]: https://github.com/AdguardTeam/AdGuardHome/issues/6368\n[#6401]: https://github.com/AdguardTeam/AdGuardHome/issues/6401\n\n[go-1.20.11]:   https://groups.google.com/g/golang-announce/c/4tU8LZfBFkY/m/d-jSKR_jBwAJ\n[ms-v0.107.41]: https://github.com/AdguardTeam/AdGuardHome/milestone/76?closed=1\n\n## [v0.107.40] - 2023-10-18\n\nSee also the [v0.107.40 GitHub milestone][ms-v0.107.40].\n\n### Changed\n\n- *Block* and *Unblock* buttons of the query log moved to the tooltip menu ([#684]).\n\n### Fixed\n\n- Dashboard tables scroll issue ([#6180]).\n\n- The time shown in the statistics is one hour less than the current time ([#6296]).\n\n- Issues with QUIC and HTTP/3 upstreams on FreeBSD ([#6301]).\n\n- Panic on clearing the query log ([#6304]).\n\n[#684]:  https://github.com/AdguardTeam/AdGuardHome/issues/684\n[#6180]: https://github.com/AdguardTeam/AdGuardHome/issues/6180\n[#6296]: https://github.com/AdguardTeam/AdGuardHome/issues/6296\n[#6301]: https://github.com/AdguardTeam/AdGuardHome/issues/6301\n[#6304]: https://github.com/AdguardTeam/AdGuardHome/issues/6304\n\n[ms-v0.107.40]: https://github.com/AdguardTeam/AdGuardHome/milestone/75?closed=1\n\n## [v0.107.39] - 2023-10-11\n\nSee also the [v0.107.39 GitHub milestone][ms-v0.107.39].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2023-39323 and CVE-2023-39325 Go vulnerabilities fixed in [Go 1.20.9][go-1.20.9] and [Go 1.20.10][go-1.20.10].\n\n### Added\n\n- Ability to edit static leases on *DHCP settings* page ([#1700]).\n\n- Ability to specify for how long clients should cache a filtered response, using the *Blocked response TTL* field on the *DNS settings* page ([#4569]).\n\n### Changed\n\n- `ipset` entries are updated more frequently ([#6233]).\n\n- Node.JS 16 is now required to build the frontend.\n\n### Fixed\n\n- Incorrect domain-specific upstream matching for `DS` queries ([#6156]).\n\n- Improper validation of password length ([#6280]).\n\n- Wrong algorithm for filtering self addresses from the list of private upstream DNS servers ([#6231]).\n\n- An accidental change in DNS rewrite priority ([#6226]).\n\n[#1700]: https://github.com/AdguardTeam/AdGuardHome/issues/1700\n[#4569]: https://github.com/AdguardTeam/AdGuardHome/issues/4569\n[#6156]: https://github.com/AdguardTeam/AdGuardHome/issues/6156\n[#6226]: https://github.com/AdguardTeam/AdGuardHome/issues/6226\n[#6231]: https://github.com/AdguardTeam/AdGuardHome/issues/6231\n[#6233]: https://github.com/AdguardTeam/AdGuardHome/issues/6233\n[#6280]: https://github.com/AdguardTeam/AdGuardHome/issues/6280\n\n[go-1.20.10]:   https://groups.google.com/g/golang-announce/c/iNNxDTCjZvo/m/UDd7VKQuAAAJ\n[go-1.20.9]:    https://groups.google.com/g/golang-announce/c/XBa1oHDevAo/m/desYyx3qAgAJ\n[ms-v0.107.39]: https://github.com/AdguardTeam/AdGuardHome/milestone/74?closed=1\n\n## [v0.107.38] - 2023-09-11\n\nSee also the [v0.107.38 GitHub milestone][ms-v0.107.38].\n\n### Fixed\n\n- Incorrect original answer when a response is filtered ([#6183]).\n\n- Comments in the *Fallback DNS servers* field in the UI ([#6182]).\n\n- Empty or default Safe Browsing and Parental Control settings ([#6181]).\n\n- Various UI issues.\n\n[#6181]: https://github.com/AdguardTeam/AdGuardHome/issues/6181\n[#6182]: https://github.com/AdguardTeam/AdGuardHome/issues/6182\n[#6183]: https://github.com/AdguardTeam/AdGuardHome/issues/6183\n\n[ms-v0.107.38]: https://github.com/AdguardTeam/AdGuardHome/milestone/73?closed=1\n\n## [v0.107.37] - 2023-09-07\n\nSee also the [v0.107.37 GitHub milestone][ms-v0.107.37].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2023-39318, CVE-2023-39319, and CVE-2023-39320 Go vulnerabilities fixed in [Go 1.20.8][go-1.20.8].\n\n### Added\n\n- AdBlock-style syntax support for ignored domains in logs and statistics ([#5720]).\n\n- [`Strict-Transport-Security`][hsts] header in the HTTP API and DNS-over-HTTPS responses when HTTPS is forced ([#2998]).  See [RFC 6797][rfc6797].\n\n- UI for the schedule of the service-blocking pause ([#951]).\n\n- IPv6 hints are now filtered in case IPv6 addresses resolving is disabled ([#6122]).\n\n- The ability to set fallback DNS servers in the configuration file and the UI ([#3701]).\n\n- While adding or updating blocklists, the title can now be parsed from `! Title:` definition of the blocklist’s source ([#6020]).\n\n- The ability to filter DNS HTTPS records including IPv4 and IPv6 hints ([#6053]).\n\n- Two new metrics showing total number of responses from each upstream DNS server and their average processing time in the Web UI ([#1453]).\n\n- The ability to set the port for the `pprof` debug API, see configuration changes below.\n\n### Changed\n\n- `$dnsrewrite` rules containing IPv4-mapped IPv6 addresses are now working consistently with legacy DNS rewrites and match the `AAAA` requests.\n\n- For non-A and non-AAAA requests, which has been filtered, the NODATA response is returned if the blocking mode isn’t set to `Null IP`.  In previous versions it returned NXDOMAIN response in such cases.\n\n#### Configuration changes\n\nIn this release, the schema version has changed from 24 to 27.\n\n- Ignore rules blocking `.` in `querylog.ignored` and `statistics.ignored` have been migrated to AdBlock syntax (`|.^`).  To rollback this change, restore the rules and change the `schema_version` back to `26`.\n\n- Filtering-related settings have been moved from `dns` section of the YAML configuration file to the new section `filtering`:\n\n    ```yaml\n    # BEFORE:\n    'dns':\n      'filtering_enabled': true\n      'filters_update_interval': 24\n      'parental_enabled': false\n      'safebrowsing_enabled': false\n      'safebrowsing_cache_size': 1048576\n      'safesearch_cache_size': 1048576\n      'parental_cache_size': 1048576\n      'safe_search':\n        'enabled': false\n        'bing': true\n        'duckduckgo': true\n        'google': true\n        'pixabay': true\n        'yandex': true\n        'youtube': true\n      'rewrites': []\n      'blocked_services':\n        'schedule':\n          'time_zone': 'Local'\n        'ids': []\n      'protection_enabled':        true,\n      'blocking_mode':             'custom_ip',\n      'blocking_ipv4':             '1.2.3.4',\n      'blocking_ipv6':             '1:2:3::4',\n      'blocked_response_ttl':      10,\n      'protection_disabled_until': 'null',\n      'parental_block_host':       'p.dns.adguard.com',\n      'safebrowsing_block_host':   's.dns.adguard.com'\n\n    # AFTER:\n    'filtering':\n      'filtering_enabled': true\n      'filters_update_interval': 24\n      'parental_enabled': false\n      'safebrowsing_enabled': false\n      'safebrowsing_cache_size': 1048576\n      'safesearch_cache_size': 1048576\n      'parental_cache_size': 1048576\n      'safe_search':\n        'enabled': false\n        'bing': true\n        'duckduckgo': true\n        'google': true\n        'pixabay': true\n        'yandex': true\n        'youtube': true\n      'rewrites': []\n      'blocked_services':\n        'schedule':\n          'time_zone': 'Local'\n        'ids': []\n      'protection_enabled':        true,\n      'blocking_mode':             'custom_ip',\n      'blocking_ipv4':             '1.2.3.4',\n      'blocking_ipv6':             '1:2:3::4',\n      'blocked_response_ttl':      10,\n      'protection_disabled_until': 'null',\n      'parental_block_host':       'p.dns.adguard.com',\n      'safebrowsing_block_host':   's.dns.adguard.com',\n    ```\n\n    To rollback this change, remove the new object `filtering`, set back filtering properties in `dns` section, and change the `schema_version` back to `25`.\n\n- Property `debug_pprof` which used to setup profiling HTTP handler, is now moved to the new `pprof` object under `http` section.  The new object contains properties `enabled` and `port`:\n\n    ```yaml\n    # BEFORE:\n    'debug_pprof': true\n\n    # AFTER:\n    'http':\n      'pprof':\n        'enabled': true\n        'port': 6060\n    ```\n\n    Note that the new default `6060` is used as default.  To rollback this change, remove the new object `pprof`, set back `debug_pprof`, and change the `schema_version` back to `24`.\n\n### Fixed\n\n- Incorrect display date on statistics graph ([#5793]).\n\n- Missing query log entries and statistics on service restart ([#6100]).\n\n- Occasional DNS-over-QUIC and DNS-over-HTTP/3 errors ([#6133]).\n\n- Legacy DNS rewrites containing IPv4-mapped IPv6 addresses are now matching the `AAAA` requests, not `A` ([#6050]).\n\n- File log configuration, such as `max_size`, being ignored ([#6093]).\n\n- Panic on using a single-slash filtering rule.\n\n- Panic on shutting down while DNS requests are in process of filtering ([#5948]).\n\n[#1453]: https://github.com/AdguardTeam/AdGuardHome/issues/1453\n[#2998]: https://github.com/AdguardTeam/AdGuardHome/issues/2998\n[#3701]: https://github.com/AdguardTeam/AdGuardHome/issues/3701\n[#5720]: https://github.com/AdguardTeam/AdGuardHome/issues/5720\n[#5793]: https://github.com/AdguardTeam/AdGuardHome/issues/5793\n[#5948]: https://github.com/AdguardTeam/AdGuardHome/issues/5948\n[#6020]: https://github.com/AdguardTeam/AdGuardHome/issues/6020\n[#6050]: https://github.com/AdguardTeam/AdGuardHome/issues/6050\n[#6053]: https://github.com/AdguardTeam/AdGuardHome/issues/6053\n[#6093]: https://github.com/AdguardTeam/AdGuardHome/issues/6093\n[#6100]: https://github.com/AdguardTeam/AdGuardHome/issues/6100\n[#6122]: https://github.com/AdguardTeam/AdGuardHome/issues/6122\n[#6133]: https://github.com/AdguardTeam/AdGuardHome/issues/6133\n\n[go-1.20.8]:    https://groups.google.com/g/golang-announce/c/Fm51GRLNRvM/m/F5bwBlXMAQAJ\n[hsts]:         https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security\n[ms-v0.107.37]: https://github.com/AdguardTeam/AdGuardHome/milestone/72?closed=1\n[rfc6797]:      https://datatracker.ietf.org/doc/html/rfc6797\n\n## [v0.107.36] - 2023-08-02\n\nSee also the [v0.107.36 GitHub milestone][ms-v0.107.36].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2023-29409 Go vulnerability fixed in [Go 1.20.7][go-1.20.7].\n\n### Deprecated\n\n- Go 1.20 support.  Future versions will require at least Go 1.21 to build.\n\n### Fixed\n\n- Inability to block queries for the root domain, such as `NS .` queries, using the *Disallowed domains* feature on the *DNS settings* page ([#6049]).  Users who want to block `.` queries should use the `|.^` AdBlock rule or a similar regular expression.\n\n- Client hostnames not resolving when upstream server responds with zero-TTL records ([#6046]).\n\n### Removed\n\n- Go 1.19 support, as it has reached end of life.\n\n[#6046]: https://github.com/AdguardTeam/AdGuardHome/issues/6046\n[#6049]: https://github.com/AdguardTeam/AdGuardHome/issues/6049\n\n[go-1.20.7]:    https://groups.google.com/g/golang-announce/c/X0b6CsSAaYI/m/Efv5DbZ9AwAJ\n[ms-v0.107.36]: https://github.com/AdguardTeam/AdGuardHome/milestone/71?closed=1\n\n## [v0.107.35] - 2023-07-26\n\nSee also the [v0.107.35 GitHub milestone][ms-v0.107.35].\n\n### Changed\n\n- Improved reliability filtering-rule list updates on Unix systems.\n\n### Fixed\n\n- Occasional client information lookup failures that could lead to the DNS server getting stuck ([#6006]).\n\n- `bufio.Scanner: token too long` and other errors when trying to add filtering-rule lists with lines over 1024 bytes long or containing cosmetic rules ([#6003]).\n\n### Removed\n\n- Default exposure of the non-standard ports 784 and 8853 for DNS-over-QUIC in the `Dockerfile`.\n\n[#6003]: https://github.com/AdguardTeam/AdGuardHome/issues/6003\n[#6006]: https://github.com/AdguardTeam/AdGuardHome/issues/6006\n\n[ms-v0.107.35]: https://github.com/AdguardTeam/AdGuardHome/milestone/70?closed=1\n\n## [v0.107.34] - 2023-07-12\n\nSee also the [v0.107.34 GitHub milestone][ms-v0.107.34].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2023-29406 Go vulnerability fixed in [Go 1.19.11][go-1.19.11].\n\n### Added\n\n- Ability to ignore queries for the root domain, such as `NS .` queries ([#5990]).\n\n### Changed\n\n- Improved CPU and RAM consumption during updates of filtering-rule lists.\n\n#### Configuration changes\n\nIn this release, the schema version has changed from 23 to 24.\n\n- Properties starting with `log_`, and `verbose` property, which used to set up logging are now moved to the new object `log` containing new properties `file`, `max_backups`, `max_size`, `max_age`, `compress`, `local_time`, and `verbose`:\n\n    ```yaml\n    # BEFORE:\n    'log_file': \"\"\n    'log_max_backups': 0\n    'log_max_size': 100\n    'log_max_age': 3\n    'log_compress': false\n    'log_localtime': false\n    'verbose': false\n\n    # AFTER:\n    'log':\n        'file': \"\"\n        'max_backups': 0\n        'max_size': 100\n        'max_age': 3\n        'compress': false\n        'local_time': false\n        'verbose': false\n    ```\n\n    To rollback this change, remove the new object `log`, set back `log_` and `verbose` properties and change the `schema_version` back to `23`.\n\n### Deprecated\n\n- Default exposure of the non-standard ports 784 and 8853 for DNS-over-QUIC in the `Dockerfile`.\n\n### Fixed\n\n- Two unspecified IPs when a host is blocked in two filter lists ([#5972]).\n\n- Incorrect setting of Parental Control cache size.\n\n- Excessive RAM and CPU consumption by Safe Browsing and Parental Control filters ([#5896]).\n\n### Removed\n\n- The `HEALTHCHECK` section and the use of `tini` in the `ENTRYPOINT` section in `Dockerfile` ([#5939]).  They caused a lot of issues, especially with tools like `docker-compose` and `podman`.\n\n    **NOTE:** Some Docker tools may cache `ENTRYPOINT` sections, so some users may be required to backup their configuration, stop the container, purge the old image, and reload it from scratch.\n\n[#5896]: https://github.com/AdguardTeam/AdGuardHome/issues/5896\n[#5972]: https://github.com/AdguardTeam/AdGuardHome/issues/5972\n[#5990]: https://github.com/AdguardTeam/AdGuardHome/issues/5990\n\n[go-1.19.11]:   https://groups.google.com/g/golang-announce/c/2q13H6LEEx0/m/sduSepLLBwAJ\n[ms-v0.107.34]: https://github.com/AdguardTeam/AdGuardHome/milestone/69?closed=1\n\n## [v0.107.33] - 2023-07-03\n\nSee also the [v0.107.33 GitHub milestone][ms-v0.107.33].\n\n### Added\n\n- The new command-line flag `--web-addr` is the address to serve the web UI on, in the host:port format.\n\n- The ability to set inactivity periods for filtering blocked services, both globally and per client, in the configuration file ([#951]).  The UI changes are coming in the upcoming releases.\n\n- The ability to edit rewrite rules via `PUT /control/rewrite/update` HTTP API and the Web UI ([#1577]).\n\n### Changed\n\n#### Configuration changes\n\nIn this release, the schema version has changed from 20 to 23.\n\n- Properties `bind_host`, `bind_port`, and `web_session_ttl` which used to setup web UI binding configuration, are now moved to a new object `http` containing new properties `address` and `session_ttl`:\n\n    ```yaml\n    # BEFORE:\n    'bind_host': '1.2.3.4'\n    'bind_port': 8080\n    'web_session_ttl': 720\n\n    # AFTER:\n    'http':\n      'address': '1.2.3.4:8080'\n      'session_ttl': '720h'\n    ```\n\n    Note that the new `http.session_ttl` property is now a duration string.  To rollback this change, remove the new object `http`, set back `bind_host`, `bind_port`, `web_session_ttl`,  and change the `schema_version` back to `22`.\n\n- Property `clients.persistent.blocked_services`, which in schema versions 21 and earlier used to be a list containing ids of blocked services, is now an object containing ids and schedule for blocked services:\n\n    ```yaml\n    # BEFORE:\n    'clients':\n      'persistent':\n        - 'name': 'client-name'\n          'blocked_services':\n          - id_1\n          - id_2\n\n    # AFTER:\n    'clients':\n      'persistent':\n      - 'name': client-name\n        'blocked_services':\n          'ids':\n          - id_1\n          - id_2\n        'schedule':\n          'time_zone': 'Local'\n          'sun':\n            'start': '0s'\n            'end': '24h'\n          'mon':\n            'start': '1h'\n            'end': '23h'\n    ```\n\n    To rollback this change, replace `clients.persistent.blocked_services` object with the list of ids of blocked services and change the `schema_version` back to `21`.\n\n- Property `dns.blocked_services`, which in schema versions 20 and earlier used to be a list containing ids of blocked services, is now an object containing ids and schedule for blocked services:\n\n    ```yaml\n    # BEFORE:\n    'blocked_services':\n    - id_1\n    - id_2\n\n    # AFTER:\n    'blocked_services':\n      'ids':\n      - id_1\n      - id_2\n      'schedule':\n        'time_zone': 'Local'\n        'sun':\n          'start': '0s'\n          'end': '24h'\n        'mon':\n          'start': '10m'\n          'end': '23h30m'\n        'tue':\n          'start': '20m'\n          'end': '23h'\n        'wed':\n          'start': '30m'\n          'end': '22h30m'\n        'thu':\n          'start': '40m'\n          'end': '22h'\n        'fri':\n          'start': '50m'\n          'end': '21h30m'\n        'sat':\n          'start': '1h'\n          'end': '21h'\n    ```\n\n    To rollback this change, replace `dns.blocked_services` object with the list of ids of blocked services and change the `schema_version` back to `20`.\n\n### Deprecated\n\n- The `HEALTHCHECK` section and the use of `tini` in the `ENTRYPOINT` section in `Dockerfile` ([#5939]).  They cause a lot of issues, especially with tools like `docker-compose` and `podman`, and will be removed in a future release.\n\n- Flags `-h`, `--host`, `-p`, `--port` have been deprecated.  The `-h` flag will work as an alias for `--help`, instead of the deprecated `--host` in the future releases.\n\n### Fixed\n\n- Ignoring of `/etc/hosts` file when resolving the hostnames of upstream DNS servers ([#5902]).\n\n- Excessive error logging when using DNS-over-QUIC ([#5285]).\n\n- Inability to set `bind_host` in `AdGuardHome.yaml` in Docker ([#4231], [#4235]).\n\n- The blocklists can now be deleted properly ([#5700]).\n\n- Queries with the question-section target `.`, for example `NS .`, are now counted in the statistics and correctly shown in the query log ([#5910]).\n\n- Safe Search not working with `AAAA` queries for domains that don’t have `AAAA` records ([#5913]).\n\n[#951]:  https://github.com/AdguardTeam/AdGuardHome/issues/951\n[#1577]: https://github.com/AdguardTeam/AdGuardHome/issues/1577\n[#4231]: https://github.com/AdguardTeam/AdGuardHome/issues/4231\n[#4235]: https://github.com/AdguardTeam/AdGuardHome/pull/4235\n[#5285]: https://github.com/AdguardTeam/AdGuardHome/issues/5285\n[#5700]: https://github.com/AdguardTeam/AdGuardHome/issues/5700\n[#5902]: https://github.com/AdguardTeam/AdGuardHome/issues/5902\n[#5910]: https://github.com/AdguardTeam/AdGuardHome/issues/5910\n[#5913]: https://github.com/AdguardTeam/AdGuardHome/issues/5913\n[#5939]: https://github.com/AdguardTeam/AdGuardHome/discussions/5939\n\n[ms-v0.107.33]: https://github.com/AdguardTeam/AdGuardHome/milestone/68?closed=1\n\n## [v0.107.32] - 2023-06-13\n\n### Fixed\n\n- DNSCrypt upstream not resetting the client and resolver information on dialing errors ([#5872]).\n\n## [v0.107.31] - 2023-06-08\n\nSee also the [v0.107.31 GitHub milestone][ms-v0.107.31].\n\n### Fixed\n\n- Startup errors on OpenWrt ([#5872]).\n\n- Plain-UDP upstreams always falling back to TCP, causing outages and slowdowns ([#5873], [#5874]).\n\n[#5872]: https://github.com/AdguardTeam/AdGuardHome/issues/5872\n[#5873]: https://github.com/AdguardTeam/AdGuardHome/issues/5873\n[#5874]: https://github.com/AdguardTeam/AdGuardHome/issues/5874\n\n[ms-v0.107.31]: https://github.com/AdguardTeam/AdGuardHome/milestone/67?closed=1\n\n## [v0.107.30] - 2023-06-07\n\nSee also the [v0.107.30 GitHub milestone][ms-v0.107.30].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2023-29402, CVE-2023-29403, and CVE-2023-29404 Go vulnerabilities fixed in [Go 1.19.10][go-1.19.10].\n\n### Fixed\n\n- Unquoted IPv6 bind hosts with trailing colons erroneously considered unspecified addresses are now properly validated ([#5752]).\n\n    **NOTE:** the Docker healthcheck script now also doesn’t interpret the `\"\"` value as unspecified address.\n\n- Incorrect `Content-Type` header value in `POST /control/version.json` and `GET /control/dhcp/interfaces` HTTP APIs ([#5716]).\n\n- Provided bootstrap servers are now used to resolve the hostnames of plain UDP/TCP upstream servers.\n\n[#5716]: https://github.com/AdguardTeam/AdGuardHome/issues/5716\n\n[go-1.19.10]:   https://groups.google.com/g/golang-announce/c/q5135a9d924/m/j0ZoAJOHAwAJ\n[ms-v0.107.30]: https://github.com/AdguardTeam/AdGuardHome/milestone/66?closed=1\n\n## [v0.107.29] - 2023-04-18\n\nSee also the [v0.107.29 GitHub milestone][ms-v0.107.29].\n\n### Added\n\n- The ability to exclude client activity from the query log or statistics by editing client’s settings on the respective page in the UI ([#1717], [#4299]).\n\n### Changed\n\n- Stored DHCP leases moved from `leases.db` to `data/leases.json`.  The file format has also been optimized.\n\n### Fixed\n\n- The `github.com/mdlayher/raw` dependency has been temporarily returned to support raw connections on Darwin ([#5712]).\n\n- Incorrect recording of blocked results as “Blocked by CNAME or IP” in the query log ([#5725]).\n\n- All Safe Search services being unchecked by default.\n\n- Panic when a DNSCrypt stamp is invalid ([#5721]).\n\n[#5712]: https://github.com/AdguardTeam/AdGuardHome/issues/5712\n[#5721]: https://github.com/AdguardTeam/AdGuardHome/issues/5721\n[#5725]: https://github.com/AdguardTeam/AdGuardHome/issues/5725\n[#5752]: https://github.com/AdguardTeam/AdGuardHome/issues/5752\n\n[ms-v0.107.29]: https://github.com/AdguardTeam/AdGuardHome/milestone/65?closed=1\n\n## [v0.107.28] - 2023-04-12\n\nSee also the [v0.107.28 GitHub milestone][ms-v0.107.28].\n\n### Added\n\n- The ability to exclude client activity from the query log or statistics by using the new properties `ignore_querylog` and `ignore_statistics` of the items of the `clients.persistent` array ([#1717], [#4299]).  The UI changes are coming in the upcoming releases.\n\n- Better profiling information when `debug_pprof` is set to `true`.\n\n- IPv6 support in Safe Search for some services.\n\n- The ability to make bootstrap DNS lookups prefer IPv6 addresses to IPv4 ones using the new `dns.bootstrap_prefer_ipv6` configuration file property ([#4262]).\n\n- Docker container’s healthcheck ([#3290]).\n\n- The new HTTP API `POST /control/protection`, that updates protection state and adds an optional pause duration ([#1333]).  The format of request body is described in `openapi/openapi.yaml`.  The duration of this pause could also be set with the property `protection_disabled_until` in the `dns` object of the YAML configuration file.\n\n- The ability to create a static DHCP lease from a dynamic one more easily ([#3459]).\n\n- Two new HTTP APIs, `PUT /control/stats/config/update` and `GET control/stats/config`, which can be used to set and receive the query log configuration.  See `openapi/openapi.yaml` for the full description.\n\n- Two new HTTP APIs, `PUT /control/querylog/config/update` and `GET control/querylog/config`, which can be used to set and receive the statistics configuration.  See `openapi/openapi.yaml` for the full description.\n\n- The ability to set custom IP for EDNS Client Subnet by using the DNS-server configuration section on the DNS settings page in the UI ([#1472]).\n\n- The ability to manage Safe Search for each service by using the new `safe_search` property ([#1163]).\n\n### Changed\n\n- ARPA domain names containing a subnet within private networks now also considered private, behaving closer to [RFC 6761][rfc6761] ([#5567]).\n\n#### Configuration changes\n\nIn this release, the schema version has changed from 17 to 20.\n\n- Property `statistics.interval`, which in schema versions 19 and earlier used to be an integer number of days, is now a string with a human-readable duration:\n\n    ```yaml\n    # BEFORE:\n    'statistics':\n      # …\n      'interval': 1\n\n    # AFTER:\n    'statistics':\n      # …\n      'interval': '24h'\n    ```\n\n  To rollback this change, convert the property back into days and change the `schema_version` back to `19`.\n\n- The `dns.safesearch_enabled` property has been replaced with `safe_search` object containing per-service settings.\n\n- The `clients.persistent.safesearch_enabled` property has been replaced with `safe_search` object containing per-service settings.\n\n    ```yaml\n      # BEFORE:\n      'safesearch_enabled': true\n\n      # AFTER:\n      'safe_search':\n        'enabled': true\n        'bing': true\n        'duckduckgo': true\n        'google': true\n        'pixabay': true\n        'yandex': true\n        'youtube': true\n    ```\n\n    To rollback this change, move the value of `dns.safe_search.enabled` into the `dns.safesearch_enabled`, then remove `dns.safe_search` property.  Do the same client’s specific `clients.persistent.safesearch` and then change the `schema_version` back to `17`.\n\n### Deprecated\n\n- The `POST /control/safesearch/enable` HTTP API is deprecated.  Use the new `PUT /control/safesearch/settings` API.\n\n- The `POST /control/safesearch/disable` HTTP API is deprecated.  Use the new `PUT /control/safesearch/settings` API\n\n- The `safesearch_enabled` property is deprecated in the following HTTP APIs:\n    - `GET /control/clients`;\n    - `POST /control/clients/add`;\n    - `POST /control/clients/update`;\n    - `GET /control/clients/find?ip0=...&ip1=...&ip2=...`.\n\n    Check `openapi/openapi.yaml` for more details.\n\n- The `GET /control/stats_info` HTTP API; use the new `GET /control/stats/config` API instead.\n\n    **NOTE:** If interval is custom then it will be equal to `90` days for compatibility reasons.  See `openapi/openapi.yaml` and `openapi/CHANGELOG.md`.\n\n- The `POST /control/stats_config` HTTP API; use the new `PUT /control/stats/config/update` API instead.\n\n- The `GET /control/querylog_info` HTTP API; use the new `GET /control/querylog/config` API instead.\n\n    **NOTE:** If interval is custom then it will be equal to `90` days for compatibility reasons.  See `openapi/openapi.yaml` and `openapi/CHANGELOG.md`.\n\n- The `POST /control/querylog_config` HTTP API; use the new `PUT /control/querylog/config/update` API instead.\n\n### Fixed\n\n- Logging of the client’s IP address after failed login attempts ([#5701]).\n\n[#1163]: https://github.com/AdguardTeam/AdGuardHome/issues/1163\n[#1333]: https://github.com/AdguardTeam/AdGuardHome/issues/1333\n[#1472]: https://github.com/AdguardTeam/AdGuardHome/issues/1472\n[#3290]: https://github.com/AdguardTeam/AdGuardHome/issues/3290\n[#3459]: https://github.com/AdguardTeam/AdGuardHome/issues/3459\n[#4262]: https://github.com/AdguardTeam/AdGuardHome/issues/4262\n[#5567]: https://github.com/AdguardTeam/AdGuardHome/issues/5567\n[#5701]: https://github.com/AdguardTeam/AdGuardHome/issues/5701\n\n[ms-v0.107.28]: https://github.com/AdguardTeam/AdGuardHome/milestone/64?closed=1\n[rfc6761]:      https://datatracker.ietf.org/doc/html/rfc6761\n\n## [v0.107.27] - 2023-04-05\n\nSee also the [v0.107.27 GitHub milestone][ms-v0.107.27].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2023-24534, CVE-2023-24536, CVE-2023-24537, and CVE-2023-24538 Go vulnerabilities fixed in [Go 1.19.8][go-1.19.8].\n\n### Fixed\n\n- Query log not showing all filtered queries when the “Filtered” log filter is selected ([#5639]).\n\n- Panic in empty hostname in the filter’s URL ([#5631]).\n\n- Panic caused by empty top-level domain name label in `/etc/hosts` files ([#5584]).\n\n[#5584]: https://github.com/AdguardTeam/AdGuardHome/issues/5584\n[#5631]: https://github.com/AdguardTeam/AdGuardHome/issues/5631\n[#5639]: https://github.com/AdguardTeam/AdGuardHome/issues/5639\n\n[go-1.19.8]:    https://groups.google.com/g/golang-announce/c/Xdv6JL9ENs8/m/OV40vnafAwAJ\n[ms-v0.107.27]: https://github.com/AdguardTeam/AdGuardHome/milestone/63?closed=1\n\n## [v0.107.26] - 2023-03-09\n\nSee also the [v0.107.26 GitHub milestone][ms-v0.107.26].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2023-24532 Go vulnerability fixed in [Go 1.19.7][go-1.19.7].\n\n### Added\n\n- The ability to set custom IP for EDNS Client Subnet by using the new `dns.edns_client_subnet.use_custom` and `dns.edns_client_subnet.custom_ip` properties ([#1472]).  The UI changes are coming in the upcoming releases.\n\n- The ability to use `dnstype` rules in the disallowed domains list ([#5468]).  This allows dropping requests based on their question types.\n\n### Changed\n\n#### Configuration changes\n\n- Property `edns_client_subnet`, which in schema versions 16 and earlier used to be a part of the `dns` object, is now part of the `dns.edns_client_subnet` object:\n\n    ```yaml\n    # BEFORE:\n    'dns':\n      # …\n      'edns_client_subnet': false\n\n    # AFTER:\n    'dns':\n      # …\n      'edns_client_subnet':\n        'enabled': false\n        'use_custom': false\n        'custom_ip': ''\n    ```\n\n    To rollback this change, move the value of `dns.edns_client_subnet.enabled` into the `dns.edns_client_subnet`, remove the properties `dns.edns_client_subnet.enabled`, `dns.edns_client_subnet.use_custom`, `dns.edns_client_subnet.custom_ip`, and change the `schema_version` back to `16`.\n\n### Fixed\n\n- Obsolete value of the Interface MTU DHCP option is now omitted ([#5281]).\n\n- Various dark theme bugs ([#5439], [#5441], [#5442], [#5515]).\n\n- Automatic update on MIPS64 and little-endian 32-bit MIPS architectures ([#5270], [#5373]).\n\n- Requirements to domain names in domain-specific upstream configurations have been relaxed to meet those from [RFC 3696][rfc3696] ([#4884]).\n\n- Failing service installation via script on FreeBSD ([#5431]).\n\n[#4884]: https://github.com/AdguardTeam/AdGuardHome/issues/4884\n[#5270]: https://github.com/AdguardTeam/AdGuardHome/issues/5270\n[#5281]: https://github.com/AdguardTeam/AdGuardHome/issues/5281\n[#5373]: https://github.com/AdguardTeam/AdGuardHome/issues/5373\n[#5431]: https://github.com/AdguardTeam/AdGuardHome/issues/5431\n[#5439]: https://github.com/AdguardTeam/AdGuardHome/issues/5439\n[#5441]: https://github.com/AdguardTeam/AdGuardHome/issues/5441\n[#5442]: https://github.com/AdguardTeam/AdGuardHome/issues/5442\n[#5468]: https://github.com/AdguardTeam/AdGuardHome/issues/5468\n[#5515]: https://github.com/AdguardTeam/AdGuardHome/issues/5515\n\n[go-1.19.7]:    https://groups.google.com/g/golang-announce/c/3-TpUx48iQY\n[ms-v0.107.26]: https://github.com/AdguardTeam/AdGuardHome/milestone/62?closed=1\n[rfc3696]:      https://datatracker.ietf.org/doc/html/rfc3696\n\n## [v0.107.25] - 2023-02-21\n\nSee also the [v0.107.25 GitHub milestone][ms-v0.107.25].\n\n### Fixed\n\n- Panic when using unencrypted DNS-over-HTTPS ([#5518]).\n\n[#5518]: https://github.com/AdguardTeam/AdGuardHome/issues/5518\n\n[ms-v0.107.25]: https://github.com/AdguardTeam/AdGuardHome/milestone/61?closed=1\n\n## [v0.107.24] - 2023-02-15\n\nSee also the [v0.107.24 GitHub milestone][ms-v0.107.24].\n\n### Security\n\n- Go version has been updated, both because Go 1.18 has reached end of life an to prevent the possibility of exploiting the Go vulnerabilities fixed in [Go 1.19.6][go-1.19.6].\n\n### Added\n\n- The ability to disable statistics by using the new `statistics.enabled` property.  Previously it was necessary to set the `statistics_interval` to 0, losing the previous value ([#1717], [#4299]).\n\n- The ability to exclude domain names from the query log or statistics by using the new `querylog.ignored` or `statistics.ignored` properties ([#1717], [#4299]).  The UI changes are coming in the upcoming releases.\n\n### Changed\n\n#### Configuration changes\n\nIn this release, the schema version has changed from 14 to 16.\n\n- Property `statistics_interval`, which in schema versions 15 and earlier used to be a part of the `dns` object, is now a part of the `statistics` object:\n\n    ```yaml\n    # BEFORE:\n    'dns':\n      # …\n      'statistics_interval': 1\n\n    # AFTER:\n    'statistics':\n      # …\n      'interval': 1\n    ```\n\n    To rollback this change, move the property back into the `dns` object and change the `schema_version` back to `15`.\n\n- The properties `dns.querylog_enabled`, `dns.querylog_file_enabled`, `dns.querylog_interval`, and `dns.querylog_size_memory` have been moved to the new `querylog` object.\n\n    ```yaml\n    # BEFORE:\n    'dns':\n      'querylog_enabled': true\n      'querylog_file_enabled': true\n      'querylog_interval': '2160h'\n      'querylog_size_memory': 1000\n\n    # AFTER:\n    'querylog':\n      'enabled': true\n      'file_enabled': true\n      'interval': '2160h'\n      'size_memory': 1000\n      'ignored': []\n    ```\n\n    To rollback this change, rename and move properties back into the `dns` object, remove `querylog` object and `querylog.ignored` property, and change the `schema_version` back to `14`.\n\n### Deprecated\n\n- Go 1.19 support.  Future versions will require at least Go 1.20 to build.\n\n### Fixed\n\n- Setting the AD (Authenticated Data) flag on responses that have the DO (DNSSEC OK) flag set but not the AD flag ([#5479]).\n\n- Client names resolved via reverse DNS not being updated ([#4939]).\n\n- The icon for League Of Legends on the Blocked services page ([#5433]).\n\n### Removed\n\n- Go 1.18 support, as it has reached end of life.\n\n[#1717]: https://github.com/AdguardTeam/AdGuardHome/issues/1717\n[#4299]: https://github.com/AdguardTeam/AdGuardHome/issues/4299\n[#4939]: https://github.com/AdguardTeam/AdGuardHome/issues/4939\n[#5433]: https://github.com/AdguardTeam/AdGuardHome/issues/5433\n[#5479]: https://github.com/AdguardTeam/AdGuardHome/issues/5479\n\n[go-1.19.6]:    https://groups.google.com/g/golang-announce/c/V0aBFqaFs_E\n[ms-v0.107.24]: https://github.com/AdguardTeam/AdGuardHome/milestone/60?closed=1\n\n## [v0.107.23] - 2023-02-01\n\nSee also the [v0.107.23 GitHub milestone][ms-v0.107.23].\n\n### Added\n\n- DNS64 support ([#5117]).  The function may be enabled with new `use_dns64` property under `dns` object in the configuration along with `dns64_prefixes`, the set of exclusion prefixes to filter AAAA responses.  The Well-Known Prefix (`64:ff9b::/96`) is used if no custom prefixes are specified.\n\n### Fixed\n\n- Filtering rules with `*` as the hostname not working properly ([#5245]).\n\n- Various dark theme bugs ([#5375]).\n\n### Removed\n\n- The “beta frontend” and the corresponding APIs.  They never quite worked properly, and the future new version of AdGuard Home API will probably be different.\n\n    Correspondingly, the configuration parameter `beta_bind_port` has been removed as well.\n\n[#5117]: https://github.com/AdguardTeam/AdGuardHome/issues/5117\n[#5245]: https://github.com/AdguardTeam/AdGuardHome/issues/5245\n[#5375]: https://github.com/AdguardTeam/AdGuardHome/issues/5375\n\n[ms-v0.107.23]: https://github.com/AdguardTeam/AdGuardHome/milestone/59?closed=1\n\n## [v0.107.22] - 2023-01-19\n\nSee also the [v0.107.22 GitHub milestone][ms-v0.107.22].\n\n### Added\n\n- Experimental Dark UI theme ([#613]).\n\n- The new HTTP API `PUT /control/profile/update`, that updates current user language and UI theme.  The format of request body is described in `openapi/openapi.yaml`.\n\n### Changed\n\n- The HTTP API `GET /control/profile` now returns enhanced object with current user’s name, language, and UI theme.  The format of response body is described in `openapi/openapi.yaml` and `openapi/CHANGELOG.md`.\n\n### Fixed\n\n- `AdGuardHome --update` freezing when another instance of AdGuard Home is running ([#4223], [#5191]).\n\n- The `--update` flag performing an update even when there is no version change.\n\n- Failing HTTPS redirection on saving the encryption settings ([#4898]).\n\n- Zeroing rules counter of erroneously edited filtering rule lists ([#5290]).\n\n- Filters updating strategy, which could sometimes lead to use of broken or incompletely downloaded lists ([#5258]).\n\n[#613]:  https://github.com/AdguardTeam/AdGuardHome/issues/613\n[#5191]: https://github.com/AdguardTeam/AdGuardHome/issues/5191\n[#5290]: https://github.com/AdguardTeam/AdGuardHome/issues/5290\n[#5258]: https://github.com/AdguardTeam/AdGuardHome/issues/5258\n\n[ms-v0.107.22]: https://github.com/AdguardTeam/AdGuardHome/milestone/58?closed=1\n\n## [v0.107.21] - 2022-12-15\n\nSee also the [v0.107.21 GitHub milestone][ms-v0.107.21].\n\n### Changed\n\n- The URLs of the default filters for new installations are synchronized to those introduced in v0.107.20 ([#5238]).\n\n    **NOTE:** Some users may need to re-add the lists from the vetted filter lists to update the URLs to the new ones.  Custom filters added by users themselves do not require re-adding.\n\n### Fixed\n\n- Errors popping up during updates of settings, which could sometimes cause the server to stop responding ([#5251]).\n\n[#5238]: https://github.com/AdguardTeam/AdGuardHome/issues/5238\n[#5251]: https://github.com/AdguardTeam/AdGuardHome/issues/5251\n\n[ms-v0.107.21]: https://github.com/AdguardTeam/AdGuardHome/milestone/57?closed=1\n\n## [v0.107.20] - 2022-12-07\n\nSee also the [v0.107.20 GitHub milestone][ms-v0.107.20].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2022-41717 and CVE-2022-41720 Go vulnerabilities fixed in [Go 1.18.9][go-1.18.9].\n\n### Added\n\n- The ability to clear the DNS cache ([#5190]).\n\n### Changed\n\n- DHCP server initialization errors are now logged at debug level if the server itself disabled ([#4944]).\n\n### Fixed\n\n- Wrong validation error messages on the DHCP configuration page ([#5208]).\n\n- Slow upstream checks making the API unresponsive ([#5193]).\n\n- The TLS initialization errors preventing AdGuard Home from starting ([#5189]).  Instead, AdGuard Home disables encryption and shows an error message on the encryption settings page in the UI, which was the intended previous behavior.\n\n- URLs of some vetted blocklists.\n\n[#4944]: https://github.com/AdguardTeam/AdGuardHome/issues/4944\n[#5189]: https://github.com/AdguardTeam/AdGuardHome/issues/5189\n[#5190]: https://github.com/AdguardTeam/AdGuardHome/issues/5190\n[#5193]: https://github.com/AdguardTeam/AdGuardHome/issues/5193\n[#5208]: https://github.com/AdguardTeam/AdGuardHome/issues/5208\n\n[go-1.18.9]:    https://groups.google.com/g/golang-announce/c/L_3rmdT0BMU\n[ms-v0.107.20]: https://github.com/AdguardTeam/AdGuardHome/milestone/56?closed=1\n\n## [v0.107.19] - 2022-11-23\n\nSee also the [v0.107.19 GitHub milestone][ms-v0.107.19].\n\n### Added\n\n- The ability to block popular Mastodon instances ([AdguardTeam/HostlistsRegistry#100]).\n\n- The new `--update` command-line option, which allows updating AdGuard Home silently ([#4223]).\n\n### Changed\n\n- Minor UI changes.\n\n[#4223]: https://github.com/AdguardTeam/AdGuardHome/issues/4223\n\n[ms-v0.107.19]: https://github.com/AdguardTeam/AdGuardHome/milestone/55?closed=1\n\n[AdguardTeam/HostlistsRegistry#100]: https://github.com/AdguardTeam/HostlistsRegistry/pull/100\n\n## [v0.107.18] - 2022-11-08\n\nSee also the [v0.107.18 GitHub milestone][ms-v0.107.18].\n\n### Fixed\n\n- Crash on some systems when domains from system hosts files are processed ([#5089]).\n\n[#5089]: https://github.com/AdguardTeam/AdGuardHome/issues/5089\n\n[ms-v0.107.18]: https://github.com/AdguardTeam/AdGuardHome/milestone/54?closed=1\n\n## [v0.107.17] - 2022-11-02\n\nSee also the [v0.107.17 GitHub milestone][ms-v0.107.17].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2022-41716 Go vulnerability fixed in [Go 1.18.8][go-1.18.8].\n\n### Added\n\n- The warning message when adding a certificate having no IP addresses ([#4898]).\n\n- Several new blockable services ([#3972]).  Those will now be more in sync with the services that are already blockable in AdGuard DNS.\n\n- A new HTTP API, `GET /control/blocked_services/all`, that lists all available blocked services and their data, such as SVG icons ([#3972]).\n\n- The new optional `tls.override_tls_ciphers` property, which allows overriding TLS ciphers used by AdGuard Home ([#4925], [#4990]).\n\n- The ability to serve DNS on link-local IPv6 addresses ([#2926]).\n\n- The ability to put [ClientIDs][clientid] into DNS-over-HTTPS hostnames as opposed to URL paths ([#3418]).  Note that AdGuard Home checks the server name only if the URL does not contain a ClientID.\n\n### Changed\n\n- DNS-over-TLS resolvers aren’t returned anymore when the configured TLS certificate contains no IP addresses ([#4927]).\n\n- Responses with `SERVFAIL` code are now cached for at least 30 seconds.\n\n### Deprecated\n\n- The `GET /control/blocked_services/services` HTTP API; use the new `GET /control/blocked_services/all` API instead ([#3972]).\n\n### Fixed\n\n- ClientIDs not working when using DNS-over-HTTPS with HTTP/3.\n\n- Editing the URL of an enabled rule list also includes validation of the filter contents preventing from saving a bad one ([#4916]).\n\n- The default value of `dns.cache_size` accidentally set to 0 has now been reverted to 4 MiB ([#5010]).\n\n- Responses for which the DNSSEC validation had explicitly been omitted aren’t cached now ([#4942]).\n\n- Web UI not switching to HTTP/3 ([#4986], [#4993]).\n\n[#2926]: https://github.com/AdguardTeam/AdGuardHome/issues/2926\n[#3418]: https://github.com/AdguardTeam/AdGuardHome/issues/3418\n[#3972]: https://github.com/AdguardTeam/AdGuardHome/issues/3972\n[#4898]: https://github.com/AdguardTeam/AdGuardHome/issues/4898\n[#4916]: https://github.com/AdguardTeam/AdGuardHome/issues/4916\n[#4925]: https://github.com/AdguardTeam/AdGuardHome/issues/4925\n[#4942]: https://github.com/AdguardTeam/AdGuardHome/issues/4942\n[#4986]: https://github.com/AdguardTeam/AdGuardHome/issues/4986\n[#4990]: https://github.com/AdguardTeam/AdGuardHome/issues/4990\n[#4993]: https://github.com/AdguardTeam/AdGuardHome/issues/4993\n[#5010]: https://github.com/AdguardTeam/AdGuardHome/issues/5010\n\n[clientid]:     https://github.com/AdguardTeam/AdGuardHome/wiki/Clients#clientid\n[go-1.18.8]:    https://groups.google.com/g/golang-announce/c/mbHY1UY3BaM\n[ms-v0.107.17]: https://github.com/AdguardTeam/AdGuardHome/milestone/53?closed=1\n\n## [v0.107.16] - 2022-10-07\n\nThis is a security update.  There is no GitHub milestone, since no GitHub issues were resolved.\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2022-2879, CVE-2022-2880, and CVE-2022-41715 Go vulnerabilities fixed in [Go 1.18.7][go-1.18.7].\n\n[go-1.18.7]: https://groups.google.com/g/golang-announce/c/xtuG5faxtaU\n\n## [v0.107.15] - 2022-10-03\n\nSee also the [v0.107.15 GitHub milestone][ms-v0.107.15].\n\n### Security\n\n- As an additional CSRF protection measure, AdGuard Home now ensures that requests that change its state but have no body (such as `POST /control/stats_reset` requests) do not have a `Content-Type` header set on them ([#4970]).\n\n### Added\n\n#### Experimental HTTP/3 Support\n\nSee [#3955] and the related issues for more details.  These features are still experimental and may break or change in the future.\n\n- DNS-over-HTTP/3 DNS and web UI client request support.  This feature must be explicitly enabled by setting the new property `dns.serve_http3` in the configuration file to `true`.\n\n- DNS-over-HTTP upstreams can now upgrade to HTTP/3 if the new configuration file property `dns.use_http3_upstreams` is set to `true`.\n\n- Upstreams with forced DNS-over-HTTP/3 and no fallback to prior HTTP versions using the `h3://` scheme.\n\n### Fixed\n\n- User-specific blocked services not applying correctly ([#4945], [#4982], [#4983]).\n- `only application/json is allowed` errors in various APIs ([#4970]).\n\n[#3955]: https://github.com/AdguardTeam/AdGuardHome/issues/3955\n[#4945]: https://github.com/AdguardTeam/AdGuardHome/issues/4945\n[#4970]: https://github.com/AdguardTeam/AdGuardHome/issues/4970\n[#4982]: https://github.com/AdguardTeam/AdGuardHome/issues/4982\n[#4983]: https://github.com/AdguardTeam/AdGuardHome/issues/4983\n\n[ms-v0.107.15]: https://github.com/AdguardTeam/AdGuardHome/milestone/51?closed=1\n\n## [v0.107.14] - 2022-09-29\n\nSee also the [v0.107.14 GitHub milestone][ms-v0.107.14].\n\n### Security\n\nA Cross-Site Request Forgery (CSRF) vulnerability has been discovered.  We thank Daniel Elkabes from Mend.io for reporting this vulnerability to us.  This is [CVE-2022-32175].\n\n#### `SameSite` Policy\n\nThe `SameSite` policy on the AdGuard Home session cookies is now set to `Lax`.  Which means that the only cross-site HTTP request for which the browser is allowed to send the session cookie is navigating to the AdGuard Home domain.\n\n**Users are strongly advised to log out, clear browser cache, and log in again after updating.**\n\n#### Removal Of Plain-Text APIs (BREAKING API CHANGE)\n\nWe have implemented several measures to prevent such vulnerabilities in the future, but some of these measures break backwards compatibility for the sake of better protection.\n\nThe following APIs, which previously accepted or returned `text/plain` data, now accept or return data as JSON.  All new formats for the request and response bodies are documented in `openapi/openapi.yaml` and `openapi/CHANGELOG.md`.\n\n- `GET  /control/i18n/current_language`;\n- `POST /control/dhcp/find_active_dhcp`;\n- `POST /control/filtering/set_rules`;\n- `POST /control/i18n/change_language`.\n\n#### Stricter Content-Type Checks (BREAKING API CHANGE)\n\nAll JSON APIs that expect a body now check if the request actually has `Content-Type` set to `application/json`.\n\n#### Other Security Changes\n\n- Weaker cipher suites that use the CBC (cipher block chaining) mode of operation have been disabled ([#2993]).\n\n### Added\n\n- Support for plain (unencrypted) HTTP/2 ([#4930]).  This is useful for AdGuard Home installations behind a reverse proxy.\n\n### Fixed\n\n- Incorrect path template in DDR responses ([#4927]).\n\n[#2993]: https://github.com/AdguardTeam/AdGuardHome/issues/2993\n[#4927]: https://github.com/AdguardTeam/AdGuardHome/issues/4927\n[#4930]: https://github.com/AdguardTeam/AdGuardHome/issues/4930\n\n[CVE-2022-32175]: https://www.cvedetails.com/cve/CVE-2022-32175\n[ms-v0.107.14]:   https://github.com/AdguardTeam/AdGuardHome/milestone/50?closed=1\n\n## [v0.107.13] - 2022-09-14\n\nSee also the [v0.107.13 GitHub milestone][ms-v0.107.13].\n\n### Added\n\n- The new optional `dns.ipset_file` property, which can be set in the configuration file.  It allows loading the `ipset` list from a file, just like `dns.upstream_dns_file` does for upstream servers ([#4686]).\n\n### Changed\n\n- The minimum DHCP message size is reassigned back to BOOTP’s constraint of 300 bytes ([#4904]).\n\n### Fixed\n\n- Panic when adding a static lease within the disabled DHCP server ([#4722]).\n\n[#4686]: https://github.com/AdguardTeam/AdGuardHome/issues/4686\n[#4722]: https://github.com/AdguardTeam/AdGuardHome/issues/4722\n[#4904]: https://github.com/AdguardTeam/AdGuardHome/issues/4904\n\n[ms-v0.107.13]: https://github.com/AdguardTeam/AdGuardHome/milestone/49?closed=1\n\n## [v0.107.12] - 2022-09-07\n\nSee also the [v0.107.12 GitHub milestone][ms-v0.107.12].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2022-27664 and CVE-2022-32190 Go vulnerabilities fixed in [Go 1.18.6][go-1.18.6].\n\n### Added\n\n- New `bool`, `dur`, `u8`, and `u16` DHCP options to provide more convenience on options control by setting values in a human-readable format ([#4705]).  See also a [Wiki page][wiki-dhcp-opts].\n\n- New `del` DHCP option which removes the corresponding option from server’s response ([#4337]).  See also a [Wiki page][wiki-dhcp-opts].\n\n    **NOTE:** This modifier affects all the parameters in the response and not only the requested ones.\n\n- A new HTTP API, `GET /control/blocked_services/services`, that lists all available blocked services ([#4535]).\n\n### Changed\n\n- The DHCP options handling is now closer to the [RFC 2131][rfc-2131] ([#4705]).\n\n- When the DHCP server is enabled, queries for domain names under `dhcp.local_domain_name` not pointing to real DHCP client hostnames are now processed by filters ([#4865]).\n\n- The `DHCPREQUEST` handling is now closer to the [RFC 2131][rfc-2131] ([#4863]).\n\n- The internal DNS client, used to resolve hostnames of external clients and also during automatic updates, now respects the upstream mode settings for the main DNS client ([#4403]).\n\n### Deprecated\n\n- Ports 784 and 8853 for DNS-over-QUIC in Docker images.  Users who still serve DoQ on these ports are encouraged to move to the standard port 853.  These ports will be removed from the `EXPOSE` section of our `Dockerfile` in a future release.\n\n- Go 1.18 support.  Future versions will require at least Go 1.19 to build.\n\n### Fixed\n\n- The length of the DHCP server’s response is now at least 576 bytes as per [RFC 2131][rfc-2131] recommendation ([#4337]).\n\n- Dynamic leases created with empty hostnames ([#4745]).\n\n- Unnecessary logging of non-critical statistics errors ([#4850]).\n\n[#4337]: https://github.com/AdguardTeam/AdGuardHome/issues/4337\n[#4403]: https://github.com/AdguardTeam/AdGuardHome/issues/4403\n[#4535]: https://github.com/AdguardTeam/AdGuardHome/issues/4535\n[#4705]: https://github.com/AdguardTeam/AdGuardHome/issues/4705\n[#4745]: https://github.com/AdguardTeam/AdGuardHome/issues/4745\n[#4850]: https://github.com/AdguardTeam/AdGuardHome/issues/4850\n[#4863]: https://github.com/AdguardTeam/AdGuardHome/issues/4863\n[#4865]: https://github.com/AdguardTeam/AdGuardHome/issues/4865\n\n[go-1.18.6]:      https://groups.google.com/g/golang-announce/c/x49AQzIVX-s\n[ms-v0.107.12]:   https://github.com/AdguardTeam/AdGuardHome/milestone/48?closed=1\n[rfc-2131]:       https://datatracker.ietf.org/doc/html/rfc2131\n[wiki-dhcp-opts]: https://github.com/adguardTeam/adGuardHome/wiki/DHCP#config-4\n\n## [v0.107.11] - 2022-08-19\n\nSee also the [v0.107.11 GitHub milestone][ms-v0.107.11].\n\n### Added\n\n- Bilibili service blocking ([#4795]).\n\n### Changed\n\n- DNS-over-QUIC connections now use keepalive.\n\n### Fixed\n\n- Migrations from releases older than v0.107.7 failing ([#4846]).\n\n[#4795]: https://github.com/AdguardTeam/AdGuardHome/issues/4795\n[#4846]: https://github.com/AdguardTeam/AdGuardHome/issues/4846\n\n[ms-v0.107.11]: https://github.com/AdguardTeam/AdGuardHome/milestone/47?closed=1\n\n## [v0.107.10] - 2022-08-17\n\nSee also the [v0.107.10 GitHub milestone][ms-v0.107.10].\n\n### Added\n\n- Arabic localization.\n\n- Support for Discovery of Designated Resolvers (DDR) according to the [RFC draft][ddr-draft] ([#4463]).\n\n### Changed\n\n- Our snap package now uses the `core22` image as its base ([#4843]).\n\n### Fixed\n\n- DHCP not working on most OSes ([#4836]).\n\n- `invalid argument` errors during update checks on older Linux kernels ([#4670]).\n\n- Data races and concurrent map access in statistics module ([#4358], [#4342]).\n\n[#4342]: https://github.com/AdguardTeam/AdGuardHome/issues/4342\n[#4358]: https://github.com/AdguardTeam/AdGuardHome/issues/4358\n[#4670]: https://github.com/AdguardTeam/AdGuardHome/issues/4670\n[#4843]: https://github.com/AdguardTeam/AdGuardHome/issues/4843\n\n[ddr-draft]:    https://datatracker.ietf.org/doc/html/draft-ietf-add-ddr-08\n[ms-v0.107.10]: https://github.com/AdguardTeam/AdGuardHome/milestone/46?closed=1\n\n## [v0.107.9] - 2022-08-03\n\nSee also the [v0.107.9 GitHub milestone][ms-v0.107.9].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2022-32189 Go vulnerability fixed in [Go 1.18.5][go-1.18.5].  Go 1.17 support has also been removed, as it has reached end of life and will not receive security updates.\n\n### Added\n\n- Domain-specific upstream servers test.  If such test fails, a warning message is shown ([#4517]).\n\n- `windows/arm64` support ([#3057]).\n\n### Changed\n\n- UI and update links have been changed to make them more resistant to DNS blocking.\n\n### Fixed\n\n- DHCP not working on most OSes ([#4836]).\n\n- Several UI issues ([#4775], [#4776], [#4782]).\n\n### Removed\n\n- Go 1.17 support, as it has reached end of life.\n\n[#3057]: https://github.com/AdguardTeam/AdGuardHome/issues/3057\n[#4517]: https://github.com/AdguardTeam/AdGuardHome/issues/4517\n[#4775]: https://github.com/AdguardTeam/AdGuardHome/issues/4775\n[#4776]: https://github.com/AdguardTeam/AdGuardHome/issues/4776\n[#4782]: https://github.com/AdguardTeam/AdGuardHome/issues/4782\n[#4836]: https://github.com/AdguardTeam/AdGuardHome/issues/4836\n\n[go-1.18.5]:   https://groups.google.com/g/golang-announce/c/YqYYG87xB10\n[ms-v0.107.9]: https://github.com/AdguardTeam/AdGuardHome/milestone/45?closed=1\n\n## [v0.107.8] - 2022-07-13\n\nSee also the [v0.107.8 GitHub milestone][ms-v0.107.8].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the CVE-2022-1705, CVE-2022-32148, CVE-2022-30631, and other Go vulnerabilities fixed in [Go 1.17.12][go-1.17.12].\n\n### Fixed\n\n- DHCP lease validation incorrectly letting users assign the IP address of the gateway as the address of the lease ([#4698]).\n\n- Updater no longer expects a hardcoded name for  `AdGuardHome` executable ([#4219]).\n\n- Inconsistent names of runtime clients from hosts files ([#4683]).\n\n- PTR requests for addresses leased by DHCP will now be resolved into hostnames under `dhcp.local_domain_name` ([#4699]).\n\n- Broken service installation on OpenWrt ([#4677]).\n\n[#4219]: https://github.com/AdguardTeam/AdGuardHome/issues/4219\n[#4677]: https://github.com/AdguardTeam/AdGuardHome/issues/4677\n[#4683]: https://github.com/AdguardTeam/AdGuardHome/issues/4683\n[#4698]: https://github.com/AdguardTeam/AdGuardHome/issues/4698\n[#4699]: https://github.com/AdguardTeam/AdGuardHome/issues/4699\n\n[go-1.17.12]:  https://groups.google.com/g/golang-announce/c/nqrv9fbR0zE\n[ms-v0.107.8]: https://github.com/AdguardTeam/AdGuardHome/milestone/44?closed=1\n\n## [v0.107.7] - 2022-06-06\n\nSee also the [v0.107.7 GitHub milestone][ms-v0.107.7].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the [CVE-2022-29526], [CVE-2022-30634], [CVE-2022-30629], [CVE-2022-30580], and [CVE-2022-29804] Go vulnerabilities.\n\n- Enforced password strength policy ([#3503]).\n\n### Added\n\n- Support for the final DNS-over-QUIC standard, [RFC 9250][rfc-9250] ([#4592]).\n\n- Support upstreams for subdomains of a domain only ([#4503]).\n\n- The ability to control each source of runtime clients separately via `clients.runtime_sources` configuration object ([#3020]).\n\n- The ability to customize the set of networks that are considered private through the new `dns.private_networks` property in the configuration file ([#3142]).\n\n- EDNS Client-Subnet information in the request details section of a query log record ([#3978]).\n\n- Support for hostnames for plain UDP upstream servers using the `udp://` scheme ([#4166]).\n\n- Logs are now collected by default on FreeBSD and OpenBSD when AdGuard Home is installed as a service ([#4213]).\n\n### Changed\n\n- On OpenBSD, the daemon script now uses the recommended `/bin/ksh` shell instead of the `/bin/sh` one ([#4533]).  To apply this change, backup your data and run `AdGuardHome -s uninstall && AdGuardHome -s install`.\n\n- The default DNS-over-QUIC port number is now `853` instead of `754` in accordance with [RFC 9250][rfc-9250] ([#4276]).\n\n- Reverse DNS now has a greater priority as the source of runtime clients’ information than ARP neighborhood.\n\n- Improved detection of runtime clients through more resilient ARP processing ([#3597]).\n\n- The TTL of responses served from the optimistic cache is now lowered to 10 seconds.\n\n- Domain-specific private reverse DNS upstream servers are now validated to allow only `*.in-addr.arpa` and `*.ip6.arpa` domains pointing to locally-served networks ([#3381]).\n\n    **NOTE:**  If you already have invalid entries in your configuration, consider removing them manually, since they essentially had no effect.\n\n- Response filtering is now performed using the record types of the answer section of messages as opposed to the type of the question ([#4238]).\n\n- Instead of adding the build time information, the build scripts now use the standardized environment variable [`SOURCE_DATE_EPOCH`][repr] to add the date of the commit from which the binary was built ([#4221]).  This should simplify reproducible builds for package maintainers and those who compile their own AdGuard Home.\n\n- The property `local_domain_name` is now in the `dhcp` object in the configuration file to avoid confusion ([#3367]).\n\n- The `dns.bogus_nxdomain` property in the configuration file now supports CIDR notation alongside IP addresses ([#1730]).\n\n#### Configuration changes\n\nIn this release, the schema version has changed from 12 to 14.\n\n- Object `clients`, which in schema versions 13 and earlier was an array of actual persistent clients, is now consist of `persistent` and `runtime_sources` properties:\n\n    ```yaml\n    # BEFORE:\n    'clients':\n    - name: client-name\n      # …\n\n    # AFTER:\n    'clients':\n      'persistent':\n        - name: client-name\n          # …\n      'runtime_sources':\n        whois: true\n        arp: true\n        rdns: true\n        dhcp: true\n        hosts: true\n    ```\n\n    The value for `clients.runtime_sources.rdns` property is taken from `dns.resolve_clients` property.  To rollback this change, remove the `runtime_sources` property, move the contents of `persistent` into the `clients` itself, the value of `clients.runtime_sources.rdns` into the `dns.resolve_clients`, and change the `schema_version` back to `13`.\n\n- Property `local_domain_name`, which in schema versions 12 and earlier used to be a part of the `dns` object, is now a part of the `dhcp` object:\n\n    ```yaml\n    # BEFORE:\n    'dns':\n      # …\n      'local_domain_name': 'lan'\n\n    # AFTER:\n    'dhcp':\n      # …\n      'local_domain_name': 'lan'\n    ```\n\n    To rollback this change, move the property back into the `dns` object and change the `schema_version` back to `12`.\n\n### Deprecated\n\n- The `--no-etc-hosts` option.  Its functionality is now controlled by `clients.runtime_sources.hosts` configuration property.  v0.109.0 will remove the flag completely.\n\n### Fixed\n\n- Query log occasionally going into an infinite loop ([#4591]).\n\n- Service startup on boot on systems using SysV-init ([#4480]).\n\n- Detection of the stopped service status on macOS and Linux ([#4273]).\n\n- Case-sensitive ClientID ([#4542]).\n\n- Slow version update queries making other HTTP APIs unresponsive ([#4499]).\n\n- ARP tables refreshing process causing excessive PTR requests ([#3157]).\n\n[#1730]: https://github.com/AdguardTeam/AdGuardHome/issues/1730\n[#3020]: https://github.com/AdguardTeam/AdGuardHome/issues/3020\n[#3142]: https://github.com/AdguardTeam/AdGuardHome/issues/3142\n[#3157]: https://github.com/AdguardTeam/AdGuardHome/issues/3157\n[#3367]: https://github.com/AdguardTeam/AdGuardHome/issues/3367\n[#3381]: https://github.com/AdguardTeam/AdGuardHome/issues/3381\n[#3503]: https://github.com/AdguardTeam/AdGuardHome/issues/3503\n[#3597]: https://github.com/AdguardTeam/AdGuardHome/issues/3597\n[#3978]: https://github.com/AdguardTeam/AdGuardHome/issues/3978\n[#4166]: https://github.com/AdguardTeam/AdGuardHome/issues/4166\n[#4213]: https://github.com/AdguardTeam/AdGuardHome/issues/4213\n[#4221]: https://github.com/AdguardTeam/AdGuardHome/issues/4221\n[#4238]: https://github.com/AdguardTeam/AdGuardHome/issues/4238\n[#4273]: https://github.com/AdguardTeam/AdGuardHome/issues/4273\n[#4276]: https://github.com/AdguardTeam/AdGuardHome/issues/4276\n[#4480]: https://github.com/AdguardTeam/AdGuardHome/issues/4480\n[#4499]: https://github.com/AdguardTeam/AdGuardHome/issues/4499\n[#4503]: https://github.com/AdguardTeam/AdGuardHome/issues/4503\n[#4533]: https://github.com/AdguardTeam/AdGuardHome/issues/4533\n[#4542]: https://github.com/AdguardTeam/AdGuardHome/issues/4542\n[#4591]: https://github.com/AdguardTeam/AdGuardHome/issues/4591\n[#4592]: https://github.com/AdguardTeam/AdGuardHome/issues/4592\n\n[CVE-2022-29526]: https://www.cvedetails.com/cve/CVE-2022-29526\n[CVE-2022-29804]: https://www.cvedetails.com/cve/CVE-2022-29804\n[CVE-2022-30580]: https://www.cvedetails.com/cve/CVE-2022-30580\n[CVE-2022-30629]: https://www.cvedetails.com/cve/CVE-2022-30629\n[CVE-2022-30634]: https://www.cvedetails.com/cve/CVE-2022-30634\n[ms-v0.107.7]:    https://github.com/AdguardTeam/AdGuardHome/milestone/43?closed=1\n[rfc-9250]:       https://datatracker.ietf.org/doc/html/rfc9250\n\n## [v0.107.6] - 2022-04-13\n\nSee also the [v0.107.6 GitHub milestone][ms-v0.107.6].\n\n### Security\n\n- `User-Agent` HTTP header removed from outgoing DNS-over-HTTPS requests.\n\n- Go version has been updated to prevent the possibility of exploiting the [CVE-2022-24675], [CVE-2022-27536], and [CVE-2022-28327] Go vulnerabilities.\n\n### Added\n\n- Support for SVCB/HTTPS parameter `dohpath` in filtering rules with the `dnsrewrite` modifier according to the [RFC draft][dns-draft-02] ([#4463]).\n\n### Changed\n\n- Filtering rules with the `dnsrewrite` modifier that create SVCB or HTTPS responses should use `ech` instead of `echconfig` to conform with the [latest drafts][svcb-draft-08].\n\n### Deprecated\n\n- SVCB/HTTPS parameter name `echconfig` in filtering rules with the `dnsrewrite` modifier.  Use `ech` instead.  v0.109.0 will remove support for the outdated name `echconfig`.\n\n- Obsolete `--no-mem-optimization` option ([#4437]).  v0.109.0 will remove the flag completely.\n\n### Fixed\n\n- I/O timeout errors when checking for the presence of another DHCP server.\n\n- Network interfaces being incorrectly labeled as down during installation.\n\n- Rules for blocking the QQ service ([#3717]).\n\n### Removed\n\n- Go 1.16 support, since that branch of the Go compiler has reached end of life and doesn’t receive security updates anymore.\n\n[#3717]: https://github.com/AdguardTeam/AdGuardHome/issues/3717\n[#4437]: https://github.com/AdguardTeam/AdGuardHome/issues/4437\n[#4463]: https://github.com/AdguardTeam/AdGuardHome/issues/4463\n\n[CVE-2022-24675]: https://www.cvedetails.com/cve/CVE-2022-24675\n[CVE-2022-27536]: https://www.cvedetails.com/cve/CVE-2022-27536\n[CVE-2022-28327]: https://www.cvedetails.com/cve/CVE-2022-28327\n[dns-draft-02]:   https://datatracker.ietf.org/doc/html/draft-ietf-add-svcb-dns-02#section-5.1\n[ms-v0.107.6]:    https://github.com/AdguardTeam/AdGuardHome/milestone/42?closed=1\n[repr]:           https://reproducible-builds.org/docs/source-date-epoch/\n[svcb-draft-08]:  https://www.ietf.org/archive/id/draft-ietf-dnsop-svcb-https-08.html\n\n## [v0.107.5] - 2022-03-04\n\nThis is a security update.  There is no GitHub milestone, since no GitHub issues were resolved.\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the [CVE-2022-24921] Go vulnerability.\n\n[CVE-2022-24921]: https://www.cvedetails.com/cve/CVE-2022-24921\n\n## [v0.107.4] - 2022-03-01\n\nSee also the [v0.107.4 GitHub milestone][ms-v0.107.4].\n\n### Security\n\n- Go version has been updated to prevent the possibility of exploiting the [CVE-2022-23806], [CVE-2022-23772], and [CVE-2022-23773] Go vulnerabilities.\n\n### Fixed\n\n- Optimistic cache now responds with expired items even if those can’t be resolved again ([#4254]).\n\n- Unnecessarily complex hosts-related logic leading to infinite recursion in some cases ([#4216]).\n\n[#4216]: https://github.com/AdguardTeam/AdGuardHome/issues/4216\n[#4254]: https://github.com/AdguardTeam/AdGuardHome/issues/4254\n\n[CVE-2022-23772]: https://www.cvedetails.com/cve/CVE-2022-23772\n[CVE-2022-23773]: https://www.cvedetails.com/cve/CVE-2022-23773\n[CVE-2022-23806]: https://www.cvedetails.com/cve/CVE-2022-23806\n[ms-v0.107.4]:    https://github.com/AdguardTeam/AdGuardHome/milestone/41?closed=1\n\n## [v0.107.3] - 2022-01-25\n\nSee also the [v0.107.3 GitHub milestone][ms-v0.107.3].\n\n### Added\n\n- Support for a `dnsrewrite` modifier with an empty `NOERROR` response ([#4133]).\n\n### Fixed\n\n- Wrong set of ports checked for duplicates during the initial setup ([#4095]).\n\n- Incorrectly invalidated service domains ([#4120]).\n\n- Poor testing of domain-specific upstream servers ([#4074]).\n\n- Omitted aliases of hosts specified by another line within the OS’s hosts file ([#4079]).\n\n[#4074]: https://github.com/AdguardTeam/AdGuardHome/issues/4074\n[#4079]: https://github.com/AdguardTeam/AdGuardHome/issues/4079\n[#4095]: https://github.com/AdguardTeam/AdGuardHome/issues/4095\n[#4120]: https://github.com/AdguardTeam/AdGuardHome/issues/4120\n[#4133]: https://github.com/AdguardTeam/AdGuardHome/issues/4133\n\n[ms-v0.107.3]: https://github.com/AdguardTeam/AdGuardHome/milestone/40?closed=1\n\n## [v0.107.2] - 2021-12-29\n\nSee also the [v0.107.2 GitHub milestone][ms-v0.107.2].\n\n### Fixed\n\n- Infinite loops when TCP connections time out ([#4042]).\n\n[#4042]: https://github.com/AdguardTeam/AdGuardHome/issues/4042\n\n[ms-v0.107.2]: https://github.com/AdguardTeam/AdGuardHome/milestone/38?closed=1\n\n## [v0.107.1] - 2021-12-29\n\nSee also the [v0.107.1 GitHub milestone][ms-v0.107.1].\n\n### Changed\n\n- The validation error message for duplicated allow- and blocklists in DNS settings now shows the duplicated elements ([#3975]).\n\n### Fixed\n\n- `ipset` initialization bugs ([#4027]).\n\n- Legacy DNS rewrites from a wildcard pattern to a subdomain ([#4016]).\n\n- Service not being stopped before running the `uninstall` service action ([#3868]).\n\n- Broken `reload` service action on FreeBSD.\n\n- Legacy DNS rewrites responding from upstream when a request other than `A` or `AAAA` is received ([#4008]).\n\n- Panic on port availability check during installation ([#3987]).\n\n- Incorrect application of rules from the OS’s hosts files ([#3998]).\n\n[#3868]: https://github.com/AdguardTeam/AdGuardHome/issues/3868\n[#3975]: https://github.com/AdguardTeam/AdGuardHome/issues/3975\n[#3987]: https://github.com/AdguardTeam/AdGuardHome/issues/3987\n[#3998]: https://github.com/AdguardTeam/AdGuardHome/issues/3998\n[#4008]: https://github.com/AdguardTeam/AdGuardHome/issues/4008\n[#4016]: https://github.com/AdguardTeam/AdGuardHome/issues/4016\n[#4027]: https://github.com/AdguardTeam/AdGuardHome/issues/4027\n\n[ms-v0.107.1]: https://github.com/AdguardTeam/AdGuardHome/milestone/37?closed=1\n\n## [v0.107.0] - 2021-12-21\n\nSee also the [v0.107.0 GitHub milestone][ms-v0.107.0].\n\n### Added\n\n- Upstream server information for responses from cache ([#3772]).  Note that old log entries concerning cached responses won’t include that information.\n\n- Finnish and Ukrainian localizations.\n\n- Setting the timeout for IP address pinging in the \"Fastest IP address\" mode through the new `fastest_timeout` property in the configuration file ([#1992]).\n\n- Static IP address detection on FreeBSD ([#3289]).\n\n- Optimistic cache ([#2145]).\n\n- New possible value of `6h` for `querylog_interval` property ([#2504]).\n\n- Blocking access using ClientIDs ([#2624], [#3162]).\n\n- `source` directives support in `/etc/network/interfaces` on Linux ([#3257]).\n\n- [RFC 9000][rfc-9000] support in QUIC.\n\n- Completely disabling statistics by setting the statistics interval to zero ([#2141]).\n\n- The ability to completely purge DHCP leases ([#1691]).\n\n- Settable timeouts for querying the upstream servers ([#2280]).\n\n- Configuration file properties to change group and user ID on startup on Unix ([#2763]).\n\n- Experimental OpenBSD support for AMD64 and 64-bit ARM CPUs ([#2439], [#3225], [#3226]).\n\n- Support for custom port in DNS-over-HTTPS profiles for Apple’s devices ([#3172]).\n\n- `darwin/arm64` support ([#2443]).\n\n- `freebsd/arm64` support ([#2441]).\n\n- Output of the default addresses of the upstreams used for resolving PTRs for private addresses ([#3136]).\n\n- Detection and handling of recurrent PTR requests for locally-served addresses ([#3185]).\n\n- The ability to completely disable reverse DNS resolving of IPs from locally-served networks ([#3184]).\n\n- New flag `--local-frontend` to serve dynamically changeable frontend files from disk as opposed to the ones that were compiled into the binary.\n\n### Changed\n\n- Port bindings are now checked for uniqueness ([#3835]).\n\n- The DNSSEC check now simply checks against the AD flag in the response ([#3904]).\n\n- Client objects in the configuration file are now sorted ([#3933]).\n\n- Responses from cache are now labeled ([#3772]).\n\n- Better error message for ED25519 private keys, which are not widely supported ([#3737]).\n\n- Cache now follows RFC more closely for negative answers ([#3707]).\n\n- `dnsrewrite` rules and other DNS rewrites will now be applied even when the protection is disabled ([#1558]).\n\n- DHCP gateway address, subnet mask, IP address range, and leases validations ([#3529]).\n\n- The `systemd` service script will now create the `/var/log` directory when it doesn’t exist ([#3579]).\n\n- Items in allowed clients, disallowed clients, and blocked hosts lists are now required to be unique ([#3419]).\n\n- The TLS private key previously saved as a string isn’t shown in API responses anymore ([#1898]).\n\n- Better OpenWrt detection ([#3435]).\n\n- DNS-over-HTTPS queries that come from HTTP proxies in the `trusted_proxies` list now use the real IP address of the client instead of the address of the proxy ([#2799]).\n\n- Clients who are blocked by access settings now receive a `REFUSED` response when a protocol other than DNS-over-UDP and DNSCrypt is used.\n\n- `dns.querylog_interval` property is now formatted in hours.\n\n- Query log search now supports internationalized domains ([#3012]).\n\n- Internationalized domains are now shown decoded in the query log with the original encoded version shown in request details ([#3013]).\n\n- When `/etc/hosts`-type rules have several IPs for one host, all IPs are now returned instead of only the first one ([#1381]).\n\n- Property `rlimit_nofile` is now in the `os` object of the configuration file, together with the new `group` and `user` properties ([#2763]).\n\n- Permissions on filter files are now `0o644` instead of `0o600` ([#3198]).\n\n#### Configuration changes\n\nIn this release, the schema version has changed from 10 to 12.\n\n- Property `dns.querylog_interval`, which in schema versions 11 and earlier used to be an integer number of days, is now a string with a human-readable duration:\n\n    ```yaml\n    # BEFORE:\n    'dns':\n      # …\n      'querylog_interval': 90\n\n    # AFTER:\n    'dns':\n      # …\n      'querylog_interval': '2160h'\n    ```\n\n    To rollback this change, convert the property back into days and change the `schema_version` back to `11`.\n\n- Property `rlimit_nofile`, which in schema versions 10 and earlier used to be on the top level, is now moved to the new `os` object:\n\n    ```yaml\n    # BEFORE:\n    'rlimit_nofile': 42\n\n    # AFTER:\n    'os':\n      'group': ''\n      'rlimit_nofile': 42\n      'user': ''\n    ```\n\n    To rollback this change, move the property on the top level and change the `schema_version` back to `10`.\n\n### Deprecated\n\n- Go 1.16 support.  v0.108.0 will require at least Go 1.17 to build.\n\n### Fixed\n\n- EDNS0 TCP keepalive option handling ([#3778]).\n\n- Rules with the `denyallow` modifier applying to IP addresses when they shouldn’t ([#3175]).\n\n- The length of the EDNS0 client subnet option appearing too long for some upstream servers ([#3887]).\n\n- Invalid redirection to the HTTPS web interface after saving enabled encryption settings ([#3558]).\n\n- Incomplete propagation of the client’s IP anonymization setting to the statistics ([#3890]).\n\n- Incorrect results with the `dnsrewrite` modifier for entries from the operating system’s hosts file ([#3815]).\n\n- Matching against rules with `|` at the end of the domain name ([#3371]).\n\n- Incorrect assignment of explicitly configured DHCP options ([#3744]).\n\n- Occasional panic during shutdown ([#3655]).\n\n- Addition of IPs into only one as opposed to all matching ipsets on Linux ([#3638]).\n\n- Removal of temporary filter files ([#3567]).\n\n- Panic when an upstream server responds with an empty question section ([#3551]).\n\n- 9GAG blocking ([#3564]).\n\n- DHCP now follows RFCs more closely when it comes to response sending and option selection ([#3443], [#3538]).\n\n- Occasional panics when reading old statistics databases ([#3506]).\n\n- `reload` service action on macOS and FreeBSD ([#3457]).\n\n- Inaccurate using of service actions in the installation script ([#3450]).\n\n- ClientID checking ([#3437]).\n\n- Discovering other DHCP servers on `darwin` and `freebsd` ([#3417]).\n\n- Switching listening address to unspecified one when bound to a single specified IPv4 address on Darwin (macOS) ([#2807]).\n\n- Incomplete HTTP response for static IP address.\n\n- DNSCrypt queries weren’t appearing in query log ([#3372]).\n\n- Wrong IP address for proxied DNS-over-HTTPS queries ([#2799]).\n\n- Domain name letter case mismatches in DNS rewrites ([#3351]).\n\n- Conflicts between IPv4 and IPv6 DNS rewrites ([#3343]).\n\n- Letter case mismatches in `CNAME` filtering ([#3335]).\n\n- Occasional breakages on network errors with DNS-over-HTTP upstreams ([#3217]).\n\n- Errors when setting static IP on Linux ([#3257]).\n\n- Treatment of domain names and FQDNs in custom rules with the `dnsrewrite` modifier that use the `PTR` type ([#3256]).\n\n- Redundant hostname generating while loading static leases with empty hostname ([#3166]).\n\n- Domain name case in responses ([#3194]).\n\n- Custom upstreams selection for clients with ClientIDs in DNS-over-TLS and DNS-over-HTTP ([#3186]).\n\n- Incorrect client-based filtering applying logic ([#2875]).\n\n### Removed\n\n- Go 1.15 support.\n\n[#1381]: https://github.com/AdguardTeam/AdGuardHome/issues/1381\n[#1558]: https://github.com/AdguardTeam/AdGuardHome/issues/1558\n[#1691]: https://github.com/AdguardTeam/AdGuardHome/issues/1691\n[#1898]: https://github.com/AdguardTeam/AdGuardHome/issues/1898\n[#1992]: https://github.com/AdguardTeam/AdGuardHome/issues/1992\n[#2141]: https://github.com/AdguardTeam/AdGuardHome/issues/2141\n[#2145]: https://github.com/AdguardTeam/AdGuardHome/issues/2145\n[#2280]: https://github.com/AdguardTeam/AdGuardHome/issues/2280\n[#2439]: https://github.com/AdguardTeam/AdGuardHome/issues/2439\n[#2441]: https://github.com/AdguardTeam/AdGuardHome/issues/2441\n[#2443]: https://github.com/AdguardTeam/AdGuardHome/issues/2443\n[#2504]: https://github.com/AdguardTeam/AdGuardHome/issues/2504\n[#2624]: https://github.com/AdguardTeam/AdGuardHome/issues/2624\n[#2763]: https://github.com/AdguardTeam/AdGuardHome/issues/2763\n[#2799]: https://github.com/AdguardTeam/AdGuardHome/issues/2799\n[#2807]: https://github.com/AdguardTeam/AdGuardHome/issues/2807\n[#3012]: https://github.com/AdguardTeam/AdGuardHome/issues/3012\n[#3013]: https://github.com/AdguardTeam/AdGuardHome/issues/3013\n[#3136]: https://github.com/AdguardTeam/AdGuardHome/issues/3136\n[#3162]: https://github.com/AdguardTeam/AdGuardHome/issues/3162\n[#3166]: https://github.com/AdguardTeam/AdGuardHome/issues/3166\n[#3172]: https://github.com/AdguardTeam/AdGuardHome/issues/3172\n[#3175]: https://github.com/AdguardTeam/AdGuardHome/issues/3175\n[#3184]: https://github.com/AdguardTeam/AdGuardHome/issues/3184\n[#3185]: https://github.com/AdguardTeam/AdGuardHome/issues/3185\n[#3186]: https://github.com/AdguardTeam/AdGuardHome/issues/3186\n[#3194]: https://github.com/AdguardTeam/AdGuardHome/issues/3194\n[#3198]: https://github.com/AdguardTeam/AdGuardHome/issues/3198\n[#3217]: https://github.com/AdguardTeam/AdGuardHome/issues/3217\n[#3225]: https://github.com/AdguardTeam/AdGuardHome/issues/3225\n[#3226]: https://github.com/AdguardTeam/AdGuardHome/issues/3226\n[#3256]: https://github.com/AdguardTeam/AdGuardHome/issues/3256\n[#3257]: https://github.com/AdguardTeam/AdGuardHome/issues/3257\n[#3289]: https://github.com/AdguardTeam/AdGuardHome/issues/3289\n[#3335]: https://github.com/AdguardTeam/AdGuardHome/issues/3335\n[#3343]: https://github.com/AdguardTeam/AdGuardHome/issues/3343\n[#3351]: https://github.com/AdguardTeam/AdGuardHome/issues/3351\n[#3371]: https://github.com/AdguardTeam/AdGuardHome/issues/3371\n[#3372]: https://github.com/AdguardTeam/AdGuardHome/issues/3372\n[#3417]: https://github.com/AdguardTeam/AdGuardHome/issues/3417\n[#3419]: https://github.com/AdguardTeam/AdGuardHome/issues/3419\n[#3435]: https://github.com/AdguardTeam/AdGuardHome/issues/3435\n[#3437]: https://github.com/AdguardTeam/AdGuardHome/issues/3437\n[#3443]: https://github.com/AdguardTeam/AdGuardHome/issues/3443\n[#3450]: https://github.com/AdguardTeam/AdGuardHome/issues/3450\n[#3457]: https://github.com/AdguardTeam/AdGuardHome/issues/3457\n[#3506]: https://github.com/AdguardTeam/AdGuardHome/issues/3506\n[#3529]: https://github.com/AdguardTeam/AdGuardHome/issues/3529\n[#3538]: https://github.com/AdguardTeam/AdGuardHome/issues/3538\n[#3551]: https://github.com/AdguardTeam/AdGuardHome/issues/3551\n[#3558]: https://github.com/AdguardTeam/AdGuardHome/issues/3558\n[#3564]: https://github.com/AdguardTeam/AdGuardHome/issues/3564\n[#3567]: https://github.com/AdguardTeam/AdGuardHome/issues/3567\n[#3579]: https://github.com/AdguardTeam/AdGuardHome/issues/3579\n[#3638]: https://github.com/AdguardTeam/AdGuardHome/issues/3638\n[#3655]: https://github.com/AdguardTeam/AdGuardHome/issues/3655\n[#3707]: https://github.com/AdguardTeam/AdGuardHome/issues/3707\n[#3737]: https://github.com/AdguardTeam/AdGuardHome/issues/3737\n[#3744]: https://github.com/AdguardTeam/AdGuardHome/issues/3744\n[#3772]: https://github.com/AdguardTeam/AdGuardHome/issues/3772\n[#3778]: https://github.com/AdguardTeam/AdGuardHome/issues/3778\n[#3815]: https://github.com/AdguardTeam/AdGuardHome/issues/3815\n[#3835]: https://github.com/AdguardTeam/AdGuardHome/issues/3835\n[#3887]: https://github.com/AdguardTeam/AdGuardHome/issues/3887\n[#3890]: https://github.com/AdguardTeam/AdGuardHome/issues/3890\n[#3904]: https://github.com/AdguardTeam/AdGuardHome/issues/3904\n[#3933]: https://github.com/AdguardTeam/AdGuardHome/pull/3933\n\n[ms-v0.107.0]: https://github.com/AdguardTeam/AdGuardHome/milestone/23?closed=1\n[rfc-9000]:    https://datatracker.ietf.org/doc/html/rfc9000\n\n## [v0.106.3] - 2021-05-19\n\nSee also the [v0.106.3 GitHub milestone][ms-v0.106.3].\n\n### Added\n\n- Support for reinstall (`-r`) and uninstall (`-u`) flags in the installation script ([#2462]).\n\n- Support for DHCP `DECLINE` and `RELEASE` message types ([#3053]).\n\n### Changed\n\n- Add microseconds to log output.\n\n### Fixed\n\n- Intermittent \"Warning: ID mismatch\" errors ([#3087]).\n\n- Error when using installation script on some ARMv7 devices ([#2542]).\n\n- DHCP leases validation ([#3107], [#3127]).\n\n- Local PTR request recursion in Docker containers ([#3064]).\n\n- Ignoring client-specific filtering settings when filtering is disabled in general settings ([#2875]).\n\n- Disallowed domains are now case-insensitive ([#3115]).\n\n[#2462]: https://github.com/AdguardTeam/AdGuardHome/issues/2462\n[#2542]: https://github.com/AdguardTeam/AdGuardHome/issues/2542\n[#2875]: https://github.com/AdguardTeam/AdGuardHome/issues/2875\n[#3053]: https://github.com/AdguardTeam/AdGuardHome/issues/3053\n[#3064]: https://github.com/AdguardTeam/AdGuardHome/issues/3064\n[#3107]: https://github.com/AdguardTeam/AdGuardHome/issues/3107\n[#3115]: https://github.com/AdguardTeam/AdGuardHome/issues/3115\n[#3127]: https://github.com/AdguardTeam/AdGuardHome/issues/3127\n\n[ms-v0.106.3]: https://github.com/AdguardTeam/AdGuardHome/milestone/35?closed=1\n\n## [v0.106.2] - 2021-05-06\n\nSee also the [v0.106.2 GitHub milestone][ms-v0.106.2].\n\n### Fixed\n\n- Uniqueness validation for dynamic DHCP leases ([#3056]).\n\n[#3056]: https://github.com/AdguardTeam/AdGuardHome/issues/3056\n\n[ms-v0.106.2]: https://github.com/AdguardTeam/AdGuardHome/milestone/34?closed=1\n\n## [v0.106.1] - 2021-04-30\n\nSee also the [v0.106.1 GitHub milestone][ms-v0.106.1].\n\n### Fixed\n\n- Local domain name handling when the DHCP server is disabled ([#3028]).\n\n- Normalization of previously-saved invalid static DHCP leases ([#3027]).\n\n- Validation of IPv6 addresses with zones in system resolvers ([#3022]).\n\n[#3022]: https://github.com/AdguardTeam/AdGuardHome/issues/3022\n[#3027]: https://github.com/AdguardTeam/AdGuardHome/issues/3027\n[#3028]: https://github.com/AdguardTeam/AdGuardHome/issues/3028\n\n[ms-v0.106.1]: https://github.com/AdguardTeam/AdGuardHome/milestone/33?closed=1\n\n## [v0.106.0] - 2021-04-28\n\nSee also the [v0.106.0 GitHub milestone][ms-v0.106.0].\n\n### Added\n\n- The ability to block user for login after configurable number of unsuccessful attempts for configurable time ([#2826]).\n\n- `denyallow` modifier for filters ([#2923]).\n\n- Hostname uniqueness validation in the DHCP server ([#2952]).\n\n- Hostname generating for DHCP clients which don’t provide their own ([#2723]).\n\n- New flag `--no-etc-hosts` to disable client domain name lookups in the operating system’s `/etc/hosts` files ([#1947]).\n\n- The ability to set up custom upstreams to resolve PTR queries for local addresses and to disable the automatic resolving of clients’ addresses ([#2704]).\n\n- Logging of the client’s IP address after failed login attempts ([#2824]).\n\n- Search by clients’ names in the query log ([#1273]).\n\n- Verbose version output with `-v --version` ([#2416]).\n\n- The ability to set a custom TLD or domain name for known hosts in the local network ([#2393], [#2961]).\n\n- The ability to serve DNS queries on multiple hosts and interfaces ([#1401]).\n\n- `ips` and `text` DHCP server options ([#2385]).\n\n- `SRV` records support in filtering rules with the `dnsrewrite` modifier ([#2533]).\n\n### Changed\n\n- Our DoQ implementation is now updated to conform to the latest standard [draft][doq-draft-02] ([#2843]).\n\n- Quality of logging ([#2954]).\n\n- Normalization of hostnames sent by DHCP clients ([#2945], [#2952]).\n\n- The access to the private hosts is now forbidden for users from external networks ([#2889]).\n\n- The reverse lookup for local addresses is now performed via local resolvers ([#2704]).\n\n- Stricter validation of the IP addresses of static leases in the DHCP server with regards to the netmask ([#2838]).\n\n- Stricter validation of `dnsrewrite` filtering rule modifier parameters ([#2498]).\n\n- New, more correct versioning scheme ([#2412]).\n\n### Deprecated\n\n- Go 1.15 support.  v0.107.0 will require at least Go 1.16 to build.\n\n### Fixed\n\n- Multiple answers for a `dnsrewrite` rule matching requests with repeating patterns in it ([#2981]).\n\n- Root server resolving when custom upstreams for hosts are specified ([#2994]).\n\n- Inconsistent resolving of DHCP clients when the DHCP server is disabled ([#2934]).\n\n- Comment handling in clients’ custom upstreams ([#2947]).\n\n- Overwriting of DHCPv4 options when using the HTTP API ([#2927]).\n\n- Assumption that MAC addresses always have the length of 6 octets ([#2828]).\n\n- Support for more than one `/24` subnet in DHCP ([#2541]).\n\n- Invalid filenames in the `mobileconfig` API responses ([#2835]).\n\n### Removed\n\n- Go 1.14 support.\n\n[#1273]: https://github.com/AdguardTeam/AdGuardHome/issues/1273\n[#1401]: https://github.com/AdguardTeam/AdGuardHome/issues/1401\n[#1947]: https://github.com/AdguardTeam/AdGuardHome/issues/1947\n[#2385]: https://github.com/AdguardTeam/AdGuardHome/issues/2385\n[#2393]: https://github.com/AdguardTeam/AdGuardHome/issues/2393\n[#2412]: https://github.com/AdguardTeam/AdGuardHome/issues/2412\n[#2416]: https://github.com/AdguardTeam/AdGuardHome/issues/2416\n[#2498]: https://github.com/AdguardTeam/AdGuardHome/issues/2498\n[#2533]: https://github.com/AdguardTeam/AdGuardHome/issues/2533\n[#2541]: https://github.com/AdguardTeam/AdGuardHome/issues/2541\n[#2704]: https://github.com/AdguardTeam/AdGuardHome/issues/2704\n[#2723]: https://github.com/AdguardTeam/AdGuardHome/issues/2723\n[#2824]: https://github.com/AdguardTeam/AdGuardHome/issues/2824\n[#2826]: https://github.com/AdguardTeam/AdGuardHome/issues/2826\n[#2828]: https://github.com/AdguardTeam/AdGuardHome/issues/2828\n[#2835]: https://github.com/AdguardTeam/AdGuardHome/issues/2835\n[#2838]: https://github.com/AdguardTeam/AdGuardHome/issues/2838\n[#2843]: https://github.com/AdguardTeam/AdGuardHome/issues/2843\n[#2889]: https://github.com/AdguardTeam/AdGuardHome/issues/2889\n[#2923]: https://github.com/AdguardTeam/AdGuardHome/issues/2923\n[#2927]: https://github.com/AdguardTeam/AdGuardHome/issues/2927\n[#2934]: https://github.com/AdguardTeam/AdGuardHome/issues/2934\n[#2945]: https://github.com/AdguardTeam/AdGuardHome/issues/2945\n[#2947]: https://github.com/AdguardTeam/AdGuardHome/issues/2947\n[#2952]: https://github.com/AdguardTeam/AdGuardHome/issues/2952\n[#2954]: https://github.com/AdguardTeam/AdGuardHome/issues/2954\n[#2961]: https://github.com/AdguardTeam/AdGuardHome/issues/2961\n[#2981]: https://github.com/AdguardTeam/AdGuardHome/issues/2981\n[#2994]: https://github.com/AdguardTeam/AdGuardHome/issues/2994\n\n[doq-draft-02]: https://tools.ietf.org/html/draft-ietf-dprive-dnsoquic-02\n[ms-v0.106.0]:  https://github.com/AdguardTeam/AdGuardHome/milestone/26?closed=1\n\n## [v0.105.2] - 2021-03-10\n\n### Security\n\n- Session token doesn’t contain user’s information anymore ([#2470]).\n\nSee also the [v0.105.2 GitHub milestone][ms-v0.105.2].\n\n### Fixed\n\n- Incomplete hostnames with trailing zero-bytes handling ([#2582]).\n\n- Wrong DNS-over-TLS ALPN configuration ([#2681]).\n\n- Inconsistent responses for messages with EDNS0 and AD when DNS caching is enabled ([#2600]).\n\n- Incomplete OpenWrt detection ([#2757]).\n\n- DHCP lease’s `expired` property incorrect time format ([#2692]).\n\n- Incomplete DNS upstreams validation ([#2674]).\n\n- Wrong parsing of DHCP options of the `ip` type ([#2688]).\n\n[#2470]: https://github.com/AdguardTeam/AdGuardHome/issues/2470\n[#2582]: https://github.com/AdguardTeam/AdGuardHome/issues/2582\n[#2600]: https://github.com/AdguardTeam/AdGuardHome/issues/2600\n[#2674]: https://github.com/AdguardTeam/AdGuardHome/issues/2674\n[#2681]: https://github.com/AdguardTeam/AdGuardHome/issues/2681\n[#2688]: https://github.com/AdguardTeam/AdGuardHome/issues/2688\n[#2692]: https://github.com/AdguardTeam/AdGuardHome/issues/2692\n[#2757]: https://github.com/AdguardTeam/AdGuardHome/issues/2757\n\n[ms-v0.105.2]: https://github.com/AdguardTeam/AdGuardHome/milestone/32?closed=1\n\n## [v0.105.1] - 2021-02-15\n\nSee also the [v0.105.1 GitHub milestone][ms-v0.105.1].\n\n### Changed\n\n- Increased HTTP API timeouts ([#2671], [#2682]).\n\n- \"Permission denied\" errors when checking if the machine has a static IP no longer prevent the DHCP server from starting ([#2667]).\n\n- The server name sent by clients of TLS APIs is not only checked when `strict_sni_check` is enabled ([#2664]).\n\n- HTTP API request body size limit for the `POST /control/access/set` and `POST /control/filtering/set_rules` HTTP APIs is increased ([#2666], [#2675]).\n\n### Fixed\n\n- Error when enabling the DHCP server when AdGuard Home couldn’t determine if the machine has a static IP.\n\n- Optical issue on custom rules ([#2641]).\n\n- Occasional crashes during startup.\n\n- The property `\"range_start\"` in the `GET /control/dhcp/status` HTTP API response is now correctly named again ([#2678]).\n\n- DHCPv6 server’s `ra_slaac_only` and `ra_allow_slaac` properties aren’t reset to `false` on update anymore ([#2653]).\n\n- The `Vary` header is now added along with `Access-Control-Allow-Origin` to prevent cache-related and other issues in browsers ([#2658]).\n\n- The request body size limit is now set for HTTPS requests as well.\n\n- Incorrect version tag in the Docker release ([#2663]).\n\n- DNSCrypt queries weren’t marked as such in logs ([#2662]).\n\n[#2641]: https://github.com/AdguardTeam/AdGuardHome/issues/2641\n[#2653]: https://github.com/AdguardTeam/AdGuardHome/issues/2653\n[#2658]: https://github.com/AdguardTeam/AdGuardHome/issues/2658\n[#2662]: https://github.com/AdguardTeam/AdGuardHome/issues/2662\n[#2663]: https://github.com/AdguardTeam/AdGuardHome/issues/2663\n[#2664]: https://github.com/AdguardTeam/AdGuardHome/issues/2664\n[#2666]: https://github.com/AdguardTeam/AdGuardHome/issues/2666\n[#2667]: https://github.com/AdguardTeam/AdGuardHome/issues/2667\n[#2671]: https://github.com/AdguardTeam/AdGuardHome/issues/2671\n[#2675]: https://github.com/AdguardTeam/AdGuardHome/issues/2675\n[#2678]: https://github.com/AdguardTeam/AdGuardHome/issues/2678\n[#2682]: https://github.com/AdguardTeam/AdGuardHome/issues/2682\n\n[ms-v0.105.1]: https://github.com/AdguardTeam/AdGuardHome/milestone/31?closed=1\n\n## [v0.105.0] - 2021-02-10\n\nSee also the [v0.105.0 GitHub milestone][ms-v0.105.0].\n\n### Added\n\n- Added more services to the \"Blocked services\" list ([#2224], [#2401]).\n\n- `ipset` subdomain matching, just like `dnsmasq` does ([#2179]).\n\n- ClientID support for DNS-over-HTTPS, DNS-over-QUIC, and DNS-over-TLS ([#1383]).\n\n- The new `dnsrewrite` modifier for filters ([#2102]).\n\n- The host checking API and the query logs API can now return multiple matched rules ([#2102]).\n\n- Detecting of network interface configured to have static IP address via `/etc/network/interfaces` ([#2302]).\n\n- DNSCrypt protocol support ([#1361]).\n\n- A 5 second wait period until a DHCP server’s network interface gets an IP address ([#2304]).\n\n- `dnstype` modifier for filters ([#2337]).\n\n- HTTP API request body size limit ([#2305]).\n\n### Changed\n\n- `Access-Control-Allow-Origin` is now only set to the same origin as the domain, but with an HTTP scheme as opposed to `*` ([#2484]).\n\n- `workDir` now supports symlinks.\n\n- Stopped mounting together the directories `/opt/adguardhome/conf` and `/opt/adguardhome/work` in our Docker images ([#2589]).\n\n- When `dns.bogus_nxdomain` option is used, the server will now transform responses if there is at least one bogus address instead of all of them ([#2394]).  The new behavior is the same as in `dnsmasq`.\n\n- Post-updating relaunch possibility is now determined OS-dependently ([#2231], [#2391]).\n\n- Made the mobileconfig HTTP API more robust and predictable, add parameters and improve error response ([#2358]).\n\n- Improved HTTP requests handling and timeouts ([#2343]).\n\n- Our snap package now uses the `core20` image as its base ([#2306]).\n\n- New build system and various internal improvements ([#2271], [#2276], [#2297], [#2509], [#2552], [#2639], [#2646]).\n\n### Deprecated\n\n- Go 1.14 support.  v0.106.0 will require at least Go 1.15 to build.\n\n- The `darwin/386` port.  It will be removed in v0.106.0.\n\n- The `\"rule\"` and `\"filter_id\"` property in `GET /filtering/check_host` and `GET /querylog` responses.  They will be removed in v0.106.0 ([#2102]).\n\n### Fixed\n\n- Autoupdate bug in the Darwin (macOS) version ([#2630]).\n\n- Unnecessary conversions from `string` to `net.IP`, and vice versa ([#2508]).\n\n- Inability to set DNS cache TTL limits ([#2459]).\n\n- Possible freezes on slower machines ([#2225]).\n\n- A mitigation against records being shown in the wrong order on the query log page ([#2293]).\n\n- A JSON parsing error in query log ([#2345]).\n\n- Incorrect detection of the IPv6 address of an interface as well as another infinite loop in the `/dhcp/find_active_dhcp` HTTP API ([#2355]).\n\n### Removed\n\n- The undocumented ability to use hostnames as any of `bind_host` values in configuration.  Documentation requires them to be valid IP addresses, and now the implementation makes sure that that is the case ([#2508]).\n\n- `Dockerfile` ([#2276]).  Replaced with the script `scripts/make/build-docker.sh` which uses `scripts/make/Dockerfile`.\n\n- Support for pre-v0.99.3 format of query logs ([#2102]).\n\n[#1361]: https://github.com/AdguardTeam/AdGuardHome/issues/1361\n[#1383]: https://github.com/AdguardTeam/AdGuardHome/issues/1383\n[#2102]: https://github.com/AdguardTeam/AdGuardHome/issues/2102\n[#2179]: https://github.com/AdguardTeam/AdGuardHome/issues/2179\n[#2224]: https://github.com/AdguardTeam/AdGuardHome/issues/2224\n[#2225]: https://github.com/AdguardTeam/AdGuardHome/issues/2225\n[#2231]: https://github.com/AdguardTeam/AdGuardHome/issues/2231\n[#2271]: https://github.com/AdguardTeam/AdGuardHome/issues/2271\n[#2276]: https://github.com/AdguardTeam/AdGuardHome/issues/2276\n[#2293]: https://github.com/AdguardTeam/AdGuardHome/issues/2293\n[#2297]: https://github.com/AdguardTeam/AdGuardHome/issues/2297\n[#2302]: https://github.com/AdguardTeam/AdGuardHome/issues/2302\n[#2304]: https://github.com/AdguardTeam/AdGuardHome/issues/2304\n[#2305]: https://github.com/AdguardTeam/AdGuardHome/issues/2305\n[#2306]: https://github.com/AdguardTeam/AdGuardHome/issues/2306\n[#2337]: https://github.com/AdguardTeam/AdGuardHome/issues/2337\n[#2343]: https://github.com/AdguardTeam/AdGuardHome/issues/2343\n[#2345]: https://github.com/AdguardTeam/AdGuardHome/issues/2345\n[#2355]: https://github.com/AdguardTeam/AdGuardHome/issues/2355\n[#2358]: https://github.com/AdguardTeam/AdGuardHome/issues/2358\n[#2391]: https://github.com/AdguardTeam/AdGuardHome/issues/2391\n[#2394]: https://github.com/AdguardTeam/AdGuardHome/issues/2394\n[#2401]: https://github.com/AdguardTeam/AdGuardHome/issues/2401\n[#2459]: https://github.com/AdguardTeam/AdGuardHome/issues/2459\n[#2484]: https://github.com/AdguardTeam/AdGuardHome/issues/2484\n[#2508]: https://github.com/AdguardTeam/AdGuardHome/issues/2508\n[#2509]: https://github.com/AdguardTeam/AdGuardHome/issues/2509\n[#2552]: https://github.com/AdguardTeam/AdGuardHome/issues/2552\n[#2589]: https://github.com/AdguardTeam/AdGuardHome/issues/2589\n[#2630]: https://github.com/AdguardTeam/AdGuardHome/issues/2630\n[#2639]: https://github.com/AdguardTeam/AdGuardHome/issues/2639\n[#2646]: https://github.com/AdguardTeam/AdGuardHome/issues/2646\n\n[ms-v0.105.0]: https://github.com/AdguardTeam/AdGuardHome/milestone/27?closed=1\n\n## [v0.104.3] - 2020-11-19\n\nSee also the [v0.104.3 GitHub milestone][ms-v0.104.3].\n\n### Fixed\n\n- The accidentally exposed profiler HTTP API ([#2336]).\n\n[#2336]: https://github.com/AdguardTeam/AdGuardHome/issues/2336\n\n[ms-v0.104.3]: https://github.com/AdguardTeam/AdGuardHome/milestone/30?closed=1\n\n## [v0.104.2] - 2020-11-19\n\nSee also the [v0.104.2 GitHub milestone][ms-v0.104.2].\n\n### Added\n\n- This changelog :-) ([#2294]).\n\n- `HACKING.md`, a guide for developers.\n\n### Changed\n\n- Improved tests output ([#2273]).\n\n### Fixed\n\n- Query logs from file not loading after the ones buffered in memory ([#2325]).\n\n- Unnecessary errors in query logs when switching between log files ([#2324]).\n\n- `404 Not Found` errors on the DHCP settings page on Windows.  The page now correctly shows that DHCP is not currently available on that OS ([#2295]).\n\n- Infinite loop in `/dhcp/find_active_dhcp` ([#2301]).\n\n[#2273]: https://github.com/AdguardTeam/AdGuardHome/issues/2273\n[#2294]: https://github.com/AdguardTeam/AdGuardHome/issues/2294\n[#2295]: https://github.com/AdguardTeam/AdGuardHome/issues/2295\n[#2301]: https://github.com/AdguardTeam/AdGuardHome/issues/2301\n[#2324]: https://github.com/AdguardTeam/AdGuardHome/issues/2324\n[#2325]: https://github.com/AdguardTeam/AdGuardHome/issues/2325\n\n[ms-v0.104.2]: https://github.com/AdguardTeam/AdGuardHome/milestone/28?closed=1\n\n<!--\n[Unreleased]: https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.56...HEAD\n[v0.107.55]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.55...v0.107.56\n-->\n\n[Unreleased]: https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.55...HEAD\n[v0.107.55]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.54...v0.107.55\n[v0.107.54]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.53...v0.107.54\n[v0.107.53]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.52...v0.107.53\n[v0.107.52]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.51...v0.107.52\n[v0.107.51]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.50...v0.107.51\n[v0.107.50]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.49...v0.107.50\n[v0.107.49]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.48...v0.107.49\n[v0.107.48]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.47...v0.107.48\n[v0.107.47]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.46...v0.107.47\n[v0.107.46]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.45...v0.107.46\n[v0.107.45]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.44...v0.107.45\n[v0.107.44]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.43...v0.107.44\n[v0.107.43]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.42...v0.107.43\n[v0.107.42]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.41...v0.107.42\n[v0.107.41]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.40...v0.107.41\n[v0.107.40]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.39...v0.107.40\n[v0.107.39]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.38...v0.107.39\n[v0.107.38]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.37...v0.107.38\n[v0.107.37]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.36...v0.107.37\n[v0.107.36]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.35...v0.107.36\n[v0.107.35]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.34...v0.107.35\n[v0.107.34]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.33...v0.107.34\n[v0.107.33]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.32...v0.107.33\n[v0.107.32]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.31...v0.107.32\n[v0.107.31]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.30...v0.107.31\n[v0.107.30]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.29...v0.107.30\n[v0.107.29]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.28...v0.107.29\n[v0.107.28]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.27...v0.107.28\n[v0.107.27]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.26...v0.107.27\n[v0.107.26]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.25...v0.107.26\n[v0.107.25]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.24...v0.107.25\n[v0.107.24]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.23...v0.107.24\n[v0.107.23]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.22...v0.107.23\n[v0.107.22]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.21...v0.107.22\n[v0.107.21]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.20...v0.107.21\n[v0.107.20]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.19...v0.107.20\n[v0.107.19]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.18...v0.107.19\n[v0.107.18]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.17...v0.107.18\n[v0.107.17]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.16...v0.107.17\n[v0.107.16]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.15...v0.107.16\n[v0.107.15]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.14...v0.107.15\n[v0.107.14]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.13...v0.107.14\n[v0.107.13]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.12...v0.107.13\n[v0.107.12]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.11...v0.107.12\n[v0.107.11]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.10...v0.107.11\n[v0.107.10]:  https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.9...v0.107.10\n[v0.107.9]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.8...v0.107.9\n[v0.107.8]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.7...v0.107.8\n[v0.107.7]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.6...v0.107.7\n[v0.107.6]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.5...v0.107.6\n[v0.107.5]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.4...v0.107.5\n[v0.107.4]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.3...v0.107.4\n[v0.107.3]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.2...v0.107.3\n[v0.107.2]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.1...v0.107.2\n[v0.107.1]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.107.0...v0.107.1\n[v0.107.0]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.106.3...v0.107.0\n[v0.106.3]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.106.2...v0.106.3\n[v0.106.2]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.106.1...v0.106.2\n[v0.106.1]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.106.0...v0.106.1\n[v0.106.0]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.105.2...v0.106.0\n[v0.105.2]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.105.1...v0.105.2\n[v0.105.1]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.105.0...v0.105.1\n[v0.105.0]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.104.3...v0.105.0\n[v0.104.3]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.104.2...v0.104.3\n[v0.104.2]:   https://github.com/AdguardTeam/AdGuardHome/compare/v0.104.1...v0.104.2\n"
        },
        {
          "name": "CONTRIBUTING.md",
          "type": "blob",
          "size": 3.04,
          "content": "# Contributing to AdGuard Home\n\nIf you want to contribute to AdGuard Home by filing or commenting on an issue or opening a pull request, please follow the instructions below.\n\n## General recommendations\n\nPlease don’t:\n\n- post comments like “+1” or “this”.  Use the :+1: reaction on the issue instead, as this allows us to actually see the level of support for issues.\n\n- file issues about localization errors or send localization updates as PRs.  We’re using [CrowdIn] to manage our translations and we generally update them before each Beta and Release build.  You can learn more about translating AdGuard products [in our Knowledge Base][kb-trans].\n\n- file issues about a particular filtering-rule list misbehaving.  These are tracked through the [separate form for filtering issues][form].\n\n- send or request updates to filtering-rule lists, such as the ones for the Blocked Services feature or the list of approved filtering-rule lists.  We update them from the [separate repository][hostlist] once before each Beta and Release build.\n\nPlease do:\n\n- follow the template instructions and provide data for reproducing issues.\n\n- write the title of your issue or pull request in English.  Any language is fine in the body, but it is important to keep the title in English to make it easier for people and bots to look up duplicated issues.\n\n[CrowdIn]:  https://crowdin.com/project/adguard-applications/en#/adguard-home\n[form]:     https://link.adtidy.org/forward.html?action=report&app=home&from=github\n[hostlist]: https://github.com/AdguardTeam/HostlistsRegistry\n[kb-trans]: https://kb.adguard.com/en/general/adguard-translations\n\n## Issues\n\n### Search first\n\nPlease make sure that the issue is not a duplicate or a question.  If it’s a duplicate, please react to the original issue with a thumbs up.  If it’s a question, please look through our [Wiki] and, if you haven’t found the answer, post it to the GitHub [Discussions] page.\n\n[Discussions]: https://github.com/AdguardTeam/AdGuardHome/discussions/categories/q-a\n[Wiki]:        https://github.com/AdguardTeam/AdGuardHome/wiki\n\n### Follow the issue template\n\nDevelopers need to be able to reproduce the faulty behavior in order to fix an issue, so please make sure that you follow the instructions in the issue template carefully.\n\n## Pull requests\n\n### Discuss your changes first\n\nPlease discuss your changes by opening an issue.  The maintainers should evaluate your proposal, and it’s generally better if that’s done before any code is written.\n\n### Review your changes for style\n\nWe have a set of [code guidelines][hacking] that we expect the code to follow.  Please make sure you follow it.\n\n[hacking]: https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Go.md\n\n### Test your changes\n\nMake sure that it passes linters and tests by running the corresponding Make targets.  For backend changes, it’s `make go-check`.  For frontend, run `make js-lint`.\n\nAdditionally, a manual test is often required.  While we’re constantly working on improving our test suites, they’re still not as good as we’d like them to be.\n"
        },
        {
          "name": "HACKING.md",
          "type": "blob",
          "size": 3.22,
          "content": "# AdGuard Home developer guidelines\n\nThis document was moved to the [AdGuard Code Guidelines repository][repo].  All sections with IDs now only have links to the corresponding files and sections in that repository.\n\n## <a href=\"#git\" id=\"git\" name=\"git\">Git</a>\n\nThis section was moved to [its own document][git].\n\n## <a href=\"#go\" id=\"go\" name=\"go\">Go</a>\n\nThis section was moved to [its own document][go].\n\n### <a href=\"#code\" id=\"code\" name=\"code\">Code</a>\n\nThis subsection was moved to the [corresponding section][code] of the Go guidelines document.\n\n### <a href=\"#commenting\" id=\"commenting\" name=\"commenting\">Commenting</a>\n\nThis subsection was moved to the [corresponding section][cmnt] of the Go guidelines document.\n\n### <a href=\"#formatting\" id=\"formatting\" name=\"formatting\">Formatting</a>\n\nThis subsection was moved to the [corresponding section][fmt] of the Go guidelines document.\n\n### <a href=\"#naming\" id=\"naming\" name=\"naming\">Naming</a>\n\nThis subsection was moved to the [corresponding section][name] of the Go guidelines document.\n\n### <a href=\"#testing\" id=\"testing\" name=\"testing\">Testing</a>\n\nThis subsection was moved to the [corresponding section][test] of the Go guidelines document.\n\n### <a href=\"#recommended-reading\" id=\"recommended-reading\" name=\"recommended-reading\">Recommended Reading</a>\n\nThis subsection was moved to the [corresponding section][read] of the Go guidelines document.\n\n## <a href=\"#markdown\" id=\"markdown\" name=\"markdown\">Markdown</a>\n\nThis section was moved to [its own document][md].\n\n## <a href=\"#shell-scripting\" id=\"shell-scripting\" name=\"shell-scripting\">Shell Scripting</a>\n\nThis section was moved to [its own document][sh].\n\n### <a href=\"#shell-conditionals\" id=\"shell-conditionals\" name=\"shell-conditionals\">Shell Conditionals</a>\n\nThis subsection was moved to the [corresponding section][cond] of the Shell guidelines document.\n\n## <a href=\"#text-including-comments\" id=\"text-including-comments\" name=\"text-including-comments\">Text, Including Comments</a>\n\nThis section was moved to [its own document][txt].\n\n## <a href=\"#yaml\" id=\"yaml\" name=\"yaml\">YAML</a>\n\nThis section was moved to [its own document][yaml].\n\n[cmnt]: https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Go.md#commenting\n[code]: https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Go.md#code\n[cond]: https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Shell.md#shell-conditionals\n[fmt]:  https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Go.md#formatting\n[git]:  https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Git.md\n[go]:   https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Go.md\n[md]:   https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Markdown.md\n[name]: https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Go.md#naming\n[read]: https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Go.md#recommended-reading\n[repo]: https://github.com/AdguardTeam/CodeGuidelines\n[sh]:   https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Shell.md\n[test]: https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Go.md#testing\n[txt]:  https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/Text.md\n[yaml]: https://github.com/AdguardTeam/CodeGuidelines/blob/master/Go/YAML.md\n"
        },
        {
          "name": "LICENSE.txt",
          "type": "blob",
          "size": 34.33,
          "content": "                    GNU GENERAL PUBLIC LICENSE\n                       Version 3, 29 June 2007\n\n Copyright (C) 2007 Free Software Foundation, Inc. <https://fsf.org/>\n Everyone is permitted to copy and distribute verbatim copies\n of this license document, but changing it is not allowed.\n\n                            Preamble\n\n  The GNU General Public License is a free, copyleft license for\nsoftware and other kinds of works.\n\n  The licenses for most software and other practical works are designed\nto take away your freedom to share and change the works.  By contrast,\nthe GNU General Public License is intended to guarantee your freedom to\nshare and change all versions of a program--to make sure it remains free\nsoftware for all its users.  We, the Free Software Foundation, use the\nGNU General Public License for most of our software; it applies also to\nany other work released this way by its authors.  You can apply it to\nyour programs, too.\n\n  When we speak of free software, we are referring to freedom, not\nprice.  Our General Public Licenses are designed to make sure that you\nhave the freedom to distribute copies of free software (and charge for\nthem if you wish), that you receive source code or can get it if you\nwant it, that you can change the software or use pieces of it in new\nfree programs, and that you know you can do these things.\n\n  To protect your rights, we need to prevent others from denying you\nthese rights or asking you to surrender the rights.  Therefore, you have\ncertain responsibilities if you distribute copies of the software, or if\nyou modify it: responsibilities to respect the freedom of others.\n\n  For example, if you distribute copies of such a program, whether\ngratis or for a fee, you must pass on to the recipients the same\nfreedoms that you received.  You must make sure that they, too, receive\nor can get the source code.  And you must show them these terms so they\nknow their rights.\n\n  Developers that use the GNU GPL protect your rights with two steps:\n(1) assert copyright on the software, and (2) offer you this License\ngiving you legal permission to copy, distribute and/or modify it.\n\n  For the developers' and authors' protection, the GPL clearly explains\nthat there is no warranty for this free software.  For both users' and\nauthors' sake, the GPL requires that modified versions be marked as\nchanged, so that their problems will not be attributed erroneously to\nauthors of previous versions.\n\n  Some devices are designed to deny users access to install or run\nmodified versions of the software inside them, although the manufacturer\ncan do so.  This is fundamentally incompatible with the aim of\nprotecting users' freedom to change the software.  The systematic\npattern of such abuse occurs in the area of products for individuals to\nuse, which is precisely where it is most unacceptable.  Therefore, we\nhave designed this version of the GPL to prohibit the practice for those\nproducts.  If such problems arise substantially in other domains, we\nstand ready to extend this provision to those domains in future versions\nof the GPL, as needed to protect the freedom of users.\n\n  Finally, every program is threatened constantly by software patents.\nStates should not allow patents to restrict development and use of\nsoftware on general-purpose computers, but in those that do, we wish to\navoid the special danger that patents applied to a free program could\nmake it effectively proprietary.  To prevent this, the GPL assures that\npatents cannot be used to render the program non-free.\n\n  The precise terms and conditions for copying, distribution and\nmodification follow.\n\n                       TERMS AND CONDITIONS\n\n  0. Definitions.\n\n  \"This License\" refers to version 3 of the GNU General Public License.\n\n  \"Copyright\" also means copyright-like laws that apply to other kinds of\nworks, such as semiconductor masks.\n\n  \"The Program\" refers to any copyrightable work licensed under this\nLicense.  Each licensee is addressed as \"you\".  \"Licensees\" and\n\"recipients\" may be individuals or organizations.\n\n  To \"modify\" a work means to copy from or adapt all or part of the work\nin a fashion requiring copyright permission, other than the making of an\nexact copy.  The resulting work is called a \"modified version\" of the\nearlier work or a work \"based on\" the earlier work.\n\n  A \"covered work\" means either the unmodified Program or a work based\non the Program.\n\n  To \"propagate\" a work means to do anything with it that, without\npermission, would make you directly or secondarily liable for\ninfringement under applicable copyright law, except executing it on a\ncomputer or modifying a private copy.  Propagation includes copying,\ndistribution (with or without modification), making available to the\npublic, and in some countries other activities as well.\n\n  To \"convey\" a work means any kind of propagation that enables other\nparties to make or receive copies.  Mere interaction with a user through\na computer network, with no transfer of a copy, is not conveying.\n\n  An interactive user interface displays \"Appropriate Legal Notices\"\nto the extent that it includes a convenient and prominently visible\nfeature that (1) displays an appropriate copyright notice, and (2)\ntells the user that there is no warranty for the work (except to the\nextent that warranties are provided), that licensees may convey the\nwork under this License, and how to view a copy of this License.  If\nthe interface presents a list of user commands or options, such as a\nmenu, a prominent item in the list meets this criterion.\n\n  1. Source Code.\n\n  The \"source code\" for a work means the preferred form of the work\nfor making modifications to it.  \"Object code\" means any non-source\nform of a work.\n\n  A \"Standard Interface\" means an interface that either is an official\nstandard defined by a recognized standards body, or, in the case of\ninterfaces specified for a particular programming language, one that\nis widely used among developers working in that language.\n\n  The \"System Libraries\" of an executable work include anything, other\nthan the work as a whole, that (a) is included in the normal form of\npackaging a Major Component, but which is not part of that Major\nComponent, and (b) serves only to enable use of the work with that\nMajor Component, or to implement a Standard Interface for which an\nimplementation is available to the public in source code form.  A\n\"Major Component\", in this context, means a major essential component\n(kernel, window system, and so on) of the specific operating system\n(if any) on which the executable work runs, or a compiler used to\nproduce the work, or an object code interpreter used to run it.\n\n  The \"Corresponding Source\" for a work in object code form means all\nthe source code needed to generate, install, and (for an executable\nwork) run the object code and to modify the work, including scripts to\ncontrol those activities.  However, it does not include the work's\nSystem Libraries, or general-purpose tools or generally available free\nprograms which are used unmodified in performing those activities but\nwhich are not part of the work.  For example, Corresponding Source\nincludes interface definition files associated with source files for\nthe work, and the source code for shared libraries and dynamically\nlinked subprograms that the work is specifically designed to require,\nsuch as by intimate data communication or control flow between those\nsubprograms and other parts of the work.\n\n  The Corresponding Source need not include anything that users\ncan regenerate automatically from other parts of the Corresponding\nSource.\n\n  The Corresponding Source for a work in source code form is that\nsame work.\n\n  2. Basic Permissions.\n\n  All rights granted under this License are granted for the term of\ncopyright on the Program, and are irrevocable provided the stated\nconditions are met.  This License explicitly affirms your unlimited\npermission to run the unmodified Program.  The output from running a\ncovered work is covered by this License only if the output, given its\ncontent, constitutes a covered work.  This License acknowledges your\nrights of fair use or other equivalent, as provided by copyright law.\n\n  You may make, run and propagate covered works that you do not\nconvey, without conditions so long as your license otherwise remains\nin force.  You may convey covered works to others for the sole purpose\nof having them make modifications exclusively for you, or provide you\nwith facilities for running those works, provided that you comply with\nthe terms of this License in conveying all material for which you do\nnot control copyright.  Those thus making or running the covered works\nfor you must do so exclusively on your behalf, under your direction\nand control, on terms that prohibit them from making any copies of\nyour copyrighted material outside their relationship with you.\n\n  Conveying under any other circumstances is permitted solely under\nthe conditions stated below.  Sublicensing is not allowed; section 10\nmakes it unnecessary.\n\n  3. Protecting Users' Legal Rights From Anti-Circumvention Law.\n\n  No covered work shall be deemed part of an effective technological\nmeasure under any applicable law fulfilling obligations under article\n11 of the WIPO copyright treaty adopted on 20 December 1996, or\nsimilar laws prohibiting or restricting circumvention of such\nmeasures.\n\n  When you convey a covered work, you waive any legal power to forbid\ncircumvention of technological measures to the extent such circumvention\nis effected by exercising rights under this License with respect to\nthe covered work, and you disclaim any intention to limit operation or\nmodification of the work as a means of enforcing, against the work's\nusers, your or third parties' legal rights to forbid circumvention of\ntechnological measures.\n\n  4. Conveying Verbatim Copies.\n\n  You may convey verbatim copies of the Program's source code as you\nreceive it, in any medium, provided that you conspicuously and\nappropriately publish on each copy an appropriate copyright notice;\nkeep intact all notices stating that this License and any\nnon-permissive terms added in accord with section 7 apply to the code;\nkeep intact all notices of the absence of any warranty; and give all\nrecipients a copy of this License along with the Program.\n\n  You may charge any price or no price for each copy that you convey,\nand you may offer support or warranty protection for a fee.\n\n  5. Conveying Modified Source Versions.\n\n  You may convey a work based on the Program, or the modifications to\nproduce it from the Program, in the form of source code under the\nterms of section 4, provided that you also meet all of these conditions:\n\n    a) The work must carry prominent notices stating that you modified\n    it, and giving a relevant date.\n\n    b) The work must carry prominent notices stating that it is\n    released under this License and any conditions added under section\n    7.  This requirement modifies the requirement in section 4 to\n    \"keep intact all notices\".\n\n    c) You must license the entire work, as a whole, under this\n    License to anyone who comes into possession of a copy.  This\n    License will therefore apply, along with any applicable section 7\n    additional terms, to the whole of the work, and all its parts,\n    regardless of how they are packaged.  This License gives no\n    permission to license the work in any other way, but it does not\n    invalidate such permission if you have separately received it.\n\n    d) If the work has interactive user interfaces, each must display\n    Appropriate Legal Notices; however, if the Program has interactive\n    interfaces that do not display Appropriate Legal Notices, your\n    work need not make them do so.\n\n  A compilation of a covered work with other separate and independent\nworks, which are not by their nature extensions of the covered work,\nand which are not combined with it such as to form a larger program,\nin or on a volume of a storage or distribution medium, is called an\n\"aggregate\" if the compilation and its resulting copyright are not\nused to limit the access or legal rights of the compilation's users\nbeyond what the individual works permit.  Inclusion of a covered work\nin an aggregate does not cause this License to apply to the other\nparts of the aggregate.\n\n  6. Conveying Non-Source Forms.\n\n  You may convey a covered work in object code form under the terms\nof sections 4 and 5, provided that you also convey the\nmachine-readable Corresponding Source under the terms of this License,\nin one of these ways:\n\n    a) Convey the object code in, or embodied in, a physical product\n    (including a physical distribution medium), accompanied by the\n    Corresponding Source fixed on a durable physical medium\n    customarily used for software interchange.\n\n    b) Convey the object code in, or embodied in, a physical product\n    (including a physical distribution medium), accompanied by a\n    written offer, valid for at least three years and valid for as\n    long as you offer spare parts or customer support for that product\n    model, to give anyone who possesses the object code either (1) a\n    copy of the Corresponding Source for all the software in the\n    product that is covered by this License, on a durable physical\n    medium customarily used for software interchange, for a price no\n    more than your reasonable cost of physically performing this\n    conveying of source, or (2) access to copy the\n    Corresponding Source from a network server at no charge.\n\n    c) Convey individual copies of the object code with a copy of the\n    written offer to provide the Corresponding Source.  This\n    alternative is allowed only occasionally and noncommercially, and\n    only if you received the object code with such an offer, in accord\n    with subsection 6b.\n\n    d) Convey the object code by offering access from a designated\n    place (gratis or for a charge), and offer equivalent access to the\n    Corresponding Source in the same way through the same place at no\n    further charge.  You need not require recipients to copy the\n    Corresponding Source along with the object code.  If the place to\n    copy the object code is a network server, the Corresponding Source\n    may be on a different server (operated by you or a third party)\n    that supports equivalent copying facilities, provided you maintain\n    clear directions next to the object code saying where to find the\n    Corresponding Source.  Regardless of what server hosts the\n    Corresponding Source, you remain obligated to ensure that it is\n    available for as long as needed to satisfy these requirements.\n\n    e) Convey the object code using peer-to-peer transmission, provided\n    you inform other peers where the object code and Corresponding\n    Source of the work are being offered to the general public at no\n    charge under subsection 6d.\n\n  A separable portion of the object code, whose source code is excluded\nfrom the Corresponding Source as a System Library, need not be\nincluded in conveying the object code work.\n\n  A \"User Product\" is either (1) a \"consumer product\", which means any\ntangible personal property which is normally used for personal, family,\nor household purposes, or (2) anything designed or sold for incorporation\ninto a dwelling.  In determining whether a product is a consumer product,\ndoubtful cases shall be resolved in favor of coverage.  For a particular\nproduct received by a particular user, \"normally used\" refers to a\ntypical or common use of that class of product, regardless of the status\nof the particular user or of the way in which the particular user\nactually uses, or expects or is expected to use, the product.  A product\nis a consumer product regardless of whether the product has substantial\ncommercial, industrial or non-consumer uses, unless such uses represent\nthe only significant mode of use of the product.\n\n  \"Installation Information\" for a User Product means any methods,\nprocedures, authorization keys, or other information required to install\nand execute modified versions of a covered work in that User Product from\na modified version of its Corresponding Source.  The information must\nsuffice to ensure that the continued functioning of the modified object\ncode is in no case prevented or interfered with solely because\nmodification has been made.\n\n  If you convey an object code work under this section in, or with, or\nspecifically for use in, a User Product, and the conveying occurs as\npart of a transaction in which the right of possession and use of the\nUser Product is transferred to the recipient in perpetuity or for a\nfixed term (regardless of how the transaction is characterized), the\nCorresponding Source conveyed under this section must be accompanied\nby the Installation Information.  But this requirement does not apply\nif neither you nor any third party retains the ability to install\nmodified object code on the User Product (for example, the work has\nbeen installed in ROM).\n\n  The requirement to provide Installation Information does not include a\nrequirement to continue to provide support service, warranty, or updates\nfor a work that has been modified or installed by the recipient, or for\nthe User Product in which it has been modified or installed.  Access to a\nnetwork may be denied when the modification itself materially and\nadversely affects the operation of the network or violates the rules and\nprotocols for communication across the network.\n\n  Corresponding Source conveyed, and Installation Information provided,\nin accord with this section must be in a format that is publicly\ndocumented (and with an implementation available to the public in\nsource code form), and must require no special password or key for\nunpacking, reading or copying.\n\n  7. Additional Terms.\n\n  \"Additional permissions\" are terms that supplement the terms of this\nLicense by making exceptions from one or more of its conditions.\nAdditional permissions that are applicable to the entire Program shall\nbe treated as though they were included in this License, to the extent\nthat they are valid under applicable law.  If additional permissions\napply only to part of the Program, that part may be used separately\nunder those permissions, but the entire Program remains governed by\nthis License without regard to the additional permissions.\n\n  When you convey a copy of a covered work, you may at your option\nremove any additional permissions from that copy, or from any part of\nit.  (Additional permissions may be written to require their own\nremoval in certain cases when you modify the work.)  You may place\nadditional permissions on material, added by you to a covered work,\nfor which you have or can give appropriate copyright permission.\n\n  Notwithstanding any other provision of this License, for material you\nadd to a covered work, you may (if authorized by the copyright holders of\nthat material) supplement the terms of this License with terms:\n\n    a) Disclaiming warranty or limiting liability differently from the\n    terms of sections 15 and 16 of this License; or\n\n    b) Requiring preservation of specified reasonable legal notices or\n    author attributions in that material or in the Appropriate Legal\n    Notices displayed by works containing it; or\n\n    c) Prohibiting misrepresentation of the origin of that material, or\n    requiring that modified versions of such material be marked in\n    reasonable ways as different from the original version; or\n\n    d) Limiting the use for publicity purposes of names of licensors or\n    authors of the material; or\n\n    e) Declining to grant rights under trademark law for use of some\n    trade names, trademarks, or service marks; or\n\n    f) Requiring indemnification of licensors and authors of that\n    material by anyone who conveys the material (or modified versions of\n    it) with contractual assumptions of liability to the recipient, for\n    any liability that these contractual assumptions directly impose on\n    those licensors and authors.\n\n  All other non-permissive additional terms are considered \"further\nrestrictions\" within the meaning of section 10.  If the Program as you\nreceived it, or any part of it, contains a notice stating that it is\ngoverned by this License along with a term that is a further\nrestriction, you may remove that term.  If a license document contains\na further restriction but permits relicensing or conveying under this\nLicense, you may add to a covered work material governed by the terms\nof that license document, provided that the further restriction does\nnot survive such relicensing or conveying.\n\n  If you add terms to a covered work in accord with this section, you\nmust place, in the relevant source files, a statement of the\nadditional terms that apply to those files, or a notice indicating\nwhere to find the applicable terms.\n\n  Additional terms, permissive or non-permissive, may be stated in the\nform of a separately written license, or stated as exceptions;\nthe above requirements apply either way.\n\n  8. Termination.\n\n  You may not propagate or modify a covered work except as expressly\nprovided under this License.  Any attempt otherwise to propagate or\nmodify it is void, and will automatically terminate your rights under\nthis License (including any patent licenses granted under the third\nparagraph of section 11).\n\n  However, if you cease all violation of this License, then your\nlicense from a particular copyright holder is reinstated (a)\nprovisionally, unless and until the copyright holder explicitly and\nfinally terminates your license, and (b) permanently, if the copyright\nholder fails to notify you of the violation by some reasonable means\nprior to 60 days after the cessation.\n\n  Moreover, your license from a particular copyright holder is\nreinstated permanently if the copyright holder notifies you of the\nviolation by some reasonable means, this is the first time you have\nreceived notice of violation of this License (for any work) from that\ncopyright holder, and you cure the violation prior to 30 days after\nyour receipt of the notice.\n\n  Termination of your rights under this section does not terminate the\nlicenses of parties who have received copies or rights from you under\nthis License.  If your rights have been terminated and not permanently\nreinstated, you do not qualify to receive new licenses for the same\nmaterial under section 10.\n\n  9. Acceptance Not Required for Having Copies.\n\n  You are not required to accept this License in order to receive or\nrun a copy of the Program.  Ancillary propagation of a covered work\noccurring solely as a consequence of using peer-to-peer transmission\nto receive a copy likewise does not require acceptance.  However,\nnothing other than this License grants you permission to propagate or\nmodify any covered work.  These actions infringe copyright if you do\nnot accept this License.  Therefore, by modifying or propagating a\ncovered work, you indicate your acceptance of this License to do so.\n\n  10. Automatic Licensing of Downstream Recipients.\n\n  Each time you convey a covered work, the recipient automatically\nreceives a license from the original licensors, to run, modify and\npropagate that work, subject to this License.  You are not responsible\nfor enforcing compliance by third parties with this License.\n\n  An \"entity transaction\" is a transaction transferring control of an\norganization, or substantially all assets of one, or subdividing an\norganization, or merging organizations.  If propagation of a covered\nwork results from an entity transaction, each party to that\ntransaction who receives a copy of the work also receives whatever\nlicenses to the work the party's predecessor in interest had or could\ngive under the previous paragraph, plus a right to possession of the\nCorresponding Source of the work from the predecessor in interest, if\nthe predecessor has it or can get it with reasonable efforts.\n\n  You may not impose any further restrictions on the exercise of the\nrights granted or affirmed under this License.  For example, you may\nnot impose a license fee, royalty, or other charge for exercise of\nrights granted under this License, and you may not initiate litigation\n(including a cross-claim or counterclaim in a lawsuit) alleging that\nany patent claim is infringed by making, using, selling, offering for\nsale, or importing the Program or any portion of it.\n\n  11. Patents.\n\n  A \"contributor\" is a copyright holder who authorizes use under this\nLicense of the Program or a work on which the Program is based.  The\nwork thus licensed is called the contributor's \"contributor version\".\n\n  A contributor's \"essential patent claims\" are all patent claims\nowned or controlled by the contributor, whether already acquired or\nhereafter acquired, that would be infringed by some manner, permitted\nby this License, of making, using, or selling its contributor version,\nbut do not include claims that would be infringed only as a\nconsequence of further modification of the contributor version.  For\npurposes of this definition, \"control\" includes the right to grant\npatent sublicenses in a manner consistent with the requirements of\nthis License.\n\n  Each contributor grants you a non-exclusive, worldwide, royalty-free\npatent license under the contributor's essential patent claims, to\nmake, use, sell, offer for sale, import and otherwise run, modify and\npropagate the contents of its contributor version.\n\n  In the following three paragraphs, a \"patent license\" is any express\nagreement or commitment, however denominated, not to enforce a patent\n(such as an express permission to practice a patent or covenant not to\nsue for patent infringement).  To \"grant\" such a patent license to a\nparty means to make such an agreement or commitment not to enforce a\npatent against the party.\n\n  If you convey a covered work, knowingly relying on a patent license,\nand the Corresponding Source of the work is not available for anyone\nto copy, free of charge and under the terms of this License, through a\npublicly available network server or other readily accessible means,\nthen you must either (1) cause the Corresponding Source to be so\navailable, or (2) arrange to deprive yourself of the benefit of the\npatent license for this particular work, or (3) arrange, in a manner\nconsistent with the requirements of this License, to extend the patent\nlicense to downstream recipients.  \"Knowingly relying\" means you have\nactual knowledge that, but for the patent license, your conveying the\ncovered work in a country, or your recipient's use of the covered work\nin a country, would infringe one or more identifiable patents in that\ncountry that you have reason to believe are valid.\n\n  If, pursuant to or in connection with a single transaction or\narrangement, you convey, or propagate by procuring conveyance of, a\ncovered work, and grant a patent license to some of the parties\nreceiving the covered work authorizing them to use, propagate, modify\nor convey a specific copy of the covered work, then the patent license\nyou grant is automatically extended to all recipients of the covered\nwork and works based on it.\n\n  A patent license is \"discriminatory\" if it does not include within\nthe scope of its coverage, prohibits the exercise of, or is\nconditioned on the non-exercise of one or more of the rights that are\nspecifically granted under this License.  You may not convey a covered\nwork if you are a party to an arrangement with a third party that is\nin the business of distributing software, under which you make payment\nto the third party based on the extent of your activity of conveying\nthe work, and under which the third party grants, to any of the\nparties who would receive the covered work from you, a discriminatory\npatent license (a) in connection with copies of the covered work\nconveyed by you (or copies made from those copies), or (b) primarily\nfor and in connection with specific products or compilations that\ncontain the covered work, unless you entered into that arrangement,\nor that patent license was granted, prior to 28 March 2007.\n\n  Nothing in this License shall be construed as excluding or limiting\nany implied license or other defenses to infringement that may\notherwise be available to you under applicable patent law.\n\n  12. No Surrender of Others' Freedom.\n\n  If conditions are imposed on you (whether by court order, agreement or\notherwise) that contradict the conditions of this License, they do not\nexcuse you from the conditions of this License.  If you cannot convey a\ncovered work so as to satisfy simultaneously your obligations under this\nLicense and any other pertinent obligations, then as a consequence you may\nnot convey it at all.  For example, if you agree to terms that obligate you\nto collect a royalty for further conveying from those to whom you convey\nthe Program, the only way you could satisfy both those terms and this\nLicense would be to refrain entirely from conveying the Program.\n\n  13. Use with the GNU Affero General Public License.\n\n  Notwithstanding any other provision of this License, you have\npermission to link or combine any covered work with a work licensed\nunder version 3 of the GNU Affero General Public License into a single\ncombined work, and to convey the resulting work.  The terms of this\nLicense will continue to apply to the part which is the covered work,\nbut the special requirements of the GNU Affero General Public License,\nsection 13, concerning interaction through a network will apply to the\ncombination as such.\n\n  14. Revised Versions of this License.\n\n  The Free Software Foundation may publish revised and/or new versions of\nthe GNU General Public License from time to time.  Such new versions will\nbe similar in spirit to the present version, but may differ in detail to\naddress new problems or concerns.\n\n  Each version is given a distinguishing version number.  If the\nProgram specifies that a certain numbered version of the GNU General\nPublic License \"or any later version\" applies to it, you have the\noption of following the terms and conditions either of that numbered\nversion or of any later version published by the Free Software\nFoundation.  If the Program does not specify a version number of the\nGNU General Public License, you may choose any version ever published\nby the Free Software Foundation.\n\n  If the Program specifies that a proxy can decide which future\nversions of the GNU General Public License can be used, that proxy's\npublic statement of acceptance of a version permanently authorizes you\nto choose that version for the Program.\n\n  Later license versions may give you additional or different\npermissions.  However, no additional obligations are imposed on any\nauthor or copyright holder as a result of your choosing to follow a\nlater version.\n\n  15. Disclaimer of Warranty.\n\n  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY\nAPPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT\nHOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY\nOF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,\nTHE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\nPURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM\nIS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF\nALL NECESSARY SERVICING, REPAIR OR CORRECTION.\n\n  16. Limitation of Liability.\n\n  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\nWILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS\nTHE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY\nGENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE\nUSE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF\nDATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD\nPARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),\nEVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF\nSUCH DAMAGES.\n\n  17. Interpretation of Sections 15 and 16.\n\n  If the disclaimer of warranty and limitation of liability provided\nabove cannot be given local legal effect according to their terms,\nreviewing courts shall apply local law that most closely approximates\nan absolute waiver of all civil liability in connection with the\nProgram, unless a warranty or assumption of liability accompanies a\ncopy of the Program in return for a fee.\n\n                     END OF TERMS AND CONDITIONS\n\n            How to Apply These Terms to Your New Programs\n\n  If you develop a new program, and you want it to be of the greatest\npossible use to the public, the best way to achieve this is to make it\nfree software which everyone can redistribute and change under these terms.\n\n  To do so, attach the following notices to the program.  It is safest\nto attach them to the start of each source file to most effectively\nstate the exclusion of warranty; and each file should have at least\nthe \"copyright\" line and a pointer to where the full notice is found.\n\n    <one line to give the program's name and a brief idea of what it does.>\n    Copyright (C) <year>  <name of author>\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nAlso add information on how to contact you by electronic and paper mail.\n\n  If the program does terminal interaction, make it output a short\nnotice like this when it starts in an interactive mode:\n\n    <program>  Copyright (C) <year>  <name of author>\n    This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n    This is free software, and you are welcome to redistribute it\n    under certain conditions; type `show c' for details.\n\nThe hypothetical commands `show w' and `show c' should show the appropriate\nparts of the General Public License.  Of course, your program's commands\nmight be different; for a GUI interface, you would use an \"about box\".\n\n  You should also get your employer (if you work as a programmer) or school,\nif any, to sign a \"copyright disclaimer\" for the program, if necessary.\nFor more information on this, and how to apply and follow the GNU GPL, see\n<https://www.gnu.org/licenses/>.\n\n  The GNU General Public License does not permit incorporating your program\ninto proprietary programs.  If your program is a subroutine library, you\nmay consider it more useful to permit linking proprietary applications with\nthe library.  If this is what you want to do, use the GNU Lesser General\nPublic License instead of this License.  But first, please read\n<https://www.gnu.org/licenses/why-not-lgpl.html>.\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 4.8,
          "content": "# Keep the Makefile POSIX-compliant.  We currently allow hyphens in\n# target names, but that may change in the future.\n#\n# See https://pubs.opengroup.org/onlinepubs/9799919799/utilities/make.html.\n.POSIX:\n\n# This comment is used to simplify checking local copies of the\n# Makefile.  Bump this number every time a significant change is made to\n# this Makefile.\n#\n# AdGuard-Project-Version: 9\n\n# Don't name these macros \"GO\" etc., because GNU Make apparently makes\n# them exported environment variables with the literal value of\n# \"${GO:-go}\" and so on, which is not what we need.  Use a dot in the\n# name to make sure that users don't have an environment variable with\n# the same name.\n#\n# See https://unix.stackexchange.com/q/646255/105635.\nGO.MACRO = $${GO:-go}\nVERBOSE.MACRO = $${VERBOSE:-0}\n\nCHANNEL = development\nCLIENT_DIR = client\nDEPLOY_SCRIPT_PATH = not/a/real/path\nDIST_DIR = dist\nGOAMD64 = v1\nGOPROXY = https://proxy.golang.org|direct\nGOTELEMETRY = off\nGOTOOLCHAIN = go1.23.4\nGPG_KEY = devteam@adguard.com\nGPG_KEY_PASSPHRASE = not-a-real-password\nNPM = npm\nNPM_FLAGS = --prefix $(CLIENT_DIR)\nNPM_INSTALL_FLAGS = $(NPM_FLAGS) --quiet --no-progress --ignore-engines\\\n\t--ignore-optional --ignore-platform --ignore-scripts\nRACE = 0\nREVISION = $${REVISION:-$$(git rev-parse --short HEAD)}\nSIGN = 1\nSIGNER_API_KEY = not-a-real-key\nVERSION = v0.0.0\nYARN = yarn\n\nNEXTAPI = 0\n\n# Macros for the build-release target.  If FRONTEND_PREBUILT is 0, the\n# default, the macro $(BUILD_RELEASE_DEPS_$(FRONTEND_PREBUILT)) expands\n# into BUILD_RELEASE_DEPS_0, and so both frontend and backend\n# dependencies are fetched and the frontend is built.  Otherwise, if\n# FRONTEND_PREBUILT is 1, only backend dependencies are fetched and the\n# frontend isn't rebuilt.\n#\n# TODO(a.garipov): We could probably do that from .../build-release.sh,\n# but that would mean either calling make from inside make or\n# duplicating commands in two places, both of which don't seem to me\n# like nice solutions.\nFRONTEND_PREBUILT = 0\nBUILD_RELEASE_DEPS_0 = deps js-build\nBUILD_RELEASE_DEPS_1 = go-deps\n\nENV = env\\\n\tCHANNEL='$(CHANNEL)'\\\n\tDEPLOY_SCRIPT_PATH='$(DEPLOY_SCRIPT_PATH)' \\\n\tDIST_DIR='$(DIST_DIR)'\\\n\tGO=\"$(GO.MACRO)\"\\\n\tGOAMD64='$(GOAMD64)'\\\n\tGOPROXY='$(GOPROXY)'\\\n\tGOTELEMETRY='$(GOTELEMETRY)'\\\n\tGOTOOLCHAIN='$(GOTOOLCHAIN)'\\\n\tGPG_KEY='$(GPG_KEY)'\\\n\tGPG_KEY_PASSPHRASE='$(GPG_KEY_PASSPHRASE)'\\\n\tNEXTAPI='$(NEXTAPI)'\\\n\tPATH=\"$${PWD}/bin:$$( \"$(GO.MACRO)\" env GOPATH )/bin:$${PATH}\"\\\n\tRACE='$(RACE)'\\\n\tREVISION='$(REVISION)'\\\n\tSIGN='$(SIGN)'\\\n\tSIGNER_API_KEY='$(SIGNER_API_KEY)' \\\n\tVERBOSE=\"$(VERBOSE.MACRO)\"\\\n\tVERSION=\"$(VERSION)\"\\\n\n# Keep the line above blank.\n\nENV_MISC = env\\\n\tPATH=\"$${PWD}/bin:$$(\"$(GO.MACRO)\" env GOPATH)/bin:$${PATH}\"\\\n\tVERBOSE=\"$(VERBOSE.MACRO)\"\\\n\n# Keep the line above blank.\n\n# Keep this target first, so that a naked make invocation triggers a\n# full build.\nbuild: deps quick-build\n\ninit: ; git config core.hooksPath ./scripts/hooks\n\nquick-build: js-build go-build\n\ndeps: js-deps go-deps\nlint: js-lint go-lint\ntest: js-test go-test\n\n# Here and below, keep $(SHELL) in quotes, because on Windows this will\n# expand to something like \"C:/Program Files/Git/usr/bin/sh.exe\".\nbuild-docker: ; $(ENV) \"$(SHELL)\" ./scripts/make/build-docker.sh\n\nbuild-release: $(BUILD_RELEASE_DEPS_$(FRONTEND_PREBUILT))\n\t$(ENV) \"$(SHELL)\" ./scripts/make/build-release.sh\n\njs-build: ; $(NPM) $(NPM_FLAGS) run build-prod\njs-deps:  ; $(NPM) $(NPM_INSTALL_FLAGS) ci\njs-lint:  ; $(NPM) $(NPM_FLAGS) run lint\njs-test:  ; $(NPM) $(NPM_FLAGS) run test\n\ngo-bench:     ; $(ENV) \"$(SHELL)\"    ./scripts/make/go-bench.sh\ngo-build:     ; $(ENV) \"$(SHELL)\"    ./scripts/make/go-build.sh\ngo-deps:      ; $(ENV) \"$(SHELL)\"    ./scripts/make/go-deps.sh\ngo-env:       ; $(ENV) \"$(GO.MACRO)\" env\ngo-fuzz:      ; $(ENV) \"$(SHELL)\"    ./scripts/make/go-fuzz.sh\ngo-lint:      ; $(ENV) \"$(SHELL)\"    ./scripts/make/go-lint.sh\n# TODO(a.garipov): Think about making RACE='1' the default for all\n# targets.\ngo-test:      ; $(ENV) RACE='1' \"$(SHELL)\" ./scripts/make/go-test.sh\ngo-tools:     ; $(ENV)          \"$(SHELL)\" ./scripts/make/go-tools.sh\ngo-upd-tools: ; $(ENV)          \"$(SHELL)\" ./scripts/make/go-upd-tools.sh\n\ngo-check: go-tools go-lint go-test\n\n# A quick check to make sure that all operating systems relevant to the\n# development of the project can be typechecked and built successfully.\ngo-os-check:\n\t$(ENV) GOOS='darwin'  \"$(GO.MACRO)\" vet ./internal/...\n\t$(ENV) GOOS='freebsd' \"$(GO.MACRO)\" vet ./internal/...\n\t$(ENV) GOOS='openbsd' \"$(GO.MACRO)\" vet ./internal/...\n\t$(ENV) GOOS='linux'   \"$(GO.MACRO)\" vet ./internal/...\n\t$(ENV) GOOS='windows' \"$(GO.MACRO)\" vet ./internal/...\n\ntxt-lint: ; $(ENV) \"$(SHELL)\" ./scripts/make/txt-lint.sh\n\nmd-lint:  ; $(ENV_MISC) \"$(SHELL)\" ./scripts/make/md-lint.sh\nsh-lint:  ; $(ENV_MISC) \"$(SHELL)\" ./scripts/make/sh-lint.sh\n\nopenapi-lint: ; cd ./openapi/ && $(YARN) test\nopenapi-show: ; cd ./openapi/ && $(YARN) start\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 21.29,
          "content": "&nbsp;\n<p align=\"center\">\n  <picture>\n    <source media=\"(prefers-color-scheme: dark)\" srcset=\"doc/adguard_home_darkmode.svg\">\n    <img alt=\"AdGuard Home\" src=\"doc/adguard_home_lightmode.svg\" width=\"300px\">\n  </picture>\n</p>\n<h3 align=\"center\">Privacy protection center for you and your devices</h3>\n<p align=\"center\">\n  Free and open source, powerful network-wide ads & trackers blocking DNS server.\n</p>\n<p align=\"center\">\n  <a href=\"https://adguard.com/\">AdGuard.com</a> |\n  <a href=\"https://github.com/AdguardTeam/AdGuardHome/wiki\">Wiki</a> |\n  <a href=\"https://reddit.com/r/Adguard\">Reddit</a> |\n  <a href=\"https://twitter.com/AdGuard\">Twitter</a> |\n  <a href=\"https://t.me/adguard_en\">Telegram</a>\n  <br/><br/>\n  <a href=\"https://codecov.io/github/AdguardTeam/AdGuardHome?branch=master\">\n    <img src=\"https://img.shields.io/codecov/c/github/AdguardTeam/AdGuardHome/master.svg\" alt=\"Code Coverage\"/>\n  </a>\n  <a href=\"https://goreportcard.com/report/AdguardTeam/AdGuardHome\">\n    <img src=\"https://goreportcard.com/badge/github.com/AdguardTeam/AdGuardHome\" alt=\"Go Report Card\"/>\n  </a>\n  <a href=\"https://hub.docker.com/r/adguard/adguardhome\">\n    <img alt=\"Docker Pulls\" src=\"https://img.shields.io/docker/pulls/adguard/adguardhome.svg?maxAge=604800\"/>\n  </a>\n  <br/>\n  <a href=\"https://github.com/AdguardTeam/AdGuardHome/releases\">\n    <img src=\"https://img.shields.io/github/release/AdguardTeam/AdGuardHome/all.svg\" alt=\"Latest release\"/>\n  </a>\n  <a href=\"https://snapcraft.io/adguard-home\">\n    <img alt=\"adguard-home\" src=\"https://snapcraft.io/adguard-home/badge.svg\"/>\n  </a>\n</p>\n<br/>\n<p align=\"center\">\n  <img src=\"https://cdn.adtidy.org/public/Adguard/Common/adguard_home.gif\" width=\"800\"/>\n</p>\n<hr/>\n\nAdGuard Home is a network-wide software for blocking ads and tracking. After you set it up, it'll cover ALL your home devices, and you don't need any client-side software for that.\n\nIt operates as a DNS server that re-routes tracking domains to a “black hole”, thus preventing your devices from connecting to those servers. It's based on software we use for our public [AdGuard DNS] servers, and both share a lot of code.\n\n[AdGuard DNS]: https://adguard-dns.io/\n\n- [Getting Started](#getting-started)\n    - [Automated install (Linux/Unix/MacOS/FreeBSD/OpenBSD)](#automated-install-linux-and-mac)\n    - [Alternative methods](#alternative-methods)\n    - [Guides](#guides)\n    - [API](#api)\n- [Comparing AdGuard Home to other solutions](#comparison)\n    - [How is this different from public AdGuard DNS servers?](#comparison-adguard-dns)\n    - [How does AdGuard Home compare to Pi-Hole](#comparison-pi-hole)\n    - [How does AdGuard Home compare to traditional ad blockers](#comparison-adblock)\n    - [Known limitations](#comparison-limitations)\n- [How to build from source](#how-to-build)\n    - [Prerequisites](#prerequisites)\n    - [Building](#building)\n- [Contributing](#contributing)\n    - [Test unstable versions](#test-unstable-versions)\n    - [Reporting issues](#reporting-issues)\n    - [Help with translations](#translate)\n    - [Other](#help-other)\n- [Projects that use AdGuard Home](#uses)\n- [Acknowledgments](#acknowledgments)\n- [Privacy](#privacy)\n\n## <a href=\"#getting-started\" id=\"getting-started\" name=\"getting-started\">Getting Started</a>\n\n### <a href=\"#automated-install-linux-and-mac\" id=\"automated-install-linux-and-mac\" name=\"automated-install-linux-and-mac\">Automated install (Linux/Unix/MacOS/FreeBSD/OpenBSD)</a>\n\nTo install with `curl` run the following command:\n\n```sh\ncurl -s -S -L https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v\n```\n\nTo install with `wget` run the following command:\n\n```sh\nwget --no-verbose -O - https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v\n```\n\nTo install with `fetch` run the following command:\n\n```sh\nfetch -o - https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v\n```\n\nThe script also accepts some options:\n\n- `-c <channel>` to use specified channel;\n- `-r` to reinstall AdGuard Home;\n- `-u` to uninstall AdGuard Home;\n- `-v` for verbose output.\n\nNote that options `-r` and `-u` are mutually exclusive.\n\n### <a href=\"#alternative-methods\" id=\"alternative-methods\" name=\"alternative-methods\">Alternative methods</a>\n\n#### <a href=\"#manual-installation\" id=\"manual-installation\" name=\"manual-installation\">Manual installation</a>\n\nPlease read the **[Getting Started][wiki-start]** article on our Wiki to learn how to install AdGuard Home manually, and how to configure your devices to use it.\n\n#### <a href=\"#docker\" id=\"docker\" name=\"docker\">Docker</a>\n\nYou can use our official Docker image on [Docker Hub].\n\n#### <a href=\"#snap-store\" id=\"snap-store\" name=\"snap-store\">Snap Store</a>\n\nIf you're running **Linux,** there's a secure and easy way to install AdGuard Home: get it from the [Snap Store].\n\n[Docker Hub]: https://hub.docker.com/r/adguard/adguardhome\n[Snap Store]: https://snapcraft.io/adguard-home\n[wiki-start]: https://adguard-dns.io/kb/adguard-home/getting-started/\n\n### <a href=\"#guides\" id=\"guides\" name=\"guides\">Guides</a>\n\nSee our [Wiki][wiki].\n\n[wiki]: https://github.com/AdguardTeam/AdGuardHome/wiki\n\n### <a href=\"#api\" id=\"api\" name=\"api\">API</a>\n\nIf you want to integrate with AdGuard Home, you can use our [REST API][openapi]. Alternatively, you can use this [python client][pyclient], which is used to build the [AdGuard Home Hass.io Add-on][hassio].\n\n[hassio]:   https://www.home-assistant.io/integrations/adguard/\n[openapi]:  https://github.com/AdguardTeam/AdGuardHome/tree/master/openapi\n[pyclient]: https://pypi.org/project/adguardhome/\n\n## <a href=\"#comparison\" id=\"comparison\" name=\"comparison\">Comparing AdGuard Home to other solutions</a>\n\n### <a href=\"#comparison-adguard-dns\" id=\"comparison-adguard-dns\" name=\"comparison-adguard-dns\">How is this different from public AdGuard DNS servers?</a>\n\nRunning your own AdGuard Home server allows you to do much more than using a public DNS server. It's a completely different level. See for yourself:\n\n- Choose what exactly the server blocks and permits.\n\n- Monitor your network activity.\n\n- Add your own custom filtering rules.\n\n- **Most importantly, it's your own server, and you are the only one who's in control.**\n\n### <a href=\"#comparison-pi-hole\" id=\"comparison-pi-hole\" name=\"comparison-pi-hole\">How does AdGuard Home compare to Pi-Hole</a>\n\nAt this point, AdGuard Home has a lot in common with Pi-Hole. Both block ads and trackers using the so-called “DNS sinkholing” method and both allow customizing what's blocked.\n\n> [!NOTE]\n> We're not going to stop here. DNS sinkholing is not a bad starting point, but this is just the beginning.\n\nAdGuard Home provides a lot of features out-of-the-box with no need to install and configure additional software. We want it to be simple to the point when even casual users can set it up with minimal effort.\n\n> [!NOTE]\n> Some of the listed features can be added to Pi-Hole by installing additional software or by manually using SSH terminal and reconfiguring one of the utilities Pi-Hole consists of. However, in our opinion, this cannot be legitimately counted as a Pi-Hole's feature.\n\n| Feature                                                                 | AdGuard&nbsp;Home | Pi-Hole                                                   |\n|-------------------------------------------------------------------------|-------------------|-----------------------------------------------------------|\n| Blocking ads and trackers                                               | ✅                | ✅                                                        |\n| Customizing blocklists                                                  | ✅                | ✅                                                        |\n| Built-in DHCP server                                                    | ✅                | ✅                                                        |\n| HTTPS for the Admin interface                                           | ✅                | Kind of, but you'll need to manually configure lighttpd   |\n| Encrypted DNS upstream servers (DNS-over-HTTPS, DNS-over-TLS, DNSCrypt) | ✅                | ❌ (requires additional software)                         |\n| Cross-platform                                                          | ✅                | ❌ (not natively, only via Docker)                        |\n| Running as a DNS-over-HTTPS or DNS-over-TLS server                      | ✅                | ❌ (requires additional software)                         |\n| Blocking phishing and malware domains                                   | ✅                | ❌ (requires non-default blocklists)                      |\n| Parental control (blocking adult domains)                               | ✅                | ❌ (requires non-default blocklists)                      |\n| Force Safe search on search engines                                     | ✅                | ❌                                                        |\n| Per-client (device) configuration                                       | ✅                | ✅                                                        |\n| Access settings (choose who can use AGH DNS)                            | ✅                | ❌                                                        |\n| Running [without root privileges][wiki-noroot]                          | ✅                | ❌                                                        |\n\n[wiki-noroot]: https://adguard-dns.io/kb/adguard-home/getting-started/#running-without-superuser\n\n### <a href=\"#comparison-adblock\" id=\"comparison-adblock\" name=\"comparison-adblock\">How does AdGuard Home compare to traditional ad blockers</a>\n\nIt depends.\n\nDNS sinkholing is capable of blocking a big percentage of ads, but it lacks the flexibility and the power of traditional ad blockers. You can get a good impression about the difference between these methods by reading [this article][blog-adaway], which compares AdGuard for Android (a traditional ad blocker) to hosts-level ad blockers (which are almost identical to DNS-based blockers in their capabilities). This level of protection is enough for some users.\n\nAdditionally, using a DNS-based blocker can help to block ads, tracking and analytics requests on other types of devices, such as SmartTVs, smart speakers or other kinds of IoT devices (on which you can't install traditional ad blockers).\n\n### <a href=\"#comparison-limitations\" id=\"comparison-limitations\" name=\"comparison-limitations\">Known limitations</a>\n\nHere are some examples of what cannot be blocked by a DNS-level blocker:\n\n- YouTube, Twitch ads;\n\n- Facebook, Twitter, Instagram sponsored posts.\n\nEssentially, any advertising that shares a domain with content cannot be blocked by a DNS-level blocker.\n\nIs there a chance to handle this in the future?  DNS will never be enough to do this. Our only option is to use a content blocking proxy like what we do in the standalone AdGuard applications. We're [going to bring][issue-1228] this feature support to AdGuard Home in the future. Unfortunately, even in this case, there still will be cases when this won't be enough or would require quite a complicated configuration.\n\n[blog-adaway]: https://adguard.com/blog/adguard-vs-adaway-dns66.html\n[issue-1228]:  https://github.com/AdguardTeam/AdGuardHome/issues/1228\n\n## <a href=\"#how-to-build\" id=\"how-to-build\" name=\"how-to-build\">How to build from source</a>\n\n### <a href=\"#prerequisites\" id=\"prerequisites\" name=\"prerequisites\">Prerequisites</a>\n\nRun `make init` to prepare the development environment.\n\nYou will need this to build AdGuard Home:\n\n- [Go](https://golang.org/dl/) v1.23 or later;\n- [Node.js](https://nodejs.org/en/download/) v18.18 or later;\n- [npm](https://www.npmjs.com/) v8 or later;\n\n### <a href=\"#building\" id=\"building\" name=\"building\">Building</a>\n\nOpen your terminal and execute these commands:\n\n```sh\ngit clone https://github.com/AdguardTeam/AdGuardHome\ncd AdGuardHome\nmake\n```\n\n> [!WARNING]\n> The non-standard `-j` flag is currently not supported, so building with `make -j 4` or setting your `MAKEFLAGS` to include, for example, `-j 4` is likely to break the build. If you do have your `MAKEFLAGS` set to that, and you don't want to change it, you can override it by running `make -j 1`.\n\nCheck the [`Makefile`][src-makefile] to learn about other commands.\n\n#### <a href=\"#building-cross\" id=\"building-cross\" name=\"building-cross\">Building for a different platform</a>\n\nYou can build AdGuard Home for any OS/ARCH that Go supports. In order to do this, specify `GOOS` and `GOARCH` environment variables as macros when running `make`.\n\nFor example:\n\n```sh\nenv GOOS='linux' GOARCH='arm64' make\n```\n\nor:\n\n```sh\nmake GOOS='linux' GOARCH='arm64'\n```\n\n#### <a href=\"#preparing-releases\" id=\"preparing-releases\" name=\"preparing-releases\">Preparing releases</a>\n\nYou'll need [`snapcraft`] to prepare a release build. Once installed, run the following command:\n\n```sh\nmake build-release CHANNEL='...' VERSION='...'\n```\n\nSee the [`build-release` target documentation][targ-release].\n\n#### <a href=\"#docker-image\" id=\"docker-image\" name=\"docker-image\">Docker image</a>\n\nRun `make build-docker` to build the Docker image locally (the one that we publish to DockerHub). Please note, that we're using [Docker Buildx][buildx] to build our official image.\n\nYou may need to prepare before using these builds:\n\n- (Linux-only) Install Qemu:\n\n  ```sh\n  docker run --rm --privileged multiarch/qemu-user-static --reset -p yes --credential yes\n  ```\n\n- Prepare the builder:\n\n  ```sh\n  docker buildx create --name buildx-builder --driver docker-container --use\n  ```\n\nSee the [`build-docker` target documentation][targ-docker].\n\n#### <a href=\"#debugging-the-frontend\" id=\"debugging-the-frontend\" name=\"debugging-the-frontend\">Debugging the frontend</a>\n\nWhen you need to debug the frontend without recompiling the production version every time, for example to check how your labels would look on a form, you can run the frontend build a development environment.\n\n1. In a separate terminal, run:\n\n   ```sh\n   ( cd ./client/ && env NODE_ENV='development' npm run watch )\n   ```\n\n2. Run your `AdGuardHome` binary with the `--local-frontend` flag, which instructs AdGuard Home to ignore the built-in frontend files and use those from the `./build/` directory.\n\n3. Now any changes you make in the `./client/` directory should be recompiled and become available on the web UI. Make sure that you disable the browser cache to make sure that you actually get the recompiled version.\n\n[`snapcraft`]:  https://snapcraft.io/\n[buildx]:       https://docs.docker.com/buildx/working-with-buildx/\n[src-makefile]: https://github.com/AdguardTeam/AdGuardHome/blob/master/Makefile\n[targ-docker]:  https://github.com/AdguardTeam/AdGuardHome/tree/master/scripts#build-dockersh-build-a-multi-architecture-docker-image\n[targ-release]: https://github.com/AdguardTeam/AdGuardHome/tree/master/scripts#build-releasesh-build-a-release-for-all-platforms\n\n## <a href=\"#contributing\" id=\"contributing\" name=\"contributing\">Contributing</a>\n\nYou are welcome to fork this repository, make your changes and [submit a pull request][pr]. Please make sure you follow our [code guidelines][guide] though.\n\nPlease note that we don't expect people to contribute to both UI and backend parts of the program simultaneously. Ideally, the backend part is implemented first, i.e. configuration, API, and the functionality itself. The UI part can be implemented later in a different pull request by a different person.\n\n[guide]: https://github.com/AdguardTeam/CodeGuidelines/\n[pr]:    https://github.com/AdguardTeam/AdGuardHome/pulls\n\n### <a href=\"#test-unstable-versions\" id=\"test-unstable-versions\" name=\"test-unstable-versions\">Test unstable versions</a>\n\nThere are two update channels that you can use:\n\n- `beta`: beta versions of AdGuard Home. More or less stable versions, usually released every two weeks or more often.\n\n- `edge`: the newest version of AdGuard Home from the development branch. New updates are pushed to this channel daily.\n\nThere are three options how you can install an unstable version:\n\n1. [Snap Store]: look for the `beta` and `edge` channels.\n\n2. [Docker Hub]: look for the `beta` and `edge` tags.\n\n3. Standalone builds. Use the automated installation script or look for the available builds [on the Wiki][wiki-platf].\n\n   Script to install a beta version:\n\n   ```sh\n   curl -s -S -L https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -c beta\n   ```\n\n   Script to install an edge version:\n\n   ```sh\n   curl -s -S -L https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -c edge\n   ```\n\n[wiki-platf]: https://github.com/AdguardTeam/AdGuardHome/wiki/Platforms\n\n### <a href=\"#reporting-issues\" id=\"reporting-issues\" name=\"reporting-issues\">Report issues</a>\n\nIf you run into any problem or have a suggestion, head to [this page][iss] and click on the “New issue” button. Please follow the instructions in the issue form carefully and don't forget to start by searching for duplicates.\n\n[iss]: https://github.com/AdguardTeam/AdGuardHome/issues\n\n### <a href=\"#translate\" id=\"translate\" name=\"translate\">Help with translations</a>\n\nIf you want to help with AdGuard Home translations, please learn more about translating AdGuard products [in our Knowledge Base][kb-trans]. You can contribute to the [AdGuardHome project on CrowdIn][crowdin].\n\n[crowdin]:  https://crowdin.com/project/adguard-applications/en#/adguard-home\n[kb-trans]: https://kb.adguard.com/en/general/adguard-translations\n\n### <a href=\"#help-other\" id=\"help-other\" name=\"help-other\">Other</a>\n\nAnother way you can contribute is by [looking for issues][iss-help] marked as `help wanted`, asking if the issue is up for grabs, and sending a PR fixing the bug or implementing the feature.\n\n[iss-help]: https://github.com/AdguardTeam/AdGuardHome/issues?q=is%3Aissue+is%3Aopen+label%3A%22help+wanted%22\n\n## <a href=\"#uses\" id=\"uses\" name=\"uses\">Projects that use AdGuard Home</a>\n\nPlease note that these projects are not affiliated with AdGuard, but are made by third-party developers and fans.\n\n- [AdGuard Home Remote](https://apps.apple.com/app/apple-store/id1543143740): iOS app by [Joost](https://rocketscience-it.nl/).\n\n- [Python library](https://github.com/frenck/python-adguardhome) by [@frenck](https://github.com/frenck).\n\n- [Home Assistant add-on](https://github.com/hassio-addons/addon-adguard-home) by [@frenck](https://github.com/frenck).\n\n- [OpenWrt LUCI app](https://github.com/kongfl888/luci-app-adguardhome) by [@kongfl888](https://github.com/kongfl888) (originally by [@rufengsuixing](https://github.com/rufengsuixing)).\n\n- [AdGuardHome sync](https://github.com/bakito/adguardhome-sync) by [@bakito](https://github.com/bakito).\n\n- [Terminal-based, real-time traffic monitoring and statistics for your AdGuard Home instance](https://github.com/Lissy93/AdGuardian-Term) by [@Lissy93](https://github.com/Lissy93)\n\n- [AdGuard Home on GLInet routers](https://forum.gl-inet.com/t/adguardhome-on-gl-routers/10664) by [Gl-Inet](https://gl-inet.com/).\n\n- [Cloudron app](https://git.cloudron.io/cloudron/adguard-home-app) by [@gramakri](https://github.com/gramakri).\n\n- [Asuswrt-Merlin-AdGuardHome-Installer](https://github.com/jumpsmm7/Asuswrt-Merlin-AdGuardHome-Installer) by [@jumpsmm7](https://github.com/jumpsmm7) aka [@SomeWhereOverTheRainBow](https://www.snbforums.com/members/somewhereovertherainbow.64179/).\n\n- [Node.js library](https://github.com/Andrea055/AdguardHomeAPI) by [@Andrea055](https://github.com/Andrea055/).\n\n- [Browser Extension](https://github.com/satheshshiva/Adguard-Home-Browser-Ext) by [@satheshshiva](https://github.com/satheshshiva/).\n\n- [Zabbix Template for AdGuard Home](https://github.com/diasdmhub/AdGuard_Home_Zabbix_Template) by [@diasdmhub](https://github.com/diasdmhub).\n\n- [Chocolatey package](https://community.chocolatey.org/packages/adguardhome/) by [niks255](https://community.chocolatey.org/profiles/niks255).\n\n## <a href=\"#acknowledgments\" id=\"acknowledgments\" name=\"acknowledgments\">Acknowledgments</a>\n\nThis software wouldn't have been possible without:\n\n- [Go](https://golang.org/dl/) and its libraries:\n    - [gcache](https://github.com/bluele/gcache)\n    - [miekg's dns](https://github.com/miekg/dns)\n    - [go-yaml](https://github.com/go-yaml/yaml)\n    - [service](https://godoc.org/github.com/kardianos/service)\n    - [dnsproxy](https://github.com/AdguardTeam/dnsproxy)\n    - [urlfilter](https://github.com/AdguardTeam/urlfilter)\n- [Node.js](https://nodejs.org/) and its libraries:\n    - [React.js](https://reactjs.org)\n    - [Tabler](https://github.com/tabler/tabler)\n    - And many more Node.js packages.\n- [whotracks.me data](https://github.com/cliqz-oss/whotracks.me)\n\nYou might have seen that [CoreDNS] was mentioned here before, but we've stopped using it in AdGuard Home.\n\nFor the full list of all Node.js packages in use, please take a look at [`client/package.json`][src-packagejson] file.\n\n[CoreDNS]:         https://coredns.io\n[src-packagejson]: https://github.com/AdguardTeam/AdGuardHome/blob/master/client/package.json\n\n## <a href=\"#privacy\" id=\"privacy\" name=\"privacy\">Privacy</a>\n\nOur main idea is that you are the one, who should be in control of your data. So it is only natural, that AdGuard Home does not collect any usage statistics, and does not use any web services unless you configure it to do so. See also the [full privacy policy][privacy] with every bit that *could in theory be sent* by AdGuard Home is available.\n\n[privacy]: https://adguard.com/en/privacy/home.html\n"
        },
        {
          "name": "SECURITY.md",
          "type": "blob",
          "size": 0.66,
          "content": "# Security Policy\n\n## Reporting vulnerabilities\n\nPlease send your vulnerability reports to <security@adguard.com>.  To make sure that your report reaches us, please:\n\n1. Include the words “AdGuard Home” and “vulnerability” to the subject line as well as a short description of the vulnerability.  For example:\n\n   > AdGuard Home API vulnerability: possible XSS attack\n\n1. Make sure that the message body contains a clear description of the vulnerability.\n\nIf you have not received a reply to your email within 7 days, please make sure to follow up with us again at <security@adguard.com>.  Once again, make sure that the word “vulnerability” is in the subject line.\n"
        },
        {
          "name": "bamboo-specs",
          "type": "tree",
          "content": null
        },
        {
          "name": "build",
          "type": "tree",
          "content": null
        },
        {
          "name": "changelog.config.js",
          "type": "blob",
          "size": 0.87,
          "content": "module.exports = {\n    \"disableEmoji\": true,\n    \"list\": [\n        \"+ \",\n        \"* \",\n        \"- \",\n    ],\n    \"maxMessageLength\": 64,\n    \"minMessageLength\": 3,\n    \"questions\": [\n        \"type\",\n        \"scope\",\n        \"subject\",\n        \"body\",\n        \"issues\",\n    ],\n    \"scopes\": [\n        \"\",\n        \"ui\",\n        \"global\",\n        \"filtering\",\n        \"home\",\n        \"dnsforward\",\n        \"dhcpd\",\n        \"querylog\",\n        \"documentation\",\n    ],\n    \"types\": {\n        \"+ \": {\n            \"description\": \"A new feature\",\n            \"emoji\": \"\",\n            \"value\": \"+ \"\n        },\n        \"* \": {\n            \"description\": \"A code change that neither fixes a bug or adds a feature\",\n            \"emoji\": \"\",\n            \"value\": \"* \"\n        },\n        \"- \": {\n            \"description\": \"A bug fix\",\n            \"emoji\": \"\",\n            \"value\": \"- \"\n        }\n    }\n};\n"
        },
        {
          "name": "client",
          "type": "tree",
          "content": null
        },
        {
          "name": "doc",
          "type": "tree",
          "content": null
        },
        {
          "name": "docker",
          "type": "tree",
          "content": null
        },
        {
          "name": "go.mod",
          "type": "blob",
          "size": 2.62,
          "content": "module github.com/AdguardTeam/AdGuardHome\n\ngo 1.23.4\n\nrequire (\n\tgithub.com/AdguardTeam/dnsproxy v0.73.5\n\tgithub.com/AdguardTeam/golibs v0.31.0\n\tgithub.com/AdguardTeam/urlfilter v0.20.0\n\tgithub.com/NYTimes/gziphandler v1.1.1\n\tgithub.com/ameshkov/dnscrypt/v2 v2.3.0\n\tgithub.com/bluele/gcache v0.0.2\n\tgithub.com/c2h5oh/datasize v0.0.0-20231215233829-aa82cc1e6500\n\tgithub.com/digineo/go-ipset/v2 v2.2.1\n\tgithub.com/fsnotify/fsnotify v1.8.0\n\t// TODO(e.burkov): This package is deprecated; find a new one or use our\n\t// own code for that.  Perhaps, use gopacket.\n\tgithub.com/go-ping/ping v1.2.0\n\tgithub.com/google/go-cmp v0.6.0\n\tgithub.com/google/gopacket v1.1.19\n\tgithub.com/google/renameio/v2 v2.0.0\n\tgithub.com/google/uuid v1.6.0\n\tgithub.com/insomniacslk/dhcp v0.0.0-20241203100832-a481575ed0ef\n\tgithub.com/josharian/native v1.1.1-0.20230202152459-5c7d0dd6ab86\n\tgithub.com/kardianos/service v1.2.2\n\tgithub.com/mdlayher/ethernet v0.0.0-20220221185849-529eae5b6118\n\tgithub.com/mdlayher/netlink v1.7.2\n\tgithub.com/mdlayher/packet v1.1.2\n\t// TODO(a.garipov): This package is deprecated; find a new one or use our\n\t// own code for that.  Perhaps, use gopacket.\n\tgithub.com/mdlayher/raw v0.1.0\n\tgithub.com/miekg/dns v1.1.62\n\tgithub.com/quic-go/quic-go v0.48.2\n\tgithub.com/stretchr/testify v1.10.0\n\tgithub.com/ti-mo/netfilter v0.5.2\n\tgo.etcd.io/bbolt v1.3.11\n\tgolang.org/x/crypto v0.31.0\n\tgolang.org/x/exp v0.0.0-20241217172543-b2144cdd0a67\n\tgolang.org/x/net v0.33.0\n\tgolang.org/x/sys v0.28.0\n\tgopkg.in/natefinch/lumberjack.v2 v2.2.1\n\tgopkg.in/yaml.v3 v3.0.1\n\thowett.net/plist v1.0.1\n)\n\nrequire (\n\tgithub.com/aead/chacha20 v0.0.0-20180709150244-8b13a72661da // indirect\n\tgithub.com/aead/poly1305 v0.0.0-20180717145839-3fee0db0b635 // indirect\n\tgithub.com/ameshkov/dnsstamps v1.0.3 // indirect\n\tgithub.com/beefsack/go-rate v0.0.0-20220214233405-116f4ca011a0 // indirect\n\tgithub.com/davecgh/go-spew v1.1.1 // indirect\n\tgithub.com/go-task/slim-sprig/v3 v3.0.0 // indirect\n\tgithub.com/google/pprof v0.0.0-20241210010833-40e02aabc2ad // indirect\n\tgithub.com/mdlayher/socket v0.5.1 // indirect\n\tgithub.com/onsi/ginkgo/v2 v2.22.1 // indirect\n\tgithub.com/patrickmn/go-cache v2.1.0+incompatible // indirect\n\tgithub.com/pierrec/lz4/v4 v4.1.21 // indirect\n\tgithub.com/pkg/errors v0.9.1 // indirect\n\tgithub.com/pmezard/go-difflib v1.0.0 // indirect\n\tgithub.com/quic-go/qpack v0.5.1 // indirect\n\tgithub.com/u-root/uio v0.0.0-20240224005618-d2acac8f3701 // indirect\n\tgo.uber.org/mock v0.5.0 // indirect\n\tgolang.org/x/mod v0.22.0 // indirect\n\tgolang.org/x/sync v0.10.0 // indirect\n\tgolang.org/x/text v0.21.0 // indirect\n\tgolang.org/x/tools v0.28.0 // indirect\n\tgonum.org/v1/gonum v0.15.1 // indirect\n)\n"
        },
        {
          "name": "go.sum",
          "type": "blob",
          "size": 16.97,
          "content": "github.com/AdguardTeam/dnsproxy v0.73.5 h1:3EiVaTfmuW6PcJGbqloR6ZdHACsrYkm9z0eH8ZQTZnQ=\ngithub.com/AdguardTeam/dnsproxy v0.73.5/go.mod h1:Oqw+k7LyjDObfYzXYCkpgtirbzbUrmotr92jrb3N09I=\ngithub.com/AdguardTeam/golibs v0.31.0 h1:Z0oPfLTLw6iZmpE58dePy2Bel0MaX+lnDwtFEE5EmIo=\ngithub.com/AdguardTeam/golibs v0.31.0/go.mod h1:wIkZ9o2UnppeW6/YD7yJB71dYbMhiuC1Fh/I2ElW7GQ=\ngithub.com/AdguardTeam/urlfilter v0.20.0 h1:X32qiuVCVd8WDYCEsbdZKfXMzwdVqrdulamtUi4rmzs=\ngithub.com/AdguardTeam/urlfilter v0.20.0/go.mod h1:gjrywLTxfJh6JOkwi9SU+frhP7kVVEZ5exFGkR99qpk=\ngithub.com/NYTimes/gziphandler v1.1.1 h1:ZUDjpQae29j0ryrS0u/B8HZfJBtBQHjqw2rQ2cqUQ3I=\ngithub.com/NYTimes/gziphandler v1.1.1/go.mod h1:n/CVRwUEOgIxrgPvAQhUUr9oeUtvrhMomdKFjzJNB0c=\ngithub.com/aead/chacha20 v0.0.0-20180709150244-8b13a72661da h1:KjTM2ks9d14ZYCvmHS9iAKVt9AyzRSqNU1qabPih5BY=\ngithub.com/aead/chacha20 v0.0.0-20180709150244-8b13a72661da/go.mod h1:eHEWzANqSiWQsof+nXEI9bUVUyV6F53Fp89EuCh2EAA=\ngithub.com/aead/poly1305 v0.0.0-20180717145839-3fee0db0b635 h1:52m0LGchQBBVqJRyYYufQuIbVqRawmubW3OFGqK1ekw=\ngithub.com/aead/poly1305 v0.0.0-20180717145839-3fee0db0b635/go.mod h1:lmLxL+FV291OopO93Bwf9fQLQeLyt33VJRUg5VJ30us=\ngithub.com/ameshkov/dnscrypt/v2 v2.3.0 h1:pDXDF7eFa6Lw+04C0hoMh8kCAQM8NwUdFEllSP2zNLs=\ngithub.com/ameshkov/dnscrypt/v2 v2.3.0/go.mod h1:N5hDwgx2cNb4Ay7AhvOSKst+eUiOZ/vbKRO9qMpQttE=\ngithub.com/ameshkov/dnsstamps v1.0.3 h1:Srzik+J9mivH1alRACTbys2xOxs0lRH9qnTA7Y1OYVo=\ngithub.com/ameshkov/dnsstamps v1.0.3/go.mod h1:Ii3eUu73dx4Vw5O4wjzmT5+lkCwovjzaEZZ4gKyIH5A=\ngithub.com/beefsack/go-rate v0.0.0-20220214233405-116f4ca011a0 h1:0b2vaepXIfMsG++IsjHiI2p4bxALD1Y2nQKGMR5zDQM=\ngithub.com/beefsack/go-rate v0.0.0-20220214233405-116f4ca011a0/go.mod h1:6YNgTHLutezwnBvyneBbwvB8C82y3dcoOj5EQJIdGXA=\ngithub.com/bluele/gcache v0.0.2 h1:WcbfdXICg7G/DGBh1PFfcirkWOQV+v077yF1pSy3DGw=\ngithub.com/bluele/gcache v0.0.2/go.mod h1:m15KV+ECjptwSPxKhOhQoAFQVtUFjTVkc3H8o0t/fp0=\ngithub.com/c2h5oh/datasize v0.0.0-20231215233829-aa82cc1e6500 h1:6lhrsTEnloDPXyeZBvSYvQf8u86jbKehZPVDDlkgDl4=\ngithub.com/c2h5oh/datasize v0.0.0-20231215233829-aa82cc1e6500/go.mod h1:S/7n9copUssQ56c7aAgHqftWO4LTf4xY6CGWt8Bc+3M=\ngithub.com/davecgh/go-spew v1.1.0/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=\ngithub.com/davecgh/go-spew v1.1.1 h1:vj9j/u1bqnvCEfJOwUhtlOARqs3+rkHYY13jYWTU97c=\ngithub.com/davecgh/go-spew v1.1.1/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=\ngithub.com/digineo/go-ipset/v2 v2.2.1 h1:k6skY+0fMqeUjjeWO/m5OuWPSZUAn7AucHMnQ1MX77g=\ngithub.com/digineo/go-ipset/v2 v2.2.1/go.mod h1:wBsNzJlZlABHUITkesrggFnZQtgW5wkqw1uo8Qxe0VU=\ngithub.com/fsnotify/fsnotify v1.8.0 h1:dAwr6QBTBZIkG8roQaJjGof0pp0EeF+tNV7YBP3F/8M=\ngithub.com/fsnotify/fsnotify v1.8.0/go.mod h1:8jBTzvmWwFyi3Pb8djgCCO5IBqzKJ/Jwo8TRcHyHii0=\ngithub.com/go-logr/logr v1.4.2 h1:6pFjapn8bFcIbiKo3XT4j/BhANplGihG6tvd+8rYgrY=\ngithub.com/go-logr/logr v1.4.2/go.mod h1:9T104GzyrTigFIr8wt5mBrctHMim0Nb2HLGrmQ40KvY=\ngithub.com/go-ole/go-ole v1.2.6 h1:/Fpf6oFPoeFik9ty7siob0G6Ke8QvQEuVcuChpwXzpY=\ngithub.com/go-ole/go-ole v1.2.6/go.mod h1:pprOEPIfldk/42T2oK7lQ4v4JSDwmV0As9GaiUsvbm0=\ngithub.com/go-ping/ping v1.2.0 h1:vsJ8slZBZAXNCK4dPcI2PEE9eM9n9RbXbGouVQ/Y4yQ=\ngithub.com/go-ping/ping v1.2.0/go.mod h1:xIFjORFzTxqIV/tDVGO4eDy/bLuSyawEeojSm3GfRGk=\ngithub.com/go-task/slim-sprig/v3 v3.0.0 h1:sUs3vkvUymDpBKi3qH1YSqBQk9+9D/8M2mN1vB6EwHI=\ngithub.com/go-task/slim-sprig/v3 v3.0.0/go.mod h1:W848ghGpv3Qj3dhTPRyJypKRiqCdHZiAzKg9hl15HA8=\ngithub.com/google/go-cmp v0.2.0/go.mod h1:oXzfMopK8JAjlY9xF4vHSVASa0yLyX7SntLO5aqRK0M=\ngithub.com/google/go-cmp v0.5.6/go.mod h1:v8dTdLbMG2kIc/vJvl+f65V22dbkXbowE6jgT/gNBxE=\ngithub.com/google/go-cmp v0.5.7/go.mod h1:n+brtR0CgQNWTVd5ZUFpTBC8YFBDLK/h/bpaJ8/DtOE=\ngithub.com/google/go-cmp v0.6.0 h1:ofyhxvXcZhMsU5ulbFiLKl/XBFqE1GSq7atu8tAmTRI=\ngithub.com/google/go-cmp v0.6.0/go.mod h1:17dUlkBOakJ0+DkrSSNjCkIjxS6bF9zb3elmeNGIjoY=\ngithub.com/google/gopacket v1.1.19 h1:ves8RnFZPGiFnTS0uPQStjwru6uO6h+nlr9j6fL7kF8=\ngithub.com/google/gopacket v1.1.19/go.mod h1:iJ8V8n6KS+z2U1A8pUwu8bW5SyEMkXJB8Yo/Vo+TKTo=\ngithub.com/google/pprof v0.0.0-20241210010833-40e02aabc2ad h1:a6HEuzUHeKH6hwfN/ZoQgRgVIWFJljSWa/zetS2WTvg=\ngithub.com/google/pprof v0.0.0-20241210010833-40e02aabc2ad/go.mod h1:vavhavw2zAxS5dIdcRluK6cSGGPlZynqzFM8NdvU144=\ngithub.com/google/renameio/v2 v2.0.0 h1:UifI23ZTGY8Tt29JbYFiuyIU3eX+RNFtUwefq9qAhxg=\ngithub.com/google/renameio/v2 v2.0.0/go.mod h1:BtmJXm5YlszgC+TD4HOEEUFgkJP3nLxehU6hfe7jRt4=\ngithub.com/google/uuid v1.2.0/go.mod h1:TIyPZe4MgqvfeYDBFedMoGGpEw/LqOeaOT+nhxU+yHo=\ngithub.com/google/uuid v1.6.0 h1:NIvaJDMOsjHA8n1jAhLSgzrAzy1Hgr+hNrb57e+94F0=\ngithub.com/google/uuid v1.6.0/go.mod h1:TIyPZe4MgqvfeYDBFedMoGGpEw/LqOeaOT+nhxU+yHo=\ngithub.com/hugelgupf/socketpair v0.0.0-20190730060125-05d35a94e714 h1:/jC7qQFrv8CrSJVmaolDVOxTfS9kc36uB6H40kdbQq8=\ngithub.com/hugelgupf/socketpair v0.0.0-20190730060125-05d35a94e714/go.mod h1:2Goc3h8EklBH5mspfHFxBnEoURQCGzQQH1ga9Myjvis=\ngithub.com/insomniacslk/dhcp v0.0.0-20241203100832-a481575ed0ef h1:NzQKDfd5ZOPnuZYf9MnRee8x2qecsVqzsnaLjEZiBko=\ngithub.com/insomniacslk/dhcp v0.0.0-20241203100832-a481575ed0ef/go.mod h1:KclMyHxX06VrVr0DJmeFSUb1ankt7xTfoOA35pCkoic=\ngithub.com/jessevdk/go-flags v1.4.0/go.mod h1:4FA24M0QyGHXBuZZK/XkWh8h0e1EYbRYJSGM75WSRxI=\ngithub.com/josharian/native v1.0.0/go.mod h1:7X/raswPFr05uY3HiLlYeyQntB6OO7E/d2Cu7qoaN2w=\ngithub.com/josharian/native v1.1.1-0.20230202152459-5c7d0dd6ab86 h1:elKwZS1OcdQ0WwEDBeqxKwb7WB62QX8bvZ/FJnVXIfk=\ngithub.com/josharian/native v1.1.1-0.20230202152459-5c7d0dd6ab86/go.mod h1:aFAMtuldEgx/4q7iSGazk22+IcgvtiC+HIimFO9XlS8=\ngithub.com/kardianos/service v1.2.2 h1:ZvePhAHfvo0A7Mftk/tEzqEZ7Q4lgnR8sGz4xu1YX60=\ngithub.com/kardianos/service v1.2.2/go.mod h1:CIMRFEJVL+0DS1a3Nx06NaMn4Dz63Ng6O7dl0qH0zVM=\ngithub.com/kr/text v0.2.0 h1:5Nx0Ya0ZqY2ygV366QzturHI13Jq95ApcVaJBhpS+AY=\ngithub.com/kr/text v0.2.0/go.mod h1:eLer722TekiGuMkidMxC/pM04lWEeraHUUmBw8l2grE=\ngithub.com/lufia/plan9stats v0.0.0-20211012122336-39d0f177ccd0 h1:6E+4a0GO5zZEnZ81pIr0yLvtUWk2if982qA3F3QD6H4=\ngithub.com/lufia/plan9stats v0.0.0-20211012122336-39d0f177ccd0/go.mod h1:zJYVVT2jmtg6P3p1VtQj7WsuWi/y4VnjVBn7F8KPB3I=\ngithub.com/mdlayher/ethernet v0.0.0-20220221185849-529eae5b6118 h1:2oDp6OOhLxQ9JBoUuysVz9UZ9uI6oLUbvAZu0x8o+vE=\ngithub.com/mdlayher/ethernet v0.0.0-20220221185849-529eae5b6118/go.mod h1:ZFUnHIVchZ9lJoWoEGUg8Q3M4U8aNNWA3CVSUTkW4og=\ngithub.com/mdlayher/netlink v0.0.0-20190313131330-258ea9dff42c/go.mod h1:eQB3mZE4aiYnlUsyGGCOpPETfdQq4Jhsgf1fk3cwQaA=\ngithub.com/mdlayher/netlink v1.7.2 h1:/UtM3ofJap7Vl4QWCPDGXY8d3GIY2UGSDbK+QWmY8/g=\ngithub.com/mdlayher/netlink v1.7.2/go.mod h1:xraEF7uJbxLhc5fpHL4cPe221LI2bdttWlU+ZGLfQSw=\ngithub.com/mdlayher/packet v1.0.0/go.mod h1:eE7/ctqDhoiRhQ44ko5JZU2zxB88g+JH/6jmnjzPjOU=\ngithub.com/mdlayher/packet v1.1.2 h1:3Up1NG6LZrsgDVn6X4L9Ge/iyRyxFEFD9o6Pr3Q1nQY=\ngithub.com/mdlayher/packet v1.1.2/go.mod h1:GEu1+n9sG5VtiRE4SydOmX5GTwyyYlteZiFU+x0kew4=\ngithub.com/mdlayher/raw v0.1.0 h1:K4PFMVy+AFsp0Zdlrts7yNhxc/uXoPVHi9RzRvtZF2Y=\ngithub.com/mdlayher/raw v0.1.0/go.mod h1:yXnxvs6c0XoF/aK52/H5PjsVHmWBCFfZUfoh/Y5s9Sg=\ngithub.com/mdlayher/socket v0.2.1/go.mod h1:QLlNPkFR88mRUNQIzRBMfXxwKal8H7u1h3bL1CV+f0E=\ngithub.com/mdlayher/socket v0.5.1 h1:VZaqt6RkGkt2OE9l3GcC6nZkqD3xKeQLyfleW/uBcos=\ngithub.com/mdlayher/socket v0.5.1/go.mod h1:TjPLHI1UgwEv5J1B5q0zTZq12A/6H7nKmtTanQE37IQ=\ngithub.com/miekg/dns v1.1.62 h1:cN8OuEF1/x5Rq6Np+h1epln8OiyPWV+lROx9LxcGgIQ=\ngithub.com/miekg/dns v1.1.62/go.mod h1:mvDlcItzm+br7MToIKqkglaGhlFMHJ9DTNNWONWXbNQ=\ngithub.com/niemeyer/pretty v0.0.0-20200227124842-a10e7caefd8e h1:fD57ERR4JtEqsWbfPhv4DMiApHyliiK5xCTNVSPiaAs=\ngithub.com/niemeyer/pretty v0.0.0-20200227124842-a10e7caefd8e/go.mod h1:zD1mROLANZcx1PVRCS0qkT7pwLkGfwJo4zjcN/Tysno=\ngithub.com/onsi/ginkgo/v2 v2.22.1 h1:QW7tbJAUDyVDVOM5dFa7qaybo+CRfR7bemlQUN6Z8aM=\ngithub.com/onsi/ginkgo/v2 v2.22.1/go.mod h1:S6aTpoRsSq2cZOd+pssHAlKW/Q/jZt6cPrPlnj4a1xM=\ngithub.com/onsi/gomega v1.36.1 h1:bJDPBO7ibjxcbHMgSCoo4Yj18UWbKDlLwX1x9sybDcw=\ngithub.com/onsi/gomega v1.36.1/go.mod h1:PvZbdDc8J6XJEpDK4HCuRBm8a6Fzp9/DmhC9C7yFlog=\ngithub.com/patrickmn/go-cache v2.1.0+incompatible h1:HRMgzkcYKYpi3C8ajMPV8OFXaaRUnok+kx1WdO15EQc=\ngithub.com/patrickmn/go-cache v2.1.0+incompatible/go.mod h1:3Qf8kWWT7OJRJbdiICTKqZju1ZixQ/KpMGzzAfe6+WQ=\ngithub.com/pierrec/lz4/v4 v4.1.21 h1:yOVMLb6qSIDP67pl/5F7RepeKYu/VmTyEXvuMI5d9mQ=\ngithub.com/pierrec/lz4/v4 v4.1.21/go.mod h1:gZWDp/Ze/IJXGXf23ltt2EXimqmTUXEy0GFuRQyBid4=\ngithub.com/pkg/errors v0.8.1/go.mod h1:bwawxfHBFNV+L2hUp1rHADufV3IMtnDRdf1r5NINEl0=\ngithub.com/pkg/errors v0.9.1 h1:FEBLx1zS214owpjy7qsBeixbURkuhQAwrK5UwLGTwt4=\ngithub.com/pkg/errors v0.9.1/go.mod h1:bwawxfHBFNV+L2hUp1rHADufV3IMtnDRdf1r5NINEl0=\ngithub.com/pmezard/go-difflib v1.0.0 h1:4DBwDE0NGyQoBHbLQYPwSUPoCMWR5BEzIk/f1lZbAQM=\ngithub.com/pmezard/go-difflib v1.0.0/go.mod h1:iKH77koFhYxTK1pcRnkKkqfTogsbg7gZNVY4sRDYZ/4=\ngithub.com/power-devops/perfstat v0.0.0-20210106213030-5aafc221ea8c h1:ncq/mPwQF4JjgDlrVEn3C11VoGHZN7m8qihwgMEtzYw=\ngithub.com/power-devops/perfstat v0.0.0-20210106213030-5aafc221ea8c/go.mod h1:OmDBASR4679mdNQnz2pUhc2G8CO2JrUAVFDRBDP/hJE=\ngithub.com/quic-go/qpack v0.5.1 h1:giqksBPnT/HDtZ6VhtFKgoLOWmlyo9Ei6u9PqzIMbhI=\ngithub.com/quic-go/qpack v0.5.1/go.mod h1:+PC4XFrEskIVkcLzpEkbLqq1uCoxPhQuvK5rH1ZgaEg=\ngithub.com/quic-go/quic-go v0.48.2 h1:wsKXZPeGWpMpCGSWqOcqpW2wZYic/8T3aqiOID0/KWE=\ngithub.com/quic-go/quic-go v0.48.2/go.mod h1:yBgs3rWBOADpga7F+jJsb6Ybg1LSYiQvwWlLX+/6HMs=\ngithub.com/shirou/gopsutil/v3 v3.24.5 h1:i0t8kL+kQTvpAYToeuiVk3TgDeKOFioZO3Ztz/iZ9pI=\ngithub.com/shirou/gopsutil/v3 v3.24.5/go.mod h1:bsoOS1aStSs9ErQ1WWfxllSeS1K5D+U30r2NfcubMVk=\ngithub.com/shoenig/go-m1cpu v0.1.6 h1:nxdKQNcEB6vzgA2E2bvzKIYRuNj7XNJ4S/aRSwKzFtM=\ngithub.com/shoenig/go-m1cpu v0.1.6/go.mod h1:1JJMcUBvfNwpq05QDQVAnx3gUHr9IYF7GNg9SUEw2VQ=\ngithub.com/stretchr/objx v0.1.0/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=\ngithub.com/stretchr/objx v0.5.2 h1:xuMeJ0Sdp5ZMRXx/aWO6RZxdr3beISkG5/G/aIRr3pY=\ngithub.com/stretchr/objx v0.5.2/go.mod h1:FRsXN1f5AsAjCGJKqEizvkpNtU+EGNCLh3NxZ/8L+MA=\ngithub.com/stretchr/testify v1.3.0/go.mod h1:M5WIy9Dh21IEIfnGCwXGc5bZfKNJtfHm1UVUgZn+9EI=\ngithub.com/stretchr/testify v1.10.0 h1:Xv5erBjTwe/5IxqUQTdXv5kgmIvbHo3QQyRwhJsOfJA=\ngithub.com/stretchr/testify v1.10.0/go.mod h1:r2ic/lqez/lEtzL7wO/rwa5dbSLXVDPFyf8C91i36aY=\ngithub.com/ti-mo/netfilter v0.2.0/go.mod h1:8GbBGsY/8fxtyIdfwy29JiluNcPK4K7wIT+x42ipqUU=\ngithub.com/ti-mo/netfilter v0.5.2 h1:CTjOwFuNNeZ9QPdRXt1MZFLFUf84cKtiQutNauHWd40=\ngithub.com/ti-mo/netfilter v0.5.2/go.mod h1:Btx3AtFiOVdHReTDmP9AE+hlkOcvIy403u7BXXbWZKo=\ngithub.com/tklauser/go-sysconf v0.3.12 h1:0QaGUFOdQaIVdPgfITYzaTegZvdCjmYO52cSFAEVmqU=\ngithub.com/tklauser/go-sysconf v0.3.12/go.mod h1:Ho14jnntGE1fpdOqQEEaiKRpvIavV0hSfmBq8nJbHYI=\ngithub.com/tklauser/numcpus v0.6.1 h1:ng9scYS7az0Bk4OZLvrNXNSAO2Pxr1XXRAPyjhIx+Fk=\ngithub.com/tklauser/numcpus v0.6.1/go.mod h1:1XfjsgE2zo8GVw7POkMbHENHzVg3GzmoZ9fESEdAacY=\ngithub.com/u-root/uio v0.0.0-20240224005618-d2acac8f3701 h1:pyC9PaHYZFgEKFdlp3G8RaCKgVpHZnecvArXvPXcFkM=\ngithub.com/u-root/uio v0.0.0-20240224005618-d2acac8f3701/go.mod h1:P3a5rG4X7tI17Nn3aOIAYr5HbIMukwXG0urG0WuL8OA=\ngithub.com/yusufpapurcu/wmi v1.2.4 h1:zFUKzehAFReQwLys1b/iSMl+JQGSCSjtVqQn9bBrPo0=\ngithub.com/yusufpapurcu/wmi v1.2.4/go.mod h1:SBZ9tNy3G9/m5Oi98Zks0QjeHVDvuK0qfxQmPyzfmi0=\ngo.etcd.io/bbolt v1.3.11 h1:yGEzV1wPz2yVCLsD8ZAiGHhHVlczyC9d1rP43/VCRJ0=\ngo.etcd.io/bbolt v1.3.11/go.mod h1:dksAq7YMXoljX0xu6VF5DMZGbhYYoLUalEiSySYAS4I=\ngo.uber.org/mock v0.5.0 h1:KAMbZvZPyBPWgD14IrIQ38QCyjwpvVVV6K/bHl1IwQU=\ngo.uber.org/mock v0.5.0/go.mod h1:ge71pBPLYDk7QIi1LupWxdAykm7KIEFchiOqd6z7qMM=\ngolang.org/x/crypto v0.0.0-20190308221718-c2843e01d9a2/go.mod h1:djNgcEr1/C05ACkg1iLfiJU5Ep61QUkGW8qpdssI0+w=\ngolang.org/x/crypto v0.0.0-20191011191535-87dc89f01550/go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=\ngolang.org/x/crypto v0.31.0 h1:ihbySMvVjLAeSH1IbfcRTkD/iNscyz8rGzjF/E5hV6U=\ngolang.org/x/crypto v0.31.0/go.mod h1:kDsLvtWBEx7MV9tJOj9bnXsPbxwJQ6csT/x4KIN4Ssk=\ngolang.org/x/exp v0.0.0-20241217172543-b2144cdd0a67 h1:1UoZQm6f0P/ZO0w1Ri+f+ifG/gXhegadRdwBIXEFWDo=\ngolang.org/x/exp v0.0.0-20241217172543-b2144cdd0a67/go.mod h1:qj5a5QZpwLU2NLQudwIN5koi3beDhSAlJwa67PuM98c=\ngolang.org/x/lint v0.0.0-20200302205851-738671d3881b/go.mod h1:3xt1FjdF8hUf6vQPIChWIBhFzV8gjjsPE/fR3IyQdNY=\ngolang.org/x/mod v0.1.1-0.20191105210325-c90efee705ee/go.mod h1:QqPTAvyqsEbceGzBzNggFXnrqF1CaUcvgkdR5Ot7KZg=\ngolang.org/x/mod v0.22.0 h1:D4nJWe9zXqHOmWqj4VMOJhvzj7bEZg4wEYa759z1pH4=\ngolang.org/x/mod v0.22.0/go.mod h1:6SkKJ3Xj0I0BrPOZoBy3bdMptDDU9oJrpohJ3eWZ1fY=\ngolang.org/x/net v0.0.0-20190311183353-d8887717615a/go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=\ngolang.org/x/net v0.0.0-20190404232315-eb5bcb51f2a3/go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=\ngolang.org/x/net v0.0.0-20190503192946-f4e77d36d62c/go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=\ngolang.org/x/net v0.0.0-20190603091049-60506f45cf65/go.mod h1:HSz+uSET+XFnRR8LxR5pz3Of3rY3CfYBVs4xY44aLks=\ngolang.org/x/net v0.0.0-20190620200207-3b0461eec859/go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4/5GtJWs/s=\ngolang.org/x/net v0.0.0-20210316092652-d523dce5a7f4/go.mod h1:RBQZq4jEuRlivfhVLdyRGr576XBO4/greRjx4P4O3yc=\ngolang.org/x/net v0.33.0 h1:74SYHlV8BIgHIFC/LrYkOGIwL19eTYXQ5wc6TBuO36I=\ngolang.org/x/net v0.33.0/go.mod h1:HXLR5J+9DxmrqMwG9qjGCxZ+zKXxBru04zlTvWlWuN4=\ngolang.org/x/sync v0.0.0-20190423024810-112230192c58/go.mod h1:RxMgew5VJxzue5/jJTE5uejpjVlOe/izrB70Jof72aM=\ngolang.org/x/sync v0.0.0-20210220032951-036812b2e83c/go.mod h1:RxMgew5VJxzue5/jJTE5uejpjVlOe/izrB70Jof72aM=\ngolang.org/x/sync v0.10.0 h1:3NQrjDixjgGwUOCaF8w2+VYHv0Ve/vGYSbdkTa98gmQ=\ngolang.org/x/sync v0.10.0/go.mod h1:Czt+wKu1gCyEFDUtn0jG5QVvpJ6rzVqr5aXyt9drQfk=\ngolang.org/x/sys v0.0.0-20190215142949-d0b11bdaac8a/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\ngolang.org/x/sys v0.0.0-20190312061237-fead79001313/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20190322080309-f49334f85ddc/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20190412213103-97732733099d/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20201015000850-e3ed0017c211/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20201119102817-f84b799fce68/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20210315160823-c6e025ad8005/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20210927094055-39ccf1dd6fa6/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=\ngolang.org/x/sys v0.0.0-20220209214540-3681064d5158/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=\ngolang.org/x/sys v0.4.1-0.20230131160137-e7d7f63158de/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=\ngolang.org/x/sys v0.28.0 h1:Fksou7UEQUWlKvIdsqzJmUmCX3cZuD2+P3XyyzwMhlA=\ngolang.org/x/sys v0.28.0/go.mod h1:/VUhepiaJMQUp4+oa/7Zr1D23ma6VTLIYjOOTFZPUcA=\ngolang.org/x/term v0.0.0-20201126162022-7de9c90e9dd1/go.mod h1:bj7SfCRtBDWHUb9snDiAeCFNEtKQo2Wmx5Cou7ajbmo=\ngolang.org/x/text v0.3.0/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=\ngolang.org/x/text v0.3.3/go.mod h1:5Zoc/QRtKVWzQhOtBMvqHzDpF6irO9z98xDceosuGiQ=\ngolang.org/x/text v0.21.0 h1:zyQAAkrwaneQ066sspRyJaG9VNi/YJ1NfzcGB3hZ/qo=\ngolang.org/x/text v0.21.0/go.mod h1:4IBbMaMmOPCJ8SecivzSH54+73PCFmPWxNTLm+vZkEQ=\ngolang.org/x/time v0.5.0 h1:o7cqy6amK/52YcAKIPlM3a+Fpj35zvRj2TP+e1xFSfk=\ngolang.org/x/time v0.5.0/go.mod h1:3BpzKBy/shNhVucY/MWOyx10tF3SFh9QdLuxbVysPQM=\ngolang.org/x/tools v0.0.0-20180917221912-90fa682c2a6e/go.mod h1:n7NCudcB/nEzxVGmLbDWY5pfWTLqBcC2KZ6jyYvM4mQ=\ngolang.org/x/tools v0.0.0-20200130002326-2f3ba24bd6e7/go.mod h1:TB2adYChydJhpapKDTa4BR/hXlZSLoq2Wpct/0txZ28=\ngolang.org/x/tools v0.28.0 h1:WuB6qZ4RPCQo5aP3WdKZS7i595EdWqWR8vqJTlwTVK8=\ngolang.org/x/tools v0.28.0/go.mod h1:dcIOrVd3mfQKTgrDVQHqCPMWy6lnhfhtX3hLXYVLfRw=\ngolang.org/x/xerrors v0.0.0-20191011141410-1b5146add898/go.mod h1:I/5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=\ngolang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543/go.mod h1:I/5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=\ngonum.org/v1/gonum v0.15.1 h1:FNy7N6OUZVUaWG9pTiD+jlhdQ3lMP+/LcTpJ6+a8sQ0=\ngonum.org/v1/gonum v0.15.1/go.mod h1:eZTZuRFrzu5pcyjN5wJhcIhnUdNijYxX1T2IcrOGY0o=\ngoogle.golang.org/protobuf v1.35.1 h1:m3LfL6/Ca+fqnjnlqQXNpFPABW1UD7mjh8KO2mKFytA=\ngoogle.golang.org/protobuf v1.35.1/go.mod h1:9fA7Ob0pmnwhb644+1+CVWFRbNajQ6iRojtC/QF5bRE=\ngopkg.in/check.v1 v0.0.0-20161208181325-20d25e280405/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=\ngopkg.in/check.v1 v1.0.0-20200227125254-8fa46927fb4f h1:BLraFXnmrev5lT+xlilqcH8XK9/i0At2xKjWk4p6zsU=\ngopkg.in/check.v1 v1.0.0-20200227125254-8fa46927fb4f/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=\ngopkg.in/natefinch/lumberjack.v2 v2.2.1 h1:bBRl1b0OH9s/DuPhuXpNl+VtCaJXFZ5/uEFST95x9zc=\ngopkg.in/natefinch/lumberjack.v2 v2.2.1/go.mod h1:YD8tP3GAjkrDg1eZH7EGmyESg/lsYskCTPBJVb9jqSc=\ngopkg.in/yaml.v1 v1.0.0-20140924161607-9f9df34309c0/go.mod h1:WDnlLJ4WF5VGsH/HVa3CI79GS0ol3YnhVnKP89i0kNg=\ngopkg.in/yaml.v3 v3.0.1 h1:fxVm/GzAzEWqLHuvctI91KS9hhNmmWOoWu0XTYJS7CA=\ngopkg.in/yaml.v3 v3.0.1/go.mod h1:K4uyk7z7BCEPqu6E+C64Yfv1cQ7kz7rIZviUmN+EgEM=\nhowett.net/plist v1.0.1 h1:37GdZ8tP09Q35o9ych3ehygcsL+HqKSwzctveSlarvM=\nhowett.net/plist v1.0.1/go.mod h1:lqaXoTrLY4hg8tnEzNru53gicrbv7rrk+2xJA/7hw9g=\n"
        },
        {
          "name": "internal",
          "type": "tree",
          "content": null
        },
        {
          "name": "main.go",
          "type": "blob",
          "size": 0.5,
          "content": "//go:build !next\n\npackage main\n\nimport (\n\t\"embed\"\n\t// Embed tzdata in binary.\n\t//\n\t// See https://github.com/AdguardTeam/AdGuardHome/issues/6758\n\t_ \"time/tzdata\"\n\n\t\"github.com/AdguardTeam/AdGuardHome/internal/home\"\n)\n\n// Embed the prebuilt client here since we strive to keep .go files inside the\n// internal directory and the embed package is unable to embed files located\n// outside of the same or underlying directory.\n\n//go:embed build\nvar clientBuildFS embed.FS\n\nfunc main() {\n\thome.Main(clientBuildFS)\n}\n"
        },
        {
          "name": "main_next.go",
          "type": "blob",
          "size": 0.38,
          "content": "//go:build next\n\npackage main\n\nimport (\n\t\"embed\"\n\n\t\"github.com/AdguardTeam/AdGuardHome/internal/next/cmd\"\n)\n\n// Embed the prebuilt client here since we strive to keep .go files inside the\n// internal directory and the embed package is unable to embed files located\n// outside of the same or underlying directory.\n\n//go:embed build\nvar frontend embed.FS\n\nfunc main() {\n\tcmd.Main(frontend)\n}\n"
        },
        {
          "name": "openapi",
          "type": "tree",
          "content": null
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "snap",
          "type": "tree",
          "content": null
        },
        {
          "name": "staticcheck.conf",
          "type": "blob",
          "size": 0.39,
          "content": "checks = [\"all\"]\ninitialisms = [\n  # See https://github.com/dominikh/go-tools/blob/master/config/config.go.\n  #\n  # Do not add \"PTR\" since we use \"Ptr\" as a suffix.\n  \"inherit\"\n, \"ASN\"\n, \"DHCP\"\n, \"DNSSEC\"\n  # E.g. SentryDSN.\n, \"DSN\"\n, \"ECS\"\n, \"EDNS\"\n, \"MX\"\n, \"QUIC\"\n, \"RA\"\n, \"RRSIG\"\n, \"SDNS\"\n, \"SLAAC\"\n, \"SOA\"\n, \"SVCB\"\n, \"TLD\"\n, \"WHOIS\"\n]\ndot_import_whitelist = []\nhttp_status_code_whitelist = []\n"
        }
      ]
    }
  ]
}