{
  "metadata": {
    "timestamp": 1736567019864,
    "page": 600,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjYwMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "ph4ntonn/Stowaway",
      "stars": 2867,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.02734375,
          "content": "release/\n.vscode/\n.DS_Store\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0390625,
          "content": "MIT License\n\nCopyright (c) 2021 ph4ntom\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 4.517578125,
          "content": "BUILD_ENV = CGO_ENABLED=0\nOPTIONS = -trimpath -ldflags \"-w -s\"\n\n.PHONY: all admin agent linux_agent windows_agent macos_agent mips_agent arm_agent windows_admin linux_admin macos_admin windows_nogui_agent clean\n\nall: admin agent\n\nadmin:\n\t${BUILD_ENV} GOOS=linux GOARCH=386 go build ${OPTIONS} -o release/linux_x86_admin admin/admin.go\n\t${BUILD_ENV} GOOS=linux GOARCH=amd64 go build ${OPTIONS} -o release/linux_x64_admin admin/admin.go\n\t${BUILD_ENV} GOOS=linux GOARCH=arm64 go build ${OPTIONS} -o release/linux_arm64_admin admin/admin.go\n\t${BUILD_ENV} GOOS=windows GOARCH=amd64 go build ${OPTIONS} -o release/windows_x64_admin.exe admin/admin_win.go\n\t${BUILD_ENV} GOOS=windows GOARCH=386 go build ${OPTIONS} -o release/windows_x86_admin.exe admin/admin_win.go\n\t${BUILD_ENV} GOOS=darwin GOARCH=amd64 go build ${OPTIONS} -o release/macos_x64_admin admin/admin.go\n\t${BUILD_ENV} GOOS=darwin GOARCH=arm64 go build ${OPTIONS} -o release/macos_arm64_admin admin/admin.go\n\nagent:\n\t${BUILD_ENV} GOOS=linux GOARCH=386 go build ${OPTIONS} -o release/linux_x86_agent agent/agent.go\n\t${BUILD_ENV} GOOS=linux GOARCH=amd64 go build ${OPTIONS} -o release/linux_x64_agent agent/agent.go\n\t${BUILD_ENV} GOOS=linux GOARCH=arm64 go build ${OPTIONS} -o release/linux_arm64_agent agent/agent.go\n\t${BUILD_ENV} GOOS=windows GOARCH=amd64 go build ${OPTIONS} -o release/windows_x64_agent.exe agent/agent.go\n\t${BUILD_ENV} GOOS=windows GOARCH=386 go build ${OPTIONS} -o release/windows_x86_agent.exe agent/agent.go\n\t${BUILD_ENV} GOOS=darwin GOARCH=amd64 go build ${OPTIONS} -o release/macos_x64_agent agent/agent.go\n\t${BUILD_ENV} GOOS=darwin GOARCH=arm64 go build ${OPTIONS} -o release/macos_arm64_agent agent/agent.go\n\t${BUILD_ENV} GOOS=linux GOARCH=arm GOARM=5 go build ${OPTIONS} -o release/arm_eabi5_agent agent/agent.go\n\t${BUILD_ENV} GOOS=linux GOARCH=mipsle go build ${OPTIONS} -o release/mipsel_agent agent/agent.go\n\nlinux_agent:\n\t${BUILD_ENV} GOOS=linux GOARCH=386 go build ${OPTIONS} -o release/linux_x86_agent agent/agent.go\n\t${BUILD_ENV} GOOS=linux GOARCH=amd64 go build ${OPTIONS} -o release/linux_x64_agent agent/agent.go\n\t${BUILD_ENV} GOOS=linux GOARCH=arm64 go build ${OPTIONS} -o release/linux_arm64_agent agent/agent.go\n\nwindows_agent:\n\t${BUILD_ENV} GOOS=windows GOARCH=amd64 go build ${OPTIONS} -o release/windows_x64_agent.exe agent/agent.go\n\t${BUILD_ENV} GOOS=windows GOARCH=386 go build ${OPTIONS} -o release/windows_x86_agent.exe agent/agent.go\n\nmacos_agent:\n\t${BUILD_ENV} GOOS=darwin GOARCH=amd64 go build ${OPTIONS} -o release/macos_x64_agent agent/agent.go\n\t${BUILD_ENV} GOOS=darwin GOARCH=arm64 go build ${OPTIONS} -o release/macos_arm64_agent agent/agent.go\n\nmips_agent:\n\t${BUILD_ENV} GOOS=linux GOARCH=mipsle go build ${OPTIONS} -o release/mipsel_agent agent/agent.go\n\narm_agent:\n\t${BUILD_ENV} GOOS=linux GOARCH=arm GOARM=5 go build ${OPTIONS} -o release/arm_eabi5_agent agent/agent.go\n\nwindows_admin:\n\t${BUILD_ENV} GOOS=windows GOARCH=amd64 go build ${OPTIONS} -o release/windows_x64_admin.exe admin/admin_win.go\n\t${BUILD_ENV} GOOS=windows GOARCH=386 go build ${OPTIONS} -o release/windows_x86_admin.exe admin/admin_win.go\n\nlinux_admin:\n\t${BUILD_ENV} GOOS=linux GOARCH=386 go build ${OPTIONS} -o release/linux_x86_admin admin/admin.go\n\t${BUILD_ENV} GOOS=linux GOARCH=amd64 go build ${OPTIONS} -o release/linux_x64_admin admin/admin.go\n\t${BUILD_ENV} GOOS=linux GOARCH=arm64 go build ${OPTIONS} -o release/linux_arm64_admin admin/admin.go\n\nmacos_admin:\n\t${BUILD_ENV} GOOS=darwin GOARCH=amd64 go build ${OPTIONS} -o release/macos_x64_admin admin/admin.go\n\t${BUILD_ENV} GOOS=darwin GOARCH=arm64 go build ${OPTIONS} -o release/macos_arm64_admin admin/admin.go\n\n# Here is a special situation\n# You can see Stowaway get the params passed by the user through console by default\n# But if you define the params in the program(instead of passing them by the console),you can just run Stowaway agent by double-click\n# Sounds great? Right?\n# But it is slightly weird on Windows since double-clicking Stowaway agent or entering \"shell\" command in Stowaway admin will spawn a cmd window\n# That makes Stowaway pretty hard to hide itself\n# To solve this,here is my solution\n# First, check the detail in \"agent/shell.go\", follow my instruction and change some codes\n# Then, run `make windows_nogui_agent` and get your bonus!\n\nwindows_nogui_agent:\n\t${BUILD_ENV} GOOS=windows GOARCH=amd64 go build -trimpath -ldflags=\"-w -s -H=windowsgui\" -o release/windows_x64_agent.exe agent/agent.go \n\t${BUILD_ENV} GOOS=windows GOARCH=386 go build -trimpath -ldflags=\"-w -s -H=windowsgui\" -o release/windows_x86_agent.exe agent/agent.go \n\nclean:\n\t@rm release/*"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 26.3740234375,
          "content": "![stowaway.png](https://github.com/ph4ntonn/Stowaway/blob/master/img/logo.png)\n\n# Stowaway\n\n[![GitHub issues](https://img.shields.io/github/issues/ph4ntonn/Stowaway)](https://github.com/ph4ntonn/Stowaway/issues)\n[![GitHub forks](https://img.shields.io/github/forks/ph4ntonn/Stowaway)](https://github.com/ph4ntonn/Stowaway/network)\n[![GitHub stars](https://img.shields.io/github/stars/ph4ntonn/Stowaway)](https://github.com/ph4ntonn/Stowaway/stargazers)\n[![GitHub license](https://img.shields.io/github/license/ph4ntonn/Stowaway)](https://github.com/ph4ntonn/Stowaway/blob/master/LICENSE)\n\n[English](README_EN.md)\n\nStowawayæ˜¯ä¸€ä¸ªåˆ©ç”¨goè¯­è¨€ç¼–å†™ã€ä¸“ä¸ºæ¸—é€æµ‹è¯•å·¥ä½œè€…åˆ¶ä½œçš„å¤šçº§ä»£ç†å·¥å…·\n\nç”¨æˆ·å¯ä½¿ç”¨æ­¤ç¨‹åºå°†å¤–éƒ¨æµé‡é€šè¿‡å¤šä¸ªèŠ‚ç‚¹ä»£ç†è‡³å†…ç½‘ï¼Œçªç ´å†…ç½‘è®¿é—®é™åˆ¶ï¼Œæ„é€ æ ‘çŠ¶èŠ‚ç‚¹ç½‘ç»œï¼Œå¹¶è½»æ¾å®ç°ç®¡ç†åŠŸèƒ½\n\nè°¢è°¢å„ä½çš„starï¼ŒåŒæ—¶æ¬¢è¿å¤§å®¶ä½¿ç”¨åæå‡ºé—®é¢˜&&Bug :kissing_heart: \n\n**åŒæ—¶ä¹Ÿè¯·å„ä½åŠ¡å¿…åœ¨ä½¿ç”¨å‰è¯¦ç»†é˜…è¯»ä½¿ç”¨æ–¹æ³•åŠæ–‡æœ«çš„æ³¨æ„äº‹é¡¹**\n\n> æ­¤å·¥å…·ä»…é™äºå®‰å…¨ç ”ç©¶å’Œæ•™å­¦ï¼Œæµ‹è¯•æœ¬å·¥å…·æ—¶ï¼Œè¯·ç¡®ä¿æ‚¨å·²è·å¾—è¶³å¤Ÿçš„æˆæƒå¹¶ç¬¦åˆå½“åœ°çš„æ³•å¾‹æ³•è§„ã€‚ç”¨æˆ·æ‰¿æ‹…å› ä½¿ç”¨æ­¤å·¥å…·è€Œå¯¼è‡´çš„æ‰€æœ‰æ³•å¾‹å’Œç›¸å…³è´£ä»»ï¼ ä½œè€…ä¸æ‰¿æ‹…ä»»ä½•æ³•å¾‹å’Œç›¸å…³è´£ä»»ï¼\n\n## ç‰¹æ€§\n\n- ç®¡ç†ç«¯æ›´åŠ å‹å¥½çš„äº¤äº’,æ”¯æŒå‘½ä»¤è¡¥å…¨/å†å²\n- ä¸€ç›®äº†ç„¶çš„èŠ‚ç‚¹æ ‘ç®¡ç†\n- ä¸°å¯Œçš„èŠ‚ç‚¹ä¿¡æ¯å±•ç¤º\n- èŠ‚ç‚¹é—´æ­£å‘/åå‘è¿æ¥\n- èŠ‚ç‚¹é—´æ”¯æŒé‡è¿\n- èŠ‚ç‚¹é—´å¯é€šè¿‡socks5/httpä»£ç†è¿›è¡Œè¿æ¥\n- èŠ‚ç‚¹é—´å¯é€šè¿‡sshéš§é“è¿æ¥\n- èŠ‚ç‚¹é—´æµé‡å¯é€‰æ‹©TCP/HTTP/WS\n- å¤šçº§socks5æµé‡ä»£ç†è½¬å‘,æ”¯æŒUDP/TCP,IPV4/IPV6\n- èŠ‚ç‚¹æ”¯æŒsshè®¿é—®è¿œç¨‹ä¸»æœº\n- è¿œç¨‹shell\n- ä¸Šä¼ åŠä¸‹è½½æ–‡ä»¶\n- ç«¯å£æœ¬åœ°/è¿œç¨‹æ˜ å°„\n- èŠ‚ç‚¹å¯ç«¯å£å¤ç”¨\n- è‡ªç”±å¼€å…³å„ç±»æœåŠ¡\n- èŠ‚ç‚¹é—´ç›¸äº’è®¤è¯\n- èŠ‚ç‚¹é—´æµé‡ä»¥TLS/AES-256-GCMè¿›è¡ŒåŠ å¯†\n- ç›¸è¾ƒäºv1.0ï¼Œæ–‡ä»¶ä½“ç§¯å‡å°25%\n- æ”¯æŒå„ç±»å¹³å°(Linux/Mac/Windows/MIPS/ARM)\n\n## ç¼–è¯‘åŠæ¼”ç¤º\n\n- ä½¿ç”¨`make`ç›´æ¥ç¼–è¯‘å¤šå¹³å°å®Œæ•´ç¨‹åºï¼Œæˆ–å‚çœ‹Makefileç¼–è¯‘ç‰¹å®šç¨‹åº\n- ä¸æƒ³ç¼–è¯‘çš„ç›†æ²¹å¯ä»¥ç›´æ¥ç”¨[release](https://github.com/ph4ntonn/Stowaway/releases)ä¸‹ç¼–è¯‘å®Œæˆçš„ç¨‹åº\n- æ¼”ç¤ºè§†é¢‘ï¼š[Youtube](https://www.youtube.com/watch?v=Lh5Q0RPWKMU&list=PLkbGxnHFIhA_g5XZtKzN4u-JXRq41L2g-)\n\n## ä½¿ç”¨æ–¹æ³•\n\n### è§’è‰²\n\nStowawayä¸€å…±åŒ…å«ä¸¤ç§è§’è‰²ï¼Œåˆ†åˆ«æ˜¯ï¼š\n- `admin`    æ¸—é€æµ‹è¯•è€…ä½¿ç”¨çš„ä¸»æ§ç«¯\n- `agent`    æ¸—é€æµ‹è¯•è€…éƒ¨ç½²çš„è¢«æ§ç«¯\n\n### åè¯å®šä¹‰\n\n- èŠ‚ç‚¹: æŒ‡admin || agent\n- ä¸»åŠ¨æ¨¡å¼: æŒ‡å½“å‰æ“ä½œçš„èŠ‚ç‚¹ä¸»åŠ¨è¿æ¥å¦ä¸€ä¸ªèŠ‚ç‚¹\n- è¢«åŠ¨æ¨¡å¼: æŒ‡å½“å‰æ“ä½œçš„èŠ‚ç‚¹ç›‘å¬æŸä¸ªç«¯å£ï¼Œç­‰å¾…å¦ä¸€ä¸ªèŠ‚ç‚¹è¿æ¥\n- ä¸Šæ¸¸: æŒ‡å½“å‰æ“ä½œçš„èŠ‚ç‚¹ä¸å…¶çˆ¶èŠ‚ç‚¹ä¹‹é—´çš„æµé‡\n- ä¸‹æ¸¸ï¼šæŒ‡å½“å‰æ“ä½œçš„èŠ‚ç‚¹ä¸å…¶**æ‰€æœ‰**å­èŠ‚ç‚¹ä¹‹é—´çš„æµé‡\n\n### å¿«é€Ÿå¯åŠ¨\n\nä»¥ä¸‹å‘½ä»¤å¯ä»¥å¿«é€Ÿå¯åŠ¨æœ€ç®€å•çš„stowawayå®ä¾‹\n\n- admin: `./stowaway_admin -l 9999`\n- agent: `./stowaway_agent -c <stowaway_admin's IP>:9999`\n\n### å‚æ•°è§£æ\n\n- admin\n\n```\nå‚æ•°:\n-l è¢«åŠ¨æ¨¡å¼ä¸‹çš„ç›‘å¬åœ°å€[ip]:<port>\n-s èŠ‚ç‚¹é€šä¿¡åŠ å¯†å¯†é’¥,æ‰€æœ‰èŠ‚ç‚¹(admin&&agent)å¿…é¡»ä¸€è‡´\n-c ä¸»åŠ¨æ¨¡å¼ä¸‹çš„ç›®æ ‡èŠ‚ç‚¹åœ°å€\n--socks5-proxy socks5ä»£ç†æœåŠ¡å™¨åœ°å€\n--socks5-proxyu socks5ä»£ç†æœåŠ¡å™¨ç”¨æˆ·å(å¯é€‰)\n--socks5-proxyp socks5ä»£ç†æœåŠ¡å™¨å¯†ç (å¯é€‰)\n--http-proxy httpä»£ç†æœåŠ¡å™¨åœ°å€\n--down ä¸‹æ¸¸åè®®ç±»å‹,é»˜è®¤ä¸ºè£¸TCPæµé‡,å¯é€‰HTTP/WS\n--tls-enable ä¸ºèŠ‚ç‚¹é€šä¿¡å¯ç”¨TLSï¼Œåœ¨å¯ç”¨TLSåï¼ŒAESåŠ å¯†å°†è¢«ç¦ç”¨\n--domain æŒ‡å®šTLS SNI/WebSocketåŸŸåï¼Œè‹¥ä¸ºç©ºï¼Œé»˜è®¤ä¸ºç›®æ ‡èŠ‚ç‚¹åœ°å€\n--heartbeat å¼€å¯å¿ƒè·³åŒ…\n```\n\n- agent\n\n```\nå‚æ•°:\n-l è¢«åŠ¨æ¨¡å¼ä¸‹çš„ç›‘å¬åœ°å€[ip]:<port>\n-s èŠ‚ç‚¹é€šä¿¡åŠ å¯†å¯†é’¥\n-c ä¸»åŠ¨æ¨¡å¼ä¸‹çš„ç›®æ ‡èŠ‚ç‚¹åœ°å€\n--socks5-proxy socks5ä»£ç†æœåŠ¡å™¨åœ°å€\n--socks5-proxyu socks5ä»£ç†æœåŠ¡å™¨ç”¨æˆ·å(å¯é€‰)\n--socks5-proxyp socks5ä»£ç†æœåŠ¡å™¨å¯†ç (å¯é€‰)\n--http-proxy httpä»£ç†æœåŠ¡å™¨åœ°å€\n--reconnect é‡è¿æ—¶é—´é—´éš”\n--rehost ç«¯å£å¤ç”¨æ—¶å¤ç”¨çš„IPåœ°å€\n--report ç«¯å£å¤ç”¨æ—¶å¤ç”¨çš„ç«¯å£å·\n--up ä¸Šæ¸¸åè®®ç±»å‹,é»˜è®¤ä¸ºè£¸TCPæµé‡,å¯é€‰HTTP/WS\n--down ä¸‹æ¸¸åè®®ç±»å‹,é»˜è®¤ä¸ºè£¸TCPæµé‡,å¯é€‰HTTP/WS\n--cs è¿è¡Œå¹³å°çš„shellç¼–ç ç±»å‹ï¼Œé»˜è®¤ä¸ºutf-8ï¼Œå¯é€‰gbk\n--tls-enable ä¸ºèŠ‚ç‚¹é€šä¿¡å¯ç”¨TLSï¼Œåœ¨å¯ç”¨TLSåï¼ŒAESåŠ å¯†å°†è¢«ç¦ç”¨\n--domain æŒ‡å®šTLS SNI/WebSocketåŸŸåï¼Œè‹¥ä¸ºç©ºï¼Œé»˜è®¤ä¸ºç›®æ ‡èŠ‚ç‚¹åœ°å€\n```\n\n### å‚æ•°ç”¨æ³•\n\n#### -l\n\næ­¤å‚æ•°admin&&agentç”¨æ³•ä¸€è‡´ï¼Œä»…ç”¨åœ¨è¢«åŠ¨æ¨¡å¼ä¸‹ \n\nè‹¥ä¸æŒ‡å®šIPåœ°å€ï¼Œåˆ™é»˜è®¤ç›‘å¬åœ¨`0.0.0.0`ä¸Š\n\n- admin:  `./stowaway_admin -l 9999` or `./stowaway_admin -l 127.0.0.1:9999`\n\n- agent:  `./stowaway_agent -l 9999`  or `./stowaway_agent -l 127.0.0.1:9999`\n\n#### -s\n\næ­¤å‚æ•°admin&&agentç”¨æ³•ä¸€è‡´ï¼Œå¯ç”¨åœ¨ä¸»åŠ¨&&è¢«åŠ¨æ¨¡å¼ä¸‹\n\nå¯é€‰ï¼Œè‹¥ä¸ºç©ºï¼Œåˆ™ä»£è¡¨é€šä¿¡ä¸è¢«åŠ å¯†ï¼Œåä¹‹åˆ™é€šä¿¡åŸºäºç”¨æˆ·æ‰€ç»™å‡ºçš„å¯†é’¥åŠ å¯†\n\n- admin:  `./stowaway_admin -l 9999 -s 123`\n\n- agent:  `./stowaway_agent -l 9999 -s 123`\n\n#### -c\n\næ­¤å‚æ•°admin&&agentç”¨æ³•ä¸€è‡´ï¼Œä»…ç”¨åœ¨ä¸»åŠ¨æ¨¡å¼ä¸‹\n\nä»£è¡¨äº†å¸Œæœ›è¿æ¥åˆ°çš„èŠ‚ç‚¹çš„åœ°å€\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999`\n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999`\n\n#### --socks5-proxy/--socks5-proxyu/--socks5-proxyp/--http-proxy\n\nè¿™å››ä¸ªå‚æ•°admin&&agentç”¨æ³•ä¸€è‡´ï¼Œä»…ç”¨åœ¨ä¸»åŠ¨æ¨¡å¼ä¸‹\n\n`--socks5-proxy`ä»£è¡¨socks5ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œ`--socks5-proxyu`ä»¥åŠ`--socks5-proxyp`å¯é€‰\n\n`--http-proxy`ä»£è¡¨httpä»£ç†æœåŠ¡å™¨åœ°å€,ä¸socks5ä½¿ç”¨æ–¹å¼ç›¸åŒ\n\næ— ç”¨æˆ·åå¯†ç ï¼š\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999 --socks5-proxy xxx.xxx.xxx.xxx`\n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999 --socks5-proxy xxx.xxx.xxx.xxx`\n\næœ‰ç”¨æˆ·åå¯†ç :\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999 --socks5-proxy xxx.xxx.xxx.xxx --socks5-proxyu xxx --socks5-proxyp xxx`\n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999 --socks5-proxy xxx.xxx.xxx.xxx --socks5-proxyu xxx --socks5-proxyp xxx`\n\n#### --up/--down\n\nè¿™ä¸¤ä¸ªå‚æ•°admin&&agentç”¨æ³•ä¸€è‡´ï¼Œå¯ç”¨åœ¨ä¸»åŠ¨&&è¢«åŠ¨æ¨¡å¼ä¸‹\n\nä½†æ³¨æ„adminä¸Šæ²¡æœ‰`--up`å‚æ•°\n\nè¿™ä¸¤ä¸ªå‚æ•°å¯é€‰ï¼Œè‹¥ä¸ºç©ºï¼Œåˆ™ä»£è¡¨ä¸Š/ä¸‹æ¸¸æµé‡ä¸ºè£¸TCPæµé‡\n\nè‹¥å¸Œæœ›ä¸Š/ä¸‹æ¸¸æµé‡ä¸ºHTTP/WSæµé‡ï¼Œè®¾ç½®æ­¤ä¸¤å‚æ•°ä¸º`http`æˆ–`ws`å³å¯\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999 --down ws`\n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999 --up ws` or `./stowaway_agent -c 127.0.0.1:9999 --up ws --down ws`\n\nå¦å¤–éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š\n\nç¬¬ä¸€ï¼Œå½“ä½ è®¾ç½®äº†æŸä¸€èŠ‚ç‚¹ä¸Š/ä¸‹æ¸¸ä¸ºTCP/HTTP/WSæµé‡åï¼Œä¸å…¶è¿æ¥çš„çˆ¶/å­èŠ‚ç‚¹çš„ä¸‹/ä¸Šæ¸¸æµé‡å¿…é¡»è®¾ç½®ä¸ºä¸€è‡´ï¼Œå¦‚ä¸‹\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999 --down ws`\n\n- agent:  `./stowaway_agent -l 9999 --up ws`\n\nä¸Šé¢è¿™ç§æƒ…å†µï¼Œagentå¿…é¡»è®¾ç½®`--up`ä¸ºwsï¼Œå¦åˆ™ä¼šå¯¼è‡´ç½‘ç»œå‡ºé”™\n\nagenté—´ä¹Ÿä¸€æ ·\n\nå‡è®¾agent-1æ­£åœ¨`127.0.0.1:10000`ç«¯å£ä¸Šç­‰å¾…å­èŠ‚ç‚¹çš„è¿æ¥ï¼Œå¹¶ä¸”è®¾ç½®äº†`--down ws`\n\né‚£ä¹ˆagent-2ä¹Ÿå¿…é¡»è®¾ç½®`--up`ä¸ºwsï¼Œå¦åˆ™ä¼šå¯¼è‡´ç½‘ç»œå‡ºé”™\n\n- agent-2:  `./stowaway_agent -c 127.0.0.1:10000 --up ws`\n\nç¬¬äºŒï¼Œç”±äºhttpæ˜¯åŠåŒå·¥çš„åè®®ï¼Œå¹¶ä¸æ˜¯å¾ˆé€‚åˆstowawayå…¨åŒå·¥çš„é€šä¿¡æ€§è´¨ï¼Œæ‰€ä»¥è¿™é‡Œhttpåè®®ä»…å®ç°äº†httpæ¶ˆæ¯æ ¼å¼ï¼Œå¹¶ä¸æ˜¯å®Œæ•´åŠŸèƒ½çš„httpå·¥ä½œæµï¼Œæ‰€ä»¥ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨è¿™ä¸ªåè®®ï¼Œä½†æ˜¯stowawayä¹‹é—´çš„æµé‡åœ¨é€‰æ‹©ä»¥httpæ¶ˆæ¯æ ¼å¼ä¼ è¾“æ—¶æ— æ³•é€šè¿‡nginxè½¬å‘ï¼Œè¿™éƒ¨åˆ†ä»£ç åŠåŠŸèƒ½ä¿ç•™ä¸€æ–¹é¢ä¸ºäº†æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹httpåè®®çš„ä½¿ç”¨ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæä¾›ä¸€ä¸ªè‡ªå®šä¹‰æµé‡çš„æ¨¡ç‰ˆï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå®šä¹‰åè®®æ—¶æ‹¿æ¥å‚è€ƒ\n\nå¦‚éœ€é€šè¿‡nginxç­‰åä»£ï¼Œè¯·ä½¿ç”¨wsåè®®ï¼Œå¹¶æ­é…ä¸ŠTLSè¿›è¡Œé€šè®¯\n\n#### --reconnect\n\næ­¤å‚æ•°ä»…ç”¨åœ¨agentï¼Œä¸”ä»…ç”¨åœ¨ä¸»åŠ¨æ¨¡å¼ä¸‹\n\nå‚æ•°å¯é€‰ï¼Œè‹¥ä¸è®¾ç½®ï¼Œåˆ™ä»£è¡¨èŠ‚ç‚¹åœ¨ç½‘ç»œè¿æ¥æ–­å¼€åä¸ä¼šä¸»åŠ¨é‡è¿ï¼Œè‹¥è®¾ç½®ï¼Œåˆ™ä»£è¡¨èŠ‚ç‚¹ä¼šæ¯éš”x(ä½ è®¾ç½®çš„ç§’æ•°)ç§’å°è¯•é‡è¿è‡³çˆ¶èŠ‚ç‚¹\n\n- admin:  `./stowaway_admin -l 9999`\n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999 --reconnect 10`\n\nä¸Šé¢è¿™ç§æƒ…å†µä¸‹ï¼Œä»£è¡¨å¦‚æœagentä¸adminä¹‹é—´çš„è¿æ¥æ–­å¼€ï¼Œagentä¼šæ¯éš”åç§’å°è¯•é‡è¿å›admin\n\nagentä¹‹é—´ä¹Ÿä¸ä¸Šé¢æƒ…å†µä¸€è‡´\n\nå¹¶ä¸”`--reconnect`å‚æ•°å¯ä»¥ä¸`--socks5-proxy`/`--socks5-proxyu`/`--socks5-proxyp`/`--http-proxy`ä¸€èµ·ä½¿ç”¨ï¼Œagentå°†ä¼šå‚ç…§å¯åŠ¨æ—¶çš„è®¾ç½®ï¼Œé€šè¿‡ä»£ç†å°è¯•é‡è¿\n\n#### --rehost/--report\n\nè¿™ä¸¤ä¸ªå‚æ•°æ¯”è¾ƒç‰¹åˆ«ï¼Œä»…ç”¨åœ¨agentç«¯ï¼Œè¯¦ç»†è¯·å‚è§ä¸‹æ–¹çš„ç«¯å£å¤ç”¨æœºåˆ¶\n\n#### --cs\n\næ­¤å‚æ•°ä»…ç”¨åœ¨agentï¼Œå¯ç”¨åœ¨ä¸»åŠ¨&&è¢«åŠ¨æ¨¡å¼ä¸‹\n\nä¸»è¦æ—¨åœ¨è§£å†³'shell'åŠŸèƒ½ä¹±ç é—®é¢˜ï¼Œå½“ç”¨æˆ·å°†agentè¿è¡Œäºæ§åˆ¶å°ç¼–ç ä¸ºgbkçš„å¹³å°ä¸Š(ä¾‹å¦‚ä¸€èˆ¬æƒ…å†µä¸‹çš„Windows)å¹¶ä¸”åŒæ—¶adminè¿è¡Œäºæ§åˆ¶å°ç¼–ç ä¸ºutf-8çš„å¹³å°ä¸Šæ—¶ï¼Œè¯·åŠ¡å¿…å°†æ­¤å‚æ•°è®¾ç½®ä¸º'gbk'\n\n- Windows: `./stowaway_agent -c 127.0.0.1:9999 -s 123 --cs gbk`\n\n#### --tls-enable\n\nè¿™ä¸¤ä¸ªå‚æ•°admin&&agentç”¨æ³•ä¸€è‡´ï¼Œå¯ç”¨åœ¨ä¸»åŠ¨&&è¢«åŠ¨æ¨¡å¼ä¸‹\n\né€šè¿‡è®¾ç½®æ­¤é€‰é¡¹ï¼Œå¯ä»¥å°†èŠ‚ç‚¹é—´æµé‡ä»¥TLSåŠ å¯†\n\nç¤ºä¾‹å¦‚ä¸‹\n- admin: `./stowaway_admin -l 10000 --tls-enable -s 123`\n- agent: `./stowaway_agent -c localhost:10000 --tls-enable -s 123`\n\næ³¨æ„ï¼Œå½“æ­¤å‚æ•°å¯ç”¨æ—¶ï¼ŒaesåŠ å¯†å°†è¢«é»˜è®¤ç¦ç”¨ï¼Œ-så‚æ•°å°†ä»…ç”¨äºèŠ‚ç‚¹é—´ç›¸äº’éªŒè¯&ç«¯å£å¤ç”¨åŠŸèƒ½\n\nå¦å¤–ï¼Œå½“æ­¤å‚æ•°å¯ç”¨æ—¶ï¼Œ**è¯·ä¿è¯ç½‘ç»œä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹(åŒ…æ‹¬admin)éƒ½å¯ç”¨æ­¤å‚æ•°**\n\n#### --domain\n\nè¿™ä¸¤ä¸ªå‚æ•°admin&&agentç”¨æ³•ä¸€è‡´ï¼Œä»…å¯ç”¨åœ¨ä¸»åŠ¨æ¨¡å¼ä¸‹\n\né€šè¿‡è®¾ç½®æ­¤é€‰é¡¹ï¼Œå¯ä»¥è®¾ç½®å½“å‰æ­¤èŠ‚ç‚¹TLSåå•†æ—¶çš„SNIé€‰é¡¹æˆ–è€…WebSocketçš„ç›®æ ‡Host\n\nç¤ºä¾‹å¦‚ä¸‹\n- admin: `./stowaway_admin -l 10000 --tls-enable -s 123`\n- agent: `./stowaway_agent -c xxx.xxx.xxx.xxx:10000 --tls-enable -s 123 --domain xxx.com`\n\n#### --heartbeat\n\nè¿™ä¸ªå‚æ•°ä»…ç”¨åœ¨adminç«¯ï¼Œå¯ç”¨åœ¨ä¸»åŠ¨&è¢«åŠ¨æ¨¡å¼ä¸‹\n\né€šè¿‡è®¾ç½®æ­¤é€‰é¡¹ï¼Œå¯ä»¥ä½¿adminæŒç»­å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å‘é€å¿ƒè·³åŒ…ï¼Œä»è€Œåœ¨ä¸­é—´æœ‰åå‘ä»£ç†çš„æƒ…å†µä¸‹ç»´æŒé•¿é“¾æ¥\n\nå‡è®¾adminå’Œagentä¸­æœ‰ç±»ä¼¼nginxçš„åå‘ä»£ç†è®¾å¤‡å°†8080ç«¯å£ä»£ç†è‡³8000ç«¯å£,ç¤ºä¾‹å¦‚ä¸‹ \n- admin: `./stowaway_admin -l 8000 --tls-enable -s 123 --down ws --heartbeat`\n- agent: `./stowaway_agent -c xxx.xxx.xxx.xxx:8080 --tls-enable -s 123 --domain xxx.com --up ws`\n\n## ç«¯å£å¤ç”¨æœºåˆ¶\n\nå½“å‰Stowawayæä¾›åŸºäºSO_REUSEPORTå’ŒSO_REUSEADDRç‰¹æ€§çš„ç«¯å£å¤ç”¨åŠŸèƒ½åŠåŸºäºIPTABLESçš„ç«¯å£å¤ç”¨åŠŸèƒ½\n\n- åœ¨linuxä¸‹å¯ä»¥å¤§éƒ¨åˆ†çš„åŠŸèƒ½ç«¯å£\n\n- åœ¨windowsä¸‹ä¸å¯å¤ç”¨iisï¼Œrdpç«¯å£ï¼Œå¯ä»¥å¤ç”¨mysqlï¼ŒapacheæœåŠ¡çš„ç«¯å£\n\n### å¤ç”¨æ–¹å¼\n\n- SO_REUSEPORTå’ŒSO_REUSEADDRæ¨¡å¼\n\n  å‡è®¾agentç«¯é‡‡ç”¨ç«¯å£å¤ç”¨æœºåˆ¶å¤ç”¨80ç«¯å£\n\n  æ­¤æ—¶agentç«¯å¿…é¡»è®¾ç½®`--rehost`&&`--report`&&`-s`å‚æ•°\n\n  - `--rehost`: ä»£è¡¨å¸Œæœ›å¤ç”¨çš„IPåœ°å€ï¼Œä¸å¯ä¸º0.0.0.0ï¼Œæ™®éåº”å½“æ˜¯ç½‘å¡çš„å¤–éƒ¨åœ°å€\n\n  - `--report`: ä»£è¡¨å¸Œæœ›å¤ç”¨çš„ç«¯å£\n\n  - `-s`: ä»£è¡¨é€šä¿¡å¯†é’¥\n\n  **ä¸»è¦æ”¯æŒwindowsã€macç¯å¢ƒä¸‹çš„å¤ç”¨ï¼Œlinuxäº¦å¯ï¼Œä½†é™åˆ¶è¾ƒå¤š**\n  \n  - adminç«¯ï¼š`./stowaway_admin -c 192.168.0.105:80 -s 123`\n  - agentç«¯ï¼š`./stowaway_agent  --report 80 --rehost 192.168.0.105 -s 123`\n\n\n- IPTABLESæ¨¡å¼\n\n  å‡è®¾agentç«¯é‡‡ç”¨ç«¯å£å¤ç”¨æœºåˆ¶å¤ç”¨22ç«¯å£\n\n  æ­¤æ—¶agentç«¯å¿…é¡»è®¾ç½®`-l`&&`--report`&&`-s`å‚æ•°\n\n  - `-l`: ä»£è¡¨æ— æ³•è¢«æ­£å¸¸è®¿é—®çš„ç«¯å£ï¼Œä¹Ÿå°±æ˜¯ä½ çœŸæ­£æƒ³è®©agentç›‘å¬å¹¶æ¥å—è¿æ¥çš„ç«¯å£\n\n  - `--report`: ä»£è¡¨å¸Œæœ›å¤ç”¨çš„ç«¯å£\n\n  - `-s`: ä»£è¡¨é€šä¿¡å¯†é’¥\n\n  **ä»…æ”¯æŒlinuxç¯å¢ƒä¸‹çš„å¤ç”¨ï¼Œagentä¼šè‡ªåŠ¨ä¿®æ”¹IPTABLESï¼Œéœ€è¦rootæƒé™**\n\n  - agentç«¯ï¼š `./stowaway_agent --report 22 -l 10000 -s 123`\n\n    åœ¨agentå¯åŠ¨åï¼Œè¯·ä½¿ç”¨`script`ç›®å½•ä¸‹çš„`reuse.py`\n\n    å…ˆè®¾ç½®SECRETçš„å€¼(SECRETçš„å€¼å°±æ˜¯åœ¨å¯åŠ¨å„ä¸ªèŠ‚ç‚¹æ—¶æ‰€è®¾ç½®çš„é€šä¿¡å¯†é’¥),\n\n    ä¹‹åæ‰§è¡Œï¼š`python reuse.py --start --rhost xxx.xxx.xxx.xxx --rport xxx`\n\n    - `--rhost`: ä»£è¡¨agentçš„åœ°å€\n\n    - `--rport`: ä»£è¡¨è¢«å¤ç”¨çš„ç«¯å£,åœ¨æœ¬ä¾‹ä¸­åº”å½“ä¸º22\n\n  - æ­¤æ—¶adminç«¯å°±å¯ä»¥è¿æ¥ï¼š`./stowaway_admin -c 192.168.0.105:22 -s 123`\n  \n\n### æ³¨æ„\n\n- ä»¥ä¸Šæƒ…å†µåªæ˜¯åˆ—ä¸¾äº†adminä»¥åŠagentä¹‹é—´çš„è¿æ¥ï¼Œagentä¸agentä¹‹é—´çš„è¿æ¥äº¦åŒï¼Œå¹¶æ— å·®å¼‚\n\n- å¦‚æœagentè¢«ctrl-cæˆ–è€…killå‘½ä»¤æ€æ­»ï¼Œç¨‹åºå°†ä¼šè‡ªåŠ¨æ¸…ç†iptablesè§„åˆ™ï¼Œä½†å¦‚æœè¢«kill -9 æ€æ­»ï¼Œåˆ™æ— æ³•è‡ªåŠ¨æ¸…é™¤\n\n  æ•…è€Œä¸ºäº†é˜²æ­¢agentå¼‚å¸¸é€€å‡ºåï¼Œiptablesè§„åˆ™æ²¡æœ‰è¢«æ¸…ç†å¯¼è‡´è¢«å¤ç”¨çš„æœåŠ¡æ— æ³•è®¿é—®\n\n  æ‰€ä»¥å½“éœ€è¦å…³é—­æ—¶ï¼Œéœ€è¿è¡Œï¼š`python reuse.py --stop --rhost xxx.xxx.xxx.xxx --rport xxx`\n\n  å³å¯å…³é—­è½¬å‘è§„åˆ™ï¼Œä½¿å¾—åŸæœåŠ¡èƒ½å¤Ÿè¢«æ­£å¸¸è®¿é—®\n\n- å¦‚æœä½¿ç”¨IPTABLESæ¨¡å¼ä¸‹çš„ç«¯å£å¤ç”¨æ¨¡å¼ï¼Œå°†ä¼šå¼ºåˆ¶ç›‘å¬åœ¨0.0.0.0ï¼Œæ— æ³•ç”±`-l`å‚æ•°æ¥æŒ‡å®šip\n\n## å¦‚ä½•ç»„æˆå¤šçº§ç½‘ç»œï¼Ÿ\n\nä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰adminå’Œä¸€ä¸ªagentå‡ºåœº\n\nè€Œå¤šçº§ç½‘ç»œæ‰æ˜¯æ ¸å¿ƒ\n\nåœ¨stowawayä¸­ï¼Œç»„æˆå¤šçº§ç½‘ç»œéœ€è¦å€ŸåŠ©adminä¸­çš„`listen`ã€`connect`ã€ `sshtunnel`å‘½ä»¤æ¥å®ç°\n\nä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­\n\n- admin: `./stowaway_admin -l 9999 -s 123`\n\næ­¤æ—¶agent-1å·²ç»è¿ä¸Šadmin\n\n- agent-1:  `./stowaway_agent -c 127.0.0.1:9999 -s 123`\n\n æ­¤æ—¶ç”¨æˆ·è¿˜æƒ³è¿æ¥agent-2ï¼Œå¦‚ä¸‹\n\n- agent-2:  `./stowaway_agent -l 10000 -s 123`\n\né‚£ä¹ˆï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥é€šè¿‡admin,è¾“å…¥`use 0` -> `connect agent-2çš„IP:10000`æ¥å°†å…¶åŠ å…¥ç½‘ç»œï¼Œå¹¶æˆä¸ºagent-1çš„ä¸€ä¸ªå­èŠ‚ç‚¹\n\nå‡å¦‚æ­¤æ—¶ç”¨æˆ·è¿˜å¸Œæœ›è¿å…¥ä¸€ä¸ªèŠ‚ç‚¹agent-3ï¼Œä½†æ˜¯é€šè¿‡agent-1æ— æ³•è®¿é—®agent-3\n\né‚£ä¹ˆï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥é€šè¿‡admin,è¾“å…¥`use 0` -> `listen` -> é€‰æ‹©`1.Normal Passive` -> è¾“å…¥`10001` ä»è€Œä½¿å¾—agent-1ç›‘å¬åœ¨10001ç«¯å£ä¸Šï¼Œå¹¶ç­‰å¾…å­èŠ‚ç‚¹çš„è¿æ¥\n\nç­‰adminæ“ä½œå®Œæˆåï¼Œagent-3å¯åŠ¨å¦‚ä¸‹\n\n- agent-3: `./stowaway_agent -c 127.0.0.1:10001 -s 123`\n\nå°±å¯ä»¥å°†agent-3ä½œä¸ºagent-1çš„å¦ä¸€ä¸ªå­èŠ‚ç‚¹åŠ å…¥ç½‘ç»œäº†\n\nå…³äº`listen`ä»¥åŠ`sshtunnel`çš„è¯¦ç»†ä»‹ç»ï¼Œå¯ä»¥å‚çœ‹ä¸‹æ–¹çš„å‘½ä»¤è§£æ\n\n## å¦‚ä½•é‡è¿ï¼Ÿ\n\nStowawayå½“å‰æ”¯æŒå¤šç§æ–¹å¼çš„é‡è¿ï¼Œç®€å•æ¦‚æ‹¬å¦‚ä¸‹\n\né¦–å…ˆï¼Œå½“çˆ¶èŠ‚ç‚¹æ‰çº¿åï¼Œåªæœ‰ä¸€ç§èŠ‚ç‚¹ä¼šä¸»åŠ¨é€€å‡ºï¼Œé‚£å°±æ˜¯å¯åŠ¨æ—¶ä¸ºä¸»åŠ¨æ¨¡å¼ä¸”æ²¡æœ‰è®¾ç½®é‡è¿çš„èŠ‚ç‚¹\n\nå¦‚æœè®¾ç½®äº†é‡è¿ï¼Œé‚£ä¹ˆèŠ‚ç‚¹å°†ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”ä¸­å°è¯•é‡è¿\n\nå¦å¤–ï¼Œæ‰€æœ‰è¢«åŠ¨æ¨¡å¼å¯åŠ¨çš„èŠ‚ç‚¹éƒ½ä¸ä¼šä¸»åŠ¨é€€å‡ºï¼Œè€Œæ˜¯ä¼šåŸºäºå¯åŠ¨æ—¶çš„å‚æ•°é‡æ–°ç›‘å¬åœ¨æŒ‡å®šç«¯å£ä¸Šï¼Œæ­¤æ—¶ç”¨æˆ·ä»ç„¶å¯ä»¥é€šè¿‡`connect`ã€`sshtunnel`æ¥å°†è¿™äº›èŠ‚ç‚¹è¿å›ç½‘ç»œ\n\n### æ³¨æ„\n\n1. **å¦‚å› ç½‘ç»œæ³¢åŠ¨æˆ–ä¸­é—´èŠ‚ç‚¹æ‰çº¿ï¼Œå¯¼è‡´æŸä¸€ä¸ªåˆ†æ”¯æ–­å¼€ï¼Œåœ¨ä¸»åŠ¨é‡è¿æ—¶è¯·åŠ¡å¿…è¿æ¥ç¼ºå¤±é“¾çš„å¤´èŠ‚ç‚¹**,ä¸¾ä¸ªä¾‹å­ï¼Œadminåæ¥ç€node1ï¼Œnode1ååˆ†ä¸ºä¸¤æ”¯ï¼Œä¸€æ”¯æ˜¯node1->node 2 -> node 3 -> node 4, ä¸€æ”¯æ˜¯node1->node 5 ->node 6ï¼Œé‚£ä¹ˆå¦‚æœnode2æ‰çº¿ï¼Œnode3åŠnode4å°†ä¸ä¼šæ‰çº¿ï¼Œè€Œæ˜¯ç»§ç»­ä¿æŒå­˜æ´»ã€‚æ­¤æ—¶ç”¨æˆ·è‹¥æƒ³å°†node3åŠnode4é‡æ–°åŠ å…¥ç½‘ç»œï¼Œé‚£ä¹ˆç”¨æˆ·æœ‰ä¸¤ç§é€‰æ‹©ï¼Œä¸€ç§æ˜¯å‡å¦‚node1å¯ä»¥ç›´æ¥è®¿é—®node3ï¼Œé‚£ä¹ˆç”¨æˆ·å¯éšæ—¶åœ¨node1å°†node3ç”¨connectæˆ–è€…sshtunnelå‘½ä»¤é‡æ–°åŠ å…¥ç½‘ç»œï¼ˆåˆ‡è®°ï¼Œå°±ç®—node1åŒæ—¶ä¹Ÿå¯ä»¥è®¿é—®node4ï¼Œä¹Ÿè¯·ä¸è¦ç›´æ¥è¿æ¥node4ï¼Œè¯·è¿æ¥æ•´ä¸ªç¼ºå¤±é“¾(node3->node4)çš„å¤´èŠ‚ç‚¹node3ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥å°†node3åŠnode4é‡æ–°åŠ å…¥ç½‘ç»œï¼›å¦ä¸€ç§é€‰æ‹©æ˜¯å½“node1æ— æ³•ç›´æ¥è®¿é—®node3æ—¶ï¼ˆå³å¿…é¡»ç»è¿‡node2ï¼‰ï¼Œé‚£ä¹ˆè¯·å…ˆå°†node2é‡å¯å¹¶åŠ å…¥ç½‘ç»œï¼Œä¹‹åå†åœ¨node2ä¸Šä½¿ç”¨connectæˆ–è€…sshtunnelå‘½ä»¤è¿æ¥node3ï¼Œä»è€Œå°†node3åŠnode4åŠ å…¥ç½‘ç»œ\n\n2. **å½“æœ‰èŠ‚ç‚¹æ‰çº¿æ—¶ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¸æ­¤èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹æœ‰å…³çš„æ‰€æœ‰socksï¼Œbackwardï¼ŒforwardæœåŠ¡éƒ½ä¼šè¢«å¼ºåˆ¶åœæ­¢**\n\n## å‘½ä»¤è§£æ\n\nåœ¨adminæ§åˆ¶å°ä¸­ï¼Œç”¨æˆ·å¯ä»¥ç”¨tabæ¥è¡¥å…¨å‘½ä»¤ï¼Œæ–¹å‘é”®ä¸Šä¸‹å·¦å³æ¥æŸ¥æ‰¾å†å²/ç§»åŠ¨å…‰æ ‡\n\nadminæ§åˆ¶å°åˆ†ä¸ºä¸¤ä¸ªå±‚çº§ï¼Œç¬¬ä¸€å±‚ä¸ºä¸»panelï¼ŒåŒ…å«çš„å‘½ä»¤å¦‚ä¸‹\n\n- `help`: å±•ç¤ºä¸»panelçš„å¸®åŠ©ä¿¡æ¯\n\n```\n(admin) >> help\n  help                                     \t\tShow help information\n  detail                                  \t\tDisplay connected nodes' detail\n  topo                                     \t\tDisplay nodes' topology\n  use        <id>                          \t\tSelect the target node you want to use\n  exit                                     \t\tExit Stowaway\n```\n\n- `detail`: å±•ç¤ºåœ¨çº¿èŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯\n\n```\n(admin) >> detail\nNode[0] -> IP: 127.0.0.1:10000  Hostname: ph4ntoms-MBP.lan  User: ph4ntom\nMemo:\n```\n\n- `topo`: å±•ç¤ºåœ¨çº¿èŠ‚ç‚¹çš„çˆ¶å­å…³ç³»\n\n```\n(admin) >> topo\nNode[0]'s children ->\nNode[1]\n\nNode[1]'s children ->\n```\n\n- `use`: ä½¿ç”¨æŸä¸ªagent\n\n```\n(admin) >> use 0\n(node 0) >>\n```\n\n- `exit`: é€€å‡ºstowaway\n\n```\n(admin) >> exit\n[*] Do you really want to exit stowaway?(y/n): y\n[*] BYE!\n```\n\nå½“ç”¨æˆ·ä½¿ç”¨`use`å‘½ä»¤é€‰æ‹©äº†ä¸€ä¸ªagentåï¼Œè¿›å…¥ç¬¬äºŒå±‚node panelï¼Œå…¶åŒ…å«çš„å‘½ä»¤å¦‚ä¸‹\n\n- `help`: å±•ç¤ºnode panelçš„å¸®åŠ©ä¿¡æ¯\n\n```\n(node 0) >> help\n  help                                            Show help information\n  status                                          Show node status,including socks/forward/backward\n  listen                                          Start port listening on current node\n  addmemo    <string>                             Add memo for current node\n  delmemo                                         Delete memo of current node\n  ssh        <ip:port>                            Start SSH through current node\n  shell                                           Start an interactive shell on current node\n  socks      <lport> [username] [pass]            Start a socks5 server\n  stopsocks                                       Shut down socks services\n  connect    <ip:port>                            Connect to a new node\n  sshtunnel  <ip:sshport> <agent port>            Use sshtunnel to add the node into our topology\n  upload     <local filename> <remote filename>   Upload file to current node\n  download   <remote filename> <local filename>   Download file from current node\n  forward    <lport> <ip:port>                    Forward local port to specific remote ip:port\n  stopforward                                     Shut down forward services\n  backward    <rport> <lport>                     Backward remote port(agent) to local port(admin)\n  stopbackward                                    Shut down backward services\n  shutdwon                                        Terminate current node\n  back                                            Back to parent panel\n  exit                                            Exit Stowaway \n```\n- `status`: å±•ç¤ºå½“å‰èŠ‚ç‚¹çš„socks/forward/backwardçŠ¶æ€\n\n```\n(node 0) >> status\nSocks status:\n      ListenAddr: 0.0.0.0:10000    Username:    Password:\n-------------------------------------------------------------------------------------------\nForward status:\n      [1] Listening Addr: [::]:20000 , Remote Addr: 192.168.1.1:22 , Active Connnections: 0\n      [2] Listening Addr: [::]:30000 , Remote Addr: 192.168.1.1:22 , Active Connnections: 0\n-------------------------------------------------------------------------------------------\nBackward status:\n      [1] Remote Port: 40000 , Local Port: 50000 , Active Connnections: 0\n```\n\n- `listen`: å‘½ä»¤agentç›‘å¬æŸä¸ªç«¯å£å¹¶ç­‰å¾…å­èŠ‚ç‚¹çš„è¿å…¥\n\n```\n(node 0) >> listen\n[*] MENTION! If you choose IPTables Reuse or SOReuse,you MUST CONFIRM that the node was initially started in the corresponding way!\n[*] When you choose IPTables Reuse or SOReuse, the node will use the initial config(when node started) to reuse port!\n[*] Please choose the mode(1.Normal passive / 2.IPTables Reuse / 3.SOReuse): 1\n[*] Please input the [ip:]<port> : 10001\n[*] Waiting for response......\n[*] Node is listening on 10001\n```\n\næ³¨æ„ï¼Œ`listen`æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ä¸ªå‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ`listen`å‘½ä»¤æœ‰ä¸‰ç§æ¨¡å¼\n\n1. `Normal passive`: æ­¤é€‰é¡¹æ„å‘³ç€agentå°†ä¼šä»¥æ™®é€šçš„æ–¹å¼ç›‘å¬åœ¨ç›®æ ‡ç«¯å£ï¼Œå¹¶ç­‰å¾…å­èŠ‚ç‚¹è¿å…¥\n2. `IPTables Reuse`ï¼šæ­¤é€‰é¡¹æ„å‘³ç€agentå°†ä¼šä»¥IPTables Reuseçš„æ–¹å¼å¤ç”¨ç«¯å£ï¼Œå¹¶ç­‰å¾…å­èŠ‚ç‚¹è¿å…¥\n3. `SOReuse`ï¼šæ­¤é€‰é¡¹æ„å‘³ç€agentå°†ä¼šä»¥SOReuseçš„æ–¹å¼å¤ç”¨ç«¯å£ï¼Œå¹¶ç­‰å¾…å­èŠ‚ç‚¹è¿å…¥\n\nç¬¬ä¸€ä¸ªæ¨¡å¼æ˜¯æœ€æ™®éä½¿ç”¨çš„ï¼Œè‹¥çˆ¶èŠ‚ç‚¹ä»¥è¿™ç§æ–¹å¼ç›‘å¬ï¼Œé‚£ä¹ˆå­èŠ‚ç‚¹ä»…éœ€è¦`-c çˆ¶èŠ‚ç‚¹ip:port`å°±å¯ä»¥åŠ å…¥ç½‘ç»œ\n\nç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªæ¨¡å¼æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ï¼Œè‹¥ç”¨æˆ·é€‰æ‹©ç¬¬äºŒæˆ–ç¬¬ä¸‰ä¸ªæ¨¡å¼ï¼Œé‚£ä¹ˆç”¨æˆ·å¿…é¡»ä¿è¯å½“å‰æ“ä½œçš„èŠ‚ç‚¹æœ¬èº«å°±æ˜¯ä»¥ç«¯å£å¤ç”¨çš„æ–¹å¼å¯åŠ¨çš„ï¼Œå¦åˆ™å°†æ— æ³•ä½¿ç”¨è¿™ä¸¤ä¸ªæ¨¡å¼\n\nç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªæ¨¡å¼å°†ä¸éœ€è¦ç”¨æˆ·è¾“å…¥ä»»ä½•ä¿¡æ¯ï¼ŒèŠ‚ç‚¹å°†ä¼šè‡ªåŠ¨ä½¿ç”¨å…¶è‡ªèº«å¯åŠ¨æ—¶çš„å‚æ•°æ¥å¤ç”¨ç«¯å£ï¼Œå¹¶å‡†å¤‡æ¥å—å­èŠ‚ç‚¹çš„è¿æ¥\n\nå¦å¤–ï¼Œ`listen`ä¸€æ¬¡åªèƒ½æ¥å—ä¸€ä¸ªå­èŠ‚ç‚¹çš„è¿å…¥ï¼Œè‹¥éœ€è¦å¤šä¸ªå­èŠ‚ç‚¹è¿å…¥ï¼Œè¯·æ‰§è¡Œç›¸åº”æ¬¡æ•°çš„`listen`å‘½ä»¤\n\n- `addmemo`: ä¸ºå½“å‰èŠ‚ç‚¹æ·»åŠ å¤‡å¿˜\n\n```\n(node 0) >> addmemo test\n[*] Memo added!\n(node 0) >> exit\n(admin) >> detail\nNode[0] -> IP: 127.0.0.1:10000  Hostname: ph4ntoms-MBP.lan  User: ph4ntom\nMemo:  test\n```\n\n- `delmemo`: åˆ é™¤å½“å‰èŠ‚ç‚¹çš„å¤‡å¿˜\n\n```\n(node 0) >> delmemo\n[*] Memo deleted!\n(node 0) >> exit\n(admin) >> detail\nNode[0] -> IP: 127.0.0.1:10000  Hostname: ph4ntoms-MBP.lan  User: ph4ntom\nMemo:\n```\n\n- `ssh`: å‘½ä»¤èŠ‚ç‚¹ä»¥sshæ–¹å¼è¿æ¥ç›®æ ‡æœºå™¨\n\n```\n(node 0) >> ssh 127.0.0.1:22\n[*] Please choose the auth method(1.username&&password / 2.certificate): 1\n[*] Please enter the username: ph4ntom\n[*] Please enter the password: *****\n[*] Waiting for response.....\n[*] Connect to target host via ssh successfully!\n # ph4ntom @ ph4ntoms-MBP in ~ ğŸ‘‘ [17:03:56]\n$ whoami\nph4ntom\n # ph4ntom @ ph4ntoms-MBP in ~ ğŸ‘‘ [17:04:16]\n$\n```\n\nåœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œtabé”®å°†è¢«ç¦æ­¢\n\n- `shell`: è·å–å½“å‰èŠ‚ç‚¹çš„shell\n\n```\n(node 0) >> shell\n[*] Waiting for response.....\n[*] Shell is started successfully!\n\nbash: no job control in this shell\n\nThe default interactive shell is now zsh.\nTo update your account to use zsh, please run `chsh -s /bin/zsh`.\nFor more details, please visit https://support.apple.com/kb/HT208050.\nbash-3.2$ whoami\nph4ntom\nbash-3.2$\n```\n\nåœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œtabé”®å°†è¢«ç¦æ­¢\n\n- `socks`ï¼šåœ¨å½“å‰èŠ‚ç‚¹ä¸Šå¯åŠ¨socks5æœåŠ¡\n\n```\n(node 0) >> socks 7777\n[*] Trying to listen on 0.0.0.0:7777......\n[*] Waiting for response......\n[*] Socks start successfully!\n(node 0) >>\n```\n\næ³¨æ„ä¸€ç‚¹ï¼Œæ­¤å¤„çš„7777ç«¯å£ä¸æ˜¯åœ¨agentä¸Šå¼€å¯çš„ï¼Œè€Œæ˜¯åœ¨adminä¸Šå¼€å¯\n\nè‹¥éœ€è¦è®¾ç½®ç”¨æˆ·åå¯†ç ï¼Œå¯å°†ä¸Šæ–¹å‘½ä»¤æ”¹ä¸º`socks 7777 <your username> <your password>`\n\nè‹¥éœ€è¦æŒ‡å®šç›‘å¬çš„æ¥å£ï¼Œå¯å°†ä¸Šæ–¹å‘½ä»¤æ”¹ä¸º`socks xxx.xxx.xxx.xxx:7777`\n\n- `stopsocks`: åœæ­¢åœ¨å½“å‰èŠ‚ç‚¹ä¸Šçš„socks5æœåŠ¡\n\n```\n(node 0) >> stopsocks\nSocks Info ---> ListenAddr: 0.0.0.0:7777    Username: <null>    Password: <null>\n[*] Do you really want to shutdown socks?(yes/no): yes\n[*] Closing......\n[*] Socks service has been closed successfully!\n(node 0) >>\n```\n\n- `connect`: å‘½ä»¤å½“å‰èŠ‚ç‚¹è¿æ¥è‡³å¦ä¸€ä¸ªå­èŠ‚ç‚¹\n\n```\nagent-1: ./stowaway_agent -l 10002\n```\n\n```\n(node 0) >> connect 127.0.0.1:10002\n[*] Waiting for response......\n[*] New node online! Node id is 1\n\n(node 0) >>\n```\n\n- `sshtunnel`: å‘½ä»¤å½“å‰èŠ‚ç‚¹ä»¥sshéš§é“çš„æ–¹å¼è¿æ¥è‡³å¦ä¸€ä¸ªå­èŠ‚ç‚¹\n\n```\nagent-2: ./stowaway_agent -l 10003\n```\n\n```\n(node 0) >> sshtunnel 127.0.0.1:22 10003\n[*] Please choose the auth method(1.username&&password / 2.certificate): 1\n[*] Please enter the username: ph4ntom\n[*] Please enter the password: ******\n[*] Waiting for response.....\n[*] New node online! Node id is 2\n\n(node 0) >>\n```\n\nåœ¨ä¸¥æ ¼å—é™çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œå¯ä»¥åˆ©ç”¨sshéš§é“çš„æ–¹å¼æ¥å°†stowawayçš„æµé‡ä¼ªè£…ä¸ºsshæµé‡ï¼Œä»è€Œé¿å¼€é˜²ç«å¢™çš„é™åˆ¶\n\n- `upload`: å‘å½“å‰èŠ‚ç‚¹ä¸Šä¼ æ–‡ä»¶\n\n```\n(node 0) >> upload test.7z test.xxx\n[*] File transmitting, please wait...\n136.07 KiB / 136.07 KiB [-----------------------------------------------------------------------------------] 100.00% ? p/s 0s\n```\n\n- `download`: ä¸‹è½½å½“å‰èŠ‚ç‚¹ä¸Šçš„æ–‡ä»¶\n\n```\n(node 0) >> download test.xxx test.xxxx\n[*] File transmitting, please wait...\n136.07 KiB / 136.07 KiB [-----------------------------------------------------------------------------------] 100.00% ? p/s 0s\n```\n\n- `forward`: æ˜ å°„adminä¸Šçš„ç«¯å£è‡³è¿œç¨‹ç«¯å£\n\n```\n(node 0) >> forward 9000 127.0.0.1:22\n[*] Trying to listen on 0.0.0.0:9000......\n[*] Waiting for response......\n[*] Forward start successfully!\n(node 0) >>\n```\n\n```\n$ ssh 127.0.0.1 -p 9000\nPassword:\n # ph4ntom @ ph4ntoms-MBP in ~ ğŸ‘‘ [17:19:51]\n$\n```\n\n- `stopforward`: å…³é—­å½“å‰èŠ‚ç‚¹çš„è¿œç¨‹æ˜ å°„\n\n```\n(node 0) >> stopforward\n[0] All\n[1] Listening Addr : [::]:9000 , Remote Addr : 127.0.0.1:22 , Active Connnections : 1\n[*] Do you really want to shutdown forward?(yes/no): yes\n[*] Please choose one to close: 1\n[*] Closing......\n[*] Forward service has been closed successfully!\n```\n\n- `backward`: åå‘æ˜ å°„å½“å‰agentä¸Šçš„ç«¯å£è‡³adminçš„æœ¬åœ°ç«¯å£\n\n```\n(node 0) >> backward 9001 22\n[*] Trying to ask node to listen on 0.0.0.0:9001......\n[*] Waiting for response......\n[*] Backward start successfully!\n(node 0) >>\n```\n\n```\n$ ssh 127.0.0.1 -p 9001\nPassword:\n # ph4ntom @ ph4ntoms-MBP in ~ ğŸŒˆ [17:22:14]\n$\n```\n\n- `stopbackward`: å…³é—­å½“å‰èŠ‚ç‚¹çš„åå‘æ˜ å°„\n\n```\n(node 0) >> stopbackward\n[0] All\n[1] Remote Port : 9001 , Local Port : 22 , Active Connnections : 1\n[*] Do you really want to shutdown backward?(yes/no): yes\n[*] Please choose one to close: 1\n[*] Closing......\n[*] Backward service has been closed successfully!\n```\n\n- `shutdown`: å‘½ä»¤å½“å‰èŠ‚ç‚¹ä¸‹çº¿\n\n```\n(node 1) >> shutdown\n(node 1) >>\n[*] Node 1 is offline!\n```\n\n- `back`: é€€å›åˆ°ä¸»panel\n\n```\n(node 1) >> back\n(admin) >>\n```\n\n- `exit`: é€€å‡ºstowaway\n\n```\n(node 1) >> exit\n[*] Do you really want to exit stowaway?(y/n): y\n[*] BYE!\n```\n\n## TODO\n\n- [x] ä¿®å¤bug\n- [x] æ”¯æŒTLS\n- [ ] æ”¯æŒå¤šstartnodeçš„å½¢å¼\n\n## æ³¨æ„äº‹é¡¹\n\n- æ­¤ç¨‹åºä»…æ˜¯é—²æš‡æ—¶å¼€å‘å­¦ä¹ ï¼Œç»“æ„åŠä»£ç ç»“æ„ä¸å¤Ÿä¸¥è°¨ï¼ŒåŠŸèƒ½å¯èƒ½å­˜åœ¨bugï¼Œè¯·å¤šå¤šè°…è§£\n- adminä¸åœ¨çº¿æ—¶ï¼Œæ–°èŠ‚ç‚¹å°†ä¸å…è®¸åŠ å…¥\n- adminä»…æ”¯æŒä¸€ä¸ªç›´æ¥è¿æ¥çš„agentèŠ‚ç‚¹ï¼ŒagentèŠ‚ç‚¹åˆ™æ— æ­¤é™åˆ¶\n- å¦‚æœç”¨æˆ·ä½¿ç”¨windowsä¸‹çš„adminç«¯ï¼Œè¯·å…ˆä¸‹è½½[ansicon](https://github.com/adoxa/ansicon/releases)ï¼Œæˆ–è€…åœ¨[è¿™é‡Œ]()ä¸‹è½½ï¼Œä¹‹åè¿›å…¥å¯¹åº”ç³»ç»Ÿä½æ•°çš„æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ`ansicon.exe -i`å³å¯ï¼Œä¸ç„¶adminç«¯ä¼šå‡ºç°ä¹±ç çš„é—®é¢˜\n- æœ¬ç¨‹åºä»…æ”¯æŒæ ‡å‡†çš„åŸºäº[RFC1928](https://www.ietf.org/rfc/rfc1928.txt)æ‰€é˜è¿°çš„`UDP ASSOCIATE`ï¼Œè¯·åœ¨ä½¿ç”¨socks5 udpä»£ç†æ—¶æ³¨æ„æ‚¨æ‰€ä½¿ç”¨çš„ç¨‹åº(ä¾‹å¦‚æ‰«æå™¨ç­‰)ï¼ŒåŒ…æ„é€ æ–¹å¼å¿…é¡»éµå®ˆæ ‡å‡†çš„[RFC1928](https://www.ietf.org/rfc/rfc1928.txt)ï¼Œå¹¶ä¸”éœ€è¦è‡ªè¡Œå¤„ç†ä¸¢åŒ…çŠ¶å†µã€‚\n\n## 404æ˜Ÿé“¾è®¡åˆ’\n<img src=\"https://github.com/knownsec/404StarLink/raw/master/Images/logo.png\" width=\"30%\">\n\nStowaway ç°å·²åŠ å…¥ [404æ˜Ÿé“¾è®¡åˆ’](https://github.com/knownsec/404StarLink)\n\n## è‡´è°¢\n\næ„Ÿè°¢ä»¥ä¸‹å¸ˆå‚…å’Œé¡¹ç›®åœ¨Stowawayå¼€å‘è¿‡ç¨‹ä¸­çš„å¸®åŠ©\n- [lz520520](https://github.com/lz520520)\n- [SignorMercurio](https://github.com/SignorMercurio)\n- [MM0x00](https://github.com/MM0x00)\n- [r0ck3rt](https://github.com/r0ck3rt)\n- [Termite](https://github.com/rootkiter/Termite)\n- [Venom](https://github.com/Dliv3/Venom)\n"
        },
        {
          "name": "README_EN.md",
          "type": "blob",
          "size": 30.4345703125,
          "content": "![stowaway.png](https://github.com/ph4ntonn/Stowaway/blob/master/img/logo.png)\n\n# Stowaway\n\n[![GitHub issues](https://img.shields.io/github/issues/ph4ntonn/Stowaway)](https://github.com/ph4ntonn/Stowaway/issues)\n[![GitHub forks](https://img.shields.io/github/forks/ph4ntonn/Stowaway)](https://github.com/ph4ntonn/Stowaway/network)\n[![GitHub stars](https://img.shields.io/github/stars/ph4ntonn/Stowaway)](https://github.com/ph4ntonn/Stowaway/stargazers)\n[![GitHub license](https://img.shields.io/github/license/ph4ntonn/Stowaway)](https://github.com/ph4ntonn/Stowaway/blob/master/LICENSE)\n\nStowaway is a Multi-hop proxy tool for security researchers and pentesters\n\nUsers can use this program to proxy external traffic through multiple nodes to the core internal network, breaking through internal network access restrictions, constructing a tree-like node network, and easily realizing management functions.\n\nThank you everyone for the stars, and also welcome everyone to raise questions && bugs after use :kissing_heart: \n\n**And please be sure to read the usage method and the notes at the end before using**\n\n> This tool is limited to security research and teaching, and the user bears all legal and related responsibilities caused by the use of this tool! The author does not assume any legal and related responsibilities!\n\n## Features\n\n- More user-friendly interaction, support command auto-completion/search history\n- Obvious node topology\n- Clear information display of nodes\n- Active/Passive connection between nodes\n- Support reconnection between nodes\n- Nodes can be connected through socks5/http proxy\n- Nodes can be connected through ssh tunnel\n- TCP/HTTP/WS can be selected for inter-node traffic\n- Multi-hop socks5 traffic proxy forwarding, support UDP/TCP, IPV4/IPV6\n- Nodes can access arbitrary host via ssh\n- Remote shell\n- Upload/download files\n- Port local/remote mapping\n- Port Reuse\n- Open/Close all the services arbitrarily\n- Authenicate each other between nodes\n- Traffic encryption with TLS/AES-256-GCM\n- Compared with v1.0, the file size is reduced by 25%\n- Multiple platforms support(Linux/Mac/Windows/MIPS/ARM)\n\n## Build and Demo\n\n- Use `make` to directly compile programs for multiple platforms, or refer to the Makefile for compiling specific programs.\n- If you prefer not to compile, you can directly use the programs available here [release](https://github.com/ph4ntonn/Stowaway/releases) \n- Demo video: [Youtube](https://www.youtube.com/watch?v=Lh5Q0RPWKMU&list=PLkbGxnHFIhA_g5XZtKzN4u-JXRq41L2g-)\n\n## Usage\n\n### Character\n\nStowaway has two kinds of characters: \n- `admin`  The master used by the penetration tester\n- `agent`  The slave deployed by the penetration tester\n\n### Noun definition\n\n- Node: This refers to admin || agent\n- Active mode: This refers to the situation where the node being currently operated actively establishes a connection to another node\n- Passive mode: This refers to the situation where the node currently being operated is listening on a specific port, waiting for another node to connect.\n- Upstream: This refers to the traffic between the node currently being operated and its parent node\n- Downstream: This refers to the traffic between the node currently being operated and **all ** its child nodes\n\n### Quick start\n\nThe following command can quickly start the simplest stowaway instance\n\n- admin: `./stowaway_admin -l 9999`\n- agent: `./stowaway_agent -c <stowaway_admin's IP>:9999`\n\n### Parameter analysis\n\n- admin\n\n```\nParameter:\n-l Listening address in passive mode [ip]:<port>\n-s Node communication encryption key, all nodes (admin&&agent) must be consistent\n-c Target node address under active mode\n--socks5-proxy SOCKS5 proxy server address\n--socks5-proxyu SOCKS5 proxy server username\n--socks5-proxyp SOCKS5 proxy server password\n--http-proxy HTTP proxy server address\n--down Downstream protocol type, default is raw TCP traffic, optional HTTP/WS\n--tls-enable Enable TLS for node communication, after enabling TLS, AES encryption will be disabled\n--domain Specify the TLS SNI/WebSocket domain name. If it is empty, it defaults to the target node address\n--heartbeat Enable heartbeat \n```\n\n- agent\n\n```\nParameter:\n-l Listening address in passive mode [ip]:<port>\n-s Node communication encryption key\n-c Target node address under active mode\n--socks5-proxy SOCKS5 proxy server address\n--socks5-proxyu SOCKS5 proxy server username (optional)\n--socks5-proxyp SOCKS5 proxy server password (optional)\n--http-proxy HTTP proxy server address\n--reconnect Reconnect time interval\n--rehost The IP address to be reused\n--report The Port number to be reused\n--up Upstream protocol type, default is raw TCP traffic, optional HTTP/WS\n--down Downstream protocol type, default is raw TCP traffic, optional HTTP/WS\n--cs Platform's console encoding type,default is utf-8ï¼Œoptional gbk\n--tls-enable Enable TLS for node communication, after enabling TLS, AES encryption will be disabled\n--domain Specify the TLS SNI/Websocket domain name. If it is empty, it defaults to the target node address.\n```\n\n### Parameter usage\n\n#### -l\n\nThis parameter can be used on admin&&agent, under passive mode \n\nIf you do not specify an IP address, it will default to listening on `0.0.0.0`\n\n- admin:  `./stowaway_admin -l 9999` or `./stowaway_admin -l 127.0.0.1:9999`\n\n- agent:  `./stowaway_agent -l 9999`  or `./stowaway_agent -l 127.0.0.1:9999`\n\n#### -s\n\nThis parameter can be used on admin&&agent, under both active && passive mode\n\nThis parameter is optional. If it is left blank, it means that the communication will not be encrypted. Conversely, if a key is provided by the user, the communication will be encrypted based on that key.\n\n- admin:  `./stowaway_admin -l 9999 -s 123`\n\n- agent:  `./stowaway_agent -l 9999 -s 123`\n\n#### -c\n\nThis parameter can be used on admin&&agent, under active mode \n\nIt represents the address of the node you wish to connect to\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999`\n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999` \n\n#### --socks5-proxy/--socks5-proxyu/--socks5-proxyp/--http-proxy\n\nThese four parameters can be used on admin&&agent , under active mode\n\n`--socks5-proxy` represents the address of the socks5 proxy server, `--socks5-proxyu` and `--socks5-proxyp` are optional\n\n`--http-proxy` represents the address of the http-proxy server, the usage is as same as socks5\n\nNo username and passwordï¼š\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999 --socks5-proxy xxx.xxx.xxx.xxx`\n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999 --socks5-proxy xxx.xxx.xxx.xxx`\n\nRequire username and password:\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999 --socks5-proxy xxx.xxx.xxx.xxx --socks5-proxyu xxx --socks5-proxyp xxx`\n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999 --socks5-proxy xxx.xxx.xxx.xxx --socks5-proxyu xxx --socks5-proxyp xxx`\n\n#### --up/--down\n\nThese two parameter can be used on admin&&agent, under active && passive mode\n\nHowever, note that there is no `--up` parameter on the admin\n\nThese two parameters are optional. If left empty, it signifies that the upstream/downstream traffic will be in the form of raw TCP traffic\n\nIf you wish for the upstream/downstream traffic to be HTTP/WS traffic, simply set these two parameters to `http` or `ws`\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999 --down ws` \n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999 --up ws`  or `./stowaway_agent -c 127.0.0.1:9999 --up ws --down ws`\n\nThere are two other points to note:\n\nFirst, once you set the upstream/downstream traffic of a particular node to TCP/HTTP/WS, the downstream/upstream traffic of its connected parent/child node must be set consistently\n\nLike this:\n\n- admin:  `./stowaway_admin -c 127.0.0.1:9999 --down ws`\n\n- agent:  `./stowaway_agent -l 9999 --up ws`\n\nIn the above case, the agent must set `--up` to ws, otherwise it will cause network errors\n\nThe rules between admin<-->agent is as same as agent<-->agent\n\nAssuming agent-1 is waiting for the connection of child nodes on the port `127.0.0.1:10000` and has set `--down ws`\n\nThen, agent-2 must also set `--up` to `ws`, otherwise, it would lead to network errors\n\n- agent-2:  `./stowaway_agent -c 127.0.0.1:10000 --up ws`\n\nSecond, since HTTP is a half-duplex protocol, it is not very suitable for the full-duplex communication nature of Stowaway. Therefore, the HTTP protocol here only implements the HTTP message format, not a fully functional HTTP workflow. So you can still use this protocol, but the traffic between Stowaway cannot be forwarded by nginx when choosing to transmit in the HTTP message format. This part of the code and function is retained on the one hand for the use of the HTTP protocol in some special cases, and on the other hand to provide a template for custom traffic, which is convenient for users to use as a reference when customizing other protocols.\n\nIf you need to use reverse proxy services such as nginx, please use the Websocket (ws) protocol for communication(it would be better if it can be used with tls).\n\n#### --reconnect\n\nThis parameter can be used on agent, under active mode\n\nThis parameter is optional. If not set, it means that the node will not automatically attempt to reconnect after a network disconnection. If set, it indicates that the node will try to reconnect to the parent node every x seconds (the number of seconds you set)\n\n- admin:  `./stowaway_admin -l 9999`\n\n- agent:  `./stowaway_agent -c 127.0.0.1:9999 --reconnect 10`\n\nIn the scenario described above, it means that if the connection between the agent and the admin is interrupted, the agent will attempt to reconnect to the admin every ten seconds\n\nThe rules between admin<-->agent is as same as agent<-->agent\n\nAdditionally, the `--reconnect` parameter can be used in conjunction with `--socks5-proxy`, `--socks5-proxyu`, `--socks5-proxyp`, or `--http-proxy`. In such cases, the agent will attempt to reconnect through the proxy according to the settings specified at startup\n\n#### --rehost/--report\n\nThese two parameters are quite unique and are used exclusively on the agent side. For more details, please refer to the information below on the port reuse mechanism\n\n#### --cs\n\nThis parameter can be used on agent, under active && passive mode\n\nThis is primarily aimed at resolving the issue of garbled text with the 'shell' function. When the agent is operated on a platform where the console encoding is set to GBK (such as is commonly the case with Windows) and concurrently, the admin is run on a platform with UTF-8 console encoding, it is crucial to set this parameter to `gbk`\n\n- Windows: `./stowaway_agent -c 127.0.0.1:9999 -s 123 --cs gbk`\n\n#### --tls-enable\n\nThese two parameter can be used on admin&&agent, under active && passive mode\n\nBy setting this option, traffic between nodes can be encrypted with TLS\n\n- admin: `./stowaway_admin -l 10000 --tls-enable -s 123`\n- agent: `./stowaway_agent -c localhost:10000 --tls-enable -s 123`\n\nPlease note that when this parameter is enabled, AES encryption will be disabled by default. The `-s` parameter will then be used solely for mutual verification between nodes & port reuse functionality\n\nAdditionally, when this parameter is enabled, **ensure that every node in the network (including the admin) has this parameter enabled**\n\n#### --domain\n\nThese two parameter can be used on admin&&agent, under active mode\n\nBy setting this option, you can specify the SNI option for TLS negotiation or WebSocket target host for the current node\n\n- admin: `./stowaway_admin -l 10000 --tls-enable -s 123`\n- agent: `./stowaway_agent -c xxx.xxx.xxx.xxx:10000 --tls-enable -s 123 --domain xxx.com`\n\n#### --heartbeat\n\nThis parameter can be used on admin, under active && passive mode\n\nBy setting this option, it allows the admin to continuously send heartbeat packets to the first node, thus maintaining a persistent connection even in the presence of a reverse proxy in between.\n\nAssuming there are reverse proxy devices similar to NGINX between the admin and agent, proxying port 8080 to port 8000, an example is as follows:\n- admin: `./stowaway_admin -l 8000 --tls-enable -s 123 --down ws --heartbeat`\n- agent: `./stowaway_agent -c xxx.xxx.xxx.xxx:8080 --tls-enable -s 123 --domain xxx.com --up ws`\n\n## Port reuse\n\nStowaway currently supports port reuse functionality based on the SO_REUSEPORT and SO_REUSEADDR features, as well as port reuse functionality based on IPTABLES\n\n- In Linux environment, stowaway can reuse most ports\n- In Windows environment, it cannot reuse service port like IIS/RDP, but can reuse Mysql/Apache and so on\n\n### How To?\n\n- SO_REUSEPORT/SO_REUSEADDR\n\n  Assuming that the agent uses the port reuse mechanism to reuse port 80\n\n  In order to do this, the agent must set the `--rehost`&&`--report`&&`-s` parameter at startup\n\n  - `--rehost` This represents the desired IP address for reuse, which cannot be `0.0.0.0` and generally should be the external address of the network card\n\n  - `--report` This represents the desired port for reuse\n\n  - `-s` This represents communication key\n\n  **This mode mainly supports windows and mac, linux is also possible, but there are more restrictions**\n\n  - adminï¼š`./stowaway_admin -c 192.168.0.105:80 -s 123`\n  - agentï¼š `./stowaway_agent  --report 80 --rehost 192.168.0.105 -s 123`\n\n- IPTABLES\n\n  Assuming that the agent uses the port reuse mechanism to reuse port 22\n\n  In order to do this, the agent must set the `-l`&&`--report`&&`-s` parameter at startup\n\n  - `-l` This represents the port that cannot be accessed normally, meaning the port you actually want the agent to listen on and accept connections\n\n  - `--report` This represents the desired port for reuse\n\n  - `-s` This represents communication key\n\n  **This method only support linux, agent will manipulate IPTABLES automatically,root permission is required**\n\n  - agentï¼š `./stowaway_agent --report 22 -l 10000 -s 123`\n\n    After the agent has started, please use the `reuse.py` script located in the `script` directory first\n\n    Set the value of SECRET (the value of SECRET is the communication key, aka -s option)\n\n    Then executeï¼š`python reuse.py --start --rhost xxx.xxx.xxx.xxx --rport 22`\n\n    - `--rhost` This represents the address of the agent\n\n    - `--rport` This represents the port being reused, which in this example should be 22.\n\n  - At this time, the admin can connect this agentï¼š`./stowaway_admin -c xxx.xxx.xxx.xxx:22 -s 123`\n\n### Notice\n\n- The scenarios mentioned above only enumerate the connection between the admin and the agent. The connection between agents also follows the same principles and has no differences.\n\n- If the agent is terminated using `ctrl-c` or the `kill` command, the program will automatically clean up the iptables rules. However, if it is terminated using `kill -9`, it cannot be automatically cleaned up. Therefore, to prevent the iptables rules from not being cleaned up when the agent exits abnormally, resulting in the inability to access the reused service. So, when you need to shut down \"port reusing\", you should run: `python reuse.py --stop --rhost xxx.xxx.xxx.xxx --rport xxx`. This will disable the forwarding rules, allowing the original service to be accessed normally.\n\n- If using the IPTABLES mode for port reuse, it will forcefully listen on `0.0.0.0`, and cannot be specified using the `-l` parameter.\n\n## How to build a multi-level network?\n\nFrom the example above, it can be observed that only the admin and one agent are involved\n\nHowever, constructing a multi-level network is the core functionality of Stowaway\n\nIn Stowaway, building a multi-level network requires the use of commands such as `listen`, `connect`, and `sshtunnel` within the admin interface\n\nHere is an example\n\n- admin: `./stowaway_admin -l 9999 -s 123` \n\nAt this point, agent-1 has already connected to the admin\n\n- agent-1:  `./stowaway_agent -c 127.0.0.1:9999 -s 123`\n\nAnd, the user also wishes to connect to agent-2, as follows:\n\n- agent-2:  `./stowaway_agent -l 10000 -s 123`\n\nThen, the user can enter `use 0` -> `connect agent-2's IP:10000` via admin to add agent-2 to the network and become a child node of agent-1\n\nAfter that,If the user wishes to connect to another node, agent-3, but cannot access it through agent-1\n\nThen, in order to solve this problem, the user can enter `use 0` -> `listen` via admin -> select `1.Normal Passive` -> enter `10001` to have agent-1 listen on port 10001 and await connections from agent-3\n\nAfter the admin operation is completed, agent-3 can be started as follows\n\n- agent-3: `./stowaway_agent -c 127.0.0.1:10001 -s 123`\n\nAt this point, agent-3 has become another child node of agent-1 and joined the network.\n\nFor a detailed explanation of the `listen` and `sshtunnel` commands, please refer to the command analysis below.\n\n## How to reconnect?\n\nStowaway currently supports various methods of reconnection, summarized briefly as follows:\n\nFirstly, when the parent node goes offline, only one type of node will actively disconnect, namely the nodes that were started in active mode and have not set up reconnection.\n\nIf reconnection is set up, the node will attempt to reconnect at specified time intervals.\n\nAdditionally, all nodes started in passive mode will not actively disconnect. Instead, they will re-listen on the specified port based on the parameters set at startup. Users can still use `connect` and `sshtunnel` to reconnect these nodes to the network.\n\n## Some points you should know\n\n1. **If a branch disconnects due to network fluctuations or a middle node going offline, when attempting to reconnect, it is essential to connect to the head node of the missing branch.** For example, after the admin, there is node1. Node1 branches into two: one branch is node1 -> node 2 -> node 3 -> node 4, and the other branch is node1 -> node 5 -> node 6. If node2 goes offline, node3 and node4 will remain active. If the user wishes to reconnect node3 and node4 to the network, there are two options available. Firstly, if node1 can directly access node3, the user can reconnect node3 to the network at any time by using the `connect` or `sshtunnel` commands on node1. It's important to note that even if node1 can also access node4 directly, please do not connect to node4 directly. Instead, connect to the head node of the missing chain (node3->node4), which is node3. This way, both node3 and node4 can be reconnected to the network. Alternatively, if node1 cannot directly access node3 (i.e., it must go through node2), please restart node2 and join it to the network first. Then, on node2, use the `connect` or `sshtunnel` commands to connect to node3, thus reconnecting both node3 and node4 to the network.\n2. **When a node is offline, all `socks`, `backward`, and `forward` services related to this node and its child nodes will be forcibly stopped**\n\n## Command analysis\n\nIn the admin console, users can utilize the tab key for command completion and the arrow keys (up, down, left, right) to navigate through command history or move the cursor\n\nThe admin console is divided into two levels. The first level is the main panel, which includes the following commands:\n\n- `help`: Display help information for the main panel\n\n```\n(admin) >> help\n  help                                     \t\tShow help information\n  detail                                  \t\tDisplay connected nodes' detail\n  topo                                     \t\tDisplay nodes' topology\n  use        <id>                          \t\tSelect the target node you want to use\n  exit                                     \t\tExit Stowaway\n```\n\n- `detail`: Display detailed information about online nodes\n\n```\n(admin) >> detail\nNode[0] -> IP: 127.0.0.1:10000  Hostname: ph4ntoms-MBP.lan  User: ph4ntom\nMemo:\n```\n\n- `topo`: Display the parent-child relationships of online nodes\n\n```\n(admin) >> topo\nNode[0]'s children ->\nNode[1]\n\nNode[1]'s children ->\n```\n\n- `use`: Select an node\n\n```\n(admin) >> use 0\n(node 0) >>\n```\n\n- `exit`: Exit stowaway\n\n```\n(admin) >> exit\n[*] Do you really want to exit stowaway?(y/n): y\n[*] BYE!\n```\n\nWhen user selects an node via `use` command, admin will enter the second level: node panel, it includes the following commands:\n\n- `help`: Display the help information for the node panel\n\n```\n(node 0) >> help\n  help                                            Show help information\n  status                                          Show node status,including socks/forward/backward\n  listen                                          Start port listening on current node\n  addmemo    <string>                             Add memo for current node\n  delmemo                                         Delete memo of current node\n  ssh        <ip:port>                            Start SSH through current node\n  shell                                           Start an interactive shell on current node\n  socks      <lport> [username] [pass]            Start a socks5 server\n  stopsocks                                       Shut down socks services\n  connect    <ip:port>                            Connect to a new node\n  sshtunnel  <ip:sshport> <agent port>            Use sshtunnel to add the node into our topology\n  upload     <local filename> <remote filename>   Upload file to current node\n  download   <remote filename> <local filename>   Download file from current node\n  forward    <lport> <ip:port>                    Forward local port to specific remote ip:port\n  stopforward                                     Shut down forward services\n  backward    <rport> <lport>                     Backward remote port(agent) to local port(admin)\n  stopbackward                                    Shut down backward services\n  shutdwon                                        Terminate current node\n  back                                            Back to parent panel\n  exit                                            Exit Stowaway \n```\n\n- `status`: Display the socks/forward/backward status of the current node\n\n```\n(node 0) >> status\nSocks status:\n      ListenAddr: 0.0.0.0:10000    Username:    Password:\n-------------------------------------------------------------------------------------------\nForward status:\n      [1] Listening Addr: [::]:20000 , Remote Addr: 192.168.1.1:22 , Active Connnections: 0\n      [2] Listening Addr: [::]:30000 , Remote Addr: 192.168.1.1:22 , Active Connnections: 0\n-------------------------------------------------------------------------------------------\nBackward status:\n      [1] Remote Port: 40000 , Local Port: 50000 , Active Connnections: 0\n```\n\n- `listen`: Instruct the node to listen on a specific port and wait for connection from child node\n\n```\n(node 0) >> listen\n[*] MENTION! If you choose IPTables Reuse or SOReuse,you MUST CONFIRM that the node was initially started in the corresponding way!\n[*] When you choose IPTables Reuse or SOReuse, the node will use the initial config(when node started) to reuse port!\n[*] Please choose the mode(1.Normal passive / 2.IPTables Reuse / 3.SOReuse): 1\n[*] Please input the [ip:]<port> : 10001\n[*] Waiting for response......\n[*] Node is listening on 10001\n```\n\nNote that `listen` is a special command. As you can see, the `listen` command has three modes\n\n1. `Normal passive`: This option implies that the agent will listen on the target port in a normal way and wait for child nodes to connect.\n2. `IPTables Reuse`ï¼šThis option implies that the agent will reuse the port using IPTables and wait for child nodes to connect.\n3. `SOReuse`ï¼šThis option implies that the agent will reuse the port using SOReuse and wait for child nodes to connect.\n\nThe first mode is the most commonly used. If the parent node is listening in this way, child nodes only need to use `-c parent_node_ip:port` to join the network.\n\nThe second and third modes are rather unique. If the user selects the second or third mode, they must ensure that the node they are currently operating on has been started using port reuse. Otherwise, these two modes cannot be used.\n\nIn the second and third modes, users won't need to input any information. The node will automatically reuse the port using the parameters set at its own startup and prepare to accept connections from child nodes.\n\nFurthermore, the `listen` command can only accept one child node connection at a time. If multiple child nodes need to connect, please execute the `listen` command the corresponding number of times.\n\n- `addmemo`: Add a memo for the current node\n\n```\n(node 0) >> addmemo test\n[*] Memo added!\n(node 0) >> exit\n(admin) >> detail\nNode[0] -> IP: 127.0.0.1:10000  Hostname: ph4ntoms-MBP.lan  User: ph4ntom\nMemo:  test\n```\n\n- `delmemo`: Delete the memo of the current node\n\n```\n(node 0) >> delmemo\n[*] Memo deleted!\n(node 0) >> exit\n(admin) >> detail\nNode[0] -> IP: 127.0.0.1:10000  Hostname: ph4ntoms-MBP.lan  User: ph4ntom\nMemo:\n```\n\n- `ssh`: Instruct the node to connect to the target host via SSH.\n\n```\n(node 0) >> ssh 127.0.0.1:22\n[*] Please choose the auth method(1.username&&password / 2.certificate): 1\n[*] Please enter the username: ph4ntom\n[*] Please enter the password: *****\n[*] Waiting for response.....\n[*] Connect to target host via ssh successfully!\n # ph4ntom @ ph4ntoms-MBP in ~ ğŸ‘‘ [17:03:56]\n$ whoami\nph4ntom\n # ph4ntom @ ph4ntoms-MBP in ~ ğŸ‘‘ [17:04:16]\n$\n```\n\nUnder this mode, the tab key will be disabled\n\n- `shell`: Get the shell of the current node\n\n```\n(node 0) >> shell\n[*] Waiting for response.....\n[*] Shell is started successfully!\n\nbash: no job control in this shell\n\nThe default interactive shell is now zsh.\nTo update your account to use zsh, please run `chsh -s /bin/zsh`.\nFor more details, please visit https://support.apple.com/kb/HT208050.\nbash-3.2$ whoami\nph4ntom\nbash-3.2$\n```\n\nUnder this mode, the tab key will be disabled\n\n- `socks`ï¼šStart the socks5 service on the current node\n\n```\n(node 0) >> socks 7777\n[*] Trying to listen on 0.0.0.0:7777......\n[*] Waiting for response......\n[*] Socks start successfully!\n(node 0) >>\n```\n\nPlease note that the port 7777 is not opened on the agent, but rather on the admin\n\nIf you need to set a username and password, you can modify the above command to `socks 7777 <your username> <your password>`\n\nIf you need to specify the interface to listen on, you can modify the above command to `socks xxx.xxx.xxx.xxx:7777`\n\n- `stopsocks`: Stop the SOCKS5 service on the current node\n\n```\n(node 0) >> stopsocks\nSocks Info ---> ListenAddr: 0.0.0.0:7777    Username: <null>    Password: <null>\n[*] Do you really want to shutdown socks?(yes/no): yes\n[*] Closing......\n[*] Socks service has been closed successfully!\n(node 0) >>\n```\n\n- `connect`: Instruct the current node to connect to another child node\n\n```\nagent-1: ./stowaway_agent -l 10002\n```\n\n```\n(node 0) >> connect 127.0.0.1:10002\n[*] Waiting for response......\n[*] New node online! Node id is 1\n\n(node 0) >>\n```\n\n- `sshtunnel`: Instruct the current node to connect to another child node via ssh tunnel\n\n```\nagent-2: ./stowaway_agent -l 10003\n```\n\n```\n(node 0) >> sshtunnel 127.0.0.1:22 10003\n[*] Please choose the auth method(1.username&&password / 2.certificate): 1\n[*] Please enter the username: ph4ntom\n[*] Please enter the password: ******\n[*] Waiting for response.....\n[*] New node online! Node id is 2\n\n(node 0) >>\n```\n\nIn highly restricted network environments, Stowaway can utilize SSH tunneling to disguise its traffic as SSH traffic, thereby circumventing firewall restrictions\n\n- `upload`: Upload file to the current node\n\n```\n(node 0) >> upload test.7z test.xxx\n[*] File transmitting, please wait...\n136.07 KiB / 136.07 KiB [-----------------------------------------------------------------------------------] 100.00% ? p/s 0s\n```\n\n- `download`: Download file from the current node\n\n```\n(node 0) >> download test.xxx test.xxxx\n[*] File transmitting, please wait...\n136.07 KiB / 136.07 KiB [-----------------------------------------------------------------------------------] 100.00% ? p/s 0s\n```\n\n- `forward`: Map port on the admin to remote port\n\n```\n(node 0) >> forward 9000 127.0.0.1:22\n[*] Trying to listen on 0.0.0.0:9000......\n[*] Waiting for response......\n[*] Forward start successfully!\n(node 0) >>\n```\n\n```\n$ ssh 127.0.0.1 -p 9000\nPassword:\n # ph4ntom @ ph4ntoms-MBP in ~ ğŸ‘‘ [17:19:51]\n$\n```\n\n- `stopforward`: Close the remote mapping on the admin\n\n```\n(node 0) >> stopforward\n[0] All\n[1] Listening Addr : [::]:9000 , Remote Addr : 127.0.0.1:22 , Active Connnections : 1\n[*] Do you really want to shutdown forward?(yes/no): yes\n[*] Please choose one to close: 1\n[*] Closing......\n[*] Forward service has been closed successfully!\n```\n\n- `backward`: Reverse map the port on the current agent to the local port on the admin\n\n```\n(node 0) >> backward 9001 22\n[*] Trying to ask node to listen on 0.0.0.0:9001......\n[*] Waiting for response......\n[*] Backward start successfully!\n(node 0) >>\n```\n\n```\n$ ssh 127.0.0.1 -p 9001\nPassword:\n # ph4ntom @ ph4ntoms-MBP in ~ ğŸŒˆ [17:22:14]\n$\n```\n\n- `stopbackward`: Close the reverse mapping on the current node\n\n```\n(node 0) >> stopbackward\n[0] All\n[1] Remote Port : 9001 , Local Port : 22 , Active Connnections : 1\n[*] Do you really want to shutdown backward?(yes/no): yes\n[*] Please choose one to close: 1\n[*] Closing......\n[*] Backward service has been closed successfully!\n```\n\n- `shutdown`: Shutdown the current node \n\n```\n(node 1) >> shutdown\n(node 1) >>\n[*] Node 1 is offline!\n```\n\n- `back`: Return to main panel\n\n```\n(node 1) >> back\n(admin) >>\n```\n\n- `exit`: Exit Stowaway \n\n```\n(node 1) >> exit\n[*] Do you really want to exit stowaway?(y/n): y\n[*] BYE!\n```\n\n## TODO\n\n- [x] Fix the bug that may exists\n- [x] Support TLS\n- [ ] Support multi startnode\n\n### Attention\n\n- This porject is coding just for fun , the logic structure and code structure are not strict enough, please don't be so serious about it\n- Admin node MUST be online if you want to add a new node into the network\n- The admin only supports one directly connected agent node, but the agent node has no such restriction\n- If users use the admin on windows, please download [ansicon](https://github.com/adoxa/ansicon/releases) first, or download from [here](), and then enter the folder corresponding to the number of system bits. Execute `ansicon.exe -i`, otherwise garbled characters will appear on the admin\n- This program only supports standard `UDP ASSOCIATE` described in [RFC1928](https://www.ietf.org/rfc/rfc1928.txt). Please check the programs(such as scanners, etc.) you are using, make sure if the packet construction method comply with the standard [RFC1928](https://www.ietf.org/rfc/rfc1928.txt). Besides, the packet loss situation also needs to be handled by yourself.\n\n## 404Starlink\n\n<img src=\"https://github.com/knownsec/404StarLink/raw/master/Images/logo.png\" width=\"30%\">\n\nStowaway has joined [404Starlink](https://github.com/knownsec/404StarLink)\n\n## Acknowledgement\n\nThanks to the following developers and projects for their help during the development of Stowaway\n- [lz520520](https://github.com/lz520520)\n- [SignorMercurio](https://github.com/SignorMercurio)\n- [MM0x00](https://github.com/MM0x00)\n- [r0ck3rt](https://github.com/r0ck3rt)\n- [Termite](https://github.com/rootkiter/Termite)\n- [Venom](https://github.com/Dliv3/Venom)"
        },
        {
          "name": "admin",
          "type": "tree",
          "content": null
        },
        {
          "name": "agent",
          "type": "tree",
          "content": null
        },
        {
          "name": "ansicon",
          "type": "tree",
          "content": null
        },
        {
          "name": "crypto",
          "type": "tree",
          "content": null
        },
        {
          "name": "global",
          "type": "tree",
          "content": null
        },
        {
          "name": "go.mod",
          "type": "blob",
          "size": 0.7578125,
          "content": "module Stowaway\n\ngo 1.13\n\nrequire (\n\tgithub.com/cheggaaa/pb v2.0.7+incompatible\n\tgithub.com/davecgh/go-spew v1.1.1 // indirect\n\tgithub.com/eiannone/keyboard v0.0.0-20200508000154-caf4b762e807\n\tgithub.com/fatih/color v1.10.0\n\tgithub.com/gofrs/uuid v4.0.0+incompatible\n\tgithub.com/libp2p/go-reuseport v0.0.2\n\tgithub.com/nsf/termbox-go v1.1.0\n\tgolang.org/x/crypto v0.0.0-20201012173705-84dcc777aaee\n\tgolang.org/x/sys v0.0.0-20210104204734-6f8348627aad // indirect\n\tgolang.org/x/text v0.3.0\n\tgopkg.in/VividCortex/ewma.v1 v1.1.1 // indirect\n\tgopkg.in/cheggaaa/pb.v2 v2.0.7 // indirect\n\tgopkg.in/fatih/color.v1 v1.7.0 // indirect\n\tgopkg.in/mattn/go-colorable.v0 v0.1.0 // indirect\n\tgopkg.in/mattn/go-isatty.v0 v0.0.4 // indirect\n\tgopkg.in/mattn/go-runewidth.v0 v0.0.4 // indirect\n)\n"
        },
        {
          "name": "go.sum",
          "type": "blob",
          "size": 5.103515625,
          "content": "github.com/cheggaaa/pb v2.0.7+incompatible h1:gLKifR1UkZ/kLkda5gC0K6c8g+jU2sINPtBeOiNlMhU=\ngithub.com/cheggaaa/pb v2.0.7+incompatible/go.mod h1:pQciLPpbU0oxA0h+VJYYLxO+XeDQb5pZijXscXHm81s=\ngithub.com/davecgh/go-spew v1.1.0/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=\ngithub.com/davecgh/go-spew v1.1.1 h1:vj9j/u1bqnvCEfJOwUhtlOARqs3+rkHYY13jYWTU97c=\ngithub.com/davecgh/go-spew v1.1.1/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=\ngithub.com/eiannone/keyboard v0.0.0-20200508000154-caf4b762e807 h1:jdjd5e68T4R/j4PWxfZqcKY8KtT9oo8IPNVuV4bSXDQ=\ngithub.com/eiannone/keyboard v0.0.0-20200508000154-caf4b762e807/go.mod h1:Xoiu5VdKMvbRgHuY7+z64lhu/7lvax/22nzASF6GrO8=\ngithub.com/fatih/color v1.10.0 h1:s36xzo75JdqLaaWoiEHk767eHiwo0598uUxyfiPkDsg=\ngithub.com/fatih/color v1.10.0/go.mod h1:ELkj/draVOlAH/xkhN6mQ50Qd0MPOk5AAr3maGEBuJM=\ngithub.com/gofrs/uuid v4.0.0+incompatible h1:1SD/1F5pU8p29ybwgQSwpQk+mwdRrXCYuPhW6m+TnJw=\ngithub.com/gofrs/uuid v4.0.0+incompatible/go.mod h1:b2aQJv3Z4Fp6yNu3cdSllBxTCLRxnplIgP/c0N/04lM=\ngithub.com/libp2p/go-reuseport v0.0.2 h1:XSG94b1FJfGA01BUrT82imejHQyTxO4jEWqheyCXYvU=\ngithub.com/libp2p/go-reuseport v0.0.2/go.mod h1:SPD+5RwGC7rcnzngoYC86GjPzjSywuQyMVAheVBD9nQ=\ngithub.com/mattn/go-colorable v0.1.8 h1:c1ghPdyEDarC70ftn0y+A/Ee++9zz8ljHG1b13eJ0s8=\ngithub.com/mattn/go-colorable v0.1.8/go.mod h1:u6P/XSegPjTcexA+o6vUJrdnUu04hMope9wVRipJSqc=\ngithub.com/mattn/go-isatty v0.0.12 h1:wuysRhFDzyxgEmMf5xjvJ2M9dZoWAXNNr5LSBS7uHXY=\ngithub.com/mattn/go-isatty v0.0.12/go.mod h1:cbi8OIDigv2wuxKPP5vlRcQ1OAZbq2CE4Kysco4FUpU=\ngithub.com/mattn/go-runewidth v0.0.9 h1:Lm995f3rfxdpd6TSmuVCHVb/QhupuXlYr8sCI/QdE+0=\ngithub.com/mattn/go-runewidth v0.0.9/go.mod h1:H031xJmbD/WCDINGzjvQ9THkh0rPKHF+m2gUSrubnMI=\ngithub.com/nsf/termbox-go v1.1.0 h1:R+GIXVMaDxDQ2VHem5vO5h0mI8ZxLECTUNw1ZzXODzI=\ngithub.com/nsf/termbox-go v1.1.0/go.mod h1:T0cTdVuOwf7pHQNtfhnEbzHbcNyCEcVU4YPpouCbVxo=\ngithub.com/pkg/errors v0.9.1 h1:FEBLx1zS214owpjy7qsBeixbURkuhQAwrK5UwLGTwt4=\ngithub.com/pkg/errors v0.9.1/go.mod h1:bwawxfHBFNV+L2hUp1rHADufV3IMtnDRdf1r5NINEl0=\ngithub.com/pmezard/go-difflib v1.0.0 h1:4DBwDE0NGyQoBHbLQYPwSUPoCMWR5BEzIk/f1lZbAQM=\ngithub.com/pmezard/go-difflib v1.0.0/go.mod h1:iKH77koFhYxTK1pcRnkKkqfTogsbg7gZNVY4sRDYZ/4=\ngithub.com/stretchr/objx v0.1.0/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=\ngithub.com/stretchr/testify v1.5.1 h1:nOGnQDM7FYENwehXlg/kFVnos3rEvtKTjRvOWSzb6H4=\ngithub.com/stretchr/testify v1.5.1/go.mod h1:5W2xD1RspED5o8YsWQXVCued0rvSQ+mT+I5cxcmMvtA=\ngolang.org/x/crypto v0.0.0-20190308221718-c2843e01d9a2/go.mod h1:djNgcEr1/C05ACkg1iLfiJU5Ep61QUkGW8qpdssI0+w=\ngolang.org/x/crypto v0.0.0-20201012173705-84dcc777aaee h1:4yd7jl+vXjalO5ztz6Vc1VADv+S/80LGJmyl1ROJ2AI=\ngolang.org/x/crypto v0.0.0-20201012173705-84dcc777aaee/go.mod h1:LzIPMQfyMNhhGPhUkYOs5KpL4U8rLKemX1yGLhDgUto=\ngolang.org/x/net v0.0.0-20190404232315-eb5bcb51f2a3/go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=\ngolang.org/x/sys v0.0.0-20190215142949-d0b11bdaac8a/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\ngolang.org/x/sys v0.0.0-20190228124157-a34e9553db1e/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\ngolang.org/x/sys v0.0.0-20190412213103-97732733099d/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20200116001909-b77594299b42/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20200223170610-d5e6a3e2c0ae/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20210104204734-6f8348627aad h1:MCsdmFSdEd4UEa5TKS5JztCRHK/WtvNei1edOj5RSRo=\ngolang.org/x/sys v0.0.0-20210104204734-6f8348627aad/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/text v0.3.0 h1:g61tztE5qeGQ89tm6NTjjM9VPIm088od1l6aSorWRWg=\ngolang.org/x/text v0.3.0/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=\ngopkg.in/VividCortex/ewma.v1 v1.1.1 h1:tWHEKkKq802K/JT9RiqGCBU5fW3raAPnJGTE9ostZvg=\ngopkg.in/VividCortex/ewma.v1 v1.1.1/go.mod h1:TekXuFipeiHWiAlO1+wSS23vTcyFau5u3rxXUSXj710=\ngopkg.in/check.v1 v0.0.0-20161208181325-20d25e280405 h1:yhCVgyC4o1eVCa2tZl7eS0r+SDo693bJlVdllGtEeKM=\ngopkg.in/check.v1 v0.0.0-20161208181325-20d25e280405/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=\ngopkg.in/cheggaaa/pb.v2 v2.0.7 h1:beaAg8eacCdMQS9Y7obFEtkY7gQl0uZ6Zayb3ry41VY=\ngopkg.in/cheggaaa/pb.v2 v2.0.7/go.mod h1:0CiZ1p8pvtxBlQpLXkHuUTpdJ1shm3OqCF1QugkjHL4=\ngopkg.in/fatih/color.v1 v1.7.0 h1:bYGjb+HezBM6j/QmgBfgm1adxHpzzrss6bj4r9ROppk=\ngopkg.in/fatih/color.v1 v1.7.0/go.mod h1:P7yosIhqIl/sX8J8UypY5M+dDpD2KmyfP5IRs5v/fo0=\ngopkg.in/mattn/go-colorable.v0 v0.1.0 h1:WYuADWvfvYC07fm8ygYB3LMcsc5CunpxfMGKawHkAos=\ngopkg.in/mattn/go-colorable.v0 v0.1.0/go.mod h1:BVJlBXzARQxdi3nZo6f6bnl5yR20/tOL6p+V0KejgSY=\ngopkg.in/mattn/go-isatty.v0 v0.0.4 h1:NtS1rQGQr4IaFWBGz4Cz4BhB///gyys4gDVtKA7hIsc=\ngopkg.in/mattn/go-isatty.v0 v0.0.4/go.mod h1:wt691ab7g0X4ilKZNmMII3egK0bTxl37fEn/Fwbd8gc=\ngopkg.in/mattn/go-runewidth.v0 v0.0.4 h1:r0P71TnzQDlNIcizCqvPSSANoFa3WVGtcNJf3TWurcY=\ngopkg.in/mattn/go-runewidth.v0 v0.0.4/go.mod h1:BmXejnxvhwdaATwiJbB1vZ2dtXkQKZGu9yLFCZb4msQ=\ngopkg.in/yaml.v2 v2.2.2 h1:ZCJp+EgiOT7lHqUV2J862kp8Qj64Jo6az82+3Td9dZw=\ngopkg.in/yaml.v2 v2.2.2/go.mod h1:hI93XBmqTisBFMUTm0b8Fm+jr3Dg1NNxqwp+5A1VGuI=\n"
        },
        {
          "name": "img",
          "type": "tree",
          "content": null
        },
        {
          "name": "protocol",
          "type": "tree",
          "content": null
        },
        {
          "name": "script",
          "type": "tree",
          "content": null
        },
        {
          "name": "share",
          "type": "tree",
          "content": null
        },
        {
          "name": "utils",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}