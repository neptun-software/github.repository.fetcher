{
  "metadata": {
    "timestamp": 1736566591240,
    "page": 145,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjE1MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "tickstep/aliyunpan",
      "stars": 4348,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.6357421875,
          "content": "# Binaries for programs and plugins\n*.exe\n*.dll\n*.so\n*.dylib\naliyunpan\naliyunpan.exe\ncmd/AndroidNDKBuild/AndroidNDKBuild\n\n# Test binary, build with `go test -c`\n*.test\n\n# Output of the go coverage tool, specifically when used with LiteIDE\n*.out\nout/\n*.dl\n\n# Project-local glide cache, RE: https://github.com/Masterminds/glide/issues/736\n.glide/\n\n# Others\n.DS_Store\n*.proc\n*.txt\n*.log\n*.gz\ncaptcha.png\naliyunpan_config.json\naliyunpan_command_history.txt\naliyunpan_uploading.json\ntest/\ndownload/\n*-downloading\n\n# GoLand\n.idea/\n\ndemos/\ntests.sh\nmain_test.go\nlicense_header.sh\naccount.txt\ngit_push.sh\ngit_pull.sh\ndocker/sync/data\nclear_docker.sh\nupload.sh"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 11.0908203125,
          "content": "                                 Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n   APPENDIX: How to apply the Apache License to your work.\n\n      To apply the Apache License to your work, attach the following\n      boilerplate notice, with the fields enclosed by brackets \"[]\"\n      replaced with your own identifying information. (Don't include\n      the brackets!)  The text should be enclosed in the appropriate\n      comment syntax for the file format. We also recommend that a\n      file or class name and description of purpose be included on the\n      same \"printed page\" as the copyright notice for easier\n      identification within third-party archives.\n\n   Copyright [yyyy] [name of copyright owner]\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 16.2333984375,
          "content": "# 关于\r\n阿里云盘CLI。仿 Linux shell 文件处理命令的阿里云盘命令行客户端，支持JavaScript插件，支持同步备份功能，支持相册批量下载。\r\n\r\n# 特色\r\n1. 多平台支持, 支持 Windows, macOS, linux(x86/x64/arm), android, iOS 等\r\n2. 阿里云盘多用户支持\r\n3. 支持同步盘，资源库无缝切换\r\n4. [下载](docs/manual.md#下载文件目录)网盘内文件, 支持多个文件或目录下载, 支持断点续传和单文件并行下载。支持软链接(符号链接)文件。\r\n5. [上传](docs/manual.md#上传文件目录)本地文件, 支持多个文件或目录上传，支持排除指定文件夹/文件（正则表达式）功能。支持软链接(符号链接)文件。\r\n6. [同步备份功能](docs/manual.md#同步备份功能)支持备份本地文件到云盘，备份云盘文件到本地，双向同步备份保持本地文件和网盘文件同步。常用于嵌入式或者NAS等设备，支持docker镜像部署。\r\n7. 命令和文件路径输入支持Tab键自动补全，路径支持通配符匹配模式\r\n8. 支持[JavaScript插件](docs/manual.md#JavaScript插件)，你可以按照自己的需要定制上传/下载中关键步骤的行为，最大程度满足自己的个性化需求\r\n9. 支持个人相册的相关操作，支持批量下载相册所有照片、视频文件到本地\r\n10. 支持多用户联合下载功能，对下载速度有极致追求的用户可以尝试使用该选项。详情请查看文档[多用户联合下载](docs/manual.md#多用户联合下载)\r\n\r\n# 阿里云盘VIP会员推荐码\r\n如果大家有打算开通阿里云盘VIP会员，可以使用阿里云盘APP扫描我们的推荐码进行开通。   \r\n![](./assets/images/aliyunpan_cps_qrcode.png)\r\n\r\n# 目录\r\n- [关于](#关于)\r\n- [特色](#特色)\r\n- [目录](#目录)\r\n- [如何安装](#如何安装)\r\n  - [直接下载安装](#直接下载安装)\r\n  - [apt安装](#apt安装)\r\n  - [yum安装](#yum安装)\r\n  - [brew安装](#brew安装)\r\n  - [winget安装](#winget安装)\r\n  - [docker安装](#docker安装)\r\n    - [sync同步盘](#sync同步盘)\r\n- [如何使用](#如何使用)\r\n  - [基本使用](#基本使用)\r\n    - [修改配置目录](#修改配置目录)\r\n    - [启动程序](#启动程序)\r\n    - [查看帮助](#查看帮助)\r\n    - [登录](#登录)\r\n    - [切换网盘](#切换网盘)\r\n    - [查看文件列表](#查看文件列表)\r\n    - [下载文件](#下载文件)\r\n    - [上传文件](#上传文件)\r\n    - [同步备份文件](#同步备份文件)\r\n  - [更多命令](#更多命令)\r\n- [常见问题](#常见问题)\r\n  - [如何开启Debug调试日志](#如何开启debug调试日志)\r\n    - [第一步](#第一步)\r\n    - [第二步](#第二步)\r\n  - [如何登出和下线客户端](#如何登出和下线客户端)\r\n- [交流反馈](#交流反馈)\r\n- [鸣谢](#鸣谢)\r\n\r\n# 如何安装\r\n## 直接下载安装\r\n可以直接在本仓库 [发布页](https://github.com/tickstep/aliyunpan/releases) 下载安装包，解压后使用。   \r\n   \r\n要特别注意安装包的标签，不同的标签对应不同架构的系统，相关版本文件的标签说明如下：\r\n1. arm / armv5 / armv7 : 适用32位ARM系统\r\n2. arm64 : 适用64位ARM系统\r\n3. 386 / x86 : 适用32系统，包括Intel和AMD的CPU系统\r\n4. amd64 / x64 : 适用64位系统，包括Intel和AMD的CPU系统\r\n5. mips : 适用MIPS指令集的CPU，例如中标麒麟的系统。MIPS要注意大小端字序的不同对应的版本也不同。\r\n6. macOS amd64适用Intel CPU的机器，macOS arm64目前主要是适用苹果M系列芯片的机器\r\n7. iOS arm64适用iPhone手机，并且必须是越狱的手机才能正常运行\r\n8. loong64 : 适用于LoongArch64架构的机器，例如国产龙芯CPU\r\n\r\n参考例子：\r\n```shell\r\nwget https://github.com/tickstep/aliyunpan/releases/download/v0.3.5/aliyunpan-v0.3.5-linux-amd64.zip\r\nunzip aliyunpan-v0.3.5-linux-amd64.zip\r\ncd aliyunpan-v0.3.5-linux-amd64\r\n./aliyunpan\r\n```\r\n\r\n## apt安装\r\n适用于apt包管理器的系统，例如Ubuntu，国产deepin深度操作系统等。目前只支持amd64和arm64架构的机器。\r\n```shell\r\nsudo curl -fsSL http://file.tickstep.com/apt/pgp | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/tickstep-packages-archive-keyring.gpg > /dev/null && echo \"deb [signed-by=/etc/apt/trusted.gpg.d/tickstep-packages-archive-keyring.gpg arch=amd64,arm64] http://file.tickstep.com/apt aliyunpan main\" | sudo tee /etc/apt/sources.list.d/tickstep-aliyunpan.list > /dev/null && sudo apt-get update && sudo apt-get install -y aliyunpan\r\n \r\n```\r\n\r\n## yum安装\r\n适用于yum包管理器的系统，例如CentOS、RockyLinux等。目前只支持amd64和arm64架构的机器。\r\n```shell\r\nsudo curl -fsSL http://file.tickstep.com/rpm/aliyunpan/aliyunpan.repo | sudo tee /etc/yum.repos.d/tickstep-aliyunpan.repo > /dev/null && sudo yum install aliyunpan -y\r\n \r\n```\r\n\r\n## brew安装\r\n适用于brew包管理器的系统，主要是苹果macOS系统。目前只支持amd64和arm64架构(Apple Silicon)的机器。\r\n```shell\r\nbrew install aliyunpan\r\n    \r\n```\r\n由于brew默认安装在系统目录下面，这样配置文件也默认存放在系统目录里了，建议设置系统变量进行配置文件的单独存储，例如\r\n```shell\r\nexport ALIYUNPAN_CONFIG_DIR=/Users/tickstep/Applications/adrive/config\r\n```\r\n\r\n## winget安装\r\n适用于Windows系统的winget包管理器。目前只支持x86和x64架构的机器。  \r\n    \r\n更新源（可选）\r\n```powershell\r\nwinget source update\r\n \r\n```\r\n安装\r\n```powershell\r\nwinget install tickstep.aliyunpan --silent\r\n \r\n```\r\n\r\n## docker安装\r\n### sync同步盘\r\n同步备份功能，支持备份本地文件到云盘，备份云盘文件到本地两种模式。支持JavaScript插件对备份文件进行过滤。\r\n备份功能支持以下模式：\r\n1. 备份本地文件，即上传本地文件到网盘，始终保持本地文件有一个完整的备份在网盘\r\n2. 备份云盘文件，即下载网盘文件到本地，始终保持网盘的文件有一个完整的备份在本地\r\n   \r\n备份功能支持指定备份策略：\r\n1. exclusive，排他备份文件（一比一镜像备份），目标目录多余的文件会被删除。保证备份的源目录，和目标目录文件一比一备份。源目录文件如果文件被删除，则对应的目标目录的文件也会被删除。\r\n2. increment，增量备份文件，目标目录多余的文件不会被删除。只会把源目录修改的文件，新增的文件备份到目标目录。如果源目录有文件删除，或者目标目录有其他文件新增是不会被删除。\r\n   \r\n同步的基本逻辑如下所示，一次循环包括：扫描-对比-执行，一共三个环节。   \r\n![](./assets/images/sync_command-basic_logic.jpg)\r\n\r\n```\r\ndocker run -d --name=aliyunpan-sync --restart=always -v \"<your aliyunpan_config.json>:/home/app/config/aliyunpan_config.json\" -v \"<your local dir>:/home/app/data\" -e ALIYUNPAN_PAN_DIR=\"<your drive pan dir>\" -e ALIYUNPAN_SYNC_MODE=\"upload\" -e ALIYUNPAN_SYNC_POLICY=\"increment\" -e ALIYUNPAN_SYNC_DRIVE=\"backup\" -e ALIYUNPAN_SYNC_LOG=\"true\" tickstep/aliyunpan-sync:v0.3.5 \r\n  \r\n<your aliyunpan_config.json>: 用户已经登录成功并保存好的aliyunpan_config.json凭据文件\r\n<your local dir>：本地目标目录，绝对路径，例如：/tickstep/Documents/设计文档\r\nALIYUNPAN_PAN_DIR：云盘目标目录，绝对路径\r\nALIYUNPAN_SYNC_MODE：备份模式，支持: upload(备份本地文件到云盘),download(备份云盘文件到本地)\r\nALIYUNPAN_SYNC_POLICY：备份策略，支持：exclusive(排他备份文件，目标目录多余的文件会被删除),increment(增量备份文件，目标目录多余的文件不会被删除)\r\nALIYUNPAN_SYNC_DRIVE: 网盘，支持：backup(备份盘), resource(资源盘)\r\nALIYUNPAN_SYNC_LOG: 同步日志，true-开启同步日志显示，false-关闭同步日志\r\n```\r\ndocker-compose启动方式请查看：[docker-compose.yml](https://github.com/tickstep/aliyunpan/blob/main/docs/manual.md#Docker%E8%BF%90%E8%A1%8C)   \r\n更详情文档请参考dockerhub网址：[tickstep/aliyunpan-sync](https://hub.docker.com/r/tickstep/aliyunpan-sync)\r\n\r\n# 如何使用\r\n完整和详细的命令说明请查看手册：[命令手册](docs/manual.md)   \r\n\r\n1. Windows\r\n   程序应在 命令提示符 (Command Prompt) 或 PowerShell 中运行.   \r\n   也可直接双击程序运行, 具体使用方法请参见 [命令列表及说明](docs/manual.md#命令列表及说明)\r\n\r\n2. Linux / macOS\r\n   程序应在 终端 (Terminal) 运行.   \r\n   具体使用方法请参见 [命令列表及说明](docs/manual.md#命令列表及说明)   \r\n\r\n如果程序运行时输出乱码, 请检查下终端的编码方式是否为 `UTF-8`.   \r\n\r\n如果没有带任何参数运行程序, 程序将会进入仿Linux shell系统用户界面的CLI交互模式, 可直接运行相关命令.   \r\n在交互模式下, 光标所在行的前缀应为 `aliyunpan >`, 如果登录了帐号则格式为 `aliyunpan:<工作目录> <用户昵称>$ `  \r\n   \r\n程序内置了相关命令的使用说明，你可以通过运行`命令 -h`的方式获取命令的使用说明，例如：`upload -h`获取上传命令的使用说明。   \r\n\r\n## 基本使用\r\n本程序支持阿里云盘大多数命令操作，这里只介绍基本的使用，更多更详细的命令请查看手册：[命令手册](docs/manual.md)。\r\n\r\n### 修改配置目录\r\n你可以指定程序配置文件的存储路径，如果没有指定，程序会使用默认的目录。   \r\n方法为设置环境变量`ALIYUNPAN_CONFIG_DIR`并指定一个存在的目录，例如linux下面可以这样指定\r\n```shell\r\nexport ALIYUNPAN_CONFIG_DIR=/home/tickstep/tools/aliyunpan/config\r\n```\r\n\r\n### 启动程序\r\n直接启动进入交互命令行\r\n```shell\r\n[tickstep@MacPro ~]$ aliyunpan\r\n提示: 方向键上下可切换历史命令.\r\n提示: Ctrl + A / E 跳转命令 首 / 尾.\r\n提示: 输入 help 获取帮助.\r\naliyunpan > \r\n```\r\n\r\n### 查看帮助\r\n```shell\r\naliyunpan > help\r\n\r\n...\r\n   阿里云盘:\r\n     album, abm   相簿(Beta)\r\n     cd           切换工作目录\r\n     download, d  下载文件/目录\r\n     ls, l, ll    列出目录\r\n     mkdir        创建目录\r\n     mv           移动文件/目录\r\n     pwd          输出工作目录\r\n     recycle      回收站\r\n     rename       重命名文件\r\n     rm           删除文件/目录\r\n     share        分享文件/目录\r\n     sync         同步备份功能\r\n     upload, u    上传文件/目录\r\n...\r\n```\r\n\r\n### 登录\r\n需要先登录，已经登录过的可以跳过此步。登录是在浏览器上进行，你需要进行两次登录。\r\n```shell\r\naliyunpan > login\r\n请在浏览器打开以下链接进行登录，链接有效时间为5分钟。\r\n注意：你需要进行一次授权一次扫码的两次登录。\r\nhttps://openapi.alipan.com/oauth/authorize?client_id=cf9f70e8fc61430f8ec5ab5cadf31375&redirect_uri=https%3A%2F%2Fapi.tickstep.com%2Fauth%2Ftickstep%2Faliyunpan%2Ftoken%2Fopenapi%2F8206f0.....fb5db6b40336%2Fauth&scope=user:base,file:all:read,file:all:write\r\n阿里云盘登录成功:  tickstep\r\naliyunpan:/ tickstep$ \r\n```\r\n\r\n### 切换网盘\r\n支持切换备份盘、资源库，默认工作在备份盘下。\r\n```shell\r\naliyunpan:/ tickstep(备份盘)$ drive\r\n  #   DRIVE ID   网盘名称  \r\n  1    11519221   备份盘   \r\n  2  1311893110   资源库   \r\n  \r\n输入要切换的网盘 # 值 > 2\r\n切换到网盘：资源库                     \r\naliyunpan:/ tickstep(资源库)$ \r\n```\r\n\r\n### 查看文件列表\r\n```shell\r\naliyunpan:/ tickstep$ ls\r\n\r\n  #  文件大小       修改日期               文件(目录)                             \r\n  0         -  2021-11-03 13:32:22  临时/                     \r\n  1         -  2021-07-10 07:44:34  好友的分享/               \r\n  2         -  2021-07-09 22:11:22  我的项目/                 \r\n  3         -  2021-07-09 22:10:37  我的游戏/       \r\n  4         -  2021-07-09 22:10:10  我的文档/       \r\n  5  349.86KB  2021-06-06 11:46:02  使用统计.xls                                            \r\n  6  503.57KB  2021-06-06 11:46:02  IMG_0098.JPG                                            \r\n  7   72.20KB  2021-06-06 11:46:02  IMG_0103.PNG \r\n       总: 3.20MB                   文件总数: 3, 目录总数: 7  \r\n----\r\n```\r\n\r\n### 下载文件\r\n通过 `aliyunpan config set -savedir <savedir>` 可以自定义下载文件保存的目录。\r\n```shell\r\naliyunpan:/ tickstep$ download IMG_0106.JPG\r\n\r\n[0] 当前文件下载最大并发量为: 5, 下载缓存为: 64.00KB\r\n[1] 加入下载队列: /IMG_0106.JPG\r\n[1] ----\r\n文件ID: 60bc44f855814e19692a4958b4a8823a1a06e5de\r\n文件名: IMG_0106.JPG\r\n文件类型: 文件\r\n文件路径: /IMG_0106.JPG\r\n\r\n[1] 准备下载: /IMG_0106.JPG\r\n[1] 将会下载到路径: /root/Downloads/4d001d48564f43b..62874f04bbe6/IMG_0106.JPG\r\n[1] 下载开始\r\n[1] ↓ 704.00KB/1.48MB 0B/s(1.69MB/s) in 1.88s, left - ............\r\n[1] 下载完成, 保存位置: /root/Downloads/4d001d48564f43b..62874f04bbe6/IMG_0106.JPG\r\n[1] 检验文件有效性成功: /root/Downloads/4d001d48564f43b..62874f04bbe6/IMG_0106.JPG\r\n\r\n下载结束, 时间: 4秒, 数据总量: 1.48MB\r\naliyunpan:/ tickstep$ \r\n```\r\n\r\n### 上传文件\r\n```shell\r\naliyunpan:/ tickstep$ upload /Users/tickstep/Downloads/apt.zip /tmp\r\n\r\n[0] 当前文件上传最大并发量为: 10, 上传分片大小为: 10.00MB\r\n[1] 加入上传队列: /Users/tickstep/Downloads/apt.zip\r\n[1] 2022-08-13 13:41:22 准备上传: /Users/tickstep/Downloads/apt.zip => /tmp/apt.zip\r\n[1] 2022-08-13 13:41:22 正在检测和创建云盘文件夹: /tmp\r\n[1] 2022-08-13 13:41:22 正在计算文件SHA1: /Users/tickstep/Downloads/apt.zip\r\n[1] 2022-08-13 13:41:22 检测秒传中, 请稍候...\r\n[1] 2022-08-13 13:41:22 秒传失败，开始正常上传文件\r\n[1] ↑ 21.00MB/21.00MB 702.53KB/s(702.70KB/s) in 15s ............\r\n[1] 2022-08-13 13:41:22 上传文件成功, 保存到网盘路径: /tmp/apt.zip\r\n[1] 2022-08-13 13:41:22 文件上传结果： 成功！ 耗时 18秒\r\n\r\n上传结束, 时间: 18秒, 数据总量: 21.00MB\r\n```\r\n\r\n### 同步备份文件\r\n同步备份功能，支持备份本地文件到云盘，备份云盘文件到本地，双向同步备份三种模式。支持JavaScript插件对备份文件进行过滤。   \r\n   \r\n例如：将本地目录 `/tickstep/Documents/设计文档` 中的文件备份上传到云盘目录 `/备份盘/我的文档`\r\n```shell\r\naliyunpan:/ tickstep$ sync start -ldir \"/tickstep/Documents/设计文档\" -pdir \"/备份盘/我的文档\" -mode \"upload\" -drive \"backup\"\r\n\r\n启动同步备份进程\r\n备份配置文件：(使用命令行配置)\r\n链接类型：默认链接\r\n下载并发：2\r\n上传并发：2\r\n下载分片大小：1.00MB\r\n上传分片大小：10.00MB\r\n\r\n启动同步任务\r\n任务: 设计文档(de3d6b69a607497b73624bcca0845f19)\r\n同步模式: 备份本地文件（只上传）\r\n本地目录: /tickstep/Documents/设计文档\r\n云盘目录: /备份盘/我的文档\r\n```\r\n\r\n## 更多命令\r\n更多更详细的命令请查看手册：[命令手册](docs/manual.md)。\r\n\r\n# 常见问题\r\n## 如何开启Debug调试日志\r\n当需要定位问题，或者提交issue的时候抓取log，则需要开启debug日志。步骤如下：\r\n\r\n### 第一步\r\nLinux&MacOS   \r\n命令行运行\r\n```\r\nexport ALIYUNPAN_VERBOSE=1\r\n```\r\n\r\nWindows   \r\n不同版本会有些许不一样，请自行查询具体方法   \r\n设置示意图如下：   \r\n![](./assets/images/win10-env-debug-config.png)\r\n\r\n### 第二步\r\n打开aliyunpan命令行程序，任何云盘命令都有类似如下日志输出   \r\n![](./assets/images/debug-log-screenshot.png)\r\n\r\n## 如何登出和下线客户端\r\n阿里云盘单账户最多只允许同时登录 10 台设备   \r\n当出现这个提示：你账号已超出最大登录设备数量，请先下线一台设备，然后重启本应用，才可以继续使用   \r\n说明你的账号登录客户端已经超过数量，你需要先登出其他客户端才能继续使用，如下所示   \r\n   \r\nAPP手机端   \r\n![](./assets/images/app-deregister-device.png)\r\nWeb网页端   \r\n![](./assets/images/web-deregister-device.png)\r\n\r\n# 交流反馈\r\n提交issue: [issues页面](https://github.com/tickstep/aliyunpan/issues)   \r\n联系邮箱: tickstep@outlook.com\r\n\r\n# 鸣谢\r\n本项目大量借鉴了以下相关项目的功能&成果   \r\n> [tickstep/aliyunpan-api](https://github.com/tickstep/aliyunpan-api)   \r\n> [tickstep/cloudpan189-go](https://github.com/tickstep/cloudpan189-go)   \r\n> [kazutoiris/ali_ecc](https://github.com/kazutoiris/ali_ecc)   "
        },
        {
          "name": "aliyunpan.exe.manifest",
          "type": "blob",
          "size": 0.7080078125,
          "content": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\" xmlns:asmv3=\"urn:schemas-microsoft-com:asm.v3\">\n\t<assemblyIdentity version=\"0.3.5.0\" processorArchitecture=\"*\" name=\"com.tickstep.aliyunpan\" type=\"win32\"/>\n\t<dependency>\n\t\t<dependentAssembly>\n\t\t\t<assemblyIdentity type=\"win32\" name=\"Microsoft.Windows.Common-Controls\" version=\"6.0.0.0\" processorArchitecture=\"*\" publicKeyToken=\"6595b64144ccf1df\" language=\"*\"/>\n\t\t</dependentAssembly>\n\t</dependency>\n\t<asmv3:application>\n\t\t<asmv3:windowsSettings xmlns=\"http://schemas.microsoft.com/SMI/2005/WindowsSettings\">\n\t\t\t<dpiAware>true</dpiAware>\n\t\t</asmv3:windowsSettings>\n\t</asmv3:application>\n</assembly>"
        },
        {
          "name": "assets",
          "type": "tree",
          "content": null
        },
        {
          "name": "build.sh",
          "type": "blob",
          "size": 4.822265625,
          "content": "#!/bin/sh\n\n# how to use\n# for macOS & linux, run this command in shell\n# ./build.sh v0.1.0\n\nname=\"aliyunpan\"\nversion=$1\n\nif [ \"$1\" = \"\" ]; then\n  version=v1.0.0\nfi\n\noutput=\"out\"\n\nbuild_dir=`dirname $0`\nif [ ! -d ${build_dir}/${output} ];then\n  mkdir -p ${build_dir}/${output}\nfi\n\ndefault_golang() {\n  export GOROOT=/usr/local/go\n  go=$GOROOT/bin/go\n}\n\nBuild() {\n  default_golang\n  goarm=$4\n  if [ \"$4\" = \"\" ]; then\n    goarm=7\n  fi\n\n  echo \"Building $1...\"\n  export GOOS=$2 GOARCH=$3 GO386=sse2 CGO_ENABLED=0 GOARM=$4\n  if [ $2 = \"windows\" ]; then\n    goversioninfo -o=resource_windows_386.syso\n    goversioninfo -64 -o=resource_windows_amd64.syso\n    $go build -ldflags \"-X main.Version=$version -s -w\" -o \"$output/$1/$name.exe\"\n    RicePack $1 $name.exe\n  else\n    $go build -ldflags \"-X main.Version=$version -s -w\" -o \"$output/$1/$name\"\n    RicePack $1 $name\n  fi\n\n  Pack $1 $2\n}\n\nAndroidBuild() {\n  default_golang\n  echo \"Building $1...\"\n  export GOOS=$2 GOARCH=$3 GOARM=$4 CGO_ENABLED=1\n  $go build -ldflags \"-X main.Version=$version -s -w -linkmode=external -extldflags=-pie\" -o \"$output/$1/$name\"\n\n  RicePack $1 $name\n  Pack $1 $2\n}\n\nIOSBuild() {\n  default_golang\n  echo \"Building $1...\"\n  mkdir -p \"$output/$1\"\n  cd \"$output/$1\"\n  export CC=/usr/local/go/misc/ios/clangwrap.sh GOOS=ios GOARCH=arm64 GOARM=7 CGO_ENABLED=1\n  $go build -ldflags \"-X main.Version=$version -s -w\" -o $name github.com/tickstep/aliyunpan\n  jtool2 --sign --inplace --ent ../../entitlements.xml $name\n  cd ../..\n  RicePack $1 $name\n  Pack $1 \"ios\"\n}\n\n# zip 打包\nPack() {\n  if [ $2 != \"windows\" ]; then\n      chmod +x \"$output/$1/$name\"\n  fi\n\n  cp README.md \"$output/$1\"\n  cp docs/manual.md \"$output/$1\"\n  cp -rf assets/scripts/* \"$output/$1\"\n  cp -rf assets/plugin \"$output/$1\"\n  cp -rf assets/sync_drive \"$output/$1\"\n\n  cd $output\n  zip -q -r \"$1.zip\" \"$1\"\n\n  # 删除\n  rm -rf \"$1\"\n\n  cd ..\n}\n\n# rice 打包静态资源\nRicePack() {\n  return # 已取消web功能\n}\n\n############### Android ###############\nexport ANDROID_NDK_ROOT=/Users/tickstep/Applications/android_ndk/android-ndk-r23-darwin\nCC=$ANDROID_NDK_ROOT/bin/arm-linux-androideabi/bin/clang AndroidBuild $name-$version\"-android-api16-armv7\" android arm 7\nCC=$ANDROID_NDK_ROOT/bin/aarch64-linux-android/bin/clang AndroidBuild $name-$version\"-android-api21-arm64\" android arm64 7\nCC=$ANDROID_NDK_ROOT/bin/i686-linux-android/bin/clang    AndroidBuild $name-$version\"-android-api16-386\" android 386 7\nCC=$ANDROID_NDK_ROOT/bin/x86_64-linux-android/bin/clang  AndroidBuild $name-$version\"-android-api21-amd64\" android amd64 7\n\n############### iOS ###############\nIOSBuild $name-$version\"-ios-arm64\"\n\n############### macOS ###############\nBuild $name-$version\"-darwin-macos-amd64\" darwin amd64\n# Build $name-$version\"-darwin-macos-386\" darwin 386\nBuild $name-$version\"-darwin-macos-arm64\" darwin arm64\n\n############### Windows ###############\nBuild $name-$version\"-windows-x86\" windows 386\nBuild $name-$version\"-windows-x64\" windows amd64\nBuild $name-$version\"-windows-arm64\" windows arm64\n\n############### Linux ###############\n# x64/x86\nBuild $name-$version\"-linux-386\" linux 386\nBuild $name-$version\"-linux-amd64\" linux amd64\n\n# 龙芯 LoongArch\nBuild $name-$version\"-linux-loong64\" linux loong64\n\n# arm\nBuild $name-$version\"-linux-armv5\" linux arm 5\nBuild $name-$version\"-linux-armv7\" linux arm 7\nBuild $name-$version\"-linux-arm64\" linux arm64\n\n# mips\nGOMIPS=softfloat Build $name-$version\"-linux-mips64\" linux mips64\nGOMIPS=softfloat Build $name-$version\"-linux-mips64le\" linux mips64le\nGOMIPS=hardfloat Build $name-$version\"-linux-mips64hf\" linux mips64\nGOMIPS=hardfloat Build $name-$version\"-linux-mips64lehf\" linux mips64le\nGOMIPS=softfloat Build $name-$version\"-linux-mips\" linux mips\nGOMIPS=softfloat Build $name-$version\"-linux-mipsle\" linux mipsle\nGOMIPS=hardfloat Build $name-$version\"-linux-mipshf\" linux mips\nGOMIPS=hardfloat Build $name-$version\"-linux-mipslehf\" linux mipsle\n\n# freebsd\nBuild $name-$version\"-freebsd-386\" freebsd 386\nBuild $name-$version\"-freebsd-amd64\" freebsd amd64\n# Build $name-$version\"-freebsd-arm\" freebsd arm\n\n# Others\n# Build $name-$version\"-linux-ppc64\" linux ppc64\n# Build $name-$version\"-linux-ppc64le\" linux ppc64le\n# Build $name-$version\"-linux-s390x\" linux s390x\n# Build $name-$version\"-solaris-amd64\" solaris amd64\n# Build $name-$version\"-netbsd-386\" netbsd\t386\n# Build $name-$version\"-netbsd-amd64\" netbsd amd64\n# Build $name-$version\"-netbsd-arm\" netbsd\tarm\n# Build $name-$version\"-openbsd-386\" openbsd 386\n# Build $name-$version\"-openbsd-amd64\" openbsd\tamd64\n# Build $name-$version\"-openbsd-arm\" openbsd arm\n# Build $name-$version\"-plan9-386\" plan9 386\n# Build $name-$version\"-plan9-amd64\" plan9 amd64\n# Build $name-$version\"-plan9-arm\" plan9 arm\n# Build $name-$version\"-nacl-386\" nacl 386\n# Build $name-$version\"-nacl-amd64p32\" nacl amd64p32\n# Build $name-$version\"-nacl-arm\" nacl arm\n# Build $name-$version\"-dragonflybsd-amd64\" dragonfly amd64\n"
        },
        {
          "name": "cmder",
          "type": "tree",
          "content": null
        },
        {
          "name": "docker",
          "type": "tree",
          "content": null
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "entitlements.xml",
          "type": "blob",
          "size": 0.505859375,
          "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n<plist version=\"1.0\">\n    <dict>\n        <key>application-identifier</key>\n        <string>com.tickstep.aliyunpan</string>\n        <key>get-task-allow</key>\n        <true/>\n        <key>platform-application</key>\n        <true/>\n        <key>keychain-access-groups</key>\n        <array>\n            <string>com.tickstep.aliyunpan</string>\n        </array>\n    </dict>\n</plist>"
        },
        {
          "name": "go.mod",
          "type": "blob",
          "size": 1.8525390625,
          "content": "module github.com/tickstep/aliyunpan\n\ngo 1.22\n\nrequire (\n\tgithub.com/GeertJohan/go.incremental v1.0.0\n\tgithub.com/adrg/xdg v0.4.0\n\tgithub.com/deckarep/golang-set v1.8.0\n\tgithub.com/dop251/goja v0.0.0-20220408131256-ffe77e20c6f1\n\tgithub.com/jordan-wright/email v0.0.0-20200602115436-fd8a7622303e\n\tgithub.com/json-iterator/go v1.1.12\n\tgithub.com/kardianos/osext v0.0.0-20170510131534-ae77be60afb1\n\tgithub.com/oleiade/lane v0.0.0-20160817071224-3053869314bb\n\tgithub.com/olekukonko/tablewriter v0.0.2-0.20190618033246-cc27d85e17ce\n\tgithub.com/peterh/liner v1.2.1\n\tgithub.com/satori/go.uuid v1.2.0\n\tgithub.com/tickstep/aliyunpan-api v0.2.5\n\tgithub.com/tickstep/bolt v1.3.4\n\tgithub.com/tickstep/library-go v0.1.3\n\tgithub.com/urfave/cli v1.21.1-0.20190817182405-23c83030263f\n)\n\nrequire (\n\tgithub.com/boltdb/bolt v1.3.1 // indirect\n\tgithub.com/btcsuite/btcd v0.22.1 // indirect\n\tgithub.com/cpuguy83/go-md2man v1.0.10 // indirect\n\tgithub.com/denisbrodbeck/machineid v1.0.1 // indirect\n\tgithub.com/dlclark/regexp2 v1.4.1-0.20201116162257-a2a8dda75c91 // indirect\n\tgithub.com/go-sourcemap/sourcemap v2.1.3+incompatible // indirect\n\tgithub.com/mattn/go-runewidth v0.0.9 // indirect\n\tgithub.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd // indirect\n\tgithub.com/modern-go/reflect2 v1.0.2 // indirect\n\tgithub.com/russross/blackfriday v1.5.2 // indirect\n\tgolang.org/x/crypto v0.0.0-20210513164829-c07d793c2f9a // indirect\n\tgolang.org/x/sys v0.0.0-20211025201205-69cdffdb9359 // indirect\n\tgolang.org/x/text v0.3.7 // indirect\n)\n\n//replace github.com/boltdb/bolt => github.com/tickstep/bolt v1.3.4\n//replace github.com/tickstep/bolt => /Users/tickstep/Documents/Workspace/go/projects/bolt\n//replace github.com/tickstep/library-go => /Users/tickstep/Documents/Workspace/go/projects/library-go\n//replace github.com/tickstep/aliyunpan-api => /Users/tickstep/Documents/Workspace/go/projects/aliyunpan-api\n"
        },
        {
          "name": "go.sum",
          "type": "blob",
          "size": 13.748046875,
          "content": "github.com/BurntSushi/toml v0.3.1/go.mod h1:xHWCNGjB5oqiDr8zfno3MHue2Ht5sIBksp03qcyfWMU=\ngithub.com/GeertJohan/go.incremental v1.0.0 h1:7AH+pY1XUgQE4Y1HcXYaMqAI0m9yrFqo/jt0CW30vsg=\ngithub.com/GeertJohan/go.incremental v1.0.0/go.mod h1:6fAjUhbVuX1KcMD3c8TEgVUqmo4seqhv0i0kdATSkM0=\ngithub.com/adrg/xdg v0.4.0 h1:RzRqFcjH4nE5C6oTAxhBtoE2IRyjBSa62SCbyPidvls=\ngithub.com/adrg/xdg v0.4.0/go.mod h1:N6ag73EX4wyxeaoeHctc1mas01KZgsj5tYiAIwqJE/E=\ngithub.com/aead/siphash v1.0.1/go.mod h1:Nywa3cDsYNNK3gaciGTWPwHt0wlpNV15vwmswBAUSII=\ngithub.com/boltdb/bolt v1.3.1 h1:JQmyP4ZBrce+ZQu0dY660FMfatumYDLun9hBCUVIkF4=\ngithub.com/boltdb/bolt v1.3.1/go.mod h1:clJnj/oiGkjum5o1McbSZDSLxVThjynRyGBgiAx27Ps=\ngithub.com/btcsuite/btcd v0.20.1-beta/go.mod h1:wVuoA8VJLEcwgqHBwHmzLRazpKxTv13Px/pDuV7OomQ=\ngithub.com/btcsuite/btcd v0.22.1 h1:CnwP9LM/M9xuRrGSCGeMVs9iv09uMqwsVX7EeIpgV2c=\ngithub.com/btcsuite/btcd v0.22.1/go.mod h1:wqgTSL29+50LRkmOVknEdmt8ZojIzhuWvgu/iptuN7Y=\ngithub.com/btcsuite/btcd/chaincfg/chainhash v1.0.1 h1:q0rUy8C/TYNBQS1+CGKw68tLOFYSNEs0TFnxxnS9+4U=\ngithub.com/btcsuite/btcd/chaincfg/chainhash v1.0.1/go.mod h1:7SFka0XMvUgj3hfZtydOrQY2mwhPclbT2snogU7SQQc=\ngithub.com/btcsuite/btclog v0.0.0-20170628155309-84c8d2346e9f/go.mod h1:TdznJufoqS23FtqVCzL0ZqgP5MqXbb4fg/WgDys70nA=\ngithub.com/btcsuite/btcutil v0.0.0-20190425235716-9e5f4b9a998d/go.mod h1:+5NJ2+qvTyV9exUAL/rxXi3DcLg2Ts+ymUAY5y4NvMg=\ngithub.com/btcsuite/btcutil v1.0.3-0.20201208143702-a53e38424cce/go.mod h1:0DVlHczLPewLcPGEIeUEzfOJhqGPQ0mJJRDBtD307+o=\ngithub.com/btcsuite/go-socks v0.0.0-20170105172521-4720035b7bfd/go.mod h1:HHNXQzUsZCxOoE+CPiyCTO6x34Zs86zZUiwtpXoGdtg=\ngithub.com/btcsuite/goleveldb v0.0.0-20160330041536-7834afc9e8cd/go.mod h1:F+uVaaLLH7j4eDXPRvw78tMflu7Ie2bzYOH4Y8rRKBY=\ngithub.com/btcsuite/goleveldb v1.0.0/go.mod h1:QiK9vBlgftBg6rWQIj6wFzbPfRjiykIEhBH4obrXJ/I=\ngithub.com/btcsuite/snappy-go v0.0.0-20151229074030-0bdef8d06723/go.mod h1:8woku9dyThutzjeg+3xrA5iCpBRH8XEEg3lh6TiUghc=\ngithub.com/btcsuite/snappy-go v1.0.0/go.mod h1:8woku9dyThutzjeg+3xrA5iCpBRH8XEEg3lh6TiUghc=\ngithub.com/btcsuite/websocket v0.0.0-20150119174127-31079b680792/go.mod h1:ghJtEyQwv5/p4Mg4C0fgbePVuGr935/5ddU9Z3TmDRY=\ngithub.com/btcsuite/winsvc v1.0.0/go.mod h1:jsenWakMcC0zFBFurPLEAyrnc/teJEM1O46fmI40EZs=\ngithub.com/cpuguy83/go-md2man v1.0.10 h1:BSKMNlYxDvnunlTymqtgONjNnaRV1sTpcovwwjF22jk=\ngithub.com/cpuguy83/go-md2man v1.0.10/go.mod h1:SmD6nW6nTyfqj6ABTjUi3V3JVMnlJmwcJI5acqYI6dE=\ngithub.com/creack/pty v1.1.9/go.mod h1:oKZEueFk5CKHvIhNR5MUki03XCEU+Q6VDXinZuGJ33E=\ngithub.com/davecgh/go-spew v0.0.0-20171005155431-ecdeabc65495/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=\ngithub.com/davecgh/go-spew v1.1.0/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=\ngithub.com/davecgh/go-spew v1.1.1 h1:vj9j/u1bqnvCEfJOwUhtlOARqs3+rkHYY13jYWTU97c=\ngithub.com/davecgh/go-spew v1.1.1/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=\ngithub.com/deckarep/golang-set v1.8.0 h1:sk9/l/KqpunDwP7pSjUg0keiOOLEnOBHzykLrsPppp4=\ngithub.com/deckarep/golang-set v1.8.0/go.mod h1:5nI87KwE7wgsBU1F4GKAw2Qod7p5kyS383rP6+o6qqo=\ngithub.com/decred/dcrd/lru v1.0.0/go.mod h1:mxKOwFd7lFjN2GZYsiz/ecgqR6kkYAl+0pz0tEMk218=\ngithub.com/denisbrodbeck/machineid v1.0.1 h1:geKr9qtkB876mXguW2X6TU4ZynleN6ezuMSRhl4D7AQ=\ngithub.com/denisbrodbeck/machineid v1.0.1/go.mod h1:dJUwb7PTidGDeYyUBmXZ2GphQBbjJCrnectwCyxcUSI=\ngithub.com/dlclark/regexp2 v1.4.1-0.20201116162257-a2a8dda75c91 h1:Izz0+t1Z5nI16/II7vuEo/nHjodOg0p7+OiDpjX5t1E=\ngithub.com/dlclark/regexp2 v1.4.1-0.20201116162257-a2a8dda75c91/go.mod h1:2pZnwuY/m+8K6iRw6wQdMtk+rH5tNGR1i55kozfMjCc=\ngithub.com/dop251/goja v0.0.0-20211022113120-dc8c55024d06/go.mod h1:R9ET47fwRVRPZnOGvHxxhuZcbrMCuiqOz3Rlrh4KSnk=\ngithub.com/dop251/goja v0.0.0-20220408131256-ffe77e20c6f1 h1:9/4Hyp+A98nqssD7qceXwoLeAn75MZr25IN76dxlfbg=\ngithub.com/dop251/goja v0.0.0-20220408131256-ffe77e20c6f1/go.mod h1:TQJQ+ZNyFVvUtUEtCZxBhfWiH7RJqR3EivNmvD6Waik=\ngithub.com/dop251/goja_nodejs v0.0.0-20210225215109-d91c329300e7/go.mod h1:hn7BA7c8pLvoGndExHudxTDKZ84Pyvv+90pbBjbTz0Y=\ngithub.com/dop251/goja_nodejs v0.0.0-20211022123610-8dd9abb0616d/go.mod h1:DngW8aVqWbuLRMHItjPUyqdj+HWPvnQe8V8y1nDpIbM=\ngithub.com/fsnotify/fsnotify v1.4.7/go.mod h1:jwhsz4b93w/PPRr/qN1Yymfu8t87LnFCMoQvtojpjFo=\ngithub.com/go-sourcemap/sourcemap v2.1.3+incompatible h1:W1iEw64niKVGogNgBN3ePyLFfuisuzeidWPMPWmECqU=\ngithub.com/go-sourcemap/sourcemap v2.1.3+incompatible/go.mod h1:F8jJfvm2KbVjc5NqelyYJmf/v5J0dwNLS2mL4sNA1Jg=\ngithub.com/golang/protobuf v1.2.0/go.mod h1:6lQm79b+lXiMfvg/cZm0SGofjICqVBUtrP5yJMmIC1U=\ngithub.com/google/gofuzz v1.0.0/go.mod h1:dBl0BpW6vV/+mYPU4Po3pmUjxk6FQPldtuIdl/M65Eg=\ngithub.com/hpcloud/tail v1.0.0/go.mod h1:ab1qPbhIpdTxEkNHXyeSf5vhxWSCs/tWer42PpOxQnU=\ngithub.com/jessevdk/go-flags v0.0.0-20141203071132-1679536dcc89/go.mod h1:4FA24M0QyGHXBuZZK/XkWh8h0e1EYbRYJSGM75WSRxI=\ngithub.com/jessevdk/go-flags v1.4.0/go.mod h1:4FA24M0QyGHXBuZZK/XkWh8h0e1EYbRYJSGM75WSRxI=\ngithub.com/jordan-wright/email v0.0.0-20200602115436-fd8a7622303e h1:OGunVjqY7y4U4laftpEHv+mvZBlr7UGimJXKEGQtg48=\ngithub.com/jordan-wright/email v0.0.0-20200602115436-fd8a7622303e/go.mod h1:Fy2gCFfZhay8jplf/Csj6cyH/oshQTkLQYZbKkcV+SY=\ngithub.com/jrick/logrotate v1.0.0/go.mod h1:LNinyqDIJnpAur+b8yyulnQw/wDuN1+BYKlTRt3OuAQ=\ngithub.com/json-iterator/go v1.1.10/go.mod h1:KdQUCv79m/52Kvf8AW2vK1V8akMuk1QjK/uOdHXbAo4=\ngithub.com/json-iterator/go v1.1.12 h1:PV8peI4a0ysnczrg+LtxykD8LfKY9ML6u2jnxaEnrnM=\ngithub.com/json-iterator/go v1.1.12/go.mod h1:e30LSqwooZae/UwlEbR2852Gd8hjQvJoHmT4TnhNGBo=\ngithub.com/kardianos/osext v0.0.0-20170510131534-ae77be60afb1 h1:PJPDf8OUfOK1bb/NeTKd4f1QXZItOX389VN3B6qC8ro=\ngithub.com/kardianos/osext v0.0.0-20170510131534-ae77be60afb1/go.mod h1:1NbS8ALrpOvjt0rHPNLyCIeMtbizbir8U//inJ+zuB8=\ngithub.com/kkdai/bstream v0.0.0-20161212061736-f391b8402d23/go.mod h1:J+Gs4SYgM6CZQHDETBtE9HaSEkGmuNXF86RwHhHUvq4=\ngithub.com/kr/pretty v0.1.0/go.mod h1:dAy3ld7l9f0ibDNOQOHHMYYIIbhfbHSm3C4ZsoJORNo=\ngithub.com/kr/pretty v0.2.1/go.mod h1:ipq/a2n7PKx3OHsz4KJII5eveXtPO4qwEXGdVfWzfnI=\ngithub.com/kr/pretty v0.3.0 h1:WgNl7dwNpEZ6jJ9k1snq4pZsg7DOEN8hP9Xw0Tsjwk0=\ngithub.com/kr/pretty v0.3.0/go.mod h1:640gp4NfQd8pI5XOwp5fnNeVWj67G7CFk/SaSQn7NBk=\ngithub.com/kr/pty v1.1.1/go.mod h1:pFQYn66WHrOpPYNljwOMqo10TkYh1fy3cYio2l3bCsQ=\ngithub.com/kr/text v0.1.0/go.mod h1:4Jbv+DJW3UT/LiOwJeYQe1efqtUx/iVham/4vfdArNI=\ngithub.com/kr/text v0.2.0 h1:5Nx0Ya0ZqY2ygV366QzturHI13Jq95ApcVaJBhpS+AY=\ngithub.com/kr/text v0.2.0/go.mod h1:eLer722TekiGuMkidMxC/pM04lWEeraHUUmBw8l2grE=\ngithub.com/mattn/go-runewidth v0.0.3/go.mod h1:LwmH8dsx7+W8Uxz3IHJYH5QSwggIsqBzpuz5H//U1FU=\ngithub.com/mattn/go-runewidth v0.0.4/go.mod h1:LwmH8dsx7+W8Uxz3IHJYH5QSwggIsqBzpuz5H//U1FU=\ngithub.com/mattn/go-runewidth v0.0.9 h1:Lm995f3rfxdpd6TSmuVCHVb/QhupuXlYr8sCI/QdE+0=\ngithub.com/mattn/go-runewidth v0.0.9/go.mod h1:H031xJmbD/WCDINGzjvQ9THkh0rPKHF+m2gUSrubnMI=\ngithub.com/modern-go/concurrent v0.0.0-20180228061459-e0a39a4cb421/go.mod h1:6dJC0mAP4ikYIbvyc7fijjWJddQyLn8Ig3JB5CqoB9Q=\ngithub.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd h1:TRLaZ9cD/w8PVh93nsPXa1VrQ6jlwL5oN8l14QlcNfg=\ngithub.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd/go.mod h1:6dJC0mAP4ikYIbvyc7fijjWJddQyLn8Ig3JB5CqoB9Q=\ngithub.com/modern-go/reflect2 v0.0.0-20180701023420-4b7aa43c6742/go.mod h1:bx2lNnkwVCuqBIxFjflWJWanXIb3RllmbCylyMrvgv0=\ngithub.com/modern-go/reflect2 v1.0.2 h1:xBagoLtFs94CBntxluKeaWgTMpvLxC4ur3nMaC9Gz0M=\ngithub.com/modern-go/reflect2 v1.0.2/go.mod h1:yWuevngMOJpCy52FWWMvUC8ws7m/LJsjYzDa0/r8luk=\ngithub.com/oleiade/lane v0.0.0-20160817071224-3053869314bb h1:x0yCvYsspui5SAxSRvLd2zFg7PfFijzKdCo7QAtN92I=\ngithub.com/oleiade/lane v0.0.0-20160817071224-3053869314bb/go.mod h1:ym0w0flrmBtGvApLDgFLa0sfGJkWxDQqnm0/0ok5w3Y=\ngithub.com/olekukonko/tablewriter v0.0.1/go.mod h1:vsDQFd/mU46D+Z4whnwzcISnGGzXWMclvtLoiIKAKIo=\ngithub.com/olekukonko/tablewriter v0.0.2-0.20190618033246-cc27d85e17ce h1:RLmZmfx/K62HKpbwPqtW3tg+V2GgugN/XNNx+uiMH/Y=\ngithub.com/olekukonko/tablewriter v0.0.2-0.20190618033246-cc27d85e17ce/go.mod h1:rSAaSIOAGT9odnlyGlUfAJaoc5w2fSBUmeGDbRWPxyQ=\ngithub.com/onsi/ginkgo v1.6.0/go.mod h1:lLunBs/Ym6LB5Z9jYTR76FiuTmxDTDusOGeTQH+WWjE=\ngithub.com/onsi/ginkgo v1.7.0/go.mod h1:lLunBs/Ym6LB5Z9jYTR76FiuTmxDTDusOGeTQH+WWjE=\ngithub.com/onsi/gomega v1.4.1/go.mod h1:C1qb7wdrVGGVU+Z6iS04AVkA3Q65CEZX59MT0QO5uiA=\ngithub.com/onsi/gomega v1.4.3/go.mod h1:ex+gbHU/CVuBBDIJjb2X0qEXbFg53c61hWP/1CpauHY=\ngithub.com/peterh/liner v1.2.1 h1:O4BlKaq/LWu6VRWmol4ByWfzx6MfXc5Op5HETyIy5yg=\ngithub.com/peterh/liner v1.2.1/go.mod h1:CRroGNssyjTd/qIG2FyxByd2S8JEAZXBl4qUrZf8GS0=\ngithub.com/pmezard/go-difflib v1.0.0 h1:4DBwDE0NGyQoBHbLQYPwSUPoCMWR5BEzIk/f1lZbAQM=\ngithub.com/pmezard/go-difflib v1.0.0/go.mod h1:iKH77koFhYxTK1pcRnkKkqfTogsbg7gZNVY4sRDYZ/4=\ngithub.com/rogpeppe/go-internal v1.6.1 h1:/FiVV8dS/e+YqF2JvO3yXRFbBLTIuSDkuC7aBOAvL+k=\ngithub.com/rogpeppe/go-internal v1.6.1/go.mod h1:xXDCJY+GAPziupqXw64V24skbSoqbTEfhy4qGm1nDQc=\ngithub.com/russross/blackfriday v1.5.2 h1:HyvC0ARfnZBqnXwABFeSZHpKvJHJJfPz81GNueLj0oo=\ngithub.com/russross/blackfriday v1.5.2/go.mod h1:JO/DiYxRf+HjHt06OyowR9PTA263kcR/rfWxYHBV53g=\ngithub.com/satori/go.uuid v1.2.0 h1:0uYX9dsZ2yD7q2RtLRtPSdGDWzjeM3TbMJP9utgA0ww=\ngithub.com/satori/go.uuid v1.2.0/go.mod h1:dA0hQrYB0VpLJoorglMZABFdXlWrHn1NEOzdhQKdks0=\ngithub.com/shurcooL/httpfs v0.0.0-20190707220628-8d4bc4ba7749/go.mod h1:ZY1cvUeJuFPAdZ/B6v7RHavJWZn2YPVFQ1OSXhCGOkg=\ngithub.com/shurcooL/vfsgen v0.0.0-20181202132449-6a9ea43bcacd/go.mod h1:TrYk7fJVaAttu97ZZKrO9UbRa8izdowaMIZcxYMbVaw=\ngithub.com/stretchr/objx v0.1.0/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=\ngithub.com/stretchr/testify v1.3.0/go.mod h1:M5WIy9Dh21IEIfnGCwXGc5bZfKNJtfHm1UVUgZn+9EI=\ngithub.com/stretchr/testify v1.6.1/go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962/h/Wwjteg=\ngithub.com/stretchr/testify v1.7.0 h1:nwc3DEeHmmLAfoZucVR881uASk0Mfjw8xYJ99tb5CcY=\ngithub.com/stretchr/testify v1.7.0/go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962/h/Wwjteg=\ngithub.com/tickstep/aliyunpan-api v0.2.5 h1:CNvhW+AU9I/KW9snA61lWY1ygAOiGf0Mc5YRRy+yvSA=\ngithub.com/tickstep/aliyunpan-api v0.2.5/go.mod h1:UvQgQYMIgA5k1QsfKIVnEJ2h/HqDXIkAb16oookNc8o=\ngithub.com/tickstep/bolt v1.3.4 h1:UN1txRsauOfR8a5mUWm5So0ng233PsIMVR5/+3WowCE=\ngithub.com/tickstep/bolt v1.3.4/go.mod h1:Y24RwCywbOsKAyHiVcJ4K2QQfED+q67x7PEOH9OG7Q4=\ngithub.com/tickstep/library-go v0.1.3 h1:OUj6nkimTsqhHXh5s+PbmHq5hR0m739Y1tu9QpfA2ng=\ngithub.com/tickstep/library-go v0.1.3/go.mod h1:uAHeNOIpoywCzlaeLrWmmRSupn03m9kJVZKOEmuarmA=\ngithub.com/urfave/cli v1.21.1-0.20190817182405-23c83030263f h1:xKDKjIsL76VUyHcA0G4Qe1cIAUB/nrq6Pt8D411bd1g=\ngithub.com/urfave/cli v1.21.1-0.20190817182405-23c83030263f/go.mod h1:qXyCeJubPqsgeiLd3kvHOGHHSrQcNdjZ2ScXIcVZK/I=\ngolang.org/x/crypto v0.0.0-20170930174604-9419663f5a44/go.mod h1:6SG95UA2DQfeDnfUPMdvaQW0Q7yPrPDi9nlGo2tz2b4=\ngolang.org/x/crypto v0.0.0-20190308221718-c2843e01d9a2/go.mod h1:djNgcEr1/C05ACkg1iLfiJU5Ep61QUkGW8qpdssI0+w=\ngolang.org/x/crypto v0.0.0-20200115085410-6d4e4cb37c7d/go.mod h1:LzIPMQfyMNhhGPhUkYOs5KpL4U8rLKemX1yGLhDgUto=\ngolang.org/x/crypto v0.0.0-20200510223506-06a226fb4e37/go.mod h1:LzIPMQfyMNhhGPhUkYOs5KpL4U8rLKemX1yGLhDgUto=\ngolang.org/x/crypto v0.0.0-20200820211705-5c72a883971a/go.mod h1:LzIPMQfyMNhhGPhUkYOs5KpL4U8rLKemX1yGLhDgUto=\ngolang.org/x/crypto v0.0.0-20210513164829-c07d793c2f9a h1:kr2P4QFmQr29mSLA43kwrOcgcReGTfbE9N577tCTuBc=\ngolang.org/x/crypto v0.0.0-20210513164829-c07d793c2f9a/go.mod h1:P+XmwS30IXTQdn5tA2iutPOUgjI07+tq3H3K9MVA1s8=\ngolang.org/x/net v0.0.0-20180719180050-a680a1efc54d/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=\ngolang.org/x/net v0.0.0-20180906233101-161cd47e91fd/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=\ngolang.org/x/net v0.0.0-20190404232315-eb5bcb51f2a3/go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=\ngolang.org/x/sync v0.0.0-20180314180146-1d60e4601c6f/go.mod h1:RxMgew5VJxzue5/jJTE5uejpjVlOe/izrB70Jof72aM=\ngolang.org/x/sys v0.0.0-20180909124046-d0be0721c37e/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\ngolang.org/x/sys v0.0.0-20190215142949-d0b11bdaac8a/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\ngolang.org/x/sys v0.0.0-20190412213103-97732733099d/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\ngolang.org/x/sys v0.0.0-20211025201205-69cdffdb9359 h1:2B5p2L5IfGiD7+b9BOoRMC6DgObAVZV+Fsp050NqXik=\ngolang.org/x/sys v0.0.0-20211025201205-69cdffdb9359/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=\ngolang.org/x/text v0.3.0/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=\ngolang.org/x/text v0.3.6/go.mod h1:5Zoc/QRtKVWzQhOtBMvqHzDpF6irO9z98xDceosuGiQ=\ngolang.org/x/text v0.3.7 h1:olpwvP2KacW1ZWvsR7uQhoyTYvKAupfQrRGBFM352Gk=\ngolang.org/x/text v0.3.7/go.mod h1:u+2+/6zg+i71rQMx5EYifcz6MCKuco9NR6JIITiCfzQ=\ngolang.org/x/tools v0.0.0-20180917221912-90fa682c2a6e/go.mod h1:n7NCudcB/nEzxVGmLbDWY5pfWTLqBcC2KZ6jyYvM4mQ=\ngopkg.in/check.v1 v0.0.0-20161208181325-20d25e280405/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=\ngopkg.in/check.v1 v1.0.0-20180628173108-788fd7840127/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=\ngopkg.in/check.v1 v1.0.0-20201130134442-10cb98267c6c h1:Hei/4ADfdWqJk1ZMxUNpqntNwaWcugrBjAiHlqqRiVk=\ngopkg.in/check.v1 v1.0.0-20201130134442-10cb98267c6c/go.mod h1:JHkPIbrfpd72SG/EVd6muEfDQjcINNoR0C8j2r3qZ4Q=\ngopkg.in/errgo.v2 v2.1.0/go.mod h1:hNsd1EY+bozCKY1Ytp96fpM3vjJbqLJn88ws8XvfDNI=\ngopkg.in/fsnotify.v1 v1.4.7/go.mod h1:Tz8NjZHkW78fSQdbUxIjBTcgA1z1m8ZHf0WmKUhAMys=\ngopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7/go.mod h1:dt/ZhP58zS4L8KSrWDmTeBkI65Dw0HsyUHuEVlX15mw=\ngopkg.in/yaml.v2 v2.2.1/go.mod h1:hI93XBmqTisBFMUTm0b8Fm+jr3Dg1NNxqwp+5A1VGuI=\ngopkg.in/yaml.v2 v2.2.2/go.mod h1:hI93XBmqTisBFMUTm0b8Fm+jr3Dg1NNxqwp+5A1VGuI=\ngopkg.in/yaml.v2 v2.4.0 h1:D8xgwECY7CYvx+Y2n4sBz93Jn9JRvxdiyyo8CTfuKaY=\ngopkg.in/yaml.v2 v2.4.0/go.mod h1:RDklbk79AGWmwhnvt/jBztapEOGDOx6ZbXqjP6csGnQ=\ngopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c h1:dUUwHk2QECo/6vqA44rthZ8ie2QXMNeKRTHCNY2nXvo=\ngopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c/go.mod h1:K4uyk7z7BCEPqu6E+C64Yfv1cQ7kz7rIZviUmN+EgEM=\n"
        },
        {
          "name": "internal",
          "type": "tree",
          "content": null
        },
        {
          "name": "library",
          "type": "tree",
          "content": null
        },
        {
          "name": "main.go",
          "type": "blob",
          "size": 18.271484375,
          "content": "// Copyright (c) 2020 tickstep.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//\thttp://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/tickstep/aliyunpan/internal/global\"\n\t\"io/ioutil\"\n\t\"os\"\n\t\"os/exec\"\n\t\"path\"\n\t\"path/filepath\"\n\t\"runtime\"\n\t\"sort\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\t\"unicode\"\n\n\t\"github.com/olekukonko/tablewriter\"\n\t\"github.com/peterh/liner\"\n\t\"github.com/tickstep/aliyunpan/cmder\"\n\t\"github.com/tickstep/aliyunpan/cmder/cmdliner\"\n\t\"github.com/tickstep/aliyunpan/cmder/cmdliner/args\"\n\t\"github.com/tickstep/aliyunpan/cmder/cmdtable\"\n\t\"github.com/tickstep/aliyunpan/cmder/cmdutil\"\n\t\"github.com/tickstep/aliyunpan/cmder/cmdutil/escaper\"\n\t\"github.com/tickstep/aliyunpan/internal/command\"\n\t\"github.com/tickstep/aliyunpan/internal/config\"\n\t\"github.com/tickstep/aliyunpan/internal/panupdate\"\n\t\"github.com/tickstep/aliyunpan/internal/utils\"\n\t\"github.com/tickstep/library-go/converter\"\n\t\"github.com/tickstep/library-go/logger\"\n\t\"github.com/urfave/cli\"\n)\n\nconst (\n\t// NameShortDisplayNum 文件名缩略显示长度\n\tNameShortDisplayNum = 16\n)\n\nvar (\n\t// Version 版本号\n\tVersion = \"v0.3.5\"\n\n\t// 命令历史文件\n\thistoryFilePath = filepath.Join(config.GetConfigDir(), \"aliyunpan_command_history.txt\")\n\n\t// 是否是交互命令行形态\n\tisCli bool\n)\n\nfunc init() {\n\tb, ok := os.LookupEnv(\"ALIYUNPAN_NONE_OPENAPI\")\n\tif ok && b == \"1\" {\n\t\tglobal.IsSupportNoneOpenApiCommands = true\n\t}\n\n\tglobal.AppVersion = Version\n\tcmdutil.ChWorkDir()\n\n\terr := config.Config.Init()\n\tswitch err {\n\tcase nil:\n\tcase config.ErrConfigFileNoPermission, config.ErrConfigContentsParseError:\n\t\tfmt.Fprintf(os.Stderr, \"FATAL ERROR: config file error: %s\\n\", err)\n\t\t//os.Exit(1)\n\tdefault:\n\t\tfmt.Printf(\"WARNING: config init error: %s\\n\", err)\n\t}\n}\n\nfunc checkLoginExpiredAndRelogin() {\n\tcommand.ReloadConfigFunc(nil)\n\tactiveUser := config.Config.ActiveUser()\n\tif activeUser == nil || activeUser.UserId == \"\" {\n\t\t// maybe expired, try to login\n\t\tcommand.TryLogin()\n\t} else {\n\t\t// 刷新过期Token并保存到配置文件\n\t\tcommand.RefreshWebTokenInNeed(activeUser, config.Config.DeviceName)\n\t\tcommand.RefreshOpenTokenInNeed(activeUser)\n\t}\n\tcommand.SaveConfigFunc(nil)\n}\n\nfunc main() {\n\tdefer config.Config.Close()\n\n\t// check & relogin\n\tcheckLoginExpiredAndRelogin()\n\n\t// check token expired task\n\tgo func() {\n\t\tfor {\n\t\t\t// Token刷新进程，不管是CLI命令行模式，还是直接命令模式，本刷新任务都会执行\n\t\t\ttime.Sleep(time.Duration(1) * time.Minute)\n\t\t\t//time.Sleep(time.Duration(5) * time.Second)\n\t\t\tfor _, u := range config.Config.UserList {\n\t\t\t\tif u.UserId == config.Config.ActiveUID {\n\t\t\t\t\tif u.PanClient() != nil {\n\t\t\t\t\t\tcheckLoginExpiredAndRelogin()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}()\n\n\tapp := cli.NewApp()\n\tcmder.SetApp(app)\n\n\tapp.Name = \"aliyunpan\"\n\tapp.Version = Version\n\tapp.Author = \"tickstep/aliyunpan: https://github.com/tickstep/aliyunpan\"\n\tapp.Copyright = \"(c) 2021-2025 tickstep.\"\n\tapp.Usage = \"阿里云盘客户端 for \" + runtime.GOOS + \"/\" + runtime.GOARCH\n\tapp.Description = `aliyunpan 是一款阿里云盘命令行客户端工具, 为操作阿里云盘, 提供实用功能。\n\t支持同步备份功能，支持备份本地文件到云盘，备份云盘文件到本地。\n\t具体功能, 参见 COMMANDS 列表。\n\n\t支持设置环境变量 ALIYUNPAN_CONFIG_DIR 更改配置文件存储路径：\n\texport ALIYUNPAN_CONFIG_DIR=/etc/aliyunpan/config\n\t\n\t支持XDG目录规范：\n\t默认XDG配置目录：$XDG_CONFIG_HOME/aliyunpan\n\t默认XDG下载目录：$XDG_DOWNLOAD_DIR\n\t\n\t------------------------------------------------------------------------------\n\t前往 https://github.com/tickstep/aliyunpan 以获取更多帮助信息!\n\t前往 https://github.com/tickstep/aliyunpan/releases 以获取程序更新信息!\n\t------------------------------------------------------------------------------\n\n\t交流反馈:\n\t\t提交Issue: https://github.com/tickstep/aliyunpan/issues\n\t\t联系邮箱: tickstep@outlook.com`\n\n\t// 全局options\n\tapp.Flags = []cli.Flag{\n\t\tcli.BoolFlag{\n\t\t\tName:        \"verbose\",\n\t\t\tUsage:       \"启用调试\",\n\t\t\tEnvVar:      config.EnvVerbose,\n\t\t\tDestination: &logger.IsVerbose,\n\t\t},\n\t}\n\n\t// 进入交互CLI命令行界面\n\tapp.Action = func(c *cli.Context) {\n\t\tif c.NArg() != 0 {\n\t\t\tfmt.Printf(\"未找到命令: %s\\n运行命令 %s help 获取帮助\\n\", c.Args().Get(0), app.Name)\n\t\t\treturn\n\t\t}\n\n\t\tos.Setenv(config.EnvVerbose, c.String(\"verbose\"))\n\t\tisCli = true\n\t\tglobal.IsAppInCliMode = true\n\t\tlogger.Verbosef(\"提示: 你已经开启VERBOSE调试日志\\n\\n\")\n\n\t\tvar (\n\t\t\tline = cmdliner.NewLiner()\n\t\t\terr  error\n\t\t)\n\n\t\tline.History, err = cmdliner.NewLineHistory(historyFilePath)\n\t\tif err != nil {\n\t\t\tfmt.Printf(\"警告: 读取历史命令文件错误, %s\\n\", err)\n\t\t}\n\n\t\tline.ReadHistory()\n\t\tdefer func() {\n\t\t\tline.DoWriteHistory()\n\t\t\tline.Close()\n\t\t}()\n\n\t\t// tab 自动补全命令\n\t\tline.State.SetCompleter(func(line string) (s []string) {\n\t\t\tvar (\n\t\t\t\tlineArgs                   = args.Parse(line)\n\t\t\t\tnumArgs                    = len(lineArgs)\n\t\t\t\tacceptCompleteFileCommands = []string{\n\t\t\t\t\t\"cd\", \"cp\", \"xcp\", \"download\", \"ls\", \"mkdir\", \"mv\", \"pwd\", \"rename\", \"rm\", \"share\", \"save\", \"upload\", \"login\", \"loglist\", \"logout\",\n\t\t\t\t\t\"clear\", \"quit\", \"exit\", \"quota\", \"who\", \"sign\", \"update\", \"who\", \"su\", \"config\",\n\t\t\t\t\t\"drive\", \"export\", \"import\", \"sync\", \"tree\",\n\t\t\t\t}\n\t\t\t\tclosed = strings.LastIndex(line, \" \") == len(line)-1\n\t\t\t)\n\n\t\t\tfor _, cmd := range app.Commands {\n\t\t\t\tfor _, name := range cmd.Names() {\n\t\t\t\t\tif !strings.HasPrefix(name, line) {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\n\t\t\t\t\ts = append(s, name+\" \")\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tswitch numArgs {\n\t\t\tcase 0:\n\t\t\t\treturn\n\t\t\tcase 1:\n\t\t\t\tif !closed {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthisCmd := app.Command(lineArgs[0])\n\t\t\tif thisCmd == nil {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif !cmdutil.ContainsString(acceptCompleteFileCommands, thisCmd.FullName()) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tvar (\n\t\t\t\tactiveUser  = config.Config.ActiveUser()\n\t\t\t\truneFunc    = unicode.IsSpace\n\t\t\t\tcmdRuneFunc = func(r rune) bool {\n\t\t\t\t\tswitch r {\n\t\t\t\t\tcase '\\'', '\"':\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t\treturn unicode.IsSpace(r)\n\t\t\t\t}\n\t\t\t\ttargetPath string\n\t\t\t)\n\n\t\t\tif activeUser == nil {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif !closed {\n\t\t\t\ttargetPath = lineArgs[numArgs-1]\n\t\t\t\tescaper.EscapeStringsByRuneFunc(lineArgs[:numArgs-1], runeFunc) // 转义\n\t\t\t} else {\n\t\t\t\tescaper.EscapeStringsByRuneFunc(lineArgs, runeFunc)\n\t\t\t}\n\n\t\t\tswitch {\n\t\t\tcase targetPath == \".\" || strings.HasSuffix(targetPath, \"/.\"):\n\t\t\t\ts = append(s, line+\"/\")\n\t\t\t\treturn\n\t\t\tcase targetPath == \"..\" || strings.HasSuffix(targetPath, \"/..\"):\n\t\t\t\ts = append(s, line+\"/\")\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tvar (\n\t\t\t\ttargetDir string\n\t\t\t\tisAbs     = path.IsAbs(targetPath)\n\t\t\t\tisDir     = strings.LastIndex(targetPath, \"/\") == len(targetPath)-1\n\t\t\t)\n\n\t\t\tif isAbs {\n\t\t\t\ttargetDir = path.Dir(targetPath)\n\t\t\t} else {\n\t\t\t\twd := \"/\"\n\t\t\t\tif activeUser.IsFileDriveActive() {\n\t\t\t\t\twd = activeUser.Workdir\n\t\t\t\t} else if activeUser.IsResourceDriveActive() {\n\t\t\t\t\twd = activeUser.ResourceWorkdir\n\t\t\t\t} else if activeUser.IsAlbumDriveActive() {\n\t\t\t\t\twd = activeUser.AlbumWorkdir\n\t\t\t\t}\n\t\t\t\ttargetDir = path.Join(wd, targetPath)\n\t\t\t\tif !isDir {\n\t\t\t\t\ttargetDir = path.Dir(targetDir)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// tab键补全路径\n\t\t\tfiles, err := activeUser.CacheFilesDirectoriesList(targetDir)\n\t\t\tif err != nil {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tfor _, file := range files {\n\t\t\t\tif file == nil {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tvar (\n\t\t\t\t\tappendLine string\n\t\t\t\t)\n\n\t\t\t\t// 已经有的情况\n\t\t\t\tif !closed {\n\t\t\t\t\tif !strings.HasPrefix(file.Path, path.Clean(path.Join(targetDir, path.Base(targetPath)))) {\n\t\t\t\t\t\tif path.Base(targetDir) == path.Base(targetPath) {\n\t\t\t\t\t\t\tappendLine = strings.Join(append(lineArgs[:numArgs-1], escaper.EscapeByRuneFunc(path.Join(targetPath, file.FileName), cmdRuneFunc)), \" \")\n\t\t\t\t\t\t\tgoto handle\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tappendLine = strings.Join(append(lineArgs[:numArgs-1], escaper.EscapeByRuneFunc(path.Clean(path.Join(path.Dir(targetPath), file.FileName)), cmdRuneFunc)), \" \")\n\t\t\t\t\tgoto handle\n\t\t\t\t}\n\t\t\t\t// 没有的情况\n\t\t\t\tappendLine = strings.Join(append(lineArgs, escaper.EscapeByRuneFunc(file.FileName, cmdRuneFunc)), \" \")\n\t\t\t\tgoto handle\n\n\t\t\thandle:\n\t\t\t\tif file.IsFolder() {\n\t\t\t\t\ts = append(s, appendLine+\"/\")\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\ts = append(s, appendLine+\" \")\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\treturn\n\t\t})\n\n\t\tfmt.Printf(\"提示: 方向键上下可切换历史命令.\\n\")\n\t\tfmt.Printf(\"提示: Ctrl + A / E 跳转命令 首 / 尾.\\n\")\n\t\tfmt.Printf(\"提示: 输入 help 获取帮助.\\n\")\n\n\t\t// check update\n\t\tcommand.ReloadConfigFunc(c)\n\t\tif config.Config.UpdateCheckInfo.LatestVer != \"\" {\n\t\t\tif utils.ParseVersionNum(config.Config.UpdateCheckInfo.LatestVer) > utils.ParseVersionNum(global.AppVersion) {\n\t\t\t\tfmt.Printf(\"\\n当前的软件版本为：%s， 现在有新版本 %s 可供更新，强烈推荐进行更新！（可以输入 update 命令进行更新）\\n\\n\",\n\t\t\t\t\tglobal.AppVersion, config.Config.UpdateCheckInfo.LatestVer)\n\t\t\t}\n\t\t}\n\t\tgo func() {\n\t\t\tlatestCheckTime := config.Config.UpdateCheckInfo.CheckTime\n\t\t\tnowTime := time.Now().Unix()\n\t\t\tsecsOf12Hour := int64(43200)\n\t\t\tif (nowTime - latestCheckTime) > secsOf12Hour {\n\t\t\t\treleaseInfo := panupdate.GetLatestReleaseInfo(false)\n\t\t\t\tif releaseInfo == nil {\n\t\t\t\t\tlogger.Verboseln(\"获取版本信息失败!\")\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tconfig.Config.UpdateCheckInfo.LatestVer = releaseInfo.TagName\n\t\t\t\tconfig.Config.UpdateCheckInfo.CheckTime = nowTime\n\n\t\t\t\t// save\n\t\t\t\tcommand.SaveConfigFunc(c)\n\t\t\t}\n\t\t}()\n\n\t\tfor {\n\t\t\tvar (\n\t\t\t\tprompt     string\n\t\t\t\tactiveUser = config.Config.ActiveUser()\n\t\t\t)\n\n\t\t\tif activeUser == nil {\n\t\t\t\tactiveUser = command.TryLogin()\n\t\t\t}\n\n\t\t\tif activeUser != nil && activeUser.Nickname != \"\" {\n\t\t\t\t// 格式: aliyunpan:<工作目录> <UserName>$\n\t\t\t\t// 工作目录太长时, 会自动缩略\n\t\t\t\twd := \"/\"\n\t\t\t\tif activeUser.IsFileDriveActive() {\n\t\t\t\t\twd = activeUser.Workdir\n\t\t\t\t\tprompt = app.Name + \":\" + converter.ShortDisplay(path.Base(wd), NameShortDisplayNum) + \" \" + activeUser.Nickname + \"(备份盘)$ \"\n\t\t\t\t} else if activeUser.IsResourceDriveActive() {\n\t\t\t\t\twd = activeUser.ResourceWorkdir\n\t\t\t\t\tprompt = app.Name + \":\" + converter.ShortDisplay(path.Base(wd), NameShortDisplayNum) + \" \" + activeUser.Nickname + \"(资源库)$ \"\n\t\t\t\t} else if activeUser.IsAlbumDriveActive() {\n\t\t\t\t\twd = activeUser.AlbumWorkdir\n\t\t\t\t\tprompt = app.Name + \":\" + converter.ShortDisplay(path.Base(wd), NameShortDisplayNum) + \" \" + activeUser.Nickname + \"(相册)$ \"\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// aliyunpan >\n\t\t\t\tprompt = app.Name + \" > \"\n\t\t\t}\n\n\t\t\tcommandLine, err := line.State.Prompt(prompt)\n\t\t\tswitch err {\n\t\t\tcase liner.ErrPromptAborted:\n\t\t\t\treturn\n\t\t\tcase nil:\n\t\t\t\t// continue\n\t\t\tdefault:\n\t\t\t\tfmt.Println(err)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tline.State.AppendHistory(commandLine)\n\n\t\t\tcmdArgs := args.Parse(commandLine)\n\t\t\tif len(cmdArgs) == 0 {\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\ts := []string{os.Args[0]}\n\t\t\ts = append(s, cmdArgs...)\n\n\t\t\t// 恢复原始终端状态\n\t\t\t// 防止运行命令时程序被结束, 终端出现异常\n\t\t\tline.Pause()\n\t\t\tc.App.Run(s)\n\t\t\tline.Resume()\n\t\t}\n\t}\n\n\t// 命令配置和对应的处理func\n\tapp.Commands = []cli.Command{\n\t\t// 登录账号 login\n\t\tcommand.CmdLogin(),\n\n\t\t// 退出登录帐号 logout\n\t\tcommand.CmdLogout(),\n\n\t\t// 列出帐号列表 loglist\n\t\tcommand.CmdLoglist(),\n\n\t\t// 切换网盘 drive\n\t\tcommand.CmdDrive(),\n\n\t\t// 切换阿里账号 su\n\t\tcommand.CmdSu(),\n\n\t\t// 获取当前帐号 who\n\t\tcommand.CmdWho(),\n\n\t\t// 获取当前帐号空间配额 quota\n\t\tcommand.CmdQuota(),\n\n\t\t// 切换工作目录 cd\n\t\tcommand.CmdCd(),\n\n\t\t// 输出工作目录 pwd\n\t\tcommand.CmdPwd(),\n\n\t\t// 列出目录 ls\n\t\tcommand.CmdLs(),\n\n\t\t// 显示树形目录 tree\n\t\tcommand.CmdTree(),\n\n\t\t// 创建目录 mkdir\n\t\tcommand.CmdMkdir(),\n\n\t\t// 删除文件/目录 rm\n\t\tcommand.CmdRm(),\n\n\t\t// 复制文件/目录 cp\n\t\tcommand.CmdCp(),\n\n\t\t// 移动文件/目录 mv\n\t\tcommand.CmdMv(),\n\n\t\t// 重命名文件 rename\n\t\tcommand.CmdRename(),\n\n\t\t// 同步备份 sync\n\t\tcommand.CmdSync(),\n\n\t\t// 上传文件/目录 upload\n\t\tcommand.CmdUpload(),\n\n\t\t// 下载文件/目录 download\n\t\tcommand.CmdDownload(),\n\n\t\t// 显示和修改程序配置项 config\n\t\tcommand.CmdConfig(),\n\n\t\t// 工具箱 tool\n\t\tcommand.CmdTool(),\n\n\t\t// 分享文件/目录 share\n\t\tcommand.CmdShare(),\n\n\t\t// 显示命令历史\n\t\t{\n\t\t\tName:      \"history\",\n\t\t\tAliases:   []string{},\n\t\t\tUsage:     \"显示命令历史\",\n\t\t\tUsageText: app.Name + \" history\",\n\t\t\tDescription: `显示命令历史\n\n\t\t示例:\n\t\t1. 显示最近命令历史\n\t\taliyunpan history\n\n\t\t2. 显示最近10条命令历史\n\t\taliyunpan history -n 10\n\n\t\t3. 显示全部命令历史\n\t\taliyunpan history -n 0\n`,\n\t\t\tCategory: \"其他\",\n\t\t\tAction: func(c *cli.Context) error {\n\t\t\t\tlineCount := 20\n\t\t\t\tif c.IsSet(\"n\") {\n\t\t\t\t\tlineCount = c.Int(\"n\")\n\t\t\t\t}\n\t\t\t\tprintTable := func(lines []string) {\n\t\t\t\t\ttb := cmdtable.NewTable(os.Stdout)\n\t\t\t\t\ttb.SetHeader([]string{\"序号\", \"命令\"})\n\t\t\t\t\ttb.SetHeaderAlignment(tablewriter.ALIGN_LEFT)\n\t\t\t\t\ttb.SetColumnAlignment([]int{tablewriter.ALIGN_LEFT, tablewriter.ALIGN_LEFT})\n\t\t\t\t\tidx := 1\n\t\t\t\t\tfor _, line := range lines {\n\t\t\t\t\t\tif line == \"\" {\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttb.Append([]string{strconv.Itoa(idx + 1), line})\n\t\t\t\t\t\tidx++\n\t\t\t\t\t}\n\t\t\t\t\ttb.Render()\n\t\t\t\t}\n\t\t\t\tif contents, err := ioutil.ReadFile(historyFilePath); err == nil {\n\t\t\t\t\tresult := strings.Split(string(contents), \"\\n\")\n\t\t\t\t\tif lineCount == 0 {\n\t\t\t\t\t\tprintTable(result)\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutputLine := make([]string, 0)\n\t\t\t\t\t\tfor idx := len(result) - 1; idx >= 0; idx-- {\n\t\t\t\t\t\t\tline := result[idx]\n\t\t\t\t\t\t\tif line != \"\" {\n\t\t\t\t\t\t\t\toutputLine = append(outputLine, line)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif len(outputLine) >= lineCount {\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlines := make([]string, 0)\n\t\t\t\t\t\tfor idx := len(outputLine) - 1; idx >= 0; idx-- {\n\t\t\t\t\t\t\tlines = append(lines, outputLine[idx])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprintTable(lines)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn nil\n\t\t\t},\n\t\t\tFlags: []cli.Flag{\n\t\t\t\tcli.IntFlag{\n\t\t\t\t\tName:  \"n\",\n\t\t\t\t\tUsage: \"显示最近历史的行数。0-代表全部，默认为20\",\n\t\t\t\t\tValue: 20,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 清空控制台 clear\n\t\t{\n\t\t\tName:        \"clear\",\n\t\t\tAliases:     []string{\"cls\"},\n\t\t\tUsage:       \"清空控制台\",\n\t\t\tUsageText:   app.Name + \" clear\",\n\t\t\tDescription: \"清空控制台屏幕\",\n\t\t\tCategory:    \"其他\",\n\t\t\tAction: func(c *cli.Context) error {\n\t\t\t\tcmdliner.ClearScreen()\n\t\t\t\treturn nil\n\t\t\t},\n\t\t},\n\n\t\t// 检测程序更新 update\n\t\t{\n\t\t\tName:     \"update\",\n\t\t\tUsage:    \"检测程序更新\",\n\t\t\tCategory: \"其他\",\n\t\t\tAction: func(c *cli.Context) error {\n\t\t\t\tif c.IsSet(\"y\") {\n\t\t\t\t\tif !c.Bool(\"y\") {\n\t\t\t\t\t\treturn nil\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpanupdate.CheckUpdate(app.Version, c.Bool(\"y\"))\n\t\t\t\treturn nil\n\t\t\t},\n\t\t\tFlags: []cli.Flag{\n\t\t\t\tcli.BoolFlag{\n\t\t\t\t\tName:  \"y\",\n\t\t\t\t\tUsage: \"确认更新\",\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 退出程序 quit\n\t\t{\n\t\t\tName:        \"quit\",\n\t\t\tAliases:     []string{\"exit\"},\n\t\t\tUsage:       \"退出程序\",\n\t\t\tDescription: \"退出程序\",\n\t\t\tCategory:    \"其他\",\n\t\t\tAction: func(c *cli.Context) error {\n\t\t\t\treturn cli.NewExitError(\"\", 0)\n\t\t\t},\n\t\t\tHidden:   true,\n\t\t\tHideHelp: true,\n\t\t},\n\n\t\t// 执行系统命令\n\t\t{\n\t\t\tName:     \"run\",\n\t\t\tUsage:    \"执行系统命令\",\n\t\t\tCategory: \"其他\",\n\t\t\tAction: func(c *cli.Context) error {\n\t\t\t\tif c.NArg() == 0 {\n\t\t\t\t\tcli.ShowCommandHelp(c, c.Command.Name)\n\t\t\t\t\treturn nil\n\t\t\t\t}\n\n\t\t\t\tcmd := exec.Command(c.Args().First(), c.Args().Tail()...)\n\t\t\t\tcmd.Stdout = os.Stdout\n\t\t\t\tcmd.Stdin = os.Stdin\n\t\t\t\tcmd.Stderr = os.Stderr\n\t\t\t\terr := cmd.Run()\n\t\t\t\tif err != nil {\n\t\t\t\t\tfmt.Println(err)\n\t\t\t\t}\n\t\t\t\treturn nil\n\t\t\t},\n\t\t},\n\n\t\t// 显示程序环境变量\n\t\t{\n\t\t\tName:  \"env\",\n\t\t\tUsage: \"显示程序环境变量\",\n\t\t\tDescription: `\tALIYUNPAN_CONFIG_DIR: 配置文件路径\n\tALIYUNPAN_DOWNLOAD_DIR: 配置下载路径\n\tALIYUNPAN_VERBOSE: 是否启用调试\n\tXDG_CONFIG_HOME: XDG配置主目录\n\tXDG_DOWNLOAD_DIR: XDG配置下载目录\n`,\n\t\t\tCategory: \"其他\",\n\t\t\tAction: func(c *cli.Context) error {\n\t\t\t\tenvStr := \"%s=%s\\n\"\n\t\t\t\tenvVar, ok := os.LookupEnv(config.EnvVerbose)\n\t\t\t\tif ok {\n\t\t\t\t\tif envVar == \"1\" {\n\t\t\t\t\t\tfmt.Printf(envStr, config.EnvVerbose, \"1\")\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfmt.Printf(envStr, config.EnvVerbose, \"0\")\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfmt.Printf(envStr, config.EnvVerbose, \"0\")\n\t\t\t\t}\n\n\t\t\t\tenvVar, ok = os.LookupEnv(config.EnvConfigDir)\n\t\t\t\tif ok {\n\t\t\t\t\tfmt.Printf(envStr, config.EnvConfigDir, envVar)\n\t\t\t\t} else {\n\t\t\t\t\tfmt.Printf(envStr, config.EnvConfigDir, config.GetConfigDir())\n\t\t\t\t}\n\n\t\t\t\tenvVar, ok = os.LookupEnv(config.EnvDownloadDir)\n\t\t\t\tif ok {\n\t\t\t\t\tfmt.Printf(envStr, config.EnvDownloadDir, envVar)\n\t\t\t\t} else {\n\t\t\t\t\tfmt.Printf(envStr, config.EnvDownloadDir, config.GetDefaultDownloadDir())\n\t\t\t\t}\n\n\t\t\t\tenvVar, ok = os.LookupEnv(\"XDG_CONFIG_HOME\")\n\t\t\t\tif ok {\n\t\t\t\t\tfmt.Printf(envStr, \"XDG_CONFIG_HOME\", envVar)\n\t\t\t\t} else {\n\t\t\t\t\tfmt.Printf(envStr, \"XDG_CONFIG_HOME\", \"\")\n\t\t\t\t}\n\t\t\t\tenvVar, ok = os.LookupEnv(\"XDG_DOWNLOAD_DIR\")\n\t\t\t\tif ok {\n\t\t\t\t\tfmt.Printf(envStr, \"XDG_DOWNLOAD_DIR\", envVar)\n\t\t\t\t} else {\n\t\t\t\t\tfmt.Printf(envStr, \"XDG_DOWNLOAD_DIR\", \"\")\n\t\t\t\t}\n\t\t\t\treturn nil\n\t\t\t},\n\t\t},\n\n\t\t// 调试用 debug\n\t\t//{\n\t\t//\tName:        \"debug\",\n\t\t//\tAliases:     []string{\"dg\"},\n\t\t//\tUsage:       \"开发调试用\",\n\t\t//\tDescription: \"\",\n\t\t//\tCategory:    \"debug\",\n\t\t//\tBefore:      command.ReloadConfigFunc,\n\t\t//\tAction: func(c *cli.Context) error {\n\t\t//\t\tos.Setenv(config.EnvVerbose, \"1\")\n\t\t//\t\tlogger.IsVerbose = true\n\t\t//\t\tfmt.Println(\"显示调试日志\", logger.IsVerbose)\n\t\t//\t\treturn nil\n\t\t//\t},\n\t\t//\tFlags: []cli.Flag{\n\t\t//\t\tcli.StringFlag{\n\t\t//\t\t\tName:  \"param\",\n\t\t//\t\t\tUsage: \"参数\",\n\t\t//\t\t},\n\t\t//\t\tcli.BoolFlag{\n\t\t//\t\t\tName:        \"verbose\",\n\t\t//\t\t\tDestination: &logger.IsVerbose,\n\t\t//\t\t\tEnvVar:      config.EnvVerbose,\n\t\t//\t\t\tUsage:       \"显示调试信息\",\n\t\t//\t\t},\n\t\t//\t},\n\t\t//},\n\t}\n\n\t// 隐藏不支持的命令\n\tif global.IsSupportNoneOpenApiCommands {\n\t\thiddenCommands := []cli.Command{\n\t\t\t// 备份盘和资源库之间拷贝文件 xcp\n\t\t\tcommand.CmdXcp(),\n\n\t\t\t// 分享文件/目录 sharew，web端接口的分享功能\n\t\t\tcommand.CmdShareWeb(),\n\n\t\t\t// 保存分享文件/目录 save\n\t\t\tcommand.CmdSave(),\n\n\t\t\t// 回收站\n\t\t\tcommand.CmdRecycle(),\n\n\t\t\t// 相簿\n\t\t\t//command.CmdAlbum(),\n\t\t}\n\t\tapp.Commands = append(app.Commands, hiddenCommands...)\n\t}\n\tsort.Sort(cli.FlagsByName(app.Flags))\n\tsort.Sort(cli.CommandsByName(app.Commands))\n\tapp.Run(os.Args)\n}\n"
        },
        {
          "name": "resource_windows_386.syso",
          "type": "blob",
          "size": 265.7294921875,
          "content": null
        },
        {
          "name": "resource_windows_amd64.syso",
          "type": "blob",
          "size": 265.7294921875,
          "content": null
        },
        {
          "name": "versioninfo.json",
          "type": "blob",
          "size": 1.068359375,
          "content": "{\n    \"FixedFileInfo\": {\n        \"FileVersion\": {\n            \"Major\": 0,\n            \"Minor\": 3,\n            \"Patch\": 5,\n            \"Build\": 0\n        },\n        \"ProductVersion\": {\n            \"Major\": 0,\n            \"Minor\": 3,\n            \"Patch\": 5,\n            \"Build\": 0\n        },\n        \"FileFlagsMask\": \"3f\",\n        \"FileFlags \": \"00\",\n        \"FileOS\": \"040004\",\n        \"FileType\": \"01\",\n        \"FileSubType\": \"00\"\n    },\n    \"StringFileInfo\": {\n        \"Comments\": \"\",\n        \"CompanyName\": \"tickstep\",\n        \"FileDescription\": \"阿里云盘客户端\",\n        \"FileVersion\": \"v0.3.5\",\n        \"InternalName\": \"\",\n        \"LegalCopyright\": \"© 2021-2025 tickstep.\",\n        \"LegalTrademarks\": \"\",\n        \"OriginalFilename\": \"\",\n        \"PrivateBuild\": \"\",\n        \"ProductName\": \"aliyunpan\",\n        \"ProductVersion\": \"v0.3.5\",\n        \"SpecialBuild\": \"\"\n    },\n    \"VarFileInfo\": {\n        \"Translation\": {\n            \"LangID\": \"0409\",\n            \"CharsetID\": \"04B0\"\n        }\n    },\n    \"IconPath\": \"assets/aliyunpan.ico\",\n    \"ManifestPath\": \"aliyunpan.exe.manifest\"\n}"
        },
        {
          "name": "win_build.bat",
          "type": "blob",
          "size": 1.4541015625,
          "content": "@echo off\r\n\r\nREM ============= build script for windows ================\r\nREM how to use\r\nREM win_build.bat v0.0.1\r\nREM =======================================================\r\n\r\nREM ============= variable definitions ================\r\nset currentDir=%CD%\r\nset output=out\r\nset name=aliyunpan\r\nset version=%1\r\n\r\nREM ============= build action ================\r\ncall :build_task %name%-%version%-windows-x86 windows 386\r\ncall :build_task %name%-%version%-windows-x64 windows amd64\r\ncall :build_task %name%-%version%-linux-386 linux 386\r\ncall :build_task %name%-%version%-linux-amd64 linux amd64\r\ncall :build_task %name%-%version%-darwin-macos-amd64 darwin amd64\r\n\r\ngoto:EOF\r\n\r\nREM ============= build function ================\r\n:build_task\r\nsetlocal\r\n\r\nset targetName=%1\r\nset GOOS=%2\r\nset GOARCH=%3\r\nset goarm=%4\r\nset GO386=sse2\r\nset CGO_ENABLED=0\r\nset GOARM=%goarm%\r\n\r\necho \"Building %targetName% ...\"\r\nif %GOOS% == windows (\r\n  goversioninfo -o=resource_windows_386.syso\r\n  goversioninfo -64 -o=resource_windows_amd64.syso\r\n  go build -ldflags \"-linkmode internal -X main.Version=%version% -s -w\" -o \"%output%/%1/%name%.exe\"\r\n) ^\r\nelse (\r\n  go build -ldflags \"-X main.Version=%version% -s -w\" -o \"%output%/%1/%name%\"\r\n)\r\n\r\ncopy README.md %output%\\%1\r\ncopy docs\\manual.md %output%\\%1\r\n\r\nmkdir %output%\\%1\\plugin\r\nxcopy /e assets\\plugin %output%\\%1\\plugin\r\n\r\nmkdir %output%\\%1\\sync_drive\r\nxcopy /e assets\\sync_drive %output%\\%1\\sync_drive\r\n\r\nxcopy /e assets\\scripts %output%\\%1\r\nendlocal\r\n\r\n"
        }
      ]
    }
  ]
}