{
  "metadata": {
    "timestamp": 1736566539540,
    "page": 83,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjkw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "AliyunContainerService/pouch",
      "stars": 4634,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".circleci",
          "type": "tree",
          "content": null
        },
        {
          "name": ".codecov.yml",
          "type": "blob",
          "size": 0.2998046875,
          "content": "comment:\n  layout: \"header, reach, diff, flags, files\"\n  behavior: default\n  require_changes: false  # if true: only post the comment if coverage changes\n  require_base: no        # [yes :: must have a base report to post]\n  require_head: no       # [yes :: must have a head report to post]\n  branches: null"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.2041015625,
          "content": "# Some user would build a binary for pouch\npouchd\npouch\n*.patch\nvolume_build.go\nhook_plugins_build.go\ncoverage.txt\n.*.swp\n.*.swo\n.editorconfig\n.bashrc\n.idea\n.DS_Store\nbin/\ncoverage/\ntest/testdata/cp/*\n.vscode\n"
        },
        {
          "name": ".gometalinter.json",
          "type": "blob",
          "size": 0.3623046875,
          "content": "{\n  \"Enable\": [\n    \"gofmt\",\n    \"goimports\",\n    \"golint\",\n    \"ineffassign\",\n    \"misspell\",\n    \"vet\"\n  ],\n  \"Deadline\": \"2m\",\n  \"Sort\": [\"linter\", \"severity\", \"path\", \"line\"],\n  \"Exclude\": [\n    \".*\\\\.pb\\\\.go\",\n\t\"pkg/jsonstream/image_progress\\\\.go:.*::error: unrecognized printf verb 'r'\"\n  ],\n  \"EnableGC\": true,\n  \"WarnUnmatchedDirective\": true,\n  \"Vendor\": true\n}\n"
        },
        {
          "name": ".travis.yml",
          "type": "blob",
          "size": 1.087890625,
          "content": "dist: xenial\nsudo: required\n\nlanguage: go\ngo:\n  - 1.12.6\n\ngo_import_path: github.com/alibaba/pouch\n\nbefore_install:\n  |\n    echo $TRAVIS_COMMIT_RANGE\n    git diff --name-only $TRAVIS_COMMIT_RANGE | grep -qvE '(\\.md$)' || {\n      echo \"travis does not run for document-only changed\"\n      exit\n    }\n\nnotifications:\n  webhooks:\n    urls:\n      - http://47.96.190.121:6789/ci_notifications\n    on_failure: always\n    on_error: always\n\njobs:\n  include:\n    - stage: test\n      name: \"Unit test\"\n      script: ./travis_ci.sh unittest\n\n    - stage: test\n      name: \"CRIv1alpha2 test\"\n      script: ./travis_ci.sh criv1alpha2test\n\n    - stage: test\n      name: \"Node e2e test\"\n      script: ./travis_ci.sh nodee2etest\n\n    - stage: test\n      name: \"Integration test 0\"\n      script: ./travis_ci.sh integrationtest 4 0\n    - stage: test\n      name: \"Integration test 1\"\n      script: ./travis_ci.sh integrationtest 4 1\n    - stage: test\n      name: \"Integration test 2\"\n      script: ./travis_ci.sh integrationtest 4 2\n    - stage: test\n      name: \"Integration test 3\"\n      script: ./travis_ci.sh integrationtest 4 3\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 76.3564453125,
          "content": "# CHANGELOG\n\n## 1.0.0 (2018-08-31)\n\n__IMPORTANT__: The PouchContainer is general availability right now. Thanks for all the contributors!\n\n### __Pouch Daemon__\n\n* bugfix: cli should not split args by comma for env/labels [\\#2171](https://github.com/alibaba/pouch/pull/2171) ([fuweid](https://github.com/fuweid))\n* refactor: delete update specific code [\\#2165](https://github.com/alibaba/pouch/pull/2165) ([HusterWan](https://github.com/HusterWan))\n* config: remove check unknown flag in config file [\\#2161](https://github.com/alibaba/pouch/pull/2161) ([Ace-Tang](https://github.com/Ace-Tang))\n* enhance: clean filepath in mountpoint [\\#2157](https://github.com/alibaba/pouch/pull/2157) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: missing merge some config from image [\\#2156](https://github.com/alibaba/pouch/pull/2156) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: set device limit by the mountpoint [\\#2154](https://github.com/alibaba/pouch/pull/2154) ([rudyfly](https://github.com/rudyfly))\n* bugfix: avoid data race in set exec exit status [\\#2152](https://github.com/alibaba/pouch/pull/2152) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: add cgroupfs in Info API [\\#2148](https://github.com/alibaba/pouch/pull/2148) ([allencloud](https://github.com/allencloud))\n\n### __Kubernetes__\n\n* feature: extend cri apis for get envs [\\#2163](https://github.com/alibaba/pouch/pull/2163) ([Starnop](https://github.com/Starnop))\n* bugfix: make the output of some list operations optional [\\#2158](https://github.com/alibaba/pouch/pull/2158) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* bugfix: handle the error returned by SandboxStore.Put [\\#2151](https://github.com/alibaba/pouch/pull/2151) ([Starnop](https://github.com/Starnop))\n* style: format cri logs [\\#2147](https://github.com/alibaba/pouch/pull/2147) ([Starnop](https://github.com/Starnop))\n\n### __Documentation__\n\n* docs: add CRI enhancement into document [\\#2159](https://github.com/alibaba/pouch/pull/2159) ([Starnop](https://github.com/Starnop))\n\n### __Testing__\n\n* test: remove the criu install from package dependency [\\#2186](https://github.com/alibaba/pouch/pull/2186) ([fuweid](https://github.com/fuweid))\n* package: update runc version [\\#2183](https://github.com/alibaba/pouch/pull/2183) ([Ace-Tang](https://github.com/Ace-Tang))\n* test: install criu in ci test [\\#2175](https://github.com/alibaba/pouch/pull/2175) ([Ace-Tang](https://github.com/Ace-Tang))\n* test: fix TestNetworkDefault failure on Ubuntu [\\#2170](https://github.com/alibaba/pouch/pull/2170) ([chuanchang](https://github.com/chuanchang))\n* add timeout for curl to prevent from hanging [\\#2169](https://github.com/alibaba/pouch/pull/2169) ([sunyuan3](https://github.com/sunyuan3))\n\n### __Contrib__\n\n* Add vagrant support for pouch [\\#2168](https://github.com/alibaba/pouch/pull/2168) ([manlge](https://github.com/manlge))\n\n### __New Contributors__\n\nHere is the list of new contributors:\n\n* [manlge](https://github.com/manlge)\n\n## 1.0.0-rc2 (2018-08-23)\n\n__IMPORTANT__: In PouchContainer 1.0.0-rc2 makes runtime stable and introduces:\n\n* Image Manager supports history functionality\n* Syslog Driver supports lazy connection\n* Support nvidia-container 2.0 to enable GPU access\n* CRI supports exec resize\n\n### __Pouch Daemon__\n\n* bugfix: fix runtime script may be covered [\\#2141](https://github.com/alibaba/pouch/pull/2141) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: fix failed to run a container with specifying a non-exist workdir [\\#2127](https://github.com/alibaba/pouch/pull/2127) ([HusterWan](https://github.com/HusterWan))\n* \\[bugfix\\] we should parse env params when create container [\\#2121](https://github.com/alibaba/pouch/pull/2121) ([HusterWan](https://github.com/HusterWan))\n* bugfix: can't use sudo command [\\#2120](https://github.com/alibaba/pouch/pull/2120) ([rudyfly](https://github.com/rudyfly))\n* bugfix: fix that list volumes sets hostname as default label filter [\\#2119](https://github.com/alibaba/pouch/pull/2119) ([xiaoxubeii](https://github.com/xiaoxubeii))\n* feature: add stats api in daemon side [\\#2112](https://github.com/alibaba/pouch/pull/2112) ([allencloud](https://github.com/allencloud))\n* bugfix: extend reference separator [\\#2117](https://github.com/alibaba/pouch/pull/2117) ([fuweid](https://github.com/fuweid))\n* refactor: support specify Namespace by user [\\#2106](https://github.com/alibaba/pouch/pull/2106) ([HusterWan](https://github.com/HusterWan))\n* feature: add exec resize router [\\#2105](https://github.com/alibaba/pouch/pull/2105) ([HusterWan](https://github.com/HusterWan))\n* bugfix: fix meta store return all item when empty prefix [\\#2104](https://github.com/alibaba/pouch/pull/2104) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: add disk quota for container metadata directory [\\#2102](https://github.com/alibaba/pouch/pull/2102) ([rudyfly](https://github.com/rudyfly))\n* bugfix: skip empty container dirs [\\#2098](https://github.com/alibaba/pouch/pull/2098) ([HusterWan](https://github.com/HusterWan))\n* refactor: reduce repeat validate code [\\#2093](https://github.com/alibaba/pouch/pull/2093) ([Ace-Tang](https://github.com/Ace-Tang))\n* cgroup: enable memory swappiness equal to -1 [\\#2092](https://github.com/alibaba/pouch/pull/2092) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: populate volume error [\\#2087](https://github.com/alibaba/pouch/pull/2087) ([shaloulcy](https://github.com/shaloulcy))\n* bugfix: fix that ListVolumes did not implement filter by labels [\\#2083](https://github.com/alibaba/pouch/pull/2083) ([xiaoxubeii](https://github.com/xiaoxubeii))\n* feature: support runtime args [\\#2085](https://github.com/alibaba/pouch/pull/2085) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: remove duplicate TypeUrl initialize [\\#2082](https://github.com/alibaba/pouch/pull/2082) ([HusterWan](https://github.com/HusterWan))\n* bugfix: fix that ContainerManager.Create wouldn't remove snapshot when failed [\\#2080](https://github.com/alibaba/pouch/pull/2080) ([xiaoxubeii](https://github.com/xiaoxubeii))\n* bugfix: do umount rootfs when failed to operate volumes [\\#2078](https://github.com/alibaba/pouch/pull/2078) ([rudyfly](https://github.com/rudyfly))\n* bugfix: remove blobs and snapshot when remove image [\\#2075](https://github.com/alibaba/pouch/pull/2075) ([fuweid](https://github.com/fuweid))\n* bugfix: cannot remove image reference by specified reference when other references are used [\\#2074](https://github.com/alibaba/pouch/pull/2074) ([xiaoxubeii](https://github.com/xiaoxubeii))\n* api: checkpoint api optimization [\\#2072](https://github.com/alibaba/pouch/pull/2072) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: events service logic code of all links [\\#2071](https://github.com/alibaba/pouch/pull/2071) ([HusterWan](https://github.com/HusterWan))\n* feature: lazy connect to syslog server [\\#2068](https://github.com/alibaba/pouch/pull/2068) ([fuweid](https://github.com/fuweid))\n* feature: add pouch history functionality [\\#2066](https://github.com/alibaba/pouch/pull/2066) ([xiechengsheng](https://github.com/xiechengsheng))\n* refactor: move functions from pre-start hook to pouchd [\\#2064](https://github.com/alibaba/pouch/pull/2064) ([rudyfly](https://github.com/rudyfly))\n* feature: support event service [\\#2053](https://github.com/alibaba/pouch/pull/2053) ([HusterWan](https://github.com/HusterWan))\n* bugfix: cpu params json name compatibility with moby [\\#2041](https://github.com/alibaba/pouch/pull/2041) ([HusterWan](https://github.com/HusterWan))\n* bugfix: failed to start container when /etc/mtab is symbol link [\\#2035](https://github.com/alibaba/pouch/pull/2035) ([rudyfly](https://github.com/rudyfly))\n* bugfix: convert container err into pouchd manager error [\\#2034](https://github.com/alibaba/pouch/pull/2034) ([allencloud](https://github.com/allencloud))\n* feature: support nvidia-container 2.0 to enable GPU access [\\#2029](https://github.com/alibaba/pouch/pull/2029) ([CodeJuan](https://github.com/CodeJuan))\n* bugfix: fix container can't ping outside and resolve domain names [\\#2025](https://github.com/alibaba/pouch/pull/2025) ([rudyfly](https://github.com/rudyfly))\n* fix: add more details in the NotFound error [\\#1960](https://github.com/alibaba/pouch/pull/1960) ([allencloud](https://github.com/allencloud))\n* bugfix: add ErrorMessage in jsonstream [\\#1927](https://github.com/alibaba/pouch/pull/1927) ([fuweid](https://github.com/fuweid))\n* bugfix: don't set mount tab when rootfs diskquota is null [\\#1926](https://github.com/alibaba/pouch/pull/1926) ([rudyfly](https://github.com/rudyfly))\n* bugfix: add --name following container name in cmd [\\#1924](https://github.com/alibaba/pouch/pull/1924) ([fuweid](https://github.com/fuweid))\n* bugfix: create fifo is not exist [\\#1766](https://github.com/alibaba/pouch/pull/1766) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: avoid task exit channel exit unexpected [\\#1765](https://github.com/alibaba/pouch/pull/1765) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: pull non-exist image in container create [\\#1764](https://github.com/alibaba/pouch/pull/1764) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: pouch pull should handle space input as an error [\\#1753](https://github.com/alibaba/pouch/pull/1753) ([xiechengsheng](https://github.com/xiechengsheng))\n* feature: populate empty volumes when creating container [\\#1745](https://github.com/alibaba/pouch/pull/1745) ([shaloulcy](https://github.com/shaloulcy))\n* bugfix: modify volume error messages [\\#1744](https://github.com/alibaba/pouch/pull/1744) ([rudyfly](https://github.com/rudyfly))\n* fix: ensure daemon start successfully after update damon offline [\\#1743](https://github.com/alibaba/pouch/pull/1743) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: support checkpoint [\\#1740](https://github.com/alibaba/pouch/pull/1740) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: remove InstanceInfo from container env [\\#1738](https://github.com/alibaba/pouch/pull/1738) ([allencloud](https://github.com/allencloud))\n* refactor: make all quota implementation logic clear [\\#1736](https://github.com/alibaba/pouch/pull/1736) ([allencloud](https://github.com/allencloud))\n* fix: fix swagger generate not consistent [\\#1734](https://github.com/alibaba/pouch/pull/1734) ([Ace-Tang](https://github.com/Ace-Tang))\n\n### __Storage__\n\n* bugfix: can't quota on disk quota [\\#2133](https://github.com/alibaba/pouch/pull/2133) ([rudyfly](https://github.com/rudyfly))\n* bugfix: fail to execute repquota [\\#2123](https://github.com/alibaba/pouch/pull/2123) ([rudyfly](https://github.com/rudyfly))\n* refactor: remove unused code from storage [\\#2079](https://github.com/alibaba/pouch/pull/2079) ([rudyfly](https://github.com/rudyfly))\n* refactor: add more error information [\\#2055](https://github.com/alibaba/pouch/pull/2055) ([rudyfly](https://github.com/rudyfly))\n* bug: fix judgement for SetRootfsDiskQuota [\\#2028](https://github.com/alibaba/pouch/pull/2028) ([Ace-Tang](https://github.com/Ace-Tang))\n* refactor: rm deadcode in storage/volume [\\#2027](https://github.com/alibaba/pouch/pull/2027) ([allencloud](https://github.com/allencloud))\n\n### __Kubernetes__\n\n* bugfix: distinguish NotFound error with others about image [\\#2139](https://github.com/alibaba/pouch/pull/2139) ([Starnop](https://github.com/Starnop))\n* feature: extend cri apis for support quotaID [\\#2138](https://github.com/alibaba/pouch/pull/2138) ([Starnop](https://github.com/Starnop))\n* bugfix: attach hanging of cri container [\\#2130](https://github.com/alibaba/pouch/pull/2130) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* bugfix: return error when remove/stop containers of sandbox failed [\\#2109](https://github.com/alibaba/pouch/pull/2109) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* bugfix: use image reference during ContainerStatus [\\#2096](https://github.com/alibaba/pouch/pull/2096) ([fuweid](https://github.com/fuweid))\n* bugfix: avoid the deadlock when failed to remove invalid sandbox [\\#2073](https://github.com/alibaba/pouch/pull/2073) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* feature: update the version of cri-o/ocicni [\\#2065](https://github.com/alibaba/pouch/pull/2065) ([Starnop](https://github.com/Starnop))\n* feature: support resize the tty of cri exec process [\\#2063](https://github.com/alibaba/pouch/pull/2063) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* bugfix: makeup logpath from sandbox & container mata [\\#2054](https://github.com/alibaba/pouch/pull/2054) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* bugfix: fix stdin hang when `kubectl exec` [\\#2044](https://github.com/alibaba/pouch/pull/2044) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* bugfix: data race in pkg cri/stream [\\#1925](https://github.com/alibaba/pouch/pull/1925) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* feature: add CriEnabled field in api and show this in cli [\\#1918](https://github.com/alibaba/pouch/pull/1918) ([allencloud](https://github.com/allencloud))\n* feature: complete the function of runtime status [\\#1898](https://github.com/alibaba/pouch/pull/1898) ([Starnop](https://github.com/Starnop))\n* \\[bug\\]: roolback the code about CRI of version v1alpha1 [\\#1755](https://github.com/alibaba/pouch/pull/1755) ([Starnop](https://github.com/Starnop))\n\n### __Documentation__\n\n* docs: add disk quota requirement restriction to be much more clear [\\#2142](https://github.com/alibaba/pouch/pull/2142) ([allencloud](https://github.com/allencloud))\n* docs: add runtime format in config doc [\\#2110](https://github.com/alibaba/pouch/pull/2110) ([Ace-Tang](https://github.com/Ace-Tang))\n* docs: fix wrong link of pouchd config [\\#2107](https://github.com/alibaba/pouch/pull/2107) ([zjumoon01](https://github.com/zjumoon01))\n* docs: update pull request template about test [\\#2091](https://github.com/alibaba/pouch/pull/2091) ([allencloud](https://github.com/allencloud))\n* docs: add eleme in adoptors [\\#2077](https://github.com/alibaba/pouch/pull/2077) ([allencloud](https://github.com/allencloud))\n* docs: update install step in INSTALLATION.md [\\#2045](https://github.com/alibaba/pouch/pull/2045) ([xiechengsheng](https://github.com/xiechengsheng))\n* bugfix: move function getListener\\(\\) to pkg/net/listener.go [\\#2040](https://github.com/alibaba/pouch/pull/2040) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* docs: add adoptors.md for PouchContainer project [\\#2038](https://github.com/alibaba/pouch/pull/2038) ([allencloud](https://github.com/allencloud))\n* doc: fix spelling error [\\#1961](https://github.com/alibaba/pouch/pull/1961) ([Shallownight](https://github.com/Shallownight))\n* docs: update kubernetes deploying document [\\#1917](https://github.com/alibaba/pouch/pull/1917) ([allencloud](https://github.com/allencloud))\n* docs: add code coverage icon on README [\\#1893](https://github.com/alibaba/pouch/pull/1893) ([allencloud](https://github.com/allencloud))\n* bugfix: a typo in CONTRIBUTTING.md [\\#1775](https://github.com/alibaba/pouch/pull/1775) ([JeromeTan1997](https://github.com/JeromeTan1997))\n* style: alert the name of struct context to streamContext  [\\#1741](https://github.com/alibaba/pouch/pull/1741) ([Starnop](https://github.com/Starnop))\n\n### __Testing__\n\n* test: make TestRunWithWorkingDir test case happy [\\#2140](https://github.com/alibaba/pouch/pull/2140) ([HusterWan](https://github.com/HusterWan))\n* bugfix: fix diskquota test case [\\#2134](https://github.com/alibaba/pouch/pull/2134) ([rudyfly](https://github.com/rudyfly))\n* test: make Test\\_mergeEnvSlice test case happy [\\#2131](https://github.com/alibaba/pouch/pull/2131) ([HusterWan](https://github.com/HusterWan))\n* bugfix: make rpm package script works [\\#2100](https://github.com/alibaba/pouch/pull/2100) ([chuanchang](https://github.com/chuanchang))\n* test: add unit test for storage module [\\#2089](https://github.com/alibaba/pouch/pull/2089) ([rudyfly](https://github.com/rudyfly))\n* test: add test cases about modifyContainerConfig&containerNetns [\\#2062](https://github.com/alibaba/pouch/pull/2062) ([Starnop](https://github.com/Starnop))\n* test: add test cases about modifyHostConfig [\\#2056](https://github.com/alibaba/pouch/pull/2056) ([Starnop](https://github.com/Starnop))\n* test: add test cases about toCNIPortMappings [\\#2050](https://github.com/alibaba/pouch/pull/2050) ([Starnop](https://github.com/Starnop))\n* bugfix: fast fail if the exit code of script is not zero [\\#2049](https://github.com/alibaba/pouch/pull/2049) ([fuweid](https://github.com/fuweid))\n* test: fix typo in TestAliKernelDiskQuotaWorks [\\#2048](https://github.com/alibaba/pouch/pull/2048) ([chuanchang](https://github.com/chuanchang))\n* refactor: make the API case clear and stable [\\#2042](https://github.com/alibaba/pouch/pull/2042) ([fuweid](https://github.com/fuweid))\n* test: add test cases about toCriContainer [\\#2039](https://github.com/alibaba/pouch/pull/2039) ([Starnop](https://github.com/Starnop))\n* bugfix: cri Test\\_getSELinuxSecurityOpts [\\#2031](https://github.com/alibaba/pouch/pull/2031) ([Starnop](https://github.com/Starnop))\n* test: add test cases about CRI image [\\#2030](https://github.com/alibaba/pouch/pull/2030) ([Starnop](https://github.com/Starnop))\n* test: add unit-test for getSELinuxSecurityOpts method which locate on cri/vâ€¦ [\\#2023](https://github.com/alibaba/pouch/pull/2023) ([Coordinate36](https://github.com/Coordinate36))\n* test: add unit-test for toCriSandbox [\\#2002](https://github.com/alibaba/pouch/pull/2002) ([MarkLux](https://github.com/MarkLux))\n* Test\\_imageToCriImage [\\#1990](https://github.com/alibaba/pouch/pull/1990) ([KevinLeung-nice](https://github.com/KevinLeung-nice))\n* BJ266-4: Add unit-test for apis/opts/ports.go, fix \\#1906  [\\#1976](https://github.com/alibaba/pouch/pull/1976) ([devily](https://github.com/devily))\n* test: add unit-test for apis/opts/portbindings.go [\\#1951](https://github.com/alibaba/pouch/pull/1951) ([yuannauy123](https://github.com/yuannauy123))\n* test: add unit-test for getAppArmorSecurityOpts and getSeccompSecurityOpts [\\#1948](https://github.com/alibaba/pouch/pull/1948) ([kaizizhu](https://github.com/kaizizhu))\n* add unit test for modifyContainerNamespaceOptions [\\#1945](https://github.com/alibaba/pouch/pull/1945) ([MarkLux](https://github.com/MarkLux))\n* bugfix: fix panic for AttachVolume unittests [\\#1923](https://github.com/alibaba/pouch/pull/1923) ([shaloulcy](https://github.com/shaloulcy))\n* test: unit test for cri/stream/errors.go [\\#1909](https://github.com/alibaba/pouch/pull/1909) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* test: run with volume whose destination is not empty [\\#1899](https://github.com/alibaba/pouch/pull/1899) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* bugfix: remove duplicate package in test file [\\#1896](https://github.com/alibaba/pouch/pull/1896) ([fuweid](https://github.com/fuweid))\n* test: add test cases about parse object [\\#1895](https://github.com/alibaba/pouch/pull/1895) ([Starnop](https://github.com/Starnop))\n* test: unit test for cri/stream/httpstream/httpstream.go [\\#1892](https://github.com/alibaba/pouch/pull/1892) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* test: add unit-test for daemon/config/getConfigurations [\\#1851](https://github.com/alibaba/pouch/pull/1851) ([SeaRise](https://github.com/SeaRise))\n* test: Add unit-test for Volume Core's DetachVolume method [\\#1824](https://github.com/alibaba/pouch/pull/1824) ([panzaiyu](https://github.com/panzaiyu))\n* test: fix incorrect error judging in core\\_test.go [\\#1823](https://github.com/alibaba/pouch/pull/1823) ([jiapengcs](https://github.com/jiapengcs))\n* test: add unit test for func storage/volume/ListVolumeName [\\#1810](https://github.com/alibaba/pouch/pull/1810) ([btlcmr0702](https://github.com/btlcmr0702))\n* test: add unit-test for daemon/config/getUnknownFlags [\\#1808](https://github.com/alibaba/pouch/pull/1808) ([cyrann](https://github.com/cyrann))\n* add unit-test for Volume Core's VolumePath method [\\#1788](https://github.com/alibaba/pouch/pull/1788) ([gfl699468](https://github.com/gfl699468))\n* test: add unit test cases for image\\_proxy\\_util.go [\\#1786](https://github.com/alibaba/pouch/pull/1786) ([JeromeTan1997](https://github.com/JeromeTan1997))\n* test: add unit test for generateMountBindings and modifySandboxNamespaceOptions [\\#1768](https://github.com/alibaba/pouch/pull/1768) ([ZouRui89](https://github.com/ZouRui89))\n* test: unit test for request cache of stream server [\\#1767](https://github.com/alibaba/pouch/pull/1767) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* test: add api tests for some commands  [\\#1747](https://github.com/alibaba/pouch/pull/1747) ([xiechengsheng](https://github.com/xiechengsheng))\n\n### __Contrib__\n\n* bash completion: first commit for bash completion [\\#2059](https://github.com/alibaba/pouch/pull/2059) ([Ace-Tang](https://github.com/Ace-Tang))\n* makefile: simplify makefile output [\\#1921](https://github.com/alibaba/pouch/pull/1921) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: Add missing document in Makefile [\\#1757](https://github.com/alibaba/pouch/pull/1757) ([chuanchang](https://github.com/chuanchang))\n* refactor: reorder hack scripts [\\#1750](https://github.com/alibaba/pouch/pull/1750) ([fuweid](https://github.com/fuweid))\n\n### __New Contributors__\n\nHere is the list of new contributors:\n\n* [CodeJuan](https://github.com/CodeJuan)\n* [btlcmr0702](https://github.com/btlcmr0702)\n* [Coordinate36](https://github.com/Coordinate36)\n* [devily](https://github.com/devily)\n* [Erhuan](https://github.com/cyrann)\n* [fanglin](https://github.com/gfl699468)\n* [Jerome Tan](https://github.com/JeromeTan1997)\n* [jiapengcs](https://github.com/jiapengcs)\n* [kaizizhu](https://github.com/kaizizhu)\n* [MarkLux](https://github.com/MarkLux)\n* [SeaRise](https://github.com/SeaRise)\n* [shanbo.lkw](https://github.com/KevinLeung-nice)\n* [Tardis Xu](https://github.com/xiaoxubeii)\n* [Wangrui](https://github.com/zjumoon01)\n* [yuannauy123](https://github.com/yuannauy123)\n* [yuchuan](https://github.com/Shallownight)\n* [panzaiyu](https://github.com/panzaiyu)\n\n## 1.0.0-rc1 (2018-07-13)\n\n__IMPORTANT__: In PouchContainer 1.0.0-rc1 we have done many things that important to all users of PouchContainer:\n\n* PouchContainer-CRI now supports using annotation to choose different runtime.\n* PouchContainer Image Manager supports `load` and `save` functionality.\n* PouchContainer Log Driver supports `syslog` type.\n* PouchContainer uses latest `libnetwork` in network module.\n* PouchContainer makes the runtime module stable.\n\n### __Pouch Daemon & API:__\n\n* bugfix: Fix log-opt option parse fails if value contains comma [#1729](https://github.com/alibaba/pouch/pull/1729) ([Frankzhaopku](https://github.com/Frankzhaopku))\n* enhance: add ExtraAttribute functionality in LogInfo [#1714](https://github.com/alibaba/pouch/pull/1714) ([fuweid](https://github.com/fuweid))\n* bugfix: schema point to a response object  [#1712](https://github.com/alibaba/pouch/pull/1712) ([zhuangqh](https://github.com/zhuangqh))\n* bugfix: fix exec record user as container config user [#1657](https://github.com/alibaba/pouch/pull/1657) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: daemon support --log-driver and --log-opt options [#1647](https://github.com/alibaba/pouch/pull/1647) ([zhuangqh](https://github.com/zhuangqh))\n* bugfix: list image should ignore error if containerd can't handle well [#1625](https://github.com/alibaba/pouch/pull/1625) ([fuweid](https://github.com/fuweid))\n* bugfix: execConfig remove omitemtpy [#1619](https://github.com/alibaba/pouch/pull/1619) ([HusterWan](https://github.com/HusterWan))\n* enhance: add new formatter for syslog [#1608](https://github.com/alibaba/pouch/pull/1608) ([fuweid](https://github.com/fuweid))\n* enhance: Port Pouch Cli to Darwin(MacOS) [#1598](https://github.com/alibaba/pouch/pull/1598) ([xuzhenglun](https://github.com/xuzhenglun))\n* feature: support pouch ps filter [#1595](https://github.com/alibaba/pouch/pull/1595) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: add pouch save functionality [#1592](https://github.com/alibaba/pouch/pull/1592) ([xiechengsheng](https://github.com/xiechengsheng))\n* enhance: adjust data stream from pouch pull api [#1586](https://github.com/alibaba/pouch/pull/1586) ([fuweid](https://github.com/fuweid))\n* feature: add systemd notify [#1577](https://github.com/alibaba/pouch/pull/1577) ([shaloulcy](https://github.com/shaloulcy))\n* feature: adjust pouchd unix socket permissions [#1561](https://github.com/alibaba/pouch/pull/1561) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: rename cpu-share to cpu-shares in command line [#1547](https://github.com/alibaba/pouch/pull/1547) ([allencloud](https://github.com/allencloud))\n* feature: add update daemon config function [#1514](https://github.com/alibaba/pouch/pull/1514) ([rudyfly](https://github.com/rudyfly))\n* bugfix: pull image before run and upgrade [#1419](https://github.com/alibaba/pouch/pull/1419) ([wrfly](https://github.com/wrfly))\n* feature: add pouch load functionality [#1391](https://github.com/alibaba/pouch/pull/1391) ([fuweid](https://github.com/fuweid))\n* feature: add wait client command for pouch [#1333](https://github.com/alibaba/pouch/pull/1333) ([xiechengsheng](https://github.com/xiechengsheng))\n\n### __Container Runtime:__\n\n* bugfix: execute remount rootfs before prestart hook [#1622](https://github.com/alibaba/pouch/pull/1622) ([HusterWan](https://github.com/HusterWan))\n* bugfix: release the container resources if contaienr failed to start [#1621](https://github.com/alibaba/pouch/pull/1621) ([shaloulcy](https://github.com/shaloulcy))\n* bugfix: fix memory-swap flag not validate correct [#1614](https://github.com/alibaba/pouch/pull/1614) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: fix exec stuck when exec get error [#1605](https://github.com/alibaba/pouch/pull/1605) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: we should set Running flag to true when started container [#1604](https://github.com/alibaba/pouch/pull/1604) ([HusterWan](https://github.com/HusterWan))\n* refactor: move config file from cli into one places [#1597](https://github.com/alibaba/pouch/pull/1597) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: support net priority flag [#1576](https://github.com/alibaba/pouch/pull/1576) ([Ace-Tang](https://github.com/Ace-Tang))\n* refactor: refactor container update diskquota type [#1572](https://github.com/alibaba/pouch/pull/1572) ([rudyfly](https://github.com/rudyfly))\n* bugfix: make ringbuffer right [#1558](https://github.com/alibaba/pouch/pull/1558) ([fuweid](https://github.com/fuweid))\n* bugfix: vendor latest libnetwork for connect panic [#1556](https://github.com/alibaba/pouch/pull/1556) ([shaloulcy](https://github.com/shaloulcy))\n* feature: support shm size [#1542](https://github.com/alibaba/pouch/pull/1542) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: change the order of generating MountPoints [#1541](https://github.com/alibaba/pouch/pull/1541) ([shaloulcy](https://github.com/shaloulcy))\n* refactor: make code more encapsulate and logic simple [#1540](https://github.com/alibaba/pouch/pull/1540) ([allencloud](https://github.com/allencloud))\n* feature: add container setting check [#1537](https://github.com/alibaba/pouch/pull/1537) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: update cpu-quota of 0.2.4 container may occur error [#1533](https://github.com/alibaba/pouch/pull/1533) ([HusterWan](https://github.com/HusterWan))\n* enhance: add volume lock [#1531](https://github.com/alibaba/pouch/pull/1531) ([shaloulcy](https://github.com/shaloulcy))\n* bugfix: restore config after update fail [#1513](https://github.com/alibaba/pouch/pull/1513) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: rm omitempty in resource fields [#1505](https://github.com/alibaba/pouch/pull/1505) ([allencloud](https://github.com/allencloud))\n* bugfix: support nullable bool value set in config [#1502](https://github.com/alibaba/pouch/pull/1502) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: init syslog functionality in pouchd [#1500](https://github.com/alibaba/pouch/pull/1500) ([fuweid](https://github.com/fuweid))\n* bugfix: fix the wrong bridge gateway [#1495](https://github.com/alibaba/pouch/pull/1495) ([rudyfly](https://github.com/rudyfly))\n* bugfix: set memory swap double of non-zero memory value [#1492](https://github.com/alibaba/pouch/pull/1492) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: add attach volume when container start [#1483](https://github.com/alibaba/pouch/pull/1483) ([rudyfly](https://github.com/rudyfly))\n* feature: support creating container by just specifying rootfs [#1474](https://github.com/alibaba/pouch/pull/1474) ([HusterWan](https://github.com/HusterWan))\n* feature: finish the CLI logs part [#1472](https://github.com/alibaba/pouch/pull/1472) ([fuweid](https://github.com/fuweid))\n* bugfix: copy data before put it into ringbuf [#1471](https://github.com/alibaba/pouch/pull/1471) ([fuweid](https://github.com/fuweid))\n* bugfix: set memory swap initial value to 0 [#1466](https://github.com/alibaba/pouch/pull/1466) ([Ace-Tang](https://github.com/Ace-Tang))\n* refactor: remove ceph volume plugin [#1441](https://github.com/alibaba/pouch/pull/1441) ([shaloulcy](https://github.com/shaloulcy))\n* bugfix: we must call Restore container after initialize network Mgr [#1422](https://github.com/alibaba/pouch/pull/1422) ([HusterWan](https://github.com/HusterWan))\n* bugfix: change the option to set volume size [#1409](https://github.com/alibaba/pouch/pull/1409) ([rudyfly](https://github.com/rudyfly))\n* feature: add cgroup resources check [#1375](https://github.com/alibaba/pouch/pull/1375) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: add runtime config [#1366](https://github.com/alibaba/pouch/pull/1366) ([Ace-Tang](https://github.com/Ace-Tang))\n* feature: update lock policy for container management [#1307](https://github.com/alibaba/pouch/pull/1307) ([allencloud](https://github.com/allencloud))\n\n### __Network:__\n\n* enhance: display disconnect result for pouch network disconnect [#1590](https://github.com/alibaba/pouch/pull/1590) ([shaloulcy](https://github.com/shaloulcy))\n* bugfix: network not found [#1473](https://github.com/alibaba/pouch/pull/1473) ([shaloulcy](https://github.com/shaloulcy))\n* refactor: use govendor to depend on libnetwork [#1445](https://github.com/alibaba/pouch/pull/1445) ([idealhack](https://github.com/idealhack))\n* feature: modify defaut bridge mode [#1424](https://github.com/alibaba/pouch/pull/1424) ([rudyfly](https://github.com/rudyfly))\n* feature: add container's network files [#1403](https://github.com/alibaba/pouch/pull/1403) ([shaloulcy](https://github.com/shaloulcy))\n\n### __Kubernetes CRI:__\n\n* feature: make runtime choosing supported in CRI managers for Kubernetes [#1593](https://github.com/alibaba/pouch/pull/1593) ([Starnop](https://github.com/Starnop))\n* bugfix: skip teardown network, if the sandbox has been stopped [#1539](https://github.com/alibaba/pouch/pull/1539) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* refactor: return CRI services error [#1521](https://github.com/alibaba/pouch/pull/1521) ([oiooj](https://github.com/oiooj))\n* bugfix: bind an address for stream server [#1520](https://github.com/alibaba/pouch/pull/1520) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* feature: UpdateContainerResources of CRI Manager [#1511](https://github.com/alibaba/pouch/pull/1511) ([Starnop](https://github.com/Starnop))\n* bugfix: Make hack/kubernetes/allinone\\_aliyun.sh to pass shellcheck [#1507](https://github.com/alibaba/pouch/pull/1507) ([Starnop](https://github.com/Starnop))\n* bugfix: if run sandbox failed, clean up; deduplicate the default mounts with user defined ones [#1468](https://github.com/alibaba/pouch/pull/1468) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* feature: stats of cri manager [#1431](https://github.com/alibaba/pouch/pull/1431) ([Starnop](https://github.com/Starnop))\n\n### __Test & Tool:__\n\n* bugfix: deb package build failed [#1727](https://github.com/alibaba/pouch/pull/1727) ([shaloulcy](https://github.com/shaloulcy))\n* enhance: add .DS\\_Store ignore [#1724](https://github.com/alibaba/pouch/pull/1724) ([Frankzhaopku](https://github.com/Frankzhaopku))\n* test: add unit test for filter validation [#1718](https://github.com/alibaba/pouch/pull/1718) ([allencloud](https://github.com/allencloud))\n* test: TestListVolumes [#1707](https://github.com/alibaba/pouch/pull/1707) ([mengjiahao](https://github.com/mengjiahao))\n* test: add unit-test for ValidateCPUQuota [#1692](https://github.com/alibaba/pouch/pull/1692) ([johanzhu](https://github.com/johanzhu))\n* Add unit-test for ValidateCPUPeriod [#1690](https://github.com/alibaba/pouch/pull/1690) ([johanzhu](https://github.com/johanzhu))\n* test: TestRemoveVolume [#1679](https://github.com/alibaba/pouch/pull/1679) ([mengjiahao](https://github.com/mengjiahao))\n* test: add unit-test for proxy/has port [#1668](https://github.com/alibaba/pouch/pull/1668) ([mengjiahao](https://github.com/mengjiahao))\n* test: add unit-tests for core GetVolume [#1660](https://github.com/alibaba/pouch/pull/1660) ([forienlauo](https://github.com/forienlauo))\n* test: add unit test for function ValidateOOMScore in oom\\_score\\_test.go [#1658](https://github.com/alibaba/pouch/pull/1658) ([quyi1993](https://github.com/quyi1993))\n* test: add unit-test for hasPort method [#1654](https://github.com/alibaba/pouch/pull/1654) ([forienlauo](https://github.com/forienlauo))\n* test: add unit-tests for core CreateVolume [#1626](https://github.com/alibaba/pouch/pull/1626) ([shaloulcy](https://github.com/shaloulcy))\n* bugfix: should remove the container in specified daemon [#1613](https://github.com/alibaba/pouch/pull/1613) ([Letty5411](https://github.com/Letty5411))\n* test: add top command in upgrade test suite [#1554](https://github.com/alibaba/pouch/pull/1554) ([allencloud](https://github.com/allencloud))\n* test: add test for different volume sources [#1553](https://github.com/alibaba/pouch/pull/1553) ([shaloulcy](https://github.com/shaloulcy))\n* test: add TestRunMemoryOOM test case [#1552](https://github.com/alibaba/pouch/pull/1552) ([sunyuan3](https://github.com/sunyuan3))\n* test: add all states container restart validation [#1549](https://github.com/alibaba/pouch/pull/1549) ([allencloud](https://github.com/allencloud))\n* bugfix: refine tests with specifying CMD [#1548](https://github.com/alibaba/pouch/pull/1548) ([Letty5411](https://github.com/Letty5411))\n* bugfix: fix rpm package bug [#1519](https://github.com/alibaba/pouch/pull/1519) ([Letty5411](https://github.com/Letty5411))\n* bugfix: rename lxcfs to pouch-lxcfs in pouch.rpm [#1490](https://github.com/alibaba/pouch/pull/1490) ([Letty5411](https://github.com/Letty5411))\n* feature: add make help into makefile [#1478](https://github.com/alibaba/pouch/pull/1478) ([houstar](https://github.com/houstar))\n* bugfix: replace DelContainerForceOk with DelContainerForceMultyTime [#1462](https://github.com/alibaba/pouch/pull/1462) ([zhuangqh](https://github.com/zhuangqh))\n* test: add more test for container operations [#1457](https://github.com/alibaba/pouch/pull/1457) ([ZouRui89](https://github.com/ZouRui89))\n* refactor: correct hard coding in several shell script [#1452](https://github.com/alibaba/pouch/pull/1452) ([zhuangqh](https://github.com/zhuangqh))\n* bugfix: correct shell script format via shellcheck reports [#1447](https://github.com/alibaba/pouch/pull/1447) ([zhuangqh](https://github.com/zhuangqh))\n* test: sort image list before check [#1413](https://github.com/alibaba/pouch/pull/1413) ([fuweid](https://github.com/fuweid))\n* feature: travis doesn't run document-only changed commit [#1412](https://github.com/alibaba/pouch/pull/1412) ([fuweid](https://github.com/fuweid))\n\n### __Documentation:__\n\n* docs: change logos to new version [#1720](https://github.com/alibaba/pouch/pull/1720) ([Frankzhaopku](https://github.com/Frankzhaopku))\n* Update [INSTALLATION.md](http://INSTALLATION.md) [#1698](https://github.com/alibaba/pouch/pull/1698) ([wq2526](https://github.com/wq2526))\n* docs: update docs about contributing [#1673](https://github.com/alibaba/pouch/pull/1673) ([shannonxn](https://github.com/shannonxn))\n* docs: enable non-root user to run pouch commands without sudo [#1573](https://github.com/alibaba/pouch/pull/1573) ([Ace-Tang](https://github.com/Ace-Tang))\n* docs: change pouch to PouchContainer [#1525](https://github.com/alibaba/pouch/pull/1525) ([Frankzhaopku](https://github.com/Frankzhaopku))\n* bugfix typo in the vendor/README.md [#1496](https://github.com/alibaba/pouch/pull/1496) ([houstar](https://github.com/houstar))\n* docs: better arch to add connection between cri manager and pouchd [#1465](https://github.com/alibaba/pouch/pull/1465) ([allencloud](https://github.com/allencloud))\n* docs: add docs about  lxcfs feature [#1461](https://github.com/alibaba/pouch/pull/1461) ([fanux](https://github.com/fanux))\n* doc: Modify the document about Kubernetes&pouch to make it friendly [#1459](https://github.com/alibaba/pouch/pull/1459) ([Starnop](https://github.com/Starnop))\n* docs: update [FAQ.md](http://FAQ.md) to add kernel version support [#1444](https://github.com/alibaba/pouch/pull/1444) ([allencloud](https://github.com/allencloud))\n* docs: add supporting legacy kernels into runV [#1442](https://github.com/alibaba/pouch/pull/1442) ([allencloud](https://github.com/allencloud))\n* docs: add more details on rich container [#1440](https://github.com/alibaba/pouch/pull/1440) ([allencloud](https://github.com/allencloud))\n\n### New Contributors\n\nHere is the list of new contributors:\n\n* [Frankzhaopku](https://github.com/Frankzhaopku)\n* [johanzhu](https://github.com/johanzhu)\n* [lauo](https://github.com/forienlauo)\n* [mengjiahao](https://github.com/mengjiahao)\n* [xuzhenglun](https://github.com/xuzhenglun)\n* [fanux](https://github.com/fanux)\n* [wq2526](https://github.com/wq2526)\n* [idealhack](https://github.com/idealhack)\n* [shannonxn](https://github.com/shannonxn)\n\n## 0.5.0 (2018-05-25)\n\n**IMPORTANT**: In PouchContainer 0.5.0 we have done many things that important to all users of PouchContainer:\n\n1. PouchContainer now supports CRI v1alpha2 that will support for Kubernetes 1.10.0\n2. Add plugin mechanism that we can use many existing volume and network plugins\n3. Add many container and image tools like `logs` and `tag` command that will be very helpful for daily container operation\n4. PouchContainer now is more stable and works well in production environment\n\n### Remote API && Client\n\n* Add instruction comment for the `blkio-weight-device` flag of `run` command [\\#1381](https://github.com/alibaba/pouch/pull/1381) ([Ace-Tang](https://github.com/Ace-Tang))\n* Fix `cgroup-parent` can not be set from the daemon config file [\\#1361](https://github.com/alibaba/pouch/pull/1361) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add volume drivers info to system info [\\#1352](https://github.com/alibaba/pouch/pull/1352) ([shaloulcy](https://github.com/shaloulcy))\n* Fix `ExecIDs` parameter of `ContainerConfig` should be a slice [\\#1324](https://github.com/alibaba/pouch/pull/1324) ([HusterWan](https://github.com/HusterWan))\n* Refactor format `topExamples` code and add `execExample` [\\#1319](https://github.com/alibaba/pouch/pull/1319) ([soarpenguin](https://github.com/soarpenguin))\n* Enhance add more field in `pouch info` command [\\#1238](https://github.com/alibaba/pouch/pull/1238) ([ZouRui89](https://github.com/ZouRui89))\n* Add `debug` flag to pouch client [\\#1234](https://github.com/alibaba/pouch/pull/1234) ([shaloulcy](https://github.com/shaloulcy))\n* Fix `exec` command align with Moby `v1.24` API [\\#1226](https://github.com/alibaba/pouch/pull/1226) ([fuweid](https://github.com/fuweid))\n* Fix volume info of `inspect` output is incompatible with Moby API [\\#1213](https://github.com/alibaba/pouch/pull/1213) ([HusterWan](https://github.com/HusterWan))\n* Refactor network list api, make it compatible with Mody API [\\#1173](https://github.com/alibaba/pouch/pull/1173) ([rudyfly](https://github.com/rudyfly))\n\n### Runtime\n\n* Fix container may be killed when ontainerd instance exit [\\#1407](https://github.com/alibaba/pouch/pull/1407) ([HusterWan](https://github.com/HusterWan))\n* Fix panic when execute `exec` command with flag `-d` [\\#1394](https://github.com/alibaba/pouch/pull/1394) ([HusterWan](https://github.com/HusterWan))\n* New `tag` tool for pouch that allow create alias name for images [\\#1378](https://github.com/alibaba/pouch/pull/1378) ([fuweid](https://github.com/fuweid))\n* Fix add judge for whether pidfile path is given when start pouch daemon [\\#1374](https://github.com/alibaba/pouch/pull/1374) ([Ace-Tang](https://github.com/Ace-Tang))\n* Fix map type can not be merged [\\#1367](https://github.com/alibaba/pouch/pull/1367) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add support for updating or deleting an env value [\\#1364](https://github.com/alibaba/pouch/pull/1364) ([HusterWan](https://github.com/HusterWan))\n* Add support for managing more containers in some commands [\\#1357](https://github.com/alibaba/pouch/pull/1357) ([xiechengsheng](https://github.com/xiechengsheng))\n* Fix remove `pids-limit` initial value [\\#1354](https://github.com/alibaba/pouch/pull/1354) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add support for using an image by digest id [\\#1351](https://github.com/alibaba/pouch/pull/1351) ([fuweid](https://github.com/fuweid))\n* Support generate version information at build time [\\#1350](https://github.com/alibaba/pouch/pull/1350) ([Ace-Tang](https://github.com/Ace-Tang))\n* Fix let `execConfig` value assignment before IO close, so thath `CRI` test case can get right result before container exit [\\#1340](https://github.com/alibaba/pouch/pull/1340) ([ZouRui89](https://github.com/ZouRui89))\n* Fix make the jsonfile exit friendly [\\#1330](https://github.com/alibaba/pouch/pull/1330) ([fuweid](https://github.com/fuweid))\n* Fix `markStopped` may failed that will cause container status not right [\\#1322](https://github.com/alibaba/pouch/pull/1322) ([HusterWan](https://github.com/HusterWan))\n* Fix mount `/sys/fs/cgroup` into container [\\#1314](https://github.com/alibaba/pouch/pull/1314) ([fuweid](https://github.com/fuweid))\n* Fix make pouch daemon exit friendly [\\#1311](https://github.com/alibaba/pouch/pull/1311) ([fuweid](https://github.com/fuweid))\n* Refactor eliminate `containerMeta` in pouch daemon manager [\\#1300](https://github.com/alibaba/pouch/pull/1300) ([allencloud](https://github.com/allencloud))\n* New `logs` API implement to redirct container's `StdOut` and `StdErr` to json file [\\#1298](https://github.com/alibaba/pouch/pull/1298) ([fuweid](https://github.com/fuweid))\n* Refactor reorder function sequence to make it more reasonable [\\#1296](https://github.com/alibaba/pouch/pull/1296) ([allencloud](https://github.com/allencloud))\n* Add support for taking over old containerd instance when pouchd restart [\\#1275](https://github.com/alibaba/pouch/pull/1275) ([HusterWan](https://github.com/HusterWan))\n* Fix can't stop a `paused` container [\\#1269](https://github.com/alibaba/pouch/pull/1269) ([shaloulcy](https://github.com/shaloulcy))\n* Refactor image manager: redesign the `imageStore` in image manager and make it more clear and stable [\\#1267](https://github.com/alibaba/pouch/pull/1267) ([fuweid](https://github.com/fuweid))\n* Fix compatibility with alidocker when update container diskquota [\\#1264](https://github.com/alibaba/pouch/pull/1264) ([HusterWan](https://github.com/HusterWan))\n* Fix change the `QuotaID` to `QuotaId` to align with Moby `v1.24` API [\\#1263](https://github.com/alibaba/pouch/pull/1263) ([fuweid](https://github.com/fuweid))\n* Refactor facilitate make.sh `build` part code [\\#1261](https://github.com/alibaba/pouch/pull/1261) ([u2takey](https://github.com/u2takey))\n* Fix set container env failed because `Invalid cross-device link` error [\\#1260](https://github.com/alibaba/pouch/pull/1260) ([HusterWan](https://github.com/HusterWan))\n* Fix the output file is used incorrectly & fix the wrong test case name [\\#1258](https://github.com/alibaba/pouch/pull/1258) ([xieyanke](https://github.com/xieyanke))\n* Add `--volume` flag when remove container that will delete all anonymous volumes created by pouchd [\\#1255](https://github.com/alibaba/pouch/pull/1255) ([rudyfly](https://github.com/rudyfly))\n* Fix mountpoint binary not found error [\\#1253](https://github.com/alibaba/pouch/pull/1253) ([shaloulcy](https://github.com/shaloulcy))\n* Fix the mount path of tmpfs volume and some misspells [\\#1251](https://github.com/alibaba/pouch/pull/1251) ([shaloulcy](https://github.com/shaloulcy))\n* Fix merge flag default value in pouch daemon config, if flag not be passed, we should not merge it with daemon config [\\#1246](https://github.com/alibaba/pouch/pull/1246) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add vagrant environment for development [\\#1245](https://github.com/alibaba/pouch/pull/1245) ([u2takey](https://github.com/u2takey))\n* Fix free resources after exec exit [\\#1240](https://github.com/alibaba/pouch/pull/1240) ([Ace-Tang](https://github.com/Ace-Tang))\n* Fix modify log format [\\#1239](https://github.com/alibaba/pouch/pull/1239) ([rudyfly](https://github.com/rudyfly))\n* Fix add newline for id when create container [\\#1237](https://github.com/alibaba/pouch/pull/1237) ([fuweid](https://github.com/fuweid))\n* Add update restful api support to update container diskquota [\\#1235](https://github.com/alibaba/pouch/pull/1235) ([HusterWan](https://github.com/HusterWan))\n* Fix `setRawMode` can only be set when the user set tty [\\#1233](https://github.com/alibaba/pouch/pull/1233) ([fuweid](https://github.com/fuweid))\n* Fix compatibility with `alidocker` when update container labels [\\#1228](https://github.com/alibaba/pouch/pull/1228) ([HusterWan](https://github.com/HusterWan))\n* Add `--pids-limit` flags to `create` command [\\#1227](https://github.com/alibaba/pouch/pull/1227) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add support update container's `cpu-period` [\\#1222](https://github.com/alibaba/pouch/pull/1222) ([HusterWan](https://github.com/HusterWan))\n* Add support parsing `ContainerConfig.Volumes` when create container [\\#1219](https://github.com/alibaba/pouch/pull/1219) ([rudyfly](https://github.com/rudyfly))\n* Add support updating env when container is running [\\#1218](https://github.com/alibaba/pouch/pull/1218) ([HusterWan](https://github.com/HusterWan))\n* Fix volume size without unit [\\#1215](https://github.com/alibaba/pouch/pull/1215) ([rudyfly](https://github.com/rudyfly))\n* Fix remove the `DiskQuota` field from `Resource` struct [\\#1212](https://github.com/alibaba/pouch/pull/1212) ([fuweid](https://github.com/fuweid))\n* Fix make stopping an non-running container valid [\\#1210](https://github.com/alibaba/pouch/pull/1210) ([allencloud](https://github.com/allencloud))\n* Fix make stopping a stopped container return no error [\\#1209](https://github.com/alibaba/pouch/pull/1209) ([allencloud](https://github.com/allencloud))\n* Fix make `restart` API support restarting an stopped container [\\#1208](https://github.com/alibaba/pouch/pull/1208) ([allencloud](https://github.com/allencloud))\n* Refactor store container info to disk failed should return errors [\\#1203](https://github.com/alibaba/pouch/pull/1203) ([HusterWan](https://github.com/HusterWan))\n* Fix make logrus detect whether output with color [\\#1202](https://github.com/alibaba/pouch/pull/1202) ([yyb196](https://github.com/yyb196))\n* Fix remove update image and fix bugs when update env [\\#1196](https://github.com/alibaba/pouch/pull/1196) ([HusterWan](https://github.com/HusterWan))\n* Fix remove log format type check [\\#1192](https://github.com/alibaba/pouch/pull/1192) ([oiooj](https://github.com/oiooj))\n* Fix add default tag `:latest` when using pouch `rmi` command to remove untagged container images. [\\#1191](https://github.com/alibaba/pouch/pull/1191) ([xiechengsheng](https://github.com/xiechengsheng))\n* Fix container cannot start after first start failed [\\#1190](https://github.com/alibaba/pouch/pull/1190) ([HusterWan](https://github.com/HusterWan))\n* Fix check the duplicate mount point [\\#1185](https://github.com/alibaba/pouch/pull/1185) ([rudyfly](https://github.com/rudyfly))\n* Fix if user rename container with id use the real name to clean the cache [\\#1182](https://github.com/alibaba/pouch/pull/1182) ([yyb196](https://github.com/yyb196))\n* Add `--ulimit` flag to `create` command [\\#1179](https://github.com/alibaba/pouch/pull/1179) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add support recording container's last exit time [\\#1176](https://github.com/alibaba/pouch/pull/1176) ([Ace-Tang](https://github.com/Ace-Tang))\n* Fix update `SafeMap` item should just call `Put` method, no need call `Remove` method [\\#1175](https://github.com/alibaba/pouch/pull/1175) ([HusterWan](https://github.com/HusterWan))\n* Add support setting volumes to `/etc/mtab` [\\#1170](https://github.com/alibaba/pouch/pull/1170) ([rudyfly](https://github.com/rudyfly))\n\n### Documentation\n\n* Update doc of pouch with kubernetes deploying [\\#1384](https://github.com/alibaba/pouch/pull/1384) ([Starnop](https://github.com/Starnop))\n* Update `apt-key` fingerprint to `BE2F475F` when install pouch on ubuntu [\\#1339](https://github.com/alibaba/pouch/pull/1339) ([rhinoceros](https://github.com/rhinoceros))\n* Add more information about how to run test [\\#1331](https://github.com/alibaba/pouch/pull/1331) ([Letty5411](https://github.com/Letty5411))\n* Add misspell tool to check English words [\\#1304](https://github.com/alibaba/pouch/pull/1304) ([allencloud](https://github.com/allencloud))\n* Add introduction document about how to run `kata-container` with pouch [\\#1295](https://github.com/alibaba/pouch/pull/1295) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add code style introduction document for pouch [\\#1283](https://github.com/alibaba/pouch/pull/1283) ([allencloud](https://github.com/allencloud))\n* Add introduction document about how to  deploy kubernetes with pouch powerd by aliyun [\\#1236](https://github.com/alibaba/pouch/pull/1236) ([Starnop](https://github.com/Starnop))\n* Fix typos [\\#1177](https://github.com/alibaba/pouch/pull/1177) ([wgliang](https://github.com/wgliang))  [\\#1178](https://github.com/alibaba/pouch/pull/1178) ([XSAM](https://github.com/XSAM))  [\\#1200](https://github.com/alibaba/pouch/pull/1200) ([shaloulcy](https://github.com/shaloulcy))  [\\#1189](https://github.com/alibaba/pouch/pull/1189) ([xiechengsheng](https://github.com/xiechengsheng))  [\\#1303](https://github.com/alibaba/pouch/pull/1303) ([chuanchang](https://github.com/chuanchang))  [\\#1248](https://github.com/alibaba/pouch/pull/1248) ([raoqi](https://github.com/raoqi))  [\\#1216](https://github.com/alibaba/pouch/pull/1216) ([shaloulcy](https://github.com/shaloulcy))\n* Fix pouch github address url  [\\#1229](https://github.com/alibaba/pouch/pull/1229) ([u2takey](https://github.com/u2takey))\n* Add markdownlint tool in Dockerfile [\\#1204](https://github.com/alibaba/pouch/pull/1204) ([allencloud](https://github.com/allencloud))\n\n### Kubernetes\n\n* Fix return container `LogPath` in `ContainerStatusResponse` [\\#1401](https://github.com/alibaba/pouch/pull/1401) ([Starnop](https://github.com/Starnop))\n* Fix replace pod default `pause` image with the google released image [\\#1382](https://github.com/alibaba/pouch/pull/1382) ([ZouRui89](https://github.com/ZouRui89))\n* Add support both for CRI v1alpha1 and v1alpha2 version [\\#1359](https://github.com/alibaba/pouch/pull/1359) ([Starnop](https://github.com/Starnop))\n* Add timeout handler for `execSync` in cri part [\\#1318](https://github.com/alibaba/pouch/pull/1318) ([ZouRui89](https://github.com/ZouRui89))\n* Refactor move the `CRI` code out of pouch `mgr` dirctory [\\#1317](https://github.com/alibaba/pouch/pull/1317) ([Starnop](https://github.com/Starnop))\n* Fix disable mux stdout and stderr if backend is not http [\\#1250](https://github.com/alibaba/pouch/pull/1250) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Fix handle container io properly when restart pouchd [\\#1220](https://github.com/alibaba/pouch/pull/1220) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Fix evaluate finish time of container in CRI correctly [\\#1183](https://github.com/alibaba/pouch/pull/1183) ([YaoZengzeng](https://github.com/YaoZengzeng))\n\n### Storage\n\n* Support volume plugin mechanism, now pouch not only supports `local/tmpfs/ceph` volumes, but also support existing mature docker volume drivers [\\#1326](https://github.com/alibaba/pouch/pull/1326) ([shaloulcy](https://github.com/shaloulcy))\n* Fix we should add lock before visit volume boltdb [\\#1286](https://github.com/alibaba/pouch/pull/1286) ([rudyfly](https://github.com/rudyfly))\n* Add pouch `plugin` mechanism, so that we can use existing moby volume and network plugins [\\#1278](https://github.com/alibaba/pouch/pull/1278) ([shaloulcy](https://github.com/shaloulcy))\n* Fix change volume metadata struct for remote storage manager [\\#1271](https://github.com/alibaba/pouch/pull/1271) ([rudyfly](https://github.com/rudyfly))\n* Add `volume-driver-alias` flag to volume manager, we can set alias name for the exist volume drivers [\\#1224](https://github.com/alibaba/pouch/pull/1224) ([rudyfly](https://github.com/rudyfly))\n\n### Network\n\n* Fix endpoints are disappeared when pouchd restart [\\#1312](https://github.com/alibaba/pouch/pull/1312) ([rudyfly](https://github.com/rudyfly))\n* Fix remove all endpoints when execute `network disconnect` command [\\#1284](https://github.com/alibaba/pouch/pull/1284) ([rudyfly](https://github.com/rudyfly))\n* Add `network connect` interface for container [\\#1187](https://github.com/alibaba/pouch/pull/1187) ([rudyfly](https://github.com/rudyfly))\n* Add `network disconnect` interface for container [\\#1172](https://github.com/alibaba/pouch/pull/1172) ([HusterWan](https://github.com/HusterWan))\n\n### Test\n\n* Fix use `busybox:1.25` instead of `busybox:1.28` in `tag` command CLI test [\\#1406](https://github.com/alibaba/pouch/pull/1406) ([fuweid](https://github.com/fuweid))\n* Fix use the stable image ID in test case [\\#1397](https://github.com/alibaba/pouch/pull/1397) ([fuweid](https://github.com/fuweid))\n* Fix make the PullImage test util work [\\#1386](https://github.com/alibaba/pouch/pull/1386) ([fuweid](https://github.com/fuweid))\n* Update split `run` command test file into several files [\\#1385](https://github.com/alibaba/pouch/pull/1385) ([Letty5411](https://github.com/Letty5411))\n* Add test cases for `volume plugin` [\\#1368](https://github.com/alibaba/pouch/pull/1368) ([shaloulcy](https://github.com/shaloulcy))\n* Add CLI test for `pause` command and fix some tiny bugs [\\#1360](https://github.com/alibaba/pouch/pull/1360) ([ZouRui89](https://github.com/ZouRui89))\n* Fix `TestRunWithPidsLimit` test case failed because no pids cgroup support [\\#1353](https://github.com/alibaba/pouch/pull/1353) ([Ace-Tang](https://github.com/Ace-Tang))\n* Enhance CLI related tests [\\#1341](https://github.com/alibaba/pouch/pull/1341) ([Letty5411](https://github.com/Letty5411))\n* Fix `ps` command CLI tests failed [\\#1334](https://github.com/alibaba/pouch/pull/1334) ([HusterWan](https://github.com/HusterWan))\n* Fix missing removal of container when test suit end [\\#1327](https://github.com/alibaba/pouch/pull/1327) ([allencloud](https://github.com/allencloud))\n* Fix using existing image and fix shell format error [\\#1313](https://github.com/alibaba/pouch/pull/1313) ([Letty5411](https://github.com/Letty5411))\n* Add `-race` flag to `go test` command to detect race [\\#1294](https://github.com/alibaba/pouch/pull/1294) ([allencloud](https://github.com/allencloud))\n* Enhance making test more robust [\\#1279](https://github.com/alibaba/pouch/pull/1279) ([Letty5411](https://github.com/Letty5411))\n* Fix `restart` the `paused` status container ci failed  [\\#1272](https://github.com/alibaba/pouch/pull/1272) ([shaloulcy](https://github.com/shaloulcy))\n* Fix `run` container exit because of no using long run command caused ci failed [\\#1214](https://github.com/alibaba/pouch/pull/1214) ([Ace-Tang](https://github.com/Ace-Tang))\n* Trick skip always failed tests [\\#1195](https://github.com/alibaba/pouch/pull/1195) ([Ace-Tang](https://github.com/Ace-Tang))\n\n### New Contributors\n\nHere is the list of new contributors:\n\n* [rhinoceros](https://github.com/rhinoceros)\n* [soarpenguin](https://github.com/soarpenguin)\n* [chuanchang](https://github.com/chuanchang)\n* [raoqi](https://github.com/raoqi)\n* [u2takey](https://github.com/u2takey)\n* [shaloulcy](https://github.com/shaloulcy)\n* [xiechengsheng](https://github.com/xiechengsheng)\n\n## 0.4.0 (2018-04-19)\n\n### Remote API && Client\n\n* Add `lxcfs` enabled info to `info` command [\\#1152](https://github.com/alibaba/pouch/pull/1152) ([zhuangqh](https://github.com/zhuangqh))\n* Add `snapshotter` info to pouch `inspect` command [\\#1130](https://github.com/alibaba/pouch/pull/1130) ([HusterWan](https://github.com/HusterWan))\n* Add `--rm` flag to pouch `run` command [\\#1125](https://github.com/alibaba/pouch/pull/1125) ([Ace-Tang](https://github.com/Ace-Tang))\n* Fix make inspect output to an array [\\#1119](https://github.com/alibaba/pouch/pull/1119) ([faycheng](https://github.com/faycheng))\n* Add image proxy info to pouch `info` command [\\#1102](https://github.com/alibaba/pouch/pull/1102) ([ZouRui89](https://github.com/ZouRui89))\n* Add `--volumes-from` flags to pouch `create` command [\\#1131](https://github.com/alibaba/pouch/pull/1131) ([rudyfly](https://github.com/rudyfly))\n* Add `--cpu-period` and `--cpu-quota` to pouch `create` command [\\#1067](https://github.com/alibaba/pouch/pull/1067) ([allencloud](https://github.com/allencloud))\n* Refactor move parameters parse and validate part into `opts` package [\\#1041](https://github.com/alibaba/pouch/pull/1041) ([HusterWan](https://github.com/HusterWan))\n* Fix `image inspect` and `network inspect` command docs [\\#1053](https://github.com/alibaba/pouch/pull/1053) ([HusterWan](https://github.com/HusterWan))\n* Fix restful api url should support both with or without version info [\\#1035](https://github.com/alibaba/pouch/pull/1035) ([HusterWan](https://github.com/HusterWan))\n* Fix client login logic [\\#1044](https://github.com/alibaba/pouch/pull/1044) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add `--annotation` to pouch `create` command [\\#1046](https://github.com/alibaba/pouch/pull/1046) ([Ace-Tang](https://github.com/Ace-Tang))\n* Fix make json ID be Id to be compatible with Moby API [\\#1066](https://github.com/alibaba/pouch/pull/1066) ([allencloud](https://github.com/allencloud))\n* Fix make pouch `create` output to an array [\\#1034](https://github.com/alibaba/pouch/pull/1034) ([ZouRui89](https://github.com/ZouRui89))\n* Add more daemon option in `info` API [\\#1122](https://github.com/alibaba/pouch/pull/1122) ([allencloud](https://github.com/allencloud))\n* Add more informations in `volume list` result [\\#1028](https://github.com/alibaba/pouch/pull/1028) ([rudyfly](https://github.com/rudyfly))\n* Fix modify `volume inspect` docs [\\#1029](https://github.com/alibaba/pouch/pull/1029) ([rudyfly](https://github.com/rudyfly))\n\n### Runtime\n\n* Fix errors when using `volume-from` creates container[\\#1161](https://github.com/alibaba/pouch/pull/1161) ([rudyfly](https://github.com/rudyfly))\n* Fix set quota-id without disk-quota [\\#1157](https://github.com/alibaba/pouch/pull/1157) ([rudyfly](https://github.com/rudyfly))\n* Upgrade `containerd` vendor version to `v1.0.3` [\\#1148](https://github.com/alibaba/pouch/pull/1148) ([fuweid](https://github.com/fuweid))\n* Refactor move `pkg/opts` package to `api/opts` [\\#1147](https://github.com/alibaba/pouch/pull/1147) ([allencloud](https://github.com/allencloud))\n* Add support parsing volumes from docker image [\\#1145](https://github.com/alibaba/pouch/pull/1145) ([rudyfly](https://github.com/rudyfly))\n* Fix code style: we should not define a empty slice with `make` [\\#1142](https://github.com/alibaba/pouch/pull/1142) ([oiooj](https://github.com/oiooj))\n* Fix pouchd panic when meta snapshotter is nil [\\#1140](https://github.com/alibaba/pouch/pull/1140) ([oiooj](https://github.com/oiooj))\n* Fix set diskquota failed without quota id [\\#1136](https://github.com/alibaba/pouch/pull/1136) ([rudyfly](https://github.com/rudyfly))\n* Add node ip and sn into daemon labels [\\#1134](https://github.com/alibaba/pouch/pull/1134) ([allencloud](https://github.com/allencloud))\n* Refactor config file resolve [\\#1132](https://github.com/alibaba/pouch/pull/1132) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add support to gc unused exec processes [\\#1129](https://github.com/alibaba/pouch/pull/1129) ([Ace-Tang](https://github.com/Ace-Tang))\n* Make TLS config params can be setup in the file [\\#1126](https://github.com/alibaba/pouch/pull/1126) ([yyb196](https://github.com/yyb196))\n* Add plugin point before endpoint creating [\\#1124](https://github.com/alibaba/pouch/pull/1124) ([yyb196](https://github.com/yyb196))\n* Fix return err when `ExecContainer` failed [\\#1117](https://github.com/alibaba/pouch/pull/1117) ([oblivionfallout](https://github.com/oblivionfallout))\n* Fix remove ip mask in `Networks.IPAddress` [\\#1116](https://github.com/alibaba/pouch/pull/1116) ([rudyfly](https://github.com/rudyfly))\n* Setup profiler and don't bother to enable debug level log [\\#1111](https://github.com/alibaba/pouch/pull/1111) ([yyb196](https://github.com/yyb196))\n* Fix we should do not append `latest` tag to the image when it already has a tag [\\#1110](https://github.com/alibaba/pouch/pull/1110) ([yyb196](https://github.com/yyb196))\n* Fix make container exit with real exit code [\\#1099](https://github.com/alibaba/pouch/pull/1099) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add more flags in daemon config file [\\#1088](https://github.com/alibaba/pouch/pull/1088) ([Ace-Tang](https://github.com/Ace-Tang))\n* bugfix: fix interface casting error [\\#1085](https://github.com/alibaba/pouch/pull/1085) ([Ace-Tang](https://github.com/Ace-Tang))\n* Fix `gocyclo` issues in go report [\\#1084](https://github.com/alibaba/pouch/pull/1084) ([zhuangqh](https://github.com/zhuangqh))\n* Fix some spell errors [\\#1081](https://github.com/alibaba/pouch/pull/1081) ([dbdd4us](https://github.com/dbdd4us))\n* Add allinone to deploy pouch as available container to kubernetes [\\#1070](https://github.com/alibaba/pouch/pull/1070) ([ZouRui89](https://github.com/ZouRui89))\n* Fix golint not found has exit code 1 [\\#1059](https://github.com/alibaba/pouch/pull/1059) ([sunyuan3](https://github.com/sunyuan3))\n* Add `diskquota` support regular expression [\\#1057](https://github.com/alibaba/pouch/pull/1057) ([rudyfly](https://github.com/rudyfly))\n* Fix sync abnormal containers status when start pouchd [\\#1056](https://github.com/alibaba/pouch/pull/1056) ([HusterWan](https://github.com/HusterWan))\n* Remove duplicate error messages in network package [\\#1048](https://github.com/alibaba/pouch/pull/1048) ([faycheng](https://github.com/faycheng))\n* Fix setup hook in advance to avoid panic if no prestart hook setup before [\\#1038](https://github.com/alibaba/pouch/pull/1038) ([yyb196](https://github.com/yyb196))\n* Enable setup common name whitelist for tls checking [\\#1036](https://github.com/alibaba/pouch/pull/1036) ([yyb196](https://github.com/yyb196))\n\n### Network\n\n* Refactor manage `libnetwork` by subtree instead of submodule [\\#1135](https://github.com/alibaba/pouch/pull/1135) ([rudyfly](https://github.com/rudyfly))\n* Fix make pouch network non-existent return exit code 1 [\\#1089](https://github.com/alibaba/pouch/pull/1089) ([allencloud](https://github.com/allencloud))\n* Fix delete endpoint after failing to create endpoint [\\#1069](https://github.com/alibaba/pouch/pull/1069) ([faycheng](https://github.com/faycheng))\n* Add support for inspecting network by ID [\\#1040](https://github.com/alibaba/pouch/pull/1040) ([faycheng](https://github.com/faycheng))\n\n### Kubernetes\n\n* Fix make infra image configurable [\\#1159](https://github.com/alibaba/pouch/pull/1159) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Add `--enable-cri` flag to `pouchd` to specify whether enable CRI [\\#1118](https://github.com/alibaba/pouch/pull/1118) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Fix we should get image ID from `containerd` [\\#1112](https://github.com/alibaba/pouch/pull/1112) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Add image auth for cri manager [\\#1097](https://github.com/alibaba/pouch/pull/1097) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Add selinux support for cri manager [\\#1092](https://github.com/alibaba/pouch/pull/1092) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Fix loop `InspectExec` to finish in `ExecSync` and `Exec` operations [\\#1086](https://github.com/alibaba/pouch/pull/1086) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Fix for `privileged` container, make `dir` prefix with `/sys` ReadWrite [\\#1055](https://github.com/alibaba/pouch/pull/1055) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Fix distinguish `cmd` and `entrypoint` better [\\#1045](https://github.com/alibaba/pouch/pull/1045) ([YaoZengzeng](https://github.com/YaoZengzeng))\n* Fix specify both `cmd` and `args` when create a container [\\#1027](https://github.com/alibaba/pouch/pull/1027) ([YaoZengzeng](https://github.com/YaoZengzeng))\n\n### Test\n\n* Add `lxcfs` binary check [\\#1127](https://github.com/alibaba/pouch/pull/1127) ([Letty5411](https://github.com/Letty5411))\n* Add `tls` test [\\#1115](https://github.com/alibaba/pouch/pull/1115) ([Letty5411](https://github.com/Letty5411))\n* Add mock test for `create` client [\\#1106](https://github.com/alibaba/pouch/pull/1106) ([Dewey-Ding](https://github.com/Dewey-Ding))\n* Separate integration test and cri test in travisCI [\\#1098](https://github.com/alibaba/pouch/pull/1098) ([Letty5411](https://github.com/Letty5411))\n* Add mock test for `top` client [\\#1093](https://github.com/alibaba/pouch/pull/1093) ([zhuangqh](https://github.com/zhuangqh))\n* Add mock test for `resize` and `restart` client [\\#1090](https://github.com/alibaba/pouch/pull/1090) ([Dewey-Ding](https://github.com/Dewey-Ding))\n* Add tests for `label` and config file in `pouchd` [\\#1087](https://github.com/alibaba/pouch/pull/1087) ([Letty5411](https://github.com/Letty5411))\n* Refine `pouchd` test framework [\\#1078](https://github.com/alibaba/pouch/pull/1078) ([Letty5411](https://github.com/Letty5411))\n* Add mock test `pause` and `unpause` client [\\#1074](https://github.com/alibaba/pouch/pull/1074) ([Dewey-Ding](https://github.com/Dewey-Ding))\n* Add mock test for `remove` and `stop` client [\\#1064](https://github.com/alibaba/pouch/pull/1064) ([Dewey-Ding](https://github.com/Dewey-Ding))\n* Modify hardcode testcase for device `/dev/sda` [\\#1054](https://github.com/alibaba/pouch/pull/1054) ([Ace-Tang](https://github.com/Ace-Tang))\n* Add mock test for `list` client [\\#1049](https://github.com/alibaba/pouch/pull/1049) ([Dewey-Ding](https://github.com/Dewey-Ding))\n* Add mock test for `get` client [\\#1037](https://github.com/alibaba/pouch/pull/1037) ([Dewey-Ding](https://github.com/Dewey-Ding))\n* Add mock test for `image` operations on client side [\\#1032](https://github.com/alibaba/pouch/pull/1032) ([ZouRui89](https://github.com/ZouRui89))\n* Add mock test for `volume` operations on client side [\\#1026](https://github.com/alibaba/pouch/pull/1026) ([ZouRui89](https://github.com/ZouRui89))\n* Add mock test for `update` client [\\#1024](https://github.com/alibaba/pouch/pull/1024) ([Dewey-Ding](https://github.com/Dewey-Ding))\n* Add unit test in circleci [\\#1039](https://github.com/alibaba/pouch/pull/1039) ([ZouRui89](https://github.com/ZouRui89))\n* Add circleci parallel testing to split unit-test and code-check [\\#1043](https://github.com/alibaba/pouch/pull/1043) ([allencloud](https://github.com/allencloud))\n* Fix logic error in `volume create` mock test [\\#1033](https://github.com/alibaba/pouch/pull/1033) ([ZouRui89](https://github.com/ZouRui89))\n* Add restricts in codecov.yml to ignore files [\\#1050](https://github.com/alibaba/pouch/pull/1050) ([allencloud](https://github.com/allencloud))\n\n### New Contributors\n\nHere is the list of new contributors:\n\n* [Dewey-Ding](https://github.com/Dewey-Ding)\n* [oiooj](https://github.com/oiooj)\n* [dbdd4us](https://github.com/dbdd4us)\n* [zhuangqh](https://github.com/zhuangqh)\n* [oblivionfallout](https://github.com/oblivionfallout)\n\n## 0.3.0 (2018-03-30)\n\n**IMPORTANT**: Pouch 0.3.0 has met almost all your basic needs for kubernetes:\n\n1. Sandbox/Container lifecycle management\n2. Image management\n3. Network management with CNI\n4. Container streaming: exec/attach/portforward\n5. Container logging\n6. Security Context: RunAsUser, Apparmor,Seccomp,Sysctl\n7. Validation test of cri-tools: 51/55 Pass\n\n**IMPORTANT**:\nKubernetes 1.10 was released recently and the CRI of it has updated from v1alpha1 to v1alpha2.\nPouch will first try to fully support CRI v1alpha1 and then CRI v1alpha2.\nSo kubernetes 1.9.X is recommended now\n\n### Remote API && Client\n\n* `inspect` now support input multi items [\\#989](https://github.com/alibaba/pouch/pull/989)\n* Refactor make route code much more simplified [\\#988](https://github.com/alibaba/pouch/pull/988)\n* Fix `restart` router miss versionMatcher [\\#986](https://github.com/alibaba/pouch/pull/986)\n* Add kernel value in `pouch version` command [\\#942](https://github.com/alibaba/pouch/pull/942)\n* Make `pouch info` print more pretty [\\#941](https://github.com/alibaba/pouch/pull/941)\n* Add `no-trunc` flag to `pouch ps` [\\#909](https://github.com/alibaba/pouch/pull/909)\n* New `restart` command that allow restarting an running container [\\#890](https://github.com/alibaba/pouch/pull/890)\n* New `upgrade` command that allow upgrading image and resources of a container [\\#852](https://github.com/alibaba/pouch/pull/852)\n* New `top` command that allow showing processes informations in container [\\#878](https://github.com/alibaba/pouch/pull/878)\n* Add `--format` flag to `pouch image inspect` and `pouch network inspect` commands [\\#871](https://github.com/alibaba/pouch/pull/871)\n* New `pouch info` command to print all informations about th pouch daemon [\\#859](https://github.com/alibaba/pouch/pull/859)\n* New `pouch logs` command that allow printing logs of container [\\#886](https://github.com/alibaba/pouch/pull/886)\n* Using the default registry when execute `logout`command if not specified one [\\#902](https://github.com/alibaba/pouch/pull/902)\n* New `resize` command that allow changing the height and width of TTY of an running container [\\#879](https://github.com/alibaba/pouch/pull/879)\n\n### Pouch Daemon\n\n* New `update` API that allow updating `labels` and `image-proxy` parameters of pouch daemon [\\#987](https://github.com/alibaba/pouch/pull/987)\n* Add `--label` flag to `pouchd` [\\#982](https://github.com/alibaba/pouch/pull/982)\n\n### Runtime\n\n* Change container parameter's json name from `ID` to `Id` to be compatible with Moby API [\\#1002](https://github.com/alibaba/pouch/pull/1002)\n* Fix errors checked by markdownlint [\\#974](https://github.com/alibaba/pouch/pull/974)\n* Refactor the pouch ctrd layer client interface [\\#971](https://github.com/alibaba/pouch/pull/971)\n* Refactor the `pkg` package that let's client package independent to other inner pkgs [\\#962](https://github.com/alibaba/pouch/pull/962)\n* Add circleci to pouch to validate markdown files [\\#961](https://github.com/alibaba/pouch/pull/961)\n* Fix log initialization of `libnetwork` in pouch [\\#956](https://github.com/alibaba/pouch/pull/956)\n* Fix the import path of package `logrus` [\\#953](https://github.com/alibaba/pouch/pull/953)\n* Fix should checking `kernelVersion.Kernel` not `kernelVersion.Major` when setting disk quota driver [\\#946](https://github.com/alibaba/pouch/pull/946)\n* New `restart` interface that allow restarting an running container [\\#944](https://github.com/alibaba/pouch/pull/944)\n* Refactor modify logic in complement image fullname [\\#940](https://github.com/alibaba/pouch/pull/940)\n* Add `--oom-kill-disable` and `--oom-score-adj` flags to `pouch create` [\\#934](https://github.com/alibaba/pouch/pull/934)\n* New `resize` API that allow changing the height and width of TTY of an running container [\\#931](https://github.com/alibaba/pouch/pull/931)\n* Fix execute `pouch images` command panic when pulling an image failed before [\\#926](https://github.com/alibaba/pouch/pull/926)\n* New `upgrade` API that allow upgrading the image and resource of a container [\\#923](https://github.com/alibaba/pouch/pull/923)\n* New plugin framework to support executing custom codes at plugin points [\\#919](https://github.com/alibaba/pouch/pull/919)\n* Add default registry namespace [\\#911](https://github.com/alibaba/pouch/pull/911)\n* New `top` API that allow showing the processes informations in an running container [\\#900](https://github.com/alibaba/pouch/pull/900)\n* Fix `cgroup-parent` should always be abs [\\#896](https://github.com/alibaba/pouch/pull/896)\n* Refactor set lxcfs service managed by systemd [\\#885](https://github.com/alibaba/pouch/pull/885)\n* Add version information in restful api url [\\#869](https://github.com/alibaba/pouch/pull/869)\n* Add `repoTags` and `repoDigests` in `ImageInfo` struct [\\#721](https://github.com/alibaba/pouch/pull/721)\n\n### Documentation\n\n* Add introduction document to diskquota [\\#972](https://github.com/alibaba/pouch/pull/972)\n* Improve test guidance doc [\\#856](https://github.com/alibaba/pouch/pull/856)\n\n### Storage\n\n* Add `--volume` flag to `pouch create` to support bind mounts for files [\\#937](https://github.com/alibaba/pouch/pull/937)\n* Fix volume can be removed when using by container [\\#888](https://github.com/alibaba/pouch/pull/888)\n* Add disk quota for container's rootfs [\\#876](https://github.com/alibaba/pouch/pull/876)\n\n### Kubernetes\n\n* With this PR, we can get the error informations when stream server handles `exec` or `attach` commands occurred errors [\\#1007](https://github.com/alibaba/pouch/pull/1007)\n* Add websocket support for cri stream server [\\#985](https://github.com/alibaba/pouch/pull/985)\n* Fix handle image format 'namespace/name:tag' correctly [\\#981](https://github.com/alibaba/pouch/pull/981)\n* Fix pull image and get its status with RefDigest [\\#973](https://github.com/alibaba/pouch/pull/973)\n* Store sandbox config informations for cri manager [\\#955](https://github.com/alibaba/pouch/pull/955)\n* Separate stdout & stderr of container io and support host network mode for sandbox [\\#945](https://github.com/alibaba/pouch/pull/945)\n* Implement ReadOnlyRootfs and add `no-new-privileges` support to cri manager [\\#935](https://github.com/alibaba/pouch/pull/935)\n* Add support getting the logs of container to cri manager [\\#928](https://github.com/alibaba/pouch/pull/928)\n* Add support setting pod dns configuration to cri manager [\\#912](https://github.com/alibaba/pouch/pull/912)\n* Wrap cri manager to log every cri operation [\\#899](https://github.com/alibaba/pouch/pull/899)\n* Fix inspect image by image id with prefix [\\#895](https://github.com/alibaba/pouch/pull/895)\n* Implement exec and attach method of stream server [\\#854](https://github.com/alibaba/pouch/pull/854)\n* Add `--group-add` flag to `pouch create` command and supplemental groups for cri manager [\\#753](https://github.com/alibaba/pouch/pull/753)\n\n### Test\n\n* Add mock test for `rename` client [\\#1021](https://github.com/alibaba/pouch/pull/1021)\n* Add mock test for `version` client [\\#1004](https://github.com/alibaba/pouch/pull/1004)\n* Add test cases for `imageCache.get` [\\#979](https://github.com/alibaba/pouch/pull/979)\n* Add mock test for client package [\\#965](https://github.com/alibaba/pouch/pull/965)\n* Add test case for `login/logout` command [\\#908](https://github.com/alibaba/pouch/pull/908)\n* Add related functions for test pouch daemon [\\#884](https://github.com/alibaba/pouch/pull/884)\n* Print error log in CI for debug [\\#883](https://github.com/alibaba/pouch/pull/883)\n\n## 0.2.1 (2018-03-09)\n\n### Network\n\n* Support port mapping and exposed ports in container\n\n### Bugfix\n\n* Fix project quota can't be set on kernel-4.9\n* Fix rich container mode can't find binary in PATH\n\n## 0.2.0 (2018-03-02)\n\n### Runtime\n\n* Add rich container mode for daemon and runc\n* Add support for Intel RDT isolation\n* Support add annotation for oci-specs in daemon\n* Add memory limit options specifically for open source AliOS\n* Add user group support for container\n* Add image pulling proxy for Dragonfly\n* Add sccomp support for container\n* refactor package reference image to cover more scenarios\n* Add privileged mode support for container\n* Add capability support for container\n* Add apparmor support for container\n* Add blkio isolation support for container\n* Add sysctl support for container\n* Add more fields in ImageInfo struct\n* support user setting default registry\n* Add ipc, pid, uts namespace support for container\n\n### Client\n\n* Add login/logout command for registry\n* Add update command for container's resource or restart policy and so on\n* Support context in client side\n* Add volume list command\n\n### Network\n\n* support host/none/container network mode\n\n### Storage\n\n* support diskquota via project quota and group quota only for local volume (container diskquota is in progress)\n\n### Kubernetes(CRI)\n\n* Add CNI framework implementation\n* Add all options of container in CRI manager\n* Using cri-tools to verify every interface implementation of CRI\n\n### Document\n\n* Add document pouch with LXCFS\n* Add document how to install Pouch in Kubernetes cluster\n* Add volume design document\n* Add document pouch with rich container\n\n## 0.1.0 (2018-01-17)\n\nInitial experiemental release for public\n\n* Initial implemention to integrate containerd 1.0 in daemon\n* Hypervisor-based container implementation\n* Achieve container resource view isolation via supporting LXCFS\n* Add API and CLI documentation\n* Add unit test for project\n* Add API and CLI for project\n* Implement basic CRI to support Kubernetes\n* Be consistent with Moby's 1.12.6 API\n* Support basic network management and volume management\n* Make Pouch run as a system service\n* Make Pouch installed on distribution CentOS 7.2 and Ubuntu 16.04\n"
        },
        {
          "name": "CODE_OF_CONDUCT.md",
          "type": "blob",
          "size": 3.1513671875,
          "content": "# Contributor Covenant Code of Conduct\n\n## Our Pledge\n\nIn the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to making participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, gender identity and expression, level of experience, nationality, personal appearance, race, religion, or sexual identity and orientation.\n\n## Our Standards\n\nExamples of behavior that contributes to creating a positive environment include:\n\n* Using welcoming and inclusive language\n* Being respectful of differing viewpoints and experiences\n* Gracefully accepting constructive criticism\n* Focusing on what is best for the community\n* Showing empathy towards other community members\n\nExamples of unacceptable behavior by participants include:\n\n* The use of sexualized language or imagery and unwelcome sexual attention or advances\n* Trolling, insulting/derogatory comments, and personal or political attacks\n* Public or private harassment\n* Publishing others' private information, such as a physical or electronic address, without explicit permission\n* Other conduct which could reasonably be considered inappropriate in a professional setting\n\n## Our Responsibilities\n\nProject maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.\n\nProject maintainers have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any contributor for other behaviors that they deem inappropriate, threatening, offensive, or harmful.\n\n## Scope\n\nThis Code of Conduct applies both within project spaces and in public spaces when an individual is representing the project or its community. Examples of representing a project or community include using an official project e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers.\n\n## Enforcement\n\nInstances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the project team at pouch-dev@list.alibaba-inc.com. The project team will review and investigate all complaints, and will respond in a way that it deems appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately.\n\nProject maintainers who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by other members of the project's leadership.\n\n## Attribution\n\nThis Code of Conduct is adapted from the [Contributor Covenant][homepage], version 1.4, available at [http://contributor-covenant.org/version/1/4][version]\n\n[homepage]: http://contributor-covenant.org\n[version]: http://contributor-covenant.org/version/1/4/\n"
        },
        {
          "name": "CONTRIBUTING.md",
          "type": "blob",
          "size": 11.076171875,
          "content": "# Contributing to PouchContainer\n\nIt is warmly welcomed if you have interest to hack on PouchContainer. First, we encourage this kind of willing very much. And here is a list of contributing guide for you.\n\n## Topics\n\n* [Reporting security issues](#reporting-security-issues)\n* [Reporting general issues](#reporting-general-issues)\n* [Code and doc contribution](#code-and-doc-contribution)\n* [Test case contribution](#test-case-contribution)\n* [Engage to help anything](#engage-to-help-anything)\n\n## Reporting security issues\n\nSecurity issues are always treated seriously. As our usual principle, we discourage anyone to spread security issues. If you find a security issue of PouchContainer, please do not discuss it in public and even do not open a public issue. Instead we encourage you to send us a private email to  [pouch-dev@list.alibaba-inc.com](mailto:pouch-dev@list.alibaba-inc.com) to report this.\n\n## Reporting general issues\n\nTo be honest, we regard every user of PouchContainer as a very kind contributor. After experiencing PouchContainer, you may have some feedback for the project. Then feel free to open an issue via [NEW ISSUE](https://github.com/alibaba/pouch/issues/new).\n\nSince we collaborate project PouchContainer in a distributed way, we appreciate **WELL-WRITTEN**, **DETAILED**, **EXPLICIT** issue reports. To make the communication more efficient, we wish everyone could search if your issue is an existing one in the searching list. If you find it existing, please add your details in comments under the existing issue instead of opening a brand new one.\n\nTo make the issue details as standard as possible, we setup an [ISSUE TEMPLATE](./.github/ISSUE_TEMPLATE.md) for issue reporters. Please **BE SURE** to follow the instructions to fill fields in template.\n\nThere are a lot of cases when you could open an issue:\n\n* bug report\n* feature request\n* performance issues\n* feature proposal\n* feature design\n* help wanted\n* doc incomplete\n* test improvement\n* any questions on project\n* and so on\n\nAlso we must remind that when filling a new issue, please remember to remove the sensitive data from your post. Sensitive data could be password, secret key, network locations, private business data and so on.\n\n## Code and doc contribution\n\nEvery action to make project PouchContainer better is encouraged. On GitHub, every improvement for PouchContainer could be via a PR (short for pull request).\n\n* If you find a typo, try to fix it!\n* If you find a bug, try to fix it!\n* If you find some redundant codes, try to remove them!\n* If you find some test cases missing, try to add them!\n* If you could enhance a feature, please **DO NOT** hesitate!\n* If you find code implicit, try to add comments to make it clear!\n* If you find code ugly, try to refactor that!\n* If you can help to improve documents, it could not be better!\n* If you find document incorrect, just do it and fix that!\n* ...\n\nActually it is impossible to list them completely. Just remember one principle:\n\n> WE ARE LOOKING FORWARD TO ANY PR FROM YOU.\n\nSince you are ready to improve PouchContainer with a PR, we suggest you could take a look at the PR rules here.\n\n* [Workspace Preparation](#workspace-preparation)\n* [Branch Definition](#branch-definition)\n* [Commit Rules](#commit-rules)\n* [PR Description](#pr-description)\n\n### Workspace Preparation\n\nTo put forward a PR, we assume you have registered a GitHub ID. Then you could finish the preparation in the following steps:\n\n1. **FORK** PouchContainer to your repository. To make this work, you just need to click the button Fork in right-left of [alibaba/pouch](https://github.com/alibaba/pouch) main page. Then you will end up with your repository in `https://github.com/<your-username>/pouch`, in which `your-username` is your GitHub username.\n\n1. **CLONE** your own repository to develop locally. Use `git clone https://github.com/<your-username>/pouch.git` to clone repository to your local machine. Then you can create new branches to finish the change you wish to make.\n\n1. **Set Remote** upstream to be `https://github.com/alibaba/pouch.git` using the following two commands:\n\n```\ngit remote add upstream https://github.com/alibaba/pouch.git\ngit remote set-url --push upstream no-pushing\n```\n\nWith this remote setting, you can check your git remote configuration like this:\n\n```\n$ git remote -v\norigin     https://github.com/<your-username>/pouch.git (fetch)\norigin     https://github.com/<your-username>/pouch.git (push)\nupstream   https://github.com/alibaba/pouch.git (fetch)\nupstream   no-pushing (push)\n```\n\nAdding this, we can easily synchronize local branches with upstream branches.\n\n### Branch Definition\n\nRight now we assume every contribution via pull request is for [branch master](https://github.com/alibaba/pouch/tree/master) in PouchContainer. Before contributing, be aware of branch definition would help a lot.\n\nAs a contributor, keep in mind again that every contribution via pull request is for branch master. While in project PouchContainer, there are several other branches, we generally call them rc (release candidate) branches, release branches and backport branches.\n\nBefore officially releasing a version, we will checkout a rc branch. In this branch, we will test more than branch master, and will [cherry-pick](https://git-scm.com/docs/git-cherry-pick) some new severe fix commits to this branch.\n\nWhen officially releasing a version, there will be a release branch before tagging. After tagging, we will delete the release branch.\n\nWhen backporting some fixes to existing released version, we will checkout backport branches. After backporting, the backporting effects will be in PATCH number in MAJOR.MINOR.PATCH of [SemVer](http://semver.org/).\n\n### Commit Rules\n\nActually in PouchContainer, we take three rules serious when committing:\n\n* [Commit Message](#commit-message)\n* [Commit Content](#commit-content)\n* [Sign your work](#sign-your-work)\n\n#### Commit Message\n\nCommit message could help reviewers better understand what is the purpose of submitted PR. It could help accelerate the code review procedure as well. We encourage contributors to use **EXPLICIT** commit message rather than ambiguous message. In general, we advocate the following commit message type:\n\n* docs: xxxx. For example, \"docs: add docs about storage installation\".\n* feature: xxxx.For example, \"feature: make result show in sorted order\".\n* bugfix: xxxx. For example, \"bugfix: fix panic when input nil parameter\".\n* refactor: xxxx. For example, \"refactor: simplify to make codes more readable\".\n* test: xxx. For example, \"test: add unit test case for func InsertIntoArray\".\n* other readable and explicit expression ways.\n\nOn the other side, we discourage contributors from committing message like the following ways:\n\n* ~~fix bug~~\n* ~~update~~\n* ~~add doc~~\n\nIf you get lost, please see [How to Write a Git Commit Message](https://developers.google.com/blockly/guides/modify/contribute/commits) for a start.\n\n#### Commit Content\n\nCommit content represents all content changes included in one commit. We had better include things in one single commit which could support reviewer's complete review without any other commits' help. In another word, contents in one single commit can pass the CI to avoid code mess. In brief, there are two minor rules for us to keep in mind:\n\n* avoid very large change in a commit;\n* complete and reviewable for each commit.\n\nIn addition, in the code change part, we suggest that all contributors should read the [code style of PouchContainer](docs/contributions/code_styles.md).\n\nNo matter commit message, or commit content, we do take more emphasis on code review.\n\n#### Sign your work\n\nThe sign-off is a simple line at the end of the explanation for the patch, which certifies that you wrote it or otherwise have the right to pass it on as an open-source patch.\nThe rules are pretty simple: if you can certify the below (from [developercertificate.org](http://developercertificate.org/)):\n\n```\nDeveloper Certificate of Origin\nVersion 1.1\n\nCopyright (C) 2004, 2006 The Linux Foundation and its contributors.\n660 York Street, Suite 102,\nSan Francisco, CA 94110 USA\n\nEveryone is permitted to copy and distribute verbatim copies of this\nlicense document, but changing it is not allowed.\n\nDeveloper's Certificate of Origin 1.1\n\nBy making a contribution to this project, I certify that:\n\n(a) The contribution was created in whole or in part by me and I\n    have the right to submit it under the open source license\n    indicated in the file; or\n\n(b) The contribution is based upon previous work that, to the best\n    of my knowledge, is covered under an appropriate open source\n    license and I have the right under that license to submit that\n    work with modifications, whether created in whole or in part\n    by me, under the same open source license (unless I am\n    permitted to submit under a different license), as indicated\n    in the file; or\n\n(c) The contribution was provided directly to me by some other\n    person who certified (a), (b) or (c) and I have not modified\n    it.\n\n(d) I understand and agree that this project and the contribution\n    are public and that a record of the contribution (including all\n    personal information I submit with it, including my sign-off) is\n    maintained indefinitely and may be redistributed consistent with\n    this project or the open source license(s) involved.\n```\n\nThen you just add a line to every git commit message:\n\n```\nSigned-off-by: Joe Smith <joe.smith@email.com>\n```\n\nUse your real name (sorry, no pseudonyms or anonymous contributions.)\n\nIf you set your `user.name` and `user.email` git configs, you can sign your commit automatically with `git commit -s`.\n\n### PR Description\n\nPR is the only way to make change to PouchContainer project files. To help reviewers better get your purpose, PR description could not be too detailed. We encourage contributors to follow the [PR template](./.github/PULL_REQUEST_TEMPLATE.md) to finish the pull request.\n\n## Test case contribution\n\nAny test case would be welcomed. Currently, PouchContainer function test cases are high priority.\n\n* For unit test, you need to create a test file ended with `_test.go` in the same directory as dev package.\n* For integration test, you need to add test scrips in `pouch/test/` directory. The test makes use of [package check](https://github.com/go-check/check), a rich testing extension for Go's testing package. Test scripts are named by pouch commands. For example, all PouchContainer help api tests are included in pouch_api_help_test.go and all PouchContainer help command line tests are included in pouch_cli_help_test.go. For more details, please refer to [gocheck document](https://godoc.org/gopkg.in/check.v1).\n\n## Engage to help anything\n\nWe choose GitHub as the primary place for PouchContainer to collaborate. So the latest updates of PouchContainer are always here. Although contributions via PR is an explicit way to help, we still call for any other ways.\n\n* reply to other's issues if you could;\n* help solve other user's problems;\n* help review other's PR design;\n* help review other's codes in PR;\n* discuss about PouchContainer to make things clearer;\n* advocate PouchContainer technology beyond GitHub;\n* write blogs on PouchContainer and so on.\n\nIn a word, **ANY HELP IS CONTRIBUTION.**\n"
        },
        {
          "name": "CONTRIBUTORS",
          "type": "blob",
          "size": 5.275390625,
          "content": "# This file lists all contributors having contributed to this project.\n# For how it is generated, see command \"git log --format='%aN <%aE>' | sort -uf\".\n\n630445639 <630445639@qq.com>\nAce Tang <Ace-Tang@users.noreply.github.com>\nAce-Tang <aceapril@126.com>\nAlertBear <alertbear@163.com>\nAlex Jia <chuanchang.jia@gmail.com>\nAllen Sun <allen.sun@daocloud.io>\nAllen Sun <allensun.shl@alibaba-inc.com>\nAllen Sun <shlallen1990@gmail.com>\nallen.wang <allen.wq@alipay.com>\nbaijia <baijia.wr@antfin.com>\nbtlcmr0702 <btlcmr0702@hotmail.com>\nbvwells <b.v.wells@gmail.com>\nCaspar Zhang <caspar@linux.alibaba.com>\nCe Gao <ce.gao@outlook.com>\nchangyaowei <156511344@qq.com>\nchenzhimin <1141685075@qq.com>\nChuanyun Li <lcy041536@gmail.com>\nCindy <176425810@qq.com>\nCodeJuan <CodeJuan@users.noreply.github.com>\ncodejuan <xh@decbug.com>\nCoordinate36 <2484652469@qq.com>\ncpaasarch <yaofang.zjl@alibaba-inc.com>\ndbdd4us <wangtong2712@gmail.com>\ndevily <86979425@qq.com>\nDewey-Ding <deweyding@gmail.com>\nEileen Teng <lykosteng@gmail.com>\nErhuan <553614753@qq.com>\nEric Li <lcy041536@gmail.com>\nfanglin <fanglin.gu@gmail.com>\nfengzixu <hnustphoenix@gmail.com>\nflyer103 <flyer103@gmail.com>\nFrank Yang <yyb196@gmail.com>\nFrank Zhao <syzhao1988@126.com>\nfrankyang <yyb196@gmail.com>\nFrankzhaopku <syzhao1988@126.com>\nGodweiFighting <1250394994@qq.com>\nGuoliang Wang <iamwgliang@gmail.com>\nHaoran Lu <haoran.lu@daocloud.io>\nhuaihuan.zy <huaihuan.zy@alibaba-inc.com>\nHusterWan <zirenwan@gmail.com>\njahentao <tzhltjh@163.com>\nJerome Tan <DevJerome@iCloud.com>\njerryzhuang <zhuangqhc@gmail.com>\njiapengcs <jiapengkang@gmail.com>\njimin <slievrly@163.com>\njohanzhu <zhubei@MacBook-Pro-62.local>\nJoJo <1043708974@qq.com>\nJoseph Lee <joseph.t.lee@outlook.com>\nJumping Qu <jumping@users.noreply.github.com>\nJunjun Li <junjunli666@gmail.com>\nkaicizhu <kaici.zkc@alibaba-inc.com>\nKevinBetterQ <1093850932@qq.com>\nknight <1004815462@qq.com>\nkun <oiooj@qq.com>\nLang Chi <21860405@zju.edu.cn>\nlauo <244382021@qq.com>\nlauo <forienlauo@qq.com>\nLeno Hou <lenohou@gmail.com>\nletty <learn5411@gmail.com>\nletty <letty.ll@alibaba-inc.com>\nletty.ll <letty.ll@alibaba-inc.com>\nLifubang <lifubang@acmcoder.com>\nluman.qy <luman.qy@cainiao.com>\nmaoyiwei <jsmyw95@qq.com>\nMark Liu <manlge168@gmail.com>\nMarkLux <marlx6590@163.com>\nmathspanda <mathspanda826@gmail.com>\nmengjiahao <691225916@qq.com>\nMichael Wan <zirenwan@gmail.com>\nmozhuli <21621232@zju.edu.cn>\nmx <tiny1990@126.com>\nOliver Frommel <ofr@zetalab.de>\nPenghao Cen <cenph@caicloud.io>\npouchrobot <pouch-dev@list.alibaba-inc.com>\npouch_robot <33292901+pouchrobot@users.noreply.github.com>\nReficul <xuzhenglun@gmail.com>\nrhinoceros.xn <rhinoceros.xn@gmail.com>\nroot <starnop@163.com>\nRudy Zhang <rudyflyzhang@gmail.com>\nRunrioter Wung <runrioter@gmail.com>\nSam Xie <xsambundy@gmail.com>\nscy1993 <21851406@zju.edu.cn>\nSeaRise <846579815@qq.com>\nshaloulcy <lcy041536@gmail.com>\nshanbo.lkw <shanbo.lkw@alibaba-inc.com>\nshenling.yyb <shenling.yyb@alibaba-inc.com>\nSimoncqk <cqk0100@gmail.com>\nSimon_CQK <CQK0100@gmail.com>\nskoo <marckywu@gmail.com>\nskoo87 <marckywu@gmail.com>\nsoarpenguin <soarpenguin@gmail.com>\nStarnop <starnop@163.com>\nsteven <fhtjob@hotmail.com>\nTao Qingyun <845767657@qq.com>\nTardis Xu <xiaoxubeii@gmail.com>\nTim Xu <xiaoxubeii@gmail.com>\nTiramisu 1993 <sabergeass@gmail.com>\nTronegacy <41256009+Tronegacy@users.noreply.github.com>\nu2takey <u2takey@gmail.com>\nunknown <1020216950@qq.com>\nupccup <yaoyunsmile@gmail.com>\nWang Rui <baijia.wr@antfin.com>\nwangcong <king6cong@gmail.com>\nwangforthinker <allen.wq@alipay.com>\nWangrui <baijia.wr@antfin.com>\nWei Fu <fhfuwei@163.com>\nWei Fu <fuweid89@gmail.com>\nWendell Sun <iwendellsun@gmail.com>\nWillSmisi <764947976@qq.com>\nwq2526 <wq2526@126.com>\nwrfly <mr.wrfly@gmail.com>\nXiang Li <xiangli.cs@gmail.com>\nXiangning (Shannon) <31495840+shannonxn@users.noreply.github.com>\nXiao An <hac@zju.edu.cn>\nxiaohuo <xiaohuo200@gmail.com>\nXie.CS <xie1995@whut.edu.cn>\nxiechengsheng <XIE1995@whut.edu.cn>\nXiehengzhong <10927831@qq.com>\nxieyanke <coderinfo@163.com>\nXingyu Chen <wizard_cxy@hotmail.com>\nYang Li <idealhack@gmail.com>\nyanli <liyan@harmonycloud.cn>\nYao Zengzeng <yaozengzeng@zju.edu.cn>\nYaoZengzeng <yaozengzeng@zju.edu.cn>\nYaxiong Zhao <justicezyx@gmail.com>\nyeya24 <yb532204897@gmail.com>\nYuan Sun <yile.sy@alibaba-inc.com>\nyuannauy123 <13673717303@163.com>\nyuchuan <yuchuan.jyc@gmail.com>\nzeppp <30573528+zeppp@users.noreply.github.com>\nzeppp <zc951016@outlook.com>\nzeppp <zeppp1995@gmail.com>\nZeroMagic <anthonyliu65535@gmail.com>\nZeroMagic <anthonyliu@zju.edu.cn>\nZhanchun Zhang <zzchun@zju.edu.cn>\nZhang Min <rudyflyzhang@gmail.com>\nZhang Zhanchun <zzchun@zju.edu.cn>\nzhangyue <zy675793960@yeah.net>\nzheng chen <21751032@zju.edu.cn>\nzheng chen <30573528+zeppp@users.noreply.github.com>\nzhijin <zhijin.zqh@alibaba-inc.com>\nzhuangqh <zhuangqhc@163.com>\nzhuangqh <zhuangqhc@gmail.com>\nzhubingbing <1392607554@qq.com>\nzhubingbing <zhu.bingbing@99cloud.net>\nzhubingbing <zhubingbing@zhubingbing.local>\nziren.wzr <ziren.wzr@alibaba-inc.com>\nZJ_Lavender <ZJLavender@users.noreply.github.com>\nZou Rui <21751189@zju.edu.cn>\nZouRui89 <32304680+ZouRui89@users.noreply.github.com>\nä¸‡ä»”ä» <wanziren@meituan.com>\nå®‡æ…• <xingyu.chenxingyu@alibaba-inc.com>\nçŸ¥è°¨ <zhijin.zqh@alibaba-inc.com>\nç¨‹é£ž <fay.cheng.cn@gmail.com>\nè°¢æ’å¿ @è¿ç»´å°ç›†å‹ <10927831@qq.com>\nè°¢çƒŸå®¢ <CoderInfo@163.com>\né˜‘é£Ž <zaiyu.pzy@alibaba-inc.com>\n"
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 1.00390625,
          "content": "FROM ubuntu:16.04\n\n# install wget to download golang source code\n# install git\nRUN apt-get update \\\n    && apt-get install -y \\\n    wget \\ \n    git \\\n    make \\\n    gcc \\\n    vim \\\n    tree \\\n    && apt-get clean\n\n# set go version this image use\nENV GO_VERSION=1.12.6\nENV ARCH=amd64\n\n# install golang which version is GO_VERSION\nRUN wget --quiet https://storage.googleapis.com/golang/go${GO_VERSION}.linux-${ARCH}.tar.gz \\\n    && tar -C /usr/local -xzf go${GO_VERSION}.linux-${ARCH}.tar.gz \\\n    && rm go${GO_VERSION}.linux-${ARCH}.tar.gz\n\n# create GOPATH\nRUN mkdir /go\nENV GOPATH=/go\n\n# set go binary path to local $PATH\n# go binary path is /usr/local/go/bin\nENV PATH $GOPATH/bin:/usr/local/go/bin:$PATH\n\nCOPY . /go/src/github.com/alibaba/pouch\n\nWORKDIR /go/src/github.com/alibaba/pouch\n\n# The environment is setup, when run what you need, just setup the CMD when `pouch run`\n# For example, this Dockerfile will build an image named `pouch-image`.\n# When running unit test, just execute `pouch run pouch-image make unit-test`.\n"
        },
        {
          "name": "Dockerfile.amd64.cross",
          "type": "blob",
          "size": 0.39453125,
          "content": "FROM golang:1.10.4-stretch\n\nRUN apt-get update && apt-get install -y \\\n    vim \\\n    git \\\n    build-essential \\\n    curl \\\n    automake \\\n    libtool \\\n    help2man \\\n    libseccomp2 \\\n    libseccomp-dev \\\n    libfuse-dev \\\n    libpam-dev \\\n    lxcfs \\\n    btrfs-progs \\\n    --no-install-recommends \\\n    && apt-get clean\n\nADD . /go/src/github.com/alibaba/pouch\nWORKDIR /go/src/github.com/alibaba/pouch\n"
        },
        {
          "name": "Dockerfile.arm64.cross",
          "type": "blob",
          "size": 0.48046875,
          "content": "FROM golang:1.10.4-stretch\n\nRUN dpkg --add-architecture arm64 \\\n    && apt-get update && apt-get install -y \\\n    vim \\\n    git \\\n    curl \\\n    automake \\\n    libtool \\\n    help2man \\\n    libseccomp2 \\\n    libseccomp-dev \\\n    crossbuild-essential-arm64 \\\n    libseccomp-dev:arm64\\\n    libfuse-dev:arm64 \\\n    libpam-dev:arm64 \\\n    lxcfs \\\n    btrfs-progs \\\n    --no-install-recommends \\\n    && apt-get clean\n\nADD . /go/src/github.com/alibaba/pouch\nWORKDIR /go/src/github.com/alibaba/pouch\n"
        },
        {
          "name": "Dockerfile.ppc64le.cross",
          "type": "blob",
          "size": 0.490234375,
          "content": "FROM golang:1.10.4-stretch\n\nRUN dpkg --add-architecture ppc64el \\\n    && apt-get update && apt-get install -y \\\n    vim \\\n    git \\\n    curl \\\n    automake \\\n    libtool \\\n    help2man \\\n    libseccomp2 \\\n    libseccomp-dev \\\n    crossbuild-essential-ppc64el \\\n    libseccomp-dev:ppc64el\\\n    libfuse-dev:ppc64el \\\n    libpam-dev:ppc64el \\\n    lxcfs \\\n    btrfs-progs \\\n    --no-install-recommends \\\n    && apt-get clean\n\nADD . /go/src/github.com/alibaba/pouch\nWORKDIR /go/src/github.com/alibaba/pouch\n"
        },
        {
          "name": "FAQ.md",
          "type": "blob",
          "size": 8.763671875,
          "content": "# Frequently Asked Questions\n\n## What is PouchContainer project\n\nPouchContainer is a tool providing container services for developers and operators. It helps to build a successful work flow for IT engineering teams. PouchContainer also accelerates DevOps innovations for enterprises.\n\nFor developers, PouchContainer provides a standard way to package their applications. With PouchContainer, developers can pack application with little effort, and run it everywhere. The standardized environment provided by PouchContainer makes it easier to run Continuous Integration, and improves the efficiency of Continuous Delivery.\n\nFor operators, PouchContainer enables automation, and largely reduces manual operations. With PouchContainer, operators no longer worry about the heterogeneous machine architecture and environments. PouchContainer enables them to focus more on application operation.\n\nFor data center owners, PouchContainer is the best choice you ever have. Compared to VM technology, PouchContainer helps increase the resource utilization with the similar level of isolation.\n\n## Why is it named PouchContainer\n\nPouchContainer refers to some kinds of small bags. One kind is brood pouch which is used to protect very young life. This is a metaphor that Software PouchContainer has its responsibility to take care of applications very closely. In another word, application is the keyword in PouchContainer's world.\n\n## What is the history of PouchContainer\n\nOriginally in 2011, PouchContainer is a pure container service in Alibaba. It is used to serve millions of trade business of Taobao. At that time, PouchContainer is based on a technology named by [LXC](https://en.wikipedia.org/wiki/LXC).\n\nWith the evolution of container technology in industry, [Docker](https://www.docker.com/) technology comes up and becomes popular with its innovative layered image technology. In 2015, PouchContainer introduces docker's images technology to its own architecture to make itself much stronger.\n\nAs more and more scenes experience, PouchContainer gets lots of polishes and definitely turns production-ready. Currently it supports most of the running of business in Alibaba.\n\n## What is the role of PouchContainer in container ecosystem\n\nMaybe many people would say that container ecosystem has been very mature. What is the role of PouchContainer?\n\nFirst, we admit there are so many software in container ecosystem. However, according to container technology experience in Alibaba, current ecosystem is good, but can be better, especially on the attitude towards application as container engine. So PouchContainer is a lighter and more useful container engine in ecosystem.\n\nIn the underlying support of container runtime, PouchContainer takes such opinion that lighter VM based on hypervisor is as important as container based on kernel support, such as cgroup and namespace. We can say container engine part of PouchContainer is very pure. More responsibility on container orchestration relies on upper orchestration technologies, like [Kubernetes](https://github.com/kubernetes/kubernetes), [Mesos](https://github.com/apache/mesos).\n\n## What is difference between PouchContainer and Docker\n\nPouchContainer and Docker are both excellent container solution for users. They do similar things if comparing them at a glance. But more specifically, they have different emphasize on each one's target. PouchContainer takes more emphasis on application experience, while Docker advocates \"one process one container\" a lot. PouchContainer cannot ignore isolation threat of container technology in some particular scenes, while Docker relies on kernel to achieve isolation heavily. PouchContainer brings an open attitude for the surrounding ecosystem, while docker also works on this but maybe not so much.\n\nHere we list some additional features of PouchContainer:\n\n* rich container: It means that there is not only one application process in container any more. Each container has its init process, and other system services on premise according to user's need.\n* strong isolation: PouchContainer can create a VM with hypervisor technology via [runV](https://github.com/hyperhq/runv) and [clearcontainer](https://github.com/clearcontainers/runtime)\n* high kernel compatibility: PouchContainer has a wide range of kernel version support. It is a long road for industry to upgrade kernel version to 3.10+. PouchContainer could help legacy kernel world to enjoy the fresh container technology.\n* P2P image distribution: In a very large datacenter, image distribution is heavy load for network. PouchContainer can take advantage of P2P image distribution solutions to improve this.\n\n## What is the difference between PouchContainer and Kubernetes\n\nKubernetes is an open source project for managing containerized applications across multiple hosts, providing basic mechanisms for deployment, maintenance, and scaling of applications. While PouchContainer mainly focuses on container management with a rich container runtime diversity. For clearer relationship between PouchContainer and Kubernetes, you can refer to [Ecosystem Architecture](docs/architecture.md#ecosystem-architecture).\n\nIf you are choosing overall container solution for a 100+ nodes cluster wide scenario, along with application maintenance friendly with less effort, Kubernetes is one which you can choose. If you wish to harden you container's running, pack your application efficiently and standardize your heterogeneous infrastructure with a unified operation experience, PouchContainer is what you want.\n\nWhat is more, in data center's architecture, Kubernetes and PouchContainer locate in different layers. We can say that Kubernetes is in the upper layer towards PouchContainer. Actually we can combine Kubernetes and PouchContainer in a very efficient way. PouchContainer takes a role of runtime solution, and Kubernetes plays a role of orchestration. PouchContainer takes over fine-grained resource from infrastructure, like CPU, memory, network, disk and so on. Then it provides these resource metrics to upper Kubernetes for scheduling usage. When Kubernetes runs to meet application's maintenance demand, it can pass the request down to PouchContainer to provide secure and isolated container carriers for applications.\n\n## What is PouchContainer's rich container\n\nRich container is a very useful container mode when containerizing applications. This mode helps technical staff to complete packaging fat applications almost with no effort. It provides efficient ways to equip more basic software or system services except for target application in a single container . Then applications in containers could be running as smoothly as usual in VM or physical machine. This is a more generalized application-centric mode. This mode brings no invasiveness at all to both developers and operators. Especially for operators, they could have abilities to maintain applications in container with all essential tools or service processes they may need as usual.\n\nRich container mode is not the default mode PouchContainer provides. It is an additional mode PouchContainer brings to extend users' container experience. Users can still manage ordinary containers by switching rich container flag off. For more info, please refer to [rich container](./docs/features/pouch_with_rich_container.md).\n\n## What is relationship between containerd and PouchContainer\n\nTo be added.\n\n## What is the image storage driver PouchContainer uses\n\nPouchContainer uses overlay2 as its default image storage driver. To be more detailed, containerd 1.0.0+ begins to make use of overlay2 to store images. While currently containerd is a base component in PouchContainer. For Linux mainline kernel, only kernel version 4.0+ supports overlay2. So, in theory, PouchContainer can only run on Linux distribution which are based on kernel 4.0+. However, RedHat series, like CentOS 7.2+ and so on, supports overlay2 stably since kernel version 3.10.327. For more information on RedHat, please refer to [Red Hat Enterprise Linux Release Dates](https://access.redhat.com/articles/3078#RHEL7).\n\n## Does PouchContainer support Kubernetes\n\nYes, PouchContainer has already implemented all the CRI(container runtime interface). You can use PouchContainer under Kubernetes out of box. For more details, please refer to [Kubernetes](./docs/kubernetes).\n\n## Does PouchContainer support Mesos/DCOS\n\nTo be added.\n\n## What is version rule of PouchContainer\n\nWe set the version rule of PouchContainer on the basis of [SemVer](http://semver.org/). Briefly speaking, we follow version number of MAJOR.MINOR.PATCH, such as 0.2.1, 1.1.3. For more details, please refer to [SemVer](http://semver.org/).\n\n## What is the roadmap of PouchContainer\n\nSee [ROADMAP.md](./ROADMAP.md)\n\n## How to contribute to PouchContainer\n\nIt is warmly welcomed if you have interest to contribute to PouchContainer.\n\nMore details, please refer to [CONTRIBUTION.md](./CONTRIBUTING.md)\n"
        },
        {
          "name": "INSTALLATION.md",
          "type": "blob",
          "size": 12.001953125,
          "content": "# Quick-Start\n\nTwo quick-starts are provided, one for end-users, the other one for developers.\n\nAs an end user who wish to use PouchContainer, please read [End User Quick-Start](#end-user-quick-start) to install and explore PouchContainer.\n\nAs a developer who wish to hack on PouchContainer, please read [Developer Quick-Start](#developer-quick-start) to start hacking and get involved in the project!\n\n## End User Quick-Start\n\nYou can install PouchContainer automatically on your machine with very few steps. Currently we support the following Linux Distributions: Alibaba Cloud Linux 2, Ubuntu and CentOS.\n\n### Alibaba Cloud Linux 2\n\n**1. Install PouchContainer**\n\nThere is an official PouchContainer build in Alibaba Cloud Linux 2 (a.k.a. Aliyun Linux 2) Yum repo, you should be able to install it via Yum tool without adding any extra repo files explicitly. Note that Alibaba Cloud Linux 1 (Aliyun Linux 17.01) is not supported for now.\n\nIf you are an Alibaba Cloud Linux 2 user, simply run the following command to install the latest version of PouchContainer:\n\n``` bash\nsudo yum install -y pouch\n```\n\n**2. Start PouchContainer**\n\n``` bash\nsudo systemctl start pouch\n```\n\nAfterwards, you can pull an image and run PouchContainer containers.\n\n### Ubuntu\n\nTo install PouchContainer, you need a maintained version of Ubuntu 16.04 (Xenial LTS). Archived versions aren't supported or tested.\n\nPouchContainer is conflict with Docker, so you must uninstall Docker before installing PouchContainer.\n\n**Prerequisites**\n\nPouchContainer supports LXCFS to provide strong isolation, so you should install LXCFS firstly. By default, LXCFS is enabled.\n\n``` bash\nsudo apt-get install lxcfs\n```\n\nInstall packages to allow 'apt' to use a repository over HTTPS:\n\n``` bash\nsudo apt-get install curl apt-transport-https ca-certificates software-properties-common\n```\n\n**1. Add PouchContainer's official GPG key**\n\n``` bash\ncurl -fsSL https://mirrors.aliyun.com/opsx/pouch/linux/debian.orig/opsx@service.alibaba.com.gpg.key | sudo apt-key add -\n```\n\nVerify that you now have the key with the fingerprint `F443 EDD0 4A58 7E8B F645  9C40 CF68 F84A BE2F 475F`, by searching for the last 8 characters of the fingerprint.\n\n``` bash\n$ apt-key fingerprint BE2F475F\npub   4096R/BE2F475F 2018-02-28\n      Key fingerprint = F443 EDD0 4A58 7E8B F645  9C40 CF68 F84A BE2F 475F\nuid                  opsx-admin <opsx@service.alibaba.com>\n```\n\n**2. Set up the PouchContainer repository**\n\nBefore you install PouchContainer for the first time on a new host machine, you need to set up the PouchContainer repository. We enabled `stable` repository by default, you always need the `stable` repository. To add the `test` repository, add the word `test` after the word `stable` in the command line below. Afterward, you can install and update PouchContainer from the repository.\n\n``` bash\nsudo add-apt-repository \"deb https://mirrors.aliyun.com/opsx/pouch/linux/debian.orig/ pouch stable\"\n```\n\n**3. Install PouchContainer**\n\nInstall the latest version of PouchContainer.\n\n``` bash\n# update the apt package index\nsudo apt-get update\nsudo apt-get install pouch\n```\n\nAfter installing PouchContainer, the `pouch` group is created, but no users are added to the group.\n\n**4. Start PouchContainer**\n\n``` bash\nsudo service pouch start\n```\n\nAfterwards, you can pull an image and run PouchContainer containers.\n\n### CentOS\n\nTo install PouchContainer, you need a maintained version of CentOS 7. Archived versions aren't supported or tested.\n\nWe have put rpm package to Aliyun mirrors, you can install PouchContainer using PouchContainer repository. If you install PouchContainer for the first on a new host machine, you need to set up the PouchContainer repository. Then, you can install and update PouchContainer from repository.\n\n**1.Install yum-utils**\n\nInstall required packages. yum-utils provides the yum-config-manager utility.\n\n``` bash\nsudo yum install -y yum-utils\n```\n\n**2. Set up the PouchContainer repository**\n\nUse the following command to add PouchContainer repository.\n\n``` bash\nsudo yum-config-manager --add-repo https://mirrors.aliyun.com/opsx/opsx-centos7.repo\nsudo yum update\n```\n\nNote: The above command set up the `stable` repository, you can enable `test` repository by the following command.\n\n``` bash\nsudo yum-config-manager --enable pouch-test\n```\n\nYou can disable the `test` repository by running the `yum-config-manager` command with the `--disable` flag. To re-enable it, use the `--enable` flag. The following command disables the test repository.\n\n``` bash\nsudo yum-config-manager --disable pouch-test\n```\n\n**3. Install PouchContainer**\n\nRun the following command to install the latest version of PouchContainer. If it's the first time to install PouchContainer on your host, you will be prompted to accept the GPG key, and the key's fingerprint will be shown.\n\n``` bash\nsudo yum install pouch\n```\n\nAfter installing PouchContainer, the `pouch` group is created, but no users are added to the group.\n\n**4. Start PouchContainer**\n\n``` bash\nsudo systemctl start pouch\n```\n\nAfterwards, you can pull an image and run PouchContainer containers.\n\n## Run pouch command with non-root users\n\nTo enable users other than root can run pouch command directly without `sudo`, pouchd creates a unix socket owned by pouch group. Users just need to have pouch group on the machine and add user to pouch group.\n\n**1. create the pouch group**\n\nIf you want the unix socket to be owned by pouch group, make sure it exists or you need to create it.\n\n```bash\nsudo groupadd pouch\n```\n\n**2. start pouchd**\n\n```bash\nsudo service pouch restart\n```\n\n**3. add user to group**\n\nAdd user who wants to have access to the pouch group.\n\n```bash\nsudo gpasswd -a $USER pouch\n```\n\nRemind that you should relogin to make /etc/group take effect, check it by typing groups to see if your shell gets pouch group.\n\n## Run pouch command with auto-completion\n\nPouch provides a bash completion file locate at `contrib/completion/bash/pouch`, place this file under `/usr/share/bash-completion/completions`. Source it to make it take effect, then you can enjoy pouch/pouchd commands completion.\n\n```bash\ncp contrib/completion/bash/pouch /usr/share/bash-completion/completions\nsource /usr/share/bash-completion/completions/pouch\n```\n\n## Uninstall pouch\n\nOn Ubuntu\n\n``` bash\nsudo apt-get purge pouch\n```\n\nOn CentOS\n\n``` bash\nsudo yum remove pouch\n```\n\nAfter running the `remove` command, images, containers, volumes, or customized configuration files on your host are not automatically removed. To delete all images, containers and volumes, execute the following command:\n\n``` bash\nsudo rm -rf /var/lib/pouch\n```\n\n## Developer Quick-Start\n\nThis guide provides step by step instructions to deploy PouchContainer on bare metal servers or virtual machines.\nAs a developer, you may need to build and test PouchContainer binaries via source code. To build pouchd which is so-called \"PouchContainer Daemon\" and pouch which is so-called \"PouchContainer CLI\", the following build system dependencies are required:\n\n* Linux Kernel 3.10+\n* Go 1.10.4+\n* containerd: 1.0.3\n* runc: 1.0.0-rc4\n* runv: 1.0.0 (option)\n\n> NOTE: The PouchContainer is using overlayfs, which requires kernel to support multiple lowerdirs.\nOn 4.x kernels, they always support multiple lowerdirs overlayfs. And RHEL and Centos 3.x kernels (> 3.10.0-693.el7.x86_64) also support it.\nBesides this, it needs filesystem to support `d_type`. If the backing filesystem is `xfs`, please reformat with `ftype=1` to enable `d_type` support.\n\n### Prerequisites Installation\n\nSince pouchd is a kind of container engine, and pouch is a CLI tool, if you hope to experience container management ability via pouch, there are several additional binaries needed:\n\n* [containerd](https://github.com/containerd/containerd): an industry-standard container runtime;\n* [runc](https://github.com/opencontainers/runc): a CLI tool for spawning and running containers according to the OCI specification;\n* [runv](https://github.com/hyperhq/runv): a hypervisor-based runtime for OCI.\n\nHere are the shell scripts to install `containerd` and `runc`:\n\n``` shell\n# install containerd\n$ wget https://github.com/containerd/containerd/releases/download/v1.0.3/containerd-1.0.3.linux-amd64.tar.gz\n$ tar -xzvf containerd-1.0.3.linux-amd64.tar.gz -C /usr/local\n$\n# install runc\n$ wget https://github.com/opencontainers/runc/releases/download/v1.0.0-rc4/runc.amd64 -P /usr/local/bin\n$ chmod +x /usr/local/bin/runc.amd64\n$ mv /usr/local/bin/runc.amd64 /usr/local/bin/runc\n```\n\n### runV Installation\n\nIf you wish to experience hypervisor-based virtualization additionally, you will still need to install [runV](https://github.com/hyperhq/runv).\n\nMore guide on experiencing PouchContainer with runV including runv Installation, please refer to [PouchContainer run with runv guide](docs/features/pouch_with_runV.md).\n\n### PouchContainer Build and Installation\n\nWith all prerequisites installed, you can build and install PouchContainer Daemon and PouchContainer CLI. Clone the repository and checkout whichever branch you like (in the following example, checkout branch master):\n\n``` shell\nmkdir -p $GOPATH/src/github.com/alibaba/\ncd $GOPATH/src/github.com/alibaba/; git clone https://github.com/alibaba/pouch.git\ncd pouch; git checkout master\n```\n\nMakefile target named `build` will compile the pouch and pouchd binaries into current `bin` directory. You can execute `make build && make install` to build binaries and install them in destination directory (`/usr/local/bin` by default).\n\n``` shell\nmake build && make install\n```\n\n#### Build Tags\n\nPouch not use build tags by default, if you want pouchd to support additional security options, build pouchd with tags like\n\n```\nmake BUILDTAGS='seccomp apparmor selinux'\n```\n\nSupported build Tags\n\n| Tags     | Description                                             |\n|----------|---------------------------------------------------------|\n| seccomp  | filter syscalls                                         |\n| apparmor | restrict program capabilities with per-program profiles |\n| selinux  | selinux process and mount label                         |\n\n### Start PouchContainer\n\nWith all needed binaries installed, you could start pouchd via:\n\n``` shell\n$ pouchd\nINFO[0000] starting containerd                           module=containerd revision=773c489c9c1b21a6d78b5c538cd395416ec50f88 version=v1.0.3\nINFO[0000] setting subreaper...                          module=containerd\nINFO[0000] loading plugin \"io.containerd.content.v1.content\"...  module=containerd type=io.containerd.content.v1\nINFO[0000] loading plugin \"io.containerd.snapshotter.v1.btrfs\"...  module=containerd type=io.containerd.snapshotter.v1\nWARN[0000] failed to load plugin io.containerd.snapshotter.v1.btrfs  error=\"path /var/lib/containerd/io.containerd.snapshotter.v1.btrfs must be a btrfs filesystem to be used with the btrfs snapshotter\" module=containerd\nINFO[0000] loading plugin \"io.containerd.snapshotter.v1.overlayfs\"...  module=containerd type=io.containerd.snapshotter.v1\nINFO[0000] loading plugin \"io.containerd.metadata.v1.bolt\"...  module=containerd type=io.containerd.metadata.v1\nWARN[0000] could not use snapshotter btrfs in metadata plugin  error=\"path /var/lib/containerd/io.containerd.snapshotter.v1.btrfs must be a btrfs filesystem to be used with the btrfs snapshotter\" module=\"containerd/io.containerd.metadata.v1.bolt\"\nINFO[0000] loading plugin \"io.containerd.differ.v1.walking\"...  module=containerd type=io.containerd.differ.v1\nINFO[0000] loading plugin \"io.containerd.grpc.v1.containers\"...  module=containerd type=io.containerd.grpc.v1\n```\n\nAfter pouchd's running, you could interact with pouchd by PouchContainer CLI:\n\n```bash\n$ pouch images\nIMAGE ID             IMAGE NAME                                               SIZE\n3e8fa85ddfef         docker.io/library/busybox:latest                         2699\n504cf109b492         docker.io/library/redis:alpine                           2035\n```\n\n## Feedback\n\nWe hope this guide would help you get up and run with PouchContainer. And feel free to send feedback via [ISSUE](https://github.com/alibaba/pouch/issues/new), if you have any questions. If you wish to contribute to PouchContainer on this guide, please just submit a pull request.\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 11.08984375,
          "content": "                                 Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n   APPENDIX: How to apply the Apache License to your work.\n\n      To apply the Apache License to your work, attach the following\n      boilerplate notice, with the fields enclosed by brackets \"{}\"\n      replaced with your own identifying information. (Don't include\n      the brackets!)  The text should be enclosed in the appropriate\n      comment syntax for the file format. We also recommend that a\n      file or class name and description of purpose be included on the\n      same \"printed page\" as the copyright notice for easier\n      identification within third-party archives.\n\n   Copyright {yyyy} {name of copyright owner}\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License."
        },
        {
          "name": "MAINTAINERS.md",
          "type": "blob",
          "size": 2.5625,
          "content": "# Maintainers\n\n## Maintainers List\n\n|GitHub ID| Name | Email|Company|\n|:---:| :----:| :---:|:--: |\n|[allencloud](https://github.com/allencloud)|Allen Sun|shlallen1990@gmail.com|Alibaba Group|\n|[skoo87](https://github.com/skoo87)|Marcky Wu|marckywu@gmail.com|Terminus|\n|[Letty5411](https://github.com/Letty5411)|Letty Liu|letty.ll@alibaba-inc.com|Alibaba Group|\n|[rudyfly](https://github.com/rudyfly)|Rudy Zhang|rudyflyzhang@gmail.com|Alibaba Group|\n|[Ace-Tang](https://github.com/Ace-Tang)|Ace Tang|aceapril@126.com|Alibaba Group|\n|[YaoZengzeng](https://github.com/YaoZengzeng)|Zengzeng Yao|yaozengzeng@zju.edu.cn|Zhejiang University|\n|[sunyuan3](https://github.com/sunyuan3)|Yuan Sun|yile.sy@alibaba-inc.com |Alibaba Group|\n|[HusterWan](https://github.com/HusterWan)|Michael Wan|zirenwan@gmail.com|Alibaba Group|\n|[ZYecho](https://github.com/ZYecho)|Yue Zhang|zy675793960@yeah.net|ISCAS|\n|[fuweid](https://github.com/fuweid)|Wei Fu|yuge.fw@alibaba-inc.com|Alibaba Group|\n|[zhuangqh](https://github.com/zhuangqh)|Jerry Zhuang|zhijin.zqh@alibaba-inc.com| Alibaba Group|\n\n## Component Owner/Backup\n\nIn order to make all components in PouchContainer well-maintained, an owner/backup responsibility policy is set for all maintainers. No matter the owner or the backup, they have responsibilities to make/review design and programme code for the corresponding component. They work for success of the decoupled component, and efforts all maintainers do guarantee PouchContainer's success.\n\nWe encourage all community participants to communicate with component owner/backup to get more information or guidance via all kinds of channels, such as @him in GitHub issue or pull request, email him via listed email address and so on. And component owner/backups are obligated to provide kind and patient help to the community.\n\nThe component owner and backup are listed as below:\n\n|Component|Owner|Backup|Notes|\n|:---:|:----:|:---:|:--:|\n|CRI/Kubernetes|zhuangqh|Starnop|CRI stablibity/improvement, collaborate with upstream|\n|API/CLI|allencloud|fuweid|API/CLI definitions/change reviews|\n|runtime/OCI|Ace-Tang| zhuangqh|multiple runtime support, runc/kata/gvisor|\n|storage|rudyfly|fuweid|volumes, diskquota, volume plugin protocols|\n|network|rudyfly|HusterWan|libnetwork, cni plugins|\n|image|fuweid|ZYecho|image storage/distribution/management |\n|ctrd|fuweid|Ace-Tang|component used in pouchd to communicated with containerd|\n|ContainerMgr|HusterWan|Ace-Tang|container lifecycle management in pouchd|\n|Test|sunyuan3|chuanchang|test framework and software quality|\n|Document|allencloud|rufyfly|Document Roadmap and quality improvement|\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 11.1845703125,
          "content": "# Copyright The PouchContainer Authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\n# TEST_FLAGS used as flags of go test.\nTEST_FLAGS ?= -v --race\n\n# INTEGRATION_FLAGS used as flags of run integration test\nINTEGRATION_FLAGS ?= \"\"\n\n# DAEMON_BINARY_NAME is the name of binary of daemon.\nDAEMON_BINARY_NAME=pouchd\n\n# CLI_BINARY_NAME is the name of binary of pouch client.\nCLI_BINARY_NAME=pouch\n\n# DAEMON_INTEGRATION_BINARY_NAME is the name of test binary of daemon.\nDAEMON_INTEGRATION_BINARY_NAME=pouchd-integration\n\n# INTEGRATION_TESTCASE_BINARY_NAME is the name of binary of integration cases.\nINTEGRATION_TESTCASE_BINARY_NAME=pouchd-integration-test\n\n# GOARCH is the target platform for build\nGOARCH ?= $(shell go env GOARCH)\nGOPATH ?= $(shell go env GOPATH)\n\n# CC is the cross compiler\nifeq (${GOARCH},arm64)\n\tCC=aarch64-linux-gnu-gcc\nelse ifeq (${GOARCH},ppc64le)\n\tCC=powerpc64le-linux-gnu-gcc\nelse\n\tGOARCH=amd64\nendif\n\n# BUILD_ROOT is specified\nBUILD_ROOT := ${CURDIR}/install/${GOARCH}\n\n# DEST_DIR is base path used to install pouch & pouchd\nDEST_DIR=/usr/local\n\n# PREFIX is base path to install pouch & pouchd\n# PREFIX will override the value of DEST_DIR when specified\n# example: make install PREFIX=/usr\nifdef PREFIX\n\tDEST_DIR := $(PREFIX)\nendif\n\n# the following variables used for the daemon build\n\n# API_VERSION is used for daemon API Version in go build.\nAPI_VERSION=\"1.24\"\n\n# LAST_COMMIT is used for VERSION.\nLAST_COMMIT=$(shell git rev-parse --short HEAD)$(shell if ! git diff --no-ext-diff --quiet --exit-code; then echo -dirty; fi)\n\n# VERSION is used for daemon Release Version in go build.\nVERSION ?= \"1.3.1-$(LAST_COMMIT)\"\n\n# GIT_COMMIT is used for daemon GitCommit in go build.\nGIT_COMMIT=$(shell git describe --dirty --always --tags 2> /dev/null || true)\n\n# BUILD_TIME is used for daemon BuildTime in go build.\nBUILD_TIME=$(shell date --rfc-3339 s 2> /dev/null | sed -e 's/ /T/')\n\nVERSION_PKG=github.com/alibaba/pouch\nDEFAULT_LDFLAGS=\"-X ${VERSION_PKG}/version.GitCommit=${GIT_COMMIT} \\\n\t\t  -X ${VERSION_PKG}/version.Version=${VERSION} \\\n\t\t  -X ${VERSION_PKG}/version.ApiVersion=${API_VERSION} \\\n\t\t  -X ${VERSION_PKG}/version.BuildTime=${BUILD_TIME}\"\n\nGOBUILD_TAGS=$(if $(BUILDTAGS),-tags \"$(BUILDTAGS)\",)\n\n# COVERAGE_PACKAGES is the coverage we care about.\nCOVERAGE_PACKAGES=$(shell go list ./... | \\\n\t\t\t\t  grep -v github.com/alibaba/pouch$$ | \\\n\t\t\t\t  grep -v github.com/alibaba/pouch/storage/volume/examples/demo | \\\n\t\t\t\t  grep -v github.com/alibaba/pouch/test | \\\n\t\t\t\t  grep -v github.com/alibaba/pouch/cli$$ | \\\n\t\t\t\t  grep -v github.com/alibaba/pouch/cli/ | \\\n\t\t\t\t  grep -v github.com/alibaba/pouch/cri/apis | \\\n\t\t\t\t  grep -v github.com/alibaba/pouch/apis/types )\n\nCOVERAGE_PACKAGES_LIST=$(shell echo $(COVERAGE_PACKAGES) | tr \" \" \",\")\n\n#  POUCH IMAGE is the develop image for cross-building\nGIT_BRANCH := $(shell git rev-parse --abbrev-ref HEAD 2>/dev/null)\nGIT_BRANCH_CLEAN := $(shell echo $(GIT_BRANCH) | sed -e \"s/[^[:alnum:]]/-/g\")\nPOUCH_IMAGE := pouch_dev$(if $(GIT_BRANCH_CLEAN),:$(GIT_BRANCH_CLEAN))\n\n# Project location\nRUNC_PRO := github.com/opencontainers/runc\nCONTAINERD_PRO := github.com/containerd/containerd\nPOUCH_PRO := github.com/alibaba/pouch\nLXCFS_PRO := github.com/lxc/lxcfs\n\n# Runc cross building configuration\nRUNC_VERSION ?= \"v1.0.0-rc6-1\"\nRUNC_BUILDTAGS := seccomp\nRUNC_EXTRA_FLAGS :=\nRUNC_COMMIT_NO :=\nRUNC_COMMIT :=\n\n# CONTAINERD cross-building configuration\nCONTAINERD_VERSION := \"v1.0.3\"\n\n# LXCFS cross building configuration\nLXCFS_VERSION := \"stable-2.0\"\n\nbuild: build-daemon build-cli ## build PouchContainer both daemon and cli binaries\n\nbuild-daemon: modules plugin ## build PouchContainer daemon binary\n\t@echo \"$@: bin/${DAEMON_BINARY_NAME}\"\n\t@mkdir -p bin\n\t@GOOS=linux go build -ldflags ${DEFAULT_LDFLAGS} ${GOBUILD_TAGS} -o bin/${DAEMON_BINARY_NAME}\n\nbuild-cli: ## build PouchContainer cli binary\n\t@echo \"$@: bin/${CLI_BINARY_NAME}\"\n\t@mkdir -p bin\n\t@go build -o bin/${CLI_BINARY_NAME} github.com/alibaba/pouch/cli\n\ndev-image: ## build the Docker Image as cross building environment\n\tdocker build -f Dockerfile.${GOARCH}.cross . -t ${POUCH_IMAGE}\n\nshell: dev-image ## enter into the cross building shell environment\n\tdocker run -ti --privileged --rm -v ${CURDIR}:/go/src/${POUCH_PRO} \\\n\t\t${POUCH_IMAGE} \\\n\t\tbash\n\ndownload-source: ## download source code for cross-building\n\t@echo \"remove the source code\"\n\trm -rf ${GOPATH}/src/${RUNC_PRO}\n\trm -rf ${GOPATH}/src/${CONTAINERD_PRO}\n\trm -rf ${GOPATH}/src/${LXCFS_PRO}\n\tmkdir -p ${GOPATH}/src/${RUNC_PRO}\n\tmkdir -p ${GOPATH}/src/${CONTAINERD_PRO}\n\tmkdir -p ${GOPATH}/src/${LXCFS_PRO}\n\t@echo \"download the runc source code\"\n\tgit clone -b ${RUNC_VERSION} \\\n\t\thttps://github.com/alibaba/runc \\\n\t\t${GOPATH}/src/${RUNC_PRO}\n\t@echo \"download the containerd source code\"\n\tgit clone -b ${CONTAINERD_VERSION} \\\n\t\thttps://${CONTAINERD_PRO} \\\n\t\t${GOPATH}/src/${CONTAINERD_PRO}\n\t@echo \"download the containerd source code\"\n\tgit clone -b ${LXCFS_VERSION} \\\n\t\thttps://${LXCFS_PRO} \\\n\t\t${GOPATH}/src/${LXCFS_PRO}\n\ncross-build: dev-image ## cross build pouchd pouchd runc containerd on host\n\tdocker run -e BUILDTAGS=\"$(BUILDTAGS)\" -e GOARCH=\"${GOARCH}\" \\\n\t\t--rm -v ${CURDIR}:/go/src/${POUCH_PRO} \\\n\t\t${POUCH_IMAGE} \\\n\t\tmake local-cross\n\nlocal-cross: modules plugin download-source ## local cross build pouch pouchd runc containerd inside container\n\t@echo \"$@: ${BUILD_ROOT}/bin/${DAEMON_BINARY_NAME}\"\n\t@mkdir -p ${BUILD_ROOT}/bin\n\t@CGO_ENABLED=1 GOARCH=${GOARCH} GOOS=linux CC=${CC} \\\n\t\tgo build -ldflags ${DEFAULT_LDFLAGS} ${GOBUILD_TAGS} \\\n\t\t-o ${BUILD_ROOT}/bin/${DAEMON_BINARY_NAME}\n\t@echo \"$@: ${BUILD_ROOT}/bin/${CLI_BINARY_NAME}\"\n\t@CGO_ENABLED=0 GOARCH=${GOARCH} \\\n\t\tgo build -o ${BUILD_ROOT}/bin/${CLI_BINARY_NAME} \\\n\t\tgithub.com/alibaba/pouch/cli\n\t@echo \"$@: ${BUILD_ROOT}/bin/runc\"\n\t@CGO_ENABLED=1 GOARCH=${GOARCH} GOOS=linux CC=${CC} \\\n\t\tgo build -buildmode=pie ${RUNC_EXTRA_FLAGS} \\\n\t\t-ldflags \"-X main.gitCommit=${RUNC_COMMIT} -X main.version=${RUNC_VERSION} ${RUNC_EXTRA_LDFLAGS}\" \\\n\t\t-tags \"${RUNC_BUILDTAGS}\" \\\n\t\t-o ${BUILD_ROOT}/bin/runc ${RUNC_PRO}\n\t@CGO_ENABLED=1 GOARCH=${GOARCH} GOOS=linux CC=${CC} \\\n\t\t${MAKE} -C /go/src/${CONTAINERD_PRO} && cp -Rf /go/src/${CONTAINERD_PRO}/bin/* ${BUILD_ROOT}/bin\n\t@echo \"cross building lxcfs\"\n\tcd /go/src/${LXCFS_PRO} \\\n\t\t&& grep -l -r \"liblxcfs\" . | xargs sed -i 's/liblxcfs/libpouchlxcfs/g' \\\n\t\t&& ./bootstrap.sh\nifeq (${GOARCH},amd64)\n\tcd /go/src/${LXCFS_PRO} \\\n\t\t&& ./configure --prefix=${BUILD_ROOT}\nendif\nifeq (${GOARCH},arm64)\n\tcd /go/src/${LXCFS_PRO} \\\n\t\t&& ./configure --prefix=${BUILD_ROOT} \\\n\t\t--host=aarch64-linux-gnu \\\n\t\t--with-gnu-ld \\\n\t\t--with-distro=redhat\nendif\nifeq (${GOARCH},ppc64le)\n\tcd /go/src/${LXCFS_PRO} \\\n\t\t&& ./configure --prefix=${BUILD_ROOT} \\\n\t\t--host=powerpc64le-linux-gnu \\\n\t\t--with-gnu-ld \\\n\t\t--with-distro=redhat\nendif\n\t@cd /go/src/${LXCFS_PRO} && ${MAKE} clean && ${MAKE} && ${MAKE} install\n\t@mv ${BUILD_ROOT}/bin/lxcfs ${BUILD_ROOT}/bin/pouch-lxcfs\n\nbuild-daemon-integration: modules plugin ## build PouchContainer daemon integration testing binary\n\t@echo $@\n\t@mkdir -p bin\n\tgo test -c ${TEST_FLAGS} ${GOBUILD_TAGS} \\\n\t\t-cover -covermode=atomic -coverpkg ${COVERAGE_PACKAGES_LIST} \\\n\t\t-o bin/${DAEMON_INTEGRATION_BINARY_NAME}\n\nbuild-integration-test: modules plugin ## build PouchContainer integration test-case binary\n\t@echo $@\n\t@mkdir -p bin\n\tgo test -c \\\n\t\t-o bin/${INTEGRATION_TESTCASE_BINARY_NAME} github.com/alibaba/pouch/test\n\nmodules: ## run modules to generate volume related code\n\t@echo \"build volume $@\"\n\t@./hack/module --clean\n\t@./hack/module --add-volume=github.com/alibaba/pouch/storage/volume/modules/tmpfs\n\t@./hack/module --add-volume=github.com/alibaba/pouch/storage/volume/modules/local\n\ninstall: ## install pouch and pouchd binary into /usr/local/bin\n\t@echo $@\n\t@mkdir -p $(DEST_DIR)/bin\n\tinstall bin/$(CLI_BINARY_NAME) $(DEST_DIR)/bin\n\tinstall bin/$(DAEMON_BINARY_NAME) $(DEST_DIR)/bin\n\nuninstall: ## uninstall pouchd and pouch binary\n\t@echo $@\n\t@rm -f $(addprefix $(DEST_DIR)/bin/,$(notdir $(DAEMON_BINARY_NAME)))\n\t@rm -f $(addprefix $(DEST_DIR)/bin/,$(notdir $(CLI_BINARY_NAME)))\n\n.PHONY: package-dependencies\npackage-dependencies: ## install containerd, runc and lxcfs dependencies for packaging\n\t@echo $@\n\thack/install/install_containerd.sh\n\thack/install/install_lxcfs.sh\n\thack/install/install_runc.sh\n\n.PHONY: download-dependencies\ndownload-dependencies: package-dependencies ## install dumb-init, local-persist, nsenter and CI tools dependencies\n\t@echo $@\n\thack/install/install_ci_related.sh\n\thack/install/install_dumb_init.sh\n\thack/install/install_local_persist.sh\n\thack/install/install_nsenter.sh\n\thack/install/install_criu.sh\n\n.PHONY: clean\nclean: ## clean to remove bin/* and files created by module\n\t@go clean\n\t@rm -f bin/*\n\t@rm -rf install/*\n\t@rm -rf coverage/*\n\t@./hack/module --clean\n\n\n.PHONY: check\ncheck: gometalinter validate-swagger ## run all linters\n\n.PHONY: validate-swagger\nvalidate-swagger: ## run swagger validate\n\t@echo $@\n\t./hack/validate_swagger.sh\n\n# gometalinter consumes .gometalinter.json as config.\n.PHONY: gometalinter\ngometalinter: ## run gometalinter for go source code\n\t@echo $@\n\tgometalinter --config .gometalinter.json ./...\n\n\n.PHONY: unit-test\nunit-test: modules plugin ## run go unit-test\n\t@echo $@\n\t@mkdir -p coverage\n\t@( for pkg in ${COVERAGE_PACKAGES}; do \\\n\t\tgo test ${TEST_FLAGS} \\\n\t\t\t-cover -covermode=atomic \\\n\t\t\t-coverprofile=coverage/unit-test-`echo $$pkg | tr \"/\" \"_\"`.out \\\n\t\t\t$$pkg || exit; \\\n\tdone )\n\n.PHONY: integration-test\nintegration-test: build-daemon-integration build-integration-test ## run daemon integration-test\n\t@echo $@\n\t@mkdir -p coverage\n\t./hack/testing/run_daemon_integration.sh ${INTEGRATION_FLAGS}\n\n.PHONY: cri-v1alpha2-test\ncri-v1alpha2-test: ## run v1 alpha2 cri-v1alpha2-test\n\t@echo $@\n\t@mkdir -p coverage\n\t./hack/testing/run_daemon_cri_integration.sh v1alpha2\n\n.PHONY: cri-e2e-test\ncri-e2e-test: ## run cri-e2e-test\n\t@echo $@\n\t@mkdir -p coverage\n\t./hack/testing/run_daemon_cri_e2e.sh v1alpha2\n\n.PHONY: test\ntest: unit-test integration-test cri-v1alpha2-test cri-e2e-test ## run the unit-test, integration-test, cri-v1alpha2-test and cri-e2e-test\n\n.PHONY: coverage\ncoverage: ## combine coverage after test\n\t@echo $@\n\t@gocovmerge coverage/* > coverage.txt\n\n.PHONY: plugin\nplugin: ## build hook plugin\n\t@echo \"build $@\"\n\t@./hack/module --add-plugin=github.com/alibaba/pouch/hookplugins/containerplugin\n\t@./hack/module --add-plugin=github.com/alibaba/pouch/hookplugins/daemonplugin\n\t@./hack/module --add-plugin=github.com/alibaba/pouch/hookplugins/criplugin\n\t@./hack/module --add-plugin=github.com/alibaba/pouch/hookplugins/volumeplugin\n\t@./hack/module --add-plugin=github.com/alibaba/pouch/hookplugins/apiplugin\n\t@./hack/module --add-plugin=github.com/alibaba/pouch/hookplugins/imageplugin\n\n.PHONY: help\nhelp: ## this help\n\t@awk 'BEGIN {FS = \":.*?## \"} /^[a-zA-Z_-]+:.*?## / {sub(\"\\\\\\\\n\",sprintf(\"\\n%22c\",\" \"), $$2);printf \"\\033[36m%-28s\\033[0m %s\\n\", $$1, $$2}' $(MAKEFILE_LIST)\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 6.1640625,
          "content": "\n# PouchContainer - An Efficient Enterprise-class Rich Container Engine\n\n[![License](https://img.shields.io/badge/license-Apache%202-4EB1BA.svg)](https://www.apache.org/licenses/LICENSE-2.0.html)\n[![GoDoc](https://godoc.org/github.com/alibaba/pouch?status.svg)](https://godoc.org/github.com/alibaba/pouch)\n[![Build Status](https://travis-ci.org/alibaba/pouch.svg?branch=master)](https://travis-ci.org/alibaba/pouch)\n[![FOSSA Status](https://app.fossa.io/api/projects/git%2Bhttps%3A%2F%2Fgithub.com%2Falibaba%2Fpouch.svg?type=shield)](https://app.fossa.io/projects/git%2Bhttps%3A%2F%2Fgithub.com%2Falibaba%2Fpouch?ref=badge_shield)\n[![Go Report Card](https://goreportcard.com/badge/github.com/alibaba/pouch)](https://goreportcard.com/report/github.com/alibaba/pouch)\n[![codecov](https://codecov.io/gh/alibaba/pouch/branch/master/graph/badge.svg)](https://codecov.io/gh/alibaba/pouch)\n\n![pouchcontainer-logo-800](https://user-images.githubusercontent.com/6755791/39180769-55f3b742-47ea-11e8-8762-78aeedcbba78.png)\n\n## Main Links\n\n- [Introduction](#introduction)\n- [Features](#features)\n- [Architecture](#architecture)\n- [Getting Started](#getting-started)\n- [Deploying Kubernetes with PouchContainer](#deploying-kubernetes-with-pouchcontainer)\n- User Manual\n  - [CLI Manual](docs/commandline)\n  - [API Manual](docs/api)\n  - [USER Manual](docs/user)\n- [Contributing](#contributing)\n\n## Introduction\n\nPouchContainer is an open-source project created by Alibaba Group to promote the container technology movement.\n\nPouchContainer's vision is to advance container ecosystem and promote container standards [OCI(Open Container Initiative)](https://github.com/opencontainers), so that container technologies become the foundation for application development in the Cloud era.\n\nPouchContainer can pack, deliver and run any application. It provides applications with a lightweight runtime environment with strong isolation and minimal overhead. PouchContainer isolates applications from varying runtime environment, and minimizes operational workload. PouchContainer minimizes the effort for application developers to write Cloud-native applications, or to migrate legacy ones to a Cloud platform.\n\n## Features\n\nPouchContainer's most important features are:\n\n- **Rich container**: Besides the common ways of running container, PouchContainer includes a `rich container` mode, which integrates more services, hooks, and many others container internals to guarantee container's running like usual.\n- **Strong isolation**: PouchContainer is designed to be secure by default. It includes lots of security features, like hypervisor-based container technology, lxcfs, directory disk quota, patched Linux kernel and so on.\n- **P2P distribution**: PouchContainer utilizes [Dragonfly](https://github.com/alibaba/dragonfly), a P2P-base distribution system, to achieve lightning-fast container image distribution at enterprise's large scale.\n- **Kernel compatibility**: Enables OCI-compatible runtimes to work on old kernel versions, like linux kernel 2.6.32+.\n- **Standard compatibility**: PouchContainer keeps embracing container ecosystem to support industry standard, such as CNI, CSI and so on.\n- **Kubernetes compatibility**: PouchContainer has natively implemented Kubernetes Container Runtime Interface(CRI). It will be smooth to migrate from other Kubernetes container runtime to PouchContainer.\n\n## Architecture\n\nWe describe PouchContainer's architecture from two dimensions: **ecosystem architecture**  which illustrates how PouchContainer fits into the container ecosystem and **component architecture** which describes the interactions between various components inside PouchContainer. For more details, please refer to file [architecture.md](docs/architecture.md).\n\n## Advantages\n\nPouchContainer has lots of advantages over VM technologies. Two of the most impressive ones are **Resource Utilization** and **Application Centric**.\n\n### Resource Utilization\n\nPouchContainer significantly improves resource utilization:\n\n- PouchContainer is compatible with OCI image spec. Applications can minimize their storage usage with layered image structure.\n- Incremental image distribution, saves datacenter bandwidth consumption.\n- Significantly less runtime overhead than VM-based technologies.\n\n### Application Centric\n\nPouchContainer offers a more \"application centric\" approach for application development:\n\n- PouchContainer provides strong runtime isolation between applications, with cutting-edge technology both within kernel support and beyond kernel mode.\n- PouchContainer enables cross-platform and cross-OS application delivery.\n- PouchContainer supports standardized application image spec, so application sharing and reusing becomes trivial for developers and operators.\n\n## Getting Started\n\nYou can easily setup a basic PouchContainer environment, see [INSTALLATION.md](INSTALLATION.md). You'll need to install a few packages before starting `pouchd`, which starts a container management service. The service can be accessed through the `pouch` CLI or RPC calls. For more details, please refer to [CLI Manual](docs/commandline), [API Manual](docs/api) and [USER Manual](docs/user).\n\n## Deploying Kubernetes With PouchContainer\n\nAfter installing PouchContainer on your machine, maybe it is the exciting moment for you to power your Kubernetes cluster by PouchContainer. There is an easy guide for you to quickly experience this amazing combination [Kubernetes + PouchContainer](docs/kubernetes/pouch_with_kubernetes_deploying.md).\n\n## Contributing\n\nYou are warmly welcomed to hack on PouchContainer. We have prepared a detailed guide [CONTRIBUTING.md](CONTRIBUTING.md).\n\n## FAQ\n\nFor more details about frequently asked questions (FAQ), please refer to file [FAQ.md](FAQ.md).\n\n## Roadmap\n\nFor more details about roadmap, please refer to file [ROADMAP.md](ROADMAP.md).\n\n## Connect with us\n\nYou are encouraged to communicate everything via GitHub issues or pull requests. In the future, we would provide more channels for communication if necessary.\n\nIf you have urgent issues, please contact PouchContainer team at [pouch-dev@list.alibaba-inc.com](mailto:pouch-dev@list.alibaba-inc.com).\n\n## License\n\nPouchContainer is licensed under the Apache License, Version 2.0. See [LICENSE](LICENSE) for the full license text.\n"
        },
        {
          "name": "ROADMAP.md",
          "type": "blob",
          "size": 2.1552734375,
          "content": "# Roadmap\n\nRoadmap provides detailed description of items that project PouchContainer would decide to prioritize. This helps PouchContainer contributors understand more about the evolving direction and whether a potential contribution is off the direction.\n\nIf the feature is not listed below, it does not mean that we will never take that into consideration. We always say that all contributions are warmly welcomed. Please understand that such kind of contributions may take a little bit more time for committers to review.\n\nWe designed three parts in roadmap:\n\n* Container Regular Management\n* Strong Isolation\n* Open to Ecosystem\n\n## Container Regular Management\n\nWe will polish user's experience on container management as the first important step. [Moby](https://github.com/moby/moby) has popularized container API standard in industry. And PouchContainer will follow this API standard to provide container service. In addition, PouchContainer will take more care of more aspects on how to run container on top of various isolation unit. Better experience on taking care of applications is in the scope as well.\n\n## Strong Isolation\n\nA lot of work has been done to improve container's security in industry. But container technology has not reached the target yet. PouchContainer will take more effect on strong isolation, no matter on software side or hardware side. Since security is the largest obstacle for technology to apply in production environment, PouchContainer will improve isolation ability in the following areas: userspace lxcfs to isolate resource view, hypervisor based container, kvm-based container and so on.\n\n## Enhancement to Ecosystem\n\nFor being open to container ecosystem, PouchContainer will be designed to be scalable. As a container engine, PouchContainer will support pod and be able to integrate upper orchestration layer with [kubernetes](https://github.com/kubernetes/kubernetes). For fundamental infrastructure management, PouchContainer will embrace [CNI](https://github.com/containernetworking/cni) and [CSI](https://github.com/container-storage-interface). In the aspect of monitoring, logging and so on, PouchContainer takes an open role to approach cloud native.\n\n"
        },
        {
          "name": "VAGRANT.md",
          "type": "blob",
          "size": 2.2666015625,
          "content": "# Vagrant support for PouchContainer\n\nYou can using [Vagrant](https://www.vagrantup.com) to quickly experience PouchContainer or cross compile on non-linux.\n\n## Requirements\n\n* Vagrant 1.9.x or newer\n* VirtuaBox\n\n## Getting Started\n\n```bash\nvagrant up\nvagrant ssh -c \"sudo -i\"\n\n# Start a nginx container with 80\npouch run -d --name nginx -p 80:80 nginx\ncurl http://localhost\n```\n\n## Getting Started with Kubernetes\n\n```bash\n# On macOS or Linux\nPOUCH_KUBE=true vagrant up\n\n# On Windows\nset POUCH_KUBE=true\nvagrant up\n\nvagrant ssh -c \"sudo -i\"\n\n$ kubectl cluster-info\nKubernetes master is running at https://10.0.2.15:6443\nKubeDNS is running at https://10.0.2.15:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\n\n$ kubectl get cs\nNAME                 STATUS    MESSAGE\ncontroller-manager   Healthy   ok\nscheduler            Healthy   ok\netcd-0               Healthy   {\"health\": \"true\"}\n\n$ kubectl get po -o wide --all-namespaces\nNAMESPACE     NAME                            READY     STATUS    RESTARTS   AGE       IP           NODE\ndefault       nginx-6dc97b4cbd-cq4pb          1/1       Running   0          2m        10.244.0.2   pouch\ndefault       nginx-6dc97b4cbd-ktlwc          1/1       Running   0          2m        10.244.0.3   pouch\nkube-system   etcd-pouch                      1/1       Running   0          3m        10.0.2.15    pouch\nkube-system   kube-apiserver-pouch            1/1       Running   0          2m        10.0.2.15    pouch\nkube-system   kube-controller-manager-pouch   1/1       Running   0          2m        10.0.2.15    pouch\nkube-system   kube-dns-b4bd9576-gwqzv         3/3       Running   0          2m        10.244.0.4   pouch\nkube-system   kube-flannel-ds-amd64-vd466     1/1       Running   1          2m        10.0.2.15    pouch\nkube-system   kube-proxy-c8l8j                1/1       Running   0          2m        10.0.2.15    pouch\nkube-system   kube-scheduler-pouch            1/1       Running   0          2m        10.0.2.15    pouch\n```\n\n## Build pouch with vagrant\n\n```bash\n# On macOS or Linux\nPOUCH_BUILD=true vagrant up\n\n# On Windows\nset POUCH_BUILD=true\nvagrant up\n\n# Install compiled pouch binaries for pouch service.\nvagrant ssh -c \"sudo -i\"\ncd ~/go/src/github.com/alibaba/pouch\nmake PREFIX=/usr install\nsystemctl restart pouch\npouch version\n```\n"
        },
        {
          "name": "Vagrantfile",
          "type": "blob",
          "size": 2.828125,
          "content": "# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n# All Vagrant configuration is done below. The \"2\" in Vagrant.configure\n# configures the configuration version (we support older styles for\n# backwards compatibility). Please don't change it unless you know what\n# you're doing.\n\nVAGRANTFILE_API_VERSION = \"2\"\nVagrant.require_version \">= 1.7.4\"\n\nVagrant.configure(\"2\") do |config|\n  config.vm.define :pouch do |pouch|\n    pouch.vm.hostname = \"pouch\"\n    pouch.vm.box = \"ubuntu/xenial64\"\n    pouch.vm.provider 'virtualbox' do |v, override|\n      v.memory = 2048\n    end\n\n    pouch.vm.provision \"shell\", inline: <<-SHELL\n      until apt-get update; do echo \"Waiting apt-get for 3 seconds...\"; sleep 3; done\n      apt-get --no-install-recommends install lxcfs\n      apt-get --no-install-recommends install curl apt-transport-https ca-certificates software-properties-common\n      curl -fsSL http://mirrors.aliyun.com/opsx/pouch/linux/debian/opsx@service.alibaba.com.gpg.key | apt-key add -\n      add-apt-repository \"deb http://mirrors.aliyun.com/opsx/pouch/linux/debian/ pouch stable\"\n      apt-get update\n      apt-get --no-install-recommends install pouch\n      systemctl enable pouch\n      systemctl start pouch\n      echo \"alias docker='pouch'\" >> ~/.bashrc\n    SHELL\n\n    if ENV[\"POUCH_BUILD\"] == \"true\"\n      pouch.vm.provision \"shell\", inline: <<-SHELL\n        # configring environments for pouch\n        GO_VERSION=1.12.6\n        GOROOT=/opt/go\n        GOPATH=/root/go\n        apt-get install -y --no-install-recommends build-essential\n        wget --progress=bar:force:noscroll https://dl.google.com/go/go$GO_VERSION.linux-amd64.tar.gz -O /tmp/go$GO_VERSION.linux-amd64.tar.gz\n        tar xf /tmp/go$GO_VERSION.linux-amd64.tar.gz -C /opt/\n        echo \"export GOROOT=$GOROOT\" >> ~/.bashrc\n        echo \"export GOPATH=$GOPATH\" >> ~/.bashrc\n        echo \"export PATH=$PATH:$GOROOT/bin:$GOPATH/bin\" >> ~/.bashrc\n\n        export PATH=$PATH:$GOROOT/bin:$GOPATH/bin\n        mkdir -p $GOPATH/src/github.com/alibaba\n        ln -s -f /vagrant $GOPATH/src/github.com/alibaba/pouch\n        cd $GOPATH/src/github.com/alibaba/pouch\n        make && make PREFIX=/usr install\n        systemctl restart pouch\n      SHELL\n    end\n\n    if ENV[\"POUCH_KUBE\"] == \"true\"\n      env = {\n        \"KUBERNETES_VERSION\"  => \"1.10\",\n        \"CRI_VERSION\"         => \"v1alpha2\",\n        \"RELEASE_UBUNTU\"      => \"v1.10.2\",\n        \"MASTER_NODE\"         => \"true\",\n        \"INSTALL_FLANNEL\"     => \"true\",\n        \"INSTALL_SAMPLE\"      => \"true\"\n      }\n\n      if ENV[\"http_proxy\"] != \"\"\n        proxy =  ENV[\"http_proxy\"]\n\n        env[\"http_proxy\"]   = proxy\n        env[\"https_proxy\"]  = proxy\n        env[\"no_proxy\"]     = \"localhost,127.0.0.1,10.96.0.0/16,10.0.0.0/16,10.244.0.0/16\"\n      end\n\n      pouch.vm.provision \"install_kubernetes\", type: \"shell\", path: \"hack/kubernetes/allinone_aliyun.sh\", env: env\n    end\n  end\nend\n"
        },
        {
          "name": "adoptors.md",
          "type": "blob",
          "size": 2.3798828125,
          "content": "# Adoptors of PouchContainer\n\nBelow are the adoptors of project PouchContainer. If you are using to PouchContainer to improve your container service, please contact us with email [pouch-dev@list.alibaba-inc.com](mailto:pouch-dev@list.alibaba-inc.com) to attach your enterprise's logo.\n\n<a href=\"https://www.alibabagroup.com\" border=\"0\" target=\"_blank\"><img alt=\"AlibabaGroup\" src=\"docs/static_files/adoptors_logo/AlibabaGroup.jpg\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;\n<a href=\"https://www.alibabacloud.com/zh\" border=\"0\" target=\"_blank\"><img alt=\"AlibabaCloud\" src=\"docs/static_files/adoptors_logo/AlibabaCloud.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;\n<a href=\"https://www.antfin.com/\" border=\"0\" target=\"_blank\"><img alt=\"AntFinancial\" src=\"docs/static_files/adoptors_logo/AntFinancial.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;\n<a href=\"https://www.ucloud.cn/\" border=\"0\" target=\"_blank\"><img alt=\"ucloud\" src=\"docs/static_files/adoptors_logo/ucloud.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;<br/><br/>\n<a href=\"https://www.ele.me/home/\" border=\"0\" target=\"_blank\"><img alt=\"eleme\" src=\"docs/static_files/adoptors_logo/eleme.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;\n<a href=\"https://www.cainiao.com/\" border=\"0\" target=\"_blank\"><img alt=\"CaiNiao\" src=\"docs/static_files/adoptors_logo/CaiNiao.gif\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;\n<a href=\"http://www.iflytek.com/\" border=\"0\" target=\"_blank\"><img alt=\"iFLYTEK\" src=\"docs/static_files/adoptors_logo/iFLYTEK.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;<br/><br/>\n<a href=\"https://www.didiglobal.com\" border=\"0\" target=\"_blank\"><img alt=\"didi\" src=\"docs/static_files/adoptors_logo/didi.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;\n<a href=\"https://www.harmonycloud.cn\" border=\"0\" target=\"_blank\"><img alt=\"harmonycloud\" src=\"docs/static_files/adoptors_logo/HarmonyCloud.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;\n<a href=\"http://www.idcos.com/\" border=\"0\" target=\"_blank\"><img alt=\"idcos\" src=\"docs/static_files/adoptors_logo/cloudj.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;<br/><br/>\n<a href=\"https://www.amap.com/\" border=\"0\" target=\"_blank\"><img alt=\"amap\" src=\"docs/static_files/adoptors_logo/amap.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;\n<a href=\"https://www.lazada.com/\" border=\"0\" target=\"_blank\"><img alt=\"lazada\" src=\"docs/static_files/adoptors_logo/lazada.png\" height=\"70\"></a>&nbsp; &nbsp; &nbsp; &nbsp;"
        },
        {
          "name": "apis",
          "type": "tree",
          "content": null
        },
        {
          "name": "builder",
          "type": "tree",
          "content": null
        },
        {
          "name": "cli",
          "type": "tree",
          "content": null
        },
        {
          "name": "client",
          "type": "tree",
          "content": null
        },
        {
          "name": "contrib",
          "type": "tree",
          "content": null
        },
        {
          "name": "credential",
          "type": "tree",
          "content": null
        },
        {
          "name": "cri",
          "type": "tree",
          "content": null
        },
        {
          "name": "ctrd",
          "type": "tree",
          "content": null
        },
        {
          "name": "daemon",
          "type": "tree",
          "content": null
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "gen_doc.go",
          "type": "blob",
          "size": 1.2490234375,
          "content": "package main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\n\t\"github.com/spf13/cobra\"\n\t\"github.com/spf13/cobra/doc\"\n)\n\n// GenDocCommand is used to implement 'gen-doc' command.\ntype GenDocCommand struct {\n\tcmd *cobra.Command\n\n\t// path is the destination path of generated markdown documents.\n\tpath string\n}\n\nfunc init() {\n\tgenDocCommand := &GenDocCommand{}\n\tgenDocCommand.cmd = &cobra.Command{\n\t\tUse:           \"gen-doc\",\n\t\tShort:         \"Generate document for pouchd CLI with MarkDown format\",\n\t\tArgs:          cobra.NoArgs,\n\t\tSilenceErrors: true,\n\t\tSilenceUsage:  true,\n\t\tRunE: func(cmd *cobra.Command, args []string) error {\n\t\t\treturn genDocCommand.runGenDoc(args)\n\t\t},\n\t}\n\tgenDocCommand.addFlags()\n\trootCmd.AddCommand(genDocCommand.cmd)\n}\n\n// addFlags adds flags for specific command.\nfunc (g *GenDocCommand) addFlags() {\n\tflagSet := g.cmd.Flags()\n\n\tflagSet.StringVarP(&g.path, \"path\", \"p\", \"/tmp\", \"destination path of generated markdown documents\")\n}\n\nfunc (g *GenDocCommand) runGenDoc(args []string) error {\n\t// FIXME: make document path configurable\n\tif _, err := os.Stat(g.path); err != nil {\n\t\tif os.IsNotExist(err) {\n\t\t\treturn fmt.Errorf(\"path %s does not exits, please check your gen-doc input flag --path\", g.path)\n\t\t}\n\t\treturn err\n\t}\n\treturn doc.GenMarkdownTree(g.cmd.Parent(), g.path)\n}\n"
        },
        {
          "name": "hack",
          "type": "tree",
          "content": null
        },
        {
          "name": "hookplugins",
          "type": "tree",
          "content": null
        },
        {
          "name": "internal",
          "type": "tree",
          "content": null
        },
        {
          "name": "lxcfs",
          "type": "tree",
          "content": null
        },
        {
          "name": "main.go",
          "type": "blob",
          "size": 12.48046875,
          "content": "package main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\t\"os/signal\"\n\t\"path\"\n\t\"strings\"\n\t\"syscall\"\n\n\t\"github.com/alibaba/pouch/apis/metrics\"\n\t\"github.com/alibaba/pouch/apis/opts\"\n\toptscfg \"github.com/alibaba/pouch/apis/opts/config\"\n\t\"github.com/alibaba/pouch/apis/types\"\n\t\"github.com/alibaba/pouch/daemon\"\n\t\"github.com/alibaba/pouch/daemon/config\"\n\t\"github.com/alibaba/pouch/lxcfs\"\n\t\"github.com/alibaba/pouch/pkg/debug\"\n\t\"github.com/alibaba/pouch/pkg/kernel\"\n\t\"github.com/alibaba/pouch/pkg/log\"\n\t\"github.com/alibaba/pouch/pkg/system\"\n\t\"github.com/alibaba/pouch/pkg/utils\"\n\t\"github.com/alibaba/pouch/storage/quota\"\n\t\"github.com/alibaba/pouch/version\"\n\n\t\"github.com/containerd/containerd/namespaces\"\n\t\"github.com/docker/docker/pkg/reexec\"\n\t\"github.com/google/gops/agent\"\n\t\"github.com/sirupsen/logrus\"\n\t\"github.com/spf13/cobra\"\n\t\"github.com/spf13/pflag\"\n)\n\nvar (\n\tsigHandles   []func() error\n\tprintVersion bool\n\tlogOpts      []string\n\tcfg          = &config.Config{}\n)\n\nvar rootCmd = &cobra.Command{\n\tUse:               \"pouchd\",\n\tShort:             \"An Efficient Enterprise-class Container Engine\",\n\tArgs:              cobra.NoArgs,\n\tSilenceUsage:      true,\n\tDisableAutoGenTag: true, // disable displaying auto generation tag in cli docs\n\tRunE: func(cmd *cobra.Command, args []string) error {\n\t\treturn runDaemon(cmd)\n\t},\n}\n\nfunc main() {\n\tif reexec.Init() {\n\t\treturn\n\t}\n\n\tsetupFlags(rootCmd)\n\n\tif err := rootCmd.Execute(); err != nil {\n\t\tlog.With(nil).Error(err)\n\t\tos.Exit(1)\n\t}\n}\n\n// setupFlags setups flags for command line.\nfunc setupFlags(cmd *cobra.Command) {\n\t// Cobra supports Persistent Flags, which, if defined here,\n\t// will be global for your application.\n\t// flagSet := cmd.PersistentFlags()\n\n\t// Cobra also supports local flags, which will only run\n\t// when this action is called directly.\n\tflagSet := cmd.Flags()\n\n\tflagSet.StringVar(&cfg.HomeDir, \"home-dir\", \"/var/lib/pouch\", \"Specify root dir of pouchd\")\n\tflagSet.StringArrayVarP(&cfg.Listen, \"listen\", \"l\", []string{\"unix:///var/run/pouchd.sock\"}, \"Specify listening addresses of Pouchd\")\n\tflagSet.BoolVar(&cfg.IsCriEnabled, \"enable-cri\", false, \"Specify whether enable the cri part of pouchd which is used to support Kubernetes\")\n\tflagSet.StringVar(&cfg.CriConfig.CriVersion, \"cri-version\", \"v1alpha2\", \"Specify the version of cri which is used to support Kubernetes\")\n\tflagSet.StringVar(&cfg.CriConfig.Listen, \"listen-cri\", \"unix:///var/run/pouchcri.sock\", \"Specify listening address of CRI\")\n\tflagSet.StringVar(&cfg.CriConfig.NetworkPluginBinDir, \"cni-bin-dir\", \"/opt/cni/bin\", \"The directory for putting cni plugin binaries.\")\n\tflagSet.StringVar(&cfg.CriConfig.NetworkPluginConfDir, \"cni-conf-dir\", \"/etc/cni/net.d\", \"The directory for putting cni plugin configuration files.\")\n\tflagSet.StringVar(&cfg.CriConfig.SandboxImage, \"sandbox-image\", \"registry.cn-hangzhou.aliyuncs.com/google-containers/pause-amd64:3.0\", \"The image used by sandbox container.\")\n\tflagSet.StringVar(&cfg.CriConfig.StreamServerPort, \"stream-server-port\", \"10010\", \"The port stream server of cri is listening on.\")\n\tflagSet.BoolVar(&cfg.CriConfig.StreamServerReusePort, \"stream-server-reuse-port\", false, \"Specify whether cri stream server share port with pouchd. If this is true, the listen option of pouchd should specify a tcp socket and its port should be same with stream-server-port.\")\n\tflagSet.IntVar(&cfg.CriConfig.CriStatsCollectPeriod, \"cri-stats-collect-period\", 10, \"The time duration (in time.Second) cri collect stats from containerd.\")\n\tflagSet.BoolVar(&cfg.CriConfig.EnableCriStatsCollect, \"enable-cri-stats-collect\", false, \"Specify whether cri collect stats from containerd. If this is true, option CriStatsCollectPeriod will take effect.\")\n\tflagSet.StringVar(&cfg.CriConfig.RuntimeConfigFile, \"cni-runtime-config\", \"/etc/pouch/cni-runtime-config.json\", \"A config file to make the cni runtime config persistent.\")\n\tflagSet.BoolVarP(&cfg.Debug, \"debug\", \"D\", false, \"Switch daemon log level to DEBUG mode\")\n\tflagSet.StringVarP(&cfg.ContainerdAddr, \"containerd\", \"c\", \"/var/run/containerd.sock\", \"Specify listening address of containerd\")\n\tflagSet.StringVar(&cfg.ContainerdPath, \"containerd-path\", \"\", \"Specify the path of containerd binary\")\n\tflagSet.StringVar(&cfg.TLS.Key, \"tlskey\", \"\", \"Specify key file of TLS\")\n\tflagSet.StringVar(&cfg.TLS.Cert, \"tlscert\", \"\", \"Specify cert file of TLS\")\n\tflagSet.StringVar(&cfg.TLS.CA, \"tlscacert\", \"\", \"Specify CA file of TLS\")\n\tflagSet.BoolVar(&cfg.TLS.VerifyRemote, \"tlsverify\", false, \"Use TLS and verify remote\")\n\tflagSet.StringVar(&cfg.TLS.ManagerWhiteList, \"manager-whitelist\", \"\", \"Set tls name whitelist, multiple values are separated by commas\")\n\tflagSet.BoolVarP(&printVersion, \"version\", \"v\", false, \"Print daemon version\")\n\tflagSet.StringVar(&cfg.DefaultRuntime, \"default-runtime\", \"runc\", \"Default OCI Runtime\")\n\tflagSet.BoolVar(&cfg.IsLxcfsEnabled, \"enable-lxcfs\", false, \"Enable Lxcfs to make container to isolate /proc\")\n\tflagSet.StringVar(&cfg.LxcfsBinPath, \"lxcfs\", \"/usr/local/bin/lxcfs\", \"Specify the path of lxcfs binary\")\n\tflagSet.StringVar(&cfg.LxcfsHome, \"lxcfs-home\", \"/var/lib/lxcfs\", \"Specify the mount dir of lxcfs\")\n\tflagSet.StringVar(&cfg.DefaultRegistry, \"default-registry\", \"registry.hub.docker.com\", \"Default Image Registry\")\n\tflagSet.StringVar(&cfg.DefaultRegistryNS, \"default-registry-namespace\", \"library\", \"Default Image Registry namespace\")\n\tflagSet.StringVar(&cfg.ImageProxy, \"image-proxy\", \"\", \"Http proxy to pull image\")\n\tflagSet.StringVar(&cfg.QuotaDriver, \"quota-driver\", \"\", \"Set quota driver(grpquota/prjquota), if not set, it will set by kernel version\")\n\tflagSet.StringVar(&cfg.ConfigFile, \"config-file\", \"/etc/pouch/config.json\", \"Configuration file of pouchd\")\n\tflagSet.StringVar(&cfg.Snapshotter, \"snapshotter\", \"overlayfs\", \"Snapshotter driver of pouchd, it will be passed to containerd\")\n\tflagSet.BoolVar(&cfg.AllowMultiSnapshotter, \"allow-multi-snapshotter\", false, \"If set true, pouchd will allow multi snapshotter\")\n\n\t// volume config\n\tflagSet.StringVar(&cfg.VolumeConfig.DriverAlias, \"volume-driver-alias\", \"\", \"Set volume driver alias, <name=alias>[;name1=alias1]\")\n\n\t// network config\n\tflagSet.StringVar(&cfg.NetworkConfig.ExecRoot, \"exec-root-dir\", \"\", \"Set exec root directory for network\")\n\tflagSet.StringVar(&cfg.NetworkConfig.BridgeConfig.Name, \"bridge-name\", \"\", \"Set default bridge name\")\n\tflagSet.StringVar(&cfg.NetworkConfig.BridgeConfig.IPv4, \"bip\", \"\", \"Set bridge IP\")\n\tflagSet.StringVar(&cfg.NetworkConfig.BridgeConfig.GatewayIPv4, \"default-gateway\", \"\", \"Set default IPv4 bridge gateway\")\n\tflagSet.StringVar(&cfg.NetworkConfig.BridgeConfig.FixedCIDRv4, \"fixed-cidr\", \"\", \"Set bridge fixed CIDRv4\")\n\tflagSet.BoolVar(&cfg.NetworkConfig.BridgeConfig.EnableIPv6, \"enable-ipv6\", false, \"Enable IPv6 networking\")\n\tflagSet.StringVar(&cfg.NetworkConfig.BridgeConfig.GatewayIPv6, \"default-gateway-v6\", \"\", \"Set default IPv6 bridge gateway\")\n\tflagSet.StringVar(&cfg.NetworkConfig.BridgeConfig.FixedCIDRv6, \"fixed-cidr-v6\", \"\", \"Set bridge fixed CIDRv6\")\n\tflagSet.IntVar(&cfg.NetworkConfig.BridgeConfig.Mtu, \"mtu\", 1500, \"Set bridge MTU\")\n\tflagSet.BoolVar(&cfg.NetworkConfig.BridgeConfig.IPTables, \"iptables\", true, \"Enable iptables\")\n\tflagSet.BoolVar(&cfg.NetworkConfig.BridgeConfig.IPForward, \"ipforward\", true, \"Enable ipforward\")\n\tflagSet.BoolVar(&cfg.NetworkConfig.BridgeConfig.UserlandProxy, \"userland-proxy\", false, \"Enable userland proxy\")\n\n\t// log config\n\tflagSet.StringVar(&cfg.DefaultLogConfig.LogDriver, \"log-driver\", types.LogConfigLogDriverJSONFile, \"Set default log driver\")\n\tflagSet.StringArrayVar(&logOpts, \"log-opt\", nil, \"Set default log driver options\")\n\n\t// cgroup-path flag is to set parent cgroup for all containers, default is \"default\" staying with containerd's configuration.\n\tflagSet.StringVar(&cfg.CgroupParent, \"cgroup-parent\", \"\", \"Set parent cgroup for all containers\")\n\tflagSet.StringSliceVar(&cfg.Labels, \"label\", []string{}, \"Set metadata for Pouch daemon\")\n\tflagSet.BoolVar(&cfg.EnableProfiler, \"enable-profiler\", false, \"Set if pouchd setup profiler\")\n\tflagSet.StringVar(&cfg.Pidfile, \"pidfile\", \"/var/run/pouch.pid\", \"Save daemon pid\")\n\tflagSet.IntVar(&cfg.OOMScoreAdjust, \"oom-score-adj\", -500, \"Set the oom_score_adj for the daemon\")\n\tflagSet.Var(optscfg.NewRuntime(&cfg.Runtimes), \"add-runtime\", \"register a OCI runtime to daemon\")\n\n\t// Notes(ziren): default-namespace is passed to containerd, the default\n\t// value is 'default'. So if IsCriEnabled is true for k8s, we should set the DefaultNamespace\n\t// to k8s.io\n\tflagSet.StringVar(&cfg.DefaultNamespace, \"default-namespace\", namespaces.Default, \"default-namespace is passed to containerd, the default value is 'default'\")\n\tflagSet.StringVar(&cfg.CgroupDriver, \"cgroup-driver\", \"cgroupfs\", \"Set cgroup driver for all containers(cgroupfs|systemd), default cgroupfs\")\n\n\t// registry\n\tflagSet.StringArrayVar(&cfg.InsecureRegistries, \"insecure-registries\", []string{}, \"enable insecure registry\")\n\tflagSet.StringArrayVar(&cfg.RegistryMirrors, \"registry-mirrors\", []string{}, \"preferred mirror registry list\")\n\n\t// buildkit\n\tflagSet.BoolVar(&cfg.EnableBuilder, \"enable-builder\", false, \"Enable buildkit functionality\")\n}\n\n// runDaemon prepares configs, setups essential details and runs pouchd daemon.\nfunc runDaemon(cmd *cobra.Command) error {\n\n\t// parse log driver config\n\tlogOptMap, err := opts.ParseLogOptions(cfg.DefaultLogConfig.LogDriver, logOpts)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tif len(logOptMap) > 0 {\n\t\tcfg.DefaultLogConfig.LogOpts = logOptMap\n\t}\n\n\tif err := loadDaemonFile(cfg, cmd.Flags()); err != nil {\n\t\treturn fmt.Errorf(\"failed to load daemon file: %s\", err)\n\t}\n\n\t//user specifies --version or -v, print version and return.\n\tif printVersion {\n\t\tfmt.Printf(\"pouchd version: %s, build: %s, build at: %s\\n\", version.Version, version.GitCommit, version.BuildTime)\n\t\treturn nil\n\t}\n\n\tkernelVersion, err := kernel.GetKernelVersion()\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed to get kernel version: %s\", err)\n\t}\n\tmetrics.EngineVersion.WithLabelValues(\n\t\tversion.GitCommit,\n\t\tversion.Version,\n\t\tkernelVersion.String()).Set(1)\n\t// initialize log.\n\tlog.Init(cfg.Debug)\n\n\tif err := cfg.Validate(); err != nil {\n\t\tlog.With(nil).Fatal(err)\n\t}\n\n\t// import debugger tools for pouch when in debug mode.\n\tif cfg.Debug || cfg.EnableProfiler {\n\t\tif err := agent.Listen(agent.Options{}); err != nil {\n\t\t\tlog.With(nil).Fatal(err)\n\t\t}\n\t\tdebug.SetupDumpStackTrap()\n\t}\n\n\t// resolve home dir.\n\tdir, err := utils.ResolveHomeDir(cfg.HomeDir)\n\tif err != nil {\n\t\treturn err\n\t}\n\tcfg.HomeDir = dir\n\n\t// saves daemon pid to pidfile.\n\tif cfg.Pidfile != \"\" {\n\t\tif err := utils.NewPidfile(cfg.Pidfile); err != nil {\n\t\t\tlog.With(nil).Errorf(\"failed to create pidfile: %s\", err)\n\t\t\treturn err\n\t\t}\n\t\tdefer func() {\n\t\t\tif err := os.Remove(cfg.Pidfile); err != nil {\n\t\t\t\tlog.With(nil).Errorf(\"failed to delete pidfile: %s\", err)\n\t\t\t}\n\t\t}()\n\t}\n\n\t// set pouchd oom-score\n\tif err := utils.SetOOMScore(os.Getpid(), cfg.OOMScoreAdjust); err != nil {\n\t\tlog.With(nil).Errorf(\"failed to set oom-score for pouchd: %v\", err)\n\t}\n\n\t// define and start all required processes.\n\n\tif cfg.QuotaDriver != \"\" {\n\t\tquota.SetQuotaDriver(cfg.QuotaDriver)\n\t}\n\n\tif err := checkLxcfsCfg(); err != nil {\n\t\treturn err\n\t}\n\n\tif cfg.MachineMemory, err = system.GetTotalMem(); err != nil {\n\t\tlogrus.Warnf(\"failed to get system mem: %v\", err)\n\t}\n\n\t// initialize signal and handle method.\n\tvar (\n\t\terrCh    = make(chan error, 1)\n\t\tsignalCh = make(chan os.Signal, 1)\n\t)\n\n\t// new daemon instance, this is core.\n\td := daemon.NewDaemon(cfg)\n\tif d == nil {\n\t\treturn fmt.Errorf(\"failed to new daemon\")\n\t}\n\n\tsignal.Notify(signalCh, syscall.SIGINT, syscall.SIGQUIT, syscall.SIGTERM, syscall.SIGHUP)\n\tsigHandles = append(sigHandles, d.Shutdown, d.ShutdownPlugin)\n\n\tgo func() {\n\t\t// FIXME: I think the Run() should always return error.\n\t\terrCh <- d.Run()\n\t}()\n\n\tselect {\n\tcase sig := <-signalCh:\n\t\tlog.With(nil).Warnf(\"received signal: %s\", sig)\n\n\t\tfor _, handle := range sigHandles {\n\t\t\tif err := handle(); err != nil {\n\t\t\t\tlog.With(nil).Errorf(\"failed to handle signal: %v\", err)\n\t\t\t}\n\t\t}\n\n\t\tos.Exit(1)\n\tcase err := <-errCh:\n\t\t// FIXME: should we do the cleanup like signal handle?\n\t\treturn err\n\t}\n\treturn nil\n}\n\n// check lxcfs config\nfunc checkLxcfsCfg() error {\n\tif !cfg.IsLxcfsEnabled {\n\t\treturn nil\n\t}\n\n\tif !path.IsAbs(cfg.LxcfsHome) {\n\t\treturn fmt.Errorf(\"invalid lxcfs home dir: %s\", cfg.LxcfsHome)\n\t}\n\n\tcfg.LxcfsHome = strings.TrimSuffix(cfg.LxcfsHome, \"/\")\n\tlxcfs.IsLxcfsEnabled = cfg.IsLxcfsEnabled\n\tlxcfs.LxcfsHomeDir = cfg.LxcfsHome\n\tlxcfs.LxcfsParentDir = path.Dir(cfg.LxcfsHome)\n\n\treturn lxcfs.CheckLxcfsMount()\n}\n\n// load daemon config file\nfunc loadDaemonFile(cfg *config.Config, flagSet *pflag.FlagSet) error {\n\tif cfg.ConfigFile == \"\" {\n\t\treturn nil\n\t}\n\n\treturn cfg.MergeConfigurations(flagSet)\n}\n"
        },
        {
          "name": "main_test.go",
          "type": "blob",
          "size": 0.5751953125,
          "content": "package main\n\nimport (\n\t\"os\"\n\t\"os/signal\"\n\t\"strings\"\n\t\"syscall\"\n\t\"testing\"\n)\n\nfunc TestMain(t *testing.T) {\n\tvar (\n\t\targs []string\n\t)\n\n\tfor _, arg := range os.Args {\n\t\tswitch {\n\t\tcase strings.HasPrefix(arg, \"DEVEL\"):\n\t\tcase strings.HasPrefix(arg, \"-test\"):\n\t\tdefault:\n\t\t\targs = append(args, arg)\n\t\t}\n\t}\n\n\twaitCh := make(chan int, 1)\n\n\tos.Args = args\n\tgo func() {\n\t\tmain()\n\t\tclose(waitCh)\n\t}()\n\n\tsignalCh := make(chan os.Signal, 1)\n\tsignal.Notify(signalCh, syscall.SIGINT, syscall.SIGQUIT, syscall.SIGTERM, syscall.SIGHUP)\n\tselect {\n\tcase <-signalCh:\n\t\treturn\n\tcase <-waitCh:\n\t\treturn\n\t}\n}\n"
        },
        {
          "name": "network",
          "type": "tree",
          "content": null
        },
        {
          "name": "oci",
          "type": "tree",
          "content": null
        },
        {
          "name": "pkg",
          "type": "tree",
          "content": null
        },
        {
          "name": "registry",
          "type": "tree",
          "content": null
        },
        {
          "name": "storage",
          "type": "tree",
          "content": null
        },
        {
          "name": "test",
          "type": "tree",
          "content": null
        },
        {
          "name": "tools",
          "type": "tree",
          "content": null
        },
        {
          "name": "travis_ci.sh",
          "type": "blob",
          "size": 3.3701171875,
          "content": "#!/bin/bash\n\nset -e # fast fail\n\n# action for travis ci\nAction=$1\n# config the number of integration test job.\nJOBS=$2\n# config the id of job\nJOB_ID=$3\n\nCASE_PREFIX=\"testcase.list\"\nLOCAL_CASE_FILE=\"${TRAVIS_BUILD_DIR}/test/${CASE_PREFIX}\"\n\nsource \"${TRAVIS_BUILD_DIR}/hack/install/config.sh\"\n\nprepare_testcase() {\n  # get the number of all test case\n  # test case must write with this format:\n  # func (XXX) TestXXX(c *check.C) {\n  grep -h -E \"^func\\ \\(.*\\)\\ Test.*\\(c\\ \\*check\\.C\\)\\ \\{\" ./test -r \\\n    | awk '{print $3,$4}' | awk -F \\( '{print $1}' \\\n    | sed 's/\\*//' | sed 's/) /./' > \"${LOCAL_CASE_FILE}\"\n\n  # make test case list file\n  local sum nums\n\n  # shellcheck disable=SC2002\n  sum=$(cat \"${LOCAL_CASE_FILE}\" | wc -l)\n  nums=$((sum / JOBS + 1))\n\n  rm -rf \"${LOCAL_CASE_FILE}.*\"\n  split -l ${nums} -d --suffix-length=1 \"${LOCAL_CASE_FILE}\" \"${LOCAL_CASE_FILE}.\"\n}\n\nrun_pre_test() {\n  prepare_testcase\n}\n\nrun_unittest() {\n  sudo env \"PATH=$PATH\" hack/install/install_ci_related.sh\n  sudo env \"PATH=$PATH\" make unit-test\n  make coverage\n\n  bash <(curl -s https://codecov.io/bash) -cF unittest -y .codecov.yml\n}\n\nrun_integration_test() {\n  local job_id=$1\n\n  check_port\n\n  make build\n  sudo env \"PATH=$PATH\" make install\n\n  sudo env \"PATH=$PATH\" make download-dependencies\n  sudo env \"PATH=$PATH\" \"INTEGRATION_FLAGS=${job_id}\" make integration-test\n  make coverage\n\n  bash <(curl -s https://codecov.io/bash) -cF \"integration_test_${job_id}\" -y .codecov.yml\n}\n\nrun_criv1alpha2_test() {\n  check_port\n\n  make build\n  TEST_FLAGS=\"\" BUILDTAGS=\"selinux seccomp apparmor\" make build-daemon-integration\n  sudo env \"PATH=$PATH\" make install\n\n  sudo env \"PATH=$PATH\" make download-dependencies\n  sudo env \"PATH=$PATH\" make cri-v1alpha2-test\n  make coverage\n\n  bash <(curl -s https://codecov.io/bash) -cF criv1alpha2_test -y .codecov.yml\n}\n\nrun_node_e2e_test() {\n  check_port\n\n  make build\n  TEST_FLAGS=\"\" make build-daemon-integration\n  sudo env \"PATH=$PATH\" make install\n\n  sudo env \"PATH=$PATH\" make download-dependencies\n  sudo env \"PATH=$PATH\" make cri-e2e-test\n  make coverage\n\n  bash <(curl -s https://codecov.io/bash) -cF node_e2e_test -y .codecov.yml\n}\n\ncheck_port() {\n\t# docker-containerd will use port 10010 in docker.service\n\tsudo netstat -npl | grep -q \"10010\"\n\tif [[ $? -ne 0 ]]; then\n\t\treturn\n\tfi\n\n\tsudo systemctl stop docker\n}\n\ninstall_osscmd() {\n  sudo wget \"http://gosspublic.alicdn.com/ossutil/1.4.1/ossutil64\" \\\n      -O /usr/local/bin/ossutil\n  sudo chmod +x /usr/local/bin/ossutil\n}\n\noss() {\n  local action=$1\n  local src=$2\n  local dst=$3\n\n  command -v ossutil || install_osscmd\n\n  local osscmd=\"ossutil -e ${OSS_ENDPOINT} \\\n    -i ${OSS_ACCESS_KEY_ID} \\\n    -k ${OSS_ACCESS_KEY_SECRET}\"\n\n  case ${action} in\n    ls)\n      ${osscmd} ls \"${src}\"\n    ;;\n    cp)\n      ${osscmd} cp -r -f \"${src}\" \"${dst}\"\n    ;;\n    rm)\n      ${osscmd} rm -rf \"${src}\"\n    ;;\n    *)\n      echo \"Unsupport command\"\n    ;;\n  esac\n}\n\nmain () {\n  case ${Action} in\n    pretest)\n      echo \"pre-test\"\n      run_pre_test\n    ;;\n    unittest)\n      echo \"run unit test\"\n      run_unittest\n    ;;\n    integrationtest)\n      echo \"run integration test\"\n      run_pre_test\n      run_integration_test \"${JOB_ID}\"\n    ;;\n    criv1alpha2test)\n      echo \"run criv1alpha2 test\"\n      run_criv1alpha2_test\n    ;;\n    nodee2etest)\n      echo \"run node e2e test\"\n      run_node_e2e_test\n    ;;\n    *)\n      echo \"Unsupport action\"\n      exit 1\n    ;;\n  esac\n}\n\nmain\n"
        },
        {
          "name": "vendor",
          "type": "tree",
          "content": null
        },
        {
          "name": "version",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}