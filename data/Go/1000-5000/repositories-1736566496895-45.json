{
  "metadata": {
    "timestamp": 1736566496895,
    "page": 45,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjUw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "guangzhengli/k8s-tutorials",
      "stars": 4779,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.310546875,
          "content": "### IntelliJ IDEA ###\n.idea\n*.iws\n*.iml\n*.ipr\nout/\n\n### VS Code ###\n.vscode/\n\n### project ###\n.settings/\n\n### apple ###\n.DS_Store\n**/.DS_Store\n\n\n/coverage\n/src/client/shared.ts\n/src/node/shared.ts\n*.log\n*.tgz\n.DS_Store\n.idea\n.temp\n.vite_opt_cache\n.vscode\ndist\ncache\ntemp\nexamples-temp\nnode_modules\npnpm-global\nTODOs.md"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0478515625,
          "content": "MIT License\n\nCopyright (c) 2022-2023 liguangzheng\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE."
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 87.955078125,
          "content": "<h1 align=center>Kubernetes Tutorials ï½œ k8s æ•™ç¨‹</h1>\n<h2 align=center><a href=\"https://k8s-tutorials.pages.dev\">Online Pages</a></h1>\n\n[![GitHub forks](https://img.shields.io/github/forks/guangzhengli/k8s-tutorials)](https://github.com/guangzhengli/k8s-tutorials/network)[![GitHub stars](https://img.shields.io/github/stars/guangzhengli/k8s-tutorials)](https://github.com/guangzhengli/k8s-tutorials/stargazers)[![GitHub issues](https://img.shields.io/github/issues/guangzhengli/k8s-tutorials)](https://github.com/guangzhengli/k8s-tutorials/issues)[![GitHub license](https://img.shields.io/github/license/guangzhengli/k8s-tutorials)](https://github.com/guangzhengli/k8s-tutorials/blob/main/LICENSE)![Docker Pulls](https://img.shields.io/docker/pulls/guangzhengli/hellok8s)\n\n<h4 align=center>ğŸŒˆ Kubernetes | ğŸ“° Tutorials</h4>\n\n![image_screenshot](docs/public/screenshot.png)\n\nk8s ä½œä¸ºäº‘åŸç”Ÿæ—¶ä»£çš„æ“ä½œç³»ç»Ÿï¼Œå­¦ä¹ å®ƒçš„å¿…è¦æ€§ä¸è¨€è€Œå–»ï¼Œå¦‚æœä½ é‡åˆ°äº†ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥åœ¨ [Discussions](https://github.com/guangzhengli/k8s-tutorials/discussions) ä¸­è¯„è®ºæˆ–è€… Issue ä¸­æå‡ºï¼Œå¦‚æœä½ è§‰å¾—è¿™ä¸ªä»“åº“å¯¹ä½ æœ‰ä»·å€¼ï¼Œæ¬¢è¿ star æˆ–è€…æ PR / Issueï¼Œè®©å®ƒå˜å¾—æ›´å¥½ï¼\n\nåœ¨å­¦ä¹ æœ¬æ•™ç¨‹å‰ï¼Œéœ€è¦æ³¨æ„æœ¬æ•™ç¨‹ä¾§é‡äºå®æˆ˜å¼•å¯¼ï¼Œä»¥æ¸è¿›å¼ä¿®æ”¹ä»£ç çš„æ–¹å¼ï¼Œå°†ä»æœ€åŸºç¡€çš„ container å®¹å™¨çš„å®šä¹‰å¼€å§‹ï¼Œç»è¿‡ `pod`, `deployment`, `service`,  `ingress`, `configmap`, `secret` ç­‰èµ„æºç›´åˆ°ç”¨ `helm` æ¥æ‰“åŒ…éƒ¨ç½²ä¸€å¥—å®Œæ•´æœåŠ¡ã€‚æ‰€ä»¥å¦‚æœä½ å¯¹å®¹å™¨å’Œ k8s çš„åŸºç¡€ç†è®ºçŸ¥è¯†ä¸ç”šäº†è§£çš„è¯ï¼Œå»ºè®®å…ˆä» [å®˜ç½‘æ–‡æ¡£](https://kubernetes.io/zh-cn/docs/home/) æˆ–è€…å…¶å®ƒæ•™ç¨‹è·å–åŸºç¡€ç†è®ºçŸ¥è¯†ï¼Œå†é€šè¿‡å®æˆ˜åŠ æ·±å¯¹çŸ¥è¯†çš„æŒæ¡ï¼\n\nè¿™é‡Œæ˜¯æ–‡æ¡£çš„ç´¢å¼•ï¼š\n* [å‡†å¤‡å·¥ä½œ](docs/pre.md)\n* [container](docs/container.md)\n* [pod](docs/pod.md)\n* [deployment](docs/deployment.md)\n* [service](docs/service.md)\n* [ingress](docs/ingress.md)\n* [namespace](docs/namespace.md)\n* [configmap](docs/configmap.md)\n* [secret](docs/secret.md)\n* [job/cronjob](docs/job.md)\n* [helm](docs/helm.md)\n* [dashboard](docs/dashboard.md)\n\nä¸‹é¢æ˜¯æ‰€æœ‰æ–‡æ¡£çš„é›†åˆï¼š\n\n- [kubernetes tutorials](#kubernetes-tutorials)\n  - [å‡†å¤‡å·¥ä½œ](#å‡†å¤‡å·¥ä½œ)\n    - [å®‰è£… docker](#å®‰è£…-docker)\n      - [æ¨èå®‰è£…æ–¹æ³•](#æ¨èå®‰è£…æ–¹æ³•)\n      - [å…¶å®ƒå®‰è£…æ–¹æ³•](#å…¶å®ƒå®‰è£…æ–¹æ³•)\n    - [å®‰è£… minikube](#å®‰è£…-minikube)\n      - [å¯åŠ¨ minikube](#å¯åŠ¨-minikube)\n    - [å®‰è£… kubectl](#å®‰è£…-kubectl)\n    - [æ³¨å†Œ docker hub è´¦å·ç™»å½•](#æ³¨å†Œ-docker-hub-è´¦å·ç™»å½•)\n  - [Container](#container)\n  - [Pod](#pod)\n    - [Pod ä¸ Container çš„ä¸åŒ](#pod-ä¸-container-çš„ä¸åŒ)\n    - [Pod å…¶å®ƒå‘½ä»¤](#pod-å…¶å®ƒå‘½ä»¤)\n  - [Deployment](#deployment)\n    - [æ‰©å®¹](#æ‰©å®¹)\n    - [å‡çº§ç‰ˆæœ¬](#å‡çº§ç‰ˆæœ¬)\n    - [Rolling Update(æ»šåŠ¨æ›´æ–°)](#rolling-updateæ»šåŠ¨æ›´æ–°)\n    - [å­˜æ´»æ¢é’ˆ (livenessProb)](#å­˜æ´»æ¢é’ˆ-livenessprob)\n    - [å°±ç»ªæ¢é’ˆ (readiness)](#å°±ç»ªæ¢é’ˆ-readiness)\n  - [Service](#service)\n    - [ClusterIP](#clusterip)\n    - [NodePort](#nodeport)\n    - [LoadBalancer](#loadbalancer)\n  - [ingress](#ingress)\n  - [Namespace](#namespace)\n  - [Configmap](#configmap)\n  - [Secret](#secret)\n  - [Job](#job)\n  - [CronJob](#cronjob)\n  - [Helm](#helm)\n    - [ç”¨ helm å®‰è£… hellok8s](#ç”¨-helm-å®‰è£…-hellok8s)\n    - [åˆ›å»º helm charts](#åˆ›å»º-helm-charts)\n      - [rollback](#rollback)\n      - [å¤šç¯å¢ƒé…ç½®](#å¤šç¯å¢ƒé…ç½®)\n    - [helm chart æ‰“åŒ…å’Œå‘å¸ƒ](#helm-chart-æ‰“åŒ…å’Œå‘å¸ƒ)\n  - [Dashboard](#dashboard)\n    - [kubernetes dashboard](#kubernetes-dashboard)\n    - [K9s](#k9s)\n  - [Sponsor](#sponsor)\n  - [Star History](#star-history)\n\n# kubernetes tutorials\n\n## å‡†å¤‡å·¥ä½œ\n\nåœ¨å¼€å§‹æœ¬æ•™ç¨‹ä¹‹å‰ï¼Œéœ€è¦é…ç½®å¥½æœ¬åœ°ç¯å¢ƒï¼Œä»¥ä¸‹æ˜¯éœ€è¦å®‰è£…çš„ä¾èµ–å’ŒåŒ…ã€‚\n\n### å®‰è£… docker\n\né¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£… `docker` æ¥æ‰“åŒ…é•œåƒï¼Œå¦‚æœä½ æœ¬åœ°å·²ç»å®‰è£…äº† `docker`ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€‰æ‹©è·³è¿‡è¿™ä¸€å°èŠ‚ã€‚\n\n#### æ¨èå®‰è£…æ–¹æ³•\n\nç›®å‰ä½¿ç”¨ [Docker Desktop](https://www.docker.com/products/docker-desktop/) æ¥å®‰è£… docker è¿˜æ˜¯æœ€ç®€å•çš„æ–¹æ¡ˆï¼Œæ‰“å¼€å®˜ç½‘ä¸‹è½½å¯¹åº”ä½ ç”µè„‘æ“ä½œç³»ç»Ÿçš„åŒ…å³å¯ (https://www.docker.com/products/docker-desktop/)ï¼Œ\n\nå½“å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ `docker run hello-world` æ¥å¿«é€Ÿæ ¡éªŒæ˜¯å¦å®‰è£…æˆåŠŸï¼\n\n#### å…¶å®ƒå®‰è£…æ–¹æ³•\n\nç›®å‰  Docker å…¬å¸å®£å¸ƒ  [Docker Desktop](https://www.docker.com/products/docker-desktop/) åªå¯¹ä¸ªäººå¼€å‘è€…æˆ–è€…å°å‹å›¢ä½“å…è´¹ (2021å¹´èµ·å¯¹å¤§å‹å…¬å¸ä¸å†å…è´¹)ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸èƒ½é€šè¿‡  [Docker Desktop](https://www.docker.com/products/docker-desktop/) çš„æ–¹å¼ä¸‹è½½å®‰è£… `docker`ï¼Œå¯ä»¥å‚è€ƒ [è¿™ç¯‡æ–‡ç« ](https://dhwaneetbhatt.com/blog/run-docker-without-docker-desktop-on-macos) åªå®‰è£…  [Docker CLI](https://github.com/docker/cli)ã€‚\n\n### å®‰è£… minikube\n\næˆ‘ä»¬è¿˜éœ€è¦æ­å»ºä¸€å¥— k8s æœ¬åœ°é›†ç¾¤ (ä½¿ç”¨äº‘å‚å•†æˆ–è€…å…¶å®ƒ k8s é›†ç¾¤éƒ½å¯) ã€‚æœ¬åœ°æ­å»º k8s é›†ç¾¤çš„æ–¹å¼æ¨èä½¿ç”¨ [minikube](https://minikube.sigs.k8s.io/docs/)ã€‚\n\nå¯ä»¥æ ¹æ® [minikube å¿«é€Ÿå®‰è£…](https://minikube.sigs.k8s.io/docs/start/) æ¥è¿›è¡Œä¸‹è½½å®‰è£…ï¼Œè¿™é‡Œç®€å•åˆ—ä¸¾ MacOS çš„å®‰è£…æ–¹å¼ï¼ŒLinux & Windows æ“ä½œç³»ç»Ÿå¯ä»¥å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://minikube.sigs.k8s.io/docs/start/) å¿«é€Ÿå®‰è£…ã€‚\n\n```shell\nbrew install minikube\n```\n\n#### å¯åŠ¨ minikube\n\nå› ä¸º minikube æ”¯æŒå¾ˆå¤šå®¹å™¨å’Œè™šæ‹ŸåŒ–æŠ€æœ¯ ([Docker](https://minikube.sigs.k8s.io/docs/drivers/docker/), [Hyperkit](https://minikube.sigs.k8s.io/docs/drivers/hyperkit/), [Hyper-V](https://minikube.sigs.k8s.io/docs/drivers/hyperv/), [KVM](https://minikube.sigs.k8s.io/docs/drivers/kvm2/), [Parallels](https://minikube.sigs.k8s.io/docs/drivers/parallels/), [Podman](https://minikube.sigs.k8s.io/docs/drivers/podman/), [VirtualBox](https://minikube.sigs.k8s.io/docs/drivers/virtualbox/), or [VMware Fusion/Workstation](https://minikube.sigs.k8s.io/docs/drivers/vmware/))ï¼Œä¹Ÿæ˜¯é—®é¢˜å‡ºç°æ¯”è¾ƒå¤šçš„åœ°æ–¹ï¼Œæ‰€ä»¥è¿™é‡Œè¿˜æ˜¯ç¨å¾®è¯´æ˜ä¸€ä¸‹ã€‚\n\nå¦‚æœä½ ä½¿ç”¨ `docker` çš„æ–¹æ¡ˆæ˜¯ä¸Šé¢æ¨èçš„ [Docker Desktop](https://www.docker.com/products/docker-desktop/) ï¼Œé‚£ä¹ˆä½ ä»¥ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨ minikube å³å¯ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ä¸‹è½½ä¾èµ–ã€‚\n\n```shell\nminikube start --vm-driver docker --container-runtime=docker\n```\n\nå¯åŠ¨å®Œæˆåï¼Œè¿è¡Œ `minikube status` æŸ¥çœ‹å½“å‰çŠ¶æ€ç¡®å®šæ˜¯å¦å¯åŠ¨æˆåŠŸï¼\n\nå¦‚æœä½ æœ¬åœ°åªæœ‰ Docker CLIï¼Œåˆ¤æ–­æ ‡å‡†å¦‚æœæ‰§è¡Œ `docker ps` ç­‰å‘½ä»¤ï¼Œè¿”å›é”™è¯¯ `Cannot connect to the Docker daemon at unix:///Users/xxxx/.colima/docker.sock. Is the docker daemon running?` é‚£ä¹ˆå°±éœ€è¦æ“ä½œä¸‹é¢çš„å‘½ä»¤ã€‚\n\n```shell\nbrew install hyperkit\nminikube start --vm-driver hyperkit --container-runtime=docker\n\n# Tell Docker CLI to talk to minikube's VM\neval $(minikube docker-env)\n\n# Save IP to a hostname\necho \"`minikube ip` docker.local\" | sudo tee -a /etc/hosts > /dev/null\n\n# Test\ndocker run hello-world\n```\n\n**minikube å‘½ä»¤é€ŸæŸ¥**\n\n`minikube stop` ä¸ä¼šåˆ é™¤ä»»ä½•æ•°æ®ï¼Œåªæ˜¯åœæ­¢ VM å’Œ k8s é›†ç¾¤ã€‚\n\n`minikube delete` åˆ é™¤æ‰€æœ‰ minikube å¯åŠ¨åçš„æ•°æ®ã€‚\n\n`minikube ip` æŸ¥çœ‹é›†ç¾¤å’Œ docker enginer è¿è¡Œçš„ IP åœ°å€ã€‚\n\n`minikube pause` æš‚åœå½“å‰çš„èµ„æºå’Œ k8s é›†ç¾¤\n\n`minikube status` æŸ¥çœ‹å½“å‰é›†ç¾¤çŠ¶æ€\n\n### å®‰è£… kubectl\n\nè¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸å®‰è£…çš„è¯ï¼Œåç»­æ‰€æœ‰ `kubectl` ç›¸å…³çš„å‘½ä»¤ï¼Œä½¿ç”¨ `minikube kubectl` å‘½ä»¤æ›¿ä»£å³å¯ã€‚\n\nå¦‚æœä½ ä¸æƒ³ä½¿ç”¨ `minikube kubectl` æˆ–è€…é…ç½®ç›¸å…³ç¯å¢ƒå˜é‡æ¥è¿›è¡Œä¸‹é¢çš„æ•™å­¦çš„è¯ï¼Œå¯ä»¥è€ƒè™‘ç›´æ¥å®‰è£… `kubectl`ã€‚\n\nä»¥ä¸‹ä¸ºMacOS çš„å®‰è£…æ–¹å¼ï¼ŒLinux & Windows æ“ä½œç³»ç»Ÿå¯ä»¥å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://kubernetes.io/zh-cn/docs/tasks/tools/)å¿«é€Ÿå®‰è£…ã€‚\n\n```shell\nbrew install kubectl\n```\n\n### æ³¨å†Œ docker hub è´¦å·ç™»å½•\n\nå› ä¸ºé»˜è®¤ minikube ä½¿ç”¨çš„é•œåƒåœ°å€æ˜¯ DockerHubï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åœ¨ DockerHub (https://hub.docker.com/) ä¸­æ³¨å†Œè´¦å·ï¼Œå¹¶ä¸”ä½¿ç”¨ login å‘½ä»¤ç™»å½•è´¦å·ã€‚\n\n```shell\ndocker login\n```\n\n## Container\n\næˆ‘ä»¬çš„æ—…ç¨‹ä»ä¸€æ®µä»£ç å¼€å§‹ã€‚æ–°å»ºä¸€ä¸ª `main.go` æ–‡ä»¶ï¼Œå¤åˆ¶ä¸‹é¢çš„ä»£ç åˆ°æ–‡ä»¶ä¸­ã€‚\n\n```go\npackage main\n\nimport (\n\t\"io\"\n\t\"net/http\"\n)\n\nfunc hello(w http.ResponseWriter, r *http.Request) {\n\tio.WriteString(w, \"[v1] Hello, Kubernetes!\")\n}\n\nfunc main() {\n\thttp.HandleFunc(\"/\", hello)\n\thttp.ListenAndServe(\":3000\", nil)\n}\n```\n\nä¸Šé¢æ˜¯ä¸€ä¸²ç”¨ [Go](https://go.dev/) å†™çš„ä»£ç ï¼Œä»£ç é€»è¾‘éå¸¸çš„ç®€å•ï¼Œé¦–å…ˆå¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬ `3000` ç«¯å£ï¼Œå½“è®¿é—®è·¯ç”± `/`çš„æ—¶å€™ è¿”å›å­—ç¬¦ä¸² `[v1] Hello, Kubernetes!`ã€‚\n\nåœ¨ä»¥å‰ï¼Œå¦‚æœä½ æƒ³å°†è¿™æ®µä»£ç è¿è¡Œèµ·æ¥å¹¶æµ‹è¯•ä¸€ä¸‹ã€‚ä½ é¦–å…ˆéœ€è¦æ‡‚å¾—å¦‚ä½•ä¸‹è½½ golang çš„å®‰è£…åŒ…è¿›è¡Œå®‰è£…ï¼Œæ¥ç€éœ€è¦æ‡‚å¾— `golang module` çš„åŸºæœ¬ä½¿ç”¨ï¼Œæœ€åè¿˜éœ€è¦äº†è§£ golang çš„ç¼–è¯‘å’Œè¿è¡Œå‘½ä»¤ï¼Œæ‰èƒ½å°†è¯¥ä»£ç è¿è¡Œèµ·æ¥ã€‚ç”šè‡³åœ¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå› ä¸ºç¯å¢ƒå˜é‡é—®é¢˜ã€æ“ä½œç³»ç»Ÿé—®é¢˜ã€å¤„ç†å™¨æ¶æ„ç­‰é—®é¢˜å¯¼è‡´ç¼–è¯‘æˆ–è¿è¡Œå¤±è´¥ã€‚\n\nä½†æ˜¯é€šè¿‡ Container (å®¹å™¨) æŠ€æœ¯ï¼Œåªéœ€è¦ä¸Šé¢çš„ä»£ç ï¼Œé™„å¸¦ç€å¯¹åº”çš„å®¹å™¨ `Dockerfile` æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦ golang çš„ä»»ä½•çŸ¥è¯†ï¼Œä¹Ÿèƒ½å°†ä»£ç é¡ºåˆ©è¿è¡Œèµ·æ¥ã€‚\n\n> Container (å®¹å™¨) æ˜¯ä¸€ç§æ²™ç›’æŠ€æœ¯ã€‚å®ƒæ˜¯åŸºäº Linux ä¸­ Namespace / Cgroups / chroot ç­‰æŠ€æœ¯ç»„åˆè€Œæˆï¼Œæ›´å¤šæŠ€æœ¯ç»†èŠ‚å¯ä»¥å‚ç…§è¿™ä¸ªè§†é¢‘ [å¦‚ä½•è‡ªå·±å®ç°ä¸€ä¸ªå®¹å™¨](https://www.youtube.com/watch?v=8fi7uSYlOdc)ã€‚\n\nä¸‹é¢å°±æ˜¯ Go ä»£ç å¯¹åº”çš„ `Dockerfile`ï¼Œç®€å•çš„æ–¹æ¡ˆæ˜¯ç›´æ¥ä½¿ç”¨ golang çš„ alpine é•œåƒæ¥æ‰“åŒ…ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬åç»­ç»ƒä¹ éœ€è¦é¢‘ç¹çš„æ¨é€é•œåƒåˆ° DockerHub å’Œæ‹‰å–é•œåƒåˆ° k8s é›†ç¾¤ä¸­ï¼Œä¸ºäº†ä¼˜åŒ–ç½‘ç»œé€Ÿåº¦ï¼Œæˆ‘ä»¬é€‰æ‹©å…ˆåœ¨ `golang:1.16-buster` ä¸­å°†ä¸Šè¿° Go ä»£ç ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†å°†äºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ° `base-debian10` é•œåƒä¸­è¿è¡Œ (Dockerfile ä¸ç†è§£æ²¡æœ‰å…³ç³»ï¼Œä¸å½±å“åç»­å­¦ä¹ )ã€‚\n\nè¿™æ ·æˆ‘ä»¬å¯ä»¥å°† 300MB å¤§å°çš„é•œåƒå˜æˆåªæœ‰ 20MB çš„é•œåƒï¼Œç”šè‡³å‹ç¼©ä¸Šä¼ åˆ° DockerHub åå¤§å°åªæœ‰ 10MBï¼\n\n```dockerfile\n# Dockerfile\nFROM golang:1.16-buster AS builder\nRUN mkdir /src\nADD . /src\nWORKDIR /src\n\nRUN go env -w GO111MODULE=auto\nRUN go build -o main .\n\nFROM gcr.io/distroless/base-debian10\n\nWORKDIR /\n\nCOPY --from=builder /src/main /main\nEXPOSE 3000\nENTRYPOINT [\"/main\"]\n```\n\néœ€è¦æ³¨æ„ `main.go` æ–‡ä»¶éœ€è¦å’Œ `Dockerfile` æ–‡ä»¶åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹æ–¹ `docker build` å‘½ä»¤ï¼Œç¬¬ä¸€æ¬¡éœ€è¦è€å¿ƒç­‰å¾…æ‹‰å–åŸºç¡€é•œåƒã€‚å¹¶ä¸”**éœ€è¦æ³¨æ„å°†å‘½ä»¤ä¸­ `guangzhengli` æ›¿æ¢æˆè‡ªå·±çš„ `DockerHub` æ³¨å†Œçš„è´¦å·åç§°**ã€‚ è¿™æ ·æˆ‘ä»¬åç»­å¯ä»¥æ¨é€é•œåƒåˆ°è‡ªå·±æ³¨å†Œçš„  `DockerHub` ä»“åº“å½“ä¸­ã€‚\n\n```shell\ndocker build . -t guangzhengli/hellok8s:v1\n# Step 1/11 : FROM golang:1.16-buster AS builder\n# ...\n# ...\n# Step 11/11 : ENTRYPOINT [\"/main\"]\n# Successfully tagged guangzhengli/hellok8s:v1\n\n\ndocker images\n# guangzhengli/hellok8s          v1         f956e8cf7d18   8 days ago      25.4MB\n```\n\n `docker build`  å‘½ä»¤å®Œæˆåæˆ‘ä»¬å¯ä»¥é€šè¿‡ `docker images` å‘½ä»¤æŸ¥çœ‹é•œåƒæ˜¯å¦ build æˆåŠŸï¼Œæœ€åæˆ‘ä»¬æ‰§è¡Œ `docker run` å‘½ä»¤å°†å®¹å™¨å¯åŠ¨ï¼Œ `-p` æŒ‡å®š `3000` ä½œä¸ºç«¯å£ï¼Œ`-d` æŒ‡å®šå®¹å™¨åå°è¿è¡Œã€‚\n\n```shell\ndocker run -p 3000:3000 --name hellok8s -d guangzhengli/hellok8s:v1\n```\n\nè¿è¡ŒæˆåŠŸåï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨æˆ–è€… `curl` æ¥è®¿é—® `http://127.0.0.1:3000` , æŸ¥çœ‹æ˜¯å¦æˆåŠŸè¿”å›å­—ç¬¦ä¸² `[v1] Hello, Kubernetes!`ã€‚\n\nè¿™é‡Œå› ä¸ºæˆ‘æœ¬åœ°åªç”¨ Docker CLIï¼Œè€Œ docker runtime æ˜¯ä½¿ç”¨ `minikube`ï¼Œæ‰€ä»¥æˆ‘éœ€è¦å…ˆè°ƒç”¨  `minikube ip` æ¥è¿”å› minikube IP åœ°å€ï¼Œä¾‹å¦‚è¿”å›äº† `192.168.59.100`ï¼Œæ‰€ä»¥æˆ‘éœ€è¦è®¿é—®  `http://192.168.59.100:3000` æ¥åˆ¤æ–­æ˜¯å¦æˆåŠŸè¿”å›å­—ç¬¦ä¸² `[v1] Hello, Kubernetes!`ã€‚\n\næœ€åç¡®è®¤æ²¡æœ‰é—®é¢˜ï¼Œä½¿ç”¨ `docker push` å°†é•œåƒä¸Šä¼ åˆ°è¿œç¨‹çš„ `DockerHub` ä»“åº“å½“ä¸­ï¼Œè¿™æ ·å¯ä»¥ä¾›ä»–äººä¸‹è½½ä½¿ç”¨ï¼Œä¹Ÿæ–¹ä¾¿åç»­  `Minikube` ä¸‹è½½é•œåƒä½¿ç”¨ã€‚  **éœ€è¦æ³¨æ„å°† `guangzhengli` æ›¿æ¢æˆè‡ªå·±çš„ `DockerHub` è´¦å·åç§°**ã€‚\n\n```shell\ndocker push guangzhengli/hellok8s:v1\n```\n\nç»è¿‡è¿™ä¸€èŠ‚çš„ç»ƒä¹ ï¼Œæœ‰æ²¡æœ‰å¯¹å®¹å™¨çš„å¼ºå¤§æœ‰ä¸€ä¸ªåˆæ­¥çš„è®¤è¯†å‘¢ï¼Ÿå¯ä»¥æƒ³è±¡å½“ä½ æƒ³éƒ¨ç½²ä¸€ä¸ªæ›´å¤æ‚çš„æœåŠ¡æ—¶ï¼Œä¾‹å¦‚ Nginxï¼ŒMySQLï¼ŒRedisã€‚ä½ åªéœ€è¦åˆ° [DockerHub æœç´¢](https://hub.docker.com/search?q=) ä¸­æœç´¢å¯¹åº”çš„é•œåƒï¼Œé€šè¿‡ `docker pull` ä¸‹è½½é•œåƒï¼Œ`docker run` å¯åŠ¨æœåŠ¡å³å¯ï¼è€Œæ— éœ€å…³å¿ƒä¾èµ–å’Œå„ç§é…ç½®ï¼\n\n## Pod\n\nå¦‚æœåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œçš„éƒ½æ˜¯ç‹¬ç«‹çš„å•ä½“æœåŠ¡ï¼Œé‚£ä¹ˆ Container (å®¹å™¨) ä¹Ÿå°±å¤Ÿç”¨äº†ï¼Œä½†æ˜¯åœ¨å®é™…çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç»´æŠ¤ç€å¤§è§„æ¨¡çš„é›†ç¾¤å’Œå„ç§ä¸åŒçš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´å¾€å¾€å­˜åœ¨ç€å„ç§å„æ ·çš„å…³ç³»ã€‚è€Œè¿™äº›å…³ç³»çš„å¤„ç†ï¼Œæ‰æ˜¯æ‰‹åŠ¨ç®¡ç†æœ€å›°éš¾çš„åœ°æ–¹ã€‚\n\n**Pod** æ˜¯æˆ‘ä»¬å°†è¦åˆ›å»ºçš„ç¬¬ä¸€ä¸ª k8s èµ„æºï¼Œä¹Ÿæ˜¯å¯ä»¥åœ¨ Kubernetes ä¸­åˆ›å»ºå’Œç®¡ç†çš„ã€æœ€å°çš„å¯éƒ¨ç½²çš„è®¡ç®—å•å…ƒã€‚åœ¨äº†è§£ `pod` å’Œ  `container` çš„åŒºåˆ«ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„ pod è¯•è¯•ï¼Œ  \n\næˆ‘ä»¬å…ˆåˆ›å»º `nginx.yaml` æ–‡ä»¶ï¼Œç¼–å†™ä¸€ä¸ªå¯ä»¥åˆ›å»º `nginx` çš„ Podã€‚\n\n```yaml\n# nginx.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx-pod\nspec:\n  containers:\n    - name: nginx-container\n      image: nginx\n```\n\nå…¶ä¸­  `kind` è¡¨ç¤ºæˆ‘ä»¬è¦åˆ›å»ºçš„èµ„æºæ˜¯ `Pod` ç±»å‹ï¼Œ  `metadata.name` è¡¨ç¤ºè¦åˆ›å»ºçš„ pod çš„åå­—ï¼Œè¿™ä¸ªåå­—éœ€è¦æ˜¯å”¯ä¸€çš„ã€‚   `spec.containers` è¡¨ç¤ºè¦è¿è¡Œçš„å®¹å™¨çš„åç§°å’Œé•œåƒåç§°ã€‚é•œåƒé»˜è®¤æ¥æº `DockerHub`ã€‚\n\næˆ‘ä»¬è¿è¡Œç¬¬ä¸€æ¡ k8s å‘½ä»¤ `kubectl apply -f nginx.yaml` å‘½ä»¤æ¥åˆ›å»º `nginx`  Podã€‚\n\næ¥ç€é€šè¿‡ `kubectl get pods` æ¥æŸ¥çœ‹ pod æ˜¯å¦æ­£å¸¸å¯åŠ¨ã€‚\n\næœ€åé€šè¿‡ `kubectl port-forward nginx-pod 4000:80` å‘½ä»¤å°† `nginx` é»˜è®¤çš„ `80` ç«¯å£æ˜ å°„åˆ°æœ¬æœºçš„ `4000` ç«¯å£ï¼Œæ‰“å¼€æµè§ˆå™¨æˆ–è€… `curl` æ¥è®¿é—® `http://127.0.0.1:4000` , æŸ¥çœ‹æ˜¯å¦æˆåŠŸè®¿é—® `nginx` é»˜è®¤é¡µé¢ï¼\n\n``` shell\nkubectl apply -f nginx.yaml        \n# pod/nginx-pod created\n\nkubectl get pods\n# nginx-pod         1/1     Running   0           6s\n\nkubectl port-forward nginx-pod 4000:80\n# Forwarding from 127.0.0.1:4000 -> 80\n# Forwarding from [::1]:4000 -> 80\n```\n\n`kubectl exec -it` å¯ä»¥ç”¨æ¥è¿›å…¥ Pod å†…å®¹å™¨çš„ Shellã€‚é€šè¿‡å‘½ä»¤ä¸‹é¢çš„å‘½ä»¤æ¥é…ç½® `nginx` çš„é¦–é¡µå†…å®¹ã€‚\n\n```shell\nkubectl exec -it nginx-pod -- /bin/bash\n\necho \"hello kubernetes by nginx!\" > /usr/share/nginx/html/index.html\n\nkubectl port-forward nginx-pod 4000:80\n```\n\næœ€åå¯ä»¥é€šè¿‡æµè§ˆå™¨æˆ–è€… `curl` æ¥è®¿é—® `http://127.0.0.1:4000` , æŸ¥çœ‹æ˜¯å¦æˆåŠŸå¯åŠ¨ `nginx` å’Œè¿”å›å­—ç¬¦ä¸² `hello kubernetes by nginx!`ã€‚\n\n### Pod ä¸ Container çš„ä¸åŒ\n\nå›åˆ° `pod` å’Œ  `container` çš„åŒºåˆ«ï¼Œæˆ‘ä»¬ä¼šå‘ç°åˆšåˆšåˆ›å»ºå‡ºæ¥çš„èµ„æºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨æœ€å†…å±‚æ˜¯æˆ‘ä»¬çš„æœåŠ¡ `nginx`ï¼Œè¿è¡Œåœ¨ `container` å®¹å™¨å½“ä¸­ï¼Œ `container` (å®¹å™¨) çš„æœ¬è´¨æ˜¯è¿›ç¨‹ï¼Œè€Œ `pod` æ˜¯ç®¡ç†è¿™ä¸€ç»„è¿›ç¨‹çš„èµ„æºã€‚\n\n![nginx_pod](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/nginx_pod.png)\n\næ‰€ä»¥è‡ªç„¶ `pod` å¯ä»¥ç®¡ç†å¤šä¸ª `container`ï¼Œåœ¨æŸäº›åœºæ™¯ä¾‹å¦‚æœåŠ¡ä¹‹é—´éœ€è¦æ–‡ä»¶äº¤æ¢(æ—¥å¿—æ”¶é›†)ï¼Œæœ¬åœ°ç½‘ç»œé€šä¿¡éœ€æ±‚(ä½¿ç”¨ localhost æˆ–è€… Socket æ–‡ä»¶è¿›è¡Œæœ¬åœ°é€šä¿¡)ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸­ä½¿ç”¨ `pod` ç®¡ç†å¤šä¸ª `container` å°±éå¸¸çš„æ¨èã€‚è€Œè¿™ï¼Œä¹Ÿæ˜¯ k8s å¦‚ä½•å¤„ç†æœåŠ¡ä¹‹é—´å¤æ‚å…³ç³»çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![pod](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/pod.png)\n\n### Pod å…¶å®ƒå‘½ä»¤\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡ `logs` æˆ–è€… `logs -f` å‘½ä»¤æŸ¥çœ‹ pod æ—¥å¿—ï¼Œå¯ä»¥é€šè¿‡ `exec -it` è¿›å…¥ pod æˆ–è€…è°ƒç”¨å®¹å™¨å‘½ä»¤ï¼Œé€šè¿‡ `delete pod` æˆ–è€…  `delete -f nginx.yaml` çš„æ–¹å¼åˆ é™¤ pod èµ„æºã€‚è¿™é‡Œå¯ä»¥çœ‹åˆ° [kubectl æ‰€æœ‰å‘½ä»¤](https://kubernetes.io/docs/reference/kubectl/cheatsheet/)ã€‚\n\n```shell\nkubectlÂ logsÂ --followÂ nginx-pod\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \nkubectl exec nginx-pod -- ls\n\nkubectl delete pod nginx-pod\n# pod \"nginx-pod\" deleted\n\nkubectl delete -f nginx.yaml\n# pod \"nginx-pod\" deleted\n```\n\næœ€åï¼Œæ ¹æ®æˆ‘ä»¬åœ¨ `container` çš„é‚£èŠ‚æ„å»ºçš„ `hellok8s:v1` çš„é•œåƒï¼ŒåŒæ—¶å‚è€ƒ `nginx` pod çš„èµ„æºå®šä¹‰ï¼Œä½ èƒ½ç‹¬è‡ªç¼–å†™å‡º  `hellok8s:v1`  Pod çš„èµ„æºæ–‡ä»¶å—ã€‚å¹¶é€šè¿‡ `port-forward` åˆ°æœ¬åœ°çš„ `3000` ç«¯å£è¿›è¡Œè®¿é—®ï¼Œæœ€ç»ˆå¾—åˆ°å­—ç¬¦ä¸² `[v1] Hello, Kubernetes!`ã€‚\n\n`hellok8s:v1` Pod èµ„æºå®šä¹‰å’Œç›¸åº”çš„å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```yaml\n# hellok8s.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: hellok8s\nspec:\n  containers:\n    - name: hellok8s-container\n      image: guangzhengli/hellok8s:v1\n```\n\n```shell\nkubectl apply -f hellok8s.yaml\n\nkubectl get pods\n\nkubectl port-forward hellok8s 3000:3000\n```\n\n## Deployment\n\nåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šä¸ä¼šç›´æ¥ç®¡ç† podï¼Œæˆ‘ä»¬éœ€è¦ `kubernetes` æ¥å¸®åŠ©æˆ‘ä»¬æ¥å®Œæˆä¸€äº›è‡ªåŠ¨åŒ–æ“ä½œï¼Œä¾‹å¦‚è‡ªåŠ¨æ‰©å®¹æˆ–è€…è‡ªåŠ¨å‡çº§ç‰ˆæœ¬ã€‚å¯ä»¥æƒ³è±¡åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬æ‰‹åŠ¨éƒ¨ç½²äº† 10 ä¸ª `hellok8s:v1` çš„ podï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å‡çº§æˆ `hellok8s:v2` ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éš¾é“éœ€è¦ä¸€ä¸ªä¸€ä¸ªçš„å°† `hellok8s:v1` çš„ pod æ‰‹åŠ¨å‡çº§å—ï¼Ÿ\n\nè¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬æ¥çœ‹ `kubernetes` çš„å¦å¤–ä¸€ä¸ªèµ„æº `deployment`ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬ç®¡ç† podã€‚\n\n### æ‰©å®¹\n\né¦–å…ˆå¯ä»¥åˆ›å»ºä¸€ä¸ª `deployment.yaml` çš„æ–‡ä»¶ã€‚æ¥ç®¡ç† `hellok8s` podã€‚\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: hellok8s-deployment\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: hellok8s\n  template:\n    metadata:\n      labels:\n        app: hellok8s\n    spec:\n      containers:\n        - image: guangzhengli/hellok8s:v1\n          name: hellok8s-container\n```\n\nå…¶ä¸­  `kind` è¡¨ç¤ºæˆ‘ä»¬è¦åˆ›å»ºçš„èµ„æºæ˜¯ `deployment` ç±»å‹ï¼Œ  `metadata.name` è¡¨ç¤ºè¦åˆ›å»ºçš„ deployment çš„åå­—ï¼Œè¿™ä¸ªåå­—éœ€è¦æ˜¯**å”¯ä¸€**çš„ã€‚\n\nåœ¨ `spec` é‡Œé¢è¡¨ç¤ºï¼Œé¦–å…ˆ `replicas` è¡¨ç¤ºçš„æ˜¯éƒ¨ç½²çš„ pod å‰¯æœ¬æ•°é‡ï¼Œ`selector` é‡Œé¢è¡¨ç¤ºçš„æ˜¯ `deployment` èµ„æºå’Œ `pod` èµ„æºå…³è”çš„æ–¹å¼ï¼Œè¿™é‡Œè¡¨ç¤º `deployment` ä¼šç®¡ç† (selector) æ‰€æœ‰ `labels=hellok8s` çš„ podã€‚\n\n`template` çš„å†…å®¹æ˜¯ç”¨æ¥å®šä¹‰ `pod` èµ„æºçš„ï¼Œä½ ä¼šå‘ç°å’Œ Hellok8s Pod èµ„æºçš„å®šä¹‰æ˜¯å·®ä¸å¤šçš„ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯æˆ‘ä»¬éœ€è¦åŠ ä¸Š `metadata.labels` æ¥å’Œä¸Šé¢çš„ `selector.matchLabels` å¯¹åº”èµ·æ¥ã€‚æ¥è¡¨æ˜ pod æ˜¯è¢« deployment ç®¡ç†ï¼Œä¸ç”¨åœ¨`template` é‡Œé¢åŠ ä¸Š `metadata.name` æ˜¯å› ä¸º deployment ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»º pod çš„å”¯ä¸€`name`ã€‚\n\næ¥ä¸‹æ¥è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥åˆ›å»º `deployment` èµ„æºã€‚é€šè¿‡ `get` å’Œ `delete pod` å‘½ä»¤ï¼Œæˆ‘ä»¬ä¼šåˆæ­¥æ„Ÿå— deployment çš„é­…åŠ›ã€‚**æ¯æ¬¡åˆ›å»ºçš„ pod åç§°éƒ½ä¼šå˜åŒ–ï¼ŒæŸäº›å‘½ä»¤è®°å¾—æ›¿æ¢æˆä½ çš„ pod çš„åç§°**\n\n```shell\nkubectl apply -f deployment.yaml\n\nkubectl get deployments\n#NAME                  READY   UP-TO-DATE   AVAILABLE   AGE\n#hellok8s-deployment   1/1     1            1           39s\n\nkubectl get pods             \n#NAME                                   READY   STATUS    RESTARTS   AGE\n#hellok8s-deployment-77bffb88c5-qlxss   1/1     Running   0          119s\n\nkubectl delete pod hellok8s-deployment-77bffb88c5-qlxss \n#pod \"hellok8s-deployment-77bffb88c5-qlxss\" deleted\n\nkubectl get pods                                       \n#NAME                                   READY   STATUS    RESTARTS   AGE\n#hellok8s-deployment-77bffb88c5-xp8f7   1/1     Running   0          18s\n```\n\næˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼Œå½“æ‰‹åŠ¨åˆ é™¤ä¸€ä¸ª `pod` èµ„æºåï¼Œdeployment ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ `pod`ï¼Œè¿™å’Œæˆ‘ä»¬ä¹‹å‰æ‰‹åŠ¨åˆ›å»º pod èµ„æºæœ‰æœ¬è´¨çš„åŒºåˆ«ï¼è¿™ä»£è¡¨ç€å½“ç”Ÿäº§ç¯å¢ƒç®¡ç†ç€æˆåƒä¸Šä¸‡ä¸ª pod æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒå…·ä½“çš„æƒ…å†µï¼Œåªéœ€è¦ç»´æŠ¤å¥½è¿™ä»½ `deployment.yaml` æ–‡ä»¶çš„èµ„æºå®šä¹‰å³å¯ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡è‡ªåŠ¨æ‰©å®¹æ¥åŠ æ·±è¿™ä¸ªçŸ¥è¯†ç‚¹ï¼Œå½“æˆ‘ä»¬æƒ³è¦å°† `hellok8s:v1` çš„èµ„æºæ‰©å®¹åˆ° 3 ä¸ªå‰¯æœ¬æ—¶ï¼Œåªéœ€è¦å°† `replicas` çš„å€¼è®¾ç½®æˆ 3ï¼Œæ¥ç€é‡æ–°è¾“å…¥ `kubectl apply -f deployment.yaml` å³å¯ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: hellok8s-deployment\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: hellok8s\n  template:\n    metadata:\n      labels:\n        app: hellok8s\n    spec:\n      containers:\n        - image: guangzhengli/hellok8s:v1\n          name: hellok8s-container\n```\n\nå¯ä»¥åœ¨ `kubectl apply` ä¹‹å‰é€šè¿‡æ–°å»ºçª—å£æ‰§è¡Œ `kubectl get pods --watch` å‘½ä»¤æ¥è§‚å¯Ÿ pod å¯åŠ¨å’Œåˆ é™¤çš„è®°å½•ï¼Œæƒ³è¦å‡å°‘å‰¯æœ¬æ•°æ—¶ä¹Ÿå¾ˆç®€å•ï¼Œä½ å¯ä»¥å°è¯•å°†å‰¯æœ¬æ•°éšæ„å¢å¤§æˆ–è€…ç¼©å°ï¼Œå†é€šè¿‡ `watch` æ¥è§‚å¯Ÿå®ƒçš„çŠ¶æ€ã€‚\n\n![deployment](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/deployment.png)\n\n### å‡çº§ç‰ˆæœ¬\n\næˆ‘ä»¬æ¥ä¸‹æ¥å°è¯•å°†æ‰€æœ‰ `v1` ç‰ˆæœ¬çš„ `pod` å‡çº§åˆ° `v2` ç‰ˆæœ¬ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä»½ `hellok8s:v2` çš„ç‰ˆæœ¬é•œåƒã€‚å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å­—ç¬¦ä¸²æ›¿æ¢æˆäº† `[v2] Hello, Kubernetes!`ã€‚\n\n```go\npackage main\n\nimport (\n\t\"io\"\n\t\"net/http\"\n)\n\nfunc hello(w http.ResponseWriter, r *http.Request) {\n\tio.WriteString(w, \"[v2] Hello, Kubernetes!\")\n}\n\nfunc main() {\n\thttp.HandleFunc(\"/\", hello)\n\thttp.ListenAndServe(\":3000\", nil)\n}\n```\n\nå°† `hellok8s:v2` æ¨åˆ° DockerHub ä»“åº“ä¸­ã€‚\n\n```shell\ndocker build . -t guangzhengli/hellok8s:v2\ndocker push guangzhengli/hellok8s:v2\n```\n\næ¥ç€ç¼–å†™ `v2` ç‰ˆæœ¬çš„ deployment èµ„æºæ–‡ä»¶ã€‚\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: hellok8s-deployment\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: hellok8s\n  template:\n    metadata:\n      labels:\n        app: hellok8s\n    spec:\n      containers:\n        - image: guangzhengli/hellok8s:v2\n          name: hellok8s-container\n```\n\n```shell\nkubectl apply -f deployment.yaml\n# deployment.apps/hellok8s-deployment configured\n\nkubectl get pods                \n# NAME                                   READY   STATUS    RESTARTS   AGE\n# hellok8s-deployment-66799848c4-kpc6q   1/1     Running   0          3s\n# hellok8s-deployment-66799848c4-pllj6   1/1     Running   0          3s\n# hellok8s-deployment-66799848c4-r7qtg   1/1     Running   0          3s\n\nkubectl port-forward hellok8s-deployment-66799848c4-kpc6q 3000:3000\n# Forwarding from 127.0.0.1:3000 -> 3000\n# Forwarding from [::1]:3000 -> 3000\n\n# open another terminal\ncurl http://localhost:3000\n# [v2] Hello, Kubernetes!\n```\n\nä½ ä¹Ÿå¯ä»¥è¾“å…¥ `kubectl describe pod hellok8s-deployment-66799848c4-kpc6q` æ¥çœ‹æ˜¯å¦æ˜¯ `v2` ç‰ˆæœ¬çš„é•œåƒã€‚\n\n### Rolling Update(æ»šåŠ¨æ›´æ–°)\n\nå¦‚æœæˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šï¼Œç®¡ç†ç€å¤šä¸ªå‰¯æœ¬çš„ `hellok8s:v1` ç‰ˆæœ¬çš„ podï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°åˆ° `v2` çš„ç‰ˆæœ¬ï¼Œåƒä¸Šé¢é‚£æ ·çš„éƒ¨ç½²æ–¹å¼æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¹Ÿä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ‰€æœ‰çš„å‰¯æœ¬åœ¨åŒä¸€æ—¶é—´æ›´æ–°ï¼Œè¿™ä¼šå¯¼è‡´æˆ‘ä»¬ `hellok8s` æœåŠ¡åœ¨çŸ­æ—¶é—´å†…æ˜¯ä¸å¯ç”¨çš„ï¼Œå› ä¸ºæ‰€æœ‰ pod éƒ½åœ¨å‡çº§åˆ° `v2` ç‰ˆæœ¬çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç­‰å¾…æŸä¸ª pod å‡çº§å®Œæˆåæ‰èƒ½æä¾›æœåŠ¡ã€‚\n\nè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ»šåŠ¨æ›´æ–° (rolling update)ï¼Œåœ¨ä¿è¯æ–°ç‰ˆæœ¬ `v2` çš„ pod è¿˜æ²¡æœ‰ `ready` ä¹‹å‰ï¼Œå…ˆä¸åˆ é™¤ `v1` ç‰ˆæœ¬çš„ podã€‚\n\nåœ¨ deployment çš„èµ„æºå®šä¹‰ä¸­, `spec.strategy.type` æœ‰ä¸¤ç§é€‰æ‹©:\n\n- **RollingUpdate:** é€æ¸å¢åŠ æ–°ç‰ˆæœ¬çš„ podï¼Œé€æ¸å‡å°‘æ—§ç‰ˆæœ¬çš„ podã€‚\n- **Recreate:** åœ¨æ–°ç‰ˆæœ¬çš„ pod å¢åŠ å‰ï¼Œå…ˆå°†æ‰€æœ‰æ—§ç‰ˆæœ¬ pod åˆ é™¤ã€‚\n\nå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä¼šé‡‡ç”¨æ»šåŠ¨æ›´æ–° (RollingUpdate) çš„æ–¹å¼ï¼Œæ»šåŠ¨æ›´æ–°åˆå¯ä»¥é€šè¿‡ `maxSurge` å’Œ `maxUnavailable` å­—æ®µæ¥æ§åˆ¶å‡çº§ pod çš„é€Ÿç‡ï¼Œå…·ä½“å¯ä»¥è¯¦ç»†çœ‹[å®˜ç½‘å®šä¹‰](https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/deployment/)ã€‚ï¼š\n\n- [**maxSurge:**](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#max-surge) æœ€å¤§å³°å€¼ï¼Œç”¨æ¥æŒ‡å®šå¯ä»¥åˆ›å»ºçš„è¶…å‡ºæœŸæœ› Pod ä¸ªæ•°çš„ Pod æ•°é‡ã€‚\n- [**maxUnavailable:**](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#max-unavailable,) æœ€å¤§ä¸å¯ç”¨ï¼Œç”¨æ¥æŒ‡å®šæ›´æ–°è¿‡ç¨‹ä¸­ä¸å¯ç”¨çš„ Pod çš„ä¸ªæ•°ä¸Šé™ã€‚\n\næˆ‘ä»¬å…ˆè¾“å…¥å‘½ä»¤å›æ»šæˆ‘ä»¬çš„ deploymentï¼Œè¾“å…¥ `kubectl describe pod` ä¼šå‘ç° deployment å·²ç»æŠŠ `v2` ç‰ˆæœ¬çš„ pod å›æ»šåˆ° ` v1` çš„ç‰ˆæœ¬ã€‚\n\n``` shell\nkubectlÂ rolloutÂ undoÂ deploymentÂ hellok8s-deployment\n\nkubectl get pods                                    \n# NAME                                   READY   STATUS    RESTARTS   AGE\n# hellok8s-deployment-77bffb88c5-cvm5c   1/1     Running   0          39s\n# hellok8s-deployment-77bffb88c5-lktbl   1/1     Running   0          41s\n# hellok8s-deployment-77bffb88c5-nh82z   1/1     Running   0          37s\n\nkubectl describe pod hellok8s-deployment-77bffb88c5-cvm5c\n# Image: guangzhengli/hellok8s:v1\n```\n\né™¤äº†ä¸Šé¢çš„å‘½ä»¤ï¼Œè¿˜å¯ä»¥ç”¨ `history` æ¥æŸ¥çœ‹å†å²ç‰ˆæœ¬ï¼Œ`--to-revision=2` æ¥å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ã€‚\n\n```shell\nkubectl rollout history deployment hellok8s-deployment\nkubectl rollout undo deployment/hellok8s-deployment --to-revision=2\n```\n\næ¥ç€è®¾ç½® `strategy=rollingUpdate` , `maxSurge=1` , `maxUnavailable=1` å’Œ `replicas=3`  åˆ° deployment.yaml æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªå‚æ•°é…ç½®æ„å‘³ç€æœ€å¤§å¯èƒ½ä¼šåˆ›å»º 4 ä¸ª hellok8s pod (replicas + maxSurge)ï¼Œæœ€å°ä¼šæœ‰ 2 ä¸ª hellok8s pod å­˜æ´» (replicas - maxUnavailable)ã€‚\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: hellok8s-deployment\nspec:\n  strategy:\n     rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 1\n  replicas: 3\n  selector:\n    matchLabels:\n      app: hellok8s\n  template:\n    metadata:\n      labels:\n        app: hellok8s\n    spec:\n      containers:\n      - image: guangzhengli/hellok8s:v2\n        name: hellok8s-container\n```\n\nä½¿ç”¨ `kubectl apply -f deployment.yaml` æ¥é‡æ–°åˆ›å»º `v2` çš„èµ„æºï¼Œå¯ä»¥é€šè¿‡ `kubectl get pods --watch` æ¥è§‚å¯Ÿ pod çš„åˆ›å»ºé”€æ¯æƒ…å†µï¼Œæ˜¯å¦å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\n![rollingupdate](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/rollingupdate.png)\n\n### å­˜æ´»æ¢é’ˆ (livenessProb)\n\n> å­˜æ´»æ¢æµ‹å™¨æ¥ç¡®å®šä»€ä¹ˆæ—¶å€™è¦é‡å¯å®¹å™¨ã€‚ ä¾‹å¦‚ï¼Œå­˜æ´»æ¢æµ‹å™¨å¯ä»¥æ¢æµ‹åˆ°åº”ç”¨æ­»é”ï¼ˆåº”ç”¨ç¨‹åºåœ¨è¿è¡Œï¼Œä½†æ˜¯æ— æ³•ç»§ç»­æ‰§è¡Œåé¢çš„æ­¥éª¤ï¼‰æƒ…å†µã€‚ é‡å¯è¿™ç§çŠ¶æ€ä¸‹çš„å®¹å™¨æœ‰åŠ©äºæé«˜åº”ç”¨çš„å¯ç”¨æ€§ï¼Œå³ä½¿å…¶ä¸­å­˜åœ¨ç¼ºé™·ã€‚-- [LivenessProb](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/)\n\nåœ¨ç”Ÿäº§ä¸­ï¼Œæœ‰æ—¶å€™å› ä¸ºæŸäº› bug å¯¼è‡´åº”ç”¨æ­»é”æˆ–è€…çº¿ç¨‹è€—å°½äº†ï¼Œæœ€ç»ˆä¼šå¯¼è‡´åº”ç”¨æ— æ³•ç»§ç»­æä¾›æœåŠ¡ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæ²¡æœ‰æ‰‹æ®µæ¥è‡ªåŠ¨ç›‘æ§å’Œå¤„ç†è¿™ä¸€é—®é¢˜çš„è¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¾ˆé•¿ä¸€æ®µæ—¶é—´æ— äººå‘ç°ã€‚[kubelet](https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet/) ä½¿ç”¨å­˜æ´»æ¢æµ‹å™¨ (livenessProb) æ¥ç¡®å®šä»€ä¹ˆæ—¶å€™è¦é‡å¯å®¹å™¨ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬å†™ä¸€ä¸ª `/healthz` æ¥å£æ¥è¯´æ˜ `livenessProb` å¦‚ä½•ä½¿ç”¨ã€‚ `/healthz` æ¥å£ä¼šåœ¨å¯åŠ¨æˆåŠŸçš„ 15s å†…æ­£å¸¸è¿”å› 200 çŠ¶æ€ç ï¼Œåœ¨ 15s åï¼Œä¼šä¸€ç›´è¿”å› 500 çš„çŠ¶æ€ç ã€‚\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"io\"\n\t\"net/http\"\n\t\"time\"\n)\n\nfunc hello(w http.ResponseWriter, r *http.Request) {\n\tio.WriteString(w, \"[v2] Hello, Kubernetes!\")\n}\n\nfunc main() {\n\tstarted := time.Now()\n\thttp.HandleFunc(\"/healthz\", func(w http.ResponseWriter, r *http.Request) {\n\t\tduration := time.Since(started)\n\t\tif duration.Seconds() > 15 {\n\t\t\tw.WriteHeader(500)\n\t\t\tw.Write([]byte(fmt.Sprintf(\"error: %v\", duration.Seconds())))\n\t\t} else {\n\t\t\tw.WriteHeader(200)\n\t\t\tw.Write([]byte(\"ok\"))\n\t\t}\n\t})\n\n\thttp.HandleFunc(\"/\", hello)\n\thttp.ListenAndServe(\":3000\", nil)\n}\n```\n\n```yaml\n# Dockerfile\nFROM golang:1.16-buster AS builder\nRUN mkdir /src\nADD . /src\nWORKDIR /src\n\nRUN go env -w GO111MODULE=auto\nRUN go build -o main .\n\nFROM gcr.io/distroless/base-debian10\n\nWORKDIR /\n\nCOPY --from=builder /src/main /main\nEXPOSE 3000\nENTRYPOINT [\"/main\"]\n```\n\n`Dockerfile` çš„ç¼–å†™å’ŒåŸæ¥ä¿æŒä¸€è‡´ï¼Œæˆ‘ä»¬æŠŠ `tag` ä¿®æ”¹ä¸º `liveness` å¹¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚\n\n```shell\ndocker build . -t guangzhengli/hellok8s:liveness\ndocker push guangzhengli/hellok8s:liveness\n```\n\næœ€åç¼–å†™ deployment çš„å®šä¹‰ï¼Œè¿™é‡Œä½¿ç”¨å­˜æ´»æ¢æµ‹æ–¹å¼æ˜¯ä½¿ç”¨ HTTP GET è¯·æ±‚ï¼Œè¯·æ±‚çš„æ˜¯åˆšæ‰å®šä¹‰çš„ `/healthz` æ¥å£ï¼Œ`periodSeconds` å­—æ®µæŒ‡å®šäº† kubelet æ¯éš” 3 ç§’æ‰§è¡Œä¸€æ¬¡å­˜æ´»æ¢æµ‹ã€‚ `initialDelaySeconds` å­—æ®µå‘Šè¯‰ kubelet åœ¨æ‰§è¡Œç¬¬ä¸€æ¬¡æ¢æµ‹å‰åº”è¯¥ç­‰å¾… 3 ç§’ã€‚å¦‚æœæœåŠ¡å™¨ä¸Š `/healthz` è·¯å¾„ä¸‹çš„å¤„ç†ç¨‹åºè¿”å›æˆåŠŸä»£ç ï¼Œåˆ™ kubelet è®¤ä¸ºå®¹å™¨æ˜¯å¥åº·å­˜æ´»çš„ã€‚ å¦‚æœå¤„ç†ç¨‹åºè¿”å›å¤±è´¥ä»£ç ï¼Œåˆ™ kubelet ä¼šæ€æ­»è¿™ä¸ªå®¹å™¨å¹¶å°†å…¶é‡å¯ã€‚\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: hellok8s-deployment\nspec:\n  strategy:\n     rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 1\n  replicas: 3\n  selector:\n    matchLabels:\n      app: hellok8s\n  template:\n    metadata:\n      labels:\n        app: hellok8s\n    spec:\n      containers:\n        - image: guangzhengli/hellok8s:liveness\n          name: hellok8s-container\n          livenessProbe:\n            httpGet:\n              path: /healthz\n              port: 3000\n            initialDelaySeconds: 3\n            periodSeconds: 3\n```\n\né€šè¿‡ `get` æˆ–è€… `describe` å‘½ä»¤å¯ä»¥å‘ç° pod ä¸€ç›´å¤„äºé‡å¯å½“ä¸­ã€‚\n\n```shell\nkubectl apply -f deployment.yaml\n\nkubectl get pods\n# NAME                                   READY   STATUS    RESTARTS     AGE\n# hellok8s-deployment-5995ff9447-d5fbz   1/1     Running   4 (6s ago)   102s\n# hellok8s-deployment-5995ff9447-gz2cx   1/1     Running   4 (5s ago)   101s\n# hellok8s-deployment-5995ff9447-rh29x   1/1     Running   4 (6s ago)   102s\n\nkubectl describe pod hellok8s-68f47f657c-zwn6g\n\n# ...\n# ...\n# ...\n# Events:\n#  Type     Reason     Age                   From               Message\n#  ----     ------     ----                  ----               -------\n#  Normal   Scheduled  12m                   default-scheduler  Successfully assigned default/hellok8s-deployment-5995ff9447-rh29x to minikube\n#  Normal   Pulled     11m (x4 over 12m)     kubelet            Container image \"guangzhengli/hellok8s:liveness\" already present on machine\n#  Normal   Created    11m (x4 over 12m)     kubelet            Created container hellok8s-container\n#  Normal   Started    11m (x4 over 12m)     kubelet            Started container hellok8s-container\n#  Normal   Killing    11m (x3 over 12m)     kubelet            Container hellok8s-container failed liveness probe, will be restarted\n#  Warning  Unhealthy  11m (x10 over 12m)    kubelet            Liveness probe failed: HTTP probe failed with statuscode: 500\n#  Warning  BackOff    2m41s (x36 over 10m)  kubelet            Back-off restarting failed container\n```\n\n### å°±ç»ªæ¢é’ˆ (readiness)\n\n> å°±ç»ªæ¢æµ‹å™¨å¯ä»¥çŸ¥é“å®¹å™¨ä½•æ—¶å‡†å¤‡å¥½æ¥å—è¯·æ±‚æµé‡ï¼Œå½“ä¸€ä¸ª Pod å†…çš„æ‰€æœ‰å®¹å™¨éƒ½å°±ç»ªæ—¶ï¼Œæ‰èƒ½è®¤ä¸ºè¯¥ Pod å°±ç»ªã€‚ è¿™ç§ä¿¡å·çš„ä¸€ä¸ªç”¨é€”å°±æ˜¯æ§åˆ¶å“ªä¸ª Pod ä½œä¸º Service çš„åç«¯ã€‚ è‹¥ Pod å°šæœªå°±ç»ªï¼Œä¼šè¢«ä» Service çš„è´Ÿè½½å‡è¡¡å™¨ä¸­å‰”é™¤ã€‚-- [ReadinessProb](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/)\n\nåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå‡çº§æœåŠ¡çš„ç‰ˆæœ¬æ˜¯æ—¥å¸¸çš„éœ€æ±‚ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸€ç§åœºæ™¯ï¼Œå³å½“å‘å¸ƒçš„ç‰ˆæœ¬å­˜åœ¨é—®é¢˜ï¼Œå°±ä¸åº”è¯¥è®©å®ƒå‡çº§æˆåŠŸã€‚kubelet ä½¿ç”¨å°±ç»ªæ¢æµ‹å™¨å¯ä»¥çŸ¥é“å®¹å™¨ä½•æ—¶å‡†å¤‡å¥½æ¥å—è¯·æ±‚æµé‡ï¼Œå½“ä¸€ä¸ª pod å‡çº§åä¸èƒ½å°±ç»ªï¼Œå³ä¸åº”è¯¥è®©æµé‡è¿›å…¥è¯¥ podï¼Œåœ¨é…åˆ `rollingUpate` çš„åŠŸèƒ½ä¸‹ï¼Œä¹Ÿä¸èƒ½å…è®¸å‡çº§ç‰ˆæœ¬ç»§ç»­ä¸‹å»ï¼Œå¦åˆ™æœåŠ¡ä¼šå‡ºç°å…¨éƒ¨å‡çº§å®Œæˆï¼Œå¯¼è‡´æ‰€æœ‰æœåŠ¡å‡ä¸å¯ç”¨çš„æƒ…å†µã€‚\n\nè¿™é‡Œæˆ‘ä»¬æŠŠæœåŠ¡å›æ»šåˆ° `hellok8s:v2` çš„ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡ä¸Šé¢å­¦ä¹ çš„æ–¹æ³•è¿›è¡Œå›æ»šã€‚\n\n```shell\nkubectl rollout undo deployment hellok8s-deployment --to-revision=2\n```\n\nè¿™é‡Œæˆ‘ä»¬å°†åº”ç”¨çš„ `/healthz` æ¥å£ç›´æ¥è®¾ç½®æˆè¿”å› 500 çŠ¶æ€ç ï¼Œä»£è¡¨è¯¥ç‰ˆæœ¬æ˜¯ä¸€ä¸ªæœ‰é—®é¢˜çš„ç‰ˆæœ¬ã€‚\n\n```go\npackage main\n\nimport (\n\t\"io\"\n\t\"net/http\"\n)\n\nfunc hello(w http.ResponseWriter, r *http.Request) {\n\tio.WriteString(w, \"[v2] Hello, Kubernetes!\")\n}\n\nfunc main() {\n\thttp.HandleFunc(\"/healthz\", func(w http.ResponseWriter, r *http.Request) {\n\t\t\tw.WriteHeader(500)\n\t})\n\n\thttp.HandleFunc(\"/\", hello)\n\thttp.ListenAndServe(\":3000\", nil)\n}\n```\n\nåœ¨ `build` é˜¶æ®µæˆ‘ä»¬å°† `tag` è®¾ç½®ä¸º `bad`ï¼Œæ‰“åŒ…å push åˆ°è¿œç¨‹ä»“åº“ã€‚\n\n``` shell\ndocker build . -t guangzhengli/hellok8s:bad\n\ndocker push guangzhengli/hellok8s:bad\n```\n\næ¥ç€ç¼–å†™ deployment èµ„æºæ–‡ä»¶ï¼Œ[Probe](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.25/#probe-v1-core) æœ‰å¾ˆå¤šé…ç½®å­—æ®µï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›å­—æ®µç²¾ç¡®åœ°æ§åˆ¶å°±ç»ªæ£€æµ‹çš„è¡Œä¸ºï¼š\n\n- `initialDelaySeconds`ï¼šå®¹å™¨å¯åŠ¨åè¦ç­‰å¾…å¤šå°‘ç§’åæ‰å¯åŠ¨å­˜æ´»å’Œå°±ç»ªæ¢æµ‹å™¨ï¼Œ é»˜è®¤æ˜¯ 0 ç§’ï¼Œæœ€å°å€¼æ˜¯ 0ã€‚\n- `periodSeconds`ï¼šæ‰§è¡Œæ¢æµ‹çš„æ—¶é—´é—´éš”ï¼ˆå•ä½æ˜¯ç§’ï¼‰ã€‚é»˜è®¤æ˜¯ 10 ç§’ã€‚æœ€å°å€¼æ˜¯ 1ã€‚\n- `timeoutSeconds`ï¼šæ¢æµ‹çš„è¶…æ—¶åç­‰å¾…å¤šå°‘ç§’ã€‚é»˜è®¤å€¼æ˜¯ 1 ç§’ã€‚æœ€å°å€¼æ˜¯ 1ã€‚\n- `successThreshold`ï¼šæ¢æµ‹å™¨åœ¨å¤±è´¥åï¼Œè¢«è§†ä¸ºæˆåŠŸçš„æœ€å°è¿ç»­æˆåŠŸæ•°ã€‚é»˜è®¤å€¼æ˜¯ 1ã€‚ å­˜æ´»å’Œå¯åŠ¨æ¢æµ‹çš„è¿™ä¸ªå€¼å¿…é¡»æ˜¯ 1ã€‚æœ€å°å€¼æ˜¯ 1ã€‚\n- `failureThreshold`ï¼šå½“æ¢æµ‹å¤±è´¥æ—¶ï¼ŒKubernetes çš„é‡è¯•æ¬¡æ•°ã€‚ å¯¹å­˜æ´»æ¢æµ‹è€Œè¨€ï¼Œæ”¾å¼ƒå°±æ„å‘³ç€é‡æ–°å¯åŠ¨å®¹å™¨ã€‚ å¯¹å°±ç»ªæ¢æµ‹è€Œè¨€ï¼Œæ”¾å¼ƒæ„å‘³ç€ Pod ä¼šè¢«æ‰“ä¸Šæœªå°±ç»ªçš„æ ‡ç­¾ã€‚é»˜è®¤å€¼æ˜¯ 3ã€‚æœ€å°å€¼æ˜¯ 1ã€‚\n\n``` yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: hellok8s-deployment\nspec:\n  strategy:\n     rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 1\n  replicas: 3\n  selector:\n    matchLabels:\n      app: hellok8s\n  template:\n    metadata:\n      labels:\n        app: hellok8s\n    spec:\n      containers:\n        - image: guangzhengli/hellok8s:bad\n          name: hellok8s-container\n          readinessProbe:\n            httpGet:\n              path: /healthz\n              port: 3000\n            initialDelaySeconds: 1\n            successThreshold: 5\n```\n\né€šè¿‡ `get` å‘½ä»¤å¯ä»¥å‘ç°ä¸¤ä¸ª pod ä¸€ç›´å¤„äºè¿˜æ²¡æœ‰ Ready çš„çŠ¶æ€å½“ä¸­ï¼Œé€šè¿‡ `describe` å‘½ä»¤å¯ä»¥çœ‹åˆ°æ˜¯å› ä¸º `Readiness probe failed: HTTP probe failed with statuscode: 500` çš„åŸå› ã€‚åˆå› ä¸ºè®¾ç½®äº†æœ€å°ä¸å¯ç”¨çš„æœåŠ¡æ•°é‡ä¸º`maxUnavailable=1`ï¼Œè¿™æ ·èƒ½ä¿è¯å‰©ä¸‹ä¸¤ä¸ª `v2` ç‰ˆæœ¬çš„ `hellok8s` èƒ½ç»§ç»­æä¾›æœåŠ¡ï¼\n\n```shell\nkubectl apply -f deployment.yaml\n\nkubectl get pods                \n# NAME                                   READY   STATUS    RESTARTS   AGE\n# hellok8s-deployment-66799848c4-8xzsz   1/1     Running   0          102s\n# hellok8s-deployment-66799848c4-m9dl5   1/1     Running   0          102s\n# hellok8s-deployment-9c57c7f56-rww7k    0/1     Running   0          26s\n# hellok8s-deployment-9c57c7f56-xt9tw    0/1     Running   0          26s\n\n\nkubectl describe pod hellok8s-deployment-9c57c7f56-rww7k\n# Events:\n#   Type     Reason     Age                From               Message\n#   ----     ------     ----               ----               -------\n#   Normal   Scheduled  74s                default-scheduler  Successfully assigned default/hellok8s-deployment-9c57c7f56-rww7k to minikube\n#   Normal   Pulled     73s                kubelet            Container image \"guangzhengli/hellok8s:bad\" already present on machine\n#   Normal   Created    73s                kubelet            Created container hellok8s-container\n#   Normal   Started    73s                kubelet            Started container hellok8s-container\n#   Warning  Unhealthy  0s (x10 over 72s)  kubelet            Readiness probe failed: HTTP probe failed with statuscode: 500\n```\n\n## Service\n\nç»è¿‡å‰é¢å‡ èŠ‚çš„ç»ƒä¹ ï¼Œå¯èƒ½ä½ ä¼šæœ‰ä¸€äº›ç–‘æƒ‘ï¼š\n\n* ä¸ºä»€ä¹ˆ pod ä¸å°±ç»ª (Ready) çš„è¯ï¼Œ`kubernetes` ä¸ä¼šå°†æµé‡é‡å®šå‘åˆ°è¯¥ podï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ\n* å‰é¢è®¿é—®æœåŠ¡çš„æ–¹å¼æ˜¯é€šè¿‡ `port-forword` å°† pod çš„ç«¯å£æš´éœ²åˆ°æœ¬åœ°ï¼Œä¸ä»…éœ€è¦å†™å¯¹ pod çš„åå­—ï¼Œä¸€æ—¦ deployment é‡æ–°åˆ›å»ºæ–°çš„ podï¼Œpod åå­—å’Œ IP åœ°å€ä¹Ÿä¼šéšä¹‹å˜åŒ–ï¼Œå¦‚ä½•ä¿è¯ç¨³å®šçš„è®¿é—®åœ°å€å‘¢ï¼Ÿã€‚\n* å¦‚æœä½¿ç”¨ deployment éƒ¨ç½²äº†å¤šä¸ª Pod å‰¯æœ¬ï¼Œå¦‚ä½•åšè´Ÿè½½å‡è¡¡å‘¢ï¼Ÿ\n\n`kubernetes` æä¾›äº†ä¸€ç§åå« `Service` çš„èµ„æºå¸®åŠ©è§£å†³è¿™äº›é—®é¢˜ï¼Œå®ƒä¸º pod æä¾›ä¸€ä¸ªç¨³å®šçš„ Endpointã€‚Service ä½äº pod çš„å‰é¢ï¼Œè´Ÿè´£æ¥æ”¶è¯·æ±‚å¹¶å°†å®ƒä»¬ä¼ é€’ç»™å®ƒåé¢çš„æ‰€æœ‰podã€‚ä¸€æ—¦æœåŠ¡ä¸­çš„ Pod é›†åˆå‘ç”Ÿæ›´æ”¹ï¼ŒEndpoints å°±ä¼šè¢«æ›´æ–°ï¼Œè¯·æ±‚çš„é‡å®šå‘è‡ªç„¶ä¹Ÿä¼šå¯¼å‘æœ€æ–°çš„ podã€‚\n\n### ClusterIP\n\næˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ `Service` é»˜è®¤ä½¿ç”¨çš„ `ClusterIP` ç±»å‹ï¼Œé¦–å…ˆåšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œåœ¨ä¹‹å‰çš„ `hellok8s:v2` ç‰ˆæœ¬ä¸ŠåŠ ä¸Šè¿”å›å½“å‰æœåŠ¡æ‰€åœ¨çš„ `hostname` åŠŸèƒ½ï¼Œå‡çº§åˆ° `v3` ç‰ˆæœ¬ã€‚\n\n``` go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"io\"\n\t\"net/http\"\n\t\"os\"\n)\n\nfunc hello(w http.ResponseWriter, r *http.Request) {\n\thost, _ := os.Hostname()\n\tio.WriteString(w, fmt.Sprintf(\"[v3] Hello, Kubernetes!, From host: %s\", host))\n}\n\nfunc main() {\n\thttp.HandleFunc(\"/\", hello)\n\thttp.ListenAndServe(\":3000\", nil)\n}\n```\n\n`Dockerfile` å’Œä¹‹å‰ä¿æŒä¸€è‡´ï¼Œæ‰“åŒ… `tag=v3` å¹¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚\n\n``` shell\ndocker build . -t guangzhengli/hellok8s:v3\n\ndocker push guangzhengli/hellok8s:v3\n```\n\nä¿®æ”¹ deployment çš„ `hellok8s` ä¸º `v3` ç‰ˆæœ¬ã€‚æ‰§è¡Œ `kubectl apply -f deployment.yaml` æ›´æ–° deploymentã€‚\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: hellok8s-deployment\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: hellok8s\n  template:\n    metadata:\n      labels:\n        app: hellok8s\n    spec:\n      containers:\n        - image: guangzhengli/hellok8s:v3\n          name: hellok8s-container\n```\n\næ¥ä¸‹æ¥æ˜¯ `Service` èµ„æºçš„å®šä¹‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ `ClusterIP` çš„æ–¹å¼å®šä¹‰ Serviceï¼Œé€šè¿‡ `kubernetes` é›†ç¾¤çš„å†…éƒ¨ IP æš´éœ²æœåŠ¡ï¼Œå½“æˆ‘ä»¬åªéœ€è¦è®©é›†ç¾¤ä¸­è¿è¡Œçš„å…¶ä»–åº”ç”¨ç¨‹åºè®¿é—®æˆ‘ä»¬çš„ pod æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§ç±»å‹çš„Serviceã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ª service-hellok8s-clusterip.yaml` æ–‡ä»¶ã€‚\n\n``` yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: service-hellok8s-clusterip\nspec:\n  type: ClusterIP\n  selector:\n    app: hellok8s\n  ports:\n  - port: 3000\n    targetPort: 3000\n```\n\né¦–å…ˆé€šè¿‡ `kubectl get endpoints` æ¥çœ‹çœ‹ Endpointã€‚è¢« selector é€‰ä¸­çš„ Podï¼Œå°±ç§°ä¸º Service çš„ Endpointsã€‚å®ƒç»´æŠ¤ç€ Pod çš„ IP åœ°å€ï¼Œåªè¦æœåŠ¡ä¸­çš„ Pod é›†åˆå‘ç”Ÿæ›´æ”¹ï¼ŒEndpoints å°±ä¼šè¢«æ›´æ–°ã€‚é€šè¿‡ `kubectl get pod -o wide` å‘½ä»¤è·å– Pod æ›´å¤šçš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ° 3 ä¸ª Pod çš„ IP åœ°å€å’Œ Endpoints ä¸­æ˜¯ä¿æŒä¸€è‡´çš„ï¼Œä½ å¯ä»¥è¯•è¯•å¢å¤§æˆ–å‡å°‘ Deployment ä¸­ Pod çš„ replicasï¼Œè§‚å¯Ÿ Endpoints ä¼šä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚\n\n```shell\nkubectl apply -f service-hellok8s-clusterip.yaml\n\nkubectl get endpoints\n# NAME                         ENDPOINTS                                          AGE\n# service-hellok8s-clusterip   172.17.0.10:3000,172.17.0.2:3000,172.17.0.3:3000   10s\n\nkubectl get pod -o wide\n# NAME                                   READY   STATUS    RESTARTS   AGE    IP           NODE \n# hellok8s-deployment-5d5545b69c-24lw5   1/1     Running   0          112s   172.17.0.7   minikube \n# hellok8s-deployment-5d5545b69c-9g94t   1/1     Running   0          112s   172.17.0.3   minikube\n# hellok8s-deployment-5d5545b69c-9gm8r   1/1     Running   0          112s   172.17.0.2   minikube\n# nginx                                  1/1     Running   0          112s   172.17.0.9   minikube\n\nkubectl get service\n# NAME                         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE\n# service-hellok8s-clusterip   ClusterIP   10.104.96.153   <none>        3000/TCP   10s\n```\n\næ¥ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨é›†ç¾¤å…¶å®ƒåº”ç”¨ä¸­è®¿é—® `service-hellok8s-clusterip` çš„ IP åœ°å€ `10.104.96.153` æ¥è®¿é—® `hellok8s:v3` æœåŠ¡ã€‚\n\nè¿™é‡Œé€šè¿‡åœ¨é›†ç¾¤å†…åˆ›å»ºä¸€ä¸ª `nginx` æ¥è®¿é—® `hellok8s` æœåŠ¡ã€‚åˆ›å»ºåè¿›å…¥ `nginx` å®¹å™¨æ¥ç”¨ `curl` å‘½ä»¤è®¿é—® `service-hellok8s-clusterip` ã€‚\n\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx\n  labels:\n    app: nginx\nspec:\n  containers:\n    - name: nginx-container\n      image: nginx\n```\n\n```shell\nkubectl get pods\n# NAME                                   READY   STATUS    RESTARTS   AGE\n# hellok8s-deployment-5d5545b69c-24lw5   1/1     Running   0          27m\n# hellok8s-deployment-5d5545b69c-9g94t   1/1     Running   0          27m\n# hellok8s-deployment-5d5545b69c-9gm8r   1/1     Running   0          27m\n# nginx                                  1/1     Running   0          41m\n\nkubectl get service\n# NAME                         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE\n# service-hellok8s-clusterip   ClusterIP   10.104.96.153   <none>        3000/TCP   10s\n\nkubectl exec -it nginx-pod -- /bin/bash\n# root@nginx-pod:/# curl 10.104.96.153:3000\n# [v3] Hello, Kubernetes!, From host: hellok8s-deployment-5d5545b69c-9gm8r\n# root@nginx-pod:/# curl 10.104.96.153:3000\n#[v3] Hello, Kubernetes!, From host: hellok8s-deployment-5d5545b69c-9g94t\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¤šæ¬¡ `curl 10.104.96.153:3000` è®¿é—® `hellok8s` Service IP åœ°å€ï¼Œè¿”å›çš„ `hellok8s:v3` `hostname` ä¸ä¸€æ ·ï¼Œè¯´æ˜ Service å¯ä»¥æ¥æ”¶è¯·æ±‚å¹¶å°†å®ƒä»¬ä¼ é€’ç»™å®ƒåé¢çš„æ‰€æœ‰ podï¼Œè¿˜å¯ä»¥è‡ªåŠ¨è´Ÿè½½å‡è¡¡ã€‚ä½ ä¹Ÿå¯ä»¥è¯•è¯•å¢åŠ æˆ–è€…å‡å°‘ `hellok8s:v3` pod å‰¯æœ¬æ•°é‡ï¼Œè§‚å¯Ÿ Service çš„è¯·æ±‚æ˜¯å¦ä¼šåŠ¨æ€å˜æ›´ã€‚è°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![service-clusterip-fix-name](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/service-clusterip-fix-name.png)\n\né™¤äº†ä¸Šè¿°çš„ `ClusterIp` çš„æ–¹å¼å¤–ï¼ŒKubernetes `ServiceTypes` å…è®¸æŒ‡å®šä½ æ‰€éœ€è¦çš„ Service ç±»å‹ï¼Œé»˜è®¤æ˜¯ `ClusterIP`ã€‚`Type` çš„å€¼åŒ…æ‹¬å¦‚ä¸‹ï¼š\n\n- `ClusterIP`ï¼šé€šè¿‡é›†ç¾¤çš„å†…éƒ¨ IP æš´éœ²æœåŠ¡ï¼Œé€‰æ‹©è¯¥å€¼æ—¶æœåŠ¡åªèƒ½å¤Ÿåœ¨é›†ç¾¤å†…éƒ¨è®¿é—®ã€‚ è¿™ä¹Ÿæ˜¯é»˜è®¤çš„ `ServiceType`ã€‚\n- [`NodePort`](https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport)ï¼šé€šè¿‡æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ IP å’Œé™æ€ç«¯å£ï¼ˆ`NodePort`ï¼‰æš´éœ²æœåŠ¡ã€‚ `NodePort` æœåŠ¡ä¼šè·¯ç”±åˆ°è‡ªåŠ¨åˆ›å»ºçš„ `ClusterIP` æœåŠ¡ã€‚ é€šè¿‡è¯·æ±‚ `<èŠ‚ç‚¹ IP>:<èŠ‚ç‚¹ç«¯å£>`ï¼Œä½ å¯ä»¥ä»é›†ç¾¤çš„å¤–éƒ¨è®¿é—®ä¸€ä¸ª `NodePort` æœåŠ¡ã€‚\n- [`LoadBalancer`](https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer)ï¼šä½¿ç”¨äº‘æä¾›å•†çš„è´Ÿè½½å‡è¡¡å™¨å‘å¤–éƒ¨æš´éœ²æœåŠ¡ã€‚ å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨å¯ä»¥å°†æµé‡è·¯ç”±åˆ°è‡ªåŠ¨åˆ›å»ºçš„ `NodePort` æœåŠ¡å’Œ `ClusterIP` æœåŠ¡ä¸Šã€‚\n- [`ExternalName`](https://kubernetes.io/docs/concepts/services-networking/service/#externalname)ï¼šé€šè¿‡è¿”å› `CNAME` å’Œå¯¹åº”å€¼ï¼Œå¯ä»¥å°†æœåŠ¡æ˜ å°„åˆ° `externalName` å­—æ®µçš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œ`foo.bar.example.com`ï¼‰ã€‚ æ— éœ€åˆ›å»ºä»»ä½•ç±»å‹ä»£ç†ã€‚\n\n### NodePort\n\næˆ‘ä»¬çŸ¥é“`kubernetes` é›†ç¾¤å¹¶ä¸æ˜¯å•æœºè¿è¡Œï¼Œå®ƒç®¡ç†ç€å¤šå°èŠ‚ç‚¹å³ [Node](https://kubernetes.io/docs/concepts/architecture/nodes/)ï¼Œå¯ä»¥é€šè¿‡æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ IP å’Œé™æ€ç«¯å£ï¼ˆ`NodePort`ï¼‰æš´éœ²æœåŠ¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœé›†ç¾¤å†…æœ‰ä¸¤å° Node è¿è¡Œç€ `hellok8s:v3`ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª `NodePort` ç±»å‹çš„ Serviceï¼Œå°† `hellok8s:v3` çš„ `3000` ç«¯å£æ˜ å°„åˆ° Node æœºå™¨çš„ `30000` ç«¯å£ (åœ¨ 30000-32767 èŒƒå›´å†…)ï¼Œå°±å¯ä»¥é€šè¿‡è®¿é—® `http://node1-ip:30000` æˆ–è€… `http://node2-ip:30000` è®¿é—®åˆ°æœåŠ¡ã€‚\n\n![service-nodeport-fix-name](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/service-nodeport-fix-name.png)\n\nè¿™é‡Œä»¥ `minikube` ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `minikube ip` å‘½ä»¤æ‹¿åˆ° k8s cluster node  IPåœ°å€ã€‚ä¸‹é¢çš„æ•™ç¨‹éƒ½ä»¥æˆ‘æœ¬æœºçš„ `192.168.59.100` ä¸ºä¾‹ï¼Œéœ€è¦æ›¿æ¢æˆä½ çš„ IP åœ°å€ã€‚\n\n```shell\nminikube ip\n# 192.168.59.100\n```\n\næ¥ç€ä»¥ NodePort çš„ ServiceType åˆ›å»ºä¸€ä¸ª Service æ¥æ¥ç®¡ pod æµé‡ã€‚é€šè¿‡`minikube` èŠ‚ç‚¹ä¸Šçš„ IP `192.168.59.100` æš´éœ²æœåŠ¡ã€‚ `NodePort` æœåŠ¡ä¼šè·¯ç”±åˆ°è‡ªåŠ¨åˆ›å»ºçš„ `ClusterIP` æœåŠ¡ã€‚ é€šè¿‡è¯·æ±‚ `<èŠ‚ç‚¹ IP>:<èŠ‚ç‚¹ç«¯å£>` -- `192.168.59.100`:30000ï¼Œä½ å¯ä»¥ä»é›†ç¾¤çš„å¤–éƒ¨è®¿é—®ä¸€ä¸ª `NodePort` æœåŠ¡ï¼Œæœ€ç»ˆé‡å®šå‘åˆ° `hellok8s:v3` çš„ `3000` ç«¯å£ã€‚\n\n```yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: service-hellok8s-nodeport\nspec:\n  type: NodePort\n  selector:\n    app: hellok8s\n  ports:\n  - port: 3000\n    nodePort: 30000\n```\n\nåˆ›å»º `service-hellok8s-nodeport` Service åï¼Œä½¿ç”¨ `curl` å‘½ä»¤æˆ–è€…æµè§ˆå™¨è®¿é—® `http://192.168.59.100:30000` å¯ä»¥å¾—åˆ°ç»“æœã€‚\n\n```shell\nkubectlÂ applyÂ -fÂ service-hellok8s-nodeport.yaml\n\nkubectl get service\n# NAME                         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE\n# service-hellok8s-nodeport    NodePort    10.109.188.161   <none>        3000:30000/TCP   28s\n\nkubectl get pods\n# NAME                                   READY   STATUS    RESTARTS   AGE\n# hellok8s-deployment-5d5545b69c-24lw5   1/1     Running   0          27m\n# hellok8s-deployment-5d5545b69c-9g94t   1/1     Running   0          27m\n# hellok8s-deployment-5d5545b69c-9gm8r   1/1     Running   0          27m\n\ncurl http://192.168.59.100:30000\n# [v3] Hello, Kubernetes!, From host: hellok8s-deployment-5d5545b69c-9g94t\n\ncurl http://192.168.59.100:30000\n# [v3] Hello, Kubernetes!, From host: hellok8s-deployment-5d5545b69c-24lw5\n```\n\n### LoadBalancer\n\n[`LoadBalancer`](https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer) æ˜¯ä½¿ç”¨äº‘æä¾›å•†çš„è´Ÿè½½å‡è¡¡å™¨å‘å¤–éƒ¨æš´éœ²æœåŠ¡ã€‚ å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨å¯ä»¥å°†æµé‡è·¯ç”±åˆ°è‡ªåŠ¨åˆ›å»ºçš„ `NodePort` æœåŠ¡å’Œ `ClusterIP` æœåŠ¡ä¸Šï¼Œå‡å¦‚ä½ åœ¨ [AWS](https://aws.amazon.com) çš„ [EKS](https://aws.amazon.com/eks/) é›†ç¾¤ä¸Šåˆ›å»ºä¸€ä¸ª Type ä¸º `LoadBalancer`  çš„ Serviceã€‚å®ƒä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª ELB ([Elastic Load Balancer](https://aws.amazon.com/elasticloadbalancing)) ï¼Œå¹¶å¯ä»¥æ ¹æ®é…ç½®çš„ IP æ± ä¸­è‡ªåŠ¨åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„ IP åœ°å€ï¼Œå¯ä»¥ä¾›å¤–éƒ¨è®¿é—®ã€‚\n\nè¿™é‡Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ `minikube`ï¼Œå¯ä»¥ä½¿ç”¨ `minikube tunnel` æ¥è¾…åŠ©åˆ›å»º LoadBalancer çš„ `EXTERNAL_IP`ï¼Œå…·ä½“æ•™ç¨‹å¯ä»¥æŸ¥çœ‹[å®˜ç½‘æ–‡æ¡£](https://minikube.sigs.k8s.io/docs/handbook/accessing/#loadbalancer-access)ï¼Œä½†æ˜¯å’Œå®é™…äº‘æä¾›å•†çš„ LoadBalancer è¿˜æ˜¯æœ‰æœ¬è´¨åŒºåˆ«ï¼Œæ‰€ä»¥ [Repository](https://github.com/guangzhengli/kubernetes_workshop) ä¸åšæ›´å¤šé˜è¿°ï¼Œæœ‰æ¡ä»¶çš„å¯ä»¥ä½¿ç”¨ [AWS](https://aws.amazon.com) çš„ [EKS](https://aws.amazon.com/eks/) é›†ç¾¤ä¸Šåˆ›å»ºä¸€ä¸ª ELB ([Elastic Load Balancer](https://aws.amazon.com/elasticloadbalancing)) è¯•è¯•ã€‚\n\nä¸‹å›¾æ˜¾ç¤º LoadBalancer çš„ Service æ¶æ„å›¾ã€‚\n\n![service-loadbalancer-fix-name](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/service-loadbalancer-fix-name.png)\n\n## ingress\n\n[Ingress](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.25/#ingress-v1beta1-networking-k8s-io) å…¬å¼€ä»é›†ç¾¤å¤–éƒ¨åˆ°é›†ç¾¤å†…[æœåŠ¡](https://kubernetes.io/docs/concepts/services-networking/service/)çš„ HTTP å’Œ HTTPS è·¯ç”±ã€‚ æµé‡è·¯ç”±ç”± Ingress èµ„æºä¸Šå®šä¹‰çš„è§„åˆ™æ§åˆ¶ã€‚Ingress å¯ä¸º Service æä¾›å¤–éƒ¨å¯è®¿é—®çš„ URLã€è´Ÿè½½å‡è¡¡æµé‡ã€ SSL/TLSï¼Œä»¥åŠåŸºäºåç§°çš„è™šæ‹Ÿæ‰˜ç®¡ã€‚ä½ å¿…é¡»æ‹¥æœ‰ä¸€ä¸ª [Ingress æ§åˆ¶å™¨](https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress-controllers) æ‰èƒ½æ»¡è¶³ Ingress çš„è¦æ±‚ã€‚ ä»…åˆ›å»º Ingress èµ„æºæœ¬èº«æ²¡æœ‰ä»»ä½•æ•ˆæœã€‚ [Ingress æ§åˆ¶å™¨](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers) é€šå¸¸è´Ÿè´£é€šè¿‡è´Ÿè½½å‡è¡¡å™¨æ¥å®ç° Ingressï¼Œä¾‹å¦‚ `minikube` é»˜è®¤ä½¿ç”¨çš„æ˜¯ [nginx-ingress](https://minikube.sigs.k8s.io/docs/tutorials/nginx_tcp_udp_ingress/)ï¼Œç›®å‰  `minikube` ä¹Ÿæ”¯æŒ [Kong-Ingress](https://minikube.sigs.k8s.io/docs/handbook/addons/kong-ingress/)ã€‚\n\nIngress å¯ä»¥â€œç®€å•ç†è§£â€ä¸ºæœåŠ¡çš„ç½‘å…³ Gatewayï¼Œå®ƒæ˜¯æ‰€æœ‰æµé‡çš„å…¥å£ï¼Œç»è¿‡é…ç½®çš„è·¯ç”±è§„åˆ™ï¼Œå°†æµé‡é‡å®šå‘åˆ°åç«¯çš„æœåŠ¡ã€‚\n\nåœ¨   `minikube` ä¸­ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤å¼€å¯ Ingress-Controller çš„åŠŸèƒ½ã€‚é»˜è®¤ä½¿ç”¨çš„æ˜¯ [nginx-ingress](https://minikube.sigs.k8s.io/docs/tutorials/nginx_tcp_udp_ingress/)ã€‚\n\n```shell\nminikube addons enable ingress\n```\n\næ¥ç€åˆ é™¤ä¹‹å‰åˆ›å»ºçš„æ‰€æœ‰ `pod`, `deployment`, `service` èµ„æºã€‚\n\n``` shell\nkubectl delete deployment,service --all\n```\n\næ¥ç€æ ¹æ®ä¹‹å‰çš„æ•™ç¨‹ï¼Œåˆ›å»º `hellok8s:v3` å’Œ `nginx` çš„`deployment`ä¸ `service` èµ„æºã€‚Service çš„ type ä¸º ClusterIP å³å¯ã€‚\n\n`hellok8s:v3` çš„ç«¯å£æ˜ å°„ä¸º `3000:3000`ï¼Œ`nginx` çš„ç«¯å£æ˜ å°„ä¸º `4000:80`ï¼Œè¿™é‡Œåç»­å†™ Ingress Route è§„åˆ™æ—¶ä¼šç”¨åˆ°ã€‚\n\n```yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: service-hellok8s-clusterip\nspec:\n  type: ClusterIP\n  selector:\n    app: hellok8s\n  ports:\n  - port: 3000\n    targetPort: 3000\n\n---\n\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: hellok8s-deployment\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: hellok8s\n  template:\n    metadata:\n      labels:\n        app: hellok8s\n    spec:\n      containers:\n        - image: guangzhengli/hellok8s:v3\n          name: hellok8s-container\n```\n\n```yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: service-nginx-clusterip\nspec:\n  type: ClusterIP\n  selector:\n    app: nginx\n  ports:\n  - port: 4000\n    targetPort: 80\n\n---\n\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - image: nginx\n        name: nginx-container\n```\n\n```shell\nkubectl apply -f hellok8s.yaml                 \n# service/service-hellok8s-clusterip created\n# deployment.apps/hellok8s-deployment created\n\nkubectl apply -f nginx.yaml   \n# service/service-nginx-clusterip created\n# deployment.apps/nginx-deployment created\n\nkubectl get pods            \n# NAME                                   READY   STATUS    RESTARTS   AGE\n# hellok8s-deployment-5d5545b69c-4wvmf   1/1     Running   0          55s\n# hellok8s-deployment-5d5545b69c-qcszp   1/1     Running   0          55s\n# hellok8s-deployment-5d5545b69c-sn7mn   1/1     Running   0          55s\n# nginx-deployment-d47fd7f66-d9r7x       1/1     Running   0          34s\n# nginx-deployment-d47fd7f66-hp5nf       1/1     Running   0          34s\n\nkubectl get service\n# NAME                         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE\n# service-hellok8s-clusterip   ClusterIP   10.97.88.18      <none>        3000/TCP   77s\n# service-nginx-clusterip      ClusterIP   10.103.161.247   <none>        4000/TCP   56s\n```\n\nè¿™æ ·åœ¨ k8s é›†ç¾¤ä¸­ï¼Œå°±æœ‰ 3 ä¸ª `hellok8s:v3` çš„ podï¼Œ2 ä¸ª `nginx` çš„ podã€‚å¹¶ä¸”`hellok8s:v3` çš„ç«¯å£æ˜ å°„ä¸º `3000:3000`ï¼Œ`nginx` çš„ç«¯å£æ˜ å°„ä¸º `4000:80`ã€‚åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œæ¥ä¸‹æ¥ç¼–å†™ Ingress èµ„æºçš„å®šä¹‰ï¼Œ`nginx.ingress.kubernetes.io/ssl-redirect: \"false\"` çš„æ„æ€æ˜¯è¿™é‡Œå…³é—­ `https` è¿æ¥ï¼Œåªä½¿ç”¨ `http` è¿æ¥ã€‚\n\nåŒ¹é…å‰ç¼€ä¸º `/hello` çš„è·¯ç”±è§„åˆ™ï¼Œé‡å®šå‘åˆ° `hellok8s:v3` æœåŠ¡ï¼ŒåŒ¹é…å‰ç¼€ä¸º `/` çš„æ ¹è·¯å¾„é‡å®šå‘åˆ° `nginx`ã€‚\n\n```yaml\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: hello-ingress\n  annotations:\n    # We are defining this annotation to prevent nginx\n    # from redirecting requests to `https` for now\n    nginx.ingress.kubernetes.io/ssl-redirect: \"false\"\nspec:\n  rules:\n    - http:\n        paths:\n          - path: /hello\n            pathType: Prefix\n            backend:\n              service:\n                name: service-hellok8s-clusterip\n                port:\n                  number: 3000\n          - path: /\n            pathType: Prefix\n            backend:\n              service:\n                name: service-nginx-clusterip\n                port:\n                  number: 4000\n\n```\n\n```shell\nkubectl apply -f ingress.yaml\n# ingress.extensions/hello-ingress created\n\nkubectl get ingress          \n# NAME            CLASS   HOSTS   ADDRESS   PORTS   AGE\n# hello-ingress   nginx   *                 80      16s\n\n# replace 192.168.59.100 by your minikube ip\ncurl http://192.168.59.100/hello\n# [v3] Hello, Kubernetes!, From host: hellok8s-deployment-5d5545b69c-sn7mn\n\ncurl http://192.168.59.100/\n# (....Thank you for using nginx.....)\n```\n\nä¸Šé¢çš„æ•™ç¨‹ä¸­å°†æ‰€æœ‰æµé‡éƒ½å‘é€åˆ° Ingress ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![ingress](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/ingress.png)\n\n## Namespace\n\nåœ¨å®é™…çš„å¼€å‘å½“ä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸åŒçš„ç¯å¢ƒæ¥åšå¼€å‘å’Œæµ‹è¯•ï¼Œä¾‹å¦‚ `dev` ç¯å¢ƒç»™å¼€å‘ä½¿ç”¨ï¼Œ`test` ç¯å¢ƒç»™ QA ä½¿ç”¨ï¼Œé‚£ä¹ˆ k8s èƒ½ä¸èƒ½åœ¨ä¸åŒç¯å¢ƒ `dev` `test` `uat` `prod` ä¸­åŒºåˆ†èµ„æºï¼Œè®©ä¸åŒç¯å¢ƒçš„èµ„æºç‹¬ç«‹äº’ç›¸ä¸å½±å“å‘¢ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œk8s æä¾›äº†åä¸º Namespace çš„èµ„æºæ¥å¸®åŠ©éš”ç¦»èµ„æºã€‚\n\nåœ¨ Kubernetes ä¸­ï¼Œ**åå­—ç©ºé—´ï¼ˆNamespaceï¼‰** æä¾›ä¸€ç§æœºåˆ¶ï¼Œå°†åŒä¸€é›†ç¾¤ä¸­çš„èµ„æºåˆ’åˆ†ä¸ºç›¸äº’éš”ç¦»çš„ç»„ã€‚ åŒä¸€åå­—ç©ºé—´å†…çš„èµ„æºåç§°è¦å”¯ä¸€ï¼Œä½†è·¨åå­—ç©ºé—´æ—¶æ²¡æœ‰è¿™ä¸ªè¦æ±‚ã€‚ åå­—ç©ºé—´ä½œç”¨åŸŸä»…é’ˆå¯¹å¸¦æœ‰åå­—ç©ºé—´çš„å¯¹è±¡ï¼Œä¾‹å¦‚ Deploymentã€Service ç­‰ã€‚\n\nå‰é¢çš„æ•™ç¨‹ä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„ namespace æ˜¯ `default`ã€‚\n\nä¸‹é¢å±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªæ–°çš„ namespaceï¼Œ `namespace.yaml` æ–‡ä»¶å®šä¹‰äº†ä¸¤ä¸ªä¸åŒçš„ namespaceï¼Œåˆ†åˆ«æ˜¯ `dev` å’Œ `test`ã€‚\n\n``` yaml\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: dev\n  \n---\n\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: test\n```\n\nå¯ä»¥é€šè¿‡`kubectl apply -f namespaces.yaml` åˆ›å»ºä¸¤ä¸ªæ–°çš„ namespaceï¼Œåˆ†åˆ«æ˜¯ `dev` å’Œ `test`ã€‚\n\n```yaml\nkubectl apply -f namespaces.yaml    \n# namespace/dev created\n# namespace/test created\n\n\nkubectl get namespaces          \n# NAME              STATUS   AGE\n# default           Active   215d\n# dev               Active   2m44s\n# ingress-nginx     Active   110d\n# kube-node-lease   Active   215d\n# kube-public       Active   215d\n# kube-system       Active   215d\n# test              Active   2m44s\n```\n\né‚£ä¹ˆå¦‚ä½•åœ¨æ–°çš„ namespace ä¸‹åˆ›å»ºèµ„æºå’Œè·å–èµ„æºå‘¢ï¼Ÿåªéœ€è¦åœ¨å‘½ä»¤åé¢åŠ ä¸Š `-n namespace` å³å¯ã€‚ä¾‹å¦‚æ ¹æ®ä¸Šé¢æ•™ç¨‹ä¸­ï¼Œåœ¨åä¸º `dev` çš„ namespace ä¸‹åˆ›å»º `hellok8s:v3` çš„ deployment èµ„æºã€‚\n\n```shell\nkubectl apply -f deployment.yaml -n dev\n\nkubectl get pods -n dev\n```\n\n## Configmap\n\nä¸Šé¢çš„æ•™ç¨‹æåˆ°ï¼Œæˆ‘ä»¬åœ¨ä¸åŒç¯å¢ƒ `dev` `test` `uat` `prod` ä¸­åŒºåˆ†èµ„æºï¼Œå¯ä»¥è®©å…¶èµ„æºç‹¬ç«‹äº’ç›¸ä¸å—å½±å“ï¼Œä½†æ˜¯éšä¹‹è€Œæ¥ä¹Ÿä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚ä¸åŒç¯å¢ƒçš„æ•°æ®åº“çš„åœ°å€å¾€å¾€æ˜¯ä¸ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå¦‚æœåœ¨ä»£ç ä¸­å†™åŒä¸€ä¸ªæ•°æ®åº“çš„åœ°å€ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ã€‚\n\nK8S ä½¿ç”¨ ConfigMap æ¥å°†ä½ çš„é…ç½®æ•°æ®å’Œåº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ï¼Œå°†éæœºå¯†æ€§çš„æ•°æ®ä¿å­˜åˆ°é”®å€¼å¯¹ä¸­ã€‚ConfigMap åœ¨è®¾è®¡ä¸Šä¸æ˜¯ç”¨æ¥ä¿å­˜å¤§é‡æ•°æ®çš„ã€‚åœ¨ ConfigMap ä¸­ä¿å­˜çš„æ•°æ®ä¸å¯è¶…è¿‡ 1 MiBã€‚å¦‚æœä½ éœ€è¦ä¿å­˜è¶…å‡ºæ­¤å°ºå¯¸é™åˆ¶çš„æ•°æ®ï¼Œä½ å¯èƒ½è€ƒè™‘æŒ‚è½½å­˜å‚¨å·ã€‚\n\nä¸‹é¢æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¹‹å‰ä»£ç ï¼Œå‡è®¾ä¸åŒç¯å¢ƒçš„æ•°æ®åº“åœ°å€ä¸åŒï¼Œä¸‹é¢ä»£ç ä»ç¯å¢ƒå˜é‡ä¸­è·å– `DB_URL`ï¼Œå¹¶å°†å®ƒè¿”å›ã€‚\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"io\"\n\t\"net/http\"\n\t\"os\"\n)\n\nfunc hello(w http.ResponseWriter, r *http.Request) {\n\thost, _ := os.Hostname()\n\tdbURL := os.Getenv(\"DB_URL\")\n\tio.WriteString(w, fmt.Sprintf(\"[v4] Hello, Kubernetes! From host: %s, Get Database Connect URL: %s\", host, dbURL))\n}\n\nfunc main() {\n\thttp.HandleFunc(\"/\", hello)\n\thttp.ListenAndServe(\":3000\", nil)\n}\n```\n\næ„å»º `hellok8s:v4` çš„é•œåƒï¼Œæ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚å¹¶åˆ é™¤ä¹‹å‰åˆ›å»ºçš„æ‰€æœ‰èµ„æºã€‚\n\n```shell\ndocker build . -t guangzhengli/hellok8s:v4\ndocker push guangzhengli/hellok8s:v4\n\nkubectl delete deployment,service,ingress --all\n```\n\næ¥ä¸‹æ¥åˆ›å»ºä¸åŒ namespace çš„ configmap æ¥å­˜æ”¾ `DB_URL`ã€‚\n\nåˆ›å»º `hellok8s-config-dev.yaml` æ–‡ä»¶\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: hellok8s-config\ndata:\n  DB_URL: \"http://DB_ADDRESS_DEV\"\n```\n\nåˆ›å»º `hellok8s-config-test.yaml` æ–‡ä»¶\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: hellok8s-config\ndata:\n  DB_URL: \"http://DB_ADDRESS_TEST\"\n```\n\nåˆ†åˆ«åœ¨ `dev` `test` ä¸¤ä¸ª namespace ä¸‹åˆ›å»ºç›¸åŒçš„ `ConfigMap`ï¼Œåå­—éƒ½å« hellok8s-configï¼Œä½†æ˜¯å­˜æ”¾çš„ Pair å¯¹ä¸­ Value å€¼ä¸ä¸€æ ·ã€‚\n\n```shell\nkubectl apply -f hellok8s-config-dev.yaml -n dev\n# configmap/hellok8s-config created\n\nkubectl apply -f hellok8s-config-test.yaml -n test \n# configmap/hellok8s-config created\n\nkubectl get configmap --all-namespaces\nNAMESPACE         NAME                                 DATA   AGE\ndev               hellok8s-config                      1      3m12s\ntest              hellok8s-config                      1      2m1s\n```\n\næ¥ç€ä½¿ç”¨ POD çš„æ–¹å¼æ¥éƒ¨ç½² `hellok8s:v4`ï¼Œå…¶ä¸­ `env.name` è¡¨ç¤ºçš„æ˜¯å°† configmap ä¸­çš„å€¼å†™è¿›ç¯å¢ƒå˜é‡ï¼Œè¿™æ ·ä»£ç ä»ç¯å¢ƒå˜é‡ä¸­è·å– `DB_URL`ï¼Œè¿™ä¸ª KEY åç§°å¿…é¡»ä¿æŒä¸€è‡´ã€‚`valueFrom` ä»£è¡¨ä»å“ªé‡Œè¯»å–ï¼Œ`configMapKeyRef` è¿™é‡Œè¡¨ç¤ºä»åä¸º `hellok8s-config` çš„ `configMap` ä¸­è¯»å– `KEY=DB_URL` çš„ Valueã€‚\n\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: hellok8s-pod\nspec:\n  containers:\n    - name: hellok8s-container\n      image: guangzhengli/hellok8s:v4\n      env:\n        - name: DB_URL\n          valueFrom:\n            configMapKeyRef:\n              name: hellok8s-config\n              key: DB_URL\n```\n\nä¸‹é¢åˆ†åˆ«åœ¨ `dev` `test` ä¸¤ä¸ª namespace ä¸‹åˆ›å»º  `hellok8s:v4`ï¼Œæ¥ç€é€šè¿‡ `port-forward` çš„æ–¹å¼è®¿é—®ä¸åŒ namespace çš„æœåŠ¡ï¼Œå¯ä»¥çœ‹åˆ°è¿”å›çš„ `Get Database Connect URL: http://DB_ADDRESS_TEST` æ˜¯ä¸ä¸€æ ·çš„ï¼\n\n```shell\nkubectl apply -f hellok8s.yaml -n dev             \n# pod/hellok8s-pod created\n\nkubectl apply -f hellok8s.yaml -n test\n# pod/hellok8s-pod created\n\nkubectl port-forward hellok8s-pod 3000:3000 -n dev\n\ncurl http://localhost:3000\n# [v4] Hello, Kubernetes! From host: hellok8s-pod, Get Database Connect URL: http://DB_ADDRESS_DEV\n\nkubectl port-forward hellok8s-pod 3000:3000 -n test\n\ncurl http://localhost:3000\n# [v4] Hello, Kubernetes! From host: hellok8s-pod, Get Database Connect URL: http://DB_ADDRESS_TEST\n```\n\n## Secret\n\nä¸Šé¢æåˆ°ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©ä»¥ configmap çš„æ–¹å¼æŒ‚è½½é…ç½®ä¿¡æ¯ï¼Œä½†æ˜¯å½“æˆ‘ä»¬çš„é…ç½®ä¿¡æ¯éœ€è¦åŠ å¯†çš„æ—¶å€™ï¼Œ configmap å°±æ— æ³•æ»¡è¶³è¿™ä¸ªè¦æ±‚ã€‚ä¾‹å¦‚ä¸Šé¢è¦æŒ‚è½½æ•°æ®åº“å¯†ç çš„æ—¶å€™ï¼Œå°±éœ€è¦æ˜æ–‡æŒ‚è½½ã€‚\n\nè¿™ä¸ªæ—¶å€™å°±éœ€è¦ Secret æ¥å­˜å‚¨åŠ å¯†ä¿¡æ¯ï¼Œè™½ç„¶åœ¨èµ„æºæ–‡ä»¶çš„ç¼–ç ä¸Šï¼Œåªæ˜¯é€šè¿‡ Base64 çš„æ–¹å¼ç®€å•ç¼–ç ï¼Œä½†æ˜¯åœ¨å®é™…ç”Ÿäº§è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€šè¿‡ pipeline æˆ–è€…ä¸“ä¸šçš„ [AWS KMS](https://aws.amazon.com/kms/) æœåŠ¡è¿›è¡Œå¯†é’¥ç®¡ç†ã€‚è¿™æ ·å°±å¤§å¤§å‡å°‘äº†å®‰å…¨äº‹æ•…ã€‚\n\n> Secret æ˜¯ä¸€ç§åŒ…å«å°‘é‡æ•æ„Ÿä¿¡æ¯ä¾‹å¦‚å¯†ç ã€ä»¤ç‰Œæˆ–å¯†é’¥çš„å¯¹è±¡ã€‚ç”±äºåˆ›å»º Secret å¯ä»¥ç‹¬ç«‹äºä½¿ç”¨å®ƒä»¬çš„ Podï¼Œ å› æ­¤åœ¨åˆ›å»ºã€æŸ¥çœ‹å’Œç¼–è¾‘ Pod çš„å·¥ä½œæµç¨‹ä¸­æš´éœ² Secretï¼ˆåŠå…¶æ•°æ®ï¼‰çš„é£é™©è¾ƒå°ã€‚ Kubernetes å’Œåœ¨é›†ç¾¤ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥å¯¹ Secret é‡‡å–é¢å¤–çš„é¢„é˜²æªæ–½ï¼Œ ä¾‹å¦‚é¿å…å°†æœºå¯†æ•°æ®å†™å…¥éæ˜“å¤±æ€§å­˜å‚¨ã€‚\n>\n> é»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetes Secret æœªåŠ å¯†åœ°å­˜å‚¨åœ¨ API æœåŠ¡å™¨çš„åº•å±‚æ•°æ®å­˜å‚¨ï¼ˆetcdï¼‰ä¸­ã€‚ ä»»ä½•æ‹¥æœ‰ API è®¿é—®æƒé™çš„äººéƒ½å¯ä»¥æ£€ç´¢æˆ–ä¿®æ”¹ Secretï¼Œä»»ä½•æœ‰æƒè®¿é—® etcd çš„äººä¹Ÿå¯ä»¥ã€‚ æ­¤å¤–ï¼Œä»»ä½•æœ‰æƒé™åœ¨å‘½åç©ºé—´ä¸­åˆ›å»º Pod çš„äººéƒ½å¯ä»¥ä½¿ç”¨è¯¥è®¿é—®æƒé™è¯»å–è¯¥å‘½åç©ºé—´ä¸­çš„ä»»ä½• Secretï¼› è¿™åŒ…æ‹¬é—´æ¥è®¿é—®ï¼Œä¾‹å¦‚åˆ›å»º Deployment çš„èƒ½åŠ›ã€‚\n>\n> ä¸ºäº†å®‰å…¨åœ°ä½¿ç”¨ Secretï¼Œè¯·è‡³å°‘æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\n>\n> 1. ä¸º Secret [å¯ç”¨é™æ€åŠ å¯†](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/)ï¼›\n> 2. [å¯ç”¨æˆ–é…ç½® RBAC è§„åˆ™](https://kubernetes.io/docs/reference/access-authn-authz/authorization/)æ¥é™åˆ¶è¯»å–å’Œå†™å…¥ Secret çš„æ•°æ®ï¼ˆåŒ…æ‹¬é€šè¿‡é—´æ¥æ–¹å¼ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¢«å‡†è®¸åˆ›å»º Pod çš„äººä¹Ÿéšå¼åœ°è¢«æˆæƒè·å– Secret å†…å®¹ã€‚\n> 3. åœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ RBAC ç­‰æœºåˆ¶æ¥é™åˆ¶å…è®¸å“ªäº›ä¸»ä½“åˆ›å»ºæ–° Secret æˆ–æ›¿æ¢ç°æœ‰ Secretã€‚\n\nSecret çš„èµ„æºå®šä¹‰å’Œ ConfigMap ç»“æ„åŸºæœ¬ä¸€è‡´ï¼Œå”¯ä¸€åŒºåˆ«åœ¨äº kind æ˜¯ `Secret`ï¼Œè¿˜æœ‰ Value éœ€è¦ Base64 ç¼–ç ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤å¿«é€Ÿ  Base64 ç¼–è§£ç ã€‚å½“ç„¶ Secret ä¹Ÿæä¾›äº†ä¸€ç§ `stringData`ï¼Œå¯ä»¥ä¸éœ€è¦ Base64 ç¼–ç ã€‚\n\n```shell\necho \"db_password\" | base64\n# ZGJfcGFzc3dvcmQK\n\necho \"ZGJfcGFzc3dvcmQK\" | base64 -d\n# db_password\n```\n\nè¿™é‡Œå°† Base64 ç¼–ç è¿‡åçš„å€¼ï¼Œå¡«å…¥å¯¹åº”çš„ key - value ä¸­ã€‚\n\n```yaml\n# hellok8s-secret.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: hellok8s-secret\ndata:\n  DB_PASSWORD: \"ZGJfcGFzc3dvcmQK\"\n```\n\n```yaml\n# hellok8s.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: hellok8s-pod\nspec:\n  containers:\n    - name: hellok8s-container\n      image: guangzhengli/hellok8s:v5\n      env:\n        - name: DB_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: hellok8s-secret\n              key: DB_PASSWORD\n```\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"io\"\n\t\"net/http\"\n\t\"os\"\n)\n\nfunc hello(w http.ResponseWriter, r *http.Request) {\n\thost, _ := os.Hostname()\n\tdbPassword := os.Getenv(\"DB_PASSWORD\")\n\tio.WriteString(w, fmt.Sprintf(\"[v5] Hello, Kubernetes! From host: %s, Get Database Connect Password: %s\", host, dbPassword))\n}\n\nfunc main() {\n\thttp.HandleFunc(\"/\", hello)\n\thttp.ListenAndServe(\":3000\", nil)\n}\n```\n\nåœ¨ä»£ç ä¸­è¯»å– `DB_PASSWORD` ç¯å¢ƒå˜é‡ï¼Œç›´æ¥è¿”å›å¯¹åº”å­—ç¬¦ä¸²ã€‚Secret çš„ä½¿ç”¨æ–¹æ³•å’Œå‰é¢æ•™ç¨‹ä¸­ ConfigMap åŸºæœ¬ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å†è¿‡å¤šèµ˜è¿°ã€‚\n\n```shell\ndocker build . -t guangzhengli/hellok8s:v5\n\ndocker push guangzhengli/hellok8s:v5\n\nkubectl apply -f hellok8s-secret.yaml\n\nkubectl apply -f hellok8s.yaml\n\nkubectl port-forward hellok8s-pod 3000:3000\n```\n\n\n## Job\n\nåœ¨å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿˜æœ‰ä¸€ç±»ä»»åŠ¡æ˜¯ä¹‹å‰çš„èµ„æºä¸èƒ½æ»¡è¶³çš„ï¼Œå³ä¸€æ¬¡æ€§ä»»åŠ¡ã€‚ä¾‹å¦‚å¸¸è§çš„è®¡ç®—ä»»åŠ¡ï¼Œåªéœ€è¦æ‹¿åˆ°ç›¸å…³æ•°æ®è®¡ç®—åå¾—å‡ºç»“æœå³å¯ï¼Œæ— éœ€ä¸€ç›´è¿è¡Œã€‚è€Œå¤„ç†è¿™ä¸€ç±»ä»»åŠ¡çš„èµ„æºå°±æ˜¯ Jobã€‚\n\n> Job ä¼šåˆ›å»ºä¸€ä¸ªæˆ–è€…å¤šä¸ª Podï¼Œå¹¶å°†ç»§ç»­é‡è¯• Pod çš„æ‰§è¡Œï¼Œç›´åˆ°æŒ‡å®šæ•°é‡çš„ Pod æˆåŠŸç»ˆæ­¢ã€‚ éšç€ Pod æˆåŠŸç»“æŸï¼ŒJob è·Ÿè¸ªè®°å½•æˆåŠŸå®Œæˆçš„ Pod ä¸ªæ•°ã€‚ å½“æ•°é‡è¾¾åˆ°æŒ‡å®šçš„æˆåŠŸä¸ªæ•°é˜ˆå€¼æ—¶ï¼Œä»»åŠ¡ï¼ˆå³ Jobï¼‰ç»“æŸã€‚ åˆ é™¤ Job çš„æ“ä½œä¼šæ¸…é™¤æ‰€åˆ›å»ºçš„å…¨éƒ¨ Podã€‚ æŒ‚èµ· Job çš„æ“ä½œä¼šåˆ é™¤ Job çš„æ‰€æœ‰æ´»è·ƒ Podï¼Œç›´åˆ° Job è¢«å†æ¬¡æ¢å¤æ‰§è¡Œã€‚\n>\n> ä¸€ç§ç®€å•çš„ä½¿ç”¨åœºæ™¯ä¸‹ï¼Œä½ ä¼šåˆ›å»ºä¸€ä¸ª Job å¯¹è±¡ä»¥ä¾¿ä»¥ä¸€ç§å¯é çš„æ–¹å¼è¿è¡ŒæŸ Pod ç›´åˆ°å®Œæˆã€‚ å½“ç¬¬ä¸€ä¸ª Pod å¤±è´¥æˆ–è€…è¢«åˆ é™¤ï¼ˆæ¯”å¦‚å› ä¸ºèŠ‚ç‚¹ç¡¬ä»¶å¤±æ•ˆæˆ–è€…é‡å¯ï¼‰æ—¶ï¼ŒJob å¯¹è±¡ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„ Podã€‚\n\nä¸‹é¢æ¥çœ‹ä¸€ä¸ª Job çš„èµ„æºå®šä¹‰ï¼Œå…¶ä¸­ Kind å’Œ metadata.name æ˜¯èµ„æºç±»å‹å’Œåå­—å°±ä¸å†è§£é‡Šï¼Œ`completions` æŒ‡çš„æ˜¯ä¼šåˆ›å»º Pod çš„æ•°é‡ï¼Œæ¯ä¸ª pod éƒ½ä¼šå®Œæˆä¸‹é¢çš„ä»»åŠ¡ã€‚`parallelism` æŒ‡çš„æ˜¯å¹¶å‘æ‰§è¡Œæœ€å¤§æ•°é‡ï¼Œä¾‹å¦‚ä¸‹é¢å°±ä¼šå…ˆåˆ›å»º 3 ä¸ª pod å¹¶å‘æ‰§è¡Œä»»åŠ¡ï¼Œä¸€æ—¦æŸä¸ª pod æ‰§è¡Œå®Œæˆï¼Œå°±ä¼šå†åˆ›å»ºæ–°çš„ pod æ¥æ‰§è¡Œï¼Œç›´åˆ° 5 ä¸ª pod æ‰§è¡Œå®Œæˆï¼ŒJob æ‰ä¼šè¢«æ ‡è®°ä¸ºå®Œæˆã€‚\n\n`restartPolicy = \"OnFailure` çš„å«ä¹‰å’Œ Pod ç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼ŒPod ä¸­çš„å®¹å™¨å¯èƒ½å› ä¸ºé€€å‡ºæ—¶è¿”å›å€¼éé›¶ï¼Œ æˆ–è€…å®¹å™¨å› ä¸ºè¶…å‡ºå†…å­˜çº¦æŸè€Œè¢«æ€æ­»ç­‰ç­‰ã€‚ å¦‚æœå‘ç”Ÿè¿™ç±»äº‹ä»¶ï¼Œå¹¶ä¸” `.spec.template.spec.restartPolicy = \"OnFailure\"`ï¼Œ Pod åˆ™ç»§ç»­ç•™åœ¨å½“å‰èŠ‚ç‚¹ï¼Œä½†å®¹å™¨ä¼šè¢«é‡æ–°è¿è¡Œã€‚å› æ­¤ï¼Œä½ çš„ç¨‹åºéœ€è¦èƒ½å¤Ÿå¤„ç†åœ¨æœ¬åœ°è¢«é‡å¯çš„æƒ…å†µï¼Œæˆ–è€…è¦è®¾ç½® `.spec.template.spec.restartPolicy = \"Never\"`ã€‚ \n\n```yaml\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: hello-job\nspec:\n  parallelism: 3\n  completions: 5\n  template:\n    spec:\n      restartPolicy: OnFailure\n      containers:\n        - name: echo\n          image: busybox\n          command:\n            - \"/bin/sh\"\n          args:\n            - \"-c\"\n            - \"for i in 9 8 7 6 5 4 3 2 1 ; do echo $i ; done\"\n```\n\né€šè¿‡ä¸‹é¢çš„å‘½ä»¤åˆ›å»º jobï¼Œå¯ä»¥é€šè¿‡ `kubectl get pods -w` æ¥è§‚å¯Ÿ job åˆ›å»º pod çš„è¿‡ç¨‹å’Œç»“æœã€‚æœ€åå¯ä»¥é€šè¿‡ `logs` å‘½ä»¤æŸ¥çœ‹æ—¥å¿—ã€‚\n\n```shell\nkubectl apply -f hello-job.yaml\n\nkubectl get jobs                  \n# NAME        COMPLETIONS   DURATION   AGE\n# hello-job   5/5           19s        83s\n\nkubectl get pods                      \n# NAME                                   READY   STATUS      RESTARTS   AGE\n# hello-job--1-5gjjr                     0/1     Completed   0          34s\n# hello-job--1-8ffmn                     0/1     Completed   0          26s\n# hello-job--1-ltsvm                     0/1     Completed   0          34s\n# hello-job--1-mttwv                     0/1     Completed   0          29s\n# hello-job--1-ww2qp                     0/1     Completed   0          34s\n\nkubectl logs -f hello-job--1-5gjjr \n# 1\n# ...\n```\n\nJob å®Œæˆæ—¶ä¸ä¼šå†åˆ›å»ºæ–°çš„ Podï¼Œä¸è¿‡å·²æœ‰çš„ Pod [é€šå¸¸](https://kubernetes.io/docs/concepts/workloads/controllers/job/#pod-backoff-failure-policy)ä¹Ÿä¸ä¼šè¢«åˆ é™¤ã€‚ ä¿ç•™è¿™äº› Pod ä½¿å¾—ä½ å¯ä»¥æŸ¥çœ‹å·²å®Œæˆçš„ Pod çš„æ—¥å¿—è¾“å‡ºï¼Œä»¥ä¾¿æ£€æŸ¥é”™è¯¯ã€è­¦å‘Šæˆ–è€…å…¶å®ƒè¯Šæ–­æ€§è¾“å‡ºã€‚ å¯ä»¥ä½¿ç”¨ `kubectl` æ¥åˆ é™¤ Jobï¼ˆä¾‹å¦‚ `kubectl delete -f hello-job.yaml`)ã€‚å½“ä½¿ç”¨ `kubectl` æ¥åˆ é™¤ Job æ—¶ï¼Œè¯¥ Job æ‰€åˆ›å»ºçš„ Pod ä¹Ÿä¼šè¢«åˆ é™¤ã€‚\n\n## CronJob\n\n*CronJob* å¯ä»¥ç†è§£ä¸ºå®šæ—¶ä»»åŠ¡ï¼Œåˆ›å»ºåŸºäº Cron æ—¶é—´è°ƒåº¦çš„ [Jobs](https://kubernetes.io/docs/concepts/workloads/controllers/job/)ã€‚\n\n> CronJob ç”¨äºæ‰§è¡Œå‘¨æœŸæ€§çš„åŠ¨ä½œï¼Œä¾‹å¦‚å¤‡ä»½ã€æŠ¥å‘Šç”Ÿæˆç­‰ã€‚ è¿™äº›ä»»åŠ¡ä¸­çš„æ¯ä¸€ä¸ªéƒ½åº”è¯¥é…ç½®ä¸ºå‘¨æœŸæ€§é‡å¤çš„ï¼ˆä¾‹å¦‚ï¼šæ¯å¤©/æ¯å‘¨/æ¯æœˆä¸€æ¬¡ï¼‰ï¼› ä½ å¯ä»¥å®šä¹‰ä»»åŠ¡å¼€å§‹æ‰§è¡Œçš„æ—¶é—´é—´éš”ã€‚\n\nCron æ—¶é—´è¡¨è¯­æ³•\n\n```\n# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é’Ÿ (0 - 59)\n# â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å°æ—¶ (0 - 23)\n# â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æœˆçš„æŸå¤© (1 - 31)\n# â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æœˆä»½ (1 - 12)\n# â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å‘¨çš„æŸå¤© (0 - 6)ï¼ˆå‘¨æ—¥åˆ°å‘¨ä¸€ï¼›åœ¨æŸäº›ç³»ç»Ÿä¸Šï¼Œ7 ä¹Ÿæ˜¯æ˜ŸæœŸæ—¥ï¼‰\n# â”‚ â”‚ â”‚ â”‚ â”‚                          æˆ–è€…æ˜¯ sunï¼Œmonï¼Œtueï¼Œwebï¼Œthuï¼Œfriï¼Œsat\n# â”‚ â”‚ â”‚ â”‚ â”‚\n# â”‚ â”‚ â”‚ â”‚ â”‚\n# * * * * *\n```\n\nç”¨æ³•é™¤äº†éœ€è¦åŠ ä¸Š cron è¡¨è¾¾å¼ä¹‹å¤–ï¼Œå…¶ä½™åŸºæœ¬å’Œ Job ä¿æŒä¸€è‡´ã€‚\n\n```yaml\napiVersion: batch/v1\nkind: CronJob\nmetadata:\n  name: hello-cronjob\nspec:\n  schedule: \"* * * * *\" # Every minute\n  jobTemplate:\n    spec:\n      template:\n        spec:\n          restartPolicy: OnFailure\n          containers:\n            - name: echo\n              image: busybox\n              command:\n                - \"/bin/sh\"\n              args:\n                - \"-c\"\n                - \"for i in 9 8 7 6 5 4 3 2 1 ; do echo $i ; done\"\n```\n\nä½¿ç”¨å‘½ä»¤å’Œ Job ä¹ŸåŸºæœ¬ä¿æŒä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šèµ˜è¿°ã€‚\n\n```shell\nkubectl apply -f hello-cronjob.yaml\n# cronjob.batch/hello-cronjob created\n\nkubectl get cronjob                \n# NAME            SCHEDULE    SUSPEND   ACTIVE   LAST SCHEDULE   AGE\n# hello-cronjob   * * * * *   False     0        <none>          8s\n\nkubectl get pods   \n# NAME                                   READY   STATUS      RESTARTS   AGE\n# hello-cronjob-27694609--1-2nmdx        0/1     Completed   0          15s\n```\n\n## Helm\n\nç»è¿‡å‰é¢çš„æ•™ç¨‹ï¼Œæƒ³å¿…ä½ å·²ç»å¯¹ kubernetes çš„ä½¿ç”¨æœ‰äº†ä¸€å®šçš„ç†è§£ã€‚ä½†æ˜¯ä¸çŸ¥é“ä½ æ˜¯å¦æƒ³è¿‡è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬å‰é¢æ•™ç¨‹ä¸­æåˆ°çš„æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬ç”¨ `pod`, `deployment`, `service`, `ingress`, `configmap`,`secret` æ‰€æœ‰èµ„æºæ¥éƒ¨ç½²ä¸€å¥—å®Œæ•´çš„ `hellok8s` æœåŠ¡çš„è¯ï¼Œéš¾é“éœ€è¦ä¸€ä¸ªä¸€ä¸ªçš„ `kubectl apply -f` æ¥åˆ›å»ºå—ï¼Ÿå¦‚æœæ¢ä¸€ä¸ª namespaceï¼Œæˆ–è€…è¯´æ¢ä¸€å¥— kubernetes é›†ç¾¤éƒ¨ç½²çš„è¯ï¼Œåˆè¦é‡å¤æ€§çš„æ“ä½œåˆ›å»ºçš„è¿‡ç¨‹å—ï¼Ÿ\n\næˆ‘ä»¬å¹³å¸¸ä½¿ç”¨æ“ä½œç³»ç»Ÿæ—¶ï¼Œéœ€è¦å®‰è£…ä¸€ä¸ªåº”ç”¨çš„è¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `apt` æˆ–è€… `brew` æ¥ç›´æ¥å®‰è£…ï¼Œè€Œä¸éœ€è¦å…³å¿ƒè¿™ä¸ªåº”ç”¨éœ€è¦å“ªäº›ä¾èµ–ï¼Œå“ªäº›é…ç½®ã€‚åœ¨ä½¿ç”¨ kubernetes å®‰è£…åº”ç”¨æœåŠ¡ `hellok8s` æ—¶ï¼Œæˆ‘ä»¬è‡ªç„¶ä¹Ÿå¸Œæœ›èƒ½å¤Ÿä¸€ä¸ªå‘½ä»¤å°±å®‰è£…å®Œæˆï¼Œè€Œæä¾›è¿™ä¸ªèƒ½åŠ›çš„ï¼Œå°±æ˜¯ CNCF çš„æ¯•ä¸šé¡¹ç›® [Helm](https://github.com/helm/helm)ã€‚\n\n> Helm å¸®åŠ©æ‚¨ç®¡ç† Kubernetes åº”ç”¨â€”â€” Helm Chartï¼ŒHelm æ˜¯æŸ¥æ‰¾ã€åˆ†äº«å’Œä½¿ç”¨è½¯ä»¶æ„å»º [Kubernetes](https://kubernetes.io/) çš„æœ€ä¼˜æ–¹å¼ã€‚\n>\n> å¤æ‚æ€§ç®¡ç† â€”â€”å³ä½¿æ˜¯æœ€å¤æ‚çš„åº”ç”¨ï¼ŒHelm Chart ä¾ç„¶å¯ä»¥æè¿°ï¼Œ æä¾›ä½¿ç”¨å•ç‚¹æˆæƒçš„å¯é‡å¤å®‰è£…åº”ç”¨ç¨‹åºã€‚\n>\n> æ˜“äºå‡çº§ â€”â€”éšæ—¶éšåœ°å‡çº§å’Œè‡ªå®šä¹‰çš„é’©å­æ¶ˆé™¤æ‚¨å‡çº§çš„ç—›è‹¦ã€‚\n>\n> åˆ†å‘ç®€å• â€”â€” Helm Chart å¾ˆå®¹æ˜“åœ¨å…¬å…±æˆ–ç§æœ‰åŒ–æœåŠ¡å™¨ä¸Šå‘ç‰ˆï¼Œåˆ†å‘å’Œéƒ¨ç½²ç«™ç‚¹ã€‚\n>\n> å›æ»š â€”â€” ä½¿ç”¨ `helm rollback` å¯ä»¥è½»æ¾å›æ»šåˆ°ä¹‹å‰çš„å‘å¸ƒç‰ˆæœ¬ã€‚\n\næˆ‘ä»¬é€šè¿‡ brew æ¥å®‰è£… helmã€‚æ›´å¤šæ–¹å¼å¯ä»¥å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://helm.sh/zh/docs/intro/install/)ã€‚\n\n```shell\nbrew install helm\n```\n\nHelm çš„ä½¿ç”¨æ–¹å¼å¯ä»¥è§£é‡Šä¸ºï¼šHelm å®‰è£… *charts* åˆ° Kubernetes é›†ç¾¤ä¸­ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ *release*ã€‚ä½ å¯ä»¥åœ¨ Helm çš„ chart *repositories* ä¸­å¯»æ‰¾æ–°çš„ chartã€‚\n\n### ç”¨ helm å®‰è£… hellok8s\nå¼€å§‹æœ¬èŠ‚æ•™ç¨‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠŠä¹‹å‰æ‰‹åŠ¨åˆ›å»ºçš„ hellok8s ç›¸å…³çš„èµ„æºåˆ é™¤(é˜²æ­¢ä½¿ç”¨ helm åˆ›å»ºåŒåçš„ k8s èµ„æºå¤±è´¥)ã€‚\n\nåœ¨å°è¯•è‡ªå·±åˆ›å»º hellok8s helm chart ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥ç†Ÿæ‚‰ä¸€ä¸‹æ€ä¹ˆä½¿ç”¨ helm chartã€‚åœ¨è¿™é‡Œæˆ‘å…ˆåˆ›å»ºå¥½äº†ä¸€ä¸ª hellok8sï¼ˆåŒ…æ‹¬ä¼šåˆ›å»º deployment, service, ingress, configmaps, secretï¼‰çš„ helm chartã€‚é€šè¿‡ GitHub actions ç”Ÿæˆæ”¾åœ¨äº† [gh-pages](https://github.com/guangzhengli/k8s-tutorials/tree/gh-pages/) åˆ†æ”¯ä¸‹çš„ `index.yaml` æ–‡ä»¶ä¸­ã€‚\n\næ¥ç€å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤è¿›è¡Œå¿«é€Ÿå®‰è£…ï¼Œå…¶ä¸­ `helm repo add` è¡¨ç¤ºå°†æˆ‘åˆ›å»ºå¥½çš„ hellok8s chart æ·»åŠ åˆ°è‡ªå·±æœ¬åœ°çš„ä»“åº“å½“ä¸­ï¼Œ`helm install` è¡¨ç¤ºä»ä»“åº“ä¸­å®‰è£… hellok8s/hello-helm åˆ° k8s é›†ç¾¤å½“ä¸­ã€‚\n\n```shell\nhelm repo add hellok8s https://guangzhengli.github.io/k8s-tutorials/\n# \"hellok8s\" has been added to your repositories\n\nhelm install my-hello-helm hellok8s/hello-helm --version 0.1.0\n# NAME: my-hello-helm\n# NAMESPACE: default\n# STATUS: deployed\n# REVISION: 1\n```\n\nåˆ›å»ºå®Œæˆåï¼Œé€šè¿‡ `kubectl get` ç­‰å‘½ä»¤å¯ä»¥çœ‹åˆ°æ‰€æœ‰ hellok8s èµ„æºéƒ½åˆ›å»ºæˆåŠŸï¼Œ`helm` ä¸€æ¡å‘½ä»¤å³å¯åšåˆ°ä¹‹å‰æ•™ç¨‹ä¸­æ‰€æœ‰èµ„æºçš„åˆ›å»ºï¼é€šè¿‡ `curl` k8s é›†ç¾¤çš„ ingress åœ°å€ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°è¿”å›å­—ç¬¦ä¸²ï¼\n\n```shell\nkubectl get pods\n# NAME                                  READY   STATUS    RESTARTS   AGE\n# hellok8s-deployment-f88f984c6-k8hpz   1/1     Running   0          15h\n# hellok8s-deployment-f88f984c6-nzwg6   1/1     Running   0          15h\n# hellok8s-deployment-f88f984c6-s89s7   1/1     Running   0          15h\n# nginx-deployment-d47fd7f66-6w76b      1/1     Running   0          15h\n# nginx-deployment-d47fd7f66-tsqj5      1/1     Running   0          15h\n\nkubectl get deployments\n# NAME                  READY   UP-TO-DATE   AVAILABLE   AGE\n# hellok8s-deployment   3/3     3            3           15h\n# nginx-deployment      2/2     2            2           15h\n\nkubectl get service\n# NAME                         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE\n# kubernetes                   ClusterIP   10.96.0.1        <none>        443/TCP    13d\n# service-hellok8s-clusterip   ClusterIP   10.107.198.175   <none>        3000/TCP   15h\n# service-nginx-clusterip      ClusterIP   10.100.144.49    <none>        4000/TCP   15h\n\nkubectl get ingress\n# NAME               CLASS   HOSTS   ADDRESS     PORTS   AGE\n# hellok8s-ingress   nginx   *       localhost   80      15h\n\nkubectl get configmap\n# NAME               DATA   AGE\n# hellok8s-config    1      15h\n\nkubectl get secret\n# NAME                                  TYPE                                  DATA   AGE\n# hellok8s-secret                       Opaque                                1      15h\n# sh.helm.release.v1.my-hello-helm.v1   helm.sh/release.v1\n\ncurl http://192.168.59.100/hello\n# [v6] Hello, Helm! Message from helm values: It works with Helm Values[v2]!, From namespace: default, From host: hellok8s-deployment-598bbd6884-ttk78, Get Database Connect URL: http://DB_ADDRESS_DEFAULT, Database Connect Password: db_password\n```\n\n### åˆ›å»º helm charts\n\nåœ¨ä½¿ç”¨å·²ç»åˆ›å»ºå¥½çš„ hello-helm charts æ¥åˆ›å»ºæ•´ä¸ª hellok8s èµ„æºåï¼Œä½ å¯èƒ½è¿˜æ˜¯æœ‰å¾ˆå¤šçš„ç–‘æƒ‘ï¼ŒåŒ…æ‹¬ Chart æ˜¯å¦‚ä½•ç”Ÿæˆå’Œå‘å¸ƒçš„ï¼Œå¦‚ä½•åˆ›å»ºä¸€ä¸ªæ–°çš„ Chartï¼Ÿåœ¨è¿™èŠ‚æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå°è¯•è‡ªå·±æ¥åˆ›å»º hello-helm Chart æ¥å®Œæˆä¹‹å‰çš„æ“ä½œã€‚\n\né¦–å…ˆå»ºè®®ä½¿ç”¨ `helm create` å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªåˆå§‹çš„ Chartï¼Œè¯¥å‘½ä»¤é»˜è®¤ä¼šåˆ›å»ºä¸€äº› k8s èµ„æºå®šä¹‰çš„åˆå§‹æ–‡ä»¶ï¼Œå¹¶ä¸”ä¼šç”Ÿæˆå®˜ç½‘æ¨èçš„ç›®å½•ç»“æ„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```shell\nhelm create hello-helm\n\n.\nâ”œâ”€â”€ Chart.yaml\nâ”œâ”€â”€ charts\nâ”œâ”€â”€ templates\nâ”‚Â Â  â”œâ”€â”€ NOTES.txt\nâ”‚Â Â  â”œâ”€â”€ _helpers.tpl\nâ”‚Â Â  â”œâ”€â”€ deployment.yaml\nâ”‚Â Â  â”œâ”€â”€ hpa.yaml\nâ”‚Â Â  â”œâ”€â”€ ingress.yaml\nâ”‚Â Â  â”œâ”€â”€ service.yaml\nâ”‚Â Â  â”œâ”€â”€ serviceaccount.yaml\nâ”‚Â Â  â””â”€â”€ tests\nâ”‚Â Â      â””â”€â”€ test-connection.yaml\nâ””â”€â”€ values.yaml\n```\n\næˆ‘ä»¬å°†é»˜è®¤ç”Ÿæˆåœ¨ templates ç›®å½•ä¸‹é¢çš„ `yaml` æ–‡ä»¶åˆ é™¤ï¼Œç”¨ä¹‹å‰æ•™ç¨‹ä¸­ `yaml` æ–‡ä»¶æ›¿æ¢å®ƒï¼Œæœ€ç»ˆçš„ç»“æ„é•¿è¿™æ ·ï¼š\n\n```shell\n.\nâ”œâ”€â”€ Chart.yaml\nâ”œâ”€â”€ Dockerfile\nâ”œâ”€â”€ _helpers.tpl\nâ”œâ”€â”€ charts\nâ”œâ”€â”€ hello-helm-0.1.0.tgz\nâ”œâ”€â”€ index.yaml\nâ”œâ”€â”€ main.go\nâ”œâ”€â”€ templates\nâ”‚Â Â  â”œâ”€â”€ hellok8s-configmaps.yaml\nâ”‚Â Â  â”œâ”€â”€ hellok8s-deployment.yaml\nâ”‚Â Â  â”œâ”€â”€ hellok8s-secret.yaml\nâ”‚Â Â  â”œâ”€â”€ hellok8s-service.yaml\nâ”‚Â Â  â”œâ”€â”€ ingress.yaml\nâ”‚Â Â  â”œâ”€â”€ nginx-deployment.yaml\nâ”‚Â Â  â””â”€â”€ nginx-service.yaml\nâ””â”€â”€ values.yaml\n```\n\nå…¶ä¸­ `main.go` å®šä¹‰çš„æ˜¯ `hellok8s:v6` ç‰ˆæœ¬çš„ä»£ç ï¼Œä¸»è¦æ˜¯ä»ç³»ç»Ÿä¸­æ‹¿åˆ° messageï¼Œnamespaceï¼ŒdbURLï¼ŒdbPassword è¿™å‡ ä¸ªç¯å¢ƒå˜é‡ï¼Œæ‹¼æ¥æˆå­—ç¬¦ä¸²è¿”å›ã€‚\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"io\"\n\t\"net/http\"\n\t\"os\"\n)\n\nfunc hello(w http.ResponseWriter, r *http.Request) {\n\thost, _ := os.Hostname()\n\tmessage := os.Getenv(\"MESSAGE\")\n\tnamespace := os.Getenv(\"NAMESPACE\")\n\tdbURL := os.Getenv(\"DB_URL\")\n\tdbPassword := os.Getenv(\"DB_PASSWORD\")\n\n\tio.WriteString(w, fmt.Sprintf(\"[v6] Hello, Helm! Message from helm values: %s, From namespace: %s, From host: %s, Get Database Connect URL: %s, Database Connect Password: %s\", message, namespace, host, dbURL, dbPassword))\n}\n\nfunc main() {\n\thttp.HandleFunc(\"/\", hello)\n\thttp.ListenAndServe(\":3000\", nil)\n}\n```\n\nä¸ºäº†è®©å¤§å®¶æ›´åŠ äº†è§£ helm charts values çš„ä½¿ç”¨å’Œç†Ÿæ‚‰ k8s èµ„æºé…ç½®ï¼Œè¿™å‡ ä¸ªç¯å¢ƒå˜é‡ `MESSAGE`, `NAMESPACE`, `DB_URL`, `DB_PASSWORD` åˆ†åˆ«æœ‰ä¸åŒçš„æ¥æºã€‚\n\né¦–å…ˆä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ `values.yaml` æ–‡ä»¶ï¼Œå®šä¹‰è‡ªå®šä¹‰çš„é…ç½®ä¿¡æ¯ï¼Œä»ä¹‹å‰æ•™ç¨‹çš„ k8s èµ„æºæ–‡ä»¶ä¸­ï¼Œå°†ä¸€äº›æ˜“äºå˜åŒ–çš„å‚æ•°æå–å‡ºæ¥ï¼Œæ”¾åœ¨ `values.yaml` æ–‡ä»¶ä¸­ã€‚å…¨éƒ¨é…ç½®ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```yaml\napplication:\n  name: hellok8s\n  hellok8s:\n    image: guangzhengli/hellok8s:v6\n    replicas: 3\n    message: \"It works with Helm Values!\"\n    database:\n      url: \"http://DB_ADDRESS_DEFAULT\"\n      password: \"db_password\"\n  nginx:\n    image: nginx\n    replicas: 2\n```\n\né‚£è‡ªå®šä¹‰å¥½äº†è¿™äº›é…ç½®åï¼Œå¦‚ä½•åœ¨ k8s èµ„æºå®šä¹‰ä¸­ä½¿ç”¨è¿™äº›é…ç½®ä¿¡æ¯å‘¢ï¼ŸHelm é»˜è®¤ä½¿ç”¨ [Go template çš„æ–¹å¼](https://helm.sh/zh/docs/howto/charts_tips_and_tricks/) æ¥å®Œæˆã€‚\n\nä¾‹å¦‚ä¹‹å‰æ•™ç¨‹ä¸­ï¼Œå°†ç¯å¢ƒå˜é‡ `DB_URL` å®šä¹‰åœ¨ k8s configmaps ä¸­ï¼Œé‚£ä¹ˆè¯¥èµ„æºå¯ä»¥å®šä¹‰æˆå¦‚æ–‡ä»¶æ‰€ç¤º `hellok8s-configmaps.yaml`ã€‚å…¶ä¸­ `metadata.name` çš„å€¼æ˜¯ `{{ .Values.application.name }}-config`ï¼Œæ„æ€æ˜¯ä» `values.yaml` æ–‡ä»¶ä¸­è·å– `application.name` çš„å€¼ `hellok8s`ï¼Œæ‹¼æ¥ `-config` å­—ç¬¦ä¸²ï¼Œè¿™æ ·åˆ›å»ºå‡ºæ¥çš„ configmaps èµ„æºåç§°å°±æ˜¯ `hellok8s-config`ã€‚\n\nåŒç† `{{ .Values.application.hellok8s.database.url }}` å°±æ˜¯è·å–å€¼ä¸º  `http://DB_ADDRESS_DEFAULT`  æ”¾å…¥ configmaps å¯¹åº” key ä¸º DB_URL çš„ value ä¸­ã€‚\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: {{ .Values.application.name }}-config\ndata:\n  DB_URL: {{ .Values.application.hellok8s.database.url }}\n```\n\nä¸Šé¢å®šä¹‰çš„æœ€ç»ˆæ•ˆæœå’Œä¹‹å‰åœ¨ `configmaps` æ•™ç¨‹ä¸­å®šä¹‰çš„èµ„æºæ²¡æœ‰åŒºåˆ«ï¼Œè¿™ç§åšçš„å¥½å¤„æ˜¯å¯ä»¥å°†æ‰€æœ‰å¯å˜çš„å‚æ•°å®šä¹‰åœ¨ `values.yaml` æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨è¯¥ helm charts çš„äººæ— éœ€äº†è§£å…·ä½“ k8s çš„å®šä¹‰ï¼Œåªéœ€æ”¹å˜æˆè‡ªå·±æƒ³è¦çš„å‚æ•°ï¼Œå³å¯åˆ›å»ºè‡ªå®šä¹‰çš„èµ„æºï¼\n\nåŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¹‹å‰çš„æ•™ç¨‹å°† `DB_PASSWORD` æ”¾å…¥ secret ä¸­ï¼Œå¹¶ä¸”é€šè¿‡ `b64enc` æ–¹æ³•å°†å€¼ Base64 ç¼–ç ã€‚\n\n```shell\n# hellok8s-secret.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: {{ .Values.application.name }}-secret\ndata:\n  DB_PASSWORD: {{ .Values.application.hellok8s.database.password | b64enc }}\n```\n\næœ€åï¼Œä¿®æ”¹ `hellok8s-deployment` æ–‡ä»¶ï¼Œæ ¹æ®å‰é¢çš„æ•™ç¨‹ï¼Œå°† `metadata.name` `replicas` `image`  `configMapKeyRef.name` `secretKeyRef.name` ç­‰å€¼ä¿®æ”¹æˆä» `values.yaml` æ–‡ä»¶ä¸­è·å–ã€‚\n\nå†æ·»åŠ ä»£ç ä¸­éœ€è¦çš„ `NAMESPACE` ç¯å¢ƒå˜é‡ï¼Œä» `.Release.Namespace` [å†…ç½®å¯¹è±¡](https://helm.sh/zh/docs/chart_template_guide/builtin_objects/) ä¸­è·å–ã€‚æœ€åæ·»åŠ  `MESSAGE` ç¯å¢ƒå˜é‡ï¼Œç›´æ¥ä» `{{ .Values.application.hellok8s.message }}` ä¸­è·å–ã€‚\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: {{ .Values.application.name }}-deployment\nspec:\n  replicas: {{ .Values.application.hellok8s.replicas }}\n  selector:\n    matchLabels:\n      app: hellok8s\n  template:\n    metadata:\n      labels:\n        app: hellok8s\n    spec:\n      containers:\n        - image: {{ .Values.application.hellok8s.image }}\n          name: hellok8s-container\n          env:\n            - name: DB_URL\n              valueFrom:\n                configMapKeyRef:\n                  name: {{ .Values.application.name }}-config\n                  key: DB_URL\n            - name: DB_PASSWORD\n              valueFrom:\n                secretKeyRef:\n                  name: {{ .Values.application.name }}-secret\n                  key: DB_PASSWORD\n            - name: NAMESPACE\n              value: {{ .Release.Namespace }}\n            - name: MESSAGE\n              value: {{ .Values.application.hellok8s.message }}\n```\n\nä¿®æ”¹  `ingress.yaml` å°† `metadata.name` çš„å€¼ï¼Œå…¶å®ƒæ²¡æœ‰å˜åŒ–\n\n``` yaml\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: {{ .Values.application.name }}-ingress\n...\n...\n...\n```\n\n`nginx-deployment.yaml`\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\nspec:\n  replicas: {{ .Values.application.nginx.replicas }}\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - image: {{ .Values.application.nginx.image }}\n        name: nginx-container\n```\n\n`nginx-service.yaml` å’Œ `hellok8s-service.yaml` æ²¡æœ‰å˜åŒ–ã€‚æ‰€æœ‰ä»£ç å¯ä»¥åœ¨ [è¿™é‡Œ](https://github.com/guangzhengli/k8s-tutorials/tree/main/helm-charts/hello-helm) æŸ¥çœ‹ã€‚\n\nç¨å¾®ä¿®æ”¹ä¸‹é»˜è®¤ç”Ÿæˆçš„`Chart.yaml`\n\n```yaml\napiVersion: v2\nname: hello-helm\ndescription: A k8s tutorials in https://github.com/guangzhengli/k8s-tutorials\ntype: application\nversion: 0.1.0\nappVersion: \"1.16.0\"\n```\n\nå®šä¹‰å®Œæˆæ‰€æœ‰çš„ helm èµ„æºåï¼Œé¦–å…ˆ**å°† `hellok8s:v6` é•œåƒæ‰“åŒ…æ¨é€åˆ° DockerHub**ã€‚\n\nä¹‹åå³å¯åœ¨ `hello-helm` çš„ç›®å½•ä¸‹æ‰§è¡Œ `helm upgrade` å‘½ä»¤è¿›è¡Œå®‰è£…ï¼Œå®‰è£…æˆåŠŸåï¼Œæ‰§è¡Œ curl å‘½ä»¤ä¾¿èƒ½ç›´æ¥å¾—åˆ°ç»“æœï¼æŸ¥çœ‹ pod å’Œ service ç­‰èµ„æºï¼Œä¾¿ä¼šå‘ç° helm èƒ½ä¸€é”®å®‰è£…æ‰€æœ‰èµ„æºï¼\n\n```shell\nhelm upgrade --install hello-helm --values values.yaml .\n# Release \"hello-helm\" does not exist. Installing it now.\n# NAME: hello-helm\n# NAMESPACE: default\n# STATUS: deployed\n# REVISION: 1\n\ncurl http://192.168.59.100/hello\n# [v6] Hello, Helm! Message from helm values: It works with Helm Values!, From namespace: default, From host: hellok8s-deployment-57d7df7964-m6gcc, Get Database Connect URL: http://DB_ADDRESS_DEFAULT, Database Connect Password: db_password\n\nkubectl get pods\n# NAME                                  READY   STATUS    RESTARTS   AGE\n# hellok8s-deployment-f88f984c6-k8hpz   1/1     Running   0          32m\n# hellok8s-deployment-f88f984c6-nzwg6   1/1     Running   0          32m\n# hellok8s-deployment-f88f984c6-s89s7   1/1     Running   0          32m\n# nginx-deployment-d47fd7f66-6w76b      1/1     Running   0          32m\n# nginx-deployment-d47fd7f66-tsqj5      1/1     Running   0          32m\n```\n\n#### rollback\n\nHelm ä¹Ÿæä¾›äº† Rollback çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å…ˆä¿®æ”¹ä¸€ä¸‹ `message: \"It works with Helm Values[v2]!\"` åŠ ä¸Š [v2]ã€‚\n\n```\napplication:\n  name: hellok8s\n  hellok8s:\n    image: guangzhengli/hellok8s:v6\n    replicas: 3\n    message: \"It works with Helm Values[v2]!\"\n    database:\n      url: \"http://DB_ADDRESS_DEFAULT\"\n      password: \"db_password\"\n  nginx:\n    image: nginx\n    replicas: 2\n```\n\nå†æ‰§è¡Œ `helm upgrade` å‘½ä»¤æ›´æ–° k8s èµ„æºï¼Œé€šè¿‡ `curl http://192.168.59.100/hello` å¯ä»¥çœ‹åˆ°èµ„æºå·²ç»æ›´æ–°ã€‚\n\n```shell\nâœ  hello-helm git:(main) âœ— helm upgrade --install hello-helm --values values.yaml .\n# Release \"hello-helm\" has been upgraded. Happy Helming!\nNAME: hello-helm\nNAMESPACE: default\nSTATUS: deployed\nREVISION: 2\n\ncurl http://192.168.59.100/hello\n# [v6] Hello, Helm! Message from helm values: It works with Helm Values[v2]!, From namespace: default, From host: hellok8s-deployment-598bbd6884-4b9bw, Get Database Connect URL: http://DB_ADDRESS_DEFAULT, Database Connect Password: db_password\n```\n\nå¦‚æœè¿™ä¸€æ¬¡æ›´æ–°æœ‰é—®é¢˜çš„è¯ï¼Œå¯ä»¥é€šè¿‡ ` helm rollback` å¿«é€Ÿå›æ»šã€‚é€šè¿‡ä¸‹é¢å‘½ä»¤çœ‹åˆ°ï¼Œå’Œ deployment çš„ rollback ä¸€æ ·ï¼Œå›æ»šå REVISION ç‰ˆæœ¬éƒ½ä¼šå¢å¤§åˆ° 3 è€Œä¸æ˜¯å›æ»šåˆ° 1ï¼Œå›æ»šåä½¿ç”¨  `curl` å‘½ä»¤è¿”å›çš„ v1 ç‰ˆæœ¬çš„å­—ç¬¦ä¸²ã€‚\n\n```shell\nhelm ls\n# NAME            NAMESPACE       REVISION          STATUS          CHART                   APP VERSION\n# hello-helm      default         2                 deployed        hello-helm-0.1.0        1.16.0 \n\nhelm rollback hello-helm 1\n# Rollback was a success! Happy Helming!\n\nhelm ls\n# NAME            NAMESPACE       REVISION          STATUS          CHART                   APP VERSION\n# hello-helm      default         3                 deployed        hello-helm-0.1.0        1.16.0 \n\ncurl http://192.168.59.100/hello\n# [v6] Hello, Helm! Message from helm values: It works with Helm Values!, From namespace: default, From host: hellok8s-deployment-57d7df7964-482xw, Get Database Connect URL: http://DB_ADDRESS_DEFAULT, Database Connect Password: db_password\n```\n\n#### å¤šç¯å¢ƒé…ç½®\n\nä½¿ç”¨ Helm ä¹Ÿå¾ˆå®¹æ˜“å¤šç¯å¢ƒéƒ¨ç½²ï¼Œæ–°å»º `values-dev.yaml` æ–‡ä»¶ï¼Œé‡Œé¢å†…å®¹è‡ªå®šä¹‰ `dev` ç¯å¢ƒéœ€è¦çš„é…ç½®ä¿¡æ¯ã€‚\n\n```yaml\napplication:\n  hellok8s:\n    message: \"It works with Helm Values values-dev.yaml!\"\n    database:\n      url: \"http://DB_ADDRESS_DEV\"\n      password: \"db_password_dev\"\n```\n\nå¯ä»¥å¤šæ¬¡æŒ‡å®š'--values -f'å‚æ•°ï¼Œæœ€åï¼ˆæœ€å³è¾¹ï¼‰æŒ‡å®šçš„æ–‡ä»¶ä¼˜å…ˆçº§æœ€é«˜ï¼Œè¿™é‡Œæœ€å³è¾¹çš„æ˜¯ `values-dev.yaml` æ–‡ä»¶ï¼Œæ‰€ä»¥ `values-dev.yaml` æ–‡ä»¶ä¸­çš„å€¼ä¼šè¦†ç›– `values.yaml` ä¸­ç›¸åŒçš„å€¼ï¼Œ`-n dev` è¡¨ç¤ºåœ¨åå­—ä¸º dev çš„ namespace ä¸­åˆ›å»º k8s èµ„æºï¼Œæ‰§è¡Œå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `curl` å‘½ä»¤çœ‹åˆ°è¿”å›çš„å­—ç¬¦ä¸²ä¸­è¯»å–çš„æ˜¯ `values-dev.yaml` æ–‡ä»¶çš„é…ç½®ï¼Œå¹¶ä¸” `From namespace = dev`ã€‚\n\n```shell\nhelm upgrade --install hello-helm -f values.yaml -f values-dev.yaml -n dev .\n\n# Release \"hello-helm\" does not exist. Installing it now.\n# NAME: hello-helm\n# NAMESPACE: dev\n# STATUS: deployed\n# REVISION: 1\n\ncurl http://192.168.59.100/hello\n# [v6] Hello, Helm! Message from helm values: It works with Helm Values values-dev.yaml!, From namespace: dev, From host: hellok8s-deployment-f5fff9df-89sn6, Get Database Connect URL: http://DB_ADDRESS_DEV, Database Connect Password: db_password_dev\n\nkubectl get pods -n dev\n# NAME                                 READY   STATUS    RESTARTS   AGE\n# hellok8s-deployment-f5fff9df-89sn6   1/1     Running   0          4m23s\n# hellok8s-deployment-f5fff9df-tkh6g   1/1     Running   0          4m23s\n# hellok8s-deployment-f5fff9df-wmlpb   1/1     Running   0          4m23s\n# nginx-deployment-d47fd7f66-cdlmf     1/1     Running   0          4m23s\n# nginx-deployment-d47fd7f66-cgst2     1/1     Running   0          4m23s\n```\n\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ '--set-file' è®¾ç½®ç‹¬ç«‹çš„å€¼ï¼Œç±»ä¼¼äº `helm upgrade --install hello-helm -f values.yaml -f values-dev.yaml --set application.hellok8s.message=\"It works with set helm values\" -n dev .` æ–¹å¼åœ¨å‘½ä»¤ä¸­è®¾ç½® values çš„å€¼ï¼Œå¯ä»¥éšæ„ä¿®æ”¹ç›¸å…³é…ç½®ï¼Œæ­¤æ–¹æ³•åœ¨ CICD ä¸­ç»å¸¸ç”¨åˆ°ã€‚\n\n### helm chart æ‰“åŒ…å’Œå‘å¸ƒ\n\nä¸Šé¢çš„ä¾‹å­å±•ç¤ºäº†æˆ‘ä»¬å¯ä»¥ç”¨ä¸€è¡Œå‘½ä»¤åœ¨ä¸€ä¸ªæ–°çš„ç¯å¢ƒä¸­å®‰è£…æ‰€æœ‰éœ€è¦çš„ k8s èµ„æºï¼é‚£ä¹ˆå¦‚ä½•å°† helm chart æ‰“åŒ…ã€åˆ†å‘å’Œä¸‹è½½å‘¢ï¼Ÿåœ¨å®˜ç½‘ä¸­ï¼Œæä¾›äº†ä¸¤ç§æ•™ç¨‹ï¼Œä¸€ç§æ˜¯ä»¥ [GCS å­˜å‚¨çš„æ•™ç¨‹](https://helm.sh/zh/docs/howto/chart_repository_sync_example/)ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ä»¥ [GitHub Pages å­˜å‚¨çš„æ•™ç¨‹](https://helm.sh/zh/docs/howto/chart_releaser_action/)ã€‚\n\nè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒç§ï¼Œå¹¶ä¸”ä½¿ç”¨ [chart-releaser-action](https://github.com/helm/chart-releaser-action) æ¥åšè‡ªåŠ¨å‘å¸ƒï¼Œè¯¥ action ä¼šé»˜è®¤ç”Ÿæˆ helm chart å‘å¸ƒåˆ° `gh-pages` åˆ†æ”¯ä¸Šï¼Œæœ¬æ•™ç¨‹çš„ hellok8s helm chart å°±å‘å¸ƒåœ¨äº†æœ¬ä»“åº“çš„[gh-pages](https://github.com/guangzhengli/k8s-tutorials/tree/gh-pages/) åˆ†æ”¯ä¸Šçš„ `index.yaml` æ–‡ä»¶ä¸­ã€‚\n\n\nåœ¨ä½¿ç”¨ action è‡ªåŠ¨ç”Ÿæˆ chart ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç†Ÿæ‚‰ä¸€ä¸‹å¦‚ä½•æ‰‹åŠ¨ç”Ÿæˆï¼Œåœ¨ `hello-helm` ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ `helm package` å°†chartç›®å½•æ‰“åŒ…åˆ°chartå½’æ¡£ä¸­ã€‚`helm repo index` å‘½ä»¤å¯ä»¥åŸºäºåŒ…å«æ‰“åŒ…chartçš„ç›®å½•ï¼Œç”Ÿæˆä»“åº“çš„ç´¢å¼•æ–‡ä»¶ `index.yaml`ã€‚\n\næœ€åï¼Œå¯ä»¥ä½¿ç”¨ `helm upgrade --install *.tgz` å‘½ä»¤å°†è¯¥æŒ‡å®šåŒ…è¿›è¡Œå®‰è£…ä½¿ç”¨ã€‚\n\n```shell\nhelm package hello-helm\n# Successfully packaged chart and saved it to: /Users/guangzheng.li/workspace/k8s-tutorials/hello-helm/hello-helm-0.1.0.tgz\n\nhelm repo index .\n\nhelm upgrade --install hello-helm hello-helm-0.1.0.tgz\n```\n\nåŸºäºä¸Šé¢çš„æ­¥éª¤ï¼Œä½ å¯èƒ½å·²ç»æƒ³åˆ°ï¼Œæ‰€è°“çš„ helm æ‰“åŒ…å’Œå‘å¸ƒï¼Œå°±æ˜¯ `hello-helm-0.1.0.tgz` æ–‡ä»¶å’Œ `index.yaml` ç”Ÿæˆå’Œä¸Šä¼ çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚è€Œ helm ä¸‹è½½å’Œå®‰è£…ï¼Œå°±æ˜¯å¦‚ä½•å°† `.tgz` å’Œ `index.yaml` æ–‡ä»¶ä¸‹è½½å’Œ `helm upgrade --install` çš„è¿‡ç¨‹ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬å‘å¸ƒç”Ÿæˆçš„ hellok8s helm chartï¼Œå…ˆå°†æ‰‹åŠ¨ç”Ÿæˆçš„ `hello-helm-0.1.0.tgz` å’Œ `index.yaml` æ–‡ä»¶åˆ é™¤ï¼Œåç»­ä½¿ç”¨ GitHub action è‡ªåŠ¨ç”Ÿæˆå’Œå‘å¸ƒè¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚\n\nGitHub action çš„ä»£ç å¯ä»¥å‚è€ƒ [å®˜ç½‘æ–‡æ¡£](https://helm.sh/zh/docs/howto/chart_releaser_action/) æˆ–è€…æœ¬ä»“åº“ `.github/workflows/release.yml` æ–‡ä»¶ã€‚ä»£è¡¨å½“ push ä»£ç åˆ°è¿œç¨‹ä»“åº“æ—¶ï¼Œå°† `helm-charts` ç›®å½•ä¸‹çš„æ‰€æœ‰ charts è‡ªåŠ¨æ‰“åŒ…å’Œå‘å¸ƒåˆ° `gh-pages` åˆ†æ”¯å»(éœ€è¦ä¿è¯ `gh-pages` åˆ†æ”¯å·²ç»å­˜åœ¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™)ã€‚\n\n\n```yaml\nname: Release Charts\n\non:\n  push:\n    branches:\n      - main\n\njobs:\n  release:\n    # depending on default permission settings for your org (contents being read-only or read-write for workloads), you will have to add permissions\n    # see: https://docs.github.com/en/actions/security-guides/automatic-token-authentication#modifying-the-permissions-for-the-github_token\n    permissions:\n      contents: write\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          fetch-depth: 0\n\n      - name: Configure Git\n        run: |\n          git config user.name \"$GITHUB_ACTOR\"\n          git config user.email \"$GITHUB_ACTOR@users.noreply.github.com\"\n\n      - name: Install Helm\n        uses: azure/setup-helm@v1\n        with:\n          version: v3.8.1\n\n      - name: Run chart-releaser\n        uses: helm/chart-releaser-action@v1.4.0\n        with: \n          charts_dir: helm-charts\n        env:\n          CR_TOKEN: \"${{ secrets.GITHUB_TOKEN }}\"\n```\n\næ¥ç€é…ç½®ä»“åº“çš„ `Settings -> Pages -> Build and deployment -> Branch`ï¼Œé€‰æ‹© `gh-pages` åˆ†æ”¯ï¼ŒGitHub ä¼šè‡ªåŠ¨åœ¨ `https://username.github.io/project` å‘å¸ƒ helm chartã€‚\n\næœ€åï¼Œä½ å¯ä»¥å°†è‡ªå·±çš„ helm charts å‘å¸ƒåˆ°ç¤¾åŒºä¸­å»ï¼Œå¯ä»¥è€ƒè™‘å‘å¸ƒåˆ° [ArtifactHub](https://artifacthub.io/) ä¸­ï¼Œåƒæœ¬ä»“åº“ç”Ÿæˆçš„ helm charts å³å‘å¸ƒåœ¨ [ArtifactHub hellok8s](https://artifacthub.io/packages/helm/hellok8s/hello-helm) ä¸­ã€‚\n\n![tnvYFS](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/tnvYFS.png)\n\n## Dashboard\n\n### kubernetes dashboard\n\n> Dashboard æ˜¯åŸºäºç½‘é¡µçš„ Kubernetes ç”¨æˆ·ç•Œé¢ã€‚ ä½ å¯ä»¥ä½¿ç”¨ Dashboard å°†å®¹å™¨åº”ç”¨éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ä¸­ï¼Œä¹Ÿå¯ä»¥å¯¹å®¹å™¨åº”ç”¨æ’é”™ï¼Œè¿˜èƒ½ç®¡ç†é›†ç¾¤èµ„æºã€‚ ä½ å¯ä»¥ä½¿ç”¨ Dashboard è·å–è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„åº”ç”¨çš„æ¦‚è§ˆä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæˆ–è€…ä¿®æ”¹ Kubernetes èµ„æº ï¼ˆå¦‚ Deploymentï¼ŒJobï¼ŒDaemonSet ç­‰ç­‰ï¼‰ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥å¯¹ Deployment å®ç°å¼¹æ€§ä¼¸ç¼©ã€å‘èµ·æ»šåŠ¨å‡çº§ã€é‡å¯ Pod æˆ–è€…ä½¿ç”¨å‘å¯¼åˆ›å»ºæ–°çš„åº”ç”¨ã€‚\n\nåœ¨æœ¬åœ° minikube ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ä¸‹é¢å‘½ä»¤å¼€å¯ Dashboardã€‚æ›´å¤šç”¨æ³•å¯ä»¥å‚è€ƒå®˜ç½‘æˆ–è€…è‡ªè¡Œæ¢ç´¢ã€‚\n\n```shell\nminikube dashboard\n```\n\n![eB3MYd](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/eB3MYd.png)\n\n### K9s\n\n[K9s](https://k9scli.io/) æ˜¯ä¸€ä¸ªåŸºäº Terminal çš„è½»é‡çº§ UIï¼Œå¯ä»¥æ›´åŠ è½»æ¾çš„è§‚å¯Ÿå’Œç®¡ç†å·²éƒ¨ç½²çš„ k8s èµ„æºã€‚ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•ï¼Œå®‰è£…åè¾“å…¥ `k9s` å³å¯å¼€å¯ Terminal Dashboardï¼Œæ›´å¤šç”¨æ³•å¯ä»¥å‚è€ƒå®˜ç½‘ã€‚\n\n![83ybd4](https://cdn.jsdelivr.net/gh/guangzhengli/PicURL@master/uPic/83ybd4.png)\n\n## Sponsor\n\nå¦‚æœè¿™ä»½æ•™ç¨‹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯·ä½œè€…å–æ¯å’–å•¡ã€‚\nhttps://guangzhengli.com/sponsors\n\nSponsored by [The best china travel guide website](https://chinagotrip.com)\n\n\n## Star History\n\n[![Star History Chart](https://api.star-history.com/svg?repos=guangzhengli/k8s-tutorials&type=Date)](https://star-history.com/#guangzhengli/k8s-tutorials&Date)\n"
        },
        {
          "name": "configmaps",
          "type": "tree",
          "content": null
        },
        {
          "name": "container",
          "type": "tree",
          "content": null
        },
        {
          "name": "cronJob",
          "type": "tree",
          "content": null
        },
        {
          "name": "deployment",
          "type": "tree",
          "content": null
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "helm-charts",
          "type": "tree",
          "content": null
        },
        {
          "name": "images",
          "type": "tree",
          "content": null
        },
        {
          "name": "ingress",
          "type": "tree",
          "content": null
        },
        {
          "name": "job",
          "type": "tree",
          "content": null
        },
        {
          "name": "namespaces",
          "type": "tree",
          "content": null
        },
        {
          "name": "package-lock.json",
          "type": "blob",
          "size": 41.71875,
          "content": "{\n  \"name\": \"kubenates_workshop\",\n  \"lockfileVersion\": 3,\n  \"requires\": true,\n  \"packages\": {\n    \"\": {\n      \"dependencies\": {\n        \"vitepress\": \"1.0.0-rc.4\"\n      }\n    },\n    \"node_modules/@algolia/autocomplete-core\": {\n      \"version\": \"1.9.3\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/autocomplete-core/-/autocomplete-core-1.9.3.tgz\",\n      \"integrity\": \"sha512-009HdfugtGCdC4JdXUbVJClA0q0zh24yyePn+KUGk3rP7j8FEe/m5Yo/z65gn6nP/cM39PxpzqKrL7A6fP6PPw==\",\n      \"dependencies\": {\n        \"@algolia/autocomplete-plugin-algolia-insights\": \"1.9.3\",\n        \"@algolia/autocomplete-shared\": \"1.9.3\"\n      }\n    },\n    \"node_modules/@algolia/autocomplete-plugin-algolia-insights\": {\n      \"version\": \"1.9.3\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/autocomplete-plugin-algolia-insights/-/autocomplete-plugin-algolia-insights-1.9.3.tgz\",\n      \"integrity\": \"sha512-a/yTUkcO/Vyy+JffmAnTWbr4/90cLzw+CC3bRbhnULr/EM0fGNvM13oQQ14f2moLMcVDyAx/leczLlAOovhSZg==\",\n      \"dependencies\": {\n        \"@algolia/autocomplete-shared\": \"1.9.3\"\n      },\n      \"peerDependencies\": {\n        \"search-insights\": \">= 1 < 3\"\n      }\n    },\n    \"node_modules/@algolia/autocomplete-preset-algolia\": {\n      \"version\": \"1.9.3\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/autocomplete-preset-algolia/-/autocomplete-preset-algolia-1.9.3.tgz\",\n      \"integrity\": \"sha512-d4qlt6YmrLMYy95n5TB52wtNDr6EgAIPH81dvvvW8UmuWRgxEtY0NJiPwl/h95JtG2vmRM804M0DSwMCNZlzRA==\",\n      \"dependencies\": {\n        \"@algolia/autocomplete-shared\": \"1.9.3\"\n      },\n      \"peerDependencies\": {\n        \"@algolia/client-search\": \">= 4.9.1 < 6\",\n        \"algoliasearch\": \">= 4.9.1 < 6\"\n      }\n    },\n    \"node_modules/@algolia/autocomplete-shared\": {\n      \"version\": \"1.9.3\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/autocomplete-shared/-/autocomplete-shared-1.9.3.tgz\",\n      \"integrity\": \"sha512-Wnm9E4Ye6Rl6sTTqjoymD+l8DjSTHsHboVRYrKgEt8Q7UHm9nYbqhN/i0fhUYA3OAEH7WA8x3jfpnmJm3rKvaQ==\",\n      \"peerDependencies\": {\n        \"@algolia/client-search\": \">= 4.9.1 < 6\",\n        \"algoliasearch\": \">= 4.9.1 < 6\"\n      }\n    },\n    \"node_modules/@algolia/cache-browser-local-storage\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/cache-browser-local-storage/-/cache-browser-local-storage-4.19.1.tgz\",\n      \"integrity\": \"sha512-FYAZWcGsFTTaSAwj9Std8UML3Bu8dyWDncM7Ls8g+58UOe4XYdlgzXWbrIgjaguP63pCCbMoExKr61B+ztK3tw==\",\n      \"dependencies\": {\n        \"@algolia/cache-common\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/cache-common\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/cache-common/-/cache-common-4.19.1.tgz\",\n      \"integrity\": \"sha512-XGghi3l0qA38HiqdoUY+wvGyBsGvKZ6U3vTiMBT4hArhP3fOGLXpIINgMiiGjTe4FVlTa5a/7Zf2bwlIHfRqqg==\"\n    },\n    \"node_modules/@algolia/cache-in-memory\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/cache-in-memory/-/cache-in-memory-4.19.1.tgz\",\n      \"integrity\": \"sha512-+PDWL+XALGvIginigzu8oU6eWw+o76Z8zHbBovWYcrtWOEtinbl7a7UTt3x3lthv+wNuFr/YD1Gf+B+A9V8n5w==\",\n      \"dependencies\": {\n        \"@algolia/cache-common\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/client-account\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/client-account/-/client-account-4.19.1.tgz\",\n      \"integrity\": \"sha512-Oy0ritA2k7AMxQ2JwNpfaEcgXEDgeyKu0V7E7xt/ZJRdXfEpZcwp9TOg4TJHC7Ia62gIeT2Y/ynzsxccPw92GA==\",\n      \"dependencies\": {\n        \"@algolia/client-common\": \"4.19.1\",\n        \"@algolia/client-search\": \"4.19.1\",\n        \"@algolia/transporter\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/client-analytics\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/client-analytics/-/client-analytics-4.19.1.tgz\",\n      \"integrity\": \"sha512-5QCq2zmgdZLIQhHqwl55ZvKVpLM3DNWjFI4T+bHr3rGu23ew2bLO4YtyxaZeChmDb85jUdPDouDlCumGfk6wOg==\",\n      \"dependencies\": {\n        \"@algolia/client-common\": \"4.19.1\",\n        \"@algolia/client-search\": \"4.19.1\",\n        \"@algolia/requester-common\": \"4.19.1\",\n        \"@algolia/transporter\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/client-common\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/client-common/-/client-common-4.19.1.tgz\",\n      \"integrity\": \"sha512-3kAIVqTcPrjfS389KQvKzliC559x+BDRxtWamVJt8IVp7LGnjq+aVAXg4Xogkur1MUrScTZ59/AaUd5EdpyXgA==\",\n      \"dependencies\": {\n        \"@algolia/requester-common\": \"4.19.1\",\n        \"@algolia/transporter\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/client-personalization\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/client-personalization/-/client-personalization-4.19.1.tgz\",\n      \"integrity\": \"sha512-8CWz4/H5FA+krm9HMw2HUQenizC/DxUtsI5oYC0Jxxyce1vsr8cb1aEiSJArQT6IzMynrERif1RVWLac1m36xw==\",\n      \"dependencies\": {\n        \"@algolia/client-common\": \"4.19.1\",\n        \"@algolia/requester-common\": \"4.19.1\",\n        \"@algolia/transporter\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/client-search\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/client-search/-/client-search-4.19.1.tgz\",\n      \"integrity\": \"sha512-mBecfMFS4N+yK/p0ZbK53vrZbL6OtWMk8YmnOv1i0LXx4pelY8TFhqKoTit3NPVPwoSNN0vdSN9dTu1xr1XOVw==\",\n      \"dependencies\": {\n        \"@algolia/client-common\": \"4.19.1\",\n        \"@algolia/requester-common\": \"4.19.1\",\n        \"@algolia/transporter\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/logger-common\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/logger-common/-/logger-common-4.19.1.tgz\",\n      \"integrity\": \"sha512-i6pLPZW/+/YXKis8gpmSiNk1lOmYCmRI6+x6d2Qk1OdfvX051nRVdalRbEcVTpSQX6FQAoyeaui0cUfLYW5Elw==\"\n    },\n    \"node_modules/@algolia/logger-console\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/logger-console/-/logger-console-4.19.1.tgz\",\n      \"integrity\": \"sha512-jj72k9GKb9W0c7TyC3cuZtTr0CngLBLmc8trzZlXdfvQiigpUdvTi1KoWIb2ZMcRBG7Tl8hSb81zEY3zI2RlXg==\",\n      \"dependencies\": {\n        \"@algolia/logger-common\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/requester-browser-xhr\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/requester-browser-xhr/-/requester-browser-xhr-4.19.1.tgz\",\n      \"integrity\": \"sha512-09K/+t7lptsweRTueHnSnmPqIxbHMowejAkn9XIcJMLdseS3zl8ObnS5GWea86mu3vy4+8H+ZBKkUN82Zsq/zg==\",\n      \"dependencies\": {\n        \"@algolia/requester-common\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/requester-common\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/requester-common/-/requester-common-4.19.1.tgz\",\n      \"integrity\": \"sha512-BisRkcWVxrDzF1YPhAckmi2CFYK+jdMT60q10d7z3PX+w6fPPukxHRnZwooiTUrzFe50UBmLItGizWHP5bDzVQ==\"\n    },\n    \"node_modules/@algolia/requester-node-http\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/requester-node-http/-/requester-node-http-4.19.1.tgz\",\n      \"integrity\": \"sha512-6DK52DHviBHTG2BK/Vv2GIlEw7i+vxm7ypZW0Z7vybGCNDeWzADx+/TmxjkES2h15+FZOqVf/Ja677gePsVItA==\",\n      \"dependencies\": {\n        \"@algolia/requester-common\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@algolia/transporter\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/@algolia/transporter/-/transporter-4.19.1.tgz\",\n      \"integrity\": \"sha512-nkpvPWbpuzxo1flEYqNIbGz7xhfhGOKGAZS7tzC+TELgEmi7z99qRyTfNSUlW7LZmB3ACdnqAo+9A9KFBENviQ==\",\n      \"dependencies\": {\n        \"@algolia/cache-common\": \"4.19.1\",\n        \"@algolia/logger-common\": \"4.19.1\",\n        \"@algolia/requester-common\": \"4.19.1\"\n      }\n    },\n    \"node_modules/@babel/parser\": {\n      \"version\": \"7.22.10\",\n      \"resolved\": \"https://registry.npmjs.org/@babel/parser/-/parser-7.22.10.tgz\",\n      \"integrity\": \"sha512-lNbdGsQb9ekfsnjFGhEiF4hfFqGgfOP3H3d27re3n+CGhNuTSUEQdfWk556sTLNTloczcdM5TYF2LhzmDQKyvQ==\",\n      \"bin\": {\n        \"parser\": \"bin/babel-parser.js\"\n      },\n      \"engines\": {\n        \"node\": \">=6.0.0\"\n      }\n    },\n    \"node_modules/@docsearch/css\": {\n      \"version\": \"3.5.1\",\n      \"resolved\": \"https://registry.npmjs.org/@docsearch/css/-/css-3.5.1.tgz\",\n      \"integrity\": \"sha512-2Pu9HDg/uP/IT10rbQ+4OrTQuxIWdKVUEdcw9/w7kZJv9NeHS6skJx1xuRiFyoGKwAzcHXnLp7csE99sj+O1YA==\"\n    },\n    \"node_modules/@docsearch/js\": {\n      \"version\": \"3.5.1\",\n      \"resolved\": \"https://registry.npmjs.org/@docsearch/js/-/js-3.5.1.tgz\",\n      \"integrity\": \"sha512-EXi8de5njxgP6TV3N9ytnGRLG9zmBNTEZjR4VzwPcpPLbZxxTLG2gaFyJyKiFVQxHW/DPlMrDJA3qoRRGEkgZw==\",\n      \"dependencies\": {\n        \"@docsearch/react\": \"3.5.1\",\n        \"preact\": \"^10.0.0\"\n      }\n    },\n    \"node_modules/@docsearch/react\": {\n      \"version\": \"3.5.1\",\n      \"resolved\": \"https://registry.npmjs.org/@docsearch/react/-/react-3.5.1.tgz\",\n      \"integrity\": \"sha512-t5mEODdLzZq4PTFAm/dvqcvZFdPDMdfPE5rJS5SC8OUq9mPzxEy6b+9THIqNM9P0ocCb4UC5jqBrxKclnuIbzQ==\",\n      \"dependencies\": {\n        \"@algolia/autocomplete-core\": \"1.9.3\",\n        \"@algolia/autocomplete-preset-algolia\": \"1.9.3\",\n        \"@docsearch/css\": \"3.5.1\",\n        \"algoliasearch\": \"^4.0.0\"\n      },\n      \"peerDependencies\": {\n        \"@types/react\": \">= 16.8.0 < 19.0.0\",\n        \"react\": \">= 16.8.0 < 19.0.0\",\n        \"react-dom\": \">= 16.8.0 < 19.0.0\"\n      },\n      \"peerDependenciesMeta\": {\n        \"@types/react\": {\n          \"optional\": true\n        },\n        \"react\": {\n          \"optional\": true\n        },\n        \"react-dom\": {\n          \"optional\": true\n        }\n      }\n    },\n    \"node_modules/@esbuild/android-arm\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.18.20.tgz\",\n      \"integrity\": \"sha512-fyi7TDI/ijKKNZTUJAQqiG5T7YjJXgnzkURqmGj13C6dCqckZBLdl4h7bkhHt/t0WP+zO9/zwroDvANaOqO5Sw==\",\n      \"cpu\": [\n        \"arm\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"android\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/android-arm64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.18.20.tgz\",\n      \"integrity\": \"sha512-Nz4rJcchGDtENV0eMKUNa6L12zz2zBDXuhj/Vjh18zGqB44Bi7MBMSXjgunJgjRhCmKOjnPuZp4Mb6OKqtMHLQ==\",\n      \"cpu\": [\n        \"arm64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"android\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/android-x64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.18.20.tgz\",\n      \"integrity\": \"sha512-8GDdlePJA8D6zlZYJV/jnrRAi6rOiNaCC/JclcXpB+KIuvfBN4owLtgzY2bsxnx666XjJx2kDPUmnTtR8qKQUg==\",\n      \"cpu\": [\n        \"x64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"android\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/darwin-arm64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.18.20.tgz\",\n      \"integrity\": \"sha512-bxRHW5kHU38zS2lPTPOyuyTm+S+eobPUnTNkdJEfAddYgEcll4xkT8DB9d2008DtTbl7uJag2HuE5NZAZgnNEA==\",\n      \"cpu\": [\n        \"arm64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"darwin\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/darwin-x64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.18.20.tgz\",\n      \"integrity\": \"sha512-pc5gxlMDxzm513qPGbCbDukOdsGtKhfxD1zJKXjCCcU7ju50O7MeAZ8c4krSJcOIJGFR+qx21yMMVYwiQvyTyQ==\",\n      \"cpu\": [\n        \"x64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"darwin\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/freebsd-arm64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.18.20.tgz\",\n      \"integrity\": \"sha512-yqDQHy4QHevpMAaxhhIwYPMv1NECwOvIpGCZkECn8w2WFHXjEwrBn3CeNIYsibZ/iZEUemj++M26W3cNR5h+Tw==\",\n      \"cpu\": [\n        \"arm64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"freebsd\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/freebsd-x64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.18.20.tgz\",\n      \"integrity\": \"sha512-tgWRPPuQsd3RmBZwarGVHZQvtzfEBOreNuxEMKFcd5DaDn2PbBxfwLcj4+aenoh7ctXcbXmOQIn8HI6mCSw5MQ==\",\n      \"cpu\": [\n        \"x64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"freebsd\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/linux-arm\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.18.20.tgz\",\n      \"integrity\": \"sha512-/5bHkMWnq1EgKr1V+Ybz3s1hWXok7mDFUMQ4cG10AfW3wL02PSZi5kFpYKrptDsgb2WAJIvRcDm+qIvXf/apvg==\",\n      \"cpu\": [\n        \"arm\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"linux\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/linux-arm64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.18.20.tgz\",\n      \"integrity\": \"sha512-2YbscF+UL7SQAVIpnWvYwM+3LskyDmPhe31pE7/aoTMFKKzIc9lLbyGUpmmb8a8AixOL61sQ/mFh3jEjHYFvdA==\",\n      \"cpu\": [\n        \"arm64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"linux\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/linux-ia32\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.18.20.tgz\",\n      \"integrity\": \"sha512-P4etWwq6IsReT0E1KHU40bOnzMHoH73aXp96Fs8TIT6z9Hu8G6+0SHSw9i2isWrD2nbx2qo5yUqACgdfVGx7TA==\",\n      \"cpu\": [\n        \"ia32\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"linux\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/linux-loong64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.18.20.tgz\",\n      \"integrity\": \"sha512-nXW8nqBTrOpDLPgPY9uV+/1DjxoQ7DoB2N8eocyq8I9XuqJ7BiAMDMf9n1xZM9TgW0J8zrquIb/A7s3BJv7rjg==\",\n      \"cpu\": [\n        \"loong64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"linux\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/linux-mips64el\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.18.20.tgz\",\n      \"integrity\": \"sha512-d5NeaXZcHp8PzYy5VnXV3VSd2D328Zb+9dEq5HE6bw6+N86JVPExrA6O68OPwobntbNJ0pzCpUFZTo3w0GyetQ==\",\n      \"cpu\": [\n        \"mips64el\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"linux\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/linux-ppc64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.18.20.tgz\",\n      \"integrity\": \"sha512-WHPyeScRNcmANnLQkq6AfyXRFr5D6N2sKgkFo2FqguP44Nw2eyDlbTdZwd9GYk98DZG9QItIiTlFLHJHjxP3FA==\",\n      \"cpu\": [\n        \"ppc64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"linux\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/linux-riscv64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.18.20.tgz\",\n      \"integrity\": \"sha512-WSxo6h5ecI5XH34KC7w5veNnKkju3zBRLEQNY7mv5mtBmrP/MjNBCAlsM2u5hDBlS3NGcTQpoBvRzqBcRtpq1A==\",\n      \"cpu\": [\n        \"riscv64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"linux\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/linux-s390x\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.18.20.tgz\",\n      \"integrity\": \"sha512-+8231GMs3mAEth6Ja1iK0a1sQ3ohfcpzpRLH8uuc5/KVDFneH6jtAJLFGafpzpMRO6DzJ6AvXKze9LfFMrIHVQ==\",\n      \"cpu\": [\n        \"s390x\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"linux\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/linux-x64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.18.20.tgz\",\n      \"integrity\": \"sha512-UYqiqemphJcNsFEskc73jQ7B9jgwjWrSayxawS6UVFZGWrAAtkzjxSqnoclCXxWtfwLdzU+vTpcNYhpn43uP1w==\",\n      \"cpu\": [\n        \"x64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"linux\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/netbsd-x64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.18.20.tgz\",\n      \"integrity\": \"sha512-iO1c++VP6xUBUmltHZoMtCUdPlnPGdBom6IrO4gyKPFFVBKioIImVooR5I83nTew5UOYrk3gIJhbZh8X44y06A==\",\n      \"cpu\": [\n        \"x64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"netbsd\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/openbsd-x64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.18.20.tgz\",\n      \"integrity\": \"sha512-e5e4YSsuQfX4cxcygw/UCPIEP6wbIL+se3sxPdCiMbFLBWu0eiZOJ7WoD+ptCLrmjZBK1Wk7I6D/I3NglUGOxg==\",\n      \"cpu\": [\n        \"x64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"openbsd\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/sunos-x64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.18.20.tgz\",\n      \"integrity\": \"sha512-kDbFRFp0YpTQVVrqUd5FTYmWo45zGaXe0X8E1G/LKFC0v8x0vWrhOWSLITcCn63lmZIxfOMXtCfti/RxN/0wnQ==\",\n      \"cpu\": [\n        \"x64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"sunos\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/win32-arm64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.18.20.tgz\",\n      \"integrity\": \"sha512-ddYFR6ItYgoaq4v4JmQQaAI5s7npztfV4Ag6NrhiaW0RrnOXqBkgwZLofVTlq1daVTQNhtI5oieTvkRPfZrePg==\",\n      \"cpu\": [\n        \"arm64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"win32\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/win32-ia32\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.18.20.tgz\",\n      \"integrity\": \"sha512-Wv7QBi3ID/rROT08SABTS7eV4hX26sVduqDOTe1MvGMjNd3EjOz4b7zeexIR62GTIEKrfJXKL9LFxTYgkyeu7g==\",\n      \"cpu\": [\n        \"ia32\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"win32\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@esbuild/win32-x64\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.18.20.tgz\",\n      \"integrity\": \"sha512-kTdfRcSiDfQca/y9QIkng02avJ+NCaQvrMejlsB3RRv5sE9rRoeBPISaZpKxHELzRxZyLvNts1P27W3wV+8geQ==\",\n      \"cpu\": [\n        \"x64\"\n      ],\n      \"optional\": true,\n      \"os\": [\n        \"win32\"\n      ],\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@jridgewell/sourcemap-codec\": {\n      \"version\": \"1.4.15\",\n      \"resolved\": \"https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.4.15.tgz\",\n      \"integrity\": \"sha512-eF2rxCRulEKXHTRiDrDy6erMYWqNw4LPdQ8UQA4huuxaQsVeRPFl2oM8oDGxMFhJUWZf9McpLtJasDDZb/Bpeg==\"\n    },\n    \"node_modules/@types/web-bluetooth\": {\n      \"version\": \"0.0.17\",\n      \"resolved\": \"https://registry.npmjs.org/@types/web-bluetooth/-/web-bluetooth-0.0.17.tgz\",\n      \"integrity\": \"sha512-4p9vcSmxAayx72yn70joFoL44c9MO/0+iVEBIQXe3v2h2SiAsEIo/G5v6ObFWvNKRFjbrVadNf9LqEEZeQPzdA==\"\n    },\n    \"node_modules/@vitejs/plugin-vue\": {\n      \"version\": \"4.2.3\",\n      \"resolved\": \"https://registry.npmjs.org/@vitejs/plugin-vue/-/plugin-vue-4.2.3.tgz\",\n      \"integrity\": \"sha512-R6JDUfiZbJA9cMiguQ7jxALsgiprjBeHL5ikpXfJCH62pPHtI+JdJ5xWj6Ev73yXSlYl86+blXn1kZHQ7uElxw==\",\n      \"engines\": {\n        \"node\": \"^14.18.0 || >=16.0.0\"\n      },\n      \"peerDependencies\": {\n        \"vite\": \"^4.0.0\",\n        \"vue\": \"^3.2.25\"\n      }\n    },\n    \"node_modules/@vue/compiler-core\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/compiler-core/-/compiler-core-3.3.4.tgz\",\n      \"integrity\": \"sha512-cquyDNvZ6jTbf/+x+AgM2Arrp6G4Dzbb0R64jiG804HRMfRiFXWI6kqUVqZ6ZR0bQhIoQjB4+2bhNtVwndW15g==\",\n      \"dependencies\": {\n        \"@babel/parser\": \"^7.21.3\",\n        \"@vue/shared\": \"3.3.4\",\n        \"estree-walker\": \"^2.0.2\",\n        \"source-map-js\": \"^1.0.2\"\n      }\n    },\n    \"node_modules/@vue/compiler-dom\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/compiler-dom/-/compiler-dom-3.3.4.tgz\",\n      \"integrity\": \"sha512-wyM+OjOVpuUukIq6p5+nwHYtj9cFroz9cwkfmP9O1nzH68BenTTv0u7/ndggT8cIQlnBeOo6sUT/gvHcIkLA5w==\",\n      \"dependencies\": {\n        \"@vue/compiler-core\": \"3.3.4\",\n        \"@vue/shared\": \"3.3.4\"\n      }\n    },\n    \"node_modules/@vue/compiler-sfc\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/compiler-sfc/-/compiler-sfc-3.3.4.tgz\",\n      \"integrity\": \"sha512-6y/d8uw+5TkCuzBkgLS0v3lSM3hJDntFEiUORM11pQ/hKvkhSKZrXW6i69UyXlJQisJxuUEJKAWEqWbWsLeNKQ==\",\n      \"dependencies\": {\n        \"@babel/parser\": \"^7.20.15\",\n        \"@vue/compiler-core\": \"3.3.4\",\n        \"@vue/compiler-dom\": \"3.3.4\",\n        \"@vue/compiler-ssr\": \"3.3.4\",\n        \"@vue/reactivity-transform\": \"3.3.4\",\n        \"@vue/shared\": \"3.3.4\",\n        \"estree-walker\": \"^2.0.2\",\n        \"magic-string\": \"^0.30.0\",\n        \"postcss\": \"^8.1.10\",\n        \"source-map-js\": \"^1.0.2\"\n      }\n    },\n    \"node_modules/@vue/compiler-ssr\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/compiler-ssr/-/compiler-ssr-3.3.4.tgz\",\n      \"integrity\": \"sha512-m0v6oKpup2nMSehwA6Uuu+j+wEwcy7QmwMkVNVfrV9P2qE5KshC6RwOCq8fjGS/Eak/uNb8AaWekfiXxbBB6gQ==\",\n      \"dependencies\": {\n        \"@vue/compiler-dom\": \"3.3.4\",\n        \"@vue/shared\": \"3.3.4\"\n      }\n    },\n    \"node_modules/@vue/devtools-api\": {\n      \"version\": \"6.5.0\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/devtools-api/-/devtools-api-6.5.0.tgz\",\n      \"integrity\": \"sha512-o9KfBeaBmCKl10usN4crU53fYtC1r7jJwdGKjPT24t348rHxgfpZ0xL3Xm/gLUYnc0oTp8LAmrxOeLyu6tbk2Q==\"\n    },\n    \"node_modules/@vue/reactivity\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/reactivity/-/reactivity-3.3.4.tgz\",\n      \"integrity\": \"sha512-kLTDLwd0B1jG08NBF3R5rqULtv/f8x3rOFByTDz4J53ttIQEDmALqKqXY0J+XQeN0aV2FBxY8nJDf88yvOPAqQ==\",\n      \"dependencies\": {\n        \"@vue/shared\": \"3.3.4\"\n      }\n    },\n    \"node_modules/@vue/reactivity-transform\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/reactivity-transform/-/reactivity-transform-3.3.4.tgz\",\n      \"integrity\": \"sha512-MXgwjako4nu5WFLAjpBnCj/ieqcjE2aJBINUNQzkZQfzIZA4xn+0fV1tIYBJvvva3N3OvKGofRLvQIwEQPpaXw==\",\n      \"dependencies\": {\n        \"@babel/parser\": \"^7.20.15\",\n        \"@vue/compiler-core\": \"3.3.4\",\n        \"@vue/shared\": \"3.3.4\",\n        \"estree-walker\": \"^2.0.2\",\n        \"magic-string\": \"^0.30.0\"\n      }\n    },\n    \"node_modules/@vue/runtime-core\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/runtime-core/-/runtime-core-3.3.4.tgz\",\n      \"integrity\": \"sha512-R+bqxMN6pWO7zGI4OMlmvePOdP2c93GsHFM/siJI7O2nxFRzj55pLwkpCedEY+bTMgp5miZ8CxfIZo3S+gFqvA==\",\n      \"dependencies\": {\n        \"@vue/reactivity\": \"3.3.4\",\n        \"@vue/shared\": \"3.3.4\"\n      }\n    },\n    \"node_modules/@vue/runtime-dom\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/runtime-dom/-/runtime-dom-3.3.4.tgz\",\n      \"integrity\": \"sha512-Aj5bTJ3u5sFsUckRghsNjVTtxZQ1OyMWCr5dZRAPijF/0Vy4xEoRCwLyHXcj4D0UFbJ4lbx3gPTgg06K/GnPnQ==\",\n      \"dependencies\": {\n        \"@vue/runtime-core\": \"3.3.4\",\n        \"@vue/shared\": \"3.3.4\",\n        \"csstype\": \"^3.1.1\"\n      }\n    },\n    \"node_modules/@vue/server-renderer\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/server-renderer/-/server-renderer-3.3.4.tgz\",\n      \"integrity\": \"sha512-Q6jDDzR23ViIb67v+vM1Dqntu+HUexQcsWKhhQa4ARVzxOY2HbC7QRW/ggkDBd5BU+uM1sV6XOAP0b216o34JQ==\",\n      \"dependencies\": {\n        \"@vue/compiler-ssr\": \"3.3.4\",\n        \"@vue/shared\": \"3.3.4\"\n      },\n      \"peerDependencies\": {\n        \"vue\": \"3.3.4\"\n      }\n    },\n    \"node_modules/@vue/shared\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/@vue/shared/-/shared-3.3.4.tgz\",\n      \"integrity\": \"sha512-7OjdcV8vQ74eiz1TZLzZP4JwqM5fA94K6yntPS5Z25r9HDuGNzaGdgvwKYq6S+MxwF0TFRwe50fIR/MYnakdkQ==\"\n    },\n    \"node_modules/@vueuse/core\": {\n      \"version\": \"10.3.0\",\n      \"resolved\": \"https://registry.npmjs.org/@vueuse/core/-/core-10.3.0.tgz\",\n      \"integrity\": \"sha512-BEM5yxcFKb5btFjTSAFjTu5jmwoW66fyV9uJIP4wUXXU8aR5Hl44gndaaXp7dC5HSObmgbnR2RN+Un1p68Mf5Q==\",\n      \"dependencies\": {\n        \"@types/web-bluetooth\": \"^0.0.17\",\n        \"@vueuse/metadata\": \"10.3.0\",\n        \"@vueuse/shared\": \"10.3.0\",\n        \"vue-demi\": \">=0.14.5\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/antfu\"\n      }\n    },\n    \"node_modules/@vueuse/core/node_modules/vue-demi\": {\n      \"version\": \"0.14.5\",\n      \"resolved\": \"https://registry.npmjs.org/vue-demi/-/vue-demi-0.14.5.tgz\",\n      \"integrity\": \"sha512-o9NUVpl/YlsGJ7t+xuqJKx8EBGf1quRhCiT6D/J0pfwmk9zUwYkC7yrF4SZCe6fETvSM3UNL2edcbYrSyc4QHA==\",\n      \"hasInstallScript\": true,\n      \"bin\": {\n        \"vue-demi-fix\": \"bin/vue-demi-fix.js\",\n        \"vue-demi-switch\": \"bin/vue-demi-switch.js\"\n      },\n      \"engines\": {\n        \"node\": \">=12\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/antfu\"\n      },\n      \"peerDependencies\": {\n        \"@vue/composition-api\": \"^1.0.0-rc.1\",\n        \"vue\": \"^3.0.0-0 || ^2.6.0\"\n      },\n      \"peerDependenciesMeta\": {\n        \"@vue/composition-api\": {\n          \"optional\": true\n        }\n      }\n    },\n    \"node_modules/@vueuse/integrations\": {\n      \"version\": \"10.3.0\",\n      \"resolved\": \"https://registry.npmjs.org/@vueuse/integrations/-/integrations-10.3.0.tgz\",\n      \"integrity\": \"sha512-Jgiv7oFyIgC6BxmDtiyG/fxyGysIds00YaY7sefwbhCZ2/tjEx1W/1WcsISSJPNI30in28+HC2J4uuU8184ekg==\",\n      \"dependencies\": {\n        \"@vueuse/core\": \"10.3.0\",\n        \"@vueuse/shared\": \"10.3.0\",\n        \"vue-demi\": \">=0.14.5\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/antfu\"\n      },\n      \"peerDependencies\": {\n        \"async-validator\": \"*\",\n        \"axios\": \"*\",\n        \"change-case\": \"*\",\n        \"drauu\": \"*\",\n        \"focus-trap\": \"*\",\n        \"fuse.js\": \"*\",\n        \"idb-keyval\": \"*\",\n        \"jwt-decode\": \"*\",\n        \"nprogress\": \"*\",\n        \"qrcode\": \"*\",\n        \"sortablejs\": \"*\",\n        \"universal-cookie\": \"*\"\n      },\n      \"peerDependenciesMeta\": {\n        \"async-validator\": {\n          \"optional\": true\n        },\n        \"axios\": {\n          \"optional\": true\n        },\n        \"change-case\": {\n          \"optional\": true\n        },\n        \"drauu\": {\n          \"optional\": true\n        },\n        \"focus-trap\": {\n          \"optional\": true\n        },\n        \"fuse.js\": {\n          \"optional\": true\n        },\n        \"idb-keyval\": {\n          \"optional\": true\n        },\n        \"jwt-decode\": {\n          \"optional\": true\n        },\n        \"nprogress\": {\n          \"optional\": true\n        },\n        \"qrcode\": {\n          \"optional\": true\n        },\n        \"sortablejs\": {\n          \"optional\": true\n        },\n        \"universal-cookie\": {\n          \"optional\": true\n        }\n      }\n    },\n    \"node_modules/@vueuse/integrations/node_modules/vue-demi\": {\n      \"version\": \"0.14.5\",\n      \"resolved\": \"https://registry.npmjs.org/vue-demi/-/vue-demi-0.14.5.tgz\",\n      \"integrity\": \"sha512-o9NUVpl/YlsGJ7t+xuqJKx8EBGf1quRhCiT6D/J0pfwmk9zUwYkC7yrF4SZCe6fETvSM3UNL2edcbYrSyc4QHA==\",\n      \"hasInstallScript\": true,\n      \"bin\": {\n        \"vue-demi-fix\": \"bin/vue-demi-fix.js\",\n        \"vue-demi-switch\": \"bin/vue-demi-switch.js\"\n      },\n      \"engines\": {\n        \"node\": \">=12\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/antfu\"\n      },\n      \"peerDependencies\": {\n        \"@vue/composition-api\": \"^1.0.0-rc.1\",\n        \"vue\": \"^3.0.0-0 || ^2.6.0\"\n      },\n      \"peerDependenciesMeta\": {\n        \"@vue/composition-api\": {\n          \"optional\": true\n        }\n      }\n    },\n    \"node_modules/@vueuse/metadata\": {\n      \"version\": \"10.3.0\",\n      \"resolved\": \"https://registry.npmjs.org/@vueuse/metadata/-/metadata-10.3.0.tgz\",\n      \"integrity\": \"sha512-Ema3YhNOa4swDsV0V7CEY5JXvK19JI/o1szFO1iWxdFg3vhdFtCtSTP26PCvbUpnUtNHBY2wx5y3WDXND5Pvnw==\",\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/antfu\"\n      }\n    },\n    \"node_modules/@vueuse/shared\": {\n      \"version\": \"10.3.0\",\n      \"resolved\": \"https://registry.npmjs.org/@vueuse/shared/-/shared-10.3.0.tgz\",\n      \"integrity\": \"sha512-kGqCTEuFPMK4+fNWy6dUOiYmxGcUbtznMwBZLC1PubidF4VZY05B+Oht7Jh7/6x4VOWGpvu3R37WHi81cKpiqg==\",\n      \"dependencies\": {\n        \"vue-demi\": \">=0.14.5\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/antfu\"\n      }\n    },\n    \"node_modules/@vueuse/shared/node_modules/vue-demi\": {\n      \"version\": \"0.14.5\",\n      \"resolved\": \"https://registry.npmjs.org/vue-demi/-/vue-demi-0.14.5.tgz\",\n      \"integrity\": \"sha512-o9NUVpl/YlsGJ7t+xuqJKx8EBGf1quRhCiT6D/J0pfwmk9zUwYkC7yrF4SZCe6fETvSM3UNL2edcbYrSyc4QHA==\",\n      \"hasInstallScript\": true,\n      \"bin\": {\n        \"vue-demi-fix\": \"bin/vue-demi-fix.js\",\n        \"vue-demi-switch\": \"bin/vue-demi-switch.js\"\n      },\n      \"engines\": {\n        \"node\": \">=12\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/antfu\"\n      },\n      \"peerDependencies\": {\n        \"@vue/composition-api\": \"^1.0.0-rc.1\",\n        \"vue\": \"^3.0.0-0 || ^2.6.0\"\n      },\n      \"peerDependenciesMeta\": {\n        \"@vue/composition-api\": {\n          \"optional\": true\n        }\n      }\n    },\n    \"node_modules/algoliasearch\": {\n      \"version\": \"4.19.1\",\n      \"resolved\": \"https://registry.npmjs.org/algoliasearch/-/algoliasearch-4.19.1.tgz\",\n      \"integrity\": \"sha512-IJF5b93b2MgAzcE/tuzW0yOPnuUyRgGAtaPv5UUywXM8kzqfdwZTO4sPJBzoGz1eOy6H9uEchsJsBFTELZSu+g==\",\n      \"dependencies\": {\n        \"@algolia/cache-browser-local-storage\": \"4.19.1\",\n        \"@algolia/cache-common\": \"4.19.1\",\n        \"@algolia/cache-in-memory\": \"4.19.1\",\n        \"@algolia/client-account\": \"4.19.1\",\n        \"@algolia/client-analytics\": \"4.19.1\",\n        \"@algolia/client-common\": \"4.19.1\",\n        \"@algolia/client-personalization\": \"4.19.1\",\n        \"@algolia/client-search\": \"4.19.1\",\n        \"@algolia/logger-common\": \"4.19.1\",\n        \"@algolia/logger-console\": \"4.19.1\",\n        \"@algolia/requester-browser-xhr\": \"4.19.1\",\n        \"@algolia/requester-common\": \"4.19.1\",\n        \"@algolia/requester-node-http\": \"4.19.1\",\n        \"@algolia/transporter\": \"4.19.1\"\n      }\n    },\n    \"node_modules/ansi-sequence-parser\": {\n      \"version\": \"1.1.1\",\n      \"resolved\": \"https://registry.npmjs.org/ansi-sequence-parser/-/ansi-sequence-parser-1.1.1.tgz\",\n      \"integrity\": \"sha512-vJXt3yiaUL4UU546s3rPXlsry/RnM730G1+HkpKE012AN0sx1eOrxSu95oKDIonskeLTijMgqWZ3uDEe3NFvyg==\"\n    },\n    \"node_modules/body-scroll-lock\": {\n      \"version\": \"4.0.0-beta.0\",\n      \"resolved\": \"https://registry.npmjs.org/body-scroll-lock/-/body-scroll-lock-4.0.0-beta.0.tgz\",\n      \"integrity\": \"sha512-a7tP5+0Mw3YlUJcGAKUqIBkYYGlYxk2fnCasq/FUph1hadxlTRjF+gAcZksxANnaMnALjxEddmSi/H3OR8ugcQ==\"\n    },\n    \"node_modules/csstype\": {\n      \"version\": \"3.1.2\",\n      \"resolved\": \"https://registry.npmjs.org/csstype/-/csstype-3.1.2.tgz\",\n      \"integrity\": \"sha512-I7K1Uu0MBPzaFKg4nI5Q7Vs2t+3gWWW648spaF+Rg7pI9ds18Ugn+lvg4SHczUdKlHI5LWBXyqfS8+DufyBsgQ==\"\n    },\n    \"node_modules/esbuild\": {\n      \"version\": \"0.18.20\",\n      \"resolved\": \"https://registry.npmjs.org/esbuild/-/esbuild-0.18.20.tgz\",\n      \"integrity\": \"sha512-ceqxoedUrcayh7Y7ZX6NdbbDzGROiyVBgC4PriJThBKSVPWnnFHZAkfI1lJT8QFkOwH4qOS2SJkS4wvpGl8BpA==\",\n      \"hasInstallScript\": true,\n      \"bin\": {\n        \"esbuild\": \"bin/esbuild\"\n      },\n      \"engines\": {\n        \"node\": \">=12\"\n      },\n      \"optionalDependencies\": {\n        \"@esbuild/android-arm\": \"0.18.20\",\n        \"@esbuild/android-arm64\": \"0.18.20\",\n        \"@esbuild/android-x64\": \"0.18.20\",\n        \"@esbuild/darwin-arm64\": \"0.18.20\",\n        \"@esbuild/darwin-x64\": \"0.18.20\",\n        \"@esbuild/freebsd-arm64\": \"0.18.20\",\n        \"@esbuild/freebsd-x64\": \"0.18.20\",\n        \"@esbuild/linux-arm\": \"0.18.20\",\n        \"@esbuild/linux-arm64\": \"0.18.20\",\n        \"@esbuild/linux-ia32\": \"0.18.20\",\n        \"@esbuild/linux-loong64\": \"0.18.20\",\n        \"@esbuild/linux-mips64el\": \"0.18.20\",\n        \"@esbuild/linux-ppc64\": \"0.18.20\",\n        \"@esbuild/linux-riscv64\": \"0.18.20\",\n        \"@esbuild/linux-s390x\": \"0.18.20\",\n        \"@esbuild/linux-x64\": \"0.18.20\",\n        \"@esbuild/netbsd-x64\": \"0.18.20\",\n        \"@esbuild/openbsd-x64\": \"0.18.20\",\n        \"@esbuild/sunos-x64\": \"0.18.20\",\n        \"@esbuild/win32-arm64\": \"0.18.20\",\n        \"@esbuild/win32-ia32\": \"0.18.20\",\n        \"@esbuild/win32-x64\": \"0.18.20\"\n      }\n    },\n    \"node_modules/estree-walker\": {\n      \"version\": \"2.0.2\",\n      \"resolved\": \"https://registry.npmjs.org/estree-walker/-/estree-walker-2.0.2.tgz\",\n      \"integrity\": \"sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==\"\n    },\n    \"node_modules/focus-trap\": {\n      \"version\": \"7.5.2\",\n      \"resolved\": \"https://registry.npmjs.org/focus-trap/-/focus-trap-7.5.2.tgz\",\n      \"integrity\": \"sha512-p6vGNNWLDGwJCiEjkSK6oERj/hEyI9ITsSwIUICBoKLlWiTWXJRfQibCwcoi50rTZdbi87qDtUlMCmQwsGSgPw==\",\n      \"dependencies\": {\n        \"tabbable\": \"^6.2.0\"\n      }\n    },\n    \"node_modules/fsevents\": {\n      \"version\": \"2.3.2\",\n      \"resolved\": \"https://registry.npmjs.org/fsevents/-/fsevents-2.3.2.tgz\",\n      \"integrity\": \"sha512-xiqMQR4xAeHTuB9uWm+fFRcIOgKBMiOBP+eXiyT7jsgVCq1bkVygt00oASowB7EdtpOHaaPgKt812P9ab+DDKA==\",\n      \"hasInstallScript\": true,\n      \"optional\": true,\n      \"os\": [\n        \"darwin\"\n      ],\n      \"engines\": {\n        \"node\": \"^8.16.0 || ^10.6.0 || >=11.0.0\"\n      }\n    },\n    \"node_modules/jsonc-parser\": {\n      \"version\": \"3.2.0\",\n      \"resolved\": \"https://registry.npmjs.org/jsonc-parser/-/jsonc-parser-3.2.0.tgz\",\n      \"integrity\": \"sha512-gfFQZrcTc8CnKXp6Y4/CBT3fTc0OVuDofpre4aEeEpSBPV5X5v4+Vmx+8snU7RLPrNHPKSgLxGo9YuQzz20o+w==\"\n    },\n    \"node_modules/magic-string\": {\n      \"version\": \"0.30.2\",\n      \"resolved\": \"https://registry.npmjs.org/magic-string/-/magic-string-0.30.2.tgz\",\n      \"integrity\": \"sha512-lNZdu7pewtq/ZvWUp9Wpf/x7WzMTsR26TWV03BRZrXFsv+BI6dy8RAiKgm1uM/kyR0rCfUcqvOlXKG66KhIGug==\",\n      \"dependencies\": {\n        \"@jridgewell/sourcemap-codec\": \"^1.4.15\"\n      },\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/mark.js\": {\n      \"version\": \"8.11.1\",\n      \"resolved\": \"https://registry.npmjs.org/mark.js/-/mark.js-8.11.1.tgz\",\n      \"integrity\": \"sha512-1I+1qpDt4idfgLQG+BNWmrqku+7/2bi5nLf4YwF8y8zXvmfiTBY3PV3ZibfrjBueCByROpuBjLLFCajqkgYoLQ==\"\n    },\n    \"node_modules/minisearch\": {\n      \"version\": \"6.1.0\",\n      \"resolved\": \"https://registry.npmjs.org/minisearch/-/minisearch-6.1.0.tgz\",\n      \"integrity\": \"sha512-PNxA/X8pWk+TiqPbsoIYH0GQ5Di7m6326/lwU/S4mlo4wGQddIcf/V//1f9TB0V4j59b57b+HZxt8h3iMROGvg==\"\n    },\n    \"node_modules/nanoid\": {\n      \"version\": \"3.3.6\",\n      \"resolved\": \"https://registry.npmjs.org/nanoid/-/nanoid-3.3.6.tgz\",\n      \"integrity\": \"sha512-BGcqMMJuToF7i1rt+2PWSNVnWIkGCU78jBG3RxO/bZlnZPK2Cmi2QaffxGO/2RvWi9sL+FAiRiXMgsyxQ1DIDA==\",\n      \"funding\": [\n        {\n          \"type\": \"github\",\n          \"url\": \"https://github.com/sponsors/ai\"\n        }\n      ],\n      \"bin\": {\n        \"nanoid\": \"bin/nanoid.cjs\"\n      },\n      \"engines\": {\n        \"node\": \"^10 || ^12 || ^13.7 || ^14 || >=15.0.1\"\n      }\n    },\n    \"node_modules/picocolors\": {\n      \"version\": \"1.0.0\",\n      \"resolved\": \"https://registry.npmjs.org/picocolors/-/picocolors-1.0.0.tgz\",\n      \"integrity\": \"sha512-1fygroTLlHu66zi26VoTDv8yRgm0Fccecssto+MhsZ0D/DGW2sm8E8AjW7NU5VVTRt5GxbeZ5qBuJr+HyLYkjQ==\"\n    },\n    \"node_modules/postcss\": {\n      \"version\": \"8.4.27\",\n      \"resolved\": \"https://registry.npmjs.org/postcss/-/postcss-8.4.27.tgz\",\n      \"integrity\": \"sha512-gY/ACJtJPSmUFPDCHtX78+01fHa64FaU4zaaWfuh1MhGJISufJAH4cun6k/8fwsHYeK4UQmENQK+tRLCFJE8JQ==\",\n      \"funding\": [\n        {\n          \"type\": \"opencollective\",\n          \"url\": \"https://opencollective.com/postcss/\"\n        },\n        {\n          \"type\": \"tidelift\",\n          \"url\": \"https://tidelift.com/funding/github/npm/postcss\"\n        },\n        {\n          \"type\": \"github\",\n          \"url\": \"https://github.com/sponsors/ai\"\n        }\n      ],\n      \"dependencies\": {\n        \"nanoid\": \"^3.3.6\",\n        \"picocolors\": \"^1.0.0\",\n        \"source-map-js\": \"^1.0.2\"\n      },\n      \"engines\": {\n        \"node\": \"^10 || ^12 || >=14\"\n      }\n    },\n    \"node_modules/preact\": {\n      \"version\": \"10.17.0\",\n      \"resolved\": \"https://registry.npmjs.org/preact/-/preact-10.17.0.tgz\",\n      \"integrity\": \"sha512-SNsI8cbaCcUS5tbv9nlXuCfIXnJ9ysBMWk0WnB6UWwcVA3qZ2O6FxqDFECMAMttvLQcW/HaNZUe2BLidyvrVYw==\",\n      \"funding\": {\n        \"type\": \"opencollective\",\n        \"url\": \"https://opencollective.com/preact\"\n      }\n    },\n    \"node_modules/rollup\": {\n      \"version\": \"3.28.0\",\n      \"resolved\": \"https://registry.npmjs.org/rollup/-/rollup-3.28.0.tgz\",\n      \"integrity\": \"sha512-d7zhvo1OUY2SXSM6pfNjgD5+d0Nz87CUp4mt8l/GgVP3oBsPwzNvSzyu1me6BSG9JIgWNTVcafIXBIyM8yQ3yw==\",\n      \"bin\": {\n        \"rollup\": \"dist/bin/rollup\"\n      },\n      \"engines\": {\n        \"node\": \">=14.18.0\",\n        \"npm\": \">=8.0.0\"\n      },\n      \"optionalDependencies\": {\n        \"fsevents\": \"~2.3.2\"\n      }\n    },\n    \"node_modules/search-insights\": {\n      \"version\": \"2.7.0\",\n      \"resolved\": \"https://registry.npmjs.org/search-insights/-/search-insights-2.7.0.tgz\",\n      \"integrity\": \"sha512-GLbVaGgzYEKMvuJbHRhLi1qoBFnjXZGZ6l4LxOYPCp4lI2jDRB3jPU9/XNhMwv6kvnA9slTreq6pvK+b3o3aqg==\",\n      \"peer\": true,\n      \"engines\": {\n        \"node\": \">=8.16.0\"\n      }\n    },\n    \"node_modules/shiki\": {\n      \"version\": \"0.14.3\",\n      \"resolved\": \"https://registry.npmjs.org/shiki/-/shiki-0.14.3.tgz\",\n      \"integrity\": \"sha512-U3S/a+b0KS+UkTyMjoNojvTgrBHjgp7L6ovhFVZsXmBGnVdQ4K4U9oK0z63w538S91ATngv1vXigHCSWOwnr+g==\",\n      \"dependencies\": {\n        \"ansi-sequence-parser\": \"^1.1.0\",\n        \"jsonc-parser\": \"^3.2.0\",\n        \"vscode-oniguruma\": \"^1.7.0\",\n        \"vscode-textmate\": \"^8.0.0\"\n      }\n    },\n    \"node_modules/source-map-js\": {\n      \"version\": \"1.0.2\",\n      \"resolved\": \"https://registry.npmjs.org/source-map-js/-/source-map-js-1.0.2.tgz\",\n      \"integrity\": \"sha512-R0XvVJ9WusLiqTCEiGCmICCMplcCkIwwR11mOSD9CR5u+IXYdiseeEuXCVAjS54zqwkLcPNnmU4OeJ6tUrWhDw==\",\n      \"engines\": {\n        \"node\": \">=0.10.0\"\n      }\n    },\n    \"node_modules/tabbable\": {\n      \"version\": \"6.2.0\",\n      \"resolved\": \"https://registry.npmjs.org/tabbable/-/tabbable-6.2.0.tgz\",\n      \"integrity\": \"sha512-Cat63mxsVJlzYvN51JmVXIgNoUokrIaT2zLclCXjRd8boZ0004U4KCs/sToJ75C6sdlByWxpYnb5Boif1VSFew==\"\n    },\n    \"node_modules/vite\": {\n      \"version\": \"4.4.9\",\n      \"resolved\": \"https://registry.npmjs.org/vite/-/vite-4.4.9.tgz\",\n      \"integrity\": \"sha512-2mbUn2LlUmNASWwSCNSJ/EG2HuSRTnVNaydp6vMCm5VIqJsjMfbIWtbH2kDuwUVW5mMUKKZvGPX/rqeqVvv1XA==\",\n      \"dependencies\": {\n        \"esbuild\": \"^0.18.10\",\n        \"postcss\": \"^8.4.27\",\n        \"rollup\": \"^3.27.1\"\n      },\n      \"bin\": {\n        \"vite\": \"bin/vite.js\"\n      },\n      \"engines\": {\n        \"node\": \"^14.18.0 || >=16.0.0\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/vitejs/vite?sponsor=1\"\n      },\n      \"optionalDependencies\": {\n        \"fsevents\": \"~2.3.2\"\n      },\n      \"peerDependencies\": {\n        \"@types/node\": \">= 14\",\n        \"less\": \"*\",\n        \"lightningcss\": \"^1.21.0\",\n        \"sass\": \"*\",\n        \"stylus\": \"*\",\n        \"sugarss\": \"*\",\n        \"terser\": \"^5.4.0\"\n      },\n      \"peerDependenciesMeta\": {\n        \"@types/node\": {\n          \"optional\": true\n        },\n        \"less\": {\n          \"optional\": true\n        },\n        \"lightningcss\": {\n          \"optional\": true\n        },\n        \"sass\": {\n          \"optional\": true\n        },\n        \"stylus\": {\n          \"optional\": true\n        },\n        \"sugarss\": {\n          \"optional\": true\n        },\n        \"terser\": {\n          \"optional\": true\n        }\n      }\n    },\n    \"node_modules/vitepress\": {\n      \"version\": \"1.0.0-rc.4\",\n      \"resolved\": \"https://registry.npmjs.org/vitepress/-/vitepress-1.0.0-rc.4.tgz\",\n      \"integrity\": \"sha512-JCQ89Bm6ECUTnyzyas3JENo00UDJeK8q1SUQyJYou+4Yz5BKEc/F3O21cu++DnUT2zXc0kvQ2Aj4BZCc/nioXQ==\",\n      \"dependencies\": {\n        \"@docsearch/css\": \"^3.5.1\",\n        \"@docsearch/js\": \"^3.5.1\",\n        \"@vitejs/plugin-vue\": \"^4.2.3\",\n        \"@vue/devtools-api\": \"^6.5.0\",\n        \"@vueuse/core\": \"^10.3.0\",\n        \"@vueuse/integrations\": \"^10.3.0\",\n        \"body-scroll-lock\": \"4.0.0-beta.0\",\n        \"focus-trap\": \"^7.5.2\",\n        \"mark.js\": \"8.11.1\",\n        \"minisearch\": \"^6.1.0\",\n        \"shiki\": \"^0.14.3\",\n        \"vite\": \"^4.4.9\",\n        \"vue\": \"^3.3.4\"\n      },\n      \"bin\": {\n        \"vitepress\": \"bin/vitepress.js\"\n      }\n    },\n    \"node_modules/vscode-oniguruma\": {\n      \"version\": \"1.7.0\",\n      \"resolved\": \"https://registry.npmjs.org/vscode-oniguruma/-/vscode-oniguruma-1.7.0.tgz\",\n      \"integrity\": \"sha512-L9WMGRfrjOhgHSdOYgCt/yRMsXzLDJSL7BPrOZt73gU0iWO4mpqzqQzOz5srxqTvMBaR0XZTSrVWo4j55Rc6cA==\"\n    },\n    \"node_modules/vscode-textmate\": {\n      \"version\": \"8.0.0\",\n      \"resolved\": \"https://registry.npmjs.org/vscode-textmate/-/vscode-textmate-8.0.0.tgz\",\n      \"integrity\": \"sha512-AFbieoL7a5LMqcnOF04ji+rpXadgOXnZsxQr//r83kLPr7biP7am3g9zbaZIaBGwBRWeSvoMD4mgPdX3e4NWBg==\"\n    },\n    \"node_modules/vue\": {\n      \"version\": \"3.3.4\",\n      \"resolved\": \"https://registry.npmjs.org/vue/-/vue-3.3.4.tgz\",\n      \"integrity\": \"sha512-VTyEYn3yvIeY1Py0WaYGZsXnz3y5UnGi62GjVEqvEGPl6nxbOrCXbVOTQWBEJUqAyTUk2uJ5JLVnYJ6ZzGbrSw==\",\n      \"dependencies\": {\n        \"@vue/compiler-dom\": \"3.3.4\",\n        \"@vue/compiler-sfc\": \"3.3.4\",\n        \"@vue/runtime-dom\": \"3.3.4\",\n        \"@vue/server-renderer\": \"3.3.4\",\n        \"@vue/shared\": \"3.3.4\"\n      }\n    }\n  }\n}\n"
        },
        {
          "name": "package.json",
          "type": "blob",
          "size": 0.1826171875,
          "content": "{\n  \"scripts\": {\n    \"docs:dev\": \"vitepress dev\",\n    \"docs:build\": \"vitepress build\",\n    \"docs:preview\": \"vitepress preview\"\n  },\n  \"dependencies\": {\n    \"vitepress\": \"1.0.0-rc.4\"\n  }\n}"
        },
        {
          "name": "pod",
          "type": "tree",
          "content": null
        },
        {
          "name": "secret",
          "type": "tree",
          "content": null
        },
        {
          "name": "service",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}