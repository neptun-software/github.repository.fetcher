{
  "metadata": {
    "timestamp": 1736711247232,
    "page": 56,
    "hasNextPage": false,
    "endCursor": "Y3Vyc29yOjYw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "nilaoda/BBDown",
      "stars": 10291,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".editorconfig",
          "type": "blob",
          "size": 0.2431640625,
          "content": "# EditorConfig is awesome: https://EditorConfig.org\r\n\r\n# top-most EditorConfig file\r\nroot = true\r\n\r\n[*]\r\nindent_style = space\r\nindent_size = 4\r\ncharset = utf-8\r\n# end_of_line = crlf\r\n# trim_trailing_whitespace = false\r\n# insert_final_newline = false"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 6.2119140625,
          "content": "## Ignore Visual Studio temporary files, build results, and\n## files generated by popular Visual Studio add-ons.\n##\n## Get latest from https://github.com/github/gitignore/blob/master/VisualStudio.gitignore\n\n# User-specific files\n*.rsuser\n*.suo\n*.user\n*.userosscache\n*.sln.docstates\n\n# User-specific files (MonoDevelop/Xamarin Studio)\n*.userprefs\n\n# Mono auto generated files\nmono_crash.*\n\n# Rider\n.idea\n\n# macOS shit\n.DS_Store\n\n# Build results\n[Dd]ebug/\n[Dd]ebugPublic/\n[Rr]elease/\n[Rr]eleases/\nx64/\nx86/\n[Ww][Ii][Nn]32/\n[Aa][Rr][Mm]/\n[Aa][Rr][Mm]64/\nbld/\n[Bb]in/\n[Oo]bj/\n[Ll]og/\n[Ll]ogs/\n\n# Visual Studio 2015/2017 cache/options directory\n.vs/\n# Uncomment if you have tasks that create the project's static files in wwwroot\n#wwwroot/\n\n# Visual Studio 2017 auto generated files\nGenerated\\ Files/\n\n# MSTest test Results\n[Tt]est[Rr]esult*/\n[Bb]uild[Ll]og.*\n\n# NUnit\n*.VisualState.xml\nTestResult.xml\nnunit-*.xml\n\n# Build Results of an ATL Project\n[Dd]ebugPS/\n[Rr]eleasePS/\ndlldata.c\n\n# Benchmark Results\nBenchmarkDotNet.Artifacts/\n\n# .NET Core\nproject.lock.json\nproject.fragment.lock.json\nartifacts/\n\n# ASP.NET Scaffolding\nScaffoldingReadMe.txt\n\n# StyleCop\nStyleCopReport.xml\n\n# Files built by Visual Studio\n*_i.c\n*_p.c\n*_h.h\n*.ilk\n*.meta\n*.obj\n*.iobj\n*.pch\n*.pdb\n*.ipdb\n*.pgc\n*.pgd\n*.rsp\n*.sbr\n*.tlb\n*.tli\n*.tlh\n*.tmp\n*.tmp_proj\n*_wpftmp.csproj\n*.log\n*.vspscc\n*.vssscc\n.builds\n*.pidb\n*.svclog\n*.scc\n\n# Chutzpah Test files\n_Chutzpah*\n\n# Visual C++ cache files\nipch/\n*.aps\n*.ncb\n*.opendb\n*.opensdf\n*.sdf\n*.cachefile\n*.VC.db\n*.VC.VC.opendb\n\n# Visual Studio profiler\n*.psess\n*.vsp\n*.vspx\n*.sap\n\n# Visual Studio Trace Files\n*.e2e\n\n# TFS 2012 Local Workspace\n$tf/\n\n# Guidance Automation Toolkit\n*.gpState\n\n# ReSharper is a .NET coding add-in\n_ReSharper*/\n*.[Rr]e[Ss]harper\n*.DotSettings.user\n\n# TeamCity is a build add-in\n_TeamCity*\n\n# DotCover is a Code Coverage Tool\n*.dotCover\n\n# AxoCover is a Code Coverage Tool\n.axoCover/*\n!.axoCover/settings.json\n\n# Coverlet is a free, cross platform Code Coverage Tool\ncoverage*.json\ncoverage*.xml\ncoverage*.info\n\n# Visual Studio code coverage results\n*.coverage\n*.coveragexml\n\n# NCrunch\n_NCrunch_*\n.*crunch*.local.xml\nnCrunchTemp_*\n\n# MightyMoose\n*.mm.*\nAutoTest.Net/\n\n# Web workbench (sass)\n.sass-cache/\n\n# Installshield output folder\n[Ee]xpress/\n\n# DocProject is a documentation generator add-in\nDocProject/buildhelp/\nDocProject/Help/*.HxT\nDocProject/Help/*.HxC\nDocProject/Help/*.hhc\nDocProject/Help/*.hhk\nDocProject/Help/*.hhp\nDocProject/Help/Html2\nDocProject/Help/html\n\n# Click-Once directory\npublish/\n\n# Publish Web Output\n*.[Pp]ublish.xml\n*.azurePubxml\n# Note: Comment the next line if you want to checkin your web deploy settings,\n# but database connection strings (with potential passwords) will be unencrypted\n*.pubxml\n*.publishproj\n\n# Microsoft Azure Web App publish settings. Comment the next line if you want to\n# checkin your Azure Web App publish settings, but sensitive information contained\n# in these scripts will be unencrypted\nPublishScripts/\n\n# NuGet Packages\n*.nupkg\n# NuGet Symbol Packages\n*.snupkg\n# The packages folder can be ignored because of Package Restore\n**/[Pp]ackages/*\n# except build/, which is used as an MSBuild target.\n!**/[Pp]ackages/build/\n# Uncomment if necessary however generally it will be regenerated when needed\n#!**/[Pp]ackages/repositories.config\n# NuGet v3's project.json files produces more ignorable files\n*.nuget.props\n*.nuget.targets\n\n# Microsoft Azure Build Output\ncsx/\n*.build.csdef\n\n# Microsoft Azure Emulator\necf/\nrcf/\n\n# Windows Store app package directories and files\nAppPackages/\nBundleArtifacts/\nPackage.StoreAssociation.xml\n_pkginfo.txt\n*.appx\n*.appxbundle\n*.appxupload\n\n# Visual Studio cache files\n# files ending in .cache can be ignored\n*.[Cc]ache\n# but keep track of directories ending in .cache\n!?*.[Cc]ache/\n\n# Others\nClientBin/\n~$*\n*~\n*.dbmdl\n*.dbproj.schemaview\n*.jfm\n*.pfx\n*.publishsettings\norleans.codegen.cs\n\n# Including strong name files can present a security risk\n# (https://github.com/github/gitignore/pull/2483#issue-259490424)\n#*.snk\n\n# Since there are multiple workflows, uncomment next line to ignore bower_components\n# (https://github.com/github/gitignore/pull/1529#issuecomment-104372622)\n#bower_components/\n\n# RIA/Silverlight projects\nGenerated_Code/\n\n# Backup & report files from converting an old project file\n# to a newer Visual Studio version. Backup files are not needed,\n# because we have git ;-)\n_UpgradeReport_Files/\nBackup*/\nUpgradeLog*.XML\nUpgradeLog*.htm\nServiceFabricBackup/\n*.rptproj.bak\n\n# SQL Server files\n*.mdf\n*.ldf\n*.ndf\n\n# Business Intelligence projects\n*.rdl.data\n*.bim.layout\n*.bim_*.settings\n*.rptproj.rsuser\n*- [Bb]ackup.rdl\n*- [Bb]ackup ([0-9]).rdl\n*- [Bb]ackup ([0-9][0-9]).rdl\n\n# Microsoft Fakes\nFakesAssemblies/\n\n# GhostDoc plugin setting file\n*.GhostDoc.xml\n\n# Node.js Tools for Visual Studio\n.ntvs_analysis.dat\nnode_modules/\n\n# Visual Studio 6 build log\n*.plg\n\n# Visual Studio 6 workspace options file\n*.opt\n\n# Visual Studio 6 auto-generated workspace file (contains which files were open etc.)\n*.vbw\n\n# Visual Studio LightSwitch build output\n**/*.HTMLClient/GeneratedArtifacts\n**/*.DesktopClient/GeneratedArtifacts\n**/*.DesktopClient/ModelManifest.xml\n**/*.Server/GeneratedArtifacts\n**/*.Server/ModelManifest.xml\n_Pvt_Extensions\n\n# Paket dependency manager\n.paket/paket.exe\npaket-files/\n\n# FAKE - F# Make\n.fake/\n\n# CodeRush personal settings\n.cr/personal\n\n# Python Tools for Visual Studio (PTVS)\n__pycache__/\n*.pyc\n\n# Cake - Uncomment if you are using it\n# tools/**\n# !tools/packages.config\n\n# Tabs Studio\n*.tss\n\n# Telerik's JustMock configuration file\n*.jmconfig\n\n# BizTalk build output\n*.btp.cs\n*.btm.cs\n*.odx.cs\n*.xsd.cs\n\n# OpenCover UI analysis results\nOpenCover/\n\n# Azure Stream Analytics local run output\nASALocalRun/\n\n# MSBuild Binary and Structured Log\n*.binlog\n\n# NVidia Nsight GPU debugger configuration file\n*.nvuser\n\n# MFractors (Xamarin productivity tool) working folder\n.mfractor/\n\n# Local History for Visual Studio\n.localhistory/\n\n# BeatPulse healthcheck temp database\nhealthchecksdb\n\n# Backup folder for Package Reference Convert tool in Visual Studio 2017\nMigrationBackup/\n\n# Ionide (cross platform F# VS Code tools) working folder\n.ionide/\n\n# Fody - auto-generated XML schema\nFodyWeavers.xsd\n\n# debug log\ndebug_*.json\n\n# dotnet run in `BBDown/` sub folder\n/BBDown/*.mp4\n/BBDown/*.xml\n/BBDown/*.ass\n"
        },
        {
          "name": "BBDown.Core",
          "type": "tree",
          "content": null
        },
        {
          "name": "BBDown.sln",
          "type": "blob",
          "size": 1.54296875,
          "content": "﻿\nMicrosoft Visual Studio Solution File, Format Version 12.00\n# Visual Studio Version 17\nVisualStudioVersion = 17.2.32210.308\nMinimumVisualStudioVersion = 10.0.40219.1\nProject(\"{9A19103F-16F7-4668-BE54-9A1E7A4F7556}\") = \"BBDown\", \"BBDown\\BBDown.csproj\", \"{0D491417-BFEA-481B-AE1A-3BE69172D818}\"\nEndProject\nProject(\"{9A19103F-16F7-4668-BE54-9A1E7A4F7556}\") = \"BBDown.Core\", \"BBDown.Core\\BBDown.Core.csproj\", \"{932F1279-4AD3-4226-97C6-B0997B1568AC}\"\nEndProject\nGlobal\n\tGlobalSection(SolutionConfigurationPlatforms) = preSolution\n\t\tDebug|Any CPU = Debug|Any CPU\n\t\tRelease|Any CPU = Release|Any CPU\n\tEndGlobalSection\n\tGlobalSection(ProjectConfigurationPlatforms) = postSolution\n\t\t{0D491417-BFEA-481B-AE1A-3BE69172D818}.Debug|Any CPU.ActiveCfg = Debug|Any CPU\n\t\t{0D491417-BFEA-481B-AE1A-3BE69172D818}.Debug|Any CPU.Build.0 = Debug|Any CPU\n\t\t{0D491417-BFEA-481B-AE1A-3BE69172D818}.Release|Any CPU.ActiveCfg = Release|Any CPU\n\t\t{0D491417-BFEA-481B-AE1A-3BE69172D818}.Release|Any CPU.Build.0 = Release|Any CPU\n\t\t{932F1279-4AD3-4226-97C6-B0997B1568AC}.Debug|Any CPU.ActiveCfg = Debug|Any CPU\n\t\t{932F1279-4AD3-4226-97C6-B0997B1568AC}.Debug|Any CPU.Build.0 = Debug|Any CPU\n\t\t{932F1279-4AD3-4226-97C6-B0997B1568AC}.Release|Any CPU.ActiveCfg = Release|Any CPU\n\t\t{932F1279-4AD3-4226-97C6-B0997B1568AC}.Release|Any CPU.Build.0 = Release|Any CPU\n\tEndGlobalSection\n\tGlobalSection(SolutionProperties) = preSolution\n\t\tHideSolutionNode = FALSE\n\tEndGlobalSection\n\tGlobalSection(ExtensibilityGlobals) = postSolution\n\t\tSolutionGuid = {17E08D9B-5969-4301-9674-ADB3EA8E5DF1}\n\tEndGlobalSection\nEndGlobal\n"
        },
        {
          "name": "BBDown",
          "type": "tree",
          "content": null
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0390625,
          "content": "MIT License\n\nCopyright (c) 2020 nilaoda\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 13.8603515625,
          "content": "[![img](https://img.shields.io/github/stars/nilaoda/BBDown?label=%E7%82%B9%E8%B5%9E)](https://github.com/nilaoda/BBDown)  [![img](https://img.shields.io/github/last-commit/nilaoda/BBDown?label=%E6%9C%80%E8%BF%91%E6%8F%90%E4%BA%A4)](https://github.com/nilaoda/BBDown)  [![img](https://img.shields.io/github/release/nilaoda/BBDown?label=%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC)](https://github.com/nilaoda/BBDown/releases)  [![img](https://img.shields.io/github/license/nilaoda/BBDown?label=%E8%AE%B8%E5%8F%AF%E8%AF%81)](https://github.com/nilaoda/BBDown)  [![Build Latest](https://github.com/nilaoda/BBDown/actions/workflows/build_latest.yml/badge.svg)](https://github.com/nilaoda/BBDown/actions/workflows/build_latest.yml)\n\n> 本项目仅供个人学习、研究和非商业性用途。用户在使用本工具时，需自行确保遵守相关法律法规，特别是与版权相关的法律条款。开发者不对因使用本工具而产生的任何版权纠纷或法律责任承担责任。请用户在使用时谨慎，确保其行为合法合规，并仅在有合法授权的情况下使用相关内容。\n\n# BBDown\n一个命令行式哔哩哔哩下载器. Bilibili Downloader.\n\n# 注意\n本软件混流时需要外部程序：\n\n* 普通视频：[ffmpeg](https://www.gyan.dev/ffmpeg/builds/) ，或 [mp4box](https://gpac.wp.imt.fr/downloads/)\n* 杜比视界：ffmpeg5.0以上或新版mp4box.\n\n# 快速开始\n本软件已经以 [Dotnet Tool](https://www.nuget.org/packages/BBDown/) 形式发布  \n\n如果你本地有dotnet环境，使用如下命令即可安装使用\n```\ndotnet tool install --global BBDown\n```\n\n如果需要更新bbdown，使用如下命令\n```\ndotnet tool update --global BBDown\n```\n\n# 下载\nRelease版本：https://github.com/nilaoda/BBDown/releases\n\n自动构建的测试版本：https://github.com/nilaoda/BBDown/actions\n\n# 开始使用\n目前命令行参数支持情况\n```\nDescription:\n  BBDown是一个免费且便捷高效的哔哩哔哩下载/解析软件.\n\nUsage:\n  BBDown <url> [command] [options]\n\nArguments:\n  <url>  视频地址 或 av|bv|BV|ep|ss\n\nOptions:\n  -tv, --use-tv-api                              使用TV端解析模式\n  -app, --use-app-api                            使用APP端解析模式\n  -intl, --use-intl-api                          使用国际版(东南亚视频)解析模式\n  --use-mp4box                                   使用MP4Box来混流\n  -e, --encoding-priority <encoding-priority>    视频编码的选择优先级, 用逗号分割 例: \"hevc,av1,avc\"\n  -q, --dfn-priority <dfn-priority>              画质优先级,用逗号分隔 例: \"8K 超高清, 1080P 高码率, HDR 真彩, 杜比视界\"\n  -info, --only-show-info                        仅解析而不进行下载\n  --show-all                                     展示所有分P标题\n  -aria2, --use-aria2c                           调用aria2c进行下载(你需要自行准备好二进制可执行文件)\n  -ia, --interactive                             交互式选择清晰度\n  -hs, --hide-streams                            不要显示所有可用音视频流\n  -mt, --multi-thread                            使用多线程下载(默认开启)\n  --video-only                                   仅下载视频\n  --audio-only                                   仅下载音频\n  --danmaku-only                                 仅下载弹幕\n  --sub-only                                     仅下载字幕\n  --cover-only                                   仅下载封面\n  --debug                                        输出调试日志\n  --skip-mux                                     跳过混流步骤\n  --skip-subtitle                                跳过字幕下载\n  --skip-cover                                   跳过封面下载\n  --force-http                                   下载音视频时强制使用HTTP协议替换HTTPS(默认开启)\n  -dd, --download-danmaku                        下载弹幕\n  --skip-ai                                      跳过AI字幕下载(默认开启)\n  --video-ascending                              视频升序(最小体积优先)\n  --audio-ascending                              音频升序(最小体积优先)\n  --allow-pcdn                                   不替换PCDN域名, 仅在正常情况与--upos-host均无法下载时使用\n  -F, --file-pattern <file-pattern>              使用内置变量自定义单P存储文件名:\n  \n                                                 <videoTitle>: 视频主标题\n                                                 <pageNumber>: 视频分P序号\n                                                 <pageNumberWithZero>: 视频分P序号(前缀补零)\n                                                 <pageTitle>: 视频分P标题\n                                                 <bvid>: 视频BV号\n                                                 <aid>: 视频aid\n                                                 <cid>: 视频cid\n                                                 <dfn>: 视频清晰度\n                                                 <res>: 视频分辨率\n                                                 <fps>: 视频帧率\n                                                 <videoCodecs>: 视频编码\n                                                 <videoBandwidth>: 视频码率\n                                                 <audioCodecs>: 音频编码\n                                                 <audioBandwidth>: 音频码率\n                                                 <ownerName>: 上传者名称\n                                                 <ownerMid>: 上传者mid\n                                                 <publishDate>: 收藏夹/番剧/合集发布时间\n                                                 <videoDate>: 视频发布时间(分p视频发布时间与<publishDate>相同)\n                                                 <apiType>: API类型(TV/APP/INTL/WEB)\n  \n                                                 默认为: <videoTitle>\n  -M, --multi-file-pattern <multi-file-pattern>  使用内置变量自定义多P存储文件名:\n  \n                                                 默认为: <videoTitle>/[P<pageNumberWithZero>]<pageTitle>\n  -p, --select-page <select-page>                选择指定分p或分p范围: (-p 8 或 -p 1,2 或 -p 3-5 或 -p ALL 或 -p LAST 或 -p 3,5,LATEST)\n  --language <language>                          设置混流的音频语言(代码), 如chi, jpn等\n  -ua, --user-agent <user-agent>                 指定user-agent, 否则使用随机user-agent\n  -c, --cookie <cookie>                          设置字符串cookie用以下载网页接口的会员内容\n  -token, --access-token <access-token>          设置access_token用以下载TV/APP接口的会员内容\n  --aria2c-args <aria2c-args>                    调用aria2c的附加参数(默认参数包含\"-x16 -s16 -j16 -k 5M\", 使用时注意字符串转义)\n  --work-dir <work-dir>                          设置程序的工作目录\n  --ffmpeg-path <ffmpeg-path>                    设置ffmpeg的路径\n  --mp4box-path <mp4box-path>                    设置mp4box的路径\n  --aria2c-path <aria2c-path>                    设置aria2c的路径\n  --upos-host <upos-host>                        自定义upos服务器\n  --force-replace-host                           强制替换下载服务器host(默认开启)\n  --save-archives-to-file                        将下载过的视频记录到本地文件中, 用于后续跳过下载同个视频\n  --delay-per-page <delay-per-page>              设置下载合集分P之间的下载间隔时间(单位: 秒, 默认无间隔)\n  --host <host>                                  指定BiliPlus host(使用BiliPlus需要access_token, 不需要cookie, 解析服务器能够获取你账号的大部分权限!)\n  --ep-host <ep-host>                            指定BiliPlus EP host(用于代理api.bilibili.com/pgc/view/web/season, 大部分解析服务器不支持代理该接口)\n  --area <area>                                  (hk|tw|th) 使用BiliPlus时必选, 指定BiliPlus area\n  --config-file <config-file>                    读取指定的BBDown本地配置文件(默认为: BBDown.config)\n  --version                                      Show version information\n  -?, -h, --help                                 Show help and usage information\n\n\nCommands:\n  login    通过APP扫描二维码以登录您的WEB账号\n  logintv  通过APP扫描二维码以登录您的TV账号\n  serve    以服务器模式运行\n```\n\n# 功能\n- [x] 番剧下载(Web|TV|App)\n- [x] 课程下载(Web)\n- [x] 普通内容下载(Web|TV|App)\n- [x] 合集/列表/收藏夹/个人空间解析\n- [x] 多分P自动下载\n- [x] 选择指定分P进行下载\n- [x] 选择指定清晰度进行下载\n- [x] 下载外挂字幕并转换为srt格式\n- [x] 自动合并音频+视频流+字幕流+**章节信息**`(使用ffmpeg或mp4box)`\n- [x] 单独下载视频/音频/字幕\n- [x] 二维码登录账号\n- [x] 多线程下载\n- [x] 支持调用aria2c下载\n- [x] 支持AVC/HEVC/AV1编码\n- [x] **支持8K/HDR/杜比视界/杜比全景声下载**\n- [x] 自定义存储文件名\n\n# TODO\n- [ ] 自动刷新cookie\n- [ ] 支持更多自定义选项\n\n# 使用教程\n\n<details>\n<summary>配置文件 (NEW)</summary> \n\n---\n\n在`1.4.9`或更高版本中，BBDown支持读取本地配置文件以简化命令行的手动输入。\n\n如果用户没有指定`--config-file`，则默认读取程序同目录下的`BBDown.config`文件；若用户指定，则读取特定文件。\n\n一个典型的配置文件:\n```config\n#本文件是BBDown程序的配置文件\n#以#开头的都会被程序忽略\n#然后剩余非空白内容程序逐行读取，对于一个选项，其参数应当在下一行出现\n\n#例如下面将设置输出文件名格式\n--file-pattern\n<videoTitle>[<dfn>]\n\n--multi-file-pattern\n<videoTitle>/[P<pageNumberWithZero>]<pageTitle>[<dfn>]\n\n#下面设置下载多个分P时，每个分P的下载间隔为2秒\n--delay-per-page\n2\n\n#开启弹幕下载功能\n--download-danmaku\n```\n\n</details>\n\n<details>\n<summary>自定义输出文件名格式 (NEW)</summary> \n\n---\n\n在`1.4.9`或更高版本中，BBDown支持用户自定义合并时的文件名组成。\n|  代码   | 含义  |\n|  ----  | ----  |\n`<videoTitle>`|视频主标题\n`<pageNumber>`|视频分P序号\n`<pageNumberWithZero>`|视频分P序号(前缀补零)\n`<pageTitle>`|视频分P标题\n`<bvid>`|视频BV号\n`<aid>`|视频aid\n`<cid>`|视频cid\n`<dfn>`|视频清晰度\n`<res>`|视频分辨率\n`<fps>`|视频帧率\n`<videoCodecs>`|视频编码\n`<videoBandwidth>`|视频码率\n`<audioCodecs>`|音频编码\n`<audioBandwidth>`|音频码率\n`<ownerName>`|上传者名称(下载番剧时，该值为\"\")\n`<ownerMid>`|上传者mid(下载番剧时，该值为\"\")\n`<publishDate>`|发布时间(yyyy-MM-dd_HH-mm-ss)\n`<apiType>`|API类型（TV/APP/INTL/WEB）\n\n</details>\n\n<details>\n<summary>WEB/TV鉴权</summary>  \n\n---\n  \n扫码登录网页账号：\n```\nBBDown login\n```\n然后按照提示操作\n\n扫码登录云视听小电视账号：\n```\nBBDown logintv\n```\n然后按照提示操作\n \n*PS: 如果登录报错`The type initializer for 'Gdip' threw an exception`，请参考 [#37](https://github.com/nilaoda/BBDown/issues/37) 解决*\n\n手动加载网页cookie：\n```\nBBDown -c \"SESSDATA=******\" \"https://www.bilibili.com/video/BV1qt4y1X7TW\"\n```\n手动加载云视听小电视token：\n```\nBBDown -tv -token \"******\" \"https://www.bilibili.com/video/BV1qt4y1X7TW\"\n```\n\n</details>\n\n<details>\n<summary>APP鉴权</summary>  \n\n---\n\n> 根据 [#123](https://github.com/nilaoda/BBDown/issues/123#issuecomment-877583825) ，可以填写TV登录产生的`access_token`来给APP接口使用。可复制`BBDownTV.data`到`BBDownApp.data`使程序自动读取.\n\n目前程序无法自动获取鉴权信息，推荐通过**抓包**来获取.\n\n在请求Header中寻找键为`authorization`的项，其值形为`identify_v1 5227************1`，其中的`5227************1`就是token(access_key)\n\n获取后手动通过`-token`命令加载, 或写入`BBDownApp.data`使程序自动读取.\n  \n```\nBBDown -app -token \"******\" \"https://www.bilibili.com/video/BV1qt4y1X7TW\"\n```\n\n</details>\n\n<details>\n<summary>常用命令</summary>  \n\n---\n\n下载普通视频：\n```\nBBDown \"https://www.bilibili.com/video/BV1qt4y1X7TW\"\n```\n使用TV接口下载(粉丝量大的UP主基本上是无水印片源)：\n```\nBBDown -tv \"https://www.bilibili.com/video/BV1qt4y1X7TW\"\n```\n当分P过多时，默认会隐藏展示全部的分P信息，你可以使用如下命令来显示所有每一个分P。\n```\nBBDown --show-all \"https://www.bilibili.com/video/BV1At41167aj\"\n```\n选择下载某些分P的三种情况：\n* 单个分P：10\n```\nBBDown \"https://www.bilibili.com/video/BV1At41167aj?p=10\"\nBBDown -p 10 \"https://www.bilibili.com/video/BV1At41167aj\"\n```\n* 多个分P：1,2,10\n```\nBBDown -p 1,2,10 \"https://www.bilibili.com/video/BV1At41167aj\"\n```\n* 范围分P：1-10\n```\nBBDown -p 1-10 \"https://www.bilibili.com/video/BV1At41167aj\"\n```\n下载番剧全集：\n```\nBBDown -p ALL \"https://www.bilibili.com/bangumi/play/ss33073\"\n```\n\n</details>\n\n<details>\n<summary>API服务器</summary>\n\n启动服务器（自定义监听地址和端口）：\n\n```shell\nBBDown server -l http://0.0.0.0:12450\n```\n\nAPI服务器不支持HTTPS配置，如果有需要请自行使用nginx等反向代理进行配置\n\nAPI详细请参考[json-api-doc.md](./json-api-doc.md)\n</details>\n\n# 演示\n![1](https://user-images.githubusercontent.com/20772925/88686407-a2001480-d129-11ea-8aac-97a0c71af115.gif)\n\n下载完毕后在当前目录查看MP4文件：\n\n![2](https://user-images.githubusercontent.com/20772925/88478901-5e1cdc00-cf7e-11ea-97c1-154b9226564e.png)\n\n# 致谢\n\n* https://github.com/codebude/QRCoder\n* https://github.com/icsharpcode/SharpZipLib\n* https://github.com/protocolbuffers/protobuf\n* https://github.com/grpc/grpc\n* https://github.com/dotnet/command-line-api\n* https://github.com/SocialSisterYi/bilibili-API-collect\n* https://github.com/SeeFlowerX/bilibili-grpc-api\n* https://github.com/FFmpeg/FFmpeg\n* https://github.com/gpac/gpac\n* https://github.com/aria2/aria2\n"
        },
        {
          "name": "json-api-doc.md",
          "type": "blob",
          "size": 5.208984375,
          "content": "# JSON API文档\n\n## API\n\n如果以服务器模式启动BBDown，BBDown会在本地启动一个http server，该服务器有以下API：\n\n### 获取任务列表\n**Endpoint:** `/get-tasks/`\n\n**Method:** GET\n\n**Description:** 获取所有任务的列表，包括正在运行的任务和已完成的任务。\n\n**Response:** JSON格式的`DownloadTaskCollection`。\n\n### 获取正在运行的任务列表\n**Endpoint:** `/get-tasks/running`\n\n**Method:** GET\n\n**Description:** 获取所有正在运行的任务的列表。\n\n**Response:** JSON格式的`List<DownloadTask>`, 正在运行的任务列表。\n\n### 获取已完成的任务列表\n**Endpoint:** `/get-tasks/finished`\n\n**Method:** GET\n\n**Description:** 获取所有已完成的任务的列表。\n\n**Response:**  JSON格式的`List<DownloadTask>`, 已完成的任务列表。\n\n### 获取特定任务\n**Endpoint:** `/get-tasks/{id}`\n\n**Method:** GET\n\n**Description:** 获取特定任务的详细信息，根据视频的AID。\n\n**Parameters:**\n- `{id}` (路径参数): 视频的AID\n\n**Response:** 如果找到匹配的任务，将返回JSON格式的`DownloadTask`。如果未找到匹配的任务，将返回404 Not Found。\n\n### 添加任务\n**Endpoint:** `/add-task`\n\n**Method:** POST\n\n**Description:** 向任务列表中添加新任务。\n\n**Request Body:** JSON格式的任务信息，需要符合`MyOption`数据结构。并不要求带有MyOption中的每一个字段，只需要有`Url`字段就够了。\n\n**Response:**\n- 如果请求有效并成功添加任务，将返回200 OK。\n- 如果请求无效，将返回400 Bad Request，并附带错误消息`\"输入有误\"`。\n\n### 移除已完成的任务\n**Endpoint:** `/remove-finished`\n\n**Method:** GET\n\n**Description:** 移除所有已完成的任务\n\n**Response:**\n- 返回200 OK。\n\n### 移除已完成的任务\n**Endpoint:** `/remove-finished/failed`\n\n**Method:** GET\n\n**Description:** 移除所有已完成但是失败(`IsSuccessful == false`)的任务\n\n**Response:**\n- 返回200 OK。\n\n### 移除特定已完成的任务\n**Endpoint:** `/remove-finished/{id}`\n\n**Method:** GET\n\n**Description:** 移除特定已完成的任务，根据视频的AID。\n\n**Parameters:**\n- `{id}` (路径参数): 视频的AID\n\n**Response:**\n- 无论是否能找到对应ID的任务，均返回200 OK。\n\n## 数据结构\n\n### `DownloadTask` 数据结构\n`DownloadTask` 数据结构表示一个下载任务的信息。\n\n**属性：**\n- `Aid` `<string>`: 视频解析出的Aid，用作正在下载中的任务的唯一标识符，已完成任务中允许重复存在\n- `Url` `<string>`: 下载任务请求时的URL，不一定需要完整的URL，命令行支持的`av|bv|BV|ep|ss`都可以在这里使用。\n- `TaskCreateTime` `<long>`: 任务创建时间，Unix时间戳，精确到秒，本机时区。\n- `Title` `<string?>`: 视频的标题。\n- `Pic` `<string?>`: 视频的封面图片链接。\n- `VideoPubTime` `<long?>`: 视频发布时间，Unix时间戳，精确到秒。\n- `TaskFinishTime` `<long?>`: 任务完成时间，Unix时间戳，精确到秒，本机时区。\n- `Progress` `<double>`: 任务的下载进度，为0-1区间范围的小数。\n- `DownloadSpeed` `<double>`: 下载速度, 单位为Byte/s。下载中时为最后一次更新的实时速度，下载完成后为平均速度。\n- `TotalDownloadedBytes` `<double>`: 总下载字节(Byte)数，完成后的数字比实际文件偏小。\n- `IsSuccessful` `<bool>`: 标识任务是否成功完成。\n\n### `DownloadTaskCollection` 数据结构\n`DownloadTaskCollection` 数据结构包含两个列表，分别表示正在运行的任务和已完成的任务。\n\n**属性：**\n- `Running` `<List<DownloadTask>>`: 包含正在运行的任务的列表，每个元素都是 `DownloadTask` 数据结构。\n- `Finished` `<List<DownloadTask>>`: 包含已完成的任务的列表，每个元素都是 `DownloadTask` 数据结构。\n\n### `MyOption` 数据结构\n\n参考[BBDown/MyOption.cs](./BBDown/MyOption.cs)。属性和命令行参数几乎是一一对应的，相应的值填写使用命令行会使用的值即可。这个结构会随着版本变化，请参考对应版本时候的文件。\n\n### 注意事项\n- 由于BBDown的下载进度回报频率所限，`TotalDownloadedBytes`会比实际下载的文件略低，大概会少等效于1秒下载速度的文件体积，如果文件本身就非常小那这个数字偏差会较大。\n- BBDown目前内部机制没有太好的方法取消单个下载任务，因此目前任务提交以后只能等任务失败或者完成。\n- 目前服务器没有对同时执行的下载任务数量做任何限制，如果短时间频繁添加任务就会同时执行相当数量的下载任务，需要小心注意不要耗尽资源。未来考虑添加下载队列。\n\n### 使用例\n\n#### 用BV号添加任务\n\n```shell\ncurl -X POST -H 'Content-Type: application/json' -d '{ \"Url\": \"BV1qt4y1X7TW\" }' http://localhost:58682/add-task\n```\n\n#### 下载到指定目录\n\nWindows:\n```shell\ncurl -X POST -H 'Content-Type: application/json' -d { \"Url\": \"BV1qt4y1X7TW\", \"FilePattern\": \"C:\\\\Downloads\\\\<videoTitle>[<dfn>]\" }' http://localhost:58682/add-task\n```\n\nUnix-Like:\n```shell\ncurl -X POST -H 'Content-Type: application/json' -d { \"Url\": \"BV1qt4y1X7TW\", \"FilePattern\": \"/Downloads/<videoTitle>[<dfn>]\" }' http://localhost:58682/add-task\n```\n"
        }
      ]
    }
  ]
}