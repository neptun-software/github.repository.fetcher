{
  "metadata": {
    "timestamp": 1736709797645,
    "page": 250,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjI1MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "ohler55/oj",
      "stars": 3159,
      "defaultBranch": "develop",
      "files": [
        {
          "name": ".clang-format",
          "type": "blob",
          "size": 4.423828125,
          "content": "---\nLanguage:        Cpp\n# BasedOnStyle:  Google\nAccessModifierOffset: -1\nAlignAfterOpenBracket: Align\nAlignConsecutiveMacros: false\nAlignConsecutiveAssignments: true\nAlignConsecutiveDeclarations: true\nAlignEscapedNewlines: Left\nAlignOperands:   true\nAlignTrailingComments: true\nAllowAllArgumentsOnNextLine: false\nAllowAllConstructorInitializersOnNextLine: false\nAllowAllParametersOfDeclarationOnNextLine: false\nAllowShortBlocksOnASingleLine: Never\nAllowShortCaseLabelsOnASingleLine: true\nAllowShortFunctionsOnASingleLine: InlineOnly\nAllowShortLambdasOnASingleLine: Empty\nAllowShortIfStatementsOnASingleLine: Never\nAllowShortLoopsOnASingleLine: false\nAlwaysBreakAfterDefinitionReturnType: None\nAlwaysBreakAfterReturnType: None\nAlwaysBreakBeforeMultilineStrings: false\nAlwaysBreakTemplateDeclarations: Yes\nBinPackArguments: false\nBinPackParameters: false\nBraceWrapping:\n  AfterCaseLabel:  false\n  AfterClass:      false\n  AfterControlStatement: false\n  AfterEnum:       false\n  AfterFunction:   false\n  AfterNamespace:  false\n  AfterObjCDeclaration: false\n  AfterStruct:     false\n  AfterUnion:      false\n  AfterExternBlock: false\n  BeforeCatch:     false\n  BeforeElse:      false\n  IndentBraces:    false\n  SplitEmptyFunction: true\n  SplitEmptyRecord: true\n  SplitEmptyNamespace: true\nBreakBeforeBinaryOperators: None\nBreakBeforeBraces: Attach\nBreakBeforeInheritanceComma: false\nBreakInheritanceList: BeforeColon\nBreakBeforeTernaryOperators: true\nBreakConstructorInitializersBeforeComma: false\nBreakConstructorInitializers: BeforeColon\nBreakAfterJavaFieldAnnotations: false\nBreakStringLiterals: true\nColumnLimit:     120\nCommentPragmas:  '^ IWYU pragma:'\nCompactNamespaces: false\nConstructorInitializerAllOnOneLineOrOnePerLine: true\nConstructorInitializerIndentWidth: 4\nContinuationIndentWidth: 4\nCpp11BracedListStyle: true\nDeriveLineEnding: true\nDerivePointerAlignment: true\nDisableFormat:   false\nExperimentalAutoDetectBinPacking: false\nFixNamespaceComments: true\nForEachMacros:\n  - foreach\n  - Q_FOREACH\n  - BOOST_FOREACH\nIncludeBlocks:   Regroup\nIncludeCategories:\n  - Regex:           '^<ext/.*\\.h>'\n    Priority:        2\n    SortPriority:    0\n  - Regex:           '^<.*\\.h>'\n    Priority:        1\n    SortPriority:    0\n  - Regex:           '^<.*'\n    Priority:        2\n    SortPriority:    0\n  - Regex:           '.*'\n    Priority:        3\n    SortPriority:    0\nIncludeIsMainRegex: '([-_](test|unittest))?$'\nIncludeIsMainSourceRegex: ''\nIndentCaseLabels: false\nIndentGotoLabels: true\nIndentPPDirectives: None\nIndentWidth:     4\nIndentWrappedFunctionNames: false\nJavaScriptQuotes: Leave\nJavaScriptWrapImports: true\nKeepEmptyLinesAtTheStartOfBlocks: false\nMacroBlockBegin: ''\nMacroBlockEnd:   ''\nMaxEmptyLinesToKeep: 1\nNamespaceIndentation: None\nObjCBinPackProtocolList: Never\nObjCBlockIndentWidth: 4\nObjCSpaceAfterProperty: false\nObjCSpaceBeforeProtocolList: true\nPenaltyBreakAssignment: 2000\nPenaltyBreakBeforeFirstCallParameter: 1\nPenaltyBreakComment: 100\nPenaltyBreakFirstLessLess: 120\nPenaltyBreakString: 1000\nPenaltyBreakTemplateDeclaration: 10\nPenaltyExcessCharacter: 100\nPenaltyReturnTypeOnItsOwnLine: 1\nPointerAlignment: Right\nRawStringFormats:\n  - Language:        Cpp\n    Delimiters:\n      - cc\n      - CC\n      - cpp\n      - Cpp\n      - CPP\n      - 'c++'\n      - 'C++'\n    CanonicalDelimiter: ''\n    BasedOnStyle:    google\n  - Language:        TextProto\n    Delimiters:\n      - pb\n      - PB\n      - proto\n      - PROTO\n    EnclosingFunctions:\n      - EqualsProto\n      - EquivToProto\n      - PARSE_PARTIAL_TEXT_PROTO\n      - PARSE_TEST_PROTO\n      - PARSE_TEXT_PROTO\n      - ParseTextOrDie\n      - ParseTextProtoOrDie\n    CanonicalDelimiter: ''\n    BasedOnStyle:    google\nReflowComments:  false\nSortIncludes:    true\nSortUsingDeclarations: true\nSpaceAfterCStyleCast: false\nSpaceAfterLogicalNot: false\nSpaceAfterTemplateKeyword: true\nSpaceBeforeAssignmentOperators: true\nSpaceBeforeCpp11BracedList: false\nSpaceBeforeCtorInitializerColon: true\nSpaceBeforeInheritanceColon: true\nSpaceBeforeParens: ControlStatements\nSpaceBeforeRangeBasedForLoopColon: true\nSpaceInEmptyBlock: false\nSpaceInEmptyParentheses: false\nSpacesBeforeTrailingComments: 2\nSpacesInAngles:  false\nSpacesInConditionalStatement: false\nSpacesInContainerLiterals: true\nSpacesInCStyleCastParentheses: false\nSpacesInParentheses: false\nSpacesInSquareBrackets: false\nSpaceBeforeSquareBrackets: false\nStandard:        Auto\nStatementMacros:\n  - Q_UNUSED\n  - QT_REQUIRE_VERSION\nTabWidth:        8\nUseCRLF:         false\nUseTab:          Never\n...\n"
        },
        {
          "name": ".editorconfig",
          "type": "blob",
          "size": 0.2763671875,
          "content": "# EditorConfig is awesome: http://EditorConfig.org\n\n# top-most EditorConfig file\nroot = true\n\n# Unix-style newlines with a newline ending every file\n[*]\nend_of_line = lf\ninsert_final_newline = true\ncharset = utf-8\nindent_style = space\nindent_size = 2\ntrim_trailing_whitespace = true\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.1484375,
          "content": "oj-*.gem\n.DS_Store\n\\#*\\#\n.\\#*\n*~\n*.o\nMakefile\n*.bundle\n.rbenv-version\n.ruby-version\n*.rbc\n.rbx\ndoc\n.yardoc\nGemfile.lock\n*.so\nvendor\ngemfiles/*.lock\ntmp\n"
        },
        {
          "name": ".rubocop.yml",
          "type": "blob",
          "size": 7.1611328125,
          "content": "\nrequire:\n  - rubocop-minitest\n\nAllCops:\n  TargetRubyVersion: 2.7\n  NewCops: enable\n  Exclude:\n    - 'vendor/**/*'\n    - 'test/json_gem/**/*'\n    - 'test/activerecord/**/*'\n    - 'test/activesupport6/**/*'\n    - 'test/activesupport7/**/*'\n\n# This rule suggests a change that will cause CI tests to fail.\nGemspec/DevelopmentDependencies:\n  Enabled: false\n\nStyle/QuotedSymbols:\n  EnforcedStyle: double_quotes\n\nStyle/SymbolArray:\n  EnforcedStyle: brackets\n\nStyle/FormatStringToken:\n  EnforcedStyle: unannotated\n\nStyle/FrozenStringLiteralComment:\n  EnforcedStyle: always\n\nLayout/EmptyLinesAroundClassBody:\n  Enabled: false\n\nStyle/MethodCallWithoutArgsParentheses:\n  Enabled: false\n\nStyle/PercentLiteralDelimiters:\n  Enabled: false\n\nLayout/SpaceInsideHashLiteralBraces:\n  Enabled: false\n  EnforcedStyle: compact\n  EnforcedStyleForEmptyBraces: no_space\n\nLayout/SpaceInsideArrayLiteralBrackets:\n  Enabled: false\n  EnforcedStyle: compact\n  EnforcedStyleForEmptyBrackets: no_space\n\nStyle/YodaCondition:\n  Enabled: false\n\nStyle/FormatString:\n  Enabled: false\n\nStyle/NumericPredicate:\n  Enabled: false\n\nStyle/HashSyntax:\n  Enabled: false\n\nStyle/TernaryParentheses:\n  Enabled: false\n\nLayout/ExtraSpacing:\n  AllowForAlignment: true,\n  AllowBeforeTrailingComments: true\n  ForceEqualSignAlignment: false\n\nStyle/Semicolon:\n  AllowAsExpressionSeparator: true\n\nStyle/SafeNavigation:\n  Enabled: false\n\nLayout/LineLength:\n  Max: 160\n  Exclude:\n    - 'test/_test_active.rb'\n    - 'test/test_gc.rb'\n\nStyle/WordArray:\n  Enabled: false\n\nStyle/TrailingCommaInHashLiteral:\n  Enabled: false\n\nStyle/TrailingCommaInArrayLiteral:\n  Enabled: false\n\nStyle/SymbolProc:\n  Enabled: false\n\nStyle/StructInheritance:\n  Enabled: false\n\nLayout/EmptyLineBetweenDefs:\n  EmptyLineBetweenMethodDefs: true\n  EmptyLineBetweenClassDefs: true\n  EmptyLineBetweenModuleDefs: true\n  AllowAdjacentOneLineDefs: true\n  NumberOfEmptyLines: 1\n\nLayout/EmptyLinesAroundModuleBody:\n  EnforcedStyle: no_empty_lines\n\n# Could not get the indentation the way I like it so disable.\nLayout/FirstHashElementIndentation:\n  Enabled: false\n  EnforcedStyle: consistent\n  IndentationWidth: 2\n\nLayout/MultilineHashBraceLayout:\n  # test are easier to read with a mix\n  Enabled: false\n\nLayout/SpaceAroundEqualsInParameterDefault:\n  EnforcedStyle: no_space\n\nLayout/SpaceAroundOperators:\n  Enabled: false\n\nLayout/SpaceBeforeBlockBraces:\n  EnforcedStyle: space\n\nLayout/TrailingEmptyLines:\n  EnforcedStyle: final_newline\n\nLint/EmptyBlock:\n  Enabled: false\n\n# Rescue of an Exception during a test allows all Exceptions to be\n# rescued and not just StandardError.\nLint/RescueException:\n  Enabled: false\n\nMetrics/AbcSize:\n  Max: 200\n\nMetrics/ClassLength:\n  Enabled: false\n\nMetrics/MethodLength:\n  Enabled: false\n\n# Configuration parameters:\nLint/UnusedMethodArgument:\n  AllowUnusedKeywordArguments: false\n  IgnoreEmptyMethods: true\n  IgnoreNotImplementedMethods: true\n\nLint/UselessAssignment:\n  Enabled: true\n\nLint/UselessMethodDefinition:\n  Enabled: true\n\nMetrics/CyclomaticComplexity:\n  Max: 20\n\nMetrics/PerceivedComplexity:\n  Max: 20\n\nMetrics/ModuleLength:\n  Enabled: false\n\n# Offense count: 14\n# This cop supports safe autocorrection (--autocorrect).\nMinitest/AssertEmptyLiteral:\n  Enabled: true\n\nMinitest/AssertEqual:\n  Enabled: true\n\nMinitest/AssertInDelta:\n  Enabled: true\n\nMinitest/AssertIncludes:\n  Enabled: true\n\nMinitest/AssertNil:\n  Enabled: true\n\nMinitest/AssertPredicate:\n  Enabled: true\n\nMinitest/AssertRespondTo:\n  Enabled: true\n\nMinitest/AssertTruthy:\n  Enabled: true\n\nMinitest/AssertWithExpectedArgument:\n  Enabled: true\n\nMinitest/EmptyLineBeforeAssertionMethods:\n  Enabled: false\n\nMinitest/LiteralAsActualArgument:\n  Enabled: true\n\nMinitest/MultipleAssertions:\n  Enabled: false\n\nMinitest/RefuteFalse:\n  Enabled: true\n\nMinitest/TestFileName:\n  Enabled: false\n\nMinitest/UnspecifiedException:\n  Enabled: false\n\nMinitest/UselessAssertion:\n  Enabled: false\n\nNaming/BinaryOperatorParameterName:\n  Enabled: false\n\nNaming/ConstantName:\n  Enabled: true\n\nNaming/HeredocDelimiterNaming:\n  Enabled: true\n\nNaming/MethodName:\n  EnforcedStyle: snake_case\n\nNaming/MethodParameterName:\n  Enabled: false\n\nNaming/PredicateName:\n  Enabled: true\n\nNaming/VariableNumber:\n  Enabled: false\n\nSecurity/Eval:\n  Enabled: true\n\nSecurity/JSONLoad:\n  Enabled: true\n\nSecurity/MarshalLoad:\n  Enabled: false\n\nStyle/AccessorGrouping:\n  Enabled: false\n\nStyle/Alias:\n  EnforcedStyle: prefer_alias\n\nStyle/AndOr:\n  EnforcedStyle: always\n\nStyle/BarePercentLiterals:\n  EnforcedStyle: bare_percent\n\nStyle/BlockComments:\n  Enabled: false\n\nStyle/BlockDelimiters:\n  Enabled: false\n\nStyle/CaseEquality:\n  Enabled: true\n\nStyle/CharacterLiteral:\n  Enabled: true\n\nStyle/ClassVars:\n  Enabled: true\n\nStyle/CommandLiteral:\n  EnforcedStyle: backticks\n\nStyle/CommentedKeyword:\n  Enabled: false\n\nStyle/ConditionalAssignment:\n  EnforcedStyle: assign_to_condition\n\nStyle/DefWithParentheses:\n  Enabled: false\n\nStyle/Dir:\n  Enabled: true\n\nStyle/Documentation:\n  Enabled: true\n\nStyle/DoubleNegation:\n  Enabled: true\n\nStyle/EachForSimpleLoop:\n  Enabled: true\n\nStyle/EachWithObject:\n  Enabled: true\n\nStyle/EmptyCaseCondition:\n  Enabled: true\n\nStyle/EmptyMethod:\n  EnforcedStyle: expanded\n\nStyle/Encoding:\n  Enabled: true\n\nStyle/ExponentialNotation:\n  Enabled: false\n\nStyle/FileWrite:\n  Enabled: true\n\nStyle/For:\n  EnforcedStyle: each\n\nStyle/GlobalStdStream:\n  Enabled: true\n\nStyle/GlobalVars:\n  Enabled: false\n\nStyle/GuardClause:\n  Enabled: false\n\nStyle/HashEachMethods:\n  Enabled: true\n\nStyle/IfUnlessModifier:\n  Enabled: false\n\nStyle/IfUnlessModifierOfIfUnless:\n  Enabled: true\n\nStyle/InverseMethods:\n  InverseMethods: true\n  InverseBlocks: true\n\nStyle/LineEndConcatenation:\n  Enabled: true\n\nStyle/MissingRespondToMissing:\n  Enabled: true\n\nStyle/MultilineIfModifier:\n  Enabled: true\n\nStyle/MultipleComparison:\n  Enabled: false\n\nStyle/MutableConstant:\n  EnforcedStyle: strict\n\nStyle/NegatedIfElseCondition:\n  Enabled: true\n\nStyle/NestedModifier:\n  Enabled: true\n\nStyle/NumericLiterals:\n  MinDigits: 5\n\nStyle/OpenStructUse:\n  Enabled: false\n\nStyle/OptionalBooleanParameter:\n  Enabled: false\n\nStyle/ParenthesesAroundCondition:\n  AllowSafeAssignment: true\n  AllowInMultilineConditions: true\n\nStyle/PreferredHashMethods:\n  EnforcedStyle: short\n\nStyle/Proc:\n  Enabled: true\n\nStyle/RaiseArgs:\n  EnforcedStyle: compact\n\nStyle/RedundantArgument:\n  Enabled: false\n\nStyle/RedundantBegin:\n  Enabled: true\n\nStyle/RedundantConstantBase:\n  Enabled: true\n\nStyle/RedundantHeredocDelimiterQuotes:\n  Enabled: true\n\nStyle/RedundantInitialize:\n  Enabled: true\n\nStyle/RedundantInterpolation:\n  Enabled: true\n\nStyle/RedundantParentheses:\n  Enabled: true\n\nStyle/RedundantPercentQ:\n  Enabled: true\n\nStyle/RedundantRegexpEscape:\n  Enabled: true\n\nStyle/RedundantReturn:\n  Enabled: true\n\nStyle/RedundantSelf:\n  Enabled: true\n\nStyle/RedundantSortBy:\n  Enabled: true\n\nStyle/RedundantStringEscape:\n  Enabled: true\n\nStyle/RescueStandardError:\n  Enabled: false\n\nStyle/SingleLineMethods:\n  Enabled: true\n\nStyle/SoleNestedConditional:\n  Enabled: true\n\nStyle/SpecialGlobalVars:\n  Enabled: true\n\nStyle/StringConcatenation:\n  Enabled: false\n\n# Offense count: 678\n# This cop supports safe autocorrection (--autocorrect).\n# Configuration parameters: EnforcedStyle, ConsistentQuotesInMultiline.\n# SupportedStyles: single_quotes, double_quotes\nStyle/StringLiterals:\n  EnforcedStyle: single_quotes\n"
        },
        {
          "name": ".yardopts",
          "type": "blob",
          "size": 0.2568359375,
          "content": "--title \"Oj API Documentation\"\n--readme README.md\n--charset utf-8\n-\npages/Advanced.md\npages/Compatibility.md\npages/Custom.md\npages/Encoding.md\npages/JsonGem.md\npages/Modes.md\npages/Options.md\npages/Rails.md\npages/Security.md\nCHANGELOG.md\nLICENSE\nRELEASE_NOTES.md\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 46.078125,
          "content": "# CHANGELOG\n\n## 3.16.9 - 2024-12-28\n\n- Fixed `Oj::Parser` create_id size issue #931.\n\n- Changed parser to be more optimized (PR from @Watson1978)\n\n## 3.16.8 - 2024-12-14\n\n- Fixed StreamWriter to write to non-file IO thanks to @jscheid.\n\n## 3.16.7 - 2024-11-01\n\n- Changed string_writer_as_json to allow multiple arguments.\n\n- Fixed Global variable registration added to mimic_json and rails code thanks to @byroot.\n\n## 3.16.6 - 2024-09-09\n\n- Fixed issue with Rails 7.2 that changed the order of calls to to_json and as_json.\n\n## 3.16.5 - 2024-08-07\n\n- Fixed Oj::Parser so that block procedures work correctly.\n\n## 3.16.4 - 2024-06-08\n\n- Fixed Oj::Parse EOF issue on larger stream input.\n\n## 3.16.3 - 2023-12-11\n\n- Fixed the gemspec to allow earlier versions of the bigdecimal gem.\n\n## 3.16.2 - 2023-12-06\n\n- Fixed documentation formatting.\n\n- Added option to the \"usual\" parser to raise an error on an empty input string.\n\n## 3.16.1 - 2023-09-01\n\n- Fixed exception type on number parsing. (thank you @jasonpenny)\n\n## 3.16.0 - 2023-08-16\n\n- Added the `float_format` option.\n\n- Expanded the `max_nesting` option to allow integer values as well as\n  the previous boolean (true or nil).\n\n- Skip nesting tests with Truffle Ruby in the json gem tests.\n\n## 3.15.1 - 2023-07-30\n\n- Add protection against some using `require 'oj/json`, an internal file.\n\n- Fixed non-json errors when in compat mode.\n\n## 3.15.0 - 2023-06-02\n\n- Added `omit_null_byte` option when dumping.\n\n## 3.14.3 - 2023-04-07\n\n- Fixed compat parse with optimized Hash when parsing a JSON::GenericObject.\n\n## 3.14.2 - 2023-02-10\n\n- Fixed check for \\0 in strings.\n\n## 3.14.1 - 2023-02-01\n\n- Fixed issue with uninitialized handler for Oj::Parser::Saj.\n\n- Fixed hang on unterminated string with a \\0 byte in parse.c.\n\n## 3.14.0 - 2023-01-30\n\n- Tracing is now a compile time option giving a 15 to 20% performance boost.\n\n- Some cleanup in the fast parser.\n\n## 3.13.23 - 2022-11-06\n\n- Fixed issue with Oj::Parser extension regarding GC timeing.\n\n## 3.13.22 - 2022-11-01\n\n- Reorganized Oj::Parser code to allow for parser extensions in C.\n\n## 3.13.21 - 2022-08-19\n\n- Bug parsing big numbers fixed in the SAJ parser.\n\n## 3.13.20 - 2022-08-07\n\n- SSE4 made optional with a `--with-sse42` flag to the compile.\n\n## 3.13.19 - 2022-07-29\n\n- TruffleRuby issues resolved.\n\n## 3.13.18 - 2022-07-25\n\n- Fixed SSE detection at run time.\n\n## 3.13.17 - 2022-07-15\n\n- Fixed Oj::Parser to detect unterminated arrays and objects.\n\n## 3.13.16 - 2022-07-06\n\n- Added line and column as optional arguments to the Oj::Parser.saj parser.\n\n## 3.13.15 - 2022-07-03\n\n- Fixed issue dumping NaN  value in object mode.\n\n## 3.13.14 - 2022-06-03\n\n- Double fclose() due to bad merger fixed by tonobo.\n\n## 3.13.13 - 2022-05-20\n\n- Fixed flooding stdout with debug output when dumping.\n\n## 3.13.12 - 2022-05-20\n\n- Fixed crash on no arguments to pretty_generate. Now raises an exception.\n- Register all classes and globals.\n- Fixed memory issue with dumping.\n\n## 3.13.11 - 2022-01-05\n\n- Fixed write blocking failures on writes to a slow stream with larger writes.\n\n## 3.13.10 - 2021-12-12\n\n- Fixed Oj::Doc re-entrant issue with each_child.\n- Fixed each_child on empty Oj::Doc.\n\n## 3.13.9 - 2021-10-06\n\n- Fix mimic JSON load so that it honors the `:symbolize_names` option.\n\n## 3.13.8 - 2021-09-27\n\n- Fix `Oj::Doc` behaviour for inexisting path.\n  ```ruby\n  Oj::Doc.open('{\"foo\":1}') do |doc|\n    doc.fetch('/foo/bar') # used to give `1`, now gives `nil`\n    doc.exists?('/foo/bar') # used to give `true`, now gives `false`\n  end\n  ```\n\n- Fix `Oj::Parser` handling of BigDecimal. `snprint()` does not handle `%Lg` correctly but `sprintf()` does.\n\n## 3.13.7 - 2021-09-16\n\n- The JSON gem allows invalid unicode so Oj, when mimicing JSON now\n  allows it as well. Use `:allow_invalid_unicode` to change that.\n\n## 3.13.6 - 2021-09-11\n\n- Fixed unicode UTF 8 parsing in string values.\n\n- Fixed hash key allocation issue.\n\n- The `Oj::Parser.new()` function now allows optional arguments that\n  set the allowed options for the mode. As an example\n  `Oj::Parser.new(:usual, cache_keys: true)`.\n\n## 3.13.5 - 2021-09-08\n\n- Assure value strings of zero length are not always cached.\n\n## 3.13.4 - 2021-09-04\n\n- Fixed concurrent GC issue in the cache.\n\n## 3.13.3 - 2021-08-30\n\n- Caches are now self adjusting and clearing so less used entries are\n  expunged to avoid memory growth.\n\n- When mimicking the JSON gem the JSON::State now handles all Hash\n  methods. While this is different than the actually JSON gem it\n  avoids failing due to errors in Rails code and other gems.\n\n## 3.13.2 - 2021-08-11\n\n- Fixed C99 compiler errors.\n\n## 3.13.1 - 2021-08-09\n\n- Fixed failing build on Windows.\n\n## 3.13.0 - 2021-08-08\n\n- Added `Oj::Parser`, a faster parser with better option management.\n\n- Watson1978 increasd dump performance ever more and is now a collaborator on Oj!\n\n## 3.12.3 - 2021-08-02\n\n- Update documents for the `:cache_keys` and `:cache_strings`.\n\n- Watson1978 increased dump performance for rails mode.\n\n## 3.12.2 - 2021-07-25\n\n- Thanks to Watson1978 for the dump performance for time values.\n\n## 3.12.1 - 2021-07-09\n\n- Fixed `:cache_keys` not being honored in compat mode.\n- Increased the cache size.\n\n## 3.12.0 - 2021-07-05\n\n- Added string and symbol caching options that give Oj about a 20% parse performance boost.\n\n## 3.11.8 - 2021-07-03\n\n- Fixed or reverted change that set the default mode when optimize_Rails was called.\n\n## 3.11.7 - 2021-06-22\n\n- Fixed exception type when parsing after `Oj::Rails.mimic_JSON` is called.\n\n## 3.11.6 - 2021-06-14\n\n- Fixed bug where `Oj::Doc#fetch` on an empty Hash or Array did not return `nil`.\n\n- Added an `Oj::Doc#exists?` method.\n\n- Deprecated `Oj::Doc#where?` in favor `Oj::Doc#where` or the alias, `Oj::Doc#path`.\n\n## 3.11.5 - 2021-04-15\n\n- Oj.generate fix introduced in previous bug fix. Oj.mimic_JSON is forced if Oj.generate is called.\n\n## 3.11.4 - 2021-04-14\n\n- Code re-formatted with clang-format. Thanks goes to BuonOmo for\n  suggesting and encouraging the use of a formatter and getting the\n  effort started.\n\n- Added support for `GC.compact` on `Oj::Doc`\n\n- Fixed compatibility issue with Rails and the JSON gem that requires\n  a special case when using JSON.generate versus call `to_json` on an\n  object.\n\n## 3.11.3 - 2021-03-09\n\n- Fixed `respond_to?` method on `Oj::EasyHash`.\n\n## 3.11.2 - 2021-01-27\n\n- Fixed JSON gem `:decimal_class` option.\n\n## 3.11.1 - 2021-01-24\n\n- XrXr fixed Ruby 3.0.0 object movement issue.\n\n## 3.11.0 - 2021-01-12\n\n- Added `:compat_bigdecimal` to support the JSON gem `:decimal_class` undocumented option.\n\n- Reverted the use of `:bigdecimal_load` for `:compat` mode.\n\n## 3.10.18 - 2020-12-25\n\n- Fix modes table by marking compat mode `:bigdecimal_load` instead of `:bigdecimal_as_decimal`.\n\n- Added `:custom` mode setting that are the same as `:compat` mode. There are some minor differences between the two setting.\n\n## 3.10.17 - 2020-12-15\n\n- The undocumented JSON gem option of `:decimal_class` is now\n  supported and the default option of `:bigdecimal_load` is also\n  honored in JSON.parse() and in compat mode.\n\n- Invalid encoding detection bug fixed for rails.\n\n## 3.10.16 - 2020-11-10\n\n- Allow escaping any character in :compat mode to match the json gem behavior.\n\n## 3.10.15 - 2020-10-16\n\nRemove license from code.\n\n## 3.10.14 - 2020-09-05\n\n- Updated float test to check a range.\n\n## 3.10.13 - 2020-08-28\n\n- Removed explicit dependency on bigdecimal.\n\n## 3.10.12 - 2020-08-20\n\n- Another try at bracketing bigdecimal versions to 1.0 and 3.\n\n## 3.10.11 - 2020-08-20\n\n- Bracketed bigdecimal dependency to 1.0 and 3.\n\n## 3.10.10 - 2020-08-20\n\n- Backed off bigdecimal dependency to 1.0.\n\n## 3.10.9 - 2020-08-17\n\n- Add bigdecimal dependency to gemfile.\n\n## 3.10.8 - 2020-07-24\n\n- New fast option for float parsing.\n\n- Fixes a float parse error.\n\n## 3.10.7 - 2020-07-13\n\n- Faster float parsing and an adjust to more closely match Ruby.\n\n## 3.10.6 - 2020-04-04\n\n- Correct object dump code to continue instead of return on an _ attribnute.\n\n## 3.10.5 - 2020-03-03\n\n- Fix test\n\n## 3.10.4 - 2020-03-03\n\n- Another adjustment to get Ruby floats to match Oj thanks to klaxit.\n\n## 3.10.3 - 2020-03-01\n\n- Fixed difference between some unicode character encoding in Rails mode.\n\n## 3.10.2 - 2020-01-30\n\n- Fixed circular array reference load.\n\n## 3.10.1 - 2020-01-14\n\n- Fixed bug where setting `ActiveSupport::JSON::Encoding.use_standard_json_time_format` before calling `Oj.optimize_rails` did not have an effect on the time format.\n\n- Worked around the Active Support hack that branched in `to_json` depending on the class of the option argument.\n\n- Updated for Ruby 2.7.0\n\n## 3.10.0 - 2019-11-28\n\n- Fixed custom mode load_file to use custom mode.\n\n- Fixed rails mode output of IO objects\n\n- Fixed issue #567. Second precision is forced if set to the correct number of decimals even if zero nanoseconds.\n\n- Fixed issue #568. Dumping bigdecimal in `:rails' mode made more consistent.\n\n- Fixed issue #569. `:compat` mode not restricts the escape mode as indicated in the documentation.\n\n- Fixed issue #570. In `:strict` mode number parsing follows the JSON specification more closely as intended.\n\n- Added `:ignore_under` which when true will ignore attributes that begin with a `_` when dumping in `:object` or `:custom` mode.\n\n## 3.9.2 - 2019-10-01\n\n- Fixed wrong exception type when mimicking the JSON gem.\n\n## 3.9.1 - 2019-08-31\n\n- Raise an exception on an invalid time represented as a decimal in `:object` mode.\n\n## 3.9.0 - 2019-08-18\n\n- Changed custom behavior when `:create_additions` is true and `:create_id` is\n  set to nil. Now Range, Regexp, Rational, and Complex are output as strings\n  instead of a JSON object with members. Setting any other value for\n  `:create_id`, even an empty string will result in an object being dumped.\n\n- Detection of pthread mutex support was changed.\n\n## 3.8.1 - 2019-07-22\n\n- Fix replacement of JSON::Parse thanks to paracycle.\n\n## 3.8.0 - 2019-07-17\n\n- Fixed a buffer allocation bug for `JSON.pretty_generate`.\n\n- Added mimic `safe` option to not include the complete JSON in a parse error message.\n\n- Added `use_raw_json` option for `:compat` and `:rails` mode to allow better\n  performance on dump. StringWriter in particular has been optimized for this option.\n\n## 3.7.12 - 2019-04-14\n\n- The `:omit_nil` option did not work in `:rails` mode. That has been fixed.\n\n## 3.7.11 - 2019-03-19\n\n- Fix to Rails optimize that missed initializing the mimic JSON `:symbolize_names` value.\n\n## 3.7.10 - 2019-03-14\n\n- Corrected time dump so that the none-leap years after a 400 year period are correct.\n\n## 3.7.9 - 2019-02-18\n\n- Return correct value in `create_opt` C function.\n\n- Return `Oj::ParseError` if an invalid big decimal string is encountered instead of an argument error\n\n## 3.7.8 - 2019-01-21\n\n- Replace `gmtime` with a custom function.\n\n- Oj::Doc crash fix.\n\n- Mark odd args to avoid GC.\n\n## 3.7.7 - 2019-01-14\n\n  - Exception with other than a single argument initializer can now be decoded.\n\n  - StreamWriter bug fixed that forces UTF-8 when appending to a stream. Ruby likes to convert to ASCII-8BIT but forcing the append to be UTF-8 avoids that issue.\n\n## 3.7.6 - 2018-12-30\n\n  - Changed time encoding for 32 bit to work around a Ruby bug in `rb_time_timespec()` that fails for times before 1970.\n\n  - Addressed issue #514 by changing reserved identifiers.\n\n  - Addressed issue #515 by adding return value checks on `strdup()` and `pthread_mutex_init()`.\n\n## 3.7.5 - 2018-12-27\n\n  - Address issue #517 with a special escape table for mimicking the JSON gem.\n\n## 3.7.4 - 2018-11-29\n\n  - Allow `+` in front of numbers in parse as well as stream parse **EXCEPT** when mimicking the JSON gem.\n\n## 3.7.3 - 2018-11-29\n\n  - Allow `+` in front of numbers in parse as well as stream parse.\n\n## 3.7.2 - 2018-11-29\n\n  - More tolerant float parsing to allow `123.`.\n\n  - Parse exceptions raised by user code now preserve the message content of the exception.\n\n## 3.7.1 - 2018-11-09\n\n  - Updated to support TruffleRuby.\n\n## 3.7.0 - 2018-10-29\n\n  - Thanks to Ziaw for adding a integer range where integers outside that range are written as strings.\n\n## 3.6.13 - 2018-10-25\n\n  - Fixed issue where exceptions were not being cleared on parsing.\n\n  - Added addition unicode dump error information.\n\n## 3.6.12 - 2018-10-16\n\n  - Fixed random `:omit_nil` setting with StringWriter and StreamWriter.\n\n## 3.6.11 - 2018-09-26\n\n  - Added the JSON path to parse error messages.\n\n  - BigDecimal parse errors now return Oj::ParseError instead of ArgumentError.\n\n## 3.6.10 - 2018-09-13\n\n  - Additional occurrences of `SYM2ID(sym)` replaced.\n\n## 3.6.9 - 2018-09-12\n\n  - `SYM2ID(sym)` causes a memory leak. A work around is now used.\n\n## 3.6.8 - 2018-09-08\n\n  - Stopped setting the default options when optimize rails is called as the documentation has indicated.\n\n  - In custom mode `Date` and `DateTime` instances default to use the `:time_format` option is the `:create_additions` option is false.\n\n## 3.6.7 - 2018-08-26\n\n  - Fixed incorrect check in StreamWriter when adding raw JSON.\n\n## 3.6.6 - 2018-08-16\n\n  - Fixed Debian build issues on several platforms.\n\n  - `oj_slash_string` is now frozen.\n\n## 3.6.5 - 2018-07-26\n\n  - Fixed GC issue with Oj::Doc.\n\n  - Fixed issue with time encoding with Windows.\n\n## 3.6.4 - 2018-07-10\n\n  - JSON.generate() now sets the `to_json` option as expected.\n\n  - Show `:create_additions` in the default options. It did not appear before.\n\n## 3.6.3 - 2018-06-21\n\n  - Fixed compat dump compilation error on Windows.\n\n## 3.6.2 - 2018-05-30\n\n  - Regex encoded correctly for rails when using `to_json`.\n\n  - ActiveSupport::TimeWithZone optimization fixed.\n\n## 3.6.1 - 2018-05-16\n\n  - Fixed realloc bug in rails dump.\n\n## 3.6.0 - 2018-05-01\n\n  - Add optimization for Rails ActiveRecord::Result encoding.\n\n## 3.5.1 - 2018-04-14\n\n  - Fixed issue with \\u0000 terminating keys early.\n\n  - Add trace for calls to `to_json` and 'as_json`.\n\n## 3.5.0 - 2018-03-04\n\n  - A trace option is now available in all modes. The format roughly follows the Ruby trace format.\n\n## 3.4.0 - 2018-01-24\n\n  - Option to ignore specific classes in :object and :custom mode added.\n\n## 3.3.10 - 2017-12-30\n\n  - Re-activated the bigdecimal_as_decimal option in custom mode and made the selection active for Rails mode.\n\n  - Fixed bug in optimize_rails that did not optimize all classes as expected.\n\n  - Fixed warnings for Ruby 2.5.0.\n\n## 3.3.9 - 2017-10-27\n\n  - Fixed bug where empty strings were sometimes marked as invalid.\n\n## 3.3.8 - 2017-10-04\n\n  - Fixed Rail mimic precision bug.\n\n## 3.3.7 - 2017-10-02\n\n  - Handle invalid unicode characters better for single byte strings.\n\n  - Parsers for empty strings handle errors more consistently.\n\n## 3.3.6 - 2017-09-22\n\n  - Numerous fixes and cleanup to support Ruby 2.4.2.\n\n## 3.3.5 - 2017-08-11\n\n- Fixed a memory error when using rails string encoding of certain unicode characters.\n\n## 3.3.4 - 2017-08-03\n\n- Oj::Rails.mimic_JSON now uses Float for JSON.parse for large decimals instead of BigDecimal.\n\n## 3.3.3 - 2017-08-01\n\n- Allow nil as a second argument to parse when mimicking the json gem. This is\n  a special case where the gem does not raise an exception on a non-Hash\n  second argument.\n\n## 3.3.2 - 2017-07-11\n\n- Fixed Windows compile issue regarding timegm().\n\n## 3.3.1 - 2017-07-06\n\n- Some exceptions such as NoMethodError have an invisible attribute where the\n  key name is NULL. Not an empty string but NULL. That is now detected and\n  dealt with.\n\n## 3.3.0 - 2017-07-05\n\n- Added the :wab mode to support the [WABuR](https://github.com/ohler55/wabur)\n  project. The :wab mode only allows the indent option and is faster due to\n  not having to check the multitude of options the other modes support.\n\n## 3.2.1 - 2017-07-04\n\n- Made json gem NaN dumping more consistent.\n\n- Fixed :null mode to not revert to strict mode.\n\n## 3.2.0 - 2017-06-20\n\n- A buffer_size option was added to StringWriter and StreamWriter. That option\n  also sets the suggested flush limit for StreamWriter.\n\n## 3.1.4 - 2017-06-16\n\n- :symbolize_names now works with Oj::Rails.mimic_JSON.\n\n## 3.1.3 - 2017-06-13\n\n- JSON.dump used the default mode instead of :compat mode. That has been fixed.\n\n- Updated docs on Oj.mimic_JSON to note the :encoding is set to :unicode_xss and not :ascii.\n\n## 3.1.2 - 2017-06-10\n\n- StringWriter was passing incorrect arguments to to_json and as_json. Fixed.\n\n- StringWriter now accepts the mode option. This means it also defaults to the\n  default_options mode instead of the custom mode.\n\n- JSON.pretty_generate when in rails mode now loads the JSON::State class correctly.\n\n## 3.1.1 - 2017-06-09\n\n- Custom mode now honors the :create_additions option for time.\n\n## 3.1.0 - 2017-06-04\n\n- Added Oj::Rails.mimic_JSON which mimics the json gem when used with\n  ActiveSupport which monkey patches the same to_json methods does. Basically\n  this changes the JSON.parse and other JSON entry points for encoding and\n  decoding.\n\n- Oj.optimize_rails now calls Oj::Rails.mimic_JSON.\n\n## 3.0.11 - 2017-06-02\n\n- If rails in required and Oj.mimic_JSON is called without calling\n  Oj.optimize_rails nil.to_json failed. That has been fixed.\n\n- Fixed crash on setting create_id to nil after mimic_JSON.\n\n## 3.0.10 - 2017-05-22\n\n- Oj.optimize_rails failed to include Hash and Array in the optimization. It does now.\n\n## 3.0.9 - 2017-05-17\n\n- Missed catching invalid unicodes beginning with \\xE2. Fixed.\n\n- In :compat mode a non-string and non IO value is converted to a string with a call to to_s.\n\n## 3.0.8 - 2017-05-16\n\n- Float significant digits now match Ruby's unless optimized and then significant digits are set to 16.\n\n- Rails Hash post merging of identical keys after calling as_json is preserved only for un-optimized Hashes.\n\n- Raise an exception to match json gem behavior on invalid unicode.\n\n## 3.0.7 - 2017-05-10\n\n- Changed JSON.pretty_generate options to a State instead of a Hash to get the\n  json gen to_json method to accept formatting options.\n\n- Added optimization for ActionController::Parameters\n\n## 3.0.6 - 2017-05-07\n\n- Added Oj.optimize_rails().\n\n- Fixed argument passing bug on calls to to_json().\n\n## 3.0.5 - 2017-05-02\n\n- No change in the Oj::Rails.optimize() API but additional classes are now supported.\n\n- Added ActiveSupport::TimeWithZone optimization to rails mode.\n\n- Added ActiveRecord::Base optimization to rails mode which allows optimization of any class inheriting from ActiveRecord::Base.\n\n## 3.0.4 - 2017-05-01\n\n- Fixed compile problem on Windows again.\n\n- Fixed issue with TimeWithZone not being encoded correctly when a member of an object.\n\n## 3.0.3 - 2017-04-28\n\n- Improved compatibility with a json gem and Rails combination when json adds are used.\n\n- Fixed compile problem on Windows.\n\n## 3.0.2 - 2017-04-27\n\n- Fixed crash due to unset var with dump to Rails mode.\n\n## 3.0.1 - 2017-04-25\n\n- Fixed compile error with help from Dylan Johnson.\n\n## 3.0.0 - 2017-04-24\n\n- Major changes focused on json gem and Rails compatibility. A new :custom\n  mode was added as well. Starting with this release the json gem tests are\n  being used to test the :compat mode and the ActiveSupport 5 tests are being\n  used to test the :rails mode.\n\n- Please give stereobooster a thank you for getting the tests set up and\n  helping out with json gem and Rails understanding. He also has some\n  benchmarks of Oj versus other options\n  [here](https://github.com/stereobooster/ruby-json-benchmark).\n\n## 2.18.3 - 2017-03-14\n\n- Changed to use long doubles for parsing to minimize round off errors. So PI will be accurate to more places for PI day.\n\n## 2.18.2 - 2017-03-01\n\n- Strict mode now allows symbol keys in hashes.\n\n- Fixed omit_nil bug discovered by ysmazda.\n\n## 2.18.1 - 2017-01-09\n\n- Missing argument to dump now raises the correct arg exception and with mimic does not crash on missing argument.\n- Oj::Doc paths can now contain escaped path separators so \"a\\/b\" can match an lement name with a slash in it.\n\n## 2.18.0 - 2016-11-26\n\n- Rubinius compilation fixes.\n- Added a separate option for as_json instead of piggy backing on the use_to_json. This changes the API slightly.\n- Ready for Ruby 2.4.\n- Thanks to faucct for fixing mimic to not redefine JSON::ParserError.\n\n## 2.17.5 - 2016-10-19\n\n- Added additional code to check for as_json arguments and recursive calls.\n\n## 2.17.4 - 2016-09-04\n\n- Added the ascii_only option to JSON.generate when in mimic_JSON mode so that it is consistent with the undocumented feature in the json gem.\n\n## 2.17.3 - 2016-08-16\n\n- Updated mimic_JSON to monkey patch OpenStruct, Range, Rational, Regexp, Struct, Symbol, and Time like the JSON gem does. Also added the JSON.create_id accessor.\n\n## 2.17.2 - 2016-08-13\n\n- Worked around a problem with DateTime and ActiveSupport that causes a hang when hour, minute, second, and some other methods are called from C.\n\n## 2.17.1 - 2016-07-08\n\n- Added an option provide an alternative Hash class for loading.\n- Added the Oj::EasyHash class.\n- Fixed test failures on 32 bit machines.\n- Sped up mimic_JSON.\n- Added an option to omit Hash and Object attributes with nil values.\n\n## 2.16.1 - 2016-06-21\n\n- Thanks to hsbt for fixing a compile issue with Ruby 2.4.0-preview1.\n\n## 2.16.0 - 2016-06-19\n\n- Added option to allow invalid unicode characters. This is not a suggested option in a majority of the cases.\n- Fixed float parsing for 32 bit systems so that it does not roll over to BigDecimal until more than 15 significant digits.\n\n## 2.15.1 - 2016-05-26\n\n- Fixed bug with activerecord when to_json returns an array instead of a string.\n\n## 2.15.0 - 2016-03-28\n\n- Fixed bug where encoded strings could be GCed.\n- :nan option added for dumping Infinity, -Infinity, and NaN. This is an edition to the API. The default value for the :non option is :auto which uses the previous NaN handling on dumping of non-object modes.\n\n## 2.14.7 - 2016-03-20\n\n- Fixed bug where a comment before another JSON element caused an error. Comments are not part of the spec but this keep support consistent.\n\n## 2.14.6 - 2016-02-26\n\n- Changed JSON::ParserError to inherit from JSON::JSONError which inherits from StandardError.\n\n## 2.14.5 - 2016-02-19\n\n- Parse errors in mimic mode are not a separate class than Oj.ParseError so the displayed name is JSON::ParserError instead.\n\n## 2.14.4 - 2016-02-04\n\n- When not in quirks mode strings are now raise an exception if they are the top level JSON value.\n\n## 2.14.3 - 2015-12-31\n\n- Updated to support Ruby 2.3.0.\n\n## 2.14.2 - 2015-12-19\n\n- Non-UTF-8 string input is now converted to UTF-8.\n\n## 2.14.1 - 2015-12-15\n\n- Fixed bug that reverted to BigDecimal when a decimal had preceding zeros after the decimal point.\n\n## 2.14.0 - 2015-12-04\n\n- More tweaking on decimal rounding.\n- Made dump options available in the default options and not only in the mimic generate calls.\n\n## 2.13.1 - 2015-11-16\n\n- Thanks to Comboy for the fix to a large number rounding bug.\n\n## 2.13.0 - 2015-10-19\n\n- Oj no longer raises an exception if the to_hash method of an object does not return a Hash. ActiveRecord has decided that to_hash should return an Array instead so Oj now encodes what ever is returned.\n- Added a register_odd_raw function that allows odd marshal functions to return raw JSON as a string to be included in the dumped JSON.\n- The register_odd function now supports modules in additions to classes.\n\n## 2.12.14 - 2015-09-14\n\n- Change the failure mode for objects that can not be serialized such as a socket. Now in compat mode the to_s of the object is placed in the output instead of raising an exception.\n\n## 2.12.13 - 2015-09-02\n\n- Added a check for the second argument to load() is a Hash.\n- Yet another attempt to make floating point numbers display better.\n- Thanks to mkillianey for getting the extconf.rb and gemspec file updated.\n\n## 2.12.12 - 2015-08-09\n\n- Thanks to asurin for adding support for arguments to to_json() that rails uses.\n\n## 2.12.11 - 2015-08-02\n\n- Oj::ParseError is now thrown instead of SyntaxError when there are multiple  JSON documents in a string or file and there is no proc or block associated with the parse call.\n\n## 2.12.10 - 2015-07-12\n\n- An exception is now raised if there are multiple JSON documents in a string or file if there is no proc or block associated with the parse call.\n\n## 2.12.9 - 2015-05-30\n\n- Fixed failing test when using Rubinius.\n- Changed mimic_JSON to support the global/kernel function JSON even when the json gem is loaded first.\n\n## 2.12.8 - 2015-05-16\n\n- mimic_JSON now supports the global/kernel JSON function that will either parse a string argument or dump an array or object argument.\n\n## 2.12.7 - 2015-05-07\n\n- Fixed compile error with 32 bit HAS_NANO_TIME extra paren bug.\n\n## 2.12.6 - 2015-05-05\n\n- Fixed a number of 32bit related bugs.\n\n## 2.12.5 - 2015-04-27\n\n- In :null mode Oj now dumps Infinity and NaN as null.\n\n## 2.12.4 - 2015-04-20\n\n- Fixed memory leak in Oj::Doc when not using a given proc.\n\n## 2.12.3 - 2015-04-16\n\n- Fixed bug when trying to resolve an invalid class path in object mode load.\n\n## 2.12.2 - 2015-04-13\n\n- Fixed Oj::Doc bug that causes a crash on local name lookups.\n- Fixed Oj::Doc unicode parsing.\n\n## 2.12.1 - 2015-03-12\n\n- Changed the unix_zone encoded format to be the utc epoch.\n\n## 2.12.0 - 2015-03-06\n\n- String formats for UTC time are now explicitly UTC instead of offset of zero. This fixes a problem with pre-2.2.0 Rubies that automatically convert zero offset times to local times.\n- Added :unix_zone time_format option for formatting numeric time. This option is the same as the :unix time option but the UTC offset is included as an exponent to the number time value. A value of 86400 is an indication of UTC time.\n\n## 2.11.5 - 2015-02-25\n\n- Fixed issue with rails as_json not being called for Structs.\n- Added support for anonymous Structs with object mode encoding. Note that this will result in a new anonymous Struct for each instance.\n\n## 2.11.4 - 2015-01-20\n\n- DateTime second encoding is now always a Rational to preserve accuracy.\n- Fixed buf in the Oj.load() callback feature that caused an endless loop when a StringIO was used with a JSON that was a number.\n\n## 2.11.3 - 2015-01-18\n\n- DateTime encoding now includes nanoseconds.\n\n## 2.11.2 - 2015-01-10\n\n- Changed the defaults for mimic_JSON to use 16 significant digits instead of the default 15.\n- Fixed bug where a subclass of Array would be serialized as if in object mode instead of compat when in compat mode.\n\n## 2.11.1 - 2014-11-09\n\n- Changed the use_to_json option to still allow as_json even when set to false.\n\n## 2.11.0 - 2014-11-02\n\n- Restricted strict dump to not dump NaN nor Infinity but instead raise an exception.\n- Changed compat mode so that the :bigdecimal_as_decimal option over-rides the to_json method if the option is true. The default for mimic_JSON is to leave the option off.\n- Added support for Module encoding in compat mode.\n- Added ActiveSupportHelper so that require 'active_support_helper' will added a helper for serializing ActiveSupport::TimeWithZone.\n- Added float_precision option to control the number of digits used for floats when dumping.\n\n## 2.10.4 - 2014-10-22\n\n- Fixed Range encoding in compat mode to not use the object mode encoding.\n- Fixed serialization problem with timestamps.\n- Fixed compat parser to accept NaN and Infinity.\n\n## 2.10.3 - 2014-10-04\n\n- Using the xmlschema option with :object mode now saves time as a string and preserves the timezone.\n- Rational recursive loop caused by active support fixed.\n- Time in mimic_JSON mode are now the ruby string representation of a date.\n\n## 2.10.2 - 2014-08-20\n\n- Fixed string corruption bug due to an uncommented assignment used for debugging.\n\n## 2.10.1 - 2014-08-17\n\n- Changed parse argument error to be a Ruby ArgError instead of a general Exception.\n\n## 2.10.0 - 2014-08-03\n\n- Using an indent of less than zero will not place newline characters between JSON elements when using the string or stream writer.\n- A new options callback method was added to the Simple Callback Parser. If defined the prepare_key() method will be called when an JSON object ket is first encountered. The return value is then used as the key in the key-value pair.\n- Increased significants digits to 16 from 15. On occasion there may be unexpected round off results. Tou avoid those use the bigdecimal options.\n\n## 2.9.9 - 2014-07-07\n\n- Missed a character map entry. / in ascii mode is now output as / and not \\/\n- Fixed SC parser to not treat all IO that respond to fileno as a file. It not checks stat and asks if it is a file.\n- Tightened object parsing of non-string hash keys so that just \"^#x\" is parsed as a hash pair and not \"~#x\".\n- Using echo to STDIN as an IO input works around the exception raised when asking the IO for it's position (IO.pos).\n- Simple Callback Parser now uses the new stream parser for handling files and IO so that larger files are handled more efficiently and streams are read as data arrives instead of on close.\n- Handles file FIFO pipes correctly now.\n\n## 2.9.8 - 2014-06-25\n\n- Changed escaping back to previous release and added a new escape mode.\n- Strict mode and compat mode no longer parse Infinity or NaN as a valid number. Both are valid in object mode still.\n\n## 2.9.7 - 2014-06-24\n\n- Changed dump to use raw / and raw \\n in output instead of escaping.\n- Changed the writer to always put a new line at the end of a top level JSON object. It makes output easier to view and edit with minimal impact on size.\n- Worked around the file.gets look ahead caching as long as it is not called while parsing (of course).\n- Thanks to lautis for a new parse option. quirks_mode allows Oj to behave quirky like the JSON gem. Actually the JSON gem has it backwards with quirky mode supporting the JSON spec and non-quirky limiting parsing to objects and arrays. Oj stays consistent with the JSON gem to avoid confusion.\n- Fixed problem with sc_parse not terminating the string when loaded from a file.\n- Thanks go to dchelimsky for expanding the code sample for the ScHandler.\n\n## 2.9.6 - 2014-06-15\n\n- Fixed bug using StringIO with SCParser.\n- Tightened up JSON mimic to raise an exception if JSON.parse is called on a JSON documents that returns a primitive type.\n\n## 2.9.5 - 2014-06-07\n\n- Mimic mode now monkey patches Object like JSON.\n- A big thanks to krasnoukhov for reorganizing test and helping get Oj more rails compatible.\n- Another thanks goes out to lautis for a pull request that provided some optimization and fixed the return exception for an embedded null in a string.\n- Fixed a bug with zip reader streams where EOF was not handled nicely.\n\n## 2.9.4 - 2014-05-28\n\n- In mimic mode parse errors now match the JSON::ParserError.\n\n## 2.9.3 - 2014-05-15\n\n- Fixed IO read error that showed up in IO objects that return nil instead of raising an EOF error when read is done.\n\n## 2.9.2 - 2014-05-14\n\n- Fixed link error with Windows.\n\n## 2.9.1 - 2014-05-14\n\n- Fixed mimic load when given a block to evalate. It conflicted with the new load option.\n- Added a true stream that is used when the input argument to load is an IO object such as a stream or file. This is slightly slower for smaller files but allows reading of huge files that will not fit in memory and is more efficient on even larger files that would fit into memory. The load_file() method uses the new stream parser so multiple GB files can be processed without used execessive memory.\n\n## 2.9.0 - 2014-05-01\n\n- Added support for detection and handling of String, Array, and Hash subclasses.\n- Oj.load() can now take a block which will be yielded to on every object parsed when used with a file or string with multiple JSON entries.\n\n## 2.8.1 - 2014-04-21\n\n- Added additional argument to the register_odd function.\n- Fixed bug that failed to load on some uses of STDIN.\n\n## 2.8.0 - 2014-04-20\n\n- Added support for registering special encoding and decoding rules for specific classes. This the ActiveSupport subclass of the String class for safe strings. For an example look at the `test_object.rb` file, `test_odd_string` test.\n\n## 2.7.3 - 2014-04-11\n\n- Fixed bug where load and dump of Structs in modules did not work correctly.\n\n## 2.7.2 - 2014-04-06\n\n- Added option return nil if nil is provided as input to load.\n\n## 2.7.1 - 2014-03-30\n\n- Fixed bug in new push_key which caused duplicate characters.\n\n## 2.7.0 - 2014-03-29\n\n- Added the push_key() method to the StringWriter and StreamWriter classes.\n\n## 2.6.1 - 2014-03-21\n\n- Set a limit on the maximum nesting depth to 1000. An exception is raised instead of a segfault unless a reduced stack is used which could trigger the segfault due to an out of memory condition.\n\n## 2.6.0 - 2014-03-11\n\n- Added the :use_to_json option for Oj.dump(). If this option is set to false the to_json() method on objects will not be called when dumping. This is the default behavior. The reason behind the option and change is to better support Rails and ActiveSupport. Previous works arounds have been removed.\n\n## 2.5.5 - 2014-02-18\n\n- Worked around the Rubinius failure to load bigdecimal from a require within the C code.\n\n## 2.5.4 - 2014-01-14\n\n- Fixed bug where unterminated JSON did not raise an exception.\n\n## 2.5.3 - 2014-01-03\n\n- Added support for blocks with StringWriter.\n\n## 2.5.2 - 2014-01-02\n\n- Fixed indent problem with StringWriter so it now indents properly.\n\n## 2.5.1 - 2013-12-18\n\n- Added push_json() to the StringWriter and StreamWriter to allow raw JSON to be added to a JSON document being constructed.\n\n## 2.4.3 - 2013-12-16\n\n- Made include pthread.h conditional for Windows.\n\n## 2.4.2 - 2013-12-14\n\n- Thanks to Patrik Rak for a fix to a buffer short copy when dumping with 0 indent.\n\n## 2.4.1 - 2013-12-10\n\n- Fixed Windows version by removing class cache test.\n\n## 2.4.0 - 2013-12-08\n\n- Merged in a PR to again allow strings with embedded nulls.\n- Implemented StreamWriter to compliment the StringWriter.\n- Fixed bug in the class cache hash function that showed up with the sparc compiler.\n\n## 2.3.0 - 2013-12-01\n\n- JRuby is no longer supported.\n- Thanks to Stefan Kaes the support for structs has been optimized.\n- Better support for Rubinous.\n- Added option to disable GG during parsing.\n- Added StringWriter that allows building a JSON document one element at a time.\n\n## 2.2.3 - 2013-11-19\n\n- Fixed struct segfault on load.\n- Added option to force float on load if a decimal number.\n\n## 2.2.2 - 2013-11-17\n\n- Added mutex support for Windows.\n- Protected SCP parser for GC.\n\n## 2.2.1 - 2013-11-15\n\n- Made all VALUEs in parse volatile to avoid garbage collection while in use.\n\n## 2.2.0 - 2013-11-11\n\n- All 1.8.x versions of Ruby now have require 'rational' called.\n- Removed the temporary GC disable and implemented mark strategy instead.\n- Added new character encoding mode to support the Rails 4 escape characters of &,  as xss_safe mode. The :encoding option replaces the :ascii_only option.\n- Change parsing of NaN to not use math.h which on older systems does not define NAN.\n\n## 2.1.8 - 2013-10-28\n\n- All 1.8.x versions of Ruby now have require 'rational' called.\n- Removed the temporary GC disable and implemented mark strategy instead.\n\n## 2.1.7 - 2013-10-19\n\n- Added support for NaN and -NaN to address issue #102. This is not according to the JSON spec but seems to be expected.\n- Added require for rational if the Ruby version is 1.8.7 to address issue #104.\n- Added Rails re-call of Oj.dump in the to_json() method which caused loops with Rational objects to fix issue #108 and #105.\n\n## 2.1.6 - 2013-10-07\n\n- Added Oj.to_stream() for dumping JSON to an IO object.\n\n## 2.1.5 - 2013-07-21\n\n- Allow exception dumping magic with Windows.\n\n## 2.1.4 - 2013-07-04\n\n- Fixed Linux 32 bit rounding bug.\n\n## 2.1.3 - 2013-06-30\n\n- Fixed bug that did not deserialize all attributes in an Exception subclass.\n- Added a sample to demonstrate how to write Exception subclasses that will automatically serialize and deserialize.\n\n## 2.1.2 - 2013-06-19\n\n- Fixed support for Windows.\n\n## 2.1.1 - 2013-06-17\n\n- Fixed off by 1 error in buffer for escaped strings.\n\n## 2.1.0 - 2013-06-16\n\n- This version is a major rewrite of the parser. The parser now uses a constant stack size no matter how deeply nested the JSON document is. The parser is also slightly faster for larger documents and 30% faster for object parsing.\n- Oj.strict_load() was renamed to Oj.safe_load() to better represent its functionality. A new Oj.strict_load() is simply Oj.load() with :mode set to :strict.\n- Oj.compat_load() and Oj.object_load() added.\n- A new Simple Callback Parser was added invoked by Oj.sc_parse().\n- Eliminated :max_stack option as it is no longer needed.\n- Handle cleanup after exceptions better.\n\n## 2.0.14 - 2013-05-26\n\n- Fixed bug in Oj::Doc.each_leaf that caused an incorrect where path to be created and also added a check for where path maximum length.\n- Updated the documentation to note that invalid JSON documents, which includes an empty string or file, will cause an exception to be raised.\n\n## 2.0.13 - 2013-05-17\n\n- Changed dump to put closing array brackets and closing object curlies on the line following the last element if :indent is set to greater than zero.\n\n## 2.0.12 - 2013-04-28\n\n- Another fix for mimic.\n- mimic_JSON now can now be called after loading the json gem. This will replace the json gem methods after loading. This may be more compatible in many cases.\n\n## 2.0.11 - 2013-04-23\n\n- Fixed mimic issue with Debian\n- Added option to not cache classes when loading. This should be used when classes are dynamically unloaded and the redefined.\n- Float rounding improved by limiting decimal places to 15 places.\n- Fixed xml time dumping test.\n\n## 2.0.10 - 2013-03-10\n\n- Tweaked dump calls by reducing preallocation. Speeds are now several times faster for smaller objects.\n- Fixed Windows compile error with Ruby 2.0.0.\n\n## 2.0.9 - 2013-03-04\n\n- Fixed problem with INFINITY with CentOS and Ruby 2.0.0. There are some header file conflicts so a different INFINITY was used.\n\n## 2.0.8 - 2013-03-01\n\n- Added :bigdecimal_load option that forces all decimals in a JSON string to be read as BigDecimals instead of as Floats. This is useful if precision is important.\n- Worked around bug in active_support 2.3.x where BigDecimal.as_json() returned self instead of a JSON primitive. Of course that creates a loop and blows the stack. Oj ignores the as_json() for any object that returns itself and instead encodes the object as it sees fit which is usually what is expected.\n- All tests pass with Ruby 2.0.0-p0. Had to modify Exception encoding slightly.\n\n## 2.0.7 - 2013-02-18\n\n- Fixed bug where undefined classes specified in a JSON document would freeze Ruby instead of raising an exception when the auto_define option was not set. (It seems that Ruby freezes on trying to add variables to nil.)\n\n## 2.0.6 - 2013-02-18\n\n- Worked around an undocumented feature in linux when using make that misreports the stack limits.\n\n## 2.0.5 - 2013-02-16\n\n- DateTimes are now output the same in compat mode for both 1.8.7 and 1.9.3 even though they are implemented differently in each Ruby.\n- Objects implemented as data structs can now change the encoding by implemented either to_json(), as_json(), or to_hash().\n- Added an option to allow BigDecimals to be dumped as either a string or as a number. There was no agreement on which was the best or correct so both are possible with the correct option setting.\n\n## 2.0.4 - 2013-02-11\n\n- Fixed bug related to long class names.\n- Change the default for the auto_define option.\n- Added Oj.strict_load() method that sets the options to public safe options. This should be safe for loading JSON documents from a public unverified source. It does not eleviate to need for reasonable programming practices of course. See the section on the proper use of Oj in a public exposure.\n\n## 2.0.3 - 2013-02-03\n\n- Fixed round off error in time format when rounding up to the next second.\n\n## 2.0.2 - 2013-01-23\n\n- Fixed bug in Oj.load where loading a hash with symbold keys and also turning on symbolize keys would try to symbolize a symbol.\n\n## 2.0.1 - 2013-01-15\n\n- BigDecimals now dump to a string in compat mode thanks to cgriego.\n- High precision time (nano time) can be turned off for better compatibility with other JSON parsers.\n- Times before 1970 now encode correctly.\n\n## 2.0.0 - 2012-12-18\n\n- Thanks to yuki24 Floats are now output with a decimal even if they are an integer value.\n- The Simple API for JSON (SAJ) API has been added. Read more about it on the Oj::Saj page.\n\n## 1.4.7 - 2012-12-09\n\n- In compat mode non-String keys are converted to Strings instead of raising and error. (issue #52)\n\n## 1.4.6 - 2012-12-03\n\n- Silently ignores BOM on files and Strings.\n- Now works with JRuby 1.7.0 to the extent possible with the unsupported C extension in JRuby.\n\n## 1.4.5 - 2012-11-19\n\n- Adds the old deprecated methods of unparse(), fast_unparse(), and pretty_unparse() to JSON_mimic.\n\n## 1.4.4 - 2012-11-07\n\n- Fixed bug in mimic that missed mimicking json_pure.\n\n## 1.4.3 - 2012-10-19\n\n- Fixed Exception encoding in Windows version.\n\n## 1.4.2 - 2012-10-17\n\n- Fixed dump and load of BigDecimals in :object mode.\n- BigDecimals are now dumped and loaded in all modes.\n\n## 1.4.1 - 2012-10-17\n\n- Windows RubyInstaller and TCS-Ruby now supported thanks to Jarmo Pertman. Thanks Jarmo.\n\n## 1.4.0 - 2012-10-11\n\n- Parse errors now raise an Exception that inherites form Oj::Error which inherits from StandardError. Some other Exceptions were changed as well to make it easier to rescue errors.\n\n## 1.3.7 - 2012-10-05\n\n- Added header file for linux builds.\n\n## 1.3.6 - 2012-10-04\n\n- Oj.load() now raises a SystemStackError if a JSON is too deeply nested. The loading is allowed to use on 75% of the stack.\n- Oj::Doc.open() now raises a SystemStackError if a JSON is too deeply nested. The loading is allowed to use on 75% of the stack. Oj::Doc.open will allow much deeper nesting than Oj.load().\n\n## 1.3.5 - 2012-09-25\n\n- Fixed mimic_JSON so it convinces Ruby that the ALL versions of the json gem are already loaded.\n\n## 1.3.4 - 2012-08-12\n\n- Fixed mimic_JSON so it convinces Ruby that the json gem is already loaded.\n\n## 1.3.2 - 2012-07-28\n\n- Fixed compile problems with native Ruby on OS X 10.8 (Mountain Lion)\n\n## 1.3.1 - 2012-07-01\n\n- Fixed time zone issue with :xmlschema date format.\n\n## 1.3.0 - 2012-07-09\n\n- extconf.rb fixed to not pause on some OSs when checking CentOS special case.\n- Added an option to control the time format output when in :compat mode.\n\n## 1.2.13 - 2012-07-08\n\n- Fixed double free bug in Oj::Doc that showed up for larger documents.\n\n## 1.2.12 - 2012-07-06\n\n- Fixed GC bug in Oj::Doc, the fast parser.\n- Serialization of Exceptions in Ruby 1.8.7 now includes message and backtrace.\n\n## 1.2.11 - 2012-06-21\n\n- Added :max_stack option to limit the size of string allocated on the stack.\n\n## 1.2.10 - 2012-06-20\n\n- Added check for circular on loading of circular dumped JSON.\n- Added support for direct serialization of BigDecimal, Rational, Date, and DateTime.\n- Added json.rb to $\" in mimic mode to avoid pulling in the real JSON by accident.\n- Oj is now thread safe for all functions.\n- The / (solidus) character is now placed in strings without being escaped.\n\n## 1.2.9 - 2012-05-29\n\n\n## 1.2.8 - 2012-05-03\n\n- Included a contribution by nevans to fix a math.h issue with an old fedora linux machine.\n- Included a fix to the documentation found by mat.\n\n## 1.2.7 - 2012-04-22\n\n- Fixed bug where a float with too many characters would generate an error. It is not parsed as accuractly as Ruby will support.\n- Cleaned up documentation errors.\n- Added support for OS X Ruby 1.8.7.\n\n## 1.2.6 - 2012-04-22\n\n- Cleaned up documentation errors.\n- Added support for OS X Ruby 1.8.7.\n\n## 1.2.5 - 2012-04-18\n\n- Added support for create_id in Oj and in mimic_JSON mode\n\n## 1.2.4 - 2012-04-13\n\n- Removed all use of math.h to get around CentOS 5.4 compile problem.\n\n## 1.2.3 - 2012-04-09\n\n- Fixed compile error for the latest RBX on Travis.\n\n## 1.2.2 - 2012-04-02\n\n- minor bug fixes for different rubies along with test updates\n- Oj::Doc will now automatically close on GC.\n\n## 1.2.1 - 2012-03-30\n\n- Organized compile configuration better.\n- as_json() support now more flexible thanks to a contribution by sauliusg.\n\n## 1.2.0 - 2012-03-30\n\n- Removed the encoding option and fixed a misunderstanding of the string encoding. Unicode code points are now used instead of byte codes. This is not compatible with previous releases but is compliant with RFC4627.\n- Time encoding in :object mode is faster and higher nanosecond precision.\n\n## 1.1.1 - 2012-03-27\n\n- The encoding option can now be an Encoding Object or a String.\n- Fixed Rubinius errors.\n\n## 1.1.0 - 2012-03-27\n\n- Errors are not longer raised when comments are encountered in JSON documents.\n- Oj can now mimic JSON. With some exceptions calling JSON.mimic_JSON will allow all JSON calls to use OJ instead of JSON. This gives a speedup of more than 2x on parsing and 5x for generating over the JSON::Ext module.\n- Oj::Doc now allows a document to be left open and then closed with the Oj::Doc.close() class.\n- Changed the default encoding to UTF-8 instead of the Ruby default String encoding.\n\n## 1.0.6 - 2012-03-20\n\n- Gave Oj::Doc a speed increase. It is now 8 times fast than JSON::Ext.\n\n## 1.0.5 - 2012-03-17\n\n- Added :ascii_only options for dumping JSON where all high-bit characters are encoded as escaped sequences.\n\n## 1.0.4 - 2012-03-16\n\n- Fixed bug that did not allow symbols as keys in :compat mode.\n\n## 1.0.3 - 2012-03-15\n\n- Added :symbol_keys option to convert String hash keys into Symbols.\n- The load() method now supports IO Objects as input as well as Strings.\n\n## 1.0.2 - 2012-03-15\n\n- Added RSTRING_NOT_MODIFIED for Rubinius optimization.\n\n## 1.0.1 - 2012-03-15\n\n- Fixed compatibility problems with Ruby 1.8.7.\n\n## 1.0.0 - 2012-03-13\n\n- The screaming fast Oj::Doc parser added.\n\n## 0.9.0 - 2012-03-05\n\n- Added support for circular references.\n\n## 0.8.0 - 2012-02-27\n\n- Auto creation of data classes when unmarshalling Objects if the Class is not defined\n\n## 0.7.0 - 2012-02-26\n\n- changed the object JSON format\n- serialized Ruby Objects can now be deserialized\n- improved performance testing\n\n## 0.6.0 - 2012-02-22\n\n- supports arbitrary Object dumping/serialization\n- to_hash() method called if the Object responds to to_hash and the result is converted to JSON\n- to_json() method called if the Object responds to to_json\n- almost any Object can be dumped, including Exceptions (not including Thread, Mutex and Objects that only make sense within a process)\n- default options have been added\n\n## 0.5.2 - 2012-02-19\n\n- Release 0.5.2 fixes encoding and float encoding.\n- This is the first release sith a version of 0.5 indicating it is only half done. Basic load() and dump() is supported for Hash, Array, NilClass, TrueClass, FalseClass, Fixnum, Float, Symbol, and String Objects.\n\n## 0.5.1 - 2012-02-19\n\n\n## 0.5 - 2012-02-19\n\n- This is the first release with a version of 0.5 indicating it is only half done. Basic load() and dump() is supported for Hash, Array, NilClass, TrueClass, FalseClass, Fixnum, Float, Symbol, and String Objects.\n"
        },
        {
          "name": "Gemfile",
          "type": "blob",
          "size": 0.28125,
          "content": "# frozen_string_literal: true\n\nsource 'https://rubygems.org'\n\ngemspec\n\ngroup :development do\n  gem 'minitest', '~> 5'\n  gem 'rake-compiler', '>= 0.9', '< 2.0'\n  gem 'rubocop', '~> 1.47', require: false\n  gem 'rubocop-minitest', '~> 0.28.0', require: false\n  gem 'test-unit', '~> 3.0'\nend\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.052734375,
          "content": "The MIT License (MIT)\n\nCopyright (c) 2012 Peter Ohler\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 4.3515625,
          "content": "# [![{}j](http://www.ohler.com/dev/images/oj_comet_64.svg)](http://www.ohler.com/oj) gem\n\n[![CI](https://github.com/ohler55/oj/actions/workflows/CI.yml/badge.svg)](https://github.com/ohler55/oj/actions/workflows/CI.yml)\n![Gem](https://img.shields.io/gem/v/oj.svg)\n![Gem](https://img.shields.io/gem/dt/oj.svg)\n[![TideLift](https://tidelift.com/badges/github/ohler55/oj)](https://tidelift.com/subscription/pkg/rubygems-oj?utm_source=rubygems-oj&utm_medium=referral&utm_campaign=readme)\n\nA *fast* JSON parser and Object marshaller as a Ruby gem.\n\nVersion 3.13 is out with a much faster parser (`Oj::Parser`) and option isolation.\n\n## Using\n\n```ruby\nrequire 'oj'\n\nh = { 'one' => 1, 'array' => [ true, false ] }\njson = Oj.dump(h)\n\n# json =\n# {\n#   \"one\":1,\n#   \"array\":[\n#     true,\n#     false\n#   ]\n# }\n\nh2 = Oj.load(json)\nputs \"Same? #{h == h2}\"\n# true\n```\n\n## Installation\n```\ngem install oj\n```\n\nor in Bundler:\n\n```\ngem 'oj'\n```\n\n## Rails and json quickstart\n\nSee the Quickstart sections of the [Rails](pages/Rails.md) and [json](pages/JsonGem.md) docs.\n\n## multi_json\n\nCode which uses [multi_json](https://github.com/intridea/multi_json)\nwill automatically prefer Oj if it is installed.\n\n## Support\n\n[Get supported Oj with a Tidelift Subscription.](https://tidelift.com/subscription/pkg/rubygems-oj?utm_source=rubygems-oj&utm_medium=referral&utm_campaign=readme) Security updates are [supported](https://tidelift.com/security).\n\n## Further Reading\n\nFor more details on options, modes, advanced features, and more follow these\nlinks.\n\n - [{file:Options.md}](pages/Options.md) for parse and dump options.\n - [{file:Modes.md}](pages/Modes.md) for details on modes for strict JSON compliance, mimicking the JSON gem, and mimicking Rails and ActiveSupport behavior.\n - [{file:JsonGem.md}](pages/JsonGem.md) includes more details on json gem compatibility and use.\n - [{file:Rails.md}](pages/Rails.md) includes more details on Rails and ActiveSupport compatibility and use.\n - [{file:Custom.md}](pages/Custom.md) includes more details on Custom mode.\n - [{file:Encoding.md}](pages/Encoding.md) describes the :object encoding format.\n - [{file:Compatibility.md}](pages/Compatibility.md) lists current compatibility with Rubys and Rails.\n - [{file:Advanced.md}](pages/Advanced.md) for fast parser and marshalling features.\n - [{file:Security.md}](pages/Security.md) for security considerations.\n - [{file:InstallOptions.md}](pages/InstallOptions.md) for install option.\n\n## Releases\n\nSee [{file:CHANGELOG.md}](CHANGELOG.md) and [{file:RELEASE_NOTES.md}](RELEASE_NOTES.md)\n\n## Links\n\n- *Documentation*: http://www.ohler.com/oj/doc, http://rubydoc.info/gems/oj\n\n- *GitHub* *repo*: https://github.com/ohler55/oj\n\n- *RubyGems* *repo*: https://rubygems.org/gems/oj\n\nFollow [@peterohler on Twitter](http://twitter.com/peterohler) for announcements and news about the Oj gem.\n\n#### Performance Comparisons\n\n - [Oj Strict Mode Performance](http://www.ohler.com/dev/oj_misc/performance_strict.html) compares Oj strict mode parser performance to other JSON parsers.\n\n - [Oj Compat Mode Performance](http://www.ohler.com/dev/oj_misc/performance_compat.html) compares Oj compat mode parser performance to other JSON parsers.\n\n - [Oj Object Mode Performance](http://www.ohler.com/dev/oj_misc/performance_object.html) compares Oj object mode parser performance to other marshallers.\n\n - [Oj Callback Performance](http://www.ohler.com/dev/oj_misc/performance_callback.html) compares Oj callback parser performance to other JSON parsers.\n\n#### Links of Interest\n\n - *Fast XML parser and marshaller on RubyGems*: https://rubygems.org/gems/ox\n\n - *Fast XML parser and marshaller on GitHub*: https://github.com/ohler55/ox\n\n - [Need for Speed](http://www.ohler.com/dev/need_for_speed/need_for_speed.html) for an overview of how Oj::Doc was designed.\n\n - *OjC, a C JSON parser*: https://www.ohler.com/ojc also at https://github.com/ohler55/ojc\n\n - *Agoo, a high performance Ruby web server supporting GraphQL on GitHub*: https://github.com/ohler55/agoo\n\n - *Agoo-C, a high performance C web server supporting GraphQL on GitHub*: https://github.com/ohler55/agoo-c\n\n - *oj-introspect, an example of creating an Oj parser extension in C*: https://github.com/meinac/oj-introspect\n\n#### Contributing\n\n+ Provide a Pull Request off the `develop` branch.\n+ Report a bug\n+ Suggest an idea\n+ Code is now formatted with the clang-format tool with the configuration file in the root of the repo.\n"
        },
        {
          "name": "RELEASE_NOTES.md",
          "type": "blob",
          "size": 2.2001953125,
          "content": "# RELEASE NOTES\n\nThe release notes here are organized by release. For a list of changes\nsee the See [{file:CHANGELOG.md}](CHANGELOG.md) file. In this file are\nthe steps to take to aid in keeping things rolling after updating to\nthe latest version.\n\n## 3.13.7\n\nThe default for JSON when mimicked by Oj is now to set\n`:allow_invalid_unicode`. To change that behavior JSON.load, set that\noption to false.\n\n## 3.13.x\n\nThis release included a new cache that performs better than the\nearlier cache and a new high performance parser.\n\n### Cache\n\nThe new cache includes a least recently used expiration to reduce\nmemory use. The cache is also self adjusting and will expand as needed\nfor better performance. It also handles Hash keys and string values\nwith two options, `:cache_keys`, a boolean and `:cache_str` an\ninteger. The `:cache_str` if set to more than zero is the limit for\nthe length of string values to cache. The maximum value is 35 which\nallows strings up to 34 bytes to be cached.\n\nOne interesting aspect of the cache is not so much the string caching\nwhich performs similar to the Ruby intern functions but the caching of\nsymbols and object attribute names. There is a significant gain for\nsymbols and object attributes.\n\nIf the cache is not desired then setting the default options to turn\nit off can be done with this line:\n\n``` ruby\nOj.default_options = { cache_keys: false, cache_str: 0 }\n```\n\n### Oj::Parser\n\nThe new parser uses a different core that follows the approach taken\nby [OjC](https://github.com/ohler55/ojc) and\n[OjG](https://github.com/ohler55/ojg). It also takes advantage of the\nbulk Array and Hash functions. Another issue the new parser addresses\nis option management. Instead of a single global default_options each\nparser instance maintains it's own options.\n\nThere is a price to be paid when using the Oj::Parser. The API is not\nthe same the older parser. A single parser can only be used in a\nsingle thread. This allows reuse of internal buffers for additional\nimprovements in performance.\n\nThe performane advantage of the Oj::Parse is that it is more than 3\ntimes faster than the Oj::compat_load call and 6 times faster than the\nJSON gem.\n\n### Dump Performance\n\nThanks to Watson1978 Oj.dump also received a speed boost.\n"
        },
        {
          "name": "Rakefile",
          "type": "blob",
          "size": 1.6015625,
          "content": "#!/usr/bin/env rake\n# frozen_string_literal: true\n\nrequire 'bundler/gem_tasks'\nrequire 'rake/extensiontask'\nrequire 'rake/testtask'\n\nRake::ExtensionTask.new('oj') do |ext|\n  ext.lib_dir = 'lib/oj'\nend\n\n=begin\nRake::TestTask.new(:test) do |test|\n  test.libs << 'test'\n  test.pattern = 'test/test_*.rb'\n  test.options = \"-v\"\nend\n=end\n\ntask :test_all => [:clean, :compile] do\n  $stdout.flush\n  exitcode = 0\n  status = 0\n\n  cmds = 'bundle exec ruby test/tests.rb -v && bundle exec ruby test/tests_mimic.rb -v && bundle exec ruby test/tests_mimic_addition.rb -v'\n\n  $stdout.syswrite \"\\n#{'#'*90}\\n#{cmds}\\n\"\n  Bundler.with_original_env do\n    status = system(cmds)\n  end\n  exitcode = 1 unless status\n\n  Dir.glob('test/json_gem/*_test.rb').each do |file|\n    cmd = \"bundle exec ruby -Itest #{file}\"\n    $stdout.syswrite \"\\n#{'#'*90}\\n#{cmd}\\n\"\n    Bundler.with_original_env do\n      ENV['REAL_JSON_GEM'] = '1'\n      status = system(cmd)\n    end\n    exitcode = 1 unless status\n  end\n\n  Rake::Task['test'].invoke\n  exit(1) if exitcode == 1\nend\n\ntask :default => :test_all\n\nbegin\n  require 'rails/version'\n\n  Rake::TestTask.new \"activesupport#{Rails::VERSION::MAJOR}\" do |t|\n    t.libs << 'test'\n    t.pattern = \"test/activesupport#{Rails::VERSION::MAJOR}/*_test.rb\"\n    t.warning = true\n    t.verbose = true\n  end\n  Rake::Task[:test_all].enhance [\"activesupport#{Rails::VERSION::MAJOR}\"]\n\n  Rake::TestTask.new 'activerecord' do |t|\n    t.libs << 'test'\n    t.pattern = 'test/activerecord/*_test.rb'\n    t.warning = true\n    t.verbose = true\n  end\n  Rake::Task[:test_all].enhance ['activerecord']\nrescue LoadError => e\n  puts \"Rake failed #{e}\"\nend\n"
        },
        {
          "name": "SECURITY.md",
          "type": "blob",
          "size": 0.490234375,
          "content": "# Security Policy\n\n## Supported Versions\n\nUse this section to tell people about which versions of your project are\ncurrently being supported with security updates.\n\n| Version | Supported          |\n| ------- | ------------------ |\n| 3.9.2   | :white_check_mark: |\n\n## Reporting a Vulnerability\n\nReport a vulnerability by creating an issue.\n\nTell them where to go, how often they can expect to get an update on a\nreported vulnerability, what to expect if the vulnerability is accepted or\ndeclined, etc.\n"
        },
        {
          "name": "_config.yml",
          "type": "blob",
          "size": 0.0244140625,
          "content": "theme: jekyll-theme-slate"
        },
        {
          "name": "build_test.sh",
          "type": "blob",
          "size": 0.74609375,
          "content": "#!/bin/sh\n\n# 1.8.7-p374\\\n\nfor ruby in \\\n 1.9.3-p551\\\n 2.1.5\\\n 2.2.3\\\n 2.4.0-preview1\\\n 2.3.3\ndo\n    echo \"\\n********************************************************************************\"\n    echo \"Building $ruby\\n\"\n    cd ext/oj\n    rbenv local $ruby\n    ruby extconf.rb\n    make\n\n    echo \"\\nRunning tests for $ruby\"\n    cd ../../test\n    rbenv local $ruby\n    cd isolated\n    rbenv local $ruby\n    cd ..\n    ./test_all.sh\n    cd ..\n\n    echo \"\\n\"\ndone\n\nPATH=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin:$PATH\necho \"\\n********************************************************************************\"\necho \"Building OS X Ruby\\n\"\ncd ext/oj\nruby extconf.rb\nmake\n\necho \"\\nRunning tests for OS X Ruby\"\ncd ../../test\n./test_all.sh\ncd ..\n\necho \"\\n\"\n"
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "ext",
          "type": "tree",
          "content": null
        },
        {
          "name": "gemfiles",
          "type": "tree",
          "content": null
        },
        {
          "name": "lib",
          "type": "tree",
          "content": null
        },
        {
          "name": "notes",
          "type": "blob",
          "size": 3.0888671875,
          "content": ";; -*- mode: outline; outline-regexp: \" *[-\\+]\"; indent-tabs-mode: nil; fill-column: 120 -*-\n\n^c^d hide subtree\n^c^s show subtree\n\n- skip_null_byte => omit_null_byte\n - and move to dump parameters\n\n\n- stream writes\n - dump.c:685\n - stream_writer.c\n - use io C calls instead\n\n - future\n  - object mode delegate\n\n- future\n - usual delegate\n   - detect_time (maybe)\n - parser\n  - read file in separate thread\n  - object delegate\n\n- new parser reasons or design notes\n - parser itself is faster due to reduced branching\n - bulk array create - 15x\n - bulk hash - 3x\n - reuse of memory\n - better control over options\n - auto rehash of cache\n - memory use when reading from a file\n\n\n- add default_options[]= method\n\n- big decimal\n - just in custom mode, maybe in strict?\n\n - encode_big_decimal_as_string\n  - add as fix for rails change\n\n- rails\n\n - Process::Status\n - ActiveSupport::TimeWithZone\n - ActiveModel::Errors\n - ActiveSupport::Multibyte::Chars\n - ActiveRecord::Relation\n\n- future\n - option to allow invalid unicode through\n - unit tests for 32 bit - test_float_parse\n  - look at RUBY_PLATFORM maybe?\n - look at env var for OJ_DEBUG when doing ruby extconf.rb\n - add printf for keys spots in parse and dump\n\n- invalid character option\n - don't check options\n  - replace with best attempt such as \\ud83d => \\xED\\xA0\\xBD\n  - that would be the normal replacement\n - allow_invalid_unicode\n\n---------------------------\nTried a separate thread for the parser and the results were poor. The parsing is\n10% to 15% of the total so splitting ruby calls and c does not help much and the\noverhead of swapping data was too high. It was not possible to split ruby calls\ninto both threads due to not getting a lock on the ruby environment for object\ncreation.\n\n----------------\ntodo\n- #570 - complain in strict mode about leading + or trailing .\n- #569 - < and > are not escaped in compat mode\n - ruby -r oj -e 'puts \"#{Oj::VERSION} -> #{Oj.dump(\"<\", {mode: :compat, escape_mode: :unicode_xss})}\"'\n    3.7.5 -> \"<\"\n    3.7.4 -> \"\\u003c\"\n- #568 - We're still at Rails 4.2 so maybe all of this is outdated, but still.\nIt's documented that :bigdecimal_as_decimal isn't available for mode: :rails. However, if I run it like this:\n\nOj.optimize_rails\nOj.default_options = { mode: :rails, bigdecimal_as_decimal: true }\n\nIt does the job - Oj dumps BigDecimal as number.\nIf I later add bigdecimal_as_decimal: true explicitly in the dump it works for single number dump, but not for Hash.\n\nOj.dump(BigDecimal('1.2')) # => \"1.2\"\nOj.dump({a: BigDecimal('1.2')}) # => \"{\\\"a\\\":1.2}\"\nOj.dump(BigDecimal('1.2'), bigdecimal_as_decimal: true) # => \"1.2\"\nOj.dump({a: BigDecimal('1.2')}, bigdecimal_as_decimal: true) # => \"{\\\"a\\\":\\\"1.2\\\"}\" - unexpected\n\nAlso when I remove running Oj.optimize_rails, Oj ignores bigdecimal_as_decimal and dumps BigDecimal as string.\n\nCurrently, it works OK for me, just wanted to check what's the expected behavior and if it should be aware when upgrading Rails or Oj.\n\n- #567 - irb(main):001:0> Oj.dump(Time.utc(2000, 1, 1, 1, 0, 0, 0), mode: :compat)\n    => \"\\\"2000-01-01 01:00:00 UTC\\\"\"\n  - missing fractional part in custom with second_precision id 0 fraction\n"
        },
        {
          "name": "oj.gemspec",
          "type": "blob",
          "size": 1.4658203125,
          "content": "# frozen_string_literal: true\n\nrequire 'date'\nrequire File.join(File.dirname(__FILE__), 'lib/oj/version')\n\nGem::Specification.new do |s|\n  s.name = 'oj'\n  s.version = Oj::VERSION\n  s.authors = 'Peter Ohler'\n  s.email = 'peter@ohler.com'\n  s.homepage = 'http://www.ohler.com/oj'\n  s.metadata = {\n    'bug_tracker_uri' => 'https://github.com/ohler55/oj/issues',\n    'changelog_uri' => 'https://github.com/ohler55/oj/blob/master/CHANGELOG.md',\n    'documentation_uri' => 'http://www.ohler.com/oj/doc/index.html',\n    'homepage_uri' => 'http://www.ohler.com/oj/',\n    'source_code_uri' => 'https://github.com/ohler55/oj',\n    'wiki_uri' => 'https://github.com/ohler55/oj/wiki',\n    'rubygems_mfa_required' => 'true'\n  }\n  s.summary = 'A fast JSON parser and serializer.'\n  s.description = 'The fastest JSON parser and object serializer.'\n  s.licenses = ['MIT']\n  s.required_ruby_version = '>= 2.7'\n\n  s.files = Dir['{lib,ext,test}/**/*.{rb,h,c}'] + ['LICENSE', 'README.md', 'CHANGELOG.md', 'RELEASE_NOTES.md'] + Dir['pages/*.md']\n  s.extensions = ['ext/oj/extconf.rb']\n\n  s.extra_rdoc_files = ['README.md', 'LICENSE', 'CHANGELOG.md', 'RELEASE_NOTES.md'] + Dir['pages/*.md']\n  s.rdoc_options = ['--title', 'Oj', '--main', 'README.md']\n\n  s.add_runtime_dependency 'bigdecimal', '>= 3.0'\n  s.add_runtime_dependency 'ostruct', '>= 0.2'\n  s.add_development_dependency 'minitest', '~> 5'\n  s.add_development_dependency 'rake-compiler', '>= 0.9', '< 2.0'\n  s.add_development_dependency 'test-unit', '~> 3.0'\nend\n"
        },
        {
          "name": "pages",
          "type": "tree",
          "content": null
        },
        {
          "name": "samples",
          "type": "tree",
          "content": null
        },
        {
          "name": "tea.yaml",
          "type": "blob",
          "size": 0.123046875,
          "content": "# https://tea.xyz/what-is-this-file\n---\nversion: 1.0.0\ncodeOwners:\n  - '0xc21Bc159777F9Ee363BCE126F958a09BFCF44bE0'\nquorum: 1\n"
        },
        {
          "name": "test",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}