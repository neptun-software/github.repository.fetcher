{
  "metadata": {
    "timestamp": 1736709990764,
    "page": 565,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjU3MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "bjornbytes/lovr",
      "stars": 2172,
      "defaultBranch": "dev",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.0263671875,
          "content": ".tup\n.obj\nbin\nbuild*\n*.*.h\n"
        },
        {
          "name": ".gitmodules",
          "type": "blob",
          "size": 0.994140625,
          "content": "[submodule \"deps/glfw\"]\n\tpath = deps/glfw\n\turl = https://github.com/glfw/glfw\n[submodule \"deps/lua\"]\n\tpath = deps/lua\n\turl = https://github.com/lua/lua\n[submodule \"deps/msdfgen\"]\n\tpath = deps/msdfgen\n\turl = https://github.com/bjornbytes/msdfgen\n[submodule \"deps/luajit\"]\n\tpath = deps/luajit\n\turl = https://github.com/WohlSoft/LuaJIT\n[submodule \"deps/openxr\"]\n\tpath = deps/openxr\n\turl = https://github.com/khronosgroup/openxr-sdk\n[submodule \"deps/glslang\"]\n\tpath = deps/glslang\n\turl = https://github.com/KhronosGroup/glslang\n[submodule \"deps/vulkan-headers\"]\n\tpath = deps/vulkan-headers\n\turl = https://github.com/KhronosGroup/Vulkan-Headers\n[submodule \"plugins/lua-enet\"]\n\tpath = plugins/lua-enet\n\turl = https://github.com/bjornbytes/lua-enet\n[submodule \"plugins/lovr-http\"]\n\tpath = plugins/lovr-http\n\turl = https://github.com/bjornbytes/lovr-http\n[submodule \"deps/tracy\"]\n\tpath = deps/tracy\n\turl = https://github.com/wolfpld/tracy\n[submodule \"deps/joltc\"]\n\tpath = deps/joltc\n\turl = https://github.com/amerkoleci/joltc\n"
        },
        {
          "name": "CHANGES.md",
          "type": "blob",
          "size": 66.4638671875,
          "content": "Changelog\n===\n\ndev\n---\n\n### Add\n\n- Add `Layer` object, `lovr.headset.newLayer`, and `lovr.headset.get/setLayers`.\n- Add `lovr.headset.get/setFoveation`.\n- Add `t.headset.mask`.\n- Add back `lovr.headset.isMounted` and the `lovr.mount` callback.\n- Add `stylus` Device, `nib` DeviceButton, and `nib` DeviceAxis.\n- Add support for Logitech MX Ink input.\n- Add `t.headset.controllerskeleton` to control how controllers return hand tracking data.\n- Add `controller` field to the table returned by `lovr.headset.getSkeleton`.\n- Add support for BMFont in `Font` and `Rasterizer`.\n- Add `File` object and `lovr.filesystem.newFile`.\n- Add `Pass:polygon`.\n- Add `--watch` CLI flag, `lovr.filechanged` event, and `lovr.filesystem.watch/unwatch`.\n- Add `--simulator` CLI flag to force use of simulator headset driver.\n- Add `lovr.headset.stop`, `lovr.headset.isActive`, and `t.headset.start`.\n- Add `t.headset.debug` to enable additional messages from the VR runtime.\n- Add `lovr.headset.getFeatures`.\n- Add `Model:resetBlendShapes`.\n- Add `lovr.system.isWindowVisible` and `lovr.system.isWindowFocused`.\n- Add `lovr.system.wasMousePressed` and `lovr.system.wasMouseReleased`.\n- Add `lovr.system.get/setClipboardText`.\n- Add `KeyCode`s for numpad keys.\n- Add support for `uniform` variables in shader code.\n- Add support for cubemap array textures.\n- Add support for transfer operations on texture views.\n- Add support for nesting texture views (creating a view of a view).\n- Add `sn10x3` `DataType`.\n- Add support for `d24` texture format.\n- Add support for `SampleID`, `SampleMaskIn`, `SampleMask`, and `SamplePosition` in pixel shaders.\n- Add `Quat:get/setEuler`.\n- Add `lovr.system.openConsole` (for internal Lua code).\n- Add `lovr.filesystem.getBundlePath` (for internal Lua code).\n- Add `lovr.filesystem.setSource` (for internal Lua code).\n- Add table support to `Channel:push`.\n- Add `lovr.thread.newChannel`.\n- Add `t.thread.workers` to configure number of worker threads.\n- Add support for declaring objects as to-be-closed variables in Lua 5.4.\n- Add variant of `lovr.physics.newWorld` that takes a table of settings.\n- Add `World:interpolate`.\n- Add `World:get/setCallbacks` and `Contact` object.\n- Add `World:getColliderCount`.\n- Add `World:getJointCount` and `World:getJoints`.\n- Add `World:shapecast`.\n- Add `World:overlapShape`.\n- Add `Collider:get/setGravityScale`.\n- Add `Collider:is/setContinuous`.\n- Add `Collider:get/setDegreesOfFreedom`.\n- Add `Collider:applyLinearImpulse` and `Collider:applyAngularImpulse`.\n- Add `Collider:moveKinematic`.\n- Add `Collider:getShape`.\n- Add `Collider:is/setSensor` (replaces `Shape:is/setSensor`).\n- Add `Collider:get/setInertia`.\n- Add `Collider:get/setCenterOfMass`.\n- Add `Collider:get/setAutomaticMass`.\n- Add `Collider:resetMassData`.\n- Add `Collider:is/setEnabled`.\n- Add `ConvexShape`.\n- Add `WeldJoint`.\n- Add `ConeJoint`.\n- Add `Joint:getForce` and `Joint:getTorque`.\n- Add `Joint:get/setPriority`.\n- Add `Joint:isDestroyed`.\n- Add `DistanceJoint:get/setLimits`.\n- Add `:get/setSpring` to `DistanceJoint`, `HingeJoint`, and `SliderJoint`.\n- Add `HingeJoint:get/setFriction` and `SliderJoint:get/setFriction`.\n- Add `SliderJoint:getAnchors`.\n- Add `Shape:raycast` and `Shape:containsPoint`.\n- Add `Shape:get/setDensity`.\n- Add `Shape:getMass/Volume/Inertia/CenterOfMass`.\n- Add `Shape:get/setOffset`.\n- Add motor support to `HingeJoint` and `SliderJoint`.\n- Add support for creating a `MeshShape` from a `ModelData`.\n- Add `Texture:getLabel`, `Shader:getLabel`, and `Pass:getLabel`.\n- Add `Shader:hasVariable`.\n- Add `lovr.headset.getFeatures`.\n- Add `lovr.headset.getHandles`.\n- Add `raw` flag to `lovr.graphics.newShader`.\n- Add `border` `WrapMode`.\n- Add support for `layout(scalar)` buffers and `packedBuffers` graphics feature.\n\n### Change\n\n- Change nogame screen to be bundled as a fused zip archive.\n- Change `Mesh:setMaterial` to also take a `Texture`.\n- Change shader syntax to no longer require set/binding numbers for buffer/texture variables.\n- Change `Texture:getFormat` to also return whether the texture is linear or sRGB.\n- Change `Texture:setPixels` to allow copying between textures with different formats.\n- Change `Readback:getImage` and `Texture:getPixels` to return sRGB images when the source Texture is sRGB.\n- Change `lovr.graphics.newTexture` to use a layer count of 6 when type is `cube` and only width/height is given.\n- Change `lovr.graphics.newTexture` to default mipmap count to 1 when an Image is given with a non-blittable format.\n- Change `lovr.graphics.newTexture` to error if mipmaps are requested and an Image is given with a non-blittable format.\n- Change `TextureFeature` to merge `sample` with `filter`, `render` with `blend`, and `blitsrc`/`blitdst` into `blit`.\n- Change headset simulator movement to slow down when holding the control key.\n- Change headset simulator to use `t.headset.supersample`.\n- Change `lovr.graphics.compileShader` to take/return multiple stages.\n- Change maximum number of physics tags from 16 to 31.\n- Change `TerrainShape` to require square dimensions.\n- Change `MeshShape` constructors to accept a `MeshShape` to reuse data from.\n- Change `MeshShape` constructors to take an optional scale to apply to the vertices.\n- Change `Buffer:setData` to use more consistent rules to read data from tables.\n- Change `World:queryBox/querySphere` to perform coarse AABB collision detection (use `World:overlapShape` for an exact test).\n- Change `World:queryBox/querySphere` to take an optional set of tags to include/exclude.\n- Change `World:queryBox/querySphere` to return the first collider detected, when the callback is nil.\n- Change `World:queryBox/querySphere` to return nil when a callback is given.\n- Change `World:raycast` to take a set of tags to allow/ignore.\n- Change `World:raycast` callback to be optional (if nil, the closest hit will be returned).\n- Change `World:raycast` to also return the triangle that was hit on MeshShapes.\n- Change physics queries to report colliders in addition to shapes.\n- Change `tostring` on objects to also include their pointers.\n- Change `desktop` HeadsetDriver to be named `simulator`.\n- Change `--graphics-debug` CLI flag to be named `--debug`.\n- Change `--version` and `lovr.getVersion` to also return the git commit hash.\n- Change `Pass:setViewport/Scissor` to be per-draw state instead of per-pass.\n- Change `Image:get/set/mapPixel` to support `r16f`, `rg16f`, and `rgba16f`.\n- Change `Image:getPixel` to return 1 for alpha when the format doesn't have an alpha component.\n- Change stack size of `state` stack (used with `Pass:push/pop`) from 4 to 8.\n- Change `lovr.focus` and `lovr.visible` to also get called for window events.\n- Change `lovr.focus` and `lovr.visible` to have an extra parameter for the display type.\n\n### Fix\n\n- Fix `t.headset.submitdepth` to actually submit depth.\n- Fix depth write when depth testing is disabled.\n- Fix \"morgue overflow\" error when creating or destroying large amounts of textures at once.\n- Fix `Texture:getType` when used with texture views.\n- Fix possible negative `dt` in lovr.update when restarting with the simulator.\n- Fix issue where `Collider`/`Shape`/`Joint` userdata wouldn't get garbage collected.\n- Fix OBJ triangulation for faces with more than 4 vertices.\n- Fix possible crash when using vectors in multiple threads.\n- Fix possible crash with `Blob:getName`.\n- Fix issue when sampling from depth-stencil textures.\n- Fix bug when rendering meshes from `Model:getMesh`.\n- Fix bug with `Curve:slice` when curve has more than 4 points.\n- Fix bug with `hand/*/pinch` and `hand/*/poke` device poses.\n- Fix bug when loading glTF models that use the `KHR_texture_transform` extension.\n\n### Deprecate\n\n- Deprecate `Texture:getSampleCount`.\n- Deprecate `World:get/setTightness` (use `stabilization` option when creating World).\n- Deprecate `World:get/setLinearDamping` (use `Collider:get/setLinearDamping`).\n- Deprecate `World:get/setAngularDamping` (use `Collider:get/setAngularDamping`).\n- Deprecate `World:is/setSleepingAllowed` (use `allowSleep` option when creating World).\n- Deprecate `World:get/setStepCount` (use `positionSteps`/`velocitySteps` option when creating World).\n- Deprecate `Collider:is/setGravityIgnored` (use `Collider:get/setGravityScale`).\n\n### Remove\n\n- Remove `lovr.headset.getOriginType` (use `lovr.headset.isSeated`).\n- Remove `lovr.headset.getDisplayFrequency` (renamed to `lovr.headset.getRefreshRate`).\n- Remove `lovr.headset.getDisplayFrequencies` (renamed to `lovr.headset.getRefreshRates`).\n- Remove `lovr.headset.setDisplayFrequency` (renamed to `lovr.headset.setRefreshRate`).\n- Remove `lovr.graphics.getBuffer` (use `lovr.graphics.newBuffer`).\n- Remove variant of `lovr.graphics.newBuffer` that takes length first (format is first now).\n- Remove `location` key for Buffer fields (use `name`).\n- Remove `Buffer:isTemporary`.\n- Remove `Buffer:getPointer` (renamed to `Buffer:mapData`).\n- Remove `lovr.graphics.getPass` (use `lovr.graphics.newPass`).\n- Remove `Pass:getType` (passes support both render and compute now).\n- Remove `Pass:getTarget` (renamed to `Pass:getCanvas`).\n- Remove `Pass:getSampleCount` (`Pass:getCanvas` returns sample count).\n- Remove variant of `Pass:send` that takes a binding number instead of a variable name.\n- Remove `Texture:newView` (renamed to `lovr.graphics.newTextureView`).\n- Remove `Texture:isView` and `Texture:getParent`.\n- Remove `Shape:setPosition`, `Shape:setOrientation`, and `Shape:setPose` (use `Shape:setOffset`).\n- Remove `Shape:is/setSensor` (use `Collider:is/setSensor`).\n- Remove `World:overlaps/computeOverlaps/collide/getContacts` (use `World:setCallbacks`).\n- Remove `BallJoint:setAnchor`.\n- Remove `DistanceJoint:setAnchors`.\n- Remove `HingeJoint:setAnchor`.\n- Remove `BallJoint:get/setResponseTime` and `BallJoint:get/setTightness`.\n- Remove `DistanceJoint:get/setResponseTime` and `DistanceJoint:get/setTightness` (use `:setSpring`).\n- Remove `DistanceJoint:get/setDistance` (renamed to `:get/setLimits`).\n- Remove `HingeJoint:get/setUpper/LowerLimit` (use `:get/setLimits`).\n- Remove `SliderJoint:get/setUpper/LowerLimit` (use `:get/setLimits`).\n- Remove `Collider:getLocalCenter` (renamed to `Collider:getCenterOfMass`).\n- Remove `Shape:getMassData` (split into separate getters).\n- Remove `shaderConstantSize` limit from `lovr.graphics.getLimits`.\n- Remove `Pass:getViewport` and `Pass:getScissor`.\n\nv0.17.1 - 2024-03-12\n---\n\n### Change\n\n- Change file permissions for files and directories created by `lovr.filesystem` (so ADB can access them on Android 12+).\n- Change `Pass:sphere` to error when segment count is too small.\n- Change `Buffer:setData` to error when copying within a single Buffer and the source and destination ranges overlap.\n\n### Fix\n\n- Fix LÖVR failing to start on Oculus Quest v62+.\n- Fix `Pass:skybox` to render cubemaps with the correct X/Z orientation.\n- Fix depth write when depth testing is disabled.\n- Fix `lovr.graphics.newModel` to support empty GLB models.\n- Fix `lovr.graphics.newModel` to support models without any vertices.\n- Fix bitangent sign in `TangentMatrix` builtin.\n- Fix shader #includes to error when including a file that doesn't exist.\n- Fix `lovr.quit` to not get called twice when canceling quit.\n- Fix GPU error when texture had only `transfer` usage.\n- Fix rare crash when calling vector methods.\n- Fix `Model:getMesh`.\n\nv0.17.0 - 2023-10-14\n---\n\n### Add\n\n#### General\n\n- Add `enet` plugin.\n- Add `http` plugin.\n- Add `utf8` module.\n- Add `:type` method to all objects and vectors.\n- Add `--graphics-debug` command line option, which sets `t.graphics.debug` to true.\n\n#### Audio\n\n- Add `lovr.audio.getDevice`.\n\n#### Data\n\n- Add `Image:mapPixel`.\n- Add a variant of `Blob:getString` that takes a byte range.\n- Add `Blob:getI8/getU8/getI16/getU16/getI32/getU32/getF32/getF64`.\n\n#### Filesystem\n\n- Add argument to `lovr.filesystem.load` to restrict chunks to text/binary.\n\n#### Graphics\n\n- Add `Pass:roundrect`.\n- Add variant of `Pass:cone` that takes two `vec3` endpoints.\n- Add variant of `Pass:draw` that takes a `Texture`.\n- Add `Pass:setViewCull` to enable frustum culling.\n- Add `Model:getBlendShapeWeight`, and `Model:setBlendShapeWeight`.\n- Add `Model(Data):getBlendShapeCount`, `Model(Data):getBlendShapeName`.\n- Add support for animated blend shape weights in Model animations.\n- Add support for arrays, nested structs, and field names to Buffer formats.\n- Add `Shader:getBufferFormat`.\n- Add back `Mesh` object (sorry!).\n- Add `Model:clone`.\n- Add `materials` flag to `lovr.graphics.newModel`.\n- Add `lovr.graphics.isInitialized` (mostly internal).\n- Add support for using depth textures in multisampled render passes.\n- Add `depthResolve` feature to `lovr.graphics.getFeatures`.\n- Add a variant of `Texture:newView` that creates a 2D slice of a layer/mipmap of a texture.\n- Add a variant of `Pass:send` that takes tables for uniform buffers.\n- Add `Buffer:getData` and `Buffer:newReadback`.\n- Add `Texture:getPixels/setPixels/clear/newReadback/generateMipmaps`.\n- Add support for stepping through shaders in e.g. RenderDoc when `t.graphics.debug` is set.\n- Add `lovr.graphics.is/setTimingEnabled` to record GPU durations for each Pass object.\n- Add `lovr.graphics.newPass`.\n- Add `Pass:setCanvas` and `Pass:setClear`.\n- Add `Pass:getStats`.\n- Add `Pass:reset`.\n- Add `Pass:getScissor` and `Pass:getViewport`.\n- Add `Pass:barrier`.\n- Add `Pass:beginTally/finishTally` and `Pass:get/setTallyBuffer`.\n- Add support for `#include` in shader code.\n\n#### Headset\n\n- Add `lovr.headset.getPassthrough/setPassthrough/getPassthroughModes`.\n- Add support for more headsets in Android APKs  (Quest, Pico, Vive Focus all work).\n- Add support for controller input on Pico Neo 3 and Pico Neo 4 devices.\n- Add support for controller input on Magic Leap 2.\n- Add `hand/*/pinch`, `hand/*/poke`, and `hand/*/grip` Devices.\n- Add support for using `lovr.headset` when `lovr.graphics` is disabled, on supported runtimes.\n- Add support for `elbow/left` and `elbow/right` poses on Ultraleap hand tracking.\n- Add `lovr.headset.getDirection`.\n- Add `lovr.headset.isVisible` and `lovr.visible` callback.\n- Add `lovr.recenter` callback.\n- Add `floor` Device.\n- Add `t.headset.seated` and `lovr.headset.isSeated`.\n- Add `lovr.headset.stopVibration`.\n- Add `radius` fields to joint tables returned by `lovr.headset.getSkeleton`.\n- Add support for \"sprinting\" in the headset simulator using the shift key.\n\n#### Math\n\n- Add capitalized globals for creating permanent vectors (`Vec2`, `Vec3`, `Vec4`, `Quat`, `Mat4`).\n- Add `Vec3:transform`, `Vec4:transform`, and `Vec3:rotate`.\n- Add vector constants (`vec3.up`, `vec2.one`, `quat.identity`, etc.).\n- Add `Mat4:getTranslation/getRotation/getScale/getPose`.\n- Add variant of `Vec3:set` that takes a `Quat`.\n- Add `Mat4:reflect`.\n\n#### Physics\n\n- Add `TerrainShape`.\n- Add `World:queryBox` and `World:querySphere`.\n- Add `World:getTags`.\n- Add `Shape:get/setPose`.\n- Add missing `lovr.physics.newMeshShape` function.\n- Add `Collider:isDestroyed`.\n\n#### System\n\n- Add `lovr.system.wasKeyPressed/wasKeyReleased`.\n- Add `lovr.system.getMouseX`, `lovr.system.getMouseY`, and `lovr.system.getMousePosition`.\n- Add `lovr.system.isMouseDown`.\n- Add `lovr.mousepressed`, `lovr.mousereleased`, `lovr.mousemoved`, and `lovr.wheelmoved` callbacks.\n- Add `lovr.system.has/setKeyRepeat`.\n\n#### Thread\n\n- Add support for vectors and lightuserdata with `Channel:push` and `Channel:pop`.\n\n### Change\n\n- Change `lovr.graphics.submit` to no longer invalidate Pass objects.\n- Change vector constructors to be callable metatables (allows adding custom methods).\n- Change max size of vector pool to hold 16 million numbers instead of 64 thousand.\n- Change `Pass:setBlendMode`/`Pass:setColorWrite` to take an optional attachment index.\n- Change OpenXR driver to throttle update loop when headset session is idle.\n- Change `lovr.graphics.newModel` to work when the asset references paths starting with `./`.\n- Change `lovr.graphics.newModel` to error when the asset references paths starting with `/`.\n- Change `lovr.graphics.newBuffer` to take format first instead of length/data.\n- Change `Pass:setStencilWrite` to only set the \"stencil pass\" action when given a single action, instead of all 3.\n- Change `lovr.graphics` to show a message box on Windows when Vulkan isn't supported.\n- Change plugin loader to call `JNI_OnLoad` on Android so plugins can use JNI.\n- Change `t.headset.overlay` to also support numeric values to control overlay sort order.\n- Change `World:isCollisionEnabledBetween` to take `nil`s, which act as wildcard tags.\n- Change `Mat4:__tostring` to print matrix components.\n- Change `World:raycast` to prevent subsequent checks when the callback returns `false`.\n- Change `lovr.system.isKeyDown` to take multiple keys.\n- Change `lovr.headset.isDown/isTouched` to return nil instead of nothing.\n- Change `lovr.headset.getTime` to always start at 0 to avoid precision issues.\n- Change Pass viewport and scissor to apply to all draws in the Pass, instead of per-draw.\n- Change nogame/error screen to use a transparent background on AR/passthrough headsets.\n- Change VR simulator to use projected mouse position for hand pose (scroll controls distance).\n- Change `lovr.headset.getDriver` to also return the OpenXR runtime name.\n- Change `pitchable` flag in `lovr.audio.newSource` to default to true.\n- Change `Buffer:setData`, `Buffer:clear`, and `Buffer:getPointer` to work on permanent Buffers.\n- Change `lovr.timer.sleep` to have higher precision on Windows.\n- Change `lovr.headset.animate` to no longer require a `Device` argument (current variant is deprecated).\n\n### Fix\n\n- Fix `lovr.physics.newBoxShape` always creating a cube.\n- Fix several issues related to VRAM leaks when creating Textures.\n- Fix issue on Linux where the Vulkan library wouldn't get loaded properly.\n- Fix macOS to not require the Vulkan SDK to be installed.\n- Fix recentering on Quest.\n- Fix headset mirror window to properly render in mono when a VR headset is connected.\n- Fix window size not updating on resize or on highdpi displays.\n- Fix `MeshShape` not working properly with some OBJ models.\n- Fix `Model:getNodeScale` to properly return the scale instead of the rotation.\n- Fix `Mat4:set` and `Mat4` constructors to properly use TRS order when scale is given.\n- Fix `lovr.graphics.newShader` to work with `nil` shader code (uses `unlit` shader).\n- Fix crash when `t.graphics.debug` is set but the validation layers aren't installed.\n- Fix a few memory leaks with Readbacks, Fonts, and compute Shaders.\n- Fix `Pass:setProjection` to use an infinite far plane by default.\n- Fix `Texture:hasUsage`.\n- Fix `Pass:points` / `Pass:line` to work with temporary vectors.\n- Fix `lovr.event.quit` to properly exit on Android/Quest.\n- Fix mounted zip paths sometimes not working with `lovr.filesystem.getDirectoryItems`.\n- Fix issue where temporary vectors didn't work in functions that accept colors.\n- Fix crash when rendering multiple identical torus shapes in the same Pass.\n- Fix `lovr.graphics.newShader` to error properly if the push constants block is too big.\n- Fix default `lovr.log` to not print second `string.gsub` result.\n- Fix issue where `lovr.data.newImage` wouldn't initialize empty `Image` object pixels to zero.\n- Fix `Model:getMaterial` to work when given a string.\n- Fix issue where `Vec3:angle` would sometimes return NaNs.\n- Fix OpenXR driver when used with AR headsets.\n- Fix vertex tangents (previously they only worked if the `normalMap` shader flag was set).\n- Fix error when minimizing the desktop window on Windows.\n- Fix `DistanceJoint:getAnchors`.\n- Fix issue where `Material:getProperties` returned an incorrect uvScale.\n- Fix crash when uvShift/uvScale were given as tables in `lovr.graphics.newMaterial`.\n- Fix retina macOS windows.\n- Fix issue where `Pass:capsule` didn't render anything when its length was zero.\n- Fix confusing console message when OpenXR is not installed.\n- Fix issue where OBJ UVs were upside down.\n- Fix issue where equirectangular skyboxes used an incorrect z direction.\n- Fix seam when rendering equirectangular skyboxes with mipmaps.\n- Fix font wrap when camera uses a projection matrix with a flipped up direction.\n- Fix Model import when vertex colors are stored as vec3.\n- Fix 24-bit WAV import.\n- Fix issue with 3-letter vec3 swizzles.\n- Fix error when subtracting a vector from a number.\n- Fix error when adding a number and a temporary vector (in that order).\n- Fix issue where `t.window = nil` wasn't working as intended.\n- Fix bug where some fonts would render glyphs inside out.\n\n### Deprecate\n\n- Deprecate `lovr.graphics.getPass` (`lovr.graphics.newPass` should be used instead).\n- Deprecate `Pass:getType`.  All Pass objects support both compute and rendering (computes run before draws).\n- Deprecate `Pass:getTarget` (renamed to `Pass:getCanvas`).\n- Deprecate `Pass:getSampleCount` (`Pass:getCanvas` returns a `samples` key).\n- Deprecate `lovr.graphics.getBuffer` (Use `lovr.graphics.newBuffer` or tables).\n- Deprecate variant of `lovr.graphics.newBuffer` that takes length/data as the first argument (put format first).\n- Deprecate `lovr.headset.get/setDisplayFrequency` (it's named `lovr.headset.get/setRefreshRate` now).\n- Deprecate `lovr.headset.getDisplayFrequencies` (it's named `lovr.headset.getRefreshRates` now).\n- Deprecate `lovr.headset.getOriginType` (use `lovr.headset.isSeated`).\n- Deprecate variant of `lovr.headset.animate` that takes a `Device` argument (just pass the `Model` now).\n- Deprecate `Buffer:getPointer` (renamed to `Buffer:mapData`).\n\n### Remove\n\n- Remove `transfer` passes (methods on `Buffer` and `Texture` objects can be used instead).\n- Remove `Pass:copy` (use `Buffer:setData` and `Texture:setPixels`).\n- Remove `Pass:read` (use `Buffer:newReadback` and `Texture:newReadback`).\n- Remove `Pass:clear` (use `Buffer:clear` and `Texture:clear`).\n- Remove `Pass:blit` (use `Texture:setPixels`).\n- Remove `Pass:mipmap` (use `Texture:generateMipmaps`).\n- Remove `Tally` (use `lovr.graphics.setTimingEnabled` or `Pass:beginTally/finishTally`).\n- Remove `lovr.event.pump` (it's named `lovr.system.pollEvents` now).\n- Remove `t.headset.offset` (use `t.headset.seated`).\n- Remove `mipmaps` flag from render passes (they always regenerate mipmaps now).\n\nv0.16.0 - 2022-10-15\n---\n\n### Add\n\n- Add ability to run individual Lua files in addition to folders.\n- Add Vulkan renderer.\n- Add capsule, cone, and torus shapes.\n- Add `segments` option to planes.\n- Add option to draw a single node of a model.\n- Add indirect draws and indirect compute.\n- Add depth clamp and depth offset render states.\n- Add support for configuring \"stencil fail\" and \"depth fail\" stencil actions.\n- Add viewport and scissor render states.\n- Add `Pass` objects for recording rendering work.\n- Add `Buffer` objects.\n- Add `Buffer:getPointer` for accessing FFI pointers to GPU memory.\n- Add support for half floats for vertex attributes and buffer data.\n- Add texture views.\n- Add single-pass rendering to multi-layer textures (array, cubemap, 3D).\n- Add `r8`, `rg8`, `r16`, `rg16`, `rgba16`, and `rgb565` image and texture formats.\n- Add `d32fs8` texture format.\n- Add support for BC4, BC5, BC6, and BC7 texture formats.\n- Add support for loading uncompressed formats from DDS and KTX files.\n- Add support for loading KTX2 textures.\n- Add support for loading non-2D textures from image files.\n- Add support for loading DDS and KTX textures in glTF models.\n- Add support for the `KHR_texture_transform` glTF extension.\n- Add support for loading base64 images from glTF models.\n- Add `Sampler` objects.\n- Add `Tally` objects for GPU queries.\n- Add `Readback` objects for asynchronous GPU readbacks.\n- Add `t.graphics.shadercache` option to cache compiled shaders to disk.\n- Add `lovr.graphics.compileShader` and the ability to load shaders from SPIR-V.\n- Add `normal` default shader.\n- Add `Font:getKerning`.\n- Add `Font:getLines`.\n- Add `Font:getVertices`.\n- Add support for rendering multicolor text.\n- Add `Pass:blit`, `Pass:clear`, `Pass:copy`, `Pass:mipmap`, and `Pass:read` for raw GPU transfers.\n- Add `lovr.graphics.isFormatSupported` and `lovr.graphics.getDevice`.\n- Add `eye/gaze` Device.\n- Add `t.headset.submitdepth` flag to submit depth buffers to the OpenXR runtime.\n- Add `t.headset.overlay` conf.lua flag to run as an OpenXR overlay.\n- Add support for `keyboard` device pose on Oculus Quest.\n- Add support for reading hand tracking pinch strength (it's mapped to trigger).\n- Add `thumbrest` DeviceButton.\n- Add OpenXR support for `a`, `b`, `x`, and `y` DeviceButtons.\n- Add OpenXR support for `hand/left/point` and `hand/right/point` Devices.\n- Add OpenXR support for Windows Mixed Reality controllers.\n- Add OpenXR support for Oculus Quest hand tracking models via `lovr.headset.newModel`.\n- Add OpenXR support for Vive tracker devices.\n- Add OpenXR support for `lovr.headset.getDisplayFrequency`.\n- Add `lovr.headset.setDisplayFrequency` and `lovr.headset.getDisplayFrequencies`.\n- Add `lovr.headset.isFocused`.\n- Add `lovr.headset.getDeltaTime`.\n- Add support for passing `vec2`s as scale arguments.\n- Add support for passing numbers when calling functions on vectors.\n- Add functions to `ModelData` (it didn't have any before, now it has lots).\n- Add bounding sphere to `Model` and `ModelData`.\n- Add ability to procedurally animate model node scales.\n- Add `Model:getMetadata` to return raw JSON from glTF models.\n- Add `Rasterizer:getWidth`, `Rasterizer:getDimensions`, and `Rasterizer:getBoundingBox`.\n- Add `Rasterizer:getKerning` and `Rasterizer:getBearing`.\n- Add `Rasterizer:getCurves`.\n- Add `Rasterizer:newImage`.\n- Add `Vec2:angle`, `Vec3:angle`, and `Vec4:angle`.\n- Add `Vec2:equals`, `Vec3:equals`, `Vec4:equals`, `Quat:equals`, and `Mat4:equals`.\n- Add `Sound:getCapacity` and `Sound:getByteStride`.\n- Add `Source:get/setPitch`.\n- Add `Source:isSpatial` and `spatial` flag to `lovr.audio.newSource`.\n- Add macOS support for requesting the `audiocapture` Permission with `lovr.system.requestPermission`.\n- Add `World:getContacts`.\n- Add `World:get/setStepCount`.\n- Add `lovr.system.isKeyDown`.\n\n### Change\n\n- Change default headset driver to OpenXR.\n- Change `lovr.headset.getSkeleton` to also return joint radii.\n- Change shader GLSL version to 4.60.\n- Change desktop window to be mono.\n- Change maximum view count from 2 to 6.\n- Change default projection to have an infinite far plane with a reversed Z range.\n- Change skeletal animation to use compute shaders.\n- Change OBJ loader to support non-triangular faces.\n- Change `setColor` to accept a second alpha parameter when using a hexcode.\n- Change `Source:setEffectEnabled` to error when called on a Source that has effects disabled.\n- Change `lovr.headset.isDown` to return `nil` instead of `false` when a button is not supported by a Device.\n- Change text rendering to print missing glyph characters instead of erroring on missing glyphs.\n- Change `dt` parameter to use predicted headset display time delta instead of wallclock delta time, when available.\n- Change `lovr.math.noise` to use simplex noise instead of Perlin noise.\n- Change `lovr.filesystem.write` and `lovr.filesystem.append` to return success instead of byte count.\n- Change window-related functions to be on `lovr.system` instead of `lovr.graphics`.\n- Change `Font:get/setLineHeight` to `Font:get/setLineSpacing`.\n- Change `lovr.graphics.stencil` to be split into separate \"stencil test\" and \"stencil write\" states.\n\n### Fix\n\n- Fix flickering on AMD GPUs\n- Fix crash when calling `lovr.audio.setGeometry` or `lovr.physics.newMeshCollider` with zero vertices/indices.\n- Fix `require` not finding plugins packaged as \"all in one\" Lua libraries.\n- Fix audio capture issues on Android.\n- Fix Oculus Quest hand model orientation.\n- Fix issue that would cause vectors to rarely get corrupted with nans in LuaJIT.\n- Fix potential crash when using `Object:release` rapidly.\n- Fix bug where Collider friction had no effect, and set default friction to infinity instead of 0 (no behavior change).\n- Fix issue preventing the audio, graphics, and headset modules from being `require`d in threads.\n- Fix issue with `lovr.math.gammaToLinear` and `lovr.math.linearToGamma` when used with a table.\n- Fix error when calling `lovr.filesystem.getDirectoryItems` when `table.sort` is unavailable.\n- Fix `Mat4 * Vec3`.\n- Fix issue with `World:raycast` and `MeshShape`s.\n- Fix bug where error screen wouldn't show up if there was an error in `lovr.draw` when using OpenXR.\n- Fix issue where `conf.lua` wouldn't get read properly on Android.\n- Fix error when passing LÖVR objects to `Thread:start`.\n- Fix bug where first command line argument would not be available in fused mode.\n- Fix bug where Font vertex winding would be flipped when toggling `Font:setFlipEnabled`.\n\n### Remove\n\n- Remove OpenGL and WebGL renderers.\n- Remove `rgb` and `rgba4` texture formats.\n- Remove `Mesh` and `ShaderBlock` (they are replaced by `Buffer`).\n- Remove `Canvas` (textures can be rendered to directly with render passes).\n- Remove arc primitive.\n- Remove line width.\n- Remove `Font:setFlipEnabled` (font flips automatically when needed).\n- Remove WebAssembly build (it will be back soon!)\n- Remove `openvr`, `oculus`, `vrapi`, `webxr`, and `pico` headset drivers.\n- Remove `beacon` Devices.\n- Remove `lovr.headset.getDisplayMask`.\n- Remove `effects = false` flag from `lovr.audio.newSource` (use `spatial` flag).\n\nv0.15.0 - 2021-04-11\n---\n\n### Add\n\n- Add support for Vive trackers (again)\n- Add support for Quest 2\n- Add `Device`s for elbows, shoulders, chest, waist, knees, feet, camera, and keyboard\n- Add support for OpenXR on Linux\n- Add Windows Mixed Reality controller bindings for OpenVR\n- Add `lovr.system` module\n- Add `lovr.permission` callback\n- Add plugin system\n- Add support for `require`ing libraries inside APKs\n- Add UVs to `lovr.graphics.cylinder`\n- Add a stack trace to thread errors\n- Add `Mat4:target`\n- Add support for binary STL models\n- Add `t.audio.spatializer` to support switching audio spatializers\n- Add support for Oculus Audio Spatializer\n- Add support for Steam Audio\n- Add support for WAV sounds\n- Add support for MP3 sounds\n- Add support for ambisonic sounds\n- Add `SampleFormat` for creating floating point Sounds\n- Add `t.audio.start` to control whether audio devices are automatically started\n- Add `lovr.audio.getDevices`, `lovr.audio.setDevice`, `lovr.audio.start`, `lovr.audio.stop`, and `lovr.audio.isStarted`\n- Add `lovr.audio.setGeometry` and `AudioMaterial`\n- Add `lovr.audio.get/setAbsorption`\n- Add `Effect`, `Source:isEffectEnabled`, and `Source:setEffectEnabled`\n- Add `Source:get/setRadius`\n- Add `Source:get/setDirectivity`\n- Add `Source:clone`\n- Add `VolumeUnit` parameter to `lovr.audio.get/setVolume` and `Source:get/setVolume`\n- Add support for `lovr.headset.getVelocity` to the WebXR driver\n\n### Change\n\n- Change `SoundData` to be named `Sound`\n- Change `TextureData` to be named `Image`\n- Change `Image:encode` to return a `Blob` instead of writing to a file\n- Change default physics linear damping from `.01` to `0`\n- Change `lovr.mirror` to correctly render transparent headset textures\n- Change `Mat4:lookAt` to compute a \"look at\" view matrix (use `Mat4:target` for the old behavior)\n- Change `lovr.filesystem.write` and `lovr.filesystem.append` to accept Blobs\n- Change `lovr.headset` to submit empty frames when `lovr.draw` is missing (instead of not submitting anything)\n- Change default font shader to have more precise/sharp antialiasing\n- Change `ShaderBlock:send` to accept a byte range when sending a Blob\n- Change `lovr.graphics.newFont` to accept custom glyph padding and SDF range values\n- Change `lovr.audio.isSpatialized` to `lovr.audio.getSpatializer`\n- Change `Source:setCone` to `Source:setDirectivity`\n- Change `samples` value of `TimeUnit` to be named `frames`.\n\n### Fix\n\n- Fix hand tracking orientation on Quest\n- Fix improper vsync when changing headset drivers during a restart\n- Fix graphics flickering on Intel GPUs\n- Fix lovr.math when used on threads\n- Fix crash when threads threw non-string errors\n- Fix the `lovr.math.newCurve` variant that takes a single number for the point count\n- Fix issue where `Mat4:unpack` would sometimes return `nan` angles\n- Fix error screen erroring after a while when it ran out of vectors\n- Fix error screen erroring when `t.math.globals` was `false`\n- Fix crash with `vrapi` driver when requesting pose for devices other than head/hands\n- Fix `lovr.filesystem.append` on unix\n- Fix `lovr.headset.getDisplayDimensions` to return dimensions for a single eye on the desktop driver\n- Fix `lovr.restart` and `arg.restart` on WebAssembly\n- Fix `lovr.graphics.getBlendMode` when blending is disabled\n- Fix crash when moving a `Shape` when it isn't attached to a Collider\n- Fix issues with macOS Big Sur\n- Fix text wrapping issue with lines ending in spaces\n- Fix some crashes in lovr.physics to log warnings instead\n\n### Remove\n\n- Remove support for Oculus Go\n- Remove `lua_modules` and `deps` from the default require paths\n- Remove `--root` command line argument\n- Remove `lovr.graphics.triangle`\n- Remove C require path (use plugins)\n- Remove `enet` (use the [`lovr-enet`](https://github.com/bjornbytes/lua-enet) plugin)\n- Remove `cjson` (use the [`lovr-cjson`](https://github.com/bjornbytes/lua-cjson) plugin)\n- Remove `AudioStream` (use `stream` Sounds instead)\n- Remove `Source:getType` and `SourceType` (use `decode` option of newSource/Sound)\n- Remove `Source:getBitDepth`, `Source:getChannelCount`, and `Source:getSampleRate`\n- Remove `lovr.audio.getMicrophoneNames`, `lovr.audio.newMicrophone`, and `Microphone`\n- Remove `lovr.audio.update`\n- Remove `lovr.audio.pause`\n- Remove `lovr.audio.get/setVelocity`, `Source:get/setVelocity`, and `lovr.audio.get/setDopplerEffect`\n- Remove `Source:get/setFalloff`\n- Remove `Source:get/setPitch`\n- Remove `Source:get/setVolumeLimits`\n- Remove `Source:is/setRelative`\n\nv0.14.0 - 2020-10-05\n---\n\n### Add\n\n- Add `lovr.headset.getSkeleton`.\n- Add `lovr.headset.animate` and `animated` flag to `lovr.headset.newModel`.\n- Add `lovr.headset.wasPressed` and `lovr.headset.wasReleased`.\n- Add `lovr.headset.getViewCount`, `lovr.headset.getViewPose`, `lovr.headset.getViewAngles`.\n- Add `beacon/1`, `beacon/2`, `beacon/3`, and `beacon/4` Devices.\n- Add `lovr.headset.getDisplayFrequency`.\n- Add `lovr.headset.getTime`.\n- Add a WebXR headset driver.\n- Add a Pico headset driver.\n- Add `lovr.keypressed`, `lovr.keyreleased`, and `lovr.textinput` callbacks.\n- Add `lovr.event.restart`, `lovr.restart` callback, and `arg.restart` for persisting data between restarts.\n- Add `lovr.resize` callback.\n- Add `lovr.log` callback.\n- Add `World:getColliders`.\n- Add `World:newMeshCollider`.\n- Add `Joint:setEnabled` and `Joint:isEnabled`.\n- Add `Shape:setSensor` and `Shape:isSensor`.\n- Add `World:get/setResponseTime`, `BallJoint:get/setResponseTime`, and `DistanceJoint:get/setResponseTime`.\n- Add `World:get/setTightness`, `BallJoint:get/setTightness`, `DistanceJoint:get/setTightness`.\n- Add `lovr.graphics.getViewPose` and `lovr.graphics.setViewPose`.\n- Add `lovr.graphics.getProjection`.\n- Add `t.graphics.debug` config flag.\n- Add `compute` limit to `lovr.graphics.getLimits`.\n- Add `renderpasses`, `buffers`, `textures`, `buffermemory`, and `texturememory` graphics stats.\n- Add `lovr.graphics.setColorMask` and `lovr.graphics.getColorMask`.\n- Add `AudioStream:append` for procedural audio generation.\n- Add `SoundData:getBlob` and `TextureData:getBlob`.\n- Add support for shadow sampler uniforms.\n- Add `Texture:getCompareMode` and `Texture:setCompareMode`.\n- Add `sampler2DMultiview` and `textureMultiview` helpers to shaders.\n- Add `highp` ShaderFlag.\n- Add `Shader:hasBlock`.\n- Add `Model:hasJoints`.\n- Add `:release` to all objects to immediately destroy them from Lua.\n- Add support for building with Lua 5.2, 5.3, and 5.4.\n\n### Change\n\n- Change physics module functions to accept vector objects.\n- Change animated shaders to render properly with non-animated models.\n- Change the desktop headset driver to rotate the controller based on mouse movement.\n- Change the desktop headset driver to emit `lovr.focus` events when window focus changes.\n- Change the default headset clipping planes to `0.1` and `100.0` on all backends.\n- Change `Thread:start` to accept arguments to pass to the Thread's function.\n- Change `Channel:peek` to return a second value indicating if a message was present.\n- Change `Microphone:getData` to take new count/destination/offset arguments.\n- Change `Mesh:setVertices` to accept a `Blob` with vertex data.\n- Change `lovr.graphics.setProjection` to take a view index.\n- Change WebAssembly build to enable the thread module by default.\n- Change the 1ms sleep in the run loop to a 0ms sleep.\n- Change `Curve:render` to always return 2 points if the Curve is a line.\n- Change `Curve:render` to be faster.\n- Change `lovr.data.newTextureData` to allow filling in initial contents with a Blob.\n- Change `lovr.data.newTextureData` to accept a TextureData to clone.\n- Change `lovr.filesystem.getDirectoryItems` to omit `.` and `..`.\n- Change `lovr.filesystem.getDirectoryItems` to return sorted filenames.\n- Change `Shader:send` to return a boolean instead of erroring on failure.\n- Change `ShaderBlock:getShaderCode` to accept an optional namespace for accessing the block.\n- Change OBJ model loading to be faster.\n- Change `Vec3:set` to accept a `Mat4`.\n\n### Fix\n\n- Fix many issues with the OpenXR headset driver.\n- Fix an issue when restarting some projects that had multiple textures per draw.\n- Fix an issue where OBJ models had no AABB.\n- Fix an issue where `Channel:push` errored when a userdata was its only argument.\n- Fix a crash when passing `nil` to `lovr.thread.newThread`.\n- Fix `lovr.data.newBlob(blob)` to properly copy data to the new Blob.\n- Fix an issue where textures could load upside down sometimes when using threads.\n- Fix an issue with screen tearing on the bottom of the window on macOS.\n- Fix an issue where `lovr.headset.getHands` returned an empty table on Linux.\n- Fix an issue with forced vsync breaking VR timing in new windows updates.\n- Fix an issue where printing only whitespace characters would cause visual glitches.\n- Fix several issues with stereo Shaders and Canvases on Android.\n- Fix `lovr.graphics.getFeatures().compute` returning `false` on Android.\n- Fix a confusing message when passing nothing to `lovr.graphics.points` / `lovr.graphics.line`.\n- Fix issue with using Mesh attributes with integer types in shaders.\n- Fix crash when using a `Blob` in `ShaderBlock:send`.\n- Fix `Thread:wait` on Windows.\n\n### Remove\n\n- Remove `webvr` headset driver (use `webxr` instead).\n- Remove `leap` headset driver (use the Ultraleap OpenXR API Layer instead).\n- Remove `oculusmobile` headset driver (use `vrapi` instead).\n- Remove `SoundData:getPointer` and `TextureData:getPointer` (use `:getBlob`).\n- Remove `Source:resume` and `lovr.audio.resume` (use `Source:play`).\n- Remove `Source:rewind` and `lovr.audio.rewind` (use `Source:seek(0)`).\n- Remove `Source:isPaused` and `Source:isStopped` (use `:isPlaying`).\n- Remove `lovr.event.quit('restart')` variant.\n- Remove `t.hotkeys` config (use `lovr.keypressed` and `lovr.keyreleased`).\n- Remove `lovr.filesystem.getApplicationId` (use `lovr.filesystem.getIdentity`).\n- Remove `anisotropic` `FilterMode` (anisotropy can be used with any filter mode).\n\nv0.13.0 - 2019-10-14\n---\n\n### Add\n\n- Add support for the Oculus Quest.\n- Add support for Valve Index controllers.\n- Add support for SteamVR actions.\n- Add support for Leap Motion.\n- Add an OpenXR headset driver.\n- Add a new `standard` PBR shader.\n- Add the ability to have multiple headset tracking drivers active at once.\n- Add `strength` and `frequency` parameters to `lovr.headset.vibrate`.\n- Add `lovr.headset.getDisplayMask`.\n- Add `lovr.headset.isTracked`.\n- Add support for hexcode colors.\n- Add `vec2` and `vec4` objects.\n- Add vector properties and vector swizzles.\n- Add support for loading KTX and ASTC textures.\n- Add `TextureData:paste` for copying between TextureData objects.\n- Add `TextureData:getFormat`.\n- Add default hotkeys: Escape to quit and F5 to reload, configurable using the `t.hotkeys` conf flag.\n- Add `flags` argument to `lovr.graphics.newShader` for configuring shaders without writing GLSL.\n- Add `DefaultShader` enum for creating instances of built-in shaders.\n- Add an `animated` shader flag to automatically make shaders animated.\n- Add `lovr.graphics.tick` and `lovr.graphics.tock` for accurate GPU profiling.\n- Add `getPose` and `setPose` functions to `lovr.audio`, `Source`, and `Collider`.\n- Add `Model:pose` and `Model:getNodePose` functions for modifying individual joints in a Model.\n- Add support for cubic spline animation keyframe interpolation in glTF assets.\n- Add support for embedded base64 data in glTF assets.\n- Add `astc`, `dxt`, `instancedstereo`, `multiview`, and `timers` GraphicsFeatures.\n- Add experimental tup build system as an alternative to CMake.\n- Add `lovr.math.drain` function for freeing temporary vectors.\n- Add a `t.window.resizable` flag to make the mirror window resizable.\n- Add a `t.window.vsync` hint to control vsync (may be ignored if necessary for proper VR timing).\n- Add `getNodeCount`, `getMaterialCount`, and `getAnimationCount` to `Model`.\n\n### Change\n\n- Change mobile renderer to use optimized multiview rendering.\n- Change all rendering to stall the GPU way less.  Everything is faster.\n- Change Android to use LuaJIT by default.\n- Change vectors to be temporary by default, use `new`-prefixed functions for permanent vectors.\n- Change `lovr.filesystem.read` to accept and return the number of bytes read.\n- Change `lovr.filesystem` to follow symbolic links.\n- Change `lovr.graphics.newMesh` to accept a `Blob` for binary vertex data.\n- Change `fake` headset driver to `desktop`.\n- Change `TextureData:getPixel`/`setPixel` to support more formats: `rgb`, `r32f`, `rg32f`, `rgba32f`.\n- Change `lovr.graphics.getSystemLimits` to `lovr.graphics.getLimits`.\n- Change `lovr.graphics.getSupported` to `lovr.graphics.getFeatures`.\n- Change `lovr.graphics.plane` to accept optional uv coordinates to draw a subregion of a Texture.\n- Change `Font:getWidth` to also return the number of wrapped lines.\n- Change `lovr.thread.newThread` to accept a filename or a `Blob`.\n- Change `lovr.headset.getType` to `lovr.headset.getName`, returning the raw headset name string.\n- Change `lovr.graphics.circle` size argument to be a radius instead of a diameter.\n- Change `MULTICANVAS` shader define to be a `multicanvas` shader flag.\n- Change `Source:getDirection`, `:setDirection` to `Source:getOrientation`, `setOrientation`.\n- Change nogame screen to use a signed distance field shader instead of an image (!).\n\n### Fix\n\n- Fix problems when creating Blobs with a negative size.\n- Fix many bugs or missing features with the glTF importer.\n- Fix issue where refcounting was not thread safe.\n- Fix vertex winding order of cylinders and spheres.\n- Fix an issue where the error screen wouldn't show up when the headset module was disabled.\n- Fix console output on Windows.\n\n### Remove\n\n- Remove `Animator` objects, they are replaced by the `Model:animate` function.\n- Remove `Controller` objects, equivalent functions that accept a Device are now in `lovr.headset`.\n- Remove `lovr.headset.isMounted`, use `lovr.headset.isDown('head', 'proximity')` instead.\n- Remove controller-related callbacks (`controlleradded/removed/pressed/released`).\n- Remove orientation arguments from `lovr.graphics.skybox`, rotation is automatically applied.\n- Remove `Pool` objects, there is a default temporary vector Pool built in to `lovr.math`.\n- Remove `t.gammacorrect` conf flag, all rendering is gamma correct now.\n\nv0.12.0 - 2019-02-14\n---\n\n### Add\n\n- Add an Android port, with official support for the Oculus Go and Gear VR.\n- Add support for the Oculus Desktop SDK (LibOVR).\n- Add automatic batching and instancing of draw calls.\n- Add `vec3`, `mat4`, `quat`, and `Pool` objects to `lovr.math`.\n- Add support for Vive trackers (they are exposed as Controllers).\n- Add `go` and `gear` HeadsetTypes.\n- Add `oculus` and `oculusmobile` HeadsetDrivers.\n- Add the `lovr.mirror` callback for custom rendering to the desktop window.\n- Add `Controller:getVelocity` and `Controller:getAngularVelocity`.\n- Add `Curve` objects for working with Bézier curves.\n- Add `Canvas:getDepthTexture`.\n- Add `lovr.headset.getBoundsGeometry` (again).\n- Add `lovr.headset.getMirrorTexture`.\n- Add `lovr.graphics.discard`.\n- Add `lovr.graphics.flush`.\n- Add `lovr.graphics.setAlphaSampling` and `lovr.graphics.getAlphaSampling`.\n- Add `lovr.graphics.setProjection`.\n- Add `lovr.graphics.getPixelDensity`.\n- Add `lovr.graphics.hasWindow`.\n- Add `ubyte`, `short`, `ushort`, and `uint` types for Mesh attributes.\n- Add `Font:hasGlyphs`.\n- Add `Font:getRasterizer`.\n- Add `Font:isFlipEnabled` and `Font:setFlipEnabled`.\n- Add `ShaderBlock:read`.\n- Add `lovr.filesystem.getApplicationId`.\n- Add the `--root` command line argument to run a project from a directory inside an archive.\n- Add a default HTML file used in the emscripten build, so you don't need to write it yourself.\n\n### Change\n\n- Change API functions to accept vectors and matrices in addition to numbers, where relevant.\n- Change some matrix and vector math functions to use SIMD intrinsics.\n- Change `lovr.headset.setMirrored` and the `t.headset.mirrored` conf.lua flag to take a HeadsetEye.\n- Change the mirror window to use the currently active color and shader.\n- Change `lovr.graphics.setBlendMode` to accept `nil` to disable blending.\n- Change `lovr.graphics.triangle` to take multiple triangles to draw.\n- Change `lovr.graphics.cylinder` to take position, rotation, and scale (length) arguments.\n- Change `lovr.graphics.newShaderBlock` to take a `BlockType` instead of a `writable` flag.\n- Change `lovr.graphics.newMesh` and `lovr.graphics.newShaderBlock` to accept a `readable` flag.\n- Change `lovr.graphics.fill` to accept a subregion of the input Texture to use.\n- Change `emissive` colors in Materials to default to black instead of white.\n- Change `lovr.graphics.getSystemLimits` to return the maximum ShaderBlock size (`blocksize`).\n- Change `lovr.filesystem.mount` to accept a path inside the archive to mount.\n- Change the `depth` flag of `lovr.graphics.newCanvas` to additionally accept a table with `format` and `readable` keys for creating a Canvas with a readable depth buffer.\n- Change `Animator` functions to accept both animation names and indices.\n- Change `DrawMode` to `DrawStyle` and `MeshDrawMode` to `DrawMode` (enum values are unchanged).\n- Change `DepthFormat` to be merged into `TextureFormat` (enum values are unchanged).\n- Change `lovr.graphics.newCanvas` to create Textures with the `clamp` TextureWrap.\n- Change `Font:setPixelDensity` to accept `nil` to reset the density to the default.\n- Change the `computeshaders` graphics feature to `compute`.\n- Change the default font to Varela Round.\n- Change `lovr.getOS` to return `Android` on Android.\n- Change build system to be more modular and configurable.  Modules can be individually included or excluded, and it's possible to choose whether to use libraries already on the system or compile them from the `deps` folder.\n\n### Fix\n\n- Fix a bug where `lovr.filesystem.unmount` was not exposed.\n- Fix a memory corruption when using `Channel:peek`.\n- Fix a bug where Microphones wouldn't clean up properly when they were destroyed.\n- Fix fonts to render tabs as four spaces instead of...whatever they were doing.\n\n### Remove\n\n- Remove `Transform` objects (use `mat4` instead).\n- Remove support for importing FBX models ([`fbx2gltf`](https://github.com/facebookincubator/FBX2glTF) can be used to convert to glTF).\n- Remove `VertexData`.\n- Remove most of the `ModelData` API.\n- Remove `Model:getMesh`.\n- Remove `replace` BlendMode.\n- Remove `Mesh:drawInstanced` and `Model:drawInstanced` (`draw` takes an instance count now).\n- Remove `lovr.headset.setMirrored`, `lovr.headset.isMirrored`, and the `t.headset.mirror` flag.\n- Remove variant of `lovr.headset.getPose` (and getPosition/getOrientation) that took a HeadsetEye.\n- Remove `ShaderBlock:isWritable` (use `ShaderBlock:getType`).\n- Remove `Canvas:getDepthFormat` (use `Canvas:getDepthTexture` instead).\n\nv0.11.0 - 2018-09-05\n---\n\n### Add\n\n- Add `Microphone` objects, `lovr.audio.getMicrophoneNames`, and `lovr.audio.newMicrophone`.\n- Add `SoundData` objects for accessing individual samples of sound files and `Source:getType`.\n- Add support for compute shaders via `lovr.graphics.newComputeShader` and `lovr.graphics.compute`.\n- Add `ShaderBlock` objects for efficiently sending large amounts of data to Shaders.\n- Add `AudioStream:decode` to decode a chunk of audio and return it as a SoundData.\n- Add a new `lineloop` value for `MeshDrawMode`.\n- Add `lovr.math.noise` for perlin noise.\n- Support `require`ing C libraries (.dll, .so) files as LÖVR modules.\n- Add `Material:setTransform` and `Material:getTransform` for using subregions of textures or applying other texture coordinate transformations.\n- Add `Texture:getMipmapCount`.\n- Add support for new Texture/Canvas formats: `rgba4`, `r16f`, `r32f`, `rg16f`, `rg32f`, `rgb5a1`, `rgb10a2`.\n- Add support for loading HDR image files in unclipped floating point texture formats.\n- Add `Texture:getFormat`.\n- Add `conf.headset.msaa` to control the antialiasing of the headset Canvas (it can be different from the MSAA of the desktop window now).\n- Add `lovr.graphics.getSupported` so you can figure out if compute shaders are supported.\n\n### Change\n\n- Change rendering to use single pass stereo rendering on supported graphics cards.  This renders both eyes at the same time which should reduce CPU usage and nearly double rendering performance.\n- Change fonts to use stb_truetype instead of FreeType, which seems to improve text quality.\n- Change `lovr.audio.newSource` to accept a `SourceType` so you can create a Source backed by either an AudioStream or a SoundData.\n- Change `lovr.graphics.newShader` to accept Blobs containing shader source code.\n- Change `lovr.filesystem.getRequirePath` and `lovr.filesystem.setRequirePath` to support C require paths.\n- Change the default `lovr.filesystem` to look in `lua_modules` for Lua modules for better luarocks integration.\n- Change `Texture:replacePixels` to accept an x/y offset and a mipmap level to replace.\n- Change `Texture:getWidth`, `Texture:getHeight`, and `Texture:getDimensions` to accept an optional mipmap level.\n- Change `lovr.graphics.newShader` to work with strings longer than 8,192 characters.\n- Change `lovr.data.newTextureData` to support an optional texture format.\n- Change `Transform:getMatrix` to accept a table to fill with values.\n\n### Fix\n\n- Fix an issue where the no game screen's `conf.lua` wasn't loading properly.\n- Fix `lovr.event.push` to work with custom event names.\n- Fix `lovr.graphics.getBlendMode` to report correct values.\n- Fix various memory leaks.\n\n### Remove\n\n- Remove `AudioStream:seek`.\n- Remove support for COLLADA models.\n- Remove support for loading tga, bmp, and gif textures.\n\nv0.10.0 - 2018-06-13\n---\n\n### Add\n\n- Add the `lovr.thread` module, `Thread` objects, `Channel` objects, and the `lovr.threaderror` callback.\n- Add the ability to render to multiple Canvas objects simultaneously and `lovr.graphics.getCanvas` and `lovr.graphics.setCanvas`.\n- Add support for 2D array textures and 3D volume textures.\n- Add the `lovr.mount` callback and `lovr.headset.isMounted` for detecting when/if the headset is on a head.\n- Add `lovr.data` module and `AudioStream`, `ModelData`, `Rasterizer`, `TextureData`, and `VertexData` objects.\n- Add a variant of `lovr.event.quit` that restarts instead of quitting.\n- Add `Texture:replacePixels` for modifying Texture contents.\n- Add variants of `lovr.graphics.clear` for clearing the depth and stencil buffers to custom values.\n- Add a second parameter to `lovr.graphics.setDepthTest` for controlling whether the depth buffer is written to.\n- Add `ModelData:getVertexData` for access to raw vertex data in models.\n- Add new `MaterialTexture`s for PBR maps: `emissive`, `metalness`, `roughness`, `occlusion`, and `normal`.  They are loaded for new Models by default.\n- Add `MaterialScalar`, `Material:getScalar`, and `Material:setScalar` for metalness and roughness properties.\n- Add an `emissive` `MaterialColor`.\n- Add a `mipmaps` flag to `lovr.graphics.newTexture` and `lovr.graphics.newCanvas`.\n- Add `lovr.audio.getDopplerEffect` and `lovr.audio.setDopplerEffect` (removed in a previous version).\n- Add `lovrTangent` as a vec3 accessible to Shaders and load tangents from Models.\n- Add `Mesh:attachAttributes` and `Mesh:detachAttributes` for improved instancing support.\n- Add `lovr.filesystem.getRequirePath` and `lovr.filesystem.setRequirePath`.\n- Add `lovr.filesystem.getWorkingDirectory`.\n- Add `Canvas:newTextureData` for reading pixel data from Canvas objects.\n\n### Change\n\n- Change `lovr.timer.getFPS` to average over the last 90 frames instead of 60.\n- Change `lovr.graphics.newCanvas` to error when given negative/zero sizes.\n- Change `Canvas:renderTo` to error if a function isn't supplied to it.\n- Change `Canvas:renderTo` to pass extra arguments to the render callback.\n- Change `lovr.graphics.plane` to accept separate x/y scales for the plane.\n- Change `Source:getChannels` to `Source:getChannelCount`.\n- Change the fake headset driver to use right click instead of left click for the controller trigger.\n- Change `lovr.controllerpressed` and `lovr.controllerreleased` to pass `nil` instead of `'unknown'` for unknown controller buttons.\n- Change `lovr.graphics.newMesh` and `Mesh:setVertices` to accept a `VertexData` object to load vertices from.\n- Change `Mesh:setVertexMap` to accept a `Blob` for fast vertex map updating.\n- Change `Shader:send` to accept a `Blob` for updating Shaders with arbitrary binary data.\n- Change `Collider:getShapeList` to `Collider:getShapes`.\n- Change `Collider:getJointList` to `Collider:getJoints` and also fix it.\n- Change the fake headset driver to respect the `lovr.headset.setMirrored` function.\n- Change the default window size.\n- Change the main loop to a cooperative coroutine-based loop.\n- Change `Blob:getFilename` to `Blob:getName`.\n\n### Fix\n\n- Fix sphere UV coordinates to be flipped for correct texture mapping.\n- Fix issues with transforms of non-animated models.\n- Fix `require` when used with dot-separated module paths.\n- Fix a bug where `conf.lua` would be loaded from the working directory if one wasn't present in the project.\n- Fix a crash when `lovr.headset.getDisplayDimensions` was called before the first frame was rendered.\n- Fix `Joint:getType` returning `nil` for DistanceJoints.\n- Fix `Texture:setFilter` not doing anything for cubemap textures.\n- Fix a bug where sources would sometimes not be able to play again after ending.\n- Fix `lovr.audio.newSource` to show an error message when passed an invalid file.\n- Fix an edge case in quaternion interpolation that caused some animations with rotations to be bad.\n- Fix `Model:getAABB`.\n- Fix the winding order of cubes rendered with `lovr.graphics.cube`.\n- Fix `lovr.load` to correctly pass in the argument table.\n\n### Remove\n\n- Remove the `lovr.step` callback.  It is now returned from `lovr.run`.\n- Remove `lovr.headset.getBoundsGeometry`.\n- Remove `lovr.headset.isPresent`.\n- Remove the ability to modify the view matrix and the `MatrixType` enum.\n- Remove the variant `lovr.graphics.plane(texture)` for drawing fullscreen quads, it has its own `lovr.graphics.fill` function now.\n- Remove a variant of `lovr.filesystem.newBlob` that creates a Blob from a string, use `lovr.data.newBlob` instead.\n\nv0.9.1 - 2017-12-31\n---\n\n### Add\n\n- Add `Canvas` objects.\n- Add floating point texture formats.\n- Add official support for Windows Mixed Reality headsets through OpenVR.\n- Add `lovr.graphics.stencil`, `lovr.graphics.getStencilTest`, and `lovr.graphics.setStencilTest`.\n- Add `lovr.headset.getPose` and `Controller:getPose`.\n- Add `lovr.graphics.getStats`.\n\n### Change\n\n- Change error messages to be better when requiring or loading files that don't exist.\n\n### Fix\n\n- Fix a bug where updating array uniforms wasn't working.\n- Fix a bug where animations had their weight initially set to 0.\n- Fix a bug where controller render models weren't working properly.\n\n### Remove\n\n- Remove `Texture:renderTo` and variants of `lovr.graphics.newTexture` that created framebuffers.\n- Remove `lovr.headset.getEyePosition`.  An HeadsetEye can now optionally be specified as the first argument to `lovr.headset.getPosition`, `lovr.headset.getOrientation`, and `lovr.headset.getPose`.\n\nv0.9.0 - 2017-12-01\n---\n\n### Add\n\n- Add `Material` objects.  Materials are sets of colors and textures that can be applied to Models and Meshes.  Models automatically load referenced materials and textures.\n- Add `Animator` objects for skeletal animation playback.\n- Add fallback mouse/keyboard controls used when VR hardware is not present.\n- Add support for loading glTF models.\n- Add gamma correct rendering, `lovr.graphics.isGammaCorrect`, and the `gammacorrect` option to `conf.lua`.\n- Add `lovr.math.gammaToLinear` and `lovr.math.linearToGamma`.\n- Add `lovr.graphics.circle`.\n- Add `lovr.graphics.arc`.\n- Add `lovr.math.orientationToDirection`.\n- Add `Transform:getMatrix` and `Transform:setMatrix`.\n- Add support for vertex colors and add the built in `lovrVertexColor` vertex attribute to shaders.\n- Add `Model:getMesh`.\n- Add `Mesh:drawInstanced` and `Model:drawInstanced`.\n- Add `lines` and `linestrip` draw modes to Meshes.\n- Add `Shader:hasUniform`.\n- Add the ability to customize VR runtime preferences using the `headset.drivers` table in `conf.lua`.\n\n### Change\n\n- Change `Shader:send` to accept more types of uniforms, including arrays.\n- Change `lovr.graphics.newTexture` to accept 6 arguments to create a cube map texture.\n- Change functions that deal with colors to use a floating point range of 0 - 1 instead of 0 - 255.\n\n### Fix\n\n- Fix `Controller:getHand`, `lovr.graphics.setPointSize`, HRTF audio, and ZIP archive mounting for WebVR.\n- Fix a bug with `World:raycast` that occurred when the ray hit multiple things.\n- Fix loading and rendering of more complicated models with node hierarchies and multiple materials.\n- Fix a bug with text rendering that caused flickering.\n- Fix Shader error messages to include correct line numbers.\n- Fix crash on Windows that occurred when paths had non ASCII characters.\n\n### Remove\n\n- Remove `Model:setTexture`, `Model:getTexture`, `Mesh:setTexture`, and `Mesh:getTexture`.  They have been replaced by `Model:setMaterial`, `Model:getMaterial`, `Mesh:setMaterial`, and `Mesh:getMaterial`.\n- Remove `Skybox` object.  It has been replaced with `lovr.graphics.skybox`.\n- Remove the ability to pass Textures as the optional first argument of drawing primitives (Materials can be passed instead).\n- Remove `lovr.filesystem.exists`.  The `lovr.filesystem.isFile` and `lovr.filesystem.isDirectory` functions can be used instead.\n\nv0.8.0 - 2017-08-27\n---\n\n### Add\n\n- Add support for Linux.\n- Add official support for Oculus Touch.\n- Add the `lua-enet` library for multiplayer networking.\n- Add signed distance field font rendering.\n- Add support for compressed textures (DXT1, DXT3, and DXT5).\n- Add texture mipmaps.\n- Add support for trilinear and anisotropic texture sampling.\n- Add `anisotropy` system limit returned by `lovr.graphics.getSystemLimits`.\n- Add `lovr.graphics.getDefaultFilter` and `lovr.graphics.setDefaultFilter`.\n- Add `lovr.math.lookAt`.\n- Add `lovr.math.random`, `lovr.math.randomNormal`, and `RandomGenerator` objects.\n- Add new controller buttons: `unknown`, `trigger`, `a`, `b`, `x`, and `y`.\n- Add the `grip` `ControllerAxis`.\n- Add `Controller:getHand` and `ControllerHand`.\n- Add `Controller:isTouched`.\n- Add `HeadsetOrigin`, `lovr.headset.getOriginType`, and `headset.offset` option to `conf.lua`.\n- Add `HeadsetType`.\n- Add `lovr.graphics.createWindow` and `window` options to `conf.lua`.\n- Add `lovrModel` and `lovrView` uniform matrices for shaders.\n- Add `MatrixType` and allow transform stack functions to manipulate either the model or the view matrix.\n\n### Change\n\n- Change emscripten build to compile to WebAssembly by default.\n- Change `lovr.graphics.plane` to take an angle/axis orientation instead of a normal vector.\n- Change `FilterMode`.  The new values are `nearest`, `bilinear`, `trilinear`, and `anisotropic`.\n- Change the default depth test from `less` to `lequal`.\n- Change `lovr.graphics.translate`, `lovr.graphics.rotate`, `lovr.graphics.scale`, and `lovr.graphics.transform` to accept an optional `MatrixType` as the first parameter to control whether the model matrix or the view matrix is affected.\n- Change the version of OpenVR to 1.0.9.\n\n### Fix\n\n- Fix bug where using custom fonts could cause a crash.\n- Fix crash when the graphics module was disabled.\n- Fix `lovr.graphics.setFont` when specifying a Font of `nil`.\n- Fix fullscreen framebuffer texture coordinates.\n- Fix the error screen to use a more readable font size.\n- Fix `lovr.headset.getType` to return correct values.\n- Fix the error reporting mechanism to capture many more kinds of errors and show the error screen for them instead of printing the message to the console and closing the window.\n- Fix several graphics performance issues.\n- Fix the normal matrix passed to shaders.\n- Fix issues with nonuniform scaling transformations.\n\n### Remove\n\n- Remove `lovr.graphics.getScissor` and `lovr.graphics.setScissor`.\n- Remove `lovr.graphics.getColorMask` and `lovr.graphics.setColorMask`.\n- Remove undocumented `Texture:bind` function.\n\nv0.7.1 - 2017-06-23\n---\n\n### Add\n\n- Add `lovr.graphics.cylinder`.\n- Add `lovr.graphics.sphere`.\n- Add `lovr.graphics.box`.\n- Add `Model:getAABB`.\n- Add `lovrNormalMatrix` uniform to shaders.\n\n### Change\n\n- Change the minimum required OpenGL version from 2.1 to 3.3.\n- Change the minimum required OpenGL ES version from 2.0 to 3.0.\n- Change the minimum required WebGL version from 1.0 to 2.0.\n- Change `lovr.math.newTransform`, `Transform:setTransformation`, and `lovr.graphics.transform` to accept 3 scale parameters instead of 1.\n\n### Fix\n\n- Fix `Mesh:getVertexMap` indices.\n- Fix bug where Meshes wouldn't unmap sometimes.\n- Fix `Collider:getAABB`.\n- Fix `Collider:applyTorque`.\n\n### Remove\n\n- Remove `lovr.audio.getDopplerEffect` and `lovr.audio.setDopplerEffect`.\n\nv0.7.0 - 2017-06-11\n---\n\n### Add\n\n- Add `lovr.physics` module (YES!)\n- Add `lovr.timer.getAverageDelta`\n\n### Change\n\n- Change the window to no longer be resizable.\n- Change the window to have an improved title.\n- Improve error messages in several places.\n\n### Fix\n\n- Fix unintended interactions between window mirroring and shaders.\n- Fix memory leak in `require`.\n- Fix lack of clean up when using Mesh vertex maps.\n- Fix occasional crash when transform stack overflows.\n- Fix WebVR rendering bug when drawing controllers.\n\nv0.6.0-2017-05-06\n---\n\n### Add\n\n- Add support for JSON encoding and decoding using lua-cjson.\n\n### Change\n\n- Add support for additional OpenGL versions including OpenGL ES.\n- Add support for running in a web browser with WebVR.\n\n### Fix\n\n- Fix potential crash when loading equirectangular skyboxes.\n- Fix crash on windows if the save directory does not exist.\n\n### Remove\n\n- Remove headset bounds visibility functions.\n\nv0.5.0 - 2017-04-03\n---\n\n### Add\n\n- Add a no game screen.\n- Add an error screen.\n- Add `lovr.controllerpressed` and `lovr.controllerreleased` callbacks.\n- Add `lovr.focus` callback.\n- Add support for creating skyboxes from a single equirectangular image.\n- Add `lovr --version` command line flag.\n- Add `lovr.getOS`.\n- Add `Source:getFalloff` and `Source:setFalloff`.\n- Add `Source:getVolumeLimits` and `Source:setVolumeLimits`.\n- Add `Source:getCone` and `Source:setCone`.\n- Add `Source:isRelative` and `Source:setRelative`.\n- Add `Source:getVelocity` and `Source:setVelocity`.\n- Add `lovr.audio.getVelocity` and `lovr.audio.setVelocity` (called automatically in `lovr.run`).\n- Add `lovr.audio.getDopplerEffect` and `lovr.audio.setDopplerEffect`.\n- Add `lovr.audio.isSpatialized`.\n- Add `lovr.filesystem.load`.\n- Add `lovr.filesystem.createDirectory`.\n- Add `lovr.filesystem.getAppdataDirectory`.\n- Add `lovr.filesystem.getDirectoryItems`.\n- Add `lovr.filesystem.getLastModified`.\n- Add `lovr.filesystem.getSaveDirectory`.\n- Add `lovr.filesystem.getSize`.\n- Add `lovr.filesystem.isFused`.\n- Add `lovr.filesystem.newBlob`.\n- Add `lovr.filesystem.remove`.\n- Add `lovr.filesystem.mount` and `lovr.filesystem.unmount`.\n- Add `Mesh:isAttributeEnabled` and `Mesh:setAttributeEnabled`.\n- Add `lovr.headset.isMirrored` and `lovr.headset.setMirrored`.  The initial value can be set in `conf.lua` (`t.headset.mirrored`).\n- Add parameters to `lovr.graphics.print` for aligning text horizontally and vertically.\n- Add `Font:getPixelDensity` and `Font:setPixelDensity` for controlling scales of fonts independent of units.\n- Add `Font:getWidth`, `Font:getHeight`, `Font:getAscent`, `Font:getDescent`, and `Font:getBaseline`.\n- Add `lovr.graphics.getBlendMode` and `lovr.graphics.setBlendMode`.\n- Add `lovr.graphics.getSystemLimits` for returning the maximum point size, the maximum texture size, and the maximum supported msaa level for render textures.\n\n### Change\n\n- Rename `Buffer` to `Mesh`.\n- `lovr.graphics.scale` accepts a single argument that will scale all 3 axes.\n- `lovr.graphics.rotate` defaults to rotating around the y axis.\n- Allow sending `Transform`s to `mat4` uniforms in shaders.\n- Framebuffers now clear their depth buffer when created.\n- Rename `Source:getOrientation` and `Source:setOrientation` to `Source:getDirection` and `Source:setDirection`.\n- Allow `lovr.headset.getEyePosition` to accept `nil` as a parameter.\n- Change the signature of `lovr.graphics.print`.\n- Change functions that created resources from files to accept `Blob`s.\n\n### Fix\n\n- Fix coordinate system not resetting when calling `lovr.graphics.reset`.\n- Explicitly error when attempting to position a stereo Source.\n- Fix a few edge cases in reference counting that resulted in crashes.\n- Fix a crash if the error handler caused an error.\n\n### Remove\n\n- Remove `Source:getOrientation` and `Source:setOrientation` (renamed to `getDirection` and `setDirection`).\n- Remove support for several 3D model file formats to reduce executable size.  The supported formats are now OBJ, FBX, and COLLADA.\n- Remove support for several physfs archive formats to reduce executable size.  The only supported format is now ZIP files.\n- Remove `lovr.graphics.setProjection`.\n\nv0.4.0 - 2017-02-17\n---\n\n### Add\n\n- Add `lovr.math` module and `Transform` objects.\n- Add `lovr.graphics.transform`.\n- Add support for font rendering.\n- Add `Buffer:getVertexFormat`.\n- Add `lovr.headset.getEyePosition(eye)`.\n\n### Change\n\n- Change `lovr.graphics.cube`, `Model:draw`, and `Buffer:draw` to accept a `Transform`.\n- Change `lovr.graphics.newModel` to accept a `Texture` to apply to the model as the second argument.\n\n### Fix\n\n- Fix memory allocation issue in `lovr.event.poll`.\n- Fix crash when SteamVR is unavailable.\n- Fix Skybox rendering when culling is enabled.\n\nv0.3.0 - 2017-01-15\n---\n\n### Add\n\n- Add support for framebuffers using `Texture:renderTo`.\n- Add functions for drawing textured primitives by passing a Texture instead of a DrawMode to `lovr.graphics.cube` and `lovr.graphics.plane`.\n- Add shorthand for drawing fullscreen quads with `lovr.graphics.plane(texture)`.\n\n### Change\n\n- Upgrade to OpenVR 1.0.5.\n- headset display to the window on the desktop.\n\nv0.2.0 - 2017-01-06\n---\n\n### Add\n\n- Add `lovr.audio` module.\n- Add support for array uniforms in Shaders.\n\n### Fix\n\n- Fix `lovr.headset.getOrientation` and `Controller:getOrientation`\n\nv0.1.0 - 2016-12-08\n---\n\n### Add\n\n- Add `lovr.event` module.\n- Add `lovr.filesystem` module.\n- Add `lovr.graphics` module.\n- Add `lovr.headset` module.\n- Add `lovr.timer` module.\n"
        },
        {
          "name": "CMakeLists.txt",
          "type": "blob",
          "size": 33.130859375,
          "content": "cmake_minimum_required(VERSION 3.5.0)\ncmake_policy(SET CMP0063 NEW)\ncmake_policy(SET CMP0079 NEW)\ncmake_policy(SET CMP0091 NEW)\nset(CMAKE_OSX_DEPLOYMENT_TARGET \"11.0\" CACHE STRING \"Minimum macOS deployment version\")\nproject(lovr)\n\n# Options\noption(LOVR_ENABLE_AUDIO \"Enable the audio module\" ON)\noption(LOVR_ENABLE_DATA \"Enable the data module\" ON)\noption(LOVR_ENABLE_EVENT \"Enable the event module\" ON)\noption(LOVR_ENABLE_FILESYSTEM \"Enable the filesystem module\" ON)\noption(LOVR_ENABLE_GRAPHICS \"Enable the graphics module\" ON)\noption(LOVR_ENABLE_HEADSET \"Enable the headset module\" ON)\noption(LOVR_ENABLE_MATH \"Enable the math module\" ON)\noption(LOVR_ENABLE_PHYSICS \"Enable the physics module\" ON)\noption(LOVR_ENABLE_SYSTEM \"Enable the system module\" ON)\noption(LOVR_ENABLE_THREAD \"Enable the thread module\" ON)\noption(LOVR_ENABLE_TIMER \"Enable the timer module\" ON)\n\noption(LOVR_ENABLE_UTF8 \"Enable the utf8 module\" ON)\n\noption(LOVR_USE_GLFW \"Use GLFW for desktop windows\" ON)\noption(LOVR_USE_LUAJIT \"Use LuaJIT instead of Lua\" ON)\noption(LOVR_USE_GLSLANG \"Use glslang to compile GLSL shaders\" ON)\noption(LOVR_USE_VULKAN \"Use the Vulkan renderer\" ON)\noption(LOVR_USE_WEBGPU \"Use the WebGPU renderer\" OFF)\noption(LOVR_USE_OPENXR \"Enable the OpenXR backend for the headset module\" ON)\noption(LOVR_USE_WEBXR \"Enable the WebXR backend for the headset module\" OFF)\noption(LOVR_USE_SIMULATOR \"Enable the keyboard/mouse backend for the headset module\" ON)\noption(LOVR_USE_STEAM_AUDIO \"Enable the Steam Audio spatializer (be sure to also set LOVR_STEAM_AUDIO_PATH)\" OFF)\noption(LOVR_USE_OCULUS_AUDIO \"Enable the Oculus Audio spatializer (be sure to also set LOVR_OCULUS_AUDIO_PATH)\" OFF)\n\noption(LOVR_SANITIZE \"Enable Address Sanitizer\" OFF)\noption(LOVR_PROFILE \"Enable Tracy integration\" OFF)\n\noption(LOVR_SYSTEM_GLFW \"Use the system-provided glfw\" OFF)\noption(LOVR_SYSTEM_LUA \"Use the system-provided Lua\" OFF)\noption(LOVR_SYSTEM_OPENXR \"Use the system-provided OpenXR\" OFF)\n\noption(LOVR_BUILD_EXE \"Build an executable (or an apk on Android)\" ON)\noption(LOVR_BUILD_SHARED \"Build a shared library (takes precedence over LOVR_BUILD_EXE)\" OFF)\noption(LOVR_BUILD_BUNDLE \"On macOS, build a .app bundle instead of a raw program\" OFF)\noption(LOVR_BUILD_WITH_SYMBOLS \"Build with C function symbols exposed\" OFF)\n\n# Setup\nif(EMSCRIPTEN)\n  string(CONCAT EMSCRIPTEN_LINKER_FLAGS\n    \"-Os \"\n    \"-sUSE_WEBGPU=1 \"\n    \"-sFORCE_FILESYSTEM=1 \"\n    \"-sINITIAL_HEAP=1677721600 \"\n    \"-sEXPORTED_FUNCTIONS=_main,_webxr_attach,_webxr_detach \"\n    \"-sEXPORTED_RUNTIME_METHODS=getValue,setValue \"\n    \"--js-library \\\"${CMAKE_CURRENT_SOURCE_DIR}/etc/webxr.js\\\" \"\n    \"--shell-file \\\"${CMAKE_CURRENT_SOURCE_DIR}/etc/lovr.html\\\"\"\n  )\n  set(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} -Os\")\n  set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Os\")\n  if(LOVR_ENABLE_THREAD)\n    set(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} -pthread\")\n    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -pthread\")\n  endif()\n  set(CMAKE_EXECUTABLE_SUFFIX \".html\")\n  set(LOVR_USE_WEBXR ON)\n  set(LOVR_USE_OPENXR OFF)\n  set(LOVR_USE_WEBGPU ON)\n  set(LOVR_USE_VULKAN OFF)\nelseif(MSVC)\n  add_compile_options(/MP)\n  set(CMAKE_MSVC_RUNTIME_LIBRARY \"MultiThreaded$<$<CONFIG:Debug>:Debug>DLL\")\nelseif(ANDROID)\n  find_package(Java REQUIRED)\n  set(LOVR_USE_SIMULATOR OFF)\n  if(LOVR_BUILD_EXE)\n    set(LOVR_BUILD_SHARED ON)\n  endif()\nelseif(UNIX)\n  find_package(PkgConfig)\n  if(APPLE)\n    set(LOVR_USE_OPENXR OFF)\n  else()\n    set(CMAKE_SKIP_RPATH OFF)\n  endif()\nendif()\n\nif(NOT ANDROID AND LOVR_BUILD_SHARED)\n  set(LOVR_BUILD_EXE OFF)\nendif()\n\n# GLFW\nif(LOVR_USE_GLFW AND NOT (EMSCRIPTEN OR ANDROID))\n  if(LOVR_SYSTEM_GLFW)\n    pkg_search_module(GLFW REQUIRED glfw3)\n    list(APPEND LOVR_INCLUDES ${GLFW_INCLUDE_DIRS})\n    set(LOVR_GLFW ${GLFW_LIBRARIES})\n  else()\n    set(GLFW_BUILD_EXAMPLES OFF CACHE BOOL \"\")\n    set(GLFW_BUILD_TESTS OFF CACHE BOOL \"\")\n    set(GLFW_BUILD_DOCS OFF CACHE BOOL \"\")\n    set(GLFW_BUILD_WAYLAND OFF CACHE BOOL \"\")\n    set(GLFW_INSTALL OFF CACHE BOOL \"\")\n    set(GLFW_LIBRARY_TYPE \"SHARED\")\n    add_subdirectory(deps/glfw glfw)\n    list(APPEND LOVR_INCLUDES deps/glfw/include)\n    set(LOVR_GLFW glfw ${GLFW_LIBRARIES})\n  endif()\n  unset(LIB_SUFFIX CACHE)\nendif()\n\n# Lua\nif(LOVR_USE_LUAJIT AND NOT EMSCRIPTEN)\n  if(LOVR_SYSTEM_LUA)\n    pkg_search_module(LUAJIT REQUIRED luajit)\n    set(LOVR_LUA_INCLUDE ${LUAJIT_INCLUDE_DIRS})\n    set(LOVR_LUA ${LUAJIT_LIBRARIES})\n  else()\n    set(BUILD_SHARED_LIBS ON)\n    add_subdirectory(deps/luajit luajit)\n    set_target_properties(luajit PROPERTIES EXCLUDE_FROM_ALL 1)\n    if(MSVC)\n      target_compile_definitions(libluajit PRIVATE _CRT_SECURE_NO_WARNINGS)\n      target_compile_definitions(minilua PRIVATE _CRT_SECURE_NO_WARNINGS)\n      target_compile_definitions(buildvm PRIVATE _CRT_SECURE_NO_WARNINGS)\n    endif()\n    set(LOVR_LUA_INCLUDE deps/luajit/src ${CMAKE_BINARY_DIR}/luajit)\n    set(LOVR_LUA libluajit)\n  endif()\nelse()\n  if(LOVR_SYSTEM_LUA)\n    pkg_search_module(LUA REQUIRED lua)\n    set(LOVR_LUA_INCLUDE ${LUA_INCLUDE_DIRS})\n    set(LOVR_LUA ${LUA_LIBRARIES})\n  else()\n    set(LUA_SRC\n      lapi.c lauxlib.c lbaselib.c lcode.c ldblib.c ldebug.c ldo.c ldump.c lfunc.c lgc.c linit.c\n      liolib.c llex.c lmathlib.c lmem.c loadlib.c lobject.c lopcodes.c loslib.c lparser.c lstate.c\n      lstring.c lstrlib.c ltable.c ltablib.c ltm.c lundump.c lvm.c lzio.c\n    )\n    list(TRANSFORM LUA_SRC PREPEND deps/lua/)\n    add_library(lua SHARED ${LUA_SRC})\n    target_link_libraries(lua m)\n    target_link_libraries(lua dl)\n    target_compile_definitions(lua PRIVATE -DLUA_USE_DLOPEN)\n    set(LOVR_LUA_INCLUDE deps/lua)\n    set(LOVR_LUA lua)\n  endif()\nendif()\n\n# MSDF\nif(LOVR_ENABLE_DATA)\n  set(BUILD_SHARED_LIBS ON)\n  set(MSDFGEN_CORE_ONLY ON CACHE BOOL \"\")\n  set(MSDFGEN_BUILD_STANDALONE OFF CACHE BOOL \"\")\n  set(MSDFGEN_USE_VCPKG OFF CACHE BOOL \"\")\n  set(MSDFGEN_USE_CPP11 OFF CACHE BOOL \"\")\n  add_subdirectory(deps/msdfgen msdfgen)\n  list(APPEND LOVR_INCLUDES deps/msdfgen)\n  set(LOVR_MSDF msdfgen-core)\n  if(APPLE)\n    set_target_properties(msdfgen-core PROPERTIES MACOSX_RPATH ON)\n  endif()\nendif()\n\n# Jolt\nif(LOVR_ENABLE_PHYSICS)\n  set(BUILD_SHARED_LIBS OFF)\n  set(JPH_BUILD_SHARED ON CACHE BOOL \"\")\n  set(DEBUG_RENDERER_IN_DEBUG_AND_RELEASE OFF CACHE BOOL \"\")\n  set(PROFILER_IN_DEBUG_AND_RELEASE OFF CACHE BOOL \"\")\n  set(ENABLE_OBJECT_STREAM OFF CACHE BOOL \"\")\n  if(NOT CMAKE_BUILD_TYPE STREQUAL \"Release\")\n    set(GENERATE_DEBUG_SYMBOLS ON CACHE BOOL \"\")\n  endif()\n  add_subdirectory(deps/joltc jolt)\n  set_target_properties(Jolt PROPERTIES MSVC_RUNTIME_LIBRARY \"MultiThreaded$<$<CONFIG:Debug>:Debug>DLL\")\n  set_target_properties(joltc PROPERTIES MSVC_RUNTIME_LIBRARY \"MultiThreaded$<$<CONFIG:Debug>:Debug>DLL\")\n  set(LOVR_JOLT joltc)\nendif()\n\n# glslang\nif(LOVR_USE_GLSLANG)\n  set(ENABLE_HLSL OFF CACHE BOOL \"\")\n  set(ENABLE_SPVREMAPPER OFF CACHE BOOL \"\")\n  set(ENABLE_GLSLANG_INSTALL OFF CACHE BOOL \"\")\n  set(ENABLE_OPT OFF CACHE BOOL \"\")\n  set(ENABLE_CTEST OFF CACHE BOOL \"\")\n  set(BUILD_EXTERNAL OFF CACHE BOOL \"\")\n  set(BUILD_SHARED_LIBS OFF)\n  if(NOT EMSCRIPTEN)\n    set(ENABLE_GLSLANG_BINARIES ON CACHE BOOL \"\")\n  else()\n    set(ENABLE_GLSLANG_BINARIES OFF CACHE BOOL \"\")\n  endif()\n  list(APPEND LOVR_INCLUDES deps/glslang/glslang/Include deps/glslang/glslang/Public)\n  add_subdirectory(deps/glslang glslang)\n  set(LOVR_GLSLANG glslang SPIRV glslang-default-resource-limits)\nendif()\n\n# Vulkan\nif(LOVR_USE_VULKAN)\n  list(APPEND LOVR_INCLUDES deps/vulkan-headers/include)\nendif()\n\n# OpenXR\nif(LOVR_ENABLE_HEADSET AND LOVR_USE_OPENXR)\n  if(LOVR_SYSTEM_OPENXR AND NOT ANDROID)\n    pkg_search_module(OPENXR openxr REQUIRED)\n    list(APPEND LOVR_INCLUDES ${OPENXR_INCLUDE_DIRS})\n    set(LOVR_OPENXR ${OPENXR_LIBRARIES})\n  else()\n    set(DYNAMIC_LOADER ON CACHE BOOL \"\")\n    set(BUILD_WITH_WAYLAND_HEADERS OFF CACHE BOOL \"\")\n    list(APPEND LOVR_INCLUDES deps/openxr/include)\n    add_subdirectory(deps/openxr openxr)\n    set(LOVR_OPENXR openxr_loader)\n  endif()\nendif()\n\n# pthreads\nif(LOVR_ENABLE_THREAD AND NOT (WIN32 OR EMSCRIPTEN))\n  set(THREADS_PREFER_PTHREAD_FLAG ON)\n  find_package(Threads REQUIRED)\n  set(LOVR_PTHREADS Threads::Threads)\nendif()\n\n# Steam Audio (aka Phonon)\nif(LOVR_USE_STEAM_AUDIO)\n  if(NOT LOVR_STEAM_AUDIO_PATH)\n    message(FATAL_ERROR \"LOVR_USE_STEAM_AUDIO requires the LOVR_STEAM_AUDIO_PATH to be set to the location of the Steam Audio folder\")\n  endif()\n  if(CMAKE_SIZEOF_VOID_P EQUAL 4) # Note: SteamAudio distributes 32 bit libs but wiring them up is very verbose\n    message(FATAL_ERROR \"LOVR_USE_STEAM_AUDIO is not currently available on 32 bit builds\")\n  endif()\n  list(APPEND LOVR_INCLUDES \"${LOVR_STEAM_AUDIO_PATH}/include\")\n  add_library(Phonon SHARED IMPORTED)\n  if(ANDROID)\n    set_target_properties(Phonon PROPERTIES IMPORTED_LOCATION \"${LOVR_STEAM_AUDIO_PATH}/lib/Android/arm64/libphonon.so\")\n  elseif(WIN32)\n    set_target_properties(Phonon PROPERTIES IMPORTED_IMPLIB \"${LOVR_STEAM_AUDIO_PATH}/lib/Windows/x64/phonon.lib\")\n    set_target_properties(Phonon PROPERTIES IMPORTED_LOCATION \"${LOVR_STEAM_AUDIO_PATH}/bin/Windows/x64/phonon.dll\")\n  elseif(APPLE)\n    set_target_properties(Phonon PROPERTIES IMPORTED_LOCATION \"${LOVR_STEAM_AUDIO_PATH}/lib/OSX/libphonon.dylib\"\n                                            IMPORTED_SONAME \"@rpath/libphonon.dylib\")  # It doesn't make sense this line is required, but it is\n  else() # Assume Linux. Note: This has *not* been tested. FIXME: When is the .so copied?\n    set_target_properties(Phonon PROPERTIES IMPORTED_LOCATION \"${LOVR_STEAM_AUDIO_PATH}/lib/Linux/x64/libphonon.so\")\n  endif()\n\n  set(LOVR_PHONON Phonon)\nendif()\n\n# Oculus Audio\nif(LOVR_USE_OCULUS_AUDIO)\n  if(NOT LOVR_OCULUS_AUDIO_PATH)\n    message(FATAL_ERROR \"LOVR_USE_OCULUS_AUDIO requires the LOVR_OCULUS_AUDIO_PATH to be set to the location of the Oculus Spatializer Native (AudioSDK) folder\")\n  endif()\n\n  list(APPEND LOVR_INCLUDES \"${LOVR_OCULUS_AUDIO_PATH}/Include\")\n\n  add_library(OculusAudio SHARED IMPORTED)\n  if(ANDROID)\n    set_target_properties(OculusAudio PROPERTIES IMPORTED_LOCATION \"${LOVR_OCULUS_AUDIO_PATH}/Lib/Android/arm64-v8a/libovraudio64.so\")\n  elseif(WIN32) # Note: This has *not* been tested.\n    if(CMAKE_SIZEOF_VOID_P EQUAL 8)\n      set_target_properties(OculusAudio PROPERTIES IMPORTED_IMPLIB \"${LOVR_OCULUS_AUDIO_PATH}/Lib/x64/ovraudio64.lib\")\n      set_target_properties(OculusAudio PROPERTIES IMPORTED_LOCATION \"${LOVR_OCULUS_AUDIO_PATH}/Lib/x64/ovraudio64.dll\")\n    else () # ARM and ARM64 are also valid values for CMAKE_GENERATOR_PLATFORM but we will ignore this\n      set_target_properties(OculusAudio PROPERTIES IMPORTED_IMPLIB \"${LOVR_OCULUS_AUDIO_PATH}/Lib/Win32/ovraudio32.lib\")\n      set_target_properties(OculusAudio PROPERTIES IMPORTED_LOCATION \"${LOVR_OCULUS_AUDIO_PATH}/Lib/Win32/ovraudio32.dll\")\n    endif()\n  elseif(APPLE)\n    # Oculus Audio ships with an intel .framework, but (as of 25.0.0) it is broken. We can convert it to a working dylib with install_name_tool in a custom target:\n    SET(OCULUS_AUDIO_MAC_LIB_DIR \"${CMAKE_CURRENT_BINARY_DIR}/ovraudio\")\n    SET(OCULUS_AUDIO_MAC_LIB_FILE \"${OCULUS_AUDIO_MAC_LIB_DIR}/ovraudio64.dylib\")\n    SET(OCULUS_AUDIO_MAC_RPATH \"@rpath/ovraudio64.dylib\")\n    file(MAKE_DIRECTORY \"${OCULUS_AUDIO_MAC_LIB_DIR}\")\n    add_custom_command(OUTPUT \"${OCULUS_AUDIO_MAC_LIB_FILE}\"\n                   COMMAND ${CMAKE_COMMAND} -E copy \"${LOVR_OCULUS_AUDIO_PATH}/Lib/mac64/OVRAudio64.framework/Versions/A/ovraudio64\" \"${OCULUS_AUDIO_MAC_LIB_FILE}\"\n                   COMMAND install_name_tool -id ${OCULUS_AUDIO_MAC_RPATH} \"${OCULUS_AUDIO_MAC_LIB_FILE}\"\n                   WORKING_DIRECTORY \"${CMAKE_CURRENT_BINARY_DIR}\")\n    add_custom_target(OculusAudioFixed DEPENDS \"${OCULUS_AUDIO_MAC_LIB_FILE}\")\n    add_dependencies(OculusAudio OculusAudioFixed)\n    # IMPORTED_SONAME required because the automatic rpath requires the dylib file to exist before builds start\n    set_target_properties(OculusAudio PROPERTIES IMPORTED_LOCATION \"${OCULUS_AUDIO_MAC_LIB_FILE}\"\n                                                 IMPORTED_SONAME \"${OCULUS_AUDIO_MAC_RPATH}\")\n  else() # Assume Linux. Note: This has *not* been tested. FIXME: When is the .so copied?\n    set_target_properties(OculusAudio PROPERTIES IMPORTED_LOCATION \"${LOVR_OCULUS_AUDIO_PATH}/Lib/Linux64/libovraudio64.so\")\n  endif()\n\n  set(LOVR_OCULUS_AUDIO OculusAudio)\nendif()\n\n# LÖVR\n\nset(LOVR_SRC\n  src/core/fs.c\n  src/api/api.c\n  src/api/l_lovr.c\n  src/util.c\n)\n\nif(LOVR_BUILD_EXE)\n  list(APPEND LOVR_SRC src/main.c)\nendif()\n\nif(LOVR_BUILD_SHARED)\n  add_library(lovr SHARED ${LOVR_SRC})\nelseif(LOVR_BUILD_EXE)\n  add_executable(lovr ${LOVR_SRC})\nelse()\n  return()\nendif()\n\nif(NOT LOVR_BUILD_EXE)\n  target_compile_definitions(lovr PUBLIC LOVR_OMIT_MAIN) # specifically for win32 WinMain\nendif()\n\nif(LOVR_BUILD_WITH_SYMBOLS)\n  set_target_properties(lovr PROPERTIES C_VISIBILITY_PRESET \"default\")\nelse()\n  set_target_properties(lovr PROPERTIES C_VISIBILITY_PRESET \"hidden\")\nendif()\n\nset_target_properties(lovr PROPERTIES C_STANDARD 11)\nset_target_properties(lovr PROPERTIES C_STANDARD_REQUIRED ON)\n\ntarget_include_directories(lovr PRIVATE\n  ${LOVR_INCLUDES}\n  ${LOVR_LUA_INCLUDE}\n  ${CMAKE_CURRENT_SOURCE_DIR}/src\n  ${CMAKE_CURRENT_SOURCE_DIR}/src/modules\n  ${CMAKE_CURRENT_SOURCE_DIR}/src/lib/std\n  ${CMAKE_CURRENT_SOURCE_DIR}/etc\n)\n\ntarget_link_libraries(lovr\n  ${LOVR_GLFW}\n  ${LOVR_LUA}\n  ${LOVR_MSDF}\n  ${LOVR_JOLT}\n  ${LOVR_GLSLANG}\n  ${LOVR_OPENXR}\n  ${LOVR_OCULUS_AUDIO}\n  ${LOVR_PTHREADS}\n  ${EMSCRIPTEN_LINKER_FLAGS}\n)\n\nif(LOVR_SANITIZE)\n  set(LOVR_SANITIZE_FLAGS \"-fsanitize=address,undefined\" \"-O1\" \"-fno-omit-frame-pointer\")\n  target_compile_options(lovr PRIVATE ${LOVR_SANITIZE_FLAGS})\n  target_link_options(lovr PRIVATE ${LOVR_SANITIZE_FLAGS})\nendif()\n\nif(LOVR_PROFILE)\n  if(CMAKE_BUILD_TYPE STREQUAL \"Debug\")\n    message(FATAL_ERROR \"You probably want to build in release mode when Tracy is enabled\")\n  endif()\n  option(TRACY_ENABLE \"\" ON)\n  add_subdirectory(deps/tracy)\n  target_compile_definitions(lovr PRIVATE LOVR_PROFILE)\n  target_link_libraries(lovr Tracy::TracyClient)\n  target_include_directories(lovr PRIVATE deps/tracy/public/tracy)\nendif()\n\nif(LOVR_ENABLE_AUDIO OR LOVR_ENABLE_DATA)\n  target_sources(lovr PRIVATE\n    src/lib/miniaudio/miniaudio.c\n  )\nendif()\n\nif(LOVR_ENABLE_AUDIO)\n  target_sources(lovr PRIVATE\n    src/modules/audio/audio.c\n    src/modules/audio/spatializer_simple.c\n    src/api/l_audio.c\n    src/api/l_audio_source.c\n  )\n\n  if(LOVR_USE_STEAM_AUDIO)\n    target_compile_definitions(lovr PRIVATE LOVR_ENABLE_PHONON_SPATIALIZER)\n    target_sources(lovr PRIVATE src/modules/audio/spatializer_phonon.c)\n    # Dynamically linked at runtime, so this is not otherwise a dependency\n    add_dependencies(lovr ${LOVR_PHONON})\n  endif()\n\n  if(LOVR_USE_OCULUS_AUDIO)\n    target_compile_definitions(lovr PRIVATE LOVR_ENABLE_OCULUS_SPATIALIZER)\n    target_sources(lovr PRIVATE src/modules/audio/spatializer_oculus.c)\n  endif()\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_AUDIO)\nendif()\n\nif(LOVR_ENABLE_DATA)\n  target_sources(lovr PRIVATE\n    src/modules/data/blob.c\n    src/modules/data/image.c\n    src/modules/data/modelData.c\n    src/modules/data/modelData_gltf.c\n    src/modules/data/modelData_obj.c\n    src/modules/data/modelData_stl.c\n    src/modules/data/rasterizer.c\n    src/modules/data/sound.c\n    src/api/l_data.c\n    src/api/l_data_blob.c\n    src/api/l_data_image.c\n    src/api/l_data_modelData.c\n    src/api/l_data_rasterizer.c\n    src/api/l_data_sound.c\n    src/lib/minimp3/minimp3.c\n    src/lib/stb/stb_image.c\n    src/lib/stb/stb_truetype.c\n    src/lib/stb/stb_vorbis.c\n    src/lib/jsmn/jsmn.c\n  )\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_DATA)\nendif()\n\nif(LOVR_ENABLE_EVENT)\n  target_sources(lovr PRIVATE\n    src/modules/event/event.c\n    src/api/l_event.c\n  )\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_EVENT)\nendif()\n\nif(LOVR_ENABLE_FILESYSTEM)\n  target_sources(lovr PRIVATE\n    src/modules/filesystem/filesystem.c\n    src/api/l_filesystem.c\n    src/api/l_filesystem_file.c\n    src/lib/miniz/miniz_tinfl.c\n  )\n\n  # dmon\n  if(NOT EMSCRIPTEN)\n    target_sources(lovr PRIVATE src/lib/dmon/dmon.c)\n    if(APPLE)\n      find_library(CORE_FOUNDATION CoreFoundation)\n      find_library(CORE_SERVICES CoreServices)\n      target_link_libraries(lovr \"${CORE_FOUNDATION}\" \"${CORE_SERVICES}\")\n    endif()\n  endif()\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_FILESYSTEM)\nendif()\n\nif(LOVR_ENABLE_GRAPHICS)\n  target_sources(lovr PRIVATE\n    src/core/spv.c\n    src/modules/graphics/graphics.c\n    src/api/l_graphics.c\n    src/api/l_graphics_buffer.c\n    src/api/l_graphics_texture.c\n    src/api/l_graphics_sampler.c\n    src/api/l_graphics_shader.c\n    src/api/l_graphics_material.c\n    src/api/l_graphics_font.c\n    src/api/l_graphics_mesh.c\n    src/api/l_graphics_model.c\n    src/api/l_graphics_readback.c\n    src/api/l_graphics_pass.c\n  )\n\n  if(LOVR_USE_GLSLANG)\n    target_compile_definitions(lovr PRIVATE LOVR_USE_GLSLANG)\n  endif()\n\n  if(LOVR_USE_VULKAN)\n    target_compile_definitions(lovr PRIVATE LOVR_VK)\n    target_sources(lovr PRIVATE src/core/gpu_vk.c)\n  endif()\n\n  if(LOVR_USE_WEBGPU)\n    target_compile_definitions(lovr PRIVATE LOVR_WEBGPU)\n    target_sources(lovr PRIVATE src/core/gpu_web.c)\n  endif()\n\n  function(compile_shaders)\n    if(LOVR_USE_GLSLANG AND ENABLE_GLSLANG_BINARIES AND NOT ANDROID)\n      set(GLSLANG_VALIDATOR $<TARGET_FILE:glslang-standalone>)\n    elseif(Vulkan_GLSLANG_VALIDATOR_EXECUTABLE)\n      set(GLSLANG_VALIDATOR \"${Vulkan_GLSLANG_VALIDATOR_EXECUTABLE}\")\n    else()\n      find_program(GLSLANG_VALIDATOR glslang)\n      if(NOT GLSLANG_VALIDATOR)\n        message(FATAL_ERROR \"Need glslangValidator installed or LOVR_USE_GLSLANG enabled\")\n      endif()\n    endif()\n    set(LOVR_GLSL \"${CMAKE_CURRENT_SOURCE_DIR}/etc/shaders/lovr.glsl\")\n    file(GLOB shader_files \"etc/shaders/*.${ARGV0}\")\n    foreach(shader_file ${shader_files})\n      string(REGEX MATCH \"([^\\/]+)\\.${ARGV0}\" shader ${shader_file})\n      string(REPLACE \".${ARGV0}\" \"\" shader ${shader})\n      add_custom_command(\n        OUTPUT ${shader_file}.h\n        DEPENDS ${shader_file} ${LOVR_GLSL}\n        COMMAND\n          ${GLSLANG_VALIDATOR}\n          --quiet\n          $<$<CONFIG:Debug>:-gVS>\n          --target-env vulkan1.1\n          --vn lovr_shader_${shader}_${ARGV0}\n          -o ${shader_file}.h\n          ${shader_file}\n      )\n      target_sources(lovr PRIVATE ${shader_file}.h)\n    endforeach()\n  endfunction()\n\n  compile_shaders(\"vert\")\n  compile_shaders(\"frag\")\n  compile_shaders(\"comp\")\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_GRAPHICS)\nendif()\n\nif(LOVR_ENABLE_HEADSET)\n  target_sources(lovr PRIVATE\n    src/modules/headset/headset.c\n    src/api/l_headset.c\n    src/api/l_headset_layer.c\n  )\n\n  if(LOVR_USE_OPENXR)\n    target_compile_definitions(lovr PRIVATE LOVR_USE_OPENXR)\n    target_sources(lovr PRIVATE src/modules/headset/headset_openxr.c)\n  endif()\n  if(LOVR_USE_WEBXR)\n    target_compile_definitions(lovr PRIVATE LOVR_USE_WEBXR)\n    target_sources(lovr PRIVATE src/modules/headset/headset_webxr.c)\n  endif()\n  if(LOVR_USE_SIMULATOR)\n    target_compile_definitions(lovr PRIVATE LOVR_USE_SIMULATOR)\n    target_sources(lovr PRIVATE src/modules/headset/headset_simulator.c)\n  endif()\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_HEADSET)\nendif()\n\nif(LOVR_ENABLE_MATH)\n  target_sources(lovr PRIVATE\n    src/modules/math/math.c\n    src/api/l_math.c\n    src/api/l_math_curve.c\n    src/api/l_math_randomGenerator.c\n    src/api/l_math_vectors.c\n    src/lib/noise/simplexnoise1234.c\n  )\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_MATH)\nendif()\n\nif(LOVR_ENABLE_PHYSICS)\n  target_sources(lovr PRIVATE\n    src/modules/physics/physics.c\n    src/api/l_physics.c\n    src/api/l_physics_collider.c\n    src/api/l_physics_contact.c\n    src/api/l_physics_joints.c\n    src/api/l_physics_shapes.c\n    src/api/l_physics_world.c\n  )\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_PHYSICS)\nendif()\n\nif(LOVR_ENABLE_SYSTEM)\n  target_sources(lovr PRIVATE\n    src/modules/system/system.c\n    src/api/l_system.c\n  )\n\n  if(LOVR_USE_GLFW)\n    target_compile_definitions(lovr PRIVATE LOVR_USE_GLFW)\n  endif()\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_SYSTEM)\nendif()\n\nif(LOVR_ENABLE_THREAD)\n  target_sources(lovr PRIVATE\n    src/core/job.c\n    src/modules/thread/thread.c\n    src/api/l_thread.c\n    src/api/l_thread_channel.c\n    src/api/l_thread_thread.c\n  )\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_THREAD)\nendif()\n\nif(LOVR_ENABLE_TIMER)\n  target_sources(lovr PRIVATE src/modules/timer/timer.c src/api/l_timer.c)\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_TIMER)\nendif()\n\nif(LOVR_ENABLE_UTF8)\n  target_sources(lovr PRIVATE src/lib/luax/lutf8lib.c)\nelse()\n  target_compile_definitions(lovr PRIVATE LOVR_DISABLE_UTF8)\nendif()\n\n# Plugins\nif(NOT EMSCRIPTEN)\n  set(LOVR 1)\n  if(NOT DEFINED LOVR_PLUGINS)\n    file(GLOB LOVR_PLUGINS ${CMAKE_SOURCE_DIR}/plugins/*)\n  endif()\n  function(glob_targets dir targets)\n    get_directory_property(subdirectories DIRECTORY \"${dir}\" SUBDIRECTORIES)\n    foreach(subdirectory IN LISTS subdirectories)\n      glob_targets(\"${subdirectory}\" ${targets})\n    endforeach()\n    get_directory_property(dir_targets DIRECTORY \"${dir}\" BUILDSYSTEM_TARGETS)\n    set(${targets} ${${targets}} ${dir_targets} PARENT_SCOPE)\n  endfunction()\n  foreach(PLUGIN_PATH ${LOVR_PLUGINS})\n    if(IS_DIRECTORY ${PLUGIN_PATH} AND EXISTS ${PLUGIN_PATH}/CMakeLists.txt)\n      get_filename_component(PLUGIN \"${PLUGIN_PATH}\" NAME)\n      add_subdirectory(${PLUGIN_PATH} \"${CMAKE_CURRENT_BINARY_DIR}/plugins/${PLUGIN}\")\n      get_directory_property(PLUGIN_TARGETS DIRECTORY ${PLUGIN_PATH} DEFINITION LOVR_PLUGIN_TARGETS)\n      if(NOT PLUGIN_TARGETS)\n        glob_targets(${PLUGIN_PATH} PLUGIN_TARGETS)\n      endif()\n      set_target_properties(${PLUGIN_TARGETS} PROPERTIES LIBRARY_OUTPUT_DIRECTORY \"${CMAKE_CURRENT_BINARY_DIR}/plugins/${PLUGIN}\")\n      foreach(PLUGIN_TARGET ${PLUGIN_TARGETS})\n        target_include_directories(${PLUGIN_TARGET} PRIVATE ${LOVR_LUA_INCLUDE})\n        target_link_libraries(${PLUGIN_TARGET} ${LOVR_LUA})\n      endforeach()\n      list(APPEND ALL_PLUGIN_TARGETS ${PLUGIN_TARGETS})\n    endif()\n  endforeach()\nendif()\n\n# Resources\nfile(GLOB LOVR_RESOURCES \"etc/*.ttf\" \"etc/*.lua\" \"etc/shaders/*.glsl\")\nforeach(path ${LOVR_RESOURCES})\n\n  # Turn the absolute path into a C variable like etc_boot_lua\n  file(RELATIVE_PATH identifier ${CMAKE_CURRENT_SOURCE_DIR} ${path})\n  string(MAKE_C_IDENTIFIER ${identifier} identifier)\n\n  # Read the file and turn the bytes into comma-separated hex literals\n  file(READ ${path} data HEX)\n  string(REGEX REPLACE \"([0-9a-f][0-9a-f])\" \"0x\\\\1,\" data ${data})\n\n  # Generate the output filename by adding .h to the input filename\n  string(CONCAT output ${path} \".h\")\n\n  # Write some xxd-compatible C code!\n  file(WRITE ${output} \"const unsigned char ${identifier}[] = {${data}};\\nconst unsigned int ${identifier}_len = sizeof(${identifier});\\n\")\nendforeach()\n\nif(NOT ANDROID AND NOT EMSCRIPTEN)\n  if(APPLE AND LOVR_BUILD_BUNDLE)\n    set(NOGAME_BUNDLE \"${CMAKE_CURRENT_BINARY_DIR}/lovr.app/Contents/Resources/nogame.lovr\")\n  else()\n    set(NOGAME_BUNDLE \"$<TARGET_FILE:lovr>\")\n  endif()\n  add_custom_command(TARGET lovr POST_BUILD\n    DEPENDS \"etc/nogame\"\n    WORKING_DIRECTORY \"${CMAKE_CURRENT_SOURCE_DIR}/etc/nogame\"\n    COMMAND ${CMAKE_COMMAND} -E tar c \"${CMAKE_CURRENT_BINARY_DIR}/nogame.zip\" --format=zip .\n    COMMAND ${CMAKE_COMMAND} -E cat \"${CMAKE_CURRENT_BINARY_DIR}/nogame.zip\" >> ${NOGAME_BUNDLE}\n  )\nendif()\n\nif(LOVR_VERSION_HASH)\n  target_compile_definitions(lovr PRIVATE LOVR_VERSION_HASH=${LOVR_VERSION_HASH})\nendif()\n\n# Add a custom target that is always out of date so libraries are always moved\nadd_custom_target(move_files ALL)\n\n# Moves something from etc to the build directory\nfunction(move_resource)\n  set(SRC \"${CMAKE_CURRENT_SOURCE_DIR}/etc/${ARGV0}\")\n  add_custom_command(TARGET lovr POST_BUILD\n    DEPENDS ${SRC}\n    COMMAND ${CMAKE_COMMAND} -E copy ${SRC} $<TARGET_FILE_DIR:lovr>/${ARGV0}\n  )\nendfunction()\n\n# Platforms\nif(WIN32)\n  target_sources(lovr PRIVATE src/core/os_win32.c)\n  target_sources(lovr PRIVATE etc/lovr.rc)\n  if(MSVC)\n    set_target_properties(lovr PROPERTIES COMPILE_FLAGS /wd4244)\n    # Excuse anonymous union for type punning\n    set_source_files_properties(src/util.c src/modules/graphics/graphics.c PROPERTIES COMPILE_FLAGS /wd4116)\n    # Excuse unsigned negation for flag-magic bit math\n    set_source_files_properties(src/modules/audio/audio.c PROPERTIES COMPILE_FLAGS /wd4146)\n    set_source_files_properties(src/lib/minimp3/minimp3.c PROPERTIES COMPILE_FLAGS /wd4267)\n  else()\n    set_target_properties(lovr PROPERTIES COMPILE_FLAGS \"-MP\")\n  endif()\n  if(NOT LOVR_BUILD_SHARED)\n    set_target_properties(lovr PROPERTIES LINK_FLAGS_DEBUG \"/SUBSYSTEM:console /ENTRY:WinMainCRTStartup\")\n    set_target_properties(lovr PROPERTIES LINK_FLAGS_RELEASE \"/SUBSYSTEM:windows /ENTRY:WinMainCRTStartup\")\n  endif()\n  target_compile_definitions(lovr PRIVATE _CRT_SECURE_NO_WARNINGS)\n  target_compile_definitions(lovr PRIVATE _CRT_NONSTDC_NO_WARNINGS)\n\n  if(MSVC_VERSION VERSION_LESS 1900)\n    target_compile_definitions(lovr PRIVATE inline=__inline snprintf=_snprintf)\n  endif()\n\n  function(move_dll)\n    if(TARGET ${ARGV0})\n      add_custom_command(TARGET move_files POST_BUILD\n        COMMAND ${CMAKE_COMMAND} -E copy\n        $<TARGET_FILE:${ARGV0}>\n        $<TARGET_FILE_DIR:lovr>/$<TARGET_FILE_NAME:${ARGV0}>\n      )\n    endif()\n  endfunction()\n\n  move_dll(${LOVR_GLFW})\n  move_dll(${LOVR_LUA})\n  move_dll(${LOVR_JOLT})\n  move_dll(${LOVR_MSDF})\n  move_dll(${LOVR_OCULUS_AUDIO})\n  move_dll(${LOVR_PHONON})\n  move_dll(${LOVR_OPENXR})\n  foreach(target ${ALL_PLUGIN_TARGETS})\n    move_dll(${target})\n  endforeach()\n  move_resource(\"lovrc.bat\")\nelseif(APPLE)\n  find_library(AVFOUNDATION AVFoundation)\n  target_link_libraries(lovr objc ${AVFOUNDATION})\n  target_sources(lovr PRIVATE src/core/os_macos.c)\n  set_source_files_properties(src/core/os_macos.c PROPERTIES COMPILE_FLAGS -xobjective-c)\n  set_target_properties(lovr PROPERTIES\n    MACOSX_RPATH TRUE\n    BUILD_WITH_INSTALL_RPATH TRUE\n    INSTALL_RPATH \"@executable_path\"\n    ENABLE_EXPORTS ON\n  )\n  if(LOVR_BUILD_BUNDLE)\n    set(EXE_DIR ${CMAKE_CURRENT_BINARY_DIR}/lovr.app/Contents/MacOS)\n    target_sources(lovr PRIVATE \"${CMAKE_CURRENT_SOURCE_DIR}/etc/lovr.icns\")\n    set_target_properties(lovr PROPERTIES\n      MACOSX_BUNDLE TRUE\n      MACOSX_BUNDLE_INFO_PLIST \"${CMAKE_CURRENT_SOURCE_DIR}/etc/Info.plist\"\n      RESOURCE \"${CMAKE_CURRENT_SOURCE_DIR}/etc/lovr.icns\"\n    )\n  else()\n    set(EXE_DIR ${CMAKE_CURRENT_BINARY_DIR}/bin)\n    set_target_properties(lovr PROPERTIES RUNTIME_OUTPUT_DIRECTORY \"${CMAKE_BINARY_DIR}/bin\")\n  endif()\n  function(move_lib)\n    if(TARGET ${ARGV0})\n      get_target_property(TARGET_TYPE ${ARGV0} TYPE)\n      if(${TARGET_TYPE} STREQUAL \"SHARED_LIBRARY\")\n        add_custom_command(TARGET move_files POST_BUILD\n          COMMAND ${CMAKE_COMMAND} -E copy\n          $<TARGET_SONAME_FILE:${ARGV0}>\n          ${EXE_DIR}/$<TARGET_SONAME_FILE_NAME:${ARGV0}>\n        )\n      else()\n        add_custom_command(TARGET move_files POST_BUILD\n          COMMAND ${CMAKE_COMMAND} -E copy\n          $<TARGET_FILE:${ARGV0}>\n          ${EXE_DIR}/$<TARGET_FILE_NAME:${ARGV0}>\n        )\n      endif()\n    endif()\n  endfunction()\n  move_lib(${LOVR_GLFW})\n  move_lib(${LOVR_LUA})\n  move_lib(${LOVR_JOLT})\n  move_lib(${LOVR_MSDF})\n  move_lib(${LOVR_OCULUS_AUDIO})\n  move_lib(${LOVR_PHONON})\n  foreach(target ${ALL_PLUGIN_TARGETS})\n    move_lib(${target})\n  endforeach()\nelseif(EMSCRIPTEN)\n  target_sources(lovr PRIVATE src/core/os_wasm.c)\n  set_target_properties(lovr PROPERTIES ENABLE_EXPORTS ON)\n  configure_file(etc/lovr.ico favicon.ico COPYONLY)\nelseif(ANDROID)\n  set(ANDROID_MANIFEST \"${CMAKE_CURRENT_SOURCE_DIR}/etc/AndroidManifest.xml\" CACHE STRING \"The AndroidManifest.xml file to use\")\n  file(READ ${ANDROID_MANIFEST} ANDROID_MANIFEST_CONTENT)\n  string(REGEX MATCH \"package=\\\"([^\\\"]*)\" _ ${ANDROID_MANIFEST_CONTENT})\n  set(ANDROID_PACKAGE ${CMAKE_MATCH_1})\n\n  string(REPLACE \".\" \"_\" ANDROID_PACKAGE_C ${ANDROID_PACKAGE})\n  string(REPLACE \".\" \"/\" ANDROID_PACKAGE_JAVA ${ANDROID_PACKAGE})\n  configure_file(${CMAKE_CURRENT_SOURCE_DIR}/etc/Activity.java ${CMAKE_CURRENT_BINARY_DIR}/Activity.java)\n  target_compile_definitions(lovr PRIVATE \"LOVR_JAVA_PACKAGE=${ANDROID_PACKAGE_C}\")\n\n  target_sources(lovr PRIVATE src/core/os_android.c)\n  target_link_libraries(lovr log android dl)\n  target_include_directories(lovr PRIVATE \"${ANDROID_NDK}/sources/android/native_app_glue\")\n\n  # Dynamically linked targets output libraries in raw/lib/<ABI> for easy including in apk with aapt\n  set_target_properties(\n    lovr\n    ${LOVR_JOLT}\n    ${LOVR_MSDF}\n    ${LOVR_LUA}\n    PROPERTIES LIBRARY_OUTPUT_DIRECTORY \"${CMAKE_CURRENT_BINARY_DIR}/raw/lib/${ANDROID_ABI}\"\n  )\n\n  if(LOVR_BUILD_EXE)\n    set(ANDROID_JAR \"${ANDROID_SDK}/platforms/${ANDROID_PLATFORM}/android.jar\")\n    set(ANDROID_TOOLS \"${ANDROID_SDK}/build-tools/${ANDROID_BUILD_TOOLS_VERSION}\")\n    set(ANDROID_ASSETS \"${CMAKE_CURRENT_SOURCE_DIR}/etc/nogame\" CACHE STRING \"The project folder to include in the APK\")\n\n    if(LOVR_USE_OPENXR)\n      add_custom_command(TARGET move_files POST_BUILD\n        COMMAND ${CMAKE_COMMAND} -E copy\n        $<TARGET_SONAME_FILE:${LOVR_OPENXR}>\n        raw/lib/${ANDROID_ABI}/libopenxr_loader.so\n      )\n\n      configure_file(\"${ANDROID_NDK}/toolchains/llvm/prebuilt/${ANDROID_HOST_TAG}/sysroot/usr/lib/aarch64-linux-android/libc++_shared.so\" \"raw/lib/${ANDROID_ABI}/libc++_shared.so\" COPYONLY)\n    endif()\n\n    if(LOVR_USE_OCULUS_AUDIO)\n      get_target_property(OCULUS_AUDIO_LIB ${LOVR_OCULUS_AUDIO} IMPORTED_LOCATION)\n      file(COPY ${OCULUS_AUDIO_LIB} DESTINATION raw/lib/${ANDROID_ABI})\n    endif()\n\n    if(LOVR_USE_STEAM_AUDIO)\n      get_target_property(PHONON_LIB ${LOVR_PHONON} IMPORTED_LOCATION)\n      file(COPY ${PHONON_LIB} DESTINATION raw/lib/${ANDROID_ABI})\n    endif()\n\n    # Make an apk\n    add_custom_target(\n      buildAPK ALL\n      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}\n      COMMAND ${CMAKE_COMMAND} -E copy \"${ANDROID_MANIFEST}\" AndroidManifest.xml\n      COMMAND ${Java_JAVAC_EXECUTABLE} -classpath \"${ANDROID_JAR}\" -d . Activity.java\n      COMMAND ${ANDROID_TOOLS}/d8 --min-api ${ANDROID_NATIVE_API_LEVEL} --output raw ${ANDROID_PACKAGE_JAVA}/Activity.class\n      COMMAND\n        ${ANDROID_TOOLS}/aapt\n        package -f\n        ${PACKAGE_RENAME}\n        -0 so\n        -M AndroidManifest.xml\n        -I ${ANDROID_JAR}\n        -F lovr.unaligned.apk\n        -A ${ANDROID_ASSETS}\n        raw\n      COMMAND ${ANDROID_TOOLS}/zipalign -f -p 4 lovr.unaligned.apk lovr.unsigned.apk\n      COMMAND ${ANDROID_TOOLS}/apksigner\n        sign\n        --ks ${ANDROID_KEYSTORE}\n        $<$<BOOL:${ANDROID_KEYSTORE_PASS}>:--ks-pass> $<$<BOOL:${ANDROID_KEYSTORE_PASS}>:${ANDROID_KEYSTORE_PASS}>\n        $<$<BOOL:${ANDROID_KEY_PASS}>:--key-pass> $<$<BOOL:${ANDROID_KEY_PASS}>:${ANDROID_KEY_PASS}>\n        --in lovr.unsigned.apk\n        --out lovr.apk\n      COMMAND ${CMAKE_COMMAND} -E remove lovr.unaligned.apk lovr.unsigned.apk AndroidManifest.xml Activity.java\n      COMMAND ${CMAKE_COMMAND} -E remove_directory org\n    )\n\n    add_dependencies(buildAPK lovr)\n\n    if(CMAKE_BUILD_TYPE STREQUAL Release)\n      add_custom_target(\n        strip ALL\n        WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}\n        COMMAND ${CMAKE_STRIP} raw/lib/${ANDROID_ABI}/*.so\n      )\n      add_dependencies(strip lovr)\n      add_dependencies(buildAPK strip)\n    endif()\n\n    # Copy plugin libraries to lib folder before packaging APK\n    foreach(target ${ALL_PLUGIN_TARGETS})\n      get_target_property(TARGET_TYPE ${target} TYPE)\n      if(${TARGET_TYPE} STREQUAL \"SHARED_LIBRARY\")\n        add_custom_command(TARGET move_files POST_BUILD\n          COMMAND ${CMAKE_COMMAND} -E copy\n            $<TARGET_FILE:${target}>\n            raw/lib/${ANDROID_ABI}/$<TARGET_SONAME_FILE_NAME:${target}>\n        )\n      elseif(${TARGET_TYPE} STREQUAL \"MODULE_LIBRARY\")\n        add_custom_command(TARGET move_files POST_BUILD\n          COMMAND ${CMAKE_COMMAND} -E copy\n            $<TARGET_FILE:${target}>\n            raw/lib/${ANDROID_ABI}/$<TARGET_FILE_NAME:${target}>\n        )\n      endif()\n    endforeach()\n    add_dependencies(buildAPK move_files)\n  endif()\nelseif(UNIX)\n  target_sources(lovr PRIVATE src/core/os_linux.c)\n  if(LOVR_USE_GLFW)\n    target_link_libraries(lovr X11 xcb X11-xcb)\n  else()\n    target_link_libraries(lovr xcb xcb-xinput xcb-xkb xkbcommon xkbcommon-x11)\n  endif()\n  set_target_properties(lovr PROPERTIES\n    RUNTIME_OUTPUT_DIRECTORY \"${CMAKE_BINARY_DIR}/bin\"\n    BUILD_WITH_INSTALL_RPATH TRUE\n    INSTALL_RPATH \"\\$ORIGIN\"\n    ENABLE_EXPORTS ON\n  )\n  function(move_lib)\n    if(TARGET ${ARGV0})\n      get_target_property(TARGET_TYPE ${ARGV0} TYPE)\n      if(${TARGET_TYPE} STREQUAL \"MODULE_LIBRARY\")\n        add_custom_command(TARGET move_files POST_BUILD\n          COMMAND ${CMAKE_COMMAND} -E copy\n          $<TARGET_FILE:${ARGV0}>\n          ${CMAKE_BINARY_DIR}/bin/$<TARGET_FILE_NAME:${ARGV0}>\n        )\n      elseif(${TARGET_TYPE} STREQUAL \"SHARED_LIBRARY\")\n        add_custom_command(TARGET move_files POST_BUILD\n          COMMAND ${CMAKE_COMMAND} -E copy\n          $<TARGET_SONAME_FILE:${ARGV0}>\n          ${CMAKE_BINARY_DIR}/bin/$<TARGET_SONAME_FILE_NAME:${ARGV0}>\n        )\n      endif()\n    endif()\n  endfunction()\n  move_lib(${LOVR_GLFW})\n  move_lib(${LOVR_LUA})\n  move_lib(${LOVR_JOLT})\n  move_lib(${LOVR_MSDF})\n  move_lib(${LOVR_OPENXR})\n  move_lib(${LOVR_OCULUS_AUDIO})\n  foreach(target ${ALL_PLUGIN_TARGETS})\n    move_lib(${target})\n  endforeach()\n  if(LOVR_BUILD_BUNDLE)\n    move_resource(\"lovr.desktop\")\n    move_resource(\"AppRun\")\n    move_resource(\"logo.svg\")\n  endif()\nendif()\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.060546875,
          "content": "Copyright (c) 2025 Bjorn Swenson and other LÖVR contributors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 4.162109375,
          "content": "# LÖVR\n\n<a href=\"https://lovr.org\"><img align=\"right\" src=\"https://lovr.org/static/img/logo.svg\" width=\"180\"/></a>\n\n> **A simple Lua framework for rapidly building VR experiences.**\n\nYou can use LÖVR to easily create VR experiences without much setup or programming experience.  The framework is tiny, fast, open source, and supports lots of different platforms and devices.\n\n[![Build](https://github.com/bjornbytes/lovr/actions/workflows/build.yml/badge.svg?event=push)](https://github.com/bjornbytes/lovr/actions/workflows/build.yml)\n[![Version](https://img.shields.io/github/release/bjornbytes/lovr.svg?label=version)](https://github.com/bjornbytes/lovr/releases)\n[![Matrix](https://img.shields.io/badge/chat-matrix-0ba378.svg)](https://lovr.org/matrix)\n[![Discord](https://img.shields.io/badge/chat-discord-404eed.svg)](https://lovr.org/discord)\n\n[**Homepage**](https://lovr.org) | [**Documentation**](https://lovr.org/docs) | [**FAQ**](https://lovr.org/docs/FAQ)\n\n<p align=\"left\">\n  <span><img src=\"http://lovr.org/static/img/screen1.jpg\" width=\"32.5%\"/></span>\n  <span><img src=\"http://lovr.org/static/img/screen2.jpg\" width=\"32.5%\"/></span>\n  <span><img src=\"http://lovr.org/static/img/screen3.jpg\" width=\"32.5%\"/></span>\n</p>\n\nFeatures\n---\n\n- **Cross-Platform** - Runs on Windows, macOS, Linux, and Android.\n- **Cross-Device** - Supports Vive/Index, Oculus Rift/Quest, Windows MR, and has a VR simulator.\n- **Beginner-friendly** - Simple VR scenes can be created in just a few lines of Lua.\n- **Fast** - Written in C11 and scripted with LuaJIT, includes optimized single-pass stereo rendering.\n- **Asset Import** - Supports 3D models (glTF, OBJ), skeletal animation, HDR textures, cubemaps, fonts, etc.\n- **Spatialized Audio** - Audio is automatically spatialized using HRTFs.\n- **Vector Library** - Efficient first-class support for 3D vectors, quaternions, and matrices.\n- **3D Rigid Body Physics** - Including 4 collider shapes, triangle mesh colliders, and 4 joint types.\n- **Compute Shaders** - For high performance GPU tasks, like particles.\n\nGetting Started\n---\n\nIt's really easy to get started making things with LÖVR.  Grab a copy of the executable from <https://lovr.org/downloads>,\nthen write a `main.lua` script and drag it onto the executable.  Here are some example projects to try:\n\n#### Hello World\n\n```lua\nfunction lovr.draw(pass)\n  pass:text('Hello World!', 0, 1.7, -3, .5)\nend\n```\n\n#### Spinning Cube\n\n```lua\nfunction lovr.draw(pass)\n  pass:cube(0, 1.7, -1, .5, lovr.timer.getTime())\nend\n```\n\n#### Hand Tracking\n\n```lua\nfunction lovr.draw(pass)\n  for _, hand in ipairs(lovr.headset.getHands()) do\n    pass:sphere(vec3(lovr.headset.getPosition(hand)), .1)\n  end\nend\n```\n\n#### 3D Models\n\n```lua\nfunction lovr.load()\n  model = lovr.graphics.newModel('model.gltf')\nend\n\nfunction lovr.draw(pass)\n  pass:draw(model, x, y, z)\nend\n```\n\nMore examples are on the [docs page](https://lovr.org/docs/Intro/Hello_World).\n\nBuilding\n---\n\nYou can build LÖVR from source using CMake.  Here are the steps using the command line:\n\n```console\nmkdir build\ncd build\ncmake ..\ncmake --build .\n```\n\nSee the [Compiling Guide](https://lovr.org/docs/Compiling) for more info.\n\nResources\n---\n\n- [**Documentation**](https://lovr.org/docs): Guides, tutorials, examples, and API documentation.\n- [**FAQ**](https://lovr.org/docs/FAQ): Frequently Asked Questions.\n- [**Matrix**](https://lovr.org/matrix): The LÖVR community for discussion and support.\n- [**Nightly Builds**](https://lovr.org/download/nightly): Nightly builds for Windows.\n- [**Compiling Guide**](https://lovr.org/docs/Compiling): Information on compiling LÖVR from source.\n- [**Contributing**](https://lovr.org/docs/Contributing): Guide for helping out with development 💜\n- [**LÖVE**](https://love2d.org): LÖVR is heavily inspired by LÖVE, a 2D game framework.\n\nContributors\n---\n\n- [@bjornbytes](https://github.com/bjornbytes)\n- [@shakesoda](https://github.com/shakesoda)\n- [@bcampbell](https://github.com/bcampbell)\n- [@mcclure](https://github.com/mcclure)\n- [@nevyn](https://github.com/nevyn)\n- [@porglezomp](https://github.com/porglezomp)\n- [@jmiskovic](https://github.com/jmiskovic)\n- [@wallbraker](https://github.com/wallbraker)\n\nLicense\n---\n\nMIT, see [`LICENSE`](LICENSE) for details.\n"
        },
        {
          "name": "Tupfile.lua",
          "type": "blob",
          "size": 16.517578125,
          "content": "config = {\n  target = 'native',\n  debug = true,\n  optimize = false,\n  supercharge = false,\n  sanitize = false,\n  strict = true,\n  glfw = true,\n  luajit = false,\n  glslang = true,\n  utf8 = true,\n  modules = {\n    audio = true,\n    data = true,\n    event = true,\n    filesystem = true,\n    graphics = true,\n    headset = true,\n    math = true,\n    physics = true,\n    system = true,\n    thread = true,\n    timer = true\n  },\n  headsets = {\n    simulator = true,\n    openxr = false,\n    webxr = false\n  },\n  renderers = {\n    vulkan = true,\n    webgpu = false\n  },\n  spatializers = {\n    simple = true,\n    oculus = false,\n    phonon = false\n  },\n  android = {\n    sdk = '/path/to/sdk',\n    ndk = '/path/to/ndk',\n    version = 29,\n    buildtools = '30.0.3',\n    keystore = '/path/to/keystore',\n    keystorepass = 'pass:password',\n    manifest = nil,\n    package = 'org.lovr.app',\n    project = nil\n  }\n}\n\n-- config notes:\n-- target can be native or win32/macos/linux/android/wasm\n-- supercharge adds dangerous/aggressive optimizations that may reduce stability\n-- sanitize adds checks for memory leaks and undefined behavior (reduces performance)\n-- strict will make warnings fail the build\n-- luajit and headsets.openxr should be a path to a folder with the lib (tup can't build them yet)\n-- android.package should be something like 'org.lovr.app'\n-- android.project is a path to a lovr project folder that will be included in the apk\n-- tup.config can also be used to override properties without modifying this file:\n-- create a tup.config file and add lines like CONFIG_<KEY>=<val> to override properties\n-- boolean values use y and n, numbers and unquoted strings are also supported\n-- subtables should be formatted as CONFIG_MODULE_<m>=y, CONFIG_ANDROID_VERSION=29, etc.\n\nfunction merge(t, prefix)\n  for k, v in pairs(t) do\n    if type(v) == 'table' then\n      merge(v, k:gsub('s$', ''):upper() .. '_')\n    else\n      local str = tup.getconfig((prefix or '') .. k:upper())\n      if str == 'y' or str == 'n' then\n        t[k] = str == 'y'\n      elseif #str > 0 then\n        t[k] = str\n      end\n    end\n  end\nend\n\nmerge(config)\n\n---> setup\n\ncc = 'clang'\ncxx = 'clang++'\nhost = tup.getconfig('TUP_PLATFORM'):gsub('macosx', 'macos')\ntarget = config.target == 'native' and host or config.target\n\nflags = {\n  '-fPIE',\n  config.debug and '-g' or '',\n  config.optimize and '-Os' or '',\n  config.supercharge and '-flto -march=native -DLOVR_UNCHECKED' or '',\n  config.sanitize and '-fsanitize=address -fsanitize=undefined' or '',\n}\n\ncflags = {\n  '-std=c11 -pedantic',\n  '-Wall -Wextra -Wno-unused-parameter -Wno-strict-prototypes',\n  config.strict and '-Werror' or '',\n  config.optimize and '-fdata-sections -ffunction-sections' or '',\n  '-fdiagnostics-color=always',\n  '-fvisibility=hidden',\n  '-Ietc',\n  '-Isrc',\n  '-Isrc/modules',\n  '-Isrc/lib/std',\n  '-Ideps/vulkan-headers/include'\n}\n\nbin = target == 'android' and 'bin/apk/lib/arm64-v8a' or 'bin'\n\nlflags = '-L' .. bin\nlflags += not config.debug and '-Wl,-s' or ''\nlflags += config.optimize and (target == 'macos' and '-Wl,-dead_strip' or '-Wl,--gc-sections') or ''\nlflags += '-rdynamic'\nlflags += config.sanitize and '-lubsan' or ''\n\nif target == 'win32' then\n  cflags += '-D_CRT_SECURE_NO_WARNINGS'\n  cflags += '-DWINVER=0x0600' -- Vista\n  cflags += '-D_WIN32_WINNT=0x0600'\n  lflags += '-lshell32 -lole32 -luuid'\n  lflags += config.debug and '-Wl,--subsystem,console' or '-Wl,--subsystem,windows'\n  if not cc:match('mingw') then\n    extras += { 'bin/lovr.lib', 'bin/lovr.exp' }\n    if config.debug then\n      extras += { 'bin/lovr.pdb', 'bin/lovr.ilk' }\n    end\n  end\nend\n\nif target == 'macos' then\n  cflags_os_macos += '-xobjective-c'\n  lflags += '-Wl,-rpath,@executable_path'\n  lflags += '-lobjc'\n  lflags += '-framework AVFoundation'\nend\n\nif target == 'linux' then\n  cflags += '-D_POSIX_C_SOURCE=200809L'\n  cflags += '-D_DEFAULT_SOURCE'\n  lflags += '-lm -lpthread -ldl'\n  lflags += '-Wl,-rpath,\\\\$ORIGIN'\n  if config.glfw then\n    lflags += '-lX11 -lxcb -lX11-xcb'\n  else\n    lflags += '-lxcb -lxcb-xinput -lxcb-xkb -lxkbcommon -lxkbcommon-x11'\n  end\nend\n\nif target == 'wasm' then\n  cc = 'emcc'\n  cxx = 'em++'\n  cflags += '-std=gnu11'\n  cflags += '-D_POSIX_C_SOURCE=200809L'\n  lflags += '-s FORCE_FILESYSTEM'\n  exported_functions = { '_main', '_lovrDestroy' }\n  if config.headsets.webxr then\n    exported_functions += { '_webxr_attach', '_webxr_detach' }\n    lflags += '--js-library etc/webxr.js'\n  end\n  lflags += '--shell-file etc/lovr.html'\n  lflags += '-s EXPORTED_FUNCTIONS=' .. table.concat(exported_functions, ',')\n  extras += { 'bin/lovr.js', 'bin/lovr.wasm' }\n  if config.renderers.webgpu then\n    lflags += '-s USE_WEBGPU=1'\n  end\n  if config.modules.thread then\n    cflags += '-s USE_PTHREADS=1'\n    lflags += '-s USE_PTHREADS=1'\n    extras += 'bin/lovr.worker.js'\n  end\nend\n\nif target == 'android' then\n  assert(config.headsets.openxr, 'You probably want to enable OpenXR')\n  hosts = { win32 = 'windows-x86_64', macos = 'darwin-x86_64', linux = 'linux-x86_64' }\n  cc = ('%s/toolchains/llvm/prebuilt/%s/bin/clang'):format(config.android.ndk, hosts[host])\n  cxx = cc .. '++'\n  flags += '--target=aarch64-linux-android' .. config.android.version\n  flags += config.debug and '-funwind-tables' or ''\n  cflags += '-D_POSIX_C_SOURCE=200809L'\n  cflags += ('-I%s/sources/android/native_app_glue'):format(config.android.ndk)\n  cflags += '-DLOVR_JAVA_PACKAGE=' .. config.android.package:gsub('%.', '_')\n  lflags += '-shared -landroid'\nend\n\ntroublemakers = {\n  os_android = '-Wno-format-pedantic',\n  miniaudio = '-Wno-unused-function -Wno-pedantic',\n}\n\nfor file, flags in pairs(troublemakers) do\n  _G['cflags_' .. file] = flags\nend\n\n---> deps\n\nlocal function lib(name)\n  return (target == 'win32' and '$(bin)/%s.dll' or '$(bin)/lib%s.so'):format(name)\nend\n\nlocal function copy(from, to)\n  tup.rule(from, '^ CP %b^ cp %f %o', to)\nend\n\nif config.luajit then\n  if type(config.luajit) ~= 'string' then\n    error('Sorry, building LuaJIT is not supported yet.  However, you can set config.luajit to a path to a folder containing the LuaJIT library.')\n  end\n  cflags += '-Ideps/luajit/src'\n  lflags += '-L' .. config.luajit\n  lflags += '-lluajit-5.1'\nelse\n  cflags += '-Ideps/lua'\n  lflags += '-llua'\n  lua_cflags += '-fPIC'\n  lua_cflags += '-Wno-empty-body'\n  lua_lflags += '-shared'\n  lua_lflags += '-lm'\n  lua_src = {\n    'lapi.c', 'lauxlib.c', 'lbaselib.c', 'lcode.c', 'ldblib.c', 'ldebug.c', 'ldo.c', 'ldump.c',\n    'lfunc.c', 'lgc.c', 'linit.c', 'liolib.c', 'llex.c', 'lmathlib.c', 'lmem.c', 'loadlib.c',\n    'lobject.c', 'lopcodes.c', 'loslib.c', 'lparser.c', 'lstate.c', 'lstring.c', 'lstrlib.c',\n    'ltable.c', 'ltablib.c', 'ltm.c', 'lundump.c', 'lvm.c', 'lzio.c'\n  }\n  lua_cflags += ({ linux = '-DLUA_USE_LINUX', android = '-DLUA_USE_LINUX', macos = '-DLUA_USE_MACOSX' })[target] or ''\n  for i = 1, #lua_src do lua_src[i] = 'deps/lua/' .. lua_src[i] end\n  tup.foreach_rule(lua_src, '^ CC lua/%b^ $(cc) $(flags) $(lua_cflags) -c %f -o %o', '.obj/lua/%B.o')\n  tup.rule('.obj/lua/*.o', '^ LD %o^ $(cc) $(flags) -o %o %f $(lua_lflags)', lib('lua'))\nend\n\nif config.glfw and (target == 'win32' or target == 'macos' or target == 'linux') then\n  cflags += '-Ideps/glfw/include'\n  cflags += '-DLOVR_USE_GLFW'\n  lflags += '-lglfw'\n\n  glfw_cflags += '-fPIC'\n  glfw_cflags += ({ win32 = '-D_GLFW_WIN32', macos = '-D_GLFW_COCOA', linux = '-D_GLFW_X11' })[target]\n  glfw_src += { 'init.c', 'context.c', 'platform.c', 'null*.c', 'input.c', 'monitor.c', 'vulkan.c', 'window.c' }\n  glfw_src += ({\n    win32 = { 'win32*.c', 'wgl*.c', 'egl*.c', 'osmesa*.c' },\n    macos = { 'cocoa*.c', 'cocoa*.m', 'posix_module.c', 'posix_thread.c', 'egl*.c', 'nsgl*.m', 'osmesa*.c' },\n    linux = { 'x11*.c', 'xkb*.c', 'posix*.c', 'glx*.c', 'egl*.c', 'linux*.c', 'osmesa*.c' }\n  })[target]\n  for i = 1, #glfw_src do glfw_src[i] = 'deps/glfw/src/' .. glfw_src[i] end\n  glfw_lflags += '-shared'\n  glfw_lflags += target == 'win32' and '-lgdi32' or ''\n  glfw_lflags += target == 'macos' and '-lobjc -framework Cocoa -framework IOKit -framework CoreFoundation' or ''\n  tup.foreach_rule(glfw_src, '^ CC glfw/%b^ $(cc) $(flags) $(glfw_cflags) -c %f -o %o', '.obj/glfw/%B.o')\n  tup.rule('.obj/glfw/*.o', '^ LD %o^ $(cc) $(flags) -o %o %f $(glfw_lflags)', lib('glfw'))\nend\n\nif config.modules.graphics and config.glslang then\n  cflags_graphics += '-Ideps/glslang/glslang/Include'\n  cflags_graphics += '-Ideps/glslang/glslang/Public'\n  cflags += '-DLOVR_USE_GLSLANG'\n  lflags += '-lglslang'\n\n  glslang_cflags += '-fPIC'\n  glslang_cflags += '-std=c++17'\n  glslang_cflags += '-fno-exceptions'\n  glslang_cflags += '-fno-rtti'\n  glslang_cflags += '-Ideps/glslang'\n  glslang_cflags += '-I.obj'\n  glslang_lflags += '-shared'\n  glslang_src += 'deps/glslang/glslang/CInterface/*.cpp'\n  glslang_src += 'deps/glslang/glslang/MachineIndependent/*.cpp'\n  glslang_src += 'deps/glslang/glslang/MachineIndependent/preprocessor/*.cpp'\n  glslang_src += ('deps/glslang/glslang/OSDependent/%s/ossource.cpp'):format(target == 'win32' and 'Windows' or 'Unix')\n  glslang_src += 'deps/glslang/glslang/GenericCodeGen/*.cpp'\n  glslang_src += 'deps/glslang/SPIRV/GlslangToSpv.cpp'\n  glslang_src += 'deps/glslang/SPIRV/Logger.cpp'\n  glslang_src += 'deps/glslang/SPIRV/SpvTools.cpp'\n  glslang_src += 'deps/glslang/SPIRV/SpvBuilder.cpp'\n  glslang_src += 'deps/glslang/SPIRV/SpvPostProcess.cpp'\n  glslang_src += 'deps/glslang/SPIRV/InReadableOrder.cpp'\n  glslang_src += 'deps/glslang/SPIRV/CInterface/spirv_c_interface.cpp'\n  glslang_src += 'deps/glslang/glslang/ResourceLimits/resource_limits_c.cpp'\n  glslang_src += 'deps/glslang/glslang/ResourceLimits/ResourceLimits.cpp'\n  glslang_src.extra_inputs = '.obj/glslang/build_info.h'\n\n  tup.rule('deps/glslang/build_info.h.tmpl', 'python3 deps/glslang/build_info.py deps/glslang -i %f -o %o', '.obj/glslang/build_info.h')\n  tup.foreach_rule(glslang_src, '^ CC glslang/%b^ $(cc) $(flags) $(glslang_cflags) -c %f -o %o', '.obj/glslang/%B.o')\n  tup.rule('.obj/glslang/*.o', '^ LD %o^ $(cxx) $(flags) -o %o %f $(glslang_lflags)', lib('glslang'))\nend\n\nif config.modules.data then\n  cflags_rasterizer += '-Ideps/msdfgen'\n  cflags_rasterizer += '-DMSDFGEN_PUBLIC='\n  lflags += '-lmsdfgen'\n\n  msdfgen_cflags += '-fPIC'\n  msdfgen_cflags += target == 'win32' and '-DMSDFGEN_PUBLIC=__declspec(dllexport)' or '-DMSDFGEN_PUBLIC='\n  msdfgen_src += 'deps/msdfgen/core/*.cpp'\n  tup.foreach_rule(msdfgen_src, '^ CC msdfgen/%b^ $(cxx) $(flags) $(msdfgen_cflags) -c %f -o %o', '.obj/msdfgen/%B.o')\n  tup.rule('.obj/msdfgen/*.o', '^ LD %o^ $(cxx) $(flags) -shared -o %o %f', lib('msdfgen'))\nend\n\nif config.modules.physics then\n  error('Compiling Jolt is not supported yet')\nend\n\nif config.headsets.openxr then\n  if target == 'android' then\n    cflags_headset_openxr += '-Ideps/openxr/include'\n    lflags += '-lopenxr_loader'\n    copy('deps/oculus-openxr/Libs/Android/arm64-v8a/Release/libopenxr_loader.so', '$(bin)/%b')\n  else\n    if type(config.headsets.openxr) ~= 'string' then\n      error('Sorry, building OpenXR is not supported yet.  However, you can set config.headsets.openxr to a path to a folder containing the OpenXR library.')\n    end\n    cflags_headset_openxr += '-Ideps/openxr/include'\n    lflags += '-L' .. config.headsets.openxr\n    lflags += '-lopenxr_loader'\n  end\nend\n\nif config.spatializers.oculus then\n  cflags_headset_oculus += '-Ideps/AudioSDK/Include'\n  ovraudio_libs = {\n    win32 = 'deps/AudioSDK/Lib/x64/ovraudio64.dll',\n    linux = 'deps/AudioSDK/Lib/Linux64/libovraudio64.so',\n    android = 'deps/AudioSDK/Lib/Android/arm64-v8a/libovraudio64.so'\n  }\n  assert(ovraudio_libs[target], 'Oculus Audio is not supported on this target')\n  copy(ovraudio_libs[target], '$(bin)/%b')\nend\n\nif config.spatializers.phonon then\n  cflags_spatializer_phonon += '-Ideps/phonon/include'\n  phonon_libs = {\n    win32 = 'deps/phonon/bin/Windows/x64/phonon.dll',\n    macos = 'deps/phonon/lib/OSX/libphonon.dylib',\n    linux = 'deps/phonon/lib/Linux/x64/libphonon.so',\n    android = 'deps/phonon/lib/Android/arm64/libphonon.so'\n  }\n  assert(phonon_libs[target], 'Phonon is not supported on this target')\n  copy(phonon_libs[target], '$(bin)/%b')\nend\n\n---> lovr\n\nsrc = {\n  'src/main.c',\n  'src/util.c',\n  'src/core/fs.c',\n  ('src/core/os_%s.c'):format(target),\n  'src/core/spv.c',\n  'src/api/api.c',\n  'src/api/l_lovr.c'\n}\n\nfor module, enabled in pairs(config.modules) do\n  if enabled then\n    override = {\n      audio = 'src/modules/audio/audio.c',\n      headset = 'src/modules/headset/headset.c'\n    }\n    src += override[module] or ('src/modules/%s/*.c'):format(module)\n    src += ('src/api/l_%s*.c'):format(module)\n  else\n    cflags += '-DLOVR_DISABLE_' .. module:upper()\n  end\nend\n\nfor headset, enabled in pairs(config.headsets) do\n  if enabled then\n    cflags += '-DLOVR_USE_' .. headset:upper()\n    src += ('src/modules/headset/headset_%s.c'):format(headset)\n  end\nend\n\nfor renderer, enabled in pairs(config.renderers) do\n  if enabled then\n    cflags += '-DLOVR_' .. ({ vulkan = 'VK', webgpu = 'WEBGPU' })[renderer]\n    src += 'src/core/gpu_' .. ({ vulkan = 'vk', webgpu = 'web' })[renderer] .. '.c'\n  end\nend\n\nfor spatializer, enabled in pairs(config.spatializers) do\n  if enabled then\n    cflags += ('-DLOVR_ENABLE_%s_SPATIALIZER'):format(spatializer:upper())\n    src += ('src/modules/audio/spatializer_%s.c'):format(spatializer)\n  end\nend\n\nif config.utf8 then\n  src += 'src/lib/luax/lutf8lib.c'\nelse\n  cflags += '-DLOVR_DISABLE_UTF8'\nend\n\nsrc += 'src/lib/stb/*.c'\nsrc += 'src/lib/miniz/*.c'\nsrc += (config.modules.audio or config.modules.data) and 'src/lib/miniaudio/*.c' or nil\nsrc += config.modules.data and 'src/lib/jsmn/*.c' or nil\nsrc += config.modules.data and 'src/lib/minimp3/*.c' or nil\nsrc += config.modules.filesystem and 'src/lib/dmon/*.c' or nil\nsrc += config.modules.math and 'src/lib/noise/*.c' or nil\nsrc += config.modules.thread and 'src/core/job.c' or nil\n\n-- embed resource files with xxd\n\nres = { 'etc/boot.lua', 'etc/*.ttf', 'etc/shaders/*.glsl' }\ntup.foreach_rule(res, '^ XD %b^ xxd -i %f > %o', '%f.h')\n\nfor i, pattern in ipairs(res) do\n  src.extra_inputs += pattern .. '.h'\nend\n\n-- shaders\n\nvert = 'etc/shaders/*.vert'\nfrag = 'etc/shaders/*.frag'\ncomp = 'etc/shaders/*.comp'\n\nglslang_flags += '--quiet'\nglslang_flags += config.debug and '-gVS' or ''\nglslang_flags += '--target-env vulkan1.1'\n\nfunction compileShaders(stage)\n  pattern = 'etc/shaders/*.' .. stage\n  tup.foreach_rule(pattern, 'glslangValidator $(glslang_flags) --vn lovr_shader_%B_' .. stage .. ' -o %o %f', '%f.h')\nend\n\ncompileShaders('vert')\ncompileShaders('frag')\ncompileShaders('comp')\nsrc.extra_inputs += 'etc/shaders/*.h'\n\n-- compile\n\ntup.foreach_rule(src, '^ CC %b^ $(cc) $(flags) $(cflags) $(cflags_%B) -o %o -c %f', '.obj/%B.o')\n\n-- link final output\n\noutputs = {\n  win32 = '$(bin)/lovr.exe',\n  macos = '$(bin)/lovr',\n  linux = '$(bin)/lovr',\n  android = '$(bin)/liblovr.so',\n  wasm = '$(bin)/lovr.html'\n}\n\nobj = { '.obj/*.o', extra_inputs = lib('*') }\noutput = { outputs[target], extra_outputs = extras }\ntup.rule(obj, '^ LD %o^ $(cc) $(flags) -o %o %f $(lflags)', output)\n\n---> apk\n\nif target == 'android' then\n  for _, key in pairs({ 'manifest', 'package', 'project' }) do\n    local value = tup.getconfig('ANDROID_' .. key:upper())\n    config.android[key] = #value > 0 and value or config.android[key]\n  end\n\n  java = 'bin/Activity.java'\n  class = config.android.package:gsub('%.', '/') .. '/Activity.class'\n  binclass = 'bin/' .. class\n  jar = 'bin/lovr.jar'\n  dex = 'bin/apk/classes.dex'\n  unaligned = 'bin/.lovr.apk.unaligned'\n  unsigned = 'bin/.lovr.apk.unsigned'\n  apk = 'bin/lovr.apk'\n\n  manifest = config.android.manifest or 'etc/AndroidManifest.xml'\n  package = '--rename-manifest-package ' .. config.android.package\n  project = config.android.project and #config.android.project > 0 and ('-A ' .. config.android.project) or ''\n\n  version = config.android.version\n  ks = config.android.keystore\n  kspass = config.android.keystorepass\n  androidjar = ('%s/platforms/android-%d/android.jar'):format(config.android.sdk, version)\n  tools = config.android.sdk .. '/build-tools/' .. config.android.buildtools\n\n  copy(manifest, 'bin/AndroidManifest.xml')\n  tup.rule('etc/Activity.java', 'tup varsed %f %o', java)\n  tup.rule(java, '^ JAVAC %b^ javac -classpath $(androidjar) -d bin %f', binclass)\n  tup.rule(binclass, '^ JAR %b^ jar -cf %o -C bin $(class)', jar)\n  tup.rule(jar, '^ D8 %b^ $(tools)/d8 --min-api $(version) --output bin/apk %f', dex)\n  tup.rule(\n    { 'bin/AndroidManifest.xml', extra_inputs = { lib('*'), dex } },\n    '^ AAPT %b^ $(tools)/aapt package $(package) -F %o -M %f -0 so -I $(androidjar) $(project) bin/apk',\n    unaligned\n  )\n  tup.rule(unaligned, '^ ZIPALIGN %f^ $(tools)/zipalign -f -p 4 %f %o', unsigned)\n  tup.rule(unsigned, '^ APKSIGNER %o^ $(tools)/apksigner sign --ks $(ks) --ks-pass $(kspass) --out %o %f', { apk, extra_outputs = 'bin/lovr.apk.idsig' })\nend\n"
        },
        {
          "name": "deps",
          "type": "tree",
          "content": null
        },
        {
          "name": "etc",
          "type": "tree",
          "content": null
        },
        {
          "name": "plugins",
          "type": "tree",
          "content": null
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "test",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}