{
  "metadata": {
    "timestamp": 1736709666773,
    "page": 21,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjMw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "gluster/glusterfs",
      "stars": 4804,
      "defaultBranch": "devel",
      "files": [
        {
          "name": ".clang-format",
          "type": "blob",
          "size": 2.984375,
          "content": "---\nLanguage:        Cpp\n# BasedOnStyle:  Chromium\nAccessModifierOffset: -1\nAlignAfterOpenBracket: Align\nAlignConsecutiveAssignments: false\nAlignConsecutiveDeclarations: false\nAlignEscapedNewlines: Right\nAlignOperands:   true\nAlignTrailingComments: true\nAllowAllParametersOfDeclarationOnNextLine: false\nAllowShortBlocksOnASingleLine: false\nAllowShortCaseLabelsOnASingleLine: false\nAllowShortFunctionsOnASingleLine: Inline\nAllowShortIfStatementsOnASingleLine: false\nAllowShortLoopsOnASingleLine: false\nAlwaysBreakAfterDefinitionReturnType: All\nAlwaysBreakAfterReturnType: All\nAlwaysBreakBeforeMultilineStrings: true\nAlwaysBreakTemplateDeclarations: true\nBinPackArguments: true\nBinPackParameters: true\nBraceWrapping:\n  AfterClass:      false\n  AfterControlStatement: false\n  AfterEnum:       false\n  AfterFunction:   true\n  AfterNamespace:  false\n  AfterObjCDeclaration: false\n  AfterStruct:     false\n  AfterUnion:      false\n  BeforeCatch:     false\n  BeforeElse:      false\n  IndentBraces:    false\n  SplitEmptyFunction: true\n  SplitEmptyRecord: true\n  SplitEmptyNamespace: true\nBreakBeforeBinaryOperators: None\nBreakBeforeBraces: Linux\nBreakBeforeInheritanceComma: false\nBreakBeforeTernaryOperators: true\nBreakConstructorInitializersBeforeComma: false\nBreakConstructorInitializers: BeforeColon\nBreakAfterJavaFieldAnnotations: false\nBreakStringLiterals: true\nColumnLimit:     80\nCommentPragmas:  '^ IWYU pragma:'\nCompactNamespaces: false\nConstructorInitializerAllOnOneLineOrOnePerLine: true\nConstructorInitializerIndentWidth: 4\nContinuationIndentWidth: 4\nCpp11BracedListStyle: true\nDerivePointerAlignment: false\nDisableFormat:   false\nExperimentalAutoDetectBinPacking: false\nFixNamespaceComments: true\nForEachMacros:\n  - foreach\n  - Q_FOREACH\n  - BOOST_FOREACH\nIncludeCategories:\n  - Regex:           '^<.*\\.h>'\n    Priority:        1\n  - Regex:           '^<.*'\n    Priority:        2\n  - Regex:           '.*'\n    Priority:        3\nIncludeIsMainRegex: '([-_](test|unittest))?$'\nIndentCaseLabels: true\nIndentWidth:     4\nIndentWrappedFunctionNames: false\nJavaScriptQuotes: Leave\nJavaScriptWrapImports: true\nKeepEmptyLinesAtTheStartOfBlocks: false\nMacroBlockBegin: ''\nMacroBlockEnd:   ''\nMaxEmptyLinesToKeep: 1\nNamespaceIndentation: None\nObjCBlockIndentWidth: 2\nObjCSpaceAfterProperty: false\nObjCSpaceBeforeProtocolList: false\nPenaltyBreakAssignment: 200\nPenaltyBreakBeforeFirstCallParameter: 1\nPenaltyBreakComment: 300\nPenaltyBreakFirstLessLess: 120\nPenaltyBreakString: 1000\nPenaltyExcessCharacter: 1000000\nPenaltyReturnTypeOnItsOwnLine: 200\nPointerAlignment: Right\nReflowComments:  true\nSortIncludes:    false\nSortUsingDeclarations: true\nSpaceAfterCStyleCast: false\nSpaceAfterTemplateKeyword: true\nSpaceBeforeAssignmentOperators: true\nSpaceBeforeParens: ControlStatements\nSpaceInEmptyParentheses: false\nSpacesBeforeTrailingComments: 2\nSpacesInAngles:  false\nSpacesInContainerLiterals: true\nSpacesInCStyleCastParentheses: false\nSpacesInParentheses: false\nSpacesInSquareBrackets: false\nStandard:        Auto\nTabWidth:        8\nUseTab:          Never\n...\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 2.8701171875,
          "content": "aclocal.m4\nautom4te.cache\nbuild\nconfig.*\nconfigure\ncscope.*\ntags\nTAGS\nID\nGPATH\nGRTAGS\nGTAGS\nGSYMS\ndepcomp\nINSTALL\ninstall-sh\nltmain.sh\nMakefile\nMakefile.in\nmissing\nstamp-h1\nstamp-h2\ntest-driver\n*compile\n*.gcda\n*.gcno\n*.sw?\n*~\n*.lo\n*.la\n*.o\n*.tar.gz\n*.rpm\n*.diff\n*.patch\n.libs\n.deps\n.dirstamp\n\n# Softlinks to test and log\nlog\n*.vol\n.clang-format\n\n# cmocka unit tests\n*.log\n*.trs\n*_unittest\n\n# Generated files\nsite.h\n*.py[co]\napi/examples/__init__.py\napi/examples/setup.py\napi/src/gfapi.map\ncli/src/gluster\ncontrib/fuse-util/fusermount-glusterfs\nextras/command-completion/Makefile\nextras/geo-rep/gsync-sync-gfid\nextras/geo-rep/schedule_georep.py\nextras/snap_scheduler/conf.py\nextras/init.d/glusterd-Debian\nextras/init.d/glusterd-FreeBSD\nextras/init.d/glusterd-Redhat\nextras/init.d/glusterd-SuSE\nextras/init.d/glusterd.plist\nextras/ocf/glusterd\nextras/ocf/volume\nextras/run-gluster.tmpfiles\nextras/systemd/glusterd.service\nextras/systemd/gluster-ta-volume.service\nextras/systemd/glusterfssharedstorage.service\nextras/who-wrote-glusterfs/gitdm\ngeo-replication/.tox\ngeo-replication/gsyncd.conf\ngeo-replication/src/gsyncd\ngeo-replication/src/peer_gsec_create\ngeo-replication/src/peer_mountbroker\ngeo-replication/src/peer_mountbroker.py\ngeo-replication/src/set_geo_rep_pem_keys.sh\ngeo-replication/src/peer_georep-sshkey.py\ngeo-replication/syncdaemon.egg-info\ngeo-replication/syncdaemon/conf.py\ngeo-replication/tests/unit/.coverage\ngeo-replication/tests/unit/cover\ngeo-replication/tests/unit/coverage.xml\ngeo-replication/tests/unit/nosetests.xml\ngeo-replication/tests/unit/results.html\nglusterfs-api.pc\nglusterfs.spec\nglusterfsd/src/glusterd\nglusterfsd/src/glusterfs\nglusterfsd/src/glusterfsd\nglusterfsd/src/gf_attach\nheal/src/glfsheal\nlibgfchangelog.pc\nlibglusterfs/src/graph.lex.c\nlibglusterfs/src/y.tab.c\nlibglusterfs/src/y.tab.h\nlibglusterfs/src/defaults.c\nlibglusterfs/src/cli1-xdr.h\nlibglusterfs/src/protocol-common.h\nlibtool\n# copied XDR for cyclic libglusterfs <-> rpc-header dependency\nrun-tests.sh\n!tests/basic/fuse/Makefile\n!tests/basic/gfapi/Makefile\ntests/env.rc\ntests/utils/arequal-checksum\nxlators/features/glupy/src/__init__.py\nxlators/features/glupy/src/setup.py\nxlators/mount/fuse/utils/mount.glusterfs\nxlators/mount/fuse/utils/mount_glusterfs\nextras/peer_add_secret_pub\ntools/gfind_missing_files/gcrawler\ntools/glusterfind/glusterfind\ntools/glusterfind/src/tool.conf\n# Eventing\nevents/src/eventsapiconf.py\nextras/systemd/glustereventsd.service\nevents/src/eventtypes.py\nlibglusterfs/src/eventtypes.h\nextras/init.d/glustereventsd-Debian\nextras/init.d/glustereventsd-FreeBSD\nextras/init.d/glustereventsd-Redhat\ntools/setgfid2path/src/gluster-setgfid2path\nxlators/features/cloudsync/src/cloudsync-autogen-fops.c\nxlators/features/cloudsync/src/cloudsync-autogen-fops.h\nxlators/features/utime/src/utime-autogen-fops.c\nxlators/features/utime/src/utime-autogen-fops.h\ntests/basic/metadisp/ftruncate\nxlators/features/metadisp/src/fops.c\n"
        },
        {
          "name": ".mailmap",
          "type": "blob",
          "size": 2.6728515625,
          "content": "# .mailmap, see 'git short-log --help' for details\n#\n# This file needs to match extras/who-wrote-glusterfs/gitdm.aliases.\n#\n# Listing of contributors that filed patches with different email addresses.\n# Format: <name> <main-email> <alias> [<alias> ...]\n#\n\nAmar Tumballi <amarts@redhat.com> <amar@gluster.com> <amar@del.gluster.com>\nAnand Avati <avati@redhat.com> <avati@gluster.com> <avati@dev.gluster.com> <avati@amp.gluster.com> <avati@blackhole.gluster.com>\nAnush Shetty <ashetty@redhat.com> <anush@gluster.com>\nCsaba Henk <csaba@redhat.com> <csaba@gluster.com> <csaba@lowlife.hu> <csaba@zresearch.com>\nGÃ¼nther Deschner <gd@redhat.com> <gd@samba.org>\nHarshavardhana <fharshav@redhat.com> <harsha@gluster.com> <harsha@zresearch.com> <harsha@dev.gluster.com> <harsha@harshavardhana.net>\nJi-Hyeon Gim <potatogim@gluesys.com> <potatogim@potatogim.net>\nJustin Clift <justin@gluster.org> <jclift@redhat.com>\nKaleb S. KEITHLEY <kkeithle@redhat.com> <kkeithle@f16node1.kkeithle.usersys.redhat.com> <kkeithle@linux.keithley.org>\nKaushal M <kaushal@redhat.com> <kaushal@gluster.com>\nKaushik BV <kbudiger@redhat.com> <kaushikbv@gluster.com>\nKrishna Srinivas <ksriniva@redhat.com> <krishna@gluster.com> <krishna@zresearch.com> <krishna@guest-laptop>\nKrishnan Parthasarathi <kparthas@redhat.com> <kp@gluster.com>\nLouis Zuckerman <louiszuckerman@gmail.com> <me@louiszuckerman.com>\nM S Vishwanath Bhat <vbhat@redhat.com> <msvbhat@gmail.com> <vishwanath@gluster.com>\nMichael Adam <madam@redhat.com> <obnox@samba.org>\nOleksandr Natalenko <oleksandr@natalenko.name> <o.natalenko@lanet.ua>\nPatrick Uiterwijk <puiterwijk@fedoraproject.org> <patrick@puiterwijk.org>\nPavan Sondur <pavan@gluster.com> <pavan@dev.gluster.com>\nPete Zaitcev <zaitcev@kotori.zaitcev.us> <zaitcev@yahoo.com>\nPranith Kumar K <pkarampu@redhat.com> <pranithk@gluster.com>\nPrashanth Pai <ppai@redhat.com> <nullpai@gmail.com>\nRaghavendra Bhat <raghavendra@redhat.com> <raghavendrabhat@gluster.com>\nRaghavendra G <rgowdapp@redhat.com> <raghavendra@gluster.com> <raghavendra@zresearch.com>\nRahul C S <rahulcs@redhat.com> <rahulcssjce@gmail.com>\nRajesh Amaravathi <rajesh@redhat.com> <rajesh@gluster.com> <rajesh.amaravathi@gmail.com>\nRavishankar N <ravishankar@redhat.com> <root@ravi2.(none)>\nSakshi Bansal <sabansal@redhat.com> <sabansal@localhost.localdomain>\nShehjar Tikoo <shehjart@gluster.com> <shehjart@zresearch.com>\nVenky Shankar <vshankar@redhat.com> <venky@gluster.com>\nVijay Bellur <vbellur@redhat.com> <vijay@gluster.com> <vijay@dev.gluster.com>\nVijaykumar Koppad <vkoppad@redhat.com> <vijaykumar.koppad@gmail.com>\nVijaikumar Mallikarjuna <vmallika@redhat.com>\nVikas Gorur <vikas@gluster.com> <vikas@zresearch.com>\nshishir gowda <sgowda@redhat.com> <shishirng@gluster.com>\n"
        },
        {
          "name": ".testignore",
          "type": "blob",
          "size": 1.5732421875,
          "content": ".github/ISSUE_TEMPLATE\n.github/PULL_REQUEST_TEMPLATE\n.github/stale.yml\n.gitignore\n.mailmap\n.testignore\n.clang-format\nrfc.sh\nsubmit-for-review.sh\nAUTHORS\nCONTRIBUTING.md\nCOPYING-GPLV2\nCOPYING-LGPLV3\nChangeLog\nINSTALL\nMAINTAINERS\nNEWS\nREADME.md\nTHANKS\nCOMMITMENT\napi/examples/README\napi/examples/getvolfile.py\napi/src/README.Symbol_Versions\nbuild-aux/checkpatch.pl\ncontrib/fuse-lib/COPYING.LIB\ncontrib/fuse-util/COPYING\ncontrib/macfuse/COPYING.txt\ndoc/*\nextras/FreeBSD/README.FreeBSD\nextras/Solaris/README.solaris\nextras/Ubuntu/README.Ubuntu\nextras/benchmarking/README\nextras/cliutils/README.md\nextras/command-completion/README\nextras/create_new_xlator/README.md\nextras/glusterfs.vim\nextras/glusterfs-logrotate\nextras/glusterfs-georep-logrotate\nextras/init.d/glusterd-Debian.in\nextras/init.d/glusterd-FreeBSD.in\nextras/init.d/glusterd-Redhat.in\nextras/init.d/glusterd-SuSE.in\nextras/init.d/glusterd.plist.in\nextras/init.d/glustereventsd-Debian.in\nextras/init.d/glustereventsd-FreeBSD.in\nextras/init.d/glustereventsd-Redhat.in\nextras/init.d/rhel5-load-fuse.modules\nextras/logger.conf.example\nextras/snap_scheduler/README.md\nextras/test/ld-preload-test/README\nextras/who-wrote-glusterfs/*\nextras/distributed-testing/*\ngeo-replication/syncdaemon/README.md\ngeo-replication/test-requirements.txt\nrpc/xdr/src/.gitignore\ntests/README.md\nxlators/experimental/README.md\nxlators/experimental/dht2/README.md\nxlators/experimental/dht2/TODO.md\nxlators/experimental/posix2/README.md\nxlators/experimental/posix2/TODO.md\nxlators/features/glupy/doc/README.md\nxlators/features/glupy/doc/TESTING\nxlators/features/glupy/doc/test.vol\n"
        },
        {
          "name": "AUTHORS",
          "type": "blob",
          "size": 0,
          "content": ""
        },
        {
          "name": "COMMITMENT",
          "type": "blob",
          "size": 2.0458984375,
          "content": "Common Cure Rights Commitment\nVersion 1.0\n\nBefore filing or continuing to prosecute any legal proceeding or claim\n(other than a Defensive Action) arising from termination of a Covered\nLicense, we commit to extend to the person or entity ('you') accused\nof violating the Covered License the following provisions regarding\ncure and reinstatement, taken from GPL version 3. As used here, the\nterm 'this License' refers to the specific Covered License being\nenforced.\n\n    However, if you cease all violation of this License, then your\n    license from a particular copyright holder is reinstated (a)\n    provisionally, unless and until the copyright holder explicitly\n    and finally terminates your license, and (b) permanently, if the\n    copyright holder fails to notify you of the violation by some\n    reasonable means prior to 60 days after the cessation.\n\n    Moreover, your license from a particular copyright holder is\n    reinstated permanently if the copyright holder notifies you of the\n    violation by some reasonable means, this is the first time you\n    have received notice of violation of this License (for any work)\n    from that copyright holder, and you cure the violation prior to 30\n    days after your receipt of the notice.\n\nWe intend this Commitment to be irrevocable, and binding and\nenforceable against us and assignees of or successors to our\ncopyrights.\n\nDefinitions\n\n'Covered License' means the GNU General Public License, version 2\n(GPLv2), the GNU Lesser General Public License, version 2.1\n(LGPLv2.1), or the GNU Library General Public License, version 2\n(LGPLv2), all as published by the Free Software Foundation.\n\n'Defensive Action' means a legal proceeding or claim that We bring\nagainst you in response to a prior proceeding or claim initiated by\nyou or your affiliate.\n\n'We' means each contributor to this repository as of the date of\ninclusion of this file, including subsidiaries of a corporate\ncontributor.\n\nThis work is available under a Creative Commons Attribution-ShareAlike\n4.0 International license (https://creativecommons.org/licenses/by-sa/4.0/).\n"
        },
        {
          "name": "CONTRIBUTING.md",
          "type": "blob",
          "size": 7.4326171875,
          "content": "# GlusterFS project Contribution guidelines\n\n## Development Workflow\n\nWe follow most of the details as per the [document here](https://help.github.com/en/github/collaborating-with-issues-and-pull-requests). If you are not aware of the github workflow, it is recommended to go through them before continuing here.\n\n\n#### Get the Repository setup\n\n0. Fork Repository\n   - Fork [GlusterFS repository](https://github.com/gluster/glusterfs/fork).\n\n1. Clone Repository\n   - Clone the glusterfs repo freshly from github using the steps below.\n\n```\n   git clone git@github.com:${username}/glusterfs.git\n   cd glusterfs/\n   git remote add upstream git@github.com:gluster/glusterfs.git\n```\n\nAbout two tasks are one time for the life time. You can continue to use the same repository for all the work in future.\n\n#### Development & Other flows\n\n0. Issue:\n   - Make sure there is an issue filed for the task you are working on.\n   - If it is not filed, open the issue with all the description.\n   - If it is a bug fix, add label \"Type:Bug\".\n   - If it is an RFC, provide all the documentation, and request for \"DocApproved\", and \"SpecApproved\" label.\n\n1. Code:\n   - Start coding\n   - Build and test locally\n   - Make sure clang-format is installed and is run on the patch.\n\n2. Keep up-to-date\n   - GlusterFS is a large project with many developers, so there would be one or the other patch everyday.\n   - It is critical for developer to be up-to-date with `devel` repo to be Conflict-Free when PR is opened.\n   - Git provides many options to keep up-to-date, below is one of them\n```\n   git fetch upstream\n   git rebase upstream/devel\n```\n   - It is recommended you keep pushing to your repo every day, so you don't loose any work.\n     - It can be done by `./rfc.sh` (or `git push origin HEAD:issueNNN`)\n\n2. Commit Message / PR description:\n   - The name of the branch on your personal fork can start with issueNNNN, followed by anything of your choice.\n   - PRs continue to have the title of format \"component: \\<title\\>\", like it is practiced now.\n   - When you open a PR, having a reference Issue for the commit is mandatory in GlusterFS.\n   - Commit message can have, either `Fixes: #NNNN` or `Updates: #NNNN` in a separate line in the commit message.\n     - Here, NNNN is the Issue ID in glusterfs repository.\n   - Each commit needs the author to have the \"Signed-off-by: Name \\<email\\>\" line.\n     - Can do this by `-s` option for `git commit`.\n   - If the PR is not ready for review, apply the label `work-in-progress`.\n     - Check the availability of \"Draft PR\" is present for you, if yes, use that instead.\n\n3. Tests:\n   - All the required smoke tests would be auto-triggered.\n     - Developers get a chance to retrigger the smoke tests using **\"/recheck smoke\"** as comment.\n   - The \"regression\" tests would be triggered by a comment **\"/run regression\"** from developers in the [@gluster](https://github.com/orgs/gluster/people) organization.\n     - Ask for help as comment in PR if you have any questions about the process!\n\n4. Review Process:\n   - `+2` : is equivalent to \"Approve\" from the people in the maintainer's group.\n   - `+1` : can be given by a maintainer/reviewer by explicitly stating that in the comment.\n   - `-1` : provide details on required changes and pick \"Request Changes\" while submitting your review.\n   - `-2` : done by adding the `DO-NOT-MERGE` label.\n\n   - Any further discussions can happen as comments in the PR.\n\n5. Making changes:\n   - There are 2 approaches to submit changes done after addressing review comments.\n     - Commit changes as a new commit on top of the original commits in the branch, and push the changes to same branch (issueNNNN)\n     - Commit changes into the same commit with `--amend` option, and do a push to the same branch with `--force` option.\n\n6. Merging:\n   - GlusterFS project follows 'Squash and Merge' method\n     - This is mainly to preserve the historic Gerrit method of one patch in `git log` for one URL link.\n     - This also makes every merge a complete patch, which has passed all tests.\n   - The merging of the patch is expected to be done by the maintainers.\n     - It can be done when all the tests (smoke and regression) pass.\n     - When the PR has 'Approved' flag from corresponding maintainer.\n   - If you feel there is delay, feel free to add a comment, discuss the same in Slack channel, or send email.\n\n## Becoming member of gluster.org team in github\n\nThis section details the process of becoming part of gluster.org team.\nThe member list is reviewed by the current maintainers along with infra team time to time.\n\n### How to create a presence/identity in the Gluster.org projects\n\nWords 'MUST', 'SHOULD' etc to be referred from [RFC2119](https://tools.ietf.org/html/rfc2119)\n\n* MUST have enabled [two-factor authentication](https://help.github.com/articles/about-two-factor-authentication) on their GitHub account\n* MUST have read the [contributor guide](#)\n* SHOULD have made multiple contributions to the project or community. Contribution may include, but is not limited to:\n  - Authoring or reviewing PRs on GitHub\n  - Filing or commenting on issues on GitHub\n  - Contributing to subproject, or community discussions (e.g. meetings, Slack, email discussion forums, Stack Overflow)\n* SHOULD be subscribed to [gluster-users](https://lists.gluster.org/mailman/listinfo/gluster-users), [gluster-devel](https://lists.gluster.org/mailman/listinfo/gluster-devel) mailing lists.\n* SHOULD be actively contributing to 1 or more subprojects for 30 days.\n* Sponsored by 2 gluster-maintainers. Note the following requirements for sponsors:\n  - Sponsors must have close interactions with the prospective member - e.g. code/design/proposal review, coordinating on issues, etc.\n  - Sponsors must be the maintainer of an active repo in the Gluster org\n  - An approver/reviewer in the Gluster org may sponsor someone for the Gluster org; as long as it's a project they're involved with.\n\n\n### Request Process\n\n* Open an issue against the [project-infrastructure](https://github.com/gluster/project-infrastructure) repo\n  - With your github handle\n  - Ensure your sponsors are @mentioned on the issue or may be as approvers\n  - Have your sponsoring reviewers reply confirmation of sponsorship: +1\n* Once your sponsors have responded, your request will be reviewed by the admin. Any missing information will be requested.\n\n\n\n## By contributing to this project, the contributor would need to agree to below.\n\n### Developer's Certificate of Origin 1.1\n\nBy making a contribution to this project, I certify that:\n\n(a) The contribution was created in whole or in part by me and I\n    have the right to submit it under the open source license\n    indicated in the file; or\n\n(b) The contribution is based upon previous work that, to the best\n    of my knowledge, is covered under an appropriate open source\n    license and I have the right under that license to submit that\n    work with modifications, whether created in whole or in part\n    by me, under the same open source license (unless I am\n    permitted to submit under a different license), as indicated\n    in the file; or\n\n(c) The contribution was provided directly to me by some other\n    person who certified (a), (b) or (c) and I have not modified\n    it.\n\n(d) I understand and agree that this project and the contribution\n    are public and that a record of the contribution (including all\n    personal information I submit with it, including my sign-off) is\n    maintained indefinitely and may be redistributed consistent with\n    this project or the open source license(s) involved.\n\n"
        },
        {
          "name": "COPYING-GPLV2",
          "type": "blob",
          "size": 17.66796875,
          "content": "                    GNU GENERAL PUBLIC LICENSE\n                       Version 2, June 1991\n\n Copyright (C) 1989, 1991 Free Software Foundation, Inc.,\n 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA\n Everyone is permitted to copy and distribute verbatim copies\n of this license document, but changing it is not allowed.\n\n                            Preamble\n\n  The licenses for most software are designed to take away your\nfreedom to share and change it.  By contrast, the GNU General Public\nLicense is intended to guarantee your freedom to share and change free\nsoftware--to make sure the software is free for all its users.  This\nGeneral Public License applies to most of the Free Software\nFoundation's software and to any other program whose authors commit to\nusing it.  (Some other Free Software Foundation software is covered by\nthe GNU Lesser General Public License instead.)  You can apply it to\nyour programs, too.\n\n  When we speak of free software, we are referring to freedom, not\nprice.  Our General Public Licenses are designed to make sure that you\nhave the freedom to distribute copies of free software (and charge for\nthis service if you wish), that you receive source code or can get it\nif you want it, that you can change the software or use pieces of it\nin new free programs; and that you know you can do these things.\n\n  To protect your rights, we need to make restrictions that forbid\nanyone to deny you these rights or to ask you to surrender the rights.\nThese restrictions translate to certain responsibilities for you if you\ndistribute copies of the software, or if you modify it.\n\n  For example, if you distribute copies of such a program, whether\ngratis or for a fee, you must give the recipients all the rights that\nyou have.  You must make sure that they, too, receive or can get the\nsource code.  And you must show them these terms so they know their\nrights.\n\n  We protect your rights with two steps: (1) copyright the software, and\n(2) offer you this license which gives you legal permission to copy,\ndistribute and/or modify the software.\n\n  Also, for each author's protection and ours, we want to make certain\nthat everyone understands that there is no warranty for this free\nsoftware.  If the software is modified by someone else and passed on, we\nwant its recipients to know that what they have is not the original, so\nthat any problems introduced by others will not reflect on the original\nauthors' reputations.\n\n  Finally, any free program is threatened constantly by software\npatents.  We wish to avoid the danger that redistributors of a free\nprogram will individually obtain patent licenses, in effect making the\nprogram proprietary.  To prevent this, we have made it clear that any\npatent must be licensed for everyone's free use or not licensed at all.\n\n  The precise terms and conditions for copying, distribution and\nmodification follow.\n\n                    GNU GENERAL PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. This License applies to any program or other work which contains\na notice placed by the copyright holder saying it may be distributed\nunder the terms of this General Public License.  The \"Program\", below,\nrefers to any such program or work, and a \"work based on the Program\"\nmeans either the Program or any derivative work under copyright law:\nthat is to say, a work containing the Program or a portion of it,\neither verbatim or with modifications and/or translated into another\nlanguage.  (Hereinafter, translation is included without limitation in\nthe term \"modification\".)  Each licensee is addressed as \"you\".\n\nActivities other than copying, distribution and modification are not\ncovered by this License; they are outside its scope.  The act of\nrunning the Program is not restricted, and the output from the Program\nis covered only if its contents constitute a work based on the\nProgram (independent of having been made by running the Program).\nWhether that is true depends on what the Program does.\n\n  1. You may copy and distribute verbatim copies of the Program's\nsource code as you receive it, in any medium, provided that you\nconspicuously and appropriately publish on each copy an appropriate\ncopyright notice and disclaimer of warranty; keep intact all the\nnotices that refer to this License and to the absence of any warranty;\nand give any other recipients of the Program a copy of this License\nalong with the Program.\n\nYou may charge a fee for the physical act of transferring a copy, and\nyou may at your option offer warranty protection in exchange for a fee.\n\n  2. You may modify your copy or copies of the Program or any portion\nof it, thus forming a work based on the Program, and copy and\ndistribute such modifications or work under the terms of Section 1\nabove, provided that you also meet all of these conditions:\n\n    a) You must cause the modified files to carry prominent notices\n    stating that you changed the files and the date of any change.\n\n    b) You must cause any work that you distribute or publish, that in\n    whole or in part contains or is derived from the Program or any\n    part thereof, to be licensed as a whole at no charge to all third\n    parties under the terms of this License.\n\n    c) If the modified program normally reads commands interactively\n    when run, you must cause it, when started running for such\n    interactive use in the most ordinary way, to print or display an\n    announcement including an appropriate copyright notice and a\n    notice that there is no warranty (or else, saying that you provide\n    a warranty) and that users may redistribute the program under\n    these conditions, and telling the user how to view a copy of this\n    License.  (Exception: if the Program itself is interactive but\n    does not normally print such an announcement, your work based on\n    the Program is not required to print an announcement.)\n\nThese requirements apply to the modified work as a whole.  If\nidentifiable sections of that work are not derived from the Program,\nand can be reasonably considered independent and separate works in\nthemselves, then this License, and its terms, do not apply to those\nsections when you distribute them as separate works.  But when you\ndistribute the same sections as part of a whole which is a work based\non the Program, the distribution of the whole must be on the terms of\nthis License, whose permissions for other licensees extend to the\nentire whole, and thus to each and every part regardless of who wrote it.\n\nThus, it is not the intent of this section to claim rights or contest\nyour rights to work written entirely by you; rather, the intent is to\nexercise the right to control the distribution of derivative or\ncollective works based on the Program.\n\nIn addition, mere aggregation of another work not based on the Program\nwith the Program (or with a work based on the Program) on a volume of\na storage or distribution medium does not bring the other work under\nthe scope of this License.\n\n  3. You may copy and distribute the Program (or a work based on it,\nunder Section 2) in object code or executable form under the terms of\nSections 1 and 2 above provided that you also do one of the following:\n\n    a) Accompany it with the complete corresponding machine-readable\n    source code, which must be distributed under the terms of Sections\n    1 and 2 above on a medium customarily used for software interchange; or,\n\n    b) Accompany it with a written offer, valid for at least three\n    years, to give any third party, for a charge no more than your\n    cost of physically performing source distribution, a complete\n    machine-readable copy of the corresponding source code, to be\n    distributed under the terms of Sections 1 and 2 above on a medium\n    customarily used for software interchange; or,\n\n    c) Accompany it with the information you received as to the offer\n    to distribute corresponding source code.  (This alternative is\n    allowed only for noncommercial distribution and only if you\n    received the program in object code or executable form with such\n    an offer, in accord with Subsection b above.)\n\nThe source code for a work means the preferred form of the work for\nmaking modifications to it.  For an executable work, complete source\ncode means all the source code for all modules it contains, plus any\nassociated interface definition files, plus the scripts used to\ncontrol compilation and installation of the executable.  However, as a\nspecial exception, the source code distributed need not include\nanything that is normally distributed (in either source or binary\nform) with the major components (compiler, kernel, and so on) of the\noperating system on which the executable runs, unless that component\nitself accompanies the executable.\n\nIf distribution of executable or object code is made by offering\naccess to copy from a designated place, then offering equivalent\naccess to copy the source code from the same place counts as\ndistribution of the source code, even though third parties are not\ncompelled to copy the source along with the object code.\n\n  4. You may not copy, modify, sublicense, or distribute the Program\nexcept as expressly provided under this License.  Any attempt\notherwise to copy, modify, sublicense or distribute the Program is\nvoid, and will automatically terminate your rights under this License.\nHowever, parties who have received copies, or rights, from you under\nthis License will not have their licenses terminated so long as such\nparties remain in full compliance.\n\n  5. You are not required to accept this License, since you have not\nsigned it.  However, nothing else grants you permission to modify or\ndistribute the Program or its derivative works.  These actions are\nprohibited by law if you do not accept this License.  Therefore, by\nmodifying or distributing the Program (or any work based on the\nProgram), you indicate your acceptance of this License to do so, and\nall its terms and conditions for copying, distributing or modifying\nthe Program or works based on it.\n\n  6. Each time you redistribute the Program (or any work based on the\nProgram), the recipient automatically receives a license from the\noriginal licensor to copy, distribute or modify the Program subject to\nthese terms and conditions.  You may not impose any further\nrestrictions on the recipients' exercise of the rights granted herein.\nYou are not responsible for enforcing compliance by third parties to\nthis License.\n\n  7. If, as a consequence of a court judgment or allegation of patent\ninfringement or for any other reason (not limited to patent issues),\nconditions are imposed on you (whether by court order, agreement or\notherwise) that contradict the conditions of this License, they do not\nexcuse you from the conditions of this License.  If you cannot\ndistribute so as to satisfy simultaneously your obligations under this\nLicense and any other pertinent obligations, then as a consequence you\nmay not distribute the Program at all.  For example, if a patent\nlicense would not permit royalty-free redistribution of the Program by\nall those who receive copies directly or indirectly through you, then\nthe only way you could satisfy both it and this License would be to\nrefrain entirely from distribution of the Program.\n\nIf any portion of this section is held invalid or unenforceable under\nany particular circumstance, the balance of the section is intended to\napply and the section as a whole is intended to apply in other\ncircumstances.\n\nIt is not the purpose of this section to induce you to infringe any\npatents or other property right claims or to contest validity of any\nsuch claims; this section has the sole purpose of protecting the\nintegrity of the free software distribution system, which is\nimplemented by public license practices.  Many people have made\ngenerous contributions to the wide range of software distributed\nthrough that system in reliance on consistent application of that\nsystem; it is up to the author/donor to decide if he or she is willing\nto distribute software through any other system and a licensee cannot\nimpose that choice.\n\nThis section is intended to make thoroughly clear what is believed to\nbe a consequence of the rest of this License.\n\n  8. If the distribution and/or use of the Program is restricted in\ncertain countries either by patents or by copyrighted interfaces, the\noriginal copyright holder who places the Program under this License\nmay add an explicit geographical distribution limitation excluding\nthose countries, so that distribution is permitted only in or among\ncountries not thus excluded.  In such case, this License incorporates\nthe limitation as if written in the body of this License.\n\n  9. The Free Software Foundation may publish revised and/or new versions\nof the General Public License from time to time.  Such new versions will\nbe similar in spirit to the present version, but may differ in detail to\naddress new problems or concerns.\n\nEach version is given a distinguishing version number.  If the Program\nspecifies a version number of this License which applies to it and \"any\nlater version\", you have the option of following the terms and conditions\neither of that version or of any later version published by the Free\nSoftware Foundation.  If the Program does not specify a version number of\nthis License, you may choose any version ever published by the Free Software\nFoundation.\n\n  10. If you wish to incorporate parts of the Program into other free\nprograms whose distribution conditions are different, write to the author\nto ask for permission.  For software which is copyrighted by the Free\nSoftware Foundation, write to the Free Software Foundation; we sometimes\nmake exceptions for this.  Our decision will be guided by the two goals\nof preserving the free status of all derivatives of our free software and\nof promoting the sharing and reuse of software generally.\n\n                            NO WARRANTY\n\n  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\nFOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\nOTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\nPROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\nOR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\nMERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\nTO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\nPROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\nREPAIR OR CORRECTION.\n\n  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\nWILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\nREDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\nINCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\nOUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\nTO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\nYOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\nPROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\nPOSSIBILITY OF SUCH DAMAGES.\n\n                     END OF TERMS AND CONDITIONS\n\n            How to Apply These Terms to Your New Programs\n\n  If you develop a new program, and you want it to be of the greatest\npossible use to the public, the best way to achieve this is to make it\nfree software which everyone can redistribute and change under these terms.\n\n  To do so, attach the following notices to the program.  It is safest\nto attach them to the start of each source file to most effectively\nconvey the exclusion of warranty; and each file should have at least\nthe \"copyright\" line and a pointer to where the full notice is found.\n\n    <one line to give the program's name and a brief idea of what it does.>\n    Copyright (C) <year>  <name of author>\n\n    This program is free software; you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation; either version 2 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License along\n    with this program; if not, write to the Free Software Foundation, Inc.,\n    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n\nAlso add information on how to contact you by electronic and paper mail.\n\nIf the program is interactive, make it output a short notice like this\nwhen it starts in an interactive mode:\n\n    Gnomovision version 69, Copyright (C) year name of author\n    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n    This is free software, and you are welcome to redistribute it\n    under certain conditions; type `show c' for details.\n\nThe hypothetical commands `show w' and `show c' should show the appropriate\nparts of the General Public License.  Of course, the commands you use may\nbe called something other than `show w' and `show c'; they could even be\nmouse-clicks or menu items--whatever suits your program.\n\nYou should also get your employer (if you work as a programmer) or your\nschool, if any, to sign a \"copyright disclaimer\" for the program, if\nnecessary.  Here is a sample; alter the names:\n\n  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n\n  <signature of Ty Coon>, 1 April 1989\n  Ty Coon, President of Vice\n\nThis General Public License does not permit incorporating your program into\nproprietary programs.  If your program is a subroutine library, you may\nconsider it more useful to permit linking proprietary applications with the\nlibrary.  If this is what you want to do, use the GNU Lesser General\nPublic License instead of this License.\n"
        },
        {
          "name": "COPYING-LGPLV3",
          "type": "blob",
          "size": 7.4716796875,
          "content": "                   GNU LESSER GENERAL PUBLIC LICENSE\n                       Version 3, 29 June 2007\n\n Copyright (C) 2007 Free Software Foundation, Inc. <http://fsf.org/>\n Everyone is permitted to copy and distribute verbatim copies\n of this license document, but changing it is not allowed.\n\n\n  This version of the GNU Lesser General Public License incorporates\nthe terms and conditions of version 3 of the GNU General Public\nLicense, supplemented by the additional permissions listed below.\n\n  0. Additional Definitions.\n\n  As used herein, \"this License\" refers to version 3 of the GNU Lesser\nGeneral Public License, and the \"GNU GPL\" refers to version 3 of the GNU\nGeneral Public License.\n\n  \"The Library\" refers to a covered work governed by this License,\nother than an Application or a Combined Work as defined below.\n\n  An \"Application\" is any work that makes use of an interface provided\nby the Library, but which is not otherwise based on the Library.\nDefining a subclass of a class defined by the Library is deemed a mode\nof using an interface provided by the Library.\n\n  A \"Combined Work\" is a work produced by combining or linking an\nApplication with the Library.  The particular version of the Library\nwith which the Combined Work was made is also called the \"Linked\nVersion\".\n\n  The \"Minimal Corresponding Source\" for a Combined Work means the\nCorresponding Source for the Combined Work, excluding any source code\nfor portions of the Combined Work that, considered in isolation, are\nbased on the Application, and not on the Linked Version.\n\n  The \"Corresponding Application Code\" for a Combined Work means the\nobject code and/or source code for the Application, including any data\nand utility programs needed for reproducing the Combined Work from the\nApplication, but excluding the System Libraries of the Combined Work.\n\n  1. Exception to Section 3 of the GNU GPL.\n\n  You may convey a covered work under sections 3 and 4 of this License\nwithout being bound by section 3 of the GNU GPL.\n\n  2. Conveying Modified Versions.\n\n  If you modify a copy of the Library, and, in your modifications, a\nfacility refers to a function or data to be supplied by an Application\nthat uses the facility (other than as an argument passed when the\nfacility is invoked), then you may convey a copy of the modified\nversion:\n\n   a) under this License, provided that you make a good faith effort to\n   ensure that, in the event an Application does not supply the\n   function or data, the facility still operates, and performs\n   whatever part of its purpose remains meaningful, or\n\n   b) under the GNU GPL, with none of the additional permissions of\n   this License applicable to that copy.\n\n  3. Object Code Incorporating Material from Library Header Files.\n\n  The object code form of an Application may incorporate material from\na header file that is part of the Library.  You may convey such object\ncode under terms of your choice, provided that, if the incorporated\nmaterial is not limited to numerical parameters, data structure\nlayouts and accessors, or small macros, inline functions and templates\n(ten or fewer lines in length), you do both of the following:\n\n   a) Give prominent notice with each copy of the object code that the\n   Library is used in it and that the Library and its use are\n   covered by this License.\n\n   b) Accompany the object code with a copy of the GNU GPL and this license\n   document.\n\n  4. Combined Works.\n\n  You may convey a Combined Work under terms of your choice that,\ntaken together, effectively do not restrict modification of the\nportions of the Library contained in the Combined Work and reverse\nengineering for debugging such modifications, if you also do each of\nthe following:\n\n   a) Give prominent notice with each copy of the Combined Work that\n   the Library is used in it and that the Library and its use are\n   covered by this License.\n\n   b) Accompany the Combined Work with a copy of the GNU GPL and this license\n   document.\n\n   c) For a Combined Work that displays copyright notices during\n   execution, include the copyright notice for the Library among\n   these notices, as well as a reference directing the user to the\n   copies of the GNU GPL and this license document.\n\n   d) Do one of the following:\n\n       0) Convey the Minimal Corresponding Source under the terms of this\n       License, and the Corresponding Application Code in a form\n       suitable for, and under terms that permit, the user to\n       recombine or relink the Application with a modified version of\n       the Linked Version to produce a modified Combined Work, in the\n       manner specified by section 6 of the GNU GPL for conveying\n       Corresponding Source.\n\n       1) Use a suitable shared library mechanism for linking with the\n       Library.  A suitable mechanism is one that (a) uses at run time\n       a copy of the Library already present on the user's computer\n       system, and (b) will operate properly with a modified version\n       of the Library that is interface-compatible with the Linked\n       Version.\n\n   e) Provide Installation Information, but only if you would otherwise\n   be required to provide such information under section 6 of the\n   GNU GPL, and only to the extent that such information is\n   necessary to install and execute a modified version of the\n   Combined Work produced by recombining or relinking the\n   Application with a modified version of the Linked Version. (If\n   you use option 4d0, the Installation Information must accompany\n   the Minimal Corresponding Source and Corresponding Application\n   Code. If you use option 4d1, you must provide the Installation\n   Information in the manner specified by section 6 of the GNU GPL\n   for conveying Corresponding Source.)\n\n  5. Combined Libraries.\n\n  You may place library facilities that are a work based on the\nLibrary side by side in a single library together with other library\nfacilities that are not Applications and are not covered by this\nLicense, and convey such a combined library under terms of your\nchoice, if you do both of the following:\n\n   a) Accompany the combined library with a copy of the same work based\n   on the Library, uncombined with any other library facilities,\n   conveyed under the terms of this License.\n\n   b) Give prominent notice with the combined library that part of it\n   is a work based on the Library, and explaining where to find the\n   accompanying uncombined form of the same work.\n\n  6. Revised Versions of the GNU Lesser General Public License.\n\n  The Free Software Foundation may publish revised and/or new versions\nof the GNU Lesser General Public License from time to time. Such new\nversions will be similar in spirit to the present version, but may\ndiffer in detail to address new problems or concerns.\n\n  Each version is given a distinguishing version number. If the\nLibrary as you received it specifies that a certain numbered version\nof the GNU Lesser General Public License \"or any later version\"\napplies to it, you have the option of following the terms and\nconditions either of that published version or of any later version\npublished by the Free Software Foundation. If the Library as you\nreceived it does not specify a version number of the GNU Lesser\nGeneral Public License, you may choose any version of the GNU Lesser\nGeneral Public License ever published by the Free Software Foundation.\n\n  If the Library as you received it specifies that a proxy can decide\nwhether future versions of the GNU Lesser General Public License shall\napply, that proxy's public statement of acceptance of any version is\npermanent authorization for you to choose that version for the\nLibrary.\n"
        },
        {
          "name": "ChangeLog",
          "type": "blob",
          "size": 0.037109375,
          "content": "ChangeLog is maintained by \"git log\".\n"
        },
        {
          "name": "INSTALL",
          "type": "blob",
          "size": 1.359375,
          "content": "Installation Instructions\n*************************\n\n0. If you have cloned from git, run ./autogen.sh.\n\n1. Run ./configure.\n\n bash# ./configure\n GlusterFS configure summary\n ===========================\n GlusterFS configure summary\n  ===========================\n   FUSE client          : yes\n   Infiniband verbs     : yes\n   epoll IO multiplex   : yes\n   argp-standalone      : no\n   fusermount           : yes\n   readline             : yes\n   georeplication       : yes\n   Linux-AIO            : yes\n   Enable Debug         : no\n   Block Device xlator  : yes\n   glupy                : yes\n   Use syslog           : yes\n   XML output           : yes\n   QEMU Block formats   : yes\n   Encryption xlator    : yes\n\n \nThe configure summary will tell you what all components will be built with \nGlusterFS. Other than 'argp-standalone' if something else says 'no', that \nfeature in GlusterFS will not be built. 'argp-standalone' package will only \nbe used if the system doesn't have a proper argp package installed.\n\n2. Now just run 'make' and later run 'make install' to install the package.\n\n bash# make \n bash# make install\n\nInstallation completed :-)\n\n bash# glusterfs --version\n\nMake sure your version is the latest from the release, and the one you \njust installed :-)\n\nFor more information on GlusterFS installation refer# http://docs.gluster.org/en/latest/Developer-guide/Building-GlusterFS/\n"
        },
        {
          "name": "MAINTAINERS",
          "type": "blob",
          "size": 13.8369140625,
          "content": "GlusterFS Maintainers\n=====================\n\nThe intention of this file is not to establish who owns what portions of the\ncode base, but to provide a set of names that developers can consult when they\nhave a question about a particular subset and also to provide a set of names\nto be CC'd when submitting a patch to obtain appropriate review.\n\nIn general, if you have a question about inclusion of a patch, you should\nconsult gluster-devel@gluster.org and not any specific individual privately.\n\nDescriptions of section entries:\n\n\tM: Main contact that knows and takes care of this area\n\tL: Mailing list that is relevant to this area\n\tW: Web-page with status/info\n\tQ: Patchwork web based patch tracking system site\n\tT: SCM tree type and location.  Type is one of: git, hg, quilt, stgit.\n\tS: Status, one of the following:\n\t   Supported:\tSomeone is actually paid to look after this.\n\t   Maintained:\tSomeone actually looks after it.\n\t   Odd Fixes:\tIt has a maintainer but they don't have time to do\n\t\t\tmuch other than throw the odd patch in. See below.\n\t   Orphan:\tNo current maintainer [but maybe you could take the\n\t\t\trole as you write your new code].\n\t   Obsolete:\tOld code. Something tagged obsolete generally means\n\t\t\tit has been replaced by a better system and you\n\t\t\tshould be using that.\n\tF: Files and directories with wildcard patterns.\n\t   A trailing slash includes all files and subdirectory files.\n\t   F:\tdrivers/net/\tall files in and below drivers/net\n\t   F:\tdrivers/net/*\tall files in drivers/net, but not below\n\t   F:\t*/net/*\t\tall files in \"any top level directory\"/net\n\t   One pattern per line.  Multiple F: lines acceptable.\n\tX: Files and directories that are NOT maintained, same rules as F:\n\t   Files exclusions are tested before file matches.\n\t   Can be useful for excluding a specific subdirectory, for instance:\n\t   F:\tnet/\n\t   X:\tnet/ipv6/\n\t   matches all files in and below net excluding net/ipv6/\n\tK: Keyword perl extended regex pattern to match content in a\n\t   patch or file.  For instance:\n\t   K: of_get_profile\n\t      matches patches or files that contain \"of_get_profile\"\n\t   K: \\b(printk|pr_(info|err))\\b\n\t      matches patches or files that contain one or more of the words\n\t      printk, pr_info or pr_err\n\t   One regex pattern per line.  Multiple K: lines acceptable.\n        P: Peer for a component\n\n\nGeneral Project Architects\n--------------------------\nM: Amar Tumballi <amar@kadalu.io>\nM: Xavier Hernandez  <xhernandez@redhat.com>\nP: Pranith Karampuri <pranith.karampuri@phonepe.com>\nP: Atin Mukherjee <amukherj@redhat.com>\n\nxlators:\n--------\nAccess Control List (ACL)\nM: Raghavendra Talur <rtalur@redhat.com>\nP: Jiffin Tony Thottan <jthottan@redhat.com>\nS: Maintained\nF: xlators/system/posix-acl/\n\nArbiter\nM: Ravishankar N <ravishankar.n@pavilion.io>\nP: Pranith Karampuri <pranith.karampuri@phonepe.com>\nS: Maintained\nF: xlators/features/arbiter/\n\nAutomatic File Replication (AFR)\nM: Pranith Karampuri <pranith.karampuri@phonepe.com>\nM: Ravishankar N <ravishankar.n@pavilion.io>\nP: Karthik US <ksubrahm@redhat.com>\nS: Maintained\nF: xlators/cluster/afr/\n\nBarrier\nM: Raghavendra Bhat <rabhat@redhat.com>\nP: Atin Mukherjee <amukherj@redhat.com>\nS: Maintained\nF: xlators/features/barrier\n\nBitRot\nM: Kotresh HR <khiremat@redhat.com>\nP: Raghavendra Bhat <rabhat@redhat.com>\nS: Maintained\nF: xlators/features/bit-rot/\n\nChangelog\nM: Aravinda Vishwanathapura <aravinda@kadalu.io>\nP: Kotresh HR <khiremat@redhat.com>\nS: Maintained\nF: xlators/features/changelog/\n\nDistributed Hashing Table (DHT)\nM: Mohit Agrawal <moagrawa@redhat.com>\nM: Barak Sason Rofman <bsasonro@redhat.com>\nM: Tamar Shacked <tshacked@redhat.com>\nP: Csaba Henk <chenk@redhat.com>\nS: Maintained\nF: xlators/cluster/dht/\n\nErasure Coding\nM: Pranith Karampuri <pranith.karampuri@phonepe.com>\nM: Xavier Hernandez  <xhernandez@redhat.com>\nP: Ashish Pandey <aspandey@redhat.com>\nP: Sheetal Pamecha <spamecha@redhat.com>\nS: Maintained\nF: xlators/cluster/ec/\n\nError-gen\nM: Raghavendra Talur <rtalur@redhat.com>\nS: Maintained\nF: xlators/debug/error-gen/\n\nFUSE Bridge\nM: Csaba Henk <chenk@redhat.com>\nP: Niels de Vos <ndevos@redhat.com>\nS: Maintained\nF: xlators/mount/\n\nIndex\nM: Pranith Karampuri <pranith.karampuri@phonepe.com>\nP: Ravishankar N <ravishankar.n@pavilion.io>\nS: Maintained\nF: xlators/features/index/\n\nIO Cache\nP: Mohammed Rafi KC <rafi.kavungal@iternity.com>\nS: Maintained\nF: xlators/performance/io-cache/\n\nIO Statistics\nM: Krutika Dhananjay <kdhananj@redhat.com>\nM: Shyam Ranganathan <srangana@redhat.com>\nS: Maintained\nF: xlators/debug/io-stats/\n\nIO threads\nM: Pranith Karampuri <pranith.karampuri@phonepe.com>\nP: Ravishankar N <ravishankar.n@pavilion.io>\nS: Maintained\nF: xlators/performance/io-threads/\n\nLeases\nM: Poornima G <pgurusid@redhat.com>\nP: Niels de Vos <ndevos@redhat.com>\nP: Soumya Koduri <skoduri@redhat.com>\nS: Maintained\nF: xlators/features/leases/\n\nLocks\nM: Krutika Dhananjay <kdhananj@redhat.com>\nP: Xavier Hernandez  <xhernandez@redhat.com>\nS: Maintained\nF: xlators/features/locks/\n\nMarker\nM: Kotresh HR <khiremat@redhat.com>\nS: Maintained\nF: xlators/features/marker/\n\nMeta\nM: Mohammed Rafi KC <rafi.kavungal@iternity.com>\nS: Maintained\nF: xlators/features/meta/\n\nMetadata-cache\nM: Poornima G <pgurusid@redhat.com>\nP: Soumya Koduri <skoduri@redhat.com>\nS: Maintained\nF: xlators/performance/md-cache/\n\nNegative-lookup Cache\nM: Poornima G <pgurusid@redhat.com>\nP: Pranith Karampuri <pranith.karampuri@phonepe.com>\nS: Maintained\nF: xlators/performance/nl-cache/\n\ngNFS\nM: Jiffin Tony Thottan <jthottan@redhat.com>\nP: Xie Changlong <xiechanglong@cmss.chinamobile.com>\nP: Amar Tumballi <amar@kadalu.io>\nS: Odd Fixes\nF: xlators/nfs/server/\n\nOpen-behind\nS: Maintained\nF: xlators/performance/open-behind/\n\nPosix:\nM: Raghavendra Bhat <raghavendra@redhat.com>\nP: Kotresh HR <khiremat@redhat.com>\nP: Krutika Dhananjay <kdhananj@redhat.com>\nS: Maintained\nF: xlators/storage/posix/\n\nQuick-read\nS: Maintained\nF: xlators/performance/quick-read/\n\nQuota\nM: Shyamsundar Ranganathan <srangana@redhat.com>\nP: Hari Gowtham <hgowtham@redhat.com>\nS: Maintained\nF: xlators/features/quota/\n\nRead-ahead\nP: Csaba Henk <chenk@redhat.com>\nS: Maintained\nF: xlators/performance/read-ahead/\n\nReaddir-ahead\nS: Maintained\nF: xlators/performance/readdir-ahead/\n\nSharding\nM: Krutika Dhananjay <kdhananj@redhat.com>\nP: Xavier Hernandez  <xhernandez@redhat.com>\nS: Maintained\nF: xlators/features/shard/\n\nTrash\nM: Anoop C S <anoopcs@redhat.com>\nM: Jiffin Tony Thottan <jthottan@redhat.com>\nS: Maintained\nF: xlators/features/trash/\n\nUpcall\nM: Poornima G <pgurusid@redhat.com>\nM: Soumya Koduri <skoduri@redhat.com>\nP: Niels de Vos <ndevos@redhat.com>\nS: Maintained\nF: xlators/features/upcall/\n\nWrite-behind\nP: Csaba Henk <chenk@redhat.com>\nS: Maintained\nF: xlators/performance/write-behind/\n\nWrite Once Read Many\nP: Karthik US <ksubrahm@redhat.com>\nS: Maintained\nF: xlators/features/read-only/\n\nCloudsync\nM: Susant Kumar Palai <spalai@redhat.com>\nS: Maintained\nF: xlators/features/cloudsync/\n\nOther bits of code:\n-------------------\n\nDoc\nM: Humble Chirammal <hchiramm@redhat.com>\nM: Raghavendra Talur <rtalur@redhat.com>\nS: Maintained\nF: doc/\n\nGeo Replication\nM: Aravinda Vishwanathapura <aravinda@kadalu.io>\nM: Kotresh HR <khiremat@redhat.com>\nM: Sunny Kumar <sunkumar@redhat.com>\nM: Shwetha Acharya <sacharya@redhat.com>\nS: Maintained\nF: geo-replication/\n\nGlusterfind\nM: Aravinda Vishwanathapura <aravinda@kadalu.io>\nP: Shwetha Acharya <sacharya@redhat.com>\nS: Maintained\nF: tools/glusterfind/\n\nlibgfapi\nM: Niels de Vos <ndevos@redhat.com>\nP: Poornima G <pgurusid@redhat.com>\nP: Shyamsundar Ranganathan <srangana@redhat.com>\nP: Soumya Koduri <skoduri@redhat.com>\nS: Maintained\nF: api/\n\nlibglusterfs\nM: Amar Tumballi <amar@kadalu.io>\nM: Xavier Hernandez  <xhernandez@redhat.com>\nM: Jeff Darcy <jeff@pl.atyp.us>\nP: Kaleb Keithley <kkeithle@redhat.com>\nP: Niels de Vos <ndevos@redhat.com>\nP: Pranith Karampuri <pranith.karampuri@phonepe.com>\nP: Shyamsundar Ranganathan <srangana@redhat.com>\nS: Maintained\nF: libglusterfs/\n\nxxhash\nM: Aravinda Vishwanathapura <aravinda@kadalu.io>\nM: Kotresh HR <khiremat@redhat.com>\nP: Yaniv Kaul <ykaul@redhat.com>\nS: Maintained\nF: contrib/xxhash/\nT: https://github.com/Cyan4973/xxHash.git\n\nManagement Daemon - glusterd\nM: Atin Mukherjee <amukherj@redhat.com>\nM: Mohit Agrawal <moagrawa@redhat.com>\nM: Sanju Rakonde <sanju.rakonde@phonepe.com>\nP: Nikhil Ladha <nladha@redhat.com>\nS: Maintained\nF: cli/\nF: xlators/mgmt/glusterd/\n\nProtocol\nM: Niels de Vos <ndevos@redhat.com>\nP: Mohammed Rafi KC <rafi.kavungal@iternity.com>\nS: Maintained\nF: xlators/protocol/\n\nRemote Procedure Call subsystem\nP: Mohit Agrawal <moagrawa@redhat.com>\nS: Maintained\nF: rpc/rpc-lib/\nF: rpc/xdr/\n\nSnapshot\nM: Raghavendra Bhat <raghavendra@redhat.com>\nP: Mohammed Rafi KC <rafi.kavungal@iternity.com>\nP: Sunny Kumar <sunkumar@redhat.com>\nS: Maintained\nF: xlators/mgmt/glusterd/src/glusterd-snap*\nF: extras/snap-scheduler.py\n\nSocket subsystem\nP: Krutika Dhananjay <kdhananj@redhat.com>\nP: Milind Changire <mchangir@redhat.com>\nP: Mohammed Rafi KC <rafi.kavungal@iternity.com>\nP: Mohit Agrawal <moagrawa@redhat.com>\nS: Maintained\nF: rpc/rpc-transport/socket/\n\nTesting - .t framework\nM: Raghavendra Talur <rtalur@redhat.com>\nS: Maintained\nF: tests/\n\nUtilities\nM: Aravinda Vishwanathapura <aravinda@kadalu.io>\nP: Niels de Vos <ndevos@redhat.com>\nP: Raghavendra Talur <rtalur@redhat.com>\nP: Sachidanda Urs <surs@redhat.com>\nS: Maintained\nF: extras/\n\nEvents APIs\nM: Aravinda Vishwanathapura <aravinda@kadalu.io>\nP: Srijan Sivakumar <ssivakum@redhat.com>\nS: Maintained\nF: events/\nF: libglusterfs/src/events*\nF: libglusterfs/src/eventtypes*\nF: extras/systemd/glustereventsd*\n\nDistribution Specific:\n----------------------\nBuild:\nM: Niels de Vos <ndevos@redhat.com>\nM: Hari Gowtham <hgowtham@redhat.com>\nP: Anoop C S <anoopcs@redhat.com>\nP: Raghavendra Talur <rtalur@redhat.com>\nP: Rinku Kothiya <rkothiya@redhat.com>\nS: Maintained\n\nDebian packages on download.gluster.org\nM: packaging@gluster.org\nM: Kaleb Keithley <kkeithle@redhat.com>\nM: Shwetha Acharya <sacharya@redhat.com>\nP: Sheetal Pamecha <spamecha@redhat.com>\nS: Maintained\nW: http://download.gluster.org/pub/gluster/glusterfs/LATEST/Debian/Debian.README\nT: https://github.com/gluster/glusterfs-debian.git\n\nOpenSuSE\nM: packaging@gluster.org\nM: Kaleb Keithley <kkeithle@redhat.com>\nM: Shwetha Acharya <sacharya@redhat.com>\nP: Sheetal Pamecha <spamecha@redhat.com>\nS: Maintained\nW: https://build.opensuse.org/repositories/home:glusterfs\nW: https://download.gluster.org/pub/gluster/glusterfs/LATEST/SuSE/SuSE.README\nT: https://github.com/gluster/glusterfs-suse.git\n\nPackages for the CentOS Storage SIG\nM: centos-devel@centos.org\nM: Niels de Vos <ndevos@redhat.com>\nP: Kaleb Keithley <kkeithle@redhat.com>\nS: Maintained\nW: https://wiki.centos.org/SpecialInterestGroup/Storage/Gluster\nT: https://github.com/CentOS-Storage-SIG/glusterfs.git\n\nUbuntu PPA\nM: packaging@gluster.org\nM: Kaleb Keithley <kkeithle@redhat.com>\nP: Sheetal Pamecha <spamecha@redhat.com>\nP: Shwetha Acharya <sacharya@redhat.com>\nS: Maintained\nW: https://launchpad.net/~gluster\nW: http://download.gluster.org/pub/gluster/glusterfs/LATEST/Ubuntu/Ubuntu.README\nT: https://github.com/gluster/glusterfs-debian.git\n\nRelated projects\n----------------\nGluster Block\nM: Prasanna Kumar Kalever <prasanna.kalever@redhat.com>\nM: Xiubo Li <xiubli@redhat.com>\nS: Maintained\nT: https://github.com/gluster/gluster-block.git\n\nGlusterFS core-utils\nM: Anoop C S <anoopcs@redhat.com>\nS: Maintained\nT: https://github.com/gluster/glusterfs-coreutils.git\n\nNFS-Ganesha FSAL plugin\nM: Jiffin Tony Thottan <jthottan@redhat.com>\nM: Kaleb Keithley <kkeithle@redhat.com>\nM: Soumya Koduri <skoduri@redhat.com>\nS: Maintained\nT: git://github.com/nfs-ganesha/nfs-ganesha.git\nF: src/nfs-ganesha~/src/FSAL/FSAL_GLUSTER/\n\nQEMU integration\nM: Niels de Vos <ndevos@redhat.com>\nM: Prasanna Kumar Kalever <prasanna.kalever@redhat.com>\nS: Maintained\nT: git://git.qemu.org/qemu.git\nF: block/gluster.c\n\nSamba VFS plugin\nM: Anoop C S <anoopcs@redhat.com>\nM: Raghavendra Talur <rtalur@redhat.com>\nM: Michael Adam <madam@redhat.com>\nM: Poornima G <pgurusid@redhat.com>\nS: Maintained\nT: git://git.samba.org/samba.git\nF: source3/modules/vfs_glusterfs.c\n\nStorhaug\nM: Jose A. Rivera <jarrpa@redhat.com>\nP: Kaleb Keithley <kkeithle@redhat.com>\nS: Maintained\nT: https://github.com/linux-ha-storage/storhaug.git\n\nTesting - Glusto-Tests\nM: Jonathan Holloway <jholloway@redhat.com>\nM: Vijay Bhaskar Reddy Avuthu <vavuthu@redhat.com>\nM: Akarsha Rai <akrai@redhat.com>\nS: Maintained\nT: https://github.com/gluster/glusto-tests.git\n\nWireshark dissectors\nM: Niels de Vos <ndevos@redhat.com>\nS: Maintained\nW: https://forge.gluster.org/wireshark\nT: http://code.wireshark.org/git/wireshark\nF: epan/dissectors/packet-gluster*\n\nInfrastructure\n--------------\n\nPlatform\nM: Michael Scherer <misc@redhat.com>\nP: Deepshika Khandelwal <dkhandel@redhat.com>\nP: Amar Tumballi <amar@kadalu.io>\n\nContinuous Integration\nM: Michael Scherer <misc@redhat.com>\nM: Deepshikha Khandelwal <dkhandel@redhat.com>\nP: Niels de Vos <ndevos@redhat.com>\n\nSpecial Thanks\n--------------\n\nGlusterFS would not be possible without the contributions of:\n\n\nM: Vijay Bellur <vbellur@redhat.com>\nM: Jeff Darcy <jeff@pl.atyp.us>\nM: Shreyas Siravara <sshreyas@fb.com>\nM: Kaushal M <kaushal@redhat.com>\nM: Nigel Babu\nM: Prashanth Pai\nP: Sanoj Unnikrishnan\nP: Milind Changire <mchangir@redhat.com>\nP: Sunil Kumar Acharya <sheggodu@redhat.com>\nM: Samikshan Bairagya <samikshan@gmail.com>\nM: Chris Hertel\nM: M. Mohan Kumar <mohan@in.ibm.com>\nM: Shishir Gowda <gowda.shishir@gmail.com>\nM: Brian Foster <bfoster@redhat.com>\nM: Anand Avati <avati@cs.stanford.edu>\nM: Dennis Schafroth <dennis@schafroth.com>\nM: Harshavardhana <harsha@harshavardhana.net>\nM: Krishnan Parthasarathi\nM: Justin Clift <justin@gluster.org>\nM: Venky Shankar <vshankar@redhat.com>\nM: Shravan Chandrashekar <shravantc99@gmail.com>\nM: Joseph Fernandes\nM: Vijaikumar Mallikarjuna\nM: Anand Subramanian\nM: Bharata B Rao <bharata@linux.vnet.ibm.com>\nM: Rajesh Joseph\nM: Dan Lambright\nM: Jay Vyas\nM: Luis Pabon\nM: Ira Cooper\nM: Shwetha Panduranga\nM: Nithya Balachandran\nM: Raghavendra Gowdappa\nM: Susant Palai\n"
        },
        {
          "name": "Makefile.am",
          "type": "blob",
          "size": 1.8994140625,
          "content": "SOURCES = site.h\n\nEXTRA_DIST = autogen.sh \\\n\tCOPYING-GPLV2 COPYING-LGPLV3 COMMITMENT \\\n\tINSTALL README.md AUTHORS THANKS NEWS \\\n\tglusterfs.spec glusterfs-api.pc.in libgfchangelog.pc.in \\\n\trun-tests.sh \\\n\tbuild-aux/pkg-version \\\n\tcontrib/umountd \\\n\t$(shell find $(top_srcdir)/tests -type f -print)\n\n\nSUBDIRS = $(ARGP_STANDALONE_DIR) libglusterfs rpc api \\\n\tglusterfsd xlators $(FUSERMOUNT_SUBDIR) doc extras cli heal \\\n\t@SYNCDAEMON_SUBDIR@ @UMOUNTD_SUBDIR@ tools events\n\npkgconfigdir = @pkgconfigdir@\npkgconfig_DATA = glusterfs-api.pc libgfchangelog.pc\n\nCLEANFILES = glusterfs-api.pc libgfchangelog.pc contrib/umountd/Makefile\n\nclean-local:\n\tfind . -name '*.o' -o -name '*.lo' -o -name '.Po' | xargs rm -f\n\ngitclean: distclean\n\tfind . -name Makefile.in -exec rm -f {} \\;\n\tfind . -name mount.glusterfs -exec rm -f {} \\;\n\tfind . -name .deps -o -name .libs | xargs rm -rf\n\trm -fr autom4te.cache\n\trm -f missing aclocal.m4 config.h.in config.guess config.sub ltmain.sh install-sh configure depcomp\n\n# dist-hook gets executed with 'make dist', this is the only target getting\n# executed, a dist-hook in other Makefile.am files seem to get ignored.\ndist-hook: gen-VERSION gen-ChangeLog\n\t-rm -fr $(distdir)/contrib/umountd/.deps\n\t-rm -f $(distdir)/events/src/eventtypes.py\n\t-rm -f $(distdir)/tests/env.rc\n\t-cp -f $(top_srcdir)/build-aux/config.sub.dist $(distdir)/config.sub\n\t-cp -f $(top_srcdir)/build-aux/config.guess.dist $(distdir)/config.guess\n\n.PHONY: gen-VERSION gen-ChangeLog clang-check\n\nclang-check:\n\t@$(top_srcdir)/extras/clang-checker.sh\n\ngen-ChangeLog:\n\tif test -d $(srcdir)/.git; then            \t\\\n\t  (cd $(srcdir) && git diff && echo ===== git log ==== && git log) > $(distdir)/ChangeLog; \\\n\tfi\n\n.PHONY : gen-VERSION\ngen-VERSION:\n\tif test -d $(top_srcdir)/.git; then             \\\n\t  cd $(top_srcdir);                             \\\n\t  ./build-aux/pkg-version --full                \\\n\t    > $(abs_top_builddir)/$(distdir)/VERSION;   \\\n\tfi\n"
        },
        {
          "name": "NEWS",
          "type": "blob",
          "size": 0.0244140625,
          "content": "Gluster moves to Gerrit.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 4.2763671875,
          "content": "<h1 align=\"center\"><img src=\"https://www.gluster.org/wp-content/uploads/2016/03/gluster-ant.png\" width=\"320\" alt=\"Gluster is a free and open source software scalable network filesystem.\"></h1>\n\n<h4 align=\"center\">\n    <a href=\"https://gluster.slack.com/\"><img src=https://img.shields.io/badge/CHATON-SLACK-green></a> \n    <a href=\"https://www.youtube.com/playlist?list=PLUjCssFKEMhXBqPAGtOA1lYtzS1eWaJuN\"><img src=https://img.shields.io/badge/DEV%20SESSIONS-YOUTUBE-red></a> \n    <a href=\"https://twitter.com/gluster\"><img src=https://img.shields.io/badge/FOLLOW-ON%20TWITTER-blue></a><br/><br/>\n    <a href=\"https://docs.gluster.org/en/latest/Quick-Start-Guide/Quickstart/\"><img src=https://img.shields.io/badge/%20%20-Quick%20Start%20Guide-yellowgreen?style=for-the-badge></a> \n    <a href=\"https://docs.gluster.org/en/latest/release-notes/\"><img src=https://img.shields.io/badge/%20%20-Release%20Notes-%2341EDF5?style=for-the-badge></a> \n    <a href=\"https://lists.gluster.org/mailman/listinfo\"><img src=https://img.shields.io/badge/%20%20-Mailing%20List-%23F59E41?style=for-the-badge></a> \n    <a href=\"https://www.gluster.org/community/\"><img src=https://img.shields.io/badge/%20-COMMUNITY-%237D41F5?style=for-the-badge></a><br/><br/>\n    <a href=\"https://docs.gluster.org/en/latest/Contributors-Guide/Index/\"><img src=https://readme-typing-svg.herokuapp.com?color=%23000000&size=32&center=true&width=600&lines=Contribute+to+Gluster></a>\n</h4>\n\n\n---\n\n<p align=\"left\">\n    <a href=\"https://github.com/gluster/Gluster-Builds/actions\"><img src=\"https://github.com/gluster/Gluster-Builds/actions/workflows/Nightly_Build_Fedora_Latest.yml/badge.svg\" alt=\"Build Status\"></a>\n    <a href=\"https://github.com/gluster/Gluster-Builds/actions\"> <img src=\"https://github.com/gluster/Gluster-Builds/actions/workflows/Nightly_Build_Centos7.yml/badge.svg\" alt=\"Coverage Status\"></a>\n    <a href=\"https://github.com/gluster/Gluster-Builds/actions\"><img src=\"https://github.com/gluster/Gluster-Builds/actions/workflows/Nightly_Build_Centos8.yml/badge.svg\"></a>\n    <a href=\"https://github.com/gluster/Gluster-Builds/actions\"><img src=\"https://github.com/gluster/Gluster-Builds/actions/workflows/nightly-build-debian.yml/badge.svg\"></a>\n    <a href=\"https://github.com/gluster/Gluster-Builds/actions\"><img src=\"https://github.com/gluster/Gluster-Builds/actions/workflows/nightly-build-ubuntu.yml/badge.svg\"></a>\n    <a href=\"https://ci.centos.org/view/Gluster/job/gluster_build-rpms/\"><img src=\"https://ci.centos.org/buildStatus/icon?job=gluster_build-rpms\"></a>\n    <a href=\"https://scan.coverity.com/projects/gluster-glusterfs\"><img src=\"https://scan.coverity.com/projects/987/badge.svg\"></a>\n </p>\n\n\n# Gluster\n  Gluster is a software defined distributed storage that can scale to several\n  petabytes. It provides interfaces for object, block and file storage.\n\n## Development\n  The development workflow is documented in [Contributors guide](CONTRIBUTING.md)\n\n## Documentation\n  The Gluster documentation can be found at [Gluster Docs](http://docs.gluster.org).\n\n## Deployment\n  Quick instructions to build and install can be found in [INSTALL](INSTALL) file.\n\n## Testing\n\n  GlusterFS source contains some functional tests under `tests/` directory. All\n  these tests are run against every patch submitted for review. If you want your\n  patch to be tested, please add a `.t` test file as part of your patch submission.\n  You can also submit a patch to only add a `.t` file for the test case you are\n  aware of.\n\n  To run these tests, on your test-machine, just run `./run-tests.sh`. Don't run\n  this on a machine where you have 'production' glusterfs is running, as it would\n  blindly kill all gluster processes in each runs.\n\n  If you are sending a patch, and want to validate one or few specific tests, then\n  run a single test by running the below command.\n\n```\n  bash# /bin/bash ${path_to_gluster}/tests/basic/rpc-coverage.t\n```\n\n  You can also use `prove` tool if available in your machine, as follows.\n\n```\n  bash# prove -vmfe '/bin/bash' ${path_to_gluster}/tests/basic/rpc-coverage.t\n```\n\n\n## Maintainers\n  The list of Gluster maintainers is available in [MAINTAINERS](MAINTAINERS) file.\n\n## License\n  Gluster is dual licensed under [GPLV2](COPYING-GPLV2) and [LGPLV3+](COPYING-LGPLV3).\n\n  Please visit the [Gluster Home Page](http://www.gluster.org/) to find out more about Gluster.\n"
        },
        {
          "name": "THANKS",
          "type": "blob",
          "size": 0.087890625,
          "content": "For all of you, who use the product and help us make it more robust, useful, and popular.\n"
        },
        {
          "name": "api",
          "type": "tree",
          "content": null
        },
        {
          "name": "autogen.sh",
          "type": "blob",
          "size": 2.076171875,
          "content": "#!/bin/sh\n\necho\necho ... GlusterFS autogen ...\necho\n\n## Check all dependencies are present\nMISSING=\"\"\n\n# Check for aclocal\nenv aclocal --version > /dev/null 2>&1\nif [ $? -eq 0 ]; then\n  ACLOCAL=aclocal\nelse\n  MISSING=\"$MISSING aclocal\"\nfi\n\n# Check for autoconf\nenv autoconf --version > /dev/null 2>&1\nif [ $? -eq 0 ]; then\n  AUTOCONF=autoconf\nelse\n  MISSING=\"$MISSING autoconf\"\nfi\n\n# Check for autoheader\nenv autoheader --version > /dev/null 2>&1\nif [ $? -eq 0 ]; then\n  AUTOHEADER=autoheader\nelse\n  MISSING=\"$MISSING autoheader\"\nfi\n\n# Check for automake\nenv automake --version > /dev/null 2>&1\nif [ $? -eq 0 ]; then\n  AUTOMAKE=automake\nelse\n  MISSING=\"$MISSING automake\"\nfi\n\n# Check for pkg-config, if it is missing \n# configure generates some weird error messages\n# that are not at all helpful.\n# See: https://tirania.org/blog/archive/2012/Oct-20.html\nenv pkg-config --version > /dev/null 2>&1\nif [ $? -ne 0 ]; then\n  MISSING=\"$MISSING pkg-config\"\nfi\n\n# Check for libtoolize or glibtoolize\nenv libtoolize --version > /dev/null 2>&1\nif [ $? -eq 0 ]; then\n  # libtoolize was found, so use it\n  TOOL=libtoolize\nelse\n  # libtoolize wasn't found, so check for glibtoolize\n  env glibtoolize --version > /dev/null 2>&1\n  if [ $? -eq 0 ]; then\n    TOOL=glibtoolize\n  else\n    MISSING=\"$MISSING libtoolize/glibtoolize\"\n  fi\nfi\n\n# Check for tar\nenv tar -cf /dev/null /dev/null > /dev/null 2>&1\nif [ $? -ne 0 ]; then\n  MISSING=\"$MISSING tar\"\nfi\n\n## If dependencies are missing, warn the user and abort\nif [ \"x$MISSING\" != \"x\" ]; then\n  echo \"Aborting.\"\n  echo\n  echo \"The following build tools are missing:\"\n  echo\n  for pkg in $MISSING; do\n    echo \"  * $pkg\"\n  done\n  echo\n  echo \"Please install them and try again.\"\n  echo\n  exit 1\nfi\n\n## Do the autogeneration\necho Running ${ACLOCAL}...\n$ACLOCAL -I ./contrib/aclocal\necho Running ${AUTOHEADER}...\n$AUTOHEADER\necho Running ${TOOL}...\n$TOOL --automake --copy --force\necho Running ${AUTOCONF}...\n$AUTOCONF\necho Running ${AUTOMAKE}...\n$AUTOMAKE --add-missing --force-missing --copy\n\n# Instruct user on next steps\necho\necho \"Please proceed with configuring, compiling, and installing.\"\n"
        },
        {
          "name": "build-aux",
          "type": "tree",
          "content": null
        },
        {
          "name": "cli",
          "type": "tree",
          "content": null
        },
        {
          "name": "configure.ac",
          "type": "blob",
          "size": 68.30859375,
          "content": "dnl  Copyright (c) 2006-2016 Red Hat, Inc. <http://www.redhat.com>\ndnl  This file is part of GlusterFS.\ndnl\ndnl  This file is licensed to you under your choice of the GNU Lesser\ndnl  General Public License, version 3 or any later version (LGPLv3 or\ndnl  later), or the GNU General Public License, version 2 (GPLv2), in all\ndnl  cases as published by the Free Software Foundation.\n\n// clang-format off\nAC_INIT([glusterfs],[m4_esyscmd([build-aux/pkg-version --version])],[gluster-users@gluster.org],[],[https://github.com/gluster/glusterfs.git])\n\nAC_SUBST([PACKAGE_RELEASE],\n         [m4_esyscmd([build-aux/pkg-version --release])])\n\nAM_INIT_AUTOMAKE([tar-pax foreign])\n\n# Removes warnings when using automake 1.14 around (...but option 'subdir-objects' is disabled )\n#but libglusterfs fails to build with contrib (Then are not set up that way?)\n#AM_INIT_AUTOMAKE([subdir-objects])\n\nm4_ifdef([AM_SILENT_RULES], [AM_SILENT_RULES(yes)])\n\nAC_CONFIG_HEADERS([config.h site.h])\n\nAC_CONFIG_FILES([Makefile\n                libglusterfs/Makefile\n                libglusterfs/src/Makefile\n                geo-replication/src/peer_gsec_create\n                geo-replication/src/peer_mountbroker\n                geo-replication/src/peer_mountbroker.py\n                geo-replication/src/peer_georep-sshkey.py\n                extras/peer_add_secret_pub\n                geo-replication/syncdaemon/conf.py\n                geo-replication/gsyncd.conf\n                extras/snap_scheduler/conf.py\n                glusterfsd/Makefile\n                glusterfsd/src/Makefile\n                rpc/Makefile\n                rpc/rpc-lib/Makefile\n                rpc/rpc-lib/src/Makefile\n                rpc/rpc-transport/Makefile\n                rpc/rpc-transport/socket/Makefile\n                rpc/rpc-transport/socket/src/Makefile\n                rpc/xdr/Makefile\n                rpc/xdr/src/Makefile\n                xlators/Makefile\n                xlators/meta/Makefile\n                xlators/meta/src/Makefile\n                xlators/mount/Makefile\n                xlators/mount/fuse/Makefile\n                xlators/mount/fuse/src/Makefile\n                xlators/mount/fuse/utils/mount.glusterfs\n                xlators/mount/fuse/utils/mount_glusterfs\n                xlators/mount/fuse/utils/Makefile\n                xlators/storage/Makefile\n                xlators/storage/posix/Makefile\n                xlators/storage/posix/src/Makefile\n                xlators/cluster/Makefile\n                xlators/cluster/afr/Makefile\n                xlators/cluster/afr/src/Makefile\n                xlators/cluster/dht/Makefile\n                xlators/cluster/dht/src/Makefile\n                xlators/cluster/ec/Makefile\n                xlators/cluster/ec/src/Makefile\n                xlators/performance/Makefile\n                xlators/performance/write-behind/Makefile\n                xlators/performance/write-behind/src/Makefile\n                xlators/performance/read-ahead/Makefile\n                xlators/performance/read-ahead/src/Makefile\n                xlators/performance/readdir-ahead/Makefile\n                xlators/performance/readdir-ahead/src/Makefile\n                xlators/performance/io-threads/Makefile\n                xlators/performance/io-threads/src/Makefile\n                xlators/performance/io-cache/Makefile\n                xlators/performance/io-cache/src/Makefile\n                xlators/performance/quick-read/Makefile\n                xlators/performance/quick-read/src/Makefile\n                xlators/performance/open-behind/Makefile\n                xlators/performance/open-behind/src/Makefile\n                xlators/performance/md-cache/Makefile\n                xlators/performance/md-cache/src/Makefile\n                xlators/performance/nl-cache/Makefile\n                xlators/performance/nl-cache/src/Makefile\n                xlators/debug/Makefile\n                xlators/debug/sink/Makefile\n                xlators/debug/sink/src/Makefile\n                xlators/debug/trace/Makefile\n                xlators/debug/trace/src/Makefile\n                xlators/debug/error-gen/Makefile\n                xlators/debug/error-gen/src/Makefile\n                xlators/debug/delay-gen/Makefile\n                xlators/debug/delay-gen/src/Makefile\n                xlators/debug/io-stats/Makefile\n                xlators/debug/io-stats/src/Makefile\n                xlators/protocol/Makefile\n                xlators/protocol/auth/Makefile\n                xlators/protocol/auth/addr/Makefile\n                xlators/protocol/auth/addr/src/Makefile\n                xlators/protocol/auth/login/Makefile\n                xlators/protocol/auth/login/src/Makefile\n                xlators/protocol/client/Makefile\n                xlators/protocol/client/src/Makefile\n                xlators/protocol/server/Makefile\n                xlators/protocol/server/src/Makefile\n                xlators/features/Makefile\n                xlators/features/arbiter/Makefile\n                xlators/features/arbiter/src/Makefile\n                xlators/features/thin-arbiter/Makefile\n                xlators/features/thin-arbiter/src/Makefile\n                xlators/features/changelog/Makefile\n                xlators/features/changelog/src/Makefile\n                xlators/features/changelog/lib/Makefile\n                xlators/features/changelog/lib/src/Makefile\n                xlators/features/locks/Makefile\n                xlators/features/locks/src/Makefile\n                xlators/features/simple-quota/Makefile\n                xlators/features/simple-quota/src/Makefile\n                xlators/features/quota/Makefile\n                xlators/features/quota/src/Makefile\n                xlators/features/marker/Makefile\n                xlators/features/marker/src/Makefile\n                xlators/features/selinux/Makefile\n                xlators/features/selinux/src/Makefile\n                xlators/features/sdfs/Makefile\n                xlators/features/sdfs/src/Makefile\n                xlators/features/read-only/Makefile\n                xlators/features/read-only/src/Makefile\n                xlators/features/compress/Makefile\n                xlators/features/compress/src/Makefile\n                xlators/features/namespace/Makefile\n                xlators/features/namespace/src/Makefile\n                xlators/features/quiesce/Makefile\n                xlators/features/quiesce/src/Makefile\n                xlators/features/barrier/Makefile\n                xlators/features/barrier/src/Makefile\n                xlators/features/index/Makefile\n                xlators/features/index/src/Makefile\n                xlators/features/gfid-access/Makefile\n                xlators/features/gfid-access/src/Makefile\n                xlators/features/trash/Makefile\n                xlators/features/trash/src/Makefile\n                xlators/features/snapview-server/Makefile\n                xlators/features/snapview-server/src/Makefile\n                xlators/features/snapview-client/Makefile\n                xlators/features/snapview-client/src/Makefile\n                xlators/features/upcall/Makefile\n                xlators/features/upcall/src/Makefile\n                xlators/features/shard/Makefile\n                xlators/features/shard/src/Makefile\n                xlators/features/bit-rot/Makefile\n                xlators/features/bit-rot/src/Makefile\n                xlators/features/bit-rot/src/stub/Makefile\n                xlators/features/bit-rot/src/bitd/Makefile\n                xlators/features/leases/Makefile\n                xlators/features/leases/src/Makefile\n                xlators/features/cloudsync/Makefile\n                xlators/features/cloudsync/src/Makefile\n                xlators/features/utime/Makefile\n                xlators/features/utime/src/Makefile\n                xlators/features/cloudsync/src/cloudsync-plugins/Makefile\n                xlators/features/cloudsync/src/cloudsync-plugins/src/Makefile\n                xlators/features/cloudsync/src/cloudsync-plugins/src/cloudsyncs3/Makefile\n                xlators/features/cloudsync/src/cloudsync-plugins/src/cloudsyncs3/src/Makefile\n                xlators/features/cloudsync/src/cloudsync-plugins/src/cvlt/Makefile\n                xlators/features/cloudsync/src/cloudsync-plugins/src/cvlt/src/Makefile\n                xlators/features/metadisp/Makefile\n                xlators/features/metadisp/src/Makefile\n                xlators/playground/Makefile\n                xlators/playground/template/Makefile\n                xlators/playground/template/src/Makefile\n                xlators/system/Makefile\n                xlators/system/posix-acl/Makefile\n                xlators/system/posix-acl/src/Makefile\n                xlators/nfs/Makefile\n                xlators/nfs/server/Makefile\n                xlators/nfs/server/src/Makefile\n                xlators/mgmt/Makefile\n                xlators/mgmt/glusterd/Makefile\n                xlators/mgmt/glusterd/src/Makefile\n                cli/Makefile\n                cli/src/Makefile\n                doc/Makefile\n                extras/Makefile\n                extras/glusterd.vol\n                extras/cliutils/Makefile\n                extras/init.d/Makefile\n                extras/init.d/glusterd.plist\n                extras/init.d/glusterd-Debian\n                extras/init.d/glusterd-Redhat\n                extras/init.d/glusterd-FreeBSD\n                extras/init.d/glusterd-SuSE\n                extras/init.d/glustereventsd-Debian\n                extras/init.d/glustereventsd-Redhat\n                extras/init.d/glustereventsd-FreeBSD\n                extras/ganesha/Makefile\n                extras/ganesha/config/Makefile\n                extras/ganesha/scripts/Makefile\n                extras/ganesha/ocf/Makefile\n                extras/systemd/Makefile\n                extras/systemd/glusterd.service\n                extras/systemd/glustereventsd.service\n                extras/systemd/glusterfssharedstorage.service\n                extras/systemd/gluster-ta-volume.service\n                extras/run-gluster.tmpfiles\n                extras/benchmarking/Makefile\n                extras/command-completion/Makefile\n                extras/hook-scripts/Makefile\n                extras/ocf/Makefile\n                extras/ocf/glusterd\n                extras/ocf/volume\n                extras/LinuxRPM/Makefile\n                extras/geo-rep/Makefile\n                extras/geo-rep/schedule_georep.py\n                extras/firewalld/Makefile\n                extras/hook-scripts/add-brick/Makefile\n                extras/hook-scripts/add-brick/pre/Makefile\n                extras/hook-scripts/add-brick/post/Makefile\n                extras/hook-scripts/create/Makefile\n                extras/hook-scripts/create/post/Makefile\n                extras/hook-scripts/delete/Makefile\n                extras/hook-scripts/delete/pre/Makefile\n                extras/hook-scripts/start/Makefile\n                extras/hook-scripts/start/post/Makefile\n                extras/hook-scripts/set/Makefile\n                extras/hook-scripts/set/post/Makefile\n                extras/hook-scripts/stop/Makefile\n                extras/hook-scripts/stop/pre/Makefile\n                extras/hook-scripts/reset/Makefile\n                extras/hook-scripts/reset/post/Makefile\n                extras/hook-scripts/reset/pre/Makefile\n                extras/python/Makefile\n                extras/snap_scheduler/Makefile\n                events/Makefile\n                events/src/Makefile\n                events/src/eventsapiconf.py\n                events/tools/Makefile\n                contrib/fuse-util/Makefile\n                contrib/umountd/Makefile\n                glusterfs-api.pc\n                libgfchangelog.pc\n                api/Makefile\n                api/src/Makefile\n                api/examples/Makefile\n                geo-replication/Makefile\n                geo-replication/src/Makefile\n                geo-replication/syncdaemon/Makefile\n                tools/Makefile\n                tools/gfind_missing_files/Makefile\n                heal/Makefile\n                heal/src/Makefile\n                glusterfs.spec\n                tools/glusterfind/src/tool.conf\n                tools/glusterfind/glusterfind\n                tools/glusterfind/Makefile\n                tools/glusterfind/src/Makefile\n                tools/setgfid2path/Makefile\n                tools/setgfid2path/src/Makefile])\n\nAC_CANONICAL_HOST\n\nAC_PROG_CC\nAC_DISABLE_STATIC\nLT_INIT\nAC_SUBST([shrext_cmds])\n\nAC_CHECK_PROG([RPCGEN], [rpcgen], [yes], [no])\n\nif test \"x$RPCGEN\" = \"xno\"; then\n   AC_MSG_ERROR([`rpcgen` not found, glusterfs needs `rpcgen` exiting..])\nfi\n\n# Force 'char' type to be signed\nCFLAGS=\"${CFLAGS} -fsigned-char\"\n\n# Initialize CFLAGS before usage\nAC_ARG_ENABLE([debug],\n              AS_HELP_STRING([--enable-debug],[Enable debug build options.]))\nif test \"x$enable_debug\" = \"xyes\"; then\n        BUILD_DEBUG=yes\n        GF_CFLAGS=\"${GF_CFLAGS} -g -O0 -DDEBUG\"\nelse\n        BUILD_DEBUG=no\nfi\n\nSANITIZER=none\n\nAC_ARG_ENABLE([asan],\n              AS_HELP_STRING([--enable-asan],[Enable Address Sanitizer support]))\nif test \"x$enable_asan\" = \"xyes\"; then\n        SANITIZER=asan\n        AC_CHECK_LIB([asan], [_init], ,\n                [AC_MSG_ERROR([--enable-asan requires libasan.so, exiting])])\n        if test \"x$ac_cv_lib_asan__init\" = xyes; then\n                AC_MSG_CHECKING([whether asan API can be used])\n                saved_CFLAGS=${CFLAGS}\n                CFLAGS=\"${CFLAGS} -fsanitize=address\"\n                AC_COMPILE_IFELSE(\n                [AC_LANG_PROGRAM([\n                   [#include <sanitizer/common_interface_defs.h>]],\n                   [[__sanitizer_finish_switch_fiber(0, 0, 0)]])],\n                   [ASAN_API=yes], [ASAN_API=no])\n                AC_MSG_RESULT([$ASAN_API])\n                if test x$ASAN_API = \"xyes\"; then\n                   AC_DEFINE(HAVE_ASAN_API, 1, [Define if asan API can be used.])\n                fi\n                CFLAGS=${saved_CFLAGS}\n        fi\n        GF_CFLAGS=\"${GF_CFLAGS} -O2 -g -fsanitize=address -fno-omit-frame-pointer\"\n\n        dnl See: https://groups.google.com/d/msg/address-sanitizer/SD590XDinfQ/NMUPj_G0BgAJ\n        GF_LDFLAGS=\"${GF_LDFLAGS} -fsanitize=address\"\nfi\n\nAC_ARG_ENABLE([tsan],\n              AS_HELP_STRING([--enable-tsan],[Enable Thread Sanitizer support]))\nif test \"x$enable_tsan\" = \"xyes\"; then\n        if test \"x$SANITIZER\" != \"xnone\"; then\n                AC_MSG_ERROR([only one sanitizer can be enabled at once])\n        fi\n        SANITIZER=tsan\n        AC_CHECK_LIB([tsan], [_init], ,\n                [AC_MSG_ERROR([--enable-tsan requires libtsan.so, exiting])])\n        if test \"x$ac_cv_lib_tsan__init\" = xyes; then\n                AC_MSG_CHECKING([whether tsan API can be used])\n                saved_CFLAGS=${CFLAGS}\n                CFLAGS=\"${CFLAGS} -fsanitize=thread\"\n                AC_COMPILE_IFELSE(\n                [AC_LANG_PROGRAM([\n                   [#include <sanitizer/tsan_interface.h>]],\n                   [[__tsan_create_fiber(0)]])],\n                   [TSAN_API=yes], [TSAN_API=no])\n                AC_MSG_RESULT([$TSAN_API])\n                if test x$TSAN_API = \"xyes\"; then\n                   AC_DEFINE(HAVE_TSAN_API, 1, [Define if tsan API can be used.])\n                fi\n                CFLAGS=${saved_CFLAGS}\n        fi\n        GF_CFLAGS=\"${GF_CFLAGS} -O2 -g -fsanitize=thread -fno-omit-frame-pointer\"\n        GF_LDFLAGS=\"${GF_LDFLAGS} -fsanitize=thread\"\nfi\n\nAC_ARG_ENABLE([ubsan],\n              AS_HELP_STRING([--enable-ubsan],[Enable Undefined Behavior Sanitizer support]))\nif test \"x$enable_ubsan\" = \"xyes\"; then\n        if test \"x$SANITIZER\" != \"xnone\"; then\n                AC_MSG_ERROR([only one sanitizer can be enabled at once])\n        fi\n        SANITIZER=ubsan\n        AC_CHECK_LIB([ubsan], [_init], ,\n                [AC_MSG_ERROR([--enable-ubsan requires libubsan.so, exiting])])\n        GF_CFLAGS=\"${GF_CFLAGS} -O2 -g -fsanitize=undefined -fno-omit-frame-pointer\"\n        GF_LDFLAGS=\"${GF_LDFLAGS} -fsanitize=undefined\"\nfi\n\n# Initialize CFLAGS before usage\nBUILD_TCMALLOC=no\nUSE_MEMPOOL=yes\nAC_ARG_WITH([tcmalloc],\n        [AS_HELP_STRING([--without-tcmalloc],[Use gluster based mempool])],\n        [with_tcmalloc=\"no\"], [with_tcmalloc=\"yes\"])\nif test \"x$with_tcmalloc\" = \"xyes\"; then\n    AC_CHECK_LIB([tcmalloc_minimal], [malloc], [],\n                 [AC_MSG_ERROR([tcmalloc library needs to be present])])\n    BUILD_TCMALLOC=yes\n    GF_CFLAGS=\"${GF_CFLAGS} -fno-builtin-malloc -fno-builtin-calloc -fno-builtin-realloc -fno-builtin-free\"\n    GF_LDFLAGS=\"-ltcmalloc_minimal ${GF_LDFLAGS}\"\n    AC_DEFINE(GF_DISABLE_MEMPOOL, 1, [Disable the Gluster memory pooler.])\n    USE_MEMPOOL=no\nfi\n\n\ndnl When possible, prefer libtirpc over glibc rpc.\ndnl\ndnl On newer linux with only libtirpc, use libtirpc. (Specifying\ndnl --without-libtirpc is an error.)\ndnl\ndnl on older linux with glibc rpc and WITH libtirpc, use libtirpc\ndnl by default except when configured with --without-libtirpc.\ndnl\ndnl on old linux with glibc rpc and WITHOUT libtirpc, default to\ndnl use glibc rpc.\ndnl\nAC_ARG_WITH([libtirpc],\n        [AS_HELP_STRING([--without-libtirpc],[Use legacy glibc RPC.])],\n        [with_libtirpc=\"no\"], [with_libtirpc=\"yes\"])\n\ndnl For --without-libtirpc, check whether legacy glibc rpc is available.\nif test \"x$with_libtirpc\" = \"xno\"; then\n    AC_CHECK_HEADER([rpc/types.h], ,\n        AC_MSG_ERROR([Your C library lacks support for RPC. Please use libtirpc instead.]))\nfi\n\ndnl ipv6-default is off by default\ndnl\ndnl ipv6-default requires libtirpc. (glibc rpc does not support IPv6.)\ndnl ipv6-default can only be enabled if libtipc is enabled.\ndnl\nAC_ARG_WITH([ipv6-default],\n        AS_HELP_STRING([--with-ipv6-default],[Set IPv6 as default.]),\n        [with_ipv6_default=${with_libtirpc}], [with_ipv6_default=\"no\"])\n\nif test x$cross_compiling != xyes; then\n    AC_CHECK_FILE([/etc/centos-release])\n    if test \"x$ac_cv_file__etc_centos_release\" = \"xyes\"; then\n        if grep \"release 6\" /etc/centos-release; then\n                with_ipv6_default=\"no\"\n        fi\n    fi\nfi\n\ndnl On some distributions '-ldl' isn't automatically added to LIBS\nAC_CHECK_LIB([dl], [dlopen], [LIB_DL=-ldl])\nAC_SUBST(LIB_DL)\n\nAC_ARG_ENABLE([privport_tracking],\n              AS_HELP_STRING([--disable-privport_tracking],[Disable internal tracking of privileged ports.]))\nTRACK_PRIVPORTS=\"yes\"\nif test x\"$enable_privport_tracking\" = x\"no\"; then\n        TRACK_PRIVPORTS=\"no\"\n        AC_DEFINE(GF_DISABLE_PRIVPORT_TRACKING, 1,\n                  [Disable internal tracking of privileged ports.])\nfi\n\ncase $host_os in\n  darwin*)\n    # macOS version checking became a bit complicated since 11.x\n    # It is preferred to match against kernel version now instead of product version\n    # Darwin kernel is versioned as A.B.C where\n    # A = Kernel Version Major, starts from 5 (OS X Puma), incremented by 1 for each new release\n    # B = Kernel Version Minor\n    # C = Kernel Version Patch\n\n    # Should be greater than OS X Lion i.e. KernelMajor 11\n    DARWIN_KERNEL_MAJOR=\"`/usr/bin/uname -r | cut -d . -f 1`\"\n    if ! test $DARWIN_KERNEL_MAJOR -ge 11; then\n       AC_MSG_ERROR([You need at least OS X 10.7 (Lion) to build Glusterfs])\n    fi\n    # OSX version lesser than 9 has llvm/clang optimization issues which leads to various segfaults\n    # If OS X Mavericks or lower i.e KernelMajor = 13\n    if test $DARWIN_KERNEL_MAJOR -lt 13; then\n       GF_CFLAGS=\"${GF_CFLAGS} -g -O0 -DDEBUG\"\n    fi\n    ;;\nesac\n\n# --enable-valgrind prevents calling dlclose(), this leaks memory\nAC_ARG_ENABLE([valgrind],\n              AS_HELP_STRING([--enable-valgrind@<:@=memcheck,drd@:>@],[Enable valgrind for resource leak (memcheck, which is\n                              the default) or thread synchronization (drd) debugging.]))\ncase x$enable_valgrind in\n  xmemcheck|xyes)\n    AC_DEFINE(RUN_WITH_MEMCHECK, 1,\n              [Define if all processes should run under 'valgrind --tool=memcheck'.])\n    VALGRIND_TOOL=memcheck\n    ;;\n  xdrd)\n    AC_DEFINE(RUN_WITH_DRD, 1,\n              [Define if all processes should run under 'valgrind --tool=drd'.])\n    VALGRIND_TOOL=drd\n    ;;\n  x|xno)\n    VALGRIND_TOOL=no\n    ;;\n  *)\n    AC_MSG_ERROR([Please specify --enable-valgrind@<:@=memcheck,drd@:>@])\n    ;;\nesac\n\nif test \"x$VALGRIND_TOOL\" != xno; then\n   AC_MSG_CHECKING([whether valgrind API can be used])\n   AC_COMPILE_IFELSE(\n   [AC_LANG_PROGRAM([\n      [#include <valgrind/valgrind.h>]],\n      [[VALGRIND_STACK_DEREGISTER(VALGRIND_STACK_REGISTER(0, 0))]])],\n      [HAVE_VALGRIND_API=yes], [HAVE_VALGRIND_API=no])\n   AC_MSG_RESULT([$HAVE_VALGRIND_API])\n   if test x$HAVE_VALGRIND_API = \"xyes\"; then\n      AC_DEFINE(HAVE_VALGRIND_API, 1, [Define if valgrind API can be used.])\n   fi\nfi\n\nAC_ARG_WITH([previous-options],\n        [AS_HELP_STRING([--with-previous-options],\n                        [read config.status for configure options])\n        ],\n        [ if test -r ./config.status && \\\n             args=$(grep 'ac_cs_config=' config.status | \\\n                    sed -e 's/.*\"\\(.*\\)\".*/\\1/' -e \"s/'//g\" -e \"s/--with-previous-options//g\") ; then\n            echo \"###\"\n            echo \"### Rerunning as '$0 $args'\"\n            echo \"###\"\n            exec $0 $args\n          fi\n        ])\n\nAC_ARG_WITH(pkgconfigdir,\n            [  --with-pkgconfigdir=DIR      pkgconfig file in DIR @<:@LIBDIR/pkgconfig@:>@],\n            [pkgconfigdir=$withval],\n            [pkgconfigdir='${libdir}/pkgconfig'])\nAC_SUBST(pkgconfigdir)\n\nAC_ARG_WITH(mountutildir,\n            [  --with-mountutildir=DIR mount helper utility in DIR @<:@/sbin@:>@],\n            [mountutildir=$withval],\n            [mountutildir='/sbin'])\nAC_SUBST(mountutildir)\n\nAC_ARG_WITH(systemddir,\n            [  --with-systemddir=DIR systemd service files in DIR @<:@PREFIX/lib/systemd/system@:>@],\n            [systemddir=$withval],\n            [systemddir='${prefix}/lib/systemd/system'])\nAC_SUBST(systemddir)\nAM_CONDITIONAL([USE_SYSTEMD], test [ -d '/usr/lib/systemd/system' ])\n\nAC_ARG_WITH(initdir,\n            [  --with-initdir=DIR init.d scripts in DIR @<:@/etc/init.d@:>@],\n            [initdir=$withval],\n            [initdir='/etc/init.d'])\nAC_SUBST(initdir)\n\nAC_ARG_WITH(launchddir,\n            [  --with-launchddir=DIR launchd services in DIR @<:@/Library/LaunchDaemons@:>@],\n            [launchddir=$withval],\n            [launchddir='/Library/LaunchDaemons'])\nAC_SUBST(launchddir)\n\nAC_ARG_WITH(tmpfilesdir,\n            AS_HELP_STRING([--with-tmpfilesdir=DIR],[tmpfiles config in DIR, disabled by default]),\n            [tmpfilesdir=$withval],\n            [tmpfilesdir=''])\nAC_SUBST(tmpfilesdir)\n\nAC_ARG_WITH([ocf],\n            [AS_HELP_STRING([--without-ocf], [build OCF-compliant cluster resource agents])],\n            ,\n            [OCF_SUBDIR='ocf'],\n            )\nAC_SUBST(OCF_SUBDIR)\n\nAC_ARG_WITH([server],\n            [AS_HELP_STRING([--without-server], [do not build server components])],\n            [with_server=$withval],\n            [with_server='yes'],\n            )\nAM_CONDITIONAL([WITH_SERVER], [test x$with_server = xyes])\n\n# LEX needs a check\nAC_PROG_LEX([noyywrap])\nif test  \"x${LEX}\" != \"xflex\" -a \"x${FLEX}\" != \"xlex\"; then\n   AC_MSG_ERROR([Flex or lex required to build glusterfs.])\nfi\n\ndnl\ndnl Word sizes...\ndnl\nAC_CHECK_SIZEOF(short)\nAC_CHECK_SIZEOF(int)\nAC_CHECK_SIZEOF(long)\nAC_CHECK_SIZEOF(long long)\nSIZEOF_SHORT=$ac_cv_sizeof_short\nSIZEOF_INT=$ac_cv_sizeof_int\nSIZEOF_LONG=$ac_cv_sizeof_long\nSIZEOF_LONG_LONG=$ac_cv_sizeof_long_long\nAC_SUBST(SIZEOF_SHORT)\nAC_SUBST(SIZEOF_INT)\nAC_SUBST(SIZEOF_LONG)\nAC_SUBST(SIZEOF_LONG_LONG)\n\n# size of time_t\nAC_CHECK_SIZEOF(time_t)\nSIZEOF_TIME_T=$ac_cv_sizeof_time_t\nAC_SUBST(SIZEOF_TIME_T)\n\n# YACC needs a check\nAC_PROG_YACC\nif test \"x${YACC}\" = \"xbyacc\" -o \"x${YACC}\" = \"xyacc\" -o \"x${YACC}\" = \"x\"; then\n   AC_MSG_ERROR([GNU Bison required to build glusterfs.])\nfi\n\nAC_CHECK_TOOL([LD],[ld])\n\nAC_CHECK_LIB([crypto], [MD5], , AC_MSG_ERROR([OpenSSL crypto library is required to build glusterfs]))\n\nAC_CHECK_LIB([pthread], [pthread_mutex_init], , AC_MSG_ERROR([Posix threads library is required to build glusterfs]))\n\nAC_CHECK_FUNC([dlopen], [has_dlopen=yes], AC_CHECK_LIB([dl], [dlopen], , AC_MSG_ERROR([Dynamic linking library required to build glusterfs])))\n\nAC_CHECK_LIB([intl], [gettext])\n\nAC_CHECK_HEADERS([sys/xattr.h])\n\nAC_CHECK_HEADERS([sys/ioctl.h], AC_DEFINE(HAVE_IOCTL_IN_SYS_IOCTL_H, 1, [have sys/ioctl.h]))\n\nAC_CHECK_HEADERS([sys/extattr.h])\n\nAC_CHECK_HEADERS([openssl/dh.h])\n\nAC_CHECK_HEADERS([openssl/ecdh.h])\n\nAC_CHECK_LIB([ssl], [SSL_CTX_get0_param], [AC_DEFINE([HAVE_SSL_CTX_GET0_PARAM], [1], [define if found OpenSSL SSL_CTX_get0_param])])\n\ndnl Math library\nAC_CHECK_LIB([m], [pow], [MATH_LIB='-lm'], [MATH_LIB=''])\nAC_SUBST(MATH_LIB)\n\ndnl depend on libuuid.so\nPKG_CHECK_MODULES([UUID], [uuid],\n        [have_uuid=yes\n         AC_DEFINE(HAVE_LIBUUID, 1, [have libuuid.so])\n         PKGCONFIG_UUID=uuid],\n        [have_uuid=no])\nAM_CONDITIONAL([HAVE_LIBUUID], [test x$have_uuid = xyes])\n\ndnl older version of libuuid (from e2fsprogs) require including uuid/uuid.h\nsaved_CFLAGS=${CFLAGS}\nCFLAGS=\"${CFLAGS} ${UUID_CFLAGS}\"\nAC_CHECK_HEADER([uuid.h], [], [AC_CHECK_HEADER([uuid/uuid.h])],\n                [[#if HAVE_UUID_H\n                  #include <uuid.h>\n                  #endif\n                ]])\nCFLAGS=${saved_CFLAGS}\nif test \"x$ac_cv_header_uuid_uuid_h\" = \"xyes\"; then\n    UUID_CFLAGS=\"${UUID_CFLAGS} -I$(pkg-config --variable=includedir uuid)/uuid\"\n    have_uuid=yes\nfi\n\nif test \"x$have_uuid\" != \"xyes\"; then\n    case $host_os in\n        *freebsd*)\n            AC_MSG_ERROR([e2fsprogs-libuuid is required to build glusterfs])\n            ;;\n        linux*)\n            AC_MSG_ERROR([libuuid is required to build glusterfs])\n            ;;\n        *)\n            AC_MSG_ERROR([a Linux compatible libuuid is required to build glusterfs])\n            ;;\n    esac\nfi\n\ndnl libglusterfs needs uuid.h, practically everything depends on it\nGF_CFLAGS=\"${GF_CFLAGS} ${UUID_CFLAGS}\"\ndnl PKGCONFIG_UUID is used for the dependency in *.pc.in files\nAC_SUBST(PKGCONFIG_UUID)\n\ndnl Check for xxhash library.\nPKG_CHECK_MODULES([XXHASH], [libxxhash],\n  [have_libxxhash=yes\n   AC_DEFINE(HAVE_LIBXXHASH, 1, [Define to 1 if you have libxxhash.so.])],\n  [have_libxxhash=no])\nAM_CONDITIONAL([HAVE_LIBXXHASH], [test x$have_libxxhash = xyes])\n\ndnl Note xxhsum binary is required to run gfid2path tests.\nif test \"x$have_libxxhash\" = \"xyes\"; then\n    AC_CHECK_PROG([XXHSUM], [xxhsum], [yes], [no])\n    if test \"x$XXHSUM\" = \"xno\"; then\n        AC_MSG_WARN([install 'xxhsum' binary if you plan to run the tests.])\n    fi\n    GF_CFLAGS=\"${GF_CFLAGS} ${XXHASH_CFLAGS}\"\nfi\n\ndnl NetBSD does not support POSIX ACLs :-(\ncase $host_os in\n     *netbsd* | darwin*)\n        AC_MSG_WARN([platform does not support POSIX ACLs... disabling them])\n        ACL_LIBS=''\n        USE_POSIX_ACLS='0'\n        BUILD_POSIX_ACLS='no'\n        ;;\n     *)\n        AC_CHECK_HEADERS([sys/acl.h], ,\n                         AC_MSG_ERROR([Support for POSIX ACLs is required]))\n        USE_POSIX_ACLS='1'\n        BUILD_POSIX_ACLS='yes'\n        case $host_os in\n             linux*)\n                ACL_LIBS='-lacl'\n                ;;\n             solaris*)\n                ACL_LIBS='-lsec'\n                ;;\n             *freebsd*)\n                ACL_LIBS='-lc'\n                ;;\n             darwin*)\n                ACL_LIBS='-lc'\n                ;;\n        esac\n        if test \"x${ACL_LIBS}\" = \"x-lacl\"; then\n          AC_CHECK_HEADERS([acl/libacl.h], , AC_MSG_ERROR([libacl is required for building on ${host_os}]))\n        fi\n        ;;\nesac\nAC_SUBST(ACL_LIBS)\nAC_SUBST(USE_POSIX_ACLS)\n\n# libglusterfs/checksum\nAC_CHECK_HEADERS([openssl/md5.h])\n\n# Zlib is used by libglusterfs checksum and cdc xlator.\nPKG_CHECK_MODULES([ZLIB], [zlib >= 1.2.0], [have_zlib=yes], [have_zlib=no])\nif test x$have_zlib = xyes; then\n   AC_DEFINE(HAVE_ZLIB, 1, [Define if zlib is found.])\n   AC_SUBST([ZLIB_CFLAGS])\n   AC_SUBST([ZLIB_LIBS])\nelse\n   AC_MSG_ERROR([zlib is required to build glusterfs])\nfi\n\nAC_CHECK_HEADERS([linux/falloc.h])\n\nAC_CHECK_HEADERS([linux/oom.h], AC_DEFINE(HAVE_LINUX_OOM_H, 1, [have linux/oom.h]))\n\ndnl some os may not have GNU defined strnlen function\nAC_CHECK_FUNC([strnlen], [have_strnlen=yes])\nif test \"x${have_strnlen}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_STRNLEN, 1, [define if found strnlen])\nfi\nAC_SUBST(HAVE_STRNLEN)\n\n\nAC_CHECK_FUNC([setfsuid], [have_setfsuid=yes])\nAC_CHECK_FUNC([setfsgid], [have_setfsgid=yes])\n\nif test \"x${have_setfsuid}\" = \"xyes\" -a \"x${have_setfsgid}\" = \"xyes\"; then\n  AC_DEFINE(HAVE_SET_FSID, 1, [define if found setfsuid setfsgid])\nfi\n\ndnl test umount2 function\nAC_CHECK_FUNC([umount2], [have_umount2=yes])\n\nif test \"x${have_umount2}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_UMOUNT2, 1, [define if found umount2])\nfi\n\ndnl Check Python Availability\nhave_python=no\ndnl if the user has not specified a python, pick one\nif test -z \"${PYTHON}\"; then\n  case $host_os in\n    freebsd*)\n      if test -x /usr/local/bin/python3; then\n        PYTHON=/usr/local/bin/python3\n      else\n        PYTHON=/usr/local/bin/python2\n      fi\n      ;;\n    *)\n      if test -x /usr/bin/python3; then\n        PYTHON=/usr/bin/python3\n      else\n        PYTHON=/usr/bin/python2\n      fi\n      ;;\n  esac\nfi\nAM_PATH_PYTHON([2.6],,[:])\nif test -n \"${PYTHON}\"; then\n   have_python=yes\nfi\nAM_CONDITIONAL(HAVE_PYTHON, test \"x$have_python\" = \"xyes\")\n\ndnl Use pkg-config to get runtime search path missing from ${PYTHON}-config\ndnl Just do \"true\" on failure so that configure does not bail out\ndnl Note: python 2.6's devel pkg (e.g. in CentOS/RHEL 6) does not have\ndnl pkg-config files, so this work-around instead\nif test \"x${PYTHON_VERSION}\" = \"x2.6\"; then\n  PYTHON_CFLAGS=$(python-config --includes)\n  PYTHON_LIBS=$(python-config --libs)\nelse\n  PKG_CHECK_MODULES([PYTHON], \"python-${PYTHON_VERSION}\",,true)\nfi\n\nPYTHON_CFLAGS=$(echo ${PYTHON_CFLAGS} | sed -e 's|-I|-isystem |')\n\nBUILD_PYTHON_SITE_PACKAGES=${pythondir}\nAC_SUBST(BUILD_PYTHON_SITE_PACKAGES)\n\n# Eval two times to expand fully. First eval replaces $exec_prefix into $prefix\n# Second eval will expand $prefix\nbuild_python_site_packages_temp=\"${pythondir}\"\neval build_python_site_packages_temp=\\\"${build_python_site_packages_temp}\\\"\neval build_python_site_packages_temp=\\\"${build_python_site_packages_temp}\\\"\nBUILD_PYTHON_SITE_PACKAGES_EXPANDED=${build_python_site_packages_temp}\nAC_SUBST(BUILD_PYTHON_SITE_PACKAGES_EXPANDED)\n\n# FUSE section\nAC_ARG_ENABLE([fuse-client],\n              AS_HELP_STRING([--disable-fuse-client],[Do not build the fuse client. NOTE: you cannot mount glusterfs without the client]))\n\nBUILD_FUSE_CLIENT=no\nif test \"x$enable_fuse_client\" != \"xno\"; then\n   FUSE_CLIENT_SUBDIR=fuse\n   BUILD_FUSE_CLIENT=\"yes\"\nfi\n\nAC_SUBST(FUSE_CLIENT_SUBDIR)\n\nAC_ARG_ENABLE([fuse-notifications],\n  AS_HELP_STRING([--disable-fuse-notifications], [Disable FUSE notifications]))\n\nAS_IF([test \"x$enable_fuse_notifications\" != \"xno\"], [\n  AC_DEFINE([HAVE_FUSE_NOTIFICATIONS], [1], [Use FUSE notifications])\n])\n\n# end FUSE section\n\ndnl Find out OpenSSL trusted certificates path\nAC_MSG_CHECKING([for OpenSSL trusted certificates path])\nSSL_CERT_PATH=$(openssl version -d | sed -e 's|OPENSSLDIR: \"\\(.*\\)\".*|\\1|')\nif test -d \"${SSL_CERT_PATH}\" 1>/dev/null 2>&1; then\n   AC_MSG_RESULT([$SSL_CERT_PATH])\n   AC_DEFINE_UNQUOTED(SSL_CERT_PATH, [\"$SSL_CERT_PATH\"], [Path to OpenSSL trusted certificates.])\n   AC_SUBST(SSL_CERT_PATH)\nelse\n   AC_MSG_ERROR([Unable to detect path to OpenSSL trusted certificates])\nfi\n\nAC_CHECK_LIB([ssl], TLS_method, [HAVE_OPENSSL_1_1=\"yes\"], [HAVE_OPENSSL_1_1=\"no\"])\nif test \"x$HAVE_OPENSSL_1_1\" = \"xyes\"; then\n    AC_DEFINE([HAVE_TLS_METHOD], [1], [Using OpenSSL-1.1 TLS_method])\nelse\n    AC_CHECK_LIB([ssl], TLSv1_2_method, [AC_DEFINE([HAVE_TLSV1_2_METHOD], [1], [Using OpenSSL-1.0 TLSv1_2_method])])\nfi\n\n\n# FUSERMOUNT section\nAC_ARG_ENABLE([fusermount],\n              AS_HELP_STRING([--disable-fusermount],[Use system's fusermount]))\n\nBUILD_FUSERMOUNT=\"yes\"\nif test \"x$enable_fusermount\" = \"xno\"; then\n   BUILD_FUSERMOUNT=\"no\"\nelse\n   AC_DEFINE(GF_FUSERMOUNT, 1, [Use our own fusermount])\n   FUSERMOUNT_SUBDIR=\"contrib/fuse-util\"\nfi\n\nAC_SUBST(FUSERMOUNT_SUBDIR)\n#end FUSERMOUNT section\n\n# EPOLL section\nAC_ARG_ENABLE([epoll],\n              AS_HELP_STRING([--disable-epoll],[Use poll instead of epoll.]))\n\nBUILD_EPOLL=no\nif test \"x$enable_epoll\" != \"xno\"; then\n   AC_CHECK_HEADERS([sys/epoll.h],\n                    [BUILD_EPOLL=yes],\n                    [BUILD_EPOLL=no])\nfi\n# end EPOLL section\n\n# SYNCDAEMON section\nAC_ARG_ENABLE([georeplication],\n              AS_HELP_STRING([--disable-georeplication],[Do not install georeplication components]))\n\nBUILD_SYNCDAEMON=no\ncase $host_os in\n     freebsd*)\n#do nothing\n       ;;\n     linux*)\n#do nothing\n       ;;\n     netbsd*)\n#do nothing\n       ;;\n     *)\n#disabling geo replication for non-linux platforms\n        enable_georeplication=no\n        ;;\nesac\nSYNCDAEMON_COMPILE=0\nif test \"x${with_server}\" = \"xyes\" -a \"x${enable_georeplication}\" != \"xno\"; then\n  if test \"x${have_python}\" = \"xno\" ; then\n    AC_MSG_ERROR([only python 2 and 3 are supported])\n  else\n    SYNCDAEMON_SUBDIR=geo-replication\n    SYNCDAEMON_COMPILE=1\n\n    BUILD_SYNCDAEMON=\"yes\"\n    AC_MSG_CHECKING([if python has ctypes support...])\n    if \"${PYTHON}\" -c 'import ctypes' 2>/dev/null; then\n      AC_MSG_RESULT(\"yes\")\n    else\n      AC_MSG_ERROR([python does not have ctypes support])\n    fi\n  fi\nfi\nAC_SUBST(SYNCDAEMON_COMPILE)\nAC_SUBST(SYNCDAEMON_SUBDIR)\n# end SYNCDAEMON section\n\n# only install scripts from extras/geo-rep when enabled\nif test \"x${with_server}\" = \"xyes\" -a \"x$enable_georeplication\" != \"xno\"; then\n  GEOREP_EXTRAS_SUBDIR=geo-rep\nfi\nAC_SUBST(GEOREP_EXTRAS_SUBDIR)\nAM_CONDITIONAL(USE_GEOREP, test \"x$enable_georeplication\" != \"xno\")\n\n# METADISP section\nAC_ARG_ENABLE([metadisp],\n              AS_HELP_STRING([--enable-metadisp],[Enable the metadata dispersal xlator]))\nBUILD_METADISP=no\nif test \"x${enable_metadisp}\" = \"xyes\"; then\n  BUILD_METADISP=yes\nfi\nAM_CONDITIONAL([BUILD_METADISP], [test \"x$BUILD_METADISP\" = \"xyes\"])\n# end METADISP section\n\n# Events section\nAC_ARG_ENABLE([events],\n              AS_HELP_STRING([--disable-events],[Do not install Events components]))\n\nBUILD_EVENTS=no\nEVENTS_ENABLED=0\nEVENTS_SUBDIR=\nif test \"x$enable_events\" != \"xno\"; then\n  EVENTS_SUBDIR=events\n  EVENTS_ENABLED=1\n\n  BUILD_EVENTS=\"yes\"\n\n  if test \"x${have_python}\" = \"xno\"; then\n     if test \"x${enable_events}\" = \"xyes\"; then\n        AC_MSG_ERROR([python 2 or 3 required. exiting.])\n     fi\n     AC_MSG_WARN([python not found, disabling events])\n     EVENTS_SUBDIR=\n     EVENTS_ENABLED=0\n     BUILD_EVENTS=\"no\"\n  else\n    AC_DEFINE(USE_EVENTS, 1, [define if events enabled])\n  fi\nfi\nAC_SUBST(EVENTS_ENABLED)\nAC_SUBST(EVENTS_SUBDIR)\nAM_CONDITIONAL([BUILD_EVENTS], [test \"x${BUILD_EVENTS}\" = \"xyes\"])\n# end Events section\n\n#start firewalld section\nBUILD_FIREWALLD=\"no\"\nAC_ARG_ENABLE([firewalld],\n              AS_HELP_STRING([--enable-firewalld],[enable installation configuration for firewalld]),\n              [BUILD_FIREWALLD=\"${enableval}\"], [BUILD_FIREWALLD=\"no\"])\n\nif test \"x${with_server}\" = \"xyes\" -a \"x${BUILD_FIREWALLD}\" = \"xyes\"; then\n        if !(test -d /usr/lib/firewalld/services 1>/dev/null 2>&1) ; then\n                BUILD_FIREWALLD=\"no (firewalld not installed)\"\n        fi\nfi\nAM_CONDITIONAL([USE_FIREWALLD],test [\"x${BUILD_FIREWALLD}\" =  \"xyes\"])\n\n#endof firewald section\n\n# xml-output\nAC_ARG_ENABLE([xml-output],\n              AS_HELP_STRING([--disable-xml-output],[Disable the xml output]))\nBUILD_XML_OUTPUT=\"yes\"\nif test \"x$enable_xml_output\" != \"xno\"; then\n    PKG_CHECK_MODULES([XML], [libxml-2.0], [], [no_xml=\"yes\"])\n    if test \"x${no_xml}\" = \"x\"; then\n        AC_DEFINE([HAVE_LIB_XML], [1], [Define to 1 if using libxml2.])\n    else\n        if test \"x$enable_georeplication\" != \"xno\"; then\n           AC_MSG_ERROR([libxml2 devel libraries not found])\n        else\n           AC_MSG_WARN([libxml2 devel libraries not found disabling XML support])\n           BUILD_XML_OUTPUT=\"no\"\n        fi\n\n    fi\nelse\n    if test \"x$enable_georeplication\" != \"xno\"; then\n       AC_MSG_ERROR([geo-replication requires xml output])\n    fi\n    BUILD_XML_OUTPUT=\"no\"\nfi\n# end of xml-output\n\ndnl cloudsync section\nBUILD_CLOUDSYNC=\"no\"\nAC_CHECK_LIB([curl], [curl_easy_setopt], [LIBCURL=\"-lcurl\"])\nif test -n \"$LIBCURL\";then\n        HAVE_LIBCURL=\"yes\"\nfi\nAC_CHECK_HEADERS([openssl/hmac.h openssl/evp.h openssl/bio.h openssl/buffer.h], [HAVE_OPENSSL=\"yes\"])\nif test \"x$HAVE_LIBCURL\" = \"xyes\" -a \"x$HAVE_OPENSSL\" = \"xyes\";then\n   HAVE_AMAZONS3=\"yes\"\nfi\nAM_CONDITIONAL([BUILD_AMAZONS3_PLUGIN], [test \"x$HAVE_AMAZONS3\" = \"xyes\"])\nif test \"x$HAVE_AMAZONS3\" = \"xyes\";then\n   BUILD_CLOUDSYNC=\"yes\"\nfi\nBUILD_CVLT_PLUGIN=\"no\"\ncase $host_os in\n#enable cvlt plugin only for linux platforms\n     linux*)\n       BUILD_CVLT_PLUGIN=\"yes\"\n       BUILD_CLOUDSYNC=\"yes\"\n       ;;\n     *)\n       ;;\nesac\nAM_CONDITIONAL([BUILD_CVLT_PLUGIN], [test \"x$BUILD_CVLT_PLUGIN\" = \"xyes\"])\nAM_CONDITIONAL([BUILD_CLOUDSYNC], [test \"x$BUILD_CLOUDSYNC\" = \"xyes\"])\ndnl end cloudsync section\n\ndnl SELinux feature enablement\ncase $host_os in\n  linux*)\n    AC_ARG_ENABLE([selinux],\n                  AS_HELP_STRING([--disable-selinux],[Disable SELinux features]),\n                  [USE_SELINUX=\"${enableval}\"], [USE_SELINUX=\"yes\"])\n    ;;\n  *)\n    USE_SELINUX=no\n    ;;\nesac\nAM_CONDITIONAL(USE_SELINUX, test \"x${USE_SELINUX}\" = \"xyes\")\ndnl end of SELinux feature enablement\n\nAC_CHECK_HEADERS([execinfo.h], [have_backtrace=yes])\nif test \"x${have_backtrace}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_BACKTRACE, 1, [define if found backtrace])\nfi\nAC_SUBST(HAVE_BACKTRACE)\nAM_CONDITIONAL([HAVE_BACKTRACE], [test x$have_backtrace = xyes])\n\ndnl Old (before C11) compiler can compile (but not link) this:\ndnl\ndnl int main () {\ndnl     _Static_assert(1, \"True\");\ndnl     return 0;\ndnl }\ndnl\ndnl assuming that _Static_assert is an implicitly declared function. So\ndnl we're trying to link just to make sure that this is not the case.\n\nAC_MSG_CHECKING([whether $CC supports C11 _Static_assert])\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[]], [[_Static_assert(1, \"True\");]])],[STATIC_ASSERT=yes],[STATIC_ASSERT=no])\n\nAC_MSG_RESULT([$STATIC_ASSERT])\nif test x$STATIC_ASSERT = \"xyes\"; then\n   AC_DEFINE(HAVE_STATIC_ASSERT, 1, [Define if C11 _Static_assert is supported.])\nfi\n\nif test \"x${have_backtrace}\" != \"xyes\"; then\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <math.h>]], [[double x=0.0; x=ceil(0.0);]])],[],[AC_MSG_ERROR(need math library for libexecinfo)])\nfi\n\ndnl glusterfs prints memory usage to stderr by sending it SIGUSR1\ndnl try mallinfo2 first, fallback to mallinfo if not available\nAC_CHECK_FUNC([mallinfo2], [have_mallinfo2=yes])\nif test \"x${have_mallinfo2}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_MALLINFO2, 1, [define if found mallinfo2])\nelse\n   AC_CHECK_FUNC([mallinfo], [have_mallinfo=yes])\n   if test \"x${have_mallinfo}\" = \"xyes\"; then\n      AC_DEFINE(HAVE_MALLINFO, 1, [define if found mallinfo])\n   fi\nfi\nAC_SUBST(HAVE_MALLINFO2)\nAC_SUBST(HAVE_MALLINFO)\n\ndnl Linux, Solaris, Cygwin\nAC_CHECK_MEMBERS([struct stat.st_atim.tv_nsec])\ndnl FreeBSD, NetBSD\nAC_CHECK_MEMBERS([struct stat.st_atimespec.tv_nsec])\ncase $host_os in\n        *netbsd*)\n        GF_CFLAGS=\"${GF_CFLAGS} -D_INCOMPLETE_XOPEN_C063 -DCONFIG_MACHINE_BSWAP_H\"\n        ;;\nesac\nAC_CHECK_FUNC([linkat], [have_linkat=yes])\nif test \"x${have_linkat}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_LINKAT, 1, [define if found linkat])\nfi\nAC_SUBST(HAVE_LINKAT)\n\ndnl prefer futimens for nanosecond resolution\nAC_CHECK_FUNC([futimens], [have_futimens=yes])\nif test \"x${have_futimens}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_FUTIMENS, 1, [define if found futimens])\nelse\n   AC_CHECK_FUNC([futimes], [have_futimes=yes])\n   if test \"x${have_futimes}\" = \"xyes\"; then\n      AC_DEFINE(HAVE_FUTIMES, 1, [define if found futimes])\n   else\n      AC_MSG_ERROR([This system doesn't support neither futimens() nor futimes()])\n   fi\nfi\nAC_SUBST(HAVE_FUTIMENS)\nAC_SUBST(HAVE_FUTIMES)\n\ndnl check for Monotonic clock\nAC_CHECK_LIB([rt], [clock_gettime], ,\n             AC_MSG_WARN([System doesn't have monotonic clock using contrib]))\n\ndnl check for argp, FreeBSD has the header in /usr/local/include\ncase $host_os in\n    *freebsd*)\n    CFLAGS=\"${CFLAGS} -isystem /usr/local/include\"\n    ARGP_LDADD=-largp\n    ;;\n    *netbsd*)\n    ARGP_LDADD=-largp\n    ;;\nesac\ndnl argp-standalone does not provide a pkg-config file\nAC_CHECK_HEADER([argp.h], AC_DEFINE(HAVE_ARGP, 1, [have argp]))\nif test \"x$ac_cv_header_argp_h\" != \"xyes\"; then\n    AC_MSG_ERROR([argp.h not found, install libargp or argp-standalone])\nfi\nAC_SUBST(ARGP_LDADD)\n\ndnl Check for atomic operation support\nAC_MSG_CHECKING([for gcc __atomic builtins])\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[]], [[int v; __atomic_load_n(&v, __ATOMIC_ACQUIRE);]])],[have_atomic_builtins=yes],[have_atomic_builtins=no])\nif test \"x${have_atomic_builtins}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_ATOMIC_BUILTINS, 1, [define if __atomic_*() builtins are available])\nfi\nAC_SUBST(HAVE_ATOMIC_BUILTINS)\nAC_MSG_RESULT([$have_atomic_builtins])\n\ndnl __sync_*() will not be needed if __atomic_*() is available\nAC_MSG_CHECKING([for gcc __sync builtins])\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[]], [[__sync_synchronize();]])],[have_sync_builtins=yes],[have_sync_builtins=no])\nif test \"x${have_sync_builtins}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_SYNC_BUILTINS, 1, [define if __sync_*() builtins are available])\nfi\nAC_SUBST(HAVE_SYNC_BUILTINS)\nAC_MSG_RESULT([$have_sync_builtins])\n\nAC_CHECK_HEADER([malloc.h], AC_DEFINE(HAVE_MALLOC_H, 1, [have malloc.h]))\n\nAC_CHECK_FUNC([llistxattr], [have_llistxattr=yes])\nif test \"x${have_llistxattr}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_LLISTXATTR, 1, [define if llistxattr exists])\nfi\n\nAC_CHECK_FUNC([fdatasync], [have_fdatasync=no])\nif test \"x${have_fdatasync}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_FDATASYNC, 1, [define if fdatasync exists])\nfi\n\nAC_CHECK_FUNC([fallocate], [have_fallocate=yes])\nif test \"x${have_fallocate}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_FALLOCATE, 1, [define if fallocate exists])\nfi\n\nAC_CHECK_FUNC([posix_fallocate], [have_posix_fallocate=yes])\nif test \"x${have_posix_fallocate}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_POSIX_FALLOCATE, 1, [define if posix_fallocate exists])\nfi\n\n# On fedora-29, copy_file_range syscall and the libc API both are present.\n# Whereas, on some machines such as centos-7, RHEL-7, the API is not there.\n# Only the system call is present. So, this change is to determine whether\n# the API is present or not. If not, then check whether the system call is\n# present or not. Accordingly sys_copy_file_range function will first call\n# the API if it is there. Otherwise it will call syscall(SYS_copy_file_range).\nAC_CHECK_FUNC([copy_file_range], [have_copy_file_range=yes])\nif test \"x${have_copy_file_range}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_COPY_FILE_RANGE, 1, [define if copy_file_range exists])\nelse\n   OLD_CFLAGS=${CFLAGS}\n   CFLAGS=\"-D_GNU_SOURCE\"\n   AC_CHECK_DECL([SYS_copy_file_range], , , [#include <sys/syscall.h>])\n   if test \"x${ac_cv_have_decl_SYS_copy_file_range}\" = \"xyes\"; then\n      AC_DEFINE(HAVE_COPY_FILE_RANGE_SYS, 1, [define if SYS_copy_file_range is available])\n   fi\n   CFLAGS=${OLD_CFLAGS}\nfi\n\nAC_CHECK_FUNC([syncfs], [have_syncfs=yes])\nif test \"x${have_syncfs}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_SYNCFS, 1, [define if syncfs exists])\nelse\n   OLD_CFLAGS=${CFLAGS}\n   CFLAGS=\"-D_GNU_SOURCE\"\n   AC_CHECK_DECL([SYS_syncfs], , , [#include <sys/syscall.h>])\n   if test \"x${ac_cv_have_decl_SYS_syncfs}\" = \"xyes\"; then\n      AC_DEFINE(HAVE_SYNCFS_SYS, 1, [define if SYS_syncfs is available])\n   fi\n   CFLAGS=${OLD_CFLAGS}\nfi\n\nBUILD_NANOSECOND_TIMESTAMPS=no\nAC_CHECK_FUNC([utimensat], [have_utimensat=yes])\nif test \"x${have_utimensat}\" = \"xyes\"; then\n   BUILD_NANOSECOND_TIMESTAMPS=yes\n   AC_DEFINE(HAVE_UTIMENSAT, 1, [define if utimensat exists])\nfi\n\nOLD_CFLAGS=${CFLAGS}\nCFLAGS=\"-D_GNU_SOURCE\"\nAC_CHECK_DECL([SEEK_HOLE], , , [#include <unistd.h>])\nif test \"x${ac_cv_have_decl_SEEK_HOLE}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_SEEK_HOLE, 1, [define if SEEK_HOLE is available])\nfi\nCFLAGS=${OLD_CFLAGS}\n\nAC_CHECK_FUNC([accept4], [have_accept4=yes])\nif test \"x${have_accept4}\" = \"xyes\"; then\n   AC_DEFINE(HAVE_ACCEPT4, 1, [define if accept4 exists])\nfi\n\nAC_CHECK_FUNC([paccept], [have_paccept=yes])\nif test \"x${have_paccept}\" = \"xyes\"; then\nAC_DEFINE(HAVE_PACCEPT, 1, [define if paccept exists])\nfi\n\nAC_CHECK_FUNC([pipe2], [have_pipe2=yes])\nif test \"x${have_pipe2}\" = \"xyes\"; then\nAC_DEFINE(HAVE_PIPE2, 1, [Define if (Linux-specific) pipe2() exists.])\nfi\n\ndnl Looking for OS-dependent non-POSIX function to set thread name.\n\nPTHREAD_SETNAME_FOUND=no\n\ndnl Linux-like version assuming glibc (so _GNU_SOURCE).\nif test x$PTHREAD_SETNAME_FOUND = xno; then\n   AC_MSG_CHECKING([for pthread_setname_np(thread, name)])\n   saved_CFLAGS=${CFLAGS}\n   CFLAGS=\"-D_GNU_SOURCE -pthread ${saved_CFLAGS}\"\n   AC_LINK_IFELSE(\n      [AC_LANG_PROGRAM([\n         [#include <pthread.h>]],\n         [[pthread_t t; pthread_setname_np(t, \"name\");]])],\n         [pthread_setname_np_two_args=yes], [pthread_setname_np_two_args=no])\n   AC_MSG_RESULT([$pthread_setname_np_two_args])\n   CFLAGS=\"$saved_CFLAGS\"\n\n   if test x$pthread_setname_np_two_args = xyes; then\n      AC_DEFINE(HAVE_PTHREAD_SETNAME_NP_TWO_ARGS, 1,\n                [Define if 'pthread_setname_np(thread, name)' is present.])\n      PTHREAD_SETNAME_FOUND=yes\n   fi\nfi\n\ndnl NetBSD-like version with three arguments.\nif test x$PTHREAD_SETNAME_FOUND = xno; then\n   AC_MSG_CHECKING([for pthread_setname_np(thread, name, arg)])\n   saved_CFLAGS=${CFLAGS}\n   CFLAGS=\"-pthread ${saved_CFLAGS}\"\n   AC_LINK_IFELSE(\n      [AC_LANG_PROGRAM([\n         [#include <pthread.h>]],\n         [[pthread_t t; pthread_setname_np(t, \"name\", NULL);]])],\n         [pthread_setname_np_three_args=yes], [pthread_setname_np_three_args=no])\n   AC_MSG_RESULT([$pthread_setname_np_three_args])\n   CFLAGS=\"$saved_CFLAGS\"\n\n   if test x$pthread_setname_np_three_args = xyes; then\n      AC_DEFINE(HAVE_PTHREAD_SETNAME_NP_THREE_ARGS, 1,\n                [Define if 'pthread_setname_np(thread, name, arg)' is present.])\n      PTHREAD_SETNAME_FOUND=yes\n   fi\nfi\n\ndnl FreeBSD provides pthread_np.h header file and both (not sure\ndnl for versions older than 13.0) 'pthread_setname_np(thread, name)'\ndnl and 'pthread_set_name_np(thread, name)'.\n\nif test x$PTHREAD_SETNAME_FOUND = xno; then\n   AC_MSG_CHECKING([for pthread_set_name_np(thread, name)])\n   saved_CFLAGS=${CFLAGS}\n   CFLAGS=\"-pthread ${saved_CFLAGS}\"\n   AC_LINK_IFELSE(\n      [AC_LANG_PROGRAM([\n         [#include <pthread_np.h>]],\n         [[pthread_t t; pthread_set_name_np(t, \"name\");]])],\n         [pthread_set_name_np=yes], [pthread_set_name_np=no])\n   AC_MSG_RESULT([$pthread_set_name_np])\n   CFLAGS=\"$saved_CFLAGS\"\n\n   if test x$pthread_set_name_np = xyes; then\n      AC_DEFINE(HAVE_PTHREAD_SET_NAME_NP, 1,\n                [Define if 'pthread_set_name_np(thread, name)' is present.])\n      PTHREAD_SETNAME_FOUND=yes\n   fi\nfi\n\nif test x$PTHREAD_SETNAME_FOUND = xno; then\n   AC_MSG_WARN([Unable to detect function to set thread name])\nfi\n\n# Check the distribution where you are compiling glusterfs on.\n# For cross-compiling, you're advised to specify it manually.\n\nGF_DISTRIBUTION=\n\nif test x$cross_compiling != xyes; then\n    AC_CHECK_FILE([/etc/debian_version])\n    AC_CHECK_FILE([/etc/SuSE-release])\n    AC_CHECK_FILE([/etc/redhat-release])\n\n    if test \"x$ac_cv_file__etc_debian_version\" = \"xyes\"; then\n        GF_DISTRIBUTION=Debian\n    fi\n    if test \"x$ac_cv_file__etc_SuSE_release\" = \"xyes\"; then\n        GF_DISTRIBUTION=SuSE\n    fi\n    if test \"x$ac_cv_file__etc_redhat_release\" = \"xyes\"; then\n        GF_DISTRIBUTION=Redhat\n    fi\nelse\n    GF_DISTRIBUTION=Unspecified\nfi\n\nAC_SUBST(GF_DISTRIBUTION)\n\nGF_HOST_OS=\"\"\nGF_LDFLAGS=\"${GF_LDFLAGS} -rdynamic\"\n\ndnl see --with-libtirpc option check above, libtirpc(-devel) is required for\ndnl ipv6-default\nif test \"x${with_libtirpc}\" = \"xyes\" || test \"x${with_ipv6_default}\" = \"xyes\" ; then\n    PKG_CHECK_MODULES([TIRPC], [libtirpc],\n       [with_libtirpc=\"yes\"; GF_CFLAGS=\"$GF_CFLAGS $TIRPC_CFLAGS\"; GF_LDFLAGS=\"$GF_LDFLAGS $TIRPC_LIBS\";],\n       [with_libtirpc=\"missing\"; with_ipv6_default=\"no\"])\nfi\n\nif test \"x${with_libtirpc}\" = \"xyes\" ; then\n    AC_DEFINE(HAVE_LIBTIRPC, 1, [Using libtirpc])\nfi\n\nif test \"x${with_libtirpc}\" = \"xmissing\" ; then\n    AC_CHECK_HEADERS([rpc/rpc.h],[\n        AC_MSG_WARN([\n            ---------------------------------------------------------------------------------\n            libtirpc (and/or ipv6-default) were enabled but libtirpc-devel is not installed.\n            Disabling libtirpc and ipv6-default and falling back to legacy glibc rpc headers.\n            This is a transitional warning message. Eventually it will be an error message.\n            ---------------------------------------------------------------------------------])],[\n        AC_MSG_ERROR([\n            ---------------------------------------------------------------------------------\n            libtirpc (and/or ipv6-default) were enabled but libtirpc-devel is not installed\n            and there were no legacy glibc rpc headers and library to fall back to.\n            ---------------------------------------------------------------------------------])])\nfi\n\nif test \"x$with_ipv6_default\" = \"xyes\" ; then\n   GF_CFLAGS=\"$GF_CFLAGS -DIPV6_DEFAULT\"\nfi\n\nUSE_BRICKMUX=\"no\"\nif test \"x$enable_brickmux\" = \"xyes\" ; then\n   USE_BRICKMUX=\"yes\"\n   AC_DEFINE(GF_ENABLE_BRICKMUX, 1, [Enable Brick Mux.])\nfi\n\ndnl check for gcc -Werror=format-security\nsaved_CFLAGS=$CFLAGS\nCFLAGS=\"-Wformat -Werror=format-security\"\nAC_MSG_CHECKING([whether $CC accepts -Werror=format-security])\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM()], [cc_werror_format_security=yes], [cc_werror_format_security=no])\necho $cc_werror_format_security\nif test \"x$cc_werror_format_security\" = \"xyes\"; then\n    GF_CFLAGS=\"$GF_CFLAGS ${CFLAGS}\"\nfi\nCFLAGS=\"$saved_CFLAGS\"\n\ndnl check for gcc -Werror=implicit-function-declaration\nsaved_CFLAGS=$CFLAGS\nCFLAGS=\"-Werror=implicit-function-declaration\"\nAC_MSG_CHECKING([whether $CC accepts -Werror=implicit-function-declaration])\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM()], [cc_werror_implicit=yes], [cc_werror_implicit=no])\necho $cc_werror_implicit\nif test \"x$cc_werror_implicit\" = \"xyes\"; then\n    GF_CFLAGS=\"${GF_CFLAGS} ${CFLAGS}\"\nfi\nCFLAGS=\"$saved_CFLAGS\"\n\ndnl clang is mostly GCC-compatible, but its version is much lower,\ndnl so we have to check for it.\nAC_MSG_CHECKING([if compiling with clang])\n\nAC_COMPILE_IFELSE(\n[AC_LANG_PROGRAM([], [[\n#ifndef __clang__\n       not clang\n#endif\n]])],\n[CLANG=yes], [CLANG=no])\n\nAC_MSG_RESULT([$CLANG])\n\nif test \"x$CLANG\" = \"xyes\"; then\n   GF_CFLAGS=\"${GF_CFLAGS} -Wno-gnu\"\nfi\n\nif test \"x$ac_cv_header_execinfo_h\" = \"xno\"; then\n   # The reason is that __builtin_frame_address(n) for n > 0 seems\n   # to just crash on most platforms when -fomit-stack-pointer is\n   # specified, which seems to be the default for many platforms on\n   # -O2. The documentation says that __builtin_frame_address()\n   # should return NULL in case it can't get the frame, but it\n   # seems to crash instead.\n\n   # execinfo.c in ./contrib/libexecinfo uses __builtin_frame_address(n)\n   # for providing cross platform backtrace*() functions.\n   if test \"x$CLANG\" = \"xno\"; then\n      GF_CFLAGS=\"${GF_CFLAGS} -fno-omit-frame-pointer\"\n   fi\nfi\n\nold_prefix=$prefix\nif test \"x$prefix\" = xNONE; then\n        prefix=$ac_default_prefix\nfi\nold_exec_prefix=$exec_prefix\nif test \"x$exec_prefix\" = xNONE; then\n        exec_prefix=\"$(eval echo $prefix)\"\nfi\nGLUSTERFS_LIBEXECDIR=\"$(eval echo $libexecdir)/glusterfs\"\nprefix=$old_prefix\nexec_prefix=$old_exec_prefix\n\n### Dirty hacky stuff to make LOCALSTATEDIR work\nif test \"x$prefix\" = xNONE; then\n   test \"${localstatedir}\" = '${prefix}/var' && localstatedir=$ac_default_prefix/var\n   localstatedir=/var\nfi\nlocalstatedir=\"$(eval echo ${localstatedir})\"\nLOCALSTATEDIR=$localstatedir\n\nGLUSTERFSD_MISCDIR=\"$(eval echo ${localstatedir})/lib/misc/glusterfsd\"\n\nold_prefix=$prefix\nif test \"x$prefix\" = xNONE; then\n    prefix=$ac_default_prefix\nfi\nGLUSTERD_VOLFILE=\"$(eval echo ${sysconfdir})/glusterfs/glusterd.vol\"\nprefix=$old_prefix\n\n\nGFAPI_EXTRA_LDFLAGS='-Wl,--version-script=$(top_srcdir)/api/src/gfapi.map'\ncase $host_os in\n     linux*)\n        GF_HOST_OS=\"GF_LINUX_HOST_OS\"\n        GF_FUSE_CFLAGS=\"-DFUSERMOUNT_DIR=\\\\\\\"\\$(bindir)\\\\\\\"\"\n        GLUSTERD_WORKDIR=\"${LOCALSTATEDIR}/lib/glusterd\"\n        ;;\n     solaris*)\n        GF_HOST_OS=\"GF_SOLARIS_HOST_OS\"\n        GF_CFLAGS=\"${GF_CFLAGS} -D_REENTRANT -D_POSIX_PTHREAD_SEMANTICS -m64\"\n        BUILD_FUSE_CLIENT=no\n        FUSE_CLIENT_SUBDIR=\"\"\n        GLUSTERD_WORKDIR=\"${LOCALSTATEDIR}/lib/glusterd\"\n        ;;\n     *netbsd*)\n        GF_HOST_OS=\"GF_BSD_HOST_OS\"\n        GF_CFLAGS=\"${GF_CFLAGS} -D_INCOMPLETE_XOPEN_C063\"\n        GF_CFLAGS=\"${GF_CFLAGS} -DTHREAD_UNSAFE_BASENAME\"\n        GF_CFLAGS=\"${GF_CFLAGS} -DTHREAD_UNSAFE_DIRNAME\"\n        GF_FUSE_CFLAGS=\"-DFUSERMOUNT_DIR=\\\\\\\"\\$(sbindir)\\\\\\\"\"\n        GF_LDADD=\"${ARGP_LDADD}\"\n        if test \"x$ac_cv_header_execinfo_h\" = \"xyes\"; then\n           GF_LDFLAGS=\"${GF_LDFLAGS} -lexecinfo\"\n        fi\n        GF_FUSE_LDADD=\"-lperfuse\"\n        BUILD_FUSE_CLIENT=yes\n        LEXLIB=\"\"\n        BUILD_FUSERMOUNT=no\n        FUSERMOUNT_SUBDIR=\"\"\n        GLUSTERD_WORKDIR=\"${LOCALSTATEDIR}/db/glusterd\"\n        ;;\n     *freebsd*)\n        GF_HOST_OS=\"GF_BSD_HOST_OS\"\n        GF_CFLAGS=\"${GF_CFLAGS} -DO_DSYNC=0\"\n        GF_CFLAGS=\"${GF_CFLAGS} -Dxdr_quad_t=xdr_longlong_t\"\n        GF_CFLAGS=\"${GF_CFLAGS} -Dxdr_u_quad_t=xdr_u_longlong_t\"\n        GF_FUSE_CFLAGS=\"-DFUSERMOUNT_DIR=\\\\\\\"\\$(sbindir)\\\\\\\"\"\n        GF_LDADD=\"${ARGP_LDADD}\"\n        if test \"x$ac_cv_header_execinfo_h\" = \"xyes\"; then\n           GF_LDFLAGS=\"${GF_LDFLAGS} -lexecinfo\"\n        fi\n        BUILD_FUSE_CLIENT=yes\n        BUILD_FUSERMOUNT=no\n        FUSERMOUNT_SUBDIR=\"\"\n        GLUSTERD_WORKDIR=\"${LOCALSTATEDIR}/db/glusterd\"\n        ;;\n     darwin*)\n        GF_HOST_OS=\"GF_DARWIN_HOST_OS\"\n        LIBTOOL=glibtool\n        GF_CFLAGS=\"${GF_CFLAGS} -D_REENTRANT -D_XOPEN_SOURCE \"\n        GF_CFLAGS=\"${GF_CFLAGS} -D_DARWIN_USE_64_BIT_INODE \"\n        GF_CFLAGS=\"${GF_CFLAGS} -DTHREAD_UNSAFE_BASENAME\"\n        GF_CFLAGS=\"${GF_CFLAGS} -DTHREAD_UNSAFE_DIRNAME\"\n        GF_LDADD=\"${ARGP_LDADD}\"\n        GF_LDFLAGS=\"${GF_LDFLAGS}\"\n        GF_FUSE_CFLAGS=\"-I\\$(CONTRIBDIR)/macfuse\"\n        BUILD_FUSERMOUNT=\"no\"\n        FUSERMOUNT_SUBDIR=\"\"\n        GLUSTERD_WORKDIR=\"${LOCALSTATEDIR}/db/glusterd\"\n        GFAPI_EXTRA_LDFLAGS='-Wl,-alias_list,$(top_srcdir)/api/src/gfapi.aliases'\n        ;;\nesac\n\n# LTO section\nAC_ARG_ENABLE([lto],\n              AS_HELP_STRING([--disable-lto],[Disable buidling with LTO]))\n\nLTO_BUILD=no\nAS_IF([ test \"x$BUILD_DEBUG\" = \"xno\" && test \"x$enable_lto\" != \"xno\" ], [\n    CC_VER=`\"$CC\" -dumpversion 2>/dev/null | cut -f 1 -d '.'`\n    AS_IF([ test ! -z \"$CC_VER\" && test \"$CC_VER\" -ge \"10\" ], [\n        GF_CFLAGS=\"${GF_CFLAGS} -flto\"\n        GF_LDFLAGS=\"${GF_LDFLAGS} -flto\"\n        LTO_BUILD=yes\n        AC_MSG_NOTICE([building with LTO])],\n        [AC_MSG_NOTICE([not using LTO for gcc_ver=$CC_VER]) ])\n    ], [\n    AC_MSG_NOTICE([LTO is disabled])\n])\n\ndnl ------------------------------\ndnl Checking posix_spawn(3) sanity\ndnl ------------------------------\n\nAC_ARG_ENABLE(posix_spawn,\n              AS_HELP_STRING([--disable-posix_spawn],\n                             [Disable usage of posix_spawn when calling out]),\n              AC_MSG_CHECKING([if posix_spawn returns properly on failure])\n              [ case \"$enableval\" in\n                no)\n                     AC_MSG_RESULT(no)\n                     posix_spawn=no\n                     ;;\n                *)   AC_MSG_RESULT(yes)\n                    posix_spawn=yes\n                     ;;\n                esac ],\n              AC_MSG_CHECKING([if posix_spawn returns properly on failure])\n              AC_RUN_IFELSE([AC_LANG_SOURCE([[\n/*\n * Test posix_spawn(3) return value on failure,\n * adapted from and because of\n * https://sourceware.org/bugzilla/show_bug.cgi?id=18433\n */\n#include <stdio.h>\n#include <spawn.h>\n#include <errno.h>\n\nint main()\n{\n  extern char **environ;\n  char *argv[[]] = { \"3a7e588d3bdc4a069dbef540886ecf78\", 0 };\n  pid_t pid = -1;\n  int ret = ret = posix_spawn(&pid, argv[[0]], 0, 0, argv, environ);\n  return ret == ENOENT ? 0 : 1;\n}\n]])\n],\n    AC_MSG_RESULT(yes)\n    posix_spawn=yes,\n    AC_MSG_RESULT(no)\n    posix_spawn=no,\n    AC_MSG_RESULT(yes)\n    posix_spawn=yes\n))\nAM_CONDITIONAL([USE_POSIX_SPAWN], [test x$posix_spawn = xyes])\n\n# Default value for sbindir\nprefix_temp=$prefix\nexec_prefix_temp=$exec_prefix\n\ntest \"${prefix}\" = \"NONE\" && prefix=\"${ac_default_prefix}\"\ntest \"${exec_prefix}\" = \"NONE\" && exec_prefix='${prefix}'\nsbintemp=\"${sbindir}\"\neval sbintemp=\\\"${sbintemp}\\\"\neval sbintemp=\\\"${sbintemp}\\\"\nSBIN_DIR=${sbintemp}\n\nsysconfdirtemp=\"${sysconfdir}\"\neval sysconfdirtemp=\\\"${sysconfdirtemp}\\\"\nSYSCONF_DIR=${sysconfdirtemp}\n\nprefix=$prefix_temp\nexec_prefix=$exec_prefix_temp\n\nAC_SUBST(SBIN_DIR)\nAC_SUBST(SYSCONF_DIR)\n\n# lazy umount emulation\nUMOUNTD_SUBDIR=\"\"\nif test \"x${GF_HOST_OS}\" != \"xGF_LINUX_HOST_OS\" ; then\n        UMOUNTD_SUBDIR=\"contrib/umountd\"\nfi\nAC_SUBST(UMOUNTD_SUBDIR)\n\n\n# enable debug section\nAC_ARG_ENABLE([debug],\n              AS_HELP_STRING([--enable-debug],[Enable debug build options.]))\n\ndnl Add readline support in CLI if available.\nPKG_CHECK_MODULES([READLINE], [readline], [BUILD_READLINE=\"yes\"],\n                  [BUILD_READLINE=\"no\"])\nif test x$BUILD_READLINE = xyes; then\n    AC_DEFINE(HAVE_READLINE, 1, [Enable CLI readline support.])\nfi\n\n# bash-completion script installation directory\n# PKG_CHECK_VAR should be used but is not available in some distributions\nbashcompdir=\"$(pkg-config --variable=completionsdir bash-completion 2>/dev/null)\"\nif test \"x${bashcompdir}\" = \"x\"; then\n    bashcompdir=\"${sysconfdir}/bash_completion.d\"\nfi\nAC_SUBST(bashcompdir)\n\nBUILD_LIBAIO=no\nAC_CHECK_LIB([aio],[io_setup],[LIBAIO=\"-laio\"])\n\nif test -n \"$LIBAIO\"; then\n   AC_DEFINE(HAVE_LIBAIO, 1, [libaio based POSIX enabled])\n   BUILD_LIBAIO=yes\nfi\n\nBUILD_LINUX_IO_URING=\"no\"\nBUILD_LIBURING=\"no\"\n\ncase $host_os in\n    linux*)\n        AC_ARG_ENABLE([linux_io_uring],\n                      AS_HELP_STRING([--disable-linux-io_uring],[Disable io-uring support.]))\n\n        if test \"x$enable_linux_io_uring\" != \"xno\" ; then\n            AC_CHECK_HEADERS([liburing.h],\n                             [AC_DEFINE(HAVE_LIBURING, 1, [io-uring based POSIX enabled]) LIBURING=\"-luring\"],\n                             AC_MSG_ERROR([Install liburing library and headers or use --disable-linux-io_uring]))\n            BUILD_LIBURING=yes\n\n            AC_CHECK_HEADER([linux/io_uring.h],\n                            [\n                                AC_DEFINE([HAVE_IO_URING], [1], \"io_uring support\")\n                                BUILD_LINUX_IO_URING=\"yes\"\n                            ])\n        fi\n        ;;\nesac\n\nAM_CONDITIONAL([BUILD_LINUX_IO_URING], [test x$BUILD_LINUX_IO_URING = xyes])\n\ndnl gnfs section\nBUILD_GNFS=\"no\"\nRPCBIND_SERVICE=\"\"\nAC_ARG_ENABLE([gnfs],\n              AS_HELP_STRING([--enable-gnfs],[Enable legacy gnfs server xlator.]))\nif test \"x${with_server}\" = \"xyes\" -a \"x$enable_gnfs\" = \"xyes\"; then\n    BUILD_GNFS=\"yes\"\n    GF_CFLAGS=\"$GF_CFLAGS -DBUILD_GNFS\"\n    RPCBIND_SERVICE=\"rpcbind.service\"\nfi\nAM_CONDITIONAL([BUILD_GNFS], [test x$BUILD_GNFS = xyes])\nAC_SUBST(BUILD_GNFS)\nAC_SUBST(RPCBIND_SERVICE)\ndnl end gnfs section\n\ndnl Check for userspace-rcu\nPKG_CHECK_MODULES([URCU], [liburcu-bp], [],\n  [AC_CHECK_HEADERS([urcu-bp.h],\n     [URCU_LIBS='-lurcu-bp'],\n     AC_MSG_ERROR([liburcu-bp not found]))])\nPKG_CHECK_MODULES([URCU_CDS], [liburcu-cds >= 0.8], [],\n  [PKG_CHECK_MODULES([URCU_CDS], [liburcu-cds >= 0.7],\n    [AC_DEFINE(URCU_OLD, 1, [Define if liburcu 0.6 or 0.7 is found])\n     USE_CONTRIB_URCU='yes'],\n    [AC_CHECK_HEADERS([urcu/cds.h],\n      [AC_DEFINE(URCU_OLD, 1, [Define if liburcu 0.6 or 0.7 is found])\n       URCU_CDS_LIBS='-lurcu-cds'\n       USE_CONTRIB_URCU='yes'],\n      [AC_MSG_ERROR([liburcu-cds not found])])])])\n\nBUILD_UNITTEST=\"no\"\nAC_ARG_ENABLE([cmocka],\n              AS_HELP_STRING([--enable-cmocka],[Enable cmocka build options.]))\nif test \"x$enable_cmocka\" = \"xyes\"; then\n    BUILD_UNITTEST=\"yes\"\n    PKG_CHECK_MODULES([UNITTEST], [cmocka >= 1.0.1], [BUILD_UNITTEST=\"yes\"],\n        [AC_MSG_ERROR([cmocka library is required to build glusterfs])]\n    )\nfi\nAM_CONDITIONAL([UNITTEST], [test x$BUILD_UNITTEST = xyes])\n\ndnl Define UNIT_TESTING only for building cmocka binaries.\nUNITTEST_CFLAGS=\"${UNITTEST_CFLAGS} -DUNIT_TESTING=1\"\n\ndnl Add cmocka for unit tests\ncase $host_os in\n  freebsd*)\n    dnl remove --coverage on FreeBSD due to a known llvm packaging bug\n    UNITTEST_CFLAGS=\"${UNITTEST_CPPFLAGS} ${UNITTEST_CFLAGS} -g -DDEBUG -O0\"\n    UNITTEST_LDFLAGS=\"${UNITTEST_LIBS} ${UNITTEST_LDFLAGS}\"\n    ;;\n  *)\n    UNITTEST_CFLAGS=\"${UNITTEST_CPPFLAGS} ${UNITTEST_CFLAGS} -g -DDEBUG -O0 --coverage\"\n    UNITTEST_LDFLAGS=\"${UNITTEST_LIBS} ${UNITTEST_LDFLAGS}\"\n    ;;\nesac\n\nAC_SUBST(UNITTEST_CFLAGS)\nAC_SUBST(UNITTEST_LDFLAGS)\n\nAC_SUBST(CFLAGS)\n# end enable debug section\n\ndnl do not add -lresolv for freebsd\ncase $host_os in\n  freebsd*)\n    RESOLV_LIBS=\"\"\n    ;;\n  *)\n    RESOLV_LIBS=\"-lresolv\"\n    ;;\nesac\n\nAC_SUBST(RESOLV_LIBS)\n\n# EC dynamic code generation section\n\nEC_DYNAMIC_SUPPORT=\"none\"\nEC_DYNAMIC_ARCH=\"none\"\n\nAC_ARG_ENABLE([ec-dynamic],\n              AS_HELP_STRING([--disable-ec-dynamic],[Disable all dynamic code generation extensions for EC module]))\n\nAC_ARG_ENABLE([ec-dynamic-intel],\n              AS_HELP_STRING([--disable-ec-dynamic-intel],[Disable all INTEL dynamic code generation extensions for EC module]))\n\nAC_ARG_ENABLE([ec-dynamic-arm],\n              AS_HELP_STRING([--disable-ec-dynamic-arm],[Disable all ARM dynamic code generation extensions for EC module]))\n\nAC_ARG_ENABLE([ec-dynamic-x64],\n              AS_HELP_STRING([--disable-ec-dynamic-x64],[Disable dynamic INTEL x64 code generation for EC module]))\n\nAC_ARG_ENABLE([ec-dynamic-sse],\n              AS_HELP_STRING([--disable-ec-dynamic-sse],[Disable dynamic INTEL SSE code generation for EC module]))\n\nAC_ARG_ENABLE([ec-dynamic-avx],\n              AS_HELP_STRING([--disable-ec-dynamic-avx],[Disable dynamic INTEL AVX code generation for EC module]))\n\nAC_ARG_ENABLE([ec-dynamic-neon],\n              AS_HELP_STRING([--disable-ec-dynamic-neon],[Disable dynamic ARM NEON code generation for EC module]))\n\nif test \"x$enable_ec_dynamic\" != \"xno\"; then\n  case $host in\n    x86_64*)\n      if test \"x$enable_ec_dynamic_intel\" != \"xno\"; then\n        if test \"x$enable_ec_dynamic_x64\" != \"xno\"; then\n          EC_DYNAMIC_SUPPORT=\"$EC_DYNAMIC_SUPPORT x64\"\n          AC_DEFINE(USE_EC_DYNAMIC_X64, 1, [Defined if using dynamic INTEL x64 code])\n        fi\n        if test \"x$enable_ec_dynamic_sse\" != \"xno\"; then\n          EC_DYNAMIC_SUPPORT=\"$EC_DYNAMIC_SUPPORT sse\"\n          AC_DEFINE(USE_EC_DYNAMIC_SSE, 1, [Defined if using dynamic INTEL SSE code])\n        fi\n        if test \"x$enable_ec_dynamic_avx\" != \"xno\"; then\n          EC_DYNAMIC_SUPPORT=\"$EC_DYNAMIC_SUPPORT avx\"\n          AC_DEFINE(USE_EC_DYNAMIC_AVX, 1, [Defined if using dynamic INTEL AVX code])\n        fi\n\n        if test \"x$EC_DYNAMIC_SUPPORT\" != \"xnone\"; then\n          EC_DYNAMIC_ARCH=\"intel\"\n        fi\n      fi\n      ;;\n    arm*)\n      if test \"x$enable_ec_dynamic_arm\" != \"xno\"; then\n        if test \"x$enable_ec_dynamic_neon\" != \"xno\"; then\n          EC_DYNAMIC_SUPPORT=\"$EC_DYNAMIC_SUPPORT neon\"\n          AC_DEFINE(USE_EC_DYNAMIC_NEON, 1, [Defined if using dynamic ARM NEON code])\n        fi\n\n        if test \"x$EC_DYNAMIC_SUPPORT\" != \"xnone\"; then\n          EC_DYNAMIC_ARCH=\"arm\"\n        fi\n      fi\n      ;;\n  esac\n\n  EC_DYNAMIC_SUPPORT=\"${EC_DYNAMIC_SUPPORT#none }\"\nfi\n\nAM_CONDITIONAL([ENABLE_EC_DYNAMIC_INTEL], [test \"x$EC_DYNAMIC_ARCH\" = \"xintel\"])\nAM_CONDITIONAL([ENABLE_EC_DYNAMIC_ARM], [test \"x$EC_DYNAMIC_ARCH\" = \"xarm\"])\n\nAM_CONDITIONAL([ENABLE_EC_DYNAMIC_X64], [test \"x${EC_DYNAMIC_SUPPORT##*x64*}\" = \"x\"])\nAM_CONDITIONAL([ENABLE_EC_DYNAMIC_SSE], [test \"x${EC_DYNAMIC_SUPPORT##*sse*}\" = \"x\"])\nAM_CONDITIONAL([ENABLE_EC_DYNAMIC_AVX], [test \"x${EC_DYNAMIC_SUPPORT##*avx*}\" = \"x\"])\nAM_CONDITIONAL([ENABLE_EC_DYNAMIC_NEON], [test \"x${EC_DYNAMIC_SUPPORT##*neon*}\" = \"x\"])\n\nAC_SUBST(USE_EC_DYNAMIC_X64)\nAC_SUBST(USE_EC_DYNAMIC_SSE)\nAC_SUBST(USE_EC_DYNAMIC_AVX)\nAC_SUBST(USE_EC_DYNAMIC_NEON)\n\n# end EC dynamic code generation section\n\ndnl libglusterfs.so uses math functions\nGF_LDADD=\"${GF_LDADD} ${MATH_LIB}\"\n\ncase $host_os in\n  dnl Can't use libtool's portable \"-no-undefined\" as it seems to be ignored on Linux\n  linux*)\n    GF_NO_UNDEFINED='-Wl,--no-undefined'\n    ;;\n  darwin*)\n    GF_NO_UNDEFINED='-Wl,-undefined'\n    ;;\n  *)\n  dnl There's an issue on FreeBSD with reference to __progname used in some parts of code\n    GF_NO_UNDEFINED=''\n    ;;\nesac\ndnl GF_XLATOR_DEFAULT_LDFLAGS is for most xlators that expose a common set of symbols\nGF_XLATOR_DEFAULT_LDFLAGS='-avoid-version -export-symbols $(top_srcdir)/xlators/xlator.sym $(UUID_LIBS) $(GF_NO_UNDEFINED) $(TIRPC_LIBS)'\ndnl GF_XLATOR_LDFLAGS is for xlators that expose extra symbols, e.g. dht\nGF_XLATOR_LDFLAGS='-avoid-version $(UUID_LIBS) $(GF_NO_UNDEFINED) $(TIRPC_LIBS)'\n\nAC_SUBST(GF_HOST_OS)\nAC_SUBST(GF_CFLAGS)\nAC_SUBST(GF_LDFLAGS)\nAC_SUBST(GF_LDADD)\nAC_SUBST(GF_FUSE_LDADD)\nAC_SUBST(GF_FUSE_CFLAGS)\nAC_SUBST(RLLIBS)\nAC_SUBST(LIBAIO)\nAC_SUBST(LIBURING)\nAC_SUBST(AM_MAKEFLAGS)\nAC_SUBST(AM_LIBTOOLFLAGS)\nAC_SUBST(GF_NO_UNDEFINED)\nAC_SUBST(GF_XLATOR_DEFAULT_LDFLAGS)\nAC_SUBST(GF_XLATOR_LDFLAGS)\nAC_SUBST(GF_XLATOR_MGNT_LIBADD)\n\ncase $host_os in\n     *freebsd*)\n        GF_XLATOR_MGNT_LIBADD=\"-lutil -lprocstat\"\n        ;;\nesac\n\nCONTRIBDIR='$(top_srcdir)/contrib'\nAC_SUBST(CONTRIBDIR)\n\nGF_CPPDEFINES='-D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -D$(GF_HOST_OS)'\nGF_CPPINCLUDES='-include $(top_builddir)/config.h -include $(top_builddir)/site.h -I$(top_srcdir)/libglusterfs/src -I$(top_builddir)/libglusterfs/src'\nif test \"x${USE_CONTRIB_URCU}\" = \"xyes\"; then\n    GF_CPPINCLUDES=\"${GF_CPPINCLUDES} -I\\$(CONTRIBDIR)/userspace-rcu\"\nfi\nGF_CPPFLAGS=\"$GF_CPPFLAGS $GF_CPPDEFINES $GF_CPPINCLUDES\"\nAC_SUBST([GF_CPPFLAGS])\n\ndnl Note GF_BSD_HOST_OS and GF_SOLARIS_HOST_OS are not used\ndnl through Makefile.am and so not defined as conditionals.\nAM_CONDITIONAL([GF_LINUX_HOST_OS], test \"${GF_HOST_OS}\" = \"GF_LINUX_HOST_OS\")\nAM_CONDITIONAL([GF_DARWIN_HOST_OS], test \"${GF_HOST_OS}\" = \"GF_DARWIN_HOST_OS\")\n\nAC_SUBST(GLUSTERD_WORKDIR)\nAM_CONDITIONAL([GF_INSTALL_GLUSTERD_WORKDIR], test ! -d \"${GLUSTERD_WORKDIR}\" && test -d \"${sysconfdir}/glusterd\" )\nAC_SUBST(GLUSTERD_VOLFILE)\nAC_SUBST(GLUSTERFS_LIBEXECDIR)\nAC_SUBST(GLUSTERFSD_MISCDIR)\n\ndnl pkg-config versioning\ndnl\ndnl Once we released gluster-api.pc with version=7. Since then we undid the\ndnl library versioning and replaced it with symbol-versioning. The current\ndnl libgfapi.so has version 0, but the symbols have the version from the main\ndnl package at the time they were added.\ndnl\ndnl Because other packages (like samba) use the pkg-config version, we can not\ndnl drop it, or decrease the version easily. The simplest solution is to keep\ndnl the version=7 and add sub-digits for the actual package/symbol versions.\nGFAPI_VERSION=\"7.\"${PACKAGE_VERSION}\nLIBGFCHANGELOG_VERSION=\"0.0.1\"\nAC_SUBST(GFAPI_VERSION)\nAC_SUBST(LIBGFCHANGELOG_VERSION)\n\ndnl libtool versioning\nLIBGFXDR_LT_VERSION=\"0:1:0\"\nLIBGFRPC_LT_VERSION=\"0:1:0\"\nLIBGLUSTERFS_LT_VERSION=\"0:1:0\"\nLIBGFCHANGELOG_LT_VERSION=\"0:1:0\"\nGFAPI_LT_VERSION=\"0:0:0\"\nAC_SUBST(LIBGFXDR_LT_VERSION)\nAC_SUBST(LIBGFRPC_LT_VERSION)\nAC_SUBST(LIBGLUSTERFS_LT_VERSION)\nAC_SUBST(LIBGFCHANGELOG_LT_VERSION)\nAC_SUBST(GFAPI_LT_VERSION)\nAC_SUBST(GFAPI_EXTRA_LDFLAGS)\n\nGFAPI_LIBS=\"${ACL_LIBS}\"\nAC_SUBST(GFAPI_LIBS)\n\ndnl this change necessary for run-tests.sh\nAC_CONFIG_FILES([tests/env.rc],[ln -s ${ac_abs_builddir}/env.rc ${ac_abs_srcdir}/env.rc 2>/dev/null])\n\nAC_OUTPUT\n\necho\necho \"GlusterFS configure summary\"\necho \"===========================\"\necho \"FUSE client          : $BUILD_FUSE_CLIENT\"\necho \"epoll IO multiplex   : $BUILD_EPOLL\"\necho \"fusermount           : $BUILD_FUSERMOUNT\"\necho \"readline             : $BUILD_READLINE\"\necho \"georeplication       : $BUILD_SYNCDAEMON\"\necho \"Linux-AIO            : $BUILD_LIBAIO\"\necho \"Linux io_uring       : $BUILD_LINUX_IO_URING\"\necho \"Use liburing         : $BUILD_LIBURING\"\necho \"Enable Debug         : $BUILD_DEBUG\"\necho \"Run with Valgrind    : $VALGRIND_TOOL\"\necho \"Sanitizer enabled    : $SANITIZER\"\necho \"XML output           : $BUILD_XML_OUTPUT\"\necho \"Unit Tests           : $BUILD_UNITTEST\"\necho \"Track priv ports     : $TRACK_PRIVPORTS\"\necho \"POSIX ACLs           : $BUILD_POSIX_ACLS\"\necho \"SELinux features     : $USE_SELINUX\"\necho \"firewalld-config     : $BUILD_FIREWALLD\"\necho \"Events               : $BUILD_EVENTS\"\necho \"EC dynamic support   : $EC_DYNAMIC_SUPPORT\"\necho \"Use memory pools     : $USE_MEMPOOL\"\necho \"Nanosecond m/atimes  : $BUILD_NANOSECOND_TIMESTAMPS\"\necho \"Server components    : $with_server\"\necho \"Legacy gNFS server   : $BUILD_GNFS\"\necho \"IPV6 default         : $with_ipv6_default\"\necho \"Use TIRPC            : $with_libtirpc\"\necho \"With Python          : ${PYTHON_VERSION}\"\necho \"Cloudsync            : $BUILD_CLOUDSYNC\"\necho \"Metadata dispersal   : $BUILD_METADISP\"\necho \"Link with TCMALLOC   : $BUILD_TCMALLOC\"\necho \"Enable Brick Mux     : $USE_BRICKMUX\"\necho \"Building with LTO    : $LTO_BUILD\"\necho\n\nif test \"x$SANITIZER\" != \"xnone\"; then\n        UC_SANITIZER=$(echo ${SANITIZER} | tr 'a-z' 'A-Z')\n        echo \"Note: since glusterfs processes are daemon processes, use\"\n        echo \"'export ${UC_SANITIZER}_OPTIONS=log_path=/path/to/xxx.log' to collect\"\n        echo \"sanitizer output. Further details and more options can be\"\n        echo \"found at https://github.com/google/sanitizers.\"\nfi\n"
        },
        {
          "name": "contrib",
          "type": "tree",
          "content": null
        },
        {
          "name": "doc",
          "type": "tree",
          "content": null
        },
        {
          "name": "events",
          "type": "tree",
          "content": null
        },
        {
          "name": "extras",
          "type": "tree",
          "content": null
        },
        {
          "name": "geo-replication",
          "type": "tree",
          "content": null
        },
        {
          "name": "glusterfs-api.pc.in",
          "type": "blob",
          "size": 0.4130859375,
          "content": "prefix=@prefix@\nexec_prefix=@exec_prefix@\nlibdir=@libdir@\nincludedir=@includedir@\n\nName: glusterfs-api\nDescription: GlusterFS API\n/* This is the API version, NOT package version */\nVersion: @GFAPI_VERSION@\nRequires: @PKGCONFIG_UUID@\nLibs: -L${libdir} @GFAPI_LIBS@ -lgfapi -lglusterfs -lgfrpc -lgfxdr\nCflags: -I${includedir} -D_FILE_OFFSET_BITS=64 -D__USE_FILE_OFFSET64 -D__USE_LARGEFILE64 -DUSE_POSIX_ACLS=@USE_POSIX_ACLS@\n"
        },
        {
          "name": "glusterfs.spec.in",
          "type": "blob",
          "size": 87.986328125,
          "content": "%global _hardened_build 1\n\n%global _for_fedora_koji_builds 0\n\n# uncomment and add '%' to use the prereltag for pre-releases\n# %%global prereltag qa3\n\n##-----------------------------------------------------------------------------\n## All argument definitions should be placed here and keep them sorted\n##\n\n# asan\n# if you wish to compile an rpm with address sanitizer...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --with asan\n%{?_with_asan:%global _with_asan --enable-asan}\n\n%if ( 0%{?rhel} && 0%{?rhel} < 7 )\n%global _with_asan %{nil}\n%endif\n\n# cmocka\n# if you wish to compile an rpm with cmocka unit testing...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --with cmocka\n%{?_with_cmocka:%global _with_cmocka --enable-cmocka}\n\n# debug\n# if you wish to compile an rpm with debugging...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --with debug\n%{?_with_debug:%global _with_debug --enable-debug}\n\n# epoll\n# if you wish to compile an rpm without epoll...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --without epoll\n%{?_without_epoll:%global _without_epoll --disable-epoll}\n\n# fusermount\n# if you wish to compile an rpm without fusermount...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --without fusermount\n%{?_without_fusermount:%global _without_fusermount --disable-fusermount}\n\n# geo-rep\n# if you wish to compile an rpm without geo-replication support, compile like this...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --without georeplication\n%{?_without_georeplication:%global _without_georeplication --disable-georeplication}\n\n# gnfs\n# if you wish to compile an rpm with the legacy gNFS server xlator\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --with gnfs\n%{?_with_gnfs:%global _with_gnfs --enable-gnfs}\n\n# ipv6default\n# if you wish to compile an rpm with IPv6 default...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --with ipv6default\n%{?_with_ipv6default:%global _with_ipv6default --with-ipv6-default}\n\n# linux-io_uring\n# If you wish to compile an rpm without linux-io_uring support...\n# rpmbuild -ta  @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --without linux-io_uring\n%{?_without_linux_io_uring:%global _without_linux_io_uring --disable-linux-io_uring}\n\n# Disable linux-io_uring on unsupported distros.\n%if ( 0%{?fedora} && 0%{?fedora} <= 32 ) || ( 0%{?rhel} && 0%{?rhel} <= 7 )\n%global _without_linux_io_uring --disable-linux-io_uring\n%endif\n\n# libtirpc\n# if you wish to compile an rpm without TIRPC (i.e. use legacy glibc rpc)\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --without libtirpc\n%{?_without_libtirpc:%global _without_libtirpc --without-libtirpc}\n\n# libtcmalloc\n# if you wish to compile an rpm without tcmalloc (i.e. use gluster mempool)\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --without tcmalloc\n%{?_without_tcmalloc:%global _without_tcmalloc --without-tcmalloc}\n\n%ifnarch x86_64\n%global _without_tcmalloc --without-tcmalloc\n%endif\n\n# Do not use libtirpc on EL6, it does not have xdr_uint64_t() and xdr_uint32_t\n# Do not use libtirpc on EL7, it does not have xdr_sizeof()\n%if ( 0%{?rhel} && 0%{?rhel} <= 7 )\n%global _without_libtirpc --without-libtirpc\n%endif\n\n\n# ocf\n# if you wish to compile an rpm without the OCF resource agents...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --without ocf\n%{?_without_ocf:%global _without_ocf --without-ocf}\n\n# server\n# if you wish to build rpms without server components, compile like this\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --without server\n%{?_without_server:%global _without_server --without-server}\n\n# disable server components forcefully as rhel <= 6\n%if ( 0%{?rhel} && 0%{?rhel} <= 6 )\n%global _without_server --without-server\n%endif\n\n# syslog\n# if you wish to build rpms without syslog logging, compile like this\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --without syslog\n%{?_without_syslog:%global _without_syslog --disable-syslog}\n\n# disable syslog forcefully as rhel <= 6 doesn't have rsyslog or rsyslog-mmcount\n# Fedora deprecated syslog, see\n#  https://fedoraproject.org/wiki/Changes/NoDefaultSyslog\n# (And what about RHEL7?)\n%if ( 0%{?fedora} && 0%{?fedora} >= 20 ) || ( 0%{?rhel} && 0%{?rhel} <= 6 )\n%global _without_syslog --disable-syslog\n%endif\n\n# tsan\n# if you wish to compile an rpm with thread sanitizer...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --with tsan\n%{?_with_tsan:%global _with_tsan --enable-tsan}\n\n%if ( 0%{?rhel} && 0%{?rhel} < 7 )\n%global _with_tsan %{nil}\n%endif\n\n# valgrind\n# if you wish to compile an rpm to run all processes under valgrind...\n# rpmbuild -ta @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz --with valgrind\n%{?_with_valgrind:%global _with_valgrind --enable-valgrind}\n\n##-----------------------------------------------------------------------------\n## All %%global definitions should be placed here and keep them sorted\n##\n\n# selinux booleans whose defalut value needs modification\n# these booleans will be consumed by \"%%selinux_set_booleans\" macro.\n%if ( 0%{?rhel} && 0%{?rhel} >= 8 )\n%global selinuxbooleans rsync_full_access=1 rsync_client=1\n%endif\n\n%if ( 0%{?fedora} ) || ( 0%{?rhel} && 0%{?rhel} > 6 )\n%global _with_systemd true\n%endif\n\n%if ( 0%{?fedora} ) || ( 0%{?rhel} && 0%{?rhel} >= 7 )\n%global _with_firewalld --enable-firewalld\n%endif\n\n%if 0%{?_tmpfilesdir:1}\n%global _with_tmpfilesdir --with-tmpfilesdir=%{_tmpfilesdir}\n%else\n%global _with_tmpfilesdir --without-tmpfilesdir\n%endif\n\n# without server should also disable some server-only components\n%if 0%{?_without_server:1}\n%global _without_events --disable-events\n%global _without_georeplication --disable-georeplication\n%global _without_linux_io_uring --disable-linux-io_uring\n%global _with_gnfs %{nil}\n%global _without_ocf --without-ocf\n%endif\n\n%if ( 0%{?fedora} ) || ( 0%{?rhel} && 0%{?rhel} > 7 )\n%global _usepython3 1\n%global _pythonver 3\n%else\n%global _usepython3 0\n%global _pythonver 2\n%endif\n\n# From https://fedoraproject.org/wiki/Packaging:Python#Macros\n%if ( 0%{?rhel} && 0%{?rhel} <= 6 )\n%{!?python2_sitelib: %global python2_sitelib %(python2 -c \"from distutils.sysconfig import get_python_lib; print(get_python_lib())\")}\n%{!?python2_sitearch: %global python2_sitearch %(python2 -c \"from distutils.sysconfig import get_python_lib; print(get_python_lib(1))\")}\n%global _rundir %{_localstatedir}/run\n%endif\n\n%if ( 0%{?_with_systemd:1} )\n%global service_start()   /bin/systemctl --quiet start %1.service || : \\\n%{nil}\n%global service_stop()    /bin/systemctl --quiet stop %1.service || :\\\n%{nil}\n%global service_install() install -D -p -m 0644 %1.service %{buildroot}%2 \\\n%{nil}\n# can't seem to make a generic macro that works\n%global glusterd_svcfile   %{_unitdir}/glusterd.service\n%global glusterfsd_svcfile %{_unitdir}/glusterfsd.service\n%global glusterta_svcfile %{_unitdir}/gluster-ta-volume.service\n%global glustereventsd_svcfile %{_unitdir}/glustereventsd.service\n%global glusterfssharedstorage_svcfile %{_unitdir}/glusterfssharedstorage.service\n%else\n%global systemd_post()  /sbin/chkconfig --add %1 >/dev/null 2>&1 || : \\\n%{nil}\n%global systemd_preun() /sbin/chkconfig --del %1 >/dev/null 2>&1 || : \\\n%{nil}\n%global systemd_postun_with_restart() /sbin/service %1 condrestart >/dev/null 2>&1 || : \\\n%{nil}\n%global service_start()   /sbin/service %1 start >/dev/null 2>&1 || : \\\n%{nil}\n%global service_stop()    /sbin/service %1 stop >/dev/null 2>&1 || : \\\n%{nil}\n%global service_install() install -D -p -m 0755 %1.init %{buildroot}%2 \\\n%{nil}\n# can't seem to make a generic macro that works\n%global glusterd_svcfile   %{_sysconfdir}/init.d/glusterd\n%global glusterfsd_svcfile %{_sysconfdir}/init.d/glusterfsd\n%global glustereventsd_svcfile %{_sysconfdir}/init.d/glustereventsd\n%endif\n\n%{!?_pkgdocdir: %global _pkgdocdir %{_docdir}/%{name}-%{version}}\n\n# We do not want to generate useless provides and requires for xlator\n# .so files to be set for glusterfs packages.\n# Filter all generated:\n#\n# TODO: RHEL5 does not have a convenient solution\n%if ( 0%{?rhel} == 6 )\n# filter_setup exists in RHEL6 only\n%filter_provides_in %{_libdir}/glusterfs/%{version}/\n%global __filter_from_req %{?__filter_from_req} | grep -v -P '^(?!lib).*\\.so.*$'\n%filter_setup\n%else\n# modern rpm and current Fedora do not generate requires when the\n# provides are filtered\n%global __provides_exclude_from ^%{_libdir}/glusterfs/%{version}/.*$\n%endif\n\n%global bashcompdir %(pkg-config --variable=completionsdir bash-completion 2>/dev/null)\n%if \"%{bashcompdir}\" == \"\"\n%global bashcompdir ${sysconfdir}/bash_completion.d\n%endif\n\n##-----------------------------------------------------------------------------\n## All package definitions should be placed here in alphabetical order\n##\nSummary:          Distributed File System\n%if ( 0%{_for_fedora_koji_builds} )\nName:             glusterfs\nVersion:          3.8.0\nRelease:          0.1%{?prereltag:.%{prereltag}}%{?dist}\n%else\nName:             @PACKAGE_NAME@\nVersion:          @PACKAGE_VERSION@\nRelease:          0.@PACKAGE_RELEASE@%{?dist}\n%endif\nLicense:          GPLv2 or LGPLv3+\nURL:              http://docs.gluster.org/\n%if ( 0%{_for_fedora_koji_builds} )\nSource0:          http://bits.gluster.org/pub/gluster/glusterfs/src/glusterfs-%{version}%{?prereltag}.tar.gz\nSource1:          glusterd.sysconfig\nSource2:          glusterfsd.sysconfig\nSource7:          glusterfsd.service\nSource8:          glusterfsd.init\n%else\nSource0:          @PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz\n%endif\n\nBuildRoot:        %(mktemp -ud %{_tmppath}/%{name}-%{version}-%{release}-XXXXXX)\n\nRequires(pre):    shadow-utils\n%if ( 0%{?_with_systemd:1} )\nBuildRequires:    systemd\n%endif\n\n%if ( 0%{!?_without_tcmalloc:1} )\nRequires:         gperftools-libs%{?_isa}\n%endif\n\nRequires:         libglusterfs0%{?_isa} = %{version}-%{release}\nRequires:         libgfrpc0%{?_isa} = %{version}-%{release}\nRequires:         libgfxdr0%{?_isa} = %{version}-%{release}\n%if ( 0%{?_with_systemd:1} )\n%{?systemd_requires}\n%endif\n%if 0%{?_with_asan:1} && !( 0%{?rhel} && 0%{?rhel} < 7 )\nBuildRequires:    libasan\n%endif\n%if 0%{?_with_tsan:1} && !( 0%{?rhel} && 0%{?rhel} < 7 )\nBuildRequires:    libtsan\n%endif\nBuildRequires:    bison flex\nBuildRequires:    gcc make libtool\nBuildRequires:    ncurses-devel readline-devel\nBuildRequires:    libxml2-devel openssl-devel openssl\nBuildRequires:    libaio-devel libacl-devel\nBuildRequires:    python%{_pythonver}-devel\n%if ( 0%{!?_without_tcmalloc:1} )\nBuildRequires:    gperftools-devel\n%endif\n%if ( 0%{?rhel} && 0%{?rhel} < 8 )\nBuildRequires:    python-ctypes\n%endif\n%if ( 0%{?_with_ipv6default:1} ) || ( 0%{!?_without_libtirpc:1} )\nBuildRequires:    libtirpc-devel\n%endif\n%if ( 0%{?fedora} && 0%{?fedora} > 27 ) || ( 0%{?rhel} && 0%{?rhel} > 7 )\nBuildRequires:    rpcgen\n%endif\nBuildRequires:    userspace-rcu-devel >= 0.7\n%if ( 0%{?rhel} && 0%{?rhel} <= 6 )\nBuildRequires:    automake\n%endif\nBuildRequires:    libuuid-devel\n%if ( 0%{?_with_cmocka:1} )\nBuildRequires:    libcmocka-devel >= 1.0.1\n%endif\n%if ( 0%{!?_without_georeplication:1} )\nBuildRequires:    libattr-devel\n%endif\n\n%if (0%{?_with_firewalld:1})\nBuildRequires:    firewalld\n%endif\n\n%if ( 0%{!?_without_linux_io_uring:1} )\nBuildRequires:    liburing-devel\n%endif\n\nObsoletes:        %{name}-common < %{version}-%{release}\nObsoletes:        %{name}-core < %{version}-%{release}\nObsoletes:        %{name}-rdma < %{version}-%{release}\n%if ( 0%{!?_with_gnfs:1} )\nObsoletes:        %{name}-gnfs < %{version}-%{release}\n%endif\nProvides:         %{name}-common = %{version}-%{release}\nProvides:         %{name}-core = %{version}-%{release}\n\n%description\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package includes the glusterfs binary, the glusterfsd daemon and the\nlibglusterfs and glusterfs translator modules common to both GlusterFS server\nand client framework.\n\n%package cli\nSummary:          GlusterFS CLI\n%if ( ! (0%{?rhel} && 0%{?rhel} < 7) )\nBuildRequires:    pkgconfig(bash-completion)\n# bash-completion >= 1.90 satisfies this requirement.\n# If it is not available, the condition can be adapted\n# and the completion script will be installed in the backwards compatible\n# %{sysconfdir}/bash_completion.d\n%endif\nRequires:         libglusterfs0%{?_isa} = %{version}-%{release}\n\n%description cli\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the GlusterFS CLI application and its man page\n\n%package cloudsync-plugins\nSummary:          Cloudsync Plugins\nBuildRequires:    libcurl-devel\n\n%description cloudsync-plugins\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides cloudsync plugins for archival feature.\n\n%package extra-xlators\nSummary:          Extra Gluster filesystem Translators\n# We need python-gluster rpm for gluster module's __init__.py in Python\n# site-packages area\nRequires:         python%{_pythonver}-gluster = %{version}-%{release}\nRequires:         python%{_pythonver}\n\n%description extra-xlators\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides extra filesystem Translators, such as Glupy,\nfor GlusterFS.\n\n%package fuse\nSummary:          Fuse client\nBuildRequires:    fuse-devel\nRequires:         attr\nRequires:         psmisc\n\nRequires:         %{name}%{?_isa} = %{version}-%{release}\nRequires:         %{name}-client-xlators%{?_isa} = %{version}-%{release}\n\nObsoletes:        %{name}-client < %{version}-%{release}\nProvides:         %{name}-client = %{version}-%{release}\n\n%description fuse\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides support to FUSE based clients and inlcudes the\nglusterfs(d) binary.\n\n%if ( 0%{!?_without_server:1} )\n%package ganesha\nSummary:          NFS-Ganesha configuration\nGroup:            Applications/File\n\nRequires:         %{name}-server%{?_isa} = %{version}-%{release}\nRequires:         nfs-ganesha-selinux >= 2.7.6\nRequires:         nfs-ganesha-gluster >= 2.7.6\nRequires:         pcs >= 0.10.0\nRequires:         resource-agents >= 4.2.0\nRequires:         dbus\n\n%if ( 0%{?rhel} && 0%{?rhel} == 6 )\nRequires:         cman, pacemaker, corosync\n%endif\n\n%if ( 0%{?fedora} ) || ( 0%{?rhel} && 0%{?rhel} > 5 )\n# we need portblock resource-agent in 3.9.5 and later.\nRequires:         net-tools\n%endif\n\n%if ( 0%{?fedora} && 0%{?fedora} > 25  || ( 0%{?rhel} && 0%{?rhel} > 6 ) )\n%if ( 0%{?rhel} && 0%{?rhel} < 8 )\nRequires: selinux-policy >= 3.13.1-160\nRequires(post):   policycoreutils-python\nRequires(postun): policycoreutils-python\n%else\nRequires(post):   policycoreutils-python-utils\nRequires(postun): policycoreutils-python-utils\n%endif\n%endif\n\n%description ganesha\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over Infiniband RDMA\nor TCP/IP interconnect into one large parallel network file\nsystem. GlusterFS is one of the most sophisticated file systems in\nterms of features and extensibility.  It borrows a powerful concept\ncalled Translators from GNU Hurd kernel. Much of the code in GlusterFS\nis in user space and easily manageable.\n\nThis package provides the configuration and related files for using\nNFS-Ganesha as the NFS server using GlusterFS\n%endif\n\n%if ( 0%{!?_without_georeplication:1} )\n%package geo-replication\nSummary:          GlusterFS Geo-replication\nRequires:         %{name}%{?_isa} = %{version}-%{release}\nRequires:         %{name}-server%{?_isa} = %{version}-%{release}\nRequires:         python%{_pythonver}\nRequires:         python%{_pythonver}-prettytable\nRequires:         python%{_pythonver}-gluster = %{version}-%{release}\n\nRequires:         rsync\nRequires:         util-linux\nRequires:         tar\n\n# required for setting selinux bools\n%if ( 0%{?rhel} && 0%{?rhel} >= 8 )\nRequires(post):      policycoreutils-python-utils\nRequires(postun):    policycoreutils-python-utils\nRequires:            selinux-policy-targeted\nRequires(post):      selinux-policy-targeted\nBuildRequires:       selinux-policy-devel\n%endif\n\n%description geo-replication\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides support to geo-replication.\n%endif\n\n%if ( 0%{?_with_gnfs:1} )\n%package gnfs\nSummary:          GlusterFS gNFS server\nRequires:         %{name}%{?_isa} = %{version}-%{release}\nRequires:         %{name}-client-xlators%{?_isa} = %{version}-%{release}\nRequires:         nfs-utils\n\n%description gnfs\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the glusterfs legacy gNFS server xlator\n%endif\n\n%package -n libglusterfs0\nSummary:          GlusterFS libglusterfs library\nRequires:         libgfrpc0%{?_isa} = %{version}-%{release}\nRequires:         libgfxdr0%{?_isa} = %{version}-%{release}\nObsoletes:        %{name}-libs <= %{version}-%{release}\nProvides:         %{name}-libs = %{version}-%{release}\n\n%description -n libglusterfs0\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the base libglusterfs library\n\n%package -n libglusterfs-devel\nSummary:          GlusterFS libglusterfs library\nRequires:         libgfrpc-devel%{?_isa} = %{version}-%{release}\nRequires:         libgfxdr-devel%{?_isa} = %{version}-%{release}\nObsoletes:        %{name}-devel <= %{version}-%{release}\nProvides:         %{name}-devel = %{version}-%{release}\n\n%description -n libglusterfs-devel\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides libglusterfs.so and the gluster C header files.\n\n%package -n libgfapi0\nSummary:          GlusterFS api library\nRequires:         libglusterfs0%{?_isa} = %{version}-%{release}\nRequires:         %{name}-client-xlators%{?_isa} = %{version}-%{release}\nObsoletes:        %{name}-api <= %{version}-%{release}\nProvides:         %{name}-api = %{version}-%{release}\n\n%description -n libgfapi0\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the glusterfs libgfapi library.\n\n%package -n libgfapi-devel\nSummary:          Development Libraries\nRequires:         libglusterfs-devel%{?_isa} = %{version}-%{release}\nRequires:         libacl-devel\nObsoletes:        %{name}-api-devel <= %{version}-%{release}\nProvides:         %{name}-api-devel = %{version}-%{release}\n\n%description -n libgfapi-devel\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides libgfapi.so and the api C header files.\n\n%package -n libgfchangelog0\nSummary:          GlusterFS libchangelog library\nRequires:         libglusterfs0%{?_isa} = %{version}-%{release}\nObsoletes:        %{name}-libs <= %{version}-%{release}\n\n%description -n libgfchangelog0\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the libgfchangelog library\n\n%package -n libgfchangelog-devel\nSummary:          GlusterFS libchangelog library\nRequires:         libglusterfs-devel%{?_isa} = %{version}-%{release}\nObsoletes:        %{name}-devel <= %{version}-%{release}\n\n%description -n libgfchangelog-devel\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides libgfchangelog.so and changelog C header files.\n\n%package -n libgfrpc0\nSummary:          GlusterFS libgfrpc0 library\nRequires:         libglusterfs0%{?_isa} = %{version}-%{release}\nObsoletes:        %{name}-libs <= %{version}-%{release}\n\n%description -n libgfrpc0\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the libgfrpc library\n\n%package -n libgfrpc-devel\nSummary:          GlusterFS libgfrpc library\nRequires:         libglusterfs0%{?_isa} = %{version}-%{release}\nObsoletes:        %{name}-devel <= %{version}-%{release}\n\n%description -n libgfrpc-devel\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides libgfrpc.so and rpc C header files.\n\n%package -n libgfxdr0\nSummary:          GlusterFS libgfxdr0 library\nRequires:         libglusterfs0%{?_isa} = %{version}-%{release}\nObsoletes:        %{name}-libs <= %{version}-%{release}\n\n%description -n libgfxdr0\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the libgfxdr library\n\n%package -n libgfxdr-devel\nSummary:          GlusterFS libgfxdr library\nRequires:         libglusterfs0%{?_isa} = %{version}-%{release}\nObsoletes:        %{name}-devel <= %{version}-%{release}\n\n%description -n libgfxdr-devel\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides libgfxdr.so.\n\n%package -n python%{_pythonver}-gluster\nSummary:          GlusterFS python library\nRequires:         python%{_pythonver}\n%if ( ! %{_usepython3} )\n%{?python_provide:%python_provide python-gluster}\nProvides:         python-gluster = %{version}-%{release}\nObsoletes:        python-gluster < 3.10\n%endif\n\n%description -n python%{_pythonver}-gluster\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package contains the python modules of GlusterFS and own gluster\nnamespace.\n\n%package regression-tests\nSummary:          Development Tools\nRequires:         %{name}%{?_isa} = %{version}-%{release}\nRequires:         %{name}-fuse%{?_isa} = %{version}-%{release}\nRequires:         %{name}-server%{?_isa} = %{version}-%{release}\n## thin provisioning support\nRequires:         lvm2 >= 2.02.89\nRequires:         perl(App::Prove) perl(Test::Harness) gcc util-linux-ng\nRequires:         python%{_pythonver}\nRequires:         attr dbench file git libacl-devel net-tools\nRequires:         nfs-utils xfsprogs yajl psmisc bc\n\n%description regression-tests\nThe Gluster Test Framework, is a suite of scripts used for\nregression testing of Gluster.\n\n%if ( 0%{!?_without_ocf:1} )\n%package resource-agents\nSummary:          OCF Resource Agents for GlusterFS\nLicense:          GPLv3+\nBuildArch:        noarch\n# this Group handling comes from the Fedora resource-agents package\n# for glusterd\nRequires:         %{name}-server = %{version}-%{release}\n# depending on the distribution, we need pacemaker or resource-agents\nRequires:         %{_prefix}/lib/ocf/resource.d\n\n%description resource-agents\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the resource agents which plug glusterd into\nOpen Cluster Framework (OCF) compliant cluster resource managers,\nlike Pacemaker.\n%endif\n\n%if ( 0%{!?_without_server:1} )\n%package server\nSummary:          Clustered file-system server\nRequires:         %{name}%{?_isa} = %{version}-%{release}\nRequires:         %{name}-cli%{?_isa} = %{version}-%{release}\nRequires:         libglusterfs0%{?_isa} = %{version}-%{release}\nRequires:         libgfchangelog0%{?_isa} = %{version}-%{release}\n%if ( 0%{?fedora} && 0%{?fedora} >= 30  || ( 0%{?rhel} && 0%{?rhel} >= 8 ) )\nRequires:         glusterfs-selinux >= 0.1.0-2\n%endif\n# some daemons (like quota) use a fuse-mount, glusterfsd is part of -fuse\nRequires:         %{name}-fuse%{?_isa} = %{version}-%{release}\n# self-heal daemon, rebalance, nfs-server etc. are actually clients\nRequires:         libgfapi0%{?_isa} = %{version}-%{release}\nRequires:         %{name}-client-xlators%{?_isa} = %{version}-%{release}\n# lvm2 for snapshot, and nfs-utils and rpcbind/portmap for gnfs server\nRequires:         lvm2\n%if ( 0%{?_with_systemd:1} )\n%{?systemd_requires}\n%else\nRequires(post):   /sbin/chkconfig\nRequires(preun):  /sbin/service\nRequires(preun):  /sbin/chkconfig\nRequires(postun): /sbin/service\n%endif\n%if (0%{?_with_firewalld:1})\n# we install firewalld rules, so we need to have the directory owned\n%if ( 0%{!?rhel} )\n# not on RHEL because firewalld-filesystem appeared in 7.3\n# when EL7 rpm gets weak dependencies we can add a Suggests:\nRequires:         firewalld-filesystem\n%endif\n%endif\n%if ( 0%{?fedora} ) || ( 0%{?rhel} && 0%{?rhel} >= 6 )\nRequires:         rpcbind\n%else\nRequires:         portmap\n%endif\n%if ( 0%{?rhel} && 0%{?rhel} <= 6 )\nRequires:         python-argparse\n%endif\n%if ( 0%{?fedora} && 0%{?fedora} > 27 ) || ( 0%{?rhel} && 0%{?rhel} > 7 )\nRequires:         python%{_pythonver}-pyxattr\n%else\nRequires:         pyxattr\n%endif\n%if (0%{?_with_valgrind:1})\nRequires:         valgrind\n%endif\n\n%description server\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the glusterfs server daemon.\n%endif\n\n%package thin-arbiter\nSummary:          GlusterFS thin-arbiter module\nRequires:         %{name}%{?_isa} = %{version}-%{release}\nRequires:         %{name}-server%{?_isa} = %{version}-%{release}\n\n%description thin-arbiter\nThis package provides a tie-breaker functionality to GlusterFS\nreplicate volume. It includes translators required to provide the\nfunctionality, and also few other scripts required for getting the setup done.\n\nThis package provides the glusterfs thin-arbiter translator.\n\n%package client-xlators\nSummary:          GlusterFS client-side translators\n\n%description client-xlators\nGlusterFS is a distributed file-system capable of scaling to several\npetabytes. It aggregates various storage bricks over TCP/IP interconnect\ninto one large parallel network filesystem. GlusterFS is one of the\nmost sophisticated file systems in terms of features and extensibility.\nIt borrows a powerful concept called Translators from GNU Hurd kernel.\nMuch of the code in GlusterFS is in user space and easily manageable.\n\nThis package provides the translators needed on any GlusterFS client.\n\n%if ( 0%{!?_without_events:1} )\n%package events\nSummary:          GlusterFS Events\nRequires:         %{name}-server%{?_isa} = %{version}-%{release}\nRequires:         python%{_pythonver} python%{_pythonver}-prettytable\nRequires:         python%{_pythonver}-gluster = %{version}-%{release}\n%if ( 0%{?rhel} && 0%{?rhel} < 8 )\nRequires:         python-requests\n%else\nRequires:         python%{_pythonver}-requests\n%endif\n%if ( 0%{?rhel} && 0%{?rhel} < 7 )\nRequires:         python-argparse\n%endif\n%if ( 0%{?_with_systemd:1} )\n%{?systemd_requires}\n%endif\n\n%description events\nGlusterFS Events\n\n%endif\n\n%prep\n%setup -q -n %{name}-%{version}%{?prereltag}\n%if ( ! %{_usepython3} )\necho \"fixing python shebangs...\"\nfor f in api events extras geo-replication libglusterfs tools xlators; do\nfind $f -type f -exec sed -i 's|/usr/bin/python3|/usr/bin/python2|' {} \\;\ndone\n%endif\n\n%build\n\n# RHEL6 and earlier need to manually replace config.guess and config.sub\n%if ( 0%{?rhel} && 0%{?rhel} <= 6 )\n./autogen.sh\n%endif\n\n%configure \\\n        %{?_with_asan} \\\n        %{?_with_cmocka} \\\n        %{?_with_debug} \\\n        %{?_with_firewalld} \\\n        %{?_with_gnfs} \\\n        %{?_with_tmpfilesdir} \\\n        %{?_with_tsan} \\\n        %{?_with_valgrind} \\\n        %{?_without_epoll} \\\n        %{?_without_events} \\\n        %{?_without_fusermount} \\\n        %{?_without_georeplication} \\\n        %{?_without_ocf} \\\n        %{?_without_server} \\\n        %{?_without_syslog} \\\n        %{?_with_ipv6default} \\\n        %{?_without_linux_io_uring} \\\n        %{?_without_libtirpc} \\\n        %{?_without_tcmalloc}\n\n# fix hardening and remove rpath in shlibs\n%if ( 0%{?fedora} && 0%{?fedora} > 17 ) || ( 0%{?rhel} && 0%{?rhel} > 6 )\nsed -i 's| \\\\\\$compiler_flags |&\\\\\\$LDFLAGS |' libtool\n%endif\nsed -i 's|^hardcode_libdir_flag_spec=.*|hardcode_libdir_flag_spec=\"\"|' libtool\nsed -i 's|^runpath_var=LD_RUN_PATH|runpath_var=DIE_RPATH_DIE|' libtool\n\nmake %{?_smp_mflags}\n\n%check\nmake check\n\n%install\nrm -rf %{buildroot}\nmake install DESTDIR=%{buildroot}\n%if ( 0%{!?_without_server:1} )\n%if ( 0%{_for_fedora_koji_builds} )\ninstall -D -p -m 0644 %{SOURCE1} \\\n    %{buildroot}%{_sysconfdir}/sysconfig/glusterd\ninstall -D -p -m 0644 %{SOURCE2} \\\n    %{buildroot}%{_sysconfdir}/sysconfig/glusterfsd\n%else\ninstall -D -p -m 0644 extras/glusterd-sysconfig \\\n    %{buildroot}%{_sysconfdir}/sysconfig/glusterd\n%endif\n%endif\n\nmkdir -p %{buildroot}%{_localstatedir}/log/glusterd\nmkdir -p %{buildroot}%{_localstatedir}/log/glusterfs\nmkdir -p %{buildroot}%{_localstatedir}/log/glusterfsd\nmkdir -p %{buildroot}%{_rundir}/gluster\n\n# Remove unwanted files from all the shared libraries\nfind %{buildroot}%{_libdir} -name '*.a' -delete\nfind %{buildroot}%{_libdir} -name '*.la' -delete\n\n# Remove installed docs, the ones we want are included by %%doc, in\n# /usr/share/doc/glusterfs or /usr/share/doc/glusterfs-x.y.z depending\n# on the distribution\n%if ( 0%{?fedora} && 0%{?fedora} > 19 ) || ( 0%{?rhel} && 0%{?rhel} > 6 )\nrm -rf %{buildroot}%{_pkgdocdir}/*\n%else\nrm -rf %{buildroot}%{_defaultdocdir}/%{name}\nmkdir -p %{buildroot}%{_pkgdocdir}\n%endif\nhead -50 ChangeLog > ChangeLog.head && mv ChangeLog.head ChangeLog\ncat << EOM >> ChangeLog\n\nMore commit messages for this ChangeLog can be found at\nhttps://forge.gluster.org/glusterfs-core/glusterfs/commits/v%{version}%{?prereltag}\nEOM\n\n# Remove benchmarking and other unpackaged files\n# make install always puts these in %%{_defaultdocdir}/%%{name} so don't\n# use %%{_pkgdocdir}; that will be wrong on later Fedora distributions\nrm -rf %{buildroot}%{_defaultdocdir}/%{name}/benchmarking\nrm -f %{buildroot}%{_defaultdocdir}/%{name}/glusterfs-mode.el\nrm -f %{buildroot}%{_defaultdocdir}/%{name}/glusterfs.vim\n\n%if ( 0%{!?_without_server:1} )\n# Create working directory\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd\n\n# Update configuration file to /var/lib working directory\nsed -i 's|option working-directory /etc/glusterd|option working-directory %{_sharedstatedir}/glusterd|g' \\\n    %{buildroot}%{_sysconfdir}/glusterfs/glusterd.vol\n%endif\n\n# Install glusterfsd .service or init.d file\n%if ( 0%{!?_without_server:1} )\n%if ( 0%{_for_fedora_koji_builds} )\n%service_install glusterfsd %{glusterfsd_svcfile}\n%endif\n%endif\n\ninstall -D -p -m 0644 extras/glusterfs-logrotate \\\n    %{buildroot}%{_sysconfdir}/logrotate.d/glusterfs\n\n# ganesha ghosts\n%if ( 0%{!?_without_server:1} )\nmkdir -p %{buildroot}%{_sysconfdir}/ganesha\ntouch %{buildroot}%{_sysconfdir}/ganesha/ganesha-ha.conf\nmkdir -p %{buildroot}%{_localstatedir}/run/gluster/shared_storage/nfs-ganesha/\ntouch %{buildroot}%{_localstatedir}/run/gluster/shared_storage/nfs-ganesha/ganesha.conf\ntouch %{buildroot}%{_localstatedir}/run/gluster/shared_storage/nfs-ganesha/ganesha-ha.conf\n%endif\n\n%if ( 0%{!?_without_georeplication:1} )\n# geo-rep ghosts\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/geo-replication\ntouch %{buildroot}%{_sharedstatedir}/glusterd/geo-replication/gsyncd_template.conf\ninstall -D -p -m 0644 extras/glusterfs-georep-logrotate \\\n    %{buildroot}%{_sysconfdir}/logrotate.d/glusterfs-georep\n%endif\n\n%if ( 0%{!?_without_server:1} )\n# the rest of the ghosts\ntouch %{buildroot}%{_sharedstatedir}/glusterd/glusterd.info\ntouch %{buildroot}%{_sharedstatedir}/glusterd/options\nsubdirs=(add-brick create copy-file delete gsync-create remove-brick reset set start stop)\nfor dir in ${subdirs[@]}; do\n    mkdir -p %{buildroot}%{_sharedstatedir}/glusterd/hooks/1/\"$dir\"/{pre,post}\ndone\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/glustershd\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/peers\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/vols\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/nfs/run\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/bitd\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/quotad\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/scrub\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/snaps\nmkdir -p %{buildroot}%{_sharedstatedir}/glusterd/ss_brick\ntouch %{buildroot}%{_sharedstatedir}/glusterd/nfs/nfs-server.vol\ntouch %{buildroot}%{_sharedstatedir}/glusterd/nfs/run/nfs.pid\n%endif\n\nfind ./tests ./run-tests.sh -type f | cpio -pd %{buildroot}%{_prefix}/share/glusterfs\n\n%clean\nrm -rf %{buildroot}\n\n##-----------------------------------------------------------------------------\n## All %%post should be placed here and keep them sorted\n##\n%post\n/sbin/ldconfig\n%if ( 0%{!?_without_syslog:1} )\n%if ( 0%{?fedora} ) || ( 0%{?rhel} && 0%{?rhel} >= 6 )\n%systemd_postun_with_restart rsyslog\n%endif\n%endif\nexit 0\n\n%if ( 0%{!?_without_events:1} )\n%post events\n%systemd_post glustereventsd\n%endif\n\n%if ( 0%{!?_without_server:1} )\n%if ( 0%{?fedora} && 0%{?fedora} > 25 || ( 0%{?rhel} && 0%{?rhel} > 6 ) )\n%post ganesha\n# first install\nif [ $1 -eq 1 ]; then\n  %selinux_set_booleans ganesha_use_fusefs=1\nfi\nexit 0\n%endif\n%endif\n\n%if ( 0%{!?_without_georeplication:1} )\n%post geo-replication\n%if ( 0%{?rhel} && 0%{?rhel} >= 8 )\nif [ $1 -eq 1 ]; then\n  %selinux_set_booleans %{selinuxbooleans}\nfi\n%endif\nif [ $1 -ge 1 ]; then\n    %systemd_postun_with_restart glusterd\nfi\nexit 0\n%endif\n\n%post -n libglusterfs0\n/sbin/ldconfig\n\n%post -n libgfapi0\n/sbin/ldconfig\n\n%post -n libgfchangelog0\n/sbin/ldconfig\n\n%post -n libgfrpc0\n/sbin/ldconfig\n\n%post -n libgfxdr0\n/sbin/ldconfig\n\n%if ( 0%{!?_without_server:1} )\n%post server\n# Legacy server\n%systemd_post glusterd\n%if ( 0%{_for_fedora_koji_builds} )\n%systemd_post glusterfsd\n%endif\n# \".cmd_log_history\" is renamed to \"cmd_history.log\" in GlusterFS-3.7 .\n# While upgrading glusterfs-server package form GlusterFS version <= 3.6 to\n# GlusterFS version 3.7, \".cmd_log_history\" should be renamed to\n# \"cmd_history.log\" to retain cli command history contents.\nif [ -f %{_localstatedir}/log/glusterfs/.cmd_log_history ]; then\n    mv %{_localstatedir}/log/glusterfs/.cmd_log_history \\\n       %{_localstatedir}/log/glusterfs/cmd_history.log\nfi\n\n# Genuine Fedora (and EPEL) builds never put gluster files in /etc; if\n# there are any files in /etc from a prior gluster.org install, move them\n# to /var/lib. (N.B. Starting with 3.3.0 all gluster files are in /var/lib\n# in gluster.org RPMs.) Be careful to copy them on the off chance that\n# /etc and /var/lib are on separate file systems\nif [ -d /etc/glusterd -a ! -h %{_sharedstatedir}/glusterd ]; then\n    mkdir -p %{_sharedstatedir}/glusterd\n    cp -a /etc/glusterd %{_sharedstatedir}/glusterd\n    rm -rf /etc/glusterd\n    ln -sf %{_sharedstatedir}/glusterd /etc/glusterd\nfi\n\n# Rename old volfiles in an RPM-standard way.  These aren't actually\n# considered package config files, so %%config doesn't work for them.\nif [ -d %{_sharedstatedir}/glusterd/vols ]; then\n    for file in $(find %{_sharedstatedir}/glusterd/vols -name '*.vol'); do\n        newfile=${file}.rpmsave\n        echo \"warning: ${file} saved as ${newfile}\"\n        cp ${file} ${newfile}\n    done\nfi\n\n# add marker translator\n# but first make certain that there are no old libs around to bite us\n# BZ 834847\nif [ -e /etc/ld.so.conf.d/glusterfs.conf ]; then\n    rm -f /etc/ld.so.conf.d/glusterfs.conf\n    /sbin/ldconfig\nfi\n\n%if (0%{?_with_firewalld:1})\n    %firewalld_reload\n%endif\n\npidof -c -o %PPID -x glusterd &> /dev/null\nif [ $? -eq 0 ]; then\n    kill -9 `pgrep -f gsyncd.py` &> /dev/null\n\n    killall --wait glusterd &> /dev/null\n    glusterd --xlator-option *.upgrade=on -N\n\n    #Cleaning leftover glusterd socket file which is created by glusterd in\n    #rpm_script_t context.\n    rm -f %{_rundir}/glusterd.socket\n\n    # glusterd _was_ running, we killed it, it exited after *.upgrade=on,\n    # so start it again\n    %service_start glusterd\nelse\n    glusterd --xlator-option *.upgrade=on -N\n\n    #Cleaning leftover glusterd socket file which is created by glusterd in\n    #rpm_script_t context.\n    rm -f %{_rundir}/glusterd.socket\nfi\nexit 0\n%endif\n\n##-----------------------------------------------------------------------------\n## All %%pre should be placed here and keep them sorted\n##\n%pre\ngetent group gluster > /dev/null || groupadd -r gluster\ngetent passwd gluster > /dev/null || useradd -r -g gluster -d %{_rundir}/gluster -s /sbin/nologin -c \"GlusterFS daemons\" gluster\nexit 0\n\n##-----------------------------------------------------------------------------\n## All %%preun should be placed here and keep them sorted\n##\n%if ( 0%{!?_without_events:1} )\n%preun events\nif [ $1 -eq 0 ]; then\n    if [ -f %glustereventsd_svcfile ]; then\n        %service_stop glustereventsd\n        %systemd_preun glustereventsd\n    fi\nfi\nexit 0\n%endif\n\n%if ( 0%{!?_without_server:1} )\n%preun server\nif [ $1 -eq 0 ]; then\n    if [ -f %glusterfsd_svcfile ]; then\n        %service_stop glusterfsd\n    fi\n    %service_stop glusterd\n    if [ -f %glusterfsd_svcfile ]; then\n        %systemd_preun glusterfsd\n    fi\n    %systemd_preun glusterd\nfi\nif [ $1 -ge 1 ]; then\n    if [ -f %glusterfsd_svcfile ]; then\n        %systemd_postun_with_restart glusterfsd\n    fi\n    %systemd_postun_with_restart glusterd\nfi\nexit 0\n%endif\n\n%preun thin-arbiter\nif [ $1 -eq 0 ]; then\n    if [ -f %glusterta_svcfile ]; then\n        %service_stop gluster-ta-volume\n        %systemd_preun gluster-ta-volume\n    fi\nfi\n\n##-----------------------------------------------------------------------------\n## All %%postun should be placed here and keep them sorted\n##\n%postun\n%if ( 0%{!?_without_syslog:1} )\n%if ( 0%{?fedora} ) || ( 0%{?rhel} && 0%{?rhel} >= 6 )\n%systemd_postun_with_restart rsyslog\n%endif\n%endif\n\n%if ( 0%{!?_without_server:1} )\n%postun server\n%if (0%{?_with_firewalld:1})\n    %firewalld_reload\n%endif\nexit 0\n%endif\n\n%if ( 0%{!?_without_server:1} )\n%if ( 0%{?fedora} && 0%{?fedora} > 25  || ( 0%{?rhel} && 0%{?rhel} > 6 ) )\n%postun ganesha\nif [ $1 -eq 0 ]; then\n  # use the value of ganesha_use_fusefs from before glusterfs-ganesha was installed\n  %selinux_unset_booleans ganesha_use_fusefs=1\nfi\nexit 0\n%endif\n%endif\n\n%if ( 0%{!?_without_georeplication:1} )\n%postun geo-replication\n%if ( 0%{?rhel} && 0%{?rhel} >= 8 )\nif [ $1 -eq 0 ]; then\n  %selinux_unset_booleans %{selinuxbooleans}\nfi\nexit 0\n%endif\n%endif\n\n##-----------------------------------------------------------------------------\n## All %%trigger should be placed here and keep them sorted\n##\n%if ( 0%{!?_without_server:1} )\n%if ( 0%{?fedora} && 0%{?fedora} > 25  || ( 0%{?rhel} && 0%{?rhel} > 6 ) )\n# ensure ganesha_use_fusefs is on in case of policy mode switch (eg. mls->targeted)\n%triggerin ganesha -- selinux-policy-targeted\nsemanage boolean -m ganesha_use_fusefs --on -S targeted\nexit 0\n%endif\n%endif\n\n##-----------------------------------------------------------------------------\n## All %%files should be placed here and keep them grouped\n##\n%files\n%doc ChangeLog COPYING-GPLV2 COPYING-LGPLV3 INSTALL README.md THANKS COMMITMENT\n%{_mandir}/man8/*gluster*.8*\n%if ( 0%{!?_without_server:1} )\n%exclude %{_mandir}/man8/gluster.8*\n%endif\n%dir %{_localstatedir}/log/glusterfs\n%if 0%{?!_without_server:1}\n%dir %{_datadir}/glusterfs\n%dir %{_datadir}/glusterfs/scripts\n     %{_datadir}/glusterfs/scripts/post-upgrade-script-for-quota.sh\n     %{_datadir}/glusterfs/scripts/pre-upgrade-script-for-quota.sh\n%endif\n# xlators that are needed on the client- and on the server-side\n%dir %{_libdir}/glusterfs\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/auth\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/auth/addr.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/auth/login.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/rpc-transport\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/rpc-transport/socket.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/debug\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/debug/error-gen.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/debug/delay-gen.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/debug/io-stats.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/debug/sink.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/debug/trace.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/access-control.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/barrier.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/cdc.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/changelog.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/utime.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/gfid-access.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/namespace.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/read-only.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/shard.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/snapview-client.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/worm.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/cloudsync.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/meta.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/io-cache.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/io-threads.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/md-cache.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/open-behind.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/quick-read.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/read-ahead.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/readdir-ahead.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/stat-prefetch.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/write-behind.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/performance/nl-cache.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/system\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/system/posix-acl.so\n%dir %attr(0775,gluster,gluster) %{_rundir}/gluster\n%if 0%{?_tmpfilesdir:1}\n%{_tmpfilesdir}/gluster.conf\n%endif\n\n%if ( 0%{?_without_server:1} )\n#exclude ganesha related files\n%exclude %{_sysconfdir}/ganesha/ganesha-ha.conf.sample\n%exclude %{_libexecdir}/ganesha/*\n%exclude %{_prefix}/lib/ocf/resource.d/heartbeat/*\n%endif\n\n%files cli\n%{_sbindir}/gluster\n%{_mandir}/man8/gluster.8*\n%{bashcompdir}/gluster.bash\n\n%files cloudsync-plugins\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/cloudsync-plugins\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/cloudsync-plugins/cloudsyncs3.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/cloudsync-plugins/cloudsynccvlt.so\n\n%files -n libglusterfs-devel\n%dir %{_includedir}/glusterfs\n     %{_includedir}/glusterfs/*.h\n     %{_includedir}/glusterfs/server/*.h\n%{_libdir}/libglusterfs.so\n\n%files -n libgfapi-devel\n%dir %{_includedir}/glusterfs/api\n     %{_includedir}/glusterfs/api/*.h\n%{_libdir}/libgfapi.so\n%{_libdir}/pkgconfig/glusterfs-api.pc\n\n\n%files -n libgfchangelog-devel\n%dir %{_includedir}/glusterfs/gfchangelog\n     %{_includedir}/glusterfs/gfchangelog/*.h\n%{_libdir}/libgfchangelog.so\n%{_libdir}/pkgconfig/libgfchangelog.pc\n\n%files -n libgfrpc-devel\n%dir %{_includedir}/glusterfs/rpc\n     %{_includedir}/glusterfs/rpc/*.h\n%{_libdir}/libgfrpc.so\n\n%files -n libgfxdr-devel\n%{_libdir}/libgfxdr.so\n\n%files client-xlators\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/cluster\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/cluster/*.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/protocol\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/protocol/client.so\n\n%files extra-xlators\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/quiesce.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/playground\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/playground/template.so\n\n%files fuse\n# glusterfs is a symlink to glusterfsd, -server depends on -fuse.\n%{_sbindir}/glusterfs\n%{_sbindir}/glusterfsd\n%config(noreplace) %{_sysconfdir}/logrotate.d/glusterfs\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/mount\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/mount/fuse.so\n/sbin/mount.glusterfs\n%if ( 0%{!?_without_fusermount:1} )\n%{_bindir}/fusermount-glusterfs\n%endif\n\n%if ( 0%{?_with_gnfs:1} && 0%{!?_without_server:1} )\n%files gnfs\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/nfs\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/nfs/server.so\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/nfs\n%ghost      %attr(0600,-,-) %{_sharedstatedir}/glusterd/nfs/nfs-server.vol\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/nfs/run\n%ghost      %attr(0600,-,-) %{_sharedstatedir}/glusterd/nfs/run/nfs.pid\n%endif\n\n%files thin-arbiter\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/thin-arbiter.so\n%dir %{_datadir}/glusterfs/scripts\n     %{_datadir}/glusterfs/scripts/setup-thin-arbiter.sh\n%config %{_sysconfdir}/glusterfs/thin-arbiter.vol\n\n%if ( 0%{?_with_systemd:1} )\n%{_unitdir}/gluster-ta-volume.service\n%endif\n\n%if ( 0%{!?_without_georeplication:1} )\n%files geo-replication\n%config(noreplace) %{_sysconfdir}/logrotate.d/glusterfs-georep\n\n%{_sbindir}/gfind_missing_files\n%{_sbindir}/gluster-mountbroker\n%dir %{_libexecdir}/glusterfs\n%dir %{_libexecdir}/glusterfs/python\n%dir %{_libexecdir}/glusterfs/python/syncdaemon\n     %{_libexecdir}/glusterfs/gsyncd\n     %{_libexecdir}/glusterfs/python/syncdaemon/*\n%dir %{_libexecdir}/glusterfs/scripts\n     %{_libexecdir}/glusterfs/scripts/get-gfid.sh\n     %{_libexecdir}/glusterfs/scripts/secondary-upgrade.sh\n     %{_libexecdir}/glusterfs/scripts/gsync-upgrade.sh\n     %{_libexecdir}/glusterfs/scripts/generate-gfid-file.sh\n     %{_libexecdir}/glusterfs/scripts/gsync-sync-gfid\n     %{_libexecdir}/glusterfs/scripts/schedule_georep.py*\n     %{_libexecdir}/glusterfs/gverify.sh\n     %{_libexecdir}/glusterfs/set_geo_rep_pem_keys.sh\n     %{_libexecdir}/glusterfs/peer_gsec_create\n     %{_libexecdir}/glusterfs/peer_mountbroker\n     %{_libexecdir}/glusterfs/peer_mountbroker.py*\n     %{_libexecdir}/glusterfs/gfind_missing_files\n     %{_libexecdir}/glusterfs/peer_georep-sshkey.py*\n%{_sbindir}/gluster-georep-sshkey\n\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/geo-replication\n%ghost      %attr(0644,-,-) %{_sharedstatedir}/glusterd/geo-replication/gsyncd_template.conf\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/gsync-create\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/gsync-create/post\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/gsync-create/post/S56glusterd-geo-rep-create-post.sh\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/gsync-create/pre\n\n%endif\n\n%files -n libglusterfs0\n%{_libdir}/libglusterfs.so.*\n\n%files -n libgfapi0\n%{_libdir}/libgfapi.so.*\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/mount\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/mount/api.so\n\n%files -n libgfchangelog0\n%{_libdir}/libgfchangelog.so.*\n\n%files -n libgfrpc0\n%{_libdir}/libgfrpc.so.*\n\n%files -n libgfxdr0\n%{_libdir}/libgfxdr.so.*\n\n%files -n python%{_pythonver}-gluster\n# introducing glusterfs module in site packages.\n# so that all other gluster submodules can reside in the same namespace.\n%if ( %{_usepython3} )\n%dir %{python3_sitelib}/gluster\n     %{python3_sitelib}/gluster/__init__.*\n     %{python3_sitelib}/gluster/__pycache__\n     %{python3_sitelib}/gluster/cliutils\n%else\n%dir %{python2_sitelib}/gluster\n     %{python2_sitelib}/gluster/__init__.*\n     %{python2_sitelib}/gluster/cliutils\n%endif\n\n%files regression-tests\n%dir %{_datadir}/glusterfs\n     %{_datadir}/glusterfs/run-tests.sh\n     %{_datadir}/glusterfs/tests\n%exclude %{_datadir}/glusterfs/tests/vagrant\n\n%if ( 0%{!?_without_server:1} )\n%files ganesha\n%dir %{_libexecdir}/ganesha\n%{_sysconfdir}/ganesha/ganesha-ha.conf.sample\n%{_libexecdir}/ganesha/*\n%{_prefix}/lib/ocf/resource.d/heartbeat/*\n%{_sharedstatedir}/glusterd/hooks/1/start/post/S31ganesha-start.sh\n%ghost      %attr(0644,-,-) %config(noreplace) %{_sysconfdir}/ganesha/ganesha-ha.conf\n%ghost %dir %attr(0755,-,-) %{_localstatedir}/run/gluster/shared_storage/nfs-ganesha\n%ghost      %attr(0644,-,-) %config(noreplace) %{_localstatedir}/run/gluster/shared_storage/nfs-ganesha/ganesha.conf\n%ghost      %attr(0644,-,-) %config(noreplace) %{_localstatedir}/run/gluster/shared_storage/nfs-ganesha/ganesha-ha.conf\n%endif\n\n%if ( 0%{!?_without_ocf:1} )\n%files resource-agents\n# /usr/lib is the standard for OCF, also on x86_64\n%{_prefix}/lib/ocf/resource.d/glusterfs\n%endif\n\n%if ( 0%{!?_without_server:1} )\n%files server\n%doc extras/clear_xattrs.sh\n# sysconf\n%config(noreplace) %{_sysconfdir}/glusterfs\n%exclude %{_sysconfdir}/glusterfs/thin-arbiter.vol\n%exclude %{_sysconfdir}/glusterfs/eventsconfig.json\n%exclude %{_sharedstatedir}/glusterd/nfs/nfs-server.vol\n%exclude %{_sharedstatedir}/glusterd/nfs/run/nfs.pid\n%if ( 0%{?_with_gnfs:1} )\n%exclude %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/nfs/*\n%endif\n%config(noreplace) %{_sysconfdir}/sysconfig/glusterd\n%if ( 0%{_for_fedora_koji_builds} )\n%config(noreplace) %{_sysconfdir}/sysconfig/glusterfsd\n%endif\n\n# init files\n%glusterd_svcfile\n%if ( 0%{_for_fedora_koji_builds} )\n%glusterfsd_svcfile\n%endif\n%if ( 0%{?_with_systemd:1} )\n%glusterfssharedstorage_svcfile\n%endif\n\n# binaries\n%{_sbindir}/glusterd\n%{_libexecdir}/glusterfs/glfsheal\n%{_sbindir}/gf_attach\n%{_sbindir}/gluster-setgfid2path\n# {_sbindir}/glusterfsd is the actual binary, but glusterfs (client) is a\n# symlink. The binary itself (and symlink) are part of the glusterfs-fuse\n# package, because glusterfs-server depends on that anyway.\n\n# Manpages\n%{_mandir}/man8/gluster-setgfid2path.8*\n\n# xlators\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/arbiter.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/bit-rot.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/bitrot-stub.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/sdfs.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/index.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/locks.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/posix*\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/snapview-server.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/marker.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/simple-quota.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/quota*\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/selinux.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/trash.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/upcall.so\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/features/leases.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/mgmt\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/mgmt/glusterd.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/protocol\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/protocol/server.so\n%dir %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/storage\n     %{_libdir}/glusterfs/%{version}%{?prereltag}/xlator/storage/posix.so\n\n# snap_scheduler\n%{_sbindir}/snap_scheduler.py\n%{_sbindir}/gcron.py\n%{_sbindir}/conf.py\n\n# /var/lib/glusterd, e.g. hookscripts, etc.\n%ghost      %attr(0644,-,-) %config(noreplace) %{_sharedstatedir}/glusterd/glusterd.info\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/bitd\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/groups\n            %attr(0644,-,-) %{_sharedstatedir}/glusterd/groups/virt\n            %attr(0644,-,-) %{_sharedstatedir}/glusterd/groups/metadata-cache\n            %attr(0644,-,-) %{_sharedstatedir}/glusterd/groups/gluster-block\n            %attr(0644,-,-) %{_sharedstatedir}/glusterd/groups/nl-cache\n            %attr(0644,-,-) %{_sharedstatedir}/glusterd/groups/db-workload\n            %attr(0644,-,-) %{_sharedstatedir}/glusterd/groups/distributed-virt\n            %attr(0644,-,-) %{_sharedstatedir}/glusterd/groups/samba\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/glusterfind\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/glusterfind/.keys\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/glustershd\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/add-brick\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/add-brick/post\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/add-brick/post/disabled-quota-root-xattr-heal.sh\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/add-brick/post/S10selinux-label-brick.sh\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/add-brick/post/S13create-subdir-mounts.sh\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/add-brick/pre\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/add-brick/pre/S28Quota-enable-root-xattr-heal.sh\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/create\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/create/post\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/create/post/S10selinux-label-brick.sh\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/create/pre\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/copy-file\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/copy-file/post\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/copy-file/pre\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/delete\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/delete/post\n                            %{_sharedstatedir}/glusterd/hooks/1/delete/post/S57glusterfind-delete-post\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/delete/pre\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/delete/pre/S10selinux-del-fcontext.sh\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/remove-brick\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/remove-brick/post\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/remove-brick/pre\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/reset\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/reset/post\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/reset/pre\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/set\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/set/post\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/set/post/S30samba-set.sh\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/set/post/S32gluster_enable_shared_storage.sh\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/set/pre\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/start\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/start/post\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/start/post/S29CTDBsetup.sh\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/start/post/S30samba-start.sh\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/start/pre\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/stop\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/stop/post\n       %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/stop/pre\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/stop/pre/S30samba-stop.sh\n            %attr(0755,-,-) %{_sharedstatedir}/glusterd/hooks/1/stop/pre/S29CTDB-teardown.sh\n%config(noreplace) %ghost      %attr(0600,-,-) %{_sharedstatedir}/glusterd/options\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/peers\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/quotad\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/scrub\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/snaps\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/ss_brick\n%ghost %dir %attr(0755,-,-) %{_sharedstatedir}/glusterd/vols\n\n# Extra utility script\n%dir %{_libexecdir}/glusterfs\n%dir %{_datadir}/glusterfs/scripts\n     %{_datadir}/glusterfs/scripts/stop-all-gluster-processes.sh\n%if ( 0%{?_with_systemd:1} )\n     %{_libexecdir}/glusterfs/mount-shared-storage.sh\n     %{_datadir}/glusterfs/scripts/control-cpu-load.sh\n     %{_datadir}/glusterfs/scripts/control-mem.sh\n%endif\n\n# Incrementalapi\n     %{_libexecdir}/glusterfs/glusterfind\n%{_bindir}/glusterfind\n     %{_libexecdir}/glusterfs/peer_add_secret_pub\n\n%if ( 0%{?_with_firewalld:1} )\n%{_prefix}/lib/firewalld/services/glusterfs.xml\n%endif\n# end of server files\n%endif\n\n# Events\n%if ( 0%{!?_without_events:1} )\n%files events\n%config(noreplace) %{_sysconfdir}/glusterfs/eventsconfig.json\n%dir %{_sharedstatedir}/glusterd\n%dir %{_sharedstatedir}/glusterd/events\n%dir %{_libexecdir}/glusterfs\n     %{_libexecdir}/glusterfs/gfevents\n     %{_libexecdir}/glusterfs/peer_eventsapi.py*\n%{_sbindir}/glustereventsd\n%{_sbindir}/gluster-eventsapi\n%{_datadir}/glusterfs/scripts/eventsdash.py*\n%if ( 0%{?_with_systemd:1} )\n%{_unitdir}/glustereventsd.service\n%else\n%{_sysconfdir}/init.d/glustereventsd\n%endif\n%endif\n\n%changelog\n* Mon Feb 21 2022 Xavi Hernandez <xhernandez@redhat.com>\n- add openssl as a build dependency.\n\n* Mon Nov 1 2021 Kaleb S. KEITHLEY <kkeithle [at] redhat.com>\n- tcmalloc issues\n\n* Fri Jan 29 2021 Ravishankar N <ravishankar@redhat.com>\n- add liburing-devel as a requirement.\n\n* Thu Nov 26 2020 Shwetha K Acharya <sacharya@redhat.com>\n- Add tar as dependency to georeplication rpm for RHEL version >= 8.3\n\n* Fri Nov 20 2020 Shwetha K Acharya <sacharya@redhat.com>\n- remove ganesha from Obsoletes\n\n* Thu May 14 2020 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- refactor, common practice, Issue #1126\n\n* Mon May 11 2020 Sunny Kumar <sunkumar@redhat.com>\n- added requires policycoreutils-python-utils on rhel8 for geo-replication\n\n* Wed Oct 9 2019 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- remove leftover bd xlator cruft\n\n* Fri Aug 23 2019 Shwetha K Acharya <sacharya@redhat.com>\n- removed {name}-ufs from Obsoletes\n- added  \"< version\" for obsoletes {name}-gnfs and {name}-rdma\n\n* Mon Jul 15 2019 Jiffin Tony Thottan <jthottan@redhat.com>\n- Adding ganesha ha bits back in gluster repository\n\n* Fri Jul 12 2019 Amar Tumballi <amarts@redhat.com>\n- Remove rdma package, and mark older rdma package as 'Obsoletes'\n\n* Fri Jun 14 2019 Niels de Vos <ndevos@redhat.com>\n- always build glusterfs-cli to allow monitoring/managing from clients\n\n* Wed Mar 6 2019 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- remove unneeded ldconfig in scriptlets\n-  reported by Igor Gnatenko in Fedora\n-   https://src.fedoraproject.org/rpms/glusterfs/pull-request/5\n\n* Mon Mar 4 2019 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- s390x has RDMA, since around Fedora 27 and in RHEL7 since June 2016.\n\n* Tue Feb 26 2019 Ashish Pandey <aspandey@redhat.com>\n- Add thin-arbiter package\n\n* Sun Feb 24 2019 Aravinda VK <avishwan@redhat.com>\n- Renamed events package to gfevents\n\n* Thu Feb 21 2019 Jiffin Tony Thottan <jthottan@redhat.com>\n- Obsoleting gluster-gnfs package\n\n* Wed Nov 28 2018 Krutika Dhananjay <kdhananj@redhat.com>\n- Install /var/lib/glusterd/groups/distributed-virt by default\n\n* Tue Nov 13 2018 Niels de Vos <ndevos@redhat.com>\n- Add an option to build with ThreadSanitizer (TSAN)\n\n* Fri Sep 7 2018 Niels de Vos <ndevos@redhat.com>\n- Add an option to build with address sanitizer (ASAN)\n\n* Sun Jul 29 2018 Niels de Vos <ndevos@redhat.com>\n- Disable building glusterfs-resource-agents on el6 (#1609551)\n\n* Thu Feb 22 2018 Kotresh HR <khiremat@redhat.com>\n- Added util-linux as dependency to georeplication rpm (#1544382)\n\n* Thu Feb 1 2018 Niels de Vos <ndevos@redhat.com>\n- Add '--without server' option to facilitate el6 builds (#1074947)\n\n* Wed Jan 24 2018 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- python-ctypes no long exists, now in python stdlib (#1538258)\n\n* Thu Jan 18 2018 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- Fedora 28 glibc has removed rpc headers and rpcgen, use libtirpc\n\n* Mon Dec 25 2017 Niels de Vos <ndevos@redhat.com>\n- Fedora 28 has renamed pyxattr\n\n* Wed Sep 27 2017 Mohit Agrawal <moagrawa@redhat.com>\n- Added control-cpu-load.sh and control-mem.sh scripts to glusterfs-server section(#1496335)\n\n* Tue Aug 22 2017 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- libibverbs-devel, librdmacm-devel -> rdma-core-devel #1483995\n\n* Thu Jul 20 2017 Aravinda VK <avishwan@redhat.com>\n- Added new tool/binary to set the gfid2path xattr on files\n\n* Thu Jul 13 2017 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- various directories not owned by any package\n\n* Fri Jun 16 2017 Jiffin Tony Thottan <jthottan@redhat.com>\n- Add glusterfssharedstorage.service systemd file\n\n* Fri Jun 9 2017 Poornima G <pgurusid@redhat.com>\n- Install /var/lib/glusterd/groups/nl-cache by default\n\n* Wed May 10 2017 Pranith Kumar K <pkarampu@redhat.com>\n- Install /var/lib/glusterd/groups/gluster-block by default\n\n* Thu Apr 27 2017 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- gnfs in an optional subpackage\n\n* Wed Apr 26 2017 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- /var/run/gluster owner gluster:gluster(0775) for qemu(gfapi)\n  statedumps (#1445569)\n\n* Mon Apr 24 2017 Jiffin Tony Thottan <jhottan@redhat.com>\n- Install SELinux hook scripts that manage contexts for bricks (#1047975)\n\n* Thu Apr 20 2017 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- firewalld-filesystem -> firewalld (#1443959)\n\n* Thu Apr 13 2017 Niels de Vos <ndevos@redhat.com>\n- the -regression-tests sub-package needs \"bc\" for some tests (#1442145)\n\n* Mon Mar 20 2017 Niels de Vos <ndevos@redhat.com>\n- Drop dependency on psmisc, pkill is used instead of killall (#1197308)\n\n* Thu Feb 16 2017 Niels de Vos <ndevos@redhat.com>\n- Obsolete and Provide python-gluster for upgrading from glusterfs < 3.10\n\n* Wed Feb 1 2017 Poornima G <pgurusid@redhat.com>\n- Install /var/lib/glusterd/groups/metadata-cache by default\n\n* Wed Jan 18 2017 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- python2 (versus python3) cleanup (#1414902)\n\n* Fri Jan 13 2017 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- switch to storhaug HA\n\n* Fri Jan 6 2017 Niels de Vos <ndevos@redhat.com>\n- use macro provided by firewalld-filesystem to reload firewalld\n\n* Thu Nov 24 2016 Jiffin Tony Thottan <jhottan@redhat.com>\n- remove S31ganesha-reset.sh from hooks (#1397795)\n\n* Thu Sep 22 2016 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- python-ctypes no long exists, now in python stdlib (#1378436)\n\n* Wed Sep 14 2016 Aravinda VK <avishwan@redhat.com>\n- Changed attribute of eventsconfig.json file as same as other configs (#1375532)\n\n* Thu Sep 08 2016 Aravinda VK <avishwan@redhat.com>\n- Added init script for glustereventsd (#1365395)\n\n* Wed Aug 31 2016 Avra Sengupta <asengupt@redhat.com>\n- Added conf.py for snap scheduler\n\n* Wed Aug 31 2016 Aravinda VK <avishwan@redhat.com>\n- Added new Geo-replication utility \"gluster-georep-sshkey\" (#1356508)\n\n* Thu Aug 25 2016 Aravinda VK <avishwan@redhat.com>\n- Added gluster-mountbroker utility for geo-rep mountbroker setup (#1343333)\n\n* Mon Aug 22 2016 Milind Changire <mchangir@redhat.com>\n- Add psmisc as dependency for glusterfs-fuse for killall command (#1367665)\n\n* Thu Aug 4 2016 Jiffin Tony Thottan <jthottan@redhat.com>\n- Remove ganesha.so from client xlators\n\n* Sun Jul 31 2016 Soumya Koduri <skoduri@redhat.com>\n- Add dependency on portblock resource agent for ganesha package (#1354439)\n\n* Mon Jul 18 2016 Aravinda VK <avishwan@redhat.com>\n- Added new subpackage events(glusterfs-events) (#1334044)\n\n* Fri Jul 15 2016 Aravinda VK <avishwan@redhat.com>\n- Removed \".py\" extension from symlink(S57glusterfind-delete-post)(#1356868)\n\n* Thu Jul 14 2016 Aravinda VK <avishwan@redhat.com>\n- Removed extra packaging line of cliutils(python-gluster)(#1342356)\n\n* Mon Jul 11 2016 Aravinda VK <avishwan@redhat.com>\n- Added Python subpackage \"cliutils\" under gluster\n\n* Tue May 31 2016 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- broken brp-python-bytecompile in RHEL7 results in installed\n  but unpackaged files.\n\n* Fri May 6 2016 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- additional dirs and files in /var/lib/glusterd/... (#1326410)\n\n* Tue Apr 26 2016 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- %%postun libs w/o firewalld on RHEL6 (#1330583)\n\n* Tue Apr 12 2016 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- additional dirs and files in /var/lib/glusterd/... (#1326410)\n\n* Mon Mar 7 2016 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- %%pre, %%post etc. scriptlet cleanup, ... -p /sbin/ldconfig (#1315024)\n\n* Fri Jan 22 2016 Aravinda VK <avishwan@redhat.com>\n- Added schedule_georep.py script to the glusterfs-geo-replication (#1300956)\n\n* Sat Jan 16 2016 Niels de Vos <ndevos@redhat.com>\n- glusterfs-server depends on -api (#1296931)\n\n* Sun Jan 10 2016 Niels de Vos <ndevos@redhat.com>\n- build system got fixed so that special glupy build is not needed anymore\n\n* Mon Dec 28 2015 Niels de Vos <ndevos@redhat.com>\n- hook scripts in glusterfs-ganesha use dbus-send, add dependency (#1294446)\n\n* Tue Dec 22 2015 Niels de Vos <ndevos@redhat.com>\n- move hook scripts for nfs-ganesha to the -ganesha sub-package\n- use standard 'make' installation for the hook scripts (#1174765)\n\n* Tue Sep 1 2015 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- erroneous ghost of ../hooks/1/delete causes install failure (#1258975)\n\n* Tue Aug 25 2015 Anand Nekkunti <anekkunt@redhat.com>\n- adding glusterfs-firewalld service (#1253967)\n\n* Tue Aug 18 2015 Niels de Vos <ndevos@redhat.com>\n- Include missing directories for glusterfind hooks scripts (#1225465)\n\n* Mon Jun 15 2015 Niels de Vos <ndevos@redhat.com>\n- Replace hook script S31ganesha-set.sh by S31ganesha-start.sh (#1231738)\n\n* Fri Jun 12 2015 Aravinda VK <avishwan@redhat.com>\n- Added rsync as dependency to georeplication rpm (#1231205)\n\n* Tue Jun 02 2015 Aravinda VK <avishwan@redhat.com>\n- Added post hook for volume delete as part of glusterfind (#1225465)\n\n* Wed May 27 2015 Aravinda VK <avishwan@redhat.com>\n- Added stop-all-gluster-processes.sh in glusterfs-server section (#1204641)\n\n* Wed May 20 2015 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- python-gluster should be 'noarch' (#1219954)\n\n* Wed May 20 2015 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- move libgf{db,changelog}.pc from -api-devel to -devel (#1223385)\n\n* Wed May 20 2015 Anand Nekkunti <anekkunt@redhat.com>\n- glusterd.socket file cleanup during post run upgrade (#1210404)\n\n* Tue May 19 2015 Avra Sengupta <asengupt@redhat.com>\n- Added S32gluster_enable_shared_storage.sh as volume set hook script (#1222013)\n\n* Mon May 18 2015 Milind Changire <mchangir@redhat.com>\n- Move file peer_add_secret_pub to the server RPM to support glusterfind (#1221544)\n* Sun May 17 2015 Niels de Vos <ndevos@redhat.com>\n- Fix building on RHEL-5 based distributions (#1222317)\n\n* Tue May 05 2015 Niels de Vos <ndevos@redhat.com>\n- Introduce glusterfs-client-xlators to reduce dependencies (#1195947)\n\n* Wed Apr 15 2015 Humble Chirammal <hchiramm@redhat.com>\n- Introducing python-gluster package to own gluster namespace in sitelib (#1211848)\n\n* Sat Mar 28 2015 Mohammed Rafi KC <rkavunga@redhat.com>\n- Add dependency for librdmacm version >= 1.0.15 (#1206744)\n\n* Tue Mar 24 2015 Niels de Vos <ndevos@redhat.com>\n- move libgfdb (with sqlite dependency) to -server subpackage (#1194753)\n\n* Tue Mar 17 2015 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- glusterfs-ganesha sub-package\n\n* Thu Mar 12 2015 Kotresh H R <khiremat@redhat.com>\n- gfind_missing_files tool is included (#1187140)\n\n* Tue Mar 03 2015 Aravinda VK <avishwan@redhat.com>\n- Included glusterfind files as part of server package.\n\n* Sun Mar 1 2015 Avra Sengupta <asengupt@redhat.com>\n- Added installation of snap-scheduler\n\n* Thu Feb 26 2015 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- enable cmocka unittest support only when asked for (#1067059)\n\n* Tue Feb 24 2015 Niels de Vos <ndevos@redhat.com>\n- POSIX ACL conversion needs BuildRequires libacl-devel (#1185654)\n\n* Wed Feb 18 2015 Andreas Schneider <asn@redhat.com>\n- Change cmockery2 to cmocka.\n\n* Wed Feb 18 2015 Kaushal M <kaushal@redhat.com>\n- add userspace-rcu as a requirement\n\n* Fri Feb 13 2015 Gaurav Kumar Garg <ggarg@redhat.com>\n- .cmd_log_history file should be renamed to cmd_history.log post\n  upgrade (#1165996)\n\n* Fri Jan 30 2015 Nandaja Varma <nvarma@redhat.com>\n- remove checks for rpmbuild/mock from run-tests.sh (#178008)\n\n* Fri Jan 16 2015 Niels de Vos <ndevos@redhat.com>\n- add support for /run/gluster through a tmpfiles.d config file (#1182934)\n\n* Tue Jan 6 2015 Aravinda VK<avishwan@redhat.com>\n- Added new libexec script for mountbroker user management (peer_mountbroker)\n\n* Fri Dec 12 2014 Niels de Vos <ndevos@redhat.com>\n- do not package all /usr/share/glusterfs/* files in regression-tests (#1169005)\n\n* Fri Sep 26 2014 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- smarter logic in %%post server (#1146426)\n\n* Wed Sep 24 2014 Balamurugan Arumugam <barumuga@redhat.com>\n- remove /sbin/ldconfig as interpreter (#1145989)\n\n* Fri Sep 5 2014 Lalatendu Mohanty <lmohanty@redhat.com>\n- Changed the description as \"GlusterFS a distributed filesystem\"\n\n* Tue Aug 5 2014 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- logrotate files (#1126832)\n\n* Wed Jul 16 2014 Luis Pabon <lpabon@redhat.com>\n- Added cmockery2 dependency\n\n* Fri Jun 27 2014 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- killall --wait in %%post server, (#1113543)\n\n* Thu Jun 19 2014 Humble Chirammal <hchiramm@redhat.com>\n- Added dynamic loading of fuse module with glusterfs-fuse package installation in el5.\n\n* Thu Jun 12 2014 Varun Shastry <vshastry@redhat.com>\n- Add bash completion config to the cli package\n\n* Tue Jun 03 2014 Vikhyat Umrao <vumrao@redhat.com>\n- add nfs-utils package dependency for server package (#1065654)\n\n* Thu May 22 2014 Poornima G <pgurusid@redhat.com>\n- Rename old hookscripts in an RPM-standard way.\n\n* Tue May 20 2014 Niels de Vos <ndevos@redhat.com>\n- Almost drop calling ./autogen.sh\n\n* Fri Apr 25 2014 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- Sync with Fedora spec (#1091408, #1091392)\n\n* Fri Apr 25 2014 Arumugam Balamurugan <barumuga@redhat.com>\n- fix RHEL 7 build failure \"Installed (but unpackaged) file(s) found\" (#1058188)\n\n* Wed Apr 02 2014 Arumugam Balamurugan <barumuga@redhat.com>\n- cleanup to rearrange spec file elements\n\n* Wed Apr 02 2014 Arumugam Balamurugan <barumuga@redhat.com>\n- add version/release dynamically (#1074919)\n\n* Thu Mar 27 2014 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- attr dependency (#1184626)\n\n* Wed Mar 26 2014 Poornima G <pgurusid@redhat.com>\n- Include the hook scripts of add-brick, volume start, stop and set\n\n* Wed Feb 26 2014 Niels de Vos <ndevos@redhat.com>\n- Drop glusterfs-devel dependency from glusterfs-api (#1065750)\n\n* Wed Feb 19 2014 Justin Clift <justin@gluster.org>\n- Rename gluster.py to glupy.py to avoid namespace conflict (#1018619)\n- Move the main Glupy files into glusterfs-extra-xlators rpm\n- Move the Glupy Translator examples into glusterfs-devel rpm\n\n* Thu Feb 06 2014 Aravinda VK <avishwan@redhat.com>\n- Include geo-replication upgrade scripts and hook scripts.\n\n* Wed Jan 15 2014 Niels de Vos <ndevos@redhat.com>\n- Install /var/lib/glusterd/groups/virt by default\n\n* Sat Jan 4 2014 Niels de Vos <ndevos@redhat.com>\n- The main glusterfs package should not provide glusterfs-libs (#1048489)\n\n* Tue Dec 10 2013 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- Sync with Fedora glusterfs.spec 3.5.0-0.1.qa3\n\n* Fri Oct 11 2013 Harshavardhana <fharshav@redhat.com>\n- Add '_sharedstatedir' macro to `/var/lib` on <= RHEL5 (#1003184)\n\n* Wed Oct 9 2013 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- Sync with Fedora glusterfs.spec 3.4.1-2+\n\n* Wed Oct 9 2013 Niels de Vos <ndevos@redhat.com>\n- glusterfs-api-devel requires glusterfs-devel (#1016938, #1017094)\n\n* Mon Sep 30 2013 Niels de Vos <ndevos@redhat.com>\n- Package gfapi.py into the Python site-packages path (#1005146)\n\n* Tue Sep 17 2013 Harshavardhana <fharshav@redhat.com>\n- Provide a new package called \"glusterfs-regression-tests\" for standalone\n  regression testing.\n\n* Thu Aug 22 2013 Niels de Vos <ndevos@redhat.com>\n- Correct the day/date for some entries in this changelog (#1000019)\n\n* Wed Aug 7 2013 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- Sync with Fedora glusterfs.spec\n-  add Requires\n-  add -cli subpackage,\n-  fix other minor differences with Fedora glusterfs.spec\n\n* Tue Jul 30 2013 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- Sync with Fedora glusterfs.spec, add glusterfs-libs RPM for oVirt/qemu-kvm\n\n* Thu Jul 25 2013 Csaba Henk <csaba@redhat.com>\n- Added peer_add_secret_pub and peer_gsec_create to %%{_libexecdir}/glusterfs\n\n* Thu Jul 25 2013 Aravinda VK <avishwan@redhat.com>\n- Added gverify.sh to %%{_libexecdir}/glusterfs directory.\n\n* Thu Jul 25 2013 Harshavardhana <fharshav@redhat.com>\n- Allow to build with '--without bd' to disable 'bd' xlator\n\n* Thu Jun 27 2013 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- fix the hardening fix for shlibs, use %%sed macro, shorter ChangeLog\n\n* Wed Jun 26 2013 Niels de Vos <ndevos@redhat.com>\n- move the mount/api xlator to glusterfs-api\n\n* Fri Jun 7 2013 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- Sync with Fedora glusterfs.spec, remove G4S/UFO and Swift\n\n* Mon Mar 4 2013 Niels de Vos <ndevos@redhat.com>\n- Package /var/run/gluster so that statedumps can be created\n\n* Wed Feb 6 2013 Kaleb S. KEITHLEY <kkeithle@redhat.com>\n- Sync with Fedora glusterfs.spec\n\n* Tue Dec 11 2012 Filip Pytloun <filip.pytloun@gooddata.com>\n- add sysconfig file\n\n* Thu Oct 25 2012 Niels de Vos <ndevos@redhat.com>\n- Add a sub-package for the OCF resource agents\n\n* Wed Sep 05 2012 Niels de Vos <ndevos@redhat.com>\n- Don't use python-ctypes on SLES (from JÃ¶rg Petersen)\n\n* Tue Jul 10 2012 Niels de Vos <ndevos@redhat.com>\n- Include extras/clear_xattrs.sh in the glusterfs-server sub-package\n\n* Thu Jun 07 2012 Niels de Vos <ndevos@redhat.com>\n- Mark /var/lib/glusterd as owned by glusterfs, subdirs belong to -server\n\n* Wed May 9 2012 Kaleb S. KEITHLEY <kkeithle[at]redhat.com>\n- Add BuildRequires: libxml2-devel so that configure will DTRT on for\n- Fedora's Koji build system\n\n* Wed Nov 9 2011 Joe Julian <me@joejulian.name> - git master\n- Merge fedora specfile into gluster's spec.in.\n- Add conditionals to allow the same spec file to be used for both 3.1 and 3.2\n- http://bugs.gluster.com/show_bug.cgi?id=2970\n\n* Wed Oct  5 2011 Joe Julian <me@joejulian.name> - 3.2.4-1\n- Update to 3.2.4\n- Removed the $local_fs requirement from the init scripts as in RHEL/CentOS that's provided\n- by netfs, which needs to be started after glusterd.\n\n* Sun Sep 25 2011 Joe Julian <me@joejulian.name> - 3.2.3-2\n- Merged in upstream changes\n- Fixed version reporting 3.2git\n- Added nfs init script (disabled by default)\n\n* Thu Sep  1 2011 Joe Julian <me@joejulian.name> - 3.2.3-1\n- Update to 3.2.3\n\n* Tue Jul 19 2011 Joe Julian <me@joejulian.name> - 3.2.2-3\n- Add readline and libtermcap dependencies\n\n* Tue Jul 19 2011 Joe Julian <me@joejulian.name> - 3.2.2-2\n- Critical patch to prevent glusterd from walking outside of its own volume during rebalance\n\n* Thu Jul 14 2011 Joe Julian <me@joejulian.name> - 3.2.2-1\n- Update to 3.2.2\n\n* Wed Jul 13 2011 Joe Julian <me@joejulian.name> - 3.2.1-2\n- fix hardcoded path to gsyncd in source to match the actual file location\n\n* Tue Jun 21 2011 Joe Julian <me@joejulian.name> - 3.2.1\n- Update to 3.2.1\n\n* Mon Jun 20 2011 Joe Julian <me@joejulian.name> - 3.1.5\n- Update to 3.1.5\n\n* Tue May 31 2011 Joe Julian <me@joejulian.name> - 3.1.5-qa1.4\n- Current git\n\n* Sun May 29 2011 Joe Julian <me@joejulian.name> - 3.1.5-qa1.2\n- set _sharedstatedir to /var/lib for FHS compliance in RHEL5/CentOS5\n- mv /etc/glusterd, if it exists, to the new state dir for upgrading from gluster packaging\n\n* Sat May 28 2011 Joe Julian <me@joejulian.name> - 3.1.5-qa1.1\n- Update to 3.1.5-qa1\n- Add patch to remove optimization disabling\n- Add patch to remove forced 64 bit compile\n- Obsolete glusterfs-core to allow for upgrading from gluster packaging\n\n* Sat Mar 19 2011 Jonathan Steffan <jsteffan@fedoraproject.org> - 3.1.3-1\n- Update to 3.1.3\n- Merge in more upstream SPEC changes\n- Remove patches from GlusterFS bugzilla #2309 and #2311\n- Remove inode-gen.patch\n\n* Sun Feb 06 2011 Jonathan Steffan <jsteffan@fedoraproject.org> - 3.1.2-3\n- Add back in legacy SPEC elements to support older branches\n\n* Thu Feb 03 2011 Jonathan Steffan <jsteffan@fedoraproject.org> - 3.1.2-2\n- Add patches from CloudFS project\n\n* Tue Jan 25 2011 Jonathan Steffan <jsteffan@fedoraproject.org> - 3.1.2-1\n- Update to 3.1.2\n\n* Wed Jan 5 2011 Dan HorÃ¡k <dan[at]danny.cz> - 3.1.1-3\n- no InfiniBand on s390(x)\n\n* Sat Jan 1 2011 Jonathan Steffan <jsteffan@fedoraproject.org> - 3.1.1-2\n- Update to support readline\n- Update to not parallel build\n\n* Mon Dec 27 2010 Silas Sewell <silas@sewell.ch> - 3.1.1-1\n- Update to 3.1.1\n- Change package names to mirror upstream\n\n* Mon Dec 20 2010 Jonathan Steffan <jsteffan@fedoraproject.org> - 3.0.7-1\n- Update to 3.0.7\n\n* Wed Jul 28 2010 Jonathan Steffan <jsteffan@fedoraproject.org> - 3.0.5-1\n- Update to 3.0.x\n\n* Sat Apr 10 2010 Jonathan Steffan <jsteffan@fedoraproject.org> - 2.0.9-2\n- Move python version requires into a proper BuildRequires otherwise\n  the spec always turned off python bindings as python is not part\n  of buildsys-build and the chroot will never have python unless we\n  require it\n- Temporarily set -D_FORTIFY_SOURCE=1 until upstream fixes code\n  GlusterFS Bugzilla #197 (#555728)\n- Move glusterfs-volgen to devel subpackage (#555724)\n- Update description (#554947)\n\n* Sat Jan 2 2010 Jonathan Steffan <jsteffan@fedoraproject.org> - 2.0.9-1\n- Update to 2.0.9\n\n* Sun Nov 8 2009 Jonathan Steffan <jsteffan@fedoraproject.org> - 2.0.8-1\n- Update to 2.0.8\n- Remove install of glusterfs-volgen, it's properly added to\n  automake upstream now\n\n* Sat Oct 31 2009 Jonathan Steffan <jsteffan@fedoraproject.org> - 2.0.7-1\n- Update to 2.0.7\n- Install glusterfs-volgen, until it's properly added to automake\n  by upstream\n- Add macro to be able to ship more docs\n\n* Thu Sep 17 2009 Peter Lemenkov <lemenkov@gmail.com> 2.0.6-2\n- Rebuilt with new fuse\n\n* Sat Sep 12 2009 Matthias Saou <http://freshrpms.net/> 2.0.6-1\n- Update to 2.0.6.\n- No longer default to disable the client on RHEL5 (#522192).\n- Update spec file URLs.\n\n* Mon Jul 27 2009 Matthias Saou <http://freshrpms.net/> 2.0.4-1\n- Update to 2.0.4.\n\n* Thu Jun 11 2009 Matthias Saou <http://freshrpms.net/> 2.0.1-2\n- Remove libglusterfs/src/y.tab.c to fix koji F11/devel builds.\n\n* Sat May 16 2009 Matthias Saou <http://freshrpms.net/> 2.0.1-1\n- Update to 2.0.1.\n\n* Thu May  7 2009 Matthias Saou <http://freshrpms.net/> 2.0.0-1\n- Update to 2.0.0 final.\n\n* Wed Apr 29 2009 Matthias Saou <http://freshrpms.net/> 2.0.0-0.3.rc8\n- Move glusterfsd to common, since the client has a symlink to it.\n\n* Fri Apr 24 2009 Matthias Saou <http://freshrpms.net/> 2.0.0-0.2.rc8\n- Update to 2.0.0rc8.\n\n* Sun Apr 12 2009 Matthias Saou <http://freshrpms.net/> 2.0.0-0.2.rc7\n- Update glusterfsd init script to the new style init.\n- Update files to match the new default vol file names.\n- Include logrotate for glusterfsd, use a pid file by default.\n- Include logrotate for glusterfs, using killall for lack of anything better.\n\n* Sat Apr 11 2009 Matthias Saou <http://freshrpms.net/> 2.0.0-0.1.rc7\n- Update to 2.0.0rc7.\n- Rename \"libs\" to \"common\" and move the binary, man page and log dir there.\n\n* Tue Feb 24 2009 Fedora Release Engineering <rel-eng@lists.fedoraproject.org>\n- Rebuilt for https://fedoraproject.org/wiki/Fedora_11_Mass_Rebuild\n\n* Mon Feb 16 2009 Matthias Saou <http://freshrpms.net/> 2.0.0-0.1.rc1\n- Update to 2.0.0rc1.\n- Include new libglusterfsclient.h.\n\n* Mon Feb 16 2009 Matthias Saou <http://freshrpms.net/> 1.3.12-1\n- Update to 1.3.12.\n- Remove no longer needed ocreat patch.\n\n* Thu Jul 17 2008 Matthias Saou <http://freshrpms.net/> 1.3.10-1\n- Update to 1.3.10.\n- Remove mount patch, it's been included upstream now.\n\n* Fri May 16 2008 Matthias Saou <http://freshrpms.net/> 1.3.9-1\n- Update to 1.3.9.\n\n* Fri May  9 2008 Matthias Saou <http://freshrpms.net/> 1.3.8-1\n- Update to 1.3.8 final.\n\n* Wed Apr 23 2008 Matthias Saou <http://freshrpms.net/> 1.3.8-0.10\n- Include short patch to include fixes from latest TLA 751.\n\n* Tue Apr 22 2008 Matthias Saou <http://freshrpms.net/> 1.3.8-0.9\n- Update to 1.3.8pre6.\n- Include glusterfs binary in both the client and server packages, now that\n  glusterfsd is a symlink to it instead of a separate binary.\n* Sun Feb  3 2008 Matthias Saou <http://freshrpms.net/> 1.3.8-0.8\n- Add python version check and disable bindings for version < 2.4.\n\n* Sun Feb  3 2008 Matthias Saou <http://freshrpms.net/> 1.3.8-0.7\n- Add --without client rpmbuild option, make it the default for RHEL (no fuse).\n  (I hope \"rhel\" is the proper default macro name, couldn't find it...)\n\n* Wed Jan 30 2008 Matthias Saou <http://freshrpms.net/> 1.3.8-0.6\n- Add --without ibverbs rpmbuild option to the package.\n\n* Mon Jan 14 2008 Matthias Saou <http://freshrpms.net/> 1.3.8-0.5\n- Update to current TLA again, patch-636 which fixes the known segfaults.\n\n* Thu Jan 10 2008 Matthias Saou <http://freshrpms.net/> 1.3.8-0.4\n- Downgrade to glusterfs--mainline--2.5--patch-628 which is more stable.\n\n* Tue Jan  8 2008 Matthias Saou <http://freshrpms.net/> 1.3.8-0.3\n- Update to current TLA snapshot.\n- Include umount.glusterfs wrapper script (really needed? dunno).\n- Include patch to mount wrapper to avoid multiple identical mounts.\n\n* Sun Dec 30 2007 Matthias Saou <http://freshrpms.net/> 1.3.8-0.1\n- Update to current TLA snapshot, which includes \"volume-name=\" fstab option.\n\n* Mon Dec  3 2007 Matthias Saou <http://freshrpms.net/> 1.3.7-6\n- Re-add the /var/log/glusterfs directory in the client sub-package (required).\n- Include custom patch to support vol= in fstab for -n glusterfs client option.\n\n* Mon Nov 26 2007 Matthias Saou <http://freshrpms.net/> 1.3.7-4\n- Re-enable libibverbs.\n- Check and update License field to GPLv3+.\n- Add glusterfs-common obsoletes, to provide upgrade path from old packages.\n- Include patch to add mode to O_CREATE opens.\n\n* Thu Nov 22 2007 Matthias Saou <http://freshrpms.net/> 1.3.7-3\n- Remove Makefile* files from examples.\n- Include RHEL/Fedora type init script, since the included ones don't do.\n\n* Wed Nov 21 2007 Matthias Saou <http://freshrpms.net/> 1.3.7-1\n- Major spec file cleanup.\n- Add missing %%clean section.\n- Fix ldconfig calls (weren't set for the proper sub-package).\n\n* Sat Aug 4 2007 Matt Paine <matt@mattsoftware.com> - 1.3.pre7\n- Added support to build rpm without ibverbs support (use --without ibverbs\n  switch)\n\n* Sun Jul 15 2007 Matt Paine <matt@mattsoftware.com> - 1.3.pre6\n- Initial spec file\n"
        },
        {
          "name": "glusterfsd",
          "type": "tree",
          "content": null
        },
        {
          "name": "heal",
          "type": "tree",
          "content": null
        },
        {
          "name": "libgfchangelog.pc.in",
          "type": "blob",
          "size": 0.3408203125,
          "content": "prefix=@prefix@\nexec_prefix=@exec_prefix@\nlibdir=@libdir@\nincludedir=@includedir@\n\n\nName: libgfchangelog\nDescription: GlusterFS Changelog Consumer Library\nVersion: @LIBGFCHANGELOG_VERSION@\nRequires: @PKGCONFIG_UUID@\nLibs: -L${libdir} -lgfchangelog -lglusterfs\nCflags: -I${includedir} -D_FILE_OFFSET_BITS=64 -D__USE_FILE_OFFSET64 -D__USE_LARGEFILE64\n"
        },
        {
          "name": "libglusterfs",
          "type": "tree",
          "content": null
        },
        {
          "name": "rfc.sh",
          "type": "blob",
          "size": 10.1953125,
          "content": "#!/bin/sh -e\n# Since we run with '#!/bin/sh -e'\n#   '$? != 0' will force an exit,\n# i.e. where we are interested in the result of a command,\n# we have to run the command in an if-statement.\n\nUPSTREAM=${GLUSTER_UPSTREAM}\nif [ \"x$UPSTREAM\" = \"x\" ]; then\n    for rmt in $(git remote); do\n\trmt_repo=$(LANGUAGE=en_US.UTF-8 git remote show $rmt -n | grep Fetch | awk '{ print $3 }');\n\tif [ \"${rmt_repo%.git}\" = \"git@github.com:gluster/glusterfs\" ]; then\n\t    UPSTREAM=$rmt\n\t    echo \"Picked ${UPSTREAM} as upstream remote\"\n\t    break\n\tfi\n    done\n    if [ \"x$UPSTREAM\" = \"x\" ]; then\n        echo \"No git remote detected for git@github.com:gluster/glusterfs.git\"\n        echo \"\"\n        echo \"Exiting.\"\n        exit 1\n    fi\nfi\n\nUSER_REPO=${GLUSTER_USER_REPO:-origin}\nif [ \"x${USER_REPO}\" = \"x${UPSTREAM}\" ] ; then\n    echo \"When you submit patches, it should get submitted to your fork, not to upstream directly\"\n    echo \"If you are not sure, check `for rmt in $(git remote); do git remote show $rmt -n; done`\"\n    echo \"And pick the correct remote you would like to push to and do `export GLUSTER_USER_REPO=$rmt`\"\n    echo \"\"\n    echo \"Exiting...\"\n    exit 1\nfi\n\necho \"Picked ${USER_REPO} as user's remote\";\n\nFORCE=\"\";\nwhile getopts \"vf\" opt; do\n    case $opt in\n        v)\n            # Verbose mode\n            git () { >&2 echo \"git $@\" && `which git` $@; }\n            ;;\n        f)\n            # Use force to git push\n\t    FORCE=\"--force\";\n            ;;\n    esac\ndone\n# Move the positional arguments to the beginning\nshift $((OPTIND-1))\n\n\nbranch=\"devel\";\n\nset_hooks_commit_msg()\n{\n    f=\".git/hooks/commit-msg\";\n    u=\"http://review.gluster.org/tools/hooks/commit-msg\";\n\n    if [ -x \"$f\" ]; then\n        return;\n    fi\n\n    curl -L -o $f $u || wget -O $f $u;\n\n    chmod +x $f\n\n    # Let the 'Change-Id: ' header get assigned on first run of rfc.sh\n    GIT_EDITOR=true git commit --amend;\n}\n\n\nis_num()\n{\n    local num;\n\n    num=\"$1\";\n\n    [ -z \"$(echo $num | sed -e 's/[0-9]//g')\" ]\n}\n\nbackport_id_message()\n{\n    echo \"\"\n    echo \"This commit is to a non-devel branch, and hence is treated as a backport.\"\n    echo \"\"\n    echo \"For backports we would like to retain the same gerrit Change-Id across\"\n    echo \"branches. On auto inspection it is found that a gerrit Change-Id is\"\n    echo \"missing, or the Change-Id is not found on your local devel branch\"\n    echo \"\"\n    echo \"This could mean a few things:\"\n    echo \"    1. This is not a backport, hence choose Y on the prompt to proceed\"\n    echo \"    2. Your $USER_REPO/devel is not up to date, hence the script is unable\"\n    echo \"       to find the corresponding Change-Id on devel. Either choose N,\"\n    echo \"       'git fetch', and try again, OR if you are sure you used the\"\n    echo \"       same Change-Id, choose Y at the prompt to proceed\"\n    echo \"    3. You commented or removed the Change-Id in your commit message after\"\n    echo \"       cherry picking the commit. Choose N, fix the commit message to\"\n    echo \"       use the same Change-Id as 'devel' (git commit --amend), resubmit\"\n    echo \"\"\n}\n\ncheck_backport()\n{\n    moveon='N'\n\n    # Backports are never made to 'devel'\n    if [ $branch = \"devel\" ]; then\n        return;\n    fi\n\n    # Extract the change ID from the commit message\n    changeid=$(git log -n1 --format='%b' | grep -i '^Change-Id: ' | awk '{print $2}')\n\n    # If there is no change ID ask if we should continue\n    if [ -z \"$changeid\" ]; then\n        backport_id_message;\n        echo -n \"Did not find a Change-Id for a possible backport. Continue (y/N): \"\n        read moveon\n    else\n        # Search 'devel' for the same change ID (rebase_changes has run, so we\n        # should never not find a Change-Id)\n        mchangeid=$(git log ${UPSTREAM}/devel --format='%b' --grep=\"^Change-Id: ${changeid}\" | grep ${changeid} | awk '{print $2}')\n\n        # Check if we found the change ID on 'devel', else throw a message to\n        # decide if we should continue.\n        # NOTE: If 'devel' was not rebased, we will not find the Change-ID and\n        # could hit a false positive case here (or if someone checks out some\n        # other branch as 'devel').\n        if [ \"${mchangeid}\" = \"${changeid}\" ]; then\n            moveon=\"Y\"\n        else\n            backport_id_message;\n            echo \"Change-Id of commit: $changeid\"\n            echo \"Change-Id on devel: $mchangeid\"\n            echo -n \"Did not find mentioned Change-Id on 'devel' for a possible backport. Continue (y/N): \"\n            read moveon\n        fi\n    fi\n\n    if [ \"${moveon}\" = 'Y' ] || [ \"${moveon}\" = 'y' ]; then\n        return;\n    else\n        exit 1\n    fi\n}\n\n\nrebase_changes()\n{\n    GIT_EDITOR=$0 git rebase -i $UPSTREAM/$branch;\n}\n\n\n# Regex elaborated:\n#   grep options:\n#     -w -> --word-regexp (from the man page)\n#        Select only those lines containing matches that form whole words.\n#        The test is that the matching substring must either be at the\n#        beginning of the line, or preceded by a  non-word  constituent\n#        character.  Similarly, it must be either at the end of the line or\n#        followed by a non-word constituent character.  Word-constituent\n#        characters are letters, digits, and the underscore.\n#\n#        IOW, the above helps us find the pattern with leading or training\n#        spaces or non word consituents like , or ;\n#\n#     -i -> --ignore-case (case insensitive search)\n#\n#     -o -> --only-matching (only print matching portion of the line)\n#\n#     -E -> --extended-regexp (use extended regular expression)\n#\n#   ^\n#      The search begins at the start of each line\n#\n#   [[:space:]]*\n#      Any number of spaces is accepted\n#\n#   (Fixes|Updates)\n#      Finds 'Fixes' OR 'Updates' in any case combination\n#\n#   (:)?\n#      Followed by an optional : (colon)\n#\n#   [[:space:]]+\n#      Followed by 1 or more spaces\n#\n#   #\n#      Followed by #\n#\n#   [[:digit:]]+\n#      Followed by 1 or more digits\nREFRE=\"^[[:space:]]*(Fixes|Updates)(:)?[[:space:]]+#[[:digit:]]+\"\n\neditor_mode()\n{\n    if [ $(basename \"$1\") = \"git-rebase-todo\" ]; then\n        sed 's/^pick /reword /g' \"$1\" > $1.new && mv $1.new $1;\n        return;\n    fi\n\n    if [ $(basename \"$1\") = \"COMMIT_EDITMSG\" ]; then\n        # see note above function warn_reference_missing for regex elaboration\n        # Lets first check for github issues\n        ref=$(git log -n1 --format='%b' | grep -iow -E \"${REFRE}\" | awk -F '#' '{print $2}');\n        if [ \"x${ref}\" != \"x\" ]; then\n            return;\n        fi\n\n        while true; do\n            echo Commit: \"\\\"$(head -n 1 $1)\\\"\"\n            echo -n \"Github Issue ID: \"\n            read issue\n            if [ -z \"$issue\" ]; then\n                return;\n            fi\n            if ! is_num \"$issue\"; then\n                echo \"Invalid Github Issue ID!!!\";\n                continue;\n            fi\n\n            echo \"Select yes '(y)' if this patch fixes the issue/feature completely,\"\n            echo -n \"or is the last of the patchset which brings feature (Y/n): \"\n            read fixes\n            fixes_string=\"Fixes\"\n            if [ \"${fixes}\" = 'N' ] || [ \"${fixes}\" = 'n' ]; then\n                fixes_string=\"Updates\"\n            fi\n\n            sed \"/^Change-Id:/{p; s/^.*$/${fixes_string}: #${issue}/;}\" $1 > $1.new && \\\n                mv $1.new $1;\n            return;\n        done\n    fi\n\n    cat <<EOF\n$0 - editor_mode called on unrecognized file $1 with content:\n$(cat $1)\nEOF\n    return 1;\n}\n\n\nassert_diverge()\n{\n    git diff $UPSTREAM/$branch..HEAD | grep -q .;\n}\n\n\nwarn_reference_missing()\n{\n    echo \"\"\n    echo \"=== Missing a reference in commit! ===\"\n    echo \"\"\n    echo \"Gluster commits are made with a reference to a github issue\"\n    echo \"\"\n    echo \"A check on the commit message, reveals that there is no \"\n    echo \"github issue referenced in the commit message.\"\n    echo \"\"\n    echo \"https://github.com/gluster/glusterfs/issues/new\"\n    echo \"\"\n    echo \"Please open an issue and reference the same in the commit message \"\n    echo \"using the following tags:\"\n    echo \"\"\n    echo \"\\\"Fixes: #NNNN\\\" OR \\\"Updates: #NNNN\\\",\"\n    echo \"where NNNN is the issue id\"\n    echo \"\"\n    echo \"You may abort the submission choosing 'N' below and use\"\n    echo \"'git commit --amend' to add the issue reference before posting\"\n    echo \"to gerrit.\"\n    echo \"\"\n    echo -n \"Missing reference to a github issue. Continue (y/N): \"\n    read moveon\n    if [ \"${moveon}\" = 'Y' ] || [ \"${moveon}\" = 'y' ]; then\n        return;\n    else\n        exit 1\n    fi\n}\n\nmain()\n{\n    set_hooks_commit_msg;\n\n    # rfc.sh calls itself from rebase_changes, which uses rfc.sh as the EDITOR\n    # thus, getting the commit message to work with in the editor_mode.\n    if [ -e \"$1\" ]; then\n        editor_mode \"$@\";\n        return;\n    fi\n\n    git fetch $UPSTREAM;\n\n    rebase_changes;\n\n    check_backport;\n\n    assert_diverge;\n\n    # see note above variable REFRE for regex elaboration\n    reference=$(git log -n1 --format='%b' | grep -iow -E \"${REFRE}\" | awk -F '#' '{print $2}');\n\n    # If this is a commit against 'devel' and does not have a github\n    # issue reference. Warn the contributor that one of the 2 is required\n    if [ -z \"${reference}\" ] && [ $branch = \"devel\" ]; then\n        warn_reference_missing;\n    fi\n\n    # TODO: add clang-format command here. It will after the changes are done everywhere else\n    clang_format=$(clang-format --version)\n    if [ ! -z \"${clang_format}\" ]; then\n        # Considering git show may not give any files as output matching the\n        # criteria, good to tell script not to fail on error\n        set +e\n        list_of_files=$(git show --pretty=\"format:\" --name-only |\n                            grep -v \"contrib/\" | egrep --color=never \"*\\.[ch]$\");\n        if [ ! -z \"${list_of_files}\" ]; then\n            echo \"${list_of_files}\" | xargs clang-format -i\n        fi\n        set -e\n    else\n        echo \"High probability of your patch not passing smoke due to coding standard check\"\n        echo \"Please install 'clang-format' to format the patch before submitting\"\n    fi\n\n    if [ \"$DRY_RUN\" = 1 ]; then\n        drier='echo -e Please use the following command to send your commits to review:\\n\\n'\n    else\n        drier=\n    fi\n\n    if [ -z \"${reference}\" ]; then\n        $drier git push $USER_REPO HEAD:temp_${branch}/$(date +%Y-%m-%d_%s) $FORCE;\n    else\n        $drier git push $USER_REPO HEAD:issue${reference}_${branch} $FORCE;\n    fi\n}\n\nmain \"$@\"\n"
        },
        {
          "name": "rpc",
          "type": "tree",
          "content": null
        },
        {
          "name": "run-tests-in-vagrant.sh",
          "type": "blob",
          "size": 7.841796875,
          "content": "#!/bin/bash\n\n###############################################################################\n# TODO: Support other OSes.                                                   #\n###############################################################################\n\nORIGIN_DIR=$PWD\nautostart=\"no\"\ndestroy_after_test=\"no\"\nos=\"fedora\"\ndestroy_now=\"no\"\nrun_tests_args=\"\"\nredirect=\">/dev/null 2>&1\"\nssh=\"no\"\ncustom_cflags=\"\"\n\n\npushd () {\n    command pushd \"$@\" >/dev/null\n}\n\npopd () {\n    command popd \"$@\" >/dev/null\n}\n\nusage() {\n    echo \"Usage: $0 [...]\"\n    echo ''\n    echo 'The options that this script accepts are:'\n    echo ''\n    echo '-a, --autostart        configure the testVM to autostart on boot'\n    echo '--destroy-now          cleanup the testVM'\n    echo '--destroy-after-test   cleanup once the tests finishes'\n    echo '-h, --help             show this help text'\n    echo '--os=<flavor>          select the OS for the testVM (fedora, centos6)'\n    echo '--ssh                  ssh into the testVM'\n    echo '--verbose              show what commands in the testVM are executed'\n    echo ''\n}\n\nfunction parse_args () {\n    args=`getopt \\\n              --options ah \\\n              --long autostart,os:,destroy-now,destroy-after-test,verbose,ssh,help \\\n              -n 'run-tests-in-vagrant.sh' \\\n              --  \"$@\"`\n    eval set -- \"$args\"\n    while true; do\n        case \"$1\" in\n            -a|--autostart) autostart=\"yes\"; shift ;;\n            --destroy-after-test) destroy_after_test=\"yes\"; shift ;;\n            --destroy-now)  destroy_now=\"yes\"; shift ;;\n            -h|--help) usage ; exit 0 ;;\n            --ssh)  sshvm=\"yes\"; shift ;;\n            --os)\n                case \"$2\" in\n                    \"\") shift 2 ;;\n                     *) os=\"$2\" ; shift 2 ;;\n                esac ;;\n            --verbose)  redirect=\"\"; shift ;;\n            --) shift ; break ;;\n            *) echo \"Internal error!\" ; exit 1;;\n        esac\n    done\n    run_tests_args=\"$@\"\n}\n\nfunction force_location()\n{\n    current_dir=$(dirname $0);\n\n    if [ ! -f ${current_dir}/tests/vagrant/vagrant-template-fedora/Vagrantfile ]; then\n        echo \"Aborting.\"\n        echo \"The tests/vagrant subdirectory seems to be missing.\"\n        echo \"Please correct the problem and try again.\"\n        exit 1\n    fi\n}\n\nfunction vagrant_check()\n{\n    vagrant -v >/dev/null  2>&1;\n\n    if [ $? -ne 0 ]; then\n        echo \"Aborting\"\n        echo \"Vagrant not found. Please install Vagrant and try again.\"\n        echo \"On Fedora, run \"dnf install vagrant vagrant-libvirt\" \"\n        exit 1\n    fi\n}\n\nfunction ansible_check()\n{\n    ansible --version  >/dev/null  2>&1 ;\n\n    if [ $? -ne 0 ]; then\n        echo \"Aborting\"\n        echo \"Ansible not found. Please install Ansible and try again.\"\n        echo \"On Fedora, run \"dnf install ansible\" \"\n        exit 1\n    fi\n}\n\nfunction set_branchname_from_git_branch()\n{\n    BRANCHNAME=`git rev-parse --abbrev-ref HEAD`\n    if [ $? -ne 0 ]; then\n        echo \"Could not get branch name from git, will exit\"\n        exit 1\n    fi\n}\n\n\nfunction destroy_vm()\n{\n    local retval=0\n\n    echo \"!!!!!!!!!!!!!!!!!!!!!!!!!!!!CAUTION!!!!!!!!!!!!!!!!!!!!!!!!!!!!\"\n    echo \"This will destroy VM and delete tests/vagrant/${BRANCHNAME} dir\"\n    echo\n    while true; do\n        read -p \"Do you want to continue?\" yn\n        case $yn in\n            [Yy]* ) break;;\n            * ) echo \"Did not get an yes, exiting.\"; exit 1 ;;\n        esac\n    done\n    if [ -d \"tests/vagrant/${BRANCHNAME}\" ]; then\n        pushd \"tests/vagrant/${BRANCHNAME}\"\n        eval vagrant destroy $redirect\n        popd\n        rm -rf \"tests/vagrant/${BRANCHNAME}\"\n    else\n        echo \"Could not find vagrant dir for corresponding git branch, exiting\"\n        retval=1\n    fi\n\n    return ${retval}\n}\n\n\nfunction create_vagrant_dir()\n{\n    mkdir -p tests/vagrant/$BRANCHNAME\n    if [ -d \"tests/vagrant/vagrant-template-${os}\" ]; then\n        echo \"Copying tests/vagrant/vagrant-template-${os} dir to tests/vagrant/${BRANCHNAME} ....\"\n        cp -R tests/vagrant/vagrant-template-${os}/* tests/vagrant/$BRANCHNAME\n    else\n        echo \"Could not find template files for requested os $os, exiting\"\n        exit 1\n    fi\n}\n\n\nfunction start_vm()\n{\n    echo \"Doing vagrant up....\"\n    pushd \"tests/vagrant/${BRANCHNAME}\"\n    eval vagrant up $redirect\n    if [ $? -eq 0 ]\n    then\n            popd\n    else\n            echo \"Vagrant up failed, exiting....\";\n            popd\n            exit 1\n    fi\n}\n\nfunction set_vm_attributes()\n{\n    if [ \"x$autostart\" == \"xyes\" ] ; then\n        virsh autostart ${BRANCHNAME}_vagrant-testVM\n    fi\n}\n\nfunction copy_source_code()\n{\n    echo \"Copying source code from host machine to VM....\"\n    pushd \"tests/vagrant/${BRANCHNAME}\"\n    vagrant ssh-config > ssh_config\n    rsync -az -e \"ssh -F ssh_config\" --rsync-path=\"sudo rsync\" \"$ORIGIN_DIR/.\" vagrant-testVM:/home/vagrant/glusterfs\n    if [ $? -eq 0 ]\n    then\n            popd\n    else\n            echo \"Copy failed, exiting....\"\n            popd\n            exit 1\n    fi\n}\n\nfunction compile_gluster()\n{\n    echo \"Source compile and install Gluster....\"\n    pushd \"tests/vagrant/${BRANCHNAME}\"\n    vagrant ssh -c \"cd /home/vagrant/glusterfs ; sudo make clean $redirect\" -- -t\n    vagrant ssh -c \"cd /home/vagrant/glusterfs ; sudo ./autogen.sh $redirect\" -- -t\n    if [ $? -ne 0 ]\n    then\n            echo \"autogen failed, exiting....\"\n            popd\n            exit 1\n    fi\n\n    # GCC on fedora complains about uninitialized variables and\n    # GCC on centos6 does not under don't warn on uninitialized variables flag.\n    if [ \"x$os\" == \"fedora\" ] ; then\n            custom_cflags=\"CFLAGS='-g -O0 -Werror -Wall -Wno-error=cpp -Wno-error=maybe-uninitialized'\"\n    else\n            custom_cflags=\"CFLAGS='-g -O0 -Werror -Wall'\"\n    fi\n\n\n    custom_cflags=\n    vagrant ssh -c \"cd /home/vagrant/glusterfs ; \\\n            sudo \\\n            $custom_cflags \\\n            ./configure \\\n            --prefix=/usr \\\n            --exec-prefix=/usr \\\n            --bindir=/usr/bin \\\n            --sbindir=/usr/sbin \\\n            --sysconfdir=/etc \\\n            --datadir=/usr/share \\\n            --includedir=/usr/include \\\n            --libdir=/usr/lib64 \\\n            --libexecdir=/usr/libexec \\\n            --localstatedir=/var \\\n            --sharedstatedir=/var/lib \\\n            --mandir=/usr/share/man \\\n            --infodir=/usr/share/info \\\n            --libdir=/usr/lib64 \\\n            --enable-gnfs \\\n            --enable-debug $redirect\" -- -t\n    if [ $? -ne 0 ]\n    then\n            echo \"configure failed, exiting....\"\n            popd\n            exit 1\n    fi\n    # Test for missing dependencies based on the BuildRequires in the\n    # glusterfs.spec. If anything is missing, install them (and only then, dnf\n    # cache is a large download).\n    vagrant ssh -c \"cd /home/vagrant/glusterfs; ( sudo dnf -C -y builddep --spec glusterfs.spec || sudo dnf -y builddep --spec glusterfs.spec ) $redirect\" -- -t\n    vagrant ssh -c \"cd /home/vagrant/glusterfs; sudo make -j install $redirect\" -- -t\n    if [ $? -ne 0 ]\n    then\n            echo \"make failed, exiting....\"\n            popd\n            exit 1\n    fi\n    popd\n}\n\nfunction run_tests()\n{\n    local retval=0\n\n    pushd \"tests/vagrant/${BRANCHNAME}\"\n    vagrant ssh -c \"cd /home/vagrant/glusterfs; sudo ./run-tests.sh $run_tests_args\" -- -t\n    retval=$?\n    popd\n\n    return ${retval}\n}\n\nfunction ssh_into_vm_using_exec()\n{\n    pushd \"tests/vagrant/${BRANCHNAME}\"\n    exec vagrant ssh\n    popd\n}\n\necho\nparse_args \"$@\"\n\n# Check environment for dependencies\nforce_location\nvagrant_check\nansible_check\n\n# We have one vm per git branch, query git branch\nset_branchname_from_git_branch\n\nif [ \"x$destroy_now\" == \"xyes\" ] ; then\n    destroy_vm\n    exit $?\nfi\n\nif [ \"x$sshvm\" == \"xyes\" ] ; then\n    ssh_into_vm_using_exec\nfi\n\n\ncreate_vagrant_dir\nstart_vm\nset_vm_attributes\n\n\n\ncopy_source_code\ncompile_gluster\nrun_tests\nRET=$?\n\nif [ \"x$destroy_after_test\" == \"xyes\" ] ; then\n    destroy_vm\nfi\n\nexit ${RET}\n"
        },
        {
          "name": "run-tests.sh",
          "type": "blob",
          "size": 19.7353515625,
          "content": "#!/bin/bash\n# Copyright (c) 2013-2014 Red Hat, Inc. <http://www.redhat.com>\n#\n\nexport TZ=UTC\nforce=\"no\"\nhead=\"yes\"\nretry=\"yes\"\ntests=\"\"\nexit_on_failure=\"yes\"\nskip_bad_tests=\"yes\"\nskip_known_bugs=\"yes\"\nresult_output=\"/tmp/gluster_regression.txt\"\nsection_separator=\"========================================\"\nrun_timeout=200\nkill_after_time=5\nnfs_tests=$RUN_NFS_TESTS\nlist_only=\"no\"\nsecho=\"echo\"\n\n# Option below preserves log tarballs for each run of a test separately\n#       named: <test>-iteration-<n>.tar\n# If set to any other value, then log tarball is just named after the test and\n# overwritten in each iteration (saves space)\n#       named: <test>.tar\n# Use option -p to override default behavior\nskip_preserve_logs=\"yes\"\n\nOSTYPE=$(uname -s)\n\n# Function for use in generating filenames with increasing \"-<n>\" index\n# In:\n#       $1 basepath: Directory where file needs to be created\n#       $2 filename: Name of the file sans extension\n#       $3 extension: Extension string that would be appended to the generated\n#               filename\n# Out:\n#       string of next available filename with appended \"-<n>\"\n# Example:\n#       Interested routines that want to create a file name, say foo-<n>.txt at\n#       location /var/log/gluster would pass in \"/var/log/gluster\" \"foo\" \"txt\"\n#       and be returned next available foo-<n> filename to create.\n# Notes:\n#       Function will not accept empty extension, and will return the same name\n#       over and over (which can be fixed when there is a need for it)\nfunction get_next_filename()\n{\n        local basepath=$1\n        local filename=$2\n        local extension=$3\n        local next=1\n        local tfilename=\"${filename}-${next}\"\n        while [ -e \"${basepath}/${tfilename}.${extension}\" ]; do\n                next=$((next+1))\n                tfilename=\"${filename}-${next}\"\n        done\n\n        echo \"$tfilename\"\n}\n\n# Tar the gluster logs and generate a tarball named after the first parameter\n# passed in to the function. Ideally the test name is passed to this function\n# to generate the required tarball.\n# Tarball name is further controlled by the variable skip_preserve_logs\nfunction tar_logs()\n{\n        t=$1\n\n        logdir=$(gluster --print-logdir)\n        basetarname=$(basename \"$t\" .t)\n\n        if [ -n \"$logdir\" ]\n        then\n                if [[ $skip_preserve_logs == \"yes\" ]]; then\n                        savetarname=$(get_next_filename \"${logdir}\" \\\n                                \"${basetarname}-iteration\" \"tar.gz\" \\\n                                | tail -1)\n                else\n                        savetarname=\"$basetarname\"\n                fi\n\n                # Can't use --exclude here because NetBSD doesn't have it.\n                # However, both it and Linux have -X to take patterns from\n                # a file, so use that.\n                (echo '*.tar.gz'; echo .notar) > \"${logdir}\"/.notar \\\n                        && \\\n                tar -czf \"${logdir}\"/\"${savetarname}\".tar.gz -X \"${logdir}\"/.notar \\\n                        \"${logdir}\"/* 2> /dev/null \\\n                        && \\\n                find \"$logdir\"/* -maxdepth 0 -name '*.tar.*' -prune \\\n                                        -o -exec rm -rf '{}' ';'\n\n                echo \"Logs preserved in tarball ${savetarname}.tar.gz\"\n        else\n                echo \"Logs not preserved, as logdir is not set\"\n        fi\n}\n\nfunction check_dependencies()\n{\n    ## Check all dependencies are present\n    MISSING=\"\"\n\n    # Check for dbench\n    env dbench --usage > /dev/null 2>&1\n    if [ $? -ne 0 ]; then\n        MISSING=\"$MISSING dbench\"\n    fi\n\n    # Check for git\n    env git --version > /dev/null 2>&1\n    if [ $? -ne 0 ]; then\n        MISSING=\"$MISSING git\"\n    fi\n\n    # Check for nfs-utils (Linux-only: built-in NetBSD with different name)\n    if [ \"x`uname -s`\" = \"xLinux\" ] ; then\n      env mount.nfs -V > /dev/null 2>&1\n      if [ $? -ne 0 ]; then\n          MISSING=\"$MISSING nfs-utils\"\n      fi\n    fi\n\n    # Check for netstat\n    env netstat --version > /dev/null 2>&1\n    if [ $? -ne 0 ]; then\n        MISSING=\"$MISSING netstat\"\n    fi\n\n    # Check for the Perl Test Harness\n    env prove --version > /dev/null 2>&1\n    if [ $? -ne 0 ]; then\n        MISSING=\"$MISSING perl-Test-Harness\"\n    fi\n\n    which json_verify > /dev/null\n    if [ $? -ne 0 ]; then\n        MISSING=\"$MISSING json_verify\"\n    fi\n\n    # Check for XFS programs (Linux Only: NetBSD does without)\n    if [ \"x`uname -s`\" = \"xLinux\" ] ; then\n      env mkfs.xfs -V > /dev/null 2>&1\n      if [ $? -ne 0 ]; then\n          MISSING=\"$MISSING xfsprogs\"\n      fi\n    fi\n\n    # Check for attr\n    env getfattr --version > /dev/null 2>&1\n    if [ $? -ne 0 ]; then\n        MISSING=\"$MISSING attr\"\n    fi\n\n    # Check for pidof\n    pidof pidof > /dev/null 2>&1\n    if [ $? -ne 0 ]; then\n        MISSING=\"$MISSING pidof\"\n    fi\n\n    # Check for netstat\n    env netstat --version > /dev/null 2>&1\n    if [ $? -ne 0 ]; then\n        MISSING=\"$MISSING netstat\"\n    fi\n\n    # Check for killall\n    env killall --version > /dev/null 2>&1\n    if [ $? -ne 0 ]; then\n        MISSING=\"$MISSING killall\"\n    fi\n\n    # check for psutil python package\n    test `uname -s` == \"Darwin\" || test `uname -s` == \"FreeBSD\" && {\n        pip show psutil | grep -q psutil >/dev/null 2>&1\n        if [ $? -ne 0 ]; then\n            MISSING=\"$MISSING psutil\"\n        fi\n    }\n\n    ## If dependencies are missing, warn the user and abort\n    if [ \"x$MISSING\" != \"x\" ]; then\n        test \"x${force}\" != \"xyes\" && echo \"Aborting.\"\n        echo\n        echo \"The following required tools are missing:\"\n        echo\n        for pkg in $MISSING; do\n            echo \"  * $pkg\"\n        done\n        echo\n        test \"x${force}\" = \"xyes\" && return\n        echo \"Please install them and try again.\"\n        echo\n        exit 2\n    fi\n}\n\nfunction check_location()\n{\n    regression_testsdir=$(dirname $0);\n\n    if [ ! -f ${regression_testsdir}/tests/include.rc ]; then\n        echo \"Aborting.\"\n        echo\n        echo \"The tests/ subdirectory seems to be missing.\"\n        echo\n        echo \"Please correct the problem and try again.\"\n        echo\n        exit 1\n    fi\n}\n\nfunction check_user()\n{\n    # If we're not running as root, warn the user and abort\n    MYUID=`/usr/bin/id -u`\n    if [ 0${MYUID} -ne 0 ]; then\n        echo \"Aborting.\"\n        echo\n        echo \"The GlusterFS Test Framework must be run as root.\"\n        echo\n        echo \"Please change to the root user and try again.\"\n        echo\n        exit 3\n    fi\n}\n\nfunction match()\n{\n        # Patterns considered valid:\n        # 0. Empty means everything\n        #    \"\"           matches ** i.e all\n        # 1. full or partial file/directory names\n        #   basic         matches tests/basic\n        #   basic/afr     matches tests/basic/afr\n        # 2. globs\n        #   basic/*       matches all files and directories in basic\n        #   basic/*/      matches subdirectories in basic (afr|ec)\n        # 3. numbered bug matching\n        #   884455        matches bugs/bug-884455.t\n        #   859927        matches bugs/859927, bugs/bug-859927.t\n        #   1015990       matches /bugs/bug-1015990-rep.t, bug-1015990.t\n        # ...lots of other cases accepted as well, since globbing is tricky.\n        local t=$1\n        shift\n        local a\n        local match=1\n        if [ -z \"$@\" ]; then\n            match=0\n            return $match\n        fi\n        for a in $@ ; do\n            case \"$t\" in\n                *$a*)\n                    match=0\n                    ;;\n            esac\n        done\n        return $match\n}\n\n# Tests can have comment lines with some comma separated values within them.\n# Key names used to determine test status are\n# G_TESTDEF_TEST_STATUS_CENTOS6\n# G_TESTDEF_TEST_STATUS_NETBSD7\n# Some examples:\n# G_TESTDEF_TEST_STATUS_CENTOS6=BAD_TEST,BUG=123456\n# G_TESTDEF_TEST_STATUS_CENTOS6=BRICK_MUX_BAD_TEST,BUG=123456\n# G_TESTDEF_TEST_STATUS_NETBSD7=KNOWN_ISSUE,BUG=4444444\n# G_TESTDEF_TEST_STATUS_CENTOS6=BAD_TEST,BUG=123456;555555\n# G_TESTDEF_TEST_STATUS_CENTOS6=NFS_TESTS,BUG=1385758\n# You can change status of test to enabled or delete the line only if all the\n# bugs are closed or modified or if the patch fixes it.\nfunction get_test_status ()\n{\n    local test_name=$1\n    local host_os=\"\"\n    local result=\"\"\n\n    host_os=$(uname -s)\n\n    case \"$host_os\" in\n    # Leaving out the logic to determine the particular distro and version\n    # for later. Why does the key have the distro and version then?\n    # Because changing the key in all test files would be very big process\n    # updating just this function with a better logic much simpler.\n    Linux)\n        result=$(grep -e \"^#G_TESTDEF_TEST_STATUS_CENTOS6\" $test_name | \\\n                 awk -F\",\" {'print $1'} | awk -F\"=\" {'print $2'}) ;;\n    NetBSD)\n        result=$(grep -e \"^#G_TESTDEF_TEST_STATUS_NETBSD7\" $test_name | \\\n                 awk -F\",\" {'print $1'} | awk -F\"=\" {'print $2'}) ;;\n    *)\n        result=\"ENABLED\" ;;\n    esac\n\n    echo \"$result\"\n\n}\n\nfunction get_bug_list_for_disabled_test ()\n{\n    local test_name=$1\n    local host_os=\"\"\n    local result=\"\"\n\n    host_os=$(uname -s)\n\n    case \"$host_os\" in\n    # Leaving out the logic to determine the particular distro and version\n    # for later. Why does the key have the distro and version then?\n    # Because changing the key in all test files would be very big process\n    # updating just this function with a better logic much simpler.\n    Linux)\n        result=$(grep -e \"^#G_TESTDEF_TEST_STATUS_CENTOS6\" $test_name | \\\n                 awk -F\",\" {'print $2'} | awk -F\"=\" {'print $2'}) ;;\n    NetBSD)\n        result=$(grep -e \"^#G_TESTDEF_TEST_STATUS_NETBSD7\" $test_name | \\\n                 awk -F\",\" {'print $2'} | awk -F\"=\" {'print $2'}) ;;\n    *)\n        result=\"0000000\" ;;\n    esac\n\n    echo \"$result\"\n\n}\n\nfunction run_tests()\n{\n    RES=0\n    FLAKY=''\n    FAILED=''\n    TESTS_NEEDED_RETRY=''\n    GENERATED_CORE=''\n    total_tests=0\n    selected_tests=0\n    skipped_bad_tests=0\n    skipped_known_issue_tests=0\n    total_run_tests=0\n\n    # key = path of .t file; value = time taken to run the .t file\n    declare -A ELAPSEDTIMEMAP\n\n    # Test if -k is supported for timeout command\n    # This is not supported on centos6, but spuported on centos7\n    # The flags is required for running the command in both flavors\n    timeout_cmd_exists=\"yes\"\n    timeout -k 1 10 ${secho} \"testing 'timeout' command\"\n    if [ $? -ne 0 ]; then\n        timeout_cmd_exists=\"no\"\n    fi\n\n    all_tests=($(find ${regression_testsdir}/tests -name '*.t' | sort))\n    all_tests_cnt=${#all_tests[@]}\n    for t in \"${all_tests[@]}\" ; do\n        old_cores=$(ls /*-*.core 2> /dev/null | wc -l)\n        total_tests=$((total_tests+1))\n        if match $t \"$@\" ; then\n            selected_tests=$((selected_tests+1))\n            ${secho}\n            ${secho} $section_separator \"(${total_tests} / ${all_tests_cnt})\" $section_separator\n            if [[ $(get_test_status $t) =~ \"BAD_TEST\" ]] && \\\n               [[ $skip_bad_tests == \"yes\" ]]\n            then\n                skipped_bad_tests=$((skipped_bad_tests+1))\n                ${secho} \"Skipping bad test file $t\"\n                ${secho} \"Reason: bug(s):\" $(get_bug_list_for_disabled_test $t)\n                ${secho} $section_separator$section_separator\n                ${secho}\n                continue\n            fi\n            if [[ $(get_test_status $t) == \"KNOWN_ISSUE\" ]] && \\\n               [[ $skip_known_bugs == \"yes\" ]]\n            then\n                skipped_known_issue_tests=$((skipped_known_issue_tests+1))\n                ${secho} \"Skipping test file $t due to known issue\"\n                ${secho} \"Reason: bug(s):\" $(get_bug_list_for_disabled_test $t)\n                ${secho} $section_separator$section_separator\n                ${secho}\n                continue\n            fi\n            if [[ $(get_test_status $t) == \"NFS_TEST\" ]] && \\\n               [[ $nfs_tests == \"no\" ]]\n            then\n                ${secho} \"Skipping nfs test file $t\"\n                ${secho} $section_separator$section_separator\n                ${secho}\n                continue\n            fi\n            if [ x\"$list_only\" == x\"yes\" ]; then\n                echo $(realpath --relative-to \"$(dirname \"${0}\")\" \"${t}\")\n                continue\n            fi\n            total_run_tests=$((total_run_tests+1))\n            echo \"[$(date +%H:%M:%S)] Running tests in file $t\"\n            starttime=\"$(date +%s)\"\n\n            local cmd_timeout=$run_timeout;\n            if [ ${timeout_cmd_exists} == \"yes\" ]; then\n                if [ $(grep -c \"SCRIPT_TIMEOUT=\" ${t}) == 1 ] ; then\n                    cmd_timeout=$(grep \"SCRIPT_TIMEOUT=\" ${t} | cut -f2 -d'=');\n                    echo \"Timeout set is ${cmd_timeout}, default ${run_timeout}\"\n                fi\n                timeout --foreground -k ${kill_after_time} ${cmd_timeout} prove -vmfe '/bin/bash' ${t}\n            else\n                prove -vmfe '/bin/bash' ${t}\n            fi\n            TMP_RES=$?\n            ELAPSEDTIMEMAP[$t]=`expr $(date +%s) - $starttime`\n            tar_logs \"$t\"\n\n            # timeout always return 124 if it is actually a timeout.\n            if ((${TMP_RES} == 124)); then\n                echo \"${t} timed out after ${cmd_timeout} seconds\"\n            fi\n\n            if [ ${TMP_RES} -ne 0 ]  && [ \"x${retry}\" = \"xyes\" ] ; then\n                echo \"$t: bad status $TMP_RES\"\n                echo \"\"\n                echo \"       *********************************\"\n                echo \"       *       REGRESSION FAILED       *\"\n                echo \"       * Retrying failed tests in case *\"\n                echo \"       * we got some spurious failures *\"\n                echo \"       *********************************\"\n                echo \"\"\n\n                if [ ${timeout_cmd_exists} == \"yes\" ]; then\n                    timeout --foreground -k ${kill_after_time} ${cmd_timeout} prove -vmfe '/bin/bash' ${t}\n                else\n                    prove -vmfe '/bin/bash' ${t}\n                fi\n                TMP_RES=$?\n                tar_logs \"$t\"\n\n                if ((${TMP_RES} == 124)); then\n                    echo \"${t} timed out after ${cmd_timeout} seconds\"\n                fi\n\n                TESTS_NEEDED_RETRY=\"${TESTS_NEEDED_RETRY}${t} \"\n            fi\n\n\n            if [ ${TMP_RES} -ne 0 ] ; then\n\t\tif [[ \"$t\" == *\"tests/000-flaky/\"* ]]; then\n                    FLAKY=\"${FLAKY}${t} \"\n\t\t    echo \"FAILURE -> SUCCESS: Flaky test\"\n\t\t    TMP_RES=0\n\t\telse\n                    RES=${TMP_RES}\n                    FAILED=\"${FAILED}${t} \"\n\t\tfi\n            fi\n\n            new_cores=$(ls /*-*.core 2> /dev/null | wc -l)\n            if [ x\"$new_cores\" != x\"$old_cores\" ]; then\n                core_diff=$((new_cores-old_cores))\n                echo \"$t: $core_diff new core files\"\n                RES=1\n                GENERATED_CORE=\"${GENERATED_CORE}${t} \"\n            fi\n            echo \"End of test $t\"\n            echo $section_separator$section_separator\n            echo\n            if [ $RES -ne 0 ] && [ x\"$exit_on_failure\" = \"xyes\" ] ; then\n                break;\n            fi\n        fi\n    done\n\n    if [ x\"$list_only\" == x\"yes\" ]; then\n        return 0\n    fi\n\n    echo\n    echo \"Run complete\"\n    echo $section_separator$section_separator\n    echo \"Number of tests found:                             $total_tests\"\n    echo \"Number of tests selected for run based on pattern: $selected_tests\"\n    echo \"Number of tests skipped as they were marked bad:   $skipped_bad_tests\"\n    echo \"Number of tests skipped because of known_issues:   $skipped_known_issue_tests\"\n    echo \"Number of tests that were run:                     $total_run_tests\"\n\n    echo\n    echo \"Tests ordered by time taken, slowest to fastest: \"\n    echo $section_separator$section_separator\n    for key in \"${!ELAPSEDTIMEMAP[@]}\"\n    do\n        echo \"$key  -  ${ELAPSEDTIMEMAP[\"$key\"]} second\"\n    done | sort -rn -k3\n\n    # initialize the output file\n    echo > \"${result_output}\"\n\n    # Output the errors into a file\n    if [ ${RES} -ne 0 ] ; then\n        FAILED=$( echo ${FAILED} | tr ' ' '\\n' | sort -u )\n        FAILED_COUNT=$( echo -n \"${FAILED}\" | grep -c '^' )\n        echo -e \"\\n$FAILED_COUNT test(s) failed \\n${FAILED}\" >> \"${result_output}\"\n        GENERATED_CORE=$( echo  ${GENERATED_CORE} | tr ' ' '\\n' | sort -u )\n        GENERATED_CORE_COUNT=$( echo -n \"${GENERATED_CORE}\" | grep -c '^' )\n        echo -e \"\\n$GENERATED_CORE_COUNT test(s) generated core \\n${GENERATED_CORE}\" >> \"${result_output}\"\n        cat \"${result_output}\"\n    fi\n    TESTS_NEEDED_RETRY=$( echo ${TESTS_NEEDED_RETRY} | tr ' ' '\\n' | sort -u )\n    RETRY_COUNT=$( echo -n \"${TESTS_NEEDED_RETRY}\" | grep -c '^' )\n    if [ ${RETRY_COUNT} -ne 0 ] ; then\n        echo -e \"\\n${RETRY_COUNT} test(s) needed retry \\n${TESTS_NEEDED_RETRY}\" >> \"${result_output}\"\n    fi\n\n    FLAKY_TESTS_FAILED=$( echo ${FLAKY} | tr ' ' '\\n' | sort -u )\n    RETRY_COUNT=$( echo -n \"${FLAKY_TESTS_FAILED}\" | grep -c '^' )\n    if [ ${RETRY_COUNT} -ne 0 ] ; then\n        echo -e \"\\n${RETRY_COUNT} flaky test(s) marked as success even though they failed \\n${FLAKY_TESTS_FAILED}\" >> \"${result_output}\"\n    fi\n\n    echo\n    echo \"Result is $RES\"\n    echo\n    return ${RES}\n}\n\nfunction run_head_tests()\n{\n    [ -d ${regression_testsdir}/.git ] || return 0\n\n    # The git command needs $cwd to be within the repository, but run_tests\n    # needs it to be back where we started.\n    pushd $regression_testsdir\n    git_cmd=\"git diff-tree --no-commit-id --name-only --diff-filter=ACMRTUXB\"\n    htests=$($git_cmd -r HEAD tests | grep '.t$')\n    popd\n    [ -n \"$htests\" ] || return 0\n\n    # Perhaps it's not ideal that we'll end up re-running these tests, but the\n    # gains from letting them fail fast in the first round should outweigh the\n    # losses from running them again in the second.  OTOH, with so many of our\n    # tests being non-deterministic, maybe it doesn't hurt to give the newest\n    # tests an extra workout.\n    run_tests \"$htests\"\n}\n\nfunction show_usage ()\n{\n    cat <<EOF\nUsage: $0 <opts> [<glob>|<bzid>]...\n\nOptions:\n\n-f  force\n-h  skip tests altering from HEAD\n-H  run only tests altering from HEAD\n-r  retry failed tests\n-R  do not retry failed tests\n-c  dont't exit on failure\n-b  don't skip bad tests\n-k  don't skip known bugs\n-p  don't keep logs from preceding runs\n-o  OUTPUT\n-t  TIMEOUT\n-n  skip NFS tests\n-l  list tests that should be executed\n--help\nEOF\n}\n\nusage=\"no\"\n\nfunction parse_args ()\n{\n    args=`getopt -u -l help frRcbkphHnlo:t: \"$@\"`\n    if ! [ $? -eq 0 ]; then\n\tshow_usage\n\texit 1\n    fi\n    set -- $args\n    while [ $# -gt 0 ]; do\n        case \"$1\" in\n        -f)    force=\"yes\" ;;\n        -h)    head=\"no\" ;;\n        -H)    head=\"only\" ;;\n        -r)    retry=\"yes\" ;;\n        -R)    retry=\"no\" ;;\n        -c)    exit_on_failure=\"no\" ;;\n        -b)    skip_bad_tests=\"no\" ;;\n        -k)    skip_known_bugs=\"no\" ;;\n        -p)    skip_preserve_logs=\"no\" ;;\n        -o)    result_output=\"$2\"; shift;;\n        -t)    run_timeout=\"$2\"; shift;;\n        -n)    nfs_tests=\"no\";;\n        -l)    list_only=\"yes\";;\n        --help) usage=\"yes\" ;;\n        --)    shift; break;;\n        esac\n        shift\n    done\n    tests=\"$@\"\n}\n\n# Get user options\nparse_args \"$@\"\nif [ x\"$usage\" == x\"yes\" ]; then\n    show_usage\n    exit 0\nfi\n\nif [ x\"${list_only}\" == x\"no\" ]; then\n    echo\n    echo ... GlusterFS Test Framework ...\n    echo\n\n    # As many tests are designed to take values of variables from 'env.rc',\n    # it is good to source the file. While it is also required to source the\n    # file individually in each tests (as it should be possible to run the\n    # tests separately), exporting variables from env.rc is not harmful if\n    # done here\n\n    source ./tests/env.rc\n\n    # Make sure we're running as the root user\n    check_user\n\n    # Make sure the needed programs are available\n    check_dependencies\nelse\n    head=\"no\"\n    secho=\"true\"\nfi\n\n# Check we're running from the right location\ncheck_location\n\n# Run the tests\nif [ x\"$head\" != x\"no\" ]; then\n        run_head_tests || exit 1\nfi\nif [ x\"$head\" != x\"only\" ]; then\n        run_tests \"$tests\" || exit 1\nfi\n"
        },
        {
          "name": "site.h.in",
          "type": "blob",
          "size": 1.73828125,
          "content": "/*\n * Guidelines for using this file vs. configure.ac\n *\n * (1) If it already exists in configure.ac, leave it there.\n *\n * (2) If it needs to take effect at configure (not compile) time, it *needs*\n * to go in configure.ac.\n *\n * (3) If it affects file paths, which are the things most likely to be based\n * on an OS or distribution's generic filesystem hierarchy and not on a\n * particular package's definition (e.g. an RPM specfile), it should probably\n * go in configure.ac.\n *\n * (4) If it affects default sizes, limits, thresholds, or modes of operation\n * (e.g. IPv4 vs. IPv6), it should probably go here.\n *\n * (5) For anything else, is it more like the things in 3 or the things in 4?\n * Which approach is more convenient for the people who are likely to use the\n * new option(s)?  Make your best guesses, confirm with others, and go with\n * what works.\n */\n\n#define SITE_H_ENABLE_LEAST_PRIORITY    \"on\"\n#define SITE_H_MD_CACHE_TIMEOUT         \"1\"\n#define SITE_H_NFS_DISABLE              \"on\"\n\n/*\n * As an example of how to use this file, here's what the Facebook version looks\n * like:\n\n#define SITE_H_ENABLE_LEAST_PRIORITY    \"off\"\n#define SITE_H_MD_CACHE_TIMEOUT         \"180\"\n#define SITE_H_NFS_DISABLE              \"off\"\n\n * Each time we add a value here, we lessen the risk of values being\n * inconsistent across production automation, test automation, and manual\n * developer testing. We also save effort compared to updating values for each\n * kind of external automation. To do the same thing with configure scripts or\n * specfiles, we'd have to make much more complicated and less discoverable\n * changes there.\n *\n * Other orgs are likely to have the same issues regarding their preferred\n * settings, and likewise should add their favorites here as well.\n */\n"
        },
        {
          "name": "submit-for-review.sh",
          "type": "blob",
          "size": 0.005859375,
          "content": "rfc.sh"
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "tools",
          "type": "tree",
          "content": null
        },
        {
          "name": "xlators",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}