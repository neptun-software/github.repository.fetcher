{
  "metadata": {
    "timestamp": 1736710382613,
    "page": 201,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjIxMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "jedisct1/dsvpn",
      "stars": 5183,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".clang-format",
          "type": "blob",
          "size": 2.6767578125,
          "content": "---\nLanguage:        Cpp\nAccessModifierOffset: -4\nAlignAfterOpenBracket: Align\nAlignConsecutiveAssignments: true\nAlignConsecutiveDeclarations: true\nAlignEscapedNewlinesLeft: true\nAlignOperands:   true\nAlignTrailingComments: true\nAllowAllParametersOfDeclarationOnNextLine: true\nAllowShortBlocksOnASingleLine: false\nAllowShortCaseLabelsOnASingleLine: false\nAllowShortFunctionsOnASingleLine: Inline\nAllowShortIfStatementsOnASingleLine: false\nAllowShortLoopsOnASingleLine: false\nAlwaysBreakAfterReturnType: None\nAlwaysBreakBeforeMultilineStrings: true\nAlwaysBreakTemplateDeclarations: true\nBinPackArguments: true\nBinPackParameters: true\nBraceWrapping:\n  AfterClass:      false\n  AfterControlStatement: false\n  AfterEnum:       false\n  AfterFunction:   true\n  AfterNamespace:  false\n  AfterObjCDeclaration: false\n  AfterStruct:     false\n  AfterUnion:      false\n  BeforeCatch:     false\n  BeforeElse:      false\n  IndentBraces:    false\nBreakBeforeBinaryOperators: None\nBreakBeforeBraces: WebKit\nBreakBeforeTernaryOperators: true\nBreakConstructorInitializersBeforeComma: true\nBreakAfterJavaFieldAnnotations: false\nBreakStringLiterals: true\nColumnLimit:     100\nCommentPragmas:  '^ IWYU pragma:'\nConstructorInitializerAllOnOneLineOrOnePerLine: false\nConstructorInitializerIndentWidth: 4\nContinuationIndentWidth: 4\nCpp11BracedListStyle: false\nDerivePointerAlignment: false\nDisableFormat:   false\nExperimentalAutoDetectBinPacking: true\nForEachMacros:   [ foreach, Q_FOREACH, BOOST_FOREACH ]\nIncludeCategories:\n  - Regex:           '^\"(llvm|llvm-c|clang|clang-c)/'\n    Priority:        2\n  - Regex:           '^(<|\"(gtest|isl|json)/)'\n    Priority:        3\n  - Regex:           '.*'\n    Priority:        1\nIncludeIsMainRegex: '$'\nIndentCaseLabels: false\nIndentWidth:     4\nIndentWrappedFunctionNames: false\nJavaScriptQuotes: Leave\nJavaScriptWrapImports: true\nKeepEmptyLinesAtTheStartOfBlocks: false\nMacroBlockBegin: ''\nMacroBlockEnd:   ''\nMaxEmptyLinesToKeep: 1\nNamespaceIndentation: Inner\nObjCBlockIndentWidth: 4\nObjCSpaceAfterProperty: true\nObjCSpaceBeforeProtocolList: true\nPenaltyBreakBeforeFirstCallParameter: 19\nPenaltyBreakComment: 300\nPenaltyBreakFirstLessLess: 120\nPenaltyBreakString: 1000\nPenaltyExcessCharacter: 1000000\nPenaltyReturnTypeOnItsOwnLine: 60\nPointerAlignment: Right\nReflowComments:  true\nSortIncludes:    true\nSpaceAfterCStyleCast: true\nSpaceAfterTemplateKeyword: true\nSpaceBeforeAssignmentOperators: true\nSpaceBeforeParens: ControlStatements\nSpaceInEmptyParentheses: false\nSpacesBeforeTrailingComments: 1\nSpacesInAngles:  false\nSpacesInContainerLiterals: true\nSpacesInCStyleCastParentheses: false\nSpacesInParentheses: false\nSpacesInSquareBrackets: false\nStandard:        Cpp11\nTabWidth:        8\nUseTab:          Never\n...\n\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.283203125,
          "content": "*.a\n*.app\n*.cmd\n*.d\n*.dSYM/\n*.dll\n*.dylib\n*.elf\n*.exe\n*.exp\n*.gch\n*.hex\n*.i*86\n*.idb\n*.ilk\n*.key\n*.ko\n*.la\n*.lib\n*.lo\n*.map\n*.mod*\n*.o\n*.obj\n*.out\n*.pch\n*.pdb\n*.so\n*.so.*\n*.su\n*.x86_64\n*~\n.tmp_versions/\n.vscode\nMkfile.old\nModule.symvers\ndkms.conf\ndsvpn\nkey\nmodules.order\nzig-out\n.zig-cache\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0478515625,
          "content": "MIT License\n\nCopyright (c) 2019-2023 Frank Denis\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 0.9521484375,
          "content": "CFLAGS_FILE?=.cflags\nCOMPILE_TEST_FILE?=.test.c\nPREFIX?=/usr/local\n\nall: dsvpn\n\ndsvpn: $(CFLAGS_FILE) Makefile src/vpn.c src/charm.c src/os.c include/charm.h include/vpn.h include/os.h\n\t$(CC) $$(cat \"$(CFLAGS_FILE)\") $(OPTFLAGS) -Iinclude -o $@ src/vpn.c src/charm.c src/os.c\n\tstrip $@\n\ninstall: dsvpn\n\tinstall -d $(PREFIX)/sbin\n\tinstall -m 0755 dsvpn $(PREFIX)/sbin\n\nuninstall:\n\trm -f $(PREFIX)/sbin/dsvpn\n\nclean:\n\trm -f dsvpn *~ $(CFLAGS_FILE) $(COMPILE_TEST_FILE)\n\n$(CFLAGS_FILE):\n\t@CFLAGS=\"$(CFLAGS)\"\n\t@if [ -z \"$$CFLAGS\" ]; then \\\n\t\tif [ ! -r \"$(CFLAGS_FILE)\" ]; then \\\n\t\t\techo \"int main(void) { return 0; }\" > \"$(COMPILE_TEST_FILE)\"; \\\n\t\t\tfor flag in -march=native -mtune=native -Ofast -Wno-unused-command-line-argument; do \\\n\t\t\t\t$(CC) $${CFLAGS} $${flag} \"$(COMPILE_TEST_FILE)\" >/dev/null 2>&1 && CFLAGS=\"$$CFLAGS $$flag\"; \\\n\t\t\tdone; \\\n\t\t\trm -f a.out \\\n\t\t\tCFLAGS=\"$${CFLAGS} -Wall -W -Wshadow -Wmissing-prototypes\"; \\\n\t\tfi \\\n\tfi; \\\n\techo \"$$CFLAGS\" > \"$(CFLAGS_FILE)\"\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 7.126953125,
          "content": "# ![DSVPN](https://raw.github.com/jedisct1/dsvpn/master/logo.png)\n\n[![GitHub CI status](https://github.com/jedisct1/dsvpn/workflows/CI/badge.svg)](https://github.com/jedisct1/dsvpn/actions)\n![CodeQL scan](https://github.com/jedisct1/dsvpn/workflows/CodeQL%20scan/badge.svg)\n\nDSVPN is a Dead Simple VPN, designed to address the most common use case for using a VPN:\n\n```text\n[client device] ---- (untrusted/restricted network) ---- [vpn server] ---- [the Internet]\n```\n\nFeatures:\n\n* Runs on TCP. Works pretty much everywhere, including on public WiFi where only TCP/443 is open or reliable.\n* Uses only modern cryptography, with formally verified implementations.\n* Small and constant memory footprint. Doesn't perform any heap memory allocations.\n* Small (~25 KB), with an equally small and readable code base. No external dependencies.\n* Works out of the box. No lousy documentation to read. No configuration file. No post-configuration. Run a single-line command on the server, a similar one on the client and you're done. No firewall and routing rules to manually mess with.\n* Works on Linux (kernel >= 3.17), macOS and OpenBSD, as well as DragonFly BSD, FreeBSD and NetBSD in client and point-to-point modes. Adding support for other operating systems is trivial.\n* Doesn't leak between reconnects if the network doesn't change. Blocks IPv6 on the client to prevent IPv6 leaks.\n\n## Installation\n\n```sh\nmake\n```\n\nOn Raspberry Pi 3 and 4, use the following command instead to enable NEON optimizations:\n\n```sh\nenv OPTFLAGS=-mfpu=neon make\n```\n\nAlternatively, if you have [zig](https://ziglang.org) installed, it can be used to compile DSVPN:\n\n```sh\nzig build -Drelease\n```\n\nOn macOS, DSVPN can be installed using Homebrew: `brew install dsvpn`.\n\n## Secret key\n\nDSVPN uses a shared secret. Create it with the following command:\n\n```sh\ndd if=/dev/urandom of=vpn.key count=1 bs=32\n```\n\nAnd copy it on the server and the client.\n\nIf required, keys can be exported and imported in printable form:\n\n```sh\nbase64 < vpn.key\necho 'HK940OkWcFqSmZXnCQ1w6jhQMZm0fZoEhQOOpzJ/l3w=' | base64 --decode > vpn.key\n```\n\n## Example usage on the server\n\n```sh\nsudo ./dsvpn server vpn.key auto 1959\n```\n\nHere, I use port `1959`. Everything else is set to the default values. If you want to use the default port (`443`), it doesn't even have to be specified, so the parameters can just be `server vpn.key`\n\n## Example usage on the client\n\n```sh\nsudo ./dsvpn client vpn.key 34.216.127.34 1959\n```\n\nThis is a macOS client, connecting to the VPN server `34.216.127.34` on port `1959`. The port number is optional here as well. And the IP can be replaced by a host name.\n\n## That's it\n\nYou are connected. Just hit `Ctrl`-`C` to disconnect.\n\nEvaggelos Balaskas wrote a great blog post walking through the whole procedure: [A Dead Simple VPN](https://balaskas.gr/blog/2019/07/20/a-dead-simple-vpn/).\n\nHe also maintains [systemd service files for DSVPN](https://github.com/ebal/scripts/tree/master/dsvpn). Thank you Evaggelos!\n\n## A note on DNS\n\nIf you were previously using a DNS resolver only accessible from the local network, it won't be accessible through the VPN. That might be the only thing you may have to change. Use a public resolver, a local resolver, or DNSCrypt.\n\nOr send a pull request implementing the required commands to change and revert the DNS settings, or redirect DNS queries to another resolver, for all supported operating systems.\n\n## Advanced configuration\n\n```text\ndsvpn   \"server\"\n        <key file>\n        <vpn server ip or name>|\"auto\"\n        <vpn server port>|\"auto\"\n        <tun interface>|\"auto\"\n        <local tun ip>|\"auto\"\n        <remote tun ip>\"auto\"\n        <external ip>|\"auto\"\n\ndsvpn   \"client\"\n        <key file>\n        <vpn server ip or name>\n        <vpn server port>|\"auto\"\n        <tun interface>|\"auto\"\n        <local tun ip>|\"auto\"\n        <remote tun ip>|\"auto\"\n        <gateway ip>|\"auto\"\n```\n\n* `server`|`client`: use `server` on the server, and `client` on clients.\n* `<key file>`: path to the file with the secret key (e.g. `vpn.key`).\n* `<vpn server ip or name>`: on the client, it should be the IP address or the hostname of the server. On the server, it doesn't matter, so you can just use `auto`.\n* `<vpn server port>`: the TCP port to listen to/connect to for the VPN. Use 443 or anything else. `auto` will use `443`.\n* `<tun interface>`: this is the name of the VPN interface. On Linux, you can set it to anything. Or macOS, it has to follow a more boring pattern. If you feel lazy, just use `auto` here.\n* `<local tun ip>`: local IP address of the tunnel. Use any private IP address that you don't use here.\n* `<remote tun ip>`: remote IP address of the tunnel. See above. The local and remote tunnel IPs must the same on the client and on the server, just reversed. For some reason, I tend to pick `192.168.192.254` for the server, and `192.168.192.1` for the client. These values will be used if you put `auto` for the local and remote tunnel IPs.\n* `<external ip>` (server only): the external IP address of the server. Can be left to `\"auto\"`.\n* `<gateway ip>` (client only): the internal router IP address. The first line printed by `netstat -rn` will tell you (`gateway`).\n\nIf all the remaining parameters of a command would be `auto`, they don't have to be specified.\n\n## Related projects\n\n* Robert Debock maintains [an Ansible role for DSVPN](https://github.com/robertdebock/ansible-role-dsvpn)\n* [OpenMPTCProuter](http://www.openmptcprouter.com/) is an OpenWRT-based router OS that supports DSVPN\n* Yecheng Fu maintains a [Docker image for DSVPN](https://github.com/cofyc/dsvpn-docker)\n\n## Why\n\nI needed a VPN that works in an environment where only TCP/80 and TCP/443 are open.\n\nWireGuard doesn't work over TCP.\n\n[GloryTun](https://github.com/angt/glorytun) is excellent, but requires post-configuration and the maintained branch uses UDP.\n\nI forgot about [VTUN-libsodium](https://github.com/jedisct1/vtun). But it would have been too much complexity and attack surface for a simple use case.\n\nOpenVPN is horribly difficult to set up.\n\nSshuttle is very nice and I've been using it a lot in the past, but it's not a VPN. It doesn't tunnel non-TCP traffic. It also requires a full Python install, which I'd rather avoid on my router.\n\nEverything else I looked at was either too difficult to use, slow, bloated, didn't work on macOS, didn't work on small devices, was complicated to cross-compile due to dependencies, wasn't maintained, or didn't feel secure.\n\nTCP-over-TCP is not as bad as some documents describe. It works surprisingly well in practice, especially with modern congestion control algorithms (BBR). For traditional algorithms that rely on packet loss, DSVPN couples the inner and outer congestion controllers by lowering `TCP_NOTSENT_LOWAT` and dropping packets when congestion is detected at the outer layer.\n\n## Cryptography\n\nThe cryptographic primitives used in DSVPN are available as a standalone project: [Charm](https://github.com/jedisct1/charm).\n\n## Guarantees, support, feature additions\n\nNone.\n\nThis is not intended to be a replacement for GloryTun or WireGuard. This is what I use, because it solves a problem I had. Extending it to solve different problems is not planned, but feel free to fork it and tailor it to your needs!\n"
        },
        {
          "name": "build.zig",
          "type": "blob",
          "size": 0.8935546875,
          "content": "const std = @import(\"std\");\nconst builtin = @import(\"builtin\");\n\npub fn build(b: *std.Build) !void {\n    const target = b.standardTargetOptions(.{});\n    const optimize = b.standardOptimizeOption(.{ .preferred_optimize_mode = .ReleaseSmall });\n\n    const dsvpn = b.addExecutable(.{\n        .name = \"dsvpn\",\n        .target = target,\n        .optimize = optimize,\n        .strip = true,\n    });\n    dsvpn.linkLibC();\n    dsvpn.addIncludePath(b.path(\"include\"));\n    dsvpn.root_module.addCMacro(\"_GNU_SOURCE\", \"1\");\n    const source_files = &.{ \"src/charm.c\", \"src/os.c\", \"src/vpn.c\" };\n    dsvpn.addCSourceFiles(.{ .files = source_files });\n    b.installArtifact(dsvpn);\n    const run_cmd = b.addRunArtifact(dsvpn);\n    run_cmd.step.dependOn(b.getInstallStep());\n    if (b.args) |args| {\n        run_cmd.addArgs(args);\n    }\n    const run_step = b.step(\"run\", \"Run the app\");\n    run_step.dependOn(&run_cmd.step);\n}\n"
        },
        {
          "name": "include",
          "type": "tree",
          "content": null
        },
        {
          "name": "logo.png",
          "type": "blob",
          "size": 2.57421875,
          "content": null
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}