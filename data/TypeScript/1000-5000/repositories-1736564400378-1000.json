{
  "metadata": {
    "timestamp": 1736564400378,
    "page": 1000,
    "hasNextPage": false,
    "endCursor": "Y3Vyc29yOjEwMDA=",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "EvolutionAPI/evolution-api",
      "stars": 2292,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".DS_Store",
          "type": "blob",
          "size": 6.00390625,
          "content": null
        },
        {
          "name": ".dockerignore",
          "type": "blob",
          "size": 0.05078125,
          "content": ".git\n*Dockerfile*\n*docker-compose*\nnode_modules\ndist"
        },
        {
          "name": ".env.example",
          "type": "blob",
          "size": 8.9248046875,
          "content": "SERVER_TYPE=http\nSERVER_PORT=8080\n# Server URL - Set your application url\nSERVER_URL=http://localhost:8080\n\nSENTRY_DSN=\n\n# Cors - * for all or set separate by commas -  ex.: 'yourdomain1.com, yourdomain2.com'\nCORS_ORIGIN=*\nCORS_METHODS=GET,POST,PUT,DELETE\nCORS_CREDENTIALS=true\n\n# Determine the logs to be displayed\nLOG_LEVEL=ERROR,WARN,DEBUG,INFO,LOG,VERBOSE,DARK,WEBHOOKS,WEBSOCKET\nLOG_COLOR=true\n# Log Baileys - \"fatal\" | \"error\" | \"warn\" | \"info\" | \"debug\" | \"trace\"\nLOG_BAILEYS=error\n\n# Set the maximum number of listeners that can be registered for an event\nEVENT_EMITTER_MAX_LISTENERS=50\n\n# Determine how long the instance should be deleted from memory in case of no connection.\n# Default time: 5 minutes\n# If you don't even want an expiration, enter the value false\nDEL_INSTANCE=false\n\n# Provider: postgresql | mysql\nDATABASE_PROVIDER=postgresql\nDATABASE_CONNECTION_URI='postgresql://user:pass@localhost:5432/evolution?schema=public'\n# Client name for the database connection\n# It is used to separate an API installation from another that uses the same database.\nDATABASE_CONNECTION_CLIENT_NAME=evolution_exchange\n\n# Choose the data you want to save in the application's database\nDATABASE_SAVE_DATA_INSTANCE=true\nDATABASE_SAVE_DATA_NEW_MESSAGE=true\nDATABASE_SAVE_MESSAGE_UPDATE=true\nDATABASE_SAVE_DATA_CONTACTS=true\nDATABASE_SAVE_DATA_CHATS=true\nDATABASE_SAVE_DATA_LABELS=true\nDATABASE_SAVE_DATA_HISTORIC=true\nDATABASE_SAVE_IS_ON_WHATSAPP=true\nDATABASE_SAVE_IS_ON_WHATSAPP_DAYS=7\nDATABASE_DELETE_MESSAGE=true\n\n# RabbitMQ - Environment variables\nRABBITMQ_ENABLED=false\nRABBITMQ_URI=amqp://localhost\nRABBITMQ_EXCHANGE_NAME=evolution\n# Global events - By enabling this variable, events from all instances are sent in the same event queue.\nRABBITMQ_GLOBAL_ENABLED=false\n# Choose the events you want to send to RabbitMQ\nRABBITMQ_EVENTS_APPLICATION_STARTUP=false\nRABBITMQ_EVENTS_INSTANCE_CREATE=false\nRABBITMQ_EVENTS_INSTANCE_DELETE=false\nRABBITMQ_EVENTS_QRCODE_UPDATED=false\nRABBITMQ_EVENTS_MESSAGES_SET=false\nRABBITMQ_EVENTS_MESSAGES_UPSERT=false\nRABBITMQ_EVENTS_MESSAGES_EDITED=false\nRABBITMQ_EVENTS_MESSAGES_UPDATE=false\nRABBITMQ_EVENTS_MESSAGES_DELETE=false\nRABBITMQ_EVENTS_SEND_MESSAGE=false\nRABBITMQ_EVENTS_CONTACTS_SET=false\nRABBITMQ_EVENTS_CONTACTS_UPSERT=false\nRABBITMQ_EVENTS_CONTACTS_UPDATE=false\nRABBITMQ_EVENTS_PRESENCE_UPDATE=false\nRABBITMQ_EVENTS_CHATS_SET=false\nRABBITMQ_EVENTS_CHATS_UPSERT=false\nRABBITMQ_EVENTS_CHATS_UPDATE=false\nRABBITMQ_EVENTS_CHATS_DELETE=false\nRABBITMQ_EVENTS_GROUPS_UPSERT=false\nRABBITMQ_EVENTS_GROUP_UPDATE=false\nRABBITMQ_EVENTS_GROUP_PARTICIPANTS_UPDATE=false\nRABBITMQ_EVENTS_CONNECTION_UPDATE=false\nRABBITMQ_EVENTS_REMOVE_INSTANCE=false\nRABBITMQ_EVENTS_LOGOUT_INSTANCE=false\nRABBITMQ_EVENTS_CALL=false\nRABBITMQ_EVENTS_TYPEBOT_START=false\nRABBITMQ_EVENTS_TYPEBOT_CHANGE_STATUS=false\n\n# SQS - Environment variables\nSQS_ENABLED=false\nSQS_ACCESS_KEY_ID=\nSQS_SECRET_ACCESS_KEY=\nSQS_ACCOUNT_ID=\nSQS_REGION=\n\n# Websocket - Environment variables\nWEBSOCKET_ENABLED=false\nWEBSOCKET_GLOBAL_EVENTS=false\n\n# Pusher - Environment variables\nPUSHER_ENABLED=false\nPUSHER_GLOBAL_ENABLED=false\nPUSHER_GLOBAL_APP_ID=\nPUSHER_GLOBAL_KEY=\nPUSHER_GLOBAL_SECRET=\nPUSHER_GLOBAL_CLUSTER=\nPUSHER_GLOBAL_USE_TLS=true\n# Choose the events you want to send to Pusher\nPUSHER_EVENTS_APPLICATION_STARTUP=true\nPUSHER_EVENTS_QRCODE_UPDATED=true\nPUSHER_EVENTS_MESSAGES_SET=true\nPUSHER_EVENTS_MESSAGES_UPSERT=true\nPUSHER_EVENTS_MESSAGES_EDITED=true\nPUSHER_EVENTS_MESSAGES_UPDATE=true\nPUSHER_EVENTS_MESSAGES_DELETE=true\nPUSHER_EVENTS_SEND_MESSAGE=true\nPUSHER_EVENTS_CONTACTS_SET=true\nPUSHER_EVENTS_CONTACTS_UPSERT=true\nPUSHER_EVENTS_CONTACTS_UPDATE=true\nPUSHER_EVENTS_PRESENCE_UPDATE=true\nPUSHER_EVENTS_CHATS_SET=true\nPUSHER_EVENTS_CHATS_UPSERT=true\nPUSHER_EVENTS_CHATS_UPDATE=true\nPUSHER_EVENTS_CHATS_DELETE=true\nPUSHER_EVENTS_GROUPS_UPSERT=true\nPUSHER_EVENTS_GROUPS_UPDATE=true\nPUSHER_EVENTS_GROUP_PARTICIPANTS_UPDATE=true\nPUSHER_EVENTS_CONNECTION_UPDATE=true\nPUSHER_EVENTS_LABELS_EDIT=true\nPUSHER_EVENTS_LABELS_ASSOCIATION=true\nPUSHER_EVENTS_CALL=true\nPUSHER_EVENTS_TYPEBOT_START=false\nPUSHER_EVENTS_TYPEBOT_CHANGE_STATUS=false\n\n# WhatsApp Business API - Environment variables\n# Token used to validate the webhook on the Facebook APP\nWA_BUSINESS_TOKEN_WEBHOOK=evolution\nWA_BUSINESS_URL=https://graph.facebook.com\nWA_BUSINESS_VERSION=v20.0\nWA_BUSINESS_LANGUAGE=en_US\n\n# Global Webhook Settings\n# Each instance's Webhook URL and events will be requested at the time it is created\nWEBHOOK_GLOBAL_ENABLED=false\n# Define a global webhook that will listen for enabled events from all instances\nWEBHOOK_GLOBAL_URL=''\n# With this option activated, you work with a url per webhook event, respecting the global url and the name of each event\nWEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=false\n# Set the events you want to hear\nWEBHOOK_EVENTS_APPLICATION_STARTUP=false\nWEBHOOK_EVENTS_QRCODE_UPDATED=true\nWEBHOOK_EVENTS_MESSAGES_SET=true\nWEBHOOK_EVENTS_MESSAGES_UPSERT=true\nWEBHOOK_EVENTS_MESSAGES_EDITED=true\nWEBHOOK_EVENTS_MESSAGES_UPDATE=true\nWEBHOOK_EVENTS_MESSAGES_DELETE=true\nWEBHOOK_EVENTS_SEND_MESSAGE=true\nWEBHOOK_EVENTS_CONTACTS_SET=true\nWEBHOOK_EVENTS_CONTACTS_UPSERT=true\nWEBHOOK_EVENTS_CONTACTS_UPDATE=true\nWEBHOOK_EVENTS_PRESENCE_UPDATE=true\nWEBHOOK_EVENTS_CHATS_SET=true\nWEBHOOK_EVENTS_CHATS_UPSERT=true\nWEBHOOK_EVENTS_CHATS_UPDATE=true\nWEBHOOK_EVENTS_CHATS_DELETE=true\nWEBHOOK_EVENTS_GROUPS_UPSERT=true\nWEBHOOK_EVENTS_GROUPS_UPDATE=true\nWEBHOOK_EVENTS_GROUP_PARTICIPANTS_UPDATE=true\nWEBHOOK_EVENTS_CONNECTION_UPDATE=true\nWEBHOOK_EVENTS_REMOVE_INSTANCE=false\nWEBHOOK_EVENTS_LOGOUT_INSTANCE=false\nWEBHOOK_EVENTS_LABELS_EDIT=true\nWEBHOOK_EVENTS_LABELS_ASSOCIATION=true\nWEBHOOK_EVENTS_CALL=true\n# This events is used with Typebot\nWEBHOOK_EVENTS_TYPEBOT_START=false\nWEBHOOK_EVENTS_TYPEBOT_CHANGE_STATUS=false\n# This event is used to send errors\nWEBHOOK_EVENTS_ERRORS=false\nWEBHOOK_EVENTS_ERRORS_WEBHOOK=\n\n# Name that will be displayed on smartphone connection\nCONFIG_SESSION_PHONE_CLIENT=Evolution API\n# Browser Name = Chrome | Firefox | Edge | Opera | Safari\nCONFIG_SESSION_PHONE_NAME=Chrome\n\n# Whatsapp Web version for baileys channel\n# https://web.whatsapp.com/check-update?version=0&platform=web\nCONFIG_SESSION_PHONE_VERSION=2.3000.1015901307\n\n# Set qrcode display limit\nQRCODE_LIMIT=30\n# Color of the QRCode on base64\nQRCODE_COLOR='#175197'\n\n# Typebot - Environment variables\nTYPEBOT_ENABLED=false\n# old | latest\nTYPEBOT_API_VERSION=latest\n\n# Chatwoot - Environment variables\nCHATWOOT_ENABLED=false\n# If you leave this option as false, when deleting the message for everyone on WhatsApp, it will not be deleted on Chatwoot.\nCHATWOOT_MESSAGE_READ=true\n# If you leave this option as true, when sending a message in Chatwoot, the client's last message will be marked as read on WhatsApp.\nCHATWOOT_MESSAGE_DELETE=true\n# If you leave this option as true, a contact will be created on Chatwoot to provide the QR Code and update messages about the instance.\nCHATWOOT_BOT_CONTACT=true\n# This db connection is used to import messages from whatsapp to chatwoot database\nCHATWOOT_IMPORT_DATABASE_CONNECTION_URI=postgresql://user:passwprd@host:5432/chatwoot?sslmode=disable\nCHATWOOT_IMPORT_PLACEHOLDER_MEDIA_MESSAGE=true\n\n# OpenAI - Environment variables\nOPENAI_ENABLED=false\n\n# Dify - Environment variables\nDIFY_ENABLED=false\n\n# Cache - Environment variables\n# Redis Cache enabled\nCACHE_REDIS_ENABLED=true\nCACHE_REDIS_URI=redis://localhost:6379/6\nCACHE_REDIS_TTL=604800\n# Prefix serves to differentiate data from one installation to another that are using the same redis\nCACHE_REDIS_PREFIX_KEY=evolution\n# Enabling this variable will save the connection information in Redis and not in the database.\nCACHE_REDIS_SAVE_INSTANCES=false\n# Local Cache enabled\nCACHE_LOCAL_ENABLED=false\n\n# Amazon S3 - Environment variables\nS3_ENABLED=false\nS3_ACCESS_KEY=\nS3_SECRET_KEY=\nS3_BUCKET=evolution\nS3_PORT=443\nS3_ENDPOINT=s3.domain.com\nS3_REGION=eu-west-3\nS3_USE_SSL=true\n\n# AMAZON S3 - Environment variables\n# S3_ENABLED=true\n# S3_BUCKET=bucket_name\n# S3_ACCESS_KEY=access_key_id\n# S3_SECRET_KEY=secret_access_key\n# S3_ENDPOINT=s3.amazonaws.com # region: s3.eu-west-3.amazonaws.com\n# S3_REGION=eu-west-3\n\n# MINIO Use SSL - Environment variables\n# S3_ENABLED=true\n# S3_ACCESS_KEY=access_key_id\n# S3_SECRET_KEY=secret_access_key\n# S3_BUCKET=bucket_name\n# S3_PORT=443\n# S3_ENDPOINT=s3.domain.com\n# S3_USE_SSL=true\n# S3_REGION=eu-south\n\n# Evolution Audio Converter - Environment variables - https://github.com/EvolutionAPI/evolution-audio-converter\n# API_AUDIO_CONVERTER=http://localhost:4040/process-audio\n# API_AUDIO_CONVERTER_KEY=429683C4C977415CAAFCCE10F7D57E11\n\n# Define a global apikey to access all instances.\n# OBS: This key must be inserted in the request header to create an instance.\nAUTHENTICATION_API_KEY=429683C4C977415CAAFCCE10F7D57E11\n# If you leave this option as true, the instances will be exposed in the fetch instances endpoint.\nAUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=true\nLANGUAGE=en\n\n# Define a global proxy to be used if the instance does not have one\n# PROXY_HOST=\n# PROXY_PORT=80\n# PROXY_PROTOCOL=http\n# PROXY_USERNAME=\n# PROXY_PASSWORD="
        },
        {
          "name": ".eslintignore",
          "type": "blob",
          "size": 0.0185546875,
          "content": "/node-modules\n/dist"
        },
        {
          "name": ".eslintrc.js",
          "type": "blob",
          "size": 1.228515625,
          "content": "module.exports = {\n  parser: '@typescript-eslint/parser',\n  parserOptions: {\n    sourceType: 'CommonJS',\n  },\n  plugins: ['@typescript-eslint', 'simple-import-sort', 'import'],\n  extends: ['eslint:recommended', 'plugin:@typescript-eslint/recommended', 'plugin:prettier/recommended'],\n  globals: {\n    Atomics: 'readonly',\n    SharedArrayBuffer: 'readonly',\n  },\n  root: true,\n  env: {\n    node: true,\n    jest: true,\n  },\n  ignorePatterns: ['.eslintrc.js'],\n  rules: {\n    '@typescript-eslint/interface-name-prefix': 'off',\n    '@typescript-eslint/explicit-function-return-type': 'off',\n    '@typescript-eslint/explicit-module-boundary-types': 'off',\n    '@typescript-eslint/no-explicit-any': 'off',\n    '@typescript-eslint/no-empty-function': 'off',\n    '@typescript-eslint/no-non-null-assertion': 'off',\n    '@typescript-eslint/no-unused-vars': 'error',\n    'import/first': 'error',\n    'import/no-duplicates': 'error',\n    'simple-import-sort/imports': 'error',\n    'simple-import-sort/exports': 'error',\n    '@typescript-eslint/ban-types': [\n      'error',\n      {\n        extendDefaults: true,\n        types: {\n          '{}': false,\n          Object: false,\n        },\n      },\n    ],\n    'prettier/prettier': ['error', { endOfLine: 'auto' }],\n  },\n};\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.5244140625,
          "content": "# compiled output\n/dist\n/node_modules\n\n/Docker/.env\n\n.vscode\n\n# Logs\nlogs/**.json\n*.log\nnpm-debug.log*\npnpm-debug.log*\nyarn-debug.log*\nyarn-error.log*\nlerna-debug.log*\n\n/docker-compose-data\n/docker-data\n\n# Package\n/yarn.lock\n/pnpm-lock.yaml\n/package-lock.json\n\n# IDEs\n.vscode/*\n!.vscode/settings.json\n!.vscode/tasks.json\n!.vscode/launch.json\n!.vscode/extensions.json\n.nova/*\n.idea/*\n\n# Project related\n/instances/*\n!/instances/.gitkeep\n/test/\n/src/env.yml\n/store\n*.env\n\n/temp/*\n\n.DS_Store\n*.DS_Store\n.tool-versions\n\n/prisma/migrations/*\n"
        },
        {
          "name": ".prettierrc.js",
          "type": "blob",
          "size": 0.2236328125,
          "content": "module.exports = {\n  semi: true,\n  trailingComma: 'all',\n  singleQuote: true,\n  printWidth: 120,\n  arrowParens: 'always',\n  tabWidth: 2,\n  useTabs: false,\n  bracketSameLine: false,\n  bracketSpacing: true,\n  parser: 'typescript'\n}"
        },
        {
          "name": ".vscode",
          "type": "tree",
          "content": null
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 27.060546875,
          "content": "# 2.2.0 (develop)\n\n### Features\n\n* Fake Call function\n* Send List with Baileys\n* Send Buttons with Baileys\n* Added unreadMessages to chats\n* Pusher event integration\n* Add support for splitMessages and timePerChar in Integrations\n* Audio Converter via API\n* Send PTV messages with Baileys\n\n### Fixed\n\n* Fixed prefilledVariables in startTypebot\n* Fix duplicate file upload\n* Mark as read from me and groups\n* Fetch chats query\n* Ads messages in chatwoot\n* Add indexes to improve performance in Evolution\n* Add logical or permanent message deletion based on env config\n* Add support for fetching multiple instances by key\n* Update instance.controller.ts to filter by instanceName\n* Receive template button reply message\n\n# 2.1.2 (2024-10-06 10:09)\n\n### Features\n\n* Sync lost messages on chatwoot\n* Set the maximum number of listeners that can be registered for events\n* Now is possible send medias with form-data\n\n### Fixed\n\n* Fetch status message\n* Adjusts in migrations\n* Update pushName in chatwoot\n* Validate message before sending chatwoot\n* Adds the message status to the return of the \"prepareMessage\" function\n* Fixed openai setting when send a message with chatwoot\n* Fix buildkey function in hSet and hDelete\n* Fix mexico number\n* Update baileys version\n* Update in Baileys version that fixes timeout when updating profile picture\n* Adjusts for fix timeout error on send status message\n* Chatwoot verbose logs\n* Adjusts on prisma connections\n* License terms updated\n* Fixed send message to group without no cache (local or redis)\n* Fixed startTypebot with startSession = true\n* Fixed issue of always creating a new label when saving chatwoot\n* Fixed getBase64FromMediaMessage with convertToMp4\n* Fixed bug when send message when don't have mentionsEveryOne on payload\n* Does not search message without chatwoot Message Id for reply\n* Fixed bot fallback not working on integrations\n\n# 2.1.1 (2024-09-22 10:31)\n\n### Features\n\n* Define a global proxy to be used if the instance does not have one\n* Save is on whatsapp on the database\n* Add headers to the instance's webhook registration\n* Debounce message break is now \"\\n\" instead of white space\n* Single view messages are now supported in chatwoot\n* Chatbots can now send any type of media\n\n### Fixed\n\n* Validate if cache exists before accessing it\n* Missing autoCreate chatwoot in instance create\n* Fixed bugs in the frontend, on the event screens\n* Fixed use chatwoot with evolution channel\n* Fix chatwoot reply quote with Cloud API\n* Use exchange name from .env on RabbitMQ\n* Fixed chatwoot screen\n* It is now possible to send images via the Evolution Channel\n* Removed \"version\" from docker-compose as it is obsolete (https://dev.to/ajeetraina/do-we-still-use-version-in-compose-3inp)\n* Fixed typebot ignoreJids being used only from default settings\n* Fixed Chatwoot inbox creation on save\n* Changed axios timeout for manager requests for 30s\n* Update in Baileys version that fixes timeout when updating profile picture\n* Fixed issue when sending links in markdown by chatbots like Dify\n* Fixed issue with chatbots not respecting settings\n\n# 2.1.0 (2024-08-26 15:33)\n\n### Features\n\n* Improved layout manager\n* Translation in manager: English, Portuguese, Spanish and French\n* Evolution Bot Integration\n* Option to disable chatwoot bot contact with CHATWOOT_BOT_CONTACT\n* Added flowise integration\n* Added evolution channel on instance create\n* Change in license to Apache-2.0\n* Mark All in events\n\n### Fixed\n\n* Refactor integrations structure for modular system\n* Fixed dify agent integration\n* Update Baileys Version\n* Fixed proxy config in manager\n* Fixed send messages in groups\n* S3 saving media sent from me\n* Fixed duplication bot when use startTypebot\n\n### Break Changes\n\n* Payloads for events changed (create Instance and set events). Check postman to understand\n\n# 2.0.10 (2024-08-16 16:23)\n\n### Features\n\n* OpenAI send images when markdown\n* Dify send images when markdown\n* Sentry implemented\n\n### Fixed\n\n* Fix on get profilePicture\n* Added S3_REGION on minio settings\n\n# 2.0.9 (2024-08-15 12:31)\n\n### Features\n\n* Added ignoreJids in chatwoot settings\n* Dify now identifies images\n* Openai now identifies images\n\n### Fixed\n\n* Path mapping & deps fix & bundler changed to tsup\n* Improve database scripts to retrieve the provider from env file\n* Update contacts database with unique index\n* Save chat name\n* Correction of media as attachments in chatwoot when using a Meta API Instance and not Baileys\n* Update Baileys version 6.7.6\n* Deprecate buttons and list in new Baileys version\n* Changed labels to be unique on the same instance\n* Remove instance from redis even if using database\n* Unified integration session system so they don't overlap\n* Temporary fix for pictureUrl bug in groups\n* Fix on migrations\n\n# 2.0.9-rc (2024-08-09 18:00)\n\n### Features\n\n* Added general session button in typebot, dify and openai in manager\n* Added compatibility with mysql through prisma\n\n### Fixed\n\n* Import contacts with image in chatwoot\n* Fix conversationId when is dify agent\n* Fixed loading of selects in the manager\n* Add restart button to sessions screen\n* Adjustments to docker files\n* StopBotFromMe working with chatwoot\n\n# 2.0.8-rc (2024-08-08 20:23)\n\n### Features\n\n* Variables passed to the input in dify\n* OwnerJid passed to typebot\n* Function for openai assistant added\n\n### Fixed\n\n* Adjusts in telemetry\n\n# 2.0.7-rc (2024-08-03 14:04)\n\n### Fixed\n\n* BusinessId added on create instances in manager\n* Adjusts in restart instance\n* Resolve issue with connecting to instance\n* Session is now individual per instance and remoteJid\n* Credentials verify on manager login\n* Added description column on typebot, dify and openai\n* Fixed dify agent integration\n\n# 2.0.6-rc (2024-08-02 19:23)\n\n### Features\n\n* Get models for OpenAI\n\n### Fixed\n\n* fetchInstances with clientName parameter\n* fixed update typebot, openai and dify\n\n# 2.0.5-rc (2024-08-01 18:01)\n\n### Features\n\n* Speech to Text with Openai\n\n### Fixed\n\n* ClientName on infos\n* Instance screen scroll bar in manager\n\n# 2.0.4-rc (2024-07-30 14:13)\n\n### Features\n\n* New manager v2.0\n* Dify integration\n\n### Fixed\n\n* Update Baileys Version\n* Adjusts for new manager\n* Corrected openai trigger validation\n* Corrected typebot trigger validation\n\n# 2.0.3-beta (2024-07-29 09:03)\n\n### Features\n\n* Webhook url by submitted template to send status updates\n* Sending template approval status webhook\n\n### Fixed\n\n* Equations and adjustments for the new manager\n* Adjust TriggerType for OpenAI and Typebot integrations\n* Fixed Typebot start call with active session\n\n# 2.0.2-beta (2024-07-18 21:33)\n\n### Feature\n\n* Open AI implemented\n\n### Fixed\n\n* Fixed the function of saving or not saving data in the database\n* Resolve not find name\n* Removed DEL_TEMP_INSTANCES as it is not being used\n* Fixed global exchange name\n* Add apiKey and serverUrl to prefilledVariables in typebot service\n* Correction in start typebot, if it doesn't exist, create it\n\n# 2.0.1-beta (2024-07-17 17:01)\n\n### Fixed\n\n* Resolved issue with Chatwoot not receiving messages sent by Typebot\n\n# 2.0.0-beta (2024-07-14 17:00)\n\n### Feature\n\n* Added prisma orm, connection to postgres and mysql\n* Added chatwoot integration activation\n* Added typebot integration activation\n* Now you can register several typebots with triggers\n* Media sent to typebot now goes as a template string, example: imageMessage|MESSAGE_ID\n* Organization configuration and logo in chatwoot bot contact\n* Added debounce time for typebot messages\n* Tagging in chatwoot contact by instance\n* Add support for managing WhatsApp templates via official API\n* Fixes and implementation of regex and fallback in typebot\n* Ignore jids configuration added to typebot (will be used for both groups and contacts)\n* Minio and S3 integration\n* When S3 integration enabled, the media sent to typebot now goes as a template string, example: imageMessage|MEDIA_URL\n\n### Fixed\n\n* Removed excessive verbose logs\n* Optimization in instance registration\n* Now in typebot we wait until the terminal block to accept the user's message, if it arrives before the block is sent, it is ignored\n* Correction of audio sending, now we can speed it up and have the audio wireframe\n* Reply with media message on Chatwoot\n* improvements in sending status and groups\n* Correction in response returns from buttons, lists and templates\n* EvolutionAPI/Baileys implemented\n\n### Break changes\n\n* jwt authentication removed\n* Connection to mongodb removed\n* Standardized all request bodies to use camelCase\n* Change in webhook information from owner to instanceId\n* Changed the .env file configuration, removed the yml version and added .env to the repository root\n* Removed the mobile type connection with Baileys\n* Simplified payloads and endpoints\n* Improved Typebot\n  - Now you can register several typebots\n  - Start configuration by trigger or for all\n  - Session search by typebot or remoteJid\n  - KeepOpen configuration (keeps the session even when the bot ends, to run once per contact)\n  - StopBotFromMe configuration, allows me to stop the bot if I send a chat message.\n* Changed the way the goal webhook is configured\n\n# 1.8.2 (2024-07-03 13:50)\n\n### Fixed\n\n* Corretion in globall rabbitmq queue name\n* Improvement in the use of mongodb database for credentials\n* Fixed base64 in webhook for documentWithCaption\n* Fixed Generate pairing code\n\n# 1.8.1 (2024-06-08 21:32)\n\n### Feature\n\n* New method of saving sessions to a file using worker, made in partnership with [codechat](https://github.com/code-chat-br/whatsapp-api)\n\n### Fixed\n\n* Correction of variables breaking lines in typebot\n\n### Fixed\n\n* Correction of variables breaking lines in typebot\n\n# 1.8.0 (2024-05-27 16:10)\n\n### Feature\n\n* Now in the manager, when logging in with the client's apikey, the listing only shows the instance corresponding to the provided apikey (only with MongoDB)\n* New global mode for rabbitmq events\n* Build in docker for linux/amd64, linux/arm64 platforms\n\n### Fixed\n\n* Correction in message formatting when generated by AI as markdown in typebot\n* Security fix in fetch instance with client key when not connected to mongodb\n\n# 1.7.5 (2024-05-21 08:50)\n\n### Fixed\n\n* Add merge_brazil_contacts function to solve nine digit in brazilian numbers\n* Optimize ChatwootService method for updating contact\n* Fix swagger auth\n* Update aws sdk v3\n* Fix getOpenConversationByContact and init queries error\n* Method to mark chat as unread\n* Added environment variable to manually select the WhatsApp web version for the baileys lib (optional)\n\n# 1.7.4 (2024-04-28 09:46)\n\n### Fixed\n\n* Adjusts in proxy on fetchAgent\n* Recovering messages lost with redis cache\n* Log when init redis cache service\n* Recovering messages lost with redis cache\n* Chatwoot inbox name\n* Update Baileys version\n\n# 1.7.3 (2024-04-18 12:07)\n\n### Fixed\n\n* Revert fix audio encoding\n* Recovering messages lost with redis cache\n* Adjusts in redis for save instances\n* Adjusts in proxy\n* Revert pull request #523\n* Added instance name on logs\n* Added support for Spanish\n* Fix error: invalid operator. The allowed operators for identifier are equal_to,not_equal_to in chatwoot\n\n# 1.7.2 (2024-04-12 17:31)\n\n### Feature\n\n* Mobile connection via sms (test)\n\n### Fixed\n\n* Adjusts in redis\n* Send global event in websocket\n* Adjusts in proxy\n* Fix audio encoding\n* Fix conversation read on chatwoot version 3.7\n* Fix when receiving/sending messages from whatsapp desktop with ephemeral messages enabled\n* Changed returned sessions on typebot status change\n* Reorganization of files and folders\n\n# 1.7.1 (2024-04-03 10:19)\n\n### Fixed\n\n* Correction when sending files with captions on Whatsapp Business\n* Correction in receiving messages with response on WhatsApp Business\n* Correction when sending a reaction to a message on WhatsApp Business\n* Correction of receiving reactions on WhatsApp business\n* Removed mandatory description of rows from sendList\n* Feature to collect message type in typebot\n\n# 1.7.0 (2024-03-11 18:23)\n\n### Feature\n\n* Added update message endpoint\n* Add translate capabilities to QRMessages in CW\n* Join in Group by Invite Code\n* Read messages from whatsapp in chatwoot\n* Add support to use use redis in cacheservice\n* Add support for labels\n* Command to clearcache from chatwoot inbox\n* Whatsapp Cloud API Oficial\n\n### Fixed\n\n* Proxy configuration improvements\n* Correction in sending lists\n* Adjust in webhook_base64\n* Correction in typebot text formatting\n* Correction in chatwoot text formatting and render list message\n* Only use a axios request to get file mimetype if necessary\n* When possible use the original file extension\n* When receiving a file from whatsapp, use the original filename in chatwoot if possible\n* Remove message ids cache in chatwoot to use chatwoot's api itself\n* Adjusts the quoted message, now has contextInfo in the message Raw\n* Collecting responses with text or numbers in Typebot\n* Added sendList endpoint to swagger documentation\n* Implemented a function to synchronize message deletions on WhatsApp, automatically reflecting in Chatwoot.\n* Improvement on numbers validation\n* Fix polls in message sending\n* Sending status message\n* Message 'connection successfully' spamming\n* Invalidate the conversation cache if reopen_conversation is false and the conversation was resolved\n* Fix looping when deleting a message in chatwoot\n* When receiving a file from whatsapp, use the original filename in chatwoot if possible\n* Correction in the sendList Function\n* Implement contact upsert in messaging-history.set\n* Improve proxy error handling\n* Refactor fetching participants for group in WhatsApp service\n* Fixed problem where the typebot final keyword did not work\n* Typebot's wait now pauses the flow and composing is defined by the delay_message parameter in set typebot\n* Composing over 20s now loops until finished\n\n# 1.6.1 (2023-12-22 11:43)\n\n### Fixed\n\n* Fixed Lid Messages\n* Fixed sending variables to typebot\n* Fixed sending variables from typebot\n* Correction sending s3/minio media to chatwoot and typebot\n* Fixed the problem with typebot closing at the end of the flow, now this is optional with the TYPEBOT_KEEP_OPEN variable\n* Fixed chatwoot Bold, Italic and Underline formatting using Regex\n* Added the sign_delimiter property to the Chatwoot configuration, allowing you to set a different delimiter for the signature. Default when not defined \\n\n* Include instance Id field in the instance configuration\n* Fixed the pairing code\n* Adjusts in typebot\n* Fix the problem when disconnecting the instance and connecting again using mongodb\n* Options to disable docs and manager\n* When deleting a message in whatsapp, delete the message in chatwoot too\n\n\n# 1.6.0 (2023-12-12 17:24)\n\n### Feature\n\n* Added AWS SQS Integration\n* Added support for new typebot API\n* Added endpoint sendPresence\n* New Instance Manager\n* Added auto_create to the chatwoot set to create the inbox automatically or not\n* Added reply, delete and message reaction in chatwoot v3.3.1\n\n### Fixed\n\n* Adjusts in proxy\n* Adjusts in start session for Typebot\n* Added mimetype field when sending media\n* Ajusts in validations to messages.upsert\n* Fixed messages not received: error handling when updating contact in chatwoot\n* Fix workaround to manage param data as an array in mongodb\n* Removed await from webhook when sending a message\n* Update typebot.service.ts - element.underline change ~ for *\n* Removed api restart on receiving an error\n* Fixes in mongodb and chatwoot\n* Adjusted return from queries in mongodb\n* Added restart instance when update profile picture\n* Correction of chatwoot functioning with admin flows\n* Fixed problem that did not generate qrcode with the chatwoot_conversation_pending option enabled\n* Fixed issue where CSAT opened a new ticket when reopen_conversation was disabled\n* Fixed issue sending contact to Chatwoot via iOS\n\n### Integrations\n\n* Chatwoot: v3.3.1\n* Typebot: v2.20.0\n\n# 1.5.4 (2023-10-09 20:43)\n\n### Fixed\n\n* Baileys logger typing issue resolved\n* Solved problem with duplicate messages in chatwoot\n\n# 1.5.3 (2023-10-06 18:55)\n\n### Feature\n\n* Swagger documentation\n* Added base 64 sending option via webhook\n\n### Fixed\n\n* Remove rabbitmq queues when delete instances\n* Improvement in restart instance to completely redo the connection\n* Update node version: v20\n* Correction of messages sent by the api and typebot not appearing in chatwoot\n* Adjustment to start typebot, added startSession parameter\n* Chatwoot now receives messages sent via api and typebot\n* Fixed problem with starting with an input in typebot\n* Added check to ensure variables are not empty before executing foreach in start typebot\n\n# 1.5.2 (2023-09-28 17:56)\n\n### Fixed\n\n* Fix chatwootSchema in chatwoot model to store reopen_conversation and conversation_pending options\n* Problem resolved when sending files from minio to typebot\n* Improvement in the \"startTypebot\" method to create persistent session when triggered\n* New manager for Evo 1.5.2 - Set Typebot update\n* Resolved problems when reading/querying instances\n\n# 1.5.1 (2023-09-17 13:50)\n\n### Feature\n\n* Added listening_from_me option in Set Typebot\n* Added variables options in Start Typebot\n* Added webhooks for typebot events\n* Added ChamaAI integration\n* Added webhook to send errors\n* Added support for messaging with ads on chatwoot\n\n### Fixed\n\n* Fix looping connection messages in chatwoot\n* Improved performance of fetch instances\n\n# 1.5.0 (2023-08-18 12:47)\n\n### Feature\n\n* New instance manager in /manager route\n* Added extra files for chatwoot and appsmith\n* Added Get Last Message and Archive for Chat\n* Added env var QRCODE_COLOR\n* Added websocket to send events\n* Added rabbitmq to send events\n* Added Typebot integration\n* Added proxy endpoint\n* Added send and date_time in webhook data\n\n### Fixed\n\n* Solved problem when disconnecting from the instance the instance was deleted\n* Encoded spaces in chatwoot webhook\n* Adjustment in the saving of contacts, saving the information of the number and Jid\n* Update Dockerfile\n* If you pass empty events in create instance and set webhook it is understood as all\n* Fixed issue that did not output base64 averages\n* Messages sent by the api now arrive in chatwoot\n\n### Integrations\n\n* Chatwoot: v2.18.0 - v3.0.0\n* Typebot: v2.16.0\n* Manager Evolution API\n\n# 1.4.8 (2023-07-27 10:27)\n\n### Fixed\n\n* Fixed error return bug\n\n# 1.4.7 (2023-07-27 08:47)\n\n### Fixed\n\n* Fixed error return bug\n* Fixed problem of getting message when deleting message in chatwoot\n* Change in error return pattern\n\n# 1.4.6 (2023-07-26 17:54)\n\n### Fixed\n\n* Fixed bug of creating new inbox by chatwoot\n* When conversation reopens is pending when conversation pending is true\n* Added docker-compose file with dockerhub image\n\n# 1.4.5 (2023-07-26 09:32)\n\n### Fixed\n\n* Fixed problems in localization template in chatwoot\n* Fix mids going duplicated in chatwoot\n\n# 1.4.4 (2023-07-25 15:24)\n\n### Fixed\n\n* Fixed chatwoot line wrap issue\n* Solved receive location in chatwoot\n* When requesting the pairing code, it also brings the qr code\n* Option reopen_conversation in chatwoot endpoint\n* Option conversation_pending in chatwoot endpoint\n\n# 1.4.3 (2023-07-25 10:51)\n\n### Fixed\n\n* Adjusts in settings with options always_online, read_messages and read_status\n* Fixed send webhook for event CALL\n* Create instance with settings\n\n# 1.4.2 (2023-07-24 20:52)\n\n### Fixed\n\n* Fixed validation is set settings\n* Adjusts in group validations\n* Ajusts in sticker message to chatwoot\n\n# 1.4.1 (2023-07-24 18:28)\n\n### Fixed\n\n* Fixed reconnect with pairing code or qrcode\n* Fixed problem in createJid\n\n# 1.4.0 (2023-07-24 17:03)\n\n### Features\n\n* Added connection functionality via pairing code\n* Added fetch profile endpoint in chat controller\n* Created settings controller\n* Added reject call and send text message when receiving a call\n* Added setting to ignore group messages\n* Added connection with pairing code in chatwoot with command /init:{NUMBER}\n* Added encoding option in endpoint sendWhatsAppAudio\n\n### Fixed\n\n* Added link preview option in send text message\n* Fixed problem with fileSha256 appearing when sending a sticker in chatwoot\n* Fixed issue where it was not possible to open a conversation when sent at first by me on my cell phone in chatwoot\n* Now it only updates the contact name if it is the same as the phone number in chatwoot\n* Now accepts all chatwoot inbox templates\n* Command to create new instances set to /new_instance:{NAME}:{NUMBER}\n* Fix in chatwoot set, sign msg can now be disabled\n\n### Integrations\n\n* Chatwoot: v2.18.0 - v3.0.0 (Beta)\n\n# 1.3.2 (2023-07-21 17:19)\n\n### Fixed\n\n* Fix in update settings that needed to restart after updated\n* Correction in the use of the api with mongodb\n* Adjustments to search endpoint for contacts, chats, messages and Status messages\n* Now when deleting the instance, the data referring to it in mongodb is also deleted\n* It is now validated if the instance name contains uppercase and special characters\n* For compatibility reasons, container mode has been removed\n* Added docker-compose files example\n\n### Integrations\n\n* Chatwoot: v2.18.0\n\n# 1.3.1 (2023-07-20 07:48)\n\n### Fixed\n\n* Adjust in create store files\n\n### Integrations\n\n* Chatwoot: v2.18.0\n\n# 1.3.0 (2023-07-19 11:33)\n\n### Features\n\n* Added messages.delete event\n* Added restart instance endpoint\n* Created automation for creating instances in the chatwoot bot with the command '#inbox_whatsapp:{INSTANCE_NAME}\n* Change Baileys version to: 6.4.0\n* Send contact in chatwoot\n* Send contact array in chatwoot\n* Added apiKey in webhook and serverUrl in fetchInstance if EXPOSE_IN_FETCH_INSTANCES: true\n* Translation set to default (english) in chatwoot\n\n### Fixed\n\n* Fixed error to send message in large groups\n* Docker files adjusted\n* Fixed in the postman collection the webhookByEvent parameter by webhook_by_events\n* Added validations in create instance\n* Removed link preview endpoint, now it's done automatically from sending conventional text\n* Added group membership validation before sending message to groups\n* Adjusts in docker files\n* Adjusts in returns in endpoints chatwoot and webhook\n* Fixed ghost mentions in send text message\n* Fixed bug that saved contacts from groups came without number in chatwoot\n* Fixed problem to receive csat in chatwoot\n* Fixed require fileName for document only in base64 for send media message\n* Bug fix when sending mobile message change contact name to number in chatwoot\n* Bug fix when connecting whatsapp does not send confirmation message\n* Fixed quoted message with id or message directly\n* Adjust in validation for mexican and argentine numbers\n* Adjust in create store files\n\n### Integrations\n\n* Chatwoot: v2.18.0\n\n# 1.2.2 (2023-07-15 09:36)\n\n### Fixed\n\n* Tweak in route \"/\" with version info\n* Adjusts chatwoot version\n\n### Integrations\n\n* Chatwoot: v2.18.0\n\n# 1.2.1 (2023-07-14 19:04)\n\n### Fixed\n\n* Adjusts in docker files\n* Save picture url groups in chatwoot\n\n# 1.2.0 (2023-07-14 15:28)\n\n### Features\n\n* Native integration with chatwoot\n* Added returning or non-returning participants option in fetchAllGroups\n* Added group integration to chatwoot\n* Added automation on create instance to chatwoot\n* Added verbose logs and format chatwoot service\n\n### Fixed\n\n* Adjusts in docker-compose files\n* Adjusts in number validation for AR and MX numbers\n* Adjusts in env files, removed save old_messages\n* Fix when sending a message to a group I don't belong returns a bad request\n* Fits the format on return from the fetchAllGroups endpoint\n* Adjust in send document with caption from chatwoot\n* Fixed message with undefind in chatwoot\n* Changed message in path /\n* Test duplicate message media in groups chatwoot\n* Optimize send message from group with mentions\n* Fixed name of the profile status in fetchInstances\n* Fixed error 500 when logout in instance with status = close\n\n# 1.1.5 (2023-07-12 07:17)\n\n### Fixed\n\n* Adjusts in temp folder\n* Return with event send_message\n\n# 1.1.4 (2023-07-08 11:01)\n\n### Features\n\n* Route to send status broadcast\n* Added verbose logs\n* Insert allContacts in payload of endpoint sendStatus\n\n### Fixed\n\n* Adjusted set in webhook to go empty when enabled false\n* Adjust in store files\n* Fixed the problem when do not save contacts when receive messages\n* Changed owner of the jid for instanceName\n* Create .env for installation in docker\n\n# 1.1.3 (2023-07-06 11:43)\n\n### Features\n\n* Added configuration for Baileys log level in env\n* Added audio to mp4 converter in optionally get Base64 From MediaMessage\n* Added organization name in vcard\n* Added email in vcard\n* Added url in vcard\n* Added verbose logs\n\n### Fixed\n\n* Added timestamp internally in urls to avoid caching\n* Correction in decryption of poll votes\n* Change in the way the api sent and saved the sent messages, now it goes in the messages.upsert event\n* Fixed cash when sending stickers via url\n* Improved how Redis works for instances\n* Fixed problem when disconnecting the instance it removes the instance\n* Fixed problem sending ack when preview is done by me\n* Adjust in store files\n\n# 1.1.2 (2023-06-28 13:43)\n\n### Fixed\n\n* Fixed baileys version in package.json\n* Fixed problem that did not validate if the token passed in create instance already existed\n* Fixed problem that does not delete instance files in server mode\n\n# 1.1.1 (2023-06-28 10:27)\n\n### Features\n\n* Added group invitation sending\n* Added webhook configuration per event in the individual instance registration\n\n### Fixed\n\n* Adjust dockerfile variables\n\n# 1.1.0 (2023-06-21 11:17)\n\n### Features\n\n* Improved fetch instances endpoint, now it also fetch other instances even if they are not connected\n* Added conversion of audios for sending recorded audio, now it is possible to send mp3 audios and not just ogg\n* Route to fetch all groups that the connection is part of\n* Route to fetch all privacy settings\n* Route to update the privacy settings\n* Route to update group subject\n* Route to update group description\n* Route to accept invite code\n* Added configuration of events by webhook of instances\n* Now the api key can be exposed in fetch instances if the EXPOSE_IN_FETCH_INSTANCES variable is set to true\n* Added option to generate qrcode as soon as the instance is created\n* The created instance token can now also be optionally defined manually in the creation endpoint\n* Route to send Sticker\n\n### Fixed\n\n* Adjust dockerfile variables\n* tweaks in docker-compose to pass variables\n* Adjust the route getProfileBusiness to fetchProfileBusiness\n* fix error after logout and try to get status or to connect again\n* fix sending narrated audio on whatsapp android and ios\n* fixed the problem of not disabling the global webhook by the variable\n* Adjustment in the recording of temporary files and periodic cleaning\n* Fix for container mode also work only with files\n* Remove recording of old messages on sync\n\n# 1.0.9 (2023-06-10)\n\n### Fixed\n\n* Adjust dockerfile variables\n\n# 1.0.8 (2023-06-09)\n\n### Features\n\n* Added Docker compose file\n* Added ChangeLog file\n\n# 1.0.7 (2023-06-08)\n\n### Features\n\n* Ghost mention\n* Mention in reply\n* Profile photo change\n* Profile name change\n* Profile status change\n* Sending a poll\n* Creation of LinkPreview if message contains URL\n* New webhooks system, which can be separated into a url per event\n* Sending the local webhook url as destination in the webhook data for webhook redirection\n* Startup modes, server or container\n* Server Mode works normally as everyone is used to\n* Container mode made to use one instance per container, when starting the application an instance is already created and the qrcode is generated and it starts sending webhook without having to call it manually, it only allows one instance at a time.\n"
        },
        {
          "name": "Docker",
          "type": "tree",
          "content": null
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 1.5126953125,
          "content": "FROM node:20-alpine AS builder\n\nRUN apk update && \\\n    apk add git ffmpeg wget curl bash\n\nLABEL version=\"2.2.0\" description=\"Api to control whatsapp features through http requests.\" \nLABEL maintainer=\"Davidson Gomes\" git=\"https://github.com/DavidsonGomes\"\nLABEL contact=\"contato@atendai.com\"\n\nWORKDIR /evolution\n\nCOPY ./package.json ./tsconfig.json ./\n\nRUN npm install -f\n\nCOPY ./src ./src\nCOPY ./public ./public\nCOPY ./prisma ./prisma\nCOPY ./manager ./manager\nCOPY ./.env.example ./.env\nCOPY ./runWithProvider.js ./\nCOPY ./tsup.config.ts ./\n\nCOPY ./Docker ./Docker\n\nRUN chmod +x ./Docker/scripts/* && dos2unix ./Docker/scripts/*\n\nRUN ./Docker/scripts/generate_database.sh\n\nRUN npm run build\n\nFROM node:20-alpine AS final\n\nRUN apk update && \\\n    apk add tzdata ffmpeg bash\n\nENV TZ=America/Sao_Paulo\n\nWORKDIR /evolution\n\nCOPY --from=builder /evolution/package.json ./package.json\nCOPY --from=builder /evolution/package-lock.json ./package-lock.json\n\nCOPY --from=builder /evolution/node_modules ./node_modules\nCOPY --from=builder /evolution/dist ./dist\nCOPY --from=builder /evolution/prisma ./prisma\nCOPY --from=builder /evolution/manager ./manager\nCOPY --from=builder /evolution/public ./public\nCOPY --from=builder /evolution/.env ./.env\nCOPY --from=builder /evolution/Docker ./Docker\nCOPY --from=builder /evolution/runWithProvider.js ./runWithProvider.js\nCOPY --from=builder /evolution/tsup.config.ts ./tsup.config.ts\n\nENV DOCKER_ENV=true\n\nEXPOSE 8080\n\nENTRYPOINT [\"/bin/bash\", \"-c\", \". ./Docker/scripts/deploy_database.sh && npm run start:prod\" ]"
        },
        {
          "name": "Extras",
          "type": "tree",
          "content": null
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.74609375,
          "content": "# Evolution API License\n\nEvolution API is licensed under the Apache License 2.0, with the following additional conditions:\n\n1. Evolution API may be utilized commercially, including as a backend service for other applications or as an application development platform for enterprises. Should the conditions below be met, a commercial license must be obtained from the producer:\n\na. LOGO and copyright information: In the process of using Evolution API's frontend components, you may not remove or modify the LOGO or copyright information in the Evolution API console or applications. This restriction is inapplicable to uses of Evolution API that do not involve its frontend components.\n\nb. Usage Notification Requirement: If Evolution API is used as part of any project, including closed-source systems (e.g., proprietary software), the user is required to display a clear notification within the system that Evolution API is being utilized. This notification should be visible to system administrators and accessible from the system's documentation or settings page. Failure to comply with this requirement may result in the necessity for a commercial license, as determined by the producer.\n\nPlease contact contato@atendai.com to inquire about licensing matters.\n\n2. As a contributor, you should agree that:\n\na. The producer can adjust the open-source agreement to be more strict or relaxed as deemed necessary.\nb. Your contributed code may be used for commercial purposes, including but not limited to its cloud business operations.\n\nApart from the specific conditions mentioned above, all other rights and restrictions follow the Apache License 2.0. Detailed information about the Apache License 2.0 can be found at http://www.apache.org/licenses/LICENSE-2.0.\n\n© 2024 Evolution API\n\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 7.275390625,
          "content": "<h1 align=\"center\">Evolution Api</h1>\n\n<div align=\"center\">\n\n[![Whatsapp Group](https://img.shields.io/badge/Group-WhatsApp-%2322BC18)](https://evolution-api.com/whatsapp)\n[![Discord Community](https://img.shields.io/badge/Discord-Community-blue)](https://evolution-api.com/discord)\n[![Postman Collection](https://img.shields.io/badge/Postman-Collection-orange)](https://evolution-api.com/postman) \n[![Documentation](https://img.shields.io/badge/Documentation-Official-green)](https://doc.evolution-api.com)\n[![License](https://img.shields.io/badge/license-Apache--2.0-blue)](./LICENSE)\n[![Support](https://img.shields.io/badge/Donation-picpay-green)](https://app.picpay.com/user/davidsongomes1998)\n[![Sponsors](https://img.shields.io/badge/Github-sponsor-orange)](https://github.com/sponsors/EvolutionAPI)\n\n</div>\n  \n<div align=\"center\"><img src=\"./public/images/cover.png\"></div>\n\n## Evolution API\n\nEvolution API began as a WhatsApp controller API based on [CodeChat](https://github.com/code-chat-br/whatsapp-api), which in turn implemented the [Baileys](https://github.com/WhiskeySockets/Baileys) library. While originally focused on WhatsApp, Evolution API has grown into a comprehensive platform supporting multiple messaging services and integrations. We continue to acknowledge CodeChat for laying the groundwork.\n\nToday, Evolution API is not limited to WhatsApp. It integrates with various platforms such as Typebot, Chatwoot, Dify, and OpenAI, offering a broad array of functionalities beyond messaging. Evolution API supports both the Baileys-based WhatsApp API and the official WhatsApp Business API, with upcoming support for Instagram and Messenger.\n\n## Looking for a Lightweight Version?\nFor those who need a more streamlined and performance-optimized version, check out [Evolution API Lite](https://github.com/EvolutionAPI/evolution-api-lite). It's designed specifically for microservices, focusing solely on connectivity without integrations or audio conversion features. Ideal for environments that prioritize simplicity and efficiency.\n\n## Types of Connections\n\nEvolution API supports multiple types of connections to WhatsApp, enabling flexible and powerful integration options:\n\n- *WhatsApp API - Baileys*:\n  - A free API based on WhatsApp Web, leveraging the [Baileys library](https://github.com/WhiskeySockets/Baileys).\n  - This connection type allows control over WhatsApp Web functionalities through a RESTful API, suitable for multi-service chats, service bots, and other WhatsApp-integrated systems.\n  - Note: This method relies on the web version of WhatsApp and may have limitations compared to official APIs.\n\n- *WhatsApp Cloud API*:\n  - The official API provided by Meta (formerly Facebook).\n  - This connection type offers a robust and reliable solution designed for businesses needing higher volumes of messaging and better integration support.\n  - The Cloud API supports features such as end-to-end encryption, advanced analytics, and more comprehensive customer service tools.\n  - To use this API, you must comply with Meta's policies and potentially pay for usage based on message volume and other factors.\n\n## Integrations\n\nEvolution API supports various integrations to enhance its functionality. Below is a list of available integrations and their uses:\n\n- [Typebot](https://typebot.io/):\n  - Build conversational bots using Typebot, integrated directly into Evolution with trigger management.\n\n- [Chatwoot](https://www.chatwoot.com/):\n  - Direct integration with Chatwoot for handling customer service for your business.\n\n- [RabbitMQ](https://www.rabbitmq.com/):\n  - Receive events from the Evolution API via RabbitMQ.\n\n- [Amazon SQS](https://aws.amazon.com/pt/sqs/):\n  - Receive events from the Evolution API via Amazon SQS.\n\n- [Socket.io](https://socket.io/):\n  - Receive events from the Evolution API via WebSocket.\n\n- [Dify](https://dify.ai/):\n  - Integrate your Evolution API directly with Dify AI for seamless trigger management and multiple agents.\n\n- [OpenAI](https://openai.com/):\n  - Integrate your Evolution API with OpenAI for AI capabilities, including audio-to-text conversion, available across all Evolution integrations.\n\n- Amazon S3 / Minio:\n  - Store media files received in [Amazon S3](https://aws.amazon.com/pt/s3/) or [Minio](https://min.io/).\n\n## Telemetry Notice\n\nTo continuously improve our services, we have implemented telemetry that collects data on the routes used, the most accessed routes, and the version of the API in use. We would like to assure you that no sensitive or personal data is collected during this process. The telemetry helps us identify improvements and provide a better experience for users.\n\n## Evolution Support Premium\n\nJoin our Evolution Pro community for expert support and a weekly call to answer questions. Visit the link below to learn more and subscribe:\n\n[Click here to learn more](https://evolution-api.com/suporte-pro)\n\n# Donate to the project.\n\n#### Github Sponsors\n\nhttps://github.com/sponsors/EvolutionAPI\n\n# Content Creator Partners\n\nWe are proud to collaborate with the following content creators who have contributed valuable insights and tutorials about Evolution API:\n\n- [Promovaweb](https://www.youtube.com/@promovaweb)\n- [Comunidade ZDG](https://www.youtube.com/@ComunidadeZDG)\n- [Francis MNO](https://www.youtube.com/@FrancisMNO)\n- [Pablo Cabral](https://youtube.com/@pablocabral)\n- [XPop Digital](https://www.youtube.com/@xpopdigital)\n- [Costar Wagner Dev](https://www.youtube.com/@costarwagnerdev)\n- [Dante Testa](https://youtube.com/@dantetesta_)\n- [Rubén Salazar](https://youtube.com/channel/UCnYGZIE2riiLqaN9sI6riig)\n- [OrionDesign](youtube.com/OrionDesign_Oficial)\n- [IMPA 365](youtube.com/@impa365_ofc)\n- [Comunidade Hub Connect](https://youtube.com/@comunidadehubconnect)\n- [dSantana Automações](https://www.youtube.com/channel/UCG7DjUmAxtYyURlOGAIryNQ?view_as=subscriber)\n- [Edison Martins](https://www.youtube.com/@edisonmartinsmkt)\n- [Astra Online](https://www.youtube.com/@astraonlineweb)\n- [MKT Seven Automações](https://www.youtube.com/@sevenautomacoes)\n- [Vamos automatizar](https://www.youtube.com/vamosautomatizar)\n\n## License\n\nEvolution API is licensed under the Apache License 2.0, with the following additional conditions:\n\n1. **LOGO and copyright information**: In the process of using Evolution API's frontend components, you may not remove or modify the LOGO or copyright information in the Evolution API console or applications. This restriction is inapplicable to uses of Evolution API that do not involve its frontend components.\n\n2. **Usage Notification Requirement**: If Evolution API is used as part of any project, including closed-source systems (e.g., proprietary software), the user is required to display a clear notification within the system that Evolution API is being utilized. This notification should be visible to system administrators and accessible from the system's documentation or settings page. Failure to comply with this requirement may result in the necessity for a commercial license, as determined by the producer.\n\nPlease contact contato@atendai.com to inquire about licensing matters.\n\nApart from the specific conditions mentioned above, all other rights and restrictions follow the Apache License 2.0. Detailed information about the Apache License 2.0 can be found at [http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0).\n\n© 2024 Evolution API"
        },
        {
          "name": "docker-compose.dev.yaml",
          "type": "blob",
          "size": 0.3896484375,
          "content": "services:\n  api:\n    container_name: evolution_api\n    image: evolution/api:local\n    build: .\n    restart: always\n    ports:\n      - 8080:8080\n    volumes:\n      - evolution_instances:/evolution/instances\n    networks:\n      - evolution-net\n    env_file:\n      - .env\n    expose:\n      - 8080\n\nvolumes:\n  evolution_instances:\n\n\nnetworks:\n  evolution-net:\n    name: evolution-net\n    driver: bridge\n"
        },
        {
          "name": "docker-compose.yaml",
          "type": "blob",
          "size": 1.0283203125,
          "content": "services:\n  api:\n    container_name: evolution_api\n    image: atendai/evolution-api:homolog\n    restart: always\n    depends_on:\n      - redis\n      - postgres\n    ports:\n      - 8080:8080\n    volumes:\n      - evolution_instances:/evolution/instances\n    networks:\n      - evolution-net\n    env_file:\n      - .env\n    expose:\n      - 8080\n\n  redis:\n    image: redis:latest\n    networks:\n      - evolution-net\n    container_name: redis\n    command: >\n      redis-server --port 6379 --appendonly yes\n    volumes:\n      - evolution_redis:/data\n    ports:\n      - 6379:6379\n\n  postgres:\n    container_name: postgres\n    image: postgres:15\n    networks:\n      - evolution-net\n    command: [\"postgres\", \"-c\", \"max_connections=1000\"]\n    restart: always\n    ports:\n      - 5432:5432\n    environment:\n      - POSTGRES_PASSWORD=PASSWORD\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    expose:\n      - 5432\n\nvolumes:\n  evolution_instances:\n  evolution_redis:\n  postgres_data:\n\n\nnetworks:\n  evolution-net:\n    name: evolution-net\n    driver: bridge\n"
        },
        {
          "name": "manager",
          "type": "tree",
          "content": null
        },
        {
          "name": "package.json",
          "type": "blob",
          "size": 4.0146484375,
          "content": "{\n  \"name\": \"evolution-api\",\n  \"version\": \"2.2.0\",\n  \"description\": \"Rest api for communication with WhatsApp\",\n  \"main\": \"./dist/main.js\",\n  \"type\": \"commonjs\",\n  \"scripts\": {\n    \"build\": \"tsc --noEmit && tsup\",\n    \"start\": \"tsnd -r tsconfig-paths/register --files --transpile-only ./src/main.ts\",\n    \"start:prod\": \"node dist/main\",\n    \"dev:server\": \"tsnd -r tsconfig-paths/register --files --transpile-only --respawn --ignore-watch node_modules ./src/main.ts\",\n    \"test\": \"tsnd -r tsconfig-paths/register --files --transpile-only --respawn --ignore-watch node_modules ./test/all.test.ts\",\n    \"lint\": \"eslint --fix --ext .ts src\",\n    \"db:generate\": \"node runWithProvider.js \\\"npx prisma generate --schema ./prisma/DATABASE_PROVIDER-schema.prisma\\\"\",\n    \"db:deploy\": \"node runWithProvider.js \\\"rm -rf ./prisma/migrations && cp -r ./prisma/DATABASE_PROVIDER-migrations ./prisma/migrations && npx prisma migrate deploy --schema ./prisma/DATABASE_PROVIDER-schema.prisma\\\"\",\n    \"db:studio\": \"node runWithProvider.js \\\"npx prisma studio --schema ./prisma/DATABASE_PROVIDER-schema.prisma\\\"\",\n    \"db:migrate:dev\": \"node runWithProvider.js \\\"rm -rf ./prisma/migrations && cp -r ./prisma/DATABASE_PROVIDER-migrations ./prisma/migrations && npx prisma migrate dev --schema ./prisma/DATABASE_PROVIDER-schema.prisma && cp -r ./prisma/migrations/* ./prisma/DATABASE_PROVIDER-migrations\\\"\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/EvolutionAPI/evolution-api.git\"\n  },\n  \"keywords\": [\n    \"chat\",\n    \"communication\",\n    \"message\",\n    \"send message\",\n    \"whatsapp\",\n    \"js-whatsapp\",\n    \"whatsapp-api\",\n    \"whatsapp-web\",\n    \"whatsapp\",\n    \"whatsapp-chat\",\n    \"whatsapp-group\",\n    \"automation\",\n    \"multi-device\",\n    \"bot\"\n  ],\n  \"author\": {\n    \"name\": \"Davidson Gomes\",\n    \"email\": \"contato@atendai.com\"\n  },\n  \"license\": \"Apache-2.0\",\n  \"bugs\": {\n    \"url\": \"https://github.com/EvolutionAPI/evolution-api/issues\"\n  },\n  \"homepage\": \"https://github.com/EvolutionAPI/evolution-api#readme\",\n  \"dependencies\": {\n    \"@adiwajshing/keyed-db\": \"^0.2.4\",\n    \"@aws-sdk/client-sqs\": \"^3.569.0\",\n    \"@ffmpeg-installer/ffmpeg\": \"^1.1.0\",\n    \"@figuro/chatwoot-sdk\": \"^1.1.16\",\n    \"@hapi/boom\": \"^10.0.1\",\n    \"@prisma/client\": \"^5.15.0\",\n    \"@sentry/node\": \"^8.28.0\",\n    \"amqplib\": \"^0.10.3\",\n    \"axios\": \"^1.6.5\",\n    \"baileys\": \"github:EvolutionAPI/Baileys\",\n    \"class-validator\": \"^0.14.1\",\n    \"compression\": \"^1.7.4\",\n    \"cors\": \"^2.8.5\",\n    \"dayjs\": \"^1.11.7\",\n    \"dotenv\": \"^16.4.5\",\n    \"eventemitter2\": \"^6.4.9\",\n    \"express\": \"^4.18.2\",\n    \"express-async-errors\": \"^3.1.1\",\n    \"fluent-ffmpeg\": \"^2.1.2\",\n    \"form-data\": \"^4.0.0\",\n    \"https-proxy-agent\": \"^7.0.2\",\n    \"i18next\": \"^23.7.19\",\n    \"jimp\": \"^0.16.13\",\n    \"json-schema\": \"^0.4.0\",\n    \"jsonschema\": \"^1.4.1\",\n    \"link-preview-js\": \"^3.0.4\",\n    \"long\": \"^5.2.3\",\n    \"mediainfo.js\": \"^0.3.2\",\n    \"mime\": \"^3.0.0\",\n    \"minio\": \"^8.0.1\",\n    \"multer\": \"^1.4.5-lts.1\",\n    \"node-cache\": \"^5.1.2\",\n    \"node-cron\": \"^3.0.3\",\n    \"openai\": \"^4.52.7\",\n    \"pg\": \"^8.11.3\",\n    \"pino\": \"^8.11.0\",\n    \"prisma\": \"^5.15.0\",\n    \"pusher\": \"^5.2.0\",\n    \"qrcode\": \"^1.5.1\",\n    \"qrcode-terminal\": \"^0.12.0\",\n    \"redis\": \"^4.6.5\",\n    \"sharp\": \"^0.32.2\",\n    \"socket.io\": \"^4.7.1\",\n    \"tsup\": \"^8.2.4\",\n    \"uuid\": \"^9.0.0\"\n  },\n  \"devDependencies\": {\n    \"@types/compression\": \"^1.7.2\",\n    \"@types/cors\": \"^2.8.13\",\n    \"@types/express\": \"^4.17.17\",\n    \"@types/json-schema\": \"^7.0.15\",\n    \"@types/mime\": \"3.0.0\",\n    \"@types/node\": \"^18.15.11\",\n    \"@types/node-cron\": \"^3.0.11\",\n    \"@types/qrcode\": \"^1.5.0\",\n    \"@types/qrcode-terminal\": \"^0.12.0\",\n    \"@types/uuid\": \"^8.3.4\",\n    \"@typescript-eslint/eslint-plugin\": \"^5.62.0\",\n    \"@typescript-eslint/parser\": \"^5.62.0\",\n    \"eslint\": \"^8.45.0\",\n    \"eslint-config-prettier\": \"^8.8.0\",\n    \"eslint-plugin-import\": \"^2.27.5\",\n    \"eslint-plugin-prettier\": \"^4.2.1\",\n    \"eslint-plugin-simple-import-sort\": \"^10.0.0\",\n    \"prettier\": \"^2.8.8\",\n    \"ts-node-dev\": \"^2.0.0\",\n    \"tsconfig-paths\": \"^4.2.0\",\n    \"typescript\": \"^5.5.4\"\n  }\n}\n"
        },
        {
          "name": "prisma",
          "type": "tree",
          "content": null
        },
        {
          "name": "public",
          "type": "tree",
          "content": null
        },
        {
          "name": "runWithProvider.js",
          "type": "blob",
          "size": 0.61328125,
          "content": "const dotenv = require('dotenv');\nconst { execSync } = require('child_process');\ndotenv.config();\n\nconst { DATABASE_PROVIDER } = process.env;\nconst databaseProviderDefault = DATABASE_PROVIDER ?? \"postgresql\"\n\nif (!DATABASE_PROVIDER) {\n  console.error(`DATABASE_PROVIDER is not set in the .env file, using default: ${databaseProviderDefault}`);\n  // process.exit(1);\n}\n\nconst command = process.argv\n  .slice(2)\n  .join(' ')\n  .replace(/\\DATABASE_PROVIDER/g, databaseProviderDefault);\n\ntry {\n  execSync(command, { stdio: 'inherit' });\n} catch (error) {\n  console.error(`Error executing command: ${command}`);\n  process.exit(1);\n}\n"
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "tsconfig.json",
          "type": "blob",
          "size": 0.9169921875,
          "content": "{\n  \"compilerOptions\": {\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true,\n    \"declaration\": true,\n    \"target\": \"es2020\",\n    \"module\": \"commonjs\",\n    \"rootDir\": \"./\",\n    \"resolveJsonModule\": true,\n    \"removeComments\": true,\n    \"outDir\": \"./dist\",\n    \"noEmitOnError\": true,\n    \"esModuleInterop\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"strict\": false,\n    \"skipLibCheck\": true,\n    \"strictNullChecks\": false,\n    \"incremental\": true,\n    \"noImplicitAny\": false,\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@api/*\": [\"./src/api/*\"],\n      \"@cache/*\": [\"./src/cache/*\"],\n      \"@config/*\": [\"./src/config/*\"],\n      \"@exceptions\": [\"./src/exceptions\"],\n      \"@libs/*\": [\"./src/libs/*\"],\n      \"@utils/*\": [\"./src/utils/*\"],\n      \"@validate/*\": [\"./src/validate/*\"]\n    }\n  },\n  \"exclude\": [\"node_modules\", \"./test\", \"./dist\", \"./prisma\"],\n  \"include\": [\n    \"src/**/*\",\n    \"src/**/*.json\"\n  ]\n}"
        },
        {
          "name": "tsup.config.ts",
          "type": "blob",
          "size": 0.3798828125,
          "content": "import { cpSync } from 'node:fs';\n\nimport { defineConfig } from 'tsup';\n\nexport default defineConfig({\n  entry: ['src'],\n  outDir: 'dist',\n  splitting: false,\n  sourcemap: true,\n  clean: true,\n  minify: true,\n  format: ['cjs', 'esm'],\n  onSuccess: async () => {\n    cpSync('src/utils/translations', 'dist/translations', { recursive: true });\n  },\n  loader: {\n    '.json': 'file',\n  },\n});\n"
        }
      ]
    }
  ]
}