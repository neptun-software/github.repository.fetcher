{
  "metadata": {
    "timestamp": 1736565022110,
    "page": 266,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjI3MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "konvajs/konva",
      "stars": 11880,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.603515625,
          "content": "dist\nes\n.parcel-cache\ntest-build\ndocumentation\nanalysis\nnode_modules\nbower_components\nphantomjs.exe\ndocs\nhomedocs\njsdoc-template\napi\npackage-lock.json\nlib\nsrc_old\n*.zip\n*_cache\ntypes\nout.png\ncmj\n\n# Numerous always-ignore extensions\n*.diff\n*.err\n*.orig\n*.log\n*.rej\n*.swo\n*.swp\n*.vi\n*~\n*.sass-cache\n\n# OS or Editor folders\n.DS_Store\nThumbs.db\n.cache\n.project\n.settings\n.tmproj\n*.esproj\nnbproject\n*.sublime-project\n*.sublime-workspace\n*.md.html\n.vscode\n\n# Dreamweaver added files\n_notes\ndwsync.xml\n\n# Komodo\n*.komodoproject\n.komodotools\n\n# Folders to ignore\n.hg\n.svn\n.CVS\nintermediate\npublish\n.idea\n\nkonva.js\nkonva.min.js"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 37.4814453125,
          "content": "# Change Log\n\nAll notable changes to this project will be documented in this file.\nThis project adheres to [Semantic Versioning](http://semver.org/).\n\n## 9.3.18 (2024-12-23)\n\n- Fixed emoji split in multiple lines\n\n## 9.3.17 (2024-12-23)\n\n- Fixed `Arrow.getClientRect()`\n- Fixed emoji rendering with letterSpacing\n- Fixed line-through for justify text\n- Changes in letter spacing width calculations to match DOM rendering\n\n## 9.3.16 (2024-10-21)\n\n- Fix freeze on ios on touch cancel event\n- Typescript fixes\n\n## 9.3.15 (2024-09-09)\n\n- fix letter spacing for Hindi text\n- ts fixes\n\n### 9.3.14 (2024-07-16)\n\n- Fix shadow + corner radius for images\n- Support `fillRule` for `Konva.Shape` on hit graph\n\n### 9.3.13 (2024-07-05)\n\n- Fallback for `Konva.Text.measureSize()` when 2d context doesn't return full data\n\n### 9.3.12 (2024-06-20)\n\n- Fix stopped transforming when it was triggered by multi-touch\n- Fix svg `path.getPointAtLength()` calculations in some cases\n- Fix `shape.getClientRect()` when any of parents is cached\n\n### 9.3.11 (2024-05-23)\n\n- Fix chrome clear canvas issue\n- Typescript fixes\n\n### 9.3.9 (2024-05-20)\n\n- Fix underline and line-through for `Konva.Text` when `Konva._fixTextRendering = true`\n\n### 9.3.8 (2024-05-15)\n\n- Fix click events fires on stage\n- Temporary `Konva._fixTextRendering = true` flag to fix inconsistent text\n\n### 9.3.6 (2024-03-04)\n\n- Fix transformer bug to enable hit graph back\n\n### 9.3.5 (2024-03-04)\n\n- `tranformer` event will be triggered AFTER all data of transformer is updated\n- Improve performance of transformer\n\n### 9.3.4 (2024-03-03)\n\n- Fix clipping with zero size\n\n### 9.3.3 (2024-02-09)\n\n- Another fix for exporting buffered shapes\n\n### 9.3.2 (2024-01-26)\n\n- Fix large memory usage on node export\n\n### 9.3.1 (2024-01-17)\n\n- Fix Pixelate filter work/fix caching size\n- Fix node export when large buffer canvas is used\n\n### 9.3.0 (2023-12-20)\n\n- New attribute `rotateLineVisible` for `Konva.Transformer` to show/hide rotate line\n\n### 9.2.3 (2023-10-31)\n\n- Better `Konva.Transformer` work when it has `flipEnabled = false`.\n\n### 9.2.2 (2023-09-14)\n\n- Better RTL support\n- Some typescript fixes\n\n### 9.2.1 (2023-09-14)\n\n- Fix text rendering when text has both underline and shadow\n- Typescript fixes\n\n### 9.2.0 (2023-05-14)\n\n- More controls on clipping\n- `fillRule` for `Konva.Shape`\n\n### 9.1.0 (2023-05-14)\n\n- New `anchorStyleFunc` for `Konva.Transformer` to customize anchor style\n\n### 9.0.2 (2023-05-14)\n\n- Better text rendering when it has stroke\n\n### 9.0.1 (2023-04-17)\n\n- Better performance for any instance creation\n- Little typescript fixes\n\n### 9.0.0 (2023-04-13)\n\n- Migrate the npm package from ES back to CommonJS\n\n### 8.4.4 (2023-04-05)\n\n- Some fixes for `Konva.TextPath` calculations and rendering.\n- Resolve \"willReadFrequently\" warning in Chrome\n\n### 8.4.3 (2023-03-23)\n\n- Typescript fixes\n- Better validation for `Konva.Transfomer` `nodes` property\n\n### 8.4.2 (2023-01-20)\n\n- Fix justify on text with limited height\n\n### 8.4.1 (2023-01-19)\n\n- Typescript fixes for `container.add()` method. Ability to use empty array as argument. E.g. `container.add(...emptyArray)`\n- Fix underline for justify text\n- Fix gradient display on underline or line-through text\n\n### 8.4.0 (2023-01-05)\n\n- Add support for `cornerRadius` for Konva.Image\n- Fix cloning of `Konva.Transformer`\n\n### 8.3.14 (2022-11-09)\n\n- Automatically release (destroy) used canvas elements. Should fix safari memory issues\n\n### 8.3.13 (2022-10-03)\n\n- Typescript fixes\n- Better non-passive events usage\n- Better 2d context usage to avoid Chrome warnings\n\n### 8.3.12 (2022-08-29)\n\n- `ellipsis` fixes for `Konva.Text`\n- Allow reset component attributes via overloader\n\n### 8.3.11 (2022-08-05)\n\n- Fix `Konva.Label` position when tag attributes are changed\n- Fix incorrect ellipsis display for `Konva.Text`\n- Fix `click` event trigger on parent containers on touch devices\n- Fix incorrect `mouseleave` event trigger when drag is finished\n\n### 8.3.10 (2022-06-20)\n\n- Skip `Konva.Transformer` in `container.getClientRect()` calculations\n\n### 8.3.9 (2022-05-27)\n\n- Typescript fixes\n\n### 8.3.8 (2022-05-05)\n\n- Disable all exports in `package.json`\n\n### 8.3.7 (2022-05-04)\n\n- Migrate to CommonJS exports only\n\n### 8.3.6 (2022-04-27)\n\n- Better exports definitions. Importing `Konva` should work better in different bundlers and test environments.\n- `imageSmoothingEnabled` option for `node.toDataURL()`, `node.toCanvas()` and `node.toImage()`\n\n## 8.3.5 (2022-03-21)\n\n- Quick fix for `toCanvas()` and `toDataURL()` size calculation.\n\n## 8.3.4 (2022-03-13)\n\n- Fix characters positions calculations on `fontFamily` changes in `TextPath`.\n- Remove rounding in `node.getClientRect()` results\n- Fix event object on `transformstart` event.\n\n## 8.3.3 (2022-02-23)\n\n- Fix `justify` align for text with several paragraphs.\n\n## 8.3.2\n\n- Remove source maps for webpack builds\n\n## 8.3.1 (2021-12-09)\n\n- Fix `dbltap` event in Safari\n- A bit faster `node.moveToTop()` when node is already on top\n- Better client rect calculations for `Konva.Arc` shape.\n\n## 8.3.0 (2021-11-15)\n\n- new `transformer.anchorDragBoundFunc` method.\n\n## 8.2.4 (2021-11-15)\n\n- Fix not working `Konva.Transformer` when several transformers were used\n\n## 8.2.2\n\n- Fix `Konva.Arrow` rendering when it has two pointers\n\n## 8.2.1\n\n- Fix `package.json` exports.\n\n## 8.2.0\n\n- Restore build in CommonJS. `const Konva = require('konva/cmj').default;`\n- Fix arrow rendering when dash is used\n- Fix `dbltap` trigger when multi-touch is used\n\n## 8.1.4\n\n- Fix `dblclick` event when `cancelBubble` is used.\n\n## 8.1.3\n\n- Fix `fillPattern` cache invalidation on shapes\n\n## 8.1.2\n\n- Fix memory leak for `Konva.Image`\n\n## 8.1.1\n\n- Fix `Konva.Transformer` dragging draw when `shouldOverdrawWholeArea = true`.\n- Fix auto redraw when `container.removeChildren()` or `container.destroyChildren()` are used\n\n## 8.1.0\n\n- New property `useSingleNodeRotation` for `Konva.Transformer`.\n\n## 8.0.4\n\n- Fix fill pattern updates on `fillPatternX` and `fillPatternY` changes.\n\n## 8.0.2\n\n- Fix some transform caches\n- Fix cache with hidden shapes\n\n## 8.0.1\n\n- Some typescript fixes\n\n## 8.0.0\n\nThis is a very large release! The long term of `Konva` API is to make it simpler and faster. So when possible I am trying to optimize the code and remove unpopular/confusing API methods.\n\n**BREAKING:**\n\n- `Konva.Collection` is removed. `container.children` is a simple array now. `container.find()` will returns an array instead of `Konva.Collection()` instance.\n  `Konva.Collection` was confusing for many users. Also it was slow and worked with a bit of magic. So I decided to get rif of it. Now we are going to use good old arrays.\n\n```js\n// old code:\ngroup.find('Shape').visible(false);\n\n// new code:\ngroup.find('Shape').forEach((shape) => shape.visible(false));\n```\n\n- argument `selector` is removed from `node.getIntersection(pos)` API. I don't think you even knew about it.\n- `Konva.Util.extend` is removed.\n- All \"content\" events from `Konva.Stage` are removed. E.g. instead of `contentMousemove` just use `mousemove` event.\n\n**New features:**\n\n- All updates on canvas will do automatic redraw with `layer.batchDraw()`. This features is configurable with `Konva.autoDrawEnabled` property. Konva will automatically redraw layer when you change any property, remove or add nodes, do caching. So you don't need to call `layer.draw()` or `layer.batchDraw()` in most of the cases.\n- New method `layer.getNativeCanvasElement()`\n- new `flipEnabled` property for `Konva.Transformer`\n- new `node.isClientRectOnScreen()` method\n- Added `Konva.Util.degToRad` and `Konva.Util.radToDeg`\n- Added `node.getRelativePointerPosition()`\n\n**Changes and fixes:**\n\n- **Full migration to ES modules package (!), commonjs code is removed.**\n- **`konva-node` is merged into `konva` npm package. One package works for both environments.**\n- Full event system rewrite. Much better `pointer` events support.\n- Fix `TextPath` recalculations on `fontSize` change\n- Better typescript support. Now every module has its own `*.d.ts` file.\n- Removed `Konva.UA`, `Konva._parseUA` (it was used for old browser detection)\n- Fixed Arrow head position when an arrow has tension\n- `textPath.getKerning()` is removed\n- Fix `a` command parsing for `Konva.Path`\n- Fix fill pattern for `Konva.Text` when the pattern has an offset or rotation\n- `Konva.names` and `Konva.ids` are removed\n- `Konva.captureTouchEventsEnabled` is renamed to `Konva.capturePointerEventsEnabled`\n\n## 7.2.5\n\n- Fix transform update on `letterSpacing` change of `Konva.Text`\n\n## 7.2.4\n\n- Fix wrong `mouseleave` trigger for `Konva.Stage`\n\n## 7.2.3\n\n- Fix transformer rotation when parent of a node is rotated too.\n\n## 7.2.2\n\n- Fix wrong size calculations for `Konva.Line` with tension\n- Fix `shape.intersects()` behavior when a node is dragged\n- Fix ellipsis rendering for `Konva.Text`\n\n## 7.2.1\n\n- Fix correct rendering of `Konva.Label` when heigh of text is changed\n- Fix correct `transformstart` and `transformend` events when several nodes are attached with `Konva.Transformer`\n\n## 7.2.0\n\n- New property `fillAfterStrokeEnabled` for `Konva.Shape`. See API docs for more information.\n- Fix for `Konva.Transformer` when it may fail to draw.\n- Fix rendering of `TextPath` one more time.\n\n## 7.1.9\n\n- Fix autodrawing for `Konva.Transformer` when it is on a different layer\n- Fix `Konva.RegularPolygon` size calculations.\n\n## 7.1.8\n\n- Fix incorrect rendering of `TextPath` in some cases. (again)\n\n## 7.1.7\n\n- Fix incorrect rendering of `TextPath` in some cases.\n\n## 7.1.6\n\n- Fix for correct image/dataURL/canvas exports for `Konva.Stage`.\n\n## 7.1.5\n\n- Performance fixes for dragging many nodes with `Konva.Transformer`.\n- Documentation updates\n\n## 7.1.4\n\n- Perf fixes\n- Change events trigger flow, so adding new events INSIDE event callback will work correctly.\n- Fix double `dragend`, `dragstart`, `dragmove` triggers on `Konva.Transformer`\n\n## 7.1.3\n\n- Text rendering fixes\n\n## 7.1.2\n\n- fix ellipses behavior for `Konva.Text`.\n- fix scaled fill pattern for text.\n\n## 7.1.1\n\n- fixes for `dragstart` event when `Konva.Transformer` is used. `dragstart` event will have correct native `evt` reference\n- Better unicode support in `Konva.Text` and `Konva.TextPath`. Emoji should work better now ðŸ‘\n\n## 7.1.0\n\n- Multi row support for `ellipsis` config for `Konva.Text`\n- Better `Konva.Transfomer` behavior when single attached node is programmatically rotated.\n\n## 7.0.7\n\n- fixes for `dragstart` event when `Konva.Transformer` is used. `dragstart` will not bubble from transformer.\n- `string` and `fill` properties validation can accept `CanvasGradient` as valid value\n\n## 7.0.6\n\n- Better performance for stage dragging\n\n## 7.0.5\n\n- Fixes for `node.cache()` function.\n\n## 7.0.4\n\n- Add `onUpdate` callbacks to `Konva.Tween` configuration and `node.to()` method.\n- Up to 6x faster initializations of objects, like `const shape = new Konva.Shape()`.\n\n## 7.0.3 - 2020-07-09\n\n- Fix wring `dragend` trigger on `draggable` property change inside `click`\n- Fix incorrect text rendering with `letterSpacing !== 0`\n- Typescript fixes\n\n## 7.0.2 - 2020-06-30\n\n- Fix wrong trigger `dbltap` and `click` on mobile\n\n## 7.0.1 - 2020-06-29\n\n- Fixes for different font families support.\n- Fixes for `Konva.Transformer` positions\n- Types fixes for better Typescript support\n\n## 7.0.0 - 2020-06-23\n\n- **BREAKING** `inherit` option is removed from `visible` and `listening`. They now just have boolean values `true` or `false`. If you do `group.listening(false);` then whole group and all its children will be removed from the hitGraph (and they will not listen to events). Probably 99% `Konva` applications will be not affected by this _breaking change_.\n- **Many performance fixes and code size optimizations. Up to 70% performance boost for many moving nodes.**\n- `layer.hitGraphEnabled()` is deprecated. Just use `layer.listening(false)` instead\n- Better support for font families with spaces inside (like `Font Awesome 5`).\n- Fix wrong `dblclick` and `dbltap` triggers\n- Deprecate `Konva.FastLayer`. Use `new Konva.Layer({ listening: false });` instead.\n- `dragmove` event will be fired on `Konva.Transformer` too when you drag a node.\n- `dragmove` triggers only after ALL positions of dragging nodes are changed\n\n## 6.0.0 - 2020-05-08\n\n- **BREAKING!** `boundBoxFunc` of `Konva.Transformer` works in absolute coordinates of whole transformer. Previously in was working in local coordinates of transforming node.\n- Many `Konva.Transformer` fixes. Now it works correctly when you transform several rotated shapes.\n- Fix for wrong `mouseleave` and `mouseout` fire on shape remove/destroy.\n\n## 5.0.3 - 2020-05-01\n\n- Fixes for `boundBoxFunc` of `Konva.Transformer`.\n\n## 5.0.2 - 2020-04-23\n\n- Deatach fixes for `Konva.Transformer`\n\n## 5.0.1 - 2020-04-22\n\n- Fixes for `Konva.Transformer` when parent scale is changed\n- Fixes for `Konva.Transformer` when parent is draggable\n- Performance optimizations\n\n## 5.0.0 - 2020-04-21\n\n- **New `Konva.Transformer` implementation!**. Old API should work. But I marked this release is `major` (breaking) just for smooth updates. Changes:\n  - Support of transforming multiple nodes at once: `tr.nodes([shape1, shape2])`.\n  - `tr.node()`, `tr.setNode()`, `tr.attachTo()` methods are deprecated. Use `tr.nodes(array)` instead\n  - Fixes for center scaling\n  - Fixes for better `padding` support\n  - `Transformer` can be placed anywhere in the tree of a stage tree (NOT just inside a parent of attached node).\n- Fix `imageSmoothEnabled` resets when stage is resized\n- Memory usage optimizations when a node is cached\n\n## 4.2.2 - 2020-03-26\n\n- Fix hit stroke issues\n\n## 4.2.1 - 2020-03-26\n\n- Fix some issues with `mouseenter` and `mouseleave` events.\n- Deprecate `hitStrokeEnabled` property\n- Fix rounding issues for `getClientRect()` for some shapes\n\n## 4.2.0 - 2020-03-14\n\n- Add `rotationSnapTolerance` property to `Konva.Transformer`.\n- Add `getActiveAnchor()` method to `Konva.Transformer`\n- Fix hit for non-closed `Konva.Path`\n- Some fixes for experimental Offscreen canvas support inside a worker\n\n## 4.1.6 - 2020-02-25\n\n- Events fixes for `Konva.Transformer`\n- Now `Konva` will keep `id` in a cloned node\n- Better error messages on tainted canvas issues\n\n## 4.1.5 - 2020-02-16\n\n- Fixes for `path.getClientRect()` function calculations\n\n## 4.1.4 - 2020-02-10\n\n- Fix wrong internal caching of absolute attributes\n- Fix `Konva.Transformer` behavior on scaled with CSS stage\n\n## 4.1.3 - 2020-01-30\n\n- Fix line with tension calculations\n- Add `node.getAbsoluteRotation()` method\n- Fix cursor on anchors for rotated parent\n\n## 4.1.2 - 2020-01-08\n\n- Fix possible `NaN` in content calculations\n\n## 4.1.1 - 2020-01-07\n\n- Add ability to use `width = 0` and `height = 0` for `Konva.Image`.\n- Fix `cache()` method of `Konva.Arrow()`\n- Add `Transform` to `Konva` default exports. So `Konva.Transform` is available now.\n\n## 4.1.0 - 2019-12-23\n\n- Make events work on some CSS transforms\n- Fix caching on float dimensions\n- Fix `mouseleave` event on stage.\n- Increase default anchor size for `Konva.Transformer` on touch devices\n\n## 4.0.18 - 2019-11-20\n\n- Fix `path.getClientRect()` calculations for `Konva.Path`\n- Fix wrong fire of `click` and `tap` events on stopped drag events.\n\n## 4.0.17 - 2019-11-08\n\n- Allow hitStrokeWidth usage, even if a shape has not stroke visible\n- Better IE11 support\n\n## 4.0.16 - 2019-10-21\n\n- Warn on undefined return value of `dragBoundFunc`.\n- Better calculations for `container.getClientRect()`\n\n## 4.0.15 - 2019-10-15\n\n- TS fixes\n- Better calculations for `TextPath` with align = right\n- Better `textPath.getClientRect()`\n\n## 4.0.14 - 2019-10-11\n\n- TS fixes\n- Fix globalCompositeOperation + cached hit detections.\n- Fix absolute position calculations for cached parent\n\n## 4.0.13 - 2019-10-02\n\n- Fix `line.getClientRect()` calculations for line with a tension or low number of points\n\n## 4.0.12 - 2019-09-17\n\n- Fix some bugs when `Konva.Transformer` has `padding > 0`\n\n## 4.0.10 - 2019-09-10\n\n- Fix drag position handling\n- Fix multiple selector for find() method\n\n## 4.0.9 - 2019-09-06\n\n- Fix `Konva.Transformer` behavior on mirrored nodes\n- Fix `stage.getPointerPosition()` logic.\n\n## 4.0.8 - 2019-09-05\n\n- Fix `dragend` event on click\n- Revert fillPatternScale for text fix.\n\n## 4.0.7 - 2019-09-03\n\n- Fixed evt object on `dragstart`\n- Fixed double tap trigger after dragging\n\n## 4.0.6 - 2019-08-31\n\n- Fix fillPatternScale for text\n\n## 4.0.5 - 2019-08-17\n\n- Fix `dragstart` flow when `node.startDrag()` is called.\n- Fix `tap` and `dbltap` double trigger on stage\n\n## 4.0.4 - 2019-08-12\n\n- Add `node.isCached()` method\n- Fix nested dragging bug\n\n## 4.0.3 - 2019-08-08\n\n- Slightly changed `mousemove` event flow. It triggers for first `mouseover` event too\n- Better `Konva.hitOnDragEnabled` support for mouse inputs\n\n## 4.0.2 - 2019-08-08\n\n- Fixed `node.startDrag()` behavior. We can call it at any time.\n\n## 4.0.1 - 2019-08-07\n\n- Better `Konva.Arrow` + tension drawing\n- Typescript fixes\n\n## 4.0.0 - 2019-08-05\n\nBasically the release doesn't have any breaking changes. You may only have issues if you are using something from `Konva.DD` object (which is private and never documented). Otherwise you should be fine. `Konva` has major upgrade about touch events system and drag&drop flow. The API is exactly the same. But the internal refactoring is huge so I decided to make a major version. Please upgrade carefully. Report about any issues you have.\n\n- Better multi-touch support. Now we can trigger several `touch` events on one or many nodes.\n- New drag&drop implementation. You can drag several shapes at once with several pointers.\n- HSL colors support\n\n## 3.4.1 - 2019-07-18\n\n- Fix wrong double tap trigger\n\n## 3.4.0 - 2019-07-12\n\n- TS types fixes\n- Added support for different values for `cornerRadius` of `Konva.Rect`\n\n## 3.3.3 - 2019-06-07\n\n- Some fixes for better support `konva-node`\n- TS types fixes\n\n## 3.3.2 - 2019-06-03\n\n- TS types fixes\n\n## 3.3.1 - 2019-05-28\n\n- Add new property `imageSmoothingEnabled` to the node caching\n- Even more ts fixes. Typescript need a lot of attention, you know...\n\n## 3.3.0 - 2019-05-28\n\n- Enable strict mode for ts types\n- Add new property `imageSmoothingEnabled` to the layer\n\n## 3.2.7 - 2019-05-27\n\n- Typescript fixes\n- Experimental pointer events support. Do `Konva._pointerEventsEnabled = true;` to enable\n- Fix some `Konva.Transformer` bugs.\n\n## 3.2.6 - 2019-05-09\n\n- Typescript fixes again\n\n## 3.2.5 - 2019-04-17\n\n- Show a warning when `Konva.Transformer` and attaching node have different parents.\n- Typescript fixes\n\n## 3.2.4 - 2019-04-05\n\n- Fix some stage events. `mouseenter` and `mouseleave` should work correctly on empty spaces\n- Fix some typescript types\n- Better detection of production mode (no extra warnings)\n\n## 3.2.3 - 2019-03-21\n\n- Fix `hasName` method for empty name cases\n\n## 3.2.2 - 2019-03-19\n\n- Remove `dependencies` from npm package\n\n## 3.2.1 - 2019-03-18\n\n- Better `find` and `findOne` lookup. Now we should not care about duplicate ids.\n- Better typescript definitions\n\n## 3.2.0 - 2019-03-10\n\n- new property `shape.hitStrokeWidth(10)`\n- Better typescript definitions\n- Remove `Object.assign` usage (for IE11 support)\n\n## 3.1.7 - 2019-03-06\n\n- Better modules and TS types\n\n## 3.1.6 - 2019-02-27\n\n- Fix commonjs exports\n- Fix global injections\n\n## 3.1.0 - 2019-02-27\n\n- Make `Konva` modular: `import Konva from 'konva/lib/Core';`;\n- Fix incorrect `Transformer` behavior\n- Fix drag&drop for touch devices\n\n## 3.0.0 - 2019-02-25\n\n## Breaking\n\nCustoms builds are temporary removed from npm package. You can not use `import Konva from 'konva/src/Core';`.\nThis feature will be added back later.\n\n### Possibly breaking\n\nThat changes are private and internal specific. They should not break most of `Konva` apps.\n\n- `Konva.Util.addMethods` is removed\n- `Konva.Util._removeLastLetter` is removed\n- `Konva.Util._getImage` is removed\n- `Konv.Util._getRGBAString` is removed\n- `Konv.Util._merge` is removed\n- Removed polyfill for `requestAnimationFrame`.\n- `id` and `name` properties defaults are empty strings, not `undefined`\n- internal `_cache` property was updated to use es2015 `Map` instead of `{}`.\n- `Konva.Validators` is removed.\n\n### Added\n\n- Show a warning when a stage has too many layers\n- Show a warning on duplicate ids\n- Show a warning on weird class in `Node.create` parsing from JSON\n- Show a warning for incorrect value for component setters.\n- Show a warning for incorrect value for `zIndex` property.\n- Show a warning when user is trying to reuse destroyed shape.\n- new publish method `measureSize(string)` for `Konva.Text`\n- You can configure what mouse buttons can be used for drag&drop. To enable right button you can use `Konva.dragButtons = [0, 1]`.\n- Now you can hide stage `stage.visible(false)`. It will set its container display style to \"none\".\n- New method `stage.setPointersPositions(event)`. Usually you don't need to use it manually.\n- New method `layer.toggleHitCanvas()` to show and debug hit areas\n\n### Changed\n\n- Full rewrite to Typescript with tons of refactoring and small optimizations. The public API should be 100% the same\n- Fixed `patternImage` and `radialGradient` for `Konva.Text`\n- `Konva.Util._isObject` is renamed to `Konva.Util._isPlainObject`.\n- A bit changed behavior of `removeId` (private method), now it doesn't clear node ref, if object is changed.\n- simplified `batchDraw` method (it doesn't use `Konva.Animation`) now.\n- Performance improvements for shapes will image patterns, linear and radial fills\n- `text.getTextHeight()` is deprecated. Use `text.height()` or `text.fontSize()` instead.\n- Private method `stage._setPointerPosition()` is deprecated. Use `stage.setPointersPositions(event)`;\n\n### Fixed\n\n- Better mouse support on mobile devices (yes, that is possible to connect mouse to mobile)\n- Better implementation of `mouseover` event for stage\n- Fixed underline drawing for text with `lineHeight !== 1`\n- Fixed some caching behavior when a node has `globalCompositeOperation`.\n- Fixed automatic updates for `Konva.Transformer`\n- Fixed container change for a stage.\n- Fixed warning for `width` and `height` attributes for `Konva.Text`\n- Fixed gradient drawing for `Konva.Text`\n- Fixed rendering with `strokeWidth = 0`\n\n## 2.6.0 - 2018-12-14\n\n### Changed\n\n- Performance fixes when cached node has many children\n- Better drawing for shape with `strokeScaleEnabled = false` on HDPI devices\n\n### Added\n\n- New `ignoreStroke` for `Konva.Transformer`. Good to use when a shape has `strokeScaleEnabled = false`\n\n### Changed\n\n- `getKerning` TextPath API is deprecated. Use `kerningFunc` instead.\n\n## 2.5.1 - 2018-11-08\n\n### Changed\n\n- Use custom functions for `trimRight` and `trimLeft` (for better browsers support)\n\n## 2.5.0 - 2018-10-24\n\n### Added\n\n- New `anchorCornerRadius` for `Konva.Transformer`\n\n### Fixed\n\n- Performance fixes for caching\n\n### Changed\n\n- `dragstart` event behavior is a bit changed. It will fire BEFORE actual position of a node is changed.\n\n## 2.4.2 - 2018-10-12\n\n### Fixed\n\n- Fixed a wrong cache when a shape inside group has `listening = false`\n\n## 2.4.1 - 2018-10-08\n\n### Changed\n\n- Added some text trim logic to wrap in better\n\n### Fixed\n\n- `getClientRect` for complex paths fixes\n- `getClientRect` calculation fix for groups\n- Update `Konva.Transformer` on `rotateEnabled` change\n- Fix click stage event on dragend\n- Fix some Transformer cursor behavior\n\n## 2.4.0 - 2018-09-19\n\n### Added\n\n- Centered resize with ALT key for `Konva.Transformer`\n- New `centeredScaling` for `Konva.Transformer`\n\n### Fixed\n\n- Tween support for gradient properties\n- Add `user-select: none` to the stage container to fix some \"selected contend around\" issues\n\n## 2.3.0 - 2018-08-30\n\n### Added\n\n- new methods `path.getLength()` and `path.getPointAtLength(val)`\n- `verticalAlign` for `Konva.Text`\n\n## 2.2.2 - 2018-08-21\n\n### Changed\n\n- Default duration for tweens and `node.to()` methods is now 300ms\n- Typescript fixes\n- Automatic validations for many attributes\n\n## 2.2.1 - 2018-08-10\n\n### Added\n\n- New properties for `Konva.Transformer`: `borderStroke`, `borderStrokeWidth`, `borderDash`, `anchorStroke`, `anchorStrokeWidth`, `anchorSize`.\n\n### Changed\n\n- Some properties of `Konva.Transformer` are renamed. `lineEnabled` -> `borderEnabled`. `rotateHandlerOffset` -> `rotateAnchorOffset`, `enabledHandlers` -> `enabledAnchors`.\n\n## 2.1.8 - 2018-08-01\n\n### Fixed\n\n- Some `Konva.Transformer` fixes\n- Typescript fixes\n- `stage.toDataURL()` fixes when it has hidden layers\n- `shape.toDataURL()` automatically adjust position and size of resulted image\n\n## 2.1.7 - 2018-07-03\n\n### Fixed\n\n- `toObject` fixes\n\n## 2.1.7 - 2018-07-03\n\n### Fixed\n\n- Some drag&drop fixes\n\n## 2.1.6 - 2018-06-16\n\n### Fixed\n\n- Removed wrong dep\n- Typescript fixes\n\n## 2.1.5 - 2018-06-15\n\n### Fixed\n\n- Typescript fixes\n- add shape as second argument for `sceneFunc` and `hitFunc`\n\n## 2.1.4 - 2018-06-15\n\n### Fixed\n\n- Fixed `Konva.Text` justify drawing for a text with decoration\n- Added methods `data()`,`setData()` and `getData()` methods to `Konva.TextPath`\n- Correct cache reset for `Konva.Transformer`\n\n## 2.1.3 - 2018-05-17\n\n### Fixed\n\n- `Konva.Transformer` automatically track shape changes\n- `Konva.Transformer` works with shapes with offset too\n\n## 2.1.2 - 2018-05-16\n\n### Fixed\n\n- Cursor fixes for `Konva.Transformer`\n- Fixed lineHeight behavior for `Konva.Text`\n- Some performance optimizations for `Konva.Text`\n- Better wrap algorithm for `Konva.Text`\n- fixed `Konva.Arrow` with tension != 0\n- Some fixes for `Konva.Transformer`\n\n## 2.0.3 - 2018-04-21\n\n### Added\n\n- Typescript defs for `Konva.Transformer`\n- Typescript defs for `globalCompositeOperation`\n\n## Changes\n\n- Fixed flow for `contextmenu` event. Now it will be triggered on shapes too\n- `find()` method for Containers can use a function as a parameter\n\n### Fixed\n\n- some bugs fixes for `group.getClientRect()`\n- `Konva.Arrow` will not draw dash for pointers\n- setAttr will trigger change event if new value is the same Object\n- better behavior of `dblclick` event when you click fast on different shapes\n- `stage.toDataURL` will use `pixelRatio = 1` by default.\n\n## 2.0.2 - 2018-03-15\n\n### Fixed\n\n- Even more bugs fixes for `Konva.Transformer`\n\n## 2.0.1 - 2018-03-15\n\n### Fixed\n\n- Several bugs fixes for `Konva.Transformer`\n\n## 2.0.0 - 2018-03-15\n\n### Added\n\n- new `Konva.Transformer`. It is a special group that allow simple resizing and rotation of a shape.\n- Add ability to remove event by callback `node.off('event', callback)`.\n- new `Konva.Filters.Contrast`.\n- new `Konva.Util.haveIntersection()` to detect simple collusion\n- add `Konva.Text.ellipsis` to add 'â€¦' to text string if width is fixed and wrap is set to 'none'\n- add gradients for strokes\n\n## Changed\n\n- stage events are slightly changed. `mousedown`, `click`, `mouseup`, `dblclick`, `touchstart`, `touchend`, `tap`, `dbltap` will be triggered when clicked on empty areas too\n\n### Fixed\n\n- Some typescript fixes\n- Pixelate filter fixes\n- Fixes for path data parsing\n- Fixed shadow size calculation\n\n## Removed\n\n- Some deprecated methods are removed. If previous version was working without deprecation warnings for you, this one will work fine too.\n\n## 1.7.6 - 2017-11-01\n\n### Fixed\n\n- Some typescript fixes\n\n## 1.7.4 - 2017-10-30\n\n### Fixed\n\n- `isBrowser` detection for electron\n\n## 1.7.3 - 2017-10-19\n\n### Changed\n\n- Changing size of a stage will redraw it in synchronous way\n\n### Fixed\n\n- Some fixes special for nodejs\n\n## 1.7.2 - 2017-10-11\n\n### Fixed\n\n- Fixed `Konva.document is undefined`\n\n## 1.7.1 - 2017-10-11\n\n### Changed\n\n- Konva for browser env and Konva for nodejs env are separate packages now. You can use `konva-node` for NodeJS env.\n\n## 1.7.0 - 2017-10-08\n\n### Fixed\n\n- Several typescript fixes\n\n### Changed\n\n- Default value for `dragDistance` is changed to 3px.\n- Fix rare error throw on drag\n- Caching with height = 0 or width = 0 with throw async error. Caching will be ignored.\n\n## 1.6.8 - 2017-08-19\n\n### Changed\n\n- The `node.getClientRect()` calculation is changed a bit. It is more powerfull and correct. Also it takes parent transform into account. See docs.\n- Upgrade nodejs deps\n\n## 1.6.7 - 2017-07-28\n\n### Fixed\n\n- Fix bug with double trigger wheel in Firefox\n- Fix `node.getClientRect()` calculation in a case of Group + invisible child\n- Fix dblclick issue https://github.com/konvajs/konva/issues/252\n\n## 1.6.3 - 2017-05-24\n\n### Fixed\n\n- Fixed bug with pointer detection. css 3d transformed stage will not work now.\n\n## 1.6.2 - 2017-05-08\n\n### Fixed\n\n- Fixed bug with automatic shadow for negative scale values\n\n## 1.6.1 - 2017-04-25\n\n### Fixed\n\n- Fix pointer position detection\n\n### Changed\n\n- moved `globalCompositeOperation` property to `Konva.Node`\n\n## 1.6.0 - 2017-04-21\n\n### Added\n\n- support of globalCompositeOperation for `Konva.Shape`\n\n### Fixed\n\n- getAllIntersections now works ok for Text shapes (https://github.com/konvajs/konva/issues/224)\n\n### Changed\n\n- Konva a bit changed a way to detect pointer position. Now it should be OK to apply css transform on Konva container. https://github.com/konvajs/konva/pull/215\n\n## 1.5.0 - 2017-03-20\n\n### Added\n\n- support for `lineDashOffset` property for `Konva.Shape`.\n\n## 1.4.0 - 2017-02-07\n\n## Added\n\n- `textDecoration` of `Konva.Text` now supports `line-through`\n\n## 1.3.0 - 2017-01-10\n\n## Added\n\n- new align value for `Konva.Text` and `Konva.TextPath`: `justify`\n- new property for `Konva.Text` and `Konva.TextPath`: `textDecoration`. Right now it sports only '' (no decoration) and 'underline' values.\n- new property for `Konva.Text`: `letterSpacing`\n- new event `contentContextmenu` for `Konva.Stage`\n- `align` support for `Konva.TextPath`\n- new method `toCanvas()` for converting a node into canvas element\n\n### Changed\n\n- changing a size of `Konva.Stage` will update it in async way (via `batchDraw`).\n- `shadowOffset` respect pixel ratio now\n\n### Fixed\n\n- Fixed bug when `Konva.Tag` width was not changing its width dynamically\n- Fixed \"calling remove() for dragging shape will throw an error\"\n- Fixed wrong opacity level for cached group with opacity\n- More consistent shadows on HDPI screens\n- Fixed memory leak for nodes with several names\n\n## 1.2.2 - 2016-09-15\n\n### Fixed\n\n- refresh stage hit and its `dragend`\n- `getClientRect` calculations\n\n## 1.2.0 - 2016-09-15\n\n## Added\n\n- new properties for `Konva.TextPath`: `letterSpacing` and `textBaseline`.\n\n## 1.1.4 - 2016-09-13\n\n### Fixed\n\n- Prevent throwing an error when text property of `Konva.Text` = undefined or null\n\n## 1.1.3 - 2016-09-12\n\n### Changed\n\n- Better hit function for `TextPath`.\n- Validation of `Shape` filters.\n\n## 1.1.2 - 2016-09-10\n\n### Fixed\n\n- Fixed \"Dragging Group on mobile view throws \"missing preventDefault\" error\" #169\n\n## 1.1.1 - 2016-08-30\n\n### Fixed\n\n- Fixed #166 bug of drag&drop\n\n## 1.1.0 - 2016-08-21\n\n## Added\n\n- new property of `Konva.Shape` - `preventDefault`.\n\n## 1.0.3 - 2016-08-14\n\n### Fixed\n\n- Fixed some typescript definitions\n\n## 1.0.2 - 2016-07-08\n\n## Changed\n\n- `Konva.Text` will interpret undefined `width` and `height` as `AUTO`\n\n## 1.0.1 - 2016-07-05\n\n### Changed\n\n- you can now unset property by `node.x(undefined)` or `node.setAttr('x', null)`\n\n### Fixed\n\n- Bug fix for case when `touchend` event throws error\n\n## 1.0.0 - 2016-07-05\n\n### Fixed\n\n- Bug fix for case when `touchend` event throws error\n\n## 0.15.0 - 2016-06-18\n\n## Added\n\n- Custom clip function\n\n## 0.14.0 - 2016-06-17\n\n### Fixed\n\n- fixes in typescript definitions\n- fixes for bug with `mouseenter` event on deep nesting case\n\n## 0.13.9 - 2016-05-14\n\n### Changed\n\n- typescript definition in npm package\n- node@5.10.1, canvas@1.3.14, jsdom@8.5.0 support\n- `Konva.Path` will be filled when it is not closed\n- `Animation.start()` will not not immediate sync draw. This should improve performance a little.\n- Warning when node for `Tween` is not in layer yet.\n- `removeChildren()` remove only first level children. So it will not remove grandchildren.\n\n## 0.12.4 - 2016-04-19\n\n### Changed\n\n- `batchDraw` will do not immediate `draw()`\n\n### Fixed\n\n- fix incorrect shadow offset on rotation\n\n## 0.12.3 - 2016-04-07\n\n### Fixed\n\n- `batchDraw` function works less time now\n- lighter npm package\n\n## 0.12.2 - 2016-03-31\n\n### Fixed\n\n- repair `cancelBubble` event property behaviour\n- fix wrong `Path` `getClientRect()` calculation\n- better HDPI support\n- better typescript definitions\n- node 0.12 support\n\n### Changed\n\n- more universal stage container selector\n- `mousewheel` event changed to `wheel`\n\n## 0.11.1 - 2016-01-16\n\n### Fixed\n\n- correct `Konva.Arrow` drawing. Now it works better.\n- Better support for dragging when mouse out of stage\n- Better corner radius for `Label` shape\n- `contentTap` event for stage\n\n### Added\n\n- event delegation. You can use it in this way: `layer.on('click', 'Circle', handler);`\n- new `node.findAncestors(selector)` and `node.findAncestor(selector)` functions\n- optional selector parameter for `stage.getIntersection` and `layer.getIntersection`\n- show warning message if several instances of Konva are added to page.\n\n### Changed\n\n- `moveTo` and some other methods return `this`\n- `getAbsolutePosition` support optional relative parent argument (useful to find absolute position inside of some of parent nodes)\n- `change` event will be not fired if changed value is the same as old value\n\n## 0.10.0 - 2015-10-27\n\n### Added\n\n- RGBA filter. Thanks to [@codefo](https://github.com/codefo)\n- `stroke` and `fill` support for `Konva.Sprite`\n\n### Fixed\n\n- Correct calculation in `getClientRect` method of `Konva.Line` and `Konva.Container`.\n- Correct `toObject()` behaviour for node with attrs with extended native prototypes\n- Fixed bug for caching where buffer canvas is required\n\n### Changed\n\n- Dragging works much better. If your pointer is out of stage content dragging will still continue.\n- `Konva.Node.create` now works with objects.\n- `Konva.Tween` now supports tweening points to state with different length\n\n## 0.9.5 - 2015-05-28\n\n### Fixed\n\n- `to` will not throw error if no `onFinish` callback\n- HDPI support for desktop\n- Fix bug when filters are not correct for HDPI\n- Fix bug when hit area is not correct for HDPI\n- Fix bug for incorrect `getClientRect` calculation\n- Repair fill gradient for text\n\n### Changed\n\n- context wrapper is more capable with native context.\n  So you can use `context.fillStyle` property in your `sceneFunc` without accessing native context.\n- `toDataURL` now handles pixelRatio. you can pass `config.pixelRatio` argument\n- Correct `clone()` for custom nodes\n- `FastLayer` can now have transforms\n- `stage.toDataURL()` method now works synchronously. So `callback` argument is not required.\n- `container.find(selector)` method now has a validation step. So if you forgot to add `#` or `.` you will see a warning message in the console.\n\n### Added\n\n- new `Konva.Image.fromURL` method\n\n### Deprecated\n\n- `fillRed`, `fillGreen`, `fillBlue`, `fillAlpha` are deprecated. Use `fill` instead.\n- `strokeRed`, `strokeGreen`, `strokeBlue`, `strokeAlpha` are deprecated. Use `stroke` instead.\n- `shadowRed`, `shadowGreen`, `shadowBlue`, `shadowAlpha` are deprecated. Use `shadow` instead.\n- `dashArray` is deprecated. Use `dash` instead.\n- `drawFunc` is deprecated. Use `sceneFunc` instead.\n- `drawHitFunc` is deprecated. Use `hitFunc` instead.\n- `rotateDeg` is deprecated. Use `rotate` instead.\n\n## 0.9.0 - 2015-02-27\n\n### Fixed\n\n- cache algorithm has A LOT OF updates.\n\n### Changed\n\n- `scale` now affects `shadowOffset`\n- performance optimization (remove some unnecessary draws)\n- more expected drawing when shape has opacity, stroke and shadow\n- HDPI for caching.\n- Cache should work much better. Now you don't need to pass bounding box {x,y,width,height} to `cache` method for all buildin Konva shapes. (only for your custom `Konva.Shape` instance).\n- `Tween` now supports color properties (`fill`, `stroke`, `shadowColor`)\n\n### Added\n\n- new methods for working with node's name: `addName`, `removeName`, `hasName`.\n- new `perfectDrawEnabled` property for shape. See [http://konvajs.org/docs/performance/Disable_Perfect_Draw.html](http://konvajs.org/docs/performance/Disable_Perfect_Draw.html)\n- new `shadowForStrokeEnabled` property for shape. See [http://konvajs.org/docs/performance/All_Performance_Tips.html](http://konvajs.org/docs/performance/All_Performance_Tips.html)\n- new `getClientRect` method.\n- new `to` method for every node for shorter tweening\n\n## 0.8.0 - 2015-02-04\n\n- Bug Fixes\n  - browser crashing on pointer events fixed\n  - optimized `getIntersection` function\n- Enhancements\n  - `container.findOne()` method\n  - new `strokeHitEnabled` property. Useful for performance optimizations\n  - typescript definitions. see `/resources/konva.d.ts`\n\n## Rebranding release 2015-01-28\n\nDifferences from last official `KineticJS` release\n\n- Bug Fixes\n\n  - `strokeScaleEnabled = false` is disabled for text as I can not find a way to implement this\n  - `strokeScaleEnabled = false` for Line now creates a correct hit graph\n  - working \"this-example\" as name for nodes\n  - Konva.Text() with no config will not throw exception\n  - Konva.Line() with no config will not throw exception\n  - Correct stage resizing with `FastLayer`\n  - `batchDraw` method for `FastLayer`\n  - Correct mouseover/mouseout/mouseenter/mouseleave events for groups\n  - cache node before adding to layer\n  - `intersects` function now works for shapes with shadow\n\n- Enhancements\n  - `cornerRadius` of Rect is limited by `width/2` and `height/2`\n  - `black` is default fill for text\n  - true class extending. Now `rect instanceOf Konva.Shape` will return true\n  - while dragging you can redraw layer that is not under drag. hit graph will be updated in this case\n  - now you can move object that is dragging into another layer.\n  - new `frameOffsets` attribute for `Konva.Sprite`\n  - much better dragging performance\n  - `browserify` support\n  - applying opacity to cached node\n  - remove all events with `node.off()`\n  - mouse dragging only with left button\n  - opacity now affects cached shapes\n  - Label corner radius\n  - smart changing `width`, `height`, `radius` attrs for circle, start, ellipse, ring.\n  - `mousewheel` support. Thanks [@vmichnowicz](https://github.com/vmichnowicz)\n  - new Arrow plugin\n  - multiple names: `node.name('foo bar'); container.find('.foo');` (thanks [@mattslocum](https://github.com/mattslocum))\n  - `Container.findOne()`\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.14453125,
          "content": "MIT License\n\nOriginal work Copyright (C) 2011 - 2013 by Eric Rowell (KineticJS)\nModified work Copyright (C) 2014 - present by Anton Lavrenov (Konva)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE."
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 8.0009765625,
          "content": "<p align=\"center\">\n  <img src=\"https://konvajs.org/android-chrome-192x192.png\" alt=\"Konva logo\" height=\"180\" />\n</p>\n\n<h1 align=\"center\">Konva</h1>\n\n[![Financial Contributors on Open Collective](https://opencollective.com/konva/all/badge.svg?label=financial+contributors)](https://opencollective.com/konva)\n[![npm version](https://badge.fury.io/js/konva.svg)](http://badge.fury.io/js/konva)\n[![Build Status](https://github.com/konvajs/konva/actions/workflows/test-browser.yml/badge.svg)](https://github.com/konvajs/konva/actions/workflows/test-browser.ym)\n[![Build Status](https://github.com/konvajs/konva/actions/workflows/test-node.yml/badge.svg)](https://github.com/konvajs/konva/actions/workflows/test-node.ym)[![CDNJS version](https://img.shields.io/cdnjs/v/konva.svg)](https://cdnjs.com/libraries/konva)\n\nKonva is an HTML5 Canvas JavaScript framework that enables high performance animations, transitions, node nesting, layering, filtering, caching, event handling for desktop and mobile applications, and much more.\n\nYou can draw things onto the stage, add event listeners to them, move them, scale them, and rotate them independently from other shapes to support high performance animations, even if your application uses thousands of shapes. Served hot with a side of awesomeness.\n\nThis repository began as a GitHub fork of [ericdrowell/KineticJS](https://github.com/ericdrowell/KineticJS).\n\n- **Visit:** The [Home Page](http://konvajs.org/) and follow on [Twitter](https://twitter.com/lavrton)\n- **Discover:** [Tutorials](http://konvajs.org/docs), [API Documentation](http://konvajs.org/api)\n- **Help:** [StackOverflow](http://stackoverflow.com/questions/tagged/konvajs), [Discord Chat](https://discord.gg/8FqZwVT)\n\n# Quick Look\n\n```html\n<script src=\"https://unpkg.com/konva@9/konva.min.js\"></script>\n<div id=\"container\"></div>\n<script>\n  var stage = new Konva.Stage({\n    container: 'container',\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  // add canvas element\n  var layer = new Konva.Layer();\n  stage.add(layer);\n\n  // create shape\n  var box = new Konva.Rect({\n    x: 50,\n    y: 50,\n    width: 100,\n    height: 50,\n    fill: '#00D2FF',\n    stroke: 'black',\n    strokeWidth: 4,\n    draggable: true,\n  });\n  layer.add(box);\n\n  // add cursor styling\n  box.on('mouseover', function () {\n    document.body.style.cursor = 'pointer';\n  });\n  box.on('mouseout', function () {\n    document.body.style.cursor = 'default';\n  });\n</script>\n```\n\n# Browsers support\n\nKonva works in all modern mobile and desktop browsers. A browser need to be capable to run javascript code from ES2015 spec. For older browsers you may need polyfills for missing functions.\n\nAt the current moment `Konva` doesn't work in IE11 directly. To make it work you just need to provide some polyfills such as `Array.prototype.find`, `String.prototype.trimLeft`, `String.prototype.trimRight`, `Array.from`.\n\n# Debugging\n\nThe Chrome inspector simply shows the canvas element.  To see the Konva objects and their details, install the konva-dev extension at https://github.com/konvajs/konva-devtool.\n\n# Loading and installing Konva\n\nKonva supports UMD loading. So you can use all possible variants to load the framework into your project:\n\n### Load Konva via classical `<script>` tag from CDN:\n\n```html\n<script src=\"https://unpkg.com/konva@9/konva.min.js\"></script>\n```\n\n### Install with npm:\n\n```bash\nnpm install konva --save\n```\n\n```javascript\n// The modern way (e.g. an ES6-style import for webpack, parcel)\nimport Konva from 'konva';\n```\n\n#### Typescript usage\n\nAdd DOM definitions into your `tsconfig.json`:\n\n```\n{\n  \"compilerOptions\": {\n    \"lib\": [\n        \"es6\",\n        \"dom\"\n    ]\n  }\n}\n```\n\n### 3 Minimal bundle\n\n```javascript\nimport Konva from 'konva/lib/Core';\n// Now you have a Konva object with Stage, Layer, FastLayer, Group, Shape and some additional utils function.\n// Also core currently already have support for drag&drop and animations.\n// BUT there are no shapes (rect, circle, etc), no filters.\n\n// but you can simply add anything you need:\nimport { Rect } from 'konva/lib/shapes/Rect';\n// importing a shape will automatically inject it into Konva object\n\nvar rect1 = new Rect();\n// or:\nvar shape = new Konva.Rect();\n\n// for filters you can use this:\nimport { Blur } from 'konva/lib/filters/Blur';\n```\n\n### 4 NodeJS env\n\nIn order to run `konva` in nodejs environment you also need to install `canvas` package manually. Konva will use it for 2d canvas API.\n\n```bash\nnpm install konva canvas\n```\n\nThen you can use the same Konva API and all Konva demos will work just fine. You just don't need to use `container` attribute in your stage.\n\n```js\nimport Konva from 'konva';\n\nconst stage = new Konva.Stage({\n  width: 500,\n  height: 500,\n});\n// then all regular Konva code will work\n```\n\n# Backers\n\n![https://simpleshow.com](https://avatars.githubusercontent.com/u/99720652?s=200&v=4 'https://simpleshow.com')\n![https://www.notably.ai/](https://avatars.githubusercontent.com/u/80046841?s=200&v=4 'https://www.notably.ai/')\n\n- [myposter GmbH](https://www.myposter.de/)\n- [queue.gg](https://queue.gg/)\n\n# Change log\n\nSee [CHANGELOG.md](https://github.com/konvajs/konva/blob/master/CHANGELOG.md).\n\n## Building the Konva Framework\n\nTo make a full build run `npm run build`. The command will compile all typescript files, combine then into one bundle and run minifier.\n\n## Testing\n\nKonva uses Mocha for testing.\n\n- If you need run test only one time run `npm run test`.\n- While developing it is easy to use `npm start`. Just run it and go to [http://localhost:1234/unit-tests.html](http://localhost:1234/unit-tests.html). The watcher will rebuild the bundle on any change.\n\nKonva is covered with hundreds of tests and well over a thousand assertions.\nKonva uses TDD (test driven development) which means that every new feature or bug fix is accompanied with at least one new test.\n\n## Generate documentation\n\nRun `npx gulp api` which will build the documentation files and place them in the `api` folder.\n\n# Pull Requests\n\nI'd be happy to review any pull requests that may better the Konva project,\nin particular if you have a bug fix, enhancement, or a new shape (see `src/shapes` for examples). Before doing so, please first make sure that all of the tests pass (`npm run test`).\n\n## Contributors\n\n### Financial Contributors\n\nBecome a financial contributor and help us sustain our community. [[Contribute](https://opencollective.com/konva/contribute)]\n\n#### Individuals\n\n<a href=\"https://opencollective.com/konva\"><img src=\"https://opencollective.com/konva/individuals.svg?width=890\"></a>\n\n#### Organizations\n\nSupport this project with your organization. Your logo will show up here with a link to your website. [[Contribute](https://opencollective.com/konva/contribute)]\n\n<a href=\"https://opencollective.com/konva/organization/0/website\"><img src=\"https://opencollective.com/konva/organization/0/avatar.svg\"></a>\n<a href=\"https://opencollective.com/konva/organization/1/website\"><img src=\"https://opencollective.com/konva/organization/1/avatar.svg\"></a>\n<a href=\"https://opencollective.com/konva/organization/2/website\"><img src=\"https://opencollective.com/konva/organization/2/avatar.svg\"></a>\n<a href=\"https://opencollective.com/konva/organization/3/website\"><img src=\"https://opencollective.com/konva/organization/3/avatar.svg\"></a>\n<a href=\"https://opencollective.com/konva/organization/4/website\"><img src=\"https://opencollective.com/konva/organization/4/avatar.svg\"></a>\n<a href=\"https://opencollective.com/konva/organization/5/website\"><img src=\"https://opencollective.com/konva/organization/5/avatar.svg\"></a>\n<a href=\"https://opencollective.com/konva/organization/6/website\"><img src=\"https://opencollective.com/konva/organization/6/avatar.svg\"></a>\n<a href=\"https://opencollective.com/konva/organization/7/website\"><img src=\"https://opencollective.com/konva/organization/7/avatar.svg\"></a>\n<a href=\"https://opencollective.com/konva/organization/8/website\"><img src=\"https://opencollective.com/konva/organization/8/avatar.svg\"></a>\n<a href=\"https://opencollective.com/konva/organization/9/website\"><img src=\"https://opencollective.com/konva/organization/9/avatar.svg\"></a>\n"
        },
        {
          "name": "eslint.config.mjs",
          "type": "blob",
          "size": 0.10546875,
          "content": "import tseslint from 'typescript-eslint';\n\nexport default tseslint.config(...tseslint.configs.recommended);\n"
        },
        {
          "name": "gulpfile.mjs",
          "type": "blob",
          "size": 2.7607421875,
          "content": "import gulp from 'gulp';\nimport rename from 'gulp-rename';\nimport uglify from 'gulp-uglify-es';\nimport replace from 'gulp-replace';\nimport jsdoc from 'gulp-jsdoc3';\nimport connect from 'gulp-connect';\nimport gutil from 'gulp-util';\n\nimport fs from 'fs';\nvar NodeParams = fs\n  .readFileSync('./resources/doc-includes/NodeParams.txt')\n  .toString();\nvar ContainerParams = fs\n  .readFileSync('./resources/doc-includes/ContainerParams.txt')\n  .toString();\nvar ShapeParams = fs\n  .readFileSync('./resources/doc-includes/ShapeParams.txt')\n  .toString();\n\nconst conf = JSON.parse(fs.readFileSync('./package.json'));\n\nfunction build() {\n  return gulp\n    .src(['./konva.js'])\n    .pipe(replace('@@shapeParams', ShapeParams))\n    .pipe(replace('@@nodeParams', NodeParams))\n    .pipe(replace('@@containerParams', ContainerParams))\n    .pipe(replace('@@version', conf.version))\n    .pipe(replace('@@date', new Date().toDateString()));\n}\n\ngulp.task('update-version-lib', function () {\n  return gulp\n    .src(['./lib/Global.js'])\n    .pipe(replace('@@version', conf.version))\n    .pipe(rename('Global.js'))\n    .pipe(gulp.dest('./lib'));\n});\n\ngulp.task('update-version-cmj', function () {\n  return gulp\n    .src(['./cmj/Global.js'])\n    .pipe(replace('@@version', conf.version))\n    .pipe(rename('Global.js'))\n    .pipe(gulp.dest('./cmj'));\n});\n\ngulp.task('update-version-es-to-cmj-index', function () {\n  return gulp\n    .src(['./lib/index.js'])\n    .pipe(\n      replace(`import { Konva } from './_F`, `import { Konva } from '../cmj/_F`)\n    )\n    .pipe(rename('index.js'))\n    .pipe(gulp.dest('./lib'));\n});\n\ngulp.task('update-version-es-to-cmj-node', function () {\n  return gulp\n    .src(['./lib/index-node.js'])\n    .pipe(\n      replace(`import { Konva } from './_F`, `import { Konva } from '../cmj/_F`)\n    )\n    .pipe(rename('index-node.js'))\n    .pipe(gulp.dest('./lib'));\n});\n\n// create usual build konva.js and konva.min.js\ngulp.task('pre-build', function () {\n  return build()\n    .pipe(rename('konva.js'))\n    .pipe(gulp.dest('./'))\n    .pipe(\n      uglify.default({ output: { comments: /^!|@preserve|@license|@cc_on/i } })\n    )\n    .on('error', function (err) {\n      gutil.log(gutil.colors.red('[Error]'), err.toString());\n    })\n    .pipe(rename('konva.min.js'))\n    .pipe(gulp.dest('./'));\n});\n\ngulp.task(\n  'build',\n  gulp.parallel([\n    'update-version-lib',\n    // 'update-version-cmj',\n    // 'update-version-es-to-cmj-index',\n    // 'update-version-es-to-cmj-node',\n    'pre-build',\n  ])\n);\n\n// local server for better development\ngulp.task('server', function () {\n  connect.server();\n});\n\n// // generate documentation\ngulp.task('api', function () {\n  return gulp.src('./konva.js').pipe(\n    jsdoc({\n      opts: {\n        destination: './api',\n      },\n    })\n  );\n});\n\ngulp.task('default', gulp.parallel(['server']));\n"
        },
        {
          "name": "konva-node",
          "type": "tree",
          "content": null
        },
        {
          "name": "package.json",
          "type": "blob",
          "size": 3.2138671875,
          "content": "{\n  \"name\": \"konva\",\n  \"version\": \"9.3.18\",\n  \"description\": \"HTML5 2d canvas library.\",\n  \"author\": \"Anton Lavrenov\",\n  \"files\": [\n    \"README.md\",\n    \"konva.js\",\n    \"konva.min.js\",\n    \"lib\",\n    \"cmj\"\n  ],\n  \"main\": \"./lib/index-node.js\",\n  \"browser\": \"./lib/index.js\",\n  \"typings\": \"./lib/index-types.d.ts\",\n  \"scripts\": {\n    \"start\": \"npm run test:watch\",\n    \"compile\": \"npm run clean && npm run tsc && cp ./src/index-types.d.ts ./lib/index-types.d.ts && npm run rollup\",\n    \"build\": \"npm run compile && cp ./src/index-types.d.ts ./lib && gulp build && node ./rename-imports.mjs\",\n    \"test:import\": \"npm run build  && node ./test/import-test.cjs && node ./test/import-test.mjs\",\n    \"test\": \"npm run test:browser && npm run test:node\",\n    \"test:build\": \"parcel build ./test/unit-tests.html --dist-dir ./test-build --target none --public-url ./ --no-source-maps\",\n    \"test:browser\": \"npm run test:build && mocha-headless-chrome -f ./test-build/unit-tests.html -a disable-web-security -a no-sandbox\",\n    \"test:watch\": \"rm -rf ./.parcel-cache && PARCEL_WORKERS=0  parcel serve ./test/unit-tests.html ./test/manual-tests.html ./test/sandbox.html ./test/text-paths.html ./test/bunnies.html\",\n    \"test:node\": \"ts-mocha -r ./test/node-global-setup.mjs -p ./test/tsconfig.json test/unit/**/*.ts --exit && npm run test:import\",\n    \"tsc\": \"tsc --removeComments\",\n    \"rollup\": \"rollup -c --bundleConfigAsCjs\",\n    \"clean\": \"rm -rf ./lib && rm -rf ./types && rm -rf ./cmj && rm -rf ./test-build\",\n    \"watch\": \"rollup -c -w\",\n    \"size\": \"size-limit\"\n  },\n  \"targets\": {\n    \"none\": {}\n  },\n  \"funding\": [\n    {\n      \"type\": \"patreon\",\n      \"url\": \"https://www.patreon.com/lavrton\"\n    },\n    {\n      \"type\": \"opencollective\",\n      \"url\": \"https://opencollective.com/konva\"\n    },\n    {\n      \"type\": \"github\",\n      \"url\": \"https://github.com/sponsors/lavrton\"\n    }\n  ],\n  \"size-limit\": [\n    {\n      \"limit\": \"45 KB\",\n      \"path\": \"./lib/index.js\"\n    },\n    {\n      \"limit\": \"26 KB\",\n      \"path\": \"./lib/Core.js\"\n    },\n    {\n      \"path\": \"./konva.min.js\"\n    }\n  ],\n  \"devDependencies\": {\n    \"@parcel/transformer-image\": \"2.13.2\",\n    \"@size-limit/preset-big-lib\": \"^11.1.6\",\n    \"@types/mocha\": \"^10.0.10\",\n    \"canvas\": \"^3.0.0-rc3\",\n    \"chai\": \"5.1.2\",\n    \"filehound\": \"^1.17.6\",\n    \"gulp\": \"^5.0.0\",\n    \"gulp-concat\": \"^2.6.1\",\n    \"gulp-connect\": \"^5.7.0\",\n    \"gulp-exec\": \"^5.0.0\",\n    \"gulp-jsdoc3\": \"^3.0.0\",\n    \"gulp-rename\": \"^2.0.0\",\n    \"gulp-replace\": \"^1.1.4\",\n    \"gulp-typescript\": \"^5.0.1\",\n    \"gulp-uglify\": \"^3.0.2\",\n    \"gulp-uglify-es\": \"^3.0.0\",\n    \"gulp-util\": \"^3.0.8\",\n    \"mocha\": \"10.2.0\",\n    \"mocha-headless-chrome\": \"^4.0.0\",\n    \"parcel\": \"2.13.2\",\n    \"process\": \"^0.11.10\",\n    \"rollup\": \"^4.28.1\",\n    \"rollup-plugin-typescript2\": \"^0.36.0\",\n    \"size-limit\": \"^11.1.6\",\n    \"ts-mocha\": \"^10.0.0\",\n    \"ts-node\": \"^10.9.2\",\n    \"typescript\": \"^5.7.2\"\n  },\n  \"keywords\": [\n    \"canvas\",\n    \"animations\",\n    \"graphic\",\n    \"html5\"\n  ],\n  \"prettier\": {\n    \"singleQuote\": true\n  },\n  \"bugs\": {\n    \"url\": \"https://github.com/konvajs/konva/issues\"\n  },\n  \"homepage\": \"http://konvajs.org/\",\n  \"readmeFilename\": \"README.md\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/konvajs/konva.git\"\n  },\n  \"license\": \"MIT\"\n}\n"
        },
        {
          "name": "release.sh",
          "type": "blob",
          "size": 1.9140625,
          "content": "#!/usr/bin/env bash\n\nset -e\nold_version=\"$(git describe --abbrev=0 --tags)\"\nnew_version=$1\n\n\nold_cdn=\"https://unpkg.com/konva@${old_version}/konva.js\"\nnew_cdn=\"https://unpkg.com/konva@${new_version}/konva.js\"\n\nold_cdn_min=\"https://unpkg.com/konva@${old_version}/konva.min.js\"\nnew_cdn_min=\"https://unpkg.com/konva@${new_version}/konva.min.js\"\n\n# make sure new version parameter is passed\nif [ -z \"$1\" ]\n    then\n        echo \"ERROR - pass new version. usage release.sh 0.11.0\"\n        exit 2\nfi\n\n# make sure changle log updated\nwhile true; do\n    read -p \"Did you update CHANGELOG.md? \" yn\n    case $yn in\n        [Yy]* ) break;;\n        [Nn]* ) exit;;\n        * ) echo \"Please answer yes or no.\";;\n    esac\ndone\n\necho \"Old version: ${old_version}\"\necho \"New version: ${new_version}\"\n\necho \"Pulling\"\ngit pull >/dev/null\n\necho \"build and test\"\nnpm run build >/dev/null\n# npm run test\n\n\necho \"commit change log updates\"\ngit commit -am \"update CHANGELOG with new version\" --allow-empty >/dev/null\n\necho \"npm version $1 --no-git-tag-version\"\nnpm version $1 --no-git-tag-version --allow-same-version >/dev/null\n\necho \"build for $1\"\nnpm run build >/dev/null\ngit commit -am \"build for $1\" --allow-empty >/dev/null\n\necho \"update CDN link in REAME\"\nperl -i -pe \"s|${old_cdn_min}|${new_cdn_min}|g\" ./README.md >/dev/null\ngit commit -am \"update cdn link\" --allow-empty >/dev/null\n\necho \"create new git tag\"\ngit tag $1 >/dev/null\n\ncd ../konva\ngit push >/dev/null\ngit push --tags >/dev/null\nnpm publish\n\necho \"copy konva.js into konva-site\"\ncp ./konva.js ../konva-site/\ncd ../konva-site\n\necho \"replace CDN links\"\n\n\nfind source themes/hexo3/layout react-demos vue-demos main-demo -name \"*.json\" -exec perl -i -pe \"s|${old_version}|${new_version}|g\" {} + >/dev/null\nfind source themes/hexo3/layout react-demos vue-demos main-demo -name \"*.html\" -exec perl -i -pe \"s|${old_version}|${new_version}|g\" {} + >/dev/null\n\necho \"regenerate site\"\n./deploy.sh >/dev/null\n\necho \"DONE!\"\n"
        },
        {
          "name": "rename-imports.mjs",
          "type": "blob",
          "size": 1.267578125,
          "content": "import FileHound from 'filehound';\nimport fs from 'fs';\n\nconst files = FileHound.create().paths('./lib').ext(['js', 'ts']).find();\n\nfiles.then((filePaths) => {\n  filePaths.forEach((filepath) => {\n    fs.readFile(filepath, 'utf8', (err, text) => {\n      if (!text.match(/import .* from/g)) {\n        return;\n      }\n      text = text.replace(/(import .* from\\s+['\"])(.*)(?=['\"])/g, '$1$2.js');\n      if (text.match(/export .* from/g)) {\n        text = text.replace(/(export .* from\\s+['\"])(.*)(?=['\"])/g, '$1$2.js');\n      }\n\n      if (err) throw err;\n\n      // stupid replacement back\n      text = text.replace(\n        \"import * as Canvas from 'canvas.js';\",\n        \"import * as Canvas from 'canvas';\"\n      );\n\n      // Handle import(\"./x/y/z\") syntax.\n      text = text.replace(/(import\\s*\\(\\s*['\"])(.*)(?=['\"])/g, '$1$2.js');\n\n      fs.writeFile(filepath, text, function (err) {\n        if (err) {\n          throw err;\n        }\n      });\n    });\n  });\n});\n\nconst indexFiles = ['lib/index.js', 'lib/index-node.js', 'lib/Core.js'];\nindexFiles.forEach((filepath) => {\n  fs.readFile(filepath, 'utf8', (err, text) => {\n    text = text.replace('exports.default =', 'module.exports =');\n    fs.writeFile(filepath, text, function (err) {\n      if (err) {\n        throw err;\n      }\n    });\n  });\n});\n"
        },
        {
          "name": "resources",
          "type": "tree",
          "content": null
        },
        {
          "name": "rollup.config.cjs",
          "type": "blob",
          "size": 1.2216796875,
          "content": "// import resolve from 'rollup-plugin-node-resolve';\nimport typescript from 'rollup-plugin-typescript2';\n\nconst pkg = require('./package.json');\n\nexport default {\n  input: `src/index.ts`,\n  output: [\n    {\n      file: 'konva.js',\n      name: 'Konva',\n      format: 'umd',\n      sourcemap: false,\n      freeze: false,\n    },\n    // { file: pkg.module, format: 'es', sourcemap: true }\n  ],\n  // Indicate here external modules you don't wanna include in your bundle (i.e.: 'lodash')\n  external: [],\n  watch: {\n    include: 'src/**',\n  },\n  plugins: [\n    // Allow json resolution\n    // json(),\n    // Compile TypeScript files\n    typescript({\n      useTsconfigDeclarationDir: true,\n      abortOnError: false,\n      removeComments: false,\n      tsconfigOverride: {\n        compilerOptions: {\n          module: 'ES2020',\n        },\n      },\n    }),\n    // // Allow bundling cjs modules (unlike webpack, rollup doesn't understand cjs)\n    // commonjs(),\n    // // Allow node_modules resolution, so you can use 'external' to control\n    // // which external modules to include in the bundle\n    // // https://github.com/rollup/rollup-plugin-node-resolve#usage\n    // resolve(),\n\n    // Resolve source maps to the original source\n    // sourceMaps()\n  ],\n};\n"
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "test",
          "type": "tree",
          "content": null
        },
        {
          "name": "tsconfig.json",
          "type": "blob",
          "size": 0.607421875,
          "content": "{\n  \"compilerOptions\": {\n    \"outDir\": \"lib\",\n    \"module\": \"CommonJS\",\n    \"target\": \"ES2018\",\n    // \"sourceMap\": true,\n    \"noEmitOnError\": true,\n    \"lib\": [\"ES2019\", \"dom\"],\n    \"moduleResolution\": \"node\",\n    \"declaration\": true,\n    \"removeComments\": false,\n\n    \"strict\": true,\n    \"noImplicitAny\": false,\n    \"noImplicitThis\": false,\n    \"useUnknownInCatchVariables\": false,\n    \"skipLibCheck\": true,\n    // probably we would never enable this one\n    // because it's too strict, konva generates many functions on the runtime\n    \"strictPropertyInitialization\": false,\n    \n  },\n  \"include\": [\"./src/**/*.ts\"],\n}\n"
        },
        {
          "name": "tsconfig.testing.json",
          "type": "blob",
          "size": 0.19140625,
          "content": "{\n  \"compilerOptions\": {\n    \"outDir\": \"lib\",\n    \"target\": \"ES2015\",\n    \"noEmitOnError\": true,\n    \"moduleResolution\": \"node\",\n    \"lib\": [\"ES2015\", \"dom\"]\n  },\n  \"include\": [\"./src/**/*.ts\"]\n}\n"
        }
      ]
    }
  ]
}