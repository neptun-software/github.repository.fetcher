{
  "metadata": {
    "timestamp": 1736561649913,
    "page": 221,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjIzMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "Kujiale-Mobile/Painter",
      "stars": 4359,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".eslintrc.js",
          "type": "blob",
          "size": 5.0283203125,
          "content": "module.exports = {\n    // 以当前目录为根目录，不再向上查找 .eslintrc.js\n    \"root\": true,\n    \"parser\": \"babel-eslint\",\n    \"extends\": [\"airbnb-base\"],\n    \"plugins\": [\n      \"import\",\n    ],\n    \"parserOptions\": {\n      \"ecmaVersion\": 6,\n      ecmaFeatures: {\n        jsx: true,\n      }\n    },\n    \"env\": {\n      \"es6\": true,\n      \"browser\": true\n    },\n    \"rules\": {\n      // @fixable rn推荐用两个空格\n      \"indent\": ['error', 2, {\n        SwitchCase: 1,\n        flatTernaryExpressions: true\n      }],\n      // 禁止使用 console\n      // @off console 的使用很常见\n      \"no-console\": 'off',\n      \"one-var\": 'off',\n      // @warn 无用变量警告\n      \"no-unused-vars\": ['warn', { \"vars\": \"all\", \"args\": \"none\" }],\n      // @error 变量必须先定义后使用\n      'no-use-before-define': ['error', { functions: false, classes: false, variables: false }],\n      // 在类的非静态方法中，必须存在对 this 的引用\n      // @off 太严格了\n      'class-methods-use-this': 'off',\n      // @error 禁止出现连续的多个空格，除非是注释前，或对齐对象的属性、变量定义、import 等\n      'no-multi-spaces': [\n        'error',\n        {\n          ignoreEOLComments: true,\n          exceptions: {\n            Property: true,\n            BinaryExpression: false,\n            VariableDeclarator: true,\n            ImportDeclaration: true\n          }\n        }\n      ],\n      // @off 条件加载很常见\n      'global-require': 'off',\n      // @warn 限制一行长度 120字符\n      'max-len': ['warn', { code: 120 }],\n      // You can't require images in node by default - only .js, .json, and .node.\n      // require图片报错 这里关掉这条\n      'import/no-unresolved': 'off',\n      // @off 下划线在变量名中很常用\n      'no-underscore-dangle': 'off',\n      // 箭头函数能够省略 return 的时候，必须省略，比如必须写成 () => 0，禁止写成 () => { return 0 }\n      // @off 箭头函数的返回值，应该允许灵活设置\n      'arrow-body-style': 'off',\n      // 禁止在 else 内使用 return，必须改为提前结束\n      // @off else 中使用 return 可以使代码结构更清晰\n      'no-else-return': 'off',\n      // 禁止使用嵌套的三元表达式，比如 a ? b : c ? d : e\n      // @off 没必要限制\n      'no-nested-ternary': 'off',\n      // 必须使用模版字面量而不是字符串连接\n      // @warn 字符串连接很常用\n      'prefer-template': 'warn',\n      // 申明后不再被修改的变量必须使用 const 来申明\n      // @warn 没必要强制要求\n      'prefer-const': 'warn',\n      // 必须使用解构\n      // @warn 没必要强制要求\n      'prefer-destructuring': 'warn',\n      // 限制换行符为 LF 或 CRLF\n      // @off 没必要限制\n      'linebreak-style': 'off',\n      // 禁止使用特定的语法\n      // @off 它用于限制某个具体的语法不能使用\n      'no-restricted-syntax': 'off',\n      // 禁止使用 ++ 或 --\n      // @off 没必要限制\n      'no-plusplus': 'off',\n      // 禁止混用不同的操作符，比如 let foo = a && b < 0 || c > 0 || d + 1 === 0\n      // @off 太严格了，可以由使用者自己去判断如何混用操作符\n      'no-mixed-operators': 'off',\n      // 必须使用 a = {b} 而不是 a = {b: b}\n      // @off 没必要强制要求\n      'object-shorthand': 'off',\n      // @fixable es6默认是srtict mode https://github.com/facebook/react-native/pull/16163\n      // 开着这条会提示'use strict' is unnecessary inside of modules. (strict)\n      'strict': 'warn',\n      // 禁止函数在不同分支返回不同类型的值\n      // @off 太严格了\n      'consistent-return': 'off',\n      // @fixable 禁止 else 中只有一个单独的 if\n      // @off 单独的 if 可以把逻辑表达的更清楚\n      'no-lonely-if': 'off',\n      // 禁止无用的表达式\n      'no-unused-expressions': [\n        'error',\n        {\n          allowShortCircuit: true,\n          allowTernary: true,\n          allowTaggedTemplates: true\n        }\n      ],\n      // @fixable 注释前后必须有空格\n      'spaced-comment': [\n        'error',\n        'always',\n        {\n          block: {\n            exceptions: [\n              '*'\n            ],\n            balanced: true\n          }\n        }\n      ],\n      // @fixable 必须使用 ... 而不是 apply，比如 foo(...args)\n      // @off  apply 很常用\n      'prefer-spread': 'off',\n      // 禁止使用 hasOwnProperty, isPrototypeOf 或 propertyIsEnumerable\n      // @off 很多地方会用到 hasOwnProperty\n      'no-prototype-builtins': 'off',\n      // @fixable 禁止出现 foo['bar']，必须写成 foo.bar\n      // @off 当需要写一系列属性的时候，可以更统一\n      'dot-notation': 'off',\n      // 对象的最后一个属性末尾必须有逗号\n      'comma-dangle': 'warn',\n\n      \"import/extensions\": [2, \"never\",\n        {\n          \"json\": \"always\",\n          \"svg\": \"always\"\n        }\n      ],\n\n      // 小程序\n      \"guard-for-in\": \"off\",\n      \"no-undef\": \"off\",\n      \"func-names\": \"off\",\n    }\n  };\n  "
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.0087890625,
          "content": ".DS_Store"
        },
        {
          "name": ".prettierrc",
          "type": "blob",
          "size": 0.3525390625,
          "content": "{\n  \"tabWidth\": 2,\n  \"useTabs\": false,\n  \"semi\": true,\n  \"singleQuote\": true,\n  \"proseWrap\": \"preserve\",\n  \"arrowParens\": \"avoid\",\n  \"bracketSpacing\": true,\n  \"endOfLine\": \"auto\",\n  \"htmlWhitespaceSensitivity\": \"ignore\",\n  \"ignorePath\": \".prettierignore\",\n  \"jsxBracketSameLine\": true,\n  \"jsxSingleQuote\": false,\n  \"trailingComma\": \"all\",\n  \"printWidth\": 120\n}\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 11.08203125,
          "content": "                                 Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n   APPENDIX: How to apply the Apache License to your work.\n\n      To apply the Apache License to your work, attach the following\n      boilerplate notice, with the fields enclosed by brackets \"[]\"\n      replaced with your own identifying information. (Don't include\n      the brackets!)  The text should be enclosed in the appropriate\n      comment syntax for the file format. We also recommend that a\n      file or class name and description of purpose be included on the\n      same \"printed page\" as the copyright notice for easier\n      identification within third-party archives.\n\n   Copyright 2021 Manycore Tech Inc.\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 39.060546875,
          "content": "# Painter 2.0\n\n## 画家计划\n\n想到小程序中有如此大量的生成图片需求，而 Canvas 生成方法又是如此难用和坑爹（有关小程序的坑，可看 https://github.com/Kujiale-Mobile/MP-Keng ）。我们就想到可不可以做一款可以很方便生成图片，并且还能屏蔽掉直接使用 Canvas 的一些坑的库呢？对此我们发起了 “`画家计划`— 通过 json 数据形式，来进行动态渲染并绘制出图片”。 Painter 库的整体架构如下：\n\n![整体架构](https://user-images.githubusercontent.com/4279515/46778561-d46b3280-cd46-11e8-99c8-62e182e6f943.png)\n\n首先，我们定义了一套绘图 JSON 规范，开发者可以根据需求构建生成图片的 Palette（调色板），然后在程序运行过程中把调色板传入给 Painter（画家）。Painter 会调用 Pen（画笔），根据 Palette 内容绘制出对应的图片后返回。\n\n经过了一段时间的进步，painter 在大家的建议与贡献下得到了长足的成长。我们感谢各位使用者在这个过程中对 painter 的支持和帮助，这也是我们不断完善 painter 的最大动力。我们将为大家介绍 painter 的新能力，并明确下一阶段的迭代目标。\n\n**Painter 的优势**\n\n- 功能全，支持文本、图片、矩形、qrcode 类型的 view 绘制\n- 布局全，支持多种布局方式，如 align（对齐方式）、rotate（旋转）\n- 支持圆角，其中图片，矩形，和整个画布支持 borderRadius 来设置圆角\n- 支持边框，同时支持 solid、dashed、dotted 三种类型\n- 支持渐变色，包括线性渐变与径向渐变。\n- 支持 box-shadow 和 text-shadow，统一使用 shadow 表示。\n- 支持文字背景、获取宽度、主动换行\n- 支持自定义字体\n- 支持图片 mode\n- 支持元素的相对定位方法\n- 杠杠的性能优化，我们对网络素材图片加载实现了一套 LRU 存储机制，不用重复下载素材图片。\n- 杠杠的容错，因为某些特殊情况会导致 Canvas 绘图不完整。我们对此加入了对结果图片进行检测机制，如果绘图出错会进行重绘。\n- 生成的图片支持分辨率调节\n- 支持使用拖动等操作动态编辑绘制内容\n\n**TODO**\n\n- [x] canvas2d 接口支持\n- [x] base64 图片支持\n- [x] calc 支持\n- [ ] node 端服务版的 painter\n- [ ] line-space 属性支持\n- [ ] 三角形等常用图形的支持\n- [ ] painter“插件” —— 支持使用者通过少量代码传入自行拓展 painter 能力\n\npainter 的 “canvas2d 版本”与“base64 支持”正处于测试状态，可以在上方测试版本处链接获取对应版本，欢迎各位在实际体验后向我们反馈存在的问题，并给出宝贵的改进经验。你的支持将帮助 painter 做的更好\n\n## How To Use\n\n### 运行例子\n\n```powershell\ngit clone https://github.com/Kujiale-Mobile/Painter.git\n```\n\n代码下载后，用小程序 IDE 打开后即可使用。\n\n**注：请选择小程序项目，非小游戏，例子中无 appid，所以无法在手机上运行，如果需要真机调试，请在打开例子时，填上自己的小程序 id**\n\n### 快速开始\n\nmpvue 的使用方法请移步 [mpvue 接入方案](https://github.com/Kujiale-Mobile/Painter/wiki/mpvue-%E6%8E%A5%E5%85%A5%E6%96%B9%E5%BC%8F)\n\ntaro 的使用方法请参考 [Taro 接入方案](https://github.com/Kujiale-Mobile/Taro-Painter-Demo) painter 已发布 taro 版本的 npm 包[mina-painter](https://www.npmjs.com/package/mina-painter)\n\n1. 引入代码\n\n   Painter 的核心代码在另一个 repo 中，https://github.com/Kujiale-Mobile/PainterCore.git 。你可以通过 submodule 的方式进行库的引入。有关 submodule 的用法可自行 Google。\n\n   ```powershell\n   git submodule add https://github.com/Kujiale-Mobile/PainterCore.git components/painter\n   ```\n\n2. 作为自定义组件引入，注意目录为第一步引入的代码所在目录\n\n   ```json\n   \"usingComponents\":{\n     \"painter\":\"/components/painter/painter\"\n   }\n   ```\n\n3. 组件接收 `palette` 字段作为画图数据的数据源, 图案数据以 json 形式存在，推荐使用“皮肤模板”的方法进行传递，示例代码如下：\n\n   ```xml\n   <painter palette=\"{{data}}\" bind:imgOK=\"onImgOK\" />\n   ```\n\n   你可以通过设置 widthPixels 来强制指定生成的图片的像素宽度，否则，会根据你画布中设置的大小来动态调节，比如你用了 rpx，则在 iphone 6 上会生成 0.5 倍像素的图片。由于 canvas 绘制的图片像素直接由 Canvas 本身大小决定，此处通过同比例放大整个画布来实现对最后生成的图片大小的调节。\n\n   ```xml\n   <painter customStyle='position: absolute; left: -9999rpx;' palette=\"{{template}}\" bind:imgOK=\"onImgOK\" widthPixels=\"1000\"/>\n   ```\n\n4. 数据传入后，则会自动进行绘图。绘图完成后，你可以通过绑定 imgOK 或 imgErr 事件来获得成功后的图片 或失败的原因。\n\n   ```javascript\n   bind:imgOK=\"onImgOK\"\n   bind:imgErr=\"onImgErr\"\n\n   onImgOK(e) {\n     其中 e.detail.path 为生成的图片路径\n   },\n   ```\n\n5. 你也可以通过使用 `dancePalette` 、 `action` 等字段开启 painter 的高阶用法。具体使用方式将会在下方有详细描述。在新版 painter 中，静态模版默认相对 painter 本身 left: -9999px 。因此正常情况下使用 painter 时出现在页面上的都是动态模版。如果希望禁止用户的操作，可以按照使用静态模版的做法，只传 palette 属性即可。\n\n## 组件文档\n\n| 属性              | 类型               | 说明                                                                                         | 必填 | 默认值 |\n| ----------------- | ------------------ | -------------------------------------------------------------------------------------------- | ---- | ------ |\n| customStyle       | string             | canvas 的自定义样式                                                                          | 否   |        |\n| palette           | IPalette           | 静态模版，具体规范下文有详细介绍                                                             | 否   |        |\n| scaleRatio        | number             | 缩放比，会在传入的 palette 中统一乘以该缩放比，作用和 widthPixels 类似，所以不要同时使用                                               | 否   | 1      |\n| widthPixels       | number             | 生成的图片的像素宽度，如不传则根据模版动态生成                                               | 否   |       |\n| dirty             | boolean            | 是否启用脏检查                                                                               | 否   | false  |\n| LRU               | boolean            | 是否开启 LRU 机制                                                                            | 否   | false   |\n| dancePalette      | IPalette           | 动态模版，规范同静态模版                                                                     | 否   |        |\n| customActionStyle | ICustomActionStyle | 选择框、缩放图标、删除图标的自定义样式与图片                                                 | 否   |        |\n| action            | IView              | 动态编辑内容，用于刷新动态模版                                                               | 否   |        |\n| disableAction     | boolean            | 禁止动态编辑操作                                                                             | 否   | false  |\n| clearActionBox    | boolean            | 清除动态编辑框                                                                               | 否   | false  |\n| imgErr            | function           | 图片生成失败，可以从 e.detail.error 获取错误信息                                             | 否   |        |\n| imgOk             | function           | 图片生成成功，可以从 e.detail.path 获取生成的图片路径                                        | 否   |        |\n| viewUpdate        | function           | 动态模版， view 被更新，可从 e.detail.view 获取更新的 view                                   | 否   |        |\n| viewClicked       | function           | 动态模版， view 被选中， 可从 e.detail.view 获取点击的 view，如为空，则是选中背景            | 否   |        |\n| touchEnd          | function           | 动态模版，触碰结束。只有 view，代表触碰的对象；包含 view、type、index，代表点击了删除 icon； | 否   |\n| didShow           | function           | 动态模版，绘制结束时触发                                                                     | 否   |        |\n| use2D             | boolean            | 是否使用 canvas2d 接口（注意！使用 use2D 就无法使用 dancePalette 与 action）                 | 否   | false  |\n\n```typescript\ninterface IView {\n  type: \"rect\" | \"text\" | \"image\" | \"qrcode\";\n  text?: string;\n  url?: string;\n  id?: string;\n  /** 事实上painter中view的css属性并不完全与CSSProperties一致。 */\n  /** 有一些属性painter并不支持，而当你需要开启一些“高级”能力时，属性的使用方式也与css规范不一致。 */\n  /** 具体的区别我们将在下方对应的view介绍中详细讲解，在这里使用CSSProperties仅仅是为了让你享受代码提示 */\n  css: CSSProperties;\n}\n\ninterface IPalette {\n  background: string; // 整个模版的背景，支持网络图片的链接、纯色和渐变色\n  width: string;\n  height: string;\n  borderRadius: string;\n  views: Array<IView>;\n}\n\ninterface ICustomActionStyle {\n  border: string; // 动态编辑选择框的边框样式\n  scale: {\n    textIcon: string; // 文字view所使用的缩放图标图片\n    imageIcon: string; // 图片view所使用的缩放图标图片\n  };\n  delete: {\n    icon: string; // 删除图标图片\n  };\n}\n```\n\n## Palette 规范\n\n如你使用 wxss + wxml 规范进行绘制一样，Painter 需要根据一定的规范来进行图片绘制。当然 Painter 的绘制规范要比 wxml 简单很多。这部分的例子都是基于 `palette` 属性实现的**静态**模版\n\n### 调色板属性\n\n一个调色板首先需要给予一些整体属性\n\n```\nbackground: 可以是颜色值，也可以为网络图片的链接，默认为白色，支持渐变色\nwidth: 宽度\nheight: 高度\nborderRadius: 边框的圆角（该属性也同样适用于子 view）\nviews: 里面承载子 view\n```\n\n### View 属性\n\n当我们把整体的调色板属性构建起来后，里面就可以添加子 View 来进行绘制了。\n\n| type   | 内容    | description                    | 自有 css                                                          |\n| ------ | ------- | ------------------------------ | ----------------------------------------------------------------- |\n| image  | url     | 表示图片资源的地址，本地或网络 | 见 image 小节                                                     |\n| text   | text    | 文本的内容                     | 见 text 小节                                                      |\n| inlineText   | textList    | 行内文本数组，用于同行文本部分字体需要特殊样式                    | 见 inlineText 小节                                                      |\n| rect   | 无      | 矩形                           | color: 颜色，支持渐变色                                           |\n| qrcode | content | 画二维码                       | background: 背景颜色（默认为透明色）color: 二维码颜色（默认黑色） |\n\n#### image\n\nPainter 的 image 可以设置成本地图片或者网络图片，注意本地图片请使用绝对路径。并且如果未设置 image 的长宽，则长宽的属性值会默认设为 auto。若长宽均为 auto 则会使用图片本身的长宽来布局，大小为图片的像素值除以 pixelRatio 。\n\n| 属性名称 | 说明                 | 默认值     |\n| -------- | -------------------- | ---------- |\n| width    | image 的宽度         | auto       |\n| height   | image 的高度         | auto       |\n| mode     | 图片裁剪、缩放的模式 | aspectFill |\n\n**scaleToFill**：不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素\n\n**aspectFill**：保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说，图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。\n\n**注：mode 属性和小程序 image 的 mode 属性功能一致，只是支持的类型只有两种，且默认值不同。 当 width 或 height 属性设置为 auto 时，mode 属性失效**\n\n![](https://user-images.githubusercontent.com/49523717/61441645-a4f1f200-a978-11e9-9f9c-467cfcf3ec04.png)\n\n<details><summary>例子代码（点击展开）</summary><br>\n\n```javascript\nexport default class ImageExample {\n  palette() {\n    return {\n      width: \"654rpx\",\n      height: \"1000rpx\",\n      background: \"#eee\",\n      views: [\n        {\n          type: \"image\",\n          url: \"/palette/sky.jpg\",\n        },\n        {\n          type: \"text\",\n          text: \"未设置height、width时\",\n          css: {\n            right: \"0rpx\",\n            top: \"60rpx\",\n            fontSize: \"30rpx\",\n          },\n        },\n        {\n          type: \"image\",\n          url: \"/palette/sky.jpg\",\n          css: {\n            width: \"200rpx\",\n            height: \"200rpx\",\n            top: \"230rpx\",\n          },\n        },\n        {\n          type: \"text\",\n          text: \"mode: 'aspectFill' 或 无\",\n          css: {\n            left: \"210rpx\",\n            fontSize: \"30rpx\",\n            top: \"290rpx\",\n          },\n        },\n        {\n          type: \"image\",\n          url: \"/palette/sky.jpg\",\n          css: {\n            width: \"200rpx\",\n            height: \"200rpx\",\n            mode: \"scaleToFill\",\n            top: \"500rpx\",\n          },\n        },\n        {\n          type: \"text\",\n          text: \"mode: 'scaleToFill'\",\n          css: {\n            left: \"210rpx\",\n            top: \"560rpx\",\n            fontSize: \"30rpx\",\n          },\n        },\n        {\n          type: \"image\",\n          url: \"/palette/sky.jpg\",\n          css: {\n            width: \"200rpx\",\n            height: \"auto\",\n            top: \"750rpx\",\n          },\n        },\n        {\n          type: \"text\",\n          text: \"设置height为auto\",\n          css: {\n            left: \"210rpx\",\n            top: \"780rpx\",\n            fontSize: \"30rpx\",\n          },\n        },\n      ],\n    };\n  }\n}\n```\n\n</details>\n\n#### text\n\n因为 text 的特殊性，此处对 text 进行单独说明。\n\n| 属性名称       | 说明                                                                     | 默认值              |\n| -------------- | ------------------------------------------------------------------------ | ------------------- |\n| width          | text 的宽度                                                              |                     |\n| height         | text 的高度                                                              |                     |\n| fontSize       | 字体大小                                                                 | 20rpx               |\n| color          | 字体颜色                                                                 | black               |\n| maxLines       | 最大行数                                                                 | 不限，根据 width 来 |\n| lineHeight     | 行高（上下两行文字 baseline 的距离）                                     | fontSize 大小       |\n| fontWeight     | 字体粗细。                                            | normal              |\n| textDecoration | 文本修饰，支持 underline、 overline、 line-through，也可组合使用         | 无效果              |\n| textStyle      | fill： 填充样式，stroke：镂空样式                                        | fill                |\n| background     | 文字背景颜色                                                             | 无                  |\n| padding        | 文字背景颜色边际与文字间距                                               | 0rpx                |\n| textAlign      | 文字的对齐方式，分为 left, center, right，view 的对齐方式请看 align 属性 | left                |\n\n当文字设置 width 属性后，则文字布局的最大宽度不会超过该 width 。如果内容超过 width，则会进行换行，如果此时未设置 maxLines 属性，则会把所有内容进行换行处理，行数由内容和 width 决定。如果此时设置了 maxLines 属性，则最大展示所设置的行数，如果还有多余内容未展示出来，则后面会带上 ... 。\n\n#### inlineText\n\n对于同一行文本，部分字体需要特殊样式的需求提供支持，配置格式如下图\n\n![](https://user-images.githubusercontent.com/27180609/148869047-d71499f1-89c6-42cf-88e2-9e7722d9dbd8.png)\n\n相比较于type=`text`类型的View，外层CSS暂不支持配置属性 `maxLines`、`textAlign`，而对于字体的设置属性`fontSize`、`color`、`lineHeight`、`fontWeight`、`textDescoration`、`textStyle` 移入 `textList` 的子项中的css属性配置项里\n\n##### 自定义字体\n\n从 2.13.0 版本基础库开始，我们可以：\n在 app.js onLaunch 的时候添加你的[自定义字体](https://developers.weixin.qq.com/miniprogram/dev/api/ui/font/wx.loadFontFace.html)。但是有三点要注意:\n\n1. painter 组件一定要用使用 use2d。\n2. 一定要使用 scopes，`scopes: ['webview', 'native']`\n3. 在开发工具上是看不到效果的，要在手机上测试。\n\n``` js\nwx.loadFontFace({\n  global: true,\n  family: 'xxxx',\n  source:\n    'https://xxxx.ttf',\n  scopes: ['webview', 'native'],\n});\n```\n\n- **以下用个例子说下上述几个属性的用法**\n\n![](https://user-images.githubusercontent.com/4279515/46778602-07152b00-cd47-11e8-9965-091a3d58f417.png)\n\n<details><summary>例子代码（点击展开）</summary><br>\n\n```javascript\nexport default class LastMayday {\n  palette() {\n    return {\n      width: \"654rpx\",\n      height: \"700rpx\",\n      background: \"#eee\",\n      views: [\n        _textDecoration(\"overline\", 0),\n        _textDecoration(\"underline\", 1),\n        _textDecoration(\"line-through\", 2),\n        _textDecoration(\"overline underline line-through\", 3, \"red\"),\n        {\n          type: \"text\",\n          text: \"fontWeight: 'bold'\",\n          css: [\n            {\n              top: `${startTop + 4 * gapSize}rpx`,\n              fontWeight: \"bold\",\n            },\n            common,\n          ],\n        },\n        {\n          type: \"text\",\n          text: \"我是把width设置为300rpx后，我就换行了\",\n          css: [\n            {\n              top: `${startTop + 5 * gapSize}rpx`,\n              width: \"400rpx\",\n            },\n            common,\n          ],\n        },\n        {\n          type: \"text\",\n          text: \"我设置了maxLines为1，看看会产生什么效果\",\n          css: [\n            {\n              top: `${startTop + 7 * gapSize}rpx`,\n              width: \"400rpx\",\n              maxLines: 1,\n            },\n            common,\n          ],\n        },\n        {\n          type: \"text\",\n          text: \"textStyle: 'stroke'\",\n          css: [\n            {\n              top: `${startTop + 8 * gapSize}rpx`,\n              textStyle: \"stroke\",\n              fontWeight: \"bold\",\n            },\n            common,\n          ],\n        },\n      ],\n    };\n  }\n}\n\nconst startTop = 50;\nconst gapSize = 70;\nconst common = {\n  left: \"20rpx\",\n  fontSize: \"40rpx\",\n};\n\nfunction _textDecoration(decoration, index, color) {\n  return {\n    type: \"text\",\n    text: decoration,\n    css: [\n      {\n        top: `${startTop + index * gapSize}rpx`,\n        color: color,\n        textDecoration: decoration,\n      },\n      common,\n    ],\n  };\n}\n```\n\n</details>\n\n### 布局属性\n\n以上 View ，除去自己拥有的特别属性外，还有以下的通用布局属性\n\n| 属性                     | 说明                                           | 默认                  |\n| ------------------------ | ---------------------------------------------- | --------------------- |\n| rotate                   | 旋转，按照顺时针旋转的度数                     | 不旋转                |\n| width、height            | view 的宽度和高度，其中 image 和 text 可不设置 |                       |\n| top、right、bottom、left | 如 css 中为 absolute 布局时的作用，可为 负值   | 默认 top 和 left 为 0 |\n\n![](https://user-images.githubusercontent.com/4279515/46778627-290ead80-cd47-11e8-8483-2e36e39b36f0.png)\n\n#### 相对布局\n\n1，在需要暴露自己位置的信息的元素上增加一个 id 属性，注意此 id 中不要包含加减乘除符号，如下：\n```\n{\n  id: 'myTextId',\n  type: 'text',\n  ...\n}  \n```\n2，然后在后面的 view 中，你可以在 left、right、top、bottom、width、height 属性中使用 calc 属性。如下\n```\nleft: 'calc(myTextId.bottom + 100rpx)'\nwidth: 'calc(myTextId.width * 2)'\n```\n![](https://qhstaticssl.kujiale.com/newt/165/image/png/1624271816278/AF8DE4AEA90102C2220247E0244EF2C0.png)\n<details><summary>例子代码（点击展开）</summary><br>\n\n```javascript\n{\n  width: '654rpx',\n  height: '1000rpx',\n  background: '#eee',\n  views: [\n    {\n      id: 'one',\n      type: 'rect',\n      css: {\n        width: '200rpx',\n        left: 'calc(50% - 100rpx)',\n        top: '30rpx',\n        height: '100rpx',\n      },\n    },\n    {\n      id: 'two',\n      type: 'rect',\n      css: {\n        width: '200rpx',\n        left: 'calc(one.left + 100rpx)',\n        top: 'calc(one.bottom + 10rpx)',\n        height: '100rpx',\n      },\n    },\n    {\n      id: 'three',\n      type: 'rect',\n      css: {\n        width: '200rpx',\n        left: 'calc(two.left + 100rpx)',\n        align: 'center',\n        top: 'calc(two.bottom + 3 * 10rpx)',\n        height: '100rpx',\n      },\n    },\n    {\n      id: 'four',\n      type: 'rect',\n      css: {\n        width: 'calc(2 * one.width)',\n        left: 'calc(one.left)',\n        align: 'center',\n        top: 'calc(three.bottom + 10rpx)',\n        height: '100rpx',\n      },\n    },\n  ],\n}\n```\n\n</details>\n\n**注：相对布局的 view 代码一定需要在被相对的 view 的之后。**\n\n#### border 类型\n\n| 属性         | 说明                                                           | 默认                   |\n| ------------ | -------------------------------------------------------------- | ---------------------- |\n| borderRadius | 边界圆角程度，如果是正方形布局，该属性为一半宽或高时，则为圆形 | 0                      |\n| borderWidth  | 边界宽度，外边界                                               | 必设值，否则无边框效果 |\n| borderColor  | 边框颜色                                                       | black                  |\n| borderStyle  | 边框样式，支持 dashed、dotted、solid                           | solid                  |\n\n![](https://user-images.githubusercontent.com/4279515/46778646-3cba1400-cd47-11e8-916a-3fddc172534d.png)\n\n#### align\n\nPainter 的 align 类型与 css 中的 align 有些许不同。在 Painter 中 align 表示 view 本身的对齐方式，而不像 css 中表示对其子 view 的操作。align 可以作用在 Painter 支持的所有 view 上。它以设置的 left、top、right、bottom 的位置为基准，然后做不同的对齐操作。并且 align 在文字多行情况下，会影响多行文字的对齐方式。\n\n**注意：如果布局使用了 right 确定位置，则该 view 会默认右对齐布局，但此时文字还是从左边绘制。**\n\n![](https://user-images.githubusercontent.com/4279515/46778660-4e9bb700-cd47-11e8-8d93-e522185e8188.png)\n\n<details><summary>例子代码（点击展开）</summary><br>\n\n```javascript\n{\n  width: '654rpx',\n  height: '600rpx',\n  background: '#eee',\n  views: [\n    {\n      type: 'rect',\n      css: {\n        top: '40rpx',\n        left: '327rpx',\n        color: 'rgba(255, 0, 0, 0.5)',\n        width: '5rpx',\n        height: '500rpx',\n      },\n    },\n    {\n      type: 'image',\n      url: '/palette/avatar.jpg',\n      css: {\n        top: '40rpx',\n        left: '327rpx',\n        width: '100rpx',\n        height: '100rpx',\n      },\n    },\n    {\n      type: 'qrcode',\n      content: '/palette/avatar.jpg',\n      css: {\n        top: '180rpx',\n        left: '327rpx',\n        width: '120rpx',\n        height: '120rpx',\n      },\n    },\n    {\n      type: 'text',\n      text: \"align: 'left' 或者不写\",\n      css: {\n        top: '320rpx',\n        left: '327rpx',\n        fontSize: '30rpx',\n      },\n    },\n    {\n      type: 'text',\n      text: \"align: 'right'\",\n      css: {\n        top: '370rpx',\n        left: '327rpx',\n        align: 'right',\n        fontSize: '30rpx',\n      },\n    },\n    {\n      type: 'text',\n      text: \"align: 'center'\",\n      css: {\n        top: '420rpx',\n        left: '327rpx',\n        align: 'center',\n        fontSize: '30rpx',\n      },\n    },\n    {\n      type: 'text',\n      text: \"在多行的情况下，align 会影响内部 text 的对齐，比如这边设置 align: 'center'\",\n      css: {\n        top: '480rpx',\n        right: '327rpx',\n        width: '400rpx',\n        align: 'center',\n        fontSize: '30rpx',\n      },\n    },\n  ],\n}\n```\n\n</details>\n\n### CSS3 支持\n\n#### shadow\n\nPainter 中的 shadow 可以同时修饰 image、rect、text、qrcode 等 。在修饰 text 时则相当于 text-shadow；修饰 image 和 rect 时相当于 box-shadow；修饰 qrcode 时，则相当于二维码有效区域的投影。\n\n![](https://user-images.githubusercontent.com/4279515/51457535-ab6a2d00-1d8c-11e9-8812-9ab1ee8dafa4.png)\n\n使用方法：\n\n```\nshadow: 'h-shadow v-shadow blur color';\nh-shadow: 必需。水平阴影的位置。允许负值。\nv-shadow: 必需。垂直阴影的位置。允许负值。\nblur: 必需。模糊的距离。\ncolor: 必需。阴影的颜色。\n```\n\n<details><summary>例子代码（点击展开）</summary><br>\n\n```javascript\nexport default class ShadowExample {\n  palette() {\n    return {\n      width: \"654rpx\",\n      height: \"400rpx\",\n      background: \"#eee\",\n      views: [\n        {\n          type: \"image\",\n          url: \"/palette/sky.jpg\",\n          css: {\n            shadow: \"10rpx 10rpx 5rpx #888888\",\n          },\n        },\n        {\n          type: \"rect\",\n          css: {\n            width: \"250rpx\",\n            height: \"150rpx\",\n            right: \"50rpx\",\n            top: \"60rpx\",\n            shadow: \"10rpx 10rpx 5rpx #888888\",\n            color:\n              \"linear-gradient(-135deg, #fedcba 0%, rgba(18, 52, 86, 1) 20%, #987 80%)\",\n          },\n        },\n        {\n          type: \"qrcode\",\n          content: \"https://github.com/Kujiale-Mobile/Painter\",\n          css: {\n            top: \"230rpx\",\n            width: \"120rpx\",\n            height: \"120rpx\",\n            shadow: \"10rpx 10rpx 5rpx #888888\",\n          },\n        },\n        {\n          type: \"text\",\n          text: \"shadow: '10rpx 10rpx 5rpx #888888'\",\n          css: {\n            left: \"180rpx\",\n            fontSize: \"30rpx\",\n            shadow: \"10rpx 10rpx 5rpx #888888\",\n            top: \"290rpx\",\n          },\n        },\n      ],\n    };\n  }\n}\n```\n\n</details>\n\n#### 渐变色支持\n\n你可以在画布的 background 属性或者 rect 的 color 属性中使用以下方式实现 css 3 的渐变色，其中 radial-gradient 渐变的圆心为 view 中点，半径为最长边，目前不支持自己设置。\n\n```css\n {\n  background: linear-gradient(\n    -135deg,\n    blue 0%,\n    rgba(18, 52, 86, 1) 20%,\n    #987 80%\n  );\n\n  color: radial-gradient(rgba(0, 0, 0, 0) 5%, #0ff 15%, #f0f 60%);\n}\n```\n\n**！！！注意：颜色后面的百分比一定得写。**\n\n### 其他技巧\n\n#### 文字竖行显示\n\n因为 Painter 支持换行符，所以我们可以配合向字符之间插入换行符来达到竖排显示的效果，并且我们还能自由控制是从左到右或从右到左，如下图所示。\n\n![竖排效果](https://user-images.githubusercontent.com/4279515/61357471-f16efc00-a8aa-11e9-84b3-192fe158f38d.png)\n\n<details><summary>例子代码（点击展开）</summary><br>\n\n```javascript\nconst text = \"锄禾日当午汗滴禾下土谁知盘中餐粒粒皆辛苦\";\nexport default class ImageExample {\n  palette() {\n    const views = [];\n    let tmpText = \"\";\n    let index = 0;\n    for (let i = 0; i < text.length; i++) {\n      tmpText = `${tmpText}${text[i]}\\n`;\n      if (i % 5 === 4) {\n        views.push({\n          type: \"text\",\n          text: tmpText,\n          css: {\n            right: `${50 + index}rpx`,\n            top: \"60rpx\",\n            fontSize: \"40rpx\",\n            lineHeight: \"50rpx\",\n          },\n        });\n        index += 50;\n        tmpText = \"\";\n      }\n    }\n    return {\n      width: \"654rpx\",\n      height: \"500rpx\",\n      background: \"#eee\",\n      views: views,\n    };\n  }\n}\n```\n\n</details>\n\n## 动态模版\n\n### 使用方法\n\n```xml\n<painter\n    customStyle='margin-left: 40rpx; height: 1000rpx;'\n    palette=\"{{paintPallette}}\"\n    bind:imgOK=\"onImgOK\"\n    customActionStyle=\"{{customActionStyle}}\"\n    dancePalette=\"{{template}}\"\n    bind:touchEnd=\"touchEnd\"\n    action=\"{{action}}\"\n    />\n```\n\n```javascript\n// ···\ndata: {\n  // ···\n  customActionStyle: {\n    border: {\n      borderColor: \"#1A7AF8\",\n    },\n    scale: {\n      textIcon: \"/palette/switch.png\",\n      imageIcon: \"/palette/scale.png\",\n    },\n    delete: {\n      icon: \"/palette/close.png\",\n    },\n  },\n},\n// ···\n```\n\n动态模版向用户提供了一个可供编辑的海报模版。在使用动态模版时，painter 默认支持用户对海报中 view 的拖动、缩放和删除操作，增加海报自由度。（[了解更多关于动态模版](https://github.com/Kujiale-Mobile/Painter/wiki/%E5%8A%A8%E6%80%81%E6%A8%A1%E7%89%88%E7%AE%80%E4%BB%8B)）\n\ncustomStyle、palette、imgOk 三个属性是旧版 painter 已存在的，使用方式并没有发生变化，因此不再赘述。(这里同时使用静态模版和动态模版，是为了在动态模版上编辑完毕后，通过静态模版生成一整张图片交给用户)\n\n可以通过 customActionStyle 自定义操作 icon 与操作框的样式。通过 dancePalette，我们传入初始的模版，当后续有模版级别的刷新的时候，我们也是修改 dancePlette 的传入值。action 用于传入单个 view 级别的修改。若传入的 view 含 id，则将覆盖该 id 匹配的 view，若无 id，则默认覆盖当前选中的 view。可以通过 touchEnd 获取当前选中的 view 或是感知到用户的删除操作。\n\n若是要使 view 可被缩放，需要在 css 中配置 scalable: true,而如果需要 view 可被删除，需要在 css 中配置 deletable: true,\n\n### 拓展能力\n\n通过动态模版能力拓展出的几种进阶用法：\n\n1. 动态更新 view 属性，如替换图片 url、修改文字、修改文字样式\n\n<details><summary>效果展示（点击展开，多图预警）</summary>\n\n初始状态\n\n![初始状态](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499189/C95F8D892B9D3699F71C65A6B104D0AE.jpg?x-oss-process=image/resize,w_200)\n\n图片缩放、移动\n\n![图片缩放、移动](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499011/E5EE3DBDE555A053CCF8A6734409E4F9.jpg?x-oss-process=image/resize,w_200)\n\n图片切换\n\n![图片切换](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499048/D593CB0BF382860058228702EEB16386.jpg?x-oss-process=image/resize,w_200)\n\n图片裁剪(这里的裁剪是配合另一个库 CropperCore 实现的，painter 本身无法裁剪图片)\n\n![图片裁剪](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499054/8B931E9628FEE5D67C3774096CB5F6B1.jpg?x-oss-process=image/resize,w_200)\n\n文字选中\n\n![文字选中](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499617/D38D3DE8E92FB13D1656F745E4010584.jpg?x-oss-process=image/resize,w_200)\n\n文字缩放\n\n![文字缩放](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499042/E5D70B678460DBC4DAB280AE6BF02956.jpg?x-oss-process=image/resize,w_200)\n\n文字编辑\n\n![文字编辑](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499041/156FEFA0FCCD8C0C2F011A9071DEBAAC.jpg?x-oss-process=image/resize,w_200)\n\n字号调节\n\n![字号调节](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499449/51516F4253AA68A6E85C558C994193A7.jpg?x-oss-process=image/resize,w_200)\n\n文字颜色\n\n![文字颜色](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499252/FA70651AE9A80BD68EAFE1273204449B.jpg?x-oss-process=image/resize,w_200)\n\n文字样式\n\n![文字样式](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499450/8F58A08A568287CBEE7993DF90469B81.jpg?x-oss-process=image/resize,w_200)\n\n背景颜色\n\n![背景颜色](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499471/BD61462977BA8E65E02FBAEB98BD2D70.jpg?x-oss-process=image/resize,w_200)\n\n新增文字\n\n![新增文字1](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499018/E8DD995983063961D05FBC77653EEB84.jpg?x-oss-process=image/resize,w_200)\n\n新增文字\n\n![新增文字](https://qhstaticssl.kujiale.com/newt/100082/image/jpeg/1601360499433/FF5B1F5DA3CA9A463ED844C0091C453C.jpg?x-oss-process=image/resize,w_200)\n\n</details>\n\n2. 撤销、恢复修改\n   在示例中，我们实现了简单的撤销恢复功能，大致思路为：在页面中维护 future 、 history 两个数组，分别记录需要恢复和需要撤销的变动，当作出修改操作，则在修改前先将该 view 的当前状态传入 history，同时清空 future。若是点击撤销，则将点击时刻的 view 传入 future，再用 history 顶部的 view 更新模版。若点击恢复，则将点击时刻的 view 传入 history，在用 future 顶部的 view 更新模版。\n\n<details><summary>示例代码（点击展开）</summary>\n\n```javascript\n// ···\nonRevert() {\n  const pre = this.history.pop();\n  if (!pre) {\n    return;\n  }\n  // ···\n  this.future.push(pre);\n  // ···\n},\n\nonRecover() {\n  const fut = this.future.pop();\n  if (!fut) {\n    return;\n  }\n  // ···\n  this.history.push(fut);\n  // ···\n},\n\ntouchEnd({ detail }) {\n  // ···\n  this.history.push({\n    ...detail,\n  });\n  // ···\n  this.future.length = 0;\n  // ···\n},\n// ···\n```\n\n</details>\n\n## Tips（一定要看哦～）\n\n1，目前 Painter 中支持两种尺寸单位，px 和 rpx，代表的意思和小程序中一致，此处就不多说。\n\n2，目前子 view 的 css 属性支持 object 或 array。所以意味着，你可以把几个子 view 共用的 css 属性提取出来。做到让 Palette 更加简洁。\n\n3，因为我们的 palette 是以 js 承载的 json，所以意味着你可以在每一个属性中很方便的加上自己的逻辑。也可以把某些属性单独提取出来，让多个 palette 共用，做到模块化。\n\n4，如果你只希望获得一张生成的图片来展示，可以把 Painter 挪动到屏幕外进行绘制，绘制完后得到一张图片再进行展示，如下面这样。\n\n```xml\n<painter style=\"position:fixed;top:-9999rpx\" palette=\"{{userInfoTemplate}}\" bind:imgOK=\"onImgOK\" />\n```\n\n### 举个栗子\n\n```javascript\n{\n  background: '#eee',\n  width: '654rpx',\n  height: '400rpx',\n  borderRadius: '20rpx',\n  views: [\n  {\n    type: 'image',\n    url: 'https://qhyxpicoss.kujiale.com/r/2017/12/04/L3D123I45VHNYULVSAEYCV3P3X6888_3200x2400.jpg@!70q',\n    css: {\n      top: '48rpx',\n      right: '48rpx',\n      width: '192rpx',\n      height: '192rpx',\n    },\n  }\n  ...\n  ],\n}\n```\n\n绘制效果如下\n\n![](https://user-images.githubusercontent.com/4279515/46778534-ba315480-cd46-11e8-940a-4c8f53f93928.png)\n\n## 使用 Painter 的项目\n\n|                                                                   酷咖名片                                                                    |                                                        爱敲代码的猫                                                        |                                                                   春节对联                                                                   |                                                                    致室友                                                                    |                                                 GitHub 小程序客户端                                                 |                                                                                  SwitchDog                                                                                   |                                                                   小确幸                                                                    |\n| :-------------------------------------------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------------------: |\n| <img src=\"https://user-images.githubusercontent.com/4279515/42991545-804561d4-8c38-11e8-8fc3-9f1a07a42c45.jpg\" width=\"100\" title=\"酷咖名片\"/> | <img src=\"https://blog.eunji.cn/upload/2019/0/gh_95b7370bf8c9_34420190104173815780.jpg\" width=\"100\" title=\"爱敲代码的猫\"/> | <img src=\"https://user-images.githubusercontent.com/848691/51151536-4606cf80-18a6-11e9-935c-08ba88401e71.png\" width=\"100\" title=\"春节对联\"/> | <img src=\"https://user-images.githubusercontent.com/16663265/51538435-3aaa3a00-1e8c-11e9-946b-a35fc230db29.png\" width=\"100\" title=\"致室友\"/> | <img src=\"https://raw.githubusercontent.com/huangjianke/Gitter/master/images/code.png\" width=\"100\" title=\"Gitter\"/> | <img width=\"100\" src=\"https://user-images.githubusercontent.com/10265417/52628946-ad3e9080-2ef3-11e9-8462-32616535e95b.jpg\" alt=\"switch dog wxa qrcode\" title=\"SwitchDog\" /> | <img src=\"https://user-images.githubusercontent.com/7540755/56562941-2be33880-65dd-11e9-9594-15c4056b896f.png\" width=\"100\" title=\"小确幸\"/> |\n\n欢迎提交自己的项目，一起交流学习。[点子征集](https://github.com/Kujiale-Mobile/Painter/issues/23)\n\n## Thanks\n\n感谢 [demi520](https://github.com/demi520) 的 [wxapp-qrcode](https://github.com/demi520/wxapp-qrcode) 库，Painter 中二维码绘制部分使用了该库的部分代码，并做了些修改。\n\n## License\n\n```\nCopyright 2021 Manycore Tech Inc.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n```\n"
        },
        {
          "name": "app.js",
          "type": "blob",
          "size": 0.12109375,
          "content": "\nApp({\n  onLaunch: function () {\n  },\n\n  globalData: {\n    systemInfo: {\n      ...wx.getSystemInfoSync(),\n    },\n  },\n\n});\n\n"
        },
        {
          "name": "app.json",
          "type": "blob",
          "size": 0.2578125,
          "content": "{\n  \"pages\": [\n    \"pages/example/example\"\n  ],\n  \"window\": {\n    \"backgroundTextStyle\": \"light\",\n    \"navigationBarBackgroundColor\": \"#fff\",\n    \"navigationBarTitleText\": \"WeChat\",\n    \"navigationBarTextStyle\": \"black\"\n  },\n  \"sitemapLocation\": \"sitemap89.json\"\n}"
        },
        {
          "name": "app.wxss",
          "type": "blob",
          "size": 0,
          "content": ""
        },
        {
          "name": "components",
          "type": "tree",
          "content": null
        },
        {
          "name": "pages",
          "type": "tree",
          "content": null
        },
        {
          "name": "palette",
          "type": "tree",
          "content": null
        },
        {
          "name": "project.config.json",
          "type": "blob",
          "size": 0.9384765625,
          "content": "{\n\t\"description\": \"项目配置文件。\",\n\t\"packOptions\": {\n\t\t\"ignore\": []\n\t},\n\t\"setting\": {\n\t\t\"urlCheck\": false,\n\t\t\"es6\": false,\n\t\t\"enhance\": true,\n\t\t\"postcss\": true,\n\t\t\"minified\": true,\n\t\t\"newFeature\": true,\n\t\t\"coverView\": true,\n\t\t\"autoAudits\": false,\n\t\t\"showShadowRootInWxmlPanel\": true,\n\t\t\"scopeDataCheck\": false,\n\t\t\"checkInvalidKey\": true,\n\t\t\"checkSiteMap\": true,\n\t\t\"uploadWithSourceMap\": true,\n\t\t\"babelSetting\": {\n\t\t\t\"ignore\": [],\n\t\t\t\"disablePlugins\": [],\n\t\t\t\"outputPath\": \"\"\n\t\t},\n\t\t\"useCompilerModule\": true,\n\t\t\"userConfirmedUseCompilerModuleSwitch\": false\n\t},\n\t\"compileType\": \"miniprogram\",\n\t\"libVersion\": \"1.9.98\",\n\t\"appid\": \"\",\n\t\"projectname\": \"Painter\",\n\t\"simulatorType\": \"wechat\",\n\t\"simulatorPluginLibVersion\": {},\n\t\"condition\": {\n\t\t\"search\": {\n\t\t\t\"current\": -1,\n\t\t\t\"list\": []\n\t\t},\n\t\t\"conversation\": {\n\t\t\t\"current\": -1,\n\t\t\t\"list\": []\n\t\t},\n\t\t\"game\": {\n\t\t\t\"currentL\": -1,\n\t\t\t\"list\": []\n\t\t},\n\t\t\"miniprogram\": {\n\t\t\t\"current\": -1,\n\t\t\t\"list\": []\n\t\t}\n\t}\n}"
        },
        {
          "name": "sitemap.json",
          "type": "blob",
          "size": 0.1865234375,
          "content": "{\n  \"desc\": \"关于本文件的更多信息，请参考文档 https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html\",\n  \"rules\": [{\n  \"action\": \"allow\",\n  \"page\": \"*\"\n  }]\n}"
        },
        {
          "name": "sitemap89.json",
          "type": "blob",
          "size": 0.1865234375,
          "content": "{\n  \"desc\": \"关于本文件的更多信息，请参考文档 https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html\",\n  \"rules\": [{\n  \"action\": \"allow\",\n  \"page\": \"*\"\n  }]\n}"
        }
      ]
    }
  ]
}