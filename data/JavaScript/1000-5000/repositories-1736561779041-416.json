{
  "metadata": {
    "timestamp": 1736561779041,
    "page": 416,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjQyMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "ipcjs/bilibili-helper",
      "stars": 3931,
      "defaultBranch": "user.js",
      "files": [
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.0322265625,
          "content": "*.html text eol=lf\n*.user.js text"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.0927734375,
          "content": ".idea/\n/test.js\n/test/\n*.min.js\nnode_modules/\nbuild/\ntemp/\n# /.vscode/settings.json\n/*.user.js\n"
        },
        {
          "name": ".vscode",
          "type": "tree",
          "content": null
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 2.5595703125,
          "content": "# [ipcjs@GreasyFork](https://greasyfork.org/zh-CN/users/86730-ipcjs)\n\n## 脚本列表\n\n### Bilibili\n\n1. [解除B站区域限制](https://greasyfork.org/zh-CN/scripts/25718-%E8%A7%A3%E9%99%A4b%E7%AB%99%E5%8C%BA%E5%9F%9F%E9%99%90%E5%88%B6)\n    - [帮助](https://github.com/ipcjs/bilibili-helper/blob/user.js/packages/unblock-area-limit/README.md)\n    - [高级设置/测试页面 等](https://github.com/ipcjs/bilibili-helper/blob/user.js/packages/unblock-area-limit/README.dev.md)\n2. [Bilibili HTML5播放器网页全屏模式优化 脚本版](https://greasyfork.org/zh-CN/scripts/25858-bilibili-html5%E6%92%AD%E6%94%BE%E5%99%A8%E7%BD%91%E9%A1%B5%E5%85%A8%E5%B1%8F%E6%A8%A1%E5%BC%8F%E4%BC%98%E5%8C%96-%E8%84%9A%E6%9C%AC%E7%89%88)\n\n### 东立电子书\n\n1. [解除东立电子书区域限制](https://github.com/ipcjs/tongli-ebook-tw-unblock)：已失效\n\n### Bangumi\n\n1. [番组计划主页观看进度中文标题](https://greasyfork.org/zh-CN/scripts/373284-%E7%95%AA%E7%BB%84%E8%AE%A1%E5%88%92%E4%B8%BB%E9%A1%B5%E8%A7%82%E7%9C%8B%E8%BF%9B%E5%BA%A6%E4%B8%AD%E6%96%87%E6%A0%87%E9%A2%98)\n\n### S1\n\n1. [列出S1一条帖子的所有内容](https://greasyfork.org/zh-CN/scripts/28810-%E5%88%97%E5%87%BAs1%E4%B8%80%E6%9D%A1%E5%B8%96%E5%AD%90%E7%9A%84%E6%89%80%E6%9C%89%E5%86%85%E5%AE%B9)\n2. [屏蔽赵小姐](https://greasyfork.org/zh-CN/scripts/34383-%E5%B1%8F%E8%94%BD%E8%B5%B5%E5%B0%8F%E5%A7%90)\n\n### 知乎\n\n1. [Fuck ZhiHu Mobile Style](https://greasyfork.org/zh-CN/scripts/374771-zhihu-mobile-style): 日他娘的逼乎手机网页版 样式ver, 适配知乎电脑版到手机上, 要配合[Yandex浏览器](https://browser.yandex.com/mobile)和[User-Agent Switcher](https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg)使用\n2. [ipcjs/make-do-with-zhihu-2](https://github.com/ipcjs/make-do-with-zhihu-2)：Fuck ZhiHu Mobile Style的扩展版，用起来更方便\n\n### Others\n\n1. [Original Google For Personal Blocklist](https://greasyfork.org/zh-CN/scripts/25857-original-google-for-personal-blocklist): 推荐使用[这个修改版的扩展](https://github.com/bstaint/Personal-Blocklist), 修复了原版的bug, 同时集成的该脚本的样式\n2. [Fuck Baidu Cursor](https://greasyfork.org/zh-CN/scripts/28206-baidu-cursor)\n\n## 赞助\n\n**注意**：要赞助`解除B站区域限制的服务器`，请直接点击脚本设置页面的“捐赠”链接（在服务器地址旁边）。如下赞助只针对脚本本身，不针对服务器。\n\n[赞助列表](donate/donation.jsonc)\n\n支付宝赞助二维码：\n\n![支付宝赞助二维码](donate/donate_by_alipay.png)"
        },
        {
          "name": "baidu_fuck_cursor.user.js",
          "type": "blob",
          "size": 6.1123046875,
          "content": "// ==UserScript==\n// @name         Fuck Baidu Cursor\n// @namespace    https://github.com/ipcjs\n// @version      0.0.4\n// @description  cursor image design by [@mariotaku](https://twitter.com/mariotaku/status/842375672404164610). [get cursor](http://www.cursor.cc/?action=icon&file_id=74960)\n// @author       ipcjs\n// @match        *://www.baidu.com/*\n// @grant        GM_addStyle\n// @run-at       document-start\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    GM_addStyle(\"#su {cursor: url('data:image/x-icon;base64,AAACAAEAICAAAAAAAACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUEgkmFBJvJhQSwyYUEtImFBK9JhQSjSYUEjMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmFBJjLhwZ/4R6eP/MyMf/2dbV/8fBwf+dlZT/UUNA/yYUEpMmFBIVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJhQSh0IyMP/U0ND////////////////////////////8/Pz/kYiG/ykXFP8mFBItAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUEmxPQD7/8vHx////////////////////////////////////////////pZ6c/yYUEpYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmFBIzLhwZ/9vY2P//////////////////////////////////////////////////////VkhG/yYUEjwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUEpyqo6L///////////////////////////////////////////////////////////+yq6r/JhQSpQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmFBKQf3Rz/////////////////////////////////////////////////////////////////+bj4/8mFBLhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJhQSfllLSf/6+fn/////////////////////////////////////////////////////////////////+vn5/yYUEvkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUElc9LSr/6+np////////////6+np////////////////////////////////////////////////////////////JhQS/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJhQSwMrEw////////////8fBwf9ENTL///////////////////////////////////////////////////////////8mFBL/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmFBK6xL++//Lx8f+Eenj/KRcU/yYUEv///////////////////////////////////////////////////////////yYUEv8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUElEmFBK6KxoX/yYUEocmFBIGJhQS////////////////////////////////////////////////////////////JhQS/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmFBIGAAAAAAAAAAAmFBL////////////o5ub////////////y8fH////////////Ev77///////////8mFBL/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUEv///////////ysaF////////////0c4Nf///////////zMiH////////////yYUEv8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMyIf////////////JhQS////////////JhQS////////////MyIf////////////JhQS/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmFBL///////////8mFBL///////////8mFBL///////////8mFBL/9fT0/+jm5v8mFBLkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUEp+tpqX/squq/yYUEv///////////yYUEv/39/f/5uPj/yYUEuFPQD7/T0A+/yYUEnsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJhQSNiYUEp8mFBKlJhQS////////////JhQS/1FDQP9PQD7/JhQSeCYUEjAmFBIwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmFBL///////////8mFBL/JhQSMyYUEjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUEv///////////yYUEv8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJhQS////////////JhQS/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUEgYrGhf/+vn5//z8/P8mFBL8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYUErG8trb/x8HB/yYUEr0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJhQSSCYUErEmFBK9JhQSVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////////////////////////////////////h////gH///gA///4AH//8AB//+AAP//AAD//wAA//4AAP/8AAD//AAA//4gAP//4AD//+AA///gAP//4AD//+AB///wD////D////w////8P////D////w////+f//8='), auto;}\");\n})();"
        },
        {
          "name": "bangumi_domain_redirector_.user.js",
          "type": "blob",
          "size": 2.02734375,
          "content": "// ==UserScript==\n// @name         Bangumi Domain Redirector\n// @namespace    https://github.com/ipcjs\n// @description  RT; Refurbished from https://greasyfork.org/en/scripts/12803\n// @name:zh-CN   番组计划域名重定向\n// @description:zh-CN 重定向番组计划(Bangumi)域名; 改造自 https://greasyfork.org/zh-CN/scripts/12803\n// @author       ipcjs\n// @compatible   chrome\n// @compatible   firefox\n// @license      MIT\n// @version      0.1.0\n// @include      *://bgm.tv/*\n// @include      *://*.bgm.tv/*\n// @include      *://chii.in/*\n// @include      *://*.chii.in/*\n// @include      *://bangumi.tv/*\n// @include      *://*.bangumi.tv/*\n// @grant        GM_setValue\n// @grant        GM_getValue\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @run-at       document-start\n// ==/UserScript==\n'use strict'\nconst hosts = {\n    bgm: { https: true, host: 'bgm.tv' },\n    bangumi: { https: false, host: 'bangumi.tv' },\n    chii: { https: false, host: 'chii.in' },\n}\nlet targetHost = hosts[GM_getValue('host-name') || 'bgm']\nconst menuIds = []\nconst rebuildMenus = () => {\n    for (let menuId of menuIds) {\n        GM_unregisterMenuCommand(menuId)\n    }\n    menuIds.length = 0\n    for (let name of Object.keys(hosts)) {\n        let host = hosts[name]\n        menuIds.push(GM_registerMenuCommand(`${host === targetHost ? '=> ' : ''}http${host.https ? 's' : ''}://${host.host}`, () => {\n            GM_setValue('host-name', name)\n            // 直接刷新界面, 就没有重建菜单的必要了...\n            const refresh = true\n            if (refresh) {\n                window.location.reload()\n            } else {\n                targetHost = host\n                rebuildMenus()\n            }\n        }))\n    }\n}\nrebuildMenus()\n\nif (!window.location.hostname.endsWith(targetHost.host)) {\n    const url = location.href.replace(/https?:\\/\\/(.*\\.?)(bgm\\.tv|bangumi\\.tv|chii\\.in)(.*)/, `http${targetHost.https ? 's' : ''}://$1${targetHost.host}$3`)\n    console.log(`${location.href} => ${url}`)\n    window.location.href = url\n}\n"
        },
        {
          "name": "bangumi_evaluation.dev.user.js",
          "type": "blob",
          "size": 0.9541015625,
          "content": "// ==UserScript==\n// @name         Bangumi Evaluation.dev\n// @name:zh-CN   番组计划评论区投票助手\n// @namespace    https://github.com/ipcjs/\n// @version      1.0.3\n// @description  Bangumi Evaluation Script\n// @description:zh-CN 改造自 http://bangumi.tv/group/topic/345087\n// @author       ipcjs\n// @include      *://bgm.tv/ep/*\n// @include      *://bgm.tv/character/*\n// @include      *://bgm.tv/blog/*\n// @include      *://bgm.tv/*/topic/*\n// @include      *://bangumi.tv/ep/*\n// @include      *://bangumi.tv/character/*\n// @include      *://bangumi.tv/blogep/*\n// @include      *://bangumi.tv/*/topic/*\n// @include      *://chii.in/ep/*\n// @include      *://chii.in/characterep/*\n// @include      *://chii.in/blog/*\n// @include      *://chii.in/*/topic/*\n// @compatible   chrome\n// @compatible   firefox\n// @grant        none\n// @run-at       document-end\n// @require      file:///C:/GitHub/bilibili-helper-ipcjs/bangumi_evaluation_.user.js\n// ==/UserScript==\n"
        },
        {
          "name": "bangumi_evaluation_.user.js",
          "type": "blob",
          "size": 23.052734375,
          "content": "// ==UserScript==\n// @name         Bangumi Evaluation\n// @name:zh-CN   Bangumi评分脚本・改\n// @namespace    https://github.com/ipcjs/\n// @version      2.0.1\n// @description  Bangumi Evaluation Script\n// @description:zh-CN 改造自 http://bangumi.tv/group/topic/345087; 不需要服务器, 评分数据使用三个零宽字符表示, 存在你发出的评论中~~;\n// @author       ipcjs\n// @include      *://bgm.tv/ep/*\n// @include      *://bgm.tv/character/*\n// @include      *://bgm.tv/blog/*\n// @include      *://bgm.tv/*/topic/*\n// @include      *://bangumi.tv/ep/*\n// @include      *://bangumi.tv/character/*\n// @include      *://bangumi.tv/blogep/*\n// @include      *://bangumi.tv/*/topic/*\n// @include      *://chii.in/ep/*\n// @include      *://chii.in/characterep/*\n// @include      *://chii.in/blog/*\n// @include      *://chii.in/*/topic/*\n// @compatible   chrome\n// @compatible   firefox\n// @grant        none\n// @run-at       document-end\n// ==/UserScript==\n\n'use strict'\nconst script = {\n    name: '评论区投票助手',\n    handler: window.GM_info ? window.GM_info.scriptHandler : '组件'\n}\nif (!window.beuj_running) {\n    window.beuj_running = true\n} else {\n    console.log(`${script.name}(${script.handler})已经在运行了~~`)\n    return\n}\n\n// type, props, children\n// type, props, innerHTML\n// 'text', text\nconst util_ui_element_creator = (type, props, children) => {\n    let elem = null;\n    if (type === \"text\") {\n        return document.createTextNode(props);\n    } else {\n        elem = document.createElement(type);\n    }\n    for (let n in props) {\n        if (n === \"style\") {\n            for (let x in props.style) {\n                elem.style[x] = props.style[x];\n            }\n        } else if (n === \"className\") {\n            elem.className = props[n];\n        } else if (n === \"event\") {\n            for (let x in props.event) {\n                elem.addEventListener(x, props.event[x]);\n            }\n        } else {\n            elem.setAttribute(n, props[n]);\n        }\n    }\n    if (children) {\n        if (typeof children === 'string') {\n            elem.innerHTML = children;\n        } else {\n            for (let i = 0; i < children.length; i++) {\n                if (children[i] != null)\n                    elem.appendChild(children[i]);\n            }\n        }\n    }\n    return elem;\n}\nconst _ = util_ui_element_creator\nconst util_stringify = (item) => {\n    if (typeof item === 'object') {\n        try {\n            return JSON.stringify(item)\n        } catch (e) {\n            console.debug(e)\n            return item.toString()\n        }\n    } else {\n        return item\n    }\n}\nconst util_ui_alert = function (message, callback, delay) {\n    delay === undefined && (delay = 500)\n    setTimeout(() => {\n        if (callback) {\n            if (window.confirm(message)) {\n                callback()\n            }\n        } else {\n            alert(message)\n        }\n    }, delay)\n}\nconst addStyle = (css) => {\n    document.head.appendChild(_('style', {}, [_('text', css)]))\n}\nconst ajax = (...args) => new Promise((resolve, reject) => $.ajax(...args).done(resolve).fail(reject))\n\n// language=CSS\naddStyle(`\n    .inputButton {\n        background-color: #F09199;\n        color: #fff;\n        cursor: pointer;\n        font-family: lucida grande, tahoma, verdana, arial, sans-serif;\n        font-size: 11px;\n        padding: 1px 3px;\n        text-decoration: none;\n    }\n\n    .forum_category {\n        background-color: #F09199;\n        color: #fff;\n        font-weight: 700;\n        padding: 3px;\n    }\n    \n\n    .vote_container {\n        background-color: #e1e7f5\n    }\n\n    .forum_boardrow1 {\n        border-width: 0 1px 1px 1px;\n        border-color: #ebebeb;\n        border-style: solid;\n        padding: 6px 4px;\n        vertical-align: top\n    }\n    html[data-theme='dark'] .forum_boardrow1 {\n        border-color: rgba(255,255,255,0.1);\n    }\n    html[data-theme='dark'] .forum_category {\n        background-color: #37393b;\n    }\n    .form-option {\n        float: right;\n        color: #AAA;\n        font-size: 12px;\n    }\n    .beuj-hidden {\n        display: none;\n    }\n    .beuj-float-right {\n        float: right;\n    }\n`)\nconst TRUE = 'Y'\nconst FALSE = ''\nconst HOME_URL_PATH = '/group/topic/345237'\nconst HOME_URL = 'https://bgm.tv' + HOME_URL_PATH\nconst INSTALL_URL = 'https://greasyfork.org/zh-CN/scripts/39144'\nconst SCORE_REGEX = /^\\s*([+-]\\d+)(\\W[^]*)?$/ // 以数字开头的评论\nconst SCORE_REGEX_ZERO = /^([\\u200c\\u200d]{3})([^\\u200c\\u200d].*)?$/\nlocalStorage.beuj_add_suffix === undefined && (localStorage.beuj_add_suffix = FALSE)\nlocalStorage.beuj_flag_to_watched === undefined && (localStorage.beuj_flag_to_watched = TRUE)\nlocalStorage.beuj_show_form_in_ep === undefined && (localStorage.beuj_show_form_in_ep = TRUE)\nlocalStorage.beuj_show_form_in_other === undefined && (localStorage.beuj_show_form_in_other = FALSE)\nlet beuj_only_one_suffix = TRUE // 一个页面最多放一个小尾巴\nconst COMMENTS_DEFAULT = '力荐 不错 一般 不喜欢 垃圾'\nlet commentTemplates = (localStorage.beuj_comment_templates || COMMENTS_DEFAULT).split(' ')\n\nconst is_login = !document.querySelector('div.guest')\nconst getUserId = () => {\n    const $avatar = document.querySelector('div.idBadgerNeue a.avatar')\n    return $avatar && $avatar.href.split('/')[4] || ''\n}\nconst getGh = () => {\n    let $formhash = document.querySelector('#new_comment #ReplyForm > input[name=formhash]')\n    return $formhash.value\n}\nconst util_page = {\n    ep: () => location.pathname.match(/^\\/ep\\/\\d+$/),\n    group_topic: () => location.pathname.match(/^\\/group\\/topic\\/\\d+$/)\n}\nconst isShowForm = () => localStorage['beuj_show_form_in_' + (util_page.ep() ? 'ep' : 'other')]\nconst setShowForm = (show) => localStorage['beuj_show_form_in_' + (util_page.ep() ? 'ep' : 'other')] = show ? TRUE : FALSE\nconst getShowFormActionText = () => isShowForm() ? '隐藏' : '显示'\nclass ClassHelper {\n    constructor(ele) {\n        this.ele = ele;\n    }\n    hasClass(name) {\n        return this.ele.className.includes(name);\n    }\n    removeClass(name) {\n        let list = this.ele.className.split(/ +/);\n        let index = list.indexOf(name);\n        if (index != -1) {\n            list.splice(index, 1);\n            this.ele.className = list.join(' ');\n        }\n        return this;\n    }\n    addClass(name) {\n        this.ele.className = `${this.ele.className} ${name}`;\n        return this;\n    }\n    toggleClass(name) {\n        this.hasClass(name) ? this.removeClass(name) : this.addClass(name);\n        return this;\n    }\n}\nconst array_last = (arr) => arr[arr.length - 1]\nconst safe_prop = (obj, prop, defaultValue) => obj ? obj[prop] : defaultValue\nconst score_to_index = (score) => 5 - (score + 3)\nconst index_to_score = (index) => 5 - index - 3\nconst score_to_str = (score) => `${score >= 0 ? '+' : ''}${score}`\nconst score_to_commit_str = (score) => {\n    // 用零宽字符转换成二进制, 表示评分\n    const binaryStr = `000${(score + 3).toString(2)}`.substr(-3)\n    let str = ''\n    for (let c of binaryStr) {\n        str += c === '0' ? '\\u200c' : '\\u200d'\n    }\n    return str\n}\n\nfunction readVoteData() {\n    const voteData = {\n        voters: {},\n        myScore: undefined,\n        myReplyId: undefined,\n        myUserId: getUserId(),\n        hasSuffix: false,\n        clearMyScore: function () {\n            this.myScore = undefined\n            this.myReplyId = undefined\n            delete this.voters[this.myUserId]\n        },\n        parseReply: function ($reply) {\n            let $message = this.getMessageInReply($reply)\n            let score\n            if ((score = this.getScoreInMessage($message)) !== undefined) {\n                let userId = this.getUserIdInReply($reply)\n                this.voters[userId] = score\n                if (this.myUserId === userId) {\n                    this.myScore = score\n                    this.myReplyId = $reply.id\n                }\n                if (!this.hasSuffix && (\n                    $message.innerHTML.includes(HOME_URL_PATH) // 老的推广链接, 删了.\n                    || $message.innerHTML.includes(INSTALL_URL) // 新的推广链接\n                )) {\n                    this.hasSuffix = true\n                }\n                return true // 找到了新的评分时, 返回true\n            }\n            return false\n        },\n        getUserIdInReply: ($reply) => array_last($reply.querySelector(':scope > a.avatar').href.split('/')),\n        getMessageInReply: ($reply) => $reply.querySelector('.message'),\n        getScoreInMessage: function ($message) {\n            const text = $message.innerText\n            // console.log(text)\n            if (this._group = text.match(SCORE_REGEX)) {\n                let score = Math.min(Math.max(-2, +this._group[1]), 2)\n                return score\n            } else if (this._group = text.match(SCORE_REGEX_ZERO)) {\n                let binaryStr = ''\n                for (let c of this._group[1]) {\n                    binaryStr += c === '\\u200c' ? '0' : '1'\n                }\n                return Number.parseInt(binaryStr, 2) - 3\n            }\n            return undefined\n        },\n        getScoreInReply: function ($reply) { return this.getScoreInMessage(this.getMessageInReply($reply)) }\n    }\n    const replys = document.querySelectorAll('.row_reply')\n    for (let $reply of replys) {\n        voteData.parseReply($reply)\n    }\n    console.log('投票数据:', voteData)\n    return voteData\n}\n\nconst vote_to_bgm = (score, comment, hasSuffix) => new Promise((resolve, reject) => {\n    // 发送一条推广评论\n    comment = (comment || '').trim()\n\n    let text = ''\n    let scoreText = score_to_commit_str(score)\n    text += scoreText\n    comment && (text += comment)\n    if (localStorage.beuj_add_suffix && !(beuj_only_one_suffix && hasSuffix)) {\n        (text += `\\n[align=right][url=${INSTALL_URL}]--来自${script.name}[/url][/align]`)\n    }\n\n    document.querySelector('textarea#content').value = text\n    document.querySelector('#new_comment #ReplyForm [type=submit]').click()\n    resolve('ok')\n})\n\nfunction main() {\n    let $comment_list\n    if (!($comment_list = document.getElementById('comment_list'))) {\n        console.log('不存在#comment_list, 不支持投票...')\n        return\n    }\n    // 番剧讨论页: https://bgm.tv/ep/767931\n    let $container = document.querySelector('#columnEpA .epDesc')\n    // 小组讨论页: https://bgm.tv/group/topic/345237\n    // 条目讨论版: https://bgm.tv/subject/topic/3022\n    if (!$container) $container = document.querySelector('div.topic_content')\n    // 人物页: https://bgm.tv/character/77\n    if (!$container) $container = document.querySelector('#columnCrtB > div.detail')\n    // 日志页面: https://bgm.tv/blog/46986\n    if (!$container) $container = document.querySelector('#entry_content.blog_entry')\n    // 依然没有, 则创建\n    if (!$container) {\n        $container = _('div', { className: 'borderNeue', style: { marginTop: '10px' } })\n        $comment_list.parentElement.insertBefore($container, $comment_list)\n    }\n    const $poll_container = _('div', { id: 'poll_container', style: {/* width: '670px'*/ } })\n    $container.appendChild($poll_container)\n    let voteData = readVoteData()\n    new MutationObserver((mutations) => {\n        let toRefreshShow = false;\n        // console.log(mutations)\n        for (let mutation of mutations) {\n            if (mutation.type === 'childList') {\n                for (let node of mutation.addedNodes) {\n                    // 当前在评论区删除回复时, 只是display: none, 并不会触发DOM树改变\n                    // 故这里只处理增加了一条回复的情况\n                    if (node.className.split(' ').includes('row_reply')) {\n                        toRefreshShow |= voteData.parseReply(node)\n\n                        // 给新增的评论添加 删除/编辑 按钮\n                        let delPath, editPath;\n                        const replyIdValue = array_last(node.id.split('_'))\n                        if (util_page.ep()) { // 适配ep页面\n                            delPath = `/erase/reply/ep/${replyIdValue}?gh=${getGh()}`\n                            editPath = `/subject/ep/edit_reply/${replyIdValue}`\n                        } else if (util_page.group_topic()) { // 适配小组讨论页面\n                            delPath = `/erase/group/reply/${replyIdValue}?gh=${getGh()}`\n                            editPath = `/group/reply/${replyIdValue}/edit`\n                        }\n                        if (delPath && editPath) {\n                            const onDelClick = (e) => {\n                                util_ui_alert('确定删除这条回复？', () => {\n                                    ajax({ method: 'GET', dataType: 'json', url: `//${location.hostname}${delPath}&ajax=1` })\n                                        .then(r => r.status === 'ok' ? r : Promise.reject(r))\n                                        .then(r => {\n                                            node.parentElement.removeChild(node)\n                                            return r\n                                        })\n                                        .catch(e => {\n                                            alert('删除失败\\n' + util_stringify(e))\n                                        })\n                                }, 0)\n                            }\n                            let $replyInfo = node.querySelector(':scope > .re_info > small')\n                            $replyInfo.appendChild(_('text', ' '))\n                            $replyInfo.appendChild(_('a', { href: 'javascript:;', event: { click: onDelClick } }, [_('text', 'del')]))\n                            $replyInfo.appendChild(_('text', ' / '))\n                            $replyInfo.appendChild(_('a', { href: editPath }, [_('text', 'edit')]))\n                        }\n                    }\n                }\n                for (let node of mutation.removedNodes) {\n                    // 处理移除reply的情况, 由脚本执行的删除, 会触发移除reply\n                    if (node.className.split(' ').includes('row_reply')) {\n                        // 移除reply时要做的处理其实比较复杂, 这里做简单化处理, 够用:\n                        // 当移除的是自己的包含评分的reply时, 清除自己的评分\n                        if (voteData.getScoreInReply(node) !== undefined\n                            && voteData.getUserIdInReply(node) === voteData.myUserId) {\n                            voteData.clearMyScore()\n                            toRefreshShow = true\n                        }\n                    }\n                }\n            }\n        }\n        if (toRefreshShow) {\n            show()\n        }\n    }).observe($comment_list, {\n        childList: true,\n        attributes: false,\n    })\n    show()\n    function show() {\n        if (is_login && voteData.myScore === undefined) {\n            let title = document.title, $tmp\n            // 番剧讨论页: https://bgm.tv/ep/767931\n            // 人物页: https://bgm.tv/character/77\n            if ($tmp = document.querySelector('#headerSubject .nameSingle a')) {\n                title = $tmp.innerText\n                if ($tmp = document.querySelector('div#columnEpA h2.title')) { // 番剧讨论页的ep\n                    title += ' ' + $tmp.innerText.split(' ')[0]\n                }\n            }\n            const $voteForm = showVote(title, () => {\n                const val = $voteForm.elements.pollOption.value\n                if (!val) {\n                    alert(\"请选择后再投票！\");\n                    return;\n                }\n                let score = +val\n                vote_to_bgm(score, $voteForm.elements.comment.value, voteData.hasSuffix)\n                    .then((r) => {\n                        // 发出评论后, 会触发DOM树改变, 前面的代码监听了DOM树改变, 在必要的时刻会更新投票区域, 故这里不需要手动更新\n                        // voteData.voters[voteData.myUserId] = score\n                        // voteData.myScore = score\n                        // voteData.myReplyId = safe_prop(array_last(document.querySelectorAll('#comment_list > .row_reply')), 'id', 'no_id') // 评论列表的最后一条\n                        // showVoteResult(voteData)\n                        // 在ep页面, 有一个\"标记为看过功能\"\n                        if (util_page.ep() && localStorage.beuj_flag_to_watched) {\n                            let epId = array_last(location.pathname.split('/'))\n                            return ajax({ method: 'POST', dataType: 'json', url: `//${location.hostname}/subject/ep/${epId}/status/watched?gh=${getGh()}&ajax=1`, })\n                                .then(r => r.status === 'ok' ? r : Promise.reject(r))\n                                .catch(e => {\n                                    alert(`标记为看过 失败:\\n${util_stringify(e)}`)\n                                    return Promise.reject(e) // 继续抛出异常\n                                })\n                        } else {\n                            return 'ok'\n                        }\n                    })\n                    .then(r => console.log('result:', r))\n                    .catch(e => console.error('error:', e))\n            })\n        } else {\n            showVoteResult(voteData)\n        }\n    }\n\n    function showVoteResult(voteData) {\n        $poll_container.innerHTML = createVoteResultHtml(voteData.voters, voteData.myScore, voteData.myReplyId)\n    }\n\n    function showVote(title, onSubmit) {\n        $poll_container.innerHTML = createVoteHtml(title)\n        let $formContainer = $poll_container.querySelector('#form-container')\n        let $actionShowForm = $poll_container.querySelector('#action-show-form')\n        let $voteForm = $poll_container.querySelector('#vote-form')\n        $actionShowForm.addEventListener('click', (e) => {\n            setShowForm(!isShowForm())\n            $actionShowForm.innerText = getShowFormActionText()\n            new ClassHelper($formContainer).toggleClass('beuj-hidden')\n        })\n        $voteForm.onsubmit = function () {\n            let comment_template\n            let toSubmit = true\n            if (comment_template = $voteForm.elements.comment_template.value) {\n                toSubmit = false\n                let templates = comment_template.split(' ')\n                if (templates.length === commentTemplates.length) {\n                    // 更新模板\n                    commentTemplates = templates\n                    localStorage.beuj_comment_templates = commentTemplates.join(' ')\n                    toSubmit = true\n                } else {\n                    alert(`短评模板(${comment_template})不符合格式!\\n需要用空格分隔, 例如:\\n\"${commentTemplates.join(' ')}\"`)\n                }\n            }\n            toSubmit && onSubmit()\n            return false // no submit\n        }\n        $voteForm.elements.comment.addEventListener('keydown', (e) => {\n            if (e.ctrlKey && (e.keyCode === 13 || e.keyCode === 10)) { // ctrl + enter\n                $voteForm.elements.voteButton.click() // 直接form.submit()貌似有问题, 只能模拟提交\n            }\n        })\n        $voteForm.addEventListener('change', (e) => {\n            let name = e.target.name;\n            let value = e.target.type === 'checkbox' ? (e.target.checked ? TRUE : FALSE) : e.target.value\n            if (name.startsWith('beuj_')) {\n                localStorage[name] = value\n                console.log(name, ' => ', value);\n            } else if (name === 'pollOption') {\n                let score = +value\n                let comment = $voteForm.elements.comment.value\n                // 若简单评论为空, 或是评论模板中的值, 则修改简单评论为评论模板中的一个\n                if (comment === '' || commentTemplates.includes(comment)) {\n                    $voteForm.elements.comment.value = commentTemplates[score_to_index(score)]\n                    $voteForm.elements.comment.select() // 全选简评区\n                }\n            } else if (name === 'modify_comment_template') {\n                $voteForm.elements.comment_template.type = value ? 'text' : 'hidden'\n            }\n        })\n        $voteForm.elements.beuj_add_suffix.checked = localStorage.beuj_add_suffix\n        if ($voteForm.elements.beuj_flag_to_watched) {\n            $voteForm.elements.beuj_flag_to_watched.checked = localStorage.beuj_flag_to_watched\n        }\n        return $voteForm\n    }\n}\n\nfunction createVoteHtml(title) {\n    let rows = ''\n    for (let i = 0; i < commentTemplates.length; i++) {\n        let scoreStr = score_to_str(index_to_score(i))\n        rows += `<div style=\"margin: 3px 0;\"><label><input type=\"radio\" name=\"pollOption\" value=\"${scoreStr}\"> ${scoreStr} ${commentTemplates[i]}</label></div>`\n    }\n    return `\n<div class=\"forum_category\">${title} 投票\n    <a id=\"action-show-form\" class=\"beuj-float-right\">${getShowFormActionText()}</a>\n</div>\n<div id=\"form-container\" class=\"forum_boardrow1 ${isShowForm() ? '' : 'beuj-hidden'}\">\n<form id=\"vote-form\">\n    ${rows}\n    <textarea name=\"comment\" id=\"vote-comment\" class=\"reply\" rows=\"1\" placeholder=\"简短评价(Ctrl+Enter 快速提交)\"></textarea>\n    <input type=\"hidden\" name=\"comment_template\" class=\"inputtext\" style=\"margin-bottom: 6px;\" placeholder=\"短评模板; +2 +1 +0 -1 -2 分别对应的短评;使用空格分隔;\">\n    <br/>\n    <input type=\"submit\" name=\"voteButton\" value=\"投票\" class=\"inputButton\" id=\"voteButton\">\n    <label class=\"form-option\" title=\"没错, 短评模板时可以修改的\"><input type=\"checkbox\" name=\"modify_comment_template\" > 修改短评模板 </input></label>\n    ${util_page.ep() ? '<label class=\"form-option\" title=\"同时将当前ep标记为看过\"><input type=\"checkbox\" name=\"beuj_flag_to_watched\" > 标记为看过 </input></label>' : ''}\n    <label class=\"form-option\" title=\"会在评分的结尾追加'来自xxx脚本'的小尾巴, 为了防止刷屏, 只有当前页没有出现过小尾巴时才会追加.\" ><input type=\"checkbox\" name=\"beuj_add_suffix\" > 推荐脚本 </input></label>\n</form>\n</div>\n    `\n}\n\nfunction createVoteResultHtml(voters, myScore, myReplyId) {\n    const counts = new Array(commentTemplates.length).fill(0) // 投+2->-2分的人数的数组\n    const voterUserIds = Object.keys(voters)\n    for (let userId of voterUserIds) {\n        let score = voters[userId]\n        counts[score_to_index(score)]++\n    }\n\n    let voterCount = voterUserIds.length\n    let html = '';\n    const myIndex = score_to_index(myScore)\n    for (let i = 0; i < commentTemplates.length; i++) {\n        let width = (counts[i] / voterCount * 100).toFixed(1)\n        let isMyVote = myIndex === i\n        html += `\n            <tr>\n                <td align=\"left\">${score_to_str(index_to_score(i))} ${commentTemplates[i]}${isMyVote ? `<a href=\"#${myReplyId}\" class=\"l\">(your vote)</a>` : ''}</td>\n                <td width=\"35%\"><div class=\"vote_container\" style=\"width: ${width}%\">&nbsp;</div></td>\n                <td width=\"25\" align=\"center\">${counts[i]}</td>\n                <td width=\"40\" align=\"right\">${width}%</td>\n            </tr>`\n    }\n    return `\n<div class=\"forum_category\">投票结果</div><div class=\"forum_boardrow1\">\n    <table border=\"0\" width=\"100%\" cellpadding=\"\" cellspacing=\"5\">\n        ${html}\n    </table>\n    <div style=\"text-align: center;\">Voters: ${voterCount}</div>\n</div>`\n}\n\nmain()\n"
        },
        {
          "name": "bangumi_subject_name_cn_.user.js",
          "type": "blob",
          "size": 1.5888671875,
          "content": "// ==UserScript==\n// @name         番组计划主页观看进度中文标题\n// @namespace    https://github.com/ipcjs\n// @version      0.1.4\n// @description  Bangumi番组计划 主页观看进度 中文标题\n// @author       ipcjs\n// @include      *://bgm.tv/\n// @include      *://bangumi.tv/\n// @require      https://greasyfork.org/scripts/373283-ipcjs-lib-js/code/ipcjslibjs.js?version=637066\n// @require-origin https://raw.githubusercontent.com/ipcjs/bilibili-helper/user.js/ipcjs.lib.js\n// @grant        none\n// ==/UserScript==\n\n\nconst css = `\n.epGird > .tinyHeader {\n    display: flex!important;\n}\n.epGird > .tinyHeader > [data-subject-name] {\n    flex: auto;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n.epGird > .tinyHeader > * {\n    margin-right: 2px;\n}\n/*\nsmall.grey a {\n    font-size: 12px!important;\n}\n.prg_list a, .prg_list span {\n    font-size: 12px!important;\n}\n*/\n`\nipcjs.installInto(({ log, _, html }) => {\n    document.head.appendChild(_('style', {}, css))\n    const epGrids = document.querySelectorAll('.infoWrapper_tv .epGird')\n    // log(epGrids.length, epGrids)\n    epGrids.forEach((item) => {\n        const $title = item.children[0].children[1]\n        const $prg_list = item.children[1]\n        const title_cn = $title.getAttribute('data-subject-name-cn')\n        if (title_cn) {\n            item.insertBefore(\n                _('div', { className: 'bsnc-title-cn' }, [\n                    _('small', { className: 'grey' }, [\n                        _('a', { href: $title.href }, title_cn)\n                    ])\n                ]), $prg_list)\n        }\n    })\n})\n\n\n"
        },
        {
          "name": "bgm_tumblr_url_fix.user.js",
          "type": "blob",
          "size": 0.6962890625,
          "content": "// ==UserScript==\n// @name         Fix image url from Tumblr for BGM\n// @namespace    https://github.com/ipcjs\n// @version      0.0.1\n// @description  修复BGM中@vince19发布的来自Tumblr的外链图片的URL(-_-#)\n// @author       ipcjs\n// @include      http://bgm.tv/ep/*\n// @include      http://bangumi.tv/ep/*\n// @grant        none\n// ==/UserScript==\n\n(function () {\n    'use strict';\n    var\n        NEW_SERVER_NUM = '68',\n        REG = /^(https?:\\/\\/)(\\d+)(\\.media\\.tumblr\\.com\\/.*)$/,\n        imgList = document.querySelectorAll('img.code');\n    imgList.forEach(function (item, index) {\n        item.src = item.src.replace(REG, '$1' + NEW_SERVER_NUM + '$3');\n    });\n    // console.log(imgList);\n})();"
        },
        {
          "name": "bilibili_comment_spoiler_folder_.user.js",
          "type": "blob",
          "size": 2.08984375,
          "content": "// ==UserScript==\n// @name               Bilibili Comment Spoiler Folder\n// @name:zh-CN         B站评论区剧透折叠\n// @name:zh-HK         B站評論區劇透摺疊\n// @name:zh-TW         B站評論區劇透摺疊\n// @namespace          https://github.com/ipcjs\n// @version            1.0.3\n// @description        折叠评论中包含\"剧透\"的楼层\n// @description:zh-CN  折叠评论中包含\"剧透\"的楼层\n// @description:zh-HK  摺疊評論中包含“劇透”的樓層\n// @description:zh-TW  摺疊評論中包含“劇透”的樓層\n// @author             ipcjs\n// @include            *://www.bilibili.com/video/av*\n// @include            *://bangumi.bilibili.com/anime/*\n// @include            *://bangumi.bilibili.com/movie/*\n// @include            *://www.bilibili.com/bangumi/play/ep*\n// @require            https://code.jquery.com/jquery-2.2.4.min.js\n// @require            https://cdnjs.cloudflare.com/ajax/libs/arrive/2.4.1/arrive.min.js\n// @grant              GM_addStyle\n// ==/UserScript==\n\n'use strict'\nGM_addStyle(\"a.ep_spoiler_fold_toggle {display:block;color:#bbb;margin-top:5px}\")\nconst regex = /(剧透|劇透|R\\.?I\\.?P|走好)/i\nconst message = '可能有剧透！单击此处显示 / 隐藏'\n$('.comm').arrive('.list-item.reply-wrap', ele => {\n    // 处理剧透\n    const processSpoiler = (replyCount) => {\n        if ($('.ep_spoiler_fold_toggle', ele).length > 0) return // 已经添加了剧透警告, 着不需要再处理了\n\n        const $content = $('.con', ele).find('>.text, >.reply-box, >.paging-box')\n        $content.hide()\n        $($content[0]).before(`<a class=\"ep_spoiler_fold_toggle\" href=\"javascript:\">(+${replyCount}) ${message}</a>`)\n        $('.ep_spoiler_fold_toggle', ele).on('click', (event) => {\n            $content.slideToggle()\n        })\n    }\n    // 检测已有的文本\n    $text = $('.text, .text-con', ele)\n    if ($text.text().match(regex)) {\n        processSpoiler($text.length - 1)\n    }\n    // 检测将来增加的文本\n    ele.arrive('.text, .text-con', text => {\n        if ($(text).text().match(regex)) {\n            processSpoiler('x')\n        }\n    })\n\n})\n"
        },
        {
          "name": "bilibili_html5_full_screen_mode_optimize_style.user.js",
          "type": "blob",
          "size": 3.4541015625,
          "content": "// ==UserScript==\n// @name         Bilibili HTML5播放器网页全屏模式优化 脚本版\n// @namespace    http://tampermonkey.net/\n// @version      1.0.2\n// @description  移植自：http://userstyles.org/styles/131642\n// @author       ipcjs\n// @include      *://www.bilibili.com/video/av*\n// @include      *://www.bilibili.com/bangumi/play/*\n// @include      *://www.bilibili.com/html/html5player.html*\n// @include      *://www.bilibili.com/blackboard/player.html*\n// @include      *://www.bilibili.com/blackboard/html5player.html*\n// @include      *://www.bilibili.com/blackboard/html5playerbeta.html*\n// @include      *://www.bilibili.com/watchlater/*\n// @grant        none\n// ==/UserScript==\n\n'use strict'\nconst OLD_CSS = `\n@namespace url(http://www.w3.org/1999/xhtml);\n#bilibiliPlayer.mode-fullscreen .bilibili-player-video-sendbar {\n    transition: 0.2s;\n    opacity: 0!important;\n}\n#bilibiliPlayer.mode-fullscreen .bilibili-player-video-sendbar:hover {\n    opacity: 1!important;\n}\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-wrap{\n    height:100%!important;\n    width:100%!important;\n  }\n\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-control{\n    /*display: block;*/\n    opacity: 0!important;\n    transition: 0.2s;\n    position:absolute;\n    bottom:0px;\n}\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-control:hover{\n    /*opacity: 0.7!important; */\n    opacity: 1!important;\n}\n\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-sendbar{\n    /*display: block;*/\n    opacity: 0!important;\n    transition: 0.2s;\n    position:absolute;\n    top:0px;\n    width:100%!important;\n}\n\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-sendbar:hover{\n    /*opacity: 0.8!important; */\n    opacity: 1!important;\n}\n\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-sendbar .bilibili-player-mode-selection-container{\n    height:120px;\n    border-radius: 5px;\n    top:100%;\n}\n\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-sendbar .bilibili-player-color-picker-container{\n    height:208px;\n    border-radius: 5px;\n    top:100%;\n}\n\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-info-container{\n    top:40px;\n}\n\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-float-lastplay{\n    bottom:30px;\n}`\n\nconst NEW_CSS = `\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-control-wrap,\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-top,\n#bilibiliPlayer.mode-fullscreen .bilibili-player-video-control-wrap,\n#bilibiliPlayer.mode-fullscreen .bilibili-player-video-top\n{\n    opacity: 0!important;\n    transition: 0.2s;\n}\n\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-control-wrap:hover,\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-top:hover,\n#bilibiliPlayer.mode-fullscreen .bilibili-player-video-control-wrap:hover,\n#bilibiliPlayer.mode-fullscreen .bilibili-player-video-top:hover\n{\n    opacity: 1!important;\n}\n#bilibiliPlayer.mode-webfullscreen .bilibili-player-video-top,\n#bilibiliPlayer.mode-fullscreen .bilibili-player-video-top\n{\n    pointer-events: inherit!important;\n}\n\n`\nfunction addStyle(css) {\n    let style = document.createElement('style')\n    style.innerHTML = css\n    document.querySelector('head').appendChild(style)\n}\n\nlet isNewPlayer = document.querySelector('#entryOld > .old-btn > a, .entry-old > .btn-old') // 回到老版按钮\n    || !document.querySelector('.new-entry > .btn') // 试用新版按钮\nconsole.log(`isNewPlayer: ${isNewPlayer}`)\naddStyle(isNewPlayer ? NEW_CSS : OLD_CSS)\n\n"
        },
        {
          "name": "donate",
          "type": "tree",
          "content": null
        },
        {
          "name": "ipcjs.lib.js",
          "type": "blob",
          "size": 3.7265625,
          "content": "; (function () {\n    const log = console.log.bind(console)\n    /**\n     * 创建元素的快捷方法: \n     * 1. type, props, children\n     * 2. type, props, innerHTML\n     * 3. 'text', text\n     * @param type string, 标签名; 特殊的, 若为text, 则表示创建文字, 对应的t为文字的内容\n     * @param props object, 属性; 特殊的属性名有: className, 类名; style, 样式, 值为(样式名, 值)形式的object; event, 值为(事件名, 监听函数)形式的object;\n     * @param children array, 子元素; 也可以直接是html文本;\n     */\n    const util_ui_element_creator = (type, props, children) => {\n        let elem = null;\n        if (type === \"text\") {\n            return document.createTextNode(props);\n        } else {\n            elem = document.createElement(type);\n        }\n        for (let n in props) {\n            if (n === \"style\") {\n                for (let x in props.style) {\n                    elem.style[x] = props.style[x];\n                }\n            } else if (n === \"className\") {\n                elem.className = props[n];\n            } else if (n === \"event\") {\n                for (let x in props.event) {\n                    elem.addEventListener(x, props.event[x]);\n                }\n            } else {\n                elem.setAttribute(n, props[n]);\n            }\n        }\n        if (children) {\n            if (typeof children === 'string') {\n                elem.innerHTML = children;\n            } else {\n                for (let i = 0; i < children.length; i++) {\n                    if (children[i] != null)\n                        elem.appendChild(children[i]);\n                }\n            }\n        }\n        return elem;\n    }\n    const util_html = function (html) {\n        let template = util_ui_element_creator('template')\n        template.innerHTML = html.trim()\n        return Array.from(template.content.childNodes)\n    }\n\n    class ElePlus {\n        constructor(ele) {\n            this.ele = ele;\n        }\n        hasClass(name) {\n            return this.ele.className.includes(name);\n        }\n        removeClass(name) {\n            let list = this.ele.className.split(/ +/);\n            let index = list.indexOf(name);\n            if (index != -1) {\n                list.splice(index, 1);\n                this.ele.className = list.join(' ');\n            }\n            return this;\n        }\n        addClass(name) {\n            this.ele.className = `${this.ele.className} ${name}`;\n            return this;\n        }\n        toggleClass(name) {\n            this.hasClass(name) ? this.removeClass(name) : this.addClass(name);\n            return this;\n        }\n        on(eventName, listener) {\n            this.ele.addEventListener(eventName, (...args) => {\n                listener.apply(this.ele, args);\n            });\n            return this;\n        }\n        text(value) {\n            if (value === undefined) {\n                return this.ele.innerText;\n            } else {\n                this.ele.innerText = value;\n                return this;\n            }\n        }\n        html(value) {\n            if (value === undefined) {\n                return this.ele.innerHTML;\n            } else {\n                this.ele.innerHTML = value;\n                return this;\n            }\n        }\n    }\n\n    if (window.ipcjs) {\n        log('已经存在window.ipcjs', window.ipcjs)\n    } else {\n        window.ipcjs = {\n            _: util_ui_element_creator,\n            html: util_html,\n            log: log,\n            $: (ele) => new ElePlus(ele),\n            installInto: function (target) {\n                if (typeof target === 'function') {\n                    target.call(null, this)\n                } else {\n                    Object.assign(target, this)\n                }\n            }\n        }\n    }\n})()\n"
        },
        {
          "name": "original_google_for_personal_blocklist_style.user.js",
          "type": "blob",
          "size": 0.7578125,
          "content": "// ==UserScript==\n// @name         Original Google For Personal Blocklist\n// @namespace    http://tampermonkey.net/\n// @version      0.2\n// @description  将使用Personal Blocklist (by Google)后的Google的搜索界面改成原来的样子\n// @author       ipcjs\n// @include      https://www.google.com/search?*\n// @include      https://www.google.com/webhp?*\n// @include      https://www.google.co.jp/search?*\n// @grant        none\n// ==/UserScript==\n\n(function () {\n    'use strict';\n    let css = `.blockLink {\n        opacity: 0;\n        height: 0px;\n    }\n    .blockLink:hover {\n        opacity: 1;\n    }\n    .srg div.g.pb {\n    }`;\n    let style = document.createElement('style');\n    style.innerHTML = css;\n    document.querySelector('head').appendChild(style);\n})();"
        },
        {
          "name": "package-lock.json",
          "type": "blob",
          "size": 28.93359375,
          "content": "{\n  \"name\": \"bilibili-helper\",\n  \"version\": \"1.0.0\",\n  \"lockfileVersion\": 3,\n  \"requires\": true,\n  \"packages\": {\n    \"\": {\n      \"name\": \"bilibili-helper\",\n      \"version\": \"1.0.0\",\n      \"license\": \"MIT\",\n      \"dependencies\": {\n        \"opencc-js\": \"^1.0.5\"\n      },\n      \"devDependencies\": {\n        \"@rollup/plugin-commonjs\": \"^24.0.1\",\n        \"@rollup/plugin-typescript\": \"^6.1.0\",\n        \"@types/greasemonkey\": \"^4.0.2\",\n        \"magic-string\": \"^0.25.7\",\n        \"rollup\": \"^2.32.1\",\n        \"rollup-plugin-html\": \"^0.2.1\",\n        \"rollup-plugin-scss\": \"^3.0.0\",\n        \"sass\": \"^1.69.5\",\n        \"tslib\": \"^2.0.3\",\n        \"typescript\": \"^5.3.3\"\n      }\n    },\n    \"node_modules/@jridgewell/sourcemap-codec\": {\n      \"version\": \"1.4.15\",\n      \"resolved\": \"https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.4.15.tgz\",\n      \"integrity\": \"sha512-eF2rxCRulEKXHTRiDrDy6erMYWqNw4LPdQ8UQA4huuxaQsVeRPFl2oM8oDGxMFhJUWZf9McpLtJasDDZb/Bpeg==\",\n      \"dev\": true\n    },\n    \"node_modules/@rollup/plugin-commonjs\": {\n      \"version\": \"24.1.0\",\n      \"resolved\": \"https://registry.npmjs.org/@rollup/plugin-commonjs/-/plugin-commonjs-24.1.0.tgz\",\n      \"integrity\": \"sha512-eSL45hjhCWI0jCCXcNtLVqM5N1JlBGvlFfY0m6oOYnLCJ6N0qEXoZql4sY2MOUArzhH4SA/qBpTxvvZp2Sc+DQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"@rollup/pluginutils\": \"^5.0.1\",\n        \"commondir\": \"^1.0.1\",\n        \"estree-walker\": \"^2.0.2\",\n        \"glob\": \"^8.0.3\",\n        \"is-reference\": \"1.2.1\",\n        \"magic-string\": \"^0.27.0\"\n      },\n      \"engines\": {\n        \"node\": \">=14.0.0\"\n      },\n      \"peerDependencies\": {\n        \"rollup\": \"^2.68.0||^3.0.0\"\n      },\n      \"peerDependenciesMeta\": {\n        \"rollup\": {\n          \"optional\": true\n        }\n      }\n    },\n    \"node_modules/@rollup/plugin-commonjs/node_modules/magic-string\": {\n      \"version\": \"0.27.0\",\n      \"resolved\": \"https://registry.npmjs.org/magic-string/-/magic-string-0.27.0.tgz\",\n      \"integrity\": \"sha512-8UnnX2PeRAPZuN12svgR9j7M1uWMovg/CEnIwIG0LFkXSJJe4PdfUGiTGl8V9bsBHFUtfVINcSyYxd7q+kx9fA==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"@jridgewell/sourcemap-codec\": \"^1.4.13\"\n      },\n      \"engines\": {\n        \"node\": \">=12\"\n      }\n    },\n    \"node_modules/@rollup/plugin-typescript\": {\n      \"version\": \"6.1.0\",\n      \"resolved\": \"https://registry.npmjs.org/@rollup/plugin-typescript/-/plugin-typescript-6.1.0.tgz\",\n      \"integrity\": \"sha512-hJxaiE6WyNOsK+fZpbFh9CUijZYqPQuAOWO5khaGTUkM8DYNNyA2TDlgamecE+qLOG1G1+CwbWMAx3rbqpp6xQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"@rollup/pluginutils\": \"^3.1.0\",\n        \"resolve\": \"^1.17.0\"\n      },\n      \"engines\": {\n        \"node\": \">=8.0.0\"\n      },\n      \"peerDependencies\": {\n        \"rollup\": \"^2.14.0\",\n        \"tslib\": \"*\",\n        \"typescript\": \">=3.4.0\"\n      }\n    },\n    \"node_modules/@rollup/plugin-typescript/node_modules/@rollup/pluginutils\": {\n      \"version\": \"3.1.0\",\n      \"resolved\": \"https://registry.npmjs.org/@rollup/pluginutils/-/pluginutils-3.1.0.tgz\",\n      \"integrity\": \"sha512-GksZ6pr6TpIjHm8h9lSQ8pi8BE9VeubNT0OMJ3B5uZJ8pz73NPiqOtCog/x2/QzM1ENChPKxMDhiQuRHsqc+lg==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"@types/estree\": \"0.0.39\",\n        \"estree-walker\": \"^1.0.1\",\n        \"picomatch\": \"^2.2.2\"\n      },\n      \"engines\": {\n        \"node\": \">= 8.0.0\"\n      },\n      \"peerDependencies\": {\n        \"rollup\": \"^1.20.0||^2.0.0\"\n      }\n    },\n    \"node_modules/@rollup/plugin-typescript/node_modules/@types/estree\": {\n      \"version\": \"0.0.39\",\n      \"resolved\": \"https://registry.npmjs.org/@types/estree/-/estree-0.0.39.tgz\",\n      \"integrity\": \"sha512-EYNwp3bU+98cpU4lAWYYL7Zz+2gryWH1qbdDTidVd6hkiR6weksdbMadyXKXNPEkQFhXM+hVO9ZygomHXp+AIw==\",\n      \"dev\": true\n    },\n    \"node_modules/@rollup/plugin-typescript/node_modules/estree-walker\": {\n      \"version\": \"1.0.1\",\n      \"resolved\": \"https://registry.npmjs.org/estree-walker/-/estree-walker-1.0.1.tgz\",\n      \"integrity\": \"sha512-1fMXF3YP4pZZVozF8j/ZLfvnR8NSIljt56UhbZ5PeeDmmGHpgpdwQt7ITlGvYaQukCvuBRMLEiKiYC+oeIg4cg==\",\n      \"dev\": true\n    },\n    \"node_modules/@rollup/pluginutils\": {\n      \"version\": \"5.1.0\",\n      \"resolved\": \"https://registry.npmjs.org/@rollup/pluginutils/-/pluginutils-5.1.0.tgz\",\n      \"integrity\": \"sha512-XTIWOPPcpvyKI6L1NHo0lFlCyznUEyPmPY1mc3KpPVDYulHSTvyeLNVW00QTLIAFNhR3kYnJTQHeGqU4M3n09g==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"@types/estree\": \"^1.0.0\",\n        \"estree-walker\": \"^2.0.2\",\n        \"picomatch\": \"^2.3.1\"\n      },\n      \"engines\": {\n        \"node\": \">=14.0.0\"\n      },\n      \"peerDependencies\": {\n        \"rollup\": \"^1.20.0||^2.0.0||^3.0.0||^4.0.0\"\n      },\n      \"peerDependenciesMeta\": {\n        \"rollup\": {\n          \"optional\": true\n        }\n      }\n    },\n    \"node_modules/@types/estree\": {\n      \"version\": \"1.0.5\",\n      \"resolved\": \"https://registry.npmjs.org/@types/estree/-/estree-1.0.5.tgz\",\n      \"integrity\": \"sha512-/kYRxGDLWzHOB7q+wtSUQlFrtcdUccpfy+X+9iMBpHK8QLLhx2wIPYuS5DYtR9Wa/YlZAbIovy7qVdB1Aq6Lyw==\",\n      \"dev\": true\n    },\n    \"node_modules/@types/greasemonkey\": {\n      \"version\": \"4.0.7\",\n      \"resolved\": \"https://registry.npmjs.org/@types/greasemonkey/-/greasemonkey-4.0.7.tgz\",\n      \"integrity\": \"sha512-DuYBRf/T4zixO/xhQ3eicZCBjjOgbSSXuHP5XkLNf/UBayrJpBniP9il/AQaPy0lffl4Bco48zgHL+pZmQ6Q0A==\",\n      \"dev\": true\n    },\n    \"node_modules/anymatch\": {\n      \"version\": \"3.1.3\",\n      \"resolved\": \"https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz\",\n      \"integrity\": \"sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"normalize-path\": \"^3.0.0\",\n        \"picomatch\": \"^2.0.4\"\n      },\n      \"engines\": {\n        \"node\": \">= 8\"\n      }\n    },\n    \"node_modules/balanced-match\": {\n      \"version\": \"1.0.2\",\n      \"resolved\": \"https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz\",\n      \"integrity\": \"sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==\",\n      \"dev\": true\n    },\n    \"node_modules/binary-extensions\": {\n      \"version\": \"2.2.0\",\n      \"resolved\": \"https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.2.0.tgz\",\n      \"integrity\": \"sha512-jDctJ/IVQbZoJykoeHbhXpOlNBqGNcwXJKJog42E5HDPUwQTSdjCHdihjj0DlnheQ7blbT6dHOafNAiS8ooQKA==\",\n      \"dev\": true,\n      \"engines\": {\n        \"node\": \">=8\"\n      }\n    },\n    \"node_modules/brace-expansion\": {\n      \"version\": \"2.0.1\",\n      \"resolved\": \"https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz\",\n      \"integrity\": \"sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"balanced-match\": \"^1.0.0\"\n      }\n    },\n    \"node_modules/braces\": {\n      \"version\": \"3.0.2\",\n      \"resolved\": \"https://registry.npmjs.org/braces/-/braces-3.0.2.tgz\",\n      \"integrity\": \"sha512-b8um+L1RzM3WDSzvhm6gIz1yfTbBt6YTlcEKAvsmqCZZFw46z626lVj9j1yEPW33H5H+lBQpZMP1k8l+78Ha0A==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"fill-range\": \"^7.0.1\"\n      },\n      \"engines\": {\n        \"node\": \">=8\"\n      }\n    },\n    \"node_modules/camel-case\": {\n      \"version\": \"3.0.0\",\n      \"resolved\": \"https://registry.npmjs.org/camel-case/-/camel-case-3.0.0.tgz\",\n      \"integrity\": \"sha512-+MbKztAYHXPr1jNTSKQF52VpcFjwY5RkR7fxksV8Doo4KAYc5Fl4UJRgthBbTmEx8C54DqahhbLJkDwjI3PI/w==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"no-case\": \"^2.2.0\",\n        \"upper-case\": \"^1.1.1\"\n      }\n    },\n    \"node_modules/chokidar\": {\n      \"version\": \"3.6.0\",\n      \"resolved\": \"https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz\",\n      \"integrity\": \"sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"anymatch\": \"~3.1.2\",\n        \"braces\": \"~3.0.2\",\n        \"glob-parent\": \"~5.1.2\",\n        \"is-binary-path\": \"~2.1.0\",\n        \"is-glob\": \"~4.0.1\",\n        \"normalize-path\": \"~3.0.0\",\n        \"readdirp\": \"~3.6.0\"\n      },\n      \"engines\": {\n        \"node\": \">= 8.10.0\"\n      },\n      \"funding\": {\n        \"url\": \"https://paulmillr.com/funding/\"\n      },\n      \"optionalDependencies\": {\n        \"fsevents\": \"~2.3.2\"\n      }\n    },\n    \"node_modules/clean-css\": {\n      \"version\": \"4.2.4\",\n      \"resolved\": \"https://registry.npmjs.org/clean-css/-/clean-css-4.2.4.tgz\",\n      \"integrity\": \"sha512-EJUDT7nDVFDvaQgAo2G/PJvxmp1o/c6iXLbswsBbUFXi1Nr+AjA2cKmfbKDMjMvzEe75g3P6JkaDDAKk96A85A==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"source-map\": \"~0.6.0\"\n      },\n      \"engines\": {\n        \"node\": \">= 4.0\"\n      }\n    },\n    \"node_modules/commander\": {\n      \"version\": \"2.17.1\",\n      \"resolved\": \"https://registry.npmjs.org/commander/-/commander-2.17.1.tgz\",\n      \"integrity\": \"sha512-wPMUt6FnH2yzG95SA6mzjQOEKUU3aLaDEmzs1ti+1E9h+CsrZghRlqEM/EJ4KscsQVG8uNN4uVreUeT8+drlgg==\",\n      \"dev\": true\n    },\n    \"node_modules/commondir\": {\n      \"version\": \"1.0.1\",\n      \"resolved\": \"https://registry.npmjs.org/commondir/-/commondir-1.0.1.tgz\",\n      \"integrity\": \"sha512-W9pAhw0ja1Edb5GVdIF1mjZw/ASI0AlShXM83UUGe2DVr5TdAPEA1OA8m/g8zWp9x6On7gqufY+FatDbC3MDQg==\",\n      \"dev\": true\n    },\n    \"node_modules/concat-map\": {\n      \"version\": \"0.0.1\",\n      \"resolved\": \"https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz\",\n      \"integrity\": \"sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==\",\n      \"dev\": true\n    },\n    \"node_modules/estree-walker\": {\n      \"version\": \"2.0.2\",\n      \"resolved\": \"https://registry.npmjs.org/estree-walker/-/estree-walker-2.0.2.tgz\",\n      \"integrity\": \"sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==\",\n      \"dev\": true\n    },\n    \"node_modules/fill-range\": {\n      \"version\": \"7.0.1\",\n      \"resolved\": \"https://registry.npmjs.org/fill-range/-/fill-range-7.0.1.tgz\",\n      \"integrity\": \"sha512-qOo9F+dMUmC2Lcb4BbVvnKJxTPjCm+RRpe4gDuGrzkL7mEVl/djYSu2OdQ2Pa302N4oqkSg9ir6jaLWJ2USVpQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"to-regex-range\": \"^5.0.1\"\n      },\n      \"engines\": {\n        \"node\": \">=8\"\n      }\n    },\n    \"node_modules/fs.realpath\": {\n      \"version\": \"1.0.0\",\n      \"resolved\": \"https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz\",\n      \"integrity\": \"sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw==\",\n      \"dev\": true\n    },\n    \"node_modules/fsevents\": {\n      \"version\": \"2.3.3\",\n      \"resolved\": \"https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz\",\n      \"integrity\": \"sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==\",\n      \"dev\": true,\n      \"hasInstallScript\": true,\n      \"optional\": true,\n      \"os\": [\n        \"darwin\"\n      ],\n      \"engines\": {\n        \"node\": \"^8.16.0 || ^10.6.0 || >=11.0.0\"\n      }\n    },\n    \"node_modules/function-bind\": {\n      \"version\": \"1.1.2\",\n      \"resolved\": \"https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz\",\n      \"integrity\": \"sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==\",\n      \"dev\": true,\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/ljharb\"\n      }\n    },\n    \"node_modules/glob\": {\n      \"version\": \"8.1.0\",\n      \"resolved\": \"https://registry.npmjs.org/glob/-/glob-8.1.0.tgz\",\n      \"integrity\": \"sha512-r8hpEjiQEYlF2QU0df3dS+nxxSIreXQS1qRhMJM0Q5NDdR386C7jb7Hwwod8Fgiuex+k0GFjgft18yvxm5XoCQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"fs.realpath\": \"^1.0.0\",\n        \"inflight\": \"^1.0.4\",\n        \"inherits\": \"2\",\n        \"minimatch\": \"^5.0.1\",\n        \"once\": \"^1.3.0\"\n      },\n      \"engines\": {\n        \"node\": \">=12\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/isaacs\"\n      }\n    },\n    \"node_modules/glob-parent\": {\n      \"version\": \"5.1.2\",\n      \"resolved\": \"https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz\",\n      \"integrity\": \"sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"is-glob\": \"^4.0.1\"\n      },\n      \"engines\": {\n        \"node\": \">= 6\"\n      }\n    },\n    \"node_modules/hasown\": {\n      \"version\": \"2.0.1\",\n      \"resolved\": \"https://registry.npmjs.org/hasown/-/hasown-2.0.1.tgz\",\n      \"integrity\": \"sha512-1/th4MHjnwncwXsIW6QMzlvYL9kG5e/CpVvLRZe4XPa8TOUNbCELqmvhDmnkNsAjwaG4+I8gJJL0JBvTTLO9qA==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"function-bind\": \"^1.1.2\"\n      },\n      \"engines\": {\n        \"node\": \">= 0.4\"\n      }\n    },\n    \"node_modules/he\": {\n      \"version\": \"1.2.0\",\n      \"resolved\": \"https://registry.npmjs.org/he/-/he-1.2.0.tgz\",\n      \"integrity\": \"sha512-F/1DnUGPopORZi0ni+CvrCgHQ5FyEAHRLSApuYWMmrbSwoN2Mn/7k+Gl38gJnR7yyDZk6WLXwiGod1JOWNDKGw==\",\n      \"dev\": true,\n      \"bin\": {\n        \"he\": \"bin/he\"\n      }\n    },\n    \"node_modules/html-minifier\": {\n      \"version\": \"3.5.21\",\n      \"resolved\": \"https://registry.npmjs.org/html-minifier/-/html-minifier-3.5.21.tgz\",\n      \"integrity\": \"sha512-LKUKwuJDhxNa3uf/LPR/KVjm/l3rBqtYeCOAekvG8F1vItxMUpueGd94i/asDDr8/1u7InxzFA5EeGjhhG5mMA==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"camel-case\": \"3.0.x\",\n        \"clean-css\": \"4.2.x\",\n        \"commander\": \"2.17.x\",\n        \"he\": \"1.2.x\",\n        \"param-case\": \"2.1.x\",\n        \"relateurl\": \"0.2.x\",\n        \"uglify-js\": \"3.4.x\"\n      },\n      \"bin\": {\n        \"html-minifier\": \"cli.js\"\n      },\n      \"engines\": {\n        \"node\": \">=4\"\n      }\n    },\n    \"node_modules/immutable\": {\n      \"version\": \"4.3.5\",\n      \"resolved\": \"https://registry.npmjs.org/immutable/-/immutable-4.3.5.tgz\",\n      \"integrity\": \"sha512-8eabxkth9gZatlwl5TBuJnCsoTADlL6ftEr7A4qgdaTsPyreilDSnUk57SO+jfKcNtxPa22U5KK6DSeAYhpBJw==\",\n      \"dev\": true\n    },\n    \"node_modules/inflight\": {\n      \"version\": \"1.0.6\",\n      \"resolved\": \"https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz\",\n      \"integrity\": \"sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"once\": \"^1.3.0\",\n        \"wrappy\": \"1\"\n      }\n    },\n    \"node_modules/inherits\": {\n      \"version\": \"2.0.4\",\n      \"resolved\": \"https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz\",\n      \"integrity\": \"sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==\",\n      \"dev\": true\n    },\n    \"node_modules/is-binary-path\": {\n      \"version\": \"2.1.0\",\n      \"resolved\": \"https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz\",\n      \"integrity\": \"sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"binary-extensions\": \"^2.0.0\"\n      },\n      \"engines\": {\n        \"node\": \">=8\"\n      }\n    },\n    \"node_modules/is-core-module\": {\n      \"version\": \"2.13.1\",\n      \"resolved\": \"https://registry.npmjs.org/is-core-module/-/is-core-module-2.13.1.tgz\",\n      \"integrity\": \"sha512-hHrIjvZsftOsvKSn2TRYl63zvxsgE0K+0mYMoH6gD4omR5IWB2KynivBQczo3+wF1cCkjzvptnI9Q0sPU66ilw==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"hasown\": \"^2.0.0\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/ljharb\"\n      }\n    },\n    \"node_modules/is-extglob\": {\n      \"version\": \"2.1.1\",\n      \"resolved\": \"https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz\",\n      \"integrity\": \"sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==\",\n      \"dev\": true,\n      \"engines\": {\n        \"node\": \">=0.10.0\"\n      }\n    },\n    \"node_modules/is-glob\": {\n      \"version\": \"4.0.3\",\n      \"resolved\": \"https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz\",\n      \"integrity\": \"sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"is-extglob\": \"^2.1.1\"\n      },\n      \"engines\": {\n        \"node\": \">=0.10.0\"\n      }\n    },\n    \"node_modules/is-number\": {\n      \"version\": \"7.0.0\",\n      \"resolved\": \"https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz\",\n      \"integrity\": \"sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==\",\n      \"dev\": true,\n      \"engines\": {\n        \"node\": \">=0.12.0\"\n      }\n    },\n    \"node_modules/is-reference\": {\n      \"version\": \"1.2.1\",\n      \"resolved\": \"https://registry.npmjs.org/is-reference/-/is-reference-1.2.1.tgz\",\n      \"integrity\": \"sha512-U82MsXXiFIrjCK4otLT+o2NA2Cd2g5MLoOVXUZjIOhLurrRxpEXzI8O0KZHr3IjLvlAH1kTPYSuqer5T9ZVBKQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"@types/estree\": \"*\"\n      }\n    },\n    \"node_modules/lower-case\": {\n      \"version\": \"1.1.4\",\n      \"resolved\": \"https://registry.npmjs.org/lower-case/-/lower-case-1.1.4.tgz\",\n      \"integrity\": \"sha512-2Fgx1Ycm599x+WGpIYwJOvsjmXFzTSc34IwDWALRA/8AopUKAVPwfJ+h5+f85BCp0PWmmJcWzEpxOpoXycMpdA==\",\n      \"dev\": true\n    },\n    \"node_modules/magic-string\": {\n      \"version\": \"0.25.9\",\n      \"resolved\": \"https://registry.npmjs.org/magic-string/-/magic-string-0.25.9.tgz\",\n      \"integrity\": \"sha512-RmF0AsMzgt25qzqqLc1+MbHmhdx0ojF2Fvs4XnOqz2ZOBXzzkEwc/dJQZCYHAn7v1jbVOjAZfK8msRn4BxO4VQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"sourcemap-codec\": \"^1.4.8\"\n      }\n    },\n    \"node_modules/minimatch\": {\n      \"version\": \"5.1.6\",\n      \"resolved\": \"https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz\",\n      \"integrity\": \"sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"brace-expansion\": \"^2.0.1\"\n      },\n      \"engines\": {\n        \"node\": \">=10\"\n      }\n    },\n    \"node_modules/no-case\": {\n      \"version\": \"2.3.2\",\n      \"resolved\": \"https://registry.npmjs.org/no-case/-/no-case-2.3.2.tgz\",\n      \"integrity\": \"sha512-rmTZ9kz+f3rCvK2TD1Ue/oZlns7OGoIWP4fc3llxxRXlOkHKoWPPWJOfFYpITabSow43QJbRIoHQXtt10VldyQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"lower-case\": \"^1.1.1\"\n      }\n    },\n    \"node_modules/normalize-path\": {\n      \"version\": \"3.0.0\",\n      \"resolved\": \"https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz\",\n      \"integrity\": \"sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==\",\n      \"dev\": true,\n      \"engines\": {\n        \"node\": \">=0.10.0\"\n      }\n    },\n    \"node_modules/once\": {\n      \"version\": \"1.4.0\",\n      \"resolved\": \"https://registry.npmjs.org/once/-/once-1.4.0.tgz\",\n      \"integrity\": \"sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"wrappy\": \"1\"\n      }\n    },\n    \"node_modules/opencc-js\": {\n      \"version\": \"1.0.5\",\n      \"resolved\": \"https://registry.npmjs.org/opencc-js/-/opencc-js-1.0.5.tgz\",\n      \"integrity\": \"sha512-LD+1SoNnZdlRwtYTjnQdFrSVCAaYpuDqL5CkmOaHOkKoKh7mFxUicLTRVNLU5C+Jmi1vXQ3QL4jWdgSaa4sKjg==\"\n    },\n    \"node_modules/param-case\": {\n      \"version\": \"2.1.1\",\n      \"resolved\": \"https://registry.npmjs.org/param-case/-/param-case-2.1.1.tgz\",\n      \"integrity\": \"sha512-eQE845L6ot89sk2N8liD8HAuH4ca6Vvr7VWAWwt7+kvvG5aBcPmmphQ68JsEG2qa9n1TykS2DLeMt363AAH8/w==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"no-case\": \"^2.2.0\"\n      }\n    },\n    \"node_modules/path-parse\": {\n      \"version\": \"1.0.7\",\n      \"resolved\": \"https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz\",\n      \"integrity\": \"sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==\",\n      \"dev\": true\n    },\n    \"node_modules/picomatch\": {\n      \"version\": \"2.3.1\",\n      \"resolved\": \"https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz\",\n      \"integrity\": \"sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==\",\n      \"dev\": true,\n      \"engines\": {\n        \"node\": \">=8.6\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/jonschlinkert\"\n      }\n    },\n    \"node_modules/readdirp\": {\n      \"version\": \"3.6.0\",\n      \"resolved\": \"https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz\",\n      \"integrity\": \"sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"picomatch\": \"^2.2.1\"\n      },\n      \"engines\": {\n        \"node\": \">=8.10.0\"\n      }\n    },\n    \"node_modules/relateurl\": {\n      \"version\": \"0.2.7\",\n      \"resolved\": \"https://registry.npmjs.org/relateurl/-/relateurl-0.2.7.tgz\",\n      \"integrity\": \"sha512-G08Dxvm4iDN3MLM0EsP62EDV9IuhXPR6blNz6Utcp7zyV3tr4HVNINt6MpaRWbxoOHT3Q7YN2P+jaHX8vUbgog==\",\n      \"dev\": true,\n      \"engines\": {\n        \"node\": \">= 0.10\"\n      }\n    },\n    \"node_modules/resolve\": {\n      \"version\": \"1.22.8\",\n      \"resolved\": \"https://registry.npmjs.org/resolve/-/resolve-1.22.8.tgz\",\n      \"integrity\": \"sha512-oKWePCxqpd6FlLvGV1VU0x7bkPmmCNolxzjMf4NczoDnQcIWrAF+cPtZn5i6n+RfD2d9i0tzpKnG6Yk168yIyw==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"is-core-module\": \"^2.13.0\",\n        \"path-parse\": \"^1.0.7\",\n        \"supports-preserve-symlinks-flag\": \"^1.0.0\"\n      },\n      \"bin\": {\n        \"resolve\": \"bin/resolve\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/ljharb\"\n      }\n    },\n    \"node_modules/rollup\": {\n      \"version\": \"2.79.1\",\n      \"resolved\": \"https://registry.npmjs.org/rollup/-/rollup-2.79.1.tgz\",\n      \"integrity\": \"sha512-uKxbd0IhMZOhjAiD5oAFp7BqvkA4Dv47qpOCtaNvng4HBwdbWtdOh8f5nZNuk2rp51PMGk3bzfWu5oayNEuYnw==\",\n      \"dev\": true,\n      \"bin\": {\n        \"rollup\": \"dist/bin/rollup\"\n      },\n      \"engines\": {\n        \"node\": \">=10.0.0\"\n      },\n      \"optionalDependencies\": {\n        \"fsevents\": \"~2.3.2\"\n      }\n    },\n    \"node_modules/rollup-plugin-html\": {\n      \"version\": \"0.2.1\",\n      \"resolved\": \"https://registry.npmjs.org/rollup-plugin-html/-/rollup-plugin-html-0.2.1.tgz\",\n      \"integrity\": \"sha512-qnyToGUAjjG69+M+KitUsHnfnLjpjtZdO3nIP0LN50KG/r6zEoBq/pfneAwWkxY/z13zM5aFFXSBY6+6M7bvUw==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"html-minifier\": \"^3.0.2\",\n        \"rollup-pluginutils\": \"^1.5.0\"\n      }\n    },\n    \"node_modules/rollup-plugin-scss\": {\n      \"version\": \"3.0.0\",\n      \"resolved\": \"https://registry.npmjs.org/rollup-plugin-scss/-/rollup-plugin-scss-3.0.0.tgz\",\n      \"integrity\": \"sha512-UldNaNHEon2a5IusHvj/Nnwc7q13YDvbFxz5pfNbHBNStxGoUNyM+0XwAA/UafJ1u8XRPGdBMrhWFthrrGZdWQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"rollup-pluginutils\": \"^2.3.3\"\n      }\n    },\n    \"node_modules/rollup-plugin-scss/node_modules/estree-walker\": {\n      \"version\": \"0.6.1\",\n      \"resolved\": \"https://registry.npmjs.org/estree-walker/-/estree-walker-0.6.1.tgz\",\n      \"integrity\": \"sha512-SqmZANLWS0mnatqbSfRP5g8OXZC12Fgg1IwNtLsyHDzJizORW4khDfjPqJZsemPWBB2uqykUah5YpQ6epsqC/w==\",\n      \"dev\": true\n    },\n    \"node_modules/rollup-plugin-scss/node_modules/rollup-pluginutils\": {\n      \"version\": \"2.8.2\",\n      \"resolved\": \"https://registry.npmjs.org/rollup-pluginutils/-/rollup-pluginutils-2.8.2.tgz\",\n      \"integrity\": \"sha512-EEp9NhnUkwY8aif6bxgovPHMoMoNr2FulJziTndpt5H9RdwC47GSGuII9XxpSdzVGM0GWrNPHV6ie1LTNJPaLQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"estree-walker\": \"^0.6.1\"\n      }\n    },\n    \"node_modules/rollup-pluginutils\": {\n      \"version\": \"1.5.2\",\n      \"resolved\": \"https://registry.npmjs.org/rollup-pluginutils/-/rollup-pluginutils-1.5.2.tgz\",\n      \"integrity\": \"sha512-SjdWWWO/CUoMpDy8RUbZ/pSpG68YHmhk5ROKNIoi2En9bJ8bTt3IhYi254RWiTclQmL7Awmrq+rZFOhZkJAHmQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"estree-walker\": \"^0.2.1\",\n        \"minimatch\": \"^3.0.2\"\n      }\n    },\n    \"node_modules/rollup-pluginutils/node_modules/brace-expansion\": {\n      \"version\": \"1.1.11\",\n      \"resolved\": \"https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.11.tgz\",\n      \"integrity\": \"sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"balanced-match\": \"^1.0.0\",\n        \"concat-map\": \"0.0.1\"\n      }\n    },\n    \"node_modules/rollup-pluginutils/node_modules/estree-walker\": {\n      \"version\": \"0.2.1\",\n      \"resolved\": \"https://registry.npmjs.org/estree-walker/-/estree-walker-0.2.1.tgz\",\n      \"integrity\": \"sha512-6/I1dwNKk0N9iGOU3ydzAAurz4NPo/ttxZNCqgIVbWFvWyzWBSNonRrJ5CpjDuyBfmM7ENN7WCzUi9aT/UPXXQ==\",\n      \"dev\": true\n    },\n    \"node_modules/rollup-pluginutils/node_modules/minimatch\": {\n      \"version\": \"3.1.2\",\n      \"resolved\": \"https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz\",\n      \"integrity\": \"sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"brace-expansion\": \"^1.1.7\"\n      },\n      \"engines\": {\n        \"node\": \"*\"\n      }\n    },\n    \"node_modules/sass\": {\n      \"version\": \"1.71.1\",\n      \"resolved\": \"https://registry.npmjs.org/sass/-/sass-1.71.1.tgz\",\n      \"integrity\": \"sha512-wovtnV2PxzteLlfNzbgm1tFXPLoZILYAMJtvoXXkD7/+1uP41eKkIt1ypWq5/q2uT94qHjXehEYfmjKOvjL9sg==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"chokidar\": \">=3.0.0 <4.0.0\",\n        \"immutable\": \"^4.0.0\",\n        \"source-map-js\": \">=0.6.2 <2.0.0\"\n      },\n      \"bin\": {\n        \"sass\": \"sass.js\"\n      },\n      \"engines\": {\n        \"node\": \">=14.0.0\"\n      }\n    },\n    \"node_modules/source-map\": {\n      \"version\": \"0.6.1\",\n      \"resolved\": \"https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz\",\n      \"integrity\": \"sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==\",\n      \"dev\": true,\n      \"engines\": {\n        \"node\": \">=0.10.0\"\n      }\n    },\n    \"node_modules/source-map-js\": {\n      \"version\": \"1.0.2\",\n      \"resolved\": \"https://registry.npmjs.org/source-map-js/-/source-map-js-1.0.2.tgz\",\n      \"integrity\": \"sha512-R0XvVJ9WusLiqTCEiGCmICCMplcCkIwwR11mOSD9CR5u+IXYdiseeEuXCVAjS54zqwkLcPNnmU4OeJ6tUrWhDw==\",\n      \"dev\": true,\n      \"engines\": {\n        \"node\": \">=0.10.0\"\n      }\n    },\n    \"node_modules/sourcemap-codec\": {\n      \"version\": \"1.4.8\",\n      \"resolved\": \"https://registry.npmjs.org/sourcemap-codec/-/sourcemap-codec-1.4.8.tgz\",\n      \"integrity\": \"sha512-9NykojV5Uih4lgo5So5dtw+f0JgJX30KCNI8gwhz2J9A15wD0Ml6tjHKwf6fTSa6fAdVBdZeNOs9eJ71qCk8vA==\",\n      \"deprecated\": \"Please use @jridgewell/sourcemap-codec instead\",\n      \"dev\": true\n    },\n    \"node_modules/supports-preserve-symlinks-flag\": {\n      \"version\": \"1.0.0\",\n      \"resolved\": \"https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz\",\n      \"integrity\": \"sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==\",\n      \"dev\": true,\n      \"engines\": {\n        \"node\": \">= 0.4\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/ljharb\"\n      }\n    },\n    \"node_modules/to-regex-range\": {\n      \"version\": \"5.0.1\",\n      \"resolved\": \"https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz\",\n      \"integrity\": \"sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"is-number\": \"^7.0.0\"\n      },\n      \"engines\": {\n        \"node\": \">=8.0\"\n      }\n    },\n    \"node_modules/tslib\": {\n      \"version\": \"2.6.2\",\n      \"resolved\": \"https://registry.npmjs.org/tslib/-/tslib-2.6.2.tgz\",\n      \"integrity\": \"sha512-AEYxH93jGFPn/a2iVAwW87VuUIkR1FVUKB77NwMF7nBTDkDrrT/Hpt/IrCJ0QXhW27jTBDcf5ZY7w6RiqTMw2Q==\",\n      \"dev\": true\n    },\n    \"node_modules/typescript\": {\n      \"version\": \"5.3.3\",\n      \"resolved\": \"https://registry.npmjs.org/typescript/-/typescript-5.3.3.tgz\",\n      \"integrity\": \"sha512-pXWcraxM0uxAS+tN0AG/BF2TyqmHO014Z070UsJ+pFvYuRSq8KH8DmWpnbXe0pEPDHXZV3FcAbJkijJ5oNEnWw==\",\n      \"dev\": true,\n      \"bin\": {\n        \"tsc\": \"bin/tsc\",\n        \"tsserver\": \"bin/tsserver\"\n      },\n      \"engines\": {\n        \"node\": \">=14.17\"\n      }\n    },\n    \"node_modules/uglify-js\": {\n      \"version\": \"3.4.10\",\n      \"resolved\": \"https://registry.npmjs.org/uglify-js/-/uglify-js-3.4.10.tgz\",\n      \"integrity\": \"sha512-Y2VsbPVs0FIshJztycsO2SfPk7/KAF/T72qzv9u5EpQ4kB2hQoHlhNQTsNyy6ul7lQtqJN/AoWeS23OzEiEFxw==\",\n      \"dev\": true,\n      \"dependencies\": {\n        \"commander\": \"~2.19.0\",\n        \"source-map\": \"~0.6.1\"\n      },\n      \"bin\": {\n        \"uglifyjs\": \"bin/uglifyjs\"\n      },\n      \"engines\": {\n        \"node\": \">=0.8.0\"\n      }\n    },\n    \"node_modules/uglify-js/node_modules/commander\": {\n      \"version\": \"2.19.0\",\n      \"resolved\": \"https://registry.npmjs.org/commander/-/commander-2.19.0.tgz\",\n      \"integrity\": \"sha512-6tvAOO+D6OENvRAh524Dh9jcfKTYDQAqvqezbCW82xj5X0pSrcpxtvRKHLG0yBY6SD7PSDrJaj+0AiOcKVd1Xg==\",\n      \"dev\": true\n    },\n    \"node_modules/upper-case\": {\n      \"version\": \"1.1.3\",\n      \"resolved\": \"https://registry.npmjs.org/upper-case/-/upper-case-1.1.3.tgz\",\n      \"integrity\": \"sha512-WRbjgmYzgXkCV7zNVpy5YgrHgbBv126rMALQQMrmzOVC4GM2waQ9x7xtm8VU+1yF2kWyPzI9zbZ48n4vSxwfSA==\",\n      \"dev\": true\n    },\n    \"node_modules/wrappy\": {\n      \"version\": \"1.0.2\",\n      \"resolved\": \"https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz\",\n      \"integrity\": \"sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==\",\n      \"dev\": true\n    }\n  }\n}\n"
        },
        {
          "name": "package.json",
          "type": "blob",
          "size": 1.216796875,
          "content": "{\n  \"name\": \"bilibili-helper\",\n  \"version\": \"1.0.0\",\n  \"description\": \"some userscript\",\n  \"directories\": {\n    \"test\": \"test\"\n  },\n  \"dependencies\": {\n    \"opencc-js\": \"^1.0.5\"\n  },\n  \"devDependencies\": {\n    \"@rollup/plugin-commonjs\": \"^24.0.1\",\n    \"@rollup/plugin-typescript\": \"^6.1.0\",\n    \"@types/greasemonkey\": \"^4.0.2\",\n    \"magic-string\": \"^0.25.7\",\n    \"rollup\": \"^2.32.1\",\n    \"rollup-plugin-html\": \"^0.2.1\",\n    \"rollup-plugin-scss\": \"^3.0.0\",\n    \"sass\": \"^1.69.5\",\n    \"tslib\": \"^2.0.3\",\n    \"typescript\": \"^5.3.3\"\n  },\n  \"scripts\": {\n    \"dev:balh\": \"rollup --config packages/unblock-area-limit/rollup.config.js -w\",\n    \"dev:sms\": \"rollup --config packages/s3_mobile_style/rollup.config.js -w\",\n    \"dev:zmfs\": \"rollup --config packages/zhihu_mobile_style/rollup.config.js -w\",\n    \"lint:watch\": \"tsc --noEmit --watch\",\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/ipcjs/bilibili-helper.git\"\n  },\n  \"keywords\": [\n    \"userscript\",\n    \"bilibili.com\"\n  ],\n  \"author\": \"ipcjs\",\n  \"license\": \"MIT\",\n  \"bugs\": {\n    \"url\": \"https://github.com/ipcjs/bilibili-helper/issues\"\n  },\n  \"homepage\": \"https://github.com/ipcjs/bilibili-helper#readme\"\n}\n"
        },
        {
          "name": "packages",
          "type": "tree",
          "content": null
        },
        {
          "name": "s1_block_miss_zhao.user.js",
          "type": "blob",
          "size": 0.5341796875,
          "content": "// ==UserScript==\n// @name         屏蔽赵小姐\n// @namespace    https://github.com/ipcjs\n// @version      0.0.1\n// @description  屏蔽S1里面的赵小姐条目\n// @author       ipcjs\n// @match        *://bbs.saraba1st.com/2b/*\n// @grant        none\n// ==/UserScript==\n\n'use strict';\ndocument.querySelectorAll('#threadlist th.common .s.xst').forEach(ele => {\n    if (ele.innerText.match('啪啪啪全套多少')) {\n        ele.parentElement.parentElement.parentElement.style.display = 'none';\n    } else {\n\t\tconsole.log(ele.innerText);\n\t}\n});"
        },
        {
          "name": "s1_show_all_post.user.js",
          "type": "blob",
          "size": 10.6162109375,
          "content": "// ==UserScript==\n// @name        列出S1一条帖子的所有内容\n// @namespace   https://github.com/ipcjs\n// @version     1.3.2\n// @description 在帖子的导航栏添加[显示全部]按钮, 列出帖子的所有内容\n// @author       ipcjs\n// @include     *://bbs.saraba1st.com/2b/thread-*-*-*.html\n// @include     *://bbs.saraba1st.com/2b/forum.php*\n// @grant       GM_xmlhttpRequest\n// @grant       GM.xmlHttpRequest\n// @grant       GM.setClipboard\n// @grant       GM_setClipboard\n// @grant       GM_addStyle\n// @grant       GM.addStyle\n// @grant       unsafeWindow\n// @connect     bbs.saraba1st.com\n// @require     https://greasemonkey.github.io/gm4-polyfill/gm4-polyfill.js\n// @run-at      document-start\n// ==/UserScript==\n\n// type, props, children\n// type, props, innerHTML\n// 'text', text\nconst util_ui_element_creator = (type, props, children) => {\n    let elem = null;\n    if (type === \"text\") {\n        return document.createTextNode(props);\n    } else {\n        elem = document.createElement(type);\n    }\n    for (let n in props) {\n        if (n === \"style\") {\n            for (let x in props.style) {\n                elem.style[x] = props.style[x];\n            }\n        } else if (n === \"className\") {\n            elem.className = props[n];\n        } else if (n === \"event\") {\n            for (let x in props.event) {\n                elem.addEventListener(x, props.event[x]);\n            }\n        } else {\n            elem.setAttribute(n, props[n]);\n        }\n    }\n    if (children) {\n        if (typeof children === 'string') {\n            elem.innerHTML = children;\n        } else {\n            for (let i = 0; i < children.length; i++) {\n                if (children[i] != null)\n                    elem.appendChild(children[i]);\n            }\n        }\n    }\n    return elem;\n}\nconst _ = util_ui_element_creator\n\n\nfunction log(...args) {\n    console.log(...args);\n}\n\nclass AjaxException extends Error {\n    constructor(resp, message = \"\") {\n        super(message)\n        this.resp = resp\n    }\n    toString() {\n        return `AjaxException: message=${this.message}, status=${this.resp.status}, statusText=${this.resp.statusText}`\n    }\n}\nfunction ajaxPromise(options) {\n    return new Promise((resolve, reject) => {\n        options.method = options.method || 'GET';\n        options.onload = function (resp) {\n            resolve(resp);\n        }\n        options.onerror = function (resp) {\n            reject(new AjaxException(resp));\n        };\n        options.ontimeout = function (resp) {\n            reject(new AjaxException(resp, 'timeout'));\n        }\n        GM.xmlHttpRequest(options);\n    });\n}\n\nclass Table {\n    constructor() {\n        const $postList = document.getElementById('postlist')\n        $postList.innerHTML = ''\n        this.listSize = 0\n        this.title = ''\n\n        document.getElementById('ct').insertBefore(_('div', {}, [\n            this.$title = _('h1', {}, this.title),\n            this.$table = _('table', { id: 'ssap-table' }),\n            this.$msg = _('div', { id: 'ssap-msg' })\n        ]), $postList)\n    }\n\n    appendPostList(list) {\n        this.append(list, [\n            { name: 'number', func: item => `<a target=\"_blank\" href='forum.php?mod=redirect&goto=findpost&ptid=${item.ptid}&pid=${item.pid}'>${item.number}</a>` },\n            'username',\n            'dateline',\n            'message'\n        ])\n    }\n    // append([{ name: 'ipcjs', age: 17 }, { name: 'fuck', age: 1 }], ['name', 'age']);\n    append(list, colNames) {\n        this.setListSize(this.listSize + list.length)\n        list.forEach(item => {\n            let $tr = _('tr')\n            colNames.forEach(it => {\n                let name = typeof it === 'string' ? it : it.name\n                let func = typeof it === 'string' ? item => item[name] : it.func\n                $tr.appendChild(_('td', { className: `ssap-${name}` }, func(item)))\n            })\n            this.$table.appendChild($tr)\n        })\n    }\n\n    setListSize(listSize) {\n        this.listSize = listSize\n        this._refreshTitle()\n    }\n\n    setTitle(title) {\n        this.title = title\n        this._refreshTitle()\n    }\n\n    showMsg(msg) {\n        this.$msg.innerText = msg\n    }\n\n    _refreshTitle() {\n        this.$title.innerHTML = `${this.title || 'Title'} ${this.listSize}`\n    }\n\n    _clearTable() {\n        this.listSize = 0\n        this.$table.innerHTML = ''\n    }\n}\n\n////////////////////// main ///////////////////////////////\n\nlet group, filter;\nif (!(group = /thread-(\\d+)-(\\d+)-(\\d+)/.exec(location.pathname))\n    && !(group = /tid=(\\d+)/.exec(location.search))) {\n    return; // 不匹配则返回\n}\n\nconst POST_PAGE_MAX_COUNT = 1000; // 一次最多拉取多少条\nconst CONCURRENT_COUNT_MAX = 10; // 一次最多拉取多少页\nconst TID = group[1];\nlet table;\n\nswitch (TID) {\n    case '1494926': filter = f_1494926; break;\n    default: filter = f_all; break;\n}\n\nGM.addStyle(`\n    #ssap-table tr {\n\t    border-top: 1px solid #888; \n    }\n    #ssap-msg {\n        text-align: center;\n    }\n    #load-all-post {\n        margin: 0px 10px;\n    }\n    #ssap-table {\n        width: 100%;\n        table-layout: fixed;\n    }\n    #ssap-table .ssap-number {\n        width: 2%;\n    }\n    #ssap-table .ssap-username {\n        width: 5%;\n    }\n    \n    #ssap-table .ssap-dateline {\n        width: 5%;\n    }\n    \n    #ssap-table .ssap-message {\n        width: 88%;\n    }\n    #ssap-table img {\n        max-width: 88%;\n    }\n    `)\n\nfunction loadAllPost() {\n    if (loadAllPost.loading) {\n        return\n    }\n    loadAllPost.loading = true\n    if (!table) {\n        table = new Table()\n    }\n    const load = async function () {\n        let page = 1;\n        let concurrentCount = 1;\n        while (true) {\n            table.showMsg(`加载第${page}->${page + concurrentCount - 1}页中...`)\n            const results = await Promise.all(Array.from({ length: concurrentCount }, (v, index) => retry(async (i) => {\n                const resp = await ajaxPromise({\n                    url: `https://bbs.saraba1st.com/2b/api/mobile/index.php?module=viewthread&ppp=${POST_PAGE_MAX_COUNT}&tid=${TID}&page=${page + index}&version=1`,\n                    timeout: 1000 * 15 * (i + 1),\n                })\n                return [index, resp]\n            }, 3)))\n\n            let json\n            for (const [index, resp] of results) {\n                const currentPage = page + index\n                json = JSON.parse(resp.responseText)\n                if (currentPage === 1) {\n                    table.setTitle(json.Variables.thread.subject)\n                }\n                table.appendPostList(json.Variables.postlist.filter(filter))\n                log('>>', currentPage, table.listSize, json.Variables.thread);\n            }\n            // 总post条数为replies + 1\n            const postCount = +json.Variables.thread.replies + 1\n            if (table.listSize < postCount) {\n                page += concurrentCount;\n                concurrentCount = Math.min(concurrentCount + 3, Math.ceil((postCount - table.listSize) / POST_PAGE_MAX_COUNT), CONCURRENT_COUNT_MAX)\n            } else {\n                break;\n            }\n        }\n    }\n    load()\n        .then(r => {\n            table.showMsg('')\n        })\n        .catch((e) => {\n            table.showMsg(e.toString())\n            console.error(e)\n        })\n        .finally(() => {\n            loadAllPost.loading = false\n        })\n}\n\nasync function retry(block, count = 3, timeMs = 1000) {\n    let error\n    for (let i = 0; i < count; i++) {\n        try {\n            return await block(i)\n        } catch (e) {\n            error = e\n            await delay(timeMs)\n            log(`retry: i=${i}, e=${e.toString()}`)\n        }\n    }\n    throw error\n}\n\nfunction delay(timeMs) {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            resolve(\"continue\")\n        }, timeMs);\n    })\n}\n\nfunction f_1494926(item) {\n    if (item.username === 'ipcjs') {\n        return true;\n    } else if (['SUNSUN', '蒹葭公子', '木水风铃'].includes(item.username) && item.message.includes('ipcjs 发表于')) {\n        return true;\n    }\n    return false;\n}\nfunction f_all() {\n    return true;\n}\n\nfunction feature_show_all() {\n    document.querySelector('#pt > div.z').appendChild(_('a', { id: 'load-all-post', href: 'javascript:;', event: { click: () => loadAllPost() } }, '[显示全部]'));\n}\n\nfunction feature_voters() {\n    const SEPARATOR = '\\t'\n\n    async function copyVoters() {\n        const $button = this\n        const $content = document.getElementById('fwin_content_viewvote')\n        /** @type {HTMLSelectElement}  */\n        const $select = $content.querySelector('select.ps')\n        let result = '# 投票结果'\n        for (const [index, option] of Array.from($select.options).entries()) {\n            $button.textContent = `[复制中(${index}/${$select.options.length})...]`\n            result += `\\n\\n## ${option.text}`\n            log(option.value, option.text)\n            let page = 0\n            let $next\n            do {\n                page++\n                const resp = await ajaxPromise({ url: `https://bbs.saraba1st.com/2b/forum.php?mod=misc&action=viewvote&tid=${TID}&polloptionid=${option.value}&infloat=yes&handlekey=viewvote&page=${page}&inajax=1&ajaxtarget=fwin_content_viewvote` })\n                const $xml = new DOMParser().parseFromString(resp.responseXML.documentElement.firstChild.textContent, 'text/html')\n                const $voters = Array.from($xml.querySelectorAll('li > p > a'))\n\n                result += page > 1 ? SEPARATOR : '\\n\\n'\n                result += $voters.map(it => it.textContent).join(SEPARATOR)\n\n                $next = $xml.querySelector('.pg > .nxt')\n            } while ($next)\n\n        }\n        log(result)\n        GM.setClipboard(result)\n        $button.textContent = '[复制完成!]'\n    }\n    new MutationObserver((mutations, observer) => {\n        for (let m of mutations) {\n            for (let node of m.addedNodes) {\n                if (node.nodeType === Node.ELEMENT_NODE) {\n                    /** @type {HTMLDivElement}  */\n                    const $title = node.id === 'fctrl_viewvote' ? node : node.querySelector('#fctrl_viewvote')\n                    let $button = node.querySelector('#ssap_copy_voters')\n                    if ($title && !$button) {\n                        log($title)\n                        $button = _('a', { id: 'ssap_copy_voters', href: 'javascript:;', event: { click: copyVoters } }, '[复制结果]')\n                        $title.insertBefore($button, $title.lastChild)\n                    }\n                }\n            }\n        }\n    }).observe(document.getElementById('append_parent'), {\n        childList: true,\n        subtree: true,\n    })\n}\n\nunsafeWindow.addEventListener('DOMContentLoaded', (event) => {\n    feature_show_all()\n    feature_voters()\n})"
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "tsconfig.json",
          "type": "blob",
          "size": 0.2958984375,
          "content": "{\n    \"compilerOptions\": {\n        \"strict\": true,\n        \"target\": \"ES2020\",\n        \"allowJs\": true,\n        \"lib\": [\n            \"ES2020\",\n            \"DOM\",\n        ],\n    },\n    \"include\": [\n        \"packages/**/*.ts\",\n        \"types/**/*.ts\",\n        \"scripts/vuejs_switch_lang.user.js\"\n    ],\n}\n"
        },
        {
          "name": "types",
          "type": "tree",
          "content": null
        },
        {
          "name": "zhihu_mobile_fuck.user.js",
          "type": "blob",
          "size": 5.8037109375,
          "content": "// ==UserScript==\n// @name         Fuck ZhiHu Mobile\n// @namespace    https://github.com/ipcjs\n// @version      2.0.2\n// @description  日他娘的逼乎手机网页版; 针对手机版进行修改，把所有的“App 内查看”按钮屏蔽了;\n// @author       ipcjs\n// @include      https://www.zhihu.com/*\n// @include      https://zhuanlan.zhihu.com/*\n// @grant        GM_addStyle\n// @require      https://greasyfork.org/scripts/373283-ipcjs-lib-js/code/ipcjslibjs.js?version=647820\n// ==/UserScript==\n\nipcjs.installInto(({ log, html, $ }) => {\n    log = GM_info.script.name.endsWith('.dev') ? log : () => { }\n    GM_addStyle(`\n    .DownloadGuide {\n        display: none;\n    }\n    .OpenInAppButton {\n        display: none;\n    }\n    .MobileAppHeader-downloadLink {\n        display: none;\n    }\n    /*\n    button.ContentItem-more {\n        position: absolute;\n    }\n    */\n    `)\n\n    installToContent(document)\n\n    new MutationObserver((mutations, observer) => {\n        // log(mutations)\n        for (let m of mutations) {\n            const $target = $(m.target)\n            for (let node of m.addedNodes) {\n                if (node.nodeType === Node.ELEMENT_NODE) {\n                    if ($(node).hasClass('RichContent-inner')\n                        && $target.hasClass('RichContent') && $target.hasClass('is-collapsed')) {\n                        log('contentInner added, need reinstall', node)\n                        installToContent($target.ele.parentElement)\n                    } else {\n                        installToContent(node)\n                    }\n                }\n            }\n        }\n    }).observe(document.body, {\n        childList: true,\n        subtree: true\n    })\n\n\n    function installToContent(node) {\n        if (!node.querySelectorAll) {\n            return\n        }\n        const contentItems = node.querySelectorAll('.RichContent')\n        const collapseButtonHtml = '<button data-zop-retract-question=\"true\" type=\"button\" class=\"Button ContentItem-action ContentItem-rightButton Button--plain\"><span class=\"RichContent-collapsedText\">收起</span><span style=\"display: inline-flex; align-items: center;\">​<svg class=\"Zi Zi--ArrowDown ContentItem-arrowIcon is-active\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z\" fill-rule=\"evenodd\"></path></svg></span></button>'\n        if (contentItems.length > 0) {\n            log('install', contentItems)\n        }\n        contentItems.forEach((content, index) => {\n            const contentInner = content.querySelector('.RichContent-inner')\n            const actions = content.querySelector('.ContentItem-actions')\n            const expandButtonOuter = content.querySelector(':scope > button')\n            const expandButtonInner = contentInner.querySelector(':scope > button')\n\n            const $content = $(content)\n\n            let diff = {\n                expandButton: undefined,\n                expandButtonText: undefined,\n                onClick: undefined,\n                onEach: undefined,\n            }\n            if (expandButtonOuter) {\n                diff = {\n                    expandButton: expandButtonOuter,\n                    expandButtonText: '展开阅读全文',\n                    onClick: function toggleContent() {\n                        let collapseButton = actions.querySelector('button.Button.ContentItem-rightButton')\n                        if ($content.hasClass('is-collapsed')) {\n                            $content.removeClass('is-collapsed')\n                            contentInner.style.maxHeight = ''\n                            diff.expandButton.style.display = 'none'\n                            collapseButton = html(collapseButtonHtml)[0]\n                            collapseButton.addEventListener('click', toggleContent)\n                            actions.appendChild(collapseButton)\n                        } else {\n                            $content.addClass('is-collapsed')\n                            contentInner.style.maxHeight = '400px'\n                            diff.expandButton.style.display = 'inline'\n                            actions.removeChild(collapseButton)\n                        }\n                    },\n                    onEach: () => { }\n                }\n            } else if (expandButtonInner) {\n                const contentCover = content.querySelector('.RichContent-cover')\n                diff = {\n                    expandButton: expandButtonInner,\n                    expandButtonText: contentCover ? '展开' : '跳转',\n                    onClick: function gotoDetail() {\n                        if (contentCover) {\n                            contentCover.click()\n                        } else {\n                            const urlMeta = content.parentElement.querySelector(':scope > meta[itemprop=url]')\n                            location.href = urlMeta.content\n                        }\n                    },\n                    onEach: function () {\n                        $content.removeClass('is-collapsed')\n                    }\n                }\n            } else {\n                log('expandButton no found')\n                return\n            }\n\n\n            diff.onEach()\n            if (diff.expandButton.innerText.startsWith('App 内查看')) {\n                diff.expandButton.innerText = diff.expandButtonText\n                diff.expandButton.addEventListener('click', e => {\n                    e.stopPropagation()\n                    diff.onClick()\n                }, true)\n            } else {\n                log('skip', content)\n                return\n            }\n            contentInner.addEventListener('click', e => {\n                e.stopPropagation()\n                diff.onClick()\n            }, true)\n        })\n    }\n})\n"
        }
      ]
    }
  ]
}