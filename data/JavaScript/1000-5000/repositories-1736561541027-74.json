{
  "metadata": {
    "timestamp": 1736561541027,
    "page": 74,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjgw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "segmentio/analytics.js",
      "stars": 4766,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.052734375,
          "content": "node_modules/\ntest/server/pid.txt\ncomponents\nbuild.js\n"
        },
        {
          "name": ".travis.yml",
          "type": "blob",
          "size": 0.9306640625,
          "content": "language: node_js\nscript: make test-sauce\nnode_js:\n- '0.12'\nenv:\n  global:\n  - secure: LoNu6uwsubuGa63PgPfXDlNSOdJ7PdPlk3hgadnAdYpskrDtg4op7uNREpf6ZYbJEKHmCMfgN7bqPEakw3Lnfw0f+HAteJmRdc2TJ6Ntq+ZF8H7hDdD7vWx6PUOK2VuDyNNRkWj1Imxm4ZF+TCgItdNFVjn8RifwVqsXIgCZPLs=\n  - secure: CkzgZbbMfR2LgKvigLs8kSgXQYZw8w1f9NrFoppTTEbJD13EiVj7FWF9EH4PFvINEeuFZb3f0lvwCq2PGpMtl5ckyfXXoDdNNUTkJbL5D6wm9pkKu09G74LZ20vT/U5HIs+o7/E2ARRrhH/nTY2rJysuDlcjkZ3lkDm5CIG888k=\n  - secure: ixFsGpkqQty4f8kTOZFq+BF3nmkMCHqQKCaXdgtOEADJXpRoqWtGnAgM1EXF0fDsmf825E+gxwJbBk7lBgCykOnToVmXsoNoPyLA8c/rjWVwFBwFcrRidaR7qbAbWQr1qGxEWwveP5ijj8neEXs9cslwv1y31WCBjXaz/ZHvEnI=\n  - secure: F5GN7Ph+7qcM/QPekFuaOZzzRA4+NpfdmVxdQPJZuEy4GTAdM3USzPBuYebxji6DQjplGXM0szUIZPuwWJowHVzUvbY4OuwYHGbIJm0Sc9ZR78DFCPIMIZ577rliqybvpKWjl9eXGacre8sa5UzQdL7z0CI8xDzdrmHnr23hkeY=\n  matrix:\n  - BROWSER=chrome\n  - BROWSER=firefox\n  - BROWSER=safari\n  - BROWSER=ie:11\n  - BROWSER=ie:10\n  - BROWSER=ie:9\n  - BROWSER=ie:8\n"
        },
        {
          "name": "History.md",
          "type": "blob",
          "size": 39.25390625,
          "content": "\n2.11.0 / 2015-08-17\n==================\n\n  * Add facebook-custom-audiences integration\n\n\n2.10.2 / 2015-08-17\n==================\n\n  * fix analytics.js singleton export\n\n2.10.0 / 2015-06-30\n===================\n\n * Move core library out to segmentio/analytics.js-core\n\n   This repository is now purely a build repository for Analytics.js. For analytics.js's core library, see [segmentio/analytics.js-core](https://github.com/segmentio/analytics.js-core); for integrations, see the [segment-integrations](https://github.com/segment-integrations) organization.\n\n2.9.1 / 2015-06-11\n==================\n\n * Remove deprecated analytics.js-integrations dependency\n * Update build\n\n2.9.0 / 2015-06-11\n==================\n\n * Pull integrations from individual repositories, located in the [segment-integrations GitHub organization](https://github.com/segment-integrations/). This change should be unnoticeable from a user perspective, but has huge benefits in that excluding integrations from custom builds is now much, much easier, and one integration's test failures will no longer prevent another integration's tests from running.\n\n  A noteworthy part of this change: All integrations are now pulled into Analytics.js in `component.json`, using an explicit version number.\nIn the future this part of the build process is very likely to change to be more of an automatic process, but for now--baby steps.\n\n2.8.25 / 2015-06-03\n===================\n\n * Update build (for real this time)\n\n2.8.24 / 2015-06-03\n===================\n\n * Update build\n\n2.8.23 / 2015-05-27\n===================\n\n * Update component/url dependency to 0.2.0\n\n2.8.22 / 2015-05-22\n===================\n\n * Update build\n\n2.8.21 / 2015-05-22\n===================\n\n * Update build\n\n2.8.20 / 2015-05-22\n===================\n\n * Update build\n * Clean up Makefile\n\n2.8.19 / 2015-05-16\n===================\n\n * Pin all dependencies\n * Bump Node.js engine dependency to 0.12\n\n2.8.18 / 2015-05-14\n===================\n\n * Bump duo-test dependency\n\n2.8.17 / 2015-05-02\n===================\n\n * Build updated\n\n2.8.16 / 2015-05-01\n===================\n\n  * Build updated\n\n2.8.15 / 2015-04-29\n===================\n\n  * Build updated\n\n2.8.14 / 2015-04-29\n===================\n\n  * Build updated\n\n2.8.13 / 2015-04-28\n===================\n\n  * Build updated\n\n2.8.12 / 2015-04-23\n===================\n\n  * deps: bump top-domain for test cookie deletion fix\n  * cookie: bump top-domain to v2 to catch all top domains\n\n\n2.8.10 / 2015-04-20\n===================\n\n  * Build updated\n\n2.8.9 / 2015-04-16\n==================\n  * Fix conflicts\n\n2.8.8 / 2015-04-16\n==================\n\n  * Updating analytics.js-integrations\n  * Updating analytics.js-integrations\n\n2.8.7 / 2015-04-09\n==================\n\n  * Build updated\n  * adding pre-release hook (and make targets for hooks)\n\n2.8.6 / 2015-04-09\n==================\n\n  * Build updated\n\n2.8.5 / 2015-04-09\n==================\n\n  * Build updated\n\n2.8.4 / 2015-04-02\n==================\n\n  * Build updated\n\n2.8.3 / 2015-03-31\n==================\n\n  * Build updated\n\n2.8.2 / 2015-03-24\n==================\n\n  * Build updated\n\n2.8.1 / 2015-03-20\n==================\n\n  * Build updated\n  * adding a build phony target\n\n2.8.0 / 2015-03-07\n==================\n\n  * group: fix typo\n  * entity: add debug warning for memory store\n  * test: add fallback to memory tests\n  * entity: fallback to memory\n  * add memory store\n  * entity: fallback to localstorage when cookies are disabled\n  * tests: add localstorage fallback tests\n  * dist: rebuild\n\n2.7.1 / 2015-03-05\n==================\n\n  * Updating analytics.js-integrations\n\n2.7.0 / 2015-03-05\n==================\n\n  * Attach page metadata to all calls as `context.page`\n\n2.6.13 / 2015-03-04\n===================\n\n  * normalize: remove trailing comma\n  * dist: rebuild to make tests pass\n  * normalize: remove redundant keys from toplevel\n\n2.6.12 / 2015-03-03\n===================\n\n  * Release 2.6.11\n  * normalize: keep traits in options\n\n2.6.11 / 2015-02-28\n==================\n\n  * normalize: keep traits in options\n\n2.6.10 / 2015-02-25\n===================\n\n  * Updating analytics.js-integrations\n\n2.6.9 / 2015-02-25\n==================\n\n  * Updating analytics.js-integrations\n\n2.6.8 / 2015-02-25\n==================\n\n  * Updating analytics.js-integrations\n\n2.6.7 / 2015-02-24\n==================\n\n  * Updating analytics.js-integrations\n  * removed duplicate .on('initialize') from analytics constructor\n\n2.6.6 / 2015-02-23\n==================\n\n  * update integrations\n\n\n2.6.5 / 2015-02-19\n==================\n\n  * analytics: less verbose logging\n  * analytics.js: cleanup plan\n  * analytics.js: add debugs\n  * normalize: dont clobber and add tests\n  * analytics: use normalize removing message()\n  * add normalize.js\n\n\n2.6.4 / 2015-02-19\n==================\n\n  * Updating analytics.js-integrations\n\n2.6.3 / 2015-02-17\n==================\n\n  * plan: .archived -> .enabled\n\n2.6.1 / 2015-02-12\n==================\n\n  * user: fix old anonymous id\n\n\n2.6.0 / 2015-02-09\n==================\n\n  * .track(): ignore archived events\n  * ._options(): preserve options\n\n2.5.17 / 2015-02-04\n===================\n\n  * Updating analytics.js-integrations\n\n2.5.16 / 2015-02-04\n===================\n\n  * Updating analytics.js-integrations\n\n2.5.15 / 2015-02-03\n===================\n\n  * Updating analytics.js-integrations\n\n2.5.14 / 2015-02-03\n===================\n\n  * Updating analytics.js-integrations\n\n2.5.13 / 2015-01-29\n===================\n\n  * Updating analytics.js-integrations\n\n2.5.12 / 2015-01-23\n===================\n\n  * Updating analytics.js-integrations\n\n2.5.10 / 2015-01-22\n===================\n\n  * Updating analytics.js-integrations\n\n2.5.9 / 2015-01-22\n==================\n\n  * Updating analytics.js-integrations\n\n2.5.8 / 2015-01-21\n==================\n\n  * Updating analytics.js-integrations\n\n2.5.7 / 2015-01-15\n==================\n\n  * Updating analytics.js-integrations\n\n2.5.6 / 2015-01-15\n==================\n\n  * Updating analytics.js-integrations\n\n2.5.5 / 2015-01-14\n==================\n\n  * Updating analytics.js-integrations\n\n2.5.4 / 2015-01-14\n==================\n\n  * Updating analytics.js-integrations\n\n2.5.3 / 2015-01-08\n==================\n\n  * Fix release\n\n2.5.2 / 2015-01-08\n==================\n\n  * Updating analytics.js-integrations\n\n2.5.0 / 2015-01-01\n==================\n\n  * update integrations\n  * analytics: add setAnonymousId\n\n2.4.21 / 2014-12-11\n===================\n\n  * Updating analytics.js-integrations\n  * tests: skip svg tests on legacy browsers\n  * travis: node 0.11.13\n  * trackLink: support svg anchor tags\n  * add cross browser tests\n\n2.4.18 / 2014-11-22\n===================\n\n  * Updating analytics.js-integrations\n\n2.4.16 / 2014-11-13\n===================\n\n  * Updating analytics.js-integrations\n\n2.4.15 / 2014-11-11\n==================\n\n  * clean: --force to ignore errs\n  * Updating analytics.js-integrations\n\n2.4.14 / 2014-11-06\n===================\n\n  * Updating analytics.js-integrations\n\n2.4.10 / 2014-10-27\n==================\n\n * support umd\n\n2.4.9 / 2014-10-25\n==================\n\n  * Updating analytics.js-integrations\n\n2.4.7 / 2014-10-21\n==================\n\n  * Updating analytics.js integrations to 1.3.2\n\n2.4.6 / 2014-10-17\n==================\n\n * upgrade integrations to 2.3.1\n\n2.4.5 / 2014-10-17\n==================\n\n * upgrade integrations to 2.3\n\n2.4.4 / 2014-10-16\n==================\n\n * upgrade integrations.\n\n2.4.3 / 2014-10-15\n==================\n\n  * Merge pull request #407 from segmentio/prevent/duplicates\n  * fix: prevent duplicates when cookie cannot be set\n\n2.4.2 / 2014-10-15\n==================\n\n  * Merge pull request #406 from segmentio/fix/user-id-reset\n  * fix: prevent anonymousId from changing when user id is reset\n\n2.4.1 / 2014-10-14\n==================\n\n  * Merge pull request #405 from segmentio/fix/old-anonymous-id\n  * fix: old anonymousId is not stringified, use raw cookie\n  * Release 2.4.0\n\n2.4.0 / 2014-10-14\n==================\n\n  * anonymousId: re-generate when user id changes\n  * Merge pull request #401 from segmentio/anonymous-id\n  * analytics.reset(): use .logout() to preserve options\n  * logout: remove anonymous id\n  * parseQuery: add ajs_aid\n  * analytics add anonymousId support\n  * add User#anonymousId\n  * Release 2.3.33\n\n2.3.33 / 2014-10-14\n===================\n\n  * upgrade integrations\n\n2.3.33 / 2014-10-10\n==================\n\n  * upgrade integrations\n\n2.3.32 / 2014-10-09\n===================\n\n  * upgrade integrations\n\n2.3.31 / 2014-10-08\n===================\n\n  * history.md: ocd\n\n2.3.30 / 2014-10-07\n===================\n\n  * upgrade integrations\n\n2.3.29 / 2014-10-06\n===================\n\n  * add reset(), closes #378\n\n2.3.28 / 2014-10-01\n===================\n\n  * upgrade integrations\n\n\n2.3.27 / 2014-09-26\n===================\n\n  * upgrade integrations\n\n\n2.3.26 / 2014-09-26\n===================\n\n  * upgrade integrations\n\n\n2.3.25 / 2014-09-22\n===================\n\n  * add node 0.11 notice for now\n\n2.3.24 / 2014-09-17\n===================\n\n  * upgrade integrations\n\n\n2.3.23 / 2014-09-08\n===================\n\n  * upgrade integrations\n\n\n2.3.22 / 2014-09-05\n===================\n\n  * upgrade integrations\n\n\n2.3.21 / 2014-09-04\n===================\n\n  * ocd\n\n2.3.20 / 2014-09-04\n===================\n\n  * upgrade integrations\n\n\n2.3.19 / 2014-09-02\n===================\n\n  * upgrade integrations\n\n\n2.3.18 / 2014-09-02\n===================\n\n  * upgrade integrations\n\n\n2.3.17 / 2014-08-28\n===================\n\n  * deps: duo 0.7\n  * deps: duo 0.7\n  * Merge pull request #397 from segmentio/add/anonymous-id\n  * add checking for anonymous id in options\n\n2.3.15 / 2014-08-22\n==================\n\n * google adwords: directly pass remarketing option\n\n2.3.14 / 2014-08-22\n==================\n\n * deps: upgrade to duo-test@0.3.x\n * google adwords: switch to async api\n\n2.3.13 / 2014-08-20\n==================\n\n * localstorage fallback: add implementation\n * localstorage fallback: add tests\n * rebuild\n * deps: upgrade to duo 0.7\n * make: dont clean my npm cache :P\n\n2.3.12 / 2014-08-07\n==================\n\n * remove userfox\n\n2.3.11 / 2014-08-07\n==================\n\n * merge a few more fixes (keen.io)\n\n2.3.10 / 2014-07-25\n==================\n\n * Make lots of analytics.js-integrations fixes\n\n2.3.7 / 2014-07-21\n==================\n\n * Merge pull request #390 from segmentio/test/element-error\n * throw helpful error when passing string to `trackLink`, closes #389\n * Merge pull request #386 from segmentio/context\n * add integrations select test\n * add backwards compat options object support\n\n2.3.6 / 2014-07-16\n==================\n\n  * upgrade integrations\n\n\n2.3.5 / 2014-07-16\n==================\n\n  * upgrade integrations\n\n\n2.3.4 / 2014-07-16\n==================\n\n  * upgrade integrations\n\n\n2.3.3 / 2014-07-16\n==================\n\n * fix: History.md\n\n2.3.2 / 2014-07-13\n==================\n\n* rebuild\n\n2.3.1 / 2014-07-13\n==================\n\n * deps: remove duo-package\n * make: test-saucelabs -> test-sauce\n\n2.3.0 / 2014-07-11\n==================\n\n * use analytics.js-integrations 1.2.0 which removes plugin.Integration\n * set .analytics on integration instance\n\n2.2.5 / 2014-07-08\n==================\n\n * loosen deps\n\n2.2.4 / 2014-07-08\n===================\n\n  * rebuild\n\n2.2.3 / 2014-07-07\n===================\n\n  * rebuild\n\n2.2.2 / 2014-06-24\n==================\n\n* fix fxn\n\n2.2.1 / 2014-06-24\n==================\n\n* fix typo\n\n2.2.0 / 2014-06-24\n==================\n\n* bump analytics.js-integrations with bing/bronto fixes\n\n2.1.0 / 2014-06-23\n==================\n\n * add `.add` for test-friendliness\n * make-test: kill the server when done testing\n * tests: add reporter option\n * update readme\n * make-test: make sure we use the correct phantomjs(1)\n\n2.0.1 / 2014-06-13\n==================\n\n * bumping store.js dep to 2.0.0\n * update readme\n\n2.0.0 / 2014-06-12\n==================\n\n * converting to use duo\n\n1.5.12 / 2014-06-11\n==================\n\n* bump analytics.js-integrations to 0.9.9\n\n1.5.11 / 2014-06-05\n==================\n\n* bump analytics.js-integrations to 0.9.8\n\n1.5.10 / 2014-06-04\n==================\n\n * bump analytics.js-integrations to 0.9.7\n\n1.5.9 / 2014-06-04\n==================\n\n * bump analytics.js-integrations to 0.9.6\n\n1.5.8 / 2014-06-04\n==================\n\n * bump analytics.js-integrations to 0.9.5\n\n1.5.6 / 2014-06-02\n==================\n\n * bump analytics.js-integrations to 0.9.3\n\n1.5.5 / 2014-06-02\n==================\n\n * bump analytics.js-integrations to 0.9.2\n\n1.5.4 / 2014-05-30\n==================\n\n * upgrade integrations to 0.9.1\n\n1.5.3 / 2014-05-29\n==================\n\n * upgrade integrations to 0.9.0\n\n1.5.1 / 2014-05-20\n==================\n\n * update analytics.js-integrations dep for reverting KISSmetrics fixes\n\n1.5.0 / 2014-05-19\n==================\n\n * updating analytics.js-integrations to 0.8.0 for KISSmetrics fixes\n\n1.4.0 / 2014-05-17\n==================\n\n * upgrade integrations to 0.7.0\n * upgrade facade to 0.3.10\n\n1.3.31 / 2014-05-17\n==================\n\n * handle dev envs correctly, closes #359\n\n1.3.30 / 2014-05-07\n==================\n\n * upgrade integrations to 0.6.1 for google analytics custom dimensions and metrics\n\n1.3.28 / 2014-04-29\n==================\n\n * upgrade integrations to 0.5.10 for navilytics fix and mixpanel fix\n * component: upgrade to 0.19.6 and add githubusercontent to remotes\n\n1.3.26 / 2014-04-17\n==================\n\n * upgrade integrations to 0.5.8\n\n1.3.25 / 2014-04-16\n==================\n\n * upgrade integrations to 0.5.6\n\n1.3.24 / 2014-04-15\n==================\n\n * move analytics.js-integration to dev deps\n\n1.3.23 / 2014-04-14\n==================\n\n * upgrade integrations to 0.5.5\n * update querystring to 1.3.0\n\n1.3.22 / 2014-04-11\n==================\n\n * upgrade integrations to 0.5.4\n\n1.3.21 / 2014-04-10\n==================\n\n * add \"invoke\" event\n\n1.3.20 / 2014-04-07\n==================\n\n * upgrade integrations to 0.5.3\n\n1.3.19 / 2014-04-05\n==================\n\n * upgrade querystring to 1.2.0\n\n1.3.18 / 2014-04-05\n==================\n\n * upgrade integrations to 0.5.1\n\n1.3.17 / 2014-04-04\n==================\n\n * upgrade integrations to 0.5.0\n * fix: add .search to .url when url is pulled from canonical tag\n * tests: upgrade gravy to 0.2.0\n\n1.3.16 / 2014-04-01\n==================\n\n * upgrade integrations to 0.4.14\n\n1.3.15 / 2014-03-26\n==================\n\n * upgrade integrations to 0.4.13\n\n1.3.14 / 2014-03-26\n==================\n\n * upgrade integrations to 0.4.12\n\n1.3.13 / 2014-03-25\n==================\n\n * upgrade integrations to 0.4.11\n\n1.3.12 / 2014-03-19\n==================\n\n * upgrade integrations to 0.4.10\n\n1.3.11 / 2014-03-14\n===================\n\n * upgrade integrations to 0.4.9\n\n1.3.10 / 2014-03-14\n===================\n\n * upgrade integrations to 0.4.8\n\n1.3.9 / 2014-03-14\n==================\n\n * upgrade integrations to 0.4.7\n\n1.3.8 / 2014-03-13\n==================\n\n * upgrade integrations to 0.4.6\n\n1.3.7 / 2014-03-06\n==================\n\n * upgrade integrations to 0.4.5\n * upgrade facade to 0.2.11\n\n1.3.6 / 2014-03-05\n==================\n\n * upgrade integrations to 0.4.4\n\n1.3.4 / 2014-02-26\n==================\n\n * update integrations to 0.4.2\n\n1.3.3 / 2014-02-18\n==================\n\n * upgrade analytics.js-integrations to 0.4.1\n * dont reset ids and traits\n\n1.3.2 / 2014-02-07\n==================\n\n * upgrade analytics.js-integrations to 0.4.0\n * upgrade analytics.js-integration to 0.1.7\n * upgrade facade to 0.2.7\n * fix page url default to check canonical and remove hash\n\n1.3.1 / 2014-01-30\n==================\n\n * upgrade isodate-traverse to `0.3.0`\n * upgrade facade to `0.2.4`\n * upgrade analytics.js-integrations to `0.3.10`\n\n1.3.0 / 2014-01-23\n==================\n\n * update analytics.js-integrations to 0.3.9\n\n1.2.9 / 2014-01-18\n==================\n\n* update `analytics.js-integrations` to `0.3.8`\n* expose `require()`\n\n1.2.8 / 2014-01-15\n==================\n\n* update `analytics.js-integrations` to `0.3.7`\n* upgrade `facade` to `0.2.3`\n\n1.2.7 / 2014-01-10\n==================\n\n * update `analytics.js-integrations` to `0.3.6`\n\n1.2.6 - January 3, 2014\n-----------------------\n* upgrade `component(1)` for json support\n\n1.2.5 - January 3, 2014\n-----------------------\n* upgrade `analytics.js-integrations` to `0.3.5`\n* upgrade `facade` to `0.2.1`\n\n1.2.4 - January 2, 2014\n-------------------------\n* upgrade `analytics.js-integrations` to `0.3.4`\n\n1.2.3 - December 18, 2013\n-------------------------\n* fix `facade` dependency\n\n1.2.2 - December 18, 2013\n-------------------------\n* upgrade `analytics.js-integrations` to `0.3.2`\n\n1.2.1 - December 16, 2013\n-------------------------\n* add #push, fixes #253\n\n1.2.0 - December 13, 2013\n-------------------------\n* add [`facade`](https://github.com/segmentio/facade)\n\n1.1.9 - December 11, 2013\n-------------------------\n* upgrade `analytics.js-integrations` to `0.2.16`\n* add `search` to page property defaults\n\n1.1.8 - December 11, 2013\n------------------------\n* upgrade `analytics.js-integrations` to `0.2.15`\n* add [WebEngage](http://webengage.com)\n* heap: fallback to user id as handle\n\n1.1.7 - December 4, 2013\n------------------------\n* upgrade `analytics.js-integrations` to `0.2.13`\n\n1.1.6 - December 2, 2013\n------------------------\n* update `analytics.js-integrations` to `0.2.12`\n* add `entity`\n* change `user` to inherit from `entity`\n* change `group` to inherit from `entity`\n\n1.1.5 - November 26, 2013\n-------------------------\n* update `analytics.js-integration` to `0.1.5`\n* update `analytics.js-integrations` to `0.2.11`\n\n1.1.4 - November 25, 2013\n-------------------------\n* fix `page` method properties overload\n\n1.1.3 - November 21, 2013\n-------------------------\n* update `analytics.js-integrations` to `0.2.10`\n\n1.1.2 - November 21, 2013\n-------------------------\n* update `analytics.js-integrations` to `0.2.9`\n\n1.1.1 - November 20, 2013\n-------------------------\n* update `analytics.js-integrations` to `0.2.8`\n\n1.1.0 - November 20, 2013\n-------------------------\n* add `name` and `category` defaults to `page` method calls\n* update `analytics.js-integrations` to `0.2.7`\n\n1.0.9 - November 15, 2013\n-------------------------\n* update `analytics.js-integrations` to `0.2.6`\n* update dependencies\n\n1.0.8 - November 14, 2013\n-------------------------\n* update `analytics.js-integrations` to `0.2.5`\n\n1.0.7 - November 13, 2013\n------------------------\n* update `analytics.js-integrations` to `0.2.4`\n\n1.0.6 - November 12, 2013\n-------------------------\n* update `analytics.js-integrations` to `0.2.3`\n* update `analytics.js-integration` to `0.1.4`\n\n1.0.5 - November 12, 2013\n-------------------------\n* update `analytics.js-integrations` to `0.2.2`\n* fix `properties` overload for `page` method\n\n1.0.4 - November 12, 2013\n-------------------------\n* update `analytics.js-integrations` to `0.2.1`\n\n1.0.3 - November 11, 2013\n-------------------------\n* update `analytics.js-integrations` to `0.2.0`\n\n1.0.2 - November 11, 2013\n-------------------------\n* rename the page methods `section` argument to `category`\n* update `analytics.js-integration`\n* update `analytics.js-integrations`\n\n1.0.1 - November 11, 2013\n-------------------------\n* change `page` to take a `section`\n* update `analytics.js-integration`\n* update `analytics.js-integrations`\n\n1.0.0 - November 10, 2013\n-------------------------\n* change `pageview` method to `page`\n* add call to `page` as mandatory to initialize some analytics tools\n* remove ability to `initialize` by `key`\n* add checking for an integration already being loaded before loading\n* add `#use` method for plugins\n* add event emitter to `analytics`\n* move integrations to [`analytics.js-integrations`](https://github.com/segmentio/analytics.js-integrations)\n* add debugging to all integrations\n* move integration factory to [`analytics.js-integration`](https://github.com/segmentio/analytics.js-integration)\n* Amplitude: rename `pageview` option to `trackAllPages`\n* Amplitude: add `trackNamedPages` option\n* Google Analytics: add `trackNamedPages` option\n* Google Analytics: remove `initialPageview` option\n* Keen IO: rename `pageview` option to `trackAllPages`\n* Keen IO: add `trackNamedPages` option\n* Keen IO: remove `initialPageview` option\n* Lytics: remove `initialPageview` option\n* Mixpanel: rename `pageview` option to `trackAllPages`\n* Mixpanel: add `trackNamedPages` option\n* Mixpanel: remove `initialPageview` option\n* Olark: rename `pageview` option  to `page`\n* Tapstream: remove `initialPageview` option\n* Tapstream: add `trackAllPages` option\n* Tapstream: add `trackNamedPages` option\n* Trak.io: remove `pageview` option\n* Trak.io: remove `initialPageview` option\n* Trak.io: add `trackNamedPages` option\n* Woopra: remove `initialPageview` option\n\n0.18.4 - October 29, 2013\n-------------------------\n* adding convert-date 0.1.0 support\n\n0.18.3 - October 29, 2013\n-------------------------\n* hubspot: adding fix for date traits/properties (calvinfo)\n\n0.18.2 - October 28, 2013\n-------------------------\n* upgrade visionmedia/debug to most recent version, fixes security warnings when cookies are disabled.\n\n0.18.1 - October 28, 2013\n-------------------------\n* add [Evergage](http://evergage.com), by [@glajchs](https://github.com/glajchs)\n\n0.18.0 - October 24, 2013\n-------------------------\n* add event emitter\n* add `initialize`, `ready`, `identify`, `alias`, `pageview`, `track`, and `group` events and tests\n* fix date equality tests\n\n0.17.9 - October 24, 2013\n-------------------------\n* Google Analytics: fix ip anonymization should come after `create`\n* Google Analytics: fix domain to default to `\"none\"`\n\n0.17.8 - October 14, 2013\n-------------------------\n* Customer.io: added preliminary `group` support\n\n0.17.7 - October 10, 2013\n-------------------------\n* propagating traverse isodate fix\n\n0.17.6 - October 7, 2013\n------------------------\n* added [Yandex Metrica](http://metrika.yandex.com), by [@yury-egorenkov](https://github.com/yury-egorenkov)\n\n0.17.5 - October 2, 2013\n------------------------\n* fixed bug in `_invoke` not cloning arguments\n\n0.17.4 - September 30, 2013\n---------------------------\n* added conversion of ISO strings to dates for `track` calls\n\n0.17.3 - September 30, 2013\n---------------------------\n* fixed bug in key-only initialization\n\n0.17.2 - September 30, 2013\n---------------------------\n* UserVoice: added `classicMode` option\n\n0.17.1 - September 30, 2013\n---------------------------\n* UserVoice: fixed bug loading trigger with new widget\n\n0.17.0 - September 30, 2013\n---------------------------\n* added `debug` method, by [@yields](https://github.com/yields)\n\n0.16.0 - September 27, 2013\n---------------------------\n* UserVoice: updated integration to handle the new widget\n\n0.15.2 - September 26, 2013\n---------------------------\n* added Awesomatic, by [@robv](https://github.com/robv)\n\n0.15.1 - September 24, 2013\n---------------------------\n* fixed bug in `ready` causing it to never fire with faulty settings\n* fixed all `ready()` calls to always be async\n* cleared ready state after all analytics core `initialize` tests\n\n0.15.0 - September 18, 2013\n---------------------------\n* Crazy Egg: renamed from `CrazyEgg`\n* Google Analytics: changed `universalClient` option to `classic`\n* Google Analytics: changed `classic` default to `false`\n* Keen IO: changed pageview options defaults to `false`\n* LeadLander: changed `llactid` option to human-readable `accountId`* Intercom: make `#IntercomDefaultWidget` the default activator\n\n0.14.3 - September 18, 2013\n---------------------------\n* exposed `createIntegration` and `addIntegration`\n\n0.14.2 - September 17, 2013\n---------------------------\n* added [Spinnakr](http://spinnakr.com)\n\n0.14.1 - September 17, 2013\n---------------------------\n* removed old `Provider` for an `integration` factory\n\n0.14.0 - September 16, 2013\n---------------------------\n* exposed `group` via the `#group` method\n* exposed `user` via the `#user` method\n* started caching `group` in cookie and local storage like `user`\n* changed `user` and `group` info to always be queried from storage\n* bound all `analytics` methods as a singleton\n* added `identify(traits, options)` override\n* added `timeout` setter method\n\n0.13.2 - September 16, 2013\n---------------------------\n* added [Rollbar](https://rollbar.com/), by [@coryvirok](https://github.com/coryvirok)\n\n0.13.1 - September 12, 2013\n---------------------------\n* Olark: added tests for empty emails, names and phone numbers\n\n0.13.0 - September 11, 2013\n---------------------------\n* converted all integrations and their tests to a cleaner format\n* renamed all instances of \"provider\" to \"integration\"\n* built integration list from their own `name` to avoid bugs\n* changed `_providers` array to an `_integrations` map\n\n0.12.2 - September 5, 2013\n--------------------------\n* added [awe.sm](http://awe.sm)\n\n0.12.1 - September 5, 2013\n--------------------------\n* UserVoice: fix bug where some installations wouldn't show the tab\n\n0.12.0 - September 4, 2013\n--------------------------\n* Clicky: fixed custom tracking, added `pageview`\n\n0.11.16 - September 3, 2013\n---------------------------\n* updated `segmentio/new-date` for old browser support\n* Woopra: fixed default pageview properties\n* Intercom: cleaned up identify logic and tests\n\n0.11.15 - September 2, 2013\n---------------------------\n* pinned all dependencies\n* added [Inspectlet](https://www.inspectlet.com)\n* fixed storage options tests\n* AdRoll: added custom data tracking\n\n0.11.14 - August 30, 2013\n-------------------------\n* bumped version of [`ianstormtaylor/is`](https://github.com/ianstormtaylor/is) for bugfix\n\n0.11.13 - August 29, 2013\n-------------------------\n* Spinnakr: added global variable for site id\n* LeadLander: switched to non `document.write` version\n* Customer.io: convert date objects to seconds\n* fixed `is.function` bug in old browsers\n\n0.11.12 - August 27, 2013\n-------------------------\n* cleaned up core\n* fixed breaking tests\n* removed Bitdeli, by @jtuulos\n* updated Woopra to use new tracker, by @billyvg\n* added trak.io, by @msaspence\n* added `createIntegration` interim method\n* added more Lytics options, by @slindberg and @araddon\n* added trait alias to trak.io\n* added MouseStats, by @Koushan\n* added Tapstream, by @adambard\n* allow Mixpanel to name users by `username`\n* allow GoSquared to name users by `email` or `username`\n* make Google Analytics ignored referrers an array\n* update Errorception cdn\n\n0.11.11 - August 9, 2013\n------------------------\n* Added LeadLander\n\n0.11.10 - July 12, 2013\n-----------------------\n* Added cookieName to Mixpanel options - 0a53afd\n\n0.11.9 - June 11, 2013\n----------------------\n* Added [Visual Website Optimizer](http://visualwebsiteoptimizer.com/)\n\n0.11.8 - June 10, 2013\n----------------------\n* Intercom: added `group` support\n\n0.11.7 - June 7, 2013\n---------------------\n* Fix for cookie domains, now sets to subdomain friendly by default.\n* Renaming bindAll -> bind-all\n\n0.11.6 - June 6, 2013\n---------------------\n* Added `group` support to Preact by [@azcoov](https://github.com/azcoov)\n* Fixed `created` bug with userfox\n* Changed to new Vero CDN URL\n* Fixed bug when initializing unknown providers\n* Added `options` object to `pageview` by [@debangpaliwal](https://github.com/devangpaliwal)\n\n0.11.5 - June 3, 2013\n---------------------\n* Adding segmentio/json temporarily, fixing json-fallback\n\n0.11.4 - May 31, 2013\n---------------------\n* Updated Intercom's library URL\n\n0.11.3 - May 31, 2013\n---------------------\n* Added trailing comma fix\n\n0.11.2 - May 30, 2013\n---------------------\n* Added fix for UserVoice displaying `'null'`\n* Added `make clean` before running components (fixes json fallback)\n\n0.11.1 - May 29, 2013\n---------------------\n* Fixed bug with Google Analytics not tracking integer `value`s\n\n0.11.0 - May 28, 2013\n---------------------\n* Switched from cookie-ing to localStorage\n\n0.10.6 - May 23, 2013\n---------------------\n* Moved trait parsing logic to the global level\n* Added [Improvely](http://www.improvely.com/)\n* Added [Get Satisfaction](https://getsatisfaction.com/)\n* Added a `$phone` alias for Mixpanel\n* Added the ability to pass a function for the `event` to `trackLink` and `trackForm`\n\n0.10.5 - May 22, 2013\n---------------------\n* Added [Amplitude](https://amplitude.com/) support\n* Fixed improperly parsed cookies\n\n0.10.4 - May 17, 2013\n---------------------\n* Fixed bug with Google Analytics being ready to soon\n\n0.10.3 - May 15, 2013\n---------------------\n* Added [Optimizely](https://www.optimizely.com)\n\n0.10.2 - May 14, 2013\n---------------------\n* Fixed handling of `increments` and `userHash` from `options.Intercom`\n\n0.10.1 - May 14, 2013\n---------------------\n* Added `identify` to SnapEngage integration\n\n0.10.0 - May 9, 2013\n--------------------\n* Added `group` method\n\n0.9.18 - May 9, 2013\n--------------------\n* Added [Preact](http://www.preact.io/) support by [@azcoov](https://github.com/azcoov)\n\n0.9.17 - May 1, 2013\n--------------------\n* Updated Keen to version 2.1.0\n\n0.9.16 - April 30, 2013\n-----------------------\n* Fixed bug affecting Pingdom users\n\n0.9.15 - April 30, 2013\n-----------------------\n* Added identify to UserVoice\n\n0.9.14 - April 29, 2013\n-----------------------\n* Fixing userfox integration to accept all traits not just signup_date\n\n0.9.13 - April 29, 2013\n-----------------------\n* Fixing ordering of ignore referrer option in Google Analytics\n\n0.9.12 - April 27, 2013\n-----------------------\n* Adding support for [userfox](https://www.userfox.com)\n\n0.9.11 - April 26, 2013\n-----------------------\n* Adding new ignoreReferrer option to Google Analytics provider\n* Adding new showFeedbackTab option to BugHerd provider\n* Updating UserVoice provider to work with their new snippet(s)\n* Fixing Errorception window.onerror binding to be friendlier\n\n0.9.10 - April 17, 2013\n-----------------------\n* Adding url and title to mixpanel pageviews\n* Addiung url and title to keen pageviews\n\n0.9.9 - April 17, 2013\n----------------------\n* Fixed GoSquared relying on `document.body\n\n0.9.8 - April 16, 2013\n----------------------\n* Adding support for Pingdom RUM\n* Adding support for AdRoll\n\n0.9.7 - April 16, 2013\n----------------------\n* Fixing LiveChat test\n* Updating mixpanel snippet to wait for ready until script loads\n* Adding full traits pulled in from identify.\n\n0.9.6 - April 10, 2013\n----------------------\n* Renaming Provider.options to Provider.defaults\n* Adding universal analytics support to Google Analytics\n\n0.9.5 - April 10, 2013\n----------------------\n* Adding support for new Olark Javascript API functions, see #121\n\n0.9.4 - April 4, 2013\n---------------------\n* Fixing Uservoice integration\n* Fixing ready tests.\n* Adding lytics integration by  [@araddon](https://github.com/araddon)\n* Adding bower support by  [@jede](https://github.com/jede)\n\n0.9.3 - April 2, 2013\n---------------------\n* Olark provider now only notifies the operator of track and pageview when the chat box is expanded.\n\n0.9.2 - March 28, 2013\n----------------------\n* Qualaroo provider now prefers to identify with traits.email over a non-email userId --- makes the survey responses human readable.\n\n0.9.1 - March 28, 2013\n----------------------\n* Woopra no longer tracks after each identify so that duplicate page views aren't generated.\n\n0.9.0 - March 27, 2013\n----------------------\n* Changed default Keen IO settings to record all pageviews by default\n* Removed Keen IO API Key option since that is no longer used for data \"writes\" to their API\n* Renamed Keen IO projectId to projectToken to match their docs\n\n0.8.13 - March 25, 2013\n-----------------------\n* Added ability to pass variables into `intercomSettings` via `context.intercom`\n\n0.8.12 - March 25, 2013\n-----------------------\n* Added [Heap](https://heapanalytics.com)\n\n0.8.11 - March 24, 2013\n-----------------------\n* Removed [Storyberg](http://storyberg.com/2013/03/18/the-end.html), best of luck guys\n\n0.8.10 - March 14, 2013\n------------------\n* Added fix for conversion of `company`'s `created` date\n* Added extra tests for `trackForm`\n* Fixing issue with ClickTale https bug\n\n0.8.9 - March 13, 2013\n----------------------\n* Migrated to new Intercom Javascript API\n* Removed un-used Intercom traits\n* Fix bug in `trackForm` when using jQuery\n\n0.8.8 - March 12, 2013\n----------------------\n* Added `userId` to Errorception metadata\n* Made date parsing more lenient (ms & sec) for trait.created\n\n0.8.7 - March 7, 2013\n---------------------\n* Added [Qualaroo](https://qualaroo.com/)\n* Fixed bug with Chartbeat and page load times\n\n0.8.6 - March 7, 2013\n---------------------\n* Fixed bug in `trackLink` reported by [@quirkyjack](https://github.com/quirkyjack)\n* Fixed bug in ClickTale where it didn't create the ClickTaleDiv\n\n0.8.5 - March 7, 2013\n---------------------\n* Added [Storyberg](http://storyberg.com/) by [@kevinicus](https://github.com/kevinicus)\n* Added [BugHerd](http://bugherd.com)\n* Added [ClickTale](http://clicktale.com)\n* Cleaned up extraneous `require`'s in many providers\n\n0.8.4 - March 5, 2013\n---------------------\n* Added support for strings for the `created` trait\n* Added `load-date` for getting the page's load time\n\n0.8.3 - March 4, 2013\n---------------------\n* Added [Sentry](https://getsentry.com)\n* Added initial pageview support to more providers\n* Allowed HubSpot to recognize email `userId`\n* Added support for DoubleClick [via Google Analytics](http://support.google.com/analytics/bin/answer.py?hl-en&answer-2444872)\n\n0.8.2 - March 4, 2013\n---------------------\n* Fixed bug in FoxMetrics provider\n* Added queue for providers which don't support ready immediately.\n\n0.8.1 - March 3, 2013\n---------------------\n* Fixed bug in `trackForm` when submitted via jQuery\n\n0.8.0 - March 1, 2013\n---------------------\n* Added cookie-ing to keep identity and traits across page loads\n* Added `identify` support for Clicky\n* Added `identify` support for GoSquared\n* Added `identify` support for Woopra\n* Updated tracking for Usercycle\n\n0.7.1 - February 26, 2013\n-------------------------\n* Added Intercom companies by [@adrianrego](https://github.com/adrianrego)\n* Added Intercom setting for use_counter\n* Fixed Intercom traits passed without a created field\n\n0.7.0 - February 25, 2013\n-------------------------\n* Switched over to [Component](http://component.io/)\n\n0.6.0 - February 7, 2013\n------------------------\n* Added `ready` method for binding to when analytics are initialized\n* Added [UserVoice](https://www.uservoice.com)\n* Added [Perfect Audience](https://www.perfectaudience.com/)\n* Added [LiveChat](http://livechatinc.com)\n* Fixed Intercom to allow multiple `identify` calls\n\n0.5.1 - February 4, 2013\n------------------------\n* Merged in fix for Keen IO's branding\n* Added fix to `utils.parseUrl()` field `pathname` in IE\n\n0.5.0 - February 1, 2013\n------------------------\n* Added an `alias` method for merging two user's by ID\n\n0.4.10 - January 30, 2013\n-------------------------\n* Fixed multiple elements on `trackLink` and `trackForm`\n* Fixed CrazyEgg `apiKey` to `accountNumber`\n* Fixed Keen to Keen.io\n\n\n0.4.9 - January 29, 2013\n------------------------\n* Fixed `alias` and `extend` breaking on non-objects\n\n0.4.8 - January 29, 2013\n------------------------\n* Fixed `trackForm` timeout by [@Plasma](https://github.com/Plasma)\n\n0.4.7 - January 29, 2013\n------------------------\n* Added support for Mixpanel's [revenue](https://mixpanel.com/docs/people-analytics/javascript#track_charge) feature\n* Added support for KISSmetrics' `\"Billing Amount\"` property for revenue\n* Added support for `revenue` being passed to Google Analytics' `value` property\n\n0.4.6 - January 28, 2013\n------------------------\n* Added automatic canonical URL support in Google Analytics\n\n0.4.5 - January 25, 2013\n------------------------\n* Added Intercom widget setting\n* Fixed Chartbeat from requiring `body` element to exist\n\n0.4.4 - January 21, 2013\n------------------------\n* Added [Bitdeli](https://bitdeli.com/) by [@jtuulos](https://github.com/jtuulos)\n* Added Mixpanel `$first_name` and `$last_name` aliases by [@dwradcliffe](https://github.com/dwradcliffe)\n* Fixed Mixpanel `$last_seen` alias\n* Added `parseUrl` util\n* Moved GoSquared queue to snippet\n\n0.4.3 - January 20, 2013\n------------------------\n* Added support for Errorception [user metadata](http://blog.errorception.com/2012/11/capture-custom-data-with-your-errors.html)\n\n0.4.2 - January 18, 2013\n------------------------\n* Added option to use a properties function in `trackLink` and `trackForm` methods\n\n0.4.1 - January 18, 2013\n------------------------\n* Added [Keen.io](http://keen.io/) by [@dkador](https://github.com/dkador)\n* Added [Foxmetrics](http://foxmetrics.com/) by [@rawsoft](https://github.com/rawsoft)\n* Updated Google Analytics to include noninteraction and value added by [@rantav](https://github.com/rantav)\n* Moved to expect.js from chai for cross-broser support\n\n0.4.0 - January 18, 2013\n------------------------\n* Renamed `trackClick` to `trackLink`\n* Renamed `trackSubmit` to `trackForm`\n\n0.3.8 - January 18, 2013\n------------------------\n* Fixed Clicky loading slowly\n\n0.3.7 - January 17, 2013\n------------------------\n* Added [HitTail](http://hittail.com)\n* Added [USERcycle](http://usercycle.com)\n* Fixed Travis testing\n\n0.3.6 - January 14, 2013\n------------------------\n* Added [SnapEngage](http://snapengage.com)\n\n0.3.5 - January 14, 2013\n------------------------\n* Added `trackClick` and `trackForm` helpers\n\n0.3.4 - January 13, 2013\n------------------------\n* Upgraded to Mixpanel 2.2 by [@loganfuller](https://github.com/loganfuller)\n\n0.3.3 - January 11, 2013\n------------------------\n* Added [comScore Direct](http://direct.comscore.com)\n\n0.3.2 - January 11, 2013\n------------------------\n* Added [Quantcast](http://quantcast.com)\n* Fixed breaking issue on Clicky\n* Updated Makefile for new providers\n\n\n0.3.1 - January 11, 2013\n------------------------\n* Added `label` and `category` support to Google Analytics\n\n0.3.0 - January 9, 2013\n-----------------------\n* Added [Gauges](http://get.gaug.es/) by [@bdougherty](https://github.com/bdougherty)\n* Added [Vero](http://www.getvero.com/)\n* Added optional `url` argument to `pageview` method\n\n0.2.5 - January 8, 2013\n-----------------------\n* Added [Errorception](http://errorception.com/)\n* Added [Clicky](http://clicky.com/)\n* Fixed IE 7 bug reported by [@yefremov](https://github.com/yefremov)\n\n0.2.4 - January 3, 2013\n-----------------------\n* Fixed GoSquared trailing comma by [@cmer](https://github.com/cmer)\n\n0.2.3 - January 2, 2013\n-----------------------\n* Added domain field to GA by [@starrhorne](https://github.com/starrhorne)\n* Removed phantom install to get travis working\n* Added window._gaq fix in initialize\n\n0.2.2 - December 19, 2012\n-------------------------\n* Added link query tag support for `ajs_uid` and `ajs_event`\n* Added docco, uglify, and phantom to `devDependencies` by [@peleteiro](https://github.com/peleteiro)\n\n0.2.1 - December 18, 2012\n-------------------------\n* Added the `pageview` method for tracking virtual pageviews\n* Added Travis-CI\n* Fixed window level objects in customerio and gosquared\n* Added for Intercom's \"secure\" mode by [@buger](https://github.com/buger)\n* Removed root references\n\n0.2.0 - December 16, 2012\n-------------------------\n* Separated providers into separate files for easier maintenance\n* Changed special `createdAt` trait to `created` for cleanliness\n* Moved `utils` directly onto the analytics object\n* Added `extend` and `alias` utils\n* Added `settings` defaults for all providers\n\n0.1.2 - December 14, 2012\n-------------------------\n* Fixed bug with HubSpot calls pre-script load\n* Upgraded sinon-chai to use [callWithMatch version](https://github.com/obmarg/sinon-chai/blob/f7aa7eccd6c0c18a3e1fc524a246a50c1a29c916/lib/sinon-chai.js)\n* Added [Klaviyo](http://www.klaviyo.com/) by [@bialecki](https://github.com/bialecki)\n* Added [HubSpot](http://www.hubspot.com/) by [@jessbrandi](https://github.com/jessbrandi)\n* Added [GoSquared](https://www.gosquared.com/) by [@simontabor](https://github.com/simontabor)\n\n0.1.1 - November 25, 2012\n-------------------------\n* Added \"Enhanced Link Attribution\" for Google Analytics by [@nscott](https://github.com/nscott)\n* Added \"Site Speed Sample Rate\" for Google Analytics by [@nscott](https://github.com/nscott)\n\n0.1.0 - November 11, 2012\n-------------------------\n* Added [Olark](http://www.olark.com/)\n* Added terse `initialize` syntax\n* Added tests for all providers\n* Added README\n"
        },
        {
          "name": "License.md",
          "type": "blob",
          "size": 1.0693359375,
          "content": "(The MIT License)\n\nCopyright (c) 2015 Segment.io <friends@segment.com>\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 0.48046875,
          "content": "\nSRC = $(wildcard lib/*.js)\n\nnode_modules: package.json\n\tnpm install\n\ttouch $@\n\nclean:\n\trm -rf *.log analytics.js analytics.min.js\n\ndistclean: clean\n\trm -rf components node_modules\n\nanalytics.js: node_modules $(SRC) package.json\n\t./node_modules/.bin/duo --stdout --standalone analytics lib/index.js > $@\n\nanalytics.min.js: analytics.js\n\t./node_modules/.bin/uglifyjs $< --output $@\n\nbuild: analytics.min.js\n\nlint: node_modules\n\t./node_modules/.bin/standard\n\n.PHONY: clean distclean build lint\n"
        },
        {
          "name": "Readme.md",
          "type": "blob",
          "size": 7.232421875,
          "content": "⚠️ Be sure to check out the next generation of analytics.js! https://github.com/segmentio/analytics-next 🎉 \nIf you have an existing JavaScript source with Segment, you can enable Analytics Next in the settings of the source.\n\n# Analytics.js\n\nAnalytics.js makes it easy to collect customer data and send it to many different tools using a single, unified API.\n\nAnalytics.js is open source and is one of the libraries that powers [Segment](https://segment.com), the managed, hassle-free way to collect customer data in the browser and beyond.\n\nFor our mobile and server-side data collection libraries, check out our [catalog](https://segment.com/catalog/) or our [libraries page](https://segment.com/docs/connections/sources/).\n\n<div align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/16131737/53617064-61017a80-3b9a-11e9-9bfb-f5163aa85a7c.png\"/>\n  <p><b><i>You can't fix what you can't measure</i></b></p>\n</div>\n\nAnalytics helps you measure your users, product, and business. It unlocks insights into your app's funnel, core business metrics, and whether you have product-market fit.\n\n## How to get started\n\n1. **Collect analytics data** from your app(s). Get started through Segment with our [Analytics.js Quickstart](https://segment.com/docs/connections/sources/catalog/libraries/website/javascript/quickstart/).\n    - The top 200 Segment companies collect data from 5+ source types (web, mobile, server, CRM, etc.).\n2. **Send the data to analytics tools** (for example, Google Analytics, Amplitude, Mixpanel).\n    - Over 250+ Segment companies send data to eight categories of destinations such as analytics tools, warehouses, email marketing and remarketing systems, session recording, and more.\n3. **Explore your data** by creating metrics (for example, new signups, retention cohorts, and revenue generation).\n    - The best Segment companies use retention cohorts to measure product market fit. Netflix has 70% paid retention after 12 months, 30% after 7 years.\n\n[Segment](https://segment.com) collects analytics data and allows you to send it to more than 250 apps (such as Google Analytics, Mixpanel, Optimizely, Facebook Ads, Slack, Sentry) just by flipping a switch. You only need one Segment code snippet, and you can turn integrations on and off at will, with no additional code. [Sign up with Segment today](https://app.segment.com/signup).\n\n### Why?\n\n1. **Power all your analytics apps with the same data**. Instead of writing code to integrate all of your tools individually, send data to Segment, once.\n\n2. **Install tracking for the last time**. We're the last integration you'll ever need to write. You only need to instrument Segment once. Reduce all of your tracking code and advertising tags into a single set of API calls.\n\n3. **Send data from anywhere**. Send Segment data from any device, and we'll transform and send it on to any tool.\n\n4. **Query your data in SQL**. Slice, dice, and analyze your data in detail with Segment SQL. We'll transform and load your customer behavioral data directly from your apps into Amazon Redshift, Google BigQuery, or Postgres. Save weeks of engineering time by not having to invent your own data warehouse and ETL pipeline.\n\n    For example, you can capture data on any app:\n    ```js\n    analytics.track('Order Completed', { price: 99.84 })\n    ```\n    Then, query the resulting data in SQL:\n    ```sql\n    select * from app.order_completed\n    order by price desc\n    ```\n\n### 🚀 Startup Program\n\n<div align=\"center\">\n  <a href=\"https://segment.com/startups\"><img src=\"https://user-images.githubusercontent.com/16131737/53128952-08d3d400-351b-11e9-9730-7da35adda781.png\" /></a>\n</div>\n\nIf you are part of a new startup  (&lt;$5M raised, &lt;2 years since founding), we just launched a new startup program for you. You can get a Segment Team plan  (up to <b>$25,000 value</b> in Segment credits) for free up to 2 years — <a href=\"https://segment.com/startups/\">apply here</a>!\n\n## Documentation\n\nFirst, read the [Analytics.js QuickStart](https://segment.com/docs/connections/sources/catalog/libraries/website/javascript/quickstart/), which contains installation instructions and a brief overview of what Analytics.js does and how it works.\n\nFor more detail on the Analytics.js API, check out the [Analytics.js Library Reference](https://segment.com/docs/connections/sources/catalog/libraries/website/javascript/).\n\n## Using this Repo\n\nThis repository houses a pre-built, open-source version of analytics.js. If you'd like to use Analytics.js outside of Segment but don't need to customize your build, pre-built [unminified][] or [minified][] versions of analytics.js found in the root of this repository. Once you've done that, you'll want to mimic the Segment snippet on your website by stubbing out its methods on the `window` and downloading your built version of the script asynchronously. For an example of doing that and initializing your integrations with options, [see here](https://gist.github.com/cyberwombat/11008970).\n\nIf you're looking to produce a custom build of Analytics.js with just the plugins you need, see [the wiki page for building a custom distribution][].\n\n## Contributing to Analytics.js and its Ecosystem of Integration Plugins\n\nThe core logic of analytics.js is broken out into individual repositories:\n\n- To report an issue with analytics.js itself, head over to [analytics.js-core][], where the core analytics.js logic is maintained.\n- To report an issue with an integration plugin. head over to the [analytics.js-integrations][] organization, where we keep each integration plugin in its own repository.\n- **To build a custom integration plugin for analytics.js, check out the [wiki][]. To distribute your plugin as a component of an integration in our [catalog][], check out our [partner docs].**\n\nIf you're not sure where to open an issue, feel free to open an issue against this repository or [contact us](https://segment.com/contact) and we'll help point you in the right direction.\n\n[analytics.js]: https://github.com/segmentio/analytics.js\n[unminified]: https://github.com/segmentio/analytics.js/blob/master/analytics.js\n[minified]: https://github.com/segmentio/analytics.js/blob/master/analytics.min.js\n[analytics.js quickstart]: https://segment.com/docs/sources/website/analytics.js/quickstart/\n\n## License\n\nReleased under the [MIT license](License.md).\n\n[analytics.js library reference]: https://segment.com/docs/libraries/analytics.js\n[analytics.js quickstart]: https://segment.com/docs/connections/sources/catalog/libraries/website/javascript/quickstart/\n[analytics.js-core]: https://github.com/segmentio/analytics.js-core\n[analytics.js-integrations]: https://github.com/segment-integrations?q=analytics.js-integration\n[ci-badge]: https://travis-ci.org/segmentio/analytics.js.png?branch=master\n[ci-link]: https://travis-ci.org/segmentio/analytics.js\n[integrations]: https://segment.com/docs/connections/destinations/catalog/\n[libraries]: https://segment.com/docs/connections/sources/catalog/\n[nodejs.org]: https://nodejs.org/\n[spec]: https://segment.com/docs/connections/spec/\n[catalog]: https://segment.com/catalog\n[partner docs]: https://segment.com/docs/partners\n[wiki]: https://github.com/segmentio/analytics.js/wiki/Writing-Integrations\n[the wiki page for building a custom distribution]: https://github.com/segmentio/analytics.js/wiki/Building-A-Custom-Distribution\n"
        },
        {
          "name": "ajs.png",
          "type": "blob",
          "size": 33.265625,
          "content": null
        },
        {
          "name": "ajs_2x.png",
          "type": "blob",
          "size": 90.3515625,
          "content": null
        },
        {
          "name": "analytics.js",
          "type": "blob",
          "size": 438.7080078125,
          "content": "(function umd(require){\n  if (typeof exports === 'object') {\n    module.exports = require('1');\n  } else if (typeof define === 'function' && (define.amd || define.cmd)) {\n    define(function(){ return require('1'); });\n  } else {\n    this['analytics'] = require('1');\n  }\n})((function outer(modules, cache, entries){\n\n  /**\n   * Global\n   */\n\n  var global = (function(){ return this; })();\n\n  /**\n   * Require `name`.\n   *\n   * @param {String} name\n   * @api public\n   */\n\n  function require(name){\n    if (cache[name]) return cache[name].exports;\n    if (modules[name]) return call(name, require);\n    throw new Error('cannot find module \"' + name + '\"');\n  }\n\n  /**\n   * Call module `id` and cache it.\n   *\n   * @param {Number} id\n   * @param {Function} require\n   * @return {Function}\n   * @api private\n   */\n\n  function call(id, require){\n    var m = cache[id] = { exports: {} };\n    var mod = modules[id];\n    var name = mod[2];\n    var fn = mod[0];\n    var threw = true;\n\n    try {\n      fn.call(m.exports, function(req){\n        var dep = modules[id][1][req];\n        return require(dep || req);\n      }, m, m.exports, outer, modules, cache, entries);\n      threw = false;\n    } finally {\n      if (threw) {\n        delete cache[id];\n      } else if (name) {\n        // expose as 'name'.\n        cache[name] = cache[id];\n      }\n    }\n\n    return cache[id].exports;\n  }\n\n  /**\n   * Require all entries exposing them on global if needed.\n   */\n\n  for (var id in entries) {\n    if (entries[id]) {\n      global[entries[id]] = require(id);\n    } else {\n      require(id);\n    }\n  }\n\n  /**\n   * Duo flag.\n   */\n\n  require.duo = true;\n\n  /**\n   * Expose cache.\n   */\n\n  require.cache = cache;\n\n  /**\n   * Expose modules\n   */\n\n  require.modules = modules;\n\n  /**\n   * Return newest require.\n   */\n\n   return require;\n})({\n1: [function(require, module, exports) {\n\n/**\n * Analytics.js\n *\n * (C) 2015 Segment.io Inc.\n */\n\nvar analytics = require('segmentio/analytics.js-core');\nvar Integrations = require('./integrations');\nvar each = require('each');\n\n/**\n * Expose the `analytics` singleton.\n */\n\nmodule.exports = exports = analytics;\n\n/**\n * Expose require.\n */\n\nanalytics.require = require;\n\n/**\n * Expose `VERSION`.\n */\n\nexports.VERSION = require('../bower.json').version;\n\n/**\n * Add integrations.\n */\n\neach(Integrations, function(name, Integration) {\n  analytics.use(Integration);\n});\n\n}, {\"segmentio/analytics.js-core\":2,\"./integrations\":3,\"each\":4,\"../bower.json\":5}],\n2: [function(require, module, exports) {\n\n/**\n * Analytics.js\n *\n * (C) 2013 Segment.io Inc.\n */\n\nvar Analytics = require('./analytics');\n\n/**\n * Expose the `analytics` singleton.\n */\n\nvar analytics = module.exports = exports = new Analytics();\n\n/**\n * Expose require\n */\n\nanalytics.require = require;\n\n/**\n * Expose `VERSION`.\n */\n\nexports.VERSION = require('../bower.json').version;\n\n}, {\"./analytics\":6,\"../bower.json\":7}],\n6: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar _analytics = window.analytics;\nvar Emitter = require('emitter');\nvar Facade = require('facade');\nvar after = require('after');\nvar bind = require('bind');\nvar callback = require('callback');\nvar clone = require('clone');\nvar cookie = require('./cookie');\nvar debug = require('debug');\nvar defaults = require('defaults');\nvar each = require('each');\nvar group = require('./group');\nvar is = require('is');\nvar isMeta = require('is-meta');\nvar keys = require('object').keys;\nvar memory = require('./memory');\nvar normalize = require('./normalize');\nvar on = require('event').bind;\nvar pageDefaults = require('./pageDefaults');\nvar pick = require('pick');\nvar prevent = require('prevent');\nvar querystring = require('querystring');\nvar size = require('object').length;\nvar store = require('./store');\nvar user = require('./user');\nvar Alias = Facade.Alias;\nvar Group = Facade.Group;\nvar Identify = Facade.Identify;\nvar Page = Facade.Page;\nvar Track = Facade.Track;\n\n/**\n * Expose `Analytics`.\n */\n\nexports = module.exports = Analytics;\n\n/**\n * Expose storage.\n */\n\nexports.cookie = cookie;\nexports.store = store;\nexports.memory = memory;\n\n/**\n * Initialize a new `Analytics` instance.\n */\n\nfunction Analytics() {\n  this._options({});\n  this.Integrations = {};\n  this._integrations = {};\n  this._readied = false;\n  this._timeout = 300;\n  // XXX: BACKWARDS COMPATIBILITY\n  this._user = user;\n  this.log = debug('analytics.js');\n  bind.all(this);\n\n  var self = this;\n  this.on('initialize', function(settings, options){\n    if (options.initialPageview) self.page();\n    self._parseQuery();\n  });\n}\n\n/**\n * Event Emitter.\n */\n\nEmitter(Analytics.prototype);\n\n/**\n * Use a `plugin`.\n *\n * @param {Function} plugin\n * @return {Analytics}\n */\n\nAnalytics.prototype.use = function(plugin) {\n  plugin(this);\n  return this;\n};\n\n/**\n * Define a new `Integration`.\n *\n * @param {Function} Integration\n * @return {Analytics}\n */\n\nAnalytics.prototype.addIntegration = function(Integration) {\n  var name = Integration.prototype.name;\n  if (!name) throw new TypeError('attempted to add an invalid integration');\n  this.Integrations[name] = Integration;\n  return this;\n};\n\n/**\n * Initialize with the given integration `settings` and `options`.\n *\n * Aliased to `init` for convenience.\n *\n * @param {Object} [settings={}]\n * @param {Object} [options={}]\n * @return {Analytics}\n */\n\nAnalytics.prototype.init = Analytics.prototype.initialize = function(settings, options) {\n  settings = settings || {};\n  options = options || {};\n\n  this._options(options);\n  this._readied = false;\n\n  // clean unknown integrations from settings\n  var self = this;\n  each(settings, function(name) {\n    var Integration = self.Integrations[name];\n    if (!Integration) delete settings[name];\n  });\n\n  // add integrations\n  each(settings, function(name, opts) {\n    var Integration = self.Integrations[name];\n    var integration = new Integration(clone(opts));\n    self.log('initialize %o - %o', name, opts);\n    self.add(integration);\n  });\n\n  var integrations = this._integrations;\n\n  // load user now that options are set\n  user.load();\n  group.load();\n\n  // make ready callback\n  var ready = after(size(integrations), function() {\n    self._readied = true;\n    self.emit('ready');\n  });\n\n  // initialize integrations, passing ready\n  each(integrations, function(name, integration) {\n    if (options.initialPageview && integration.options.initialPageview === false) {\n      integration.page = after(2, integration.page);\n    }\n\n    integration.analytics = self;\n    integration.once('ready', ready);\n    integration.initialize();\n  });\n\n  // backwards compat with angular plugin.\n  // TODO: remove\n  this.initialized = true;\n\n  this.emit('initialize', settings, options);\n  return this;\n};\n\n/**\n * Set the user's `id`.\n *\n * @param {Mixed} id\n */\n\nAnalytics.prototype.setAnonymousId = function(id){\n  this.user().anonymousId(id);\n  return this;\n};\n\n/**\n * Add an integration.\n *\n * @param {Integration} integration\n */\n\nAnalytics.prototype.add = function(integration){\n  this._integrations[integration.name] = integration;\n  return this;\n};\n\n/**\n * Identify a user by optional `id` and `traits`.\n *\n * @param {string} [id=user.id()] User ID.\n * @param {Object} [traits=null] User traits.\n * @param {Object} [options=null]\n * @param {Function} [fn]\n * @return {Analytics}\n */\n\nAnalytics.prototype.identify = function(id, traits, options, fn) {\n  // Argument reshuffling.\n  /* eslint-disable no-unused-expressions, no-sequences */\n  if (is.fn(options)) fn = options, options = null;\n  if (is.fn(traits)) fn = traits, options = null, traits = null;\n  if (is.object(id)) options = traits, traits = id, id = user.id();\n  /* eslint-enable no-unused-expressions, no-sequences */\n\n  // clone traits before we manipulate so we don't do anything uncouth, and take\n  // from `user` so that we carryover anonymous traits\n  user.identify(id, traits);\n\n  var msg = this.normalize({\n    options: options,\n    traits: user.traits(),\n    userId: user.id()\n  });\n\n  this._invoke('identify', new Identify(msg));\n\n  // emit\n  this.emit('identify', id, traits, options);\n  this._callback(fn);\n  return this;\n};\n\n/**\n * Return the current user.\n *\n * @return {Object}\n */\n\nAnalytics.prototype.user = function() {\n  return user;\n};\n\n/**\n * Identify a group by optional `id` and `traits`. Or, if no arguments are\n * supplied, return the current group.\n *\n * @param {string} [id=group.id()] Group ID.\n * @param {Object} [traits=null] Group traits.\n * @param {Object} [options=null]\n * @param {Function} [fn]\n * @return {Analytics|Object}\n */\n\nAnalytics.prototype.group = function(id, traits, options, fn) {\n  /* eslint-disable no-unused-expressions, no-sequences */\n  if (!arguments.length) return group;\n  if (is.fn(options)) fn = options, options = null;\n  if (is.fn(traits)) fn = traits, options = null, traits = null;\n  if (is.object(id)) options = traits, traits = id, id = group.id();\n  /* eslint-enable no-unused-expressions, no-sequences */\n\n\n  // grab from group again to make sure we're taking from the source\n  group.identify(id, traits);\n\n  var msg = this.normalize({\n    options: options,\n    traits: group.traits(),\n    groupId: group.id()\n  });\n\n  this._invoke('group', new Group(msg));\n\n  this.emit('group', id, traits, options);\n  this._callback(fn);\n  return this;\n};\n\n/**\n * Track an `event` that a user has triggered with optional `properties`.\n *\n * @param {string} event\n * @param {Object} [properties=null]\n * @param {Object} [options=null]\n * @param {Function} [fn]\n * @return {Analytics}\n */\n\nAnalytics.prototype.track = function(event, properties, options, fn) {\n  // Argument reshuffling.\n  /* eslint-disable no-unused-expressions, no-sequences */\n  if (is.fn(options)) fn = options, options = null;\n  if (is.fn(properties)) fn = properties, options = null, properties = null;\n  /* eslint-enable no-unused-expressions, no-sequences */\n\n  // figure out if the event is archived.\n  var plan = this.options.plan || {};\n  var events = plan.track || {};\n\n  // normalize\n  var msg = this.normalize({\n    properties: properties,\n    options: options,\n    event: event\n  });\n\n  // plan.\n  plan = events[event];\n  if (plan) {\n    this.log('plan %o - %o', event, plan);\n    if (plan.enabled === false) return this._callback(fn);\n    defaults(msg.integrations, plan.integrations || {});\n  }\n\n  this._invoke('track', new Track(msg));\n\n  this.emit('track', event, properties, options);\n  this._callback(fn);\n  return this;\n};\n\n/**\n * Helper method to track an outbound link that would normally navigate away\n * from the page before the analytics calls were sent.\n *\n * BACKWARDS COMPATIBILITY: aliased to `trackClick`.\n *\n * @param {Element|Array} links\n * @param {string|Function} event\n * @param {Object|Function} properties (optional)\n * @return {Analytics}\n */\n\nAnalytics.prototype.trackClick = Analytics.prototype.trackLink = function(links, event, properties) {\n  if (!links) return this;\n  // always arrays, handles jquery\n  if (is.element(links)) links = [links];\n\n  var self = this;\n  each(links, function(el) {\n    if (!is.element(el)) throw new TypeError('Must pass HTMLElement to `analytics.trackLink`.');\n    on(el, 'click', function(e) {\n      var ev = is.fn(event) ? event(el) : event;\n      var props = is.fn(properties) ? properties(el) : properties;\n      var href = el.getAttribute('href')\n        || el.getAttributeNS('http://www.w3.org/1999/xlink', 'href')\n        || el.getAttribute('xlink:href');\n\n      self.track(ev, props);\n\n      if (href && el.target !== '_blank' && !isMeta(e)) {\n        prevent(e);\n        self._callback(function() {\n          window.location.href = href;\n        });\n      }\n    });\n  });\n\n  return this;\n};\n\n/**\n * Helper method to track an outbound form that would normally navigate away\n * from the page before the analytics calls were sent.\n *\n * BACKWARDS COMPATIBILITY: aliased to `trackSubmit`.\n *\n * @param {Element|Array} forms\n * @param {string|Function} event\n * @param {Object|Function} properties (optional)\n * @return {Analytics}\n */\n\nAnalytics.prototype.trackSubmit = Analytics.prototype.trackForm = function(forms, event, properties) {\n  if (!forms) return this;\n  // always arrays, handles jquery\n  if (is.element(forms)) forms = [forms];\n\n  var self = this;\n  each(forms, function(el) {\n    if (!is.element(el)) throw new TypeError('Must pass HTMLElement to `analytics.trackForm`.');\n    function handler(e) {\n      prevent(e);\n\n      var ev = is.fn(event) ? event(el) : event;\n      var props = is.fn(properties) ? properties(el) : properties;\n      self.track(ev, props);\n\n      self._callback(function() {\n        el.submit();\n      });\n    }\n\n    // Support the events happening through jQuery or Zepto instead of through\n    // the normal DOM API, because `el.submit` doesn't bubble up events...\n    var $ = window.jQuery || window.Zepto;\n    if ($) {\n      $(el).submit(handler);\n    } else {\n      on(el, 'submit', handler);\n    }\n  });\n\n  return this;\n};\n\n/**\n * Trigger a pageview, labeling the current page with an optional `category`,\n * `name` and `properties`.\n *\n * @param {string} [category]\n * @param {string} [name]\n * @param {Object|string} [properties] (or path)\n * @param {Object} [options]\n * @param {Function} [fn]\n * @return {Analytics}\n */\n\nAnalytics.prototype.page = function(category, name, properties, options, fn) {\n  // Argument reshuffling.\n  /* eslint-disable no-unused-expressions, no-sequences */\n  if (is.fn(options)) fn = options, options = null;\n  if (is.fn(properties)) fn = properties, options = properties = null;\n  if (is.fn(name)) fn = name, options = properties = name = null;\n  if (is.object(category)) options = name, properties = category, name = category = null;\n  if (is.object(name)) options = properties, properties = name, name = null;\n  if (is.string(category) && !is.string(name)) name = category, category = null;\n  /* eslint-enable no-unused-expressions, no-sequences */\n\n  properties = clone(properties) || {};\n  if (name) properties.name = name;\n  if (category) properties.category = category;\n\n  // Ensure properties has baseline spec properties.\n  // TODO: Eventually move these entirely to `options.context.page`\n  var defs = pageDefaults();\n  defaults(properties, defs);\n\n  // Mirror user overrides to `options.context.page` (but exclude custom properties)\n  // (Any page defaults get applied in `this.normalize` for consistency.)\n  // Weird, yeah--moving special props to `context.page` will fix this in the long term.\n  var overrides = pick(keys(defs), properties);\n  if (!is.empty(overrides)) {\n    options = options || {};\n    options.context = options.context || {};\n    options.context.page = overrides;\n  }\n\n  var msg = this.normalize({\n    properties: properties,\n    category: category,\n    options: options,\n    name: name\n  });\n\n  this._invoke('page', new Page(msg));\n\n  this.emit('page', category, name, properties, options);\n  this._callback(fn);\n  return this;\n};\n\n/**\n * FIXME: BACKWARDS COMPATIBILITY: convert an old `pageview` to a `page` call.\n *\n * @param {string} [url]\n * @return {Analytics}\n * @api private\n */\n\nAnalytics.prototype.pageview = function(url) {\n  var properties = {};\n  if (url) properties.path = url;\n  this.page(properties);\n  return this;\n};\n\n/**\n * Merge two previously unassociated user identities.\n *\n * @param {string} to\n * @param {string} from (optional)\n * @param {Object} options (optional)\n * @param {Function} fn (optional)\n * @return {Analytics}\n */\n\nAnalytics.prototype.alias = function(to, from, options, fn) {\n  // Argument reshuffling.\n  /* eslint-disable no-unused-expressions, no-sequences */\n  if (is.fn(options)) fn = options, options = null;\n  if (is.fn(from)) fn = from, options = null, from = null;\n  if (is.object(from)) options = from, from = null;\n  /* eslint-enable no-unused-expressions, no-sequences */\n\n  var msg = this.normalize({\n    options: options,\n    previousId: from,\n    userId: to\n  });\n\n  this._invoke('alias', new Alias(msg));\n\n  this.emit('alias', to, from, options);\n  this._callback(fn);\n  return this;\n};\n\n/**\n * Register a `fn` to be fired when all the analytics services are ready.\n *\n * @param {Function} fn\n * @return {Analytics}\n */\n\nAnalytics.prototype.ready = function(fn) {\n  if (is.fn(fn)) {\n    if (this._readied) {\n      callback.async(fn);\n    } else {\n      this.once('ready', fn);\n    }\n  }\n  return this;\n};\n\n/**\n * Set the `timeout` (in milliseconds) used for callbacks.\n *\n * @param {Number} timeout\n */\n\nAnalytics.prototype.timeout = function(timeout) {\n  this._timeout = timeout;\n};\n\n/**\n * Enable or disable debug.\n *\n * @param {string|boolean} str\n */\n\nAnalytics.prototype.debug = function(str){\n  if (!arguments.length || str) {\n    debug.enable('analytics:' + (str || '*'));\n  } else {\n    debug.disable();\n  }\n};\n\n/**\n * Apply options.\n *\n * @param {Object} options\n * @return {Analytics}\n * @api private\n */\n\nAnalytics.prototype._options = function(options) {\n  options = options || {};\n  this.options = options;\n  cookie.options(options.cookie);\n  store.options(options.localStorage);\n  user.options(options.user);\n  group.options(options.group);\n  return this;\n};\n\n/**\n * Callback a `fn` after our defined timeout period.\n *\n * @param {Function} fn\n * @return {Analytics}\n * @api private\n */\n\nAnalytics.prototype._callback = function(fn) {\n  callback.async(fn, this._timeout);\n  return this;\n};\n\n/**\n * Call `method` with `facade` on all enabled integrations.\n *\n * @param {string} method\n * @param {Facade} facade\n * @return {Analytics}\n * @api private\n */\n\nAnalytics.prototype._invoke = function(method, facade) {\n  this.emit('invoke', facade);\n\n  each(this._integrations, function(name, integration) {\n    if (!facade.enabled(name)) return;\n    integration.invoke.call(integration, method, facade);\n  });\n\n  return this;\n};\n\n/**\n * Push `args`.\n *\n * @param {Array} args\n * @api private\n */\n\nAnalytics.prototype.push = function(args){\n  var method = args.shift();\n  if (!this[method]) return;\n  this[method].apply(this, args);\n};\n\n/**\n * Reset group and user traits and id's.\n *\n * @api public\n */\n\nAnalytics.prototype.reset = function(){\n  this.user().logout();\n  this.group().logout();\n};\n\n/**\n * Parse the query string for callable methods.\n *\n * @return {Analytics}\n * @api private\n */\n\nAnalytics.prototype._parseQuery = function() {\n  // Identify and track any `ajs_uid` and `ajs_event` parameters in the URL.\n  var q = querystring.parse(window.location.search);\n  if (q.ajs_uid) this.identify(q.ajs_uid);\n  if (q.ajs_event) this.track(q.ajs_event);\n  if (q.ajs_aid) user.anonymousId(q.ajs_aid);\n  return this;\n};\n\n/**\n * Normalize the given `msg`.\n *\n * @param {Object} msg\n * @return {Object}\n */\n\nAnalytics.prototype.normalize = function(msg){\n  msg = normalize(msg, keys(this._integrations));\n  if (msg.anonymousId) user.anonymousId(msg.anonymousId);\n  msg.anonymousId = user.anonymousId();\n\n  // Ensure all outgoing requests include page data in their contexts.\n  msg.context.page = defaults(msg.context.page || {}, pageDefaults());\n\n  return msg;\n};\n\n/**\n * No conflict support.\n */\n\nAnalytics.prototype.noConflict = function(){\n  window.analytics = _analytics;\n  return this;\n};\n\n\n}, {\"emitter\":8,\"facade\":9,\"after\":10,\"bind\":11,\"callback\":12,\"clone\":13,\"./cookie\":14,\"debug\":15,\"defaults\":16,\"each\":4,\"./group\":17,\"is\":18,\"is-meta\":19,\"object\":20,\"./memory\":21,\"./normalize\":22,\"event\":23,\"./pageDefaults\":24,\"pick\":25,\"prevent\":26,\"querystring\":27,\"./store\":28,\"./user\":29}],\n8: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar index = require('indexof');\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  fn._off = on;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var i = index(callbacks, fn._off || fn);\n  if (~i) callbacks.splice(i, 1);\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n}, {\"indexof\":30}],\n30: [function(require, module, exports) {\nmodule.exports = function(arr, obj){\n  if (arr.indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n}, {}],\n9: [function(require, module, exports) {\n\nvar Facade = require('./facade');\n\n/**\n * Expose `Facade` facade.\n */\n\nmodule.exports = Facade;\n\n/**\n * Expose specific-method facades.\n */\n\nFacade.Alias = require('./alias');\nFacade.Group = require('./group');\nFacade.Identify = require('./identify');\nFacade.Track = require('./track');\nFacade.Page = require('./page');\nFacade.Screen = require('./screen');\n\n}, {\"./facade\":31,\"./alias\":32,\"./group\":33,\"./identify\":34,\"./track\":35,\"./page\":36,\"./screen\":37}],\n31: [function(require, module, exports) {\n\nvar traverse = require('isodate-traverse');\nvar isEnabled = require('./is-enabled');\nvar clone = require('./utils').clone;\nvar type = require('./utils').type;\nvar address = require('./address');\nvar objCase = require('obj-case');\nvar newDate = require('new-date');\n\n/**\n * Expose `Facade`.\n */\n\nmodule.exports = Facade;\n\n/**\n * Initialize a new `Facade` with an `obj` of arguments.\n *\n * @param {Object} obj\n */\n\nfunction Facade (obj) {\n  obj = clone(obj);\n  if (!obj.hasOwnProperty('timestamp')) obj.timestamp = new Date();\n  else obj.timestamp = newDate(obj.timestamp);\n  traverse(obj);\n  this.obj = obj;\n}\n\n/**\n * Mixin address traits.\n */\n\naddress(Facade.prototype);\n\n/**\n * Return a proxy function for a `field` that will attempt to first use methods,\n * and fallback to accessing the underlying object directly. You can specify\n * deeply nested fields too like:\n *\n *   this.proxy('options.Librato');\n *\n * @param {String} field\n */\n\nFacade.prototype.proxy = function (field) {\n  var fields = field.split('.');\n  field = fields.shift();\n\n  // Call a function at the beginning to take advantage of facaded fields\n  var obj = this[field] || this.field(field);\n  if (!obj) return obj;\n  if (typeof obj === 'function') obj = obj.call(this) || {};\n  if (fields.length === 0) return transform(obj);\n\n  obj = objCase(obj, fields.join('.'));\n  return transform(obj);\n};\n\n/**\n * Directly access a specific `field` from the underlying object, returning a\n * clone so outsiders don't mess with stuff.\n *\n * @param {String} field\n * @return {Mixed}\n */\n\nFacade.prototype.field = function (field) {\n  var obj = this.obj[field];\n  return transform(obj);\n};\n\n/**\n * Utility method to always proxy a particular `field`. You can specify deeply\n * nested fields too like:\n *\n *   Facade.proxy('options.Librato');\n *\n * @param {String} field\n * @return {Function}\n */\n\nFacade.proxy = function (field) {\n  return function () {\n    return this.proxy(field);\n  };\n};\n\n/**\n * Utility method to directly access a `field`.\n *\n * @param {String} field\n * @return {Function}\n */\n\nFacade.field = function (field) {\n  return function () {\n    return this.field(field);\n  };\n};\n\n/**\n * Proxy multiple `path`.\n *\n * @param {String} path\n * @return {Array}\n */\n\nFacade.multi = function(path){\n  return function(){\n    var multi = this.proxy(path + 's');\n    if ('array' == type(multi)) return multi;\n    var one = this.proxy(path);\n    if (one) one = [clone(one)];\n    return one || [];\n  };\n};\n\n/**\n * Proxy one `path`.\n *\n * @param {String} path\n * @return {Mixed}\n */\n\nFacade.one = function(path){\n  return function(){\n    var one = this.proxy(path);\n    if (one) return one;\n    var multi = this.proxy(path + 's');\n    if ('array' == type(multi)) return multi[0];\n  };\n};\n\n/**\n * Get the basic json object of this facade.\n *\n * @return {Object}\n */\n\nFacade.prototype.json = function () {\n  var ret = clone(this.obj);\n  if (this.type) ret.type = this.type();\n  return ret;\n};\n\n/**\n * Get the options of a call (formerly called \"context\"). If you pass an\n * integration name, it will get the options for that specific integration, or\n * undefined if the integration is not enabled.\n *\n * @param {String} integration (optional)\n * @return {Object or Null}\n */\n\nFacade.prototype.context =\nFacade.prototype.options = function (integration) {\n  var options = clone(this.obj.options || this.obj.context) || {};\n  if (!integration) return clone(options);\n  if (!this.enabled(integration)) return;\n  var integrations = this.integrations();\n  var value = integrations[integration] || objCase(integrations, integration);\n  if ('boolean' == typeof value) value = {};\n  return value || {};\n};\n\n/**\n * Check whether an integration is enabled.\n *\n * @param {String} integration\n * @return {Boolean}\n */\n\nFacade.prototype.enabled = function (integration) {\n  var allEnabled = this.proxy('options.providers.all');\n  if (typeof allEnabled !== 'boolean') allEnabled = this.proxy('options.all');\n  if (typeof allEnabled !== 'boolean') allEnabled = this.proxy('integrations.all');\n  if (typeof allEnabled !== 'boolean') allEnabled = true;\n\n  var enabled = allEnabled && isEnabled(integration);\n  var options = this.integrations();\n\n  // If the integration is explicitly enabled or disabled, use that\n  // First, check options.providers for backwards compatibility\n  if (options.providers && options.providers.hasOwnProperty(integration)) {\n    enabled = options.providers[integration];\n  }\n\n  // Next, check for the integration's existence in 'options' to enable it.\n  // If the settings are a boolean, use that, otherwise it should be enabled.\n  if (options.hasOwnProperty(integration)) {\n    var settings = options[integration];\n    if (typeof settings === 'boolean') {\n      enabled = settings;\n    } else {\n      enabled = true;\n    }\n  }\n\n  return enabled ? true : false;\n};\n\n/**\n * Get all `integration` options.\n *\n * @param {String} integration\n * @return {Object}\n * @api private\n */\n\nFacade.prototype.integrations = function(){\n  return this.obj.integrations\n    || this.proxy('options.providers')\n    || this.options();\n};\n\n/**\n * Check whether the user is active.\n *\n * @return {Boolean}\n */\n\nFacade.prototype.active = function () {\n  var active = this.proxy('options.active');\n  if (active === null || active === undefined) active = true;\n  return active;\n};\n\n/**\n * Get `sessionId / anonymousId`.\n *\n * @return {Mixed}\n * @api public\n */\n\nFacade.prototype.sessionId =\nFacade.prototype.anonymousId = function(){\n  return this.field('anonymousId')\n    || this.field('sessionId');\n};\n\n/**\n * Get `groupId` from `context.groupId`.\n *\n * @return {String}\n * @api public\n */\n\nFacade.prototype.groupId = Facade.proxy('options.groupId');\n\n/**\n * Get the call's \"super properties\" which are just traits that have been\n * passed in as if from an identify call.\n *\n * @param {Object} aliases\n * @return {Object}\n */\n\nFacade.prototype.traits = function (aliases) {\n  var ret = this.proxy('options.traits') || {};\n  var id = this.userId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (var alias in aliases) {\n    var value = null == this[alias]\n      ? this.proxy('options.traits.' + alias)\n      : this[alias]();\n    if (null == value) continue;\n    ret[aliases[alias]] = value;\n    delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * Add a convenient way to get the library name and version\n */\n\nFacade.prototype.library = function(){\n  var library = this.proxy('options.library');\n  if (!library) return { name: 'unknown', version: null };\n  if (typeof library === 'string') return { name: library, version: null };\n  return library;\n};\n\n/**\n * Setup some basic proxies.\n */\n\nFacade.prototype.userId = Facade.field('userId');\nFacade.prototype.channel = Facade.field('channel');\nFacade.prototype.timestamp = Facade.field('timestamp');\nFacade.prototype.userAgent = Facade.proxy('options.userAgent');\nFacade.prototype.ip = Facade.proxy('options.ip');\n\n/**\n * Return the cloned and traversed object\n *\n * @param {Mixed} obj\n * @return {Mixed}\n */\n\nfunction transform(obj){\n  var cloned = clone(obj);\n  return cloned;\n}\n\n}, {\"isodate-traverse\":38,\"./is-enabled\":39,\"./utils\":40,\"./address\":41,\"obj-case\":42,\"new-date\":43}],\n38: [function(require, module, exports) {\n\nvar is = require('is');\nvar isodate = require('isodate');\nvar each;\n\ntry {\n  each = require('each');\n} catch (err) {\n  each = require('each-component');\n}\n\n/**\n * Expose `traverse`.\n */\n\nmodule.exports = traverse;\n\n/**\n * Traverse an object or array, and return a clone with all ISO strings parsed\n * into Date objects.\n *\n * @param {Object} obj\n * @return {Object}\n */\n\nfunction traverse (input, strict) {\n  if (strict === undefined) strict = true;\n\n  if (is.object(input)) return object(input, strict);\n  if (is.array(input)) return array(input, strict);\n  return input;\n}\n\n/**\n * Object traverser.\n *\n * @param {Object} obj\n * @param {Boolean} strict\n * @return {Object}\n */\n\nfunction object (obj, strict) {\n  each(obj, function (key, val) {\n    if (isodate.is(val, strict)) {\n      obj[key] = isodate.parse(val);\n    } else if (is.object(val) || is.array(val)) {\n      traverse(val, strict);\n    }\n  });\n  return obj;\n}\n\n/**\n * Array traverser.\n *\n * @param {Array} arr\n * @param {Boolean} strict\n * @return {Array}\n */\n\nfunction array (arr, strict) {\n  each(arr, function (val, x) {\n    if (is.object(val)) {\n      traverse(val, strict);\n    } else if (isodate.is(val, strict)) {\n      arr[x] = isodate.parse(val);\n    }\n  });\n  return arr;\n}\n\n}, {\"is\":44,\"isodate\":45,\"each\":4}],\n44: [function(require, module, exports) {\n\nvar isEmpty = require('is-empty');\n\ntry {\n  var typeOf = require('type');\n} catch (e) {\n  var typeOf = require('component-type');\n}\n\n\n/**\n * Types.\n */\n\nvar types = [\n  'arguments',\n  'array',\n  'boolean',\n  'date',\n  'element',\n  'function',\n  'null',\n  'number',\n  'object',\n  'regexp',\n  'string',\n  'undefined'\n];\n\n\n/**\n * Expose type checkers.\n *\n * @param {Mixed} value\n * @return {Boolean}\n */\n\nfor (var i = 0, type; type = types[i]; i++) exports[type] = generate(type);\n\n\n/**\n * Add alias for `function` for old browsers.\n */\n\nexports.fn = exports['function'];\n\n\n/**\n * Expose `empty` check.\n */\n\nexports.empty = isEmpty;\n\n\n/**\n * Expose `nan` check.\n */\n\nexports.nan = function (val) {\n  return exports.number(val) && val != val;\n};\n\n\n/**\n * Generate a type checker.\n *\n * @param {String} type\n * @return {Function}\n */\n\nfunction generate (type) {\n  return function (value) {\n    return type === typeOf(value);\n  };\n}\n}, {\"is-empty\":46,\"type\":47,\"component-type\":47}],\n46: [function(require, module, exports) {\n\n/**\n * Expose `isEmpty`.\n */\n\nmodule.exports = isEmpty;\n\n\n/**\n * Has.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n\n/**\n * Test whether a value is \"empty\".\n *\n * @param {Mixed} val\n * @return {Boolean}\n */\n\nfunction isEmpty (val) {\n  if (null == val) return true;\n  if ('number' == typeof val) return 0 === val;\n  if (undefined !== val.length) return 0 === val.length;\n  for (var key in val) if (has.call(val, key)) return false;\n  return true;\n}\n}, {}],\n47: [function(require, module, exports) {\n/**\n * toString ref.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Return the type of `val`.\n *\n * @param {Mixed} val\n * @return {String}\n * @api public\n */\n\nmodule.exports = function(val){\n  switch (toString.call(val)) {\n    case '[object Date]': return 'date';\n    case '[object RegExp]': return 'regexp';\n    case '[object Arguments]': return 'arguments';\n    case '[object Array]': return 'array';\n    case '[object Error]': return 'error';\n  }\n\n  if (val === null) return 'null';\n  if (val === undefined) return 'undefined';\n  if (val !== val) return 'nan';\n  if (val && val.nodeType === 1) return 'element';\n\n  val = val.valueOf\n    ? val.valueOf()\n    : Object.prototype.valueOf.apply(val)\n\n  return typeof val;\n};\n\n}, {}],\n45: [function(require, module, exports) {\n\n/**\n * Matcher, slightly modified from:\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n */\n\nvar matcher = /^(\\d{4})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:([ T])(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\n\n\n/**\n * Convert an ISO date string to a date. Fallback to native `Date.parse`.\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n *\n * @param {String} iso\n * @return {Date}\n */\n\nexports.parse = function (iso) {\n  var numericKeys = [1, 5, 6, 7, 11, 12];\n  var arr = matcher.exec(iso);\n  var offset = 0;\n\n  // fallback to native parsing\n  if (!arr) return new Date(iso);\n\n  // remove undefined values\n  for (var i = 0, val; val = numericKeys[i]; i++) {\n    arr[val] = parseInt(arr[val], 10) || 0;\n  }\n\n  // allow undefined days and months\n  arr[2] = parseInt(arr[2], 10) || 1;\n  arr[3] = parseInt(arr[3], 10) || 1;\n\n  // month is 0-11\n  arr[2]--;\n\n  // allow abitrary sub-second precision\n  arr[8] = arr[8]\n    ? (arr[8] + '00').substring(0, 3)\n    : 0;\n\n  // apply timezone if one exists\n  if (arr[4] == ' ') {\n    offset = new Date().getTimezoneOffset();\n  } else if (arr[9] !== 'Z' && arr[10]) {\n    offset = arr[11] * 60 + arr[12];\n    if ('+' == arr[10]) offset = 0 - offset;\n  }\n\n  var millis = Date.UTC(arr[1], arr[2], arr[3], arr[5], arr[6] + offset, arr[7], arr[8]);\n  return new Date(millis);\n};\n\n\n/**\n * Checks whether a `string` is an ISO date string. `strict` mode requires that\n * the date string at least have a year, month and date.\n *\n * @param {String} string\n * @param {Boolean} strict\n * @return {Boolean}\n */\n\nexports.is = function (string, strict) {\n  if (strict && false === /^\\d{4}-\\d{2}-\\d{2}/.test(string)) return false;\n  return matcher.test(string);\n};\n}, {}],\n4: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar type = require('type');\n\n/**\n * HOP reference.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Iterate the given `obj` and invoke `fn(val, i)`.\n *\n * @param {String|Array|Object} obj\n * @param {Function} fn\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  switch (type(obj)) {\n    case 'array':\n      return array(obj, fn);\n    case 'object':\n      if ('number' == typeof obj.length) return array(obj, fn);\n      return object(obj, fn);\n    case 'string':\n      return string(obj, fn);\n  }\n};\n\n/**\n * Iterate string chars.\n *\n * @param {String} obj\n * @param {Function} fn\n * @api private\n */\n\nfunction string(obj, fn) {\n  for (var i = 0; i < obj.length; ++i) {\n    fn(obj.charAt(i), i);\n  }\n}\n\n/**\n * Iterate object keys.\n *\n * @param {Object} obj\n * @param {Function} fn\n * @api private\n */\n\nfunction object(obj, fn) {\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      fn(key, obj[key]);\n    }\n  }\n}\n\n/**\n * Iterate array-ish.\n *\n * @param {Array|Object} obj\n * @param {Function} fn\n * @api private\n */\n\nfunction array(obj, fn) {\n  for (var i = 0; i < obj.length; ++i) {\n    fn(obj[i], i);\n  }\n}\n}, {\"type\":47}],\n39: [function(require, module, exports) {\n\n/**\n * A few integrations are disabled by default. They must be explicitly\n * enabled by setting options[Provider] = true.\n */\n\nvar disabled = {\n  Salesforce: true\n};\n\n/**\n * Check whether an integration should be enabled by default.\n *\n * @param {String} integration\n * @return {Boolean}\n */\n\nmodule.exports = function (integration) {\n  return ! disabled[integration];\n};\n}, {}],\n40: [function(require, module, exports) {\n\n/**\n * TODO: use component symlink, everywhere ?\n */\n\ntry {\n  exports.inherit = require('inherit');\n  exports.clone = require('clone');\n  exports.type = require('type');\n} catch (e) {\n  exports.inherit = require('inherit-component');\n  exports.clone = require('clone-component');\n  exports.type = require('type-component');\n}\n\n}, {\"inherit\":48,\"clone\":49,\"type\":47}],\n48: [function(require, module, exports) {\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n}, {}],\n49: [function(require, module, exports) {\n/**\n * Module dependencies.\n */\n\nvar type;\ntry {\n  type = require('component-type');\n} catch (_) {\n  type = require('type');\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = clone;\n\n/**\n * Clones objects.\n *\n * @param {Mixed} any object\n * @api public\n */\n\nfunction clone(obj){\n  switch (type(obj)) {\n    case 'object':\n      var copy = {};\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          copy[key] = clone(obj[key]);\n        }\n      }\n      return copy;\n\n    case 'array':\n      var copy = new Array(obj.length);\n      for (var i = 0, l = obj.length; i < l; i++) {\n        copy[i] = clone(obj[i]);\n      }\n      return copy;\n\n    case 'regexp':\n      // from millermedeiros/amd-utils - MIT\n      var flags = '';\n      flags += obj.multiline ? 'm' : '';\n      flags += obj.global ? 'g' : '';\n      flags += obj.ignoreCase ? 'i' : '';\n      return new RegExp(obj.source, flags);\n\n    case 'date':\n      return new Date(obj.getTime());\n\n    default: // string, number, boolean, …\n      return obj;\n  }\n}\n\n}, {\"component-type\":47,\"type\":47}],\n41: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar get = require('obj-case');\n\n/**\n * Add address getters to `proto`.\n *\n * @param {Function} proto\n */\n\nmodule.exports = function(proto){\n  proto.zip = trait('postalCode', 'zip');\n  proto.country = trait('country');\n  proto.street = trait('street');\n  proto.state = trait('state');\n  proto.city = trait('city');\n\n  function trait(a, b){\n    return function(){\n      var traits = this.traits();\n      var props = this.properties ? this.properties() : {};\n\n      return get(traits, 'address.' + a)\n        || get(traits, a)\n        || (b ? get(traits, 'address.' + b) : null)\n        || (b ? get(traits, b) : null)\n        || get(props, 'address.' + a)\n        || get(props, a)\n        || (b ? get(props, 'address.' + b) : null)\n        || (b ? get(props, b) : null);\n    };\n  }\n};\n\n}, {\"obj-case\":42}],\n42: [function(require, module, exports) {\n\nvar identity = function(_){ return _; };\n\n\n/**\n * Module exports, export\n */\n\nmodule.exports = multiple(find);\nmodule.exports.find = module.exports;\n\n\n/**\n * Export the replacement function, return the modified object\n */\n\nmodule.exports.replace = function (obj, key, val, options) {\n  multiple(replace).call(this, obj, key, val, options);\n  return obj;\n};\n\n\n/**\n * Export the delete function, return the modified object\n */\n\nmodule.exports.del = function (obj, key, options) {\n  multiple(del).call(this, obj, key, null, options);\n  return obj;\n};\n\n\n/**\n * Compose applying the function to a nested key\n */\n\nfunction multiple (fn) {\n  return function (obj, path, val, options) {\n    var normalize = options && isFunction(options.normalizer) ? options.normalizer : defaultNormalize;\n    path = normalize(path);\n\n    var key;\n    var finished = false;\n\n    while (!finished) loop();\n\n    function loop() {\n      for (key in obj) {\n        var normalizedKey = normalize(key);\n        if (0 === path.indexOf(normalizedKey)) {\n          var temp = path.substr(normalizedKey.length);\n          if (temp.charAt(0) === '.' || temp.length === 0) {\n            path = temp.substr(1);\n            var child = obj[key];\n\n            // we're at the end and there is nothing.\n            if (null == child) {\n              finished = true;\n              return;\n            }\n\n            // we're at the end and there is something.\n            if (!path.length) {\n              finished = true;\n              return;\n            }\n\n            // step into child\n            obj = child;\n\n            // but we're done here\n            return;\n          }\n        }\n      }\n\n      key = undefined;\n      // if we found no matching properties\n      // on the current object, there's no match.\n      finished = true;\n    }\n\n    if (!key) return;\n    if (null == obj) return obj;\n\n    // the `obj` and `key` is one above the leaf object and key, so\n    // start object: { a: { 'b.c': 10 } }\n    // end object: { 'b.c': 10 }\n    // end key: 'b.c'\n    // this way, you can do `obj[key]` and get `10`.\n    return fn(obj, key, val);\n  };\n}\n\n\n/**\n * Find an object by its key\n *\n * find({ first_name : 'Calvin' }, 'firstName')\n */\n\nfunction find (obj, key) {\n  if (obj.hasOwnProperty(key)) return obj[key];\n}\n\n\n/**\n * Delete a value for a given key\n *\n * del({ a : 'b', x : 'y' }, 'X' }) -> { a : 'b' }\n */\n\nfunction del (obj, key) {\n  if (obj.hasOwnProperty(key)) delete obj[key];\n  return obj;\n}\n\n\n/**\n * Replace an objects existing value with a new one\n *\n * replace({ a : 'b' }, 'a', 'c') -> { a : 'c' }\n */\n\nfunction replace (obj, key, val) {\n  if (obj.hasOwnProperty(key)) obj[key] = val;\n  return obj;\n}\n\n/**\n * Normalize a `dot.separated.path`.\n *\n * A.HELL(!*&#(!)O_WOR   LD.bar => ahelloworldbar\n *\n * @param {String} path\n * @return {String}\n */\n\nfunction defaultNormalize(path) {\n  return path.replace(/[^a-zA-Z0-9\\.]+/g, '').toLowerCase();\n}\n\n/**\n * Check if a value is a function.\n *\n * @param {*} val\n * @return {boolean} Returns `true` if `val` is a function, otherwise `false`.\n */\n\nfunction isFunction(val) {\n  return typeof val === 'function';\n}\n\n}, {}],\n43: [function(require, module, exports) {\n\nvar is = require('is');\nvar isodate = require('isodate');\nvar milliseconds = require('./milliseconds');\nvar seconds = require('./seconds');\n\n\n/**\n * Returns a new Javascript Date object, allowing a variety of extra input types\n * over the native Date constructor.\n *\n * @param {Date|String|Number} val\n */\n\nmodule.exports = function newDate (val) {\n  if (is.date(val)) return val;\n  if (is.number(val)) return new Date(toMs(val));\n\n  // date strings\n  if (isodate.is(val)) return isodate.parse(val);\n  if (milliseconds.is(val)) return milliseconds.parse(val);\n  if (seconds.is(val)) return seconds.parse(val);\n\n  // fallback to Date.parse\n  return new Date(val);\n};\n\n\n/**\n * If the number passed val is seconds from the epoch, turn it into milliseconds.\n * Milliseconds would be greater than 31557600000 (December 31, 1970).\n *\n * @param {Number} num\n */\n\nfunction toMs (num) {\n  if (num < 31557600000) return num * 1000;\n  return num;\n}\n}, {\"is\":50,\"isodate\":45,\"./milliseconds\":51,\"./seconds\":52}],\n50: [function(require, module, exports) {\n\nvar isEmpty = require('is-empty')\n  , typeOf = require('type');\n\n\n/**\n * Types.\n */\n\nvar types = [\n  'arguments',\n  'array',\n  'boolean',\n  'date',\n  'element',\n  'function',\n  'null',\n  'number',\n  'object',\n  'regexp',\n  'string',\n  'undefined'\n];\n\n\n/**\n * Expose type checkers.\n *\n * @param {Mixed} value\n * @return {Boolean}\n */\n\nfor (var i = 0, type; type = types[i]; i++) exports[type] = generate(type);\n\n\n/**\n * Add alias for `function` for old browsers.\n */\n\nexports.fn = exports['function'];\n\n\n/**\n * Expose `empty` check.\n */\n\nexports.empty = isEmpty;\n\n\n/**\n * Expose `nan` check.\n */\n\nexports.nan = function (val) {\n  return exports.number(val) && val != val;\n};\n\n\n/**\n * Generate a type checker.\n *\n * @param {String} type\n * @return {Function}\n */\n\nfunction generate (type) {\n  return function (value) {\n    return type === typeOf(value);\n  };\n}\n}, {\"is-empty\":46,\"type\":47}],\n51: [function(require, module, exports) {\n\n/**\n * Matcher.\n */\n\nvar matcher = /\\d{13}/;\n\n\n/**\n * Check whether a string is a millisecond date string.\n *\n * @param {String} string\n * @return {Boolean}\n */\n\nexports.is = function (string) {\n  return matcher.test(string);\n};\n\n\n/**\n * Convert a millisecond string to a date.\n *\n * @param {String} millis\n * @return {Date}\n */\n\nexports.parse = function (millis) {\n  millis = parseInt(millis, 10);\n  return new Date(millis);\n};\n}, {}],\n52: [function(require, module, exports) {\n\n/**\n * Matcher.\n */\n\nvar matcher = /\\d{10}/;\n\n\n/**\n * Check whether a string is a second date string.\n *\n * @param {String} string\n * @return {Boolean}\n */\n\nexports.is = function (string) {\n  return matcher.test(string);\n};\n\n\n/**\n * Convert a second string to a date.\n *\n * @param {String} seconds\n * @return {Date}\n */\n\nexports.parse = function (seconds) {\n  var millis = parseInt(seconds, 10) * 1000;\n  return new Date(millis);\n};\n}, {}],\n32: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar inherit = require('./utils').inherit;\nvar Facade = require('./facade');\n\n/**\n * Expose `Alias` facade.\n */\n\nmodule.exports = Alias;\n\n/**\n * Initialize a new `Alias` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary\n *   @property {String} from\n *   @property {String} to\n *   @property {Object} options\n */\n\nfunction Alias (dictionary) {\n  Facade.call(this, dictionary);\n}\n\n/**\n * Inherit from `Facade`.\n */\n\ninherit(Alias, Facade);\n\n/**\n * Return type of facade.\n *\n * @return {String}\n */\n\nAlias.prototype.type =\nAlias.prototype.action = function () {\n  return 'alias';\n};\n\n/**\n * Get `previousId`.\n *\n * @return {Mixed}\n * @api public\n */\n\nAlias.prototype.from =\nAlias.prototype.previousId = function(){\n  return this.field('previousId')\n    || this.field('from');\n};\n\n/**\n * Get `userId`.\n *\n * @return {String}\n * @api public\n */\n\nAlias.prototype.to =\nAlias.prototype.userId = function(){\n  return this.field('userId')\n    || this.field('to');\n};\n\n}, {\"./utils\":40,\"./facade\":31}],\n33: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar inherit = require('./utils').inherit;\nvar address = require('./address');\nvar isEmail = require('is-email');\nvar newDate = require('new-date');\nvar Facade = require('./facade');\n\n/**\n * Expose `Group` facade.\n */\n\nmodule.exports = Group;\n\n/**\n * Initialize a new `Group` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary\n *   @param {String} userId\n *   @param {String} groupId\n *   @param {Object} properties\n *   @param {Object} options\n */\n\nfunction Group (dictionary) {\n  Facade.call(this, dictionary);\n}\n\n/**\n * Inherit from `Facade`\n */\n\ninherit(Group, Facade);\n\n/**\n * Get the facade's action.\n */\n\nGroup.prototype.type =\nGroup.prototype.action = function () {\n  return 'group';\n};\n\n/**\n * Setup some basic proxies.\n */\n\nGroup.prototype.groupId = Facade.field('groupId');\n\n/**\n * Get created or createdAt.\n *\n * @return {Date}\n */\n\nGroup.prototype.created = function(){\n  var created = this.proxy('traits.createdAt')\n    || this.proxy('traits.created')\n    || this.proxy('properties.createdAt')\n    || this.proxy('properties.created');\n\n  if (created) return newDate(created);\n};\n\n/**\n * Get the group's email, falling back to the group ID if it's a valid email.\n *\n * @return {String}\n */\n\nGroup.prototype.email = function () {\n  var email = this.proxy('traits.email');\n  if (email) return email;\n  var groupId = this.groupId();\n  if (isEmail(groupId)) return groupId;\n};\n\n/**\n * Get the group's traits.\n *\n * @param {Object} aliases\n * @return {Object}\n */\n\nGroup.prototype.traits = function (aliases) {\n  var ret = this.properties();\n  var id = this.groupId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (var alias in aliases) {\n    var value = null == this[alias]\n      ? this.proxy('traits.' + alias)\n      : this[alias]();\n    if (null == value) continue;\n    ret[aliases[alias]] = value;\n    delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * Special traits.\n */\n\nGroup.prototype.name = Facade.proxy('traits.name');\nGroup.prototype.industry = Facade.proxy('traits.industry');\nGroup.prototype.employees = Facade.proxy('traits.employees');\n\n/**\n * Get traits or properties.\n *\n * TODO: remove me\n *\n * @return {Object}\n */\n\nGroup.prototype.properties = function(){\n  return this.field('traits')\n    || this.field('properties')\n    || {};\n};\n\n}, {\"./utils\":40,\"./address\":41,\"is-email\":53,\"new-date\":43,\"./facade\":31}],\n53: [function(require, module, exports) {\n\n/**\n * Expose `isEmail`.\n */\n\nmodule.exports = isEmail;\n\n\n/**\n * Email address matcher.\n */\n\nvar matcher = /.+\\@.+\\..+/;\n\n\n/**\n * Loosely validate an email address.\n *\n * @param {String} string\n * @return {Boolean}\n */\n\nfunction isEmail (string) {\n  return matcher.test(string);\n}\n}, {}],\n34: [function(require, module, exports) {\n\nvar address = require('./address');\nvar Facade = require('./facade');\nvar isEmail = require('is-email');\nvar newDate = require('new-date');\nvar utils = require('./utils');\nvar get = require('obj-case');\nvar trim = require('trim');\nvar inherit = utils.inherit;\nvar clone = utils.clone;\nvar type = utils.type;\n\n/**\n * Expose `Idenfity` facade.\n */\n\nmodule.exports = Identify;\n\n/**\n * Initialize a new `Identify` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary\n *   @param {String} userId\n *   @param {String} sessionId\n *   @param {Object} traits\n *   @param {Object} options\n */\n\nfunction Identify (dictionary) {\n  Facade.call(this, dictionary);\n}\n\n/**\n * Inherit from `Facade`.\n */\n\ninherit(Identify, Facade);\n\n/**\n * Get the facade's action.\n */\n\nIdentify.prototype.type =\nIdentify.prototype.action = function () {\n  return 'identify';\n};\n\n/**\n * Get the user's traits.\n *\n * @param {Object} aliases\n * @return {Object}\n */\n\nIdentify.prototype.traits = function (aliases) {\n  var ret = this.field('traits') || {};\n  var id = this.userId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (var alias in aliases) {\n    var value = null == this[alias]\n      ? this.proxy('traits.' + alias)\n      : this[alias]();\n    if (null == value) continue;\n    ret[aliases[alias]] = value;\n    if (alias !== aliases[alias]) delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * Get the user's email, falling back to their user ID if it's a valid email.\n *\n * @return {String}\n */\n\nIdentify.prototype.email = function () {\n  var email = this.proxy('traits.email');\n  if (email) return email;\n\n  var userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the user's created date, optionally looking for `createdAt` since lots of\n * people do that instead.\n *\n * @return {Date or Undefined}\n */\n\nIdentify.prototype.created = function () {\n  var created = this.proxy('traits.created') || this.proxy('traits.createdAt');\n  if (created) return newDate(created);\n};\n\n/**\n * Get the company created date.\n *\n * @return {Date or undefined}\n */\n\nIdentify.prototype.companyCreated = function(){\n  var created = this.proxy('traits.company.created')\n    || this.proxy('traits.company.createdAt');\n\n  if (created) return newDate(created);\n};\n\n/**\n * Get the user's name, optionally combining a first and last name if that's all\n * that was provided.\n *\n * @return {String or Undefined}\n */\n\nIdentify.prototype.name = function () {\n  var name = this.proxy('traits.name');\n  if (typeof name === 'string') return trim(name);\n\n  var firstName = this.firstName();\n  var lastName = this.lastName();\n  if (firstName && lastName) return trim(firstName + ' ' + lastName);\n};\n\n/**\n * Get the user's first name, optionally splitting it out of a single name if\n * that's all that was provided.\n *\n * @return {String or Undefined}\n */\n\nIdentify.prototype.firstName = function () {\n  var firstName = this.proxy('traits.firstName');\n  if (typeof firstName === 'string') return trim(firstName);\n\n  var name = this.proxy('traits.name');\n  if (typeof name === 'string') return trim(name).split(' ')[0];\n};\n\n/**\n * Get the user's last name, optionally splitting it out of a single name if\n * that's all that was provided.\n *\n * @return {String or Undefined}\n */\n\nIdentify.prototype.lastName = function () {\n  var lastName = this.proxy('traits.lastName');\n  if (typeof lastName === 'string') return trim(lastName);\n\n  var name = this.proxy('traits.name');\n  if (typeof name !== 'string') return;\n\n  var space = trim(name).indexOf(' ');\n  if (space === -1) return;\n\n  return trim(name.substr(space + 1));\n};\n\n/**\n * Get the user's unique id.\n *\n * @return {String or undefined}\n */\n\nIdentify.prototype.uid = function(){\n  return this.userId()\n    || this.username()\n    || this.email();\n};\n\n/**\n * Get description.\n *\n * @return {String}\n */\n\nIdentify.prototype.description = function(){\n  return this.proxy('traits.description')\n    || this.proxy('traits.background');\n};\n\n/**\n * Get the age.\n *\n * If the age is not explicitly set\n * the method will compute it from `.birthday()`\n * if possible.\n *\n * @return {Number}\n */\n\nIdentify.prototype.age = function(){\n  var date = this.birthday();\n  var age = get(this.traits(), 'age');\n  if (null != age) return age;\n  if ('date' != type(date)) return;\n  var now = new Date;\n  return now.getFullYear() - date.getFullYear();\n};\n\n/**\n * Get the avatar.\n *\n * .photoUrl needed because help-scout\n * implementation uses `.avatar || .photoUrl`.\n *\n * .avatarUrl needed because trakio uses it.\n *\n * @return {Mixed}\n */\n\nIdentify.prototype.avatar = function(){\n  var traits = this.traits();\n  return get(traits, 'avatar')\n    || get(traits, 'photoUrl')\n    || get(traits, 'avatarUrl');\n};\n\n/**\n * Get the position.\n *\n * .jobTitle needed because some integrations use it.\n *\n * @return {Mixed}\n */\n\nIdentify.prototype.position = function(){\n  var traits = this.traits();\n  return get(traits, 'position') || get(traits, 'jobTitle');\n};\n\n/**\n * Setup sme basic \"special\" trait proxies.\n */\n\nIdentify.prototype.username = Facade.proxy('traits.username');\nIdentify.prototype.website = Facade.one('traits.website');\nIdentify.prototype.websites = Facade.multi('traits.website');\nIdentify.prototype.phone = Facade.one('traits.phone');\nIdentify.prototype.phones = Facade.multi('traits.phone');\nIdentify.prototype.address = Facade.proxy('traits.address');\nIdentify.prototype.gender = Facade.proxy('traits.gender');\nIdentify.prototype.birthday = Facade.proxy('traits.birthday');\n\n}, {\"./address\":41,\"./facade\":31,\"is-email\":53,\"new-date\":43,\"./utils\":40,\"obj-case\":42,\"trim\":54}],\n54: [function(require, module, exports) {\n\nexports = module.exports = trim;\n\nfunction trim(str){\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  if (str.trimLeft) return str.trimLeft();\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  if (str.trimRight) return str.trimRight();\n  return str.replace(/\\s*$/, '');\n};\n\n}, {}],\n35: [function(require, module, exports) {\n\nvar inherit = require('./utils').inherit;\nvar clone = require('./utils').clone;\nvar type = require('./utils').type;\nvar Facade = require('./facade');\nvar Identify = require('./identify');\nvar isEmail = require('is-email');\nvar get = require('obj-case');\n\n/**\n * Expose `Track` facade.\n */\n\nmodule.exports = Track;\n\n/**\n * Initialize a new `Track` facade with a `dictionary` of arguments.\n *\n * @param {object} dictionary\n *   @property {String} event\n *   @property {String} userId\n *   @property {String} sessionId\n *   @property {Object} properties\n *   @property {Object} options\n */\n\nfunction Track (dictionary) {\n  Facade.call(this, dictionary);\n}\n\n/**\n * Inherit from `Facade`.\n */\n\ninherit(Track, Facade);\n\n/**\n * Return the facade's action.\n *\n * @return {String}\n */\n\nTrack.prototype.type =\nTrack.prototype.action = function () {\n  return 'track';\n};\n\n/**\n * Setup some basic proxies.\n */\n\nTrack.prototype.event = Facade.field('event');\nTrack.prototype.value = Facade.proxy('properties.value');\n\n/**\n * Misc\n */\n\nTrack.prototype.category = Facade.proxy('properties.category');\n\n/**\n * Ecommerce\n */\n\nTrack.prototype.id = Facade.proxy('properties.id');\nTrack.prototype.sku = Facade.proxy('properties.sku');\nTrack.prototype.tax = Facade.proxy('properties.tax');\nTrack.prototype.name = Facade.proxy('properties.name');\nTrack.prototype.price = Facade.proxy('properties.price');\nTrack.prototype.total = Facade.proxy('properties.total');\nTrack.prototype.coupon = Facade.proxy('properties.coupon');\nTrack.prototype.shipping = Facade.proxy('properties.shipping');\nTrack.prototype.discount = Facade.proxy('properties.discount');\n\n/**\n * Description\n */\n\nTrack.prototype.description = Facade.proxy('properties.description');\n\n/**\n * Plan\n */\n\nTrack.prototype.plan = Facade.proxy('properties.plan');\n\n/**\n * Order id.\n *\n * @return {String}\n * @api public\n */\n\nTrack.prototype.orderId = function(){\n  return this.proxy('properties.id')\n    || this.proxy('properties.orderId');\n};\n\n/**\n * Get subtotal.\n *\n * @return {Number}\n */\n\nTrack.prototype.subtotal = function(){\n  var subtotal = get(this.properties(), 'subtotal');\n  var total = this.total();\n  var n;\n\n  if (subtotal) return subtotal;\n  if (!total) return 0;\n  if (n = this.tax()) total -= n;\n  if (n = this.shipping()) total -= n;\n  if (n = this.discount()) total += n;\n\n  return total;\n};\n\n/**\n * Get products.\n *\n * @return {Array}\n */\n\nTrack.prototype.products = function(){\n  var props = this.properties();\n  var products = get(props, 'products');\n  return 'array' == type(products)\n    ? products\n    : [];\n};\n\n/**\n * Get quantity.\n *\n * @return {Number}\n */\n\nTrack.prototype.quantity = function(){\n  var props = this.obj.properties || {};\n  return props.quantity || 1;\n};\n\n/**\n * Get currency.\n *\n * @return {String}\n */\n\nTrack.prototype.currency = function(){\n  var props = this.obj.properties || {};\n  return props.currency || 'USD';\n};\n\n/**\n * BACKWARDS COMPATIBILITY: should probably re-examine where these come from.\n */\n\nTrack.prototype.referrer = Facade.proxy('properties.referrer');\nTrack.prototype.query = Facade.proxy('options.query');\n\n/**\n * Get the call's properties.\n *\n * @param {Object} aliases\n * @return {Object}\n */\n\nTrack.prototype.properties = function (aliases) {\n  var ret = this.field('properties') || {};\n  aliases = aliases || {};\n\n  for (var alias in aliases) {\n    var value = null == this[alias]\n      ? this.proxy('properties.' + alias)\n      : this[alias]();\n    if (null == value) continue;\n    ret[aliases[alias]] = value;\n    delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * Get the call's username.\n *\n * @return {String or Undefined}\n */\n\nTrack.prototype.username = function () {\n  return this.proxy('traits.username') ||\n         this.proxy('properties.username') ||\n         this.userId() ||\n         this.sessionId();\n};\n\n/**\n * Get the call's email, using an the user ID if it's a valid email.\n *\n * @return {String or Undefined}\n */\n\nTrack.prototype.email = function () {\n  var email = this.proxy('traits.email');\n  email = email || this.proxy('properties.email');\n  if (email) return email;\n\n  var userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the call's revenue, parsing it from a string with an optional leading\n * dollar sign.\n *\n * For products/services that don't have shipping and are not directly taxed,\n * they only care about tracking `revenue`. These are things like\n * SaaS companies, who sell monthly subscriptions. The subscriptions aren't\n * taxed directly, and since it's a digital product, it has no shipping.\n *\n * The only case where there's a difference between `revenue` and `total`\n * (in the context of analytics) is on ecommerce platforms, where they want\n * the `revenue` function to actually return the `total` (which includes\n * tax and shipping, total = subtotal + tax + shipping). This is probably\n * because on their backend they assume tax and shipping has been applied to\n * the value, and so can get the revenue on their own.\n *\n * @return {Number}\n */\n\nTrack.prototype.revenue = function () {\n  var revenue = this.proxy('properties.revenue');\n  var event = this.event();\n\n  // it's always revenue, unless it's called during an order completion.\n  if (!revenue && event && event.match(/completed ?order/i)) {\n    revenue = this.proxy('properties.total');\n  }\n\n  return currency(revenue);\n};\n\n/**\n * Get cents.\n *\n * @return {Number}\n */\n\nTrack.prototype.cents = function(){\n  var revenue = this.revenue();\n  return 'number' != typeof revenue\n    ? this.value() || 0\n    : revenue * 100;\n};\n\n/**\n * A utility to turn the pieces of a track call into an identify. Used for\n * integrations with super properties or rate limits.\n *\n * TODO: remove me.\n *\n * @return {Facade}\n */\n\nTrack.prototype.identify = function () {\n  var json = this.json();\n  json.traits = this.traits();\n  return new Identify(json);\n};\n\n/**\n * Get float from currency value.\n *\n * @param {Mixed} val\n * @return {Number}\n */\n\nfunction currency(val) {\n  if (!val) return;\n  if (typeof val === 'number') return val;\n  if (typeof val !== 'string') return;\n\n  val = val.replace(/\\$/g, '');\n  val = parseFloat(val);\n\n  if (!isNaN(val)) return val;\n}\n\n}, {\"./utils\":40,\"./facade\":31,\"./identify\":34,\"is-email\":53,\"obj-case\":42}],\n36: [function(require, module, exports) {\n\nvar inherit = require('./utils').inherit;\nvar Facade = require('./facade');\nvar Track = require('./track');\n\n/**\n * Expose `Page` facade\n */\n\nmodule.exports = Page;\n\n/**\n * Initialize new `Page` facade with `dictionary`.\n *\n * @param {Object} dictionary\n *   @param {String} category\n *   @param {String} name\n *   @param {Object} traits\n *   @param {Object} options\n */\n\nfunction Page(dictionary){\n  Facade.call(this, dictionary);\n}\n\n/**\n * Inherit from `Facade`\n */\n\ninherit(Page, Facade);\n\n/**\n * Get the facade's action.\n *\n * @return {String}\n */\n\nPage.prototype.type =\nPage.prototype.action = function(){\n  return 'page';\n};\n\n/**\n * Fields\n */\n\nPage.prototype.category = Facade.field('category');\nPage.prototype.name = Facade.field('name');\n\n/**\n * Proxies.\n */\n\nPage.prototype.title = Facade.proxy('properties.title');\nPage.prototype.path = Facade.proxy('properties.path');\nPage.prototype.url = Facade.proxy('properties.url');\n\n/**\n * Referrer.\n */\n\nPage.prototype.referrer = function(){\n  return this.proxy('properties.referrer')\n    || this.proxy('context.referrer.url');\n};\n\n/**\n * Get the page properties mixing `category` and `name`.\n *\n * @return {Object}\n */\n\nPage.prototype.properties = function(){\n  var props = this.field('properties') || {};\n  var category = this.category();\n  var name = this.name();\n  if (category) props.category = category;\n  if (name) props.name = name;\n  return props;\n};\n\n/**\n * Get the page fullName.\n *\n * @return {String}\n */\n\nPage.prototype.fullName = function(){\n  var category = this.category();\n  var name = this.name();\n  return name && category\n    ? category + ' ' + name\n    : name;\n};\n\n/**\n * Get event with `name`.\n *\n * @return {String}\n */\n\nPage.prototype.event = function(name){\n  return name\n    ? 'Viewed ' + name + ' Page'\n    : 'Loaded a Page';\n};\n\n/**\n * Convert this Page to a Track facade with `name`.\n *\n * @param {String} name\n * @return {Track}\n */\n\nPage.prototype.track = function(name){\n  var props = this.properties();\n  return new Track({\n    event: this.event(name),\n    timestamp: this.timestamp(),\n    context: this.context(),\n    properties: props\n  });\n};\n\n}, {\"./utils\":40,\"./facade\":31,\"./track\":35}],\n37: [function(require, module, exports) {\n\nvar inherit = require('./utils').inherit;\nvar Page = require('./page');\nvar Track = require('./track');\n\n/**\n * Expose `Screen` facade\n */\n\nmodule.exports = Screen;\n\n/**\n * Initialize new `Screen` facade with `dictionary`.\n *\n * @param {Object} dictionary\n *   @param {String} category\n *   @param {String} name\n *   @param {Object} traits\n *   @param {Object} options\n */\n\nfunction Screen(dictionary){\n  Page.call(this, dictionary);\n}\n\n/**\n * Inherit from `Page`\n */\n\ninherit(Screen, Page);\n\n/**\n * Get the facade's action.\n *\n * @return {String}\n * @api public\n */\n\nScreen.prototype.type =\nScreen.prototype.action = function(){\n  return 'screen';\n};\n\n/**\n * Get event with `name`.\n *\n * @param {String} name\n * @return {String}\n * @api public\n */\n\nScreen.prototype.event = function(name){\n  return name\n    ? 'Viewed ' + name + ' Screen'\n    : 'Loaded a Screen';\n};\n\n/**\n * Convert this Screen.\n *\n * @param {String} name\n * @return {Track}\n * @api public\n */\n\nScreen.prototype.track = function(name){\n  var props = this.properties();\n  return new Track({\n    event: this.event(name),\n    timestamp: this.timestamp(),\n    context: this.context(),\n    properties: props\n  });\n};\n\n}, {\"./utils\":40,\"./page\":36,\"./track\":35}],\n10: [function(require, module, exports) {\n\nmodule.exports = function after (times, func) {\n  // After 0, really?\n  if (times <= 0) return func();\n\n  // That's more like it.\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n};\n}, {}],\n11: [function(require, module, exports) {\n\ntry {\n  var bind = require('bind');\n} catch (e) {\n  var bind = require('bind-component');\n}\n\nvar bindAll = require('bind-all');\n\n\n/**\n * Expose `bind`.\n */\n\nmodule.exports = exports = bind;\n\n\n/**\n * Expose `bindAll`.\n */\n\nexports.all = bindAll;\n\n\n/**\n * Expose `bindMethods`.\n */\n\nexports.methods = bindMethods;\n\n\n/**\n * Bind `methods` on `obj` to always be called with the `obj` as context.\n *\n * @param {Object} obj\n * @param {String} methods...\n */\n\nfunction bindMethods (obj, methods) {\n  methods = [].slice.call(arguments, 1);\n  for (var i = 0, method; method = methods[i]; i++) {\n    obj[method] = bind(obj, obj[method]);\n  }\n  return obj;\n}\n}, {\"bind\":55,\"bind-all\":56}],\n55: [function(require, module, exports) {\n/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n\n}, {}],\n56: [function(require, module, exports) {\n\ntry {\n  var bind = require('bind');\n  var type = require('type');\n} catch (e) {\n  var bind = require('bind-component');\n  var type = require('type-component');\n}\n\nmodule.exports = function (obj) {\n  for (var key in obj) {\n    var val = obj[key];\n    if (type(val) === 'function') obj[key] = bind(obj, obj[key]);\n  }\n  return obj;\n};\n}, {\"bind\":55,\"type\":47}],\n12: [function(require, module, exports) {\nvar next = require('next-tick');\n\n\n/**\n * Expose `callback`.\n */\n\nmodule.exports = callback;\n\n\n/**\n * Call an `fn` back synchronously if it exists.\n *\n * @param {Function} fn\n */\n\nfunction callback (fn) {\n  if ('function' === typeof fn) fn();\n}\n\n\n/**\n * Call an `fn` back asynchronously if it exists. If `wait` is ommitted, the\n * `fn` will be called on next tick.\n *\n * @param {Function} fn\n * @param {Number} wait (optional)\n */\n\ncallback.async = function (fn, wait) {\n  if ('function' !== typeof fn) return;\n  if (!wait) return next(fn);\n  setTimeout(fn, wait);\n};\n\n\n/**\n * Symmetry.\n */\n\ncallback.sync = callback;\n\n}, {\"next-tick\":57}],\n57: [function(require, module, exports) {\n\"use strict\"\n\nif (typeof setImmediate == 'function') {\n  module.exports = function(f){ setImmediate(f) }\n}\n// legacy node.js\nelse if (typeof process != 'undefined' && typeof process.nextTick == 'function') {\n  module.exports = process.nextTick\n}\n// fallback for other environments / postMessage behaves badly on IE8\nelse if (typeof window == 'undefined' || window.ActiveXObject || !window.postMessage) {\n  module.exports = function(f){ setTimeout(f) };\n} else {\n  var q = [];\n\n  window.addEventListener('message', function(){\n    var i = 0;\n    while (i < q.length) {\n      try { q[i++](); }\n      catch (e) {\n        q = q.slice(i);\n        window.postMessage('tic!', '*');\n        throw e;\n      }\n    }\n    q.length = 0;\n  }, true);\n\n  module.exports = function(fn){\n    if (!q.length) window.postMessage('tic!', '*');\n    q.push(fn);\n  }\n}\n\n}, {}],\n13: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar type;\n\ntry {\n  type = require('type');\n} catch(e){\n  type = require('type-component');\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = clone;\n\n/**\n * Clones objects.\n *\n * @param {Mixed} any object\n * @api public\n */\n\nfunction clone(obj){\n  switch (type(obj)) {\n    case 'object':\n      var copy = {};\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          copy[key] = clone(obj[key]);\n        }\n      }\n      return copy;\n\n    case 'array':\n      var copy = new Array(obj.length);\n      for (var i = 0, l = obj.length; i < l; i++) {\n        copy[i] = clone(obj[i]);\n      }\n      return copy;\n\n    case 'regexp':\n      // from millermedeiros/amd-utils - MIT\n      var flags = '';\n      flags += obj.multiline ? 'm' : '';\n      flags += obj.global ? 'g' : '';\n      flags += obj.ignoreCase ? 'i' : '';\n      return new RegExp(obj.source, flags);\n\n    case 'date':\n      return new Date(obj.getTime());\n\n    default: // string, number, boolean, …\n      return obj;\n  }\n}\n\n}, {\"type\":47}],\n14: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('bind');\nvar clone = require('clone');\nvar cookie = require('cookie');\nvar debug = require('debug')('analytics.js:cookie');\nvar defaults = require('defaults');\nvar json = require('json');\nvar topDomain = require('top-domain');\n\n\n/**\n * Initialize a new `Cookie` with `options`.\n *\n * @param {Object} options\n */\n\nfunction Cookie(options) {\n  this.options(options);\n}\n\n\n/**\n * Get or set the cookie options.\n *\n * @param {Object} options\n *   @field {Number} maxage (1 year)\n *   @field {String} domain\n *   @field {String} path\n *   @field {Boolean} secure\n */\n\nCookie.prototype.options = function(options) {\n  if (arguments.length === 0) return this._options;\n\n  options = options || {};\n\n  var domain = '.' + topDomain(window.location.href);\n  if (domain === '.') domain = null;\n\n  this._options = defaults(options, {\n    // default to a year\n    maxage: 31536000000,\n    path: '/',\n    domain: domain\n  });\n\n  // http://curl.haxx.se/rfc/cookie_spec.html\n  // https://publicsuffix.org/list/effective_tld_names.dat\n  //\n  // try setting a dummy cookie with the options\n  // if the cookie isn't set, it probably means\n  // that the domain is on the public suffix list\n  // like myapp.herokuapp.com or localhost / ip.\n  this.set('ajs:test', true);\n  if (!this.get('ajs:test')) {\n    debug('fallback to domain=null');\n    this._options.domain = null;\n  }\n  this.remove('ajs:test');\n};\n\n\n/**\n * Set a `key` and `value` in our cookie.\n *\n * @param {String} key\n * @param {Object} value\n * @return {Boolean} saved\n */\n\nCookie.prototype.set = function(key, value) {\n  try {\n    value = json.stringify(value);\n    cookie(key, value, clone(this._options));\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\n\n/**\n * Get a value from our cookie by `key`.\n *\n * @param {String} key\n * @return {Object} value\n */\n\nCookie.prototype.get = function(key) {\n  try {\n    var value = cookie(key);\n    value = value ? json.parse(value) : null;\n    return value;\n  } catch (e) {\n    return null;\n  }\n};\n\n\n/**\n * Remove a value from our cookie by `key`.\n *\n * @param {String} key\n * @return {Boolean} removed\n */\n\nCookie.prototype.remove = function(key) {\n  try {\n    cookie(key, null, clone(this._options));\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\n\n/**\n * Expose the cookie singleton.\n */\n\nmodule.exports = bind.all(new Cookie());\n\n\n/**\n * Expose the `Cookie` constructor.\n */\n\nmodule.exports.Cookie = Cookie;\n\n}, {\"bind\":11,\"clone\":13,\"cookie\":58,\"debug\":15,\"defaults\":16,\"json\":59,\"top-domain\":60}],\n58: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('cookie');\n\n/**\n * Set or get cookie `name` with `value` and `options` object.\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {Mixed}\n * @api public\n */\n\nmodule.exports = function(name, value, options){\n  switch (arguments.length) {\n    case 3:\n    case 2:\n      return set(name, value, options);\n    case 1:\n      return get(name);\n    default:\n      return all();\n  }\n};\n\n/**\n * Set cookie `name` to `value`.\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @api private\n */\n\nfunction set(name, value, options) {\n  options = options || {};\n  var str = encode(name) + '=' + encode(value);\n\n  if (null == value) options.maxage = -1;\n\n  if (options.maxage) {\n    options.expires = new Date(+new Date + options.maxage);\n  }\n\n  if (options.path) str += '; path=' + options.path;\n  if (options.domain) str += '; domain=' + options.domain;\n  if (options.expires) str += '; expires=' + options.expires.toUTCString();\n  if (options.secure) str += '; secure';\n\n  document.cookie = str;\n}\n\n/**\n * Return all cookies.\n *\n * @return {Object}\n * @api private\n */\n\nfunction all() {\n  return parse(document.cookie);\n}\n\n/**\n * Get cookie `name`.\n *\n * @param {String} name\n * @return {String}\n * @api private\n */\n\nfunction get(name) {\n  return all()[name];\n}\n\n/**\n * Parse cookie `str`.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parse(str) {\n  var obj = {};\n  var pairs = str.split(/ *; */);\n  var pair;\n  if ('' == pairs[0]) return obj;\n  for (var i = 0; i < pairs.length; ++i) {\n    pair = pairs[i].split('=');\n    obj[decode(pair[0])] = decode(pair[1]);\n  }\n  return obj;\n}\n\n/**\n * Encode.\n */\n\nfunction encode(value){\n  try {\n    return encodeURIComponent(value);\n  } catch (e) {\n    debug('error `encode(%o)` - %o', value, e)\n  }\n}\n\n/**\n * Decode.\n */\n\nfunction decode(value) {\n  try {\n    return decodeURIComponent(value);\n  } catch (e) {\n    debug('error `decode(%o)` - %o', value, e)\n  }\n}\n\n}, {\"debug\":15}],\n15: [function(require, module, exports) {\nif ('undefined' == typeof window) {\n  module.exports = require('./lib/debug');\n} else {\n  module.exports = require('./debug');\n}\n\n}, {\"./lib/debug\":61,\"./debug\":62}],\n61: [function(require, module, exports) {\n/**\n * Module dependencies.\n */\n\nvar tty = require('tty');\n\n/**\n * Expose `debug()` as the module.\n */\n\nmodule.exports = debug;\n\n/**\n * Enabled debuggers.\n */\n\nvar names = []\n  , skips = [];\n\n(process.env.DEBUG || '')\n  .split(/[\\s,]+/)\n  .forEach(function(name){\n    name = name.replace('*', '.*?');\n    if (name[0] === '-') {\n      skips.push(new RegExp('^' + name.substr(1) + '$'));\n    } else {\n      names.push(new RegExp('^' + name + '$'));\n    }\n  });\n\n/**\n * Colors.\n */\n\nvar colors = [6, 2, 3, 4, 5, 1];\n\n/**\n * Previous debug() call.\n */\n\nvar prev = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Is stdout a TTY? Colored output is disabled when `true`.\n */\n\nvar isatty = tty.isatty(2);\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction color() {\n  return colors[prevColor++ % colors.length];\n}\n\n/**\n * Humanize the given `ms`.\n *\n * @param {Number} m\n * @return {String}\n * @api private\n */\n\nfunction humanize(ms) {\n  var sec = 1000\n    , min = 60 * 1000\n    , hour = 60 * min;\n\n  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';\n  if (ms >= min) return (ms / min).toFixed(1) + 'm';\n  if (ms >= sec) return (ms / sec | 0) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Create a debugger with the given `name`.\n *\n * @param {String} name\n * @return {Type}\n * @api public\n */\n\nfunction debug(name) {\n  function disabled(){}\n  disabled.enabled = false;\n\n  var match = skips.some(function(re){\n    return re.test(name);\n  });\n\n  if (match) return disabled;\n\n  match = names.some(function(re){\n    return re.test(name);\n  });\n\n  if (!match) return disabled;\n  var c = color();\n\n  function colored(fmt) {\n    fmt = coerce(fmt);\n\n    var curr = new Date;\n    var ms = curr - (prev[name] || curr);\n    prev[name] = curr;\n\n    fmt = '  \\u001b[9' + c + 'm' + name + ' '\n      + '\\u001b[3' + c + 'm\\u001b[90m'\n      + fmt + '\\u001b[3' + c + 'm'\n      + ' +' + humanize(ms) + '\\u001b[0m';\n\n    console.error.apply(this, arguments);\n  }\n\n  function plain(fmt) {\n    fmt = coerce(fmt);\n\n    fmt = new Date().toUTCString()\n      + ' ' + name + ' ' + fmt;\n    console.error.apply(this, arguments);\n  }\n\n  colored.enabled = plain.enabled = true;\n\n  return isatty || process.env.DEBUG_COLORS\n    ? colored\n    : plain;\n}\n\n/**\n * Coerce `val`.\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n}, {}],\n62: [function(require, module, exports) {\n\n/**\n * Expose `debug()` as the module.\n */\n\nmodule.exports = debug;\n\n/**\n * Create a debugger with the given `name`.\n *\n * @param {String} name\n * @return {Type}\n * @api public\n */\n\nfunction debug(name) {\n  if (!debug.enabled(name)) return function(){};\n\n  return function(fmt){\n    fmt = coerce(fmt);\n\n    var curr = new Date;\n    var ms = curr - (debug[name] || curr);\n    debug[name] = curr;\n\n    fmt = name\n      + ' '\n      + fmt\n      + ' +' + debug.humanize(ms);\n\n    // This hackery is required for IE8\n    // where `console.log` doesn't have 'apply'\n    window.console\n      && console.log\n      && Function.prototype.apply.call(console.log, console, arguments);\n  }\n}\n\n/**\n * The currently active debug mode names.\n */\n\ndebug.names = [];\ndebug.skips = [];\n\n/**\n * Enables a debug mode by name. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} name\n * @api public\n */\n\ndebug.enable = function(name) {\n  try {\n    localStorage.debug = name;\n  } catch(e){}\n\n  var split = (name || '').split(/[\\s,]+/)\n    , len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    name = split[i].replace('*', '.*?');\n    if (name[0] === '-') {\n      debug.skips.push(new RegExp('^' + name.substr(1) + '$'));\n    }\n    else {\n      debug.names.push(new RegExp('^' + name + '$'));\n    }\n  }\n};\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\ndebug.disable = function(){\n  debug.enable('');\n};\n\n/**\n * Humanize the given `ms`.\n *\n * @param {Number} m\n * @return {String}\n * @api private\n */\n\ndebug.humanize = function(ms) {\n  var sec = 1000\n    , min = 60 * 1000\n    , hour = 60 * min;\n\n  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';\n  if (ms >= min) return (ms / min).toFixed(1) + 'm';\n  if (ms >= sec) return (ms / sec | 0) + 's';\n  return ms + 'ms';\n};\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\ndebug.enabled = function(name) {\n  for (var i = 0, len = debug.skips.length; i < len; i++) {\n    if (debug.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (var i = 0, len = debug.names.length; i < len; i++) {\n    if (debug.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Coerce `val`.\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n// persist\n\ntry {\n  if (window.localStorage) debug.enable(localStorage.debug);\n} catch(e){}\n\n}, {}],\n16: [function(require, module, exports) {\n'use strict';\n\n/**\n * Merge default values.\n *\n * @param {Object} dest\n * @param {Object} defaults\n * @return {Object}\n * @api public\n */\nvar defaults = function (dest, src, recursive) {\n  for (var prop in src) {\n    if (recursive && dest[prop] instanceof Object && src[prop] instanceof Object) {\n      dest[prop] = defaults(dest[prop], src[prop], true);\n    } else if (! (prop in dest)) {\n      dest[prop] = src[prop];\n    }\n  }\n\n  return dest;\n};\n\n/**\n * Expose `defaults`.\n */\nmodule.exports = defaults;\n\n}, {}],\n59: [function(require, module, exports) {\n\nvar json = window.JSON || {};\nvar stringify = json.stringify;\nvar parse = json.parse;\n\nmodule.exports = parse && stringify\n  ? JSON\n  : require('json-fallback');\n\n}, {\"json-fallback\":63}],\n63: [function(require, module, exports) {\n/*\n    json2.js\n    2014-02-04\n\n    Public Domain.\n\n    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n\n    See http://www.JSON.org/js.html\n\n\n    This code should be minified before deployment.\n    See http://javascript.crockford.com/jsmin.html\n\n    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n    NOT CONTROL.\n\n\n    This file creates a global JSON object containing two methods: stringify\n    and parse.\n\n        JSON.stringify(value, replacer, space)\n            value       any JavaScript value, usually an object or array.\n\n            replacer    an optional parameter that determines how object\n                        values are stringified for objects. It can be a\n                        function or an array of strings.\n\n            space       an optional parameter that specifies the indentation\n                        of nested structures. If it is omitted, the text will\n                        be packed without extra whitespace. If it is a number,\n                        it will specify the number of spaces to indent at each\n                        level. If it is a string (such as '\\t' or '&nbsp;'),\n                        it contains the characters used to indent at each level.\n\n            This method produces a JSON text from a JavaScript value.\n\n            When an object value is found, if the object contains a toJSON\n            method, its toJSON method will be called and the result will be\n            stringified. A toJSON method does not serialize: it returns the\n            value represented by the name/value pair that should be serialized,\n            or undefined if nothing should be serialized. The toJSON method\n            will be passed the key associated with the value, and this will be\n            bound to the value\n\n            For example, this would serialize Dates as ISO strings.\n\n                Date.prototype.toJSON = function (key) {\n                    function f(n) {\n                        // Format integers to have at least two digits.\n                        return n < 10 ? '0' + n : n;\n                    }\n\n                    return this.getUTCFullYear()   + '-' +\n                         f(this.getUTCMonth() + 1) + '-' +\n                         f(this.getUTCDate())      + 'T' +\n                         f(this.getUTCHours())     + ':' +\n                         f(this.getUTCMinutes())   + ':' +\n                         f(this.getUTCSeconds())   + 'Z';\n                };\n\n            You can provide an optional replacer method. It will be passed the\n            key and value of each member, with this bound to the containing\n            object. The value that is returned from your method will be\n            serialized. If your method returns undefined, then the member will\n            be excluded from the serialization.\n\n            If the replacer parameter is an array of strings, then it will be\n            used to select the members to be serialized. It filters the results\n            such that only members with keys listed in the replacer array are\n            stringified.\n\n            Values that do not have JSON representations, such as undefined or\n            functions, will not be serialized. Such values in objects will be\n            dropped; in arrays they will be replaced with null. You can use\n            a replacer function to replace those with JSON values.\n            JSON.stringify(undefined) returns undefined.\n\n            The optional space parameter produces a stringification of the\n            value that is filled with line breaks and indentation to make it\n            easier to read.\n\n            If the space parameter is a non-empty string, then that string will\n            be used for indentation. If the space parameter is a number, then\n            the indentation will be that many spaces.\n\n            Example:\n\n            text = JSON.stringify(['e', {pluribus: 'unum'}]);\n            // text is '[\"e\",{\"pluribus\":\"unum\"}]'\n\n\n            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\\t');\n            // text is '[\\n\\t\"e\",\\n\\t{\\n\\t\\t\"pluribus\": \"unum\"\\n\\t}\\n]'\n\n            text = JSON.stringify([new Date()], function (key, value) {\n                return this[key] instanceof Date ?\n                    'Date(' + this[key] + ')' : value;\n            });\n            // text is '[\"Date(---current time---)\"]'\n\n\n        JSON.parse(text, reviver)\n            This method parses a JSON text to produce an object or array.\n            It can throw a SyntaxError exception.\n\n            The optional reviver parameter is a function that can filter and\n            transform the results. It receives each of the keys and values,\n            and its return value is used instead of the original value.\n            If it returns what it received, then the structure is not modified.\n            If it returns undefined then the member is deleted.\n\n            Example:\n\n            // Parse the text. Values that look like ISO date strings will\n            // be converted to Date objects.\n\n            myData = JSON.parse(text, function (key, value) {\n                var a;\n                if (typeof value === 'string') {\n                    a =\n/^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\n                    if (a) {\n                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\n                            +a[5], +a[6]));\n                    }\n                }\n                return value;\n            });\n\n            myData = JSON.parse('[\"Date(09/09/2001)\"]', function (key, value) {\n                var d;\n                if (typeof value === 'string' &&\n                        value.slice(0, 5) === 'Date(' &&\n                        value.slice(-1) === ')') {\n                    d = new Date(value.slice(5, -1));\n                    if (d) {\n                        return d;\n                    }\n                }\n                return value;\n            });\n\n\n    This is a reference implementation. You are free to copy, modify, or\n    redistribute.\n*/\n\n/*jslint evil: true, regexp: true */\n\n/*members \"\", \"\\b\", \"\\t\", \"\\n\", \"\\f\", \"\\r\", \"\\\"\", JSON, \"\\\\\", apply,\n    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,\n    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,\n    lastIndex, length, parse, prototype, push, replace, slice, stringify,\n    test, toJSON, toString, valueOf\n*/\n\n\n// Create a JSON object only if one does not already exist. We create the\n// methods in a closure to avoid creating global variables.\n\n(function () {\n    'use strict';\n\n    var JSON = module.exports = {};\n\n    function f(n) {\n        // Format integers to have at least two digits.\n        return n < 10 ? '0' + n : n;\n    }\n\n    if (typeof Date.prototype.toJSON !== 'function') {\n\n        Date.prototype.toJSON = function () {\n\n            return isFinite(this.valueOf())\n                ? this.getUTCFullYear()     + '-' +\n                    f(this.getUTCMonth() + 1) + '-' +\n                    f(this.getUTCDate())      + 'T' +\n                    f(this.getUTCHours())     + ':' +\n                    f(this.getUTCMinutes())   + ':' +\n                    f(this.getUTCSeconds())   + 'Z'\n                : null;\n        };\n\n        String.prototype.toJSON      =\n            Number.prototype.toJSON  =\n            Boolean.prototype.toJSON = function () {\n                return this.valueOf();\n            };\n    }\n\n    var cx,\n        escapable,\n        gap,\n        indent,\n        meta,\n        rep;\n\n\n    function quote(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n            var c = meta[a];\n            return typeof c === 'string'\n                ? c\n                : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + '\"' : '\"' + string + '\"';\n    }\n\n\n    function str(key, holder) {\n\n// Produce a string from holder[key].\n\n        var i,          // The loop counter.\n            k,          // The member key.\n            v,          // The member value.\n            length,\n            mind = gap,\n            partial,\n            value = holder[key];\n\n// If the value has a toJSON method, call it to obtain a replacement value.\n\n        if (value && typeof value === 'object' &&\n                typeof value.toJSON === 'function') {\n            value = value.toJSON(key);\n        }\n\n// If we were called with a replacer function, then call the replacer to\n// obtain a replacement value.\n\n        if (typeof rep === 'function') {\n            value = rep.call(holder, key, value);\n        }\n\n// What happens next depends on the value's type.\n\n        switch (typeof value) {\n        case 'string':\n            return quote(value);\n\n        case 'number':\n\n// JSON numbers must be finite. Encode non-finite numbers as null.\n\n            return isFinite(value) ? String(value) : 'null';\n\n        case 'boolean':\n        case 'null':\n\n// If the value is a boolean or null, convert it to a string. Note:\n// typeof null does not produce 'null'. The case is included here in\n// the remote chance that this gets fixed someday.\n\n            return String(value);\n\n// If the type is 'object', we might be dealing with an object or an array or\n// null.\n\n        case 'object':\n\n// Due to a specification blunder in ECMAScript, typeof null is 'object',\n// so watch out for that case.\n\n            if (!value) {\n                return 'null';\n            }\n\n// Make an array to hold the partial results of stringifying this object value.\n\n            gap += indent;\n            partial = [];\n\n// Is the value an array?\n\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n\n// The value is an array. Stringify every element. Use null as a placeholder\n// for non-JSON values.\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n\n// Join all of the elements together, separated with commas, and wrap them in\n// brackets.\n\n                v = partial.length === 0\n                    ? '[]'\n                    : gap\n                    ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']'\n                    : '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n\n// If the replacer is an array, use it to select the members to be stringified.\n\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    if (typeof rep[i] === 'string') {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            } else {\n\n// Otherwise, iterate through all of the keys in the object.\n\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n\n// Join all of the member texts together, separated with commas,\n// and wrap them in braces.\n\n            v = partial.length === 0\n                ? '{}'\n                : gap\n                ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}'\n                : '{' + partial.join(',') + '}';\n            gap = mind;\n            return v;\n        }\n    }\n\n// If the JSON object does not yet have a stringify method, give it one.\n\n    if (typeof JSON.stringify !== 'function') {\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n        meta = {    // table of character substitutions\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"' : '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        };\n        JSON.stringify = function (value, replacer, space) {\n\n// The stringify method takes a value and an optional replacer, and an optional\n// space parameter, and returns a JSON text. The replacer can be a function\n// that can replace values, or an array of strings that will select the keys.\n// A default replacer method can be provided. Use of the space parameter can\n// produce text that is more easily readable.\n\n            var i;\n            gap = '';\n            indent = '';\n\n// If the space parameter is a number, make an indent string containing that\n// many spaces.\n\n            if (typeof space === 'number') {\n                for (i = 0; i < space; i += 1) {\n                    indent += ' ';\n                }\n\n// If the space parameter is a string, it will be used as the indent string.\n\n            } else if (typeof space === 'string') {\n                indent = space;\n            }\n\n// If there is a replacer, it must be a function or an array.\n// Otherwise, throw an error.\n\n            rep = replacer;\n            if (replacer && typeof replacer !== 'function' &&\n                    (typeof replacer !== 'object' ||\n                    typeof replacer.length !== 'number')) {\n                throw new Error('JSON.stringify');\n            }\n\n// Make a fake root object containing our value under the key of ''.\n// Return the result of stringifying the value.\n\n            return str('', {'': value});\n        };\n    }\n\n\n// If the JSON object does not yet have a parse method, give it one.\n\n    if (typeof JSON.parse !== 'function') {\n        cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n        JSON.parse = function (text, reviver) {\n\n// The parse method takes a text and an optional reviver function, and returns\n// a JavaScript value if the text is a valid JSON text.\n\n            var j;\n\n            function walk(holder, key) {\n\n// The walk method is used to recursively walk the resulting structure so\n// that modifications can be made.\n\n                var k, v, value = holder[key];\n                if (value && typeof value === 'object') {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            } else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n\n\n// Parsing happens in four stages. In the first stage, we replace certain\n// Unicode characters with escape sequences. JavaScript handles many characters\n// incorrectly, either silently deleting them, or treating them as line endings.\n\n            text = String(text);\n            cx.lastIndex = 0;\n            if (cx.test(text)) {\n                text = text.replace(cx, function (a) {\n                    return '\\\\u' +\n                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n\n// In the second stage, we run the text against regular expressions that look\n// for non-JSON patterns. We are especially concerned with '()' and 'new'\n// because they can cause invocation, and '=' because it can cause mutation.\n// But just to be safe, we want to reject all unexpected forms.\n\n// We split the second stage into 4 regexp operations in order to work around\n// crippling inefficiencies in IE's and Safari's regexp engines. First we\n// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n// replace all simple value tokens with ']' characters. Third, we delete all\n// open brackets that follow a colon or comma or that begin the text. Finally,\n// we look to see that the remaining characters are only whitespace or ']' or\n// ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n\n            if (/^[\\],:{}\\s]*$/\n                    .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n                        .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n                        .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n\n// In the third stage we use the eval function to compile the text into a\n// JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n// in JavaScript: it can begin a block or an object literal. We wrap the text\n// in parens to eliminate the ambiguity.\n\n                j = eval('(' + text + ')');\n\n// In the optional fourth stage, we recursively walk the new structure, passing\n// each name/value pair to a reviver function for possible transformation.\n\n                return typeof reviver === 'function'\n                    ? walk({'': j}, '')\n                    : j;\n            }\n\n// If the text is not JSON parseable, then a SyntaxError is thrown.\n\n            throw new SyntaxError('JSON.parse');\n        };\n    }\n}());\n\n}, {}],\n60: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar parse = require('url').parse;\nvar cookie = require('cookie');\n\n/**\n * Expose `domain`\n */\n\nexports = module.exports = domain;\n\n/**\n * Expose `cookie` for testing.\n */\n\nexports.cookie = cookie;\n\n/**\n * Get the top domain.\n *\n * The function constructs the levels of domain\n * and attempts to set a global cookie on each one\n * when it succeeds it returns the top level domain.\n *\n * The method returns an empty string when the hostname\n * is an ip or `localhost`.\n *\n * Example levels:\n *\n *      domain.levels('http://www.google.co.uk');\n *      // => [\"co.uk\", \"google.co.uk\", \"www.google.co.uk\"]\n * \n * Example:\n * \n *      domain('http://localhost:3000/baz');\n *      // => ''\n *      domain('http://dev:3000/baz');\n *      // => ''\n *      domain('http://127.0.0.1:3000/baz');\n *      // => ''\n *      domain('http://segment.io/baz');\n *      // => 'segment.io'\n * \n * @param {String} url\n * @return {String}\n * @api public\n */\n\nfunction domain(url){\n  var cookie = exports.cookie;\n  var levels = exports.levels(url);\n\n  // Lookup the real top level one.\n  for (var i = 0; i < levels.length; ++i) {\n    var cname = '__tld__';\n    var domain = levels[i];\n    var opts = { domain: '.' + domain };\n\n    cookie(cname, 1, opts);\n    if (cookie(cname)) {\n      cookie(cname, null, opts);\n      return domain\n    }\n  }\n\n  return '';\n};\n\n/**\n * Levels returns all levels of the given url.\n *\n * @param {String} url\n * @return {Array}\n * @api public\n */\n\ndomain.levels = function(url){\n  var host = parse(url).hostname;\n  var parts = host.split('.');\n  var last = parts[parts.length-1];\n  var levels = [];\n\n  // Ip address.\n  if (4 == parts.length && parseInt(last, 10) == last) {\n    return levels;\n  }\n\n  // Localhost.\n  if (1 >= parts.length) {\n    return levels;\n  }\n\n  // Create levels.\n  for (var i = parts.length-2; 0 <= i; --i) {\n    levels.push(parts.slice(i).join('.'));\n  }\n\n  return levels;\n};\n\n}, {\"url\":64,\"cookie\":65}],\n64: [function(require, module, exports) {\n\n/**\n * Parse the given `url`.\n *\n * @param {String} str\n * @return {Object}\n * @api public\n */\n\nexports.parse = function(url){\n  var a = document.createElement('a');\n  a.href = url;\n  return {\n    href: a.href,\n    host: a.host || location.host,\n    port: ('0' === a.port || '' === a.port) ? port(a.protocol) : a.port,\n    hash: a.hash,\n    hostname: a.hostname || location.hostname,\n    pathname: a.pathname.charAt(0) != '/' ? '/' + a.pathname : a.pathname,\n    protocol: !a.protocol || ':' == a.protocol ? location.protocol : a.protocol,\n    search: a.search,\n    query: a.search.slice(1)\n  };\n};\n\n/**\n * Check if `url` is absolute.\n *\n * @param {String} url\n * @return {Boolean}\n * @api public\n */\n\nexports.isAbsolute = function(url){\n  return 0 == url.indexOf('//') || !!~url.indexOf('://');\n};\n\n/**\n * Check if `url` is relative.\n *\n * @param {String} url\n * @return {Boolean}\n * @api public\n */\n\nexports.isRelative = function(url){\n  return !exports.isAbsolute(url);\n};\n\n/**\n * Check if `url` is cross domain.\n *\n * @param {String} url\n * @return {Boolean}\n * @api public\n */\n\nexports.isCrossDomain = function(url){\n  url = exports.parse(url);\n  var location = exports.parse(window.location.href);\n  return url.hostname !== location.hostname\n    || url.port !== location.port\n    || url.protocol !== location.protocol;\n};\n\n/**\n * Return default port for `protocol`.\n *\n * @param  {String} protocol\n * @return {String}\n * @api private\n */\nfunction port (protocol){\n  switch (protocol) {\n    case 'http:':\n      return 80;\n    case 'https:':\n      return 443;\n    default:\n      return location.port;\n  }\n}\n\n}, {}],\n65: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('cookie');\n\n/**\n * Set or get cookie `name` with `value` and `options` object.\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {Mixed}\n * @api public\n */\n\nmodule.exports = function(name, value, options){\n  switch (arguments.length) {\n    case 3:\n    case 2:\n      return set(name, value, options);\n    case 1:\n      return get(name);\n    default:\n      return all();\n  }\n};\n\n/**\n * Set cookie `name` to `value`.\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @api private\n */\n\nfunction set(name, value, options) {\n  options = options || {};\n  var str = encode(name) + '=' + encode(value);\n\n  if (null == value) options.maxage = -1;\n\n  if (options.maxage) {\n    options.expires = new Date(+new Date + options.maxage);\n  }\n\n  if (options.path) str += '; path=' + options.path;\n  if (options.domain) str += '; domain=' + options.domain;\n  if (options.expires) str += '; expires=' + options.expires.toUTCString();\n  if (options.secure) str += '; secure';\n\n  document.cookie = str;\n}\n\n/**\n * Return all cookies.\n *\n * @return {Object}\n * @api private\n */\n\nfunction all() {\n  var str;\n  try {\n    str = document.cookie;\n  } catch (err) {\n    if (typeof console !== 'undefined' && typeof console.error === 'function') {\n      console.error(err.stack || err);\n    }\n    return {};\n  }\n  return parse(str);\n}\n\n/**\n * Get cookie `name`.\n *\n * @param {String} name\n * @return {String}\n * @api private\n */\n\nfunction get(name) {\n  return all()[name];\n}\n\n/**\n * Parse cookie `str`.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parse(str) {\n  var obj = {};\n  var pairs = str.split(/ *; */);\n  var pair;\n  if ('' == pairs[0]) return obj;\n  for (var i = 0; i < pairs.length; ++i) {\n    pair = pairs[i].split('=');\n    obj[decode(pair[0])] = decode(pair[1]);\n  }\n  return obj;\n}\n\n/**\n * Encode.\n */\n\nfunction encode(value){\n  try {\n    return encodeURIComponent(value);\n  } catch (e) {\n    debug('error `encode(%o)` - %o', value, e)\n  }\n}\n\n/**\n * Decode.\n */\n\nfunction decode(value) {\n  try {\n    return decodeURIComponent(value);\n  } catch (e) {\n    debug('error `decode(%o)` - %o', value, e)\n  }\n}\n\n}, {\"debug\":15}],\n17: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Entity = require('./entity');\nvar bind = require('bind');\nvar debug = require('debug')('analytics:group');\nvar inherit = require('inherit');\n\n/**\n * Group defaults\n */\n\nGroup.defaults = {\n  persist: true,\n  cookie: {\n    key: 'ajs_group_id'\n  },\n  localStorage: {\n    key: 'ajs_group_properties'\n  }\n};\n\n\n/**\n * Initialize a new `Group` with `options`.\n *\n * @param {Object} options\n */\n\nfunction Group(options) {\n  this.defaults = Group.defaults;\n  this.debug = debug;\n  Entity.call(this, options);\n}\n\n\n/**\n * Inherit `Entity`\n */\n\ninherit(Group, Entity);\n\n\n/**\n * Expose the group singleton.\n */\n\nmodule.exports = bind.all(new Group());\n\n\n/**\n * Expose the `Group` constructor.\n */\n\nmodule.exports.Group = Group;\n\n}, {\"./entity\":66,\"bind\":11,\"debug\":15,\"inherit\":67}],\n66: [function(require, module, exports) {\n\nvar clone = require('clone');\nvar cookie = require('./cookie');\nvar debug = require('debug')('analytics:entity');\nvar defaults = require('defaults');\nvar extend = require('extend');\nvar memory = require('./memory');\nvar store = require('./store');\nvar isodateTraverse = require('isodate-traverse');\n\n\n/**\n * Expose `Entity`\n */\n\nmodule.exports = Entity;\n\n\n/**\n * Initialize new `Entity` with `options`.\n *\n * @param {Object} options\n */\n\nfunction Entity(options) {\n  this.options(options);\n  this.initialize();\n}\n\n/**\n * Initialize picks the storage.\n *\n * Checks to see if cookies can be set\n * otherwise fallsback to localStorage.\n */\n\nEntity.prototype.initialize = function() {\n  cookie.set('ajs:cookies', true);\n\n  // cookies are enabled.\n  if (cookie.get('ajs:cookies')) {\n    cookie.remove('ajs:cookies');\n    this._storage = cookie;\n    return;\n  }\n\n  // localStorage is enabled.\n  if (store.enabled) {\n    this._storage = store;\n    return;\n  }\n\n  // fallback to memory storage.\n  debug('warning using memory store both cookies and localStorage are disabled');\n  this._storage = memory;\n};\n\n/**\n * Get the storage.\n */\n\nEntity.prototype.storage = function() {\n  return this._storage;\n};\n\n\n/**\n * Get or set storage `options`.\n *\n * @param {Object} options\n *   @property {Object} cookie\n *   @property {Object} localStorage\n *   @property {Boolean} persist (default: `true`)\n */\n\nEntity.prototype.options = function(options) {\n  if (arguments.length === 0) return this._options;\n  this._options = defaults(options || {}, this.defaults || {});\n};\n\n\n/**\n * Get or set the entity's `id`.\n *\n * @param {String} id\n */\n\nEntity.prototype.id = function(id) {\n  switch (arguments.length) {\n    case 0: return this._getId();\n    case 1: return this._setId(id);\n    default:\n      // No default case\n  }\n};\n\n\n/**\n * Get the entity's id.\n *\n * @return {String}\n */\n\nEntity.prototype._getId = function() {\n  var ret = this._options.persist\n    ? this.storage().get(this._options.cookie.key)\n    : this._id;\n  return ret === undefined ? null : ret;\n};\n\n\n/**\n * Set the entity's `id`.\n *\n * @param {String} id\n */\n\nEntity.prototype._setId = function(id) {\n  if (this._options.persist) {\n    this.storage().set(this._options.cookie.key, id);\n  } else {\n    this._id = id;\n  }\n};\n\n\n/**\n * Get or set the entity's `traits`.\n *\n * BACKWARDS COMPATIBILITY: aliased to `properties`\n *\n * @param {Object} traits\n */\n\nEntity.prototype.properties = Entity.prototype.traits = function(traits) {\n  switch (arguments.length) {\n    case 0: return this._getTraits();\n    case 1: return this._setTraits(traits);\n    default:\n      // No default case\n  }\n};\n\n\n/**\n * Get the entity's traits. Always convert ISO date strings into real dates,\n * since they aren't parsed back from local storage.\n *\n * @return {Object}\n */\n\nEntity.prototype._getTraits = function() {\n  var ret = this._options.persist ? store.get(this._options.localStorage.key) : this._traits;\n  return ret ? isodateTraverse(clone(ret)) : {};\n};\n\n\n/**\n * Set the entity's `traits`.\n *\n * @param {Object} traits\n */\n\nEntity.prototype._setTraits = function(traits) {\n  traits = traits || {};\n  if (this._options.persist) {\n    store.set(this._options.localStorage.key, traits);\n  } else {\n    this._traits = traits;\n  }\n};\n\n\n/**\n * Identify the entity with an `id` and `traits`. If we it's the same entity,\n * extend the existing `traits` instead of overwriting.\n *\n * @param {String} id\n * @param {Object} traits\n */\n\nEntity.prototype.identify = function(id, traits) {\n  traits = traits || {};\n  var current = this.id();\n  if (current === null || current === id) traits = extend(this.traits(), traits);\n  if (id) this.id(id);\n  this.debug('identify %o, %o', id, traits);\n  this.traits(traits);\n  this.save();\n};\n\n\n/**\n * Save the entity to local storage and the cookie.\n *\n * @return {Boolean}\n */\n\nEntity.prototype.save = function() {\n  if (!this._options.persist) return false;\n  cookie.set(this._options.cookie.key, this.id());\n  store.set(this._options.localStorage.key, this.traits());\n  return true;\n};\n\n\n/**\n * Log the entity out, reseting `id` and `traits` to defaults.\n */\n\nEntity.prototype.logout = function() {\n  this.id(null);\n  this.traits({});\n  cookie.remove(this._options.cookie.key);\n  store.remove(this._options.localStorage.key);\n};\n\n\n/**\n * Reset all entity state, logging out and returning options to defaults.\n */\n\nEntity.prototype.reset = function() {\n  this.logout();\n  this.options({});\n};\n\n\n/**\n * Load saved entity `id` or `traits` from storage.\n */\n\nEntity.prototype.load = function() {\n  this.id(cookie.get(this._options.cookie.key));\n  this.traits(store.get(this._options.localStorage.key));\n};\n\n\n}, {\"clone\":13,\"./cookie\":14,\"debug\":15,\"defaults\":16,\"extend\":68,\"./memory\":21,\"./store\":28,\"isodate-traverse\":38}],\n68: [function(require, module, exports) {\n\nmodule.exports = function extend (object) {\n    // Takes an unlimited number of extenders.\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    // For each extender, copy their properties on our object.\n    for (var i = 0, source; source = args[i]; i++) {\n        if (!source) continue;\n        for (var property in source) {\n            object[property] = source[property];\n        }\n    }\n\n    return object;\n};\n}, {}],\n21: [function(require, module, exports) {\n/* eslint consistent-return:1 */\n\n/**\n * Module Dependencies.\n */\n\nvar bind = require('bind');\nvar clone = require('clone');\n\n/**\n * HOP.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Expose `Memory`\n */\n\nmodule.exports = bind.all(new Memory());\n\n/**\n * Initialize `Memory` store\n */\n\nfunction Memory(){\n  this.store = {};\n}\n\n/**\n * Set a `key` and `value`.\n *\n * @param {String} key\n * @param {Mixed} value\n * @return {Boolean}\n */\n\nMemory.prototype.set = function(key, value){\n  this.store[key] = clone(value);\n  return true;\n};\n\n/**\n * Get a `key`.\n *\n * @param {String} key\n */\n\nMemory.prototype.get = function(key){\n  if (!has.call(this.store, key)) return;\n  return clone(this.store[key]);\n};\n\n/**\n * Remove a `key`.\n *\n * @param {String} key\n * @return {Boolean}\n */\n\nMemory.prototype.remove = function(key){\n  delete this.store[key];\n  return true;\n};\n\n}, {\"bind\":11,\"clone\":13}],\n28: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('bind');\nvar defaults = require('defaults');\nvar store = require('store.js');\n\n/**\n * Initialize a new `Store` with `options`.\n *\n * @param {Object} options\n */\n\nfunction Store(options) {\n  this.options(options);\n}\n\n/**\n * Set the `options` for the store.\n *\n * @param {Object} options\n *   @field {Boolean} enabled (true)\n */\n\nStore.prototype.options = function(options) {\n  if (arguments.length === 0) return this._options;\n\n  options = options || {};\n  defaults(options, { enabled: true });\n\n  this.enabled = options.enabled && store.enabled;\n  this._options = options;\n};\n\n\n/**\n * Set a `key` and `value` in local storage.\n *\n * @param {string} key\n * @param {Object} value\n */\n\nStore.prototype.set = function(key, value) {\n  if (!this.enabled) return false;\n  return store.set(key, value);\n};\n\n\n/**\n * Get a value from local storage by `key`.\n *\n * @param {string} key\n * @return {Object}\n */\n\nStore.prototype.get = function(key) {\n  if (!this.enabled) return null;\n  return store.get(key);\n};\n\n\n/**\n * Remove a value from local storage by `key`.\n *\n * @param {string} key\n */\n\nStore.prototype.remove = function(key) {\n  if (!this.enabled) return false;\n  return store.remove(key);\n};\n\n\n/**\n * Expose the store singleton.\n */\n\nmodule.exports = bind.all(new Store());\n\n\n/**\n * Expose the `Store` constructor.\n */\n\nmodule.exports.Store = Store;\n\n}, {\"bind\":11,\"defaults\":16,\"store.js\":69}],\n69: [function(require, module, exports) {\nvar json             = require('json')\n  , store            = {}\n  , win              = window\n\t,\tdoc              = win.document\n\t,\tlocalStorageName = 'localStorage'\n\t,\tnamespace        = '__storejs__'\n\t,\tstorage;\n\nstore.disabled = false\nstore.set = function(key, value) {}\nstore.get = function(key) {}\nstore.remove = function(key) {}\nstore.clear = function() {}\nstore.transact = function(key, defaultVal, transactionFn) {\n\tvar val = store.get(key)\n\tif (transactionFn == null) {\n\t\ttransactionFn = defaultVal\n\t\tdefaultVal = null\n\t}\n\tif (typeof val == 'undefined') { val = defaultVal || {} }\n\ttransactionFn(val)\n\tstore.set(key, val)\n}\nstore.getAll = function() {}\n\nstore.serialize = function(value) {\n\treturn json.stringify(value)\n}\nstore.deserialize = function(value) {\n\tif (typeof value != 'string') { return undefined }\n\ttry { return json.parse(value) }\n\tcatch(e) { return value || undefined }\n}\n\n// Functions to encapsulate questionable FireFox 3.6.13 behavior\n// when about.config::dom.storage.enabled === false\n// See https://github.com/marcuswestin/store.js/issues#issue/13\nfunction isLocalStorageNameSupported() {\n\ttry { return (localStorageName in win && win[localStorageName]) }\n\tcatch(err) { return false }\n}\n\nif (isLocalStorageNameSupported()) {\n\tstorage = win[localStorageName]\n\tstore.set = function(key, val) {\n\t\tif (val === undefined) { return store.remove(key) }\n\t\tstorage.setItem(key, store.serialize(val))\n\t\treturn val\n\t}\n\tstore.get = function(key) { return store.deserialize(storage.getItem(key)) }\n\tstore.remove = function(key) { storage.removeItem(key) }\n\tstore.clear = function() { storage.clear() }\n\tstore.getAll = function() {\n\t\tvar ret = {}\n\t\tfor (var i=0; i<storage.length; ++i) {\n\t\t\tvar key = storage.key(i)\n\t\t\tret[key] = store.get(key)\n\t\t}\n\t\treturn ret\n\t}\n} else if (doc.documentElement.addBehavior) {\n\tvar storageOwner,\n\t\tstorageContainer\n\t// Since #userData storage applies only to specific paths, we need to\n\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t// as a pretty safe option, since all browsers already make a request to\n\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t// since the iframe access rules appear to allow direct access and\n\t// manipulation of the document element, even for a 404 page.  This\n\t// document can be used instead of the current document (which would\n\t// have been limited to the current path) to perform #userData storage.\n\ttry {\n\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\tstorageContainer.open()\n\t\tstorageContainer.write('<s' + 'cript>document.w=window</s' + 'cript><iframe src=\"/favicon.ico\"></iframe>')\n\t\tstorageContainer.close()\n\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\tstorage = storageOwner.createElement('div')\n\t} catch(e) {\n\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t// security settings or otherwse), fall back to per-path storage\n\t\tstorage = doc.createElement('div')\n\t\tstorageOwner = doc.body\n\t}\n\tfunction withIEStorage(storeFunction) {\n\t\treturn function() {\n\t\t\tvar args = Array.prototype.slice.call(arguments, 0)\n\t\t\targs.unshift(storage)\n\t\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\t\tstorageOwner.appendChild(storage)\n\t\t\tstorage.addBehavior('#default#userData')\n\t\t\tstorage.load(localStorageName)\n\t\t\tvar result = storeFunction.apply(store, args)\n\t\t\tstorageOwner.removeChild(storage)\n\t\t\treturn result\n\t\t}\n\t}\n\n\t// In IE7, keys may not contain special chars. See all of https://github.com/marcuswestin/store.js/issues/40\n\tvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\n\tfunction ieKeyFix(key) {\n\t\treturn key.replace(forbiddenCharsRegex, '___')\n\t}\n\tstore.set = withIEStorage(function(storage, key, val) {\n\t\tkey = ieKeyFix(key)\n\t\tif (val === undefined) { return store.remove(key) }\n\t\tstorage.setAttribute(key, store.serialize(val))\n\t\tstorage.save(localStorageName)\n\t\treturn val\n\t})\n\tstore.get = withIEStorage(function(storage, key) {\n\t\tkey = ieKeyFix(key)\n\t\treturn store.deserialize(storage.getAttribute(key))\n\t})\n\tstore.remove = withIEStorage(function(storage, key) {\n\t\tkey = ieKeyFix(key)\n\t\tstorage.removeAttribute(key)\n\t\tstorage.save(localStorageName)\n\t})\n\tstore.clear = withIEStorage(function(storage) {\n\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\tstorage.load(localStorageName)\n\t\tfor (var i=0, attr; attr=attributes[i]; i++) {\n\t\t\tstorage.removeAttribute(attr.name)\n\t\t}\n\t\tstorage.save(localStorageName)\n\t})\n\tstore.getAll = withIEStorage(function(storage) {\n\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\tvar ret = {}\n\t\tfor (var i=0, attr; attr=attributes[i]; ++i) {\n\t\t\tvar key = ieKeyFix(attr.name)\n\t\t\tret[attr.name] = store.deserialize(storage.getAttribute(key))\n\t\t}\n\t\treturn ret\n\t})\n}\n\ntry {\n\tstore.set(namespace, namespace)\n\tif (store.get(namespace) != namespace) { store.disabled = true }\n\tstore.remove(namespace)\n} catch(e) {\n\tstore.disabled = true\n}\nstore.enabled = !store.disabled\n\nmodule.exports = store;\n}, {\"json\":59}],\n67: [function(require, module, exports) {\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n}, {}],\n18: [function(require, module, exports) {\n\nvar isEmpty = require('is-empty');\n\ntry {\n  var typeOf = require('type');\n} catch (e) {\n  var typeOf = require('component-type');\n}\n\n\n/**\n * Types.\n */\n\nvar types = [\n  'arguments',\n  'array',\n  'boolean',\n  'date',\n  'element',\n  'function',\n  'null',\n  'number',\n  'object',\n  'regexp',\n  'string',\n  'undefined'\n];\n\n\n/**\n * Expose type checkers.\n *\n * @param {Mixed} value\n * @return {Boolean}\n */\n\nfor (var i = 0, type; type = types[i]; i++) exports[type] = generate(type);\n\n\n/**\n * Add alias for `function` for old browsers.\n */\n\nexports.fn = exports['function'];\n\n\n/**\n * Expose `empty` check.\n */\n\nexports.empty = isEmpty;\n\n\n/**\n * Expose `nan` check.\n */\n\nexports.nan = function (val) {\n  return exports.number(val) && val != val;\n};\n\n\n/**\n * Generate a type checker.\n *\n * @param {String} type\n * @return {Function}\n */\n\nfunction generate (type) {\n  return function (value) {\n    return type === typeOf(value);\n  };\n}\n}, {\"is-empty\":46,\"type\":47,\"component-type\":47}],\n19: [function(require, module, exports) {\nmodule.exports = function isMeta (e) {\n    if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) return true;\n\n    // Logic that handles checks for the middle mouse button, based\n    // on [jQuery](https://github.com/jquery/jquery/blob/master/src/event.js#L466).\n    var which = e.which, button = e.button;\n    if (!which && button !== undefined) {\n      return (!button & 1) && (!button & 2) && (button & 4);\n    } else if (which === 2) {\n      return true;\n    }\n\n    return false;\n};\n}, {}],\n20: [function(require, module, exports) {\n\n/**\n * HOP ref.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Return own keys in `obj`.\n *\n * @param {Object} obj\n * @return {Array}\n * @api public\n */\n\nexports.keys = Object.keys || function(obj){\n  var keys = [];\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n  return keys;\n};\n\n/**\n * Return own values in `obj`.\n *\n * @param {Object} obj\n * @return {Array}\n * @api public\n */\n\nexports.values = function(obj){\n  var vals = [];\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      vals.push(obj[key]);\n    }\n  }\n  return vals;\n};\n\n/**\n * Merge `b` into `a`.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api public\n */\n\nexports.merge = function(a, b){\n  for (var key in b) {\n    if (has.call(b, key)) {\n      a[key] = b[key];\n    }\n  }\n  return a;\n};\n\n/**\n * Return length of `obj`.\n *\n * @param {Object} obj\n * @return {Number}\n * @api public\n */\n\nexports.length = function(obj){\n  return exports.keys(obj).length;\n};\n\n/**\n * Check if `obj` is empty.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api public\n */\n\nexports.isEmpty = function(obj){\n  return 0 == exports.length(obj);\n};\n}, {}],\n22: [function(require, module, exports) {\n\n/**\n * Module Dependencies.\n */\n\nvar debug = require('debug')('analytics.js:normalize');\nvar defaults = require('defaults');\nvar each = require('each');\nvar includes = require('includes');\nvar is = require('is');\nvar map = require('component/map');\n\n/**\n * HOP.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Expose `normalize`\n */\n\nmodule.exports = normalize;\n\n/**\n * Toplevel properties.\n */\n\nvar toplevel = [\n  'integrations',\n  'anonymousId',\n  'timestamp',\n  'context'\n];\n\n/**\n * Normalize `msg` based on integrations `list`.\n *\n * @param {Object} msg\n * @param {Array} list\n * @return {Function}\n */\n\nfunction normalize(msg, list){\n  var lower = map(list, function(s){ return s.toLowerCase(); });\n  var opts = msg.options || {};\n  var integrations = opts.integrations || {};\n  var providers = opts.providers || {};\n  var context = opts.context || {};\n  var ret = {};\n  debug('<-', msg);\n\n  // integrations.\n  each(opts, function(key, value){\n    if (!integration(key)) return;\n    if (!has.call(integrations, key)) integrations[key] = value;\n    delete opts[key];\n  });\n\n  // providers.\n  delete opts.providers;\n  each(providers, function(key, value){\n    if (!integration(key)) return;\n    if (is.object(integrations[key])) return;\n    if (has.call(integrations, key) && typeof providers[key] === 'boolean') return;\n    integrations[key] = value;\n  });\n\n  // move all toplevel options to msg\n  // and the rest to context.\n  each(opts, function(key){\n    if (includes(key, toplevel)) {\n      ret[key] = opts[key];\n    } else {\n      context[key] = opts[key];\n    }\n  });\n\n  // cleanup\n  delete msg.options;\n  ret.integrations = integrations;\n  ret.context = context;\n  ret = defaults(ret, msg);\n  debug('->', ret);\n  return ret;\n\n  function integration(name){\n    return !!(includes(name, list) || name.toLowerCase() === 'all' || includes(name.toLowerCase(), lower));\n  }\n}\n\n}, {\"debug\":15,\"defaults\":16,\"each\":4,\"includes\":70,\"is\":18,\"component/map\":71}],\n70: [function(require, module, exports) {\n'use strict';\n\n/**\n * Module dependencies.\n */\n\n// XXX: Hacky fix for duo not supporting scoped npm packages\nvar each; try { each = require('@ndhoule/each'); } catch(e) { each = require('each'); }\n\n/**\n * String#indexOf reference.\n */\n\nvar strIndexOf = String.prototype.indexOf;\n\n/**\n * Object.is/sameValueZero polyfill.\n *\n * @api private\n * @param {*} value1\n * @param {*} value2\n * @return {boolean}\n */\n\n// TODO: Move to library\nvar sameValueZero = function sameValueZero(value1, value2) {\n  // Normal values and check for 0 / -0\n  if (value1 === value2) {\n    return value1 !== 0 || 1 / value1 === 1 / value2;\n  }\n  // NaN\n  return value1 !== value1 && value2 !== value2;\n};\n\n/**\n * Searches a given `collection` for a value, returning true if the collection\n * contains the value and false otherwise. Can search strings, arrays, and\n * objects.\n *\n * @name includes\n * @api public\n * @param {*} searchElement The element to search for.\n * @param {Object|Array|string} collection The collection to search.\n * @return {boolean}\n * @example\n * includes(2, [1, 2, 3]);\n * //=> true\n *\n * includes(4, [1, 2, 3]);\n * //=> false\n *\n * includes(2, { a: 1, b: 2, c: 3 });\n * //=> true\n *\n * includes('a', { a: 1, b: 2, c: 3 });\n * //=> false\n *\n * includes('abc', 'xyzabc opq');\n * //=> true\n *\n * includes('nope', 'xyzabc opq');\n * //=> false\n */\nvar includes = function includes(searchElement, collection) {\n  var found = false;\n\n  // Delegate to String.prototype.indexOf when `collection` is a string\n  if (typeof collection === 'string') {\n    return strIndexOf.call(collection, searchElement) !== -1;\n  }\n\n  // Iterate through enumerable/own array elements and object properties.\n  each(function(value) {\n    if (sameValueZero(value, searchElement)) {\n      found = true;\n      // Exit iteration early when found\n      return false;\n    }\n  }, collection);\n\n  return found;\n};\n\n/**\n * Exports.\n */\n\nmodule.exports = includes;\n\n}, {\"each\":72}],\n72: [function(require, module, exports) {\n'use strict';\n\n/**\n * Module dependencies.\n */\n\n// XXX: Hacky fix for Duo not supporting scoped modules\nvar keys; try { keys = require('@ndhoule/keys'); } catch(e) { keys = require('keys'); }\n\n/**\n * Object.prototype.toString reference.\n */\n\nvar objToString = Object.prototype.toString;\n\n/**\n * Tests if a value is a number.\n *\n * @name isNumber\n * @api private\n * @param {*} val The value to test.\n * @return {boolean} Returns `true` if `val` is a number, otherwise `false`.\n */\n\n// TODO: Move to library\nvar isNumber = function isNumber(val) {\n  var type = typeof val;\n  return type === 'number' || (type === 'object' && objToString.call(val) === '[object Number]');\n};\n\n/**\n * Tests if a value is an array.\n *\n * @name isArray\n * @api private\n * @param {*} val The value to test.\n * @return {boolean} Returns `true` if the value is an array, otherwise `false`.\n */\n\n// TODO: Move to library\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function isArray(val) {\n  return objToString.call(val) === '[object Array]';\n};\n\n/**\n * Tests if a value is array-like. Array-like means the value is not a function and has a numeric\n * `.length` property.\n *\n * @name isArrayLike\n * @api private\n * @param {*} val\n * @return {boolean}\n */\n\n// TODO: Move to library\nvar isArrayLike = function isArrayLike(val) {\n  return val != null && (isArray(val) || (val !== 'function' && isNumber(val.length)));\n};\n\n/**\n * Internal implementation of `each`. Works on arrays and array-like data structures.\n *\n * @name arrayEach\n * @api private\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Array} array The array(-like) structure to iterate over.\n * @return {undefined}\n */\n\nvar arrayEach = function arrayEach(iterator, array) {\n  for (var i = 0; i < array.length; i += 1) {\n    // Break iteration early if `iterator` returns `false`\n    if (iterator(array[i], i, array) === false) {\n      break;\n    }\n  }\n};\n\n/**\n * Internal implementation of `each`. Works on objects.\n *\n * @name baseEach\n * @api private\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Object} object The object to iterate over.\n * @return {undefined}\n */\n\nvar baseEach = function baseEach(iterator, object) {\n  var ks = keys(object);\n\n  for (var i = 0; i < ks.length; i += 1) {\n    // Break iteration early if `iterator` returns `false`\n    if (iterator(object[ks[i]], ks[i], object) === false) {\n      break;\n    }\n  }\n};\n\n/**\n * Iterate over an input collection, invoking an `iterator` function for each element in the\n * collection and passing to it three arguments: `(value, index, collection)`. The `iterator`\n * function can end iteration early by returning `false`.\n *\n * @name each\n * @api public\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Array|Object|string} collection The collection to iterate over.\n * @return {undefined} Because `each` is run only for side effects, always returns `undefined`.\n * @example\n * var log = console.log.bind(console);\n *\n * each(log, ['a', 'b', 'c']);\n * //-> 'a', 0, ['a', 'b', 'c']\n * //-> 'b', 1, ['a', 'b', 'c']\n * //-> 'c', 2, ['a', 'b', 'c']\n * //=> undefined\n *\n * each(log, 'tim');\n * //-> 't', 2, 'tim'\n * //-> 'i', 1, 'tim'\n * //-> 'm', 0, 'tim'\n * //=> undefined\n *\n * // Note: Iteration order not guaranteed across environments\n * each(log, { name: 'tim', occupation: 'enchanter' });\n * //-> 'tim', 'name', { name: 'tim', occupation: 'enchanter' }\n * //-> 'enchanter', 'occupation', { name: 'tim', occupation: 'enchanter' }\n * //=> undefined\n */\n\nvar each = function each(iterator, collection) {\n  return (isArrayLike(collection) ? arrayEach : baseEach).call(this, iterator, collection);\n};\n\n/**\n * Exports.\n */\n\nmodule.exports = each;\n\n}, {\"keys\":73}],\n73: [function(require, module, exports) {\n'use strict';\n\n/**\n * charAt reference.\n */\n\nvar strCharAt = String.prototype.charAt;\n\n/**\n * Returns the character at a given index.\n *\n * @param {string} str\n * @param {number} index\n * @return {string|undefined}\n */\n\n// TODO: Move to a library\nvar charAt = function(str, index) {\n  return strCharAt.call(str, index);\n};\n\n/**\n * hasOwnProperty reference.\n */\n\nvar hop = Object.prototype.hasOwnProperty;\n\n/**\n * Object.prototype.toString reference.\n */\n\nvar toStr = Object.prototype.toString;\n\n/**\n * hasOwnProperty, wrapped as a function.\n *\n * @name has\n * @api private\n * @param {*} context\n * @param {string|number} prop\n * @return {boolean}\n */\n\n// TODO: Move to a library\nvar has = function has(context, prop) {\n  return hop.call(context, prop);\n};\n\n/**\n * Returns true if a value is a string, otherwise false.\n *\n * @name isString\n * @api private\n * @param {*} val\n * @return {boolean}\n */\n\n// TODO: Move to a library\nvar isString = function isString(val) {\n  return toStr.call(val) === '[object String]';\n};\n\n/**\n * Returns true if a value is array-like, otherwise false. Array-like means a\n * value is not null, undefined, or a function, and has a numeric `length`\n * property.\n *\n * @name isArrayLike\n * @api private\n * @param {*} val\n * @return {boolean}\n */\n\n// TODO: Move to a library\nvar isArrayLike = function isArrayLike(val) {\n  return val != null && (typeof val !== 'function' && typeof val.length === 'number');\n};\n\n\n/**\n * indexKeys\n *\n * @name indexKeys\n * @api private\n * @param {} target\n * @param {} pred\n * @return {Array}\n */\n\nvar indexKeys = function indexKeys(target, pred) {\n  pred = pred || has;\n  var results = [];\n\n  for (var i = 0, len = target.length; i < len; i += 1) {\n    if (pred(target, i)) {\n      results.push(String(i));\n    }\n  }\n\n  return results;\n};\n\n/**\n * Returns an array of all the owned\n *\n * @name objectKeys\n * @api private\n * @param {*} target\n * @param {Function} pred Predicate function used to include/exclude values from\n * the resulting array.\n * @return {Array}\n */\n\nvar objectKeys = function objectKeys(target, pred) {\n  pred = pred || has;\n  var results = [];\n\n\n  for (var key in target) {\n    if (pred(target, key)) {\n      results.push(String(key));\n    }\n  }\n\n  return results;\n};\n\n/**\n * Creates an array composed of all keys on the input object. Ignores any non-enumerable properties.\n * More permissive than the native `Object.keys` function (non-objects will not throw errors).\n *\n * @name keys\n * @api public\n * @category Object\n * @param {Object} source The value to retrieve keys from.\n * @return {Array} An array containing all the input `source`'s keys.\n * @example\n * keys({ likes: 'avocado', hates: 'pineapple' });\n * //=> ['likes', 'pineapple'];\n *\n * // Ignores non-enumerable properties\n * var hasHiddenKey = { name: 'Tim' };\n * Object.defineProperty(hasHiddenKey, 'hidden', {\n *   value: 'i am not enumerable!',\n *   enumerable: false\n * })\n * keys(hasHiddenKey);\n * //=> ['name'];\n *\n * // Works on arrays\n * keys(['a', 'b', 'c']);\n * //=> ['0', '1', '2']\n *\n * // Skips unpopulated indices in sparse arrays\n * var arr = [1];\n * arr[4] = 4;\n * keys(arr);\n * //=> ['0', '4']\n */\n\nmodule.exports = function keys(source) {\n  if (source == null) {\n    return [];\n  }\n\n  // IE6-8 compatibility (string)\n  if (isString(source)) {\n    return indexKeys(source, charAt);\n  }\n\n  // IE6-8 compatibility (arguments)\n  if (isArrayLike(source)) {\n    return indexKeys(source, has);\n  }\n\n  return objectKeys(source);\n};\n\n}, {}],\n71: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar toFunction = require('to-function');\n\n/**\n * Map the given `arr` with callback `fn(val, i)`.\n *\n * @param {Array} arr\n * @param {Function} fn\n * @return {Array}\n * @api public\n */\n\nmodule.exports = function(arr, fn){\n  var ret = [];\n  fn = toFunction(fn);\n  for (var i = 0; i < arr.length; ++i) {\n    ret.push(fn(arr[i], i));\n  }\n  return ret;\n};\n}, {\"to-function\":74}],\n74: [function(require, module, exports) {\n\n/**\n * Module Dependencies\n */\n\nvar expr;\ntry {\n  expr = require('props');\n} catch(e) {\n  expr = require('component-props');\n}\n\n/**\n * Expose `toFunction()`.\n */\n\nmodule.exports = toFunction;\n\n/**\n * Convert `obj` to a `Function`.\n *\n * @param {Mixed} obj\n * @return {Function}\n * @api private\n */\n\nfunction toFunction(obj) {\n  switch ({}.toString.call(obj)) {\n    case '[object Object]':\n      return objectToFunction(obj);\n    case '[object Function]':\n      return obj;\n    case '[object String]':\n      return stringToFunction(obj);\n    case '[object RegExp]':\n      return regexpToFunction(obj);\n    default:\n      return defaultToFunction(obj);\n  }\n}\n\n/**\n * Default to strict equality.\n *\n * @param {Mixed} val\n * @return {Function}\n * @api private\n */\n\nfunction defaultToFunction(val) {\n  return function(obj){\n    return val === obj;\n  };\n}\n\n/**\n * Convert `re` to a function.\n *\n * @param {RegExp} re\n * @return {Function}\n * @api private\n */\n\nfunction regexpToFunction(re) {\n  return function(obj){\n    return re.test(obj);\n  };\n}\n\n/**\n * Convert property `str` to a function.\n *\n * @param {String} str\n * @return {Function}\n * @api private\n */\n\nfunction stringToFunction(str) {\n  // immediate such as \"> 20\"\n  if (/^ *\\W+/.test(str)) return new Function('_', 'return _ ' + str);\n\n  // properties such as \"name.first\" or \"age > 18\" or \"age > 18 && age < 36\"\n  return new Function('_', 'return ' + get(str));\n}\n\n/**\n * Convert `object` to a function.\n *\n * @param {Object} object\n * @return {Function}\n * @api private\n */\n\nfunction objectToFunction(obj) {\n  var match = {};\n  for (var key in obj) {\n    match[key] = typeof obj[key] === 'string'\n      ? defaultToFunction(obj[key])\n      : toFunction(obj[key]);\n  }\n  return function(val){\n    if (typeof val !== 'object') return false;\n    for (var key in match) {\n      if (!(key in val)) return false;\n      if (!match[key](val[key])) return false;\n    }\n    return true;\n  };\n}\n\n/**\n * Built the getter function. Supports getter style functions\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction get(str) {\n  var props = expr(str);\n  if (!props.length) return '_.' + str;\n\n  var val, i, prop;\n  for (i = 0; i < props.length; i++) {\n    prop = props[i];\n    val = '_.' + prop;\n    val = \"('function' == typeof \" + val + \" ? \" + val + \"() : \" + val + \")\";\n\n    // mimic negative lookbehind to avoid problems with nested properties\n    str = stripNested(prop, str, val);\n  }\n\n  return str;\n}\n\n/**\n * Mimic negative lookbehind to avoid problems with nested properties.\n *\n * See: http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript\n *\n * @param {String} prop\n * @param {String} str\n * @param {String} val\n * @return {String}\n * @api private\n */\n\nfunction stripNested (prop, str, val) {\n  return str.replace(new RegExp('(\\\\.)?' + prop, 'g'), function($0, $1) {\n    return $1 ? $0 : val;\n  });\n}\n\n}, {\"props\":75,\"component-props\":75}],\n75: [function(require, module, exports) {\n/**\n * Global Names\n */\n\nvar globals = /\\b(this|Array|Date|Object|Math|JSON)\\b/g;\n\n/**\n * Return immediate identifiers parsed from `str`.\n *\n * @param {String} str\n * @param {String|Function} map function or prefix\n * @return {Array}\n * @api public\n */\n\nmodule.exports = function(str, fn){\n  var p = unique(props(str));\n  if (fn && 'string' == typeof fn) fn = prefixed(fn);\n  if (fn) return map(str, p, fn);\n  return p;\n};\n\n/**\n * Return immediate identifiers in `str`.\n *\n * @param {String} str\n * @return {Array}\n * @api private\n */\n\nfunction props(str) {\n  return str\n    .replace(/\\.\\w+|\\w+ *\\(|\"[^\"]*\"|'[^']*'|\\/([^/]+)\\//g, '')\n    .replace(globals, '')\n    .match(/[$a-zA-Z_]\\w*/g)\n    || [];\n}\n\n/**\n * Return `str` with `props` mapped with `fn`.\n *\n * @param {String} str\n * @param {Array} props\n * @param {Function} fn\n * @return {String}\n * @api private\n */\n\nfunction map(str, props, fn) {\n  var re = /\\.\\w+|\\w+ *\\(|\"[^\"]*\"|'[^']*'|\\/([^/]+)\\/|[a-zA-Z_]\\w*/g;\n  return str.replace(re, function(_){\n    if ('(' == _[_.length - 1]) return fn(_);\n    if (!~props.indexOf(_)) return _;\n    return fn(_);\n  });\n}\n\n/**\n * Return unique array.\n *\n * @param {Array} arr\n * @return {Array}\n * @api private\n */\n\nfunction unique(arr) {\n  var ret = [];\n\n  for (var i = 0; i < arr.length; i++) {\n    if (~ret.indexOf(arr[i])) continue;\n    ret.push(arr[i]);\n  }\n\n  return ret;\n}\n\n/**\n * Map with prefix `str`.\n */\n\nfunction prefixed(str) {\n  return function(_){\n    return str + _;\n  };\n}\n\n}, {}],\n23: [function(require, module, exports) {\n\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nexports.bind = function(el, type, fn, capture){\n  if (el.addEventListener) {\n    el.addEventListener(type, fn, capture || false);\n  } else {\n    el.attachEvent('on' + type, fn);\n  }\n  return fn;\n};\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nexports.unbind = function(el, type, fn, capture){\n  if (el.removeEventListener) {\n    el.removeEventListener(type, fn, capture || false);\n  } else {\n    el.detachEvent('on' + type, fn);\n  }\n  return fn;\n};\n\n}, {}],\n24: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar canonical = require('canonical');\nvar includes = require('includes');\nvar url = require('url');\n\n/**\n * Return a default `options.context.page` object.\n *\n * https://segment.com/docs/spec/page/#properties\n *\n * @return {Object}\n */\n\nfunction pageDefaults() {\n  return {\n    path: canonicalPath(),\n    referrer: document.referrer,\n    search: location.search,\n    title: document.title,\n    url: canonicalUrl(location.search)\n  };\n}\n\n/**\n * Return the canonical path for the page.\n *\n * @return {string}\n */\n\nfunction canonicalPath() {\n  var canon = canonical();\n  if (!canon) return window.location.pathname;\n  var parsed = url.parse(canon);\n  return parsed.pathname;\n}\n\n/**\n * Return the canonical URL for the page concat the given `search`\n * and strip the hash.\n *\n * @param {string} search\n * @return {string}\n */\n\nfunction canonicalUrl(search) {\n  var canon = canonical();\n  if (canon) return includes('?', canon) ? canon : canon + search;\n  var url = window.location.href;\n  var i = url.indexOf('#');\n  return i === -1 ? url : url.slice(0, i);\n}\n\n/**\n * Exports.\n */\n\nmodule.exports = pageDefaults;\n\n}, {\"canonical\":76,\"includes\":70,\"url\":77}],\n76: [function(require, module, exports) {\nmodule.exports = function canonical () {\n  var tags = document.getElementsByTagName('link');\n  for (var i = 0, tag; tag = tags[i]; i++) {\n    if ('canonical' == tag.getAttribute('rel')) return tag.getAttribute('href');\n  }\n};\n}, {}],\n77: [function(require, module, exports) {\n\n/**\n * Parse the given `url`.\n *\n * @param {String} str\n * @return {Object}\n * @api public\n */\n\nexports.parse = function(url){\n  var a = document.createElement('a');\n  a.href = url;\n  return {\n    href: a.href,\n    host: a.host || location.host,\n    port: ('0' === a.port || '' === a.port) ? port(a.protocol) : a.port,\n    hash: a.hash,\n    hostname: a.hostname || location.hostname,\n    pathname: a.pathname.charAt(0) != '/' ? '/' + a.pathname : a.pathname,\n    protocol: !a.protocol || ':' == a.protocol ? location.protocol : a.protocol,\n    search: a.search,\n    query: a.search.slice(1)\n  };\n};\n\n/**\n * Check if `url` is absolute.\n *\n * @param {String} url\n * @return {Boolean}\n * @api public\n */\n\nexports.isAbsolute = function(url){\n  return 0 == url.indexOf('//') || !!~url.indexOf('://');\n};\n\n/**\n * Check if `url` is relative.\n *\n * @param {String} url\n * @return {Boolean}\n * @api public\n */\n\nexports.isRelative = function(url){\n  return !exports.isAbsolute(url);\n};\n\n/**\n * Check if `url` is cross domain.\n *\n * @param {String} url\n * @return {Boolean}\n * @api public\n */\n\nexports.isCrossDomain = function(url){\n  url = exports.parse(url);\n  var location = exports.parse(window.location.href);\n  return url.hostname !== location.hostname\n    || url.port !== location.port\n    || url.protocol !== location.protocol;\n};\n\n/**\n * Return default port for `protocol`.\n *\n * @param  {String} protocol\n * @return {String}\n * @api private\n */\nfunction port (protocol){\n  switch (protocol) {\n    case 'http:':\n      return 80;\n    case 'https:':\n      return 443;\n    default:\n      return location.port;\n  }\n}\n\n}, {}],\n25: [function(require, module, exports) {\n'use strict';\n\nvar objToString = Object.prototype.toString;\n\n// TODO: Move to lib\nvar existy = function(val) {\n  return val != null;\n};\n\n// TODO: Move to lib\nvar isArray = function(val) {\n  return objToString.call(val) === '[object Array]';\n};\n\n// TODO: Move to lib\nvar isString = function(val) {\n   return typeof val === 'string' || objToString.call(val) === '[object String]';\n};\n\n// TODO: Move to lib\nvar isObject = function(val) {\n  return val != null && typeof val === 'object';\n};\n\n/**\n * Returns a copy of the new `object` containing only the specified properties.\n *\n * @name pick\n * @api public\n * @category Object\n * @see {@link omit}\n * @param {Array.<string>|string} props The property or properties to keep.\n * @param {Object} object The object to iterate over.\n * @return {Object} A new object containing only the specified properties from `object`.\n * @example\n * var person = { name: 'Tim', occupation: 'enchanter', fears: 'rabbits' };\n *\n * pick('name', person);\n * //=> { name: 'Tim' }\n *\n * pick(['name', 'fears'], person);\n * //=> { name: 'Tim', fears: 'rabbits' }\n */\n\nvar pick = function pick(props, object) {\n  if (!existy(object) || !isObject(object)) {\n    return {};\n  }\n\n  if (isString(props)) {\n    props = [props];\n  }\n\n  if (!isArray(props)) {\n    props = [];\n  }\n\n  var result = {};\n\n  for (var i = 0; i < props.length; i += 1) {\n    if (isString(props[i]) && props[i] in object) {\n      result[props[i]] = object[props[i]];\n    }\n  }\n\n  return result;\n};\n\n/**\n * Exports.\n */\n\nmodule.exports = pick;\n\n}, {}],\n26: [function(require, module, exports) {\n\n/**\n * prevent default on the given `e`.\n * \n * examples:\n * \n *      anchor.onclick = prevent;\n *      anchor.onclick = function(e){\n *        if (something) return prevent(e);\n *      };\n * \n * @param {Event} e\n */\n\nmodule.exports = function(e){\n  e = e || window.event\n  return e.preventDefault\n    ? e.preventDefault()\n    : e.returnValue = false;\n};\n\n}, {}],\n27: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar trim = require('trim');\nvar type = require('type');\n\nvar pattern = /(\\w+)\\[(\\d+)\\]/\n\n/**\n * Safely encode the given string\n * \n * @param {String} str\n * @return {String}\n * @api private\n */\n\nvar encode = function(str) {\n  try {\n    return encodeURIComponent(str);\n  } catch (e) {\n    return str;\n  }\n};\n\n/**\n * Safely decode the string\n * \n * @param {String} str\n * @return {String}\n * @api private\n */\n\nvar decode = function(str) {\n  try {\n    return decodeURIComponent(str.replace(/\\+/g, ' '));\n  } catch (e) {\n    return str;\n  }\n}\n\n/**\n * Parse the given query `str`.\n *\n * @param {String} str\n * @return {Object}\n * @api public\n */\n\nexports.parse = function(str){\n  if ('string' != typeof str) return {};\n\n  str = trim(str);\n  if ('' == str) return {};\n  if ('?' == str.charAt(0)) str = str.slice(1);\n\n  var obj = {};\n  var pairs = str.split('&');\n  for (var i = 0; i < pairs.length; i++) {\n    var parts = pairs[i].split('=');\n    var key = decode(parts[0]);\n    var m;\n\n    if (m = pattern.exec(key)) {\n      obj[m[1]] = obj[m[1]] || [];\n      obj[m[1]][m[2]] = decode(parts[1]);\n      continue;\n    }\n\n    obj[parts[0]] = null == parts[1]\n      ? ''\n      : decode(parts[1]);\n  }\n\n  return obj;\n};\n\n/**\n * Stringify the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api public\n */\n\nexports.stringify = function(obj){\n  if (!obj) return '';\n  var pairs = [];\n\n  for (var key in obj) {\n    var value = obj[key];\n\n    if ('array' == type(value)) {\n      for (var i = 0; i < value.length; ++i) {\n        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));\n      }\n      continue;\n    }\n\n    pairs.push(encode(key) + '=' + encode(obj[key]));\n  }\n\n  return pairs.join('&');\n};\n\n}, {\"trim\":54,\"type\":47}],\n29: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Entity = require('./entity');\nvar bind = require('bind');\nvar cookie = require('./cookie');\nvar debug = require('debug')('analytics:user');\nvar inherit = require('inherit');\nvar rawCookie = require('cookie');\nvar uuid = require('uuid');\n\n\n/**\n * User defaults\n */\n\nUser.defaults = {\n  persist: true,\n  cookie: {\n    key: 'ajs_user_id',\n    oldKey: 'ajs_user'\n  },\n  localStorage: {\n    key: 'ajs_user_traits'\n  }\n};\n\n\n/**\n * Initialize a new `User` with `options`.\n *\n * @param {Object} options\n */\n\nfunction User(options) {\n  this.defaults = User.defaults;\n  this.debug = debug;\n  Entity.call(this, options);\n}\n\n\n/**\n * Inherit `Entity`\n */\n\ninherit(User, Entity);\n\n/**\n * Set/get the user id.\n *\n * When the user id changes, the method will reset his anonymousId to a new one.\n *\n * // FIXME: What are the mixed types?\n * @param {string} id\n * @return {Mixed}\n * @example\n * // didn't change because the user didn't have previous id.\n * anonymousId = user.anonymousId();\n * user.id('foo');\n * assert.equal(anonymousId, user.anonymousId());\n *\n * // didn't change because the user id changed to null.\n * anonymousId = user.anonymousId();\n * user.id('foo');\n * user.id(null);\n * assert.equal(anonymousId, user.anonymousId());\n *\n * // change because the user had previous id.\n * anonymousId = user.anonymousId();\n * user.id('foo');\n * user.id('baz'); // triggers change\n * user.id('baz'); // no change\n * assert.notEqual(anonymousId, user.anonymousId());\n */\n\nUser.prototype.id = function(id){\n  var prev = this._getId();\n  var ret = Entity.prototype.id.apply(this, arguments);\n  if (prev == null) return ret;\n  // FIXME: We're relying on coercion here (1 == \"1\"), but our API treats these\n  // two values differently. Figure out what will break if we remove this and\n  // change to strict equality\n  /* eslint-disable eqeqeq */\n  if (prev != id && id) this.anonymousId(null);\n  /* eslint-enable eqeqeq */\n  return ret;\n};\n\n/**\n * Set / get / remove anonymousId.\n *\n * @param {String} anonymousId\n * @return {String|User}\n */\n\nUser.prototype.anonymousId = function(anonymousId){\n  var store = this.storage();\n\n  // set / remove\n  if (arguments.length) {\n    store.set('ajs_anonymous_id', anonymousId);\n    return this;\n  }\n\n  // new\n  anonymousId = store.get('ajs_anonymous_id');\n  if (anonymousId) {\n    return anonymousId;\n  }\n\n  // old - it is not stringified so we use the raw cookie.\n  anonymousId = rawCookie('_sio');\n  if (anonymousId) {\n    anonymousId = anonymousId.split('----')[0];\n    store.set('ajs_anonymous_id', anonymousId);\n    store.remove('_sio');\n    return anonymousId;\n  }\n\n  // empty\n  anonymousId = uuid();\n  store.set('ajs_anonymous_id', anonymousId);\n  return store.get('ajs_anonymous_id');\n};\n\n/**\n * Remove anonymous id on logout too.\n */\n\nUser.prototype.logout = function(){\n  Entity.prototype.logout.call(this);\n  this.anonymousId(null);\n};\n\n/**\n * Load saved user `id` or `traits` from storage.\n */\n\nUser.prototype.load = function() {\n  if (this._loadOldCookie()) return;\n  Entity.prototype.load.call(this);\n};\n\n\n/**\n * BACKWARDS COMPATIBILITY: Load the old user from the cookie.\n *\n * @api private\n * @return {boolean}\n */\n\nUser.prototype._loadOldCookie = function() {\n  var user = cookie.get(this._options.cookie.oldKey);\n  if (!user) return false;\n\n  this.id(user.id);\n  this.traits(user.traits);\n  cookie.remove(this._options.cookie.oldKey);\n  return true;\n};\n\n\n/**\n * Expose the user singleton.\n */\n\nmodule.exports = bind.all(new User());\n\n\n/**\n * Expose the `User` constructor.\n */\n\nmodule.exports.User = User;\n\n}, {\"./entity\":66,\"bind\":11,\"./cookie\":14,\"debug\":15,\"inherit\":67,\"cookie\":58,\"uuid\":78}],\n78: [function(require, module, exports) {\n\n/**\n * Taken straight from jed's gist: https://gist.github.com/982883\n *\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f, and\n * y is replaced with a random hexadecimal digit from 8 to b.\n */\n\nmodule.exports = function uuid(a){\n  return a           // if the placeholder was passed, return\n    ? (              // a random number from 0 to 15\n      a ^            // unless b is 8,\n      Math.random()  // in which case\n      * 16           // a random number from\n      >> a/4         // 8 to 11\n      ).toString(16) // in hexadecimal\n    : (              // or otherwise a concatenated string:\n      [1e7] +        // 10000000 +\n      -1e3 +         // -1000 +\n      -4e3 +         // -4000 +\n      -8e3 +         // -80000000 +\n      -1e11          // -100000000000,\n      ).replace(     // replacing\n        /[018]/g,    // zeroes, ones, and eights with\n        uuid         // random hex digits\n      )\n};\n}, {}],\n7: [function(require, module, exports) {\nmodule.exports = {\n  \"name\": \"analytics-core\",\n  \"version\": \"2.10.0\",\n  \"main\": \"analytics.js\",\n  \"dependencies\": {},\n  \"devDependencies\": {}\n}\n;\n}, {}],\n3: [function(require, module, exports) {\n/* eslint quote-props: 0 */\n'use strict';\n\nmodule.exports = {\n  'adroll': require('analytics.js-integration-adroll'),\n  'adwords': require('analytics.js-integration-adwords'),\n  'alexa': require('analytics.js-integration-alexa'),\n  'amplitude': require('analytics.js-integration-amplitude'),\n  'appcues': require('analytics.js-integration-appcues'),\n  'atatus': require('analytics.js-integration-atatus'),\n  'autosend': require('analytics.js-integration-autosend'),\n  'awesm': require('analytics.js-integration-awesm'),\n  'bing-ads': require('analytics.js-integration-bing-ads'),\n  'blueshift': require('analytics.js-integration-blueshift'),\n  'bronto': require('analytics.js-integration-bronto'),\n  'bugherd': require('analytics.js-integration-bugherd'),\n  'bugsnag': require('analytics.js-integration-bugsnag'),\n  'chameleon': require('analytics.js-integration-chameleon'),\n  'chartbeat': require('analytics.js-integration-chartbeat'),\n  'clicktale': require('analytics.js-integration-clicktale'),\n  'clicky': require('analytics.js-integration-clicky'),\n  'comscore': require('analytics.js-integration-comscore'),\n  'crazy-egg': require('analytics.js-integration-crazy-egg'),\n  'curebit': require('analytics.js-integration-curebit'),\n  'customerio': require('analytics.js-integration-customerio'),\n  'drip': require('analytics.js-integration-drip'),\n  'elevio': require('analytics.js-integration-elevio'),\n  'errorception': require('analytics.js-integration-errorception'),\n  'evergage': require('analytics.js-integration-evergage'),\n  'extole': require('analytics.js-integration-extole'),\n  'facebook-conversion-tracking': require('analytics.js-integration-facebook-conversion-tracking'),\n  'facebook-custom-audiences': require('analytics.js-integration-facebook-custom-audiences'),\n  'foxmetrics': require('analytics.js-integration-foxmetrics'),\n  'frontleaf': require('analytics.js-integration-frontleaf'),\n  'fullstory': require('analytics.js-integration-fullstory'),\n  'gauges': require('analytics.js-integration-gauges'),\n  'get-satisfaction': require('analytics.js-integration-get-satisfaction'),\n  'google-analytics': require('analytics.js-integration-google-analytics'),\n  'google-tag-manager': require('analytics.js-integration-google-tag-manager'),\n  'gosquared': require('analytics.js-integration-gosquared'),\n  'heap': require('analytics.js-integration-heap'),\n  'hellobar': require('analytics.js-integration-hellobar'),\n  'hittail': require('analytics.js-integration-hittail'),\n  'hubspot': require('analytics.js-integration-hubspot'),\n  'improvely': require('analytics.js-integration-improvely'),\n  'insidevault': require('analytics.js-integration-insidevault'),\n  'inspectlet': require('analytics.js-integration-inspectlet'),\n  'intercom': require('analytics.js-integration-intercom'),\n  'keen-io': require('analytics.js-integration-keen-io'),\n  'kenshoo': require('analytics.js-integration-kenshoo'),\n  'kissmetrics': require('analytics.js-integration-kissmetrics'),\n  'klaviyo': require('analytics.js-integration-klaviyo'),\n  'livechat': require('analytics.js-integration-livechat'),\n  'lucky-orange': require('analytics.js-integration-lucky-orange'),\n  'lytics': require('analytics.js-integration-lytics'),\n  'mixpanel': require('analytics.js-integration-mixpanel'),\n  'mojn': require('analytics.js-integration-mojn'),\n  'mouseflow': require('analytics.js-integration-mouseflow'),\n  'mousestats': require('analytics.js-integration-mousestats'),\n  'navilytics': require('analytics.js-integration-navilytics'),\n  'nudgespot': require('analytics.js-integration-nudgespot'),\n  'olark': require('analytics.js-integration-olark'),\n  'optimizely': require('analytics.js-integration-optimizely'),\n  'outbound': require('analytics.js-integration-outbound'),\n  'perfect-audience': require('analytics.js-integration-perfect-audience'),\n  'pingdom': require('analytics.js-integration-pingdom'),\n  'piwik': require('analytics.js-integration-piwik'),\n  'preact': require('analytics.js-integration-preact'),\n  'qualaroo': require('analytics.js-integration-qualaroo'),\n  'quantcast': require('analytics.js-integration-quantcast'),\n  'rollbar': require('analytics.js-integration-rollbar'),\n  'route': require('analytics.js-integration-route'),\n  'saasquatch': require('analytics.js-integration-saasquatch'),\n  'satismeter': require('analytics.js-integration-satismeter'),\n  'segmentio': require('analytics.js-integration-segmentio'),\n  'sentry': require('analytics.js-integration-sentry'),\n  'snapengage': require('analytics.js-integration-snapengage'),\n  'spinnakr': require('analytics.js-integration-spinnakr'),\n  'supporthero': require('analytics.js-integration-supporthero'),\n  'taplytics': require('analytics.js-integration-taplytics'),\n  'tapstream': require('analytics.js-integration-tapstream'),\n  'trakio': require('analytics.js-integration-trakio'),\n  'twitter-ads': require('analytics.js-integration-twitter-ads'),\n  'userlike': require('analytics.js-integration-userlike'),\n  'uservoice': require('analytics.js-integration-uservoice'),\n  'vero': require('analytics.js-integration-vero'),\n  'visual-website-optimizer': require('analytics.js-integration-visual-website-optimizer'),\n  'webengage': require('analytics.js-integration-webengage'),\n  'woopra': require('analytics.js-integration-woopra'),\n  'wootric': require('analytics.js-integration-wootric'),\n  'yandex-metrica': require('analytics.js-integration-yandex-metrica')\n};\n\n}, {\"analytics.js-integration-adroll\":79,\"analytics.js-integration-adwords\":80,\"analytics.js-integration-alexa\":81,\"analytics.js-integration-amplitude\":82,\"analytics.js-integration-appcues\":83,\"analytics.js-integration-atatus\":84,\"analytics.js-integration-autosend\":85,\"analytics.js-integration-awesm\":86,\"analytics.js-integration-bing-ads\":87,\"analytics.js-integration-blueshift\":88,\"analytics.js-integration-bronto\":89,\"analytics.js-integration-bugherd\":90,\"analytics.js-integration-bugsnag\":91,\"analytics.js-integration-chameleon\":92,\"analytics.js-integration-chartbeat\":93,\"analytics.js-integration-clicktale\":94,\"analytics.js-integration-clicky\":95,\"analytics.js-integration-comscore\":96,\"analytics.js-integration-crazy-egg\":97,\"analytics.js-integration-curebit\":98,\"analytics.js-integration-customerio\":99,\"analytics.js-integration-drip\":100,\"analytics.js-integration-elevio\":101,\"analytics.js-integration-errorception\":102,\"analytics.js-integration-evergage\":103,\"analytics.js-integration-extole\":104,\"analytics.js-integration-facebook-conversion-tracking\":105,\"analytics.js-integration-facebook-custom-audiences\":106,\"analytics.js-integration-foxmetrics\":107,\"analytics.js-integration-frontleaf\":108,\"analytics.js-integration-fullstory\":109,\"analytics.js-integration-gauges\":110,\"analytics.js-integration-get-satisfaction\":111,\"analytics.js-integration-google-analytics\":112,\"analytics.js-integration-google-tag-manager\":113,\"analytics.js-integration-gosquared\":114,\"analytics.js-integration-heap\":115,\"analytics.js-integration-hellobar\":116,\"analytics.js-integration-hittail\":117,\"analytics.js-integration-hubspot\":118,\"analytics.js-integration-improvely\":119,\"analytics.js-integration-insidevault\":120,\"analytics.js-integration-inspectlet\":121,\"analytics.js-integration-intercom\":122,\"analytics.js-integration-keen-io\":123,\"analytics.js-integration-kenshoo\":124,\"analytics.js-integration-kissmetrics\":125,\"analytics.js-integration-klaviyo\":126,\"analytics.js-integration-livechat\":127,\"analytics.js-integration-lucky-orange\":128,\"analytics.js-integration-lytics\":129,\"analytics.js-integration-mixpanel\":130,\"analytics.js-integration-mojn\":131,\"analytics.js-integration-mouseflow\":132,\"analytics.js-integration-mousestats\":133,\"analytics.js-integration-navilytics\":134,\"analytics.js-integration-nudgespot\":135,\"analytics.js-integration-olark\":136,\"analytics.js-integration-optimizely\":137,\"analytics.js-integration-outbound\":138,\"analytics.js-integration-perfect-audience\":139,\"analytics.js-integration-pingdom\":140,\"analytics.js-integration-piwik\":141,\"analytics.js-integration-preact\":142,\"analytics.js-integration-qualaroo\":143,\"analytics.js-integration-quantcast\":144,\"analytics.js-integration-rollbar\":145,\"analytics.js-integration-route\":146,\"analytics.js-integration-saasquatch\":147,\"analytics.js-integration-satismeter\":148,\"analytics.js-integration-segmentio\":149,\"analytics.js-integration-sentry\":150,\"analytics.js-integration-snapengage\":151,\"analytics.js-integration-spinnakr\":152,\"analytics.js-integration-supporthero\":153,\"analytics.js-integration-taplytics\":154,\"analytics.js-integration-tapstream\":155,\"analytics.js-integration-trakio\":156,\"analytics.js-integration-twitter-ads\":157,\"analytics.js-integration-userlike\":158,\"analytics.js-integration-uservoice\":159,\"analytics.js-integration-vero\":160,\"analytics.js-integration-visual-website-optimizer\":161,\"analytics.js-integration-webengage\":162,\"analytics.js-integration-woopra\":163,\"analytics.js-integration-wootric\":164,\"analytics.js-integration-yandex-metrica\":165}],\n79: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar snake = require('to-snake-case');\nvar useHttps = require('use-https');\nvar each = require('each');\nvar is = require('is');\nvar del = require('obj-case').del;\n\n/**\n * Expose `AdRoll` integration.\n */\n\nvar AdRoll = module.exports = integration('AdRoll')\n  .assumesPageview()\n  .global('__adroll')\n  .global('__adroll_loaded')\n  .global('adroll_adv_id')\n  .global('adroll_custom_data')\n  .global('adroll_pix_id')\n  .option('advId', '')\n  .option('pixId', '')\n  .tag('http', '<script src=\"http://a.adroll.com/j/roundtrip.js\">')\n  .tag('https', '<script src=\"https://s.adroll.com/j/roundtrip.js\">')\n  .mapping('events');\n\n/**\n * Initialize.\n *\n * http://support.adroll.com/getting-started-in-4-easy-steps/#step-one\n * http://support.adroll.com/enhanced-conversion-tracking/\n *\n * @api public\n */\n\nAdRoll.prototype.initialize = function() {\n  window.adroll_adv_id = this.options.advId;\n  window.adroll_pix_id = this.options.pixId;\n  window.__adroll_loaded = true;\n  var name = useHttps() ? 'https' : 'http';\n  this.load(name, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nAdRoll.prototype.loaded = function() {\n  return !!window.__adroll;\n};\n\n/**\n * Page.\n *\n * http://support.adroll.com/segmenting-clicks/\n *\n * @api public\n * @param {Page} page\n */\n\nAdRoll.prototype.page = function(page) {\n  var name = page.fullName();\n  this.track(page.track(name));\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nAdRoll.prototype.track = function(track) {\n  var event = track.event();\n  var user = this.analytics.user();\n  var events = this.events(event);\n  var total = track.revenue() || track.total() || 0;\n  var orderId = track.orderId() || 0;\n  var productId = track.id();\n  var sku = track.sku();\n  var customProps = track.properties();\n\n  var data = {};\n  if (user.id()) data.user_id = user.id();\n  if (orderId) data.order_id = orderId;\n  if (productId) data.product_id = productId;\n  if (sku) data.sku = sku;\n  if (total) data.adroll_conversion_value_in_dollars = total;\n  del(customProps, 'revenue');\n  del(customProps, 'total');\n  del(customProps, 'orderId');\n  del(customProps, 'id');\n  del(customProps, 'sku');\n  if (!is.empty(customProps)) data.adroll_custom_data = customProps;\n\n  each(events, function(event) {\n    // the adroll interface only allows for\n    // segment names which are snake cased.\n    data.adroll_segments = snake(event);\n    window.__adroll.record_user(data);\n  });\n\n  // no events found\n  if (!events.length) {\n    data.adroll_segments = snake(event);\n    window.__adroll.record_user(data);\n  }\n};\n\n}, {\"analytics.js-integration\":166,\"to-snake-case\":167,\"use-https\":168,\"each\":4,\"is\":18,\"obj-case\":42}],\n166: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('bind');\nvar clone = require('clone');\nvar debug = require('debug');\nvar defaults = require('defaults');\nvar extend = require('extend');\nvar slug = require('slug');\nvar protos = require('./protos');\nvar statics = require('./statics');\n\n/**\n * Create a new `Integration` constructor.\n *\n * @constructs Integration\n * @param {string} name\n * @return {Function} Integration\n */\n\nfunction createIntegration(name){\n  /**\n   * Initialize a new `Integration`.\n   *\n   * @class\n   * @param {Object} options\n   */\n\n  function Integration(options){\n    if (options && options.addIntegration) {\n      // plugin\n      return options.addIntegration(Integration);\n    }\n    this.debug = debug('analytics:integration:' + slug(name));\n    this.options = defaults(clone(options) || {}, this.defaults);\n    this._queue = [];\n    this.once('ready', bind(this, this.flush));\n\n    Integration.emit('construct', this);\n    this.ready = bind(this, this.ready);\n    this._wrapInitialize();\n    this._wrapPage();\n    this._wrapTrack();\n  }\n\n  Integration.prototype.defaults = {};\n  Integration.prototype.globals = [];\n  Integration.prototype.templates = {};\n  Integration.prototype.name = name;\n  extend(Integration, statics);\n  extend(Integration.prototype, protos);\n\n  return Integration;\n}\n\n/**\n * Exports.\n */\n\nmodule.exports = createIntegration;\n\n}, {\"bind\":169,\"clone\":13,\"debug\":170,\"defaults\":16,\"extend\":171,\"slug\":172,\"./protos\":173,\"./statics\":174}],\n169: [function(require, module, exports) {\n\nvar bind = require('bind')\n  , bindAll = require('bind-all');\n\n\n/**\n * Expose `bind`.\n */\n\nmodule.exports = exports = bind;\n\n\n/**\n * Expose `bindAll`.\n */\n\nexports.all = bindAll;\n\n\n/**\n * Expose `bindMethods`.\n */\n\nexports.methods = bindMethods;\n\n\n/**\n * Bind `methods` on `obj` to always be called with the `obj` as context.\n *\n * @param {Object} obj\n * @param {String} methods...\n */\n\nfunction bindMethods (obj, methods) {\n  methods = [].slice.call(arguments, 1);\n  for (var i = 0, method; method = methods[i]; i++) {\n    obj[method] = bind(obj, obj[method]);\n  }\n  return obj;\n}\n}, {\"bind\":55,\"bind-all\":56}],\n170: [function(require, module, exports) {\nif ('undefined' == typeof window) {\n  module.exports = require('./lib/debug');\n} else {\n  module.exports = require('./debug');\n}\n\n}, {\"./lib/debug\":175,\"./debug\":176}],\n175: [function(require, module, exports) {\n/**\n * Module dependencies.\n */\n\nvar tty = require('tty');\n\n/**\n * Expose `debug()` as the module.\n */\n\nmodule.exports = debug;\n\n/**\n * Enabled debuggers.\n */\n\nvar names = []\n  , skips = [];\n\n(process.env.DEBUG || '')\n  .split(/[\\s,]+/)\n  .forEach(function(name){\n    name = name.replace('*', '.*?');\n    if (name[0] === '-') {\n      skips.push(new RegExp('^' + name.substr(1) + '$'));\n    } else {\n      names.push(new RegExp('^' + name + '$'));\n    }\n  });\n\n/**\n * Colors.\n */\n\nvar colors = [6, 2, 3, 4, 5, 1];\n\n/**\n * Previous debug() call.\n */\n\nvar prev = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Is stdout a TTY? Colored output is disabled when `true`.\n */\n\nvar isatty = tty.isatty(2);\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction color() {\n  return colors[prevColor++ % colors.length];\n}\n\n/**\n * Humanize the given `ms`.\n *\n * @param {Number} m\n * @return {String}\n * @api private\n */\n\nfunction humanize(ms) {\n  var sec = 1000\n    , min = 60 * 1000\n    , hour = 60 * min;\n\n  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';\n  if (ms >= min) return (ms / min).toFixed(1) + 'm';\n  if (ms >= sec) return (ms / sec | 0) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Create a debugger with the given `name`.\n *\n * @param {String} name\n * @return {Type}\n * @api public\n */\n\nfunction debug(name) {\n  function disabled(){}\n  disabled.enabled = false;\n\n  var match = skips.some(function(re){\n    return re.test(name);\n  });\n\n  if (match) return disabled;\n\n  match = names.some(function(re){\n    return re.test(name);\n  });\n\n  if (!match) return disabled;\n  var c = color();\n\n  function colored(fmt) {\n    fmt = coerce(fmt);\n\n    var curr = new Date;\n    var ms = curr - (prev[name] || curr);\n    prev[name] = curr;\n\n    fmt = '  \\u001b[9' + c + 'm' + name + ' '\n      + '\\u001b[3' + c + 'm\\u001b[90m'\n      + fmt + '\\u001b[3' + c + 'm'\n      + ' +' + humanize(ms) + '\\u001b[0m';\n\n    console.error.apply(this, arguments);\n  }\n\n  function plain(fmt) {\n    fmt = coerce(fmt);\n\n    fmt = new Date().toUTCString()\n      + ' ' + name + ' ' + fmt;\n    console.error.apply(this, arguments);\n  }\n\n  colored.enabled = plain.enabled = true;\n\n  return isatty || process.env.DEBUG_COLORS\n    ? colored\n    : plain;\n}\n\n/**\n * Coerce `val`.\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n}, {}],\n176: [function(require, module, exports) {\n\n/**\n * Expose `debug()` as the module.\n */\n\nmodule.exports = debug;\n\n/**\n * Create a debugger with the given `name`.\n *\n * @param {String} name\n * @return {Type}\n * @api public\n */\n\nfunction debug(name) {\n  if (!debug.enabled(name)) return function(){};\n\n  return function(fmt){\n    fmt = coerce(fmt);\n\n    var curr = new Date;\n    var ms = curr - (debug[name] || curr);\n    debug[name] = curr;\n\n    fmt = name\n      + ' '\n      + fmt\n      + ' +' + debug.humanize(ms);\n\n    // This hackery is required for IE8\n    // where `console.log` doesn't have 'apply'\n    window.console\n      && console.log\n      && Function.prototype.apply.call(console.log, console, arguments);\n  }\n}\n\n/**\n * The currently active debug mode names.\n */\n\ndebug.names = [];\ndebug.skips = [];\n\n/**\n * Enables a debug mode by name. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} name\n * @api public\n */\n\ndebug.enable = function(name) {\n  try {\n    localStorage.debug = name;\n  } catch(e){}\n\n  var split = (name || '').split(/[\\s,]+/)\n    , len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    name = split[i].replace('*', '.*?');\n    if (name[0] === '-') {\n      debug.skips.push(new RegExp('^' + name.substr(1) + '$'));\n    }\n    else {\n      debug.names.push(new RegExp('^' + name + '$'));\n    }\n  }\n};\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\ndebug.disable = function(){\n  debug.enable('');\n};\n\n/**\n * Humanize the given `ms`.\n *\n * @param {Number} m\n * @return {String}\n * @api private\n */\n\ndebug.humanize = function(ms) {\n  var sec = 1000\n    , min = 60 * 1000\n    , hour = 60 * min;\n\n  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';\n  if (ms >= min) return (ms / min).toFixed(1) + 'm';\n  if (ms >= sec) return (ms / sec | 0) + 's';\n  return ms + 'ms';\n};\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\ndebug.enabled = function(name) {\n  for (var i = 0, len = debug.skips.length; i < len; i++) {\n    if (debug.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (var i = 0, len = debug.names.length; i < len; i++) {\n    if (debug.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Coerce `val`.\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n// persist\n\ntry {\n  if (window.localStorage) debug.enable(localStorage.debug);\n} catch(e){}\n\n}, {}],\n171: [function(require, module, exports) {\n\nmodule.exports = function extend (object) {\n    // Takes an unlimited number of extenders.\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    // For each extender, copy their properties on our object.\n    for (var i = 0, source; source = args[i]; i++) {\n        if (!source) continue;\n        for (var property in source) {\n            object[property] = source[property];\n        }\n    }\n\n    return object;\n};\n}, {}],\n172: [function(require, module, exports) {\n\n/**\n * Generate a slug from the given `str`.\n *\n * example:\n *\n *        generate('foo bar');\n *        // > foo-bar\n *\n * @param {String} str\n * @param {Object} options\n * @config {String|RegExp} [replace] characters to replace, defaulted to `/[^a-z0-9]/g`\n * @config {String} [separator] separator to insert, defaulted to `-`\n * @return {String}\n */\n\nmodule.exports = function (str, options) {\n  options || (options = {});\n  return str.toLowerCase()\n    .replace(options.replace || /[^a-z0-9]/g, ' ')\n    .replace(/^ +| +$/g, '')\n    .replace(/ +/g, options.separator || '-')\n};\n\n}, {}],\n173: [function(require, module, exports) {\n/* global setInterval:true setTimeout:true */\n\n/**\n * Module dependencies.\n */\n\nvar Emitter = require('emitter');\nvar after = require('after');\nvar each = require('each');\nvar events = require('analytics-events');\nvar fmt = require('fmt');\nvar foldl = require('foldl');\nvar loadIframe = require('load-iframe');\nvar loadScript = require('load-script');\nvar normalize = require('to-no-case');\nvar nextTick = require('next-tick');\nvar type = require('type');\n\n/**\n * Noop.\n */\n\nfunction noop(){}\n\n/**\n * hasOwnProperty reference.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Window defaults.\n */\n\nvar onerror = window.onerror;\nvar onload = null;\nvar setInterval = window.setInterval;\nvar setTimeout = window.setTimeout;\n\n/**\n * Mixin emitter.\n */\n\n/* eslint-disable new-cap */\nEmitter(exports);\n/* eslint-enable new-cap */\n\n/**\n * Initialize.\n */\n\nexports.initialize = function(){\n  var ready = this.ready;\n  nextTick(ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nexports.loaded = function(){\n  return false;\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\n/* eslint-disable no-unused-vars */\nexports.page = function(page){};\n/* eslint-enable no-unused-vars */\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\n/* eslint-disable no-unused-vars */\nexports.track = function(track){};\n/* eslint-enable no-unused-vars */\n\n/**\n * Get events that match `event`.\n *\n * @api public\n * @param {Object|Object[]} events An object or array of objects pulled from\n * settings.mapping.\n * @param {string} event The name of the event whose metdata we're looking for.\n * @return {Array} An array of settings that match the input `event` name.\n * @example\n * var events = { my_event: 'a4991b88' };\n * .map(events, 'My Event');\n * // => [\"a4991b88\"]\n * .map(events, 'whatever');\n * // => []\n *\n * var events = [{ key: 'my event', value: '9b5eb1fa' }];\n * .map(events, 'my_event');\n * // => [\"9b5eb1fa\"]\n * .map(events, 'whatever');\n * // => []\n */\n\nexports.map = function(events, event){\n  var normalizedEvent = normalize(event);\n\n  return foldl(function(matchingEvents, val, key, events) {\n    // If true, this is a `mixed` value, which is structured like so:\n    //     { key: 'testEvent', value: { event: 'testEvent', someValue: 'xyz' } }\n    // We need to extract the key, which we use to match against\n    // `normalizedEvent`, and return `value` as part of `matchingEvents` if that\n    // match succeds.\n    if (type(events) === 'array') {\n      // If there's no key attached to this event mapping (unusual), skip this\n      // item.\n      if (!val.key) return matchingEvents;\n      // Extract the key and value from the `mixed` object.\n      key = val.key;\n      val = val.value;\n    }\n\n    if (normalize(key) === normalizedEvent) {\n      matchingEvents.push(val);\n    }\n\n    return matchingEvents;\n  }, [], events);\n};\n\n/**\n * Invoke a `method` that may or may not exist on the prototype with `args`,\n * queueing or not depending on whether the integration is \"ready\". Don't\n * trust the method call, since it contains integration party code.\n *\n * @api private\n * @param {string} method\n * @param {...*} args\n */\n\nexports.invoke = function(method){\n  if (!this[method]) return;\n  var args = Array.prototype.slice.call(arguments, 1);\n  if (!this._ready) return this.queue(method, args);\n  var ret;\n\n  try {\n    this.debug('%s with %o', method, args);\n    ret = this[method].apply(this, args);\n  } catch (e) {\n    this.debug('error %o calling %s with %o', e, method, args);\n  }\n\n  return ret;\n};\n\n/**\n * Queue a `method` with `args`. If the integration assumes an initial\n * pageview, then let the first call to `page` pass through.\n *\n * @api private\n * @param {string} method\n * @param {Array} args\n */\n\nexports.queue = function(method, args){\n  if (method === 'page' && this._assumesPageview && !this._initialized) {\n    return this.page.apply(this, args);\n  }\n\n  this._queue.push({ method: method, args: args });\n};\n\n/**\n * Flush the internal queue.\n *\n * @api private\n */\n\nexports.flush = function(){\n  this._ready = true;\n  var self = this;\n\n  each(this._queue, function(call){\n    self[call.method].apply(self, call.args);\n  });\n\n  // Empty the queue.\n  this._queue.length = 0;\n};\n\n/**\n * Reset the integration, removing its global variables.\n *\n * @api private\n */\n\nexports.reset = function(){\n  for (var i = 0; i < this.globals.length; i++) {\n    window[this.globals[i]] = undefined;\n  }\n\n  window.setTimeout = setTimeout;\n  window.setInterval = setInterval;\n  window.onerror = onerror;\n  window.onload = onload;\n};\n\n/**\n * Load a tag by `name`.\n *\n * @param {string} name The name of the tag.\n * @param {Object} locals Locals used to populate the tag's template variables\n * (e.g. `userId` in '<img src=\"https://whatever.com/{{ userId }}\">').\n * @param {Function} [callback=noop] A callback, invoked when the tag finishes\n * loading.\n */\n\nexports.load = function(name, locals, callback){\n  // Argument shuffling\n  if (typeof name === 'function') { callback = name; locals = null; name = null; }\n  if (name && typeof name === 'object') { callback = locals; locals = name; name = null; }\n  if (typeof locals === 'function') { callback = locals; locals = null; }\n\n  // Default arguments\n  name = name || 'library';\n  locals = locals || {};\n\n  locals = this.locals(locals);\n  var template = this.templates[name];\n  if (!template) throw new Error(fmt('template \"%s\" not defined.', name));\n  var attrs = render(template, locals);\n  callback = callback || noop;\n  var self = this;\n  var el;\n\n  switch (template.type) {\n    case 'img':\n      attrs.width = 1;\n      attrs.height = 1;\n      el = loadImage(attrs, callback);\n      break;\n    case 'script':\n      el = loadScript(attrs, function(err){\n        if (!err) return callback();\n        self.debug('error loading \"%s\" error=\"%s\"', self.name, err);\n      });\n      // TODO: hack until refactoring load-script\n      delete attrs.src;\n      each(attrs, function(key, val){\n        el.setAttribute(key, val);\n      });\n      break;\n    case 'iframe':\n      el = loadIframe(attrs, callback);\n      break;\n    default:\n      // No default case\n  }\n\n  return el;\n};\n\n/**\n * Locals for tag templates.\n *\n * By default it includes a cache buster and all of the options.\n *\n * @param {Object} [locals]\n * @return {Object}\n */\n\nexports.locals = function(locals){\n  locals = locals || {};\n  var cache = Math.floor(new Date().getTime() / 3600000);\n  if (!locals.hasOwnProperty('cache')) locals.cache = cache;\n  each(this.options, function(key, val){\n    if (!locals.hasOwnProperty(key)) locals[key] = val;\n  });\n  return locals;\n};\n\n/**\n * Simple way to emit ready.\n *\n * @api public\n */\n\nexports.ready = function(){\n  this.emit('ready');\n};\n\n/**\n * Wrap the initialize method in an exists check, so we don't have to do it for\n * every single integration.\n *\n * @api private\n */\n\nexports._wrapInitialize = function(){\n  var initialize = this.initialize;\n  this.initialize = function(){\n    this.debug('initialize');\n    this._initialized = true;\n    var ret = initialize.apply(this, arguments);\n    this.emit('initialize');\n    return ret;\n  };\n\n  if (this._assumesPageview) this.initialize = after(2, this.initialize);\n};\n\n/**\n * Wrap the page method to call `initialize` instead if the integration assumes\n * a pageview.\n *\n * @api private\n */\n\nexports._wrapPage = function(){\n  var page = this.page;\n  this.page = function(){\n    if (this._assumesPageview && !this._initialized) {\n      return this.initialize.apply(this, arguments);\n    }\n\n    return page.apply(this, arguments);\n  };\n};\n\n/**\n * Wrap the track method to call other ecommerce methods if available depending\n * on the `track.event()`.\n *\n * @api private\n */\n\nexports._wrapTrack = function(){\n  var t = this.track;\n  this.track = function(track){\n    var event = track.event();\n    var called;\n    var ret;\n\n    for (var method in events) {\n      if (has.call(events, method)) {\n        var regexp = events[method];\n        if (!this[method]) continue;\n        if (!regexp.test(event)) continue;\n        ret = this[method].apply(this, arguments);\n        called = true;\n        break;\n      }\n    }\n\n    if (!called) ret = t.apply(this, arguments);\n    return ret;\n  };\n};\n\n/**\n * TODO: Document me\n *\n * @api private\n * @param {Object} attrs\n * @param {Function} fn\n * @return {undefined}\n */\n\nfunction loadImage(attrs, fn){\n  fn = fn || function(){};\n  var img = new Image();\n  img.onerror = error(fn, 'failed to load pixel', img);\n  img.onload = function(){ fn(); };\n  img.src = attrs.src;\n  img.width = 1;\n  img.height = 1;\n  return img;\n}\n\n/**\n * TODO: Document me\n *\n * @api private\n * @param {Function} fn\n * @param {string} message\n * @param {Element} img\n * @return {Function}\n */\n\nfunction error(fn, message, img){\n  return function(e){\n    e = e || window.event;\n    var err = new Error(message);\n    err.event = e;\n    err.source = img;\n    fn(err);\n  };\n}\n\n/**\n * Render template + locals into an `attrs` object.\n *\n * @api private\n * @param {Object} template\n * @param {Object} locals\n * @return {Object}\n */\n\nfunction render(template, locals){\n  return foldl(function(attrs, val, key) {\n    attrs[key] = val.replace(/\\{\\{\\ *(\\w+)\\ *\\}\\}/g, function(_, $1){\n      return locals[$1];\n    });\n    return attrs;\n  }, {}, template.attrs);\n}\n\n}, {\"emitter\":8,\"after\":10,\"each\":177,\"analytics-events\":178,\"fmt\":179,\"foldl\":180,\"load-iframe\":181,\"load-script\":182,\"to-no-case\":183,\"next-tick\":57,\"type\":184}],\n177: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\ntry {\n  var type = require('type');\n} catch (err) {\n  var type = require('component-type');\n}\n\nvar toFunction = require('to-function');\n\n/**\n * HOP reference.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Iterate the given `obj` and invoke `fn(val, i)`\n * in optional context `ctx`.\n *\n * @param {String|Array|Object} obj\n * @param {Function} fn\n * @param {Object} [ctx]\n * @api public\n */\n\nmodule.exports = function(obj, fn, ctx){\n  fn = toFunction(fn);\n  ctx = ctx || this;\n  switch (type(obj)) {\n    case 'array':\n      return array(obj, fn, ctx);\n    case 'object':\n      if ('number' == typeof obj.length) return array(obj, fn, ctx);\n      return object(obj, fn, ctx);\n    case 'string':\n      return string(obj, fn, ctx);\n  }\n};\n\n/**\n * Iterate string chars.\n *\n * @param {String} obj\n * @param {Function} fn\n * @param {Object} ctx\n * @api private\n */\n\nfunction string(obj, fn, ctx) {\n  for (var i = 0; i < obj.length; ++i) {\n    fn.call(ctx, obj.charAt(i), i);\n  }\n}\n\n/**\n * Iterate object keys.\n *\n * @param {Object} obj\n * @param {Function} fn\n * @param {Object} ctx\n * @api private\n */\n\nfunction object(obj, fn, ctx) {\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      fn.call(ctx, key, obj[key]);\n    }\n  }\n}\n\n/**\n * Iterate array-ish.\n *\n * @param {Array|Object} obj\n * @param {Function} fn\n * @param {Object} ctx\n * @api private\n */\n\nfunction array(obj, fn, ctx) {\n  for (var i = 0; i < obj.length; ++i) {\n    fn.call(ctx, obj[i], i);\n  }\n}\n\n}, {\"type\":184,\"component-type\":184,\"to-function\":74}],\n184: [function(require, module, exports) {\n\n/**\n * toString ref.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Return the type of `val`.\n *\n * @param {Mixed} val\n * @return {String}\n * @api public\n */\n\nmodule.exports = function(val){\n  switch (toString.call(val)) {\n    case '[object Function]': return 'function';\n    case '[object Date]': return 'date';\n    case '[object RegExp]': return 'regexp';\n    case '[object Arguments]': return 'arguments';\n    case '[object Array]': return 'array';\n    case '[object String]': return 'string';\n  }\n\n  if (val === null) return 'null';\n  if (val === undefined) return 'undefined';\n  if (val && val.nodeType === 1) return 'element';\n  if (val === Object(val)) return 'object';\n\n  return typeof val;\n};\n\n}, {}],\n178: [function(require, module, exports) {\n\nmodule.exports = {\n  removedProduct: /^[ _]?removed[ _]?product[ _]?$/i,\n  viewedProduct: /^[ _]?viewed[ _]?product[ _]?$/i,\n  viewedProductCategory: /^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,\n  addedProduct: /^[ _]?added[ _]?product[ _]?$/i,\n  completedOrder: /^[ _]?completed[ _]?order[ _]?$/i,\n  startedOrder: /^[ _]?started[ _]?order[ _]?$/i,\n  updatedOrder: /^[ _]?updated[ _]?order[ _]?$/i,\n  refundedOrder: /^[ _]?refunded?[ _]?order[ _]?$/i,\n  viewedProductDetails: /^[ _]?viewed[ _]?product[ _]?details?[ _]?$/i,\n  clickedProduct: /^[ _]?clicked[ _]?product[ _]?$/i,\n  viewedPromotion: /^[ _]?viewed[ _]?promotion?[ _]?$/i,\n  clickedPromotion: /^[ _]?clicked[ _]?promotion?[ _]?$/i,\n  viewedCheckoutStep: /^[ _]?viewed[ _]?checkout[ _]?step[ _]?$/i,\n  completedCheckoutStep: /^[ _]?completed[ _]?checkout[ _]?step[ _]?$/i\n};\n\n}, {}],\n179: [function(require, module, exports) {\n\n/**\n * toString.\n */\n\nvar toString = window.JSON\n  ? JSON.stringify\n  : function(_){ return String(_); };\n\n/**\n * Export `fmt`\n */\n\nmodule.exports = fmt;\n\n/**\n * Formatters\n */\n\nfmt.o = toString;\nfmt.s = String;\nfmt.d = parseInt;\n\n/**\n * Format the given `str`.\n *\n * @param {String} str\n * @param {...} args\n * @return {String}\n * @api public\n */\n\nfunction fmt(str){\n  var args = [].slice.call(arguments, 1);\n  var j = 0;\n\n  return str.replace(/%([a-z])/gi, function(_, f){\n    return fmt[f]\n      ? fmt[f](args[j++])\n      : _ + f;\n  });\n}\n\n}, {}],\n180: [function(require, module, exports) {\n'use strict';\n\n/**\n * Module dependencies.\n */\n\n// XXX: Hacky fix for Duo not supporting scoped modules\nvar each; try { each = require('@ndhoule/each'); } catch(e) { each = require('each'); }\n\n/**\n * Reduces all the values in a collection down into a single value. Does so by iterating through the\n * collection from left to right, repeatedly calling an `iterator` function and passing to it four\n * arguments: `(accumulator, value, index, collection)`.\n *\n * Returns the final return value of the `iterator` function.\n *\n * @name foldl\n * @api public\n * @param {Function} iterator The function to invoke per iteration.\n * @param {*} accumulator The initial accumulator value, passed to the first invocation of `iterator`.\n * @param {Array|Object} collection The collection to iterate over.\n * @return {*} The return value of the final call to `iterator`.\n * @example\n * foldl(function(total, n) {\n *   return total + n;\n * }, 0, [1, 2, 3]);\n * //=> 6\n *\n * var phonebook = { bob: '555-111-2345', tim: '655-222-6789', sheila: '655-333-1298' };\n *\n * foldl(function(results, phoneNumber) {\n *  if (phoneNumber[0] === '6') {\n *    return results.concat(phoneNumber);\n *  }\n *  return results;\n * }, [], phonebook);\n * // => ['655-222-6789', '655-333-1298']\n */\n\nvar foldl = function foldl(iterator, accumulator, collection) {\n  if (typeof iterator !== 'function') {\n    throw new TypeError('Expected a function but received a ' + typeof iterator);\n  }\n\n  each(function(val, i, collection) {\n    accumulator = iterator(accumulator, val, i, collection);\n  }, collection);\n\n  return accumulator;\n};\n\n/**\n * Exports.\n */\n\nmodule.exports = foldl;\n\n}, {\"each\":72}],\n181: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar onload = require('script-onload');\nvar tick = require('next-tick');\nvar type = require('type');\n\n/**\n * Expose `loadScript`.\n *\n * @param {Object} options\n * @param {Function} fn\n * @api public\n */\n\nmodule.exports = function loadIframe(options, fn){\n  if (!options) throw new Error('Cant load nothing...');\n\n  // Allow for the simplest case, just passing a `src` string.\n  if ('string' == type(options)) options = { src : options };\n\n  var https = document.location.protocol === 'https:' ||\n              document.location.protocol === 'chrome-extension:';\n\n  // If you use protocol relative URLs, third-party scripts like Google\n  // Analytics break when testing with `file:` so this fixes that.\n  if (options.src && options.src.indexOf('//') === 0) {\n    options.src = https ? 'https:' + options.src : 'http:' + options.src;\n  }\n\n  // Allow them to pass in different URLs depending on the protocol.\n  if (https && options.https) options.src = options.https;\n  else if (!https && options.http) options.src = options.http;\n\n  // Make the `<iframe>` element and insert it before the first iframe on the\n  // page, which is guaranteed to exist since this Javaiframe is running.\n  var iframe = document.createElement('iframe');\n  iframe.src = options.src;\n  iframe.width = options.width || 1;\n  iframe.height = options.height || 1;\n  iframe.style.display = 'none';\n\n  // If we have a fn, attach event handlers, even in IE. Based off of\n  // the Third-Party Javascript script loading example:\n  // https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html\n  if ('function' == type(fn)) {\n    onload(iframe, fn);\n  }\n\n  tick(function(){\n    // Append after event listeners are attached for IE.\n    var firstScript = document.getElementsByTagName('script')[0];\n    firstScript.parentNode.insertBefore(iframe, firstScript);\n  });\n\n  // Return the iframe element in case they want to do anything special, like\n  // give it an ID or attributes.\n  return iframe;\n};\n}, {\"script-onload\":185,\"next-tick\":57,\"type\":47}],\n185: [function(require, module, exports) {\n\n// https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html\n\n/**\n * Invoke `fn(err)` when the given `el` script loads.\n *\n * @param {Element} el\n * @param {Function} fn\n * @api public\n */\n\nmodule.exports = function(el, fn){\n  return el.addEventListener\n    ? add(el, fn)\n    : attach(el, fn);\n};\n\n/**\n * Add event listener to `el`, `fn()`.\n *\n * @param {Element} el\n * @param {Function} fn\n * @api private\n */\n\nfunction add(el, fn){\n  el.addEventListener('load', function(_, e){ fn(null, e); }, false);\n  el.addEventListener('error', function(e){\n    var err = new Error('script error \"' + el.src + '\"');\n    err.event = e;\n    fn(err);\n  }, false);\n}\n\n/**\n * Attach event.\n *\n * @param {Element} el\n * @param {Function} fn\n * @api private\n */\n\nfunction attach(el, fn){\n  el.attachEvent('onreadystatechange', function(e){\n    if (!/complete|loaded/.test(el.readyState)) return;\n    fn(null, e);\n  });\n  el.attachEvent('onerror', function(e){\n    var err = new Error('failed to load the script \"' + el.src + '\"');\n    err.event = e || window.event;\n    fn(err);\n  });\n}\n\n}, {}],\n182: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar onload = require('script-onload');\nvar tick = require('next-tick');\nvar type = require('type');\n\n/**\n * Expose `loadScript`.\n *\n * @param {Object} options\n * @param {Function} fn\n * @api public\n */\n\nmodule.exports = function loadScript(options, fn){\n  if (!options) throw new Error('Cant load nothing...');\n\n  // Allow for the simplest case, just passing a `src` string.\n  if ('string' == type(options)) options = { src : options };\n\n  var https = document.location.protocol === 'https:' ||\n              document.location.protocol === 'chrome-extension:';\n\n  // If you use protocol relative URLs, third-party scripts like Google\n  // Analytics break when testing with `file:` so this fixes that.\n  if (options.src && options.src.indexOf('//') === 0) {\n    options.src = https ? 'https:' + options.src : 'http:' + options.src;\n  }\n\n  // Allow them to pass in different URLs depending on the protocol.\n  if (https && options.https) options.src = options.https;\n  else if (!https && options.http) options.src = options.http;\n\n  // Make the `<script>` element and insert it before the first script on the\n  // page, which is guaranteed to exist since this Javascript is running.\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.src = options.src;\n\n  // If we have a fn, attach event handlers, even in IE. Based off of\n  // the Third-Party Javascript script loading example:\n  // https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html\n  if ('function' == type(fn)) {\n    onload(script, fn);\n  }\n\n  tick(function(){\n    // Append after event listeners are attached for IE.\n    var firstScript = document.getElementsByTagName('script')[0];\n    firstScript.parentNode.insertBefore(script, firstScript);\n  });\n\n  // Return the script element in case they want to do anything special, like\n  // give it an ID or attributes.\n  return script;\n};\n}, {\"script-onload\":185,\"next-tick\":57,\"type\":47}],\n183: [function(require, module, exports) {\n\n/**\n * Expose `toNoCase`.\n */\n\nmodule.exports = toNoCase;\n\n\n/**\n * Test whether a string is camel-case.\n */\n\nvar hasSpace = /\\s/;\nvar hasSeparator = /[\\W_]/;\n\n\n/**\n * Remove any starting case from a `string`, like camel or snake, but keep\n * spaces and punctuation that may be important otherwise.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toNoCase (string) {\n  if (hasSpace.test(string)) return string.toLowerCase();\n  if (hasSeparator.test(string)) return unseparate(string).toLowerCase();\n  return uncamelize(string).toLowerCase();\n}\n\n\n/**\n * Separator splitter.\n */\n\nvar separatorSplitter = /[\\W_]+(.|$)/g;\n\n\n/**\n * Un-separate a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction unseparate (string) {\n  return string.replace(separatorSplitter, function (m, next) {\n    return next ? ' ' + next : '';\n  });\n}\n\n\n/**\n * Camelcase splitter.\n */\n\nvar camelSplitter = /(.)([A-Z]+)/g;\n\n\n/**\n * Un-camelcase a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction uncamelize (string) {\n  return string.replace(camelSplitter, function (m, previous, uppers) {\n    return previous + ' ' + uppers.toLowerCase().split('').join(' ');\n  });\n}\n}, {}],\n174: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Emitter = require('emitter');\nvar domify = require('domify');\nvar each = require('each');\nvar includes = require('includes');\n\n/**\n * Mix in emitter.\n */\n\n/* eslint-disable new-cap */\nEmitter(exports);\n/* eslint-enable new-cap */\n\n/**\n * Add a new option to the integration by `key` with default `value`.\n *\n * @api public\n * @param {string} key\n * @param {*} value\n * @return {Integration}\n */\n\nexports.option = function(key, value){\n  this.prototype.defaults[key] = value;\n  return this;\n};\n\n/**\n * Add a new mapping option.\n *\n * This will create a method `name` that will return a mapping for you to use.\n *\n * @api public\n * @param {string} name\n * @return {Integration}\n * @example\n * Integration('My Integration')\n *   .mapping('events');\n *\n * new MyIntegration().track('My Event');\n *\n * .track = function(track){\n *   var events = this.events(track.event());\n *   each(events, send);\n *  };\n */\n\nexports.mapping = function(name){\n  this.option(name, []);\n  this.prototype[name] = function(str){\n    return this.map(this.options[name], str);\n  };\n  return this;\n};\n\n/**\n * Register a new global variable `key` owned by the integration, which will be\n * used to test whether the integration is already on the page.\n *\n * @api public\n * @param {string} key\n * @return {Integration}\n */\n\nexports.global = function(key){\n  this.prototype.globals.push(key);\n  return this;\n};\n\n/**\n * Mark the integration as assuming an initial pageview, so to defer loading\n * the script until the first `page` call, noop the first `initialize`.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.assumesPageview = function(){\n  this.prototype._assumesPageview = true;\n  return this;\n};\n\n/**\n * Mark the integration as being \"ready\" once `load` is called.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.readyOnLoad = function(){\n  this.prototype._readyOnLoad = true;\n  return this;\n};\n\n/**\n * Mark the integration as being \"ready\" once `initialize` is called.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.readyOnInitialize = function(){\n  this.prototype._readyOnInitialize = true;\n  return this;\n};\n\n/**\n * Define a tag to be loaded.\n *\n * @api public\n * @param {string} [name='library'] A nicename for the tag, commonly used in\n * #load. Helpful when the integration has multiple tags and you need a way to\n * specify which of the tags you want to load at a given time.\n * @param {String} str DOM tag as string or URL.\n * @return {Integration}\n */\n\nexports.tag = function(name, tag){\n  if (tag == null) {\n    tag = name;\n    name = 'library';\n  }\n  this.prototype.templates[name] = objectify(tag);\n  return this;\n};\n\n/**\n * Given a string, give back DOM attributes.\n *\n * Do it in a way where the browser doesn't load images or iframes. It turns\n * out domify will load images/iframes because whenever you construct those\n * DOM elements, the browser immediately loads them.\n *\n * @api private\n * @param {string} str\n * @return {Object}\n */\n\nfunction objectify(str) {\n  // replace `src` with `data-src` to prevent image loading\n  str = str.replace(' src=\"', ' data-src=\"');\n\n  var el = domify(str);\n  var attrs = {};\n\n  each(el.attributes, function(attr){\n    // then replace it back\n    var name = attr.name === 'data-src' ? 'src' : attr.name;\n    if (!includes(attr.name + '=', str)) return;\n    attrs[name] = attr.value;\n  });\n\n  return {\n    type: el.tagName.toLowerCase(),\n    attrs: attrs\n  };\n}\n\n}, {\"emitter\":8,\"domify\":186,\"each\":177,\"includes\":70}],\n186: [function(require, module, exports) {\n\n/**\n * Expose `parse`.\n */\n\nmodule.exports = parse;\n\n/**\n * Tests for browser support.\n */\n\nvar div = document.createElement('div');\n// Setup\ndiv.innerHTML = '  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>';\n// Make sure that link elements get serialized correctly by innerHTML\n// This requires a wrapper element in IE\nvar innerHTMLBug = !div.getElementsByTagName('link').length;\ndiv = undefined;\n\n/**\n * Wrap map from jquery.\n */\n\nvar map = {\n  legend: [1, '<fieldset>', '</fieldset>'],\n  tr: [2, '<table><tbody>', '</tbody></table>'],\n  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n  // for script/link/style tags to work in IE6-8, you have to wrap\n  // in a div with a non-whitespace character in front, ha!\n  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']\n};\n\nmap.td =\nmap.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];\n\nmap.option =\nmap.optgroup = [1, '<select multiple=\"multiple\">', '</select>'];\n\nmap.thead =\nmap.tbody =\nmap.colgroup =\nmap.caption =\nmap.tfoot = [1, '<table>', '</table>'];\n\nmap.polyline =\nmap.ellipse =\nmap.polygon =\nmap.circle =\nmap.text =\nmap.line =\nmap.path =\nmap.rect =\nmap.g = [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">','</svg>'];\n\n/**\n * Parse `html` and return a DOM Node instance, which could be a TextNode,\n * HTML DOM Node of some kind (<div> for example), or a DocumentFragment\n * instance, depending on the contents of the `html` string.\n *\n * @param {String} html - HTML string to \"domify\"\n * @param {Document} doc - The `document` instance to create the Node for\n * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance\n * @api private\n */\n\nfunction parse(html, doc) {\n  if ('string' != typeof html) throw new TypeError('String expected');\n\n  // default to the global `document` object\n  if (!doc) doc = document;\n\n  // tag name\n  var m = /<([\\w:]+)/.exec(html);\n  if (!m) return doc.createTextNode(html);\n\n  html = html.replace(/^\\s+|\\s+$/g, ''); // Remove leading/trailing whitespace\n\n  var tag = m[1];\n\n  // body support\n  if (tag == 'body') {\n    var el = doc.createElement('html');\n    el.innerHTML = html;\n    return el.removeChild(el.lastChild);\n  }\n\n  // wrap map\n  var wrap = map[tag] || map._default;\n  var depth = wrap[0];\n  var prefix = wrap[1];\n  var suffix = wrap[2];\n  var el = doc.createElement('div');\n  el.innerHTML = prefix + html + suffix;\n  while (depth--) el = el.lastChild;\n\n  // one element\n  if (el.firstChild == el.lastChild) {\n    return el.removeChild(el.firstChild);\n  }\n\n  // several elements\n  var fragment = doc.createDocumentFragment();\n  while (el.firstChild) {\n    fragment.appendChild(el.removeChild(el.firstChild));\n  }\n\n  return fragment;\n}\n\n}, {}],\n167: [function(require, module, exports) {\nvar toSpace = require('to-space-case');\n\n\n/**\n * Expose `toSnakeCase`.\n */\n\nmodule.exports = toSnakeCase;\n\n\n/**\n * Convert a `string` to snake case.\n *\n * @param {String} string\n * @return {String}\n */\n\n\nfunction toSnakeCase (string) {\n  return toSpace(string).replace(/\\s/g, '_');\n}\n\n}, {\"to-space-case\":187}],\n187: [function(require, module, exports) {\n\nvar clean = require('to-no-case');\n\n\n/**\n * Expose `toSpaceCase`.\n */\n\nmodule.exports = toSpaceCase;\n\n\n/**\n * Convert a `string` to space case.\n *\n * @param {String} string\n * @return {String}\n */\n\n\nfunction toSpaceCase (string) {\n  return clean(string).replace(/[\\W_]+(.|$)/g, function (matches, match) {\n    return match ? ' ' + match : '';\n  });\n}\n}, {\"to-no-case\":188}],\n188: [function(require, module, exports) {\n\n/**\n * Expose `toNoCase`.\n */\n\nmodule.exports = toNoCase;\n\n\n/**\n * Test whether a string is camel-case.\n */\n\nvar hasSpace = /\\s/;\nvar hasCamel = /[a-z][A-Z]/;\nvar hasSeparator = /[\\W_]/;\n\n\n/**\n * Remove any starting case from a `string`, like camel or snake, but keep\n * spaces and punctuation that may be important otherwise.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toNoCase (string) {\n  if (hasSpace.test(string)) return string.toLowerCase();\n\n  if (hasSeparator.test(string)) string = unseparate(string);\n  if (hasCamel.test(string)) string = uncamelize(string);\n  return string.toLowerCase();\n}\n\n\n/**\n * Separator splitter.\n */\n\nvar separatorSplitter = /[\\W_]+(.|$)/g;\n\n\n/**\n * Un-separate a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction unseparate (string) {\n  return string.replace(separatorSplitter, function (m, next) {\n    return next ? ' ' + next : '';\n  });\n}\n\n\n/**\n * Camelcase splitter.\n */\n\nvar camelSplitter = /(.)([A-Z]+)/g;\n\n\n/**\n * Un-camelcase a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction uncamelize (string) {\n  return string.replace(camelSplitter, function (m, previous, uppers) {\n    return previous + ' ' + uppers.toLowerCase().split('').join(' ');\n  });\n}\n}, {}],\n168: [function(require, module, exports) {\n\n/**\n * Protocol.\n */\n\nmodule.exports = function (url) {\n  switch (arguments.length) {\n    case 0: return check();\n    case 1: return transform(url);\n  }\n};\n\n\n/**\n * Transform a protocol-relative `url` to the use the proper protocol.\n *\n * @param {String} url\n * @return {String}\n */\n\nfunction transform (url) {\n  return check() ? 'https:' + url : 'http:' + url;\n}\n\n\n/**\n * Check whether `https:` be used for loading scripts.\n *\n * @return {Boolean}\n */\n\nfunction check () {\n  return (\n    location.protocol == 'https:' ||\n    location.protocol == 'chrome-extension:'\n  );\n}\n}, {}],\n80: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `AdWords`.\n */\n\nvar AdWords = module.exports = integration('AdWords')\n  .option('conversionId', '')\n  .option('remarketing', false)\n  .tag('<script src=\"//www.googleadservices.com/pagead/conversion_async.js\">')\n  .mapping('events');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nAdWords.prototype.initialize = function() {\n  this.load(this.ready);\n};\n\n/**\n * Loaded.\n *\n * @api private\n * @return {boolean}\n */\n\nAdWords.prototype.loaded = function() {\n  return !!document.body;\n};\n\n/**\n * Page.\n *\n * https://support.google.com/adwords/answer/3111920#standard_parameters\n * https://support.google.com/adwords/answer/3103357\n * https://developers.google.com/adwords-remarketing-tag/asynchronous/\n * https://developers.google.com/adwords-remarketing-tag/parameters\n *\n * @api public\n * @param {Page} page\n */\n\nAdWords.prototype.page = function() {\n  var remarketing = !!this.options.remarketing;\n  var id = this.options.conversionId;\n  var props = {};\n  window.google_trackConversion({\n    google_conversion_id: id,\n    google_custom_params: props,\n    google_remarketing_only: remarketing\n  });\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track}\n */\n\nAdWords.prototype.track = function(track) {\n  var id = this.options.conversionId;\n  var events = this.events(track.event());\n  var revenue = track.revenue() || 0;\n  each(events, function(label) {\n    var props = track.properties();\n    delete props.revenue;\n    window.google_trackConversion({\n      google_conversion_id: id,\n      google_custom_params: props,\n      google_conversion_language: 'en',\n      google_conversion_format: '3',\n      google_conversion_color: 'ffffff',\n      google_conversion_label: label,\n      google_conversion_value: revenue,\n      google_remarketing_only: false\n    });\n  });\n};\n\n}, {\"each\":4,\"analytics.js-integration\":166}],\n81: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose Alexa integration.\n */\n\nvar Alexa = module.exports = integration('Alexa')\n  .assumesPageview()\n  .global('_atrk_opts')\n  .option('account', null)\n  .option('domain', '')\n  .option('dynamic', true)\n  .tag('<script src=\"//d31qbv1cthcecs.cloudfront.net/atrk.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nAlexa.prototype.initialize = function() {\n  var self = this;\n  window._atrk_opts = {\n    atrk_acct: this.options.account,\n    domain: this.options.domain,\n    dynamic: this.options.dynamic\n  };\n  this.load(function() {\n    window.atrk();\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nAlexa.prototype.loaded = function() {\n  return !!window.atrk;\n};\n\n}, {\"analytics.js-integration\":166}],\n82: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar topDomain = require('top-domain');\n\n/**\n * UMD?\n */\n\nvar umd = typeof window.define === 'function' && window.define.amd;\n\n/**\n * Source.\n */\n\nvar src = '//d24n15hnbwhuhn.cloudfront.net/libs/amplitude-2.1.0-min.js';\n\n/**\n * Expose `Amplitude` integration.\n */\n\nvar Amplitude = module.exports = integration('Amplitude')\n  .global('amplitude')\n  .option('apiKey', '')\n  .option('trackAllPages', false)\n  .option('trackNamedPages', true)\n  .option('trackCategorizedPages', true)\n  .option('trackUtmProperties', true)\n  .tag('<script src=\"' + src + '\">');\n\n/**\n * Initialize.\n *\n * https://github.com/amplitude/Amplitude-Javascript\n *\n * @api public\n */\n\nAmplitude.prototype.initialize = function() {\n  /* eslint-disable */\n  (function(e,t){var r=e.amplitude||{};r._q=[];function a(e){r[e]=function(){r._q.push([e].concat(Array.prototype.slice.call(arguments,0)))}}var i=[\"init\",\"logEvent\",\"logRevenue\",\"setUserId\",\"setUserProperties\",\"setOptOut\",\"setVersionName\",\"setDomain\",\"setDeviceId\",\"setGlobalUserProperties\"];for(var o=0;o<i.length;o++){a(i[o])}e.amplitude=r})(window,document);\n  /* eslint-enable */\n\n  this.setDomain(window.location.href);\n  window.amplitude.init(this.options.apiKey, null, {\n    includeUtm: this.options.trackUtmProperties\n  });\n\n  var self = this;\n  if (umd) {\n    window.require([src], function(amplitude) {\n      window.amplitude = amplitude;\n      self.ready();\n    });\n    return;\n  }\n\n  this.load(function() {\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nAmplitude.prototype.loaded = function() {\n  return !!(window.amplitude && window.amplitude.options);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nAmplitude.prototype.page = function(page) {\n  var category = page.category();\n  var name = page.fullName();\n  var opts = this.options;\n\n  // all pages\n  if (opts.trackAllPages) {\n    this.track(page.track());\n  }\n\n  // categorized pages\n  if (category && opts.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n\n  // named pages\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Facade} identify\n */\n\nAmplitude.prototype.identify = function(identify) {\n  var id = identify.userId();\n  var traits = identify.traits();\n  if (id) window.amplitude.setUserId(id);\n  if (traits) window.amplitude.setUserProperties(traits);\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} event\n */\n\nAmplitude.prototype.track = function(track) {\n  var props = track.properties();\n  var event = track.event();\n  var revenue = track.revenue();\n\n  // track the event\n  window.amplitude.logEvent(event, props);\n\n  // also track revenue\n  if (revenue) {\n    window.amplitude.logRevenue(revenue, props.quantity, props.productId);\n  }\n};\n\n/**\n * Set domain name to root domain in Amplitude.\n *\n * @api private\n * @param {string} href\n */\n\nAmplitude.prototype.setDomain = function(href) {\n  var domain = topDomain(href);\n  window.amplitude.setDomain(domain);\n};\n\n/**\n * Override device ID in Amplitude.\n *\n * @api private\n * @param {string} deviceId\n */\n\nAmplitude.prototype.setDeviceId = function(deviceId) {\n  if (deviceId) window.amplitude.setDeviceId(deviceId);\n};\n\n}, {\"analytics.js-integration\":166,\"top-domain\":189}],\n189: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar parse = require('url').parse;\n\n/**\n * Expose `domain`\n */\n\nmodule.exports = domain;\n\n/**\n * RegExp\n */\n\nvar regexp = /[a-z0-9][a-z0-9\\-]*[a-z0-9]\\.[a-z\\.]{2,6}$/i;\n\n/**\n * Get the top domain.\n * \n * Official Grammar: http://tools.ietf.org/html/rfc883#page-56\n * Look for tlds with up to 2-6 characters.\n * \n * Example:\n * \n *      domain('http://localhost:3000/baz');\n *      // => ''\n *      domain('http://dev:3000/baz');\n *      // => ''\n *      domain('http://127.0.0.1:3000/baz');\n *      // => ''\n *      domain('http://segment.io/baz');\n *      // => 'segment.io'\n * \n * @param {String} url\n * @return {String}\n * @api public\n */\n\nfunction domain(url){\n  var host = parse(url).hostname;\n  var match = host.match(regexp);\n  return match ? match[0] : '';\n};\n\n}, {\"url\":64}],\n83: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar load = require('load-script');\n\n/**\n * Expose plugin.\n */\n\n// FIXME: Is this still necessary? I believe this API was deprecated\nmodule.exports = exports = function(analytics) {\n  analytics.addIntegration(Appcues);\n};\n\n/**\n * Expose `Appcues` integration.\n */\n\nvar Appcues = exports.Integration = integration('Appcues')\n  .assumesPageview()\n  .global('Appcues')\n  .option('appcuesId', '');\n\n/**\n * Initialize.\n *\n * http://appcues.com/docs/\n *\n * @api public\n */\n\nAppcues.prototype.initialize = function() {\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nAppcues.prototype.loaded = function() {\n  return is.object(window.Appcues);\n};\n\n/**\n * Load the Appcues library.\n *\n * @api private\n * @param {Function} callback\n */\n\nAppcues.prototype.load = function(callback) {\n  var id = this.options.appcuesId || 'appcues';\n  load('//fast.appcues.com/' + id + '.js', callback);\n};\n\n/**\n * Identify.\n *\n * http://appcues.com/docs#identify\n *\n * @api public\n * @param {Identify} identify\n */\n\nAppcues.prototype.identify = function(identify) {\n  window.Appcues.identify(identify.userId(), identify.traits());\n};\n\n}, {\"analytics.js-integration\":166,\"is\":18,\"load-script\":190}],\n190: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar onload = require('script-onload');\nvar tick = require('next-tick');\nvar type = require('type');\n\n/**\n * Expose `loadScript`.\n *\n * @param {Object} options\n * @param {Function} fn\n * @api public\n */\n\nmodule.exports = function loadScript(options, fn){\n  if (!options) throw new Error('Cant load nothing...');\n\n  // Allow for the simplest case, just passing a `src` string.\n  if ('string' == type(options)) options = { src : options };\n\n  var https = document.location.protocol === 'https:' ||\n              document.location.protocol === 'chrome-extension:';\n\n  // If you use protocol relative URLs, third-party scripts like Google\n  // Analytics break when testing with `file:` so this fixes that.\n  if (options.src && options.src.indexOf('//') === 0) {\n    options.src = https ? 'https:' + options.src : 'http:' + options.src;\n  }\n\n  // Allow them to pass in different URLs depending on the protocol.\n  if (https && options.https) options.src = options.https;\n  else if (!https && options.http) options.src = options.http;\n\n  // Make the `<script>` element and insert it before the first script on the\n  // page, which is guaranteed to exist since this Javascript is running.\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.src = options.src;\n\n  // If we have a fn, attach event handlers, even in IE. Based off of\n  // the Third-Party Javascript script loading example:\n  // https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html\n  if ('function' == type(fn)) {\n    onload(script, fn);\n  }\n\n  tick(function(){\n    // Append after event listeners are attached for IE.\n    var firstScript = document.getElementsByTagName('script')[0];\n    firstScript.parentNode.insertBefore(script, firstScript);\n  });\n\n  // Return the script element in case they want to do anything special, like\n  // give it an ID or attributes.\n  return script;\n};\n}, {\"script-onload\":185,\"next-tick\":57,\"type\":47}],\n84: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar is = require('is');\n\n/**\n * Expose `Atatus` integration.\n */\n\nvar Atatus = module.exports = integration('Atatus')\n  .global('atatus')\n  .option('apiKey', '')\n  .tag('<script src=\"//www.atatus.com/atatus.js\">');\n\n/**\n * Initialize.\n *\n * https://www.atatus.com/docs.html\n *\n * @api public\n */\n\nAtatus.prototype.initialize = function() {\n  var self = this;\n\n  this.load(function() {\n    // Configure Atatus and install default handler to capture uncaught\n    // exceptions\n    window.atatus.config(self.options.apiKey).install();\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nAtatus.prototype.loaded = function() {\n  return is.object(window.atatus);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nAtatus.prototype.identify = function(identify) {\n  window.atatus.setCustomData({ person: identify.traits() });\n};\n\n}, {\"analytics.js-integration\":166,\"is\":18}],\n85: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `Autosend` integration.\n */\n\nvar Autosend = module.exports = integration('Autosend')\n  .global('_autosend')\n  .option('appKey', '')\n  .tag('<script id=\"asnd-tracker\" src=\"https://d2zjxodm1cz8d6.cloudfront.net/js/v1/autosend.js\" data-auth-key=\"{{ appKey }}\">');\n\n/**\n * Initialize.\n *\n * http://autosend.io/faq/install-autosend-using-javascript/\n *\n * @api public\n */\n\nAutosend.prototype.initialize = function() {\n  window._autosend = window._autosend || [];\n  /* eslint-disable */\n  (function(){var a,b,c;a=function(f){return function(){window._autosend.push([f].concat(Array.prototype.slice.call(arguments,0))); }; }; b=[\"identify\", \"track\", \"cb\"];for (c=0;c<b.length;c++){window._autosend[b[c]]=a(b[c]); } })();\n  /* eslint-enable */\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nAutosend.prototype.loaded = function() {\n  return !!window._autosend;\n};\n\n/**\n * Identify.\n *\n * http://autosend.io/faq/install-autosend-using-javascript/\n *\n * @api public\n * @param {Identify} identify\n */\n\nAutosend.prototype.identify = function(identify) {\n  var id = identify.userId();\n  if (!id) return;\n\n  var traits = identify.traits();\n  traits.id = id;\n  window._autosend.identify(traits);\n};\n\n/**\n * Track.\n *\n * http://autosend.io/faq/install-autosend-using-javascript/\n *\n * @api public\n * @param {Track} track\n */\n\nAutosend.prototype.track = function(track) {\n  window._autosend.track(track.event());\n};\n\n}, {\"analytics.js-integration\":166}],\n86: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `Awesm` integration.\n */\n\nvar Awesm = module.exports = integration('awe.sm')\n  .assumesPageview()\n  .global('AWESM')\n  .option('apiKey', '')\n  .tag('<script src=\"//widgets.awe.sm/v3/widgets.js?key={{ apiKey }}&async=true\">')\n  .mapping('events');\n\n/**\n * Initialize.\n *\n * http://developers.awe.sm/guides/javascript/\n *\n * @api public\n */\n\nAwesm.prototype.initialize = function() {\n  window.AWESM = { api_key: this.options.apiKey };\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nAwesm.prototype.loaded = function() {\n  return !!(window.AWESM && window.AWESM._exists);\n};\n\n/**\n * Track.\n *\n * @api private\n * @param {Track} track\n */\n\nAwesm.prototype.track = function(track) {\n  var user = this.analytics.user();\n  var goals = this.events(track.event());\n  each(goals, function(goal) {\n    window.AWESM.convert(goal, track.cents(), null, user.id());\n  });\n};\n\n}, {\"each\":4,\"analytics.js-integration\":166}],\n87: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `Bing`.\n *\n * https://bingads.microsoft.com/campaign/signup\n */\n\nvar Bing = module.exports = integration('Bing Ads')\n  .global('UET')\n  .global('uetq')\n  .option('tagId', '')\n  .tag('<script src=\"//bat.bing.com/bat.js\">');\n\n/**\n * Initialize.\n *\n * Inferred from their snippet:\n * https://gist.github.com/sperand-io/8bef4207e9c66e1aa83b\n *\n * @api public\n */\n\nBing.prototype.initialize = function() {\n  window.uetq = window.uetq || [];\n  var self = this;\n\n  self.load(function() {\n    var setup = {\n      ti: self.options.tagId,\n      q: window.uetq\n    };\n\n    window.uetq = new window.UET(setup);\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nBing.prototype.loaded = function() {\n  return !!(window.uetq && window.uetq.push !== Array.prototype.push);\n};\n\n/**\n * Page.\n *\n * @api public\n */\n\nBing.prototype.page = function() {\n  window.uetq.push('pageLoad');\n};\n\n/**\n * Track.\n *\n * Send all events then set goals based\n * on them retroactively: http://advertise.bingads.microsoft.com/en-us/uahelp-topic?market=en&project=Bing_Ads&querytype=topic&query=HLP_BA_PROC_UET.htm\n *\n * @api public\n * @param {Track} track\n */\n\nBing.prototype.track = function(track) {\n  var event = {\n    ea: 'track',\n    el: track.event()\n  };\n\n  if (track.category()) event.ec = track.category();\n  if (track.revenue()) event.gv = track.revenue();\n\n  window.uetq.push(event);\n};\n\n}, {\"analytics.js-integration\":166}],\n88: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar foldl = require('foldl');\n\n/**\n * Expose `Blueshift` integration.\n */\n\nvar Blueshift = module.exports = integration('Blueshift')\n  .global('blueshift')\n  .global('_blueshiftid')\n  .option('apiKey', '')\n  .option('retarget', false)\n  .tag('<script src=\"https://cdn.getblueshift.com/blueshift.js\">');\n\n/**\n * Initialize.\n *\n * Documentation: http://getblueshift.com/documentation\n *\n * @api public\n */\n\nBlueshift.prototype.initialize = function() {\n  window.blueshift = window.blueshift || [];\n  /* eslint-disable */\n  window.blueshift.load=function(a){window._blueshiftid=a;var d=function(a){return function(){blueshift.push([a].concat(Array.prototype.slice.call(arguments,0)))}},e=[\"identify\",\"track\",\"click\", \"pageload\", \"capture\", \"retarget\"];for(var f=0;f<e.length;f++)blueshift[e[f]]=d(e[f])};\n  /* eslint-enable */\n  window.blueshift.load(this.options.apiKey);\n\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nBlueshift.prototype.loaded = function() {\n  return !!(window.blueshift && window._blueshiftid);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nBlueshift.prototype.page = function(page) {\n  if (this.options.retarget) window.blueshift.retarget();\n\n  var properties = page.properties();\n  properties._bsft_source = 'segment.com';\n  properties.customer_id = page.userId();\n  properties.anonymousId = page.anonymousId();\n  properties.category = page.category();\n  properties.name = page.name();\n\n  window.blueshift.pageload(removeBlankAttributes(properties));\n};\n\n/**\n * Trait Aliases.\n */\nvar traitAliases = {\n  created: 'created_at'\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nBlueshift.prototype.identify = function(identify) {\n  if (!identify.userId() && !identify.anonymousId()) {\n    return this.debug('user id required');\n  }\n  var traits = identify.traits(traitAliases);\n  traits._bsft_source = 'segment.com';\n  traits.customer_id = identify.userId();\n  traits.anonymousId = identify.anonymousId();\n\n  window.blueshift.identify(removeBlankAttributes(traits));\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nBlueshift.prototype.track = function(track) {\n  var properties = track.properties();\n  properties._bsft_source = 'segment.com';\n  properties.customer_id = track.userId();\n  properties.anonymousId = track.anonymousId();\n\n  window.blueshift.track(track.event(), removeBlankAttributes(properties));\n};\n\n/**\n * Alias.\n *\n * @param {Alias} alias\n */\n\nBlueshift.prototype.alias = function(alias) {\n  window.blueshift.track('alias', removeBlankAttributes({\n    _bsft_source: 'segment.com',\n    customer_id: alias.userId(),\n    previous_customer_id: alias.previousId(),\n    anonymousId: alias.anonymousId()\n  }));\n};\n\n/**\n * Filters null/undefined values from an object, returning a new object.\n *\n * @api private\n * @param {Object} obj\n * @return {Object}\n */\n\nfunction removeBlankAttributes(obj) {\n  return foldl(function(results, val, key) {\n    if (val !== null && val !== undefined) results[key] = val;\n    return results;\n  }, {}, obj);\n}\n\n}, {\"analytics.js-integration\":166,\"foldl\":180}],\n89: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Identify = require('facade').Identify;\nvar Track = require('facade').Track;\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar qs = require('querystring');\n\n/**\n * Expose `Bronto` integration.\n */\n\nvar Bronto = module.exports = integration('Bronto')\n  .global('__bta')\n  .option('siteId', '')\n  .option('host', '')\n  .tag('<script src=\"//p.bm23.com/bta.js\">');\n\n/**\n * Initialize.\n *\n * http://app.bronto.com/mail/help/help_view/?k=mail:home:api_tracking:tracking_data_store_js#addingjavascriptconversiontrackingtoyoursite\n * http://bronto.com/product-blog/features/using-conversion-tracking-private-domain#.Ut_Vk2T8KqB\n * http://bronto.com/product-blog/features/javascript-conversion-tracking-setup-and-reporting#.Ut_VhmT8KqB\n *\n * @api public\n */\n\nBronto.prototype.initialize = function() {\n  var self = this;\n  var params = qs.parse(window.location.search);\n  if (!params._bta_tid && !params._bta_c) {\n    this.debug('missing tracking URL parameters `_bta_tid` and `_bta_c`.');\n  }\n  this.load(function() {\n    var opts = self.options;\n    self.bta = new window.__bta(opts.siteId);\n    if (opts.host) self.bta.setHost(opts.host);\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nBronto.prototype.loaded = function() {\n  return this.bta;\n};\n\n/**\n * Completed order.\n *\n * The cookie is used to link the order being processed back to the delivery,\n * message, and contact which makes it a conversion.\n * Passing in just the email ensures that the order itself\n * gets linked to the contact record in Bronto even if the user\n * does not have a tracking cookie.\n *\n * @api private\n * @param {Track} track\n */\n\nBronto.prototype.completedOrder = function(track) {\n  var user = this.analytics.user();\n  var products = track.products();\n  var items = [];\n  var identify = new Identify({\n    userId: user.id(),\n    traits: user.traits()\n  });\n  var email = identify.email();\n\n  // items\n  each(products, function(product) {\n    var track = new Track({ properties: product });\n    items.push({\n      item_id: track.id() || track.sku(),\n      desc: product.description || track.name(),\n      quantity: track.quantity(),\n      amount: track.price()\n    });\n  });\n\n  // add conversion\n  this.bta.addOrder({\n    order_id: track.orderId(),\n    email: email,\n    // they recommend not putting in a date because it needs to be formatted\n    // correctly: YYYY-MM-DDTHH:MM:SS\n    items: items\n  });\n};\n\n}, {\"facade\":9,\"each\":4,\"analytics.js-integration\":166,\"querystring\":191}],\n191: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar encode = encodeURIComponent;\nvar decode = decodeURIComponent;\nvar trim = require('trim');\nvar type = require('type');\n\n/**\n * Parse the given query `str`.\n *\n * @param {String} str\n * @return {Object}\n * @api public\n */\n\nexports.parse = function(str){\n  if ('string' != typeof str) return {};\n\n  str = trim(str);\n  if ('' == str) return {};\n  if ('?' == str.charAt(0)) str = str.slice(1);\n\n  var obj = {};\n  var pairs = str.split('&');\n  for (var i = 0; i < pairs.length; i++) {\n    var parts = pairs[i].split('=');\n    var key = decode(parts[0]);\n    var m;\n\n    if (m = /(\\w+)\\[(\\d+)\\]/.exec(key)) {\n      obj[m[1]] = obj[m[1]] || [];\n      obj[m[1]][m[2]] = decode(parts[1]);\n      continue;\n    }\n\n    obj[parts[0]] = null == parts[1]\n      ? ''\n      : decode(parts[1]);\n  }\n\n  return obj;\n};\n\n/**\n * Stringify the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api public\n */\n\nexports.stringify = function(obj){\n  if (!obj) return '';\n  var pairs = [];\n\n  for (var key in obj) {\n    var value = obj[key];\n\n    if ('array' == type(value)) {\n      for (var i = 0; i < value.length; ++i) {\n        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));\n      }\n      continue;\n    }\n\n    pairs.push(encode(key) + '=' + encode(obj[key]));\n  }\n\n  return pairs.join('&');\n};\n\n}, {\"trim\":54,\"type\":47}],\n90: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar tick = require('next-tick');\n\n/**\n * Expose `BugHerd` integration.\n */\n\nvar BugHerd = module.exports = integration('BugHerd')\n  .assumesPageview()\n  .global('BugHerdConfig')\n  .global('_bugHerd')\n  .option('apiKey', '')\n  .option('showFeedbackTab', true)\n  .tag('<script src=\"//www.bugherd.com/sidebarv2.js?apikey={{ apiKey }}\">');\n\n/**\n * Initialize.\n *\n * http://support.bugherd.com/home\n *\n * @api public\n */\n\nBugHerd.prototype.initialize = function() {\n  window.BugHerdConfig = { feedback: { hide: !this.options.showFeedbackTab } };\n  var ready = this.ready;\n  this.load(function() {\n    tick(ready);\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nBugHerd.prototype.loaded = function() {\n  return !!window._bugHerd;\n};\n\n}, {\"analytics.js-integration\":166,\"next-tick\":57}],\n91: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar extend = require('extend');\n\n/**\n * UMD ?\n */\n\nvar umd = typeof window.define === 'function' && window.define.amd;\n\n/**\n * Source.\n */\n\nvar src = '//d2wy8f7a9ursnm.cloudfront.net/bugsnag-2.min.js';\n\n/**\n * Expose `Bugsnag` integration.\n */\n\nvar Bugsnag = module.exports = integration('Bugsnag')\n  .global('Bugsnag')\n  .option('apiKey', '')\n  .tag('<script src=\"' + src + '\">');\n\n/**\n * Initialize.\n *\n * https://bugsnag.com/docs/notifiers/js\n *\n * @api public\n */\n\nBugsnag.prototype.initialize = function() {\n  var self = this;\n\n  if (umd) {\n    window.require([src], function(bugsnag) {\n      bugsnag.apiKey = self.options.apiKey;\n      window.Bugsnag = bugsnag;\n      self.ready();\n    });\n    return;\n  }\n\n  this.load(function() {\n    window.Bugsnag.apiKey = self.options.apiKey;\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nBugsnag.prototype.loaded = function() {\n  return is.object(window.Bugsnag);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nBugsnag.prototype.identify = function(identify) {\n  window.Bugsnag.metaData = window.Bugsnag.metaData || {};\n  extend(window.Bugsnag.metaData, identify.traits());\n};\n\n}, {\"analytics.js-integration\":166,\"is\":18,\"extend\":68}],\n92: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar each = require('each');\n\n/**\n * Expose `Chameleon` integration.\n */\n\nvar Chameleon = module.exports = integration('Chameleon')\n  .assumesPageview()\n  .readyOnInitialize()\n  .readyOnLoad()\n  .global('chmln')\n  .option('accountId', null)\n  .tag('<script src=\"//cdn.trychameleon.com/east/{{accountId}}.min.js\"></script>');\n\n/**\n * Initialize Chameleon.\n *\n * @api public\n */\n\nChameleon.prototype.initialize = function() {\n  /* eslint-disable */\n  (window.chmln={}),names='setup alias track set'.split(' ');for (var i=0;i<names.length;i++){(function(){var t=chmln[names[i]+'_a']=[];chmln[names[i]]=function(){t.push(arguments);};})() };\n  /* eslint-enable */\n\n  this.ready();\n  this.load();\n};\n\n/**\n * Has the Chameleon library been loaded yet?\n *\n * @api private\n * @return {boolean}\n */\n\nChameleon.prototype.loaded = function() {\n  return !!window.chmln;\n};\n\n/**\n * Identify a user.\n *\n * @api public\n * @param {Facade} identify\n */\n\nChameleon.prototype.identify = function(identify) {\n  var options = identify.traits();\n\n  options.uid = options.id || identify.userId() || identify.anonymousId();\n  delete options.id;\n\n  window.chmln.setup(options);\n};\n\n/**\n * Associate the current user with a group of users.\n *\n * @api public\n * @param {Facade} group\n */\n\nChameleon.prototype.group = function(group) {\n  var options = {};\n\n  each(group.traits(), function(key, value) {\n    options['group:' + key] = value;\n  });\n\n  options['group:id'] = group.groupId();\n\n  window.chmln.set(options);\n};\n\n/**\n * Track an event.\n *\n * @param {Facade} track\n */\n\nChameleon.prototype.track = function(track) {\n  window.chmln.track(track.event(), track.properties());\n};\n\n/**\n * Change the user identifier after we know who they are.\n *\n * @param {Facade} alias\n */\n\nChameleon.prototype.alias = function(alias) {\n  var fromId = alias.previousId() || alias.anonymousId();\n\n  window.chmln.alias({ from: fromId, to: alias.userId() });\n};\n\n}, {\"analytics.js-integration\":166,\"each\":4}],\n93: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar defaults = require('defaults');\nvar integration = require('analytics.js-integration');\nvar onBody = require('on-body');\n\n/**\n * Expose `Chartbeat` integration.\n */\n\nvar Chartbeat = module.exports = integration('Chartbeat')\n  .assumesPageview()\n  .global('_sf_async_config')\n  .global('_sf_endpt')\n  .global('pSUPERFLY')\n  .option('domain', '')\n  .option('uid', null)\n  .tag('<script src=\"//static.chartbeat.com/js/chartbeat.js\">');\n\n/**\n * Initialize.\n *\n * http://chartbeat.com/docs/configuration_variables/\n *\n * @api public\n */\n\nChartbeat.prototype.initialize = function() {\n  var self = this;\n\n  window._sf_async_config = window._sf_async_config || {};\n  window._sf_async_config.useCanonical = true;\n  defaults(window._sf_async_config, this.options);\n\n  onBody(function() {\n    window._sf_endpt = new Date().getTime();\n    // Note: Chartbeat depends on document.body existing so the script does\n    // not load until that is confirmed. Otherwise it may trigger errors.\n    self.load(self.ready);\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nChartbeat.prototype.loaded = function() {\n  return !!window.pSUPERFLY;\n};\n\n/**\n * Page.\n *\n * http://chartbeat.com/docs/handling_virtual_page_changes/\n *\n * @api public\n * @param {Page} page\n */\n\nChartbeat.prototype.page = function(page) {\n  var category = page.category();\n  if (category) window._sf_async_config.sections = category;\n  var author = page.proxy('properties.author');\n  if (author) window._sf_async_config.authors = author;\n  var props = page.properties();\n  var name = page.fullName();\n  window.pSUPERFLY.virtualPage(props.path, name || props.title);\n};\n\n}, {\"defaults\":192,\"analytics.js-integration\":166,\"on-body\":193}],\n192: [function(require, module, exports) {\n/**\n * Expose `defaults`.\n */\nmodule.exports = defaults;\n\nfunction defaults (dest, defaults) {\n  for (var prop in defaults) {\n    if (! (prop in dest)) {\n      dest[prop] = defaults[prop];\n    }\n  }\n\n  return dest;\n};\n\n}, {}],\n193: [function(require, module, exports) {\nvar each = require('each');\n\n\n/**\n * Cache whether `<body>` exists.\n */\n\nvar body = false;\n\n\n/**\n * Callbacks to call when the body exists.\n */\n\nvar callbacks = [];\n\n\n/**\n * Export a way to add handlers to be invoked once the body exists.\n *\n * @param {Function} callback  A function to call when the body exists.\n */\n\nmodule.exports = function onBody (callback) {\n  if (body) {\n    call(callback);\n  } else {\n    callbacks.push(callback);\n  }\n};\n\n\n/**\n * Set an interval to check for `document.body`.\n */\n\nvar interval = setInterval(function () {\n  if (!document.body) return;\n  body = true;\n  each(callbacks, call);\n  clearInterval(interval);\n}, 5);\n\n\n/**\n * Call a callback, passing it the body.\n *\n * @param {Function} callback  The callback to call.\n */\n\nfunction call (callback) {\n  callback(document.body);\n}\n}, {\"each\":177}],\n94: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar date = require('load-date');\nvar domify = require('domify');\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar onBody = require('on-body');\nvar useHttps = require('use-https');\n\n/**\n * Expose `ClickTale` integration.\n */\n\nvar ClickTale = module.exports = integration('ClickTale')\n  .assumesPageview()\n  .global('WRInitTime')\n  .global('ClickTale')\n  .global('ClickTaleSetUID')\n  .global('ClickTaleField')\n  .global('ClickTaleEvent')\n  .option('httpCdnUrl', 'http://s.clicktale.net/WRe0.js')\n  .option('httpsCdnUrl', '')\n  .option('projectId', '')\n  .option('recordingRatio', 0.01)\n  .option('partitionId', '')\n  .tag('<script src=\"{{src}}\">');\n\n/**\n * Initialize.\n *\n * http://wiki.clicktale.com/Article/JavaScript_API\n *\n * @api public\n */\n\nClickTale.prototype.initialize = function() {\n  var self = this;\n  window.WRInitTime = date.getTime();\n\n  onBody(function(body) {\n    body.appendChild(domify('<div id=\"ClickTaleDiv\" style=\"display: none;\">'));\n  });\n\n  var http = this.options.httpCdnUrl;\n  var https = this.options.httpsCdnUrl;\n  if (useHttps() && !https) return this.debug('https option required');\n  var src = useHttps() ? https : http;\n\n  this.load({ src: src }, function() {\n    window.ClickTale(\n      self.options.projectId,\n      self.options.recordingRatio,\n      self.options.partitionId\n    );\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nClickTale.prototype.loaded = function() {\n  return is.fn(window.ClickTale);\n};\n\n/**\n * Identify.\n *\n * http://wiki.clicktale.com/Article/ClickTaleTag#ClickTaleSetUID\n * http://wiki.clicktale.com/Article/ClickTaleTag#ClickTaleField\n *\n * @api public\n * @param {Identify} identify\n */\n\nClickTale.prototype.identify = function(identify) {\n  var id = identify.userId();\n  window.ClickTaleSetUID(id);\n  each(identify.traits(), function(key, value) {\n    window.ClickTaleField(key, value);\n  });\n};\n\n/**\n * Track.\n *\n * http://wiki.clicktale.com/Article/ClickTaleTag#ClickTaleEvent\n *\n * @api public\n * @param {Track} track\n */\n\nClickTale.prototype.track = function(track) {\n  window.ClickTaleEvent(track.event());\n};\n\n}, {\"load-date\":194,\"domify\":186,\"each\":4,\"analytics.js-integration\":166,\"is\":18,\"on-body\":193,\"use-https\":168}],\n194: [function(require, module, exports) {\n\n\n/*\n * Load date.\n *\n * For reference: http://www.html5rocks.com/en/tutorials/webperformance/basics/\n */\n\nvar time = new Date()\n  , perf = window.performance;\n\nif (perf && perf.timing && perf.timing.responseEnd) {\n  time = new Date(perf.timing.responseEnd);\n}\n\nmodule.exports = time;\n}, {}],\n95: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Identify = require('facade').Identify;\nvar extend = require('extend');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\n\n/**\n * Expose `Clicky` integration.\n */\n\nvar Clicky = module.exports = integration('Clicky')\n  .assumesPageview()\n  .global('clicky')\n  .global('clicky_site_ids')\n  .global('clicky_custom')\n  .option('siteId', null)\n  .tag('<script src=\"//static.getclicky.com/js\"></script>');\n\n/**\n * Initialize.\n *\n * http://clicky.com/help/customization\n *\n * @api public\n */\n\nClicky.prototype.initialize = function() {\n  var user = this.analytics.user();\n  window.clicky_site_ids = window.clicky_site_ids || [this.options.siteId];\n  this.identify(new Identify({\n    userId: user.id(),\n    traits: user.traits()\n  }));\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nClicky.prototype.loaded = function() {\n  return is.object(window.clicky);\n};\n\n/**\n * Page.\n *\n * http://clicky.com/help/customization#/help/custom/manual\n *\n * @api public\n * @param {Page} page\n */\n\nClicky.prototype.page = function(page) {\n  var properties = page.properties();\n  var name = page.fullName();\n  window.clicky.log(properties.path, name || properties.title);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} [id]\n */\n\nClicky.prototype.identify = function(identify) {\n  window.clicky_custom = window.clicky_custom || {};\n  window.clicky_custom.session = window.clicky_custom.session || {};\n  var traits = identify.traits();\n\n  var username = identify.username();\n  var email = identify.email();\n  var name = identify.name();\n\n  if (username || email || name) traits.username = username || email || name;\n\n  extend(window.clicky_custom.session, traits);\n};\n\n/**\n * Track.\n *\n * http://clicky.com/help/customization#/help/custom/manual\n *\n * @api public\n * @param {Track} event\n */\n\nClicky.prototype.track = function(track) {\n  window.clicky.goal(track.event(), track.revenue());\n};\n\n}, {\"facade\":9,\"extend\":68,\"analytics.js-integration\":166,\"is\":18}],\n96: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar useHttps = require('use-https');\n\n/**\n * Expose `Comscore` integration.\n */\n\nvar Comscore = module.exports = integration('comScore')\n  .assumesPageview()\n  .global('_comscore')\n  .global('COMSCORE')\n  .option('c1', '2')\n  .option('c2', '')\n  .tag('http', '<script src=\"http://b.scorecardresearch.com/beacon.js\">')\n  .tag('https', '<script src=\"https://sb.scorecardresearch.com/beacon.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nComscore.prototype.initialize = function() {\n  window._comscore = window._comscore || [this.options];\n  var tagName = useHttps() ? 'https' : 'http';\n  this.load(tagName, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nComscore.prototype.loaded = function() {\n  return !!window.COMSCORE;\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Object} page\n */\n\nComscore.prototype.page = function() {\n  window.COMSCORE.beacon(this.options);\n};\n\n}, {\"analytics.js-integration\":166,\"use-https\":168}],\n97: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `CrazyEgg` integration.\n */\n\nvar CrazyEgg = module.exports = integration('Crazy Egg')\n  .assumesPageview()\n  .global('CE2')\n  .option('accountNumber', '')\n  .tag('<script src=\"//dnn506yrbagrg.cloudfront.net/pages/scripts/{{ path }}.js?{{ cacheBuster }}\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nCrazyEgg.prototype.initialize = function() {\n  var number = this.options.accountNumber;\n  var path = number.slice(0, 4) + '/' + number.slice(4);\n  var cacheBuster = Math.floor(new Date().getTime() / 3600000);\n  this.load({ path: path, cacheBuster: cacheBuster }, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nCrazyEgg.prototype.loaded = function() {\n  return !!window.CE2;\n};\n\n}, {\"analytics.js-integration\":166}],\n98: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Identify = require('facade').Identify;\nvar Track = require('facade').Track;\nvar bind = require('bind');\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar iso = require('to-iso-string');\nvar push = require('global-queue')('_curebitq');\nvar throttle = require('throttle');\nvar when = require('when');\n\n/**\n * Expose `Curebit` integration.\n */\n\nvar Curebit = module.exports = integration('Curebit')\n  .global('_curebitq')\n  .global('curebit')\n  .option('campaigns', {})\n  .option('device', '')\n  .option('iframeBorder', 0)\n  .option('iframeHeight', '480')\n  .option('iframeId', 'curebit_integration')\n  .option('iframeWidth', '100%')\n  .option('insertIntoId', '')\n  .option('responsive', true)\n  .option('server', 'https://www.curebit.com')\n  .option('siteId', '')\n  .tag('<script src=\"//d2jjzw81hqbuqv.cloudfront.net/integration/curebit-1.0.min.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nCurebit.prototype.initialize = function() {\n  push('init', { site_id: this.options.siteId, server: this.options.server });\n  this.load(this.ready);\n\n  // throttle the call to `page` since curebit needs to append an iframe\n  this.page = throttle(bind(this, this.page), 250);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nCurebit.prototype.loaded = function() {\n  return !!window.curebit;\n};\n\n/**\n * Page.\n *\n * Call the `register_affiliate` method of the Curebit API that will load a\n * custom iframe onto the page, only if this page's path is marked as a\n * campaign.\n *\n * http://www.curebit.com/docs/affiliate/registration\n *\n * This is throttled to prevent accidentally drawing the iframe multiple times,\n * from multiple `.page()` calls. The `250` is from the curebit script.\n *\n * @api private\n * @param {String} url\n * @param {String} id\n * @param {Function} fn\n */\n\n// FIXME: Is this deprecated? Seems unused\nCurebit.prototype.injectIntoId = function(url, id, fn) {\n  when(function() {\n    return document.getElementById(id);\n  }, function() {\n    var script = document.createElement('script');\n    script.src = url;\n    var parent = document.getElementById(id);\n    parent.appendChild(script);\n    onload(script, fn);\n  });\n};\n\n/**\n * Campaign tags.\n *\n * @api public\n * @param {Page} page\n */\n\nCurebit.prototype.page = function() {\n  var user = this.analytics.user();\n  var campaigns = this.options.campaigns;\n  var path = window.location.pathname;\n  if (!campaigns[path]) return;\n\n  var tags = (campaigns[path] || '').split(',');\n  if (!tags.length) return;\n\n  var settings = {\n    responsive: this.options.responsive,\n    device: this.options.device,\n    campaign_tags: tags,\n    iframe: {\n      width: this.options.iframeWidth,\n      height: this.options.iframeHeight,\n      id: this.options.iframeId,\n      frameborder: this.options.iframeBorder,\n      container: this.options.insertIntoId\n    }\n  };\n\n  var identify = new Identify({\n    userId: user.id(),\n    traits: user.traits()\n  });\n\n  // if we have an email, add any information about the user\n  if (identify.email()) {\n    settings.affiliate_member = {\n      email: identify.email(),\n      first_name: identify.firstName(),\n      last_name: identify.lastName(),\n      customer_id: identify.userId()\n    };\n  }\n\n  push('register_affiliate', settings);\n};\n\n/**\n * Completed order.\n *\n * Fire the Curebit `register_purchase` with the order details and items.\n *\n * https://www.curebit.com/docs/ecommerce/custom\n *\n * @api public\n * @param {Track} track\n */\n\nCurebit.prototype.completedOrder = function(track) {\n  var user = this.analytics.user();\n  var orderId = track.orderId();\n  var products = track.products();\n  var props = track.properties();\n  var items = [];\n  var identify = new Identify({\n    traits: user.traits(),\n    userId: user.id()\n  });\n\n  each(products, function(product) {\n    var track = new Track({ properties: product });\n    items.push({\n      product_id: track.id() || track.sku(),\n      quantity: track.quantity(),\n      image_url: product.image,\n      price: track.price(),\n      title: track.name(),\n      url: product.url\n    });\n  });\n\n  push('register_purchase', {\n    order_date: iso(props.date || new Date()),\n    order_number: orderId,\n    coupon_code: track.coupon(),\n    subtotal: track.total(),\n    customer_id: identify.userId(),\n    first_name: identify.firstName(),\n    last_name: identify.lastName(),\n    email: identify.email(),\n    items: items\n  });\n};\n\n}, {\"facade\":9,\"bind\":55,\"each\":4,\"analytics.js-integration\":166,\"to-iso-string\":195,\"global-queue\":196,\"throttle\":197,\"when\":198}],\n195: [function(require, module, exports) {\n\n/**\n * Expose `toIsoString`.\n */\n\nmodule.exports = toIsoString;\n\n\n/**\n * Turn a `date` into an ISO string.\n *\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString\n *\n * @param {Date} date\n * @return {String}\n */\n\nfunction toIsoString (date) {\n  return date.getUTCFullYear()\n    + '-' + pad(date.getUTCMonth() + 1)\n    + '-' + pad(date.getUTCDate())\n    + 'T' + pad(date.getUTCHours())\n    + ':' + pad(date.getUTCMinutes())\n    + ':' + pad(date.getUTCSeconds())\n    + '.' + String((date.getUTCMilliseconds()/1000).toFixed(3)).slice(2, 5)\n    + 'Z';\n}\n\n\n/**\n * Pad a `number` with a ten's place zero.\n *\n * @param {Number} number\n * @return {String}\n */\n\nfunction pad (number) {\n  var n = number.toString();\n  return n.length === 1 ? '0' + n : n;\n}\n}, {}],\n196: [function(require, module, exports) {\n\n/**\n * Expose `generate`.\n */\n\nmodule.exports = generate;\n\n\n/**\n * Generate a global queue pushing method with `name`.\n *\n * @param {String} name\n * @param {Object} options\n *   @property {Boolean} wrap\n * @return {Function}\n */\n\nfunction generate (name, options) {\n  options = options || {};\n\n  return function (args) {\n    args = [].slice.call(arguments);\n    window[name] || (window[name] = []);\n    options.wrap === false\n      ? window[name].push.apply(window[name], args)\n      : window[name].push(args);\n  };\n}\n}, {}],\n197: [function(require, module, exports) {\n\n/**\n * Module exports.\n */\n\nmodule.exports = throttle;\n\n/**\n * Returns a new function that, when invoked, invokes `func` at most one time per\n * `wait` milliseconds.\n *\n * @param {Function} func The `Function` instance to wrap.\n * @param {Number} wait The minimum number of milliseconds that must elapse in between `func` invokations.\n * @return {Function} A new function that wraps the `func` function passed in.\n * @api public\n */\n\nfunction throttle (func, wait) {\n  var rtn; // return value\n  var last = 0; // last invokation timestamp\n  return function throttled () {\n    var now = new Date().getTime();\n    var delta = now - last;\n    if (delta >= wait) {\n      rtn = func.apply(this, arguments);\n      last = now;\n    }\n    return rtn;\n  };\n}\n\n}, {}],\n198: [function(require, module, exports) {\n\nvar callback = require('callback');\n\n\n/**\n * Expose `when`.\n */\n\nmodule.exports = when;\n\n\n/**\n * Loop on a short interval until `condition()` is true, then call `fn`.\n *\n * @param {Function} condition\n * @param {Function} fn\n * @param {Number} interval (optional)\n */\n\nfunction when (condition, fn, interval) {\n  if (condition()) return callback.async(fn);\n\n  var ref = setInterval(function () {\n    if (!condition()) return;\n    callback(fn);\n    clearInterval(ref);\n  }, interval || 10);\n}\n}, {\"callback\":12}],\n99: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Identify = require('facade').Identify;\nvar alias = require('alias');\nvar convertDates = require('convert-dates');\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `Customerio` integration.\n */\n\nvar Customerio = module.exports = integration('Customer.io')\n  .global('_cio')\n  .option('siteId', '')\n  .tag('<script id=\"cio-tracker\" src=\"https://assets.customer.io/assets/track.js\" data-site-id=\"{{ siteId }}\">');\n\n/**\n * Initialize.\n *\n * http://customer.io/docs/api/javascript.html\n *\n * @api public\n */\n\nCustomerio.prototype.initialize = function() {\n  window._cio = window._cio || [];\n  /* eslint-disable */\n  (function(){var a,b,c; a = function(f){return function(){window._cio.push([f].concat(Array.prototype.slice.call(arguments,0))); }; }; b = ['identify', 'track']; for (c = 0; c < b.length; c++) {window._cio[b[c]] = a(b[c]); } })();\n  /* eslint-enable */\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nCustomerio.prototype.loaded = function() {\n  return !!(window._cio && window._cio.push !== Array.prototype.push);\n};\n\n/**\n * Identify.\n *\n * http://customer.io/docs/api/javascript.html#section-Identify_customers\n *\n * @api public\n * @param {Identify} identify\n */\n\nCustomerio.prototype.identify = function(identify) {\n  if (!identify.userId()) return this.debug('user id required');\n  var traits = identify.traits({ createdAt: 'created' });\n  traits = alias(traits, { created: 'created_at' });\n  traits = convertDates(traits, convertDate);\n  window._cio.identify(traits);\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Group} group\n */\n\nCustomerio.prototype.group = function(group) {\n  var traits = group.traits();\n  var user = this.analytics.user();\n\n  traits = alias(traits, function(trait) {\n    return 'Group ' + trait;\n  });\n\n  this.identify(new Identify({\n    userId: user.id(),\n    traits: traits\n  }));\n};\n\n/**\n * Track.\n *\n * http://customer.io/docs/api/javascript.html#section-Track_a_custom_event\n *\n * @api public\n * @param {Track} track\n */\n\nCustomerio.prototype.track = function(track) {\n  var properties = track.properties();\n  properties = convertDates(properties, convertDate);\n  window._cio.track(track.event(), properties);\n};\n\n/**\n * Convert a date to the format Customer.io supports.\n *\n * @api private\n * @param {Date} date\n * @return {number}\n */\n\nfunction convertDate(date) {\n  return Math.floor(date.getTime() / 1000);\n}\n\n}, {\"facade\":9,\"alias\":199,\"convert-dates\":200,\"analytics.js-integration\":166}],\n199: [function(require, module, exports) {\n\nvar type = require('type');\n\ntry {\n  var clone = require('clone');\n} catch (e) {\n  var clone = require('clone-component');\n}\n\n\n/**\n * Expose `alias`.\n */\n\nmodule.exports = alias;\n\n\n/**\n * Alias an `object`.\n *\n * @param {Object} obj\n * @param {Mixed} method\n */\n\nfunction alias (obj, method) {\n  switch (type(method)) {\n    case 'object': return aliasByDictionary(clone(obj), method);\n    case 'function': return aliasByFunction(clone(obj), method);\n  }\n}\n\n\n/**\n * Convert the keys in an `obj` using a dictionary of `aliases`.\n *\n * @param {Object} obj\n * @param {Object} aliases\n */\n\nfunction aliasByDictionary (obj, aliases) {\n  for (var key in aliases) {\n    if (undefined === obj[key]) continue;\n    obj[aliases[key]] = obj[key];\n    delete obj[key];\n  }\n  return obj;\n}\n\n\n/**\n * Convert the keys in an `obj` using a `convert` function.\n *\n * @param {Object} obj\n * @param {Function} convert\n */\n\nfunction aliasByFunction (obj, convert) {\n  // have to create another object so that ie8 won't infinite loop on keys\n  var output = {};\n  for (var key in obj) output[convert(key)] = obj[key];\n  return output;\n}\n}, {\"type\":47,\"clone\":49}],\n200: [function(require, module, exports) {\n\nvar is = require('is');\n\ntry {\n  var clone = require('clone');\n} catch (e) {\n  var clone = require('clone-component');\n}\n\n\n/**\n * Expose `convertDates`.\n */\n\nmodule.exports = convertDates;\n\n\n/**\n * Recursively convert an `obj`'s dates to new values.\n *\n * @param {Object} obj\n * @param {Function} convert\n * @return {Object}\n */\n\nfunction convertDates (obj, convert) {\n  obj = clone(obj);\n  for (var key in obj) {\n    var val = obj[key];\n    if (is.date(val)) obj[key] = convert(val);\n    if (is.object(val)) obj[key] = convertDates(val, convert);\n  }\n  return obj;\n}\n}, {\"is\":18,\"clone\":13}],\n100: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar push = require('global-queue')('_dcq');\n\n/**\n * Expose `Drip` integration.\n */\n\nvar Drip = module.exports = integration('Drip')\n  .assumesPageview()\n  .global('_dc')\n  .global('_dcq')\n  .global('_dcqi')\n  .global('_dcs')\n  .option('account', '')\n  .tag('<script src=\"//tag.getdrip.com/{{ account }}.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nDrip.prototype.initialize = function() {\n  window._dcq = window._dcq || [];\n  window._dcs = window._dcs || {};\n  window._dcs.account = this.options.account;\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nDrip.prototype.loaded = function() {\n  return is.object(window._dc);\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nDrip.prototype.track = function(track) {\n  var props = track.properties();\n  var cents = track.cents();\n  if (cents) props.value = cents;\n  delete props.revenue;\n  push('track', track.event(), props);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nDrip.prototype.identify = function(identify) {\n  push('identify', identify.traits());\n};\n\n}, {\"analytics.js-integration\":166,\"is\":18,\"global-queue\":196}],\n101: [function(require, module, exports) {\nvar integration = require('analytics.js-integration');\nvar tick = require('next-tick');\n\n/**\n * Expose `Elevio` integration.\n */\n\nvar Elevio = module.exports = integration('Elevio')\n  .assumesPageview()\n  .option('accountId', '')\n  .global('_elev')\n  .tag('<script src=\"//static.elev.io/js/v3.js\">');\n\n/**\n * Initialize elevio.\n */\n\nElevio.prototype.initialize = function() {\n  var self = this;\n  window._elev = window._elev || {};\n  window._elev.account_id = this.options.accountId;\n  window._elev.segment = true;\n  this.load(function() {\n    tick(self.ready);\n  });\n};\n\n/**\n * Has the elevio library been loaded yet?\n *\n * @return {Boolean}\n */\n\nElevio.prototype.loaded = function() {\n  return !!window._elev;\n};\n\n/**\n * Identify a user.\n *\n * @param {Facade} identify\n */\n\nElevio.prototype.identify = function(identify) {\n  var name = identify.name();\n  var email = identify.email();\n  var plan = identify.proxy('traits.plan');\n\n  var user = {};\n  user.via = 'segment';\n  if (email) user.email = email;\n  if (name) user.name = name;\n  if (plan) user.plan = [plan];\n\n  window._elev.user = user;\n};\n\n}, {\"analytics.js-integration\":166,\"next-tick\":57}],\n102: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar extend = require('extend');\nvar integration = require('analytics.js-integration');\nvar onError = require('on-error');\nvar push = require('global-queue')('_errs');\n\n/**\n * Expose `Errorception` integration.\n */\n\nvar Errorception = module.exports = integration('Errorception')\n  .assumesPageview()\n  .global('_errs')\n  .option('projectId', '')\n  .option('meta', true)\n  .tag('<script src=\"//beacon.errorception.com/{{ projectId }}.js\">');\n\n/**\n * Initialize.\n *\n * https://github.com/amplitude/Errorception-Javascript\n *\n * @api public\n */\n\nErrorception.prototype.initialize = function() {\n  window._errs = window._errs || [this.options.projectId];\n  onError(push);\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nErrorception.prototype.loaded = function() {\n  return !!(window._errs && window._errs.push !== Array.prototype.push);\n};\n\n/**\n * Identify.\n *\n * http://blog.errorception.com/2012/11/capture-custom-data-with-your-errors.html\n *\n * @api public\n * @param {Object} identify\n */\n\nErrorception.prototype.identify = function(identify) {\n  if (!this.options.meta) return;\n  var traits = identify.traits();\n  window._errs = window._errs || [];\n  window._errs.meta = window._errs.meta || {};\n  extend(window._errs.meta, traits);\n};\n\n}, {\"extend\":68,\"analytics.js-integration\":166,\"on-error\":201,\"global-queue\":196}],\n201: [function(require, module, exports) {\n\n/**\n * Expose `onError`.\n */\n\nmodule.exports = onError;\n\n\n/**\n * Callbacks.\n */\n\nvar callbacks = [];\n\n\n/**\n * Preserve existing handler.\n */\n\nif ('function' == typeof window.onerror) callbacks.push(window.onerror);\n\n\n/**\n * Bind to `window.onerror`.\n */\n\nwindow.onerror = handler;\n\n\n/**\n * Error handler.\n */\n\nfunction handler () {\n  for (var i = 0, fn; fn = callbacks[i]; i++) fn.apply(this, arguments);\n}\n\n\n/**\n * Call a `fn` on `window.onerror`.\n *\n * @param {Function} fn\n */\n\nfunction onError (fn) {\n  callbacks.push(fn);\n  if (window.onerror != handler) {\n    callbacks.push(window.onerror);\n    window.onerror = handler;\n  }\n}\n}, {}],\n103: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_aaq');\n\n/**\n * Expose `Evergage` integration.\n */\n\nvar Evergage = module.exports = integration('Evergage')\n  .assumesPageview()\n  .global('_aaq')\n  .option('account', '')\n  .option('dataset', '')\n  .tag('<script src=\"//cdn.evergage.com/beacon/{{ account }}/{{ dataset }}/scripts/evergage.min.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nEvergage.prototype.initialize = function() {\n  var account = this.options.account;\n  var dataset = this.options.dataset;\n\n  window._aaq = window._aaq || [];\n  push('setEvergageAccount', account);\n  push('setDataset', dataset);\n  push('setUseSiteConfig', true);\n\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nEvergage.prototype.loaded = function() {\n  return !!(window._aaq && window._aaq.push !== Array.prototype.push);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nEvergage.prototype.page = function(page) {\n  var props = page.properties();\n  var name = page.name();\n  if (name) push('namePage', name);\n\n  each(props, function(key, value) {\n    push('setCustomField', key, value, 'page');\n  });\n\n  window.Evergage.init(true);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nEvergage.prototype.identify = function(identify) {\n  var id = identify.userId();\n  if (!id) return;\n\n  push('setUser', id);\n\n  var traits = identify.traits({\n    email: 'userEmail',\n    name: 'userName'\n  });\n\n  each(traits, function(key, value) {\n    push('setUserField', key, value, 'page');\n  });\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Group} group\n */\n\nEvergage.prototype.group = function(group) {\n  var props = group.traits();\n  var id = group.groupId();\n  if (!id) return;\n\n  push('setCompany', id);\n  each(props, function(key, value) {\n    push('setAccountField', key, value, 'page');\n  });\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nEvergage.prototype.track = function(track) {\n  push('trackAction', track.event(), track.properties());\n};\n\n}, {\"each\":4,\"analytics.js-integration\":166,\"global-queue\":196}],\n104: [function(require, module, exports) {\n'use strict';\n\n/**\n* Module dependencies.\n*/\n\nvar bind = require('bind');\nvar domify = require('domify');\nvar each = require('each');\nvar extend = require('extend');\nvar integration = require('analytics.js-integration');\nvar json = require('json');\n\n/**\n* Expose `Extole` integration.\n*/\n\nvar Extole = module.exports = integration('Extole')\n  .global('extole')\n  .option('clientId', '')\n  .mapping('events')\n  .tag('main', '<script src=\"//tags.extole.com/{{ clientId }}/core.js\">');\n\n/**\n* Initialize.\n*\n* @api public\n* @param {Object} page\n*/\n\nExtole.prototype.initialize = function() {\n  if (this.loaded()) return this.ready();\n  this.load('main', bind(this, this.ready));\n};\n\n/**\n* Loaded?\n*\n* @api private\n* @return {boolean}\n*/\n\nExtole.prototype.loaded = function() {\n  return !!window.extole;\n};\n\n/**\n* Track.\n*\n* @api public\n* @param {Track} track\n*/\n\nExtole.prototype.track = function(track) {\n  var user = this.analytics.user();\n  var traits = user.traits();\n  var userId = user.id();\n  var email = traits.email;\n\n  if (!userId && !email) {\n    return this.debug('User must be identified before `#track` calls');\n  }\n\n  var event = track.event();\n  var extoleEvents = this.events(event);\n\n  if (!extoleEvents.length) {\n    return this.debug('No events found for %s', event);\n  }\n\n  each(extoleEvents, bind(this, function(extoleEvent) {\n    this._registerConversion(this._createConversionTag({\n      type: extoleEvent,\n      params: this._formatConversionParams(event, email, userId, track.properties())\n    }));\n  }));\n};\n\n/**\n * Register a conversion to Extole.\n *\n * @api private\n * @param {HTMLElement} conversionTag An Extole conversion tag.\n */\n\n// FIXME: If I understand Extole's lib correctly, this is sometimes async,\n// sometimes sync. Refactor this into more predictable/sane behavior.\nExtole.prototype._registerConversion = function(conversionTag) {\n  if (window.extole.main && window.extole.main.fireConversion) {\n    return window.extole.main.fireConversion(conversionTag);\n  }\n\n  if (window.extole.initializeGo) {\n    window.extole.initializeGo().andWhenItsReady(function() {\n      window.extole.main.fireConversion(conversionTag);\n    });\n  }\n};\n\n/**\n * Formats details from a Segment track event into a data format Extole can\n * accept.\n *\n * @api private\n * @param {string} event\n * @param {string} email\n * @param {string|number} userId\n * @param {Object} properties track.properties().\n * @return {Object}\n */\n\nExtole.prototype._formatConversionParams = function(event, email, userId, properties) {\n  var total;\n\n  if (properties.total) {\n    total = properties.total;\n    delete properties.total;\n    properties['tag:cart_value'] = total;\n  }\n\n  return extend({\n    'tag:segment_event': event,\n    e: email,\n    partner_conversion_id: userId\n  }, properties);\n};\n\n/**\n * Create an Extole conversion tag.\n *\n * @param {Object} conversion An Extole conversion object.\n * @return {HTMLElement}\n */\n\nExtole.prototype._createConversionTag = function(conversion) {\n  return domify('<script type=\"extole/conversion\">' + json.stringify(conversion) + '</script>');\n};\n\n}, {\"bind\":55,\"domify\":186,\"each\":4,\"extend\":68,\"analytics.js-integration\":166,\"json\":59}],\n105: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_fbq');\n\n/**\n * Expose `Facebook`\n */\n\nvar Facebook = module.exports = integration('Facebook Conversion Tracking')\n  .global('_fbq')\n  .option('currency', 'USD')\n  .tag('<script src=\"//connect.facebook.net/en_US/fbds.js\">')\n  .mapping('events');\n\n/**\n * Initialize Facebook Conversion Tracking\n *\n * https://developers.facebook.com/docs/ads-for-websites/conversion-pixel-code-migration\n *\n * @api public\n */\n\nFacebook.prototype.initialize = function() {\n  window._fbq = window._fbq || [];\n  this.load(this.ready);\n  window._fbq.loaded = true;\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nFacebook.prototype.loaded = function() {\n  return !!(window._fbq && window._fbq.loaded);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nFacebook.prototype.page = function(page) {\n  this.track(page.track(page.fullName()));\n};\n\n/**\n * Track.\n *\n * https://developers.facebook.com/docs/reference/ads-api/custom-audience-website-faq/#fbpixel\n *\n * @api public\n * @param {Track} track\n */\n\nFacebook.prototype.track = function(track) {\n  var event = track.event();\n  var events = this.events(event);\n  var revenue = track.revenue() || 0;\n  var self = this;\n\n  each(events, function(event) {\n    push('track', event, {\n      currency: self.options.currency,\n      value: revenue.toFixed(2)\n    });\n  });\n};\n\n}, {\"each\":4,\"analytics.js-integration\":166,\"global-queue\":196}],\n106: [function(require, module, exports) {\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_fbq');\nvar reduce = require('reduce');\n\n/**\n * Expose `FacebookCustomAudiences`.\n */\n\nvar FacebookCustomAudiences = module.exports = integration('Facebook Custom Audiences')\n  .global('_fbds')\n  .global('_fbq')\n  .option('pixelId', '')\n  .option('currency', 'USD')\n  .mapping('events')\n  .tag('<script src=\"//connect.facebook.net/en_US/fbds.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nFacebookCustomAudiences.prototype.initialize = function() {\n  var pixelId = this.options.pixelId;\n  window._fbds = window._fbds || {};\n  window._fbds.pixelId = pixelId;\n  window._fbq = window._fbq || [];\n  window._fbq.push(['track', 'PixelInitialized', {}]);\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api public\n * @return {boolean}\n */\n\nFacebookCustomAudiences.prototype.loaded = function() {\n  return !!(window._fbq && Array.prototype.push !== window._fbq.push);\n};\n\n/**\n * Track.\n *\n * https://developers.facebook.com/docs/reference/ads-api/custom-audience-website#tagapi\n *\n * @api public\n * @param {Track} track\n */\n\nFacebookCustomAudiences.prototype.track = function(track) {\n  var event = track.event();\n  var properties = track.properties();\n\n  // Track event\n  window._fbq.push(['track', event, properties]);\n};\n\n/**\n * Viewed product category.\n *\n * @api private\n * @param {Track} track category\n */\n\nFacebookCustomAudiences.prototype.viewedProductCategory = function(track) {\n  push('track', 'ViewContent', {\n    content_ids: [String(track.category() || '')],\n    content_type: 'product_group'\n  });\n};\n\n/**\n * Viewed product.\n *\n * @api private\n * @param {Track} track\n */\n\nFacebookCustomAudiences.prototype.viewedProduct = function(track) {\n  push('track', 'ViewContent', {\n    content_ids: [String(track.id() || track.sku() || '')],\n    content_type: 'product'\n  });\n};\n\n/**\n * Added product.\n *\n * @api private\n * @param {Track} track\n */\n\nFacebookCustomAudiences.prototype.addedProduct = function(track) {\n  push('track', 'AddToCart', {\n    content_ids: [String(track.id() || track.sku() || '')],\n    content_type: 'product'\n  });\n};\n\n/**\n * Completed Order.\n *\n * @api private\n * @param {Track} track\n */\n\nFacebookCustomAudiences.prototype.completedOrder = function(track) {\n  var content_ids = reduce(track.products() || [], [], function(ret, product) {\n    ret.push(product.id || product.sku || '');\n    return ret;\n  });\n  push('track', 'Purchase', {\n    content_ids: content_ids,\n    content_type: 'product'\n  });\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196,\"reduce\":202}],\n202: [function(require, module, exports) {\n\nvar each = require('each');\n\n\n/**\n * Reduce an array or object.\n *\n * @param {Array|Object} obj\n * @param {Mixed} memo\n * @param {Function} iterator\n * @return {Mixed}\n */\n\nmodule.exports = function reduce (obj, memo, iterator) {\n  each(obj, function (a, b) {\n    memo = iterator.call(null, memo, a, b, obj);\n  });\n  return memo;\n};\n}, {\"each\":177}],\n107: [function(require, module, exports) {\n\r\n/**\r\n * Module dependencies.\r\n */\r\n\r\nvar Track = require('facade').Track;\r\nvar each = require('each');\r\nvar integration = require('analytics.js-integration');\r\nvar push = require('global-queue')('_fxm');\r\n\r\n/**\r\n * Expose `FoxMetrics` integration.\r\n */\r\n\r\nvar FoxMetrics = module.exports = integration('FoxMetrics')\r\n  .assumesPageview()\r\n  .global('_fxm')\r\n  .option('appId', '')\r\n  .tag('<script src=\"//d35tca7vmefkrc.cloudfront.net/scripts/{{ appId }}.js\">');\r\n\r\n/**\r\n * Initialize.\r\n *\r\n * http://foxmetrics.com/documentation/apijavascript\r\n *\r\n * @api public\r\n */\r\n\r\nFoxMetrics.prototype.initialize = function() {\r\n  window._fxm = window._fxm || [];\r\n  this.load(this.ready);\r\n};\r\n\r\n/**\r\n * Loaded?\r\n *\r\n * @return {Boolean}\r\n */\r\n\r\nFoxMetrics.prototype.loaded = function() {\r\n  return !!(window._fxm && window._fxm.appId);\r\n};\r\n\r\n/**\r\n * Page.\r\n *\r\n * @api public\r\n * @param {Page} page\r\n */\r\n\r\nFoxMetrics.prototype.page = function(page) {\r\n  var properties = page.proxy('properties');\r\n  var category = page.category();\r\n  var name = page.name();\r\n  // store for later\r\n  // TODO: Why? Document me\r\n  this._category = category;\r\n\r\n  push(\r\n    '_fxm.pages.view',\r\n    properties.title,\r\n    name,\r\n    category,\r\n    properties.url,\r\n    properties.referrer\r\n  );\r\n};\r\n\r\n/**\r\n * Identify.\r\n *\r\n * @api public\r\n * @param {Identify} identify\r\n */\r\n\r\nFoxMetrics.prototype.identify = function(identify) {\r\n  var id = identify.userId();\r\n\r\n  if (!id) return;\r\n\r\n  push(\r\n    '_fxm.visitor.profile',\r\n    id,\r\n    identify.firstName(),\r\n    identify.lastName(),\r\n    identify.email(),\r\n    identify.address(),\r\n    // social\r\n    // TODO: Why is this `undefined`? Document\r\n    undefined,\r\n    // partners\r\n    // TODO: Why is this `undefined`? Document\r\n    undefined,\r\n    identify.traits()\r\n  );\r\n};\r\n\r\n/**\r\n * Track.\r\n *\r\n * @api public\r\n * @param {Track} track\r\n */\r\n\r\nFoxMetrics.prototype.track = function(track) {\r\n  var props = track.properties();\r\n  var category = this._category || props.category;\r\n  push(track.event(), category, props);\r\n};\r\n\r\n/**\r\n * Viewed product.\r\n *\r\n * @api private\r\n * @param {Track} track\r\n */\r\n\r\nFoxMetrics.prototype.viewedProduct = function(track) {\r\n  ecommerce('productview', track);\r\n};\r\n\r\n/**\r\n * Removed product.\r\n *\r\n * @api private\r\n * @param {Track} track\r\n */\r\n\r\nFoxMetrics.prototype.removedProduct = function(track) {\r\n  ecommerce('removecartitem', track);\r\n};\r\n\r\n/**\r\n * Added product.\r\n *\r\n * @api private\r\n * @param {Track} track\r\n */\r\n\r\nFoxMetrics.prototype.addedProduct = function(track) {\r\n  ecommerce('cartitem', track);\r\n};\r\n\r\n/**\r\n * Completed Order.\r\n *\r\n * @api private\r\n * @param {Track} track\r\n */\r\n\r\nFoxMetrics.prototype.completedOrder = function(track) {\r\n  var orderId = track.orderId();\r\n\r\n  // transaction\r\n  push(\r\n    '_fxm.ecommerce.order',\r\n    orderId,\r\n    track.subtotal(),\r\n    track.shipping(),\r\n    track.tax(),\r\n    track.city(),\r\n    track.state(),\r\n    track.zip(),\r\n    track.quantity()\r\n  );\r\n\r\n  // items\r\n  each(track.products(), function(product) {\r\n    var track = new Track({ properties: product });\r\n    ecommerce('purchaseitem', track, [\r\n      track.quantity(),\r\n      track.price(),\r\n      orderId\r\n    ]);\r\n  });\r\n};\r\n\r\n/**\r\n * Track ecommerce `event` with `track`\r\n * with optional `arr` to append.\r\n *\r\n * @api private\r\n * @param {string} event\r\n * @param {Track} track\r\n * @param {Array} arr\r\n */\r\n\r\nfunction ecommerce(event, track, arr) {\r\n  push.apply(null, [\r\n    '_fxm.ecommerce.' + event,\r\n    track.id() || track.sku(),\r\n    track.name(),\r\n    track.category()\r\n  ].concat(arr || []));\r\n}\r\n\n}, {\"facade\":9,\"each\":4,\"analytics.js-integration\":166,\"global-queue\":196}],\n108: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('bind');\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\n\n/**\n * hasOwnProperty reference.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Expose `Frontleaf` integration.\n */\n\nvar Frontleaf = module.exports = integration('Frontleaf')\n  .global('_fl')\n  .global('_flBaseUrl')\n  .option('baseUrl', 'https://api.frontleaf.com')\n  .option('stream', '')\n  .option('token', '')\n  .option('trackCategorizedPages', false)\n  .option('trackNamedPages', false)\n  .tag('<script id=\"_fl\" src=\"{{ baseUrl }}/lib/tracker.js\">');\n\n/**\n * Initialize.\n *\n * http://docs.frontleaf.com/#/technical-implementation/tracking-customers/tracking-beacon\n *\n * @api public\n */\n\nFrontleaf.prototype.initialize = function() {\n  window._fl = window._fl || [];\n  window._flBaseUrl = window._flBaseUrl || this.options.baseUrl;\n  this._push('setApiToken', this.options.token);\n  this._push('setStream', this.options.stream);\n  // TODO: Do we need this to be bound?\n  bind(this, this.loaded);\n  this.load({ baseUrl: window._flBaseUrl }, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nFrontleaf.prototype.loaded = function() {\n  return is.array(window._fl) && window._fl.ready === true;\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nFrontleaf.prototype.identify = function(identify) {\n  var userId = identify.userId();\n  if (userId) {\n    this._push('setUser', {\n      id: userId,\n      name: identify.name() || identify.username(),\n      data: clean(identify.traits())\n    });\n  }\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Group} group\n */\n\nFrontleaf.prototype.group = function(group) {\n  var groupId = group.groupId();\n  if (groupId) {\n    this._push('setAccount', {\n      id: groupId,\n      name: group.proxy('traits.name'),\n      data: clean(group.traits())\n    });\n  }\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nFrontleaf.prototype.page = function(page) {\n  var category = page.category();\n  var name = page.fullName();\n  var opts = this.options;\n\n  // categorized pages\n  if (category && opts.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n\n  // named pages\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nFrontleaf.prototype.track = function(track) {\n  var event = track.event();\n  this._push('event', event, clean(track.properties()));\n};\n\n/**\n * Push a command onto the global Frontleaf queue.\n *\n * @api private\n * @param {String} command\n * @return {Object} args\n */\n\nFrontleaf.prototype._push = function(command) {\n  var args = [].slice.call(arguments, 1);\n  window._fl.push(function(t) { t[command].apply(command, args); });\n};\n\n/**\n * Clean all nested objects and arrays.\n *\n * @api private\n * @param {Object} obj\n * @return {Object}\n */\n\nfunction clean(obj) {\n  var ret = {};\n\n  // Remove traits/properties that are already represented\n  // outside of the data container\n  // TODO: Refactor into `omit` call\n  var excludeKeys = ['id', 'name', 'firstName', 'lastName'];\n  each(excludeKeys, function(omitKey) {\n    clear(obj, omitKey);\n  });\n\n  // Flatten nested hierarchy, preserving arrays\n  obj = flatten(obj);\n\n  // Discard nulls, represent arrays as comma-separated strings\n  // FIXME: This also discards `undefined`s. Is that OK?\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      var val = obj[key];\n      if (val == null) {\n        continue;\n      }\n\n      if (is.array(val)) {\n        ret[key] = val.toString();\n        continue;\n      }\n\n      ret[key] = val;\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Remove a property from an object if set.\n *\n * @api private\n * @param {Object} obj\n * @param {String} key\n */\n\nfunction clear(obj, key) {\n  if (obj.hasOwnProperty(key)) {\n    delete obj[key];\n  }\n}\n\n/**\n * Flatten a nested object into a single level space-delimited\n * hierarchy.\n *\n * Based on https://github.com/hughsk/flat\n *\n * @api private\n * @param {Object} source\n * @return {Object}\n */\n\nfunction flatten(source) {\n  var output = {};\n\n  function step(object, prev) {\n    for (var key in object) {\n      if (has.call(object, key)) {\n        var value = object[key];\n        var newKey = prev ? prev + ' ' + key : key;\n\n        if (!is.array(value) && is.object(value)) {\n          return step(value, newKey);\n        }\n\n        output[newKey] = value;\n      }\n    }\n  }\n\n  step(source);\n\n  return output;\n}\n\n}, {\"bind\":55,\"each\":4,\"analytics.js-integration\":166,\"is\":18}],\n109: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar camel = require('to-camel-case');\nvar foldl = require('foldl');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\n\n/**\n * Expose `FullStory` integration.\n *\n * https://www.fullstory.com/docs/developer\n */\n\nvar FullStory = module.exports = integration('FullStory')\n  .option('org', '')\n  .option('debug', false)\n  .tag('<script src=\"https://www.fullstory.com/s/fs.js\"></script>');\n\n/**\n * Initialize.\n */\n\nFullStory.prototype.initialize = function() {\n  var self = this;\n  window._fs_debug = this.options.debug;\n  window._fs_host = 'www.fullstory.com';\n  window._fs_org = this.options.org;\n\n  /* eslint-disable */\n  (function(m,n,e,t,l,o,g,y){\n    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];\n    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){FS(l,v)};\n    g.setSessionVars=function(v){FS('session',v)};g.setPageVars=function(v){FS('page',v)};\n    self.ready();\n    self.load();\n  })(window,document,'FS','script','user');\n  /* eslint-enable */\n};\n\n/**\n * Loaded?\n *\n * @return {Boolean}\n */\n\nFullStory.prototype.loaded = function() {\n  return !!window.FS;\n};\n\n/**\n * Identify.\n *\n * @param {Identify} identify\n */\n\nFullStory.prototype.identify = function(identify) {\n  var id = identify.userId() || identify.anonymousId();\n  var traits = identify.traits({ name: 'displayName' });\n\n  var newTraits = foldl(function(results, value, key) {\n    if (key !== 'id') results[key === 'displayName' || key === 'email' ? key : convert(key, value)] = value;\n    return results;\n  }, {}, traits);\n\n  window.FS.identify(String(id), newTraits);\n};\n\n/**\n* Convert to FullStory format.\n*\n* @param {string} trait\n* @param {*} value\n*/\n\nfunction convert(key, value) {\n  key = camel(key);\n  if (is.string(value)) return key + '_str';\n  if (isInt(value)) return key + '_int';\n  if (isFloat(value)) return key + '_real';\n  if (is.date(value)) return key + '_date';\n  if (is.boolean(value)) return key + '_bool';\n}\n\n/**\n * Check if n is a float.\n */\n\nfunction isFloat(n) {\n  return n === +n && n !== (n | 0);\n}\n\n/**\n * Check if n is an integer.\n */\n\nfunction isInt(n) {\n  return n === +n && n === (n | 0);\n}\n\n}, {\"to-camel-case\":203,\"foldl\":180,\"analytics.js-integration\":166,\"is\":18}],\n203: [function(require, module, exports) {\n\nvar toSpace = require('to-space-case');\n\n\n/**\n * Expose `toCamelCase`.\n */\n\nmodule.exports = toCamelCase;\n\n\n/**\n * Convert a `string` to camel case.\n *\n * @param {String} string\n * @return {String}\n */\n\n\nfunction toCamelCase (string) {\n  return toSpace(string).replace(/\\s(\\w)/g, function (matches, letter) {\n    return letter.toUpperCase();\n  });\n}\n}, {\"to-space-case\":187}],\n110: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_gauges');\n\n/**\n * Expose `Gauges` integration.\n */\n\nvar Gauges = module.exports = integration('Gauges')\n  .assumesPageview()\n  .global('_gauges')\n  .option('siteId', '')\n  .tag('<script id=\"gauges-tracker\" src=\"//secure.gaug.es/track.js\" data-site-id=\"{{ siteId }}\">');\n\n/**\n * Initialize Gauges.\n *\n * http://get.gaug.es/documentation/tracking/\n *\n * @api public\n */\n\nGauges.prototype.initialize = function() {\n  window._gauges = window._gauges || [];\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nGauges.prototype.loaded = function() {\n  return !!(window._gauges && window._gauges.push !== Array.prototype.push);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nGauges.prototype.page = function() {\n  push('track');\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196}],\n111: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar onBody = require('on-body');\n\n/**\n * Expose `GetSatisfaction` integration.\n */\n\nvar GetSatisfaction = module.exports = integration('Get Satisfaction')\n  .assumesPageview()\n  .global('GSFN')\n  .option('widgetId', '')\n  .tag('<script src=\"https://loader.engage.gsfn.us/loader.js\">');\n\n/**\n * Initialize.\n *\n * https://console.getsatisfaction.com/start/101022?signup=true#engage\n *\n * @api public\n */\n\nGetSatisfaction.prototype.initialize = function() {\n  var self = this;\n  var widget = this.options.widgetId;\n  var div = document.createElement('div');\n  var id = div.id = 'getsat-widget-' + widget;\n  onBody(function(body) { body.appendChild(div); });\n\n  // usually the snippet is sync, so wait for it before initializing the tab\n  this.load(function() {\n    window.GSFN.loadWidget(widget, { containerId: id });\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nGetSatisfaction.prototype.loaded = function() {\n  return !!window.GSFN;\n};\n\n}, {\"analytics.js-integration\":166,\"on-body\":193}],\n112: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Track = require('facade').Track;\nvar defaults = require('defaults');\nvar dot = require('obj-case');\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar keys = require('object').keys;\nvar len = require('object').length;\nvar push = require('global-queue')('_gaq');\nvar select = require('select');\nvar useHttps = require('use-https');\nvar user;\n\n/**\n * Expose plugin.\n */\n\nmodule.exports = exports = function(analytics) {\n  analytics.addIntegration(GA);\n  user = analytics.user();\n};\n\n/**\n * Expose `GA` integration.\n *\n * http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867\n * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSiteSpeedSampleRate\n */\n\nvar GA = exports.Integration = integration('Google Analytics')\n  .readyOnLoad()\n  .global('ga')\n  .global('gaplugins')\n  .global('_gaq')\n  .global('GoogleAnalyticsObject')\n  .option('anonymizeIp', false)\n  .option('classic', false)\n  .option('dimensions', {})\n  .option('domain', 'auto')\n  .option('doubleClick', false)\n  .option('enhancedEcommerce', false)\n  .option('enhancedLinkAttribution', false)\n  .option('ignoredReferrers', null)\n  .option('includeSearch', false)\n  .option('metrics', {})\n  .option('nonInteraction', false)\n  .option('sendUserId', false)\n  .option('siteSpeedSampleRate', 1)\n  .option('trackCategorizedPages', true)\n  .option('trackNamedPages', true)\n  .option('trackingId', '')\n  .tag('library', '<script src=\"//www.google-analytics.com/analytics.js\">')\n  .tag('double click', '<script src=\"//stats.g.doubleclick.net/dc.js\">')\n  .tag('http', '<script src=\"http://www.google-analytics.com/ga.js\">')\n  .tag('https', '<script src=\"https://ssl.google-analytics.com/ga.js\">');\n\n/**\n * On `construct` swap any config-based methods to the proper implementation.\n */\n\nGA.on('construct', function(integration) {\n  if (integration.options.classic) {\n    integration.initialize = integration.initializeClassic;\n    integration.loaded = integration.loadedClassic;\n    integration.page = integration.pageClassic;\n    integration.track = integration.trackClassic;\n    integration.completedOrder = integration.completedOrderClassic;\n  } else if (integration.options.enhancedEcommerce) {\n    integration.viewedProduct = integration.viewedProductEnhanced;\n    integration.clickedProduct = integration.clickedProductEnhanced;\n    integration.addedProduct = integration.addedProductEnhanced;\n    integration.removedProduct = integration.removedProductEnhanced;\n    integration.startedOrder = integration.startedOrderEnhanced;\n    integration.viewedCheckoutStep = integration.viewedCheckoutStepEnhanced;\n    integration.completedCheckoutStep = integration.completedCheckoutStepEnhanced;\n    integration.updatedOrder = integration.updatedOrderEnhanced;\n    integration.completedOrder = integration.completedOrderEnhanced;\n    integration.refundedOrder = integration.refundedOrderEnhanced;\n    integration.viewedPromotion = integration.viewedPromotionEnhanced;\n    integration.clickedPromotion = integration.clickedPromotionEnhanced;\n  }\n});\n\n/**\n * Initialize.\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced\n */\n\nGA.prototype.initialize = function() {\n  var opts = this.options;\n\n  // setup the tracker globals\n  window.GoogleAnalyticsObject = 'ga';\n  window.ga = window.ga || function() {\n    window.ga.q = window.ga.q || [];\n    window.ga.q.push(arguments);\n  };\n  window.ga.l = new Date().getTime();\n\n  if (window.location.hostname === 'localhost') opts.domain = 'none';\n\n  window.ga('create', opts.trackingId, {\n    // Fall back on default to protect against empty string\n    cookieDomain: opts.domain || GA.prototype.defaults.domain,\n    siteSpeedSampleRate: opts.siteSpeedSampleRate,\n    allowLinker: true\n  });\n\n  // display advertising\n  if (opts.doubleClick) {\n    window.ga('require', 'displayfeatures');\n  }\n\n  // send global id\n  if (opts.sendUserId && user.id()) {\n    window.ga('set', 'userId', user.id());\n  }\n\n  // anonymize after initializing, otherwise a warning is shown\n  // in google analytics debugger\n  if (opts.anonymizeIp) window.ga('set', 'anonymizeIp', true);\n\n  // custom dimensions & metrics\n  var custom = metrics(user.traits(), opts);\n  if (len(custom)) window.ga('set', custom);\n\n  this.load('library', this.ready);\n};\n\n/**\n * Loaded?\n *\n * @return {Boolean}\n */\n\nGA.prototype.loaded = function() {\n  return !!window.gaplugins;\n};\n\n/**\n * Page.\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/pages\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/single-page-applications#multiple-hits\n *\n * @api public\n * @param {Page} page\n */\n\nGA.prototype.page = function(page) {\n  var category = page.category();\n  var props = page.properties();\n  var name = page.fullName();\n  var opts = this.options;\n  var campaign = page.proxy('context.campaign') || {};\n  var pageview = {};\n  var pagePath = path(props, this.options);\n  var pageTitle = name || props.title;\n  var track;\n\n  // store for later\n  // TODO: Why? Document this better\n  this._category = category;\n\n  pageview.page = pagePath;\n  pageview.title = pageTitle;\n  pageview.location = props.url;\n\n  if (campaign.name) pageview.campaignName = campaign.name;\n  if (campaign.source) pageview.campaignSource = campaign.source;\n  if (campaign.medium) pageview.campaignMedium = campaign.medium;\n  if (campaign.content) pageview.campaignContent = campaign.content;\n  if (campaign.term) pageview.campaignKeyword = campaign.term;\n\n  // custom dimensions and metrics\n  var custom = metrics(props, opts);\n  if (len(custom)) window.ga('set', custom);\n\n  // set\n  window.ga('set', { page: pagePath, title: pageTitle });\n\n  // send\n  window.ga('send', 'pageview', pageview);\n\n  // categorized pages\n  if (category && this.options.trackCategorizedPages) {\n    track = page.track(category);\n    this.track(track, { nonInteraction: 1 });\n  }\n\n  // named pages\n  if (name && this.options.trackNamedPages) {\n    track = page.track(name);\n    this.track(track, { nonInteraction: 1 });\n  }\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} event\n */\n\nGA.prototype.identify = function(identify) {\n  var opts = this.options;\n\n  if (opts.sendUserId && identify.userId()) {\n    window.ga('set', 'userId', identify.userId());\n  }\n\n  // Set dimensions\n  var custom = metrics(user.traits(), opts);\n  if (len(custom)) window.ga('set', custom);\n};\n\n/**\n * Track.\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/events\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference\n *\n * @param {Track} event\n */\n\nGA.prototype.track = function(track, options) {\n  var contextOpts = track.options(this.name);\n  var interfaceOpts = this.options;\n  var opts = defaults(options || {}, contextOpts);\n  opts = defaults(opts, interfaceOpts);\n  var props = track.properties();\n  var campaign = track.proxy('context.campaign') || {};\n\n  // custom dimensions & metrics\n  var custom = metrics(props, interfaceOpts);\n  if (len(custom)) window.ga('set', custom);\n\n  var payload = {\n    eventAction: track.event(),\n    eventCategory: props.category || this._category || 'All',\n    eventLabel: props.label,\n    eventValue: formatValue(props.value || track.revenue()),\n    nonInteraction: !!(props.nonInteraction || opts.nonInteraction)\n  };\n\n  if (campaign.name) payload.campaignName = campaign.name;\n  if (campaign.source) payload.campaignSource = campaign.source;\n  if (campaign.medium) payload.campaignMedium = campaign.medium;\n  if (campaign.content) payload.campaignContent = campaign.content;\n  if (campaign.term) payload.campaignKeyword = campaign.term;\n\n  window.ga('send', 'event', payload);\n};\n\n/**\n * Completed order.\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce#multicurrency\n *\n * @param {Track} track\n * @api private\n */\n\nGA.prototype.completedOrder = function(track) {\n  var total = track.total() || track.revenue() || 0;\n  var orderId = track.orderId();\n  var products = track.products();\n  var props = track.properties();\n\n  // orderId is required.\n  if (!orderId) return;\n\n  // require ecommerce\n  if (!this.ecommerce) {\n    window.ga('require', 'ecommerce');\n    this.ecommerce = true;\n  }\n\n  // add transaction\n  window.ga('ecommerce:addTransaction', {\n    affiliation: props.affiliation,\n    shipping: track.shipping(),\n    revenue: total,\n    tax: track.tax(),\n    id: orderId,\n    currency: track.currency()\n  });\n\n  // add products\n  each(products, function(product) {\n    var productTrack = createProductTrack(track, product);\n    window.ga('ecommerce:addItem', {\n      category: productTrack.category(),\n      quantity: productTrack.quantity(),\n      price: productTrack.price(),\n      name: productTrack.name(),\n      sku: productTrack.sku(),\n      id: orderId,\n      currency: productTrack.currency()\n    });\n  });\n\n  // send\n  window.ga('ecommerce:send');\n};\n\n/**\n * Initialize (classic).\n *\n * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration\n */\n\nGA.prototype.initializeClassic = function() {\n  var opts = this.options;\n  var anonymize = opts.anonymizeIp;\n  var domain = opts.domain;\n  var enhanced = opts.enhancedLinkAttribution;\n  var ignore = opts.ignoredReferrers;\n  var sample = opts.siteSpeedSampleRate;\n\n  window._gaq = window._gaq || [];\n  push('_setAccount', opts.trackingId);\n  push('_setAllowLinker', true);\n\n  if (anonymize) push('_gat._anonymizeIp');\n  if (domain) push('_setDomainName', domain);\n  if (sample) push('_setSiteSpeedSampleRate', sample);\n\n  if (enhanced) {\n    var protocol = document.location.protocol === 'https:' ? 'https:' : 'http:';\n    var pluginUrl = protocol + '//www.google-analytics.com/plugins/ga/inpage_linkid.js';\n    push('_require', 'inpage_linkid', pluginUrl);\n  }\n\n  if (ignore) {\n    if (!is.array(ignore)) ignore = [ignore];\n    each(ignore, function(domain) {\n      push('_addIgnoredRef', domain);\n    });\n  }\n\n  if (this.options.doubleClick) {\n    this.load('double click', this.ready);\n  } else {\n    var name = useHttps() ? 'https' : 'http';\n    this.load(name, this.ready);\n  }\n};\n\n/**\n * Loaded? (classic)\n *\n * @return {Boolean}\n */\n\nGA.prototype.loadedClassic = function() {\n  return !!(window._gaq && window._gaq.push !== Array.prototype.push);\n};\n\n/**\n * Page (classic).\n *\n * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration\n *\n * @param {Page} page\n */\n\nGA.prototype.pageClassic = function(page) {\n  var category = page.category();\n  var props = page.properties();\n  var name = page.fullName();\n  var track;\n\n  push('_trackPageview', path(props, this.options));\n\n  // categorized pages\n  if (category && this.options.trackCategorizedPages) {\n    track = page.track(category);\n    this.track(track, { nonInteraction: 1 });\n  }\n\n  // named pages\n  if (name && this.options.trackNamedPages) {\n    track = page.track(name);\n    this.track(track, { nonInteraction: 1 });\n  }\n};\n\n/**\n * Track (classic).\n *\n * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiEventTracking\n *\n * @param {Track} track\n */\n\nGA.prototype.trackClassic = function(track, options) {\n  var opts = options || track.options(this.name);\n  var props = track.properties();\n  var revenue = track.revenue();\n  var event = track.event();\n  var category = this._category || props.category || 'All';\n  var label = props.label;\n  var value = formatValue(revenue || props.value);\n  var nonInteraction = !!(props.nonInteraction || opts.nonInteraction);\n  push('_trackEvent', category, event, label, value, nonInteraction);\n};\n\n/**\n * Completed order.\n *\n * https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingEcommerce\n * https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingEcommerce#localcurrencies\n *\n * @param {Track} track\n * @api private\n */\n\nGA.prototype.completedOrderClassic = function(track) {\n  var total = track.total() || track.revenue() || 0;\n  var orderId = track.orderId();\n  var products = track.products() || [];\n  var props = track.properties();\n  var currency = track.currency();\n\n  // required\n  if (!orderId) return;\n\n  // add transaction\n  push('_addTrans',\n    orderId,\n    props.affiliation,\n    total,\n    track.tax(),\n    track.shipping(),\n    track.city(),\n    track.state(),\n    track.country());\n\n  // add items\n  each(products, function(product) {\n    var track = new Track({ properties: product });\n    push('_addItem',\n      orderId,\n      track.sku(),\n      track.name(),\n      track.category(),\n      track.price(),\n      track.quantity());\n  });\n\n  // send\n  push('_set', 'currencyCode', currency);\n  push('_trackTrans');\n};\n\n/**\n * Return the path based on `properties` and `options`.\n *\n * @param {Object} properties\n * @param {Object} options\n * @return {string|undefined}\n */\n\nfunction path(properties, options) {\n  if (!properties) return;\n  var str = properties.path;\n  if (options.includeSearch && properties.search) str += properties.search;\n  return str;\n}\n\n/**\n * Format the value property to Google's liking.\n *\n * @param {Number} value\n * @return {Number}\n */\n\nfunction formatValue(value) {\n  if (!value || value < 0) return 0;\n  return Math.round(value);\n}\n\n/**\n * Map google's custom dimensions & metrics with `obj`.\n *\n * Example:\n *\n *      metrics({ revenue: 1.9 }, { { metrics : { revenue: 'metric8' } });\n *      // => { metric8: 1.9 }\n *\n *      metrics({ revenue: 1.9 }, {});\n *      // => {}\n *\n * @param {Object} obj\n * @param {Object} data\n * @return {Object|null}\n * @api private\n */\n\nfunction metrics(obj, data) {\n  var dimensions = data.dimensions;\n  var metrics = data.metrics;\n  var names = keys(metrics).concat(keys(dimensions));\n  var ret = {};\n\n  for (var i = 0; i < names.length; ++i) {\n    var name = names[i];\n    var key = metrics[name] || dimensions[name];\n    var value = dot(obj, name) || obj[name];\n    if (value == null) continue;\n    ret[key] = value;\n  }\n\n  return ret;\n}\n\n/**\n * Loads ec.js (unless already loaded)\n *\n * @param {Track} track\n */\n\nGA.prototype.loadEnhancedEcommerce = function(track) {\n  if (!this.enhancedEcommerceLoaded) {\n    window.ga('require', 'ec');\n    this.enhancedEcommerceLoaded = true;\n  }\n\n  // Ensure we set currency for every hit\n  window.ga('set', '&cu', track.currency());\n};\n\n/**\n * Pushes an event and all previously set EE data to GA.\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.pushEnhancedEcommerce = function(track) {\n  // Send a custom non-interaction event to ensure all EE data is pushed.\n  // Without doing this we'd need to require page display after setting EE data.\n  window.ga('send', 'event', track.category() || 'EnhancedEcommerce', track.event(), { nonInteraction: 1 });\n};\n\n/**\n * Started order - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-steps\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.startedOrderEnhanced = function(track) {\n  // same as viewed checkout step #1\n  this.viewedCheckoutStep(track);\n};\n\n/**\n * Updated order - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-steps\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.updatedOrderEnhanced = function(track) {\n  // Same event as started order - will override\n  this.startedOrderEnhanced(track);\n};\n\n/**\n * Viewed checkout step - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-steps\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.viewedCheckoutStepEnhanced = function(track) {\n  var products = track.products();\n  var props = track.properties();\n  var options = extractCheckoutOptions(props);\n\n  this.loadEnhancedEcommerce(track);\n\n  each(products, function(product) {\n    var productTrack = createProductTrack(track, product);\n    enhancedEcommerceTrackProduct(productTrack);\n  });\n\n  window.ga('ec:setAction', 'checkout', {\n    step: props.step || 1,\n    option: options || undefined\n  });\n\n  this.pushEnhancedEcommerce(track);\n};\n\n/**\n * Completed checkout step - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-options\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.completedCheckoutStepEnhanced = function(track) {\n  var props = track.properties();\n  var options = extractCheckoutOptions(props);\n\n  // Only send an event if we have step and options to update\n  if (!props.step || !options) return;\n\n  this.loadEnhancedEcommerce(track);\n\n  window.ga('ec:setAction', 'checkout_option', {\n    step: props.step || 1,\n    option: options\n  });\n\n  window.ga('send', 'event', 'Checkout', 'Option');\n};\n\n/**\n * Completed order - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-transactions\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.completedOrderEnhanced = function(track) {\n  var total = track.total() || track.revenue() || 0;\n  var orderId = track.orderId();\n  var products = track.products();\n  var props = track.properties();\n\n  // orderId is required.\n  if (!orderId) return;\n\n  this.loadEnhancedEcommerce(track);\n\n  each(products, function(product) {\n    var productTrack = createProductTrack(track, product);\n    enhancedEcommerceTrackProduct(productTrack);\n  });\n\n  window.ga('ec:setAction', 'purchase', {\n    id: orderId,\n    affiliation: props.affiliation,\n    revenue: total,\n    tax: track.tax(),\n    shipping: track.shipping(),\n    coupon: track.coupon()\n  });\n\n  this.pushEnhancedEcommerce(track);\n};\n\n/**\n * Refunded order - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-refunds\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.refundedOrderEnhanced = function(track) {\n  var orderId = track.orderId();\n  var products = track.products();\n\n  // orderId is required.\n  if (!orderId) return;\n\n  this.loadEnhancedEcommerce(track);\n\n  // Without any products it's a full refund\n  each(products, function(product) {\n    var track = new Track({ properties: product });\n    window.ga('ec:addProduct', {\n      id: track.id() || track.sku(),\n      quantity: track.quantity()\n    });\n  });\n\n  window.ga('ec:setAction', 'refund', {\n    id: orderId\n  });\n\n  this.pushEnhancedEcommerce(track);\n};\n\n/**\n * Added product - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#add-remove-cart\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.addedProductEnhanced = function(track) {\n  this.loadEnhancedEcommerce(track);\n  enhancedEcommerceProductAction(track, 'add');\n  this.pushEnhancedEcommerce(track);\n};\n\n/**\n * Removed product - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#add-remove-cart\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.removedProductEnhanced = function(track) {\n  this.loadEnhancedEcommerce(track);\n  enhancedEcommerceProductAction(track, 'remove');\n  this.pushEnhancedEcommerce(track);\n};\n\n/**\n * Viewed product details - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#product-detail-view\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.viewedProductEnhanced = function(track) {\n  this.loadEnhancedEcommerce(track);\n  enhancedEcommerceProductAction(track, 'detail');\n  this.pushEnhancedEcommerce(track);\n};\n\n/**\n * Clicked product - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-actions\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.clickedProductEnhanced = function(track) {\n  var props = track.properties();\n\n  this.loadEnhancedEcommerce(track);\n  enhancedEcommerceProductAction(track, 'click', {\n    list: props.list\n  });\n  this.pushEnhancedEcommerce(track);\n};\n\n/**\n * Viewed promotion - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-promo-impressions\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.viewedPromotionEnhanced = function(track) {\n  var props = track.properties();\n\n  this.loadEnhancedEcommerce(track);\n  window.ga('ec:addPromo', {\n    id: track.id(),\n    name: track.name(),\n    creative: props.creative,\n    position: props.position\n  });\n  this.pushEnhancedEcommerce(track);\n};\n\n/**\n * Clicked promotion - Enhanced Ecommerce\n *\n * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-promo-clicks\n *\n * @api private\n * @param {Track} track\n */\n\nGA.prototype.clickedPromotionEnhanced = function(track) {\n  var props = track.properties();\n\n  this.loadEnhancedEcommerce(track);\n  window.ga('ec:addPromo', {\n    id: track.id(),\n    name: track.name(),\n    creative: props.creative,\n    position: props.position\n  });\n  window.ga('ec:setAction', 'promo_click', {});\n  this.pushEnhancedEcommerce(track);\n};\n\n/**\n * Enhanced ecommerce track product.\n *\n * Simple helper so that we don't repeat `ec:addProduct` everywhere.\n *\n * @api private\n * @param {Track} track\n */\n\nfunction enhancedEcommerceTrackProduct(track) {\n  var props = track.properties();\n\n  window.ga('ec:addProduct', {\n    id: track.id() || track.sku(),\n    name: track.name(),\n    category: track.category(),\n    quantity: track.quantity(),\n    price: track.price(),\n    brand: props.brand,\n    variant: props.variant,\n    currency: track.currency()\n  });\n}\n\n/**\n * Set `action` on `track` with `data`.\n *\n * @api private\n * @param {Track} track\n * @param {String} action\n * @param {Object} data\n */\n\nfunction enhancedEcommerceProductAction(track, action, data) {\n  enhancedEcommerceTrackProduct(track);\n  window.ga('ec:setAction', action, data || {});\n}\n\n/**\n * Extracts checkout options.\n *\n * @api private\n * @param {Object} props\n * @return {string|null}\n */\n\nfunction extractCheckoutOptions(props) {\n  var options = [\n    props.paymentMethod,\n    props.shippingMethod\n  ];\n\n  // Remove all nulls, empty strings, zeroes, and join with commas.\n  var valid = select(options, function(e) {return e; });\n  return valid.length > 0 ? valid.join(', ') : null;\n}\n\n/**\n * Creates a track out of product properties.\n *\n * @api private\n * @param {Track} track\n * @param {Object} properties\n * @return {Track}\n */\n\nfunction createProductTrack(track, properties) {\n  properties.currency = properties.currency || track.currency();\n  return new Track({ properties: properties });\n}\n\n}, {\"facade\":9,\"defaults\":192,\"obj-case\":42,\"each\":4,\"analytics.js-integration\":166,\"is\":18,\"object\":20,\"global-queue\":196,\"select\":204,\"use-https\":168}],\n204: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar toFunction = require('to-function');\n\n/**\n * Filter the given `arr` with callback `fn(val, i)`,\n * when a truthy value is return then `val` is included\n * in the array returned.\n *\n * @param {Array} arr\n * @param {Function} fn\n * @return {Array}\n * @api public\n */\n\nmodule.exports = function(arr, fn){\n  var ret = [];\n  fn = toFunction(fn);\n  for (var i = 0; i < arr.length; ++i) {\n    if (fn(arr[i], i)) {\n      ret.push(arr[i]);\n    }\n  }\n  return ret;\n};\n\n}, {\"to-function\":74}],\n113: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('dataLayer', { wrap: false });\n\n/**\n * Expose `GTM`.\n */\n\nvar GTM = module.exports = integration('Google Tag Manager')\n  .assumesPageview()\n  .global('dataLayer')\n  .global('google_tag_manager')\n  .option('containerId', '')\n  .option('trackNamedPages', true)\n  .option('trackCategorizedPages', true)\n  .tag('<script src=\"//www.googletagmanager.com/gtm.js?id={{ containerId }}&l=dataLayer\">');\n\n/**\n * Initialize.\n *\n * https://developers.google.com/tag-manager\n *\n * @api public\n */\n\nGTM.prototype.initialize = function() {\n  push({ 'gtm.start': Number(new Date()), event: 'gtm.js' });\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nGTM.prototype.loaded = function() {\n  return !!(window.dataLayer && Array.prototype.push !== window.dataLayer.push);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nGTM.prototype.page = function(page) {\n  var category = page.category();\n  var name = page.fullName();\n  var opts = this.options;\n\n  // all\n  if (opts.trackAllPages) {\n    this.track(page.track());\n  }\n\n  // categorized\n  if (category && opts.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n\n  // named\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n};\n\n/**\n * Track.\n *\n * https://developers.google.com/tag-manager/devguide#events\n *\n * @api public\n * @param {Track} track\n */\n\nGTM.prototype.track = function(track) {\n  var props = track.properties();\n  props.event = track.event();\n  push(props);\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196}],\n114: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Identify = require('facade').Identify;\nvar Track = require('facade').Track;\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar omit = require('omit');\nvar pick = require('pick');\n\n/**\n * Expose `GoSquared` integration.\n */\n\nvar GoSquared = module.exports = integration('GoSquared')\n  .assumesPageview()\n  .global('_gs')\n  .option('anonymizeIP', false)\n  .option('apiSecret', '')\n  .option('cookieDomain', null)\n  .option('trackHash', false)\n  .option('trackLocal', false)\n  .option('trackParams', true)\n  .option('useCookies', true)\n  .tag('<script src=\"//d1l6p2sc9645hc.cloudfront.net/tracker.js\">');\n\n/**\n * Initialize.\n *\n * https://www.gosquared.com/developer/tracker\n * Options: https://www.gosquared.com/developer/tracker/configuration\n *\n * @api public\n */\n\nGoSquared.prototype.initialize = function() {\n  var self = this;\n  var options = this.options;\n  var user = this.analytics.user();\n  push(options.apiSecret);\n\n  each(options, function(name, value) {\n    if (name === 'apiSecret') return;\n    if (value == null) return;\n    push('set', name, value);\n  });\n\n  self.identify(new Identify({\n    traits: user.traits(),\n    userId: user.id()\n  }));\n\n  self.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nGoSquared.prototype.loaded = function() {\n  // If the tracker version is set, the library has loaded\n  return !!(window._gs && window._gs.v);\n};\n\n/**\n * Page.\n *\n * https://www.gosquared.com/docs/tracking/api/#pageviews\n *\n * @param {Page} page\n */\n\nGoSquared.prototype.page = function(page) {\n  var props = page.properties();\n  var name = page.fullName();\n  push('track', props.path, name || props.title);\n};\n\n/**\n * Identify.\n *\n * https://www.gosquared.com/docs/tracking/identify\n *\n * @param {Identify} identify\n */\n\nGoSquared.prototype.identify = function(identify) {\n  var traits = identify.traits({\n    createdAt: 'created_at',\n    firstName: 'first_name',\n    lastName: 'last_name',\n    title: 'company_position',\n    industry: 'company_industry'\n  });\n\n  // https://www.gosquared.com/docs/tracking/api/#properties\n  var specialKeys = [\n    'id',\n    'email',\n    'name',\n    'first_name',\n    'last_name',\n    'username',\n    'description',\n    'avatar',\n    'phone',\n    'created_at',\n    'company_name',\n    'company_size',\n    'company_position',\n    'company_industry'\n  ];\n\n  // Segment allows traits to all be in a flat object\n  // GoSquared requires all custom properties to be in a `custom` object,\n\n  // select all special keys\n  var props = pick.apply(null, [traits].concat(specialKeys));\n  props.custom = omit(specialKeys, traits);\n\n  var id = identify.userId();\n\n  if (id) {\n    push('identify', id, props);\n  } else {\n    push('properties', props);\n  }\n};\n\n/**\n * Track.\n *\n * https://www.gosquared.com/docs/tracking/events\n *\n * @param {Track} track\n */\n\nGoSquared.prototype.track = function(track) {\n  push('event', track.event(), track.properties());\n};\n\n/**\n * Checked out.\n *\n * https://www.gosquared.com/docs/tracking/ecommerce\n *\n * @api private\n * @param {Track} track\n */\n\nGoSquared.prototype.completedOrder = function(track) {\n  var products = track.products();\n  var items = [];\n\n  each(products, function(product) {\n    var track = new Track({ properties: product });\n    items.push({\n      category: track.category(),\n      quantity: track.quantity(),\n      price: track.price(),\n      name: track.name()\n    });\n  });\n\n  push('transaction', track.orderId(), {\n    revenue: track.total(),\n    track: true\n  }, items);\n};\n\n/**\n * Push to `_gs.q`.\n *\n * @api private\n * @param {...*} args\n */\n\nfunction push() {\n  window._gs = window._gs || function() {\n    window._gs.q.push(arguments);\n  };\n  window._gs.q = window._gs.q || [];\n  window._gs.apply(null, arguments);\n}\n\n}, {\"facade\":9,\"each\":4,\"analytics.js-integration\":166,\"omit\":205,\"pick\":206}],\n205: [function(require, module, exports) {\n/**\n * Expose `omit`.\n */\n\nmodule.exports = omit;\n\n/**\n * Return a copy of the object without the specified keys.\n *\n * @param {Array} keys\n * @param {Object} object\n * @return {Object}\n */\n\nfunction omit(keys, object){\n  var ret = {};\n\n  for (var item in object) {\n    ret[item] = object[item];\n  }\n\n  for (var i = 0; i < keys.length; i++) {\n    delete ret[keys[i]];\n  }\n  return ret;\n}\n}, {}],\n206: [function(require, module, exports) {\n\n/**\n * Expose `pick`.\n */\n\nmodule.exports = pick;\n\n/**\n * Pick keys from an `obj`.\n *\n * @param {Object} obj\n * @param {Strings} keys...\n * @return {Object}\n */\n\nfunction pick(obj){\n  var keys = [].slice.call(arguments, 1);\n  var ret = {};\n\n  for (var i = 0, key; key = keys[i]; i++) {\n    if (key in obj) ret[key] = obj[key];\n  }\n\n  return ret;\n}\n}, {}],\n115: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar each = require('each');\n\n/**\n * Expose `Heap` integration.\n */\n\nvar Heap = module.exports = integration('Heap')\n  .global('heap')\n  .option('appId', '')\n  .tag('<script src=\"//cdn.heapanalytics.com/js/heap-{{ appId }}.js\">');\n\n/**\n * Initialize.\n *\n * https://heapanalytics.com/docs/installation#web\n *\n * @api public\n */\n\nHeap.prototype.initialize = function() {\n  window.heap = window.heap || [];\n  window.heap.load = function(appid, config) {\n    window.heap.appid = appid;\n    window.heap.config = config;\n\n    var methodFactory = function(type) {\n      return function() {\n        window.heap.push([type].concat(Array.prototype.slice.call(arguments, 0)));\n      };\n    };\n\n    var heapMethods = ['clearEventProperties', 'identify', 'setEventProperties', 'track', 'unsetEventProperty'];\n    each(heapMethods, function(method) {\n      window.heap[method] = methodFactory(method);\n    });\n  };\n\n  window.heap.load(this.options.appId);\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nHeap.prototype.loaded = function() {\n  return !!(window.heap && window.heap.appid);\n};\n\n/**\n * Identify.\n *\n * https://heapanalytics.com/docs#identify\n *\n * @api public\n * @param {Identify} identify\n */\n\nHeap.prototype.identify = function(identify) {\n  var traits = identify.traits({ email: '_email' });\n  var id = identify.userId();\n  if (id) traits.handle = id;\n  window.heap.identify(traits);\n};\n\n/**\n * Track.\n *\n * https://heapanalytics.com/docs#track\n *\n * @api public\n * @param {Track} track\n */\n\nHeap.prototype.track = function(track) {\n  window.heap.track(track.event(), track.properties());\n};\n\n}, {\"analytics.js-integration\":166,\"each\":4}],\n116: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `hellobar.com` integration.\n */\n\nvar Hellobar = module.exports = integration('Hello Bar')\n  .assumesPageview()\n  .global('_hbq')\n  .option('apiKey', '')\n  .tag('<script src=\"//s3.amazonaws.com/scripts.hellobar.com/{{ apiKey }}.js\">');\n\n/**\n * Initialize.\n *\n * https://s3.amazonaws.com/scripts.hellobar.com/bb900665a3090a79ee1db98c3af21ea174bbc09f.js\n *\n * @api public\n */\n\nHellobar.prototype.initialize = function() {\n  window._hbq = window._hbq || [];\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nHellobar.prototype.loaded = function() {\n  return !!(window._hbq && window._hbq.push !== Array.prototype.push);\n};\n\n}, {\"analytics.js-integration\":166}],\n117: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar is = require('is');\n\n/**\n * Expose `HitTail` integration.\n */\n\nvar HitTail = module.exports = integration('HitTail')\n  .assumesPageview()\n  .global('htk')\n  .option('siteId', '')\n  .tag('<script src=\"//{{ siteId }}.hittail.com/mlt.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nHitTail.prototype.initialize = function() {\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nHitTail.prototype.loaded = function() {\n  return is.fn(window.htk);\n};\n\n}, {\"analytics.js-integration\":166,\"is\":18}],\n118: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar convert = require('convert-dates');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_hsq');\n\n/**\n * Expose `HubSpot` integration.\n */\n\nvar HubSpot = module.exports = integration('HubSpot')\n  .assumesPageview()\n  .global('_hsq')\n  .option('portalId', null)\n  .tag('<script id=\"hs-analytics\" src=\"https://js.hs-analytics.net/analytics/{{ cacheBuster }}/{{ portalId }}.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nHubSpot.prototype.initialize = function() {\n  window._hsq = [];\n  var cacheBuster = Math.ceil(new Date() / 300000) * 300000;\n  this.load({ cacheBuster: cacheBuster }, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nHubSpot.prototype.loaded = function() {\n  return !!(window._hsq && window._hsq.push !== Array.prototype.push);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nHubSpot.prototype.page = function() {\n  push('trackPageView');\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nHubSpot.prototype.identify = function(identify) {\n  if (!identify.email()) return;\n  var traits = identify.traits();\n  traits = convertDates(traits);\n  push('identify', traits);\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nHubSpot.prototype.track = function(track) {\n  var props = track.properties();\n  props = convertDates(props);\n  push('trackEvent', track.event(), props);\n};\n\n/**\n * Convert all the dates in the HubSpot properties to millisecond times\n *\n * @api private\n * @param {Object} properties\n */\n\nfunction convertDates(properties) {\n  return convert(properties, function(date) { return date.getTime(); });\n}\n\n}, {\"convert-dates\":200,\"analytics.js-integration\":166,\"global-queue\":196}],\n119: [function(require, module, exports) {\n\r\n/**\r\n * Module dependencies.\r\n */\r\n\r\nvar integration = require('analytics.js-integration');\r\n\r\n/**\r\n * Expose `Improvely` integration.\r\n */\r\n\r\nvar Improvely = module.exports = integration('Improvely')\r\n  .assumesPageview()\r\n  .global('_improvely')\r\n  .global('improvely')\r\n  .option('domain', '')\r\n  .option('projectId', null)\r\n  .tag('<script src=\"//{{ domain }}.iljmp.com/improvely.js\">');\r\n\r\n/**\r\n * Initialize.\r\n *\r\n * http://www.improvely.com/docs/landing-page-code\r\n *\r\n * @api public\r\n */\r\n\r\nImprovely.prototype.initialize = function() {\r\n  // Shim out the Improvely library/globals.\r\n  window._improvely = [];\r\n  /* eslint-disable */\r\n  window.improvely = { init: function(e, t){ window._improvely.push([\"init\", e, t]); }, goal: function(e){ window._improvely.push([\"goal\", e]); }, label: function(e){ window._improvely.push([\"label\", e]); }};\r\n  /* eslint-enable */\r\n\r\n  var domain = this.options.domain;\r\n  var id = this.options.projectId;\r\n  window.improvely.init(domain, id);\r\n  this.load(this.ready);\r\n};\r\n\r\n/**\r\n * Loaded?\r\n *\r\n * @api private\r\n * @return {boolean}\r\n */\r\n\r\nImprovely.prototype.loaded = function() {\r\n  return !!(window.improvely && window.improvely.identify);\r\n};\r\n\r\n/**\r\n * Identify.\r\n *\r\n * http://www.improvely.com/docs/labeling-visitors\r\n *\r\n * @api public\r\n * @param {Identify} identify\r\n */\r\n\r\nImprovely.prototype.identify = function(identify) {\r\n  var id = identify.userId();\r\n  if (id) window.improvely.label(id);\r\n};\r\n\r\n/**\r\n * Track.\r\n *\r\n * http://www.improvely.com/docs/conversion-code\r\n *\r\n * @api public\r\n * @param {Track} track\r\n */\r\n\r\nImprovely.prototype.track = function(track) {\r\n  var props = track.properties({ revenue: 'amount' });\r\n  props.type = track.event();\r\n  window.improvely.goal(props);\r\n};\r\n\n}, {\"analytics.js-integration\":166}],\n120: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_iva');\n\n/**\n * Expose `InsideVault` integration.\n */\n\nvar InsideVault = module.exports = integration('InsideVault')\n  .global('_iva')\n  .option('clientId', '')\n  .option('domain', '')\n  .tag('<script src=\"//analytics.staticiv.com/iva.js\">')\n  .mapping('events');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nInsideVault.prototype.initialize = function() {\n  var domain = this.options.domain;\n  window._iva = window._iva || [];\n  push('setClientId', this.options.clientId);\n  var userId = this.analytics.user().anonymousId();\n  if (userId) push('setUserId', userId);\n  if (domain) push('setDomain', domain);\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nInsideVault.prototype.loaded = function() {\n  return !!(window._iva && window._iva.push !== Array.prototype.push);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nInsideVault.prototype.identify = function(identify) {\n  push('setUserId', identify.anonymousId());\n};\n\n/**\n * Page.\n *\n * @param {Page} page\n */\n\nInsideVault.prototype.page = function() {\n  // they want every landing page to send a \"click\" event.\n  push('trackEvent', 'click');\n};\n\n/**\n * Track.\n *\n * Tracks everything except 'sale' events.\n *\n * @param {Track} track\n */\n\nInsideVault.prototype.track = function(track) {\n  var user = this.analytics.user();\n  var events = this.events(track.event());\n  var value = track.revenue() || track.value() || 0;\n  var eventId = track.orderId() || user.anonymousId() || '';\n  each(events, function(event) {\n    // 'sale' is a special event that will be routed to a table that is deprecated on InsideVault's end.\n    // They don't want a generic 'sale' event to go to their deprecated table.\n    if (event !== 'sale') {\n      push('trackEvent', event, value, eventId);\n    }\n  });\n};\n\n}, {\"each\":4,\"analytics.js-integration\":166,\"global-queue\":196}],\n121: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('__insp');\n\n/**\n * Expose `Inspectlet` integration.\n */\n\nvar Inspectlet = module.exports = integration('Inspectlet')\n  .assumesPageview()\n  .global('__insp')\n  .global('__insp_')\n  .option('wid', '')\n  .tag('<script src=\"//cdn.inspectlet.com/inspectlet.js\">');\n\n/**\n * Initialize.\n *\n * https://www.inspectlet.com/dashboard/embedcode/1492461759/initial\n *\n * @api public\n */\n\nInspectlet.prototype.initialize = function() {\n  push('wid', this.options.wid);\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nInspectlet.prototype.loaded = function() {\n  return !!(window.__insp_ && window.__insp);\n};\n\n/**\n * Identify.\n *\n * http://www.inspectlet.com/docs#tagging\n *\n * @api public\n * @param {Identify} identify\n */\n\nInspectlet.prototype.identify = function(identify) {\n  var traits = identify.traits({ id: 'userid' });\n  var email = identify.email();\n  if (email) push('identify', email);\n  push('tagSession', traits);\n};\n\n/**\n * Track.\n *\n * http://www.inspectlet.com/docs/tags\n *\n * @api public\n * @param {Track} track\n */\n\nInspectlet.prototype.track = function(track) {\n  push('tagSession', track.event());\n};\n\n/**\n * Page.\n *\n * http://www.inspectlet.com/docs/tags\n *\n * @api public\n * @param {Track} track\n */\n\nInspectlet.prototype.page = function() {\n  push('virtualPage');\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196}],\n122: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar alias = require('alias');\nvar convertDates = require('convert-dates');\nvar defaults = require('defaults');\nvar del = require('obj-case').del;\nvar integration = require('analytics.js-integration');\nvar is = require('is');\n\n/**\n * Expose `Intercom` integration.\n */\n\nvar Intercom = module.exports = integration('Intercom')\n  .global('Intercom')\n  .option('activator', '#IntercomDefaultWidget')\n  .option('appId', '')\n  .tag('<script src=\"https://widget.intercom.io/widget/{{ appId }}\">');\n\n/**\n * Initialize.\n *\n * http://docs.intercom.io/\n * http://docs.intercom.io/#IntercomJS\n *\n * @api public\n */\n\nIntercom.prototype.initialize = function() {\n  // Shim out the Intercom library.\n  window.Intercom = function() {\n    window.Intercom.q.push(arguments);\n  };\n  window.Intercom.q = [];\n\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nIntercom.prototype.loaded = function() {\n  return is.fn(window.Intercom);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nIntercom.prototype.page = function() {\n  this.bootOrUpdate();\n};\n\n/**\n * Identify.\n *\n * http://docs.intercom.io/#IntercomJS\n *\n * @api public\n * @param {Identify} identify\n */\n\nIntercom.prototype.identify = function(identify) {\n  var traits = identify.traits({ userId: 'user_id' });\n  var opts = identify.options(this.name);\n  var companyCreated = identify.companyCreated();\n  var created = identify.created();\n  var name = identify.name();\n  var id = identify.userId();\n  var group = this.analytics.group();\n\n  if (!id && !traits.email) {\n    return;\n  }\n\n  // intercom requires `company` to be an object. default it with group traits\n  // so that we guarantee an `id` is there, since they require it\n  if (traits.company !== null && !is.object(traits.company)) {\n    delete traits.company;\n  }\n\n  if (traits.company) {\n    defaults(traits.company, group.traits());\n  }\n\n  // name\n  if (name) traits.name = name;\n\n  // handle dates\n  if (created) {\n    del(traits, 'created');\n    del(traits, 'createdAt');\n    traits.created_at = created;\n  }\n\n  if (companyCreated) {\n    del(traits.company, 'created');\n    del(traits.company, 'createdAt');\n    traits.company.created_at = companyCreated;\n  }\n\n  // convert dates\n  traits = convertDates(traits, formatDate);\n\n  // handle options\n  if (opts.increments) traits.increments = opts.increments;\n  if (opts.userHash) traits.user_hash = opts.userHash;\n  if (opts.user_hash) traits.user_hash = opts.user_hash;\n\n  this.bootOrUpdate(traits);\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Group} group\n */\n\nIntercom.prototype.group = function(group) {\n  var props = group.properties();\n  props = alias(props, { createdAt: 'created' });\n  props = alias(props, { created: 'created_at' });\n  var id = group.groupId();\n  if (id) props.id = id;\n  api('update', { company: props });\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nIntercom.prototype.track = function(track) {\n  api('trackEvent', track.event(), track.properties());\n};\n\n/**\n * Boots or updates, as appropriate.\n *\n * @api private\n * @param {Object} options\n */\n\nIntercom.prototype.bootOrUpdate = function(options) {\n  options = options || {};\n  var method = this.booted === true ? 'update' : 'boot';\n  var activator = this.options.activator;\n  options.app_id = this.options.appId;\n\n  // Intercom, will force the widget to appear if the selector is\n  // #IntercomDefaultWidget so no need to check inbox, just need to check that\n  // the selector isn't #IntercomDefaultWidget.\n  if (activator !== '#IntercomDefaultWidget') {\n    options.widget = { activator: activator };\n  }\n\n  api(method, options);\n  this.booted = true;\n};\n\n/**\n * Format a date to Intercom's liking.\n *\n * @api private\n * @param {Date} date\n * @return {number}\n */\n\nfunction formatDate(date) {\n  return Math.floor(date / 1000);\n}\n\n/**\n * Push a call onto the Intercom queue.\n *\n * @api private\n */\n\nfunction api() {\n  window.Intercom.apply(window.Intercom, arguments);\n}\n\n}, {\"alias\":199,\"convert-dates\":200,\"defaults\":192,\"obj-case\":42,\"analytics.js-integration\":166,\"is\":18}],\n123: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar clone = require('clone');\n\n/**\n * Expose `Keen IO` integration.\n */\n\nvar Keen = module.exports = integration('Keen IO')\n  .global('Keen')\n  .option('ipAddon', false)\n  .option('projectId', '')\n  .option('readKey', '')\n  .option('referrerAddon', false)\n  .option('trackAllPages', false)\n  .option('trackCategorizedPages', true)\n  .option('trackNamedPages', true)\n  .option('uaAddon', false)\n  .option('urlAddon', false)\n  .option('writeKey', '')\n  .tag('<script src=\"//d26b395fwzu5fz.cloudfront.net/3.0.7/{{ lib }}.min.js\">');\n\n/**\n * Initialize.\n *\n * https://keen.io/docs/\n *\n * @api public\n */\n\nKeen.prototype.initialize = function() {\n  /**\n   * Shim out the Keen client library.\n   *\n   * To update the library, grab the most up-to-date embed code from Keen's\n   * JS library readme (https://github.com/keen/keen-js) and remove any of the\n   * script loading/appending business. Next, update the script tag above with\n   * the new client library URL.\n   */\n  /* eslint-disable */\n  !(function(a,b){if(void 0===b[a]){b[\"_\"+a]={},b[a]=function(c){b[\"_\"+a].clients=b[\"_\"+a].clients||{},b[\"_\"+a].clients[c.projectId]=this,this._config=c},b[a].ready=function(c){b[\"_\"+a].ready=b[\"_\"+a].ready||[],b[\"_\"+a].ready.push(c)};for(var c=[\"addEvent\",\"setGlobalProperties\",\"trackExternalLink\",\"on\"],d=0;d<c.length;d++){var e=c[d],f=function(a){return function(){return this[\"_\"+a]=this[\"_\"+a]||[],this[\"_\"+a].push(arguments),this}};b[a].prototype[e]=f(e)}}})(\"Keen\",window);\n  /* eslint-enable */\n\n  var options = this.options;\n  this.client = new window.Keen({\n    projectId: options.projectId,\n    writeKey: options.writeKey,\n    readKey: options.readKey\n  });\n\n  // if you have a read-key, then load the full keen library\n  var lib = this.options.readKey ? 'keen' : 'keen-tracker';\n  this.load({ lib: lib }, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nKeen.prototype.loaded = function() {\n  return !!(window.Keen && window.Keen.prototype.configure);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nKeen.prototype.page = function(page) {\n  var category = page.category();\n  var name = page.fullName();\n  var opts = this.options;\n\n  // all pages\n  if (opts.trackAllPages) {\n    this.track(page.track());\n  }\n\n  // named pages\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n\n  // categorized pages\n  if (category && opts.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n};\n\n/**\n * Identify.\n *\n * TODO: migrate from old `userId` to simpler `id`\n * https://keen.io/docs/data-collection/data-enrichment/#add-ons\n *\n * Set up the Keen addons object. These must be specifically\n * enabled by the settings in order to include the plugins, or else\n * Keen will reject the request.\n *\n * @api public\n * @param {Identify} identify\n */\n\nKeen.prototype.identify = function(identify) {\n  var traits = identify.traits();\n  var id = identify.userId();\n  var user = {};\n  if (id) user.userId = id;\n  if (traits) user.traits = traits;\n  var props = { user: user };\n  this.addons(props, identify);\n  this.client.setGlobalProperties(function() {\n    return clone(props);\n  });\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nKeen.prototype.track = function(track) {\n  var props = track.properties();\n  this.addons(props, track);\n  this.client.addEvent(track.event(), props);\n};\n\n/**\n * Attach addons to `obj` with `msg`.\n *\n * @api private\n * @param {Object} obj\n * @param {Facade} msg\n */\n\nKeen.prototype.addons = function(obj, msg) {\n  var options = this.options;\n  var addons = [];\n\n  if (options.ipAddon) {\n    addons.push({\n      name: 'keen:ip_to_geo',\n      input: { ip: 'ip_address' },\n      output: 'ip_geo_info'\n    });\n    obj.ip_address = '${keen.ip}';\n  }\n\n  if (options.uaAddon) {\n    addons.push({\n      name: 'keen:ua_parser',\n      input: { ua_string: 'user_agent' },\n      output: 'parsed_user_agent'\n    });\n    obj.user_agent = '${keen.user_agent}';\n  }\n\n  if (options.urlAddon) {\n    addons.push({\n      name: 'keen:url_parser',\n      input: { url: 'page_url' },\n      output: 'parsed_page_url'\n    });\n    obj.page_url = document.location.href;\n  }\n\n  if (options.referrerAddon) {\n    addons.push({\n      name: 'keen:referrer_parser',\n      input: {\n        referrer_url: 'referrer_url',\n        page_url: 'page_url'\n      },\n      output: 'referrer_info'\n    });\n    obj.referrer_url = document.referrer;\n    obj.page_url = document.location.href;\n  }\n\n  obj.keen = {\n    timestamp: msg.timestamp(),\n    addons: addons\n  };\n};\n\n}, {\"analytics.js-integration\":166,\"clone\":13}],\n124: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar includes = require('includes');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\n\n/**\n * Expose `Kenshoo` integration.\n */\n\nvar Kenshoo = module.exports = integration('Kenshoo')\n  .global('k_trackevent')\n  .option('cid', '')\n  .option('events', [])\n  .option('subdomain', '')\n  .tag('<script src=\"//{{ subdomain }}.xg4ken.com/media/getpx.php?cid={{ cid }}\">');\n\n/**\n * Initialize.\n *\n * See https://gist.github.com/justinboyle/7875832\n *\n * @api public\n */\n\nKenshoo.prototype.initialize = function() {\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nKenshoo.prototype.loaded = function() {\n  return is.fn(window.k_trackevent);\n};\n\n/**\n * Track.\n *\n * FIXME: Only tracks events if they are listed in the events array option.\n * We've asked for docs a few times but no go :/\n *\n * https://github.com/jorgegorka/the_tracker/blob/master/lib/the_tracker/trackers/kenshoo.rb\n *\n * @api public\n * @param {Track} event\n */\n\nKenshoo.prototype.track = function(track) {\n  var events = this.options.events;\n  var event = track.event();\n  var revenue = track.revenue() || 0;\n  if (!includes(event, events)) return;\n\n  var params = [\n    'id=' + this.options.cid,\n    'type=conv',\n    'val=' + revenue,\n    'orderId=' + track.orderId(),\n    'promoCode=' + track.coupon(),\n    'valueCurrency=' + track.currency(),\n\n    // Live tracking fields.\n    // FIXME: Ignored for now (until we get documentation).\n    'GCID=',\n    'kw=',\n    'product='\n  ];\n\n  window.k_trackevent(params, this.options.subdomain);\n};\n\n}, {\"includes\":70,\"analytics.js-integration\":166,\"is\":18}],\n125: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar push = require('global-queue')('_kmq');\n\n/**\n * Expose `KISSmetrics` integration.\n */\n\nvar KISSmetrics = module.exports = integration('KISSmetrics')\n  .assumesPageview()\n  .global('KM')\n  .global('_kmil')\n  .global('_kmq')\n  .option('apiKey', '')\n  .option('prefixProperties', true)\n  .option('trackCategorizedPages', true)\n  .option('trackNamedPages', true)\n  .tag('library', '<script src=\"//scripts.kissmetrics.com/{{ apiKey }}.2.js\">');\n\n/**\n * Check if browser is mobile, for kissmetrics.\n *\n * http://support.kissmetrics.com/how-tos/browser-detection.html#mobile-vs-non-mobile\n */\n\nexports.isMobile = navigator.userAgent.match(/Android/i)\n  || navigator.userAgent.match(/BlackBerry/i)\n  || navigator.userAgent.match(/IEMobile/i)\n  || navigator.userAgent.match(/Opera Mini/i)\n  || navigator.userAgent.match(/iPad/i)\n  || navigator.userAgent.match(/iPhone|iPod/i);\n\n/**\n * Initialize.\n *\n * http://support.kissmetrics.com/apis/javascript\n *\n * @param {Object} page\n */\n\nKISSmetrics.prototype.initialize = function(page) {\n  var self = this;\n  window._kmq = [];\n  if (exports.isMobile) push('set', { 'Mobile Session': 'Yes' });\n\n  this.load('library', function() {\n    self.trackPage(page);\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @return {Boolean}\n */\n\nKISSmetrics.prototype.loaded = function() {\n  return is.object(window.KM);\n};\n\n/**\n * Page.\n *\n * @param {Page} page\n */\n\nKISSmetrics.prototype.page = function(page) {\n  if (!window.KM_SKIP_PAGE_VIEW) window.KM.pageView();\n  this.trackPage(page);\n};\n\n/**\n * Track page.\n *\n * @param {Page} page\n */\n\nKISSmetrics.prototype.trackPage = function(page) {\n  var category = page.category();\n  var name = page.fullName();\n  var opts = this.options;\n\n  // named pages\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n\n  // categorized pages\n  if (category && opts.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n};\n\n/**\n * Identify.\n *\n * @param {Identify} identify\n */\n\nKISSmetrics.prototype.identify = function(identify) {\n  var traits = identify.traits();\n  var id = identify.userId();\n  if (id) push('identify', id);\n  if (traits) push('set', traits);\n};\n\n/**\n * Track.\n *\n * @param {Track} track\n */\n\nKISSmetrics.prototype.track = function(track) {\n  var mapping = { revenue: 'Billing Amount' };\n  var event = track.event();\n  var properties = track.properties(mapping);\n  if (this.options.prefixProperties) properties = prefix(event, properties);\n  push('record', event, properties);\n};\n\n/**\n * Alias.\n *\n * @param {Alias} to\n */\n\nKISSmetrics.prototype.alias = function(alias) {\n  push('alias', alias.to(), alias.from());\n};\n\n/**\n * Completed order.\n *\n * @param {Track} track\n * @api private\n */\n\nKISSmetrics.prototype.completedOrder = function(track) {\n  var products = track.products();\n  var event = track.event();\n\n  // transaction\n  push('record', event, prefix(event, track.properties()));\n\n  // items\n  window._kmq.push(function() {\n    var km = window.KM;\n    each(products, function(product, i) {\n      var item = prefix(event, product);\n      item._t = km.ts() + i;\n      item._d = 1;\n      km.set(item);\n    });\n  });\n};\n\n/**\n * Prefix properties with the event name.\n *\n * @param {String} event\n * @param {Object} properties\n * @return {Object} prefixed\n * @api private\n */\n\nfunction prefix(event, properties) {\n  var prefixed = {};\n  each(properties, function(key, val) {\n    if (key === 'Billing Amount') {\n      prefixed[key] = val;\n    } else {\n      prefixed[event + ' - ' + key] = val;\n    }\n  });\n  return prefixed;\n}\n\n}, {\"each\":4,\"analytics.js-integration\":166,\"is\":18,\"global-queue\":196}],\n126: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_learnq');\nvar tick = require('next-tick');\n\n/**\n * Trait aliases.\n */\n\nvar traitAliases = {\n  id: '$id',\n  email: '$email',\n  firstName: '$first_name',\n  lastName: '$last_name',\n  phone: '$phone_number',\n  title: '$title'\n};\n\n/**\n * Expose `Klaviyo` integration.\n */\n\nvar Klaviyo = module.exports = integration('Klaviyo')\n  .assumesPageview()\n  .global('_learnq')\n  .option('apiKey', '')\n  .tag('<script src=\"//a.klaviyo.com/media/js/learnmarklet.js\">');\n\n/**\n * Initialize.\n *\n * https://www.klaviyo.com/docs/getting-started\n *\n * @api public\n */\n\nKlaviyo.prototype.initialize = function() {\n  var self = this;\n  push('account', this.options.apiKey);\n  this.load(function() {\n    tick(self.ready);\n  });\n};\n\n/**\n * Loaded?\n *\n * @api public\n * @return {Boolean}\n */\n\nKlaviyo.prototype.loaded = function() {\n  return !!(window._learnq && window._learnq.push !== Array.prototype.push);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nKlaviyo.prototype.identify = function(identify) {\n  var traits = identify.traits(traitAliases);\n  if (!traits.$id && !traits.$email) return;\n  push('identify', traits);\n};\n\n/**\n * Group.\n *\n * @param {Group} group\n */\n\nKlaviyo.prototype.group = function(group) {\n  var props = group.properties();\n  if (!props.name) return;\n  push('identify', { $organization: props.name });\n};\n\n/**\n * Track.\n *\n * @param {Track} track\n */\n\nKlaviyo.prototype.track = function(track) {\n  push('track', track.event(), track.properties({\n    revenue: '$value'\n  }));\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196,\"next-tick\":57}],\n127: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Identify = require('facade').Identify;\nvar clone = require('clone');\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar tick = require('next-tick');\nvar when = require('when');\n\n/**\n * Expose `LiveChat` integration.\n */\n\nvar LiveChat = module.exports = integration('LiveChat')\n  .assumesPageview()\n  .global('LC_API')\n  .global('LC_Invite')\n  .global('__lc')\n  .global('__lc_inited')\n  .option('group', 0)\n  .option('license', '')\n  .option('listen', false)\n  .tag('<script src=\"//cdn.livechatinc.com/tracking.js\">');\n\n/**\n * The context for this integration.\n */\n\nvar integrationContext = {\n  name: 'livechat',\n  version: '1.0.0'\n};\n\n/**\n * Initialize.\n *\n * http://www.livechatinc.com/api/javascript-api\n *\n * @api public\n */\n\nLiveChat.prototype.initialize = function() {\n  var self = this;\n  var user = this.analytics.user();\n  var identify = new Identify({\n    userId: user.id(),\n    traits: user.traits()\n  });\n\n  window.__lc = clone(this.options);\n  window.__lc.visitor = {\n    name: identify.name(),\n    email: identify.email()\n  };\n  // listen is not an option we need from clone\n  delete window.__lc.listen;\n\n  this.load(function() {\n    when(function() {\n      return self.loaded();\n    }, function() {\n      if (self.options.listen) self.attachListeners();\n      tick(self.ready);\n    });\n  });\n};\n\n/**\n * Loaded?\n *\n * @api public\n * @return {boolean}\n */\n\nLiveChat.prototype.loaded = function() {\n  return !!(window.LC_API && window.LC_Invite);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nLiveChat.prototype.identify = function(identify) {\n  var traits = identify.traits({ userId: 'User ID' });\n  window.LC_API.set_custom_variables(convert(traits));\n};\n\n/**\n * Listen for chat events.\n *\n * @api private\n */\n\nLiveChat.prototype.attachListeners = function() {\n  var self = this;\n  window.LC_API = window.LC_API || {};\n\n  window.LC_API.on_chat_started = function(data) {\n    self.analytics.track(\n      'Live Chat Conversation Started',\n      { agentName: data.agent_name },\n      { context: { integration: integrationContext }\n    });\n  };\n\n  window.LC_API.on_message = function(data) {\n    if (data.user_type === 'visitor') {\n      self.analytics.track(\n        'Live Chat Message Sent',\n        {},\n        { context: { integration: integrationContext }\n      });\n    } else {\n      self.analytics.track(\n        'Live Chat Message Received',\n        { agentName: data.agent_name, agentUsername: data.agent_login },\n        { context: { integration: integrationContext }\n      });\n    }\n  };\n\n  window.LC_API.on_chat_ended = function() {\n    self.analytics.track('Live Chat Conversation Ended');\n  };\n};\n\n/**\n * Convert a traits object into the format LiveChat requires.\n *\n * @param {Object} traits\n * @return {Array}\n */\n\nfunction convert(traits) {\n  var arr = [];\n  each(traits, function(key, value) {\n    arr.push({ name: key, value: value });\n  });\n  return arr;\n}\n\n}, {\"facade\":9,\"clone\":13,\"each\":4,\"analytics.js-integration\":166,\"next-tick\":57,\"when\":198}],\n128: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Identify = require('facade').Identify;\nvar integration = require('analytics.js-integration');\nvar useHttps = require('use-https');\n\n/**\n * Expose `LuckyOrange` integration.\n */\n\nvar LuckyOrange = module.exports = integration('Lucky Orange')\n  .assumesPageview()\n  .global('_loq')\n  .global('__wtw_watcher_added')\n  .global('__wtw_lucky_site_id')\n  .global('__wtw_lucky_is_segment_io')\n  .global('__wtw_custom_user_data')\n  .option('siteId', null)\n  .tag('http', '<script src=\"http://www.luckyorange.com/w.js?{{ cacheBuster }}\">')\n  .tag('https', '<script src=\"https://ssl.luckyorange.com/w.js?{{ cacheBuster }}\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nLuckyOrange.prototype.initialize = function() {\n  if (!window._loq) window._loq = [];\n  window.__wtw_lucky_site_id = this.options.siteId;\n\n  var user = this.analytics.user();\n  this.identify(new Identify({\n    traits: user.traits(),\n    userId: user.id()\n  }));\n\n  var cacheBuster = Math.floor(new Date().getTime() / 60000);\n  var tagName = useHttps() ? 'https' : 'http';\n  this.load(tagName, { cacheBuster: cacheBuster }, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nLuckyOrange.prototype.loaded = function() {\n  return !!window.__wtw_watcher_added;\n};\n\n/**\n * Identify.\n *\n * @param {Identify} identify\n */\n\nLuckyOrange.prototype.identify = function(identify) {\n  var traits = identify.traits();\n  var email = identify.email();\n  if (email) traits.email = email;\n  var name = identify.name();\n  if (name) traits.name = name;\n  window.__wtw_custom_user_data = traits;\n};\n\n}, {\"facade\":9,\"analytics.js-integration\":166,\"use-https\":168}],\n129: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar alias = require('alias');\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `Lytics` integration.\n */\n\nvar Lytics = module.exports = integration('Lytics')\n  .global('jstag')\n  .option('cid', '')\n  .option('cookie', 'seerid')\n  .option('delay', 2000)\n  .option('sessionTimeout', 1800)\n  .option('url', '//c.lytics.io')\n  .tag('<script src=\"//c.lytics.io/static/io.min.js\">');\n\n/**\n * Options aliases.\n */\n\nvar aliases = {\n  sessionTimeout: 'sessecs'\n};\n\n/**\n * Initialize.\n *\n * http://admin.lytics.io/doc#jstag\n *\n * @api public\n */\n\nLytics.prototype.initialize = function() {\n  var options = alias(this.options, aliases);\n  /* eslint-disable */\n  window.jstag = (function(){var t = { _q: [], _c: options, ts: (new Date()).getTime() }; t.send = function(){this._q.push(['ready', 'send', Array.prototype.slice.call(arguments)]); return this; }; return t; })();\n  /* eslint-enable */\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nLytics.prototype.loaded = function() {\n  return !!(window.jstag && window.jstag.bind);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nLytics.prototype.page = function(page) {\n  window.jstag.send(page.properties());\n};\n\n/**\n * Idenfity.\n *\n * @api public\n * @param {Identify} identify\n */\n\nLytics.prototype.identify = function(identify) {\n  var traits = identify.traits({ userId: '_uid' });\n  window.jstag.send(traits);\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nLytics.prototype.track = function(track) {\n  var props = track.properties();\n  props._e = track.event();\n  window.jstag.send(props);\n};\n\n}, {\"alias\":199,\"analytics.js-integration\":166}],\n130: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar alias = require('alias');\nvar dates = require('convert-dates');\nvar del = require('obj-case').del;\nvar each = require('each');\nvar includes = require('includes');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar iso = require('to-iso-string');\nvar some = require('some');\n\n/**\n * Expose `Mixpanel` integration.\n */\n\nvar Mixpanel = module.exports = integration('Mixpanel')\n  .global('mixpanel')\n  .option('increments', [])\n  .option('cookieName', '')\n  .option('crossSubdomainCookie', false)\n  .option('secureCookie', false)\n  .option('nameTag', true)\n  .option('pageview', false)\n  .option('people', false)\n  .option('token', '')\n  .option('trackAllPages', false)\n  .option('trackNamedPages', true)\n  .option('trackCategorizedPages', true)\n  .tag('<script src=\"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js\">');\n\n/**\n * Options aliases.\n */\n\nvar optionsAliases = {\n  cookieName: 'cookie_name',\n  crossSubdomainCookie: 'cross_subdomain_cookie',\n  secureCookie: 'secure_cookie'\n};\n\n/**\n * Initialize.\n *\n * https://mixpanel.com/help/reference/javascript#installing\n * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.init\n *\n * @api public\n */\n\nMixpanel.prototype.initialize = function() {\n  /* eslint-disable */\n  (function(c, a){window.mixpanel = a; var b, d, h, e; a._i = []; a.init = function(b, c, f){function d(a, b){var c = b.split('.'); 2 == c.length && (a = a[c[0]], b = c[1]); a[b] = function(){a.push([b].concat(Array.prototype.slice.call(arguments, 0))); }; } var g = a; 'undefined' !== typeof f ? g = a[f] = [] : f = 'mixpanel'; g.people = g.people || []; h = ['disable', 'track', 'track_pageview', 'track_links', 'track_forms', 'register', 'register_once', 'unregister', 'identify', 'alias', 'name_tag', 'set_config', 'people.set', 'people.increment', 'people.track_charge', 'people.append']; for (e = 0; e < h.length; e++) d(g, h[e]); a._i.push([b, c, f]); }; a.__SV = 1.2; })(document, window.mixpanel || []);\n  /* eslint-enable */\n  this.options.increments = lowercase(this.options.increments);\n  var options = alias(this.options, optionsAliases);\n  window.mixpanel.init(options.token, options);\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nMixpanel.prototype.loaded = function() {\n  return !!(window.mixpanel && window.mixpanel.config);\n};\n\n/**\n * Page.\n *\n * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.track_pageview\n *\n * @api public\n * @param {Page} page\n */\n\nMixpanel.prototype.page = function(page) {\n  var category = page.category();\n  var name = page.fullName();\n  var opts = this.options;\n\n  // all pages\n  if (opts.trackAllPages) {\n    this.track(page.track());\n  }\n\n  // categorized pages\n  if (category && opts.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n\n  // named pages\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n};\n\n/**\n * Trait aliases.\n */\n\nvar traitAliases = {\n  created: '$created',\n  email: '$email',\n  firstName: '$first_name',\n  lastName: '$last_name',\n  lastSeen: '$last_seen',\n  name: '$name',\n  username: '$username',\n  phone: '$phone'\n};\n\n/**\n * Identify.\n *\n * https://mixpanel.com/help/reference/javascript#super-properties\n * https://mixpanel.com/help/reference/javascript#user-identity\n * https://mixpanel.com/help/reference/javascript#storing-user-profiles\n *\n * @api public\n * @param {Identify} identify\n */\n\nMixpanel.prototype.identify = function(identify) {\n  var username = identify.username();\n  var email = identify.email();\n  var id = identify.userId();\n\n  // id\n  if (id) window.mixpanel.identify(id);\n\n  // name tag\n  var nametag = email || username || id;\n  if (nametag) window.mixpanel.name_tag(nametag);\n\n  // traits\n  var traits = identify.traits(traitAliases);\n  if (traits.$created) del(traits, 'createdAt');\n  window.mixpanel.register(dates(traits, iso));\n  if (this.options.people) window.mixpanel.people.set(traits);\n};\n\n/**\n * Track.\n *\n * https://mixpanel.com/help/reference/javascript#sending-events\n * https://mixpanel.com/help/reference/javascript#tracking-revenue\n *\n * @api public\n * @param {Track} track\n */\n\nMixpanel.prototype.track = function(track) {\n  var increments = this.options.increments;\n  var increment = track.event().toLowerCase();\n  var people = this.options.people;\n  var props = track.properties();\n  var revenue = track.revenue();\n\n  // delete mixpanel's reserved properties, so they don't conflict\n  delete props.distinct_id;\n  delete props.ip;\n  delete props.mp_name_tag;\n  delete props.mp_note;\n  delete props.token;\n\n  // convert arrays of objects to length, since mixpanel doesn't support object arrays\n  each(props, function(key, val) {\n    if (is.array(val) && some(val, is.object)) props[key] = val.length;\n  });\n\n  // increment properties in mixpanel people\n  if (people && includes(increment, increments)) {\n    window.mixpanel.people.increment(track.event());\n    window.mixpanel.people.set('Last ' + track.event(), new Date());\n  }\n\n  // track the event\n  props = dates(props, iso);\n  window.mixpanel.track(track.event(), props);\n\n  // track revenue specifically\n  if (revenue && people) {\n    window.mixpanel.people.track_charge(revenue);\n  }\n};\n\n/**\n * Alias.\n *\n * https://mixpanel.com/help/reference/javascript#user-identity\n * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.alias\n *\n * @api public\n * @param {Alias} alias\n */\n\nMixpanel.prototype.alias = function(alias) {\n  var mp = window.mixpanel;\n  var to = alias.to();\n  if (mp.get_distinct_id && mp.get_distinct_id() === to) return;\n  // HACK: internal mixpanel API to ensure we don't overwrite\n  if (mp.get_property && mp.get_property('$people_distinct_id') === to) return;\n  // although undocumented, mixpanel takes an optional original id\n  mp.alias(to, alias.from());\n};\n\n/**\n * Lowercase the given `arr`.\n *\n * @api private\n * @param {Array} arr\n * @return {Array}\n */\n\nfunction lowercase(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < arr.length; ++i) {\n    ret[i] = String(arr[i]).toLowerCase();\n  }\n\n  return ret;\n}\n\n}, {\"alias\":199,\"convert-dates\":200,\"obj-case\":42,\"each\":4,\"includes\":70,\"analytics.js-integration\":166,\"is\":18,\"to-iso-string\":195,\"some\":207}],\n207: [function(require, module, exports) {\n\n/**\n * some\n */\n\nvar some = [].some;\n\n/**\n * test whether some elements in\n * the array pass the test implemented\n * by `fn`.\n *\n * example:\n *\n *          some([1, 'foo', 'bar'], function (el, i) {\n *            return 'string' == typeof el;\n *          });\n *          // > true\n *\n * @param {Array} arr\n * @param {Function} fn\n * @return {bool}\n */\n\nmodule.exports = function (arr, fn) {\n  if (some) return some.call(arr, fn);\n  for (var i = 0, l = arr.length; i < l; ++i) {\n    if (fn(arr[i], i)) return true;\n  }\n  return false;\n};\n\n}, {}],\n131: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('bind');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar when = require('when');\n\n/**\n * Expose `Mojn`\n */\n\nvar Mojn = module.exports = integration('Mojn')\n  .global('_mojnTrack')\n  .option('customerCode', '')\n  .tag('<script src=\"https://track.idtargeting.com/{{ customerCode }}/track.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n * @param {Object} page\n */\n\nMojn.prototype.initialize = function() {\n  window._mojnTrack = window._mojnTrack || [];\n  window._mojnTrack.push({ cid: this.options.customerCode });\n  var loaded = bind(this, this.loaded);\n  var ready = this.ready;\n  this.load(function() {\n    when(loaded, ready);\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nMojn.prototype.loaded = function() {\n  return is.object(window._mojnTrack);\n};\n\n/**\n * Identify.\n *\n * @param {Identify} identify\n * @return {Element|undefined}\n */\n\nMojn.prototype.identify = function(identify) {\n  var email = identify.email();\n  if (!email) return;\n  // TODO: Replace with a tag?\n  var img = new Image();\n  img.src = '//matcher.idtargeting.com/identify.gif?cid=' + this.options.customerCode + '&_mjnctid=' + email;\n  img.width = 1;\n  img.height = 1;\n  // FIXME: Why does this have a return value?\n  return img;\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} event\n * @return {string}\n */\n\nMojn.prototype.track = function(track) {\n  var properties = track.properties();\n  var revenue = properties.revenue;\n  if (!revenue) return;\n  var currency = properties.currency || '';\n  var conv = currency + revenue;\n  window._mojnTrack.push({ conv: conv });\n  // FIXME: Why does this have a return value?\n  return conv;\n};\n\n}, {\"bind\":55,\"analytics.js-integration\":166,\"is\":18,\"when\":198}],\n132: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_mfq');\n\n/**\n * Expose `Mouseflow`.\n */\n\nvar Mouseflow = module.exports = integration('Mouseflow')\n  .assumesPageview()\n  .global('_mfq')\n  .global('mouseflow')\n  .global('mouseflowHtmlDelay')\n  .option('apiKey', '')\n  .option('mouseflowHtmlDelay', 0)\n  .tag('<script src=\"//cdn.mouseflow.com/projects/{{ apiKey }}.js\">');\n\n/**\n * Initalize.\n *\n * @api public\n */\n\nMouseflow.prototype.initialize = function() {\n  window.mouseflowHtmlDelay = this.options.mouseflowHtmlDelay;\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nMouseflow.prototype.loaded = function() {\n  return !!window.mouseflow;\n};\n\n/**\n * Page.\n *\n * http://mouseflow.zendesk.com/entries/22528817-Single-page-websites\n *\n * @api public\n * @param {Page} page\n */\n\nMouseflow.prototype.page = function() {\n  if (!window.mouseflow) return;\n  if (typeof window.mouseflow.newPageView !== 'function') return;\n  window.mouseflow.newPageView();\n};\n\n/**\n * Identify.\n *\n * http://mouseflow.zendesk.com/entries/24643603-Custom-Variables-Tagging\n *\n * @api public\n * @param {Identify} identify\n */\n\nMouseflow.prototype.identify = function(identify) {\n  set(identify.traits());\n};\n\n/**\n * Track.\n *\n * http://mouseflow.zendesk.com/entries/24643603-Custom-Variables-Tagging\n *\n * @api public\n * @param {Track} track\n */\n\nMouseflow.prototype.track = function(track) {\n  var props = track.properties();\n  props.event = track.event();\n  set(props);\n};\n\n/**\n * Push each key and value in the given `obj` onto the queue.\n *\n * @api private\n * @param {Object} obj\n */\n\nfunction set(obj) {\n  each(obj, function(key, value) {\n    push('setVariable', key, value);\n  });\n}\n\n}, {\"each\":4,\"analytics.js-integration\":166,\"global-queue\":196}],\n133: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar useHttps = require('use-https');\n\n/**\n * Expose `MouseStats` integration.\n */\n\nvar MouseStats = module.exports = integration('MouseStats')\n  .assumesPageview()\n  .global('msaa')\n  .global('MouseStatsVisitorPlaybacks')\n  .option('accountNumber', '')\n  .tag('http', '<script src=\"http://www2.mousestats.com/js/{{ path }}.js?{{ cacheBuster }}\">')\n  .tag('https', '<script src=\"https://ssl.mousestats.com/js/{{ path }}.js?{{ cacheBuster }}\">');\n\n/**\n * Initialize.\n *\n * http://www.mousestats.com/docs/pages/allpages\n *\n * @api public\n */\n\nMouseStats.prototype.initialize = function() {\n  var accountNumber = this.options.accountNumber;\n  var path = accountNumber.slice(0, 1) + '/' + accountNumber.slice(1, 2) + '/' + accountNumber;\n  var cacheBuster = Math.floor(new Date().getTime() / 60000);\n  var tagName = useHttps() ? 'https' : 'http';\n  this.load(tagName, { path: path, cacheBuster: cacheBuster }, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nMouseStats.prototype.loaded = function() {\n  return is.array(window.MouseStatsVisitorPlaybacks);\n};\n\n/**\n * Identify.\n *\n * http://www.mousestats.com/docs/wiki/7/how-to-add-custom-data-to-visitor-playbacks\n *\n * @api public\n * @param {Identify} identify\n */\n\nMouseStats.prototype.identify = function(identify) {\n  each(identify.traits(), function(key, value) {\n    window.MouseStatsVisitorPlaybacks.customVariable(key, value);\n  });\n};\n\n}, {\"each\":4,\"analytics.js-integration\":166,\"is\":18,\"use-https\":168}],\n134: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('__nls');\n\n/**\n * Expose `Navilytics` integration.\n */\n\nvar Navilytics = module.exports = integration('Navilytics')\n  .assumesPageview()\n  .global('__nls')\n  .option('memberId', '')\n  .option('projectId', '')\n  .tag('<script src=\"//www.navilytics.com/nls.js?mid={{ memberId }}&pid={{ projectId }}\">');\n\n/**\n * Initialize.\n *\n * https://www.navilytics.com/member/code_settings\n *\n * @api public\n */\n\nNavilytics.prototype.initialize = function() {\n  window.__nls = window.__nls || [];\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nNavilytics.prototype.loaded = function() {\n  return !!(window.__nls && Array.prototype.push !== window.__nls.push);\n};\n\n/**\n * Track.\n *\n * https://www.navilytics.com/docs#tags\n *\n * @param {Track} track\n */\n\nNavilytics.prototype.track = function(track) {\n  push('tagRecording', track.event());\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196}],\n135: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar alias = require('alias');\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `Nudgespot` integration.\n */\n\nvar Nudgespot = module.exports = integration('Nudgespot')\n  .assumesPageview()\n  .global('nudgespot')\n  .option('clientApiKey', '')\n  .tag('<script id=\"nudgespot\" src=\"//cdn.nudgespot.com/nudgespot.js\">');\n\n/**\n * Initialize Nudgespot.\n *\n * @api public\n */\n\nNudgespot.prototype.initialize = function() {\n  window.nudgespot = window.nudgespot || [];\n  /* eslint-disable */\n  window.nudgespot.init = function(n, t){function f(n,m){var a=m.split('.');2==a.length&&(n=n[a[0]],m=a[1]);n[m]=function(){n.push([m].concat(Array.prototype.slice.call(arguments,0)))}}n._version=0.1;n._globals=[t];n.people=n.people||[];n.params=n.params||[];m=\"track register unregister identify set_config people.delete people.create people.update people.create_property people.tag people.remove_Tag\".split(\" \");for (var i=0;i<m.length;i++)f(n,m[i])};\n  /* eslint-enable */\n  window.nudgespot.init(window.nudgespot, this.options.clientApiKey);\n  this.load(this.ready);\n};\n\n/**\n * Has the Nudgespot library been loaded yet?\n *\n * @api private\n * @return {boolean}\n */\n\nNudgespot.prototype.loaded = function() {\n  return !!(window.nudgespot && window.nudgespot.push !== Array.prototype.push);\n};\n\n/**\n * Identify a user.\n *\n * @api public\n * @param {Identify} identify\n */\n\nNudgespot.prototype.identify = function(identify) {\n  if (!identify.userId()) return this.debug('user id required');\n  var traits = identify.traits({ createdAt: 'created' });\n  traits = alias(traits, { created: 'created_at' });\n  window.nudgespot.identify(identify.userId(), traits);\n};\n\n/**\n * Track an event.\n *\n * @api public\n * @param {Track} track\n */\n\nNudgespot.prototype.track = function(track) {\n  window.nudgespot.track(track.event(), track.properties());\n};\n\n}, {\"alias\":199,\"analytics.js-integration\":166}],\n136: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar https = require('use-https');\nvar integration = require('analytics.js-integration');\nvar tick = require('next-tick');\n\n/**\n * Expose `Olark` integration.\n */\n\nvar Olark = module.exports = integration('Olark')\n  .assumesPageview()\n  .global('olark')\n  .option('groupId', '')\n  .option('identify', true)\n  .option('listen', false)\n  .option('page', true)\n  .option('siteId', '')\n  .option('track', false);\n\n/**\n * The context for this integration.\n */\n\nvar integrationContext = {\n  name: 'olark',\n  version: '1.0.0'\n};\n\n/**\n * Initialize.\n *\n * http://www.olark.com/documentation\n * https://www.olark.com/documentation/javascript/api.chat.setOperatorGroup\n *\n * @api public\n */\n\nOlark.prototype.initialize = function() {\n  var self = this;\n  this.load(function() {\n    tick(self.ready);\n  });\n\n  // assign chat to a specific site\n  var groupId = this.options.groupId;\n  if (groupId) api('chat.setOperatorGroup', { group: groupId });\n\n  // keep track of the widget's open state\n  api('box.onExpand', function() { self._open = true; });\n  api('box.onShrink', function() { self._open = false; });\n\n  // record events\n  if (this.options.listen) this.attachListeners();\n};\n\n/**\n * Load.\n *\n * @api private\n * @param {Function} callback\n */\n\nOlark.prototype.load = function(callback) {\n  /* eslint-disable */\n  window.olark||(function(c){var f=window,d=document,l=https()?\"https:\":\"http:\",z=c.name,r=\"load\";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while (q--) {(function(n){f[z][n]=function(){f[z](\"call\",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={ 0:+new Date() };a.P=function(u){a.p[u]=new Date()-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent(\"on\"+r,s);var ld=function(){function p(hd){hd=\"head\";return [\"<\",hd,\"></\",hd,\"><\",i,' onl' + 'oad=\"var d=',g,\";d.getElementsByTagName('head')[0].\",j,\"(d.\",h,\"('script')).\",k,\"='\",l,\"//\",a.l,\"'\",'\"',\"></\",i,\">\"].join(\"\")}var i=\"body\",m=d[i];if (!m) {return setTimeout(ld,100)}a.P(1);var j=\"appendChild\",h=\"createElement\",k=\"src\",n=d[h](\"div\"),v=n[j](d[h](z)),b=d[h](\"iframe\"),g=\"document\",e=\"domain\",o;n.style.display=\"none\";m.insertBefore(n,m.firstChild).id=z;b.frameBorder=\"0\";b.id=z+\"-loader\";if (/MSIE[ ]+6/.test(navigator.userAgent)) {b.src=\"javascript:false\"}b.allowTransparency=\"true\";v[j](b);try {b.contentWindow[g].open()}catch (w) {c[e]=d[e];o=\"javascript:var d=\"+g+\".open();d.domain='\"+d.domain+\"';\";b[k]=o+\"void(0);\"}try {var t=b.contentWindow[g];t.write(p());t.close()}catch (x) {b[k]=o+'d.write(\"'+p().replace(/\"/g,String.fromCharCode(92)+'\"')+'\");d.close();'}a.P(2)};ld()};nt()})({ loader: \"static.olark.com/jsclient/loader0.js\", name:\"olark\", methods:[\"configure\",\"extend\",\"declare\",\"identify\"] });\n  /* eslint-enable */\n  window.olark.identify(this.options.siteId);\n  callback();\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nOlark.prototype.loaded = function() {\n  return !!window.olark;\n};\n\n/**\n * Page.\n *\n * @param {Facade} page\n */\n\nOlark.prototype.page = function(page) {\n  if (!this.options.page) return;\n  var props = page.properties();\n  var name = page.fullName();\n  if (!name && !props.url) return;\n\n  name = name ? name + ' page' : props.url;\n  this.notify('looking at ' + name);\n};\n\n/**\n * Identify.\n *\n * @param {Facade} identify\n */\n\nOlark.prototype.identify = function(identify) {\n  if (!this.options.identify) return;\n\n  var username = identify.username();\n  var traits = identify.traits();\n  var id = identify.userId();\n  var email = identify.email();\n  var phone = identify.phone();\n  var name = identify.name() || identify.firstName();\n\n  if (traits) api('visitor.updateCustomFields', traits);\n  if (email) api('visitor.updateEmailAddress', { emailAddress: email });\n  if (phone) api('visitor.updatePhoneNumber', { phoneNumber: phone });\n  if (name) api('visitor.updateFullName', { fullName: name });\n\n  // figure out best nickname\n  var nickname = name || email || username || id;\n  if (name && email) nickname += ' (' + email + ')';\n  if (nickname) api('chat.updateVisitorNickname', { snippet: nickname });\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Facade} track\n */\n\nOlark.prototype.track = function(track) {\n  if (!this.options.track) return;\n  this.notify('visitor triggered \"' + track.event() + '\"');\n};\n\n/**\n * Listen for events.\n */\n\nOlark.prototype.attachListeners = function() {\n  var self = this;\n\n  api('chat.onBeginConversation', function() {\n    self.analytics.track(\n      'Live Chat Conversation Started',\n      {},\n      { context: { integration: integrationContext } }\n    );\n  });\n\n  // Callback accepts `event`\n  // TODO: We might eventually send information about the event through Segment\n  api('chat.onMessageToOperator', function() {\n    self.analytics.track(\n      'Live Chat Message Sent',\n      {},\n      { context: { integration: integrationContext } }\n    );\n  });\n\n  // Callback accepts `event`\n  // TODO: We might eventually send information about the event through Segment\n  api('chat.onMessageToVisitor', function() {\n    self.analytics.track(\n      'Live Chat Message Received',\n      {},\n      { context: { integration: integrationContext } }\n    );\n  });\n};\n\n/**\n * Send a notification `message` to the operator, only when a chat is active and\n * when the chat is open.\n *\n * @api private\n * @param {string} message\n */\n\nOlark.prototype.notify = function(message) {\n  if (!this._open) return;\n\n  // lowercase since olark does\n  message = message.toLowerCase();\n\n  api('visitor.getDetails', function(data) {\n    if (!data || !data.isConversing) return;\n    api('chat.sendNotificationToOperator', { body: message });\n  });\n};\n\n/**\n * Helper for Olark API calls.\n *\n * @api private\n * @param {string} action\n * @param {Object} value\n */\n\nfunction api(action, value) {\n  window.olark('api.' + action, value);\n}\n\n}, {\"use-https\":168,\"analytics.js-integration\":166,\"next-tick\":57}],\n137: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar foldl = require('foldl');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('optimizely');\nvar tick = require('next-tick');\n\n/**\n * Expose `Optimizely` integration.\n */\n\nvar Optimizely = module.exports = integration('Optimizely')\n  .option('listen', false)\n  .option('trackCategorizedPages', true)\n  .option('trackNamedPages', true)\n  .option('variations', true);\n\n/**\n * The name and version for this integration.\n */\n\nvar integrationContext = {\n  name: 'optimizely',\n  version: '1.0.0'\n};\n\n/**\n * Initialize.\n *\n * https://www.optimizely.com/docs/api#function-calls\n *\n * @api public\n */\n\nOptimizely.prototype.initialize = function() {\n  var self = this;\n  if (this.options.variations) {\n    tick(function() {\n      self.replay();\n    });\n  }\n  if (this.options.listen) {\n    tick(function() {\n      self.roots();\n    });\n  }\n  this.ready();\n};\n\n/**\n * Track.\n *\n * https://www.optimizely.com/docs/api#track-event\n *\n * @api public\n * @param {Track} track\n */\n\nOptimizely.prototype.track = function(track) {\n  var props = track.properties();\n  if (props.revenue) props.revenue *= 100;\n  push('trackEvent', track.event(), props);\n};\n\n/**\n * Page.\n *\n * https://www.optimizely.com/docs/api#track-event\n *\n * @api public\n * @param {Page} page\n */\n\nOptimizely.prototype.page = function(page) {\n  var category = page.category();\n  var name = page.fullName();\n  var opts = this.options;\n\n  // categorized pages\n  if (category && opts.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n\n  // named pages\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n};\n\n/**\n * Send experiment data as track events to Segment\n *\n * https://www.optimizely.com/docs/api#data-object\n *\n * @api private\n */\n\nOptimizely.prototype.roots = function() {\n  // In case the snippet isn't on the page\n  //\n  // FIXME: Under what conditions does this happen? Sounds like we should fix\n  // our #loaded method?\n  if (!window.optimizely) return;\n\n  var data = window.optimizely.data;\n  if (!data) return;\n  var allExperiments = data.experiments;\n  if (!data || !data.state || !allExperiments) return;\n  var activeExperiments = getExperiments({\n    variationNamesMap: data.state.variationNamesMap,\n    variationIdsMap: data.state.variationIdsMap,\n    activeExperimentIds: data.state.activeExperiments,\n    allExperiments: allExperiments\n  });\n  var self = this;\n\n  each(activeExperiments, function(props) {\n    self.analytics.track(\n      'Experiment Viewed',\n      props,\n      { context: { integration: integrationContext } }\n    );\n  });\n};\n\n/**\n * Replay experiment data as traits to other enabled providers.\n *\n * https://www.optimizely.com/docs/api#data-object\n *\n * @api private\n */\n\nOptimizely.prototype.replay = function() {\n  // In case the snippet isn't on the page\n  //\n  // FIXME: Under what conditions does this happen? Sounds like we should fix\n  // our #loaded method?\n  if (!window.optimizely) return;\n\n  var data = window.optimizely.data;\n  if (!data || !data.experiments || !data.state) return;\n\n  var traits = foldl(function(traits, variation, experimentId) {\n    var experiment = data.experiments[experimentId].name;\n    traits['Experiment: ' + experiment] = variation;\n    return traits;\n  }, {}, data.state.variationNamesMap);\n\n  this.analytics.identify(traits);\n};\n\n/**\n * Retrieves active experiments.\n *\n * @api private\n * @param {Object} options\n */\n\nfunction getExperiments(options) {\n  return foldl(function(results, experimentId) {\n    var experiment = options.allExperiments[experimentId];\n    if (experiment) {\n      results.push({\n        variationName: options.variationNamesMap[experimentId],\n        variationId: options.variationIdsMap[experimentId][0],\n        experimentId: experimentId,\n        experimentName: experiment.name\n      });\n    }\n    return results;\n  }, [], options.activeExperimentIds);\n}\n\n}, {\"each\":4,\"foldl\":180,\"analytics.js-integration\":166,\"global-queue\":196,\"next-tick\":57}],\n138: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar omit = require('omit');\n\n/**\n * Expose `Outbound` integration.\n */\n\nvar Outbound = module.exports = integration('Outbound')\n  .global('outbound')\n  .option('publicApiKey', '')\n  .tag('<script src=\"//cdn.outbound.io/{{ publicApiKey }}.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nOutbound.prototype.initialize = function() {\n  window.outbound = window.outbound || [];\n  window.outbound.methods = [\n    'identify',\n    'track',\n    'registerApnsToken',\n    'registerGcmToken',\n    'disableApnsToken',\n    'disableGcmToken'\n  ];\n\n  window.outbound.factory = function(method) {\n    return function() {\n      var args = Array.prototype.slice.call(arguments);\n      args.unshift(method);\n      window.outbound.push(args);\n      return window.outbound;\n    };\n  };\n\n  for (var i = 0; i < window.outbound.methods.length; i++) {\n    var key = window.outbound.methods[i];\n    window.outbound[key] = window.outbound.factory(key);\n  }\n\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nOutbound.prototype.loaded = function() {\n  return window.outbound;\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nOutbound.prototype.identify = function(identify) {\n  var traitsToOmit = [\n    'id',\n    'userId',\n    'email',\n    'phone',\n    'firstName',\n    'lastName'\n  ];\n  var userId = identify.userId() || identify.anonymousId();\n  var attributes = {\n    attributes: omit(traitsToOmit, identify.traits()),\n    email: identify.email(),\n    phoneNumber: identify.phone(),\n    firstName: identify.firstName(),\n    lastName: identify.lastName()\n  };\n  window.outbound.identify(userId, attributes);\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nOutbound.prototype.track = function(track) {\n  window.outbound.track(track.event(), track.properties(), track.timestamp());\n};\n\n/**\n * Alias.\n *\n * @api public\n * @param {Alias} alias\n */\n\nOutbound.prototype.alias = function(alias) {\n  window.outbound.identify(alias.userId(), { previousId: alias.previousId() });\n};\n\n}, {\"analytics.js-integration\":166,\"omit\":205}],\n139: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_pq');\n\n/**\n * Expose `PerfectAudience` integration.\n */\n\nvar PerfectAudience = module.exports = integration('Perfect Audience')\n  .assumesPageview()\n  .global('_pq')\n  .option('siteId', '')\n  .tag('<script src=\"//tag.perfectaudience.com/serve/{{ siteId }}.js\">');\n\n/**\n * Initialize.\n *\n * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api\n *\n * @api public\n */\n\nPerfectAudience.prototype.initialize = function() {\n  window._pq = window._pq || [];\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nPerfectAudience.prototype.loaded = function() {\n  return !!(window._pq && window._pq.push);\n};\n\n/**\n * Track.\n *\n * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api\n *\n * @api public\n * @param {Track} event\n */\n\nPerfectAudience.prototype.track = function(track) {\n  var total = track.total() || track.revenue();\n  var orderId = track.orderId();\n  var props = {};\n  var sendProps = false;\n  if (total) {\n    props.revenue = total;\n    sendProps = true;\n  }\n  if (orderId) {\n    props.orderId = orderId;\n    sendProps = true;\n  }\n\n  if (!sendProps) return push('track', track.event());\n  return push('track', track.event(), props);\n};\n\n/**\n * Viewed Product.\n *\n * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api\n *\n * @api private\n * @param {Track} track\n */\n\nPerfectAudience.prototype.viewedProduct = function(track) {\n  var product = track.id() || track.sku();\n  push('track', track.event());\n  push('trackProduct', product);\n};\n\n/**\n * Completed Purchase.\n *\n * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api\n *\n * @api private\n * @param {Track} track\n */\n\nPerfectAudience.prototype.completedOrder = function(track) {\n  var total = track.total() || track.revenue();\n  var orderId = track.orderId();\n  var props = {};\n  if (total) props.revenue = total;\n  if (orderId) props.orderId = orderId;\n  push('track', track.event(), props);\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196}],\n140: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar date = require('load-date');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_prum');\n\n/**\n * Expose `Pingdom` integration.\n */\n\nvar Pingdom = module.exports = integration('Pingdom')\n  .assumesPageview()\n  .global('_prum')\n  .global('PRUM_EPISODES')\n  .option('id', '')\n  .tag('<script src=\"//rum-static.pingdom.net/prum.min.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nPingdom.prototype.initialize = function() {\n  window._prum = window._prum || [];\n  push('id', this.options.id);\n  push('mark', 'firstbyte', date.getTime());\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nPingdom.prototype.loaded = function() {\n  return !!(window._prum && window._prum.push !== Array.prototype.push);\n};\n\n}, {\"load-date\":194,\"analytics.js-integration\":166,\"global-queue\":196}],\n141: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar push = require('global-queue')('_paq');\n\n/**\n * Expose `Piwik` integration.\n */\n\nvar Piwik = module.exports = integration('Piwik')\n  .global('_paq')\n  .option('url', null)\n  .option('siteId', '')\n  .option('customVariableLimit', 5)\n  .mapping('goals')\n  .tag('<script src=\"{{ url }}/piwik.js\">');\n\n/**\n * Initialize.\n *\n * http://piwik.org/docs/javascript-tracking/#toc-asynchronous-tracking\n *\n * @api public\n */\n\nPiwik.prototype.initialize = function() {\n  window._paq = window._paq || [];\n  push('setSiteId', this.options.siteId);\n  push('setTrackerUrl', this.options.url + '/piwik.php');\n  push('enableLinkTracking');\n  this.load(this.ready);\n};\n\n/**\n * Check if Piwik is loaded.\n *\n * @api private\n */\n\nPiwik.prototype.loaded = function() {\n  return !!(window._paq && window._paq.push !== Array.prototype.push);\n};\n\n/**\n * Page\n *\n * @api public\n * @param {Page} page\n */\n\nPiwik.prototype.page = function() {\n  push('trackPageView');\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nPiwik.prototype.track = function(track) {\n  var goals = this.goals(track.event());\n  var revenue = track.revenue();\n  var category = track.category() || 'All';\n  var action = track.event();\n  var name = track.proxy('properties.name') || track.proxy('properties.label');\n  var value = track.value() || track.revenue();\n\n  var options = track.options('Piwik');\n  var customVariables = options.customVars || options.cvar;\n\n  if (!is.object(customVariables)) {\n    customVariables = {};\n  }\n\n  for (var i = 1; i <= this.options.customVariableLimit; i += 1) {\n    if (customVariables[i]) {\n      push('setCustomVariable', i.toString(), customVariables[i][0], customVariables[i][1], 'page');\n    }\n  }\n\n  each(goals, function(goal) {\n    push('trackGoal', goal, revenue);\n  });\n\n  push('trackEvent', category, action, name, value);\n};\n\n}, {\"each\":4,\"analytics.js-integration\":166,\"is\":18,\"global-queue\":196}],\n142: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar convertDates = require('convert-dates');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_preactq');\n\n/**\n * Expose `Preact` integration.\n */\n\nvar Preact = module.exports = integration('Preact')\n  .assumesPageview()\n  .global('_preactq')\n  .global('_lnq')\n  .option('projectCode', '')\n  .tag('<script src=\"//d2bbvl6dq48fa6.cloudfront.net/js/preact-4.1.min.js\">');\n\n/**\n * Initialize.\n *\n * http://www.preact.io/api/javascript\n *\n * @api public\n * @param {Object} page\n */\n\nPreact.prototype.initialize = function() {\n  window._preactq = window._preactq || [];\n  window._lnq = window._lnq || [];\n  push('_setCode', this.options.projectCode);\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nPreact.prototype.loaded = function() {\n  return !!(window._preactq && window._preactq.push !== Array.prototype.push);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nPreact.prototype.identify = function(identify) {\n  if (!identify.userId()) return;\n  var traits = identify.traits({ created: 'created_at' });\n  traits = convertDates(traits, convertDate);\n  push('_setPersonData', {\n    name: identify.name(),\n    email: identify.email(),\n    uid: identify.userId(),\n    properties: traits\n  });\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Group} group\n */\n\nPreact.prototype.group = function(group) {\n  if (!group.groupId()) return;\n  push('_setAccount', group.traits());\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nPreact.prototype.track = function(track) {\n  var props = track.properties();\n  var revenue = track.revenue();\n  var event = track.event();\n  var special = { name: event };\n\n  if (revenue) {\n    special.revenue = revenue * 100;\n    delete props.revenue;\n  }\n\n  if (props.note) {\n    special.note = props.note;\n    delete props.note;\n  }\n\n  push('_logEvent', special, props);\n};\n\n/**\n * Convert a `date` to a format Preact supports.\n *\n * @param {Date} date\n * @return {number}\n */\n\nfunction convertDate(date) {\n  return Math.floor(date / 1000);\n}\n\n}, {\"convert-dates\":200,\"analytics.js-integration\":166,\"global-queue\":196}],\n143: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_kiq');\nvar Facade = require('facade');\nvar Identify = Facade.Identify;\nvar bind = require('bind');\nvar when = require('when');\n\n/**\n * Expose `Qualaroo` integration.\n */\n\nvar Qualaroo = module.exports = integration('Qualaroo')\n  .assumesPageview()\n  .global('_kiq')\n  .option('customerId', '')\n  .option('siteToken', '')\n  .option('track', false)\n  .tag('<script src=\"//s3.amazonaws.com/ki.js/{{ customerId }}/{{ siteToken }}.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n * @param {Object} page\n */\n\nQualaroo.prototype.initialize = function() {\n  window._kiq = window._kiq || [];\n  var loaded = bind(this, this.loaded);\n  var ready = this.ready;\n  this.load(function() {\n    when(loaded, ready);\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nQualaroo.prototype.loaded = function() {\n  return !!(window._kiq && window._kiq.push !== Array.prototype.push);\n};\n\n/**\n * Identify.\n *\n * http://help.qualaroo.com/customer/portal/articles/731085-identify-survey-nudge-takers\n * http://help.qualaroo.com/customer/portal/articles/731091-set-additional-user-properties\n *\n * @api public\n * @param {Identify} identify\n */\n\nQualaroo.prototype.identify = function(identify) {\n  var traits = identify.traits();\n  var id = identify.userId();\n  var email = identify.email();\n  if (email) id = email;\n  if (id) push('identify', id);\n  if (traits) push('set', traits);\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nQualaroo.prototype.track = function(track) {\n  if (!this.options.track) return;\n  var event = track.event();\n  var traits = {};\n  traits['Triggered: ' + event] = true;\n  this.identify(new Identify({ traits: traits }));\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196,\"facade\":9,\"bind\":55,\"when\":198}],\n144: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_qevents', { wrap: false });\nvar reduce = require('reduce');\nvar useHttps = require('use-https');\n\n/**\n * Expose `Quantcast` integration.\n */\n\nvar Quantcast = module.exports = integration('Quantcast')\n  .assumesPageview()\n  .global('_qevents')\n  .global('__qc')\n  .option('pCode', null)\n  .option('advertise', false)\n  .tag('http', '<script src=\"http://edge.quantserve.com/quant.js\">')\n  .tag('https', '<script src=\"https://secure.quantserve.com/quant.js\">');\n\n/**\n * Initialize.\n *\n * https://www.quantcast.com/learning-center/guides/using-the-quantcast-asynchronous-tag/\n * https://www.quantcast.com/help/cross-platform-audience-measurement-guide/\n *\n * @api public\n * @param {Page} page\n */\n\nQuantcast.prototype.initialize = function(page) {\n  window._qevents = window._qevents || [];\n\n  var opts = this.options;\n  var settings = { qacct: opts.pCode };\n  var user = this.analytics.user();\n  if (user.id()) settings.uid = user.id();\n\n  if (page) {\n    settings.labels = this._labels('page', page.category(), page.name());\n  }\n\n  push(settings);\n\n  var name = useHttps() ? 'https' : 'http';\n  this.load(name, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nQuantcast.prototype.loaded = function() {\n  return !!window.__qc;\n};\n\n/**\n * Page.\n *\n * https://cloudup.com/cBRRFAfq6mf\n *\n * @api public\n * @param {Page} page\n */\n\nQuantcast.prototype.page = function(page) {\n  var category = page.category();\n  var name = page.name();\n  var customLabels = page.proxy('properties.label');\n  var labels = this._labels('page', category, name, customLabels);\n\n  var settings = {\n    event: 'refresh',\n    labels: labels,\n    qacct: this.options.pCode\n  };\n  var user = this.analytics.user();\n  if (user.id()) settings.uid = user.id();\n  push(settings);\n};\n\n/**\n * Identify.\n *\n * https://www.quantcast.com/help/cross-platform-audience-measurement-guide/\n *\n * @api public\n * @param {string} [id]\n */\n\nQuantcast.prototype.identify = function(identify) {\n  // edit the initial quantcast settings\n  // TODO: could be done in a cleaner way\n  var id = identify.userId();\n  if (id) {\n    window._qevents[0] = window._qevents[0] || {};\n    window._qevents[0].uid = id;\n  }\n};\n\n/**\n * Track.\n *\n * https://cloudup.com/cBRRFAfq6mf\n *\n * @api public\n * @param {Track} track\n */\n\nQuantcast.prototype.track = function(track) {\n  var name = track.event();\n  var revenue = track.revenue();\n  var orderId = track.orderId();\n  var customLabels = track.proxy('properties.label');\n  var labels = this._labels('event', name, customLabels);\n\n  var settings = {\n    event: 'click',\n    labels: labels,\n    qacct: this.options.pCode\n  };\n\n  var user = this.analytics.user();\n  if (revenue != null) settings.revenue = String(revenue);\n  if (orderId) settings.orderid = orderId;\n  if (user.id()) settings.uid = user.id();\n  push(settings);\n};\n\n/**\n * Completed Order.\n *\n * @api private\n * @param {Track} track\n */\n\nQuantcast.prototype.completedOrder = function(track) {\n  var name = track.event();\n  var revenue = track.total();\n  var customLabels = track.proxy('properties.label');\n  var labels = this._labels('event', name, customLabels);\n  var category = track.category();\n  var repeat = track.proxy('properties.repeat');\n\n  if (this.options.advertise && category) {\n    labels += ',' + this._labels('pcat', category);\n  }\n\n  if (typeof repeat === 'boolean') {\n    labels += ',_fp.customer.' + (repeat ? 'repeat' : 'new');\n  }\n\n  var settings = {\n    // the example Quantcast sent has completed order send refresh not click\n    event: 'refresh',\n    labels: labels,\n    revenue: String(revenue),\n    orderid: track.orderId(),\n    qacct: this.options.pCode\n  };\n  push(settings);\n};\n\n/**\n * Generate quantcast labels.\n *\n * Example:\n *\n *    options.advertise = false;\n *    labels('event', 'my event');\n *    // => \"event.my event\"\n *\n *    options.advertise = true;\n *    labels('event', 'my event');\n *    // => \"_fp.event.my event\"\n *\n * @api private\n * @param {string} type\n * @param {...string} args\n * @return {string}\n */\n\nQuantcast.prototype._labels = function(type) {\n  var args = Array.prototype.slice.call(arguments, 1);\n  var advertise = this.options.advertise;\n\n  if (advertise && type === 'page') type = 'event';\n  if (advertise) type = '_fp.' + type;\n\n  var separator = advertise ? ' ' : '.';\n  var ret = reduce(args, function(ret, arg) {\n    if (arg != null) {\n      ret.push(String(arg).replace(/, /g, ','));\n    }\n    return ret;\n  }, []).join(separator);\n\n  return [type, ret].join('.');\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196,\"reduce\":208,\"use-https\":168}],\n208: [function(require, module, exports) {\n\n/**\n * Reduce `arr` with `fn`.\n *\n * @param {Array} arr\n * @param {Function} fn\n * @param {Mixed} initial\n *\n * TODO: combatible error handling?\n */\n\nmodule.exports = function(arr, fn, initial){  \n  var idx = 0;\n  var len = arr.length;\n  var curr = arguments.length == 3\n    ? initial\n    : arr[idx++];\n\n  while (idx < len) {\n    curr = fn.call(null, curr, arr[idx], ++idx, arr);\n  }\n  \n  return curr;\n};\n}, {}],\n145: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar extend = require('extend');\nvar integration = require('analytics.js-integration');\nvar is = require('is');\n\n/**\n * Expose `Rollbar` integration.\n */\n\nvar RollbarIntegration = module.exports = integration('Rollbar')\n  .global('Rollbar')\n  .option('identify', true)\n  .option('accessToken', '')\n  .option('environment', 'unknown')\n  .option('captureUncaught', true);\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nRollbarIntegration.prototype.initialize = function() {\n  var _rollbarConfig = this.config = {\n    accessToken: this.options.accessToken,\n    captureUncaught: this.options.captureUncaught,\n    payload: {\n      environment: this.options.environment\n    }\n  };\n  /* eslint-disable */\n  (function(a,b){function c(b){this.shimId=++h,this.notifier=null,this.parentShim=b,this.logger=function(){},a.console&&void 0===a.console.shimId&&(this.logger=a.console.log)}function d(b,c,d){a._rollbarWrappedError&&(d[4]||(d[4]=a._rollbarWrappedError),d[5]||(d[5]=a._rollbarWrappedError._rollbarContext),a._rollbarWrappedError=null),b.uncaughtError.apply(b,d),c&&c.apply(a,d)}function e(b){var d=c;return g(function(){if(this.notifier)return this.notifier[b].apply(this.notifier,arguments);var c=this,e=\"scope\"===b;e&&(c=new d(this));var f=Array.prototype.slice.call(arguments,0),g={shim:c,method:b,args:f,ts:new Date};return a._rollbarShimQueue.push(g),e?c:void 0})}function f(a,b){if(b.hasOwnProperty&&b.hasOwnProperty(\"addEventListener\")){var c=b.addEventListener;b.addEventListener=function(b,d,e){c.call(this,b,a.wrap(d),e)};var d=b.removeEventListener;b.removeEventListener=function(a,b,c){d.call(this,a,b&&b._wrapped?b._wrapped:b,c)}}}function g(a,b){return b=b||this.logger,function(){try{return a.apply(this,arguments)}catch(c){b(\"Rollbar internal error:\",c)}}}var h=0;c.init=function(a,b){var e=b.globalAlias||\"Rollbar\";if(\"object\"==typeof a[e])return a[e];a._rollbarShimQueue=[],a._rollbarWrappedError=null,b=b||{};var h=new c;return g(function(){if(h.configure(b),b.captureUncaught){var c=a.onerror;a.onerror=function(){var a=Array.prototype.slice.call(arguments,0);d(h,c,a)};var g,i,j=\"EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload\".split(\",\");for(g=0;g<j.length;++g)i=j[g],a[i]&&a[i].prototype&&f(h,a[i].prototype)}return a[e]=h,h},h.logger)()},c.prototype.loadFull=function(a,b,c,d,e){var f=g(function(){var a=b.createElement(\"script\"),e=b.getElementsByTagName(\"script\")[0];a.src=d.rollbarJsUrl,a.async=!c,a.onload=h,e.parentNode.insertBefore(a,e)},this.logger),h=g(function(){var b;if(void 0===a._rollbarPayloadQueue){var c,d,f,g;for(b=new Error(\"rollbar.js did not load\");c=a._rollbarShimQueue.shift();)for(f=c.args,g=0;g<f.length;++g)if(d=f[g],\"function\"==typeof d){d(b);break}}\"function\"==typeof e&&e(b)},this.logger);g(function(){c?f():a.addEventListener?a.addEventListener(\"load\",f,!1):a.attachEvent(\"onload\",f)},this.logger)()},c.prototype.wrap=function(b,c){try{var d;if(d=\"function\"==typeof c?c:function(){return c||{}},\"function\"!=typeof b)return b;if(b._isWrap)return b;if(!b._wrapped){b._wrapped=function(){try{return b.apply(this,arguments)}catch(c){throw c._rollbarContext=d(),c._rollbarContext._wrappedSource=b.toString(),a._rollbarWrappedError=c,c}},b._wrapped._isWrap=!0;for(var e in b)b.hasOwnProperty(e)&&(b._wrapped[e]=b[e])}return b._wrapped}catch(f){return b}};for(var i=\"log,debug,info,warn,warning,error,critical,global,configure,scope,uncaughtError\".split(\",\"),j=0;j<i.length;++j)c.prototype[i[j]]=e(i[j]);var k=\"//d37gvrvc0wt4s1.cloudfront.net/js/v1.1/rollbar.min.js\";_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||k;var l=c.init(a,_rollbarConfig);})(window,document);\n  /* eslint-enable */\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {Boolean}\n */\n\nRollbarIntegration.prototype.loaded = function() {\n  return is.object(window.Rollbar) && window.Rollbar.shimId == null;\n};\n\n/**\n * Load.\n *\n * @api public\n * @param {Function} callback\n */\n\nRollbarIntegration.prototype.load = function(callback) {\n  window.Rollbar.loadFull(window, document, true, this.config, callback);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nRollbarIntegration.prototype.identify = function(identify) {\n  // do stuff with `id` or `traits`\n  if (!this.options.identify) return;\n\n  // Don't allow identify without a user id\n  var uid = identify.userId();\n  if (uid === null || uid === undefined) return;\n\n  var rollbar = window.Rollbar;\n  var person = { id: uid };\n  extend(person, identify.traits());\n  rollbar.configure({ payload: { person: person } });\n};\n\n}, {\"extend\":68,\"analytics.js-integration\":166,\"is\":18}],\n146: [function(require, module, exports) {\n\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `Route` integration.\n */\n\nvar Route = module.exports = integration('Route')\n  .global('_rq')\n  .global('_route')\n  .option('organizationId', '')\n  .tag('<script id=\"rtracker\" data-organization-id=\"{{ organizationId }}\" src=\"//www.routecdn.com/tracker/route-tracker-min.js\">');\n\n/**\n * Initialize Route.\n *\n * @api public\n */\n\nRoute.prototype.initialize = function() {\n  window._rq = window._rq || [];\n  window._route = window._route || [];\n  window._route.methods = ['identify', 'track', 'trackById'];\n  window._route.factory = function(method) {\n    return function() {\n      var args = Array.prototype.slice.call(arguments);\n      args.unshift(method);\n      window._rq.push(args);\n      return window._rq;\n    };\n  };\n  for (var i = 0; i < window._route.methods.length; i++) {\n    var key = window._route.methods[i];\n    window._route[key] = window._route.factory(key);\n  }\n  this.load(this.ready);\n};\n\n/**\n * Has the Route library been loaded yet?\n *\n * @api private\n * @return {Boolean}\n */\n\nRoute.prototype.loaded = function() {\n  return window._rq && window._rq.push !== Array.prototype.push;\n};\n\n/**\n * Identify a user.\n *\n * @api public\n * @param {Track} identify\n */\n\nRoute.prototype.identify = function(identify) {\n  window._route.identify(identify.traits());\n};\n\n/**\n * Track an event.\n *\n * @api public\n * @param {Track} track\n */\n\nRoute.prototype.track = function(track) {\n  window._route.track(track.event());\n};\n\n}, {\"analytics.js-integration\":166}],\n147: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `SaaSquatch` integration.\n */\n\nvar SaaSquatch = module.exports = integration('SaaSquatch')\n  .option('tenantAlias', '')\n  .option('referralImage', '')\n  .global('_sqh')\n  .tag('<script src=\"//d2rcp9ak152ke1.cloudfront.net/assets/javascripts/squatch.min.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nSaaSquatch.prototype.initialize = function() {\n  window._sqh = window._sqh || [];\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nSaaSquatch.prototype.loaded = function() {\n  return window._sqh && window._sqh.push !== Array.prototype.push;\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Facade} identify\n */\n\nSaaSquatch.prototype.identify = function(identify) {\n  var sqh = window._sqh;\n  var accountId = identify.proxy('traits.accountId');\n  var paymentProviderId = identify.proxy('traits.paymentProviderId');\n  var accountStatus = identify.proxy('traits.accountStatus');\n  var referralCode = identify.proxy('traits.referralCode');\n  var image = identify.proxy('traits.referralImage') || this.options.referralImage;\n  var opts = identify.options(this.name);\n  var id = identify.userId();\n  var email = identify.email();\n\n  if (!(id || email)) return;\n  if (this.called) return;\n\n  var init = {\n    tenant_alias: this.options.tenantAlias,\n    first_name: identify.firstName(),\n    last_name: identify.lastName(),\n    user_image: identify.avatar(),\n    email: email,\n    user_id: id\n  };\n\n  if (accountId) init.account_id = accountId;\n  if (paymentProviderId) init.payment_provider_id = paymentProviderId;\n  if (init.payment_provider_id === 'null') init.payment_provider_id = null;\n  if (accountStatus) init.account_status = accountStatus;\n  if (referralCode) init.referral_code = referralCode;\n  if (opts.checksum) init.checksum = opts.checksum;\n  if (image) init.fb_share_image = image;\n\n  sqh.push(['init', init]);\n  this.called = true;\n  this.load();\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Group} group\n */\n\nSaaSquatch.prototype.group = function(group) {\n  var sqh = window._sqh;\n  var id = group.groupId();\n  var image = group.proxy('traits.referralImage') || this.options.referralImage;\n  var opts = group.options(this.name);\n\n  // tenant_alias is required.\n  if (this.called) return;\n\n  var init = {\n    tenant_alias: this.options.tenantAlias,\n    account_id: id\n  };\n\n  if (opts.checksum) init.checksum = opts.checksum;\n  if (image) init.fb_share_image = image;\n\n  sqh.push(['init', init]);\n  this.called = true;\n  this.load();\n};\n\n}, {\"analytics.js-integration\":166}],\n148: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar when = require('when');\n\n/**\n * Expose `SatisMeter` integration.\n */\n\nvar SatisMeter = module.exports = integration('SatisMeter')\n  .global('satismeter')\n  .option('token', '')\n  .tag('<script src=\"https://app.satismeter.com/satismeter.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nSatisMeter.prototype.initialize = function() {\n  var self = this;\n  this.load(function() {\n    when(function() { return self.loaded(); }, self.ready);\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nSatisMeter.prototype.loaded = function() {\n  return !!window.satismeter;\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nSatisMeter.prototype.identify = function(identify) {\n  var traits = identify.traits();\n  traits.token = this.options.token;\n  traits.user = {\n    id: identify.userId()\n  };\n\n  if (identify.name()) {\n    traits.user.name = identify.name();\n  }\n  if (identify.email()) {\n    traits.user.email = identify.email();\n  }\n  if (identify.created()) {\n    traits.user.signUpDate = identify.created().toISOString();\n  }\n\n  // Remove traits that are already passed in user object\n  delete traits.id;\n  delete traits.email;\n  delete traits.name;\n  delete traits.created;\n\n  window.satismeter(traits);\n};\n\n}, {\"analytics.js-integration\":166,\"when\":198}],\n149: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar ads = require('ad-params');\nvar clone = require('clone');\nvar cookie = require('cookie');\nvar extend = require('extend');\nvar integration = require('analytics.js-integration');\nvar json = require('segmentio/json@1.0.0');\nvar localstorage = require('store');\nvar protocol = require('protocol');\nvar send = require('send-json');\nvar topDomain = require('top-domain');\nvar utm = require('utm-params');\nvar uuid = require('uuid');\n\n/**\n * Cookie options\n */\n\nvar cookieOptions = {\n  // 1 year\n  maxage: 31536000000,\n  secure: false,\n  path: '/'\n};\n\n/**\n * Expose `Segment` integration.\n */\n\nvar Segment = exports = module.exports = integration('Segment.io')\n  .option('apiKey', '');\n\n/**\n * Get the store.\n *\n * @return {Function}\n */\n\nexports.storage = function() {\n  return protocol() === 'file:' || protocol() === 'chrome-extension:' ? localstorage : cookie;\n};\n\n/**\n * Expose global for testing.\n */\n\nexports.global = window;\n\n/**\n * Initialize.\n *\n * https://github.com/segmentio/segmentio/blob/master/modules/segmentjs/segment.js/v1/segment.js\n *\n * @api public\n */\n\nSegment.prototype.initialize = function() {\n  var self = this;\n  this.ready();\n  this.analytics.on('invoke', function(msg) {\n    var action = msg.action();\n    var listener = 'on' + msg.action();\n    self.debug('%s %o', action, msg);\n    if (self[listener]) self[listener](msg);\n    self.ready();\n  });\n};\n\n/**\n * Loaded.\n *\n * @api private\n * @return {boolean}\n */\n\nSegment.prototype.loaded = function() {\n  return true;\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nSegment.prototype.onpage = function(page) {\n  this.send('/p', page.json());\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nSegment.prototype.onidentify = function(identify) {\n  this.send('/i', identify.json());\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Group} group\n */\n\nSegment.prototype.ongroup = function(group) {\n  this.send('/g', group.json());\n};\n\n/**\n * ontrack.\n *\n * TODO: Document this.\n *\n * @api private\n * @param {Track} track\n */\n\nSegment.prototype.ontrack = function(track) {\n  var json = track.json();\n  // TODO: figure out why we need traits.\n  delete json.traits;\n  this.send('/t', json);\n};\n\n/**\n * Alias.\n *\n * @api public\n * @param {Alias} alias\n */\n\nSegment.prototype.onalias = function(alias) {\n  var json = alias.json();\n  var user = this.analytics.user();\n  json.previousId = json.previousId || json.from || user.id() || user.anonymousId();\n  json.userId = json.userId || json.to;\n  delete json.from;\n  delete json.to;\n  this.send('/a', json);\n};\n\n/**\n * Normalize the given `msg`.\n *\n * @api private\n * @param {Object} msg\n */\n\nSegment.prototype.normalize = function(msg) {\n  this.debug('normalize %o', msg);\n  var user = this.analytics.user();\n  var global = exports.global;\n  var query = global.location.search;\n  var ctx = msg.context = msg.context || msg.options || {};\n  delete msg.options;\n  msg.writeKey = this.options.apiKey;\n  ctx.userAgent = navigator.userAgent;\n  if (!ctx.library) ctx.library = { name: 'analytics.js', version: this.analytics.VERSION };\n  if (query) ctx.campaign = utm(query);\n  this.referrerId(query, ctx);\n  msg.userId = msg.userId || user.id();\n  msg.anonymousId = user.anonymousId();\n  msg.messageId = uuid();\n  msg.sentAt = new Date();\n  this.debug('normalized %o', msg);\n  return msg;\n};\n\n/**\n * Send `obj` to `path`.\n *\n * @api private\n * @param {string} path\n * @param {Object} obj\n * @param {Function} fn\n */\n\nSegment.prototype.send = function(path, msg, fn) {\n  var url = scheme() + '//api.segment.io/v1' + path;\n  var headers = { 'Content-Type': 'text/plain' };\n  fn = fn || noop;\n  var self = this;\n\n  // msg\n  msg = this.normalize(msg);\n\n  // send\n  send(url, msg, headers, function(err, res) {\n    self.debug('sent %O, received %O', msg, arguments);\n    if (err) return fn(err);\n    res.url = url;\n    fn(null, res);\n  });\n};\n\n/**\n * Gets/sets cookies on the appropriate domain.\n *\n * @api private\n * @param {string} name\n * @param {*} val\n */\n\nSegment.prototype.cookie = function(name, val) {\n  var store = Segment.storage();\n  if (arguments.length === 1) return store(name);\n  var global = exports.global;\n  var href = global.location.href;\n  var domain = '.' + topDomain(href);\n  if (domain === '.') domain = '';\n  this.debug('store domain %s -> %s', href, domain);\n  var opts = clone(cookieOptions);\n  opts.domain = domain;\n  this.debug('store %s, %s, %o', name, val, opts);\n  store(name, val, opts);\n  if (store(name)) return;\n  delete opts.domain;\n  this.debug('fallback store %s, %s, %o', name, val, opts);\n  store(name, val, opts);\n};\n\n/**\n * Add referrerId to context.\n *\n * TODO: remove.\n *\n * @api private\n * @param {Object} query\n * @param {Object} ctx\n */\n\nSegment.prototype.referrerId = function(query, ctx) {\n  var stored = this.cookie('s:context.referrer');\n  var ad;\n\n  if (stored) stored = json.parse(stored);\n  if (query) ad = ads(query);\n\n  ad = ad || stored;\n\n  if (!ad) return;\n  ctx.referrer = extend(ctx.referrer || {}, ad);\n  this.cookie('s:context.referrer', json.stringify(ad));\n};\n\n/**\n * Get the scheme.\n *\n * The function returns `http:`\n * if the protocol is `http:` and\n * `https:` for other protocols.\n *\n * @api private\n * @return {string}\n */\n\nfunction scheme() {\n  return protocol() === 'http:' ? 'http:' : 'https:';\n}\n\n/**\n * Noop.\n */\n\nfunction noop() {}\n\n}, {\"ad-params\":209,\"clone\":13,\"cookie\":58,\"extend\":68,\"analytics.js-integration\":166,\"segmentio/json@1.0.0\":59,\"store\":210,\"protocol\":211,\"send-json\":212,\"top-domain\":189,\"utm-params\":213,\"uuid\":78}],\n209: [function(require, module, exports) {\n/**\n * Module dependencies.\n */\n \nvar parse = require('querystring').parse;\n \n/**\n * Expose `ads`\n */\n \nmodule.exports = ads;\n \n/**\n * All the ad query params we look for.\n */\n \nvar QUERYIDS = {\n  'btid' : 'dataxu',\n  'urid' : 'millennial-media'\n};\n \n/**\n * Get all ads info from the given `querystring`\n *\n * @param {String} query\n * @return {Object}\n * @api private\n */\n \nfunction ads(query){\n  var params = parse(query);\n  for (var key in params) {\n    for (var id in QUERYIDS) {\n      if (key === id) {\n        return {\n          id : params[key],\n          type : QUERYIDS[id]\n        };\n      }\n    }\n  }\n}\n}, {\"querystring\":27}],\n210: [function(require, module, exports) {\n\n/**\n * dependencies.\n */\n\nvar unserialize = require('unserialize');\nvar each = require('each');\nvar storage;\n\n/**\n * Safari throws when a user\n * blocks access to cookies / localstorage.\n */\n\ntry {\n  storage = window.localStorage;\n} catch (e) {\n  storage = null;\n}\n\n/**\n * Expose `store`\n */\n\nmodule.exports = store;\n\n/**\n * Store the given `key`, `val`.\n *\n * @param {String|Object} key\n * @param {Mixed} value\n * @return {Mixed}\n * @api public\n */\n\nfunction store(key, value){\n  var length = arguments.length;\n  if (0 == length) return all();\n  if (2 <= length) return set(key, value);\n  if (1 != length) return;\n  if (null == key) return storage.clear();\n  if ('string' == typeof key) return get(key);\n  if ('object' == typeof key) return each(key, set);\n}\n\n/**\n * supported flag.\n */\n\nstore.supported = !! storage;\n\n/**\n * Set `key` to `val`.\n *\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction set(key, val){\n  return null == val\n    ? storage.removeItem(key)\n    : storage.setItem(key, JSON.stringify(val));\n}\n\n/**\n * Get `key`.\n *\n * @param {String} key\n * @return {Mixed}\n */\n\nfunction get(key){\n  return unserialize(storage.getItem(key));\n}\n\n/**\n * Get all.\n *\n * @return {Object}\n */\n\nfunction all(){\n  var len = storage.length;\n  var ret = {};\n  var key;\n\n  while (0 <= --len) {\n    key = storage.key(len);\n    ret[key] = get(key);\n  }\n\n  return ret;\n}\n\n}, {\"unserialize\":214,\"each\":177}],\n214: [function(require, module, exports) {\n\n/**\n * Unserialize the given \"stringified\" javascript.\n * \n * @param {String} val\n * @return {Mixed}\n */\n\nmodule.exports = function(val){\n  try {\n    return JSON.parse(val);\n  } catch (e) {\n    return val || undefined;\n  }\n};\n\n}, {}],\n211: [function(require, module, exports) {\n\n/**\n * Convenience alias\n */\n\nvar define = Object.defineProperty;\n\n\n/**\n *  The base protocol\n */\n\nvar initialProtocol = window.location.protocol;\n\n/**\n * Fallback mocked protocol in case Object.defineProperty doesn't exist.\n */\n\nvar mockedProtocol;\n\n\nmodule.exports = function (protocol) {\n  if (arguments.length === 0) return get();\n  else return set(protocol);\n};\n\n\n/**\n * Sets the protocol to be http:\n */\n\nmodule.exports.http = function () {\n  set('http:');\n};\n\n\n/**\n * Sets the protocol to be https:\n */\n\nmodule.exports.https = function () {\n  set('https:');\n};\n\n\n/**\n * Reset to the initial protocol.\n */\n\nmodule.exports.reset = function () {\n  set(initialProtocol);\n};\n\n\n/**\n * Gets the current protocol, using the fallback and then the native protocol.\n *\n * @return {String} protocol\n */\n\nfunction get () {\n  return mockedProtocol || window.location.protocol;\n}\n\n\n/**\n * Sets the protocol\n *\n * @param {String} protocol\n */\n\nfunction set (protocol) {\n  try {\n    define(window.location, 'protocol', {\n      get: function () { return protocol; }\n    });\n  } catch (err) {\n    mockedProtocol = protocol;\n  }\n}\n\n}, {}],\n212: [function(require, module, exports) {\n/**\n * Module dependencies.\n */\n\nvar encode = require('base64-encode');\nvar cors = require('has-cors');\nvar jsonp = require('jsonp');\nvar JSON = require('json');\n\n/**\n * Expose `send`\n */\n\nexports = module.exports = cors\n  ? json\n  : base64;\n\n/**\n * Expose `callback`\n */\n\nexports.callback = 'callback';\n\n/**\n * Expose `prefix`\n */\n\nexports.prefix = 'data';\n\n/**\n * Expose `json`.\n */\n\nexports.json = json;\n\n/**\n * Expose `base64`.\n */\n\nexports.base64 = base64;\n\n/**\n * Expose `type`\n */\n\nexports.type = cors\n  ? 'xhr'\n  : 'jsonp';\n\n/**\n * Send the given `obj` to `url` with `fn(err, req)`.\n *\n * @param {String} url\n * @param {Object} obj\n * @param {Object} headers\n * @param {Function} fn\n * @api private\n */\n\nfunction json(url, obj, headers, fn){\n  if (3 == arguments.length) fn = headers, headers = {};\n\n  var req = new XMLHttpRequest;\n  req.onerror = fn;\n  req.onreadystatechange = done;\n  req.open('POST', url, true);\n  for (var k in headers) req.setRequestHeader(k, headers[k]);\n  req.send(JSON.stringify(obj));\n\n  function done(){\n    if (4 == req.readyState) return fn(null, req);\n  }\n}\n\n/**\n * Send the given `obj` to `url` with `fn(err, req)`.\n *\n * @param {String} url\n * @param {Object} obj\n * @param {Function} fn\n * @api private\n */\n\nfunction base64(url, obj, _, fn){\n  if (3 == arguments.length) fn = _;\n  var prefix = exports.prefix;\n  obj = encode(JSON.stringify(obj));\n  obj = encodeURIComponent(obj);\n  url += '?' + prefix + '=' + obj;\n  jsonp(url, { param: exports.callback }, function(err, obj){\n    if (err) return fn(err);\n    fn(null, {\n      url: url,\n      body: obj\n    });\n  });\n}\n\n}, {\"base64-encode\":215,\"has-cors\":216,\"jsonp\":217,\"json\":59}],\n215: [function(require, module, exports) {\nvar utf8Encode = require('utf8-encode');\nvar keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nmodule.exports = encode;\nfunction encode(input) {\n    var output = \"\";\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    var i = 0;\n\n    input = utf8Encode(input);\n\n    while (i < input.length) {\n\n        chr1 = input.charCodeAt(i++);\n        chr2 = input.charCodeAt(i++);\n        chr3 = input.charCodeAt(i++);\n\n        enc1 = chr1 >> 2;\n        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n        enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n            enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n            enc4 = 64;\n        }\n\n        output = output +\n            keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n            keyStr.charAt(enc3) + keyStr.charAt(enc4);\n\n    }\n\n    return output;\n}\n}, {\"utf8-encode\":218}],\n218: [function(require, module, exports) {\nmodule.exports = encode;\n\nfunction encode(string) {\n    string = string.replace(/\\r\\n/g, \"\\n\");\n    var utftext = \"\";\n\n    for (var n = 0; n < string.length; n++) {\n\n        var c = string.charCodeAt(n);\n\n        if (c < 128) {\n            utftext += String.fromCharCode(c);\n        }\n        else if ((c > 127) && (c < 2048)) {\n            utftext += String.fromCharCode((c >> 6) | 192);\n            utftext += String.fromCharCode((c & 63) | 128);\n        }\n        else {\n            utftext += String.fromCharCode((c >> 12) | 224);\n            utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n            utftext += String.fromCharCode((c & 63) | 128);\n        }\n\n    }\n\n    return utftext;\n}\n}, {}],\n216: [function(require, module, exports) {\n\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n\n}, {}],\n217: [function(require, module, exports) {\n/**\n * Module dependencies\n */\n\nvar debug = require('debug')('jsonp');\n\n/**\n * Module exports.\n */\n\nmodule.exports = jsonp;\n\n/**\n * Callback index.\n */\n\nvar count = 0;\n\n/**\n * Noop function.\n */\n\nfunction noop(){}\n\n/**\n * JSONP handler\n *\n * Options:\n *  - param {String} qs parameter (`callback`)\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\n *\n * @param {String} url\n * @param {Object|Function} optional options / callback\n * @param {Function} optional callback\n */\n\nfunction jsonp(url, opts, fn){\n  if ('function' == typeof opts) {\n    fn = opts;\n    opts = {};\n  }\n  if (!opts) opts = {};\n\n  var prefix = opts.prefix || '__jp';\n  var param = opts.param || 'callback';\n  var timeout = null != opts.timeout ? opts.timeout : 60000;\n  var enc = encodeURIComponent;\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script;\n  var timer;\n\n  // generate a unique id for this request\n  var id = prefix + (count++);\n\n  if (timeout) {\n    timer = setTimeout(function(){\n      cleanup();\n      if (fn) fn(new Error('Timeout'));\n    }, timeout);\n  }\n\n  function cleanup(){\n    script.parentNode.removeChild(script);\n    window[id] = noop;\n  }\n\n  window[id] = function(data){\n    debug('jsonp got', data);\n    if (timer) clearTimeout(timer);\n    cleanup();\n    if (fn) fn(null, data);\n  };\n\n  // add qs component\n  url += (~url.indexOf('?') ? '&' : '?') + param + '=' + enc(id);\n  url = url.replace('?&', '?');\n\n  debug('jsonp req \"%s\"', url);\n\n  // create script\n  script = document.createElement('script');\n  script.src = url;\n  target.parentNode.insertBefore(script, target);\n}\n\n}, {\"debug\":15}],\n213: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar parse = require('querystring').parse;\n\n/**\n * Expose `utm`\n */\n\nmodule.exports = utm;\n\n/**\n * Get all utm params from the given `querystring`\n *\n * @param {String} query\n * @return {Object}\n * @api private\n */\n\nfunction utm(query){\n  if ('?' == query.charAt(0)) query = query.substring(1);\n  var query = query.replace(/\\?/g, '&');\n  var params = parse(query);\n  var param;\n  var ret = {};\n\n  for (var key in params) {\n    if (~key.indexOf('utm_')) {\n      param = key.substr(4);\n      if ('campaign' == param) param = 'name';\n      ret[param] = params[key];\n    }\n  }\n\n  return ret;\n}\n\n}, {\"querystring\":27}],\n150: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar is = require('is');\n\n/**\n * Expose `Sentry` integration.\n */\n\nvar Sentry = module.exports = integration('Sentry')\n  .global('Raven')\n  .global('RavenConfig')\n  .option('config', '')\n  .tag('<script src=\"//cdn.ravenjs.com/1.1.16/native/raven.min.js\">');\n\n/**\n * Initialize.\n *\n * http://raven-js.readthedocs.org/en/latest/config/index.html\n * https://github.com/getsentry/raven-js/blob/1.1.16/src/raven.js#L734-L741\n *\n * @api public\n */\n\nSentry.prototype.initialize = function() {\n  var dsn = this.options.config;\n  window.RavenConfig = { dsn: dsn };\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nSentry.prototype.loaded = function() {\n  return is.object(window.Raven);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nSentry.prototype.identify = function(identify) {\n  window.Raven.setUser(identify.traits());\n};\n\n}, {\"analytics.js-integration\":166,\"is\":18}],\n151: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar tick = require('next-tick');\n\n/**\n * Expose `SnapEngage` integration.\n */\n\nvar SnapEngage = module.exports = integration('SnapEngage')\n  .assumesPageview()\n  .global('SnapABug')\n  .global('SnapEngage')\n  .option('apiKey', '')\n  .option('listen', false)\n  .tag('<script src=\"//www.snapengage.com/cdn/js/{{ apiKey }}.js\">');\n\n/**\n * Integration object for root events.\n */\n\nvar integrationContext = {\n  name: 'snapengage',\n  version: '1.0.0'\n};\n\n/**\n * Initialize.\n *\n * http://help.snapengage.com/installation-guide-getting-started-in-a-snap/\n *\n * @api public\n */\n\nSnapEngage.prototype.initialize = function() {\n  var self = this;\n  this.load(function() {\n    if (self.options.listen) self.attachListeners();\n    tick(self.ready);\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nSnapEngage.prototype.loaded = function() {\n  return is.object(window.SnapABug) && is.object(window.SnapEngage);\n};\n\n/**\n * Identify.\n *\n * @api private\n * @param {Identify} identify\n */\n\nSnapEngage.prototype.identify = function(identify) {\n  var email = identify.email();\n  if (!email) return;\n  window.SnapABug.setUserEmail(email);\n};\n\n/**\n * Listen for events.\n *\n * https://developer.snapengage.com/javascript-api/setcallback/\n *\n * @api private\n */\n\nSnapEngage.prototype.attachListeners = function() {\n  var self = this;\n\n  // Callback is passed `email, message, type`\n  // TODO: Eventually this might pass information about the chat to Segment\n  window.SnapEngage.setCallback('StartChat', function() {\n    self.analytics.track('Live Chat Conversation Started',\n      {},\n      { context: { integration: integrationContext } });\n  });\n\n  // Callback is passed `agent, message`\n  // TODO: Eventually this might pass information about the message to Segment\n  window.SnapEngage.setCallback('ChatMessageReceived', function(agent) {\n    self.analytics.track('Live Chat Message Received',\n      { agentUsername: agent },\n      { context: { integration: integrationContext } });\n  });\n\n  // Callback is passed `message`\n  // TODO: Eventually this might pass information about the message to Segment\n  window.SnapEngage.setCallback('ChatMessageSent', function() {\n    self.analytics.track('Live Chat Message Sent',\n      {},\n      { context: { integration: integrationContext } });\n  });\n\n  // Callback is passed `type, status`\n  // TODO: Eventually this might pass information about the status to Segment\n  window.SnapEngage.setCallback('Close', function() {\n    self.analytics.track('Live Chat Conversation Ended',\n      {},\n      { context: { integration: integrationContext } });\n  });\n};\n\n}, {\"analytics.js-integration\":166,\"is\":18,\"next-tick\":57}],\n152: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('bind');\nvar integration = require('analytics.js-integration');\nvar when = require('when');\n\n/**\n * Expose `Spinnakr` integration.\n */\n\nvar Spinnakr = module.exports = integration('Spinnakr')\n  .assumesPageview()\n  .global('_spinnakr_site_id')\n  .global('_spinnakr')\n  .option('siteId', '')\n  .tag('<script src=\"//d3ojzyhbolvoi5.cloudfront.net/js/so.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nSpinnakr.prototype.initialize = function() {\n  window._spinnakr_site_id = this.options.siteId;\n  var loaded = bind(this, this.loaded);\n  var ready = this.ready;\n  this.load(function() {\n    when(loaded, ready);\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nSpinnakr.prototype.loaded = function() {\n  return !!window._spinnakr;\n};\n\n}, {\"bind\":55,\"analytics.js-integration\":166,\"when\":198}],\n153: [function(require, module, exports) {\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `SupportHero` integration.\n */\n\nvar SupportHero = module.exports = integration('SupportHero')\n  .assumesPageview()\n  .global('supportHeroWidget')\n  .option('token', '')\n  .option('track', false)\n  .tag('<script src=\"https://d29l98y0pmei9d.cloudfront.net/js/widget.min.js?k={{ token }}\">');\n\n/**\n * Initialize Support Hero.\n *\n * @api public\n */\n\nSupportHero.prototype.initialize = function() {\n  window.supportHeroWidget = {};\n  window.supportHeroWidget.setUserId = window.supportHeroWidget.setUserId || function() {};\n  window.supportHeroWidget.setUserTraits = window.supportHeroWidget.setUserTraits || function() {};\n  this.load(this.ready);\n};\n\n/**\n * Has the Support Hero library been loaded yet?\n *\n * @api private\n * @return {boolean}\n */\n\nSupportHero.prototype.loaded = function() {\n  return !!window.supportHeroWidget;\n};\n\n/**\n * Identify a user.\n *\n * @api public\n * @param {Facade} identify\n */\n\nSupportHero.prototype.identify = function(identify) {\n  var id = identify.userId();\n  var traits = identify.traits();\n  if (id) {\n    window.supportHeroWidget.setUserId(id);\n  }\n  if (traits) {\n    window.supportHeroWidget.setUserTraits(traits);\n  }\n};\n\n}, {\"analytics.js-integration\":166}],\n154: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar is = require('is');\nvar keys = require('keys');\nvar push = require('global-queue')('_tlq');\n\n/**\n * Expose `Taplytics` integration.\n */\n\nvar Taplytics = module.exports = integration('Taplytics')\n  .global('_tlq')\n  .global('Taplytics')\n  .option('token', '')\n  .option('options', {})\n  .tag('<script id=\"taplytics\" src=\"//cdn.taplytics.com/taplytics.min.js\">')\n  .assumesPageview();\n\n/**\n * Initialize Taplytics.\n *\n * @api public\n */\n\nTaplytics.prototype.initialize = function() {\n  var options = this.options.options;\n  var token = this.options.token;\n\n  window._tlq = window._tlq || [];\n\n  push('init', token, options);\n\n  this.load(this.ready);\n};\n\n/**\n * Has the Taplytics library been loaded yet?\n *\n * @api private\n * @return {boolean}\n */\n\nTaplytics.prototype.loaded = function() {\n  return window.Taplytics && is.object(window.Taplytics._in);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Facade} identify\n */\n\nTaplytics.prototype.identify = function(identify) {\n  var userId = identify.userId();\n  var attrs = identify.traits() || {};\n\n  if (userId) attrs.id = userId;\n\n  if (keys(attrs).length) {\n    push('identify', attrs);\n  }\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Facade} group\n */\n\nTaplytics.prototype.group = function(group) {\n  var attrs = {};\n  var groupId = group.groupId();\n  var traits = group.traits();\n  var user = this.analytics.user();\n  var userId = user.id();\n\n  if (groupId) attrs.groupId = groupId;\n  if (traits) attrs.groupTraits = traits;\n  if (userId) attrs.id = userId;\n\n  if (keys(attrs).length) push('identify', attrs);\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Facade} track\n */\n\nTaplytics.prototype.track = function(track) {\n  var properties = track.properties() || {};\n  var total = track.revenue() || track.total() || 0;\n\n  push('track', track.event(), total, properties);\n};\n\n/**\n* Page.\n*\n* @api public\n* @param {Facade} page\n*/\n\nTaplytics.prototype.page = function(page) {\n  var category = page.category() || undefined;\n  var name = page.fullName() || undefined;\n  var properties = page.properties() || {};\n\n  push('page', category, name, properties);\n};\n\n/**\n* Reset a user and log them out.\n*\n* @api private\n*/\n\nTaplytics.prototype.reset = function() {\n  push('reset');\n};\n\n}, {\"analytics.js-integration\":166,\"is\":18,\"keys\":73,\"global-queue\":196}],\n155: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_tsq');\nvar slug = require('slug');\n\n/**\n * Expose `Tapstream` integration.\n */\n\nvar Tapstream = module.exports = integration('Tapstream')\n  .assumesPageview()\n  .global('_tsq')\n  .option('accountName', '')\n  .option('trackAllPages', true)\n  .option('trackNamedPages', true)\n  .option('trackCategorizedPages', true)\n  .tag('<script src=\"//cdn.tapstream.com/static/js/tapstream.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nTapstream.prototype.initialize = function() {\n  window._tsq = window._tsq || [];\n  push('setAccountName', this.options.accountName);\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nTapstream.prototype.loaded = function() {\n  return !!(window._tsq && window._tsq.push !== Array.prototype.push);\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nTapstream.prototype.page = function(page) {\n  var category = page.category();\n  var opts = this.options;\n  var name = page.fullName();\n\n  // all pages\n  if (opts.trackAllPages) {\n    this.track(page.track());\n  }\n\n  // named pages\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n\n  // categorized pages\n  if (category && opts.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nTapstream.prototype.track = function(track) {\n  var props = track.properties();\n  // needs events as slugs\n  push('fireHit', slug(track.event()), [props.url]);\n};\n\n}, {\"analytics.js-integration\":166,\"global-queue\":196,\"slug\":172}],\n156: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar alias = require('alias');\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `Trakio` integration.\n */\n\nvar Trakio = module.exports = integration('trak.io')\n  .assumesPageview()\n  .global('trak')\n  .option('token', '')\n  .option('trackNamedPages', true)\n  .option('trackCategorizedPages', true)\n  .tag('<script src=\"//d29p64779x43zo.cloudfront.net/v1/trak.io.min.js\">');\n\n/**\n * Options aliases.\n */\n\nvar optionsAliases = {\n  initialPageview: 'auto_track_page_view'\n};\n\n/**\n * Initialize.\n *\n * https://docs.trak.io\n *\n * @api public\n */\n\nTrakio.prototype.initialize = function() {\n  var options = this.options;\n  window.trak = window.trak || [];\n  window.trak.io = window.trak.io || {};\n  window.trak.push = window.trak.push || function() {};\n  /* eslint-disable */\n  window.trak.io.load = window.trak.io.load || function(e){var r = function(e){return function(){window.trak.push([e].concat(Array.prototype.slice.call(arguments,0))); }; } ,i=[\"initialize\",\"identify\",\"track\",\"alias\",\"channel\",\"source\",\"host\",\"protocol\",\"page_view\"]; for (var s=0;s<i.length;s++) window.trak.io[i[s]]=r(i[s]); window.trak.io.initialize.apply(window.trak.io,arguments); };\n  /* eslint-enable */\n  window.trak.io.load(options.token, alias(options, optionsAliases));\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nTrakio.prototype.loaded = function() {\n  return !!(window.trak && window.trak.loaded);\n};\n\n/**\n * Page.\n *\n * @param {Page} page\n */\n\nTrakio.prototype.page = function(page) {\n  var category = page.category();\n  var props = page.properties();\n  var name = page.fullName();\n\n  window.trak.io.page_view(props.path, name || props.title);\n\n  if (category) window.trak.io.channel('category');\n\n  // named pages\n  if (name && this.options.trackNamedPages) {\n    this.track(page.track(name));\n  }\n\n  // categorized pages\n  if (category && this.options.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n};\n\n/**\n * Trait aliases.\n *\n * http://docs.trak.io/properties.html#special\n */\n\nvar traitAliases = {\n  avatar: 'avatar_url',\n  firstName: 'first_name',\n  lastName: 'last_name'\n};\n\n/**\n * Identify.\n *\n * @param {Identify} identify\n */\n\nTrakio.prototype.identify = function(identify) {\n  var traits = identify.traits(traitAliases);\n  var id = identify.userId();\n\n  if (id) {\n    window.trak.io.identify(id, traits);\n  } else {\n    window.trak.io.identify(traits);\n  }\n};\n\n/**\n * Group.\n *\n * @param {String} id (optional)\n * @param {Object} properties (optional)\n * @param {Object} options (optional)\n *\n * TODO: add group\n * TODO: add `trait.company/organization` from trak.io docs http://docs.trak.io/properties.html#special\n */\n\n/**\n * Track.\n *\n * @param {Track} track\n */\n\nTrakio.prototype.track = function(track) {\n  var properties = track.properties();\n  var channel = track.proxy('properties.channel');\n  if (channel) {\n    delete properties.channel;\n    window.trak.io.track(track.event(), channel, properties);\n  } else {\n    window.trak.io.track(track.event(), properties);\n  }\n};\n\n/**\n * Alias.\n *\n * @param {Alias} alias\n */\n\nTrakio.prototype.alias = function(alias) {\n  if (!window.trak.io.distinct_id) return;\n  var from = alias.from();\n  var to = alias.to();\n\n  if (to === window.trak.io.distinct_id()) return;\n\n  if (from) {\n    window.trak.io.alias(from, to);\n  } else {\n    window.trak.io.alias(to);\n  }\n};\n\n}, {\"alias\":199,\"analytics.js-integration\":166}],\n157: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose `TwitterAds`.\n */\n\nvar TwitterAds = module.exports = integration('Twitter Ads')\n  .option('page', '')\n  .tag('<img src=\"//analytics.twitter.com/i/adsct?txn_id={{ pixelId }}&p_id=Twitter\"/>')\n  .mapping('events');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nTwitterAds.prototype.initialize = function() {\n  this.ready();\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nTwitterAds.prototype.page = function() {\n  if (this.options.page) {\n    this.load({ pixelId: this.options.page });\n  }\n};\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\nTwitterAds.prototype.track = function(track) {\n  var events = this.events(track.event());\n  var self = this;\n  each(events, function(pixelId) {\n    self.load({ pixelId: pixelId });\n  });\n};\n\n}, {\"each\":4,\"analytics.js-integration\":166}],\n158: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar Identify = require('facade').Identify;\nvar clone = require('clone');\nvar integration = require('analytics.js-integration');\n\n/**\n * Expose Userlike integration.\n */\n\nvar Userlike = module.exports = integration('Userlike')\n  .assumesPageview()\n  .global('segment_base_info')\n  .global('userlikeConfig')\n  .global('userlikeData')\n  .option('secretKey', '')\n  .option('listen', false)\n  .tag('<script src=\"//userlike-cdn-widgets.s3-eu-west-1.amazonaws.com/{{ secretKey }}.js\">');\n\n/**\n * The context for this integration.\n */\n\nvar integrationContext = {\n  name: 'userlike',\n  version: '1.0.0'\n};\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nUserlike.prototype.initialize = function() {\n  var self = this;\n  var user = this.analytics.user();\n  var identify = new Identify({\n    userId: user.id(),\n    traits: user.traits()\n  });\n\n  // FIXME: Should this be a global? Waiting for answer from Userlike folks as\n  // of 5/19/2015\n  //\n  // https://github.com/thomassittig/analytics.js-integrations/commit/e8fb4c067abe7f8549d0e0153504fd24a9aa4b53\n  segment_base_info = clone(this.options);\n\n  segment_base_info.visitor = {\n    name: identify.name(),\n    email: identify.email()\n  };\n\n  if (!window.userlikeData) window.userlikeData = { custom: {} };\n  window.userlikeData.custom.segmentio = segment_base_info;\n\n  this.load(function() {\n    if (self.options.listen) self.attachListeners();\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @return {Boolean}\n */\n\nUserlike.prototype.loaded = function() {\n  return !!(window.userlikeConfig && window.userlikeData);\n};\n\n/**\n * Listen for chat events.\n *\n * TODO: As of 4/17/2015, Userlike doesn't give access to the message body in events.\n * Revisit this/send it when they do.\n */\n\nUserlike.prototype.attachListeners = function() {\n  var self = this;\n  window.userlikeTrackingEvent = function(eventName, globalCtx, sessionCtx) {\n    if (eventName === 'chat_started') {\n      self.analytics.track(\n        'Live Chat Conversation Started',\n        { agentId: sessionCtx.operator_id, agentName: sessionCtx.operator_name },\n        { context: { integration: integrationContext }\n      });\n    }\n    if (eventName === 'message_operator_terminating') {\n      self.analytics.track(\n        'Live Chat Message Sent',\n        { agentId: sessionCtx.operator_id, agentName: sessionCtx.operator_name },\n        { context: { integration: integrationContext }\n      });\n    }\n    if (eventName === 'message_client_terminating') {\n      self.analytics.track(\n        'Live Chat Message Received',\n        { agentId: sessionCtx.operator_id, agentName: sessionCtx.operator_name },\n        { context: { integration: integrationContext }\n      });\n    }\n    if (eventName === 'chat_quit') {\n      self.analytics.track(\n        'Live Chat Conversation Ended',\n        { agentId: sessionCtx.operator_id, agentName: sessionCtx.operator_name },\n        { context: { integration: integrationContext }\n      });\n    }\n  };\n};\n\n}, {\"facade\":9,\"clone\":13,\"analytics.js-integration\":166}],\n159: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar alias = require('alias');\nvar convertDates = require('convert-dates');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('UserVoice');\nvar unix = require('to-unix-timestamp');\n\n/**\n * Expose `UserVoice` integration.\n */\n\nvar UserVoice = module.exports = integration('UserVoice')\n  .assumesPageview()\n  .global('UserVoice')\n  .global('showClassicWidget')\n  .option('apiKey', '')\n  .option('classic', false)\n  .option('forumId', null)\n  .option('showWidget', true)\n  .option('mode', 'contact')\n  .option('accentColor', '#448dd6')\n  .option('screenshotEnabled', true)\n  .option('smartvote', true)\n  .option('trigger', null)\n  .option('triggerPosition', 'bottom-right')\n  .option('triggerColor', '#ffffff')\n  .option('triggerBackgroundColor', 'rgba(46, 49, 51, 0.6)')\n  // BACKWARD COMPATIBILITY: classic options\n  .option('classicMode', 'full')\n  .option('primaryColor', '#cc6d00')\n  .option('linkColor', '#007dbf')\n  .option('defaultMode', 'support')\n  .option('tabLabel', 'Feedback & Support')\n  .option('tabColor', '#cc6d00')\n  .option('tabPosition', 'middle-right')\n  .option('tabInverted', false)\n  .option('customTicketFields', {})\n  .tag('<script src=\"//widget.uservoice.com/{{ apiKey }}.js\">');\n\n/**\n * When in \"classic\" mode, on `construct` swap all of the method to point to\n * their classic counterparts.\n *\n * @api private\n */\n\nUserVoice.on('construct', function(integration) {\n  if (!integration.options.classic) return;\n  integration.group = undefined;\n  integration.identify = integration.identifyClassic;\n  integration.initialize = integration.initializeClassic;\n});\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nUserVoice.prototype.initialize = function() {\n  var options = this.options;\n  var opts = formatOptions(options);\n  push('set', opts);\n  push('autoprompt', {});\n\n  if (options.showWidget) {\n    if (options.trigger) {\n      push('addTrigger', options.trigger, opts);\n    } else {\n      push('addTrigger', opts);\n    }\n  }\n\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nUserVoice.prototype.loaded = function() {\n  return !!(window.UserVoice && window.UserVoice.push !== Array.prototype.push);\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nUserVoice.prototype.identify = function(identify) {\n  var traits = identify.traits({ created: 'created_at' });\n  traits = convertDates(traits, unix);\n  push('identify', traits);\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Group} group\n */\n\nUserVoice.prototype.group = function(group) {\n  var traits = group.traits({ created: 'created_at' });\n  traits = convertDates(traits, unix);\n  push('identify', { account: traits });\n};\n\n/**\n * Initialize (classic).\n *\n * @api private\n */\n\nUserVoice.prototype.initializeClassic = function() {\n  var options = this.options;\n  // part of public api\n  window.showClassicWidget = showClassicWidget;\n  if (options.showWidget) showClassicWidget('showTab', formatClassicOptions(options));\n  this.load(this.ready);\n};\n\n/**\n * Identify (classic).\n *\n * @api private\n * @param {Identify} identify\n */\n\nUserVoice.prototype.identifyClassic = function(identify) {\n  push('setCustomFields', identify.traits());\n};\n\n/**\n * Format the options for UserVoice.\n *\n * @api private\n * @param {Object} options\n * @return {Object}\n */\n\nfunction formatOptions(options) {\n  return alias(options, {\n    forumId: 'forum_id',\n    accentColor: 'accent_color',\n    smartvote: 'smartvote_enabled',\n    triggerColor: 'trigger_color',\n    triggerBackgroundColor: 'trigger_background_color',\n    triggerPosition: 'trigger_position',\n    screenshotEnabled: 'screenshot_enabled',\n    customTicketFields: 'ticket_custom_fields'\n  });\n}\n\n/**\n * Format the classic options for UserVoice.\n *\n * @api private\n * @param {Object} options\n * @return {Object}\n */\n\nfunction formatClassicOptions(options) {\n  return alias(options, {\n    forumId: 'forum_id',\n    classicMode: 'mode',\n    primaryColor: 'primary_color',\n    tabPosition: 'tab_position',\n    tabColor: 'tab_color',\n    linkColor: 'link_color',\n    defaultMode: 'default_mode',\n    tabLabel: 'tab_label',\n    tabInverted: 'tab_inverted'\n  });\n}\n\n/**\n * Show the classic version of the UserVoice widget. This method is usually part\n * of UserVoice classic's public API.\n *\n * @api private\n * @param {String} type ('showTab' or 'showLightbox')\n * @param {Object} options (optional)\n */\n\nfunction showClassicWidget(type, options) {\n  type = type || 'showLightbox';\n  push(type, 'classic_widget', options);\n}\n\n}, {\"alias\":199,\"convert-dates\":200,\"analytics.js-integration\":166,\"global-queue\":196,\"to-unix-timestamp\":219}],\n219: [function(require, module, exports) {\n\n/**\n * Expose `toUnixTimestamp`.\n */\n\nmodule.exports = toUnixTimestamp;\n\n\n/**\n * Convert a `date` into a Unix timestamp.\n *\n * @param {Date}\n * @return {Number}\n */\n\nfunction toUnixTimestamp (date) {\n  return Math.floor(date.getTime() / 1000);\n}\n}, {}],\n160: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar cookie = require('component/cookie');\nvar integration = require('analytics.js-integration');\nvar push = require('global-queue')('_veroq');\n\n/**\n * Expose `Vero` integration.\n */\n\nvar Vero = module.exports = integration('Vero')\n  .global('_veroq')\n  .option('apiKey', '')\n  .tag('<script src=\"//d3qxef4rp70elm.cloudfront.net/m.js\">');\n\n/**\n * Initialize.\n *\n * https://github.com/getvero/vero-api/blob/master/sections/js.md\n *\n * @api public\n */\n\nVero.prototype.initialize = function() {\n  // clear default cookie so vero parses correctly.\n  // this is for the tests.\n  // basically, they have window.addEventListener('unload')\n  // which then saves their \"command_store\", which is an array.\n  // so we just want to create that initially so we can reload the tests.\n  if (!cookie('__veroc4')) cookie('__veroc4', '[]');\n  push('init', { api_key: this.options.apiKey });\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nVero.prototype.loaded = function() {\n  return !!(window._veroq && window._veroq.push !== Array.prototype.push);\n};\n\n/**\n * Page.\n *\n * https://www.getvero.com/knowledge-base#/questions/71768-Does-Vero-track-pageviews\n *\n * @api public\n * @param {Page} page\n */\n\nVero.prototype.page = function() {\n  push('trackPageview');\n};\n\n/**\n * Identify.\n *\n * https://www.getvero.com/api/http/#users\n * https://github.com/getvero/vero-api/blob/master/sections/js.md#user-identification\n *\n * @api public\n * @param {Identify} identify\n */\n\nVero.prototype.identify = function(identify) {\n  var traits = identify.traits();\n  var email = identify.email();\n  var id = identify.userId();\n  // Both userId and email address are required by Vero's API\n  if (!id || !email) return;\n  push('user', traits);\n};\n\n/**\n * Track.\n *\n * https://www.getvero.com/api/http/#actions\n * https://github.com/getvero/vero-api/blob/master/sections/js.md#tracking-events\n *\n * @api public\n * @param {Track} track\n */\n\nVero.prototype.track = function(track) {\n  var regex = /[uU]nsubscribe/;\n\n  if (track.event().match(regex)) {\n    push('unsubscribe', { id: track.properties().id });\n  } else {\n    push('track', track.event(), track.properties());\n  }\n};\n\n/**\n * Alias.\n *\n * https://www.getvero.com/api/http/#users\n * https://github.com/getvero/vero-api/blob/master/sections/api/users.md\n *\n * @api public\n * @param {Alias} alias\n */\n\nVero.prototype.alias = function(alias) {\n  var to = alias.to();\n\n  if (alias.from()) {\n    push('reidentify', to, alias.from());\n  } else {\n    push('reidentify', to);\n  }\n};\n\n}, {\"component/cookie\":58,\"analytics.js-integration\":166,\"global-queue\":196}],\n161: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar tick = require('next-tick');\n\n/**\n * Expose `VWO` integration.\n */\n\nvar VWO = module.exports = integration('Visual Website Optimizer')\n  .global('_vis_opt_queue')\n  .global('_vis_opt_revenue_conversion')\n  .global('_vwo_exp')\n  .global('_vwo_exp_ids')\n  .option('replay', true)\n  .option('listen', false);\n\n/**\n * The context for this integration.\n */\n\nvar integrationContext = {\n  name: 'visual-website-optimizer',\n  version: '1.0.0'\n};\n\n/**\n * Initialize.\n *\n * http://v2.visualwebsiteoptimizer.com/tools/get_tracking_code.php\n */\n\nVWO.prototype.initialize = function() {\n  var self = this;\n  if (this.options.replay) {\n    tick(function() {\n      self.replay();\n    });\n  }\n  if (this.options.listen) {\n    tick(function() {\n      self.roots();\n    });\n  }\n  this.ready();\n};\n\n/**\n * Completed Purchase.\n *\n * https://vwo.com/knowledge/vwo-revenue-tracking-goal\n */\n\nVWO.prototype.completedOrder = function(track) {\n  var total = track.total() || track.revenue() || 0;\n  enqueue(function() {\n    window._vis_opt_revenue_conversion(total);\n  });\n};\n\n/**\n * Replay the experiments the user has seen as traits to all other integrations.\n * Wait for the next tick to replay so that the `analytics` object and all of\n * the integrations are fully initialized.\n */\n\nVWO.prototype.replay = function() {\n  var analytics = this.analytics;\n\n  experiments(function(err, traits) {\n    if (traits) analytics.identify(traits);\n  });\n};\n\n/**\n * Replay the experiments the user has seen as traits to all other integrations.\n * Wait for the next tick to replay so that the `analytics` object and all of\n * the integrations are fully initialized.\n */\n\nVWO.prototype.roots = function() {\n  var analytics = this.analytics;\n\n  rootExperiments(function(err, data) {\n    each(data, function(experimentId, variationName) {\n      analytics.track(\n        'Experiment Viewed',\n        {\n          experimentId: experimentId,\n          variationName: variationName\n        },\n        { context: { integration: integrationContext } }\n      );\n    });\n  });\n};\n\n/**\n * Get dictionary of experiment keys and variations.\n *\n * http://visualwebsiteoptimizer.com/knowledge/integration-of-vwo-with-kissmetrics/\n *\n * @param {Function} fn\n * @return {Object}\n */\n\nfunction rootExperiments(fn) {\n  enqueue(function() {\n    var data = {};\n    var experimentIds = window._vwo_exp_ids;\n    if (!experimentIds) return fn();\n    each(experimentIds, function(experimentId) {\n      var variationName = variation(experimentId);\n      if (variationName) data[experimentId] = variationName;\n    });\n    fn(null, data);\n  });\n}\n\n/**\n * Get dictionary of experiment keys and variations.\n *\n * http://visualwebsiteoptimizer.com/knowledge/integration-of-vwo-with-kissmetrics/\n *\n * @param {Function} fn\n * @return {Object}\n */\n\nfunction experiments(fn) {\n  enqueue(function() {\n    var data = {};\n    var ids = window._vwo_exp_ids;\n    if (!ids) return fn();\n    each(ids, function(id) {\n      var name = variation(id);\n      if (name) data['Experiment: ' + id] = name;\n    });\n    fn(null, data);\n  });\n}\n\n/**\n * Add a `fn` to the VWO queue, creating one if it doesn't exist.\n *\n * @param {Function} fn\n */\n\nfunction enqueue(fn) {\n  window._vis_opt_queue = window._vis_opt_queue || [];\n  window._vis_opt_queue.push(fn);\n}\n\n/**\n * Get the chosen variation's name from an experiment `id`.\n *\n * http://visualwebsiteoptimizer.com/knowledge/integration-of-vwo-with-kissmetrics/\n *\n * @param {String} id\n * @return {String}\n */\n\nfunction variation(id) {\n  var experiments = window._vwo_exp;\n  if (!experiments) return null;\n  var experiment = experiments[id];\n  var variationId = experiment.combination_chosen;\n  return variationId ? experiment.comb_n[variationId] : null;\n}\n\n}, {\"each\":4,\"analytics.js-integration\":166,\"next-tick\":57}],\n162: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar useHttps = require('use-https');\n\n/**\n * Expose `WebEngage` integration.\n */\n\nvar WebEngage = module.exports = integration('WebEngage')\n  .assumesPageview()\n  .global('_weq')\n  .global('webengage')\n  .option('widgetVersion', '4.0')\n  .option('licenseCode', '')\n  .tag('http', '<script src=\"http://cdn.widgets.webengage.com/js/widget/webengage-min-v-4.0.js\">')\n  .tag('https', '<script src=\"https://ssl.widgets.webengage.com/js/widget/webengage-min-v-4.0.js\">');\n\n/**\n * Initialize.\n *\n * @api public\n */\n\nWebEngage.prototype.initialize = function() {\n  var _weq = window._weq = window._weq || {};\n  _weq['webengage.licenseCode'] = this.options.licenseCode;\n  _weq['webengage.widgetVersion'] = this.options.widgetVersion;\n  var name = useHttps() ? 'https' : 'http';\n  this.load(name, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nWebEngage.prototype.loaded = function() {\n  return !!window.webengage;\n};\n\n}, {\"analytics.js-integration\":166,\"use-https\":168}],\n163: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar each = require('each');\nvar integration = require('analytics.js-integration');\nvar toSnakeCase = require('to-snake-case');\n\n/**\n * Expose `Woopra` integration.\n */\n\nvar Woopra = module.exports = integration('Woopra')\n  .global('woopra')\n  .option('domain', '')\n  .option('cookieName', 'wooTracker')\n  .option('cookieDomain', null)\n  .option('cookiePath', '/')\n  .option('ping', true)\n  .option('pingInterval', 12000)\n  .option('idleTimeout', 300000)\n  .option('downloadTracking', true)\n  .option('outgoingTracking', true)\n  .option('outgoingIgnoreSubdomain', true)\n  .option('downloadPause', 200)\n  .option('outgoingPause', 400)\n  .option('ignoreQueryUrl', true)\n  .option('hideCampaign', false)\n  .tag('<script src=\"//static.woopra.com/js/w.js\">');\n\n/**\n * Initialize.\n *\n * http://www.woopra.com/docs/setup/javascript-tracking/\n */\n\nWoopra.prototype.initialize = function() {\n  /* eslint-disable */\n  (function(){var i, s, z, w = window, d = document, a = arguments, q = 'script', f = ['config', 'track', 'identify', 'visit', 'push', 'call'], c = function(){var i, self = this; self._e = []; for (i = 0; i < f.length; i++){(function(f){self[f] = function(){self._e.push([f].concat(Array.prototype.slice.call(arguments, 0))); return self; }; })(f[i]); } }; w._w = w._w || {}; for (i = 0; i < a.length; i++){ w._w[a[i]] = w[a[i]] = w[a[i]] || new c(); } })('woopra');\n  /* eslint-enable */\n\n  this.load(this.ready);\n  each(this.options, function(key, value) {\n    key = toSnakeCase(key);\n    if (value == null) return;\n    if (value === '') return;\n    window.woopra.config(key, value);\n  });\n};\n\n/**\n * Loaded?\n *\n * @return {Boolean}\n */\n\nWoopra.prototype.loaded = function() {\n  return !!(window.woopra && window.woopra.loaded);\n};\n\n/**\n * Page.\n *\n * @param {String} category (optional)\n */\n\nWoopra.prototype.page = function(page) {\n  var props = page.properties();\n  var name = page.fullName();\n  if (name) props.title = name;\n  window.woopra.track('pv', props);\n};\n\n/**\n * Identify.\n *\n * @param {Identify} identify\n */\n\nWoopra.prototype.identify = function(identify) {\n  var traits = identify.traits();\n  if (identify.name()) traits.name = identify.name();\n  // `push` sends it off async\n  window.woopra.identify(traits).push();\n};\n\n/**\n * Track.\n *\n * @param {Track} track\n */\n\nWoopra.prototype.track = function(track) {\n  window.woopra.track(track.event(), track.properties());\n};\n\n}, {\"each\":4,\"analytics.js-integration\":166,\"to-snake-case\":167}],\n164: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar integration = require('analytics.js-integration');\nvar omit = require('omit');\n\n/**\n * Expose `Wootric` integration.\n */\n\nvar Wootric = module.exports = integration('Wootric')\n  .assumesPageview()\n  .option('accountToken', '')\n  .global('wootricSettings')\n  .global('wootric_survey_immediately')\n  .global('wootric')\n  .tag('library', '<script src=\"//d27j601g4x0gd5.cloudfront.net/segmentioSnippet.js\"></script>')\n  .tag('pixel', '<img src=\"//d8myem934l1zi.cloudfront.net/pixel.gif?account_token={{ accountToken }}&email={{ email }}&created_at={{ createdAt }}&url={{ url }}&random={{ cacheBuster }}\">');\n\n/**\n * Initialize Wootric.\n *\n * @api public\n */\n\nWootric.prototype.initialize = function() {\n  // We use this to keep track of the last page that Wootric has tracked to\n  // ensure we don't accidentally send a duplicate page call\n  this.lastPageTracked = null;\n  window.wootricSettings = window.wootricSettings || {};\n  window.wootricSettings.account_token = this.options.accountToken;\n\n  var self = this;\n  this.load('library', function() {\n    self.ready();\n  });\n};\n\n/**\n * Has the Wootric library been loaded yet?\n *\n * @api private\n * @return {boolean}\n */\n\nWootric.prototype.loaded = function() {\n  // We are always ready since we are just setting a global variable in initialize\n  return !!window.wootric;\n};\n\n/**\n * Identify a user.\n *\n * @api public\n * @param {Facade} identify\n */\n\nWootric.prototype.identify = function(identify) {\n  var traits = identify.traits();\n  var email = identify.email();\n  var createdAt = identify.created();\n  var language = traits.language;\n\n  if (createdAt && createdAt.getTime) window.wootricSettings.created_at = createdAt.getTime();\n  if (language) window.wootricSettings.language = language;\n  window.wootricSettings.email = email;\n  // Set the rest of the traits as properties\n  window.wootricSettings.properties = omit(['created', 'createdAt', 'email'], traits);\n\n  window.wootric('run');\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\nWootric.prototype.page = function(page) {\n  // Only track page if we haven't already tracked it\n  if (this.lastPageTracked === window.location) {\n    return;\n  }\n\n  // Set this page as the last page tracked\n  this.lastPageTracked = window.location;\n\n  var wootricSettings = window.wootricSettings;\n  this.load('pixel', {\n    accountToken: this.options.accountToken,\n    email: encodeURIComponent(wootricSettings.email),\n    createdAt: wootricSettings.created_at,\n    url: encodeURIComponent(page.url()),\n    cacheBuster: Math.random()\n  });\n};\n\n}, {\"analytics.js-integration\":166,\"omit\":205}],\n165: [function(require, module, exports) {\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('bind');\nvar integration = require('analytics.js-integration');\nvar tick = require('next-tick');\nvar when = require('when');\n\n/**\n * Expose `Yandex` integration.\n */\n\nvar Yandex = module.exports = integration('Yandex Metrica')\n  .assumesPageview()\n  .global('yandex_metrika_callbacks')\n  .global('Ya')\n  .option('counterId', null)\n  .option('clickmap', false)\n  .option('webvisor', false)\n  .tag('<script src=\"//mc.yandex.ru/metrika/watch.js\">');\n\n/**\n * Initialize.\n *\n * http://api.yandex.com/metrika/\n * https://metrica.yandex.com/22522351?step=2#tab=code\n *\n * @api public\n */\n\nYandex.prototype.initialize = function() {\n  var id = this.options.counterId;\n  var clickmap = this.options.clickmap;\n  var webvisor = this.options.webvisor;\n\n  push(function() {\n    window['yaCounter' + id] = new window.Ya.Metrika({\n      id: id,\n      clickmap: clickmap,\n      webvisor: webvisor\n    });\n  });\n\n  var loaded = bind(this, this.loaded);\n  var ready = this.ready;\n  this.load(function() {\n    when(loaded, function() {\n      tick(ready);\n    });\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nYandex.prototype.loaded = function() {\n  return !!(window.Ya && window.Ya.Metrika);\n};\n\n/**\n * Push a new callback on the global Yandex queue.\n *\n * @api private\n * @param {Function} callback\n */\n\nfunction push(callback) {\n  window.yandex_metrika_callbacks = window.yandex_metrika_callbacks || [];\n  window.yandex_metrika_callbacks.push(callback);\n}\n\n}, {\"bind\":55,\"analytics.js-integration\":166,\"next-tick\":57,\"when\":198}],\n5: [function(require, module, exports) {\nmodule.exports = {\n  \"name\": \"analytics\",\n  \"version\": \"2.11.0\",\n  \"main\": \"analytics.js\",\n  \"dependencies\": {},\n  \"devDependencies\": {}\n}\n;\n}, {}]}, {}, {\"1\":\"\"}));"
        },
        {
          "name": "analytics.min.js",
          "type": "blob",
          "size": 249.91796875,
          "content": "(function umd(require){if(typeof exports===\"object\"){module.exports=require(\"1\")}else if(typeof define===\"function\"&&(define.amd||define.cmd)){define(function(){return require(\"1\")})}else{this[\"analytics\"]=require(\"1\")}})(function outer(modules,cache,entries){var global=function(){return this}();function require(name){if(cache[name])return cache[name].exports;if(modules[name])return call(name,require);throw new Error('cannot find module \"'+name+'\"')}function call(id,require){var m=cache[id]={exports:{}};var mod=modules[id];var name=mod[2];var fn=mod[0];var threw=true;try{fn.call(m.exports,function(req){var dep=modules[id][1][req];return require(dep||req)},m,m.exports,outer,modules,cache,entries);threw=false}finally{if(threw){delete cache[id]}else if(name){cache[name]=cache[id]}}return cache[id].exports}for(var id in entries){if(entries[id]){global[entries[id]]=require(id)}else{require(id)}}require.duo=true;require.cache=cache;require.modules=modules;return require}({1:[function(require,module,exports){var analytics=require(\"segmentio/analytics.js-core\");var Integrations=require(\"./integrations\");var each=require(\"each\");module.exports=exports=analytics;analytics.require=require;exports.VERSION=require(\"../bower.json\").version;each(Integrations,function(name,Integration){analytics.use(Integration)})},{\"segmentio/analytics.js-core\":2,\"./integrations\":3,each:4,\"../bower.json\":5}],2:[function(require,module,exports){var Analytics=require(\"./analytics\");var analytics=module.exports=exports=new Analytics;analytics.require=require;exports.VERSION=require(\"../bower.json\").version},{\"./analytics\":6,\"../bower.json\":7}],6:[function(require,module,exports){var _analytics=window.analytics;var Emitter=require(\"emitter\");var Facade=require(\"facade\");var after=require(\"after\");var bind=require(\"bind\");var callback=require(\"callback\");var clone=require(\"clone\");var cookie=require(\"./cookie\");var debug=require(\"debug\");var defaults=require(\"defaults\");var each=require(\"each\");var group=require(\"./group\");var is=require(\"is\");var isMeta=require(\"is-meta\");var keys=require(\"object\").keys;var memory=require(\"./memory\");var normalize=require(\"./normalize\");var on=require(\"event\").bind;var pageDefaults=require(\"./pageDefaults\");var pick=require(\"pick\");var prevent=require(\"prevent\");var querystring=require(\"querystring\");var size=require(\"object\").length;var store=require(\"./store\");var user=require(\"./user\");var Alias=Facade.Alias;var Group=Facade.Group;var Identify=Facade.Identify;var Page=Facade.Page;var Track=Facade.Track;exports=module.exports=Analytics;exports.cookie=cookie;exports.store=store;exports.memory=memory;function Analytics(){this._options({});this.Integrations={};this._integrations={};this._readied=false;this._timeout=300;this._user=user;this.log=debug(\"analytics.js\");bind.all(this);var self=this;this.on(\"initialize\",function(settings,options){if(options.initialPageview)self.page();self._parseQuery()})}Emitter(Analytics.prototype);Analytics.prototype.use=function(plugin){plugin(this);return this};Analytics.prototype.addIntegration=function(Integration){var name=Integration.prototype.name;if(!name)throw new TypeError(\"attempted to add an invalid integration\");this.Integrations[name]=Integration;return this};Analytics.prototype.init=Analytics.prototype.initialize=function(settings,options){settings=settings||{};options=options||{};this._options(options);this._readied=false;var self=this;each(settings,function(name){var Integration=self.Integrations[name];if(!Integration)delete settings[name]});each(settings,function(name,opts){var Integration=self.Integrations[name];var integration=new Integration(clone(opts));self.log(\"initialize %o - %o\",name,opts);self.add(integration)});var integrations=this._integrations;user.load();group.load();var ready=after(size(integrations),function(){self._readied=true;self.emit(\"ready\")});each(integrations,function(name,integration){if(options.initialPageview&&integration.options.initialPageview===false){integration.page=after(2,integration.page)}integration.analytics=self;integration.once(\"ready\",ready);integration.initialize()});this.initialized=true;this.emit(\"initialize\",settings,options);return this};Analytics.prototype.setAnonymousId=function(id){this.user().anonymousId(id);return this};Analytics.prototype.add=function(integration){this._integrations[integration.name]=integration;return this};Analytics.prototype.identify=function(id,traits,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(traits))fn=traits,options=null,traits=null;if(is.object(id))options=traits,traits=id,id=user.id();user.identify(id,traits);var msg=this.normalize({options:options,traits:user.traits(),userId:user.id()});this._invoke(\"identify\",new Identify(msg));this.emit(\"identify\",id,traits,options);this._callback(fn);return this};Analytics.prototype.user=function(){return user};Analytics.prototype.group=function(id,traits,options,fn){if(!arguments.length)return group;if(is.fn(options))fn=options,options=null;if(is.fn(traits))fn=traits,options=null,traits=null;if(is.object(id))options=traits,traits=id,id=group.id();group.identify(id,traits);var msg=this.normalize({options:options,traits:group.traits(),groupId:group.id()});this._invoke(\"group\",new Group(msg));this.emit(\"group\",id,traits,options);this._callback(fn);return this};Analytics.prototype.track=function(event,properties,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(properties))fn=properties,options=null,properties=null;var plan=this.options.plan||{};var events=plan.track||{};var msg=this.normalize({properties:properties,options:options,event:event});plan=events[event];if(plan){this.log(\"plan %o - %o\",event,plan);if(plan.enabled===false)return this._callback(fn);defaults(msg.integrations,plan.integrations||{})}this._invoke(\"track\",new Track(msg));this.emit(\"track\",event,properties,options);this._callback(fn);return this};Analytics.prototype.trackClick=Analytics.prototype.trackLink=function(links,event,properties){if(!links)return this;if(is.element(links))links=[links];var self=this;each(links,function(el){if(!is.element(el))throw new TypeError(\"Must pass HTMLElement to `analytics.trackLink`.\");on(el,\"click\",function(e){var ev=is.fn(event)?event(el):event;var props=is.fn(properties)?properties(el):properties;var href=el.getAttribute(\"href\")||el.getAttributeNS(\"http://www.w3.org/1999/xlink\",\"href\")||el.getAttribute(\"xlink:href\");self.track(ev,props);if(href&&el.target!==\"_blank\"&&!isMeta(e)){prevent(e);self._callback(function(){window.location.href=href})}})});return this};Analytics.prototype.trackSubmit=Analytics.prototype.trackForm=function(forms,event,properties){if(!forms)return this;if(is.element(forms))forms=[forms];var self=this;each(forms,function(el){if(!is.element(el))throw new TypeError(\"Must pass HTMLElement to `analytics.trackForm`.\");function handler(e){prevent(e);var ev=is.fn(event)?event(el):event;var props=is.fn(properties)?properties(el):properties;self.track(ev,props);self._callback(function(){el.submit()})}var $=window.jQuery||window.Zepto;if($){$(el).submit(handler)}else{on(el,\"submit\",handler)}});return this};Analytics.prototype.page=function(category,name,properties,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(properties))fn=properties,options=properties=null;if(is.fn(name))fn=name,options=properties=name=null;if(is.object(category))options=name,properties=category,name=category=null;if(is.object(name))options=properties,properties=name,name=null;if(is.string(category)&&!is.string(name))name=category,category=null;properties=clone(properties)||{};if(name)properties.name=name;if(category)properties.category=category;var defs=pageDefaults();defaults(properties,defs);var overrides=pick(keys(defs),properties);if(!is.empty(overrides)){options=options||{};options.context=options.context||{};options.context.page=overrides}var msg=this.normalize({properties:properties,category:category,options:options,name:name});this._invoke(\"page\",new Page(msg));this.emit(\"page\",category,name,properties,options);this._callback(fn);return this};Analytics.prototype.pageview=function(url){var properties={};if(url)properties.path=url;this.page(properties);return this};Analytics.prototype.alias=function(to,from,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(from))fn=from,options=null,from=null;if(is.object(from))options=from,from=null;var msg=this.normalize({options:options,previousId:from,userId:to});this._invoke(\"alias\",new Alias(msg));this.emit(\"alias\",to,from,options);this._callback(fn);return this};Analytics.prototype.ready=function(fn){if(is.fn(fn)){if(this._readied){callback.async(fn)}else{this.once(\"ready\",fn)}}return this};Analytics.prototype.timeout=function(timeout){this._timeout=timeout};Analytics.prototype.debug=function(str){if(!arguments.length||str){debug.enable(\"analytics:\"+(str||\"*\"))}else{debug.disable()}};Analytics.prototype._options=function(options){options=options||{};this.options=options;cookie.options(options.cookie);store.options(options.localStorage);user.options(options.user);group.options(options.group);return this};Analytics.prototype._callback=function(fn){callback.async(fn,this._timeout);return this};Analytics.prototype._invoke=function(method,facade){this.emit(\"invoke\",facade);each(this._integrations,function(name,integration){if(!facade.enabled(name))return;integration.invoke.call(integration,method,facade)});return this};Analytics.prototype.push=function(args){var method=args.shift();if(!this[method])return;this[method].apply(this,args)};Analytics.prototype.reset=function(){this.user().logout();this.group().logout()};Analytics.prototype._parseQuery=function(){var q=querystring.parse(window.location.search);if(q.ajs_uid)this.identify(q.ajs_uid);if(q.ajs_event)this.track(q.ajs_event);if(q.ajs_aid)user.anonymousId(q.ajs_aid);return this};Analytics.prototype.normalize=function(msg){msg=normalize(msg,keys(this._integrations));if(msg.anonymousId)user.anonymousId(msg.anonymousId);msg.anonymousId=user.anonymousId();msg.context.page=defaults(msg.context.page||{},pageDefaults());return msg};Analytics.prototype.noConflict=function(){window.analytics=_analytics;return this}},{emitter:8,facade:9,after:10,bind:11,callback:12,clone:13,\"./cookie\":14,debug:15,defaults:16,each:4,\"./group\":17,is:18,\"is-meta\":19,object:20,\"./memory\":21,\"./normalize\":22,event:23,\"./pageDefaults\":24,pick:25,prevent:26,querystring:27,\"./store\":28,\"./user\":29}],8:[function(require,module,exports){var index=require(\"indexof\");module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}fn._off=on;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var i=index(callbacks,fn._off||fn);if(~i)callbacks.splice(i,1);return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{indexof:30}],30:[function(require,module,exports){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],9:[function(require,module,exports){var Facade=require(\"./facade\");module.exports=Facade;Facade.Alias=require(\"./alias\");Facade.Group=require(\"./group\");Facade.Identify=require(\"./identify\");Facade.Track=require(\"./track\");Facade.Page=require(\"./page\");Facade.Screen=require(\"./screen\")},{\"./facade\":31,\"./alias\":32,\"./group\":33,\"./identify\":34,\"./track\":35,\"./page\":36,\"./screen\":37}],31:[function(require,module,exports){var traverse=require(\"isodate-traverse\");var isEnabled=require(\"./is-enabled\");var clone=require(\"./utils\").clone;var type=require(\"./utils\").type;var address=require(\"./address\");var objCase=require(\"obj-case\");var newDate=require(\"new-date\");module.exports=Facade;function Facade(obj){obj=clone(obj);if(!obj.hasOwnProperty(\"timestamp\"))obj.timestamp=new Date;else obj.timestamp=newDate(obj.timestamp);traverse(obj);this.obj=obj}address(Facade.prototype);Facade.prototype.proxy=function(field){var fields=field.split(\".\");field=fields.shift();var obj=this[field]||this.field(field);if(!obj)return obj;if(typeof obj===\"function\")obj=obj.call(this)||{};if(fields.length===0)return transform(obj);obj=objCase(obj,fields.join(\".\"));return transform(obj)};Facade.prototype.field=function(field){var obj=this.obj[field];return transform(obj)};Facade.proxy=function(field){return function(){return this.proxy(field)}};Facade.field=function(field){return function(){return this.field(field)}};Facade.multi=function(path){return function(){var multi=this.proxy(path+\"s\");if(\"array\"==type(multi))return multi;var one=this.proxy(path);if(one)one=[clone(one)];return one||[]}};Facade.one=function(path){return function(){var one=this.proxy(path);if(one)return one;var multi=this.proxy(path+\"s\");if(\"array\"==type(multi))return multi[0]}};Facade.prototype.json=function(){var ret=clone(this.obj);if(this.type)ret.type=this.type();return ret};Facade.prototype.context=Facade.prototype.options=function(integration){var options=clone(this.obj.options||this.obj.context)||{};if(!integration)return clone(options);if(!this.enabled(integration))return;var integrations=this.integrations();var value=integrations[integration]||objCase(integrations,integration);if(\"boolean\"==typeof value)value={};return value||{}};Facade.prototype.enabled=function(integration){var allEnabled=this.proxy(\"options.providers.all\");if(typeof allEnabled!==\"boolean\")allEnabled=this.proxy(\"options.all\");if(typeof allEnabled!==\"boolean\")allEnabled=this.proxy(\"integrations.all\");if(typeof allEnabled!==\"boolean\")allEnabled=true;var enabled=allEnabled&&isEnabled(integration);var options=this.integrations();if(options.providers&&options.providers.hasOwnProperty(integration)){enabled=options.providers[integration]}if(options.hasOwnProperty(integration)){var settings=options[integration];if(typeof settings===\"boolean\"){enabled=settings}else{enabled=true}}return enabled?true:false};Facade.prototype.integrations=function(){return this.obj.integrations||this.proxy(\"options.providers\")||this.options()};Facade.prototype.active=function(){var active=this.proxy(\"options.active\");if(active===null||active===undefined)active=true;return active};Facade.prototype.sessionId=Facade.prototype.anonymousId=function(){return this.field(\"anonymousId\")||this.field(\"sessionId\")};Facade.prototype.groupId=Facade.proxy(\"options.groupId\");Facade.prototype.traits=function(aliases){var ret=this.proxy(\"options.traits\")||{};var id=this.userId();aliases=aliases||{};if(id)ret.id=id;for(var alias in aliases){var value=null==this[alias]?this.proxy(\"options.traits.\"+alias):this[alias]();if(null==value)continue;ret[aliases[alias]]=value;delete ret[alias]}return ret};Facade.prototype.library=function(){var library=this.proxy(\"options.library\");if(!library)return{name:\"unknown\",version:null};if(typeof library===\"string\")return{name:library,version:null};return library};Facade.prototype.userId=Facade.field(\"userId\");Facade.prototype.channel=Facade.field(\"channel\");Facade.prototype.timestamp=Facade.field(\"timestamp\");Facade.prototype.userAgent=Facade.proxy(\"options.userAgent\");Facade.prototype.ip=Facade.proxy(\"options.ip\");function transform(obj){var cloned=clone(obj);return cloned}},{\"isodate-traverse\":38,\"./is-enabled\":39,\"./utils\":40,\"./address\":41,\"obj-case\":42,\"new-date\":43}],38:[function(require,module,exports){var is=require(\"is\");var isodate=require(\"isodate\");var each;try{each=require(\"each\")}catch(err){each=require(\"each-component\")}module.exports=traverse;function traverse(input,strict){if(strict===undefined)strict=true;if(is.object(input))return object(input,strict);if(is.array(input))return array(input,strict);return input}function object(obj,strict){each(obj,function(key,val){if(isodate.is(val,strict)){obj[key]=isodate.parse(val)}else if(is.object(val)||is.array(val)){traverse(val,strict)}});return obj}function array(arr,strict){each(arr,function(val,x){if(is.object(val)){traverse(val,strict)}else if(isodate.is(val,strict)){arr[x]=isodate.parse(val)}});return arr}},{is:44,isodate:45,each:4}],44:[function(require,module,exports){var isEmpty=require(\"is-empty\");try{var typeOf=require(\"type\")}catch(e){var typeOf=require(\"component-type\")}var types=[\"arguments\",\"array\",\"boolean\",\"date\",\"element\",\"function\",\"null\",\"number\",\"object\",\"regexp\",\"string\",\"undefined\"];for(var i=0,type;type=types[i];i++)exports[type]=generate(type);exports.fn=exports[\"function\"];exports.empty=isEmpty;exports.nan=function(val){return exports.number(val)&&val!=val};function generate(type){return function(value){return type===typeOf(value)}}},{\"is-empty\":46,type:47,\"component-type\":47}],46:[function(require,module,exports){module.exports=isEmpty;var has=Object.prototype.hasOwnProperty;function isEmpty(val){if(null==val)return true;if(\"number\"==typeof val)return 0===val;if(undefined!==val.length)return 0===val.length;for(var key in val)if(has.call(val,key))return false;return true}},{}],47:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case\"[object Date]\":return\"date\";case\"[object RegExp]\":return\"regexp\";case\"[object Arguments]\":return\"arguments\";case\"[object Array]\":return\"array\";case\"[object Error]\":return\"error\"}if(val===null)return\"null\";if(val===undefined)return\"undefined\";if(val!==val)return\"nan\";if(val&&val.nodeType===1)return\"element\";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val}},{}],45:[function(require,module,exports){var matcher=/^(\\d{4})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:([ T])(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;exports.parse=function(iso){var numericKeys=[1,5,6,7,11,12];var arr=matcher.exec(iso);var offset=0;if(!arr)return new Date(iso);for(var i=0,val;val=numericKeys[i];i++){arr[val]=parseInt(arr[val],10)||0}arr[2]=parseInt(arr[2],10)||1;arr[3]=parseInt(arr[3],10)||1;arr[2]--;arr[8]=arr[8]?(arr[8]+\"00\").substring(0,3):0;if(arr[4]==\" \"){offset=(new Date).getTimezoneOffset()}else if(arr[9]!==\"Z\"&&arr[10]){offset=arr[11]*60+arr[12];if(\"+\"==arr[10])offset=0-offset}var millis=Date.UTC(arr[1],arr[2],arr[3],arr[5],arr[6]+offset,arr[7],arr[8]);return new Date(millis)};exports.is=function(string,strict){if(strict&&false===/^\\d{4}-\\d{2}-\\d{2}/.test(string))return false;return matcher.test(string)}},{}],4:[function(require,module,exports){var type=require(\"type\");var has=Object.prototype.hasOwnProperty;module.exports=function(obj,fn){switch(type(obj)){case\"array\":return array(obj,fn);case\"object\":if(\"number\"==typeof obj.length)return array(obj,fn);return object(obj,fn);case\"string\":return string(obj,fn)}};function string(obj,fn){for(var i=0;i<obj.length;++i){fn(obj.charAt(i),i)}}function object(obj,fn){for(var key in obj){if(has.call(obj,key)){fn(key,obj[key])}}}function array(obj,fn){for(var i=0;i<obj.length;++i){fn(obj[i],i)}}},{type:47}],39:[function(require,module,exports){var disabled={Salesforce:true};module.exports=function(integration){return!disabled[integration]}},{}],40:[function(require,module,exports){try{exports.inherit=require(\"inherit\");exports.clone=require(\"clone\");exports.type=require(\"type\")}catch(e){exports.inherit=require(\"inherit-component\");exports.clone=require(\"clone-component\");exports.type=require(\"type-component\")}},{inherit:48,clone:49,type:47}],48:[function(require,module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn;a.prototype.constructor=a}},{}],49:[function(require,module,exports){var type;try{type=require(\"component-type\")}catch(_){type=require(\"type\")}module.exports=clone;function clone(obj){switch(type(obj)){case\"object\":var copy={};for(var key in obj){if(obj.hasOwnProperty(key)){copy[key]=clone(obj[key])}}return copy;case\"array\":var copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy;case\"regexp\":var flags=\"\";flags+=obj.multiline?\"m\":\"\";flags+=obj.global?\"g\":\"\";flags+=obj.ignoreCase?\"i\":\"\";return new RegExp(obj.source,flags);case\"date\":return new Date(obj.getTime());default:return obj}}},{\"component-type\":47,type:47}],41:[function(require,module,exports){var get=require(\"obj-case\");module.exports=function(proto){proto.zip=trait(\"postalCode\",\"zip\");proto.country=trait(\"country\");proto.street=trait(\"street\");proto.state=trait(\"state\");proto.city=trait(\"city\");function trait(a,b){return function(){var traits=this.traits();var props=this.properties?this.properties():{};return get(traits,\"address.\"+a)||get(traits,a)||(b?get(traits,\"address.\"+b):null)||(b?get(traits,b):null)||get(props,\"address.\"+a)||get(props,a)||(b?get(props,\"address.\"+b):null)||(b?get(props,b):null)}}}},{\"obj-case\":42}],42:[function(require,module,exports){var identity=function(_){return _};module.exports=multiple(find);module.exports.find=module.exports;module.exports.replace=function(obj,key,val,options){multiple(replace).call(this,obj,key,val,options);return obj};module.exports.del=function(obj,key,options){multiple(del).call(this,obj,key,null,options);return obj};function multiple(fn){return function(obj,path,val,options){var normalize=options&&isFunction(options.normalizer)?options.normalizer:defaultNormalize;path=normalize(path);var key;var finished=false;while(!finished)loop();function loop(){for(key in obj){var normalizedKey=normalize(key);if(0===path.indexOf(normalizedKey)){var temp=path.substr(normalizedKey.length);if(temp.charAt(0)===\".\"||temp.length===0){path=temp.substr(1);var child=obj[key];if(null==child){finished=true;return}if(!path.length){finished=true;return}obj=child;return}}}key=undefined;finished=true}if(!key)return;if(null==obj)return obj;return fn(obj,key,val)}}function find(obj,key){if(obj.hasOwnProperty(key))return obj[key]}function del(obj,key){if(obj.hasOwnProperty(key))delete obj[key];return obj}function replace(obj,key,val){if(obj.hasOwnProperty(key))obj[key]=val;return obj}function defaultNormalize(path){return path.replace(/[^a-zA-Z0-9\\.]+/g,\"\").toLowerCase()}function isFunction(val){return typeof val===\"function\"}},{}],43:[function(require,module,exports){var is=require(\"is\");var isodate=require(\"isodate\");var milliseconds=require(\"./milliseconds\");var seconds=require(\"./seconds\");module.exports=function newDate(val){if(is.date(val))return val;if(is.number(val))return new Date(toMs(val));if(isodate.is(val))return isodate.parse(val);if(milliseconds.is(val))return milliseconds.parse(val);if(seconds.is(val))return seconds.parse(val);return new Date(val)};function toMs(num){if(num<315576e5)return num*1e3;return num}},{is:50,isodate:45,\"./milliseconds\":51,\"./seconds\":52}],50:[function(require,module,exports){var isEmpty=require(\"is-empty\"),typeOf=require(\"type\");var types=[\"arguments\",\"array\",\"boolean\",\"date\",\"element\",\"function\",\"null\",\"number\",\"object\",\"regexp\",\"string\",\"undefined\"];for(var i=0,type;type=types[i];i++)exports[type]=generate(type);exports.fn=exports[\"function\"];exports.empty=isEmpty;exports.nan=function(val){return exports.number(val)&&val!=val};function generate(type){return function(value){return type===typeOf(value)}}},{\"is-empty\":46,type:47}],51:[function(require,module,exports){var matcher=/\\d{13}/;exports.is=function(string){return matcher.test(string)};exports.parse=function(millis){millis=parseInt(millis,10);return new Date(millis)}},{}],52:[function(require,module,exports){var matcher=/\\d{10}/;exports.is=function(string){return matcher.test(string)};exports.parse=function(seconds){var millis=parseInt(seconds,10)*1e3;return new Date(millis)}},{}],32:[function(require,module,exports){var inherit=require(\"./utils\").inherit;var Facade=require(\"./facade\");module.exports=Alias;function Alias(dictionary){Facade.call(this,dictionary)}inherit(Alias,Facade);Alias.prototype.type=Alias.prototype.action=function(){return\"alias\"};Alias.prototype.from=Alias.prototype.previousId=function(){return this.field(\"previousId\")||this.field(\"from\")};Alias.prototype.to=Alias.prototype.userId=function(){return this.field(\"userId\")||this.field(\"to\")}},{\"./utils\":40,\"./facade\":31}],33:[function(require,module,exports){var inherit=require(\"./utils\").inherit;var address=require(\"./address\");var isEmail=require(\"is-email\");var newDate=require(\"new-date\");var Facade=require(\"./facade\");module.exports=Group;function Group(dictionary){Facade.call(this,dictionary)}inherit(Group,Facade);Group.prototype.type=Group.prototype.action=function(){return\"group\"};Group.prototype.groupId=Facade.field(\"groupId\");Group.prototype.created=function(){var created=this.proxy(\"traits.createdAt\")||this.proxy(\"traits.created\")||this.proxy(\"properties.createdAt\")||this.proxy(\"properties.created\");if(created)return newDate(created)};Group.prototype.email=function(){var email=this.proxy(\"traits.email\");if(email)return email;var groupId=this.groupId();if(isEmail(groupId))return groupId};Group.prototype.traits=function(aliases){var ret=this.properties();var id=this.groupId();aliases=aliases||{};if(id)ret.id=id;for(var alias in aliases){var value=null==this[alias]?this.proxy(\"traits.\"+alias):this[alias]();if(null==value)continue;ret[aliases[alias]]=value;delete ret[alias]}return ret};Group.prototype.name=Facade.proxy(\"traits.name\");Group.prototype.industry=Facade.proxy(\"traits.industry\");Group.prototype.employees=Facade.proxy(\"traits.employees\");Group.prototype.properties=function(){return this.field(\"traits\")||this.field(\"properties\")||{}}},{\"./utils\":40,\"./address\":41,\"is-email\":53,\"new-date\":43,\"./facade\":31}],53:[function(require,module,exports){module.exports=isEmail;var matcher=/.+\\@.+\\..+/;function isEmail(string){return matcher.test(string)}},{}],34:[function(require,module,exports){var address=require(\"./address\");var Facade=require(\"./facade\");var isEmail=require(\"is-email\");var newDate=require(\"new-date\");var utils=require(\"./utils\");var get=require(\"obj-case\");var trim=require(\"trim\");var inherit=utils.inherit;var clone=utils.clone;var type=utils.type;module.exports=Identify;function Identify(dictionary){Facade.call(this,dictionary)}inherit(Identify,Facade);Identify.prototype.type=Identify.prototype.action=function(){return\"identify\"};Identify.prototype.traits=function(aliases){var ret=this.field(\"traits\")||{};var id=this.userId();aliases=aliases||{};if(id)ret.id=id;for(var alias in aliases){var value=null==this[alias]?this.proxy(\"traits.\"+alias):this[alias]();if(null==value)continue;ret[aliases[alias]]=value;if(alias!==aliases[alias])delete ret[alias]}return ret};Identify.prototype.email=function(){var email=this.proxy(\"traits.email\");if(email)return email;var userId=this.userId();if(isEmail(userId))return userId};Identify.prototype.created=function(){var created=this.proxy(\"traits.created\")||this.proxy(\"traits.createdAt\");if(created)return newDate(created)};Identify.prototype.companyCreated=function(){var created=this.proxy(\"traits.company.created\")||this.proxy(\"traits.company.createdAt\");if(created)return newDate(created)};Identify.prototype.name=function(){var name=this.proxy(\"traits.name\");if(typeof name===\"string\")return trim(name);var firstName=this.firstName();var lastName=this.lastName();if(firstName&&lastName)return trim(firstName+\" \"+lastName)};Identify.prototype.firstName=function(){var firstName=this.proxy(\"traits.firstName\");if(typeof firstName===\"string\")return trim(firstName);var name=this.proxy(\"traits.name\");if(typeof name===\"string\")return trim(name).split(\" \")[0]};Identify.prototype.lastName=function(){var lastName=this.proxy(\"traits.lastName\");if(typeof lastName===\"string\")return trim(lastName);var name=this.proxy(\"traits.name\");if(typeof name!==\"string\")return;var space=trim(name).indexOf(\" \");if(space===-1)return;return trim(name.substr(space+1))};Identify.prototype.uid=function(){return this.userId()||this.username()||this.email()};Identify.prototype.description=function(){return this.proxy(\"traits.description\")||this.proxy(\"traits.background\")};Identify.prototype.age=function(){var date=this.birthday();var age=get(this.traits(),\"age\");if(null!=age)return age;if(\"date\"!=type(date))return;var now=new Date;return now.getFullYear()-date.getFullYear()};Identify.prototype.avatar=function(){var traits=this.traits();return get(traits,\"avatar\")||get(traits,\"photoUrl\")||get(traits,\"avatarUrl\")};Identify.prototype.position=function(){var traits=this.traits();return get(traits,\"position\")||get(traits,\"jobTitle\")};Identify.prototype.username=Facade.proxy(\"traits.username\");Identify.prototype.website=Facade.one(\"traits.website\");Identify.prototype.websites=Facade.multi(\"traits.website\");Identify.prototype.phone=Facade.one(\"traits.phone\");Identify.prototype.phones=Facade.multi(\"traits.phone\");Identify.prototype.address=Facade.proxy(\"traits.address\");Identify.prototype.gender=Facade.proxy(\"traits.gender\");Identify.prototype.birthday=Facade.proxy(\"traits.birthday\")},{\"./address\":41,\"./facade\":31,\"is-email\":53,\"new-date\":43,\"./utils\":40,\"obj-case\":42,trim:54}],54:[function(require,module,exports){exports=module.exports=trim;function trim(str){if(str.trim)return str.trim();return str.replace(/^\\s*|\\s*$/g,\"\")}exports.left=function(str){if(str.trimLeft)return str.trimLeft();return str.replace(/^\\s*/,\"\")};exports.right=function(str){if(str.trimRight)return str.trimRight();return str.replace(/\\s*$/,\"\")}},{}],35:[function(require,module,exports){var inherit=require(\"./utils\").inherit;var clone=require(\"./utils\").clone;var type=require(\"./utils\").type;var Facade=require(\"./facade\");var Identify=require(\"./identify\");var isEmail=require(\"is-email\");var get=require(\"obj-case\");module.exports=Track;function Track(dictionary){Facade.call(this,dictionary)}inherit(Track,Facade);Track.prototype.type=Track.prototype.action=function(){return\"track\"};Track.prototype.event=Facade.field(\"event\");Track.prototype.value=Facade.proxy(\"properties.value\");Track.prototype.category=Facade.proxy(\"properties.category\");Track.prototype.id=Facade.proxy(\"properties.id\");Track.prototype.sku=Facade.proxy(\"properties.sku\");Track.prototype.tax=Facade.proxy(\"properties.tax\");Track.prototype.name=Facade.proxy(\"properties.name\");Track.prototype.price=Facade.proxy(\"properties.price\");Track.prototype.total=Facade.proxy(\"properties.total\");Track.prototype.coupon=Facade.proxy(\"properties.coupon\");Track.prototype.shipping=Facade.proxy(\"properties.shipping\");Track.prototype.discount=Facade.proxy(\"properties.discount\");Track.prototype.description=Facade.proxy(\"properties.description\");Track.prototype.plan=Facade.proxy(\"properties.plan\");Track.prototype.orderId=function(){return this.proxy(\"properties.id\")||this.proxy(\"properties.orderId\")};Track.prototype.subtotal=function(){var subtotal=get(this.properties(),\"subtotal\");var total=this.total();var n;if(subtotal)return subtotal;if(!total)return 0;if(n=this.tax())total-=n;if(n=this.shipping())total-=n;if(n=this.discount())total+=n;return total};Track.prototype.products=function(){\nvar props=this.properties();var products=get(props,\"products\");return\"array\"==type(products)?products:[]};Track.prototype.quantity=function(){var props=this.obj.properties||{};return props.quantity||1};Track.prototype.currency=function(){var props=this.obj.properties||{};return props.currency||\"USD\"};Track.prototype.referrer=Facade.proxy(\"properties.referrer\");Track.prototype.query=Facade.proxy(\"options.query\");Track.prototype.properties=function(aliases){var ret=this.field(\"properties\")||{};aliases=aliases||{};for(var alias in aliases){var value=null==this[alias]?this.proxy(\"properties.\"+alias):this[alias]();if(null==value)continue;ret[aliases[alias]]=value;delete ret[alias]}return ret};Track.prototype.username=function(){return this.proxy(\"traits.username\")||this.proxy(\"properties.username\")||this.userId()||this.sessionId()};Track.prototype.email=function(){var email=this.proxy(\"traits.email\");email=email||this.proxy(\"properties.email\");if(email)return email;var userId=this.userId();if(isEmail(userId))return userId};Track.prototype.revenue=function(){var revenue=this.proxy(\"properties.revenue\");var event=this.event();if(!revenue&&event&&event.match(/completed ?order/i)){revenue=this.proxy(\"properties.total\")}return currency(revenue)};Track.prototype.cents=function(){var revenue=this.revenue();return\"number\"!=typeof revenue?this.value()||0:revenue*100};Track.prototype.identify=function(){var json=this.json();json.traits=this.traits();return new Identify(json)};function currency(val){if(!val)return;if(typeof val===\"number\")return val;if(typeof val!==\"string\")return;val=val.replace(/\\$/g,\"\");val=parseFloat(val);if(!isNaN(val))return val}},{\"./utils\":40,\"./facade\":31,\"./identify\":34,\"is-email\":53,\"obj-case\":42}],36:[function(require,module,exports){var inherit=require(\"./utils\").inherit;var Facade=require(\"./facade\");var Track=require(\"./track\");module.exports=Page;function Page(dictionary){Facade.call(this,dictionary)}inherit(Page,Facade);Page.prototype.type=Page.prototype.action=function(){return\"page\"};Page.prototype.category=Facade.field(\"category\");Page.prototype.name=Facade.field(\"name\");Page.prototype.title=Facade.proxy(\"properties.title\");Page.prototype.path=Facade.proxy(\"properties.path\");Page.prototype.url=Facade.proxy(\"properties.url\");Page.prototype.referrer=function(){return this.proxy(\"properties.referrer\")||this.proxy(\"context.referrer.url\")};Page.prototype.properties=function(){var props=this.field(\"properties\")||{};var category=this.category();var name=this.name();if(category)props.category=category;if(name)props.name=name;return props};Page.prototype.fullName=function(){var category=this.category();var name=this.name();return name&&category?category+\" \"+name:name};Page.prototype.event=function(name){return name?\"Viewed \"+name+\" Page\":\"Loaded a Page\"};Page.prototype.track=function(name){var props=this.properties();return new Track({event:this.event(name),timestamp:this.timestamp(),context:this.context(),properties:props})}},{\"./utils\":40,\"./facade\":31,\"./track\":35}],37:[function(require,module,exports){var inherit=require(\"./utils\").inherit;var Page=require(\"./page\");var Track=require(\"./track\");module.exports=Screen;function Screen(dictionary){Page.call(this,dictionary)}inherit(Screen,Page);Screen.prototype.type=Screen.prototype.action=function(){return\"screen\"};Screen.prototype.event=function(name){return name?\"Viewed \"+name+\" Screen\":\"Loaded a Screen\"};Screen.prototype.track=function(name){var props=this.properties();return new Track({event:this.event(name),timestamp:this.timestamp(),context:this.context(),properties:props})}},{\"./utils\":40,\"./page\":36,\"./track\":35}],10:[function(require,module,exports){module.exports=function after(times,func){if(times<=0)return func();return function(){if(--times<1){return func.apply(this,arguments)}}}},{}],11:[function(require,module,exports){try{var bind=require(\"bind\")}catch(e){var bind=require(\"bind-component\")}var bindAll=require(\"bind-all\");module.exports=exports=bind;exports.all=bindAll;exports.methods=bindMethods;function bindMethods(obj,methods){methods=[].slice.call(arguments,1);for(var i=0,method;method=methods[i];i++){obj[method]=bind(obj,obj[method])}return obj}},{bind:55,\"bind-all\":56}],55:[function(require,module,exports){var slice=[].slice;module.exports=function(obj,fn){if(\"string\"==typeof fn)fn=obj[fn];if(\"function\"!=typeof fn)throw new Error(\"bind() requires a function\");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],56:[function(require,module,exports){try{var bind=require(\"bind\");var type=require(\"type\")}catch(e){var bind=require(\"bind-component\");var type=require(\"type-component\")}module.exports=function(obj){for(var key in obj){var val=obj[key];if(type(val)===\"function\")obj[key]=bind(obj,obj[key])}return obj}},{bind:55,type:47}],12:[function(require,module,exports){var next=require(\"next-tick\");module.exports=callback;function callback(fn){if(\"function\"===typeof fn)fn()}callback.async=function(fn,wait){if(\"function\"!==typeof fn)return;if(!wait)return next(fn);setTimeout(fn,wait)};callback.sync=callback},{\"next-tick\":57}],57:[function(require,module,exports){\"use strict\";if(typeof setImmediate==\"function\"){module.exports=function(f){setImmediate(f)}}else if(typeof process!=\"undefined\"&&typeof process.nextTick==\"function\"){module.exports=process.nextTick}else if(typeof window==\"undefined\"||window.ActiveXObject||!window.postMessage){module.exports=function(f){setTimeout(f)}}else{var q=[];window.addEventListener(\"message\",function(){var i=0;while(i<q.length){try{q[i++]()}catch(e){q=q.slice(i);window.postMessage(\"tic!\",\"*\");throw e}}q.length=0},true);module.exports=function(fn){if(!q.length)window.postMessage(\"tic!\",\"*\");q.push(fn)}}},{}],13:[function(require,module,exports){var type;try{type=require(\"type\")}catch(e){type=require(\"type-component\")}module.exports=clone;function clone(obj){switch(type(obj)){case\"object\":var copy={};for(var key in obj){if(obj.hasOwnProperty(key)){copy[key]=clone(obj[key])}}return copy;case\"array\":var copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy;case\"regexp\":var flags=\"\";flags+=obj.multiline?\"m\":\"\";flags+=obj.global?\"g\":\"\";flags+=obj.ignoreCase?\"i\":\"\";return new RegExp(obj.source,flags);case\"date\":return new Date(obj.getTime());default:return obj}}},{type:47}],14:[function(require,module,exports){var bind=require(\"bind\");var clone=require(\"clone\");var cookie=require(\"cookie\");var debug=require(\"debug\")(\"analytics.js:cookie\");var defaults=require(\"defaults\");var json=require(\"json\");var topDomain=require(\"top-domain\");function Cookie(options){this.options(options)}Cookie.prototype.options=function(options){if(arguments.length===0)return this._options;options=options||{};var domain=\".\"+topDomain(window.location.href);if(domain===\".\")domain=null;this._options=defaults(options,{maxage:31536e6,path:\"/\",domain:domain});this.set(\"ajs:test\",true);if(!this.get(\"ajs:test\")){debug(\"fallback to domain=null\");this._options.domain=null}this.remove(\"ajs:test\")};Cookie.prototype.set=function(key,value){try{value=json.stringify(value);cookie(key,value,clone(this._options));return true}catch(e){return false}};Cookie.prototype.get=function(key){try{var value=cookie(key);value=value?json.parse(value):null;return value}catch(e){return null}};Cookie.prototype.remove=function(key){try{cookie(key,null,clone(this._options));return true}catch(e){return false}};module.exports=bind.all(new Cookie);module.exports.Cookie=Cookie},{bind:11,clone:13,cookie:58,debug:15,defaults:16,json:59,\"top-domain\":60}],58:[function(require,module,exports){var debug=require(\"debug\")(\"cookie\");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+\"=\"+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+=\"; path=\"+options.path;if(options.domain)str+=\"; domain=\"+options.domain;if(options.expires)str+=\"; expires=\"+options.expires.toUTCString();if(options.secure)str+=\"; secure\";document.cookie=str}function all(){return parse(document.cookie)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(\"\"==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split(\"=\");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug(\"error `encode(%o)` - %o\",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug(\"error `decode(%o)` - %o\",value,e)}}},{debug:15}],15:[function(require,module,exports){if(\"undefined\"==typeof window){module.exports=require(\"./lib/debug\")}else{module.exports=require(\"./debug\")}},{\"./lib/debug\":61,\"./debug\":62}],61:[function(require,module,exports){var tty=require(\"tty\");module.exports=debug;var names=[],skips=[];(process.env.DEBUG||\"\").split(/[\\s,]+/).forEach(function(name){name=name.replace(\"*\",\".*?\");if(name[0]===\"-\"){skips.push(new RegExp(\"^\"+name.substr(1)+\"$\"))}else{names.push(new RegExp(\"^\"+name+\"$\"))}});var colors=[6,2,3,4,5,1];var prev={};var prevColor=0;var isatty=tty.isatty(2);function color(){return colors[prevColor++%colors.length]}function humanize(ms){var sec=1e3,min=60*1e3,hour=60*min;if(ms>=hour)return(ms/hour).toFixed(1)+\"h\";if(ms>=min)return(ms/min).toFixed(1)+\"m\";if(ms>=sec)return(ms/sec|0)+\"s\";return ms+\"ms\"}function debug(name){function disabled(){}disabled.enabled=false;var match=skips.some(function(re){return re.test(name)});if(match)return disabled;match=names.some(function(re){return re.test(name)});if(!match)return disabled;var c=color();function colored(fmt){fmt=coerce(fmt);var curr=new Date;var ms=curr-(prev[name]||curr);prev[name]=curr;fmt=\"  \u001b[9\"+c+\"m\"+name+\" \"+\"\u001b[3\"+c+\"m\u001b[90m\"+fmt+\"\u001b[3\"+c+\"m\"+\" +\"+humanize(ms)+\"\u001b[0m\";console.error.apply(this,arguments)}function plain(fmt){fmt=coerce(fmt);fmt=(new Date).toUTCString()+\" \"+name+\" \"+fmt;console.error.apply(this,arguments)}colored.enabled=plain.enabled=true;return isatty||process.env.DEBUG_COLORS?colored:plain}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{}],62:[function(require,module,exports){module.exports=debug;function debug(name){if(!debug.enabled(name))return function(){};return function(fmt){fmt=coerce(fmt);var curr=new Date;var ms=curr-(debug[name]||curr);debug[name]=curr;fmt=name+\" \"+fmt+\" +\"+debug.humanize(ms);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}}debug.names=[];debug.skips=[];debug.enable=function(name){try{localStorage.debug=name}catch(e){}var split=(name||\"\").split(/[\\s,]+/),len=split.length;for(var i=0;i<len;i++){name=split[i].replace(\"*\",\".*?\");if(name[0]===\"-\"){debug.skips.push(new RegExp(\"^\"+name.substr(1)+\"$\"))}else{debug.names.push(new RegExp(\"^\"+name+\"$\"))}}};debug.disable=function(){debug.enable(\"\")};debug.humanize=function(ms){var sec=1e3,min=60*1e3,hour=60*min;if(ms>=hour)return(ms/hour).toFixed(1)+\"h\";if(ms>=min)return(ms/min).toFixed(1)+\"m\";if(ms>=sec)return(ms/sec|0)+\"s\";return ms+\"ms\"};debug.enabled=function(name){for(var i=0,len=debug.skips.length;i<len;i++){if(debug.skips[i].test(name)){return false}}for(var i=0,len=debug.names.length;i<len;i++){if(debug.names[i].test(name)){return true}}return false};function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}try{if(window.localStorage)debug.enable(localStorage.debug)}catch(e){}},{}],16:[function(require,module,exports){\"use strict\";var defaults=function(dest,src,recursive){for(var prop in src){if(recursive&&dest[prop]instanceof Object&&src[prop]instanceof Object){dest[prop]=defaults(dest[prop],src[prop],true)}else if(!(prop in dest)){dest[prop]=src[prop]}}return dest};module.exports=defaults},{}],59:[function(require,module,exports){var json=window.JSON||{};var stringify=json.stringify;var parse=json.parse;module.exports=parse&&stringify?JSON:require(\"json-fallback\")},{\"json-fallback\":63}],63:[function(require,module,exports){(function(){\"use strict\";var JSON=module.exports={};function f(n){return n<10?\"0\"+n:n}if(typeof Date.prototype.toJSON!==\"function\"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+\"-\"+f(this.getUTCMonth()+1)+\"-\"+f(this.getUTCDate())+\"T\"+f(this.getUTCHours())+\":\"+f(this.getUTCMinutes())+\":\"+f(this.getUTCSeconds())+\"Z\":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'\"'+string.replace(escapable,function(a){var c=meta[a];return typeof c===\"string\"?c:\"\\\\u\"+(\"0000\"+a.charCodeAt(0).toString(16)).slice(-4)})+'\"':'\"'+string+'\"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value===\"object\"&&typeof value.toJSON===\"function\"){value=value.toJSON(key)}if(typeof rep===\"function\"){value=rep.call(holder,key,value)}switch(typeof value){case\"string\":return quote(value);case\"number\":return isFinite(value)?String(value):\"null\";case\"boolean\":case\"null\":return String(value);case\"object\":if(!value){return\"null\"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)===\"[object Array]\"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||\"null\"}v=partial.length===0?\"[]\":gap?\"[\\n\"+gap+partial.join(\",\\n\"+gap)+\"\\n\"+mind+\"]\":\"[\"+partial.join(\",\")+\"]\";gap=mind;return v}if(rep&&typeof rep===\"object\"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]===\"string\"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?\": \":\":\")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?\": \":\":\")+v)}}}}v=partial.length===0?\"{}\":gap?\"{\\n\"+gap+partial.join(\",\\n\"+gap)+\"\\n\"+mind+\"}\":\"{\"+partial.join(\",\")+\"}\";gap=mind;return v}}if(typeof JSON.stringify!==\"function\"){escapable=/[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;meta={\"\\b\":\"\\\\b\",\"\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"};JSON.stringify=function(value,replacer,space){var i;gap=\"\";indent=\"\";if(typeof space===\"number\"){for(i=0;i<space;i+=1){indent+=\" \"}}else if(typeof space===\"string\"){indent=space}rep=replacer;if(replacer&&typeof replacer!==\"function\"&&(typeof replacer!==\"object\"||typeof replacer.length!==\"number\")){throw new Error(\"JSON.stringify\")}return str(\"\",{\"\":value})}}if(typeof JSON.parse!==\"function\"){cx=/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value===\"object\"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return\"\\\\u\"+(\"0000\"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,\"@\").replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,\"]\").replace(/(?:^|:|,)(?:\\s*\\[)+/g,\"\"))){j=eval(\"(\"+text+\")\");return typeof reviver===\"function\"?walk({\"\":j},\"\"):j}throw new SyntaxError(\"JSON.parse\")}}})()},{}],60:[function(require,module,exports){var parse=require(\"url\").parse;var cookie=require(\"cookie\");exports=module.exports=domain;exports.cookie=cookie;function domain(url){var cookie=exports.cookie;var levels=exports.levels(url);for(var i=0;i<levels.length;++i){var cname=\"__tld__\";var domain=levels[i];var opts={domain:\".\"+domain};cookie(cname,1,opts);if(cookie(cname)){cookie(cname,null,opts);return domain}}return\"\"}domain.levels=function(url){var host=parse(url).hostname;var parts=host.split(\".\");var last=parts[parts.length-1];var levels=[];if(4==parts.length&&parseInt(last,10)==last){return levels}if(1>=parts.length){return levels}for(var i=parts.length-2;0<=i;--i){levels.push(parts.slice(i).join(\".\"))}return levels}},{url:64,cookie:65}],64:[function(require,module,exports){exports.parse=function(url){var a=document.createElement(\"a\");a.href=url;return{href:a.href,host:a.host||location.host,port:\"0\"===a.port||\"\"===a.port?port(a.protocol):a.port,hash:a.hash,hostname:a.hostname||location.hostname,pathname:a.pathname.charAt(0)!=\"/\"?\"/\"+a.pathname:a.pathname,protocol:!a.protocol||\":\"==a.protocol?location.protocol:a.protocol,search:a.search,query:a.search.slice(1)}};exports.isAbsolute=function(url){return 0==url.indexOf(\"//\")||!!~url.indexOf(\"://\")};exports.isRelative=function(url){return!exports.isAbsolute(url)};exports.isCrossDomain=function(url){url=exports.parse(url);var location=exports.parse(window.location.href);return url.hostname!==location.hostname||url.port!==location.port||url.protocol!==location.protocol};function port(protocol){switch(protocol){case\"http:\":return 80;case\"https:\":return 443;default:return location.port}}},{}],65:[function(require,module,exports){var debug=require(\"debug\")(\"cookie\");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+\"=\"+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+=\"; path=\"+options.path;if(options.domain)str+=\"; domain=\"+options.domain;if(options.expires)str+=\"; expires=\"+options.expires.toUTCString();if(options.secure)str+=\"; secure\";document.cookie=str}function all(){var str;try{str=document.cookie}catch(err){if(typeof console!==\"undefined\"&&typeof console.error===\"function\"){console.error(err.stack||err)}return{}}return parse(str)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(\"\"==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split(\"=\");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug(\"error `encode(%o)` - %o\",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug(\"error `decode(%o)` - %o\",value,e)}}},{debug:15}],17:[function(require,module,exports){var Entity=require(\"./entity\");var bind=require(\"bind\");var debug=require(\"debug\")(\"analytics:group\");var inherit=require(\"inherit\");Group.defaults={persist:true,cookie:{key:\"ajs_group_id\"},localStorage:{key:\"ajs_group_properties\"}};function Group(options){this.defaults=Group.defaults;this.debug=debug;Entity.call(this,options)}inherit(Group,Entity);module.exports=bind.all(new Group);module.exports.Group=Group},{\"./entity\":66,bind:11,debug:15,inherit:67}],66:[function(require,module,exports){var clone=require(\"clone\");var cookie=require(\"./cookie\");var debug=require(\"debug\")(\"analytics:entity\");var defaults=require(\"defaults\");var extend=require(\"extend\");var memory=require(\"./memory\");var store=require(\"./store\");var isodateTraverse=require(\"isodate-traverse\");module.exports=Entity;function Entity(options){this.options(options);this.initialize()}Entity.prototype.initialize=function(){cookie.set(\"ajs:cookies\",true);if(cookie.get(\"ajs:cookies\")){cookie.remove(\"ajs:cookies\");this._storage=cookie;return}if(store.enabled){this._storage=store;return}debug(\"warning using memory store both cookies and localStorage are disabled\");this._storage=memory};Entity.prototype.storage=function(){return this._storage};Entity.prototype.options=function(options){if(arguments.length===0)return this._options;this._options=defaults(options||{},this.defaults||{})};Entity.prototype.id=function(id){switch(arguments.length){case 0:return this._getId();case 1:return this._setId(id);default:}};Entity.prototype._getId=function(){var ret=this._options.persist?this.storage().get(this._options.cookie.key):this._id;return ret===undefined?null:ret};Entity.prototype._setId=function(id){if(this._options.persist){this.storage().set(this._options.cookie.key,id)}else{this._id=id}};Entity.prototype.properties=Entity.prototype.traits=function(traits){switch(arguments.length){case 0:return this._getTraits();case 1:return this._setTraits(traits);default:}};Entity.prototype._getTraits=function(){var ret=this._options.persist?store.get(this._options.localStorage.key):this._traits;return ret?isodateTraverse(clone(ret)):{}};Entity.prototype._setTraits=function(traits){traits=traits||{};if(this._options.persist){store.set(this._options.localStorage.key,traits)}else{this._traits=traits}};Entity.prototype.identify=function(id,traits){traits=traits||{};var current=this.id();if(current===null||current===id)traits=extend(this.traits(),traits);if(id)this.id(id);this.debug(\"identify %o, %o\",id,traits);this.traits(traits);this.save()};Entity.prototype.save=function(){if(!this._options.persist)return false;cookie.set(this._options.cookie.key,this.id());store.set(this._options.localStorage.key,this.traits());return true};Entity.prototype.logout=function(){this.id(null);this.traits({});cookie.remove(this._options.cookie.key);store.remove(this._options.localStorage.key)};Entity.prototype.reset=function(){this.logout();this.options({})};Entity.prototype.load=function(){this.id(cookie.get(this._options.cookie.key));this.traits(store.get(this._options.localStorage.key))}},{clone:13,\"./cookie\":14,debug:15,defaults:16,extend:68,\"./memory\":21,\"./store\":28,\"isodate-traverse\":38}],68:[function(require,module,exports){module.exports=function extend(object){var args=Array.prototype.slice.call(arguments,1);for(var i=0,source;source=args[i];i++){if(!source)continue;for(var property in source){object[property]=source[property]}}return object}},{}],21:[function(require,module,exports){var bind=require(\"bind\");var clone=require(\"clone\");var has=Object.prototype.hasOwnProperty;module.exports=bind.all(new Memory);function Memory(){this.store={}}Memory.prototype.set=function(key,value){this.store[key]=clone(value);return true};Memory.prototype.get=function(key){if(!has.call(this.store,key))return;return clone(this.store[key])};Memory.prototype.remove=function(key){delete this.store[key];return true}},{bind:11,clone:13}],28:[function(require,module,exports){var bind=require(\"bind\");var defaults=require(\"defaults\");var store=require(\"store.js\");function Store(options){this.options(options)}Store.prototype.options=function(options){if(arguments.length===0)return this._options;options=options||{};defaults(options,{enabled:true});this.enabled=options.enabled&&store.enabled;this._options=options};Store.prototype.set=function(key,value){if(!this.enabled)return false;return store.set(key,value)};Store.prototype.get=function(key){if(!this.enabled)return null;return store.get(key)};Store.prototype.remove=function(key){if(!this.enabled)return false;return store.remove(key)};module.exports=bind.all(new Store);module.exports.Store=Store},{bind:11,defaults:16,\"store.js\":69}],69:[function(require,module,exports){var json=require(\"json\"),store={},win=window,doc=win.document,localStorageName=\"localStorage\",namespace=\"__storejs__\",storage;store.disabled=false;store.set=function(key,value){};store.get=function(key){};store.remove=function(key){};store.clear=function(){};store.transact=function(key,defaultVal,transactionFn){var val=store.get(key);if(transactionFn==null){transactionFn=defaultVal;defaultVal=null}if(typeof val==\"undefined\"){val=defaultVal||{}}transactionFn(val);store.set(key,val)};store.getAll=function(){};store.serialize=function(value){return json.stringify(value)};store.deserialize=function(value){if(typeof value!=\"string\"){return undefined}try{return json.parse(value)}catch(e){return value||undefined}};function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return false}}if(isLocalStorageNameSupported()){storage=win[localStorageName];store.set=function(key,val){if(val===undefined){return store.remove(key)}storage.setItem(key,store.serialize(val));return val};store.get=function(key){return store.deserialize(storage.getItem(key))};store.remove=function(key){storage.removeItem(key)};store.clear=function(){storage.clear()};store.getAll=function(){var ret={};for(var i=0;i<storage.length;++i){var key=storage.key(i);ret[key]=store.get(key)}return ret}}else if(doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject(\"htmlfile\");storageContainer.open();storageContainer.write(\"<s\"+\"cript>document.w=window</s\"+'cript><iframe src=\"/favicon.ico\"></iframe>');storageContainer.close();storageOwner=storageContainer.w.frames[0].document;storage=storageOwner.createElement(\"div\")}catch(e){storage=doc.createElement(\"div\");storageOwner=doc.body}function withIEStorage(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage);storageOwner.appendChild(storage);storage.addBehavior(\"#default#userData\");storage.load(localStorageName);var result=storeFunction.apply(store,args);storageOwner.removeChild(storage);return result}}var forbiddenCharsRegex=new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\",\"g\");function ieKeyFix(key){return key.replace(forbiddenCharsRegex,\"___\")}store.set=withIEStorage(function(storage,key,val){key=ieKeyFix(key);if(val===undefined){return store.remove(key)}storage.setAttribute(key,store.serialize(val));storage.save(localStorageName);return val});store.get=withIEStorage(function(storage,key){key=ieKeyFix(key);return store.deserialize(storage.getAttribute(key))});store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key);storage.removeAttribute(key);storage.save(localStorageName)});store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=0,attr;attr=attributes[i];i++){storage.removeAttribute(attr.name)}storage.save(localStorageName)});store.getAll=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;var ret={};for(var i=0,attr;attr=attributes[i];++i){var key=ieKeyFix(attr.name);ret[attr.name]=store.deserialize(storage.getAttribute(key))}return ret})}try{store.set(namespace,namespace);if(store.get(namespace)!=namespace){store.disabled=true}store.remove(namespace)}catch(e){store.disabled=true}store.enabled=!store.disabled;module.exports=store},{json:59}],67:[function(require,module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn;a.prototype.constructor=a}},{}],18:[function(require,module,exports){var isEmpty=require(\"is-empty\");try{var typeOf=require(\"type\")}catch(e){var typeOf=require(\"component-type\")}var types=[\"arguments\",\"array\",\"boolean\",\"date\",\"element\",\"function\",\"null\",\"number\",\"object\",\"regexp\",\"string\",\"undefined\"];for(var i=0,type;type=types[i];i++)exports[type]=generate(type);exports.fn=exports[\"function\"];exports.empty=isEmpty;exports.nan=function(val){return exports.number(val)&&val!=val};function generate(type){return function(value){return type===typeOf(value)}}},{\"is-empty\":46,type:47,\"component-type\":47}],19:[function(require,module,exports){module.exports=function isMeta(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return true;var which=e.which,button=e.button;if(!which&&button!==undefined){return!button&1&&!button&2&&button&4}else if(which===2){return true}return false}},{}],20:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(obj){var keys=[];for(var key in obj){if(has.call(obj,key)){keys.push(key)}}return keys};exports.values=function(obj){var vals=[];for(var key in obj){if(has.call(obj,key)){vals.push(obj[key])}}return vals};exports.merge=function(a,b){for(var key in b){if(has.call(b,key)){a[key]=b[key]}}return a};exports.length=function(obj){return exports.keys(obj).length};exports.isEmpty=function(obj){return 0==exports.length(obj)}},{}],22:[function(require,module,exports){var debug=require(\"debug\")(\"analytics.js:normalize\");var defaults=require(\"defaults\");var each=require(\"each\");var includes=require(\"includes\");var is=require(\"is\");var map=require(\"component/map\");var has=Object.prototype.hasOwnProperty;module.exports=normalize;var toplevel=[\"integrations\",\"anonymousId\",\"timestamp\",\"context\"];function normalize(msg,list){var lower=map(list,function(s){return s.toLowerCase()});var opts=msg.options||{};var integrations=opts.integrations||{};var providers=opts.providers||{};var context=opts.context||{};var ret={};debug(\"<-\",msg);each(opts,function(key,value){if(!integration(key))return;if(!has.call(integrations,key))integrations[key]=value;delete opts[key]});delete opts.providers;each(providers,function(key,value){if(!integration(key))return;if(is.object(integrations[key]))return;if(has.call(integrations,key)&&typeof providers[key]===\"boolean\")return;integrations[key]=value});each(opts,function(key){if(includes(key,toplevel)){ret[key]=opts[key]}else{context[key]=opts[key]}});delete msg.options;ret.integrations=integrations;ret.context=context;ret=defaults(ret,msg);debug(\"->\",ret);return ret;function integration(name){return!!(includes(name,list)||name.toLowerCase()===\"all\"||includes(name.toLowerCase(),lower))}}},{debug:15,defaults:16,each:4,includes:70,is:18,\"component/map\":71}],70:[function(require,module,exports){\"use strict\";var each;try{each=require(\"@ndhoule/each\")}catch(e){each=require(\"each\")}var strIndexOf=String.prototype.indexOf;var sameValueZero=function sameValueZero(value1,value2){if(value1===value2){return value1!==0||1/value1===1/value2}return value1!==value1&&value2!==value2};var includes=function includes(searchElement,collection){var found=false;if(typeof collection===\"string\"){return strIndexOf.call(collection,searchElement)!==-1}each(function(value){if(sameValueZero(value,searchElement)){found=true;return false}},collection);return found};module.exports=includes},{each:72}],72:[function(require,module,exports){\"use strict\";var keys;try{keys=require(\"@ndhoule/keys\")}catch(e){keys=require(\"keys\")}var objToString=Object.prototype.toString;var isNumber=function isNumber(val){var type=typeof val;return type===\"number\"||type===\"object\"&&objToString.call(val)===\"[object Number]\"};var isArray=typeof Array.isArray===\"function\"?Array.isArray:function isArray(val){return objToString.call(val)===\"[object Array]\"};var isArrayLike=function isArrayLike(val){return val!=null&&(isArray(val)||val!==\"function\"&&isNumber(val.length))};var arrayEach=function arrayEach(iterator,array){for(var i=0;i<array.length;i+=1){if(iterator(array[i],i,array)===false){break}}};var baseEach=function baseEach(iterator,object){var ks=keys(object);for(var i=0;i<ks.length;i+=1){if(iterator(object[ks[i]],ks[i],object)===false){break}}};var each=function each(iterator,collection){return(isArrayLike(collection)?arrayEach:baseEach).call(this,iterator,collection)};module.exports=each},{keys:73}],73:[function(require,module,exports){\"use strict\";var strCharAt=String.prototype.charAt;var charAt=function(str,index){return strCharAt.call(str,index)};var hop=Object.prototype.hasOwnProperty;var toStr=Object.prototype.toString;var has=function has(context,prop){return hop.call(context,prop)};var isString=function isString(val){return toStr.call(val)===\"[object String]\"};var isArrayLike=function isArrayLike(val){return val!=null&&(typeof val!==\"function\"&&typeof val.length===\"number\")};var indexKeys=function indexKeys(target,pred){pred=pred||has;var results=[];for(var i=0,len=target.length;i<len;i+=1){if(pred(target,i)){results.push(String(i))}}return results};var objectKeys=function objectKeys(target,pred){\npred=pred||has;var results=[];for(var key in target){if(pred(target,key)){results.push(String(key))}}return results};module.exports=function keys(source){if(source==null){return[]}if(isString(source)){return indexKeys(source,charAt)}if(isArrayLike(source)){return indexKeys(source,has)}return objectKeys(source)}},{}],71:[function(require,module,exports){var toFunction=require(\"to-function\");module.exports=function(arr,fn){var ret=[];fn=toFunction(fn);for(var i=0;i<arr.length;++i){ret.push(fn(arr[i],i))}return ret}},{\"to-function\":74}],74:[function(require,module,exports){var expr;try{expr=require(\"props\")}catch(e){expr=require(\"component-props\")}module.exports=toFunction;function toFunction(obj){switch({}.toString.call(obj)){case\"[object Object]\":return objectToFunction(obj);case\"[object Function]\":return obj;case\"[object String]\":return stringToFunction(obj);case\"[object RegExp]\":return regexpToFunction(obj);default:return defaultToFunction(obj)}}function defaultToFunction(val){return function(obj){return val===obj}}function regexpToFunction(re){return function(obj){return re.test(obj)}}function stringToFunction(str){if(/^ *\\W+/.test(str))return new Function(\"_\",\"return _ \"+str);return new Function(\"_\",\"return \"+get(str))}function objectToFunction(obj){var match={};for(var key in obj){match[key]=typeof obj[key]===\"string\"?defaultToFunction(obj[key]):toFunction(obj[key])}return function(val){if(typeof val!==\"object\")return false;for(var key in match){if(!(key in val))return false;if(!match[key](val[key]))return false}return true}}function get(str){var props=expr(str);if(!props.length)return\"_.\"+str;var val,i,prop;for(i=0;i<props.length;i++){prop=props[i];val=\"_.\"+prop;val=\"('function' == typeof \"+val+\" ? \"+val+\"() : \"+val+\")\";str=stripNested(prop,str,val)}return str}function stripNested(prop,str,val){return str.replace(new RegExp(\"(\\\\.)?\"+prop,\"g\"),function($0,$1){return $1?$0:val})}},{props:75,\"component-props\":75}],75:[function(require,module,exports){var globals=/\\b(this|Array|Date|Object|Math|JSON)\\b/g;module.exports=function(str,fn){var p=unique(props(str));if(fn&&\"string\"==typeof fn)fn=prefixed(fn);if(fn)return map(str,p,fn);return p};function props(str){return str.replace(/\\.\\w+|\\w+ *\\(|\"[^\"]*\"|'[^']*'|\\/([^/]+)\\//g,\"\").replace(globals,\"\").match(/[$a-zA-Z_]\\w*/g)||[]}function map(str,props,fn){var re=/\\.\\w+|\\w+ *\\(|\"[^\"]*\"|'[^']*'|\\/([^/]+)\\/|[a-zA-Z_]\\w*/g;return str.replace(re,function(_){if(\"(\"==_[_.length-1])return fn(_);if(!~props.indexOf(_))return _;return fn(_)})}function unique(arr){var ret=[];for(var i=0;i<arr.length;i++){if(~ret.indexOf(arr[i]))continue;ret.push(arr[i])}return ret}function prefixed(str){return function(_){return str+_}}},{}],23:[function(require,module,exports){exports.bind=function(el,type,fn,capture){if(el.addEventListener){el.addEventListener(type,fn,capture||false)}else{el.attachEvent(\"on\"+type,fn)}return fn};exports.unbind=function(el,type,fn,capture){if(el.removeEventListener){el.removeEventListener(type,fn,capture||false)}else{el.detachEvent(\"on\"+type,fn)}return fn}},{}],24:[function(require,module,exports){var canonical=require(\"canonical\");var includes=require(\"includes\");var url=require(\"url\");function pageDefaults(){return{path:canonicalPath(),referrer:document.referrer,search:location.search,title:document.title,url:canonicalUrl(location.search)}}function canonicalPath(){var canon=canonical();if(!canon)return window.location.pathname;var parsed=url.parse(canon);return parsed.pathname}function canonicalUrl(search){var canon=canonical();if(canon)return includes(\"?\",canon)?canon:canon+search;var url=window.location.href;var i=url.indexOf(\"#\");return i===-1?url:url.slice(0,i)}module.exports=pageDefaults},{canonical:76,includes:70,url:77}],76:[function(require,module,exports){module.exports=function canonical(){var tags=document.getElementsByTagName(\"link\");for(var i=0,tag;tag=tags[i];i++){if(\"canonical\"==tag.getAttribute(\"rel\"))return tag.getAttribute(\"href\")}}},{}],77:[function(require,module,exports){exports.parse=function(url){var a=document.createElement(\"a\");a.href=url;return{href:a.href,host:a.host||location.host,port:\"0\"===a.port||\"\"===a.port?port(a.protocol):a.port,hash:a.hash,hostname:a.hostname||location.hostname,pathname:a.pathname.charAt(0)!=\"/\"?\"/\"+a.pathname:a.pathname,protocol:!a.protocol||\":\"==a.protocol?location.protocol:a.protocol,search:a.search,query:a.search.slice(1)}};exports.isAbsolute=function(url){return 0==url.indexOf(\"//\")||!!~url.indexOf(\"://\")};exports.isRelative=function(url){return!exports.isAbsolute(url)};exports.isCrossDomain=function(url){url=exports.parse(url);var location=exports.parse(window.location.href);return url.hostname!==location.hostname||url.port!==location.port||url.protocol!==location.protocol};function port(protocol){switch(protocol){case\"http:\":return 80;case\"https:\":return 443;default:return location.port}}},{}],25:[function(require,module,exports){\"use strict\";var objToString=Object.prototype.toString;var existy=function(val){return val!=null};var isArray=function(val){return objToString.call(val)===\"[object Array]\"};var isString=function(val){return typeof val===\"string\"||objToString.call(val)===\"[object String]\"};var isObject=function(val){return val!=null&&typeof val===\"object\"};var pick=function pick(props,object){if(!existy(object)||!isObject(object)){return{}}if(isString(props)){props=[props]}if(!isArray(props)){props=[]}var result={};for(var i=0;i<props.length;i+=1){if(isString(props[i])&&props[i]in object){result[props[i]]=object[props[i]]}}return result};module.exports=pick},{}],26:[function(require,module,exports){module.exports=function(e){e=e||window.event;return e.preventDefault?e.preventDefault():e.returnValue=false}},{}],27:[function(require,module,exports){var trim=require(\"trim\");var type=require(\"type\");var pattern=/(\\w+)\\[(\\d+)\\]/;var encode=function(str){try{return encodeURIComponent(str)}catch(e){return str}};var decode=function(str){try{return decodeURIComponent(str.replace(/\\+/g,\" \"))}catch(e){return str}};exports.parse=function(str){if(\"string\"!=typeof str)return{};str=trim(str);if(\"\"==str)return{};if(\"?\"==str.charAt(0))str=str.slice(1);var obj={};var pairs=str.split(\"&\");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split(\"=\");var key=decode(parts[0]);var m;if(m=pattern.exec(key)){obj[m[1]]=obj[m[1]]||[];obj[m[1]][m[2]]=decode(parts[1]);continue}obj[parts[0]]=null==parts[1]?\"\":decode(parts[1])}return obj};exports.stringify=function(obj){if(!obj)return\"\";var pairs=[];for(var key in obj){var value=obj[key];if(\"array\"==type(value)){for(var i=0;i<value.length;++i){pairs.push(encode(key+\"[\"+i+\"]\")+\"=\"+encode(value[i]))}continue}pairs.push(encode(key)+\"=\"+encode(obj[key]))}return pairs.join(\"&\")}},{trim:54,type:47}],29:[function(require,module,exports){var Entity=require(\"./entity\");var bind=require(\"bind\");var cookie=require(\"./cookie\");var debug=require(\"debug\")(\"analytics:user\");var inherit=require(\"inherit\");var rawCookie=require(\"cookie\");var uuid=require(\"uuid\");User.defaults={persist:true,cookie:{key:\"ajs_user_id\",oldKey:\"ajs_user\"},localStorage:{key:\"ajs_user_traits\"}};function User(options){this.defaults=User.defaults;this.debug=debug;Entity.call(this,options)}inherit(User,Entity);User.prototype.id=function(id){var prev=this._getId();var ret=Entity.prototype.id.apply(this,arguments);if(prev==null)return ret;if(prev!=id&&id)this.anonymousId(null);return ret};User.prototype.anonymousId=function(anonymousId){var store=this.storage();if(arguments.length){store.set(\"ajs_anonymous_id\",anonymousId);return this}anonymousId=store.get(\"ajs_anonymous_id\");if(anonymousId){return anonymousId}anonymousId=rawCookie(\"_sio\");if(anonymousId){anonymousId=anonymousId.split(\"----\")[0];store.set(\"ajs_anonymous_id\",anonymousId);store.remove(\"_sio\");return anonymousId}anonymousId=uuid();store.set(\"ajs_anonymous_id\",anonymousId);return store.get(\"ajs_anonymous_id\")};User.prototype.logout=function(){Entity.prototype.logout.call(this);this.anonymousId(null)};User.prototype.load=function(){if(this._loadOldCookie())return;Entity.prototype.load.call(this)};User.prototype._loadOldCookie=function(){var user=cookie.get(this._options.cookie.oldKey);if(!user)return false;this.id(user.id);this.traits(user.traits);cookie.remove(this._options.cookie.oldKey);return true};module.exports=bind.all(new User);module.exports.User=User},{\"./entity\":66,bind:11,\"./cookie\":14,debug:15,inherit:67,cookie:58,uuid:78}],78:[function(require,module,exports){module.exports=function uuid(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,uuid)}},{}],7:[function(require,module,exports){module.exports={name:\"analytics-core\",version:\"2.10.0\",main:\"analytics.js\",dependencies:{},devDependencies:{}}},{}],3:[function(require,module,exports){\"use strict\";module.exports={adroll:require(\"analytics.js-integration-adroll\"),adwords:require(\"analytics.js-integration-adwords\"),alexa:require(\"analytics.js-integration-alexa\"),amplitude:require(\"analytics.js-integration-amplitude\"),appcues:require(\"analytics.js-integration-appcues\"),atatus:require(\"analytics.js-integration-atatus\"),autosend:require(\"analytics.js-integration-autosend\"),awesm:require(\"analytics.js-integration-awesm\"),\"bing-ads\":require(\"analytics.js-integration-bing-ads\"),blueshift:require(\"analytics.js-integration-blueshift\"),bronto:require(\"analytics.js-integration-bronto\"),bugherd:require(\"analytics.js-integration-bugherd\"),bugsnag:require(\"analytics.js-integration-bugsnag\"),chameleon:require(\"analytics.js-integration-chameleon\"),chartbeat:require(\"analytics.js-integration-chartbeat\"),clicktale:require(\"analytics.js-integration-clicktale\"),clicky:require(\"analytics.js-integration-clicky\"),comscore:require(\"analytics.js-integration-comscore\"),\"crazy-egg\":require(\"analytics.js-integration-crazy-egg\"),curebit:require(\"analytics.js-integration-curebit\"),customerio:require(\"analytics.js-integration-customerio\"),drip:require(\"analytics.js-integration-drip\"),elevio:require(\"analytics.js-integration-elevio\"),errorception:require(\"analytics.js-integration-errorception\"),evergage:require(\"analytics.js-integration-evergage\"),extole:require(\"analytics.js-integration-extole\"),\"facebook-conversion-tracking\":require(\"analytics.js-integration-facebook-conversion-tracking\"),\"facebook-custom-audiences\":require(\"analytics.js-integration-facebook-custom-audiences\"),foxmetrics:require(\"analytics.js-integration-foxmetrics\"),frontleaf:require(\"analytics.js-integration-frontleaf\"),fullstory:require(\"analytics.js-integration-fullstory\"),gauges:require(\"analytics.js-integration-gauges\"),\"get-satisfaction\":require(\"analytics.js-integration-get-satisfaction\"),\"google-analytics\":require(\"analytics.js-integration-google-analytics\"),\"google-tag-manager\":require(\"analytics.js-integration-google-tag-manager\"),gosquared:require(\"analytics.js-integration-gosquared\"),heap:require(\"analytics.js-integration-heap\"),hellobar:require(\"analytics.js-integration-hellobar\"),hittail:require(\"analytics.js-integration-hittail\"),hubspot:require(\"analytics.js-integration-hubspot\"),improvely:require(\"analytics.js-integration-improvely\"),insidevault:require(\"analytics.js-integration-insidevault\"),inspectlet:require(\"analytics.js-integration-inspectlet\"),intercom:require(\"analytics.js-integration-intercom\"),\"keen-io\":require(\"analytics.js-integration-keen-io\"),kenshoo:require(\"analytics.js-integration-kenshoo\"),kissmetrics:require(\"analytics.js-integration-kissmetrics\"),klaviyo:require(\"analytics.js-integration-klaviyo\"),livechat:require(\"analytics.js-integration-livechat\"),\"lucky-orange\":require(\"analytics.js-integration-lucky-orange\"),lytics:require(\"analytics.js-integration-lytics\"),mixpanel:require(\"analytics.js-integration-mixpanel\"),mojn:require(\"analytics.js-integration-mojn\"),mouseflow:require(\"analytics.js-integration-mouseflow\"),mousestats:require(\"analytics.js-integration-mousestats\"),navilytics:require(\"analytics.js-integration-navilytics\"),nudgespot:require(\"analytics.js-integration-nudgespot\"),olark:require(\"analytics.js-integration-olark\"),optimizely:require(\"analytics.js-integration-optimizely\"),outbound:require(\"analytics.js-integration-outbound\"),\"perfect-audience\":require(\"analytics.js-integration-perfect-audience\"),pingdom:require(\"analytics.js-integration-pingdom\"),piwik:require(\"analytics.js-integration-piwik\"),preact:require(\"analytics.js-integration-preact\"),qualaroo:require(\"analytics.js-integration-qualaroo\"),quantcast:require(\"analytics.js-integration-quantcast\"),rollbar:require(\"analytics.js-integration-rollbar\"),route:require(\"analytics.js-integration-route\"),saasquatch:require(\"analytics.js-integration-saasquatch\"),satismeter:require(\"analytics.js-integration-satismeter\"),segmentio:require(\"analytics.js-integration-segmentio\"),sentry:require(\"analytics.js-integration-sentry\"),snapengage:require(\"analytics.js-integration-snapengage\"),spinnakr:require(\"analytics.js-integration-spinnakr\"),supporthero:require(\"analytics.js-integration-supporthero\"),taplytics:require(\"analytics.js-integration-taplytics\"),tapstream:require(\"analytics.js-integration-tapstream\"),trakio:require(\"analytics.js-integration-trakio\"),\"twitter-ads\":require(\"analytics.js-integration-twitter-ads\"),userlike:require(\"analytics.js-integration-userlike\"),uservoice:require(\"analytics.js-integration-uservoice\"),vero:require(\"analytics.js-integration-vero\"),\"visual-website-optimizer\":require(\"analytics.js-integration-visual-website-optimizer\"),webengage:require(\"analytics.js-integration-webengage\"),woopra:require(\"analytics.js-integration-woopra\"),wootric:require(\"analytics.js-integration-wootric\"),\"yandex-metrica\":require(\"analytics.js-integration-yandex-metrica\")}},{\"analytics.js-integration-adroll\":79,\"analytics.js-integration-adwords\":80,\"analytics.js-integration-alexa\":81,\"analytics.js-integration-amplitude\":82,\"analytics.js-integration-appcues\":83,\"analytics.js-integration-atatus\":84,\"analytics.js-integration-autosend\":85,\"analytics.js-integration-awesm\":86,\"analytics.js-integration-bing-ads\":87,\"analytics.js-integration-blueshift\":88,\"analytics.js-integration-bronto\":89,\"analytics.js-integration-bugherd\":90,\"analytics.js-integration-bugsnag\":91,\"analytics.js-integration-chameleon\":92,\"analytics.js-integration-chartbeat\":93,\"analytics.js-integration-clicktale\":94,\"analytics.js-integration-clicky\":95,\"analytics.js-integration-comscore\":96,\"analytics.js-integration-crazy-egg\":97,\"analytics.js-integration-curebit\":98,\"analytics.js-integration-customerio\":99,\"analytics.js-integration-drip\":100,\"analytics.js-integration-elevio\":101,\"analytics.js-integration-errorception\":102,\"analytics.js-integration-evergage\":103,\"analytics.js-integration-extole\":104,\"analytics.js-integration-facebook-conversion-tracking\":105,\"analytics.js-integration-facebook-custom-audiences\":106,\"analytics.js-integration-foxmetrics\":107,\"analytics.js-integration-frontleaf\":108,\"analytics.js-integration-fullstory\":109,\"analytics.js-integration-gauges\":110,\"analytics.js-integration-get-satisfaction\":111,\"analytics.js-integration-google-analytics\":112,\"analytics.js-integration-google-tag-manager\":113,\"analytics.js-integration-gosquared\":114,\"analytics.js-integration-heap\":115,\"analytics.js-integration-hellobar\":116,\"analytics.js-integration-hittail\":117,\"analytics.js-integration-hubspot\":118,\"analytics.js-integration-improvely\":119,\"analytics.js-integration-insidevault\":120,\"analytics.js-integration-inspectlet\":121,\"analytics.js-integration-intercom\":122,\"analytics.js-integration-keen-io\":123,\"analytics.js-integration-kenshoo\":124,\"analytics.js-integration-kissmetrics\":125,\"analytics.js-integration-klaviyo\":126,\"analytics.js-integration-livechat\":127,\"analytics.js-integration-lucky-orange\":128,\"analytics.js-integration-lytics\":129,\"analytics.js-integration-mixpanel\":130,\"analytics.js-integration-mojn\":131,\"analytics.js-integration-mouseflow\":132,\"analytics.js-integration-mousestats\":133,\"analytics.js-integration-navilytics\":134,\"analytics.js-integration-nudgespot\":135,\"analytics.js-integration-olark\":136,\"analytics.js-integration-optimizely\":137,\"analytics.js-integration-outbound\":138,\"analytics.js-integration-perfect-audience\":139,\"analytics.js-integration-pingdom\":140,\"analytics.js-integration-piwik\":141,\"analytics.js-integration-preact\":142,\"analytics.js-integration-qualaroo\":143,\"analytics.js-integration-quantcast\":144,\"analytics.js-integration-rollbar\":145,\"analytics.js-integration-route\":146,\"analytics.js-integration-saasquatch\":147,\"analytics.js-integration-satismeter\":148,\"analytics.js-integration-segmentio\":149,\"analytics.js-integration-sentry\":150,\"analytics.js-integration-snapengage\":151,\"analytics.js-integration-spinnakr\":152,\"analytics.js-integration-supporthero\":153,\"analytics.js-integration-taplytics\":154,\"analytics.js-integration-tapstream\":155,\"analytics.js-integration-trakio\":156,\"analytics.js-integration-twitter-ads\":157,\"analytics.js-integration-userlike\":158,\"analytics.js-integration-uservoice\":159,\"analytics.js-integration-vero\":160,\"analytics.js-integration-visual-website-optimizer\":161,\"analytics.js-integration-webengage\":162,\"analytics.js-integration-woopra\":163,\"analytics.js-integration-wootric\":164,\"analytics.js-integration-yandex-metrica\":165}],79:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var snake=require(\"to-snake-case\");var useHttps=require(\"use-https\");var each=require(\"each\");var is=require(\"is\");var del=require(\"obj-case\").del;var AdRoll=module.exports=integration(\"AdRoll\").assumesPageview().global(\"__adroll\").global(\"__adroll_loaded\").global(\"adroll_adv_id\").global(\"adroll_custom_data\").global(\"adroll_pix_id\").option(\"advId\",\"\").option(\"pixId\",\"\").tag(\"http\",'<script src=\"http://a.adroll.com/j/roundtrip.js\">').tag(\"https\",'<script src=\"https://s.adroll.com/j/roundtrip.js\">').mapping(\"events\");AdRoll.prototype.initialize=function(){window.adroll_adv_id=this.options.advId;window.adroll_pix_id=this.options.pixId;window.__adroll_loaded=true;var name=useHttps()?\"https\":\"http\";this.load(name,this.ready)};AdRoll.prototype.loaded=function(){return!!window.__adroll};AdRoll.prototype.page=function(page){var name=page.fullName();this.track(page.track(name))};AdRoll.prototype.track=function(track){var event=track.event();var user=this.analytics.user();var events=this.events(event);var total=track.revenue()||track.total()||0;var orderId=track.orderId()||0;var productId=track.id();var sku=track.sku();var customProps=track.properties();var data={};if(user.id())data.user_id=user.id();if(orderId)data.order_id=orderId;if(productId)data.product_id=productId;if(sku)data.sku=sku;if(total)data.adroll_conversion_value_in_dollars=total;del(customProps,\"revenue\");del(customProps,\"total\");del(customProps,\"orderId\");del(customProps,\"id\");del(customProps,\"sku\");if(!is.empty(customProps))data.adroll_custom_data=customProps;each(events,function(event){data.adroll_segments=snake(event);window.__adroll.record_user(data)});if(!events.length){data.adroll_segments=snake(event);window.__adroll.record_user(data)}}},{\"analytics.js-integration\":166,\"to-snake-case\":167,\"use-https\":168,each:4,is:18,\"obj-case\":42}],166:[function(require,module,exports){var bind=require(\"bind\");var clone=require(\"clone\");var debug=require(\"debug\");var defaults=require(\"defaults\");var extend=require(\"extend\");var slug=require(\"slug\");var protos=require(\"./protos\");var statics=require(\"./statics\");function createIntegration(name){function Integration(options){if(options&&options.addIntegration){return options.addIntegration(Integration)}this.debug=debug(\"analytics:integration:\"+slug(name));this.options=defaults(clone(options)||{},this.defaults);this._queue=[];this.once(\"ready\",bind(this,this.flush));Integration.emit(\"construct\",this);this.ready=bind(this,this.ready);this._wrapInitialize();this._wrapPage();this._wrapTrack()}Integration.prototype.defaults={};Integration.prototype.globals=[];Integration.prototype.templates={};Integration.prototype.name=name;extend(Integration,statics);extend(Integration.prototype,protos);return Integration}module.exports=createIntegration},{bind:169,clone:13,debug:170,defaults:16,extend:171,slug:172,\"./protos\":173,\"./statics\":174}],169:[function(require,module,exports){var bind=require(\"bind\"),bindAll=require(\"bind-all\");module.exports=exports=bind;exports.all=bindAll;exports.methods=bindMethods;function bindMethods(obj,methods){methods=[].slice.call(arguments,1);for(var i=0,method;method=methods[i];i++){obj[method]=bind(obj,obj[method])}return obj}},{bind:55,\"bind-all\":56}],170:[function(require,module,exports){if(\"undefined\"==typeof window){module.exports=require(\"./lib/debug\")}else{module.exports=require(\"./debug\")}},{\"./lib/debug\":175,\"./debug\":176}],175:[function(require,module,exports){var tty=require(\"tty\");module.exports=debug;var names=[],skips=[];(process.env.DEBUG||\"\").split(/[\\s,]+/).forEach(function(name){name=name.replace(\"*\",\".*?\");if(name[0]===\"-\"){skips.push(new RegExp(\"^\"+name.substr(1)+\"$\"))}else{names.push(new RegExp(\"^\"+name+\"$\"))}});var colors=[6,2,3,4,5,1];var prev={};var prevColor=0;var isatty=tty.isatty(2);function color(){return colors[prevColor++%colors.length]}function humanize(ms){var sec=1e3,min=60*1e3,hour=60*min;if(ms>=hour)return(ms/hour).toFixed(1)+\"h\";if(ms>=min)return(ms/min).toFixed(1)+\"m\";if(ms>=sec)return(ms/sec|0)+\"s\";return ms+\"ms\"}function debug(name){function disabled(){}disabled.enabled=false;var match=skips.some(function(re){return re.test(name)});if(match)return disabled;match=names.some(function(re){return re.test(name)});if(!match)return disabled;var c=color();function colored(fmt){fmt=coerce(fmt);var curr=new Date;var ms=curr-(prev[name]||curr);prev[name]=curr;fmt=\"  \u001b[9\"+c+\"m\"+name+\" \"+\"\u001b[3\"+c+\"m\u001b[90m\"+fmt+\"\u001b[3\"+c+\"m\"+\" +\"+humanize(ms)+\"\u001b[0m\";console.error.apply(this,arguments)}function plain(fmt){fmt=coerce(fmt);fmt=(new Date).toUTCString()+\" \"+name+\" \"+fmt;console.error.apply(this,arguments)}colored.enabled=plain.enabled=true;return isatty||process.env.DEBUG_COLORS?colored:plain}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{}],176:[function(require,module,exports){module.exports=debug;function debug(name){if(!debug.enabled(name))return function(){};return function(fmt){fmt=coerce(fmt);var curr=new Date;var ms=curr-(debug[name]||curr);debug[name]=curr;fmt=name+\" \"+fmt+\" +\"+debug.humanize(ms);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}}debug.names=[];debug.skips=[];debug.enable=function(name){try{localStorage.debug=name}catch(e){}var split=(name||\"\").split(/[\\s,]+/),len=split.length;for(var i=0;i<len;i++){name=split[i].replace(\"*\",\".*?\");if(name[0]===\"-\"){debug.skips.push(new RegExp(\"^\"+name.substr(1)+\"$\"))}else{debug.names.push(new RegExp(\"^\"+name+\"$\"))}}};debug.disable=function(){debug.enable(\"\")};debug.humanize=function(ms){var sec=1e3,min=60*1e3,hour=60*min;if(ms>=hour)return(ms/hour).toFixed(1)+\"h\";if(ms>=min)return(ms/min).toFixed(1)+\"m\";if(ms>=sec)return(ms/sec|0)+\"s\";return ms+\"ms\"};debug.enabled=function(name){for(var i=0,len=debug.skips.length;i<len;i++){if(debug.skips[i].test(name)){return false}}for(var i=0,len=debug.names.length;i<len;i++){if(debug.names[i].test(name)){return true}}return false};function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}try{if(window.localStorage)debug.enable(localStorage.debug)}catch(e){}},{}],171:[function(require,module,exports){module.exports=function extend(object){var args=Array.prototype.slice.call(arguments,1);for(var i=0,source;source=args[i];i++){if(!source)continue;for(var property in source){object[property]=source[property]}}return object}},{}],172:[function(require,module,exports){module.exports=function(str,options){options||(options={});return str.toLowerCase().replace(options.replace||/[^a-z0-9]/g,\" \").replace(/^ +| +$/g,\"\").replace(/ +/g,options.separator||\"-\")}},{}],173:[function(require,module,exports){var Emitter=require(\"emitter\");var after=require(\"after\");var each=require(\"each\");var events=require(\"analytics-events\");var fmt=require(\"fmt\");var foldl=require(\"foldl\");var loadIframe=require(\"load-iframe\");var loadScript=require(\"load-script\");var normalize=require(\"to-no-case\");var nextTick=require(\"next-tick\");var type=require(\"type\");function noop(){}var has=Object.prototype.hasOwnProperty;var onerror=window.onerror;var onload=null;var setInterval=window.setInterval;var setTimeout=window.setTimeout;Emitter(exports);exports.initialize=function(){var ready=this.ready;nextTick(ready)};exports.loaded=function(){return false};exports.page=function(page){};exports.track=function(track){};exports.map=function(events,event){var normalizedEvent=normalize(event);return foldl(function(matchingEvents,val,key,events){if(type(events)===\"array\"){if(!val.key)return matchingEvents;key=val.key;val=val.value}if(normalize(key)===normalizedEvent){matchingEvents.push(val)}return matchingEvents},[],events)};exports.invoke=function(method){if(!this[method])return;var args=Array.prototype.slice.call(arguments,1);if(!this._ready)return this.queue(method,args);var ret;try{this.debug(\"%s with %o\",method,args);ret=this[method].apply(this,args)}catch(e){this.debug(\"error %o calling %s with %o\",e,method,args)}return ret};exports.queue=function(method,args){if(method===\"page\"&&this._assumesPageview&&!this._initialized){return this.page.apply(this,args)}this._queue.push({method:method,args:args})};exports.flush=function(){this._ready=true;var self=this;each(this._queue,function(call){self[call.method].apply(self,call.args)});this._queue.length=0};exports.reset=function(){for(var i=0;i<this.globals.length;i++){window[this.globals[i]]=undefined}window.setTimeout=setTimeout;window.setInterval=setInterval;window.onerror=onerror;window.onload=onload};exports.load=function(name,locals,callback){if(typeof name===\"function\"){callback=name;locals=null;name=null}if(name&&typeof name===\"object\"){callback=locals;locals=name;name=null}if(typeof locals===\"function\"){callback=locals;locals=null}name=name||\"library\";locals=locals||{};locals=this.locals(locals);var template=this.templates[name];if(!template)throw new Error(fmt('template \"%s\" not defined.',name));var attrs=render(template,locals);callback=callback||noop;var self=this;var el;switch(template.type){case\"img\":attrs.width=1;attrs.height=1;el=loadImage(attrs,callback);break;case\"script\":el=loadScript(attrs,function(err){if(!err)return callback();self.debug('error loading \"%s\" error=\"%s\"',self.name,err)});delete attrs.src;each(attrs,function(key,val){el.setAttribute(key,val)});break;case\"iframe\":el=loadIframe(attrs,callback);break;default:}return el};exports.locals=function(locals){locals=locals||{};var cache=Math.floor((new Date).getTime()/36e5);if(!locals.hasOwnProperty(\"cache\"))locals.cache=cache;each(this.options,function(key,val){if(!locals.hasOwnProperty(key))locals[key]=val});return locals};exports.ready=function(){this.emit(\"ready\")};exports._wrapInitialize=function(){var initialize=this.initialize;this.initialize=function(){this.debug(\"initialize\");this._initialized=true;var ret=initialize.apply(this,arguments);this.emit(\"initialize\");return ret};if(this._assumesPageview)this.initialize=after(2,this.initialize)};exports._wrapPage=function(){var page=this.page;this.page=function(){if(this._assumesPageview&&!this._initialized){return this.initialize.apply(this,arguments)}return page.apply(this,arguments)}};exports._wrapTrack=function(){var t=this.track;this.track=function(track){var event=track.event();var called;var ret;for(var method in events){if(has.call(events,method)){var regexp=events[method];if(!this[method])continue;if(!regexp.test(event))continue;ret=this[method].apply(this,arguments);called=true;break}}if(!called)ret=t.apply(this,arguments);return ret}};function loadImage(attrs,fn){fn=fn||function(){};var img=new Image;img.onerror=error(fn,\"failed to load pixel\",img);img.onload=function(){fn()};img.src=attrs.src;img.width=1;img.height=1;return img}function error(fn,message,img){return function(e){e=e||window.event;var err=new Error(message);err.event=e;err.source=img;fn(err)}}function render(template,locals){return foldl(function(attrs,val,key){attrs[key]=val.replace(/\\{\\{\\ *(\\w+)\\ *\\}\\}/g,function(_,$1){return locals[$1]});return attrs},{},template.attrs)}},{emitter:8,after:10,each:177,\"analytics-events\":178,fmt:179,foldl:180,\"load-iframe\":181,\"load-script\":182,\"to-no-case\":183,\"next-tick\":57,type:184}],177:[function(require,module,exports){try{var type=require(\"type\")}catch(err){var type=require(\"component-type\")}var toFunction=require(\"to-function\");var has=Object.prototype.hasOwnProperty;module.exports=function(obj,fn,ctx){fn=toFunction(fn);ctx=ctx||this;switch(type(obj)){case\"array\":return array(obj,fn,ctx);case\"object\":if(\"number\"==typeof obj.length)return array(obj,fn,ctx);return object(obj,fn,ctx);case\"string\":return string(obj,fn,ctx)}};function string(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj.charAt(i),i)}}function object(obj,fn,ctx){for(var key in obj){if(has.call(obj,key)){fn.call(ctx,key,obj[key])}}}function array(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj[i],i)}}},{type:184,\"component-type\":184,\"to-function\":74}],184:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case\"[object Function]\":return\"function\";case\"[object Date]\":return\"date\";case\"[object RegExp]\":return\"regexp\";case\"[object Arguments]\":return\"arguments\";case\"[object Array]\":return\"array\";case\"[object String]\":return\"string\"}if(val===null)return\"null\";if(val===undefined)return\"undefined\";if(val&&val.nodeType===1)return\"element\";if(val===Object(val))return\"object\";return typeof val}},{}],178:[function(require,module,exports){module.exports={removedProduct:/^[ _]?removed[ _]?product[ _]?$/i,viewedProduct:/^[ _]?viewed[ _]?product[ _]?$/i,viewedProductCategory:/^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,addedProduct:/^[ _]?added[ _]?product[ _]?$/i,completedOrder:/^[ _]?completed[ _]?order[ _]?$/i,startedOrder:/^[ _]?started[ _]?order[ _]?$/i,updatedOrder:/^[ _]?updated[ _]?order[ _]?$/i,refundedOrder:/^[ _]?refunded?[ _]?order[ _]?$/i,viewedProductDetails:/^[ _]?viewed[ _]?product[ _]?details?[ _]?$/i,clickedProduct:/^[ _]?clicked[ _]?product[ _]?$/i,viewedPromotion:/^[ _]?viewed[ _]?promotion?[ _]?$/i,clickedPromotion:/^[ _]?clicked[ _]?promotion?[ _]?$/i,viewedCheckoutStep:/^[ _]?viewed[ _]?checkout[ _]?step[ _]?$/i,completedCheckoutStep:/^[ _]?completed[ _]?checkout[ _]?step[ _]?$/i}},{}],179:[function(require,module,exports){var toString=window.JSON?JSON.stringify:function(_){return String(_)};module.exports=fmt;fmt.o=toString;fmt.s=String;fmt.d=parseInt;function fmt(str){var args=[].slice.call(arguments,1);var j=0;return str.replace(/%([a-z])/gi,function(_,f){return fmt[f]?fmt[f](args[j++]):_+f})}},{}],180:[function(require,module,exports){\"use strict\";var each;try{each=require(\"@ndhoule/each\")}catch(e){each=require(\"each\")}var foldl=function foldl(iterator,accumulator,collection){if(typeof iterator!==\"function\"){throw new TypeError(\"Expected a function but received a \"+typeof iterator)}each(function(val,i,collection){accumulator=iterator(accumulator,val,i,collection)},collection);return accumulator};module.exports=foldl},{each:72}],181:[function(require,module,exports){var onload=require(\"script-onload\");var tick=require(\"next-tick\");var type=require(\"type\");module.exports=function loadIframe(options,fn){if(!options)throw new Error(\"Cant load nothing...\");if(\"string\"==type(options))options={src:options};var https=document.location.protocol===\"https:\"||document.location.protocol===\"chrome-extension:\";if(options.src&&options.src.indexOf(\"//\")===0){options.src=https?\"https:\"+options.src:\"http:\"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var iframe=document.createElement(\"iframe\");\niframe.src=options.src;iframe.width=options.width||1;iframe.height=options.height||1;iframe.style.display=\"none\";if(\"function\"==type(fn)){onload(iframe,fn)}tick(function(){var firstScript=document.getElementsByTagName(\"script\")[0];firstScript.parentNode.insertBefore(iframe,firstScript)});return iframe}},{\"script-onload\":185,\"next-tick\":57,type:47}],185:[function(require,module,exports){module.exports=function(el,fn){return el.addEventListener?add(el,fn):attach(el,fn)};function add(el,fn){el.addEventListener(\"load\",function(_,e){fn(null,e)},false);el.addEventListener(\"error\",function(e){var err=new Error('script error \"'+el.src+'\"');err.event=e;fn(err)},false)}function attach(el,fn){el.attachEvent(\"onreadystatechange\",function(e){if(!/complete|loaded/.test(el.readyState))return;fn(null,e)});el.attachEvent(\"onerror\",function(e){var err=new Error('failed to load the script \"'+el.src+'\"');err.event=e||window.event;fn(err)})}},{}],182:[function(require,module,exports){var onload=require(\"script-onload\");var tick=require(\"next-tick\");var type=require(\"type\");module.exports=function loadScript(options,fn){if(!options)throw new Error(\"Cant load nothing...\");if(\"string\"==type(options))options={src:options};var https=document.location.protocol===\"https:\"||document.location.protocol===\"chrome-extension:\";if(options.src&&options.src.indexOf(\"//\")===0){options.src=https?\"https:\"+options.src:\"http:\"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var script=document.createElement(\"script\");script.type=\"text/javascript\";script.async=true;script.src=options.src;if(\"function\"==type(fn)){onload(script,fn)}tick(function(){var firstScript=document.getElementsByTagName(\"script\")[0];firstScript.parentNode.insertBefore(script,firstScript)});return script}},{\"script-onload\":185,\"next-tick\":57,type:47}],183:[function(require,module,exports){module.exports=toNoCase;var hasSpace=/\\s/;var hasSeparator=/[\\W_]/;function toNoCase(string){if(hasSpace.test(string))return string.toLowerCase();if(hasSeparator.test(string))return unseparate(string).toLowerCase();return uncamelize(string).toLowerCase()}var separatorSplitter=/[\\W_]+(.|$)/g;function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?\" \"+next:\"\"})}var camelSplitter=/(.)([A-Z]+)/g;function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+\" \"+uppers.toLowerCase().split(\"\").join(\" \")})}},{}],174:[function(require,module,exports){var Emitter=require(\"emitter\");var domify=require(\"domify\");var each=require(\"each\");var includes=require(\"includes\");Emitter(exports);exports.option=function(key,value){this.prototype.defaults[key]=value;return this};exports.mapping=function(name){this.option(name,[]);this.prototype[name]=function(str){return this.map(this.options[name],str)};return this};exports.global=function(key){this.prototype.globals.push(key);return this};exports.assumesPageview=function(){this.prototype._assumesPageview=true;return this};exports.readyOnLoad=function(){this.prototype._readyOnLoad=true;return this};exports.readyOnInitialize=function(){this.prototype._readyOnInitialize=true;return this};exports.tag=function(name,tag){if(tag==null){tag=name;name=\"library\"}this.prototype.templates[name]=objectify(tag);return this};function objectify(str){str=str.replace(' src=\"',' data-src=\"');var el=domify(str);var attrs={};each(el.attributes,function(attr){var name=attr.name===\"data-src\"?\"src\":attr.name;if(!includes(attr.name+\"=\",str))return;attrs[name]=attr.value});return{type:el.tagName.toLowerCase(),attrs:attrs}}},{emitter:8,domify:186,each:177,includes:70}],186:[function(require,module,exports){module.exports=parse;var div=document.createElement(\"div\");div.innerHTML='  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>';var innerHTMLBug=!div.getElementsByTagName(\"link\").length;div=undefined;var map={legend:[1,\"<fieldset>\",\"</fieldset>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],_default:innerHTMLBug?[1,\"X<div>\",\"</div>\"]:[0,\"\",\"\"]};map.td=map.th=[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"];map.option=map.optgroup=[1,'<select multiple=\"multiple\">',\"</select>\"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,\"<table>\",\"</table>\"];map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">',\"</svg>\"];function parse(html,doc){if(\"string\"!=typeof html)throw new TypeError(\"String expected\");if(!doc)doc=document;var m=/<([\\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\\s+|\\s+$/g,\"\");var tag=m[1];if(tag==\"body\"){var el=doc.createElement(\"html\");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement(\"div\");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],167:[function(require,module,exports){var toSpace=require(\"to-space-case\");module.exports=toSnakeCase;function toSnakeCase(string){return toSpace(string).replace(/\\s/g,\"_\")}},{\"to-space-case\":187}],187:[function(require,module,exports){var clean=require(\"to-no-case\");module.exports=toSpaceCase;function toSpaceCase(string){return clean(string).replace(/[\\W_]+(.|$)/g,function(matches,match){return match?\" \"+match:\"\"})}},{\"to-no-case\":188}],188:[function(require,module,exports){module.exports=toNoCase;var hasSpace=/\\s/;var hasCamel=/[a-z][A-Z]/;var hasSeparator=/[\\W_]/;function toNoCase(string){if(hasSpace.test(string))return string.toLowerCase();if(hasSeparator.test(string))string=unseparate(string);if(hasCamel.test(string))string=uncamelize(string);return string.toLowerCase()}var separatorSplitter=/[\\W_]+(.|$)/g;function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?\" \"+next:\"\"})}var camelSplitter=/(.)([A-Z]+)/g;function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+\" \"+uppers.toLowerCase().split(\"\").join(\" \")})}},{}],168:[function(require,module,exports){module.exports=function(url){switch(arguments.length){case 0:return check();case 1:return transform(url)}};function transform(url){return check()?\"https:\"+url:\"http:\"+url}function check(){return location.protocol==\"https:\"||location.protocol==\"chrome-extension:\"}},{}],80:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var AdWords=module.exports=integration(\"AdWords\").option(\"conversionId\",\"\").option(\"remarketing\",false).tag('<script src=\"//www.googleadservices.com/pagead/conversion_async.js\">').mapping(\"events\");AdWords.prototype.initialize=function(){this.load(this.ready)};AdWords.prototype.loaded=function(){return!!document.body};AdWords.prototype.page=function(){var remarketing=!!this.options.remarketing;var id=this.options.conversionId;var props={};window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_remarketing_only:remarketing})};AdWords.prototype.track=function(track){var id=this.options.conversionId;var events=this.events(track.event());var revenue=track.revenue()||0;each(events,function(label){var props=track.properties();delete props.revenue;window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_conversion_language:\"en\",google_conversion_format:\"3\",google_conversion_color:\"ffffff\",google_conversion_label:label,google_conversion_value:revenue,google_remarketing_only:false})})}},{each:4,\"analytics.js-integration\":166}],81:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var Alexa=module.exports=integration(\"Alexa\").assumesPageview().global(\"_atrk_opts\").option(\"account\",null).option(\"domain\",\"\").option(\"dynamic\",true).tag('<script src=\"//d31qbv1cthcecs.cloudfront.net/atrk.js\">');Alexa.prototype.initialize=function(){var self=this;window._atrk_opts={atrk_acct:this.options.account,domain:this.options.domain,dynamic:this.options.dynamic};this.load(function(){window.atrk();self.ready()})};Alexa.prototype.loaded=function(){return!!window.atrk}},{\"analytics.js-integration\":166}],82:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var topDomain=require(\"top-domain\");var umd=typeof window.define===\"function\"&&window.define.amd;var src=\"//d24n15hnbwhuhn.cloudfront.net/libs/amplitude-2.1.0-min.js\";var Amplitude=module.exports=integration(\"Amplitude\").global(\"amplitude\").option(\"apiKey\",\"\").option(\"trackAllPages\",false).option(\"trackNamedPages\",true).option(\"trackCategorizedPages\",true).option(\"trackUtmProperties\",true).tag('<script src=\"'+src+'\">');Amplitude.prototype.initialize=function(){(function(e,t){var r=e.amplitude||{};r._q=[];function a(e){r[e]=function(){r._q.push([e].concat(Array.prototype.slice.call(arguments,0)))}}var i=[\"init\",\"logEvent\",\"logRevenue\",\"setUserId\",\"setUserProperties\",\"setOptOut\",\"setVersionName\",\"setDomain\",\"setDeviceId\",\"setGlobalUserProperties\"];for(var o=0;o<i.length;o++){a(i[o])}e.amplitude=r})(window,document);this.setDomain(window.location.href);window.amplitude.init(this.options.apiKey,null,{includeUtm:this.options.trackUtmProperties});var self=this;if(umd){window.require([src],function(amplitude){window.amplitude=amplitude;self.ready()});return}this.load(function(){self.ready()})};Amplitude.prototype.loaded=function(){return!!(window.amplitude&&window.amplitude.options)};Amplitude.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};Amplitude.prototype.identify=function(identify){var id=identify.userId();var traits=identify.traits();if(id)window.amplitude.setUserId(id);if(traits)window.amplitude.setUserProperties(traits)};Amplitude.prototype.track=function(track){var props=track.properties();var event=track.event();var revenue=track.revenue();window.amplitude.logEvent(event,props);if(revenue){window.amplitude.logRevenue(revenue,props.quantity,props.productId)}};Amplitude.prototype.setDomain=function(href){var domain=topDomain(href);window.amplitude.setDomain(domain)};Amplitude.prototype.setDeviceId=function(deviceId){if(deviceId)window.amplitude.setDeviceId(deviceId)}},{\"analytics.js-integration\":166,\"top-domain\":189}],189:[function(require,module,exports){var parse=require(\"url\").parse;module.exports=domain;var regexp=/[a-z0-9][a-z0-9\\-]*[a-z0-9]\\.[a-z\\.]{2,6}$/i;function domain(url){var host=parse(url).hostname;var match=host.match(regexp);return match?match[0]:\"\"}},{url:64}],83:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var is=require(\"is\");var load=require(\"load-script\");module.exports=exports=function(analytics){analytics.addIntegration(Appcues)};var Appcues=exports.Integration=integration(\"Appcues\").assumesPageview().global(\"Appcues\").option(\"appcuesId\",\"\");Appcues.prototype.initialize=function(){this.load(this.ready)};Appcues.prototype.loaded=function(){return is.object(window.Appcues)};Appcues.prototype.load=function(callback){var id=this.options.appcuesId||\"appcues\";load(\"//fast.appcues.com/\"+id+\".js\",callback)};Appcues.prototype.identify=function(identify){window.Appcues.identify(identify.userId(),identify.traits())}},{\"analytics.js-integration\":166,is:18,\"load-script\":190}],190:[function(require,module,exports){var onload=require(\"script-onload\");var tick=require(\"next-tick\");var type=require(\"type\");module.exports=function loadScript(options,fn){if(!options)throw new Error(\"Cant load nothing...\");if(\"string\"==type(options))options={src:options};var https=document.location.protocol===\"https:\"||document.location.protocol===\"chrome-extension:\";if(options.src&&options.src.indexOf(\"//\")===0){options.src=https?\"https:\"+options.src:\"http:\"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var script=document.createElement(\"script\");script.type=\"text/javascript\";script.async=true;script.src=options.src;if(\"function\"==type(fn)){onload(script,fn)}tick(function(){var firstScript=document.getElementsByTagName(\"script\")[0];firstScript.parentNode.insertBefore(script,firstScript)});return script}},{\"script-onload\":185,\"next-tick\":57,type:47}],84:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var is=require(\"is\");var Atatus=module.exports=integration(\"Atatus\").global(\"atatus\").option(\"apiKey\",\"\").tag('<script src=\"//www.atatus.com/atatus.js\">');Atatus.prototype.initialize=function(){var self=this;this.load(function(){window.atatus.config(self.options.apiKey).install();self.ready()})};Atatus.prototype.loaded=function(){return is.object(window.atatus)};Atatus.prototype.identify=function(identify){window.atatus.setCustomData({person:identify.traits()})}},{\"analytics.js-integration\":166,is:18}],85:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var Autosend=module.exports=integration(\"Autosend\").global(\"_autosend\").option(\"appKey\",\"\").tag('<script id=\"asnd-tracker\" src=\"https://d2zjxodm1cz8d6.cloudfront.net/js/v1/autosend.js\" data-auth-key=\"{{ appKey }}\">');Autosend.prototype.initialize=function(){window._autosend=window._autosend||[];(function(){var a,b,c;a=function(f){return function(){window._autosend.push([f].concat(Array.prototype.slice.call(arguments,0)))}};b=[\"identify\",\"track\",\"cb\"];for(c=0;c<b.length;c++){window._autosend[b[c]]=a(b[c])}})();this.load(this.ready)};Autosend.prototype.loaded=function(){return!!window._autosend};Autosend.prototype.identify=function(identify){var id=identify.userId();if(!id)return;var traits=identify.traits();traits.id=id;window._autosend.identify(traits)};Autosend.prototype.track=function(track){window._autosend.track(track.event())}},{\"analytics.js-integration\":166}],86:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var Awesm=module.exports=integration(\"awe.sm\").assumesPageview().global(\"AWESM\").option(\"apiKey\",\"\").tag('<script src=\"//widgets.awe.sm/v3/widgets.js?key={{ apiKey }}&async=true\">').mapping(\"events\");Awesm.prototype.initialize=function(){window.AWESM={api_key:this.options.apiKey};this.load(this.ready)};Awesm.prototype.loaded=function(){return!!(window.AWESM&&window.AWESM._exists)};Awesm.prototype.track=function(track){var user=this.analytics.user();var goals=this.events(track.event());each(goals,function(goal){window.AWESM.convert(goal,track.cents(),null,user.id())})}},{each:4,\"analytics.js-integration\":166}],87:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var Bing=module.exports=integration(\"Bing Ads\").global(\"UET\").global(\"uetq\").option(\"tagId\",\"\").tag('<script src=\"//bat.bing.com/bat.js\">');Bing.prototype.initialize=function(){window.uetq=window.uetq||[];var self=this;self.load(function(){var setup={ti:self.options.tagId,q:window.uetq};window.uetq=new window.UET(setup);self.ready()})};Bing.prototype.loaded=function(){return!!(window.uetq&&window.uetq.push!==Array.prototype.push)};Bing.prototype.page=function(){window.uetq.push(\"pageLoad\")};Bing.prototype.track=function(track){var event={ea:\"track\",el:track.event()};if(track.category())event.ec=track.category();if(track.revenue())event.gv=track.revenue();window.uetq.push(event)}},{\"analytics.js-integration\":166}],88:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var foldl=require(\"foldl\");var Blueshift=module.exports=integration(\"Blueshift\").global(\"blueshift\").global(\"_blueshiftid\").option(\"apiKey\",\"\").option(\"retarget\",false).tag('<script src=\"https://cdn.getblueshift.com/blueshift.js\">');Blueshift.prototype.initialize=function(){window.blueshift=window.blueshift||[];window.blueshift.load=function(a){window._blueshiftid=a;var d=function(a){return function(){blueshift.push([a].concat(Array.prototype.slice.call(arguments,0)))}},e=[\"identify\",\"track\",\"click\",\"pageload\",\"capture\",\"retarget\"];for(var f=0;f<e.length;f++)blueshift[e[f]]=d(e[f])};window.blueshift.load(this.options.apiKey);this.load(this.ready)};Blueshift.prototype.loaded=function(){return!!(window.blueshift&&window._blueshiftid)};Blueshift.prototype.page=function(page){if(this.options.retarget)window.blueshift.retarget();var properties=page.properties();properties._bsft_source=\"segment.com\";properties.customer_id=page.userId();properties.anonymousId=page.anonymousId();properties.category=page.category();properties.name=page.name();window.blueshift.pageload(removeBlankAttributes(properties))};var traitAliases={created:\"created_at\"};Blueshift.prototype.identify=function(identify){if(!identify.userId()&&!identify.anonymousId()){return this.debug(\"user id required\")}var traits=identify.traits(traitAliases);traits._bsft_source=\"segment.com\";traits.customer_id=identify.userId();traits.anonymousId=identify.anonymousId();window.blueshift.identify(removeBlankAttributes(traits))};Blueshift.prototype.track=function(track){var properties=track.properties();properties._bsft_source=\"segment.com\";properties.customer_id=track.userId();properties.anonymousId=track.anonymousId();window.blueshift.track(track.event(),removeBlankAttributes(properties))};Blueshift.prototype.alias=function(alias){window.blueshift.track(\"alias\",removeBlankAttributes({_bsft_source:\"segment.com\",customer_id:alias.userId(),previous_customer_id:alias.previousId(),anonymousId:alias.anonymousId()}))};function removeBlankAttributes(obj){return foldl(function(results,val,key){if(val!==null&&val!==undefined)results[key]=val;return results},{},obj)}},{\"analytics.js-integration\":166,foldl:180}],89:[function(require,module,exports){var Identify=require(\"facade\").Identify;var Track=require(\"facade\").Track;var each=require(\"each\");var integration=require(\"analytics.js-integration\");var qs=require(\"querystring\");var Bronto=module.exports=integration(\"Bronto\").global(\"__bta\").option(\"siteId\",\"\").option(\"host\",\"\").tag('<script src=\"//p.bm23.com/bta.js\">');Bronto.prototype.initialize=function(){var self=this;var params=qs.parse(window.location.search);if(!params._bta_tid&&!params._bta_c){this.debug(\"missing tracking URL parameters `_bta_tid` and `_bta_c`.\")}this.load(function(){var opts=self.options;self.bta=new window.__bta(opts.siteId);if(opts.host)self.bta.setHost(opts.host);self.ready()})};Bronto.prototype.loaded=function(){return this.bta};Bronto.prototype.completedOrder=function(track){var user=this.analytics.user();var products=track.products();var items=[];var identify=new Identify({userId:user.id(),traits:user.traits()});var email=identify.email();each(products,function(product){var track=new Track({properties:product});items.push({item_id:track.id()||track.sku(),desc:product.description||track.name(),quantity:track.quantity(),amount:track.price()})});this.bta.addOrder({order_id:track.orderId(),email:email,items:items})}},{facade:9,each:4,\"analytics.js-integration\":166,querystring:191}],191:[function(require,module,exports){var encode=encodeURIComponent;var decode=decodeURIComponent;var trim=require(\"trim\");var type=require(\"type\");exports.parse=function(str){if(\"string\"!=typeof str)return{};str=trim(str);if(\"\"==str)return{};if(\"?\"==str.charAt(0))str=str.slice(1);var obj={};var pairs=str.split(\"&\");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split(\"=\");var key=decode(parts[0]);var m;if(m=/(\\w+)\\[(\\d+)\\]/.exec(key)){obj[m[1]]=obj[m[1]]||[];obj[m[1]][m[2]]=decode(parts[1]);continue}obj[parts[0]]=null==parts[1]?\"\":decode(parts[1])}return obj};exports.stringify=function(obj){if(!obj)return\"\";var pairs=[];for(var key in obj){var value=obj[key];if(\"array\"==type(value)){for(var i=0;i<value.length;++i){pairs.push(encode(key+\"[\"+i+\"]\")+\"=\"+encode(value[i]))}continue}pairs.push(encode(key)+\"=\"+encode(obj[key]))}return pairs.join(\"&\")}},{trim:54,type:47}],90:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var tick=require(\"next-tick\");var BugHerd=module.exports=integration(\"BugHerd\").assumesPageview().global(\"BugHerdConfig\").global(\"_bugHerd\").option(\"apiKey\",\"\").option(\"showFeedbackTab\",true).tag('<script src=\"//www.bugherd.com/sidebarv2.js?apikey={{ apiKey }}\">');BugHerd.prototype.initialize=function(){window.BugHerdConfig={feedback:{hide:!this.options.showFeedbackTab}};var ready=this.ready;this.load(function(){tick(ready)})};BugHerd.prototype.loaded=function(){return!!window._bugHerd}},{\"analytics.js-integration\":166,\"next-tick\":57}],91:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var is=require(\"is\");var extend=require(\"extend\");var umd=typeof window.define===\"function\"&&window.define.amd;var src=\"//d2wy8f7a9ursnm.cloudfront.net/bugsnag-2.min.js\";var Bugsnag=module.exports=integration(\"Bugsnag\").global(\"Bugsnag\").option(\"apiKey\",\"\").tag('<script src=\"'+src+'\">');Bugsnag.prototype.initialize=function(){var self=this;if(umd){window.require([src],function(bugsnag){bugsnag.apiKey=self.options.apiKey;window.Bugsnag=bugsnag;self.ready()});return}this.load(function(){window.Bugsnag.apiKey=self.options.apiKey;self.ready()})};Bugsnag.prototype.loaded=function(){return is.object(window.Bugsnag)};Bugsnag.prototype.identify=function(identify){window.Bugsnag.metaData=window.Bugsnag.metaData||{};extend(window.Bugsnag.metaData,identify.traits())}},{\"analytics.js-integration\":166,is:18,extend:68}],92:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var each=require(\"each\");var Chameleon=module.exports=integration(\"Chameleon\").assumesPageview().readyOnInitialize().readyOnLoad().global(\"chmln\").option(\"accountId\",null).tag('<script src=\"//cdn.trychameleon.com/east/{{accountId}}.min.js\"></script>');Chameleon.prototype.initialize=function(){window.chmln={},names=\"setup alias track set\".split(\" \");for(var i=0;i<names.length;i++){(function(){var t=chmln[names[i]+\"_a\"]=[];chmln[names[i]]=function(){t.push(arguments)}})()}this.ready();this.load()};Chameleon.prototype.loaded=function(){return!!window.chmln};Chameleon.prototype.identify=function(identify){var options=identify.traits();options.uid=options.id||identify.userId()||identify.anonymousId();delete options.id;window.chmln.setup(options)};Chameleon.prototype.group=function(group){var options={};each(group.traits(),function(key,value){options[\"group:\"+key]=value});options[\"group:id\"]=group.groupId();window.chmln.set(options)};Chameleon.prototype.track=function(track){window.chmln.track(track.event(),track.properties())};Chameleon.prototype.alias=function(alias){var fromId=alias.previousId()||alias.anonymousId();window.chmln.alias({from:fromId,to:alias.userId()})}},{\"analytics.js-integration\":166,each:4}],93:[function(require,module,exports){var defaults=require(\"defaults\");var integration=require(\"analytics.js-integration\");var onBody=require(\"on-body\");var Chartbeat=module.exports=integration(\"Chartbeat\").assumesPageview().global(\"_sf_async_config\").global(\"_sf_endpt\").global(\"pSUPERFLY\").option(\"domain\",\"\").option(\"uid\",null).tag('<script src=\"//static.chartbeat.com/js/chartbeat.js\">');Chartbeat.prototype.initialize=function(){var self=this;window._sf_async_config=window._sf_async_config||{};window._sf_async_config.useCanonical=true;defaults(window._sf_async_config,this.options);onBody(function(){window._sf_endpt=(new Date).getTime();self.load(self.ready)})};Chartbeat.prototype.loaded=function(){return!!window.pSUPERFLY};Chartbeat.prototype.page=function(page){var category=page.category();if(category)window._sf_async_config.sections=category;var author=page.proxy(\"properties.author\");if(author)window._sf_async_config.authors=author;var props=page.properties();var name=page.fullName();window.pSUPERFLY.virtualPage(props.path,name||props.title)}},{defaults:192,\"analytics.js-integration\":166,\"on-body\":193}],192:[function(require,module,exports){module.exports=defaults;function defaults(dest,defaults){for(var prop in defaults){if(!(prop in dest)){dest[prop]=defaults[prop]}}return dest}},{}],193:[function(require,module,exports){var each=require(\"each\");var body=false;var callbacks=[];module.exports=function onBody(callback){if(body){call(callback)}else{callbacks.push(callback)}};var interval=setInterval(function(){if(!document.body)return;body=true;each(callbacks,call);clearInterval(interval)},5);function call(callback){callback(document.body)}},{each:177}],94:[function(require,module,exports){var date=require(\"load-date\");var domify=require(\"domify\");var each=require(\"each\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var onBody=require(\"on-body\");var useHttps=require(\"use-https\");var ClickTale=module.exports=integration(\"ClickTale\").assumesPageview().global(\"WRInitTime\").global(\"ClickTale\").global(\"ClickTaleSetUID\").global(\"ClickTaleField\").global(\"ClickTaleEvent\").option(\"httpCdnUrl\",\"http://s.clicktale.net/WRe0.js\").option(\"httpsCdnUrl\",\"\").option(\"projectId\",\"\").option(\"recordingRatio\",.01).option(\"partitionId\",\"\").tag('<script src=\"{{src}}\">');ClickTale.prototype.initialize=function(){var self=this;window.WRInitTime=date.getTime();onBody(function(body){body.appendChild(domify('<div id=\"ClickTaleDiv\" style=\"display: none;\">'))});var http=this.options.httpCdnUrl;var https=this.options.httpsCdnUrl;if(useHttps()&&!https)return this.debug(\"https option required\");var src=useHttps()?https:http;this.load({src:src},function(){window.ClickTale(self.options.projectId,self.options.recordingRatio,self.options.partitionId);self.ready()})};ClickTale.prototype.loaded=function(){return is.fn(window.ClickTale)};ClickTale.prototype.identify=function(identify){var id=identify.userId();window.ClickTaleSetUID(id);each(identify.traits(),function(key,value){window.ClickTaleField(key,value)})};ClickTale.prototype.track=function(track){window.ClickTaleEvent(track.event())}},{\"load-date\":194,domify:186,each:4,\"analytics.js-integration\":166,is:18,\"on-body\":193,\"use-https\":168}],194:[function(require,module,exports){var time=new Date,perf=window.performance;if(perf&&perf.timing&&perf.timing.responseEnd){time=new Date(perf.timing.responseEnd)}module.exports=time},{}],95:[function(require,module,exports){var Identify=require(\"facade\").Identify;var extend=require(\"extend\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var Clicky=module.exports=integration(\"Clicky\").assumesPageview().global(\"clicky\").global(\"clicky_site_ids\").global(\"clicky_custom\").option(\"siteId\",null).tag('<script src=\"//static.getclicky.com/js\"></script>');Clicky.prototype.initialize=function(){var user=this.analytics.user();window.clicky_site_ids=window.clicky_site_ids||[this.options.siteId];this.identify(new Identify({userId:user.id(),traits:user.traits()}));this.load(this.ready)};Clicky.prototype.loaded=function(){return is.object(window.clicky)};Clicky.prototype.page=function(page){var properties=page.properties();var name=page.fullName();window.clicky.log(properties.path,name||properties.title)};Clicky.prototype.identify=function(identify){window.clicky_custom=window.clicky_custom||{};window.clicky_custom.session=window.clicky_custom.session||{};var traits=identify.traits();var username=identify.username();var email=identify.email();var name=identify.name();if(username||email||name)traits.username=username||email||name;extend(window.clicky_custom.session,traits)};Clicky.prototype.track=function(track){window.clicky.goal(track.event(),track.revenue())}},{facade:9,extend:68,\"analytics.js-integration\":166,is:18}],96:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var useHttps=require(\"use-https\");var Comscore=module.exports=integration(\"comScore\").assumesPageview().global(\"_comscore\").global(\"COMSCORE\").option(\"c1\",\"2\").option(\"c2\",\"\").tag(\"http\",'<script src=\"http://b.scorecardresearch.com/beacon.js\">').tag(\"https\",'<script src=\"https://sb.scorecardresearch.com/beacon.js\">');Comscore.prototype.initialize=function(){window._comscore=window._comscore||[this.options];var tagName=useHttps()?\"https\":\"http\";this.load(tagName,this.ready)};Comscore.prototype.loaded=function(){return!!window.COMSCORE};Comscore.prototype.page=function(){window.COMSCORE.beacon(this.options)}},{\"analytics.js-integration\":166,\"use-https\":168}],97:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var CrazyEgg=module.exports=integration(\"Crazy Egg\").assumesPageview().global(\"CE2\").option(\"accountNumber\",\"\").tag('<script src=\"//dnn506yrbagrg.cloudfront.net/pages/scripts/{{ path }}.js?{{ cacheBuster }}\">');CrazyEgg.prototype.initialize=function(){var number=this.options.accountNumber;var path=number.slice(0,4)+\"/\"+number.slice(4);var cacheBuster=Math.floor((new Date).getTime()/36e5);this.load({path:path,cacheBuster:cacheBuster},this.ready)};CrazyEgg.prototype.loaded=function(){return!!window.CE2}},{\"analytics.js-integration\":166}],98:[function(require,module,exports){var Identify=require(\"facade\").Identify;var Track=require(\"facade\").Track;var bind=require(\"bind\");var each=require(\"each\");var integration=require(\"analytics.js-integration\");var iso=require(\"to-iso-string\");var push=require(\"global-queue\")(\"_curebitq\");var throttle=require(\"throttle\");var when=require(\"when\");var Curebit=module.exports=integration(\"Curebit\").global(\"_curebitq\").global(\"curebit\").option(\"campaigns\",{}).option(\"device\",\"\").option(\"iframeBorder\",0).option(\"iframeHeight\",\"480\").option(\"iframeId\",\"curebit_integration\").option(\"iframeWidth\",\"100%\").option(\"insertIntoId\",\"\").option(\"responsive\",true).option(\"server\",\"https://www.curebit.com\").option(\"siteId\",\"\").tag('<script src=\"//d2jjzw81hqbuqv.cloudfront.net/integration/curebit-1.0.min.js\">');Curebit.prototype.initialize=function(){push(\"init\",{site_id:this.options.siteId,server:this.options.server});this.load(this.ready);this.page=throttle(bind(this,this.page),250)};Curebit.prototype.loaded=function(){return!!window.curebit};Curebit.prototype.injectIntoId=function(url,id,fn){when(function(){return document.getElementById(id)},function(){var script=document.createElement(\"script\");script.src=url;var parent=document.getElementById(id);parent.appendChild(script);onload(script,fn)})};Curebit.prototype.page=function(){var user=this.analytics.user();var campaigns=this.options.campaigns;var path=window.location.pathname;if(!campaigns[path])return;var tags=(campaigns[path]||\"\").split(\",\");if(!tags.length)return;var settings={responsive:this.options.responsive,device:this.options.device,campaign_tags:tags,iframe:{width:this.options.iframeWidth,height:this.options.iframeHeight,id:this.options.iframeId,frameborder:this.options.iframeBorder,container:this.options.insertIntoId}};var identify=new Identify({userId:user.id(),traits:user.traits()});if(identify.email()){settings.affiliate_member={email:identify.email(),first_name:identify.firstName(),last_name:identify.lastName(),customer_id:identify.userId()}}push(\"register_affiliate\",settings)};Curebit.prototype.completedOrder=function(track){var user=this.analytics.user();var orderId=track.orderId();var products=track.products();var props=track.properties();var items=[];var identify=new Identify({traits:user.traits(),userId:user.id()});each(products,function(product){var track=new Track({properties:product});items.push({product_id:track.id()||track.sku(),quantity:track.quantity(),image_url:product.image,price:track.price(),title:track.name(),url:product.url})});push(\"register_purchase\",{order_date:iso(props.date||new Date),order_number:orderId,\ncoupon_code:track.coupon(),subtotal:track.total(),customer_id:identify.userId(),first_name:identify.firstName(),last_name:identify.lastName(),email:identify.email(),items:items})}},{facade:9,bind:55,each:4,\"analytics.js-integration\":166,\"to-iso-string\":195,\"global-queue\":196,throttle:197,when:198}],195:[function(require,module,exports){module.exports=toIsoString;function toIsoString(date){return date.getUTCFullYear()+\"-\"+pad(date.getUTCMonth()+1)+\"-\"+pad(date.getUTCDate())+\"T\"+pad(date.getUTCHours())+\":\"+pad(date.getUTCMinutes())+\":\"+pad(date.getUTCSeconds())+\".\"+String((date.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+\"Z\"}function pad(number){var n=number.toString();return n.length===1?\"0\"+n:n}},{}],196:[function(require,module,exports){module.exports=generate;function generate(name,options){options=options||{};return function(args){args=[].slice.call(arguments);window[name]||(window[name]=[]);options.wrap===false?window[name].push.apply(window[name],args):window[name].push(args)}}},{}],197:[function(require,module,exports){module.exports=throttle;function throttle(func,wait){var rtn;var last=0;return function throttled(){var now=(new Date).getTime();var delta=now-last;if(delta>=wait){rtn=func.apply(this,arguments);last=now}return rtn}}},{}],198:[function(require,module,exports){var callback=require(\"callback\");module.exports=when;function when(condition,fn,interval){if(condition())return callback.async(fn);var ref=setInterval(function(){if(!condition())return;callback(fn);clearInterval(ref)},interval||10)}},{callback:12}],99:[function(require,module,exports){var Identify=require(\"facade\").Identify;var alias=require(\"alias\");var convertDates=require(\"convert-dates\");var integration=require(\"analytics.js-integration\");var Customerio=module.exports=integration(\"Customer.io\").global(\"_cio\").option(\"siteId\",\"\").tag('<script id=\"cio-tracker\" src=\"https://assets.customer.io/assets/track.js\" data-site-id=\"{{ siteId }}\">');Customerio.prototype.initialize=function(){window._cio=window._cio||[];(function(){var a,b,c;a=function(f){return function(){window._cio.push([f].concat(Array.prototype.slice.call(arguments,0)))}};b=[\"identify\",\"track\"];for(c=0;c<b.length;c++){window._cio[b[c]]=a(b[c])}})();this.load(this.ready)};Customerio.prototype.loaded=function(){return!!(window._cio&&window._cio.push!==Array.prototype.push)};Customerio.prototype.identify=function(identify){if(!identify.userId())return this.debug(\"user id required\");var traits=identify.traits({createdAt:\"created\"});traits=alias(traits,{created:\"created_at\"});traits=convertDates(traits,convertDate);window._cio.identify(traits)};Customerio.prototype.group=function(group){var traits=group.traits();var user=this.analytics.user();traits=alias(traits,function(trait){return\"Group \"+trait});this.identify(new Identify({userId:user.id(),traits:traits}))};Customerio.prototype.track=function(track){var properties=track.properties();properties=convertDates(properties,convertDate);window._cio.track(track.event(),properties)};function convertDate(date){return Math.floor(date.getTime()/1e3)}},{facade:9,alias:199,\"convert-dates\":200,\"analytics.js-integration\":166}],199:[function(require,module,exports){var type=require(\"type\");try{var clone=require(\"clone\")}catch(e){var clone=require(\"clone-component\")}module.exports=alias;function alias(obj,method){switch(type(method)){case\"object\":return aliasByDictionary(clone(obj),method);case\"function\":return aliasByFunction(clone(obj),method)}}function aliasByDictionary(obj,aliases){for(var key in aliases){if(undefined===obj[key])continue;obj[aliases[key]]=obj[key];delete obj[key]}return obj}function aliasByFunction(obj,convert){var output={};for(var key in obj)output[convert(key)]=obj[key];return output}},{type:47,clone:49}],200:[function(require,module,exports){var is=require(\"is\");try{var clone=require(\"clone\")}catch(e){var clone=require(\"clone-component\")}module.exports=convertDates;function convertDates(obj,convert){obj=clone(obj);for(var key in obj){var val=obj[key];if(is.date(val))obj[key]=convert(val);if(is.object(val))obj[key]=convertDates(val,convert)}return obj}},{is:18,clone:13}],100:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var is=require(\"is\");var push=require(\"global-queue\")(\"_dcq\");var Drip=module.exports=integration(\"Drip\").assumesPageview().global(\"_dc\").global(\"_dcq\").global(\"_dcqi\").global(\"_dcs\").option(\"account\",\"\").tag('<script src=\"//tag.getdrip.com/{{ account }}.js\">');Drip.prototype.initialize=function(){window._dcq=window._dcq||[];window._dcs=window._dcs||{};window._dcs.account=this.options.account;this.load(this.ready)};Drip.prototype.loaded=function(){return is.object(window._dc)};Drip.prototype.track=function(track){var props=track.properties();var cents=track.cents();if(cents)props.value=cents;delete props.revenue;push(\"track\",track.event(),props)};Drip.prototype.identify=function(identify){push(\"identify\",identify.traits())}},{\"analytics.js-integration\":166,is:18,\"global-queue\":196}],101:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var tick=require(\"next-tick\");var Elevio=module.exports=integration(\"Elevio\").assumesPageview().option(\"accountId\",\"\").global(\"_elev\").tag('<script src=\"//static.elev.io/js/v3.js\">');Elevio.prototype.initialize=function(){var self=this;window._elev=window._elev||{};window._elev.account_id=this.options.accountId;window._elev.segment=true;this.load(function(){tick(self.ready)})};Elevio.prototype.loaded=function(){return!!window._elev};Elevio.prototype.identify=function(identify){var name=identify.name();var email=identify.email();var plan=identify.proxy(\"traits.plan\");var user={};user.via=\"segment\";if(email)user.email=email;if(name)user.name=name;if(plan)user.plan=[plan];window._elev.user=user}},{\"analytics.js-integration\":166,\"next-tick\":57}],102:[function(require,module,exports){var extend=require(\"extend\");var integration=require(\"analytics.js-integration\");var onError=require(\"on-error\");var push=require(\"global-queue\")(\"_errs\");var Errorception=module.exports=integration(\"Errorception\").assumesPageview().global(\"_errs\").option(\"projectId\",\"\").option(\"meta\",true).tag('<script src=\"//beacon.errorception.com/{{ projectId }}.js\">');Errorception.prototype.initialize=function(){window._errs=window._errs||[this.options.projectId];onError(push);this.load(this.ready)};Errorception.prototype.loaded=function(){return!!(window._errs&&window._errs.push!==Array.prototype.push)};Errorception.prototype.identify=function(identify){if(!this.options.meta)return;var traits=identify.traits();window._errs=window._errs||[];window._errs.meta=window._errs.meta||{};extend(window._errs.meta,traits)}},{extend:68,\"analytics.js-integration\":166,\"on-error\":201,\"global-queue\":196}],201:[function(require,module,exports){module.exports=onError;var callbacks=[];if(\"function\"==typeof window.onerror)callbacks.push(window.onerror);window.onerror=handler;function handler(){for(var i=0,fn;fn=callbacks[i];i++)fn.apply(this,arguments)}function onError(fn){callbacks.push(fn);if(window.onerror!=handler){callbacks.push(window.onerror);window.onerror=handler}}},{}],103:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_aaq\");var Evergage=module.exports=integration(\"Evergage\").assumesPageview().global(\"_aaq\").option(\"account\",\"\").option(\"dataset\",\"\").tag('<script src=\"//cdn.evergage.com/beacon/{{ account }}/{{ dataset }}/scripts/evergage.min.js\">');Evergage.prototype.initialize=function(){var account=this.options.account;var dataset=this.options.dataset;window._aaq=window._aaq||[];push(\"setEvergageAccount\",account);push(\"setDataset\",dataset);push(\"setUseSiteConfig\",true);this.load(this.ready)};Evergage.prototype.loaded=function(){return!!(window._aaq&&window._aaq.push!==Array.prototype.push)};Evergage.prototype.page=function(page){var props=page.properties();var name=page.name();if(name)push(\"namePage\",name);each(props,function(key,value){push(\"setCustomField\",key,value,\"page\")});window.Evergage.init(true)};Evergage.prototype.identify=function(identify){var id=identify.userId();if(!id)return;push(\"setUser\",id);var traits=identify.traits({email:\"userEmail\",name:\"userName\"});each(traits,function(key,value){push(\"setUserField\",key,value,\"page\")})};Evergage.prototype.group=function(group){var props=group.traits();var id=group.groupId();if(!id)return;push(\"setCompany\",id);each(props,function(key,value){push(\"setAccountField\",key,value,\"page\")})};Evergage.prototype.track=function(track){push(\"trackAction\",track.event(),track.properties())}},{each:4,\"analytics.js-integration\":166,\"global-queue\":196}],104:[function(require,module,exports){\"use strict\";var bind=require(\"bind\");var domify=require(\"domify\");var each=require(\"each\");var extend=require(\"extend\");var integration=require(\"analytics.js-integration\");var json=require(\"json\");var Extole=module.exports=integration(\"Extole\").global(\"extole\").option(\"clientId\",\"\").mapping(\"events\").tag(\"main\",'<script src=\"//tags.extole.com/{{ clientId }}/core.js\">');Extole.prototype.initialize=function(){if(this.loaded())return this.ready();this.load(\"main\",bind(this,this.ready))};Extole.prototype.loaded=function(){return!!window.extole};Extole.prototype.track=function(track){var user=this.analytics.user();var traits=user.traits();var userId=user.id();var email=traits.email;if(!userId&&!email){return this.debug(\"User must be identified before `#track` calls\")}var event=track.event();var extoleEvents=this.events(event);if(!extoleEvents.length){return this.debug(\"No events found for %s\",event)}each(extoleEvents,bind(this,function(extoleEvent){this._registerConversion(this._createConversionTag({type:extoleEvent,params:this._formatConversionParams(event,email,userId,track.properties())}))}))};Extole.prototype._registerConversion=function(conversionTag){if(window.extole.main&&window.extole.main.fireConversion){return window.extole.main.fireConversion(conversionTag)}if(window.extole.initializeGo){window.extole.initializeGo().andWhenItsReady(function(){window.extole.main.fireConversion(conversionTag)})}};Extole.prototype._formatConversionParams=function(event,email,userId,properties){var total;if(properties.total){total=properties.total;delete properties.total;properties[\"tag:cart_value\"]=total}return extend({\"tag:segment_event\":event,e:email,partner_conversion_id:userId},properties)};Extole.prototype._createConversionTag=function(conversion){return domify('<script type=\"extole/conversion\">'+json.stringify(conversion)+\"</script>\")}},{bind:55,domify:186,each:4,extend:68,\"analytics.js-integration\":166,json:59}],105:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_fbq\");var Facebook=module.exports=integration(\"Facebook Conversion Tracking\").global(\"_fbq\").option(\"currency\",\"USD\").tag('<script src=\"//connect.facebook.net/en_US/fbds.js\">').mapping(\"events\");Facebook.prototype.initialize=function(){window._fbq=window._fbq||[];this.load(this.ready);window._fbq.loaded=true};Facebook.prototype.loaded=function(){return!!(window._fbq&&window._fbq.loaded)};Facebook.prototype.page=function(page){this.track(page.track(page.fullName()))};Facebook.prototype.track=function(track){var event=track.event();var events=this.events(event);var revenue=track.revenue()||0;var self=this;each(events,function(event){push(\"track\",event,{currency:self.options.currency,value:revenue.toFixed(2)})})}},{each:4,\"analytics.js-integration\":166,\"global-queue\":196}],106:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_fbq\");var reduce=require(\"reduce\");var FacebookCustomAudiences=module.exports=integration(\"Facebook Custom Audiences\").global(\"_fbds\").global(\"_fbq\").option(\"pixelId\",\"\").option(\"currency\",\"USD\").mapping(\"events\").tag('<script src=\"//connect.facebook.net/en_US/fbds.js\">');FacebookCustomAudiences.prototype.initialize=function(){var pixelId=this.options.pixelId;window._fbds=window._fbds||{};window._fbds.pixelId=pixelId;window._fbq=window._fbq||[];window._fbq.push([\"track\",\"PixelInitialized\",{}]);this.load(this.ready)};FacebookCustomAudiences.prototype.loaded=function(){return!!(window._fbq&&Array.prototype.push!==window._fbq.push)};FacebookCustomAudiences.prototype.track=function(track){var event=track.event();var properties=track.properties();window._fbq.push([\"track\",event,properties])};FacebookCustomAudiences.prototype.viewedProductCategory=function(track){push(\"track\",\"ViewContent\",{content_ids:[String(track.category()||\"\")],content_type:\"product_group\"})};FacebookCustomAudiences.prototype.viewedProduct=function(track){push(\"track\",\"ViewContent\",{content_ids:[String(track.id()||track.sku()||\"\")],content_type:\"product\"})};FacebookCustomAudiences.prototype.addedProduct=function(track){push(\"track\",\"AddToCart\",{content_ids:[String(track.id()||track.sku()||\"\")],content_type:\"product\"})};FacebookCustomAudiences.prototype.completedOrder=function(track){var content_ids=reduce(track.products()||[],[],function(ret,product){ret.push(product.id||product.sku||\"\");return ret});push(\"track\",\"Purchase\",{content_ids:content_ids,content_type:\"product\"})}},{\"analytics.js-integration\":166,\"global-queue\":196,reduce:202}],202:[function(require,module,exports){var each=require(\"each\");module.exports=function reduce(obj,memo,iterator){each(obj,function(a,b){memo=iterator.call(null,memo,a,b,obj)});return memo}},{each:177}],107:[function(require,module,exports){var Track=require(\"facade\").Track;var each=require(\"each\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_fxm\");var FoxMetrics=module.exports=integration(\"FoxMetrics\").assumesPageview().global(\"_fxm\").option(\"appId\",\"\").tag('<script src=\"//d35tca7vmefkrc.cloudfront.net/scripts/{{ appId }}.js\">');FoxMetrics.prototype.initialize=function(){window._fxm=window._fxm||[];this.load(this.ready)};FoxMetrics.prototype.loaded=function(){return!!(window._fxm&&window._fxm.appId)};FoxMetrics.prototype.page=function(page){var properties=page.proxy(\"properties\");var category=page.category();var name=page.name();this._category=category;push(\"_fxm.pages.view\",properties.title,name,category,properties.url,properties.referrer)};FoxMetrics.prototype.identify=function(identify){var id=identify.userId();if(!id)return;push(\"_fxm.visitor.profile\",id,identify.firstName(),identify.lastName(),identify.email(),identify.address(),undefined,undefined,identify.traits())};FoxMetrics.prototype.track=function(track){var props=track.properties();var category=this._category||props.category;push(track.event(),category,props)};FoxMetrics.prototype.viewedProduct=function(track){ecommerce(\"productview\",track)};FoxMetrics.prototype.removedProduct=function(track){ecommerce(\"removecartitem\",track)};FoxMetrics.prototype.addedProduct=function(track){ecommerce(\"cartitem\",track)};FoxMetrics.prototype.completedOrder=function(track){var orderId=track.orderId();push(\"_fxm.ecommerce.order\",orderId,track.subtotal(),track.shipping(),track.tax(),track.city(),track.state(),track.zip(),track.quantity());each(track.products(),function(product){var track=new Track({properties:product});ecommerce(\"purchaseitem\",track,[track.quantity(),track.price(),orderId])})};function ecommerce(event,track,arr){push.apply(null,[\"_fxm.ecommerce.\"+event,track.id()||track.sku(),track.name(),track.category()].concat(arr||[]))}},{facade:9,each:4,\"analytics.js-integration\":166,\"global-queue\":196}],108:[function(require,module,exports){var bind=require(\"bind\");var each=require(\"each\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var has=Object.prototype.hasOwnProperty;var Frontleaf=module.exports=integration(\"Frontleaf\").global(\"_fl\").global(\"_flBaseUrl\").option(\"baseUrl\",\"https://api.frontleaf.com\").option(\"stream\",\"\").option(\"token\",\"\").option(\"trackCategorizedPages\",false).option(\"trackNamedPages\",false).tag('<script id=\"_fl\" src=\"{{ baseUrl }}/lib/tracker.js\">');Frontleaf.prototype.initialize=function(){window._fl=window._fl||[];window._flBaseUrl=window._flBaseUrl||this.options.baseUrl;this._push(\"setApiToken\",this.options.token);this._push(\"setStream\",this.options.stream);bind(this,this.loaded);this.load({baseUrl:window._flBaseUrl},this.ready)};Frontleaf.prototype.loaded=function(){return is.array(window._fl)&&window._fl.ready===true};Frontleaf.prototype.identify=function(identify){var userId=identify.userId();if(userId){this._push(\"setUser\",{id:userId,name:identify.name()||identify.username(),data:clean(identify.traits())})}};Frontleaf.prototype.group=function(group){var groupId=group.groupId();if(groupId){this._push(\"setAccount\",{id:groupId,name:group.proxy(\"traits.name\"),data:clean(group.traits())})}};Frontleaf.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};Frontleaf.prototype.track=function(track){var event=track.event();this._push(\"event\",event,clean(track.properties()))};Frontleaf.prototype._push=function(command){var args=[].slice.call(arguments,1);window._fl.push(function(t){t[command].apply(command,args)})};function clean(obj){var ret={};var excludeKeys=[\"id\",\"name\",\"firstName\",\"lastName\"];each(excludeKeys,function(omitKey){clear(obj,omitKey)});obj=flatten(obj);for(var key in obj){if(has.call(obj,key)){var val=obj[key];if(val==null){continue}if(is.array(val)){ret[key]=val.toString();continue}ret[key]=val}}return ret}function clear(obj,key){if(obj.hasOwnProperty(key)){delete obj[key]}}function flatten(source){var output={};function step(object,prev){for(var key in object){if(has.call(object,key)){var value=object[key];var newKey=prev?prev+\" \"+key:key;if(!is.array(value)&&is.object(value)){return step(value,newKey)}output[newKey]=value}}}step(source);return output}},{bind:55,each:4,\"analytics.js-integration\":166,is:18}],109:[function(require,module,exports){var camel=require(\"to-camel-case\");var foldl=require(\"foldl\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var FullStory=module.exports=integration(\"FullStory\").option(\"org\",\"\").option(\"debug\",false).tag('<script src=\"https://www.fullstory.com/s/fs.js\"></script>');FullStory.prototype.initialize=function(){var self=this;window._fs_debug=this.options.debug;window._fs_host=\"www.fullstory.com\";window._fs_org=this.options.org;(function(m,n,e,t,l,o,g,y){g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b)};g.q=[];g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){FS(l,v)};g.setSessionVars=function(v){FS(\"session\",v)};g.setPageVars=function(v){FS(\"page\",v)};self.ready();self.load()})(window,document,\"FS\",\"script\",\"user\")};FullStory.prototype.loaded=function(){return!!window.FS};FullStory.prototype.identify=function(identify){var id=identify.userId()||identify.anonymousId();var traits=identify.traits({name:\"displayName\"});var newTraits=foldl(function(results,value,key){if(key!==\"id\")results[key===\"displayName\"||key===\"email\"?key:convert(key,value)]=value;return results},{},traits);window.FS.identify(String(id),newTraits)};function convert(key,value){key=camel(key);if(is.string(value))return key+\"_str\";if(isInt(value))return key+\"_int\";if(isFloat(value))return key+\"_real\";if(is.date(value))return key+\"_date\";if(is.boolean(value))return key+\"_bool\"}function isFloat(n){return n===+n&&n!==(n|0)}function isInt(n){return n===+n&&n===(n|0)}},{\"to-camel-case\":203,foldl:180,\"analytics.js-integration\":166,is:18}],203:[function(require,module,exports){var toSpace=require(\"to-space-case\");module.exports=toCamelCase;function toCamelCase(string){return toSpace(string).replace(/\\s(\\w)/g,function(matches,letter){return letter.toUpperCase()})}},{\"to-space-case\":187}],110:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_gauges\");var Gauges=module.exports=integration(\"Gauges\").assumesPageview().global(\"_gauges\").option(\"siteId\",\"\").tag('<script id=\"gauges-tracker\" src=\"//secure.gaug.es/track.js\" data-site-id=\"{{ siteId }}\">');Gauges.prototype.initialize=function(){window._gauges=window._gauges||[];this.load(this.ready)};Gauges.prototype.loaded=function(){return!!(window._gauges&&window._gauges.push!==Array.prototype.push)};Gauges.prototype.page=function(){push(\"track\")}},{\"analytics.js-integration\":166,\"global-queue\":196}],111:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var onBody=require(\"on-body\");var GetSatisfaction=module.exports=integration(\"Get Satisfaction\").assumesPageview().global(\"GSFN\").option(\"widgetId\",\"\").tag('<script src=\"https://loader.engage.gsfn.us/loader.js\">');GetSatisfaction.prototype.initialize=function(){var self=this;var widget=this.options.widgetId;var div=document.createElement(\"div\");var id=div.id=\"getsat-widget-\"+widget;onBody(function(body){body.appendChild(div)});this.load(function(){window.GSFN.loadWidget(widget,{containerId:id});self.ready()})};GetSatisfaction.prototype.loaded=function(){return!!window.GSFN}},{\"analytics.js-integration\":166,\"on-body\":193}],112:[function(require,module,exports){var Track=require(\"facade\").Track;var defaults=require(\"defaults\");var dot=require(\"obj-case\");var each=require(\"each\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var keys=require(\"object\").keys;var len=require(\"object\").length;var push=require(\"global-queue\")(\"_gaq\");var select=require(\"select\");var useHttps=require(\"use-https\");var user;module.exports=exports=function(analytics){analytics.addIntegration(GA);user=analytics.user()};var GA=exports.Integration=integration(\"Google Analytics\").readyOnLoad().global(\"ga\").global(\"gaplugins\").global(\"_gaq\").global(\"GoogleAnalyticsObject\").option(\"anonymizeIp\",false).option(\"classic\",false).option(\"dimensions\",{}).option(\"domain\",\"auto\").option(\"doubleClick\",false).option(\"enhancedEcommerce\",false).option(\"enhancedLinkAttribution\",false).option(\"ignoredReferrers\",null).option(\"includeSearch\",false).option(\"metrics\",{}).option(\"nonInteraction\",false).option(\"sendUserId\",false).option(\"siteSpeedSampleRate\",1).option(\"trackCategorizedPages\",true).option(\"trackNamedPages\",true).option(\"trackingId\",\"\").tag(\"library\",'<script src=\"//www.google-analytics.com/analytics.js\">').tag(\"double click\",'<script src=\"//stats.g.doubleclick.net/dc.js\">').tag(\"http\",'<script src=\"http://www.google-analytics.com/ga.js\">').tag(\"https\",'<script src=\"https://ssl.google-analytics.com/ga.js\">');GA.on(\"construct\",function(integration){if(integration.options.classic){integration.initialize=integration.initializeClassic;integration.loaded=integration.loadedClassic;integration.page=integration.pageClassic;integration.track=integration.trackClassic;integration.completedOrder=integration.completedOrderClassic}else if(integration.options.enhancedEcommerce){integration.viewedProduct=integration.viewedProductEnhanced;integration.clickedProduct=integration.clickedProductEnhanced;integration.addedProduct=integration.addedProductEnhanced;integration.removedProduct=integration.removedProductEnhanced;integration.startedOrder=integration.startedOrderEnhanced;integration.viewedCheckoutStep=integration.viewedCheckoutStepEnhanced;integration.completedCheckoutStep=integration.completedCheckoutStepEnhanced;integration.updatedOrder=integration.updatedOrderEnhanced;integration.completedOrder=integration.completedOrderEnhanced;integration.refundedOrder=integration.refundedOrderEnhanced;integration.viewedPromotion=integration.viewedPromotionEnhanced;integration.clickedPromotion=integration.clickedPromotionEnhanced}});GA.prototype.initialize=function(){var opts=this.options;window.GoogleAnalyticsObject=\"ga\";window.ga=window.ga||function(){window.ga.q=window.ga.q||[];window.ga.q.push(arguments)};window.ga.l=(new Date).getTime();if(window.location.hostname===\"localhost\")opts.domain=\"none\";window.ga(\"create\",opts.trackingId,{cookieDomain:opts.domain||GA.prototype.defaults.domain,siteSpeedSampleRate:opts.siteSpeedSampleRate,allowLinker:true});if(opts.doubleClick){window.ga(\"require\",\"displayfeatures\")}if(opts.sendUserId&&user.id()){window.ga(\"set\",\"userId\",user.id())}if(opts.anonymizeIp)window.ga(\"set\",\"anonymizeIp\",true);var custom=metrics(user.traits(),opts);if(len(custom))window.ga(\"set\",custom);this.load(\"library\",this.ready)};GA.prototype.loaded=function(){return!!window.gaplugins};GA.prototype.page=function(page){var category=page.category();var props=page.properties();var name=page.fullName();var opts=this.options;var campaign=page.proxy(\"context.campaign\")||{};var pageview={};var pagePath=path(props,this.options);var pageTitle=name||props.title;var track;this._category=category;pageview.page=pagePath;pageview.title=pageTitle;pageview.location=props.url;if(campaign.name)pageview.campaignName=campaign.name;if(campaign.source)pageview.campaignSource=campaign.source;if(campaign.medium)pageview.campaignMedium=campaign.medium;if(campaign.content)pageview.campaignContent=campaign.content;if(campaign.term)pageview.campaignKeyword=campaign.term;var custom=metrics(props,opts);if(len(custom))window.ga(\"set\",custom);window.ga(\"set\",{page:pagePath,title:pageTitle});window.ga(\"send\",\"pageview\",pageview);if(category&&this.options.trackCategorizedPages){track=page.track(category);this.track(track,{nonInteraction:1})}if(name&&this.options.trackNamedPages){track=page.track(name);this.track(track,{nonInteraction:1})}};GA.prototype.identify=function(identify){var opts=this.options;if(opts.sendUserId&&identify.userId()){window.ga(\"set\",\"userId\",identify.userId())}var custom=metrics(user.traits(),opts);if(len(custom))window.ga(\"set\",custom)};GA.prototype.track=function(track,options){var contextOpts=track.options(this.name);var interfaceOpts=this.options;var opts=defaults(options||{},contextOpts);opts=defaults(opts,interfaceOpts);var props=track.properties();var campaign=track.proxy(\"context.campaign\")||{};var custom=metrics(props,interfaceOpts);if(len(custom))window.ga(\"set\",custom);var payload={eventAction:track.event(),eventCategory:props.category||this._category||\"All\",eventLabel:props.label,eventValue:formatValue(props.value||track.revenue()),nonInteraction:!!(props.nonInteraction||opts.nonInteraction)};if(campaign.name)payload.campaignName=campaign.name;if(campaign.source)payload.campaignSource=campaign.source;if(campaign.medium)payload.campaignMedium=campaign.medium;if(campaign.content)payload.campaignContent=campaign.content;if(campaign.term)payload.campaignKeyword=campaign.term;window.ga(\"send\",\"event\",payload)};GA.prototype.completedOrder=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products();var props=track.properties();if(!orderId)return;if(!this.ecommerce){window.ga(\"require\",\"ecommerce\");this.ecommerce=true}window.ga(\"ecommerce:addTransaction\",{affiliation:props.affiliation,shipping:track.shipping(),revenue:total,tax:track.tax(),id:orderId,currency:track.currency()});each(products,function(product){var productTrack=createProductTrack(track,product);window.ga(\"ecommerce:addItem\",{category:productTrack.category(),quantity:productTrack.quantity(),price:productTrack.price(),name:productTrack.name(),sku:productTrack.sku(),id:orderId,currency:productTrack.currency()})});window.ga(\"ecommerce:send\")};GA.prototype.initializeClassic=function(){var opts=this.options;var anonymize=opts.anonymizeIp;var domain=opts.domain;var enhanced=opts.enhancedLinkAttribution;var ignore=opts.ignoredReferrers;var sample=opts.siteSpeedSampleRate;window._gaq=window._gaq||[];push(\"_setAccount\",opts.trackingId);push(\"_setAllowLinker\",true);if(anonymize)push(\"_gat._anonymizeIp\");if(domain)push(\"_setDomainName\",domain);if(sample)push(\"_setSiteSpeedSampleRate\",sample);if(enhanced){var protocol=document.location.protocol===\"https:\"?\"https:\":\"http:\";var pluginUrl=protocol+\"//www.google-analytics.com/plugins/ga/inpage_linkid.js\";push(\"_require\",\"inpage_linkid\",pluginUrl)}if(ignore){if(!is.array(ignore))ignore=[ignore];each(ignore,function(domain){push(\"_addIgnoredRef\",domain)})}if(this.options.doubleClick){this.load(\"double click\",this.ready)}else{var name=useHttps()?\"https\":\"http\";this.load(name,this.ready)}};GA.prototype.loadedClassic=function(){return!!(window._gaq&&window._gaq.push!==Array.prototype.push)};GA.prototype.pageClassic=function(page){var category=page.category();var props=page.properties();var name=page.fullName();var track;push(\"_trackPageview\",path(props,this.options));if(category&&this.options.trackCategorizedPages){track=page.track(category);this.track(track,{nonInteraction:1})}if(name&&this.options.trackNamedPages){track=page.track(name);this.track(track,{nonInteraction:1})}};GA.prototype.trackClassic=function(track,options){var opts=options||track.options(this.name);var props=track.properties();var revenue=track.revenue();var event=track.event();var category=this._category||props.category||\"All\";var label=props.label;var value=formatValue(revenue||props.value);var nonInteraction=!!(props.nonInteraction||opts.nonInteraction);push(\"_trackEvent\",category,event,label,value,nonInteraction)};GA.prototype.completedOrderClassic=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products()||[];var props=track.properties();var currency=track.currency();if(!orderId)return;push(\"_addTrans\",orderId,props.affiliation,total,track.tax(),track.shipping(),track.city(),track.state(),track.country());each(products,function(product){var track=new Track({properties:product});push(\"_addItem\",orderId,track.sku(),track.name(),track.category(),track.price(),track.quantity())});push(\"_set\",\"currencyCode\",currency);push(\"_trackTrans\")};function path(properties,options){if(!properties)return;var str=properties.path;if(options.includeSearch&&properties.search)str+=properties.search;return str}function formatValue(value){if(!value||value<0)return 0;return Math.round(value)}function metrics(obj,data){var dimensions=data.dimensions;var metrics=data.metrics;var names=keys(metrics).concat(keys(dimensions));var ret={};for(var i=0;i<names.length;++i){var name=names[i];var key=metrics[name]||dimensions[name];var value=dot(obj,name)||obj[name];if(value==null)continue;ret[key]=value}return ret}GA.prototype.loadEnhancedEcommerce=function(track){if(!this.enhancedEcommerceLoaded){window.ga(\"require\",\"ec\");this.enhancedEcommerceLoaded=true}window.ga(\"set\",\"&cu\",track.currency())};GA.prototype.pushEnhancedEcommerce=function(track){window.ga(\"send\",\"event\",track.category()||\"EnhancedEcommerce\",track.event(),{nonInteraction:1})};GA.prototype.startedOrderEnhanced=function(track){this.viewedCheckoutStep(track)};GA.prototype.updatedOrderEnhanced=function(track){this.startedOrderEnhanced(track)};GA.prototype.viewedCheckoutStepEnhanced=function(track){var products=track.products();var props=track.properties();var options=extractCheckoutOptions(props);this.loadEnhancedEcommerce(track);each(products,function(product){var productTrack=createProductTrack(track,product);enhancedEcommerceTrackProduct(productTrack)});window.ga(\"ec:setAction\",\"checkout\",{step:props.step||1,option:options||undefined});this.pushEnhancedEcommerce(track)};GA.prototype.completedCheckoutStepEnhanced=function(track){var props=track.properties();var options=extractCheckoutOptions(props);if(!props.step||!options)return;this.loadEnhancedEcommerce(track);window.ga(\"ec:setAction\",\"checkout_option\",{step:props.step||1,option:options});window.ga(\"send\",\"event\",\"Checkout\",\"Option\")};GA.prototype.completedOrderEnhanced=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products();var props=track.properties();if(!orderId)return;this.loadEnhancedEcommerce(track);\neach(products,function(product){var productTrack=createProductTrack(track,product);enhancedEcommerceTrackProduct(productTrack)});window.ga(\"ec:setAction\",\"purchase\",{id:orderId,affiliation:props.affiliation,revenue:total,tax:track.tax(),shipping:track.shipping(),coupon:track.coupon()});this.pushEnhancedEcommerce(track)};GA.prototype.refundedOrderEnhanced=function(track){var orderId=track.orderId();var products=track.products();if(!orderId)return;this.loadEnhancedEcommerce(track);each(products,function(product){var track=new Track({properties:product});window.ga(\"ec:addProduct\",{id:track.id()||track.sku(),quantity:track.quantity()})});window.ga(\"ec:setAction\",\"refund\",{id:orderId});this.pushEnhancedEcommerce(track)};GA.prototype.addedProductEnhanced=function(track){this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,\"add\");this.pushEnhancedEcommerce(track)};GA.prototype.removedProductEnhanced=function(track){this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,\"remove\");this.pushEnhancedEcommerce(track)};GA.prototype.viewedProductEnhanced=function(track){this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,\"detail\");this.pushEnhancedEcommerce(track)};GA.prototype.clickedProductEnhanced=function(track){var props=track.properties();this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,\"click\",{list:props.list});this.pushEnhancedEcommerce(track)};GA.prototype.viewedPromotionEnhanced=function(track){var props=track.properties();this.loadEnhancedEcommerce(track);window.ga(\"ec:addPromo\",{id:track.id(),name:track.name(),creative:props.creative,position:props.position});this.pushEnhancedEcommerce(track)};GA.prototype.clickedPromotionEnhanced=function(track){var props=track.properties();this.loadEnhancedEcommerce(track);window.ga(\"ec:addPromo\",{id:track.id(),name:track.name(),creative:props.creative,position:props.position});window.ga(\"ec:setAction\",\"promo_click\",{});this.pushEnhancedEcommerce(track)};function enhancedEcommerceTrackProduct(track){var props=track.properties();window.ga(\"ec:addProduct\",{id:track.id()||track.sku(),name:track.name(),category:track.category(),quantity:track.quantity(),price:track.price(),brand:props.brand,variant:props.variant,currency:track.currency()})}function enhancedEcommerceProductAction(track,action,data){enhancedEcommerceTrackProduct(track);window.ga(\"ec:setAction\",action,data||{})}function extractCheckoutOptions(props){var options=[props.paymentMethod,props.shippingMethod];var valid=select(options,function(e){return e});return valid.length>0?valid.join(\", \"):null}function createProductTrack(track,properties){properties.currency=properties.currency||track.currency();return new Track({properties:properties})}},{facade:9,defaults:192,\"obj-case\":42,each:4,\"analytics.js-integration\":166,is:18,object:20,\"global-queue\":196,select:204,\"use-https\":168}],204:[function(require,module,exports){var toFunction=require(\"to-function\");module.exports=function(arr,fn){var ret=[];fn=toFunction(fn);for(var i=0;i<arr.length;++i){if(fn(arr[i],i)){ret.push(arr[i])}}return ret}},{\"to-function\":74}],113:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"dataLayer\",{wrap:false});var GTM=module.exports=integration(\"Google Tag Manager\").assumesPageview().global(\"dataLayer\").global(\"google_tag_manager\").option(\"containerId\",\"\").option(\"trackNamedPages\",true).option(\"trackCategorizedPages\",true).tag('<script src=\"//www.googletagmanager.com/gtm.js?id={{ containerId }}&l=dataLayer\">');GTM.prototype.initialize=function(){push({\"gtm.start\":Number(new Date),event:\"gtm.js\"});this.load(this.ready)};GTM.prototype.loaded=function(){return!!(window.dataLayer&&Array.prototype.push!==window.dataLayer.push)};GTM.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};GTM.prototype.track=function(track){var props=track.properties();props.event=track.event();push(props)}},{\"analytics.js-integration\":166,\"global-queue\":196}],114:[function(require,module,exports){var Identify=require(\"facade\").Identify;var Track=require(\"facade\").Track;var each=require(\"each\");var integration=require(\"analytics.js-integration\");var omit=require(\"omit\");var pick=require(\"pick\");var GoSquared=module.exports=integration(\"GoSquared\").assumesPageview().global(\"_gs\").option(\"anonymizeIP\",false).option(\"apiSecret\",\"\").option(\"cookieDomain\",null).option(\"trackHash\",false).option(\"trackLocal\",false).option(\"trackParams\",true).option(\"useCookies\",true).tag('<script src=\"//d1l6p2sc9645hc.cloudfront.net/tracker.js\">');GoSquared.prototype.initialize=function(){var self=this;var options=this.options;var user=this.analytics.user();push(options.apiSecret);each(options,function(name,value){if(name===\"apiSecret\")return;if(value==null)return;push(\"set\",name,value)});self.identify(new Identify({traits:user.traits(),userId:user.id()}));self.load(this.ready)};GoSquared.prototype.loaded=function(){return!!(window._gs&&window._gs.v)};GoSquared.prototype.page=function(page){var props=page.properties();var name=page.fullName();push(\"track\",props.path,name||props.title)};GoSquared.prototype.identify=function(identify){var traits=identify.traits({createdAt:\"created_at\",firstName:\"first_name\",lastName:\"last_name\",title:\"company_position\",industry:\"company_industry\"});var specialKeys=[\"id\",\"email\",\"name\",\"first_name\",\"last_name\",\"username\",\"description\",\"avatar\",\"phone\",\"created_at\",\"company_name\",\"company_size\",\"company_position\",\"company_industry\"];var props=pick.apply(null,[traits].concat(specialKeys));props.custom=omit(specialKeys,traits);var id=identify.userId();if(id){push(\"identify\",id,props)}else{push(\"properties\",props)}};GoSquared.prototype.track=function(track){push(\"event\",track.event(),track.properties())};GoSquared.prototype.completedOrder=function(track){var products=track.products();var items=[];each(products,function(product){var track=new Track({properties:product});items.push({category:track.category(),quantity:track.quantity(),price:track.price(),name:track.name()})});push(\"transaction\",track.orderId(),{revenue:track.total(),track:true},items)};function push(){window._gs=window._gs||function(){window._gs.q.push(arguments)};window._gs.q=window._gs.q||[];window._gs.apply(null,arguments)}},{facade:9,each:4,\"analytics.js-integration\":166,omit:205,pick:206}],205:[function(require,module,exports){module.exports=omit;function omit(keys,object){var ret={};for(var item in object){ret[item]=object[item]}for(var i=0;i<keys.length;i++){delete ret[keys[i]]}return ret}},{}],206:[function(require,module,exports){module.exports=pick;function pick(obj){var keys=[].slice.call(arguments,1);var ret={};for(var i=0,key;key=keys[i];i++){if(key in obj)ret[key]=obj[key]}return ret}},{}],115:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var each=require(\"each\");var Heap=module.exports=integration(\"Heap\").global(\"heap\").option(\"appId\",\"\").tag('<script src=\"//cdn.heapanalytics.com/js/heap-{{ appId }}.js\">');Heap.prototype.initialize=function(){window.heap=window.heap||[];window.heap.load=function(appid,config){window.heap.appid=appid;window.heap.config=config;var methodFactory=function(type){return function(){window.heap.push([type].concat(Array.prototype.slice.call(arguments,0)))}};var heapMethods=[\"clearEventProperties\",\"identify\",\"setEventProperties\",\"track\",\"unsetEventProperty\"];each(heapMethods,function(method){window.heap[method]=methodFactory(method)})};window.heap.load(this.options.appId);this.load(this.ready)};Heap.prototype.loaded=function(){return!!(window.heap&&window.heap.appid)};Heap.prototype.identify=function(identify){var traits=identify.traits({email:\"_email\"});var id=identify.userId();if(id)traits.handle=id;window.heap.identify(traits)};Heap.prototype.track=function(track){window.heap.track(track.event(),track.properties())}},{\"analytics.js-integration\":166,each:4}],116:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var Hellobar=module.exports=integration(\"Hello Bar\").assumesPageview().global(\"_hbq\").option(\"apiKey\",\"\").tag('<script src=\"//s3.amazonaws.com/scripts.hellobar.com/{{ apiKey }}.js\">');Hellobar.prototype.initialize=function(){window._hbq=window._hbq||[];this.load(this.ready)};Hellobar.prototype.loaded=function(){return!!(window._hbq&&window._hbq.push!==Array.prototype.push)}},{\"analytics.js-integration\":166}],117:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var is=require(\"is\");var HitTail=module.exports=integration(\"HitTail\").assumesPageview().global(\"htk\").option(\"siteId\",\"\").tag('<script src=\"//{{ siteId }}.hittail.com/mlt.js\">');HitTail.prototype.initialize=function(){this.load(this.ready)};HitTail.prototype.loaded=function(){return is.fn(window.htk)}},{\"analytics.js-integration\":166,is:18}],118:[function(require,module,exports){var convert=require(\"convert-dates\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_hsq\");var HubSpot=module.exports=integration(\"HubSpot\").assumesPageview().global(\"_hsq\").option(\"portalId\",null).tag('<script id=\"hs-analytics\" src=\"https://js.hs-analytics.net/analytics/{{ cacheBuster }}/{{ portalId }}.js\">');HubSpot.prototype.initialize=function(){window._hsq=[];var cacheBuster=Math.ceil(new Date/3e5)*3e5;this.load({cacheBuster:cacheBuster},this.ready)};HubSpot.prototype.loaded=function(){return!!(window._hsq&&window._hsq.push!==Array.prototype.push)};HubSpot.prototype.page=function(){push(\"trackPageView\")};HubSpot.prototype.identify=function(identify){if(!identify.email())return;var traits=identify.traits();traits=convertDates(traits);push(\"identify\",traits)};HubSpot.prototype.track=function(track){var props=track.properties();props=convertDates(props);push(\"trackEvent\",track.event(),props)};function convertDates(properties){return convert(properties,function(date){return date.getTime()})}},{\"convert-dates\":200,\"analytics.js-integration\":166,\"global-queue\":196}],119:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var Improvely=module.exports=integration(\"Improvely\").assumesPageview().global(\"_improvely\").global(\"improvely\").option(\"domain\",\"\").option(\"projectId\",null).tag('<script src=\"//{{ domain }}.iljmp.com/improvely.js\">');Improvely.prototype.initialize=function(){window._improvely=[];window.improvely={init:function(e,t){window._improvely.push([\"init\",e,t])},goal:function(e){window._improvely.push([\"goal\",e])},label:function(e){window._improvely.push([\"label\",e])}};var domain=this.options.domain;var id=this.options.projectId;window.improvely.init(domain,id);this.load(this.ready)};Improvely.prototype.loaded=function(){return!!(window.improvely&&window.improvely.identify)};Improvely.prototype.identify=function(identify){var id=identify.userId();if(id)window.improvely.label(id)};Improvely.prototype.track=function(track){var props=track.properties({revenue:\"amount\"});props.type=track.event();window.improvely.goal(props)}},{\"analytics.js-integration\":166}],120:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_iva\");var InsideVault=module.exports=integration(\"InsideVault\").global(\"_iva\").option(\"clientId\",\"\").option(\"domain\",\"\").tag('<script src=\"//analytics.staticiv.com/iva.js\">').mapping(\"events\");InsideVault.prototype.initialize=function(){var domain=this.options.domain;window._iva=window._iva||[];push(\"setClientId\",this.options.clientId);var userId=this.analytics.user().anonymousId();if(userId)push(\"setUserId\",userId);if(domain)push(\"setDomain\",domain);this.load(this.ready)};InsideVault.prototype.loaded=function(){return!!(window._iva&&window._iva.push!==Array.prototype.push)};InsideVault.prototype.identify=function(identify){push(\"setUserId\",identify.anonymousId())};InsideVault.prototype.page=function(){push(\"trackEvent\",\"click\")};InsideVault.prototype.track=function(track){var user=this.analytics.user();var events=this.events(track.event());var value=track.revenue()||track.value()||0;var eventId=track.orderId()||user.anonymousId()||\"\";each(events,function(event){if(event!==\"sale\"){push(\"trackEvent\",event,value,eventId)}})}},{each:4,\"analytics.js-integration\":166,\"global-queue\":196}],121:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"__insp\");var Inspectlet=module.exports=integration(\"Inspectlet\").assumesPageview().global(\"__insp\").global(\"__insp_\").option(\"wid\",\"\").tag('<script src=\"//cdn.inspectlet.com/inspectlet.js\">');Inspectlet.prototype.initialize=function(){push(\"wid\",this.options.wid);this.load(this.ready)};Inspectlet.prototype.loaded=function(){return!!(window.__insp_&&window.__insp)};Inspectlet.prototype.identify=function(identify){var traits=identify.traits({id:\"userid\"});var email=identify.email();if(email)push(\"identify\",email);push(\"tagSession\",traits)};Inspectlet.prototype.track=function(track){push(\"tagSession\",track.event())};Inspectlet.prototype.page=function(){push(\"virtualPage\")}},{\"analytics.js-integration\":166,\"global-queue\":196}],122:[function(require,module,exports){var alias=require(\"alias\");var convertDates=require(\"convert-dates\");var defaults=require(\"defaults\");var del=require(\"obj-case\").del;var integration=require(\"analytics.js-integration\");var is=require(\"is\");var Intercom=module.exports=integration(\"Intercom\").global(\"Intercom\").option(\"activator\",\"#IntercomDefaultWidget\").option(\"appId\",\"\").tag('<script src=\"https://widget.intercom.io/widget/{{ appId }}\">');Intercom.prototype.initialize=function(){window.Intercom=function(){window.Intercom.q.push(arguments)};window.Intercom.q=[];this.load(this.ready)};Intercom.prototype.loaded=function(){return is.fn(window.Intercom)};Intercom.prototype.page=function(){this.bootOrUpdate()};Intercom.prototype.identify=function(identify){var traits=identify.traits({userId:\"user_id\"});var opts=identify.options(this.name);var companyCreated=identify.companyCreated();var created=identify.created();var name=identify.name();var id=identify.userId();var group=this.analytics.group();if(!id&&!traits.email){return}if(traits.company!==null&&!is.object(traits.company)){delete traits.company}if(traits.company){defaults(traits.company,group.traits())}if(name)traits.name=name;if(created){del(traits,\"created\");del(traits,\"createdAt\");traits.created_at=created}if(companyCreated){del(traits.company,\"created\");del(traits.company,\"createdAt\");traits.company.created_at=companyCreated}traits=convertDates(traits,formatDate);if(opts.increments)traits.increments=opts.increments;if(opts.userHash)traits.user_hash=opts.userHash;if(opts.user_hash)traits.user_hash=opts.user_hash;this.bootOrUpdate(traits)};Intercom.prototype.group=function(group){var props=group.properties();props=alias(props,{createdAt:\"created\"});props=alias(props,{created:\"created_at\"});var id=group.groupId();if(id)props.id=id;api(\"update\",{company:props})};Intercom.prototype.track=function(track){api(\"trackEvent\",track.event(),track.properties())};Intercom.prototype.bootOrUpdate=function(options){options=options||{};var method=this.booted===true?\"update\":\"boot\";var activator=this.options.activator;options.app_id=this.options.appId;if(activator!==\"#IntercomDefaultWidget\"){options.widget={activator:activator}}api(method,options);this.booted=true};function formatDate(date){return Math.floor(date/1e3)}function api(){window.Intercom.apply(window.Intercom,arguments)}},{alias:199,\"convert-dates\":200,defaults:192,\"obj-case\":42,\"analytics.js-integration\":166,is:18}],123:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var clone=require(\"clone\");var Keen=module.exports=integration(\"Keen IO\").global(\"Keen\").option(\"ipAddon\",false).option(\"projectId\",\"\").option(\"readKey\",\"\").option(\"referrerAddon\",false).option(\"trackAllPages\",false).option(\"trackCategorizedPages\",true).option(\"trackNamedPages\",true).option(\"uaAddon\",false).option(\"urlAddon\",false).option(\"writeKey\",\"\").tag('<script src=\"//d26b395fwzu5fz.cloudfront.net/3.0.7/{{ lib }}.min.js\">');Keen.prototype.initialize=function(){!function(a,b){if(void 0===b[a]){b[\"_\"+a]={},b[a]=function(c){b[\"_\"+a].clients=b[\"_\"+a].clients||{},b[\"_\"+a].clients[c.projectId]=this,this._config=c},b[a].ready=function(c){b[\"_\"+a].ready=b[\"_\"+a].ready||[],b[\"_\"+a].ready.push(c)};for(var c=[\"addEvent\",\"setGlobalProperties\",\"trackExternalLink\",\"on\"],d=0;d<c.length;d++){var e=c[d],f=function(a){return function(){return this[\"_\"+a]=this[\"_\"+a]||[],this[\"_\"+a].push(arguments),this}};b[a].prototype[e]=f(e)}}}(\"Keen\",window);var options=this.options;this.client=new window.Keen({projectId:options.projectId,writeKey:options.writeKey,readKey:options.readKey});var lib=this.options.readKey?\"keen\":\"keen-tracker\";this.load({lib:lib},this.ready)};Keen.prototype.loaded=function(){return!!(window.Keen&&window.Keen.prototype.configure)};Keen.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(name&&opts.trackNamedPages){this.track(page.track(name))}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}};Keen.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();var user={};if(id)user.userId=id;if(traits)user.traits=traits;var props={user:user};this.addons(props,identify);this.client.setGlobalProperties(function(){return clone(props)})};Keen.prototype.track=function(track){var props=track.properties();this.addons(props,track);this.client.addEvent(track.event(),props)};Keen.prototype.addons=function(obj,msg){var options=this.options;var addons=[];if(options.ipAddon){addons.push({name:\"keen:ip_to_geo\",input:{ip:\"ip_address\"},output:\"ip_geo_info\"});obj.ip_address=\"${keen.ip}\"}if(options.uaAddon){addons.push({name:\"keen:ua_parser\",input:{ua_string:\"user_agent\"},output:\"parsed_user_agent\"});obj.user_agent=\"${keen.user_agent}\"}if(options.urlAddon){addons.push({name:\"keen:url_parser\",input:{url:\"page_url\"},output:\"parsed_page_url\"});obj.page_url=document.location.href}if(options.referrerAddon){addons.push({name:\"keen:referrer_parser\",input:{referrer_url:\"referrer_url\",page_url:\"page_url\"},output:\"referrer_info\"});obj.referrer_url=document.referrer;obj.page_url=document.location.href}obj.keen={timestamp:msg.timestamp(),addons:addons}}},{\"analytics.js-integration\":166,clone:13}],124:[function(require,module,exports){var includes=require(\"includes\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var Kenshoo=module.exports=integration(\"Kenshoo\").global(\"k_trackevent\").option(\"cid\",\"\").option(\"events\",[]).option(\"subdomain\",\"\").tag('<script src=\"//{{ subdomain }}.xg4ken.com/media/getpx.php?cid={{ cid }}\">');Kenshoo.prototype.initialize=function(){this.load(this.ready)};Kenshoo.prototype.loaded=function(){return is.fn(window.k_trackevent)};Kenshoo.prototype.track=function(track){var events=this.options.events;var event=track.event();var revenue=track.revenue()||0;if(!includes(event,events))return;var params=[\"id=\"+this.options.cid,\"type=conv\",\"val=\"+revenue,\"orderId=\"+track.orderId(),\"promoCode=\"+track.coupon(),\"valueCurrency=\"+track.currency(),\"GCID=\",\"kw=\",\"product=\"];window.k_trackevent(params,this.options.subdomain)}},{includes:70,\"analytics.js-integration\":166,is:18}],125:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var push=require(\"global-queue\")(\"_kmq\");var KISSmetrics=module.exports=integration(\"KISSmetrics\").assumesPageview().global(\"KM\").global(\"_kmil\").global(\"_kmq\").option(\"apiKey\",\"\").option(\"prefixProperties\",true).option(\"trackCategorizedPages\",true).option(\"trackNamedPages\",true).tag(\"library\",'<script src=\"//scripts.kissmetrics.com/{{ apiKey }}.2.js\">');exports.isMobile=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone|iPod/i);KISSmetrics.prototype.initialize=function(page){var self=this;window._kmq=[];if(exports.isMobile)push(\"set\",{\"Mobile Session\":\"Yes\"});this.load(\"library\",function(){self.trackPage(page);self.ready()})};KISSmetrics.prototype.loaded=function(){return is.object(window.KM)};KISSmetrics.prototype.page=function(page){if(!window.KM_SKIP_PAGE_VIEW)window.KM.pageView();this.trackPage(page)};KISSmetrics.prototype.trackPage=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(name&&opts.trackNamedPages){this.track(page.track(name))}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}};KISSmetrics.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();if(id)push(\"identify\",id);if(traits)push(\"set\",traits)};KISSmetrics.prototype.track=function(track){var mapping={revenue:\"Billing Amount\"};var event=track.event();var properties=track.properties(mapping);if(this.options.prefixProperties)properties=prefix(event,properties);push(\"record\",event,properties)};KISSmetrics.prototype.alias=function(alias){push(\"alias\",alias.to(),alias.from())};KISSmetrics.prototype.completedOrder=function(track){var products=track.products();var event=track.event();push(\"record\",event,prefix(event,track.properties()));window._kmq.push(function(){var km=window.KM;each(products,function(product,i){var item=prefix(event,product);item._t=km.ts()+i;item._d=1;km.set(item)})})};function prefix(event,properties){var prefixed={};each(properties,function(key,val){if(key===\"Billing Amount\"){prefixed[key]=val}else{prefixed[event+\" - \"+key]=val}});return prefixed}},{each:4,\"analytics.js-integration\":166,is:18,\"global-queue\":196}],126:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_learnq\");var tick=require(\"next-tick\");var traitAliases={id:\"$id\",email:\"$email\",firstName:\"$first_name\",lastName:\"$last_name\",phone:\"$phone_number\",title:\"$title\"};var Klaviyo=module.exports=integration(\"Klaviyo\").assumesPageview().global(\"_learnq\").option(\"apiKey\",\"\").tag('<script src=\"//a.klaviyo.com/media/js/learnmarklet.js\">');Klaviyo.prototype.initialize=function(){var self=this;push(\"account\",this.options.apiKey);this.load(function(){tick(self.ready)})};Klaviyo.prototype.loaded=function(){return!!(window._learnq&&window._learnq.push!==Array.prototype.push)};Klaviyo.prototype.identify=function(identify){var traits=identify.traits(traitAliases);if(!traits.$id&&!traits.$email)return;push(\"identify\",traits)};Klaviyo.prototype.group=function(group){var props=group.properties();if(!props.name)return;push(\"identify\",{$organization:props.name})};Klaviyo.prototype.track=function(track){push(\"track\",track.event(),track.properties({revenue:\"$value\"}))}},{\"analytics.js-integration\":166,\"global-queue\":196,\"next-tick\":57}],127:[function(require,module,exports){var Identify=require(\"facade\").Identify;var clone=require(\"clone\");var each=require(\"each\");var integration=require(\"analytics.js-integration\");var tick=require(\"next-tick\");var when=require(\"when\");var LiveChat=module.exports=integration(\"LiveChat\").assumesPageview().global(\"LC_API\").global(\"LC_Invite\").global(\"__lc\").global(\"__lc_inited\").option(\"group\",0).option(\"license\",\"\").option(\"listen\",false).tag('<script src=\"//cdn.livechatinc.com/tracking.js\">');var integrationContext={name:\"livechat\",version:\"1.0.0\"};LiveChat.prototype.initialize=function(){var self=this;var user=this.analytics.user();var identify=new Identify({userId:user.id(),traits:user.traits()});window.__lc=clone(this.options);window.__lc.visitor={name:identify.name(),email:identify.email()};delete window.__lc.listen;this.load(function(){when(function(){return self.loaded()},function(){if(self.options.listen)self.attachListeners();tick(self.ready)})})};LiveChat.prototype.loaded=function(){return!!(window.LC_API&&window.LC_Invite)};LiveChat.prototype.identify=function(identify){var traits=identify.traits({userId:\"User ID\"});window.LC_API.set_custom_variables(convert(traits))};LiveChat.prototype.attachListeners=function(){var self=this;window.LC_API=window.LC_API||{};window.LC_API.on_chat_started=function(data){self.analytics.track(\"Live Chat Conversation Started\",{agentName:data.agent_name},{context:{integration:integrationContext}})};window.LC_API.on_message=function(data){if(data.user_type===\"visitor\"){self.analytics.track(\"Live Chat Message Sent\",{},{context:{integration:integrationContext}})}else{self.analytics.track(\"Live Chat Message Received\",{agentName:data.agent_name,agentUsername:data.agent_login},{context:{integration:integrationContext}})}};window.LC_API.on_chat_ended=function(){self.analytics.track(\"Live Chat Conversation Ended\")}};function convert(traits){var arr=[];each(traits,function(key,value){arr.push({name:key,value:value})});return arr}},{facade:9,clone:13,each:4,\"analytics.js-integration\":166,\"next-tick\":57,when:198}],128:[function(require,module,exports){var Identify=require(\"facade\").Identify;var integration=require(\"analytics.js-integration\");var useHttps=require(\"use-https\");var LuckyOrange=module.exports=integration(\"Lucky Orange\").assumesPageview().global(\"_loq\").global(\"__wtw_watcher_added\").global(\"__wtw_lucky_site_id\").global(\"__wtw_lucky_is_segment_io\").global(\"__wtw_custom_user_data\").option(\"siteId\",null).tag(\"http\",'<script src=\"http://www.luckyorange.com/w.js?{{ cacheBuster }}\">').tag(\"https\",'<script src=\"https://ssl.luckyorange.com/w.js?{{ cacheBuster }}\">');LuckyOrange.prototype.initialize=function(){if(!window._loq)window._loq=[];window.__wtw_lucky_site_id=this.options.siteId;var user=this.analytics.user();this.identify(new Identify({traits:user.traits(),userId:user.id()}));var cacheBuster=Math.floor((new Date).getTime()/6e4);var tagName=useHttps()?\"https\":\"http\";this.load(tagName,{cacheBuster:cacheBuster},this.ready)};LuckyOrange.prototype.loaded=function(){return!!window.__wtw_watcher_added};LuckyOrange.prototype.identify=function(identify){var traits=identify.traits();var email=identify.email();if(email)traits.email=email;var name=identify.name();if(name)traits.name=name;window.__wtw_custom_user_data=traits}},{facade:9,\"analytics.js-integration\":166,\"use-https\":168}],129:[function(require,module,exports){var alias=require(\"alias\");var integration=require(\"analytics.js-integration\");var Lytics=module.exports=integration(\"Lytics\").global(\"jstag\").option(\"cid\",\"\").option(\"cookie\",\"seerid\").option(\"delay\",2e3).option(\"sessionTimeout\",1800).option(\"url\",\"//c.lytics.io\").tag('<script src=\"//c.lytics.io/static/io.min.js\">');var aliases={sessionTimeout:\"sessecs\"};Lytics.prototype.initialize=function(){var options=alias(this.options,aliases);window.jstag=function(){var t={_q:[],_c:options,ts:(new Date).getTime()};t.send=function(){this._q.push([\"ready\",\"send\",Array.prototype.slice.call(arguments)]);return this};return t}();this.load(this.ready)};Lytics.prototype.loaded=function(){return!!(window.jstag&&window.jstag.bind)};Lytics.prototype.page=function(page){window.jstag.send(page.properties())};Lytics.prototype.identify=function(identify){var traits=identify.traits({userId:\"_uid\"});window.jstag.send(traits)};Lytics.prototype.track=function(track){var props=track.properties();props._e=track.event();window.jstag.send(props)}},{alias:199,\"analytics.js-integration\":166}],130:[function(require,module,exports){var alias=require(\"alias\");var dates=require(\"convert-dates\");var del=require(\"obj-case\").del;var each=require(\"each\");var includes=require(\"includes\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var iso=require(\"to-iso-string\");var some=require(\"some\");var Mixpanel=module.exports=integration(\"Mixpanel\").global(\"mixpanel\").option(\"increments\",[]).option(\"cookieName\",\"\").option(\"crossSubdomainCookie\",false).option(\"secureCookie\",false).option(\"nameTag\",true).option(\"pageview\",false).option(\"people\",false).option(\"token\",\"\").option(\"trackAllPages\",false).option(\"trackNamedPages\",true).option(\"trackCategorizedPages\",true).tag('<script src=\"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js\">');var optionsAliases={cookieName:\"cookie_name\",crossSubdomainCookie:\"cross_subdomain_cookie\",secureCookie:\"secure_cookie\"};Mixpanel.prototype.initialize=function(){(function(c,a){window.mixpanel=a;var b,d,h,e;a._i=[];a.init=function(b,c,f){function d(a,b){var c=b.split(\".\");2==c.length&&(a=a[c[0]],b=c[1]);a[b]=function(){a.push([b].concat(Array.prototype.slice.call(arguments,0)))}}var g=a;\"undefined\"!==typeof f?g=a[f]=[]:f=\"mixpanel\";g.people=g.people||[];h=[\"disable\",\"track\",\"track_pageview\",\"track_links\",\"track_forms\",\"register\",\"register_once\",\"unregister\",\"identify\",\"alias\",\"name_tag\",\"set_config\",\"people.set\",\"people.increment\",\"people.track_charge\",\"people.append\"];for(e=0;e<h.length;e++)d(g,h[e]);a._i.push([b,c,f])};a.__SV=1.2})(document,window.mixpanel||[]);this.options.increments=lowercase(this.options.increments);var options=alias(this.options,optionsAliases);window.mixpanel.init(options.token,options);this.load(this.ready)};Mixpanel.prototype.loaded=function(){return!!(window.mixpanel&&window.mixpanel.config)};Mixpanel.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};var traitAliases={created:\"$created\",email:\"$email\",firstName:\"$first_name\",lastName:\"$last_name\",lastSeen:\"$last_seen\",name:\"$name\",username:\"$username\",phone:\"$phone\"};Mixpanel.prototype.identify=function(identify){var username=identify.username();var email=identify.email();var id=identify.userId();if(id)window.mixpanel.identify(id);var nametag=email||username||id;if(nametag)window.mixpanel.name_tag(nametag);var traits=identify.traits(traitAliases);if(traits.$created)del(traits,\"createdAt\");window.mixpanel.register(dates(traits,iso));if(this.options.people)window.mixpanel.people.set(traits)};Mixpanel.prototype.track=function(track){var increments=this.options.increments;var increment=track.event().toLowerCase();var people=this.options.people;var props=track.properties();var revenue=track.revenue();delete props.distinct_id;delete props.ip;delete props.mp_name_tag;delete props.mp_note;delete props.token;each(props,function(key,val){if(is.array(val)&&some(val,is.object))props[key]=val.length});if(people&&includes(increment,increments)){window.mixpanel.people.increment(track.event());window.mixpanel.people.set(\"Last \"+track.event(),new Date)}props=dates(props,iso);window.mixpanel.track(track.event(),props);if(revenue&&people){window.mixpanel.people.track_charge(revenue)}};Mixpanel.prototype.alias=function(alias){var mp=window.mixpanel;var to=alias.to();if(mp.get_distinct_id&&mp.get_distinct_id()===to)return;if(mp.get_property&&mp.get_property(\"$people_distinct_id\")===to)return;mp.alias(to,alias.from())};function lowercase(arr){var ret=new Array(arr.length);for(var i=0;i<arr.length;++i){ret[i]=String(arr[i]).toLowerCase()}return ret}},{alias:199,\"convert-dates\":200,\"obj-case\":42,each:4,includes:70,\"analytics.js-integration\":166,is:18,\"to-iso-string\":195,some:207}],207:[function(require,module,exports){var some=[].some;module.exports=function(arr,fn){if(some)return some.call(arr,fn);for(var i=0,l=arr.length;i<l;++i){if(fn(arr[i],i))return true}return false}},{}],131:[function(require,module,exports){var bind=require(\"bind\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");\nvar when=require(\"when\");var Mojn=module.exports=integration(\"Mojn\").global(\"_mojnTrack\").option(\"customerCode\",\"\").tag('<script src=\"https://track.idtargeting.com/{{ customerCode }}/track.js\">');Mojn.prototype.initialize=function(){window._mojnTrack=window._mojnTrack||[];window._mojnTrack.push({cid:this.options.customerCode});var loaded=bind(this,this.loaded);var ready=this.ready;this.load(function(){when(loaded,ready)})};Mojn.prototype.loaded=function(){return is.object(window._mojnTrack)};Mojn.prototype.identify=function(identify){var email=identify.email();if(!email)return;var img=new Image;img.src=\"//matcher.idtargeting.com/identify.gif?cid=\"+this.options.customerCode+\"&_mjnctid=\"+email;img.width=1;img.height=1;return img};Mojn.prototype.track=function(track){var properties=track.properties();var revenue=properties.revenue;if(!revenue)return;var currency=properties.currency||\"\";var conv=currency+revenue;window._mojnTrack.push({conv:conv});return conv}},{bind:55,\"analytics.js-integration\":166,is:18,when:198}],132:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_mfq\");var Mouseflow=module.exports=integration(\"Mouseflow\").assumesPageview().global(\"_mfq\").global(\"mouseflow\").global(\"mouseflowHtmlDelay\").option(\"apiKey\",\"\").option(\"mouseflowHtmlDelay\",0).tag('<script src=\"//cdn.mouseflow.com/projects/{{ apiKey }}.js\">');Mouseflow.prototype.initialize=function(){window.mouseflowHtmlDelay=this.options.mouseflowHtmlDelay;this.load(this.ready)};Mouseflow.prototype.loaded=function(){return!!window.mouseflow};Mouseflow.prototype.page=function(){if(!window.mouseflow)return;if(typeof window.mouseflow.newPageView!==\"function\")return;window.mouseflow.newPageView()};Mouseflow.prototype.identify=function(identify){set(identify.traits())};Mouseflow.prototype.track=function(track){var props=track.properties();props.event=track.event();set(props)};function set(obj){each(obj,function(key,value){push(\"setVariable\",key,value)})}},{each:4,\"analytics.js-integration\":166,\"global-queue\":196}],133:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var useHttps=require(\"use-https\");var MouseStats=module.exports=integration(\"MouseStats\").assumesPageview().global(\"msaa\").global(\"MouseStatsVisitorPlaybacks\").option(\"accountNumber\",\"\").tag(\"http\",'<script src=\"http://www2.mousestats.com/js/{{ path }}.js?{{ cacheBuster }}\">').tag(\"https\",'<script src=\"https://ssl.mousestats.com/js/{{ path }}.js?{{ cacheBuster }}\">');MouseStats.prototype.initialize=function(){var accountNumber=this.options.accountNumber;var path=accountNumber.slice(0,1)+\"/\"+accountNumber.slice(1,2)+\"/\"+accountNumber;var cacheBuster=Math.floor((new Date).getTime()/6e4);var tagName=useHttps()?\"https\":\"http\";this.load(tagName,{path:path,cacheBuster:cacheBuster},this.ready)};MouseStats.prototype.loaded=function(){return is.array(window.MouseStatsVisitorPlaybacks)};MouseStats.prototype.identify=function(identify){each(identify.traits(),function(key,value){window.MouseStatsVisitorPlaybacks.customVariable(key,value)})}},{each:4,\"analytics.js-integration\":166,is:18,\"use-https\":168}],134:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"__nls\");var Navilytics=module.exports=integration(\"Navilytics\").assumesPageview().global(\"__nls\").option(\"memberId\",\"\").option(\"projectId\",\"\").tag('<script src=\"//www.navilytics.com/nls.js?mid={{ memberId }}&pid={{ projectId }}\">');Navilytics.prototype.initialize=function(){window.__nls=window.__nls||[];this.load(this.ready)};Navilytics.prototype.loaded=function(){return!!(window.__nls&&Array.prototype.push!==window.__nls.push)};Navilytics.prototype.track=function(track){push(\"tagRecording\",track.event())}},{\"analytics.js-integration\":166,\"global-queue\":196}],135:[function(require,module,exports){var alias=require(\"alias\");var integration=require(\"analytics.js-integration\");var Nudgespot=module.exports=integration(\"Nudgespot\").assumesPageview().global(\"nudgespot\").option(\"clientApiKey\",\"\").tag('<script id=\"nudgespot\" src=\"//cdn.nudgespot.com/nudgespot.js\">');Nudgespot.prototype.initialize=function(){window.nudgespot=window.nudgespot||[];window.nudgespot.init=function(n,t){function f(n,m){var a=m.split(\".\");2==a.length&&(n=n[a[0]],m=a[1]);n[m]=function(){n.push([m].concat(Array.prototype.slice.call(arguments,0)))}}n._version=.1;n._globals=[t];n.people=n.people||[];n.params=n.params||[];m=\"track register unregister identify set_config people.delete people.create people.update people.create_property people.tag people.remove_Tag\".split(\" \");for(var i=0;i<m.length;i++)f(n,m[i])};window.nudgespot.init(window.nudgespot,this.options.clientApiKey);this.load(this.ready)};Nudgespot.prototype.loaded=function(){return!!(window.nudgespot&&window.nudgespot.push!==Array.prototype.push)};Nudgespot.prototype.identify=function(identify){if(!identify.userId())return this.debug(\"user id required\");var traits=identify.traits({createdAt:\"created\"});traits=alias(traits,{created:\"created_at\"});window.nudgespot.identify(identify.userId(),traits)};Nudgespot.prototype.track=function(track){window.nudgespot.track(track.event(),track.properties())}},{alias:199,\"analytics.js-integration\":166}],136:[function(require,module,exports){var https=require(\"use-https\");var integration=require(\"analytics.js-integration\");var tick=require(\"next-tick\");var Olark=module.exports=integration(\"Olark\").assumesPageview().global(\"olark\").option(\"groupId\",\"\").option(\"identify\",true).option(\"listen\",false).option(\"page\",true).option(\"siteId\",\"\").option(\"track\",false);var integrationContext={name:\"olark\",version:\"1.0.0\"};Olark.prototype.initialize=function(){var self=this;this.load(function(){tick(self.ready)});var groupId=this.options.groupId;if(groupId)api(\"chat.setOperatorGroup\",{group:groupId});api(\"box.onExpand\",function(){self._open=true});api(\"box.onShrink\",function(){self._open=false});if(this.options.listen)this.attachListeners()};Olark.prototype.load=function(callback){window.olark||function(c){var f=window,d=document,l=https()?\"https:\":\"http:\",z=c.name,r=\"load\";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){f[z](\"call\",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={0:+new Date};a.P=function(u){a.p[u]=new Date-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent(\"on\"+r,s);var ld=function(){function p(hd){hd=\"head\";return[\"<\",hd,\"></\",hd,\"><\",i,\" onl\"+'oad=\"var d=',g,\";d.getElementsByTagName('head')[0].\",j,\"(d.\",h,\"('script')).\",k,\"='\",l,\"//\",a.l,\"'\",'\"',\"></\",i,\">\"].join(\"\")}var i=\"body\",m=d[i];if(!m){return setTimeout(ld,100)}a.P(1);var j=\"appendChild\",h=\"createElement\",k=\"src\",n=d[h](\"div\"),v=n[j](d[h](z)),b=d[h](\"iframe\"),g=\"document\",e=\"domain\",o;n.style.display=\"none\";m.insertBefore(n,m.firstChild).id=z;b.frameBorder=\"0\";b.id=z+\"-loader\";if(/MSIE[ ]+6/.test(navigator.userAgent)){b.src=\"javascript:false\"}b.allowTransparency=\"true\";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o=\"javascript:var d=\"+g+\".open();d.domain='\"+d.domain+\"';\";b[k]=o+\"void(0);\"}try{var t=b.contentWindow[g];t.write(p());t.close()}catch(x){b[k]=o+'d.write(\"'+p().replace(/\"/g,String.fromCharCode(92)+'\"')+'\");d.close();'}a.P(2)};ld()};nt()}({loader:\"static.olark.com/jsclient/loader0.js\",name:\"olark\",methods:[\"configure\",\"extend\",\"declare\",\"identify\"]});window.olark.identify(this.options.siteId);callback()};Olark.prototype.loaded=function(){return!!window.olark};Olark.prototype.page=function(page){if(!this.options.page)return;var props=page.properties();var name=page.fullName();if(!name&&!props.url)return;name=name?name+\" page\":props.url;this.notify(\"looking at \"+name)};Olark.prototype.identify=function(identify){if(!this.options.identify)return;var username=identify.username();var traits=identify.traits();var id=identify.userId();var email=identify.email();var phone=identify.phone();var name=identify.name()||identify.firstName();if(traits)api(\"visitor.updateCustomFields\",traits);if(email)api(\"visitor.updateEmailAddress\",{emailAddress:email});if(phone)api(\"visitor.updatePhoneNumber\",{phoneNumber:phone});if(name)api(\"visitor.updateFullName\",{fullName:name});var nickname=name||email||username||id;if(name&&email)nickname+=\" (\"+email+\")\";if(nickname)api(\"chat.updateVisitorNickname\",{snippet:nickname})};Olark.prototype.track=function(track){if(!this.options.track)return;this.notify('visitor triggered \"'+track.event()+'\"')};Olark.prototype.attachListeners=function(){var self=this;api(\"chat.onBeginConversation\",function(){self.analytics.track(\"Live Chat Conversation Started\",{},{context:{integration:integrationContext}})});api(\"chat.onMessageToOperator\",function(){self.analytics.track(\"Live Chat Message Sent\",{},{context:{integration:integrationContext}})});api(\"chat.onMessageToVisitor\",function(){self.analytics.track(\"Live Chat Message Received\",{},{context:{integration:integrationContext}})})};Olark.prototype.notify=function(message){if(!this._open)return;message=message.toLowerCase();api(\"visitor.getDetails\",function(data){if(!data||!data.isConversing)return;api(\"chat.sendNotificationToOperator\",{body:message})})};function api(action,value){window.olark(\"api.\"+action,value)}},{\"use-https\":168,\"analytics.js-integration\":166,\"next-tick\":57}],137:[function(require,module,exports){var each=require(\"each\");var foldl=require(\"foldl\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"optimizely\");var tick=require(\"next-tick\");var Optimizely=module.exports=integration(\"Optimizely\").option(\"listen\",false).option(\"trackCategorizedPages\",true).option(\"trackNamedPages\",true).option(\"variations\",true);var integrationContext={name:\"optimizely\",version:\"1.0.0\"};Optimizely.prototype.initialize=function(){var self=this;if(this.options.variations){tick(function(){self.replay()})}if(this.options.listen){tick(function(){self.roots()})}this.ready()};Optimizely.prototype.track=function(track){var props=track.properties();if(props.revenue)props.revenue*=100;push(\"trackEvent\",track.event(),props)};Optimizely.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};Optimizely.prototype.roots=function(){if(!window.optimizely)return;var data=window.optimizely.data;if(!data)return;var allExperiments=data.experiments;if(!data||!data.state||!allExperiments)return;var activeExperiments=getExperiments({variationNamesMap:data.state.variationNamesMap,variationIdsMap:data.state.variationIdsMap,activeExperimentIds:data.state.activeExperiments,allExperiments:allExperiments});var self=this;each(activeExperiments,function(props){self.analytics.track(\"Experiment Viewed\",props,{context:{integration:integrationContext}})})};Optimizely.prototype.replay=function(){if(!window.optimizely)return;var data=window.optimizely.data;if(!data||!data.experiments||!data.state)return;var traits=foldl(function(traits,variation,experimentId){var experiment=data.experiments[experimentId].name;traits[\"Experiment: \"+experiment]=variation;return traits},{},data.state.variationNamesMap);this.analytics.identify(traits)};function getExperiments(options){return foldl(function(results,experimentId){var experiment=options.allExperiments[experimentId];if(experiment){results.push({variationName:options.variationNamesMap[experimentId],variationId:options.variationIdsMap[experimentId][0],experimentId:experimentId,experimentName:experiment.name})}return results},[],options.activeExperimentIds)}},{each:4,foldl:180,\"analytics.js-integration\":166,\"global-queue\":196,\"next-tick\":57}],138:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var omit=require(\"omit\");var Outbound=module.exports=integration(\"Outbound\").global(\"outbound\").option(\"publicApiKey\",\"\").tag('<script src=\"//cdn.outbound.io/{{ publicApiKey }}.js\">');Outbound.prototype.initialize=function(){window.outbound=window.outbound||[];window.outbound.methods=[\"identify\",\"track\",\"registerApnsToken\",\"registerGcmToken\",\"disableApnsToken\",\"disableGcmToken\"];window.outbound.factory=function(method){return function(){var args=Array.prototype.slice.call(arguments);args.unshift(method);window.outbound.push(args);return window.outbound}};for(var i=0;i<window.outbound.methods.length;i++){var key=window.outbound.methods[i];window.outbound[key]=window.outbound.factory(key)}this.load(this.ready)};Outbound.prototype.loaded=function(){return window.outbound};Outbound.prototype.identify=function(identify){var traitsToOmit=[\"id\",\"userId\",\"email\",\"phone\",\"firstName\",\"lastName\"];var userId=identify.userId()||identify.anonymousId();var attributes={attributes:omit(traitsToOmit,identify.traits()),email:identify.email(),phoneNumber:identify.phone(),firstName:identify.firstName(),lastName:identify.lastName()};window.outbound.identify(userId,attributes)};Outbound.prototype.track=function(track){window.outbound.track(track.event(),track.properties(),track.timestamp())};Outbound.prototype.alias=function(alias){window.outbound.identify(alias.userId(),{previousId:alias.previousId()})}},{\"analytics.js-integration\":166,omit:205}],139:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_pq\");var PerfectAudience=module.exports=integration(\"Perfect Audience\").assumesPageview().global(\"_pq\").option(\"siteId\",\"\").tag('<script src=\"//tag.perfectaudience.com/serve/{{ siteId }}.js\">');PerfectAudience.prototype.initialize=function(){window._pq=window._pq||[];this.load(this.ready)};PerfectAudience.prototype.loaded=function(){return!!(window._pq&&window._pq.push)};PerfectAudience.prototype.track=function(track){var total=track.total()||track.revenue();var orderId=track.orderId();var props={};var sendProps=false;if(total){props.revenue=total;sendProps=true}if(orderId){props.orderId=orderId;sendProps=true}if(!sendProps)return push(\"track\",track.event());return push(\"track\",track.event(),props)};PerfectAudience.prototype.viewedProduct=function(track){var product=track.id()||track.sku();push(\"track\",track.event());push(\"trackProduct\",product)};PerfectAudience.prototype.completedOrder=function(track){var total=track.total()||track.revenue();var orderId=track.orderId();var props={};if(total)props.revenue=total;if(orderId)props.orderId=orderId;push(\"track\",track.event(),props)}},{\"analytics.js-integration\":166,\"global-queue\":196}],140:[function(require,module,exports){var date=require(\"load-date\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_prum\");var Pingdom=module.exports=integration(\"Pingdom\").assumesPageview().global(\"_prum\").global(\"PRUM_EPISODES\").option(\"id\",\"\").tag('<script src=\"//rum-static.pingdom.net/prum.min.js\">');Pingdom.prototype.initialize=function(){window._prum=window._prum||[];push(\"id\",this.options.id);push(\"mark\",\"firstbyte\",date.getTime());this.load(this.ready)};Pingdom.prototype.loaded=function(){return!!(window._prum&&window._prum.push!==Array.prototype.push)}},{\"load-date\":194,\"analytics.js-integration\":166,\"global-queue\":196}],141:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var push=require(\"global-queue\")(\"_paq\");var Piwik=module.exports=integration(\"Piwik\").global(\"_paq\").option(\"url\",null).option(\"siteId\",\"\").option(\"customVariableLimit\",5).mapping(\"goals\").tag('<script src=\"{{ url }}/piwik.js\">');Piwik.prototype.initialize=function(){window._paq=window._paq||[];push(\"setSiteId\",this.options.siteId);push(\"setTrackerUrl\",this.options.url+\"/piwik.php\");push(\"enableLinkTracking\");this.load(this.ready)};Piwik.prototype.loaded=function(){return!!(window._paq&&window._paq.push!==Array.prototype.push)};Piwik.prototype.page=function(){push(\"trackPageView\")};Piwik.prototype.track=function(track){var goals=this.goals(track.event());var revenue=track.revenue();var category=track.category()||\"All\";var action=track.event();var name=track.proxy(\"properties.name\")||track.proxy(\"properties.label\");var value=track.value()||track.revenue();var options=track.options(\"Piwik\");var customVariables=options.customVars||options.cvar;if(!is.object(customVariables)){customVariables={}}for(var i=1;i<=this.options.customVariableLimit;i+=1){if(customVariables[i]){push(\"setCustomVariable\",i.toString(),customVariables[i][0],customVariables[i][1],\"page\")}}each(goals,function(goal){push(\"trackGoal\",goal,revenue)});push(\"trackEvent\",category,action,name,value)}},{each:4,\"analytics.js-integration\":166,is:18,\"global-queue\":196}],142:[function(require,module,exports){var convertDates=require(\"convert-dates\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_preactq\");var Preact=module.exports=integration(\"Preact\").assumesPageview().global(\"_preactq\").global(\"_lnq\").option(\"projectCode\",\"\").tag('<script src=\"//d2bbvl6dq48fa6.cloudfront.net/js/preact-4.1.min.js\">');Preact.prototype.initialize=function(){window._preactq=window._preactq||[];window._lnq=window._lnq||[];push(\"_setCode\",this.options.projectCode);this.load(this.ready)};Preact.prototype.loaded=function(){return!!(window._preactq&&window._preactq.push!==Array.prototype.push)};Preact.prototype.identify=function(identify){if(!identify.userId())return;var traits=identify.traits({created:\"created_at\"});traits=convertDates(traits,convertDate);push(\"_setPersonData\",{name:identify.name(),email:identify.email(),uid:identify.userId(),properties:traits})};Preact.prototype.group=function(group){if(!group.groupId())return;push(\"_setAccount\",group.traits())};Preact.prototype.track=function(track){var props=track.properties();var revenue=track.revenue();var event=track.event();var special={name:event};if(revenue){special.revenue=revenue*100;delete props.revenue}if(props.note){special.note=props.note;delete props.note}push(\"_logEvent\",special,props)};function convertDate(date){return Math.floor(date/1e3)}},{\"convert-dates\":200,\"analytics.js-integration\":166,\"global-queue\":196}],143:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_kiq\");var Facade=require(\"facade\");var Identify=Facade.Identify;var bind=require(\"bind\");var when=require(\"when\");var Qualaroo=module.exports=integration(\"Qualaroo\").assumesPageview().global(\"_kiq\").option(\"customerId\",\"\").option(\"siteToken\",\"\").option(\"track\",false).tag('<script src=\"//s3.amazonaws.com/ki.js/{{ customerId }}/{{ siteToken }}.js\">');Qualaroo.prototype.initialize=function(){window._kiq=window._kiq||[];var loaded=bind(this,this.loaded);var ready=this.ready;this.load(function(){when(loaded,ready)})};Qualaroo.prototype.loaded=function(){return!!(window._kiq&&window._kiq.push!==Array.prototype.push)};Qualaroo.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();var email=identify.email();if(email)id=email;if(id)push(\"identify\",id);if(traits)push(\"set\",traits)};Qualaroo.prototype.track=function(track){if(!this.options.track)return;var event=track.event();var traits={};traits[\"Triggered: \"+event]=true;this.identify(new Identify({traits:traits}))}},{\"analytics.js-integration\":166,\"global-queue\":196,facade:9,bind:55,when:198}],144:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_qevents\",{wrap:false});var reduce=require(\"reduce\");var useHttps=require(\"use-https\");var Quantcast=module.exports=integration(\"Quantcast\").assumesPageview().global(\"_qevents\").global(\"__qc\").option(\"pCode\",null).option(\"advertise\",false).tag(\"http\",'<script src=\"http://edge.quantserve.com/quant.js\">').tag(\"https\",'<script src=\"https://secure.quantserve.com/quant.js\">');Quantcast.prototype.initialize=function(page){window._qevents=window._qevents||[];var opts=this.options;var settings={qacct:opts.pCode};var user=this.analytics.user();if(user.id())settings.uid=user.id();if(page){settings.labels=this._labels(\"page\",page.category(),page.name())}push(settings);var name=useHttps()?\"https\":\"http\";this.load(name,this.ready)};Quantcast.prototype.loaded=function(){return!!window.__qc};Quantcast.prototype.page=function(page){var category=page.category();var name=page.name();var customLabels=page.proxy(\"properties.label\");var labels=this._labels(\"page\",category,name,customLabels);var settings={event:\"refresh\",labels:labels,qacct:this.options.pCode};var user=this.analytics.user();if(user.id())settings.uid=user.id();push(settings)};Quantcast.prototype.identify=function(identify){var id=identify.userId();if(id){window._qevents[0]=window._qevents[0]||{};window._qevents[0].uid=id}};Quantcast.prototype.track=function(track){var name=track.event();var revenue=track.revenue();var orderId=track.orderId();var customLabels=track.proxy(\"properties.label\");var labels=this._labels(\"event\",name,customLabels);var settings={event:\"click\",labels:labels,qacct:this.options.pCode};var user=this.analytics.user();if(revenue!=null)settings.revenue=String(revenue);if(orderId)settings.orderid=orderId;if(user.id())settings.uid=user.id();push(settings)};Quantcast.prototype.completedOrder=function(track){var name=track.event();var revenue=track.total();var customLabels=track.proxy(\"properties.label\");var labels=this._labels(\"event\",name,customLabels);var category=track.category();var repeat=track.proxy(\"properties.repeat\");if(this.options.advertise&&category){labels+=\",\"+this._labels(\"pcat\",category)}if(typeof repeat===\"boolean\"){labels+=\",_fp.customer.\"+(repeat?\"repeat\":\"new\")}var settings={event:\"refresh\",labels:labels,revenue:String(revenue),orderid:track.orderId(),qacct:this.options.pCode};push(settings)};Quantcast.prototype._labels=function(type){var args=Array.prototype.slice.call(arguments,1);var advertise=this.options.advertise;if(advertise&&type===\"page\")type=\"event\";if(advertise)type=\"_fp.\"+type;var separator=advertise?\" \":\".\";var ret=reduce(args,function(ret,arg){if(arg!=null){ret.push(String(arg).replace(/, /g,\",\"))}return ret},[]).join(separator);return[type,ret].join(\".\")}},{\"analytics.js-integration\":166,\"global-queue\":196,reduce:208,\"use-https\":168}],208:[function(require,module,exports){module.exports=function(arr,fn,initial){var idx=0;var len=arr.length;var curr=arguments.length==3?initial:arr[idx++];while(idx<len){curr=fn.call(null,curr,arr[idx],++idx,arr)}return curr}},{}],145:[function(require,module,exports){var extend=require(\"extend\");var integration=require(\"analytics.js-integration\");var is=require(\"is\");var RollbarIntegration=module.exports=integration(\"Rollbar\").global(\"Rollbar\").option(\"identify\",true).option(\"accessToken\",\"\").option(\"environment\",\"unknown\").option(\"captureUncaught\",true);RollbarIntegration.prototype.initialize=function(){var _rollbarConfig=this.config={accessToken:this.options.accessToken,captureUncaught:this.options.captureUncaught,payload:{environment:this.options.environment}};(function(a,b){function c(b){this.shimId=++h,this.notifier=null,this.parentShim=b,this.logger=function(){},a.console&&void 0===a.console.shimId&&(this.logger=a.console.log)}function d(b,c,d){a._rollbarWrappedError&&(d[4]||(d[4]=a._rollbarWrappedError),d[5]||(d[5]=a._rollbarWrappedError._rollbarContext),a._rollbarWrappedError=null),b.uncaughtError.apply(b,d),c&&c.apply(a,d)}function e(b){var d=c;return g(function(){if(this.notifier)return this.notifier[b].apply(this.notifier,arguments);var c=this,e=\"scope\"===b;e&&(c=new d(this));var f=Array.prototype.slice.call(arguments,0),g={shim:c,method:b,args:f,ts:new Date};return a._rollbarShimQueue.push(g),e?c:void 0})}function f(a,b){if(b.hasOwnProperty&&b.hasOwnProperty(\"addEventListener\")){var c=b.addEventListener;b.addEventListener=function(b,d,e){c.call(this,b,a.wrap(d),e)};var d=b.removeEventListener;b.removeEventListener=function(a,b,c){d.call(this,a,b&&b._wrapped?b._wrapped:b,c)}}}function g(a,b){return b=b||this.logger,function(){try{return a.apply(this,arguments)}catch(c){b(\"Rollbar internal error:\",c)}}}var h=0;c.init=function(a,b){var e=b.globalAlias||\"Rollbar\";if(\"object\"==typeof a[e])return a[e];a._rollbarShimQueue=[],a._rollbarWrappedError=null,b=b||{};var h=new c;return g(function(){if(h.configure(b),b.captureUncaught){var c=a.onerror;a.onerror=function(){var a=Array.prototype.slice.call(arguments,0);d(h,c,a)};var g,i,j=\"EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload\".split(\",\");for(g=0;g<j.length;++g)i=j[g],a[i]&&a[i].prototype&&f(h,a[i].prototype)}return a[e]=h,h},h.logger)()},c.prototype.loadFull=function(a,b,c,d,e){var f=g(function(){var a=b.createElement(\"script\"),e=b.getElementsByTagName(\"script\")[0];a.src=d.rollbarJsUrl,a.async=!c,a.onload=h,e.parentNode.insertBefore(a,e)},this.logger),h=g(function(){var b;if(void 0===a._rollbarPayloadQueue){var c,d,f,g;for(b=new Error(\"rollbar.js did not load\");c=a._rollbarShimQueue.shift();)for(f=c.args,g=0;g<f.length;++g)if(d=f[g],\"function\"==typeof d){d(b);break}}\"function\"==typeof e&&e(b)},this.logger);g(function(){c?f():a.addEventListener?a.addEventListener(\"load\",f,!1):a.attachEvent(\"onload\",f)},this.logger)()},c.prototype.wrap=function(b,c){try{var d;if(d=\"function\"==typeof c?c:function(){return c||{}},\"function\"!=typeof b)return b;if(b._isWrap)return b;if(!b._wrapped){b._wrapped=function(){try{return b.apply(this,arguments)}catch(c){throw c._rollbarContext=d(),c._rollbarContext._wrappedSource=b.toString(),a._rollbarWrappedError=c,c}},b._wrapped._isWrap=!0;for(var e in b)b.hasOwnProperty(e)&&(b._wrapped[e]=b[e])}return b._wrapped}catch(f){return b}};for(var i=\"log,debug,info,warn,warning,error,critical,global,configure,scope,uncaughtError\".split(\",\"),j=0;j<i.length;++j)c.prototype[i[j]]=e(i[j]);var k=\"//d37gvrvc0wt4s1.cloudfront.net/js/v1.1/rollbar.min.js\";_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||k;var l=c.init(a,_rollbarConfig)})(window,document);this.load(this.ready)};RollbarIntegration.prototype.loaded=function(){return is.object(window.Rollbar)&&window.Rollbar.shimId==null};RollbarIntegration.prototype.load=function(callback){window.Rollbar.loadFull(window,document,true,this.config,callback)};RollbarIntegration.prototype.identify=function(identify){if(!this.options.identify)return;var uid=identify.userId();if(uid===null||uid===undefined)return;var rollbar=window.Rollbar;var person={id:uid};extend(person,identify.traits());rollbar.configure({payload:{person:person}})}},{extend:68,\"analytics.js-integration\":166,is:18}],146:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var Route=module.exports=integration(\"Route\").global(\"_rq\").global(\"_route\").option(\"organizationId\",\"\").tag('<script id=\"rtracker\" data-organization-id=\"{{ organizationId }}\" src=\"//www.routecdn.com/tracker/route-tracker-min.js\">');Route.prototype.initialize=function(){window._rq=window._rq||[];window._route=window._route||[];window._route.methods=[\"identify\",\"track\",\"trackById\"];window._route.factory=function(method){return function(){var args=Array.prototype.slice.call(arguments);args.unshift(method);window._rq.push(args);return window._rq}};for(var i=0;i<window._route.methods.length;i++){var key=window._route.methods[i];window._route[key]=window._route.factory(key)}this.load(this.ready)};Route.prototype.loaded=function(){return window._rq&&window._rq.push!==Array.prototype.push};Route.prototype.identify=function(identify){window._route.identify(identify.traits())};Route.prototype.track=function(track){window._route.track(track.event())}},{\"analytics.js-integration\":166}],147:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var SaaSquatch=module.exports=integration(\"SaaSquatch\").option(\"tenantAlias\",\"\").option(\"referralImage\",\"\").global(\"_sqh\").tag('<script src=\"//d2rcp9ak152ke1.cloudfront.net/assets/javascripts/squatch.min.js\">');SaaSquatch.prototype.initialize=function(){window._sqh=window._sqh||[];this.load(this.ready)};SaaSquatch.prototype.loaded=function(){return window._sqh&&window._sqh.push!==Array.prototype.push};SaaSquatch.prototype.identify=function(identify){var sqh=window._sqh;var accountId=identify.proxy(\"traits.accountId\");var paymentProviderId=identify.proxy(\"traits.paymentProviderId\");var accountStatus=identify.proxy(\"traits.accountStatus\");var referralCode=identify.proxy(\"traits.referralCode\");var image=identify.proxy(\"traits.referralImage\")||this.options.referralImage;var opts=identify.options(this.name);var id=identify.userId();var email=identify.email();if(!(id||email))return;if(this.called)return;var init={tenant_alias:this.options.tenantAlias,first_name:identify.firstName(),last_name:identify.lastName(),user_image:identify.avatar(),email:email,user_id:id};if(accountId)init.account_id=accountId;if(paymentProviderId)init.payment_provider_id=paymentProviderId;if(init.payment_provider_id===\"null\")init.payment_provider_id=null;if(accountStatus)init.account_status=accountStatus;if(referralCode)init.referral_code=referralCode;if(opts.checksum)init.checksum=opts.checksum;if(image)init.fb_share_image=image;sqh.push([\"init\",init]);this.called=true;this.load()};SaaSquatch.prototype.group=function(group){var sqh=window._sqh;var id=group.groupId();var image=group.proxy(\"traits.referralImage\")||this.options.referralImage;var opts=group.options(this.name);if(this.called)return;var init={tenant_alias:this.options.tenantAlias,account_id:id};if(opts.checksum)init.checksum=opts.checksum;if(image)init.fb_share_image=image;sqh.push([\"init\",init]);this.called=true;this.load()}},{\"analytics.js-integration\":166}],148:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var when=require(\"when\");var SatisMeter=module.exports=integration(\"SatisMeter\").global(\"satismeter\").option(\"token\",\"\").tag('<script src=\"https://app.satismeter.com/satismeter.js\">');SatisMeter.prototype.initialize=function(){var self=this;this.load(function(){when(function(){return self.loaded()},self.ready)})};SatisMeter.prototype.loaded=function(){return!!window.satismeter};SatisMeter.prototype.identify=function(identify){var traits=identify.traits();traits.token=this.options.token;traits.user={id:identify.userId()};if(identify.name()){traits.user.name=identify.name()}if(identify.email()){traits.user.email=identify.email()}if(identify.created()){traits.user.signUpDate=identify.created().toISOString()}delete traits.id;delete traits.email;delete traits.name;delete traits.created;window.satismeter(traits)}},{\"analytics.js-integration\":166,when:198}],149:[function(require,module,exports){var ads=require(\"ad-params\");var clone=require(\"clone\");var cookie=require(\"cookie\");var extend=require(\"extend\");var integration=require(\"analytics.js-integration\");var json=require(\"segmentio/json@1.0.0\");var localstorage=require(\"store\");var protocol=require(\"protocol\");var send=require(\"send-json\");var topDomain=require(\"top-domain\");var utm=require(\"utm-params\");var uuid=require(\"uuid\");var cookieOptions={maxage:31536e6,secure:false,path:\"/\"};var Segment=exports=module.exports=integration(\"Segment.io\").option(\"apiKey\",\"\");exports.storage=function(){return protocol()===\"file:\"||protocol()===\"chrome-extension:\"?localstorage:cookie};exports.global=window;Segment.prototype.initialize=function(){var self=this;this.ready();this.analytics.on(\"invoke\",function(msg){var action=msg.action();var listener=\"on\"+msg.action();\nself.debug(\"%s %o\",action,msg);if(self[listener])self[listener](msg);self.ready()})};Segment.prototype.loaded=function(){return true};Segment.prototype.onpage=function(page){this.send(\"/p\",page.json())};Segment.prototype.onidentify=function(identify){this.send(\"/i\",identify.json())};Segment.prototype.ongroup=function(group){this.send(\"/g\",group.json())};Segment.prototype.ontrack=function(track){var json=track.json();delete json.traits;this.send(\"/t\",json)};Segment.prototype.onalias=function(alias){var json=alias.json();var user=this.analytics.user();json.previousId=json.previousId||json.from||user.id()||user.anonymousId();json.userId=json.userId||json.to;delete json.from;delete json.to;this.send(\"/a\",json)};Segment.prototype.normalize=function(msg){this.debug(\"normalize %o\",msg);var user=this.analytics.user();var global=exports.global;var query=global.location.search;var ctx=msg.context=msg.context||msg.options||{};delete msg.options;msg.writeKey=this.options.apiKey;ctx.userAgent=navigator.userAgent;if(!ctx.library)ctx.library={name:\"analytics.js\",version:this.analytics.VERSION};if(query)ctx.campaign=utm(query);this.referrerId(query,ctx);msg.userId=msg.userId||user.id();msg.anonymousId=user.anonymousId();msg.messageId=uuid();msg.sentAt=new Date;this.debug(\"normalized %o\",msg);return msg};Segment.prototype.send=function(path,msg,fn){var url=scheme()+\"//api.segment.io/v1\"+path;var headers={\"Content-Type\":\"text/plain\"};fn=fn||noop;var self=this;msg=this.normalize(msg);send(url,msg,headers,function(err,res){self.debug(\"sent %O, received %O\",msg,arguments);if(err)return fn(err);res.url=url;fn(null,res)})};Segment.prototype.cookie=function(name,val){var store=Segment.storage();if(arguments.length===1)return store(name);var global=exports.global;var href=global.location.href;var domain=\".\"+topDomain(href);if(domain===\".\")domain=\"\";this.debug(\"store domain %s -> %s\",href,domain);var opts=clone(cookieOptions);opts.domain=domain;this.debug(\"store %s, %s, %o\",name,val,opts);store(name,val,opts);if(store(name))return;delete opts.domain;this.debug(\"fallback store %s, %s, %o\",name,val,opts);store(name,val,opts)};Segment.prototype.referrerId=function(query,ctx){var stored=this.cookie(\"s:context.referrer\");var ad;if(stored)stored=json.parse(stored);if(query)ad=ads(query);ad=ad||stored;if(!ad)return;ctx.referrer=extend(ctx.referrer||{},ad);this.cookie(\"s:context.referrer\",json.stringify(ad))};function scheme(){return protocol()===\"http:\"?\"http:\":\"https:\"}function noop(){}},{\"ad-params\":209,clone:13,cookie:58,extend:68,\"analytics.js-integration\":166,\"segmentio/json@1.0.0\":59,store:210,protocol:211,\"send-json\":212,\"top-domain\":189,\"utm-params\":213,uuid:78}],209:[function(require,module,exports){var parse=require(\"querystring\").parse;module.exports=ads;var QUERYIDS={btid:\"dataxu\",urid:\"millennial-media\"};function ads(query){var params=parse(query);for(var key in params){for(var id in QUERYIDS){if(key===id){return{id:params[key],type:QUERYIDS[id]}}}}}},{querystring:27}],210:[function(require,module,exports){var unserialize=require(\"unserialize\");var each=require(\"each\");var storage;try{storage=window.localStorage}catch(e){storage=null}module.exports=store;function store(key,value){var length=arguments.length;if(0==length)return all();if(2<=length)return set(key,value);if(1!=length)return;if(null==key)return storage.clear();if(\"string\"==typeof key)return get(key);if(\"object\"==typeof key)return each(key,set)}store.supported=!!storage;function set(key,val){return null==val?storage.removeItem(key):storage.setItem(key,JSON.stringify(val))}function get(key){return unserialize(storage.getItem(key))}function all(){var len=storage.length;var ret={};var key;while(0<=--len){key=storage.key(len);ret[key]=get(key)}return ret}},{unserialize:214,each:177}],214:[function(require,module,exports){module.exports=function(val){try{return JSON.parse(val)}catch(e){return val||undefined}}},{}],211:[function(require,module,exports){var define=Object.defineProperty;var initialProtocol=window.location.protocol;var mockedProtocol;module.exports=function(protocol){if(arguments.length===0)return get();else return set(protocol)};module.exports.http=function(){set(\"http:\")};module.exports.https=function(){set(\"https:\")};module.exports.reset=function(){set(initialProtocol)};function get(){return mockedProtocol||window.location.protocol}function set(protocol){try{define(window.location,\"protocol\",{get:function(){return protocol}})}catch(err){mockedProtocol=protocol}}},{}],212:[function(require,module,exports){var encode=require(\"base64-encode\");var cors=require(\"has-cors\");var jsonp=require(\"jsonp\");var JSON=require(\"json\");exports=module.exports=cors?json:base64;exports.callback=\"callback\";exports.prefix=\"data\";exports.json=json;exports.base64=base64;exports.type=cors?\"xhr\":\"jsonp\";function json(url,obj,headers,fn){if(3==arguments.length)fn=headers,headers={};var req=new XMLHttpRequest;req.onerror=fn;req.onreadystatechange=done;req.open(\"POST\",url,true);for(var k in headers)req.setRequestHeader(k,headers[k]);req.send(JSON.stringify(obj));function done(){if(4==req.readyState)return fn(null,req)}}function base64(url,obj,_,fn){if(3==arguments.length)fn=_;var prefix=exports.prefix;obj=encode(JSON.stringify(obj));obj=encodeURIComponent(obj);url+=\"?\"+prefix+\"=\"+obj;jsonp(url,{param:exports.callback},function(err,obj){if(err)return fn(err);fn(null,{url:url,body:obj})})}},{\"base64-encode\":215,\"has-cors\":216,jsonp:217,json:59}],215:[function(require,module,exports){var utf8Encode=require(\"utf8-encode\");var keyStr=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";module.exports=encode;function encode(input){var output=\"\";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=utf8Encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4)}return output}},{\"utf8-encode\":218}],218:[function(require,module,exports){module.exports=encode;function encode(string){string=string.replace(/\\r\\n/g,\"\\n\");var utftext=\"\";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext}},{}],216:[function(require,module,exports){try{module.exports=typeof XMLHttpRequest!==\"undefined\"&&\"withCredentials\"in new XMLHttpRequest}catch(err){module.exports=false}},{}],217:[function(require,module,exports){var debug=require(\"debug\")(\"jsonp\");module.exports=jsonp;var count=0;function noop(){}function jsonp(url,opts,fn){if(\"function\"==typeof opts){fn=opts;opts={}}if(!opts)opts={};var prefix=opts.prefix||\"__jp\";var param=opts.param||\"callback\";var timeout=null!=opts.timeout?opts.timeout:6e4;var enc=encodeURIComponent;var target=document.getElementsByTagName(\"script\")[0]||document.head;var script;var timer;var id=prefix+count++;if(timeout){timer=setTimeout(function(){cleanup();if(fn)fn(new Error(\"Timeout\"))},timeout)}function cleanup(){script.parentNode.removeChild(script);window[id]=noop}window[id]=function(data){debug(\"jsonp got\",data);if(timer)clearTimeout(timer);cleanup();if(fn)fn(null,data)};url+=(~url.indexOf(\"?\")?\"&\":\"?\")+param+\"=\"+enc(id);url=url.replace(\"?&\",\"?\");debug('jsonp req \"%s\"',url);script=document.createElement(\"script\");script.src=url;target.parentNode.insertBefore(script,target)}},{debug:15}],213:[function(require,module,exports){var parse=require(\"querystring\").parse;module.exports=utm;function utm(query){if(\"?\"==query.charAt(0))query=query.substring(1);var query=query.replace(/\\?/g,\"&\");var params=parse(query);var param;var ret={};for(var key in params){if(~key.indexOf(\"utm_\")){param=key.substr(4);if(\"campaign\"==param)param=\"name\";ret[param]=params[key]}}return ret}},{querystring:27}],150:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var is=require(\"is\");var Sentry=module.exports=integration(\"Sentry\").global(\"Raven\").global(\"RavenConfig\").option(\"config\",\"\").tag('<script src=\"//cdn.ravenjs.com/1.1.16/native/raven.min.js\">');Sentry.prototype.initialize=function(){var dsn=this.options.config;window.RavenConfig={dsn:dsn};this.load(this.ready)};Sentry.prototype.loaded=function(){return is.object(window.Raven)};Sentry.prototype.identify=function(identify){window.Raven.setUser(identify.traits())}},{\"analytics.js-integration\":166,is:18}],151:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var is=require(\"is\");var tick=require(\"next-tick\");var SnapEngage=module.exports=integration(\"SnapEngage\").assumesPageview().global(\"SnapABug\").global(\"SnapEngage\").option(\"apiKey\",\"\").option(\"listen\",false).tag('<script src=\"//www.snapengage.com/cdn/js/{{ apiKey }}.js\">');var integrationContext={name:\"snapengage\",version:\"1.0.0\"};SnapEngage.prototype.initialize=function(){var self=this;this.load(function(){if(self.options.listen)self.attachListeners();tick(self.ready)})};SnapEngage.prototype.loaded=function(){return is.object(window.SnapABug)&&is.object(window.SnapEngage)};SnapEngage.prototype.identify=function(identify){var email=identify.email();if(!email)return;window.SnapABug.setUserEmail(email)};SnapEngage.prototype.attachListeners=function(){var self=this;window.SnapEngage.setCallback(\"StartChat\",function(){self.analytics.track(\"Live Chat Conversation Started\",{},{context:{integration:integrationContext}})});window.SnapEngage.setCallback(\"ChatMessageReceived\",function(agent){self.analytics.track(\"Live Chat Message Received\",{agentUsername:agent},{context:{integration:integrationContext}})});window.SnapEngage.setCallback(\"ChatMessageSent\",function(){self.analytics.track(\"Live Chat Message Sent\",{},{context:{integration:integrationContext}})});window.SnapEngage.setCallback(\"Close\",function(){self.analytics.track(\"Live Chat Conversation Ended\",{},{context:{integration:integrationContext}})})}},{\"analytics.js-integration\":166,is:18,\"next-tick\":57}],152:[function(require,module,exports){var bind=require(\"bind\");var integration=require(\"analytics.js-integration\");var when=require(\"when\");var Spinnakr=module.exports=integration(\"Spinnakr\").assumesPageview().global(\"_spinnakr_site_id\").global(\"_spinnakr\").option(\"siteId\",\"\").tag('<script src=\"//d3ojzyhbolvoi5.cloudfront.net/js/so.js\">');Spinnakr.prototype.initialize=function(){window._spinnakr_site_id=this.options.siteId;var loaded=bind(this,this.loaded);var ready=this.ready;this.load(function(){when(loaded,ready)})};Spinnakr.prototype.loaded=function(){return!!window._spinnakr}},{bind:55,\"analytics.js-integration\":166,when:198}],153:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var SupportHero=module.exports=integration(\"SupportHero\").assumesPageview().global(\"supportHeroWidget\").option(\"token\",\"\").option(\"track\",false).tag('<script src=\"https://d29l98y0pmei9d.cloudfront.net/js/widget.min.js?k={{ token }}\">');SupportHero.prototype.initialize=function(){window.supportHeroWidget={};window.supportHeroWidget.setUserId=window.supportHeroWidget.setUserId||function(){};window.supportHeroWidget.setUserTraits=window.supportHeroWidget.setUserTraits||function(){};this.load(this.ready)};SupportHero.prototype.loaded=function(){return!!window.supportHeroWidget};SupportHero.prototype.identify=function(identify){var id=identify.userId();var traits=identify.traits();if(id){window.supportHeroWidget.setUserId(id)}if(traits){window.supportHeroWidget.setUserTraits(traits)}}},{\"analytics.js-integration\":166}],154:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var is=require(\"is\");var keys=require(\"keys\");var push=require(\"global-queue\")(\"_tlq\");var Taplytics=module.exports=integration(\"Taplytics\").global(\"_tlq\").global(\"Taplytics\").option(\"token\",\"\").option(\"options\",{}).tag('<script id=\"taplytics\" src=\"//cdn.taplytics.com/taplytics.min.js\">').assumesPageview();Taplytics.prototype.initialize=function(){var options=this.options.options;var token=this.options.token;window._tlq=window._tlq||[];push(\"init\",token,options);this.load(this.ready)};Taplytics.prototype.loaded=function(){return window.Taplytics&&is.object(window.Taplytics._in)};Taplytics.prototype.identify=function(identify){var userId=identify.userId();var attrs=identify.traits()||{};if(userId)attrs.id=userId;if(keys(attrs).length){push(\"identify\",attrs)}};Taplytics.prototype.group=function(group){var attrs={};var groupId=group.groupId();var traits=group.traits();var user=this.analytics.user();var userId=user.id();if(groupId)attrs.groupId=groupId;if(traits)attrs.groupTraits=traits;if(userId)attrs.id=userId;if(keys(attrs).length)push(\"identify\",attrs)};Taplytics.prototype.track=function(track){var properties=track.properties()||{};var total=track.revenue()||track.total()||0;push(\"track\",track.event(),total,properties)};Taplytics.prototype.page=function(page){var category=page.category()||undefined;var name=page.fullName()||undefined;var properties=page.properties()||{};push(\"page\",category,name,properties)};Taplytics.prototype.reset=function(){push(\"reset\")}},{\"analytics.js-integration\":166,is:18,keys:73,\"global-queue\":196}],155:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_tsq\");var slug=require(\"slug\");var Tapstream=module.exports=integration(\"Tapstream\").assumesPageview().global(\"_tsq\").option(\"accountName\",\"\").option(\"trackAllPages\",true).option(\"trackNamedPages\",true).option(\"trackCategorizedPages\",true).tag('<script src=\"//cdn.tapstream.com/static/js/tapstream.js\">');Tapstream.prototype.initialize=function(){window._tsq=window._tsq||[];push(\"setAccountName\",this.options.accountName);this.load(this.ready)};Tapstream.prototype.loaded=function(){return!!(window._tsq&&window._tsq.push!==Array.prototype.push)};Tapstream.prototype.page=function(page){var category=page.category();var opts=this.options;var name=page.fullName();if(opts.trackAllPages){this.track(page.track())}if(name&&opts.trackNamedPages){this.track(page.track(name))}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}};Tapstream.prototype.track=function(track){var props=track.properties();push(\"fireHit\",slug(track.event()),[props.url])}},{\"analytics.js-integration\":166,\"global-queue\":196,slug:172}],156:[function(require,module,exports){var alias=require(\"alias\");var integration=require(\"analytics.js-integration\");var Trakio=module.exports=integration(\"trak.io\").assumesPageview().global(\"trak\").option(\"token\",\"\").option(\"trackNamedPages\",true).option(\"trackCategorizedPages\",true).tag('<script src=\"//d29p64779x43zo.cloudfront.net/v1/trak.io.min.js\">');var optionsAliases={initialPageview:\"auto_track_page_view\"};Trakio.prototype.initialize=function(){var options=this.options;window.trak=window.trak||[];window.trak.io=window.trak.io||{};window.trak.push=window.trak.push||function(){};window.trak.io.load=window.trak.io.load||function(e){var r=function(e){return function(){window.trak.push([e].concat(Array.prototype.slice.call(arguments,0)))}},i=[\"initialize\",\"identify\",\"track\",\"alias\",\"channel\",\"source\",\"host\",\"protocol\",\"page_view\"];for(var s=0;s<i.length;s++)window.trak.io[i[s]]=r(i[s]);window.trak.io.initialize.apply(window.trak.io,arguments)};window.trak.io.load(options.token,alias(options,optionsAliases));this.load(this.ready)};Trakio.prototype.loaded=function(){return!!(window.trak&&window.trak.loaded)};Trakio.prototype.page=function(page){var category=page.category();var props=page.properties();var name=page.fullName();window.trak.io.page_view(props.path,name||props.title);if(category)window.trak.io.channel(\"category\");if(name&&this.options.trackNamedPages){this.track(page.track(name))}if(category&&this.options.trackCategorizedPages){this.track(page.track(category))}};var traitAliases={avatar:\"avatar_url\",firstName:\"first_name\",lastName:\"last_name\"};Trakio.prototype.identify=function(identify){var traits=identify.traits(traitAliases);var id=identify.userId();if(id){window.trak.io.identify(id,traits)}else{window.trak.io.identify(traits)}};Trakio.prototype.track=function(track){var properties=track.properties();var channel=track.proxy(\"properties.channel\");if(channel){delete properties.channel;window.trak.io.track(track.event(),channel,properties)}else{window.trak.io.track(track.event(),properties)}};Trakio.prototype.alias=function(alias){if(!window.trak.io.distinct_id)return;var from=alias.from();var to=alias.to();if(to===window.trak.io.distinct_id())return;if(from){window.trak.io.alias(from,to)}else{window.trak.io.alias(to)}}},{alias:199,\"analytics.js-integration\":166}],157:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var TwitterAds=module.exports=integration(\"Twitter Ads\").option(\"page\",\"\").tag('<img src=\"//analytics.twitter.com/i/adsct?txn_id={{ pixelId }}&p_id=Twitter\"/>').mapping(\"events\");TwitterAds.prototype.initialize=function(){this.ready()};TwitterAds.prototype.page=function(){if(this.options.page){this.load({pixelId:this.options.page})}};TwitterAds.prototype.track=function(track){var events=this.events(track.event());var self=this;each(events,function(pixelId){self.load({pixelId:pixelId})})}},{each:4,\"analytics.js-integration\":166}],158:[function(require,module,exports){var Identify=require(\"facade\").Identify;var clone=require(\"clone\");var integration=require(\"analytics.js-integration\");var Userlike=module.exports=integration(\"Userlike\").assumesPageview().global(\"segment_base_info\").global(\"userlikeConfig\").global(\"userlikeData\").option(\"secretKey\",\"\").option(\"listen\",false).tag('<script src=\"//userlike-cdn-widgets.s3-eu-west-1.amazonaws.com/{{ secretKey }}.js\">');var integrationContext={name:\"userlike\",version:\"1.0.0\"};Userlike.prototype.initialize=function(){var self=this;var user=this.analytics.user();var identify=new Identify({userId:user.id(),traits:user.traits()});segment_base_info=clone(this.options);segment_base_info.visitor={name:identify.name(),email:identify.email()};if(!window.userlikeData)window.userlikeData={custom:{}};window.userlikeData.custom.segmentio=segment_base_info;this.load(function(){if(self.options.listen)self.attachListeners();self.ready()})};Userlike.prototype.loaded=function(){return!!(window.userlikeConfig&&window.userlikeData)};Userlike.prototype.attachListeners=function(){var self=this;window.userlikeTrackingEvent=function(eventName,globalCtx,sessionCtx){if(eventName===\"chat_started\"){self.analytics.track(\"Live Chat Conversation Started\",{agentId:sessionCtx.operator_id,agentName:sessionCtx.operator_name},{context:{integration:integrationContext}})}if(eventName===\"message_operator_terminating\"){self.analytics.track(\"Live Chat Message Sent\",{agentId:sessionCtx.operator_id,agentName:sessionCtx.operator_name},{context:{integration:integrationContext}})}if(eventName===\"message_client_terminating\"){self.analytics.track(\"Live Chat Message Received\",{agentId:sessionCtx.operator_id,agentName:sessionCtx.operator_name},{context:{integration:integrationContext}})}if(eventName===\"chat_quit\"){self.analytics.track(\"Live Chat Conversation Ended\",{agentId:sessionCtx.operator_id,agentName:sessionCtx.operator_name},{context:{integration:integrationContext}})}}}},{facade:9,clone:13,\"analytics.js-integration\":166}],159:[function(require,module,exports){var alias=require(\"alias\");var convertDates=require(\"convert-dates\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"UserVoice\");var unix=require(\"to-unix-timestamp\");var UserVoice=module.exports=integration(\"UserVoice\").assumesPageview().global(\"UserVoice\").global(\"showClassicWidget\").option(\"apiKey\",\"\").option(\"classic\",false).option(\"forumId\",null).option(\"showWidget\",true).option(\"mode\",\"contact\").option(\"accentColor\",\"#448dd6\").option(\"screenshotEnabled\",true).option(\"smartvote\",true).option(\"trigger\",null).option(\"triggerPosition\",\"bottom-right\").option(\"triggerColor\",\"#ffffff\").option(\"triggerBackgroundColor\",\"rgba(46, 49, 51, 0.6)\").option(\"classicMode\",\"full\").option(\"primaryColor\",\"#cc6d00\").option(\"linkColor\",\"#007dbf\").option(\"defaultMode\",\"support\").option(\"tabLabel\",\"Feedback & Support\").option(\"tabColor\",\"#cc6d00\").option(\"tabPosition\",\"middle-right\").option(\"tabInverted\",false).option(\"customTicketFields\",{}).tag('<script src=\"//widget.uservoice.com/{{ apiKey }}.js\">');UserVoice.on(\"construct\",function(integration){if(!integration.options.classic)return;integration.group=undefined;integration.identify=integration.identifyClassic;integration.initialize=integration.initializeClassic});UserVoice.prototype.initialize=function(){var options=this.options;var opts=formatOptions(options);push(\"set\",opts);push(\"autoprompt\",{});if(options.showWidget){if(options.trigger){push(\"addTrigger\",options.trigger,opts)}else{push(\"addTrigger\",opts)}}this.load(this.ready)};UserVoice.prototype.loaded=function(){return!!(window.UserVoice&&window.UserVoice.push!==Array.prototype.push)};UserVoice.prototype.identify=function(identify){var traits=identify.traits({created:\"created_at\"});traits=convertDates(traits,unix);push(\"identify\",traits)};UserVoice.prototype.group=function(group){var traits=group.traits({created:\"created_at\"});traits=convertDates(traits,unix);push(\"identify\",{account:traits})};UserVoice.prototype.initializeClassic=function(){var options=this.options;window.showClassicWidget=showClassicWidget;if(options.showWidget)showClassicWidget(\"showTab\",formatClassicOptions(options));this.load(this.ready)};UserVoice.prototype.identifyClassic=function(identify){push(\"setCustomFields\",identify.traits())};function formatOptions(options){return alias(options,{forumId:\"forum_id\",accentColor:\"accent_color\",smartvote:\"smartvote_enabled\",triggerColor:\"trigger_color\",triggerBackgroundColor:\"trigger_background_color\",triggerPosition:\"trigger_position\",screenshotEnabled:\"screenshot_enabled\",customTicketFields:\"ticket_custom_fields\"})}function formatClassicOptions(options){return alias(options,{forumId:\"forum_id\",classicMode:\"mode\",primaryColor:\"primary_color\",tabPosition:\"tab_position\",tabColor:\"tab_color\",linkColor:\"link_color\",defaultMode:\"default_mode\",tabLabel:\"tab_label\",tabInverted:\"tab_inverted\"})}function showClassicWidget(type,options){type=type||\"showLightbox\";push(type,\"classic_widget\",options)}},{alias:199,\"convert-dates\":200,\"analytics.js-integration\":166,\"global-queue\":196,\"to-unix-timestamp\":219}],219:[function(require,module,exports){module.exports=toUnixTimestamp;function toUnixTimestamp(date){return Math.floor(date.getTime()/1e3)}},{}],160:[function(require,module,exports){var cookie=require(\"component/cookie\");var integration=require(\"analytics.js-integration\");var push=require(\"global-queue\")(\"_veroq\");var Vero=module.exports=integration(\"Vero\").global(\"_veroq\").option(\"apiKey\",\"\").tag('<script src=\"//d3qxef4rp70elm.cloudfront.net/m.js\">');Vero.prototype.initialize=function(){if(!cookie(\"__veroc4\"))cookie(\"__veroc4\",\"[]\");push(\"init\",{api_key:this.options.apiKey});this.load(this.ready)};Vero.prototype.loaded=function(){return!!(window._veroq&&window._veroq.push!==Array.prototype.push)};Vero.prototype.page=function(){push(\"trackPageview\")};Vero.prototype.identify=function(identify){var traits=identify.traits();var email=identify.email();var id=identify.userId();if(!id||!email)return;push(\"user\",traits)};Vero.prototype.track=function(track){var regex=/[uU]nsubscribe/;if(track.event().match(regex)){push(\"unsubscribe\",{id:track.properties().id})}else{push(\"track\",track.event(),track.properties())}};Vero.prototype.alias=function(alias){var to=alias.to();if(alias.from()){push(\"reidentify\",to,alias.from())}else{push(\"reidentify\",to)}}},{\"component/cookie\":58,\"analytics.js-integration\":166,\"global-queue\":196}],161:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var tick=require(\"next-tick\");var VWO=module.exports=integration(\"Visual Website Optimizer\").global(\"_vis_opt_queue\").global(\"_vis_opt_revenue_conversion\").global(\"_vwo_exp\").global(\"_vwo_exp_ids\").option(\"replay\",true).option(\"listen\",false);var integrationContext={name:\"visual-website-optimizer\",version:\"1.0.0\"};VWO.prototype.initialize=function(){var self=this;if(this.options.replay){tick(function(){self.replay()})}if(this.options.listen){tick(function(){self.roots()})}this.ready()};VWO.prototype.completedOrder=function(track){var total=track.total()||track.revenue()||0;enqueue(function(){window._vis_opt_revenue_conversion(total)})};VWO.prototype.replay=function(){var analytics=this.analytics;experiments(function(err,traits){if(traits)analytics.identify(traits)})};VWO.prototype.roots=function(){var analytics=this.analytics;rootExperiments(function(err,data){each(data,function(experimentId,variationName){analytics.track(\"Experiment Viewed\",{experimentId:experimentId,variationName:variationName},{context:{integration:integrationContext}})})})};function rootExperiments(fn){enqueue(function(){var data={};var experimentIds=window._vwo_exp_ids;if(!experimentIds)return fn();each(experimentIds,function(experimentId){var variationName=variation(experimentId);if(variationName)data[experimentId]=variationName});fn(null,data)})}function experiments(fn){enqueue(function(){var data={};var ids=window._vwo_exp_ids;if(!ids)return fn();each(ids,function(id){var name=variation(id);if(name)data[\"Experiment: \"+id]=name});fn(null,data)})}function enqueue(fn){window._vis_opt_queue=window._vis_opt_queue||[];window._vis_opt_queue.push(fn)}function variation(id){var experiments=window._vwo_exp;if(!experiments)return null;var experiment=experiments[id];var variationId=experiment.combination_chosen;return variationId?experiment.comb_n[variationId]:null}},{each:4,\"analytics.js-integration\":166,\"next-tick\":57}],162:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var useHttps=require(\"use-https\");var WebEngage=module.exports=integration(\"WebEngage\").assumesPageview().global(\"_weq\").global(\"webengage\").option(\"widgetVersion\",\"4.0\").option(\"licenseCode\",\"\").tag(\"http\",'<script src=\"http://cdn.widgets.webengage.com/js/widget/webengage-min-v-4.0.js\">').tag(\"https\",'<script src=\"https://ssl.widgets.webengage.com/js/widget/webengage-min-v-4.0.js\">');WebEngage.prototype.initialize=function(){var _weq=window._weq=window._weq||{};_weq[\"webengage.licenseCode\"]=this.options.licenseCode;_weq[\"webengage.widgetVersion\"]=this.options.widgetVersion;var name=useHttps()?\"https\":\"http\";this.load(name,this.ready)};WebEngage.prototype.loaded=function(){return!!window.webengage}},{\"analytics.js-integration\":166,\"use-https\":168}],163:[function(require,module,exports){var each=require(\"each\");var integration=require(\"analytics.js-integration\");var toSnakeCase=require(\"to-snake-case\");var Woopra=module.exports=integration(\"Woopra\").global(\"woopra\").option(\"domain\",\"\").option(\"cookieName\",\"wooTracker\").option(\"cookieDomain\",null).option(\"cookiePath\",\"/\").option(\"ping\",true).option(\"pingInterval\",12e3).option(\"idleTimeout\",3e5).option(\"downloadTracking\",true).option(\"outgoingTracking\",true).option(\"outgoingIgnoreSubdomain\",true).option(\"downloadPause\",200).option(\"outgoingPause\",400).option(\"ignoreQueryUrl\",true).option(\"hideCampaign\",false).tag('<script src=\"//static.woopra.com/js/w.js\">');Woopra.prototype.initialize=function(){(function(){var i,s,z,w=window,d=document,a=arguments,q=\"script\",f=[\"config\",\"track\",\"identify\",\"visit\",\"push\",\"call\"],c=function(){var i,self=this;self._e=[];for(i=0;i<f.length;i++){(function(f){self[f]=function(){self._e.push([f].concat(Array.prototype.slice.call(arguments,0)));return self}})(f[i])}};w._w=w._w||{};for(i=0;i<a.length;i++){w._w[a[i]]=w[a[i]]=w[a[i]]||new c}})(\"woopra\");this.load(this.ready);each(this.options,function(key,value){key=toSnakeCase(key);if(value==null)return;if(value===\"\")return;window.woopra.config(key,value)})};Woopra.prototype.loaded=function(){return!!(window.woopra&&window.woopra.loaded)};Woopra.prototype.page=function(page){var props=page.properties();var name=page.fullName();if(name)props.title=name;window.woopra.track(\"pv\",props)};Woopra.prototype.identify=function(identify){var traits=identify.traits();if(identify.name())traits.name=identify.name();window.woopra.identify(traits).push()};Woopra.prototype.track=function(track){window.woopra.track(track.event(),track.properties())}},{each:4,\"analytics.js-integration\":166,\"to-snake-case\":167}],164:[function(require,module,exports){var integration=require(\"analytics.js-integration\");var omit=require(\"omit\");var Wootric=module.exports=integration(\"Wootric\").assumesPageview().option(\"accountToken\",\"\").global(\"wootricSettings\").global(\"wootric_survey_immediately\").global(\"wootric\").tag(\"library\",'<script src=\"//d27j601g4x0gd5.cloudfront.net/segmentioSnippet.js\"></script>').tag(\"pixel\",'<img src=\"//d8myem934l1zi.cloudfront.net/pixel.gif?account_token={{ accountToken }}&email={{ email }}&created_at={{ createdAt }}&url={{ url }}&random={{ cacheBuster }}\">');Wootric.prototype.initialize=function(){this.lastPageTracked=null;window.wootricSettings=window.wootricSettings||{};window.wootricSettings.account_token=this.options.accountToken;var self=this;this.load(\"library\",function(){self.ready()})};Wootric.prototype.loaded=function(){return!!window.wootric};Wootric.prototype.identify=function(identify){var traits=identify.traits();var email=identify.email();var createdAt=identify.created();var language=traits.language;if(createdAt&&createdAt.getTime)window.wootricSettings.created_at=createdAt.getTime();if(language)window.wootricSettings.language=language;window.wootricSettings.email=email;window.wootricSettings.properties=omit([\"created\",\"createdAt\",\"email\"],traits);window.wootric(\"run\")};Wootric.prototype.page=function(page){if(this.lastPageTracked===window.location){return}this.lastPageTracked=window.location;var wootricSettings=window.wootricSettings;this.load(\"pixel\",{accountToken:this.options.accountToken,email:encodeURIComponent(wootricSettings.email),createdAt:wootricSettings.created_at,url:encodeURIComponent(page.url()),cacheBuster:Math.random()})}},{\"analytics.js-integration\":166,omit:205}],165:[function(require,module,exports){var bind=require(\"bind\");var integration=require(\"analytics.js-integration\");var tick=require(\"next-tick\");var when=require(\"when\");var Yandex=module.exports=integration(\"Yandex Metrica\").assumesPageview().global(\"yandex_metrika_callbacks\").global(\"Ya\").option(\"counterId\",null).option(\"clickmap\",false).option(\"webvisor\",false).tag('<script src=\"//mc.yandex.ru/metrika/watch.js\">');Yandex.prototype.initialize=function(){var id=this.options.counterId;var clickmap=this.options.clickmap;var webvisor=this.options.webvisor;push(function(){window[\"yaCounter\"+id]=new window.Ya.Metrika({id:id,clickmap:clickmap,webvisor:webvisor})});var loaded=bind(this,this.loaded);var ready=this.ready;this.load(function(){when(loaded,function(){tick(ready)})})};Yandex.prototype.loaded=function(){return!!(window.Ya&&window.Ya.Metrika)};function push(callback){window.yandex_metrika_callbacks=window.yandex_metrika_callbacks||[];window.yandex_metrika_callbacks.push(callback)}},{bind:55,\"analytics.js-integration\":166,\"next-tick\":57,when:198}],5:[function(require,module,exports){module.exports={name:\"analytics\",version:\"2.11.0\",main:\"analytics.js\",dependencies:{},devDependencies:{}}},{}]},{},{1:\"\"}));"
        },
        {
          "name": "bower.json",
          "type": "blob",
          "size": 0.119140625,
          "content": "{\n  \"name\": \"analytics\",\n  \"version\": \"2.11.0\",\n  \"main\": \"analytics.js\",\n  \"dependencies\": {},\n  \"devDependencies\": {}\n}\n"
        },
        {
          "name": "component.json",
          "type": "blob",
          "size": 6.4931640625,
          "content": "{\n  \"name\": \"analytics\",\n  \"main\": \"lib/index.js\",\n  \"repo\": \"segmentio/analytics.js\",\n  \"description\": \"The hassle-free way to integrate analytics into any web application.\",\n  \"version\": \"2.11.0\",\n  \"keywords\": [\n    \"analytics\",\n    \"analytics.js\",\n    \"segment\",\n    \"segment.io\"\n  ],\n  \"dependencies\": {\n    \"component/each\": \"0.0.1\",\n    \"segmentio/analytics.js-core\": \"^2.10.0\",\n    \"segment-integrations/analytics.js-integration-adroll\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-adwords\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-alexa\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-amplitude\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-appcues\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-atatus\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-autosend\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-awesm\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-bing-ads\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-blueshift\": \"1.0.1\",\n    \"segment-integrations/analytics.js-integration-bronto\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-bugherd\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-bugsnag\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-chameleon\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-chartbeat\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-clicktale\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-clicky\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-comscore\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-crazy-egg\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-curebit\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-customerio\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-drip\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-elevio\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-errorception\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-evergage\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-extole\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-facebook-conversion-tracking\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-facebook-custom-audiences\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-foxmetrics\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-frontleaf\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-fullstory\": \"1.0.1\",\n    \"segment-integrations/analytics.js-integration-gauges\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-get-satisfaction\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-google-analytics\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-google-tag-manager\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-gosquared\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-heap\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-hellobar\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-hittail\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-hubspot\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-improvely\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-insidevault\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-inspectlet\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-intercom\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-keen-io\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-kenshoo\": \"1.0.1\",\n    \"segment-integrations/analytics.js-integration-kissmetrics\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-klaviyo\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-livechat\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-lucky-orange\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-lytics\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-mixpanel\": \"1.0.1\",\n    \"segment-integrations/analytics.js-integration-mojn\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-mouseflow\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-mousestats\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-navilytics\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-nudgespot\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-olark\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-optimizely\": \"1.0.1\",\n    \"segment-integrations/analytics.js-integration-outbound\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-perfect-audience\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-pingdom\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-piwik\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-preact\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-qualaroo\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-quantcast\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-rollbar\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-route\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-saasquatch\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-satismeter\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-segmentio\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-sentry\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-snapengage\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-spinnakr\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-supporthero\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-taplytics\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-tapstream\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-trakio\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-twitter-ads\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-userlike\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-uservoice\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-vero\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-visual-website-optimizer\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-webengage\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-woopra\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-wootric\": \"1.0.0\",\n    \"segment-integrations/analytics.js-integration-yandex-metrica\": \"1.0.0\"\n  }\n}\n"
        },
        {
          "name": "lib",
          "type": "tree",
          "content": null
        },
        {
          "name": "package.json",
          "type": "blob",
          "size": 0.7109375,
          "content": "{\n  \"name\": \"analytics.js\",\n  \"author\": \"Segment.io <friends@segment.io>\",\n  \"version\": \"2.11.0\",\n  \"license\": \"MIT\",\n  \"description\": \"The hassle-free way to integrate analytics into any web application.\",\n  \"keywords\": [\n    \"analytics\",\n    \"analytics.js\",\n    \"segment\",\n    \"segment.io\"\n  ],\n  \"repository\": {\n    \"url\": \"https://github.com/segmentio/analytics.js.git\",\n    \"type\": \"git\"\n  },\n  \"engines\": {\n    \"node\": \">=0.12.0\"\n  },\n  \"main\": \"analytics.js\",\n  \"scripts\": {\n    \"test\": \"make test\"\n  },\n  \"dependencies\": {},\n  \"devDependencies\": {\n    \"duo\": \"^0.12.0\",\n    \"standard\": \"^8.6.0\",\n    \"uglify-js\": \">= 1.3.4\"\n  },\n  \"standard\": {\n    \"ignore\": [\n      \"analytics.js\",\n      \"analytics.min.js\"\n    ]\n  }\n}\n"
        }
      ]
    }
  ]
}