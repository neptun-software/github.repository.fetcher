{
  "metadata": {
    "timestamp": 1736561522520,
    "page": 49,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjUw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "notion-enhancer/notion-enhancer",
      "stars": 4848,
      "defaultBranch": "dev",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.064453125,
          "content": "# builds\ndist/\n\n# dependencies\nnode_modules/\n\n# yarn\n.yarn/\n.pnp.*"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 22.6259765625,
          "content": "# changelog\n\n### v0.11.0 (dev)\n\na complete redesign & rewrite of the enhancer, with new features and a port to the browser as a chrome extension.\n\n#### new\n\n- cross-environment and properly documented api to replace helpers.\n- cross-environment mod loader structure.\n- \"integrations\", a category of mods that can access/use an unofficial notion api.\n- notifications sourced from an online endpoint for sending global user alerts.\n- simplify user installations by depending on the chrome web store and [notion-repackaged](https://github.com/notion-enhancer/notion-repackaged).\n- separate menu profiles for mod configurations.\n- a hotkey option type that allows typing in/pressing a hotkey to enter it, instead of typing.\n- a rainbow indentation lines style.\n- border & background style options for the code line numbers extension.\n- an icon sets option to encode images to data urls to prevent quality reduction.\n- customisation of integrated titlebar & always on top window buttons.\n- an open on startup option under the tray mod.\n- optional icon or title-only tab labels.\n- choice of tab layout styles: traditional tabbed, traditional, bubble and compact.\n- a hotkey for reopening closed tabs.\n- an option to remember last open tabs for a continue-where-you-left-off experience\n  (recently active tabs are reopened after an app relaunch).\n\n#### improved\n\n- split the core mod into separate mods for specific features.\n- theming variables that are applied more specifically, less laggy, and less complicated.\n- merged bracketed-links into tweaks.\n- a redesigned menu with nicer ui, separate categories for mods and a sidebar for configuration.\n- simplified and smoothened the side panel + moved it to the core so any mod can hook into it.\n- font chooser option for heading fonts.\n- renamed \"property-layout\" to \"collapsible properties\", added per-page memory of collapse state.\n- chevron icon instead of arrow for scroll to top.\n- moved word counter to display in the side panel instead of within the page,\n  implemented a more accurate word counter method.\n- the topbar icons extension defaults to the notion default topbar icons for comment/updates/favorite/more,\n  but can revert them to text (it still adds a custom icon for the share button).\n- relative indenting in outliner.\n- rtl support for toggles, indentation lines, table of contents and databases + force inline math to ltr.\n- replaced the \"truncated table titles\" extension with a \"truncated titles\" extension\n  with an option to truncate timeline item titles.\n- renamed \"notion icons\" to \"icon sets\" with new support for uploading/reusing custom icons\n  directly within the icon picker.\n- moved the tray to its own configurable and enable/disable-able mod, with window management enhancements\n  that follow more sensible defaults and work more reliably.\n- tabs will auto shrink/expand to take up available space instead of wrapping to a second line.\n- a visually revamped cli to more clearly and aesthetically communicate status and usage.\n- cli can now detect and apply to user-only installations on macOS.\n- a shortcut built into the cli to fix the \"you do not have permission to open this app\" error on macos.\n\n#### removed\n\n- integrated scrollbar tweak (notion now includes by default).\n- js insert. css insert moved to tweaks mod.\n- majority of layout and font size variables - better to leave former to notion and use `ctrl +`/`ctrl -` for latter.\n- the \"panel sites\" extension, due to it's limited/buggy functionality and incompatibility with reimplementation.\n\n#### fixed\n\n- bypass csp restrictions.\n- many. like many many. all the bugfixes. (mostly a side effect of completely rewriting everything,\n  but reported extension-specific bugs were all intentionally fixed.)\n\n#### themes\n\n- \"nord\" = an arctic, north-bluish color palette.\n- \"gruvbox light\" = a sepia, 'retro groove' palette based on the vim theme of the same name.\n- \"gruvbox dark\" = a gray, 'retro groove' palette based on the vim theme of the same name.\n- \"light+\" = a simple white theme that brightens coloured text and blocks,\n  with configurable accents (formerly littlepig light).\n- \"playful purple\" = a purple-shaded theme with bright highlights (formerly littlepig dark and gameish).\n- \"pinky boom\" = pinkify your life.\n\n#### extensions\n\n- \"calendar scroll\" = add a button to jump down to the current week in fullpage/infinite-scroll calendars.\n- \"global block links\" = easily copy the global link of a page or block.\n- \"collapsible headers\" = adds toggles to collapse header sections of pages.\n- \"simpler databases\" = adds a menu to inline databases to toggle ui elements.\n- \"view scale\" = zoom in/out of the notion window with the mousewheel or a visual slider (`ctrl/cmd +/-` are available in-app by default).\n\n#### tweaks\n\n- wrap tables to page width. - hide \"Type '/' for commands\".\n- quote block quotation marks.\n- responsive columns breakpoint (%).\n- accented links.\n- full width pages.\n- image alignment (center/left/right).\n\n#### integrations\n\n- \"quick note\" = adds a hotkey & a button in the bottom right corner to jump to a new page in a notes database (target database id must be set).\n\n**below this point the enhancer was desktop-only. in v0.11.0 it was been ported to also**\n**run as a chrome extension. changes made to both are indicated above.**\n\n### v0.10.2 (2020-12-05)\n\nagain, an emergency release for bugfixes.\nnot properly documented and new features have not yet been fully reviewed/edited.\n\n- new: side panel - adds an extra sidebar on the right for use by other mods,\n  toggleable with `ctrl+shift+backslash`.\n- improved: notion icons uses spritesheets for faster loading of icons.\n- improved: icon sets can be hidden/toggled.\n- improved: toggles in the enhancer menu follow the same style as notion's toggles.\n- improved: separate quote font variable & option in the font chooser mod (`--theme_[dark|light]--font_quote`).\n- improved: option to hide the \"page details\" text for the word counter extension.\n- bugfix: notion icons tab is now visible in fullpage databases.\n- bugfix: code line numbers handles wrapped code blocks.\n- bugfix: file explorer no longer opens when enhancer menu is opened.\n- bugfix: enable the remote module in webviews (windows/tabs) for compatibility with the\n  updated version of electron used by new notion builds (>= 2.0.10).\n- bugfix: add support for enhancing an `app` folder if there is no `app.asar` file present.\n- extension: \"outliner\" = table of contents in right sidebar.\n- extension: \"panel sites\" = embed sites on the site panel.\n- extension: \"indentation lines\" = adds vertical relationship lines to make list trees easier to follow.\n- extension: \"truncated table titles\" = see the full text of the truncated table titles on hover over.\n\n> 📥 `npm i -g notion-enhancer@0.10.2`\n\n### v0.10.1 (2020-11-18)\n\nessentially a prerelease for v0.11.0: pushed out for urgent bugfixes during\nexam/study weeks when there's no time to code a full release.\n\nnote that this means new features have not yet been fully documented and\nmay not be fully ready for ideal use yet. however, things overall will\nwork more reliably than v0.10.0.\n\n- new: different css entrypoints for different components (tabs, menu, app).\n- improved: use an svg for the scroll-to-top button.\n- improved: use a better-matching icon and add transitions to the property layout toggle.\n- improved: themes are directly applied to tabs and menu rather than sync-ed between (infinite loading).\n- improved: error message \"is notion running?\" --> clearer \"make sure notion isn't running!\"\n- improved: auto-shrink system for tabs (max of 15 open in a window).\n- bugfix: disable fadein of selected block halo with snappy transitions.\n- bugfix: increase contrast of `--theme_dark--interactive_hover` in dark+ and dracula.\n- bugfix: tabs are focused properly for input.\n- bugfix: keyboard shortcut listeners are stricter so they don't conflict.\n- bugfix: dots indicating draggability are no longer next to the tabs mod in the menu.\n- bugfix: prevent empty hotkeys from triggering every keypress.\n- bugfix: don't try loading an empty default page url (infinite loading).\n- bugfix: remove `* { z-index: 1}` rule so format dropdowns in table view can be opened.\n- extension: \"topbar icons\" = replaces the topbar buttons with icons.\n- extension: \"code line numbers\" = adds line numbers to code blocks.\n- extension: \"notion icons\" = use custom icon sets directly in notion.\n- tweak: vertical indentation/relationship lines for lists.\n- tweak: scroll database toolbars horizontally if partially hidden.\n- tweak: condense bullet points (decrease line spacing).\n\n> 📥 `npm i -g notion-enhancer@0.10.1`\n\n### v0.10.0 (2020-11-02)\n\na flexibility update.\n\n- new: mods can be reordered in the menu to control what order styling/scripts are added/executed in.\n  higher up on the list = higher priority of application = loaded last in order to override others.\n  (excluding the core, which though pinned to the top of the list is always loaded first so theming\n  variables can be modified.)\n- new: relaunch button in tray menu.\n- new: a core mod option for a default page id/url (all new windows will load it instead of the\n  normal \"most recent\" page).\n- new: css variables for increasing line spacing/paragraph margins.\n- new: patch the notion:// url scheme/protocol to work on linux.\n- new: menu shows theme conflicts + a core mod option to auto-resolve theme conflicts.\n- new: a `-n` cli option.\n- improved: menu will now respect integrated titlebar setting.\n- improved: use keyup listeners instead of a globalShortcut for the enhancements menu toggle.\n- improved: overwrite `app.asar.bak` if already exists (e.g. for app updates).\n- improved: additional menu option descriptions on hover.\n- improved: listen to prefers-color-scheme to better change theme in night shift.\n- improved: platform-specific option overrides for features not required on macOS.\n- improved: made extra padding at the bottom with the \"focus mode\" extension toggleable.\n- bugfix: removed messenger emoji set as the provider no longer supports it.\n- bugfix: remove shadow around light mode board headers.\n- bugfix: properly detect/respond to `EACCES`/`EBUSY` errors.\n- bugfix: night shift checks every interaction,\n  will respond to system changes without any manual changes.\n- bugfix: toc blocks can have text colours.\n- bugfix: bypass preview extension works with the back/forward keyboard shortcuts.\n- bugfix: (maybe) fix csp issues under proxy.\n- bugfix: remove focus mode footer from neutral theme + better contrast in calendar views.\n- bugfix: improvements to the colour theming, particularly to make real- and fake-light/dark\n  modes (as applied by the night shift extension) look consistent.\n  relevant variables (assuming all are prefixed by `--theme_[dark|light]--`):\n  `box-shadow`, `box-shadow_strong`, `select_input`, and `ui-border`\n- bugfix: font sizing applied to overlays/previews.\n- bugfix: removed typo in variable name for brown text.\n- bugfix: primary-colour text (mainly in \"add a \\_\" popups) is now properly themed.\n- bugfix: right-to-left extension applies to text in columns.\n- bugfix: block text colour applies to text with backgrounds.\n- bugfix: font applied to wrong mode with littlepig dark.\n- bugfix: keep \"empty\" top bar visible in the menu.\n- bugfix: set NSRequiresAquaSystemAppearance to false in /Applications/Notion.app/Contents/Info.plist\n  so system dark/light mode can be properly detected.\n- bugfix: make ctrl+f popover shadow less extreme.\n- bugfix: \"weekly\" calendar view name made case insensitive.\n- bugfix: re-show hidden windows when clicking on the dock.\n- tweak: sticky table/list rows.\n- theme: \"material ocean\" = an oceanic colour palette.\n- theme: \"cherry cola\" = a delightfully plummy, cherry cola flavored theme.\n- theme: \"dracula\" = a theme based on the popular dracula color palette\n  originally by zeno rocha and friends.\n- extension: \"tabs\" = have multiple notion pages open in a single window. tabs can be controlled\n  with keyboard shortcuts and dragged/reordered within/between windows.\n- extension: \"scroll to top\" = add an arrow above the help button to scroll back to the top of a page.\n- extension: \"tweaks\" = common style/layout changes. includes:\n  - new: make transitions snappy/0s.\n  - new: in-page columns are disabled/wrapped and pages are wider when\n    the window is narrower than 600px for improved responsiveness.\n  - new: thicker bold text for better visibility.\n  - new: more readable line spacing.\n  - moved: smooth scrollbars.\n  - moved: change dragarea height.\n  - moved: hide help.\n\na fork of notion-deb-builder that does generate an app.asar has been created and is once again supported.\n\n> 📥 `npm i -g notion-enhancer@0.10.0`\n\n### v0.9.1 (2020-09-26)\n\n- bugfix: font chooser will continue iterating through fonts after encountering a blank option.\n- bugfix: block indents are no longer overriden.\n- bugfix: neutral does not force full width pages.\n- bugfix: bypass preview extension works with the back/forward arrows.\n- bugfix: check all views on a page for a weekly calendar.\n- bugfix: emoji sets no longer modifies the user agent = doesn't break hotkeys.\n\n> 📥 `npm i -g notion-enhancer@0.9.1`\n\n### v0.9.0 (2020-09-20)\n\na feature and cleanup update.\n\n- improved: halved the number of css rules used -> much better performance.\n- improved: font imports must be define in the `mod.js` so that they can also be used in\n  the enhancements menu.\n- improved: tiling window-manager support (can hide titlebars entirely without dragarea/buttons).\n- improved: extensions menu search is now case insensitive and includes options, inputs and versions.\n  the search box can also for focused with `CMD/CTRL+F`.\n- improved: extensions menu filters shown either a ✓ or × to help understand the current state.\n- improved: added individual text-colour rules for different background colours.\n- improved: added variables for callout colouring.\n- improved: replaced with `helpers.getNotion()` with the constant `helpers.__notion` to reduce\n  repeated function calls.\n- improved: added variables for page width.\n- improved/bugfix: emoji sets extension should now work on macOS and will change user agent to use\n  real emojis instead of downloading images when system default is selected.\n- bugfix: enhancer settings should no longer reset on update (though this will not have\n  effect until the release after this one).\n- bugfix: blue select tags are no longer purple.\n- bugfix: page titles now respond to small-text mode.\n- bugfix: weekly calendar view height is now sized correctly according to its contents.\n- bugfix: made the open enhancements menu hotkey configurable and changed the default to `ALT+E`.\n  to remove conflict with the inline code highlight shortcut.\n- bugfix: update property-layout to match notion changes again.\n- bugfix: updated some of the tweak styling to match notion changes.\n- bugfix: block-level text colours are now changed properly.\n- bugfix: do not require data folder during installation, to prevent `sudo` attempting to\n  create it in `/var/root/`.\n- bugfix: bullet points/checkboxes will now align properly in the right-to-left extension.\n- themes: \"littlepig\" (light + dark) = monospaced themes using emojis and colourful text.\n- extension: \"font chooser\" = customize fonts. for each option, type in the name of the font you would like to use,\n  or leave it blank to not change anything.\n- extension: \"always on top\" = add an arrow/button to show the notion window on top of other windows\n  even if it's not focused.\n- extension: \"calendar scroll\" = add a button to scroll down to the current week in fullpage/infinite-scroll calendars.\n- extension: \"hide help button\" = hide the help button if you don't need it.\n- extension: \"bypass preview\" = go straight to the normal full view when opening a page.\n- extension: \"word counter\" = add page details: word/character/sentence/block count & speaking/reading times.\n\nnotion-deb-builder has been discovered to not generate an app.asar and so is no longer supported.\n\n> 📥 `npm i -g notion-enhancer@0.9.0`\n\n### v0.8.5 (2020-08-29)\n\n- bugfix: separate text highlight and select tag variables.\n- bugfix: bypass CSP for the `enhancement://` protocol - was failing on some platforms?\n\n> 📥 `npm i -g notion-enhancer@0.8.5`\n\n### v0.8.4 (2020-08-29)\n\n- bugfix: property-layout now works consistently with or without a banner.\n\n> 📥 `npm i -g notion-enhancer@0.8.4`\n\n### v0.8.3 (2020-08-29)\n\nprevious release was a mistake: it did as intended on linux, but broke windows.\nthis should achieve the same thing in a more compatible way.\n\n> 📥 `npm i -g notion-enhancer@0.8.3`\n\n### v0.8.2 (2020-08-28)\n\nsome things you just can't test until production... fixed the auto-installer\nto use `./bin.js` instead of `notion-enhancer`\n\n> 📥 `npm i -g notion-enhancer@0.8.2`\n\n### v0.8.1 (2020-08-28)\n\na clarity and stability update.\n\n- improved: more informative cli error messages (original ones can be accessed with the `-d/--dev` flag).\n- bugfix: gallery variable didn't apply on fullpage.\n- bugfix: date picker hid current date number.\n- bugfix: small-text pages should now work as expected.\n- bugfix: padding issues in page previews.\n- bugfix: property-layout extension had been broken by internal notion changes.\n- bugfix: linux installer path typo.\n- bugfix: caret-color was being mistaken for color and block-level text colouring was broken.\n- improved: auto-application on install.\n\n> 📥 `npm i -g notion-enhancer@0.8.1`\n\n### v0.8.0 (2020-08-27)\n\ncomplete rewrite with node.js.\n\n- new: simpler cli installation system (inc. commands: `apply`, `remove`, and `check`).\n- new: mod loading system (easier to create new mods, adds to notion rather than overwriting).\n- new: mod configuration menu.\n- improved: more theming variable coverage - inc. light theme and sizing/spacing.\n- bugfix: non-reproducable errors with python.\n- bugfix: better launcher patching on linux.\n- bugfix: fix frameless window issue introduced by notion desktop 2.0.9.\n- extension: \"custom inserts\" = link files for small client-side tweaks.\n- extension: \"bracketed links\" = render links surrounded with \\[\\[brackets]] instead of underlined.\n- extension: \"focus mode\" = hide the titlebar/menubar if the sidebar is closed (will be shown on hover).\n- theme: \"dark+\" = a vivid-colour near-black theme.\n- theme: \"neutral\" = smoother colours and fonts, designed to be more pleasing to the eye.\n- theme: \"gameish\" = a purple, \"gamer-styled\" theme with a blocky-font.\n- theme: \"pastel dark\" = a smooth-transition true dark theme with a hint of pastel.\n- extension: \"emoji sets\" = pick from a variety of emoji styles to use.\n- extension: \"night shift\" = sync dark/light theme with the system (overrides normal theme setting).\n- extension: \"right-to-left\" = enables auto rtl/ltr text direction detection. (ported from [github.com/obahareth/notion-rtl](https://github.com/obahareth/notion-rtl).)\n- extension: \"weekly view\" = calendar views named \"weekly\" will show only the 7 days of this week. (ported from [github.com/adihd/notionweeklyview](https://github.com/adihd/notionweeklyview).)]\n- extension: \"property layout\" = auto-collapse page properties that usually push down page content. (ported from [github.com/alexander-kazakov/notion-layout-extension](https://github.com/alexander-kazakov/notion-layout-extension).)\n\n> 📥 `npm i -g notion-enhancer@0.8.0`\n\n### v0.7.0 (2020-07-09)\n\n- new: tray option to use system default emojis (instead of twitter's emojiset).\n- new: mac support (identical functionality to other platforms with the\n  exception of the native minimise/maximise/close buttons being kept, as they integrate\n  better with the OS while not being out-of-place in notion).\n- new: notion-deb-builder support for linux.\n- new: an alert will be shown if there is an update available for the enhancer.\n- improved: replaced button symbols with svgs for multi-platform support.\n- improved: window close button is now red on hover (thanks to [@torchatlas](https://github.com/torchatlas)).\n- bugfix: `cleaner.py` patched for linux.\n- bugfix: tray now operates as expected on linux.\n- bugfix: odd mix of `\\\\` and `/` being used for windows filepaths.\n- bugfix: app no longer crashes when sidebar is toggled.\n\n> 📥 [notion-enhancer.v0.7.0.zip](https://github.com/notion-enhancer/desktop/archive/v0.7.0.zip)\n\n### v0.6.0 (2020-06-30)\n\n- style: custom fonts.\n- style: font resizing.\n- style: hide discussions (thanks to [u/Roosmaryn](https://www.reddit.com/user/Roosmaryn/)).\n- new: custom colour theming, demonstrated via the dark+ theme.\n- new: linux support (thanks to [@Blacksuan19](https://github.com/Blacksuan19)).\n- improved: if hotkey is pressed while notion is unfocused, it will bring it to the front rather than hiding it.\n- improved: stop window buttons breaking at smaller widths.\n- improved: more obviously visible drag area.\n- bugfix: specify UTF-8 encoding to prevent multibyte/gbk codec errors (thanks to [@etnperlong](https://github.com/etnperlong)).\n\n> 📥 [notion-enhancer.v0.6.0.zip](https://github.com/notion-enhancer/desktop/archive/v0.6.0.zip)\n\n### v0.5.0 (2020-05-23)\n\n- new: running from the wsl.\n- new: reload window with f5.\n- improved: code has been refactored and cleaned up,\n  inc. file renaming and a `customiser.py` that doesn't require\n  a run of `cleaner.py` to build modifications.\n  improved: scrollbar colours that fit better with notion's theming.\n- bugfix: un-break having multiple notion windows open.\n\n> 📥 [notion-enhancer.v0.5.0.zip](https://github.com/notion-enhancer/desktop/archive/v0.5.0.zip)\n\n**development here taken over by [@dragonwocky](https://github.com/dragonwocky).**\n\n**the ~~crossed out~~ features below are no longer features included by default,**\n**but can still easily be added as [custom tweaks](https://github.com/notion-enhancer/tweaks).**\n\n### v0.4.1 (2020-02-13)\n\n- bugfix: wider table & the \"+\" button not working in database pages.\n\n> 📥 [notion-enhancer.v4.1.zip](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d239a3cf-d553-4ef3-ab04-8b47892d9f9a/Notion_Customization_v4.1.zip)\n\n### v0.4.0\n\n- new: tray icon.\n- new: app startup options (+ saving).\n- new: `Reset.py`\n- improved: better output from `Customization Patcher.py`.\n- bugfix: wider tables in \"short page\" mode.\n- bugfix: unclickable buttons/draggable area (of titlebar).\n\n### v0.3.0\n\n- new: show/hide window hotkey.\n- new: app startup options.\n- ~~style: smaller table icons.~~\n\n> 📥 [notion-enhancer.v3.zip](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b01aa446-5727-476a-a25e-395472bfb1be/NotionScriptsV3.zip)\n\n### v0.2.0\n\n- new: light/dark theme support for window control buttons + scrollbars.\n- new: custom styles directly linked to the enhancer resources + compatible with web version.\n- ~~improved: making table column width go below 100px.~~\n\n### v0.1.0\n\n- new: custom window control buttons.\n- removed: default titlebar/menubar.\n- ~~removed: huge padding of board view.~~\n- ~~removed: huge padding of table view.~~\n- ~~optional: making table column width go below 100px.~~\n- ~~style: thinner cover image + higher content block.~~\n- style: scrollbars.\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.09765625,
          "content": "MIT License\n\nCopyright (c) 2023 dragonwocky <thedragonring.bod@gmail.com> (https://dragonwocky.me/)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 0.1396484375,
          "content": "# notion-enhancer/desktop\n\nCustomise the all-in-one productivity workspace Notion.\n\n[read the docs online](https://notion-enhancer.github.io/)\n"
        },
        {
          "name": "bin.mjs",
          "type": "blob",
          "size": 11.4462890625,
          "content": "#!/usr/bin/env node\n\n/**\n * notion-enhancer\n * (c) 2023 dragonwocky <thedragonring.bod@gmail.com> (https://dragonwocky.me/)\n * (https://notion-enhancer.github.io/) under the MIT license\n */\n\nimport os from \"node:os\";\nimport { createRequire } from \"node:module\";\nimport chalk from \"chalk-template\";\nimport arg from \"arg\";\nimport {\n  backupApp,\n  enhanceApp,\n  getInsertVersion,\n  getResourcePath,\n  restoreApp,\n  setNotionPath,\n} from \"./scripts/enhance-desktop-app.mjs\";\nimport { greaterThan } from \"./src/core/updateCheck.mjs\";\nimport { existsSync } from \"node:fs\";\n\nconst nodeRequire = createRequire(import.meta.url),\n  manifest = nodeRequire(\"./package.json\");\n\nlet __quiet, __debug;\nconst print = (...args) => __quiet || process.stdout.write(chalk(...args)),\n  printObject = (value) => __quiet || console.dir(value, { depth: null }),\n  clearLine = `\\r\\x1b[K`,\n  showCursor = `\\x1b[?25h`,\n  hideCursor = `\\x1b[?25l`,\n  cursorUp = (n) => `\\x1b[${n}A`,\n  cursorForward = (n) => `\\x1b[${n}C`;\n\nlet __confirmation;\nconst readStdin = () => {\n    return new Promise((res) => {\n      process.stdin.resume();\n      process.stdin.setEncoding(\"utf8\");\n      process.stdin.once(\"data\", (key) => {\n        process.stdin.pause();\n        res(key);\n      });\n    });\n  },\n  promptConfirmation = async (prompt) => {\n    let input;\n    const validInputs = [\"Y\", \"y\", \"N\", \"n\"],\n      promptLength = `    > ${prompt} [Y/n]: `.length;\n    // prevent line clear remove existing stdout\n    print`\\n`;\n    do {\n      // clear line and repeat prompt until valid input is received\n      print`${cursorUp(1)}${clearLine}    {inverse > ${prompt} [Y/n]:} `;\n      // autofill prompt response if --yes, --no or --quiet flags passed\n      if (validInputs.includes(__confirmation)) {\n        input = __confirmation;\n        print`${__confirmation}\\n`;\n      } else input = (await readStdin()).trim();\n      if (!input) {\n        // default to Y if enter is pressed w/out input\n        input = \"Y\";\n        print`${cursorUp(1)}${cursorForward(promptLength)}Y\\n`;\n      }\n    } while (!validInputs.includes(input));\n    // move cursor to immediately after input\n    print`${cursorUp(1)}${cursorForward(promptLength + 1)}`;\n    return input;\n  };\n\nlet __spinner;\nconst spinnerFrames = [\"⠋\", \"⠙\", \"⠹\", \"⠸\", \"⠼\", \"⠴\", \"⠦\", \"⠧\", \"⠇\", \"⠏\"],\n  stopSpinner = () => {\n    if (!__spinner) return;\n    clearInterval(__spinner);\n    // show cursor and overwrite spinner with arrow on completion\n    print`\\b{bold.yellow →}\\n${showCursor}`;\n    __spinner = undefined;\n  },\n  startSpinner = () => {\n    // cleanup prev spinner if necessary\n    stopSpinner();\n    // hide cursor and print first frame\n    print`${hideCursor}{bold.yellow ${spinnerFrames[0]}}`;\n    let i = 0;\n    __spinner = setInterval(() => {\n      i++;\n      // overwrite spinner with next frame\n      print`\\b{bold.yellow ${spinnerFrames[i % spinnerFrames.length]}}`;\n    }, 80);\n  };\n\nconst compileOptsToArgSpec = (options) => {\n    const args = {};\n    for (const [opt, [type]] of options) {\n      const aliases = opt.split(\", \").map((alias) => alias.split(\"=\")[0]),\n        param = aliases[1] ?? aliases[0];\n      args[param] = type;\n      for (let i = 0; i < aliases.length; i++) {\n        if (aliases[i] === param) continue;\n        args[aliases[i]] = param;\n      }\n    }\n    return args;\n  },\n  compileOptsToJsonOutput = (options) => {\n    // the structure used to define options above\n    // is convenient and compact, but requires additional\n    // parsing to understand. this function processes\n    // options into a more explicitly defined structure\n    return options.map(([opt, [type, description]]) => {\n      const option = {\n          aliases: opt.split(\", \").map((alias) => alias.split(\"=\")[0]),\n          type,\n          description,\n        },\n        example = opt\n          .split(\", \")\n          .map((alias) => alias.split(\"=\")[1])\n          .find((value) => value);\n      if (example) option.example = example;\n      return option;\n    });\n  };\n\nlet __json;\nconst printHelp = (commands, options) => {\n    const { name, version, homepage } = manifest,\n      usage = `${name} <command> [options]`;\n    if (__json) {\n      printObject({\n        name,\n        version,\n        homepage,\n        usage,\n        commands: Object.fromEntries(commands),\n        options: compileOptsToJsonOutput(options),\n      });\n    } else {\n      const cmdPad = Math.max(...commands.map(([cmd]) => cmd.length)),\n        optPad = Math.max(...options.map((opt) => opt[0].length)),\n        parseCmd = (cmd) =>\n          chalk`  ${cmd[0].padEnd(cmdPad)}  {grey :}  ${cmd[1]}`,\n        parseOpt = (opt) =>\n          chalk`  ${opt[0].padEnd(optPad)}  {grey :}  ${opt[1][1]}`;\n      print`{bold.whiteBright.underline ${name} v${version}}\\n{grey ${homepage}}\n      \\n{bold.whiteBright USAGE}\\n${name} <command> [options]\n      \\n{bold.whiteBright COMMANDS}\\n${commands.map(parseCmd).join(\"\\n\")}\n      \\n{bold.whiteBright OPTIONS}\\n${options.map(parseOpt).join(\"\\n\")}\\n`;\n    }\n  },\n  printVersion = () => {\n    if (__json) {\n      printObject({\n        [manifest.name]: manifest.version,\n        node: process.version.slice(1),\n        platform: process.platform,\n        architecture: process.arch,\n        os: os.release(),\n      });\n    } else {\n      const nodeVersion = `node@${process.version}`,\n        enhancerVersion = `${manifest.name}@v${manifest.version}`,\n        osVersion = `${process.platform}-${process.arch}/${os.release()}`;\n      print`${enhancerVersion} via ${nodeVersion} on ${osVersion}\\n`;\n    }\n  };\n\ntry {\n  const commands = [\n      // [\"command\", \"description\"]\n      [\"apply\", \"Inject the notion-enhancer into Notion desktop.\"],\n      [\"remove\", \"Restore Notion desktop to its pre-enhanced state.\"],\n      [\"check\", \"Report Notion desktop's enhancement state.\"],\n    ],\n    // prettier-ignore\n    options = [\n      // [\"alias, option=example\", [type, \"description\"]]\n      [\"--path=</path/to/notion/resources>\", [String, \"Manually provide a Notion installation location.\"]],\n      [\"--no-backup\", [Boolean, \"Skip backup; enhancement will be irreversible.\"]],\n      [\"--json\", [Boolean, \"Output JSON from the `check` and `--version` commands.\"]],\n      [\"-y, --yes\", [Boolean, 'Skip prompts; assume \"yes\" and run non-interactively.']],\n      [\"-n, --no\", [Boolean, 'Skip prompts; assume \"no\" and run non-interactively.']],\n      [\"-q, --quiet\", [Boolean, 'Skip prompts; assume \"no\" unless -y and hide all output.']],\n      [\"-d, --debug\", [Boolean, \"Show detailed error messages and keep extracted files.\"]],\n      [\"-h, --help\", [Boolean, \"Display usage information for this CLI.\"]],\n      [\"-v, --version\", [Boolean, \"Display this CLI's version number.\"]],\n    ];\n\n  const args = arg(compileOptsToArgSpec(options));\n  if (args[\"--debug\"]) __debug = true;\n  if (args[\"--quiet\"]) __quiet = true;\n  if (args[\"--json\"]) __json = true;\n  if (args[\"--no\"] || args[\"--quiet\"]) __confirmation = \"n\";\n  if (args[\"--yes\"]) __confirmation = \"y\";\n  if (args[\"--help\"]) printHelp(commands, options), process.exit();\n  if (args[\"--version\"]) printVersion(), process.exit();\n  if (args[\"--path\"]) setNotionPath(args[\"--path\"]);\n\n  const appPath = getResourcePath(\"app.asar\"),\n    backupPath = getResourcePath(\"app.asar.bak\"),\n    insertVersion = await getInsertVersion(),\n    updateAvailable = greaterThan(manifest.version, insertVersion);\n\n  const messages = {\n    \"notion-found\": insertVersion\n      ? // prettier-ignore\n        `Notion desktop found with ${manifest.name} v${insertVersion\n      } applied${updateAvailable ? \"\" : \" (up to date)\"}.`\n      : `Notion desktop found (no enhancements applied).`,\n    \"notion-not-found\": `Notion desktop not found.`,\n\n    // prettier-ignore\n    \"update-available\": chalk`v${manifest.version\n    } is available! To apply, run {underline ${manifest.name} apply -y}.`,\n    // prettier-ignore\n    \"update-confirm\": `${updateAvailable ? \"Upgrade\" : \"Downgrade\"\n    } to ${manifest.name}${manifest.name} v${manifest.version}?`,\n\n    \"backup-found\": `Restoring to pre-enhanced state from backup...`,\n    \"backup-not-found\": chalk`No backup found: to restore Notion desktop to its pre-enhanced state,\n    uninstall it and reinstall Notion from {underline https://www.notion.so/desktop}.`,\n\n    \"backup-app\": `Backing up app before enhancement...`,\n    \"enhance-app\": `Enhancing and patching app sources...`,\n  };\n  const SUCCESS = chalk`{bold.whiteBright SUCCESS} {green ✔}`,\n    FAILURE = chalk`{bold.whiteBright FAILURE} {red ✘}`,\n    CANCELLED = chalk`{bold.whiteBright CANCELLED} {red ✘}`,\n    INCOMPLETE = Symbol();\n\n  const interactiveRestore = async () => {\n    if (!backupPath || !existsSync(backupPath)) {\n      print`  {red * ${messages[\"backup-not-found\"]}}\\n`;\n      return FAILURE;\n    }\n    print`  {grey * ${messages[\"backup-found\"]}} `;\n    startSpinner();\n    await restoreApp();\n    stopSpinner();\n    return SUCCESS;\n  };\n\n  const getNotion = () => {\n      if (!appPath || !existsSync(appPath)) {\n        print`  {red * ${messages[\"notion-not-found\"]}}\\n`;\n        return FAILURE;\n      } else {\n        print`  {grey * ${messages[\"notion-found\"]}}\\n`;\n        return INCOMPLETE;\n      }\n    },\n    compareVersions = async () => {\n      if (!insertVersion) return INCOMPLETE;\n      // same version already applied\n      if (insertVersion === manifest.version) return SUCCESS;\n      // diff version already applied\n      print`  {grey * ${messages[\"notion-found\"]}}\\n`;\n      const replace = await promptConfirmation(messages[\"update-confirm\"]);\n      print`\\n`;\n      return [\"Y\", \"y\"].includes(replace)\n        ? (await interactiveRestore()) === SUCCESS\n          ? INCOMPLETE\n          : FAILURE\n        : CANCELLED;\n    },\n    interactiveEnhance = async () => {\n      if (!args[\"--no-backup\"]) {\n        print`  {grey * ${messages[\"backup-app\"]}} `;\n        startSpinner();\n        await backupApp();\n        stopSpinner();\n      }\n      print`  {grey * ${messages[\"enhance-app\"]}} `;\n      startSpinner();\n      await enhanceApp(__debug);\n      stopSpinner();\n      return SUCCESS;\n    };\n\n  switch (args[\"_\"][0]) {\n    case \"apply\": {\n      print`{bold.whiteBright [${manifest.name.toUpperCase()}] APPLY}\\n`;\n      let res = getNotion();\n      if (res === INCOMPLETE) res = await compareVersions();\n      if (res === INCOMPLETE) res = await interactiveEnhance();\n      print`${res}\\n`;\n      break;\n    }\n    case \"remove\": {\n      print`{bold.whiteBright [${manifest.name.toUpperCase()}] REMOVE}\\n`;\n      let res = getNotion();\n      if (res === INCOMPLETE) {\n        res = insertVersion ? await interactiveRestore() : SUCCESS;\n      }\n      print`${res}\\n`;\n      break;\n    }\n    case \"check\": {\n      if (__json) {\n        const cliVersion = manifest.version,\n          state = { appPath, backupPath, insertVersion, cliVersion };\n        if (appPath && !existsSync(appPath)) state.appPath = null;\n        if (backupPath && !existsSync(backupPath)) state.backupPath = null;\n        printObject(state), process.exit();\n      }\n      print`{bold.whiteBright [${manifest.name.toUpperCase()}] CHECK}\\n`;\n      let res = getNotion();\n      if (res === INCOMPLETE && updateAvailable) {\n        print`  {grey * ${messages[\"update-available\"]}}\\n`;\n      }\n      break;\n    }\n\n    default:\n      printHelp(commands, options);\n  }\n} catch (err) {\n  stopSpinner();\n  const message = err.message.split(\"\\n\")[0];\n  if (__debug) {\n    print`{bold.red ${err.name}:} ${message}\\n{grey ${err.stack\n      .split(\"\\n\")\n      .splice(1)\n      .map((at) => at.replace(/\\s{4}/g, \"  \"))\n      .join(\"\\n\")}}`;\n  } else {\n    print`{bold.red Error:} ${message} {grey (Run with -d for more information.)}\\n`;\n  }\n}\n"
        },
        {
          "name": "package-lock.json",
          "type": "blob",
          "size": 3.45703125,
          "content": "{\n  \"name\": \"notion-enhancer\",\n  \"version\": \"0.11.1\",\n  \"lockfileVersion\": 3,\n  \"requires\": true,\n  \"packages\": {\n    \"\": {\n      \"name\": \"notion-enhancer\",\n      \"version\": \"0.11.1\",\n      \"license\": \"MIT\",\n      \"dependencies\": {\n        \"@electron/asar\": \"^3.2.9\",\n        \"arg\": \"^5.0.2\",\n        \"chalk-template\": \"^1.1.0\"\n      },\n      \"bin\": {\n        \"notion-enhancer\": \"bin.mjs\"\n      },\n      \"engines\": {\n        \"node\": \">=18.x.x\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/dragonwocky\"\n      }\n    },\n    \"node_modules/@electron/asar\": {\n      \"version\": \"3.2.9\",\n      \"resolved\": \"https://registry.npmjs.org/@electron/asar/-/asar-3.2.9.tgz\",\n      \"integrity\": \"sha512-Vu2P3X2gcZ3MY9W7yH72X9+AMXwUQZEJBrsPIbX0JsdllLtoh62/Q8Wg370/DawIEVKOyfD6KtTLo645ezqxUA==\",\n      \"dependencies\": {\n        \"commander\": \"^5.0.0\",\n        \"glob\": \"^7.1.6\",\n        \"minimatch\": \"^3.0.4\"\n      },\n      \"bin\": {\n        \"asar\": \"bin/asar.js\"\n      },\n      \"engines\": {\n        \"node\": \">=10.12.0\"\n      }\n    },\n    \"node_modules/arg\": {\n      \"version\": \"5.0.2\",\n      \"license\": \"MIT\"\n    },\n    \"node_modules/balanced-match\": {\n      \"version\": \"1.0.2\",\n      \"license\": \"MIT\"\n    },\n    \"node_modules/brace-expansion\": {\n      \"version\": \"1.1.11\",\n      \"license\": \"MIT\",\n      \"dependencies\": {\n        \"balanced-match\": \"^1.0.0\",\n        \"concat-map\": \"0.0.1\"\n      }\n    },\n    \"node_modules/chalk\": {\n      \"version\": \"5.2.0\",\n      \"license\": \"MIT\",\n      \"engines\": {\n        \"node\": \"^12.17.0 || ^14.13 || >=16.0.0\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/chalk/chalk?sponsor=1\"\n      }\n    },\n    \"node_modules/chalk-template\": {\n      \"version\": \"1.1.0\",\n      \"license\": \"MIT\",\n      \"dependencies\": {\n        \"chalk\": \"^5.2.0\"\n      },\n      \"engines\": {\n        \"node\": \">=14.16\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/chalk/chalk-template?sponsor=1\"\n      }\n    },\n    \"node_modules/commander\": {\n      \"version\": \"5.1.0\",\n      \"license\": \"MIT\",\n      \"engines\": {\n        \"node\": \">= 6\"\n      }\n    },\n    \"node_modules/concat-map\": {\n      \"version\": \"0.0.1\",\n      \"license\": \"MIT\"\n    },\n    \"node_modules/fs.realpath\": {\n      \"version\": \"1.0.0\",\n      \"license\": \"ISC\"\n    },\n    \"node_modules/glob\": {\n      \"version\": \"7.2.3\",\n      \"license\": \"ISC\",\n      \"dependencies\": {\n        \"fs.realpath\": \"^1.0.0\",\n        \"inflight\": \"^1.0.4\",\n        \"inherits\": \"2\",\n        \"minimatch\": \"^3.1.1\",\n        \"once\": \"^1.3.0\",\n        \"path-is-absolute\": \"^1.0.0\"\n      },\n      \"engines\": {\n        \"node\": \"*\"\n      },\n      \"funding\": {\n        \"url\": \"https://github.com/sponsors/isaacs\"\n      }\n    },\n    \"node_modules/inflight\": {\n      \"version\": \"1.0.6\",\n      \"license\": \"ISC\",\n      \"dependencies\": {\n        \"once\": \"^1.3.0\",\n        \"wrappy\": \"1\"\n      }\n    },\n    \"node_modules/inherits\": {\n      \"version\": \"2.0.4\",\n      \"license\": \"ISC\"\n    },\n    \"node_modules/minimatch\": {\n      \"version\": \"3.1.2\",\n      \"license\": \"ISC\",\n      \"dependencies\": {\n        \"brace-expansion\": \"^1.1.7\"\n      },\n      \"engines\": {\n        \"node\": \"*\"\n      }\n    },\n    \"node_modules/once\": {\n      \"version\": \"1.4.0\",\n      \"license\": \"ISC\",\n      \"dependencies\": {\n        \"wrappy\": \"1\"\n      }\n    },\n    \"node_modules/path-is-absolute\": {\n      \"version\": \"1.0.1\",\n      \"license\": \"MIT\",\n      \"engines\": {\n        \"node\": \">=0.10.0\"\n      }\n    },\n    \"node_modules/wrappy\": {\n      \"version\": \"1.0.2\",\n      \"license\": \"ISC\"\n    }\n  }\n}\n"
        },
        {
          "name": "package.json",
          "type": "blob",
          "size": 1.0029296875,
          "content": "{\n  \"name\": \"notion-enhancer\",\n  \"version\": \"0.11.1\",\n  \"author\": \"dragonwocky <thedragonring.bod@gmail.com> (https://dragonwocky.me/)\",\n  \"description\": \"Customise the all-in-one productivity workspace Notion.\",\n  \"homepage\": \"https://notion-enhancer.github.io\",\n  \"repository\": \"github:notion-enhancer/desktop\",\n  \"bugs\": \"https://github.com/notion-enhancer/desktop/issues\",\n  \"funding\": \"https://github.com/sponsors/dragonwocky\",\n  \"license\": \"MIT\",\n  \"bin\": \"bin.mjs\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"./scripts/build-browser-extension.sh\",\n    \"vendor\": \"node ./scripts/vendor-dependencies.mjs\"\n  },\n  \"engines\": {\n    \"node\": \">=18.x.x\"\n  },\n  \"keywords\": [\n    \"windows\",\n    \"macos\",\n    \"linux\",\n    \"productivity\",\n    \"hack\",\n    \"extensions\",\n    \"themes\",\n    \"integrations\",\n    \"addons\",\n    \"mod\",\n    \"mods\",\n    \"mod-loader\",\n    \"enhancer\",\n    \"notion\",\n    \"notion-enhancer\"\n  ],\n  \"dependencies\": {\n    \"@electron/asar\": \"^3.2.9\",\n    \"chalk-template\": \"^1.1.0\",\n    \"arg\": \"^5.0.2\"\n  }\n}\n"
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}