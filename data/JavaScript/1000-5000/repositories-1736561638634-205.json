{
  "metadata": {
    "timestamp": 1736561638634,
    "page": 205,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjIxMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "jakiestfu/Medium.js",
      "stars": 4395,
      "defaultBranch": "master",
      "files": [
        {
          "name": "README.md",
          "type": "blob",
          "size": 0.224609375,
          "content": "[![Medium.js](http://i.imgur.com/U6t8Eq2.png \"Medium.js\")](http://jakiestfu.github.io/Medium.js)\n[![Stories in Ready](https://badge.waffle.io/jakiestfu/medium.js.png?label=ready&title=Ready)](https://waffle.io/jakiestfu/medium.js)"
        },
        {
          "name": "bower.json",
          "type": "blob",
          "size": 0.7451171875,
          "content": "{\n\t\"name\": \"Medium.js\",\n\t\"author\": \"Jakob Kelly <jakie8@gmail.com> (http://jakiestfu.com)\",\n\t\"contributors\": [\n\t\t{\n\t\t\t\"name\": \"Robert Plummer <robertleeplummerjr@gmail.com> (http://visop-dev.com)\"\n\t\t}\n\t],\n\t\"homepage\": \"http://jakiestfu.github.io/Medium.js\",\n\t\"bugs\": \"https://github.com/jakiestfu/Medium.js/issues\",\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"https://github.com/jakiestfu/Medium.js\"\n\t},\n\t\"dependencies\": {\n\t\t\"rangy-official\": \">=1.3\",\n\t\t\"undo\": \"https://github.com/jzaefferer/undo/archive/master.zip\"\n\t},\n  \"devDependencies\": {\n    \"testify.js\": \">=1.0\"\n  },\n\t\"keywords\": [\"editor\", \"wysiwyg\", \"contenteditable\", \"content\", \"medium\", \"medium.com\"],\n\t\"license\": \"MIT\",\n\t\"files\": [\"medium.js\", \"medium.css\"],\n\t\"main\": [\"medium.js\", \"medium.css\"]\n}\n"
        },
        {
          "name": "build",
          "type": "blob",
          "size": 0.845703125,
          "content": "#!/bin/bash\n\n# directories\nJS_IN_DIR='./src/Medium/'\nJS_OUT_DIR='.'\n\nJS_TEMP=\"\"\nJS_WRAPPER=$(<\"$JS_IN_DIR/wrapper.js\")\nJS_COMBINED_FILE=\"$JS_OUT_DIR/medium.js\"\nJS_COMBINED_FILE_MIN=\"$JS_OUT_DIR/medium.min.js\"\n\n# JS files you want to combine together\n\nJS_FILES=(\n\t#constructors first\n\tbase.js\n\tAction.js\n\tCache.js\n\tCursor.js\n\tDrag.js\n\tElement.js\n\tHtml.js\n\tInjector.js\n\tSelection.js\n\tToolbar.js\n\tUndoable.js\n\tUtilities.js\n\n\t#everything else next\n\tenvironmentCorrection.js\n)\n\n#clear the files\n> $JS_COMBINED_FILE\n> $JS_COMBINED_FILE_MIN\n\n#run thru the JS files\nfor F in ${JS_FILES[@]}; do\n  CONTENTS=$(<\"$JS_IN_DIR/$F\")\n  JS_TEMP+=\"$CONTENTS\"\ndone\n\necho \"${JS_WRAPPER//CODE_HERE/$JS_TEMP}\" > $JS_COMBINED_FILE\n\n\n#compress it\nyui-compressor -o $JS_COMBINED_FILE_MIN $JS_COMBINED_FILE\n\n#add the file to the git base\ngit add $JS_COMBINED_FILE\ngit add $JS_COMBINED_FILE_MIN"
        },
        {
          "name": "composer.json",
          "type": "blob",
          "size": 0.640625,
          "content": "{\n    \"name\": \"mediumjs/mediumjs\",\n    \"description\": \"A tiny JavaScript library for making contenteditable beautiful (Like Medium's editor).\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Jacob Kelley\",\n            \"email\": \"jakie8@gmail.com\",\n            \"homepage\": \"http://jakiestfu.com\",\n            \"role\": \"Lead Developer\"\n        },\n        {\n            \"name\": \"Robert Plummer\",\n            \"email\": \"rplummer@visop-dev.com\",\n            \"homepage\": \"http://visop-dev.com\",\n            \"role\": \"Assistant Developer\"\n        }\n    ],\n    \"require\": {\n        \"rangy/rangy\": \">=1.3\",\n        \"undojs/undojs\": \">=1\"\n    }\n}\n"
        },
        {
          "name": "composer.lock",
          "type": "blob",
          "size": 1.09765625,
          "content": "{\n    \"_readme\": [\n        \"This file locks the dependencies of your project to a known state\",\n        \"Read more about it at http://getcomposer.org/doc/01-basic-usage.md#composer-lock-the-lock-file\"\n    ],\n    \"hash\": \"a1e17a0c8bd1f45ed85a675c1a7cdc8b\",\n    \"packages\": [\n        {\n            \"name\": \"rangy/rangy\",\n            \"version\": \"1.3\",\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://rangy.googlecode.com/files/rangy-1.3alpha.804.zip\",\n                \"reference\": null,\n                \"shasum\": null\n            },\n            \"type\": \"library\"\n        },\n        {\n            \"name\": \"undojs/undojs\",\n            \"version\": \"1\",\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://github.com/jzaefferer/undo/archive/master.zip\",\n                \"reference\": null,\n                \"shasum\": null\n            },\n            \"type\": \"library\"\n        }\n    ],\n    \"packages-dev\": [\n\n    ],\n    \"aliases\": [\n\n    ],\n    \"minimum-stability\": \"stable\",\n    \"stability-flags\": [\n\n    ],\n    \"platform\": [\n\n    ],\n    \"platform-dev\": [\n\n    ]\n}\n"
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "index.html",
          "type": "blob",
          "size": 0.083984375,
          "content": "<meta http-equiv=\"refresh\" content=\"0;URL=http://jakiestfu.github.io/Medium.js/docs/\">"
        },
        {
          "name": "medium.css",
          "type": "blob",
          "size": 2.169921875,
          "content": ".Medium{\n    position: relative;\n    min-height: 10px;\n    }\n.Medium-clear{\n    background: transparent !important;\n    background-color: transparent !important;\n    border-color: transparent !important;\n}\n.Medium,\n    .Medium p:first-child{\n        margin-top:0;\n        }\n    .Medium p:last-child{\n        margin-bottom:0;\n        }\n    .Medium p:empty {\n        display: block;\n\t    height: 1em;\n    }\n.Medium-paste-hook{\n    opacity: 0;\n\twidth: 1px;\n\theight: 1px;\n\tposition: absolute;\n    }\n.Medium-placeholder{\n\tposition: absolute;\n\t}\n.Medium-placeholder div{\n\t-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\";\n\tfilter: alpha(opacity=50);\n\topacity: 0.5;\n\tposition: absolute;\n\t}\n.Medium-placeholder-rich div{\n\tfont-style: italic;\n\t}\n.Medium-inline,\n.Medium-placeholder-inline div,\n.Medium-inlineRich,\n.Medium-placeholder-inlineRich div{\n\toverflow: hidden;\n\twhite-space: nowrap;\n\t}\n.Medium-drag {\n\tposition: absolute;\n\tcursor: move;\n\tmargin-left: -5px;\n\tmargin-top: -20px;\n\t}\n.Medium-toolbar-hide {\n\toverflow: hidden;\n\tmax-height: 0;\n\tpadding-top: 0;\n\tpadding-bottom: 0;\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n\ttransition-property: opacity;\n\t-moz-transition-duration: 0.3s;\n\t-webkit-transition-duration: 0.3s;\n\t-o-transition-duration: 0.3s;\n\ttransition-duration: 0.3s;\n\t-moz-transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n\t-webkit-transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n\t-o-transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n\ttransition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n\topacity: 0;\n\t}\n\n.Medium-toolbar-show {\n\ttransition-property: opacity;\n\t-moz-transition-duration: 0.3s;\n\t-webkit-transition-duration: 0.3s;\n\t-o-transition-duration: 0.3s;\n\ttransition-duration: 0.3s;\n\t-moz-transition-timing-function: ease-in;\n\t-webkit-transition-timing-function: ease-in;\n\t-o-transition-timing-function: ease-in;\n\ttransition-timing-function: ease-in;\n\tmax-height: 1000px;\n\topacity: 1;\n\twidth: auto !important;\n\t}\n\n.Medium-toolbar-fixed {\n\tposition: fixed;\n\t}\n.Medium-focused {\n\ttransition: all 500ms ease-in-out 0s;\n\t-moz-box-shadow: 0px 0px 3px 4px rgba(0, 0, 0, 0.2);\n\t-webkit-box-shadow: 0px 0px 3px 4px rgba(0, 0, 0, 0.2);\n\tbox-shadow: 0px 0px 3px 4px rgba(0, 0, 0, 0.2);\n\t}"
        },
        {
          "name": "medium.js",
          "type": "blob",
          "size": 60.384765625,
          "content": "/*\n * Medium.js - Taking control of content editable\n * Copyright 2013-2015, Jacob Kelley - http://jakiestfu.com/\n * Released under the MIT Licence\n * http://opensource.org/licenses/MIT\n *\n * Github:  http://github.com/jakiestfu/Medium.js/\n * Version: master\n */\n\n(function (w, d) {\n\t'use strict';\n\n\tvar rangy = w['rangy'] || null,\n\t\tundo = w['Undo'] || null,\n\t\tkey = w.Key = {\n\t\t\t'backspace': 8,\n\t\t\t'tab': 9,\n\t\t\t'enter': 13,\n\t\t\t'shift': 16,\n\t\t\t'ctrl': 17,\n\t\t\t'alt': 18,\n\t\t\t'pause': 19,\n\t\t\t'capsLock': 20,\n\t\t\t'escape': 27,\n\t\t\t'pageUp': 33,\n\t\t\t'pageDown': 34,\n\t\t\t'end': 35,\n\t\t\t'home': 36,\n\t\t\t'leftArrow': 37,\n\t\t\t'upArrow': 38,\n\t\t\t'rightArrow': 39,\n\t\t\t'downArrow': 40,\n\t\t\t'insert': 45,\n\t\t\t'delete': 46,\n\t\t\t'0': 48,\n\t\t\t'1': 49,\n\t\t\t'2': 50,\n\t\t\t'3': 51,\n\t\t\t'4': 52,\n\t\t\t'5': 53,\n\t\t\t'6': 54,\n\t\t\t'7': 55,\n\t\t\t'8': 56,\n\t\t\t'9': 57,\n\t\t\t'a': 65,\n\t\t\t'b': 66,\n\t\t\t'c': 67,\n\t\t\t'd': 68,\n\t\t\t'e': 69,\n\t\t\t'f': 70,\n\t\t\t'g': 71,\n\t\t\t'h': 72,\n\t\t\t'i': 73,\n\t\t\t'j': 74,\n\t\t\t'k': 75,\n\t\t\t'l': 76,\n\t\t\t'm': 77,\n\t\t\t'n': 78,\n\t\t\t'o': 79,\n\t\t\t'p': 80,\n\t\t\t'q': 81,\n\t\t\t'r': 82,\n\t\t\t's': 83,\n\t\t\t't': 84,\n\t\t\t'u': 85,\n\t\t\t'v': 86,\n\t\t\t'w': 87,\n\t\t\t'x': 88,\n\t\t\t'y': 89,\n\t\t\t'z': 90,\n\t\t\t'leftWindow': 91,\n\t\t\t'rightWindowKey': 92,\n\t\t\t'select': 93,\n\t\t\t'numpad0': 96,\n\t\t\t'numpad1': 97,\n\t\t\t'numpad2': 98,\n\t\t\t'numpad3': 99,\n\t\t\t'numpad4': 100,\n\t\t\t'numpad5': 101,\n\t\t\t'numpad6': 102,\n\t\t\t'numpad7': 103,\n\t\t\t'numpad8': 104,\n\t\t\t'numpad9': 105,\n\t\t\t'multiply': 106,\n\t\t\t'add': 107,\n\t\t\t'subtract': 109,\n\t\t\t'decimalPoint': 110,\n\t\t\t'divide': 111,\n\t\t\t'f1': 112,\n\t\t\t'f2': 113,\n\t\t\t'f3': 114,\n\t\t\t'f4': 115,\n\t\t\t'f5': 116,\n\t\t\t'f6': 117,\n\t\t\t'f7': 118,\n\t\t\t'f8': 119,\n\t\t\t'f9': 120,\n\t\t\t'f10': 121,\n\t\t\t'f11': 122,\n\t\t\t'f12': 123,\n\t\t\t'numLock': 144,\n\t\t\t'scrollLock': 145,\n\t\t\t'semiColon': 186,\n\t\t\t'equalSign': 187,\n\t\t\t'comma': 188,\n\t\t\t'dash': 189,\n\t\t\t'period': 190,\n\t\t\t'forwardSlash': 191,\n\t\t\t'graveAccent': 192,\n\t\t\t'openBracket': 219,\n\t\t\t'backSlash': 220,\n\t\t\t'closeBracket': 221,\n\t\t\t'singleQuote': 222\n\t\t},\n\t\tMedium = (function () {\n\n\t\t\t/**\n * Medium.js - Taking control of content editable\n * @constructor\n * @param {Object} [userSettings] user options\n */\nvar Medium = function (userSettings) {\n\t\"use strict\";\n\n\tvar medium = this,\n\t\tdefaultSettings = utils.deepExtend({}, Medium.defaultSettings),\n\t\tsettings = this.settings = utils.deepExtend(defaultSettings, userSettings),\n\t\tcache = new Medium.Cache(),\n\t\tselection = new Medium.Selection(),\n\t\taction = new Medium.Action(this),\n\t\tcursor = new Medium.Cursor(this),\n\t\tundoable = new Medium.Undoable(this),\n\t\tel,\n\t\tnewVal,\n\t\ti;\n\n\tfor (i in defaultSettings) if (defaultSettings.hasOwnProperty(i)) {\n\t\t// Override defaults with data-attributes\n\t\tif (\n\t\t\ttypeof defaultSettings[i] !== 'object'\n\t\t\t&& defaultSettings.hasOwnProperty(i)\n\t\t\t&& settings.element.getAttribute('data-medium-' + key)\n\t\t) {\n\t\t\tnewVal = settings.element.getAttribute('data-medium-' + key);\n\n\t\t\tif (newVal.toLowerCase() === \"false\" || newVal.toLowerCase() === \"true\") {\n\t\t\t\tnewVal = newVal.toLowerCase() === \"true\";\n\t\t\t}\n\t\t\tsettings[i] = newVal;\n\t\t}\n\t}\n\n\tif (settings.modifiers) {\n\t\tfor (i in settings.modifiers) if (settings.modifiers.hasOwnProperty(i)) {\n\t\t\tif (typeof(key[i]) !== 'undefined') {\n\t\t\t\tsettings.modifiers[key[i]] = settings.modifiers[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tif (settings.keyContext) {\n\t\tfor (i in settings.keyContext) if (settings.keyContext.hasOwnProperty(i)) {\n\t\t\tif (typeof(key[i]) !== 'undefined') {\n\t\t\t\tsettings.keyContext[key[i]] = settings.keyContext[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t// Extend Settings\n\tel = settings.element;\n\n\t// Editable\n\tel.contentEditable = true;\n\tel.className\n\t\t+= (' ' + settings.cssClasses.editor)\n\t+ (' ' + settings.cssClasses.editor + '-' + settings.mode);\n\n\tsettings.tags = (settings.tags || {});\n\tif (settings.tags.outerLevel) {\n\t\tsettings.tags.outerLevel = settings.tags.outerLevel.concat([settings.tags.paragraph, settings.tags.horizontalRule]);\n\t}\n\n\tthis.settings = settings;\n\tthis.element = el;\n\tel.medium = this;\n\n\tthis.action = action;\n\tthis.cache = cache;\n\tthis.cursor = cursor;\n\tthis.utils = utils;\n\tthis.selection = selection;\n\n\t// Initialize editor\n\tmedium.clean();\n\tmedium.placeholders();\n\taction.preserveElementFocus();\n\n\tthis.dirty = false;\n\tthis.undoable = undoable;\n\tthis.makeUndoable = undoable.makeUndoable;\n\n\tif (settings.drag) {\n\t\tmedium.drag = new Medium.Drag(medium);\n\t\tmedium.drag.setup();\n\t}\n\n\taction.setup();\n\n\t// Set as initialized\n\tcache.initialized = true;\n\n\tthis.makeUndoable(true);\n};\n\nMedium.prototype = {\n\tplaceholders: function () {\n\t\t//in IE8, just gracefully degrade to no placeholders\n\t\tif (!w.getComputedStyle) return;\n\n\t\tvar s = this.settings,\n\t\t\tplaceholder = this.placeholder || (this.placeholder = d.createElement('div')),\n\t\t\tel = this.element,\n\t\t\tstyle = placeholder.style,\n\t\t\telStyle = w.getComputedStyle(el, null),\n\t\t\tqStyle = function (prop) {\n\t\t\t\treturn elStyle.getPropertyValue(prop)\n\t\t\t},\n\t\t\ttext = utils.text(el),\n\t\t\tcursor = this.cursor,\n\t\t\tchildCount = el.children.length,\n\t\t\thasFocus = Medium.activeElement === el;\n\n\t\tel.placeholder = placeholder;\n\n\t\t// Empty Editor\n\t\tif (\n\t\t\t!hasFocus\n\t\t\t&& text.length < 1\n\t\t\t&& childCount < 2\n\t\t) {\n\t\t\tif (el.placeHolderActive) return;\n\n\t\t\tif (!el.innerHTML.match('<' + s.tags.paragraph)) {\n\t\t\t\tel.innerHTML = '';\n\t\t\t}\n\n\t\t\t// We need to add placeholders\n\t\t\tif (s.placeholder.length > 0) {\n\t\t\t\tif (!placeholder.setup) {\n\t\t\t\t\tplaceholder.setup = true;\n\n\t\t\t\t\t//background & background color\n\t\t\t\t\tstyle.background = qStyle('background');\n\t\t\t\t\tstyle.backgroundColor = qStyle('background-color');\n\n\t\t\t\t\t//text size & text color\n\t\t\t\t\tstyle.fontSize = qStyle('font-size');\n\t\t\t\t\tstyle.color = elStyle.color;\n\n\t\t\t\t\t//begin box-model\n\t\t\t\t\t//margin\n\t\t\t\t\tstyle.marginTop = qStyle('margin-top');\n\t\t\t\t\tstyle.marginBottom = qStyle('margin-bottom');\n\t\t\t\t\tstyle.marginLeft = qStyle('margin-left');\n\t\t\t\t\tstyle.marginRight = qStyle('margin-right');\n\n\t\t\t\t\t//padding\n\t\t\t\t\tstyle.paddingTop = qStyle('padding-top');\n\t\t\t\t\tstyle.paddingBottom = qStyle('padding-bottom');\n\t\t\t\t\tstyle.paddingLeft = qStyle('padding-left');\n\t\t\t\t\tstyle.paddingRight = qStyle('padding-right');\n\n\t\t\t\t\t//border\n\t\t\t\t\tstyle.borderTopWidth = qStyle('border-top-width');\n\t\t\t\t\tstyle.borderTopColor = qStyle('border-top-color');\n\t\t\t\t\tstyle.borderTopStyle = qStyle('border-top-style');\n\t\t\t\t\tstyle.borderBottomWidth = qStyle('border-bottom-width');\n\t\t\t\t\tstyle.borderBottomColor = qStyle('border-bottom-color');\n\t\t\t\t\tstyle.borderBottomStyle = qStyle('border-bottom-style');\n\t\t\t\t\tstyle.borderLeftWidth = qStyle('border-left-width');\n\t\t\t\t\tstyle.borderLeftColor = qStyle('border-left-color');\n\t\t\t\t\tstyle.borderLeftStyle = qStyle('border-left-style');\n\t\t\t\t\tstyle.borderRightWidth = qStyle('border-right-width');\n\t\t\t\t\tstyle.borderRightColor = qStyle('border-right-color');\n\t\t\t\t\tstyle.borderRightStyle = qStyle('border-right-style');\n\t\t\t\t\t//end box model\n\n\t\t\t\t\t//element setup\n\t\t\t\t\tplaceholder.className = s.cssClasses.placeholder + ' ' + s.cssClasses.placeholder + '-' + s.mode;\n\t\t\t\t\tplaceholder.innerHTML = '<div>' + s.placeholder + '</div>';\n\t\t\t\t\tel.parentNode.insertBefore(placeholder, el);\n\t\t\t\t}\n\n\t\t\t\tel.className += ' ' + s.cssClasses.clear;\n\n\t\t\t\tstyle.display = '';\n\t\t\t\t// Add base P tag and do auto focus, give it a min height if el has one\n\t\t\t\tstyle.minHeight = el.clientHeight + 'px';\n\t\t\t\tstyle.minWidth = el.clientWidth + 'px';\n\n\t\t\t\tif ( s.mode !== Medium.inlineMode && s.mode !== Medium.inlineRichMode ) {\n\t\t\t\t\tthis.setupContents();\n\n\t\t\t\t\tif (childCount === 0 && el.firstChild) {\n\t\t\t\t\t\tcursor.set(this, 0, el.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tel.placeHolderActive = true;\n\t\t} else if (el.placeHolderActive) {\n\t\t\tel.placeHolderActive = false;\n\t\t\tstyle.display = 'none';\n\t\t\tel.className = utils.trim(el.className.replace(s.cssClasses.clear, ''));\n\t\t\tthis.setupContents();\n\t\t}\n\t},\n\n\t/**\n\t * Cleans element\n\t * @param {HtmlElement} [el] default is settings.element\n\t */\n\tclean: function (el) {\n\n\t\t/*\n\t\t * Deletes invalid nodes\n\t\t * Removes Attributes\n\t\t */\n\t\tvar s = this.settings,\n\t\t\tplaceholderClass = s.cssClasses.placeholder,\n\t\t\tattributesToRemove = (s.attributes || {}).remove || [],\n\t\t\ttags = s.tags || {},\n\t\t\tonlyOuter = tags.outerLevel || null,\n\t\t\tonlyInner = tags.innerLevel || null,\n\t\t\touterSwitch = {},\n\t\t\tinnerSwitch = {},\n\t\t\tparagraphTag = (tags.paragraph || '').toUpperCase(),\n\t\t\thtml = this.html,\n\t\t\tattr,\n\t\t\ttext,\n\t\t\tj;\n\n\t\tel = el || s.element;\n\n\t\tif (s.mode === Medium.inlineRichMode) {\n\t\t\tonlyOuter = s.tags.innerLevel;\n\t\t}\n\n\t\tif (onlyOuter !== null) {\n\t\t\tfor (j = 0; j < onlyOuter.length; j++) {\n\t\t\t\touterSwitch[onlyOuter[j].toUpperCase()] = true;\n\t\t\t}\n\t\t}\n\n\t\tif (onlyInner !== null) {\n\t\t\tfor (j = 0; j < onlyInner.length; j++) {\n\t\t\t\tinnerSwitch[onlyInner[j].toUpperCase()] = true;\n\t\t\t}\n\t\t}\n\n\t\tutils.traverseAll(el, {\n\t\t\telement: function(child, i, depth, parent) {\n\t\t\t\tvar nodeName = child.nodeName,\n\t\t\t\t\tshouldDelete = true,\n\t\t\t\t\tattrValue;\n\n\t\t\t\t// Remove attributes\n\t\t\t\tfor (j = 0; j < attributesToRemove.length; j++) {\n\t\t\t\t\tattr = attributesToRemove[j];\n\t\t\t\t\tif (child.hasAttribute(attr)) {\n\t\t\t\t\t\tattrValue = child.getAttribute(attr);\n\t\t\t\t\t\tif (attrValue !== placeholderClass && (!attrValue.match('medium-') && attr === 'class')) {\n\t\t\t\t\t\t\tchild.removeAttribute(attr);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( onlyOuter === null && onlyInner === null ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (depth  === 1 && outerSwitch[nodeName] !== undefined) {\n\t\t\t\t\tshouldDelete = false;\n\t\t\t\t} else if (depth > 1 && innerSwitch[nodeName] !== undefined) {\n\t\t\t\t\tshouldDelete = false;\n\t\t\t\t}\n\n\t\t\t\t// Convert tags or delete\n\t\t\t\tif (shouldDelete) {\n\t\t\t\t\tif (w.getComputedStyle(child, null).getPropertyValue('display') === 'block') {\n\t\t\t\t\t\tif (paragraphTag.length > 0 && paragraphTag !== nodeName) {\n\t\t\t\t\t\t\tutils.changeTag(child, paragraphTag);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (depth > 1) {\n\t\t\t\t\t\t\twhile (parent.childNodes.length > i) {\n\t\t\t\t\t\t\t\tparent.parentNode.insertBefore(parent.lastChild, parent.nextSibling);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswitch (nodeName) {\n\t\t\t\t\t\t\tcase 'BR':\n\t\t\t\t\t\t\t\tif (child === child.parentNode.lastChild) {\n\t\t\t\t\t\t\t\t\tif (child === child.parentNode.firstChild) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttext = d.createTextNode(\"\");\n\t\t\t\t\t\t\t\t\ttext.innerHTML = '&nbsp';\n\t\t\t\t\t\t\t\t\tchild.parentNode.insertBefore(text, child);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\twhile (child.firstChild !== null) {\n\t\t\t\t\t\t\t\t\tchild.parentNode.insertBefore(child.firstChild, child);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tutils.detachNode(child);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t *\n\t * @param {String|Object} html\n\t * @param {Function} [callback]\n\t * @param {Boolean} [skipChangeEvent]\n\t * @returns {Medium}\n\t */\n\tinsertHtml: function (html, callback, skipChangeEvent) {\n\t\tvar result = (new Medium.Html(this, html))\n\t\t\t.insert(this.settings.beforeInsertHtml),\n\t\t\tlastElement = result[result.length - 1];\n\n\t\tif (skipChangeEvent === true) {\n\t\t\tutils.triggerEvent(this.element, \"change\");\n\t\t}\n\n\t\tif (callback) {\n\t\t\tcallback.apply(result);\n\t\t}\n\n\t\tswitch (lastElement.nodeName) {\n\t\t\t//lists need their last child selected if it exists\n\t\t\tcase 'UL':\n\t\t\tcase 'OL':\n\t\t\tcase 'DL':\n\t\t\t\tif (lastElement.lastChild !== null) {\n\t\t\t\t\tthis.cursor.moveCursorToEnd(lastElement.lastChild);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthis.cursor.moveCursorToEnd(lastElement);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\taddTag: function (tag, shouldFocus, isEditable, afterElement) {\n\t\tif (!this.settings.beforeAddTag(tag, shouldFocus, isEditable, afterElement)) {\n\t\t\tvar newEl = d.createElement(tag),\n\t\t\t\ttoFocus;\n\n\t\t\tif (typeof isEditable !== \"undefined\" && isEditable === false) {\n\t\t\t\tnewEl.contentEditable = false;\n\t\t\t}\n\t\t\tif (newEl.innerHTML.length == 0) {\n\t\t\t\tnewEl.innerHTML = ' ';\n\t\t\t}\n\t\t\tif (afterElement && afterElement.nextSibling) {\n\t\t\t\tafterElement.parentNode.insertBefore(newEl, afterElement.nextSibling);\n\t\t\t\ttoFocus = afterElement.nextSibling;\n\n\t\t\t} else {\n\t\t\t\tthis.element.appendChild(newEl);\n\t\t\t\ttoFocus = this.lastChild();\n\t\t\t}\n\n\t\t\tif (shouldFocus) {\n\t\t\t\tthis.cache.focusedElement = toFocus;\n\t\t\t\tthis.cursor.set(this, 0, toFocus);\n\t\t\t}\n\t\t\treturn newEl;\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t *\n\t * @param {String} tagName\n\t * @param {Object} [attributes]\n\t * @param {Boolean} [skipChangeEvent]\n\t * @returns {Medium}\n\t */\n\tinvokeElement: function (tagName, attributes, skipChangeEvent) {\n\t\tvar settings = this.settings,\n\t\t\tremove = attributes.remove || [];\n\n\t\tattributes = attributes || {};\n\n\t\tswitch (settings.mode) {\n\t\t\tcase Medium.inlineMode:\n\t\t\tcase Medium.partialMode:\n\t\t\t\treturn this;\n\t\t\tdefault:\n\t\t}\n\n\t\t//invoke works off class, so if it isn't there, we just add it\n\t\tif (remove.length > 0) {\n\t\t\tif (!utils.arrayContains(settings, 'class')) {\n\t\t\t\tremove.push('class');\n\t\t\t}\n\t\t}\n\n\t\t(new Medium.Element(this, tagName, attributes))\n\t\t\t.invoke(this.settings.beforeInvokeElement);\n\n\t\tif (skipChangeEvent === true) {\n\t\t\tutils.triggerEvent(this.element, \"change\");\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t *\n\t * @param {String} [value]\n\t * @returns {Medium}\n\t */\n\tvalue: function (value) {\n\t\tif (typeof value !== 'undefined') {\n\t\t\tthis.element.innerHTML = value;\n\n\t\t\tthis.clean();\n\t\t\tthis.placeholders();\n\n\t\t\tthis.makeUndoable();\n\t\t} else {\n\t\t\treturn this.element.innerHTML;\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Focus on element\n\t * @returns {Medium}\n\t */\n\tfocus: function () {\n\t\tvar el = this.element;\n\t\tel.focus();\n\t\treturn this;\n\t},\n\n\t/**\n\t * Select all text\n\t * @returns {Medium}\n\t */\n\tselect: function () {\n\t\tutils.selectNode(Medium.activeElement = this.element);\n\t\treturn this;\n\t},\n\n\tisActive: function () {\n\t\treturn (Medium.activeElement === this.element);\n\t},\n\n\tsetupContents: function () {\n\t\tvar el = this.element,\n\t\t\tchildren = el.children,\n\t\t\tchildNodes = el.childNodes,\n\t\t\tinitialParagraph,\n\t\t\ts = this.settings;\n\n\t\tif (\n\t\t\t!s.tags.paragraph\n\t\t\t|| children.length > 0\n\t\t\t|| s.mode === Medium.inlineMode\n\t\t\t|| s.mode === Medium.inlineRichMode\n\t\t) {\n\t\t\treturn Medium.Utilities;\n\t\t}\n\n\t\t//has content, but no children\n\t\tif (childNodes.length > 0) {\n\t\t\tinitialParagraph = d.createElement(s.tags.paragraph);\n\t\t\tif (el.innerHTML.match('^[&]nbsp[;]')) {\n\t\t\t\tel.innerHTML = el.innerHTML.substring(6, el.innerHTML.length - 1);\n\t\t\t}\n\t\t\tinitialParagraph.innerHTML = el.innerHTML;\n\t\t\tel.innerHTML = '';\n\t\t\tel.appendChild(initialParagraph);\n\t\t\t//this.cursor.set(this, initialParagraph.innerHTML.length, initialParagraph);\n\t\t} else {\n\t\t\tinitialParagraph = d.createElement(s.tags.paragraph);\n\t\t\tinitialParagraph.innerHTML = '&nbsp;';\n\t\t\tel.appendChild(initialParagraph);\n\t\t\tthis.cursor.set(this, 0, el.firstChild);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tdestroy: function () {\n\t\tvar el = this.element,\n\t\t\tsettings = this.settings,\n\t\t\tplaceholder = this.placeholder || null;\n\n\t\tif (placeholder !== null && placeholder.setup && placeholder.parentNode !== null) {\n\t\t\t//remove placeholder\n\t\t\tplaceholder.parentNode.removeChild(placeholder);\n\t\t\tdelete el.placeHolderActive;\n\t\t}\n\n\t\t//remove contenteditable\n\t\tel.removeAttribute('contenteditable');\n\n\t\t//remove classes\n\t\tel.className = utils.trim(el.className\n\t\t\t.replace(settings.cssClasses.editor, '')\n\t\t\t.replace(settings.cssClasses.clear, '')\n\t\t\t.replace(settings.cssClasses.editor + '-' + settings.mode, ''));\n\n\t\t//remove events\n\t\tthis.action.destroy();\n\n\t\tif (this.settings.drag) {\n\t\t\tthis.drag.destroy();\n\t\t}\n\t},\n\n\t// Clears the element and restores the placeholder\n\tclear: function () {\n\t\tthis.element.innerHTML = '';\n\t\tthis.placeholders();\n\t},\n\n\t/**\n\t * Splits content in medium element at cursor\n\t * @returns {DocumentFragment|null}\n\t */\n\tsplitAtCaret: function() {\n\t\tif (!this.isActive()) return null;\n\n\t\tvar selector = (w.getSelection || d.selection),\n\t\t\tsel = selector(),\n\t\t\toffset = sel.focusOffset,\n\t\t\tnode = sel.focusNode,\n\t\t\tel = this.element,\n\t\t\trange = d.createRange(),\n\t\t\tendRange = d.createRange(),\n\t\t\tcontents;\n\n\t\trange.setStart(node, offset);\n\t\tendRange.selectNodeContents(el);\n\t\trange.setEnd(endRange.endContainer, endRange.endOffset);\n\n\t\tcontents = range.extractContents();\n\n\t\treturn contents;\n\t},\n\n\t/**\n\t * Deletes selection\n\t */\n\tdeleteSelection: function() {\n\t\tif (!this.isActive()) return;\n\n\t\tvar sel = rangy.getSelection(),\n\t\t\trange;\n\n\t\tif (sel.rangeCount > 0) {\n\t\t\trange = sel.getRangeAt(0);\n\t\t\trange.deleteContents();\n\t\t}\n\t},\n\n\tlastChild: function () {\n\t\treturn this.element.lastChild;\n\t},\n\n\tbold: function () {\n\n\t\tswitch (this.settings.mode) {\n\t\t\tcase Medium.partialMode:\n\t\t\tcase Medium.inlineMode:\n\t\t\t\treturn this;\n\t\t}\n\n\t\t(new Medium.Element(this, 'bold'))\n\t\t\t.setClean(false)\n\t\t\t.invoke(this.settings.beforeInvokeElement);\n\n\t\treturn this;\n\t},\n\tunderline: function () {\n\t\tswitch (this.settings.mode) {\n\t\t\tcase Medium.partialMode:\n\t\t\tcase Medium.inlineMode:\n\t\t\t\treturn this;\n\t\t}\n\n\t\t(new Medium.Element(this, 'underline'))\n\t\t\t.setClean(false)\n\t\t\t.invoke(this.settings.beforeInvokeElement);\n\n\t\treturn this;\n\t},\n\titalicize: function () {\n\t\tswitch (this.settings.mode) {\n\t\t\tcase Medium.partialMode:\n\t\t\tcase Medium.inlineMode:\n\t\t\t\treturn this;\n\t\t}\n\n\t\t(new Medium.Element(this, 'italic'))\n\t\t\t.setClean(false)\n\t\t\t.invoke(this.settings.beforeInvokeElement);\n\n\t\treturn this;\n\t},\n\tquote: function () {\n\n\t\treturn this;\n\t},\n\t/**\n\t *\n\t * @param {String} [text]\n\t * @returns {boolean}\n\t */\n\tpaste: function (text) {\n\t\tvar value = this.value(),\n\t\t\tlength = value.length,\n\t\t\ttotalLength,\n\t\t\tsettings = this.settings,\n\t\t\tselection = this.selection,\n\t\t\tel = this.element,\n\t\t\tmedium = this,\n\t\t\tpostPaste = function(text) {\n\t\t\t\ttext = text || '';\n\t\t\t\tif (text.length > 0) {\n\t\t\t\t\tel.focus();\n\t\t\t\t\tMedium.activeElement = el;\n\t\t\t\t\tselection.restoreSelection(sel);\n\n\t\t\t\t\t//encode the text first\n\t\t\t\t\ttext = utils.encodeHtml(text);\n\n\t\t\t\t\t//cut down it's length\n\t\t\t\t\ttotalLength = text.length + length;\n\t\t\t\t\tif (settings.maxLength > 0 && totalLength > settings.maxLength) {\n\t\t\t\t\t\ttext = text.substring(0, settings.maxLength - length);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (settings.mode !== Medium.inlineMode) {\n\t\t\t\t\t\ttext = text.replace(/\\n/g, '<br>');\n\t\t\t\t\t}\n\n\t\t\t\t\t(new Medium.Html(medium, text))\n\t\t\t\t\t\t.setClean(false)\n\t\t\t\t\t\t.insert(settings.beforeInsertHtml, true);\n\n\t\t\t\t\tmedium.clean();\n\t\t\t\t\tmedium.placeholders();\n\t\t\t\t}\n\t\t\t};\n\n\t\tmedium.makeUndoable();\n\n\t\tif (text !== undefined) {\n\t\t\tpostPaste(text);\n\t\t} else if (settings.pasteAsText) {\n\t\t\tvar sel = selection.saveSelection();\n\n\t\t\tutils.pasteHook(this, postPaste);\n\t\t} else {\n\t\t\tsetTimeout(function() {\n\t\t\t\tmedium.clean();\n\t\t\t\tmedium.placeholders();\n\t\t\t}, 20);\n\t\t}\n\t\treturn true;\n\t},\n\tundo: function() {\n\t\tvar undoable = this.undoable,\n\t\t\tstack = undoable.stack,\n\t\t\tcan = stack.canUndo();\n\n\t\tif (can) {\n\t\t\tstack.undo();\n\t\t}\n\n\t\treturn this;\n\t},\n\tredo: function() {\n\t\tvar undoable = this.undoable,\n\t\t\tstack = undoable.stack,\n\t\t\tcan = stack.canRedo();\n\n\t\tif (can) {\n\t\t\tstack.redo();\n\t\t}\n\n\t\treturn this;\n\t}\n};\n\n//Modes\nMedium.inlineMode = 'inline';\nMedium.partialMode = 'partial';\nMedium.richMode = 'rich';\nMedium.inlineRichMode = 'inlineRich';\nMedium.Messages = {\n\tpastHere: 'Paste Here'\n};\n\nMedium.defaultSettings = {\n\telement: null,\n\tmodifier: 'auto',\n\tplaceholder: \"\",\n\tautofocus: false,\n\tautoHR: true,\n\tmode: Medium.richMode,\n\tmaxLength: -1,\n\tmodifiers: {\n\t\t'b': 'bold',\n\t\t'i': 'italicize',\n\t\t'u': 'underline'\n\t},\n\ttags: {\n\t\t'break': 'br',\n\t\t'horizontalRule': 'hr',\n\t\t'paragraph': 'p',\n\t\t'outerLevel': ['pre', 'blockquote', 'figure'],\n\t\t'innerLevel': ['a', 'b', 'u', 'i', 'img', 'strong']\n\t},\n\tcssClasses: {\n\t\teditor: 'Medium',\n\t\tpasteHook: 'Medium-paste-hook',\n\t\tplaceholder: 'Medium-placeholder',\n\t\tclear: 'Medium-clear'\n\t},\n\tattributes: {\n\t\tremove: ['style', 'class']\n\t},\n\tpasteAsText: true,\n\tbeforeInvokeElement: function () {\n\t\t//this = Medium.Element\n\t},\n\tbeforeInsertHtml: function () {\n\t\t//this = Medium.Html\n\t},\n\tmaxLengthReached: function (element) {\n\t\t//element\n\t},\n\tbeforeAddTag: function (tag, shouldFocus, isEditable, afterElement) {\n\t},\n        onBlur: function() {},\n        onFocus: function() {},\n\tkeyContext: null,\n\tdrag: false\n};\n(function(Medium, w, d) {\n\t\"use strict\";\n\n\tfunction isEditable(e) {\n\t\tif (e.hasOwnProperty('target') && e.target.getAttribute('contenteditable') === 'false') {\n\t\t\tutils.preventDefaultEvent(e);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tMedium.Action = function (medium) {\n\t\tthis.medium = medium;\n\n\t\tthis.handledEvents = {\n\t\t\tkeydown: null,\n\t\t\tkeyup: null,\n\t\t\tblur: null,\n\t\t\tfocus: null,\n\t\t\tpaste: null,\n\t\t\tclick: null\n\t\t};\n\n\t};\n\tMedium.Action.prototype = {\n\t\tsetup: function () {\n\t\t\tthis\n\t\t\t\t.handleFocus()\n\t\t\t\t.handleBlur()\n\t\t\t\t.handleKeyDown()\n\t\t\t\t.handleKeyUp()\n\t\t\t\t.handlePaste()\n\t\t\t\t.handleClick();\n\t\t},\n\t\tdestroy: function() {\n\t\t\tvar el = this.medium.element;\n\n\t\t\tutils\n\t\t\t\t.removeEvent(el, 'focus', this.handledEvents.focus)\n\t\t\t\t.removeEvent(el, 'blur', this.handledEvents.blur)\n\t\t\t\t.removeEvent(el, 'keydown', this.handledEvents.keydown)\n\t\t\t\t.removeEvent(el, 'keyup', this.handledEvents.keyup)\n\t\t\t\t.removeEvent(el, 'paste', this.handledEvents.paste)\n\t\t\t\t.removeEvent(el, 'click', this.handledEvents.click);\n\t\t},\n\t\thandleFocus: function () {\n\n\t\t\tvar medium = this.medium,\n\t\t\t\tel = medium.element;\n\n\t\t\tutils.addEvent(el, 'focus', this.handledEvents.focus = function(e) {\n\t\t\t\te = e || w.event;\n\n\t\t\t\tif (!isEditable(e)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tMedium.activeElement = el;\n                                medium.cache.originalVal = e.target.textContent;\n                                medium.settings.onFocus(e);\n\n\t\t\t\tmedium.placeholders();\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandleBlur: function () {\n\n\t\t\tvar medium = this.medium,\n\t\t\t\tel = medium.element;\n\n\t\t\tutils.addEvent(el, 'blur', this.handledEvents.blur = function(e) {\n\t\t\t\te = e || w.event;\n\n\t\t\t\tif (Medium.activeElement === el) {\n\t\t\t\t\tMedium.activeElement = null;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tmedium.settings.onBlur(e);\n\t\t\t\tmedium.placeholders();\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandleKeyDown: function () {\n\n\t\t\tvar action = this,\n\t\t\t\tmedium = this.medium,\n\t\t\t\tsettings = medium.settings,\n\t\t\t\tcache = medium.cache,\n\t\t\t\tel = medium.element;\n\n\t\t\tutils.addEvent(el, 'keydown', this.handledEvents.keydown = function(e) {\n\t\t\t\te = e || w.event;\n\n\t\t\t\tif (!isEditable(e)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar keepEvent = true;\n\n\t\t\t\t//in Chrome it sends out this event before every regular event, not sure why\n\t\t\t\tif (e.keyCode === 229) return;\n\n\t\t\t\tutils.isCommand(settings, e, function () {\n\t\t\t\t\tcache.cmd = true;\n\t\t\t\t}, function () {\n\t\t\t\t\tcache.cmd = false;\n\t\t\t\t});\n\n\t\t\t\tutils.isShift(e, function () {\n\t\t\t\t\tcache.shift = true;\n\t\t\t\t}, function () {\n\t\t\t\t\tcache.shift = false;\n\t\t\t\t});\n\n\t\t\t\tutils.isModifier(settings, e, function (cmd) {\n\t\t\t\t\tif (cache.cmd) {\n\n\t\t\t\t\t\tif ( (settings.mode === Medium.inlineMode) || (settings.mode === Medium.partialMode) ) {\n\t\t\t\t\t\t\tutils.preventDefaultEvent(e);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar cmdType = typeof cmd;\n\t\t\t\t\t\tvar fn = null;\n\t\t\t\t\t\tif (cmdType === \"function\") {\n\t\t\t\t\t\t\tfn = cmd;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfn = medium[cmd];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tkeepEvent = fn.call(medium, e);\n\n\t\t\t\t\t\tif (keepEvent === false || keepEvent === medium) {\n\t\t\t\t\t\t\tutils.preventDefaultEvent(e);\n\t\t\t\t\t\t\tutils.stopPropagation(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\n\t\t\t\tif (settings.maxLength !== -1) {\n\t\t\t\t\tvar len = utils.text(el).length,\n\t\t\t\t\t\thasSelection = false,\n\t\t\t\t\t\tselection = w.getSelection(),\n\t\t\t\t\t\tisSpecial = utils.isSpecial(e),\n\t\t\t\t\t\tisNavigational = utils.isNavigational(e);\n\n\t\t\t\t\tif (selection) {\n\t\t\t\t\t\thasSelection = !selection.isCollapsed;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isSpecial || isNavigational) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (len >= settings.maxLength && !hasSelection) {\n\t\t\t\t\t\tsettings.maxLengthReached(el);\n\t\t\t\t\t\tutils.preventDefaultEvent(e);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tswitch (e.keyCode) {\n                                        case key['enter']:\n                                                if (action.enterKey(e) === false) {\n                                                        utils.preventDefaultEvent(e);\n                                                }\n                                                break;\n                                        case key['escape']:\n                                                if (action.escKey(e) === false) {\n\t\t\t\t\t\t\tutils.preventDefaultEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase key['backspace']:\n\t\t\t\t\tcase key['delete']:\n\t\t\t\t\t\taction.backspaceOrDeleteKey(e);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn keepEvent;\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandleKeyUp: function () {\n\n\t\t\tvar action = this,\n\t\t\t\tmedium = this.medium,\n\t\t\t\tsettings = medium.settings,\n\t\t\t\tcache = medium.cache,\n\t\t\t\tcursor = medium.cursor,\n\t\t\t\tel = medium.element;\n\n\t\t\tutils.addEvent(el, 'keyup', this.handledEvents.keyup = function(e) {\n\t\t\t\te = e || w.event;\n\n\t\t\t\tif (!isEditable(e)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tutils.isCommand(settings, e, function () {\n\t\t\t\t\tcache.cmd = false;\n\t\t\t\t}, function () {\n\t\t\t\t\tcache.cmd = true;\n\t\t\t\t});\n\t\t\t\tmedium.clean();\n\t\t\t\tmedium.placeholders();\n\n\t\t\t\t//here we have a key context, so if you need to create your own object within a specific context it is doable\n\t\t\t\tvar keyContext;\n\t\t\t\tif (\n\t\t\t\t\tsettings.keyContext !== null\n\t\t\t\t\t&& ( keyContext = settings.keyContext[e.keyCode] )\n\t\t\t\t) {\n\t\t\t\t\tvar el = cursor.parent();\n\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tkeyContext.call(medium, e, el);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\taction.preserveElementFocus();\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandlePaste: function() {\n\t\t\tvar medium = this.medium,\n\t\t\t\tel = medium.element,\n\t\t\t\ttext,\n\t\t\t\ti,\n\t\t\t\tmax,\n\t\t\t\tdata,\n\t\t\t\tcD,\n\t\t\t\ttype,\n\t\t\t\ttypes;\n\n\t\t\tutils.addEvent(el, 'paste', this.handledEvents.paste = function(e) {\n\t\t\t\te = e || w.event;\n\n\t\t\t\tif (!isEditable(e)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ti = 0;\n\t\t\t\tutils.preventDefaultEvent(e);\n\t\t\t\ttext = '';\n\t\t\t\tcD = e.clipboardData;\n\n\t\t\t\tif (cD && (data = cD.getData)) {\n\t\t\t\t\ttypes = cD.types;\n\t\t\t\t\tmax = types.length;\n\t\t\t\t\tfor (i = 0; i < max; i++) {\n\t\t\t\t\t\ttype = types[i];\n\t\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\t\t//case 'text/html':\n\t\t\t\t\t\t\t//\treturn medium.paste(cD.getData('text/html'));\n\t\t\t\t\t\t\tcase 'text/plain':\n\t\t\t\t\t\t\t\treturn medium.paste(cD.getData('text/plain'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmedium.paste();\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandleClick: function() {\n\t\t\tvar medium = this.medium,\n\t\t\t\tel = medium.element,\n\t\t\t\tcursor = medium.cursor;\n\n\t\t\tutils.addEvent(el, 'click', this.handledEvents.click = function(e) {\n\t\t\t\tif (!isEditable(e)) {\n\t\t\t\t\tcursor.caretToAfter(e.target);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n                escKey: function (e) {\n                    var medium = this.medium,\n                        el = medium.element,\n                        settings = medium.settings,\n                        cache = medium.cache;\n\n                    if( settings.mode === Medium.inlineMode || settings.mode === Medium.inlineRichMode ){\n                        e.target.textContent = cache.originalVal;\n                        \n                        if (settings.element.blur) {\n                            settings.element.blur();\n                        } else if (settings.element.onblur) {\n                            settings.element.onblur();\n                        }   \n                        return false;\n                    }\n                },\n\t\tenterKey: function (e) {\n\t\t\tvar medium = this.medium,\n\t\t\t\tel = medium.element,\n\t\t\t\tsettings = medium.settings,\n\t\t\t\tcache = medium.cache,\n\t\t\t\tcursor = medium.cursor;\n\n\t\t\tif( settings.mode === Medium.inlineMode || settings.mode === Medium.inlineRichMode ){\n                            if (settings.element.blur) {\n                                settings.element.blur();\n                            } else if (settings.element.onblur) {\n                                settings.element.onblur();\n                            }\t\n                            return false;\n\t\t\t}\n\n\t\t\tif (cache.shift) {\n\t\t\t\tif (settings.tags['break']) {\n\t\t\t\t\tmedium.addTag(settings.tags['break'], true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar focusedElement = utils.atCaret(medium) || {},\n\t\t\t\t\tchildren = el.children,\n\t\t\t\t\tlastChild = focusedElement === el.lastChild ? el.lastChild : null,\n\t\t\t\t\tmakeHR,\n\t\t\t\t\tsecondToLast,\n\t\t\t\t\tparagraph;\n\n\t\t\t\tif (\n\t\t\t\t\tlastChild\n\t\t\t\t\t&& lastChild !== el.firstChild\n\t\t\t\t\t&& settings.autoHR\n\t\t\t\t\t&& settings.mode !== Medium.partialMode\n\t\t\t\t\t&& settings.tags.horizontalRule\n\t\t\t\t) {\n\n\t\t\t\t\tutils.preventDefaultEvent(e);\n\n\t\t\t\t\tmakeHR =\n\t\t\t\t\t\tutils.text(lastChild) === \"\"\n\t\t\t\t\t\t&& lastChild.nodeName.toLowerCase() === settings.tags.paragraph;\n\n\t\t\t\t\tif (makeHR && children.length >= 2) {\n\t\t\t\t\t\tsecondToLast = children[ children.length - 2 ];\n\n\t\t\t\t\t\tif (secondToLast.nodeName.toLowerCase() === settings.tags.horizontalRule) {\n\t\t\t\t\t\t\tmakeHR = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (makeHR) {\n\t\t\t\t\t\tmedium.addTag(settings.tags.horizontalRule, false, true, focusedElement);\n\t\t\t\t\t\tfocusedElement = focusedElement.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((paragraph = medium.addTag(settings.tags.paragraph, true, null, focusedElement)) !== null) {\n\t\t\t\t\t\tparagraph.innerHTML = '';\n\t\t\t\t\t\tcursor.set(medium, 0, paragraph);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tbackspaceOrDeleteKey: function (e) {\n\t\t\tvar medium = this.medium,\n\t\t\t\tcursor = medium.cursor,\n\t\t\t\tsettings = medium.settings,\n\t\t\t\tel = medium.element;\n\n\t\t\tif (settings.onBackspaceOrDelete !== undefined) {\n\t\t\t\tvar result = settings.onBackspaceOrDelete.call(medium, e, el);\n\n\t\t\t\tif (result) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (el.lastChild === null) return;\n\n\t\t\tvar lastChild = el.lastChild,\n\t\t\t\tbeforeLastChild = lastChild.previousSibling,\n\t\t\t\tanchorNode = rangy.getSelection().anchorNode;\n\n\t\t\tif (\n\t\t\t\tlastChild\n\t\t\t\t&& settings.tags.horizontalRule\n\t\t\t\t&& lastChild.nodeName.toLocaleLowerCase() === settings.tags.horizontalRule\n\t\t\t) {\n\t\t\t\tel.removeChild(lastChild);\n\t\t\t} else if (\n\t\t\t\tlastChild\n\t\t\t\t&& beforeLastChild\n\t\t\t\t&& utils.text(lastChild).length < 1\n\n\t\t\t\t&& beforeLastChild.nodeName.toLowerCase() === settings.tags.horizontalRule\n\t\t\t\t&& lastChild.nodeName.toLowerCase() === settings.tags.paragraph\n\t\t\t) {\n\t\t\t\tel.removeChild(lastChild);\n\t\t\t\tel.removeChild(beforeLastChild);\n\t\t\t} else if (\n\t\t\t\tel.childNodes.length === 1\n\t\t\t\t&& lastChild\n\t\t\t\t&& !utils.text(lastChild).length\n\t\t\t) {\n\t\t\t\tutils.preventDefaultEvent(e);\n\t\t\t\tmedium.setupContents();\n\t\t\t}\n\t\t\telse if ( anchorNode && anchorNode === el ) {\n\t\t\t\tmedium.deleteSelection();\n\t\t\t\tmedium.setupContents();\n\t\t\t\tcursor.set(medium, 0, el.firstChild);\n\t\t\t}\n\t\t},\n\t\tpreserveElementFocus: function () {\n\t\t\t// Fetch node that has focus\n\t\t\tvar anchorNode = w.getSelection ? w.getSelection().anchorNode : document.activeElement;\n\t\t\tif (anchorNode) {\n\t\t\t\tvar medium = this.medium,\n\t\t\t\t\tcache = medium.cache,\n\t\t\t\t\tel = medium.element,\n\t\t\t\t\ts = medium.settings,\n\t\t\t\t\tcur = anchorNode.parentNode,\n\t\t\t\t\tchildren = el.children,\n\t\t\t\t\tdiff = cur !== cache.focusedElement,\n\t\t\t\t\telementIndex = 0,\n\t\t\t\t\ti;\n\n\t\t\t\t// anchorNode is our target if element is empty\n\t\t\t\tif (cur === s.element) {\n\t\t\t\t\tcur = anchorNode;\n\t\t\t\t}\n\n\t\t\t\t// Find our child index\n\t\t\t\tfor (i = 0; i < children.length; i++) {\n\t\t\t\t\tif (cur === children[i]) {\n\t\t\t\t\t\telementIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Focused element is different\n\t\t\t\tif (diff) {\n\t\t\t\t\tcache.focusedElement = cur;\n\t\t\t\t\tcache.focusedElementIndex = elementIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n})(Medium, w, d);\n(function(Medium) {\n\t\"use strict\";\n\n\tMedium.Cache = function () {\n\t\tthis.initialized = false;\n\t\tthis.cmd = false;\n\t\tthis.focusedElement = null;\n                this.originalVal = null;\n\t};\n\n})(Medium);\n(function(Medium) {\n\t\"use strict\";\n\t/*\n\t * Handle Cursor Logic\n\t */\n\tMedium.Cursor = function (medium) {\n\t\tthis.medium = medium;\n\t};\n\tMedium.Cursor.prototype = {\n\t\tset: function (pos, el) {\n\t\t\tvar range;\n\n\t\t\tif (d.createRange) {\n\t\t\t\tvar selection = w.getSelection(),\n\t\t\t\t\tlastChild = this.medium.lastChild(),\n\t\t\t\t\tlength = utils.text(lastChild).length - 1,\n\t\t\t\t\ttoModify = el ? el : lastChild,\n\t\t\t\t\ttheLength = ((typeof pos !== 'undefined') && (pos !== null) ? pos : length);\n\n\t\t\t\trange = d.createRange();\n\t\t\t\trange.setStart(toModify, theLength);\n\t\t\t\trange.collapse(true);\n\t\t\t\tselection.removeAllRanges();\n\t\t\t\tselection.addRange(range);\n\t\t\t} else {\n\t\t\t\trange = d.body.createTextRange();\n\t\t\t\trange.moveToElementText(el);\n\t\t\t\trange.collapse(false);\n\t\t\t\trange.select();\n\t\t\t}\n\t\t},\n\t\t//http://davidwalsh.name/caret-end\n\t\tmoveCursorToEnd: function (el) {\n\t\t\t//get the browser selection object - it may or may not have a selected range\n\t\t\tvar selection = rangy.getSelection(),\n\n\t\t\t\t//create a range object to set the caret positioning for\n\t\t\t\trange = rangy.createRange();\n\n\n\t\t\t//set the caret after the start node and at the end of the end node\n\t\t\t//Note: the end is set using endNode.length when the node is of the text type\n\t\t\t//and it is set using childNodes.length when the end node is of the element type\n\t\t\trange.setStartAfter(el);\n\t\t\trange.setEnd(el, el.length || el.childNodes.length);\n\n\t\t\t//apply this range to the selection object\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(range);\n\t\t},\n\t\tmoveCursorToAfter: function (el) {\n\t\t\tvar sel = rangy.getSelection();\n\t\t\tif (sel.rangeCount) {\n\t\t\t\tvar range = sel.getRangeAt(0);\n\t\t\t\trange.collapse(false);\n\t\t\t\trange.collapseAfter(el);\n\t\t\t\tsel.setSingleRange(range);\n\t\t\t}\n\t\t},\n\t\tparent: function () {\n\t\t\tvar target = null, range;\n\n\t\t\tif (w.getSelection) {\n\t\t\t\trange = w.getSelection().getRangeAt(0);\n\t\t\t\ttarget = range.commonAncestorContainer;\n\n\t\t\t\ttarget = (target.nodeType === 1\n\t\t\t\t\t? target\n\t\t\t\t\t: target.parentNode\n\t\t\t\t);\n\t\t\t}\n\n\t\t\telse if (d.selection) {\n\t\t\t\ttarget = d.selection.createRange().parentElement();\n\t\t\t}\n\n\t\t\tif (target.tagName == 'SPAN') {\n\t\t\t\ttarget = target.parentNode;\n\t\t\t}\n\n\t\t\treturn target;\n\t\t},\n\t\tcaretToBeginning: function (el) {\n\t\t\tthis.set(0, el);\n\t\t},\n\t\tcaretToEnd: function (el) {\n\t\t\tthis.moveCursorToEnd(el);\n\t\t},\n\t\tcaretToAfter: function (el) {\n\t\t\tthis.moveCursorToAfter(el);\n\t\t}\n\t};\n})(Medium);\n(function(Medium) {\n\t\"use strict\";\n\tMedium.Drag = function(medium) {\n\t\tthis.medium = medium;\n\n\t\tvar that = this,\n\t\t\ticonSrc = this.iconSrc.replace(/[{][{]([a-zA-Z]+)[}][}]/g, function(ignore, match) {\n\t\t\t\tif (that.hasOwnProperty(match)) {\n\t\t\t\t\treturn that[match];\n\t\t\t\t}\n\n\t\t\t\treturn ignore;\n\t\t\t}),\n\t\t\ticon = this.icon = d.createElement('img');\n\n\t\ticon.className = this.buttonClass;\n\t\ticon.setAttribute('contenteditable', 'false');\n\t\ticon.setAttribute('src', iconSrc);\n\n\t\tthis.hide();\n\t\tthis.element = null;\n\t\tthis.protectedElement = null;\n\t\tthis.handledEvents = {\n\t\t\tdragstart: null,\n\t\t\tdragend: null,\n\t\t\tmouseover: null,\n\t\t\tmouseout: null,\n\t\t\tmousemove: null\n\t\t};\n\t};\n\tMedium.Drag.prototype = {\n\t\telementClass: 'Medium-focused',\n\t\tbuttonClass: 'Medium-drag',\n\n\t\t//thank you ascii for not including a directional icon (boo!)\n\t\t//http://www.flaticon.com/free-icon/pointer-crosstree_10119\n\t\ticonSrc: 'data:image/svg+xml;utf8,\\\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"21.424px\" height=\"21.424px\" viewBox=\"0 0 21.424 21.424\" style=\"enable-background:new 0 0 21.424 21.424;\" xml:space=\"preserve\">\\\n\t<g>\\\n\t\t<g>\\\n\t\t\t<path style=\"fill:{{iconColor}};\" d=\"M13.616,17.709L13.616,17.709h0.781l-3.686,3.715l-3.685-3.715h0.781l0,0H13.616z M13.616,17.709 M14.007,17.709 M12.555,19.566 M8.87,19.566 M7.418,17.709 M7.809,17.709 M10.712,17.709\"/>\\\n\t\t\t<path style=\"fill:{{iconColor}};\" d=\"M13.616,3.715L13.616,3.715h0.781L10.712,0L7.027,3.715h0.781l0,0H13.616z M13.616,3.715 M14.007,3.715 M12.555,1.858 M8.87,1.858 M7.418,3.715 M7.809,3.715 M10.712,3.715\"/>\\\n\t\t\t<path style=\"fill:{{iconColor}};\" d=\"M3.716,13.616L3.716,13.616v0.781L0,10.712l3.716-3.685v0.781l0,0V13.616z M3.716,13.616 M3.716,14.007 M1.858,12.555 M1.858,8.87 M3.716,7.417 M3.716,7.808 M3.716,10.712\"/>\\\n\t\t\t<path style=\"fill:{{iconColor}};\" d=\"M17.709,13.616L17.709,13.616v0.781l3.715-3.685l-3.715-3.685v0.781l0,0V13.616z M17.709,13.616 M17.709,14.007 M19.566,12.555 M19.566,8.87 M17.709,7.417 M17.709,7.808 M17.709,10.712\"/>\\\n\t\t</g>\\\n\t\t<path style=\"fill-rule:evenodd;clip-rule:evenodd;fill:{{iconColor}};\" d=\"M10.712,6.608c2.267,0,4.104,1.838,4.104,4.104 c0,2.266-1.837,4.104-4.104,4.104c-2.266,0-4.104-1.837-4.104-4.104C6.608,8.446,8.446,6.608,10.712,6.608L10.712,6.608z M10.712,7.515c-1.765,0-3.196,1.432-3.196,3.197s1.432,3.197,3.196,3.197c1.766,0,3.197-1.432,3.197-3.197 S12.478,7.515,10.712,7.515z\"/>\\\n\t</g>\\\n</svg>',\n\t\ticonColor: '#231F20',\n\t\tsetup: function() {\n\t\t\tthis\n\t\t\t\t.handleDragstart()\n\t\t\t\t.handleDragend()\n\t\t\t\t.handleMouseover()\n\t\t\t\t.handleMouseout()\n\t\t\t\t.handleMousemove();\n      return this;\n\t\t},\n\t\tdestroy: function() {\n\t\t\tutils\n\t\t\t\t.removeEvent(this.icon, 'dragstart', this.handledEvents.dragstart)\n\t\t\t\t.removeEvent(this.icon, 'dragend', this.handledEvents.dragend)\n\t\t\t\t.removeEvent(this.icon, 'mouseover', this.handledEvents.mouseover)\n\t\t\t\t.removeEvent(this.icon, 'mouseout', this.handledEvents.mouseout)\n\t\t\t\t.removeEvent(this.medium.element, 'mousemove', this.handledEvents.mousemove);\n      return this;\n\t\t},\n\t\thide: function() {\n\t\t\tutils.hide(this.icon);\n      return this;\n\t\t},\n\t\thandleDragstart: function() {\n\n\t\t\tvar me = this;\n\n\t\t\tutils.addEvent(this.icon, 'dragstart', this.handledEvents.dragstart = function(e) {\n\t\t\t\tif (me.protectedElement !== null) return;\n\n\t\t\t\te = e || w.event;\n\n\t\t\t\tme.protectedElement = utils.detachNode(me.element);\n\n\t\t\t\tme.icon.style.opacity = 0.00;\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandleDragend: function() {\n\t\t\tvar me = this;\n\n\t\t\tutils.addEvent(this.icon, 'dragend',  this.handledEvents.dragend = d.body.ondragend = function(e) {\n\t\t\t\tif (me.protectedElement === null) return;\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tme.cleanCanvas();\n\t\t\t\t\tme.protectedElement = null;\n\t\t\t\t}, 1);\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandleMouseover: function() {\n\t\t\tvar me = this;\n\n\t\t\tutils.addEvent(this.icon, 'mouseover', this.handledEvents.mouseover = function(e) {\n\t\t\t\tif (me.protectedElement !== null) return;\n\n\t\t\t\tutils\n\t\t\t\t\t.stopPropagation(e)\n\t\t\t\t\t.addClass(me.element, me.elementClass);\n\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandleMouseout: function() {\n\t\t\tvar me = this;\n\n\t\t\tutils.addEvent(this.icon, 'mouseout', this.handledEvents.mouseout = function(e) {\n\t\t\t\tif (me.protectedElement !== null) return;\n\n\t\t\t\tutils\n\t\t\t\t\t.stopPropagation(e)\n\t\t\t\t\t.removeClass(me.element, me.elementClass);\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\thandleMousemove: function() {\n\t\t\tvar me = this;\n\n\t\t\tutils.addEvent(this.medium.element, 'mousemove', this.handledEvents.mousemove = function(e) {\n\t\t\t\te = e || w.event;\n\t\t\t\tvar target = e.target || {};\n\n\t\t\t\tif (target.getAttribute('contenteditable') === 'false') {\n\t\t\t\t\tme.show(target);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\tshow: function(el) {\n\t\t\tif (el === this.icon && this.protectedElement === null) return;\n\n\t\t\tthis.element = el;\n\n\t\t\tvar style = this.icon.style,\n\t\t\t\tleft = el.offsetLeft,\n\t\t\t\ttop = el.offsetTop;\n\n\t\t\tel.dragIcon = this.icon;\n\t\t\tel.parentNode.appendChild(this.icon);\n\n\t\t\tstyle.opacity = 1;\n\t\t\tstyle.left = left + 'px';\n\t\t\tstyle.top = top + 'px';\n\n\t\t\tutils.show(this.icon);\n      return this;\n\t\t},\n\t\tcleanCanvas: function() {\n\t\t\tvar target,\n\t\t\t\tinserted = false,\n\t\t\t\tbuttons = d.getElementsByClassName(this.buttonClass);\n\n\t\t\tthis.icon.style.opacity = 1;\n\n\t\t\twhile (buttons.length > 0) {\n\t\t\t\tif (utils.isVisible(target = buttons[0])) {\n\t\t\t\t\tif (!inserted) {\n\t\t\t\t\t\ttarget.parentNode.insertBefore(this.element, target);\n\t\t\t\t\t\tinserted = true;\n\t\t\t\t\t}\n\t\t\t\t\tutils.detachNode(target);\n\t\t\t\t}\n\t\t\t}\n\t\t\tutils.detachNode(this.icon);\n      return this;\n\t\t}\n\t};\n})(Medium);\n(function(Medium) {\n\t\"use strict\";\n\n\t/**\n\t * @param {Medium} medium\n\t * @param {String} tagName\n\t * @param {Object} [attributes]\n\t * @constructor\n\t */\n\tMedium.Element = function (medium, tagName, attributes) {\n\t\tthis.medium = medium;\n\t\tthis.element = medium.element;\n\n\t\tswitch (tagName.toLowerCase()) {\n\t\t\tcase 'bold':\n\t\t\t\tthis.tagName = 'b';\n\t\t\t\tbreak;\n\t\t\tcase 'italic':\n\t\t\t\tthis.tagName = 'i';\n\t\t\t\tbreak;\n\t\t\tcase 'underline':\n\t\t\t\tthis.tagName = 'u';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.tagName = tagName;\n\t\t}\n\n\t\tthis.attributes = attributes || {};\n\t\tthis.clean = true;\n\t};\n\n\tMedium.Element.prototype = {\n\t\t/**\n\t\t * @methodOf Medium.Element\n\t\t * @param {Function} [fn]\n\t\t */\n\t\tinvoke: function (fn) {\n\t\t\tif (Medium.activeElement === this.element) {\n\t\t\t\tif (fn) {\n\t\t\t\t\tfn.apply(this);\n\t\t\t\t}\n\n\t\t\t\tvar\n\t\t\t\t\tattr = this.attributes,\n\t\t\t\t\ttagName = this.tagName.toLowerCase(),\n\t\t\t\t\tapplier,\n\t\t\t\t\tcl;\n\n\t\t\t\tif (attr.className !== undefined) {\n\t\t\t\t\tcl = (attr.className.split[' '] || [attr.className]).shift();\n\t\t\t\t\tdelete attr.className;\n\t\t\t\t} else {\n\t\t\t\t\tcl = 'medium-' + tagName;\n\t\t\t\t}\n\n\t\t\t\tapplier = rangy.createClassApplier(cl, {\n\t\t\t\t\telementTagName: tagName,\n\t\t\t\t\telementAttributes: this.attributes\n\t\t\t\t});\n\n\t\t\t\tthis.medium.makeUndoable();\n\n\t\t\t\tapplier.toggleSelection(w);\n\n\t\t\t\tif (this.clean) {\n\t\t\t\t\t//cleanup\n\t\t\t\t\tthis.medium.clean();\n\t\t\t\t\tthis.medium.placeholders();\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {Boolean} clean\n\t\t * @returns {Medium.Element}\n\t\t */\n\t\tsetClean: function (clean) {\n\t\t\tthis.clean = clean;\n\t\t\treturn this;\n\t\t}\n\t};\n})(Medium);\n(function(Medium) {\n\t\"use strict\";\n\n\t/**\n\t * @constructor\n\t * @param {Medium} medium\n\t * @param {String|HtmlElement} html\n\t */\n\tMedium.Html = function (medium, html) {\n\t\tthis.html = html;\n\t\tthis.medium = medium;\n\t\tthis.clean = true;\n\t\tthis.injector = new Medium.Injector();\n\t};\n\n\tMedium.Html.prototype = {\n\t\t/**\n\t\t * @methodOf Medium.Html\n\t\t * @param {Function} [fn]\n\t\t * @param {Boolean} [selectInserted]\n\t\t * @returns {HtmlElement}\n\t\t */\n\t\tinsert: function (fn, selectInserted) {\n\t\t\tif (Medium.activeElement === this.medium.element) {\n\t\t\t\tif (fn) {\n\t\t\t\t\tfn.apply(this);\n\t\t\t\t}\n\n\t\t\t\tvar inserted = this.injector.inject(this.html, selectInserted);\n\n\t\t\t\tif (this.clean) {\n\t\t\t\t\t//cleanup\n\t\t\t\t\tthis.medium.clean();\n\t\t\t\t\tthis.medium.placeholders();\n\t\t\t\t}\n\n\t\t\t\tthis.medium.makeUndoable();\n\n\t\t\t\treturn inserted;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @methodOf Medium.Html\n\t\t * @param clean\n\t\t * @returns {Medium.Html}\n\t\t */\n\t\tsetClean: function (clean) {\n\t\t\tthis.clean = clean;\n\t\t\treturn this;\n\t\t}\n\t};\n\n})(Medium);\n(function(Medium) {\n\t\"use strict\";\n\n\t/**\n\t *\n\t * @constructor\n\t */\n\tMedium.Injector = function () {\n\t};\n\n\tMedium.Injector.prototype = {\n\t\t/**\n\t\t * @methodOf Medium.Injector\n\t\t * @param {String|HtmlElement} htmlRaw\n\t\t * @returns {[HtmlElement|Node]}\n\t\t */\n\t\tinject: function (htmlRaw) {\n\t\t\tvar nodes = [],\n\t\t\t\thtml,\n\t\t\t\tisConverted = false;\n\n\t\t\tif (typeof htmlRaw === 'string') {\n\t\t\t\tvar htmlConverter = d.createElement('div');\n\t\t\t\thtmlConverter.innerHTML = htmlRaw;\n\t\t\t\thtml = htmlConverter.childNodes;\n\t\t\t\tisConverted = true;\n\t\t\t} else {\n\t\t\t\thtml = htmlRaw;\n\t\t\t}\n\n\t\t\tthis.insertHTML('<span id=\"Medium-wedge\"></span>');\n\n\t\t\tvar wedge = d.getElementById('Medium-wedge'),\n\t\t\t\tparent = wedge.parentNode,\n\t\t\t\ti = 0;\n\n\t\t\twedge.removeAttribute('id');\n\n\t\t\tif (isConverted) {\n\t\t\t\t//make an array of elements that are about to be inserted, can't use html because they will\n\t\t\t\twhile (i < html.length) {\n\t\t\t\t\tnodes.push(html[i]);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t\twhile (html.length > 0) {\n          parent.insertBefore(html[0], wedge);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnodes.push(html);\n\t\t\t\tparent.insertBefore(html, wedge);\n\t\t\t}\n\t\t\tparent.removeChild(wedge);\n\t\t\twedge = null;\n\n\t\t\treturn nodes;\n\t\t},\n\n\t\t//Thank you Tim Down (super uber genius): http://stackoverflow.com/questions/6690752/insert-html-at-caret-in-a-contenteditable-div/6691294#6691294\n\t\tinsertHTML: function (html, selectPastedContent) {\n\t\t\tvar sel, range;\n\t\t\tif (w.getSelection) {\n\t\t\t\t// IE9 and non-IE\n\t\t\t\tsel = w.getSelection();\n\t\t\t\tif (sel.getRangeAt && sel.rangeCount) {\n\t\t\t\t\trange = sel.getRangeAt(0);\n\t\t\t\t\trange.deleteContents();\n\n\t\t\t\t\t// Range.createContextualFragment() would be useful here but is\n\t\t\t\t\t// only relatively recently standardized and is not supported in\n\t\t\t\t\t// some browsers (IE9, for one)\n\t\t\t\t\tvar el = d.createElement(\"div\");\n\t\t\t\t\tel.innerHTML = html;\n\t\t\t\t\tvar frag = d.createDocumentFragment(), node, lastNode;\n\t\t\t\t\twhile ((node = el.firstChild)) {\n\t\t\t\t\t\tlastNode = frag.appendChild(node);\n\t\t\t\t\t}\n\t\t\t\t\tvar firstNode = frag.firstChild;\n\t\t\t\t\trange.insertNode(frag);\n\n\t\t\t\t\t// Preserve the selection\n\t\t\t\t\tif (lastNode) {\n\t\t\t\t\t\trange = range.cloneRange();\n\t\t\t\t\t\trange.setStartAfter(lastNode);\n\t\t\t\t\t\tif (selectPastedContent) {\n\t\t\t\t\t\t\trange.setStartBefore(firstNode);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trange.collapse(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\t\tsel.addRange(range);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if ((sel = d.selection) && sel.type != \"Control\") {\n\t\t\t\t// IE < 9\n\t\t\t\tvar originalRange = sel.createRange();\n\t\t\t\toriginalRange.collapse(true);\n\t\t\t\tsel.createRange().pasteHTML(html);\n\t\t\t\tif (selectPastedContent) {\n\t\t\t\t\trange = sel.createRange();\n\t\t\t\t\trange.setEndPoint(\"StartToStart\", originalRange);\n\t\t\t\t\trange.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n})(Medium);\n(function(Medium) {\n\t\"use strict\";\n\n\t/*\n\t * Handle Selection Logic\n\t */\n\tMedium.Selection = function () {\n\t};\n\tMedium.Selection.prototype = {\n\t\tsaveSelection: function () {\n\t\t\tif (w.getSelection) {\n\t\t\t\tvar sel = w.getSelection();\n\t\t\t\tif (sel.rangeCount > 0) {\n\t\t\t\t\treturn sel.getRangeAt(0);\n\t\t\t\t}\n\t\t\t} else if (d.selection && d.selection.createRange) { // IE\n\t\t\t\treturn d.selection.createRange();\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\trestoreSelection: function (range) {\n\t\t\tif (range) {\n\t\t\t\tif (w.getSelection) {\n\t\t\t\t\tvar sel = w.getSelection();\n\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t} else if (d.selection && range.select) { // IE\n\t\t\t\t\trange.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n})(Medium);(function(Medium) {\n\t\"use strict\";\n\tMedium.Toolbar = function(medium, buttons) {\n\t\tthis.medium = medium;\n\n\t\tvar elementCreator = d.createElement('div');\n\n\t\telementCreator.innerHTML = this.html;\n\n\t\tthis.buttons = buttons;\n\t\tthis.element = elementCreator.children[0];\n\t\td.body.appendChild(this.element);\n\t\tthis.active = false;\n\t\tthis.busy = true;\n\n\t\tthis.handledEvents = {\n\t\t\tscroll: null,\n\t\t\tmouseup: null,\n\t\t\tkeyup: null\n\t\t};\n\t};\n\n\tMedium.Toolbar.prototype = {\n\t\tfixedClass: 'Medium-toolbar-fixed',\n\t\tshowClass: 'Medium-toolbar-show',\n\t\thideClass: 'Medium-toolbar-hide',\n\n\t\thtml:\n\t\t\t'<div class=\"Medium-toolbar\">\\\n\t\t\t\t<div class=\"Medium-tail-outer\">\\\n\t\t\t\t\t<div class=\"Medium-tail-inner\"></div>\\\n\t\t\t\t</div>\\\n\t\t\t\t<div id=\"Medium-buttons\"></div>\\\n\t\t\t\t<table id=\"Medium-options\">\\\n\t\t\t\t\t<tbody>\\\n\t\t\t\t\t\t<tr>\\\n\t\t\t\t\t\t</tr>\\\n\t\t\t\t\t</tbody>\\\n\t\t\t\t</table>\\\n\t\t\t</div>',\n\n\t\tsetup: function() {\n\t\t\tthis\n\t\t\t\t.handleScroll()\n\t\t\t\t.handleMouseup()\n\t\t\t\t.handleKeyup();\n\n\t\t},\n\t\tdestroy: function() {\n\t\t\tutils\n\t\t\t\t.removeEvent(w, 'scroll', this.handledEvents.scroll)\n\t\t\t\t.removeEvent(d, 'mouseup', this.handledEvents.mouseup)\n\t\t\t\t.removeEvent(d, 'keyup', this.handledEvents.keyup);\n\t\t},\n\t\thandleScroll: function() {\n\t\t\tvar me = this;\n\n\t\t\tutils.addEvent(w, 'scroll', this.handledEvents.scroll = function() {\n\t\t\t\tif (me.active) {\n\t\t\t\t\tme.goToSelection();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandleMouseup: function() {\n\t\t\tvar me = this;\n\n\t\t\tutils.addEvent(d, 'mouseup', this.handledEvents.mouseup = function() {\n\t\t\t\tif (Medium.activeElement === me.medium.element && !me.busy) {\n\t\t\t\t\tme.goToSelection();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\thandleKeyup: function() {\n\t\t\tvar me = this;\n\n\t\t\tutils.addEvent(d, 'keyup', this.handledEvents.keyup = function() {\n\t\t\t\tif (Medium.activeElement === me.medium.element && !me.busy) {\n\t\t\t\t\tme.goToSelection();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\t\tgoToSelection: function() {\n\t\t\tvar high = this.getHighlighted(),\n\t\t\t\ty = high.boundary.top - 5,\n\t\t\t\tel = this.element,\n\t\t\t\tstyle = el.style;\n\n\t\t\tif (w.scrollTop > 0) {\n\t\t\t\tutils.addClass(el, this.fixedClass);\n\t\t\t} else {\n\t\t\t\tutils.removeClass(el, this.fixedClass);\n\t\t\t}\n\n\t\t\tif (high !== null) {\n\t\t\t\tif (high.range.startOffset === high.range.endOffset && !high.text) {\n\t\t\t\t\tutils\n\t\t\t\t\t\t.removeClass(el, this.showClass)\n\t\t\t\t\t\t.addClass(el, this.hideClass);\n\n\t\t\t\t\tthis.active = false;\n\t\t\t\t} else {\n\t\t\t\t\tutils\n\t\t\t\t\t\t.removeClass(el, this.hideClass)\n\t\t\t\t\t\t.removeClass(el, this.showClass);\n\n\t\t\t\t\tstyle.opacity = 0.01;\n\t\t\t\t\tutils.addClass(el, this.showClass);\n\t\t\t\t\tstyle.opacity = 1;\n\t\t\t\t\tstyle.top = (y - 65) + \"px\";\n\t\t\t\t\tstyle.left = (\n\t\t\t\t\t(\n\t\t\t\t\thigh.boundary.left + (high.boundary.width / 2)\n\t\t\t\t\t)\n\t\t\t\t\t- (el.clientWidth / 2)\n\t\t\t\t\t) + \"px\";\n\n\t\t\t\t\tthis.active = true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetHighlighted: function() {\n\t\t\tvar selection = w.getSelection(),\n\t\t\t\trange = (selection.anchorNode ? selection.getRangeAt(0) : false);\n\n\t\t\tif (!range) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tselection : selection,\n\t\t\t\trange : range,\n\t\t\t\ttext : utils.trim(range.toString()),\n\t\t\t\tboundary : range.getBoundingClientRect()\n\t\t\t};\n\t\t}\n\t};\n})(Medium);\n(function(Medium) {\n\t\"use strict\";\n\n\t/**\n\t * @param {Medium} medium\n\t * @constructor\n\t */\n\tMedium.Undoable = function (medium) {\n\t\tvar me = this,\n\t\t\telement = medium.settings.element,\n\t\t\ttimer,\n\t\t\tstartValue,\n\t\t\tstack = new Undo.Stack(),\n\t\t\tEditCommand = Undo.Command.extend({\n\t\t\t\tconstructor: function (oldValue, newValue) {\n\t\t\t\t\tthis.oldValue = oldValue;\n\t\t\t\t\tthis.newValue = newValue;\n\t\t\t\t},\n\t\t\t\texecute: function () {\n\t\t\t\t},\n\t\t\t\tundo: function () {\n\t\t\t\t\telement.innerHTML = this.oldValue;\n\t\t\t\t\tmedium.canUndo = stack.canUndo();\n\t\t\t\t\tmedium.canRedo = stack.canRedo();\n\t\t\t\t\tmedium.dirty = stack.dirty();\n\t\t\t\t},\n\t\t\t\tredo: function () {\n\t\t\t\t\telement.innerHTML = this.newValue;\n\t\t\t\t\tmedium.canUndo = stack.canUndo();\n\t\t\t\t\tmedium.canRedo = stack.canRedo();\n\t\t\t\t\tmedium.dirty = stack.dirty();\n\t\t\t\t}\n\t\t\t}),\n\t\t\tmakeUndoable = function (isInit) {\n\t\t\t\tvar newValue = element.innerHTML;\n\n\t\t\t\tif (isInit) {\n\t\t\t\t\tstartValue = element.innerHTML;\n\t\t\t\t\tstack.execute(new EditCommand(startValue, startValue));\n\t\t\t\t}\n\n\t\t\t\t// ignore meta key presses\n\t\t\t\telse if (newValue != startValue) {\n\n\t\t\t\t\tif (!me.movingThroughStack) {\n\t\t\t\t\t\t// this could try and make a diff instead of storing snapshots\n\t\t\t\t\t\tstack.execute(new EditCommand(startValue, newValue));\n\t\t\t\t\t\tstartValue = newValue;\n\t\t\t\t\t\tmedium.dirty = stack.dirty();\n\t\t\t\t\t}\n\n\t\t\t\t\tutils.triggerEvent(medium.settings.element, \"change\");\n\t\t\t\t}\n\t\t\t};\n\n\t\tthis.medium = medium;\n\t\tthis.timer = timer;\n\t\tthis.stack = stack;\n\t\tthis.makeUndoable = makeUndoable;\n\t\tthis.EditCommand = EditCommand;\n\t\tthis.movingThroughStack = false;\n\n\t\tutils\n\t\t\t.addEvent(element, 'keyup', function (e) {\n\t\t\t\tif (e.ctrlKey || e.keyCode === key.z) {\n\t\t\t\t\tutils.preventDefaultEvent(e);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// a way too simple algorithm in place of single-character undo\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = setTimeout(function () {\n\t\t\t\t\tmakeUndoable();\n\t\t\t\t}, 250);\n\t\t\t})\n\n\t\t\t.addEvent(element, 'keydown', function (e) {\n\t\t\t\tif (!e.ctrlKey || e.keyCode !== key.z) {\n\t\t\t\t\tme.movingThroughStack = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tutils.preventDefaultEvent(e);\n\n\t\t\t\tme.movingThroughStack = true;\n\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\tstack.canRedo() && stack.redo()\n\t\t\t\t} else {\n\t\t\t\t\tstack.canUndo() && stack.undo();\n\t\t\t\t}\n\t\t\t});\n\t};\n})(Medium);Medium.Utilities = {\n  /*\n   * Keyboard Interface events\n   */\n  isCommand: function (s, e, fnTrue, fnFalse) {\n    if ((s.modifier === 'ctrl' && e.ctrlKey ) ||\n      (s.modifier === 'cmd' && e.metaKey ) ||\n      (s.modifier === 'auto' && (e.ctrlKey || e.metaKey) )\n    ) {\n      return fnTrue.call();\n    } else {\n      return fnFalse.call();\n    }\n  },\n  isShift: function (e, fnTrue, fnFalse) {\n    if (e.shiftKey) {\n      return fnTrue.call();\n    } else {\n      return fnFalse.call();\n    }\n  },\n  isModifier: function (settings, e, fn) {\n    var cmd = settings.modifiers[e.keyCode];\n    if (cmd) {\n      return fn.call(null, cmd);\n    }\n    return false;\n  },\n  special: (function () {\n    var special = {};\n\n    special[key['backspace']] = true;\n    special[key['shift']] = true;\n    special[key['ctrl']] = true;\n    special[key['alt']] = true;\n    special[key['delete']] = true;\n    special[key['cmd']] = true;\n\n    return special;\n  })(),\n  isSpecial: function (e) {\n    return typeof Medium.Utilities.special[e.keyCode] !== 'undefined';\n  },\n  navigational: (function () {\n    var navigational = {};\n\n    navigational[key['upArrow']] = true;\n    navigational[key['downArrow']] = true;\n    navigational[key['leftArrow']] = true;\n    navigational[key['rightArrow']] = true;\n\n    return navigational;\n  })(),\n  isNavigational: function (e) {\n    return typeof Medium.Utilities.navigational[e.keyCode] !== 'undefined';\n  },\n\n  /**\n   * @param element\n   * @param eventNamesString\n   * @param func\n   * @returns Medium.Utilities\n   */\n  addEvents: function(element, eventNamesString, func) {\n    var i = 0,\n      eventName,\n      eventNames = eventNamesString.split(' '),\n      max = eventNames.length,\n      utils = Medium.Utilities;\n\n    for(;i < max; i++) {\n      eventName = eventNames[i];\n      if (eventName.length > 0) {\n        utils.addEvent(element, eventName, func);\n      }\n    }\n\n    return Medium.Utilities;\n  },\n  /*\n   * Handle Events\n   */\n  addEvent: function addEvent(element, eventName, func) {\n    if (element.addEventListener) {\n      element.addEventListener(eventName, func, false);\n    } else if (element.attachEvent) {\n      element.attachEvent(\"on\" + eventName, func);\n    } else {\n      element['on' + eventName] = func;\n    }\n\n    return Medium.Utilities;\n  },\n  removeEvent: function removeEvent(element, eventName, func) {\n    if (element.removeEventListener) {\n      element.removeEventListener(eventName, func, false);\n    } else if (element.detachEvent) {\n      element.detachEvent(\"on\" + eventName, func);\n    } else {\n      element['on' + eventName] = null;\n    }\n\n    return Medium.Utilities;\n  },\n  preventDefaultEvent: function (e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      e.returnValue = false;\n    }\n\n    return Medium.Utilities;\n  },\n  stopPropagation: function(e) {\n    e = e || w.event;\n    e.cancelBubble = true;\n\n    if (e.stopPropagation !== undefined) {\n      e.stopPropagation();\n    }\n\n    return Medium.Utilities;\n  },\n  isEventSupported: function (element, eventName) {\n    eventName = 'on' + eventName;\n    var el = d.createElement(element.tagName),\n      isSupported = (eventName in el);\n\n    if (!isSupported) {\n      el.setAttribute(eventName, 'return;');\n      isSupported = typeof el[eventName] == 'function';\n    }\n    el = null;\n    return isSupported;\n  },\n  triggerEvent: function (element, eventName) {\n    var e;\n    if (d.createEvent) {\n      e = d.createEvent(\"HTMLEvents\");\n      e.initEvent(eventName, true, true);\n      e.eventName = eventName;\n      element.dispatchEvent(e);\n    } else {\n      e = d.createEventObject();\n      element.fireEvent(\"on\" + eventName, e);\n    }\n\n    return Medium.Utilities;\n  },\n\n  deepExtend: function (destination, source) {\n    var property,\n      propertyValue;\n\n    for (property in source) if (source.hasOwnProperty(property)) {\n      propertyValue = source[property];\n      if (\n        propertyValue !== undefined\n        && propertyValue !== null\n        && propertyValue.constructor !== undefined\n        && propertyValue.constructor === Object\n      ) {\n        destination[property] = destination[property] || {};\n        Medium.Utilities.deepExtend(destination[property], propertyValue);\n      } else {\n        destination[property] = propertyValue;\n      }\n    }\n    return destination;\n  },\n  /*\n   * This is a Paste Hook. When the user pastes\n   * content, this ultimately converts it into\n   * plain text before inserting the data.\n   */\n  pasteHook: function (medium, fn) {\n    medium.makeUndoable();\n\n    var tempEditable = d.createElement('div'),\n      el = medium.element,\n      existingValue,\n      existingLength,\n      overallLength,\n      s = medium.settings,\n      value,\n      body = d.body,\n      bodyParent = body.parentNode,\n      scrollTop = bodyParent.scrollTop,\n      scrollLeft = bodyParent.scrollLeft;\n\n    tempEditable.className = s.cssClasses.pasteHook;\n    tempEditable.setAttribute('contenteditable', true);\n\n    body.appendChild(tempEditable);\n    utils.selectNode(tempEditable);\n\n    bodyParent.scrollTop = scrollTop;\n    bodyParent.scrollLeft = scrollLeft;\n\n    setTimeout(function () {\n      value = utils.text(tempEditable);\n      el.focus();\n      if (s.maxLength > 0) {\n        existingValue = utils.text(el);\n        existingLength = existingValue.length;\n        overallLength = existingLength + value.length;\n        if (overallLength > existingLength) {\n          value = value.substring(0, s.maxLength - existingLength);\n        }\n      }\n      utils.detachNode( tempEditable );\n      bodyParent.scrollTop = scrollTop;\n      bodyParent.scrollLeft = scrollLeft;\n      fn(value);\n    }, 0);\n\n    return Medium.Utilities;\n  },\n  traverseAll: function(element, options, depth) {\n    var children = element.childNodes,\n      length = children.length,\n      i = 0,\n      node;\n\n    depth = depth || 1;\n\n    options = options || {};\n\n    if (length > 0) {\n      for(;i < length;i++) {\n        node = children[i];\n        switch (node.nodeType) {\n          case 1:\n            Medium.Utilities.traverseAll(node, options, depth + 1);\n            if (options.element !== undefined) options.element(node, i, depth, element);\n            break;\n          case 3:\n            if (options.fragment !== undefined) options.fragment(node, i, depth, element);\n        }\n\n        //length may change\n        length = children.length;\n        //if length did change, and we are at the last item, this causes infinite recursion, so if we are at the last item, then stop to prevent this\n        if (node === element.lastChild) {\n          i = length;\n        }\n      }\n    }\n    return Medium.Utilities;\n  },\n  trim: function (string) {\n    return string.replace(/^[\\s]+|\\s+$/g, '');\n  },\n  arrayContains: function(array, variable) {\n    var i = array.length;\n    while (i--) {\n      if (array[i] === variable) {\n        return true;\n      }\n    }\n    return false;\n  },\n  addClass: function(el, className) {\n    if (el.classList)\n      el.classList.add(className);\n    else\n      el.className += ' ' + className;\n\n    return Medium.Utilities;\n  },\n  removeClass: function(el, className) {\n    if (el.classList)\n      el.classList.remove(className);\n    else\n      el.className = el.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');\n    return Medium.Utilities;\n  },\n  hasClass: function(el, className) {\n    if (el.classList)\n      return el.classList.contains(className);\n    else\n      return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n  },\n  isHidden: function(el) {\n    return el.offsetWidth === 0 || el.offsetHeight === 0;\n  },\n  isVisible: function(el) {\n    return el.offsetWidth !== 0 || el.offsetHeight !== 0;\n  },\n  encodeHtml: function ( html ) {\n    return d.createElement( 'a' ).appendChild(\n      d.createTextNode( html ) ).parentNode.innerHTML;\n  },\n  text: function (node, val) {\n    if (val !== undefined) {\n      if (node === null) {\n        return this;\n      }\n      if (node.textContent !== undefined) {\n        node.textContent = val;\n      } else {\n        node.innerText = val;\n      }\n\n      return this;\n    }\n    else if (node === null) {\n      return this;\n    }\n    else if (node.innerText !== undefined) {\n      return utils.trim(node.innerText);\n    }\n\n    else if (node.textContent !== undefined) {\n      return utils.trim(node.textContent);\n    }\n    //document fragment\n    else if (node.data !== undefined) {\n      return utils.trim(node.data);\n    }\n\n    //for good measure\n    return '';\n  },\n  changeTag: function (oldNode, newTag) {\n    var newNode = d.createElement(newTag),\n      node,\n      nextNode;\n\n    node = oldNode.firstChild;\n    while (node) {\n      nextNode = node.nextSibling;\n      newNode.appendChild(node);\n      node = nextNode;\n    }\n\n    oldNode.parentNode.insertBefore(newNode, oldNode);\n    oldNode.parentNode.removeChild(oldNode);\n\n    return newNode;\n  },\n  detachNode: function (el) {\n    if (el.parentNode !== null) {\n      el.parentNode.removeChild(el);\n    }\n\n    return this;\n  },\n  selectNode: function(el) {\n    var range,\n      selection;\n\n    el.focus();\n\n    if (d.body.createTextRange) {\n      range = d.body.createTextRange();\n      range.moveToElementText(el);\n      range.select();\n    } else if (w.getSelection) {\n      selection = w.getSelection();\n      range = d.createRange();\n      range.selectNodeContents(el);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n\n    return this;\n  },\n  baseAtCaret: function (medium) {\n    if (!medium.isActive()) return null;\n\n    var sel = w.getSelection ? w.getSelection() : document.selection;\n\n    if (sel.rangeCount) {\n      var selRange = sel.getRangeAt(0),\n        container = selRange.endContainer;\n\n      switch (container.nodeType) {\n        case 3:\n          if (container.data && container.data.length != selRange.endOffset) return false;\n          break;\n      }\n\n      return container;\n    }\n\n    return null;\n  },\n  atCaret: function (medium) {\n    var container = this.baseAtCaret(medium) || {},\n      el = medium.element;\n\n    if (container === false) return null;\n\n    while (container && container.parentNode !== el) {\n      container = container.parentNode;\n    }\n\n    if (container && container.nodeType == 1) {\n      return container;\n    }\n\n    return null;\n  },\n  hide: function(el) {\n    el.style.display = 'none';\n    return Medium.Utilities;\n  },\n  show: function(el) {\n    el.style.display = '';\n    return Medium.Utilities;\n  },\n  hideAnim: function(el) {\n    el.style.opacity = 1;\n    return Medium.Utilities;\n  },\n  showAnim: function(el) {\n    el.style.opacity = 0.01;\n    el.style.display = '';\n    return Medium.Utilities;\n  },\n\n  /**\n   *\n   * @param _window\n   * @returns {Medium.Utilities}\n   */\n  setWindow: function(_window) {\n    w = _window;\n\n    return Medium.Utilities;\n  },\n\n  /**\n   *\n   * @param _document\n   * @returns {Medium.Utilities}\n   */\n  setDocument: function(_document) {\n    d = _document;\n\n    return Medium.Utilities;\n  }\n};\nrangy.rangePrototype.insertNodeAtEnd = function (node) {\n\tvar range = this.cloneRange();\n\trange.collapse(false);\n\trange.insertNode(node);\n\trange.detach();\n\tthis.setEndAfter(node);\n};\n\n\t\t\treturn Medium;\n\t\t}()),\n\t\tutils = Medium.Utilities;\n\n\tif (typeof define === 'function' && define['amd']) {\n\t\tdefine(function () { return Medium; });\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = Medium;\n\t} else if (typeof this !== 'undefined') {\n\t\tthis.Medium = Medium;\n\t}\n\n}).call(this, window, document);\n"
        },
        {
          "name": "medium.min.js",
          "type": "blob",
          "size": 32.6611328125,
          "content": "(function(e,h){var g=e.rangy||null,c=e.Undo||null,f=e.Key={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capsLock:20,escape:27,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,\"delete\":46,\"0\":48,\"1\":49,\"2\":50,\"3\":51,\"4\":52,\"5\":53,\"6\":54,\"7\":55,\"8\":56,\"9\":57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindow:91,rightWindowKey:92,select:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numLock:144,scrollLock:145,semiColon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222},b=(function(){var d=function(q){var v=this,r=a.deepExtend({},d.defaultSettings),n=this.settings=a.deepExtend(r,q),k=new d.Cache(),t=new d.Selection(),o=new d.Action(this),u=new d.Cursor(this),s=new d.Undoable(this),m,l,p;for(p in r){if(r.hasOwnProperty(p)){if(typeof r[p]!==\"object\"&&r.hasOwnProperty(p)&&n.element.getAttribute(\"data-medium-\"+f)){l=n.element.getAttribute(\"data-medium-\"+f);if(l.toLowerCase()===\"false\"||l.toLowerCase()===\"true\"){l=l.toLowerCase()===\"true\"}n[p]=l}}}if(n.modifiers){for(p in n.modifiers){if(n.modifiers.hasOwnProperty(p)){if(typeof(f[p])!==\"undefined\"){n.modifiers[f[p]]=n.modifiers[p]}}}}if(n.keyContext){for(p in n.keyContext){if(n.keyContext.hasOwnProperty(p)){if(typeof(f[p])!==\"undefined\"){n.keyContext[f[p]]=n.keyContext[p]}}}}m=n.element;m.contentEditable=true;m.className+=(\" \"+n.cssClasses.editor)+(\" \"+n.cssClasses.editor+\"-\"+n.mode);n.tags=(n.tags||{});if(n.tags.outerLevel){n.tags.outerLevel=n.tags.outerLevel.concat([n.tags.paragraph,n.tags.horizontalRule])}this.settings=n;this.element=m;m.medium=this;this.action=o;this.cache=k;this.cursor=u;this.utils=a;this.selection=t;v.clean();v.placeholders();o.preserveElementFocus();this.dirty=false;this.undoable=s;this.makeUndoable=s.makeUndoable;if(n.drag){v.drag=new d.Drag(v);v.drag.setup()}o.setup();k.initialized=true;this.makeUndoable(true)};d.prototype={placeholders:function(){if(!e.getComputedStyle){return}var u=this.settings,p=this.placeholder||(this.placeholder=h.createElement(\"div\")),m=this.element,k=p.style,q=e.getComputedStyle(m,null),o=function(s){return q.getPropertyValue(s)},r=a.text(m),t=this.cursor,n=m.children.length,l=d.activeElement===m;m.placeholder=p;if(!l&&r.length<1&&n<2){if(m.placeHolderActive){return}if(!m.innerHTML.match(\"<\"+u.tags.paragraph)){m.innerHTML=\"\"}if(u.placeholder.length>0){if(!p.setup){p.setup=true;k.background=o(\"background\");k.backgroundColor=o(\"background-color\");k.fontSize=o(\"font-size\");k.color=q.color;k.marginTop=o(\"margin-top\");k.marginBottom=o(\"margin-bottom\");k.marginLeft=o(\"margin-left\");k.marginRight=o(\"margin-right\");k.paddingTop=o(\"padding-top\");k.paddingBottom=o(\"padding-bottom\");k.paddingLeft=o(\"padding-left\");k.paddingRight=o(\"padding-right\");k.borderTopWidth=o(\"border-top-width\");k.borderTopColor=o(\"border-top-color\");k.borderTopStyle=o(\"border-top-style\");k.borderBottomWidth=o(\"border-bottom-width\");k.borderBottomColor=o(\"border-bottom-color\");k.borderBottomStyle=o(\"border-bottom-style\");k.borderLeftWidth=o(\"border-left-width\");k.borderLeftColor=o(\"border-left-color\");k.borderLeftStyle=o(\"border-left-style\");k.borderRightWidth=o(\"border-right-width\");k.borderRightColor=o(\"border-right-color\");k.borderRightStyle=o(\"border-right-style\");p.className=u.cssClasses.placeholder+\" \"+u.cssClasses.placeholder+\"-\"+u.mode;p.innerHTML=\"<div>\"+u.placeholder+\"</div>\";m.parentNode.insertBefore(p,m)}m.className+=\" \"+u.cssClasses.clear;k.display=\"\";k.minHeight=m.clientHeight+\"px\";k.minWidth=m.clientWidth+\"px\";if(u.mode!==d.inlineMode&&u.mode!==d.inlineRichMode){this.setupContents();if(n===0&&m.firstChild){t.set(this,0,m.firstChild)}}}m.placeHolderActive=true}else{if(m.placeHolderActive){m.placeHolderActive=false;k.display=\"none\";m.className=a.trim(m.className.replace(u.cssClasses.clear,\"\"));this.setupContents()}}},clean:function(k){var w=this.settings,n=w.cssClasses.placeholder,o=(w.attributes||{}).remove||[],x=w.tags||{},r=x.outerLevel||null,t=x.innerLevel||null,y={},v={},q=(x.paragraph||\"\").toUpperCase(),m=this.html,p,u,l;k=k||w.element;if(w.mode===d.inlineRichMode){r=w.tags.innerLevel}if(r!==null){for(l=0;l<r.length;l++){y[r[l].toUpperCase()]=true}}if(t!==null){for(l=0;l<t.length;l++){v[t[l].toUpperCase()]=true}}a.traverseAll(k,{element:function(E,z,C,A){var D=E.nodeName,s=true,B;for(l=0;l<o.length;l++){p=o[l];if(E.hasAttribute(p)){B=E.getAttribute(p);if(B!==n&&(!B.match(\"medium-\")&&p===\"class\")){E.removeAttribute(p)}}}if(r===null&&t===null){return}if(C===1&&y[D]!==undefined){s=false}else{if(C>1&&v[D]!==undefined){s=false}}if(s){if(e.getComputedStyle(E,null).getPropertyValue(\"display\")===\"block\"){if(q.length>0&&q!==D){a.changeTag(E,q)}if(C>1){while(A.childNodes.length>z){A.parentNode.insertBefore(A.lastChild,A.nextSibling)}}}else{switch(D){case\"BR\":if(E===E.parentNode.lastChild){if(E===E.parentNode.firstChild){break}u=h.createTextNode(\"\");u.innerHTML=\"&nbsp\";E.parentNode.insertBefore(u,E);break}default:while(E.firstChild!==null){E.parentNode.insertBefore(E.firstChild,E)}a.detachNode(E);break}}}}})},insertHtml:function(l,o,m){var k=(new d.Html(this,l)).insert(this.settings.beforeInsertHtml),n=k[k.length-1];if(m===true){a.triggerEvent(this.element,\"change\")}if(o){o.apply(k)}switch(n.nodeName){case\"UL\":case\"OL\":case\"DL\":if(n.lastChild!==null){this.cursor.moveCursorToEnd(n.lastChild);break}default:this.cursor.moveCursorToEnd(n)}return this},addTag:function(l,k,m,o){if(!this.settings.beforeAddTag(l,k,m,o)){var p=h.createElement(l),n;if(typeof m!==\"undefined\"&&m===false){p.contentEditable=false}if(p.innerHTML.length==0){p.innerHTML=\" \"}if(o&&o.nextSibling){o.parentNode.insertBefore(p,o.nextSibling);n=o.nextSibling}else{this.element.appendChild(p);n=this.lastChild()}if(k){this.cache.focusedElement=n;this.cursor.set(this,0,n)}return p}return null},invokeElement:function(m,l,o){var n=this.settings,k=l.remove||[];l=l||{};switch(n.mode){case d.inlineMode:case d.partialMode:return this;default:}if(k.length>0){if(!a.arrayContains(n,\"class\")){k.push(\"class\")}}(new d.Element(this,m,l)).invoke(this.settings.beforeInvokeElement);if(o===true){a.triggerEvent(this.element,\"change\")}return this},value:function(k){if(typeof k!==\"undefined\"){this.element.innerHTML=k;this.clean();this.placeholders();this.makeUndoable()}else{return this.element.innerHTML}return this},focus:function(){var k=this.element;k.focus();return this},select:function(){a.selectNode(d.activeElement=this.element);return this},isActive:function(){return(d.activeElement===this.element)},setupContents:function(){var n=this.element,l=n.children,o=n.childNodes,k,m=this.settings;if(!m.tags.paragraph||l.length>0||m.mode===d.inlineMode||m.mode===d.inlineRichMode){return d.Utilities}if(o.length>0){k=h.createElement(m.tags.paragraph);if(n.innerHTML.match(\"^[&]nbsp[;]\")){n.innerHTML=n.innerHTML.substring(6,n.innerHTML.length-1)}k.innerHTML=n.innerHTML;n.innerHTML=\"\";n.appendChild(k)}else{k=h.createElement(m.tags.paragraph);k.innerHTML=\"&nbsp;\";n.appendChild(k);this.cursor.set(this,0,n.firstChild)}return this},destroy:function(){var l=this.element,k=this.settings,m=this.placeholder||null;if(m!==null&&m.setup&&m.parentNode!==null){m.parentNode.removeChild(m);delete l.placeHolderActive}l.removeAttribute(\"contenteditable\");l.className=a.trim(l.className.replace(k.cssClasses.editor,\"\").replace(k.cssClasses.clear,\"\").replace(k.cssClasses.editor+\"-\"+k.mode,\"\"));this.action.destroy();if(this.settings.drag){this.drag.destroy()}},clear:function(){this.element.innerHTML=\"\";this.placeholders()},splitAtCaret:function(){if(!this.isActive()){return null}var k=(e.getSelection||h.selection),q=k(),r=q.focusOffset,p=q.focusNode,m=this.element,l=h.createRange(),o=h.createRange(),n;l.setStart(p,r);o.selectNodeContents(m);l.setEnd(o.endContainer,o.endOffset);n=l.extractContents();return n},deleteSelection:function(){if(!this.isActive()){return}var l=g.getSelection(),k;if(l.rangeCount>0){k=l.getRangeAt(0);k.deleteContents()}},lastChild:function(){return this.element.lastChild},bold:function(){switch(this.settings.mode){case d.partialMode:case d.inlineMode:return this}(new d.Element(this,\"bold\")).setClean(false).invoke(this.settings.beforeInvokeElement);return this},underline:function(){switch(this.settings.mode){case d.partialMode:case d.inlineMode:return this}(new d.Element(this,\"underline\")).setClean(false).invoke(this.settings.beforeInvokeElement);return this},italicize:function(){switch(this.settings.mode){case d.partialMode:case d.inlineMode:return this}(new d.Element(this,\"italic\")).setClean(false).invoke(this.settings.beforeInvokeElement);return this},quote:function(){return this},paste:function(s){var p=this.value(),l=p.length,r,n=this.settings,q=this.selection,m=this.element,t=this,o=function(u){u=u||\"\";if(u.length>0){m.focus();d.activeElement=m;q.restoreSelection(k);u=a.encodeHtml(u);r=u.length+l;if(n.maxLength>0&&r>n.maxLength){u=u.substring(0,n.maxLength-l)}if(n.mode!==d.inlineMode){u=u.replace(/\\n/g,\"<br>\")}(new d.Html(t,u)).setClean(false).insert(n.beforeInsertHtml,true);t.clean();t.placeholders()}};t.makeUndoable();if(s!==undefined){o(s)}else{if(n.pasteAsText){var k=q.saveSelection();a.pasteHook(this,o)}else{setTimeout(function(){t.clean();t.placeholders()},20)}}return true},undo:function(){var l=this.undoable,k=l.stack,m=k.canUndo();if(m){k.undo()}return this},redo:function(){var l=this.undoable,k=l.stack,m=k.canRedo();if(m){k.redo()}return this}};d.inlineMode=\"inline\";d.partialMode=\"partial\";d.richMode=\"rich\";d.inlineRichMode=\"inlineRich\";d.Messages={pastHere:\"Paste Here\"};d.defaultSettings={element:null,modifier:\"auto\",placeholder:\"\",autofocus:false,autoHR:true,mode:d.richMode,maxLength:-1,modifiers:{b:\"bold\",i:\"italicize\",u:\"underline\"},tags:{\"break\":\"br\",horizontalRule:\"hr\",paragraph:\"p\",outerLevel:[\"pre\",\"blockquote\",\"figure\"],innerLevel:[\"a\",\"b\",\"u\",\"i\",\"img\",\"strong\"]},cssClasses:{editor:\"Medium\",pasteHook:\"Medium-paste-hook\",placeholder:\"Medium-placeholder\",clear:\"Medium-clear\"},attributes:{remove:[\"style\",\"class\"]},pasteAsText:true,beforeInvokeElement:function(){},beforeInsertHtml:function(){},maxLengthReached:function(k){},beforeAddTag:function(l,k,m,n){},onBlur:function(){},onFocus:function(){},keyContext:null,drag:false};(function(l,k,n){function m(o){if(o.hasOwnProperty(\"target\")&&o.target.getAttribute(\"contenteditable\")===\"false\"){a.preventDefaultEvent(o);return false}return true}l.Action=function(o){this.medium=o;this.handledEvents={keydown:null,keyup:null,blur:null,focus:null,paste:null,click:null}};l.Action.prototype={setup:function(){this.handleFocus().handleBlur().handleKeyDown().handleKeyUp().handlePaste().handleClick()},destroy:function(){var o=this.medium.element;a.removeEvent(o,\"focus\",this.handledEvents.focus).removeEvent(o,\"blur\",this.handledEvents.blur).removeEvent(o,\"keydown\",this.handledEvents.keydown).removeEvent(o,\"keyup\",this.handledEvents.keyup).removeEvent(o,\"paste\",this.handledEvents.paste).removeEvent(o,\"click\",this.handledEvents.click)},handleFocus:function(){var o=this.medium,p=o.element;a.addEvent(p,\"focus\",this.handledEvents.focus=function(q){q=q||k.event;if(!m(q)){return false}l.activeElement=p;o.cache.originalVal=q.target.textContent;o.settings.onFocus(q);o.placeholders()});return this},handleBlur:function(){var o=this.medium,p=o.element;a.addEvent(p,\"blur\",this.handledEvents.blur=function(q){q=q||k.event;if(l.activeElement===p){l.activeElement=null}o.settings.onBlur(q);o.placeholders()});return this},handleKeyDown:function(){var s=this,p=this.medium,r=p.settings,o=p.cache,q=p.element;a.addEvent(q,\"keydown\",this.handledEvents.keydown=function(z){z=z||k.event;if(!m(z)){return false}var u=true;if(z.keyCode===229){return}a.isCommand(r,z,function(){o.cmd=true},function(){o.cmd=false});a.isShift(z,function(){o.shift=true},function(){o.shift=false});a.isModifier(r,z,function(C){if(o.cmd){if((r.mode===l.inlineMode)||(r.mode===l.partialMode)){a.preventDefaultEvent(z);return false}var B=typeof C;var A=null;if(B===\"function\"){A=C}else{A=p[C]}u=A.call(p,z);if(u===false||u===p){a.preventDefaultEvent(z);a.stopPropagation(z)}return true}return false});if(r.maxLength!==-1){var t=a.text(q).length,v=false,y=k.getSelection(),x=a.isSpecial(z),w=a.isNavigational(z);if(y){v=!y.isCollapsed}if(x||w){return true}if(t>=r.maxLength&&!v){r.maxLengthReached(q);a.preventDefaultEvent(z);return false}}switch(z.keyCode){case f.enter:if(s.enterKey(z)===false){a.preventDefaultEvent(z)}break;case f.escape:if(s.escKey(z)===false){a.preventDefaultEvent(z)}break;case f.backspace:case f[\"delete\"]:s.backspaceOrDeleteKey(z);break}return u});return this},handleKeyUp:function(){var s=this,p=this.medium,r=p.settings,o=p.cache,t=p.cursor,q=p.element;a.addEvent(q,\"keyup\",this.handledEvents.keyup=function(w){w=w||k.event;if(!m(w)){return false}a.isCommand(r,w,function(){o.cmd=false},function(){o.cmd=true});p.clean();p.placeholders();var v;if(r.keyContext!==null&&(v=r.keyContext[w.keyCode])){var u=t.parent();if(u){v.call(p,w,u)}}s.preserveElementFocus()});return this},handlePaste:function(){var w=this.medium,o=w.element,v,q,u,p,s,t,r;a.addEvent(o,\"paste\",this.handledEvents.paste=function(x){x=x||k.event;if(!m(x)){return false}q=0;a.preventDefaultEvent(x);v=\"\";s=x.clipboardData;if(s&&(p=s.getData)){r=s.types;u=r.length;for(q=0;q<u;q++){t=r[q];switch(t){case\"text/plain\":return w.paste(s.getData(\"text/plain\"))}}}w.paste()});return this},handleClick:function(){var o=this.medium,p=o.element,q=o.cursor;a.addEvent(p,\"click\",this.handledEvents.click=function(r){if(!m(r)){q.caretToAfter(r.target)}});return this},escKey:function(s){var p=this.medium,r=p.element,q=p.settings,o=p.cache;if(q.mode===l.inlineMode||q.mode===l.inlineRichMode){s.target.textContent=o.originalVal;if(q.element.blur){q.element.blur()}else{if(q.element.onblur){q.element.onblur()}}return false}},enterKey:function(v){var z=this.medium,q=z.element,s=z.settings,o=z.cache,y=z.cursor;if(s.mode===l.inlineMode||s.mode===l.inlineRichMode){if(s.element.blur){s.element.blur()}else{if(s.element.onblur){s.element.onblur()}}return false}if(o.shift){if(s.tags[\"break\"]){z.addTag(s.tags[\"break\"],true);return false}}else{var w=a.atCaret(z)||{},r=q.children,p=w===q.lastChild?q.lastChild:null,u,x,t;if(p&&p!==q.firstChild&&s.autoHR&&s.mode!==l.partialMode&&s.tags.horizontalRule){a.preventDefaultEvent(v);u=a.text(p)===\"\"&&p.nodeName.toLowerCase()===s.tags.paragraph;if(u&&r.length>=2){x=r[r.length-2];if(x.nodeName.toLowerCase()===s.tags.horizontalRule){u=false}}if(u){z.addTag(s.tags.horizontalRule,false,true,w);w=w.nextSibling}if((t=z.addTag(s.tags.paragraph,true,null,w))!==null){t.innerHTML=\"\";y.set(z,0,t)}}}return true},backspaceOrDeleteKey:function(s){var v=this.medium,u=v.cursor,r=v.settings,p=v.element;if(r.onBackspaceOrDelete!==undefined){var w=r.onBackspaceOrDelete.call(v,s,p);if(w){return}}if(p.lastChild===null){return}var o=p.lastChild,q=o.previousSibling,t=g.getSelection().anchorNode;if(o&&r.tags.horizontalRule&&o.nodeName.toLocaleLowerCase()===r.tags.horizontalRule){p.removeChild(o)}else{if(o&&q&&a.text(o).length<1&&q.nodeName.toLowerCase()===r.tags.horizontalRule&&o.nodeName.toLowerCase()===r.tags.paragraph){p.removeChild(o);p.removeChild(q)}else{if(p.childNodes.length===1&&o&&!a.text(o).length){a.preventDefaultEvent(s);v.setupContents()}else{if(t&&t===p){v.deleteSelection();v.setupContents();u.set(v,0,p.firstChild)}}}}},preserveElementFocus:function(){var w=k.getSelection?k.getSelection().anchorNode:document.activeElement;if(w){var x=this.medium,o=x.cache,p=x.element,y=x.settings,v=w.parentNode,q=p.children,u=v!==o.focusedElement,r=0,t;if(v===y.element){v=w}for(t=0;t<q.length;t++){if(v===q[t]){r=t;break}}if(u){o.focusedElement=v;o.focusedElementIndex=r}}}}})(d,e,h);(function(k){k.Cache=function(){this.initialized=false;this.cmd=false;this.focusedElement=null;this.originalVal=null}})(d);(function(k){k.Cursor=function(l){this.medium=l};k.Cursor.prototype={set:function(s,o){var l;if(h.createRange){var n=e.getSelection(),r=this.medium.lastChild(),q=a.text(r).length-1,m=o?o:r,p=((typeof s!==\"undefined\")&&(s!==null)?s:q);l=h.createRange();l.setStart(m,p);l.collapse(true);n.removeAllRanges();n.addRange(l)}else{l=h.body.createTextRange();l.moveToElementText(o);l.collapse(false);l.select()}},moveCursorToEnd:function(n){var m=g.getSelection(),l=g.createRange();l.setStartAfter(n);l.setEnd(n,n.length||n.childNodes.length);m.removeAllRanges();m.addRange(l)},moveCursorToAfter:function(m){var n=g.getSelection();if(n.rangeCount){var l=n.getRangeAt(0);l.collapse(false);l.collapseAfter(m);n.setSingleRange(l)}},parent:function(){var m=null,l;if(e.getSelection){l=e.getSelection().getRangeAt(0);m=l.commonAncestorContainer;m=(m.nodeType===1?m:m.parentNode)}else{if(h.selection){m=h.selection.createRange().parentElement()}}if(m.tagName==\"SPAN\"){m=m.parentNode}return m},caretToBeginning:function(l){this.set(0,l)},caretToEnd:function(l){this.moveCursorToEnd(l)},caretToAfter:function(l){this.moveCursorToAfter(l)}}})(d);(function(k){k.Drag=function(m){this.medium=m;var o=this,l=this.iconSrc.replace(/[{][{]([a-zA-Z]+)[}][}]/g,function(q,p){if(o.hasOwnProperty(p)){return o[p]}return q}),n=this.icon=h.createElement(\"img\");n.className=this.buttonClass;n.setAttribute(\"contenteditable\",\"false\");n.setAttribute(\"src\",l);this.hide();this.element=null;this.protectedElement=null;this.handledEvents={dragstart:null,dragend:null,mouseover:null,mouseout:null,mousemove:null}};k.Drag.prototype={elementClass:\"Medium-focused\",buttonClass:\"Medium-drag\",iconSrc:'data:image/svg+xml;utf8,<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"21.424px\" height=\"21.424px\" viewBox=\"0 0 21.424 21.424\" style=\"enable-background:new 0 0 21.424 21.424;\" xml:space=\"preserve\">\t<g>\t\t<g>\t\t\t<path style=\"fill:{{iconColor}};\" d=\"M13.616,17.709L13.616,17.709h0.781l-3.686,3.715l-3.685-3.715h0.781l0,0H13.616z M13.616,17.709 M14.007,17.709 M12.555,19.566 M8.87,19.566 M7.418,17.709 M7.809,17.709 M10.712,17.709\"/>\t\t\t<path style=\"fill:{{iconColor}};\" d=\"M13.616,3.715L13.616,3.715h0.781L10.712,0L7.027,3.715h0.781l0,0H13.616z M13.616,3.715 M14.007,3.715 M12.555,1.858 M8.87,1.858 M7.418,3.715 M7.809,3.715 M10.712,3.715\"/>\t\t\t<path style=\"fill:{{iconColor}};\" d=\"M3.716,13.616L3.716,13.616v0.781L0,10.712l3.716-3.685v0.781l0,0V13.616z M3.716,13.616 M3.716,14.007 M1.858,12.555 M1.858,8.87 M3.716,7.417 M3.716,7.808 M3.716,10.712\"/>\t\t\t<path style=\"fill:{{iconColor}};\" d=\"M17.709,13.616L17.709,13.616v0.781l3.715-3.685l-3.715-3.685v0.781l0,0V13.616z M17.709,13.616 M17.709,14.007 M19.566,12.555 M19.566,8.87 M17.709,7.417 M17.709,7.808 M17.709,10.712\"/>\t\t</g>\t\t<path style=\"fill-rule:evenodd;clip-rule:evenodd;fill:{{iconColor}};\" d=\"M10.712,6.608c2.267,0,4.104,1.838,4.104,4.104 c0,2.266-1.837,4.104-4.104,4.104c-2.266,0-4.104-1.837-4.104-4.104C6.608,8.446,8.446,6.608,10.712,6.608L10.712,6.608z M10.712,7.515c-1.765,0-3.196,1.432-3.196,3.197s1.432,3.197,3.196,3.197c1.766,0,3.197-1.432,3.197-3.197 S12.478,7.515,10.712,7.515z\"/>\t</g></svg>',iconColor:\"#231F20\",setup:function(){this.handleDragstart().handleDragend().handleMouseover().handleMouseout().handleMousemove();return this},destroy:function(){a.removeEvent(this.icon,\"dragstart\",this.handledEvents.dragstart).removeEvent(this.icon,\"dragend\",this.handledEvents.dragend).removeEvent(this.icon,\"mouseover\",this.handledEvents.mouseover).removeEvent(this.icon,\"mouseout\",this.handledEvents.mouseout).removeEvent(this.medium.element,\"mousemove\",this.handledEvents.mousemove);return this},hide:function(){a.hide(this.icon);return this},handleDragstart:function(){var l=this;a.addEvent(this.icon,\"dragstart\",this.handledEvents.dragstart=function(m){if(l.protectedElement!==null){return}m=m||e.event;l.protectedElement=a.detachNode(l.element);l.icon.style.opacity=0});return this},handleDragend:function(){var l=this;a.addEvent(this.icon,\"dragend\",this.handledEvents.dragend=h.body.ondragend=function(m){if(l.protectedElement===null){return}setTimeout(function(){l.cleanCanvas();l.protectedElement=null},1)});return this},handleMouseover:function(){var l=this;a.addEvent(this.icon,\"mouseover\",this.handledEvents.mouseover=function(m){if(l.protectedElement!==null){return}a.stopPropagation(m).addClass(l.element,l.elementClass)});return this},handleMouseout:function(){var l=this;a.addEvent(this.icon,\"mouseout\",this.handledEvents.mouseout=function(m){if(l.protectedElement!==null){return}a.stopPropagation(m).removeClass(l.element,l.elementClass)});return this},handleMousemove:function(){var l=this;a.addEvent(this.medium.element,\"mousemove\",this.handledEvents.mousemove=function(n){n=n||e.event;var m=n.target||{};if(m.getAttribute(\"contenteditable\")===\"false\"){l.show(m)}});return this},show:function(m){if(m===this.icon&&this.protectedElement===null){return}this.element=m;var l=this.icon.style,o=m.offsetLeft,n=m.offsetTop;m.dragIcon=this.icon;m.parentNode.appendChild(this.icon);l.opacity=1;l.left=o+\"px\";l.top=n+\"px\";a.show(this.icon);return this},cleanCanvas:function(){var n,l=false,m=h.getElementsByClassName(this.buttonClass);this.icon.style.opacity=1;while(m.length>0){if(a.isVisible(n=m[0])){if(!l){n.parentNode.insertBefore(this.element,n);l=true}a.detachNode(n)}}a.detachNode(this.icon);return this}}})(d);(function(k){k.Element=function(m,n,l){this.medium=m;this.element=m.element;switch(n.toLowerCase()){case\"bold\":this.tagName=\"b\";break;case\"italic\":this.tagName=\"i\";break;case\"underline\":this.tagName=\"u\";break;default:this.tagName=n}this.attributes=l||{};this.clean=true};k.Element.prototype={invoke:function(p){if(k.activeElement===this.element){if(p){p.apply(this)}var l=this.attributes,o=this.tagName.toLowerCase(),n,m;if(l.className!==undefined){m=(l.className.split[\" \"]||[l.className]).shift();delete l.className}else{m=\"medium-\"+o}n=g.createClassApplier(m,{elementTagName:o,elementAttributes:this.attributes});this.medium.makeUndoable();n.toggleSelection(e);if(this.clean){this.medium.clean();this.medium.placeholders()}}},setClean:function(l){this.clean=l;return this}}})(d);(function(k){k.Html=function(l,m){this.html=m;this.medium=l;this.clean=true;this.injector=new k.Injector()};k.Html.prototype={insert:function(n,m){if(k.activeElement===this.medium.element){if(n){n.apply(this)}var l=this.injector.inject(this.html,m);if(this.clean){this.medium.clean();this.medium.placeholders()}this.medium.makeUndoable();return l}else{return null}},setClean:function(l){this.clean=l;return this}}})(d);(function(k){k.Injector=function(){};k.Injector.prototype={inject:function(n){var m=[],p,l=false;if(typeof n===\"string\"){var s=h.createElement(\"div\");s.innerHTML=n;p=s.childNodes;l=true}else{p=n}this.insertHTML('<span id=\"Medium-wedge\"></span>');var r=h.getElementById(\"Medium-wedge\"),q=r.parentNode,o=0;r.removeAttribute(\"id\");if(l){while(o<p.length){m.push(p[o]);o++}while(p.length>0){q.insertBefore(p[0],r)}}else{m.push(p);q.insertBefore(p,r)}q.removeChild(r);r=null;return m},insertHTML:function(r,t){var n,s;if(e.getSelection){n=e.getSelection();if(n.getRangeAt&&n.rangeCount){s=n.getRangeAt(0);s.deleteContents();var o=h.createElement(\"div\");o.innerHTML=r;var u=h.createDocumentFragment(),p,m;while((p=o.firstChild)){m=u.appendChild(p)}var l=u.firstChild;s.insertNode(u);if(m){s=s.cloneRange();s.setStartAfter(m);if(t){s.setStartBefore(l)}else{s.collapse(true)}n.removeAllRanges();n.addRange(s)}}}else{if((n=h.selection)&&n.type!=\"Control\"){var q=n.createRange();q.collapse(true);n.createRange().pasteHTML(r);if(t){s=n.createRange();s.setEndPoint(\"StartToStart\",q);s.select()}}}}}})(d);(function(k){k.Selection=function(){};k.Selection.prototype={saveSelection:function(){if(e.getSelection){var l=e.getSelection();if(l.rangeCount>0){return l.getRangeAt(0)}}else{if(h.selection&&h.selection.createRange){return h.selection.createRange()}}return null},restoreSelection:function(l){if(l){if(e.getSelection){var m=e.getSelection();m.removeAllRanges();m.addRange(l)}else{if(h.selection&&l.select){l.select()}}}}}})(d);(function(k){k.Toolbar=function(l,n){this.medium=l;var m=h.createElement(\"div\");m.innerHTML=this.html;this.buttons=n;this.element=m.children[0];h.body.appendChild(this.element);this.active=false;this.busy=true;this.handledEvents={scroll:null,mouseup:null,keyup:null}};k.Toolbar.prototype={fixedClass:\"Medium-toolbar-fixed\",showClass:\"Medium-toolbar-show\",hideClass:\"Medium-toolbar-hide\",html:'<div class=\"Medium-toolbar\">\t\t\t\t<div class=\"Medium-tail-outer\">\t\t\t\t\t<div class=\"Medium-tail-inner\"></div>\t\t\t\t</div>\t\t\t\t<div id=\"Medium-buttons\"></div>\t\t\t\t<table id=\"Medium-options\">\t\t\t\t\t<tbody>\t\t\t\t\t\t<tr>\t\t\t\t\t\t</tr>\t\t\t\t\t</tbody>\t\t\t\t</table>\t\t\t</div>',setup:function(){this.handleScroll().handleMouseup().handleKeyup()},destroy:function(){a.removeEvent(e,\"scroll\",this.handledEvents.scroll).removeEvent(h,\"mouseup\",this.handledEvents.mouseup).removeEvent(h,\"keyup\",this.handledEvents.keyup)},handleScroll:function(){var l=this;a.addEvent(e,\"scroll\",this.handledEvents.scroll=function(){if(l.active){l.goToSelection()}});return this},handleMouseup:function(){var l=this;a.addEvent(h,\"mouseup\",this.handledEvents.mouseup=function(){if(k.activeElement===l.medium.element&&!l.busy){l.goToSelection()}});return this},handleKeyup:function(){var l=this;a.addEvent(h,\"keyup\",this.handledEvents.keyup=function(){if(k.activeElement===l.medium.element&&!l.busy){l.goToSelection()}});return this},goToSelection:function(){var n=this.getHighlighted(),o=n.boundary.top-5,m=this.element,l=m.style;if(e.scrollTop>0){a.addClass(m,this.fixedClass)}else{a.removeClass(m,this.fixedClass)}if(n!==null){if(n.range.startOffset===n.range.endOffset&&!n.text){a.removeClass(m,this.showClass).addClass(m,this.hideClass);this.active=false}else{a.removeClass(m,this.hideClass).removeClass(m,this.showClass);l.opacity=0.01;a.addClass(m,this.showClass);l.opacity=1;l.top=(o-65)+\"px\";l.left=((n.boundary.left+(n.boundary.width/2))-(m.clientWidth/2))+\"px\";this.active=true}}},getHighlighted:function(){var m=e.getSelection(),l=(m.anchorNode?m.getRangeAt(0):false);if(!l){return null}return{selection:m,range:l,text:a.trim(l.toString()),boundary:l.getBoundingClientRect()}}}})(d);(function(k){k.Undoable=function(o){var r=this,p=o.settings.element,s,n,l=new Undo.Stack(),q=Undo.Command.extend({constructor:function(t,u){this.oldValue=t;this.newValue=u},execute:function(){},undo:function(){p.innerHTML=this.oldValue;o.canUndo=l.canUndo();o.canRedo=l.canRedo();o.dirty=l.dirty()},redo:function(){p.innerHTML=this.newValue;o.canUndo=l.canUndo();o.canRedo=l.canRedo();o.dirty=l.dirty()}}),m=function(u){var t=p.innerHTML;if(u){n=p.innerHTML;l.execute(new q(n,n))}else{if(t!=n){if(!r.movingThroughStack){l.execute(new q(n,t));n=t;o.dirty=l.dirty()}a.triggerEvent(o.settings.element,\"change\")}}};this.medium=o;this.timer=s;this.stack=l;this.makeUndoable=m;this.EditCommand=q;this.movingThroughStack=false;a.addEvent(p,\"keyup\",function(t){if(t.ctrlKey||t.keyCode===f.z){a.preventDefaultEvent(t);return}clearTimeout(s);s=setTimeout(function(){m()},250)}).addEvent(p,\"keydown\",function(t){if(!t.ctrlKey||t.keyCode!==f.z){r.movingThroughStack=false;return}a.preventDefaultEvent(t);r.movingThroughStack=true;if(t.shiftKey){l.canRedo()&&l.redo()}else{l.canUndo()&&l.undo()}})}})(d);d.Utilities={isCommand:function(l,n,m,k){if((l.modifier===\"ctrl\"&&n.ctrlKey)||(l.modifier===\"cmd\"&&n.metaKey)||(l.modifier===\"auto\"&&(n.ctrlKey||n.metaKey))){return m.call()}else{return k.call()}},isShift:function(m,l,k){if(m.shiftKey){return l.call()}else{return k.call()}},isModifier:function(l,n,k){var m=l.modifiers[n.keyCode];if(m){return k.call(null,m)}return false},special:(function(){var k={};k[f.backspace]=true;k[f.shift]=true;k[f.ctrl]=true;k[f.alt]=true;k[f[\"delete\"]]=true;k[f.cmd]=true;return k})(),isSpecial:function(k){return typeof d.Utilities.special[k.keyCode]!==\"undefined\"},navigational:(function(){var k={};k[f.upArrow]=true;k[f.downArrow]=true;k[f.leftArrow]=true;k[f.rightArrow]=true;return k})(),isNavigational:function(k){return typeof d.Utilities.navigational[k.keyCode]!==\"undefined\"},addEvents:function(o,p,q){var n=0,m,r=p.split(\" \"),k=r.length,l=d.Utilities;for(;n<k;n++){m=r[n];if(m.length>0){l.addEvent(o,m,q)}}return d.Utilities},addEvent:function i(l,k,m){if(l.addEventListener){l.addEventListener(k,m,false)}else{if(l.attachEvent){l.attachEvent(\"on\"+k,m)}else{l[\"on\"+k]=m}}return d.Utilities},removeEvent:function j(l,k,m){if(l.removeEventListener){l.removeEventListener(k,m,false)}else{if(l.detachEvent){l.detachEvent(\"on\"+k,m)}else{l[\"on\"+k]=null}}return d.Utilities},preventDefaultEvent:function(k){if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}return d.Utilities},stopPropagation:function(k){k=k||e.event;k.cancelBubble=true;if(k.stopPropagation!==undefined){k.stopPropagation()}return d.Utilities},isEventSupported:function(m,k){k=\"on\"+k;var n=h.createElement(m.tagName),l=(k in n);if(!l){n.setAttribute(k,\"return;\");l=typeof n[k]==\"function\"}n=null;return l},triggerEvent:function(l,k){var m;if(h.createEvent){m=h.createEvent(\"HTMLEvents\");m.initEvent(k,true,true);m.eventName=k;l.dispatchEvent(m)}else{m=h.createEventObject();l.fireEvent(\"on\"+k,m)}return d.Utilities},deepExtend:function(k,n){var m,l;for(m in n){if(n.hasOwnProperty(m)){l=n[m];if(l!==undefined&&l!==null&&l.constructor!==undefined&&l.constructor===Object){k[m]=k[m]||{};d.Utilities.deepExtend(k[m],l)}else{k[m]=l}}}return k},pasteHook:function(w,r){w.makeUndoable();var o=h.createElement(\"div\"),l=w.element,v,m,p,x=w.settings,t,q=h.body,u=q.parentNode,k=u.scrollTop,n=u.scrollLeft;o.className=x.cssClasses.pasteHook;o.setAttribute(\"contenteditable\",true);q.appendChild(o);a.selectNode(o);u.scrollTop=k;u.scrollLeft=n;setTimeout(function(){t=a.text(o);l.focus();if(x.maxLength>0){v=a.text(l);m=v.length;p=m+t.length;if(p>m){t=t.substring(0,x.maxLength-m)}}a.detachNode(o);u.scrollTop=k;u.scrollLeft=n;r(t)},0);return d.Utilities},traverseAll:function(n,k,q){var m=n.childNodes,p=m.length,l=0,o;q=q||1;k=k||{};if(p>0){for(;l<p;l++){o=m[l];switch(o.nodeType){case 1:d.Utilities.traverseAll(o,k,q+1);if(k.element!==undefined){k.element(o,l,q,n)}break;case 3:if(k.fragment!==undefined){k.fragment(o,l,q,n)}}p=m.length;if(o===n.lastChild){l=p}}}return d.Utilities},trim:function(k){return k.replace(/^[\\s]+|\\s+$/g,\"\")},arrayContains:function(m,k){var l=m.length;while(l--){if(m[l]===k){return true}}return false},addClass:function(l,k){if(l.classList){l.classList.add(k)}else{l.className+=\" \"+k}return d.Utilities},removeClass:function(l,k){if(l.classList){l.classList.remove(k)}else{l.className=l.className.replace(new RegExp(\"(^|\\b)\"+k.split(\" \").join(\"|\")+\"(\\b|$)\",\"gi\"),\" \")}return d.Utilities},hasClass:function(l,k){if(l.classList){return l.classList.contains(k)}else{return new RegExp(\"(^| )\"+k+\"( |$)\",\"gi\").test(l.className)}},isHidden:function(k){return k.offsetWidth===0||k.offsetHeight===0},isVisible:function(k){return k.offsetWidth!==0||k.offsetHeight!==0},encodeHtml:function(k){return h.createElement(\"a\").appendChild(h.createTextNode(k)).parentNode.innerHTML},text:function(k,l){if(l!==undefined){if(k===null){return this}if(k.textContent!==undefined){k.textContent=l}else{k.innerText=l}return this}else{if(k===null){return this}else{if(k.innerText!==undefined){return a.trim(k.innerText)}else{if(k.textContent!==undefined){return a.trim(k.textContent)}else{if(k.data!==undefined){return a.trim(k.data)}}}}}return\"\"},changeTag:function(o,m){var l=h.createElement(m),n,k;n=o.firstChild;while(n){k=n.nextSibling;l.appendChild(n);n=k}o.parentNode.insertBefore(l,o);o.parentNode.removeChild(o);return l},detachNode:function(k){if(k.parentNode!==null){k.parentNode.removeChild(k)}return this},selectNode:function(m){var k,l;m.focus();if(h.body.createTextRange){k=h.body.createTextRange();k.moveToElementText(m);k.select()}else{if(e.getSelection){l=e.getSelection();k=h.createRange();k.selectNodeContents(m);l.removeAllRanges();l.addRange(k)}}return this},baseAtCaret:function(m){if(!m.isActive()){return null}var n=e.getSelection?e.getSelection():document.selection;if(n.rangeCount){var l=n.getRangeAt(0),k=l.endContainer;switch(k.nodeType){case 3:if(k.data&&k.data.length!=l.endOffset){return false}break}return k}return null},atCaret:function(l){var k=this.baseAtCaret(l)||{},m=l.element;if(k===false){return null}while(k&&k.parentNode!==m){k=k.parentNode}if(k&&k.nodeType==1){return k}return null},hide:function(k){k.style.display=\"none\";return d.Utilities},show:function(k){k.style.display=\"\";return d.Utilities},hideAnim:function(k){k.style.opacity=1;return d.Utilities},showAnim:function(k){k.style.opacity=0.01;k.style.display=\"\";return d.Utilities},setWindow:function(k){e=k;return d.Utilities},setDocument:function(k){h=k;return d.Utilities}};g.rangePrototype.insertNodeAtEnd=function(l){var k=this.cloneRange();k.collapse(false);k.insertNode(l);k.detach();this.setEndAfter(l)};return d}()),a=b.Utilities;if(typeof define===\"function\"&&define.amd){define(function(){return b})}else{if(typeof module!==\"undefined\"&&module.exports){module.exports=b}else{if(typeof this!==\"undefined\"){this.Medium=b}}}}).call(this,window,document);"
        },
        {
          "name": "package.json",
          "type": "blob",
          "size": 0.6484375,
          "content": "{\n\t\"name\": \"medium.js\",\n\t\"author\": \"Jakob Kelly <jakie8@gmail.com> (http://jakiestfu.com)\",\n\t\"contributors\": [\n\t\t{\n\t\t\t\"name\": \"Robert Plummer <robertleeplummerjr@gmail.com> (http://visop-dev.com)\"\n\t\t}\n\t],\n\t\"version\": \"1.0.1\",\n\t\"homepage\": \"http://jakiestfu.github.io/Medium.js\",\n\t\"bugs\": \"https://github.com/jakiestfu/Medium.js/issues\",\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"https://github.com/jakiestfu/Medium.js\"\n\t},\n\t\"dependencies\": {\n\t\t\"rangy\": \">=1.3.0\",\n\t\t\"undo.js\": \">=0.1.0\"\n\t},\n\t\"keywords\": [\"editor\", \"wysiwyg\", \"contenteditable\", \"content\", \"medium\", \"medium.com\"],\n\t\"license\": \"MIT\",\n\t\"files\": [\"medium.js\", \"medium.css\"],\n\t\"main\": \"medium.js\"\n}\n"
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "test",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}