{
  "metadata": {
    "timestamp": 1736561925069,
    "page": 625,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjYzMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "mailru/FileAPI",
      "stars": 3572,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.1103515625,
          "content": "node_modules\ndist/FileAPI.html5ok.js\ndist/FileAPI.html5ok.min.js\ndist/FileAPI.ok.js\ndist/FileAPI.ok.min.js\n.idea\n"
        },
        {
          "name": ".npmignore",
          "type": "blob",
          "size": 0.00390625,
          "content": ".git"
        },
        {
          "name": ".travis.yml",
          "type": "blob",
          "size": 0.0810546875,
          "content": "language: node_js\nnode_js:\n    - 4.5\nbefore_script:\n    - npm install -g grunt-cli\n"
        },
        {
          "name": "Gruntfile.js",
          "type": "blob",
          "size": 5.3818359375,
          "content": "'use strict';\n\nmodule.exports = function (grunt) {\n\t// Project configuration.\n\tgrunt.initConfig({\n\t\tpkg: grunt.file.readJSON('package.json'),\n\n\t\tjshint: {\n\t\t\tall: [\n\t\t\t\t  'Gruntfile.js'\n\t\t\t\t, 'lib/**/*.js'\n\t\t\t\t, 'plugins/jquery.fileapi.js'\n\t\t\t\t, 'node/**/*.js'\n\t\t\t],\n\n\t\t\toptions: {\n\t\t\t\t  curly:\ttrue\t// + \"Expected '{' and instead saw 'XXXX'.\"\n\t\t\t\t, immed:\ttrue\n\t\t\t\t, latedef:\ttrue\n\t\t\t\t, newcap:\ttrue\t// \"Tolerate uncapitalized constructors\"\n\t\t\t\t, noarg:\ttrue\n\t\t\t\t, sub:\t\ttrue\n\t\t\t\t, undef:\ttrue\n\t\t\t\t, unused:\ttrue\n\t\t\t\t, boss:\t\ttrue\n\t\t\t\t, eqnull:\ttrue\n\n\t\t\t\t, node:\t\t\ttrue\n\t\t\t\t, expr:\t\t\ttrue // - \"Expected an assignment or function call and instead saw an expression.\"\n\t\t\t\t, supernew:\t\ttrue // - \"Missing '()' invoking a constructor.\"\n\t\t\t\t, laxcomma:\t\ttrue\n\t\t\t\t, laxbreak:\t\ttrue\n\t\t\t\t, smarttabs:\ttrue\n\t\t\t}\n\t\t},\n\n\t\tversion: {\n\t\t\tsrc: 'lib/FileAPI.core.js'\n\t\t},\n\n\t\tconnect: {\n\t\t\tserver: {\n\t\t\t\toptions: {\n\t\t\t\t\tport: 9001,\n\t\t\t\t\tbase: '.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tstandalone: {\n\t\t\t\toptions: {\n\t\t\t\t\thostname: '*',\n\t\t\t\t\tkeepalive: true,\n\t\t\t\t\tport: 9001,\n\t\t\t\t\tbase: '.'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcurl: {\n\t\t\tjpg: {\n\t\t\t\tsrc: 'https://dl.dropboxusercontent.com/u/49592745/BigJPG.jpg',\n\t\t\t\tdest: 'tests/files/big.jpg'\n\t\t\t}\n\t\t},\n\n\t\tqunit: {\n\t\t\tall: {\n\t\t\t\toptions: {\n\t\t\t\t\ttimeout: 5 * 60 * 1000, // 5min\n\t\t\t\t\tfiles: {\n\t\t\t\t\t\t  '1px_gif':\t['tests/files/1px.gif']\n\t\t\t\t\t\t, 'big.jpg':\t['tests/files/big.jpg']\n\t\t\t\t\t\t, 'hello.txt':\t['tests/files/hello.txt']\n\t\t\t\t\t\t, 'image.jpg':\t['tests/files/image.jpg']\n\t\t\t\t\t\t, 'dino.png':\t['tests/files/dino.png']\n\t\t\t\t\t\t, 'multiple':\t['tests/files/1px.gif', 'tests/files/hello.txt', 'tests/files/image.jpg', 'tests/files/dino.png', 'tests/files/lebowski.json']\n\t\t\t\t\t},\n\t\t\t\t\turls: ['http://127.0.0.1:<%=connect.server.options.port%>/tests/index.html']\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tconcat: {\n\t\t\toptions: {\n\t\t\t\tbanner: '/*! <%= pkg.exportName %> <%= pkg.version %> - <%= pkg.license %> | <%= pkg.repository.url %>\\n' +\n\t\t\t\t\t' * <%= pkg.description %>\\n' +\n\t\t\t\t\t' */\\n\\n',\n\n\t\t\t\tfooter: 'if( typeof define === \"function\" && define.amd ){ define(\"<%= pkg.jam.name %>\", [], function (){ return FileAPI; }); }'\n\t\t\t},\n\n\t\t\tall: {\n\t\t\t\tsrc: [\n\t\t\t\t\t  'lib/canvas-to-blob.js'\n\t\t\t\t\t, 'lib/FileAPI.core.js'\n\t\t\t\t\t, 'lib/FileAPI.Image.js'\n\t\t\t\t\t, 'lib/load-image-ios.js'\n\t\t\t\t\t, 'lib/FileAPI.Form.js'\n\t\t\t\t\t, 'lib/FileAPI.XHR.js'\n\t\t\t\t\t, 'lib/FileAPI.Camera.js'\n\t\t\t\t\t, 'lib/FileAPI.Flash.js'\n\t\t\t\t\t, 'lib/FileAPI.Flash.Camera.js'\n\t\t\t\t],\n\t\t\t\tdest: 'dist/<%= pkg.exportName %>.js'\n\t\t\t},\n\n\t\t\thtml5: {\n\t\t\t\tsrc: [\n\t\t\t\t\t  'lib/canvas-to-blob.js'\n\t\t\t\t\t, 'lib/FileAPI.core.js'\n\t\t\t\t\t, 'lib/FileAPI.Image.js'\n\t\t\t\t\t, 'lib/load-image-ios.js'\n\t\t\t\t\t, 'lib/FileAPI.Form.js'\n\t\t\t\t\t, 'lib/FileAPI.XHR.js'\n\t\t\t\t\t, 'lib/FileAPI.Camera.js'\n\t\t\t\t\t, 'lib/FileAPI.Flash.Camera.js'\n\t\t\t\t],\n\t\t\t\tdest: 'dist/<%= pkg.exportName %>.html5.js'\n\t\t\t}\n\t\t},\n\n\t\tuglify: {\n\t\t\toptions: { banner: '/*! <%= pkg.exportName %> <%= pkg.version %> - <%= pkg.license %> | <%= pkg.repository.url %> */\\n' },\n\t\t\tdist: {\n\t\t\t\tfiles: {\n\t\t\t\t\t  'dist/<%= pkg.exportName %>.min.js': ['<%= concat.all.dest %>']\n\t\t\t\t\t, 'dist/<%= pkg.exportName %>.html5.min.js': ['<%= concat.html5.dest %>']\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tmxmlc: {\n\t\t\tcore: {\n\t\t\t\toptions: {\n\t\t\t\t\trawConfig: '-target-player=10.1  -static-link-runtime-shared-libraries=true -compiler.debug=false' +\n\t\t\t\t\t\t' -library-path+=flash/core/lib/blooddy_crypto.swc -library-path+=flash/core/lib/EnginesLibrary.swc'\n\t\t\t\t},\n\t\t\t\tfiles: {\n\t\t\t\t\t'dist/<%= pkg.exportName %>.flash.swf': ['flash/core/src/FileAPI_flash.as']\n\t\t\t\t}\n\t\t\t},\n\t\t\timage: {\n\t\t\t\toptions: {\n\t\t\t\t\trawConfig: '-static-link-runtime-shared-libraries=true -compiler.debug=false' +\n\t\t\t\t\t\t' -library-path+=flash/image/lib/blooddy_crypto.swc'\n\t\t\t\t},\n\t\t\t\tfiles: {\n\t\t\t\t\t'dist/<%= pkg.exportName %>.flash.image.swf': ['flash/image/src/FileAPI_flash_image.as']\n\t\t\t\t}\n\t\t\t},\n\t\t\tcamera: {\n\t\t\t\toptions: {\n\t\t\t\t\trawConfig: '-static-link-runtime-shared-libraries=true -compiler.debug=false'\n\t\t\t\t},\n\t\t\t\tfiles: {\n\t\t\t\t\t'dist/<%= pkg.exportName %>.flash.camera.swf': ['flash/camera/src/FileAPI_flash_camera.as']\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\twatch: {\n\t\t\tscripts: {\n\t\t\t\tfiles: 'lib/**/*.js',\n\t\t\t\ttasks: ['concat'],\n\t\t\t\toptions: { interrupt: true }\n\t\t\t}\n\t\t}\n\t});\n\n\t// These plugins provide necessary tasks.\n\tgrunt.loadNpmTasks('grunt-version');\n\tgrunt.loadNpmTasks('grunt-contrib-jshint');\n\tgrunt.loadNpmTasks('grunt-contrib-concat');\n\tgrunt.loadNpmTasks('grunt-contrib-uglify');\n\tgrunt.loadNpmTasks('grunt-contrib-watch');\n\tgrunt.loadNpmTasks('grunt-contrib-connect');\n\tgrunt.loadNpmTasks('grunt-contrib-compress');\n\tgrunt.loadNpmTasks('grunt-mxmlc');\n\tgrunt.loadNpmTasks('grunt-curl');\n\n\t// Load custom QUnit task, based on grunt-contrib-qunit, but support \"files\" option.\n\tgrunt.loadTasks('./tests/grunt-task/');\n\tgrunt.loadTasks('./custom-tasks/');\n\n\t// \"npm build\" runs these tasks\n\tgrunt.registerTask('prepare-test-files', function (){\n\t\t// big.jpg added to git\n\t\t/*if (!grunt.file.exists('tests/files/big.jpg')) {\n\t\t\tgrunt.task.run('curl');\n\t\t}*/\n\t});\n\n\tgrunt.registerTask('express', 'Start a custom web server.', function() {\n\t\tvar done = this.async();\n\n\t\trequire('./node/server.js').createServer(8000, function () {\n\t\t\tdone();\n\t\t});\n\t});\n\n\tgrunt.registerTask('server', ['connect:server', 'express']);\n\tgrunt.registerTask('dev', ['concat', 'server', 'watch']);\n\tgrunt.registerTask('tests', ['jshint', 'concat', 'server', 'prepare-test-files', 'qunit']);\n\tgrunt.registerTask('build', ['version', 'concat', 'uglify']);\n\tgrunt.registerTask('build-all', ['build', 'mxmlc']);\n\tgrunt.registerTask('default', ['tests', 'build']);\n};\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.349609375,
          "content": "Copyright (C) 2012 FileAPI AUTHORS:\nKonstantin Lebedev, Demidov Vladimir.\n\n/*\n * Redistribution and use in source and binary forms, with or\n * without modification, are permitted provided that the following\n * conditions are met:\n *\n * 1. Redistributions of source code must retain the above\n *    copyright notice, this list of conditions and the\n *    following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials\n *    provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY MAILRU.RU GROUP ``AS IS'' AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL\n * MAILRU.RU GROUP OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR\n * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF\n * THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n * SUCH DAMAGE.\n */\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 37.486328125,
          "content": "﻿<a name=\"FileAPI\"></a>\n## FileAPI <img src=\"https://api.travis-ci.org/mailru/FileAPI.png?branch=master\"/>\nA set of JavaScript tools for working with files.\n\n<a name=\"started\"></a>\n### Get started\n\nDownload the files from the [dist](https://github.com/mailru/FileAPI/tree/master/dist) directory, and then:\n\n```html\n\t<div>\n\t\t<!-- \"js-fileapi-wrapper\" -- required class -->\n\t\t<div class=\"js-fileapi-wrapper upload-btn\">\n\t\t\t<div class=\"upload-btn__txt\">Choose files</div>\n\t\t\t<input id=\"choose\" name=\"files\" type=\"file\" multiple />\n\t\t</div>\n\t\t<div id=\"images\"><!-- previews --></div>\n\t</div>\n\n\t<script>window.FileAPI = { staticPath: '/js/FileAPI/dist/' };</script>\n\t<script src=\"/js/FileAPI/dist/FileAPI.min.js\"></script>\n\t<script>\n\t\tvar choose = document.getElementById('choose');\n\t\tFileAPI.event.on(choose, 'change', function (evt){\n\t\t\tvar files = FileAPI.getFiles(evt); // Retrieve file list\n\n\t\t\tFileAPI.filterFiles(files, function (file, info/**Object*/){\n\t\t\t\tif( /^image/.test(file.type) ){\n\t\t\t\t\treturn\tinfo.width >= 320 && info.height >= 240;\n\t\t\t\t}\n\t\t\t\treturn\tfalse;\n\t\t\t}, function (files/**Array*/, rejected/**Array*/){\n\t\t\t\tif( files.length ){\n\t\t\t\t\t// Make preview 100x100\n\t\t\t\t\tFileAPI.each(files, function (file){\n\t\t\t\t\t\tFileAPI.Image(file).preview(100).get(function (err, img){\n\t\t\t\t\t\t\timages.appendChild(img);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t// Uploading Files\n\t\t\t\t\tFileAPI.upload({\n\t\t\t\t\t\turl: './ctrl.php',\n\t\t\t\t\t\tfiles: { images: files },\n\t\t\t\t\t\tprogress: function (evt){ /* ... */ },\n\t\t\t\t\t\tcomplete: function (err, xhr){ /* ... */ }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t</script>\n```\n\n---\n\n<a name=\"FileAPI.setup\"></a>\n### Setup options\nEdit the file `crossdomain.xml` and place it to the root of the domain to which files will be uploaded.\n\n```html\n\t<script>\n\t\twindow.FileAPI = {\n\t\t\t  debug: false   // debug mode, see Console\n\t\t\t, cors: false    // if used CORS, set `true`\n\t\t\t, media: false   // if used WebCam, set `true`\n\t\t\t, staticPath: '/js/FileAPI/dist/' // path to '*.swf'\n\t\t\t, postNameConcat: function (name, idx){\n\t\t\t\t// Default: object[foo]=1&object[bar][baz]=2\n\t\t\t\t// .NET: https://github.com/mailru/FileAPI/issues/121#issuecomment-24590395\n\t\t\t\treturn\tname + (idx != null ? '['+ idx +']' : '');\n\t\t\t}\n\t\t};\n\t</script>\n\t<script src=\"/js/FileAPI/dist/FileAPI.min.js\"></script>\n\n\t<!-- OR -->\n\n\t<script>\n\t\twindow.FileAPI = { /* options */ };\n\t\trequire(['FileAPI'], function (FileAPI){\n\t\t\t// ...\n\t\t});\n\t</script>\n```\n\n---\n\n\n<a name=\"FileAPI.getFiles\"></a>\n### getFiles(input`:HTMLInputElement|Event|$.Event`)`:Array`\nRetrieve file list from `input` element or `event` object, also support `jQuery`.\n\n* input — `HTMLInputElement`, `change` and `drop` event, `jQuery` collection or `jQuery.Event`\n\n```js\nvar el = document.getElement('my-input');\nFileAPI.event.on(el, 'change', function (evt/**Event*/){\n\t// Retrieve file list\n\tvar files = FileAPI.getFiles(el);\n\n\t// or event\n\tvar files = FileAPI.getFiles(evt);\n});\n```\n\n---\n\n\n<a name=\"FileAPI.getInfo\"></a>\n### getInfo(file`:Object`, callback`:Function`)`:void`\nGet info of file (see also: FileAPI.addInfoReader).\n\n* file — file object (https://developer.mozilla.org/en-US/docs/DOM/File)\n* callback — function, called after collected info of file\n\n```js\n// Get info of image file (FileAPI.exif.js included)\nFileAPI.getInfo(file, function (err/**String*/, info/**Object*/){\n\tif( !err ){\n\t\tconsole.log(info); // { width: 800, height: 600, exif: {..} }\n\t}\n});\n\n// Get info of mp3 file (FileAPI.id3.js included)\nFileAPI.getInfo(file, function (err/**String*/, info/**Object*/){\n\tif( !err ){\n\t\tconsole.log(info); // { title: \"...\", album: \"...\", artists: \"...\", ... }\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.filterFiles\"></a>\n### filterFiles(files`:Array`, filter`:Function`, callback`:Function`)`:void`\nFiltering the list of files, with additional information about files.\nSee also: FileAPI.getInfo and FileAPI.addInfoReader.\n\n* files — original list of files\n* filter — function, takes two arguments: `file` — the file itself, `info` — additional information.\n* callback — function: `list` — files that match the condition, `other` — all the rest.\n\n```js\n// Get list of file\nvar files = FileAPI.getFiles(input);\n\n// Filter the List\nFileAPI.filterFiles(files, function (file/**Object*/, info/**Object*/){\n\tif( /^image/.test(file.type) && info ){\n\t\treturn\tinfo.width > 320 && info.height > 240;\n\t} else {\n\t\treturn\tfile.size < 20 * FileAPI.MB;\n\t}\n}, function (list/**Array*/, other/**Array*/){\n\tif( list.length ){\n\t\t// ..\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.getDropFiles\"></a>\n### getDropFiles(evt`:Event|$.Event`, callback`:Function`)`:void`\nGet a list of files, including directories.\n\n* evt — `drop` event\n* callback — function, takes one argument, a list of files\n\n```js\nFileAPI.event.on(document, 'drop', function (evt/**Event*/){\n\tevt.preventDefault();\n\n\t// Get a list of files\n\tFileAPI.getDropFiles(evt, function (files/**Array*/){\n\t\t// ...\n\t});\n});\n```\n\n---\n\n<a name=\"FileAPI.upload\"></a>\n### upload(opts`:Object`)`:XmlHttpRequest`\nUploading files to the server (successively). Returns XHR-like object.\nIt is important to remember to correctly worked flash-transport server response body must not be empty,\nfor example, you can pass, just text \"ok\".\n\n* opts — options object, see [Upload options](#options)\n\n```js\nvar el = document.getElementById('my-input');\nFileAPI.event.on(el, 'change', function (evt/**Event*/){\n\tvar files = FileAPI.getFiles(evt);\n\tvar xhr = FileAPI.upload({\n\t\turl: 'http://rubaxa.org/FileAPI/server/ctrl.php',\n\t\tfiles: { file: files[0] },\n\t\tcomplete: function (err, xhr){\n\t\t\tif( !err ){\n\t\t\t\tvar result = xhr.responseText;\n\t\t\t\t// ...\n\t\t\t}\n\t\t}\n\t});\n});\n```\n\n---\n\n<a name=\"FileAPI.addInfoReader\"></a>\n### addInfoReader(mime`:RegExp`, handler`:Function`)`:void`\nAdds a handler for the collection of information about a file.\nSee also: FileAPI.getInfo and FileAPI.filterFiles.\n\n* mime — pattern of mime-type\n* handler — takes two arguments: `file` object and `complete` function callback\n\n```js\nFileAPI.addInfoReader(/^image/, function (file/**File*/, callback/**Function*/){\n\t// http://www.nihilogic.dk/labs/exif/exif.js\n\t// http://www.nihilogic.dk/labs/binaryajax/binaryajax.js\n\tFileAPI.readAsBinaryString(file, function (evt/**Object*/){\n\t\tif( evt.type == 'load' ){\n\t\t\tvar binaryString = evt.result;\n\t\t\tvar oFile = new BinaryFile(binaryString, 0, file.size);\n\t\t\tvar exif  = EXIF.readFromBinaryFile(oFile);\n\t\t\tcallback(false, { 'exif': exif || {} });\n\t\t}\n\t\telse if( evt.type == 'error' ){\n\t\t\tcallback('read_as_binary_string');\n\t\t}\n\t\telse if( evt.type == 'progress' ){\n\t\t\t// ...\n\t\t}\n\t});\n});\n```\n\n---\n\n<a name=\"FileAPI.readAsDataURL\"></a>\n### readAsDataURL(file`:Object`, callback`:Function`)`:void`\nReading the contents of the specified `File` as `dataURL`.\n\n* file — file object\n* callback — function, receives a result\n\n```js\nFileAPI.readAsDataURL(file, function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Success\n\t \tvar dataURL = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Error\n\t}\n})\n```\n\n---\n\n<a name=\"FileAPI.readAsBinaryString\"></a>\n### readAsBinaryString(file`:Object`, callback`:Function`)`:void`\nReading the contents of the specified `File` as `BinaryString`.\n\n* file — file object\n* callback — function, receives a result\n\n```js\nFileAPI.readAsBinaryString(file, function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Success\n\t \tvar binaryString = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Error\n\t}\n})\n```\n\n---\n\n<a name=\"FileAPI.readAsArrayBuffer\"></a>\n### readAsArrayBuffer(file`:Object`, callback`:Function`)`:void`\nReading the contents of the specified `File` as `ArrayBuffer`.\n\n* file — file object\n* callback — function, receives a result\n\n```js\nFileAPI.readAsArrayBuffer(file, function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Success\n\t \tvar arrayBuffer = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Error\n\t}\n})\n```\n\n---\n\n<a name=\"FileAPI.readAsText\"></a>\n### readAsText(file`:Object`, callback`:Function`)`:void`\nReading the contents of the specified `File` as `text`.\n\n* file — file object\n* callback — function, receives a result\n\n```js\nFileAPI.readAsText(file, function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Success\n\t \tvar text = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Error\n\t}\n})\n```\n\n---\n\n<a name=\"FileAPI.readAsText-encoding\"></a>\n### readAsText(file`:Object`, encoding`:String`, callback`:Function`)`:void`\nReading the contents of the specified `File` as `text`.\n\n* encoding — a string indicating the encoding to use for the returned data. By default, UTF-8.\n\n```js\nFileAPI.readAsText(file, \"utf-8\", function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Success\n\t \tvar text = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Error\n\t}\n})\n```\n\n---\n\n\n<a name=\"options\" data-name=\"Upload options\"></a>\n## Upload options\n\n<a name=\"options.url\"></a>\n### url`:String`\nA string containing the URL to which the request is sent.\n\n---\n\n<a name=\"options.data\"></a>\n### data`:Object`\nAdditional post data to be sent along with the file uploads.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tdata: { 'session-id': 123 },\n\tfiles: { ... },\n});\n```\n\n---\n\n<a name=\"options.uploadMethod\"></a>\n### uploadMethod`:String`\nRequest method, HTML5 only.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tuploadMethod: 'PUT',\n\tfiles: { .. },\n});\n```\n\n---\n\n<a name=\"options.uploadCredentials\"></a>\n### uploadCredentials`:Boolean`\nPass credentials to upload request, HTML5 only.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tuploadCredentials: false,\n\tfiles: { .. },\n});\n```\n\n---\n\n<a name=\"options.headers\"></a>\n### headers`:Object`\nAdditional request headers, HTML5 only.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\theaders: { 'x-upload': 'fileapi' },\n\tfiles: { .. },\n});\n```\n\n---\n\n<a name=\"options.cache\"></a>\n### cache`:Boolean`\nSetting to true removes the default timestamp URL parameter.\n\n---\n\n<a name=\"options.files\"></a>\n### files`:Object`\nKey-value object, `key` — post name, `value` — File or FileAPI.Image object.\n\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: {\n\t\taudio: files\n\t}\n});\n```\n\n---\n\n<a name=\"options.chunkSize\"></a>\n### chunkSize`:Number`\nChunk size in bytes, HTML5 only.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { images: fileList },\n\tchunkSize: 0.5 * FileAPI.MB\n});\n```\n\n---\n\n<a name=\"options.chunkUploadRetry\"></a>\n### chunkUploadRetry`:Number`\nNumber of retries during upload chunks, HTML5 only.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { images: fileList },\n\tchunkSize: 0.5 * FileAPI.MB,\n\tchunkUploadRetry: 3\n});\n```\n\n--\n\n<a name=\"options.imageTransform\"></a>\n### imageTransform`:Object`\nRules of changes the original image on the client.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { image: imageFiles },\n\t// Changes the original image\n\timageTransform: {\n\t\t// resize by max side\n\t\tmaxWidth: 800,\n\t\tmaxHeight: 600,\n\t\t// Add watermark\n\t\toverlay: [{ x: 10, y: 10, src: '/i/watemark.png', rel: FileAPI.Image.RIGHT_BOTTOM }]\n\t}\n});\n```\n\n--\n\n<a name=\"options.imageTransform-multi\"></a>\n### imageTransform`:Object`\nRules of image transformation on the client, for more images.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { image: imageFiles },\n\timageTransform: {\n\t\t// resize by max side\n\t\t'huge': { maxWidth: 800, maxHeight: 600 },\n\t\t// crop & resize\n\t\t'medium': { width: 320, height: 240, preview: true },\n\t\t// crop & resize + watemark\n\t\t'small': {\n\t\t\twidth: 100, height: 100,\n\t\t\t// Add watermark\n\t\t\toverlay: [{ x: 5, y: 5, src: '/i/watemark.png', rel: FileAPI.Image.RIGHT_BOTTOM }]\n\t\t}\n\t}\n});\n```\n\n--\n\n<a name=\"options.imageTransform-jpeg\"></a>\n### imageTransform`:Object`\nConvert all images to jpeg or png.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { image: imageFiles },\n\timageTransform: {\n\t\ttype: 'image/jpeg',\n\t\tquality: 0.86 // jpeg quality\n\t}\n});\n```\n\n\n<a name=\"options.imageOriginal\"></a>\n### imageOriginal`:Boolean`\nSent to the server the original image or not, if defined imageTransform option.\n\n--\n\n<a name=\"options.imageAutoOrientation\"></a>\n### imageAutoOrientation`:Boolean`\nAuto-rotate images on the basis of EXIF.\n\n--\n\n<a name=\"options.prepare\"></a>\n### prepare`:Function`\nPrepare options upload for a particular file.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tprepare: function (file/**Object*/, options/**Object*/){\n\t\toptions.data.secret = utils.getSecretKey(file.name);\n\t}\n});\n```\n\n--\n\n<a name=\"options.upload\"></a>\n### upload`:Function`\nStart uploading.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tupload: function (xhr/**Object*/, options/**Object*/){\n\t\t// ...\n\t}\n});\n```\n\n--\n\n<a name=\"options.fileupload\"></a>\n### fileupload`:Function`\nStart file uploading.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tfileupload: function (file/**Object*/, xhr/**Object*/, options/**Object*/){\n\t\t// ...\n\t}\n});\n```\n\n--\n\n<a name=\"options.progress\"></a>\n### progress`:Function`\nCallback for upload progress events.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tprogress: function (evt/**Object*/, file/**Object*/, xhr/**Object*/, options/**Object*/){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t}\n});\n```\n\n--\n\n<a name=\"options.fileprogress\"></a>\n### fileprogress`:Function`\nCallback for upload file progress events.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tfileprogress: function (evt/**Object*/, file/**Object*/, xhr/**Object*/, options/**Object*/){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t}\n});\n```\n\n--\n\n<a name=\"options.complete\"></a>\n### complete`:Function`\nCallback for end upload requests.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tcomplete: function (err/**String*/, xhr/**Object*/, file/**Object/, options/**Object*/){\n\t\tif( !err ){\n\t\t\t// All files successfully uploaded.\n\t\t}\n\t}\n});\n```\n\n--\n\n<a name=\"options.filecomplete\"></a>\n### filecomplete`:Function`\nCallback for end upload requests.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tfilecomplete: function (err/**String*/, xhr/**Object*/, file/**Object/, options/**Object*/){\n\t\tif( !err ){\n\t\t\t// File successfully uploaded\n\t\t\tvar result = xhr.responseText;\n\t\t}\n\t}\n});\n```\n\n---\n\n<a name=\"File\"></a>\n## File object\n\n<a name=\"File.name\"></a>\n### name\nThe name of the file referenced by the File object.\n\n<a name=\"File.type\"></a>\n### type\nThe type (MIME type) of the file referenced by the File object.\n\n<a name=\"File.size\"></a>\n### size\nThe size (in bytes) of the file referenced by the File object.\n\n\n---\n\n\n<a name=\"FileAPI.event\"></a>\n## FileAPI.event\n\n<a name=\"FileAPI.event.on\"></a>\n### on(el`:HTMLElement`, events`:String`, handler`:Function`)`:void`\nAttach an event handler function.\n\n* el — DOM element\n* events — one or more space-separated event types.\n* handler — A function to execute when the event is triggered.\n\n---\n\n<a name=\"FileAPI.event.off\"></a>\n### off(el`:HTMLElement`, events`:String`, handler`:Function`)`:void`\nRemove an event handler.\n\n* el — DOM element\n* events — one or more space-separated event types.\n* handler — a handler function previously attached for the event(s).\n\n---\n\n<a name=\"FileAPI.event.one\"></a>\n### one(el`:HTMLElement`, events`:String`, handler`:Function`)`:void`\nAttach an event handler function. The handler is executed at most once.\n\n* el — DOM element\n* events — one or more space-separated event types.\n* handler — a function to execute when the event is triggered.\n\n---\n\n<a name=\"FileAPI.event.dnd\"></a>\n### dnd(el`:HTMLElement`, hover`:Function`, handler`:Function`)`:void`\nAttach an drag and drop event handler function.\n\n* el — drop zone\n* hover — `dragenter` and `dragleave` listener\n* handler — `drop` event handler.\n\n```js\nvar el = document.getElementById('dropzone');\nFileAPI.event.dnd(el, function (over){\n\tel.style.backgroundColor = over ? '#f60': '';\n}, function (files){\n\tif( files.length ){\n\t\t// Upload their.\n\t}\n});\n\n// or jQuery\n$('#dropzone').dnd(hoverFn, dropFn);\n```\n\n---\n\n<a name=\"FileAPI.event.dnd.off\"></a>\n### dnd.off(el`:HTMLElement`, hover`:Function`, handler`:Function`)`:void`\nRemove an drag and drop event handler function.\n\n* el — drop zone\n* hover — `dragenter` and `dragleave` listener\n* handler — `drop` event handler.\n\n```js\n// Native\nFileAPI.event.dnd.off(el, hoverFn, dropFn);\n\n// jQuery\n$('#dropzone').dndoff(hoverFn, dropFn);\n```\n\n--\n\n<a name=\"FileAPI.Image\"></a>\n## FileAPI.Image\nClass for working with images\n\n### constructor(file`:Object`)`:void`\nThe constructor takes a single argument, the `File` object.\n\n* file — the `File` object\n\n```js\nFileAPI.Image(imageFile).get(function (err/**String*/, img/**HTMLElement*/){\n\tif( !err ){\n\t\tdocument.body.appendChild( img );\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.Image.crop\"></a>\n### crop(width`:Number`, height`:Number`)`:FileAPI.Image`\nCrop image by width and height.\n\n* width — new image width\n* height — new image height\n\n```js\nFileAPI.Image(imageFile)\n\t.crop(640, 480)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n### crop(x`:Number`, y`:Number`, width`:Number`, height`:Number`)`:FileAPI.Image`\nCrop image by x, y, width and height.\n\n* x — offset from the top corner\n* y — offset from the left corner\n\n```js\nFileAPI.Image(imageFile)\n\t.crop(100, 50, 320, 240)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.resize\"></a>\n### resize(width`:Number`, height`:Number`[, strategy`:String`])`:FileAPI.Image`\nResize image.\n\n* width — new image width\n* height — new image height\n* strategy — enum: `min`, `max`, `preview`, `width`, `height`. By default `undefined`.\n\n```js\nFileAPI.Image(imageFile)\n\t.resize(320, 240)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n\n// Resize image on by max side.\nFileAPI.Image(imageFile)\n\t.resize(320, 240, 'max')\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n\n// Resize image on by fixed height.\nFileAPI.Image(imageFile)\n\t.resize(240, 'height')\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.preview\"></a>\n### preview(width`:Number`[, height`:Number`])`:FileAPI.Image`\nCrop and resize image.\n\n* width — new image width\n* height — new image height\n\n```js\nFileAPI.Image(imageFile)\n\t.preview(100, 100)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.rotate\"></a>\n### rotate(deg`:Number`)`:FileAPI.Image`\nRotate image.\n\n* deg — rotation angle in degrees\n\n```js\nFileAPI.Image(imageFile)\n\t.rotate(90)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.filter\"></a>\n### filter(callback`:Function`)`:FileAPI.Image`\nApply filter function. Only `HTML5`.\n\n* callback — takes two arguments, `canvas` element and `done` method.\n\n```js\nFileAPI.Image(imageFile)\n\t.filter(function (canvas/**HTMLCanvasElement*/, doneFn/**Function*/){\n\t\t// bla-bla-lba\n\t\tdoneFn();\n\t})\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n\n---\n\n### filter(name`:String`)`:FileAPI.Image`\nUses [CamanJS](http://camanjs.com/), include it before FileAPI library.\n\n* name — CamanJS filter name (custom or preset)\n\n```js\nCaman.Filter.register(\"my-funky-filter\", function () {\n\t// http://camanjs.com/guides/#Extending\n});\n\nFileAPI.Image(imageFile)\n\t.filter(\"my-funky-filter\") // or .filter(\"vintage\")\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.overlay\"></a>\n### overlay(images`:Array`)`:FileAPI.Image`\nAdd overlay images, eg: watermark.\n\n* images — array of overlays\n\n```js\nFileAPI.Image(imageFile)\n\t.overlay([\n\t\t// Left corner.\n\t\t{ x: 10, y: 10, w: 100, h: 10, src: '/i/watermark.png' },\n\n\t\t// Right bottom corner.\n\t\t{ x: 10, y: 10, src: '/i/watermark.png', rel: FileAPI.Image.RIGHT_BOTTOM }\n\t])\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.get\"></a>\n### get(fn`:Function`)`:FileAPI.Image`\nGet the final image.\n\n* fn — complete callback\n\n---\n\n<a name=\"FileAPI.Camera\"></a>\n## FileAPI.Camera\nTo work with a webcam, be sure to set `FileAPI.media: true`.\n\n\n<a name=\"FileAPI.Camera.publish\"></a>\n### publish(el`:HTMLElement`, options`:Object`, callback`:Function`)`:void`\nPublication of the camera.\n\n* el — target\n* options — { `width: 100%`, `height: 100%`, `start: true` }\n* callback — the first parameter is a possible error, the second instance of FileAPI.Camera\n\n```js\nvar el = document.getElementById('cam');\nFileAPI.Camera.publish(el, { width: 320, height: 240 }, function (err, cam/**FileAPI.Camera*/){\n\tif( !err ){\n\t\t// The webcam is ready, you can use it.\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.Camera.start\"></a>\n### start(callback`:Function`)`:void`\nTurn on the camera.\n\n* callback — will be called when the camera ready\n\n```js\nvar el = document.getElementById('cam');\nFileAPI.Camera.publish(el, { start: false }, function (err, cam/**FileAPI.Camera*/){\n\tif( !err ){\n\t\t// Turn on\n\t\tcam.start(function (err){\n\t\t\tif( !err ){\n\t\t\t\t// The camera is ready for use.\n\t\t\t}\n\t\t});\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.Camera.stop\"></a>\n### stop()`:void`\nTurn off the camera.\n\n---\n\n<a name=\"FileAPI.Camera.shot\"></a>\n### shot()`:FileAPI.Image`\nTake a picture with the camera.\n\n```js\nvar el = document.getElementById('cam');\nFileAPI.Camera.publish(el, function (err, cam/**FileAPI.Camera*/){\n\tif( !err ){\n\t\tvar shot = cam.shot(); // take a picture\n\n\t\t// create thumbnail 100x100\n\t\tshot.preview(100).get(function (err, img){\n\t\t\tpreviews.appendChild(img);\n\t\t});\n\n\t\t// and/or\n\t\tFileAPI.upload({\n\t\t\turl: '...',\n\t\t\tfiles: { cam: shot\n\t\t});\n\t}\n});\n```\n\n---\n\n<a name=\"const\" data-name=\"Const\"></a>\n## Constants\n\n<a name=\"FileAPI.KB\"></a>\n### FileAPI.KB`:Number`\n1024 bytes\n\n<a name=\"FileAPI.MB\"></a>\n### FileAPI.MB`:Number`\n1048576 bytes\n\n<a name=\"FileAPI.GB\"></a>\n### FileAPI.GB`:Number`\n1073741824 bytes\n\n<a name=\"FileAPI.TB\"></a>\n### FileAPI.TB`:Number`\n1.0995116e+12 bytes\n\n---\n\n<a name=\"FileAPI.utils\"></a>\n## Utils\n\n<a name=\"FileAPI.each\"></a>\n### FileAPI.each(obj`:Object|Array`, callback`:Function`[, thisObject`:Mixed`])`:void`\nIterate over an object or array, executing a function for each matched element.\n\n* obj — array or object\n* callback — a function to execute for each element.\n* thisObject — object to use as `this` when executing `callback`.\n\n--\n\n<a name=\"FileAPI.extend\"></a>\n### FileAPI.extend(dst`:Object`, src`:Object`)`:Object`\nMerge the contents of two objects together into the first object.\n\n* dst — an object that will receive the new properties\n* src — an object containing additional properties to merge in.\n\n--\n\n<a name=\"FileAPI.filter\"></a>\n### FileAPI.filter(array`:Array`, callback`:Function`[, thisObject`:Mixed`)`:Object`\nCreates a new array with all elements that pass the test implemented by the provided function.\n\n* array — original Array\n* callback — Function to test each element of the array.\n* thisObject — object to use as `this` when executing `callback`.\n\n---\n\n<a name=\"support\"><a/>\n## Support\n<ul>\n\t<li>Multiupload: all browsers that support HTML5 or Flash</li>\n\t<li>Drag'n'Drop upload: files (HTML5) & directories (Chrome 21+)</li>\n\t<li>Chunked file upload (HTML5)</li>\n\t<li>Upload one file: all browsers</li>\n\t<li>\n\t\tWorking with Images: IE6+, FF 3.6+, Chrome 10+, Opera 11.1+, Safari 6+\n\t\t<ul>\n\t\t\t<li>crop, resize, preview & rotate (HTML5 or Flash)</li>\n\t\t\t<li>auto orientation by exif (HTML5, if include FileAPI.exif.js or Flash)</li>\n\t\t</ul>\n\t</li>\n</ul>\n\n<a name=\"FileAPI.support.html5\"></a>\n### FileAPI.support.html5`:Boolean`\nHTML5 browser support\n\n<a name=\"FileAPI.support.cors\"></a>\n### FileAPI.support.cors`:Boolean`\nThis cross-origin resource sharing is used to enable cross-site HTTP requests.\n\n<a name=\"FileAPI.support.dnd\"></a>\n### FileAPI.support.dnd`:Boolean`\nDrag'n'drop events support.\n\n<a name=\"FileAPI.support.flash\"></a>\n### FileAPI.support.flash`:Boolean`\nAvailability Flash plugin.\n\n<a name=\"FileAPI.support.canvas\"></a>\n### FileAPI.support.canvas`:Boolean`\nCanvas support.\n\n<a name=\"FileAPI.support.dataURI\"></a>\n### FileAPI.support.dataURI`:Boolean`\nSupport dataURI as src for image.\n\n<a name=\"FileAPI.support.chunked\"></a>\n### FileAPI.support.chunked`:Boolean`\nSupport chunked upload.\n\n---\n\n<a name=\"flash\"></a>\n## Flash\nFlash is very \"buggy\" thing :]\nThe server response can not be empty.\nTherefore, in the event of a successful uploading `http status` should be only `200 OK`.\n\n<a name=\"flash.settings\"></a>\n### Settings\nFlash settings.\nIt is advisable to place flash on the same server where the files will be uploaded.\n\n```html\n<script>\n\tvar FileAPI = {\n\t \t// @default: \"./dist/\"\n\t\tstaticPath: '/js/',\n\n\t\t // @default: FileAPI.staticPath + \"FileAPI.flash.swf\"\n\t\tflashUrl: '/statics/FileAPI.flash.swf',\n\n\t\t// @default: FileAPI.staticPath + \"FileAPI.flash.image.swf\"\n\t\tflashImageUrl: '/statics/FileAPI.flash.image.swf'\n\t};\n</script>\n<script src=\"/js/FileAPI.min.js\"></script>\n```\n\n---\n\n<a name=\"crossdomain.xml\"></a>\n### crossdomain.xml\nNecessarily make this file on the server.\nDo not forget to replace `youdomain.com` on the name of your domain.\n\n```xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE cross-domain-policy SYSTEM \"http://www.adobe.com/xml/dtds/cross-domain-policy.dtd\">\n<cross-domain-policy>\n\t<site-control permitted-cross-domain-policies=\"all\"/>\n\t<allow-access-from domain=\"youdomain.com\" secure=\"false\"/>\n\t<allow-access-from domain=\"*.youdomain.com\" secure=\"false\"/>\n\t<allow-http-request-headers-from domain=\"*\" headers=\"*\" secure=\"false\"/>\n</cross-domain-policy>\n```\n\n---\n\n<a name=\"flash.request\"></a>\n### request\nThe following sample HTTP POST request is sent from Flash Player to a server-side script if no parameters are specified:\n\n```xml\nPOST /server/ctrl.php HTTP/1.1\nAccept: text/*\nContent-Type: multipart/form-data;\nboundary=----------Ij5ae0ae0KM7GI3KM7\nUser-Agent: Shockwave Flash\nHost: www.youdomain.com\nContent-Length: 421\nConnection: Keep-Alive\nCache-Control: no-cache\n\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name=\"Filename\"\n\nMyFile.jpg\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name=\"Filedata\"; filename=\"MyFile.jpg\"\nContent-Type: application/octet-stream\n\n[[..FILE_DATA_HERE..]]\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name=\"Upload\"\n\nSubmit Query\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7--\n```\n\n---\n\n<a name=\"flash.security\"></a>\n### Security\nBy default `FileAPI.flash.swf` allows access from any domain via `Security.allowDomain(\"*\")`.\nThis can lead to same origin bypass vulnerability if swf is loaded from the same domain as your critical data.\nTo prevent this, allow only your domains [here](https://github.com/mailru/FileAPI/blob/master/flash/core/src/ru/mail/communication/JSCallbackPresenter.as#L25) and rebuild flash.\n\n---\n\n<a name=\"server\"></a>\n## Server settings\n\n<a name=\"server.iframe\"></a>\n### IFrame/JSONP\n\n```php\n<script>\n(function (ctx, jsonp){\n\t'use strict';\n\tvar status = {{httpStatus}}, statusText = \"{{httpStatusText}}\", response = \"{{responseBody}}\";\n\ttry {\n\t\tctx[jsonp](status, statusText, response);\n\t} catch (e){\n\t\tvar data = \"{\\\"id\\\":\\\"\"+jsonp+\"\\\",\\\"status\\\":\"+status+\",\\\"statusText\\\":\\\"\"+statusText+\"\\\",\\\"response\\\":\\\"\"+response.replace(/\\\"/g, '\\\\\\\\\\\"')+\"\\\"}\";\n\t\ttry {\n\t\t\tctx.postMessage(data, document.referrer);\n\t\t} catch (e){}\n\t}\n})(window.parent, '{{request_param_callback}}');\n</script>\n\n<!-- or -->\n\n<?php\n\tinclude './FileAPI.class.php';\n\n\tif( strtoupper($_SERVER['REQUEST_METHOD']) == 'POST' ){\n\t\t// Retrieve File List\n\t\t$files\t= FileAPI::getFiles();\n\n\t\t// ... your logic\n\n\t\t// JSONP callback name\n\t\t$jsonp\t= isset($_REQUEST['callback']) ? trim($_REQUEST['callback']) : null;\n\n\t\t// Server response: \"HTTP/1.1 200 OK\"\n\t\tFileAPI::makeResponse(array(\n\t\t\t  'status' => FileAPI::OK\n\t\t\t, 'statusText' => 'OK'\n\t\t\t, 'body' => array('count' => sizeof($files))\n\t\t), $jsonp);\n\t\texit;\n\t}\n?>\n```\n\n---\n\n<a name=\"server.CORS\"></a>\n### CORS\nEnable CORS.\n\n```php\n<?php\n\t// Permitted types of request\n    header('Access-Control-Allow-Methods: POST, OPTIONS');\n\n    // Describe custom headers\n    header('Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Range, Content-Disposition, Content-Type');\n\n    // A comma-separated list of domains\n    header('Access-Control-Allow-Origin: ' . $_SERVER['HTTP_ORIGIN']);\n\n\t// Allow cookie\n\theader('Access-Control-Allow-Credentials: true');\n\n    if( $_SERVER['REQUEST_METHOD'] == 'OPTIONS' ){\n        exit;\n    }\n\n    if( $_SERVER['REQUEST_METHOD'] == 'POST' ){\n        // ...\n    }\n?>\n```\n\n---\n\n<a name=\"server.chunked\"></a>\n### Chunked file upload\nClient and server communicate to each other using the following HTTP headers and status codes.<br/>\nClient explicitly sets the following headers:<br/>\n<ul>\n\t<li>Content-Range: bytes &lt;start-offset&gt;-&lt;end-offset&gt;/&lt;total&gt;</li>\n\t<li>Content-Disposition: attachment; filename=&lt;file-name&gt;</li>\n</ul>\nAny other headers are set by a target browser and are not used by client. Library does not provide any facilities to track a file uniqueness across requests, it's left on developer's consideration.<br/>\nResponse codes:\n<ul>\n\t<li>200 - last chunk is uploaded</li>\n\t<li>201 - chunk is successfully saved</li>\n\t<li>416 - range is not acceptable error, recoverable</li>\n\t<li>500 - server error, recoverable</li>\n</ul>\nFor recoverable errors server tries to resend chunk `chunkUploadRetry` times then fails.<br/\nResponse headers:\n<ul>\n\t<li>X-Last-Known-Byte: int, library tries to resend chunk from the given offset. Applicable to response codes 200 and 416</li>\n</ul>\nAll the other codes - fatal error, user's involvement is recommended.\n\n---\n\n\n<a name=\"buttons.examples\"></a>\n## Buttons examples\n\n<a name=\"buttons.examples.base\"></a>\n### Base\nSimple input[type=\"file\"]\n\n```html\n<span class=\"js-fileapi-wrapper\" style=\"position: relative; display: inline-block;\">\n    <input name=\"files\" type=\"file\" multiple/>\n</span>\n```\n\n---\n\n<a name=\"buttons.examples.button\"></a>\n### Button\nStylized button.\n\n```html\n<style>\n.upload-btn {\n    width: 130px;\n    height: 25px;\n    overflow: hidden;\n    position: relative;\n    border: 3px solid #06c;\n    border-radius: 5px;\n    background: #0cf;\n\n}\n    .upload-btn:hover {\n        background: #09f;\n    }\n    .upload-btn__txt {\n        z-index: 1;\n        position: relative;\n        color: #fff;\n        font-size: 18px;\n        font-family: \"Helvetica Neue\";\n        line-height: 24px;\n        text-align: center;\n        text-shadow: 0 1px 1px #000;\n    }\n    .upload-btn input {\n        top: -10px;\n        right: -40px;\n        z-index: 2;\n        position: absolute;\n        cursor: pointer;\n        opacity: 0;\n        filter: alpha(opacity=0);\n        font-size: 50px;\n    }\n</style>\n<div class=\"js-fileapi-wrapper upload-btn\">\n    <div class=\"upload-btn__txt\">Upload files</div>\n    <input name=\"files\" type=\"file\" multiple />\n</div>\n```\n\n\n---\n\n\n<a name=\"buttons.examples.link\"></a>\n### Link\nButton like link.\n\n```html\n<style>\n.upload-link {\n    color: #36c;\n    display: inline-block;\n    *zoom: 1;\n    *display: inline;\n    overflow: hidden;\n    position: relative;\n    padding-bottom: 2px;\n    text-decoration: none;\n}\n    .upload-link__txt {\n        z-index: 1;\n        position: relative;\n        border-bottom: 1px dotted #36c;\n    }\n        .upload-link:hover .upload-link__txt {\n            color: #f00;\n            border-bottom-color: #f00;\n        }\n\n    .upload-link input {\n        top: -10px;\n        right: -40px;\n        z-index: 2;\n        position: absolute;\n        cursor: pointer;\n        opacity: 0;\n        filter: alpha(opacity=0);\n        font-size: 50px;\n    }\n</style>\n<a class=\"js-fileapi-wrapper upload-link\">\n    <span class=\"upload-link__txt\">Upload photo</span>\n    <input name=\"photo\" type=\"file\" accept=\"image/*\" />\n</a>\n```\n\n---\n\n<a name=\"install\" data-name=\"Installation\"></a>\n## Installation, testing, assembling\n`npm install fileapi`<br/>\n`cd fileapi`<br/>\n`npm install`<br/>\n`grunt`\n\n\n---\n\n\n<a name=\"Changelog\"></a>\n## Changelog\n\n### 2.0.20\n<ul>\n\t<li>#369: * IEMobile</li>\n</ul>\n\n\n### 2.0.19\n<ul>\n\t<li>#367: * [flash] allow gif and bmp to resize</li>\n</ul>\n\n\n### 2.0.18\n<ul>\n\t<li>#364: * Camera#stop</li>\n\t<li>#363: * support `Blob` in `FileAPI.getInfo`</li>\n\t<li>#361: + upload zero-files</li>\n</ul>\n\n\n### 2.0.16-2.0.17\n<ul>\n\t<li>#353: debug mode vs. IE</li>\n\t<li>#352: correct filename via flash-uploading</li>\n</ul>\n\n\n### 2.0.12-2.0.15 (!)\n<ul>\n\t<li>#346, #342, #344: fixes for XSS into Flash-transport</li>\n</ul>\n\n\n### 2.0.11\n<ul>\n\t<li>#322, #308: dnd & safari + $.fn.dnd (store all dropped items)</li>\n\t<li>#319: NodeJS tesing</li>\n\t<li>#317, #313: fixed \"malformed entry.name (OSX Unicode NFD)\"</li>\n\t<li>#311: fixed \"Arithmetic result exceeded 32 bits\"</li>\n</ul>\n\n\n### 2.0.10\n<ul>\n\t<li>#289: * WebCam & html5 == false</li>\n\t<li>#199, #265: flash fix 2015 error with BitmapData</li>\n\t<li>#177: IE9, IE11 flash.camera remembered settigns</li>\n\t<li>#254: check 'onLoadFnName' before call</li>\n\t<li>#272: fixed `entry.createReader().readEntries`</li>\n</ul>\n\n\n### 2.0.9\n<ul>\n\t<li>#253: fixed `proxyXHR.loaded`</li>\n\t<li>#250: + check `disabled`-attr</li>\n</ul>\n\n\n### 2.0.8\n<ul>\n\t<li>Two new resize strategies `width` and `height`</li>\n</ul>\n\n\n### 2.0.7\n<ul>\n\t<li>#214: iframe transport under IE8</li>\n\t<li>Fixed iframe-transport (remove `disabled`-attr for input)</li>\n</ul>\n\n\n### 2.0.6\n<ul>\n\t<li>#240: Fixed `FileAPI.event.dnd.off`</li>\n</ul>\n\n\n### 2.0.5\n<ul>\n\t<li>+ #228: check callbacks with regexp</li>\n\t<li>* Updated devDepending</li>\n\t<li>+ #207: support EXIF.Orientation == 4, 5 & 7 </li>\n</ul>\n\n\n### 2.0.4\n<ul>\n\t<li>+ #176: Add params to the beginning of form</li>\n\t<li>+ #190: Add 204 as a successful response</li>\n\t<li>+ #192: many bugfixes; + `retry` & `multipass` options; + QUnit-tests for BigSizeImage</li>\n</ul>\n\n### 2.0.3\n<ul>\n\t<li>+ QUnit-tests for iframe-transport</li>\n\t<li>+ `postMessage` for iframe-transport</li>\n\t<li>+ `jsonp: \"callback\"` option</li>\n\t<li>* resize: `imageTransform.type` rename to `imageTransform.strategy` (!!!)</li>\n\t<li>+ https://github.com/mailru/FileAPI/pull/165 (#140: fix)</li>\n</ul>\n\n### 2.0.2\n<ul>\n\t<li>+ test: upload headers</li>\n\t<li>+ test: upload + camanjs</li>\n\t<li>+ test: upload + autoOrientation</li>\n\t<li>FileAPI.class.php: + HTTP header Content-Type: application/json</li>\n\t<li>#143: + `FileAPI.flashWebcamUrl` option</li>\n\t<li>* merge v1.2.7</li>\n\t<li>+ `FileAPI.formData: true` option</li>\n</ul>\n\n### 2.0.1\n<ul>\n\t<li>+ support 'filter' prop in imageTransform</li>\n</ul>\n\n### 2.0.0\n<ul>\n\t<li>+ FileAPI.Camera (HTML5 and Flash fallback)</li>\n\t<li>+ jquery.fileapi.js, see <a href=\"http://rubaxa.github.io/jquery.fileapi/\">demo</a></li>\n\t<li>+ npm support</li>\n\t<li>+ grunt support</li>\n\t<li>+ requirejs support</li>\n\t<li>+ [#80](https://https://github.com/mailru/FileAPI/issues/80): FileAPI.Image.fn.overlay</li>\n \t<li>`imageTransform` — now supports: `crop`, `type`, `quality` and `overlay` properties.</li>\n\t<li>Improved the documentation</li>\n\t<li>+iOS fix (https://github.com/blueimp/JavaScript-Load-Image)</li>\n\t<li>[#121](https://github.com/mailru/FileAPI/issues/121): + FileAPI.`postNameConcat:Function(name, idx)`</li>\n\t<li>[#116](https://github.com/mailru/FileAPI/issues/116): + `cache:false` option for FileAPI.upload</li>\n</ul>\n\n\n### 1.2.6\n<ul>\n\t<li>[#91](https://github.com/mailru/FileAPI/issues/91): replace `new Image` to `FileAPI.newImage`</li>\n\t<li>+ FileAPI.withCredentials: true</li>\n\t<li>[#90](https://github.com/mailru/FileAPI/issues/90): Fixed `progress` event</li>\n\t<li>[#105](https://github.com/mailru/FileAPI/issues/105): Fixed `image/jpg` -> `image/jpeg`</li>\n\t<li>[#108](https://github.com/mailru/FileAPI/issues/108): Check width/height before resize by type(min/max)</li>\n</ul>\n\n\n### 1.2.5\n<ul>\n\t<li>[#86](https://github.com/mailru/FileAPI/issues/86): Smarter upload recovery</li>\n\t<li>[#87](https://github.com/mailru/FileAPI/issues/87): Fixed upload files into browsers that do not support FormData</li>\n\t<li>Fixed support \"accept\" attribute for Flash.</li>\n\t<li>Fixed detection of HTML5 support for FireFox 3.6</li>\n\t<li> + FileAPI.html5 option, default \"true\"</li>\n</ul>\n\n\n### 1.2.4\n<ul>\n\t<li>Fixed auto orientation image by EXIF (Flash)</li>\n\t<li>Fixed image dimensions after rotate (Flash)</li>\n\t<li>[#82](https://github.com/mailru/FileAPI/issues/82): \"undefined\" data-fields cause exceptions</li>\n\t<li>[#83](https://github.com/mailru/FileAPI/issues/83): Allow requests without files</li>\n\t<li>[#84](https://github.com/mailru/FileAPI/pull/84): Fixed connection abort when waiting for connection recovery</li>\n</ul>\n\n\n### 1.2.3\n<ul>\n\t<li>[#77](https://github.com/mailru/FileAPI/pull/77): Fixed flash.abort(), [#75](https://github.com/mailru/FileAPI/issues/75)</li>\n\t<li>- `FileAPI.addMime`</li>\n\t<li>+ `FileAPI.accept` — fallback for flash.</li>\n</ul>\n\n\n### 1.2.2\n<ul>\n\t<li>[#67](https://github.com/mailru/FileAPI/pull/67): Added correct httpStatus for upload fail, [#62](https://github.com/mailru/FileAPI/pull/68)</li>\n\t<li>[#68](https://github.com/mailru/FileAPI/pull/68) Added \"Content-Type\" for chunked upload, [#65](https://github.com/mailru/FileAPI/pull/65)</li>\n\t<li>[#69](https://github.com/mailru/FileAPI/issues/69): Fixed network down recovery</li>\n\t<li>Fixed progress event, [#66](https://github.com/mailru/FileAPI/issues/66)</li>\n\t<li>Increase flash stage size, [#73](https://github.com/mailru/FileAPI/pull/73)</li>\n\t<li>- array index from POST-param \"name\", [#72](https://github.com/mailru/FileAPI/issues/72)</li>\n\t<li>- dependency on FileAPI.Image for FileAPI.Flash</li>\n</ul>\n\n\n### 1.2.1\n<ul>\n\t<li>[#64](https://github.com/mailru/FileAPI/issues/64): Bufixed for [#63](https://github.com/mailru/FileAPI/issues/63)</li>\n</ul>\n\n\n### 1.2.0\n<ul>\n\t<li>[#57](https://github.com/mailru/FileAPI/issues/57): Chunked file upload</li>\n</ul>\n\n\n### 1.1.0\n<ul>\n\t<li>[#54](https://github.com/mailru/FileAPI/issues/54): added `FileAPI.flashUrl` and `FileAPI.flashImageUrl`</li>\n</ul>\n\n\n### 1.0.1\n<ul>\n\t<li>[#51](https://github.com/mailru/FileAPI/issues/51): remove circular references from `file-objects` (Flash transport)</li>\n\t<li>added `changelog`</li>\n</ul>\n\n\n### 1.0.0\n<ul>\n\t<li>first release</li>\n</ul>\n"
        },
        {
          "name": "README.ru.md",
          "type": "blob",
          "size": 35.75390625,
          "content": "﻿<a name=\"FileAPI\"></a>\n## FileAPI\nНабор JavaScript инструментов для работы с файлами.\n\n<a name=\"started\"></a>\n### Get started\n\n```html\n\t<div>\n\t\t<!-- \"js-fileapi-wrapper\" -- обязательный class -->\n\t\t<div class=\"js-fileapi-wrapper upload-btn\" id=\"choose\">\n\t\t\t<div class=\"upload-btn__txt\">Choose files</div>\n\t\t\t<input name=\"files\" type=\"file\" multiple />\n\t\t</div>\n\t\t<div id=\"images\"><!-- предпросмотр --></div>\n\t</div>\n\n\t<script>window.FileAPI = { staticPath: '/js/FileAPI/dist/' };</script>\n\t<script src=\"/js/FileAPI/dist/FileAPI.min.js\"></script>\n\t<script>\n\t\tFileAPI.event.on(choose, 'change', function (evt){\n\t\t\tvar files = FileAPI.getFiles(evt); // Retrieve file list\n\n\t\t\tFileAPI.filterFiles(files, function (file, info/**Object*/){\n\t\t\t\tif( /^image/.test(file.type) ){\n\t\t\t\t\treturn\tinfo.width >= 320 && info.height >= 240;\n\t\t\t\t}\n\t\t\t\treturn\tfalse;\n\t\t\t}, function (files/**Array*/, rejected/**Array*/){\n\t\t\t\tif( files.length ){\n\t\t\t\t\t// Создаем предпросмотр 100x100\n\t\t\t\t\tFileAPI.each(files, function (file){\n\t\t\t\t\t\tFileAPI.Image(file).preview(100).get(function (err, img){\n\t\t\t\t\t\t\timages.appendChild(img);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t// Загружаем файлы\n\t\t\t\t\tFileAPI.upload({\n\t\t\t\t\t\turl: './ctrl.php',\n\t\t\t\t\t\tfiles: { images: files },\n\t\t\t\t\t\tprogress: function (evt){ /* ... */ },\n\t\t\t\t\t\tcomplete: function (err, xhr){ /* ... */ }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t</script>\n```\n\n---\n\n<a name=\"FileAPI.setup\"></a>\n### Setup options\nОтредактируйте файл `crossdomain.xml` и разместите его в корне домена, на который будут загружаться файлы.\n\n```html\n\t<script>\n\t\twindow.FileAPI = {\n\t\t\t  debug: false  // дебаг режим, смотрите Console\n\t\t\t, cors: false   // если используете CORS -- `true`\n\t\t\t, media: false  // если используете веб-камеру -- `true`\n\t\t\t, staticPath: '/js/FileAPI/dist/' // путь к '*.swf'\n\t\t\t, postNameConcat: function (name, idx){\n\t\t\t\t// Default: object[foo]=1&object[bar][baz]=2\n\t\t\t\t// .NET: https://github.com/mailru/FileAPI/issues/121#issuecomment-24590395\n\t\t\t\treturn\tname + (idx != null ? '['+ idx +']' : '');\n\t\t\t}\n\t\t};\n\t</script>\n\t<script src=\"/js/FileAPI/dist/FileAPI.min.js\"></script>\n\n\t<!-- ИЛИ -->\n\n\t<script>\n\t\twindow.FileAPI = { /* etc. */ };\n\t\trequire(['FileAPI'], function (FileAPI){\n\t\t\t// ...\n\t\t});\n\t</script>\n```\n\n---\n\n\n<a name=\"FileAPI.getFiles\"></a>\n### getFiles(input`:HTMLInputElement|Event|$.Event`)`:Array`\nПолучить список файлов из `input` элемента, или `event`, также поддерживается `jQuery`.\n\n* input — `HTMLInputElement`, `change` и `drop` события, `jQuery` коллекция или `jQuery.Event`\n\n```js\nvar el = document.getElement('my-input');\nFileAPI.event.on(el, function (evt/**Event*/){\n\t// Получить список файлов из `input`\n\tvar files = FileAPI.getFiles(el);\n\n\t// или события\n\tvar files = FileAPI.getFiles(evt);\n});\n```\n\n---\n\n<a name=\"FileAPI.getInfo\"></a>\n### getInfo(file`:Object`, callback`:Function`)`:void`\nПолучить информацию о файле (см. FileAPI.addInfoReader).\n\n* file — объект файла (https://developer.mozilla.org/en-US/docs/DOM/File)\n* callback — функция, вызывается по завершению сбора информации\n\n```js\n// Получить информацию о изображении (FileAPI.exif.js подключен)\nFileAPI.getInfo(file, function (err/**String*/, info/**Object*/){\n\tif( !err ){\n\t\tconsole.log(info); // { width: 800, height: 600, exif: {..} }\n\t}\n});\n\n// Получить информацию о mp3 файле (FileAPI.id3.js included)\nFileAPI.getInfo(file, function (err/**String*/, info/**Object*/){\n\tif( !err ){\n\t\tconsole.log(info); // { title: \"...\", album: \"...\", artists: \"...\", ... }\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.filterFiles\"></a>\n### filterFiles(files`:Array`, filter`:Function`, callback`:Function`)`:void`\nОтфильтровать список файлов, используя дополнительную информацию о них.\nсм. FileAPI.getInfo или FileAPI.addInfoReader.\n\n* files — оригинальный список файлов\n* filter — функция, принимает два аргумента: `file` — сам файл, `info` — дополнительная информация\n* callback — функция: `list` — список файлов, подошедшие под условия, `other` — все остальные.\n\n```js\n// Получаем список файлов\nvar files = FileAPI.getFiles(input);\n\n// Фильтруем список\nFileAPI.filterFiles(files, function (file/**Object*/, info/**Object*/){\n\tif( /^image/.test(file.type) && info ){\n\t\treturn\tinfo.width > 320 && info.height > 240;\n\t} else {\n\t\treturn\tfile.size < 20 * FileAPI.MB;\n\t}\n}, function (list/**Array*/, other/**Array*/){\n\tif( list.length ){\n\t\t// ..\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.getDropFiles\"></a>\n### getDropFiles(evt`:Event|$.Event`, callback`:Function`)`:void`\nПолучить весь список файлов, включая директории.\n\n* evt — `drop` event\n* callback — функция, принимает один аргумент — список файлов\n\n```js\nFileAPI.event.on(document, 'drop', function (evt/**Event*/){\n\tevt.preventDefault();\n\n\t// Получаем все файлы\n\tFileAPI.getDropFiles(evt, function (files/**Array*/){\n\t\t// ...\n\t});\n});\n```\n\n---\n\n<a name=\"FileAPI.upload\"></a>\n### upload(opts`:Object`)`:XmlHttpRequest`\nЗагрузка файлов на сервер (последовательно). Возвращает XHR-подобный объект.\nПомните, для корректной работы flash-транспорта, тело ответа сервера не должно быть пустым,\nнапример можно ответить простым текстом \"ok\".\n\n* opts — объект настроек, см. раздел [Upload options](#options)\n\n```js\nvar el = document.getElementById('my-input');\nFileAPI.event.on(el, 'change', function (evt/**Event*/){\n\tvar files = FileAPI.getFiles(evt);\n\tvar xhr = FileAPI.upload({\n\t\turl: 'http://rubaxa.org/FileAPI/server/ctrl.php',\n\t\tfiles: { file: files[0] },\n\t\tcomplete: function (err, xhr){\n\t\t\tif( !err ){\n\t\t\t\tvar result = xhr.responseText;\n\t\t\t\t// ...\n\t\t\t}\n\t\t}\n\t});\n});\n```\n\n---\n\n<a name=\"FileAPI.addInfoReader\"></a>\n### addInfoReader(mime`:RegExp`, handler`:Function`)`:void`\nДобавить обработчик, для сбора информации о файле.\nсм. также: FileAPI.getInfo и FileAPI.filterFiles.\n\n* mime — маска mime-type\n* handler — функция, принимает два аргумента: `file` объект и `complete` функция обратного вызова\n\n```js\nFileAPI.addInfoReader(/^image/, function (file/**File*/, callback/**Function*/){\n\t// http://www.nihilogic.dk/labs/exif/exif.js\n\t// http://www.nihilogic.dk/labs/binaryajax/binaryajax.js\n\tFileAPI.readAsBinaryString(file, function (evt/**Object*/){\n\t\tif( evt.type == 'load' ){\n\t\t\tvar binaryString = evt.result;\n\t\t\tvar oFile = new BinaryFile(binaryString, 0, file.size);\n\t\t\tvar exif  = EXIF.readFromBinaryFile(oFile);\n\t\t\tcallback(false, { 'exif': exif || {} });\n\t\t}\n\t\telse if( evt.type == 'error' ){\n\t\t\tcallback('read_as_binary_string');\n\t\t}\n\t\telse if( evt.type == 'progress' ){\n\t\t\t// ...\n\t\t}\n\t});\n});\n```\n\n---\n\n<a name=\"FileAPI.readAsDataURL\"></a>\n### readAsDataURL(file`:Object`, callback`:Function`)`:void`\nЧтение содержимого указанного файла как dataURL.\n\n* file — файл для чтения\n* callback — функция обработчик\n\n```js\nFileAPI.readAsDataURL(file, function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Всё хорошо\n\t \tvar dataURL = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Ошибка\n\t}\n})\n```\n\n---\n\n<a name=\"FileAPI.readAsBinaryString\"></a>\n### readAsBinaryString(file`:Object`, callback`:Function`)`:void`\nЧтение содержимого указанного файла как `BinaryString`.\n\n* file — файл для чтения\n* callback — функция обработчик\n\n```js\nFileAPI.readAsBinaryString(file, function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Всё хорошо\n\t \tvar binaryString = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Ошибка\n\t}\n})\n```\n\n---\n\n<a name=\"FileAPI.readAsArrayBuffer\"></a>\n### readAsArrayBuffer(file`:Object`, callback`:Function`)`:void`\nЧтение содержимого указанного файла как `ArrayBuffer`.\n\n* file — файл для чтения\n* callback — функция обработчик\n\n```js\nFileAPI.readAsArrayBuffer(file, function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Всё хорошо\n\t \tvar arrayBuffer = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Ошибка\n\t}\n})\n```\n\n---\n\n<a name=\"FileAPI.readAsText\"></a>\n### readAsText(file`:Object`, callback`:Function`)`:void`\nЧтение содержимого указанного файла как `text`.\n\n* file — файл для чтения\n* callback — функция обработчик\n\n```js\nFileAPI.readAsText(file, function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Всё хорошо\n\t \tvar text = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Ошибка\n\t}\n})\n```\n\n---\n\n<a name=\"FileAPI.readAsText-encoding\"></a>\n### readAsText(file`:Object`, encoding`:String`, callback`:Function`)`:void`\nЧтение содержимого указанного файла как `text` в нужной кодировке.\n\n* encoding — строкой с указанием кодировки. По умолчанию UTF-8.\n\n```js\nFileAPI.readAsText(file, \"utf-8\", function (evt/**Object*/){\n\tif( evt.type == 'load' ){\n\t\t// Всё хорошо\n\t \tvar text = evt.result;\n\t} else if( evt.type =='progress' ){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t} else {\n\t\t// Ошибка\n\t}\n})\n```\n\n---\n\n\n<a name=\"options\" data-name=\"Upload options\"></a>\n## Опции загрузки\n\n<a name=\"options.url\"></a>\n### url`:String`\nСтрока, содержащая адрес, на который отправляется запрос.\n\n---\n\n<a name=\"options.data\"></a>\n### data`:Object`\nДополнительные данные, которые должны быть отправлены вместе с файлом.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tdata: { 'session-id': 123 },\n\tfiles: { ... },\n});\n```\n\n---\n\n<a name=\"options.uploadMethod\"></a>\n### uploadMethod`:String`\nМетод запроса, только HTML5.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tuploadMethod: 'PUT',\n\tfiles: { ... },\n});\n```\n\n---\n\n<a name=\"options.uploadCredentials\"></a>\n### uploadCredentials`:Boolean`\nПередавать ли куки в запросе, только HTML5.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tuploadCredentials: false,\n\tfiles: { ... },\n});\n```\n\n---\n\n<a name=\"options.headers\"></a>\n### headers`:Object`\nДополнительные заголовки запроса, только HTML5.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\theaders: { 'x-upload': 'fileapi' },\n\tfiles: { .. },\n});\n```\n\n---\n\n<a name=\"options.chunkSize\"></a>\n### chunkSize`:Number`\nРазмер части файла в байтах, только HTML5.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { images: fileList },\n\tchunkSize: 0.5 * FileAPI.MB\n});\n```\n\n---\n\n<a name=\"options.chunkUploadRetry\"></a>\n### chunkUploadRetry`:Number`\nКоличество попыток загрузки одной части, только HTML5.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { images: fileList },\n\tchunkSize: 0.5 * FileAPI.MB,\n\tchunkUploadRetry: 3\n});\n```\n\n--\n\n<a name=\"options.imageTransform\"></a>\n### imageTransform`:Object`\nПравила модификации оригинально изображения.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { image: imageFiles },\n\t// Changes the original image\n\timageTransform: {\n\t\t// Ресайз по боьшой строне\n\t\tmaxWidth: 800,\n\t\tmaxHeight: 600,\n\t\t// Добавляем водяной знак\n\t\toverlay: [{ x: 10, y: 10, src: '/i/watemark.png', rel: FileAPI.Image.RIGHT_BOTTOM }]\n\t}\n});\n```\n\n--\n\n<a name=\"options.imageTransform-multi\"></a>\n### imageTransform`:Object`\nПравила для нарезки дополнительных изображения на клиенте.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { image: imageFiles },\n\timageTransform: {\n\t\t// Ресайз по большой строне\n\t\t'huge': { maxWidth: 800, maxHeight: 600 },\n\t\t// Ресайз и кроп\n\t\t'medium': { width: 320, height: 240, preview: true },\n\t\t// ресайз и кроп + водяной знак\n\t\t'small': {\n\t\t\twidth: 100, height: 100,\n\t\t\t// Добавляем водяной знак\n\t\t\toverlay: [{ x: 5, y: 5, src: '/i/watemark.png', rel: FileAPI.Image.RIGHT_BOTTOM }]\n\t\t}\n\t}\n});\n```\n\n--\n\n<a name=\"options.imageTransform-jpeg\"></a>\n### imageTransform`:Object`\nКонвертация всех изображений в jpeg или png.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { image: imageFiles },\n\timageTransform: {\n\t\ttype: 'image/jpeg',\n\t\tquality: 0.86 // качество jpeg\n\t}\n});\n```\n\n<a name=\"options.imageOriginal\"></a>\n### imageOriginal`:Boolean`\nОтправлять исходное изображение на сервер или нет, если определен `imageTransform` вариант.\n\n--\n\n<a name=\"options.imageAutoOrientation\"></a>\n### imageAutoOrientation`:Boolean`\nАвтоматический поворот изображения на основе EXIF.\n\n--\n\n<a name=\"options.prepare\"></a>\n### prepare`:Function`\nПодготовка опций загрузки для конкретного файла.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tprepare: function (file/**Object*/, options/**Object*/){\n\t\toptions.data.secret = utils.getSecretKey(file.name);\n\t}\n});\n```\n\n--\n\n<a name=\"options.upload\"></a>\n### upload`:Function`\nНачало загрузки\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tupload: function (xhr/**Object*/, options/**Object*/){\n\t\t// ...\n\t}\n});\n```\n\n--\n\n<a name=\"options.fileupload\"></a>\n### fileupload`:Function`\nНачало загрузки файла\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tfileupload: function (file/**Object*/, xhr/**Object*/, options/**Object*/){\n\t\t// ...\n\t}\n});\n```\n\n--\n\n<a name=\"options.progress\"></a>\n### progress`:Function`\nОбщий прогресс загрузки файлов.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tprogress: function (evt/**Object*/, file/**Object*/, xhr/**Object*/, options/**Object*/){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t}\n});\n```\n\n--\n\n<a name=\"options.fileprogress\"></a>\n### fileprogress`:Function`\nПрогресс загрузки файла.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tfileprogress: function (evt/**Object*/, file/**Object*/, xhr/**Object*/, options/**Object*/){\n\t\tvar pr = evt.loaded/evt.total * 100;\n\t}\n});\n```\n\n--\n\n<a name=\"options.complete\"></a>\n### complete`:Function`\nЗавершение загрузки всех файлов.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tcomplete: function (err/**String*/, xhr/**Object*/, file/**Object/, options/**Object*/){\n\t\tif( !err ){\n\t\t\t// Все файлы загружены успешно\n\t\t}\n\t}\n});\n```\n\n--\n\n<a name=\"options.filecomplete\"></a>\n### filecomplete`:Function`\nКонец загрузки файла.\n\n```js\nvar xhr = FileAPI.upload({\n\turl: '...',\n\tfiles: { .. }\n\tfilecomplete: function (err/**String*/, xhr/**Object*/, file/**Object/, options/**Object*/){\n\t\tif( !err ){\n\t\t\t// Файл загружен успешно\n\t\t\tvar result = xhr.responseText;\n\t\t}\n\t}\n});\n```\n\n---\n\n<a name=\"File\"></a>\n## File object\n\n<a name=\"File.name\"></a>\n### name\nИмя файла.\n\n<a name=\"File.type\"></a>\n### type\nMIME type\n\n<a name=\"File.size\"></a>\n### size\nРазмер файла в байтах.\n\n\n---\n\n\n<a name=\"FileAPI.event\"></a>\n## FileAPI.event\n\n<a name=\"FileAPI.event.on\"></a>\n### on(el`:HTMLElement`, events`:String`, handler`:Function`)`:void`\nДобавить функцию обработки события.\n\n* el — DOM элемент.\n* events — одно или нескольких разделенных пробелами типов событий.\n* handler — функция обработчик события.\n\n---\n\n<a name=\"FileAPI.event.off\"></a>\n### off(el`:HTMLElement`, events`:String`, handler`:Function`)`:void`\nУдалить обработчик события.\n\n* el — DOM элемент\n* events — одно или нескольких разделенных пробелами типов событий.\n* handler — функции обработчика ранее назначения на `event`.\n\n---\n\n<a name=\"FileAPI.event.one\"></a>\n### one(el`:HTMLElement`, events`:String`, handler`:Function`)`:void`\nДобавить функцию обработки события. Обработчик выполняется не более одного раза.\n\n* el — DOM элемент.\n* events — одно или нескольких разделенных пробелами типов событий.\n* handler — функция обработчик события.\n\n---\n\n<a name=\"FileAPI.event.dnd\"></a>\n### dnd(el`:HTMLElement`, hover`:Function`, handler`:Function`)`:void`\nДобавить функцию обработки событий `drag` и `drop`.\n\n* el — DOM элемент\n* hover — `dragenter` и `dragleave` слушатель\n* handler — обработчик события `drop`\n\n```js\nvar el = document.getElementById('dropzone');\nFileAPI.event.dnd(el, function (over){\n\tel.style.backgroundColor = over ? '#f60': '';\n}, function (files){\n\tif( files.length ){\n\t\t// Загружаем их.\n\t}\n});\n\n// или jQuery\n$('#dropzone').dnd(hoverFn, dropFn);\n```\n\n---\n\n<a name=\"FileAPI.event.dnd.off\"></a>\n### dnd.off(el`:HTMLElement`, hover`:Function`, handler`:Function`)`:void`\nУдалить функцию обработки событий `drag` и `drop`.\n\n* el — DOM элемент\n* hover — `dragenter` и `dragleave` слушатель\n* handler — обработчик события `drop`\n\n```js\n// Native\nFileAPI.event.dnd.off(el, hoverFn, dropFn);\n\n// jQuery\n$('#dropzone').dndoff(hoverFn, dropFn);\n```\n\n--\n\n<a name=\"FileAPI.Image\"></a>\n## FileAPI.Image\nКласс для работы с изображениями\n\n### constructor(file`:Object`)`:void`\nКонструктор получает только один параметр, файл.\n\n* file — файл изображения\n\n```js\nFileAPI.Image(imageFile).get(function (err/**String*/, img/**HTMLElement*/){\n\tif( !err ){\n\t\tdocument.body.appendChild( img );\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.Image.crop\"></a>\n### crop(width`:Number`, height`:Number`)`:FileAPI.Image`\nКроп изображения по ширине и высоте.\n\n* width — новая ширина изображения\n* height — новая высота изображения\n\n```js\nFileAPI.Image(imageFile)\n\t.crop(640, 480)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n### crop(x`:Number`, y`:Number`, width`:Number`, height`:Number`)`:FileAPI.Image`\nКроп изображения по ширине и высоте, а также смещению по x и y.\n\n* x — смещение относительно по x левого угла\n* y — смещение относительно по y левого угла\n\n```js\nFileAPI.Image(imageFile)\n\t.crop(100, 50, 320, 240)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.resize\"></a>\n### resize(width`:Number`, height`:Number`[, strategy`:String`])`:FileAPI.Image`\nРесайз.\n\n* width — новая ширина\n* height — новая высота\n* strategy — enum: `min`, `max`, `preview`, `width`, `height`. По умолчанию `undefined`.\n\n```js\nFileAPI.Image(imageFile)\n\t.resize(320, 240)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n\n// По большей стороне\nFileAPI.Image(imageFile)\n\t.resize(320, 240, 'max')\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n\n// По заданной высоте.\nFileAPI.Image(imageFile)\n\t.resize(240, 'height')\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.preview\"></a>\n### preview(width`:Number`[, height`:Number`])`:FileAPI.Image`\nКроп и ресайз изображения.\n\n* width — новая ширина\n* height — новая высота\n\n```js\nFileAPI.Image(imageFile)\n\t.preview(100, 100)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.rotate\"></a>\n### rotate(deg`:Number`)`:FileAPI.Image`\nПоворот.\n\n* deg — угол поворота в градусах\n\n```js\nFileAPI.Image(imageFile)\n\t.rotate(90)\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.filter\"></a>\n### filter(callback`:Function`)`:FileAPI.Image`\nПрименить фильтр функцию. Только `HTML5`.\n\n* callback — принимает два рагумента, `canvas` элемент и метод `done`.\n\n```js\nFileAPI.Image(imageFile)\n\t.filter(function (canvas/**HTMLCanvasElement*/, doneFn/**Function*/){\n\t\t// бла-бла-бла\n\t\tdoneFn(); // вызываем по завершению\n\t})\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n\n---\n\n### filter(name`:String`)`:FileAPI.Image`\nИспользуется [CamanJS](http://camanjs.com/), подключите его перед библиотекой FileAPI.\n\n* name — название CamanJS фильтра (произвольный, либо предустановленный)\n\n```js\nCaman.Filter.register(\"my-funky-filter\", function () {\n\t// http://camanjs.com/guides/#Extending\n});\n\nFileAPI.Image(imageFile)\n\t.filter(\"my-funky-filter\") // или .filter(\"vintage\")\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.overlay\"></a>\n### overlay(images`:Array`)`:FileAPI.Image`\nДобавить наложение, например: водяной знак.\n\n* images — массив наложений\n\n```js\nFileAPI.Image(imageFile)\n\t.overlay([\n\t\t// Левый угл.\n\t\t{ x: 10, y: 10, w: 100, h: 10, src: '/i/watermark.png' },\n\n\t\t// Правый нижний угл.\n\t\t{ x: 10, y: 10, src: '/i/watermark.png', rel: FileAPI.Image.RIGHT_BOTTOM }\n\t])\n\t.get(function (err/**String*/, img/**HTMLElement*/){\n\n\t})\n;\n```\n\n---\n\n<a name=\"FileAPI.Image.get\"></a>\n### get(fn`:Function`)`:FileAPI.Image`\nПолучить итоговое изображение.\n\n* fn — функция обратного вызова\n\n---\n\n<a name=\"FileAPI.Camera\"></a>\n## FileAPI.Camera\nДля работы с веб-камерой, обязательно установить параметр `FileAPI.media: true`.\n\n\n<a name=\"FileAPI.Camera.publish\"></a>\n### publish(el`:HTMLElement`, options`:Object`, callback`:Function`)`:void`\nПубликация камеры.\n\n* el — куда публикуем\n* options — { `width: 100%`, `height: 100%`, `start: true` }\n* callback — первый параметр возможная ошибка, второй экземпляр FileAPI.Camera\n\n```js\nvar el = document.getElementById('cam');\nFileAPI.Camera.publish(el, { width: 320, height: 240 }, function (err, cam/**FileAPI.Camera*/){\n\tif( !err ){\n\t\t// Камера готова, можно использовать\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.Camera.start\"></a>\n### start(callback`:Function`)`:void`\nВключить камеру\n\n* callback — будет вызван в момент готовности камеры\n\n```js\nvar el = document.getElementById('cam');\nFileAPI.Camera.publish(el, { start: false }, function (err, cam/**FileAPI.Camera*/){\n\tif( !err ){\n\t\t// Включаем камеру\n\t\tcam.start(function (err){\n\t\t\tif( !err ){\n\t\t\t\t// камера готова к использованию\n\t\t\t}\n\t\t});\n\t}\n});\n```\n\n---\n\n<a name=\"FileAPI.Camera.stop\"></a>\n### stop()`:void`\nВыключить камеру\n\n---\n\n<a name=\"FileAPI.Camera.shot\"></a>\n### shot()`:FileAPI.Image`\nСделать снимок с камеры\n\n```js\nvar el = document.getElementById('cam');\nFileAPI.Camera.publish(el, function (err, cam/**FileAPI.Camera*/){\n\tif( !err ){\n\t\tvar shot = cam.shot(); // делаем снимок\n\n\t\t// создаем предпросмотр 100x100\n\t\tshot.preview(100).get(function (err, img){\n\t\t\tpreviews.appendChild(img);\n\t\t});\n\n\t\t// и/или загружаем\n\t\tFileAPI.upload({\n\t\t\turl: '...',\n\t\t\tfiles: { cam: shot\n\t\t});\n\t}\n});\n```\n\n---\n\n\n<a name=\"const\" data-name=\"Сonst\"></a>\n## Константы\n\n<a name=\"FileAPI.KB\"></a>\n### FileAPI.KB`:Number`\n1024 байт\n\n<a name=\"FileAPI.MB\"></a>\n### FileAPI.MB`:Number`\n1048576 байт\n\n<a name=\"FileAPI.GB\"></a>\n### FileAPI.GB`:Number`\n1073741824 байт\n\n<a name=\"FileAPI.TB\"></a>\n### FileAPI.TB`:Number`\n1.0995116e+12 байт\n\n---\n\n<a name=\"FileAPI.utils\"></a>\n## Utils\n\n<a name=\"FileAPI.each\"></a>\n### FileAPI.each(obj`:Object|Array`, callback`:Function`[, thisObject`:Mixed`])`:void`\nПеребор объект или массив, выполняя функцию для каждого элемента.\n\n* obj — массив или объект\n* callback — функция, выполняется для каждого элемента.\n* thisObject — объект для использования в качестве `this` при выполнении `callback`.\n\n--\n\n<a name=\"FileAPI.extend\"></a>\n### FileAPI.extend(dst`:Object`, src`:Object`)`:Object`\nОбъединить содержимое двух объектов вместе.\n\n* dst — объект, который получит новые свойства\n* src — объект, содержащий дополнительные свойства для объединения\n\n--\n\n<a name=\"FileAPI.filter\"></a>\n### FileAPI.filter(array`:Array`, callback`:Function`[, thisObject`:Mixed`)`:Object`\nСоздает новый массив со всеми элементами, которые соответствуют условиям.\n\n* array — оригинальный массив\n* callback — функция для проверки каждого элемента массива.\n* thisObject — объект для использования в качестве `this` при выполнении `callback`.\n\n---\n\n<a name=\"support\"><a/>\n## Support\n<ul>\n\t<li>Multiupload: все браузеры поддерживающие HTML5 или Flash</li>\n\t<li>Drag'n'Drop загрузка: файлы (HTML5) и директории (Chrome 21+)</li>\n\t<li>Загрузка файлов по частям, только HTML5</li>\n\t<li>Загрузка одно файла: все браузеры, даже очень старые</li>\n\t<li>\n\t\tРабота с изображениями: IE6+, FF 3.6+, Chrome 10+, Opera 11.1+, Safari 5.4+\n\t\t<ul>\n\t\t\t<li>crop, resize, preview & rotate (HTML5 или Flash)</li>\n\t\t\t<li>авто ориентация на основе EXIF (HTML5, если подключен FileAPI.exif.js или Flash)</li>\n\t\t</ul>\n\t</li>\n</ul>\n\n<a name=\"FileAPI.support.html5\"></a>\n### FileAPI.support.html5`:Boolean`\nПоддержка HTML5.\n\n<a name=\"FileAPI.support.cors\"></a>\n### FileAPI.support.cors`:Boolean`\nПоддержка кроссдоменных запросов.\n\n<a name=\"FileAPI.support.dnd\"></a>\n### FileAPI.support.dnd`:Boolean`\nПоддержка Drag'n'drop событий.\n\n<a name=\"FileAPI.support.flash\"></a>\n### FileAPI.support.flash`:Boolean`\nНаличие Flash плагина.\n\n<a name=\"FileAPI.support.canvas\"></a>\n### FileAPI.support.canvas`:Boolean`\nПоддержка canvas.\n\n<a name=\"FileAPI.support.dataURI\"></a>\n### FileAPI.support.dataURI`:Boolean`\nПоддержка dataURI в качестве src для изображений.\n\n<a name=\"FileAPI.support.chunked\"></a>\n### FileAPI.support.chunked`:Boolean`\nВозможность загрузки по частям.\n\n---\n\n<a name=\"flash\"></a>\n## Flash\nФлеш очень \"глючная\" штука :]\nПоэтому в случае успешной загрузки http status должен быть только `200 OK`.\n\n<a name=\"flash.settings\"></a>\n### Settings\nНастройки для flash части.\nЖелательно, разместить flash на том же сервере, куда будут загружаться файлы.\n\n```html\n<script>\n\tvar FileAPI = {\n\t \t// @default: \"./dist/\"\n\t\tstaticPath: '/js/',\n\n\t\t // @default: FileAPI.staticPath + \"FileAPI.flash.swf\"\n\t\tflashUrl: '/statics/FileAPI.flash.swf',\n\n\t\t// @default: FileAPI.staticPath + \"FileAPI.flash.image.swf\"\n\t\tflashImageUrl: '/statics/FileAPI.flash.image.swf'\n\t};\n</script>\n<script src=\"/js/FileAPI.min.js\"></script>\n```\n\n---\n\n<a name=\"crossdomain.xml\"></a>\n### crossdomain.xml\nОбязательно создайте этот файл на сервере, куда будут загружаться файлы.\nНе забудьте заменить `youdomain.com` на имя вашего домена.\n\n```xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE cross-domain-policy SYSTEM \"http://www.adobe.com/xml/dtds/cross-domain-policy.dtd\">\n<cross-domain-policy>\n\t<site-control permitted-cross-domain-policies=\"all\"/>\n\t<allow-access-from domain=\"youdomain.com\" secure=\"false\"/>\n\t<allow-access-from domain=\"*.youdomain.com\" secure=\"false\"/>\n\t<allow-http-request-headers-from domain=\"*\" headers=\"*\" secure=\"false\"/>\n</cross-domain-policy>\n```\n\n---\n\n<a name=\"flash.request\"></a>\n### request\nПример запроса, который отправляет flash player.\n\n```xml\nPOST /server/ctrl.php HTTP/1.1\nAccept: text/*\nContent-Type: multipart/form-data;\nboundary=----------Ij5ae0ae0KM7GI3KM7\nUser-Agent: Shockwave Flash\nHost: www.youdomain.com\nContent-Length: 421\nConnection: Keep-Alive\nCache-Control: no-cache\n\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name=\"Filename\"\n\nMyFile.jpg\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name=\"Filedata\"; filename=\"MyFile.jpg\"\nContent-Type: application/octet-stream\n\n[[..FILE_DATA_HERE..]]\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name=\"Upload\"\n\nSubmit Query\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7--\n```\n\n---\n\n<a name=\"flash.security\"></a>\n### Security\nПо умолчанию `FileAPI.flash.swf` разрешает доступ с любых доменов `Security.allowDomain(\"*\")`.\nЭто может привести к уязвимости same origin bypass, если flash лежит на том же домене, что и критичные данные.\nЧтобы этого избежать, нужно разрешить доступ только к своим доменам [здесь](https://github.com/mailru/FileAPI/blob/master/flash/core/src/ru/mail/communication/JSCallbackPresenter.as#L25) и пересобрать flash.\n\n---\n\n<a name=\"server\"></a>\n## Server settings\n\n<a name=\"server.iframe\"></a>\n### IFrame/JSONP\n\n```php\n<script>\n(function (ctx, jsonp){\n\t'use strict';\n\tvar status = {{httpStatus}}, statusText = \"{{httpStatusText}}\", response = \"{{responseBody}}\";\n\ttry {\n\t\tctx[jsonp](status, statusText, response);\n\t} catch (e){\n\t\tvar data = \"{\\\"id\\\":\\\"\"+jsonp+\"\\\",\\\"status\\\":\"+status+\",\\\"statusText\\\":\\\"\"+statusText+\"\\\",\\\"response\\\":\\\"\"+response.replace(/\\\"/g, '\\\\\\\\\\\"')+\"\\\"}\";\n\t\ttry {\n\t\t\tctx.postMessage(data, document.referrer);\n\t\t} catch (e){}\n\t}\n})(window.parent, '{{request_param_callback}}');\n</script>\n\n<!-- or -->\n\n<?php\n\tinclude './FileAPI.class.php';\n\n\tif( strtoupper($_SERVER['REQUEST_METHOD']) == 'POST' ){\n\t\t// Получим список файлов\n\t\t$files\t= FileAPI::getFiles();\n\n\t\t// ... ваша логика\n\n\t\t// JSONP callback name\n\t\t$jsonp\t= isset($_REQUEST['callback']) ? trim($_REQUEST['callback']) : null;\n\n\t\t// Ответ сервера: \"HTTP/1.1 200 OK\"\n\t\tFileAPI::makeResponse(array(\n\t\t\t  'status' => FileAPI::OK\n\t\t\t, 'statusText' => 'OK'\n\t\t\t, 'body' => array('count' => sizeof($files))\n\t\t), $jsonp);\n\t\texit;\n\t}\n?>\n```\n\n---\n\n<a name=\"server.CORS\"></a>\n### CORS\nВключение CORS.\n\n```php\n<?php\n\t// Permitted types of request\n    header('Access-Control-Allow-Methods: POST, OPTIONS');\n\n    // Describe custom headers\n    header('Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Range, Content-Disposition, Content-Type');\n\n    // A comma-separated list of domains\n    header('Access-Control-Allow-Origin: ' . $_SERVER['HTTP_ORIGIN']);\n\n    if( $_SERVER['REQUEST_METHOD'] == 'OPTIONS' ){\n        exit;\n    }\n\n    if( $_SERVER['REQUEST_METHOD'] == 'POST' ){\n        // ...\n    }\n```\n\n---\n\n<a name=\"server.chunked\"></a>\n### Chunked file upload\nВсё общение между клиентом и сервером ведётся на уровне HTTP заголовков.<br/>\nДля передачи отдельного chunk'а клиент устанавливает заголовки:<br/>\n<ul>\n\t<li>Content-Range: bytes &lt;start-offset>-&lt;end-offset>/&lt;total></li>\n\t<li>Content-Disposition: attachment; filename=&lt;file-name></li>\n</ul>\nДругие заголовки не используются, отслеживание уникальности имени передаваемого файла не реализуется и оставлено на усмотрение разработчика.<br/>\nВ ответ на передаваемый chunk сервер может отвечать следующими кодами:<br/>\n<ul>\n\t<li>200, 201 — chunk сохранён успешно</li>\n\t<li>416, 500 — восстановимая ошибка</li>\n</ul>\nОстальные коды — фатальная ошибка, требуется вмешательство пользователя.\n\n\n\n---\n\n## Buttons examples\n\n### Base\nПростой input[type=\"file\"]\n\n```html\n<span class=\"js-fileapi-wrapper\" style=\"position: relative; display: inline-block;\">\n    <input name=\"files\" type=\"file\" multiple/>\n</span>\n```\n\n---\n\n### Button\nСтилизованная кнопка.\n\n```html\n<style>\n.upload-btn {\n    width: 130px;\n    height: 25px;\n    overflow: hidden;\n    position: relative;\n    border: 3px solid #06c;\n    border-radius: 5px;\n    background: #0cf;\n\n}\n    .upload-btn:hover {\n        background: #09f;\n    }\n    .upload-btn__txt {\n        z-index: 1;\n        position: relative;\n        color: #fff;\n        font-size: 18px;\n        font-family: \"Helvetica Neue\";\n        line-height: 24px;\n        text-align: center;\n        text-shadow: 0 1px 1px #000;\n    }\n    .upload-btn input {\n        top: -10px;\n        right: -40px;\n        z-index: 2;\n        position: absolute;\n        cursor: pointer;\n        opacity: 0;\n        filter: alpha(opacity=0);\n        font-size: 50px;\n    }\n</style>\n<div class=\"upload-btn js-fileapi-wrapper\">\n    <div class=\"upload-btn__txt\">Upload files</div>\n    <input name=\"files\" type=\"file\" multiple />\n</div>\n```\n\n---\n\n### Link\nКнопка в виде ссылки\n\n```html\n<style>\n.upload-link {\n    color: #36c;\n    display: inline-block;\n    *zoom: 1;\n    *display: inline;\n    overflow: hidden;\n    position: relative;\n    padding-bottom: 2px;\n    text-decoration: none;\n}\n    .upload-link__txt {\n        z-index: 1;\n        position: relative;\n        border-bottom: 1px dotted #36c;\n    }\n        .upload-link:hover .upload-link__txt {\n            color: #f00;\n            border-bottom-color: #f00;\n        }\n\n    .upload-link input {\n        top: -10px;\n        right: -40px;\n        z-index: 2;\n        position: absolute;\n        cursor: pointer;\n        opacity: 0;\n        filter: alpha(opacity=0);\n        font-size: 50px;\n    }\n</style>\n<a class=\"upload-link js-fileapi-wrapper\">\n    <span class=\"upload-link__txt\">Upload photo</span>\n    <input name=\"photo\" type=\"file\" accept=\"image/*\" />\n</a>\n```\n\n\n\n\n"
        },
        {
          "name": "bower.json",
          "type": "blob",
          "size": 0.46875,
          "content": "{\n  \"name\": \"fileapi\",\n  \"main\": [\n    \"./dist/FileAPI.flash.camera.swf\",\n    \"./dist/FileAPI.flash.image.swf\",\n    \"./dist/FileAPI.flash.swf\",\n    \"./dist/FileAPI.html5.js\",\n    \"./dist/FileAPI.js\",\n    \"./dist/jquery.fileapi.min.js\"\n  ],\n  \"dependencies\": {\n    \"jquery\":\">=1.8.2\"\n  },\n  \"ignore\": [\n    \"custom-tasks/\",\n    \"flash/\",\n    \"lib/\",\n    \"plugins/\",\n    \"server/\",\n    \"statics/\",\n    \"tests/\",\n    \"package.json\",\n    \"bower.json\",\n    \"README.md\",\n    \".*\"\n  ]\n}\n"
        },
        {
          "name": "crossdomain.xml",
          "type": "blob",
          "size": 1.078125,
          "content": "<?xml version=\"1.0\"?>\n<!DOCTYPE cross-domain-policy SYSTEM \"http://www.adobe.com/xml/dtds/cross-domain-policy.dtd\">\n\n<cross-domain-policy>\n\t<site-control permitted-cross-domain-policies=\"all\"/>\n\t<allow-access-from domain=\"local.git\" secure=\"false\"/>\n\t<allow-access-from domain=\"local.evil\" secure=\"false\"/>\n\t<allow-access-from domain=\"rubaxa.org\" secure=\"false\"/>\n\t<allow-access-from domain=\"*.rubaxa.org\" secure=\"false\"/>\n\t<allow-access-from domain=\"github.com\" secure=\"false\"/>\n\t<allow-access-from domain=\"*.github.com\" secure=\"false\"/>\n\t<allow-access-from domain=\"github.io\" secure=\"false\"/>\n\t<allow-access-from domain=\"*.github.io\" secure=\"false\"/>\n\t<allow-access-from domain=\"mail.ru\" secure=\"false\"/>\n\t<allow-access-from domain=\"*.mail.ru\" secure=\"false\"/>\n\t<allow-access-from domain=\"imgsmail.ru\" secure=\"false\"/>\n\t<allow-access-from domain=\"*.imgsmail.ru\" secure=\"false\"/>\n\t<allow-access-from domain=\"img.imgsmail.ru\" secure=\"false\"/>\n\t<allow-access-from domain=\"*.img.imgsmail.ru\" secure=\"false\"/>\n\t<allow-http-request-headers-from domain=\"*\" headers=\"*\" secure=\"false\"/>\n</cross-domain-policy>\n"
        },
        {
          "name": "custom-tasks",
          "type": "tree",
          "content": null
        },
        {
          "name": "dist",
          "type": "tree",
          "content": null
        },
        {
          "name": "examples",
          "type": "tree",
          "content": null
        },
        {
          "name": "flash",
          "type": "tree",
          "content": null
        },
        {
          "name": "index.html",
          "type": "blob",
          "size": 7.6240234375,
          "content": "<!doctype html>\n<html>\n<head>\n\t<meta charset=\"utf-8\"/>\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n\n\t<title>FileAPI — a set of javascript tools for working with files.</title>\n\n\t<meta name=\"keywords\" content=\"FileAPI, upload, file, multipart, chunk, dragndrop, images, html5, rubaxa\"/>\n\t<meta name=\"description\" content=\"The best library to upload files. Multiupload, drag'n'drop and chunked file upload. Images: crop, resize and auto orientation by EXIF.\"/>\n\n\t<link rel=\"stylesheet\" href=\"statics/main.css\"/>\n\t<link href=\"http://fonts.googleapis.com/css?family=Roboto:300,400\" rel=\"stylesheet\" type=\"text/css\"/>\n\n\t<script src=\"//code.jquery.com/jquery-1.8.2.js\"></script>\n\t<script>!window.jQuery && document.write('<script src=\"/js/jquery.dev.js\"><'+'/script>');</script>\n\n\t<script src=\"./statics/xtpl.min.js\"></script>\n</head>\n<body class=\"body\">\n\n\t<script x-ctrl=\"main\" type=\"text/xtpl-xml\">\n\t\t<div id=\"sidebar\" class=\"sidebar\">\n\t\t\t<div class=\"menu\">\n\t\t\t\t<div>\n\t\t\t\t\t<ul x:if=\"ctx.lang == 'ru'\">\n\t\t\t\t\t\t<li><a href=\"https://github.com/mailru/FileAPI\">Репозиторий на GitHub</a></li>\n\t\t\t\t\t\t<li><a href=\"http://rubaxa.github.io/jquery.fileapi/\">jQuery Plugin</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/demo.html\">Пример #1: demo</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/userpic.html\">Пример #2: userpic</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/thumbnails.html\">Пример #3: thumbnails</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/watermark.html\">Пример #4: watermark</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/webcam.html\">Пример #5: webcam</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/caman.html\">Пример #6: CamanJS</a></li>\n\t\t\t\t\t\t<li><a href=\"#en/{{ctx.relpath}}\">English version</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<ul x:if=\"ctx.lang != 'ru'\">\n\t\t\t\t\t\t<li><a href=\"https://github.com/mailru/FileAPI\">GitHub repository</a></li>\n\t\t\t\t\t\t<li><a href=\"http://rubaxa.github.io/jquery.fileapi/\">jQuery Plugin</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/demo.html\">Example #1: demo</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/userpic.html\">Example #2: userpic</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/thumbnails.html\">Example #3: thumbnails</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/watermark.html\">Example #4: watermark</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/webcam.html\">Example #5: webcam</a></li>\n\t\t\t\t\t\t<li><a href=\"./examples/caman.html\">Example #6: CamanJS</a></li>\n\t\t\t\t\t\t<li><a href=\"#ru/{{ctx.relpath}}\">Русская версия</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<div class=\"menu\" x:repeat=\"item in ctx.api\">\n\t\t\t\t\t<a href=\"#{{ctx.lang}}/{{item.label}}\" class=\"menu__name\">{{item['class']}}</a>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li x:repeat=\"prop in item.props\">\n\t\t\t\t\t\t\t<a href=\"#{{ctx.lang}}/{{prop.label}}\">{{prop.name}}</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li x:repeat=\"(name, item) in item.fn\">\n\t\t\t\t\t\t\t<a href=\"#{{ctx.lang}}/{{item.label}}\">{{name}}</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div style=\"height: 5px;\"></div>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<div class=\"body__top\"></div>\n\t\t\t<div>&nbsp;</div>\n\n\t\t\t<div class=\"content\">\n\t\t\t\t<div class=\"logo\"></div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<div x:repeat=\"item in ctx.api\">\n\t\t\t\t\t\t<a name=\"{{ctx.lang}}/{{item.label}}\"></a>\n\n\t\t\t\t\t\t<h3>{{item['class']}}</h3>\n\n\t\t\t\t\t\t<div style=\"margin-bottom: 30px;\">\n\t\t\t\t\t\t\t<div>{*item.descr[ctx.lang] | markdown*}</div>\n\t\t\t\t\t\t\t<br/>\n\n\t\t\t\t\t\t\t<div style=\"margin-left: 20px;\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div x:repeat=\"prop in item.props\">\n\t\t\t\t\t\t\t\t\t\t<a name=\"{{ctx.lang}}/{{prop.label}}\"></a>\n\n\t\t\t\t\t\t\t\t\t\t<h4 class=\"fn\" data-anchor=\"prop\">\n\t\t\t\t\t\t\t\t\t\t\t<span><x:value>prop.name</x:value></span>\n\t\t\t\t\t\t\t\t\t\t\t<x:if test=\"prop.type != -1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<x:text value=\": \"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"type\">{{prop.type}}</span>\n\t\t\t\t\t\t\t\t\t\t\t</x:if>\n\t\t\t\t\t\t\t\t\t\t</h4>\n\n\t\t\t\t\t\t\t\t\t\t<div class=\"descr\">{*prop.descr[ctx.lang] | markdown*}</div>\n\n\t\t\t\t\t\t\t\t\t\t<div x:if=\"prop.code\" x:highlight=\"prop.code.source[ctx.lang]\"></div>\n\t\t\t\t\t\t\t\t\t\t<div x:if=\"prop.code\" style=\"height: 20px;\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div x:repeat=\"fn in item.fn\">\n\t\t\t\t\t\t\t\t\t\t<div x:repeat=\"variant in fn.variants\">\n\t\t\t\t\t\t\t\t\t\t\t<a name=\"{{ctx.lang}}/{{fn.label}}\"></a>\n\n\t\t\t\t\t\t\t\t\t\t\t<h4 data-anchor=\"fn\" class=\"fn\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"fn__name\">{{fn.name}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"fn__args\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>( </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span x:repeat=\"(idx, arg) in variant.args\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<x:if test=\"arg.optional\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"fn__arg__optional\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>[</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span x:if=\"idx\">, </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{{arg.name}}:</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"type\">{{arg.type}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>]</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</x:if>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<x:if test=\"!arg.optional\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span x:if=\"idx\">, </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{{arg.name}}:</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"type\">{{arg.type}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</x:if>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ):</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"type\">{{fn.returns}}</span>\n\t\t\t\t\t\t\t\t\t\t\t</h4>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"descr\">\n\t\t\t\t\t\t\t\t\t\t\t\t{*variant.descr[ctx.lang] | markdown*}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<li x:repeat=\"arg in variant.args\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<b>{{arg.name}}</b>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> — </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{{fn.args[arg.name][ctx.lang]}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div x:if=\"fn.code\" x:highlight=\"fn.code.source[ctx.lang]\"></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"height: 20px;\"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</script>\n\n\n\n\t<script src=\"./dist/FileAPI.min.js\"></script>\n\t<script src=\"//yandex.st/highlightjs/7.2/highlight.min.js\"></script>\n\n\n\t<script>\n\t\t/** @namespace hljs -- highlight.js */\n\t\tif( window.hljs ){\n\t\t\txtpl.decl('x:highlight', {\n\t\t\t\tinit: function (el, code){\n\t\t\t\t\tvar type = $.attr(el, 'data-type');\n\t\t\t\t\tel.className += ' language-' + (type == 'js' ? 'javascript' : type);\n\t\t\t\t\tel.innerHTML = '<pre><code></code></pre>';\n\t\t\t\t\tel.firstChild.firstChild.appendChild(document.createTextNode(code));\n\t\t\t\t\thljs.highlightBlock(el);\n\t\t\t\t},\n\t\t\t\tupdate: function (el, code){\n\t\t\t\t\tthis.init(el, code);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\n\t\txtpl.mod('markdown', function (text){\n\t\t\treturn\ttext ? text.replace(/`([^`]+)`/g, '<span class=\"code\">$1</span>') : text;\n\t\t});\n\n\n\t\t$(window).resize(function (){\n\t\t\t$('#sidebar').css('height', $(window).height());\n\t\t});\n\n\n\t\txtpl.ctrl('main', function (ctx){\n\t\t\tvar lang = (window.navigator.userLanguage || window.navigator.language).split('-')[0];\n\t\t\tvar _rlang = /(?:\\/|^)(en|ru)\\//;\n\t\t\tvar _updScroll = function (){\n\t\t\t\tvar anchor = location.toString().replace(/^.+#/, '');\n\t\t\t\tif( anchor ){\n\t\t\t\t\tvar offset = $('a[name=\"'+anchor+'\"]').offset();\n\t\t\t\t\toffset && $(window).scrollTop(offset.top);\n\t\t\t\t}\n\t\t\t\t$(window).trigger('resize');\n\t\t\t};\n\n\t\t\tctx.api = {};\n\t\t\tctx.lang = /(en|ru)/.test(lang) ? lang : 'en';\n\n\n\t\t\tctx.getArgs = function (args){\n\t\t\t\treturn\txtpl.utils.map(args, function (arg){\n\t\t\t\t\treturn\targ.name;\n\t\t\t\t}).join(', ');\n\t\t\t};\n\n\n\t\t\t$(window).bind('hashchange', function (evt, force){\n\t\t\t\tvar href = location.toString().split('#').pop();\n\t\t\t\tvar lang = (href.match(_rlang) || [,ctx.lang])[1];\n\n\t\t\t\tctx.lang = lang;\n\t\t\t\tctx.relpath = href.replace(/^.+\\//, '');\n\n\t\t\t\tif( !force ){\n\t\t\t\t\tctx.$apply(_updScroll);\n\t\t\t\t}\n\t\t\t}).trigger('hashchange', true);\n\n\n\t\t\t$.getJSON('./statics/docs.json?ver='+FileAPI.version, function (json){\n\t\t\t\tctx.api = json;\n\t\t\t\tctx.$apply(_updScroll);\n\t\t\t});\n\n\t\t\twindow.ctx = ctx;\n\t\t});\n\t</script>\n</body>\n</html>\n"
        },
        {
          "name": "lib",
          "type": "tree",
          "content": null
        },
        {
          "name": "node",
          "type": "tree",
          "content": null
        },
        {
          "name": "package.json",
          "type": "blob",
          "size": 1.529296875,
          "content": "{\n  \"name\": \"fileapi\",\n  \"exportName\": \"FileAPI\",\n  \"version\": \"2.2.0\",\n  \"devDependencies\": {\n    \"connect-busboy\": \"~0.0.2\",\n    \"eventemitter2\": \"~0.4.13\",\n    \"express\": \"~4.12.3\",\n    \"flex-sdk\": \"^4.6.0-0\",\n    \"grunt\": \"^0.4.5\",\n    \"grunt-cli\": \"^1.3.2\",\n    \"grunt-contrib-compress\": \"~0.9.1\",\n    \"grunt-contrib-concat\": \"~0.4.0\",\n    \"grunt-contrib-connect\": \"~0.8.0\",\n    \"grunt-contrib-jshint\": \"~0.10.0\",\n    \"grunt-contrib-uglify\": \"~0.5.0\",\n    \"grunt-contrib-watch\": \"~0.6.1\",\n    \"grunt-curl\": \"~2.0.2\",\n    \"grunt-mxmlc\": \"~0.5.2\",\n    \"grunt-version\": \"~0.3.0\",\n    \"image-size\": \"~0.3.5\",\n    \"phantomjs\": \"~1.9.7-9\",\n    \"qs\": \"~2.4.1\",\n    \"semver\": \"~5.0.0\",\n    \"temporary\": \"~0.0.8\"\n  },\n  \"peerDependencies\": {},\n  \"description\": \"FileAPI — a set of  javascript tools for working with files. Multiupload, drag'n'drop and chunked file upload. Images: crop, resize and auto orientation by EXIF.\",\n  \"main\": \"dist/FileAPI.js\",\n  \"files\": [\n    \"dist\",\n    \"plugins\",\n    \"*.js\"\n  ],\n  \"jam\": {\n    \"name\": \"FileAPI\"\n  },\n  \"scripts\": {\n    \"test\": \"grunt tests --verbose\",\n    \"build\": \"grunt build\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/mailru/FileAPI.git\"\n  },\n  \"keywords\": [\n    \"FileAPI\",\n    \"upload\",\n    \"file\",\n    \"html5\",\n    \"chunked\"\n  ],\n  \"author\": \"Konstantin Lebedev <ibnRubaXa@gmail.com>\",\n  \"contributors\": [\n    \"Vladimir Demidov <v.demidov@corp.mail.ru>\",\n    \"Ilya Lebedev <ilya@lebedev.net>\",\n    \"Mikhail Bezoyan <mbezoyan@gmail.com>\"\n  ],\n  \"license\": \"BSD\",\n  \"dependencies\": {}\n}\n"
        },
        {
          "name": "plugins",
          "type": "tree",
          "content": null
        },
        {
          "name": "server",
          "type": "tree",
          "content": null
        },
        {
          "name": "statics",
          "type": "tree",
          "content": null
        },
        {
          "name": "support.html",
          "type": "blob",
          "size": 2.6650390625,
          "content": "<!DOCTYPE html>\n<html>\n<head>\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n\n\t<meta name=\"viewport\" content=\"user-scalable=no, width=400, initial-scale=0.8, maximum-scale=0.8\" />\n\t<meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n\t<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"yes\" />\n\t<meta name=\"format-detection\" content=\"email=no\" />\n\t<meta name=\"HandheldFriendly\" content=\"true\" />\n\n\t<title>FileAPI :: Support</title>\n\n\t<script>\n\t\t// Объект настройки\n\t\tvar FileAPI = {\n\t\t\tdebug: true, // режим отладки\n\t\t\tstaticPath: './' // путь до флешек\n\t\t};\n\t</script>\n</head>\n<body>\n\n\t<div>Single:</div>\n\t<div class=\"js-fileapi-wrapper\"></div><input id=\"singleFile\" type=\"file\" /></div>\n\t<br/>\n\n\t<div>Multiple:</div>\n\t<div class=\"js-fileapi-wrapper\"><input id=\"multipleFiles\" type=\"file\" multiple /></div>\n\n\n\t<div id=\"log\" style=\"border: 1px solid red; padding: 3px; margin: 2px\"></div>\n\t<div id=\"__console\" style=\"font-size: 12px; color: #333;\"></div>\n\n\t<script>\n\t\twindow.console = {\n\t\t\t_div: document.getElementById('__console'),\n\t\t\tlog: function (){\n\t\t\t\tthis._div.innerHTML += [].join.call(arguments, ' ') + '<br/>';\n\t\t\t},\n\t\t\terror: function (){\n\t\t\t\tthis._div.innerHTML += '<span style=\"color: red\">';\n\t\t\t\tthis.log.apply(this, arguments);\n\t\t\t\tthis._div.innerHTML += '</span>';\n\t\t\t}\n\t\t};\n\t</script>\n\n\t<script src=\"./FileAPI.min.js\"></script>\n\n\t<script>\n\t\t(function (){\n\t\t\tfunction _log(txt){\n\t\t\t\tlog.innerHTML = txt + '<br/>' + log.innerHTML;\n\t\t\t}\n\n\t\t\tfunction _uploadFiles(files){\n\t\t\t\tif( files.length ){\n\t\t\t\t\tFileAPI.each(files, function (file){\n\t\t\t\t\t\t_log(' -> name: '+file.name+', type: '+file.type+', size: '+file.size);\n\n\t\t\t\t\t\tFileAPI.Image(file).get(function (err, image){\n\t\t\t\t\t\t\tif( err ){\n\t\t\t\t\t\t\t\t_log('error: '+file.name+' -- '+err)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tdocument.body.appendChild(image);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\n\t\t\t\t\tFileAPI.upload({\n\t\t\t\t\t\turl: 'http://rubaxa.org/FileAPI/server/ctrl.php',\n\t\t\t\t\t\tfiles: { test: files },\n\t\t\t\t\t\tcomplete: function (err){\n\t\t\t\t\t\t\tif( err ){\n\t\t\t\t\t\t\t\t_log('upload failed: '+err)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_log('files uploaded!');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t_log('Files not selected');\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tFileAPI.event.on(singleFile, 'change', function (){\n\t\t\t\tvar files = FileAPI.getFiles(singleFile);\n\t\t\t\t_uploadFiles(files);\n\t\t\t});\n\n\n\t\t\tFileAPI.event.on(multipleFiles, 'change', function (){\n\t\t\t\tvar files = FileAPI.getFiles(multipleFiles);\n\t\t\t\t_uploadFiles(files);\n\t\t\t});\n\n\n\t\t\tFileAPI.each(FileAPI.support, function (val, key){\n\t\t\t\t_log('FileAPI.support.'+key+': '+val);\n\t\t\t});\n\t\t})();\n\t</script>\n</body>\n</html>\n"
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}