{
  "metadata": {
    "timestamp": 1736563075016,
    "page": 716,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjc2MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "tommoor/tinycon",
      "stars": 5112,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.0283203125,
          "content": ".DS_Store\n.log\nnode_modules/\n"
        },
        {
          "name": "Gruntfile.js",
          "type": "blob",
          "size": 0.2841796875,
          "content": "module.exports = function(grunt) {\n  grunt.loadNpmTasks('grunt-contrib-uglify');\n  \n  grunt.initConfig({\n    uglify: {\n      all: {\n        options: {\n          preserveComments: 'some'\n        },\n        files: {\n          'tinycon.min.js': ['tinycon.js']\n        }\n      },\n    },\n  });\n};"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.02734375,
          "content": "Copyright (c) 2015 Tom Moor\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 2.4775390625,
          "content": "# Tinycon\n\nA small library for manipulating the favicon, in particular adding alert bubbles and changing images. Tinycon gracefully falls back to a number in title approach for browsers that don't support canvas or dynamic favicons.\n\n<img src=\"https://github.com/tommoor/tinycon/blob/master/examples/screenshot.png?raw=true\" />\n\n<a href=\"http://tommoor.github.com/tinycon/\">See the Live Demo here.</a>\n\n## Documentation\n\nTinycon adds a single object to the global namespace and does not require initialization.\n\n\n### Installation\n\nInstall with your favorite package manager.\n\n```\nnpm install tinycon --save\n```\n```\nyarn add tinycon\n```\n\n### Basic Usage\n\n```javascript\nTinycon.setBubble(6);\n```\n\n### Options\n\nTinycon can take a range of options to customize the look\n\n* width: the width of the alert bubble\n* height: the height of the alert bubble\n* font: a css string to use for the fontface (recommended to leave this)\n* color: the foreground font color\n* background: the alert bubble background color\n* fallback: should we fallback to a number in brackets for browsers that don't support canvas/dynamic favicons? Boolean, or use the string 'force' to ensure a title update even in supported browsers.\n* abbreviate: should tinycon shrink large numbers such as 1000 to an abbreviated version (1k). Boolean, defaults to true\n\n```javascript\nTinycon.setOptions({\n\twidth: 7,\n\theight: 9,\n\tfont: '10px arial',\n\tcolor: '#ffffff',\n\tbackground: '#549A2F',\n\tfallback: true\n});\n```\n\n### AMD support\n\nTinycon can also be used as an asynchronous module.\n\n```javascript\nrequire([\n\t'tinycon.js'\n], function (T) {\n\n\tT.setOptions({\n\t\twidth: 7,\n\t\theight: 9,\n\t\tfont: '10px arial',\n\t\tcolor: '#ffffff',\n\t\tbackground: '#549A2F',\n\t\tfallback: true\n\t});\n\n\tT.setBubble(7);\n\n});\n```\n\n## Browser Support\n\nTinycon has been tested to work completely in the following browsers. Older versions may be supported, but haven't been tested:\n\n* Chrome 15+\n* Firefox 9+\n* Opera 11+\n\nCurrently the library degrades to title update in the following browsers:\n\n* Internet Explorer 9\n* Safari 5\n\n\n## Development\n\nTo produce the minified file run `grunt uglify`\n\n\n## License / Credits\n\nTinycon is released under the MIT license. It is simple and easy to understand and places almost no restrictions on what you can do with Tinycon.\n[More Information](http://en.wikipedia.org/wiki/MIT_License)\n\nTinycon was inspired by [Notificon](https://github.com/makeable/Notificon)\n\n\n## Download\n\nReleases are available for download from\n[GitHub](http://github.com/tommoor/tinycon/downloads).\n"
        },
        {
          "name": "bower.json",
          "type": "blob",
          "size": 0.572265625,
          "content": "{\n  \"name\": \"tinycon\",\n  \"description\": \"A small library for manipulating the favicon, in particular adding alert bubbles and changing images.\",\n  \"homepage\": \"http://blog.tommoor.com/tinycon/\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/tommoor/tinycon.git\"\n  },\n  \"moduleType\": [\n    \"globals\",\n    \"amd\"\n  ],\n  \"keywords\": [\n    \"favicon\",\n    \"notification\"\n  ],\n  \"main\": [\n    \"tinycon.js\"\n  ],\n  \"ignore\": [\n    \"examples\",\n    \"Gruntfile.js\",\n    \".gitignore\",\n    \"*.md\",\n    \"LICENSE\",\n    \"package.json\"\n  ],\n  \"private\": false,\n  \"license\": \"MIT\"\n}\n"
        },
        {
          "name": "examples",
          "type": "tree",
          "content": null
        },
        {
          "name": "package.json",
          "type": "blob",
          "size": 0.46875,
          "content": "{\n  \"name\": \"tinycon\",\n  \"version\": \"0.6.8\",\n  \"description\": \"Add notification bubbles in the favicon\",\n  \"author\": \"Tom Moor <tom.moor@gmail.com> (http://tommoor.com)\",\n  \"license\": \"MIT\",\n  \"main\": \"./tinycon.js\",\n  \"scripts\": {\n    \"build\": \"grunt uglify\",\n    \"prepublish\": \"grunt uglify\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/tommoor/tinycon.git\"\n  },\n  \"devDependencies\": {\n    \"grunt\": \"~0.4.5\",\n    \"grunt-contrib-uglify\": \"^2.2.1\"\n  }\n}\n"
        },
        {
          "name": "tinycon.js",
          "type": "blob",
          "size": 7.443359375,
          "content": "/*!\n * Tinycon - A small library for manipulating the Favicon\n * Tom Moor, http://tommoor.com\n * Copyright (c) 2015 Tom Moor\n * @license MIT Licensed\n */\n\n(function(){\n\n  var Tinycon = {};\n  var currentFavicon = null;\n  var originalFavicon = null;\n  var faviconImage = null;\n  var canvas = null;\n  var options = {};\n  // Chrome browsers with nonstandard zoom report fractional devicePixelRatio.\n  var r = Math.ceil(window.devicePixelRatio) || 1;\n  var size = 16 * r;\n  var defaults = {\n    width: 7,\n    height: 9,\n    font: 10 * r + 'px arial',\n    color: '#ffffff',\n    background: '#F03D25',\n    fallback: true,\n    crossOrigin: true,\n    abbreviate: true\n  };\n\n  var ua = (function () {\n    var agent = navigator.userAgent.toLowerCase();\n    // New function has access to 'agent' via closure\n    return function (browser) {\n      return agent.indexOf(browser) !== -1;\n    };\n  }());\n\n  var browser = {\n    ie: ua('trident'),\n    chrome: ua('chrome'),\n    webkit: ua('chrome') || ua('safari'),\n    safari: ua('safari') && !ua('chrome'),\n    mozilla: ua('mozilla') && !ua('chrome') && !ua('safari')\n  };\n\n  // private methods\n  var getFaviconTag = function(){\n\n    var links = document.getElementsByTagName('link');\n\n    for(var i=0, len=links.length; i < len; i++) {\n      if ((links[i].getAttribute('rel') || '').match(/\\bicon\\b/i)) {\n        return links[i];\n      }\n    }\n\n    return false;\n  };\n\n  var removeFaviconTag = function(){\n\n    var links = document.getElementsByTagName('link');\n\n    for(var i=0, len=links.length; i < len; i++) {\n      var exists = (typeof(links[i]) !== 'undefined');\n      if (exists && (links[i].getAttribute('rel') || '').match(/\\bicon\\b/i)) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n  };\n\n  var getCurrentFavicon = function(){\n\n    if (!originalFavicon || !currentFavicon) {\n      var tag = getFaviconTag();\n      currentFavicon = tag ? tag.getAttribute('href') : '/favicon.ico';\n      if (!originalFavicon) {\n        originalFavicon = currentFavicon;\n      }\n    }\n\n    return currentFavicon;\n  };\n\n  var getCanvas = function (){\n\n    if (!canvas) {\n      canvas = document.createElement(\"canvas\");\n      canvas.width = size;\n      canvas.height = size;\n    }\n\n    return canvas;\n  };\n\n  var setFaviconTag = function(url){\n    if(url){\n      removeFaviconTag();\n\n      var link = document.createElement('link');\n      link.type = 'image/x-icon';\n      link.rel = 'icon';\n      link.href = url;\n      document.getElementsByTagName('head')[0].appendChild(link);\n    }\n  };\n\n  var log = function(message){\n    if (window.console) window.console.log(message);\n  };\n\n  var drawFavicon = function(label, color) {\n\n    // fallback to updating the browser title if unsupported\n    if (!getCanvas().getContext || browser.ie || browser.safari || options.fallback === 'force') {\n      return updateTitle(label);\n    }\n\n    var context = getCanvas().getContext(\"2d\");\n    var color = color || '#000000';\n    var src = getCurrentFavicon();\n\n    faviconImage = document.createElement('img');\n    faviconImage.onload = function() {\n\n      // clear canvas\n      context.clearRect(0, 0, size, size);\n\n      // draw the favicon\n      context.drawImage(faviconImage, 0, 0, faviconImage.width, faviconImage.height, 0, 0, size, size);\n\n      // draw bubble over the top\n      if ((label + '').length > 0) drawBubble(context, label, color);\n\n      // refresh tag in page\n      refreshFavicon();\n    };\n\n    // allow cross origin resource requests if the image is not a data:uri\n    // as detailed here: https://github.com/mrdoob/three.js/issues/1305\n    if (!src.match(/^data/) && options.crossOrigin) {\n      faviconImage.crossOrigin = 'anonymous';\n    }\n\n    faviconImage.src = src;\n  };\n\n  var updateTitle = function(label) {\n\n    if (options.fallback) {\n      // Grab the current title that we can prefix with the label\n      var originalTitle = document.title;\n\n      // Strip out the old label if there is one\n      if (originalTitle[0] === '(') {\n        originalTitle = originalTitle.slice(originalTitle.indexOf(' '));\n      }\n\n      if ((label + '').length > 0) {\n        document.title = '(' + label + ') ' + originalTitle;\n      } else {\n        document.title = originalTitle;\n      }\n    }\n  };\n\n  var drawBubble = function(context, label, color) {\n\n    // automatic abbreviation for long (>2 digits) numbers\n    if (typeof label == 'number' && label > 99 && options.abbreviate) {\n      label = abbreviateNumber(label);\n    }\n\n    // bubble needs to be larger for double digits\n    var len = (label + '').length-1;\n\n    var width = options.width * r + (6 * r * len),\n      height = options.height * r;\n\n    var top = size - height,\n            left = size - width - r,\n            bottom = 16 * r,\n            right = 16 * r,\n            radius = 2 * r;\n\n    // webkit seems to render fonts lighter than firefox\n    context.font = (browser.webkit ? 'bold ' : '') + options.font;\n    context.fillStyle = options.background;\n    context.strokeStyle = options.background;\n    context.lineWidth = r;\n\n    // bubble\n    context.beginPath();\n    context.moveTo(left + radius, top);\n    context.quadraticCurveTo(left, top, left, top + radius);\n    context.lineTo(left, bottom - radius);\n    context.quadraticCurveTo(left, bottom, left + radius, bottom);\n    context.lineTo(right - radius, bottom);\n    context.quadraticCurveTo(right, bottom, right, bottom - radius);\n    context.lineTo(right, top + radius);\n    context.quadraticCurveTo(right, top, right - radius, top);\n    context.closePath();\n    context.fill();\n\n    // bottom shadow\n    context.beginPath();\n    context.strokeStyle = \"rgba(0,0,0,0.3)\";\n    context.moveTo(left + radius / 2.0, bottom);\n    context.lineTo(right - radius / 2.0, bottom);\n    context.stroke();\n\n    // label\n    context.fillStyle = options.color;\n    context.textAlign = \"right\";\n    context.textBaseline = \"top\";\n\n    // unfortunately webkit/mozilla are a pixel different in text positioning\n    context.fillText(label, r === 2 ? 29 : 15, browser.mozilla ? 7*r : 6*r);\n  };\n\n  var refreshFavicon = function(){\n    // check support\n    if (!getCanvas().getContext) return;\n\n    setFaviconTag(getCanvas().toDataURL());\n  };\n\n  var abbreviateNumber = function(label) {\n    var metricPrefixes = [\n      ['G', 1000000000],\n      ['M',    1000000],\n      ['k',       1000]\n    ];\n\n    for(var i = 0; i < metricPrefixes.length; ++i) {\n      if (label >= metricPrefixes[i][1]) {\n        label = round(label / metricPrefixes[i][1]) + metricPrefixes[i][0];\n        break;\n      }\n    }\n\n    return label;\n  };\n\n  var round = function (value, precision) {\n    var number = new Number(value);\n    return number.toFixed(precision);\n  };\n\n  // public methods\n  Tinycon.setOptions = function(custom){\n    options = {};\n\n    // account for deprecated UK English spelling\n    if (custom.colour) {\n      custom.color = custom.colour;\n    }\n\n    for(var key in defaults){\n      options[key] = custom.hasOwnProperty(key) ? custom[key] : defaults[key];\n    }\n    return this;\n  };\n\n  Tinycon.setImage = function(url){\n    currentFavicon = url;\n    refreshFavicon();\n    return this;\n  };\n\n  Tinycon.setBubble = function(label, color) {\n    label = label || '';\n    drawFavicon(label, color);\n    return this;\n  };\n\n  Tinycon.reset = function(){\n    currentFavicon = originalFavicon;\n    setFaviconTag(originalFavicon);\n  };\n\n  Tinycon.setOptions(defaults);\n\n  if(typeof define === 'function' && define.amd) {\n    define(Tinycon);\n  } else if (typeof module !== 'undefined') {\n    module.exports = Tinycon;\n  } else {\n    window.Tinycon = Tinycon;\n  }\n\n})();\n"
        },
        {
          "name": "tinycon.min.js",
          "type": "blob",
          "size": 3.029296875,
          "content": "/*!\n * Tinycon - A small library for manipulating the Favicon\n * Tom Moor, http://tommoor.com\n * Copyright (c) 2015 Tom Moor\n * @license MIT Licensed\n */\n!function(){var a={},b=null,c=null,d=null,e=null,f={},g=Math.ceil(window.devicePixelRatio)||1,h=16*g,i={width:7,height:9,font:10*g+\"px arial\",color:\"#ffffff\",background:\"#F03D25\",fallback:!0,crossOrigin:!0,abbreviate:!0},j=function(){var a=navigator.userAgent.toLowerCase();return function(b){return a.indexOf(b)!==-1}}(),k={ie:j(\"trident\"),chrome:j(\"chrome\"),webkit:j(\"chrome\")||j(\"safari\"),safari:j(\"safari\")&&!j(\"chrome\"),mozilla:j(\"mozilla\")&&!j(\"chrome\")&&!j(\"safari\")},l=function(){for(var a=document.getElementsByTagName(\"link\"),b=0,c=a.length;b<c;b++)if((a[b].getAttribute(\"rel\")||\"\").match(/\\bicon\\b/i))return a[b];return!1},m=function(){for(var a=document.getElementsByTagName(\"link\"),b=0,c=a.length;b<c;b++){void 0!==a[b]&&(a[b].getAttribute(\"rel\")||\"\").match(/\\bicon\\b/i)&&a[b].parentNode.removeChild(a[b])}},n=function(){if(!c||!b){var a=l();b=a?a.getAttribute(\"href\"):\"/favicon.ico\",c||(c=b)}return b},o=function(){return e||(e=document.createElement(\"canvas\"),e.width=h,e.height=h),e},p=function(a){if(a){m();var b=document.createElement(\"link\");b.type=\"image/x-icon\",b.rel=\"icon\",b.href=a,document.getElementsByTagName(\"head\")[0].appendChild(b)}},q=function(a,b){if(!o().getContext||k.ie||k.safari||\"force\"===f.fallback)return r(a);var c=o().getContext(\"2d\"),b=b||\"#000000\",e=n();d=document.createElement(\"img\"),d.onload=function(){c.clearRect(0,0,h,h),c.drawImage(d,0,0,d.width,d.height,0,0,h,h),(a+\"\").length>0&&s(c,a,b),t()},!e.match(/^data/)&&f.crossOrigin&&(d.crossOrigin=\"anonymous\"),d.src=e},r=function(a){if(f.fallback){var b=document.title;\"(\"===b[0]&&(b=b.slice(b.indexOf(\" \"))),(a+\"\").length>0?document.title=\"(\"+a+\") \"+b:document.title=b}},s=function(a,b,c){\"number\"==typeof b&&b>99&&f.abbreviate&&(b=u(b));var d=(b+\"\").length-1,e=f.width*g+6*g*d,i=f.height*g,j=h-i,l=h-e-g,m=16*g,n=16*g,o=2*g;a.font=(k.webkit?\"bold \":\"\")+f.font,a.fillStyle=f.background,a.strokeStyle=f.background,a.lineWidth=g,a.beginPath(),a.moveTo(l+o,j),a.quadraticCurveTo(l,j,l,j+o),a.lineTo(l,m-o),a.quadraticCurveTo(l,m,l+o,m),a.lineTo(n-o,m),a.quadraticCurveTo(n,m,n,m-o),a.lineTo(n,j+o),a.quadraticCurveTo(n,j,n-o,j),a.closePath(),a.fill(),a.beginPath(),a.strokeStyle=\"rgba(0,0,0,0.3)\",a.moveTo(l+o/2,m),a.lineTo(n-o/2,m),a.stroke(),a.fillStyle=f.color,a.textAlign=\"right\",a.textBaseline=\"top\",a.fillText(b,2===g?29:15,k.mozilla?7*g:6*g)},t=function(){o().getContext&&p(o().toDataURL())},u=function(a){for(var b=[[\"G\",1e9],[\"M\",1e6],[\"k\",1e3]],c=0;c<b.length;++c)if(a>=b[c][1]){a=v(a/b[c][1])+b[c][0];break}return a},v=function(a,b){return new Number(a).toFixed(b)};a.setOptions=function(a){f={},a.colour&&(a.color=a.colour);for(var b in i)f[b]=a.hasOwnProperty(b)?a[b]:i[b];return this},a.setImage=function(a){return b=a,t(),this},a.setBubble=function(a,b){return a=a||\"\",q(a,b),this},a.reset=function(){b=c,p(c)},a.setOptions(i),\"function\"==typeof define&&define.amd?define(a):\"undefined\"!=typeof module?module.exports=a:window.Tinycon=a}();"
        }
      ]
    }
  ]
}