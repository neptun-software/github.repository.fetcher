{
  "metadata": {
    "timestamp": 1736562654685,
    "page": 155,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjIwMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "XIU2/UserScript",
      "stars": 8057,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": "3dm-Beautification.user.js",
          "type": "blob",
          "size": 3.0966796875,
          "content": "// ==UserScript==\n// @name         3DMè®ºå›ç¾åŒ–\n// @version      1.0.2\n// @author       X.I.U\n// @description  ç²¾ç®€å¤šä½™å†…å®¹ã€æ ·å¼ä¼˜åŒ–\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC0klEQVR4nJ1TS0hUYRT+/nuvd2Z0nMbRrpPpTJozoZliQmEFFkT0QlwIRWlUi4jIaFGLqE0ELlsEElGrGCKimhaVVmhW9CBSy5ohk/I1pvO66R3nOt7X30IxoyTog8OBc/i+83EOB1gEoRP8Yq3fQP5WvHxqW7kkKfkmXgx+D3PCmjLLuPYmNXyotevfAud9XhQEHZtLKpe3uAozS+12MyRJRTSc7O7tCp9uOPe0Y1GBGAUeXdiyc8vuIr8gmHgQgFACSgwQg0L8oWtP7w3s2Z/vvKse9v0pcLup3FpWV97v8S5xElBMz2hgGIKRgQRcRZmYljVEo4r45E5gVVmtMNH3UC3ifvOfZ693OC3OB50jUFRAkjTIsoqjB7xo7YhgaERChpU4isuXHUsNs+Km7Y5K8rl1L2/PHld8gSFUa6V+r6TXhWMzMNW4EArFQCMRGNMywLFgLOnIXZoD0/PIuHXfSnvUwHUuqTNdJJFvW5+WfSs3z7TVnJiB25WJyXQNjpwl0LJXQVM4ECLDYorDXWJDPM/qzPJmYaxbjHBQlFfFlc4jqZRyyr3aDgYABYXJXIFl6esAws7vm1IFRvIteOktDB0IDYg9zMfP4ZbhwamUp2SWDBBQvhhsxgYQwoEBAQOAAQVD0sBaN0JPc6O/XwoyRk4bE+tLGmJUluSkDk2nSKVUwLIGhC48EQFAQOYyNa99FUiMVQ1Vt8kkPhHnfCd3OYXCjKYCj+0gz0Oo2nEGhDHNEX7BAKAbFIFnzxsrdzb5AIDJsmWh8eK9cUvDjrOv28dqCEsGDarOTgLmwwCgaho+vHx5M3i1+ca8N0opBwDJxAzux9/hffMlW3WF7cqKQk+9RXCBsCx0g079+BpgRjv9Zvtqwb31eHtooQADALquYzQmom/yGnofqzb3txe1kw6PKEOYoBmsbKaKmVeT6SNJ9kvPp68xv98v//FZ/4OfGzYzfKjarqcAAAAASUVORK5CYII=\n// @match        *://bbs.3dmgame.com/*\n// @license      GPL-3.0 License\n// @run-at       document-start\n// @namespace    https://greasyfork.org/scripts/413593\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    let style_Add = document.createElement('style');\n    style_Add.innerHTML = `\n[url=home.php?mod=space&uid=945662]@media[/url] (min-width:1366px) {\n\tbody {\n\t\tbackground: none;\n\t}\n\t.wp {\n\t\twidth: 70%;\n\t}\n}\n@media (max-width:650px) {\n\t#postlist .favatar.pls .avatar img {\n\t\tmargin: 0 0 2px;\n\t}\n}\n#toptb, .dnch_eo_pt,.dnch_eo_pr, .dnch_eo_f, .bml, dl.pil.cl, td.plc.plm .sign, .dnch_eo_pb,.dnch_eo_pt, .pls .side-star, .pls .side-group, div#h_nv, .res-footer-note, a>img[border=\"0\"].zoom, .md_ctrl, .pls.favatar .xg1, .wp.a_h, .hd_table, .a_cn, .wp.a_f, .bm.lk, .a_pt {\n\tdisplay: none !important;\n}\n.pls .avatar img {\n\twidth: 100px;\n\theight: 100px;\n\tbackground: none;\n\tpadding: 0;\n\tborder: 4px solid #ffffff\n}\n.avtm img {\n\twidth: 60px;\n}\n.pls .avatar {\n\ttext-align: center;\n}\n.t_fsz {\n\tmin-height: 60px;\n}\n.pls .pi {\n\ttext-align: center;\n\tpadding: 10px 0 0 0;\n\tborder: none;\n\toverflow: visible;\n}\n.xw1 {\n\tfont-size: 15px;\n}\ntextarea#fastpostmessage {\n\tbackground: none !important;\n}\n.pcb img {\n\tmax-width: 60%;\n\tmargin: 4px;\n}\n.rate {\n\tmargin: 0;\n}\n.ratl td {\n\tpadding: 0px;\n}\n.xw1 {\n\tfont-size: 12px;\n\tfont-weight: 500;\n}\n.xi2,.xi2 a,.xi3 a {\n\tcolor: red;\n}\n.mtw {\n\tmargin-top: 0px !important;\n}\n#p_btn {\n\tpadding: 0px;\n\tmargin: 0 0 0 1px;\n\tdisplay: flex;\n\tjustify-content: space-evenly;\n}\n#scbar {\n\tborder-top: 0;\n\tborder-bottom: 0;\n}`;\n    if (document.head) {\n        document.head.appendChild(style_Add);\n    } else {\n        let timer = setInterval(function(){\n            if (document.head) {\n                document.head.appendChild(style_Add);\n                clearInterval(timer);\n            }\n        });\n    }\n})();"
        },
        {
          "name": "3dm-Enhanced.user.js",
          "type": "blob",
          "size": 18.1337890625,
          "content": "// ==UserScript==\n// @name         3DMè®ºå›å¢å¼º\n// @version      1.1.3\n// @author       X.I.U\n// @description  è‡ªåŠ¨å›å¤ã€è‡ªåŠ¨æ— ç¼ç¿»é¡µã€æ¸…ç†ç½®é¡¶å¸–å­ã€è‡ªåŠ¨æ»šåŠ¨è‡³éšè—å†…å®¹\n// @match        *://bbs.3dmgame.com/*\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC0klEQVR4nJ1TS0hUYRT+/nuvd2Z0nMbRrpPpTJozoZliQmEFFkT0QlwIRWlUi4jIaFGLqE0ELlsEElGrGCKimhaVVmhW9CBSy5ohk/I1pvO66R3nOt7X30IxoyTog8OBc/i+83EOB1gEoRP8Yq3fQP5WvHxqW7kkKfkmXgx+D3PCmjLLuPYmNXyotevfAud9XhQEHZtLKpe3uAozS+12MyRJRTSc7O7tCp9uOPe0Y1GBGAUeXdiyc8vuIr8gmHgQgFACSgwQg0L8oWtP7w3s2Z/vvKse9v0pcLup3FpWV97v8S5xElBMz2hgGIKRgQRcRZmYljVEo4r45E5gVVmtMNH3UC3ifvOfZ693OC3OB50jUFRAkjTIsoqjB7xo7YhgaERChpU4isuXHUsNs+Km7Y5K8rl1L2/PHld8gSFUa6V+r6TXhWMzMNW4EArFQCMRGNMywLFgLOnIXZoD0/PIuHXfSnvUwHUuqTNdJJFvW5+WfSs3z7TVnJiB25WJyXQNjpwl0LJXQVM4ECLDYorDXWJDPM/qzPJmYaxbjHBQlFfFlc4jqZRyyr3aDgYABYXJXIFl6esAws7vm1IFRvIteOktDB0IDYg9zMfP4ZbhwamUp2SWDBBQvhhsxgYQwoEBAQOAAQVD0sBaN0JPc6O/XwoyRk4bE+tLGmJUluSkDk2nSKVUwLIGhC48EQFAQOYyNa99FUiMVQ1Vt8kkPhHnfCd3OYXCjKYCj+0gz0Oo2nEGhDHNEX7BAKAbFIFnzxsrdzb5AIDJsmWh8eK9cUvDjrOv28dqCEsGDarOTgLmwwCgaho+vHx5M3i1+ca8N0opBwDJxAzux9/hffMlW3WF7cqKQk+9RXCBsCx0g079+BpgRjv9Zvtqwb31eHtooQADALquYzQmom/yGnofqzb3txe1kw6PKEOYoBmsbKaKmVeT6SNJ9kvPp68xv98v//FZ/4OfGzYzfKjarqcAAAAASUVORK5CYII=\n// @grant        GM_xmlhttpRequest\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://greasyfork.org/scripts/412890\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ALL = [\n        ['menu_autoReply', 'è‡ªåŠ¨å›å¤', 'è‡ªåŠ¨å›å¤', true],\n        ['menu_cleanTopPost', 'æ¸…ç†ç½®é¡¶å¸–å­', 'æ¸…ç†ç½®é¡¶å¸–å­', true],\n        ['menu_thread_pageLoading', 'å¸–å­å†…è‡ªåŠ¨ç¿»é¡µ', 'å¸–å­å†…è‡ªåŠ¨ç¿»é¡µ', true],\n        ['menu_scrollToShowhide', 'è‡ªåŠ¨æ»šåŠ¨è‡³éšè—å†…å®¹', 'è‡ªåŠ¨æ»šåŠ¨è‡³éšè—å†…å®¹', true]\n    ], menu_ID = [];\n    for (let i=0;i<menu_ALL.length;i++){ // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n        if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};\n    }\n    registerMenuCommand();\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (menu_ID.length > menu_ALL.length){ // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n            for (let i=0;i<menu_ID.length;i++){\n                GM_unregisterMenuCommand(menu_ID[i]);\n            }\n        }\n        for (let i=0;i<menu_ALL.length;i++){ // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n            menu_ALL[i][3] = GM_getValue(menu_ALL[i][0]);\n            menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n        }\n        menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/412890/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status == 'true'){\n            GM_setValue(`${Name}`, false);\n            GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }else{\n            GM_setValue(`${Name}`, true);\n            GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n    // è¿”å›èœå•å€¼\n    function menu_value(menuName) {\n        for (let menu of menu_ALL) {\n            if (menu[0] == menuName) {\n                return menu[3]\n            }\n        }\n    }\n\n\n    // éšæœºå›å¤å¸–å­çš„å†…å®¹\n    var replyList = [\n        \"æ„Ÿè°¢æ¥¼ä¸»åˆ†äº«çš„å†…å®¹ï¼\",\n        \"æ„Ÿè°¢åˆ†äº«ï¼ç»™ä½ ç‚¹èµï¼\",\n        \"æ„Ÿè°¢åˆ†äº«ï¼è®ºå›å› ä½ æ›´ç²¾å½©ï¼\",\n        \"çœ‹çœ‹éšè—å†…å®¹æ˜¯ä»€ä¹ˆï¼è°¢è°¢ï¼\",\n        \"å…ˆä¸‹è½½çœ‹çœ‹å¥½ä¸å¥½ç”¨ï¼\",\n        \"æ¥¼ä¸»ä¸€ç”Ÿå¹³å®‰ï¼å¥½äººä¸€ç”Ÿå¹³å®‰ï¼\",\n        \"ä½ è¯´çš„è§‚ç‚¹æˆ‘ä¹Ÿå¾ˆæ”¯æŒï¼\",\n        \"æ¥¼ä¸»å¤ªæ£’äº†ï¼æˆ‘å…ˆä¸‹ä¸ºæ•¬ï¼\",\n        \"ç»™æ¥¼ä¸»ç‚¹èµï¼Œå¸Œæœ›ç»§ç»­åˆ†äº«ï¼\",\n        \"æ„Ÿè°¢è®ºå›ï¼Œæ„Ÿè°¢LZçƒ­å¿ƒåˆ†äº«ï¼\",\n        \"æ„Ÿè°¢æ¥¼ä¸»åˆ†äº«ä¼˜è´¨å†…å®¹ï¼Œå¸Œæœ›ç»§ç»­åŠªåŠ›ï¼\",\n        \"ä¸‹è½½è¯•ç”¨ä¸€ä¸‹ï¼Œå¦‚æœç”¨ç€ä¸é”™å°±ç»™æ¥¼ä¸»é¡¶è´´ï¼\",\n        \"è¿™ä¹ˆå¥½çš„ä¸œè¥¿ï¼æ„Ÿè°¢æ¥¼ä¸»åˆ†äº«ï¼æ„Ÿè°¢è®ºå›ï¼\",\n        \"å¸Œæœ›æ¥¼ä¸»ç»§ç»­åˆ†äº«æ›´å¤šå¥½ç”¨çš„ä¸œè¥¿ï¼è°¢è°¢ï¼\",\n        \"çœ‹åˆ°æ¥¼ä¸»è¿™ä¹ˆåŠªåŠ›åˆ†äº«ï¼Œæˆ‘åªèƒ½é¡¶ä¸ªè´´æ„Ÿè°¢ä¸€ä¸‹äº†ï¼\",\n        \"å¥½ä¸œè¥¿ï¼Œæ‹¿èµ°äº†ï¼Œä¸´èµ°é¡¶ä¸ªè´´æ„Ÿè°¢ä¸€ä¸‹æ¥¼ä¸»ï¼\",\n        \"è¿™å°±éå¸¸ç»™åŠ›äº†ï¼æ„Ÿè°¢åˆ†äº«ï¼\",\n        \"å‰å®³äº†ï¼å…ˆæ”¶è—ï¼Œå†å›å¤ï¼è°¢è°¢ï¼\"\n    ];\n\n    // æ£€æŸ¥æ˜¯å¦ç™»é™†\n    var loginStatus = false;\n    checkLogin();\n\n    // é»˜è®¤ ID ä¸º 0\n    var curSite = {SiteTypeID: 0};\n\n    // è‡ªåŠ¨ç¿»é¡µè§„åˆ™\n    let DBSite = {\n        forum: {\n            SiteTypeID: 1\n        },\n        thread: {\n            SiteTypeID: 2,\n            pager: {\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;div#postlist > div[id^=\"post_\"]',\n                HT_insert: ['css;div#postlist', 2],\n                replaceE: 'css;#ct > .pgs'\n            }\n        },\n        search: {\n            SiteTypeID: 3,\n            pager: {\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;div#threadlist > ul',\n                HT_insert: ['css;div#threadlist', 2],\n                replaceE: 'css;div.pg'\n            }\n        },\n        guide: {\n            SiteTypeID: 4,\n            pager: {\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;div#threadlist div.bm_c table > tbody',\n                HT_insert: ['css;div#threadlist div.bm_c table', 2],\n                replaceE: 'css;div.pg'\n            }\n        },\n        youspace: {\n            SiteTypeID: 5,\n            pager: {\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;tbody > tr:not(.th)',\n                HT_insert: ['css;tbody', 2],\n                replaceE: 'css;div.pg'\n            }\n        }\n    };\n\n    // ç”¨äºè„šæœ¬å†…éƒ¨åˆ¤æ–­å½“å‰ URL ç±»å‹\n    let SiteType = {\n        FORUM: DBSite.forum.SiteTypeID, //   å„æ¿å—å¸–å­åˆ—è¡¨\n        THREAD: DBSite.thread.SiteTypeID, // å¸–å­å†…\n        GUIDE: DBSite.guide.SiteTypeID //    å¯¼è¯»å¸–å­åˆ—è¡¨\n    };\n\n    // ä¸‹ä¸€é¡µURL\n    curSite.pageUrl = \"\";\n\n    // URL åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼\n    let patt_thread = /\\/thread-\\d+-\\d+\\-\\d+.html/,\n        patt_forum = /\\/forum-\\d+-\\d+\\.html/\n\n    // URL åˆ¤æ–­\n    if (patt_thread.test(location.pathname) || location.search.indexOf('mod=viewthread') > -1){\n        // å¸–å­å†…\n        hidePgbtn(); //                  éšè—å¸–å­å†…çš„ [ä¸‹ä¸€é¡µ] æŒ‰é’®\n        if(menu_value('menu_thread_pageLoading'))curSite = DBSite.thread;\n        if(menu_value('menu_autoReply'))autoReply(); //       å¦‚æœæœ‰éšè—å†…å®¹ï¼Œåˆ™è‡ªåŠ¨å›å¤\n        if(menu_value('menu_scrollToShowhide'))setTimeout(function(){window.scrollTo(0,document.querySelector('.showhide').offsetTop)}, 500); // æ»šåŠ¨è‡³éšè—å†…å®¹\n    } else if (patt_forum.test(location.pathname) || location.search.indexOf('mod=forumdisplay') > -1){\n        // å„æ¿å—å¸–å­åˆ—è¡¨\n        curSite = DBSite.forum;\n        if(menu_value('menu_cleanTopPost'))cleanTopPost(); // æ¸…ç†ç½®é¡¶å¸–å­\n    } else if (location.search.indexOf('mod=guide') > -1){\n        // å¯¼è¯»å¸–å­åˆ—è¡¨\n        curSite = DBSite.guide;\n    } else if (location.pathname === '/search.php') {\n        // æœç´¢ç»“æœåˆ—è¡¨\n        curSite = DBSite.search;\n    } else if(location.search.indexOf('mod=space') > -1 && location.search.indexOf('&view=me') > -1) {\n        // åˆ«äººçš„ä¸»é¢˜/å›å¤\n        curSite = DBSite.youspace;\n    } else {\n        curSite = DBSite.forum;\n    }\n\n    pageLoading(); //                       è‡ªåŠ¨ç¿»é¡µ\n\n\n    // åˆ¤æ–­æ˜¯å¦ç™»é™†\n    function checkLogin(){\n        let checklogin = document.querySelectorAll('.wp.h_menu p a');\n        if (checklogin){\n            for (let value of checklogin) {\n                if (value.textContent == 'é€€å‡º'){\n                    loginStatus = true;\n                }\n            }\n        }\n    }\n\n\n    // è‡ªåŠ¨å›å¤\n    function autoReply(){\n        if (loginStatus){\n            // å­˜åœ¨éšè—å†…å®¹ï¼Œåˆ™è‡ªåŠ¨å›å¤\n            let autoreply = document.querySelector('.locked a');\n            if (autoreply){\n                writeReply();\n                // æ»šåŠ¨è‡³éšè—å†…å®¹\n                if(menu_value('menu_scrollToShowhide')){\n                    let showhideTime=setInterval(function(){\n                        let showhide=document.querySelector('.showhide')\n                        if(showhide){\n                            clearInterval(showhideTime)\n                            window.scrollTo(0,showhide.offsetTop)\n                        }}, 100)\n                    }else{\n                        setTimeout(function(){window.scrollTo(0,0)}, 1000);\n                    }\n            }\n        }\n\n    }\n\n\n    // å†™å…¥è‡ªåŠ¨å›å¤å†…å®¹\n    function writeReply(){\n        let textarea = document.getElementById('fastpostmessage');\n        if (textarea){\n            textarea.value = textarea.value + replyList[Math.floor((Math.random()*replyList.length))] + replyList[Math.floor((Math.random()*replyList.length))];\n            let fastpostsubmit = document.getElementById('fastpostsubmit');\n            if (fastpostsubmit){\n                fastpostsubmit.click();\n            }\n        }\n    }\n\n\n    // æ¸…ç†ç½®é¡¶å¸–å­\n    function cleanTopPost(){\n        let showhide = document.querySelectorAll('a.showhide.y');\n        if (showhide.length > 0){\n            showhide.forEach(el=>el.click());\n        }\n    }\n\n\n    // éšè—å¸–å­å†…çš„ [ä¸‹ä¸€é¡µ] æŒ‰é’®\n    function hidePgbtn() {\n        document.lastChild.appendChild(document.createElement('style')).textContent = '.pgbtn {display: none;}';\n    }\n\n\n    // è‡ªåŠ¨ç¿»é¡µ\n    function pageLoading() {\n        if (curSite.SiteTypeID > 0){\n            windowScroll(function (direction, e) {\n                if (direction === 'down') { // ä¸‹æ»‘æ‰å‡†å¤‡ç¿»é¡µ\n                    let scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n                    let scrollDelta = 666;\n                    if (document.documentElement.scrollHeight <= document.documentElement.clientHeight + scrollTop + scrollDelta) {\n                        if (curSite.SiteTypeID === SiteType.FORUM) { // å¦‚æœæ˜¯å„ç‰ˆå—å¸–å­åˆ—è¡¨åˆ™ç›´æ¥ç‚¹ä¸‹ä¸€é¡µå°±è¡Œäº†\n                            let autopbn = document.querySelector('#autopbn');\n                            if (autopbn && autopbn.textContent == 'ä¸‹ä¸€é¡µ Â»'){ // å¦‚æœå·²ç»åœ¨åŠ è½½ä¸­äº†ï¼Œå°±å¿½ç•¥\n                                autopbn.click();\n                            }\n                        }else{\n                            ShowPager.loadMorePage();\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n\n    // æ»šåŠ¨æ¡äº‹ä»¶\n    function windowScroll(fn1) {\n        var beforeScrollTop = document.documentElement.scrollTop,\n            fn = fn1 || function () {};\n        setTimeout(function () { // å»¶æ—¶æ‰§è¡Œï¼Œé¿å…åˆšè½½å…¥åˆ°é¡µé¢å°±è§¦å‘ç¿»é¡µäº‹ä»¶\n            window.addEventListener('scroll', function (e) {\n                var afterScrollTop = document.documentElement.scrollTop,\n                    delta = afterScrollTop - beforeScrollTop;\n                if (delta == 0) return false;\n                fn(delta > 0 ? 'down' : 'up', e);\n                beforeScrollTop = afterScrollTop;\n            }, false);\n        }, 1000)\n    }\n\n\n    // ä¿®æ”¹è‡ª https://greasyfork.org/scripts/14178 , https://github.com/machsix/Super-preloader\n    var ShowPager = {\n        getFullHref: function (e) {\n            if (e != null && e.nodeType === 1 && e.href && e.href.slice(0,4) === 'http') return e.href;\n            return '';\n        },\n        createDocumentByString: function (e) {\n            if (e) {\n                if ('HTML' !== document.documentElement.nodeName) return (new DOMParser).parseFromString(e, 'application/xhtml+xml');\n                var t;\n                try { t = (new DOMParser).parseFromString(e, 'text/html');} catch (e) {}\n                if (t) return t;\n                if (document.implementation.createHTMLDocument) {\n                    t = document.implementation.createHTMLDocument('ADocument');\n                } else {\n                    try {((t = document.cloneNode(!1)).appendChild(t.importNode(document.documentElement, !1)), t.documentElement.appendChild(t.createElement('head')), t.documentElement.appendChild(t.createElement('body')));} catch (e) {}\n                }\n                if (t) {\n                    var r = document.createRange(),\n                        n = r.createContextualFragment(e);\n                    r.selectNodeContents(document.body);\n                    t.body.appendChild(n);\n                    for (var a, o = { TITLE: !0, META: !0, LINK: !0, STYLE: !0, BASE: !0}, i = t.body, s = i.childNodes, c = s.length - 1; c >= 0; c--) o[(a = s[c]).nodeName] && i.removeChild(a);\n                    return t;\n                }\n            } else console.error('æ²¡æœ‰æ‰¾åˆ°è¦è½¬æˆ DOM çš„å­—ç¬¦ä¸²');\n        },\n        loadMorePage: function () {\n            if (curSite.pager) {\n                let curPageEle = getElementByXpath(curSite.pager.nextLink);\n                var url = this.getFullHref(curPageEle);\n                //console.log(`${url} ${curPageEle} ${curSite.pageUrl}`);\n                if(url === '') return;\n                if(curSite.pageUrl === url) return;// ä¸ä¼šé‡å¤åŠ è½½ç›¸åŒçš„é¡µé¢\n                curSite.pageUrl = url;\n                // è¯»å–ä¸‹ä¸€é¡µçš„æ•°æ®\n                curSite.pager.startFilter && curSite.pager.startFilter();\n                GM_xmlhttpRequest({\n                    url: url,\n                    method: \"GET\",\n                    timeout: 5000,\n                    onload: function (response) {\n                        try {\n                            var newBody = ShowPager.createDocumentByString(response.responseText);\n                            let pageElems = getAllElements(curSite.pager.pageElement, newBody, newBody);\n                            let toElement = getAllElements(curSite.pager.HT_insert[0])[0];\n                            if (pageElems.length >= 0) {\n                                let addTo = \"beforeend\";\n                                if (curSite.pager.HT_insert[1] == 1) addTo = \"beforebegin\";\n                                // æ’å…¥æ–°é¡µé¢å…ƒç´ \n                                pageElems.forEach(function (one) {\n                                    toElement.insertAdjacentElement(addTo, one);\n                                });\n                                // æ›¿æ¢å¾…æ›¿æ¢å…ƒç´ \n                                try {\n                                    let oriE = getAllElements(curSite.pager.replaceE);\n                                    let repE = getAllElements(curSite.pager.replaceE, newBody, newBody);\n                                    if (oriE.length === repE.length) {\n                                        for (var i = 0; i < oriE.length; i++) {\n                                            oriE[i].outerHTML = repE[i].outerHTML;\n                                        }\n                                    }\n                                } catch (e) {\n                                    console.log(e);\n                                }\n                            }\n                        } catch (e) {\n                            console.log(e);\n                        }\n                    }\n                });\n            }\n        },\n    };\n    function getElementByCSS(css, contextNode = document) {\n        return contextNode.querySelector(css);\n    }\n    function getAllElementsByCSS(css, contextNode = document) {\n        return [].slice.call(contextNode.querySelectorAll(css));\n    }\n    function getElementByXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        try {\n            const result = doc.evaluate(xpath, contextNode, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);\n            // åº”è¯¥æ€»æ˜¯è¿”å›ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹\n            return result.singleNodeValue && result.singleNodeValue.nodeType === 1 && result.singleNodeValue;\n        } catch (err) {\n            throw new Error(`Invalid xpath: ${xpath}`);\n        }\n    }\n    function getAllElementsByXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        const result = [];\n        try {\n            const query = doc.evaluate(xpath, contextNode, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n            for (let i = 0; i < query.snapshotLength; i++) {\n                const node = query.snapshotItem(i);\n                // å¦‚æœæ˜¯ Element èŠ‚ç‚¹\n                if (node.nodeType === 1) result.push(node);\n            }\n        } catch (err) {\n            throw new Error(`æ— æ•ˆ Xpath: ${xpath}`);\n        }\n        return result;\n    }\n    function getAllElements(selector, contextNode = undefined, doc = document, win = window, _cplink = undefined) {\n        if (!selector) return [];\n        contextNode = contextNode || doc;\n        if (typeof selector === 'string') {\n            if (selector.search(/^css;/i) === 0) {\n                return getAllElementsByCSS(selector.slice(4), contextNode);\n            } else {\n                return getAllElementsByXpath(selector, contextNode, doc);\n            }\n        } else {\n            const query = selector(doc, win, _cplink);\n            if (!Array.isArray(query)) {\n                throw new Error('getAllElements è¿”å›é”™è¯¯ç±»å‹');\n            } else {\n                return query;\n            }\n        }\n    }\n})();"
        },
        {
          "name": "52pojie-Beautification.user.js",
          "type": "blob",
          "size": 6.5966796875,
          "content": "// ==UserScript==\n// @name         å¾çˆ±ç ´è§£è®ºå›ç¾åŒ–\n// @version      1.0.9\n// @author       X.I.U\n// @description  ç²¾ç®€å¤šä½™å†…å®¹ã€æ ·å¼ä¼˜åŒ–\n// @match        *://www.52pojie.cn/*\n// @icon         data:image/png;base64,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\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @license      GPL-3.0 License\n// @run-at       document-start\n// @namespace    https://greasyfork.org/scripts/412681\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/412681/feedback', {active: true,insert: true,setParent: true});});\n    addStyle();\n    function addStyle() {\n        let style = `.bml {display:none !important;}\n#postlist .plc .t_f img, #postlist .plc .tattl img {\n    max-height: 500px !important;\n    width: auto !important;\n}\na[href=\"connect.php?mod=config\"], #toptb, #navmenu, #nv_ph, #nv, #pt .y, #chart, #ft, #custominfo_pmenu, .bm.lk, .dnch_eo_pt, .dnch_eo_pr, .dnch_eo_f, dl.pil.cl, td.plc.plm .sign, .dnch_eo_pb, .dnch_eo_pt, .pls .side-star, .pls .side-group, .res-footer-note, .comiis_nav, .scbar_hot_td, .md_ctrl, .pls.favatar .xg1 {\n\tdisplay:none !important;\n}\n\n@media (max-width:650px) {\n\t#postlist .favatar.pls .avatar img {\n\t\tmargin:0 0 2px;\n\t}\n\t.pls .avatar img {\n\t\tbackground:none;\n\t\tpadding:0;\n\t\tborder:4px solid #ffffff\n\t}\n\t.avtm img {\n\t\twidth:60px;\n\t}\n}\n.t_fsz {\n\tmin-height:60px;\n}\n.pls .pi {\n\ttext-align:center;\n\tpadding:10px 0 0 0;\n\tborder:none;\n\toverflow:visible;\n}\n.xw1 {\n\tfont-size:15px;\n}\ntextarea#fastpostmessage {\n\tbackground:none !important;\n}\n.pcb img {\n\tmax-width:60%;\n\tmargin:4px;\n}\n.rate {\n\tmargin:0;\n}\n.ratl td {\n\tpadding:0px;\n}\n.xw1 {\n\tfont-size:12px;\n\tfont-weight:500;\n}\n.xi2,.xi2 a,.xi3 a {\n\tcolor:red;\n}\n.toptitle_7ree td {\n    border-top: 1px solid #CDCDCD;\n}\n.mtw {\n\tmargin-top:0px !important;\n}\n\n#p_btn {\n\tpadding:0px;\n\tmargin:0 0 0 1px;\n\tdisplay:flex;\n\tjustify-content:space-evenly;\n}\n#scbar {\n\tborder-top:0;\n\tborder-bottom:0;\n\tbackground:0;\n}\n\n.pls .o li {\n    margin: 0 !important;;\n    height: 20px !important;;\n    line-height: 20px !important;;\n}\n\n/* å·¦ä¾§å±‚ä¸»ä¿¡æ¯ */\n.pls .avatar img {width: auto !important;max-height: 100px !important;}\n.pls .avatar {text-align:center !important; margin: 0 !important;}\n.pls .tns {padding: 0 !important;}\n\n/* é“¾æ¥ç‚¹å‡»åé¢œè‰²å˜æµ…ï¼ˆç°ç™½è‰²ï¼‰ */\n.tl th a:visited, .tl td.fn a:visited {\n    color: #aaa;\n}`;\n        document.lastChild.appendChild(document.createElement('style')).textContent = style;\n    }\n})();"
        },
        {
          "name": "52pojie-Enhanced.user.js",
          "type": "blob",
          "size": 21.38671875,
          "content": "// ==UserScript==\n// @name         å¾çˆ±ç ´è§£è®ºå›å¢å¼º - è‡ªåŠ¨ç­¾åˆ°ã€ç¿»é¡µ\n// @version      1.3.7\n// @author       X.I.U\n// @description  è‡ªåŠ¨ç­¾åˆ°ã€è‡ªåŠ¨æ— ç¼ç¿»é¡µã€å±è”½å¯¼è¯»æ‚¬èµè´´ï¼ˆæœ€æ–°å‘è¡¨é¡µï¼‰\n// @match        *://www.52pojie.cn/*\n// @icon         data:image/png;base64,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\n// @grant        GM_xmlhttpRequest\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://greasyfork.org/scripts/412680\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ALL = [\n        ['menu_autoClockIn', 'è‡ªåŠ¨ç­¾åˆ°', 'è‡ªåŠ¨ç­¾åˆ°', true],\n        ['menu_pageLoading', 'è‡ªåŠ¨æ— ç¼ç¿»é¡µ', 'è‡ªåŠ¨æ— ç¼ç¿»é¡µ', true],\n        ['menu_thread_pageLoading', 'å¸–å­å†…è‡ªåŠ¨æ— ç¼ç¿»é¡µ', 'å¸–å­å†…è‡ªåŠ¨æ— ç¼ç¿»é¡µ', true],\n        ['menu_delateReward', 'å±è”½å¯¼è¯»æ‚¬èµè´´ï¼ˆæœ€æ–°å‘è¡¨ï¼‰', 'å±è”½å¯¼è¯»æ‚¬èµè´´', true]\n    ], menu_ID = [];\n    for (let i=0;i<menu_ALL.length;i++) { // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n        if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};\n    }\n    registerMenuCommand();\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (menu_ID.length > menu_ALL.length) { // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n            for (let i=0;i<menu_ID.length;i++) {\n                GM_unregisterMenuCommand(menu_ID[i]);\n            }\n        }\n        for (let i=0;i<menu_ALL.length;i++) { // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n            menu_ALL[i][3] = GM_getValue(menu_ALL[i][0]);\n            menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n        }\n        menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/412680/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status == 'true') {\n            GM_setValue(`${Name}`, false);\n            GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, title: 'å¾çˆ±ç ´è§£è®ºå›å¢å¼º', timeout: 3000, onclick: function(){location.reload();}});\n        } else {\n            GM_setValue(`${Name}`, true);\n            GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, title: 'å¾çˆ±ç ´è§£è®ºå›å¢å¼º', timeout: 3000, onclick: function(){location.reload();}});\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n    // è¿”å›èœå•å€¼\n    function menu_value(menuName) {\n        for (let menu of menu_ALL) {\n            if (menu[0] == menuName) {\n                return menu[3]\n            }\n        }\n    }\n\n    var ShowPager;\n    showPager();\n    // é»˜è®¤ ID ä¸º 0\n    var curSite = {SiteTypeID: 0};\n\n    // è‡ªåŠ¨ç¿»é¡µè§„åˆ™\n    // typeï¼š1 = è„šæœ¬å®ç°è‡ªåŠ¨æ— ç¼ç¿»é¡µï¼Œ2 = ç½‘ç«™è‡ªå¸¦äº†è‡ªåŠ¨æ— ç¼ç¿»é¡µåŠŸèƒ½ï¼Œåªéœ€è¦ç‚¹å‡»ä¸‹ä¸€é¡µæŒ‰é’®å³å¯ï¼Œè¿™æ—¶ nextText ä¸ºæŒ‰é’®æ–‡æœ¬ï¼Œé¿å…ä¸€ç¬é—´åŠ è½½å¤ªå¤šæ¬¡ä¸‹ä¸€é¡µ\n    // HT_insertï¼š1 = æ’å…¥å…ƒç´ å‰é¢ï¼›2 = æ’å…¥å…ƒç´ ä¸­çš„æœ€åä¸€ä¸ªå­å…ƒç´ åé¢\n    // scrollDeltaï¼šæ•°å€¼è¶Šå¤§ï¼Œæ»šåŠ¨æ¡è§¦å‘ç‚¹è¶Šé ä¸Šï¼ˆè¶Šæ—©å¼€å§‹ç¿»é¡µï¼‰\n    let DBSite = {\n        forum: {\n            SiteTypeID: 1,\n            pager: {\n                type: 2,\n                nextLink: '#autopbn',\n                nextText: 'ä¸‹ä¸€é¡µ Â»',\n                scrollDelta: 766\n            }\n        },\n        thread: {\n            SiteTypeID: 2,\n            pager: {\n                type: 1,\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;div#postlist > div[id^=\"post_\"]',\n                HT_insert: ['css;div#postlist', 2],\n                replaceE: 'css;#ct > .pgs',\n                scrollDelta: 766\n            }\n        },\n        search: {\n            SiteTypeID: 3,\n            pager: {\n                type: 1,\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;div#threadlist > ul',\n                HT_insert: ['css;div#threadlist', 2],\n                replaceE: 'css;div.pg',\n                scrollDelta: 766\n            }\n        },\n        guide: {\n            SiteTypeID: 4,\n            pager: {\n                type: 1,\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;div#threadlist div.bm_c table > tbody',\n                HT_insert: ['css;div#threadlist div.bm_c table', 2],\n                replaceE: 'css;div.pg',\n                scrollDelta: 766\n            }\n        },\n        youspace: {\n            SiteTypeID: 5,\n            pager: {\n                type: 1,\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;tbody > tr:not(.th)',\n                HT_insert: ['css;tbody', 2],\n                replaceE: 'css;div.pg',\n                scrollDelta: 1000\n            }\n        },\n        collection: {\n            SiteTypeID: 6,\n            pager: {\n                type: 1,\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;div#ct div.bm_c table > tbody',\n                HT_insert: ['css;div#ct div.bm_c table', 2],\n                replaceE: 'css;div.pg',\n                scrollDelta: 899\n            }\n        },\n        favorite: {\n            SiteTypeID: 7,\n            pager: {\n                type: 1,\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;ul#favorite_ul > li',\n                HT_insert: ['css;ul#favorite_ul', 2],\n                replaceE: 'css;div.pg',\n                scrollDelta: 899\n            }\n        }\n    };\n\n    // URL åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼\n    let patt_thread = /\\/thread-\\d+-\\d+\\-\\d+.html/,\n        patt_forum = /\\/forum-\\d+-\\d+\\.html/\n\n    // URL åˆ¤æ–­\n    if (patt_thread.test(location.pathname) || location.search.indexOf('mod=viewthread') > -1) {\n        if (menu_value('menu_thread_pageLoading')) {\n            curSite = DBSite.thread; //      å¸–å­å†…\n            hidePgbtn(); //                  éšè—å¸–å­å†…çš„ [ä¸‹ä¸€é¡µ] æŒ‰é’®\n        }\n    } else if (patt_forum.test(location.pathname) || location.search.indexOf('mod=forumdisplay') > -1) {\n        curSite = DBSite.forum; //           å„æ¿å—å¸–å­åˆ—è¡¨\n    } else if (location.search.indexOf('mod=guide') > -1) {\n        curSite = DBSite.guide; //           å¯¼è¯»å¸–å­åˆ—è¡¨\n        delateReward(); //                   å±è”½å¯¼è¯»æ‚¬èµè´´ï¼ˆæœ€æ–°å‘è¡¨ï¼‰\n    } else if (location.search.indexOf('mod=collection') > -1) {\n        curSite = DBSite.collection; //      æ·˜è´´åˆ—è¡¨\n    } else if (location.search.indexOf('do=favorite') > -1) {\n        curSite = DBSite.favorite; //        æ”¶è—åˆ—è¡¨\n    } else if (location.pathname === '/search.php') {\n        curSite = DBSite.search; //          æœç´¢ç»“æœåˆ—è¡¨\n    } else if(location.search.indexOf('mod=space') > -1 && location.search.indexOf('&view=me') > -1) { // åˆ«äººçš„ä¸»é¢˜/å›å¤\n        curSite = DBSite.youspace;\n    }\n    curSite.pageUrl = ''; // ä¸‹ä¸€é¡µURL\n\n    qianDao(); // è‡ªåŠ¨ç­¾åˆ°\n    pageLoading(); // è‡ªåŠ¨ç¿»é¡µ\n\n\n    // è‡ªåŠ¨ç­¾åˆ°ï¼ˆåå°ï¼‰\n    function qianDao() {\n        if (!menu_value('menu_autoClockIn')) return\n        if (location.pathname === '/home.php' && location.search.indexOf('mod=task') > -1) {return;}\n        let qiandao = document.querySelector('#um a[href^=\"home.php?mod=task&do=apply&id=2\"]');\n        if (qiandao) {\n            let iframe = document.createElement('iframe'); // XHR æ–¹å¼æ— æ³•ç­¾åˆ°ï¼Œæ”¹ç”¨ iframe æ¡†æ¶æ‰“å¼€ç­¾åˆ°ç½‘é¡µ\n            document.lastElementChild.appendChild(iframe);\n            iframe.style = 'display: none;';\n            iframe.src = qiandao.href;\n            qiandao.querySelector('.qq_bind').src = 'https://www.52pojie.cn/static/image/common/wbs.png'; // ä¿®æ”¹ [æ‰“å¡ç­¾åˆ°] å›¾æ ‡ä¸º [ç­¾åˆ°å®Œæ¯•] å›¾æ ‡\n            qiandao.href = 'javascript:void(0);'\n        }\n    }\n\n\n    //å±è”½æ‚¬èµè´´ï¼ˆå¯¼è¯»-æœ€æ–°å‘è¡¨ï¼‰\n    function delateReward() {\n        if (!menu_value('menu_delateReward')) return\n        if (location.search.indexOf('mod=guide&view=newthread') > -1) {\n            let tbody = document.querySelectorAll('#threadlist tbody[id^=\"normalthread\"]');\n            Array.from(tbody).forEach(function (_this) {\n                if (_this.querySelector('img[alt=\"æ‚¬èµ\"]')) {\n                    _this.remove();\n                }\n            })\n        }\n\n        if (document.body.scrollHeight < window.innerHeight) {\n            // å¦‚æœå±è”½æ‚¬èµè´´åï¼Œå‰©ä½™å¸–å­åˆ—è¡¨å¤ªå°‘ä¼šæ²¡æœ‰æ»šåŠ¨æ¡ï¼Œæ— æ³•æ»šåŠ¨é¡µé¢è§¦å‘è‡ªåŠ¨ç¿»é¡µäº‹ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨è§¦å‘\n            ShowPager.loadMorePage();\n        }\n    }\n\n\n    // éšè—å¸–å­å†…çš„ [ä¸‹ä¸€é¡µ] æŒ‰é’®\n    function hidePgbtn() {\n        document.lastChild.appendChild(document.createElement('style')).textContent = '.pgbtn {display: none;}';\n    }\n\n\n    // è‡ªåŠ¨ç¿»é¡µ\n    function pageLoading() {\n        if (!menu_value('menu_pageLoading')) return\n        if (curSite.SiteTypeID > 0) {\n            windowScroll(function (direction, e) {\n                if (direction === \"down\") { // ä¸‹æ»‘æ‰å‡†å¤‡ç¿»é¡µ\n                    let scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n                    let scrollDelta = curSite.pager.scrollDelta;\n                    if (document.documentElement.scrollHeight <= document.documentElement.clientHeight + scrollTop + scrollDelta) {\n                        if (curSite.pager.type === 1) {\n                            ShowPager.loadMorePage();\n                        } else {\n                            let autopbn = document.querySelector(curSite.pager.nextLink);\n                            if (autopbn && autopbn.textContent == curSite.pager.nextText) { // å¦‚æœæ­£åœ¨åŠ è½½ï¼Œå°±ä¸å†ç‚¹å‡»\n                                autopbn.click();\n                            }\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n\n    // æ»šåŠ¨æ¡äº‹ä»¶\n    function windowScroll(fn1) {\n        var beforeScrollTop = document.documentElement.scrollTop,\n            fn = fn1 || function () {};\n        setTimeout(function () { // å»¶æ—¶æ‰§è¡Œï¼Œé¿å…åˆšè½½å…¥åˆ°é¡µé¢å°±è§¦å‘ç¿»é¡µäº‹ä»¶\n            window.addEventListener('scroll', function (e) {\n                var afterScrollTop = document.documentElement.scrollTop,\n                    delta = afterScrollTop - beforeScrollTop;\n                if (delta == 0) return false;\n                fn(delta > 0 ? 'down' : 'up', e);\n                beforeScrollTop = afterScrollTop;\n            }, false);\n        }, 1000)\n    }\n\n\n    // ä¿®æ”¹è‡ª https://greasyfork.org/scripts/14178 , https://github.com/machsix/Super-preloader\n    function showPager() {\n        ShowPager = {\n            getFullHref: function (e) {\n                if (e != null && e.nodeType === 1 && e.href && e.href.slice(0,4) === 'http') return e.href;\n                return '';\n            },\n            createDocumentByString: function (e) {\n                if (e) {\n                    if ('HTML' !== document.documentElement.nodeName) return (new DOMParser).parseFromString(e, 'application/xhtml+xml');\n                    var t;\n                    try { t = (new DOMParser).parseFromString(e, 'text/html');} catch (e) {}\n                    if (t) return t;\n                    if (document.implementation.createHTMLDocument) {\n                        t = document.implementation.createHTMLDocument('ADocument');\n                    } else {\n                        try {((t = document.cloneNode(!1)).appendChild(t.importNode(document.documentElement, !1)), t.documentElement.appendChild(t.createElement('head')), t.documentElement.appendChild(t.createElement('body')));} catch (e) {}\n                    }\n                    if (t) {\n                        var r = document.createRange(),\n                            n = r.createContextualFragment(e);\n                        r.selectNodeContents(document.body);\n                        t.body.appendChild(n);\n                        for (var a, o = { TITLE: !0, META: !0, LINK: !0, STYLE: !0, BASE: !0}, i = t.body, s = i.childNodes, c = s.length - 1; c >= 0; c--) o[(a = s[c]).nodeName] && i.removeChild(a);\n                        return t;\n                    }\n                } else console.error('æ²¡æœ‰æ‰¾åˆ°è¦è½¬æˆ DOM çš„å­—ç¬¦ä¸²');\n            },\n            loadMorePage: function () {\n                if (curSite.pager) {\n                    let curPageEle = getElementByXpath(curSite.pager.nextLink);\n                    var url = this.getFullHref(curPageEle);\n                    //console.log(`${url} ${curPageEle} ${curSite.pageUrl}`);\n                    if(url === '') return;\n                    if(curSite.pageUrl === url) return;// ä¸ä¼šé‡å¤åŠ è½½ç›¸åŒçš„é¡µé¢\n                    curSite.pageUrl = url;\n                    // è¯»å–ä¸‹ä¸€é¡µçš„æ•°æ®\n                    curSite.pager.startFilter && curSite.pager.startFilter();\n                    GM_xmlhttpRequest({\n                        url: url,\n                        method: \"GET\",\n                        overrideMimeType: 'text/html; charset=' + (document.characterSet||document.charset||document.inputEncoding),\n                        timeout: 5000,\n                        onload: function (response) {\n                            try {\n                                var newBody = ShowPager.createDocumentByString(response.responseText);\n                                let pageElems = getAllElements(curSite.pager.pageElement, newBody, newBody);\n                                let toElement = getAllElements(curSite.pager.HT_insert[0])[0];\n                                if (pageElems.length >= 0) {\n                                    let addTo = \"beforeend\";\n                                    if (curSite.pager.HT_insert[1] == 1) addTo = \"beforebegin\";\n                                    // æ’å…¥æ–°é¡µé¢å…ƒç´ \n                                    pageElems.forEach(function (one) {\n                                        toElement.insertAdjacentElement(addTo, one);\n                                    });\n                                    //åˆ é™¤æ‚¬èµè´´\n                                    delateReward();\n                                    // æ›¿æ¢å¾…æ›¿æ¢å…ƒç´ \n                                    try {\n                                        let oriE = getAllElements(curSite.pager.replaceE);\n                                        let repE = getAllElements(curSite.pager.replaceE, newBody, newBody);\n                                        if (oriE.length === repE.length) {\n                                            for (var i = 0; i < oriE.length; i++) {\n                                                oriE[i].outerHTML = repE[i].outerHTML;\n                                            }\n                                        }\n                                    } catch (e) {\n                                        console.log(e);\n                                    }\n                                }\n                            } catch (e) {\n                                console.log(e);\n                            }\n                        }\n                    });\n                }\n            },\n        };\n    }\n    function getElementByCSS(css, contextNode = document) {\n        return contextNode.querySelector(css);\n    }\n    function getAllElementsByCSS(css, contextNode = document) {\n        return [].slice.call(contextNode.querySelectorAll(css));\n    }\n    function getElementByXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        try {\n            const result = doc.evaluate(xpath, contextNode, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);\n            // åº”è¯¥æ€»æ˜¯è¿”å›ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹\n            return result.singleNodeValue && result.singleNodeValue.nodeType === 1 && result.singleNodeValue;\n        } catch (err) {\n            throw new Error(`Invalid xpath: ${xpath}`);\n        }\n    }\n    function getAllElementsByXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        const result = [];\n        try {\n            const query = doc.evaluate(xpath, contextNode, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n            for (let i = 0; i < query.snapshotLength; i++) {\n                const node = query.snapshotItem(i);\n                // å¦‚æœæ˜¯ Element èŠ‚ç‚¹\n                if (node.nodeType === 1) result.push(node);\n            }\n        } catch (err) {\n            throw new Error(`æ— æ•ˆ Xpath: ${xpath}`);\n        }\n        return result;\n    }\n    function getAllElements(selector, contextNode = undefined, doc = document, win = window, _cplink = undefined) {\n        if (!selector) return [];\n        contextNode = contextNode || doc;\n        if (typeof selector === 'string') {\n            if (selector.search(/^css;/i) === 0) {\n                return getAllElementsByCSS(selector.slice(4), contextNode);\n            } else {\n                return getAllElementsByXpath(selector, contextNode, doc);\n            }\n        } else {\n            const query = selector(doc, win, _cplink);\n            if (!Array.isArray(query)) {\n                throw new Error('getAllElements è¿”å›é”™è¯¯ç±»å‹');\n            } else {\n                return query;\n            }\n        }\n    }\n})();"
        },
        {
          "name": "Autopage.user.js",
          "type": "blob",
          "size": 176.03515625,
          "content": "// ==UserScript==\n// @name         è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n// @name:zh-CN   è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n// @name:zh-TW   è‡ªå‹•ç„¡ç¸«ç¿»é \n// @name:en      AutoPager\n// @version      6.6.47\n// @author       X.I.U\n// @description  â­æ— ç¼åŠ è½½ ä¸‹ä¸€é¡µå†…å®¹ è‡³ç½‘é¡µåº•éƒ¨ï¼ˆç±»ä¼¼ç€‘å¸ƒæµï¼Œæ— é™æ»šåŠ¨ï¼Œæ— éœ€æ‰‹åŠ¨ç‚¹å‡»ä¸‹ä¸€é¡µï¼‰â­ï¼Œç›®å‰æ”¯æŒï¼šã€æ‰€æœ‰ã€ŒDiscuz!ã€Flarumã€phpBBã€MyBBã€Xiunoã€XenForoã€NexusPHP...ã€è®ºå›ã€‘ã€ç™¾åº¦ã€è°·æ­Œ(Google)ã€å¿…åº”(Bing)ã€æœç‹—ã€å¾®ä¿¡ã€360ã€Yahooã€Yandex ç­‰æœç´¢å¼•æ“...ã€‘ã€è´´å§ã€è±†ç“£ã€çŸ¥ä¹ã€NGAã€V2EXã€èµ·ç‚¹ä¸­æ–‡ã€åƒå›¾ç½‘ã€åƒåº“ç½‘ã€Pixabayã€Pixivã€3DMã€æ¸¸ä¾ ç½‘ã€æ¸¸æ°‘æ˜Ÿç©ºã€NexusModsã€Steam åˆ›æ„å·¥åŠã€CS.RIN.RUã€RuTrackerã€BTä¹‹å®¶ã€èŒç•ªç»„ã€åŠ¨æ¼«èŠ±å›­ã€æ¨±èŠ±åŠ¨æ¼«ã€çˆ±æ‹åŠ¨æ¼«ã€AGE åŠ¨æ¼«ã€Nyaaã€SrkBTã€RARBGã€SubHDã€423Downã€ä¸æ­»é¸Ÿã€æ‰©å±•è¿·ã€å°ä¼—è½¯ä»¶ã€ã€åŠ¨æ¼«ç‹‚ã€åŠ¨æ¼«å±‹ã€æ¼«ç”»çŒ«ã€æ¼«ç”»å±‹ã€æ¼«ç”» DBã€HiComicã€Mangabzã€Xmanhua ç­‰æ¼«ç”»ç½‘ç«™...ã€‘ã€PubMedã€Z-Libraryã€GreasyForkã€Githubã€StackOverflowï¼ˆä»¥ä¸Šä»…ä¸€å°éƒ¨åˆ†å¸¸è§ç½‘ç«™ï¼Œæ›´å¤šçš„å†™ä¸ä¸‹äº†...\n// @description:zh-TW  â­ç„¡ç¸«åŠ è¼‰ ä¸‹ä¸€é å…§å®¹ è‡³ç¶²é åº•éƒ¨ï¼ˆé¡ä¼¼ç€‘å¸ƒæµï¼Œæ— é™æ»šåŠ¨ï¼Œç„¡éœ€æ‰‹åƒé»æ“Šä¸‹ä¸€é ï¼‰â­ï¼Œæ”¯æŒå„è«–å£‡ã€ç¤¾äº¤ã€éŠæˆ²ã€æ¼«ç•«ã€å°èªªã€å­¸è¡“ã€æœç´¢å¼•æ“(Googleã€Bingã€Yahoo...) ç­‰ç¶²ç«™~\n// @description:en  Append the next page content to the bottom seamlessly (like a waterfall, Unlimited scrolling, no need to manually click on the next page)~\n// @match        *://*/*\n// @connect      userscript.xiu2.xyz\n// @connect      userscript.xiu2.us.kg\n// @connect      userscript.h233.eu.org\n// @connect      bitbucket.org\n// @connect      jsd.onmicrosoft.cn\n// @connect      wget.la\n// @connect      cdn.wget.la\n// @connect      ghgo.xyz\n// @connect      raw.ixnic.net\n// @connect      ghproxy.cc\n// @connect      raw.github.site\n// @connect      raw.github.store\n// @connect      raw.dgithub.xyz\n// @connect      gh-proxy.ygxz.in\n// @connect      ghproxy.net\n// @connect      github.moeyy.xyz\n// @connect      cdn.jsdmirror.com\n// @connect      js.cdn.haah.net\n// @connect      gh.akass.cn\n// @connect      raw.kkgithub.com\n// @connect      gcore.jsdelivr.net\n// @connect      fastly.jsdelivr.net\n// @connect      jsd.proxy.aks.moe\n// @connect      jsdelivr.pai233.top\n// @connect      gh-proxy.com\n// @connect      www.xuexiniu.com\n// @connect      bbs.xuexiniu.com\n// @connect      weili.ooopic.com\n// @connect      www.ykmh.com\n// @icon         data:image/png;base64,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\n// @grant        GM_xmlhttpRequest\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @grant        GM_info\n// @grant        GM.info\n// @grant        window.onurlchange\n// @grant        unsafeWindow\n// @sandbox      JavaScript\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://github.com/XIU2/UserScript\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// @exclude      https://*.taobao.com/*\n// @exclude      https://*.tmall.com/*\n// @exclude      https://*.1688.com/*\n// @exclude      https://*.jd.com/*\n// @exclude      https://*.vip.com/*\n// @exclude      https://*.suning.com/*\n// @exclude      https://*.aliexpress.com/*\n// @exclude      https://*.paypal.com/*\n// @exclude      https://*.iqiyi.com/*\n// @exclude      https://*.youku.com/*\n// @exclude      https://m.v.qq.com/*\n// @exclude      https://v.qq.com/*\n// @exclude      https://*.acfun.cn/*\n// @exclude      https://t.bilibili.com/*\n// @exclude      https://www.bilibili.com/*\n// @exclude      https://live.bilibili.com/*\n// @exclude      https://space.bilibili.com/*\n// @exclude      https://manga.bilibili.com/*\n// @exclude      https://member.bilibili.com/*\n// @exclude      https://message.bilibili.com/*\n// @exclude      https://*.youtube.com/*\n// @exclude      https://*.youtube-nocookie.com/*\n// @exclude      https://*.cnki.net/*\n// @exclude      https://mail.qq.com/*\n// @exclude      https://weread.qq.com/*\n// @exclude      https://*.weread.qq.com/*\n// @exclude      https://www.qidian.com/chapter/*\n// @exclude      https://bz.zzzmh.cn/*\n// @exclude      https://wallhaven.cc/*\n// @exclude      https://chrome.zzzmh.cn/*\n// @exclude      https://*.guazi.com/*\n// @exclude      https://*.liepin.com/*\n// @exclude      https://*.58.com/*\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    let urlArr = [ // å¤–ç½®ç¿»é¡µè§„åˆ™æ›´æ–°åœ°å€åˆ†æµï¼Œä»¥ç¡®ä¿æ›´æ–°æˆåŠŸç‡ï¼ˆè®°å¾— connectï¼‰\n        'https://cdn.jsdmirror.com/gh/XIU2/UserScript/other/Autopage/rules.json',\n        'https://js.cdn.haah.net/gh/XIU2/UserScript/other/Autopage/rules.json',\n        'https://gh.akass.cn/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://raw.kkgithub.com/XIU2/UserScript/master/other/Autopage/rules.json',\n        //'https://gcore.jsdelivr.net/gh/XIU2/UserScript/other/Autopage/rules.json',\n        'https://fastly.jsdelivr.net/gh/XIU2/UserScript/other/Autopage/rules.json',\n        //'https://jsd.proxy.aks.moe/gh/XIU2/UserScript/other/Autopage/rules.json',\n        'https://jsdelivr.pai233.top/gh/XIU2/UserScript/other/Autopage/rules.json',\n        'https://gh-proxy.com/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json',\n    ]\n    const urlArr2 = [\n        'https://userscript.h233.eu.org/other/Autopage/rules.json',\n        //'https://userscript.xiu2.us.kg/other/Autopage/rules.json',\n        'https://userscript.xiu2.xyz/other/Autopage/rules.json',\n        'https://bitbucket.org/xiu2/userscript/raw/master/other/Autopage/rules.json',\n        'https://jsd.onmicrosoft.cn/gh/XIU2/UserScript/other/Autopage/rules.json',\n        'https://wget.la/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://cdn.wget.la/gh/XIU2/UserScript/other/Autopage/rules.json',\n        'https://ghgo.xyz/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://raw.ixnic.net/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://ghproxy.cc/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://raw.github.site/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://raw.github.store/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://raw.dgithub.xyz/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://gh-proxy.ygxz.in//https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://ghproxy.net/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json',\n        'https://github.moeyy.xyz/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json',\n    ],\n          loadMoreExclude1 = ['.smzdm.com','stackoverflow.com'],\n          loadMoreExclude2 = ['.steampowered.com','.zcool.com.cn'];\n\n    var menuAll = [\n        ['menu_disable', 'âœ… å·²å¯ç”¨ (ç‚¹å‡»å¯¹å½“å‰ç½‘ç«™ç¦ç”¨)', 'âŒ å·²ç¦ç”¨ (ç‚¹å‡»å¯¹å½“å‰ç½‘ç«™å¯ç”¨)', []],\n        ['menu_thread', 'å¸–å­å†…è‡ªåŠ¨ç¿»é¡µ (ç¤¾åŒºç±»ç½‘ç«™)', 'å¸–å­å†…è‡ªåŠ¨ç¿»é¡µ (ç¤¾åŒºç±»ç½‘ç«™)', true],\n        ['menu_page_number', 'æ˜¾ç¤ºå½“å‰é¡µç åŠç‚¹å‡»æš‚åœç¿»é¡µ', 'æ˜¾ç¤ºå½“å‰é¡µç åŠç‚¹å‡»æš‚åœç¿»é¡µ', true],\n        ['menu_pause_page', 'å·¦é”®åŒå‡»ç½‘é¡µç©ºç™½å¤„æš‚åœç¿»é¡µ', 'å·¦é”®åŒå‡»ç½‘é¡µç©ºç™½å¤„æš‚åœç¿»é¡µ', false],\n        ['menu_history', 'æ·»åŠ å†å²è®°å½•+ä¿®æ”¹åœ°å€/æ ‡é¢˜', 'æ·»åŠ å†å²è®°å½•+ä¿®æ”¹åœ°å€/æ ‡é¢˜', true],\n        ['menu_rules', 'æ›´æ–°å¤–ç½®ç¿»é¡µè§„åˆ™ (æ¯å¤©è‡ªåŠ¨)', 'æ›´æ–°å¤–ç½®ç¿»é¡µè§„åˆ™ (æ¯å¤©è‡ªåŠ¨)', {}],\n        ['menu_customRules', 'è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™', 'è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™', {}]\n    ], menuId = [], webType = 0, curSite = {SiteTypeID: 0}, DBSite, DBSite2, DBSiteNow, pausePage = true, pageNum = {now: 1, _now: 1}, urlC = false, nowLocation = '', lp = location.pathname, scriptHandler;\n    urlArr.push(...urlArr2); // åˆå¹¶æ•°ç»„\n    window.autoPage = {lp: ()=>location.pathname, indexOF: indexOF, isMobile: isMobile, isUrlC: isUrlC, isPager: isPager, isTitle: isTitle, blank: forceTarget, getAll: getAll, getOne: getOne, getAllXpath: getAllXpath, getXpath: getXpath, getAllCSS: getAllCSS, getCSS: getCSS, getNextE: getNextE, getNextEP: getNextEP, getNextSP: getNextSP, getNextEPN: getNextEPN, getNextUPN: getNextUPN, getNextUP: getNextUP, getNextF: getNextF, getSearch: getSearch, getCookie: getCookie, insStyle: insStyle, insScript: insScript, cleanuEvent: cleanuEvent, src_bF: src_bF, xs_bF: xs_bF, pageNumIncrement: pageNumIncrement}\n    if (typeof GM_info != 'undefined') {scriptHandler = GM_info.scriptHandler;} else if (typeof GM != 'undefined' && typeof GM.info != 'undefined') {scriptHandler = GM.info.scriptHandler;} else {scriptHandler = '';}\n    for (let i=0;i<menuAll.length;i++){ // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n        if (GM_getValue(menuAll[i][0]) == null){GM_setValue(menuAll[i][0], menuAll[i][3])};\n    }\n    // å…¼å®¹ä¸æ”¯æŒ GM_openInTab çš„æ²¹çŒ´è„šæœ¬ç®¡ç†å™¨\n    if (typeof GM_openInTab !== 'function') {GM_openInTab = openInTab}\n    // å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ structuredCloneï¼ˆChromium 98 æ‰å®Œå…¨æ”¯æŒï¼‰ï¼Œåˆ™ä½¿ç”¨ JSON æ–¹æ³•ä»£æ›¿\n    if (typeof window.structuredClone !== 'function') {window.structuredClone = function(value) {return JSON.parse(JSON.stringify(value));}}\n\n    getRulesUrl();\n    registerMenuCommand();\n    if (menuId.length < 4) {return}\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (menuId.length != []){\n            for (let i=0;i<menuId.length;i++){\n                GM_unregisterMenuCommand(menuId[i]);\n            }\n        }\n        for (let i=0;i<menuAll.length;i++) { // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n            menuAll[i][3] = GM_getValue(menuAll[i][0]);\n\n            if (menuAll[i][0] === 'menu_disable') { // å¯ç”¨/ç¦ç”¨\n\n                if (menu_disable('check')) { // å½“å‰ç½‘ç«™åœ¨ç¦ç”¨åˆ—è¡¨ä¸­\n                    menuId[i] = GM_registerMenuCommand(`${menuAll[i][2]}`, function(){menu_disable('del')});\n                    return\n                } else { // ä¸åœ¨ç¦ç”¨åˆ—è¡¨ä¸­\n                    webType = doesItSupport(); // åˆ¤æ–­ç½‘ç«™ç±»å‹ï¼ˆå³æ˜¯å¦æ”¯æŒï¼‰ï¼Œé¡ºä¾¿ç›´æ¥èµ‹å€¼\n                    if (webType === 0) {\n                        menuId[0] = GM_registerMenuCommand('âŒ å½“å‰ç½‘é¡µæš‚ä¸æ”¯æŒ [ç‚¹å‡»ç”³è¯·]', function(){GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});GM_openInTab('https://greasyfork.org/zh-CN/scripts/419215/feedback', {active: true,insert: true,setParent: true});});\n                        menuId[1] = GM_registerMenuCommand('ğŸ”„ æ›´æ–°å¤–ç½®ç¿»é¡µè§„åˆ™ (æ¯å¤©è‡ªåŠ¨)', function(){getRulesUrl(true)});\n                        menuId[2] = GM_registerMenuCommand('#ï¸âƒ£ è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™', function(){customRules()});\n                        //console.info('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - æš‚ä¸æ”¯æŒå½“å‰ç½‘é¡µ [ ' + location.href + ' ]ï¼Œç”³è¯·æ”¯æŒ: https://github.com/XIU2/UserScript / https://greasyfork.org/zh-CN/scripts/419215/feedback');\n                        return\n                    } else if (webType === -1) {\n                        return\n                    }\n                    menuId[i] = GM_registerMenuCommand(`${menuAll[i][1]}`, function(){menu_disable('add')});\n                }\n\n            } else if (menuAll[i][0] === 'menu_rules') {\n                menuId[i] = GM_registerMenuCommand(`ğŸ”„ ${menuAll[i][1]}`, function(){getRulesUrl(true)});\n\n            } else if (menuAll[i][0] === 'menu_customRules') {\n                menuId[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menuAll[i][1]}`, function(){customRules()});\n\n            } else {\n                menuId[i] = GM_registerMenuCommand(`${menuAll[i][3]?'âœ…':'âŒ'} ${menuAll[i][1]}`, function(){menu_switch(menuAll[i][3], menuAll[i][0], menuAll[i][2])});\n            }\n        }\n        menuId[menuId.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆå¤±æ•ˆ / ç”³è¯·æ”¯æŒ', function () {GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});GM_openInTab('https://greasyfork.org/zh-CN/scripts/419215/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n\n    // --------------------------------------------------------\n\n\n    // åˆ¤æ–­æ˜¯æ”¯æŒ\n    function doesItSupport() {\n        setDBSite(); // é…ç½® DBSite å˜é‡å¯¹è±¡\n\n        // éå†åˆ¤æ–­æ˜¯å¦æ˜¯æŸä¸ªå·²æ”¯æŒçš„ç½‘ç«™ï¼Œé¡ºä¾¿ç›´æ¥èµ‹å€¼\n        let support = false;\n        end:\n        for (let now in DBSite) { // éå† å¯¹è±¡\n            if (DBSite[now].ignore) continue; // å¦‚æœæ˜¯ç‰¹æ®Šçš„å†…ç½®è§„åˆ™ï¼ˆå¦‚é€šç”¨è§„åˆ™ï¼‰åˆ™è·³è¿‡ç›´æ¥ç»§ç»­ä¸‹ä¸€ä¸ªå¾ªç¯\n\n            DBSiteNow = DBSite[now] // ä¾›å…¶ä»–å‡½æ•°åœ¨ åŸŸå/URL åˆ¤æ–­é˜¶æ®µä½¿ç”¨\n\n            // å¦‚æœæ˜¯ æ•°ç»„\n            if (Array.isArray(DBSite[now].host)) {\n\n                for (let i of DBSite[now].host) { // éå† æ•°ç»„\n\n                    // é’ˆå¯¹è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™ä¸­çš„æ­£åˆ™\n                    if (typeof i === 'string' && i.slice(0,1) === '/') i = new RegExp(i.slice(1,i.length-1))\n                    if ((i instanceof RegExp && i.test(location.hostname)) || (typeof i === 'string' && i === location.hostname)) {\n\n                        if (self != top) {if (!DBSite[now].iframe) continue end;} // å¦‚æœå½“å‰ä½äº iframe æ¡†æ¶ä¸‹ï¼Œå°±éœ€è¦åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­æ‰§è¡Œ\n                        if (DBSite[now].url) {\n                            if (typeof DBSite[now].url == 'function') {\n                                DBSite[now].url();\n                            } else { // è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™æ—¶ï¼Œå› ä¸ºåŒåŸŸåä¸åŒé¡µé¢ url åˆ†å¼€å†™ï¼Œæ‰€ä»¥å¦‚æœæ²¡æ‰¾åˆ°å°±éœ€è¦è·³å‡ºå½“å‰æ•°ç»„å¾ªç¯ï¼Œç»§ç»­è§„åˆ™å¾ªç¯\n                                try {\n                                    if (DBSite[now].url.slice(0,1) === '/') { // å¦‚æœæ˜¯æ­£åˆ™ï¼Œåˆ™å¯¹ URL è·¯å¾„è¿›è¡ŒåŒ¹é…\n                                        if (new RegExp(DBSite[now].url.slice(1,DBSite[now].url.length-1), 'i').test(location.pathname + location.search) === true) {curSite = DBSite[now];} else {if (urlC === true) {support = true;}; break;}\n                                    } else { // å¦‚æœæ˜¯å‡½æ•°ï¼Œé‚£å°±æ‰§è¡Œä»£ç \n                                        if (new Function('fun', DBSite[now].url)(window.autoPage)) {curSite = DBSite[now];} else {if (urlC === true) {support = true;}; break;}\n                                    }\n                                } catch (e) {\n                                    console.error('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - å½“å‰ç½‘é¡µè§„åˆ™ \"url\" åŒ¹é…å‡ºé”™ï¼Œè¯·æ£€æŸ¥ï¼š\\n', DBSite[now].url + '\\n\\n', e);\n                                }\n                            }\n                        } else {\n                            curSite = DBSite[now];\n                        }\n                        support = true; break end; // å¦‚æœæ‰¾åˆ°äº†å°±é€€å‡ºæ‰€æœ‰å¾ªç¯\n                    }\n                }\n\n                // å¦‚æœæ˜¯ æ­£åˆ™/å­—ç¬¦ä¸²\n            } else {\n                // é’ˆå¯¹è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™ä¸­çš„æ­£åˆ™\n                if (typeof DBSite[now].host === 'string' && DBSite[now].host.slice(0,1) === '/') DBSite[now].host = new RegExp(DBSite[now].host.slice(1,DBSite[now].host.length-1))\n                if ((DBSite[now].host === undefined) || (DBSite[now].host instanceof RegExp && DBSite[now].host.test(location.hostname)) || (typeof DBSite[now].host === 'string' && DBSite[now].host === location.hostname)) {\n                    // å¦‚æœæ²¡æœ‰æŒ‡å®š host è§„åˆ™ï¼Œé‚£ä¹ˆé»˜è®¤åŒ¹é…æ‰€æœ‰åŸŸåï¼ˆä¼šå¯¹æ‰€æœ‰åŸŸååŒ¹é… url è§„åˆ™åˆ¤æ–­ï¼‰ï¼Œå¯ä»¥å½“æˆä¸€ä¸ªç®€å•çš„å¤–ç½®ï¼ˆè‡ªå®šä¹‰ï¼‰é€šç”¨è§„åˆ™æ–¹æ¡ˆ\n\n                    if (self != top) {if (!DBSite[now].iframe) continue;} // å¦‚æœå½“å‰ä½äº iframe æ¡†æ¶ä¸‹ï¼Œå°±éœ€è¦åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­æ‰§è¡Œ\n                    if (DBSite[now].url) {\n                        if (typeof DBSite[now].url == 'function') {\n                            DBSite[now].url();\n                        } else { // è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™æ—¶ï¼Œå› ä¸ºåŒåŸŸåä¸åŒé¡µé¢ url åˆ†å¼€å†™ï¼Œæ‰€ä»¥å¦‚æœæ²¡æ‰¾åˆ°å°±éœ€è¦ç»§ç»­è§„åˆ™å¾ªç¯\n                            try {\n                                if (DBSite[now].url.slice(0,1) === '/') { // å¦‚æœæ˜¯æ­£åˆ™ï¼Œåˆ™å¯¹ URL è·¯å¾„è¿›è¡ŒåŒ¹é…\n                                    if (new RegExp(DBSite[now].url.slice(1,DBSite[now].url.length-1), 'i').test(location.pathname + location.search) === true) {curSite = DBSite[now];} else {if (urlC === true) {support = true;}; continue;}\n                                } else { // å¦‚æœæ˜¯å‡½æ•°ï¼Œé‚£å°±æ‰§è¡Œä»£ç \n\n                                    if (new Function('fun', DBSite[now].url)(window.autoPage)) {curSite = DBSite[now];} else {if (urlC === true) {support = true;}; continue;}\n\n                                }\n                            } catch (e) {\n                                console.error('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - å½“å‰ç½‘é¡µè§„åˆ™ \"url\" åŒ¹é…å‡ºé”™ï¼Œè¯·æ£€æŸ¥ï¼š\\n', DBSite[now].url + '\\n\\n', e);\n                            }\n                        }\n                    } else {\n                        curSite = DBSite[now];\n                    }\n                    support = true; break; // å¦‚æœæ‰¾åˆ°äº†å°±é€€å‡ºå¾ªç¯\n                }\n            }\n        }\n\n        DBSiteNow = undefined // ä»…é™åˆ¤æ–­é˜¶æ®µä½¿ç”¨ï¼Œåˆ¤æ–­å®Œæˆå°±éœ€è¦ç½®ç©º\n\n        if (support) {\n            console.info('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - ç‹¬ç«‹è§„åˆ™ ç½‘ç«™'); return 1;\n        } else if (self != top) {\n            return -1;\n        } else if (typeof discuz_uid != 'undefined' || getCSS('meta[name=\"author\" i][content*=\"Discuz!\" i], meta[name=\"generator\" i][content*=\"Discuz!\" i], body[id=\"nv_forum\" i][class^=\"pg_\" i][onkeydown*=\"27\"], body[id=\"nv_search\" i][onkeydown*=\"27\"]') || getXpath('id(\"ft\")[contains(string(),\"Discuz!\")]')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <Discuz!> è®ºå›`); return 2;\n\n        } else if (typeof flarum != 'undefined' || getCSS('#flarum-loading')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <Flarum> è®ºå›`); return 3;\n\n        } else if (typeof phpbb != 'undefined' || getCSS('body#phpbb')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <phpBB> è®ºå›`); return 4;\n\n        } else if (typeof xn != 'undefined' && getXpath('//footer//a[contains(string(), \"Xiuno\")] | //link[contains(@href, \"xiuno\")] | //script[contains(@src, \"xiuno\")]')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <Xiuno> è®ºå›`); return 5;\n\n        } else if (typeof XF != 'undefined') {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <XenForo> è®ºå›`); return 6;\n\n        } else if (typeof MyBB != 'undefined') {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <MyBB> è®ºå›`); return 14;\n\n        } else if (getCSS('head meta[name=\"generator\" i][content=\"nexusphp\" i]') || getXpath('id(\"footer\")[contains(string(), \"NexusPHP\")]')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <NexusPHP> è®ºå›`); return 7;\n\n        } else if (unsafeWindow.config && ((unsafeWindow.config.assetVersionEncoded && unsafeWindow.config.assetVersionEncoded.indexOf('gitea') !== -1) || (unsafeWindow.config.customEmojis && unsafeWindow.config.customEmojis.gitea))) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <Forgejo/Gitea> git æ‰˜ç®¡ç³»ç»Ÿ`); return 15;\n\n        } else if (loadMoreExclude(loadMoreExclude1) && getAllCSS('.load-more, .load_more, .loadmore, #load-more, #load_more, #loadmore, [id^=\"loadmore\"], .show-more, .show_more, .ajax-more').length === 1) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†è‡ªå¸¦ è‡ªåŠ¨æ— ç¼ç¿»é¡µ çš„ç½‘ç«™ 1`); return 8;\n\n        } else if (loadMoreExclude(loadMoreExclude2) && getAllXpath('//*[self::a or self::span or self::button or self::div][text()=\"åŠ è½½æ›´å¤š\"][not(@href) or @href=\"#\" or starts-with(@href, \"javascript\")]').length === 1) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†è‡ªå¸¦ è‡ªåŠ¨æ— ç¼ç¿»é¡µ çš„ç½‘ç«™ 2`); return 9;\n\n        } else if (getCSS('link[href*=\"/wp-content/\" i], script[src*=\"/wp-content/\" i], link[href*=\"/wp-includes/\" i], script[src*=\"/wp-includes/\" i], head>meta[name=generator][content*=\"WordPress\" i]')) {\n\n            //if (getAllCSS('article[class], div[id^=\"post-\"], ul[class*=\"post\"]>li.item, .post').length < 4 || getCSS('#nav-below, nav.navigation, nav.paging-navigation, .pagination, .wp-pagenavi, .pagenavi')) return 0;\n\n            if (getXpath('(//*[contains(@class, \"post-page-numbers\") and contains(@class, \"current\")])[last()]/following-sibling::a[1]')) {\n                DBSite.wp_article_post.pager.nextL = '(//*[contains(@class, \"post-page-numbers\") and contains(@class, \"current\")])[last()]/following-sibling::a[1]'; DBSite.wp_article_post.pager.replaceE = '//a[contains(@class,\"post-page-numbers\")]/..';\n            } else if (getXpath('(//div[contains(@class,\"fenye\")])[last()]//a[string()=\"ä¸‹ä¸€é¡µ\"]')) {\n                DBSite.wp_article_post.pager.nextL = '(//div[contains(@class,\"fenye\")])[last()]//a[string()=\"ä¸‹ä¸€é¡µ\"]'; DBSite.wp_article_post.pager.replaceE = '.fenye';\n            }\n            if (DBSite.wp_article_post.pager.nextL != undefined) {\n                if (getAllCSS('#entry-content>#content-innerText, .entry-content>#content-innerText').length == 1) {\n                    DBSite.wp_article_post.pager.pageE = '#entry-content>#content-innerText, .entry-content>#content-innerText'\n                } else if (getAllCSS('.entry-content .single-content img').length > 3) {\n                    DBSite.wp_article_post.pager.pageE = '.entry-content .single-content'\n                } else if (getAllCSS('.entry-content').length == 1) {\n                    DBSite.wp_article_post.pager.pageE = '.entry-content>*:not(.wbp-cbm):not(.page-links):not(.post-links):not(.article-paging):not(.entry-pagination):not(.pagination):not(.fenye):not(.open-message):not(#social):not(.article-social):not(.single-cat-tag):not(.single-meta):not(#fontsize):not(.clear):not(.tg-m):not(.tg-site):not(footer)'\n                } else if (getAllCSS('.article-content').length == 1) {\n                    DBSite.wp_article_post.pager.pageE = '.article-content>*:not(.page-links):not(.post-links):not(.article-paging):not(.entry-pagination):not(.pagination):not(.fenye):not(.open-message):not(#social):not(.article-social):not(.single-cat-tag):not(.single-meta):not(#fontsize):not(.clear):not(.tg-m):not(.tg-site):not(footer)'\n                } else if (getAllCSS('article').length == 1) {\n                    DBSite.wp_article_post.pager.pageE = 'article>*:not(.page-links):not(.post-links):not(.article-paging):not(.entry-pagination):not(.pagination):not(.fenye):not(.open-message):not(#social):not(.article-social):not(.single-cat-tag):not(.single-meta):not(#fontsize):not(.clear):not(.tg-m):not(.tg-site):not(footer)'\n                }\n                if (DBSite.wp_article_post.pager.pageE != undefined) console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†ä½¿ç”¨ WordPress çš„ç½‘ç«™ - æ–‡ç« å†…`); return 11;\n            }\n\n\n            if (getCSS('a.next, a.next-page')) {\n                DBSite.wp_article.pager.nextL = 'a.next, a.next-page'\n            } else if (getCSS('a[rel=\"next\" i], a[aria-label=\"next\" i], a[aria-label=\"ä¸‹ä¸€ä¸ª\"].page-link, a[aria-label=\"Next Page\" i], a[aria-label=\"ä¸‹ä¸€é¡µ\"], a[rel=\"ä¸‹ä¸€é¡µ\"], a[title=\"ä¸‹ä¸€é¡µ\"], a[aria-label=\"ä¸‹ä¸€é \"], a[rel=\"ä¸‹ä¸€é \"], a[title=\"ä¸‹ä¸€é \"]')) {\n                DBSite.wp_article.pager.nextL = 'a[rel=\"next\" i], a[aria-label=\"next\" i], a[aria-label=\"ä¸‹ä¸€ä¸ª\"].page-link, a[aria-label=\"Next Page\" i], a[aria-label=\"ä¸‹ä¸€é¡µ\"], a[rel=\"ä¸‹ä¸€é¡µ\"], a[title=\"ä¸‹ä¸€é¡µ\"], a[aria-label=\"ä¸‹ä¸€é \"], a[rel=\"ä¸‹ä¸€é \"], a[title=\"ä¸‹ä¸€é \"]'\n            } else if (getCSS('li.next-page > a, li.next > a, li.pagination-next>a')) {\n                DBSite.wp_article.pager.nextL = 'li.next-page > a, li.next > a, li.pagination-next>a'\n            } else if (getCSS('span.current+a')) {\n                DBSite.wp_article.pager.nextL = 'span.current+a'\n            } else if (getCSS('.nav-previous a, a.nav-previous')) {\n                DBSite.wp_article.pager.nextL = '.nav-previous a, a.nav-previous'\n            } else if (getCSS('.pagination>.page-item.active+li.page-item>a')) {\n                DBSite.wp_article.pager.nextL = '.pagination>.page-item.active+li.page-item>a'\n            } else {\n                const temp_page = getCSS('#nav-below, nav.navigation, nav.paging-navigation, #pagination:not([class*=\"entry\"]), .pagination:not([class*=\"entry\"]), .wp-pagenavi, .pagenavi, nav[role=\"navigation\"]')\n                if (temp_page && getXpath('//a[contains(text(), \"ä¸‹ä¸€é¡µ\") or contains(text(), \"ä¸‹ä¸€é \") or contains(text(), \">\") or contains(text(), \"next\") or contains(text(), \"Next\") or contains(text(), \"NEXT\")]', temp_page)) {\n                    DBSite.wp_article.pager.nextL = '//*[self::ul or self::nav or self::div][@id=\"nav-below\" or @id=\"pagination\" or contains(@class, \"navigation\") or contains(@class, \"pagination\") or contains(@class, \"pagenavi\") or @role=\"navigation\"]//a[contains(text(), \"ä¸‹ä¸€é¡µ\") or contains(text(), \"ä¸‹ä¸€é \") or contains(text(), \">\") or contains(text(), \"next\") or contains(text(), \"Next\") or contains(text(), \"NEXT\")]'\n                }\n            }\n\n            if (DBSite.wp_article.pager.nextL != undefined) {\n                if (DBSite.wp_article.pager.nextL.indexOf('//') !== 0) DBSite.wp_article.pager.replaceE += ',' + DBSite.wp_article.pager.nextL\n                if (getAllCSS('main').length == 1) {\n                    if (getAllCSS('main .posts-wrapper.row>div>article').length > 3) {\n                        DBSite.wp_article.pager.pageE = 'main .posts-wrapper.row>div'\n                    } else if (getAllXpath('//main//div[contains(@class,\"row\")]/div/article').length > 3) {\n                        DBSite.wp_article.pager.pageE = '//main//div[contains(@class,\"row\")]/div/article/parent::div'\n                    } else if (getAllCSS('main article[id^=\"post-\"]').length > 3) {\n                        DBSite.wp_article.pager.pageE = 'main article[id^=\"post-\"]'\n                    } else if (getAllCSS('main article[class]').length > 3) {\n                        DBSite.wp_article.pager.pageE = 'main article[class]'\n                    } else if (getAllCSS('main div[id^=\"post-\"]').length > 3) {\n                        DBSite.wp_article.pager.pageE = 'main div[id^=\"post-\"]'\n                    } else if (getAllCSS('main .post').length > 3) {\n                        DBSite.wp_article.pager.pageE = 'main .post'\n                    }\n                    if (DBSite.wp_article.pager.pageE != undefined) {console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†ä½¿ç”¨ WordPress çš„ç½‘ç«™`); return 10;}\n                }\n\n                if (getAllCSS('.posts-wrapper.row>div>article').length > 3) {\n                    DBSite.wp_article.pager.pageE = '.posts-wrapper.row>div'\n                } else if (getAllXpath('//div[contains(@class,\"row\")]/div/article').length > 3) {\n                    DBSite.wp_article.pager.pageE = '//div[contains(@class,\"row\")]/div/article/parent::div'\n                } else if (getAllCSS('article[id^=\"post-\"]').length > 3) {\n                    DBSite.wp_article.pager.pageE = 'article[id^=\"post-\"]'\n                } else if (getAllCSS('article[class]').length > 3) {\n                    DBSite.wp_article.pager.pageE = 'article[class]'\n                } else if (getAllCSS('div[id^=\"post-\"]').length > 3) {\n                    DBSite.wp_article.pager.pageE = 'div[id^=\"post-\"]'\n                } else if (getAllCSS('ul[class*=\"post\"]>li.item').length > 3) {\n                    DBSite.wp_article.pager.pageE = 'ul[class*=\"post\"]>li.item'\n                } else if (getAllCSS('.post').length > 3) {\n                    DBSite.wp_article.pager.pageE = '.post'\n                } else if (getAllCSS('.posts-row>posts[class*=\"post\"]').length > 3) {\n                    DBSite.wp_article.pager.pageE = '.posts-row>posts[class*=\"post\"]'\n                } else if (getAllCSS('#posts, .posts').length == 1) {\n                    DBSite.wp_article.pager.pageE = '#posts, .posts'\n                } else if (getAllCSS('#content .container>.row').length == 1 && getAllCSS('#content .container>.row+.nav-pagination').length == 1) {\n                    DBSite.wp_article.pager.pageE = '#content .container>.row'\n                }\n                if (DBSite.wp_article.pager.pageE != undefined) {console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†ä½¿ç”¨ WordPress çš„ç½‘ç«™`); return 10;}\n            }\n        } else if (getCSS('meta[name=\"template\" i][content=\"handsome\" i]') && getCSS('.page-navigator')) {\n                console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†ä½¿ç”¨ Typecho çš„ç½‘ç«™ (handsome)`); return 12;\n        } else if (getCSS('meta[name=\"template\" i][content=\"Mirages\" i]') && getCSS('.page-navigator')) {\n                console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†ä½¿ç”¨ Typecho çš„ç½‘ç«™ (Mirages)`); return 13;\n\n        } else if (getCSS('.stui-page, .stui-page__item, #long-page, .myui-page, .myui-page__item')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†å½±è§†ç½‘ç«™`); return 300;\n        } else if (getCSS('#page') && getCSS('.module-items,a.module-poster-item')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†å½±è§†ç½‘ç«™ 2`); return 301;\n\n        } else if (getCSS('.ArticleImageBox, .PictureList') && getCSS('.article_page') && getXpath('//div[contains(@class,\"article_page\")]//a[text()=\"ä¸‹ä¸€é¡µ\"]')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - éƒ¨åˆ†ç¾å¥³å›¾ç«™ - æ‰‹æœºç‰ˆ`); return 302;\n        } else if (getCSS('meta[content^=SearXNG i], link[href*=SearXNG i], script[src*=SearXNG i]')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <SearXNG> å…ƒæœç´¢å¼•æ“`); return 303;\n\n        } else if (getCSS('.content > #content') && getXpath('//div[contains(@class,\"page_chapter\")]//a[text()=\"ä¸‹ä¸€ç« \"]')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <ç¬”è¶£é˜ 1> æ¨¡æ¿çš„å°è¯´ç½‘ç«™`); return 200;\n        } else if (getCSS('#nr1, #chaptercontent, .Readarea, .ReadAjax_content') && getCSS('#pb_next, #linkNext')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <ç¬”è¶£é˜ 1 - æ‰‹æœºç‰ˆ> æ¨¡æ¿çš„å°è¯´ç½‘ç«™`); return 201;\n        } else if (getCSS('#txt, .txt') && getCSS('#pb_next, .url_next') && getCSS('.chapter-control, .chapter-page-btn')) {\n            console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <ç¬”è¶£é˜ 2> æ¨¡æ¿çš„å°è¯´ç½‘ç«™`); return 202;\n        } else if ((getCSS('meta[name=\"description\" i][content*=\"å°è¯´\"], meta[name=\"description\" i][content*=\"ç« èŠ‚\"], meta[name=\"description\" i][content*=\"é˜…è¯»\"], meta[name=\"keywords\" i][content*=\"ç¬”è¶£\"]') || location.hostname.indexOf('biqu')!=-1 || document.title.match(/ç¬”è¶£é˜|å°è¯´|ç« /)!=null) && getXpath('//a[contains(text(), \"ä¸‹ä¸€ç« \") or contains(text(), \"ä¸‹ä¸€é¡µ\") or contains(text(), \"ä¸‹ä¸€èŠ‚\")]')) {\n            let biquge3_pageE= ['[id=\"chapter_content\" i]','[class~=\"chapter_content\" i]','[id=\"chaptercontent\" i]','[class~=\"chaptercontent\" i]','[class~=\"read_chapterdetail\" i]','[id=\"booktext\" i]','[class~=\"booktext\" i]','[id=\"txtcontent\" i]','[class~=\"txtcontent\" i]','[id=\"textcontent\" i]','[class~=\"textcontent\" i]','[id=\"read-content\" i]','[class~=\"read-content\" i]','[id=\"txtnav\" i]','[class~=\"txtnav\" i]','[id=\"txt\" i][class~=\"txt\" i]','[id=\"contents\" i]','[class~=\"contents\" i]','[id=\"content\" i]','[class~=\"content\" i]']\n            for(let biquge3_pageE_ of biquge3_pageE) {if (getAllCSS(biquge3_pageE_).length === 1) {DBSite.biquge3.pager.pageE = biquge3_pageE_;DBSite.biquge3.pager.insertP = [biquge3_pageE_,6];DBSite.biquge3.style = biquge3_pageE_+'>.readinline, ' + DBSite.biquge3.style;break;}}\n            if (DBSite.biquge3.pager.pageE != undefined) {console.info(`[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - <ç¬”è¶£é˜ 3> æ¨¡æ¿çš„å°è¯´ç½‘ç«™`); return 203;}\n        }\n        return 0;\n    }\n    // åˆ¤æ–­ç½‘ç«™ç±»å‹\n    function webTypeIf() {\n        if (webType != 1) {\n            switch (webType) {\n                case 2: //   < æ‰€æœ‰ Discuz!è®ºå› >\n                    discuz_(); break;\n                case 3: //   < æ‰€æœ‰ Flarum è®ºå› >\n                    DBSite.flarum.url(); break;\n                case 4: //   < æ‰€æœ‰ phpBB è®ºå› >\n                    DBSite.phpbb.url(); break;\n                case 5: //   < æ‰€æœ‰ Xiuno è®ºå› >\n                    DBSite.xiuno.url(); break;\n                case 6: //   < æ‰€æœ‰ XenForo è®ºå› >\n                    DBSite.xenforo.url(); break;\n                case 14: //   < æ‰€æœ‰ MyBB è®ºå› >\n                    DBSite.mybb.url(); break;\n                case 7: //   < æ‰€æœ‰ NexusPHP è®ºå› >\n                    DBSite.nexusphp.url(); break;\n                case 15: //   < æ‰€æœ‰ Forgejo/Gitea> git æ‰˜ç®¡ç³»ç»Ÿ >\n                    DBSite.forgejoGitea.url(); break;\n                case 8: // < éƒ¨åˆ†è‡ªå¸¦ è‡ªåŠ¨æ— ç¼ç¿»é¡µ çš„ç½‘ç«™ 1 >\n                    DBSite.loadmore.url('.load-more, .load_more, .loadmore, #load-more, #load_more, #loadmore, [id^=\"loadmore\"], .show-more, .show_more, .ajax-more'); break;\n                case 9: // < éƒ¨åˆ†è‡ªå¸¦ è‡ªåŠ¨æ— ç¼ç¿»é¡µ çš„ç½‘ç«™ 2 >\n                    DBSite.loadmore.url('//*[self::a or self::span or self::button or self::div][text()=\"åŠ è½½æ›´å¤š\"][not(@href) or @href=\"#\" or starts-with(@href, \"javascript\")]'); break;\n                case 10: // < éƒ¨åˆ†ä½¿ç”¨ WordPress çš„ç½‘ç«™ >\n                    DBSite.wp_article.url(); break;\n                case 11: // < éƒ¨åˆ†ä½¿ç”¨ WordPress çš„ç½‘ç«™ - æ–‡ç« å†… >\n                    curSite = DBSite.wp_article_post; break;\n                case 12: // < éƒ¨åˆ†ä½¿ç”¨ Typecho çš„ç½‘ç«™ (handsome) >\n                    DBSite.typecho_handsome.url(); break;\n                case 13: // < éƒ¨åˆ†ä½¿ç”¨ Typecho çš„ç½‘ç«™ (Mirages) >\n                    DBSite.typecho_mirages.url(); break;\n                case 200: // < æ‰€æœ‰ä½¿ç”¨ ç¬”è¶£é˜ 1 æ¨¡æ¿çš„å°è¯´ç½‘ç«™ >\n                    DBSite.biquge1.url(); break;\n                case 201: // < æ‰€æœ‰ä½¿ç”¨ ç¬”è¶£é˜ 1 - æ‰‹æœºç‰ˆ æ¨¡æ¿çš„å°è¯´ç½‘ç«™ >\n                    curSite = DBSite.biquge1_m; break;\n                case 202: // < æ‰€æœ‰ä½¿ç”¨ ç¬”è¶£é˜ 2 æ¨¡æ¿çš„å°è¯´ç½‘ç«™ >\n                    DBSite.biquge2.url(); break;\n                case 203: // < æ‰€æœ‰ä½¿ç”¨ ç¬”è¶£é˜ 3 æ¨¡æ¿çš„å°è¯´ç½‘ç«™ >\n                    curSite = DBSite.biquge3; break;\n                case 300: // < éƒ¨åˆ†å½±è§†ç½‘ç«™ >\n                    curSite = DBSite.yingshi; break;\n                case 301: // < éƒ¨åˆ†å½±è§†ç½‘ç«™ 2 >\n                    curSite = DBSite.yingshi2; break;\n                case 302: // < éƒ¨åˆ†ç¾å¥³å›¾ç«™ - æ‰‹æœºç‰ˆ >\n                    curSite = DBSite.meinvtu_m; break;\n                case 303: // < SearXNG å…ƒæœç´¢å¼•æ“ >\n                    document.cookie='infinite_scroll=1; expires=Thu, 18 Dec 2031 12:00:00 GMT; path=/';\n                    document.cookie='results_on_new_tab=1; expires=Thu, 18 Dec 2031 12:00:00 GMT; path=/';\n                    break;\n            }\n        }\n    }\n    // å†…ç½®ç¿»é¡µè§„åˆ™\n    function setDBSite() {\n        /*\n    inherits:    ç»§æ‰¿æ ‡è¯†ï¼Œä»…ç”¨äºè‡ªå®šä¹‰è§„åˆ™ï¼Œç”¨äºå¢åˆ æ”¹æŸä¸ªå¤–ç½®è§„åˆ™çš„éƒ¨åˆ†è§„åˆ™æ—¶ï¼Œå¯ä½¿ç”¨è¯¥æ ‡è¯†æ¥çœç•¥ä¸éœ€è¦ä¿®æ”¹çš„è§„åˆ™ï¼Œåªå†™æœ‰å˜åŒ–çš„è§„åˆ™\n\n    url:         åŒ¹é…åˆ°è¯¥åŸŸååè¦æ‰§è¡Œçš„å‡½æ•°/æ­£åˆ™ï¼ˆä¸€èˆ¬ç”¨äºæ ¹æ® URL åˆ†é…ç›¸åº”ç¿»é¡µè§„åˆ™ï¼‰\n    urlC:        å¯¹äºä½¿ç”¨ pjax æŠ€æœ¯çš„ç½‘ç«™ï¼Œéœ€è¦ç›‘å¬ URL å˜åŒ–æ¥é‡æ–°åˆ¤æ–­ç¿»é¡µè§„åˆ™ï¼ˆéœ€è¦æ”¾åœ¨ url: ä¸­ï¼Œè‡ªå®šä¹‰è§„åˆ™çš„è¯éœ€è¦ä½¿ç”¨ fun.isUrlC()ï¼‰\n\n    noReferer:   è·å–ä¸‹ä¸€é¡µå†…å®¹æ—¶ï¼Œä¸æºå¸¦ Refererï¼ˆéƒ¨åˆ†ç½‘ç«™æºå¸¦ä¸ä¸æºå¸¦å¯èƒ½ä¸ä¸€æ ·ï¼‰\n    hiddenPN:    ä¸æ˜¾ç¤ºè„šæœ¬å·¦ä¸‹è§’çš„é¡µç \n    history:     æ·»åŠ å†å²è®°å½• å¹¶ ä¿®æ”¹å½“å‰ URLï¼ˆé»˜è®¤å¼€å¯ï¼Œå¯¹äºä¸æ”¯æŒçš„ç½‘ç«™è¦è®¾ç½®ä¸º falseï¼‰\n    thread:      å¯¹äºç¤¾åŒºç±»ç½‘ç«™ï¼Œè¦åœ¨ å¸–å­å†… çš„è§„åˆ™ä¸­åŠ å…¥è¿™ä¸ªï¼Œç”¨äºè„šæœ¬çš„ [å¸–å­å†…è‡ªåŠ¨ç¿»é¡µ] åŠŸèƒ½ï¼ˆå³ç”¨æˆ·å¯ä»¥é€‰æ‹©å¼€å¯/å…³é—­æ‰€æœ‰ç¤¾åŒºç±»ç½‘ç«™å¸–å­å†…çš„è‡ªåŠ¨ç¿»é¡µï¼‰\n    style:       è¦æ’å…¥ç½‘é¡µçš„ CSS Style æ ·å¼ï¼Œå½“åªéœ€è¦å•çº¯å±è”½éƒ¨åˆ†ç½‘é¡µå…ƒç´ æ—¶ï¼Œå¯ä»¥åªå†™ CSS é€‰æ‹©å™¨çœç•¥æ‰ {display: none !important;}\n    retry:       å…è®¸è·å–å¤±è´¥åé‡è¯•\n    blank:       å¼ºåˆ¶æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥\n       1 = ç½‘é¡µ <head> æ·»åŠ  <base target=\"_blank\"> æ¥è®©æ‰€æœ‰é“¾æ¥é»˜è®¤æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼ˆå¯¹å·²å•ç‹¬æŒ‡å®š target æˆ–å·²ç›‘å¬ç‚¹å‡»äº‹ä»¶çš„å…ƒç´ æ— æ•ˆï¼‰\n       2 = å¯¹ <body> å§”æ‰˜ç‚¹å‡»äº‹ä»¶\n       3 = å¯¹ pageE çš„çˆ¶å…ƒç´  å§”æ‰˜ç‚¹å‡»äº‹ä»¶ï¼ˆä¹Ÿä¼šé˜»æ­¢å†’æ³¡ï¼Œä½†å› ä¸ºè·ç¦» <a> æ ‡ç­¾è¾ƒè¿œï¼Œå› æ­¤åªæœ‰åœ¨å§”æ‰˜ç‚¹å‡»äº‹ä»¶çš„å…ƒç´ æ˜¯ pageE çš„çˆ¶å…ƒç´ çš„çˆ¶å…ƒç´ æ—¶ï¼Œæ‰æœ‰æ„ä¹‰ï¼‰\n       4 = å¯¹ pageE çš„å­å…ƒç´  <a> æ ‡ç­¾ æ·»åŠ  target=\"_blank\"\n       5 = å¯¹ pageE çš„å­å…ƒç´  <a> æ ‡ç­¾ æ¸…ç†äº‹ä»¶å å†æ·»åŠ  target=\"_blank\"\n       6 = å¯¹ pageE çš„å­å…ƒç´  <a> æ ‡ç­¾ æ¸…ç†äº‹ä»¶å å†æ·»åŠ  target=\"_blank\" å¹¶é˜»æ­¢å†’æ³¡ï¼ˆé¿å…çˆ¶å…ƒç´ äº‹ä»¶å§”æ‰˜æ•è·è¯¥å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼‰\n\npager: {\n    type:     ç¿»é¡µæ¨¡å¼\n       1 = ç”±è„šæœ¬å®ç°è‡ªåŠ¨æ— ç¼ç¿»é¡µï¼Œå¯çœç•¥ï¼ˆé€‚ç”¨äºï¼šé™æ€åŠ è½½å†…å®¹ç½‘ç«™ï¼Œå¸¸è§„æ¨¡å¼ï¼‰\n\n       2 = åªéœ€è¦ç‚¹å‡»ä¸‹ä¸€é¡µæŒ‰é’®ï¼ˆé€‚ç”¨äºï¼šç½‘ç«™è‡ªå¸¦äº† è‡ªåŠ¨æ— ç¼ç¿»é¡µ åŠŸèƒ½ï¼‰\n           nextText:    æŒ‰é’®æ–‡æœ¬ï¼Œå½“æŒ‰é’®æ–‡æœ¬ = è¯¥æ–‡æœ¬æ—¶ï¼Œæ‰ä¼šç‚¹å‡»æŒ‰é’®åŠ è½½ä¸‹ä¸€é¡µï¼ˆé¿å…ä¸€ç¬é—´åŠ è½½å¤ªå¤šæ¬¡ä¸‹ä¸€é¡µï¼Œä¸‹åŒï¼‰\n           nextTextOf:  æŒ‰é’®æ–‡æœ¬çš„ä¸€éƒ¨åˆ†ï¼Œå½“æŒ‰é’®æ–‡æœ¬åŒ…å«è¯¥æ–‡æœ¬æ—¶ï¼Œæ‰ä¼šç‚¹å‡»æŒ‰é’®åŠ è½½ä¸‹ä¸€é¡µ\n           nextHTML:    æŒ‰é’®å†…å…ƒç´ ï¼Œå½“æŒ‰é’®å†…å…ƒç´  = è¯¥å…ƒç´ å†…å®¹æ—¶ï¼Œæ‰ä¼šç‚¹å‡»æŒ‰é’®åŠ è½½ä¸‹ä¸€é¡µ\n           interval:    ç‚¹å‡»é—´éš”æ—¶é—´ï¼Œå¯¹äºæ²¡æœ‰æŒ‰é’®æ–‡å­—å˜åŒ–çš„æŒ‰é’®ï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šé—´éš”æ—¶é—´ï¼ˆçœç•¥åé»˜è®¤ 500msï¼Œå½“æŒ‡å®šä¸Šé¢ä¸‰ä¸ªæ—¶ï¼Œä¼šå¿½ç•¥ intervalï¼‰\n           isHidden:    åªæœ‰ä¸‹ä¸€é¡µæŒ‰é’®å¯è§æ—¶ï¼ˆæ²¡æœ‰è¢«éšè—ï¼‰ï¼Œæ‰ä¼šç‚¹å‡»\n\n       3 = ä¾é  [åŸºå‡†å…ƒç´ ] ä¸ [æµè§ˆå™¨å¯è§†åŒºåŸŸåº•éƒ¨] ä¹‹é—´çš„è·ç¦»ç¼©å°æ¥è§¦å‘ç¿»é¡µï¼ˆé€‚ç”¨äºï¼šä¸»ä½“å…ƒç´ ä¸‹æ–¹å†…å®¹å¤ªå¤š ä¸” é«˜åº¦ä¸å›ºå®šæ—¶ï¼‰\n           scrollE:     ä½œä¸ºåŸºå‡†çº¿çš„å…ƒç´ ï¼ˆä¸€èˆ¬ä¸ºåº•éƒ¨é¡µç å…ƒç´ ï¼‰ï¼Œå’Œ replaceE ä¸€æ ·çš„è¯å¯ä»¥çœç•¥\n           scrollD:     å½“ [åŸºå‡†å…ƒç´ ] ä¸ [å¯è§†åŒºåŸŸåº•éƒ¨] ä¹‹é—´çš„è·ç¦» ç­‰äºæˆ–å°äºè¯¥å€¼æ—¶ï¼Œå°†è§¦å‘ç¿»é¡µï¼Œçœç•¥åé»˜è®¤ 2000\n\n       4 = åŠ¨æ€åŠ è½½ç±»ç½‘ç«™ï¼ˆé€‚ç”¨äºï¼šç®€å•çš„åŠ¨æ€åŠ è½½å†…å®¹ç½‘ç«™ï¼‰\n           insertE:     ç”¨æ¥æ’å…¥å…ƒç´ çš„å‡½æ•°\n\n       5 = æ’å…¥ iframe æ–¹å¼æ¥åŠ è½½ä¸‹ä¸€é¡µï¼Œæ— é™å¥—å¨ƒï¼ˆé€‚ç”¨äºï¼šéƒ¨åˆ†åŠ¨æ€åŠ è½½å†…å®¹çš„ç½‘ç«™ï¼Œéœ€è¦å…è®¸ iframe ä¸”æ”¯æŒé€šè¿‡ GET/POST ç›´æ¥æ‰“å¼€ä¸‹ä¸€é¡µï¼‰\n           style:       åŠ è½½ iframe å‰è¦æ’å…¥çš„ CSS Style æ ·å¼ï¼ˆæ¯”å¦‚ä¸ºäº†æ‚¬æµ®çš„æ ·å¼ä¸ä¸‹ä¸€é¡µçš„é‡å ï¼Œéšè—ç½‘é¡µåº•éƒ¨é—´è·æé«˜é˜…è¯»è¿ç»­æ€§ï¼‰\n           iframe:      è¿™ä¸ªå¿…é¡»åŠ åˆ° pager{} å¤–é¢ï¼ˆè¿™æ ·æ‰ä¼šåœ¨è¯¥åŸŸåçš„ iframe æ¡†æ¶ä¸‹è¿è¡Œè„šæœ¬ï¼‰\n\n       6 = é€šè¿‡ iframe è·å–ä¸‹ä¸€é¡µåŠ¨æ€åŠ è½½å†…å®¹æ’å…¥æœ¬é¡µï¼Œåªæœ‰ä¸€ä¸ªå¨ƒï¼ˆé€‚ç”¨äºï¼šéƒ¨åˆ†åŠ¨æ€åŠ è½½å†…å®¹çš„ç½‘ç«™ï¼Œä¸ä¸Šé¢ä¸åŒçš„æ˜¯ï¼Œè¯¥æ¨¡å¼é€‚åˆç®€å•çš„ç½‘é¡µï¼Œæ²¡æœ‰å¤æ‚äº‹ä»¶ä»€ä¹ˆçš„ï¼‰\n           loadTime:    é¢„ç•™çš„ç½‘é¡µåŠ è½½æ—¶é—´ï¼Œç¡®ä¿ç½‘é¡µå†…å®¹åŠ è½½å®Œæˆï¼ˆçœç•¥åé»˜è®¤ä¸º 300msï¼‰\n\n    nextL:    ä¸‹ä¸€é¡µé“¾æ¥æ‰€åœ¨å…ƒç´ \n    pageE:    è¦ä»ä¸‹ä¸€é¡µè·å–çš„å…ƒç´ \n    insertP:  ä¸‹ä¸€é¡µå…ƒç´ æ’å…¥æœ¬é¡µçš„ä½ç½®ï¼ˆæ•°ç»„ç¬¬ä¸€ä¸ªæ˜¯åŸºå‡†å…ƒç´ ï¼Œç¬¬äºŒä¸ªæ˜¯åŸºå‡†å…ƒç´ çš„å‰åå…·ä½“ä½ç½®ï¼‰\n       1 = æ’å…¥åŸºå‡†å…ƒç´ è‡ªèº«çš„å‰é¢\n       2 = æ’å…¥åŸºå‡†å…ƒç´ å†…ï¼Œç¬¬ä¸€ä¸ªå­å…ƒç´ å‰é¢\n       3 = æ’å…¥åŸºå‡†å…ƒç´ å†…ï¼Œæœ€åä¸€ä¸ªå­å…ƒç´ åé¢\n       4 = æ’å…¥åŸºå‡†å…ƒç´ è‡ªèº«çš„åé¢\n       5 = æ’å…¥ pageE åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ çš„åé¢ï¼ˆè¯¥ insertP å¯ä»¥ç›´æ¥çœç•¥ä¸å†™ï¼Œç­‰åŒäº ['pageE', 5] ï¼‰\n       6 = æ’å…¥è¯¥å…ƒç´ è‡ªèº«å†…éƒ¨æœ«å°¾ï¼ˆé’ˆå¯¹å°è¯´ç½‘ç«™ç­‰æ–‡æœ¬ç±»çš„ï¼‰ï¼Œé™„å¸¦å‚æ•° insertP6Br: true, ç”¨æ¥ä¸­é—´æ’å…¥æ¢è¡Œ\n    // å°æŠ€å·§ï¼šå½“åŸºå‡†å…ƒç´ æ˜¯ä¸‹ä¸€é¡µä¸»ä½“å…ƒç´ çš„çˆ¶å…ƒç´ æ—¶ï¼ˆæˆ–è€…è¯´è¦å°†ä¸‹ä¸€é¡µå…ƒç´ æ’å…¥åˆ°æœ¬é¡µåŒå…ƒç´ æœ€åä¸€ä¸ªåé¢æ—¶ï¼‰æ˜¯å¯ä»¥çœç•¥ä¸å†™ insertP\n         ä¾‹å¦‚ï¼šå½“ pageE: 'ul>li' ä¸” insertP: ['ul', 3] æ—¶ï¼Œå®é™…ç­‰åŒäº ['ul>li', 5]\n               å½“ pageE: '.item' ä¸” insertP: ['.item', 4] æ—¶ï¼Œå®é™…ç­‰åŒäº ['.item', 5]\n               å½“ pageE: '.item' ä¸” insertP: ['.page', 1] æ—¶ï¼Œå®é™…ç­‰åŒäº ['.item', 5]\n         æ³¨æ„ï¼šå¦‚ pageE ä¸­é€‰æ‹©äº†å¤šç±»å…ƒç´ ï¼Œåˆ™ä¸èƒ½çœç•¥ insertPï¼ˆæ¯”å¦‚åŒ…å« `,` ä¸ `|` ç¬¦å·ï¼‰ï¼Œé™¤éå¦å¤–çš„é€‰æ‹©å™¨æ˜¯ <script> <style> <link> æ ‡ç­¾\n\n    replaceE: è¦æ›¿æ¢ä¸ºä¸‹ä¸€é¡µå†…å®¹çš„å…ƒç´ ï¼ˆæ¯”å¦‚é¡µç ï¼‰ï¼Œçœç•¥åå°†ä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯æ›¿æ¢ nextL å…ƒç´ è¿˜æ˜¯ nextL çš„çˆ¶å…ƒç´ ï¼ˆå½“ nextL å…ƒç´ åé¢æˆ–å‰é¢æœ‰ <a> çš„ç›¸é‚»å…„å¼Ÿå…ƒç´ æ—¶æ›¿æ¢å…¶çˆ¶å…ƒç´ ï¼Œåä¹‹æ›¿æ¢å…¶è‡ªèº«ï¼Œä»…é™æ¨¡å¼1/3/6ï¼Œä¸” js ä»£ç é™¤å¤–ï¼‰ï¼Œå€¼ä¸ºç©º \"\" æ—¶åˆ™å®Œå…¨ä¸æ›¿æ¢\n    scrollDï¼š å½“ [æ»šåŠ¨æ¡] ä¸ [ç½‘é¡µåº•éƒ¨] ä¹‹é—´çš„è·ç¦» ç­‰äºæˆ–å°äºè¯¥å€¼æ—¶ï¼Œå°†è§¦å‘ç¿»é¡µï¼Œå› æ­¤å€¼è¶Šå¤§å°±è¶Šæ—©è§¦å‘ç¿»é¡µï¼Œè®¿é—®é€Ÿåº¦æ…¢çš„ç½‘ç«™éœ€è¦è°ƒå¤§ï¼Œå¯çœç•¥(è®°å¾—ç§»é™¤ä¸Šä¸€è¡Œæœ«å°¾é€—å·)ï¼Œçœç•¥åé»˜è®¤ 2000\n\n    scriptT:  å•ç‹¬æ’å…¥ <script> æ ‡ç­¾\n       0 = ä¸‹ä¸€é¡µçš„æ‰€æœ‰ <script> æ ‡ç­¾\n       1 = ä¸‹ä¸€é¡µçš„æ‰€æœ‰ <script> æ ‡ç­¾ï¼ˆä¸åŒ…æ‹¬ src é“¾æ¥ï¼‰\n       2 = ä¸‹ä¸€é¡µä¸»ä½“å…ƒç´  (pageE) çš„åŒçº§ <script> æ ‡ç­¾\n       3 = ä¸‹ä¸€é¡µä¸»ä½“å…ƒç´  (pageE) çš„å­å…ƒç´  <script> æ ‡ç­¾\n\n    interval:   ç¿»é¡µåé—´éš”æ—¶é—´ï¼ˆçœç•¥åé»˜è®¤ 500msï¼‰\n    forceHTTPS: ä¸‹ä¸€é¡µé“¾æ¥å¼ºåˆ¶ HTTPS\n},\nfunction: {\n       bF = æ’å…¥å‰æ‰§è¡Œå‡½æ•°\n       bFp = å‚æ•°\n       aF = æ’å…¥åæ‰§è¡Œå‡½æ•°\n       aFp = å‚æ•°\n}\n    */ //<<< è§„åˆ™ç®€å•è¯´æ˜ >>>\n        DBSite = {\n            loadmore: {\n                ignore: true,\n                url: function(nextL) {curSite = DBSite.loadmore; curSite.pager.nextL = nextL;},\n                pager: {\n                    type: 2,\n                    isHidden: true,\n                    interval: 1000\n                }\n            }, //           éƒ¨åˆ†è‡ªå¸¦ è‡ªåŠ¨æ— ç¼ç¿»é¡µ çš„ç½‘ç«™\n            wp_article: {\n                ignore: true,\n                url: ()=> {\n                    if (!indexOF('/post/') && !getCSS('#comments, .comments-area, #disqus_thread')) {\n                        curSite = DBSite.wp_article;\n                        // è‡ªé€‚åº”ç€‘å¸ƒæµæ ·å¼\n                        setTimeout(()=>{if (getOne(curSite.pager.pageE).style.cssText.indexOf('position: absolute') != -1){insStyle(curSite.pager.pageE + '{position: static !important; float: left !important; height: '+ parseInt(getCSS(curSite.pager.pageE).offsetHeight * 1.1) + 'px !important;}');}}, 1500);\n                    }\n                },\n                style: 'img[data-src], img[data-original] {opacity: 1 !important;}',\n                blank: 3,\n                pager: {\n                    replaceE: '#nav-below, nav.navigation, nav.paging-navigation, #pagination:not([class*=\"entry\"]), .pagination:not([class*=\"entry\"]), .wp-pagenavi, .pagenavi, nav[role=\"navigation\"], ul[class*=\"-pagination\"]',\n                    forceHTTPS: true,\n                    scrollD: 3000\n                },\n                function: {\n                    bF: src_bF\n                }\n            }, //         éƒ¨åˆ†ä½¿ç”¨ WordPress çš„ç½‘ç«™\n            wp_article_post: {\n                ignore: true,\n                pager: {\n                    type: 3,\n                    scrollD: 3000\n                },\n                function: {\n                    bF: src_bF\n                }\n            }, //    éƒ¨åˆ†ä½¿ç”¨ WordPress çš„ç½‘ç«™ - æ–‡ç« å†…\n            typecho_handsome: {\n                ignore: true,\n                url: ()=> {if (getCSS('nav:not([id=comment-navigation]) .page-navigator')) {curSite = DBSite.typecho_handsome;}},\n                blank: 3,\n                pager: {\n                    nextL: '.page-navigator li.next>a',\n                    pageE: '.blog-post, .post-list',\n                    replaceE: '.page-navigator'\n                }\n            }, //   éƒ¨åˆ†ä½¿ç”¨ Typecho çš„ç½‘ç«™ (handsome)\n            typecho_mirages: {\n                ignore: true,\n                url: ()=> {if (getAllCSS('#index>article, #archive>article').length > 3 && getCSS('li.next')) {curSite = DBSite.typecho_mirages;}},\n                blank: 3,\n                pager: {\n                    nextL: 'li.next>a',\n                    pageE: '#index>article, #archive>article',\n                    scriptT: 3,\n                    replaceE: '.page-navigator'\n                }\n            }, //    éƒ¨åˆ†ä½¿ç”¨ Typecho çš„ç½‘ç«™ (Mirages)\n            biquge1: {\n                ignore: true,\n                url: ()=> {curSite = DBSite.biquge1;xs_bF(getAllCSS('.content > #content'),[/<br>.{0,10}ç§’è®°ä½.+$/, '']);},\n                style: 'img, .posterror, a[href*=\"posterror()\"], [style*=\"background\"][style*=\"url(\"]:not(html):not(body), #content > *:not(br):not(p), #content>.readinline {display: none !important;}',\n                history: true,\n                retry: 3000,\n                pager: {\n                    nextL: '//div[@class=\"page_chapter\"]//a[text()=\"ä¸‹ä¸€ç« \"]',\n                    pageE: '.content > #content',\n                    insertP: ['.content > #content', 6],\n                    replaceE: '.page_chapter'\n                },\n                function: {\n                    bF: xs_bF,\n                    bFp: [/<br>.{0,10}ç§’è®°ä½.+$/, '']\n                }\n            }, //            ç¬”è¶£é˜ 1 æ¨¡æ¿çš„å°è¯´ç½‘ç«™\n            biquge1_m: {\n                ignore: true,\n                style: 'img, .posterror, .show-app2, a[href*=\"posterror()\"], [onclick*=\"location.href\"], [style*=\"background\"][style*=\"url(\"]:not(html):not(body), #nr1>*:not(br):not(p), #chaptercontent>*:not(br):not(p), .Readarea>*:not(br):not(p), .ReadAjax_content>*:not(br):not(p), #nr1>.readinline, #chaptercontent>.readinline, .Readarea>.readinline, .ReadAjax_content>.readinline {display: none !important;}',\n                history: true,\n                retry: 3000,\n                pager: {\n                    nextL: '#pb_next, #linkNext',\n                    pageE: '#nr1, #chaptercontent, .Readarea, .ReadAjax_content',\n                    insertP: ['#nr1, #chaptercontent, .Readarea, .ReadAjax_content', 6],\n                    replaceE: '//a[@id=\"pb_next\" or @id=\"linkNext\"]/parent::*'\n                }\n            }, //          ç¬”è¶£é˜ 1 - æ‰‹æœºç‰ˆ æ¨¡æ¿çš„å°è¯´ç½‘ç«™\n            biquge2: {\n                ignore: true,\n                url: ()=> {if (isMobile() || getCSS('.chapter-page-btn') != null) {curSite = DBSite.biquge2_m;} else {curSite = DBSite.biquge2;}},\n                style: 'img, .posterror, a[href*=\"posterror()\"], [style*=\"background\"][style*=\"url(\"]:not(html):not(body), #txt > *:not(br):not(p), #txt>.readinline, .txt>.readinline {display: none !important;}',\n                history: true,\n                retry: 3000,\n                pager: {\n                    type: 6,\n                    nextL: '#pb_next, .url_next',\n                    pageE: '#txt, .txt',\n                    insertP: ['#txt, .txt', 6],\n                    replaceE: '.chapter-control, .chapter-page-btn',\n                    loadTime: 1500,\n                    scrollD: 3500\n                }\n            }, //            ç¬”è¶£é˜ 2 æ¨¡æ¿çš„å°è¯´ç½‘ç«™\n            biquge2_m: {\n                ignore: true,\n                style: 'img, .posterror, a[href*=\"posterror()\"], [style*=\"background\"][style*=\"url(\"]:not(html):not(body), #txt > *:not(br):not(p), #txt>.readinline, .txt>.readinline {display: none !important;}',\n                history: true,\n                retry: 3000,\n                pager: {\n                    nextL: '#pb_next, .url_next',\n                    pageE: '#txt, .txt',\n                    insertP: ['#txt, .txt', 6],\n                    replaceE: '.chapter-control, .chapter-page-btn'\n                }\n            }, //          ç¬”è¶£é˜ 2 - æ‰‹æœºç‰ˆ æ¨¡æ¿çš„å°è¯´ç½‘ç«™\n            biquge3: {\n                ignore: true,\n                style: 'img, .posterror, a[href*=\"posterror()\"], [style*=\"background\"][style*=\"url(\"]:not(html):not(body), script+div[style=\"padding:15px;\"], p[style*=\"font-weight:\"] {display: none !important;}',\n                history: true,\n                retry: 3000,\n                pager: {\n                    nextL: 'js; const a=[fun.getNextE(\\'(//a[contains(text(), \"ä¸‹ä¸€é¡µ\")])[last()]\\'),fun.getNextE(\\'(//a[contains(text(), \"ä¸‹ä¸€ç« \")])[last()]\\'),fun.getNextE(\\'(//a[contains(text(), \"ä¸‹ä¸€èŠ‚\")])[last()]\\')];return a.find(i => i)',\n                    insertP6Br: false,\n                    replaceE: '//a[contains(text(), \"ä¸‹ä¸€ç« \") or contains(text(), \"ä¸‹ä¸€é¡µ\") or contains(text(), \"ä¸‹ä¸€èŠ‚\")]/parent::*'\n                },\n                function: {\n                    bF: xs_bF,\n                    bFp: [/<br>.{0,10}ç§’è®°ä½.+$/, '']\n                }\n            }, //            ç¬”è¶£é˜ 3 æ¨¡æ¿çš„å°è¯´ç½‘ç«™\n            yingshi: {\n                ignore: true,\n                style: 'div.stui-page__all, div.myui-page__all {display: none !important;}',\n                blank: 3,\n                pager: {\n                    nextL: '.stui-page li.active+li>a, .stui-page__item li.active+li>a, #long-page .active+li>a, .myui-page .visible-xs+li>a',\n                    pageE: '.stui-vodlist, .myui-vodlist>li, #content, #searchList',\n                    replaceE: '.stui-page, .stui-page__item, #long-page, .myui-page, .myui-page__item'\n                },\n                function: {\n                    bF: src_bF,\n                    bFp: [1, '[data-original]', 'data-original']\n                }\n            }, //            éƒ¨åˆ†å½±è§†ç½‘ç«™\n            yingshi2: {\n                ignore: true,\n                blank: 3,\n                style: '.module-poster-item, .module-items>* {display: inline-block !important;}',\n                pager: {\n                    nextL: '#page a[title=\"ä¸‹ä¸€é¡µ\"], a.page-next',\n                    pageE: '.module-items>*, a.module-poster-item',\n                    replaceE: '#page'\n                },\n                function: {\n                    bF: src_bF\n                }\n            }, //           éƒ¨åˆ†å½±è§†ç½‘ç«™ 2\n            meinvtu_m: {\n                ignore: true,\n                history: true,\n                blank: 3,\n                pager: {\n                    type: 3,\n                    nextL: '//div[contains(@class,\"article_page\")]//a[text()=\"ä¸‹ä¸€é¡µ\"]',\n                    pageE: '.ArticleImageBox, .PictureList',\n                    replaceE: '.article_page',\n                    scrollD: 500\n                }\n            }, //          éƒ¨åˆ†ç¾å¥³å›¾ç«™ - æ‰‹æœºç‰ˆ\n            discuz_forum: {\n                ignore: true,\n                pager: {\n                    type: 2,\n                    nextL: '#autopbn',\n                    interval: 800\n                }\n            }, //       Discuz! è®ºå› - å¸–å­åˆ—è¡¨ï¼ˆè‡ªå¸¦æ— ç¼åŠ è½½ä¸‹ä¸€é¡µæŒ‰é’®çš„ï¼‰\n            discuz_guide: {\n                ignore: true,\n                pager: {\n                    nextL: 'a.nxt:not([href^=\"javascript\"]) ,a.next:not([href^=\"javascript\"])',\n                    pageE: 'tbody[id^=\"normalthread_\"]',\n                    replaceE: '.pg, .pages',\n                    forceHTTPS: true\n                }\n            }, //       Discuz! è®ºå› - å¯¼è¯»é¡µ åŠ å¸–å­åˆ—è¡¨ï¼ˆä¸å¸¦æ— ç¼åŠ è½½ä¸‹ä¸€é¡µæŒ‰é’®çš„ï¼Œæˆ–å­˜åœ¨æŒ‰é’®ä½†åªæ˜¯å•çº¯è·³è½¬ä¸‹ä¸€é¡µé“¾æ¥çš„ï¼‰\n            discuz_waterfall: {\n                ignore: true,\n                style: '.pgbtn',\n                pager: {\n                    nextL: 'a.nxt:not([href^=\"javascript\"]) ,a.next:not([href^=\"javascript\"])',\n                    pageE: '#waterfall > li, #waterfall > dl',\n                    replaceE: '.pg, .pages',\n                    forceHTTPS: true\n                }\n            }, //   Discuz! è®ºå› - å›¾ç‰‡æ¨¡å¼çš„å¸–å­åˆ—è¡¨ï¼ˆä¸å¸¦æ— ç¼åŠ è½½ä¸‹ä¸€é¡µæŒ‰é’®çš„ï¼Œæˆ–å­˜åœ¨æŒ‰é’®ä½†åªæ˜¯å•çº¯è·³è½¬ä¸‹ä¸€é¡µé“¾æ¥çš„ï¼‰\n            discuz_thread: {\n                ignore: true,\n                thread: true,\n                style: '.pgbtn, .viewthread:not(:first-of-type)>h1, .viewthread:not(:first-of-type)>ins, .viewthread:not(:first-of-type)>.headactions {display: none;}',\n                pager: {\n                    nextL: 'a.nxt:not([href^=\"javascript\"]) ,a.next:not([href^=\"javascript\"])',\n                    pageE: '#postlist > div[id^=\"post_\"], form>.viewthread',\n                    replaceE: '//div[contains(@class,\"pg\") or contains(@class,\"pages\")][./a[contains(@class,\"nxt\") or contains(@class,\"next\") or contains(@class,\"prev\")][not(contains(@href,\"javascript\") or contains(@href,\"commentmore\"))]]',\n                    forceHTTPS: true\n                },\n                function: {\n                    bF: src_bF,\n                    bFp: [0, 'img[file]', 'file']\n                }\n            }, //      Discuz! è®ºå› - å¸–å­å†…\n            discuz_search: {\n                ignore: true,\n                pager: {\n                    nextL: 'a.nxt:not([href^=\"javascript\"]) ,a.next:not([href^=\"javascript\"])',\n                    pageE: '#threadlist > ul',\n                    replaceE: '.pg, .pages',\n                    forceHTTPS: true\n                }\n            }, //      Discuz! è®ºå› - æœç´¢é¡µ\n            discuz_youspace: {\n                ignore: true,\n                pager: {\n                    nextL: 'a.nxt:not([href^=\"javascript\"]) ,a.next:not([href^=\"javascript\"])',\n                    pageE: 'form:not([action^=\"search.php?\"]) tbody > tr:not(.th)',\n                    replaceE: '.pg, .pages',\n                    forceHTTPS: true\n                }\n            }, //    Discuz! è®ºå› - å›å¤é¡µã€ä¸»é¢˜é¡µï¼ˆåˆ«äººçš„ï¼‰\n            discuz_collection: {\n                ignore: true,\n                pager: {\n                    nextL: 'a.nxt:not([href^=\"javascript\"]) ,a.next:not([href^=\"javascript\"])',\n                    pageE: '#ct .bm_c table > tbody',\n                    replaceE: '.pg, .pages',\n                    forceHTTPS: true\n                }\n            }, //  Discuz! è®ºå› - æ·˜å¸–é¡µ\n            discuz_archiver: {\n                ignore: true,\n                pager: {\n                    nextL: '//div[@id=\"content\"][last()]//div[@class=\"page\"]/strong/following-sibling::a[1]',\n                    pageE: '#content'\n                }\n            }, //  Discuz! è®ºå› - å½’æ¡£é¡µ\n            discuz_m: {\n                ignore: true,\n                thread: true,\n                pager: {\n                    nextL: '//a[@class=\"nxt\" or @class=\"next\"] | //div[@class=\"page\"]/a[text()=\"ä¸‹ä¸€é¡µ\" or contains(text(), \">\")]',\n                    replaceE: '.pg, .page',\n                    forceHTTPS: true,\n                    scrollD: 1000\n                }\n            }, //           Discuz! è®ºå› - è§¦å±æ‰‹æœºç‰ˆ - å¸–å­å†…\n            discuz_m_forum: {\n                ignore: true,\n                pager: {\n                    type: 2,\n                    nextL: 'a.loadmore',\n                    interval: 500,\n                    scrollD: 1000\n                }\n            }, //     Discuz! è®ºå› - è§¦å±æ‰‹æœºç‰ˆ - å¸–å­åˆ—è¡¨ï¼ˆè‡ªå¸¦æ— ç¼åŠ è½½ä¸‹ä¸€é¡µæŒ‰é’®çš„ï¼‰\n            flarum: {\n                ignore: true,\n                url: ()=> {urlC = true;if (!indexOF('/d/')) {if(getCSS('.DiscussionList-loadMore')){curSite = DBSite.flarum;}else if(getCSS('a.Button--primary')){curSite = DBSite.flarum2;}}},\n                pager: {\n                    type: 2,\n                    nextL: '.DiscussionList-loadMore > button',\n                    isHidden: true\n                }\n            }, //             Flarum è®ºå›\n            flarum2: {\n                ignore: true,\n                blank: 4,\n                pager: {\n                    type: 6,\n                    nextL: 'a.Button--primary+a:not(.disabled)',\n                    pageE: '.DiscussionList-discussions>li',\n                    replaceE: '.Orion-DiscussionListPagination'\n                }\n            }, //             Flarum è®ºå› - å¸¦é¡µç çš„\n            phpbb: {\n                ignore: true,\n                url: ()=> {if (indexOF('/viewforum.php')) {\n                    curSite = DBSite.phpbb;\n                } else if (indexOF('/viewtopic.php')) {\n                    curSite = DBSite.phpbb_post;\n                } else if (indexOF('/search.php')) {\n                    curSite = DBSite.phpbb_search;\n                }},\n                pager: {\n                    nextL: '.pagination li.next a[rel=\"next\"], .topic-actions .pagination strong~a',\n                    pageE: '.forumbg:not(.announcement) ul.topiclist.topics > li',\n                    replaceE: '.action-bar .pagination, .topic-actions .pagination'\n                }\n            }, //              phpBB è®ºå› - å¸–å­åˆ—è¡¨\n            phpbb_post: {\n                ignore: true,\n                thread: true,\n                pager: {\n                    nextL: '.pagination li.next a[rel=\"next\"], .topic-actions .pagination strong~a',\n                    pageE: 'div.post[id], div.post[id]+hr',\n                    replaceE: '.action-bar .pagination, .topic-actions .pagination'\n                }\n            }, //         phpBB è®ºå› - å¸–å­å†…\n            phpbb_search: {\n                ignore: true,\n                pager: {\n                    nextL: '.pagination li.next a[rel=\"next\"], .topic-actions .pagination strong~a',\n                    pageE: 'div.search.post',\n                    replaceE: '.action-bar .pagination, .pagination'\n                }\n            }, //       phpBB è®ºå› - æœç´¢é¡µ\n            xenforo: {\n                ignore: true,\n                url: ()=> {if (indexOF(/\\/(forums|f)\\//) || (getCSS(DBSite.xenforo.pager.nextL) && getCSS(DBSite.xenforo.pager.pageE))) {\n                    curSite = DBSite.xenforo;\n                } else if (indexOF(/\\/(threads|t)\\//) || (getCSS(DBSite.xenforo.pager.nextL) && getCSS(DBSite.xenforo_post.pager.pageE))) {\n                    curSite = DBSite.xenforo_post;\n                } else if (indexOF('/search/') || (getCSS(DBSite.xenforo.pager.nextL) && getCSS(DBSite.xenforo_search.pager.pageE))) {\n                    curSite = DBSite.xenforo_search;\n                }},\n                blank: 3,\n                pager: {\n                    nextL: 'a.pageNav-jump--next',\n                    pageE: '.structItemContainer > div',\n                    replaceE: 'nav.pageNavWrapper',\n                    scrollD: 2500\n                }\n            }, //            XenForo è®ºå› - å¸–å­åˆ—è¡¨\n            xenforo_post: {\n                ignore: true,\n                thread: true,\n                pager: {\n                    nextL: 'a.pageNav-jump--next',\n                    pageE: '.block-body.js-replyNewMessageContainer > article',\n                    replaceE: 'nav.pageNavWrapper',\n                    scrollD: 2500\n                }\n            }, //       XenForo è®ºå› - å¸–å­å†…\n            xenforo_search: {\n                ignore: true,\n                blank: 3,\n                pager: {\n                    nextL: 'a.pageNav-jump--next',\n                    pageE: 'ol.block-body > li',\n                    replaceE: 'nav.pageNavWrapper',\n                    scrollD: 2500\n                }\n            }, //     XenForo è®ºå› - æœç´¢é¡µ\n            mybb: {\n                ignore: true,\n                url: ()=> {if (location.pathname.toLowerCase().indexOf('/forum') == 0 || location.pathname.toLowerCase().indexOf('/search') == 0 || (getCSS(DBSite.mybb.pager.nextL)&&getCSS(DBSite.mybb.pager.pageE))) {\n                    curSite = DBSite.mybb;\n                } else if (location.pathname.toLowerCase().indexOf('thread') !== -1 || (getCSS(DBSite.mybb.pager.nextL)&&getCSS(DBSite.mybb_post.pager.pageE))) {\n                    curSite = DBSite.mybb_post; curSite.pager = Object.assign({}, DBSite.mybb.pager,DBSite.mybb_post.pager);\n                }},\n                blank: 3,\n                pager: {\n                    nextL: 'div:not([id=breadcrumb_multipage_popup])>a.pagination_next, div:not([id=breadcrumb_multipage_popup])>.pagination_current+a.pagination_page',\n                    pageE: 'tr.inline_row',\n                    replaceE: '.pagination',\n                    scrollD: 2500\n                }\n            }, //            MyBB è®ºå› - å¸–å­åˆ—è¡¨\n            mybb_post: {\n                ignore: true,\n                thread: true,\n                pager: {\n                    pageE: '#posts>*',\n                    scrollD: 2500\n                }\n            }, //       MyBB è®ºå› - å¸–å­å†…\n            xiuno: {\n                ignore: true,\n                url: ()=> {if (lp == '/' || indexOF(/\\/(index|forum)/)) {curSite = DBSite.xiuno;} else if (indexOF('/thread')) {curSite = DBSite.xiuno_post;}},\n                pager: {\n                    nextL: '//li[@class=\"page-item\"]/a[text()=\"â–¶\" or text()=\"Â»\" or contains(text(),\">\") or contains(text(),\"ä¸‹ä¸€é¡µ\")]',\n                    pageE: 'ul.threadlist > li',\n                    replaceE: 'ul.pagination'\n                }\n            }, //              Xiuno è®ºå› - å¸–å­åˆ—è¡¨\n            xiuno_post: {\n                ignore: true,\n                thread: true,\n                pager: {\n                    nextL: '//li[@class=\"page-item\"]/a[text()=\"â–¶\" or text()=\"Â»\" or contains(text(),\">\") or contains(text(),\"ä¸‹ä¸€é¡µ\")]',\n                    pageE: 'li.post[data-pid]:not(.newpost)',\n                    replaceE: 'ul.pagination'\n                }\n            }, //         Xiuno è®ºå› - å¸–å­å†…\n            forgejoGitea: {\n                ignore: true,\n                url: ()=> {if (indexOF(/^\\/explore\\/.+/) || indexOF(/\\/(issues|pulls|releases|tags)$/) || indexOF(/\\/commits\\/branch\\/.+/) || (getCSS('.pagination>.active+.item') && getCSS('.flex-list>.flex-item'))) {curSite = DBSite.forgejoGitea;}},\n                pager: {\n                    nextL: '.pagination>.active+.item',\n                    pageE: '.flex-list>.flex-item, #issue-list>div, #release-list>li, tbody.tag-list>tr, tbody.commit-list>tr',\n                    replaceE: '.pagination'\n                }\n            }, //              Forgejo/Gitea git æ‰˜ç®¡ç³»ç»Ÿ - explore/issues/releases/tag/commit\n            nexusphp: {\n                ignore: true,\n                url: ()=> {\n                    if (lp == '/torrents.php' || getCSS('table.torrents')) {\n                        curSite = DBSite.nexusphp;\n                    } else if (lp == '/subtitles.php') {\n                        curSite = DBSite.nexusphp;\n                        curSite.pager.pageE = '#outer > table.main~table > tbody > tr:not(:first-of-type)'\n                    } else if (lp == '/forums.php' && indexOF('action=viewforum', 's')) {\n                        curSite = DBSite.nexusphp;\n                        curSite.pager.pageE = '#outer > table.main+table > tbody > tr:not(:first-of-type):not(:last-of-type)'\n                    } else if (lp == '/forums.php' && indexOF('action=viewtopic', 's')) {\n                        curSite = DBSite.nexusphp;\n                        curSite.thread = true;\n                        curSite.pager.pageE = 'td.text > div, td.text > div+table.main';\n                    }},\n                pager: {\n                    nextL: '//a[./b[contains(text(), \"ä¸‹ä¸€é¡µ\") or contains(text(), \">>\")]]',\n                    pageE: 'table.torrents > tbody > tr:not(:first-of-type)',\n                    replaceE: '//p[@align][./font[@class=\"gray\"]]'\n                }\n            }, //           NexusPHP è®ºå›\n            nexusmods: {\n                host: 'www.nexusmods.com',\n                url: ()=> {urlC = true; if (indexOF(/\\/(mods|users)\\/\\d+/)) {if (indexOF('tab=posts','s')){curSite = DBSite.nexusmods_posts;} else if (indexOF('tab=user+files','s')){curSite = DBSite.nexusmods;}} else if (lp !== '/' && getCSS('.pagination a.page-selected')) {curSite = DBSite.nexusmods;}},\n                blank: 1,\n                history: false,\n                xRequestedWith: true,\n                pager: {\n                    nextL: nexusmods_nextL,\n                    pageE: 'ul.tiles>li',\n                    replaceE: '.pagination',\n                    scrollD: 3500\n                },\n                function: {\n                    bF: nexusmods_bF\n                }\n            }, //               NexusMods\n            nexusmods_posts: {\n                ignore: true,\n                history: false,\n                xRequestedWith: true,\n                pager: {\n                    nextL: nexusmods_nextL,\n                    pageE: '#comment-container>ol>li.comment:not(.comment-sticky)',\n                    replaceE: '.pagination',\n                    scrollD: 3500\n                }\n            }, //               NexusMods posts\n            mangabz: {\n                host: ['mangabz.com', 'www.mangabz.com'],\n                url: ()=> {if (indexOF(/\\/m\\d+/)) {\n                    setTimeout(mangabz_init, 1500);\n                    curSite = DBSite.mangabz;\n                } else if (indexOF(/\\/\\d+bz\\//)) {\n                    if (getCSS('.detail-list-form-more')) getCSS('.detail-list-form-more').click();\n                } else if (indexOF('/manga-list') || lp == '/search') {\n                    curSite = DBSite.mangabz_list;\n                }},\n                style: 'body > .container > div:not([id]) {display: none !important;} .top-bar {opacity: 0.3 !important;} #cp_img > img{display: block !important;margin: 0 auto !important; max-width: 99% !important; width: auto !important; height: auto !important;}',\n                pager: {\n                    type: 4,\n                    nextL: mangabz_nextL,\n                    insertP: ['#cp_img', 3],\n                    insertE: mangabz_insertE,\n                    replaceE: 'p.top-title, body > .container > div:not([id])',\n                    interval: 500\n                }\n            }, //           Mangabz æ¼«ç”»\n            mangabz_list: {\n                ignore: true,\n                blank: 4,\n                pager: {\n                    nextL: '//div[contains(@class,\"page-pagination\")]//a[contains(text(), \">\")]',\n                    pageE: 'ul.mh-list > li',\n                    replaceE: '.page-pagination',\n                    scrollD: 800\n                }\n            }, //      Mangabz æ¼«ç”» - åˆ†ç±»/æœç´¢é¡µ\n            dm5: {\n                host: 'www.dm5.com',\n                url: ()=> {if (indexOF(/\\/m\\d+/)) {\n                    setTimeout(mangabz_init, 1500);\n                    curSite = DBSite.dm5;\n                } else if (indexOF('/manga-list') || lp == '/search' || getCSS('.box-body > ul.mh-list > li')) {\n                    curSite = DBSite.mangabz_list;\n                } else if (getCSS('.detail-more')) {\n                    getCSS('.detail-more').click();\n                }},\n                style: '.view-paging > .container, .view-comment {display: none !important;} .rightToolBar {opacity: 0.3 !important;} #cp_img > img, #barChapter > img{display: block !important;margin: 0 auto !important; max-width: 99% !important; width: auto !important; height: auto !important;} body {overflow: auto !important;}',\n                pager: {\n                    type: 4,\n                    nextL: dm5_nextL,\n                    insertP: ['#barChapter,#cp_img', 3],\n                    insertE: dm5_insertE,\n                    replaceE: '.view-paging > .container, .rightToolBar',\n                    interval: 500\n                }\n            }, //               åŠ¨æ¼«å±‹\n            xmanhua: {\n                host: ['xmanhua.com', 'www.xmanhua.com','yymanhua.com','www.yymanhua.com'],\n                url: ()=> {if (indexOF(/\\/m\\d+/)) {\n                    setTimeout(mangabz_init, 1500);\n                    if (location.hostname.indexOf('xmanhua') != -1){unsafeWindow.MH_PREFIX23 = 'XMANHUA_'}else{unsafeWindow.MH_PREFIX23 = 'YYMANHUA_'}\n                    curSite = DBSite.xmanhua;\n                } else if (indexOF(/\\/\\d+xm\\//)) {\n                    if (getCSS('.detail-list-form-more')) getCSS('.detail-list-form-more').click();\n                } else if (indexOF('/manga-list') || lp == '/search') {\n                    curSite = DBSite.xmanhua_list;\n                }},\n                style: 'a.reader-bottom-page {display: none !important;} .header, .reader-bottom {opacity: 0.3 !important;} #cp_img > img{display: block !important;margin: 0 auto !important; max-width: 99% !important; width: auto !important; height: auto !important;}',\n                hiddenPN: true,\n                pager: {\n                    type: 4,\n                    nextL: xmanhua_nextL,\n                    insertP: ['#cp_img', 3],\n                    insertE: xmanhua_insertE,\n                    replaceE: '.reader-title, body > .container > div:not([id])',\n                    interval: 500,\n                    scrollD: 2500\n                }\n            }, //           Xmanhua æ¼«ç”»\n            xmanhua_list: {\n                ignore: true,\n                blank: 4,\n                pager: {\n                    nextL: '//div[@class=\"page-pagination\"]//a[contains(text(), \">\")]',\n                    pageE: 'ul.mh-list > li',\n                    replaceE: '.page-pagination',\n                    scrollD: 1000\n                }\n            } //      Xmanhua æ¼«ç”» - åˆ†ç±»/æœç´¢é¡µ\n        };\n        let _customRules = GM_getValue('menu_customRules', {}),\n            _rules = GM_getValue('menu_rules', {})\n        if (Object.prototype.toString.call(_customRules) !== '[object Object]') {_customRules={};}\n        if (Object.prototype.toString.call(_rules) !== '[object Object]') {_rules={};}\n        let _customRulesKeys = Object.keys(_customRules),\n            _rulesKeys = Object.keys(_rules)\n        // åˆå¹¶ è‡ªå®šä¹‰è§„åˆ™ã€å¤–ç½®è§„åˆ™ã€å†…ç½®è§„åˆ™ï¼ˆæ³¨ï¼šObject.assign åˆå¹¶å¯¹è±¡æ—¶ï¼ŒåŒåä¼šåè€…è¦†ç›–å‰è€…ï¼‰\n        if (_customRulesKeys.length === 0) { // å¦‚æœè‡ªå®šä¹‰è§„åˆ™ä¸ºç©ºï¼Œåˆ™ç›´æ¥åˆå¹¶ å¤–ç½®è§„åˆ™ã€å†…ç½®è§„åˆ™\n            DBSite = Object.assign({}, _rules, DBSite);\n            DBSite2 = structuredClone(_rules); // DBSite2 æ˜¯æä¾›ç»™ è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™ç•Œé¢ - æ‰€æœ‰è§„åˆ™ æ˜¾ç¤ºç”¨çš„\n        } else { // å¦‚æœæœ‰è‡ªå®šä¹‰è§„åˆ™ï¼Œä¸ºé¿å…å¤–ç½®è§„åˆ™è¦†ç›–åŒåçš„è‡ªå®šä¹‰è§„åˆ™ï¼Œè¦å…ˆåˆ¤æ–­å¹¶ç§»é™¤åŒåçš„å¤–ç½®è§„åˆ™\n            for (let i = 0; i < _customRulesKeys.length; i++) { // å¾ªç¯ [è‡ªå®šä¹‰è§„åˆ™-å¯¹è±¡å] æ•°ç»„\n                if (_rulesKeys.indexOf(_customRulesKeys[i]) != -1) { // åœ¨ [å¤–ç½®è§„åˆ™-å¯¹è±¡å] æ•°ç»„ä¸­ï¼Œå¯»æ‰¾æ˜¯å¦æœ‰åŒåçš„ [è‡ªå®šä¹‰è§„åˆ™-å¯¹è±¡å]\n                    if (_customRules[_customRulesKeys[i]].inherits === true){ // å¦‚æœè¯¥åŒåçš„è‡ªå®šä¹‰è§„åˆ™å¯¹è±¡å«æœ‰ inherits ç»§æ‰¿æ ‡è¯†ï¼Œåˆ™å°†åŒåçš„ä¸¤è€…åˆå¹¶ï¼ˆè‡ªå®šä¹‰ è¦†ç›– å¤–ç½®ï¼‰\n                        // å¦‚æœè‡ªå®šä¹‰è§„åˆ™ä¸­åŒ…å« \"pager\":{} è§„åˆ™ï¼Œåˆ™éœ€è¦å…ˆåˆå¹¶ pager åå†å»åˆå¹¶æ•´ä½“è§„åˆ™ï¼ˆå¦åˆ™ pager ä¼šè¢«è‡ªå®šä¹‰è§„åˆ™å®Œæ•´è¦†ç›–ï¼‰\n                        if (_customRules[_customRulesKeys[i]].pager != undefined && _rules[_customRulesKeys[i]].pager != undefined) {_customRules[_customRulesKeys[i]].pager = Object.assign({}, _rules[_customRulesKeys[i]].pager, _customRules[_customRulesKeys[i]].pager)}\n                        _customRules[_customRulesKeys[i]] = Object.assign({}, _rules[_customRulesKeys[i]], _customRules[_customRulesKeys[i]]);\n                    }\n                    delete _rules[_customRulesKeys[i]] // åˆ é™¤å¤–ç½®è§„åˆ™ä¸­çš„åŒåï¼Œè¿™æ ·åç»­åˆå¹¶æ—¶ï¼Œå¤–ç½®è§„åˆ™æ‰ä¸ä¼šè¦†ç›–è‡ªå®šä¹‰è§„åˆ™çš„åŒåè§„åˆ™\n                };\n            }\n            DBSite = Object.assign({}, _customRules, _rules, DBSite);\n            DBSite2 = Object.assign({}, structuredClone(_customRules), structuredClone(_rules)); // ä¸ºäº†é¿å…å¯¹è±¡çš„åç»­å˜åŒ–å½±å“ DBSite2 å†…å®¹ï¼ˆå¦‚ SiteTypeID ç­‰ï¼‰ï¼Œéœ€è¦å¯¹ a b å˜é‡è¿›è¡Œæ·±æ‹·è´ï¼Œä½¿å…¶å®Œå…¨ç‹¬ç«‹\n        }\n\n        // ç”Ÿæˆ SiteTypeID\n        setSiteTypeID();\n        //console.log(DBSite)\n    }\n    // æ›´æ–°å¤–ç½®ç¿»é¡µè§„åˆ™\n    function getRulesUrl(update = false) {\n        // å¦‚æœæ˜¯ æ—§ç‰ˆæœ¬çš„å­—ç¬¦ä¸²æ—¶é—´æ ¼å¼ï¼ˆå½“å‰ä¸ºæ•°å­—æ ¼å¼ï¼‰æˆ– åˆšå®‰è£…è„šæœ¬ï¼ˆå–ä¸åˆ°å€¼ä¼šè¿”å›å­—ç¬¦ä¸² '' ç©ºï¼‰ï¼Œåˆ™éœ€è¦ç«‹å³æ›´æ–°\n        if (typeof(GM_getValue('menu_ruleUpdateTime', '')) == 'string') {update = true; if (scriptHandler != 'AdGuard') {alert('è¯·ç‚¹å‡»ã€ç¡®å®šã€‘å¼€å§‹é¦–æ¬¡è·å–ã€å¤–ç½®ç¿»é¡µè§„åˆ™ã€‘ï¼ˆå¤§æ¦‚å‡ ç§’\\n\\nåœ¨æ­¤æœŸé—´è¯·ä¸è¦ æ“ä½œ/è·³è½¬/å…³é—­ å½“å‰ç½‘é¡µ~\\n\\nå¦‚æœä¸å°å¿ƒæ²¡è·å–æˆåŠŸä¹Ÿæ²¡äº‹ï¼Œå¯ä»¥å»è„šæœ¬èœå•ä¸­æ‰‹åŠ¨ã€æ›´æ–°å¤–ç½®ç¿»é¡µè§„åˆ™ã€‘å³å¯ï¼ˆæµè§ˆå™¨å³ä¸Šè§’ Tampermonkey æ‰©å±•å›¾æ ‡å†…çš„è„šæœ¬èœå•\\n\\n\\nå¦å¤–ï¼Œæƒ³è¦ã€ä¸´æ—¶æš‚åœç¿»é¡µã€‘è¯·ç‚¹å‡»å·¦ä¸‹è§’æ‚¬æµ®çš„ã€é¡µç ã€‘æŒ‰é’®\\n\\nå¦‚æœæ¯æ¬¡æ‰“å¼€ç½‘é¡µéƒ½ä¼šçœ‹åˆ°è¯¥æç¤ºï¼Œè¯´æ˜ä½ çš„ æ²¹çŒ´è„šæœ¬ç®¡ç†å™¨ä¸æœ¬è„šæœ¬ä¹‹é—´ å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œè¯·æ›´æ¢å…¶ä»–è¯•è¯•ï¼');} else {urlArr2 = urlArr}}\n\n        if (update) { // æ‰‹åŠ¨æ›´æ–°ï¼ˆæˆ–å®‰è£…åé¦–æ¬¡æ›´æ–°ï¼‰\n            GM_notification({text: 'ğŸ”„ æ›´æ–°å¤–ç½®ç¿»é¡µè§„åˆ™ä¸­ï¼Œè¯·å‹¿æ“ä½œç½‘é¡µ...', timeout: 5000});\n            getRulesUrl_(true);\n        } else if (parseInt(+new Date()/1000) - GM_getValue('menu_ruleUpdateTime', 0) > 5184000) {\n            getRulesUrl_();\n        }\n\n        function getRulesUrl_(n = false, url) {\n            if (n) {url = urlArr2[Math.floor(Math.random()*urlArr2.length)];} else {url = urlArr[Math.floor(Math.random()*urlArr.length)];}\n            if (url === undefined) {GM_notification({text: 'âŒ æ‰€æœ‰æ›´æ–°åœ°å€å‡ä»¥è¯•è¿‡ï¼Œå·²æ— å¯ç”¨åœ°å€ï¼Œè¯·è”ç³»ä½œè€…è§£å†³...', timeout: 5000}); return}\n            //console.log(url); return\n            GM_xmlhttpRequest({\n                url: url,\n                method: 'GET',\n                responseType: 'json',\n                overrideMimeType: 'application/json; charset=utf-8',\n                timeout: 4000,\n                onload: function (response) {\n                    try {\n                        //console.log('æœ€ç»ˆ URLï¼š' + response.finalUrl, 'è¿”å›å†…å®¹ï¼š',response.status,response.response,response.responseText, response.responseHeaders)\n                        if (response.status === 200 && response.response && Object.prototype.toString.call(response.response) === '[object Object]' && Object.keys(response.response).length > 100) {\n                            GM_setValue('menu_rules', response.response); // å†™å…¥æœ€æ–°è§„åˆ™\n                            GM_setValue('menu_ruleUpdateTime', parseInt(+new Date()/1000)); // å†™å…¥å½“å‰æ—¶é—´æˆ³\n\n                            curSite = {SiteTypeID: 0}; pageNum.now = 1; // é‡ç½®è§„åˆ™+é¡µç \n                            registerMenuCommand(); // é‡æ–°åˆ¤æ–­è§„åˆ™\n\n                            webTypeIf(); // åˆ¤æ–­ç½‘ç«™ç±»å‹\n                            if (!GM_getValue('menu_thread')) {if (curSite.thread) {curSite = {SiteTypeID: 0}; pageNum.now = 1;}} // å¸–å­å†…è‡ªåŠ¨ç¿»é¡µåˆ¤æ–­\n                            if (GM_getValue('menu_page_number')) {pageNumber('add');} else {pageNumber('set');} // æ˜¾ç¤ºé¡µç \n                            if (curSite.blank != undefined) setTimeout(forceTarget, 1000); // å¼ºåˆ¶æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥\n                            if (curSite.style) {insStyle(curSite.style)} // æ’å…¥ Style CSS æ ·å¼\n                            pausePageEvent(); // å·¦é”®åŒå‡»ç½‘é¡µç©ºç™½å¤„æš‚åœç¿»é¡µ\n                            pageLoading(); // è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n\n                            if (n) GM_notification({text: 'âœ… å·²æ›´æ–°å¤–ç½®ç¿»é¡µè§„åˆ™ï¼\\nå¦‚æœä¾ç„¶æ— æ³•ç¿»é¡µï¼Œè¯´æ˜è¿˜ä¸æ”¯æŒå½“å‰ç½‘é¡µï¼Œç‚¹å‡»æ­¤å¤„æäº¤ç”³è¯·~', timeout: 5000, onclick: function(){GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});GM_openInTab('https://greasyfork.org/zh-CN/scripts/419215/feedback', {active: true,insert: true,setParent: true});}});\n                        } else {\n                            console.log('URLï¼š' + url, response);\n                            GM_notification({text: 'âŒ ä¸ºç©ºï¼æ›´æ–°å¤±è´¥ï¼Œè¯·å†è¯•å‡ æ¬¡...\\nå¦‚æœä¾ç„¶æ›´æ–°å¤±è´¥ï¼Œè¯·è”ç³»ä½œè€…è§£å†³...', timeout: 5000});\n                            if (n) {urlArr2.splice(urlArr2.indexOf(url), 1)} else {urlArr.splice(urlArr.indexOf(url), 1)}\n                        }\n                    } catch (e) {\n                        console.log('URLï¼š' + url, e);\n                        GM_notification({text: 'âŒ æŠ¥é”™ï¼æ›´æ–°å¤±è´¥ï¼Œè¯·å†è¯•å‡ æ¬¡...\\nå¦‚æœä¾ç„¶æ›´æ–°å¤±è´¥ï¼Œè¯·è”ç³»ä½œè€…è§£å†³...', timeout: 5000});\n                        if (n) {urlArr2.splice(urlArr2.indexOf(url), 1)} else {urlArr.splice(urlArr.indexOf(url), 1)}\n                    }\n                },\n                onerror: function (response) {\n                    console.log('URLï¼š' + url, response)\n                    GM_notification({text: 'âŒ é”™è¯¯ï¼æ›´æ–°å¤±è´¥ï¼Œè¯·å†è¯•å‡ æ¬¡...\\nå¦‚æœä¾ç„¶æ›´æ–°å¤±è´¥ï¼Œè¯·è”ç³»ä½œè€…è§£å†³...', timeout: 5000});\n                    if (n) {urlArr2.splice(urlArr2.indexOf(url), 1)} else {urlArr.splice(urlArr.indexOf(url), 1)}\n                },\n                ontimeout: function (response) {\n                    console.log('URLï¼š' + url, response)\n                    GM_notification({text: 'âŒ è¶…æ—¶ï¼æ›´æ–°å¤±è´¥ï¼Œè¯·å†è¯•å‡ æ¬¡...\\nå¦‚æœä¾ç„¶æ›´æ–°å¤±è´¥ï¼Œè¯·è”ç³»ä½œè€…è§£å†³...', timeout: 5000});\n                    if (n) {urlArr2.splice(urlArr2.indexOf(url), 1)} else {urlArr.splice(urlArr.indexOf(url), 1)}\n                }\n            })\n        }\n    }\n\n\n    // --------------------------------------------------------\n\n\n    // åˆ¤æ–­ç½‘ç«™ç±»å‹\n    webTypeIf();\n\n    // å¸–å­å†…è‡ªåŠ¨ç¿»é¡µåˆ¤æ–­\n    if (!GM_getValue('menu_thread')) {if (curSite.thread) {curSite = {SiteTypeID: 0}; pageNum.now = 1;}}\n\n    //console.log(curSite)\n    // æ˜¾ç¤ºé¡µç \n    if (GM_getValue('menu_page_number')) {pageNumber('add');} else {pageNumber('set');}\n    // å·¦é”®åŒå‡»ç½‘é¡µç©ºç™½å¤„æš‚åœç¿»é¡µ\n    pausePageEvent();\n    // å¼ºåˆ¶æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥\n    if (curSite.blank != undefined) setTimeout(forceTarget, 1000);\n    // åˆå§‹åŒ–äº‹ä»¶\n    //if (curSite.initE != undefined) initEvent();\n\n    // å¯¹äºä½¿ç”¨ pjax æŠ€æœ¯çš„ç½‘ç«™ï¼Œéœ€è¦ç›‘å¬ URL å˜åŒ–æ¥é‡æ–°åˆ¤æ–­ç¿»é¡µè§„åˆ™\n    if (urlC) {\n        nowLocation = location.href\n        if (window.onurlchange === undefined) {addUrlChangeEvent();} // Tampermonkey v4.11 ç‰ˆæœ¬æ·»åŠ çš„ onurlchange äº‹ä»¶ grantï¼Œå¯ä»¥ç›‘æ§ pjax ç­‰ç½‘é¡µçš„ URL å˜åŒ–\n        if (webType === 1) {\n            window.addEventListener('urlchange', function(){\n                lp = location.pathname;\n                //console.log(nowLocation, location.href)\n                if (curSite.history !== false && window.top.document.Autopage_nowUrl === location.href) {nowLocation = location.href; return}\n                if (nowLocation == location.href) return\n                if (curSite.pager && curSite.pager.type == 5) {\n                    if (self != top) {window.top.location.href = location.href;} else {if (getCSS('iframe#Autopage_iframe')) {getCSS('iframe#Autopage_iframe').remove();}}\n                    pausePage = true;\n                } // å¯¹äºç¿»é¡µæ¨¡å¼ 5ï¼Œå¦‚æœæ˜¯ iframe æ¡†æ¶å†… URL å˜åŠ¨ï¼Œåˆ™å‡çº§ä¸ºé¡¶çº§é¡µé¢ï¼Œå¦‚æœæ˜¯é¡¶çº§é¡µé¢çš„ URL å˜åŠ¨ï¼Œåˆ™æ¸…ç† iframe æ¡†æ¶\n                nowLocation = location.href; curSite = {SiteTypeID: 0}; pageNum.now = 1; // é‡ç½®è§„åˆ™+é¡µç \n                registerMenuCommand(); // é‡æ–°åˆ¤æ–­è§„åˆ™\n\n                //console.log(curSite);\n                if (curSite.blank != undefined) setTimeout(forceTarget, 1000); // å¼ºåˆ¶æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥\n                //if (curSite.initE != undefined) initEvent(); // åˆå§‹åŒ–äº‹ä»¶\n                if (curSite.style) {insStyle(curSite.style)} // æ’å…¥ Style CSS æ ·å¼\n                if (!GM_getValue('menu_thread')) {if (curSite.thread) {curSite = {SiteTypeID: 0}; pageNum.now = 1;}} // å¸–å­å†…è‡ªåŠ¨ç¿»é¡µåˆ¤æ–­\n                if (GM_getValue('menu_page_number')) {pageNumber('add');} else {pageNumber('set');} // æ˜¾ç¤ºé¡µç \n                pausePageEvent(); // å·¦é”®åŒå‡»ç½‘é¡µç©ºç™½å¤„æš‚åœç¿»é¡µ\n\n                pageLoading();\n            })\n        } else if (webType === 2) {\n            window.addEventListener('urlchange', function(){\n                lp = location.pathname;\n                //console.log(nowLocation, location.href)\n                if (nowLocation == location.href) return\n                setTimeout(function(){\n                    nowLocation = location.href; curSite = {SiteTypeID: 0}; pageNum.now = 1; // é‡ç½®è§„åˆ™+é¡µç \n                    discuz_(); // é‡æ–°åˆ¤æ–­è§„åˆ™\n\n                    if (!GM_getValue('menu_thread')) {if (curSite.thread) {curSite = {SiteTypeID: 0}; pageNum.now = 1;}} // å¸–å­å†…è‡ªåŠ¨ç¿»é¡µåˆ¤æ–­\n                    if (curSite.style) {insStyle(curSite.style)} // æ’å…¥ Style CSS æ ·å¼\n                    if (GM_getValue('menu_page_number')) {pageNumber('add');} else {pageNumber('set');} // æ˜¾ç¤ºé¡µç \n                    pausePageEvent(); // å·¦é”®åŒå‡»ç½‘é¡µç©ºç™½å¤„æš‚åœç¿»é¡µ\n\n                    pageLoading();\n                }, 500)\n            })\n        } else if (webType === 3) {\n            window.addEventListener('urlchange', function(){\n                lp = location.pathname;\n                if (nowLocation == location.href) return\n                nowLocation = location.href; curSite = {SiteTypeID: 0}; pageNum.now = 1; // é‡ç½®è§„åˆ™+é¡µç \n                DBSite.flarum.url(); // é‡æ–°åˆ¤æ–­è§„åˆ™\n\n                if (curSite.style) {insStyle(curSite.style)} // æ’å…¥ Style CSS æ ·å¼\n                if (GM_getValue('menu_page_number')) {pageNumber('add');} else {pageNumber('set');} // æ˜¾ç¤ºé¡µç \n                pausePageEvent(); // å·¦é”®åŒå‡»ç½‘é¡µç©ºç™½å¤„æš‚åœç¿»é¡µ\n\n                pageLoading();\n            })\n        }\n    }\n    // æ’å…¥ Style CSS æ ·å¼\n    if (curSite.style) insStyle(curSite.style)\n\n    // è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n    pageLoading();\n\n\n    // --------------------------------------------------------\n\n\n    // [Discuz! è®ºå›] åˆ¤æ–­å„ç‰ˆå—å¸–å­åˆ—è¡¨ç±»å‹\n    function discuzForum(m) {\n        if (m == 'm') { // æ‰‹æœºç‰ˆé¡µé¢\n            if (getCSS('a.loadmore')) {\n                curSite = DBSite.discuz_m_forum;\n            } else if (getCSS('.threadlist')) {\n                curSite = DBSite.discuz_m; curSite.pager.pageE = '.threadlist > ul > li';\n            } else if (getCSS('[id^=\"normalthread_\"]')) {\n                curSite = DBSite.discuz_m; curSite.pager.pageE = '[id^=\"normalthread_\"]:not(.ZDlist)';\n            }\n            if (curSite.SiteTypeID !== 0 && location.hostname === 'keylol.com') {curSite.history = false; urlC = true;}\n        } else {\n            if (getCSS('#autopbn')) { //         åˆ¤æ–­æ˜¯å¦æœ‰ [ä¸‹ä¸€é¡µ] æŒ‰é’®\n                curSite = DBSite.discuz_forum;\n            } else if (getCSS('#waterfall')) { //           åˆ¤æ–­æ˜¯å¦ä¸ºå›¾ç‰‡æ¨¡å¼\n                if (!getCSS('#pgbtn.pgbtn>a[href^=javascript]')) { //       å¦‚æœå„ç‰ˆå—å¸–å­åˆ—è¡¨å·²å­˜åœ¨è¿™ä¸ªå…ƒç´ ï¼Œè¯´æ˜è‡ªå¸¦äº†æ— ç¼ç¿»é¡µ\n                    curSite = DBSite.discuz_waterfall; waterfallStyle(); // å›¾ç‰‡æ¨¡å¼åˆ—è¡¨æ ·å¼é¢„å¤„ç†\n                }\n            } else {\n                curSite = DBSite.discuz_guide;\n            }\n        }\n    }\n    // [Discuz! è®ºå›] åˆ¤æ–­æ‰‹æœºç‰ˆå¸–å­å†…\n    function discuzThreadM() {\n        if (getCSS('[id^=\"pid\"]')) {\n            curSite = DBSite.discuz_m; curSite.pager.pageE = '[id^=\"pid\"], [id^=\"pid\"]+div:not([id=\"post_new\"])'\n        } else if (getCSS('[id^=\"post_\"]')) {\n            curSite = DBSite.discuz_m; curSite.pager.pageE = '[id^=\"post_\"]';\n        }\n        if (curSite.SiteTypeID !== 0 && location.hostname === 'keylol.com') {curSite.history = false; urlC = true;}\n    }\n    function discuz_() {\n        if (getCSS('body[id=\"nv_forum\"][class^=\"pg_\"][onkeydown*=\"27\"]')) {\n            switch (getCSS('body[id=\"nv_forum\"][class^=\"pg_\"][onkeydown*=\"27\"]').className) {\n                case 'pg_forumdisplay': // < å„ç‰ˆå—å¸–å­åˆ—è¡¨ >\n                    discuzForum(); break;\n                case 'pg_viewthread': //   < å¸–å­å†… >\n                    curSite = DBSite.discuz_thread; break;\n                case 'pg_guide': //        < å¯¼è¯»å¸–å­åˆ—è¡¨ç­‰ >\n                    curSite = DBSite.discuz_guide; break;\n                case 'pg_collection': //   < æ·˜è´´åˆ—è¡¨ >\n                    curSite = DBSite.discuz_collection; break;\n            }\n        }\n        // å¦‚æœä¸Šé¢æ²¡æœ‰åŒ¹é…çš„åˆ™ç»§ç»­                  < æœç´¢ç»“æœ >\n        if (curSite.SiteTypeID === 0) {\n            if (indexOF('search') || getCSS('body[id=\"nv_search\"][onkeydown*=\"27\"]')) {\n                if (indexOF('mobile=2', 's')) { // æ‰‹æœºç‰ˆé¡µé¢\n                    curSite = DBSite.discuz_m; curSite.pager.pageE = '.threadlist > ul > li'; urlC = true;\n                } else {\n                    curSite = DBSite.discuz_search;\n                }\n            }\n        }\n        // å¦‚æœä¸Šé¢æ²¡æœ‰åŒ¹é…çš„åˆ™ç»§ç»­\n        if (curSite.SiteTypeID === 0) {\n            if (indexOF('.html')) { //                   åˆ¤æ–­æ˜¯ä¸æ˜¯é™æ€ç½‘é¡µï¼ˆ.html ç»“å°¾ï¼‰\n                if (indexOF('/forum-')) { //             < å„ç‰ˆå—å¸–å­åˆ—è¡¨ >\n                    if (getXpath('//head/meta[@name=\"applicable-device\" and @content=\"mobile\"] | //head/title[contains(text(), \"æ‰‹æœºç‰ˆ\")] | //head/link[contains(@href, \"/mobile/\")] | //head/script[contains(@src, \"/mobile/\")]')) { // æ‰‹æœºç‰ˆé¡µé¢\n                        discuzForum('m');\n                    } else {\n                        discuzForum();\n                    }\n                } else if (indexOF('/thread-')) { //     < å¸–å­å†… >\n                    if (getXpath('//head/meta[@name=\"applicable-device\" and @content=\"mobile\"] | //head/title[contains(text(), \"æ‰‹æœºç‰ˆ\")] | //head/link[contains(@href, \"/mobile/\")] | //head/script[contains(@src, \"/mobile/\")]')) { // æ‰‹æœºç‰ˆé¡µé¢\n                        discuzThreadM();\n                    } else {\n                        curSite = DBSite.discuz_thread;\n                    }\n                }\n            }\n            if (indexOF('/archiver/')) { //     < å½’æ¡£é¡µ >\n                curSite = DBSite.discuz_archiver;\n            }\n        }\n        // å¦‚æœä¸Šé¢æ²¡æœ‰åŒ¹é…çš„åˆ™ç»§ç»­\n        if (curSite.SiteTypeID === 0) {\n            if (indexOF('mod=forumdisplay', 's') || indexOF('forumdisplay.php')) { //      < å„ç‰ˆå—å¸–å­åˆ—è¡¨ >\n                if (indexOF('mobile=2', 's') || indexOF('mobile=yes', 's') || getXpath('//head/meta[@name=\"applicable-device\" and @content=\"mobile\"] | //head/title[contains(text(), \"æ‰‹æœºç‰ˆ\")] | //head/link[contains(@href, \"/mobile/\")] | //head/script[contains(@src, \"/mobile/\")]')) { // æ‰‹æœºç‰ˆé¡µé¢\n                    discuzForum('m');\n                } else {\n                    discuzForum();\n                }\n            } else if (indexOF('mod=viewthread', 's') || indexOF('viewthread.php')) { // < å¸–å­å†… >\n                if (indexOF('mobile=2', 's') || getXpath('//head/meta[@name=\"applicable-device\" and @content=\"mobile\"] | //head/title[contains(text(), \"æ‰‹æœºç‰ˆ\")] | //head/link[contains(@href, \"/mobile/\")] | //head/script[contains(@src, \"/mobile/\")]')) { // æ‰‹æœºç‰ˆé¡µé¢\n                    discuzThreadM();\n                } else {\n                    curSite = DBSite.discuz_thread;\n                }\n            } else if (indexOF('mod=guide', 's')) { //      < å¯¼è¯»å¸–å­åˆ—è¡¨ >\n                curSite = DBSite.discuz_guide;\n            } else if(indexOF('mod=space', 's') && indexOF('do=thread', 's')) { // åˆ«äººçš„ä¸»é¢˜/å›å¤\n                curSite = DBSite.discuz_youspace;\n            } else if (indexOF('mod=collection', 's')) { // < æ·˜è´´åˆ—è¡¨ >\n                curSite = DBSite.discuz_collection;\n            } else if (getCSS('#threadlist, tbody[id^=\"normalthread_\"]')) { //          < éƒ¨åˆ†è®ºå›çš„å„æ¿å— URL æ˜¯è‡ªå®šä¹‰çš„ >\n                discuzForum();\n            } else if (getCSS('#postlist, form>.viewthread')) { //            < éƒ¨åˆ†è®ºå›çš„å¸–å­å†… URL æ˜¯è‡ªå®šä¹‰çš„ >\n                curSite = DBSite.discuz_thread;\n            } else if (isMobile()) { //                     æ‰‹æœºç‰ˆåˆ¤æ–­\n                discuzForum('m');\n                if (curSite.SiteTypeID === 0) discuzThreadM();\n            }\n        }\n    }\n    // [Discuz! è®ºå›] å›¾ç‰‡æ¨¡å¼åˆ—è¡¨æ ·å¼é¢„å¤„ç†\n    function waterfallStyle() {\n        let waterfall_ = getCSS('#waterfall > li:first-child');\n        if (waterfall_ && waterfall_.style && waterfall_.style.width) {\n            insStyle(`#waterfall {height: auto !important; width: 100% !important;} #waterfall > li {width: ${waterfall_.style.width} !important; float: left !important; position: inherit !important; left: auto !important; top: auto !important;}`);\n        } else {\n            waterfall_ = getAllCSS('#waterfall > dl');\n            if (waterfall_ && waterfall_.length > 5) {\n                insStyle(`#waterfall > dl {display: unset !important;}`);\n            }\n        }\n    }\n\n\n    // [NexusMods] è·å–ä¸‹ä¸€é¡µåœ°å€\n    function nexusmods_nextL() {\n        if (getCSS('.nexus-ui-blocker') || !getCSS('.pagination a.page-selected')) return\n        let modList;\n        if (indexOF('/news')) {modList = RH_NewsTabContent;} else if (indexOF('/users/') && indexOF('tab=user+files','s')) {modList = RH_UserModsTab;} else if (indexOF('/mods/') && indexOF('tab=posts','s')) {modList = RH_CommentContainer;} else {modList = RH_ModList;}\n        if (!modList) return\n        let out_items = JSON.stringify(modList.out_items).replace(/{|}|\"/g,''),\n            nextNum = getXpath('//div[contains(@class, \"pagination\")][1]//a[contains(@class, \"page-selected\")]/../following-sibling::li[1]/a');\n        var url = '';\n        if (nextNum && nextNum.innerText) {\n            nextNum = nextNum.innerText;\n            if (out_items.indexOf('page:') > -1) {out_items = out_items.replace(/page:\\d+/, `page:${nextNum}`);} else {out_items += `,page:${nextNum}`;}\n            if (!indexOF(/\\/(mods|users)\\/\\d+/)) { // MOD é¡µ/ç”¨æˆ·é¡µ ä¸éœ€è¦è¿™äº›\n                let categories = modList.out_items.categories, tags_yes = modList.out_items.tags_yes, search = modList.out_items.search, out_items_sub = '';\n                if (categories && categories != []) { // åˆ†ç±»é¡µ\n                    if (modList.out_items.categories instanceof Array) {// å•ç‹¬ä½¿ç”¨æ—¶ä¸ºæ•°ç»„\n                        for (let i = 0; i < categories.length; i++) {out_items_sub += `categories[]:${categories[i]},`;}\n                    } else {\n                        for (let key in modList.out_items.categories) {out_items_sub += `categories[${key}]:${modList.out_items.categories[key]},`;}\n                    }\n                    if (out_items.indexOf('categories:') > -1) out_items = out_items.replace('categories:', out_items_sub)\n                }; out_items_sub='';\n                if (tags_yes && tags_yes != []) { // æ ‡ç­¾é¡µ\n                    if (modList.out_items.tags_yes instanceof Array) {// å•ç‹¬ä½¿ç”¨æ—¶ä¸ºæ•°ç»„\n                        for (let i = 0; i < tags_yes.length; i++) {out_items_sub += `tags_yes[]:${tags_yes[i]},`;}\n                    } else {\n                        for (let key in modList.out_items.tags_yes) {out_items_sub += `tags_yes[${key}]:${modList.out_items.tags_yes[key]},`;}\n                    }\n                    if (out_items.indexOf('tags_yes:') > -1) out_items = out_items.replace('tags_yes:', out_items_sub)\n                }; out_items_sub='';\n                if (search && search.length != 0) { // æœç´¢é¡µ\n                    for (let key in modList.out_items.search) {out_items_sub += `search[${key}]:${modList.out_items.search[key]},`;}\n                    if (out_items.indexOf('search:') > -1) out_items = out_items.replace('search:',out_items_sub)\n                }; out_items_sub='';\n            }\n            //console.log(`https://www.nexusmods.com${modList.uri}?RH_${modList.id}=${out_items}`)\n            return `https://www.nexusmods.com${modList.uri}?RH_${modList.id}=${out_items}`\n        }\n        return ''\n    }\n    // [NexusMods] çš„æ’å…¥å‰å‡½æ•°ï¼ˆéšè—åº•éƒ¨å…ƒç´ ï¼‰\n    function nexusmods_bF(pageE) {\n        pageE.forEach(function (one) {\n            let now = one.querySelector('.mod-tile-left');\n            if (now) {\n                let downloadCount = now.querySelector('.downloadcount > span.flex-label');\n                if (downloadCount) {\n                    if (GlobalModStats[now.dataset.gameId] && GlobalModStats[now.dataset.gameId][now.dataset.modId]) {\n                        downloadCount.textContent = shortFormat(parseInt(GlobalModStats[now.dataset.gameId][now.dataset.modId].total));\n                    }\n                }\n            }\n        });\n        return pageE\n    }\n\n\n    // [Mangabz æ¼«ç”»] åˆå§‹åŒ–ï¼ˆè°ƒæ•´æœ¬è¯å›¾ç‰‡ï¼‰\n    function mangabz_init() {\n        if (getCSS('#showimage')) getCSS('#showimage').removeAttribute('oncontextmenu');\n        if (getCSS('#cp_img')) getCSS('#cp_img').removeAttribute('oncontextmenu');\n        if (getCSS('#barChapter')) getCSS('#barChapter').removeAttribute('oncontextmenu');\n        if (getCSS('#cp_image')) {\n            getCSS('#cp_image').removeAttribute('oncontextmenu');\n            getCSS('#cp_image').removeAttribute('style');\n            getCSS('#cp_image').removeAttribute('id');\n        }\n    }\n    // [Mangabz æ¼«ç”»] è·å–ä¸‹ä¸€é¡µåœ°å€\n    function mangabz_nextL() {\n        var url = '';\n        if (MANGABZ_PAGE === MANGABZ_IMAGE_COUNT) { // ä¸‹ä¸€è¯\n            if (getNextE_('//a[./img[contains(@src, \"icon_xiayizhang\")]]')) getPageE_(curSite.pageUrl); // è®¿é—®ä¸‹ä¸€è¯ URL è·å–\n        } else { // ä¸‹ä¸€é¡µ\n            if (!mkey) var mkey = '';\n            url = location.origin + location.pathname + 'chapterimage.ashx' + `?cid=${MANGABZ_CID}&page=${MANGABZ_PAGE + 1}&key=${(mkey)}&_cid=${MANGABZ_CID}&_mid=${MANGABZ_MID}&_dt=${MANGABZ_VIEWSIGN_DT}&_sign=${MANGABZ_VIEWSIGN}`\n            if (url === curSite.pageUrl) return\n            curSite.pageUrl = url\n            //console.log(curSite.pageUrl)\n            getPageE_(curSite.pageUrl, 'text', 'GET', '', 'Next'); // è®¿é—®ä¸‹ä¸€é¡µ URL è·å–\n        }\n    }\n    // [Mangabz æ¼«ç”»] æ’å…¥æ•°æ®\n    function mangabz_insertE(pageE, type) {\n        if (pageE) {\n            if (type === 'Next') { // ä¸‹ä¸€é¡µ\n                let imgArr = eval(pageE),\n                    _img = '';\n                for (let now of imgArr) {_img += `<img src=\"${now}\">`;}\n                if (_img) {\n                    getOne(curSite.pager.insertP[0]).insertAdjacentHTML(getAddTo(curSite.pager.insertP[1]), _img); // å°† img æ ‡ç­¾æ’å…¥åˆ°ç½‘é¡µä¸­\n                    MANGABZ_PAGE += imgArr.length;\n                    addHistory(pageE, document.title, location.origin + MANGABZ_CURL.substring(0, MANGABZ_CURL.length - 1) + '-p' + MANGABZ_PAGE + '/');\n                }\n            } else { // ä¸‹ä¸€è¯\n                // æ’å…¥ <script> æ ‡ç­¾\n                insScript('html:not([dir]) > head > script:not([src])', pageE);\n                addHistory(pageE);\n                pageNumIncrement()\n                replaceElems(pageE)\n                MANGABZ_PAGE = 0;\n                mangabz_nextL();\n            }\n        }\n    }\n\n\n    // [åŠ¨æ¼«å±‹] è·å–ä¸‹ä¸€é¡µåœ°å€\n    function dm5_nextL() {\n        var url = '';\n        if (DM5_PAGE === DM5_IMAGE_COUNT) { // ä¸‹ä¸€è¯\n            if (getNextE_('//div[@class=\"view-paging\"]//a[text()=\"ä¸‹ä¸€ç« \"]')) getPageE_(curSite.pageUrl); // è®¿é—®ä¸‹ä¸€è¯ URL è·å–\n        } else { // ä¸‹ä¸€é¡µ\n            if (!mkey) var mkey = '';\n            url = location.origin + location.pathname + 'chapterfun.ashx' + `?cid=${DM5_CID}&page=${DM5_PAGE + 1}&key=${(mkey)}&language=1&gtk=6&_cid=${DM5_CID}&_mid=${DM5_MID}&_dt=${DM5_VIEWSIGN_DT}&_sign=${DM5_VIEWSIGN}`\n            if (url === curSite.pageUrl) return\n            curSite.pageUrl = url\n            //console.log(curSite.pageUrl)\n            getPageE_(curSite.pageUrl, 'text', 'GET', '', 'Next'); // è®¿é—®ä¸‹ä¸€é¡µ URL è·å–\n        }\n    }\n    // [åŠ¨æ¼«å±‹] æ’å…¥æ•°æ®\n    function dm5_insertE(pageE, type) {\n        if (pageE) {\n            if (type === 'Next') { // ä¸‹ä¸€é¡µ\n                let imgArr = eval(pageE),\n                    _img = '';\n                for (let now of imgArr) {_img += `<img src=\"${now}\">`;}\n                if (_img) {\n                    getOne(curSite.pager.insertP[0]).insertAdjacentHTML(getAddTo(curSite.pager.insertP[1]), _img); // å°† img æ ‡ç­¾æ’å…¥åˆ°ç½‘é¡µä¸­\n                    DM5_PAGE += imgArr.length;\n                    addHistory(pageE, document.title, location.origin + DM5_CURL.substring(0, DM5_CURL.length - 1) + '-p' + DM5_PAGE + '/');\n                }\n            } else { // ä¸‹ä¸€è¯\n                // æ’å…¥ <script> æ ‡ç­¾\n                insScript('html:not([dir])>head>script:not([src])', pageE);\n                addHistory(pageE);\n                pageNumIncrement()\n                replaceElems(pageE)\n                DM5_PAGE = 0;\n                dm5_nextL();\n            }\n        }\n    }\n\n\n    // [Xmanhua æ¼«ç”»] è·å–ä¸‹ä¸€é¡µåœ°å€\n    function xmanhua_nextL() {\n        var url = '';\n        if (unsafeWindow[unsafeWindow.MH_PREFIX23+'PAGE'] === unsafeWindow[unsafeWindow.MH_PREFIX23+'IMAGE_COUNT']) { // ä¸‹ä¸€è¯\n            if (getNextE_('//a[./img[contains(@src, \"reader-bottom-right-2.png\")]]')) getPageE_(curSite.pageUrl); // è®¿é—®ä¸‹ä¸€è¯ URL è·å–\n        } else { // ä¸‹ä¸€é¡µ\n            if (!mkey) var mkey = '';\n            url = location.origin + location.pathname + 'chapterimage.ashx' + `?cid=${unsafeWindow[unsafeWindow.MH_PREFIX23+'CID']}&page=${unsafeWindow[unsafeWindow.MH_PREFIX23+'PAGE'] + 1}&key=${(mkey)}&_cid=${unsafeWindow[unsafeWindow.MH_PREFIX23+'_CID']}&_mid=${unsafeWindow[unsafeWindow.MH_PREFIX23+'MID']}&_dt=${unsafeWindow[unsafeWindow.MH_PREFIX23+'VIEWSIGN_DT']}&_sign=${unsafeWindow[unsafeWindow.MH_PREFIX23+'VIEWSIGN']}`\n            if (url === curSite.pageUrl) return\n            curSite.pageUrl = url\n            //console.log(curSite.pageUrl)\n            getPageE_(curSite.pageUrl, 'text', 'GET', '', 'Next'); // è®¿é—®ä¸‹ä¸€é¡µ URL è·å–\n        }\n    }\n    // [Xmanhua æ¼«ç”»] æ’å…¥æ•°æ®\n    function xmanhua_insertE(pageE, type) {\n        if (pageE) {\n            if (type === 'Next') { // ä¸‹ä¸€é¡µ\n                let imgArr = eval(pageE),\n                    _img = '';\n                for (let now of imgArr) {_img += `<img src=\"${now}\">`;}\n                if (_img) {\n                    getOne(curSite.pager.insertP[0]).insertAdjacentHTML(getAddTo(curSite.pager.insertP[1]), _img); // å°† img æ ‡ç­¾æ’å…¥åˆ°ç½‘é¡µä¸­\n                    unsafeWindow[unsafeWindow.MH_PREFIX23+'PAGE'] += imgArr.length;\n                    addHistory(pageE, document.title, location.origin + unsafeWindow[unsafeWindow.MH_PREFIX23+'CURL'].substring(0, unsafeWindow[unsafeWindow.MH_PREFIX23+'CURL'].length - 1) + '-p' + unsafeWindow[unsafeWindow.MH_PREFIX23+'PAGE'] + '/');\n                }\n            } else { // ä¸‹ä¸€è¯\n                // æ’å…¥ <script> æ ‡ç­¾\n                insScript('html:not([dir]) > head > script:not([src])', pageE);\n                addHistory(pageE);\n                pageNumIncrement()\n                replaceElems(pageE)\n                unsafeWindow[unsafeWindow.MH_PREFIX23+'PAGE'] = 0;\n                xmanhua_nextL();\n            }\n        }\n    }\n\n\n    // --------------------------------------------------------\n\n\n    // è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n    function pageLoading() {\n        if (curSite.SiteTypeID === 0 || !curSite.pager) return\n        if (curSite.pager.type === undefined) curSite.pager.type = 1; // é»˜è®¤ç¿»é¡µæ¨¡å¼ 1\n        if (curSite.pager.scrollD === undefined) curSite.pager.scrollD = 2000; // é»˜è®¤ç¿»é¡µè§¦å‘çº¿ 2000\n        if (curSite.pager.interval === undefined) curSite.pager.interval = 500; // é»˜è®¤é—´éš”æ—¶é—´ 500ms\n        /*if (curSite.pager.replaceE === undefined) { // å¦‚æœ replaceE ä¸å­˜åœ¨ï¼Œåˆ™é»˜è®¤æ›¿æ¢ nextL\n            if ((curSite.pager.type === 1 || curSite.pager.type === 3 || curSite.pager.type === 6) && curSite.pager.nextL && typeof curSite.pager.nextL !== 'function' && curSite.pager.nextL.search(/^js;/i) !== 0) {\n                curSite.pager.replaceE = curSite.pager.nextL\n            }\n        }*/\n        //console.log(curSite)\n        curSite.pageUrl = ''; // ä¸‹ä¸€é¡µURL\n        windowScroll(function (direction, e) {\n            // ä¸‹æ»‘ ä¸” æœªæš‚åœç¿»é¡µ ä¸” SiteTypeID > 0 æ—¶ï¼Œæ‰å‡†å¤‡ç¿»é¡µ\n            if (direction != 'down' || !pausePage || curSite.SiteTypeID == 0) return\n\n            // ç¿»é¡µæ¨¡å¼ 5 ä¸”ä¸ºæ¡†æ¶å†…æ—¶ï¼Œè¦åˆ¤æ–­é¡¶å±‚æ˜¯å¦é€šè¿‡é¡µç æš‚åœç¿»é¡µäº†\n            if (curSite.pager.type == 5 && self != top && window.top.document.xiu_pausePage == false) return\n\n            let scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop,\n                scrollHeight = window.innerHeight || document.documentElement.clientHeight,\n                scrollD = curSite.pager.scrollD;\n            // <<<<< ç¿»é¡µç±»å‹ 3ï¼ˆä¾é  [åŸºå‡†å…ƒç´ ] ä¸ [æµè§ˆå™¨å¯è§†åŒºåŸŸåº•éƒ¨] ä¹‹é—´çš„è·ç¦»ç¼©å°æ¥è§¦å‘ç¿»é¡µï¼‰>>>>>\n            if (curSite.pager.type === 3) {\n                if (!curSite.pager.scrollE) curSite.pager.scrollE = curSite.pager.replaceE; // é»˜è®¤åŸºå‡†å…ƒç´ æ˜¯é¡µç \n                let scrollE = getOne(curSite.pager.scrollE);\n                //console.log(scrollE.offsetTop, scrollE.offsetTop - (scrollTop + scrollHeight), scrollD, scrollTop + scrollHeight, curSite.SiteTypeID)\n                if (scrollE.offsetTop - (scrollTop + scrollHeight) <= scrollD) {intervalPause(); checkURL(getPageE);}\n\n            } else if (document.documentElement.scrollHeight <= scrollHeight + scrollTop + scrollD) {\n                // <<<<< ç¿»é¡µç±»å‹ 1ï¼ˆç”±è„šæœ¬å®ç°è‡ªåŠ¨æ— ç¼ç¿»é¡µï¼‰>>>>>\n                if (curSite.pager.type === 1) {\n                    intervalPause(); checkURL(getPageE);\n\n                    // <<<<< ç¿»é¡µç±»å‹ 2ï¼ˆç½‘ç«™è‡ªå¸¦äº†è‡ªåŠ¨æ— ç¼ç¿»é¡µåŠŸèƒ½ï¼Œåªéœ€è¦ç‚¹å‡»ä¸‹ä¸€é¡µæŒ‰é’®å³å¯ï¼‰>>>>>\n                } else if (curSite.pager.type === 2) {\n                    let autopbn = getOne(curSite.pager.nextL);\n                    if (!autopbn) return\n                    if (curSite.pager.isHidden && isHidden(autopbn)) return // å¦‚æœ isHidden = trueï¼Œé‚£ä¹ˆéœ€è¦åˆ¤æ–­å…ƒç´ æ˜¯å¦éšè—\n                    if (curSite.pager.nextText) {\n                        //console.log(curSite.pager.nextText, autopbn.innerText, autopbn)\n                        // æŒ‰é’®æ–‡æœ¬ï¼Œå½“æŒ‰é’®æ–‡æœ¬ = è¯¥æ–‡æœ¬æ—¶ï¼Œæ‰ä¼šç‚¹å‡»æŒ‰é’®åŠ è½½ä¸‹ä¸€é¡µ\n                        if (autopbn.innerText === curSite.pager.nextText) {autopbn.click(); pageNumIncrement();}\n                    } else if (curSite.pager.nextTextOf) {\n                        // æŒ‰é’®æ–‡æœ¬çš„ä¸€éƒ¨åˆ†ï¼Œå½“æŒ‰é’®æ–‡æœ¬åŒ…å«è¯¥æ–‡æœ¬æ—¶ï¼Œæ‰ä¼šç‚¹å‡»æŒ‰é’®åŠ è½½ä¸‹ä¸€é¡µ\n                        if (autopbn.innerText.indexOf(curSite.pager.nextTextOf) > -1) {autopbn.click(); pageNumIncrement();}\n                    } else if (curSite.pager.nextHTML) {\n                        // æŒ‰é’®å†…å…ƒç´ ï¼Œå½“æŒ‰é’®å†…å…ƒç´  = è¯¥å…ƒç´ å†…å®¹æ—¶ï¼Œæ‰ä¼šç‚¹å‡»æŒ‰é’®åŠ è½½ä¸‹ä¸€é¡µ\n                        if (autopbn.innerHTML === curSite.pager.nextHTML) {autopbn.click(); pageNumIncrement();}\n                    } else {\n                        intervalPause();\n                        // å¦‚æœæ²¡æœ‰æŒ‡å®šæŒ‰é’®æ–‡å­—å°±ç›´æ¥ç‚¹å‡»\n                        autopbn.click(); pageNumIncrement();\n                    }\n\n                    // <<<<< ç¿»é¡µç±»å‹ 4ï¼ˆéƒ¨åˆ†ç®€å•çš„åŠ¨æ€åŠ è½½ç±»ç½‘ç«™ï¼‰>>>>>\n                } else if (curSite.pager.type === 4) {\n                    intervalPause(); if (typeof curSite.pager.nextL == 'function') {curSite.pager.nextL();} else if (getNextE_(curSite.pager.nextL)) {getPageE_(curSite.pageUrl);}\n\n                    // <<<<< ç¿»é¡µç±»å‹ 5ï¼ˆæ’å…¥ iframe æ–¹å¼æ¥åŠ è½½ä¸‹ä¸€é¡µï¼‰>>>>>\n                } else if (curSite.pager.type === 5) {\n                    checkURL(insIframe);\n\n                    // <<<<< ç¿»é¡µç±»å‹ 6ï¼ˆé€šè¿‡ iframe è·å–ä¸‹ä¸€é¡µåŠ¨æ€åŠ è½½å†…å®¹ï¼‰>>>>>\n                } else if (curSite.pager.type === 6) {checkURL(insIframe_);}\n            }\n        });\n\n        function intervalPause() {\n            if (curSite.pager.interval) {\n                pausePage = false\n                setTimeout(function(){pausePage = true;}, curSite.pager.interval)\n            }\n        }\n    }\n\n    // ç¿»é¡µç±»å‹ 1/3\n    function getPageE(url) {\n        if (!curSite.gmxhr) {\n            // ä¾é åŸç”Ÿ XMLHttpRequest å°è¯•è§£å†³å› ç¼ºå¤±è·¨åŸŸ cookie å¯¼è‡´çš„é—®é¢˜ï¼ˆæ¯”å¦‚ä¸€äº›ä½¿ç”¨ Cloudflare CDN äººæœºéªŒè¯çš„ç½‘ç«™ï¼Œä¼šå‡ºç°è„šæœ¬åå°è·å–åˆ°äººæœºéªŒè¯é¡µé¢ï¼‰\n            const xhr = new XMLHttpRequest();\n            xhr.open('GET', url, true);\n            xhr.overrideMimeType('text/html; charset=' + (document.characterSet||document.charset||document.inputEncoding));\n\n            if (curSite.xRequestedWith === true) {xhr.setRequestHeader('x-requested-with', 'XMLHttpRequest')}\n            //(curSite.noReferer === true) ? xhr.setRequestHeader('Referer', ''):xhr.setRequestHeader('Referer', location.href)\n            xhr.setRequestHeader('Accept', 'text/html,application/xhtml+xml,application/xml')\n\n            xhr.timeout = 5000;\n            xhr.onload = function() {\n                try {\n                    //console.log('URLï¼š' + url, 'æœ€ç»ˆ URLï¼š' + xhr.responseURL, 'è¿”å›å†…å®¹ï¼š' + xhr.responseText)\n                    processElems(createDocumentByString(xhr.responseText));\n                } catch (e) {\n                    console.error('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - å¤„ç†è·å–åˆ°çš„ä¸‹ä¸€é¡µå†…å®¹æ—¶å‡ºç°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼\\n', e, '\\nURLï¼š' + url, '\\næœ€ç»ˆ URLï¼š' + xhr.responseURL, '\\nè¿”å›çŠ¶æ€ï¼š' + xhr.statusText, '\\nè¿”å›å†…å®¹ï¼š' + xhr.responseText);\n                }\n            };\n            xhr.onerror = function() {\n                console.log('URLï¼š' + url, xhr.statusText)\n                GM_notification({text: 'âŒ è·å–ä¸‹ä¸€é¡µå¤±è´¥...', timeout: 5000});\n            };\n            xhr.ontimeout = function() {\n                setTimeout(function(){curSite.pageUrl = '';}, 3000)\n                console.log('URLï¼š' + url, xhr.statusText)\n                GM_notification({text: 'âŒ è·å–ä¸‹ä¸€é¡µè¶…æ—¶ï¼Œå¯ 3 ç§’åå†æ¬¡æ»šåŠ¨ç½‘é¡µé‡è¯•ï¼ˆæˆ–å°è¯•åˆ·æ–°ç½‘é¡µï¼‰...', timeout: 5000});\n            };\n            xhr.send();\n        } else {\n            GM_xmlhttpRequest({\n                url: url,\n                method: 'GET',\n                overrideMimeType: 'text/html; charset=' + (document.characterSet||document.charset||document.inputEncoding),\n                headers: {\n                    'x-requested-with': (curSite.xRequestedWith === true) ? 'XMLHttpRequest':null,\n                    'Referer': (curSite.noReferer === true) ? null:location.href,\n                    'Accept': 'text/html,application/xhtml+xml,application/xml'\n                },\n                timeout: 5000,\n                onload: function (response) {\n                    try {\n                        //console.log('URLï¼š' + url, 'æœ€ç»ˆ URLï¼š' + response.finalUrl, 'è¿”å›å†…å®¹ï¼š' + response.responseText)\n                        processElems(createDocumentByString(response.responseText));\n                    } catch (e) {\n                        console.error('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - å¤„ç†è·å–åˆ°çš„ä¸‹ä¸€é¡µå†…å®¹æ—¶å‡ºç°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼\\n', e, '\\nURLï¼š' + url, '\\næœ€ç»ˆ URLï¼š' + response.finalUrl, '\\nè¿”å›çŠ¶æ€ï¼š' + response.statusText, '\\nè¿”å›å†…å®¹ï¼š' + response.responseText);\n                    }\n                },\n                onerror: function (response) {\n                    console.log('URLï¼š' + url, response)\n                    GM_notification({text: 'âŒ è·å–ä¸‹ä¸€é¡µå¤±è´¥...', timeout: 5000});\n                },\n                ontimeout: function (response) {\n                    setTimeout(function(){curSite.pageUrl = '';}, 3000)\n                    console.log('URLï¼š' + url, response)\n                    GM_notification({text: 'âŒ è·å–ä¸‹ä¸€é¡µè¶…æ—¶ï¼Œå¯ 3 ç§’åå†æ¬¡æ»šåŠ¨ç½‘é¡µé‡è¯•ï¼ˆæˆ–å°è¯•åˆ·æ–°ç½‘é¡µï¼‰...', timeout: 5000});\n                }\n            });\n        }\n    }\n    // ç¿»é¡µç±»å‹ 4\n    function getPageE_(url, type = '', method = 'GET', data = '', type2) {\n        let mimeType,accept;\n        switch (type) {\n            case 'json':\n                accept = 'application/json'; mimeType = 'application/json; charset=' + (document.characterSet||document.charset||document.inputEncoding); break;\n            case 'text':\n                accept = 'text/plain'; mimeType = 'text/plain; charset=' + (document.characterSet||document.charset||document.inputEncoding); break;\n            default:\n                accept = 'text/html,application/xhtml+xml,application/xml'; mimeType = 'text/html; charset=' + (document.characterSet||document.charset||document.inputEncoding);\n        }\n\n        GM_xmlhttpRequest({\n            url: url,\n            method: method,\n            data: data,\n            responseType: type,\n            overrideMimeType: mimeType,\n            headers: {\n                'Referer': (curSite.noReferer === true) ? null:location.href,\n                'Content-Type': (method === 'POST') ? 'application/x-www-form-urlencoded':'',\n                'Accept': accept\n            },\n            timeout: 5000,\n            onload: function (response) {\n                try {\n                    //console.log('æœ€ç»ˆ URLï¼š' + response.finalUrl, 'è¿”å›å†…å®¹ï¼š' + response.responseText)\n                    switch (type) {\n                        case 'json':\n                            curSite.pager.insertE(response.response, type2);\n                            break;\n                        case 'text':\n                            curSite.pager.insertE(response.responseText, type2)\n                            break;\n                        default:\n                            curSite.pager.insertE(createDocumentByString(response.responseText), type2)\n                    }\n                } catch (e) {\n                    console.log(e);\n                }\n            },\n            onerror: function (response) {\n                setTimeout(function(){curSite.pageUrl = '';}, 3000)\n                console.log('URLï¼š' + url, response)\n                GM_notification({text: 'âŒ è·å–ä¸‹ä¸€é¡µå¤±è´¥ï¼Œå¯ 3 ç§’åå†æ¬¡æ»šåŠ¨ç½‘é¡µé‡è¯•ï¼ˆæˆ–å°è¯•åˆ·æ–°ç½‘é¡µï¼‰...', timeout: 5000});\n            },\n            ontimeout: function (response) {\n                setTimeout(function(){curSite.pageUrl = '';}, 3000)\n                console.log('URLï¼š' + url, response)\n                GM_notification({text: 'âŒ è·å–ä¸‹ä¸€é¡µè¶…æ—¶ï¼Œå¯ 3 ç§’åå†æ¬¡æ»šåŠ¨ç½‘é¡µé‡è¯•ï¼ˆæˆ–å°è¯•åˆ·æ–°ç½‘é¡µï¼‰...', timeout: 5000});\n            }\n        });\n    }\n    // ç¿»é¡µç±»å‹ 5ï¼ˆæ’å…¥ iframe æ–¹å¼åŠ è½½ä¸‹ä¸€é¡µï¼Œæ— é™å¥—å¨ƒï¼‰\n    function insIframe(src) {\n        // åœç”¨å½“å‰é¡µé¢ç¿»é¡µ\n        if (curSite.SiteTypeID == 0) return\n        curSite.SiteTypeID = 0;\n\n        // åˆ›å»º iframe\n        let iframe = document.createElement('iframe');\n        iframe.id = 'Autopage_iframe';\n        iframe.src = src.replace(/#.+$/,'');\n\n        document.documentElement.appendChild(document.createElement('style')).textContent = 'iframe#Autopage_iframe {position: absolute !important; width: 100% !important; height: 100% !important; border: none !important;}';\n\n        var beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop\n        // å½“æ»šåŠ¨æ¡åˆ°åº•éƒ¨æ—¶ï¼ˆå³å®Œå…¨æ˜¾ç¤º iframe æ¡†æ¶ï¼‰ï¼Œéšè—å½“å‰é¡µé¢çš„æ»šåŠ¨æ¡\n        window.addEventListener('scroll', function () {\n            let scrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n                clientHeight = document.documentElement.clientHeight || document.body.clientHeight,\n                scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight,\n                afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n                delta = afterScrollTop - beforeScrollTop;\n            if (delta == 0) return false;\n            beforeScrollTop = afterScrollTop;\n\n            //console.log(delta, (scrollTop + clientHeight + 10), scrollHeight, '1111')\n            if (delta > 0 && scrollTop + clientHeight + 10 >= scrollHeight && !getCSS('#Autopage_iframe-scroll')) {\n                let newStyle = document.createElement('style'); newStyle.id = 'Autopage_iframe-scroll';\n                newStyle.textContent = 'html::-webkit-scrollbar, body::-webkit-scrollbar {width: 0 !important;height: 0 !important;} html, body {scrollbar-width: none !important;}';\n                if (curSite.pager.style) newStyle.textContent += curSite.pager.style;\n                document.documentElement.appendChild(newStyle);\n\n                // æ¢å¤ iframe çš„æ»šåŠ¨æ¡\n                if (iframe.contentWindow.document.querySelectorAll('#Autopage_iframe-scroll-hidden')) iframe.contentWindow.document.querySelectorAll('#Autopage_iframe-scroll-hidden').forEach((o)=>{o.remove();});\n\n                // ç»™äºˆ iframe ç„¦ç‚¹\n                iframe.focus();\n                if (iframe.contentWindow.document.body) {iframe.contentWindow.document.body.focus(); iframe.contentWindow.document.body.click();}\n            } else if (delta < 0 && scrollTop + clientHeight + 10 <= scrollHeight && getCSS('#Autopage_iframe-scroll')) {\n                getCSS('#Autopage_iframe-scroll').remove();\n                // å†æ¬¡ç¦ç”¨ iframe çš„æ»šåŠ¨æ¡\n                if (!iframe.contentWindow.document.getElementById('Autopage_iframe-scroll-hidden')) {\n                    let newStyle = document.createElement('style'); newStyle.id = 'Autopage_iframe-scroll-hidden';\n                    newStyle.textContent = 'html, body {overflow: hidden !important;}';\n                    iframe.contentWindow.document.documentElement.appendChild(newStyle);\n                }\n            }\n        }, false);\n\n        // åŠ è½½å®Œæˆåæ‰ç»§ç»­\n        iframe.onload = function() {\n            // æš‚æ—¶ç¦ç”¨ iframe çš„æ»šåŠ¨æ¡\n            if (!getCSS('#Autopage_iframe-scroll') && !iframe.contentWindow.document.getElementById('Autopage_iframe-scroll-hidden')) {\n\n                let newStyle = document.createElement('style'); newStyle.id = 'Autopage_iframe-scroll-hidden';\n                newStyle.textContent = 'html, body {overflow: hidden !important;}';\n                iframe.contentWindow.document.documentElement.appendChild(newStyle);\n            }\n\n            // æ·»åŠ å†å²è®°å½•\n            if (curSite.history === undefined) {\n                if (GM_getValue('menu_history', true)) addHistory(iframe.contentWindow.document, iframe.contentWindow.document.title);\n            } else {\n                if (curSite.history) addHistory(iframe.contentWindow.document, iframe.contentWindow.document.title);\n            }\n            // å½“å‰é¡µç  + 1\n            if (!curSite.hiddenPN) {\n                let autopageNumber = getCSS('#Autopage_number', window.top.document)\n                if (autopageNumber) pageNumIncrement()\n            }\n        }\n\n        // æ’å…¥ iframe\n        if (location.hostname == 'www.cocomanga.com') {\n            document.body.appendChild(iframe);\n        } else {\n            document.documentElement.appendChild(iframe);\n        }\n    }\n    // ç¿»é¡µç±»å‹ 6ï¼ˆé€šè¿‡ iframe è·å–ä¸‹ä¸€é¡µåŠ¨æ€åŠ è½½å†…å®¹ï¼Œåªæœ‰ä¸€ä¸ªå¨ƒï¼‰\n    function insIframe_(src) {\n        // æš‚åœç¿»é¡µ\n        if (!pausePage) return\n        pausePage = false\n\n        //console.log('000',src)\n        // å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª iframe\n        let iframe = document.getElementById('Autopage_iframe');\n        if (!iframe) {\n            iframe = document.createElement('iframe');\n            //iframe.sandbox = 'allow-same-origin allow-scripts allow-popups allow-forms';\n            iframe.id = 'Autopage_iframe';\n            iframe.src = src.replace(/#.+$/,'');\n\n            document.documentElement.appendChild(document.createElement('style')).textContent = 'iframe#Autopage_iframe {position: absolute !important; top: -9999px !important; left: -9999px !important; width: 100% !important; height: 100% !important; border: none !important; z-index: -999 !important;}';\n        }\n\n        // åŠ è½½å®Œæˆåæ‰ç»§ç»­\n        iframe.onload = function() {\n            if (!curSite.pager.loadTime) curSite.pager.loadTime = 300; // é»˜è®¤ 300ms\n            let time1 = 0 ,time2 = setInterval(function(){\n                let scrollHeight = (iframe.contentWindow.document.documentElement.scrollHeight || iframe.contentWindow.document.body.scrollHeight)/10\n                iframe.contentWindow.scrollTo(0, 999999);\n                iframe.contentWindow.scrollTo(0, scrollHeight*time1);\n                if (++time1 == 10) {\n                    clearInterval(time2);\n                    processElems(iframe.contentWindow.document); // æ’å…¥/æ›¿æ¢å…ƒç´ ç­‰\n                    pausePage = true; //      æ¢å¤ç¿»é¡µ\n                }\n            }, curSite.pager.loadTime/10)\n            }\n\n        // æ’å…¥ iframeï¼ˆå¦‚æœå·²å­˜åœ¨åˆ™ç›´æ¥æ”¹ srcï¼‰\n        if (document.getElementById('Autopage_iframe')) {\n            iframe.src = src.replace(/#.+$/,'');\n        } else {\n            document.documentElement.appendChild(iframe);\n        }\n    }\n\n\n    // XHR åå¤„ç†ç»“æœï¼Œæ’å…¥ã€æ›¿æ¢å…ƒç´ ç­‰ï¼ˆé€‚ç”¨äºç¿»é¡µç±»å‹ 1/3/6ï¼‰\n    function processElems(response) {\n        if (!curSite.pager.insertP) {curSite.pager.insertP = [curSite.pager.pageE, 5]}\n        let pageE = getAll(curSite.pager.pageE, response, response), toE;\n        if (curSite.pager.insertP[1] === 5) { // æ’å…¥ pageE åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ çš„åé¢\n            toE = toE5pop(getAll(curSite.pager.insertP[0]));\n        } else {\n            toE = getOne(curSite.pager.insertP[0]);\n        }\n        //console.log(curSite.pager.pageE, pageE, curSite.pager.insertP, toE)\n\n        if (pageE.length > 0 && toE) {\n            // å¦‚æœæœ‰æ’å…¥å‰å‡½æ•°å°±æ‰§è¡Œå‡½æ•°\n            if (curSite.function && curSite.function.bF) {\n                if (curSite.function.bFp) { // å¦‚æœæŒ‡å®šäº†å‚æ•°\n                    if (typeof(curSite.function.bF) == 'string') { // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œè¯´æ˜æ˜¯è‡ªå®šä¹‰è§„åˆ™\n                        pageE = new Function('pageE', 'bFp', 'fun', curSite.function.bF)(pageE, curSite.function.bFp, window.autoPage)\n                    } else {\n                        pageE = curSite.function.bF(pageE, curSite.function.bFp);\n                    }\n                } else {\n                    if (typeof(curSite.function.bF) == 'string') { // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œè¯´æ˜æ˜¯è‡ªå®šä¹‰è§„åˆ™\n                        pageE = new Function('pageE', 'fun', curSite.function.bF)(pageE, window.autoPage)\n                    } else {\n                        pageE = curSite.function.bF(pageE);\n                    }\n                }\n            }\n\n            // å¼ºåˆ¶æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥\n            if (curSite.blank === 4 || curSite.blank === 5 || curSite.blank === 6) {pageE = forceTarget(pageE);}\n\n            // æ’å…¥ä½ç½®\n            let addTo = getAddTo(curSite.pager.insertP[1]);\n\n            // æ’å…¥æ–°é¡µé¢å…ƒç´ \n            if (curSite.pager.insertP[1] === 6) { // æ’å…¥åˆ°ç›®æ ‡å†…éƒ¨æœ«å°¾ï¼ˆé’ˆå¯¹æ–‡æœ¬ï¼Œæ¯”å¦‚å°è¯´ç½‘é¡µï¼‰\n                let afterend = '';\n                if (curSite.pager.insertP6Br === false) { // è¿™ä¸ªåŸºæœ¬ä¸Šåªæœ‰è„šæœ¬å†…ç½®çš„é€šç”¨è§„åˆ™ä¼šç”¨ä¸Šï¼Œå› ä¸ºè¯¥é€šç”¨è§„åˆ™åŒ¹é…åˆ°çš„ç½‘ç«™æ­£æ–‡ <br> æ˜¯æœªçŸ¥çš„ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­ä¸€ä¸‹æ•°é‡\n                    if (unsafeWindow.insertP6Br === true) {\n                        afterend += '<br/><br/>'\n                    } else if (unsafeWindow.insertP6Br === undefined) {\n                        if (getAll('br', getOne(curSite.pager.pageE)).length > 10) {\n\n                            function checklastElementsBr(e) {\n                                const children = Array.from(e.childNodes).filter(node => {return node.nodeType === Node.ELEMENT_NODE || (node.nodeType === Node.TEXT_NODE && node.textContent.trim() !== '');}), lastElement = children[children.length - 1];\n                                if (lastElement.tagName === 'BR') { // åˆ¤æ–­æœ€åä¸€ä¸ªå…ƒç´ \n                                    return true; // æœ€åä¸€ä¸ªå…ƒç´ æ˜¯ <br>\n                                } else if (lastElement.tagName === 'P' && lastElement.classList.contains('readinline')) { // åˆ¤æ–­å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ \n                                    return children[children.length - 2].tagName === 'BR'; // å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ æ˜¯ <br>\n                                }\n                                return false; // å…¶ä»–æƒ…å†µ\n                            };\n                            // å¦‚æœæ­£æ–‡æœ«å°¾æœ€åä¸€ä¸ªå…ƒç´ ä¸æ˜¯ <br> ä¸” å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ä¹Ÿä¸æ˜¯ <br> æ—¶ï¼Œæ‰æ·»åŠ  <br/><br/>\n                            if (!checklastElementsBr(getOne(curSite.pager.pageE))) {\n                                unsafeWindow.insertP6Br = true;\n                                afterend += '<br/><br/>'\n                            } else {unsafeWindow.insertP6Br = false;}\n                        }\n                    }\n                } else if (curSite.pager.insertP6Br) { // å¯¹äºå…¶ä»– insertP6Br: true çš„è§„åˆ™ï¼Œåˆ™ä¾ç„¶ç›´æ¥æ·»åŠ  <br>\n                    afterend += '<br/><br/>'\n                }\n                pageE.forEach(function (one) {afterend += one.innerHTML;});\n                toE.insertAdjacentHTML(addTo, afterend);\n            } else {\n                if (curSite.pager.insertP[1] === 2 || curSite.pager.insertP[1] === 4 || curSite.pager.insertP[1] === 5) pageE.reverse(); // æ’å…¥åˆ° [å…ƒç´ å†…å¤´éƒ¨]ã€[ç›®æ ‡æœ¬èº«åé¢] æ—¶ï¼Œéœ€è¦åè½¬é¡ºåº\n                pageE.forEach(function (one) {toE.insertAdjacentElement(addTo, one);});\n            }\n\n            // å½“å‰é¡µç  + 1\n            pageNumIncrement()\n\n            // æ·»åŠ å†å²è®°å½•\n            if (curSite.history === undefined) {\n                if (GM_getValue('menu_history', true)) addHistory(response);\n            } else {\n                if (curSite.history) addHistory(response);\n            }\n\n            // æ›¿æ¢å¾…æ›¿æ¢å…ƒç´ \n            if (curSite.pager.replaceE !== \"\") replaceElems(response);\n\n            // æ’å…¥ <script> æ ‡ç­¾\n            if (curSite.pager.scriptT || curSite.pager.scriptT == 0) {\n                switch (curSite.pager.scriptT) {\n                    case 0: // ä¸‹ä¸€é¡µçš„æ‰€æœ‰ <script> æ ‡ç­¾\n                        insScript('script', response); break;\n                    case 1: // ä¸‹ä¸€é¡µçš„æ‰€æœ‰ <script> æ ‡ç­¾ï¼ˆä¸åŒ…æ‹¬ src é“¾æ¥ï¼‰\n                        insScript('script:not([src])', response); break;\n                    case 2: // ä¸‹ä¸€é¡µä¸»ä½“å…ƒç´  (pageE) çš„åŒçº§ <script> æ ‡ç­¾\n                        if (curSite.pager.insertP[1] === 2 || curSite.pager.insertP[1] === 4 || curSite.pager.insertP[1] === 5) pageE.reverse(); // ä¸ºäº†é¿å… JS æ‰§è¡Œé¡ºåºåäº†ï¼Œè¿˜éœ€è¦å†ç»™åè½¬å›å»\n                        insScript(null, pageE); break;\n                    case 3: // ä¸‹ä¸€é¡µä¸»ä½“å…ƒç´  (pageE) çš„å­å…ƒç´  <script> æ ‡ç­¾\n                        if (curSite.pager.insertP[1] === 2 || curSite.pager.insertP[1] === 4 || curSite.pager.insertP[1] === 5) pageE.reverse(); // ä¸ºäº†é¿å… JS æ‰§è¡Œé¡ºåºåäº†ï¼Œè¿˜éœ€è¦å†ç»™åè½¬å›å»\n                        insScript('script:not([src])', pageE); break;\n                }\n            }\n\n            // å¦‚æœæœ‰æ’å…¥åå‡½æ•°å°±æ‰§è¡Œå‡½æ•°\n            if (curSite.function && curSite.function.aF) {\n                if (curSite.function.aFp) { // å¦‚æœæŒ‡å®šäº†å‚æ•°\n                    if (typeof(curSite.function.aF) == 'string') { // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œè¯´æ˜æ˜¯è‡ªå®šä¹‰è§„åˆ™\n                        new Function('aFp', 'fun', curSite.function.aF)(curSite.function.aFp, window.autoPage)\n                    } else {\n                        curSite.function.aF(curSite.function.aFp);\n                    }\n                } else {\n                    if (typeof(curSite.function.aF) == 'string') { // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œè¯´æ˜æ˜¯è‡ªå®šä¹‰è§„åˆ™\n                        new Function('fun', curSite.function.aF)(window.autoPage);\n                    } else {\n                        curSite.function.aF();\n                    }\n                }\n            }\n        } else { // è·å–ä¸»ä½“å…ƒç´ å¤±è´¥åï¼Œå°è¯•é‡æ–°è·å–\n            console.log(curSite.pager.pageE, pageE, curSite.pager.insertP, toE, response)\n            if (curSite.retry) {\n                console.warn('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] è·å–ä¸»ä½“å…ƒç´ å¤±è´¥ï¼Œ' + curSite.retry + 'æ¯«ç§’ åå¯å‘ä¸‹ç¿»ç½‘é¡µæ¥è§¦å‘è„šæœ¬å°è¯•é‡æ–°è·å–...')\n                setTimeout(function(){curSite.pageUrl = '';}, curSite.retry)\n            } else {\n                console.error('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] è·å–ä¸»ä½“å…ƒç´ å¤±è´¥...')\n                // å°è¯•æ›¿æ¢å…ƒç´ çœ‹èƒ½ä¸èƒ½ç»§ç»­ç¿»é¡µä¸‹å»\n                /*if (curSite.pager.replaceE !== \"\") {\n                    if (replaceElems(response)) { // å¦‚æœæ›¿æ¢æˆåŠŸ\n                        console.log('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] è·å–ä¸»ä½“å…ƒç´ å¤±è´¥ï¼Œå°è¯•æ›¿æ¢å…ƒç´ æˆåŠŸï¼')\n                        // å½“å‰é¡µç  + 1\n                        pageNumIncrement();\n                        // æ·»åŠ å†å²è®°å½•\n                        if (curSite.history === undefined) {\n                            if (GM_getValue('menu_history', true)) addHistory(response);\n                        } else {\n                            if (curSite.history) addHistory(response);\n                        }\n                    } else {console.error('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] è·å–ä¸»ä½“å…ƒç´ å¤±è´¥ï¼Œå°è¯•æ›¿æ¢å…ƒç´ å¤±è´¥...')}\n                }*/\n            }\n        }\n    }\n    // é€šç”¨å‹æ’å…¥å‰å‡½æ•°ï¼ˆåŠ è½½å›¾ç‰‡ï¼‰\n    function src_bF(pageE, css = [0, 'img[data-original], img[data-src]', 'data-original']) {\n        if (css[2] === undefined) css[2] = 'data-original'\n        pageE.forEach(function (one) {\n            if (css[0] == 0) { // src å›¾ç‰‡\n                if (one.tagName === 'IMG') {\n                    if (one.getAttribute(css[2])){one.src = one.getAttribute(css[2]);}else if (one.dataset.src){one.src = one.dataset.src;}\n                } else {\n                    one.querySelectorAll(css[1]).forEach(function (now) {if (now.getAttribute(css[2])){now.src = now.getAttribute(css[2]);}else if (now.dataset.src){now.src = now.dataset.src;};});\n                }\n            } else if (css[0] == 1) { // èƒŒæ™¯å›¾ç‰‡\n                if (one.tagName === 'IMG') {\n                    if (one.getAttribute(css[2])){one.style.backgroundImage = 'url(\"' + one.getAttribute(css[2]) + '\")';}else if (one.dataset.src){one.style.backgroundImage = 'url(\"' + one.dataset.src + '\")';}\n                } else {\n                    one.querySelectorAll(css[1]).forEach(function (now) {if (now.getAttribute(css[2])){now.style.backgroundImage = 'url(\"' + now.getAttribute(css[2]) + '\")';}else if (now.dataset.src){now.style.backgroundImage = 'url(\"' + now.dataset.src + '\")';};});\n                }\n            }\n        });\n        return pageE\n    }\n    // æ–‡å­—å‹æ’å…¥å‰å‡½æ•°ï¼ˆæ­£åˆ™è¿‡æ»¤ï¼‰\n    function xs_bF(pageE, reg) {\n        pageE.forEach(function (one) {one.innerHTML = one.innerHTML.replace(reg[0], reg[1])});\n        return pageE\n    }\n\n    // é€šç”¨å‹è·å–ä¸‹ä¸€é¡µåœ°å€ï¼ˆä» å…ƒç´  ä¸­è·å–é¡µç ï¼‰è¯¥å‡½æ•°ä»…ä¾›è„šæœ¬å†…éƒ¨è°ƒç”¨\n    function getNextE_(css) {\n        if (!css) css = curSite.pager.nextL; // å¦‚æœæ²¡æœ‰æŒ‡å®š css å‚æ•°ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨è§„åˆ™ä¸­çš„ nextL\n        let next = getOne(css); // è·å–å«æœ‰ä¸‹ä¸€é¡µåœ°å€çš„å…ƒç´ \n        if (next && next.nodeType === 1 && next.href && next.href.slice(0,4) === 'http' && next.getAttribute('href').slice(0,1) !== '#') { // ç¡®å®šå…ƒç´ å­˜åœ¨ä¸” href æ˜¯æ­£å¸¸é“¾æ¥\n            if (next.href != curSite.pageUrl) { // å¦‚æœå–åˆ°çš„ä¸‹ä¸€é¡µ URL å’Œä¸Šä¸€æ¬¡å–åˆ°çš„ URLï¼ˆä¹Ÿå°±æ˜¯å½“å‰ URLï¼‰ä¸ä¸€æ ·\n                if (curSite.pager.forceHTTPS && location.protocol === 'https:') { // å¦‚æœè§„åˆ™è¦æ±‚å¼ºåˆ¶ HTTPSï¼Œä¸”å½“å‰ç½‘é¡µçš„åè®®ä¹Ÿæ˜¯ HTTPSï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿®æ”¹ URL ä¸º HTTPS\n                    if (next.href.replace(/^http:/,'https:') === curSite.pageUrl) {return false;} // å¦‚æœä¿®æ”¹ä¸º HTTPS åå’Œä¸Šä¸€æ¬¡å–åˆ°çš„ URLï¼ˆä¹Ÿå°±æ˜¯å½“å‰ URLï¼‰ä¸€æ ·ï¼Œå°±è¿”å› false\n                    curSite.pageUrl = next.href.replace(/^http:/,'https:'); // åä¹‹è¿”å›ä¿®æ”¹ HTTPS åçš„ URL\n                } else {\n                    curSite.pageUrl = next.href;\n                }\n            } else { // å¦‚æœå–åˆ°çš„ä¸‹ä¸€é¡µ URL å’Œä¸Šä¸€æ¬¡å–åˆ°çš„ URLï¼ˆä¹Ÿå°±æ˜¯å½“å‰ URLï¼‰ä¸€æ ·ï¼Œé‚£ä¹ˆä»£è¡¨æ²¡æœ‰ä¸‹ä¸€é¡µäº†ï¼Œå°±è¿”å› false\n                return false;\n            }\n            //console.log(curSite.pageUrl)\n            return true;\n        }\n        return false; // å¦‚æœå…ƒç´ ä¸å­˜åœ¨ æˆ– href éæ­£å¸¸é“¾æ¥ï¼Œå°±è¿”å›false\n    }\n    // é€šç”¨å‹è·å–ä¸‹ä¸€é¡µåœ°å€ï¼ˆä» å…ƒç´  ä¸­è·å–é¡µç ï¼‰è¯¥å‡½æ•°ç”¨äºè§„åˆ™ä¸­è°ƒç”¨ï¼ˆfun.getNextE() è¿™æ ·ï¼‰\n    function getNextE(css) {\n        if (!css) { // è€ƒè™‘åˆ°å¯èƒ½è¢«é nextL è§„åˆ™å†…è°ƒç”¨ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦åšä¸€ä¸ªåˆ¤æ–­\n            if (typeof curSite.pager.nextL == 'string' && curSite.pager.nextL.match(/^js;/i) === null) {css = curSite.pager.nextL;} else {return '';}\n        }\n        let next = getOne(css); // è·å–å«æœ‰ä¸‹ä¸€é¡µåœ°å€çš„å…ƒç´ \n        if (next && next.nodeType === 1 && next.href && next.href.slice(0,4) === 'http' && next.getAttribute('href').slice(0,1) !== '#') { // ç¡®å®šå…ƒç´ å­˜åœ¨ä¸” href æ˜¯æ­£å¸¸é“¾æ¥\n            if (next.href != curSite.pageUrl) { // å¦‚æœå–åˆ°çš„ä¸‹ä¸€é¡µ URL å’Œä¸Šä¸€æ¬¡å–åˆ°çš„ URLï¼ˆä¹Ÿå°±æ˜¯å½“å‰ URLï¼‰ä¸ä¸€æ ·\n                if (curSite.pager.forceHTTPS && location.protocol === 'https:') { // å¦‚æœè§„åˆ™è¦æ±‚å¼ºåˆ¶ HTTPSï¼Œä¸”å½“å‰ç½‘é¡µçš„åè®®ä¹Ÿæ˜¯ HTTPSï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿®æ”¹ URL ä¸º HTTPS\n                    if (next.href.replace(/^http:/,'https:') === curSite.pageUrl) {return '';} // å¦‚æœä¿®æ”¹ä¸º HTTPS åå’Œä¸Šä¸€æ¬¡å–åˆ°çš„ URLï¼ˆä¹Ÿå°±æ˜¯å½“å‰ URLï¼‰ä¸€æ ·ï¼Œå°±è¿”å›ç©º\n                    return next.href.replace(/^http:/,'https:'); // åä¹‹è¿”å›ä¿®æ”¹ HTTPS åçš„ URL\n                } else {\n                    return next.href;\n                }\n            } else { // å¦‚æœå–åˆ°çš„ä¸‹ä¸€é¡µ URL å’Œä¸Šä¸€æ¬¡å–åˆ°çš„ URLï¼ˆä¹Ÿå°±æ˜¯å½“å‰ URLï¼‰ä¸€æ ·ï¼Œé‚£ä¹ˆä»£è¡¨æ²¡æœ‰ä¸‹ä¸€é¡µäº†ï¼Œå°±è¿”å›ç©º\n                return '';\n            }\n        }\n        return ''; // å¦‚æœå…ƒç´ ä¸å­˜åœ¨ æˆ– href éæ­£å¸¸é“¾æ¥ï¼Œå°±è¿”å›ç©º\n    }\n    // é€šç”¨å‹è·å–ä¸‹ä¸€é¡µåœ°å€ï¼ˆä» å…ƒç´  ä¸­è·å–é¡µç ï¼ŒURL æ›¿æ¢ page= å‚æ•°ï¼‰\n    function getNextEP(css, pf, reg) {\n        let nextNum = getOne(css), url = '';\n        if (nextNum && nextNum.textContent) {\n            nextNum = nextNum.textContent.replaceAll(' ','');\n            if (location.search) {\n                if (indexOF(pf, 's')) {\n                    url = location.search.replace(reg, pf + nextNum);\n                } else {\n                    url = location.search + '&' + pf + nextNum;\n                }\n            } else {\n                url = '?' + pf + nextNum;\n            }\n            url = location.origin + location.pathname + url;\n        }\n        //console.log('111', url)\n        return url\n    }\n    // é€šç”¨å‹è·å–ä¸‹ä¸€é¡µåœ°å€ï¼ˆç›´æ¥ç»™å®šé¡µç ï¼ŒURL æ›¿æ¢ page= å‚æ•°ï¼‰\n    function getNextSP(page, pf, reg) {\n        let url = '';\n        if (!page) return url\n        if (typeof page === 'number') page = page.toString()\n        if (location.search) {\n            if (indexOF(pf, 's')) {\n                url = location.search.replace(reg, pf + page);\n            } else {\n                url = location.search + '&' + pf + page;\n            }\n        } else {\n            url = '?' + pf + page;\n        }\n        return (location.origin + location.pathname + url)\n    }\n    // é€šç”¨å‹è·å–ä¸‹ä¸€é¡µåœ°å€ï¼ˆä» å…ƒç´  ä¸­è·å–é¡µç ï¼ŒURL æ›¿æ¢ pathname è·¯å¾„ï¼‰\n    function getNextEPN(css, reg, a, b = '') {\n        let nextNum = getOne(css), url = '';\n        if (nextNum && nextNum.textContent) {\n            nextNum = nextNum.textContent.replaceAll(' ','');\n            if (location.pathname) {\n                if (indexOF(reg)) {\n                    url = location.pathname.replace(reg, a + nextNum + b);\n                } else {\n                    url = location.pathname + a + nextNum + b;\n                }\n            } else {\n                url = location.pathname + a + nextNum + b;\n            }\n            url = location.origin + url + location.search;\n        }\n        return url\n    }\n    // é€šç”¨å‹è·å–ä¸‹ä¸€é¡µåœ°å€ï¼ˆä» URL ä¸­è·å–é¡µç ï¼Œå¹¶é¡µç +1ï¼ŒURL æ›¿æ¢ pathname è·¯å¾„ï¼Œåä¸‰ä¸ªå‚æ•°å¯ä»¥çœç•¥ï¼‰\n    function getNextUPN(urlReg, reg, a, b = '', initP = '2', endP) {\n        let nextNum = urlReg.exec(location.pathname);\n        if (nextNum) {\n            if (nextNum.length > 1){ // å¦‚æœæ­£åˆ™æ•è·åˆ°åˆ†ç»„ï¼ˆä¹Ÿå°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­ç”¨è‹±æ–‡æ‹¬å·æ‹¬èµ·æ¥çš„ï¼‰ï¼Œé‚£ä¹ˆå°±æ”¹ä¸ºä½¿ç”¨ç¬¬ä¸€ä¸ªåˆ†ç»„ï¼ˆä¹Ÿå°±æ˜¯æ­£åˆ™å¸¸è¯´çš„ $1ï¼‰ä½œä¸ºå½“å‰é¡µç æ•°å­—\n                nextNum = String(parseInt(nextNum[1])+1);\n            } else {\n                nextNum = String(parseInt(nextNum[0])+1);\n            }\n            if (endP && (parseInt(nextNum) > parseInt(endP))) return ''\n        } else {\n            nextNum = initP;\n            if (endP && (parseInt(nextNum) >= parseInt(endP))) return ''\n        }\n        let url = '';\n        if (location.pathname) {\n            if (indexOF(reg)) {\n                url = location.pathname.replace(reg, a + nextNum + b);\n            } else {\n                url = location.pathname + a + nextNum + b;\n            }\n        } else {\n            url = location.pathname + a + nextNum + b;\n        }\n        url = location.origin + url + location.search;\n        return url\n    }\n    // é€šç”¨å‹è·å–ä¸‹ä¸€é¡µåœ°å€ï¼ˆä» URL ä¸­è·å–é¡µç ï¼Œå¹¶é¡µç +1ï¼ŒURL æ›¿æ¢ page= å‚æ•°ï¼Œåä¸‰ä¸ªå‚æ•°å¯ä»¥çœç•¥ï¼‰\n    function getNextUP(pf, reg, lp = location.pathname, initP = '2', endP) {\n        let nextNum = getSearch(pf.replace('=',''));\n        if (nextNum) {\n            nextNum = String(parseInt(nextNum)+1);\n            if (endP && (parseInt(nextNum) > parseInt(endP))) return ''\n        } else {\n            nextNum = initP;\n            if (endP && (parseInt(nextNum) >= parseInt(endP))) return ''\n        }\n        let url = '';\n        if (location.search) {\n            if (indexOF(pf, 's')) {\n                url = location.search.replace(reg, pf + nextNum);\n            } else {\n                url = location.search + '&' + pf + nextNum;\n            }\n        } else {\n            url = '?' + pf + nextNum;\n        }\n        url = location.origin + lp + url;\n        return url\n    }\n    // é€šç”¨å‹è·å–ä¸‹ä¸€é¡µåœ°å€ï¼ˆä» form input ä¸­è·å–ï¼Œè¿”å› GET URLï¼‰\n    function getNextF(css) {\n        let form = getOne(css), value = '';\n        if (form) {\n            form.querySelectorAll('input[name]').forEach(function(input) {value += input.name + '=' + input.value + '&';}) // ç”Ÿæˆè¡¨å•å‚æ•°\n            value = encodeURI(value.replace(/&$/,'')); // æ¸…ç†æœ€åä¸€ä¸ª & ç¬¦å·\n            if (form.action && value) return (form.action + '?' + value)\n        }\n        return '';\n    }\n\n\n    // æ£€æŸ¥ URL\n    function checkURL(func) {\n        if (!curSite.pager.nextL) return\n        if (typeof curSite.pager.nextL == 'function') {\n            let tempUrl = curSite.pager.nextL();\n            if (!tempUrl || tempUrl === curSite.pageUrl || tempUrl.slice(0,4) !== 'http') return\n            curSite.pageUrl = tempUrl;\n            func(curSite.pageUrl);\n        } else if (curSite.pager.nextL.search(/^js;/i) === 0) { // è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™ä¸­æ‰§è¡Œ JavaScript ä»£ç çš„\n            try {\n                let tempUrl = new Function('fun', curSite.pager.nextL.slice(3))(window.autoPage);\n                if (!tempUrl || tempUrl === curSite.pageUrl || tempUrl.slice(0,4) !== 'http') return\n                curSite.pageUrl = tempUrl;\n                func(curSite.pageUrl);\n            } catch (e) {\n                console.error('[è‡ªåŠ¨æ— ç¼ç¿»é¡µ] - å½“å‰ç½‘é¡µè§„åˆ™ \"nextL\" å†… JS ä»£ç æœ‰è¯¯ï¼Œè¯·æ£€æŸ¥ï¼š\\n', curSite.pager.nextL + '\\n\\n', e);\n            }\n        } else if (getNextE_()) {\n            func(curSite.pageUrl);\n        }\n        //console.log(curSite.pageUrl);\n    }\n    // æ›¿æ¢å…ƒç´ \n    function replaceElems(pageE, o = curSite.pager.replaceE, r = curSite.pager.replaceE) {\n        let oE,rE;\n\n        if (curSite.pager.replaceE === undefined && curSite.pager.nextL && curSite.pager.nextL.search(/^js;/i) !== 0) { // å¦‚æœ replaceE ä¸å­˜åœ¨ï¼Œä¸” nextL å­˜åœ¨ï¼Œä¸”ä¸æ˜¯ js ä»£ç \n            let a = getOne(curSite.pager.nextL) // è·å– nextL å…ƒç´ ï¼Œå¹¶åˆ¤æ–­è¯¥å…ƒç´ åé¢æˆ–å‰é¢æ˜¯å¦æœ‰åŒç±»å‹çš„ç›¸é‚»å…„å¼Ÿå…ƒç´ \n            if ((a.nextElementSibling && a.nextElementSibling.tagName === a.tagName) || (a.previousElementSibling && a.previousElementSibling.tagName === a.tagName)) {\n                // nextL å…ƒç´ åé¢æˆ–å‰é¢æœ‰åŒç±»å‹çš„ç›¸é‚»å…„å¼Ÿå…ƒç´ ï¼Œåˆ™å¯ä»¥æ›¿æ¢ nextL çš„çˆ¶å…ƒç´ \n                // å½“ nextL é€‰æ‹©å™¨ä¸º xpath æ—¶ï¼Œç›´æ¥æœ«å°¾è¿½åŠ  /.. å³å¯é€‰æ‹©å…¶çˆ¶å…ƒç´ \n                if (curSite.pager.nextL.slice(0,1) === '/' || curSite.pager.nextL.slice(0,2) === './' || curSite.pager.nextL.slice(0,2) === '(/' || curSite.pager.nextL.slice(0,3) === 'id(') {\n                    o = r = curSite.pager.nextL + '/..'\n                } else { // å½“ nextL é€‰æ‹©å™¨ä¸º css æ—¶ï¼Œåˆ™éœ€è¦å¯»æ‰¾æ‰€æœ‰ nextL å…ƒç´ çš„çˆ¶å…ƒç´ \n                    oE = getAllParentElement(curSite.pager.nextL)\n                    rE = getAllParentElement(curSite.pager.nextL, pageE, pageE)\n                }\n            } else { // å¦‚æœ nextL å…ƒç´ åé¢æˆ–å‰é¢æ²¡æœ‰åŒç±»å‹çš„ç›¸é‚»å…„å¼Ÿå…ƒç´ ï¼Œé‚£ä¹ˆå°±åªæ›¿æ¢ nextL å…ƒç´ \n                o = r = curSite.pager.nextL\n            }\n        }\n\n        if (!oE && !rE && o && r) {\n            oE = getAll(o)\n            rE = getAll(r, pageE, pageE)\n        }\n\n        if (oE && rE && oE.length != 0 && rE.length != 0 && oE.length === rE.length) {\n            for (let i = 0; i < oE.length; i++) {\n                oE[i].outerHTML = rE[i].outerHTML;\n            }\n            return true\n        } else if (curSite.pager.replaceE !== undefined) {console.log(pageE,oE,rE)}\n        return false\n    }\n    // æ·»åŠ å†å²è®°å½•\n    function addHistory(pageE, title, url) {\n        if (!curSite.pageUrl) return\n        // å¯¹äºè‡ªå¸¦ç±»ä¼¼åŠŸèƒ½ æˆ–è€… è¦†ç›–äº† history åŸç”Ÿå‡½æ•°çš„ç½‘ç«™ï¼Œåˆ™è·³è¿‡ä¸å†æ·»åŠ å†å²è®°å½•\n        if (window.top.history.toString() !== '[object History]') return\n        title = title || ((pageE.querySelector('title')) ? pageE.querySelector('title').textContent : window.top.document.title);\n        url = url || curSite.pageUrl;\n        window.top.document.Autopage_nowUrl = curSite.pageUrl;\n        // å¯¹äºä¸‹ä¸€é¡µ URL å’Œå½“å‰ç½‘é¡µ URL çš„åè®®ä¸åŒæ—¶ï¼Œä»¥å½“å‰ç½‘é¡µ URL åè®®ä¸ºå‡†\n        if (url.indexOf(window.top.location.protocol) === -1) url = url.replace(/^https?:/,window.top.location.protocol)\n        window.top.history.pushState('Autopage_history', title, url);\n        window.top.document.title = title;\n    }\n    // æ’å…¥ <Script>\n    function insScript(selector, contextNode = document, toE = document.body) {\n        let scriptElems = contextNode;\n        if (selector) {\n            if (contextNode instanceof Array) {\n                scriptElems = []; contextNode.forEach(function (one) {scriptElems = scriptElems.concat(getAll(selector, one, one));})\n            } else {\n                scriptElems = getAll(selector, contextNode, contextNode);\n            }\n        }\n\n        scriptElems.forEach(function (one) {\n            if (one.tagName === 'SCRIPT') {\n                if (one.src) {\n                    toE.appendChild(document.createElement('script')).src = one.src;\n                } else {\n                    toE.appendChild(document.createElement('script')).textContent = one.textContent;//.replaceAll('document.write', '');\n                }\n            }\n        });\n    }\n    // æ’å…¥ <Style>\n    function insStyle(style) {\n        if (style.indexOf('{') === -1){style += '{display: none !important;}'}\n        document.documentElement.appendChild(document.createElement('style')).textContent = style;\n    }\n\n\n    // è·å–å…ƒç´ ï¼ˆCSS/Xpathï¼‰æ¥è‡ªï¼šhttps://github.com/machsix/Super-preloader\n    function getCSS(css, contextNode = document) {\n        return contextNode.querySelector(css);\n    }\n    function getAllCSS(css, contextNode = document) {\n        return [].slice.call(contextNode.querySelectorAll(css));\n    }\n    function getXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        try {\n            const result = doc.evaluate(xpath, contextNode, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);\n            // åº”è¯¥æ€»æ˜¯è¿”å›ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹\n            return result.singleNodeValue && result.singleNodeValue.nodeType === 1 && result.singleNodeValue;\n        } catch (err) {\n            throw new Error(`æ— æ•ˆ Xpath: ${xpath}`);\n        }\n    }\n    function getAllXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        const result = [];\n        try {\n            const query = doc.evaluate(xpath, contextNode, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n            for (let i = 0; i < query.snapshotLength; i++) {\n                const node = query.snapshotItem(i);\n                // å¦‚æœæ˜¯ Element èŠ‚ç‚¹\n                if (node.nodeType === 1) result.push(node);\n            }\n        } catch (err) {\n            throw new Error(`æ— æ•ˆ Xpath: ${xpath}`);\n        }\n        return result;\n    }\n    function getOne(selector, contextNode = undefined, doc = document) {\n        if (!selector) return;\n        contextNode = contextNode || doc;\n        if (selector.slice(0,1) === '/' || selector.slice(0,2) === './' || selector.slice(0,2) === '(/' || selector.slice(0,3) === 'id(') {\n            return getXpath(selector, contextNode, doc);\n        } else {\n            return getCSS(selector, contextNode);\n        }\n    }\n    function getAll(selector, contextNode = undefined, doc = document) {\n        if (!selector) return [];\n        contextNode = contextNode || doc;\n        if (selector.slice(0,1) === '/' || selector.slice(0,2) === './' || selector.slice(0,2) === '(/' || selector.slice(0,3) === 'id(') {\n            return getAllXpath(selector, contextNode, doc);\n        } else {\n            return getAllCSS(selector, contextNode);\n        }\n    }\n    // è·å–æ‰€æœ‰çˆ¶å…ƒç´ \n    function getAllParentElement(selector, contextNode = undefined, doc = document) {\n        contextNode = contextNode || doc;\n        const parents = [];\n        getAll(selector, contextNode, doc).forEach((next) => {\n            const parent = next.parentElement;\n            if (!parents.includes(parent)) {\n                parents.push(parent);\n            }\n        });\n        return parents\n    }\n    function createDocumentByString(e) {\n        if (e) {\n            if ('HTML' !== document.documentElement.nodeName) return (new DOMParser).parseFromString(e, 'application/xhtml+xml');\n            var t;\n            try { t = (new DOMParser).parseFromString(e, 'text/html');} catch (e) {}\n            if (t) return t;\n            if (document.implementation.createHTMLDocument) {\n                t = document.implementation.createHTMLDocument('ADocument');\n            } else {\n                try {((t = document.cloneNode(!1)).appendChild(t.importNode(document.documentElement, !1)), t.documentElement.appendChild(t.createElement('head')), t.documentElement.appendChild(t.createElement('body')));} catch (e) {}\n            }\n            if (t) {\n                var r = document.createRange(),\n                    n = r.createContextualFragment(e);\n                r.selectNodeContents(document.body);\n                t.body.appendChild(n);\n                for (var a, o = { TITLE: !0, META: !0, LINK: !0, STYLE: !0, BASE: !0}, i = t.body, s = i.childNodes, c = s.length - 1; c >= 0; c--) o[(a = s[c]).nodeName] && i.removeChild(a);\n                return t;\n            }\n        } else console.error('æ²¡æœ‰æ‰¾åˆ°è¦è½¬æˆ DOM çš„å­—ç¬¦ä¸²', e);\n    }\n\n\n    // å…¼å®¹ä¸æ”¯æŒ GM_openInTab çš„æ²¹çŒ´è„šæœ¬ç®¡ç†å™¨\n    function openInTab(url, options) {\n        window.open(url);\n    }\n\n    // å¼ºåˆ¶æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥\n    function forceTarget(pageE) {\n        if (curSite.blank === 1) {\n            document.head.appendChild(document.createElement('base')).target = '_blank';\n\n        } else if (curSite.blank === 5 || curSite.blank === 6) { // æ¸…ç† <a> å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶\n            if (!pageE) pageE = getAll(curSite.pager.pageE)\n            pageE.forEach(function (dd) {\n                getAllCSS('a[href]:not([target=\"_blank\"]):not([onclick]):not([href^=\"#\"]):not([href^=\"javascript:\"])',dd).forEach(function (a) {\n                    if (a.href.slice(0,4) == 'http') {\n                        const clonedLink = a.cloneNode(true); // å…‹éš†åŸ a å…ƒç´ \n                        clonedLink.target = '_blank'; // é€šè¿‡æ·»åŠ  target=\"_blank\" å±æ€§æ¥æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼Œå¯ä»¥è§£å†³å¤§éƒ¨åˆ†æƒ…å†µ\n                        if (curSite.blank === 6) clonedLink.addEventListener('click', function(e) {e.stopPropagation();}); // å¦‚æœæ·»åŠ  target=\"_blank\" å±æ€§æ— æ•ˆï¼ˆä¾ç„¶åœ¨å½“å‰ç½‘é¡µè·³è½¬æ‰“å¼€ï¼‰ï¼Œé‚£ä¹ˆè¯´æ˜å…¶çˆ¶å…ƒç´ çš„äº‹ä»¶å§”æ‰˜ä¸­é˜»æ­¢äº†é»˜è®¤æ‰“å¼€é“¾æ¥äº‹ä»¶ï¼Œå› æ­¤å¯¹è¯¥ <a> å…ƒç´ æ·»åŠ ç‚¹å‡»äº‹ä»¶å¹¶é˜»æ­¢å†’æ³¡ï¼ˆé¿å…çˆ¶å…ƒç´ äº‹ä»¶å§”æ‰˜æ•è·è¯¥å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼‰\n                        a.insertAdjacentElement('afterend', clonedLink); // æŠŠå…‹éš†çš„å…ƒç´ æ’å…¥åŸ a å…ƒç´ åé¢\n                        a.remove(); // åˆ é™¤åŸ a å…ƒç´ \n                    }\n                });\n            });\n            return pageE\n\n        } else if (curSite.blank === 4) {\n            if (!pageE) pageE = getAll(curSite.pager.pageE)\n            pageE.forEach(function (dd) {getAllCSS('a[href]:not([target=\"_blank\"]):not([onclick]):not([href^=\"#\"]):not([href^=\"javascript:\"])',dd).forEach(function (a) {if (a.href.slice(0,4) == 'http') {a.target = '_blank';}});});\n            return pageE\n\n        } else {\n            let d;\n            if (curSite.blank === 2) {\n                d = document.body\n            } else if (curSite.blank === 3) {\n                let dd = toE5pop(getAll(curSite.pager.pageE));\n                if (dd && dd.parentElement != null) d = dd.parentElement\n            }\n            if (!d) return\n\n            function forceTarget_(target, e){\n                if (target.href && target.target != '_blank' && !(target.getAttribute('onclick')) && target.href.slice(0,4) == 'http' && target.getAttribute('href').slice(0,1) != '#') {\n                    e.stopPropagation(); // é˜»æ­¢å†’æ³¡ï¼ˆé¿å…è¢«çˆ¶å…ƒç´ äº‹ä»¶å§”æ‰˜æ•è·ï¼‰\n                    e.preventDefault(); // é˜»æ­¢é»˜è®¤æ‰“å¼€é“¾æ¥äº‹ä»¶\n                    GM_openInTab(target.href, {active: true,insert: true,setParent: true});\n                }\n            }\n            d.addEventListener('click', function(e) {\n                //console.log(e.target.tagName, e.path)\n                if (e.target.tagName === 'A') {\n                    forceTarget_(e.target, e);\n                } else {\n                    let path = e.path || e.composedPath();\n                    for (let i = 1; i < path.length - 4; i++) {if (path[i].tagName === 'A') {forceTarget_(path[i], e); break;}}\n                }\n            });\n        }\n    }\n\n    // æ¸…ç†å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ï¼ˆä¸åŒ…æ‹¬çˆ¶å…ƒç´ ä¸Šç›‘å¬çš„äº‹ä»¶å§”æ‰˜ï¼‰\n    // css ä¸ºå…ƒç´ é€‰æ‹©å™¨ï¼ˆä¹Ÿæ”¯æŒ Xpathï¼‰\n    // delay ä¸ºå»¶è¿Ÿæ—¶é—´ï¼Œç¡®ä¿å…¶æ”¾åœ¨ url è§„åˆ™ä¸­æ‰§è¡Œæ—¶ç½‘é¡µå·²ç»åŠ è½½å®Œæˆ\n    // mode ä¸º 0 æ—¶æ¸…ç†å…¨éƒ¨ï¼Œä¸º 1 æ—¶é¢å¤–æ¸…ç† onclick å±æ€§ï¼Œä¸º 2 æ—¶æ·»åŠ ç©ºç‚¹å‡»äº‹ä»¶å¹¶é˜»æ­¢å†’æ³¡\n    function cleanuEvent(css, delay = 0, mode = -1) {\n        setTimeout(()=>{\n            getAll(css).forEach(function (a) {\n                const clonedLink = a.cloneNode(true); // å…‹éš†åŸå…ƒç´ \n                if (mode == 0 || mode == 1) {if (clonedLink.getAttribute('onclick') != undefined) {clonedLink.removeAttribute('onclick')}} // æ¸…ç† onclick å±æ€§\n                if (mode == 0 || mode == 2) clonedLink.addEventListener('click', function(e) {e.stopPropagation();}); // æ·»åŠ ç©ºç‚¹å‡»äº‹ä»¶å¹¶é˜»æ­¢å†’æ³¡ï¼ˆé¿å…çˆ¶å…ƒç´ äº‹ä»¶å§”æ‰˜æ•è·è¯¥å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼‰\n                a.insertAdjacentElement('afterend', clonedLink); // æŠŠå…‹éš†çš„å…ƒç´ æ’å…¥åŸå…ƒç´ åé¢\n                a.remove(); // åˆ é™¤åŸå…ƒç´ \n            }, delay);\n        })\n    }\n    // åˆå§‹åŒ–äº‹ä»¶\n    /*function initEvent() {\n        if (curSite.initE[1] == undefined) curSite.initE[1] = 500;\n        setTimeout(function(){getAllCSS(curSite.initE[0]).forEach(function (o) {o.innerHTML = o.innerHTML;});}, curSite.initE[1])\n    }*/\n    // åˆ¤æ–­å…ƒç´ æ˜¯å¦éšè—ï¼ˆéšè—è¿”å› trueï¼‰\n    function isHidden(el){\n        return (el.offsetParent === null);\n    }\n    // åˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºç‰ˆï¼ˆæ˜¯åˆ™è¿”å› trueï¼‰\n    function isMobile(){\n        return (/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|MicroMessenger|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent) || (window.screen.width < 500 && window.screen.height < 800));\n    }\n    // ç”¨ä»¥è‡ªå®šä¹‰è§„åˆ™ä¸­è®¾ç½® urlC = true\n    function isUrlC(){\n        urlC = true;\n    }\n    // åˆ¤æ–­ URL æ˜¯å¦å­˜åœ¨æŒ‡å®šæ–‡æœ¬\n    function indexOF(e, l = 'p', low = true){\n        switch (l) {\n            case 'h':\n                l = location.href; break;\n            case 'p':\n                l = location.pathname; break;\n            case 's':\n                l = location.search; break;\n        }\n        //console.log(l,e,l.indexOf(e))\n        if (e instanceof RegExp) {\n            if (e.test(l)) return true\n        } else {\n            if (low) {e = e.toLowerCase(); l = l.toLowerCase();} // å…¨éƒ¨è½¬ä¸ºå°å†™ï¼ˆå³ä¸åŒºåˆ†å¤§å°å†™ï¼‰\n            if (l.indexOf(e) != -1) return true\n        }\n        return false\n    }\n    // åˆ¤æ–­ç½‘ç«™æ ‡é¢˜æ˜¯å¦åŒ…å«æŒ‡å®šæ–‡å­—\n    function isTitle(title) {\n        return document.title.indexOf(title) > -1;\n    }\n    // åˆ¤æ–­è§„åˆ™ä¸­çš„ nextLã€pageEã€insertPã€replaceE å…ƒç´ æ˜¯å¦å­˜åœ¨äºå½“å‰ç½‘é¡µ\n    function isPager(type) {\n        if (!type) { // å¦‚æœæ²¡æœ‰æŒ‡å®šè¦åˆ¤æ–­çš„å…ƒç´ ç±»å‹å‚æ•°ï¼Œé‚£ä¹ˆéœ€è¦è®¾ç½®é»˜è®¤å€¼\n            if (!DBSiteNow.pager) return false; // å¦‚æœè¿ pager éƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆç›´æ¥è¿”å› false\n            if (DBSiteNow.pager.type === undefined || DBSiteNow.pager.type === 1 || DBSiteNow.pager.type === 3 || DBSiteNow.pager.type === 6) { // å¦‚æœæ˜¯ç¿»é¡µæ¨¡å¼ 1 3 6ï¼Œé‚£ä¹ˆé»˜è®¤å€¼å¯èƒ½æ˜¯ nã€pã€n,p ä¸‰ç§\n                // åˆ¤æ–­ nextL æ˜¯ä¸æ˜¯é€‰æ‹©å™¨ï¼ˆå­—ç¬¦ä¸² + é js; å¼€å¤´ï¼‰\n                if (typeof DBSiteNow.pager.nextL == 'string' && DBSiteNow.pager.nextL.match(/^js;/i) === null) {type = 'n';}\n                // åˆ¤æ–­ pageE æ˜¯å¦ä¸æ˜¯ç©º\n                if (DBSiteNow.pager.pageE) {\n                    // å¦‚æœ type æ˜¯ç©ºçš„ï¼Œè¯´æ˜ä¸Šé¢ nextL åˆ¤æ–­ç»“æœä¸ºå¦ï¼Œé‚£ä¹ˆå°±æ˜¯ pï¼Œåä¹‹åˆ™å°±æ˜¯ n,p\n                    if (!type) {type = 'p';}else{type = 'n,p';}\n                }\n            } else if (DBSiteNow.pager.type === 2 || DBSiteNow.pager.type === 5) { // å¦‚æœæ˜¯ç¿»é¡µæ¨¡å¼ 2 6ï¼Œé‚£ä¹ˆé»˜è®¤å€¼åªèƒ½æ˜¯ n ä¸€ç§\n                // åˆ¤æ–­ nextL æ˜¯ä¸æ˜¯é€‰æ‹©å™¨ï¼ˆå­—ç¬¦ä¸² + é js; å¼€å¤´ï¼‰\n                if (typeof DBSiteNow.pager.nextL == 'string' && DBSiteNow.pager.nextL.match(/^js;/i) === null) {type = 'n';}\n            } else if (DBSiteNow.pager.type === 4) { // å¦‚æœæ˜¯ç¿»é¡µæ¨¡å¼ 4ï¼Œé‚£ä¹ˆæ˜¯ä¸èƒ½ä½¿ç”¨ isPager çš„ï¼ˆå› ä¸ºåŸºæœ¬ä¸Šéƒ½æ˜¯è„šæœ¬å†…çš„å‡½æ•°ï¼‰\n                return false;\n            }\n            if (!type) return false; // å¦‚æœä¸Šé¢çš„åˆ¤æ–­ä¸­ nextL å’Œ pageE éƒ½ä¸ºå¦ï¼Œé‚£ä¹ˆ type å°±è¿˜æ˜¯ç©ºçš„ï¼Œåˆ™ç›´æ¥è¿”å› false\n        }\n        const typeArr = 'n,p'.split(',');\n        for (let i = 0; i < typeArr.length; i++) {\n            switch (typeArr[i]) {\n                case 'n': // nextL\n                    if (!getOne(DBSiteNow.pager.nextL)){return false;}; break;\n                case 'p': // pageE\n                    if (!getOne(DBSiteNow.pager.pageE)){return false;}; break;\n                case 'i': // insertP\n                    if (!getOne(DBSiteNow.pager.insertP[0])){return false;}; break;\n                case 'r': // replaceE\n                    if (!getOne(DBSiteNow.pager.replaceE)){return false;}; break;\n            }\n        }\n        return true;\n    }\n    // è·å– Search æŒ‡å®šå‚æ•°\n    function getSearch(variable) {\n        let query = window.location.search.substring(1),\n            vars = query.split('&');\n        for (var i=0;i<vars.length;i++) {\n            var pair = vars[i].split('=');\n            if(pair[0] == variable){return pair[1];}\n        }\n        return '';\n    }\n    // å¯ç”¨/ç¦ç”¨ (å½“å‰ç½‘ç«™)\n    function menu_disable(type) {\n        switch(type) {\n            case 'check':\n                return check(); break;\n            case 'add':\n                add(); break;\n            case 'del':\n                del(); break;\n        }\n\n        function check() { // å­˜åœ¨è¿”å›çœŸï¼Œä¸å­˜åœ¨è¿”å›å‡\n            if (GM_getValue('menu_disable').indexOf(location.hostname) == -1) return false // ä¸å­˜åœ¨è¿”å›å‡\n            return true\n        }\n\n        function add() {\n            if (check()) return\n            let list = GM_getValue('menu_disable'); // è¯»å–ç½‘ç«™åˆ—è¡¨\n            list.push(location.hostname); // è¿½åŠ ç½‘ç«™åŸŸå\n            GM_setValue('menu_disable', list); // å†™å…¥é…ç½®\n            location.reload(); // åˆ·æ–°ç½‘é¡µ\n        }\n\n        function del() {\n            if (!check()) return\n            let list = GM_getValue('menu_disable'), // è¯»å–ç½‘ç«™åˆ—è¡¨\n            index = list.indexOf(location.hostname);\n            list.splice(index, 1); // åˆ é™¤ç½‘ç«™åŸŸå\n            GM_setValue('menu_disable', list); // å†™å…¥é…ç½®\n            location.reload(); // åˆ·æ–°ç½‘é¡µ\n        }\n    }\n    // å·¦é”®åŒå‡»ç½‘é¡µç©ºç™½å¤„æš‚åœç¿»é¡µ\n    function pausePageEvent() {\n        if (!GM_getValue('menu_pause_page')) return\n        if (curSite.SiteTypeID === 0) return\n        if (curSite.pager && curSite.pager.type == 5) window.top.document.xiu_pausePage = pausePage\n        document.body.addEventListener('dblclick', function () {\n            if (pausePage) {GM_notification({text: `âŒ å·²æš‚åœæœ¬é¡µ [è‡ªåŠ¨æ— ç¼ç¿»é¡µ]\\n    ï¼ˆå†æ¬¡åŒå‡»å¯æ¢å¤ï¼‰`, timeout: 2000});} else {GM_notification({text: `âœ… å·²æ¢å¤æœ¬é¡µ [è‡ªåŠ¨æ— ç¼ç¿»é¡µ]\\n    ï¼ˆå†æ¬¡åŒå‡»å¯æš‚åœï¼‰`, timeout: 2000});}\n            if (document.querySelector('#Autopage_number')) { // å¦‚æœåŒæ—¶å¼€å¯äº†å·¦ä¸‹è§’é¡µç åŠŸèƒ½ï¼Œåˆ™æ¨¡æ‹Ÿç‚¹å‡»ï¼ˆä¸ºäº†æ•°å­—å˜æˆçº¢è‰²+æ–œä½“ï¼‰\n                document.querySelector('#Autopage_number').shadowRoot.querySelector('#Autopage_number_button').click();\n            } else {\n                pausePage = !pausePage;\n                if (curSite.pager && curSite.pager.type == 5) window.top.document.xiu_pausePage = pausePage\n            }\n        });\n    }\n    // è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™\n    function customRules() {\n        if (getCSS('#Autopage_customRules')) return\n\n        let customRules = customStringify(GM_getValue('menu_customRules', {}))\n        if (customRules == '{}') customRules = '{\\n    \\n}'; // å¼•å¯¼ç”¨æˆ·æ’å…¥è§„åˆ™çš„ä½ç½®\n        let _html = `<style>* {font-family: system-ui !important;}</style><div style=\"left: 0; right: 0; top: 0; bottom: 0; width: 100%; height: 100%; margin: auto; padding: 25px 10px 10px 10px; position: fixed; opacity: 0.95; z-index: 9999999; background-color: #eee; color: #222; font-size: 14px; overflow: scroll; text-align: left;-webkit-touch-callout: text !important;-webkit-user-select: text !important;-khtml-user-select: text !important;-moz-user-select: text !important;-ms-user-select: text !important;user-select: text !important;\">\n<h3 style=\"font-size: 22px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;\"><strong># è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼Œä¼šè¦†ç›–åŒåçš„å¤–ç½®ç¿»é¡µè§„åˆ™ï¼‰-ã€å°†è§„åˆ™æ’å…¥é»˜è®¤çš„ <code>{ }</code> ä¸­é—´ã€‘</strong></h3>\n<details><summary style=\"cursor: pointer;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;\"><kbd><strong>ã€Œ ç‚¹å‡»å±•å¼€ æŸ¥çœ‹è§„åˆ™ç¤ºä¾‹ ã€ï¼ˆä¸ºäº†é¿å…éœ€è¦çš„æ—¶å€™è¿˜è¦æ‰¾ï¼Œæˆ‘å¹²è„†æŠŠå¸¸ç”¨è§„åˆ™éƒ½ä¸€è‚¡è„‘å¡è¿›å»äº†ï¼‰</strong></kbd></summary>\n<ul style=\"list-style: disc; margin-left: 35px;\">\n<li>ç¿»é¡µè§„åˆ™ä¸º JSON æ ¼å¼ï¼Œå› æ­¤å¤§å®¶éœ€è¦å¤šå°‘<strong>äº†è§£ä¸€ç‚¹ JSON çš„åŸºæœ¬æ ¼å¼</strong>ï¼ˆä¸»è¦å°±æ˜¯æœ«å°¾é€—å·ã€è½¬ä¹‰ã€åŒå¼•å·ç­‰ï¼‰ã€‚</li>\n<li>å…·ä½“çš„ç¿»é¡µè§„åˆ™è¯´æ˜ã€ç¤ºä¾‹ï¼Œä¸ºäº†æ–¹ä¾¿æ›´æ–°åŠè¡¥å……ï¼Œæˆ‘éƒ½å†™åˆ° <strong><a href=\"https://github.com/XIU2/UserScript/issues/176\" target=\"_blank\">Github Issues</a></strong> é‡Œé¢äº†ã€‚</li>\n<li>è„šæœ¬ä¼šè‡ªåŠ¨æ ¼å¼åŒ–è§„åˆ™ï¼Œå› æ­¤<strong>æ— éœ€æ‰‹åŠ¨ç¼©è¿›ã€æ¢è¡Œ</strong>ï¼Œåªéœ€æŠŠè§„åˆ™<strong>æ’å…¥é»˜è®¤çš„ { } ä¸­é—´</strong>å³å¯ã€‚</li>\n</ul>\n<pre class=\"notranslate\" style=\"white-space: pre-wrap;user-select: auto;\">\n// ä¸‹é¢ç¤ºä¾‹æ˜¯æŠŠæ‰€æœ‰è§„åˆ™éƒ½å¡è¿›å»äº†ï¼Œä½†å®é™…ä¸Šå¤§éƒ¨åˆ†éƒ½ç”¨ä¸ä¸Šï¼Œå¤§å¤šæ•°ç½‘ç«™åªéœ€è¦åƒç¬¬ä¸€ä¸ª \"aaa\" è¿™æ ·çš„è§„åˆ™ï¼ˆä¸‹æ–¹ ç¤ºä¾‹ä¸€ ä¸­ urlã€replaceEã€scrollD å‡å¯æŒ‰éœ€çœç•¥ï¼‰ï¼š\n\n// \"aaa\"       æ˜¯è§„åˆ™åï¼Œå”¯ä¸€ï¼Œå› ä¸º è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™ ä¼˜å…ˆçº§æœ€é«˜ï¼Œæ‰€ä»¥ä¼šè¦†ç›–åŒåçš„ å¤–ç½®ç¿»é¡µè§„åˆ™\n// \"host\"      æ˜¯åŸŸåï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼ˆå¦‚ ç¤ºä¾‹å››ï¼‰ï¼Œä¹Ÿå¯ä»¥åƒè¿™æ · ç¤ºä¾‹ä¸‰ é‚£æ ·å†™å¤šä¸ªåŸŸåæˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ··ç”¨ï¼‰ï¼Œå¦‚æœçœç•¥ï¼Œåˆ™é»˜è®¤åŒ¹é…æ‰€æœ‰åŸŸåï¼ˆä¼šå¯¹æ‰€æœ‰åŸŸååŒ¹é… url è§„åˆ™åˆ¤æ–­ï¼Œå¯ä»¥å½“æˆä¸€ä¸ªç®€å•çš„å¤–ç½®/è‡ªå®šä¹‰é€šç”¨è§„åˆ™çš„æ–¹æ¡ˆï¼‰\n// \"url\"       æ˜¯ç”¨æ¥æ§åˆ¶å“ªäº›ç½‘ç«™ä¸­é¡µé¢é€‚ç”¨è¯¥è§„åˆ™ï¼Œçœç•¥åä»£è¡¨è¯¥è§„åˆ™åº”ç”¨äºå…¨ç«™ï¼ˆå¦‚æœä¸çŸ¥é“å†™ä»€ä¹ˆï¼Œé‚£ä¹ˆå°±å†™ return fun.isPager() è¿™æ ·è„šæœ¬ä¼šé»˜è®¤è‡ªåŠ¨åŒ¹é…å½“å‰ç½‘ç«™ä¸‹å­˜åœ¨ nextL åŠ pageE å…ƒç´ çš„ç½‘é¡µï¼Œå¤§éƒ¨åˆ†ç½‘ç«™æ˜¯æ²¡é—®é¢˜çš„ï¼Œå¦‚æœæ”¹ä¸ºåŒ¹é… replaceE æˆ–è€…å…¶ä»–ç»„åˆï¼Œé‚£ä¹ˆè¯·å»ä¸Šé¢çš„ Github Issues é‡Œçš„ å†…ç½®å‡½æ•° ä¸­æŸ¥çœ‹å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼‰\n\n// \"nextL\"     æ˜¯ç”¨æ¥æŒ‡å®šå«æœ‰ä¸‹ä¸€é¡µåœ°å€çš„å…ƒç´ é€‰æ‹©å™¨ï¼ˆCSS æˆ– XPath éƒ½è¡Œï¼Œä¸€èˆ¬éƒ½æ˜¯ &lt;a&gt; å…ƒç´ ï¼‰\n// \"pageE\"     æ˜¯æŒ‡å®šè¦ä»ä¸‹ä¸€é¡µè·å–çš„å…ƒç´ é€‰æ‹©å™¨ï¼ˆä¹Ÿå°±æ˜¯ç½‘é¡µä¸»ä½“å†…å®¹ï¼‰ï¼Œå¹¶å°†å…¶æ’å…¥å½“å‰ç½‘é¡µä¸­åŒæ ·å…ƒç´ çš„æœ«å°¾\n// \"replaceE\"  ç”¨äºå°†å½“å‰ç½‘é¡µä¸­çš„é¡µç å…ƒç´ æ›¿æ¢ä¸ºä¸‹ä¸€é¡µçš„é¡µç å…ƒç´ é€‰æ‹©å™¨ï¼ˆè¿™æ ·æ‰èƒ½æ— é™ç¿»é¡µä¸‹å»ï¼‰ï¼Œçœç•¥åå°†ä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯æ›¿æ¢ nextL å…ƒç´ è‡ªèº«è¿˜æ˜¯ nextL å…ƒç´ çš„çˆ¶å…ƒç´ ï¼ˆå½“ nextL å…ƒç´ åé¢æˆ–å‰é¢æœ‰å…¶è‡ªèº« &lt;a&gt; å…ƒç´ çš„ç›¸é‚»å…„å¼Ÿå…ƒç´ æ—¶è„šæœ¬ä¼šæ›¿æ¢å…¶çˆ¶å…ƒç´ ï¼Œåä¹‹æ²¡æœ‰ç›¸é‚»å…„å¼Ÿå…ƒç´ åˆ™æ›¿æ¢å…¶è‡ªèº«ï¼Œä»…é™æ¨¡å¼1/3/6ï¼Œä¸” \"js;\" å¼€å¤´çš„ nextL è§„åˆ™é™¤å¤–ï¼‰ï¼Œå€¼ä¸ºç©º \"\" æ—¶åˆ™å®Œå…¨ä¸æ›¿æ¢\n// \"scrollD\"   æ˜¯ç”¨æ¥æŒ‡å®šè§¦å‘ç¿»é¡µçš„æ»šåŠ¨æ¡ä¸åº•éƒ¨ä¹‹é—´çš„è·ç¦»ï¼Œå½“æ»šåŠ¨æ¡åº•éƒ¨è·ç¦»ç½‘é¡µåº•éƒ¨ä¹‹é—´çš„è·ç¦»ç­‰äºæˆ–å°äºè¯¥å€¼æ—¶ï¼Œå°†è§¦å‘ç¿»é¡µï¼Œå› æ­¤å€¼è¶Šå¤§å°±è¶Šæ—©è§¦å‘ç¿»é¡µï¼Œè®¿é—®é€Ÿåº¦æ…¢çš„ç½‘ç«™éœ€è¦è°ƒå¤§ï¼Œå¯çœç•¥(è®°å¾—ç§»é™¤ä¸Šä¸€è¡Œæœ«å°¾é€—å·)ï¼Œçœç•¥åé»˜è®¤ 2000\n\n// \"inherits\"  æ˜¯ç»§æ‰¿æ ‡è¯†ï¼Œå½“ä½ åªéœ€è¦å¯¹æŸä¸ªå¤–ç½®è§„åˆ™ä¸­ å¢åˆ æ”¹ éƒ¨åˆ†è§„åˆ™å†…å®¹æ—¶ï¼ˆæ¯”å¦‚åªæ˜¯ä¿®æ”¹åŸŸåï¼‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥åƒä¸‹é¢ç¬¬äºŒä¸ª \"aaa\" è§„åˆ™ä¸€æ ·å†™ä¸€ä¸ªåŒåè§„åˆ™ï¼Œè§„åˆ™å†…åªéœ€è¦æœ‰è¦ä¿®æ”¹çš„ host å†…å®¹ï¼Œä»¥åŠ inherits æ ‡è¯†ï¼Œè¿™æ ·è„šæœ¬å°±ä¼šå°†è¿™ä¸ªè‡ªå®šä¹‰ç¿»é¡µè§„åˆ™ä¸­çš„ host è¦†ç›–æ‰å¤–ç½®ç¿»é¡µè§„åˆ™ä¸­çš„ hostï¼Œè€Œè¯¥ç¿»é¡µè§„åˆ™å†…çš„å…¶ä»–è§„åˆ™å†…å®¹åˆ™ä¸å˜ã€‚å³æ›´çµæ´»äº†ï¼Œæ— éœ€æ¯æ¬¡ä¸ºäº†ä¿®æ”¹éƒ¨åˆ†è§„åˆ™è€Œå»å¤åˆ¶å…¨éƒ¨è§„åˆ™äº†ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘åç»­æ›´æ–°è¿™ä¸ªå¤–ç½®è§„åˆ™åï¼Œä½ è¿˜éœ€è¦å†æ¬¡å¤åˆ¶ä¸€éæ¥ä¿®æ”¹ã€‚ã€‚ã€‚\n\n{\n    \"aaa\": {\n        \"host\": \"aaaa\",\n        \"url\": \"return fun.isPager()\",\n        \"pager\": {\n            \"nextL\": \"xxxx\",\n            \"pageE\": \"xxxx\",\n            \"replaceE\": \"xxxx\",\n            \"scrollD\": 2000\n        }\n    },\n    \"aaa\": {\n        \"host\": \"cccc\",\n        \"inherits\": true\n    },\n    \"bbb\": {\n        \"host\": [\"bbb1.com\", \"bbb2.com\"],\n        \"url\": \"/^\\\\\\\\/s$/\",\n        \"style\": \".aaaa {xxx: xxx}ï¼ˆå¦‚æœåªæ˜¯ä¸ºäº†å•çº¯å±è”½éšè—æŸäº›å…ƒç´ ï¼Œé‚£ä¹ˆè¿™é‡Œåªéœ€è¦å†™ CSS é€‰æ‹©å™¨å³å¯ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨åœ¨æœ«å°¾åŠ ä¸Š {display: none !important;} çš„ï¼‰\",\n        \"blank\": 3,\n        \"hiddenPN\": true,\n        \"history\": false,\n        \"thread\": true,\n        \"iframe\": true,\n        \"pager\": {\n            \"type\": 1,\n            \"nextL\": \"id('page')//a[contains(text(),'ä¸‹ä¸€é¡µ')] || id('page2')//a[text()='ä¸‹ä¸€é¡µ']\",\n            \"pageE\": \"aaa\",\n            \"insertP\": [\".bbb\",3],\n            \"replaceE\": \".page\",\n            \"scriptT\": 1,\n            \"forceHTTPS\": true,\n            \"interval\": 500,\n            \"scrollD\": 2000\n        },\n        \"function\": {\n            \"bF\": \"return fun.src_bF(pageE, [0,'img[data-src]','data-src'])\",\n            \"bFp\": \"å…³äºä¸Šé¢è¿™ä¸ªè§£å†³å›¾ç‰‡æ‡’åŠ è½½çš„ bFï¼Œå¦‚æœä½ è¦é€‰æ‹©çš„å›¾ç‰‡æ˜¯ img[data-original] æˆ– img[data-src]ï¼Œé‚£ä¹ˆæ˜¯å¯ä»¥ç›´æ¥çœç•¥ä¸ºï¼šreturn fun.src_bF(pageE)\",\n            \"aF\": \"document.body.appendChild(document.createElement('script')).textContent = 'xxx'\"\n        }\n    },\n    \"è¿™é‡Œä¹Ÿå¯ä»¥ç”¨ä¸­æ–‡\": {\n        \"host\": \"/\\\\\\\\.ccc\\\\\\\\.com/\",\n        \"url\": \"fun.isUrlC(); return (fun.lp() == '/' || fun.indexOF('/s') || fun.isMobile())\",\n        \"pager\": {\n            \"type\": 2,\n            \"nextL\": \"#autopbn\",\n            \"nextText\": \"ä¸‹ä¸€é¡µ\",\n            \"nextTextOf\": \"ä¸‹ä¸€é¡µ\",\n            \"isHidden\": true,\n            \"interval\": 1000,\n            \"scrollD\": 2000\n        }\n    }\n}\n</pre></details>\n<details><summary style=\"cursor: pointer;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;\"><kbd><strong>ã€Œ ç‚¹å‡»å±•å¼€ æŸ¥çœ‹æ‰€æœ‰è§„åˆ™ ã€ï¼ˆå¯æŒ‰ Ctrl+F æœç´¢è§„åˆ™ï¼Œè„šæœ¬å†…ç½®çš„é€šç”¨è§„åˆ™å› æ ¼å¼é™åˆ¶æ— æ³•åˆ—å‡ºï¼‰</strong></kbd></summary>\n<pre id=\"Autopage_customRules_all\" class=\"notranslate\" style=\"overflow-y: scroll; overflow-x: hidden; height: 500px; word-break: break-all; white-space: pre-wrap;user-select: auto;\"> </pre></details>\n\n<textarea id=\"Autopage_customRules_textarea\" style=\"min-width:95%; min-height:70%; display: block; margin: 10px 0 10px 0; white-space:pre; overflow:scroll; resize: revert; text-transform: initial;\" placeholder=\"ç•™ç©ºç­‰äºé»˜è®¤çš„ {}ï¼Œè¯·æŠŠè§„åˆ™æ’å…¥ {} ä¹‹é—´\"></textarea>\n<button id=\"Autopage_customRules_save\" style=\"margin-right: 20px;\">ä¿å­˜å¹¶åˆ·æ–°</button><button id=\"Autopage_customRules_cancel\">å–æ¶ˆä¿®æ”¹</button>\n</div>`\n        document.documentElement.insertAdjacentHTML('beforeend', `<div id=\"Autopage_customRules\" style=\"display: initial !important;position: fixed !important;z-index: 9999999 !important;\"></div>`);\n        let Autopage_customRules = getCSS('#Autopage_customRules'), shadowRoot = Autopage_customRules.attachShadow({ mode: 'open' }); // åˆ›å»ºä¸€ä¸ª Shadow DOM é¿å…ç½‘é¡µæ ·å¼å½±å“è‡ªå®šä¹‰ç¿»é¡µè§„åˆ™å…ƒç´ \n        shadowRoot.innerHTML = _html; // æ’å…¥å…ƒç´ \n        document.documentElement.style.overflow = document.body.style.overflow = 'hidden'; // é¿å…ç½‘é¡µæœ¬èº«æ»šåŠ¨\n        getCSS('#Autopage_customRules_textarea', shadowRoot).textContent = customRules; // å•ç‹¬æ’å…¥è‡ªå®šä¹‰è§„åˆ™ï¼Œé¿å…è¢« insertAdjacentHTML è¯­ä¹‰åŒ– HTML æ ‡ç­¾\n        getCSS('#Autopage_customRules_all', shadowRoot).textContent = customStringify(DBSite2); // å•ç‹¬æ’å…¥å…¨éƒ¨è§„åˆ™åˆ—è¡¨ï¼Œé¿å…è¢« insertAdjacentHTML è¯­ä¹‰åŒ– HTML æ ‡ç­¾\n        //let b=Object.entries(DBSite2)\n        //for (var i = 0; i < b.length; i++) {console.log(b[i][0], b[i][1].host);}\n        // ç‚¹å‡»äº‹ä»¶\n        getCSS('#Autopage_customRules_save', shadowRoot).onclick = function () {\n            customRules = getCSS('#Autopage_customRules_textarea', shadowRoot).value;\n            //console.log(customRules)\n            if (!customRules) customRules = '{}'\n            try {\n                customRules = JSON.parse(customRules)\n                //console.log(customRules)\n                GM_setValue('menu_customRules', customRules)\n                location.reload();\n            } catch (e) {\n                console.error('è‡ªå®šä¹‰è§„åˆ™å­˜åœ¨æ ¼å¼é”™è¯¯ï¼š\\n' + e + '\\n\\næ ¼å¼é”™è¯¯ä¸€èˆ¬ä¸ºï¼š\\nÂ· é€—å·ï¼šæ¯ç»„ {} ä¸­çš„æœ€åä¸€ä¸ªå€¼æœ«å°¾ä¸èƒ½åŠ é€—å·\\n\\nÂ· è½¬ä¹‰ï¼šå¦‚æœæ­£åˆ™è¡¨è¾¾å¼ä¸­å«æœ‰è½¬ä¹‰ç¬¦ \\\\ é‚£å°±è¦å¯¹å…¶å†æ¬¡è½¬ä¹‰ä¸º \\\\\\\\\\n\\nÂ· åŒå¼•å·ï¼šè§„åˆ™ä¸­å†’å·å·¦å³çš„å†…å®¹éƒ½éœ€è¦åŠ ä¸ŠåŒå¼•å·ï¼Œå¦‚æœå†…å®¹ä¸­å«æœ‰åŒå¼•å·åˆ™éœ€è¦å¯¹åŒå¼•å·è½¬ä¹‰ï¼ˆå³ \\\\\" è¿™æ ·ï¼‰ï¼Œæˆ–æ”¹ä¸ºå•å¼•å·')\n                window.alert('è‡ªå®šä¹‰è§„åˆ™å­˜åœ¨æ ¼å¼é”™è¯¯ï¼š\\n' + e + '\\n\\næ ¼å¼é”™è¯¯ä¸€èˆ¬ä¸ºï¼š\\nÂ· é€—å·ï¼šæ¯ç»„ {} ä¸­çš„æœ€åä¸€ä¸ªå€¼æœ«å°¾ä¸èƒ½åŠ é€—å·\\n\\nÂ· è½¬ä¹‰ï¼šå¦‚æœæ­£åˆ™è¡¨è¾¾å¼ä¸­å«æœ‰è½¬ä¹‰ç¬¦ \\\\ é‚£å°±è¦å¯¹å…¶å†æ¬¡è½¬ä¹‰ä¸º \\\\\\\\\\n\\nÂ· åŒå¼•å·ï¼šè§„åˆ™ä¸­å†’å·å·¦å³çš„å†…å®¹éƒ½éœ€è¦åŠ ä¸ŠåŒå¼•å·ï¼Œå¦‚æœå†…å®¹ä¸­å«æœ‰åŒå¼•å·åˆ™éœ€è¦å¯¹åŒå¼•å·è½¬ä¹‰ï¼ˆå³ \\\\\" è¿™æ ·ï¼‰ï¼Œæˆ–æ”¹ä¸ºå•å¼•å·');\n            }\n        }\n        getCSS('#Autopage_customRules_cancel', shadowRoot).onclick = function () {document.documentElement.style.overflow = document.body.style.overflow = ''; getCSS('#Autopage_customRules').remove();}\n    }\n\n    // è‡ªå®šä¹‰çš„ stringify å‡½æ•°ï¼Œå°† [ ] å†…çš„å…ƒç´ ä»é»˜è®¤çš„ æ¢è¡Œæ˜¾ç¤º æ ¼å¼åŒ–ä¸º ä¸€è¡Œæ˜¾ç¤ºï¼Œç”¨äºæ˜¾ç¤ºè‡ªå®šä¹‰ç¿»é¡µè§„åˆ™ç­‰ç»™ç”¨æˆ·çœ‹çš„åœºæ™¯\n    function customStringify(obj) {\n        return JSON.stringify(obj, null, 4)\n            .replace(/(: \\[)([\\s\\S]*?)(\\],?\\n)/g, (match, p1, p2, p3) => {\n            return p1 + p2.replace(/\\n/g, '').replace(/\\s{4}/g, '') + p3;\n        });\n    }\n\n    // æ˜¾ç¤ºé¡µç \n    function pageNumber(type) {\n        if (curSite.SiteTypeID === 0 || curSite.hiddenPN || (curSite.pager && curSite.pager.type == 5 && self != top)) {if (getCSS('#Autopage_number') && getCSS('#Autopage_number').shadowRoot) {getCSS('#Autopage_number_button', getCSS('#Autopage_number').shadowRoot).style.display = 'none';}; return}\n        let status\n        if (getCSS('#Autopage_number') && getCSS('#Autopage_number').shadowRoot) {status = getCSS('#Autopage_number_button', getCSS('#Autopage_number').shadowRoot);}\n        switch (type) {\n            case 'add':\n                add(); break;\n            case 'del':\n                del(); break;\n            case 'set':\n                set(); break;\n        }\n\n        function add(){\n            if (status) {\n                if (status.style.display === 'none') {status.style.display = 'flex';}\n                return\n            }\n            // æ’å…¥ç½‘é¡µ\n            let _style = `<style>#Autopage_number_button {top: calc(75vh);left: 0;width: 32px;height: 32px;padding: 6px;display: flex;position: fixed;opacity: 0.3;transition: .2s;z-index: 9999998;cursor: pointer;user-select: none;flex-direction: column;align-items: center;justify-content: center;box-sizing: content-box;border-radius: 0 50% 50% 0;transform-origin: center;transform: translateX(-8px);background-color: #eee;-webkit-tap-highlight-color: transparent;box-shadow: 1px 1px 3px 0px #aaa;color: #000;font-size: medium;font-family: system-ui;} @media (any-hover: none) {#Autopage_number_button:active {opacity: 0.8;transform: translateX(0);}}@media (any-hover: hover) {#Autopage_number_button:hover {opacity: 0.8;transform: translateX(0);}}</style>`,\n                _html = `<div id=\"Autopage_number_button\" title=\"1. æ­¤ä¸ºã€å½“å‰é¡µç ã€‘ï¼ˆä»…æŒ‡è„šæœ¬ç¿»äº†å¤šå°‘é¡µï¼Œå¹¶éå®é™…é¡µç ï¼Œè¯¥é¡µç å¯åœ¨è„šæœ¬èœå•ä¸­å…³é—­ï¼‰&#10;&#10;2. é¼ æ ‡ã€å·¦é”®ã€‘ç‚¹å‡»æ­¤å¤„å¯ã€ä¸´æ—¶æš‚åœç¿»é¡µã€‘ï¼ˆå†æ¬¡ç‚¹å‡»å¯æ¢å¤ï¼‰&#10;&#10;3. é¼ æ ‡ã€å³é”®ã€‘ç‚¹å‡»æ­¤å¤„å¯ã€å›åˆ°é¡¶éƒ¨ã€‘\">${pageNum._now}</div>`\n\n            document.documentElement.insertAdjacentHTML('beforeend', `<div id=\"Autopage_number\" style=\"display: flex !important;position: fixed !important;z-index: 9999998 !important;\"></div>`);\n            let Autopage_number = getCSS('#Autopage_number'), shadowRoot = Autopage_number.attachShadow({ mode: 'open' }); // åˆ›å»ºä¸€ä¸ª Shadow DOM é¿å…ç½‘é¡µæ ·å¼å½±å“é¡µç å…ƒç´ \n            shadowRoot.innerHTML = _style + _html; // æ’å…¥å…ƒç´ \n\n            if (curSite.pager && curSite.pager.type == 5) window.top.document.xiu_pausePage = pausePage\n            status = getCSS('#Autopage_number_button', shadowRoot);\n            // å·¦é”®ç‚¹å‡»äº‹ä»¶ï¼ˆä¸´æ—¶æš‚åœç¿»é¡µï¼‰\n            status.onclick = function(e) {\n                if (pausePage) {this.style.color = '#FF5722'; this.style.fontStyle = 'italic';} else {this.style = '';}\n                pausePage = !pausePage;\n                if (curSite.pager && curSite.pager.type == 5) window.top.document.xiu_pausePage = pausePage\n                e.preventDefault();\n                e.stopPropagation();\n                return false\n            };\n            // å³é”®ç‚¹å‡»äº‹ä»¶ï¼ˆå›åˆ°é¡¶éƒ¨ï¼‰\n            status.oncontextmenu = function(e) {\n                window.scrollTo(0,0);\n                e.preventDefault();\n                e.stopPropagation();\n                return false\n            };\n            set();\n        }\n        // ç›‘å¬å‚¨å­˜å½“å‰é¡µç çš„å¯¹è±¡å€¼çš„å˜åŒ–\n        function set(){\n            Object.defineProperty(pageNum, 'now', {\n                set: function(value) {\n                    this._now = value;\n                    if (status) status.textContent = value;\n                }\n            });\n        }\n        function del(){\n            if (!status) return\n            status.style.display = 'none';\n        }\n    }\n\n    // é¡µç é€’å¢ï¼Œçœç•¥å‚æ•°é»˜è®¤ +1\n    function pageNumIncrement(num = 1) {\n        pageNum.now = pageNum._now + num\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status === true){\n            GM_setValue(Name, false);\n        } else {\n            GM_setValue(Name, true);\n        }\n        if (Name === 'menu_page_number') {\n            if (menu_status === true){pageNumber('del');} else {pageNumber('add');}\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n            if (curSite.SiteTypeID !== 0 && curSite.pager) { // è§£å†³å¼€å…³é¡µç å ç¿»é¡µå¤±æ•ˆçš„é—®é¢˜\n                if (curSite.pager.type === undefined) curSite.pager.type = 1; // é»˜è®¤ç¿»é¡µæ¨¡å¼ 1\n                if (curSite.pager.scrollD === undefined) curSite.pager.scrollD = 2000; // é»˜è®¤ç¿»é¡µè§¦å‘çº¿ 2000\n                if (curSite.pager.interval === undefined) curSite.pager.interval = 500; // é»˜è®¤é—´éš”æ—¶é—´ 500ms\n            }\n        } else {\n            location.reload();}\n    };\n    // ç”Ÿæˆ SiteTypeID\n    function setSiteTypeID() {\n        let num = 0\n        for (let val in DBSite) {\n            DBSite[val].SiteTypeID = ++num;\n        }\n    }\n    // éå† loadMoreExclude æ•°ç»„ï¼Œåˆ¤æ–­æ˜¯å¦åŒ…å«åŸŸå\n    function loadMoreExclude(l) {\n        for (let i=0; i<l.length; i++) {\n            if (location.hostname.indexOf(l[i]) != -1) return false\n        }\n        return true\n    }\n    // è·å– Cookie\n    function getCookie(name) {\n        if (!name) return ''\n        let arr = document.cookie.split(';');\n        name += '='\n        for (let i=0; i<arr.length; i++) {\n            let now = arr[i].trim();\n            if (now.indexOf(name) == 0) return now.substring(name.length, now.length);\n        }\n        return '';\n    }\n    // æ’å…¥ä½ç½®\n    function getAddTo(num) {\n        switch (num) {\n            case 1:\n                return 'beforebegin'; break;\n            case 2:\n                return 'afterbegin'; break;\n            case 3:\n            case 6:\n                return 'beforeend'; break;\n            case 4:\n            case 5:\n                return 'afterend'; break;\n        }\n    }\n    // æ’å…¥ä½ç½® 5 æ—¶ï¼Œæ’é™¤ <script> <style> <link> æ ‡ç­¾\n    function toE5pop(a) {\n        if (a.length === 0) return\n        let b = a.pop();\n        if (b.tagName === 'SCRIPT' || b.tagName === 'STYLE' || b.tagName === 'LINK') {\n            return toE5pop(a);\n        }\n        return b\n    }\n    // æ»šåŠ¨æ¡äº‹ä»¶\n    function windowScroll(fn1) {\n        var beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n            fn = fn1 || function () {};\n        setTimeout(function () { // å»¶æ—¶ 1 ç§’æ‰§è¡Œï¼Œé¿å…åˆšè½½å…¥åˆ°é¡µé¢å°±è§¦å‘ç¿»é¡µäº‹ä»¶\n\n            // é¿å…ç½‘é¡µå†…å®¹å¤ªå°‘ï¼Œé«˜åº¦æ’‘ä¸èµ·æ¥ï¼Œä¸æ˜¾ç¤ºæ»šåŠ¨æ¡è€Œæ— æ³•è§¦å‘ç¿»é¡µäº‹ä»¶\n            let scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop,\n                scrollHeight = window.innerHeight || document.documentElement.clientHeight\n            if (scrollTop === 0 && document.documentElement.scrollHeight === scrollHeight) {\n                insStyle(`html, body {min-height: ${document.documentElement.scrollHeight+10}px;}`)\n            }\n\n            window.addEventListener('scroll', function (e) {\n                var afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n                    delta = afterScrollTop - beforeScrollTop;\n                if (delta == 0) return false;\n                fn(delta > 0 ? 'down' : 'up', e);\n                beforeScrollTop = afterScrollTop;\n            }, false);\n        }, 1000)\n    }\n    // è‡ªå®šä¹‰ urlchange äº‹ä»¶ï¼ˆç”¨æ¥ç›‘å¬ URL å˜åŒ–ï¼‰\n    function addUrlChangeEvent() {\n        history.pushState = ( f => function pushState(){\n            var ret = f.apply(this, arguments);\n            window.dispatchEvent(new Event('pushstate'));\n            window.dispatchEvent(new Event('urlchange'));\n            return ret;\n        })(history.pushState);\n\n        history.replaceState = ( f => function replaceState(){\n            var ret = f.apply(this, arguments);\n            window.dispatchEvent(new Event('replacestate'));\n            window.dispatchEvent(new Event('urlchange'));\n            return ret;\n        })(history.replaceState);\n\n        window.addEventListener('popstate',()=>{\n            window.dispatchEvent(new Event('urlchange'))\n        });\n    }\n})();"
        },
        {
          "name": "CNAME",
          "type": "blob",
          "size": 0.0185546875,
          "content": "userscript.xiu2.xyz"
        },
        {
          "name": "DarkMode.user.js",
          "type": "blob",
          "size": 31.3076171875,
          "content": "// ==UserScript==\n// @name         æŠ¤çœ¼æ¨¡å¼\n// @name:zh-CN   æŠ¤çœ¼æ¨¡å¼\n// @name:zh-TW   è­·çœ¼æ¨¡å¼\n// @name:en      Dark Mode\n// @version      1.5.5\n// @author       X.I.U\n// @description  ç®€å•æœ‰æ•ˆçš„å…¨ç½‘é€šç”¨æŠ¤çœ¼æ¨¡å¼ï¼ˆå¤œé—´æ¨¡å¼ã€æš—é»‘æ¨¡å¼ã€æ·±è‰²æ¨¡å¼ï¼‰\n// @description:zh-CN  ç®€å•æœ‰æ•ˆçš„å…¨ç½‘é€šç”¨æŠ¤çœ¼æ¨¡å¼ï¼ˆå¤œé—´æ¨¡å¼ã€æš—é»‘æ¨¡å¼ã€æ·±è‰²æ¨¡å¼ï¼‰\n// @description:zh-TW  ç°¡å–®æœ‰æ•ˆçš„å…¨ç¶²é€šç”¨è­·çœ¼æ¨¡å¼ï¼ˆå¤œé–“æ¨¡å¼ã€æš—é»‘æ¨¡å¼ã€æ·±è‰²æ¨¡å¼ï¼‰\n// @description:en  Simple and effective network-wide eye protection mode (night mode, dark mode, dark mode)\n// @match        *://*/*\n// @icon         data:image/png;base64,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\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @sandbox      JavaScript\n// @noframes\n// @license      GPL-3.0 License\n// @run-at       document-start\n// @namespace    https://github.com/XIU2/UserScript\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ALL = [\n        ['menu_disable', 'âœ… å·²å¯ç”¨ (ç‚¹å‡»å¯¹å½“å‰ç½‘ç«™ç¦ç”¨)', 'âŒ å·²ç¦ç”¨ (ç‚¹å‡»å¯¹å½“å‰ç½‘ç«™å¯ç”¨)', []],\n        ['menu_runDuringTheDay', 'ç™½å¤©ä¿æŒå¼€å¯ (æ¯”æ™šä¸Šäº®ä¸€ç‚¹ç‚¹)', 'ç™½å¤©ä¿æŒå¼€å¯', true],\n        ['menu_darkModeAuto', 'æŠ¤çœ¼æ¨¡å¼è·Ÿéšæµè§ˆå™¨', 'æŠ¤çœ¼æ¨¡å¼è·Ÿéšæµè§ˆå™¨', false],\n        ['menu_autoRecognition', 'æ™ºèƒ½æ’é™¤è‡ªå¸¦æš—é»‘æ¨¡å¼çš„ç½‘é¡µ (beta)', 'æ™ºèƒ½æ’é™¤è‡ªå¸¦æš—é»‘æ¨¡å¼çš„ç½‘é¡µ (beta)', true],\n        ['menu_forcedToEnable', 'âœ… å·²å¼ºåˆ¶å½“å‰ç½‘ç«™å¯ç”¨æŠ¤çœ¼æ¨¡å¼ (ğŸ‘†)', 'âŒ æœªå¼ºåˆ¶å½“å‰ç½‘ç«™å¯ç”¨æŠ¤çœ¼æ¨¡å¼ (ğŸ‘†)', []],\n        ['menu_darkModeType', 'ç‚¹å‡»åˆ‡æ¢æ¨¡å¼', 'ç‚¹å‡»åˆ‡æ¢æ¨¡å¼', 2],\n        ['menu_customMode', 'è‡ªå®šä¹‰å½“å‰æ¨¡å¼', 'è‡ªå®šä¹‰å½“å‰æ¨¡å¼', true], ['menu_customMode1',,,'60|50'], ['menu_customMode2',,,'60|40|50|50'], ['menu_customMode3',,,'90'], ['menu_customMode3_exclude',,,'img, .img, video, [style*=\"background\"][style*=\"url\"], svg'],\n        ['menu_customTime', 'è‡ªå®šä¹‰æ˜¼å¤œæ—¶é—´', 'è‡ªå®šä¹‰æ˜¼å¤œæ—¶é—´', '6:00|18:00'],\n        ['menu_autoSwitch', 'æ™šä¸Šè‡ªåŠ¨åˆ‡æ¢æ¨¡å¼', 'æ™šä¸Šè‡ªåŠ¨åˆ‡æ¢æ¨¡å¼', ''],\n    ], menu_ID = [];\n    for (let i=0;i<menu_ALL.length;i++){ // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n        if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};\n    }\n    registerMenuCommand();\n\n    // è‡ªå®šä¹‰æ˜¼å¤œæ—¶é—´ è¿‡æ¸¡æ€§è°ƒæ•´ï¼ˆç²¾ç¡®åˆ°åˆ†é’Ÿï¼‰ï¼Œè¿‡æ®µæ—¶é—´ç§»é™¤\n    if (GM_getValue('menu_customTime', '').indexOf(':') === -1) GM_setValue('menu_customTime', GM_getValue('menu_customTime', '6|18').replace('|',':00|') + ':00')\n\n    if (menu_ID.length > 1) {addStyle();}\n\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (menu_ID.length != []){\n            for (let i=0;i<menu_ID.length;i++){\n                GM_unregisterMenuCommand(menu_ID[i]);\n            }\n        }\n        for (let i=0;i<menu_ALL.length;i++){ // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n            menu_ALL[i][3] = GM_getValue(menu_ALL[i][0]);\n            if (menu_ALL[i][0] === 'menu_disable')\n            { // å¯ç”¨/ç¦ç”¨æŠ¤çœ¼æ¨¡å¼ (å½“å‰ç½‘ç«™)\n                if (menu_disable('check')) { // å½“å‰ç½‘ç«™æ˜¯å¦å·²å­˜åœ¨ç¦ç”¨åˆ—è¡¨ä¸­\n                    menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][2]}`, function(){menu_disable('del')});\n                    return\n                } else {\n                    if (GM_getValue('menu_darkModeAuto') && !window.matchMedia('(prefers-color-scheme: dark)').matches) {\n                        menu_ID[i] = GM_registerMenuCommand(`âŒ å½“å‰æµè§ˆå™¨ä¸ºç™½å¤©æ¨¡å¼ (ç‚¹å‡»å…³é—­ [æŠ¤çœ¼æ¨¡å¼è·Ÿéšæµè§ˆå™¨])`, function(){GM_setValue('menu_darkModeAuto', false);location.reload();});\n                        return\n                    }\n                    menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][1]}`, function(){menu_disable('add')});\n                }\n            }\n            else if (menu_ALL[i][0] === 'menu_darkModeType')\n            { // ç‚¹å‡»åˆ‡æ¢æ¨¡å¼\n                if (menu_ALL[i][3] > 3) { // é¿å…åœ¨å‡å°‘ raw æ•°ç»„åï¼Œç”¨æˆ·å‚¨å­˜çš„æ•°æ®å¤§äºæ•°ç»„è€ŒæŠ¥é”™\n                    menu_ALL[i][3] = 1;\n                    GM_setValue(menu_ALL[i][0], menu_ALL[i][3]);\n                }\n                let menu_newMode = getAutoSwitch();\n                menu_ID[i] = GM_registerMenuCommand(`${menu_num(menu_newMode)} ${menu_ALL[i][1]}`, function(){menu_toggle(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`)});\n            }\n            else if (menu_ALL[i][0] === 'menu_customMode')\n            { // è‡ªå®šä¹‰å½“å‰æ¨¡å¼\n                GM_setValue(menu_ALL[i][0], menu_ALL[i][3]);\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){menu_customMode()});\n            }\n            else if (menu_ALL[i][0] === 'menu_customTime')\n            { // è‡ªå®šä¹‰æ˜¼å¤œæ—¶é—´\n                GM_setValue(menu_ALL[i][0], menu_ALL[i][3]);\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){menu_customTime()});\n            }\n            else if (menu_ALL[i][0] === 'menu_customMode1' || menu_ALL[i][0] === 'menu_customMode2' || menu_ALL[i][0] === 'menu_customMode3' || menu_ALL[i][0] === 'menu_customMode3_exclude')\n            { // å½“å‰æ¨¡å¼å€¼\n                GM_setValue(menu_ALL[i][0], menu_ALL[i][3]);\n            }\n            else if (menu_ALL[i][0] === 'menu_autoSwitch')\n            { // æ™šä¸Šè‡ªåŠ¨åˆ‡æ¢æ¨¡å¼\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){menu_customAutoSwitch()});\n            }\n            else if (menu_ALL[i][0] === 'menu_forcedToEnable')\n            { // å¼ºåˆ¶å½“å‰ç½‘ç«™å¯ç”¨æŠ¤çœ¼æ¨¡å¼\n                if (menu_value('menu_autoRecognition')) { // è‡ªåŠ¨æ’é™¤è‡ªå¸¦æš—é»‘æ¨¡å¼çš„ç½‘é¡µ (beta)\n                    if (menu_forcedToEnable('check')) { // å½“å‰ç½‘ç«™æ˜¯å¦å·²å­˜åœ¨åˆ—è¡¨ä¸­\n                        menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][1]}`, function(){menu_forcedToEnable('del')});\n                    } else {\n                        menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][2]}`, function(){menu_forcedToEnable('add')});\n                    }\n                }\n            }\n            else\n            {\n                menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n            }\n        }\n        menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/426377/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n\n    // èœå•æ•°å­—å›¾æ ‡\n    function menu_num(num) {\n        return ['0ï¸âƒ£','1ï¸âƒ£','2ï¸âƒ£','3ï¸âƒ£','4ï¸âƒ£','5ï¸âƒ£','6ï¸âƒ£','7ï¸âƒ£','8ï¸âƒ£','9ï¸âƒ£','ğŸ”Ÿ'][num]\n    }\n\n\n    // æ™šä¸Šè‡ªåŠ¨åˆ‡æ¢æ¨¡å¼\n    function menu_customAutoSwitch() {\n        let newAutoSwitch = prompt('ç™½å¤©ã€æ™šä¸Šä½¿ç”¨ä¸åŒæ¨¡å¼ï¼Œä¿®æ”¹åç«‹å³ç”Ÿæ•ˆ~\\næ ¼å¼ï¼šç™½å¤©æ¨¡å¼|æ™šä¸Šæ¨¡å¼\\nä¾‹å¦‚ï¼š1|3ï¼ˆå³ç™½å¤©æ¨¡å¼ 1 æ™šä¸Šæ¨¡å¼ 3ï¼‰\\né»˜è®¤ï¼šç•™ç©ºï¼ˆå³å…³é—­è¯¥åŠŸèƒ½ï¼‰', GM_getValue('menu_autoSwitch'));\n        if (newAutoSwitch === '') {\n            GM_setValue('menu_autoSwitch', '');\n        } else if (newAutoSwitch != null) {\n            if (newAutoSwitch.split('|').length == 2) {\n                GM_setValue('menu_autoSwitch', newAutoSwitch);\n            } else {\n                alert(`å¡«å…¥å†…å®¹æ ¼å¼é”™è¯¯...`);\n            }\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        if (document.getElementById('XIU2DarkMode')) {\n            document.getElementById('XIU2DarkMode').remove(); // å³æ—¶ä¿®æ”¹æ ·å¼\n            addStyle();\n        }\n    }\n    // è·å–å½“å‰æ¨¡å¼\n    function getAutoSwitch() {\n        let darkModeType = GM_getValue('menu_darkModeType'), hours = new Date().getHours(), time = GM_getValue('menu_customTime').split('|').map(Number);\n        if (GM_getValue('menu_autoSwitch') != '') { // æ™šä¸Šè‡ªåŠ¨åˆ‡æ¢æ¨¡å¼\n            if (isDaytime()) { // ç™½å¤©\n                darkModeType = GM_getValue('menu_autoSwitch').split('|')[0];\n            } else { // æ™šä¸Š\n                darkModeType = GM_getValue('menu_autoSwitch').split('|')[1];\n            }\n        }\n        return parseInt(darkModeType)\n    }\n\n\n    // è‡ªå®šä¹‰å½“å‰æ¨¡å¼\n    function menu_customMode() {\n        let newMods, tip, defaults, name;\n        switch(getAutoSwitch()) {\n            case 1:\n                tip = 'è‡ªå®šä¹‰ [æ¨¡å¼ 1]ï¼Œä¿®æ”¹åç«‹å³ç”Ÿæ•ˆ (éƒ¨åˆ†ç½‘é¡µå¯èƒ½éœ€è¦åˆ·æ–°)~\\næ ¼å¼ï¼šäº®åº¦ (ç™½å¤©)|äº®åº¦ (æ™šä¸Š)\\né»˜è®¤ï¼š60|50ï¼ˆå‡ä¸ºç™¾åˆ†æ¯” 1~100ï¼Œä¸éœ€è¦ % ç¬¦å·ï¼‰';\n                defaults = '60|50';\n                name = 'menu_customMode1';\n                break;\n            case 2:\n                tip = 'è‡ªå®šä¹‰ [æ¨¡å¼ 2]ï¼Œä¿®æ”¹åç«‹å³ç”Ÿæ•ˆ (éƒ¨åˆ†ç½‘é¡µå¯èƒ½éœ€è¦åˆ·æ–°)~\\næ ¼å¼ï¼šäº®åº¦ (ç™½å¤©)|æš–è‰² (ç™½å¤©)|äº®åº¦ (æ™šä¸Š)|æš–è‰² (æ™šä¸Š)\\né»˜è®¤ï¼š60|40|50|50ï¼ˆå‡ä¸ºç™¾åˆ†æ¯” 1~100ï¼Œä¸éœ€è¦ % ç¬¦å·ï¼‰';\n                defaults = '60|40|50|50';\n                name = 'menu_customMode2';\n                break;\n            case 3:\n                tip = 'è‡ªå®šä¹‰ [æ¨¡å¼ 3]ï¼Œä¿®æ”¹åç«‹å³ç”Ÿæ•ˆ (éƒ¨åˆ†ç½‘é¡µå¯èƒ½éœ€è¦åˆ·æ–°)~\\næ ¼å¼ï¼šåè‰²\\né»˜è®¤ï¼š90ï¼ˆå‡ä¸ºç™¾åˆ†æ¯” 50~100ï¼Œä¸éœ€è¦ % ç¬¦å·ï¼‰';\n                defaults = '90';\n                name = 'menu_customMode3';\n                break;\n        }\n        newMods = prompt(tip, GM_getValue(`${name}`));\n        if (newMods === '') {\n            GM_setValue(`${name}`, defaults);\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        } else if (newMods != null) {\n            GM_setValue(`${name}`, newMods);\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        }\n        if (getAutoSwitch() == 3) {\n            tip = 'è‡ªå®šä¹‰ [æ¨¡å¼ 3] æ’é™¤ç›®æ ‡ï¼Œä¿®æ”¹åç«‹å³ç”Ÿæ•ˆ (éƒ¨åˆ†ç½‘é¡µå¯èƒ½éœ€è¦åˆ·æ–°)~\\næ ¼å¼ï¼šCSS é€‰æ‹©å™¨ (å¦‚æœä¸ä¼šå†™å¯ä»¥æ‰¾æˆ‘)\\né»˜è®¤ï¼šimg, .img, video, [style*=\"background\"][style*=\"url\"], svg\\n (ä½¿ç”¨è‹±æ–‡é€—å·é—´éš”ï¼Œæœ«å°¾ä¸è¦æœ‰é€—å·)';\n            defaults = 'img, .img, video, [style*=\"background\"][style*=\"url\"], svg';\n            name = 'menu_customMode3_exclude';\n            newMods = prompt(tip, GM_getValue(`${name}`));\n            if (newMods === '') {\n                GM_setValue(`${name}`, defaults);\n                registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n            } else if (newMods != null) {\n                GM_setValue(`${name}`, newMods);\n                registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n            }\n        }\n        if (document.getElementById('XIU2DarkMode')) {\n            document.getElementById('XIU2DarkMode').remove(); // å³æ—¶ä¿®æ”¹æ ·å¼\n            addStyle();\n        }\n    }\n\n\n    // è‡ªå®šä¹‰æ˜¼å¤œæ—¶é—´\n    function menu_customTime() {\n        let newMods = prompt('è‡ªå®šä¹‰è„šæœ¬å†…å’Œç™½å¤©/æ™šä¸Šç›¸å…³çš„æ—¶é—´ï¼Œä¿®æ”¹ååˆ·æ–°ç½‘é¡µç”Ÿæ•ˆ~\\næ ¼å¼ï¼š6:00|18:30 (å³ 6:00 ~ 18:30 ä¹‹é—´æ˜¯ç™½å¤©æ—¶é—´)\\nä¹Ÿæ”¯æŒåå‘è®¾ç½®ï¼š14:00|12:00 (å³ 12:00 ~ 14:00 ä¹‹é—´æ˜¯å¤œæ™šæ—¶é—´)', GM_getValue('menu_customTime'));\n        if (newMods === '') {\n            GM_setValue('menu_customTime', '6:00|18:00');\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        } else if (newMods != null) {\n            GM_setValue('menu_customTime', newMods);\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        }\n    }\n\n\n    // å¼ºåˆ¶å½“å‰ç½‘ç«™å¯ç”¨æŠ¤çœ¼æ¨¡å¼\n    function menu_forcedToEnable(type) {\n        switch(type) {\n            case 'check':\n                if(check()) return true\n                return false\n                break;\n            case 'add':\n                add();\n                break;\n            case 'del':\n                del();\n                break;\n        }\n\n        function check() { // å­˜åœ¨è¿”å›çœŸï¼Œä¸å­˜åœ¨è¿”å›å‡\n            let websiteList = menu_value('menu_forcedToEnable'); // è¯»å–ç½‘ç«™åˆ—è¡¨\n            if (websiteList.indexOf(location.host) === -1) return false // ä¸å­˜åœ¨è¿”å›å‡\n            return true\n        }\n\n        function add() {\n            if (check()) return\n            let websiteList = menu_value('menu_forcedToEnable'); // è¯»å–ç½‘ç«™åˆ—è¡¨\n            websiteList.push(location.host); // è¿½åŠ ç½‘ç«™åŸŸå\n            GM_setValue('menu_forcedToEnable', websiteList); // å†™å…¥é…ç½®\n            location.reload(); // åˆ·æ–°ç½‘é¡µ\n        }\n\n        function del() {\n            if (!check()) return\n            let websiteList = menu_value('menu_forcedToEnable'), // è¯»å–ç½‘ç«™åˆ—è¡¨\n            index = websiteList.indexOf(location.host);\n            websiteList.splice(index, 1); // åˆ é™¤ç½‘ç«™åŸŸå\n            GM_setValue('menu_forcedToEnable', websiteList); // å†™å…¥é…ç½®\n            location.reload(); // åˆ·æ–°ç½‘é¡µ\n        }\n    }\n\n\n    // å¯ç”¨/ç¦ç”¨æŠ¤çœ¼æ¨¡å¼ (å½“å‰ç½‘ç«™)\n    function menu_disable(type) {\n        switch(type) {\n            case 'check':\n                if(check()) return true\n                return false\n                break;\n            case 'add':\n                add();\n                break;\n            case 'del':\n                del();\n                break;\n        }\n\n        function check() { // å­˜åœ¨è¿”å›çœŸï¼Œä¸å­˜åœ¨è¿”å›å‡\n            let websiteList = menu_value('menu_disable'); // è¯»å–ç½‘ç«™åˆ—è¡¨\n            if (websiteList.indexOf(location.host) === -1) return false // ä¸å­˜åœ¨è¿”å›å‡\n            return true\n        }\n\n        function add() {\n            if (check()) return\n            let websiteList = menu_value('menu_disable'); // è¯»å–ç½‘ç«™åˆ—è¡¨\n            websiteList.push(location.host); // è¿½åŠ ç½‘ç«™åŸŸå\n            GM_setValue('menu_disable', websiteList); // å†™å…¥é…ç½®\n            location.reload(); // åˆ·æ–°ç½‘é¡µ\n        }\n\n        function del() {\n            if (!check()) return\n            let websiteList = menu_value('menu_disable'), // è¯»å–ç½‘ç«™åˆ—è¡¨\n            index = websiteList.indexOf(location.host);\n            websiteList.splice(index, 1); // åˆ é™¤ç½‘ç«™åŸŸå\n            GM_setValue('menu_disable', websiteList); // å†™å…¥é…ç½®\n            location.reload(); // åˆ·æ–°ç½‘é¡µ\n        }\n    }\n\n\n    // åˆ‡æ¢æš—é»‘æ¨¡å¼\n    function menu_toggle(menu_status, Name) {\n        menu_status = parseInt(menu_status)\n        if (menu_status >= 3){\n            menu_status = 1;\n        } else {\n            menu_status += 1;\n        }\n        GM_setValue(`${Name}`, menu_status);\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        if (document.getElementById('XIU2DarkMode')) {\n            document.getElementById('XIU2DarkMode').remove(); // å³æ—¶ä¿®æ”¹æ ·å¼\n            addStyle();\n        }\n        //location.reload(); // åˆ·æ–°ç½‘é¡µ\n    };\n\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status == 'true'){\n            GM_setValue(`${Name}`, false);\n            GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }else{\n            GM_setValue(`${Name}`, true);\n            GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }\n        if (Name === 'menu_autoRecognition') {\n            location.reload(); // åˆ·æ–°ç½‘é¡µ\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n\n    // è¿”å›èœå•å€¼\n    function menu_value(menuName) {\n        for (let menu of menu_ALL) {\n            if (menu[0] == menuName) {\n                return menu[3]\n            }\n        }\n    }\n\n\n    // æ·»åŠ æ ·å¼\n    function addStyle() {\n        let remove = false, style_Add = document.createElement('style'),\n            hours = new Date().getHours(),\n            style_10 = menu_value('menu_customMode1').split('|'),\n            style_20 = menu_value('menu_customMode2').split('|'),\n            style_30 = menu_value('menu_customMode3').split('|'),\n            style = ``,\n            style_00 = `html, body {background-color: #ffffff !important;}`,\n            style_11 = `html {filter: brightness(${style_10[0]}%) !important;}`,\n            style_11_firefox = `html {filter: brightness(${style_10[0]}%) !important; background-image: url();}`,\n            style_12 = `html {filter: brightness(${style_10[1]}%) !important;}`,\n            style_12_firefox = `html {filter: brightness(${style_10[1]}%) !important; background-image: url();}`,\n            style_21 = `html {filter: brightness(${style_20[0]}%) sepia(${style_20[1]}%) !important;}`,\n            style_21_firefox = `html {filter: brightness(${style_20[0]}%) sepia(${style_20[1]}%) !important; background-image: url();}`,\n            style_22 = `html {filter: brightness(${style_20[2]}%) sepia(${style_20[3]}%) !important;}`,\n            style_22_firefox = `html {filter: brightness(${style_20[2]}%) sepia(${style_20[3]}%) !important; background-image: url();}`,\n            style_31 = `html {filter: invert(${style_30[0]}%) !important; text-shadow: 0 0 0 !important;}\n            ${menu_value('menu_customMode3_exclude')} {filter: invert(1) !important;}\n            img[alt=\"[å…¬å¼]\"] {filter: none !important;}`,\n            style_31_firefox = `html {filter: invert(${style_30[0]}%) !important; background-image: url(); text-shadow: 0 0 0 !important;}\n            ${menu_value('menu_customMode3_exclude')} {filter: invert(1) !important;}\n            img[alt=\"[å…¬å¼]\"] {filter: none !important;}`,\n            style_31_scrollbar = `::-webkit-scrollbar {height: 12px !important;}\n::-webkit-scrollbar-thumb {border-radius: 0;border-color: transparent;border-style: dashed;background-color: #3f4752 !important;background-clip: padding-box;transition: background-color .32s ease-in-out;}\n::-webkit-scrollbar-corner {background: #202020 !important;}\n::-webkit-scrollbar-track {background-color: #22272e !important;}\n::-webkit-scrollbar-thumb:hover {background: #3f4752 !important;}`;\n\n\n        // Firefox æµè§ˆå™¨éœ€è¦ç‰¹æ®Šå¯¹å¾…\n        if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {\n            style_11 = style_11_firefox\n            style_12 = style_12_firefox\n            style_21 = style_21_firefox\n            style_22 = style_22_firefox\n            style_31 = style_31_firefox\n        }\n\n        // ç™½å¤©\n        if (isDaytime()) {\n            if (menu_value('menu_runDuringTheDay')) {\n                style_12 = style_11\n                style_22 = style_21\n            } else {\n                style_12 = style_22 = ''\n            }\n        }\n\n\n        let darkModeType = getAutoSwitch();\n\n        switch(darkModeType) {\n            case 1:\n                style += style_12;\n                break;\n            case 2:\n                style += style_22;\n                break;\n            case 3:\n                style += style_31 + style_31_scrollbar;\n                if (location.hostname.indexOf('search.bilibili.com') > -1) {\n                    style += `ul.video-list img, ul.video-list .video-item .img .mask-video, ul.video-list .video-item .img .van-danmu, ul.video-list .video-item .img .van-framepreview {filter: none !important;}`\n                } else if (location.hostname.indexOf('.bilibili.com') > -1) {\n                    style += `\n.bpx-player-container[data-screen=\"full\"] .bpx-player-video-wrap {filter: invert(1) !important;}\n.bpx-player-container[data-screen=\"web\"] {filter: invert(1) !important;}\n.bpx-player-container[data-screen=\"web\"] video {filter: none !important;}\n* {font-weight: bold !important;}`\n                } else if (location.hostname.indexOf('.huya.com') > -1) {\n                    style += `#player-wrap[style=\"height: 100%;\"], .player-loading, .sidebar-show, #player-ctrl-wrap {filter: invert(1) !important;}`\n                }\n                break;\n        }\n        style_Add.id = 'XIU2DarkMode';\n        style_Add.type = 'text/css';\n        //console.log(document,document.lastElementChild,document.querySelector('html'))\n        if (document.lastElementChild) {\n            document.lastElementChild.appendChild(style_Add).textContent = style;\n        } else { // å‘ç°ä¸ªåˆ«ç½‘ç«™é€Ÿåº¦å¤ªæ…¢çš„è¯ï¼Œå°±ä¼šå‡ºç°è„šæœ¬è¿è¡Œå¤ªæ—©ï¼Œè¿ html æ ‡ç­¾éƒ½è¿˜æ²¡åŠ è½½ã€‚ã€‚ã€‚\n            let timer1 = setInterval(function(){ // æ¯ 5 æ¯«ç§’æ£€æŸ¥ä¸€ä¸‹ html æ˜¯å¦å·²å­˜åœ¨\n                if (document.lastElementChild) {\n                    clearInterval(timer1); // å–æ¶ˆå®šæ—¶å™¨\n                    document.lastElementChild.appendChild(style_Add).textContent = style;\n                }\n            });\n        }\n\n        let websiteList = [];\n        if (menu_value('menu_autoRecognition')) { // æ™ºèƒ½æ’é™¤è‡ªå¸¦æš—é»‘æ¨¡å¼çš„ç½‘é¡µ (beta)\n            websiteList = menu_value('menu_forcedToEnable'); // å¼ºåˆ¶å½“å‰ç½‘ç«™å¯ç”¨æŠ¤çœ¼æ¨¡å¼\n        }\n\n        // ä¸ºäº†é¿å… body è¿˜æ²¡åŠ è½½å¯¼è‡´æ— æ³•æ£€æŸ¥æ˜¯å¦è®¾ç½®èƒŒæ™¯é¢œè‰²\n        let timer = setInterval(function(){ // æ¯ 5 æ¯«ç§’æ£€æŸ¥ä¸€ä¸‹ body æ˜¯å¦å·²å­˜åœ¨\n            if (document.body) {\n                clearInterval(timer); // å–æ¶ˆå®šæ—¶å™¨ï¼ˆæ¯ 5 æ¯«ç§’ä¸€æ¬¡çš„ï¼‰\n                setTimeout(function(){ // ä¸ºäº†é¿å…å¤ªå¿« body çš„ CSS è¿˜æ²¡åŠ è½½ä¸Šï¼Œå…ˆå»¶è¿Ÿ 150 æ¯«ç§’ï¼ˆç¼ºç‚¹å°±æ˜¯å¯èƒ½ä¼šå‡ºç°çŸ­æš‚ä¸€é—ªè€Œè¿‡çš„æš—é»‘æ»¤é•œï¼‰\n                    console.log('[æŠ¤çœ¼æ¨¡å¼] html:', window.getComputedStyle(document.lastElementChild).backgroundColor, 'body:', window.getComputedStyle(document.body).backgroundColor)\n                    if (window.getComputedStyle(document.body).backgroundColor === 'rgba(0, 0, 0, 0)' && window.getComputedStyle(document.lastElementChild).backgroundColor === 'rgba(0, 0, 0, 0)' && !(document.querySelector('head>meta[name=\"color-scheme\"],head>link[href^=\"resource:\"]') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {\n                        // å¦‚æœ body æ²¡æœ‰ CSS èƒŒæ™¯é¢œè‰²ï¼ˆæˆ–æ˜¯åœ¨èµ„æºé¡µ ä¸” æµè§ˆå™¨ä¸ºç™½å¤©æ¨¡å¼ï¼‰ï¼Œé‚£å°±éœ€è¦æ·»åŠ ä¸€ä¸ªèƒŒæ™¯é¢œè‰²ï¼Œå¦åˆ™å½±å“æ»¤é•œæ•ˆæœ\n                        let style_Add2 = document.createElement('style');\n                        style_Add2.id = 'XIU2DarkMode2';\n                        document.lastElementChild.appendChild(style_Add2).textContent = style_00;\n\n                    } else if ((document.querySelector('head>meta[name=\"color-scheme\"],head>link[href^=\"resource:\"]') && window.matchMedia('(prefers-color-scheme: dark)').matches) || (document.querySelector('html[class*=dark], html[data-dark-theme*=dark], html[data-theme*=dark], html[data-color-mode*=dark], body[class*=dark]')) || (window.getComputedStyle(document.body).backgroundColor === 'rgb(0, 0, 0)') || (getColorValue(document.body) > 0 && getColorValue(document.body) < 898989) || (getColorValue(document.lastElementChild) > 0 && getColorValue(document.lastElementChild) < 898989) || (window.getComputedStyle(document.body).backgroundColor === 'rgba(0, 0, 0, 0)' && window.getComputedStyle(document.lastElementChild).backgroundColor === 'rgb(0, 0, 0)')) {\n                        // å¦‚æœæ˜¯åœ¨èµ„æºé¡µ ä¸” æµè§ˆå™¨ä¸ºæš—é»‘æ¨¡å¼ï¼Œæˆ– html/body å…ƒç´ åŒ…å« dark æ ‡è¯†ï¼Œæˆ–åº•è‰²ä¸ºé»‘è‰² (ç­‰äº0,0,0) æˆ–æ·±è‰² (å°äº 89,89,89)ï¼Œå°±åœç”¨æœ¬è„šæœ¬æ»¤é•œ\n                        if (menu_value('menu_autoRecognition')) { // æ’é™¤è‡ªå¸¦æš—é»‘æ¨¡å¼çš„ç½‘é¡µ (beta)\n                            for (let i=0;i<websiteList.length;i++){ // è¿™äº›ç½‘ç«™å¼ºåˆ¶å¯ç”¨æŠ¤çœ¼æ¨¡å¼æ»¤é•œ\n                                if (websiteList[i] === location.host) return\n                            }\n                            console.log('[æŠ¤çœ¼æ¨¡å¼] æ£€æµ‹åˆ°å½“å‰ç½‘é¡µè‡ªå¸¦æš—é»‘æ¨¡å¼ï¼Œåœç”¨æœ¬è„šæœ¬æ»¤é•œ...')\n                            document.getElementById('XIU2DarkMode').remove();\n                            remove = true;\n                        }\n                    }\n                }, 150);\n\n                // ç”¨æ¥è§£å†³ä¸€äº› CSS åŠ è½½ç¼“æ…¢çš„ç½‘ç«™ï¼Œå¯èƒ½ä¼šå‡ºç°æ²¡æœ‰æ­£ç¡®æ’é™¤çš„é—®é¢˜ï¼Œåœ¨æ²¡æœ‰æ‰¾åˆ°æ›´å¥½çš„åŠæ³•ä¹‹å‰ï¼Œå…ˆè¿™æ ·å‡‘æ´»ç€ç”¨\n                setTimeout(function(){\n                    console.log('[æŠ¤çœ¼æ¨¡å¼] html:', window.getComputedStyle(document.lastElementChild).backgroundColor, 'body:', window.getComputedStyle(document.body).backgroundColor)\n                    if ((document.querySelector('head>meta[name=\"color-scheme\"],head>link[href^=\"resource:\"]') && window.matchMedia('(prefers-color-scheme: dark)').matches) || (document.querySelector('html[class*=dark], html[data-dark-theme*=dark], html[data-theme*=dark], html[data-color-mode*=dark], body[class*=dark]')) || (window.getComputedStyle(document.body).backgroundColor === 'rgb(0, 0, 0)') || (getColorValue(document.body) > 0 && getColorValue(document.body) < 898989) || (getColorValue(document.lastElementChild) > 0 && getColorValue(document.lastElementChild) < 898989) || (window.getComputedStyle(document.body).backgroundColor === 'rgba(0, 0, 0, 0)' && window.getComputedStyle(document.lastElementChild).backgroundColor === 'rgb(0, 0, 0)')) {\n                        // å¦‚æœæ˜¯åœ¨èµ„æºé¡µ ä¸” æµè§ˆå™¨ä¸ºæš—é»‘æ¨¡å¼ï¼Œæˆ– html/body å…ƒç´ åŒ…å« dark æ ‡è¯†ï¼Œæˆ–åº•è‰²ä¸ºé»‘è‰² (ç­‰äº0,0,0) æˆ–æ·±è‰² (å°äº 89,89,89)ï¼Œå°±åœç”¨æœ¬è„šæœ¬æ»¤é•œ\n                        if (menu_value('menu_autoRecognition')) { // æ’é™¤è‡ªå¸¦æš—é»‘æ¨¡å¼çš„ç½‘é¡µ (beta)\n                            for (let i=0;i<websiteList.length;i++){ // è¿™äº›ç½‘ç«™å¼ºåˆ¶å¯ç”¨æŠ¤çœ¼æ¨¡å¼æ»¤é•œ\n                                if (websiteList[i] === location.host) return\n                            }\n                            if (remove) return\n                            console.log('[æŠ¤çœ¼æ¨¡å¼] æ£€æµ‹åˆ°å½“å‰ç½‘é¡µè‡ªå¸¦æš—é»‘æ¨¡å¼ï¼Œåœç”¨æœ¬è„šæœ¬æ»¤é•œ....')\n                            if (document.getElementById('XIU2DarkMode')) document.getElementById('XIU2DarkMode').remove();\n                            if (document.getElementById('XIU2DarkMode2')) document.getElementById('XIU2DarkMode2').remove();\n                        }\n                    }\n                }, 1500);\n            }\n        });\n\n        // è§£å†³è¿œæ™¯è®ºå›ä¼šæ¸…ç†æ‰å‰é¢æ’å…¥çš„ CSS æ ·å¼çš„é—®é¢˜\n        if (location.hostname === 'bbs.pcbeta.com') {\n            let timer1 = setInterval(function(){\n                if (!document.getElementById('XIU2DarkMode')) {\n                    document.lastElementChild.appendChild(style_Add).textContent = style;\n                    clearInterval(timer1);\n                }\n            });\n        }\n    }\n\n    // è·å–èƒŒæ™¯é¢œè‰²å€¼\n    function getColorValue(e) {\n        let rgbValueArry = window.getComputedStyle(e).backgroundColor.replace(/rgba|rgb|\\(|\\)| /g, '').split (',')\n        return parseInt(rgbValueArry[0] + rgbValueArry[1] + rgbValueArry[2])\n    }\n\n\n    // åˆ¤æ–­å½“å‰æ˜¯ç™½å¤©è¿˜æ˜¯æ™šä¸Š\n    function isDaytime() {\n        let nowTime = new Date('2022/03/07 ' + new Date().getHours() + ':' + new Date().getMinutes() + ':00').getTime()/1000, time = GM_getValue('menu_customTime').split('|');\n        time[0] = new Date('2022/03/07 ' + time[0] + ':00').getTime()/1000;\n        time[1] = new Date('2022/03/07 ' + time[1] + ':00').getTime()/1000;\n        if (time[0] < time[1]){\n            if (nowTime > time[0] && nowTime < time[1]) return true\n            return false\n        } else {\n            if (nowTime > time[0] || nowTime < time[1]) return true\n            return false\n        }\n    }\n})();"
        },
        {
          "name": "DuckDuckGo-Enhanced.user.js",
          "type": "blob",
          "size": 10.0849609375,
          "content": "// ==UserScript==\n// @name         DuckDuckGo å¢å¼º\n// @name:zh-CN   DuckDuckGo å¢å¼º\n// @name:zh-TW   DuckDuckGo å¢å¼·\n// @name:en      DuckDuckGo Enhancements\n// @version      1.0.5\n// @author       X.I.U\n// @description  å±è”½æŒ‡å®šåŸŸåã€é“¾æ¥ä¸æºæ¥æºã€å¿«æ·å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n// @description:zh-CN  å±è”½æŒ‡å®šåŸŸåã€é“¾æ¥ä¸æºæ¥æºã€å¿«æ·å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n// @description:zh-TW  å±è”½æŒ‡å®šåŸŸåã€éˆæ¥ä¸æ”œä¾†æºã€å¿«æ·å›åˆ°é ‚éƒ¨ï¼ˆå³éµå…©å´ç©ºç™½è™•ï¼‰\n// @description:en  Block the specified domain name, link without source, and quickly return to the top (the blank space on both sides of the right button)...\n// @match        https://duckduckgo.com/*\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAHAElEQVR4nJ2XX2xT9xXHP7/r6z/YceKQuihhLHZh0Ugn1a3DhjSJhE2qFDSkVEklAhXwMCL2MEEbHqpJG0Sd1D6UFjZpMHgBNAqVyJo21UB9adKHtip489YQ1mzgmzESwIQYnNiOc31/e7j2tR07QHeero/v73y/5/zOvyt4Qol1dfhyroddNkS7lIRQCCDxASBIYKBJQVQiR22Z2qHg0EjiSeyKxwJv2xhA6vukIndbgE8gEk4p2AeC57/U/i8Csa4OHyseHpRS7C/oXOvDuDd0sKI1jOpvRHF7ATBSSbLaBAuTE6Quj5C5FikSEeKIktYHgkPRxBMTiG3bGJAsfgoEAGo2baW+Zw+qv+lRzliix6eYvXCSuc+GCypNYN9cLRoVBGLbN4SkYXwABFR/E6v638bR3GJ5+uDiOTLjEfT4NHp8CgDF48XR3IK7rQNPW7tFVI9PMf3G3sJ7mlCUl4LvXY4uS6DUc++mrazc9RqK24sen2L+lobT4cRIJZm/PEoqMoIxn6wagZr2rdR3mxEzUknixwZIXRmpGokyAje2hWNAwN3Wwar+twF4cPEcDz/9EN8rryIam3HUrcThcKDHp5g5807BcIUobi++nj7qOnsBuHd8gOTosEkik3u+kBMWgVjvC+9KKfar/iZWv3UWxe1ldvAEiQsnilZdHhzb9/PUpi04nU4A5kY/ZnbwhHUdS8XX00d9dx9GKsmt13egx6eQQhxZe+7KqxaBfOhjAGt+9xGqv4kHF89x/8xhy5BjcxcNL/8CV31DVaASDytk5c5+6jp7yU5OcOv17ZjA9mDw/JeaAmCweBDMbFf9TejxKRKDRc8dnTto/PmvlgU3QV5btkoSF8wIOZpbqNm0FQBDLu4HUGK7Qz4BuwHqe/YAMDt4sphg9U+zavsv+fqft/nks2+YSy1UAPx7coYvxmdY7OyrSsBIJYkfH6AUQyjsinWFfGouo3QpmE2m4P1cSShtP/wpqqri8Th5sbW6h+uaG1jX3ICRauDmoLdqdWTGIxipJKq/CVdrmMx4xJdz2bsUgWgHcG/oAGD+ymjZQfuadRbIXGqB2/HqpfeHM5/zxfg9XOvDVf8HePCXcwC420wsG0a7KgQhJDjzzaairFwe67H/t8PUrHAy0P8iNW5n2WufRzQAvu9vXJZAoUWvaDVJSiFCKvl26wiYBLKTE2WHFkvK68fhAEAFOMCfjprZPXthDADFBTXPwoo1EL8ERgb0+DQAqkVSBtTChLMGy5L705MPreed3W3FP3JJmPkYUuWEvd/5Bm8fqLV5r2+a4ECxdeexkPjUCleWym2NbDaLw+Eo14/vgGxl81HtYBgmcHIM5q4+2ryKIIHEZ6SSKG6vVQkFEdOTpNPpcgLpCQs8fRPufmh6qdaCkS16vFRKx7dpnIQCaAD63aX3k5fpGAsPZst1jkawmcZsLlDyKaE/XB4csKZqVitcm9BUJH8HQulrERyBFlzrw2TGI2UHU9evwncDRYXNCy1/hBsHcPinWLMHsvFycLUOsnfhzlBRVyj1hXyiCymjioEcgWL51W3prWBujH2FruvlSncL/OAjdE8fyauANEHVOpNIcszM/lLxtLVTigVyVLW5jCG5YHs3Mx7x6fGp0k5lHRTTGvPz89TV1VWQS45B4mKFukJK54xlO2MMKcFT0YSE02DOAAD/3oMoHm/xdOwqmcRMVcP2JQPoX402/tuglOkUj7dszgAIOBUciiYUAEXmjgDMjQ6T1SZQ/U3Ud5cPlvSNawDMLSb5+v7fmNfnAHC1vsCMVyHlFPz5R3Z+3+ngUqi8uuu7+6rMmdwAgAoQPB/VrveGjwrJvjvvHGD1W2ep7ezFmE8ymx/LxthXpDf+hEu3hjkdOwbAs3XPcTdzm/jLToycgVAEAsoiUN/dZ9pKJZl+Yy8AUnL0mfejGoD1puLMHQK0wqoF5jbTsLMfxeNFTGtkMuU19o+Zv3I7le8ZAnJ6DoD7NQLF46VhZz++HjOS8WMD1nK69v3Ifgu38BA8FU0IcpsBbW50mDuHD2CkktR29rL6zbPUrHmG9OwMa2u/h5TSjIphYNft2HU7gf8sEL6WoeZempX2p1j95lnL8/jx0qU0t7nUiceu5Y2/Pl5cs3WdjEzzyic/w2Ov5UDoNzz/9AYAa3es3dJrdbzs5AR3Dh8oWctzLwXfi0YfSQAgti0UkNiKHyYlazaYiVhj91Y7ahKNTzE7eLJ0sdEEuc3B8+a9P5ZAQa73ho8Iyb7Cb1drGHdbB87mFhyBlrLert+dJn0tQurKSFkPkZKjykLu0Lf6NCuVfDQOAbse926J1YQ0OK2I3JFqXn8rAhaRrpAv51K6FEQHQjwHsvzzHKEJKaI5cqO2jDG0nMdL5X/1IiQsOjJcBQAAAABJRU5ErkJggg==\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @license      GPL-3.0 License\n// @run-at       document-idle\n// @namespace    https://github.com/XIU2/UserScript\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ALL = [\n        ['menu_blockDomainBtn', 'æ˜¾ç¤ºå±è”½æŒ‰é’®', 'æ˜¾ç¤ºå±è”½æŒ‰é’®', true],\n        ['menu_blockDomain', 'ç¼–è¾‘å±è”½åŸŸå', 'ç¼–è¾‘å±è”½åŸŸå', []],\n        ['menu_backToTop', 'å¿«æ·å›åˆ°é¡¶éƒ¨', 'å¿«æ·å›åˆ°é¡¶éƒ¨', true]\n    ], menu_ID = [];\n    for (let i=0;i<menu_ALL.length;i++){if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};}\n    registerMenuCommand();\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n        if (menu_ID.length > menu_ALL.length){for (let i=0;i<menu_ID.length;i++){GM_unregisterMenuCommand(menu_ID[i]);}}\n        // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n        for (let i=0;i<menu_ALL.length;i++){\n            if (menu_ALL[i][0] === 'menu_blockDomain') {\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){customBlockDomain()});\n            } else {\n                menu_ID[i] = GM_registerMenuCommand(`${GM_getValue(menu_ALL[i][0])?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(GM_getValue(menu_ALL[i][0]), menu_ALL[i][0], menu_ALL[i][2])});\n            }\n        }\n        menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true}); GM_openInTab('https://greasyfork.org/zh-CN/scripts/436428/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(Status, Name, Tips) {\n        if (Status == true) {GM_setValue(Name, false); GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});} else {GM_setValue(Name, true); GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});}\n        registerMenuCommand();\n    };\n\n\n    document.documentElement.appendChild(document.createElement('style')).textContent = `\n.blockDomainBtn {padding: 0 6px !important; font-size: 12px !important; line-height: normal !important; margin-left: 6px !important; border-radius: 3px !important; vertical-align: top !important; opacity: 0.4 !important; top: 3px; cursor: cell;}\nli[data-layout=organic]>div[arial-label] {display: none;}\na[data-testid=\"result-title-a\"]{display: inline-block}`\n    mutationObserver(); // å±è”½æŒ‡å®šåŸŸå é“¾æ¥ä¸æºæ¥æº\n    setTimeout(backToTop, 500); //        å¿«æ·å›åˆ°é¡¶éƒ¨\n\n\n    // è‡ªå®šä¹‰å±è”½æŒ‡å®šåŸŸå\n    function customBlockDomain() {\n        let nowBlockDomain = '';\n        GM_getValue('menu_blockDomain').forEach(function(item){nowBlockDomain += '|' + item})\n        let newBlockDomain = prompt('ç¼–è¾‘ [å±è”½æŒ‡å®šåŸŸå]\\nï¼ˆä¸åŒåŸŸåä¹‹é—´ä½¿ç”¨ \"|\" åˆ†éš”ï¼Œä¾‹å¦‚ï¼ša.com|b.com|c.com ï¼‰', nowBlockDomain.replace('|',''));\n        if (newBlockDomain === '') {\n            GM_setValue('menu_blockDomain', []);\n            registerMenuCommand();\n        } else if (newBlockDomain != null) {\n            GM_setValue('menu_blockDomain', newBlockDomain.split('|'));\n            registerMenuCommand();\n        }\n    }\n\n\n    // å±è”½æŒ‡å®šåŸŸå é“¾æ¥ä¸æºæ¥æº\n    function mutationObserver() {\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) break\n                    // å±è”½æŒ‡å®šåŸŸå\n                    if (target.tagName == 'LI' && target.dataset.layout == 'organic') {\n                        Process(target)\n                    } else if (target.tagName == 'OL' && target.className == 'react-results--main') {\n                        target.childNodes.forEach(li=>{Process(li);})\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n\n        function Process(target) {\n            const a = target.querySelector('h2>a,a[data-testid=result-title-a]')\n            if (a) {\n                if (checkDomain(a.href.split('/')[2])) {\n                    target.hidden = true\n                } else {\n                    // é“¾æ¥ä¸æºæ¥æº\n                    addRel(target);\n\n                    // æ·»åŠ å±è”½æŒ‰é’®\n                    addBlockDomainBtn(target, a, a.href.split('/')[2]);\n                }\n            }\n        }\n    }\n\n\n    // æ£€æŸ¥åŸŸåæ˜¯å¦å­˜åœ¨é»‘åå•ä¸­\n    function checkDomain(domain) {\n        let blockDomain = GM_getValue('menu_blockDomain');\n        for (let i=0; i<blockDomain.length; i++) {\n            if (domain === blockDomain[i]) return true\n        }\n        return false\n    }\n\n\n    // æ·»åŠ  rel å±æ€§\n    function addRel(doc) {\n        doc.querySelectorAll('a').forEach(function(one){one.rel = 'noreferrer noopener nofollow'})\n    }\n\n\n    // æ·»åŠ å±è”½æŒ‰é’®\n    function addBlockDomainBtn(doc, toElement, domain) {\n        if (!GM_getValue('menu_blockDomainBtn')) return\n        if (toElement && !doc.querySelector('button.blockDomainBtn')) {\n            toElement.insertAdjacentHTML('afterend', `<button class=\"btn blockDomainBtn\" data-domain=\"${domain}\" title=\"ç‚¹å‡»åœ¨æœç´¢ç»“æœä¸­å±è”½ [ ${domain} ] åŸŸå\">å±è”½</button>`);\n            doc.querySelector('button.blockDomainBtn').addEventListener('click', function(e) {\n                e.stopPropagation();\n                // è¿½åŠ å±è”½åŸŸå\n                let blockDomain = GM_getValue('menu_blockDomain');\n                blockDomain.push(e.target.dataset.domain)\n                GM_setValue('menu_blockDomain', blockDomain);\n                // éšè—è¯¥åŸŸåçš„æ‰€æœ‰æœç´¢ç»“æœ\n                document.querySelectorAll(`button[data-domain=\"${e.target.dataset.domain}\"].blockDomainBtn`).forEach(function(one){one.parentElement.parentElement.parentElement.parentElement.remove();})\n            });\n        }\n    }\n\n\n    // å¿«æ·å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n    function backToTop() {\n        if (!GM_getValue('menu_backToTop')) return\n        document.querySelectorAll('#react-layout>div, #react-layout>div>div, section[data-testid=sidebar]').forEach(ele => {\n            ele.oncontextmenu = function(e) {\n                if (e.target == this) {\n                    e.preventDefault();\n                    window.scrollTo(0,0);\n                }\n            }\n        })\n    }\n})();"
        },
        {
          "name": "GithubEnhanced-High-Speed-Download.user.js",
          "type": "blob",
          "size": 39.5693359375,
          "content": "// ==UserScript==\n// @name         Github å¢å¼º - é«˜é€Ÿä¸‹è½½\n// @name:zh-CN   Github å¢å¼º - é«˜é€Ÿä¸‹è½½\n// @name:zh-TW   Github å¢å¼· - é«˜é€Ÿä¸‹è¼‰\n// @name:en      Github Enhancement - High Speed Download\n// @version      2.6.13\n// @author       X.I.U\n// @description  é«˜é€Ÿä¸‹è½½ Git Clone/SSHã€Releaseã€Rawã€Code(ZIP) ç­‰æ–‡ä»¶ (å…¬ç›ŠåŠ é€Ÿ)ã€é¡¹ç›®åˆ—è¡¨å•æ–‡ä»¶å¿«æ·ä¸‹è½½ (â˜)ã€æ·»åŠ  git clone å‘½ä»¤\n// @description:zh-CN  é«˜é€Ÿä¸‹è½½ Git Clone/SSHã€Releaseã€Rawã€Code(ZIP) ç­‰æ–‡ä»¶ (å…¬ç›ŠåŠ é€Ÿ)ã€é¡¹ç›®åˆ—è¡¨å•æ–‡ä»¶å¿«æ·ä¸‹è½½ (â˜)\n// @description:zh-TW  é«˜é€Ÿä¸‹è¼‰ Git Clone/SSHã€Releaseã€Rawã€Code(ZIP) ç­‰æ–‡ä»¶ (å…¬ç›ŠåŠ é€Ÿ)ã€é …ç›®åˆ—è¡¨å–®æ–‡ä»¶å¿«æ·ä¸‹è¼‰ (â˜)\n// @description:en  High-speed download of Git Clone/SSH, Release, Raw, Code(ZIP) and other files (Based on public welfare), project list file quick download (â˜)\n// @match        *://github.com/*\n// @match        *://hub.whtrys.space/*\n// @match        *://dgithub.xyz/*\n// @match        *://kkgithub.com/*\n// @match        *://github.site/*\n// @match        *://github.store/*\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAACEUExURUxpcRgWFhsYGBgWFhcWFh8WFhoYGBgWFiUlJRcVFRkWFhgVFRgWFhgVFRsWFhgWFigeHhkWFv////////////r6+h4eHv///xcVFfLx8SMhIUNCQpSTk/r6+jY0NCknJ97e3ru7u+fn51BOTsPCwqGgoISDg6empmpoaK2srNDQ0FhXV3eXcCcAAAAXdFJOUwCBIZXMGP70BuRH2Ze/LpIMUunHkpQR34sfygAAAVpJREFUOMt1U+magjAMDAVb5BDU3W25b9T1/d9vaYpQKDs/rF9nSNJkArDA9ezQZ8wPbc8FE6eAiQUsOO1o19JolFibKCdHGHC0IJezOMD5snx/yE+KOYYr42fPSufSZyazqDoseTPw4lGJNOu6LBXVUPBG3lqYAOv/5ZwnNUfUifzBt8gkgfgINmjxOpgqUA147QWNaocLniqq3QsSVbQHNp45N/BAwoYQz9oUJEiE4GMGfoBSMj5gjeWRIMMqleD/CAzUHFqTLyjOA5zjNnwa4UCEZ2YK3khEcBXHjVBtEFeIZ6+NxYbPqWp1DLKV42t6Ujn2ydyiPi9nX0TTNAkVVZ/gozsl6FbrktkwaVvL2TRK0C8Ca7Hck7f5OBT6FFbLATkL2ugV0tm0RLM9fedDvhWstl8Wp9AFDjFX7yOY/lJrv8AkYuz7fuP8dv9izCYH+x3/LBnj9fYPBTpJDNzX+7cAAAAASUVORK5CYII=\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @grant        GM_setClipboard\n// @grant        window.onurlchange\n// @sandbox      JavaScript\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://greasyfork.org/scripts/412245\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var backColor = '#ffffff', fontColor = '#888888', menu_rawFast = GM_getValue('xiu2_menu_raw_fast'), menu_rawFast_ID, menu_rawDownLink_ID, menu_gitClone_ID, menu_feedBack_ID;\n    const download_url_us = [\n        ['https://gh.h233.eu.org/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@X.I.U/XIU2] æä¾›'],\n        //['https://gh.xiu2.us.kg/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@X.I.U/XIU2] æä¾›'],\n        //['https://gh.api.99988866.xyz/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [hunshcn/gh-proxy] æä¾›'], // å®˜æ–¹æ¼”ç¤ºç«™ç”¨çš„äººå¤ªå¤šäº†\n        ['https://gh.ddlc.top/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@mtr-static-official] æä¾›'],\n        //['https://gh2.yanqishui.work/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@HongjieCN] æä¾›'], // é”™è¯¯\n        //['https://dl.ghpig.top/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [feizhuqwq.com] æä¾›'], // ERR_SSL_VERSION_OR_CIPHER_MISMATCH\n        //['https://gh.flyinbug.top/gh/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [Mintimate] æä¾›'], // é”™è¯¯\n        ['https://slink.ltd/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [çŸ¥äº†å°ç«™] æä¾›'],\n        //['https://gh.con.sh/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [gh.con.sh] æä¾›'], // Suspent due to abuse report.\n        //['https://ghps.cc/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ghps.cc] æä¾›'], // æç¤º blocked\n        ['https://gh-proxy.com/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [gh-proxy.com] æä¾›'],\n        ['https://cors.isteed.cc/github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@Lufs\\'s] æä¾›'],\n        ['https://hub.gitmirror.com/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [GitMirror] æä¾›'],\n        ['https://down.sciproxy.com/github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [sciproxy.com] æä¾›'],\n        ['https://ghproxy.cc/https://github.com', 'ç¾å›½', '[ç¾å›½ æ´›æ‰çŸ¶] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        ['https://cf.ghproxy.cc/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        ['https://www.ghproxy.cc/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        ['https://ghproxy.cn/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        ['https://www.ghproxy.cn/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        ['https://github.site', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        ['https://github.store', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        //['https://gh.jiasu.in/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@0-RTT] æä¾›'], // 404\n        ['https://github.boki.moe/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [blog.boki.moe] æä¾›'],\n        ['https://github.moeyy.xyz/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [moeyy.cn] æä¾›'],\n        ['https://hub.whtrys.space', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [FastGit ç¾¤ç»„æˆå‘˜] æä¾›'],\n        ['https://dgithub.xyz', 'ç¾å›½', '[ç¾å›½ è¥¿é›…å›¾] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [dgithub.xyz] æä¾›'],\n        ['https://gh-proxy.ygxz.in/https://github.com', 'ç¾å›½', '[ç¾å›½ æ´›æ‰çŸ¶] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@ä¸€ä¸ªå°ç«™ www.ygxz.in] æä¾›'],\n        ['https://download.ixnic.net', 'ç¾å›½', '[ç¾å›½ æ´›æ‰çŸ¶] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@é»ƒåŸ”èˆˆåœ‹] æä¾›'],\n    //], download_url = [ // ä¸ºäº†ç¼“è§£éç¾å›½å…¬ç›ŠèŠ‚ç‚¹å‹åŠ›ï¼ˆè€ƒè™‘åˆ°å¾ˆå¤šäººæ— è§†å‰é¢éšæœºçš„ç¾å›½èŠ‚ç‚¹ï¼‰ï¼Œå¹²è„†ä¹Ÿå°†å…¶åŠ å…¥éšæœº\n        ['https://ghproxy.net/https://github.com', 'è‹±å›½', '[è‹±å›½ä¼¦æ•¦] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ghproxy.net] æä¾›&#10;&#10;æç¤ºï¼šå¸Œæœ›å¤§å®¶å°½é‡å¤šä½¿ç”¨ç¾å›½èŠ‚ç‚¹ï¼ˆæ¯æ¬¡éšæœº è´Ÿè½½å‡è¡¡ï¼‰ï¼Œ&#10;é¿å…æµé‡éƒ½é›†ä¸­åˆ°äºšæ´²å…¬ç›ŠèŠ‚ç‚¹ï¼Œå‡å°‘æˆæœ¬å‹åŠ›ï¼Œå…¬ç›Šæ‰èƒ½æ›´æŒä¹…~'],\n        ['https://ghgo.xyz/https://github.com', 'å…¶ä»–', '[æ—¥æœ¬ã€éŸ©å›½ã€æ–°åŠ å¡ã€ç¾å›½ã€å¾·å›½ç­‰]ï¼ˆCDN ä¸å›ºå®šï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ghproxy.link] æä¾›&#10;&#10;æç¤ºï¼šå¸Œæœ›å¤§å®¶å°½é‡å¤šä½¿ç”¨ç¾å›½èŠ‚ç‚¹ï¼ˆæ¯æ¬¡éšæœº è´Ÿè½½å‡è¡¡ï¼‰ï¼Œ&#10;é¿å…æµé‡éƒ½é›†ä¸­åˆ°äºšæ´²å…¬ç›ŠèŠ‚ç‚¹ï¼Œå‡å°‘æˆæœ¬å‹åŠ›ï¼Œå…¬ç›Šæ‰èƒ½æ›´æŒä¹…~'],\n        ['https://wget.la/https://github.com', 'å…¶ä»–', '[ä¸­å›½é¦™æ¸¯ã€ä¸­å›½å°æ¹¾ã€æ—¥æœ¬ã€ç¾å›½ç­‰]ï¼ˆCDN ä¸å›ºå®šï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ucdn.me] æä¾›&#10;&#10;æç¤ºï¼šå¸Œæœ›å¤§å®¶å°½é‡å¤šä½¿ç”¨ç¾å›½èŠ‚ç‚¹ï¼ˆæ¯æ¬¡éšæœº è´Ÿè½½å‡è¡¡ï¼‰ï¼Œ&#10;é¿å…æµé‡éƒ½é›†ä¸­åˆ°äºšæ´²å…¬ç›ŠèŠ‚ç‚¹ï¼Œå‡å°‘æˆæœ¬å‹åŠ›ï¼Œå…¬ç›Šæ‰èƒ½æ›´æŒä¹…~'],\n        ['https://kkgithub.com', 'å…¶ä»–', '[ä¸­å›½é¦™æ¸¯ã€æ—¥æœ¬ã€éŸ©å›½ã€æ–°åŠ å¡ç­‰] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [help.kkgithub.com] æä¾›&#10;&#10;æç¤ºï¼šå¸Œæœ›å¤§å®¶å°½é‡å¤šä½¿ç”¨ç¾å›½èŠ‚ç‚¹ï¼ˆæ¯æ¬¡éšæœº è´Ÿè½½å‡è¡¡ï¼‰ï¼Œ&#10;é¿å…æµé‡éƒ½é›†ä¸­åˆ°äºšæ´²å…¬ç›ŠèŠ‚ç‚¹ï¼Œå‡å°‘æˆæœ¬å‹åŠ›ï¼Œå…¬ç›Šæ‰èƒ½æ›´æŒä¹…~'],\n    ], clone_url = [\n        ['https://gitclone.com', 'å›½å†…', '[ä¸­å›½ å›½å†…] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [GitClone] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰&#10; - é¦–æ¬¡æ¯”è¾ƒæ…¢ï¼Œç¼“å­˜åè¾ƒå¿«'],\n        ['https://kkgithub.com', 'é¦™æ¸¯', '[ä¸­å›½é¦™æ¸¯ã€æ—¥æœ¬ã€æ–°åŠ å¡ç­‰] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [help.kkgithub.com] æä¾›'],\n        //['https://gitdl.cn/https://github.com', 'é¦™æ¸¯', '[ä¸­å›½é¦™æ¸¯] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [gitdl] æä¾›'], // è¾“å‡ºæ–‡ä»¶é”™è¯¯\n        ['https://wget.la/https://github.com', 'é¦™æ¸¯', '[ä¸­å›½é¦™æ¸¯ã€ä¸­å›½å°æ¹¾ã€æ—¥æœ¬ã€ç¾å›½ç­‰]ï¼ˆCDN ä¸å›ºå®šï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ucdn.me] æä¾›'],\n        ['https://ghgo.xyz/https://github.com', 'éŸ©å›½', '[æ—¥æœ¬ã€éŸ©å›½ã€æ–°åŠ å¡ã€ç¾å›½ã€å¾·å›½ç­‰]ï¼ˆCDN ä¸å›ºå®šï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ghproxy] æä¾›'],\n        ['https://githubfast.com', 'éŸ©å›½', '[éŸ©å›½] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [Github Fast] æä¾›'],\n        ['https://ghproxy.net/https://github.com', 'æ—¥æœ¬', '[æ—¥æœ¬ å¤§é˜ª] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ghproxy.net] æä¾›'],\n        //['https://github.moeyy.xyz/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [moeyy.cn] æä¾›'],\n        //['https://slink.ltd/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [çŸ¥äº†å°ç«™] æä¾›'],\n        //['https://hub.gitmirror.com/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [GitMirror] æä¾›'],\n        //['https://gh-proxy.com/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [gh-proxy.com] æä¾›'],\n        //['https://sciproxy.com/github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [sciproxy.com] æä¾›'],\n        //['https://ghproxy.cc/https://github.com', 'ç¾å›½', '[ç¾å›½ æ´›æ‰çŸ¶] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        //['https://cf.ghproxy.cc/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        //['https://www.ghproxy.cc/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        //['https://ghproxy.cn/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        //['https://www.ghproxy.cn/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        //['https://github.site', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        //['https://github.store', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›'],\n        //['https://gh.jiasu.in/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@0-RTT] æä¾›'], // 404\n        //['https://github.boki.moe/https://github.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [blog.boki.moe] æä¾›'],\n        //['https://dgithub.xyz', 'ç¾å›½', '[ç¾å›½ è¥¿é›…å›¾] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [dgithub.xyz] æä¾›'],\n        //['https://gh-proxy.ygxz.in/https://github.com', 'ç¾å›½', '[ç¾å›½ æ´›æ‰çŸ¶] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@ä¸€ä¸ªå°ç«™ www.ygxz.in] æä¾›'],\n        //['https://hub.scholar.rr.nu', 'ç¾å›½', '[ç¾å›½ çº½çº¦] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [FastGit ç¾¤ç»„æˆå‘˜] æä¾›'], // è¯ä¹¦åˆ°æœŸ\n        //['https://hub.whtrys.space', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [FastGit ç¾¤ç»„æˆå‘˜] æä¾›'],\n    ], clone_ssh_url = [\n        ['ssh://git@ssh.github.com:443/', 'Github åŸç”Ÿ', '[æ—¥æœ¬ã€æ–°åŠ å¡ç­‰] - Github å®˜æ–¹æä¾›çš„ 443 ç«¯å£çš„ SSHï¼ˆä¾ç„¶æ˜¯ SSH åè®®ï¼‰ï¼Œé€‚ç”¨äºé™åˆ¶è®¿é—® 22 ç«¯å£çš„ç½‘ç»œç¯å¢ƒ'],\n        //['git@ssh.fastgit.org:', 'é¦™æ¸¯', '[ä¸­å›½ é¦™æ¸¯] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [FastGit] æä¾›'], // æŒ‚äº†\n        //['git@git.zhlh6.cn:', 'ç¾å›½', '[ç¾å›½ æ´›æ‰çŸ¶]'] // æŒ‚äº†\n    ], raw_url = [\n        ['https://raw.githubusercontent.com', 'Github åŸç”Ÿ', '[æ—¥æœ¬ ä¸œäº¬]&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        ['https://raw.kkgithub.com', 'é¦™æ¸¯ 1', '[ä¸­å›½é¦™æ¸¯ã€æ—¥æœ¬ã€æ–°åŠ å¡ç­‰] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [help.kkgithub.com] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰'],\n        //['https://jsd.proxy.aks.moe/gh', 'é¦™æ¸¯ 2', '[ä¸­å›½ é¦™æ¸¯] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [cdn.akass.cn] æä¾›'], // è¯ä¹¦é”™è¯¯\n        ['https://wget.la/https://raw.githubusercontent.com', 'é¦™æ¸¯ 2', '[ä¸­å›½é¦™æ¸¯ã€ä¸­å›½å°æ¹¾ã€æ—¥æœ¬ã€ç¾å›½ç­‰]ï¼ˆCDN ä¸å›ºå®šï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ucdn.me] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://cdn.wget.la/gh', 'é¦™æ¸¯ 2', '[ä¸­å›½é¦™æ¸¯ã€ä¸­å›½å°æ¹¾ã€æ—¥æœ¬ã€ç¾å›½ç­‰]ï¼ˆCDN ä¸å›ºå®šï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ucdn.me] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://gitdl.cn/https://raw.githubusercontent.com', 'é¦™æ¸¯ 3', '[ä¸­å›½é¦™æ¸¯] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [gitdl] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰'], // è¾“å‡ºæ–‡ä»¶é”™è¯¯\n        ['https://ghgo.xyz/https://raw.githubusercontent.com', 'éŸ©å›½', '[æ—¥æœ¬ã€éŸ©å›½ã€æ–°åŠ å¡ã€ç¾å›½ã€å¾·å›½ç­‰]ï¼ˆCDN ä¸å›ºå®šï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ghproxy.link] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        ['https://ghproxy.net/https://raw.githubusercontent.com', 'æ—¥æœ¬ 1', '[æ—¥æœ¬ å¤§é˜ª] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [ghproxy.net] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰ï¼ˆçº¦ 10 åˆ†é’Ÿï¼‰'],\n        ['https://fastly.jsdelivr.net/gh', 'æ—¥æœ¬ 2', '[æ—¥æœ¬ ä¸œäº¬] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [JSDelivr CDN] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰&#10; - ä¸æ”¯æŒå¤§å°è¶…è¿‡ 50 MB çš„æ–‡ä»¶&#10; - ä¸æ”¯æŒç‰ˆæœ¬å·æ ¼å¼çš„åˆ†æ”¯åï¼ˆå¦‚ v1.2.3ï¼‰'],\n        ['https://jsdelivr.pai233.top/gh', 'æ—¥æœ¬ 3', '[æ—¥æœ¬ ä¸œäº¬]ï¼ˆVercel Anycastï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [blog.pai233.top] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰'],\n        ['https://raw.ixnic.net', 'æ—¥æœ¬ 4', '[æ—¥æœ¬ ä¸œäº¬] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@é»ƒåŸ”èˆˆåœ‹] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://gcore.jsdelivr.net/gh', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [JSDelivr CDN] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰&#10; - ä¸æ”¯æŒå¤§å°è¶…è¿‡ 50 MB çš„æ–‡ä»¶&#10; - ä¸æ”¯æŒç‰ˆæœ¬å·æ ¼å¼çš„åˆ†æ”¯åï¼ˆå¦‚ v1.2.3ï¼‰'], // å˜æˆ ç¾å›½ Cloudflare CDN äº†\n        //['https://jsdelivr.b-cdn.net/gh', 'å…¶ä»–', '[ä¸­å›½é¦™æ¸¯ã€ä¸­å›½å°æ¹¾ã€æ—¥æœ¬ã€æ–°åŠ å¡ç­‰]ï¼ˆCDN ä¸å›ºå®šï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@rttwyjz] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰'], // ç–‘ä¼¼ SNI é˜»æ–­\n        //['https://github.moeyy.xyz/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [moeyy.cn] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰ï¼ˆçº¦ 10 åˆ†é’Ÿï¼‰'],\n        //['https://raw.cachefly.998111.xyz', 'å…¶ä»– 4', '[æ–°åŠ å¡ã€æ—¥æœ¬ã€å°åº¦ç­‰]ï¼ˆAnycast CDN ä¸å›ºå®šï¼‰ - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@XxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxX0] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰ï¼ˆçº¦ 12 å°æ—¶ï¼‰'], // è¯ä¹¦åˆ°æœŸ\n        //['https://ghproxy.cc/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ æ´›æ‰çŸ¶] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://cf.ghproxy.cc/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://www.ghproxy.cc/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://ghproxy.cn/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://www.ghproxy.cn/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://raw.github.site', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://raw.github.store', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@yionchilau] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://gh.jiasu.in/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@0-RTT] æä¾›'], // 404\n        //['https://github.boki.moe/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [blog.boki.moe] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://gh-proxy.com/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [gh-proxy.com] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰'],\n        //['https://raw.dgithub.xyz', 'ç¾å›½', '[ç¾å›½ è¥¿é›…å›¾] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [dgithub.xyz] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://gh-proxy.ygxz.in//https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ æ´›æ‰çŸ¶] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [@ä¸€ä¸ªå°ç«™ www.ygxz.in] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://raw.nuaa.cf', 'ç¾å›½', '[ç¾å›½ æ´›æ‰çŸ¶] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [FastGit ç¾¤ç»„æˆå‘˜] æä¾›'], // è¯ä¹¦åˆ°æœŸ\n        //['https://raw.yzuu.cf', 'ç¾å›½', '[ç¾å›½ çº½çº¦] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [FastGit ç¾¤ç»„æˆå‘˜] æä¾›'], // è¯ä¹¦åˆ°æœŸ\n        //['https://raw.gitmirror.com', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [GitMirror] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæ— ï¼ˆæˆ–å¾ˆçŸ­ï¼‰'],\n        //['https://cdn.54188.cf/gh', 'ç¾å›½', '[ç¾å›½ Cloudflare CDN] - è¯¥å…¬ç›ŠåŠ é€Ÿæºç”± [PencilNavigator] æä¾›&#10;&#10; - ç¼“å­˜ï¼šæœ‰'], // æŒ‚äº†\n        //['https://git.yumenaka.net/https://raw.githubusercontent.com', 'ç¾å›½', '[ç¾å›½ åœ£ä½•å¡]'], // è¿æ¥è¶…æ—¶\n    ], svg = [\n        '<svg class=\"octicon octicon-cloud-download\" aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path d=\"M9 12h2l-3 3-3-3h2V7h2v5zm3-8c0-.44-.91-3-4.5-3C5.08 1 3 2.92 3 5 1.02 5 0 6.52 0 8c0 1.53 1 3 3 3h3V9.7H3C1.38 9.7 1.3 8.28 1.3 8c0-.17.05-1.7 1.7-1.7h1.3V5c0-1.39 1.56-2.7 3.2-2.7 2.55 0 3.13 1.55 3.2 1.8v1.2H12c.81 0 2.7.22 2.7 2.2 0 2.09-2.25 2.2-2.7 2.2h-2V11h2c2.08 0 4-1.16 4-3.5C16 5.06 14.08 4 12 4z\"></path></svg>'\n    ], style = ['padding:0 6px; margin-right: -1px; border-radius: 2px; background-color: var(--XIU2-back-Color); border-color: rgba(27, 31, 35, 0.1); font-size: 11px; color: var(--XIU2-font-Color);'];\n\n    if (menu_rawFast == null){menu_rawFast = 1; GM_setValue('xiu2_menu_raw_fast', 1)};\n    if (GM_getValue('menu_rawDownLink') == null){GM_setValue('menu_rawDownLink', true)};\n    if (GM_getValue('menu_gitClone') == null){GM_setValue('menu_gitClone', true)};\n    registerMenuCommand();\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        // å¦‚æœåé¦ˆèœå•IDä¸æ˜¯ nullï¼Œåˆ™åˆ é™¤æ‰€æœ‰è„šæœ¬èœå•\n        if (menu_feedBack_ID) {GM_unregisterMenuCommand(menu_rawFast_ID); GM_unregisterMenuCommand(menu_rawDownLink_ID); GM_unregisterMenuCommand(menu_gitClone_ID); GM_unregisterMenuCommand(menu_feedBack_ID); menu_rawFast = GM_getValue('xiu2_menu_raw_fast');}\n        // é¿å…åœ¨å‡å°‘ raw æ•°ç»„åï¼Œç”¨æˆ·å‚¨å­˜çš„æ•°æ®å¤§äºæ•°ç»„è€ŒæŠ¥é”™\n        if (menu_rawFast > raw_url.length - 1) menu_rawFast = 0\n        if (GM_getValue('menu_rawDownLink')) menu_rawFast_ID = GM_registerMenuCommand(`${['0ï¸âƒ£','1ï¸âƒ£','2ï¸âƒ£','3ï¸âƒ£','4ï¸âƒ£','5ï¸âƒ£','6ï¸âƒ£','7ï¸âƒ£','8ï¸âƒ£','9ï¸âƒ£','ğŸ”Ÿ'][menu_rawFast]} [ ${raw_url[menu_rawFast][1]} ] åŠ é€Ÿæº (â˜) - ç‚¹å‡»åˆ‡æ¢`, menu_toggle_raw_fast);\n        menu_rawDownLink_ID = GM_registerMenuCommand(`${GM_getValue('menu_rawDownLink')?'âœ…':'âŒ'} é¡¹ç›®åˆ—è¡¨å•æ–‡ä»¶å¿«æ·ä¸‹è½½ (â˜)`, function(){if (GM_getValue('menu_rawDownLink') == true) {GM_setValue('menu_rawDownLink', false); GM_notification({text: `å·²å…³é—­ [é¡¹ç›®åˆ—è¡¨å•æ–‡ä»¶å¿«æ·ä¸‹è½½ (â˜)] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});} else {GM_setValue('menu_rawDownLink', true); GM_notification({text: `å·²å¼€å¯ [é¡¹ç›®åˆ—è¡¨å•æ–‡ä»¶å¿«æ·ä¸‹è½½ (â˜)] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});}registerMenuCommand();});\n        menu_gitClone_ID = GM_registerMenuCommand(`${GM_getValue('menu_gitClone')?'âœ…':'âŒ'} æ·»åŠ  git clone å‘½ä»¤`, function(){if (GM_getValue('menu_gitClone') == true) {GM_setValue('menu_gitClone', false); GM_notification({text: `å·²å…³é—­ [æ·»åŠ  git clone å‘½ä»¤] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});} else {GM_setValue('menu_gitClone', true); GM_notification({text: `å·²å¼€å¯ [æ·»åŠ  git clone å‘½ä»¤] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});}registerMenuCommand();});\n        menu_feedBack_ID = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®® [Github]', function () {window.GM_openInTab('https://github.com/XIU2/UserScript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/412245/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    // åˆ‡æ¢åŠ é€Ÿæº\n    function menu_toggle_raw_fast() {\n        // å¦‚æœå½“å‰åŠ é€Ÿæºä½ç½®å¤§äºç­‰äºåŠ é€Ÿæºæ€»æ•°ï¼Œåˆ™æ”¹ä¸ºç¬¬ä¸€ä¸ªåŠ é€Ÿæºï¼Œåä¹‹é€’å¢ä¸‹ä¸€ä¸ªåŠ é€Ÿæº\n        if (menu_rawFast >= raw_url.length - 1) {menu_rawFast = 0;} else {menu_rawFast += 1;}\n        GM_setValue('xiu2_menu_raw_fast', menu_rawFast);\n        delRawDownLink(); // åˆ é™¤æ—§åŠ é€Ÿæº\n        addRawDownLink(); // æ·»åŠ æ–°åŠ é€Ÿæº\n        GM_notification({text: \"å·²åˆ‡æ¢åŠ é€Ÿæºä¸ºï¼š\" + raw_url[menu_rawFast][1], timeout: 3000}); // æç¤ºæ¶ˆæ¯\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n    colorMode(); // é€‚é…ç™½å¤©/å¤œé—´ä¸»é¢˜æ¨¡å¼\n    setTimeout(addRawFile, 1000); // Raw åŠ é€Ÿ\n    setTimeout(addRawDownLink, 2000); // Raw å•æ–‡ä»¶å¿«æ·ä¸‹è½½ï¼ˆâ˜ï¼‰ï¼Œå»¶è¿Ÿ 2 ç§’æ‰§è¡Œï¼Œé¿å…è¢« pjax åˆ·æ‰\n\n    // Tampermonkey v4.11 ç‰ˆæœ¬æ·»åŠ çš„ onurlchange äº‹ä»¶ grantï¼Œå¯ä»¥ç›‘æ§ pjax ç­‰ç½‘é¡µçš„ URL å˜åŒ–\n    if (window.onurlchange === undefined) addUrlChangeEvent();\n    window.addEventListener('urlchange', function() {\n        colorMode(); // é€‚é…ç™½å¤©/å¤œé—´ä¸»é¢˜æ¨¡å¼\n        if (location.pathname.indexOf('/releases')) addRelease(); // Release åŠ é€Ÿ\n        setTimeout(addRawFile, 1000); // Raw åŠ é€Ÿ\n        setTimeout(addRawDownLink, 2000); // Raw å•æ–‡ä»¶å¿«æ·ä¸‹è½½ï¼ˆâ˜ï¼‰ï¼Œå»¶è¿Ÿ 2 ç§’æ‰§è¡Œï¼Œé¿å…è¢« pjax åˆ·æ‰\n        setTimeout(addRawDownLink_, 1000); // åœ¨æµè§ˆå™¨è¿”å›/å‰è¿›æ—¶é‡æ–°æ·»åŠ  Raw ä¸‹è½½é“¾æ¥ï¼ˆâ˜ï¼‰é¼ æ ‡äº‹ä»¶\n    });\n\n\n    // Github Git Clone/SSHã€Releaseã€Download ZIP æ”¹ç‰ˆä¸ºåŠ¨æ€åŠ è½½æ–‡ä»¶åˆ—è¡¨ï¼Œå› æ­¤éœ€è¦ç›‘æ§ç½‘é¡µå…ƒç´ å˜åŒ–\n    const callback = (mutationsList, observer) => {\n        if (location.pathname.indexOf('/releases') > -1) { // Release\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType !== 1) return\n                    if (target.tagName === 'DIV' && target.dataset.viewComponent === 'true' && target.classList[0] === 'Box') addRelease();\n                }\n            }\n        } else if (document.querySelector('#repository-container-header:not([hidden])')) { // é¡¹ç›®é¦–é¡µ\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType !== 1) return\n                    if (target.tagName === 'DIV' && target.parentElement && target.parentElement.id === '__primerPortalRoot__') {\n                        addDownloadZIP(target);\n                        addGitClone(target);\n                        addGitCloneSSH(target);\n                    } else if (target.tagName === 'DIV' && target.className.indexOf('Box-sc-') != -1) {\n                        if (target.querySelector('input[value^=\"https:\"]')) {\n                            addGitCloneClear('.XIU2-GCS'); addGitClone(target);\n                        } else if (target.querySelector('input[value^=\"git@\"]')) {\n                            addGitCloneClear('.XIU2-GC'); addGitCloneSSH(target);\n                        } else if (target.querySelector('input[value^=\"gh \"]')) {\n                            addGitCloneClear('.XIU2-GC, .XIU2-GCS');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    const observer = new MutationObserver(callback);\n    observer.observe(document, { childList: true, subtree: true });\n\n\n    // download_url éšæœºå‡ ä¸ªç¾å›½åŠ é€Ÿæº\n    function get_New_download_url() {\n        //return download_url_us // å…¨è¾“å‡ºè°ƒè¯•ç”¨\n        let shuffled = download_url_us.slice(0), i = download_url_us.length, min = i - 6, temp, index;\n        while (i-- > min) {index = Math.floor((i + 1) * Math.random()); temp = shuffled[index]; shuffled[index] = shuffled[i]; shuffled[i] = temp;}\n        return shuffled.slice(min)//.concat(download_url); // éšæœºæ´—ç‰Œ download_url_us æ•°ç»„å¹¶å–å‰å‡ ä¸ªï¼Œç„¶åå°†å…¶åˆå¹¶è‡³ download_url æ•°ç»„\n        // ä¸ºäº†ç¼“è§£éç¾å›½å…¬ç›ŠèŠ‚ç‚¹å‹åŠ›ï¼ˆè€ƒè™‘åˆ°å¾ˆå¤šäººæ— è§†å‰é¢éšæœºçš„ç¾å›½èŠ‚ç‚¹ï¼‰ï¼Œå¹²è„†ä¹Ÿå°†å…¶åŠ å…¥éšæœº\n    }\n\n    // Release\n    function addRelease() {\n        let html = document.querySelectorAll('.Box-footer'); if (html.length == 0 || location.pathname.indexOf('/releases') == -1) return\n        let divDisplay = 'margin-left: -90px;', new_download_url = get_New_download_url();\n        if (document.documentElement.clientWidth > 755) {divDisplay = 'margin-top: -3px;margin-left: 8px;display: inherit;';}; // è°ƒæ•´å°å±å¹•æ—¶çš„æ ·å¼\n        for (const current of html) {\n            if (current.querySelector('.XIU2-RS')) continue\n            current.querySelectorAll('li.Box-row a').forEach(function (_this) {\n                let href = _this.href.split(location.host),\n                    url = '', _html = `<div class=\"XIU2-RS\" style=\"${divDisplay}\">`;\n\n                for (let i=0;i<new_download_url.length;i++) {\n                    if (new_download_url[i][3] !== undefined && url.indexOf('/archive/') !== -1) {\n                        url = new_download_url[i][3] + href[1]\n                    } else {\n                        url = new_download_url[i][0] + href[1]\n                    }\n                    _html += `<a style=\"${style[0]}\" class=\"btn\" href=\"${url}\" title=\"${new_download_url[i][2]}\" rel=\"noreferrer noopener nofollow\">${new_download_url[i][1]}</a>`\n                }\n                _this.parentElement.nextElementSibling.insertAdjacentHTML('beforeend', _html + '</div>');\n            });\n        }\n    }\n\n\n    // Download ZIP\n    function addDownloadZIP(target) {\n        let html = target.querySelector('ul[class^=List__ListBox-sc-] ul[class^=List__ListBox-sc-]>li:last-child');if (!html) return\n        let href_script = document.querySelector('react-partial[partial-name=repos-overview]>script[data-target=\"react-partial.embeddedData\"]'),\n            href_slice = href_script.textContent.slice(href_script.textContent.indexOf('\"zipballUrl\":\"')+14),\n            href = href_slice.slice(0, href_slice.indexOf('\"')),\n            url = '', _html = '', new_download_url = get_New_download_url();\n\n        // å…‹éš†åŸ Download ZIP å…ƒç´ ï¼Œå¹¶å®šä½ <a> <span> æ ‡ç­¾\n        let html_clone = html.cloneNode(true),\n            html_clone_a = html_clone.querySelector('a[href$=\".zip\"]'),\n            html_clone_span = html_clone.querySelector('span[id]');\n\n        for (let i=0;i<new_download_url.length;i++) {\n            if (new_download_url[i][3] === '') continue\n\n            if (new_download_url[i][3] !== undefined) {\n                url = new_download_url[i][3] + href\n            } else {\n                url = new_download_url[i][0] + href\n            }\n            html_clone_a.href = url\n            html_clone_a.setAttribute('title', new_download_url[i][2].replaceAll('&#10;','\\n'))\n            html_clone_span.textContent = 'Download ZIP ' + new_download_url[i][1]\n            _html += html_clone.outerHTML\n        }\n        html.insertAdjacentHTML('afterend', _html);\n    }\n\n    // Git Clone åˆ‡æ¢æ¸…ç†\n    function addGitCloneClear(css) {\n        document.querySelectorAll(css).forEach((e)=>{e.remove()})\n    }\n\n    // Git Clone\n    function addGitClone(target) {\n        let html = target.querySelector('input[value^=\"https:\"]:not([title])');if (!html) return\n        let href_split = html.value.split(location.host)[1],\n            html_parent = '<div style=\"margin-top: 4px;\" class=\"XIU2-GC ' + html.parentElement.className + '\">',\n            url = '', _html = '', _gitClone = '';\n        if (html.nextElementSibling) html.nextElementSibling.hidden = true; // éšè—å³ä¾§å¤åˆ¶æŒ‰é’®ï¼ˆè€ƒè™‘åˆ°èƒ½ç›´æ¥ç‚¹å‡»å¤åˆ¶ï¼Œå°±ä¸å†é‡å¤å®ç°å¤åˆ¶æŒ‰é’®äº‹ä»¶äº†ï¼‰\n        if (html.parentElement.nextElementSibling.tagName === 'SPAN'){\n            html.parentElement.nextElementSibling.textContent += ' (â†‘ç‚¹å‡»ä¸Šé¢æ–‡å­—å¯å¤åˆ¶)'\n        }\n        if (GM_getValue('menu_gitClone')) {_gitClone='git clone '; html.value = _gitClone + html.value; html.setAttribute('value', html.value);}\n        // å…‹éš†åŸ Git Clone å…ƒç´ \n        let html_clone = html.cloneNode(true);\n        for (let i=0;i<clone_url.length;i++) {\n            if (clone_url[i][0] === 'https://gitclone.com') {\n                url = clone_url[i][0] + '/github.com' + href_split\n            } else {\n                url = clone_url[i][0] + href_split\n            }\n            html_clone.title = `${url}\\n\\n${clone_url[i][2].replaceAll('&#10;','\\n')}\\n\\næç¤ºï¼šç‚¹å‡»æ–‡å­—å¯ç›´æ¥å¤åˆ¶`\n            html_clone.setAttribute('value', _gitClone + url)\n            _html += html_parent + html_clone.outerHTML + '</div>'\n        }\n        html.parentElement.insertAdjacentHTML('afterend', _html);\n        if (html.parentElement.parentElement.className.indexOf('XIU2-GCP') === -1){\n            html.parentElement.parentElement.classList.add('XIU2-GCP')\n            html.parentElement.parentElement.addEventListener('click', (e)=>{if (e.target.tagName === 'INPUT') {GM_setClipboard(e.target.value);}})\n        }\n    }\n\n\n    // Git Clone SSH\n    function addGitCloneSSH(target) {\n        let html = target.querySelector('input[value^=\"git@\"]:not([title])');if (!html) return\n        let href_split = html.value.split(':')[1],\n            html_parent = '<div style=\"margin-top: 4px;\" class=\"XIU2-GCS ' + html.parentElement.className + '\">',\n            url = '', _html = '', _gitClone = '';\n        html.nextElementSibling.hidden = true; // éšè—å³ä¾§å¤åˆ¶æŒ‰é’®ï¼ˆè€ƒè™‘åˆ°èƒ½ç›´æ¥ç‚¹å‡»å¤åˆ¶ï¼Œå°±ä¸å†é‡å¤å®ç°å¤åˆ¶æŒ‰é’®äº‹ä»¶äº†ï¼‰\n        if (html.parentElement.nextElementSibling.tagName === 'SPAN'){\n            html.parentElement.nextElementSibling.textContent += ' (â†‘ç‚¹å‡»æ–‡å­—å¯å¤åˆ¶)'\n        }\n        if (GM_getValue('menu_gitClone')) {_gitClone='git clone '; html.value = _gitClone + html.value; html.setAttribute('value', html.value);}\n        // å…‹éš†åŸ Git Clone SSH å…ƒç´ \n        let html_clone = html.cloneNode(true);\n        for (let i=0;i<clone_ssh_url.length;i++) {\n            url = clone_ssh_url[i][0] + href_split\n            html_clone.title = `${url}\\n\\n${clone_ssh_url[i][2].replaceAll('&#10;','\\n')}\\n\\næç¤ºï¼šç‚¹å‡»æ–‡å­—å¯ç›´æ¥å¤åˆ¶`\n            html_clone.setAttribute('value', _gitClone + url)\n            _html += html_parent + html_clone.outerHTML + '</div>'\n        }\n        html.parentElement.insertAdjacentHTML('afterend', _html);\n        if (html.parentElement.parentElement.className.indexOf('XIU2-GCP') === -1){\n            html.parentElement.parentElement.classList.add('XIU2-GCP')\n            html.parentElement.parentElement.addEventListener('click', (e)=>{if (e.target.tagName === 'INPUT') {GM_setClipboard(e.target.value);}})\n        }\n    }\n\n\n    // Raw\n    function addRawFile() {\n        let html = document.querySelector('a[data-testid=\"raw-button\"]');if (!html) return\n        let href = location.href.replace(`https://${location.host}`,''),\n            href2 = href.replace('/blob/','/'),\n            url = '', _html = '';\n\n        for (let i=1;i<raw_url.length;i++) {\n            if ((raw_url[i][0].indexOf('/gh') + 3 === raw_url[i][0].length) && raw_url[i][0].indexOf('cdn.staticaly.com') === -1) {\n                url = raw_url[i][0] + href.replace('/blob/','@');\n            } else {\n                url = raw_url[i][0] + href2;\n            }\n            _html += `<a href=\"${url}\" title=\"${raw_url[i][2]}\" target=\"_blank\" role=\"button\" rel=\"noreferrer noopener nofollow\" data-size=\"small\" class=\"${html.className} XIU2-RF\">${raw_url[i][1].replace(/ \\d/,'')}</a>`\n        }\n        if (document.querySelector('.XIU2-RF')) document.querySelectorAll('.XIU2-RF').forEach((e)=>{e.remove()})\n        html.insertAdjacentHTML('afterend', _html);\n    }\n\n\n    // Raw å•æ–‡ä»¶å¿«æ·ä¸‹è½½ï¼ˆâ˜ï¼‰\n    function addRawDownLink() {\n        if (!GM_getValue('menu_rawDownLink')) return\n        // å¦‚æœä¸æ˜¯é¡¹ç›®æ–‡ä»¶é¡µé¢ï¼Œå°±è¿”å›ï¼Œå¦‚æœç½‘é¡µæœ‰ Raw ä¸‹è½½é“¾æ¥ï¼ˆâ˜ï¼‰å°±è¿”å›\n        let files = document.querySelectorAll('div.Box-row svg.octicon.octicon-file, .react-directory-filename-column>svg.color-fg-muted');if(files.length === 0) return;if (location.pathname.indexOf('/tags') > -1) return\n        let files1 = document.querySelectorAll('a.fileDownLink');if(files1.length > 0) return;\n\n        // é¼ æ ‡æŒ‡å‘åˆ™æ˜¾ç¤º\n        var mouseOverHandler = function(evt) {\n            let elem = evt.currentTarget,\n                aElm_new = elem.querySelectorAll('.fileDownLink'),\n                aElm_now = elem.querySelectorAll('svg.octicon.octicon-file, svg.color-fg-muted');\n            aElm_new.forEach(el=>{el.style.cssText = 'display: inline'});\n            aElm_now.forEach(el=>{el.style.cssText = 'display: none'});\n        };\n\n        // é¼ æ ‡ç¦»å¼€åˆ™éšè—\n        var mouseOutHandler = function(evt) {\n            let elem = evt.currentTarget,\n                aElm_new = elem.querySelectorAll('.fileDownLink'),\n                aElm_now = elem.querySelectorAll('svg.octicon.octicon-file, svg.color-fg-muted');\n            aElm_new.forEach(el=>{el.style.cssText = 'display: none'});\n            aElm_now.forEach(el=>{el.style.cssText = 'display: inline'});\n        };\n\n        // å¾ªç¯æ·»åŠ \n        files.forEach(function(fileElm) {\n            let trElm = fileElm.parentNode.parentNode,\n                cntElm_a = trElm.querySelector('[role=\"rowheader\"] > .css-truncate.css-truncate-target.d-block.width-fit > a, .react-directory-truncate>a'),\n                Name = cntElm_a.innerText,\n                href = cntElm_a.getAttribute('href'),\n                href2 = href.replace('/blob/','/'), url = '';\n            if ((raw_url[menu_rawFast][0].indexOf('/gh') + 3 === raw_url[menu_rawFast][0].length) && raw_url[menu_rawFast][0].indexOf('cdn.staticaly.com') === -1) {\n                url = raw_url[menu_rawFast][0] + href.replace('/blob/','@');\n            } else {\n                url = raw_url[menu_rawFast][0] + href2;\n            }\n\n            fileElm.insertAdjacentHTML('afterend', `<a href=\"${url}\" download=\"${Name}\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" class=\"fileDownLink\" style=\"display: none;\" title=\"ã€Œ${raw_url[menu_rawFast][1]}ã€&#10;&#10;[Alt + å·¦é”®] æˆ– [å³é”® - å¦å­˜ä¸º...] ä¸‹è½½æ–‡ä»¶ã€‚&#10;æ³¨æ„ï¼šé¼ æ ‡ç‚¹å‡» [â˜] å›¾æ ‡ï¼Œè€Œä¸æ˜¯å·¦ä¾§çš„æ–‡ä»¶åï¼&#10;&#10;${raw_url[menu_rawFast][2]}&#10;&#10;æç¤ºï¼šç‚¹å‡»æµè§ˆå™¨å³ä¸Šè§’ Tampermonkey æ‰©å±•å›¾æ ‡ - [ ${raw_url[menu_rawFast][1]} ] åŠ é€Ÿæº (â˜) å³å¯åˆ‡æ¢ã€‚\">${svg[0]}</a>`);\n            // ç»‘å®šé¼ æ ‡äº‹ä»¶\n            trElm.onmouseover = mouseOverHandler;\n            trElm.onmouseout = mouseOutHandler;\n        });\n    }\n\n\n    // ç§»é™¤ Raw å•æ–‡ä»¶å¿«æ·ä¸‹è½½ï¼ˆâ˜ï¼‰\n    function delRawDownLink() {\n        if (!GM_getValue('menu_rawDownLink')) return\n        let aElm = document.querySelectorAll('.fileDownLink');if(aElm.length === 0) return;\n        aElm.forEach(function(fileElm) {fileElm.remove();})\n    }\n\n\n    // åœ¨æµè§ˆå™¨è¿”å›/å‰è¿›æ—¶é‡æ–°æ·»åŠ  Raw å•æ–‡ä»¶å¿«æ·ä¸‹è½½ï¼ˆâ˜ï¼‰é¼ æ ‡äº‹ä»¶\n    function addRawDownLink_() {\n        if (!GM_getValue('menu_rawDownLink')) return\n        // å¦‚æœä¸æ˜¯é¡¹ç›®æ–‡ä»¶é¡µé¢ï¼Œå°±è¿”å›ï¼Œå¦‚æœç½‘é¡µæ²¡æœ‰ Raw ä¸‹è½½é“¾æ¥ï¼ˆâ˜ï¼‰å°±è¿”å›\n        let files = document.querySelectorAll('div.Box-row svg.octicon.octicon-file, .react-directory-filename-column>svg.color-fg-muted');if(files.length === 0) return;\n        let files1 = document.querySelectorAll('a.fileDownLink');if(files1.length === 0) return;\n\n        // é¼ æ ‡æŒ‡å‘åˆ™æ˜¾ç¤º\n        var mouseOverHandler = function(evt) {\n            let elem = evt.currentTarget,\n                aElm_new = elem.querySelectorAll('.fileDownLink'),\n                aElm_now = elem.querySelectorAll('svg.octicon.octicon-file, svg.color-fg-muted');\n            aElm_new.forEach(el=>{el.style.cssText = 'display: inline'});\n            aElm_now.forEach(el=>{el.style.cssText = 'display: none'});\n        };\n\n        // é¼ æ ‡ç¦»å¼€åˆ™éšè—\n        var mouseOutHandler = function(evt) {\n            let elem = evt.currentTarget,\n                aElm_new = elem.querySelectorAll('.fileDownLink'),\n                aElm_now = elem.querySelectorAll('svg.octicon.octicon-file, svg.color-fg-muted');\n            aElm_new.forEach(el=>{el.style.cssText = 'display: none'});\n            aElm_now.forEach(el=>{el.style.cssText = 'display: inline'});\n        };\n        // å¾ªç¯æ·»åŠ \n        files.forEach(function(fileElm) {\n            let trElm = fileElm.parentNode.parentNode;\n            // ç»‘å®šé¼ æ ‡äº‹ä»¶\n            trElm.onmouseover = mouseOverHandler;\n            trElm.onmouseout = mouseOutHandler;\n        });\n    }\n\n\n    // é€‚é…ç™½å¤©/å¤œé—´ä¸»é¢˜æ¨¡å¼\n    function colorMode() {\n        let style_Add;\n        if (document.getElementById('XIU2-Github')) {style_Add = document.getElementById('XIU2-Github')} else {style_Add = document.createElement('style'); style_Add.id = 'XIU2-Github'; style_Add.type = 'text/css';}\n        backColor = '#ffffff'; fontColor = '#888888';\n\n        if (document.lastElementChild.dataset.colorMode === 'dark') { // å¦‚æœæ˜¯å¤œé—´æ¨¡å¼\n            if (document.lastElementChild.dataset.darkTheme === 'dark_dimmed') {\n                backColor = '#272e37'; fontColor = '#768390';\n            } else {\n                backColor = '#161a21'; fontColor = '#97a0aa';\n            }\n        } else if (document.lastElementChild.dataset.colorMode === 'auto') { // å¦‚æœæ˜¯è‡ªåŠ¨æ¨¡å¼\n            if (window.matchMedia('(prefers-color-scheme: dark)').matches || document.lastElementChild.dataset.lightTheme.indexOf('dark') > -1) { // å¦‚æœæµè§ˆå™¨æ˜¯å¤œé—´æ¨¡å¼ æˆ– ç™½å¤©æ¨¡å¼æ˜¯ dark çš„æƒ…å†µ\n                if (document.lastElementChild.dataset.darkTheme === 'dark_dimmed') {\n                    backColor = '#272e37'; fontColor = '#768390';\n                } else if (document.lastElementChild.dataset.darkTheme.indexOf('light') == -1) { // æ’é™¤å¤œé—´æ¨¡å¼æ˜¯ light çš„æƒ…å†µ\n                    backColor = '#161a21'; fontColor = '#97a0aa';\n                }\n            }\n        }\n\n        document.lastElementChild.appendChild(style_Add).textContent = `.XIU2-RS a {--XIU2-back-Color: ${backColor}; --XIU2-font-Color: ${fontColor};}`;\n    }\n\n\n    // è‡ªå®šä¹‰ urlchange äº‹ä»¶ï¼ˆç”¨æ¥ç›‘å¬ URL å˜åŒ–ï¼‰ï¼Œé’ˆå¯¹é Tampermonkey æ²¹çŒ´ç®¡ç†å™¨\n    function addUrlChangeEvent() {\n        history.pushState = ( f => function pushState(){\n            var ret = f.apply(this, arguments);\n            window.dispatchEvent(new Event('pushstate'));\n            window.dispatchEvent(new Event('urlchange'));\n            return ret;\n        })(history.pushState);\n\n        history.replaceState = ( f => function replaceState(){\n            var ret = f.apply(this, arguments);\n            window.dispatchEvent(new Event('replacestate'));\n            window.dispatchEvent(new Event('urlchange'));\n            return ret;\n        })(history.replaceState);\n\n        window.addEventListener('popstate',()=>{ // ç‚¹å‡»æµè§ˆå™¨çš„å‰è¿›/åé€€æŒ‰é’®æ—¶è§¦å‘ urlchange äº‹ä»¶\n            window.dispatchEvent(new Event('urlchange'))\n        });\n    }\n})();\n"
        },
        {
          "name": "GoogleTranslate-Beautification.user.js",
          "type": "blob",
          "size": 4.7724609375,
          "content": "// ==UserScript==\n// @name         Google ç¿»è¯‘ç¾åŒ–\n// @version      1.0.1\n// @author       X.I.U\n// @description  ç²¾ç®€å¤šä½™å†…å®¹ã€ä¿®å¤ç¿»è¯‘ç»“æœæº¢å‡ºå±å¹•é—®é¢˜\n// @match        *://translate.google.cn/*\n// @match        *://translate.google.com/*\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFHklEQVR4nMWWW0ycRRTHfzPz7S4ssIWyFOiFy1ZKCyKJFG2tqZamtDHWahqNsTExadL6ZmITX3zhoS+NT1ofaqPx1fii9dKQWqtpoya92ZuUAgWhWCj3BXYpe5nxYdllv90FYiDxbCaZ2Znv/P/nNnPgfxYBcOzz8fLuSeuspWQNJrZh5gaAMfMfxOfahD45c6zgveUSkADd0/JHS8maZODkkQBPGjoUPdrS8ou1IgQsYdXCvHUmw8FUItKV7bopKxtXhIAx6eAJwExs5iTicB9dGQKkuztZMuUCgHSoQ0eOXHUsm0Aq2GLW2/ZElvXQm7dzOQSsjDgmw3QBMmXlhedv3GyncLUHy5KJg8YYTIrL4utwONw5ORlpqq+v6rcWUg7QUKHZW6upKNQA9I5Jzt6SXP173nH909kMjofIcs3g8biRUixlNE6ns6qgQJ0DatLKKM7lzcYIzbUaAwz4BRjweTXv7NB0DTkYD4o5q+DukBtvbhCnU+F2Zy1JAEAptQUWCEFDuaa5VjMyLTj5s0XvWAys0msIR2AiCRygYzSP7eUBAoEgSkmczqXzMh4OK1lRXJprowCc+lUlwDHQMyziU5v0B3LwBw1ZLk0wGMSYLFwu15IkEgRSpbIQxoOCrmGZAP/0UMh25t6g5OPz1hwZwd2RXLyeGYyB2dlZ/hkaIxgKUesrs1mckUDqlgGEsG8MT8WstyRsWG3wZBlbhdwbyaGhdAKEweGQ3OrqpvfRKFUb1toISCmwlErxQAqDnhHYVGyoKjZ0PhIYoOW7WFzr12veb44w4J/3DkDfVA6nvr2IZYWQyiBEbP/4l18jpYrdthi2bt7IyzsaUgikSOsdxabiCO++GOHkeUXPqMQYWFdgeHt7LD8udcoEuAEQiieqX6CueBynS2I5LAQxIt//dp3qivXUVG4gP8+9dAiu9UrO3la8VBel5UCEQT+AoHiVQQCtdyTtA+kJORJdC8KPUhYb15UgBPQ8HGJmdpbGzT7KStfYwpHmgeQ8+eqyomNQsK8uis8LCLg/JPmpTfJ7l0wDN8bQO5lLv2OKG13tHD7QRFG+hwvXb1NRUkRRfh7RaBQp7bd/xjJMeKJPcq0v6YMMV3SyNVEEIq+a/Jw+frh0nfK1XsYmpnl1/zMAhEIhHA4HSqn5pIwrW6wRSf7D3ikZ2xGAjjEPexrrGZmY5EpbB01b6/DmexLnIpEI0Wg0sU57DRdiktYdzYGnvp69/hy6B/2EI1EQ8GBoFK21jazWOkFC2rSkhCJjW5b0yqV5CYiguNA2y9PVPl7f9TydDx5y5uIVtLYr11rPE1gqBHHQhay2lSOQXVjHttpNlBV7ObhrG139g3xz8XKCRLI3Yh7Qob9sxiQBpsY5k9X2vAC/LiHwWBMOR6goWcPBpu3c7x/gdndvmk4LQM8E9mlH+JxSri2kSMYCsVVDEsG5aRhoH85mW24YgMrSIg7v381qTx7GGISY7xmW7h4WkQ+PX/zgjz8nT9jK2EB2tuHIW8VUlOWS7VJ2QCGQUiKEwOfzifQq+A8yPDX4mZASqeaGlCiH4tCBQtaVuFAyBrhYe7YsAqdPvOGvrFCDgvnfa825VPncOB0KKRbvDZdNAKC00P1RXOnOZ7NofCoPhyWRUiBEeh+Qul42gUfjj78wxvBktZPdz3mQMvbmywyak8EDgdm2FSFw+sQe/9Z6Og/uXYVUBinBGJ1wvdY6cfPF59PTM+2trbdeWS72isi//t1/7RwSS+MAAAAASUVORK5CYII=\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @license      GPL-3.0 License\n// @run-at       document-start\n// @namespace    https://greasyfork.org/scripts/413721\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n'use strict';\n(function() {\n    var menu_streamline = GM_getValue('xiu2_menu_streamline');\n    var menu_streamline_ID, menu_feedBack_ID;\n    if (menu_streamline == null){menu_streamline = true; GM_setValue('xiu2_menu_streamline', menu_streamline)};\n    registerMenuCommand();\n    addStyle();\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        var menu_streamline_;\n        if (menu_feedBack_ID){ // å¦‚æœåé¦ˆèœå•IDä¸æ˜¯ nullï¼Œåˆ™åˆ é™¤æ‰€æœ‰è„šæœ¬èœå•\n            GM_unregisterMenuCommand(menu_streamline_ID);\n            GM_unregisterMenuCommand(menu_feedBack_ID);\n            menu_streamline = GM_getValue('xiu2_menu_streamline');\n        }\n\n        if (menu_streamline){menu_streamline_ = \"âˆš\";}else{menu_streamline_ = \"Ã—\";}\n\n        menu_streamline_ID = GM_registerMenuCommand(`[ ${menu_streamline_} ] ç²¾ç®€ç¾åŒ–`, function(){menu_switch(menu_streamline,'xiu2_menu_streamline','ç²¾ç®€ç¾åŒ–')});\n        menu_feedBack_ID = GM_registerMenuCommand('åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});});\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status){\n            GM_setValue(`${Name}`, false);\n            GM_notification(`å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆåˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`);\n        }else{\n            GM_setValue(`${Name}`, true);\n            GM_notification(`å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆåˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`);\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n\n    // æ·»åŠ æ ·å¼\n    function addStyle() {\n        var style,\n            style_1 = `\n/* ç¿»è¯‘ç»“æœçš„é€‰æ‹©åˆ—è¡¨å®½åº¦\n.alt-menu {\n    max-width: 35% !important;\n} */\n/* ç¿»è¯‘ç»“æœé€‰æ‹©æ—¶æ˜¾ç¤ºç¿»è¯‘ç»“æœçš„ç¿»è¯‘ç»“æœ\n.goog-menu.round-trip-content {\n    white-space: normal !important;\n    word-break: break-all !important;\n} */`,\n            style_2 = `\n/* æ¸…ç†å¤šä½™å†…å®¹\n.rQKk7.zJmlgc {\n\tdisplay: none !important;\n} */`,\n            style_Add = document.createElement('style');\n        if (menu_streamline) {\n            style = style_1 + style_2;\n        }else{\n            style = style_1;\n        }\n        style_Add.innerHTML = style;\n        document.head.appendChild(style_Add);\n    }\n})();"
        },
        {
          "name": "HTML5Volume.user.js",
          "type": "blob",
          "size": 10.146484375,
          "content": "// ==UserScript==\n// @name         HTML5 è§†é¢‘éŸ³é¢‘é»˜è®¤éŸ³é‡\n// @name:zh-CN   HTML5 è§†é¢‘éŸ³é¢‘é»˜è®¤éŸ³é‡\n// @name:zh-TW   HTML5 è¦–è¨ŠéŸ³è¨Šé è¨­éŸ³é‡\n// @name:en      HTML5 Video Audio Default Volume\n// @version      1.0.3\n// @author       X.I.U\n// @description  é¿å…è¢«ä¸€äº›é»˜è®¤ 100% éŸ³é‡çš„è§†é¢‘/éŸ³é¢‘å“ä¸€è·³ï¼ˆæˆ–ç¤¾æ­»ï¼‰ï¼ä¸”æ”¯æŒå„ç½‘ç«™åˆ†åˆ«è®°ä½éŸ³é‡...\n// @description:zh-CN  é¿å…è¢«ä¸€äº›é»˜è®¤ 100% éŸ³é‡çš„è§†é¢‘/éŸ³é¢‘å“ä¸€è·³ï¼ˆæˆ–ç¤¾æ­»ï¼‰ï¼ä¸”æ”¯æŒå„ç½‘ç«™åˆ†åˆ«è®°ä½éŸ³é‡...\n// @description:zh-TW  é¿å…è¢«ä¸€äº›é è¨­ 100% éŸ³é‡çš„è¦–è¨Š/éŸ³è¨Šåš‡ä¸€è·³ï¼ˆæˆ–ç¤¾æ­»ï¼‰ï¼ä¸”æ”¯æ´å„ç¶²ç«™åˆ†åˆ¥è¨˜ä½éŸ³é‡...\n// @description:en  Avoid being startled by some video/audio with default 100% volume! And support each website to remember the volume separately...\n// @match        *://*/*\n// @icon         data:image/png;base64,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\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @license      GPL-3.0 License\n// @run-at       document-start\n// @namespace    https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ID = [];\n    registerMenuCommand(); // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (self != top) return\n        // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n        if (menu_ID.length > 0){for (let i=0;i<menu_ID.length;i++){GM_unregisterMenuCommand(menu_ID[i]);}}\n        menu_ID[0] = GM_registerMenuCommand('#ï¸âƒ£ ä¿®æ”¹å…¨å±€é»˜è®¤éŸ³é‡ [ ' + GM_getValue('menu_defaultVolume', 30) + '% ]', function(){customDefaultVolume()});\n        let nowVolume = ' (è·Ÿéšå…¨å±€)'\n        if (localStorage.getItem('html5_xiu_currentVolume')) nowVolume = ' [ ' + parseInt(localStorage.getItem('html5_xiu_currentVolume')) + '% ]'\n        menu_ID[1] = GM_registerMenuCommand('ğŸ” å¿˜è®°å½“å‰ç½‘ç«™éŸ³é‡' + nowVolume, function(){resetCurrentVolume()});\n        menu_ID[2] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true}); GM_openInTab('https://greasyfork.org/zh-CN/scripts/438400/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    insPage();\n    currentPage();\n\n\n    // ç½‘é¡µæœ¬èº«çš„ Video Audio æ ‡ç­¾\n    function currentPage() {\n        document.querySelectorAll('video, audio').forEach(function(_this){\n            //console.log('ç½‘é¡µæœ¬èº«ï¼š', _this)\n            isFirstEvent(_this)\n        })\n    }\n\n\n    // åç»­åŠ¨æ€æ’å…¥çš„ Video Audio æ ‡ç­¾ï¼ˆæ’å…¥äº‹ä»¶ï¼‰\n    function insPage() {\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) break\n                    //console.log('æ‰€æœ‰æ’å…¥ï¼š', target)\n                    if (target.tagName === 'VIDEO' || target.tagName === 'AUDIO') {\n                        //console.log('åç»­æ’å…¥1ï¼š', target)\n                        isFirstEvent(target)\n                    } else if (target.tagName === 'DIV') {\n                        target.querySelectorAll('video, audio').forEach(function(_this){\n                            //console.log('åç»­æ’å…¥2ï¼š', _this)\n                            isFirstEvent(_this)\n                        })\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n\n    // éŸ³é‡å˜åŒ–äº‹ä»¶ï¼ˆè®°ä½éŸ³é‡ï¼‰\n    function volumeChangeEvent(event) {\n        if (event.target.muted) { // åˆ¤æ–­æ˜¯å¦é™éŸ³\n            localStorage.setItem('html5_xiu_currentVolume', 0)\n            registerMenuCommand(); // ä¿®æ”¹è„šæœ¬èœå•\n        } else if (localStorage.getItem('html5_xiu_currentVolume') || ((event.target.volume * 100) !== GM_getValue('menu_defaultVolume', 30))) {\n            localStorage.setItem('html5_xiu_currentVolume', event.target.volume * 100)\n            registerMenuCommand(); // ä¿®æ”¹è„šæœ¬èœå•\n        }\n    }\n\n\n    // åˆ¤æ–­è¯¥è§†é¢‘/éŸ³é¢‘å…ƒç´ æ˜¯å¦å·²ç›‘å¬äº‹ä»¶\n    function isFirstEvent(target) {\n        if (!target.controls) return; // å¦‚æœè§†é¢‘/éŸ³é¢‘å·²ç»æœ‰äº†è‡ªå·±çš„æ§ä»¶ï¼ˆå³æ²¡æœ‰ä½¿ç”¨ HTML5 é»˜è®¤çš„æ§ä»¶ï¼‰ï¼Œåˆ™é€€å‡º\n        modifyVolume(target);\n        // å¦‚æœæ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™ä»£è¡¨æ˜¯è¿˜æœªç›‘å¬äº‹ä»¶\n        if (target.dataset.html5VolumeXiu != 'true') {\n            target.dataset.html5VolumeXiu = 'true'\n            target.addEventListener('volumechange', volumeChangeEvent);\n        }\n    }\n\n\n    // ä¿®æ”¹è§†é¢‘éŸ³é‡\n    function modifyVolume(_this) {\n        let nowVolume = parseFloat(localStorage.getItem('html5_xiu_currentVolume')); // å…ˆçœ‹çœ‹ localStorage æœ‰æ²¡æœ‰ï¼ˆå³ç”¨æˆ·æ˜¯å¦æ‰‹åŠ¨è°ƒæ•´è¿‡éŸ³é‡ï¼‰\n        if (!nowVolume && nowVolume !== 0) nowVolume = GM_getValue('menu_defaultVolume', 30); // å¦‚æœ localStorage æ²¡æœ‰ï¼Œé‚£å°±ä»è„šæœ¬é…ç½®ä¸­è·å–\n        if (!((typeof nowVolume === 'number') && nowVolume <= 100)) nowVolume = 30; // å¦‚æœè·å–åˆ°çš„éŸ³é‡æ•°å€¼ä¸æ˜¯æ•°å­—ï¼Œæˆ–å¤§äº 100ï¼Œåˆ™é‡ç½®ä¸º 30\n        //console.log(_this, _this.volume, nowVolume, nowVolume / 100)\n        _this.volume = nowVolume / 100; // è®¾ç½®éŸ³é‡ä¸º 0.00~1.00 èŒƒå›´\n        //console.log(_this.volume)\n    }\n\n\n    // ä¿®æ”¹å…¨å±€é»˜è®¤éŸ³é‡\n    function customDefaultVolume() {\n        let newValue = parseFloat(prompt('ä¿®æ”¹å…¨å±€é»˜è®¤éŸ³é‡ï¼Œä¸å½±å“å„ç½‘ç«™è®°ä½çš„éŸ³é‡ï¼Œå½“å‰ç½‘é¡µéœ€åˆ·æ–°åç”Ÿæ•ˆ~\\nèŒƒå›´ï¼š0~100 (å³ 0%~100%ï¼Œä¸éœ€è¦åŠ  % ç™¾åˆ†å·)\\né»˜è®¤ï¼š30', GM_getValue('menu_defaultVolume', 30)));\n        if (!Number.isNaN(newValue) && newValue >= 0 && newValue <= 100) {GM_setValue('menu_defaultVolume', newValue);}\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œèœå•ï¼ˆåˆ·æ–°èœå•ä¸Šçš„éŸ³é‡å€¼ï¼‰\n    }\n\n\n    // å¿˜è®°å½“å‰ç½‘ç«™éŸ³é‡\n    function resetCurrentVolume() {\n        if (localStorage.getItem('html5_xiu_currentVolume')) localStorage.removeItem('html5_xiu_currentVolume') // æ¸…ç† localStorage\n        currentPage(); // é‡ç½®å½“å‰ç½‘é¡µçš„éŸ³é‡\n    }\n})();"
        },
        {
          "name": "Hostloc-Enhanced.user.js",
          "type": "blob",
          "size": 34.7255859375,
          "content": "// ==UserScript==\n// @name         å…¨çƒä¸»æœºäº¤æµè®ºå›å¢å¼º\n// @version      1.4.9\n// @author       X.I.U\n// @description  è‡ªåŠ¨ç­¾åˆ°ï¼ˆè®¿é—®ç©ºé—´ +22 ç§¯åˆ†ï¼‰ã€å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰ã€å±è”½å…³é”®è¯ï¼ˆå¸–å­æ ‡é¢˜ï¼‰ã€å›å¸–å°å°¾å·´ã€è‡ªåŠ¨æ— ç¼ç¿»é¡µã€å¿«æ·å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ç½‘é¡µä¸¤ä¾§ç©ºç™½å¤„ï¼‰ã€æ”¶èµ·é¢„è§ˆå¸–å­ï¼ˆå·¦é”®ç½‘é¡µä¸¤ä¾§ç©ºç™½å¤„ï¼‰ã€å±è”½æŠ•ç¥¨è´´ã€å¿«é€Ÿæ·»åŠ é“¾æ¥ã€å±è”½é˜…è¯»æƒé™ 255 å¸–å­ã€é¢„è§ˆå¸–å­å¿«é€Ÿå›å¤å¸¦ç­¾åã€æ˜¾ç¤ºæ˜¯å¦åœ¨çº¿ã€æ˜¾ç¤ºå¸–å­å†…éšè—å›å¤\n// @match        *://hostloc.com/*\n// @match        *://91ai.net/*\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABYUlEQVR4nM2VMUrFQBCG/xUbUz20EGwkIAjewMYreAabtLlKcgLP4BVsPEHEB0J4TeAJPuy0i42TsJP8byfgY/fvNplM9v92Ztb1fd9jgZxzpjhr2qMlPz+EjvUDcSgOtOO6rk2J9XeMSHQCTtdAyHHbtot+kOc5AKAsSwBTEtEJDDUgzpnjqqpmExRF4a2zLPPWTdPs3UA6BJjE+dfmZfb96vLWWwsRTYIpHQKs7wfnPx97E70+PwIAbu4eAExrgyk6AToHrM61uu0OwEhCK7k5MCEwvNC1sH6aTbC6vvfWUgtaQiQ5AvQ2/P58956fnF3NJrDGMaVHICTd76E4EYtPjwCbiOLo4vwUwNgV+sx1nMwFpugEgnNAJmK3eQMwOtMSp9o5639RdAKLN9Btd8FzPegG/lt0Duhu0LejvgOkK6xnL4pOgHbBJPCPBLvtRFbnougEzHcBm5AszqroBH4BBkemS0VRyL4AAAAASUVORK5CYII=\n// @grant        GM_xmlhttpRequest\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @grant        unsafeWindow\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://greasyfork.org/scripts/414005\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ALL = [\n        ['menu_autoSignIn', 'è‡ªåŠ¨ç­¾åˆ°ï¼ˆ22 ç§¯åˆ†ï¼‰', 'è‡ªåŠ¨ç­¾åˆ°', true],\n        ['menu_reAutoSignIn', 'é‡æ–°ç­¾åˆ°', 'é‡æ–°ç­¾åˆ°', ''],\n        ['menu_customBlockUsers', 'å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰', 'å±è”½ç”¨æˆ·', []],\n        ['menu_customBlockKeywords', 'å±è”½å…³é”®è¯ï¼ˆå¸–å­æ ‡é¢˜ï¼‰', 'å±è”½å…³é”®è¯', []],\n        ['menu_customLittleTail', 'å›å¸–å°å°¾å·´', 'å›å¸–å°å°¾å·´', ''],\n        ['menu_pageLoading', 'è‡ªåŠ¨æ— ç¼ç¿»é¡µï¼ˆæ€»å¼€å…³ï¼‰', 'è‡ªåŠ¨æ— ç¼ç¿»é¡µ', true],\n        ['menu_thread_pageLoading', 'å¸–å­å†…è‡ªåŠ¨ç¿»é¡µ', 'å¸–å­å†…è‡ªåŠ¨ç¿»é¡µ', true],\n        ['menu_showhide', 'æ˜¾ç¤ºå¸–å†…éšè—å›å¤', 'æ˜¾ç¤ºå¸–å†…éšè—å›å¤', true],\n        ['menu_delate255', 'å±è”½é˜…è¯»æƒé™ 255 å¸–å­', 'å±è”½é˜…è¯»æƒé™ 255 å¸–å­', true],\n        ['menu_delatePolls', 'å±è”½æŠ•ç¥¨å¸–å­', 'å±è”½æŠ•ç¥¨å¸–å­', false]\n    ], menu_ID = [];\n    for (let i=0;i<menu_ALL.length;i++){ // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n        if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};\n    }\n    registerMenuCommand();\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (menu_ID.length > menu_ALL.length){ // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n            for (let i=0;i<menu_ID.length;i++){\n                GM_unregisterMenuCommand(menu_ID[i]);\n            }\n        }\n        for (let i=0;i<menu_ALL.length;i++){ // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n            menu_ALL[i][3] = GM_getValue(menu_ALL[i][0]);\n            if (menu_ALL[i][0] === 'menu_reAutoSignIn') {\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){reAutoSignIn()});\n            } else if (menu_ALL[i][0] === 'menu_customBlockUsers') {\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){customBlockUsers()});\n            } else if (menu_ALL[i][0] === 'menu_customBlockKeywords') {\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){customBlockKeywords()});\n            } else if (menu_ALL[i][0] === 'menu_customLittleTail') {\n                if (menu_value(menu_ALL[i][0]).length === 0) {GM_setValue(menu_ALL[i][0], '')} // ä¿®æ”¹æ—§ç‰ˆç±»å‹\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){customLittleTail()});\n            } else {\n                menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n            }\n        }\n        menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/414005/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status == 'true'){\n            GM_setValue(`${Name}`, false);\n            GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }else{\n            GM_setValue(`${Name}`, true);\n            GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n    // è¿”å›èœå•å€¼\n    function menu_value(menuName) {\n        for (let menu of menu_ALL) {\n            if (menu[0] == menuName) {\n                return menu[3]\n            }\n        }\n    }\n\n    // æ£€æŸ¥æ˜¯å¦ç™»é™†\n    var loginStatus = false;\n    if (document.getElementById('um')){\n        loginStatus = true;\n    } else {\n        if (typeof discuz_uid != 'undefined') loginStatus = (discuz_uid != '0' ? true : false);\n    }\n\n    // é»˜è®¤ ID ä¸º 0\n    var curSite = {SiteTypeID: 0};\n\n    // è‡ªåŠ¨ç¿»é¡µè§„åˆ™\n    let DBSite = {\n        forum: {\n            SiteTypeID: 1\n        },\n        thread: {\n            SiteTypeID: 2,\n            pager: {\n                nextLink: 'a.nxt',\n                pageElement: 'div#postlist > div[id^=\"post_\"]',\n                HT_insert: ['div#postlist', 2],\n                replaceE: '#ct > .pgs',\n            }\n        },\n        search: {\n            SiteTypeID: 3,\n            pager: {\n                nextLink: 'a.nxt',\n                pageElement: 'div#threadlist > ul',\n                HT_insert: ['div#threadlist', 2],\n                replaceE: 'div.pg'\n            }\n        },\n        guide: {\n            SiteTypeID: 4,\n            pager: {\n                nextLink: 'a.nxt',\n                pageElement: 'div#threadlist div.bm_c table > tbody',\n                HT_insert: ['div#threadlist div.bm_c table', 2],\n                replaceE: 'div.pg',\n            }\n        },\n        youreply: {\n            SiteTypeID: 5,\n            pager: {\n                nextLink: 'a.nxt',\n                pageElement: 'tbody > tr:not(.th)',\n                HT_insert: ['tbody', 2],\n                replaceE: 'div.pg',\n            }\n        }\n    };\n\n    // ç”¨äºè„šæœ¬å†…éƒ¨åˆ¤æ–­å½“å‰ URL ç±»å‹\n    let SiteType = {\n        FORUM: DBSite.forum.SiteTypeID, // å„æ¿å—å¸–å­åˆ—è¡¨\n        THREAD: DBSite.thread.SiteTypeID, // å¸–å­å†…\n        GUIDE: DBSite.guide.SiteTypeID, // å¯¼è¯»å¸–å­åˆ—è¡¨\n        SEARCH: DBSite.search.SiteTypeID // æœç´¢ç»“æœåˆ—è¡¨\n    };\n\n    // URL åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼\n    let patt_thread = /\\/thread-\\d+-\\d+\\-\\d+.html/,\n        patt_forum = /\\/forum-\\d+-\\d+\\.html/\n\n    // URL åˆ¤æ–­\n    if (patt_thread.test(location.pathname) || location.search.indexOf('mod=viewthread') > -1) { // å¸–å­å†…\n        if (menu_value('menu_thread_pageLoading')) {\n            curSite = DBSite.thread;\n            hidePgbtn(); //                                               éšè—å¸–å­å†…çš„ [ä¸‹ä¸€é¡µ] æŒ‰é’®\n        }\n        showPosts(); //                                                   è‡ªåŠ¨æ˜¾ç¤ºå¸–å­å†…è¢«éšè—çš„å›å¤\n        blockUsers('thread'); //                                          å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰\n        onlineStatus(); //                                                æ˜¾ç¤ºæ˜¯å¦åœ¨çº¿\n        replyCustom('thread'); //                                         å›å¤è‡ªå®šä¹‰\n    } else if (patt_forum.test(location.pathname) || location.search.indexOf('mod=forumdisplay') > -1) { // å„æ¿å—å¸–å­åˆ—è¡¨\n        curSite = DBSite.forum;\n        collapsedNowPost(); //                                            æ”¶èµ·å½“å‰å¸–å­é¢„è§ˆï¼ˆå·¦é”®å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n        delate255(); //                                                   å±è”½ 255 æƒé™å¸–å­\n        delatePolls(); //                                                 å±è”½æŠ•ç¥¨è´´å­\n        blockUsers('forum'); //                                           å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰\n        blockKeywords(); //                                               å±è”½å…³é”®è¯ï¼ˆå¸–å­æ ‡é¢˜ï¼‰\n        vfastpostDOMNodeInserted(); //                                    ç›‘å¬æ’å…¥äº‹ä»¶ï¼ˆé¢„è§ˆå¿«é€Ÿå›å¤å¸¦ç­¾åï¼‰\n        replyCustom('forum'); //                                          å›å¤è‡ªå®šä¹‰\n        if (patt_forum.test(location.pathname)) blockDOMNodeInserted(); //ç›‘å¬æ’å…¥äº‹ä»¶ï¼ˆæœ‰æ–°çš„å›å¤ä¸»é¢˜ï¼Œç‚¹å‡»æŸ¥çœ‹ï¼‰\n     }else if (location.search.indexOf('mod=guide') > -1) { //            å¯¼è¯»å¸–å­åˆ—è¡¨\n        curSite = DBSite.guide;\n    } else if(location.pathname === '/search.php') { //                   æœç´¢ç»“æœåˆ—è¡¨\n        curSite = DBSite.search;\n        blockUsers('search'); //                                          å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰\n    } else if(location.pathname === '/home.php' && location.search.indexOf('mod=space&do=notice&view=mypost') > -1) { // æ¶ˆæ¯(å¸–å­/ç‚¹è¯„/æåˆ°)\n        blockUsers('notice'); //                                          å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰\n    } else if(location.pathname === '/home.php' && location.search.indexOf('mod=space&do=pm') > -1) { // æ¶ˆæ¯(ç§äººèŠå¤©)\n        blockUsers('pm'); //                                              å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰\n    } else if(location.search.indexOf('mod=space') > -1 && location.search.indexOf('&view=me') > -1) { // åˆ«äººçš„ä¸»é¢˜/å›å¤\n        curSite = DBSite.youreply;\n    } else if(location.pathname === '/forum.php' && location.search.indexOf('mod=post&action=reply') > -1 || location.pathname === '/forum.php' && location.search.indexOf('mod=post&action=newthread') > -1) { // å›å¤ï¼šé«˜çº§å›å¤\n        replyCustom('reply'); //                                          å›å¤è‡ªå®šä¹‰\n    }\n\n    curSite.pageUrl = \"\"; // ä¸‹ä¸€é¡µURL\n    pageLoading(); // è‡ªåŠ¨ç¿»é¡µ\n     backToTop(); //    å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ç‚¹å‡»å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n    if(menu_value('menu_autoSignIn')) autoSignIn(); //  è‡ªåŠ¨ç­¾åˆ°ï¼ˆè®¿é—®ç©ºé—´ 10 æ¬¡ = 20 ç§¯åˆ†ï¼‰\n    //replyIntervalDOMNodeInserted(); //                 ç›‘å¬æ’å…¥äº‹ä»¶ï¼ˆå›å¸–é—´éš”ï¼‰\n\n\n    // è‡ªåŠ¨ç­¾åˆ°ï¼ˆè®¿é—®ç©ºé—´ 10 æ¬¡ = 20 ç§¯åˆ† + å½“å¤©é¦–æ¬¡è®¿é—®è®ºå› 2 ç§¯åˆ†ï¼‰\n    function autoSignIn() {\n        if (!loginStatus) return\n        let timeNow = new Date().getFullYear() + \"/\" + (new Date().getMonth() + 1) + \"/\" + new Date().getDate(),\n            timeOld = GM_getValue('menu_signInTime');\n        if (!timeOld || timeOld != timeNow) { // æ˜¯æ–°çš„ä¸€å¤©\n            GM_setValue('menu_signInTime', timeNow); //      å†™å…¥ç­¾åˆ°æ—¶é—´ä»¥ä¾›åç»­æ¯”è¾ƒ\n            GM_notification({text: 'è¯·ä¸è¦å…³é—­/åˆ·æ–°æœ¬é¡µï¼è€å¿ƒç­‰å¾… 60 ç§’~\\nåœ¨æ­¤æœŸé—´å¯ä»¥åœ¨ \"å…¶ä»–æ ‡ç­¾é¡µ\" æµè§ˆè®ºå›ï¼', timeout: 10000});\n            let url_list = [],\n                url = 0;\n            // éšæœºç”Ÿæˆ 12 ä¸ªç©ºé—´åœ°å€ï¼ˆ2 ä¸ªå†—ä½™ï¼‰\n            for(let i = 0;i < 12;i++){url_list[i] = \"https://\" + location.host + \"/space-uid-\" + Math.floor(Math.random()*(50000-10000+1)+10000) + \".html\";}\n            // æ¯ 5 ç§’è®¿é—®ä¸€æ¬¡ï¼ˆé¿å…è§¦å‘ç½‘ç«™é˜²å¾¡æœºåˆ¶ï¼Œè€Œä¸”è¿˜å¯ä»¥é€‚å½“æµè§ˆè®ºå›ï¼‰\n            let signIn = setInterval(function(){\n                GM_xmlhttpRequest({\n                    url: url_list[url++],\n                    method: 'GET',\n                    timeout: 4000\n                });\n                console.log(`[å…¨çƒä¸»æœºäº¤æµè®ºå› å¢å¼º] ç§¯åˆ† +2 (${url_list[url]})`);\n                if (url === 11) { // æ¬¡æ•°å¤Ÿäº†å°±å–æ¶ˆå®šæ—¶å¾ªç¯\n                    clearInterval(signIn);\n                    console.log('[å…¨çƒä¸»æœºäº¤æµè®ºå› å¢å¼º] ç­¾åˆ°å®Œæˆï¼');\n                    GM_notification({text: 'ç­¾åˆ°å®Œæˆï¼ç§¯åˆ† +22 ~', timeout: 3500});\n                }\n            }, 5000);\n        }\n    }\n\n\n    // é‡æ–°ç­¾åˆ°\n    function reAutoSignIn() {\n        GM_setValue('menu_signInTime', '1970/1/1'); // è®¾ç½®ä¸ºæ¯”å½“å‰æ—¥æœŸæ›´æ—©\n        location.reload(); // åˆ·æ–°ç½‘é¡µ\n    }\n\n\n    // è‡ªå®šä¹‰å±è”½ç”¨æˆ·\n    function customBlockUsers() {\n        let nowBlockUsers = '';\n        GM_getValue('menu_customBlockUsers').forEach(function(item){nowBlockUsers += '|' + item})\n        let newBlockUsers = prompt('ç¼–è¾‘ [è‡ªå®šä¹‰å±è”½ç”¨æˆ·]ï¼Œåˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆ\\nï¼ˆä¸åŒç”¨æˆ·åä¹‹é—´ä½¿ç”¨ \"|\" åˆ†éš”ï¼Œ\\nï¼ˆä¾‹å¦‚ï¼šç”¨æˆ·A|ç”¨æˆ·B|ç”¨æˆ·Cï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå°±ä¸éœ€è¦ \"|\" äº†ã€‚', nowBlockUsers.replace('|',''));\n        if (newBlockUsers === '') {\n            GM_setValue('menu_customBlockUsers', []);\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        } else if (newBlockUsers != null) {\n            GM_setValue('menu_customBlockUsers', newBlockUsers.split('|'));\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        }\n    };\n\n\n    // å±è”½ç”¨æˆ·\n    function blockUsers(type) {\n        if (!menu_value('menu_customBlockUsers') || menu_value('menu_customBlockUsers').length < 1) return\n        switch(type) {\n            case 'thread': // å¸–å­å†…\n                blockUsers_('[id^=\"post_\"]', 'a[href^=\"space-uid\"]');\n                blockUsers_('[id^=\"comment_\"] > div', 'a.xi2.xw1'); // ç‚¹è¯„\n                blockUsers_('.quote', 'a[href*=\"&ptid=\"]:not([id])>font', 1); // å›å¤å¼•ç”¨\n                break;\n            case 'forum': //  å„ç‰ˆå—å¸–å­åˆ—è¡¨\n                blockUsers_('[id^=\"normalthread_\"]', 'a[href^=\"space-uid\"]');\n                blockUsers_vfastpost(); // é¢„è§ˆå¸–å­ä¸­çš„å›å¤\n                break;\n            case 'search': // æœç´¢ç»“æœ\n                blockUsers_('.pbw', 'a[href^=\"space-uid\"]');\n                break;\n            case 'notice': // æ¶ˆæ¯\n                blockUsers_('dl.cl', '.ntc_body a[href^=\"space-uid\"]');\n                break;\n            case 'pm': //     ç§äººèŠå¤©\n                blockUsers_('dl[id^=\"pmlist_\"]', '.ptm.pm_c a[href^=\"space-uid\"]');\n                break;\n        }\n\n        function blockUsers_(list1, list2, type) {\n            document.querySelectorAll(list1).forEach(function(item){ // éå†æ‰€æœ‰å¸–å­\n                menu_value('menu_customBlockUsers').forEach(function(item1){ // éå†ç”¨æˆ·é»‘åå•\n                    let itemName = item.querySelector(list2); // å¯»æ‰¾ç”¨æˆ·å\n                    if (itemName) {\n                        if (type && type === 1 && itemName.textContent.split(' ')[0] === item1) { // å›å¤å¼•ç”¨\n                            console.log(`å±è”½ç”¨æˆ·ï¼š${item1}`);\n                            item.hidden = true; // éšè—\n                        } else if (itemName.textContent === item1) {\n                            console.log(`å±è”½ç”¨æˆ·ï¼š${item1}`);\n                            item.hidden = true; // éšè—\n                        }\n                    }\n                })\n            })\n        }\n\n        function blockUsers_vfastpost() {\n            let vfastpost = e => {\n                if (e.target.nodeType == 1 && e.target.outerHTML && e.target.outerHTML.indexOf('class=\"fastpreview\"') > -1) {\n                    e.target.querySelectorAll('.bm_c > [id^=\"post_\"]').forEach(function(item){ // éå†æ‰€æœ‰å›å¤\n                        menu_value('menu_customBlockUsers').forEach(function(item1){ // éå†ç”¨æˆ·é»‘åå•\n                            let itemName = item.querySelector('a.xi2'); // å¯»æ‰¾ç”¨æˆ·å\n                            if (itemName && itemName.textContent === item1) {\n                                console.log(`å±è”½ç”¨æˆ·ï¼š${item1}`);\n                                item.hidden = true; // éšè—\n                            }\n                            itemName = item.querySelector('.quote>blockquote>font:first-child'); // å¯»æ‰¾ç”¨æˆ·åï¼ˆå›å¤å¼•ç”¨ï¼‰\n                            if (itemName && itemName.textContent.split(' ')[0] === item1) {\n                                console.log(`å±è”½ç”¨æˆ·ï¼š${item1}`);\n                                item.querySelector('.quote').hidden = true; // éšè—\n                            }\n                        })\n                    })\n                }\n            }\n            document.addEventListener('DOMNodeInserted', vfastpost); // ç›‘å¬æ’å…¥äº‹ä»¶\n        }\n    }\n\n\n    // è‡ªå®šä¹‰å±è”½å…³é”®è¯ï¼ˆå¸–å­æ ‡é¢˜ï¼‰\n    function customBlockKeywords() {\n        let nowBlockKeywords = '';\n        GM_getValue('menu_customBlockKeywords').forEach(function(item){nowBlockKeywords += '|' + item})\n        let newBlockKeywords = prompt('ç¼–è¾‘ [è‡ªå®šä¹‰å±è”½å…³é”®è¯]ï¼Œåˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆ\\nï¼ˆä¸åŒå…³é”®è¯ä¹‹é—´ä½¿ç”¨ \"|\" åˆ†éš”ï¼Œ\\nï¼ˆä¾‹å¦‚ï¼šåŠ©åŠ›|äº’åŠ©|äº’ç‚¹ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå°±ä¸éœ€è¦ \"|\" äº†ã€‚', nowBlockKeywords.replace('|',''));\n        if (newBlockKeywords === '') {\n            GM_setValue('menu_customBlockKeywords', []);\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        } else if (newBlockKeywords != null) {\n            GM_setValue('menu_customBlockKeywords', newBlockKeywords.split('|'));\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        }\n    };\n\n\n    // å±è”½å…³é”®è¯ï¼ˆå¸–å­æ ‡é¢˜ï¼‰\n    function blockKeywords() {\n        if (!menu_value('menu_customBlockKeywords') || menu_value('menu_customBlockKeywords').length < 1) return\n        document.querySelectorAll('[id^=\"normalthread_\"]').forEach(function(item){ // éå†æ‰€æœ‰å¸–å­æ ‡é¢˜\n            menu_value('menu_customBlockKeywords').forEach(function(item1){ // éå†å…³é”®è¯\n                let itemName = item.querySelector('a.s.xst'); // å¯»æ‰¾å¸–å­æ ‡é¢˜\n                if (itemName && itemName.textContent.toLowerCase().indexOf(item1.toLowerCase()) > -1) {\n                    console.log(`å±è”½å…³é”®è¯ï¼š[${item1}]`, `ï¼Œå¸–å­æ ‡é¢˜ï¼š[${itemName.textContent}]`);\n                    item.hidden = true; // åˆ é™¤å¸–å­\n                }\n            })\n        })\n    }\n\n\n    // ç›‘å¬æ’å…¥äº‹ä»¶ï¼ˆæœ‰æ–°çš„å›å¤ä¸»é¢˜ï¼Œç‚¹å‡»æŸ¥çœ‹ï¼‰\n    function blockDOMNodeInserted() {\n        let block = e => {\n            if (e.target.nodeType == 1 && e.target.textContent && e.target.textContent.indexOf('newthread') > -1) {\n                setTimeout(function () {\n                    blockUsers('forum'); //                           å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰\n                    blockKeywords(); //                               å±è”½å…³é”®è¯ï¼ˆå¸–å­æ ‡é¢˜ï¼‰\n                }, 100)\n            }\n        }\n        document.addEventListener('DOMNodeInserted', block); // ç›‘å¬æ’å…¥äº‹ä»¶\n    }\n\n\n    // ç›‘å¬æ’å…¥äº‹ä»¶ï¼ˆé¢„è§ˆå¿«é€Ÿå›å¤å¸¦ç­¾åï¼‰\n    function vfastpostDOMNodeInserted() {\n        let vfastpost = e => {\n            if (e.target.nodeType == 1 && e.target.innerHTML && e.target.innerHTML.indexOf('id=\"vfastpost\"') > -1) {\n                e.target.getElementsByTagName('form')[0].insertAdjacentHTML('afterbegin', `<input type=\"hidden\" name=\"usesig\" value=\"1\">`);\n            }\n        }\n        document.addEventListener('DOMNodeInserted', vfastpost); // ç›‘å¬æ’å…¥äº‹ä»¶\n    }\n\n\n    // è‡ªå®šä¹‰å°å°¾å·´å†…å®¹\n    function customLittleTail() {\n        let newLittleTail = prompt('ç¼–è¾‘ [è‡ªå®šä¹‰å°å°¾å·´å†…å®¹]ï¼Œåˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼ˆæ¢è¡Œè¯·ä½¿ç”¨ \\\\n\\næç¤ºâ‘ ï¼šè®°å¾—åœ¨å°å°¾å·´å‰é¢åŠ ä¸Šå‡ ä¸ª \\\\n æ¢è¡Œï¼Œç”¨æ¥åˆ†éš”å¼€å›å¸–å†…å®¹~\\næç¤ºâ‘¡ï¼šå»ºè®®ä½¿ç”¨ [align=right] æ ‡ç­¾æ¥ä½¿å°å°¾å·´å±…å³~\\næç¤ºâ‘¢ï¼šæ”¯æŒè®ºå›å¯Œæ–‡æœ¬æ ‡ç­¾ï¼ˆå»ºè®®å…ˆæ‰¾ä¸ªå›å¤ç¼–è¾‘é¢„è§ˆå¥½~\\nç¤ºä¾‹ï¼š\\\\n\\\\n\\\\n\\\\n[align=right]ç¬¬ä¸€è¡Œå†…å®¹~\\\\nç¬¬äºŒè¡Œå†…å®¹~[/align]', GM_getValue('menu_customLittleTail'));\n        if (newLittleTail === '') {\n            GM_setValue('menu_customLittleTail', '');\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        } else if (newLittleTail != null) {\n            GM_setValue('menu_customLittleTail', newLittleTail);\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        }\n    };\n\n\n    // å›å¤è‡ªå®šä¹‰\n    function replyCustom(type) {\n        switch(type) {\n            case 'forum': // å„ç‰ˆå—å¸–å­åˆ—è¡¨çš„é¢„è§ˆå¸–å­\n                replyCustom_0(); // é¢„è§ˆå¸–å­ å¿«é€Ÿå›å¤ï¼ˆåº•éƒ¨ï¼‰\n                replyCustom_1(); // é¢„è§ˆå¸–å­ å›å¤ï¼ˆæ‚¬æµ®ï¼‰\n                break;\n            case 'thread': // å¸–å­å†…\n                replyCustom_1(); // å¿«é€Ÿå›å¤ï¼ˆæ‚¬æµ®ï¼‰\n                replyCustom_2(); // å›å¤æ¡†ï¼ˆåº•éƒ¨ï¼‰\n                break;\n            case 'reply': // é«˜çº§å›å¤\n                replyCustom_3();\n                break;\n        }\n\n        function replyCustom_0() {\n            let vfastpost = e => {\n                if (e.target.nodeType == 1 && e.target.innerHTML && e.target.innerHTML.indexOf('id=\"vfastpost\"') > -1) {\n                    let message = e.target.querySelector('input[name=\"message\"]'), id = message.id.match(/\\d+/g)[0];\n                    message.parentNode.innerHTML = `<textarea type=\"text\" name=\"message\" id=\"vmessage_${id}\" style=\"width: 99.8%;height: 30px;border: none;outline: none;font-size: 14px;overflow-y: hidden;\"></textarea>`\n                    document.getElementById(`vreplysubmit_${id}`).onclick = function(){\n                        if (GM_getValue('menu_customLittleTail')) document.getElementById(`vmessage_${id}`).value += GM_getValue('menu_customLittleTail').replaceAll('\\\\n', '\\n');\n                    }\n                }\n            }\n            document.addEventListener('DOMNodeInserted', vfastpost); // ç›‘å¬æ’å…¥äº‹ä»¶\n        }\n\n        function replyCustom_1() {\n            let floatlayout_reply = e => {\n                if (e.target.nodeType == 1 && e.target.innerHTML && e.target.innerHTML.indexOf('id=\"floatlayout_reply\"') > -1) {\n                    // å¿«é€Ÿå›å¤ï¼ˆæ‚¬æµ®ï¼‰ä¸­æ·»åŠ  URL æŒ‰é’®\n                    document.querySelector('#floatlayout_reply .fbld').insertAdjacentHTML('afterend', `<a href=\"javascript:;\" title=\"ç‚¹å‡»ç»™é€‰ä¸­æ–‡å­—æ·»åŠ  url æ ‡ç­¾ï¼ˆå¯æ­£å¸¸æ˜¾ç¤ºä¸º URLï¼‰\" class=\"flnk\" style=\"filter: hue-rotate(83deg);\" onclick=\"seditor_insertunit('post', '[url][i]', '[/i][/url]');doane(event);\">URL</a>`);\n                    document.getElementById('postsubmit').onclick = function(){\n                        if (GM_getValue('menu_customLittleTail')) document.getElementById('postmessage').value += GM_getValue('menu_customLittleTail').replaceAll('\\\\n', '\\n');\n                    }\n                }\n            }\n            document.addEventListener('DOMNodeInserted', floatlayout_reply); // ç›‘å¬æ’å…¥äº‹ä»¶\n            // å¿«é€Ÿå‘å¸–ï¼ˆå„ç‰ˆå—å¸–å­åˆ—è¡¨åº•éƒ¨ï¼‰ä¸­æ·»åŠ  URL æŒ‰é’®\n            document.querySelector('#fastposteditor .fbld').insertAdjacentHTML('afterend', `<a href=\"javascript:;\" title=\"ç‚¹å‡»ç»™é€‰ä¸­æ–‡å­—æ·»åŠ  url æ ‡ç­¾ï¼ˆå¯æ­£å¸¸æ˜¾ç¤ºä¸º URLï¼‰\" class=\"flnk\" style=\"filter: hue-rotate(83deg);\" onclick=\"seditor_insertunit('post', '[url][i]', '[/i][/url]');doane(event);\">URL</a>`);\n        }\n\n        function replyCustom_2() { // å¸–å­åº•éƒ¨çš„å›å¤æ¡†\n            document.getElementById('fastpostsubmit').onclick = function(){\n                if (GM_getValue('menu_customLittleTail')) document.getElementById('fastpostmessage').value += GM_getValue('menu_customLittleTail').replaceAll('\\\\n', '\\n');\n            }\n        }\n\n        function replyCustom_3() {\n            let postsubmit = document.getElementById('postsubmit');\n            if (postsubmit && postsubmit.textContent === '\\nå‚ä¸/å›å¤ä¸»é¢˜\\n' || postsubmit && postsubmit.textContent === '\\nå‘è¡¨å¸–å­\\n') {\n                postsubmit.onclick = function(){\n                    if (GM_getValue('menu_customLittleTail')) document.getElementById('e_textarea').value += GM_getValue('menu_customLittleTail').replaceAll('\\\\n', '\\n');\n                }\n            }\n        }\n    }\n\n\n    // ç›‘å¬æ’å…¥äº‹ä»¶ï¼ˆå›å¸–é—´éš”ï¼‰\n    /*function replyIntervalDOMNodeInserted() {\n        let replyInterval = e => {\n            if (e.target.nodeType == 1 && e.target.innerHTML && e.target.textContent.indexOf('å‘è¡¨å›å¤ é‡‘é’±+1') > -1) {\n                setTimeout(function () {GM_notification({text: 'è¿‡å» 60 ç§’äº†ï¼Œå¯ä»¥å›å¸–äº†~', timeout: 3500});}, 60000)\n            }\n        }\n        document.addEventListener('DOMNodeInserted', replyInterval); // ç›‘å¬æ’å…¥äº‹ä»¶\n    }*/\n\n\n    // è‡ªåŠ¨æ˜¾ç¤ºå¸–å­å†…è¢«éšè—çš„å›å¤\n    function showPosts() {\n        if(menu_value('menu_showhide')){\n            let showposts = document.querySelector('#hiddenpoststip a');\n            if (showposts){ // å¦‚æœå­˜åœ¨\n                showposts.click();\n            }\n        }\n    }\n\n\n    // éšè—å¸–å­å†…çš„ [ä¸‹ä¸€é¡µ] æŒ‰é’®\n    function hidePgbtn() {\n        document.lastChild.appendChild(document.createElement('style')).textContent = '.pgbtn {display: none;}';\n    }\n\n\n    // å¿«æ·å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n    function backToTop() {\n        document.body.oncontextmenu = function(event){\n            if (event.target == this) {\n                event.preventDefault();\n                window.scrollTo(0,0)\n            }\n        }\n    }\n\n\n    // æ”¶èµ·å¸–å­é¢„è§ˆï¼ˆå·¦é”®å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n    function collapsedNowPost() {\n        document.body.onclick = function(event){\n            if (event.target == this) {\n                document.querySelectorAll('[id^=\"threadPreviewTR_\"] .closeprev').forEach(function (el) {\n                    if (!el.parentElement.querySelector('[name=\"message\"]') || el.parentElement.querySelector('[name=\"message\"]').value === '' && !document.getElementById('fwin_reply')) { // é¿å…å¿«é€Ÿå›å¤è¿‡ç¨‹ä¸­è¯¯ç‚¹æ”¶èµ·äº†\n                        let parentElement = el.parentElement.parentElement.parentElement.parentElement.parentElement,\n                            top = parentElement.offsetTop + parentElement.offsetParent.offsetTop + parentElement.offsetParent.offsetParent.offsetTop; // å…ƒç´ è·ç¦»é¡¶éƒ¨çš„é«˜åº¦\n                        if (top < document.documentElement.scrollTop) window.scrollTo(0,top) // å¸–å­æ ‡é¢˜åœ¨ä¸Šé¢æ—¶æ‰ä¼šæ»šåŠ¨åˆ°è¯¥å¸–å­å¤„\n                        el.click()\n                    }\n                });\n            }\n        }\n    }\n\n\n    // æ˜¾ç¤ºåœ¨çº¿çŠ¶æ€\n    function onlineStatus() {\n        document.querySelectorAll('[id^=\"favatar\"]').forEach(function(item){ // éå†æ‰€æœ‰å¸–å­\n            if (item.querySelector('[id^=\"userinfo\"] > .i.y em')) {\n                let icon = (item.querySelector('[id^=\"userinfo\"] > .i.y em').textContent === 'å½“å‰åœ¨çº¿') ? 'ğŸŒ' : 'ğŸŒš';\n                let divStatus = document.createElement('div');\n                divStatus.style = 'position: absolute;margin: -8px 0 0 8px;padding: 0 1px 1.2px;background-color: #ffffff;border-radius: 50%;';\n                divStatus.textContent = icon;\n                let mochu = item.querySelector('.avatar');\n                mochu.parentNode.insertBefore(divStatus,mochu);\n            }\n        })\n    }\n\n\n    // å±è”½é˜…è¯»æƒé™ 255 çš„å¸–å­\n    function delate255() {\n        if (!menu_value('menu_delate255')) return\n        if (patt_forum.test(location.pathname) || location.search.indexOf('mod=forumdisplay') > -1){\n            document.querySelectorAll('tbody[id^=\"normalthread_\"] .xw1').forEach(function (_this) {\n                if (_this.textContent === '255') {\n                    _this.parentNode.parentNode.parentNode.hidden = true;\n                }\n            })\n        }\n    }\n\n\n    // å±è”½æŠ•ç¥¨è´´\n    function delatePolls() {\n        if (!menu_value('menu_delatePolls')) return\n        if (patt_forum.test(location.pathname) || location.search.indexOf('mod=forumdisplay') > -1){\n            document.querySelectorAll('tbody[id^=\"normalthread_\"] .icn>a>img[alt=\"æŠ•ç¥¨\"]').forEach(function (_this) {\n                    _this.parentNode.parentNode.parentNode.parentNode.hidden = true;\n            })\n        }\n    }\n\n\n    // è‡ªåŠ¨ç¿»é¡µ\n    function pageLoading() {\n        if (!menu_value('menu_pageLoading')) return\n        if (curSite.SiteTypeID > 0){\n            windowScroll(function (direction, e) {\n                if (direction === 'down') { // ä¸‹æ»‘æ‰å‡†å¤‡ç¿»é¡µ\n                    let scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n                    if (document.documentElement.scrollHeight <= document.documentElement.clientHeight + scrollTop + 999) {\n                        if (curSite.SiteTypeID === SiteType.FORUM) { // å¦‚æœæ˜¯å„ç‰ˆå—å¸–å­åˆ—è¡¨åˆ™ç›´æ¥ç‚¹ä¸‹ä¸€é¡µå°±è¡Œäº†\n                            let autopbn = document.querySelector('#autopbn');\n                            if (autopbn && autopbn.textContent === \"ä¸‹ä¸€é¡µ Â»\"){ // å¦‚æœå·²ç»åœ¨åŠ è½½ä¸­äº†ï¼Œå°±å¿½ç•¥\n                                autopbn.click();\n                                let timer = setInterval(function(){ // åœ¨ä¸‹ä¸€é¡µåŠ è½½å®Œæˆå\n                                    if (document.querySelector('#autopbn').textContent === 'ä¸‹ä¸€é¡µ Â»') {\n                                        delate255(); // å±è”½ 255 æƒé™å¸–å­\n                                        delatePolls(); // å±è”½æŠ•ç¥¨è´´å­\n                                        blockUsers('forum'); // å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰\n                                        blockKeywords(); // å±è”½å…³é”®è¯ï¼ˆå¸–å­æ ‡é¢˜ï¼‰\n                                        clearInterval(timer);\n                                    }\n                                }, 10);\n                            }\n                        } else {\n                            ShowPager.loadMorePage();\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n\n    // æ»šåŠ¨æ¡äº‹ä»¶\n    function windowScroll(fn1) {\n        var beforeScrollTop = document.documentElement.scrollTop,\n            fn = fn1 || function () {};\n        setTimeout(function () { // å»¶æ—¶æ‰§è¡Œï¼Œé¿å…åˆšè½½å…¥åˆ°é¡µé¢å°±è§¦å‘ç¿»é¡µäº‹ä»¶\n            window.addEventListener('scroll', function (e) {\n                var afterScrollTop = document.documentElement.scrollTop,\n                    delta = afterScrollTop - beforeScrollTop;\n                if (delta == 0) return false;\n                fn(delta > 0 ? 'down' : 'up', e);\n                beforeScrollTop = afterScrollTop;\n            }, false);\n        }, 1000)\n    }\n\n\n    // ä¿®æ”¹è‡ª https://greasyfork.org/scripts/14178 , https://github.com/machsix/Super-preloader\n    var ShowPager = {\n        getFullHref: function (e) {\n            if (e != null && e.nodeType === 1 && e.href && e.href.slice(0,4) === 'http') return e.href;\n            return '';\n        },\n        createDocumentByString: function (e) {\n            if (e) {\n                if ('HTML' !== document.documentElement.nodeName) return (new DOMParser).parseFromString(e, 'application/xhtml+xml');\n                var t;\n                try { t = (new DOMParser).parseFromString(e, 'text/html');} catch (e) {}\n                if (t) return t;\n                if (document.implementation.createHTMLDocument) {\n                    t = document.implementation.createHTMLDocument('ADocument');\n                } else {\n                    try {((t = document.cloneNode(!1)).appendChild(t.importNode(document.documentElement, !1)), t.documentElement.appendChild(t.createElement('head')), t.documentElement.appendChild(t.createElement('body')));} catch (e) {}\n                }\n                if (t) {\n                    var r = document.createRange(),\n                        n = r.createContextualFragment(e);\n                    r.selectNodeContents(document.body);\n                    t.body.appendChild(n);\n                    for (var a, o = { TITLE: !0, META: !0, LINK: !0, STYLE: !0, BASE: !0}, i = t.body, s = i.childNodes, c = s.length - 1; c >= 0; c--) o[(a = s[c]).nodeName] && i.removeChild(a);\n                    return t;\n                }\n            } else console.error('æ²¡æœ‰æ‰¾åˆ°è¦è½¬æˆ DOM çš„å­—ç¬¦ä¸²');\n        },\n        loadMorePage: function () {\n            if (curSite.pager) {\n                let curPageEle = document.querySelector(curSite.pager.nextLink);\n                var url = this.getFullHref(curPageEle);\n                if(url === '') return;\n                if(curSite.pageUrl === url) return;// ä¸ä¼šé‡å¤åŠ è½½ç›¸åŒçš„é¡µé¢\n                curSite.pageUrl = url;\n                // è¯»å–ä¸‹ä¸€é¡µçš„æ•°æ®\n                curSite.pager.startFilter && curSite.pager.startFilter();\n                GM_xmlhttpRequest({\n                    url: url,\n                    method: 'GET',\n                    timeout: 5000,\n                    onload: function (response) {\n                        try {\n                            var newBody = ShowPager.createDocumentByString(response.responseText);\n                            let pageElems = getAllCSS(curSite.pager.pageElement, newBody),\n                                toElement = getAllCSS(curSite.pager.HT_insert[0])[0];\n                            if (pageElems.length >= 0) {\n                                let addTo = \"beforeend\";\n                                if (curSite.pager.HT_insert[1] == 1) addTo = 'beforebegin';\n                                // æ’å…¥æ–°é¡µé¢å…ƒç´ \n                                pageElems.forEach(function (one) {toElement.insertAdjacentElement(addTo, one);});\n                                // å±è”½ç”¨æˆ·ï¼ˆé»‘åå•ï¼‰\n                                if (patt_thread.test(location.pathname) || location.search.indexOf('mod=viewthread') > -1) {blockUsers('thread');} else if (location.pathname === '/search.php') {blockUsers('search');}\n                                delate255(); // å±è”½ 255 æƒé™å¸–å­\n                                delatePolls(); // å±è”½æŠ•ç¥¨è´´å­\n                                // æ›¿æ¢å¾…æ›¿æ¢å…ƒç´ \n                                try {\n                                    let oriE = getAllCSS(curSite.pager.replaceE),\n                                        repE = getAllCSS(curSite.pager.replaceE, newBody);\n                                    if (oriE.length === repE.length) {\n                                        for (var i = 0; i < oriE.length; i++) {\n                                            oriE[i].outerHTML = repE[i].outerHTML;\n                                        }\n                                    }\n                                } catch (e) {\n                                    console.log(e);\n                                }\n                            }\n                        } catch (e) {\n                            console.log(e);\n                        }\n                    }\n                });\n            }\n        },\n    };\n    function getAllCSS(css, contextNode = document) {\n        return [].slice.call(contextNode.querySelectorAll(css));\n    }\n})();"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 34.3251953125,
          "content": "                    GNU GENERAL PUBLIC LICENSE\n                       Version 3, 29 June 2007\n\n Copyright (C) 2007 Free Software Foundation, Inc. <https://fsf.org/>\n Everyone is permitted to copy and distribute verbatim copies\n of this license document, but changing it is not allowed.\n\n                            Preamble\n\n  The GNU General Public License is a free, copyleft license for\nsoftware and other kinds of works.\n\n  The licenses for most software and other practical works are designed\nto take away your freedom to share and change the works.  By contrast,\nthe GNU General Public License is intended to guarantee your freedom to\nshare and change all versions of a program--to make sure it remains free\nsoftware for all its users.  We, the Free Software Foundation, use the\nGNU General Public License for most of our software; it applies also to\nany other work released this way by its authors.  You can apply it to\nyour programs, too.\n\n  When we speak of free software, we are referring to freedom, not\nprice.  Our General Public Licenses are designed to make sure that you\nhave the freedom to distribute copies of free software (and charge for\nthem if you wish), that you receive source code or can get it if you\nwant it, that you can change the software or use pieces of it in new\nfree programs, and that you know you can do these things.\n\n  To protect your rights, we need to prevent others from denying you\nthese rights or asking you to surrender the rights.  Therefore, you have\ncertain responsibilities if you distribute copies of the software, or if\nyou modify it: responsibilities to respect the freedom of others.\n\n  For example, if you distribute copies of such a program, whether\ngratis or for a fee, you must pass on to the recipients the same\nfreedoms that you received.  You must make sure that they, too, receive\nor can get the source code.  And you must show them these terms so they\nknow their rights.\n\n  Developers that use the GNU GPL protect your rights with two steps:\n(1) assert copyright on the software, and (2) offer you this License\ngiving you legal permission to copy, distribute and/or modify it.\n\n  For the developers' and authors' protection, the GPL clearly explains\nthat there is no warranty for this free software.  For both users' and\nauthors' sake, the GPL requires that modified versions be marked as\nchanged, so that their problems will not be attributed erroneously to\nauthors of previous versions.\n\n  Some devices are designed to deny users access to install or run\nmodified versions of the software inside them, although the manufacturer\ncan do so.  This is fundamentally incompatible with the aim of\nprotecting users' freedom to change the software.  The systematic\npattern of such abuse occurs in the area of products for individuals to\nuse, which is precisely where it is most unacceptable.  Therefore, we\nhave designed this version of the GPL to prohibit the practice for those\nproducts.  If such problems arise substantially in other domains, we\nstand ready to extend this provision to those domains in future versions\nof the GPL, as needed to protect the freedom of users.\n\n  Finally, every program is threatened constantly by software patents.\nStates should not allow patents to restrict development and use of\nsoftware on general-purpose computers, but in those that do, we wish to\navoid the special danger that patents applied to a free program could\nmake it effectively proprietary.  To prevent this, the GPL assures that\npatents cannot be used to render the program non-free.\n\n  The precise terms and conditions for copying, distribution and\nmodification follow.\n\n                       TERMS AND CONDITIONS\n\n  0. Definitions.\n\n  \"This License\" refers to version 3 of the GNU General Public License.\n\n  \"Copyright\" also means copyright-like laws that apply to other kinds of\nworks, such as semiconductor masks.\n\n  \"The Program\" refers to any copyrightable work licensed under this\nLicense.  Each licensee is addressed as \"you\".  \"Licensees\" and\n\"recipients\" may be individuals or organizations.\n\n  To \"modify\" a work means to copy from or adapt all or part of the work\nin a fashion requiring copyright permission, other than the making of an\nexact copy.  The resulting work is called a \"modified version\" of the\nearlier work or a work \"based on\" the earlier work.\n\n  A \"covered work\" means either the unmodified Program or a work based\non the Program.\n\n  To \"propagate\" a work means to do anything with it that, without\npermission, would make you directly or secondarily liable for\ninfringement under applicable copyright law, except executing it on a\ncomputer or modifying a private copy.  Propagation includes copying,\ndistribution (with or without modification), making available to the\npublic, and in some countries other activities as well.\n\n  To \"convey\" a work means any kind of propagation that enables other\nparties to make or receive copies.  Mere interaction with a user through\na computer network, with no transfer of a copy, is not conveying.\n\n  An interactive user interface displays \"Appropriate Legal Notices\"\nto the extent that it includes a convenient and prominently visible\nfeature that (1) displays an appropriate copyright notice, and (2)\ntells the user that there is no warranty for the work (except to the\nextent that warranties are provided), that licensees may convey the\nwork under this License, and how to view a copy of this License.  If\nthe interface presents a list of user commands or options, such as a\nmenu, a prominent item in the list meets this criterion.\n\n  1. Source Code.\n\n  The \"source code\" for a work means the preferred form of the work\nfor making modifications to it.  \"Object code\" means any non-source\nform of a work.\n\n  A \"Standard Interface\" means an interface that either is an official\nstandard defined by a recognized standards body, or, in the case of\ninterfaces specified for a particular programming language, one that\nis widely used among developers working in that language.\n\n  The \"System Libraries\" of an executable work include anything, other\nthan the work as a whole, that (a) is included in the normal form of\npackaging a Major Component, but which is not part of that Major\nComponent, and (b) serves only to enable use of the work with that\nMajor Component, or to implement a Standard Interface for which an\nimplementation is available to the public in source code form.  A\n\"Major Component\", in this context, means a major essential component\n(kernel, window system, and so on) of the specific operating system\n(if any) on which the executable work runs, or a compiler used to\nproduce the work, or an object code interpreter used to run it.\n\n  The \"Corresponding Source\" for a work in object code form means all\nthe source code needed to generate, install, and (for an executable\nwork) run the object code and to modify the work, including scripts to\ncontrol those activities.  However, it does not include the work's\nSystem Libraries, or general-purpose tools or generally available free\nprograms which are used unmodified in performing those activities but\nwhich are not part of the work.  For example, Corresponding Source\nincludes interface definition files associated with source files for\nthe work, and the source code for shared libraries and dynamically\nlinked subprograms that the work is specifically designed to require,\nsuch as by intimate data communication or control flow between those\nsubprograms and other parts of the work.\n\n  The Corresponding Source need not include anything that users\ncan regenerate automatically from other parts of the Corresponding\nSource.\n\n  The Corresponding Source for a work in source code form is that\nsame work.\n\n  2. Basic Permissions.\n\n  All rights granted under this License are granted for the term of\ncopyright on the Program, and are irrevocable provided the stated\nconditions are met.  This License explicitly affirms your unlimited\npermission to run the unmodified Program.  The output from running a\ncovered work is covered by this License only if the output, given its\ncontent, constitutes a covered work.  This License acknowledges your\nrights of fair use or other equivalent, as provided by copyright law.\n\n  You may make, run and propagate covered works that you do not\nconvey, without conditions so long as your license otherwise remains\nin force.  You may convey covered works to others for the sole purpose\nof having them make modifications exclusively for you, or provide you\nwith facilities for running those works, provided that you comply with\nthe terms of this License in conveying all material for which you do\nnot control copyright.  Those thus making or running the covered works\nfor you must do so exclusively on your behalf, under your direction\nand control, on terms that prohibit them from making any copies of\nyour copyrighted material outside their relationship with you.\n\n  Conveying under any other circumstances is permitted solely under\nthe conditions stated below.  Sublicensing is not allowed; section 10\nmakes it unnecessary.\n\n  3. Protecting Users' Legal Rights From Anti-Circumvention Law.\n\n  No covered work shall be deemed part of an effective technological\nmeasure under any applicable law fulfilling obligations under article\n11 of the WIPO copyright treaty adopted on 20 December 1996, or\nsimilar laws prohibiting or restricting circumvention of such\nmeasures.\n\n  When you convey a covered work, you waive any legal power to forbid\ncircumvention of technological measures to the extent such circumvention\nis effected by exercising rights under this License with respect to\nthe covered work, and you disclaim any intention to limit operation or\nmodification of the work as a means of enforcing, against the work's\nusers, your or third parties' legal rights to forbid circumvention of\ntechnological measures.\n\n  4. Conveying Verbatim Copies.\n\n  You may convey verbatim copies of the Program's source code as you\nreceive it, in any medium, provided that you conspicuously and\nappropriately publish on each copy an appropriate copyright notice;\nkeep intact all notices stating that this License and any\nnon-permissive terms added in accord with section 7 apply to the code;\nkeep intact all notices of the absence of any warranty; and give all\nrecipients a copy of this License along with the Program.\n\n  You may charge any price or no price for each copy that you convey,\nand you may offer support or warranty protection for a fee.\n\n  5. Conveying Modified Source Versions.\n\n  You may convey a work based on the Program, or the modifications to\nproduce it from the Program, in the form of source code under the\nterms of section 4, provided that you also meet all of these conditions:\n\n    a) The work must carry prominent notices stating that you modified\n    it, and giving a relevant date.\n\n    b) The work must carry prominent notices stating that it is\n    released under this License and any conditions added under section\n    7.  This requirement modifies the requirement in section 4 to\n    \"keep intact all notices\".\n\n    c) You must license the entire work, as a whole, under this\n    License to anyone who comes into possession of a copy.  This\n    License will therefore apply, along with any applicable section 7\n    additional terms, to the whole of the work, and all its parts,\n    regardless of how they are packaged.  This License gives no\n    permission to license the work in any other way, but it does not\n    invalidate such permission if you have separately received it.\n\n    d) If the work has interactive user interfaces, each must display\n    Appropriate Legal Notices; however, if the Program has interactive\n    interfaces that do not display Appropriate Legal Notices, your\n    work need not make them do so.\n\n  A compilation of a covered work with other separate and independent\nworks, which are not by their nature extensions of the covered work,\nand which are not combined with it such as to form a larger program,\nin or on a volume of a storage or distribution medium, is called an\n\"aggregate\" if the compilation and its resulting copyright are not\nused to limit the access or legal rights of the compilation's users\nbeyond what the individual works permit.  Inclusion of a covered work\nin an aggregate does not cause this License to apply to the other\nparts of the aggregate.\n\n  6. Conveying Non-Source Forms.\n\n  You may convey a covered work in object code form under the terms\nof sections 4 and 5, provided that you also convey the\nmachine-readable Corresponding Source under the terms of this License,\nin one of these ways:\n\n    a) Convey the object code in, or embodied in, a physical product\n    (including a physical distribution medium), accompanied by the\n    Corresponding Source fixed on a durable physical medium\n    customarily used for software interchange.\n\n    b) Convey the object code in, or embodied in, a physical product\n    (including a physical distribution medium), accompanied by a\n    written offer, valid for at least three years and valid for as\n    long as you offer spare parts or customer support for that product\n    model, to give anyone who possesses the object code either (1) a\n    copy of the Corresponding Source for all the software in the\n    product that is covered by this License, on a durable physical\n    medium customarily used for software interchange, for a price no\n    more than your reasonable cost of physically performing this\n    conveying of source, or (2) access to copy the\n    Corresponding Source from a network server at no charge.\n\n    c) Convey individual copies of the object code with a copy of the\n    written offer to provide the Corresponding Source.  This\n    alternative is allowed only occasionally and noncommercially, and\n    only if you received the object code with such an offer, in accord\n    with subsection 6b.\n\n    d) Convey the object code by offering access from a designated\n    place (gratis or for a charge), and offer equivalent access to the\n    Corresponding Source in the same way through the same place at no\n    further charge.  You need not require recipients to copy the\n    Corresponding Source along with the object code.  If the place to\n    copy the object code is a network server, the Corresponding Source\n    may be on a different server (operated by you or a third party)\n    that supports equivalent copying facilities, provided you maintain\n    clear directions next to the object code saying where to find the\n    Corresponding Source.  Regardless of what server hosts the\n    Corresponding Source, you remain obligated to ensure that it is\n    available for as long as needed to satisfy these requirements.\n\n    e) Convey the object code using peer-to-peer transmission, provided\n    you inform other peers where the object code and Corresponding\n    Source of the work are being offered to the general public at no\n    charge under subsection 6d.\n\n  A separable portion of the object code, whose source code is excluded\nfrom the Corresponding Source as a System Library, need not be\nincluded in conveying the object code work.\n\n  A \"User Product\" is either (1) a \"consumer product\", which means any\ntangible personal property which is normally used for personal, family,\nor household purposes, or (2) anything designed or sold for incorporation\ninto a dwelling.  In determining whether a product is a consumer product,\ndoubtful cases shall be resolved in favor of coverage.  For a particular\nproduct received by a particular user, \"normally used\" refers to a\ntypical or common use of that class of product, regardless of the status\nof the particular user or of the way in which the particular user\nactually uses, or expects or is expected to use, the product.  A product\nis a consumer product regardless of whether the product has substantial\ncommercial, industrial or non-consumer uses, unless such uses represent\nthe only significant mode of use of the product.\n\n  \"Installation Information\" for a User Product means any methods,\nprocedures, authorization keys, or other information required to install\nand execute modified versions of a covered work in that User Product from\na modified version of its Corresponding Source.  The information must\nsuffice to ensure that the continued functioning of the modified object\ncode is in no case prevented or interfered with solely because\nmodification has been made.\n\n  If you convey an object code work under this section in, or with, or\nspecifically for use in, a User Product, and the conveying occurs as\npart of a transaction in which the right of possession and use of the\nUser Product is transferred to the recipient in perpetuity or for a\nfixed term (regardless of how the transaction is characterized), the\nCorresponding Source conveyed under this section must be accompanied\nby the Installation Information.  But this requirement does not apply\nif neither you nor any third party retains the ability to install\nmodified object code on the User Product (for example, the work has\nbeen installed in ROM).\n\n  The requirement to provide Installation Information does not include a\nrequirement to continue to provide support service, warranty, or updates\nfor a work that has been modified or installed by the recipient, or for\nthe User Product in which it has been modified or installed.  Access to a\nnetwork may be denied when the modification itself materially and\nadversely affects the operation of the network or violates the rules and\nprotocols for communication across the network.\n\n  Corresponding Source conveyed, and Installation Information provided,\nin accord with this section must be in a format that is publicly\ndocumented (and with an implementation available to the public in\nsource code form), and must require no special password or key for\nunpacking, reading or copying.\n\n  7. Additional Terms.\n\n  \"Additional permissions\" are terms that supplement the terms of this\nLicense by making exceptions from one or more of its conditions.\nAdditional permissions that are applicable to the entire Program shall\nbe treated as though they were included in this License, to the extent\nthat they are valid under applicable law.  If additional permissions\napply only to part of the Program, that part may be used separately\nunder those permissions, but the entire Program remains governed by\nthis License without regard to the additional permissions.\n\n  When you convey a copy of a covered work, you may at your option\nremove any additional permissions from that copy, or from any part of\nit.  (Additional permissions may be written to require their own\nremoval in certain cases when you modify the work.)  You may place\nadditional permissions on material, added by you to a covered work,\nfor which you have or can give appropriate copyright permission.\n\n  Notwithstanding any other provision of this License, for material you\nadd to a covered work, you may (if authorized by the copyright holders of\nthat material) supplement the terms of this License with terms:\n\n    a) Disclaiming warranty or limiting liability differently from the\n    terms of sections 15 and 16 of this License; or\n\n    b) Requiring preservation of specified reasonable legal notices or\n    author attributions in that material or in the Appropriate Legal\n    Notices displayed by works containing it; or\n\n    c) Prohibiting misrepresentation of the origin of that material, or\n    requiring that modified versions of such material be marked in\n    reasonable ways as different from the original version; or\n\n    d) Limiting the use for publicity purposes of names of licensors or\n    authors of the material; or\n\n    e) Declining to grant rights under trademark law for use of some\n    trade names, trademarks, or service marks; or\n\n    f) Requiring indemnification of licensors and authors of that\n    material by anyone who conveys the material (or modified versions of\n    it) with contractual assumptions of liability to the recipient, for\n    any liability that these contractual assumptions directly impose on\n    those licensors and authors.\n\n  All other non-permissive additional terms are considered \"further\nrestrictions\" within the meaning of section 10.  If the Program as you\nreceived it, or any part of it, contains a notice stating that it is\ngoverned by this License along with a term that is a further\nrestriction, you may remove that term.  If a license document contains\na further restriction but permits relicensing or conveying under this\nLicense, you may add to a covered work material governed by the terms\nof that license document, provided that the further restriction does\nnot survive such relicensing or conveying.\n\n  If you add terms to a covered work in accord with this section, you\nmust place, in the relevant source files, a statement of the\nadditional terms that apply to those files, or a notice indicating\nwhere to find the applicable terms.\n\n  Additional terms, permissive or non-permissive, may be stated in the\nform of a separately written license, or stated as exceptions;\nthe above requirements apply either way.\n\n  8. Termination.\n\n  You may not propagate or modify a covered work except as expressly\nprovided under this License.  Any attempt otherwise to propagate or\nmodify it is void, and will automatically terminate your rights under\nthis License (including any patent licenses granted under the third\nparagraph of section 11).\n\n  However, if you cease all violation of this License, then your\nlicense from a particular copyright holder is reinstated (a)\nprovisionally, unless and until the copyright holder explicitly and\nfinally terminates your license, and (b) permanently, if the copyright\nholder fails to notify you of the violation by some reasonable means\nprior to 60 days after the cessation.\n\n  Moreover, your license from a particular copyright holder is\nreinstated permanently if the copyright holder notifies you of the\nviolation by some reasonable means, this is the first time you have\nreceived notice of violation of this License (for any work) from that\ncopyright holder, and you cure the violation prior to 30 days after\nyour receipt of the notice.\n\n  Termination of your rights under this section does not terminate the\nlicenses of parties who have received copies or rights from you under\nthis License.  If your rights have been terminated and not permanently\nreinstated, you do not qualify to receive new licenses for the same\nmaterial under section 10.\n\n  9. Acceptance Not Required for Having Copies.\n\n  You are not required to accept this License in order to receive or\nrun a copy of the Program.  Ancillary propagation of a covered work\noccurring solely as a consequence of using peer-to-peer transmission\nto receive a copy likewise does not require acceptance.  However,\nnothing other than this License grants you permission to propagate or\nmodify any covered work.  These actions infringe copyright if you do\nnot accept this License.  Therefore, by modifying or propagating a\ncovered work, you indicate your acceptance of this License to do so.\n\n  10. Automatic Licensing of Downstream Recipients.\n\n  Each time you convey a covered work, the recipient automatically\nreceives a license from the original licensors, to run, modify and\npropagate that work, subject to this License.  You are not responsible\nfor enforcing compliance by third parties with this License.\n\n  An \"entity transaction\" is a transaction transferring control of an\norganization, or substantially all assets of one, or subdividing an\norganization, or merging organizations.  If propagation of a covered\nwork results from an entity transaction, each party to that\ntransaction who receives a copy of the work also receives whatever\nlicenses to the work the party's predecessor in interest had or could\ngive under the previous paragraph, plus a right to possession of the\nCorresponding Source of the work from the predecessor in interest, if\nthe predecessor has it or can get it with reasonable efforts.\n\n  You may not impose any further restrictions on the exercise of the\nrights granted or affirmed under this License.  For example, you may\nnot impose a license fee, royalty, or other charge for exercise of\nrights granted under this License, and you may not initiate litigation\n(including a cross-claim or counterclaim in a lawsuit) alleging that\nany patent claim is infringed by making, using, selling, offering for\nsale, or importing the Program or any portion of it.\n\n  11. Patents.\n\n  A \"contributor\" is a copyright holder who authorizes use under this\nLicense of the Program or a work on which the Program is based.  The\nwork thus licensed is called the contributor's \"contributor version\".\n\n  A contributor's \"essential patent claims\" are all patent claims\nowned or controlled by the contributor, whether already acquired or\nhereafter acquired, that would be infringed by some manner, permitted\nby this License, of making, using, or selling its contributor version,\nbut do not include claims that would be infringed only as a\nconsequence of further modification of the contributor version.  For\npurposes of this definition, \"control\" includes the right to grant\npatent sublicenses in a manner consistent with the requirements of\nthis License.\n\n  Each contributor grants you a non-exclusive, worldwide, royalty-free\npatent license under the contributor's essential patent claims, to\nmake, use, sell, offer for sale, import and otherwise run, modify and\npropagate the contents of its contributor version.\n\n  In the following three paragraphs, a \"patent license\" is any express\nagreement or commitment, however denominated, not to enforce a patent\n(such as an express permission to practice a patent or covenant not to\nsue for patent infringement).  To \"grant\" such a patent license to a\nparty means to make such an agreement or commitment not to enforce a\npatent against the party.\n\n  If you convey a covered work, knowingly relying on a patent license,\nand the Corresponding Source of the work is not available for anyone\nto copy, free of charge and under the terms of this License, through a\npublicly available network server or other readily accessible means,\nthen you must either (1) cause the Corresponding Source to be so\navailable, or (2) arrange to deprive yourself of the benefit of the\npatent license for this particular work, or (3) arrange, in a manner\nconsistent with the requirements of this License, to extend the patent\nlicense to downstream recipients.  \"Knowingly relying\" means you have\nactual knowledge that, but for the patent license, your conveying the\ncovered work in a country, or your recipient's use of the covered work\nin a country, would infringe one or more identifiable patents in that\ncountry that you have reason to believe are valid.\n\n  If, pursuant to or in connection with a single transaction or\narrangement, you convey, or propagate by procuring conveyance of, a\ncovered work, and grant a patent license to some of the parties\nreceiving the covered work authorizing them to use, propagate, modify\nor convey a specific copy of the covered work, then the patent license\nyou grant is automatically extended to all recipients of the covered\nwork and works based on it.\n\n  A patent license is \"discriminatory\" if it does not include within\nthe scope of its coverage, prohibits the exercise of, or is\nconditioned on the non-exercise of one or more of the rights that are\nspecifically granted under this License.  You may not convey a covered\nwork if you are a party to an arrangement with a third party that is\nin the business of distributing software, under which you make payment\nto the third party based on the extent of your activity of conveying\nthe work, and under which the third party grants, to any of the\nparties who would receive the covered work from you, a discriminatory\npatent license (a) in connection with copies of the covered work\nconveyed by you (or copies made from those copies), or (b) primarily\nfor and in connection with specific products or compilations that\ncontain the covered work, unless you entered into that arrangement,\nor that patent license was granted, prior to 28 March 2007.\n\n  Nothing in this License shall be construed as excluding or limiting\nany implied license or other defenses to infringement that may\notherwise be available to you under applicable patent law.\n\n  12. No Surrender of Others' Freedom.\n\n  If conditions are imposed on you (whether by court order, agreement or\notherwise) that contradict the conditions of this License, they do not\nexcuse you from the conditions of this License.  If you cannot convey a\ncovered work so as to satisfy simultaneously your obligations under this\nLicense and any other pertinent obligations, then as a consequence you may\nnot convey it at all.  For example, if you agree to terms that obligate you\nto collect a royalty for further conveying from those to whom you convey\nthe Program, the only way you could satisfy both those terms and this\nLicense would be to refrain entirely from conveying the Program.\n\n  13. Use with the GNU Affero General Public License.\n\n  Notwithstanding any other provision of this License, you have\npermission to link or combine any covered work with a work licensed\nunder version 3 of the GNU Affero General Public License into a single\ncombined work, and to convey the resulting work.  The terms of this\nLicense will continue to apply to the part which is the covered work,\nbut the special requirements of the GNU Affero General Public License,\nsection 13, concerning interaction through a network will apply to the\ncombination as such.\n\n  14. Revised Versions of this License.\n\n  The Free Software Foundation may publish revised and/or new versions of\nthe GNU General Public License from time to time.  Such new versions will\nbe similar in spirit to the present version, but may differ in detail to\naddress new problems or concerns.\n\n  Each version is given a distinguishing version number.  If the\nProgram specifies that a certain numbered version of the GNU General\nPublic License \"or any later version\" applies to it, you have the\noption of following the terms and conditions either of that numbered\nversion or of any later version published by the Free Software\nFoundation.  If the Program does not specify a version number of the\nGNU General Public License, you may choose any version ever published\nby the Free Software Foundation.\n\n  If the Program specifies that a proxy can decide which future\nversions of the GNU General Public License can be used, that proxy's\npublic statement of acceptance of a version permanently authorizes you\nto choose that version for the Program.\n\n  Later license versions may give you additional or different\npermissions.  However, no additional obligations are imposed on any\nauthor or copyright holder as a result of your choosing to follow a\nlater version.\n\n  15. Disclaimer of Warranty.\n\n  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY\nAPPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT\nHOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY\nOF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,\nTHE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\nPURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM\nIS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF\nALL NECESSARY SERVICING, REPAIR OR CORRECTION.\n\n  16. Limitation of Liability.\n\n  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\nWILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS\nTHE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY\nGENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE\nUSE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF\nDATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD\nPARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),\nEVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF\nSUCH DAMAGES.\n\n  17. Interpretation of Sections 15 and 16.\n\n  If the disclaimer of warranty and limitation of liability provided\nabove cannot be given local legal effect according to their terms,\nreviewing courts shall apply local law that most closely approximates\nan absolute waiver of all civil liability in connection with the\nProgram, unless a warranty or assumption of liability accompanies a\ncopy of the Program in return for a fee.\n\n                     END OF TERMS AND CONDITIONS\n\n            How to Apply These Terms to Your New Programs\n\n  If you develop a new program, and you want it to be of the greatest\npossible use to the public, the best way to achieve this is to make it\nfree software which everyone can redistribute and change under these terms.\n\n  To do so, attach the following notices to the program.  It is safest\nto attach them to the start of each source file to most effectively\nstate the exclusion of warranty; and each file should have at least\nthe \"copyright\" line and a pointer to where the full notice is found.\n\n    <one line to give the program's name and a brief idea of what it does.>\n    Copyright (C) <year>  <name of author>\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nAlso add information on how to contact you by electronic and paper mail.\n\n  If the program does terminal interaction, make it output a short\nnotice like this when it starts in an interactive mode:\n\n    <program>  Copyright (C) <year>  <name of author>\n    This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n    This is free software, and you are welcome to redistribute it\n    under certain conditions; type `show c' for details.\n\nThe hypothetical commands `show w' and `show c' should show the appropriate\nparts of the General Public License.  Of course, your program's commands\nmight be different; for a GUI interface, you would use an \"about box\".\n\n  You should also get your employer (if you work as a programmer) or school,\nif any, to sign a \"copyright disclaimer\" for the program, if necessary.\nFor more information on this, and how to apply and follow the GNU GPL, see\n<https://www.gnu.org/licenses/>.\n\n  The GNU General Public License does not permit incorporating your program\ninto proprietary programs.  If your program is a subroutine library, you\nmay consider it more useful to permit linking proprietary applications with\nthe library.  If this is what you want to do, use the GNU Lesser General\nPublic License instead of this License.  But first, please read\n<https://www.gnu.org/licenses/why-not-lgpl.html>.\n"
        },
        {
          "name": "Lanzou-Enhanced.user.js",
          "type": "blob",
          "size": 44.2265625,
          "content": "// ==UserScript==\n// @name         è“å¥äº‘ç½‘ç›˜å¢å¼º\n// @version      1.5.6\n// @author       X.I.U\n// @description  æ–‡ä»¶æ’åºã€åˆ·æ–°ä¸å›æ ¹ç›®å½•ã€å¿«æ·è¿”å›ä¸Šä¸€çº§ï¼ˆå³é”®ç½‘é¡µç©ºç™½å¤„ï¼‰ã€åé€€è¿”å›ä¸Šä¸€çº§ã€å³é”®æ–‡ä»¶æ˜¾ç¤ºèœå•ã€ç‚¹å‡»ç›´æ¥ä¸‹è½½æ–‡ä»¶ã€ç‚¹å‡»ç©ºç™½è¿›å…¥ç›®å½•ã€è‡ªåŠ¨æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶ã€ä¸€é”®å¤åˆ¶æ‰€æœ‰åˆ†äº«é“¾æ¥ã€è‡ªå®šä¹‰åˆ†äº«é“¾æ¥åŸŸåã€è‡ªåŠ¨æ‰“å¼€/å¤åˆ¶åˆ†äº«é“¾æ¥ã€å¸¦å¯†ç çš„åˆ†äº«é“¾æ¥è‡ªåŠ¨è¾“å¯†ç ã€æ‹–å…¥æ–‡ä»¶è‡ªåŠ¨æ˜¾ç¤ºä¸Šä¼ æ¡†ã€è¾“å…¥å¯†ç åå›è½¦ç¡®è®¤ã€ä¼˜åŒ–ç¼–è¾‘æ¡†åˆå§‹å¤§å°\n// @match        *://lanzou.com/u\n// @match        *://www.lanzou.com/u\n// @match        *://www.lanzou.com/account.php*\n// @match        *://up.woozooo.com/u\n// @match        *://up.woozooo.com/mydisk.php*\n// @match        *://pc.woozooo.com/u\n// @match        *://pc.woozooo.com/mydisk.php*\n// @match        *://pan.lanzou.com/*\n// @match        *://*.lanzoub.com/*\n// @match        *://*.lanzoue.com/*\n// @match        *://*.lanzouf.com/*\n// @match        *://*.lanzouh.com/*\n// @match        *://*.lanzoui.com/*\n// @match        *://*.lanzouj.com/*\n// @match        *://*.lanzoul.com/*\n// @match        *://*.lanzoum.com/*\n// @match        *://*.lanzouo.com/*\n// @match        *://*.lanzoup.com/*\n// @match        *://*.lanzouq.com/*\n// @match        *://*.lanzout.com/*\n// @match        *://*.lanzouu.com/*\n// @match        *://*.lanzouv.com/*\n// @match        *://*.lanzouw.com/*\n// @match        *://*.lanzoux.com/*\n// @match        *://*.lanzouy.com/*\n// @match        *://*.lanzob.com/*\n// @match        *://*.lanzoe.com/*\n// @match        *://*.lanzof.com/*\n// @match        *://*.lanzoh.com/*\n// @match        *://*.lanzoi.com/*\n// @match        *://*.lanzoj.com/*\n// @match        *://*.lanzol.com/*\n// @match        *://*.lanzom.com/*\n// @match        *://*.lanzoo.com/*\n// @match        *://*.lanzop.com/*\n// @match        *://*.lanzoq.com/*\n// @match        *://*.lanzot.com/*\n// @match        *://*.lanzov.com/*\n// @match        *://*.lanzow.com/*\n// @match        *://*.lanzox.com/*\n// @match        *://*.lanzoy.com/*\n// @match        *://*.lanzb.com/*\n// @match        *://*.lanze.com/*\n// @match        *://*.lanzf.com/*\n// @match        *://*.lanzh.com/*\n// @match        *://*.lanzi.com/*\n// @match        *://*.lanzj.com/*\n// @match        *://*.lanzl.com/*\n// @match        *://*.lanzm.com/*\n// @match        *://*.lanzo.com/*\n// @match        *://*.lanzp.com/*\n// @match        *://*.lanzq.com/*\n// @match        *://*.lanzt.com/*\n// @match        *://*.lanzv.com/*\n// @match        *://*.lanzw.com/*\n// @match        *://*.lanzx.com/*\n// @match        *://*.lanzy.com/*\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABZ0lEQVR4nJ2TvW4UQRCEv+q9H8wGwFlIOEQQIRmnCIcnEidkSAQYEpwQIPEoZPgliB04IiW15JRXAMkne3e6COaMZe7HiEqmpzVV01PTLR9g1kIAGNdYQgrIAmliPfkSRghFQEk46yGB8S0GN3IF9fKAWYHJJjzbx0/30P1H/yBggwKfF9h5gfa/wObDeV6LAkYQDWTWq5shml3A9hR9+AqjFrLMnVkigECzHhqgEf51Affuotef8ahF2UNc0QZ/s9UZnr/Cu+/Q8DZ8O8TDDbT1pDof1ylXu2iqSdP38OYQ2VhCj3dh9rM+LhY/rQooII3bMUw/1veVrhIU0E5WehxWQILPEjRC7QQDbga1XKk6vgIDuoRxi/bews5LvHGnFqU/DXDZjMuRnx44T49t2860nc756rSzL/P8cpAnRzUqnV36hQOlO7ezrBRQ2pYLEFigtfUuMRHAiptGcrWAfnyvk/afEr8Bt+re7W42OSoAAAAASUVORK5CYII=\n// @grant        GM_xmlhttpRequest\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @grant        GM_setClipboard\n// @grant        unsafeWindow\n// @sandbox      JavaScript\n// @noframes\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://github.com/XIU2/UserScript\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ALL = [\n        ['menu_customFileSha', 'è‡ªå®šä¹‰åˆ†äº«é“¾æ¥åŸŸå', 'è‡ªå®šä¹‰åˆ†äº«é“¾æ¥åŸŸå', ''],\n        ['menu_open_fileSha', 'è‡ªåŠ¨æ‰“å¼€åˆ†äº«é“¾æ¥', 'è‡ªåŠ¨æ‰“å¼€åˆ†äº«é“¾æ¥', true],\n        ['menu_copy_fileSha', 'è‡ªåŠ¨å¤åˆ¶åˆ†äº«é“¾æ¥', 'è‡ªåŠ¨å¤åˆ¶åˆ†äº«é“¾æ¥', true],\n        ['menu_refreshCorrection', 'åˆ·æ–°ä¸è¿”å›æ ¹ç›®å½•', 'åˆ·æ–°ä¸è¿”å›æ ¹ç›®å½•', true],\n        ['menu_rightClickMenu', 'å³é”®æ–‡ä»¶æ˜¾ç¤ºèœå•', 'å³é”®æ–‡ä»¶æ˜¾ç¤ºèœå•', true],\n        ['menu_directDownload', 'ç‚¹å‡»ç›´æ¥ä¸‹è½½æ–‡ä»¶ (åˆ†äº«é“¾æ¥åˆ—è¡¨é¡µ)', 'ç‚¹å‡»ç›´æ¥ä¸‹è½½æ–‡ä»¶', true],\n        ['menu_folderDescdesMenu', 'ä¼˜åŒ–ç¼–è¾‘æ¡†åˆå§‹å¤§å°', 'ä¼˜åŒ–ç¼–è¾‘æ¡†åˆå§‹å¤§å°', true],\n        ['menu_fileSort', 'æ–‡ä»¶æ’åº', 'æ–‡ä»¶æ’åº', true]\n    ], menu_ID = [], lastFolderID;\n    for (let i=0;i<menu_ALL.length;i++){ // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n        if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};\n    }\n    registerMenuCommand();\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (menu_ID.length > menu_ALL.length){ // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n            for (let i=0;i<menu_ID.length;i++){\n                GM_unregisterMenuCommand(menu_ID[i]);\n            }\n        }\n        for (let i=0;i<menu_ALL.length;i++){ // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n            menu_ALL[i][3] = GM_getValue(menu_ALL[i][0]);\n            if (menu_ALL[i][0] == 'menu_refreshCorrection') {\n                menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){if(menu_value('menu_refreshCorrection')){UNrefreshCorrection();}else{refreshCorrection();};menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n            } else if (menu_ALL[i][0] === 'menu_customFileSha') {\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){customFileSha()});\n            } else {\n                menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n            }\n        }\n        menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/419224/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status == 'true') {\n            GM_setValue(`${Name}`, false);\n            if (Name == 'menu_refreshCorrection') {\n                GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½`, timeout: 3500});\n            } else {\n                GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n            }\n        } else {\n            GM_setValue(`${Name}`, true);\n            if (Name == 'menu_refreshCorrection') {\n                GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½`, timeout: 3500});\n            } else {\n                GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n            }\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n    // è¿”å›èœå•å€¼\n    function menu_value(menuName) {\n        for (let menu of menu_ALL) {\n            if (menu[0] == menuName) {\n                return menu[3]\n            }\n        }\n    }\n\n\n    if (window.top.location.pathname === '/u' || window.top.location.pathname.indexOf('account.php') > -1 || window.top.location.pathname.indexOf('mydisk.php') > -1) { // åå°é¡µ\n        if (window.top.location.href != 'https://pc.woozooo.com/mydisk.php') window.top.location.href = 'https://pc.woozooo.com/mydisk.php';\n        RememberLoginStatus() // é€šè¿‡å»¶é•¿ cookie åˆ°æœŸæ—¶é—´æ¥ä¸€ç›´è®°ä½ç™»å½•çŠ¶æ€\n        var mainframe;\n        iframe();\n    } else if (window.top.location.pathname.indexOf('%') > -1) { // > å¸¦å¯†ç çš„åˆ†äº«é“¾æ¥é¡µé¢\n        shareLinkWithPassword(); //                                 å¸¦å¯†ç çš„åˆ†äº«é“¾æ¥è‡ªåŠ¨è¾“å¯†ç \n    } else {\n        setTimeout(function() { //                                  å»¶è¿Ÿ 300 æ¯«ç§’ï¼ˆé¿å…ç½‘é¡µè¿˜æ²¡åŠ è½½å®Œï¼‰\n            if (document.querySelector('#pwdload,#passwddiv')) { // > åˆ†äº«é“¾æ¥è¾“å…¥å¯†ç é¡µ\n                enterPassword(); //                                 è‡ªåŠ¨è¾“å…¥å¯†ç ï¼ˆä»…æ”¯æŒè®¿é—® å¸¦å¯†ç çš„åˆ†äº«é“¾æ¥ æ—¶ï¼‰\n                enterToPass(); //                                   è¾“å…¥å¯†ç åå›è½¦ç¡®è®¤ï¼ˆé’ˆå¯¹æ‰‹åŠ¨è¾“å…¥å¯†ç ï¼‰\n            }\n            if (document.getElementById('infos')) { //              > åˆ†äº«é“¾æ¥æ–‡ä»¶åˆ—è¡¨é¡µ\n                fileMoreS(); //                                     è‡ªåŠ¨æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶\n                directDownload(); //                                ç‚¹å‡»ç›´æ¥ä¸‹è½½æ–‡ä»¶ï¼ˆåˆ†äº«é“¾æ¥åˆ—è¡¨é¡µï¼‰\n            }\n        }, 300);\n        directDownload_(); //                                       ç‚¹å‡»ç›´æ¥ä¸‹è½½æ–‡ä»¶ï¼ˆåˆ†äº«é“¾æ¥åˆ—è¡¨é¡µï¼‰\n    }\n\n\n    // è·å– iframe æ¡†æ¶\n    function iframe() {\n        mainframe = document.getElementById('mainframe');\n        if (mainframe) { //                              åªæœ‰æ‰¾åˆ° iframe æ¡†æ¶æ—¶æ‰ä¼šç»§ç»­è¿è¡Œè„šæœ¬\n            mainframe = mainframe.contentWindow;\n            if (menu_value('menu_refreshCorrection')) refreshCorrection(); // åˆ·æ–°ä¸è¿”å›æ ¹ç›®å½•ï¼ˆF5ï¼‰\n            setTimeout(folderDescdes, 500); //           ä¼˜åŒ–ç¼–è¾‘æ¡†åˆå§‹å¤§å°\n            setTimeout(hideSha, 500); //                 éšè—åˆ†äº«é“¾æ¥çª—å£ï¼ˆè¿™æ ·è‡ªåŠ¨æ‰“å¼€/å¤åˆ¶åˆ†äº«é“¾æ¥æ—¶ï¼Œä¸ä¼šä¸€é—ªè€Œè¿‡ï¼‰\n            fobiddenBack(); //                           ç¦æ­¢æµè§ˆå™¨è¿”å›ï¼ˆå¹¶ç»‘å®šæ–°çš„è¿”å›äº‹ä»¶ï¼‰\n            EventXMLHttpRequest(); //                    ç›‘å¬ XMLHttpRequest äº‹ä»¶å¹¶æ‰§è¡Œ [è‡ªåŠ¨æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶]\n            setTimeout(clickOpenDirectory, 500); //      ç‚¹å‡»ç©ºç™½è¿›å…¥ç›®å½•\n            setTimeout(backToTop, 2000); //              å¿«æ·è¿”å›ä¸Šçº§ï¼ˆå³é”®ç‚¹å‡» ç½‘é¡µå³ä¾§/ä¸‹æ–¹ ç©ºç™½å¤„ï¼‰\n\n            dragEnter(); //                              æ‹–å…¥æ–‡ä»¶è‡ªåŠ¨æ˜¾ç¤ºä¸Šä¼ æ¡†\n            setTimeout(viewTop,1000); //                 ç›‘å¬å¹¶ä¿®æ”¹å³é”®èœå• [å¤–é“¾åˆ†äº«åœ°å€] ä¸º [å¤åˆ¶å¹¶æ‰“å¼€åˆ†äº«é“¾æ¥] / [å¤åˆ¶åˆ†äº«é“¾æ¥] / [æ‰“å¼€åˆ†äº«é“¾æ¥] ä¹‹ä¸€\n            setTimeout(copyAllfileSha, 500); //          ä¸€é”®å¤åˆ¶æ‰€æœ‰åˆ†äº«é“¾æ¥\n\n            setTimeout(filesSort, 300); //               æ–‡ä»¶æ’åº\n        }\n    }\n\n\n    // å¸¦å¯†ç çš„åˆ†äº«é“¾æ¥è‡ªåŠ¨è¾“å¯†ç \n    function shareLinkWithPassword() {\n        if (location.pathname.indexOf('%E5%AF%86%E7%A0%81') > -1) {\n            let shareLink = location.pathname.split('%')\n            if (shareLink.length > 0) {\n                shareLink = location.origin + shareLink[0]\n                let password = location.pathname.replace('%E5%AF%86%E7%A0%81',':').replace(/%([A-Z]|[0-9]){2}/ig, '').split(':')\n                if (password.length > 0) {\n                    location.replace(shareLink + '?pwd=' + password[password.length - 1])\n                }\n            }\n        }\n    }\n\n\n    // è‡ªåŠ¨è¾“å…¥å¯†ç ï¼ˆä»…æ”¯æŒè®¿é—® å¸¦å¯†ç çš„åˆ†äº«é“¾æ¥ æ—¶ï¼Œæ¯”å¦‚ä¸Šé¢ [å¸¦å¯†ç çš„åˆ†äº«é“¾æ¥è‡ªåŠ¨è¾“å¯†ç ] åŠŸèƒ½é‡å®šå‘åçš„é“¾æ¥ï¼‰\n    function enterPassword() {\n        if (location.search.indexOf('?pwd=') > -1 || location.search.indexOf('?passwd=') > -1 || location.search.indexOf('?password=') > -1) {\n            let password = location.search.split('=')\n            if (password.length > 0) {\n                document.getElementById('pwd').value = password[password.length - 1]\n                if (document.getElementById('sub')) {\n                    document.getElementById('sub').click();\n                } else {\n                    document.querySelector('.passwddiv-btn[onclick]').click();\n                }\n            }\n        }\n    }\n\n\n    // åˆ·æ–°ä¸è¿”å›æ ¹ç›®å½•ï¼ˆF5ï¼‰\n    function refreshCorrection() {\n        document.onkeydown = mainframe.onkeydown = function (e) {\n            e = window.event || e;\n            if (e.key === 'F5') {\n                let folderID = /-?\\d+/.exec(mainframe.document.getElementById('filemore').children[0].onclick)\n                if(folderID.length > 0){\n                    mainframe.folder(folderID[0]);\n                    e.returnValue = false;\n                    e.cancelBubble = true;\n                    return false;\n                }\n            }\n        }\n    }\n\n\n    // æ¢å¤åˆ·æ–°æœºåˆ¶\n    function UNrefreshCorrection() {\n        document.onkeydown = mainframe.onkeydown = function (e) {\n            e = window.event || e;\n            if (e.key === 'F5') {\n                return true;\n            }\n        }\n    }\n\n\n    // ç‚¹å‡»ç©ºç™½è¿›å…¥ç›®å½•\n    function clickOpenDirectory() {\n        mainframe.document.getElementById('sub_folder_list').onclick = function(e){\n            //console.log(e.target);\n            if (e.target.className && e.target.className == 'f_tb') {\n                e.target.querySelector('span.follink').click()\n            }\n        }\n    }\n\n\n    // å³é”®æ–‡ä»¶æ˜¾ç¤ºèœå•\n    function rightClickMenu() {\n        if (!menu_value('menu_rightClickMenu')) return\n        rightClickMenu_('sub_folder_list', 'fols', 'folse') // æ–‡ä»¶å¤¹\n        rightClickMenu_('filelist', 'fs', 'fse') //            æ–‡ä»¶\n    }\n\n\n    // å³é”®æ–‡ä»¶æ˜¾ç¤ºèœå•ï¼Œå‚æ•°ï¼šæ–‡ä»¶/æ–‡ä»¶å¤¹åˆ—è¡¨ IDã€èœå• IDã€èœå• IDå‰ç¼€\n    function rightClickMenu_(list_id_name, menu_id_name_prefix, list_id_name_prefix) {\n        let list_ = mainframe.document.getElementById(list_id_name);\n        if (!list_) return //                                æ–‡ä»¶/æ–‡ä»¶å¤¹åˆ—è¡¨\n        list_.oncontextmenu = function(e){\n            e.preventDefault(); //                           å±è”½æµè§ˆå™¨è‡ªèº«å³é”®èœå•\n            let left = e.pageX - 30; //                      å³é”®èœå•å¼¹å‡ºä½ç½®\n            let list_ID = e.target.id;\n            if (e.target.nodeName === 'FONT') {\n                list_ID = e.target.parentNode.parentNode.id\n            } else if(e.target.id === '') {\n                list_ID = e.target.parentNode.id\n            }\n            list_ID = /\\d+/.exec(list_ID)\n            if(list_ID.length > 0){\n                mainframe.document.getElementById(menu_id_name_prefix + list_ID[0]).style.cssText='position: absolute !important; left: ' + left + 'px;' // ä¿®æ”¹å³é”®èœå•å¼¹å‡ºä½ç½®ï¼ˆXï¼‰\n                mainframe.document.getElementById(list_id_name_prefix + list_ID[0]).focus();\n                mainframe.document.getElementById(list_id_name_prefix + list_ID[0]).click();\n            }\n        }\n    }\n\n\n    // è‡ªåŠ¨æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶ï¼ˆåå°é¡µï¼‰\n    function fileMore() {\n        let filemore = mainframe.document.getElementById('filemore'); // å¯»æ‰¾ [æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶] æŒ‰é’®\n        if (filemore && filemore.style.display === 'block') { //         åˆ¤æ–­æŒ‰é’®æ˜¯å¦å­˜åœ¨ä¸”å¯è§\n            if (filemore.children[0]) { //                               åˆ¤æ–­æŒ‰é’®å…ƒç´ ä¸‹ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨\n                filemore.children[0].click(); //                         ç‚¹å‡» [æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶] æŒ‰é’®\n            }\n        }\n    }\n\n\n    // è‡ªåŠ¨æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶ï¼ˆåˆ†äº«é“¾æ¥åˆ—è¡¨é¡µï¼‰\n    function fileMoreS() {\n        windowScroll(function (direction, e) {\n            if (direction === 'down') { // ä¸‹æ»‘æ‰å‡†å¤‡åŠ è½½æ›´å¤š\n                let scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n                let scrollDelta = 500;\n                if (document.documentElement.scrollHeight <= document.documentElement.clientHeight + scrollTop + scrollDelta) {\n                    let filemore = document.getElementById('filemore'); // å¯»æ‰¾ [æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶] æŒ‰é’®\n                    if (filemore && filemore.style.display != 'none') { // å¦‚æœæ­£åœ¨åŠ è½½ï¼Œå°±ä¸å†ç‚¹å‡»\n                        if (filemore.textContent.indexOf('æ›´å¤š') > -1){ // é¿å…å·²ç»åœ¨åŠ è½½äº†ï¼Œé‡å¤ç‚¹å‡»\n                            filemore.click(); //                           ç‚¹å‡» [æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶] æŒ‰é’®\n                        }\n                    }\n                }\n            }\n        });\n    }\n\n\n    // ç‚¹å‡»ç›´æ¥ä¸‹è½½æ–‡ä»¶ï¼ˆåˆ†äº«é“¾æ¥åˆ—è¡¨é¡µï¼‰\n    function directDownload() {\n        if (!menu_value('menu_directDownload')) return\n        if (document.getElementById('infos')) {\n            document.getElementById('infos').addEventListener('click', function(e) {\n                if (e.target.tagName === 'A') { // é’ˆå¯¹æ™®é€šæ ·å¼çš„åˆ†äº«é“¾æ¥åˆ—è¡¨é¡µ\n                    e.preventDefault(); // é˜»æ­¢é»˜è®¤æ‰“å¼€é“¾æ¥äº‹ä»¶\n                    GM_openInTab(e.target.href + '#download', {active: false, insert: true, setParent: true}); // åå°æ‰“å¼€\n                } else { // é’ˆå¯¹ä¼šå‘˜ä¸“å±æ ·å¼çš„åˆ†äº«é“¾æ¥åˆ—è¡¨é¡µ\n                    const link = e.target.closest('a'); // ç‚¹å‡» <a> å…ƒç´ çš„å­å…ƒç´ æ—¶ï¼Œå¯»æ‰¾æœ€è¿‘çš„ <a> çˆ¶å…ƒç´ \n                    if ((link && this.contains(link))) {\n                        e.preventDefault(); // é˜»æ­¢é»˜è®¤æ‰“å¼€é“¾æ¥äº‹ä»¶\n                        GM_openInTab(link.href + '#download', {active: false, insert: true, setParent: true}); // åå°æ‰“å¼€\n                    }\n                }\n            });\n        }\n    }\n    // ç‚¹å‡»ä¸‹è½½æŒ‰é’®\n    function directDownload_() {\n        if (!menu_value('menu_directDownload')) return\n        if (location.hash != '#download') return\n        let iframe = document.querySelector('iframe.ifr2, iframe.n_downlink');\n        if (iframe) { // åªæœ‰æ‰¾åˆ° iframe æ¡†æ¶æ—¶æ‰ä¼šç»§ç»­è¿è¡Œè„šæœ¬\n            iframe = iframe.contentWindow;\n            let timer = setInterval(function(){\n                if (iframe.document.querySelector('.load>[href]')) {\n                    //iframe.document.querySelector('.load>a[href]').target = '_top'\n                    //iframe.document.querySelector('.load>a[href]').click();\n                    GM_openInTab(iframe.document.querySelector('.load>a[href]').href, {active: false, insert: true, setParent: false}); // åå°æ‰“å¼€\n                    clearInterval(timer);\n                    // å…³é—­è¯¥åå°æ ‡ç­¾é¡µ\n                    if (GM_info.scriptHandler === 'Violentmonkey') { // Violentmonkey éœ€è¦å»¶è¿Ÿä¸€ä¼šå„¿\n                        setTimeout(function(){window.top.close();}, 500)\n                    } else {\n                        window.top.close();\n                    }\n                }\n            }, 10);\n        }\n    }\n\n\n    // æ»šåŠ¨æ¡äº‹ä»¶\n    function windowScroll(fn1) {\n        var beforeScrollTop = document.documentElement.scrollTop,\n            fn = fn1 || function () {};\n        setTimeout(function () { // å»¶æ—¶æ‰§è¡Œï¼Œé¿å…åˆšè½½å…¥åˆ°é¡µé¢å°±è§¦å‘ç¿»é¡µäº‹ä»¶\n            window.addEventListener('scroll', function (e) {\n                var afterScrollTop = document.documentElement.scrollTop,\n                    delta = afterScrollTop - beforeScrollTop;\n                if (delta == 0) return false;\n                fn(delta > 0 ? 'down' : 'up', e);\n                beforeScrollTop = afterScrollTop;\n            }, false);\n        }, 1000)\n    }\n\n\n    // ä¼˜åŒ–ç¼–è¾‘æ¡†åˆå§‹å¤§å°\n    function folderDescdes() {\n        if (!menu_value('menu_folderDescdesMenu')) return\n        mainframe.document.lastChild.appendChild(mainframe.document.createElement('style')).textContent = `#folder_descdes, #fol_credes, #file_desc {margin: 15px 0px; width: 550px; height: 125px;} input#f_ename_new {min-width: 700px; font-size: 14px;} #f_ename {z-index: 999;left: 15px;}`\n    }\n\n\n    // æ‹–å…¥æ–‡ä»¶è‡ªåŠ¨æ˜¾ç¤ºä¸Šä¼ æ¡†\n    function dragEnter() {\n        mainframe.addEventListener('dragenter', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            let f_upb = mainframe.document.querySelector('.f_upb')\n            if(f_upb.style.top != '-36px') {\n                f_upb.style.top = '-36px';\n                mainframe.f_upc();\n            }\n        }, false);\n        mainframe.addEventListener('drop', function (e) {\n            e.preventDefault();\n            //e.stopPropagation();\n            //console.log(e.dataTransfer.files)\n        });\n    }\n\n\n    // ä¸€é”®å¤åˆ¶æ‰€æœ‰åˆ†äº«é“¾æ¥\n    function copyAllfileSha() {\n        var f_data = '', tmep_data = [];\n        let f_tp = mainframe.document.getElementById('f_tp');\n        //console.log(f_tp, mainframe.document.location.href)\n        f_tp.insertAdjacentHTML('afterend', `<a id=\"f_copyAll\" class=\"f_sela\" style=\"float: right; width: auto; font-size: 12px !important; font: inherit; padding: 2px 10px; margin-top: -25px;\" title=\"è·å–æ‰€æœ‰åˆ†äº«é“¾æ¥éœ€è¦ä¸€äº›æ—¶é—´ï¼ˆå–å†³äºæœ‰å¤šå°‘æ–‡ä»¶ï¼‰ã€‚&#10;å› ä¸ºåˆ†äº«é“¾æ¥æ²¡æœ‰æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šï¼Œéœ€è¦é€šè¿‡ç½‘é¡µæ¥å£è·å–ï¼Œå› æ­¤ä¸ºäº†é¿å…å¤ªé¢‘ç¹è¢«é™åˆ¶ï¼Œæ‰€ä»¥è®¾ç½®äº† 300ms é—´éš”æ—¶é—´ï¼\">ä¸€é”®å¤åˆ¶æ‰€æœ‰åˆ†äº«é“¾æ¥</a>`);\n        mainframe.document.getElementById('f_copyAll').onclick = function() {\n            f_data = ''; tmep_data = [];\n            mainframe.document.querySelectorAll('.f_tb').forEach(function (_this) {\n                //console.log(_this, _this.id.indexOf('fol') > -1)\n                if (_this.id.indexOf('fol') > -1) {\n                    //console.log(`task=18&folder_id=${_this.id.replace('fol','')}`)\n                    tmep_data.push([`${_this.querySelector('span[id^=\"folname\"]').textContent}`, `task=18&folder_id=${_this.id.replace('fol','')}`])\n                } else {\n                    //console.log(`task=22&file_id=${_this.id.replace('f','')}`)\n                    tmep_data.push([`${_this.querySelector('span[id^=\"filename\"]').textContent}`, `task=22&file_id=${_this.id.replace('f','')}`])\n                }\n            })\n            //console.log(tmep_data)\n            if (tmep_data.length > 0) {\n                getUrl(0);\n                GM_notification({text: 'è·å–æ‰€æœ‰åˆ†äº«é“¾æ¥éœ€è¦ä¸€äº›æ—¶é—´ï¼ˆå–å†³äºæœ‰å¤šå°‘æ–‡ä»¶ï¼‰ï¼Œåœ¨æ­¤æœŸé—´è¯·ä¸è¦å…³é—­ç½‘é¡µï¼', timeout: 5000});\n            }\n        };\n\n\n        function getUrl(i) {\n            //console.log(i)\n            GM_xmlhttpRequest({\n                url: 'https://pc.woozooo.com/doupload.php',\n                method: 'POST',\n                data: tmep_data[i][1],\n                responseType: 'json',\n                overrideMimeType: 'application/json; charset=utf-8',\n                headers: {\n                    'Referer': mainframe.document.location.href,\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                },\n                timeout: 5000,\n                onload: function (response) {\n                    try {\n                        //console.log('è¿”å›å†…å®¹ï¼š',response.response)\n                        if (response.response && response.response.zt === 1) {\n                            //console.log(response.response)\n                            if (response.response.info.f_id) {\n                                //console.log('æ–‡ä»¶ 1',f_data)\n                                f_data += `${tmep_data[i][0]} `\n                                if (menu_value('menu_customFileSha')) {\n                                    f_data += `https://${menu_value('menu_customFileSha')}/${response.response.info.f_id} `\n                                } else {\n                                    f_data += `${response.response.info.is_newd}/${response.response.info.f_id} `\n                                }\n                                if (response.response.info.onof == '1') f_data += `å¯†ç :${response.response.info.pwd}`\n                                f_data += `\\n`\n                                //console.log('æ–‡ä»¶ 2',f_data)\n                            } else {\n                                //console.log('ç›®å½• 1',f_data)\n                                f_data += `${response.response.info.name} `\n                                if (menu_value('menu_customFileSha')) {\n                                    f_data += `${response.response.info.new_url.replace(/\\/\\/.+\\//i, '//' + menu_value('menu_customFileSha') + '/')} `\n                                } else {\n                                    f_data += `${response.response.info.new_url} `\n                                }\n                                if (response.response.info.onof == '1') f_data += `å¯†ç :${response.response.info.pwd}`\n                                f_data += `\\n`\n                                //console.log('ç›®å½• 2',f_data)\n                            }\n                            if (++i < tmep_data.length) {\n                                setTimeout(function(){getUrl(i);}, 300);\n                            } else {\n                                console.log(f_data)\n                                GM_setClipboard(f_data, 'text');\n                                GM_notification({text: 'âœ… å·²å¤åˆ¶æ‰€æœ‰æ–‡ä»¶/ç›®å½•çš„åˆ†äº«é“¾æ¥åˆ°å‰ªåˆ‡æ¿~', timeout: 2000});\n                            }\n                        } else {\n                            GM_notification({text: 'âŒ æ›´æ–°å¤±è´¥ï¼Œè¯·è”ç³»ä½œè€…è§£å†³...', timeout: 5000});\n                        }\n                    } catch (e) {\n                        console.log(e);\n                    }\n                }\n            })\n        }\n    }\n\n    // åˆ†äº«é“¾æ¥ç›¸å…³ï¼ˆç‚¹å‡»æ–‡ä»¶æ—¶ï¼‰\n    function fileSha() {\n        var f_sha = mainframe.document.getElementById('f_sha'); //                      å¯»æ‰¾åˆ†äº«é“¾æ¥ï¼ˆä¸‹è½½é“¾æ¥ï¼‰ä¿¡æ¯æ¡†\n        if (f_sha && f_sha.style.display === 'block') { //                              åˆ¤æ–­ä¿¡æ¯æ¡†æ˜¯å¦å­˜åœ¨ä¸”å¯è§\n            let f_sha1 = mainframe.document.getElementById('f_sha1'); //                è·å–åˆ†äº«é“¾æ¥ï¼ˆä¸‹è½½é“¾æ¥ï¼‰\n            if (f_sha1 && f_sha1.textContent != '') { //                                ç¡®ä¿åˆ†äº«é“¾æ¥ï¼ˆä¸‹è½½é“¾æ¥ï¼‰ä¸æ˜¯ç©º\n                // è‡ªå®šä¹‰åˆ†äº«é“¾æ¥åŸŸå\n                if (menu_value('menu_customFileSha')) {f_sha1.innerText = f_sha1.innerText.replace(/\\/\\/.+\\//i, '//' + menu_value('menu_customFileSha') + '/');}\n                // æ‰“å¼€åˆ†äº«é“¾æ¥\n                if (menu_value('menu_open_fileSha')) {f_sha.style.display = 'none';GM_openInTab(f_sha1.textContent, {active: true,insert: true,setParent: true});}\n                // å¤åˆ¶åˆ†äº«é“¾æ¥ï¼ˆå¹¶å·²å¤åˆ¶çš„æç¤ºä¿¡æ¯ï¼‰\n                if (menu_value('menu_copy_fileSha')) {f_sha.style.display = 'none';GM_setClipboard(f_sha1.textContent, 'text');GM_notification({text: 'å·²å¤åˆ¶åˆ†äº«é“¾æ¥~', timeout: 2000});}\n                // ç›´æ¥ä¸‹è½½æ–‡ä»¶\n                //if (menu_value('menu_directDownload')) {f_sha.style.display = 'none';GM_openInTab(f_sha1.textContent + '#download', {active: false,insert: true,setParent: true});}\n            }\n        }\n    }\n\n\n    // è‡ªå®šä¹‰åˆ†äº«é“¾æ¥åŸŸå\n    function customFileSha() {\n        let newDomain = prompt('è¯·è¾“å…¥ [è‡ªå®šä¹‰åˆ†äº«é“¾æ¥åŸŸå]ï¼Œç‚¹å‡»ç¡®å®šåç«‹å³ç”Ÿæ•ˆ\\nè“å¥äº‘åˆ†äº«é“¾æ¥æœ«å°¾çš„ ID æ˜¯å”¯ä¸€çš„ï¼Œè€Œå‰é¢çš„åŸŸåç”¨è°çš„éƒ½ä¸€æ ·\\nç¤ºä¾‹ï¼špan.lanzoui.com æˆ– wwe.lanzoui.com æˆ– xiu.lanzoui.com', GM_getValue('menu_customFileSha'));\n        if (newDomain === '') {\n            GM_setValue('menu_customFileSha', '');\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        } else if (newDomain != null) {\n            GM_setValue('menu_customFileSha', newDomain);\n            registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n        }\n    }\n\n\n    // éšè—åˆ†äº«é“¾æ¥çª—å£ï¼ˆè¿™æ ·è‡ªåŠ¨æ‰“å¼€/å¤åˆ¶åˆ†äº«é“¾æ¥æ—¶ï¼Œä¸ä¼šä¸€é—ªè€Œè¿‡ï¼‰\n    function hideSha(){\n        if (menu_value('menu_open_fileSha') || menu_value('menu_copy_fileSha')) { // [è‡ªåŠ¨å¤åˆ¶åˆ†äº«é“¾æ¥] æˆ– [è‡ªåŠ¨æ‰“å¼€åˆ†äº«é“¾æ¥] ä»»æ„ä¸€ä¸ªåŠŸèƒ½å¼€å¯æ—¶æ‰ç»§ç»­\n            mainframe.document.lastElementChild.appendChild(document.createElement('style')).textContent = '#f_sha {display: none !important;}';\n        }\n    }\n\n\n    // ç¦æ­¢æµè§ˆå™¨è¿”å›ï¼ˆå¹¶ç»‘å®šæ–°çš„è¿”å›äº‹ä»¶ï¼‰\n    function fobiddenBack() {\n        history.pushState(null, null, document.URL);\n        window.addEventListener('popstate',backEvent)\n    }\n\n\n    // å…è®¸æµè§ˆå™¨è¿”å›\n    function enableBack() {\n        history.go(-1);\n        window.removeEventListener('popstate',backEvent)\n    }\n\n\n    // æµè§ˆå™¨åé€€äº‹ä»¶å‡½æ•°\n    function backEvent() {\n        if (lastFolderID) {\n            mainframe.folder(lastFolderID);\n        }\n        history.pushState(null, null, document.URL);\n    }\n\n\n    // è·å–ä¸Šä¸ªæ–‡ä»¶å¤¹ IDï¼ˆç”¨äºæµè§ˆå™¨åé€€äº‹ä»¶ï¼‰\n    function getLastFolderID() {\n        lastFolderID = null\n        let f_tpspan = mainframe.document.querySelectorAll('span.f_tpspan');\n        if (f_tpspan.length > 1) {\n            lastFolderID = /-?\\d+/.exec(f_tpspan[f_tpspan.length - 2].getAttribute('onclick'))[0];\n        }\n    }\n\n\n    // è¾“å…¥å¯†ç åå›è½¦ç¡®è®¤\n    function enterToPass() {\n        document.getElementById('pwd').onkeydown = function(e){\n            if (e.key === 'Enter') {\n                document.getElementById('sub').click();\n            }\n        };\n    }\n\n\n    // å¿«æ·è¿”å›ä¸Šçº§ï¼ˆå³é”®ç‚¹å‡» ç½‘é¡µå³ä¾§/ä¸‹æ–¹ ç©ºç™½å¤„ï¼‰\n    function backToTop() {\n        mainframe.document.getElementById('container').oncontextmenu = mainframe.document.body.oncontextmenu = function(e){\n            if (e.target == this) {\n                e.preventDefault();\n                backEvent();\n            }\n        }\n    }\n\n\n    // ç›‘å¬ XMLHttpRequest äº‹ä»¶å¹¶æ‰§è¡Œ\n    function EventXMLHttpRequest() {\n        var _send = mainframe.XMLHttpRequest.prototype.send\n        function sendReplacement(data) {\n            setTimeout(fileMore, 200); // è‡ªåŠ¨æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶\n            setTimeout(fileSha, 200); // è‡ªåŠ¨æ‰“å¼€åˆ†äº«é“¾æ¥ï¼ˆç‚¹å‡»æ–‡ä»¶æ—¶ï¼‰\n            setTimeout(rightClickMenu, 500); // å³é”®æ–‡ä»¶æ˜¾ç¤ºèœå•\n            setTimeout(getLastFolderID, 200); // è·å–ä¸Šä¸ªæ–‡ä»¶å¤¹ IDï¼ˆç”¨äºæµè§ˆå™¨åé€€äº‹ä»¶ï¼‰\n            return _send.apply(this, arguments);\n        }\n        mainframe.XMLHttpRequest.prototype.send = sendReplacement;\n    }\n\n\n    // ç›‘å¬å¹¶ä¿®æ”¹å³é”®èœå• [å¤–é“¾åˆ†äº«åœ°å€] ä¸º [å¤åˆ¶å¹¶æ‰“å¼€åˆ†äº«é“¾æ¥] / [å¤åˆ¶åˆ†äº«é“¾æ¥] / [æ‰“å¼€åˆ†äº«é“¾æ¥] ä¹‹ä¸€\n    function viewTop() {\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    if (target.className === 'f_view') {\n                        //console.log(target)\n                        let f_viewtop = target.querySelector('.f_viewtop');\n                        if (f_viewtop && f_viewtop.textContent === 'å¤–é“¾åˆ†äº«åœ°å€') {\n                            if (menu_value('menu_open_fileSha') && menu_value('menu_copy_fileSha')) {\n                                f_viewtop.textContent = 'å¤åˆ¶å¹¶æ‰“å¼€åˆ†äº«é“¾æ¥';\n                            } else if (menu_value('menu_open_fileSha')) {\n                                f_viewtop.textContent = 'æ‰“å¼€åˆ†äº«é“¾æ¥';\n                            } else if (menu_value('menu_copy_fileSha')) {\n                                f_viewtop.textContent = 'å¤åˆ¶åˆ†äº«é“¾æ¥';\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(mainframe.document, { childList: true, subtree: true });\n    }\n\n    // é€šè¿‡å»¶é•¿ cookie åˆ°æœŸæ—¶é—´æ¥ä¸€ç›´è®°ä½ç™»å½•çŠ¶æ€\n    function RememberLoginStatus() {\n        // è·å– Cookie\n        function getCookie(name) {\n            if (!name) return ''\n            let arr = document.cookie.split(';');\n            name += '=';\n            for (let i=0; i<arr.length; i++) {let now = arr[i].trim();if (now.indexOf(name) == 0) return now.substring(name.length, now.length);}\n            return '';\n        }\n\n        const ylogin = getCookie('ylogin'), phpdisk_info = getCookie('phpdisk_info')\n        if (ylogin !== '' && phpdisk_info !== '') { // å¦‚æœå·²ç™»å½•(æœ‰ç›¸åº” cookie)ï¼Œé‚£ä¹ˆå°±å»¶é•¿è‡³æµè§ˆå™¨æ”¯æŒçš„åˆ°æœŸæ—¶é—´ä¸Šé™ï¼ˆä¸åŒæµè§ˆå™¨å¯¹åˆ°æœŸæ—¶é—´çš„é™åˆ¶ä¸ä¸€æ ·ï¼Œä¸€èˆ¬æ˜¯ 1-5 å¹´ï¼‰\n            document.cookie='ylogin=' + ylogin + '; domain=.woozooo.com; expires=Thu, 18 Dec 2099 12:00:00 GMT; path=/'\n            document.cookie='phpdisk_info=' + phpdisk_info + '; domain=pc.woozooo.com; expires=Thu, 18 Dec 2099 12:00:00 GMT; path=/'\n        }\n    }\n\n    // æ–‡ä»¶æ’åº\n    function filesSort() {\n        const frame = mainframe;\n        const frameDoc = frame.document;\n\n        const currentStatus = {\n            by: 'name',\n            order: 'asc',\n        }\n\n        let allButtons = undefined;\n\n        // æ–‡ä»¶åæ’åº\n        function sortByName(name1, name2) {\n            function sort(a, b) {\n                const strA = a.toLocaleLowerCase().split('');\n                const strB = b.toLocaleLowerCase().split('');\n                for (let i = 0; i < strA.length; i++) {\n                    if (strA[i] === strB[i]) {\n                        continue;\n                    }\n                    if (strB[i] === undefined) return 1;\n                    if (notChinese(strA[i]) && notChinese(strB[i])) {\n                        return strA[i] < strB[i] ? -1 : 1;\n                    } else if (notChinese(strA[i])) {\n                        return -1;\n                    } else if (notChinese(strB[i])) {\n                        return 1;\n                    } else {\n                        return strA[i].localeCompare(strB[i]);\n                    }\n                }\n                if (strA.length === strB.length) {\n                    return 0;\n                } else if (strA.length < strB.length) {\n                    return -1;\n                }\n                return 1;\n            }\n            function notChinese(char) {\n                const charCode = char.charCodeAt(0)\n                return charCode >= 0 && charCode <= 128\n            }\n            return sort(name1, name2);\n        }\n\n        // åˆ›å»ºæ’åºæŒ‰éˆ•\n        function createAllButtons() {\n            const tabTitle = frameDoc.querySelector('#container > div.n1 > div.f_th');\n            const name = tabTitle.querySelector('div.f_name');\n            const size = tabTitle.querySelector('div.f_size');\n            const time = tabTitle.querySelector('div.f_time');\n            const down = tabTitle.querySelector('div.f_down'); // ä¸‹è½½é‡\n            return {\n                name: {\n                    el: createButton(name, 'name', 'æŒ‰ æ–‡ä»¶åç§° æ’åº'),\n                    order: 'asc',\n                },\n                size: {\n                    el: createButton(size, 'size', 'æŒ‰ æ–‡ä»¶å¤§å° æ’åº'),\n                    order: 'asc',\n                },\n                time: {\n                    el: createButton(time, 'time', 'æŒ‰ ä¸Šä¼ æ—¶é—´ æ’åº'),\n                    order: 'asc',\n                },\n                down: {\n                    el: createButton(down, 'down', 'æŒ‰ ä¸‹è½½æ¬¡æ•° æ’åº'),\n                    order: 'asc',\n                }\n            };\n        }\n        function createButton(element, by, title) {\n            // element.insertAdjacentHTML('beforeend', '<a class=\"col_sort_btn\" href=\"javascript: void;\" style=\"font-size: 16px; float: right;\">â‡§</a>');\n            let button = frameDoc.createElement('a');\n            button.className = 'col_sort_btn';\n            button.href = 'javascript: void(0);';\n            button.style.fontSize = '16px';\n            button.style.float = 'right';\n            if (by == 'name') {button.style.float = 'left';}\n            button.title = title;\n            button.textContent = 'â‡§';\n            button.onclick = () => clickSortButton(by, button);\n            element.appendChild(button);\n            return button;\n        }\n\n\n        function getFiles() {\n            const list = frameDoc.querySelector('#filelist');\n            const files = list.childNodes;\n            const filesInfo = [];\n            const now = new Date();\n            for (const file of files) {\n                const name = file.querySelector('.f_name > span.aspanlink > .f_name_title').textContent;\n                const size = parseByteSize(file.querySelector('.f_size').textContent);\n                const time = file.querySelector('.f_time').textContent;\n                const down = parseInt(file.querySelector('.f_down').textContent);\n                filesInfo.push({\n                    info: {\n                        name: name,\n                        size: size,\n                        time: parseTime(now, time),\n                        down: down\n                    },\n                    node: file\n                })\n            }\n            return filesInfo;\n        }\n\n        function getFolders() {\n            const list = frameDoc.querySelector('#sub_folder_list');\n            const folders = list.childNodes;\n            const foldersInfo = [];\n            for (const folder of folders) {\n                const name = folder.querySelector('.f_tb > .f_name2 > span.follink > span').textContent;\n                foldersInfo.push({\n                    info: {\n                        name: name,\n                    },\n                    node: folder\n                })\n            }\n            return foldersInfo;\n        }\n        // è½¬æ¢æ–‡ä»¶å¤§å°\n        function parseByteSize(text) {\n            const unit = ['B', 'K', 'M', 'G', 'T'];\n            let size = 0;\n            for (let i = 0; i < unit.length; i++) {\n                if (text.indexOf(unit[i]) > -1) {\n                    size = parseFloat(text.replace(unit[i], '')) * Math.pow(1024, i);\n                    break;\n                }\n            }\n            return size;\n        }\n        // è½¬æ¢æ—¶é—´æ ¼å¼\n        function parseTime(now, text) {\n            function parseDay(time) {\n                const days = [\n                    {\n                        name: 'å‰å¤©',\n                        offset: -2,\n                    },\n                    {\n                        name: 'æ˜¨å¤©',\n                        offset: -1,\n                    }\n                ];\n                const date = new Date(now.getTime());\n                let index = -1;\n                for (let i = 0; i < days.length; i++) {\n                    if (time.indexOf(days[i].name) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                if (index === -1) return new Date(now.getTime());\n                const hourAndMinute = text.replace(days[index].name, '').split(':');\n                const hour = parseInt(hourAndMinute[0]);\n                const minute = parseInt(hourAndMinute[1]);\n                date.setDate(date.getDate() + days[index].offset);\n                date.setHours(hour);\n                date.setMinutes(minute);\n                // è“å¥äº‘æ˜¾ç¤ºæ¯”è¾ƒå¥‡æ€ªï¼Œè¶…è¿‡24å°æ—¶ï¼Œæœªæ»¡48å°æ—¶ï¼Œéƒ½æ˜¯æ˜¨å¤©ï¼Œå¹¶ä¸ä»¥æ¯å¤©0ç‚¹ä½œä¸ºåˆ†ç•Œ\n                if (hour * 60 + minute > now.getHours() * 60 + now.getMinutes()) {\n                    date.setDate(date.getDate() - 1);\n                }\n                return date;\n            }\n            if (text.indexOf('ç§’å‰') > -1) {\n                return now.getTime() - parseInt(text.replace('ç§’å‰', '')) * 1000;\n            } else if (text.indexOf('åˆ†é’Ÿå‰') > -1) {\n                return now.getTime() - parseInt(text.replace('åˆ†é’Ÿå‰', '')) * 60 * 1000;\n            } else if (text.indexOf('å°æ—¶å‰') > -1) {\n                return now.getTime() - parseInt(text.replace('å°æ—¶å‰', '')) * 60 * 60 * 1000;\n            } else if (text.indexOf('æ˜¨å¤©') > -1 || text.indexOf('å‰å¤©') > -1) {\n                return parseDay(text).getTime();\n            } else if (text.indexOf('å¤©å‰') > -1) {\n                return now.getTime() - parseInt(text.replace('å¤©å‰', '')) * 24 * 60 * 60 * 1000;\n            } else if (text.indexOf('æœˆå‰') > -1) { // æˆ‘ä¸çŸ¥é“æœ‰æ²¡æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼Œæš‚æ—¶å…ˆå†™ä¸Š\n                return now.getTime() - parseInt(text.replace('æœˆå‰', '')) * 30 * 24 * 60 * 60 * 1000;\n            } else if (text.indexOf('å¹´å‰') > -1) {\n                return now.getTime() - parseInt(text.replace('å¹´å‰', '')) * 365 * 24 * 60 * 60 * 1000;\n            }\n            return Date.parse(text);\n        }\n\n        // æ’åº\n        function sortItems(files, by, order) {\n            let compareFunc;\n            if (by === 'name') {\n                compareFunc = (a, b) => {\n                    return (order === 'asc' ? 1 : -1) * sortByName(a.info.name, b.info.name);\n                }\n            } else {\n                compareFunc = (a, b) => {\n                    const result = a.info[by] > b.info[by] ? 1 : -1;\n                    return (order === 'asc' ? 1 : -1) * result;\n                }\n            }\n            files.sort(compareFunc);\n        }\n\n        function sortFileList() {\n            const files = getFiles();\n            if (files.length > 0) {\n                sortItems(files, currentStatus.by, currentStatus.order);\n                // console.log(files)\n                const fileList = frameDoc.querySelector('#filelist');\n                for (let i = 0; i < files.length; i++) {\n                    fileList.appendChild(files[i].node);\n                }\n            }\n        }\n\n        function sortFolderList() {\n            const folders = getFolders();\n            // console.log(folders);\n            if (folders.length > 0) {\n                // æ–‡ä»¶å¤¹åªèƒ½æŒ‰åç§°æ’åº\n                if (currentStatus.by === 'name') {\n                    sortItems(folders, 'name', currentStatus.order);\n                } else {\n                    sortItems(folders, 'name', 'asc'); // å…¶ä»–æƒ…å†µï¼Œçš†æŒ‰åç§°å‡åº\n                }\n                const folderList = frameDoc.querySelector('#sub_folder_list');\n                for (let i = 0; i < folders.length; i++) {\n                    folderList.appendChild(folders[i].node);\n                }\n            }\n        }\n\n        function fileListCallback(records) {\n            if (!menu_value('menu_fileSort')) return;\n            for (const event of records) {\n                // è‡ªå·±ä¿®æ”¹çš„æ—¶å€™ä¸æ’åº\n                if (event.removedNodes.length > 0) return;\n            }\n            sortFileList();\n        }\n\n        function folderListCallback(records) {\n            if (!menu_value('menu_fileSort')) return;\n            for (const event of records) {\n                // è‡ªå·±ä¿®æ”¹çš„æ—¶å€™ä¸æ’åº\n                if (event.removedNodes.length > 0) return;\n            }\n            sortFolderList();\n        }\n\n        function clickSortButton(by, button) {\n            if (currentStatus.by === by) {\n                // å½“å‰é€‰é¡¹ï¼Œç‚¹å‡»æ—¶ï¼Œåè½¬æ’åº\n                currentStatus.order = button.textContent === 'â¬†' ? 'desc' : 'asc';\n            } else {\n                // éå½“å‰é€‰é¡¹ï¼Œç‚¹å‡»æ—¶ï¼Œä»¥å›¾æ ‡æ‰€ç¤ºçš„é¡ºåºæ’åº\n                currentStatus.order = button.textContent === 'â‡§' ? 'asc' : 'desc';\n                // ä¿®æ”¹éå½“å‰é€‰é¡¹æŒ‰é’®çš„å›¾æ ‡\n                for (const key in allButtons) {\n                    if (key === by) continue;\n                    if (Object.hasOwnProperty.call(allButtons, key)) {\n                        const btnItem = allButtons[key];\n                        if (btnItem.el.textContent === 'â¬†') {\n                            btnItem.el.textContent = 'â‡§';\n                        } else if (btnItem.el.textContent === 'â¬‡') {\n                            btnItem.el.textContent = 'â‡©';\n                        }\n                    }\n                }\n            }\n            button.textContent = currentStatus.order === 'asc' ? 'â¬†' : 'â¬‡';\n            currentStatus.by = by;\n            sortFileList();\n            sortFolderList();\n\n        }\n\n        // create buttons\n        setTimeout(() => {\n            if (allButtons === undefined && menu_value('menu_fileSort')) {\n                allButtons = createAllButtons();\n                // console.log(allButtons);\n                allButtons[currentStatus.by].el.textContent = currentStatus.order === 'asc' ? 'â¬†' : 'â¬‡';\n            }\n        }, 500);\n\n        // sort files\n        const fileList = frameDoc.querySelector('#filelist');\n        const fileObserver = new MutationObserver(fileListCallback);\n        fileObserver.observe(fileList, { childList: true, attributes: false });\n\n        // sort folders\n        const folderList = frameDoc.querySelector('#sub_folder_list');;\n        const folderObserver = new MutationObserver(folderListCallback);\n        folderObserver.observe(folderList, { childList: true, attributes: false });\n\n\n    }\n})();"
        },
        {
          "name": "Ping.Sx-Enhanced.user.js",
          "type": "blob",
          "size": 7.580078125,
          "content": "// ==UserScript==\n// @name         Ping.Sx å¢å¼º\n// @version      1.0.3\n// @author       X.I.U\n// @description  ä¸€é”®å¤åˆ¶æ‰€æœ‰ IPã€æ¸…ç† IP é“¾æ¥ï¼ˆç‚¹å‡»å¤åˆ¶è€Œä¸æ˜¯è·³è½¬ï¼‰ã€å¿«æ·å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n// @match        https://ping.sx/ping*\n// @match        https://ping.sx/dig*\n// @match        https://ping.sx/check-port*\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAD7klEQVR4nO3WWYxfcxQH8M9//LWzdJuWaVMaI6WKKtKOfacVGuHFgy3E8iARDyKWBBEJ8SC2Jy9EeKCSqpoiBJF22k6JbdBqqqilqe4z05ol0xkP5/zz/6dPY3iQuN/kl3vv755z7lm+5/wuBQoUKFCgQIECBQoU+L+iNAb5OpRzHY5xGI8D2PMPfKlDK+qxNe2NyqHa+4k4EkdgWq6paM41GZNSrilXQ16/wE3YN8YAjsKKtH0NNo5GqVxzP6Ia9QHsQmM63IAJuSZmIBPS8UZMwfcYGKPzMA/z8Sl+G61SbQDzcbkoXxmnp7GVeX8+hrEM36bOqamzMeWm4rq0tRefYD36MRsXCJqMYAPeR3faOltQshO9KXsW9uMtQdMLU7+E7/BRbTBPpeEe/Jn33ViKP/J5BOsEzeCZ3HtEcPcVDGIH+kRPLEnZJ1J2qOb6XCarPoM5iGtxI7annTszsMcO0R9M3xC0WJ0vlmYWO/N5G+7Go5nJ3ThF0GetoM0loko9mdk2XIr7RR9VMnxr7j+QtjahBcfjd+zES5m4Llym2qdn1ujfJ2g+WJcvW3EifsFDeE2VJi/jedFg/Wl8D47DXEG5DZmR/YIqD4vp9HQGPCODPg1Xir4ZTCf6cn+6oODN6fQ9+DCTOF3QsqLfVPM9cEsKLhMlnSSoMoBFKXNDyqwQI+/2fH4dh+Xe9fhaUKE3ZZrxdn5wdcr/kLovpu1n87lX9M4w7sh3zVie+h2pvznl36vLaM9J4bWCY7NxAn4WzQLn1sgM47x8XpPGFuf9ItEbE3Bx6l2Bz3F1BtVVo9sk6HEQD+KF9OmqTGab6KMvU/82fJX6H5cFBxeKxl2fL9oy8g9EMzXjDEGhdYLXCzNjnWJCvSro0iHoNSLOhv5MSivuzeQsSdnPBP/niqq8gTm4S/TMSZn5IRyT+q0Z3G6sqRMTZSfaVQ+PyWm8PbM9TZwL7VmRlgysXZSzC4+nzOJ8/6RoyHWCIt1Zne25144tgt+bxKjcjW/wJn7MRHSKiu5L/R2pvxIbS2KEjUvHh7Js48Xo6s3KlEXjDefqFw03oNpIpdSbkjK7BC1KqoddT8rX57s+1V+RQdWDsCG/Wdkr5/cGD9UviTlbOUxmZ4bGZRa3pbMV1Gd1urAgHdibH+zI/Rli/M0SFW0SvyZb8I6g1r+GsuBfC37CTNFYU9OZNtHg9aIfmvCrKOVMUeZ5YhwuF9meg2MzkJPFaF4lqNdolD9po0UJF4msNIlG6UiHN4vZXemBVeK3oXK4VUZnhQaz8K74KWsRFDo6ZRekva25/nOoE9T6u7/nBQoUKFCgQIECBQoUKDBm/AXKhRvkgr+Z+wAAAABJRU5ErkJggg==\n// @grant        GM_setClipboard\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        window.onurlchange\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://github.com/XIU2/UserScript\n// @supportURL   https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    // æ³¨å†Œè„šæœ¬èœå•\n    let menu_separator_ID;\n    if (GM_getValue('menu_separator') == null){GM_setValue('menu_separator', true)};\n    registerMenuCommand();\n    function registerMenuCommand() {\n        if (menu_separator_ID) GM_unregisterMenuCommand(menu_separator_ID);\n        menu_separator_ID = GM_registerMenuCommand(`ğŸ” å½“å‰å¤åˆ¶ IP åˆ†éš”æ–¹å¼ä¸ºï¼š${GM_getValue('menu_separator')?'[ä¸€è¡Œä¸€ä¸ª]':'[é€—å·åˆ†éš”]'}`, function(){GM_setValue('menu_separator', !GM_getValue('menu_separator'));registerMenuCommand();}, {title: 'ç‚¹å‡»å¯åˆ‡æ¢ï¼šå½“å‰å¤åˆ¶ IP çš„åˆ†éš”æ–¹å¼ä¸º [ä¸€è¡Œä¸€ä¸ª](é»˜è®¤) æˆ– [é€—å·åˆ†éš”]ï¼Œåˆ‡æ¢åç«‹å³ç”Ÿæ•ˆã€‚'})\n    }\n    // ç«™é•¿ä¹‹å®¶\n    // let ip = new Array(); document.querySelectorAll('[name=ip]>a').forEach(function(_this) {ip.push(_this.innerText);});console.log(Array.from(new Set(ip)).sort().toString().replaceAll(',','\\n'))\n\n    window.addEventListener('urlchange', function() {addCopyButton(); cleanLinks(); backToTop();});\n\n    setTimeout(addCopyButton, 2000); // æ·»åŠ å¤åˆ¶æŒ‰é’®\n    setTimeout(cleanLinks, 2000); //    æ¸…ç†é“¾æ¥ï¼ˆå¯ä»¥ç›´æ¥ç‚¹å‡»å¤åˆ¶å•ä¸ª IPï¼‰\n    setTimeout(backToTop, 2000); //     å¿«æ·å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n\n\n    // æ·»åŠ å¤åˆ¶æŒ‰é’®\n    function addCopyButton() {\n        if (document.querySelector('#copy_233, #copynocn_233')) return\n        // å¤åˆ¶å…¨éƒ¨\n        document.querySelector('header ul').insertAdjacentHTML('afterbegin', `<li><a title=\"å¤åˆ¶å½“å‰é¡µé¢ä¸‹çš„æ‰€æœ‰ IP åœ°å€åˆ°å‰ªåˆ‡æ¿\" class=\"text-gray-600 hover:text-gray-900 px-3 lg:px-5 py-2 flex items-center transition duration-150 ease-in-out\" href=\"javascript:void(0);\" title=\"ä¸€é”®å¤åˆ¶æ‰€æœ‰ IP\" id=\"copy_233\">Copy</a></li>`);\n        // å¤åˆ¶é CN çš„ IP\n        document.querySelector('header ul').insertAdjacentHTML('afterbegin', `<li><a title=\"å¤åˆ¶å½“å‰é¡µé¢ä¸‹çš„æ‰€æœ‰ IP åœ°å€ï¼ˆå›½å†…é™¤å¤–ï¼‰åˆ°å‰ªåˆ‡æ¿\" class=\"text-gray-600 hover:text-gray-900 px-3 lg:px-5 py-2 flex items-center transition duration-150 ease-in-out\" href=\"javascript:void(0);\" title=\"ä¸€é”®å¤åˆ¶é CN IP\" id=\"copynocn_233\">Copy<del><em>(Cn)</em></del></a></li>`);\n        document.getElementById('copy_233').addEventListener('click', addCopyButtonEvent1)\n        document.getElementById('copynocn_233').addEventListener('click', addCopyButtonEvent2)\n    }\n\n\n    // å¤åˆ¶æŒ‰é’®ç‚¹å‡»äº‹ä»¶\n    function addCopyButtonEvent1() {\n        let ip = new Array();\n        document.querySelectorAll('span.select-all > a[href]').forEach(function(_this) {ip.push(_this.innerText);})\n        if (ip.length > 0) {\n            if (GM_getValue('menu_separator')) {\n                GM_setClipboard(unique(ip).toString().replaceAll(',','\\n'), 'text');\n            } else {\n                GM_setClipboard(unique(ip).toString(), 'text');\n            }\n        }\n    }\n    function addCopyButtonEvent2() {\n        let ip = new Array();\n        document.querySelectorAll('span.select-all > a[href]').forEach(function(_this) {\n            let img = findParentElement(_this, 'TR').querySelector('img.max-w-none');\n            if (img) {if (img.alt != 'CN Flag') ip.push(_this.innerText);}\n        })\n        if (ip.length > 0) {\n            if (GM_getValue('menu_separator')) {\n                GM_setClipboard(unique(ip).toString().replaceAll(',','\\n'), 'text');\n            } else {\n                GM_setClipboard(unique(ip).toString(), 'text');\n            }\n        }\n    }\n\n\n    // æ¸…ç†é“¾æ¥ï¼ˆå¯ä»¥ç›´æ¥ç‚¹å‡»å¤åˆ¶å•ä¸ª IPï¼‰\n    function cleanLinks() {\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    if (target.tagName === 'TD' && target.className.indexOf('w-4/12') > -1) {\n                        target.querySelectorAll('span.select-all > a[href]').forEach(function(_this) {\n                            _this.href = 'javascript:void(0);';\n                            _this.target = '_self';\n                        })\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n\n    // å¿«æ·å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n    function backToTop() {\n        document.querySelector('section.relative').oncontextmenu = function(e){\n            if (e.target == this) {\n                e.preventDefault();\n                window.scrollTo(0,0);\n            }\n        }\n    }\n\n\n    // æ•°ç»„å»é‡å¤\n    function unique(arr) {\n        return Array.from(new Set(arr)).sort();\n    }\n\n\n    // å¯»æ‰¾çˆ¶å…ƒç´ \n    function findParentElement(item, tagName) {\n        if (item.parentElement) {\n            //console.log(item.parentElement)\n            if (item.parentElement.tagName === tagName) {\n                return item.parentElement;\n            } else {\n                let temp = findParentElement(item.parentElement, tagName)\n                if (temp) return temp\n            }\n        }\n        return\n    }\n\n\n    // è‡ªåŠ¨æ ¼å¼åŒ–è¾“å…¥æ¡†\n    /*document.getElementById('target').addEventListener('focusout', function(){\n        if (this.value) {\n            this.value = this.value.replace(/(http:\\/\\/|https:\\/\\/|\\:.+|\\/.*)/ig,\"\");\n            this.setAttribute('value',this.value);\n            this.dispatchEvent(new Event('input'));\n        }\n    }, true);*/\n})();"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 12.5810546875,
          "content": "# XIU2/UserScript\r\n\r\n[![GitHub license](https://img.shields.io/github/license/XIU2/UserScript.svg?style=flat-square&color=4285dd&logo=github)](https://github.com/XIU2/UserScript/)\r\n[![GitHub Star](https://img.shields.io/github/stars/XIU2/UserScript.svg?style=flat-square&label=Star&color=4285dd&logo=github)](https://github.com/XIU2/UserScript/)\r\n[![GitHub Fork](https://img.shields.io/github/forks/XIU2/UserScript.svg?style=flat-square&label=Fork&color=4285dd&logo=github)](https://github.com/XIU2/UserScript/)\r\n[![](https://data.jsdelivr.com/v1/package/gh/XIU2/UserScript/badge)](https://www.jsdelivr.com/package/gh/XIU2/UserScript)\r\n[![](https://img.shields.io/static/v1?label=%20&message=GreasyFork&style=flat-square&labelColor=7B0000&color=960000&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3ggEBCQHM3fXsAAAAVdJREFUOMudkz2qwkAUhc/goBaGJBgUtBCZyj0ILkpwAW7Bws4yO3AHLiCtEFD8KVREkoiFxZzX5A2KGfN4F04zMN+ce+5c4LMUgDmANYBnrnV+plBSi+FwyHq9TgA2LQpvCiEiABwMBtzv95RSfoNEHy8DYBzHrNVqVEr9BWKcqNFoxF6vx3a7zc1mYyC73a4MogBg7vs+z+czO50OW60Wt9stK5UKp9Mpj8cjq9WqDTBHnjAdxzGQZrPJw+HA31oulzbAWgLoA0CWZVBKIY5jzGYzdLtdE9DlcrFNrY98zobqOA6TJKHW2jg4nU5sNBpFDp6mhVe5rsvVasUwDHm9Xqm15u12o+/7Hy0gD8KatOd5vN/v1FozTVN6nkchxFuI6hsAAIMg4OPxMJCXdtTbR7JJCMEgCJhlGUlyPB4XfumozInrupxMJpRSRtZlKoNYl+m/6/wDuWAjtPfsQuwAAAAASUVORK5CYII=)](https://greasyfork.org/zh-CN/users/457025-x-i-u)\r\n\r\nğŸ”¨ è‡ªç”¨çš„ä¸€äº›ä¹±ä¸ƒå…«ç³Ÿæ²¹çŒ´è„šæœ¬ï¼Œ**æœ‰ä»€ä¹ˆéœ€æ±‚ã€å»ºè®®ã€é—®é¢˜ç›´æ¥æ [Issues](https://github.com/XIU2/UserScript/issues/new/choose)**ï¼Œè§‰å¾—**å¥½ç”¨è¯·ç‚¹ä¸ªâ­é¼“åŠ±ä¸€ä¸‹å­~**   \r\n\r\n> ä¹Ÿå¯ä»¥å‰å¾€ GreasyFork è„šæœ¬é¡µå‘æˆ‘åé¦ˆï¼Œå¦‚æœè¿™ä¸¤ä¸ªç½‘ç«™ä½ éƒ½æ²¡æœ‰è´¦å·ï¼Œå¯ä»¥æ‰¾ä¸ªä¸´æ—¶é‚®ç®±æ³¨å†Œä¸‹(ç”¨å®Œæ‰”~    \r\n\r\n> _åˆ†äº«æˆ‘å…¶ä»–å¼€æºé¡¹ç›®ï¼š[**TrackersList.com** - å…¨ç½‘çƒ­é—¨ BT Tracker åˆ—è¡¨ï¼æœ‰æ•ˆæé«˜ BT ä¸‹è½½é€Ÿåº¦~](https://github.com/XIU2/TrackersListCollection) <img src=\"https://img.shields.io/github/stars/XIU2/TrackersListCollection.svg?style=flat-square&label=Star&color=4285dd&logo=github\" height=\"16px\" />_  \r\n> _[**CloudflareSpeedTest** - ğŸŒ© æµ‹è¯• Cloudflare CDN å»¶è¿Ÿå’Œé€Ÿåº¦ï¼Œè·å–æœ€å¿« IP~](https://github.com/XIU2/CloudflareSpeedTest) <img src=\"https://img.shields.io/github/stars/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Star&color=4285dd&logo=github\" height=\"16px\" />_  \r\n\r\n## è„šæœ¬åˆ—è¡¨\r\n\r\n> _è¯¦ç»†çš„**è„šæœ¬ä»‹ç»ã€ä½¿ç”¨è¯´æ˜ã€æˆªå›¾æ¼”ç¤º**ç­‰ä¿¡æ¯ï¼Œè¯·ç‚¹å‡» **\\[å®‰è£…\\]** å‰å¾€ GreasyFork æŸ¥çœ‹~_  \r\n\r\n|  | è„šæœ¬åç§° | è„šæœ¬åŠŸèƒ½ | å®‰è£… \\| å¤‡ç”¨ |\r\n| :----: | :---- | :---- | :----: |\r\n| [<img src=\"https://avatars.githubusercontent.com/u/54703944?s=16&v=4\" height=\"16px\" />](https://github.com/XIU2) | **æŠ¤çœ¼æ¨¡å¼** | ç®€å•æœ‰æ•ˆçš„å…¨ç½‘é€šç”¨æŠ¤çœ¼æ¨¡å¼ã€å¤œé—´æ¨¡å¼ã€æš—é»‘æ¨¡å¼~ | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/426377)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/DarkMode.user.js)** |\r\n| [<img src=\"https://static.zhihu.com/heifetz/favicon.ico\" height=\"16px\" />](https://www.zhihu.com/people/xiu2) | **çŸ¥ä¹ ç¾åŒ–** | å®½å±æ˜¾ç¤ºã€**æš—é»‘æ¨¡å¼**ã€**å±è”½é¦–é¡µæ´»åŠ¨**ã€è°ƒæ•´å›¾ç‰‡æœ€å¤§é«˜åº¦... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/412212)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/Zhihu-Beautification.user.js)** |\r\n| [<img src=\"https://static.zhihu.com/heifetz/favicon.ico\" height=\"16px\" />](https://www.zhihu.com/people/xiu2) | **çŸ¥ä¹ å¢å¼º** | **ç§»é™¤ç™»å½•å¼¹çª—**ã€**å±è”½é¦–é¡µè§†é¢‘**ã€å±è”½ç”¨æˆ·ã€å±è”½å…³é”®è¯... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/419081)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/Zhihu-Enhanced.user.js)** |\r\n| [<img src=\"https://www.v2ex.com/static/favicon.ico\" height=\"16px\" />](https://www.v2ex.com/) | **V2EX å¢å¼º** | **è‡ªåŠ¨ç­¾åˆ°**ã€é“¾æ¥è½¬å›¾ç‰‡ã€è‡ªåŠ¨æ— ç¼ç¿»é¡µã€æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/424246)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/V2ex-Enhanced.user.js)** |\r\n| [<img src=\"https://i.loli.net/2021/03/30/ULV9XunaHesqGIR.png\" height=\"16px\" />](https://github.com/XIU2) |  **Github å¢å¼º** | **é«˜é€Ÿä¸‹è½½** Git Clone/SSHã€Releaseã€Rawã€Code(ZIP) ... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/412245)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/GithubEnhanced-High-Speed-Download.user.js)** |\r\n| [<img src=\"https://ping.sx/favicon.ico\" height=\"16px\" />](https://ping.sx/ping) |  **Ping.Sx å¢å¼º** | **ä¸€é”®å¤åˆ¶æ‰€æœ‰ IP**ã€æ¸…ç† IP é“¾æ¥ã€å¿«æ·å›åˆ°é¡¶éƒ¨ ... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/438704)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/Ping.Sx-Enhanced.user.js)** |\r\n| [<img src=\"https://avatars.githubusercontent.com/u/54703944?s=16&v=4\" height=\"16px\" />](https://github.com/XIU2) |  **è‡ªåŠ¨æ— ç¼ç¿»é¡µ \\*** | æ— ç¼è¡”æ¥ä¸‹ä¸€é¡µå†…å®¹ **(ç€‘å¸ƒæµ)** æ”¯æŒå„è®ºå›/æ¼«ç”»/ç™¾åº¦/è°·æ­Œç­‰... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/419215)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/Autopage.user.js)** |\r\n| [<img src=\"https://www.3dmgame.com/favicon.ico\" height=\"16px\" />](https://bbs.3dmgame.com) | **3DMè®ºå› ç¾åŒ–** | ç²¾ç®€å¤šä½™å†…å®¹ã€æ ·å¼ä¼˜åŒ– | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/413593)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/3dm-Beautification.user.js)** |\r\n| [<img src=\"https://www.3dmgame.com/favicon.ico\" height=\"16px\" />](https://bbs.3dmgame.com) | **3DMè®ºå› å¢å¼º** | **è‡ªåŠ¨å›å¤**ã€è‡ªåŠ¨æ— ç¼ç¿»é¡µã€æ¸…ç†ç½®é¡¶å¸–å­ã€è‡ªåŠ¨æ»šè‡³éšè—... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/412890)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/3dm-Enhanced.user.js)** |\r\n| [<img src=\"https://www.lanzou.com/favicon.ico\" height=\"16px\" />](https://www.lanzou.com) |  **è“å¥äº‘ç½‘ç›˜ å¢å¼º \\*** | **æ–‡ä»¶æ’åºã€å³é”®æ˜¾ç¤ºèœå•**ã€ç›´æ¥ä¸‹è½½æ–‡ä»¶ã€æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/419224)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/Lanzou-Enhanced.user.js)** |\r\n| [<img src=\"https://duckduckgo.com/favicon.ico\" height=\"16px\" />](https://duckduckgo.com) | **DuckDuckGo å¢å¼º** | **å±è”½æŒ‡å®šåŸŸå**ã€ä¿®å¤å›¾æ ‡åŠ è½½ã€é“¾æ¥ä¸æºæ¥æºã€å¿«æ·å›åˆ°... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/436428)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/DuckDuckGo-Enhanced.user.js)** |\r\n| [<img src=\"https://www.52pojie.cn/favicon.ico\" height=\"16px\" />](https://www.52pojie.cn) | **å¾çˆ±ç ´è§£è®ºå› ç¾åŒ–** | ç²¾ç®€å¤šä½™å†…å®¹ã€æ ·å¼ä¼˜åŒ– | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/412681)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/52pojie-Beautification.user.js)** |\r\n| [<img src=\"https://www.52pojie.cn/favicon.ico\" height=\"16px\" />](https://www.52pojie.cn) | **å¾çˆ±ç ´è§£è®ºå› å¢å¼º** | **è‡ªåŠ¨ç­¾åˆ°**ã€è‡ªåŠ¨æ— ç¼ç¿»é¡µã€å±è”½å¯¼è¯»æ‚¬èµè´´ (æœ€æ–°å‘è¡¨é¡µ)... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/412680)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/52pojie-Enhanced.user.js)** |\r\n| [<img src=\"https://i.loli.net/2021/03/30/tvOSNCmi4rIH3Ju.png\" height=\"16px\" />](https://hostloc.com) | **å…¨çƒä¸»æœºäº¤æµè®ºå› å¢å¼º \\*** | **è‡ªåŠ¨è®¿é—®ç©ºé—´(22ç§¯åˆ†)ã€å±è”½ç”¨æˆ·**ã€å±è”½å…³é”®è¯ã€è‡ªåŠ¨ç¿»... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/414005)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/Hostloc-Enhanced.user.js)** |\r\n| [<img src=\"https://store.steampowered.com/favicon.ico\" height=\"16px\" />](https://store.steampowered.com) | **Steam åˆ›æ„å·¥åŠå¤§å›¾ ä¿®å¤** | ä¿®å¤ Steam åˆ›æ„å·¥åŠé¢„è§ˆå¤§å›¾æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜ | **[å®‰è£…](https://bitbucket.org/xiu2/userscript/raw/master/SteamWorkshopImageRepair.user.js)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/SteamWorkshopImageRepair.user.js)** |\r\n| [<img src=\"https://avatars.githubusercontent.com/u/54703944?s=16&v=4\" height=\"16px\" />](https://github.com/XIU2) | **HTML5 è§†é¢‘éŸ³é¢‘é»˜è®¤éŸ³é‡** | é¿å…è¢« 100% éŸ³é‡**å“ä¸€è·³**ï¼ä¸”æ”¯æŒå„ç½‘ç«™åˆ†åˆ«è®°ä½éŸ³é‡... | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/438400)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/HTML5Volume.user.js)** |\r\n| [<img src=\"https://avatars.githubusercontent.com/u/54703944?s=16&v=4\" height=\"16px\" />](https://github.com/XIU2) | **å³é”®æ»šåŠ¨æ¡å›åˆ°é¡¶éƒ¨** | é¼ æ ‡**å³é”®**ç½‘é¡µå³ä¾§çš„**æ»šåŠ¨æ¡**å³å¯**å›åˆ°é¡¶éƒ¨** | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/506959)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/RightClick_ScrollBar_BackToTop.user.js)** |\r\n| [<img src=\"https://avatars.githubusercontent.com/u/54703944?s=16&v=4\" height=\"16px\" />](https://github.com/XIU2) | **æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥ \\*** | å°†ç½‘é¡µä¸­æ‰€æœ‰é“¾æ¥æ”¹ä¸º**æ–°æ ‡ç­¾é¡µæ‰“å¼€**ï¼ˆå¯èƒ½å­˜åœ¨å…¼å®¹é—®é¢˜ | **[å®‰è£…](https://greasyfork.org/zh-CN/scripts/429714)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/TargetBlank.user.js)** |\r\n| [<img src=\"https://translate.google.cn/favicon.ico\" height=\"16px\" />](https://translate.google.cn) |  ~~_**Google ç¿»è¯‘ ç¾åŒ–**_~~ | ~~_ç²¾ç®€å¤šä½™å†…å®¹ã€ä¿®å¤ç¿»è¯‘ç»“æœæº¢å‡ºå±å¹•é—®é¢˜_~~ | ~~_**[å®‰è£…](https://zhuanlan.zhihu.com/p/286815739)** \\| **[å¤‡ç”¨](https://zhuanlan.zhihu.com/p/286815739)**_~~ |\r\n| [<img src=\"http://bbs.zhiyoo.net/favicon.ico\" height=\"16px\" />](http://bbs.zhiyoo.net/forum.php?mod=forumdisplay&fid=42&filter=author&orderby=dateline) | ~~_**æ™ºå‹é‚¦è®ºå› ç¾åŒ–**_~~ | ~~_ç²¾ç®€å¤šä½™å†…å®¹ã€æ ·å¼ä¼˜åŒ–ã€å®½å±æ˜¾ç¤º_~~ | ~~_**[å®‰è£…](https://greasyfork.org/zh-CN/scripts/412361)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/Zhiyoo-Beautification.user.js)**_~~ |\r\n| [<img src=\"http://bbs.zhiyoo.net/favicon.ico\" height=\"16px\" />](http://bbs.zhiyoo.net/forum.php?mod=forumdisplay&fid=42&filter=author&orderby=dateline) | ~~_**æ™ºå‹é‚¦è®ºå› å¢å¼º**_~~ | ~~_è‡ªåŠ¨ç­¾åˆ°ã€**è‡ªåŠ¨å›å¤**ã€è‡ªåŠ¨æ— ç¼ç¿»é¡µã€å¿«æ·å›åˆ°é¡¶éƒ¨ã€é™„..._~~ | ~~_**[å®‰è£…](https://greasyfork.org/zh-CN/scripts/412362)** \\| **[å¤‡ç”¨](https://bitbucket.org/xiu2/userscript/raw/master/Zhiyoo-Enhanced.user.js)**_~~ |\r\n\r\n> [!TIP]\r\n> _è„šæœ¬åç§°æœ«å°¾ **`*`** ä»£è¡¨è¯¥è„šæœ¬ä¸º**ç½‘å‹ä¸»åŠ¨æå‡ºéœ€æ±‚**è€Œå†™çš„ï¼Œä¸è¿‡ç°åœ¨å·²ä¸å†æ¥å—æ–°è„šæœ¬è¯·æ±‚äº†ã€‚ã€‚ã€‚_  \r\n> _æ‰€æœ‰è„šæœ¬å‡åœ¨ **Chromeã€Firefoxã€Edge æµè§ˆå™¨ + Tampermonkey æ‰©å±•** ç¯å¢ƒä¸‹æµ‹è¯•é€šè¿‡ï¼_\r\n\r\n****\r\n\r\n## å¦‚ä½•å®‰è£…/ä½¿ç”¨è„šæœ¬ï¼Ÿ\r\n\r\nè¦ä½¿ç”¨ä»»ä½•è„šæœ¬ï¼Œé¦–å…ˆéœ€è¦æµè§ˆå™¨å®‰è£… **Tampermonkey  è„šæœ¬ç®¡ç†å™¨æ‰©å±•ï¼ˆ[Chrome](https://pan.lanpw.com/b073l8d1e)** / **[Firefox](https://addons.mozilla.org/firefox/addon/tampermonkey/)** / **[Edge](https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd?hl=zh-CN)ï¼‰ã€‚**  \r\n\r\n- ç‚¹å‡»è¡¨æ ¼ **\\[å®‰è£…\\]** è¿›å…¥ GreasyFork ç½‘é¡µï¼Œç‚¹å‡» **\\[å®‰è£…è„šæœ¬\\]** åå¼¹å‡ºæ‰©å±•æç¤ºï¼Œå†ç‚¹å‡» **\\[å®‰è£…\\]** å³å¯ã€‚  \r\n- å¦‚æœ GreasyFork è®¿é—®é€Ÿåº¦å¤ªæ…¢ï¼Œå¯ä»¥é€‰æ‹©ç‚¹å‡» **\\[å¤‡ç”¨\\]** åå¼¹å‡ºæ‰©å±•æç¤ºï¼Œå†å»ç‚¹å‡» **\\[å®‰è£…\\]** å³å¯ã€‚\r\n\r\n> [!IMPORTANT]\r\n> - _å…¶ä»–åŸºäº **Chromium** å†…æ ¸çš„æµè§ˆå™¨ï¼ˆå¦‚å›½å†…å¥—çš®æµè§ˆå™¨ï¼‰ä¸€èˆ¬éƒ½å¯ä»¥ä½¿ç”¨ Chrome æ‰©å±•ã€‚_  \r\n> - _è¯·ç¡®ä¿ä½¿ç”¨ **Tampermonkey æ­£å¼ç‰ˆ** æ‰©å±•ï¼Œå…¶ä»–çš„ç”¨æˆ·è„šæœ¬ç®¡ç†å™¨å¯èƒ½å¯¼è‡´**æ— æ³•æ­£å¸¸ä½¿ç”¨**è„šæœ¬ã€‚_  \r\n> - _å¦‚æœè¦é‡è£…è„šæœ¬ï¼Œè¯·è®°å¾—åœ¨ Tampermonkey æ‰©å±•çš„**å›æ”¶ç«™ä¸­å½»åº•åˆ é™¤**è„šæœ¬åå†å»é‡æ–°å®‰è£…è„šæœ¬ã€‚_  \r\n\r\n> _**ä¸ä¼šç¦»çº¿å®‰è£… .crx æ‰©å±•ï¼Ÿ[Chromeã€Edge é‡æ–°å¼€å¯éšè—çš„ [æ‹–å…¥å®‰è£… .crx æ‰©å±•] åŠŸèƒ½ï¼](https://zhuanlan.zhihu.com/p/276027099)**_  \r\n\r\n****\r\n\r\n## Tampermonkey `v5.0.0` åè„šæœ¬åœ¨ `éƒ¨åˆ†ç½‘ç«™` æ— æ³•æ­£å¸¸è¿è¡Œï¼Ÿ\r\n\r\nTampermonkey ä¸ºäº†é¡ºåº” Chrome çš„ Manifest V3 è¦æ±‚ï¼Œåœ¨ v5.0.0 ç‰ˆæœ¬ä¸­ä¿®æ”¹äº† CSP ç›¸å…³é€‰é¡¹çš„é»˜è®¤å€¼ã€‚\r\n\r\nä½ åªéœ€è¦å» Tampermonkey è®¾ç½®ä¸­ï¼Œå…ˆæŠŠæœ€é¡¶ç«¯çš„ç¬¬ä¸€ä¸ªé€‰é¡¹ `é…ç½®æ¨¡å¼:` é»˜è®¤çš„ `æ–°æ‰‹` æ”¹ä¸º `é«˜çº§`ã€‚  \r\nç„¶åç¿»åˆ°ä¸‹é¢çš„ `å®‰å…¨` é€‰é¡¹åŒºåŸŸï¼Œæ‰¾åˆ° `ä¿®æ”¹å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰å¤´ä¿¡æ¯:` æŠŠé»˜è®¤çš„ `è‡ªåŠ¨` æ”¹ä¸º **`å…¨éƒ¨ç§»é™¤`** å¹¶ç‚¹å‡»ä¸‹é¢ä¸€ç‚¹çš„ `ä¿å­˜` æŒ‰é’®å³å¯è§£å†³ã€‚\r\n\r\n****\r\n\r\n## Tampermonkey `v5.2.0` åè„šæœ¬æ— æ³•æ­£å¸¸è¿è¡Œï¼Ÿ\r\n\r\nå› ä¸ºå…¶ v5.2.0 ç‰ˆæœ¬è½¬ä¸ºäº† Manifest V3ï¼Œæ‰€ä»¥éœ€è¦åœ¨æµè§ˆå™¨çš„**æ‰©å±•ç®¡ç†**ç•Œé¢**å¯ç”¨ `å¼€å‘è€…æ¨¡å¼`** æ‰èƒ½æ­£å¸¸è¿è¡Œè„šæœ¬ï¼\r\n\r\n****\r\n\r\n## å¦‚æœè„šæœ¬å¸®åˆ°ä½ çš„è¯å°± \"æ‰“èµ\" ä¸€ä¸‹å§~ğŸ‰âœ¨\r\n\r\n![å¾®ä¿¡èµèµ](https://github.com/XIU2/XIU2/blob/master/img/zs-01.png)![æ”¯ä»˜å®èµèµ](https://github.com/XIU2/XIU2/blob/master/img/zs-02.png)\r\n\r\n****\r\n\r\n## License\r\n\r\nThe GPL-3.0 License."
        },
        {
          "name": "RightClick_ScrollBar_BackToTop.user.js",
          "type": "blob",
          "size": 7.0751953125,
          "content": "// ==UserScript==\n// @name         Right click scroll bar back to top\n// @name:zh-CN   å³é”®æ»šåŠ¨æ¡å›åˆ°é¡¶éƒ¨\n// @name:zh-TW   å³éµæ»¾å‹•æ¢å›åˆ°é ‚éƒ¨\n// @name:en      Right click scroll bar back to top\n// @version      1.0.0\n// @author       X.I.U\n// @description  Right-click the scroll bar on the right side of the webpage to return to the top\n// @description:zh-CN  é¼ æ ‡å³é”®ç½‘é¡µå³ä¾§çš„æ»šåŠ¨æ¡å³å¯å›åˆ°é¡¶éƒ¨\n// @description:zh-TW  é¼ æ¨™å³éµç¶²é å³å´çš„æ»¾å‹•æ¢å³å¯å›åˆ°é ‚éƒ¨\n// @description:en  Right-click the scroll bar on the right side of the webpage to return to the top\n// @match        *://*/*\n// @icon         data:image/png;base64,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\n// @grant        none\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    // è·å–ç½‘é¡µå³ä¾§æ»šåŠ¨æ¡å®½åº¦ï¼ˆå¦‚æœè·å–ä¸åˆ°å°±é»˜è®¤ 15ï¼‰\n    const scrollBarWidth = getScrollBarWidth() || 15\n    document.addEventListener('contextmenu', function(e) {\n        // æ£€æŸ¥å³é”®ç‚¹å‡»çš„ä½ç½®æ˜¯å¦åœ¨æ»šåŠ¨æ¡åŒºåŸŸï¼ˆé¼ æ ‡å³é”®ç‚¹å‡»ä½ç½®çš„æ°´å¹³åæ ‡å€¼ å¤§äº ç½‘é¡µå®½åº¦ - æ»šåŠ¨æ¡å®½åº¦ - 10çš„å†—ä½™ï¼‰\n        const isScrollbar = e.clientX > window.innerWidth - scrollBarWidth - 10;\n        if (isScrollbar) {\n            // å¦‚æœå³é”®ç‚¹å‡»åˆ°çš„å…ƒç´ æ˜¯ HTMLï¼Œè¯´æ˜ç¡®å®šæ˜¯ç‚¹åˆ°äº†æ»šåŠ¨æ¡ä¸Šé¢ï¼ˆç‚¹å‡»äº‹ä»¶ä¼šè¢«æµè§ˆå™¨é€è¿‡æ»šåŠ¨æ¡å“åº”ç»™ç½‘é¡µæœ€æ ¹éƒ¨çš„ HTMLï¼‰\n            if (e.target.tagName === 'HTML') {\n                window.scrollTo(0,0);\n            } else if (e.target.tagName !== 'BODY') { // å¦‚æœå³é”®ç‚¹å‡»åˆ°çš„æ—¢ä¸æ˜¯ HTMLï¼Œä¹Ÿä¸æ˜¯ BODYï¼ˆå› ä¸ºå³é”®å•å‡»æ»šåŠ¨æ¡å·¦ä¾§åŒºåŸŸåŸºæœ¬ä¸Šéƒ½æ˜¯ BODY è¿™ä¸ªèƒŒæ™¯å…ƒç´ ï¼‰ï¼Œé‚£ä¹ˆå¯èƒ½æ˜¯ç‚¹å‡»åˆ°äº†ç½‘é¡µå†…åµŒå¥—å…ƒç´ çš„æ»šåŠ¨æ¡ï¼Œé‚£ä¹ˆå°±åªéœ€è¦è¿™ä¸ªå…ƒç´ å›åˆ°é¡¶éƒ¨å³å¯\n                e.target.scrollTo(0,0);\n            }\n            e.preventDefault(); // é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼ˆå³å¼¹å‡ºå³é”®èœå•ï¼‰\n            e.stopPropagation(); // åœæ­¢ç»§ç»­å‘ä¸Šå†’æ³¡ï¼ˆå³å‘ä¸Šä¼ æ’­è§¦å‘å…¶ä»–çš„å§”æ‰˜ç‚¹å‡»äº‹ä»¶ï¼‰\n        }\n    });\n\n    // è·å–ç½‘é¡µå³ä¾§æ»šåŠ¨æ¡å®½åº¦\n    function getScrollBarWidth() {\n        // åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ div å…ƒç´ \n        const div = document.createElement('div');\n        div.style.overflow = 'scroll'; // å¼ºåˆ¶å‡ºç°æ»šåŠ¨æ¡\n        div.style.visibility = 'hidden'; // ä¸è¦æ˜¾ç¤ºå‡ºæ¥\n        //div.style.msOverflowStyle = 'scrollbar'; // needed for WinJS apps?\n        div.style.width = '100px'; // è®¾ç½®å®½åº¦\n        div.style.height = '100px'; // è®¾ç½®é«˜åº¦\n        document.body.appendChild(div); // å°† div æ·»åŠ åˆ°æ–‡æ¡£\n\n        // åˆ›å»ºä¸€ä¸ªå†…åµŒçš„ div\n        const innerDiv = document.createElement('div');\n        innerDiv.style.width = '100%'; // è®¾ç½®å®½åº¦ä¸º 100%\n        innerDiv.style.height = '100%'; // è®¾ç½®é«˜åº¦ä¸º 100%\n        div.appendChild(innerDiv); // å°†å†…åµŒ div æ·»åŠ åˆ°å¤–éƒ¨ div\n\n        // è®¡ç®—æ»šåŠ¨æ¡å®½åº¦\n        const scrollBarWidth = div.offsetWidth - innerDiv.offsetWidth;\n\n        // ç§»é™¤ä¸´æ—¶ div\n        div.parentNode.removeChild(div);\n\n        return scrollBarWidth; // è¿”å›æ»šåŠ¨æ¡å®½åº¦\n    }\n})();"
        },
        {
          "name": "SteamWorkshopImageRepair.user.js",
          "type": "blob",
          "size": 4.724609375,
          "content": "// ==UserScript==\n// @name         Steam åˆ›æ„å·¥åŠå¤§å›¾ä¿®å¤\n// @version      1.0.0\n// @author       X.I.U\n// @description  ä¿®å¤ Steam åˆ›æ„å·¥åŠé¢„è§ˆå¤§å›¾æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜ï¼ˆSteam ä¸æ”¹çš„è¯ï¼Œé•¿æœŸå¯ç”¨ï¼‰\n// @match        *://steamcommunity.com/sharedfiles/filedetails/*\n// @match        *://steamcommunity.com/workshop/filedetails/*\n// @icon         data:image/png;base64,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\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://github.com/XIU2/UserScript\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\nif(typeof onYouTubeIframeAPIReady == 'function') {\n    onYouTubeIframeAPIReady();\n}"
        },
        {
          "name": "TargetBlank.user.js",
          "type": "blob",
          "size": 7.185546875,
          "content": "// ==UserScript==\n// @name         æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥\n// @version      1.0.9\n// @author       X.I.U\n// @description  å°†ç½‘é¡µä¸­æ‰€æœ‰é“¾æ¥æ”¹ä¸ºæ–°æ ‡ç­¾é¡µæ‰“å¼€~\n// @match        *://*/*\n// @icon         data:image/png;base64,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\n// @grant        none\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://github.com/XIU2/UserScript\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// @exclude      https://accounts.google.com/*\n// @exclude      https://accounts.google.com.hk/*\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    targetBlank(); //  ä¿®æ”¹ä¸ºæ–°æ ‡ç­¾é¡µæ‰“å¼€\n    targetDiscuz(); // é’ˆå¯¹ Discuz! è®ºå›çš„å¸–å­\n    aObserver(); //    é’ˆå¯¹åŠ¨æ€åŠ è½½å†…å®¹ä¸­çš„ a æ ‡ç­¾\n\n\n    // ä¿®æ”¹ä¸ºæ–°æ ‡ç­¾é¡µæ‰“å¼€\n    function targetBlank() {\n        document.head.appendChild(document.createElement('base')).target = '_blank'; // è®©æ‰€æœ‰é“¾æ¥é»˜è®¤ä»¥æ–°æ ‡ç­¾é¡µæ‰“å¼€\n        Array.from(document.links).forEach(function (_this) { // æ’é™¤ç‰¹æ®Šé“¾æ¥\n            if (_this.onclick || _this.href.slice(0,4) != 'http' || _this.getAttribute('href').slice(0,1) === '#') {\n                _this.target = '_self'\n            }\n        })\n        document.querySelectorAll('form').forEach(function (_this) { // æ’é™¤ form æ ‡ç­¾\n            if (!_this.target) {_this.target = '_self'}\n        });\n    }\n\n\n    // é’ˆå¯¹ Discuz! è®ºå›çš„å¸–å­\n    function targetDiscuz() {\n        if (document.querySelector('meta[name=\"author\"][content*=\"Discuz!\"], meta[name=\"generator\"][content*=\"Discuz!\"]') || document.querySelector('body[id=\"nv_forum\"][class^=\"pg_\"][onkeydown*=\"27\"]') || document.querySelector('body[id=\"nv_search\"][onkeydown*=\"27\"]') || (document.querySelector('a[href*=\"www.discuz.net\"]') && document.querySelector('a[href*=\"www.discuz.net\"]').textContent.indexOf('Discuz!') > -1) || (document.getElementById('ft') && document.getElementById('ft').textContent.indexOf('Discuz!') > -1)) {\n            let atarget = document.getElementById('atarget');\n            if (atarget && atarget.className.indexOf('atarget_1') === -1) { // å¼ºåˆ¶å‹¾é€‰ [æ–°çª—]\n                atarget.click();\n            }\n        }\n    }\n\n\n    // é’ˆå¯¹åŠ¨æ€åŠ è½½å†…å®¹ä¸­çš„ a æ ‡ç­¾\n    function aObserver() {\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    if (target.tagName === 'A') {\n                        if (target.onclick || target.href.slice(0,4) != 'http' || target.getAttribute('href').slice(0,1) === '#') {\n                            target.target = '_self'\n                        }\n                    } else {\n                        document.querySelectorAll('a').forEach(function (_this) {\n                            if (_this.onclick || _this.href.slice(0,4) != 'http' || _this.getAttribute('href').slice(0,1) === '#') {\n                                _this.target = '_self'\n                            }\n                        });\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n})();"
        },
        {
          "name": "V2ex-Enhanced.user.js",
          "type": "blob",
          "size": 30.337890625,
          "content": "// ==UserScript==\n// @name         V2EX å¢å¼º\n// @version      1.2.2\n// @author       X.I.U\n// @description  è‡ªåŠ¨ç­¾åˆ°ã€é“¾æ¥è½¬å›¾ç‰‡ã€è‡ªåŠ¨æ— ç¼ç¿»é¡µã€ä½¿ç”¨ SOV2EX æœç´¢ã€å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ç‚¹å‡»ä¸¤ä¾§ç©ºç™½å¤„ï¼‰ã€å¿«é€Ÿå›å¤ï¼ˆå·¦é”®åŒå‡»ä¸¤ä¾§ç©ºç™½å¤„ï¼‰ã€æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥ã€æ ‡ç­¾é¡µä¼ªè£…ä¸º Githubï¼ˆæ‘¸é±¼ï¼‰\n// @match        *://v2ex.com/*\n// @match        *://*.v2ex.com/*\n// @match        *://www.sov2ex.com/*\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAACoAIABAAAAAEAAAAgoAMABAAAAAEAAAAgAAAAAI9OQMkAAARKSURBVHicrVe7SzNLFP/t7CObbEg0WliJooUxcAsfYKFW2lh8NhdLwUIsbMTCBG3EIoid4J/xNd9t7ZSAIiJcNaSIYBcbNVlMsq/M3MK762YziVE8EGbYOTnnd55zRsD/xBiT7+/vf+u6vlir1VTLskApFfADRAhhiqIgEokYsVjsNJVK/S0Igg0AAgAUCoW/np+fr15fX5WfUPgZ9fT0WP39/dNjY2P/SowxOZfLXZXLZUVRFIyPjyORSCAUCkEQmh3AGIMgCGCMAYC3D/IFiVIKy7Lw8vKCfD6PcrmsALhijEWFu7u7P4+Pj78URcHMzAyi0WjXCoPnQeLxV6tVXFxcwLIsDA0N/UN0XV8EgGQyCU3TQClFo9FAo9EAY8xb/Xv33OWllIJSCsaYt/L4GWPQNA3JZBIAoOv6olSr1VQASCQS3h/9FgWtC54FPcDbB2UkEgkAQK1WUyXLsgAAiqK0MFNKIQgCKKVcl3ajMChPFEXIsgwAsCwLkltq/jh1K/C7RAhxAQmSX3DQwo2NDZydnbWcu4D9vKFQCNvb21hdXfUU8ZIwaIQHwD3w50Aul/PQflZyjuPg6OgIoVAIKysrbRUGc6wFgH8lhLRV2K4Es9ksotEolpaWuuobTSEAPhIPACSpCV/XtL+/D03TMD8/3ySP5xHiB+BnYIxBFEUQQkAI8faiKHJ/fh7GGPb29nB9fd0kryOAIBAXgCRJkCQJhBBv5QGSJKmJ33EcpNNp5PP5JpnBkHXMgcvLy65cXiqVsLm5iaenp6bvpmkinU7j+PgYw8PD3BJuCgEAr+kEAXXqCQMDAzg5OUFfX19LaN7e3pDJZGDbNtcLXA+4ICzL6nj5uHu3WtwwBIn3rQVAJws/6/WlUgmZTAa6rnvKXHDxeByHh4cghHgXFRcAT8Hy8nLXVy/P0nA4jGw2i8HBQTiO09kDfgD+PvDdWUCWZRwcHGB0dBTuhcczkhsCfyfslvwACSHY3d1FKpXy8oinvAlAEATw7tLPEjB4DgBbW1uYnJyEYRhfb8V+hJ0AtPPA+vo6ZmdnYZpmizy3urruhFNTU17n83dDf9dz6z0cDmNtbQ0LCwswDKNpNON1QK4Hgi7a2dnh/qkdMcZgmmbbCYo7DxBCGKVU4CWh/ybjCQwqNwyD2zWDSdhoNAC8P1gkWZZhmiYsy4KiKCCEeAz1ev1LpfdZqYqiCMaY1xNkWQZRVdUAgHK5/PHxY2bzVv/eb43fa/7RPMhPCPGGUVeXqqqGFI1GTyuVyq9isQhN0xCJRBAKhbqy8KvE2PvDpFgsAgA0TTsVGGPy+fn5m67riizLGBkZQTweh6Io31YUJEopbNtGpVLBw8MDbNtGLBaz5ubmopIgCPbt7e00gCtd15VCofAjSjtRLBazent7pwVBsD0TGWPyzc3N72q1uliv11XHcX70eS7LMlRVNSKRyOnExIT3PP8P91unlxYYZf4AAAAASUVORK5CYII=\n// @grant        GM_xmlhttpRequest\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://github.com/XIU2/UserScript\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ALL = [\n        ['menu_autoClockIn', 'è‡ªåŠ¨ç­¾åˆ°', 'è‡ªåŠ¨ç­¾åˆ°', true],\n        ['menu_linksToImgs', 'é“¾æ¥è½¬å›¾ç‰‡', 'é“¾æ¥è½¬å›¾ç‰‡', true],\n        ['menu_pageLoading', 'è‡ªåŠ¨æ— ç¼ç¿»é¡µ', 'è‡ªåŠ¨æ— ç¼ç¿»é¡µ', true],\n        ['menu_pageLoading_reply', 'å¸–å­å†…è‡ªåŠ¨ç¿»é¡µ', 'å¸–å­å†…è‡ªåŠ¨ç¿»é¡µ', false],\n        ['menu_backToTop', 'å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ç‚¹å‡»ä¸¤ä¾§ç©ºç™½å¤„ï¼‰', 'å›åˆ°é¡¶éƒ¨', true],\n        ['menu_quickReply', 'å¿«é€Ÿå›å¤ï¼ˆå·¦é”®åŒå‡»ä¸¤ä¾§ç©ºç™½å¤„ï¼‰', 'å¿«é€Ÿå›å¤', true],\n        ['menu_linksBlank', 'æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥', 'æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥', true],\n        ['menu_sov2ex', 'ä½¿ç”¨ SOV2EX æœç´¢', 'ä½¿ç”¨ SOV2EX æœç´¢', false],\n        ['menu_fish', 'æ ‡ç­¾é¡µä¼ªè£…ä¸º Githubï¼ˆæ‘¸é±¼ï¼‰', 'æ ‡ç­¾é¡µä¼ªè£…ä¸º Github', false]\n    ], menu_ID = [], pausePage = true;\n    for (let i=0;i<menu_ALL.length;i++){ // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n        if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};\n    }\n\n    registerMenuCommand();\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (menu_ID.length > menu_ALL.length){ // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n            for (let i=0;i<menu_ID.length;i++){\n                GM_unregisterMenuCommand(menu_ID[i]);\n            }\n        }\n        for (let i=0;i<menu_ALL.length;i++){ // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n            menu_ALL[i][3] = GM_getValue(menu_ALL[i][0]);\n            menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n        }\n        menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/424246/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status == 'true'){\n            GM_setValue(`${Name}`, false);\n            GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }else{\n            GM_setValue(`${Name}`, true);\n            GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n    // è¿”å›èœå•å€¼\n    function menu_value(menuName) {\n        for (let menu of menu_ALL) {\n            if (menu[0] == menuName) {\n                return menu[3]\n            }\n        }\n    }\n\n\n    // é»˜è®¤ ID ä¸º 0\n    var curSite = {SiteTypeID: 0};\n\n    // è‡ªåŠ¨ç¿»é¡µè§„åˆ™\n    let DBSite = {\n        recent: { // æœ€è¿‘ä¸»é¢˜é¡µ\n            SiteTypeID: 1,\n            pager: {\n                type: 1,\n                nextLink: 'css;.page_current+a',\n                pageElement: 'css;.cell.item',\n                HT_insert: ['css;.cell.ps_container:last-of-type', 1],\n                replaceE: '//a[@class=\"page_current\"]/../..',\n                scrollDelta: 1500\n            }\n        },\n        notifications: { // æé†’æ¶ˆæ¯é¡µ\n            SiteTypeID: 2,\n            pager: {\n                type: 1,\n                nextLink: 'css;.page_current+a',\n                pageElement: 'css;#notifications > div',\n                HT_insert: ['css;#notifications', 3],\n                replaceE: '//a[@class=\"page_current\"]/../..',\n                scrollDelta: 1500\n            }\n        },\n        replies: { // ç”¨æˆ·å›å¤é¡µ\n            SiteTypeID: 3,\n            pager: {\n                type: 1,\n                nextLink: 'css;.page_current+a',\n                pageElement: 'css;#Main>.box>.dock_area,#Main>.box>.dock_area+.inner,#Main>.box>.dock_area+.cell:not([style])',\n                HT_insert: ['css;.cell.ps_container:last-of-type', 1],\n                replaceE: '//a[@class=\"page_current\"]/../..',\n                scrollDelta: 1500\n            }\n        },\n        go: { // åˆ†ç±»ä¸»é¢˜é¡µ\n            SiteTypeID: 4,\n            pager: {\n                type: 1,\n                nextLink: 'css;.page_current+a',\n                pageElement: 'css;#TopicsNode > div',\n                HT_insert: ['css;#TopicsNode', 3],\n                replaceE: '//a[@class=\"page_current\"]/../..',\n                scrollDelta: 1500\n            }\n        },\n        reply: { // å¸–å­å†…å®¹é¡µï¼ˆä»å‰å¾€åï¼‰\n            SiteTypeID: 5,\n            pager: {\n                type: 1,\n                nextLink: 'css;.page_current+a',\n                pageElement: 'css;.cell[id^=\"r_\"]',\n                HT_insert: ['css;.cell.ps_container:last-of-type', 1],\n                replaceE: '//a[@class=\"page_current\"]/../..',\n                scrollDelta: 1500\n            }\n        },\n        reply_positive: { // å¸–å­å†…å®¹é¡µï¼ˆä»åå¾€å‰ï¼‰\n            SiteTypeID: 6,\n            pager: {\n                type: 1,\n                nextLink: 'css;.page_current+a',\n                pageElement: 'css;.cell[id^=\"r_\"]',\n                HT_insert: ['css;.cell[id^=\"r_\"]', 1],\n                replaceE: '//a[@class=\"page_current\"]/../..',\n                scrollDelta: 1500\n            }\n        },\n        balance: { // è´¦æˆ·ä½™é¢é¡µ\n            SiteTypeID: 7,\n            pager: {\n                type: 1,\n                nextLink: 'css;.page_current+a',\n                pageElement: 'css;table.data>tbody>tr:not(:first-child)',\n                HT_insert: ['css;table.data>tbody', 3],\n                replaceE: '//a[@class=\"page_current\"]/../..',\n                scrollDelta: 1000\n            }\n        },\n        sov2ex: { // sov2ex\n            SiteTypeID: 8,\n            pager: {\n                nextLink: '.paging>a',\n                scrollDelta: 1000\n            }\n        }\n    };\n\n    if (location.hostname === 'www.sov2ex.com') {\n        curSite = DBSite.sov2ex;\n        pageLoading();\n    } else {\n    switch (location.pathname) {\n        case '/': //              é¦–é¡µ\n            addChangesLink();\n            break;\n        case '/recent': //        æœ€è¿‘ä¸»é¢˜é¡µ\n            curSite = DBSite.recent;\n            break;\n        case '/notifications': // æé†’æ¶ˆæ¯é¡µ\n            curSite = DBSite.notifications;\n            break;\n        case '/balance': //       è´¦æˆ·ä½™é¢é¡µ\n            curSite = DBSite.balance;\n            break;\n        default:\n            if (location.pathname.indexOf('/go/') > -1) { // åˆ†ç±»ä¸»é¢˜é¡µ\n                curSite = DBSite.go;\n            } else if (location.pathname.indexOf('/t/') > -1) { // å¸–å­å†…å®¹é¡µ\n                if(menu_value('menu_pageLoading_reply'))curSite = DBSite.reply; // å¸–å­å†…è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n                if(menu_value('menu_quickReply'))quickReply(); // å¿«é€Ÿå›å¤ï¼ˆåŒå‡»å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n            } else if (location.pathname.indexOf('/replies') > -1) { // ç”¨æˆ·å›å¤é¡µ\n                curSite = DBSite.replies;\n            }\n    }\n\n    curSite.pageUrl = ''; // ä¸‹ä¸€é¡µURL\n    if(menu_value('menu_linksBlank')) linksBlank(); //               æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥\n    if(menu_value('menu_fish')) fish(); //                           æ ‡ç­¾é¡µä¼ªè£…ä¸º Githubï¼ˆæ‘¸é±¼ï¼‰\n    if(menu_value('menu_autoClockIn')) setTimeout(qianDao, 1000); // è‡ªåŠ¨ç­¾åˆ°ï¼ˆåå°ï¼‰ï¼Œå»¶è¿Ÿ 1 ç§’æ‰§è¡Œæ˜¯ä¸ºäº†å…¼å®¹ [V2ex Plus] æ‰©å±•\n    if(menu_value('menu_pageLoading')) pageLoading(); //             è‡ªåŠ¨ç¿»é¡µï¼ˆæ— ç¼ï¼‰\n    if(menu_value('menu_backToTop')) backToTop(); //                 å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ç‚¹å‡»å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n    if(menu_value('menu_linksToImgs')) linksToImgs(); //             é“¾æ¥è½¬å›¾ç‰‡\n    if(menu_value('menu_sov2ex')) setTimeout(soV2ex, 1000); //       æ›¿æ¢ä¸º sov2ex æœç´¢\n    }\n\n    // è‡ªåŠ¨ç­¾åˆ°ï¼ˆåå°ï¼‰\n    function qianDao() {\n        let timeNow = new Date().getUTCFullYear() + '/' + (new Date().getUTCMonth() + 1) + '/' + new Date().getUTCDate() // å½“å‰ UTC-0 æ—¶é—´ï¼ˆV2EX æŒ‰è¿™ä¸ªæ—¶é—´çš„ï¼‰\n        if (location.pathname == '/') { //                               åœ¨é¦–é¡µ\n            let qiandao = document.querySelector('.box .inner a[href=\"/mission/daily\"]');\n            if (qiandao) { //                                            å¦‚æœæ‰¾åˆ°äº†ç­¾åˆ°æç¤º\n                qianDao_(qiandao, timeNow); //                           åå°ç­¾åˆ°\n            } else if (document.getElementById('gift_v2excellent')) { // å…¼å®¹ [V2ex Plus] æ‰©å±•\n                document.getElementById('gift_v2excellent').click();\n                GM_setValue('menu_clockInTime', timeNow); //             å†™å…¥ç­¾åˆ°æ—¶é—´ä»¥ä¾›åç»­æ¯”è¾ƒ\n                console.info('[V2EX å¢å¼º] è‡ªåŠ¨ç­¾åˆ°å®Œæˆï¼')\n            } else { //                                                  éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œè¯´æ˜å·²ç»ç­¾è¿‡åˆ°äº†\n                console.info('[V2EX å¢å¼º] å·²ç»ç­¾è¿‡åˆ°äº†ã€‚')\n            }\n        } else { //                                                      ä¸åœ¨é¦–é¡µ\n            let timeOld = GM_getValue('menu_clockInTime')\n            if (!timeOld || timeOld != timeNow) {\n                qianDaoStatus_(timeNow) //                               åå°è·å–ç­¾åˆ°çŠ¶æ€ï¼ˆå¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦ç­¾åˆ°ï¼‰\n            }/* else { //                                                æ–°æ—§ç­¾åˆ°æ—¶é—´ä¸€è‡´\n                console.info('[V2EX å¢å¼º] å·²ç»ç­¾è¿‡åˆ°äº†ã€‚')\n            }*/\n        }\n    }\n\n\n    // åå°ç­¾åˆ°\n    function qianDao_(qiandao, timeNow) {\n        let url = (location.origin + \"/mission/daily/redeem?\" + RegExp(\"once\\\\=(\\\\d+)\").exec(document.querySelector('div#Top .tools, #menu-body').innerHTML)[0]);\n        GM_xmlhttpRequest({\n            url: url,\n            method: 'GET',\n            timeout: 5000,\n            onload: function (response) {\n                let html = ShowPager.createDocumentByString(response.responseText);\n                //console.log(html)\n                if (html.querySelector('li.fa.fa-ok-sign')) {\n                    html = html.getElementById('Main').textContent.match(/å·²è¿ç»­ç™»å½• (\\d+?) å¤©/)[0];\n                    GM_setValue('menu_clockInTime', timeNow); // å†™å…¥ç­¾åˆ°æ—¶é—´ä»¥ä¾›åç»­æ¯”è¾ƒ\n                    console.info('[V2EX å¢å¼º] è‡ªåŠ¨ç­¾åˆ°å®Œæˆï¼')\n                    if (qiandao) {\n                        qiandao.textContent = `è‡ªåŠ¨ç­¾åˆ°å®Œæˆï¼${html}`;\n                        qiandao.href = 'javascript:void(0);';\n                    }\n                } else {\n                    GM_notification({text: 'è‡ªåŠ¨ç­¾åˆ°å¤±è´¥ï¼è¯·è®¿é—® V2EX é¦–é¡µè¯•è¯•ã€‚\\nå¦‚æœè¿ç»­å‡ å¤©éƒ½ç­¾åˆ°å¤±è´¥ï¼Œè¯·è”ç³»ä½œè€…è§£å†³ï¼', timeout: 4000, onclick() {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/424246/feedback', {active: true,insert: true,setParent: true});}});\n                    console.warn('[V2EX å¢å¼º] è‡ªåŠ¨ç­¾åˆ°å¤±è´¥ï¼è¯·è®¿é—® V2EX é¦–é¡µè¯•è¯•ã€‚å¦‚æœè¿ç»­å‡ å¤©éƒ½ç­¾åˆ°å¤±è´¥ï¼Œè¯·è”ç³»ä½œè€…è§£å†³ï¼')\n                    if (qiandao) qiandao.textContent = 'è‡ªåŠ¨ç­¾åˆ°å¤±è´¥ï¼è¯·å°è¯•æ‰‹åŠ¨ç­¾åˆ°ï¼';\n                }\n            }\n        });\n    }\n\n\n    // åå°è·å–ç­¾åˆ°çŠ¶æ€ï¼ˆå¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦ç­¾åˆ°ï¼‰\n    function qianDaoStatus_(timeNow) {\n        GM_xmlhttpRequest({\n            url: location.origin + '/mission/daily',\n            method: 'GET',\n            timeout: 5000,\n            onload: function (response) {\n                let html = ShowPager.createDocumentByString(response.responseText);\n                if (html.querySelector('input[value^=\"é¢†å–\"]')) { //     è¿˜æ²¡æœ‰ç­¾åˆ°...\n                    qianDao_(null, timeNow); //                          åå°ç­¾åˆ°\n                } else { //                                              å·²ç»ç­¾åˆ°äº†...\n                    console.info('[V2EX å¢å¼º] å·²ç»ç­¾è¿‡åˆ°äº†ã€‚')\n                    GM_setValue('menu_clockInTime', timeNow); //         å†™å…¥ç­¾åˆ°æ—¶é—´ä»¥ä¾›åç»­æ¯”è¾ƒ\n                }\n            }\n        });\n    }\n\n\n    // æ›¿æ¢ä¸º sov2ex æœç´¢ï¼Œä»£ç æ¥è‡ª v2ex-plus æ‰©å±•ï¼šhttps://github.com/sciooga/v2ex-plus ï¼ˆæ‡’å¾—é‡å¤é€ è½®å­äº†~\n    function soV2ex() {\n        document.body.appendChild(document.createElement('script')).textContent = `\n                var $search = $('#search')\n        var searchEvents = $._data($search[0], \"events\" )\n        var oKeydownEvent = searchEvents['keydown'][0]['handler']\n        var oInputEvent = searchEvents['input'][0]['handler']\n        $search.attr(\"placeholder\",\"sov2ex\")\n        $search.unbind('keydown', oKeydownEvent)\n        $search.unbind('input', oInputEvent)\n        $search.on('input', function(e) {\n            oInputEvent(e)\n            $('.search-item:last').attr('href', 'https://www.sov2ex.com/?q=' + $search.val()).text('sov2ex ' +$search.val());\n        })\n        $search.keydown(function(e) {\n            if (e.code == 'Enter' || e.code == 'NumpadEnter' || e.keyCode === 13) {\n                if ($('.search-item:last').is('.active')) {\n                    $(this).val($(this).val().replace(/[#%&]/g,\"\"));//ç”¨æˆ·è¾“å…¥ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦#%&\n                    window.open(\"https://www.sov2ex.com/?q=\" + $(this).val());\n                    return 0\n                }\n            }\n            oKeydownEvent(e)\n        })\n        `;\n    }\n\n\n    // å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n    function backToTop() {\n        document.getElementById('Wrapper').oncontextmenu = document.querySelector('#Wrapper > .content').oncontextmenu = function(event){\n            if (event.target == this) {\n                event.preventDefault();\n                window.scrollTo(0,0)\n            }\n        }\n    }\n\n\n    // æ ‡ç­¾é¡µä¼ªè£…ä¸º Githubï¼ˆæ‘¸é±¼ï¼‰\n    function fish() {\n        window.document.title = 'GitHub'\n        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n            document.querySelector(\"link[rel*='shortcut icon']\").href = 'https://github.githubassets.com/favicons/favicon-dark.png'\n        } else {\n            document.querySelector(\"link[rel*='shortcut icon']\").href = 'https://github.githubassets.com/favicons/favicon.png'\n        }\n    }\n\n\n    // é“¾æ¥è½¬å›¾ç‰‡\n    function linksToImgs() {\n        let links = document.links;\n        Array.from(links).forEach(function (_this) {\n            if (/^https.*\\.(?:jpg|jpeg|jpe|bmp|png|gif)/i.test(_this.href) && !(/<img\\s/i.test(_this.innerHTML))) {\n                _this.innerHTML = `<img src=\"${_this.href}\" style=\"max-width: 100%!important;\" />`;\n            } else if (/^https:\\/\\/imgur\\.com\\/[a-z]+$/i.test(_this.href)) { // é’ˆå¯¹æ²¡æœ‰æ–‡ä»¶åç¼€çš„ imgur å›¾åºŠé“¾æ¥\n                _this.innerHTML = `<img src=\"${_this.href}.png\" style=\"max-width: 100%!important;\" />`;\n            }\n        });\n    }\n\n\n    // å¿«é€Ÿå›å¤ï¼ˆåŒå‡»å·¦å³ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n    function quickReply() {\n        document.getElementById('Wrapper').ondblclick = document.querySelector('#Wrapper > .content').ondblclick = function(event){\n            if (event.target==this) {\n                if (document.querySelector('.box.reply-box-sticky')) {\n                    document.getElementById('undock-button').click();\n                } else {\n                    let _top = document.body.scrollTop + document.documentElement.scrollTop;\n                    document.getElementById('reply_content').focus();\n                    window.scrollTo(0,_top);console.log(_top);\n                }\n            }\n        }\n    }\n\n\n    // æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥\n    function linksBlank() {\n        if (location.pathname.indexOf('/settings') > -1) return\n        document.head.appendChild(document.createElement('base')).target = '_blank'; // è®©æ‰€æœ‰é“¾æ¥é»˜è®¤ä»¥æ–°æ ‡ç­¾é¡µæ‰“å¼€\n        Array.from(document.links).forEach(function (_this) {\n            if (_this.onclick || _this.href.slice(0,4) != 'http' || _this.href.indexOf('#;') > -1 || _this.href.indexOf('night/toggle') > -1 || _this.href.indexOf('/favorite') > -1 || _this.href.indexOf('/?tab=') > -1) {\n                _this.target = '_self'\n            }\n        })\n        document.querySelectorAll('form').forEach(function (_this) {\n            if (!_this.target) {_this.target = '_self'}\n        });\n\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    if (target.tagName === 'A') {\n                        if (target.onclick || target.href.slice(0,4) != 'http' || target.href.indexOf('#;') > -1 || target.href.indexOf('night/toggle') > -1 || target.href.indexOf('/favorite') > -1) {\n                            target.target = '_self'\n                        }\n                    } else {\n                        document.querySelectorAll('a').forEach(function (_this) {\n                            if (_this.onclick || _this.href.slice(0,4) != 'http' || _this.href.indexOf('#;') > -1 || _this.href.indexOf('night/toggle') > -1 || _this.href.indexOf('/favorite') > -1) {\n                                _this.target = '_self'\n                            }\n                        });\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n\n    // æ·»åŠ å…¨ç«™æœ€è¿‘æ›´æ–°ä¸»é¢˜é“¾æ¥\n    function addChangesLink() {\n        let links = document.querySelector('#Main .box .inner:last-child');if (!links) return\n        links.innerHTML = `<div style=\"float: left;\"><span class=\"chevron\">Â»</span> &nbsp;<a href=\"/recent\" target=\"_blank\">æ›´å¤šæ–°ä¸»é¢˜</a></div><div style=\"text-align: right;\"><a href=\"/changes\" target=\"_blank\" style=\"text-align: right;\">å…¨ç«™æœ€è¿‘æ›´æ–°ä¸»é¢˜</a> &nbsp;<span class=\"chevron\">Â«</span></div>`\n    }\n\n\n    // è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n    function pageLoading() {\n        if (curSite.SiteTypeID > 0){\n            windowScroll(function (direction, e) {\n                // ä¸‹æ»‘ ä¸” æœªæš‚åœç¿»é¡µ ä¸” SiteTypeID > 0 æ—¶ï¼Œæ‰å‡†å¤‡ç¿»é¡µ\n                if (direction != 'down' || !pausePage) return\n                let scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop,\n                    scrollHeight = window.innerHeight || document.documentElement.clientHeight,\n                    scrollDelta = curSite.pager.scrollDelta;\n                if (document.documentElement.scrollHeight <= scrollHeight + scrollTop + scrollDelta) {\n                    if (curSite.pager.type === 1) {\n                        ShowPager.loadMorePage();\n                    }else{\n                        let autopbn = document.querySelector(curSite.pager.nextLink);\n                        if (autopbn){\n                            autopbn.click();\n                            pausePage = false\n                            setTimeout(function(){pausePage = true;}, 500)\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n\n    // æ»šåŠ¨æ¡äº‹ä»¶\n    function windowScroll(fn1) {\n        var beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n            fn = fn1 || function () {};\n        setTimeout(function () { // å»¶æ—¶æ‰§è¡Œï¼Œé¿å…åˆšè½½å…¥åˆ°é¡µé¢å°±è§¦å‘ç¿»é¡µäº‹ä»¶\n            window.addEventListener('scroll', function (e) {\n                var afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n                    delta = afterScrollTop - beforeScrollTop;\n                if (delta == 0) return false;\n                fn(delta > 0 ? 'down' : 'up', e);\n                beforeScrollTop = afterScrollTop;\n            }, false);\n        }, 1000)\n    }\n\n\n    // ä¿®æ”¹è‡ª https://greasyfork.org/scripts/14178 , https://github.com/machsix/Super-preloader\n    var ShowPager = {\n        getFullHref: function (e) {\n            if (e != null && e.nodeType === 1 && e.href && e.href.slice(0,4) === 'http') return e.href;\n            return '';\n        },\n        createDocumentByString: function (e) {\n            if (e) {\n                if ('HTML' !== document.documentElement.nodeName) return (new DOMParser).parseFromString(e, 'application/xhtml+xml');\n                var t;\n                try { t = (new DOMParser).parseFromString(e, 'text/html');} catch (e) {}\n                if (t) return t;\n                if (document.implementation.createHTMLDocument) {\n                    t = document.implementation.createHTMLDocument('ADocument');\n                } else {\n                    try {((t = document.cloneNode(!1)).appendChild(t.importNode(document.documentElement, !1)), t.documentElement.appendChild(t.createElement('head')), t.documentElement.appendChild(t.createElement('body')));} catch (e) {}\n                }\n                if (t) {\n                    var r = document.createRange(),\n                        n = r.createContextualFragment(e);\n                    r.selectNodeContents(document.body);\n                    t.body.appendChild(n);\n                    for (var a, o = { TITLE: !0, META: !0, LINK: !0, STYLE: !0, BASE: !0}, i = t.body, s = i.childNodes, c = s.length - 1; c >= 0; c--) o[(a = s[c]).nodeName] && i.removeChild(a);\n                    return t;\n                }\n            } else console.error('æ²¡æœ‰æ‰¾åˆ°è¦è½¬æˆ DOM çš„å­—ç¬¦ä¸²');\n        },\n        loadMorePage: function () {\n            if (curSite.pager) {\n                let curPageEle = getOneElements(curSite.pager.nextLink);\n                var url = this.getFullHref(curPageEle);\n                console.log(`${url} ${curPageEle} ${curSite.pageUrl}`);\n                if(url === '') return;\n                if(curSite.pageUrl === url) return;// ä¸ä¼šé‡å¤åŠ è½½ç›¸åŒçš„é¡µé¢\n                curSite.pageUrl = url;\n                // è¯»å–ä¸‹ä¸€é¡µçš„æ•°æ®\n                curSite.pager.startFilter && curSite.pager.startFilter();\n                GM_xmlhttpRequest({\n                    url: url,\n                    method: \"GET\",\n                    timeout: 5000,\n                    onload: function (response) {\n                        try {\n                            var newBody = ShowPager.createDocumentByString(response.responseText);\n                            let pageElems = getAllElements(curSite.pager.pageElement, newBody, newBody);\n                            let toElement = getAllElements(curSite.pager.HT_insert[0])[0];\n                            if (pageElems.length >= 0) {\n                                // å¦‚æœæœ‰æ’å…¥å‰å‡½æ•°å°±æ‰§è¡Œå‡½æ•°\n                                if (curSite.function && curSite.function.before) {\n                                    if (curSite.function.parameter) { // å¦‚æœæŒ‡å®šäº†å‚æ•°\n                                        pageElems = curSite.function.before(curSite.function.parameter);\n                                    }else{\n                                        pageElems = curSite.function.before(pageElems);\n                                    }\n                                }\n                                // æ’å…¥ä½ç½®\n                                let addTo;\n                                switch (curSite.pager.HT_insert[1]) {\n                                    case 1:\n                                        addTo = \"beforebegin\"\n                                        break;\n                                    case 2:\n                                        addTo = \"afterbegin\"\n                                        break;\n                                    case 3:\n                                        addTo = \"beforeend\"\n                                        break;\n                                    case 4:\n                                        addTo = \"afterend\"\n                                        break;\n                                }\n                                // æ’å…¥æ–°é¡µé¢å…ƒç´ \n                                pageElems.forEach(function (one) {\n                                    toElement.insertAdjacentElement(addTo, one);\n                                });\n                                // æ›¿æ¢å¾…æ›¿æ¢å…ƒç´ \n                                try {\n                                    let oriE = getAllElements(curSite.pager.replaceE);\n                                    let repE = getAllElements(curSite.pager.replaceE, newBody, newBody);\n                                    if (oriE.length === repE.length) {\n                                        for (var i = 0; i < oriE.length; i++) {\n                                            oriE[i].outerHTML = repE[i].outerHTML;\n                                        }\n                                    }\n                                } catch (e) {\n                                    console.log(e);\n                                }\n                                // å¦‚æœæœ‰æ’å…¥åå‡½æ•°å°±æ‰§è¡Œå‡½æ•°\n                                if (curSite.function && curSite.function.after) {\n                                    if (curSite.function.parameter) { // å¦‚æœæŒ‡å®šäº†å‚æ•°\n                                        curSite.function.after(curSite.function.parameter);\n                                    }else{\n                                        curSite.function.after();\n                                    }\n                                }\n                            }\n                        } catch (e) {\n                            console.log(e);\n                        }\n                    }\n                });\n            }\n        },\n    };\n    function getElementByCSS(css, contextNode = document) {\n        return contextNode.querySelector(css);\n    }\n    function getAllElementsByCSS(css, contextNode = document) {\n        return [].slice.call(contextNode.querySelectorAll(css));\n    }\n    function getElementByXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        try {\n            const result = doc.evaluate(xpath, contextNode, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);\n            // åº”è¯¥æ€»æ˜¯è¿”å›ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹\n            return result.singleNodeValue && result.singleNodeValue.nodeType === 1 && result.singleNodeValue;\n        } catch (err) {\n            throw new Error(`Invalid xpath: ${xpath}`);\n        }\n    }\n    function getAllElementsByXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        const result = [];\n        try {\n            const query = doc.evaluate(xpath, contextNode, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n            for (let i = 0; i < query.snapshotLength; i++) {\n                const node = query.snapshotItem(i);\n                // å¦‚æœæ˜¯ Element èŠ‚ç‚¹\n                if (node.nodeType === 1) result.push(node);\n            }\n        } catch (err) {\n            throw new Error(`æ— æ•ˆ Xpath: ${xpath}`);\n        }\n        return result;\n    }\n    function getOneElements(selector, contextNode = undefined, doc = document) {\n        if (!selector) return;\n        contextNode = contextNode || doc;\n        if (selector.search(/^css;/i) === 0) {\n            return getElementByCSS(selector.slice(4), contextNode);\n        } else {\n            return getElementByXpath(selector, contextNode, doc);\n        }\n    }\n    function getAllElements(selector, contextNode = undefined, doc = document, win = window, _cplink = undefined) {\n        if (!selector) return [];\n        contextNode = contextNode || doc;\n        if (typeof selector === 'string') {\n            if (selector.search(/^css;/i) === 0) {\n                return getAllElementsByCSS(selector.slice(4), contextNode);\n            } else {\n                return getAllElementsByXpath(selector, contextNode, doc);\n            }\n        } else {\n            const query = selector(doc, win, _cplink);\n            if (!Array.isArray(query)) {\n                throw new Error('getAllElements è¿”å›é”™è¯¯ç±»å‹');\n            } else {\n                return query;\n            }\n        }\n    }\n})();"
        },
        {
          "name": "Zhihu-Beautification.user.js",
          "type": "blob",
          "size": 39.865234375,
          "content": "// ==UserScript==\n// @name         çŸ¥ä¹ç¾åŒ–\n// @version      1.5.12\n// @author       X.I.U\n// @description  å®½å±æ˜¾ç¤ºã€æš—é»‘æ¨¡å¼ï¼ˆ4ç§ï¼‰ã€æš—é»‘æ¨¡å¼è·Ÿéšæµè§ˆå™¨ã€å±è”½é¦–é¡µæ´»åŠ¨å¹¿å‘Šã€éšè—æ–‡ç« å¼€å¤´å¤§å›¾ã€è°ƒæ•´å›¾ç‰‡æœ€å¤§é«˜åº¦ã€å‘ä¸‹ç¿»æ—¶è‡ªåŠ¨éšè—é¡¶æ \n// @match        *://www.zhihu.com/*\n// @match        *://zhuanlan.zhihu.com/*\n// @exclude      https://www.zhihu.com/signin*\n// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFo0lEQVR4nJWXT4hlVxHGf9/tJyYuzJtxIziQN8RBFDEtIWB0MW+Mi4CIk4UuAtqvAxPcqAkJRNxMshDUTc8s3TjdO3c9QbIKod+o4CIuZtRFDEi3EIgEM/02jpPIPZ+LqnPv6TeB4IHLPfeeP1X11VdV54i2vewtOhaITcQDdEgdthAdINAGNkgd0IEVbwR17rAmx1TniSVil6e0V0UKgJc8pWdfG5yvwqRhs1FQIyQ3trvcpxsVGd4xf/gelO24yV0usK1VB6APOMDMKSADBShIBWNwj1WwjClAzLEL0CMc86jj9cl/LgRs8ZjCJvexH5r/xAuJa260TatG6DosIee4lHO0ZnWDXH5bgYQ8uql122Iis2Xnj4JtRH675AIHMAQKuAsdrLV3dYXTwQ7Bir1jrzJ+Wyw698yVkLmgxgVg+PGjcPw8zD6JKcgFUcD94AoNa0eXkO600lVqXOPqPrPZNT6tjylYBRZfgp0n4GgFR7dDkEieeNys6ZPCBq4MCicXdFLWdIKBHtMFfC4JY8Hf/nxEyY0jmD+IM7Cgy77gxtto+jF4+NMj8+tY84YOLd8JnZJPpiDxI7shUigimJ2Gwxf5yLb9aryvffOj5+pXKbzJDxOVoIw7REkLhedno7+6CzffgdkpmE3z+5/Nrq7JJMfejc3bNj+TnT4tTyRtmLiAlARKliK09Uis2fsTPPcqvvwNdPlxuP4mbO+P4aQObz0cG958F77+mxMJh9kDcPh0IpCcUIerqycYuc8FGX7zczB/CI6O4cofAA9GjuRjUFhN2I0hmISlNFCUzCGMSkxqfFJw3XD6cXjuOt57A1YfpM/KSSEqY9zLo4w0psLsVnknyhkVYgNPMlRQh+qE63+GSsaBoK2VJcdTKTcKDLmhA/o1BDKFKzKl3aOJcoNBu3SHAAe4ahwwKgBkFRhdMMIc6Chzf+VphruT6urwZBh1aEQXjL/2fZidHoVP74/3xS8GP1IBLQ/hxuGonCLFxpZKjtTpDpRrSjYwYa2p4GcvoPm59ZFU5L54apvP4MZhY2XJMh1u+DB0Qk7ybaIR2EGHl34LV1/HGU5CsP8MbH4Gnvw1vPJX7G48pGw/OiLgyoEKf4PAYH0f6VtdIOAmlwCwugOrO0mDOHRodjrG/vGv9HvyQEprRwQjPB3rWg5oXBNR0A+Vf2wtJwDZaP5ZPL0fVv+B4zto5yJjKK6R0CUPMI7K6jUEsgpKGYqTwXpneGiExKnR4iuZ6d6Ggx/C7FNwdBuu/C6ROBmiUU/6PDuWhh9tEssQHxFQVlmP3wKfPY23Hotfe3+Eq8tYf/kJmE2jdK8pIPWJTDmJAFmq1We57iNnDQol9HWFDbr8rfg8eg+Wb8KV19DyrQjLa08hNal4/hD4l3D+LNr/HvhncPhC49+Ev5475DHfeUjjGrPt4jHY+upgvZOAPL0XRJ2fgwdPNS7IdvADuPgF7m15UDEDOhaXXKQT6RyAzTNw8DxMPxHWn/1p6ObMjc8+DjvfhVMvwOr9EcLjnwc6V38PL78Gq7vYG8PBxAqTzUbInJwoGtlbfA3tfCeEL/8G23sZEaAMIV99HW2egdW/m9Is/Mpf0O4bsPw7tY4os+OAbuUXHZKe8W3gVDLeEjr/uTgRHb0Hy7fyf0PUQd2YH4eZesrRmMBqDhF5gRFiIxSRQoGJxS0Kc8XNRSasHlqStOZ3Nf1aKVQzIKkMzeHTGZaRoEzWmyxIyw6zW6FRQ6c2NapC5pCjuAl5+Od7Tru41vxagEpTOeN0LAq7oe0lH0DeC6uVH0Lito03kbVUnmSrp+yE/967Y8dNfqEvdwD+L09a3BrgbqA/IZS4H4osLE3mHlDzYB30iUJ7XwwklrzPhXWk4ZIXdGxROM//g0ZbQrKXVza0EQcQiWNvcIuOXXbG6/n/AAwhLDO9HaqBAAAAAElFTkSuQmCC\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @sandbox      JavaScript\n// @license      GPL-3.0 License\n// @run-at       document-start\n// @namespace    https://greasyfork.org/scripts/412212\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ALL = [\n        ['menu_widescreenDisplay', 'å®½å±æ˜¾ç¤º', 'å‹¾é€‰ = è¯¥é¡µé¢å¼€å¯å®½å±æ˜¾ç¤ºï¼ˆåˆ·æ–°åæŸ¥çœ‹æ•ˆæœï¼‰', ''],\n        ['menu_widescreenDisplayIndex', 'é¦–é¡µ', 'å®½å±æ˜¾ç¤º', true],\n        ['menu_widescreenDisplayQuestion', 'é—®é¢˜é¡µ', 'å®½å±æ˜¾ç¤º', true],\n        ['menu_widescreenDisplaySearch', 'æœç´¢é¡µã€è¯é¢˜é¡µã€åœˆå­', 'å®½å±æ˜¾ç¤º', true],\n        ['menu_widescreenDisplayCollection', 'æ”¶è—é¡µ', 'å®½å±æ˜¾ç¤º', true],\n        ['menu_widescreenDisplayPost', 'æ–‡ç« é¡µ', 'å®½å±æ˜¾ç¤º', false],\n        ['menu_widescreenDisplayPeople', 'ç”¨æˆ·ä¸»é¡µ', 'ç”¨æˆ·ä¸»é¡µ', false],\n        ['menu_widescreenDisplayWidth', 'å®½å±å®½åº¦', 'å®½å±å®½åº¦ (é»˜è®¤ 1000)', '1000'],\n        ['menu_darkMode', 'æš—é»‘æ¨¡å¼', 'æš—é»‘æ¨¡å¼', true],\n        ['menu_darkModeType', 'æš—é»‘æ¨¡å¼åˆ‡æ¢ï¼ˆ1~4ï¼‰', 'æš—é»‘æ¨¡å¼åˆ‡æ¢', 1],\n        ['menu_darkModeAuto', 'æš—é»‘æ¨¡å¼è·Ÿéšæµè§ˆå™¨', 'æš—é»‘æ¨¡å¼è·Ÿéšæµè§ˆå™¨', false],\n        ['menu_picHeight', 'è°ƒæ•´å›¾ç‰‡æœ€å¤§é«˜åº¦', 'è°ƒæ•´å›¾ç‰‡æœ€å¤§é«˜åº¦', true],\n        ['menu_postimg', 'éšè—æ–‡ç« å¼€å¤´å¤§å›¾', 'éšè—æ–‡ç« å¼€å¤´å¤§å›¾', true],\n        ['menu_hideTitle', 'å‘ä¸‹ç¿»æ—¶è‡ªåŠ¨éšè—é¡¶æ ', 'å‘ä¸‹ç¿»æ—¶è‡ªåŠ¨éšè—é¡¶æ ', true]\n    ], menu_ID = [];\n    for (let i=0;i<menu_ALL.length;i++){ // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n        if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};\n    }\n    registerMenuCommand();\n    addStyle();\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (menu_ID.length > menu_ALL.length){ // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n            for (let i=0;i<menu_ID.length;i++){\n                GM_unregisterMenuCommand(menu_ID[i]);\n            }\n        }\n        for (let i=0;i<menu_ALL.length;i++){ // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n            menu_ALL[i][3] = GM_getValue(menu_ALL[i][0]);\n            if (menu_ALL[i][0] === 'menu_darkModeType') {\n                if (menu_ALL[i][3] > 4){ // é¿å…åœ¨å‡å°‘ raw æ•°ç»„åï¼Œç”¨æˆ·å‚¨å­˜çš„æ•°æ®å¤§äºæ•°ç»„è€ŒæŠ¥é”™\n                    menu_ALL[i][3] = 1;\n                    GM_setValue('menu_darkModeType', menu_ALL[i][3]);\n                }\n                menu_ID[i] = GM_registerMenuCommand(`${menu_num(menu_ALL[i][3])} ${menu_ALL[i][1]}`, function(){menu_toggle(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`)});\n            } else if (menu_ALL[i][0] === 'menu_widescreenDisplay'){\n                    GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){menu_setting('checkbox', menu_ALL[i][1], menu_ALL[i][2], true, [menu_ALL[i+1], menu_ALL[i+2], menu_ALL[i+3], menu_ALL[i+4], menu_ALL[i+5], menu_ALL[i+6], menu_ALL[i+7]])});\n            } else if (menu_ALL[i][0].indexOf('menu_widescreenDisplay') === -1) {\n                menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n            }\n        }\n        menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/412212/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    // åˆ‡æ¢æš—é»‘æ¨¡å¼\n    function menu_toggle(menu_status, Name) {\n        menu_status = parseInt(menu_status)\n        if (menu_status >= 4){\n            menu_status = 1;\n        } else {\n            menu_status += 1;\n        }\n        GM_setValue(`${Name}`, menu_status);\n        if (menu_status === 1) { // è®¾ç½® Cookie\n            if (getTheme() === 'light') setTheme('dark');\n        } else {\n            if (getTheme() === 'dark') {\n                setTheme('light');\n            } else {\n                if (menu_value('menu_darkMode')) {location.reload();} else {registerMenuCommand();}\n            }\n        }\n    };\n\n    // èœå•æ•°å­—å›¾æ ‡\n    function menu_num(num) {\n        return ['0ï¸âƒ£','1ï¸âƒ£','2ï¸âƒ£','3ï¸âƒ£','4ï¸âƒ£','5ï¸âƒ£','6ï¸âƒ£','7ï¸âƒ£','8ï¸âƒ£','9ï¸âƒ£','ğŸ”Ÿ'][num]\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status == 'true'){\n            GM_setValue(`${Name}`, false);\n\n            if (Name === 'menu_darkMode') { // æš—é»‘æ¨¡å¼\n                if (getTheme() === 'dark') {setTheme('light');} else {location.reload();}\n            } else {\n                GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n            }\n        } else {\n            GM_setValue(`${Name}`, true);\n\n            if (Name === 'menu_darkMode') {\n                if (menu_value('menu_darkModeType') === 1) {\n                    if (getTheme() === 'light') setTheme('dark');\n                } else {\n                    if (getTheme() === 'dark') {setTheme('light');} else {location.reload();}\n                }\n            } else {\n                GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n            }\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n    // è¿”å›èœå•å€¼\n    function menu_value(menuName) {\n        for (let menu of menu_ALL) {\n            if (menu[0] == menuName) {\n                return menu[3]\n            }\n        }\n    }\n\n\n    // è„šæœ¬è®¾ç½®\n    function menu_setting(type, title, tips, line, menu) {\n        let _br = '', _html = `<style class=\"zhihuE_SettingStyle\">.zhihuE_SettingRoot {position: absolute;top: 50%;left: 50%;-webkit-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-o-transform: translate(-50%, -50%);transform: translate(-50%, -50%);width: auto;min-width: 400px;max-width: 600px;height: auto;min-height: 150px;max-height: 400px;color: #535353;background-color: #fff;border-radius: 3px;}\n.zhihuE_SettingBackdrop_1 {position: fixed;top: 0;right: 0;bottom: 0;left: 0;z-index: 203;display: -webkit-box;display: -ms-flexbox;display: flex;-webkit-box-orient: vertical;-webkit-box-direction: normal;-ms-flex-direction: column;flex-direction: column;-webkit-box-pack: center;-ms-flex-pack: center;justify-content: center;overflow-x: hidden;overflow-y: auto;-webkit-transition: opacity .3s ease-out;transition: opacity .3s ease-out;}\n.zhihuE_SettingBackdrop_2 {position: absolute;top: 0;right: 0;bottom: 0;left: 0;z-index: 0;background-color: rgba(18,18,18,.65);-webkit-transition: background-color .3s ease-out;transition: background-color .3s ease-out;}\n.zhihuE_SettingRoot .zhihuE_SettingHeader {padding: 10px 20px;color: #fff;font-weight: bold;background-color: #3994ff;border-radius: 3px 3px 0 0;}\n.zhihuE_SettingRoot .zhihuE_SettingMain {padding: 10px 20px;border-radius: 0 0 3px 3px;}\n.zhihuE_SettingHeader span {float: right;cursor: pointer;}\n.zhihuE_SettingMain input {margin: 10px 6px 10px 0;cursor: pointer;vertical-align:middle}\n.zhihuE_SettingMain label {margin-right: 20px;user-select: none;cursor: pointer;vertical-align:middle}\n.zhihuE_SettingMain hr {border: 0.5px solid #f4f4f4;}\n[data-theme=\"dark\"] .zhihuE_SettingRoot {color: #adbac7;background-color: #343A44;}\n[data-theme=\"dark\"] .zhihuE_SettingHeader {color: #d0d0d0;background-color: #2D333B;}\n[data-theme=\"dark\"] .zhihuE_SettingMain hr {border: 0.5px solid #2d333b;}</style>\n        <div class=\"zhihuE_SettingBackdrop_1\"><div class=\"zhihuE_SettingBackdrop_2\"></div><div class=\"zhihuE_SettingRoot\">\n            <div class=\"zhihuE_SettingHeader\">${title}<span class=\"zhihuE_SettingClose\" title=\"ç‚¹å‡»å…³é—­\"><svg class=\"Zi Zi--Close Modal-closeIcon\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z\" fill-rule=\"evenodd\"></path></svg></span></div>\n            <div class=\"zhihuE_SettingMain\"><p>${tips}</p><hr>`\n        if (line) _br = '<br>'\n        for (let i=0; i<menu.length; i++) {\n            if (menu[i][0] === 'menu_widescreenDisplayWidth') {\n                _html += `<label>${menu[i][2]}ï¼š<input name=\"${menu[i][0]}\" type=\"text\" value=\"${GM_getValue(menu[i][0])}\" style=\"width: 40px;\"></label>${_br}`\n            } else if (GM_getValue(menu[i][0])) {\n                _html += `<label><input name=\"zhihuE_Setting_Checkbox\" type=\"checkbox\" value=\"${menu[i][0]}\" checked=\"checked\">${menu[i][1]}</label>${_br}`\n            } else {\n                _html += `<label><input name=\"zhihuE_Setting_Checkbox\" type=\"checkbox\" value=\"${menu[i][0]}\">${menu[i][1]}</label>${_br}`\n            }\n        }\n        _html += `</div></div></div>`\n        document.body.insertAdjacentHTML('beforeend', _html); // æ’å…¥ç½‘é¡µæœ«å°¾\n        setTimeout(function() { // å»¶è¿Ÿ 100 æ¯«ç§’ï¼Œé¿å…å¤ªå¿«\n            // å…³é—­æŒ‰é’® ç‚¹å‡»äº‹ä»¶\n            document.querySelector('.zhihuE_SettingClose').onclick = function(){this.parentElement.parentElement.parentElement.remove();document.querySelector('.zhihuE_SettingStyle').remove();}\n            // ç‚¹å‡»å‘¨å›´ç©ºç™½å¤„ = ç‚¹å‡»å…³é—­æŒ‰é’®\n            document.querySelector('.zhihuE_SettingBackdrop_2').onclick = function(event){if (event.target == this) {document.querySelector('.zhihuE_SettingClose').click();};}\n            // å¤é€‰æ¡† ç‚¹å‡»äº‹ä»¶\n            document.getElementsByName('zhihuE_Setting_Checkbox').forEach(function (checkBox) {\n                checkBox.addEventListener('click', function(){if (this.checked) {GM_setValue(this.value, true);} else {GM_setValue(this.value, false);}});\n            })\n            document.getElementsByName('menu_widescreenDisplayWidth')[0].onchange = function(){GM_setValue(this.name, this.value);};\n        }, 100)\n    }\n\n\n    // æ·»åŠ æ ·å¼\n    function addStyle() {\n        let style = `/* å±è”½ç™»å½•æç¤ºï¼ˆé—®é¢˜é¡µä¸­é—´çš„å…ƒç´ ï¼‰ */\n.Question-mainColumnLogin {display: none !important;}\n/* å±è”½å›ç­”é¡µ/é¦–é¡µå¹¿å‘Š */\n.Pc-card.Card, .Pc-Business-Card-PcTopFeedBanner {display: none !important;}\n/* å±è”½æ–‡ç« é¡µæ¨èæ–‡ç«  */\n.Recommendations-Main {display: none !important;}\n/* è§£é™¤ç›é€‰å†…å®¹é€‰ä¸­å¤åˆ¶é™åˆ¶ */\ndiv[class*=\"ManuscriptIntro-root-\"] {user-select: auto !important;}\n`,\n            style_index = `/* å±è”½é¦–é¡µå¹¿å‘Š */\n.TopstoryItem--advertCard {display: none !important;}\n/* å±è”½é¦–é¡µæ´»åŠ¨å¹¿å‘Š */\nmain.App-main > .Topstory > div:not(.Topstory-container) {display: none !important;}\nhtml[data-theme=\"light\"] header.AppHeader {background-color: #ffffff !important; -webkit-box-shadow: 0 1px 3px rgba(18,18,18,.1) !important; box-shadow: 0 1px 3px rgba(18,18,18,.1) !important;}\nhtml[data-theme=\"light\"] header.AppHeader a[aria-label=\"çŸ¥ä¹\"] svg {filter: invert(57%) sepia(71%) saturate(949%) hue-rotate(190deg) brightness(86%) contrast(188%) !important;}\nhtml[data-theme=\"light\"] .AppHeader-TabsLink {color: #8590a6 !important; font-weight: normal !important;}\nhtml[data-theme=\"light\"] .AppHeader-userInfo Button svg, .SearchBar-searchButton svg {color: inherit !important;}\nhtml[data-theme=\"light\"] .AppHeader-userInfo button>div {color: #8590a6 !important;}\nhtml[data-theme=\"light\"] .Input-wrapper.Input-wrapper--grey {background: #f6f6f6 !important;}\nhtml[data-theme=\"light\"] .SearchBar input {color: #121212 !important;}\nhtml[data-theme=\"light\"] .SearchBar input::placeholder, html[data-theme=\"light\"] .SearchBar input::-webkit-input-placeholder, html[data-theme=\"light\"] {color: #919baf !important;}\nhtml[data-theme=\"light\"] .Button--primary.Button--blue {color: #fff !important;background-color: #06f !important;}\n/* å³ä¸Šè§’ é€šçŸ¥/ç§ä¿¡ çº¢ç‚¹é¢œè‰² */\nhtml[data-theme=light] .AppHeader-notifications:not([aria-label=é€šçŸ¥])>div:first-of-type, html[data-theme=light] .AppHeader-messages:not([aria-label=ç§ä¿¡])>div:first-of-type {color: #ffffff !important;border: 2px solid #ffffff !important;}\n\n            `,\n            style_widescreenDisplayIndex = `/* å®½å±æ˜¾ç¤º - é¦–é¡µ */\n.Topstory-mainColumn, .QuestionWaiting-mainColumn {width: inherit !important;}\n.Topstory-mainColumn+div,[data-za-detail-view-path-module=\"RightSideBar\"] {display: none !important;}\n.Topstory-container {width: ${GM_getValue('menu_widescreenDisplayWidth')}px;}\n`,\n            style_widescreenDisplayQuestion = `/* å®½å±æ˜¾ç¤º - é—®é¢˜é¡µ */\n.Question-mainColumn, .ListShortcut, .QuestionWaiting-mainColumn {width: inherit !important;}\n.Question-mainColumn+div,[data-za-detail-view-path-module=\"RightSideBar\"], .Question-sideColumn, .GlobalSideBar {display: none !important;}\n.QuestionWaiting-mainColumn {margin-right: 0 !important;}\n.Question-main {width: ${GM_getValue('menu_widescreenDisplayWidth')}px;}\n.AuthorInfo {max-width: 100% !important;}\n`,\n            style_widescreenDisplaySearch = `/* å®½å±æ˜¾ç¤º - æœç´¢é¡µ */\n.SearchMain, .ContentLayout-mainColumn, .Club-mainColumn, .Post-mainColumn, [data-za-detail-view-path-module=TopicItem]>div:first-child {width: inherit !important;}\n.SearchMain+div, .ContentLayout-sideColumn, .Card.QuestionHeaderTopicMeta, .ClubSideBar, [data-za-detail-view-path-module=TopicItem]>div:not(:first-child) {display: none !important;}\n.Search-container, .ContentLayout, .Club-container, .Post-container, [data-za-detail-view-path-module=TopicItem] {width: ${GM_getValue('menu_widescreenDisplayWidth')}px;}\n`,\n            style_widescreenDisplayCollection = `/* å®½å±æ˜¾ç¤º - æ”¶è—é¡µ */\n.CollectionsDetailPage-mainColumn {width: inherit !important;}\n.CollectionsDetailPage-mainColumn+div, {display: none !important;}\n.CollectionsDetailPage {width: ${GM_getValue('menu_widescreenDisplayWidth')}px;}\n`,\n            style_widescreenDisplayPost = `/* å®½å±æ˜¾ç¤º - æ–‡ç« é¡µ */\n.Post-SideActions {left: calc(10vw) !important;}\n.Post-NormalMain .Post-Header, .Post-NormalMain>div, .Post-NormalSub>div {width: ${GM_getValue('menu_widescreenDisplayWidth')}px !important;}\n`,\n            style_widescreenDisplayPeople = `/* å®½å±æ˜¾ç¤º - ç”¨æˆ·ä¸»é¡µ */\n.Profile-mainColumn {width: inherit !important;}\n.Profile-mainColumn+div,[data-za-module=\"RightSideBar\"],.Profile-sideColumn {display: none !important;}\n.Profile-main, #ProfileHeader {width: ${GM_getValue('menu_widescreenDisplayWidth')}px !important;}\n`,\n            style_2 = `/* éšè—åœ¨å„åˆ—è¡¨ä¸­æŸ¥çœ‹æ–‡ç« æ—¶å¼€å¤´æ˜¾ç¤ºçš„å¤§å›¾ï¼Œä¸å½±å“æ–‡ç« ã€ä¸“æ é¡µé¢ */\n.RichContent img.ArticleItem-image {display: none !important;}\n`,\n            style_3 = `/* å‘ä¸‹ç¿»æ—¶è‡ªåŠ¨éšè—é¡¶æ */\nheader.is-hidden {display: none;}\n`,\n            style_4 = `/* è°ƒæ•´å›¾ç‰‡æœ€å¤§é«˜åº¦ */\n.ztext .content_image, .ztext .origin_image, .GifPlayer img {max-height: 500px !important;width: auto !important;}\n`,\n            style_darkMode_1 = `/* æš—é»‘æ¨¡å¼ï¼ˆæ–¹æ¡ˆ 1ï¼‰ */\n/* å³ä¸Šè§’ é€šçŸ¥/ç§ä¿¡ çº¢ç‚¹é¢œè‰² */\nhtml[data-theme=dark] .AppHeader-notifications:not([aria-label=é€šçŸ¥])>div:first-of-type, html[data-theme=dark] .AppHeader-messages:not([aria-label=ç§ä¿¡])>div:first-of-type {color: #ffffff !important;border: 2px solid #2d333b !important;}\n/* æ–‡å­—é¢œè‰² */\nhtml[data-theme=dark] body, html[data-theme=dark] .ContentItem-title, html[data-theme=dark] .QuestionHeader-title, html[data-theme=dark] .Tabs-link, html[data-theme=dark] .CreatorEntrance-title, html[data-theme=dark] .Search-container, html[data-theme=dark] .HotItem-excerpt, html[data-theme=dark] .PushNotifications-item, html[data-theme=dark] .Notifications-Main>header h1, html[data-theme=dark] .Notifications-Section-header h2, html[data-theme=dark] .NotificationList-Item-content, html[data-theme=dark] .Reward, html[data-theme=dark] .ChatSideBar-Search-Input input, html[data-theme=dark] input.Input, html[data-theme=dark] .LinkCard-title, html[data-theme=dark] .MCNLinkCard-title, html[data-theme=dark] .ZVideoLinkCard-title, html[data-theme=dark] .TipjarDialog-customButton, html[data-theme=dark] .Question-mainColumn .Card:not(.AnswersNavWrapper) a[data-za-detail-view-id] > div:last-child, html[data-theme=dark] .TextArea {color: #adbac7 !important;}\nhtml[data-theme=dark] .LinkCard-meta, html[data-theme=dark] .MCNLinkCard-source {color: #5a6f83 !important;}\n/* çƒ­æ¦œæ ‡é¢˜ */\nhtml[data-theme=dark] .HotItem-title {color: #c4cfda !important;}\n/* é¦–é¡µä¿¡æ¯æµæ ‡é¢˜ */\nhtml[data-theme=dark] .ContentItem-title a:hover, html[data-theme=dark] .RichContent.is-collapsed .RichContent-inner:hover, html[data-theme=dark] .ContentItem-more:hover, html[data-theme=dark] .QuestionRichText--expandable.QuestionRichText--collapsed:hover {color: #b3c3d6 !important;}\n/* æœç´¢é«˜äº®çº¢å­— */\nhtml[data-theme=dark] .Highlight em {color: #c33c39 !important;}\n\n/* èƒŒæ™¯é¢œè‰² - ç½‘é¡µ */\nhtml[data-theme=dark] body, html[data-theme=dark] .Select-option:focus {background: #22272E !important;}\n/* èƒŒæ™¯é¢œè‰² - é—®é¢˜ */\nhtml[data-theme=dark] .AppHeader, html[data-theme=dark] .QuestionHeader, html[data-theme=dark] .QuestionHeader-footer, html[data-theme=dark] .EmoticonsFooter-item--selected, html[data-theme=dark] .Card, html[data-theme=dark] .Question-mainColumn .Card .Sticky.is-bottom, html[data-theme=dark] .ContentItem-actions, html[data-theme=dark] .MoreAnswers .List-headerText, html[data-theme=dark] .CommentsV2-withPagination, html[data-theme=dark] .Topbar, html[data-theme=dark] .CommentsV2-footer, html[data-theme=dark] .CommentEditorV2-inputWrap--active, html[data-theme=dark] .InputLike, html[data-theme=dark] .InputLike + div div, html[data-theme=dark] .Popover-content, html[data-theme=dark] .Notifications-footer, html[data-theme=dark] .Messages-footer, html[data-theme=dark] .Modal-inner, html[data-theme=dark] .Emoticons, html[data-theme=dark] .EmoticonsFooter, html[data-theme=dark] .SearchTabs, html[data-theme=dark] .Popover-arrow:after, html[data-theme=dark] .CommentEditorV2-inputWrap, html[data-theme=dark] .ProfileHeader-wrapper, html[data-theme=dark] .UserCover, html[data-theme=dark] .AnswerForm-footer, html[data-theme=dark] .Editable-toolbar, html[data-theme=dark] .AnswerForm-fullscreenContent .Editable-toolbar, html[data-theme=dark] .KfeCollection-PcCollegeCard-wrapper, html[data-theme=dark] .KfeCollection-PcCollegeCard-root, html[data-theme=dark] .HotItem, html[data-theme=dark] .HotList, html[data-theme=dark] .HotListNavEditPad, html[data-theme=dark] .QuestionWaiting-typesTopper, html[data-theme=dark] .QuestionWaiting-types, html[data-theme=dark] .PostItem, html[data-theme=dark] .ClubSideBar section, html[data-theme=dark] .SearchSubTabs, html[data-theme=dark] .Club-SearchPosts-Content, html[data-theme=dark] .Club-content, html[data-theme=dark] .ClubJoinOrCheckinButton, html[data-theme=dark] .ClubEdit, html[data-theme=dark] .CornerButton, html[data-theme=dark] .Notifications-Section-header, html[data-theme=dark] .NotificationList, .NotificationList-Item.NotificationList-Item:after, .NotificationList-DateSplit.NotificationList-DateSplit:after, html[data-theme=dark] .Chat, .ChatUserListItem:after, .ChatListGroup-SectionTitle--bottomBorder:after, html[data-theme=dark] .ActionMenu, .ChatSideBar-Search--active, html[data-theme=dark] .ChatSideBar-Search-ResultListWrap, html[data-theme=dark] .QuestionMainDivider-inner, html[data-theme=dark] .Topic-bar, html[data-theme=dark] .AnnotationTag, html[data-theme=dark] .HoverCard, html[data-theme=dark] .HoverCard-loading, html[data-theme=dark] .ExploreSpecialCard, html[data-theme=dark] .ExploreHomePage-ContentSection-moreButton a, html[data-theme=dark] .ExploreRoundtableCard, html[data-theme=dark] .ExploreCollectionCard, html[data-theme=dark] .ExploreColumnCard, html[data-theme=dark] .RichText .lazy[data-lazy-status], html[data-theme=dark] #TopstoryContent > div:first-child, html[data-theme=dark] .Topstory-newUserFollowCountPanel, html[data-theme=dark] .AnswerForm-fullscreenContent .RichText, html[data-theme=dark] .Club-Search-Content, html[data-theme=dark] .WriteIndexLayout .Sticky {background: #2D333B !important;}\nhtml[data-theme=dark] .CommentListV2-header-divider, html[data-theme=dark] .CommentsV2-openComment-divider, html[data-theme=dark] .AnswerForm-fullscreenScroller, html[data-theme=dark] .HotListNav-item, html[data-theme=dark] .AutoInviteItem-wrapper--desktop, html[data-theme=dark] .ExploreSpecialCard-contentTag, html[data-theme=dark] .ExploreCollectionCard-contentTypeTag, html[data-theme=dark] .Reward-TipjarDialog-tagLine, html[data-theme=dark] .AnswerForm-footer.useNewEditorSetting > div, html[data-theme=dark] .AnswerForm-fullscreenContent > div:first-child, html[data-theme=dark] .Editable-toolbar button:hover, html[data-theme=dark] .AuthorInfo.AnswerAdd-info + div {background-color: #222933 !important;}\nhtml[data-theme=dark] .CornerButton:hover {background: #3f4752 !important;} /* å³ä¸‹è§’æŒ‰é’® */\n\n/* èƒŒæ™¯é¢œè‰² - å¼•ç”¨ */\nhtml[data-theme=dark] .ztext blockquote {color: #768390 !important;border-left: 3px solid #3b3b3b !important;}\n\n/* èƒŒæ™¯é¢œè‰² - å¡ç‰‡ */\nhtml[data-theme=dark] .MCNLinkCard, html[data-theme=dark] .LinkCard-content, html[data-theme=dark] .ZVideoLinkCard-info {background-color: #22272e !important;}\nhtml[data-theme=dark] .Post-content .MCNLinkCard, html[data-theme=dark] .Post-content .LinkCard-content, html[data-theme=dark] .Post-content .ZVideoLinkCard-info {background-color: #2D333B !important;}\nhtml[data-theme=dark] .LinkCard-backdrop {background-image: url() !important;}\n\n/* èƒŒæ™¯é¢œè‰² - å¤´åƒ */\nhtml[data-theme=dark] .Avatar, html[data-theme=dark] .UserAvatar {background-color: #2d333b !important;}\nhtml[data-theme=dark] .UserAvatar {border: 4px solid #2d333b !important;}\n\n/* é€šçŸ¥ä¿¡æ¯ä¸­ç‚¹è¯„è®ºé“¾æ¥æ—¶ï¼Œåœ¨å¼¹å‡ºçš„è¯„è®ºæ¡†ä¸­ \"é«˜äº®\" ç›®æ ‡è¯„è®º */\nhtml[data-theme=dark] .CommentItemV2[tabindex='-1'] {background-color: #343a44 !important;}\n\n/* æœç´¢æ¡† */\nhtml[data-theme=dark] .Input-wrapper.Input-wrapper--grey, html[data-theme=dark] .ChatSideBar-Search-Input input {background: #333a44 !important;}\n\n/* åŠ è½½åŠ¨ç”» */\nhtml[data-theme=dark] .PlaceHolder-bg {background: -webkit-gradient(linear,left top,right top,from(#22272e),color-stop(20%,#2d333b),color-stop(40%,#22272e),to(#22272e)) !important;background: linear-gradient(90deg,#22272e 0,#2d333b 20%,#22272e 40%,#22272e) !important;}\nhtml[data-theme=dark] .PlaceHolder-inner {background: #22272e !important;color: #2d333b !important;}\n\n/* ç§ä¿¡ */\nhtml[data-theme=dark] .Input-wrapper {background-color: #30363f !important;}\nhtml[data-theme=dark] .TextMessage-sender, html[data-theme=\"dark\"] .TextMessage-sender::after {background-color: #57616f !important;}\nhtml[data-theme=dark] .TextMessage-receiver, html[data-theme=\"dark\"] .TextMessage-receiver::after {background-color: #1e5fbf !important;}\n\nhtml[data-theme=dark] .TextMessage-sender, html[data-theme=dark] .TextMessage-receiver {color: #dcdcdc !important;}\n/*html[data-theme=dark] .MessagesBox::-webkit-scrollbar {width: 0px !important;height: 0px !important;}*/\nhtml[data-theme=dark] .ToolBar, html[data-theme=dark] .Input-wrapper, html[data-theme=dark] .ClubTopPosts, html[data-theme=dark] .ChatSideBar-Search-Input input {border: none !important;}\n\nhtml[data-theme=dark] .ChatBoxModal-closeIcon {fill: #8590a6 !important;}\n\n/* ç§ä¿¡ç½‘é¡µ */\nhtml[data-theme=dark] .ChatUserListItem .Chat-ActionMenuPopover-Button {background: -webkit-gradient(linear,left top,right top,from(rgba(18,18,18,0)),color-stop(20%,#22272e)) !important;background: linear-gradient(90deg,rgba(18,18,18,0),#22272e 20%) !important;}\nhtml[data-theme=dark] .css-1j6tmrz {border: 2px solid #2d333b !important;}\n\n/* é€‰é¡¹é¼ æ ‡æŒ‡å‘æ—¶èƒŒæ™¯é¢œè‰² */\nhtml[data-theme=dark] .Messages-item:hover, html[data-theme=dark] .GlobalSideBar-navLink:hover, html[data-theme=dark] .Menu-item.is-active, html[data-theme=dark] .ActionMenu-item:hover, html[data-theme=dark] .ChatUserListItem--active, html[data-theme=dark] .Messages-newItem {background-color: #272c33 !important;}\n/* é€šçŸ¥ */\nhtml[data-theme=dark] .PushNotifications-item a {color: #8ab5e0 !important;}\n\n/* å°é¢å¤§å›¾/æ–‡ç« å¤´éƒ¨å¤§å›¾ */\nhtml[data-theme=dark] img.UserCover-image, html[data-theme=dark] img.TitleImage {opacity: 0.7 !important;}\n/* å…¶ä»–å›¾ç‰‡ */\nhtml[data-theme=dark] img {opacity: 0.8 !important;}\n/* GIF åŠ¨å›¾ã€æ”¾å¤§å›¾é™¤å¤– */\nhtml[data-theme=dark] .GifPlayer img, html[data-theme=dark] .ImageView-img {opacity: 1 !important;}\n\n/* è¾¹æ¡† */\nhtml[data-theme=dark] .Topbar, html[data-theme=dark] .CommentsV2-footer, html[data-theme=dark] .Topstory-mainColumnCard .Card:not(.Topstory-tabCard), html[data-theme=dark] .NestComment:not(:last-child):after, html[data-theme=dark] .NestComment--rootComment:after, html[data-theme=dark] .NestComment .NestComment--child:after, html[data-theme=dark] .NestComment .NestComment--child:after, html[data-theme=dark] .CommentsV2-replyNum, html[data-theme=dark] .CommentItemV2:not(:first-child):after, html[data-theme=dark] .Tabs, html[data-theme=dark] .Popover-arrow:after, html[data-theme=dark] .SelfCollectionItem-innerContainer, html[data-theme=dark] .CollectionDetailPageItem-innerContainer {border-bottom: 1px solid #282d35 !important;}\nhtml[data-theme=dark] .CommentEditorV2-inputWrap--active, html[data-theme=dark] .CommentEditorV2-inputWrap, html[data-theme=dark] .PostItem, html[data-theme=dark] .AnswerForm .Editable-toolbar, html[data-theme=dark] .Editable-toolbar span {border: none !important;}\nhtml[data-theme=dark] .InputLike {border: 1px solid #424b56 !important;}\nhtml[data-theme=dark] .Popover .InputLike {border: 1px solid #2d333b !important;}\nhtml[data-theme=dark] .HotLanding-contentItem:not(:last-child) {border-bottom: 1px solid #424b56 !important;}\nhtml[data-theme=dark] .HotLanding-content {border-left: 2px solid #424b56 !important;}\n\nhtml[data-theme=dark] .Popover-content, html[data-theme=dark] .Popover-arrow:after {border: 1px solid #22272e !important;}\n\n/* æ»šåŠ¨æ¡ */\nhtml[data-theme=dark] body::-webkit-scrollbar, html[data-theme=\"dark\"] .MessagesBox::-webkit-scrollbar, html[data-theme=\"dark\"] .Messages-list::-webkit-scrollbar, html[data-theme=dark] .PushNotifications-list::-webkit-scrollbar, html[data-theme=dark] .CommentListV2::-webkit-scrollbar, .ChatListGroup-SectionContent::-webkit-scrollbar, html[data-theme=dark] .ChatSideBar-Search-ResultListWrap::-webkit-scrollbar, html[data-theme=dark] .ChatBox textarea.Input::-webkit-scrollbar {width: 6px !important;height: 1px !important;}\nhtml[data-theme=dark] body::-webkit-scrollbar-thumb, html[data-theme=\"dark\"] .MessagesBox::-webkit-scrollbar-thumb, html[data-theme=\"dark\"] .Messages-list::-webkit-scrollbar-thumb, html[data-theme=dark] .PushNotifications-list::-webkit-scrollbar-thumb, html[data-theme=dark] .CommentListV2::-webkit-scrollbar-thumb, .ChatListGroup-SectionContent::-webkit-scrollbar-thumb, html[data-theme=dark] .ChatSideBar-Search-ResultListWrap::-webkit-scrollbar-thumb, html[data-theme=dark] .ChatBox textarea.Input::-webkit-scrollbar-thumb {background: #3f4752 !important;}\nhtml[data-theme=dark] body::-webkit-scrollbar-track {background: #22272e !important;}\nhtml[data-theme=dark] .MessagesBox::-webkit-scrollbar-track, html[data-theme=\"dark\"] .Messages-list::-webkit-scrollbar-track, html[data-theme=dark] .PushNotifications-list::-webkit-scrollbar-track, html[data-theme=dark] .CommentListV2::-webkit-scrollbar-track, .ChatListGroup-SectionContent::-webkit-scrollbar-track, html[data-theme=dark] .ChatSideBar-Search-ResultListWrap::-webkit-scrollbar-track, html[data-theme=dark] .ChatBox textarea.Input::-webkit-scrollbar-track {background: #2d333b !important;}\n\n/* æ»šåŠ¨æ¡ - å›ç­”ç›®å½• */\nhtml[data-theme=dark] .AnswerItem .RichContent-hasCatalog .RichContent-inner .Catalog.isCatalogV2::-webkit-scrollbar {width: 0 !important;}\nhtml[data-theme=dark] .AnswerItem .RichContent-hasCatalog .RichContent-inner .Catalog.isCatalogV2 > :first-child {background: #2D333B !important;}\n\nhtml {scrollbar-width: thin; scrollbar-color: #3f4752 #22272e;}\n.MessagesBox, .Messages-list, .PushNotifications-list, .CommentListV2, .ChatListGroup-SectionContent, .ChatSideBar-Search-ResultListWrap {scrollbar-width: thin; scrollbar-color: #3f4752 #2D333B;}\n\n/* èƒŒæ™¯é¢œè‰² - ä¸“æ /æ–‡ç«  */\nhtml[data-theme=dark] .WhiteBg-body, html[data-theme=dark] .Post-content {background: #22272E !important;}\nhtml[data-theme=dark] .ColumnPageHeader, html[data-theme=dark] .BottomInfo {background: #1c2129 !important;}\n\n/* æŒ‰é’®é¢œè‰² */\n.TopstoryTabs-link.is-active, html[data-theme=dark] .TopstoryTabs-link.is-active, html[data-theme=dark] .VoteButton, .Tag, html[data-theme=dark] .Tag, html[data-theme=dark] .HotListNav-item.is-active, html[data-theme=dark] .RichText a.UserLink-link {color: #3faaff !important;}\n/*html[data-theme=dark] .Tabs-link.is-active:after {background: #2196F3 !important;}*/\nhtml[data-theme=dark] .Reward-rewardBtn, html[data-theme=dark] .SearchBar-searchIcon.hasValue, html[data-theme=dark] .Chat-UnreadCount, html[data-theme=dark] .Payment-CheckedButton {color: #ffffff !important;}\n\n/* å…³é—­æŸ¥çœ‹å›å¤æ—¶çš„é«˜é—ª */\nhtml[data-theme=dark] .CommentItemV2--highlighted {-webkit-animation: nano !important;animation: nano !important;}\n\n/* èµèµ */\nhtml[data-theme=dark] .Reward-TipjarDialog-amountList .Button--red, html[data-theme=dark] .Reward-TipjarDialog-amountList .Button--red, html[data-theme=dark] .Reward-TipjarDialog-amountInput .SimpleInput {color: #d3d3d3 !important; background-color: #353b44 !important; border: none !important;}\n\n/* èµåŒ */\nhtml[data-theme=dark] .VoteButton.is-active {color: #d6edff !important;}\n`,\n            style_darkMode_1_x = `/* é—®é¢˜æ—¥å¿—é¡µ */\nhtml[data-theme=dark] .zu-top {background: #2D333B !important;border: none !important;}\nhtml[data-theme=dark] .zm-tag-editor-labels.zg-clear a {background: rgba(51,119,255,.1) !important;}\nhtml[data-theme=dark] .zu-main {background: #2D333B !important;padding-left: 20px;padding-right: 20px;}\nhtml[data-theme=dark] .zm-item+.zm-item {border-top: 1px solid #424b56;}\nhtml[data-theme=dark] a {color: #D4E5F4 !important;}\nhtml[data-theme=dark] ins, html[data-theme=dark] ins a {color: #009688 !important;}\nhtml[data-theme=dark] del a {color: #E91E63 !important;}\nhtml[data-theme=dark] div#zh-hovercard a {color: #353535 !important;}\n            `,\n            style_darkMode_2 = `/* æš—é»‘æ¨¡å¼ï¼ˆæ–¹æ¡ˆ 2ï¼‰ */\nhtml {filter: invert(90%) !important; text-shadow: 0 0 0 !important;}\nhtml[data-theme=light] body.ZVideo-body {background-color: #fff;}\nimg, .ZVideoItem-video, .ZVideo-video, .VideoAnswerPlayer-video {filter: invert(1) !important;}\n.css-5ym188, body>div>div>span+div>div[style='opacity: 1;'] {background-color: rgba(255, 255, 255, 0.65) !important;}\n.GifPlayer img, .GifPlayer.isPlaying video {filter: invert(1) !important;}\n.GifPlayer.isPlaying img.ztext-gif.GifPlayer-gif2mp4Image, img[alt=\"[å…¬å¼]\"] {filter: none !important;}\n`,\n            style_darkMode_2_firefox = `/* æš—é»‘æ¨¡å¼ï¼ˆæ–¹æ¡ˆ 2ï¼‰ */\nhtml {filter: invert(90%) !important; background-image: url(); text-shadow: 0 0 0 !important;}\nhtml[data-theme=light] body.ZVideo-body {background-color: #fff;}\nimg, .ZVideoItem-video, .ZVideo-video, .VideoAnswerPlayer-video {filter: invert(1) !important;}\n.GifPlayer img, .GifPlayer.isPlaying video {filter: invert(1) !important;}\n.GifPlayer.isPlaying img.ztext-gif.GifPlayer-gif2mp4Image {filter: none !important;}\n`,\n            style_darkMode_3 = `/* æš—é»‘æ¨¡å¼ï¼ˆæ–¹æ¡ˆ 3ï¼‰ */\nhtml {filter: brightness(70%) !important;}\n`,\n            style_darkMode_3_firefox = `/* æš—é»‘æ¨¡å¼ï¼ˆæ–¹æ¡ˆ 3ï¼‰ */\nhtml {filter: brightness(70%) !important; background-image: url();}\n`,\n            style_darkMode_4 = `/* æš—é»‘æ¨¡å¼ï¼ˆæ–¹æ¡ˆ 4ï¼‰ */\nhtml {filter: brightness(65%) sepia(30%) !important;}\n`,\n             style_darkMode_4_firefox = `/* æš—é»‘æ¨¡å¼ï¼ˆæ–¹æ¡ˆ 4ï¼‰ */\nhtml {filter: brightness(65%) sepia(30%) !important; background-image: url();}\n`\n        let style_Add = document.createElement('style');\n\n\n\n        // å¦‚æœå¼€å¯äº† [æš—é»‘æ¨¡å¼]\n        if (menu_value('menu_darkMode')) {\n            // firefox æµè§ˆå™¨\n            if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {\n                style_darkMode_2 = style_darkMode_2_firefox\n                style_darkMode_3 = style_darkMode_3_firefox\n                style_darkMode_4 = style_darkMode_4_firefox\n            }\n\n            // å¦‚æœå¼€å¯äº† [æš—é»‘æ¨¡å¼è·Ÿéšæµè§ˆå™¨] ä¸” å½“å‰æµè§ˆå™¨æ˜¯æš—é»‘æ¨¡å¼\n            if (menu_value('menu_darkModeAuto') && !window.matchMedia('(prefers-color-scheme: dark)').matches) {\n                // å¦‚æœæ˜¯æš—é»‘æ¨¡å¼ï¼Œåˆ™éœ€è¦æ”¹ä¸ºç™½å¤©æ¨¡å¼\n                if (getTheme() === 'dark') {\n                    setTheme('light');\n                }\n            } else {\n                // å¦‚æœæš—é»‘æ¨¡å¼ä¸º 1\n                if (menu_value('menu_darkModeType') === 1) {\n                    // å¦‚æœå½“å‰çŸ¥ä¹ä¸»é¢˜ä¸ºç™½å¤©æ¨¡å¼ï¼Œé‚£å°±æ˜¯æ”¹ä¸ºæš—é»‘æ¨¡å¼\n                    if (getTheme() === 'light') {\n                        setTheme('dark');\n                    }\n                    // å¦‚æœæ˜¯é—®é¢˜æ—¥å¿—é¡µï¼Œåˆ™æ”¹ä¸ºæš—é»‘æ¨¡å¼\n                    if (location.pathname.indexOf('/log') > -1) {\n                        document.documentElement.setAttribute('data-theme', 'dark');\n                        style_darkMode_1 += style_darkMode_1_x;\n                    }\n                } else { // å¦‚æœæ˜¯å…¶ä»–æš—é»‘æ¨¡å¼ï¼Œåˆ™éœ€è¦ç¡®ä¿ä¸ºç™½å¤©æ¨¡å¼\n                    if (getTheme() === 'dark') {\n                        setTheme('light');\n                    }\n                }\n                switch(menu_value('menu_darkModeType')) {\n                    case 1:\n                        if (!(location.hostname.indexOf('zhuanlan') > -1 && (location.pathname.indexOf('/edit') > -1 || location.pathname.indexOf('/write') > -1))) style += style_darkMode_1;\n                        break;\n                    case 2:\n                        style += style_darkMode_2;\n                        break;\n                    case 3:\n                        style += style_darkMode_3;\n                        break;\n                    case 4:\n                        style += style_darkMode_4;\n                        break;\n                }\n            }\n        } else {\n            if (getTheme() === 'dark'){\n                setTheme('light');\n            }\n        }\n\n        if (location.pathname === '/' || location.pathname === '/hot' || location.pathname === '/follow') style += style_index;\n        if (menu_value('menu_darkMode') && menu_value('menu_darkModeType') === 1 && (location.pathname.indexOf('/special/') > -1 || location.pathname.indexOf('/pub/') > -1)) style += style_darkMode_2 + 'video {filter: invert(1) !important;}';\n\n        // å®½å±æ˜¾ç¤º\n        if (menu_value('menu_widescreenDisplayIndex')) style += style_widescreenDisplayIndex;\n        if (menu_value('menu_widescreenDisplayQuestion') && location.pathname.indexOf('/question/') > -1) style += style_widescreenDisplayQuestion;\n        if (menu_value('menu_widescreenDisplaySearch') && (location.pathname === '/search' || location.pathname.indexOf('/club/') > -1 || location.pathname.indexOf('/topic/') > -1)) style += style_widescreenDisplaySearch;\n        if (menu_value('menu_widescreenDisplayCollection') && location.pathname.indexOf('/collection/') > -1) style += style_widescreenDisplayCollection;\n        if (menu_value('menu_widescreenDisplayPost') && location.hostname.indexOf('zhuanlan') > -1 && (location.pathname.indexOf('/edit') === -1 || location.pathname.indexOf('/write') === -1)) style += style_widescreenDisplayPost;\n        if (menu_value('menu_widescreenDisplayPeople') && location.pathname.indexOf('/people/') > -1) style += style_widescreenDisplayPeople;\n\n        // è°ƒæ•´å›¾ç‰‡æœ€å¤§é«˜åº¦\n        if (menu_value('menu_picHeight')) style += style_4;\n        // éšè—æ–‡ç« å¼€å¤´å¤§å›¾\n        if (menu_value('menu_postimg')) style += style_2;\n        // å‘ä¸‹ç¿»æ—¶è‡ªåŠ¨éšè—é¡¶æ \n        if (menu_value('menu_hideTitle')) style += style_3;\n\n        if (document.lastChild) {\n            document.lastChild.appendChild(style_Add).textContent = style;\n        } else { // é¿å…ç½‘ç«™åŠ è½½é€Ÿåº¦å¤ªæ…¢çš„å¤‡ç”¨æªæ–½\n            let timer1 = setInterval(function(){ // æ¯ 10 æ¯«ç§’æ£€æŸ¥ä¸€ä¸‹ html æ˜¯å¦å·²å­˜åœ¨\n                if (document.lastChild) {\n                    clearInterval(timer1); // å–æ¶ˆå®šæ—¶å™¨\n                    document.lastChild.appendChild(style_Add).textContent = style;\n                }\n            });\n        }\n    }\n\n\n    // è·å–çŸ¥ä¹ Cookie ä¸­çš„ä¸»é¢˜ç±»å‹\n    function getTheme() {\n        let name = 'theme=',\n            ca = document.cookie.split(';');\n        for (let i=0; i<ca.length; i++) {\n            let c = ca[i].trim();\n            if (c.indexOf(name)==0) return c.substring(name.length,c.length);\n        }\n        return 'light';\n    }\n\n    // ä¿®æ”¹çŸ¥ä¹ Cookie ä¸­çš„ä¸»é¢˜ç±»å‹\n    function setTheme(theme) {\n        switch(theme) {\n            case 'light':\n                document.cookie='theme=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/';\n                document.lastChild.setAttribute('data-theme', 'light');\n                location.reload(); // åˆ·æ–°ç½‘é¡µ\n                break;\n            case 'dark':\n                document.cookie='theme=dark; expires=Thu, 18 Dec 2031 12:00:00 GMT; path=/';\n                document.lastChild.setAttribute('data-theme', 'dark');\n                if (GM_getValue('menu_darkMode')) location.reload(); // åˆ·æ–°ç½‘é¡µ\n                break;\n        }\n    }\n})();"
        },
        {
          "name": "Zhihu-Enhanced.user.js",
          "type": "blob",
          "size": 99.1240234375,
          "content": "// ==UserScript==\n// @name         çŸ¥ä¹å¢å¼º\n// @name:zh-CN   çŸ¥ä¹å¢å¼º\n// @name:zh-TW   çŸ¥ä¹å¢å¼·\n// @name:en      Zhihu enhancement\n// @version      2.3.12\n// @author       X.I.U\n// @description  å±è”½æŒ‡å®šç±»åˆ«ï¼ˆè§†é¢‘ã€ç›é€‰ã€æ–‡ç« ã€æƒ³æ³•ã€å…³æ³¨[èµåŒäº†XX/å…³æ³¨äº†XX]ç­‰ç­‰ï¼‰ã€å±è”½ç”¨æˆ·ã€å±è”½å…³é”®è¯ã€é»˜è®¤æ”¶èµ·å›ç­”ã€å¿«æ·æ”¶èµ·å›ç­”/è¯„è®ºï¼ˆå·¦é”®ä¸¤ä¾§ï¼‰ã€å¿«æ·å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ä¸¤ä¾§ï¼‰ã€åŒºåˆ†é—®é¢˜æ–‡ç« ã€ç§»é™¤é«˜äº®é“¾æ¥ã€å‡€åŒ–æœç´¢çƒ­é—¨ã€å‡€åŒ–æ ‡é¢˜æ¶ˆæ¯ã€å±•å¼€é—®é¢˜æè¿°ã€æ˜¾ç¤ºé—®é¢˜ä½œè€…ã€é»˜è®¤é«˜æ¸…åŸå›¾ï¼ˆæ— æ°´å°ï¼‰ã€ç½®é¡¶æ˜¾ç¤ºæ—¶é—´ã€å®Œæ•´é—®é¢˜æ—¶é—´ã€ç›´è¾¾é—®é¢˜æŒ‰é’®ã€é»˜è®¤ç«™å¤–ç›´é“¾...\n// @description:zh-TW  å±è”½æŒ‡å®šé¡åˆ¥ï¼ˆè¦–é »ã€é¹½é¸ã€æ–‡ç« ã€æƒ³æ³•ã€é—œæ³¨[è´ŠåŒäº†XX/é—œæ³¨äº†XX]ç­‰ç­‰ï¼‰ã€å±è”½ç”¨æˆ¶ã€å±è”½é—œéµè©ã€é»˜èªæ”¶èµ·å›ç­”ã€å¿«æ·æ”¶èµ·å›ç­”/è©•è«–ã€å¿«æ·å›åˆ°é ‚éƒ¨ã€å€åˆ†å•é¡Œæ–‡ç« ã€ç§»é™¤é«˜äº®éˆæ¥ã€é»˜èªé«˜æ¸…åŸåœ–ï¼ˆç„¡æ°´å°ï¼‰ã€é»˜èªç«™å¤–ç›´éˆ...\n// @description:en  A more personalized Zhihu experience~\n// @match        *://www.zhihu.com/*\n// @match        *://zhuanlan.zhihu.com/*\n// @exclude      https://www.zhihu.com/signin*\n// @icon         data:image/png;base64,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\n// @grant        GM_xmlhttpRequest\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @grant        GM_info\n// @grant        window.onurlchange\n// @sandbox      JavaScript\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://greasyfork.org/scripts/4122051\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n'use strict';\nvar menu_ALL = [\n    ['menu_defaultCollapsedAnswer', 'é»˜è®¤æ”¶èµ·å›ç­”', 'é»˜è®¤æ”¶èµ·å›ç­”', true],\n    ['menu_collapsedAnswer', 'ä¸€é”®æ”¶èµ·å›ç­”/è¯„è®º', 'ä¸€é”®æ”¶èµ·å›ç­”/è¯„è®º', true],\n    ['menu_collapsedNowAnswer', 'å¿«æ·æ”¶èµ·å›ç­”/è¯„è®º (ç‚¹å‡»ä¸¤ä¾§ç©ºç™½å¤„)', 'å¿«æ·æ”¶èµ·å›ç­”/è¯„è®º', true],\n    ['menu_backToTop', 'å¿«æ·å›åˆ°é¡¶éƒ¨ (å³é”®ä¸¤ä¾§ç©ºç™½å¤„)', 'å¿«æ·å›åˆ°é¡¶éƒ¨', true],\n    ['menu_blockUsers', 'å±è”½æŒ‡å®šç”¨æˆ·', 'å±è”½æŒ‡å®šç”¨æˆ·', true],\n    ['menu_customBlockUsers', 'è‡ªå®šä¹‰å±è”½ç”¨æˆ·', 'è‡ªå®šä¹‰å±è”½ç”¨æˆ·', ['æ•…äº‹æ¡£æ¡ˆå±€', 'ç›é€‰æ¨è', 'ç›é€‰ç§‘æ™®', 'ç›é€‰æˆé•¿è®¡åˆ’', 'çŸ¥ä¹ç›é€‰ä¼šå‘˜', 'çŸ¥ä¹ç›é€‰åˆ›ä½œè€…', 'ç›é€‰å¿ƒç†', 'ç›é€‰å¥åº·å¿…ä¿®è¯¾', 'ç›é€‰å¥‡å¦™ç‰©è¯­', 'ç›é€‰ç”Ÿæ´»é¦†', 'ç›é€‰èŒåœº', 'ç›é€‰æ–‡å­¦ç”„é€‰', 'ç›é€‰ä½œè€…å°ç®¡å®¶', 'ç›é€‰åšç‰©é¦†', 'ç›é€‰ç‚¹é‡‘', 'ç›é€‰æµ‹è¯„å®¤', 'ç›é€‰ç§‘æŠ€å‰æ²¿', 'ç›é€‰ä¼šå‘˜ç²¾å“']],\n    ['menu_blockKeywords', 'å±è”½æŒ‡å®šå…³é”®è¯', 'å±è”½æŒ‡å®šå…³é”®è¯', true],\n    ['menu_blockKeywordsComment', 'å±è”½å…³é”®è¯ - è¯„è®ºåŒº', 'å±è”½å…³é”®è¯ - è¯„è®ºåŒº', true],\n    ['menu_customBlockKeywords', 'è‡ªå®šä¹‰å±è”½å…³é”®è¯', 'è‡ªå®šä¹‰å±è”½å…³é”®è¯', []],\n    ['menu_blockType', 'å±è”½æŒ‡å®šç±»åˆ« (è§†é¢‘/æ–‡ç« ç­‰)', 'å‹¾é€‰ = å±è”½è¯¥ç±»åˆ«çš„ä¿¡æ¯æµ', ''],\n    ['menu_blockTypeVideo', 'è§†é¢‘ [é¦–é¡µã€æœç´¢é¡µã€é—®é¢˜é¡µã€å…³æ³¨é¡µ]', 'è§†é¢‘ï¼ˆé¦–é¡µã€æœç´¢é¡µã€é—®é¢˜é¡µã€å…³æ³¨é¡µï¼‰', true],\n    ['menu_blockTypeArticle', 'æ–‡ç«  [é¦–é¡µã€æœç´¢é¡µã€å…³æ³¨é¡µ]', 'æ–‡ç« ï¼ˆé¦–é¡µã€æœç´¢é¡µã€å…³æ³¨é¡µï¼‰', false],\n    ['menu_blockTypePin', 'æƒ³æ³• [é¦–é¡µã€å…³æ³¨é¡µ]', 'æƒ³æ³•ï¼ˆé¦–é¡µã€å…³æ³¨é¡µï¼‰', false],\n    ['menu_blockTypeFollowAgree', 'èµåŒäº†XX [å…³æ³¨é¡µ]', 'èµåŒäº†XXï¼ˆå…³æ³¨é¡µï¼‰', false],\n    ['menu_blockTypeFollowQuestion', 'å…³æ³¨äº†XX [å…³æ³¨é¡µ]', 'å…³æ³¨äº†XXï¼ˆå…³æ³¨é¡µï¼‰', false],\n    ['menu_blockTypeTopic', 'è¯é¢˜ [æœç´¢é¡µ]', 'è¯é¢˜ï¼ˆæœç´¢é¡µï¼‰', false],\n    ['menu_blockTypeSearch', 'æ‚å¿—æ–‡ç« ã€ç›é€‰ä¸“æ ã€ç›¸å…³æœç´¢ç­‰ [æœç´¢é¡µ]', 'ç›¸å…³æœç´¢ã€æ‚å¿—ã€ç›é€‰ç­‰ï¼ˆæœç´¢é¡µï¼‰', false],\n    ['menu_blockYanXuan', 'ç›é€‰å†…å®¹ [é—®é¢˜é¡µ]', 'ç›é€‰å†…å®¹ï¼ˆé—®é¢˜é¡µï¼‰', false],\n    ['menu_blockTypeLiveHot', 'çƒ­æ¦œæ–‡ç« ã€ç›´æ’­ã€å¹¿å‘Šç­‰ [çƒ­æ¦œ]', 'çƒ­æ¦œæ–‡ç« ã€ç›´æ’­ã€å¹¿å‘Šç­‰ [çƒ­æ¦œ]', true],\n    ['menu_cleanHighlightLink', 'ç§»é™¤é«˜äº®é“¾æ¥ (é«˜äº®çš„æ–‡å­—é“¾æ¥)', 'ç§»é™¤é«˜äº®é“¾æ¥', true],\n    ['menu_cleanSearch', 'å‡€åŒ–æœç´¢çƒ­é—¨ (é»˜è®¤æœç´¢è¯åŠçƒ­é—¨æœç´¢)', 'å‡€åŒ–æœç´¢çƒ­é—¨', false],\n    ['menu_cleanTitles', 'å‡€åŒ–æ ‡é¢˜æ¶ˆæ¯ (æ ‡é¢˜ä¸­çš„ç§ä¿¡/æ¶ˆæ¯)', 'å‡€åŒ–æ ‡é¢˜æé†’', false],\n    ['menu_questionRichTextMore', 'å±•å¼€é—®é¢˜æè¿°', 'å±•å¼€é—®é¢˜æè¿°', false],\n    ['menu_publishTop', 'ç½®é¡¶æ˜¾ç¤ºæ—¶é—´', 'ç½®é¡¶æ˜¾ç¤ºæ—¶é—´', true],\n    ['menu_typeTips', 'åŒºåˆ†é—®é¢˜æ–‡ç« ', 'åŒºåˆ†é—®é¢˜æ–‡ç« ', true],\n    ['menu_toQuestion', 'ç›´è¾¾é—®é¢˜æŒ‰é’®', 'ç›´è¾¾é—®é¢˜æŒ‰é’®', true]\n], menu_ID = [];\nfor (let i=0;i<menu_ALL.length;i++){ // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n    if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};\n}\nregisterMenuCommand();\n\n// æ³¨å†Œè„šæœ¬èœå•\nfunction registerMenuCommand() {\n    if (menu_ID.length > menu_ALL.length){ // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n        for (let i=0;i<menu_ID.length;i++){\n            GM_unregisterMenuCommand(menu_ID[i]);\n        }\n    }\n    for (let i=0;i<menu_ALL.length;i++){ // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n        menu_ALL[i][3] = GM_getValue(menu_ALL[i][0]);\n        if (menu_ALL[i][0] === 'menu_customBlockUsers') { // åªæœ‰ [å±è”½æŒ‡å®šç”¨æˆ·] å¯ç”¨æ—¶ï¼Œæ‰æ³¨å†Œèœå• [è‡ªå®šä¹‰å±è”½ç”¨æˆ·]\n            if (menu_value('menu_blockUsers')) menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){customBlockUsers()});\n        } else if (menu_ALL[i][0] === 'menu_customBlockKeywords') { // åªæœ‰ [å±è”½æŒ‡å®šå…³é”®è¯] å¯ç”¨æ—¶ï¼Œæ‰æ³¨å†Œèœå• [è‡ªå®šä¹‰å±è”½å…³é”®è¯]\n            if (menu_value('menu_blockKeywords')) menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){customBlockKeywords()});\n        } else if (menu_ALL[i][0] === 'menu_blockKeywordsComment') { // åªæœ‰ [å±è”½æŒ‡å®šå…³é”®è¯] å¯ç”¨æ—¶ï¼Œæ‰æ³¨å†Œèœå• [å±è”½å…³é”®è¯ - è¯„è®ºåŒº]\n            if (menu_value('menu_blockKeywords')) menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n        } else if (menu_ALL[i][0] === 'menu_blockType') { // å±è”½æŒ‡å®šç±»åˆ« ä½¿ç”¨å•ç‹¬çš„è®¾ç½®ç•Œé¢\n            menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){menu_setting('checkbox', menu_ALL[i][1], menu_ALL[i][2], true, [menu_ALL[i+1], menu_ALL[i+2], menu_ALL[i+3], menu_ALL[i+4], menu_ALL[i+5], menu_ALL[i+6], menu_ALL[i+7], menu_ALL[i+8], menu_ALL[i+9]])});\n        } else if (menu_ALL[i][0].indexOf('menu_blockType') == -1 && menu_ALL[i][0] != 'menu_blockYanXuan') { // æ’é™¤ä½¿ç”¨å•ç‹¬è®¾ç½®ç•Œé¢çš„ å±è”½æŒ‡å®šç±»åˆ« é¡¹\n            menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n        }\n    }\n    menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/419081/feedback', {active: true,insert: true,setParent: true});});\n}\n\n\n// èœå•å¼€å…³\nfunction menu_switch(menu_status, Name, Tips) {\n    if (menu_status == 'true'){\n        GM_setValue(`${Name}`, false);\n        GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n    }else{\n        GM_setValue(`${Name}`, true);\n        GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n    }\n    registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n};\n\n\n// è¿”å›èœå•å€¼\nfunction menu_value(menuName) {\n    for (let menu of menu_ALL) {\n        if (menu[0] == menuName) {\n            return menu[3]\n        }\n    }\n}\n\n\n// è„šæœ¬è®¾ç½®\nfunction menu_setting(type, title, tips, line, menu) {\n    let _br = '', _html = `<style class=\"zhihuE_SettingStyle\">.zhihuE_SettingRoot {position: absolute;top: 50%;left: 50%;-webkit-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-o-transform: translate(-50%, -50%);transform: translate(-50%, -50%);width: auto;min-width: 400px;max-width: 600px;height: auto;min-height: 150px;max-height: 400px;color: #535353;background-color: #fff;border-radius: 3px;}\n.zhihuE_SettingBackdrop_1 {position: fixed;top: 0;right: 0;bottom: 0;left: 0;z-index: 203;display: -webkit-box;display: -ms-flexbox;display: flex;-webkit-box-orient: vertical;-webkit-box-direction: normal;-ms-flex-direction: column;flex-direction: column;-webkit-box-pack: center;-ms-flex-pack: center;justify-content: center;overflow-x: hidden;overflow-y: auto;-webkit-transition: opacity .3s ease-out;transition: opacity .3s ease-out;}\n.zhihuE_SettingBackdrop_2 {position: absolute;top: 0;right: 0;bottom: 0;left: 0;z-index: 0;background-color: rgba(18,18,18,.65);-webkit-transition: background-color .3s ease-out;transition: background-color .3s ease-out;}\n.zhihuE_SettingRoot .zhihuE_SettingHeader {padding: 10px 20px;color: #fff;font-weight: bold;background-color: #3994ff;border-radius: 3px 3px 0 0;}\n.zhihuE_SettingRoot .zhihuE_SettingMain {padding: 10px 20px;border-radius: 0 0 3px 3px;}\n.zhihuE_SettingHeader span {float: right;cursor: pointer;}\n.zhihuE_SettingMain input {margin: 10px 6px 10px 0;cursor: pointer;vertical-align:middle}\n.zhihuE_SettingMain label {margin-right: 20px;user-select: none;cursor: pointer;vertical-align:middle}\n.zhihuE_SettingMain hr {border: 0.5px solid #f4f4f4;}\n[data-theme=\"dark\"] .zhihuE_SettingRoot {color: #adbac7;background-color: #343A44;}\n[data-theme=\"dark\"] .zhihuE_SettingHeader {color: #d0d0d0;background-color: #2D333B;}\n[data-theme=\"dark\"] .zhihuE_SettingMain hr {border: 0.5px solid #2d333b;}</style>\n        <div class=\"zhihuE_SettingBackdrop_1\"><div class=\"zhihuE_SettingBackdrop_2\"></div><div class=\"zhihuE_SettingRoot\">\n            <div class=\"zhihuE_SettingHeader\">${title}<span class=\"zhihuE_SettingClose\" title=\"ç‚¹å‡»å…³é—­\"><svg class=\"Zi Zi--Close Modal-closeIcon\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z\" fill-rule=\"evenodd\"></path></svg></span></div>\n            <div class=\"zhihuE_SettingMain\"><p>${tips}</p><hr>`\n    if (line) _br = '<br>'\n    for (let i=0; i<menu.length; i++) {\n        if (GM_getValue(menu[i][0])) {\n            _html += `<label><input name=\"zhihuE_Setting\" type=\"checkbox\" value=\"${menu[i][0]}\" checked=\"checked\">${menu[i][1]}</label>${_br}`\n        } else {\n            _html += `<label><input name=\"zhihuE_Setting\" type=\"checkbox\" value=\"${menu[i][0]}\">${menu[i][1]}</label>${_br}`\n        }\n    }\n    _html += `</div></div></div>`\n    document.body.insertAdjacentHTML('beforeend', _html); // æ’å…¥ç½‘é¡µæœ«å°¾\n    setTimeout(function() { // å»¶è¿Ÿ 100 æ¯«ç§’ï¼Œé¿å…å¤ªå¿«\n        // å…³é—­æŒ‰é’® ç‚¹å‡»äº‹ä»¶\n        document.querySelector('.zhihuE_SettingClose').onclick = function(){this.parentElement.parentElement.parentElement.remove();document.querySelector('.zhihuE_SettingStyle').remove();}\n        // ç‚¹å‡»å‘¨å›´ç©ºç™½å¤„ = ç‚¹å‡»å…³é—­æŒ‰é’®\n        document.querySelector('.zhihuE_SettingBackdrop_2').onclick = function(event){if (event.target == this) {document.querySelector('.zhihuE_SettingClose').click();};}\n        // å¤é€‰æ¡† ç‚¹å‡»äº‹ä»¶\n        document.getElementsByName('zhihuE_Setting').forEach(function (checkBox) {\n            checkBox.addEventListener('click', function(){if (this.checked) {GM_setValue(this.value, true);} else {GM_setValue(this.value, false);}});\n        })\n    }, 100)\n}\n\n\n// æ·»åŠ æ”¶èµ·å›ç­”è§‚å¯Ÿå™¨\nfunction getCollapsedAnswerObserver() {\n    if (!window._collapsedAnswerObserver) {\n        const observer = new MutationObserver(mutations => {\n            for (const mutation of mutations) {\n                if (mutation.target.hasAttribute('script-collapsed')) return\n                // çŸ­çš„å›ç­”\n                if (mutation.target.classList.contains('RichContent')) {\n                    for (const addedNode of mutation.addedNodes) {\n                        if (addedNode.nodeType != Node.ELEMENT_NODE) continue\n                        if (addedNode.className != 'RichContent-inner') continue\n                        if (addedNode.offsetHeight < 400) break\n                        //console.log('111',addedNode, addedNode.classList, addedNode.classList.contains('RichContent-inner'), addedNode.offsetHeight, addedNode.textContent.length)\n                        const button = mutation.target.querySelector('.ContentItem-actions.Sticky [data-zop-retract-question]');\n                        if (button) {\n                            mutation.target.setAttribute('script-collapsed', '');\n                            button.click();\n                            return\n                        }\n                    }\n                // é•¿çš„å›ç­”\n                } else if (mutation.target.tagName === 'DIV' && !mutation.target.style.cssText && !mutation.target.className) {\n                    if (mutation.target.parentElement.hasAttribute('script-collapsed')) return\n                    //console.log('222',mutation.target, mutation.target.querySelector('.ContentItem-actions.Sticky [data-zop-retract-question]'))\n                    const button = mutation.target.querySelector('.ContentItem-actions.Sticky [data-zop-retract-question]');\n                    if (button) {\n                        mutation.target.parentElement.setAttribute('script-collapsed', '');\n                        button.click();\n                        return\n                    }\n                }\n            }\n        })\n\n        observer.start = function() {\n            if (!this._active) {\n                this.observe(document, { childList: true, subtree: true });\n                this._active = true;\n            }\n        }\n        observer.end = function() {\n            if (this._active) {\n                this.disconnect();\n            }\n        }\n\n        window.addEventListener('urlchange', function() {\n            observer[location.href.indexOf('/answer/') === -1 ? 'start' : 'end']();\n        })\n        window._collapsedAnswerObserver = observer;\n    }\n    return window._collapsedAnswerObserver\n}\n\n\n// é»˜è®¤æ”¶èµ·å›ç­”\nfunction defaultCollapsedAnswer() {\n    if (!menu_value('menu_defaultCollapsedAnswer')) return\n    const observer = getCollapsedAnswerObserver();\n    if (location.href.indexOf('/answer/') === -1) {\n        observer.start();\n    }\n}\n\n\n// ä¸€é”®æ”¶èµ·å›ç­”+è¯„è®ºï¼ˆå…¨éƒ¨ï¼‰\nfunction collapsedAnswer() {\n    if (!menu_value('menu_collapsedAnswer')) return\n    //console.log('1111', document.querySelector('.CornerAnimayedFlex'))\n    if (document.querySelector('.CornerAnimayedFlex') && !document.getElementById('collapsed-button')) {\n        // å‘ç½‘é¡µä¸­æ’å…¥æ”¶èµ·å…¨éƒ¨å›ç­”æŒ‰é’®+æ ·å¼+ç»‘å®šç‚¹å‡»äº‹ä»¶\n        document.head.appendChild(document.createElement('style')).textContent = '.CornerButton{margin-bottom:8px !important;}.CornerButtons{bottom:45px !important;}';\n        document.querySelector('.CornerAnimayedFlex').insertAdjacentHTML('afterBegin', '<button id=\"collapsed-button\" data-tooltip=\"æ”¶èµ·å…¨éƒ¨å›ç­”/è¯„è®º\" data-tooltip-position=\"left\" data-tooltip-will-hide-on-click=\"false\" aria-label=\"æ”¶èµ·å…¨éƒ¨å›ç­”/è¯„è®º\" type=\"button\" class=\"' + document.querySelector('.CornerAnimayedFlex>button').className + '\"><svg class=\"ContentItem-arrowIcon is-active\" aria-label=\"æ”¶èµ·å…¨éƒ¨å›ç­”/è¯„è®º\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z\"></path></svg></button>');\n        document.getElementById('collapsed-button').onclick = function () {\n\n            // æ”¶èµ·æ‰€æœ‰è¯„è®ºï¼ˆæ‚¬æµ®çš„ [æ”¶èµ·è¯„è®º]ï¼‰\n            document.querySelectorAll('.Comments-container').forEach(function (el) {\n                let commentCollapseButton = getXpath('//button[text()=\"æ”¶èµ·è¯„è®º\"]', el)\n                if (commentCollapseButton) commentCollapseButton.click();\n            });\n            // æ”¶èµ·æ‰€æœ‰è¯„è®ºï¼ˆå›ºå®šçš„ [æ”¶èµ·è¯„è®º]ï¼‰\n            document.querySelectorAll('.RichContent >.ContentItem-actions>button:first-of-type').forEach(function (el) {\n                if (el.textContent.indexOf('æ”¶èµ·è¯„è®º') > -1) el.click()\n            });\n\n            if (location.pathname === '/' || location.pathname === '/hot' || location.pathname === '/follow') {// å¯¹äºé¦–é¡µçš„å…³æ³¨ã€æ¨èã€çƒ­æ¦œ\n                document.querySelectorAll('.ContentItem-rightButton').forEach(function (el) {if (el.hasAttribute('data-zop-retract-question')) {el.click();};});\n            } else {\n                // è¢« getCollapsedAnswerObserver å‡½æ•°æ”¶èµ·è¿‡çš„ï¼Œå›ºå®š [æ”¶èµ·] æŒ‰é’®\n                document.querySelectorAll('[script-collapsed]').forEach(function(scriptCollapsed) {scriptCollapsed.querySelectorAll('.ContentItem-actions [data-zop-retract-question], .ContentItem-actions.Sticky [data-zop-retract-question]').forEach(function(button) {button.click();});})\n                // è¢« getCollapsedAnswerObserver å‡½æ•°æ”¶èµ·è¿‡çš„ï¼Œæ‚¬æµ® [æ”¶èµ·] æŒ‰é’®ï¼ˆæ‚¬æµ®åº•éƒ¨çš„æ¨ªæ ï¼‰\n                document.querySelectorAll('.RichContent:not([script-collapsed]) .ContentItem-actions.Sticky [data-zop-retract-question]').forEach(function(button) {\n                    let el = button.parentElement;\n                    while (!el.classList.contains('RichContent')) {el = el.parentElement;}\n                    if (el) el.setAttribute('script-collapsed', '');\n                    button.click();\n                })\n\n                const observer = getCollapsedAnswerObserver();\n                observer.start();\n\n                if (!menu_value('menu_defaultCollapsedAnswer') && !observer._disconnectListener) {\n                    window.addEventListener('urlchange', function() {\n                        observer.end();\n                        window._collapsedAnswerObserver = null;\n                    })\n                    observer._disconnectListener = true;\n                }\n            }\n        }\n    }\n}\n\n\n// æ”¶èµ·å½“å‰å›ç­”ã€è¯„è®ºï¼ˆç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»ç½‘é¡µä¸¤ä¾§ç©ºç™½å¤„ï¼‰\nfunction collapsedNowAnswer(selectors) {\n    backToTop(selectors) // å¿«æ·å›åˆ°é¡¶éƒ¨\n    if (!menu_value('menu_collapsedNowAnswer')) return\n    document.querySelector(selectors).onclick = function(event){\n        if (event.target == this) {\n            // ä¸‹é¢è¿™æ®µä¸»è¦æ˜¯ [æ”¶èµ·å›ç­”]ï¼Œé¡ºä¾¿ [æ”¶èµ·è¯„è®º]ï¼ˆå¦‚æœå±•å¼€äº†çš„è¯ï¼‰\n            let rightButton = document.querySelector('.ContentItem-actions.Sticky.RichContent-actions.is-fixed.is-bottom')\n            if (rightButton) { // æ‚¬æµ®åœ¨åº•éƒ¨çš„ [æ”¶èµ·å›ç­”]ï¼ˆæ­¤æ—¶æ­£åœ¨æµè§ˆå›ç­”å†…å®¹ [ä¸­é—´åŒºåŸŸ]ï¼‰\n                // å›ºå®šçš„ [æ”¶èµ·è¯„è®º]ï¼ˆå…ˆçœ‹çœ‹æ˜¯å¦å±•å¼€è¯„è®ºï¼‰\n                let commentCollapseButton = rightButton.querySelector('button.Button.ContentItem-action.Button--plain.Button--withIcon.Button--withLabel:first-of-type')\n                //console.log('111')\n                if (commentCollapseButton && commentCollapseButton.textContent.indexOf('æ”¶èµ·è¯„è®º') > -1) commentCollapseButton.click();\n                // å†å»æ”¶èµ·å›ç­”\n                rightButton = rightButton.querySelector('.ContentItem-rightButton[data-zop-retract-question]')\n                //console.log('222')\n                if (rightButton) rightButton.click();\n\n            } else { // å›ºå®šåœ¨å›ç­”åº•éƒ¨çš„ [æ”¶èµ·å›ç­”]ï¼ˆæ­¤æ—¶æ­£åœ¨æµè§ˆå›ç­”å†…å®¹ [å°¾éƒ¨åŒºåŸŸ]ï¼‰\n\n                // æ‚¬æµ®çš„ [æ”¶èµ·è¯„è®º]ï¼ˆæ­¤æ—¶æ­£åœ¨æµè§ˆè¯„è®ºå†…å®¹ [ä¸­é—´åŒºåŸŸ]ï¼‰\n                //if (getXpath('//button[text()=\"æ”¶èµ·è¯„è®º\"]',document.querySelector('.Comments-container'))) {getXpath('//button[text()=\"æ”¶èµ·è¯„è®º\"]',document.querySelector('.Comments-container')).click();console.log('asfaf')}\n\n                let answerCollapseButton_ = false;\n                for (let el of document.querySelectorAll('.ContentItem-rightButton[data-zop-retract-question]')) { // éå†æ‰€æœ‰å›ç­”åº•éƒ¨çš„ [æ”¶èµ·] æŒ‰é’®\n                    if (isElementInViewport(el)) { // åˆ¤æ–­è¯¥ [æ”¶èµ·] æŒ‰é’®æ˜¯å¦åœ¨å¯è§†åŒºåŸŸå†…\n                        // å›ºå®šçš„ [æ”¶èµ·è¯„è®º]ï¼ˆå…ˆçœ‹çœ‹æ˜¯å¦å±•å¼€è¯„è®ºï¼Œå³å­˜åœ¨ [æ”¶èµ·è¯„è®º] æŒ‰é’®ï¼‰\n                        let commentCollapseButton = el.parentNode.querySelector('button.Button.ContentItem-action.Button--plain.Button--withIcon.Button--withLabel:first-of-type')\n                        // å¦‚æœå±•å¼€äº†è¯„è®ºï¼Œå°±æ”¶èµ·è¯„è®º\n                        //console.log('333')\n                        //if (commentCollapseButton && commentCollapseButton.textContent.indexOf('æ”¶èµ·è¯„è®º') > -1) commentCollapseButton.click();\n                        if (commentCollapseButton && commentCollapseButton.textContent.indexOf('æ”¶èµ·è¯„è®º') > -1) {\n                            commentCollapseButton.click();\n                            if (!isElementInViewport(commentCollapseButton)) scrollTo(0,el.offsetTop+50)\n                        }\n                        //console.log('444')\n                        el.click() // å†å»æ”¶èµ·å›ç­”\n                        answerCollapseButton_ = true; // å¦‚æœæ‰¾åˆ°å¹¶ç‚¹å‡»æ”¶èµ·äº†ï¼Œå°±æ²¡å¿…è¦æ‰§è¡Œä¸‹é¢çš„ä»£ç äº†ï¼ˆå¯è§†åŒºåŸŸä¸­æ²¡æœ‰ [æ”¶èµ·å›ç­”] æ—¶ï¼‰\n                        break\n                    }\n                }\n                // é’ˆå¯¹å®Œå…¨çœ‹ä¸åˆ° [æ”¶èµ·å›ç­”] æŒ‰é’®æ—¶ï¼ˆå¦‚ [å¤´éƒ¨åŒºåŸŸ]ï¼Œä»¥åŠéƒ¨åˆ†æ˜æ˜å¾ˆé•¿å´ä¸æ˜¾ç¤ºæ‚¬æµ®æ¨ªæ¡çš„å›ç­”ï¼‰\n                if (!answerCollapseButton_) {\n                    for (let el of document.querySelectorAll('.List-item, .Card.AnswerCard, .Card.TopstoryItem')) { // éå†æ‰€æœ‰å›ç­”ä¸»ä½“å…ƒç´ \n                        if (isElementInViewport_(el)) { // åˆ¤æ–­è¯¥å›ç­”æ˜¯å¦åœ¨å¯è§†åŒºåŸŸå†…\n                            // å›ºå®šçš„ [æ”¶èµ·è¯„è®º]ï¼ˆå…ˆçœ‹çœ‹æ˜¯å¦å±•å¼€è¯„è®ºï¼Œå³å­˜åœ¨ [æ”¶èµ·è¯„è®º] æŒ‰é’®ï¼‰\n                            let commentCollapseButton = el.querySelector('button.Button.ContentItem-action.Button--plain.Button--withIcon.Button--withLabel:first-of-type')\n                            // å¦‚æœå±•å¼€äº†è¯„è®ºï¼Œå°±æ”¶èµ·è¯„è®º\n                            //console.log('555',commentCollapseButton)\n                            if (commentCollapseButton && commentCollapseButton.textContent.indexOf('æ”¶èµ·è¯„è®º') > -1) {\n                                commentCollapseButton.click();\n                                if (!isElementInViewport(commentCollapseButton)) scrollTo(0,el.offsetTop+50)\n                            }\n                            let answerCollapseButton__ = el.querySelector('.ContentItem-rightButton[data-zop-retract-question]');\n                            //console.log('666')\n                            if (answerCollapseButton__) answerCollapseButton__.click() // å†å»æ”¶èµ·å›ç­”\n                            break\n                        }\n                    }\n                }\n            }\n\n            // ä¸‹é¢è¿™æ®µåªé’ˆå¯¹ [æ”¶èµ·è¯„è®º]ï¼ˆå¦‚æœå±•å¼€äº†çš„è¯ï¼‰\n            let commentCollapseButton_ = false, commentCollapseButton__ = false;\n            // æ‚¬æµ®çš„ [æ”¶èµ·è¯„è®º]ï¼ˆæ­¤æ—¶æ­£åœ¨æµè§ˆè¯„è®ºå†…å®¹ [ä¸­é—´åŒºåŸŸ]ï¼‰\n            let commentCollapseButton = getXpath('//button[text()=\"æ”¶èµ·è¯„è®º\"]',document.querySelector('.Comments-container'))\n            if (commentCollapseButton) {\n                //console.log('777', commentCollapseButton)\n                commentCollapseButton.click();\n            } else { // å›ºå®šçš„ [æ”¶èµ·è¯„è®º]ï¼ˆæ­¤æ—¶æ­£åœ¨æµè§ˆè¯„è®ºå†…å®¹ [å¤´éƒ¨åŒºåŸŸ]ï¼‰\n                let commentCollapseButton_1 = document.querySelectorAll('.ContentItem-actions > button.Button.ContentItem-action.Button--plain.Button--withIcon.Button--withLabel:first-of-type, .ContentItem-action > button.Button.Button--plain.Button--withIcon.Button--withLabel:first-of-type')\n                if (commentCollapseButton_1.length > 0) {\n                    for (let el of commentCollapseButton_1) {\n                        if (el.textContent.indexOf('æ”¶èµ·è¯„è®º') > -1) {\n                            if (isElementInViewport(el)) {\n                                //console.log('888')\n                                el.click()\n                                commentCollapseButton_ = true // å¦‚æœæ‰¾åˆ°å¹¶ç‚¹å‡»äº†ï¼Œå°±æ²¡å¿…è¦æ‰§è¡Œä¸‹é¢çš„ä»£ç äº†ï¼ˆå¯è§†åŒºåŸŸä¸­æ²¡æœ‰ [æ”¶èµ·è¯„è®º] æ—¶ï¼‰\n                                break\n                            }\n                        }\n                    }\n                }\n                if (commentCollapseButton_ == false) { // å¯è§†åŒºåŸŸä¸­æ²¡æœ‰ [æ”¶èµ·è¯„è®º] æ—¶ï¼ˆæ­¤æ—¶æ­£åœ¨æµè§ˆè¯„è®ºå†…å®¹ [å¤´éƒ¨åŒºåŸŸ] + [å°¾éƒ¨åŒºåŸŸ](ä¸ä¸Šä¸ä¸‹çš„ï¼Œæ—¢çœ‹ä¸åˆ°å›ºå®šçš„ [æ”¶èµ·è¯„è®º] åˆçœ‹ä¸åˆ°æ‚¬æµ®çš„ [æ”¶èµ·è¯„è®º])ï¼‰ï¼Œéœ€è¦åˆ¤æ–­å¯è§†åŒºåŸŸä¸­æ˜¯å¦å­˜åœ¨è¯„è®ºå…ƒç´ \n                    let commentCollapseButton_1 = document.querySelectorAll('.Comments-container')\n                    if (commentCollapseButton_1.length > 0) {\n                        for (let el of commentCollapseButton_1) {\n                            if (isElementInViewport(el)) {\n                                let parentElement = findParentElement(el, 'List-item') || findParentElement(el, 'Card '),\n                                    commentCollapseButton = parentElement.querySelector('.ContentItem-actions > button.Button.ContentItem-action.Button--plain.Button--withIcon.Button--withLabel:first-of-type')\n                                if (commentCollapseButton.textContent.indexOf('æ”¶èµ·è¯„è®º') > -1) {\n                                    //console.log('999')\n                                    commentCollapseButton.click()\n                                    if (!isElementInViewport(commentCollapseButton)) {console.log(parentElement,parentElement.offsetTop,parentElement.offsetHeight);scrollTo(0,parentElement.offsetTop+parentElement.offsetHeight-50)}\n                                    commentCollapseButton__ = true // å¦‚æœæ‰¾åˆ°å¹¶ç‚¹å‡»äº†ï¼Œå°±æ²¡å¿…è¦æ‰§è¡Œä¸‹é¢çš„ä»£ç äº†ï¼ˆå¯è§†åŒºåŸŸä¸­æ²¡æœ‰ è¯„è®ºå…ƒç´  æ—¶ï¼‰\n                                    break\n                                }\n                            }\n                        }\n                    }\n                    if (commentCollapseButton__ == false) { // å¦‚æœä¸Šé¢çš„éƒ½æ²¡æ‰¾åˆ°ï¼Œé‚£ä¹ˆå°±å°è¯•å¯»æ‰¾è¯„è®ºæœ«å°¾çš„ [è¯„è®ºå›å¤æ¡†]\n                        let commentCollapseButton_2 = document.querySelectorAll('.Editable-content')\n                        if (commentCollapseButton_2.length > 0) {\n                            for (let el of commentCollapseButton_2) {\n                                if (isElementInViewport(el)) {\n                                    let parentElement = findParentElement(el, 'List-item') || findParentElement(el, 'Card '),\n                                    commentCollapseButton = parentElement.querySelector('.ContentItem-actions > button.Button.ContentItem-action.Button--plain.Button--withIcon.Button--withLabel:first-of-type')\n                                    //console.log(commentCollapseButton)\n                                    if (commentCollapseButton.textContent.indexOf('æ”¶èµ·è¯„è®º') > -1) {\n                                        //console.log('101010')\n                                        commentCollapseButton.click()\n                                        if (!isElementInViewport(commentCollapseButton)) {console.log(parentElement,parentElement.offsetTop,parentElement.offsetHeight);scrollTo(0,parentElement.offsetTop+parentElement.offsetHeight-50)}\n                                        break\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n\n// å›åˆ°é¡¶éƒ¨ï¼ˆç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œé¼ æ ‡å³é”®ç‚¹å‡»ç½‘é¡µä¸¤ä¾§ç©ºç™½å¤„ï¼‰\nfunction backToTop(selectors) {\n    if (!menu_value('menu_backToTop')) return\n    document.querySelector(selectors).oncontextmenu = function(event){\n        if (event.target == this) {\n            event.preventDefault();\n            window.scrollTo(0,0)\n        }\n    }\n}\n\n\n//è·å–å…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸï¼ˆå®Œå…¨å¯è§ï¼‰\nfunction isElementInViewport(el) {\n    let rect = el.getBoundingClientRect();\n    return (\n        rect.top >= 0 &&\n        rect.left >= 0 &&\n        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n        rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n}\n//è·å–å…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸï¼ˆéƒ¨åˆ†å¯è§ï¼‰\nfunction isElementInViewport_(el) {\n    let rect = el.getBoundingClientRect();\n    return (\n    rect.top < (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.bottom > 0\n  );\n}\n\n\n// è‡ªå®šä¹‰å±è”½ç”¨æˆ·\nfunction customBlockUsers() {\n    let nowBlockUsers = '';\n    menu_value('menu_customBlockUsers').forEach(function(item){nowBlockUsers += '|' + item})\n    //console.log(nowBlockUsers.replace('|',''))\n    let newBlockUsers = prompt('ç¼–è¾‘ [è‡ªå®šä¹‰å±è”½ç”¨æˆ·]\\nï¼ˆä¸åŒç”¨æˆ·åä¹‹é—´ä½¿ç”¨ \"|\" åˆ†éš”ï¼Œä¾‹å¦‚ï¼šç”¨æˆ·A|ç”¨æˆ·B|ç”¨æˆ·C ï¼‰', nowBlockUsers.replace('|',''));\n    if (newBlockUsers === '') {\n        GM_setValue('menu_customBlockUsers', []);\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    } else if (newBlockUsers != null) {\n        GM_setValue('menu_customBlockUsers', newBlockUsers.split('|'));\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    }\n};\n\n\n// å±è”½æŒ‡å®šç”¨æˆ·\nfunction blockUsers(type) {\n    if (!menu_value('menu_blockUsers')) return\n    if (!menu_value('menu_customBlockUsers') || menu_value('menu_customBlockUsers').length < 1) return\n    switch(type) {\n        case 'index':\n            blockUsers_('.Card.TopstoryItem.TopstoryItem-isRecommend', 'Card TopstoryItem TopstoryItem-isRecommend');\n            break;\n        case 'question':\n            blockUsers_question();\n            break;\n        case 'search':\n            blockUsers_search();\n            break;\n        case 'topic':\n            blockUsers_('.List-item.TopicFeedItem', 'List-item TopicFeedItem');\n            break;\n        case 'people':\n            blockUsers_button_people(); // æ·»åŠ å±è”½ç”¨æˆ·æŒ‰é’®ï¼ˆç”¨æˆ·ä¸»é¡µï¼‰\n            break;\n    }\n    blockUsers_comment(); //       è¯„è®ºåŒº\n    blockUsers_button(); //        åŠ å…¥é»‘åå•æŒ‰é’®ï¼ˆç”¨æˆ·ä¿¡æ¯æ‚¬æµ®æ¡†ä¸­ï¼‰\n\n    function blockUsers_(className1, className2) {\n        // å‰å‡ æ¡å› ä¸ºæ˜¯ç›´æ¥åŠ è½½çš„ï¼Œè€Œä¸æ˜¯åŠ¨æ€æ’å…¥ç½‘é¡µçš„ï¼Œæ‰€ä»¥éœ€è¦å•ç‹¬åˆ¤æ–­\n        function blockKeywords_now() {\n            document.querySelectorAll(className1).forEach(function(item1){\n                let item = item1.querySelector('.ContentItem.AnswerItem, .ContentItem.ArticleItem'); // ç”¨æˆ·åæ‰€åœ¨å…ƒç´ \n                if (item) {\n                    for (const keyword of menu_value('menu_customBlockUsers')) { // éå†ç”¨æˆ·åé»‘åå•\n                        if (keyword != '' && item.dataset.zop.indexOf('authorName\":\"' + keyword + '\",') > -1) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥ä¿¡æ¯æµ\n                            console.log('å·²å±è”½ï¼š' + item.dataset.zop);\n                            item1.hidden = true;\n                            break;\n                        }\n                    }\n                }\n            })\n        }\n\n        blockKeywords_now();\n        window.addEventListener('urlchange', function(){\n            setTimeout(blockKeywords_now, 1000); // ç½‘é¡µ URL å˜åŒ–åå†æ¬¡æ‰§è¡Œ\n        })\n\n        // è¿™ä¸ªæ˜¯ç›‘å¬ç½‘é¡µæ’å…¥äº‹ä»¶ï¼Œç”¨æ¥åˆ¤æ–­åç»­ç½‘é¡µåŠ¨æ€æ’å…¥çš„å…ƒç´ \n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    if (target.className === className2) {\n                        let item = target.querySelector('.ContentItem.AnswerItem, .ContentItem.ArticleItem'); // ç”¨æˆ·åæ‰€åœ¨å…ƒç´ \n                        if (item) {\n                            for (const keyword of menu_value('menu_customBlockUsers')) { // éå†ç”¨æˆ·åé»‘åå•\n                                if (keyword != '' && item.dataset.zop.indexOf('authorName\":\"' + keyword + '\",') > -1) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥ä¿¡æ¯æµ\n                                    console.log('å·²å±è”½ï¼š' + item.dataset.zop);\n                                    target.hidden = true;\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n\n    function blockUsers_question() {\n        const blockUsers_question_ = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    if (target.className === 'List-item' || target.className === 'Card AnswerCard') {\n                        let item1 = target.querySelector('.ContentItem.AnswerItem');\n                        if (item1) {\n                            menu_value('menu_customBlockUsers').forEach(function(item2){ // éå†ç”¨æˆ·é»‘åå•\n                                if (item1.dataset.zop.indexOf('authorName\":\"' + item2 + '\",') > -1) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥å›ç­”\n                                    console.log('å·²å±è”½ï¼š' + item1.dataset.zop)\n                                    target.hidden = true;\n                                }\n                            })\n                        }\n                    }\n                }\n            }\n        };\n\n        const blockUsers_question_answer_ = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    target.querySelectorAll('.List-item, .Card.AnswerCard').forEach(function(item){\n                        let item1 = item.querySelector('.ContentItem.AnswerItem');\n                        if (item1) {\n                            menu_value('menu_customBlockUsers').forEach(function(item2){ // éå†ç”¨æˆ·é»‘åå•\n                                if (item1.dataset.zop.indexOf('authorName\":\"' + item2 + '\",') > -1) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥å›ç­”\n                                    console.log('å·²å±è”½ï¼š' + item1.dataset.zop)\n                                    item.hidden = true;\n                                }\n                            })\n                        }\n                    })\n                }\n            }\n        };\n\n        if (location.pathname.indexOf('/answer/') > -1) { // å›ç­”é¡µï¼ˆå°±æ˜¯åªæœ‰ä¸‰ä¸ªå›ç­”çš„é¡µé¢ï¼‰\n            const observer = new MutationObserver(blockUsers_question_answer_);\n            observer.observe(document, { childList: true, subtree: true });\n        } else { // é—®é¢˜é¡µï¼ˆå¯ä»¥æ˜¾ç¤ºæ‰€æœ‰å›ç­”çš„é¡µé¢ï¼‰\n            const observer = new MutationObserver(blockUsers_question_);\n            observer.observe(document, { childList: true, subtree: true });\n        }\n\n        // é’ˆå¯¹çš„æ˜¯æ‰“å¼€ç½‘é¡µåç›´æ¥åŠ è½½çš„å‰é¢å‡ ä¸ªå›ç­”ï¼ˆä¸Šé¢å“ªäº›æ˜¯é’ˆå¯¹åŠ¨æ€åŠ è½½çš„å›ç­”ï¼‰\n        document.querySelectorAll('.List-item, .Card.AnswerCard').forEach(function(item){\n            let item1 = item.querySelector('.ContentItem.AnswerItem');\n            if (item1) {\n                menu_value('menu_customBlockUsers').forEach(function(item2){ // éå†ç”¨æˆ·é»‘åå•\n                    if (item1.dataset.zop.indexOf('authorName\":\"' + item2 + '\",') > -1) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥å›ç­”\n                        console.log('å·²å±è”½ï¼š' + item1.dataset.zop)\n                        item.hidden = true;\n                    }\n                })\n            }\n        })\n    }\n\n    function blockUsers_search() {\n        function blockUsers_now() {\n            if (location.search.indexOf('type=content') === -1) return // ç›®å‰åªæ”¯æŒæœç´¢é¡µçš„ [ç»¼åˆ]\n            document.querySelectorAll('.Card.SearchResult-Card[data-za-detail-view-path-module=\"AnswerItem\"], .Card.SearchResult-Card[data-za-detail-view-path-module=\"PostItem\"]').forEach(function(item1){\n                let item = item1.querySelector('.RichText.ztext.CopyrightRichText-richText b'); // ç”¨æˆ·åæ‰€åœ¨å…ƒç´ \n                if (item) {\n                    for (const keyword of menu_value('menu_customBlockUsers')) { // éå†ç”¨æˆ·åé»‘åå•\n                        if (keyword != '' && item.textContent === keyword) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥ä¿¡æ¯æµ\n                            console.log('å·²å±è”½ï¼š' + item.textContent);\n                            item1.hidden = true;\n                            break;\n                        }\n                    }\n                }\n            })\n        }\n\n        setTimeout(blockUsers_now, 2000);\n        window.addEventListener('urlchange', function(){\n            setTimeout(blockUsers_now, 1000); // ç½‘é¡µ URL å˜åŒ–åå†æ¬¡æ‰§è¡Œ\n        })\n\n        const callback = (mutationsList, observer) => {\n            if (location.search.indexOf('type=content') === -1) return // ç›®å‰åªæ”¯æŒæœç´¢é¡µçš„ [ç»¼åˆ]\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    let item = target.querySelector('.Card.SearchResult-Card[data-za-detail-view-path-module=\"AnswerItem\"] .RichText.ztext.CopyrightRichText-richText b, .Card.SearchResult-Card[data-za-detail-view-path-module=\"PostItem\"] .RichText.ztext.CopyrightRichText-richText b');\n                    if (item) {\n                        for (const keyword of menu_value('menu_customBlockUsers')) { // éå†ç”¨æˆ·åé»‘åå•\n                            if (keyword != '' && item.textContent === keyword) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥ä¿¡æ¯æµ\n                                console.log('å·²å±è”½ï¼š' + item.textContent);\n                                target.hidden = true;\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n    function blockUsers_comment() {\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    //console.log(target)\n                    if (target.tagName == 'DIV' && target.className.indexOf('css-') == 0 && target.dataset.id == undefined) {\n                        let item = target.querySelector('a[href^=\"https://www.zhihu.com/people/\"]>img.Avatar[alt][loading]')\n                        if (item) {\n                            //console.log(item)\n                            menu_value('menu_customBlockUsers').forEach(function(item1){ // éå†ç”¨æˆ·é»‘åå•\n                                if (item.alt === item1) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥æœç´¢ç»“æœ\n                                    //console.log(item.alt,item1)\n                                    item.parentElement.parentElement.parentElement.parentElement.style.display = \"none\";\n                                }\n                            })\n\n                            // æ·»åŠ å±è”½ç”¨æˆ·æŒ‰é’®ï¼ˆç‚¹èµã€å›å¤ç­‰æŒ‰é’®åé¢ï¼‰\n                            /*if (item) {\n                            let footer = findParentElement(item, 'CommentItemV2-meta', true).parentElement.querySelector('.CommentItemV2-metaSibling > .CommentItemV2-footer'),\n                                userid = item.parentElement;\n                            if (userid && footer && !footer.lastElementChild.dataset.name) {\n                                userid = userid.href.split('/')[4];\n                                footer.insertAdjacentHTML('beforeend',`<button type=\"button\" data-name=\"${item.alt}\" data-userid=\"${userid}\" class=\"Button CommentItemV2-hoverBtn Button--plain\"><span style=\"display: inline-flex; align-items: center;\">&#8203;<svg class=\"Zi Zi--Like\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" style=\"transform: rotate(180deg); margin-right: 5px;\"><path d=\"M18.376 5.624c-3.498-3.499-9.254-3.499-12.752 0-3.499 3.498-3.499 9.254 0 12.752 3.498 3.499 9.254 3.499 12.752 0 3.499-3.498 3.499-9.14 0-12.752zm-1.693 1.693c2.37 2.37 2.596 6.094.678 8.69l-9.367-9.48c2.708-1.919 6.32-1.58 8.69.79zm-9.48 9.48c-2.37-2.37-2.595-6.095-.676-8.69l9.48 9.48c-2.822 1.918-6.433 1.58-8.803-.79z\" fill-rule=\"evenodd\"></path></svg></span>å±è”½ç”¨æˆ·</button>`);\n                                footer.lastElementChild.onclick = function(){blockUsers_button_add(this.dataset.name, this.dataset.userid, false)}\n                            }\n                        }*/\n                        }\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n\n    // æ·»åŠ å±è”½ç”¨æˆ·æŒ‰é’®ï¼ˆç”¨æˆ·ä¿¡æ¯æ‚¬æµ®æ¡†ä¸­ï¼‰\n    function blockUsers_button() {\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    //console.log(target, target.className)\n                    if (target.tagName == 'DIV' && target.className && (target.className.indexOf('css-') == 0 || target.style == 'opacity: 1;')) {\n                        const item = target.querySelector('.MemberButtonGroup.ProfileButtonGroup.HoverCard-buttons'),\n                              item1 = target.querySelector('img.Avatar+div span.UserLink>a.UserLink-link[data-za-detail-view-element_name=User]');\n                        if (item1) {\n                            const name = item1.textContent, userid = item1.href.split('/')[4], users = menu_value('menu_customBlockUsers');\n                            for (let num = 0;num<users.length;num++) { // åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨\n                                if (users[num] === name) { // å·²å­˜åœ¨\n                                    target.querySelectorAll('.Button.Button--primary.Button--red').forEach(function(item){item.style.display = 'none';}) // éšè—çŸ¥ä¹è‡ªå¸¦çš„å·²å±è”½æŒ‰é’®\n                                    item.insertAdjacentHTML('afterbegin', `<button type=\"button\" data-name=\"${name}\" data-userid=\"${userid}\" class=\"Button FollowButton Button--primary Button--red\"><span style=\"display: inline-flex; align-items: center;\">â€‹<svg width=\"1.2em\" height=\"1.2em\" viewBox=\"0 0 24 24\" class=\"Zi Zi--Ban\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M16.346 18.113a7.5 7.5 0 0 1-10.46-10.46l10.46 10.46Zm1.767-1.767L7.654 5.886a7.5 7.5 0 0 1 10.46 10.46ZM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Z\" clip-rule=\"evenodd\"></path></svg></span> å·²å±è”½</button>`);\n                                    item.firstElementChild.onclick = function(){this.disabled = true;blockUsers_button_del(this.dataset.name, this.dataset.userid, false)}\n                                    return\n                                }\n                            };\n                            if (item && !target.querySelector('button[data-name][data-userid]')) {\n                                item.insertAdjacentHTML('beforeend', `<button type=\"button\" data-name=\"${name}\" data-userid=\"${userid}\" class=\"Button FollowButton Button--primary Button--red\" style=\"width: 100%;margin: 7px 0 0 0;\"><span style=\"display: inline-flex; align-items: center;\">â€‹<svg width=\"1.2em\" height=\"1.2em\" viewBox=\"0 0 24 24\" class=\"Zi Zi--Ban\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M16.346 18.113a7.5 7.5 0 0 1-10.46-10.46l10.46 10.46Zm1.767-1.767L7.654 5.886a7.5 7.5 0 0 1 10.46 10.46ZM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Z\" clip-rule=\"evenodd\"></path></svg></span> å±è”½ç”¨æˆ·</button>`);\n                                item.lastElementChild.onclick = function(){this.disabled = true;blockUsers_button_add(this.dataset.name, this.dataset.userid, false)}\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n    // æ·»åŠ å±è”½ç”¨æˆ·æŒ‰é’®ï¼ˆç”¨æˆ·ä¸»é¡µï¼‰\n    function blockUsers_button_people() {\n        let item = document.querySelector('.MemberButtonGroup.ProfileButtonGroup.ProfileHeader-buttons'), // è·å–æŒ‰é’®å…ƒç´ ä½ç½®\n            name = document.querySelector('.ProfileHeader-name').firstChild.textContent, // è·å–ç”¨æˆ·å\n            users = menu_value('menu_customBlockUsers'), // è¯»å–å±è”½åˆ—è¡¨\n            userid = location.href.split('/')[4];\n        for (let num = 0;num<users.length;num++) { // åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨\n            if (users[num] === name) { // å·²å­˜åœ¨\n                document.querySelectorAll('.Button.Button--primary.Button--red').forEach(function(item){item.style.display = 'none';}) // éšè—çŸ¥ä¹è‡ªå¸¦çš„å·²å±è”½æŒ‰é’®\n                item.insertAdjacentHTML('afterbegin', `<button type=\"button\" data-name=\"${name}\" data-userid=\"${userid}\" class=\"Button FollowButton Button--primary Button--red\" style=\"margin: 0 0 0 12px;\"><span style=\"display: inline-flex; align-items: center;\">â€‹<svg width=\"1.2em\" height=\"1.2em\" viewBox=\"0 0 24 24\" class=\"Zi Zi--Ban\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M16.346 18.113a7.5 7.5 0 0 1-10.46-10.46l10.46 10.46Zm1.767-1.767L7.654 5.886a7.5 7.5 0 0 1 10.46 10.46ZM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Z\" clip-rule=\"evenodd\"></path></svg></span> å·²å±è”½</button>`);\n                item.firstElementChild.onclick = function(){this.disabled = true;blockUsers_button_del(this.dataset.name, this.dataset.userid, true)}\n                return\n            }\n        };\n        if (item) {\n            item.insertAdjacentHTML('beforeend', `<button type=\"button\" data-name=\"${name}\" data-userid=\"${userid}\" class=\"Button FollowButton Button--primary Button--red\" style=\"margin: 0 0 0 12px;\"><span style=\"display: inline-flex; align-items: center;\">â€‹<svg width=\"1.2em\" height=\"1.2em\" viewBox=\"0 0 24 24\" class=\"Zi Zi--Ban\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M16.346 18.113a7.5 7.5 0 0 1-10.46-10.46l10.46 10.46Zm1.767-1.767L7.654 5.886a7.5 7.5 0 0 1 10.46 10.46ZM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Z\" clip-rule=\"evenodd\"></path></svg></span> å±è”½ç”¨æˆ·</button>`);\n            item.lastElementChild.onclick = function(){this.disabled = true;blockUsers_button_add(this.dataset.name, this.dataset.userid, true)}\n        }\n    }\n\n    // å±è”½ç”¨æˆ·æŒ‰é’®ç»‘å®šäº‹ä»¶ï¼ˆæ·»åŠ ï¼‰\n    function blockUsers_button_add(name, userid, reload) {\n        if (!name || !userid) return\n        let users = menu_value('menu_customBlockUsers'), // è¯»å–å±è”½åˆ—è¡¨\n            index = users.indexOf(name);\n        if (index === -1) {\n            users.push(name); // è¿½åŠ ç”¨æˆ·å\n            GM_setValue('menu_customBlockUsers', users); // å†™å…¥å±è”½åˆ—è¡¨\n            // åŠ å…¥çŸ¥ä¹è‡ªå¸¦çš„é»‘åå•ï¼ˆå’Œæœ¬è„šæœ¬äº’è¡¥~\n            GM_xmlhttpRequest({url: `https://www.zhihu.com/api/v4/members/${userid}/actions/block`,method: 'POST',timeout: 2000});\n            // æ˜¯å¦åˆ·æ–°æœ¬é¡µ\n            if (reload) {\n                setTimeout(function(){location.reload()}, 200); // åˆ·æ–°ç½‘é¡µï¼Œå»¶è¿Ÿ 200 æ¯«ç§’ï¼Œé¿å…çŸ¥ä¹ååº”æ…¢~\n            } else {\n                GM_notification({text: `è¯¥ç”¨æˆ·å·²è¢«å±è”½~\\nåˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆ~`, timeout: 3000});\n            }\n        } else {\n            GM_notification({text: `è¯¥ç”¨æˆ·å·²ç»è¢«å±è”½å•¦ï¼Œæ— éœ€é‡å¤å±è”½~`, timeout: 3000});\n        }\n    }\n\n\n    // å±è”½ç”¨æˆ·æŒ‰é’®ç»‘å®šäº‹ä»¶ï¼ˆåˆ é™¤ï¼‰\n    function blockUsers_button_del(name, userid, reload) {\n        if (!name || !userid) return\n        let users = menu_value('menu_customBlockUsers'), // è¯»å–å±è”½åˆ—è¡¨\n            index = users.indexOf(name);\n        if (index > -1) {\n            users.splice(index, 1); // ç§»é™¤ç”¨æˆ·å\n            GM_setValue('menu_customBlockUsers', users); // å†™å…¥å±è”½åˆ—è¡¨\n            // ç§»é™¤çŸ¥ä¹è‡ªå¸¦çš„é»‘åå•\n            GM_xmlhttpRequest({url: `https://www.zhihu.com/api/v4/members/${userid}/actions/block`,method: 'DELETE',timeout: 2000});\n            // æ˜¯å¦åˆ·æ–°æœ¬é¡µ\n            if (reload) {\n                setTimeout(function(){location.reload()}, 200); // åˆ·æ–°ç½‘é¡µï¼Œå»¶è¿Ÿ 200 æ¯«ç§’ï¼Œé¿å…çŸ¥ä¹ååº”æ…¢~\n            } else {\n                GM_notification({text: `è¯¥ç”¨æˆ·å·²å–æ¶ˆå±è”½å•¦~\\nåˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆ~`, timeout: 3000});\n            }\n        } else {\n            GM_notification({text: `æ²¡æœ‰åœ¨å±è”½åˆ—è¡¨ä¸­æ‰¾åˆ°è¯¥ç”¨æˆ·...`, timeout: 3000});\n        }\n    }\n}\n\n\n// è‡ªå®šä¹‰å±è”½å…³é”®è¯ï¼ˆæ ‡é¢˜ï¼‰\nfunction customBlockKeywords() {\n    let nowBlockKeywords = '';\n    menu_value('menu_customBlockKeywords').forEach(function(item){nowBlockKeywords += '|' + item})\n    let newBlockKeywords = prompt('ç¼–è¾‘ [è‡ªå®šä¹‰å±è”½å…³é”®è¯]\\nï¼ˆä¸åŒå…³é”®è¯ä¹‹é—´ä½¿ç”¨ \"|\" åˆ†éš”ï¼Œä¾‹å¦‚ï¼šå…³é”®è¯A|å…³é”®è¯B|å…³é”®è¯C \\nï¼ˆå…³é”®è¯ä¸åŒºåˆ†å¤§å°å†™ï¼Œæ”¯æŒè¡¨æƒ…å¦‚ï¼š[æ‚è„¸]|[é£™æ³ªç¬‘]', nowBlockKeywords.replace('|',''));\n    if (newBlockKeywords === '') {\n        GM_setValue('menu_customBlockKeywords', []);\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    } else if (newBlockKeywords != null) {\n        GM_setValue('menu_customBlockKeywords', newBlockKeywords.split('|'));\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    }\n};\n\n\n// å±è”½æŒ‡å®šå…³é”®è¯\nfunction blockKeywords(type) {\n    if (!menu_value('menu_blockKeywords')) return\n    if (!menu_value('menu_customBlockKeywords') || menu_value('menu_customBlockKeywords').length < 1) return\n    switch(type) {\n        case 'index':\n            blockKeywords_('.Card.TopstoryItem.TopstoryItem-isRecommend', 'Card TopstoryItem TopstoryItem-isRecommend');\n            break;\n        case 'follow':\n            blockKeywords_('.Card.TopstoryItem.TopstoryItem-isFollow', 'Card TopstoryItem TopstoryItem-isFollow');\n            break;\n        case 'topic':\n            blockKeywords_('.List-item.TopicFeedItem', 'List-item TopicFeedItem');\n            break;\n        case 'people':\n            blockKeywords_('.List-item', 'List-item');\n            break;\n        case 'collection':\n            blockKeywords_('.Card.CollectionDetailPageItem', 'Card CollectionDetailPageItem');\n            break;\n        case 'search':\n            blockKeywords_search();\n            break;\n        case 'comment':\n            if (!menu_value('menu_blockKeywordsComment')) return // å¦‚æœ [å±è”½å…³é”®è¯ - è¯„è®ºåŒº] æœªå¯ç”¨åˆ™è·³è¿‡\n            blockKeywords_comment();\n            break;\n    }\n\n\n    function blockKeywords_(className1, className2) {\n        // å‰å‡ æ¡å› ä¸ºæ˜¯ç›´æ¥åŠ è½½çš„ï¼Œè€Œä¸æ˜¯åŠ¨æ€æ’å…¥ç½‘é¡µçš„ï¼Œæ‰€ä»¥éœ€è¦å•ç‹¬åˆ¤æ–­\n        function blockKeywords_now() {\n            if (location.pathname === '/hot') {\n                document.querySelectorAll('.HotItem').forEach(function(item1){blockKeywords_1(item1, 'h2.HotItem-title');})\n            } else {\n                document.querySelectorAll(className1).forEach(function(item1){blockKeywords_1(item1, 'h2.ContentItem-title meta[itemprop=\"name\"], meta[itemprop=\"headline\"]');})\n            }\n        }\n\n        blockKeywords_now();\n        window.addEventListener('urlchange', function(){\n            setTimeout(blockKeywords_now, 1000); // ç½‘é¡µ URL å˜åŒ–åå†æ¬¡æ‰§è¡Œ\n        })\n\n        // è¿™ä¸ªæ˜¯ç›‘å¬ç½‘é¡µæ’å…¥äº‹ä»¶ï¼Œç”¨æ¥åˆ¤æ–­åç»­ç½‘é¡µåŠ¨æ€æ’å…¥çš„å…ƒç´ \n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    if (target.className === className2) {blockKeywords_1(target, 'h2.ContentItem-title meta[itemprop=\"name\"], meta[itemprop=\"headline\"]');}\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n\n    function blockKeywords_search() {\n        function blockKeywords_now() {\n            if (location.search.indexOf('type=content') === -1) return // ç›®å‰åªæ”¯æŒæœç´¢é¡µçš„ [ç»¼åˆ]\n            document.querySelectorAll('.HotLanding-contentItem, .Card.SearchResult-Card[data-za-detail-view-path-module=\"AnswerItem\"], .Card.SearchResult-Card[data-za-detail-view-path-module=\"PostItem\"]').forEach(function(item1){blockKeywords_1(item1, 'a[data-za-detail-view-id]');})\n        }\n\n        setTimeout(blockKeywords_now, 2000);\n        window.addEventListener('urlchange', function(){\n            setTimeout(blockKeywords_now, 1000); // ç½‘é¡µ URL å˜åŒ–åå†æ¬¡æ‰§è¡Œ\n        })\n\n        const callback = (mutationsList, observer) => {\n            if (location.search.indexOf('type=content') === -1) return // ç›®å‰åªæ”¯æŒæœç´¢é¡µçš„ [ç»¼åˆ]\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    //console.log(target)\n                    if (target.tagName === 'DIV' && target.className === '') {\n                        let tt = target.querySelector('div[class=\"Card SearchResult-Card\"][data-za-detail-view-path-module=\"AnswerItem\"], div[class=\"Card SearchResult-Card\"][data-za-detail-view-path-module=\"PostItem\"]')\n                        if (tt) {blockKeywords_1(target.childNodes[0], 'a[data-za-detail-view-id]');}\n                    }\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n\n    function blockKeywords_comment() {\n        function filterComment(comment) {\n            let content = comment.querySelector('.CommentContent'); // å¯»æ‰¾è¯„è®ºæ–‡å­—æ‰€åœ¨å…ƒç´ \n            let text = content.textContent.toLowerCase(); // å…¨éƒ¨è½¬ä¸ºå°å†™ï¼ˆç”¨æ¥ä¸åŒºåˆ†å¤§å°å†™ï¼‰\n            content.querySelectorAll('img.sticker[alt]').forEach((img)=>{text += img.alt}) // å°†è¯„è®ºä¸­çš„è¡¨æƒ…æ·»åŠ åˆ°å¾…éå†çš„è¯„è®ºæ–‡å­—ä¸­\n\n            let keywords = menu_value('menu_customBlockKeywords');\n            for (const keyword of keywords) { // éå†å…³é”®è¯é»‘åå•\n                if (keyword != '' && text.indexOf(keyword.toLowerCase()) > -1) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥è¯„è®º\n                    console.log('å·²å±è”½è¯„è®ºï¼š' + text);\n                    content.dataset.text = content.innerHTML\n                    content.onclick = (e)=>{if (e.target.dataset.text) {e.target.innerHTML = e.target.dataset.text;e.target.removeAttribute('data-text');}}\n                    content.textContent = '[è¯¥è¯„è®ºå·²å±è”½ï¼Œå¯ç‚¹å‡»æ˜¾ç¤º]';\n                }\n            }\n        }\n\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                for (const target of mutation.addedNodes) {\n                    if (target.nodeType != 1) return\n                    //console.log(target);\n                    if (target.tagName == 'DIV' && target.className.indexOf('css-') == 0 && target.dataset.id == undefined) {\n                        let item = target.querySelector('a[href^=\"https://www.zhihu.com/people/\"]>img.Avatar[alt][loading]')\n                        if (item) {\n                            //console.log(item)\n                            filterComment(item.parentElement.parentElement.parentElement.parentElement)\n                        }\n                    }\n\n                    /*if (target.tagName == 'DIV' && target.dataset.id !== undefined) {\n                        console.log(target);\n                        for (const node of target.querySelectorAll('*')) {\n                            if (node.className === 'CommentItemV2-metaSibling') filterComment(node);\n                        }\n                    }*/\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n    function blockKeywords_1(item1, css) {\n        let item = item1.querySelector(css); // æ ‡é¢˜æ‰€åœ¨å…ƒç´ \n        //console.log(item)\n        if (item) {\n            for (const keyword of menu_value('menu_customBlockKeywords')) { // éå†å…³é”®è¯é»‘åå•\n                let text = item.content || item.textContent;\n                //console.log(text,keyword)\n                if (keyword != '' && text.toLowerCase().indexOf(keyword.toLowerCase()) > -1) { // æ‰¾åˆ°å°±åˆ é™¤è¯¥ä¿¡æ¯æµ\n                    console.log('å·²å±è”½ï¼š' + text);\n                    item1.hidden = true;\n                    item1.style.display = 'none';\n                    break;\n                }\n            }\n        }\n    }\n}\n\n\n// å±è”½æŒ‡å®šç±»åˆ«ï¼ˆè§†é¢‘/æ–‡ç« ç­‰ï¼‰\nfunction blockType(type) {\n    let name;\n    // ä¸€å¼€å§‹åŠ è½½çš„ä¿¡æ¯æµ + æ·»åŠ æ ‡ç­¾æ ·å¼\n    if (type === 'search') { // æœç´¢é¡µ\n        if (!menu_value('menu_blockTypeVideo') && !menu_value('menu_blockTypeArticle') && !menu_value('menu_blockTypePin') && !menu_value('menu_blockTypeTopic') && !menu_value('menu_blockTypeSearch')) return\n        if (menu_value('menu_blockTypeSearch') && location.pathname === '/search') setTimeout(function(){document.querySelectorAll('.RelevantQuery').forEach((r)=>{r.parentElement.parentElement.hidden = true});}, 2000)\n        name = 'h2.ContentItem-title a:not(.zhihu_e_toQuestion), a.KfeCollection-PcCollegeCard-link, h2.SearchTopicHeader-Title a'\n        addSetInterval_(name);\n    } else if (type === 'question') { // é—®é¢˜é¡µ\n        if (!menu_value('menu_blockTypeVideo')) return\n        document.lastChild.appendChild(document.createElement('style')).textContent = `.VideoAnswerPlayer, .VideoAnswerPlayer video, .VideoAnswerPlayer-video, .VideoAnswerPlayer-iframe {display: none !important;}`;\n        name = '.VideoAnswerPlayer'\n        document.querySelectorAll(name).forEach(function(item){blockType_(item);})\n    } else if (type === 'follow') { // é¦–é¡µ - å…³æ³¨\n        if (!menu_value('menu_blockTypeFollowAgree') && !menu_value('menu_blockTypeFollowQuestion')) return\n        if (menu_value('menu_blockTypeFollowAgree')) name = '.TopstoryItem-isFollow .FeedSource-byline' // èµåŒäº†XX\n        if (menu_value('menu_blockTypeFollowQuestion')) {if (name) {name += ',.ContentItem[data-za-detail-view-path-module=QuestionItem]:not(.AnswerItem):not(.PinItem)'} else {name = '.ContentItem[data-za-detail-view-path-module=QuestionItem]:not(.AnswerItem):not(.PinItem)'}} // å…³æ³¨äº†XX\n        if (!name) return\n        document.querySelectorAll(name).forEach(function(item){blockType_(item);})\n    } else { // é¦–é¡µ\n        if (!menu_value('menu_blockTypeVideo') && !menu_value('menu_blockTypeArticle') && !menu_value('menu_blockTypePin')) return\n        if (menu_value('menu_blockTypeVideo')) document.lastChild.appendChild(document.createElement('style')).textContent = `.Card .ZVideoItem-video, .VideoAnswerPlayer video, nav.TopstoryTabs > a[aria-controls=\"Topstory-zvideo\"] {display: none !important;}`;\n        name = 'h2.ContentItem-title a:not(.zhihu_e_toQuestion)'\n        if (menu_value('menu_blockTypePin')) name = 'h2.ContentItem-title a:not(.zhihu_e_toQuestion), .ContentItem.PinItem'\n        document.querySelectorAll(name).forEach(function(item){blockType_(item);})\n    }\n\n    // åç»­åŠ è½½çš„ä¿¡æ¯æµ\n    const observer = new MutationObserver(mutationsList => {\n        for (const mutation of mutationsList) {\n            for (const target of mutation.addedNodes) {\n                if (target.nodeType != 1) return\n                if (target.className === \"Card SearchResult-Card\" && target.dataset.zaDetailViewPathModule === undefined) {\n                    // ç§»é™¤ç›¸å…³æœç´¢\n                    if (menu_value('menu_blockTypeSearch') && location.pathname === '/search' && location.search.indexOf('type=content') > -1) target.hidden = true;\n                } else {\n                    blockType_(target.querySelector(name));\n                }\n            }\n        }\n    });\n    observer.observe(document, { childList: true, subtree: true });\n\n    window.addEventListener('urlchange', function(){\n        addSetInterval_(name);\n        // ç§»é™¤ç›¸å…³æœç´¢\n        if (menu_value('menu_blockTypeSearch') && location.pathname === '/search' && location.search.indexOf('type=content') > -1) setTimeout(function(){document.querySelectorAll('.RelevantQuery').forEach((r)=>{r.parentElement.parentElement.hidden = true});}, 1500)\n    })\n\n    function blockType_(titleA) {\n        if (!titleA) return // åˆ¤æ–­æ˜¯å¦ä¸ºçœŸ\n        //console.log(titleA.href)\n        if (location.pathname === '/search') { // æœç´¢é¡µ\n            if (location.search.indexOf('type=content') === -1) return //   ä»…é™æœç´¢é¡µçš„ [ç»¼åˆ]\n            if (titleA.href.indexOf('/zvideo/') > -1 || titleA.href.indexOf('video.zhihu.com') > -1) { // å¦‚æœæ˜¯è§†é¢‘\n                if (menu_value('menu_blockTypeVideo')) findParentElement(titleA, 'Card').remove();\n            } else if (titleA.href.indexOf('zhuanlan.zhihu.com') > -1) { // å¦‚æœæ˜¯æ–‡ç« \n                if (menu_value('menu_blockTypeArticle')) findParentElement(titleA, 'Card SearchResult-Card').hidden = true;\n            } else if (titleA.href.indexOf('/topic/') > -1) { //            å¦‚æœæ˜¯è¯é¢˜\n                if (menu_value('menu_blockTypeTopic')) findParentElement(titleA, 'Card SearchResult-Card').hidden = true;\n            } else if (titleA.href.indexOf('/market/') > -1) { //           å¦‚æœæ˜¯æ‚å¿—æ–‡ç« ç­‰ä¹±ä¸ƒå…«ç³Ÿçš„\n                if (menu_value('menu_blockTypeSearch')) findParentElement(titleA, 'Card SearchResult-Card').hidden = true;\n            }\n        } else if (location.pathname.indexOf('/question/') > -1) { // é—®é¢˜é¡µ\n            if (menu_value('menu_blockTypeVideo')) findParentElement(titleA, 'List-item').hidden = true;\n        } else if (location.pathname.indexOf('/follow') > -1) { // é¦–é¡µ - å…³æ³¨\n            if (type === 'follow') {\n                if ((menu_value('menu_blockTypeFollowAgree') && titleA.className.indexOf('FeedSource-byline') != -1) || (menu_value('menu_blockTypeFollowQuestion') && titleA.dataset.zaDetailViewPathModule == 'QuestionItem')) findParentElement(titleA, 'Card TopstoryItem TopstoryItem-isFollow').hidden = true; // èµåŒäº†XX + å…³æ³¨äº†XX\n            }\n            if (titleA.className == 'ContentItem PinItem' && menu_value('menu_blockTypePin')) findParentElement(titleA, 'Card TopstoryItem TopstoryItem-isFollow').hidden = true; // å¦‚æœæ˜¯æƒ³æ³•\n        } else { // é¦–é¡µ\n            if (titleA.className == 'ContentItem PinItem') { // å¦‚æœæ˜¯æƒ³æ³•ï¼ˆé’ˆå¯¹æ— æ ‡é¢˜ï¼‰\n                if (menu_value('menu_blockTypePin')) findParentElement(titleA, 'Card TopstoryItem TopstoryItem-isRecommend').hidden = true;\n            /*} else if (titleA.href.indexOf('/pin/') > -1) { // å¦‚æœæ˜¯æƒ³æ³•\n                if (menu_value('menu_blockTypePin')) findParentElement(titleA, 'Card TopstoryItem TopstoryItem-isRecommend').hidden = true;*/\n            } else if (titleA.href.indexOf('/zvideo/') > -1 || titleA.href.indexOf('video.zhihu.com') > -1) { // å¦‚æœæ˜¯è§†é¢‘\n                if (menu_value('menu_blockTypeVideo')) {findParentElement(titleA, 'Card TopstoryItem TopstoryItem-isRecommend').hidden = true;}\n            } else if (titleA.href.indexOf('/answer/') > -1) { //           å¦‚æœæ˜¯é—®é¢˜ï¼ˆè§†é¢‘å›ç­”ï¼‰\n                if (findParentElement(titleA, 'ContentItem AnswerItem').querySelector('.VideoAnswerPlayer')) {\n                    if (menu_value('menu_blockTypeVideo')) {findParentElement(titleA, 'Card TopstoryItem TopstoryItem-isRecommend').hidden = true; findParentElement(titleA, 'ContentItem AnswerItem').remove();}\n                }\n            } else if (titleA.href.indexOf('/education/video-course/') > -1) { // å¦‚æœæ˜¯è§†é¢‘è¯¾ç¨‹\n                if (menu_value('menu_blockTypeVideo')) {findParentElement(titleA, 'Card TopstoryItem TopstoryItem-isRecommend').hidden = true;}\n            } else if (titleA.href.indexOf('zhuanlan.zhihu.com') > -1) { // å¦‚æœæ˜¯æ–‡ç« \n                if (menu_value('menu_blockTypeArticle')) findParentElement(titleA, 'Card TopstoryItem TopstoryItem-isRecommend').hidden = true;\n            }\n        }\n    }\n\n    function addSetInterval_(A) {\n        let timer = setInterval(function(){\n            let aTag = document.querySelectorAll(A);\n            if (aTag.length > 0) {\n                clearInterval(timer);\n                aTag.forEach(function(item){blockType_(item);})\n            }\n        });\n    }\n}\n\n\n// å¯»æ‰¾çˆ¶å…ƒç´ \nfunction findParentElement(item, className, type = false) {\n    if (item.parentElement) {\n        //console.log(item.parentElement)\n        if (type) { // true = å®Œå…¨ä¸€è‡´ï¼Œfalse = åŒ…å«å³å¯\n            if (item.parentElement.className && item.parentElement.className === className) {\n                //console.log(item.parentElement.className)\n                return item.parentElement;\n            } else {\n                let temp = findParentElement(item.parentElement, className, true)\n                if (temp) return temp\n            }\n        } else {\n            if (item.parentElement.className && item.parentElement.className.indexOf(className) > -1) {\n                return item.parentElement;\n            } else {\n                let temp = findParentElement(item.parentElement, className)\n                if (temp) return temp\n            }\n        }\n    }\n    return\n}\n\n\n// ç§»é™¤é«˜äº®é“¾æ¥\nfunction cleanHighlightLink() {\n    if (!menu_value('menu_cleanHighlightLink')) return;\n    const callback = (mutationsList, observer) => {\n        for (const mutation of mutationsList) {\n            for (const target of mutation.addedNodes) {\n                if (target.nodeType != 1 || target.tagName != 'A') break\n                if (target.dataset.zaNotTrackLink && target.href.indexOf('https://zhida.zhihu.com/search?') > -1) {\n                    target.parentElement.replaceWith(target.textContent);\n                }\n            }\n        }\n    };\n    const observer = new MutationObserver(callback);\n    observer.observe(document, { childList: true, subtree: true });\n\n    // é’ˆå¯¹çš„æ˜¯æ‰“å¼€ç½‘é¡µåç›´æ¥åŠ è½½çš„å‰é¢å‡ ä¸ªå›ç­”ï¼ˆä¸Šé¢å“ªäº›æ˜¯é’ˆå¯¹åŠ¨æ€åŠ è½½çš„å›ç­”ï¼‰\n    document.querySelectorAll('span > a[data-za-not-track-link][href^=\"https://zhida.zhihu.com/search?\"]').forEach(e => e.parentElement.replaceWith(e.textContent))\n}\n\n\n// å±è”½ç›é€‰å†…å®¹\nfunction blockYanXuan() {\n    if (!menu_value('menu_blockYanXuan')) return\n    const blockYanXuan_question = (mutationsList, observer) => {\n        for (const mutation of mutationsList) {\n            for (const target of mutation.addedNodes) {\n                if (target.nodeType != 1) return\n                if (target.className === 'List-item' || target.className === 'Card AnswerCard') {\n                    if (target.querySelector('.KfeCollection-AnswerTopCard-Container, .KfeCollection-PurchaseBtn')) {\n                        target.hidden = true;\n                    }\n                }\n            }\n        }\n    };\n\n    const blockYanXuan_question_answer = (mutationsList, observer) => {\n        for (const mutation of mutationsList) {\n            for (const target of mutation.addedNodes) {\n                if (target.nodeType != 1) return\n                target.querySelectorAll('.List-item, .Card.AnswerCard').forEach(function(item){\n                    if (item.querySelector('.KfeCollection-AnswerTopCard-Container, .KfeCollection-PurchaseBtn')) {\n                        item.hidden = true;\n                    }\n                })\n            }\n        }\n    };\n\n    if (location.pathname.indexOf('/answer/') > -1) { // å›ç­”é¡µï¼ˆå°±æ˜¯åªæœ‰ä¸‰ä¸ªå›ç­”çš„é¡µé¢ï¼‰\n        const observer = new MutationObserver(blockYanXuan_question_answer);\n        observer.observe(document, { childList: true, subtree: true });\n    } else { // é—®é¢˜é¡µï¼ˆå¯ä»¥æ˜¾ç¤ºæ‰€æœ‰å›ç­”çš„é¡µé¢ï¼‰\n        const observer = new MutationObserver(blockYanXuan_question);\n        observer.observe(document, { childList: true, subtree: true });\n    }\n\n    // é’ˆå¯¹çš„æ˜¯æ‰“å¼€ç½‘é¡µåç›´æ¥åŠ è½½çš„å‰é¢å‡ ä¸ªå›ç­”ï¼ˆä¸Šé¢å“ªäº›æ˜¯é’ˆå¯¹åŠ¨æ€åŠ è½½çš„å›ç­”ï¼‰\n    document.querySelectorAll('.List-item, .Card.AnswerCard').forEach(function(item){\n        if (item.querySelector('.KfeCollection-AnswerTopCard-Container, .KfeCollection-PurchaseBtn')) {\n            item.hidden = true;\n        }\n    })\n}\n\n\n// åŒºåˆ†é—®é¢˜æ–‡ç« \nfunction addTypeTips() {\n    if (!menu_value('menu_typeTips')) return\n    let style = `font-weight: bold;font-size: 13px;padding: 1px 4px 0;border-radius: 2px;display: inline-block;vertical-align: top;margin: ${(location.pathname === '/search') ? '2' : '4'}px 4px 0 0;`\n    document.body.appendChild(document.createElement('style')).textContent = `/* åŒºåˆ†é—®é¢˜æ–‡ç«  */\n.AnswerItem .ContentItem-title a:not(.zhihu_e_toQuestion)::before {content:'é—®é¢˜';color: #f68b83;background-color: #f68b8333;${style}}\n.TopstoryQuestionAskItem .ContentItem-title a:not(.zhihu_e_toQuestion)::before {content:'é—®é¢˜';color: #ff5a4e;background-color: #ff5a4e33;${style}}\n.ZVideoItem .ContentItem-title a::before, .ZvideoItem .ContentItem-title a::before {content:'è§†é¢‘';color: #00BCD4;background-color: #00BCD433;${style}}\n.PinItem .ContentItem-title a::before {content:'æƒ³æ³•';color: #4CAF50;background-color: #4CAF5033;${style}}\n.ArticleItem .ContentItem-title a::before {content:'æ–‡ç« ';color: #2196F3;background-color: #2196F333;${style}}`;\n}\n\n\n// ç›´è¾¾é—®é¢˜æŒ‰é’®\nfunction addToQuestion() {\n    if (!menu_value('menu_toQuestion')) return\n\n    // ä¸€å¼€å§‹åŠ è½½çš„ä¿¡æ¯æµ + æ·»åŠ æŒ‰é’®æ ·å¼\n    if (location.pathname === '/search') {\n        document.lastChild.appendChild(document.createElement('style')).textContent = `a.zhihu_e_toQuestion {font-size: 13px !important;font-weight: normal !important;padding: 1px 6px 0 !important;border-radius: 2px !important;display: inline-block !important;vertical-align: top !important;height: 20.67px !important;line-height: 20.67px !important;margin-top: 2px !important;}`;\n        addSetInterval_('h2.ContentItem-title a:not(.zhihu_e_tips)');\n    } else {\n        document.lastChild.appendChild(document.createElement('style')).textContent = `a.zhihu_e_toQuestion {font-size: 13px !important;font-weight: normal !important;padding: 1px 6px 0 !important;border-radius: 2px !important;display: inline-block !important;vertical-align: top !important;margin-top: 4px !important;}`;\n        document.querySelectorAll('h2.ContentItem-title a:not(.zhihu_e_tips)').forEach(function(item){addTypeTips_(item);})\n    }\n\n    // åç»­åŠ è½½çš„ä¿¡æ¯æµ\n    const observer = new MutationObserver(mutationsList => {\n        for (const mutation of mutationsList) {\n            for (const target of mutation.addedNodes) {\n                if (target.nodeType != 1) return\n                addTypeTips_(target.querySelector('h2.ContentItem-title a:not(.zhihu_e_tips)'));\n            }\n        }\n    });\n    observer.observe(document, { childList: true, subtree: true });\n\n    window.addEventListener('urlchange', function(){\n        addSetInterval_('h2.ContentItem-title a:not(.zhihu_e_tips)');\n    })\n\n    function addTypeTips_(titleA) {\n        if (!titleA) return // åˆ¤æ–­æ˜¯å¦ä¸ºçœŸ\n        if (titleA.parentElement.querySelector('a.zhihu_e_toQuestion')) return // åˆ¤æ–­æ˜¯å¦å·²æ·»åŠ \n        if (titleA.textContent.indexOf('?') != -1) { // æŠŠé—®é¢˜æœ«å°¾è‹±æ–‡é—®å¥½ [?] çš„æ›¿æ¢ä¸ºä¸­æ–‡é—®å¥½ [ï¼Ÿ]ï¼Œè¿™æ ·æŒ‰é’®ä¸æ ‡é¢˜ä¹‹é—´çš„é—´è·å°±åˆšåˆšå¥½~\n            titleA.innerHTML = titleA.innerHTML.replace('?', \"ï¼Ÿ\")\n        }\n        if (/answer\\/\\d+/.test(titleA.href)) { //  å¦‚æœæ˜¯æŒ‡å‘å›ç­”çš„é—®é¢˜ï¼ˆè€ŒéæŒ‡å‘çº¯é—®é¢˜çš„é“¾æ¥ï¼‰\n            titleA.insertAdjacentHTML('afterend', `<a class=\"zhihu_e_toQuestion VoteButton\" href=\"${titleA.parentElement.parentElement.querySelector('meta[itemprop=\"url\"]').content}\" target=\"_blank\">ç›´è¾¾é—®é¢˜</a>`);\n        }\n    }\n\n    function addSetInterval_(A) {\n        let timer = setInterval(function(){\n            let aTag = document.querySelectorAll(A);\n            if (aTag.length > 0) {\n                clearInterval(timer);\n                aTag.forEach(function(item){addTypeTips_(item);})\n            }\n        });\n    }\n}\n\n\n// å±•å¼€é—®é¢˜æè¿°\nfunction questionRichTextMore() {\n    if (!menu_value('menu_questionRichTextMore')) return\n    let button = document.querySelector('button.QuestionRichText-more');\n    if (button) button.click()\n}\n\n\n// å‡€åŒ–æ ‡é¢˜æ¶ˆæ¯\nfunction cleanTitles() {\n    if (!menu_value('menu_cleanTitles')) return\n\n    // æ–¹æ¡ˆä¸€\n    const elTitle = document.head.querySelector('title');\n    const original = elTitle.textContent;\n    const observer = new MutationObserver(function() {\n        if (elTitle.textContent != original) { // é¿å…é‡å¤æ‰§è¡Œ\n            elTitle.textContent = original;\n        }\n    });\n    observer.observe(elTitle, { childList: true });\n\n    // æ–¹æ¡ˆäºŒ\n    // if (Reflect.getOwnPropertyDescriptor(document, 'title')) {\n    //     const elTitle = document.head.querySelector('title');\n    //     const original = elTitle.textContent;\n    //     const observer = new MutationObserver(function() {\n    //         if (elTitle.textContent != original) { // é¿å…é‡å¤æ‰§è¡Œ\n    //             elTitle.textContent = original;\n    //         }\n    //     });\n    //     observer.observe(elTitle, { childList: true });\n    // } else {\n    //     const title = document.title;\n    //     Reflect.defineProperty(document, 'title', {\n    //         set: () => {},\n    //         get: () => title,\n    //     });\n    // }\n}\n\n\n// å‡€åŒ–æœç´¢çƒ­é—¨\nfunction cleanSearch() {\n    if (!menu_value('menu_cleanSearch')) return\n\n    const el = document.querySelector('.SearchBar-input > input');\n    const observer = new MutationObserver((mutationsList, observer) => {\n        if (mutationsList[0].attributeName === 'placeholder' && mutationsList[0].target.placeholder != '') mutationsList[0].target.placeholder = '';\n    });\n    el.placeholder = '';\n    observer.observe(el, { attributes: true });\n    document.documentElement.appendChild(document.createElement('style')).textContent = '.AutoComplete-group > .SearchBar-label:not(.SearchBar-label--history), .AutoComplete-group > [id^=\"AutoComplete2-topSearch-\"], .AutoComplete-group > [id^=\"AutoComplete3-topSearch-\"] {display: none !important;}';\n}\n\n\n// å¿«æ·å…³é—­æ‚¬æµ®è¯„è®ºï¼ˆç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»ç½‘é¡µä¸¤ä¾§ç©ºç™½å¤„ï¼‰\nfunction closeFloatingComments() {\n    const closeFloatingCommentsModal = (mutationsList, observer) => {\n        for (const mutation of mutationsList) {\n            for (const target of mutation.addedNodes) {\n                if (target.nodeType != 1) return\n                let button = document.querySelector('button[aria-label=\"å…³é—­\"]');\n                if (button) {button.parentElement.parentElement.onclick = function(event){if (event.target.parentElement == this) {button.click();}}}\n            }\n        }\n    };\n    const observer = new MutationObserver(closeFloatingCommentsModal);\n    observer.observe(document, { childList: true, subtree: true });\n}\n\n\n// ç›‘å¬ XMLHttpRequest äº‹ä»¶\n/*function EventXMLHttpRequest() {\n    var _send = window.XMLHttpRequest.prototype.send\n    function sendReplacement(data) {\n        addTypeTips();\n        return _send.apply(this, arguments);\n    }\n    window.XMLHttpRequest.prototype.send = sendReplacement;\n}*/\n\n\n// è‡ªå®šä¹‰ urlchange äº‹ä»¶ï¼ˆç”¨æ¥ç›‘å¬ URL å˜åŒ–ï¼‰\nfunction addUrlChangeEvent() {\n    history.pushState = ( f => function pushState(){\n        var ret = f.apply(this, arguments);\n        window.dispatchEvent(new Event('pushstate'));\n        window.dispatchEvent(new Event('urlchange'));\n        return ret;\n    })(history.pushState);\n\n    history.replaceState = ( f => function replaceState(){\n        var ret = f.apply(this, arguments);\n        window.dispatchEvent(new Event('replacestate'));\n        window.dispatchEvent(new Event('urlchange'));\n        return ret;\n    })(history.replaceState);\n\n    window.addEventListener('popstate',()=>{\n        window.dispatchEvent(new Event('urlchange'))\n    });\n}\n\n\nfunction getXpath(xpath, contextNode, doc = document) {\n    contextNode = contextNode || doc;\n    try {\n        const result = doc.evaluate(xpath, contextNode, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);\n        // åº”è¯¥æ€»æ˜¯è¿”å›ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹\n        return result.singleNodeValue && result.singleNodeValue.nodeType === 1 && result.singleNodeValue;\n    } catch (err) {\n        throw new Error(`æ— æ•ˆ Xpath: ${xpath}`);\n    }\n}\n\n\n// æ˜¾ç¤ºé—®é¢˜ä½œè€…\nfunction question_author() {\n    if (document.querySelector('.BrandQuestionSymbol, .QuestionAuthor')) return\n    let qJson = JSON.parse(document.querySelector('#js-initialData').textContent).initialState.entities.questions[/\\d+/.exec(location.pathname)[0]].author,\n        html = `<div class=\"BrandQuestionSymbol\"><a class=\"BrandQuestionSymbol-brandLink\" href=\"/people/${qJson.urlToken}\"><img role=\"presentation\" src=\"${qJson.avatarUrl}\" class=\"BrandQuestionSymbol-logo\" alt=\"\"><span class=\"BrandQuestionSymbol-name\">${qJson.name}</span></a><div class=\"BrandQuestionSymbol-divider\" style=\"margin-left: 5px;margin-right: 10px;\"></div></div>`;\n        //html = `<div class=\"QuestionAuthor\"><div class=\"AuthorInfo AuthorInfo--plain\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\"><div class=\"AuthorInfo\"><span class=\"UserLink AuthorInfo-avatarWrapper\"><div class=\"Popover\"><div id=\"Popover18-toggle\" aria-haspopup=\"true\" aria-expanded=\"false\" aria-owns=\"Popover18-content\"><a class=\"UserLink-link\" data-za-detail-view-element_name=\"User\" target=\"_blank\" href=\"${qJson.urlToken}\"><img class=\"Avatar AuthorInfo-avatar\" width=\"24\" height=\"24\" src=\"${qJson.avatarUrl}\"></a></div></div></span><div class=\"AuthorInfo-content\"><div class=\"AuthorInfo-head\"><span class=\"UserLink AuthorInfo-name\"><div class=\"Popover\"><div id=\"Popover19-toggle\" aria-haspopup=\"true\" aria-expanded=\"false\" aria-owns=\"Popover19-content\"><a class=\"UserLink-link\" data-za-detail-view-element_name=\"User\" target=\"_blank\" href=\"${qJson.urlToken}\">${qJson.name}</a></div></div></span></div></div></div></div></div>`\n    document.querySelector('.QuestionHeader-topics').insertAdjacentHTML('beforebegin', html);\n    //document.querySelector('.QuestionPage h1.QuestionHeader-title').insertAdjacentHTML('afterend', html);\n}\n\n\n// [å®Œæ•´æ˜¾ç¤ºæ—¶é—´ + ç½®é¡¶æ˜¾ç¤ºæ—¶é—´] åŠŸèƒ½ä¿®æ”¹è‡ªï¼šhttps://greasyfork.org/scripts/402808ï¼ˆä» JQuery æ”¹ä¸ºåŸç”Ÿ JavaScriptï¼Œä¸”ç²¾ç®€ã€ä¼˜åŒ–äº†ä»£ç ï¼‰\n// å®Œæ•´æ˜¾ç¤ºæ—¶é—´ + ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\nfunction topTime_(css, classs) {\n    document.querySelectorAll(css).forEach(function(_this) {\n        let t = _this.querySelector('.ContentItem-time'); if (!t) return\n        if (!(t.classList.contains('full')) && t.querySelector('span') && t.querySelector('span').textContent != null) {\n            // å®Œæ•´æ˜¾ç¤ºæ—¶é—´\n            topTime_allTime(t)\n            // å‘å¸ƒæ—¶é—´ç½®é¡¶\n            topTime_publishTop(t, _this, classs)\n        }\n    });\n}\n\n\n// å®Œæ•´æ˜¾ç¤ºæ—¶é—´ + ç½®é¡¶æ˜¾ç¤ºæ—¶é—´ - æ–‡ç« \nfunction topTime_post() {\n    let t = document.querySelector('.ContentItem-time:not(.xiu-time)'); if (!t) return\n    // å®Œæ•´æ˜¾ç¤ºæ—¶é—´\n    if (t.textContent.indexOf('ç¼–è¾‘äº') > -1 && !(t.classList.contains('xiu-time'))) {\n        let tt = t.textContent;\n        t.click();\n        t.textContent = (t.textContent + ' ï¼Œ' + tt)\n        t.classList.add('xiu-time');\n    }\n\n    // ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n    if (menu_value('menu_publishTop') && !(document.querySelector('.Post-Header > .ContentItem-time')) && !(document.querySelector('.ContentItem-meta > .ContentItem-time'))) {\n        let temp_time = t.cloneNode(true);\n        temp_time.style.padding = '0px';\n        document.querySelector('.Post-Header').insertAdjacentElement('beforeEnd', temp_time);\n    }\n}\n\n\n// å®Œæ•´æ˜¾ç¤ºæ—¶é—´\nfunction topTime_allTime(t) {\n    if (t.textContent.indexOf('å‘å¸ƒäº') > -1 && t.textContent.indexOf('ç¼–è¾‘äº') == -1) {\n        t.querySelector('span').textContent = (t.querySelector('span').dataset.tooltip);\n        t.classList.add('full');\n    } else if (t.textContent.indexOf('å‘å¸ƒäº') == -1 && t.textContent.indexOf('ç¼–è¾‘äº') > -1) {\n        t.querySelector('span').textContent = (t.querySelector('span').dataset.tooltip) + ' ï¼Œ' + (t.querySelector('span').textContent);\n        t.classList.add('full');\n    }\n}\n\n\n// ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\nfunction topTime_publishTop(t, _this, _class) {\n    if (!menu_value('menu_publishTop')) return\n    if (!t.parentNode.classList.contains(_class)) {\n        let temp_time = t.cloneNode(true);\n        temp_time.style.padding = '0px';\n        // å¯¹äºè¾ƒçŸ­çš„å›ç­”ï¼Œéšè—å›ç­”åº•éƒ¨çš„æ—¶é—´\n        if (_this.offsetHeight < 600) t.style.display = 'none';\n        _this.querySelector('.' + _class).insertAdjacentElement('beforeEnd', temp_time);\n    }\n}\n\n\n// é—®é¢˜åˆ›å»ºæ—¶é—´\nfunction question_time() {\n    if (!(document.querySelector('.QuestionPage .QuestionHeader-side .QuestionTime-xiu'))) {\n        document.querySelector('.QuestionPage .QuestionHeader-side').insertAdjacentHTML('beforeEnd', '<div class=\"QuestionTime-xiu\" style=\"color: #9098ac; margin-top: 5px; font-size: 13px; font-style: italic;\"><p>åˆ›å»ºæ—¶é—´ï¼š' + getUTC8(new Date(document.querySelector('.QuestionPage > meta[itemprop=dateCreated]').content)) + '</p><p>æœ€åç¼–è¾‘ï¼š' + getUTC8(new Date(document.querySelector('.QuestionPage > meta[itemprop=dateModified]').content)) + '</p></div>');\n    }\n}\n\n\n// UTC æ ‡å‡†æ—¶è½¬ UTC+8 åŒ—äº¬æ—¶é—´ï¼Œä¿®æ”¹è‡ªï¼šhttps://greasyfork.org/zh-CN/scripts/402808ï¼ˆç²¾ç®€ï¼‰\nfunction getUTC8(t) {\n    return (t.getFullYear() + '-' + (((t.getMonth() + 1) < 10) ? ('0' + (t.getMonth() + 1)) : (t.getMonth() + 1)) + '-' + ((t.getDate() < 10) ? ('0' + t.getDate()) : t.getDate()) + '\\xa0\\xa0' + ((t.getHours() < 10) ? ('0' + t.getHours()) : t.getHours()) + ':' + ((t.getMinutes() < 10) ? ('0' + t.getMinutes()) : t.getMinutes()) + ':' + ((t.getSeconds() < 10) ? ('0' + t.getSeconds()) : t.getSeconds()));\n}\n\n\n// é»˜è®¤é«˜æ¸…åŸå›¾ï¼ˆæ— æ°´å°ï¼‰\nfunction originalPic(){\n    document.querySelectorAll('img[data-original][data-original-token][data-lazy-status]:not([data-original-xiu]):not(.comment_sticker):not(.Avatar)').forEach(function(one){one.src = 'https://' + one.dataset.original.split('/')[2] + '/' + one.dataset.originalToken + '.webp'; one.dataset.originalXiu = 'true';});\n}\n\n\n// é»˜è®¤ç«™å¤–ç›´é“¾ï¼Œä¿®æ”¹è‡ªï¼šhttps://greasyfork.org/scripts/402808ï¼ˆä» JQuery æ”¹ä¸ºåŸç”Ÿ JavaScriptï¼Œä¸”ç²¾ç®€ã€ä¼˜åŒ–äº†ä»£ç ï¼‰\nfunction directLink () {\n    document.querySelectorAll('a.external[href*=\"link.zhihu.com/?target=\"], a.LinkCard[href*=\"link.zhihu.com/?target=\"]:not(.MCNLinkCard):not(.ZVideoLinkCard):not(.ADLinkCardContainer)').forEach(function (_this) {_this.href = decodeURIComponent(_this.href.substring(_this.href.indexOf('link.zhihu.com/?target=') + 23));});\n}\n\n\n// é»˜è®¤æŠ˜å é‚€è¯·ï¼Œä¿®æ”¹è‡ªï¼šhttps://greasyfork.org/scripts/402808ï¼ˆä» JQuery æ”¹ä¸ºåŸç”Ÿ JavaScriptï¼Œä¸”ç²¾ç®€ã€ä¼˜åŒ–äº†ä»£ç ï¼‰\nfunction questionInvitation(){\n    let time = setInterval(function(){\n        let q = document.querySelector('.QuestionInvitation-content'); if (!q) return\n        clearInterval(time);\n        q.style.display = 'none';\n        document.querySelector('.QuestionInvitation-title').innerHTML = document.querySelector('.QuestionInvitation-title').innerText + '<span style=\"cursor: pointer; font-size: 14px; color: #919aae;\"> å±•å¼€/æŠ˜å </span>'\n        // ç‚¹å‡»äº‹ä»¶ï¼ˆå±•å¼€/æŠ˜å ï¼‰\n        document.querySelector('.Topbar').onclick = function(){\n            let q = document.querySelector('.QuestionInvitation-content')\n            if (q.style.display == 'none') {\n                q.style.display = ''\n            } else {\n                q.style.display = 'none'\n            }\n        }\n    });\n}\n\n// å±è”½çƒ­æ¦œæ‚é¡¹\nfunction blockHotOther() {\n    if (!menu_value('menu_blockTypeLiveHot')) return;\n\n    const isQuestionItem = (hotItem) => {\n        const linkItem = hotItem.querySelector('.HotItem-content a');\n        if (linkItem === null) return false;\n        return /\\/question\\/\\d+/.test(linkItem.href);\n    }\n\n    const block = () => {\n        removeLiveItems();\n        fixItemRank();\n    };\n\n    // ç§»é™¤éé—®é¢˜çš„å†…å®¹\n    const removeLiveItems = () => {\n        const hotItems = document.querySelectorAll('.HotList-list .HotItem');\n        for (const item of hotItems) {\n            if (!isQuestionItem(item)) item.remove();\n        }\n    }\n\n    // ä¿®å¤æ’è¡Œæ¦œåºå·\n    const fixItemRank = () => {\n        const hotItems = document.querySelectorAll('.HotList-list .HotItem:not([hidden])');\n        hotItems.forEach((item, index) => {\n            const rank = item.querySelector('.HotItem-index .HotItem-rank');\n            if (rank !== null) rank.innerText = index + 1;\n        });\n    }\n\n    const blockLive_content = (mutationsList, observer) => {\n        for (const mutation of mutationsList) {\n            for (const target of mutation.addedNodes) {\n                if (target.classList.contains('.HotItem')) {\n                    block();\n                }\n            }\n        }\n    }\n\n    const observer = new MutationObserver(blockLive_content);\n    observer.observe(document, { childList: true, subtree: true });\n\n    // åˆå§‹ç§»é™¤\n    block();\n}\n\n\n(function() {\n    if (window.onurlchange === undefined) {addUrlChangeEvent();} // Tampermonkey v4.11 ç‰ˆæœ¬æ·»åŠ çš„ onurlchange äº‹ä»¶ grantï¼Œå¯ä»¥ç›‘æ§ pjax ç­‰ç½‘é¡µçš„ URL å˜åŒ–\n    window.addEventListener('urlchange', function(){ // é’ˆå¯¹çš„æ˜¯ä»å•ä¸ªå›ç­”é¡µè·³è½¬åˆ°å®Œæ•´å›ç­”é¡µæ—¶\n        if (location.pathname.indexOf('question') > -1 && location.pathname.indexOf('waiting') === -1 && location.pathname.indexOf('/answer/') === -1) { //       å›ç­”é¡µ //\n            setTimeout(function(){\n                collapsedNowAnswer('.QuestionPage'); //                        æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n                collapsedNowAnswer('.Question-main'); //                       æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n                questionRichTextMore(); //                                     å±•å¼€é—®é¢˜æè¿°\n                blockUsers('question'); //                                     å±è”½æŒ‡å®šç”¨æˆ·\n                blockYanXuan(); //                                             å±è”½ç›é€‰å†…å®¹\n            }, 300);\n        } else if (location.pathname == '/') { // æ¨è\n            setTimeout(()=>{\n                blockUsers('index'); //                                        å±è”½æŒ‡å®šç”¨æˆ·\n                blockKeywords('index'); //                                     å±è”½æŒ‡å®šå…³é”®è¯\n                blockType(); //                                                å±è”½æŒ‡å®šç±»åˆ«ï¼ˆè§†é¢‘/æ–‡ç« ç­‰ï¼‰\n            }, 500);\n        } else if (location.pathname == '/hot') { // çƒ­æ¦œ\n            setTimeout(()=>{\n                blockKeywords('index'); //                                     å±è”½æŒ‡å®šå…³é”®è¯\n                blockHotOther(); //                                            ç§»é™¤çƒ­æ’­æ‚é¡¹\n            }, 500);\n        } else if (location.pathname == '/follow') { // å…³æ³¨\n            setTimeout(()=>{\n                blockKeywords('follow'); //                                    å±è”½æŒ‡å®šå…³é”®è¯\n                blockType(); //                                                å±è”½æŒ‡å®šç±»åˆ«ï¼ˆè§†é¢‘/æ–‡ç« ç­‰ï¼‰\n                blockType('follow'); //                                        å±è”½æŒ‡å®šç±»åˆ«ï¼ˆèµåŒäº†XX/å…³æ³¨äº†XXç­‰ï¼‰\n            }, 500);\n        }\n    })\n\n    cleanTitles(); // å‡€åŒ–æ ‡é¢˜æ¶ˆæ¯ï¼Œä¸èƒ½å»¶è¿Ÿæ‰§è¡Œ\n    // Violentmonkey æ¯” Tampermonkey åŠ è½½æ›´æ—©ï¼Œä¼šå¯¼è‡´ä¸€äº›å…ƒç´ è¿˜æ²¡åŠ è½½ï¼Œå› æ­¤éœ€è¦å»¶è¿Ÿä¸€ä¼šå„¿\n    // Tampermonkey 4.18.0 ç‰ˆæœ¬å¯èƒ½éœ€è¦å»¶è¿Ÿä¸€ä¼šæ‰§è¡Œ\n    if (GM_info.scriptHandler === 'Violentmonkey' || (GM_info.scriptHandler === 'Tampermonkey' && parseFloat(GM_info.version.slice(0,4)) >= 4.18)) {\n        setTimeout(start, 300);\n    } else {\n        start();\n    }\n\n    function start(){\n        cleanHighlightLink(); //                                              ç§»é™¤é«˜äº®é“¾æ¥\n        originalPic();directLink(); // å…ˆç«‹å³æ‰§è¡Œä¸€æ¬¡\n        setInterval(originalPic,500); //                                       é»˜è®¤é«˜æ¸…åŸå›¾ï¼ˆæ— æ°´å°ï¼‰\n        setInterval(directLink, 500); //                                       é»˜è®¤ç«™å¤–ç›´é“¾\n        if (location.hostname != 'zhuanlan.zhihu.com') {\n            if (location.pathname.indexOf('/column/') === -1) cleanSearch(); //å‡€åŒ–æœç´¢çƒ­é—¨\n            collapsedAnswer(); //                                              ä¸€é”®æ”¶èµ·å›ç­”\n        }\n        closeFloatingComments(); //                                            å¿«æ·å…³é—­æ‚¬æµ®è¯„è®ºï¼ˆç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»ç½‘é¡µä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n        blockKeywords('comment'); //                                           å±è”½æŒ‡å®šå…³é”®è¯ï¼ˆè¯„è®ºï¼‰\n\n\n        if (location.pathname.indexOf('question') > -1 && location.href.indexOf('/log') == -1) { //       å›ç­”é¡µ //\n            if (location.pathname.indexOf('waiting') == -1) {\n                collapsedNowAnswer('.QuestionPage'); //                        æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n                collapsedNowAnswer('.Question-main'); //                       æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n                questionRichTextMore(); //                                     å±•å¼€é—®é¢˜æè¿°\n                blockUsers('question'); //                                     å±è”½æŒ‡å®šç”¨æˆ·\n                blockYanXuan(); //                                             å±è”½ç›é€‰å†…å®¹\n                blockType('question'); //                                      å±è”½æŒ‡å®šç±»åˆ«ï¼ˆè§†é¢‘/æ–‡ç« ç­‰ï¼‰\n                defaultCollapsedAnswer(); //                                   é»˜è®¤æ”¶èµ·å›ç­”\n            }\n            setInterval(function(){topTime_('.ContentItem.AnswerItem', 'ContentItem-meta')}, 300); // ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n            setTimeout(function(){question_time(); question_author()}, 100); //é—®é¢˜åˆ›å»ºæ—¶é—´ + æ˜¾ç¤ºé—®é¢˜ä½œè€…\n            questionInvitation(); //                                           é»˜è®¤æŠ˜å é‚€è¯·\n\n        } else if (location.pathname === '/search') { //          æœç´¢ç»“æœé¡µ //\n            collapsedNowAnswer('main div'); //                                 æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n            collapsedNowAnswer('.Search-container'); //                        æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n            setInterval(function(){topTime_('.ContentItem.AnswerItem, .ContentItem.ArticleItem', 'SearchItem-meta')}, 300); // ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n            addTypeTips(); //                                                  åŒºåˆ†é—®é¢˜æ–‡ç« \n            addToQuestion(); //                                                ç›´è¾¾é—®é¢˜æŒ‰é’®\n            blockUsers('search'); //                                           å±è”½æŒ‡å®šç”¨æˆ·\n            blockKeywords('search'); //                                        å±è”½æŒ‡å®šå…³é”®è¯\n            blockType('search'); //                                            å±è”½æŒ‡å®šç±»åˆ«ï¼ˆè§†é¢‘/æ–‡ç« ç­‰ï¼‰\n\n\n        } else if (location.pathname.indexOf('/topic/') > -1) { //   è¯é¢˜é¡µ //\n            if (location.pathname.indexOf('/hot') > -1 || location.href.indexOf('/top-answers') > -1) { // ä»…é™ [è®¨è®º] [ç²¾å]\n                collapsedNowAnswer('main.App-main'); //                        æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n                setInterval(function(){topTime_('.ContentItem.AnswerItem, .ContentItem.ArticleItem', 'ContentItem-meta')}, 300); // ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n                addTypeTips(); //                                              åŒºåˆ†é—®é¢˜æ–‡ç« \n                addToQuestion(); //                                            ç›´è¾¾é—®é¢˜æŒ‰é’®\n                blockUsers('topic'); //                                        å±è”½æŒ‡å®šç”¨æˆ·\n                blockKeywords('topic'); //                                     å±è”½æŒ‡å®šå…³é”®è¯\n            }\n\n        } else if (location.hostname === 'zhuanlan.zhihu.com'){ //    æ–‡ç«  //\n            backToTop('article.Post-Main.Post-NormalMain'); //                 å¿«æ·è¿”å›é¡¶éƒ¨\n            backToTop('div.Post-Sub.Post-NormalSub'); //                       å¿«æ·è¿”å›é¡¶éƒ¨\n            setTimeout(topTime_post, 300); //                                  ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n            blockUsers(); //                                                   å±è”½æŒ‡å®šç”¨æˆ·\n\n\n        } else if (location.pathname.indexOf('/column/') > -1) { //    ä¸“æ  //\n            setTimeout(function(){\n                collapsedAnswer(); //                                           ä¸€é”®æ”¶èµ·å›ç­”\n                collapsedNowAnswer('main div'); //                              æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n                setInterval(function(){topTime_('.ContentItem.AnswerItem, .ContentItem.ArticleItem', 'ContentItem-meta')}, 300); // ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n                blockUsers(); //                                                å±è”½æŒ‡å®šç”¨æˆ·\n            }, 300);\n\n\n        } else if (location.pathname.indexOf('/people/') > -1 || location.href.indexOf('org') > -1) { // ç”¨æˆ·ä¸»é¡µ //\n            if (location.pathname.split('/').length === 3) addTypeTips();addToQuestion(); // åŒºåˆ†é—®é¢˜æ–‡ç« ã€ç›´è¾¾é—®é¢˜æŒ‰é’®\n            collapsedNowAnswer('main div'); //                                 æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n            collapsedNowAnswer('.Profile-main'); //                            æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n            setInterval(function(){topTime_('.ContentItem.AnswerItem, .ContentItem.ArticleItem', 'ContentItem-meta')}, 300); // ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n            blockUsers('people'); //                                           å±è”½æŒ‡å®šç”¨æˆ·\n            blockKeywords('people'); //                                        å±è”½æŒ‡å®šå…³é”®è¯\n\n\n        } else if (location.pathname.indexOf('/collection/') > -1) { // æ”¶è—å¤¹ //\n            addTypeTips(); //                                                  åŒºåˆ†é—®é¢˜æ–‡ç« \n            addToQuestion(); //                                                ç›´è¾¾é—®é¢˜æŒ‰é’®\n            collapsedNowAnswer('main'); //                                     æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n            collapsedNowAnswer('.CollectionsDetailPage'); //                   æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n            setInterval(function(){topTime_('.ContentItem.AnswerItem, .ContentItem.ArticleItem', 'ContentItem-meta')}, 300); // ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n            blockKeywords('collection'); //                                    å±è”½æŒ‡å®šå…³é”®è¯\n\n        } else if (location.pathname.indexOf('/pin/') > -1) { // æƒ³æ³• //\n            backToTop('main[role=main]'); //                                   å¿«æ·è¿”å›é¡¶éƒ¨\n            setInterval(function(){topTime_('.ContentItem.PinItem', 'ContentItem-meta')}, 300); // ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n\n        } else { //                                                     é¦–é¡µ //\n            // è§£å†³å±è”½ç±»åˆ«åï¼Œå› ä¸ºé¦–é¡µä¿¡æ¯æµå¤ªå°‘è€Œæ²¡æœ‰æ»šåŠ¨æ¡å¯¼è‡´æ— æ³•åŠ è½½æ›´å¤šå†…å®¹çš„é—®é¢˜\n            document.lastElementChild.appendChild(document.createElement('style')).textContent = '.Topstory-container {min-height: 1500px;}';\n            if (menu_value('menu_blockTypeVideo')) document.lastChild.appendChild(document.createElement('style')).textContent = `.Card .ZVideoItem-video, nav.TopstoryTabs > a[aria-controls=\"Topstory-zvideo\"] {display: none !important;}`;\n\n            collapsedNowAnswer('main div'); //                                 æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n            collapsedNowAnswer('.Topstory-container'); //                      æ”¶èµ·å½“å‰å›ç­” + å¿«æ·è¿”å›é¡¶éƒ¨\n            setInterval(function(){topTime_('.TopstoryItem', 'ContentItem-meta')}, 300); // ç½®é¡¶æ˜¾ç¤ºæ—¶é—´\n            addTypeTips(); //                                                  åŒºåˆ†é—®é¢˜æ–‡ç« \n            addToQuestion(); //                                                ç›´è¾¾é—®é¢˜æŒ‰é’®\n            if (location.pathname == '/') { // æ¨è\n                blockUsers('index'); //                                        å±è”½æŒ‡å®šç”¨æˆ·\n                blockKeywords('index'); //                                     å±è”½æŒ‡å®šå…³é”®è¯\n                blockType(); //                                                å±è”½æŒ‡å®šç±»åˆ«ï¼ˆè§†é¢‘/æ–‡ç« ç­‰ï¼‰\n            } else if (location.pathname == '/hot') { // çƒ­æ¦œ\n                blockKeywords('index'); //                                     å±è”½æŒ‡å®šå…³é”®è¯\n                blockHotOther(); //                                            å±è”½çƒ­æ¦œæ‚é¡¹\n            } else if (location.pathname == '/follow') { // å…³æ³¨\n                blockKeywords('follow'); //                                    å±è”½æŒ‡å®šå…³é”®è¯\n                blockType(); //                                                å±è”½æŒ‡å®šç±»åˆ«ï¼ˆè§†é¢‘/æ–‡ç« ç­‰ï¼‰\n                blockType('follow'); //                                        å±è”½æŒ‡å®šç±»åˆ«ï¼ˆèµåŒäº†XX/å…³æ³¨äº†XXç­‰ï¼‰\n            } else {\n                blockUsers();\n            }\n        }\n    }\n})();\n"
        },
        {
          "name": "Zhiyoo-Beautification.user.js",
          "type": "blob",
          "size": 1.7431640625,
          "content": "// ==UserScript==\n// @name         æ™ºå‹é‚¦è®ºå›ç¾åŒ–\n// @version      1.0.2\n// @author       X.I.U\n// @description  ç²¾ç®€å¤šä½™å†…å®¹ã€æ ·å¼ä¼˜åŒ–ã€å®½å±æ˜¾ç¤º\n// @icon         http://bbs.zhiyoo.net/favicon.ico\n// @match        *://bbs.zhiyoo.net/*\n// @license      GPL-3.0 License\n// @run-at       document-start\n// @namespace    https://greasyfork.org/scripts/412361\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n'use strict';\n(function() {\n    let style_Add = document.createElement('style');\n    style_Add.innerHTML = `\n/* ç²¾ç®€å¤šäºå†…å®¹ */\n.forum_top,#main_sidebar,.drag,.nav,.tps,.bm.bml,.ct2 .sd,.mn div.box.cl:nth-of-type(3),#f_pst,.plc.plm,#diy_like1,#hm_qrcode_main,#ft,.po.bbd.reply_p,.ft_top.cl,div a[href=\"https://weibo.com/372458419\"] {\n\tdisplay: none !important;\n}\n/* è°ƒæ•´ä¸»ä½“å®½åº¦ï¼ˆå› ä¸ºéšè—äº†å³ä¾§ä¾§æ ï¼‰ */\n.ct2 .mn,#wp .forum-left,#thread_types1 {\n\twidth: auto !important;\n}\n/* éšè—åº•éƒ¨ */\n#footer {\n    height: 0 !important;\n    margin: 0 !important;\n}\n/* è°ƒæ•´å¸–å­å†…ï¼Œæ ‡é¢˜æ–‡å­—å¤§å° */\n#thread_subject {\n\tfont-size: 19px !important;\n}\n/* è°ƒæ•´å¸–å­å†…ï¼Œéšè—å†…å®¹æç¤ºåŒºåŸŸæ ·å¼ */\n.locked a {\n\tcolor: #ffffff;\n\tborder: 1px dashed #ffffff;\n\tpadding: 0 5px 3px;\n\tmargin: 0 5px;\n\tfont-size: 20px;\n\tbackground-color: #e24e72;\n}\n/* è°ƒæ•´å¸–å­å†…ï¼Œå›¾ç‰‡æœ€å¤§å®½åº¦ï¼ˆå³ä¸€æ’å¯ä»¥æ”¾ä¸‰ä¸ªå›¾ç‰‡ï¼‰ */\n#postlist .pcb img {\n\tmax-width: 30%;\n}`;\n    if (document.head) {\n        document.head.appendChild(style_Add);\n    } else {\n        let timer = setInterval(function(){\n            if (document.head) {\n                document.head.appendChild(style_Add);\n                clearInterval(timer);\n            }\n        }, 1);\n    }\n})();"
        },
        {
          "name": "Zhiyoo-Enhanced.user.js",
          "type": "blob",
          "size": 21.568359375,
          "content": "// ==UserScript==\n// @name         æ™ºå‹é‚¦è®ºå›å¢å¼º\n// @version      1.1.9\n// @author       X.I.U\n// @description  è‡ªåŠ¨ç­¾åˆ°ã€è‡ªåŠ¨å›å¤ã€è‡ªåŠ¨æ— ç¼ç¿»é¡µã€å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ç‚¹å‡»ä¸¤ä¾§ç©ºç™½å¤„ï¼‰ã€æ¸…ç†ç½®é¡¶å¸–å­ã€ç®€åŒ–é™„ä»¶å…‘æ¢/ä¸‹è½½ã€æ¸…ç†å¸–å­æ ‡é¢˜ã€–XXXã€—ã€XXXã€‘æ–‡å­—\n// @icon         http://bbs.zhiyoo.net/favicon.ico\n// @match        *://bbs.zhiyoo.net/*\n// @match        *://www.zhiyoo.net/search.php*\n// @grant        GM_xmlhttpRequest\n// @grant        GM_registerMenuCommand\n// @grant        GM_unregisterMenuCommand\n// @grant        GM_openInTab\n// @grant        GM_getValue\n// @grant        GM_setValue\n// @grant        GM_notification\n// @license      GPL-3.0 License\n// @run-at       document-end\n// @namespace    https://greasyfork.org/scripts/412362\n// @supportURL   https://github.com/XIU2/UserScript\n// @homepageURL  https://github.com/XIU2/UserScript\n// ==/UserScript==\n\n(function() {\n    'use strict';\n    var menu_ALL = [\n        ['menu_autoReply', 'è‡ªåŠ¨å›å¤', 'è‡ªåŠ¨å›å¤', true],\n        ['menu_pageLoading', 'è‡ªåŠ¨æ— ç¼ç¿»é¡µ', 'è‡ªåŠ¨æ— ç¼ç¿»é¡µ', true],\n        ['menu_backToTop', 'å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ç‚¹å‡»ä¸¤ä¾§ç©ºç™½å¤„ï¼‰', 'å›åˆ°é¡¶éƒ¨', true],\n        ['menu_cleanTopPost', 'æ¸…ç†ç½®é¡¶å¸–å­', 'æ¸…ç†ç½®é¡¶å¸–å­', true],\n        ['menu_cleanPostTitle', 'æ¸…ç†å¸–å­æ ‡é¢˜å¼€å¤´ã€–ã€—ã€ã€‘æ–‡å­—', 'æ¸…ç†å¸–å­æ ‡é¢˜å¼€å¤´ã€–ã€—ã€ã€‘æ–‡å­—', true],\n        ['menu_qianDaoRedirectURL', 'å½“å‰é¡µé¢è®¾ä¸ºç­¾åˆ°åé‡å®šå‘åœ°å€', 'å·²è®¾ç½®å½“å‰é¡µé¢ä¸ºç­¾åˆ°åé‡å®šå‘åœ°å€', 'http://bbs.zhiyoo.net/forum.php?mod=forumdisplay&fid=42&filter=author&orderby=dateline']\n    ], menu_ID = [];\n    for (let i=0;i<menu_ALL.length;i++){ // å¦‚æœè¯»å–åˆ°çš„å€¼ä¸º null å°±å†™å…¥é»˜è®¤å€¼\n        if (GM_getValue(menu_ALL[i][0]) == null){GM_setValue(menu_ALL[i][0], menu_ALL[i][3])};\n    }\n    registerMenuCommand();\n\n    // æ³¨å†Œè„šæœ¬èœå•\n    function registerMenuCommand() {\n        if (menu_ID.length > menu_ALL.length){ // å¦‚æœèœå•IDæ•°ç»„å¤šäºèœå•æ•°ç»„ï¼Œè¯´æ˜ä¸æ˜¯é¦–æ¬¡æ·»åŠ èœå•ï¼Œéœ€è¦å¸è½½æ‰€æœ‰è„šæœ¬èœå•\n            for (let i=0;i<menu_ID.length;i++){\n                GM_unregisterMenuCommand(menu_ID[i]);\n            }\n        }\n        for (let i=0;i<menu_ALL.length;i++){ // å¾ªç¯æ³¨å†Œè„šæœ¬èœå•\n            menu_ALL[i][3] = GM_getValue(menu_ALL[i][0]);\n            if (menu_ALL[i][0] == 'menu_qianDaoRedirectURL') {\n                menu_ID[i] = GM_registerMenuCommand(`#ï¸âƒ£ ${menu_ALL[i][1]}`, function(){GM_setValue(`${menu_ALL[i][0]}`, location.href);GM_notification({text: `${menu_ALL[i][2]}`, timeout: 3000});})\n            } else {\n                menu_ID[i] = GM_registerMenuCommand(`${menu_ALL[i][3]?'âœ…':'âŒ'} ${menu_ALL[i][1]}`, function(){menu_switch(`${menu_ALL[i][3]}`,`${menu_ALL[i][0]}`,`${menu_ALL[i][2]}`)});\n            }\n        }\n        menu_ID[menu_ID.length] = GM_registerMenuCommand('ğŸ’¬ åé¦ˆ & å»ºè®®', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/412362/feedback', {active: true,insert: true,setParent: true});});\n    }\n\n    // èœå•å¼€å…³\n    function menu_switch(menu_status, Name, Tips) {\n        if (menu_status == 'true'){\n            GM_setValue(`${Name}`, false);\n            GM_notification({text: `å·²å…³é—­ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }else{\n            GM_setValue(`${Name}`, true);\n            GM_notification({text: `å·²å¼€å¯ [${Tips}] åŠŸèƒ½\\nï¼ˆç‚¹å‡»åˆ·æ–°ç½‘é¡µåç”Ÿæ•ˆï¼‰`, timeout: 3500, onclick: function(){location.reload();}});\n        }\n        registerMenuCommand(); // é‡æ–°æ³¨å†Œè„šæœ¬èœå•\n    };\n\n    // è¿”å›èœå•å€¼\n    function menu_value(menuName) {\n        for (let menu of menu_ALL) {\n            if (menu[0] == menuName) {\n                return menu[3]\n            }\n        }\n    }\n\n\n    // éšæœºå›å¤å¸–å­çš„å†…å®¹\n    var replyList = [\n        \"æ„Ÿè°¢æ¥¼ä¸»åˆ†äº«çš„å†…å®¹ï¼\",\n        \"æ„Ÿè°¢åˆ†äº«ï¼ç»™ä½ ç‚¹èµï¼\",\n        \"æ„Ÿè°¢åˆ†äº«ï¼è®ºå›å› ä½ æ›´ç²¾å½©ï¼\",\n        \"çœ‹çœ‹éšè—å†…å®¹æ˜¯ä»€ä¹ˆï¼è°¢è°¢ï¼\",\n        \"å…ˆä¸‹è½½çœ‹çœ‹å¥½ä¸å¥½ç”¨ï¼\",\n        \"æ¥¼ä¸»ä¸€ç”Ÿå¹³å®‰ï¼å¥½äººä¸€ç”Ÿå¹³å®‰ï¼\",\n        \"ææœºä¸Šæ™ºå‹æé—®ä¸‹èµ„æºï¼\",\n        \"é©¬å…‹ï¼æ™ºå‹é‚¦ä½ ææœºï¼\",\n        \"ä½ è¯´çš„è§‚ç‚¹æˆ‘ä¹Ÿå¾ˆæ”¯æŒï¼\",\n        \"æ¥¼ä¸»å¤ªæ£’äº†ï¼æˆ‘å…ˆä¸‹ä¸ºæ•¬ï¼\",\n        \"ç»™æ¥¼ä¸»ç‚¹èµï¼Œå¸Œæœ›ç»§ç»­åˆ†äº«ï¼\",\n        \"æ„Ÿè°¢æ™ºå‹å¸®è®ºå›ï¼Œæ„Ÿè°¢LZçƒ­å¿ƒåˆ†äº«ï¼\",\n        \"æ„Ÿè°¢æ¥¼ä¸»åˆ†äº«ä¼˜è´¨å†…å®¹ï¼Œå¸Œæœ›ç»§ç»­åŠªåŠ›ï¼\",\n        \"ä¸‹è½½è¯•ç”¨ä¸€ä¸‹ï¼Œå¦‚æœç”¨ç€ä¸é”™å°±ç»™æ¥¼ä¸»é¡¶è´´ï¼\",\n        \"è¿™ä¹ˆå¥½çš„ä¸œè¥¿ï¼æ„Ÿè°¢æ¥¼ä¸»åˆ†äº«ï¼æ„Ÿè°¢æ™ºå‹å¸®è®ºå›ï¼\",\n        \"å¸Œæœ›æ¥¼ä¸»ç»§ç»­åˆ†äº«æ›´å¤šå¥½ç”¨çš„ä¸œè¥¿ï¼è°¢è°¢ï¼\",\n        \"çœ‹åˆ°æ¥¼ä¸»è¿™ä¹ˆåŠªåŠ›åˆ†äº«ï¼Œæˆ‘åªèƒ½é¡¶ä¸ªè´´æ„Ÿè°¢ä¸€ä¸‹äº†ï¼\",\n        \"å¥½ä¸œè¥¿ï¼Œæ‹¿èµ°äº†ï¼Œä¸´èµ°é¡¶ä¸ªè´´æ„Ÿè°¢ä¸€ä¸‹æ¥¼ä¸»ï¼\",\n        \"è¿™å°±éå¸¸ç»™åŠ›äº†ï¼æ„Ÿè°¢åˆ†äº«ï¼\",\n        \"å‰å®³äº†ï¼å…ˆæ”¶è—ï¼Œå†å›å¤ï¼è°¢è°¢ï¼\"\n    ];\n\n    // å¸–å­æ•°é‡ï¼Œé¿å…é‡å¤æ¸…ç†å¸–å­åˆ—è¡¨ä¸­å¸–å­æ ‡é¢˜å¼€å¤´çš„ã€–XXXã€—ã€XXXã€‘æ–‡å­—ï¼Œç”¨äºæé«˜æ•ˆç‡\n    var postNum = 0;\n\n    // æ£€æŸ¥æ˜¯å¦ç™»é™†\n    var loginStatus = false;\n    if (document.querySelector('.Quater_user.logined')){\n        loginStatus = true;\n    }\n\n    // é»˜è®¤ ID ä¸º 0\n    var curSite = {SiteTypeID: 0};\n\n    // è‡ªåŠ¨ç¿»é¡µè§„åˆ™\n    let DBSite = {\n        forumdisplay: {\n            SiteTypeID: 1,\n            pager: {\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;table#threadlisttableid > tbody[id^=\"normalthread_\"]',\n                HT_insert: ['css;table#threadlisttableid', 2],\n                replaceE: 'css;div.pg'\n            }\n        },\n        search: {\n            SiteTypeID: 2,\n            pager: {\n                nextLink: '//a[@class=\"nxt\"][@href]',\n                pageElement: 'css;div#threadlist > ul',\n                HT_insert: ['css;div#threadlist', 2],\n                replaceE: 'css;div.pg'\n            }\n        }\n    };\n\n    // ç”¨äºè„šæœ¬å†…éƒ¨åˆ¤æ–­å½“å‰ URL ç±»å‹\n    let SiteType = {\n        FORUMDISPLAY: DBSite.forumdisplay.SiteTypeID, // å„æ¿å—å¸–å­åˆ—è¡¨\n        SEARCH: DBSite.search.SiteTypeID // æœç´¢ç»“æœåˆ—è¡¨\n    };\n\n    var attachmentHrefTime = 0;\n    curSite.pageUrl = \"\"; // ä¸‹ä¸€é¡µURL\n\n    var patt_thread = /\\/thread-\\d+-\\d+\\-\\d+.html/, //      åŒ¹é… /thread-XXX-X-X.html å¸–å­æ­£åˆ™è¡¨è¾¾å¼\n        patt_search = /\\/thread-\\d+-\\d+\\-\\d+.html/, //      åŒ¹é…æœç´¢ç»“æœåˆ—è¡¨æ­£åˆ™è¡¨è¾¾å¼\n        patt_posttitle = /^ã€–.+ã€—(ï¼š)?|^ã€.+ã€‘(ï¼š)?/, //    åŒ¹é…å¸–å­æ ‡é¢˜ä¸­çš„ã€–XXXã€—ã€XXXã€‘æ­£åˆ™è¡¨è¾¾å¼\n        patt_attachment_href = /(?<=\\\\').+(?=\\\\')/\n\n    if (location.pathname === '/plugin.php'){\n        switch(getQueryVariable(\"id\"))\n        {\n            case 'dsu_paulsign:sign': //                è¢«é‡å®šå‘åˆ°ç­¾åˆ°é¡µé¢\n                qiandao(); //                           è‡ªåŠ¨ç­¾åˆ°\n                break;\n            case 'piaobo_attachment': //                å…‘æ¢é™„ä»¶åçš„æç¤ºé¡µé¢\n                attachmentBack(); //                    ç«‹å³è¿”å›å¸–å­\n                break;\n            case 'threed_attach:downld': //             é™„ä»¶ä¸‹è½½é¡µé¢\n                goPan(); //                             è·³è½¬è‡³ç½‘ç›˜é¡µ\n                break;\n        }\n    }else if(location.pathname === '/forum.php'){\n        switch(getQueryVariable(\"mod\"))\n        {\n            case 'viewthread': //                      æµè§ˆå¸–å­å†…å®¹\n                showHide(); //                         å…ˆçœ‹çœ‹æ˜¯å¦æœ‰éšè—å†…å®¹ï¼Œå¦‚æœå·²æ˜¾ç¤ºåˆ™å®šä½åˆ°éšè—å†…å®¹åŒºåŸŸï¼Œå¦‚æœæ²¡æœ‰éšè—å†…å®¹ï¼Œåˆ™å•¥éƒ½ä¸å¹²\n                autoReply(); //                        è‡ªåŠ¨å›å¤ï¼ˆæœ‰éšè—å†…å®¹æ‰ä¼šå›å¤ï¼‰ï¼Œå›å¤è¿‡å°±å®šä½åˆ°åº•éƒ¨ï¼ˆéšè—å†…å®¹åŒºåŸŸï¼‰\n                var attachmentHref_Interval = setInterval(attachmentHref,100); // å…‘æ¢é™„ä»¶æŒ‰é’®æ”¹ä¸ºç›´é“¾ï¼ˆä¸å†å¼¹å‡ºç¡®è®¤æç¤ºæ¡†ï¼‰\n                break;\n            case 'forumdisplay': //                    æµè§ˆå¸–å­åˆ—è¡¨\n                curSite = DBSite.forumdisplay; //      å¸–å­åˆ—è¡¨é¡µï¼ˆè‡ªåŠ¨ç¿»é¡µï¼‰\n                cleanTop(); //                         æ¸…ç†ç½®é¡¶å¸–å­\n                cleanPostTitle(); //                   æ¸…ç†å¸–å­åˆ—è¡¨ä¸­å¸–å­æ ‡é¢˜å¼€å¤´çš„ã€–XXXã€—ã€XXXã€‘æ–‡å­—\n                pageLoading(); //                      è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n                break;\n        }\n        backToTop(); // å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ç‚¹å‡»ä¸¤ä¾§ç©ºç™½å¤„ï¼‰\n    }else if(location.pathname === '/search.php'){\n        curSite = DBSite.search; //                    æœç´¢ç»“æœåˆ—è¡¨é¡µï¼ˆè‡ªåŠ¨ç¿»é¡µï¼‰\n        pageLoading(); //                              è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n    }else if (patt_thread.test(location.pathname)){ // å¯¹äº /thread-XXX-X-X.html è¿™ç§å¸–å­é¡µé¢ä¹Ÿå’Œä¸Šé¢ä¸€æ ·\n        showHide();\n        autoReply();\n    }\n\n\n    // è‡ªåŠ¨ç­¾åˆ°\n    function qiandao(){\n        if (loginStatus){\n            if(document.getElementById('yl'))\n            {\n                document.getElementById('yl').click();\n                document.querySelector('td.tr3.tac div a').click();\n            }\n            setTimeout(location.href=menu_value('menu_qianDaoRedirectURL'), 2000); // è·³è½¬åˆ°æŒ‡å®šURL\n        }\n    }\n\n\n    // è‡ªåŠ¨å›å¤\n    function autoReply(){\n        if (!menu_value('menu_autoReply')) return\n        if (loginStatus){\n            // å­˜åœ¨éšè—å†…å®¹ï¼Œè‡ªåŠ¨å›å¤\n            if (document.getElementsByClassName(\"showhide\").length == 0){\n                writeReply();\n                // å¦‚æœä½¿ç”¨äº†æˆ‘çš„ [æ™ºå‹é‚¦ç¾åŒ–] è„šæœ¬ï¼Œåˆ™å®šä½è‡³åº•éƒ¨ï¼Œåä¹‹å®šä½è‡³éšè—å†…å®¹åŒºåŸŸ\n                if (document.getElementById(\"fastpostmessage\").offsetParent == null){\n                    setTimeout(function(){window.scrollTo(0,99999999)}, 1000);\n                }else{\n                    setTimeout(function(){window.scrollTo(0,document.querySelector('.showhide').offsetTop)}, 1000);\n                }\n            }\n        }\n    }\n\n\n    // å†™å…¥è‡ªåŠ¨å›å¤å†…å®¹\n    function writeReply(){\n        let textarea = document.getElementById(\"fastpostmessage\");\n        if (textarea){\n            // éšæœºå†™å…¥å›å¤å†…å®¹\n            textarea.value = textarea.value + replyList[Math.floor((Math.random()*replyList.length))] + replyList[Math.floor((Math.random()*replyList.length))];\n            //console.log(`${textarea.value}`)\n            let fastpostsubmit = document.getElementById(\"fastpostsubmit\");\n            if (fastpostsubmit){\n                setTimeout(function(){fastpostsubmit.click()}, 200);\n            }\n        }\n    }\n\n\n    // å®šä½åˆ°éšè—å†…å®¹åŒºåŸŸ\n    function showHide(){\n        if (loginStatus){\n            // å¦‚æœå·²æ˜¾ç¤ºéšè—å†…å®¹ï¼Œåˆ™å®šä½åˆ°éšè—å†…å®¹åŒºåŸŸ\n            // å¦‚æœæ²¡æœ‰å‘ç°å·²æ˜¾ç¤ºéšè—å†…å®¹ï¼Œå°±ä¸å®šä½äº†\n            if (document.getElementsByClassName(\"showhide\").length > 0){\n                // å¦‚æœä½¿ç”¨äº†æˆ‘çš„ [æ™ºå‹é‚¦ç¾åŒ–] è„šæœ¬ï¼Œåˆ™å®šä½è‡³åº•éƒ¨ï¼Œåä¹‹å®šä½è‡³éšè—å†…å®¹åŒºåŸŸ\n                if (document.getElementById(\"fastpostmessage\").offsetParent == null){\n                    setTimeout(function(){window.scrollTo(0,99999999)}, 1000);\n                }else{\n                    setTimeout(function(){window.scrollTo(0,document.querySelector('.showhide').offsetTop)}, 1000);\n                }\n            }\n        }\n    }\n\n\n    // å›åˆ°é¡¶éƒ¨ï¼ˆå³é”®ç‚¹å‡»ç©ºç™½å¤„ï¼‰\n    function backToTop() {\n        if (!menu_value('menu_backToTop')) return\n        document.getElementById(\"nv_forum\").oncontextmenu = function(event){\n            if (event.target==this) {\n                event.preventDefault();\n                window.scrollTo(0,0)\n            }\n        }\n    }\n\n\n    // æ¸…ç†ç½®é¡¶å¸–å­\n    function cleanTop(){\n        if (!menu_value('menu_cleanTopPost')) return\n        let showhide = document.querySelectorAll(\"a.showhide.y\");\n        if (showhide.length > 0){\n            showhide.forEach(el=>el.click());\n        }\n    }\n\n\n    // å…‘æ¢é™„ä»¶åç«‹å³è¿”å›\n    function attachmentBack() {\n        let attachmentback = document.querySelector('#messagetext p.alert_btnleft a');\n        if (attachmentback){\n            attachmentback.click();\n        }\n    }\n\n\n    // é™„ä»¶ä¸‹è½½é¡µç›´æ¥è·³è½¬è‡³ç½‘ç›˜\n    function goPan() {\n        let gopan = document.querySelector('.threed_panbox .panframe .pan_left p a');\n        if (gopan){\n            location.href=gopan.href;\n        }\n    }\n\n\n    // å…‘æ¢é™„ä»¶æŒ‰é’®æ”¹ä¸ºç›´é“¾ï¼ˆä¸å†å¼¹å‡ºç¡®è®¤æç¤ºæ¡†ï¼‰\n    function attachmentHref() {\n        attachmentHrefTime += 1; // è®¡ç®—è¯¥å‡½æ•°æ‰§è¡Œæ¬¡æ•°\n        let attachmenthref = document.querySelector('.tab_button .button a');\n        if (attachmenthref && attachmenthref.href == \"javascript:;\"){\n            let attachmenthref_href = attachmenthref.onclick.toString();\n            attachmenthref.href = attachmenthref_href.match(patt_attachment_href)[0];\n            attachmenthref.onclick = null;\n        }\n        if (attachmentHrefTime == 50 || document.getElementsByClassName(\"showhide\").length > 0){ // å½“è¯¥å‡½æ•°æ‰§è¡Œè¶…è¿‡50æ¬¡ï¼ˆ5ç§’ï¼‰ï¼Œæˆ–æ²¡æœ‰éšè—å†…å®¹æ—¶åœæ­¢å®šæ—¶æ‰§è¡Œ\n            clearInterval(attachmentHref_Interval)\n        }\n    }\n\n\n    // æ¸…ç†å¸–å­åˆ—è¡¨ä¸­å¸–å­æ ‡é¢˜å¼€å¤´çš„ã€–XXXã€—ã€XXXã€‘æ–‡å­—\n    function cleanPostTitle(){\n        if (!menu_value('menu_cleanPostTitle')) return\n        let cleanposttitle = document.querySelectorAll(\"a.s.xst\");\n        if (cleanposttitle.length > 0){\n            for(let num = postNum;num<cleanposttitle.length;num++){\n                cleanposttitle[num].innerText = cleanposttitle[num].innerText.replace(patt_posttitle, ``);\n                postNum += 1;\n            }\n        }\n    }\n\n\n    // è‡ªåŠ¨æ— ç¼ç¿»é¡µ\n    function pageLoading() {\n        if (!menu_value('menu_pageLoading')) return\n        if (curSite.SiteTypeID > 0){\n            windowScroll(function (direction, e) {\n                if (direction === 'down') { //           ä¸‹æ»‘æ‰å‡†å¤‡ç¿»é¡µ\n                    let scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n                    let scrollDelta = 666;\n                    if (document.documentElement.scrollHeight <= document.documentElement.clientHeight + scrollTop + scrollDelta) {\n                        ShowPager.loadMorePage();\n                    }\n                }\n            });\n        }\n    }\n\n\n    // æ»šåŠ¨æ¡äº‹ä»¶\n    function windowScroll(fn1) {\n        var beforeScrollTop = document.documentElement.scrollTop,\n            fn = fn1 || function () {};\n        setTimeout(function () { // å»¶æ—¶æ‰§è¡Œï¼Œé¿å…åˆšè½½å…¥åˆ°é¡µé¢å°±è§¦å‘ç¿»é¡µäº‹ä»¶\n            window.addEventListener('scroll', function (e) {\n                var afterScrollTop = document.documentElement.scrollTop,\n                    delta = afterScrollTop - beforeScrollTop;\n                if (delta == 0) return false;\n                fn(delta > 0 ? 'down' : 'up', e);\n                beforeScrollTop = afterScrollTop;\n            }, false);\n        }, 1000)\n    }\n\n\n    // ä¿®æ”¹è‡ª https://greasyfork.org/scripts/14178 , https://github.com/machsix/Super-preloader\n    var ShowPager = {\n        getFullHref: function (e) {\n            if (e != null && e.nodeType === 1 && e.href && e.href.slice(0,4) === 'http') return e.href;\n            return '';\n        },\n        createDocumentByString: function (e) {\n            if (e) {\n                if ('HTML' !== document.documentElement.nodeName) return (new DOMParser).parseFromString(e, 'application/xhtml+xml');\n                var t;\n                try { t = (new DOMParser).parseFromString(e, 'text/html');} catch (e) {}\n                if (t) return t;\n                if (document.implementation.createHTMLDocument) {\n                    t = document.implementation.createHTMLDocument('ADocument');\n                } else {\n                    try {((t = document.cloneNode(!1)).appendChild(t.importNode(document.documentElement, !1)), t.documentElement.appendChild(t.createElement('head')), t.documentElement.appendChild(t.createElement('body')));} catch (e) {}\n                }\n                if (t) {\n                    var r = document.createRange(),\n                        n = r.createContextualFragment(e);\n                    r.selectNodeContents(document.body);\n                    t.body.appendChild(n);\n                    for (var a, o = { TITLE: !0, META: !0, LINK: !0, STYLE: !0, BASE: !0}, i = t.body, s = i.childNodes, c = s.length - 1; c >= 0; c--) o[(a = s[c]).nodeName] && i.removeChild(a);\n                    return t;\n                }\n            } else console.error('æ²¡æœ‰æ‰¾åˆ°è¦è½¬æˆ DOM çš„å­—ç¬¦ä¸²');\n        },\n        loadMorePage: function () {\n            if (curSite.pager) {\n                let curPageEle = getElementByXpath(curSite.pager.nextLink);\n                var url = this.getFullHref(curPageEle);\n                //console.log(`${url} ${curSite.pageUrl}`);\n                if(url === '') return;\n                if(curSite.pageUrl === url) return;// ä¸ä¼šé‡å¤åŠ è½½ç›¸åŒçš„é¡µé¢\n                curSite.pageUrl = url;\n                // è¯»å–ä¸‹ä¸€é¡µçš„æ•°æ®\n                curSite.pager.startFilter && curSite.pager.startFilter();\n                GM_xmlhttpRequest({\n                    url: url,\n                    method: \"GET\",\n                    timeout: 5000,\n                    onload: function (response) {\n                        try {\n                            var newBody = ShowPager.createDocumentByString(response.responseText);\n                            let pageElems = getAllElements(curSite.pager.pageElement, newBody, newBody);\n                            let toElement = getAllElements(curSite.pager.HT_insert[0])[0];\n                            if (pageElems.length >= 0) {\n                                let addTo = \"beforeend\";\n                                if (curSite.pager.HT_insert[1] == 1) addTo = \"beforebegin\";\n                                // æ’å…¥æ–°é¡µé¢å…ƒç´ \n                                pageElems.forEach(function (one) {\n                                    toElement.insertAdjacentElement(addTo, one);\n                                });\n                                // æ¸…ç†å¸–å­åˆ—è¡¨ä¸­å¸–å­æ ‡é¢˜å¼€å¤´çš„ã€–XXXã€—ã€XXXã€‘æ–‡å­—\n                                cleanPostTitle();\n                                // æ›¿æ¢å¾…æ›¿æ¢å…ƒç´ \n                                try {\n                                    let oriE = getAllElements(curSite.pager.replaceE);\n                                    let repE = getAllElements(curSite.pager.replaceE, newBody, newBody);\n                                    if (oriE.length === repE.length) {\n                                        for (var i = 0; i < oriE.length; i++) {\n                                            oriE[i].outerHTML = repE[i].outerHTML;\n                                        }\n                                    }\n                                } catch (e) {\n                                    console.log(e);\n                                }\n                            }\n                        } catch (e) {\n                            console.log(e);\n                        }\n                    }\n                });\n            }\n        },\n    };\n    function getElementByCSS(css, contextNode = document) {\n        return contextNode.querySelector(css);\n    }\n    function getAllElementsByCSS(css, contextNode = document) {\n        return [].slice.call(contextNode.querySelectorAll(css));\n    }\n    function getElementByXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        try {\n            const result = doc.evaluate(xpath, contextNode, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);\n            // åº”è¯¥æ€»æ˜¯è¿”å›ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹\n            return result.singleNodeValue && result.singleNodeValue.nodeType === 1 && result.singleNodeValue;\n        } catch (err) {\n            throw new Error(`Invalid xpath: ${xpath}`);\n        }\n    }\n    function getAllElementsByXpath(xpath, contextNode, doc = document) {\n        contextNode = contextNode || doc;\n        const result = [];\n        try {\n            const query = doc.evaluate(xpath, contextNode, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n            for (let i = 0; i < query.snapshotLength; i++) {\n                const node = query.snapshotItem(i);\n                // å¦‚æœæ˜¯ Element èŠ‚ç‚¹\n                if (node.nodeType === 1) result.push(node);\n            }\n        } catch (err) {\n            throw new Error(`æ— æ•ˆ Xpath: ${xpath}`);\n        }\n        return result;\n    }\n    function getAllElements(selector, contextNode = undefined, doc = document, win = window, _cplink = undefined) {\n        if (!selector) return [];\n        contextNode = contextNode || doc;\n        if (typeof selector === 'string') {\n            if (selector.search(/^css;/i) === 0) {\n                return getAllElementsByCSS(selector.slice(4), contextNode);\n            } else {\n                return getAllElementsByXpath(selector, contextNode, doc);\n            }\n        } else {\n            const query = selector(doc, win, _cplink);\n            if (!Array.isArray(query)) {\n                throw new Error('getAllElements è¿”å›é”™è¯¯ç±»å‹');\n            } else {\n                return query;\n            }\n        }\n    }\n\n\n    // è·å–GETå‚æ•°\n    function getQueryVariable(variable) {\n        var query = window.location.search.substring(1);\n        var vars = query.split(\"&\");\n        for (var i=0;i<vars.length;i++) {\n            var pair = vars[i].split(\"=\");\n            if(pair[0] == variable){return pair[1];}\n        }\n        return(false);\n    }\n})();\n"
        },
        {
          "name": "other",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}