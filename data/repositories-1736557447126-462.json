{
  "metadata": {
    "timestamp": 1736557447126,
    "page": 462,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjQ4MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "gto76/python-cheatsheet",
      "stars": 36696,
      "defaultBranch": "main",
      "files": [
        {
          "name": "README.md",
          "type": "blob",
          "size": 143.8,
          "content": "Comprehensive Python Cheatsheet\n===============================\n<sup>[Download text file](https://raw.githubusercontent.com/gto76/python-cheatsheet/main/README.md), [Fork me on GitHub](https://github.com/gto76/python-cheatsheet) or [Check out FAQ](https://github.com/gto76/python-cheatsheet/wiki/Frequently-Asked-Questions).\n</sup>\n\n![Monty Python](web/image_888.jpeg)\n\n\nContents\n--------\n**&nbsp;&nbsp;&nbsp;** **1. Collections:** **&nbsp;** **[`List`](#list)**__,__ **[`Dictionary`](#dictionary)**__,__ **[`Set`](#set)**__,__ **[`Tuple`](#tuple)**__,__ **[`Range`](#range)**__,__ **[`Enumerate`](#enumerate)**__,__ **[`Iterator`](#iterator)**__,__ **[`Generator`](#generator)**__.__  \n**&nbsp;&nbsp;&nbsp;** **2. Types:** **&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**  **[`Type`](#type)**__,__ **[`String`](#string)**__,__ **[`Regular_Exp`](#regex)**__,__ **[`Format`](#format)**__,__ **[`Numbers`](#numbers-1)**__,__ **[`Combinatorics`](#combinatorics)**__,__ **[`Datetime`](#datetime)**__.__  \n**&nbsp;&nbsp;&nbsp;** **3. Syntax:** **&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**  **[`Args`](#arguments)**__,__ **[`Inline`](#inline)**__,__ **[`Import`](#imports)**__,__ **[`Decorator`](#decorator)**__,__ **[`Class`](#class)**__,__ **[`Duck_Types`](#duck-types)**__,__ **[`Enum`](#enum)**__,__ **[`Exception`](#exceptions)**__.__  \n**&nbsp;&nbsp;&nbsp;** **4. System:** **&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**  **[`Exit`](#exit)**__,__ **[`Print`](#print)**__,__ **[`Input`](#input)**__,__ **[`Command_Line_Arguments`](#command-line-arguments)**__,__ **[`Open`](#open)**__,__ **[`Path`](#paths)**__,__ **[`OS_Commands`](#os-commands)**__.__  \n**&nbsp;&nbsp;&nbsp;** **5. Data:** **&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**  **[`JSON`](#json)**__,__ **[`Pickle`](#pickle)**__,__ **[`CSV`](#csv)**__,__ **[`SQLite`](#sqlite)**__,__ **[`Bytes`](#bytes)**__,__ **[`Struct`](#struct)**__,__ **[`Array`](#array)**__,__ **[`Memory_View`](#memory-view)**__,__ **[`Deque`](#deque)**__.__  \n**&nbsp;&nbsp;&nbsp;** **6. Advanced:** **&nbsp;&nbsp;&nbsp;**  **[`Operator`](#operator)**__,__ **[`Match_Stmt`](#match-statement)**__,__ **[`Logging`](#logging)**__,__ **[`Introspection`](#introspection)**__,__ **[`Threading`](#threading)**__,__ **[`Coroutines`](#coroutines)**__.__  \n**&nbsp;&nbsp;&nbsp;** **7. Libraries:** **&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**  **[`Progress_Bar`](#progress-bar)**__,__ **[`Plot`](#plot)**__,__ **[`Table`](#table)**__,__ **[`Console_App`](#console-app)**__,__ **[`GUI`](#gui-app)**__,__ **[`Scraping`](#scraping)**__,__ **[`Web`](#web-app)**__,__ **[`Profile`](#profiling)**__.__  \n**&nbsp;&nbsp;&nbsp;** **8. Multimedia:** **&nbsp;&nbsp;**  **[`NumPy`](#numpy)**__,__ **[`Image`](#image)**__,__ **[`Animation`](#animation)**__,__ **[`Audio`](#audio)**__,__ **[`Synthesizer`](#synthesizer)**__,__ **[`Pygame`](#pygame)**__,__ **[`Pandas`](#pandas)**__,__ **[`Plotly`](#plotly)**__.__\n\n\nMain\n----\n```python\nif __name__ == '__main__':      # Skips next line if file was imported.\n    main()                      # Runs `def main(): ...` function.\n```\n\n\nList\n----\n```python\n<list> = [<el_1>, <el_2>, ...]  # Creates new list. Also list(<collection>).\n```\n\n```python\n<el>   = <list>[index]          # First index is 0. Last -1. Allows assignments.\n<list> = <list>[<slice>]        # Also <list>[from_inclusive : to_exclusive : ±step].\n```\n\n```python\n<list>.append(<el>)             # Appends element to the end. Also <list> += [<el>].\n<list>.extend(<collection>)     # Appends elements to the end. Also <list> += <coll>.\n```\n\n```python\n<list>.sort()                   # Sorts elements in ascending order.\n<list>.reverse()                # Reverses the list in-place.\n<list> = sorted(<collection>)   # Returns new list with sorted elements.\n<iter> = reversed(<list>)       # Returns reversed iterator of elements.\n```\n\n```python\n<el>  = max(<collection>)       # Returns largest element. Also min(<el_1>, ...).\n<num> = sum(<collection>)       # Returns sum of elements. Also math.prod(<coll>).\n```\n\n```python\nelementwise_sum  = [sum(pair) for pair in zip(list_a, list_b)]\nsorted_by_second = sorted(<collection>, key=lambda el: el[1])\nsorted_by_both   = sorted(<collection>, key=lambda el: (el[1], el[0]))\nflatter_list     = list(itertools.chain.from_iterable(<list>))\n```\n* **For details about sort(), sorted(), min() and max() see [Sortable](#sortable).**\n* **Module [operator](#operator) has function itemgetter() that can replace listed [lambdas](#lambda).**\n* **This text uses the term collection instead of iterable. For rationale see [Collection](#collection).**\n\n```python\n<int> = len(<list>)             # Returns number of items. Also works on dict, set and string.\n<int> = <list>.count(<el>)      # Returns number of occurrences. Also `if <el> in <coll>: ...`.\n<int> = <list>.index(<el>)      # Returns index of the first occurrence or raises ValueError.\n<el>  = <list>.pop()            # Removes and returns item from the end or at index if passed.\n<list>.insert(<int>, <el>)      # Inserts item at index and moves the rest to the right.\n<list>.remove(<el>)             # Removes first occurrence of the item or raises ValueError.\n<list>.clear()                  # Removes all items. Also works on dictionary and set.\n```\n\n\nDictionary\n----------\n```python\n<dict> = {key_1: val_1, key_2: val_2, ...}      # Use `<dict>[key]` to get or set the value.\n```\n\n```python\n<view> = <dict>.keys()                          # Collection of keys that reflects changes.\n<view> = <dict>.values()                        # Collection of values that reflects changes.\n<view> = <dict>.items()                         # Coll. of key-value tuples that reflects chgs.\n```\n\n```python\nvalue  = <dict>.get(key, default=None)          # Returns default if key is missing.\nvalue  = <dict>.setdefault(key, default=None)   # Returns and writes default if key is missing.\n<dict> = collections.defaultdict(<type>)        # Returns a dict with default value `<type>()`.\n<dict> = collections.defaultdict(lambda: 1)     # Returns a dict with default value 1.\n```\n\n```python\n<dict> = dict(<collection>)                     # Creates a dict from coll. of key-value pairs.\n<dict> = dict(zip(keys, values))                # Creates a dict from two collections.\n<dict> = dict.fromkeys(keys [, value])          # Creates a dict from collection of keys.\n```\n\n```python\n<dict>.update(<dict>)                           # Adds items. Replaces ones with matching keys.\nvalue = <dict>.pop(key)                         # Removes item or raises KeyError if missing.\n{k for k, v in <dict>.items() if v == value}    # Returns set of keys that point to the value.\n{k: v for k, v in <dict>.items() if k in keys}  # Filters the dictionary by keys.\n```\n\n### Counter\n```python\n>>> from collections import Counter\n>>> counter = Counter(['blue', 'blue', 'blue', 'red', 'red'])\n>>> counter['yellow'] += 1\n>>> print(counter.most_common())\n[('blue', 3), ('red', 2), ('yellow', 1)]\n```\n\n\nSet\n---\n```python\n<set> = {<el_1>, <el_2>, ...}                   # Use `set()` for empty set.\n```\n\n```python\n<set>.add(<el>)                                 # Or: <set> |= {<el>}\n<set>.update(<collection> [, ...])              # Or: <set> |= <set>\n```\n\n```python\n<set>  = <set>.union(<coll.>)                   # Or: <set> | <set>\n<set>  = <set>.intersection(<coll.>)            # Or: <set> & <set>\n<set>  = <set>.difference(<coll.>)              # Or: <set> - <set>\n<set>  = <set>.symmetric_difference(<coll.>)    # Or: <set> ^ <set>\n<bool> = <set>.issubset(<coll.>)                # Or: <set> <= <set>\n<bool> = <set>.issuperset(<coll.>)              # Or: <set> >= <set>\n```\n\n```python\n<el> = <set>.pop()                              # Raises KeyError if empty.\n<set>.remove(<el>)                              # Raises KeyError if missing.\n<set>.discard(<el>)                             # Doesn't raise an error.\n```\n\n### Frozen Set\n* **Is immutable and hashable.**\n* **That means it can be used as a key in a dictionary or as an element in a set.**\n```python\n<frozenset> = frozenset(<collection>)\n```\n\n\nTuple\n-----\n**Tuple is an immutable and hashable list.**\n```python\n<tuple> = ()                               # Empty tuple.\n<tuple> = (<el>,)                          # Or: <el>,\n<tuple> = (<el_1>, <el_2> [, ...])         # Or: <el_1>, <el_2> [, ...]\n```\n\n### Named Tuple\n**Tuple's subclass with named elements.**\n```python\n>>> from collections import namedtuple\n>>> Point = namedtuple('Point', 'x y')\n>>> p = Point(1, y=2); p\nPoint(x=1, y=2)\n>>> p[0]\n1\n>>> p.x\n1\n>>> getattr(p, 'y')\n2\n```\n\n\nRange\n-----\n**Immutable and hashable sequence of integers.**\n```python\n<range> = range(stop)                      # range(to_exclusive)\n<range> = range(start, stop)               # range(from_inclusive, to_exclusive)\n<range> = range(start, stop, ±step)        # range(from_inclusive, to_exclusive, ±step_size)\n```\n\n```python\n>>> [i for i in range(3)]\n[0, 1, 2]\n```\n\n\nEnumerate\n---------\n```python\nfor i, el in enumerate(<coll>, start=0):   # Returns next element and its index on each pass.\n    ...\n```\n\n\nIterator\n--------\n```python\n<iter> = iter(<collection>)                # `iter(<iter>)` returns unmodified iterator.\n<iter> = iter(<function>, to_exclusive)    # A sequence of return values until 'to_exclusive'.\n<el>   = next(<iter> [, default])          # Raises StopIteration or returns 'default' on end.\n<list> = list(<iter>)                      # Returns a list of iterator's remaining elements.\n```\n\n### Itertools\n```python\nimport itertools as it\n```\n\n```python\n<iter> = it.count(start=0, step=1)         # Returns updated value endlessly. Accepts floats.\n<iter> = it.repeat(<el> [, times])         # Returns element endlessly or 'times' times.\n<iter> = it.cycle(<collection>)            # Repeats the sequence endlessly.\n```\n\n```python\n<iter> = it.chain(<coll>, <coll> [, ...])  # Empties collections in order (figuratively).\n<iter> = it.chain.from_iterable(<coll>)    # Empties collections inside a collection in order.\n```\n\n```python\n<iter> = it.islice(<coll>, to_exclusive)   # Only returns first 'to_exclusive' elements.\n<iter> = it.islice(<coll>, from_inc, …)    # `to_exclusive, +step_size`. Indices can be None.\n```\n\n\nGenerator\n---------\n* **Any function that contains a yield statement returns a generator.**\n* **Generators and iterators are interchangeable.**\n\n```python\ndef count(start, step):\n    while True:\n        yield start\n        start += step\n```\n\n```python\n>>> counter = count(10, 2)\n>>> next(counter), next(counter), next(counter)\n(10, 12, 14)\n```\n\n\nType\n----\n* **Everything is an object.**\n* **Every object has a type.**\n* **Type and class are synonymous.**\n\n```python\n<type> = type(<el>)                          # Or: <el>.__class__\n<bool> = isinstance(<el>, <type>)            # Or: issubclass(type(<el>), <type>)\n```\n\n```python\n>>> type('a'), 'a'.__class__, str\n(<class 'str'>, <class 'str'>, <class 'str'>)\n```\n\n#### Some types do not have built-in names, so they must be imported:\n```python\nfrom types import FunctionType, MethodType, LambdaType, GeneratorType, ModuleType\n```\n\n### Abstract Base Classes\n**Each abstract base class specifies a set of virtual subclasses. These classes are then recognized by isinstance() and issubclass() as subclasses of the ABC, although they are really not. ABC can also manually decide whether or not a specific class is its virtual subclass, usually based on which methods the class has implemented. For instance, Iterable ABC looks for method iter(), while Collection ABC looks for iter(), contains() and len().**\n\n```python\n>>> from collections.abc import Iterable, Collection, Sequence\n>>> isinstance([1, 2, 3], Iterable)\nTrue\n```\n\n```text\n+------------------+------------+------------+------------+\n|                  |  Iterable  | Collection |  Sequence  |\n+------------------+------------+------------+------------+\n| list, range, str |    yes     |    yes     |    yes     |\n| dict, set        |    yes     |    yes     |            |\n| iter             |    yes     |            |            |\n+------------------+------------+------------+------------+\n```\n\n```python\n>>> from numbers import Number, Complex, Real, Rational, Integral\n>>> isinstance(123, Number)\nTrue\n```\n\n```text\n+--------------------+----------+----------+----------+----------+----------+\n|                    |  Number  |  Complex |   Real   | Rational | Integral |\n+--------------------+----------+----------+----------+----------+----------+\n| int                |   yes    |   yes    |   yes    |   yes    |   yes    |\n| fractions.Fraction |   yes    |   yes    |   yes    |   yes    |          |\n| float              |   yes    |   yes    |   yes    |          |          |\n| complex            |   yes    |   yes    |          |          |          |\n| decimal.Decimal    |   yes    |          |          |          |          |\n+--------------------+----------+----------+----------+----------+----------+\n```\n\n\nString\n------\n**Immutable sequence of characters.**\n\n```python\n<str>  = <str>.strip()                       # Strips all whitespace characters from both ends.\n<str>  = <str>.strip('<chars>')              # Strips passed characters. Also lstrip/rstrip().\n```\n\n```python\n<list> = <str>.split()                       # Splits on one or more whitespace characters.\n<list> = <str>.split(sep=None, maxsplit=-1)  # Splits on 'sep' str at most 'maxsplit' times.\n<list> = <str>.splitlines(keepends=False)    # On [\\n\\r\\f\\v\\x1c-\\x1e\\x85\\u2028\\u2029] and \\r\\n.\n<str>  = <str>.join(<coll_of_strings>)       # Joins elements using string as a separator.\n```\n\n```python\n<bool> = <sub_str> in <str>                  # Checks if string contains the substring.\n<bool> = <str>.startswith(<sub_str>)         # Pass tuple of strings for multiple options.\n<int>  = <str>.find(<sub_str>)               # Returns start index of the first match or -1.\n<int>  = <str>.index(<sub_str>)              # Same, but raises ValueError if there's no match.\n```\n\n```python\n<str>  = <str>.lower()                       # Changes the case. Also upper/capitalize/title().\n<str>  = <str>.replace(old, new [, count])   # Replaces 'old' with 'new' at most 'count' times.\n<str>  = <str>.translate(<table>)            # Use `str.maketrans(<dict>)` to generate table.\n```\n\n```python\n<str>  = chr(<int>)                          # Converts int to Unicode character.\n<int>  = ord(<str>)                          # Converts Unicode character to int.\n```\n* **Use `'unicodedata.normalize(\"NFC\", <str>)'` on strings like `'Motörhead'` before comparing them to other strings, because `'ö'` can be stored as one or two characters.**\n* **`'NFC'` converts such characters to a single character, while `'NFD'` converts them to two.**\n\n### Property Methods\n```python\n<bool> = <str>.isdecimal()                   # Checks for [0-9]. Also [०-९] and [٠-٩].\n<bool> = <str>.isdigit()                     # Checks for [²³¹…] and isdecimal().\n<bool> = <str>.isnumeric()                   # Checks for [¼½¾…], [零〇一…] and isdigit().\n<bool> = <str>.isalnum()                     # Checks for [a-zA-Z…] and isnumeric().\n<bool> = <str>.isprintable()                 # Checks for [ !#$%…] and isalnum().\n<bool> = <str>.isspace()                     # Checks for [ \\t\\n\\r\\f\\v\\x1c-\\x1f\\x85\\xa0…].\n```\n\n\nRegex\n-----\n**Functions for regular expression matching.**\n\n```python\nimport re\n<str>   = re.sub(r'<regex>', new, text, count=0)  # Substitutes all occurrences with 'new'.\n<list>  = re.findall(r'<regex>', text)            # Returns all occurrences as strings.\n<list>  = re.split(r'<regex>', text, maxsplit=0)  # Add brackets around regex to keep matches.\n<Match> = re.search(r'<regex>', text)             # First occurrence of the pattern or None.\n<Match> = re.match(r'<regex>', text)              # Searches only at the beginning of the text.\n<iter>  = re.finditer(r'<regex>', text)           # Returns all occurrences as Match objects.\n```\n\n* **Raw string literals do not interpret escape sequences, thus enabling us to use regex-specific escape sequences that cause SyntaxWarning in normal string literals (since 3.12).**\n* **Argument 'new' of re.sub() can be a function that accepts Match object and returns a str.**\n* **Argument `'flags=re.IGNORECASE'` can be used with all functions.**\n* **Argument `'flags=re.MULTILINE'` makes `'^'` and `'$'` match the start/end of each line.**\n* **Argument `'flags=re.DOTALL'` makes `'.'` also accept the `'\\n'`.**\n* **`'re.compile(<regex>)'` returns a Pattern object with methods sub(), findall(), …**\n\n### Match Object\n```python\n<str>   = <Match>.group()                         # Returns the whole match. Also group(0).\n<str>   = <Match>.group(1)                        # Returns part inside the first brackets.\n<tuple> = <Match>.groups()                        # Returns all bracketed parts.\n<int>   = <Match>.start()                         # Returns start index of the match.\n<int>   = <Match>.end()                           # Returns exclusive end index of the match.\n```\n\n### Special Sequences\n```python\n'\\d' == '[0-9]'                                   # Also [०-९…]. Matches a decimal character.\n'\\w' == '[a-zA-Z0-9_]'                            # Also [ª²³…]. Matches an alphanumeric or _.\n'\\s' == '[ \\t\\n\\r\\f\\v]'                           # Also [\\x1c-\\x1f…]. Matches a whitespace.\n```\n* **By default, decimal characters and alphanumerics from all alphabets are matched unless `'flags=re.ASCII'` is used. It restricts special sequence matches to the first 128 Unicode characters and also prevents `'\\s'` from accepting `'\\x1c'`, `'\\x1d'`, `'\\x1e'` and `'\\x1f'` (non-printable characters that divide text into files, tables, rows and fields, respectively).**\n* **Use a capital letter for negation (all non-ASCII characters will be matched when used in combination with ASCII flag).**\n\n\nFormat\n------\n```perl\n<str> = f'{<el_1>}, {<el_2>}'            # Curly brackets can also contain expressions.\n<str> = '{}, {}'.format(<el_1>, <el_2>)  # Or: '{0}, {a}'.format(<el_1>, a=<el_2>)\n<str> = '%s, %s' % (<el_1>, <el_2>)      # Redundant and inferior C-style formatting.\n```\n\n### Example\n```python\n>>> Person = collections.namedtuple('Person', 'name height')\n>>> person = Person('Jean-Luc', 187)\n>>> f'{person.name} is {person.height / 100} meters tall.'\n'Jean-Luc is 1.87 meters tall.'\n```\n\n### General Options\n```python\n{<el>:<10}                               # '<el>      '\n{<el>:^10}                               # '   <el>   '\n{<el>:>10}                               # '      <el>'\n{<el>:.<10}                              # '<el>......'\n{<el>:0}                                 # '<el>'\n```\n* **Objects are rendered using `'format(<el>, \"<options>\")'`.**\n* **Options can be generated dynamically: `f'{<el>:{<str/int>}[…]}'`.**\n* **Adding `'='` to the expression prepends it to the output: `f'{1+1=}'` returns `'1+1=2'`.**\n* **Adding `'!r'` to the expression converts object to string by calling its [repr()](#class) method.**\n\n### Strings\n```python\n{'abcde':10}                             # 'abcde     '\n{'abcde':10.3}                           # 'abc       '\n{'abcde':.3}                             # 'abc'\n{'abcde'!r:10}                           # \"'abcde'   \"\n```\n\n### Numbers\n```python\n{123456:10}                              # '    123456'\n{123456:10,}                             # '   123,456'\n{123456:10_}                             # '   123_456'\n{123456:+10}                             # '   +123456'\n{123456:=+10}                            # '+   123456'\n{123456: }                               # ' 123456'\n{-123456: }                              # '-123456'\n```\n\n### Floats\n```python\n{1.23456:10.3}                           # '      1.23'\n{1.23456:10.3f}                          # '     1.235'\n{1.23456:10.3e}                          # ' 1.235e+00'\n{1.23456:10.3%}                          # '  123.456%'\n```\n\n#### Comparison of presentation types:\n```text\n+--------------+----------------+----------------+----------------+----------------+\n|              |    {<float>}   |   {<float>:f}  |   {<float>:e}  |   {<float>:%}  |\n+--------------+----------------+----------------+----------------+----------------+\n|  0.000056789 |   '5.6789e-05' |    '0.000057'  | '5.678900e-05' |    '0.005679%' |\n|  0.00056789  |   '0.00056789' |    '0.000568'  | '5.678900e-04' |    '0.056789%' |\n|  0.0056789   |   '0.0056789'  |    '0.005679'  | '5.678900e-03' |    '0.567890%' |\n|  0.056789    |   '0.056789'   |    '0.056789'  | '5.678900e-02' |    '5.678900%' |\n|  0.56789     |   '0.56789'    |    '0.567890'  | '5.678900e-01' |   '56.789000%' |\n|  5.6789      |   '5.6789'     |    '5.678900'  | '5.678900e+00' |  '567.890000%' |\n| 56.789       |  '56.789'      |   '56.789000'  | '5.678900e+01' | '5678.900000%' |\n+--------------+----------------+----------------+----------------+----------------+\n```\n\n```text\n+--------------+----------------+----------------+----------------+----------------+\n|              |  {<float>:.2}  |  {<float>:.2f} |  {<float>:.2e} |  {<float>:.2%} |\n+--------------+----------------+----------------+----------------+----------------+\n|  0.000056789 |    '5.7e-05'   |      '0.00'    |   '5.68e-05'   |      '0.01%'   |\n|  0.00056789  |    '0.00057'   |      '0.00'    |   '5.68e-04'   |      '0.06%'   |\n|  0.0056789   |    '0.0057'    |      '0.01'    |   '5.68e-03'   |      '0.57%'   |\n|  0.056789    |    '0.057'     |      '0.06'    |   '5.68e-02'   |      '5.68%'   |\n|  0.56789     |    '0.57'      |      '0.57'    |   '5.68e-01'   |     '56.79%'   |\n|  5.6789      |    '5.7'       |      '5.68'    |   '5.68e+00'   |    '567.89%'   |\n| 56.789       |    '5.7e+01'   |     '56.79'    |   '5.68e+01'   |   '5678.90%'   |\n+--------------+----------------+----------------+----------------+----------------+\n```\n* **`'{<float>:g}'` is `'{<float>:.6}'` with stripped zeros, exponent starting at `'1e+06'`.**\n* **When both rounding up and rounding down are possible, the one that returns result with even last digit is chosen. That makes `'{6.5:.0f}'` a `'6'` and `'{7.5:.0f}'` an `'8'`.**\n* **This rule only effects numbers that can be represented exactly by a float (`.5`, `.25`, …).**\n\n### Ints\n```python\n{90:c}                                   # 'Z'. Unicode character with value 90.\n{90:b}                                   # '1011010'. Number 90 in binary.\n{90:X}                                   # '5A'. Number 90 in uppercase hexadecimal.\n```\n\n\nNumbers\n-------\n```python\n<int>      = int(<float/str/bool>)                # Or: math.trunc(<float>)\n<float>    = float(<int/str/bool>)                # Or: <int/float>e±<int>\n<complex>  = complex(real=0, imag=0)              # Or: <int/float> ± <int/float>j\n<Fraction> = fractions.Fraction(0, 1)             # Or: Fraction(numerator=0, denominator=1)\n<Decimal>  = decimal.Decimal(<str/int>)           # Or: Decimal((sign, digits, exponent))\n```\n* **`'int(<str>)'` and `'float(<str>)'` raise ValueError on malformed strings.**\n* **Decimal numbers are stored exactly, unlike most floats where `'1.1 + 2.2 != 3.3'`.**\n* **Floats can be compared with: `'math.isclose(<float>, <float>)'`.**\n* **Precision of decimal operations is set with: `'decimal.getcontext().prec = <int>'`.**\n\n### Basic Functions\n```python\n<num> = pow(<num>, <num>)                         # Or: <number> ** <number>\n<num> = abs(<num>)                                # <float> = abs(<complex>)\n<num> = round(<num> [, ±ndigits])                 # `round(126, -1) == 130`\n```\n\n### Math\n```python\nfrom math import e, pi, inf, nan, isinf, isnan    # `<el> == nan` is always False.\nfrom math import sin, cos, tan, asin, acos, atan  # Also: degrees, radians.\nfrom math import log, log10, log2                 # Log can accept base as second arg.\n```\n\n### Statistics\n```python\nfrom statistics import mean, median, variance     # Also: stdev, quantiles, groupby.\n```\n\n### Random\n```python\nfrom random import random, randint, choice        # Also: shuffle, gauss, triangular, seed.\n<float> = random()                                # A float inside [0, 1).\n<int>   = randint(from_inc, to_inc)               # An int inside [from_inc, to_inc].\n<el>    = choice(<sequence>)                      # Keeps the sequence intact.\n```\n\n### Bin, Hex\n```python\n<int> = ±0b<bin>                                  # Or: ±0x<hex>\n<int> = int('±<bin>', 2)                          # Or: int('±<hex>', 16)\n<int> = int('±0b<bin>', 0)                        # Or: int('±0x<hex>', 0)\n<str> = bin(<int>)                                # Returns '[-]0b<bin>'. Also hex().\n```\n\n### Bitwise Operators\n```python\n<int> = <int> & <int>                             # And (0b1100 & 0b1010 == 0b1000).\n<int> = <int> | <int>                             # Or  (0b1100 | 0b1010 == 0b1110).\n<int> = <int> ^ <int>                             # Xor (0b1100 ^ 0b1010 == 0b0110).\n<int> = <int> << n_bits                           # Left shift. Use >> for right.\n<int> = ~<int>                                    # Not. Also -<int> - 1.\n```\n\n\nCombinatorics\n-------------\n```python\nimport itertools as it\n```\n\n```python\n>>> list(it.product([0, 1], repeat=3))\n[(0, 0, 0), (0, 0, 1), (0, 1, 0), (0, 1, 1),\n (1, 0, 0), (1, 0, 1), (1, 1, 0), (1, 1, 1)]\n```\n\n```python\n>>> list(it.product('abc', 'abc'))                    #   a  b  c\n[('a', 'a'), ('a', 'b'), ('a', 'c'),                  # a x  x  x\n ('b', 'a'), ('b', 'b'), ('b', 'c'),                  # b x  x  x\n ('c', 'a'), ('c', 'b'), ('c', 'c')]                  # c x  x  x\n```\n\n```python\n>>> list(it.combinations('abc', 2))                   #   a  b  c\n[('a', 'b'), ('a', 'c'),                              # a .  x  x\n ('b', 'c')]                                          # b .  .  x\n```\n\n```python\n>>> list(it.combinations_with_replacement('abc', 2))  #   a  b  c\n[('a', 'a'), ('a', 'b'), ('a', 'c'),                  # a x  x  x\n ('b', 'b'), ('b', 'c'),                              # b .  x  x\n ('c', 'c')]                                          # c .  .  x\n```\n\n```python\n>>> list(it.permutations('abc', 2))                   #   a  b  c\n[('a', 'b'), ('a', 'c'),                              # a .  x  x\n ('b', 'a'), ('b', 'c'),                              # b x  .  x\n ('c', 'a'), ('c', 'b')]                              # c x  x  .\n```\n\n\nDatetime\n--------\n**Provides 'date', 'time', 'datetime' and 'timedelta' classes. All are immutable and hashable.**\n\n```python\n# $ pip3 install python-dateutil\nfrom datetime import date, time, datetime, timedelta, timezone\nimport zoneinfo, dateutil.tz\n```\n\n```python\n<D>  = date(year, month, day)               # Only accepts valid dates from 1 to 9999 AD.\n<T>  = time(hour=0, minute=0, second=0)     # Also: `microsecond=0, tzinfo=None, fold=0`.\n<DT> = datetime(year, month, day, hour=0)   # Also: `minute=0, second=0, microsecond=0, …`.\n<TD> = timedelta(weeks=0, days=0, hours=0)  # Also: `minutes=0, seconds=0, microseconds=0`.\n```\n* **Aware times and datetimes have defined timezone, while naive don't. If object is naive, it is presumed to be in the system's timezone!**\n* **`'fold=1'` means the second pass in case of time jumping back for one hour.**\n* **Timedelta normalizes arguments to ±days, seconds (< 86 400) and microseconds (< 1M). Its str() method returns `'[±D, ]H:MM:SS[.…]'` and total_seconds() a float of all seconds.**\n* **Use `'<D/DT>.weekday()'` to get the day of the week as an int, with Monday being 0.**\n\n### Now\n```python\n<D/DTn> = D/DT.today()                      # Current local date or naive DT. Also DT.now().\n<DTa>   = DT.now(<tzinfo>)                  # Aware DT from current time in passed timezone.\n```\n* **To extract time use `'<DTn>.time()'`, `'<DTa>.time()'` or `'<DTa>.timetz()'`.**\n\n### Timezone\n```python\n<tzinfo> = timezone.utc                     # London without daylight saving time (DST).\n<tzinfo> = timezone(<timedelta>)            # Timezone with fixed offset from UTC.\n<tzinfo> = dateutil.tz.tzlocal()            # Local timezone with dynamic offset from UTC.\n<tzinfo> = zoneinfo.ZoneInfo('<iana_key>')  # 'Continent/City_Name' zone with dynamic offset.\n<DTa>    = <DT>.astimezone([<tzinfo>])      # Converts DT to the passed or local fixed zone.\n<Ta/DTa> = <T/DT>.replace(tzinfo=<tzinfo>)  # Changes object's timezone without conversion.\n```\n* **Timezones returned by tzlocal(), ZoneInfo() and implicit local timezone of naive objects have offsets that vary through time due to DST and historical changes of the base offset.**\n* **To get ZoneInfo() to work on Windows run `'> pip3 install tzdata'`.**\n\n### Encode\n```python\n<D/T/DT> = D/T/DT.fromisoformat(<str>)      # Object from ISO string. Raises ValueError.\n<DT>     = DT.strptime(<str>, '<format>')   # Datetime from str, according to format.\n<D/DTn>  = D/DT.fromordinal(<int>)          # D/DT from days since the Gregorian NYE 1.\n<DTn>    = DT.fromtimestamp(<float>)        # Local naive DT from seconds since the Epoch.\n<DTa>    = DT.fromtimestamp(<float>, <tz>)  # Aware datetime from seconds since the Epoch.\n```\n* **ISO strings come in following forms: `'YYYY-MM-DD'`, `'HH:MM:SS.mmmuuu[±HH:MM]'`, or both separated by an arbitrary character. All parts following the hours are optional.**\n* **Python uses the Unix Epoch: `'1970-01-01 00:00 UTC'`, `'1970-01-01 01:00 CET'`, ...**\n\n### Decode\n```python\n<str>    = <D/T/DT>.isoformat(sep='T')      # Also `timespec='auto/hours/minutes/seconds/…'`.\n<str>    = <D/T/DT>.strftime('<format>')    # Custom string representation of the object.\n<int>    = <D/DT>.toordinal()               # Days since Gregorian NYE 1, ignoring time and tz.\n<float>  = <DTn>.timestamp()                # Seconds since the Epoch, from local naive DT.\n<float>  = <DTa>.timestamp()                # Seconds since the Epoch, from aware datetime.\n```\n\n### Format\n```python\n>>> dt = datetime.strptime('2025-08-14 23:39:00.00 +0200', '%Y-%m-%d %H:%M:%S.%f %z')\n>>> dt.strftime(\"%dth of %B '%y (%a), %I:%M %p %Z\")\n\"14th of August '25 (Thu), 11:39 PM UTC+02:00\"\n```\n* **`'%z'` accepts `'±HH[:]MM'` and returns `'±HHMM'` or empty string if datetime is naive.**\n* **`'%Z'` accepts `'UTC/GMT'` and local timezone's code and returns timezone's name, `'UTC[±HH:MM]'` if timezone is nameless, or an empty string if datetime is naive.**\n\n### Arithmetics\n```python\n<bool>   = <D/T/DTn> > <D/T/DTn>            # Ignores time jumps (fold attribute). Also ==.\n<bool>   = <DTa>     > <DTa>                # Ignores jumps if they share tz object. Broken ==.\n<TD>     = <D/DTn>   - <D/DTn>              # Ignores jumps. Convert to UTC for actual delta.\n<TD>     = <DTa>     - <DTa>                # Ignores jumps if they share tzinfo object.\n<D/DT>   = <D/DT>    ± <TD>                 # Returned datetime can fall into missing hour.\n<TD>     = <TD>      * <float>              # Also: <TD> = abs(<TD>) and <TD> = <TD> ±% <TD>.\n<float>  = <TD>      / <TD>                 # E.g. how many hours are in TD. Also //, divmod().\n```\n\n\nArguments\n---------\n### Inside Function Call\n```python\nfunc(<positional_args>)                           # func(0, 0)\nfunc(<keyword_args>)                              # func(x=0, y=0)\nfunc(<positional_args>, <keyword_args>)           # func(0, y=0)\n```\n\n### Inside Function Definition\n```python\ndef func(<nondefault_args>): ...                  # def func(x, y): ...\ndef func(<default_args>): ...                     # def func(x=0, y=0): ...\ndef func(<nondefault_args>, <default_args>): ...  # def func(x, y=0): ...\n```\n* **Default values are evaluated when function is first encountered in the scope.**\n* **Any mutation of a mutable default value will persist between invocations!**\n\n\nSplat Operator\n--------------\n### Inside Function Call\n**Splat expands a collection into positional arguments, while splatty-splat expands a dictionary into keyword arguments.**\n```python\nargs   = (1, 2)\nkwargs = {'x': 3, 'y': 4, 'z': 5}\nfunc(*args, **kwargs)\n```\n\n#### Is the same as:\n```python\nfunc(1, 2, x=3, y=4, z=5)\n```\n\n### Inside Function Definition\n**Splat combines zero or more positional arguments into a tuple, while splatty-splat combines zero or more keyword arguments into a dictionary.**\n```python\ndef add(*a):\n    return sum(a)\n```\n\n```python\n>>> add(1, 2, 3)\n6\n```\n\n#### Legal argument combinations:\n```python\ndef f(*args): ...               # f(1, 2, 3)\ndef f(x, *args): ...            # f(1, 2, 3)\ndef f(*args, z): ...            # f(1, 2, z=3)\n```\n\n```python\ndef f(**kwargs): ...            # f(x=1, y=2, z=3)\ndef f(x, **kwargs): ...         # f(x=1, y=2, z=3) | f(1, y=2, z=3)\n```\n\n```python\ndef f(*args, **kwargs): ...     # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)\ndef f(x, *args, **kwargs): ...  # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)\ndef f(*args, y, **kwargs): ...  # f(x=1, y=2, z=3) | f(1, y=2, z=3)\n```\n\n```python\ndef f(*, x, y, z): ...          # f(x=1, y=2, z=3)\ndef f(x, *, y, z): ...          # f(x=1, y=2, z=3) | f(1, y=2, z=3)\ndef f(x, y, *, z): ...          # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3)\n```\n\n### Other Uses\n```python\n<list>  = [*<coll.> [, ...]]    # Or: list(<collection>) [+ ...]\n<tuple> = (*<coll.>, [...])     # Or: tuple(<collection>) [+ ...]\n<set>   = {*<coll.> [, ...]}    # Or: set(<collection>) [| ...]\n<dict>  = {**<dict> [, ...]}    # Or: <dict> | ...\n```\n\n```python\nhead, *body, tail = <coll.>     # Head or tail can be omitted.\n```\n\n\nInline\n------\n### Lambda\n```python\n<func> = lambda: <return_value>                     # A single statement function.\n<func> = lambda <arg_1>, <arg_2>: <return_value>    # Also allows default arguments.\n```\n\n### Comprehensions\n```python\n<list> = [i+1 for i in range(10)]                   # Or: [1, 2, ..., 10]\n<iter> = (i for i in range(10) if i > 5)            # Or: iter([6, 7, 8, 9])\n<set>  = {i+5 for i in range(10)}                   # Or: {5, 6, ..., 14}\n<dict> = {i: i*2 for i in range(10)}                # Or: {0: 0, 1: 2, ..., 9: 18}\n```\n\n```python\n>>> [l+r for l in 'abc' for r in 'abc']             # Inner loop is on the right side.\n['aa', 'ab', 'ac', ..., 'cc']\n```\n\n### Map, Filter, Reduce\n```python\nfrom functools import reduce\n```\n\n```python\n<iter> = map(lambda x: x + 1, range(10))            # Or: iter([1, 2, ..., 10])\n<iter> = filter(lambda x: x > 5, range(10))         # Or: iter([6, 7, 8, 9])\n<obj>  = reduce(lambda out, x: out + x, range(10))  # Or: 45\n```\n\n### Any, All\n```python\n<bool> = any(<collection>)                          # Is `bool(<el>)` True for any el?\n<bool> = all(<collection>)                          # True for all? Also True if empty.\n```\n\n### Conditional Expression\n```python\n<obj> = <exp> if <condition> else <exp>             # Only one expression is evaluated.\n```\n\n```python\n>>> [a if a else 'zero' for a in (0, 1, 2, 3)]      # `any([0, '', [], None]) == False`\n['zero', 1, 2, 3]\n```\n\n### Named Tuple, Enum, Dataclass\n```python\nfrom collections import namedtuple\nPoint = namedtuple('Point', 'x y')                  # Creates a tuple's subclass.\npoint = Point(0, 0)                                 # Returns its instance.\n```\n\n```python\nfrom enum import Enum\nDirection = Enum('Direction', 'N E S W')            # Creates an enum.\ndirection = Direction.N                             # Returns its member.\n```\n\n```python\nfrom dataclasses import make_dataclass\nPlayer = make_dataclass('Player', ['loc', 'dir'])   # Creates a class.\nplayer = Player(point, direction)                   # Returns its instance.\n```\n\n\nImports\n-------\n**Mechanism that makes code in one file available to another file.**\n\n```python\nimport <module>            # Imports a built-in or '<module>.py'.\nimport <package>           # Imports a built-in or '<package>/__init__.py'.\nimport <package>.<module>  # Imports a built-in or '<package>/<module>.py'.\n```\n* **Package is a collection of modules, but it can also define its own objects.**\n* **On a filesystem this corresponds to a directory of Python files with an optional init script.**\n* **Running `'import <package>'` does not automatically provide access to the package's modules unless they are explicitly imported in its init script.**\n* **Directory of the file that is passed to python command serves as a root of local imports.**\n* **For relative imports use `'from .[…][<pkg/module>[.…]] import <obj>'`.**\n\n\nClosure\n-------\n**We have/get a closure in Python when a nested function references a value of its enclosing function and then the enclosing function returns its nested function.**\n\n```python\ndef get_multiplier(a):\n    def out(b):\n        return a * b\n    return out\n```\n\n```python\n>>> multiply_by_3 = get_multiplier(3)\n>>> multiply_by_3(10)\n30\n```\n* **Any value that is referenced from within multiple nested functions gets shared.**\n\n### Partial\n```python\nfrom functools import partial\n<function> = partial(<function> [, <arg_1> [, ...]])\n```\n\n```python\n>>> def multiply(a, b):\n...     return a * b\n>>> multiply_by_3 = partial(multiply, 3)\n>>> multiply_by_3(10)\n30\n```\n* **Partial is also useful in cases when a function needs to be passed as an argument because it enables us to set its arguments beforehand.**\n* **A few examples being: `'defaultdict(<func>)'`, `'iter(<func>, to_exc)'` and dataclass's `'field(default_factory=<func>)'`.**\n\n### Non-Local\n**If variable is being assigned to anywhere in the scope, it is regarded as a local variable, unless it is declared as a 'global' or a 'nonlocal'.**\n\n```python\ndef get_counter():\n    i = 0\n    def out():\n        nonlocal i\n        i += 1\n        return i\n    return out\n```\n\n```python\n>>> counter = get_counter()\n>>> counter(), counter(), counter()\n(1, 2, 3)\n```\n\n\nDecorator\n---------\n* **A decorator takes a function, adds some functionality and returns it.**\n* **It can be any [callable](#callable), but is usually implemented as a function that returns a [closure](#closure).**\n\n```python\n@decorator_name\ndef function_that_gets_passed_to_decorator():\n    ...\n```\n\n### Debugger Example\n**Decorator that prints function's name every time the function is called.**\n\n```python\nfrom functools import wraps\n\ndef debug(func):\n    @wraps(func)\n    def out(*args, **kwargs):\n        print(func.__name__)\n        return func(*args, **kwargs)\n    return out\n\n@debug\ndef add(x, y):\n    return x + y\n```\n* **Wraps is a helper decorator that copies the metadata of the passed function (func) to the function it is wrapping (out). Without it, `'add.__name__'` would return `'out'`.**\n\n### Cache\n**Decorator that caches function's return values. All function's arguments must be hashable.**\n\n```python\nfrom functools import cache\n\n@cache\ndef fib(n):\n    return n if n < 2 else fib(n-2) + fib(n-1)\n```\n* **Potential problem with cache is that it can grow indefinitely. To clear stored values run `'fib.cache_clear()'`, or use `'@lru_cache(maxsize=<int>)'` decorator instead.**\n* **CPython interpreter limits recursion depth to 3000 by default. To increase it run `'sys.setrecursionlimit(<int>)'`.**\n\n### Parametrized Decorator\n**A decorator that accepts arguments and returns a normal decorator that accepts a function.**\n```python\nfrom functools import wraps\n\ndef debug(print_result=False):\n    def decorator(func):\n        @wraps(func)\n        def out(*args, **kwargs):\n            result = func(*args, **kwargs)\n            print(func.__name__, result if print_result else '')\n            return result\n        return out\n    return decorator\n\n@debug(print_result=True)\ndef add(x, y):\n    return x + y\n```\n* **Using only `'@debug'` to decorate the add() function would not work here, because debug would then receive the add() function as a 'print_result' argument. Decorators can however manually check if the argument they received is a function and act accordingly.**\n\n\nClass\n-----\n**A template for creating user-defined objects.**\n\n```python\nclass MyClass:\n    def __init__(self, a):\n        self.a = a\n    def __str__(self):\n        return str(self.a)\n    def __repr__(self):\n        class_name = self.__class__.__name__\n        return f'{class_name}({self.a!r})'\n\n    @classmethod\n    def get_class_name(cls):\n        return cls.__name__\n```\n\n```python\n>>> obj = MyClass(1)\n>>> obj.a, str(obj), repr(obj)\n(1, '1', 'MyClass(1)')\n```\n* **Return value of str() should be readable and of repr() unambiguous.**\n* **If only repr() is defined, it will also be used for str().**\n* **Methods decorated with `'@staticmethod'` do not receive 'self' nor 'cls' as their first argument.**\n\n#### Expressions that call the str() method:\n```python\nprint(<obj>)\nf'{<obj>}'\nlogging.warning(<obj>)\ncsv.writer(<file>).writerow([<obj>])\nraise Exception(<obj>)\n```\n\n#### Expressions that call the repr() method:\n```python\nprint/str/repr([<obj>])\nprint/str/repr({<obj>: <obj>})\nf'{<obj>!r}'\nZ = dataclasses.make_dataclass('Z', ['a']); print/str/repr(Z(<obj>))\n>>> <obj>\n```\n\n### Inheritance\n```python\nclass Person:\n    def __init__(self, name):\n        self.name = name\n\nclass Employee(Person):\n    def __init__(self, name, staff_num):\n        super().__init__(name)\n        self.staff_num = staff_num\n```\n\n#### Multiple inheritance:\n```python\nclass A: pass\nclass B: pass\nclass C(A, B): pass\n```\n\n**MRO determines the order in which parent classes are traversed when searching for a method or an attribute:**\n```python\n>>> C.mro()\n[<class 'C'>, <class 'A'>, <class 'B'>, <class 'object'>]\n```\n\n### Type Annotations\n* **They add type hints to variables, arguments and functions (`'def f() -> <type>:'`).**\n* **Hints are used by type checkers like [mypy](https://pypi.org/project/mypy/), data validation libraries such as [Pydantic](https://pypi.org/project/pydantic/) and lately also by [Cython](https://pypi.org/project/Cython/) compiler. However, they are not enforced by CPython interpreter.**\n```python\nfrom collections import abc\n\n<name>: <type> [| ...] [= <obj>]                              # `|` since 3.10.\n<name>: list/set/abc.Iterable/abc.Sequence[<type>] [= <obj>]  # Since 3.9.\n<name>: dict/tuple[<type>, ...] [= <obj>]                     # Since 3.9.\n```\n\n### Dataclass\n**Decorator that uses class variables to generate init(), repr() and eq() special methods.**\n```python\nfrom dataclasses import dataclass, field, make_dataclass\n\n@dataclass(order=False, frozen=False)\nclass <class_name>:\n    <attr_name>: <type>\n    <attr_name>: <type> = <default_value>\n    <attr_name>: list/dict/set = field(default_factory=list/dict/set)\n```\n* **Objects can be made [sortable](#sortable) with `'order=True'` and immutable with `'frozen=True'`.**\n* **For object to be [hashable](#hashable), all attributes must be hashable and 'frozen' must be True.**\n* **Function field() is needed because `'<attr_name>: list = []'` would make a list that is shared among all instances. Its 'default_factory' argument can be any [callable](#callable).**\n* **For attributes of arbitrary type use `'typing.Any'`.**\n\n```python\nPoint = make_dataclass('Point', ['x', 'y'])\nPoint = make_dataclass('Point', [('x', float), ('y', float)])\nPoint = make_dataclass('Point', [('x', float, 0), ('y', float, 0)])\n```\n\n### Property\n**Pythonic way of implementing getters and setters.**\n```python\nclass Person:\n    @property\n    def name(self):\n        return ' '.join(self._name)\n\n    @name.setter\n    def name(self, value):\n        self._name = value.split()\n```\n\n```python\n>>> person = Person()\n>>> person.name = '\\t Guido  van Rossum \\n'\n>>> person.name\n'Guido van Rossum'\n```\n\n### Slots\n**Mechanism that restricts objects to attributes listed in 'slots', reduces their memory footprint.**\n\n```python\nclass MyClassWithSlots:\n    __slots__ = ['a']\n    def __init__(self):\n        self.a = 1\n```\n\n### Copy\n```python\nfrom copy import copy, deepcopy\n<object> = copy/deepcopy(<object>)\n```\n\n\nDuck Types\n----------\n**A duck type is an implicit type that prescribes a set of special methods. Any object that has those methods defined is considered a member of that duck type.**\n\n### Comparable\n* **If eq() method is not overridden, it returns `'id(self) == id(other)'`, which is the same as `'self is other'`.**\n* **That means all objects compare not equal by default.**\n* **Only the left side object has eq() method called, unless it returns NotImplemented, in which case the right object is consulted. False is returned if both return NotImplemented.**\n* **Ne() automatically works on any object that has eq() defined.**\n\n```python\nclass MyComparable:\n    def __init__(self, a):\n        self.a = a\n    def __eq__(self, other):\n        if isinstance(other, type(self)):\n            return self.a == other.a\n        return NotImplemented\n```\n\n### Hashable\n* **Hashable object needs both hash() and eq() methods and its hash value should never change.**\n* **Hashable objects that compare equal must have the same hash value, meaning default hash() that returns `'id(self)'` will not do.**\n* **That is why Python automatically makes classes unhashable if you only implement eq().**\n\n```python\nclass MyHashable:\n    def __init__(self, a):\n        self._a = a\n    @property\n    def a(self):\n        return self._a\n    def __eq__(self, other):\n        if isinstance(other, type(self)):\n            return self.a == other.a\n        return NotImplemented\n    def __hash__(self):\n        return hash(self.a)\n```\n\n### Sortable\n* **With 'total_ordering' decorator, you only need to provide eq() and one of lt(), gt(), le() or ge() special methods and the rest will be automatically generated.**\n* **Functions sorted() and min() only require lt() method, while max() only requires gt(). However, it is best to define them all so that confusion doesn't arise in other contexts.**\n* **When two lists, strings or dataclasses are compared, their values get compared in order until a pair of unequal values is found. The comparison of this two values is then returned. The shorter sequence is considered smaller in case of all values being equal.**\n* **To sort collection of strings in proper alphabetical order pass `'key=locale.strxfrm'` to sorted() after running `'locale.setlocale(locale.LC_COLLATE, \"en_US.UTF-8\")'`.**\n\n```python\nfrom functools import total_ordering\n\n@total_ordering\nclass MySortable:\n    def __init__(self, a):\n        self.a = a\n    def __eq__(self, other):\n        if isinstance(other, type(self)):\n            return self.a == other.a\n        return NotImplemented\n    def __lt__(self, other):\n        if isinstance(other, type(self)):\n            return self.a < other.a\n        return NotImplemented\n```\n\n### Iterator\n* **Any object that has methods next() and iter() is an iterator.**\n* **Next() should return next item or raise StopIteration exception.**\n* **Iter() should return 'self', i.e. unmodified object on which it was called.**\n```python\nclass Counter:\n    def __init__(self):\n        self.i = 0\n    def __next__(self):\n        self.i += 1\n        return self.i\n    def __iter__(self):\n        return self\n```\n\n```python\n>>> counter = Counter()\n>>> next(counter), next(counter), next(counter)\n(1, 2, 3)\n```\n\n#### Python has many different iterator objects:\n* **Sequence iterators returned by the [iter()](#iterator) function, such as list\\_iterator and set\\_iterator.**\n* **Objects returned by the [itertools](#itertools) module, such as count, repeat and cycle.**\n* **Generators returned by the [generator functions](#generator) and [generator expressions](#comprehensions).**\n* **File objects returned by the [open()](#open) function, etc.**\n\n### Callable\n* **All functions and classes have a call() method, hence are callable.**\n* **Use `'callable(<obj>)'` or `'isinstance(<obj>, collections.abc.Callable)'` to check if object is callable.**\n* **When this cheatsheet uses `'<function>'` as an argument, it means `'<callable>'`.**\n```python\nclass Counter:\n    def __init__(self):\n        self.i = 0\n    def __call__(self):\n        self.i += 1\n        return self.i\n```\n\n```python\n>>> counter = Counter()\n>>> counter(), counter(), counter()\n(1, 2, 3)\n```\n\n### Context Manager\n* **With statements only work on objects that have enter() and exit() special methods.**\n* **Enter() should lock the resources and optionally return an object.**\n* **Exit() should release the resources.**\n* **Any exception that happens inside the with block is passed to the exit() method.**\n* **The exit() method can suppress the exception by returning a true value.**\n```python\nclass MyOpen:\n    def __init__(self, filename):\n        self.filename = filename\n    def __enter__(self):\n        self.file = open(self.filename)\n        return self.file\n    def __exit__(self, exc_type, exception, traceback):\n        self.file.close()\n```\n\n```python\n>>> with open('test.txt', 'w') as file:\n...     file.write('Hello World!')\n>>> with MyOpen('test.txt') as file:\n...     print(file.read())\nHello World!\n```\n\n\nIterable Duck Types\n-------------------\n### Iterable\n* **Only required method is iter(). It should return an iterator of object's items.**\n* **Contains() automatically works on any object that has iter() defined.**\n```python\nclass MyIterable:\n    def __init__(self, a):\n        self.a = a\n    def __iter__(self):\n        return iter(self.a)\n    def __contains__(self, el):\n        return el in self.a\n```\n\n```python\n>>> obj = MyIterable([1, 2, 3])\n>>> [el for el in obj]\n[1, 2, 3]\n>>> 1 in obj\nTrue\n```\n\n### Collection\n* **Only required methods are iter() and len(). Len() should return the number of items.**\n* **This cheatsheet actually means `'<iterable>'` when it uses `'<collection>'`.**\n* **I chose not to use the name 'iterable' because it sounds scarier and more vague than 'collection'. The main drawback of this decision is that the reader could think a certain function doesn't accept iterators when it does, since iterators are the only built-in objects that are iterable but are not collections.**\n```python\nclass MyCollection:\n    def __init__(self, a):\n        self.a = a\n    def __iter__(self):\n        return iter(self.a)\n    def __contains__(self, el):\n        return el in self.a\n    def __len__(self):\n        return len(self.a)\n```\n\n### Sequence\n* **Only required methods are getitem() and len().**\n* **Getitem() should return an item at the passed index or raise IndexError.**\n* **Iter() and contains() automatically work on any object that has getitem() defined.**\n* **Reversed() automatically works on any object that has getitem() and len() defined. It returns reversed iterator of object's items.**\n```python\nclass MySequence:\n    def __init__(self, a):\n        self.a = a\n    def __iter__(self):\n        return iter(self.a)\n    def __contains__(self, el):\n        return el in self.a\n    def __len__(self):\n        return len(self.a)\n    def __getitem__(self, i):\n        return self.a[i]\n    def __reversed__(self):\n        return reversed(self.a)\n```\n\n#### Discrepancies between glossary definitions and abstract base classes:\n* **Python's glossary defines iterable as any object with special methods iter() and/or getitem() and sequence as any object with getitem() and len(). It doesn't define collection.**\n* **Passing ABC Iterable to isinstance() or issubclass() only checks whether object/class has special method iter(), while ABC Collection checks for iter(), contains() and len().**\n\n### ABC Sequence\n* **It's a richer interface than the basic sequence.**\n* **Extending it generates iter(), contains(), reversed(), index() and count().**\n* **Unlike `'abc.Iterable'` and `'abc.Collection'`, it is not a duck type. That is why `'issubclass(MySequence, abc.Sequence)'` would return False even if MySequence had all the methods defined. It however recognizes list, tuple, range, str, bytes, bytearray, array, memoryview and deque, since they are registered as Sequence's virtual subclasses.**\n```python\nfrom collections import abc\n\nclass MyAbcSequence(abc.Sequence):\n    def __init__(self, a):\n        self.a = a\n    def __len__(self):\n        return len(self.a)\n    def __getitem__(self, i):\n        return self.a[i]\n```\n\n#### Table of required and automatically available special methods:\n```text\n+------------+------------+------------+------------+--------------+\n|            |  Iterable  | Collection |  Sequence  | abc.Sequence |\n+------------+------------+------------+------------+--------------+\n| iter()     |    REQ     |    REQ     |    Yes     |     Yes      |\n| contains() |    Yes     |    Yes     |    Yes     |     Yes      |\n| len()      |            |    REQ     |    REQ     |     REQ      |\n| getitem()  |            |            |    REQ     |     REQ      |\n| reversed() |            |            |    Yes     |     Yes      |\n| index()    |            |            |            |     Yes      |\n| count()    |            |            |            |     Yes      |\n+------------+------------+------------+------------+--------------+\n```\n* **Method iter() is required for `'isinstance(<obj>, abc.Iterable)'` to return True, however any object with getitem() will work with any code expecting an iterable.**\n* **MutableSequence, Set, MutableSet, Mapping and MutableMapping ABCs are also extendable. Use `'<abc>.__abstractmethods__'` to get names of required methods.**\n\n\nEnum\n----\n**Class of named constants called members.**\n\n```python\nfrom enum import Enum, auto\n```\n\n```python\nclass <enum_name>(Enum):\n    <member_name> = auto()              # Increment of the last numeric value or 1.\n    <member_name> = <value>             # Values don't have to be hashable.\n    <member_name> = <el_1>, <el_2>      # Values can be collections (this is a tuple).\n```\n* **Methods receive the member they were called on as the 'self' argument.**\n* **Accessing a member named after a reserved keyword causes SyntaxError.**\n\n```python\n<member> = <enum>.<member_name>         # Returns a member. Raises AttributeError.\n<member> = <enum>['<member_name>']      # Returns a member. Raises KeyError.\n<member> = <enum>(<value>)              # Returns a member. Raises ValueError.\n<str>    = <member>.name                # Returns member's name.\n<obj>    = <member>.value               # Returns member's value.\n```\n\n```python\n<list>   = list(<enum>)                 # Returns enum's members.\n<list>   = [a.name for a in <enum>]     # Returns enum's member names.\n<list>   = [a.value for a in <enum>]    # Returns enum's member values.\n```\n\n```python\n<enum>   = type(<member>)               # Returns member's enum.\n<iter>   = itertools.cycle(<enum>)      # Returns endless iterator of members.\n<member> = random.choice(list(<enum>))  # Returns a random member.\n```\n\n### Inline\n```python\nCutlery = Enum('Cutlery', 'FORK KNIFE SPOON')\nCutlery = Enum('Cutlery', ['FORK', 'KNIFE', 'SPOON'])\nCutlery = Enum('Cutlery', {'FORK': 1, 'KNIFE': 2, 'SPOON': 3})\n```\n\n#### User-defined functions cannot be values, so they must be wrapped:\n```python\nfrom functools import partial\nLogicOp = Enum('LogicOp', {'AND': partial(lambda l, r: l and r),\n                           'OR':  partial(lambda l, r: l or r)})\n```\n\n\nExceptions\n----------\n```python\ntry:\n    <code>\nexcept <exception>:\n    <code>\n```\n\n### Complex Example\n```python\ntry:\n    <code_1>\nexcept <exception_a>:\n    <code_2_a>\nexcept <exception_b>:\n    <code_2_b>\nelse:\n    <code_2_c>\nfinally:\n    <code_3>\n```\n* **Code inside the `'else'` block will only be executed if `'try'` block had no exceptions.**\n* **Code inside the `'finally'` block will always be executed (unless a signal is received).**\n* **All variables that are initialized in executed blocks are also visible in all subsequent blocks, as well as outside the try statement (only function block delimits scope).**\n* **To catch signals use `'signal.signal(signal_number, <func>)'`.**\n\n### Catching Exceptions\n```python\nexcept <exception>: ...\nexcept <exception> as <name>: ...\nexcept (<exception>, [...]): ...\nexcept (<exception>, [...]) as <name>: ...\n```\n* **Also catches subclasses of the exception.**\n* **Use `'traceback.print_exc()'` to print the full error message to stderr.**\n* **Use `'print(<name>)'` to print just the cause of the exception (its arguments).**\n* **Use `'logging.exception(<str>)'` to log the passed message, followed by the full error message of the caught exception. For details see [Logging](#logging).**\n* **Use `'sys.exc_info()'` to get exception type, object, and traceback of caught exception.**\n\n### Raising Exceptions\n```python\nraise <exception>\nraise <exception>()\nraise <exception>(<obj> [, ...])\n```\n\n#### Re-raising caught exception:\n```python\nexcept <exception> [as <name>]:\n    ...\n    raise\n```\n\n### Exception Object\n```python\narguments = <name>.args\nexc_type  = <name>.__class__\nfilename  = <name>.__traceback__.tb_frame.f_code.co_filename\nfunc_name = <name>.__traceback__.tb_frame.f_code.co_name\nline      = linecache.getline(filename, <name>.__traceback__.tb_lineno)\ntrace_str = ''.join(traceback.format_tb(<name>.__traceback__))\nerror_msg = ''.join(traceback.format_exception(type(<name>), <name>, <name>.__traceback__))\n```\n\n### Built-in Exceptions\n```text\nBaseException\n +-- SystemExit                   # Raised by the sys.exit() function.\n +-- KeyboardInterrupt            # Raised when the user hits the interrupt key (ctrl-c).\n +-- Exception                    # User-defined exceptions should be derived from this class.\n      +-- ArithmeticError         # Base class for arithmetic errors such as ZeroDivisionError.\n      +-- AssertionError          # Raised by `assert <exp>` if expression returns false value.\n      +-- AttributeError          # Raised when object doesn't have requested attribute/method.\n      +-- EOFError                # Raised by input() when it hits an end-of-file condition.\n      +-- LookupError             # Base class for errors when a collection can't find an item.\n      |    +-- IndexError         # Raised when a sequence index is out of range.\n      |    +-- KeyError           # Raised when a dictionary key or set element is missing.\n      +-- MemoryError             # Out of memory. May be too late to start deleting variables.\n      +-- NameError               # Raised when nonexistent name (variable/func/class) is used.\n      |    +-- UnboundLocalError  # Raised when local name is used before it's being defined.\n      +-- OSError                 # Errors such as FileExistsError/TimeoutError (see #Open).\n      |    +-- ConnectionError    # Errors such as BrokenPipeError/ConnectionAbortedError.\n      +-- RuntimeError            # Raised by errors that don't fall into other categories.\n      |    +-- NotImplementedEr…  # Can be raised by abstract methods or by unfinished code.\n      |    +-- RecursionError     # Raised when the maximum recursion depth is exceeded.\n      +-- StopIteration           # Raised when an empty iterator is passed to next().\n      +-- TypeError               # When an argument of the wrong type is passed to function.\n      +-- ValueError              # When argument has the right type but inappropriate value.\n```\n\n#### Collections and their exceptions:\n```text\n+-----------+------------+------------+------------+\n|           |    List    |    Set     |    Dict    |\n+-----------+------------+------------+------------+\n| getitem() | IndexError |            |  KeyError  |\n| pop()     | IndexError |  KeyError  |  KeyError  |\n| remove()  | ValueError |  KeyError  |            |\n| index()   | ValueError |            |            |\n+-----------+------------+------------+------------+\n```\n\n#### Useful built-in exceptions:\n```python\nraise TypeError('Argument is of the wrong type!')\nraise ValueError('Argument has the right type but an inappropriate value!')\nraise RuntimeError('I am too lazy to define my own exception!')\n```\n\n### User-defined Exceptions\n```python\nclass MyError(Exception): pass\nclass MyInputError(MyError): pass\n```\n\n\nExit\n----\n**Exits the interpreter by raising SystemExit exception.**\n```python\nimport sys\nsys.exit()                        # Exits with exit code 0 (success).\nsys.exit(<int>)                   # Exits with the passed exit code.\nsys.exit(<obj>)                   # Prints to stderr and exits with 1.\n```\n\n\nPrint\n-----\n```python\nprint(<el_1>, ..., sep=' ', end='\\n', file=sys.stdout, flush=False)\n```\n* **Use `'file=sys.stderr'` for messages about errors.**\n* **Stdout and stderr streams hold output in a buffer until they receive a string containing '\\n' or '\\r', buffer reaches 4096 characters, `'flush=True'` is used, or program exits.**\n\n### Pretty Print\n```python\nfrom pprint import pprint\npprint(<collection>, width=80, depth=None, compact=False, sort_dicts=True)\n```\n* **Each item is printed on its own line if collection exceeds 'width' characters.**\n* **Nested collections that are 'depth' levels deep get printed as '...'.**\n\n\nInput\n-----\n```python\n<str> = input()\n```\n* **Reads a line from the user input or pipe if present (trailing newline gets stripped).**\n* **If argument is passed, it gets printed to the standard output before input is read.**\n* **EOFError is raised if user hits EOF (ctrl-d/ctrl-z⏎) or input stream gets exhausted.**\n\n\nCommand Line Arguments\n----------------------\n```python\nimport sys\nscripts_path = sys.argv[0]\narguments    = sys.argv[1:]\n```\n\n### Argument Parser\n```python\nfrom argparse import ArgumentParser, FileType\np = ArgumentParser(description=<str>)                             # Returns a parser.\np.add_argument('-<short_name>', '--<name>', action='store_true')  # Flag (defaults to False).\np.add_argument('-<short_name>', '--<name>', type=<type>)          # Option (defaults to None).\np.add_argument('<name>', type=<type>, nargs=1)                    # Mandatory first argument.\np.add_argument('<name>', type=<type>, nargs='+')                  # Mandatory remaining args.\np.add_argument('<name>', type=<type>, nargs='?/*')                # Optional argument/s.\nargs  = p.parse_args()                                            # Exits on parsing error.\n<obj> = args.<name>                                               # Returns `<type>(<arg>)`.\n```\n\n* **Use `'help=<str>'` to set argument description that will be displayed in help message.**\n* **Use `'default=<obj>'` to set option's or optional argument's default value.**\n* **Use `'type=FileType(<mode>)'` for files. Accepts 'encoding', but 'newline' is None.**\n\n\nOpen\n----\n**Opens a file and returns the corresponding file object.**\n\n```python\n<file> = open(<path>, mode='r', encoding=None, newline=None)\n```\n* **`'encoding=None'` means that the default encoding is used, which is platform dependent. Best practice is to use `'encoding=\"utf-8\"'` whenever possible.**\n* **`'newline=None'` means all different end of line combinations are converted to '\\n' on read, while on write all '\\n' characters are converted to system's default line separator.**\n* **`'newline=\"\"'` means no conversions take place, but input is still broken into chunks by readline() and readlines() on every '\\n', '\\r' and '\\r\\n'.**\n\n### Modes\n* **`'r'`  - Read. Used by default.**\n* **`'w'`  - Write. Deletes existing contents.**\n* **`'x'`  - Write or fail if the file already exists.**\n* **`'a'`  - Append. Creates new file if it doesn't exist.**\n* **`'w+'` - Read and write. Deletes existing contents.**\n* **`'r+'` - Read and write from the start.**\n* **`'a+'` - Read and write from the end.**\n* **`'b'`  - Binary mode (`'rb'`, `'wb'`, `'xb'`, …).**\n\n### Exceptions\n* **`'FileNotFoundError'` can be raised when reading with `'r'` or `'r+'`.**\n* **`'FileExistsError'` can be raised when writing with `'x'`.**\n* **`'IsADirectoryError'` and `'PermissionError'` can be raised by any.**\n* **`'OSError'` is the parent class of all listed exceptions.**\n\n### File Object\n```python\n<file>.seek(0)                      # Moves to the start of the file.\n<file>.seek(offset)                 # Moves 'offset' chars/bytes from the start.\n<file>.seek(0, 2)                   # Moves to the end of the file.\n<bin_file>.seek(±offset, origin)    # Origin: 0 start, 1 current position, 2 end.\n```\n\n```python\n<str/bytes> = <file>.read(size=-1)  # Reads 'size' chars/bytes or until EOF.\n<str/bytes> = <file>.readline()     # Returns a line or empty string/bytes on EOF.\n<list>      = <file>.readlines()    # Returns a list of remaining lines.\n<str/bytes> = next(<file>)          # Returns a line using buffer. Do not mix.\n```\n\n```python\n<file>.write(<str/bytes>)           # Writes a string or bytes object.\n<file>.writelines(<collection>)     # Writes a coll. of strings or bytes objects.\n<file>.flush()                      # Flushes write buffer. Runs every 4096/8192 B.\n<file>.close()                      # Closes the file after flushing write buffer.\n```\n* **Methods do not add or strip trailing newlines, not even writelines().**\n\n### Read Text from File\n```python\ndef read_file(filename):\n    with open(filename, encoding='utf-8') as file:\n        return file.readlines()\n```\n\n### Write Text to File\n```python\ndef write_to_file(filename, text):\n    with open(filename, 'w', encoding='utf-8') as file:\n        file.write(text)\n```\n\n\nPaths\n-----\n```python\nimport os, glob\nfrom pathlib import Path\n```\n\n```python\n<str>  = os.getcwd()                # Returns working dir. Starts as shell's $PWD.\n<str>  = os.path.join(<path>, ...)  # Joins two or more pathname components.\n<str>  = os.path.realpath(<path>)   # Resolves symlinks and calls path.abspath().\n```\n\n```python\n<str>  = os.path.basename(<path>)   # Returns final component of the path.\n<str>  = os.path.dirname(<path>)    # Returns path without the final component.\n<tup.> = os.path.splitext(<path>)   # Splits on last period of the final component.\n```\n\n```python\n<list> = os.listdir(path='.')       # Returns filenames located at the path.\n<list> = glob.glob('<pattern>')     # Returns paths matching the wildcard pattern.\n```\n\n```python\n<bool> = os.path.exists(<path>)     # Or: <Path>.exists()\n<bool> = os.path.isfile(<path>)     # Or: <DirEntry/Path>.is_file()\n<bool> = os.path.isdir(<path>)      # Or: <DirEntry/Path>.is_dir()\n```\n\n```python\n<stat> = os.stat(<path>)            # Or: <DirEntry/Path>.stat()\n<num>  = <stat>.st_mtime/st_size/…  # Modification time, size in bytes, etc.\n```\n\n### DirEntry\n**Unlike listdir(), scandir() returns DirEntry objects that cache isfile, isdir, and on Windows also stat information, thus significantly increasing the performance of code that requires it.**\n\n```python\n<iter> = os.scandir(path='.')       # Returns DirEntry objects located at the path.\n<str>  = <DirEntry>.path            # Returns the whole path as a string.\n<str>  = <DirEntry>.name            # Returns final component as a string.\n<file> = open(<DirEntry>)           # Opens the file and returns a file object.\n```\n\n### Path Object\n```python\n<Path> = Path(<path> [, ...])       # Accepts strings, Paths, and DirEntry objects.\n<Path> = <path> / <path> [/ ...]    # First or second path must be a Path object.\n<Path> = <Path>.resolve()           # Returns absolute path with resolved symlinks.\n```\n\n```python\n<Path> = Path()                     # Returns relative CWD. Also Path('.').\n<Path> = Path.cwd()                 # Returns absolute CWD. Also Path().resolve().\n<Path> = Path.home()                # Returns user's home directory (absolute).\n<Path> = Path(__file__).resolve()   # Returns script's path if CWD wasn't changed.\n```\n\n```python\n<Path> = <Path>.parent              # Returns Path without the final component.\n<str>  = <Path>.name                # Returns final component as a string.\n<str>  = <Path>.stem                # Returns final component without extension.\n<str>  = <Path>.suffix              # Returns final component's extension.\n<tup.> = <Path>.parts               # Returns all components as strings.\n```\n\n```python\n<iter> = <Path>.iterdir()           # Returns directory contents as Path objects.\n<iter> = <Path>.glob('<pattern>')   # Returns Paths matching the wildcard pattern.\n```\n\n```python\n<str>  = str(<Path>)                # Returns path as a string.\n<file> = open(<Path>)               # Also <Path>.read/write_text/bytes(<args>).\n```\n\n\nOS Commands\n-----------\n```python\nimport os, shutil, subprocess\n```\n\n```python\nos.chdir(<path>)                    # Changes the current working directory.\nos.mkdir(<path>, mode=0o777)        # Creates a directory. Permissions are in octal.\nos.makedirs(<path>, mode=0o777)     # Creates all path's dirs. Also `exist_ok=False`.\n```\n\n```python\nshutil.copy(from, to)               # Copies the file. 'to' can exist or be a dir.\nshutil.copy2(from, to)              # Also copies creation and modification time.\nshutil.copytree(from, to)           # Copies the directory. 'to' must not exist.\n```\n\n```python\nos.rename(from, to)                 # Renames/moves the file or directory.\nos.replace(from, to)                # Same, but overwrites file 'to' even on Windows.\nshutil.move(from, to)               # Rename() that moves into 'to' if it's a dir.\n```\n\n```python\nos.remove(<path>)                   # Deletes the file.\nos.rmdir(<path>)                    # Deletes the empty directory.\nshutil.rmtree(<path>)               # Deletes the directory.\n```\n* **Paths can be either strings, Paths, or DirEntry objects.**\n* **Functions report OS related errors by raising either OSError or one of its [subclasses](#exceptions-1).**\n\n### Shell Commands\n```python\n<pipe> = os.popen('<commands>')     # Executes commands in sh/cmd. Returns combined stdout.\n<str>  = <pipe>.read(size=-1)       # Reads 'size' chars or until EOF. Also readline/s().\n<int>  = <pipe>.close()             # Returns None if last command exited with returncode 0.\n```\n\n#### Sends '1 + 1' to the basic calculator and captures its output:\n```python\n>>> subprocess.run('bc', input='1 + 1\\n', capture_output=True, text=True)\nCompletedProcess(args='bc', returncode=0, stdout='2\\n', stderr='')\n```\n\n#### Sends test.in to the basic calculator running in standard mode and saves its output to test.out:\n```python\n>>> from shlex import split\n>>> os.popen('echo 1 + 1 > test.in')\n>>> subprocess.run(split('bc -s'), stdin=open('test.in'), stdout=open('test.out', 'w'))\nCompletedProcess(args=['bc', '-s'], returncode=0)\n>>> open('test.out').read()\n'2\\n'\n```\n\n\nJSON\n----\n**Text file format for storing collections of strings and numbers.**\n\n```python\nimport json\n<str>  = json.dumps(<list/dict>)    # Converts collection to JSON string.\n<coll> = json.loads(<str>)          # Converts JSON string to collection.\n```\n\n### Read Collection from JSON File\n```python\ndef read_json_file(filename):\n    with open(filename, encoding='utf-8') as file:\n        return json.load(file)\n```\n\n### Write Collection to JSON File\n```python\ndef write_to_json_file(filename, list_or_dict):\n    with open(filename, 'w', encoding='utf-8') as file:\n        json.dump(list_or_dict, file, ensure_ascii=False, indent=2)\n```\n\n\nPickle\n------\n**Binary file format for storing Python objects.**\n\n```python\nimport pickle\n<bytes>  = pickle.dumps(<object>)   # Converts object to bytes object.\n<object> = pickle.loads(<bytes>)    # Converts bytes object to object.\n```\n\n### Read Object from File\n```python\ndef read_pickle_file(filename):\n    with open(filename, 'rb') as file:\n        return pickle.load(file)\n```\n\n### Write Object to File\n```python\ndef write_to_pickle_file(filename, an_object):\n    with open(filename, 'wb') as file:\n        pickle.dump(an_object, file)\n```\n\n\nCSV\n---\n**Text file format for storing spreadsheets.**\n\n```python\nimport csv\n```\n\n### Read\n```python\n<reader> = csv.reader(<file>)       # Also: `dialect='excel', delimiter=','`.\n<list>   = next(<reader>)           # Returns next row as a list of strings.\n<list>   = list(<reader>)           # Returns a list of remaining rows.\n```\n* **File must be opened with a `'newline=\"\"'` argument, or newlines embedded inside quoted fields will not be interpreted correctly!**\n* **To print the spreadsheet to the console use [Tabulate](#table) library.**\n* **For XML and binary Excel files (xlsx, xlsm and xlsb) use [Pandas](#dataframe-plot-encode-decode) library.**\n* **Reader accepts any iterator of strings, not just files.**\n\n### Write\n```python\n<writer> = csv.writer(<file>)       # Also: `dialect='excel', delimiter=','`.\n<writer>.writerow(<collection>)     # Encodes objects using `str(<el>)`.\n<writer>.writerows(<coll_of_coll>)  # Appends multiple rows.\n```\n* **File must be opened with a `'newline=\"\"'` argument, or '\\r' will be added in front of every '\\n' on platforms that use '\\r\\n' line endings!**\n* **Open existing file with `'mode=\"a\"'` to append to it or `'mode=\"w\"'` to overwrite it.**\n\n### Parameters\n* **`'dialect'` - Master parameter that sets the default values. String or a 'csv.Dialect' object.**\n* **`'delimiter'` - A one-character string used to separate fields.**\n* **`'lineterminator'` - How writer terminates rows. Reader is hardcoded to '\\n', '\\r', '\\r\\n'.**\n* **`'quotechar'` - Character for quoting fields that contain special characters.**\n* **`'escapechar'` - Character for escaping quotechars.**\n* **`'doublequote'` - Whether quotechars inside fields are/get doubled or escaped.**\n* **`'quoting'` - 0: As necessary, 1: All, 2: All but numbers which are read as floats, 3: None.**\n* **`'skipinitialspace'` - Is space character at the start of the field stripped by the reader.**\n\n### Dialects\n```text\n+------------------+--------------+--------------+--------------+\n|                  |     excel    |   excel-tab  |     unix     |\n+------------------+--------------+--------------+--------------+\n| delimiter        |       ','    |      '\\t'    |       ','    |\n| lineterminator   |    '\\r\\n'    |    '\\r\\n'    |      '\\n'    |\n| quotechar        |       '\"'    |       '\"'    |       '\"'    |\n| escapechar       |      None    |      None    |      None    |\n| doublequote      |      True    |      True    |      True    |\n| quoting          |         0    |         0    |         1    |\n| skipinitialspace |     False    |     False    |     False    |\n+------------------+--------------+--------------+--------------+\n```\n\n### Read Rows from CSV File\n```python\ndef read_csv_file(filename, **csv_params):\n    with open(filename, encoding='utf-8', newline='') as file:\n        return list(csv.reader(file, **csv_params))\n```\n\n### Write Rows to CSV File\n```python\ndef write_to_csv_file(filename, rows, mode='w', **csv_params):\n    with open(filename, mode, encoding='utf-8', newline='') as file:\n        writer = csv.writer(file, **csv_params)\n        writer.writerows(rows)\n```\n\n\nSQLite\n------\n**A server-less database engine that stores each database into its own file.**\n\n```python\nimport sqlite3\n<conn> = sqlite3.connect(<path>)               # Opens existing or new file. Also ':memory:'.\n<conn>.close()                                 # Closes connection. Discards uncommitted data.\n```\n\n### Read\n```python\n<cursor> = <conn>.execute('<query>')           # Can raise a subclass of sqlite3.Error.\n<tuple>  = <cursor>.fetchone()                 # Returns next row. Also next(<cursor>).\n<list>   = <cursor>.fetchall()                 # Returns remaining rows. Also list(<cursor>).\n```\n\n### Write\n```python\n<conn>.execute('<query>')                      # Can raise a subclass of sqlite3.Error.\n<conn>.commit()                                # Saves all changes since the last commit.\n<conn>.rollback()                              # Discards all changes since the last commit.\n```\n\n#### Or:\n```python\nwith <conn>:                                   # Exits the block with commit() or rollback(),\n    <conn>.execute('<query>')                  # depending on whether any exception occurred.\n```\n\n### Placeholders\n```python\n<conn>.execute('<query>', <list/tuple>)        # Replaces '?'s in query with values.\n<conn>.execute('<query>', <dict/namedtuple>)   # Replaces ':<key>'s with values.\n<conn>.executemany('<query>', <coll_of_coll>)  # Runs execute() multiple times.\n```\n* **Passed values can be of type str, int, float, bytes, None, or bool (stored as 1 or 0).**\n\n### Example\n**Values are not actually saved in this example because `'conn.commit()'` is omitted!**\n```python\n>>> conn = sqlite3.connect('test.db')\n>>> conn.execute('CREATE TABLE person (person_id INTEGER PRIMARY KEY, name, height)')\n>>> conn.execute('INSERT INTO person VALUES (NULL, ?, ?)', ('Jean-Luc', 187)).lastrowid\n1\n>>> conn.execute('SELECT * FROM person').fetchall()\n[(1, 'Jean-Luc', 187)]\n```\n\n### SQLAlchemy\n**Library for interacting with various DB systems via SQL, method chaining, or ORM.**\n```python\n# $ pip3 install sqlalchemy\nfrom sqlalchemy import create_engine, text\n<engine> = create_engine('<url>')              # Url: 'dialect://user:password@host/dbname'.\n<conn>   = <engine>.connect()                  # Creates a connection. Also <conn>.close().\n<cursor> = <conn>.execute(text('<query>'), …)  # `<dict>`. Replaces ':<key>'s with values.\nwith <conn>.begin(): ...                       # Exits the block with commit or rollback.\n```\n\n```text\n+-----------------+--------------+----------------------------------+\n| Dialect         | pip3 install |           Dependencies           |\n+-----------------+--------------+----------------------------------+\n| mysql           | mysqlclient  | www.pypi.org/project/mysqlclient |\n| postgresql      | psycopg2     | www.pypi.org/project/psycopg2    |\n| mssql           | pyodbc       | www.pypi.org/project/pyodbc      |\n| oracle+oracledb | oracledb     | www.pypi.org/project/oracledb    |\n+-----------------+--------------+----------------------------------+\n```\n\n\nBytes\n-----\n**A bytes object is an immutable sequence of single bytes. Mutable version is called bytearray.**\n\n```python\n<bytes> = b'<str>'                       # Only accepts ASCII characters and \\x00-\\xff.\n<int>   = <bytes>[index]                 # Returns an int in range from 0 to 255.\n<bytes> = <bytes>[<slice>]               # Returns bytes even if it has only one element.\n<bytes> = <bytes>.join(<coll_of_bytes>)  # Joins elements using bytes as a separator.\n```\n\n### Encode\n```python\n<bytes> = bytes(<coll_of_ints>)          # Ints must be in range from 0 to 255.\n<bytes> = bytes(<str>, 'utf-8')          # Encodes the string. Also <str>.encode().\n<bytes> = bytes.fromhex('<hex>')         # Hex pairs can be separated by whitespaces.\n<bytes> = <int>.to_bytes(n_bytes, …)     # `byteorder='big/little', signed=False`.\n```\n\n### Decode\n```python\n<list>  = list(<bytes>)                  # Returns ints in range from 0 to 255.\n<str>   = str(<bytes>, 'utf-8')          # Returns a string. Also <bytes>.decode().\n<str>   = <bytes>.hex()                  # Returns hex pairs. Accepts `sep=<str>`.\n<int>   = int.from_bytes(<bytes>, …)     # `byteorder='big/little', signed=False`.\n```\n\n### Read Bytes from File\n```python\ndef read_bytes(filename):\n    with open(filename, 'rb') as file:\n        return file.read()\n```\n\n### Write Bytes to File\n```python\ndef write_bytes(filename, bytes_obj):\n    with open(filename, 'wb') as file:\n        file.write(bytes_obj)\n```\n\n\nStruct\n------\n* **Module that performs conversions between a sequence of numbers and a bytes object.**\n* **System’s type sizes, byte order, and alignment rules are used by default.**\n\n```python\nfrom struct import pack, unpack\n\n<bytes> = pack('<format>', <el_1> [, ...])  # Packs objects according to format string.\n<tuple> = unpack('<format>', <bytes>)       # Use iter_unpack() to get iterator of tuples.\n```\n\n```python\n>>> pack('>hhl', 1, 2, 3)\nb'\\x00\\x01\\x00\\x02\\x00\\x00\\x00\\x03'\n>>> unpack('>hhl', b'\\x00\\x01\\x00\\x02\\x00\\x00\\x00\\x03')\n(1, 2, 3)\n```\n\n### Format\n#### For standard type sizes and manual alignment (padding) start format string with:\n* **`'='` - System's byte order (usually little-endian).**\n* **`'<'` - Little-endian (i.e. least significant byte first).**\n* **`'>'` - Big-endian (also `'!'`).**\n\n#### Besides numbers, pack() and unpack() also support bytes objects as a part of the sequence:\n* **`'c'` - A bytes object with a single element. For pad byte use `'x'`.**\n* **`'<n>s'` - A bytes object with n elements (not effected by byte order).**\n\n#### Integer types. Use a capital letter for unsigned type. Minimum and standard sizes are in brackets:\n* **`'b'` - char (1/1)**\n* **`'h'` - short (2/2)**\n* **`'i'` - int (2/4)**\n* **`'l'` - long (4/4)**\n* **`'q'` - long long (8/8)**\n\n#### Floating point types (struct always uses standard sizes):\n* **`'f'` - float (4/4)**\n* **`'d'` - double (8/8)**\n\n\nArray\n-----\n**List that can only hold numbers of a predefined type. Available types and their minimum sizes in bytes are listed above. Type sizes and byte order are always determined by the system, however bytes of each element can be reversed with byteswap() method.**\n\n```python\nfrom array import array\n```\n\n```python\n<array> = array('<typecode>', <coll_of_nums>)  # Creates array from collection of numbers.\n<array> = array('<typecode>', <bytes>)         # Writes passed bytes to array's memory.\n<array> = array('<typecode>', <array>)         # Treats passed array as a sequence of numbers.\n<array>.fromfile(<file>, n_items)              # Appends file's contents to array's memory.\n```\n\n```python\n<bytes> = bytes(<array>)                       # Returns a copy of array's memory.\n<file>.write(<array>)                          # Writes array's memory to the binary file.\n```\n\n\nMemory View\n-----------\n**A sequence object that points to the memory of another bytes-like object. Each element can reference a single or multiple consecutive bytes, depending on format. Order and number of elements can be changed with slicing.**\n\n```python\n<mview> = memoryview(<bytes/bytearray/array>)  # Immutable if bytes is passed, else mutable.\n<obj>   = <mview>[index]                       # Returns int or float. Bytes if format is 'c'.\n<mview> = <mview>[<slice>]                     # Returns memoryview with rearranged elements.\n<mview> = <mview>.cast('<typecode>')           # Only works between B/b/c and other types.\n<mview>.release()                              # Releases memory buffer of the base object.\n```\n\n```python\n<bytes> = bytes(<mview>)                       # Returns a new bytes object. Also bytearray().\n<bytes> = <bytes>.join(<coll_of_mviews>)       # Joins memoryviews using bytes as a separator.\n<array> = array('<typecode>', <mview>)         # Treats memoryview as a sequence of numbers.\n<file>.write(<mview>)                          # Writes `bytes(<mview>)` to the binary file.\n```\n\n```python\n<list>  = list(<mview>)                        # Returns a list of ints, floats, or bytes.\n<str>   = str(<mview>, 'utf-8')                # Treats memoryview as a bytes object.\n<str>   = <mview>.hex()                        # Returns hex pairs. Accepts `sep=<str>`.\n```\n\n\nDeque\n-----\n**List with efficient appends and pops from either side.**\n\n```python\nfrom collections import deque\n```\n\n```python\n<deque> = deque(<collection>)                  # Use `maxlen=<int>` to set size limit.\n<deque>.appendleft(<el>)                       # Opposite element is dropped if full.\n<deque>.extendleft(<collection>)               # Passed collection gets reversed.\n<deque>.rotate(n=1)                            # Last element becomes first.\n<el> = <deque>.popleft()                       # Raises IndexError if deque is empty.\n```\n\n\nOperator\n--------\n**Module of functions that provide the functionality of operators. Functions are ordered and grouped by operator precedence, from least to most binding. Logical and arithmetic operators in lines 1, 3 and 5 are also ordered by precedence within their own group.**\n```python\nimport operator as op\n```\n\n```python\n<bool> = op.not_(<obj>)                                        # or, and, not (or/and missing)\n<bool> = op.eq/ne/lt/ge/is_/is_not/contains(<obj>, <obj>)      # ==, !=, <, >=, is, is not, in\n<obj>  = op.or_/xor/and_(<int/set>, <int/set>)                 # |, ^, &\n<int>  = op.lshift/rshift(<int>, <int>)                        # <<, >>\n<obj>  = op.add/sub/mul/truediv/floordiv/mod(<obj>, <obj>)     # +, -, *, /, //, %\n<num>  = op.neg/invert(<num>)                                  # -, ~\n<num>  = op.pow(<num>, <num>)                                  # **\n<func> = op.itemgetter/attrgetter/methodcaller(<obj> [, ...])  # [index/key], .name, .name([…])\n```\n\n```python\nelementwise_sum  = map(op.add, list_a, list_b)\nsorted_by_second = sorted(<coll>, key=op.itemgetter(1))\nsorted_by_both   = sorted(<coll>, key=op.itemgetter(1, 0))\nfirst_element    = op.methodcaller('pop', 0)(<list>)\n```\n* **Most operators call the object's special method that is named after them (second object is passed as an argument), while logical operators call their own code that relies on bool().**\n* **Comparisons can be chained: `'x < y < z'` gets converted to `'(x < y) and (y < z)`'.**\n\n\nMatch Statement\n---------------\n**Executes the first block with matching pattern. Added in Python 3.10.**\n\n```python\nmatch <object/expression>:\n    case <pattern> [if <condition>]:\n        <code>\n    ...\n```\n\n### Patterns\n```python\n<value_pattern> = 1/'abc'/True/None/math.pi        # Matches the literal or a dotted name.\n<class_pattern> = <type>()                         # Matches any object of that type (or ABC).\n<wildcard_patt> = _                                # Matches any object. Useful in last case.\n<capture_patt>  = <name>                           # Matches any object and binds it to name.\n<as_pattern>    = <pattern> as <name>              # Binds match to name. Also <type>(<name>).\n<or_pattern>    = <pattern> | <pattern> [| ...]    # Matches any of the patterns.\n<sequence_patt> = [<pattern>, ...]                 # Matches sequence with matching items.\n<mapping_patt>  = {<value_pattern>: <patt>, ...}   # Matches dictionary with matching items.\n<class_pattern> = <type>(<attr_name>=<patt>, ...)  # Matches object with matching attributes.\n```\n* **Sequence pattern can also be written as a tuple.**\n* **Use `'*<name>'` and `'**<name>'` in sequence/mapping patterns to bind remaining items.**\n* **Sequence pattern must match all items of the collection, while mapping pattern does not.**\n* **Patterns can be surrounded with brackets to override precedence (`'|'` > `'as'` > `','`).**\n* **Built-in types allow a single positional pattern that is matched against the entire object.**\n* **All names that are bound in the matching case, as well as variables initialized in its block, are visible after the match statement.**\n\n### Example\n```python\n>>> from pathlib import Path\n>>> match Path('/home/gto/python-cheatsheet/README.md'):\n...     case Path(\n...         parts=['/', 'home', user, *_]\n...     ) as p if p.name.lower().startswith('readme') and p.is_file():\n...         print(f'{p.name} is a readme file that belongs to user {user}.')\nREADME.md is a readme file that belongs to user gto.\n```\n\n\nLogging\n-------\n```python\nimport logging as log\n```\n\n```python\nlog.basicConfig(filename=<path>, level='DEBUG')   # Configures the root logger (see Setup).\nlog.debug/info/warning/error/critical(<str>)      # Sends message to the root logger.\n<Logger> = log.getLogger(__name__)                # Returns logger named after the module.\n<Logger>.<level>(<str>)                           # Sends message to the logger.\n<Logger>.exception(<str>)                         # Error() that appends caught exception.\n```\n\n### Setup\n```python\nlog.basicConfig(\n    filename=None,                                # Logs to stderr or appends to file.\n    format='%(levelname)s:%(name)s:%(message)s',  # Add '%(asctime)s' for local datetime.\n    level=log.WARNING,                            # Drops messages with lower priority.\n    handlers=[log.StreamHandler(sys.stderr)]      # Uses FileHandler if filename is set.\n)\n```\n\n```python\n<Formatter> = log.Formatter('<format>')           # Creates a Formatter.\n<Handler> = log.FileHandler(<path>, mode='a')     # Creates a Handler. Also `encoding=None`.\n<Handler>.setFormatter(<Formatter>)               # Adds Formatter to the Handler.\n<Handler>.setLevel(<int/str>)                     # Processes all messages by default.\n<Logger>.addHandler(<Handler>)                    # Adds Handler to the Logger.\n<Logger>.setLevel(<int/str>)                      # What is sent to its/ancestors' handlers.\n<Logger>.propagate = <bool>                       # Cuts off ancestors' handlers if False.\n```\n* **Parent logger can be specified by naming the child logger `'<parent>.<name>'`.**\n* **If logger doesn't have a set level, it inherits it from the first ancestor that does.**\n* **Formatter also accepts: pathname, filename, funcName, lineno, thread and process.**\n* **RotatingFileHandler creates and deletes files based on 'maxBytes', 'backupCount' args.**\n* **An object with `'filter(<LogRecord>)'` method (or the method itself) can be added to loggers and handlers via addFilter(). Message is dropped if filter() returns a false value.**\n\n#### Creates a logger that writes all messages to a file and sends them to the root's handler that prints warnings or higher:\n```python\n>>> logger = log.getLogger('my_module')\n>>> handler = log.FileHandler('test.log', encoding='utf-8')\n>>> handler.setFormatter(log.Formatter('%(asctime)s %(levelname)s:%(name)s:%(message)s'))\n>>> logger.addHandler(handler)\n>>> logger.setLevel('DEBUG')\n>>> log.basicConfig()\n>>> log.root.handlers[0].setLevel('WARNING')\n>>> logger.critical('Running out of disk space.')\nCRITICAL:my_module:Running out of disk space.\n>>> print(open('test.log').read())\n2023-02-07 23:21:01,430 CRITICAL:my_module:Running out of disk space.\n```\n\n\nIntrospection\n-------------\n```python\n<list> = dir()                      # Local names of variables, functions, classes and modules.\n<dict> = vars()                     # Dict of local names and their objects. Also locals().\n<dict> = globals()                  # Dict of global names and their objects, e.g. __builtin__.\n```\n\n```python\n<list> = dir(<obj>)                 # Returns names of object's attributes (including methods).\n<dict> = vars(<obj>)                # Returns dict of writable attributes. Also <obj>.__dict__.\n<bool> = hasattr(<obj>, '<name>')   # Checks if object possesses attribute with passed name.\nvalue  = getattr(<obj>, '<name>')   # Returns object's attribute or raises AttributeError.\nsetattr(<obj>, '<name>', value)     # Sets attribute. Only works on objects with __dict__ attr.\ndelattr(<obj>, '<name>')            # Deletes attribute from __dict__. Also `del <obj>.<name>`.\n```\n\n```python\n<Sig>  = inspect.signature(<func>)  # Returns a Signature object of the passed function.\n<dict> = <Sig>.parameters           # Returns dict of Parameters. Also <Sig>.return_annotation.\n<memb> = <Param>.kind               # Returns ParameterKind member (Parameter.KEYWORD_ONLY, …).\n<type> = <Param>.annotation         # Returns Parameter.empty if missing. Also <Param>.default.\n```\n\n\nThreading\n---------\n**CPython interpreter can only run a single thread at a time. Using multiple threads won't result in a faster execution, unless at least one of the threads contains an I/O operation.**\n```python\nfrom threading import Thread, Lock, RLock, Semaphore, Event, Barrier\nfrom concurrent.futures import ThreadPoolExecutor, as_completed\n```\n\n### Thread\n```python\n<Thread> = Thread(target=<function>)           # Use `args=<collection>` to set the arguments.\n<Thread>.start()                               # Starts the thread. Also <Thread>.is_alive().\n<Thread>.join()                                # Waits for the thread to finish.\n```\n* **Use `'kwargs=<dict>'` to pass keyword arguments to the function.**\n* **Use `'daemon=True'`, or the program will not be able to exit while the thread is alive.**\n\n### Lock\n```python\n<lock> = Lock/RLock()                          # RLock can only be released by acquirer.\n<lock>.acquire()                               # Waits for the lock to be available.\n<lock>.release()                               # Makes the lock available again.\n```\n\n#### Or:\n```python\nwith <lock>:                                   # Enters the block by calling acquire() and\n    ...                                        # exits it with release(), even on error.\n```\n\n### Semaphore, Event, Barrier\n```python\n<Semaphore> = Semaphore(value=1)               # Lock that can be acquired by 'value' threads.\n<Event>     = Event()                          # Method wait() blocks until set() is called.\n<Barrier>   = Barrier(n_times)                 # Wait() blocks until it's called n times.\n```\n\n### Queue\n```python\n<Queue> = queue.Queue(maxsize=0)               # A thread-safe first-in-first-out queue.\n<Queue>.put(<el>)                              # Blocks until queue stops being full.\n<Queue>.put_nowait(<el>)                       # Raises queue.Full exception if full.\n<el> = <Queue>.get()                           # Blocks until queue stops being empty.\n<el> = <Queue>.get_nowait()                    # Raises queue.Empty exception if empty.\n```\n\n### Thread Pool Executor\n```python\n<Exec> = ThreadPoolExecutor(max_workers=None)  # Or: `with ThreadPoolExecutor() as <name>: ...`\n<iter> = <Exec>.map(<func>, <args_1>, ...)     # Multithreaded and non-lazy map(). Keeps order.\n<Futr> = <Exec>.submit(<func>, <arg_1>, ...)   # Creates a thread and returns its Future obj.\n<Exec>.shutdown()                              # Blocks until all threads finish executing.\n```\n\n```python\n<bool> = <Future>.done()                       # Checks if the thread has finished executing.\n<obj>  = <Future>.result(timeout=None)         # Waits for thread to finish and returns result.\n<bool> = <Future>.cancel()                     # Cancels or returns False if running/finished.\n<iter> = as_completed(<coll_of_Futures>)       # `next(<iter>)` returns next completed Future.\n```\n* **Map() and as\\_completed() also accept 'timeout'. It causes futures.TimeoutError when next() is called/blocking. Map() times from original call and as_completed() from first call to next(). As\\_completed() fails if next() is called too late, even if all threads are done.**\n* **Exceptions that happen inside threads are raised when map iterator's next() or Future's result() are called. Future's exception() method returns exception object or None.**\n* **ProcessPoolExecutor provides true parallelism but: everything sent to/from workers must be [pickable](#pickle), queues must be sent using executor's 'initargs' and 'initializer' parameters, and executor should only be reachable via `'if __name__ == \"__main__\": ...'`.**\n\n\nCoroutines\n----------\n* **Coroutines have a lot in common with threads, but unlike threads, they only give up control when they call another coroutine and they don’t use as much memory.**\n* **Coroutine definition starts with `'async'` and its call with `'await'`.**\n* **Use `'asyncio.run(<coroutine>)'` to start the first/main coroutine.**\n\n```python\nimport asyncio as aio\n```\n\n```python\n<coro> = <async_function>(<args>)         # Creates a coroutine by calling async def function.\n<obj>  = await <coroutine>                # Starts the coroutine and returns its result.\n<task> = aio.create_task(<coroutine>)     # Schedules the coroutine for execution.\n<obj>  = await <task>                     # Returns coroutine's result. Also <task>.cancel().\n```\n\n```python\n<coro> = aio.gather(<coro/task>, ...)     # Schedules coros. Returns list of results on await.\n<coro> = aio.wait(<tasks>, …)             # `aio.ALL/FIRST_COMPLETED`. Returns (done, pending).\n<iter> = aio.as_completed(<coros/tasks>)  # Iterator of coros. All return next result on await.\n```\n\n#### Runs a terminal game where you control an asterisk that must avoid numbers:\n```python\nimport asyncio, collections, curses, curses.textpad, enum, random\n\nP = collections.namedtuple('P', 'x y')    # Position\nD = enum.Enum('D', 'n e s w')             # Direction\nW, H = 15, 7                              # Width, Height\n\ndef main(screen):\n    curses.curs_set(0)                    # Makes cursor invisible.\n    screen.nodelay(True)                  # Makes getch() non-blocking.\n    asyncio.run(main_coroutine(screen))   # Starts running asyncio code.\n\nasync def main_coroutine(screen):\n    moves = asyncio.Queue()\n    state = {'*': P(0, 0)} | {id_: P(W//2, H//2) for id_ in range(10)}\n    ai    = [random_controller(id_, moves) for id_ in range(10)]\n    mvc   = [human_controller(screen, moves), model(moves, state), view(state, screen)]\n    tasks = [asyncio.create_task(coro) for coro in ai + mvc]\n    await asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)\n\nasync def random_controller(id_, moves):\n    while True:\n        d = random.choice(list(D))\n        moves.put_nowait((id_, d))\n        await asyncio.sleep(random.triangular(0.01, 0.65))\n\nasync def human_controller(screen, moves):\n    while True:\n        key_mappings = {258: D.s, 259: D.n, 260: D.w, 261: D.e}\n        if d := key_mappings.get(screen.getch()):\n            moves.put_nowait(('*', d))\n        await asyncio.sleep(0.005)\n\nasync def model(moves, state):\n    while state['*'] not in (state[id_] for id_ in range(10)):\n        id_, d = await moves.get()\n        deltas = {D.n: P(0, -1), D.e: P(1, 0), D.s: P(0, 1), D.w: P(-1, 0)}\n        state[id_] = P((state[id_].x + deltas[d].x) % W, (state[id_].y + deltas[d].y) % H)\n\nasync def view(state, screen):\n    offset = P(curses.COLS//2 - W//2, curses.LINES//2 - H//2)\n    while True:\n        screen.erase()\n        curses.textpad.rectangle(screen, offset.y-1, offset.x-1, offset.y+H, offset.x+W)\n        for id_, p in state.items():\n            screen.addstr(offset.y + (p.y - state['*'].y + H//2) % H,\n                          offset.x + (p.x - state['*'].x + W//2) % W, str(id_))\n        screen.refresh()\n        await asyncio.sleep(0.005)\n\nif __name__ == '__main__':\n    curses.wrapper(main)\n```\n<br>\n\n\nLibraries\n=========\n\nProgress Bar\n------------\n```python\n# $ pip3 install tqdm\n>>> import tqdm, time\n>>> for el in tqdm.tqdm([1, 2, 3], desc='Processing'):\n...     time.sleep(1)\nProcessing: 100%|████████████████████| 3/3 [00:03<00:00,  1.00s/it]\n```\n\n\nPlot\n----\n```python\n# $ pip3 install matplotlib\nimport matplotlib.pyplot as plt\n\nplt.plot/bar/scatter(x_data, y_data [, label=<str>])  # Also plt.plot(y_data).\nplt.legend()                                          # Adds a legend.\nplt.title/xlabel/ylabel(<str>)                        # Adds a title or label.\nplt.savefig(<path>)                                   # Saves the plot.\nplt.show()                                            # Displays the plot.\nplt.clf()                                             # Clears the plot.\n```\n\n\nTable\n-----\n#### Prints a CSV spreadsheet to the console:\n```python\n# $ pip3 install tabulate\nimport csv, tabulate\nwith open('test.csv', encoding='utf-8', newline='') as file:\n    rows = list(csv.reader(file))\nprint(tabulate.tabulate(rows, headers='firstrow'))\n```\n\n\nConsole App\n-----------\n#### Runs a basic file explorer in the console:\n```python\n# $ pip3 install windows-curses\nimport curses, os\nfrom curses import A_REVERSE, KEY_DOWN, KEY_UP, KEY_LEFT, KEY_RIGHT, KEY_ENTER\n\ndef main(screen):\n    ch, first, selected, paths = 0, 0, 0, os.listdir()\n    while ch != ord('q'):\n        height, width = screen.getmaxyx()\n        screen.erase()\n        for y, filename in enumerate(paths[first : first+height]):\n            color = A_REVERSE if filename == paths[selected] else 0\n            screen.addnstr(y, 0, filename, width-1, color)\n        ch = screen.getch()\n        selected += (ch == KEY_DOWN) - (ch == KEY_UP)\n        selected = max(0, min(len(paths)-1, selected))\n        first += (selected >= first + height) - (selected < first)\n        if ch in [KEY_LEFT, KEY_RIGHT, KEY_ENTER, ord('\\n'), ord('\\r')]:\n            new_dir = '..' if ch == KEY_LEFT else paths[selected]\n            if os.path.isdir(new_dir):\n                os.chdir(new_dir)\n                first, selected, paths = 0, 0, os.listdir()\n\nif __name__ == '__main__':\n    curses.wrapper(main)\n```\n\n\nGUI App\n-------\n#### A weight converter GUI application:\n\n```python\n# $ pip3 install PySimpleGUI\nimport PySimpleGUI as sg\n\ntext_box = sg.Input(default_text='100', enable_events=True, key='-QUANTITY-')\ndropdown = sg.InputCombo(['g', 'kg', 't'], 'kg', readonly=True, enable_events=True, k='-UNIT-')\nlabel    = sg.Text('100 kg is 220.462 lbs.', key='-OUTPUT-')\nbutton   = sg.Button('Close')\nwindow   = sg.Window('Weight Converter', [[text_box, dropdown], [label], [button]])\n\nwhile True:\n    event, values = window.read()\n    if event in [sg.WIN_CLOSED, 'Close']:\n        break\n    try:\n        quantity = float(values['-QUANTITY-'])\n    except ValueError:\n        continue\n    unit = values['-UNIT-']\n    factors = {'g': 0.001, 'kg': 1, 't': 1000}\n    lbs = quantity * factors[unit] / 0.45359237\n    window['-OUTPUT-'].update(value=f'{quantity} {unit} is {lbs:g} lbs.')\nwindow.close()\n```\n\n\nScraping\n--------\n#### Scrapes Python's URL and logo from its Wikipedia page:\n```python\n# $ pip3 install requests beautifulsoup4\nimport requests, bs4, os\n\nresponse   = requests.get('https://en.wikipedia.org/wiki/Python_(programming_language)')\ndocument   = bs4.BeautifulSoup(response.text, 'html.parser')\ntable      = document.find('table', class_='infobox vevent')\npython_url = table.find('th', text='Website').next_sibling.a['href']\nlogo_url   = table.find('img')['src']\nfilename   = os.path.basename(logo_url)\nwith open(filename, 'wb') as file:\n    file.write(requests.get(f'https:{logo_url}').content)\nprint(f'{python_url}, file://{os.path.abspath(filename)}')\n```\n\n### Selenium\n**Library for scraping websites with dynamic content.**\n```python\n# $ pip3 install selenium\nfrom selenium import webdriver\n\n<WebDrv> = webdriver.Chrome/Firefox/Safari/Edge()     # Opens a browser. Also <WebDrv>.quit().\n<WebDrv>.get('<url>')                                 # Also <WebDrv>.implicitly_wait(seconds).\n<str>  = <WebDrv>.page_source                         # Returns HTML of fully rendered page.\n<El>   = <WebDrv/El>.find_element('css selector', …)  # '<tag>#<id>.<class>[<attr>=\"<val>\"]…'.\n<list> = <WebDrv/El>.find_elements('xpath', …)        # '//<tag>[@<attr>=\"<val>\"]…'. See XPath.\n<str>  = <El>.get_attribute(<str>)                    # Property if exists. Also <El>.text.\n<El>.click/clear()                                    # Also <El>.send_keys(<str>).\n```\n\n#### XPath — also available in lxml, Scrapy, and browser's console via `'$x(\"<xpath>\")'`:\n```python\n<xpath>     = //<element>[/ or // <element>]          # /<child>, //<descendant>, /../<sibling>\n<xpath>     = //<element>/following::<element>        # Next element. Also preceding/parent/…\n<element>   = <tag><conditions><index>                # `<tag> = */a/…`, `<index> = [1/2/…]`.\n<condition> = [<sub_cond> [and/or <sub_cond>]]        # For negation use `not(<sub_cond>)`.\n<sub_cond>  = @<attr>[=\"<val>\"]                       # `text()=`, `.=` match (complete) text.\n<sub_cond>  = contains(@<attr>, \"<val>\")              # Is <val> a substring of attr's value?\n<sub_cond>  = [//]<element>                           # Has matching child? Descendant if //.\n```\n\n\nWeb App\n-------\n**Flask is a micro web framework/server. If you just want to open a html file in a web browser use `'webbrowser.open(<path>)'` instead.**\n```python\n# $ pip3 install flask\nimport flask as fl\n```\n\n```python\napp = fl.Flask(__name__)                   # Returns the app object. Put at the top.\napp.run(host=None, port=None, debug=None)  # Or: $ flask --app FILE run [--ARG[=VAL]]…\n```\n* **Starts the app at `'http://localhost:5000'`. Use `'host=\"0.0.0.0\"'` to run externally.**\n* **Install a WSGI server like [Waitress](https://flask.palletsprojects.com/en/latest/deploying/waitress/) and a HTTP server such as [Nginx](https://flask.palletsprojects.com/en/latest/deploying/nginx/) for better security.**\n* **Debug mode restarts the app whenever script changes and displays errors in the browser.**\n\n### Static Request\n```python\n@app.route('/img/<path:filename>')\ndef serve_file(filename):\n    return fl.send_from_directory('dirname/', filename)\n```\n\n### Dynamic Request\n```python\n@app.route('/<sport>')\ndef serve_html(sport):\n    return fl.render_template_string('<h1>{{title}}</h1>', title=sport)\n```\n* **`'fl.render_template(filename, <kwargs>)'` renders a file located in 'templates' dir.**\n* **`'fl.abort(<int>)'` returns error code and `'return fl.redirect(<url>)'` redirects.**\n* **`'fl.request.args[<str>]'` returns parameter from the query string (URL right of '?').**\n* **`'fl.session[<str>] = <obj>'` stores session data. It requires secret key to be set at the startup with `'app.secret_key = <str>'`.**\n\n### REST Request\n```python\n@app.post('/<sport>/odds')\ndef serve_json(sport):\n    team = fl.request.form['team']\n    return {'team': team, 'odds': [2.09, 3.74, 3.68]}\n```\n\n#### Starts the app in its own thread and queries its REST API:\n```python\n# $ pip3 install requests\n>>> import threading, requests\n>>> threading.Thread(target=app.run, daemon=True).start()\n>>> url = 'http://localhost:5000/football/odds'\n>>> response = requests.post(url, data={'team': 'arsenal f.c.'})\n>>> response.json()\n{'team': 'arsenal f.c.', 'odds': [2.09, 3.74, 3.68]}\n```\n\n\nProfiling\n---------\n\n```python\nfrom time import perf_counter\nstart_time = perf_counter()\n...\nduration_in_seconds = perf_counter() - start_time\n```\n\n### Timing a Snippet\n```python\n>>> from timeit import timeit\n>>> timeit('list(range(10000))', number=1000, globals=globals(), setup='pass')\n0.19373\n```\n\n### Profiling by Line\n```text\n$ pip3 install line_profiler\n$ echo '@profile\ndef main():\n    a = list(range(10000))\n    b = set(range(10000))\nmain()' > test.py\n$ kernprof -lv test.py\nLine #      Hits         Time  Per Hit   % Time  Line Contents\n==============================================================\n     1                                           @profile\n     2                                           def main():\n     3         1        253.4    253.4     32.2      a = list(range(10000))\n     4         1        534.1    534.1     67.8      b = set(range(10000))\n```\n\n### Call and Flame Graphs\n```bash\n$ apt/brew install graphviz && pip3 install gprof2dot snakeviz  # Or download installer.\n$ tail --lines=+2 test.py > test.py                             # Removes first line.\n$ python3 -m cProfile -o test.prof test.py                      # Runs built-in profiler.\n$ gprof2dot --format=pstats test.prof | dot -T png -o test.png  # Generates call graph.\n$ xdg-open/open test.png                                        # Displays call graph.\n$ snakeviz test.prof                                            # Displays flame graph.\n```\n\n### Sampling and Memory Profilers\n```text\n+--------------+------------+-------------------------------+-------+------+\n| pip3 install |   Target   |          How to run           | Lines | Live |\n+--------------+------------+-------------------------------+-------+------+\n| pyinstrument |    CPU     | pyinstrument test.py          |  No   | No   |\n| py-spy       |    CPU     | py-spy top -- python3 test.py |  No   | Yes  |\n| scalene      | CPU+Memory | scalene test.py               |  Yes  | No   |\n| memray       |   Memory   | memray run --live test.py     |  Yes  | Yes  |\n+--------------+------------+-------------------------------+-------+------+\n```\n\n\nNumPy\n-----\n**Array manipulation mini-language. It can run up to one hundred times faster than the equivalent Python code. An even faster alternative that runs on a GPU is called CuPy.**\n\n```python\n# $ pip3 install numpy\nimport numpy as np\n```\n\n```python\n<array> = np.array(<list/list_of_lists/…>)              # Returns a 1d/2d/… NumPy array.\n<array> = np.zeros/ones/empty(<shape>)                  # Also np.full(<shape>, <el>).\n<array> = np.arange(from_inc, to_exc, ±step)            # Also np.linspace(start, stop, len).\n<array> = np.random.randint(from_inc, to_exc, <shape>)  # Also np.random.random(<shape>).\n```\n\n```python\n<view>  = <array>.reshape(<shape>)                      # Also `<array>.shape = <shape>`.\n<array> = <array>.flatten()                             # Also `<view> = <array>.ravel()`.\n<view>  = <array>.transpose()                           # Or: <array>.T\n```\n\n```python\n<array> = np.copy/abs/sqrt/log/int64(<array>)           # Returns new array of the same shape.\n<array> = <array>.sum/max/mean/argmax/all(axis)         # Aggregates specified dimension.\n<array> = np.apply_along_axis(<func>, axis, <array>)    # Func can return a scalar or array.\n```\n\n```python\n<array> = np.concatenate(<list_of_arrays>, axis=0)      # Links arrays along first axis (rows).\n<array> = np.vstack/column_stack(<list_of_arrays>)      # Treats 1d arrays as rows or columns.\n<array> = np.tile/repeat(<array>, <int/list> [, axis])  # Tiles array or repeats its elements.\n```\n* **Shape is a tuple of dimension sizes. A 100x50 RGB image has shape (50, 100, 3).**\n* **Axis is an index of a dimension. Leftmost dimension has index 0. Summing the RGB image along axis 2 will return a greyscale image with shape (50, 100).**\n\n### Indexing\n```perl\n<el>       = <2d>[row_index, col_index]                 # Or: <3d>[<int>, <int>, <int>]\n<1d_view>  = <2d>[row_index]                            # Or: <3d>[<int>, <int>, <slice>]\n<1d_view>  = <2d>[:, col_index]                         # Or: <3d>[<int>, <slice>, <int>]\n<2d_view>  = <2d>[from:to_row_i, from:to_col_i]         # Or: <3d>[<int>, <slice>, <slice>]\n```\n\n```perl\n<1d_array> = <2d>[row_indices, col_indices]             # Or: <3d>[<int/1d>, <1d>, <1d>]\n<2d_array> = <2d>[row_indices]                          # Or: <3d>[<int/1d>, <1d>, <slice>]\n<2d_array> = <2d>[:, col_indices]                       # Or: <3d>[<int/1d>, <slice>, <1d>]\n<2d_array> = <2d>[np.ix_(row_indices, col_indices)]     # Or: <3d>[<int/1d/2d>, <2d>, <2d>]\n```\n\n```perl\n<2d_bools> = <2d> > <el/1d/2d>                          # 1d object must have size of a row.\n<1/2d_arr> = <2d>[<2d/1d_bools>]                        # 1d_bools must have size of a column.\n```\n* **`':'` returns a slice of all dimension's indices. Omitted dimensions default to `':'`.**\n* **Python converts `'obj[i, j]'` to `'obj[(i, j)]'`. This makes `'<2d>[row_i, col_i]'` and `'<2d>[row_indices]'` indistinguishable to NumPy if tuple of indices is passed!**\n* **Indexing with a slice and 1d object works the same as when using two slices (lines 4, 6, 7).**\n* **`'ix_([1, 2], [3, 4])'` returns `'[[1], [2]]'` and `'[[3, 4]]'`. Due to broadcasting rules, this is the same as using `'[[1, 1], [2, 2]]'` and `'[[3, 4], [3, 4]]'`.**\n* **Any value that is broadcastable to the indexed shape can be assigned to the selection.**\n\n### Broadcasting\n**A set of rules by which NumPy functions operate on arrays of different shapes.**\n```python\nleft  = np.array([0.1,  0.6,  0.8])                     # `left.shape  == (3,)`\nright = np.array([[0.1], [0.6], [0.8]])                 # `right.shape == (3, 1)`\n```\n\n#### 1. If array shapes differ in length, left-pad the shorter shape with ones:\n```python\nleft  = np.array([[0.1,  0.6,  0.8]])                   # `left.shape  == (1, 3)`\nright = np.array([[0.1], [0.6], [0.8]])                 # `right.shape == (3, 1)`\n```\n\n#### 2. If any dimensions differ in size, expand the ones that have size 1 by duplicating their elements:\n```python\nleft  = np.array([[0.1,  0.6,  0.8],                    # `left.shape  == (3, 3)`\n                  [0.1,  0.6,  0.8],\n                  [0.1,  0.6,  0.8]])\n\nright = np.array([[0.1,  0.1,  0.1],                    # `right.shape == (3, 3)`\n                  [0.6,  0.6,  0.6],\n                  [0.8,  0.8,  0.8]])\n```\n\n### Example\n#### For each point returns index of its nearest point (`[0.1, 0.6, 0.8] => [1, 2, 1]`):\n\n```python\n>>> print(points := np.array([0.1, 0.6, 0.8]))\n[0.1  0.6  0.8]\n>>> print(wrapped_points := points.reshape(3, 1))\n[[0.1]\n [0.6]\n [0.8]]\n>>> print(deltas := points - wrapped_points)\n[[ 0.   0.5  0.7]\n [-0.5  0.   0.2]\n [-0.7 -0.2  0. ]]\n>>> deltas[range(3), range(3)] = np.inf\n>>> print(distances := np.abs(deltas))\n[[inf  0.5  0.7]\n [0.5  inf  0.2]\n [0.7  0.2  inf]]\n>>> print(distances.argmin(axis=1))\n[1 2 1]\n```\n\n\nImage\n-----\n```python\n# $ pip3 install pillow\nfrom PIL import Image\n```\n\n```python\n<Image> = Image.new('<mode>', (width, height))  # Creates new image. Also `color=<int/tuple>`.\n<Image> = Image.open(<path>)                    # Identifies format based on file's contents.\n<Image> = <Image>.convert('<mode>')             # Converts image to the new mode (see Modes).\n<Image>.save(<path>)                            # Selects format based on extension (PNG/JPG…).\n<Image>.show()                                  # Displays image in default preview app.\n```\n\n```python\n<int/tup> = <Image>.getpixel((x, y))            # Returns pixel's value (its color).\n<ImgCore> = <Image>.getdata()                   # Returns a flattened view of pixel values.\n<Image>.putpixel((x, y), <int/tuple>)           # Updates pixel's value. Clips passed int/s.\n<Image>.putdata(<list/ImgCore>)                 # Updates pixels with a copy of the sequence.\n<Image>.paste(<Image>, (x, y))                  # Draws passed image at the specified location.\n```\n\n```python\n<Image> = <Image>.filter(<Filter>)              # Use ImageFilter.<name>(<args>) for Filter.\n<Image> = <Enhance>.enhance(<float>)            # Use ImageEnhance.<name>(<Image>) for Enhance.\n```\n\n```python\n<array> = np.array(<Image>)                     # Creates a 2d/3d NumPy array from the image.\n<Image> = Image.fromarray(np.uint8(<array>))    # Use <array>.clip(0, 255) to clip the values.\n```\n\n### Modes\n* **`'L'` - Lightness (greyscale image). Each pixel is an int between 0 and 255.**\n* **`'RGB'` - Red, green, blue (true color image). Each pixel is a tuple of three ints.**\n* **`'RGBA'` - RGB with alpha. Low alpha (i.e. forth int) makes pixels more transparent.**\n* **`'HSV'` - Hue, saturation, value. Three ints representing color in HSV color space.**\n\n\n### Examples\n#### Creates a PNG image of a rainbow gradient:\n```python\nWIDTH, HEIGHT = 100, 100\nn_pixels = WIDTH * HEIGHT\nhues = (255 * i/n_pixels for i in range(n_pixels))\nimg = Image.new('HSV', (WIDTH, HEIGHT))\nimg.putdata([(int(h), 255, 255) for h in hues])\nimg.convert('RGB').save('test.png')\n```\n\n#### Adds noise to the PNG image and displays it:\n```python\nfrom random import randint\nadd_noise = lambda value: max(0, min(255, value + randint(-20, 20)))\nimg = Image.open('test.png').convert('HSV')\nimg.putdata([(add_noise(h), s, v) for h, s, v in img.getdata()])\nimg.show()\n```\n\n### Image Draw\n```python\nfrom PIL import ImageDraw\n<Draw> = ImageDraw.Draw(<Image>)                # Object for adding 2D graphics to the image.\n<Draw>.point((x, y))                            # Draws a point. Truncates floats into ints.\n<Draw>.line((x1, y1, x2, y2 [, ...]))           # To get anti-aliasing use Image's resize().\n<Draw>.arc((x1, y1, x2, y2), deg1, deg2)        # Draws in clockwise dir. Also pieslice().\n<Draw>.rectangle((x1, y1, x2, y2))              # Also rounded_rectangle(), regular_polygon().\n<Draw>.polygon((x1, y1, x2, y2, ...))           # Last point gets connected to the first.\n<Draw>.ellipse((x1, y1, x2, y2))                # To rotate use Image's rotate() and paste().\n<Draw>.text((x, y), <str>, font=<Font>)         # `<Font> = ImageFont.truetype(<path>, size)`.\n```\n* **Use `'fill=<color>'` to set the primary color.**\n* **Use `'width=<int>'` to set the width of lines or contours.**\n* **Use `'outline=<color>'` to set the color of the contours.**\n* **Color can be an int, tuple, `'#rrggbb[aa]'` string or a color name.**\n\n\nAnimation\n---------\n#### Creates a GIF of a bouncing ball:\n```python\n# $ pip3 install imageio\nfrom PIL import Image, ImageDraw\nimport imageio\n\nWIDTH, HEIGHT, R = 126, 126, 10\nframes = []\nfor velocity in range(1, 16):\n    y = sum(range(velocity))\n    frame = Image.new('L', (WIDTH, HEIGHT))\n    draw = ImageDraw.Draw(frame)\n    draw.ellipse((WIDTH/2-R, y, WIDTH/2+R, y+R*2), fill='white')\n    frames.append(frame)\nframes += reversed(frames[1:-1])\nimageio.mimsave('test.gif', frames, duration=0.03)\n```\n\n\nAudio\n-----\n```python\nimport wave\n```\n\n```python\n<Wave>  = wave.open('<path>')         # Opens the WAV file for reading.\n<int>   = <Wave>.getframerate()       # Returns number of frames per second.\n<int>   = <Wave>.getnchannels()       # Returns number of samples per frame.\n<int>   = <Wave>.getsampwidth()       # Returns number of bytes per sample.\n<tuple> = <Wave>.getparams()          # Returns namedtuple of all parameters.\n<bytes> = <Wave>.readframes(nframes)  # Returns next n frames (-1 returns all).\n```\n\n```python\n<Wave> = wave.open('<path>', 'wb')    # Creates/truncates a file for writing.\n<Wave>.setframerate(<int>)            # Pass 44100 for CD, 48000 for video.\n<Wave>.setnchannels(<int>)            # Pass 1 for mono, 2 for stereo.\n<Wave>.setsampwidth(<int>)            # Pass 2 for CD, 3 for hi-res sound.\n<Wave>.setparams(<tuple>)             # Tuple must contain all parameters.\n<Wave>.writeframes(<bytes>)           # Appends frames to the file.\n```\n* **Bytes object contains a sequence of frames, each consisting of one or more samples.**\n* **In a stereo signal, the first sample of a frame belongs to the left channel.**\n* **Each sample consists of one or more bytes that, when converted to an integer, indicate the displacement of a speaker membrane at a given moment.**\n* **If sample width is one byte, then the integer should be encoded unsigned. For all other sizes, the integer should be encoded signed with little-endian byte order.**\n\n### Sample Values\n```text\n+-----------+-----------+------+-----------+\n| sampwidth |    min    | zero |    max    |\n+-----------+-----------+------+-----------+\n|     1     |         0 |  128 |       255 |\n|     2     |    -32768 |    0 |     32767 |\n|     3     |  -8388608 |    0 |   8388607 |\n+-----------+-----------+------+-----------+\n```\n\n### Read Float Samples from WAV File\n```python\ndef read_wav_file(filename):\n    def get_int(bytes_obj):\n        an_int = int.from_bytes(bytes_obj, 'little', signed=(p.sampwidth != 1))\n        return an_int - 128 * (p.sampwidth == 1)\n    with wave.open(filename) as file:\n        p = file.getparams()\n        frames = file.readframes(-1)\n    bytes_samples = (frames[i : i + p.sampwidth] for i in range(0, len(frames), p.sampwidth))\n    return [get_int(b) / pow(2, (p.sampwidth * 8) - 1) for b in bytes_samples], p\n```\n\n### Write Float Samples to WAV File\n```python\ndef write_to_wav_file(filename, samples_f, p=None, nchannels=1, sampwidth=2, framerate=44100):\n    def get_bytes(a_float):\n        a_float = max(-1, min(1 - 2e-16, a_float))\n        a_float += p.sampwidth == 1\n        a_float *= pow(2, (p.sampwidth * 8) - 1)\n        return int(a_float).to_bytes(p.sampwidth, 'little', signed=(p.sampwidth != 1))\n    if p is None:\n        p = wave._wave_params(nchannels, sampwidth, framerate, 0, 'NONE', 'not compressed')\n    with wave.open(filename, 'wb') as file:\n        file.setparams(p)\n        file.writeframes(b''.join(get_bytes(f) for f in samples_f))\n```\n\n### Examples\n#### Saves a 440 Hz sine wave to a mono WAV file:\n```python\nfrom math import pi, sin\nsamples_f = (sin(i * 2 * pi * 440 / 44100) for i in range(100_000))\nwrite_to_wav_file('test.wav', samples_f)\n```\n\n#### Adds noise to the WAV file:\n```python\nfrom random import uniform\nsamples_f, params = read_wav_file('test.wav')\nsamples_f = (f + uniform(-0.05, 0.05) for f in samples_f)\nwrite_to_wav_file('test.wav', samples_f, params)\n```\n\n#### Plays the WAV file:\n```python\n# $ pip3 install simpleaudio\nfrom simpleaudio import play_buffer\nwith wave.open('test.wav') as file:\n    p = file.getparams()\n    frames = file.readframes(-1)\n    play_buffer(frames, p.nchannels, p.sampwidth, p.framerate).wait_done()\n```\n\n### Text to Speech\n```python\n# $ pip3 install pyttsx3\nimport pyttsx3\nengine = pyttsx3.init()\nengine.say('Sally sells seashells by the seashore.')\nengine.runAndWait()\n```\n\n\nSynthesizer\n-----------\n#### Plays Popcorn by Gershon Kingsley:\n```python\n# $ pip3 install simpleaudio\nimport array, itertools as it, math, simpleaudio\n\nF  = 44100\nP1 = '71♩,69♪,,71♩,66♪,,62♩,66♪,,59♩,,,71♩,69♪,,71♩,66♪,,62♩,66♪,,59♩,,,'\nP2 = '71♩,73♪,,74♩,73♪,,74♪,,71♪,,73♩,71♪,,73♪,,69♪,,71♩,69♪,,71♪,,67♪,,71♩,,,'\nget_pause   = lambda seconds: it.repeat(0, int(seconds * F))\nsin_f       = lambda i, hz: math.sin(i * 2 * math.pi * hz / F)\nget_wave    = lambda hz, seconds: (sin_f(i, hz) for i in range(int(seconds * F)))\nget_hz      = lambda note: 440 * 2 ** ((int(note[:2]) - 69) / 12)\nget_sec     = lambda note: 1/4 if '♩' in note else 1/8\nget_samples = lambda note: get_wave(get_hz(note), get_sec(note)) if note else get_pause(1/8)\nsamples_f   = it.chain.from_iterable(get_samples(n) for n in (P1+P2).split(','))\nsamples_i   = array.array('h', (int(f * 30000) for f in samples_f))\nsimpleaudio.play_buffer(samples_i, 1, 2, F).wait_done()\n```\n\n\nPygame\n------\n#### Opes a window and draws a square that can be moved with arrow keys:\n```python\n# $ pip3 install pygame\nimport pygame as pg\n\npg.init()\nscreen = pg.display.set_mode((500, 500))\nrect = pg.Rect(240, 240, 20, 20)\nwhile not pg.event.get(pg.QUIT):\n    deltas = {pg.K_UP: (0, -20), pg.K_RIGHT: (20, 0), pg.K_DOWN: (0, 20), pg.K_LEFT: (-20, 0)}\n    for event in pg.event.get(pg.KEYDOWN):\n        dx, dy = deltas.get(event.key, (0, 0))\n        rect = rect.move((dx, dy))\n    screen.fill(pg.Color('black'))\n    pg.draw.rect(screen, pg.Color('white'), rect)\n    pg.display.flip()\npg.quit()\n```\n\n### Rect\n**Object for storing rectangular coordinates.**\n```python\n<Rect> = pg.Rect(x, y, width, height)           # Creates Rect object. Truncates passed floats.\n<int>  = <Rect>.x/y/centerx/centery/…           # Top, right, bottom, left. Allows assignments.\n<tup.> = <Rect>.topleft/center/…                # Topright, bottomright, bottomleft. Same.\n<Rect> = <Rect>.move((delta_x, delta_y))        # Use move_ip() to move in-place.\n```\n\n```python\n<bool> = <Rect>.collidepoint((x, y))            # Checks if rectangle contains the point.\n<bool> = <Rect>.colliderect(<Rect>)             # Checks if the two rectangles overlap.\n<int>  = <Rect>.collidelist(<list_of_Rect>)     # Returns index of first colliding Rect or -1.\n<list> = <Rect>.collidelistall(<list_of_Rect>)  # Returns indices of all colliding rectangles.\n```\n\n### Surface\n**Object for representing images.**\n```python\n<Surf> = pg.display.set_mode((width, height))   # Opens new window and returns its surface.\n<Surf> = pg.Surface((width, height))            # New RGB surface. RGBA if `flags=pg.SRCALPHA`.\n<Surf> = pg.image.load(<path/file>)             # Loads the image. Format depends on source.\n<Surf> = pg.surfarray.make_surface(<np_array>)  # Also `<np_arr> = surfarray.pixels3d(<Surf>)`.\n<Surf> = <Surf>.subsurface(<Rect>)              # Creates a new surface from the cutout.\n```\n\n```python\n<Surf>.fill(color)                              # Tuple, Color('#rrggbb[aa]') or Color(<name>).\n<Surf>.set_at((x, y), color)                    # Updates pixel. Also <Surf>.get_at((x, y)).\n<Surf>.blit(<Surf>, (x, y))                     # Draws passed surface at specified location.\n```\n\n```python\nfrom pygame.transform import scale, ...\n<Surf> = scale(<Surf>, (width, height))         # Returns scaled surface.\n<Surf> = rotate(<Surf>, anticlock_degrees)      # Returns rotated and scaled surface.\n<Surf> = flip(<Surf>, x_bool, y_bool)           # Returns flipped surface.\n```\n\n```python\nfrom pygame.draw import line, ...\nline(<Surf>, color, (x1, y1), (x2, y2), width)  # Draws a line to the surface.\narc(<Surf>, color, <Rect>, from_rad, to_rad)    # Also ellipse(<Surf>, color, <Rect>, width=0).\nrect(<Surf>, color, <Rect>, width=0)            # Also polygon(<Surf>, color, points, width=0).\n```\n\n```python\n<Font> = pg.font.Font(<path/file>, size)        # Loads TTF file. Pass None for default font.\n<Surf> = <Font>.render(text, antialias, color)  # Background color can be specified at the end.\n```\n\n### Sound\n```python\n<Sound> = pg.mixer.Sound(<path/file/bytes>)     # WAV file or bytes/array of signed shorts.\n<Sound>.play/stop()                             # Also set_volume(<float>), fadeout(msec).\n```\n\n### Basic Mario Brothers Example\n```python\nimport collections, dataclasses, enum, io, itertools as it, pygame as pg, urllib.request\nfrom random import randint\n\nP = collections.namedtuple('P', 'x y')          # Position\nD = enum.Enum('D', 'n e s w')                   # Direction\nW, H, MAX_S = 50, 50, P(5, 10)                  # Width, Height, Max speed\n\ndef main():\n    def get_screen():\n        pg.init()\n        return pg.display.set_mode((W*16, H*16))\n    def get_images():\n        url = 'https://gto76.github.io/python-cheatsheet/web/mario_bros.png'\n        img = pg.image.load(io.BytesIO(urllib.request.urlopen(url).read()))\n        return [img.subsurface(get_rect(x, 0)) for x in range(img.get_width() // 16)]\n    def get_mario():\n        Mario = dataclasses.make_dataclass('Mario', 'rect spd facing_left frame_cycle'.split())\n        return Mario(get_rect(1, 1), P(0, 0), False, it.cycle(range(3)))\n    def get_tiles():\n        border = [(x, y) for x in range(W) for y in range(H) if x in [0, W-1] or y in [0, H-1]]\n        platforms = [(randint(1, W-2), randint(2, H-2)) for _ in range(W*H // 10)]\n        return [get_rect(x, y) for x, y in border + platforms]\n    def get_rect(x, y):\n        return pg.Rect(x*16, y*16, 16, 16)\n    run(get_screen(), get_images(), get_mario(), get_tiles())\n\ndef run(screen, images, mario, tiles):\n    clock = pg.time.Clock()\n    pressed = set()\n    while not pg.event.get(pg.QUIT) and clock.tick(28):\n        keys = {pg.K_UP: D.n, pg.K_RIGHT: D.e, pg.K_DOWN: D.s, pg.K_LEFT: D.w}\n        pressed |= {keys.get(e.key) for e in pg.event.get(pg.KEYDOWN)}\n        pressed -= {keys.get(e.key) for e in pg.event.get(pg.KEYUP)}\n        update_speed(mario, tiles, pressed)\n        update_position(mario, tiles)\n        draw(screen, images, mario, tiles)\n\ndef update_speed(mario, tiles, pressed):\n    x, y = mario.spd\n    x += 2 * ((D.e in pressed) - (D.w in pressed))\n    x += (x < 0) - (x > 0)\n    y += 1 if D.s not in get_boundaries(mario.rect, tiles) else (D.n in pressed) * -10\n    mario.spd = P(x=max(-MAX_S.x, min(MAX_S.x, x)), y=max(-MAX_S.y, min(MAX_S.y, y)))\n\ndef update_position(mario, tiles):\n    x, y = mario.rect.topleft\n    n_steps = max(abs(s) for s in mario.spd)\n    for _ in range(n_steps):\n        mario.spd = stop_on_collision(mario.spd, get_boundaries(mario.rect, tiles))\n        x, y = x + (mario.spd.x / n_steps), y + (mario.spd.y / n_steps)\n        mario.rect.topleft = x, y\n\ndef get_boundaries(rect, tiles):\n    deltas = {D.n: P(0, -1), D.e: P(1, 0), D.s: P(0, 1), D.w: P(-1, 0)}\n    return {d for d, delta in deltas.items() if rect.move(delta).collidelist(tiles) != -1}\n\ndef stop_on_collision(spd, bounds):\n    return P(x=0 if (D.w in bounds and spd.x < 0) or (D.e in bounds and spd.x > 0) else spd.x,\n             y=0 if (D.n in bounds and spd.y < 0) or (D.s in bounds and spd.y > 0) else spd.y)\n\ndef draw(screen, images, mario, tiles):\n    screen.fill((85, 168, 255))\n    mario.facing_left = mario.spd.x < 0 if mario.spd.x else mario.facing_left\n    is_airborne = D.s not in get_boundaries(mario.rect, tiles)\n    image_index = 4 if is_airborne else (next(mario.frame_cycle) if mario.spd.x else 6)\n    screen.blit(images[image_index + (mario.facing_left * 9)], mario.rect)\n    for t in tiles:\n        is_border = t.x in [0, (W-1)*16] or t.y in [0, (H-1)*16]\n        screen.blit(images[18 if is_border else 19], t)\n    pg.display.flip()\n\nif __name__ == '__main__':\n    main()\n```\n\n\nPandas\n------\n**Data analysis library. For examples see [Plotly](#plotly).**\n\n```python\n# $ pip3 install pandas matplotlib\nimport pandas as pd, matplotlib.pyplot as plt\n```\n\n### Series\n**Ordered dictionary with a name.**\n\n```python\n>>> s = pd.Series([1, 2], index=['x', 'y'], name='a'); s\nx    1\ny    2\nName: a, dtype: int64\n```\n\n```python\n<S>  = pd.Series(<list>)                       # Uses list's indices for 'index'.\n<S>  = pd.Series(<dict>)                       # Uses dictionary's keys for 'index'.\n```\n\n```python\n<el> = <S>.loc[key]                            # Or: <S>.iloc[i]\n<S>  = <S>.loc[coll_of_keys]                   # Or: <S>.iloc[coll_of_i]\n<S>  = <S>.loc[from_key : to_key_inc]          # Or: <S>.iloc[from_i : to_i_exc]\n```\n\n```python\n<el> = <S>[key/i]                              # Or: <S>.<key>\n<S>  = <S>[coll_of_keys/coll_of_i]             # Or: <S>[key/i : key/i]\n<S>  = <S>[bools]                              # Or: <S>.loc/iloc[bools]\n```\n\n```python\n<S>  = <S> > <el/S>                            # Returns S of bools. Pairs items by keys.\n<S>  = <S> + <el/S>                            # Items with non-matching keys get value NaN.\n```\n\n```python\n<S> = pd.concat(<coll_of_S>)                   # Concats multiple series into one long Series.\n<S> = <S>.combine_first(<S>)                   # Adds items that are not yet present.\n<S>.update(<S>)                                # Updates items that are already present.\n```\n\n```python\n<S>.plot.line/area/bar/pie/hist()              # Generates a plot. `plt.show()` displays it.\n```\n* **Indexing objects can't be tuples because `'obj[x, y]'` is converted to `'obj[(x, y)]'`.**\n* **Pandas uses NumPy types like `'np.int64'`. Series is converted to `'float64'` if we assign np.nan to any item. Use `'<S>.astype(<str/type>)'` to get converted Series.**\n* **Series will silently overflow if we run `'pd.Series([100], dtype=\"int8\") + 100'`!**\n\n#### Series — Aggregate, Transform, Map:\n```python\n<el> = <S>.sum/max/mean/idxmax/all()           # Or: <S>.agg(lambda <S>: <el>)\n<S>  = <S>.rank/diff/cumsum/ffill/interpol…()  # Or: <S>.agg/transform(lambda <S>: <S>)\n<S>  = <S>.isna/fillna/isin([<el/coll>])       # Or: <S>.agg/transform/map(lambda <el>: <el>)\n```\n\n```text\n+--------------+-------------+-------------+---------------+\n|              |    'sum'    |   ['sum']   | {'s': 'sum'}  |\n+--------------+-------------+-------------+---------------+\n| s.apply(…)   |      3      |    sum  3   |     s  3      |\n| s.agg(…)     |             |             |               |\n+--------------+-------------+-------------+---------------+\n```\n\n```text\n+--------------+-------------+-------------+---------------+\n|              |    'rank'   |   ['rank']  | {'r': 'rank'} |\n+--------------+-------------+-------------+---------------+\n| s.apply(…)   |             |      rank   |               |\n| s.agg(…)     |    x  1.0   |   x   1.0   |   r  x  1.0   |\n|              |    y  2.0   |   y   2.0   |      y  2.0   |\n+--------------+-------------+-------------+---------------+\n```\n* **Methods ffill(), interpolate(), fillna() and dropna() accept `'inplace=True'`.**\n* **Agg() and transform() pass a Series to a function if it raises Type/Val/AttrError on a scalar.**\n* **Last result has a multi-index. Use `'<S>[key_1, key_2]'` to get its values.**\n\n### DataFrame\n**Table with labeled rows and columns.**\n\n```python\n>>> df = pd.DataFrame([[1, 2], [3, 4]], index=['a', 'b'], columns=['x', 'y']); df\n   x  y\na  1  2\nb  3  4\n```\n\n```python\n<DF>   = pd.DataFrame(<list_of_rows>)          # Rows can be either lists, dicts or series.\n<DF>   = pd.DataFrame(<dict_of_columns>)       # Columns can be either lists, dicts or series.\n```\n\n```python\n<el>   = <DF>.loc[row_key, col_key]            # Or: <DF>.iloc[row_i, col_i]\n<S/DF> = <DF>.loc[row_key/s]                   # Or: <DF>.iloc[row_i/s]\n<S/DF> = <DF>.loc[:, col_key/s]                # Or: <DF>.iloc[:, col_i/s]\n<DF>   = <DF>.loc[row_bools, col_bools]        # Or: <DF>.iloc[row_bools, col_bools]\n```\n\n```python\n<S/DF> = <DF>[col_key/s]                       # Or: <DF>.<col_key>\n<DF>   = <DF>[<S_of_bools>]                    # Filters rows. For example `df[df.x > 1]`.\n<DF>   = <DF>[<DF_of_bools>]                   # Assigns NaN to items that are False in bools.\n```\n\n```python\n<DF>   = <DF> > <el/S/DF>                      # Returns DF of bools. S is treated as a row.\n<DF>   = <DF> + <el/S/DF>                      # Items with non-matching keys get value NaN.\n```\n\n```python\n<DF>   = <DF>.set_index(col_key)               # Replaces row keys with column's values.\n<DF>   = <DF>.reset_index(drop=False)          # Drops or moves row keys to column named index.\n<DF>   = <DF>.sort_index(ascending=True)       # Sorts rows by row keys. Use `axis=1` for cols.\n<DF>   = <DF>.sort_values(col_key/s)           # Sorts rows by passed column/s. Also `axis=1`.\n```\n\n```python\n<DF>   = <DF>.head/tail/sample(<int>)          # Returns first, last, or random n rows.\n<DF>   = <DF>.describe()                       # Describes columns. Also info(), corr(), shape.\n<DF>   = <DF>.query('<query>')                 # Filters rows. For example `df.query('x > 1')`.\n```\n\n```python\n<DF>.plot.line/area/bar/scatter(x=col_key, …)  # `y=col_key/s`. Also hist/box(by=col_key).\nplt.show()                                     # Displays the plot. Also plt.savefig(<path>).\n```\n\n#### DataFrame — Merge, Join, Concat:\n```python\n>>> df_2 = pd.DataFrame([[4, 5], [6, 7]], index=['b', 'c'], columns=['y', 'z']); df_2\n   y  z\nb  4  5\nc  6  7\n```\n\n```text\n+-----------------------+---------------+------------+------------+---------------------------+\n|                       |    'outer'    |   'inner'  |   'left'   |       Description         |\n+-----------------------+---------------+------------+------------+---------------------------+\n| df.merge(df_2,        |    x   y   z  | x   y   z  | x   y   z  | Merges on column if 'on'  |\n|          on='y',      | 0  1   2   .  | 3   4   5  | 1   2   .  | or 'left_on/right_on' are |\n|          how=…)       | 1  3   4   5  |            | 3   4   5  | set, else on shared cols. |\n|                       | 2  .   6   7  |            |            | Uses 'inner' by default.  |\n+-----------------------+---------------+------------+------------+---------------------------+\n| df.join(df_2,         |    x yl yr  z |            | x yl yr  z | Merges on row keys.       |\n|         lsuffix='l',  | a  1  2  .  . | x yl yr  z | 1  2  .  . | Uses 'left' by default.   |\n|         rsuffix='r',  | b  3  4  4  5 | 3  4  4  5 | 3  4  4  5 | If Series is passed, it   |\n|         how=…)        | c  .  .  6  7 |            |            | is treated as a column.   |\n+-----------------------+---------------+------------+------------+---------------------------+\n| pd.concat([df, df_2], |    x   y   z  |     y      |            | Adds rows at the bottom.  |\n|           axis=0,     | a  1   2   .  |     2      |            | Uses 'outer' by default.  |\n|           join=…)     | b  3   4   .  |     4      |            | A Series is treated as a  |\n|                       | b  .   4   5  |     4      |            | column. To add a row use  |\n|                       | c  .   6   7  |     6      |            | pd.concat([df, DF([s])]). |\n+-----------------------+---------------+------------+------------+---------------------------+\n| pd.concat([df, df_2], |    x  y  y  z |            |            | Adds columns at the       |\n|           axis=1,     | a  1  2  .  . | x  y  y  z |            | right end. Uses 'outer'   |\n|           join=…)     | b  3  4  4  5 | 3  4  4  5 |            | by default. A Series is   |\n|                       | c  .  .  6  7 |            |            | treated as a column.      |\n+-----------------------+---------------+------------+------------+---------------------------+\n```\n\n#### DataFrame — Aggregate, Transform, Map:\n```python\n<S>  = <DF>.sum/max/mean/idxmax/all()          # Or: <DF>.apply/agg(lambda <S>: <el>)\n<DF> = <DF>.rank/diff/cumsum/ffill/interpo…()  # Or: <DF>.apply/agg/transform(lambda <S>: <S>)\n<DF> = <DF>.isna/fillna/isin([<el/coll>])      # Or: <DF>.applymap(lambda <el>: <el>)\n```\n\n```text\n+-----------------+---------------+---------------+---------------+\n|                 |     'sum'     |    ['sum']    | {'x': 'sum'}  |\n+-----------------+---------------+---------------+---------------+\n| df.apply(…)     |      x  4     |        x  y   |     x  4      |\n| df.agg(…)       |      y  6     |   sum  4  6   |               |\n+-----------------+---------------+---------------+---------------+\n```\n\n```text\n+-----------------+---------------+---------------+---------------+\n|                 |     'rank'    |    ['rank']   | {'x': 'rank'} |\n+-----------------+---------------+---------------+---------------+\n| df.apply(…)     |               |       x    y  |               |\n| df.agg(…)       |       x    y  |    rank rank  |         x     |\n| df.transform(…) |  a  1.0  1.0  |  a  1.0  1.0  |    a  1.0     |\n|                 |  b  2.0  2.0  |  b  2.0  2.0  |    b  2.0     |\n+-----------------+---------------+---------------+---------------+\n```\n* **All methods operate on columns by default. Pass `'axis=1'` to process the rows instead.**\n* **Fifth result's columns are indexed with a multi-index. This means we need a tuple of column keys to specify a column: `'<DF>.loc[row_key, (col_key_1, col_key_2)]'`.**\n\n#### DataFrame — Multi-Index:\n```python\n<DF>   = <DF>.xs(key, level=<int>)             # Rows with key on passed level of multi-index.\n<DF>   = <DF>.xs(keys, level=<ints>, axis=1)   # Cols that have first key on first level, etc.\n<DF>   = <DF>.set_index(col_keys)              # Creates index from cols. Also `append=False`.\n<S/DF> = <DF>.stack/unstack(level=-1)          # Combines col keys with row keys or vice versa.\n<DF>   = <DF>.pivot_table(index=col_key/s)     # `columns=key/s, values=key/s, aggfunc='mean'`.\n```\n\n### File Formats\n```python\n<S/DF> = pd.read_json/pickle(<path/url/file>)  # Also accepts io.StringIO/BytesIO(<str/bytes>).\n<DF>   = pd.read_csv/excel(<path/url/file>)    # Also `header/index_col/dtype/usecols/…=<obj>`.\n<list> = pd.read_html(<path/url/file>)         # Raises ImportError if webpage has zero tables.\n<S/DF> = pd.read_parquet/feather/hdf(<path…>)  # Read_hdf() accepts `key='<df_name>'` argument.\n<DF>   = pd.read_sql('<table/query>', <conn>)  # Pass SQLite3/Alchemy connection (see #SQLite).\n```\n\n```python\n<DF>.to_json/csv/html/parquet/latex(<path>)    # Returns a string/bytes if path is omitted.\n<DF>.to_pickle/excel/feather/hdf(<path>)       # To_hdf() requires `key='<df_name>'` argument.\n<DF>.to_sql('<table_name>', <connection>)      # Also `if_exists='fail/replace/append'`.\n```\n* **`'$ pip3 install \"pandas[excel]\" odfpy lxml pyarrow'` installs dependencies.**\n* **Read\\_csv() only parses dates of columns that were specified by 'parse\\_dates' argument. It automatically tries to detect the format, but it can be helped with 'date\\_format' or 'dayfirst' arguments. Both dates and datetimes get stored as pd.Timestamp objects.**\n* **If there's a single invalid date then it returns the whole column as a series of strings, unlike `'<S> = pd.to_datetime(<S>, errors=\"coerce\")'`, which uses pd.NaT.**\n* **To get specific attributes from a series of Timestamps use `'<S>.dt.year/date/…'`.**\n\n### GroupBy\n**Object that groups together rows of a dataframe based on the value of the passed column.**\n\n```python\n<GB> = <DF>.groupby(col_key/s)                 # Splits DF into groups based on passed column.\n<DF> = <GB>.apply/filter(<func>)               # Filter drops a group if func returns False.\n<DF> = <GB>.get_group(<el>)                    # Selects a group by grouping column's value.\n<S>  = <GB>.size()                             # S of group sizes. Same keys as get_group().\n<GB> = <GB>[col_key]                           # Single column GB. All operations return S.\n```\n\n```python\n<DF> = <GB>.sum/max/mean/idxmax/all()          # Or: <GB>.agg(lambda <S>: <el>)\n<DF> = <GB>.rank/diff/cumsum/ffill()           # Or: <GB>.transform(lambda <S>: <S>)\n<DF> = <GB>.fillna(<el>)                       # Or: <GB>.transform(lambda <S>: <S>)\n```\n\n#### Divides rows into groups and sums their columns. Result has a named index that creates column `'z'` on reset_index():\n```python\n>>> df = pd.DataFrame([[1, 2, 3], [4, 5, 6], [7, 8, 6]], list('abc'), list('xyz'))\n>>> gb = df.groupby('z'); gb.apply(print)\n   x  y  z\na  1  2  3\n   x  y  z\nb  4  5  6\nc  7  8  6\n>>> gb.sum()\n    x   y\nz\n3   1   2\n6  11  13\n```\n\n### Rolling\n**Object for rolling window calculations.**\n\n```python\n<RS/RDF/RGB> = <S/DF/GB>.rolling(win_size)     # Also: `min_periods=None, center=False`.\n<RS/RDF/RGB> = <RDF/RGB>[col_key/s]            # Or: <RDF/RGB>.<col_key>\n<S/DF>       = <R>.mean/sum/max()              # Or: <R>.apply/agg(<agg_func/str>)\n```\n\n\nPlotly\n------\n```python\n# $ pip3 install plotly kaleido pandas\nimport plotly.express as px, pandas as pd\n```\n\n```python\n<Fig> = px.line(<DF>, x=col_key, y=col_key)            # Or: px.line(x=<list>, y=<list>)\n<Fig>.update_layout(margin=dict(t=0, r=0, b=0, l=0))   # Also `paper_bgcolor='rgb(0, 0, 0)'`.\n<Fig>.write_html/json/image('<path>')                  # <Fig>.show() displays the plot.\n```\n\n```python\n<Fig> = px.area/bar/box(<DF>, x=col_key, y=col_key)    # Also `color=col_key`.\n<Fig> = px.scatter(<DF>, x=col_key, y=col_key)         # Also `color/size/symbol=col_key`.\n<Fig> = px.scatter_3d(<DF>, x=col_key, y=col_key, …)   # `z=col_key`. Also color/size/symbol.\n<Fig> = px.histogram(<DF>, x=col_key [, nbins=<int>])  # Number of bins depends on DF size.\n```\n\n#### Displays a line chart of total coronavirus deaths per million grouped by continent:\n\n![Covid Deaths](web/covid_deaths.png)\n<div id=\"2a950764-39fc-416d-97fe-0a6226a3095f\" class=\"plotly-graph-div\" style=\"height:312px; width:914px;\"></div>\n\n```python\ncovid = pd.read_csv('https://raw.githubusercontent.com/owid/covid-19-data/8dde8ca49b'\n                    '6e648c17dd420b2726ca0779402651/public/data/owid-covid-data.csv',\n                    usecols=['iso_code', 'date', 'total_deaths', 'population'])\ncontinents = pd.read_csv('https://gto76.github.io/python-cheatsheet/web/continents.csv',\n                         usecols=['Three_Letter_Country_Code', 'Continent_Name'])\ndf = pd.merge(covid, continents, left_on='iso_code', right_on='Three_Letter_Country_Code')\ndf = df.groupby(['Continent_Name', 'date']).sum().reset_index()\ndf['Total Deaths per Million'] = df.total_deaths * 1e6 / df.population\ndf = df[df.date > '2020-03-14']\ndf = df.rename({'date': 'Date', 'Continent_Name': 'Continent'}, axis='columns')\npx.line(df, x='Date', y='Total Deaths per Million', color='Continent').show()\n```\n\n#### Displays a multi-axis line chart of total coronavirus cases and changes in prices of Bitcoin, Dow Jones and gold:\n\n![Covid Cases](web/covid_cases.png)\n<div id=\"e23ccacc-a456-478b-b467-7282a2165921\" class=\"plotly-graph-div\" style=\"height:287px; width:935px;\"></div>\n\n```python\n# $ pip3 install pandas lxml selenium plotly\nimport pandas as pd, selenium.webdriver, plotly.graph_objects as go\n\ndef main():\n    covid, (bitcoin, gold, dow) = get_covid_cases(), get_tickers()\n    df = wrangle_data(covid, bitcoin, gold, dow)\n    display_data(df)\n\ndef get_covid_cases():\n    url = 'https://covid.ourworldindata.org/data/owid-covid-data.csv'\n    df = pd.read_csv(url, usecols=['location', 'date', 'total_cases'], parse_dates=['date'])\n    df = df[df.location == 'World']\n    s = df.set_index('date').total_cases\n    return s.rename('Total Cases')\n\ndef get_tickers():\n    with selenium.webdriver.Chrome() as driver:\n        symbols = {'Bitcoin': 'BTC-USD', 'Gold': 'GC=F', 'Dow Jones': '%5EDJI'}\n        for name, symbol in symbols.items():\n            yield get_ticker(driver, name, symbol)\n\ndef get_ticker(driver, name, symbol):\n    url = f'https://finance.yahoo.com/quote/{symbol}/history/'\n    driver.get(url + '?period1=1579651200&period2=9999999999')\n    if buttons := driver.find_elements('xpath', '//button[@name=\"reject\"]'):\n        buttons[0].click()\n    dataframes = pd.read_html(driver.page_source, parse_dates=['Date'])\n    s = dataframes[0].set_index('Date').Open\n    return s.rename(name)\n\ndef wrangle_data(covid, bitcoin, gold, dow):\n    df = pd.concat([bitcoin, gold, dow], axis=1)  # Creates table by joining columns on dates.\n    df = df.sort_index().interpolate()            # Sorts rows by date and interpolates NaN-s.\n    df = df.loc['2020-02-23':'2021-12-20']        # Keeps rows between specified dates.\n    df = (df / df.iloc[0]) * 100                  # Calculates percentages relative to day 1.\n    df = df.join(covid)                           # Adds column with covid cases.\n    return df.sort_values(df.index[-1], axis=1)   # Sorts columns by last day's value.\n\ndef display_data(df):\n    figure = go.Figure()\n    for col_name in reversed(df.columns):\n        yaxis = 'y1' if col_name == 'Total Cases' else 'y2'\n        trace = go.Scatter(x=df.index, y=df[col_name], yaxis=yaxis, name=col_name)\n        figure.add_trace(trace)\n    figure.update_layout(\n        width=944,\n        height=423,\n        yaxis1=dict(title='Total Cases', rangemode='tozero'),\n        yaxis2=dict(title='%', rangemode='tozero', overlaying='y', side='right'),\n        colorway=['#EF553B', '#636EFA', '#00CC96', '#FFA152'],\n        legend=dict(x=1.08)\n    )\n    figure.show()\n\nif __name__ == '__main__':\n    main()\n```\n\n\nAppendix\n--------\n### Cython\n**Library that compiles Python-like code into C.**\n\n```python\n# $ pip3 install cython\nimport pyximport; pyximport.install()  # Module that runs imported Cython scripts.\nimport <cython_script>                 # Script must be saved with '.pyx' extension.\n<cython_script>.main()                 # Main() isn't automatically executed.\n```\n\n#### Definitions:\n* **All `'cdef'` definitions are optional, but they contribute to the speed-up.**\n* **Also supports C pointers via `'*'` and `'&'`, structs, unions, and enums.**\n\n```python\ncdef <ctype/type> <var_name> [= <obj>]\ncdef <ctype>[n_elements] <var_name> [= <coll_of_nums>]\ncdef <ctype/type/void> <func_name>(<ctype/type> <arg_name>): ...\n```\n\n```python\ncdef class <class_name>:\n    cdef public <ctype/type> <attr_name>\n    def __init__(self, <ctype/type> <arg_name>):\n        self.<attr_name> = <arg_name>\n```\n\n### Virtual Environments\n**System for installing libraries directly into project's directory.**\n\n```perl\n$ python3 -m venv NAME      # Creates virtual environment in current directory.\n$ source NAME/bin/activate  # Activates env. On Windows run `NAME\\Scripts\\activate`.\n$ pip3 install LIBRARY      # Installs the library into active environment.\n$ python3 FILE              # Runs the script in active environment. Also `./FILE`.\n$ deactivate                # Deactivates the active virtual environment.\n```\n\n### Basic Script Template\n**Run the script with `'$ python3 FILE'` or `'$ chmod u+x FILE; ./FILE'`. To automatically start the debugger when uncaught exception occurs run `'$ python3 -m pdb -cc FILE'`.**\n```python\n#!/usr/bin/env python3\n#\n# Usage: .py\n#\n\nfrom sys import argv, exit\nfrom collections import defaultdict, namedtuple\nfrom dataclasses import make_dataclass\nfrom enum import Enum\nimport functools as ft, itertools as it, operator as op, re\n\n\ndef main():\n    pass\n\n\n###\n##  UTIL\n#\n\ndef read_file(filename):\n    with open(filename, encoding='utf-8') as file:\n        return file.readlines()\n\n\nif __name__ == '__main__':\n    main()\n```\n\n\nIndex\n-----\n* **Ctrl+F / ⌘F is usually sufficient.**\n* **Searching `'#<title>'` on the [webpage](https://gto76.github.io/python-cheatsheet/) will limit the search to the titles.**\n* **Click on the title's `'🔗'` to get a link to its section.**\n"
        },
        {
          "name": "index.html",
          "type": "blob",
          "size": 317.67,
          "content": "<!DOCTYPE html>\n<html class=\"ocks-org do-not-copy\" lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, minimum-scale=1\" />\n  <title>Comprehensive Python Cheatsheet</title>\n  <meta name=\"description\" content=\"Exhaustive, simple, beautiful and concise. A truly Pythonic cheat sheet about Python programming language.\">\n  <link rel=\"icon\" href=\"web/favicon.png\">\n\n  <link rel=\"stylesheet\" href=\"web/default.min.css\">\n  <link rel=\"stylesheet\" href=\"https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css\">\n  <link rel=\"stylesheet\" href=\"web/style.css\">\n\n  <script>\n    // Checks if URL ends with \"index.html?dark=true\"\n    if (window.location.search.search(/[?&]theme=dark3/) !== -1) {\n      document.write(\"<link rel=\\\"stylesheet\\\" href=\\\"web/default_dark3.min.css\\\">\");\n      document.write(\"<link rel=\\\"stylesheet\\\" href=\\\"web/style_dark3.css\\\">\");\n    }\n    else if (window.location.search.search(/[?&]theme=dark2/) !== -1) {\n      document.write(\"<link rel=\\\"stylesheet\\\" href=\\\"web/default_dark2.min.css\\\">\");\n      document.write(\"<link rel=\\\"stylesheet\\\" href=\\\"web/style_dark2.css\\\">\");\n    }\n    else if (window.location.search.search(/[?&]theme=dark1/) !== -1) {\n      document.write(\"<link rel=\\\"stylesheet\\\" href=\\\"web/default_dark1.min.css\\\">\");\n      document.write(\"<link rel=\\\"stylesheet\\\" href=\\\"web/style_dark1.css\\\">\");\n    }    \n    else if (window.location.search.search(/[?&]theme=dark/) !== -1) {\n      document.write(\"<link rel=\\\"stylesheet\\\" href=\\\"web/default_dark.min.css\\\">\");\n      document.write(\"<link rel=\\\"stylesheet\\\" href=\\\"web/style_dark.css\\\">\");\n    }\n  </script>\n\n  <meta name=\"twitter:card\" content=\"summary_large_image\">\n  <meta name=\"twitter:title\" content=\"Comprehensive Python Cheatsheet\">\n  <meta name=\"twitter:description\" content=\"Exhaustive, simple, beautiful and concise. A truly Pythonic cheat sheet about Python programming language.\">\n  <meta name=\"twitter:image\" content=\"https://gto76.github.io/python-cheatsheet/web/image_social_4.png\">\n\n  <meta property=\"og:url\" content=\"https://gto76.github.io/python-cheatsheet/\">\n  <meta property=\"og:title\" content=\"Comprehensive Python Cheatsheet\">\n  <meta property=\"og:description\" content=\"Exhaustive, simple, beautiful and concise. A truly Pythonic cheat sheet about Python programming language.\">\n  <meta property=\"og:site_name\" content=\"gto76.github.io\">\n  <meta property=\"og:image\" content=\"https://gto76.github.io/python-cheatsheet/web/image_social_4.png\">\n  <meta property=\"og:type\" content=\"article\">\n\n  <meta itemprop=\"url\" content=\"https://gto76.github.io/python-cheatsheet/\">\n  <meta itemprop=\"name\" content=\"Comprehensive Python Cheatsheet\">\n  <meta itemprop=\"description\" content=\"Exhaustive, simple, beautiful and concise. A truly Pythonic cheat sheet about Python programming language.\">\n  <meta itemprop=\"image\" content=\"https://gto76.github.io/python-cheatsheet/web/image_social_4.png\">\n\n  <meta name=\"google-site-verification\" content=\"w3rvuG0D1kUm_w20qsJecSEZh59Am8jK4eSPVU83e_M\">\n  <meta name=\"viewport\" id=\"viewport-meta\">\n</head>\n\n<body>\n  <header>\n    <aside>December 31, 2024</aside>\n    <a href=\"https://gto76.github.io\" rel=\"author\">Jure Šorn</a>\n  </header>\n\n   <div><h1 id=\"comprehensivepythoncheatsheet\">Comprehensive Python Cheatsheet</h1><p class=\"banner\"><sup><a href=\"https://raw.githubusercontent.com/gto76/python-cheatsheet/main/README.md\">Download text file</a>, <a href=\"https://github.com/gto76/python-cheatsheet\">Fork me on GitHub</a>, <a href=\"https://github.com/gto76/python-cheatsheet/wiki/Frequently-Asked-Questions\">Check out FAQ</a> or <a href=\"index.html?theme=dark3\">Switch to dark theme</a>.\n</sup></p><p class=\"banner\" style=\"margin-bottom: 20px; padding-bottom: 7px;\"><img src=\"web/image_888.jpeg\" alt=\"Monty Python\"></p><script>\n  // Changes the image and link to theme if URL ends with \"index.html?theme=dark\". \n  if (window.location.search.search(/[?&]theme=dark/) !== -1) {\n\n    var link_to_theme = document.createElement(\"a\")\n    link_to_theme.href = \"index.html\"\n    link_to_theme.text = \"Switch to light theme\"\n    document.getElementsByClassName(\"banner\")[0].firstChild.children[4].replaceWith(link_to_theme)\n\n    var img_dark = document.createElement(\"img\");\n    img_dark.src = \"web/image_orig_blue6.png\";\n    img_dark.alt = \"Monthy Python\";\n    if ((window.location.search.search(/[?&]theme=dark2/) !== -1) ||\n        (window.location.search.search(/[?&]theme=dark3/) !== -1)) {\n      img_dark.style = \"width: 910px;\";\n    } else {\n      img_dark.style = \"width: 960px;\";\n    }\n    document.getElementsByClassName(\"banner\")[1].firstChild.replaceWith(img_dark);\n  }\n</script><pre style=\"border-left: none;padding-left: 1.9px;\"><code class=\"hljs bash\" style=\"line-height: 1.327em;\"><strong>ToC</strong> = {\n    <strong><span class=\"hljs-string\"><span class=\"hljs-string\">'1. Collections'</span></span></strong>: [<a href=\"#list\">List</a>, <a href=\"#dictionary\">Dictionary</a>, <a href=\"#set\">Set</a>, <a href=\"#tuple\">Tuple</a>, <a href=\"#range\">Range</a>, <a href=\"#enumerate\">Enumerate</a>, <a href=\"#iterator\">Iterator</a>, <a href=\"#generator\">Generator</a>],\n    <strong><span class=\"hljs-string\"><span class=\"hljs-string\">'2. Types'</span></span></strong>:       [<a href=\"#type\">Type</a>, <a href=\"#string\">String</a>, <a href=\"#regex\">Regular_Exp</a>, <a href=\"#format\">Format</a>, <a href=\"#numbers\">Numbers</a>, <a href=\"#combinatorics\">Combinatorics</a>, <a href=\"#datetime\">Datetime</a>],\n    <strong><span class=\"hljs-string\"><span class=\"hljs-string\">'3. Syntax'</span></span></strong>:      [<a href=\"#arguments\">Args</a>, <a href=\"#inline\">Inline</a>, <a href=\"#imports\">Import</a>, <a href=\"#decorator\">Decorator</a>, <a href=\"#class\">Class</a>, <a href=\"#ducktypes\">Duck_Types</a>, <a href=\"#enum\">Enum</a>, <a href=\"#exceptions\">Exception</a>],\n    <strong><span class=\"hljs-string\"><span class=\"hljs-string\">'4. System'</span></span></strong>:      [<a href=\"#exit\">Exit</a>, <a href=\"#print\">Print</a>, <a href=\"#input\">Input</a>, <a href=\"#commandlinearguments\">Command_Line_Arguments</a>, <a href=\"#open\">Open</a>, <a href=\"#paths\">Path</a>, <a href=\"#oscommands\">OS_Commands</a>],\n    <strong><span class=\"hljs-string\"><span class=\"hljs-string\">'5. Data'</span></span></strong>:        [<a href=\"#json\">JSON</a>, <a href=\"#pickle\">Pickle</a>, <a href=\"#csv\">CSV</a>, <a href=\"#sqlite\">SQLite</a>, <a href=\"#bytes\">Bytes</a>, <a href=\"#struct\">Struct</a>, <a href=\"#array\">Array</a>, <a href=\"#memoryview\">Memory_View</a>, <a href=\"#deque\">Deque</a>],\n    <strong><span class=\"hljs-string\"><span class=\"hljs-string\">'6. Advanced'</span></span></strong>:    [<a href=\"#operator\">Operator</a>, <a href=\"#matchstatement\">Match_Stmt</a>, <a href=\"#logging\">Logging</a>, <a href=\"#introspection\">Introspection</a>, <a href=\"#threading\">Threading</a>, <a href=\"#coroutines\">Coroutines</a>],\n    <strong><span class=\"hljs-string\"><span class=\"hljs-string\">'7. Libraries'</span></span></strong>:   [<a href=\"#progressbar\">Progress_Bar</a>, <a href=\"#plot\">Plot</a>, <a href=\"#table\">Table</a>, <a href=\"#consoleapp\">Console_App</a>, <a href=\"#guiapp\">GUI</a>, <a href=\"#scraping\">Scraping</a>, <a href=\"#webapp\">Web</a>, <a href=\"#profiling\">Profile</a>],\n    <strong><span class=\"hljs-string\"><span class=\"hljs-string\">'8. Multimedia'</span></span></strong>:  [<a href=\"#numpy\">NumPy</a>, <a href=\"#image\">Image</a>, <a href=\"#animation\">Animation</a>, <a href=\"#audio\">Audio</a>, <a href=\"#synthesizer\">Synthesizer</a>, <a href=\"#pygame\">Pygame</a>, <a href=\"#pandas\">Pandas</a>, <a href=\"#plotly\">Plotly</a>]\n}\n</code></pre></div>\n\n\n\n\n\n<div><h2 id=\"main\"><a href=\"#main\" name=\"main\">#</a>Main</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:      <span class=\"hljs-comment\"># Skips next line if file was imported.</span>\n    main()                      <span class=\"hljs-comment\"># Runs `def main(): ...` function.</span>\n</code></pre></div>\n\n<div><h2 id=\"list\"><a href=\"#list\" name=\"list\">#</a>List</h2><pre><code class=\"python language-python hljs\">&lt;list&gt; = [&lt;el_1&gt;, &lt;el_2&gt;, ...]  <span class=\"hljs-comment\"># Creates new list. Also list(&lt;collection&gt;).</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;el&gt;   = &lt;list&gt;[index]          <span class=\"hljs-comment\"># First index is 0. Last -1. Allows assignments.</span>\n&lt;list&gt; = &lt;list&gt;[&lt;slice&gt;]        <span class=\"hljs-comment\"># Also &lt;list&gt;[from_inclusive : to_exclusive : ±step].</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;list&gt;.append(&lt;el&gt;)             <span class=\"hljs-comment\"># Appends element to the end. Also &lt;list&gt; += [&lt;el&gt;].</span>\n&lt;list&gt;.extend(&lt;collection&gt;)     <span class=\"hljs-comment\"># Appends elements to the end. Also &lt;list&gt; += &lt;coll&gt;.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;list&gt;.sort()                   <span class=\"hljs-comment\"># Sorts elements in ascending order.</span>\n&lt;list&gt;.reverse()                <span class=\"hljs-comment\"># Reverses the list in-place.</span>\n&lt;list&gt; = sorted(&lt;collection&gt;)   <span class=\"hljs-comment\"># Returns new list with sorted elements.</span>\n&lt;iter&gt; = reversed(&lt;list&gt;)       <span class=\"hljs-comment\"># Returns reversed iterator of elements.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;el&gt;  = max(&lt;collection&gt;)       <span class=\"hljs-comment\"># Returns largest element. Also min(&lt;el_1&gt;, ...).</span>\n&lt;num&gt; = sum(&lt;collection&gt;)       <span class=\"hljs-comment\"># Returns sum of elements. Also math.prod(&lt;coll&gt;).</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">elementwise_sum  = [sum(pair) <span class=\"hljs-keyword\">for</span> pair <span class=\"hljs-keyword\">in</span> zip(list_a, list_b)]\nsorted_by_second = sorted(&lt;collection&gt;, key=<span class=\"hljs-keyword\">lambda</span> el: el[<span class=\"hljs-number\">1</span>])\nsorted_by_both   = sorted(&lt;collection&gt;, key=<span class=\"hljs-keyword\">lambda</span> el: (el[<span class=\"hljs-number\">1</span>], el[<span class=\"hljs-number\">0</span>]))\nflatter_list     = list(itertools.chain.from_iterable(&lt;list&gt;))\n</code></pre>\n<ul>\n<li><strong>For details about sort(), sorted(), min() and max() see <a href=\"#sortable\">Sortable</a>.</strong></li>\n<li><strong>Module <a href=\"#operator\">operator</a> has function itemgetter() that can replace listed <a href=\"#lambda\">lambdas</a>.</strong></li>\n<li><strong>This text uses the term collection instead of iterable. For rationale see <a href=\"#collection\">Collection</a>.</strong></li>\n</ul>\n<pre><code class=\"python language-python hljs\">&lt;int&gt; = len(&lt;list&gt;)             <span class=\"hljs-comment\"># Returns number of items. Also works on dict, set and string.</span>\n&lt;int&gt; = &lt;list&gt;.count(&lt;el&gt;)      <span class=\"hljs-comment\"># Returns number of occurrences. Also `if &lt;el&gt; in &lt;coll&gt;: ...`.</span>\n&lt;int&gt; = &lt;list&gt;.index(&lt;el&gt;)      <span class=\"hljs-comment\"># Returns index of the first occurrence or raises ValueError.</span>\n&lt;el&gt;  = &lt;list&gt;.pop()            <span class=\"hljs-comment\"># Removes and returns item from the end or at index if passed.</span>\n&lt;list&gt;.insert(&lt;int&gt;, &lt;el&gt;)      <span class=\"hljs-comment\"># Inserts item at index and moves the rest to the right.</span>\n&lt;list&gt;.remove(&lt;el&gt;)             <span class=\"hljs-comment\"># Removes first occurrence of the item or raises ValueError.</span>\n&lt;list&gt;.clear()                  <span class=\"hljs-comment\"># Removes all items. Also works on dictionary and set.</span>\n</code></pre>\n<div><h2 id=\"dictionary\"><a href=\"#dictionary\" name=\"dictionary\">#</a>Dictionary</h2><pre><code class=\"python language-python hljs\">&lt;dict&gt; = {key_1: val_1, key_2: val_2, ...}      <span class=\"hljs-comment\"># Use `&lt;dict&gt;[key]` to get or set the value.</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;view&gt; = &lt;dict&gt;.keys()                          <span class=\"hljs-comment\"># Collection of keys that reflects changes.</span>\n&lt;view&gt; = &lt;dict&gt;.values()                        <span class=\"hljs-comment\"># Collection of values that reflects changes.</span>\n&lt;view&gt; = &lt;dict&gt;.items()                         <span class=\"hljs-comment\"># Coll. of key-value tuples that reflects chgs.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">value  = &lt;dict&gt;.get(key, default=<span class=\"hljs-keyword\">None</span>)          <span class=\"hljs-comment\"># Returns default if key is missing.</span>\nvalue  = &lt;dict&gt;.setdefault(key, default=<span class=\"hljs-keyword\">None</span>)   <span class=\"hljs-comment\"># Returns and writes default if key is missing.</span>\n&lt;dict&gt; = collections.defaultdict(&lt;type&gt;)        <span class=\"hljs-comment\"># Returns a dict with default value `&lt;type&gt;()`.</span>\n&lt;dict&gt; = collections.defaultdict(<span class=\"hljs-keyword\">lambda</span>: <span class=\"hljs-number\">1</span>)     <span class=\"hljs-comment\"># Returns a dict with default value 1.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;dict&gt; = dict(&lt;collection&gt;)                     <span class=\"hljs-comment\"># Creates a dict from coll. of key-value pairs.</span>\n&lt;dict&gt; = dict(zip(keys, values))                <span class=\"hljs-comment\"># Creates a dict from two collections.</span>\n&lt;dict&gt; = dict.fromkeys(keys [, value])          <span class=\"hljs-comment\"># Creates a dict from collection of keys.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;dict&gt;.update(&lt;dict&gt;)                           <span class=\"hljs-comment\"># Adds items. Replaces ones with matching keys.</span>\nvalue = &lt;dict&gt;.pop(key)                         <span class=\"hljs-comment\"># Removes item or raises KeyError if missing.</span>\n{k <span class=\"hljs-keyword\">for</span> k, v <span class=\"hljs-keyword\">in</span> &lt;dict&gt;.items() <span class=\"hljs-keyword\">if</span> v == value}    <span class=\"hljs-comment\"># Returns set of keys that point to the value.</span>\n{k: v <span class=\"hljs-keyword\">for</span> k, v <span class=\"hljs-keyword\">in</span> &lt;dict&gt;.items() <span class=\"hljs-keyword\">if</span> k <span class=\"hljs-keyword\">in</span> keys}  <span class=\"hljs-comment\"># Filters the dictionary by keys.</span>\n</code></pre>\n<div><h3 id=\"counter\">Counter</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">from</span> collections <span class=\"hljs-keyword\">import</span> Counter\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>counter = Counter([<span class=\"hljs-string\">'blue'</span>, <span class=\"hljs-string\">'blue'</span>, <span class=\"hljs-string\">'blue'</span>, <span class=\"hljs-string\">'red'</span>, <span class=\"hljs-string\">'red'</span>])\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>counter[<span class=\"hljs-string\">'yellow'</span>] += <span class=\"hljs-number\">1</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>print(counter.most_common())\n[(<span class=\"hljs-string\">'blue'</span>, <span class=\"hljs-number\">3</span>), (<span class=\"hljs-string\">'red'</span>, <span class=\"hljs-number\">2</span>), (<span class=\"hljs-string\">'yellow'</span>, <span class=\"hljs-number\">1</span>)]\n</code></pre></div>\n\n<div><h2 id=\"set\"><a href=\"#set\" name=\"set\">#</a>Set</h2><pre><code class=\"python language-python hljs\">&lt;set&gt; = {&lt;el_1&gt;, &lt;el_2&gt;, ...}                   <span class=\"hljs-comment\"># Use `set()` for empty set.</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;set&gt;.add(&lt;el&gt;)                                 <span class=\"hljs-comment\"># Or: &lt;set&gt; |= {&lt;el&gt;}</span>\n&lt;set&gt;.update(&lt;collection&gt; [, ...])              <span class=\"hljs-comment\"># Or: &lt;set&gt; |= &lt;set&gt;</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;set&gt;  = &lt;set&gt;.union(&lt;coll.&gt;)                   <span class=\"hljs-comment\"># Or: &lt;set&gt; | &lt;set&gt;</span>\n&lt;set&gt;  = &lt;set&gt;.intersection(&lt;coll.&gt;)            <span class=\"hljs-comment\"># Or: &lt;set&gt; &amp; &lt;set&gt;</span>\n&lt;set&gt;  = &lt;set&gt;.difference(&lt;coll.&gt;)              <span class=\"hljs-comment\"># Or: &lt;set&gt; - &lt;set&gt;</span>\n&lt;set&gt;  = &lt;set&gt;.symmetric_difference(&lt;coll.&gt;)    <span class=\"hljs-comment\"># Or: &lt;set&gt; ^ &lt;set&gt;</span>\n&lt;bool&gt; = &lt;set&gt;.issubset(&lt;coll.&gt;)                <span class=\"hljs-comment\"># Or: &lt;set&gt; &lt;= &lt;set&gt;</span>\n&lt;bool&gt; = &lt;set&gt;.issuperset(&lt;coll.&gt;)              <span class=\"hljs-comment\"># Or: &lt;set&gt; &gt;= &lt;set&gt;</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;el&gt; = &lt;set&gt;.pop()                              <span class=\"hljs-comment\"># Raises KeyError if empty.</span>\n&lt;set&gt;.remove(&lt;el&gt;)                              <span class=\"hljs-comment\"># Raises KeyError if missing.</span>\n&lt;set&gt;.discard(&lt;el&gt;)                             <span class=\"hljs-comment\"># Doesn't raise an error.</span>\n</code></pre>\n<div><h3 id=\"frozenset\">Frozen Set</h3><ul>\n<li><strong>Is immutable and hashable.</strong></li>\n<li><strong>That means it can be used as a key in a dictionary or as an element in a set.</strong></li>\n</ul><pre><code class=\"python language-python hljs\">&lt;frozenset&gt; = frozenset(&lt;collection&gt;)\n</code></pre></div>\n\n\n<div><h2 id=\"tuple\"><a href=\"#tuple\" name=\"tuple\">#</a>Tuple</h2><p><strong>Tuple is an immutable and hashable list.</strong></p><pre><code class=\"python language-python hljs\">&lt;tuple&gt; = ()                               <span class=\"hljs-comment\"># Empty tuple.</span>\n&lt;tuple&gt; = (&lt;el&gt;,)                          <span class=\"hljs-comment\"># Or: &lt;el&gt;,</span>\n&lt;tuple&gt; = (&lt;el_1&gt;, &lt;el_2&gt; [, ...])         <span class=\"hljs-comment\"># Or: &lt;el_1&gt;, &lt;el_2&gt; [, ...]</span>\n</code></pre></div>\n\n\n<div><h3 id=\"namedtuple\">Named Tuple</h3><p><strong>Tuple's subclass with named elements.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">from</span> collections <span class=\"hljs-keyword\">import</span> namedtuple\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>Point = namedtuple(<span class=\"hljs-string\">'Point'</span>, <span class=\"hljs-string\">'x y'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>p = Point(<span class=\"hljs-number\">1</span>, y=<span class=\"hljs-number\">2</span>); p\nPoint(x=<span class=\"hljs-number\">1</span>, y=<span class=\"hljs-number\">2</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>p[<span class=\"hljs-number\">0</span>]\n<span class=\"hljs-number\">1</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>p.x\n<span class=\"hljs-number\">1</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>getattr(p, <span class=\"hljs-string\">'y'</span>)\n<span class=\"hljs-number\">2</span>\n</code></pre></div>\n\n\n<div><h2 id=\"range\"><a href=\"#range\" name=\"range\">#</a>Range</h2><p><strong>Immutable and hashable sequence of integers.</strong></p><pre><code class=\"python language-python hljs\">&lt;range&gt; = range(stop)                      <span class=\"hljs-comment\"># range(to_exclusive)</span>\n&lt;range&gt; = range(start, stop)               <span class=\"hljs-comment\"># range(from_inclusive, to_exclusive)</span>\n&lt;range&gt; = range(start, stop, ±step)        <span class=\"hljs-comment\"># range(from_inclusive, to_exclusive, ±step_size)</span>\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>[i <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">3</span>)]\n[<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>]\n</code></pre>\n<div><h2 id=\"enumerate\"><a href=\"#enumerate\" name=\"enumerate\">#</a>Enumerate</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">for</span> i, el <span class=\"hljs-keyword\">in</span> enumerate(&lt;coll&gt;, start=<span class=\"hljs-number\">0</span>):   <span class=\"hljs-comment\"># Returns next element and its index on each pass.</span>\n    ...\n</code></pre></div>\n\n<div><h2 id=\"iterator\"><a href=\"#iterator\" name=\"iterator\">#</a>Iterator</h2><pre><code class=\"python language-python hljs\">&lt;iter&gt; = iter(&lt;collection&gt;)                <span class=\"hljs-comment\"># `iter(&lt;iter&gt;)` returns unmodified iterator.</span>\n&lt;iter&gt; = iter(&lt;function&gt;, to_exclusive)    <span class=\"hljs-comment\"># A sequence of return values until 'to_exclusive'.</span>\n&lt;el&gt;   = next(&lt;iter&gt; [, default])          <span class=\"hljs-comment\"># Raises StopIteration or returns 'default' on end.</span>\n&lt;list&gt; = list(&lt;iter&gt;)                      <span class=\"hljs-comment\"># Returns a list of iterator's remaining elements.</span>\n</code></pre></div>\n\n<div><h3 id=\"itertools\">Itertools</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> itertools <span class=\"hljs-keyword\">as</span> it\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;iter&gt; = it.count(start=<span class=\"hljs-number\">0</span>, step=<span class=\"hljs-number\">1</span>)         <span class=\"hljs-comment\"># Returns updated value endlessly. Accepts floats.</span>\n&lt;iter&gt; = it.repeat(&lt;el&gt; [, times])         <span class=\"hljs-comment\"># Returns element endlessly or 'times' times.</span>\n&lt;iter&gt; = it.cycle(&lt;collection&gt;)            <span class=\"hljs-comment\"># Repeats the sequence endlessly.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;iter&gt; = it.chain(&lt;coll&gt;, &lt;coll&gt; [, ...])  <span class=\"hljs-comment\"># Empties collections in order (figuratively).</span>\n&lt;iter&gt; = it.chain.from_iterable(&lt;coll&gt;)    <span class=\"hljs-comment\"># Empties collections inside a collection in order.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;iter&gt; = it.islice(&lt;coll&gt;, to_exclusive)   <span class=\"hljs-comment\"># Only returns first 'to_exclusive' elements.</span>\n&lt;iter&gt; = it.islice(&lt;coll&gt;, from_inc, …)    <span class=\"hljs-comment\"># `to_exclusive, +step_size`. Indices can be None.</span>\n</code></pre>\n<div><h2 id=\"generator\"><a href=\"#generator\" name=\"generator\">#</a>Generator</h2><ul>\n<li><strong>Any function that contains a yield statement returns a generator.</strong></li>\n<li><strong>Generators and iterators are interchangeable.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">count</span><span class=\"hljs-params\">(start, step)</span>:</span>\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">True</span>:\n        <span class=\"hljs-keyword\">yield</span> start\n        start += step\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>counter = count(<span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">2</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>next(counter), next(counter), next(counter)\n(<span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">14</span>)\n</code></pre>\n<div><h2 id=\"type\"><a href=\"#type\" name=\"type\">#</a>Type</h2><ul>\n<li><strong>Everything is an object.</strong></li>\n<li><strong>Every object has a type.</strong></li>\n<li><strong>Type and class are synonymous.</strong></li>\n</ul><pre><code class=\"python language-python hljs\">&lt;type&gt; = type(&lt;el&gt;)                          <span class=\"hljs-comment\"># Or: &lt;el&gt;.__class__</span>\n&lt;bool&gt; = isinstance(&lt;el&gt;, &lt;type&gt;)            <span class=\"hljs-comment\"># Or: issubclass(type(&lt;el&gt;), &lt;type&gt;)</span>\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>type(<span class=\"hljs-string\">'a'</span>), <span class=\"hljs-string\">'a'</span>.__class__, str\n(&lt;<span class=\"hljs-class\"><span class=\"hljs-title\">class</span> '<span class=\"hljs-title\">str</span>'&gt;, &lt;<span class=\"hljs-title\">class</span> '<span class=\"hljs-title\">str</span>'&gt;, &lt;<span class=\"hljs-title\">class</span> '<span class=\"hljs-title\">str</span>'&gt;)\n</span></code></pre>\n<div><h4 id=\"sometypesdonothavebuiltinnamessotheymustbeimported\">Some types do not have built-in names, so they must be imported:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> types <span class=\"hljs-keyword\">import</span> FunctionType, MethodType, LambdaType, GeneratorType, ModuleType\n</code></pre></div>\n\n<div><h3 id=\"abstractbaseclasses\">Abstract Base Classes</h3><p><strong>Each abstract base class specifies a set of virtual subclasses. These classes are then recognized by isinstance() and issubclass() as subclasses of the ABC, although they are really not. ABC can also manually decide whether or not a specific class is its virtual subclass, usually based on which methods the class has implemented. For instance, Iterable ABC looks for method iter(), while Collection ABC looks for iter(), contains() and len().</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">from</span> collections.abc <span class=\"hljs-keyword\">import</span> Iterable, Collection, Sequence\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>isinstance([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], Iterable)\n<span class=\"hljs-keyword\">True</span>\n</code></pre></div>\n\n\n<pre><code class=\"text language-text\">┏━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┓\n┃                  │  Iterable  │ Collection │  Sequence  ┃\n┠──────────────────┼────────────┼────────────┼────────────┨\n┃ list, range, str │     ✓      │     ✓      │     ✓      ┃\n┃ dict, set        │     ✓      │     ✓      │            ┃\n┃ iter             │     ✓      │            │            ┃\n┗━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┛\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">from</span> numbers <span class=\"hljs-keyword\">import</span> Number, Complex, Real, Rational, Integral\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>isinstance(<span class=\"hljs-number\">123</span>, Number)\n<span class=\"hljs-keyword\">True</span>\n</code></pre>\n<pre><code class=\"text language-text\">┏━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┓\n┃                    │  Number  │  Complex │   Real   │ Rational │ Integral ┃\n┠────────────────────┼──────────┼──────────┼──────────┼──────────┼──────────┨\n┃ int                │    ✓     │    ✓     │    ✓     │    ✓     │    ✓     ┃\n┃ fractions.Fraction │    ✓     │    ✓     │    ✓     │    ✓     │          ┃\n┃ float              │    ✓     │    ✓     │    ✓     │          │          ┃\n┃ complex            │    ✓     │    ✓     │          │          │          ┃\n┃ decimal.Decimal    │    ✓     │          │          │          │          ┃\n┗━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┛\n</code></pre>\n<div><h2 id=\"string\"><a href=\"#string\" name=\"string\">#</a>String</h2><p><strong>Immutable sequence of characters.</strong></p><pre><code class=\"python language-python hljs\">&lt;str&gt;  = &lt;str&gt;.strip()                       <span class=\"hljs-comment\"># Strips all whitespace characters from both ends.</span>\n&lt;str&gt;  = &lt;str&gt;.strip(<span class=\"hljs-string\">'&lt;chars&gt;'</span>)              <span class=\"hljs-comment\"># Strips passed characters. Also lstrip/rstrip().</span>\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;list&gt; = &lt;str&gt;.split()                       <span class=\"hljs-comment\"># Splits on one or more whitespace characters.</span>\n&lt;list&gt; = &lt;str&gt;.split(sep=<span class=\"hljs-keyword\">None</span>, maxsplit=<span class=\"hljs-number\">-1</span>)  <span class=\"hljs-comment\"># Splits on 'sep' str at most 'maxsplit' times.</span>\n&lt;list&gt; = &lt;str&gt;.splitlines(keepends=<span class=\"hljs-keyword\">False</span>)    <span class=\"hljs-comment\"># On [\\n\\r\\f\\v\\x1c-\\x1e\\x85\\u2028\\u2029] and \\r\\n.</span>\n&lt;str&gt;  = &lt;str&gt;.join(&lt;coll_of_strings&gt;)       <span class=\"hljs-comment\"># Joins elements using string as a separator.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;bool&gt; = &lt;sub_str&gt; <span class=\"hljs-keyword\">in</span> &lt;str&gt;                  <span class=\"hljs-comment\"># Checks if string contains the substring.</span>\n&lt;bool&gt; = &lt;str&gt;.startswith(&lt;sub_str&gt;)         <span class=\"hljs-comment\"># Pass tuple of strings for multiple options.</span>\n&lt;int&gt;  = &lt;str&gt;.find(&lt;sub_str&gt;)               <span class=\"hljs-comment\"># Returns start index of the first match or -1.</span>\n&lt;int&gt;  = &lt;str&gt;.index(&lt;sub_str&gt;)              <span class=\"hljs-comment\"># Same, but raises ValueError if there's no match.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;str&gt;  = &lt;str&gt;.lower()                       <span class=\"hljs-comment\"># Changes the case. Also upper/capitalize/title().</span>\n&lt;str&gt;  = &lt;str&gt;.replace(old, new [, count])   <span class=\"hljs-comment\"># Replaces 'old' with 'new' at most 'count' times.</span>\n&lt;str&gt;  = &lt;str&gt;.translate(&lt;table&gt;)            <span class=\"hljs-comment\"># Use `str.maketrans(&lt;dict&gt;)` to generate table.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;str&gt;  = chr(&lt;int&gt;)                          <span class=\"hljs-comment\"># Converts int to Unicode character.</span>\n&lt;int&gt;  = ord(&lt;str&gt;)                          <span class=\"hljs-comment\"># Converts Unicode character to int.</span>\n</code></pre>\n<ul>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'unicodedata.normalize(\"NFC\", &lt;str&gt;)'</span></code> on strings like <code class=\"python hljs\"><span class=\"hljs-string\">'Motörhead'</span></code> before comparing them to other strings, because <code class=\"python hljs\"><span class=\"hljs-string\">'ö'</span></code> can be stored as one or two characters.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'NFC'</span></code> converts such characters to a single character, while <code class=\"python hljs\"><span class=\"hljs-string\">'NFD'</span></code> converts them to two.</strong></li>\n</ul>\n<div><h3 id=\"propertymethods\">Property Methods</h3><pre><code class=\"python language-python hljs\">&lt;bool&gt; = &lt;str&gt;.isdecimal()                   <span class=\"hljs-comment\"># Checks for [0-9]. Also [०-९] and [٠-٩].</span>\n&lt;bool&gt; = &lt;str&gt;.isdigit()                     <span class=\"hljs-comment\"># Checks for [²³¹…] and isdecimal().</span>\n&lt;bool&gt; = &lt;str&gt;.isnumeric()                   <span class=\"hljs-comment\"># Checks for [¼½¾…], [零〇一…] and isdigit().</span>\n&lt;bool&gt; = &lt;str&gt;.isalnum()                     <span class=\"hljs-comment\"># Checks for [a-zA-Z…] and isnumeric().</span>\n&lt;bool&gt; = &lt;str&gt;.isprintable()                 <span class=\"hljs-comment\"># Checks for [ !#$%…] and isalnum().</span>\n&lt;bool&gt; = &lt;str&gt;.isspace()                     <span class=\"hljs-comment\"># Checks for [ \\t\\n\\r\\f\\v\\x1c-\\x1f\\x85\\xa0…].</span>\n</code></pre></div>\n\n<div><h2 id=\"regex\"><a href=\"#regex\" name=\"regex\">#</a>Regex</h2><p><strong>Functions for regular expression matching.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> re\n&lt;str&gt;   = re.sub(<span class=\"hljs-string\">r'&lt;regex&gt;'</span>, new, text, count=<span class=\"hljs-number\">0</span>)  <span class=\"hljs-comment\"># Substitutes all occurrences with 'new'.</span>\n&lt;list&gt;  = re.findall(<span class=\"hljs-string\">r'&lt;regex&gt;'</span>, text)            <span class=\"hljs-comment\"># Returns all occurrences as strings.</span>\n&lt;list&gt;  = re.split(<span class=\"hljs-string\">r'&lt;regex&gt;'</span>, text, maxsplit=<span class=\"hljs-number\">0</span>)  <span class=\"hljs-comment\"># Add brackets around regex to keep matches.</span>\n&lt;Match&gt; = re.search(<span class=\"hljs-string\">r'&lt;regex&gt;'</span>, text)             <span class=\"hljs-comment\"># First occurrence of the pattern or None.</span>\n&lt;Match&gt; = re.match(<span class=\"hljs-string\">r'&lt;regex&gt;'</span>, text)              <span class=\"hljs-comment\"># Searches only at the beginning of the text.</span>\n&lt;iter&gt;  = re.finditer(<span class=\"hljs-string\">r'&lt;regex&gt;'</span>, text)           <span class=\"hljs-comment\"># Returns all occurrences as Match objects.</span>\n</code></pre></div>\n\n\n<ul>\n<li><strong>Raw string literals do not interpret escape sequences, thus enabling us to use regex-specific escape sequences that cause SyntaxWarning in normal string literals (since 3.12).</strong></li>\n<li><strong>Argument 'new' of re.sub() can be a function that accepts Match object and returns a str.</strong></li>\n<li><strong>Argument <code class=\"python hljs\"><span class=\"hljs-string\">'flags=re.IGNORECASE'</span></code> can be used with all functions.</strong></li>\n<li><strong>Argument <code class=\"python hljs\"><span class=\"hljs-string\">'flags=re.MULTILINE'</span></code> makes <code class=\"python hljs\"><span class=\"hljs-string\">'^'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'$'</span></code> match the start/end of each line.</strong></li>\n<li><strong>Argument <code class=\"python hljs\"><span class=\"hljs-string\">'flags=re.DOTALL'</span></code> makes <code class=\"python hljs\"><span class=\"hljs-string\">'.'</span></code> also accept the <code class=\"python hljs\"><span class=\"hljs-string\">'\\n'</span></code>.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'re.compile(&lt;regex&gt;)'</span></code> returns a Pattern object with methods sub(), findall(), …</strong></li>\n</ul>\n<div><h3 id=\"matchobject\">Match Object</h3><pre><code class=\"python language-python hljs\">&lt;str&gt;   = &lt;Match&gt;.group()                         <span class=\"hljs-comment\"># Returns the whole match. Also group(0).</span>\n&lt;str&gt;   = &lt;Match&gt;.group(<span class=\"hljs-number\">1</span>)                        <span class=\"hljs-comment\"># Returns part inside the first brackets.</span>\n&lt;tuple&gt; = &lt;Match&gt;.groups()                        <span class=\"hljs-comment\"># Returns all bracketed parts.</span>\n&lt;int&gt;   = &lt;Match&gt;.start()                         <span class=\"hljs-comment\"># Returns start index of the match.</span>\n&lt;int&gt;   = &lt;Match&gt;.end()                           <span class=\"hljs-comment\"># Returns exclusive end index of the match.</span>\n</code></pre></div>\n\n<div><h3 id=\"specialsequences\">Special Sequences</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-string\">'\\d'</span> == <span class=\"hljs-string\">'[0-9]'</span>                                   <span class=\"hljs-comment\"># Also [०-९…]. Matches a decimal character.</span>\n<span class=\"hljs-string\">'\\w'</span> == <span class=\"hljs-string\">'[a-zA-Z0-9_]'</span>                            <span class=\"hljs-comment\"># Also [ª²³…]. Matches an alphanumeric or _.</span>\n<span class=\"hljs-string\">'\\s'</span> == <span class=\"hljs-string\">'[ \\t\\n\\r\\f\\v]'</span>                           <span class=\"hljs-comment\"># Also [\\x1c-\\x1f…]. Matches a whitespace.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>By default, decimal characters and alphanumerics from all alphabets are matched unless <code class=\"python hljs\"><span class=\"hljs-string\">'flags=re.ASCII'</span></code> is used. It restricts special sequence matches to the first 128 Unicode characters and also prevents <code class=\"python hljs\"><span class=\"hljs-string\">'\\s'</span></code> from accepting <code class=\"python hljs\"><span class=\"hljs-string\">'\\x1c'</span></code>, <code class=\"python hljs\"><span class=\"hljs-string\">'\\x1d'</span></code>, <code class=\"python hljs\"><span class=\"hljs-string\">'\\x1e'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'\\x1f'</span></code> (non-printable characters that divide text into files, tables, rows and fields, respectively).</strong></li>\n<li><strong>Use a capital letter for negation (all non-ASCII characters will be matched when used in combination with ASCII flag).</strong></li>\n</ul>\n<div><h2 id=\"format\"><a href=\"#format\" name=\"format\">#</a>Format</h2><pre><code class=\"python hljs\">&lt;str&gt; = <span class=\"hljs-string\">f'<span class=\"hljs-subst\">{&lt;el_1&gt;}</span>, <span class=\"hljs-subst\">{&lt;el_2&gt;}</span>'</span>            <span class=\"hljs-comment\"># Curly brackets can also contain expressions.</span>\n&lt;str&gt; = <span class=\"hljs-string\">'{}, {}'</span>.format(&lt;el_1&gt;, &lt;el_2&gt;)  <span class=\"hljs-comment\"># Or: '{0}, {a}'.format(&lt;el_1&gt;, a=&lt;el_2&gt;)</span>\n&lt;str&gt; = <span class=\"hljs-string\">'%s, %s'</span> % (&lt;el_1&gt;, &lt;el_2&gt;)      <span class=\"hljs-comment\"># Redundant and inferior C-style formatting.</span>\n</code></pre></div>\n\n<div><h3 id=\"example\">Example</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>Person = collections.namedtuple(<span class=\"hljs-string\">'Person'</span>, <span class=\"hljs-string\">'name height'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>person = Person(<span class=\"hljs-string\">'Jean-Luc'</span>, <span class=\"hljs-number\">187</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-string\">f'<span class=\"hljs-subst\">{person.name}</span> is <span class=\"hljs-subst\">{person.height / <span class=\"hljs-number\">100</span>}</span> meters tall.'</span>\n<span class=\"hljs-string\">'Jean-Luc is 1.87 meters tall.'</span>\n</code></pre></div>\n\n<div><h3 id=\"generaloptions\">General Options</h3><pre><code class=\"python language-python hljs\">{&lt;el&gt;:&lt;<span class=\"hljs-number\">10</span>}                               <span class=\"hljs-comment\"># '&lt;el&gt;      '</span>\n{&lt;el&gt;:^<span class=\"hljs-number\">10</span>}                               <span class=\"hljs-comment\"># '   &lt;el&gt;   '</span>\n{&lt;el&gt;:&gt;<span class=\"hljs-number\">10</span>}                               <span class=\"hljs-comment\"># '      &lt;el&gt;'</span>\n{&lt;el&gt;:.&lt;<span class=\"hljs-number\">10</span>}                              <span class=\"hljs-comment\"># '&lt;el&gt;......'</span>\n{&lt;el&gt;:<span class=\"hljs-number\">0</span>}                                 <span class=\"hljs-comment\"># '&lt;el&gt;'</span>\n</code></pre></div>\n\n<ul>\n<li><strong>Objects are rendered using <code class=\"python hljs\"><span class=\"hljs-string\">'format(&lt;el&gt;, \"&lt;options&gt;\")'</span></code>.</strong></li>\n<li><strong>Options can be generated dynamically: <code class=\"python hljs\"><span class=\"hljs-string\">f'<span class=\"hljs-subst\">{&lt;el&gt;:{&lt;str/int&gt;}</span>[…]}'</span></code>.</strong></li>\n<li><strong>Adding <code class=\"python hljs\"><span class=\"hljs-string\">'='</span></code> to the expression prepends it to the output: <code class=\"python hljs\"><span class=\"hljs-string\">f'<span class=\"hljs-subst\">{<span class=\"hljs-number\">1</span>+<span class=\"hljs-number\">1</span>=}</span>'</span></code> returns <code class=\"python hljs\"><span class=\"hljs-string\">'1+1=2'</span></code>.</strong></li>\n<li><strong>Adding <code class=\"python hljs\"><span class=\"hljs-string\">'!r'</span></code> to the expression converts object to string by calling its <a href=\"#class\">repr()</a> method.</strong></li>\n</ul>\n<div><h3 id=\"strings\">Strings</h3><pre><code class=\"python language-python hljs\">{<span class=\"hljs-string\">'abcde'</span>:<span class=\"hljs-number\">10</span>}                             <span class=\"hljs-comment\"># 'abcde     '</span>\n{<span class=\"hljs-string\">'abcde'</span>:<span class=\"hljs-number\">10.3</span>}                           <span class=\"hljs-comment\"># 'abc       '</span>\n{<span class=\"hljs-string\">'abcde'</span>:<span class=\"hljs-number\">.3</span>}                             <span class=\"hljs-comment\"># 'abc'</span>\n{<span class=\"hljs-string\">'abcde'</span>!r:<span class=\"hljs-number\">10</span>}                           <span class=\"hljs-comment\"># \"'abcde'   \"</span>\n</code></pre></div>\n\n<div><h3 id=\"numbers-1\">Numbers</h3><pre><code class=\"python language-python hljs\">{<span class=\"hljs-number\">123456</span>:<span class=\"hljs-number\">10</span>}                              <span class=\"hljs-comment\"># '    123456'</span>\n{<span class=\"hljs-number\">123456</span>:<span class=\"hljs-number\">10</span>,}                             <span class=\"hljs-comment\"># '   123,456'</span>\n{<span class=\"hljs-number\">123456</span>:<span class=\"hljs-number\">10</span>_}                             <span class=\"hljs-comment\"># '   123_456'</span>\n{<span class=\"hljs-number\">123456</span>:+<span class=\"hljs-number\">10</span>}                             <span class=\"hljs-comment\"># '   +123456'</span>\n{<span class=\"hljs-number\">123456</span>:=+<span class=\"hljs-number\">10</span>}                            <span class=\"hljs-comment\"># '+   123456'</span>\n{<span class=\"hljs-number\">123456</span>: }                               <span class=\"hljs-comment\"># ' 123456'</span>\n{<span class=\"hljs-number\">-123456</span>: }                              <span class=\"hljs-comment\"># '-123456'</span>\n</code></pre></div>\n\n<div><h3 id=\"floats\">Floats</h3><pre><code class=\"python language-python hljs\">{<span class=\"hljs-number\">1.23456</span>:<span class=\"hljs-number\">10.3</span>}                           <span class=\"hljs-comment\"># '      1.23'</span>\n{<span class=\"hljs-number\">1.23456</span>:<span class=\"hljs-number\">10.3</span>f}                          <span class=\"hljs-comment\"># '     1.235'</span>\n{<span class=\"hljs-number\">1.23456</span>:<span class=\"hljs-number\">10.3</span>e}                          <span class=\"hljs-comment\"># ' 1.235e+00'</span>\n{<span class=\"hljs-number\">1.23456</span>:<span class=\"hljs-number\">10.3</span>%}                          <span class=\"hljs-comment\"># '  123.456%'</span>\n</code></pre></div>\n\n<div><h4 id=\"comparisonofpresentationtypes\">Comparison of presentation types:</h4><pre><code class=\"text language-text\">┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┓\n┃              │    {&lt;float&gt;}   │   {&lt;float&gt;:f}  │   {&lt;float&gt;:e}  │   {&lt;float&gt;:%}  ┃\n┠──────────────┼────────────────┼────────────────┼────────────────┼────────────────┨\n┃  0.000056789 │   '5.6789e-05' │    '0.000057'  │ '5.678900e-05' │    '0.005679%' ┃\n┃  0.00056789  │   '0.00056789' │    '0.000568'  │ '5.678900e-04' │    '0.056789%' ┃\n┃  0.0056789   │   '0.0056789'  │    '0.005679'  │ '5.678900e-03' │    '0.567890%' ┃\n┃  0.056789    │   '0.056789'   │    '0.056789'  │ '5.678900e-02' │    '5.678900%' ┃\n┃  0.56789     │   '0.56789'    │    '0.567890'  │ '5.678900e-01' │   '56.789000%' ┃\n┃  5.6789      │   '5.6789'     │    '5.678900'  │ '5.678900e+00' │  '567.890000%' ┃\n┃ 56.789       │  '56.789'      │   '56.789000'  │ '5.678900e+01' │ '5678.900000%' ┃\n┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┛\n\n┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┓\n┃              │  {&lt;float&gt;:.2}  │  {&lt;float&gt;:.2f} │  {&lt;float&gt;:.2e} │  {&lt;float&gt;:.2%} ┃\n┠──────────────┼────────────────┼────────────────┼────────────────┼────────────────┨\n┃  0.000056789 │    '5.7e-05'   │      '0.00'    │   '5.68e-05'   │      '0.01%'   ┃\n┃  0.00056789  │    '0.00057'   │      '0.00'    │   '5.68e-04'   │      '0.06%'   ┃\n┃  0.0056789   │    '0.0057'    │      '0.01'    │   '5.68e-03'   │      '0.57%'   ┃\n┃  0.056789    │    '0.057'     │      '0.06'    │   '5.68e-02'   │      '5.68%'   ┃\n┃  0.56789     │    '0.57'      │      '0.57'    │   '5.68e-01'   │     '56.79%'   ┃\n┃  5.6789      │    '5.7'       │      '5.68'    │   '5.68e+00'   │    '567.89%'   ┃\n┃ 56.789       │    '5.7e+01'   │     '56.79'    │   '5.68e+01'   │   '5678.90%'   ┃\n┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┛\n</code></pre></div>\n\n\n<ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'{&lt;float&gt;:g}'</span></code> is <code class=\"python hljs\"><span class=\"hljs-string\">'{&lt;float&gt;:.6}'</span></code> with stripped zeros, exponent starting at <code class=\"python hljs\"><span class=\"hljs-string\">'1e+06'</span></code>.</strong></li>\n<li><strong>When both rounding up and rounding down are possible, the one that returns result with even last digit is chosen. That makes <code class=\"python hljs\"><span class=\"hljs-string\">'{6.5:.0f}'</span></code> a <code class=\"python hljs\"><span class=\"hljs-string\">'6'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'{7.5:.0f}'</span></code> an <code class=\"python hljs\"><span class=\"hljs-string\">'8'</span></code>.</strong></li>\n<li><strong>This rule only effects numbers that can be represented exactly by a float (<code class=\"python hljs\"><span class=\"hljs-number\">.5</span></code>, <code class=\"python hljs\"><span class=\"hljs-number\">.25</span></code>, …).</strong></li>\n</ul>\n<div><h3 id=\"ints\">Ints</h3><pre><code class=\"python language-python hljs\">{<span class=\"hljs-number\">90</span>:c}                                   <span class=\"hljs-comment\"># 'Z'. Unicode character with value 90.</span>\n{<span class=\"hljs-number\">90</span>:b}                                   <span class=\"hljs-comment\"># '1011010'. Number 90 in binary.</span>\n{<span class=\"hljs-number\">90</span>:X}                                   <span class=\"hljs-comment\"># '5A'. Number 90 in uppercase hexadecimal.</span>\n</code></pre></div>\n\n<div><h2 id=\"numbers\"><a href=\"#numbers\" name=\"numbers\">#</a>Numbers</h2><pre><code class=\"python language-python hljs\">&lt;int&gt;      = int(&lt;float/str/bool&gt;)                <span class=\"hljs-comment\"># Or: math.trunc(&lt;float&gt;)</span>\n&lt;float&gt;    = float(&lt;int/str/bool&gt;)                <span class=\"hljs-comment\"># Or: &lt;int/float&gt;e±&lt;int&gt;</span>\n&lt;complex&gt;  = complex(real=<span class=\"hljs-number\">0</span>, imag=<span class=\"hljs-number\">0</span>)              <span class=\"hljs-comment\"># Or: &lt;int/float&gt; ± &lt;int/float&gt;j</span>\n&lt;Fraction&gt; = fractions.Fraction(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>)             <span class=\"hljs-comment\"># Or: Fraction(numerator=0, denominator=1)</span>\n&lt;Decimal&gt;  = decimal.Decimal(&lt;str/int&gt;)           <span class=\"hljs-comment\"># Or: Decimal((sign, digits, exponent))</span>\n</code></pre></div>\n\n<ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'int(&lt;str&gt;)'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'float(&lt;str&gt;)'</span></code> raise ValueError on malformed strings.</strong></li>\n<li><strong>Decimal numbers are stored exactly, unlike most floats where <code class=\"python hljs\"><span class=\"hljs-string\">'1.1 + 2.2 != 3.3'</span></code>.</strong></li>\n<li><strong>Floats can be compared with: <code class=\"python hljs\"><span class=\"hljs-string\">'math.isclose(&lt;float&gt;, &lt;float&gt;)'</span></code>.</strong></li>\n<li><strong>Precision of decimal operations is set with: <code class=\"python hljs\"><span class=\"hljs-string\">'decimal.getcontext().prec = &lt;int&gt;'</span></code>.</strong></li>\n</ul>\n<div><h3 id=\"basicfunctions\">Basic Functions</h3><pre><code class=\"python language-python hljs\">&lt;num&gt; = pow(&lt;num&gt;, &lt;num&gt;)                         <span class=\"hljs-comment\"># Or: &lt;number&gt; ** &lt;number&gt;</span>\n&lt;num&gt; = abs(&lt;num&gt;)                                <span class=\"hljs-comment\"># &lt;float&gt; = abs(&lt;complex&gt;)</span>\n&lt;num&gt; = round(&lt;num&gt; [, ±ndigits])                 <span class=\"hljs-comment\"># `round(126, -1) == 130`</span>\n</code></pre></div>\n\n<div><h3 id=\"math\">Math</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> math <span class=\"hljs-keyword\">import</span> e, pi, inf, nan, isinf, isnan    <span class=\"hljs-comment\"># `&lt;el&gt; == nan` is always False.</span>\n<span class=\"hljs-keyword\">from</span> math <span class=\"hljs-keyword\">import</span> sin, cos, tan, asin, acos, atan  <span class=\"hljs-comment\"># Also: degrees, radians.</span>\n<span class=\"hljs-keyword\">from</span> math <span class=\"hljs-keyword\">import</span> log, log10, log2                 <span class=\"hljs-comment\"># Log can accept base as second arg.</span>\n</code></pre></div>\n\n<div><h3 id=\"statistics\">Statistics</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> statistics <span class=\"hljs-keyword\">import</span> mean, median, variance     <span class=\"hljs-comment\"># Also: stdev, quantiles, groupby.</span>\n</code></pre></div>\n\n<div><h3 id=\"random\">Random</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> random <span class=\"hljs-keyword\">import</span> random, randint, choice        <span class=\"hljs-comment\"># Also: shuffle, gauss, triangular, seed.</span>\n&lt;float&gt; = random()                                <span class=\"hljs-comment\"># A float inside [0, 1).</span>\n&lt;int&gt;   = randint(from_inc, to_inc)               <span class=\"hljs-comment\"># An int inside [from_inc, to_inc].</span>\n&lt;el&gt;    = choice(&lt;sequence&gt;)                      <span class=\"hljs-comment\"># Keeps the sequence intact.</span>\n</code></pre></div>\n\n<div><h3 id=\"binhex\">Bin, Hex</h3><pre><code class=\"python language-python hljs\">&lt;int&gt; = ±<span class=\"hljs-number\">0b</span>&lt;bin&gt;                                  <span class=\"hljs-comment\"># Or: ±0x&lt;hex&gt;</span>\n&lt;int&gt; = int(<span class=\"hljs-string\">'±&lt;bin&gt;'</span>, <span class=\"hljs-number\">2</span>)                          <span class=\"hljs-comment\"># Or: int('±&lt;hex&gt;', 16)</span>\n&lt;int&gt; = int(<span class=\"hljs-string\">'±0b&lt;bin&gt;'</span>, <span class=\"hljs-number\">0</span>)                        <span class=\"hljs-comment\"># Or: int('±0x&lt;hex&gt;', 0)</span>\n&lt;str&gt; = bin(&lt;int&gt;)                                <span class=\"hljs-comment\"># Returns '[-]0b&lt;bin&gt;'. Also hex().</span>\n</code></pre></div>\n\n<div><h3 id=\"bitwiseoperators\">Bitwise Operators</h3><pre><code class=\"python language-python hljs\">&lt;int&gt; = &lt;int&gt; &amp; &lt;int&gt;                             <span class=\"hljs-comment\"># And (0b1100 &amp; 0b1010 == 0b1000).</span>\n&lt;int&gt; = &lt;int&gt; | &lt;int&gt;                             <span class=\"hljs-comment\"># Or  (0b1100 | 0b1010 == 0b1110).</span>\n&lt;int&gt; = &lt;int&gt; ^ &lt;int&gt;                             <span class=\"hljs-comment\"># Xor (0b1100 ^ 0b1010 == 0b0110).</span>\n&lt;int&gt; = &lt;int&gt; &lt;&lt; n_bits                           <span class=\"hljs-comment\"># Left shift. Use &gt;&gt; for right.</span>\n&lt;int&gt; = ~&lt;int&gt;                                    <span class=\"hljs-comment\"># Not. Also -&lt;int&gt; - 1.</span>\n</code></pre></div>\n\n<div><h2 id=\"combinatorics\"><a href=\"#combinatorics\" name=\"combinatorics\">#</a>Combinatorics</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> itertools <span class=\"hljs-keyword\">as</span> it\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>list(it.product([<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>], repeat=<span class=\"hljs-number\">3</span>))\n[(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>), (<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>), (<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>), (<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>),\n (<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>), (<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>), (<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>), (<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>)]\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>list(it.product(<span class=\"hljs-string\">'abc'</span>, <span class=\"hljs-string\">'abc'</span>))                    <span class=\"hljs-comment\">#   a  b  c</span>\n[(<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'a'</span>), (<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'b'</span>), (<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'c'</span>),                  <span class=\"hljs-comment\"># a x  x  x</span>\n (<span class=\"hljs-string\">'b'</span>, <span class=\"hljs-string\">'a'</span>), (<span class=\"hljs-string\">'b'</span>, <span class=\"hljs-string\">'b'</span>), (<span class=\"hljs-string\">'b'</span>, <span class=\"hljs-string\">'c'</span>),                  <span class=\"hljs-comment\"># b x  x  x</span>\n (<span class=\"hljs-string\">'c'</span>, <span class=\"hljs-string\">'a'</span>), (<span class=\"hljs-string\">'c'</span>, <span class=\"hljs-string\">'b'</span>), (<span class=\"hljs-string\">'c'</span>, <span class=\"hljs-string\">'c'</span>)]                  <span class=\"hljs-comment\"># c x  x  x</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>list(it.combinations(<span class=\"hljs-string\">'abc'</span>, <span class=\"hljs-number\">2</span>))                   <span class=\"hljs-comment\">#   a  b  c</span>\n[(<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'b'</span>), (<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'c'</span>),                              <span class=\"hljs-comment\"># a .  x  x</span>\n (<span class=\"hljs-string\">'b'</span>, <span class=\"hljs-string\">'c'</span>)]                                          <span class=\"hljs-comment\"># b .  .  x</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>list(it.combinations_with_replacement(<span class=\"hljs-string\">'abc'</span>, <span class=\"hljs-number\">2</span>))  <span class=\"hljs-comment\">#   a  b  c</span>\n[(<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'a'</span>), (<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'b'</span>), (<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'c'</span>),                  <span class=\"hljs-comment\"># a x  x  x</span>\n (<span class=\"hljs-string\">'b'</span>, <span class=\"hljs-string\">'b'</span>), (<span class=\"hljs-string\">'b'</span>, <span class=\"hljs-string\">'c'</span>),                              <span class=\"hljs-comment\"># b .  x  x</span>\n (<span class=\"hljs-string\">'c'</span>, <span class=\"hljs-string\">'c'</span>)]                                          <span class=\"hljs-comment\"># c .  .  x</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>list(it.permutations(<span class=\"hljs-string\">'abc'</span>, <span class=\"hljs-number\">2</span>))                   <span class=\"hljs-comment\">#   a  b  c</span>\n[(<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'b'</span>), (<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'c'</span>),                              <span class=\"hljs-comment\"># a .  x  x</span>\n (<span class=\"hljs-string\">'b'</span>, <span class=\"hljs-string\">'a'</span>), (<span class=\"hljs-string\">'b'</span>, <span class=\"hljs-string\">'c'</span>),                              <span class=\"hljs-comment\"># b x  .  x</span>\n (<span class=\"hljs-string\">'c'</span>, <span class=\"hljs-string\">'a'</span>), (<span class=\"hljs-string\">'c'</span>, <span class=\"hljs-string\">'b'</span>)]                              <span class=\"hljs-comment\"># c x  x  .</span>\n</code></pre>\n<div><h2 id=\"datetime\"><a href=\"#datetime\" name=\"datetime\">#</a>Datetime</h2><p><strong>Provides 'date', 'time', 'datetime' and 'timedelta' classes. All are immutable and hashable.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install python-dateutil</span>\n<span class=\"hljs-keyword\">from</span> datetime <span class=\"hljs-keyword\">import</span> date, time, datetime, timedelta, timezone\n<span class=\"hljs-keyword\">import</span> zoneinfo, dateutil.tz\n</code></pre></div>\n\n\n<pre><code class=\"python language-python apache hljs\">&lt;D&gt;  = date(year, month, day)               <span class=\"hljs-comment\"># Only accepts valid dates from 1 to 9999 AD.</span>\n&lt;T&gt;  = time(hour=<span class=\"hljs-number\">0</span>, minute=<span class=\"hljs-number\">0</span>, second=<span class=\"hljs-number\">0</span>)     <span class=\"hljs-comment\"># Also: `microsecond=0, tzinfo=None, fold=0`.</span>\n&lt;DT&gt; = datetime(year, month, day, hour=<span class=\"hljs-number\">0</span>)   <span class=\"hljs-comment\"># Also: `minute=0, second=0, microsecond=0, …`.</span>\n&lt;TD&gt; = timedelta(weeks=<span class=\"hljs-number\">0</span>, days=<span class=\"hljs-number\">0</span>, hours=<span class=\"hljs-number\">0</span>)  <span class=\"hljs-comment\"># Also: `minutes=0, seconds=0, microseconds=0`.</span>\n</code></pre>\n<ul>\n<li><strong>Aware times and datetimes have defined timezone, while naive don't. If object is naive, it is presumed to be in the system's timezone!</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'fold=1'</span></code> means the second pass in case of time jumping back for one hour.</strong></li>\n<li><strong>Timedelta normalizes arguments to ±days, seconds (&lt; 86 400) and microseconds (&lt; 1M). Its str() method returns <code class=\"python hljs\"><span class=\"hljs-string\">'[±D, ]H:MM:SS[.…]'</span></code> and total_seconds() a float of all seconds.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;D/DT&gt;.weekday()'</span></code> to get the day of the week as an int, with Monday being 0.</strong></li>\n</ul>\n<div><h3 id=\"now\">Now</h3><pre><code class=\"python language-python hljs\">&lt;D/DTn&gt; = D/DT.today()                      <span class=\"hljs-comment\"># Current local date or naive DT. Also DT.now().</span>\n&lt;DTa&gt;   = DT.now(&lt;tzinfo&gt;)                  <span class=\"hljs-comment\"># Aware DT from current time in passed timezone.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>To extract time use <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;DTn&gt;.time()'</span></code>, <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;DTa&gt;.time()'</span></code> or <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;DTa&gt;.timetz()'</span></code>.</strong></li>\n</ul>\n<div><h3 id=\"timezone\">Timezone</h3><pre><code class=\"python language-python apache hljs\">&lt;tzinfo&gt; = timezone.utc                     <span class=\"hljs-comment\"># London without daylight saving time (DST).</span>\n&lt;tzinfo&gt; = timezone(&lt;timedelta&gt;)            <span class=\"hljs-comment\"># Timezone with fixed offset from UTC.</span>\n&lt;tzinfo&gt; = dateutil.tz.tzlocal()            <span class=\"hljs-comment\"># Local timezone with dynamic offset from UTC.</span>\n&lt;tzinfo&gt; = zoneinfo.ZoneInfo(<span class=\"hljs-string\">'&lt;iana_key&gt;'</span>)  <span class=\"hljs-comment\"># 'Continent/City_Name' zone with dynamic offset.</span>\n&lt;DTa&gt;    = &lt;DT&gt;.astimezone([&lt;tzinfo&gt;])      <span class=\"hljs-comment\"># Converts DT to the passed or local fixed zone.</span>\n&lt;Ta/DTa&gt; = &lt;T/DT&gt;.replace(tzinfo=&lt;tzinfo&gt;)  <span class=\"hljs-comment\"># Changes object's timezone without conversion.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>Timezones returned by tzlocal(), ZoneInfo() and implicit local timezone of naive objects have offsets that vary through time due to DST and historical changes of the base offset.</strong></li>\n<li><strong>To get ZoneInfo() to work on Windows run <code class=\"python hljs\"><span class=\"hljs-string\">'&gt; pip3 install tzdata'</span></code>.</strong></li>\n</ul>\n<div><h3 id=\"encode\">Encode</h3><pre><code class=\"python language-python apache hljs\">&lt;D/T/DT&gt; = D/T/DT.fromisoformat(&lt;str&gt;)      <span class=\"hljs-comment\"># Object from ISO string. Raises ValueError.</span>\n&lt;DT&gt;     = DT.strptime(&lt;str&gt;, <span class=\"hljs-string\">'&lt;format&gt;'</span>)   <span class=\"hljs-comment\"># Datetime from str, according to format.</span>\n&lt;D/DTn&gt;  = D/DT.fromordinal(&lt;int&gt;)          <span class=\"hljs-comment\"># D/DT from days since the Gregorian NYE 1.</span>\n&lt;DTn&gt;    = DT.fromtimestamp(&lt;float&gt;)        <span class=\"hljs-comment\"># Local naive DT from seconds since the Epoch.</span>\n&lt;DTa&gt;    = DT.fromtimestamp(&lt;float&gt;, &lt;tz&gt;)  <span class=\"hljs-comment\"># Aware datetime from seconds since the Epoch.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>ISO strings come in following forms: <code class=\"python hljs\"><span class=\"hljs-string\">'YYYY-MM-DD'</span></code>, <code class=\"python hljs\"><span class=\"hljs-string\">'HH:MM:SS.mmmuuu[±HH:MM]'</span></code>, or both separated by an arbitrary character. All parts following the hours are optional.</strong></li>\n<li><strong>Python uses the Unix Epoch: <code class=\"python hljs\"><span class=\"hljs-string\">'1970-01-01 00:00 UTC'</span></code>, <code class=\"python hljs\"><span class=\"hljs-string\">'1970-01-01 01:00 CET'</span></code>, …</strong></li>\n</ul>\n<div><h3 id=\"decode\">Decode</h3><pre><code class=\"python language-python hljs\">&lt;str&gt;    = &lt;D/T/DT&gt;.isoformat(sep=<span class=\"hljs-string\">'T'</span>)      <span class=\"hljs-comment\"># Also `timespec='auto/hours/minutes/seconds/…'`.</span>\n&lt;str&gt;    = &lt;D/T/DT&gt;.strftime(<span class=\"hljs-string\">'&lt;format&gt;'</span>)    <span class=\"hljs-comment\"># Custom string representation of the object.</span>\n&lt;int&gt;    = &lt;D/DT&gt;.toordinal()               <span class=\"hljs-comment\"># Days since Gregorian NYE 1, ignoring time and tz.</span>\n&lt;float&gt;  = &lt;DTn&gt;.timestamp()                <span class=\"hljs-comment\"># Seconds since the Epoch, from local naive DT.</span>\n&lt;float&gt;  = &lt;DTa&gt;.timestamp()                <span class=\"hljs-comment\"># Seconds since the Epoch, from aware datetime.</span>\n</code></pre></div>\n\n<div><h3 id=\"format-1\">Format</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>dt = datetime.strptime(<span class=\"hljs-string\">'2025-08-14 23:39:00.00 +0200'</span>, <span class=\"hljs-string\">'%Y-%m-%d %H:%M:%S.%f %z'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>dt.strftime(<span class=\"hljs-string\">\"%dth of %B '%y (%a), %I:%M %p %Z\"</span>)\n<span class=\"hljs-string\">\"14th of August '25 (Thu), 11:39 PM UTC+02:00\"</span>\n</code></pre></div>\n\n<ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'%z'</span></code> accepts <code class=\"python hljs\"><span class=\"hljs-string\">'±HH[:]MM'</span></code> and returns <code class=\"python hljs\"><span class=\"hljs-string\">'±HHMM'</span></code> or empty string if datetime is naive.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'%Z'</span></code> accepts <code class=\"python hljs\"><span class=\"hljs-string\">'UTC/GMT'</span></code> and local timezone's code and returns timezone's name, <code class=\"python hljs\"><span class=\"hljs-string\">'UTC[±HH:MM]'</span></code> if timezone is nameless, or an empty string if datetime is naive.</strong></li>\n</ul>\n<div><h3 id=\"arithmetics\">Arithmetics</h3><pre><code class=\"python language-python apache hljs\">&lt;bool&gt;   = &lt;D/T/DTn&gt; &gt; &lt;D/T/DTn&gt;            <span class=\"hljs-comment\"># Ignores time jumps (fold attribute). Also ==.</span>\n&lt;bool&gt;   = &lt;DTa&gt;     &gt; &lt;DTa&gt;                <span class=\"hljs-comment\"># Ignores jumps if they share tz object. Broken ==.</span>\n&lt;TD&gt;     = &lt;D/DTn&gt;   - &lt;D/DTn&gt;              <span class=\"hljs-comment\"># Ignores jumps. Convert to UTC for actual delta.</span>\n&lt;TD&gt;     = &lt;DTa&gt;     - &lt;DTa&gt;                <span class=\"hljs-comment\"># Ignores jumps if they share tzinfo object.</span>\n&lt;D/DT&gt;   = &lt;D/DT&gt;    ± &lt;TD&gt;                 <span class=\"hljs-comment\"># Returned datetime can fall into missing hour.</span>\n&lt;TD&gt;     = &lt;TD&gt;      * &lt;float&gt;              <span class=\"hljs-comment\"># Also: &lt;TD&gt; = abs(&lt;TD&gt;) and &lt;TD&gt; = &lt;TD&gt; ±% &lt;TD&gt;.</span>\n&lt;float&gt;  = &lt;TD&gt;      / &lt;TD&gt;                 <span class=\"hljs-comment\"># E.g. how many hours are in TD. Also //, divmod().</span>\n</code></pre></div>\n\n<div><h2 id=\"arguments\"><a href=\"#arguments\" name=\"arguments\">#</a>Arguments</h2><div><h3 id=\"insidefunctioncall\">Inside Function Call</h3><pre><code class=\"python language-python hljs\">func(&lt;positional_args&gt;)                           <span class=\"hljs-comment\"># func(0, 0)</span>\nfunc(&lt;keyword_args&gt;)                              <span class=\"hljs-comment\"># func(x=0, y=0)</span>\nfunc(&lt;positional_args&gt;, &lt;keyword_args&gt;)           <span class=\"hljs-comment\"># func(0, y=0)</span>\n</code></pre></div></div>\n\n\n<div><h3 id=\"insidefunctiondefinition\">Inside Function Definition</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">func</span><span class=\"hljs-params\">(&lt;nondefault_args&gt;)</span>:</span> ...                  <span class=\"hljs-comment\"># def func(x, y): ...</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">func</span><span class=\"hljs-params\">(&lt;default_args&gt;)</span>:</span> ...                     <span class=\"hljs-comment\"># def func(x=0, y=0): ...</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">func</span><span class=\"hljs-params\">(&lt;nondefault_args&gt;, &lt;default_args&gt;)</span>:</span> ...  <span class=\"hljs-comment\"># def func(x, y=0): ...</span>\n</code></pre></div>\n\n<ul>\n<li><strong>Default values are evaluated when function is first encountered in the scope.</strong></li>\n<li><strong>Any mutation of a mutable default value will persist between invocations!</strong></li>\n</ul>\n<div><h2 id=\"splatoperator\"><a href=\"#splatoperator\" name=\"splatoperator\">#</a>Splat Operator</h2><div><h3 id=\"insidefunctioncall-1\">Inside Function Call</h3><p><strong>Splat expands a collection into positional arguments, while splatty-splat expands a dictionary into keyword arguments.</strong></p><pre><code class=\"python language-python hljs\">args   = (<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>)\nkwargs = {<span class=\"hljs-string\">'x'</span>: <span class=\"hljs-number\">3</span>, <span class=\"hljs-string\">'y'</span>: <span class=\"hljs-number\">4</span>, <span class=\"hljs-string\">'z'</span>: <span class=\"hljs-number\">5</span>}\nfunc(*args, **kwargs)\n</code></pre></div></div>\n\n\n\n<div><h4 id=\"isthesameas\">Is the same as:</h4><pre><code class=\"python language-python hljs\">func(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, x=<span class=\"hljs-number\">3</span>, y=<span class=\"hljs-number\">4</span>, z=<span class=\"hljs-number\">5</span>)\n</code></pre></div>\n\n<div><h3 id=\"insidefunctiondefinition-1\">Inside Function Definition</h3><p><strong>Splat combines zero or more positional arguments into a tuple, while splatty-splat combines zero or more keyword arguments into a dictionary.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">add</span><span class=\"hljs-params\">(*a)</span>:</span>\n    <span class=\"hljs-keyword\">return</span> sum(a)\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>add(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>)\n<span class=\"hljs-number\">6</span>\n</code></pre>\n<div><h4 id=\"legalargumentcombinations\">Legal argument combinations:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(*args)</span>:</span> ...               <span class=\"hljs-comment\"># f(1, 2, 3)</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(x, *args)</span>:</span> ...            <span class=\"hljs-comment\"># f(1, 2, 3)</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(*args, z)</span>:</span> ...            <span class=\"hljs-comment\"># f(1, 2, z=3)</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(**kwargs)</span>:</span> ...            <span class=\"hljs-comment\"># f(x=1, y=2, z=3)</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(x, **kwargs)</span>:</span> ...         <span class=\"hljs-comment\"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(*args, **kwargs)</span>:</span> ...     <span class=\"hljs-comment\"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(x, *args, **kwargs)</span>:</span> ...  <span class=\"hljs-comment\"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(*args, y, **kwargs)</span>:</span> ...  <span class=\"hljs-comment\"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(*, x, y, z)</span>:</span> ...          <span class=\"hljs-comment\"># f(x=1, y=2, z=3)</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(x, *, y, z)</span>:</span> ...          <span class=\"hljs-comment\"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">f</span><span class=\"hljs-params\">(x, y, *, z)</span>:</span> ...          <span class=\"hljs-comment\"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3)</span>\n</code></pre>\n<div><h3 id=\"otheruses\">Other Uses</h3><pre><code class=\"python language-python hljs\">&lt;list&gt;  = [*&lt;coll.&gt; [, ...]]    <span class=\"hljs-comment\"># Or: list(&lt;collection&gt;) [+ ...]</span>\n&lt;tuple&gt; = (*&lt;coll.&gt;, [...])     <span class=\"hljs-comment\"># Or: tuple(&lt;collection&gt;) [+ ...]</span>\n&lt;set&gt;   = {*&lt;coll.&gt; [, ...]}    <span class=\"hljs-comment\"># Or: set(&lt;collection&gt;) [| ...]</span>\n&lt;dict&gt;  = {**&lt;dict&gt; [, ...]}    <span class=\"hljs-comment\"># Or: &lt;dict&gt; | ...</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">head, *body, tail = &lt;coll.&gt;     <span class=\"hljs-comment\"># Head or tail can be omitted.</span>\n</code></pre>\n<div><h2 id=\"inline\"><a href=\"#inline\" name=\"inline\">#</a>Inline</h2><div><h3 id=\"lambda\">Lambda</h3><pre><code class=\"python language-python hljs\">&lt;func&gt; = <span class=\"hljs-keyword\">lambda</span>: &lt;return_value&gt;                     <span class=\"hljs-comment\"># A single statement function.</span>\n&lt;func&gt; = <span class=\"hljs-keyword\">lambda</span> &lt;arg_1&gt;, &lt;arg_2&gt;: &lt;return_value&gt;    <span class=\"hljs-comment\"># Also allows default arguments.</span>\n</code></pre></div></div>\n\n\n<div><h3 id=\"comprehensions\">Comprehensions</h3><pre><code class=\"python language-python hljs\">&lt;list&gt; = [i+<span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>)]                   <span class=\"hljs-comment\"># Or: [1, 2, ..., 10]</span>\n&lt;iter&gt; = (i <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>) <span class=\"hljs-keyword\">if</span> i &gt; <span class=\"hljs-number\">5</span>)            <span class=\"hljs-comment\"># Or: iter([6, 7, 8, 9])</span>\n&lt;set&gt;  = {i+<span class=\"hljs-number\">5</span> <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>)}                   <span class=\"hljs-comment\"># Or: {5, 6, ..., 14}</span>\n&lt;dict&gt; = {i: i*<span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>)}                <span class=\"hljs-comment\"># Or: {0: 0, 1: 2, ..., 9: 18}</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>[l+r <span class=\"hljs-keyword\">for</span> l <span class=\"hljs-keyword\">in</span> <span class=\"hljs-string\">'abc'</span> <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> <span class=\"hljs-string\">'abc'</span>]             <span class=\"hljs-comment\"># Inner loop is on the right side.</span>\n[<span class=\"hljs-string\">'aa'</span>, <span class=\"hljs-string\">'ab'</span>, <span class=\"hljs-string\">'ac'</span>, ..., <span class=\"hljs-string\">'cc'</span>]\n</code></pre>\n<div><h3 id=\"mapfilterreduce\">Map, Filter, Reduce</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> reduce\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;iter&gt; = map(<span class=\"hljs-keyword\">lambda</span> x: x + <span class=\"hljs-number\">1</span>, range(<span class=\"hljs-number\">10</span>))            <span class=\"hljs-comment\"># Or: iter([1, 2, ..., 10])</span>\n&lt;iter&gt; = filter(<span class=\"hljs-keyword\">lambda</span> x: x &gt; <span class=\"hljs-number\">5</span>, range(<span class=\"hljs-number\">10</span>))         <span class=\"hljs-comment\"># Or: iter([6, 7, 8, 9])</span>\n&lt;obj&gt;  = reduce(<span class=\"hljs-keyword\">lambda</span> out, x: out + x, range(<span class=\"hljs-number\">10</span>))  <span class=\"hljs-comment\"># Or: 45</span>\n</code></pre>\n<div><h3 id=\"anyall\">Any, All</h3><pre><code class=\"python language-python hljs\">&lt;bool&gt; = any(&lt;collection&gt;)                          <span class=\"hljs-comment\"># Is `bool(&lt;el&gt;)` True for any el?</span>\n&lt;bool&gt; = all(&lt;collection&gt;)                          <span class=\"hljs-comment\"># True for all? Also True if empty.</span>\n</code></pre></div>\n\n<div><h3 id=\"conditionalexpression\">Conditional Expression</h3><pre><code class=\"python language-python hljs\">&lt;obj&gt; = &lt;exp&gt; <span class=\"hljs-keyword\">if</span> &lt;condition&gt; <span class=\"hljs-keyword\">else</span> &lt;exp&gt;             <span class=\"hljs-comment\"># Only one expression is evaluated.</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>[a <span class=\"hljs-keyword\">if</span> a <span class=\"hljs-keyword\">else</span> <span class=\"hljs-string\">'zero'</span> <span class=\"hljs-keyword\">for</span> a <span class=\"hljs-keyword\">in</span> (<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>)]      <span class=\"hljs-comment\"># `any([0, '', [], None]) == False`</span>\n[<span class=\"hljs-string\">'zero'</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]\n</code></pre>\n<div><h3 id=\"namedtupleenumdataclass\">Named Tuple, Enum, Dataclass</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> collections <span class=\"hljs-keyword\">import</span> namedtuple\nPoint = namedtuple(<span class=\"hljs-string\">'Point'</span>, <span class=\"hljs-string\">'x y'</span>)                  <span class=\"hljs-comment\"># Creates a tuple's subclass.</span>\npoint = Point(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>)                                 <span class=\"hljs-comment\"># Returns its instance.</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> enum <span class=\"hljs-keyword\">import</span> Enum\nDirection = Enum(<span class=\"hljs-string\">'Direction'</span>, <span class=\"hljs-string\">'N E S W'</span>)            <span class=\"hljs-comment\"># Creates an enum.</span>\ndirection = Direction.N                             <span class=\"hljs-comment\"># Returns its member.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> dataclasses <span class=\"hljs-keyword\">import</span> make_dataclass\nPlayer = make_dataclass(<span class=\"hljs-string\">'Player'</span>, [<span class=\"hljs-string\">'loc'</span>, <span class=\"hljs-string\">'dir'</span>])   <span class=\"hljs-comment\"># Creates a class.</span>\nplayer = Player(point, direction)                   <span class=\"hljs-comment\"># Returns its instance.</span>\n</code></pre>\n<div><h2 id=\"imports\"><a href=\"#imports\" name=\"imports\">#</a>Imports</h2><p><strong>Mechanism that makes code in one file available to another file.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> &lt;module&gt;            <span class=\"hljs-comment\"># Imports a built-in or '&lt;module&gt;.py'.</span>\n<span class=\"hljs-keyword\">import</span> &lt;package&gt;           <span class=\"hljs-comment\"># Imports a built-in or '&lt;package&gt;/__init__.py'.</span>\n<span class=\"hljs-keyword\">import</span> &lt;package&gt;.&lt;module&gt;  <span class=\"hljs-comment\"># Imports a built-in or '&lt;package&gt;/&lt;module&gt;.py'.</span>\n</code></pre></div>\n\n\n<ul>\n<li><strong>Package is a collection of modules, but it can also define its own objects.</strong></li>\n<li><strong>On a filesystem this corresponds to a directory of Python files with an optional init script.</strong></li>\n<li><strong>Running <code class=\"python hljs\"><span class=\"hljs-string\">'import &lt;package&gt;'</span></code> does not automatically provide access to the package's modules unless they are explicitly imported in its init script.</strong></li>\n<li><strong>Directory of the file that is passed to python command serves as a root of local imports.</strong></li>\n<li><strong>For relative imports use <code class=\"python hljs\"><span class=\"hljs-string\">'from .[…][&lt;pkg/module&gt;[.…]] import &lt;obj&gt;'</span></code>.</strong></li>\n</ul>\n<div><h2 id=\"closure\"><a href=\"#closure\" name=\"closure\">#</a>Closure</h2><p><strong>We have/get a closure in Python when a nested function references a value of its enclosing function and then the enclosing function returns its nested function.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_multiplier</span><span class=\"hljs-params\">(a)</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">out</span><span class=\"hljs-params\">(b)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> a * b\n    <span class=\"hljs-keyword\">return</span> out\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>multiply_by_3 = get_multiplier(<span class=\"hljs-number\">3</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>multiply_by_3(<span class=\"hljs-number\">10</span>)\n<span class=\"hljs-number\">30</span>\n</code></pre>\n<ul>\n<li><strong>Any value that is referenced from within multiple nested functions gets shared.</strong></li>\n</ul>\n<div><h3 id=\"partial\">Partial</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial\n&lt;function&gt; = partial(&lt;function&gt; [, &lt;arg_1&gt; [, ...]])\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">multiply</span><span class=\"hljs-params\">(a, b)</span>:</span>\n<span class=\"hljs-meta\">... </span>    <span class=\"hljs-keyword\">return</span> a * b\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>multiply_by_3 = partial(multiply, <span class=\"hljs-number\">3</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>multiply_by_3(<span class=\"hljs-number\">10</span>)\n<span class=\"hljs-number\">30</span>\n</code></pre>\n<ul>\n<li><strong>Partial is also useful in cases when a function needs to be passed as an argument because it enables us to set its arguments beforehand.</strong></li>\n<li><strong>A few examples being: <code class=\"python hljs\"><span class=\"hljs-string\">'defaultdict(&lt;func&gt;)'</span></code>, <code class=\"python hljs\"><span class=\"hljs-string\">'iter(&lt;func&gt;, to_exc)'</span></code> and dataclass's <code class=\"python hljs\"><span class=\"hljs-string\">'field(default_factory=&lt;func&gt;)'</span></code>.</strong></li>\n</ul>\n<div><h3 id=\"nonlocal\">Non-Local</h3><p><strong>If variable is being assigned to anywhere in the scope, it is regarded as a local variable, unless it is declared as a 'global' or a 'nonlocal'.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_counter</span><span class=\"hljs-params\">()</span>:</span>\n    i = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">out</span><span class=\"hljs-params\">()</span>:</span>\n        <span class=\"hljs-keyword\">nonlocal</span> i\n        i += <span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">return</span> i\n    <span class=\"hljs-keyword\">return</span> out\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>counter = get_counter()\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>counter(), counter(), counter()\n(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>)\n</code></pre>\n<div class=\"pagebreak\"></div><div><h2 id=\"decorator\"><a href=\"#decorator\" name=\"decorator\">#</a>Decorator</h2><ul>\n<li><strong>A decorator takes a function, adds some functionality and returns it.</strong></li>\n<li><strong>It can be any <a href=\"#callable\">callable</a>, but is usually implemented as a function that returns a <a href=\"#closure\">closure</a>.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">@decorator_name</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">function_that_gets_passed_to_decorator</span><span class=\"hljs-params\">()</span>:</span>\n    ...\n</code></pre></div>\n\n\n<div><h3 id=\"debuggerexample\">Debugger Example</h3><p><strong>Decorator that prints function's name every time the function is called.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> wraps\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">debug</span><span class=\"hljs-params\">(func)</span>:</span>\n<span class=\"hljs-meta\">    @wraps(func)</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">out</span><span class=\"hljs-params\">(*args, **kwargs)</span>:</span>\n        print(func.__name__)\n        <span class=\"hljs-keyword\">return</span> func(*args, **kwargs)\n    <span class=\"hljs-keyword\">return</span> out\n\n<span class=\"hljs-meta\">@debug</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">add</span><span class=\"hljs-params\">(x, y)</span>:</span>\n    <span class=\"hljs-keyword\">return</span> x + y\n</code></pre></div>\n\n\n<ul>\n<li><strong>Wraps is a helper decorator that copies the metadata of the passed function (func) to the function it is wrapping (out). Without it, <code class=\"python hljs\"><span class=\"hljs-string\">'add.__name__'</span></code> would return <code class=\"python hljs\"><span class=\"hljs-string\">'out'</span></code>.</strong></li>\n</ul>\n<div><h3 id=\"cache\">Cache</h3><p><strong>Decorator that caches function's return values. All function's arguments must be hashable.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> cache\n\n<span class=\"hljs-meta\">@cache</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">fib</span><span class=\"hljs-params\">(n)</span>:</span>\n    <span class=\"hljs-keyword\">return</span> n <span class=\"hljs-keyword\">if</span> n &lt; <span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">else</span> fib(n-<span class=\"hljs-number\">2</span>) + fib(n-<span class=\"hljs-number\">1</span>)</code></pre></div>\n\n\n<ul>\n<li><strong>Potential problem with cache is that it can grow indefinitely. To clear stored values run <code class=\"python hljs\"><span class=\"hljs-string\">'fib.cache_clear()'</span></code>, or use <code class=\"python hljs\"><span class=\"hljs-string\">'@lru_cache(maxsize=&lt;int&gt;)'</span></code> decorator instead.</strong></li>\n<li><strong>CPython interpreter limits recursion depth to 3000 by default. To increase it run <code class=\"python hljs\"><span class=\"hljs-string\">'sys.setrecursionlimit(&lt;int&gt;)'</span></code>.</strong></li>\n</ul>\n<div><h3 id=\"parametrizeddecorator\">Parametrized Decorator</h3><p><strong>A decorator that accepts arguments and returns a normal decorator that accepts a function.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> wraps\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">debug</span><span class=\"hljs-params\">(print_result=<span class=\"hljs-keyword\">False</span>)</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">decorator</span><span class=\"hljs-params\">(func)</span>:</span>\n<span class=\"hljs-meta\">        @wraps(func)</span>\n        <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">out</span><span class=\"hljs-params\">(*args, **kwargs)</span>:</span>\n            result = func(*args, **kwargs)\n            print(func.__name__, result <span class=\"hljs-keyword\">if</span> print_result <span class=\"hljs-keyword\">else</span> <span class=\"hljs-string\">''</span>)\n            <span class=\"hljs-keyword\">return</span> result\n        <span class=\"hljs-keyword\">return</span> out\n    <span class=\"hljs-keyword\">return</span> decorator\n\n<span class=\"hljs-meta\">@debug(print_result=True)</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">add</span><span class=\"hljs-params\">(x, y)</span>:</span>\n    <span class=\"hljs-keyword\">return</span> x + y\n</code></pre></div>\n\n\n<ul>\n<li><strong>Using only <code class=\"python hljs\"><span class=\"hljs-string\">'@debug'</span></code> to decorate the add() function would not work here, because debug would then receive the add() function as a 'print_result' argument. Decorators can however manually check if the argument they received is a function and act accordingly.</strong></li>\n</ul>\n<div><h2 id=\"class\"><a href=\"#class\" name=\"class\">#</a>Class</h2><p><strong>A template for creating user-defined objects.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyClass</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, a)</span>:</span>\n        self.a = a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__str__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> str(self.a)\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__repr__</span><span class=\"hljs-params\">(self)</span>:</span>\n        class_name = self.__class__.__name__\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">f'<span class=\"hljs-subst\">{class_name}</span>(<span class=\"hljs-subst\">{self.a!r}</span>)'</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_class_name</span><span class=\"hljs-params\">(cls)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> cls.__name__\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>obj = MyClass(<span class=\"hljs-number\">1</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>obj.a, str(obj), repr(obj)\n(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">'1'</span>, <span class=\"hljs-string\">'MyClass(1)'</span>)\n</code></pre>\n<ul>\n<li><strong>Return value of str() should be readable and of repr() unambiguous.</strong></li>\n<li><strong>If only repr() is defined, it will also be used for str().</strong></li>\n<li><strong>Methods decorated with <code class=\"python hljs\"><span class=\"hljs-string\">'@staticmethod'</span></code> do not receive 'self' nor 'cls' as their first argument.</strong></li>\n</ul>\n<div><h4 id=\"expressionsthatcallthestrmethod\">Expressions that call the str() method:</h4><pre><code class=\"python language-python hljs\">print(&lt;obj&gt;)\n<span class=\"hljs-string\">f'<span class=\"hljs-subst\">{&lt;obj&gt;}</span>'</span>\nlogging.warning(&lt;obj&gt;)\ncsv.writer(&lt;file&gt;).writerow([&lt;obj&gt;])\n<span class=\"hljs-keyword\">raise</span> Exception(&lt;obj&gt;)\n</code></pre></div>\n\n<div><h4 id=\"expressionsthatcallthereprmethod\">Expressions that call the repr() method:</h4><pre><code class=\"python language-python hljs\">print/str/repr([&lt;obj&gt;])\nprint/str/repr({&lt;obj&gt;: &lt;obj&gt;})\n<span class=\"hljs-string\">f'<span class=\"hljs-subst\">{&lt;obj&gt;!r}</span>'</span>\nZ = dataclasses.make_dataclass(<span class=\"hljs-string\">'Z'</span>, [<span class=\"hljs-string\">'a'</span>]); print/str/repr(Z(&lt;obj&gt;))\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>&lt;obj&gt;\n</code></pre></div>\n\n<div><h3 id=\"inheritance\">Inheritance</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Person</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, name)</span>:</span>\n        self.name = name\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Employee</span><span class=\"hljs-params\">(Person)</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, name, staff_num)</span>:</span>\n        super().__init__(name)\n        self.staff_num = staff_num\n</code></pre></div>\n\n<div><h4 id=\"multipleinheritance\">Multiple inheritance:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">A</span>:</span> <span class=\"hljs-keyword\">pass</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">B</span>:</span> <span class=\"hljs-keyword\">pass</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">C</span><span class=\"hljs-params\">(A, B)</span>:</span> <span class=\"hljs-keyword\">pass</span>\n</code></pre></div>\n\n<p><strong>MRO determines the order in which parent classes are traversed when searching for a method or an attribute:</strong></p>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>C.mro()\n[&lt;<span class=\"hljs-class\"><span class=\"hljs-title\">class</span> '<span class=\"hljs-title\">C</span>'&gt;, &lt;<span class=\"hljs-title\">class</span> '<span class=\"hljs-title\">A</span>'&gt;, &lt;<span class=\"hljs-title\">class</span> '<span class=\"hljs-title\">B</span>'&gt;, &lt;<span class=\"hljs-title\">class</span> '<span class=\"hljs-title\">object</span>'&gt;]\n</span></code></pre>\n<div><h3 id=\"typeannotations\">Type Annotations</h3><ul>\n<li><strong>They add type hints to variables, arguments and functions (<code class=\"python hljs\"><span class=\"hljs-string\">'def f() -&gt; &lt;type&gt;:'</span></code>).</strong></li>\n<li><strong>Hints are used by type checkers like <a href=\"https://pypi.org/project/mypy/\">mypy</a>, data validation libraries such as <a href=\"https://pypi.org/project/pydantic/\">Pydantic</a> and lately also by <a href=\"https://pypi.org/project/Cython/\">Cython</a> compiler. However, they are not enforced by CPython interpreter.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> collections <span class=\"hljs-keyword\">import</span> abc\n\n&lt;name&gt;: &lt;type&gt; [| ...] [= &lt;obj&gt;]                              <span class=\"hljs-comment\"># `|` since 3.10.</span>\n&lt;name&gt;: list/set/abc.Iterable/abc.Sequence[&lt;type&gt;] [= &lt;obj&gt;]  <span class=\"hljs-comment\"># Since 3.9.</span>\n&lt;name&gt;: dict/tuple[&lt;type&gt;, ...] [= &lt;obj&gt;]                     <span class=\"hljs-comment\"># Since 3.9.</span>\n</code></pre></div>\n\n\n<div><h3 id=\"dataclass\">Dataclass</h3><p><strong>Decorator that uses class variables to generate init(), repr() and eq() special methods.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> dataclasses <span class=\"hljs-keyword\">import</span> dataclass, field, make_dataclass\n\n<span class=\"hljs-meta\">@dataclass(order=False, frozen=False)</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> &lt;<span class=\"hljs-title\">class_name</span>&gt;:</span>\n    &lt;attr_name&gt;: &lt;type&gt;\n    &lt;attr_name&gt;: &lt;type&gt; = &lt;default_value&gt;\n    &lt;attr_name&gt;: list/dict/set = field(default_factory=list/dict/set)\n</code></pre></div>\n\n\n<ul>\n<li><strong>Objects can be made <a href=\"#sortable\">sortable</a> with <code class=\"python hljs\"><span class=\"hljs-string\">'order=True'</span></code> and immutable with <code class=\"python hljs\"><span class=\"hljs-string\">'frozen=True'</span></code>.</strong></li>\n<li><strong>For object to be <a href=\"#hashable\">hashable</a>, all attributes must be hashable and 'frozen' must be True.</strong></li>\n<li><strong>Function field() is needed because <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;attr_name&gt;: list = []'</span></code> would make a list that is shared among all instances. Its 'default_factory' argument can be any <a href=\"#callable\">callable</a>.</strong></li>\n<li><strong>For attributes of arbitrary type use <code class=\"python hljs\"><span class=\"hljs-string\">'typing.Any'</span></code>.</strong></li>\n</ul>\n<pre><code class=\"python language-python hljs\">Point = make_dataclass(<span class=\"hljs-string\">'Point'</span>, [<span class=\"hljs-string\">'x'</span>, <span class=\"hljs-string\">'y'</span>])\nPoint = make_dataclass(<span class=\"hljs-string\">'Point'</span>, [(<span class=\"hljs-string\">'x'</span>, float), (<span class=\"hljs-string\">'y'</span>, float)])\nPoint = make_dataclass(<span class=\"hljs-string\">'Point'</span>, [(<span class=\"hljs-string\">'x'</span>, float, <span class=\"hljs-number\">0</span>), (<span class=\"hljs-string\">'y'</span>, float, <span class=\"hljs-number\">0</span>)])\n</code></pre>\n<div><h3 id=\"property\">Property</h3><p><strong>Pythonic way of implementing getters and setters.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Person</span>:</span>\n<span class=\"hljs-meta\">    @property</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">name</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">' '</span>.join(self._name)\n\n<span class=\"hljs-meta\">    @name.setter</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">name</span><span class=\"hljs-params\">(self, value)</span>:</span>\n        self._name = value.split()\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>person = Person()\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>person.name = <span class=\"hljs-string\">'\\t Guido  van Rossum \\n'</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>person.name\n<span class=\"hljs-string\">'Guido van Rossum'</span>\n</code></pre>\n<div><h3 id=\"slots\">Slots</h3><p><strong>Mechanism that restricts objects to attributes listed in 'slots', reduces their memory footprint.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyClassWithSlots</span>:</span>\n    __slots__ = [<span class=\"hljs-string\">'a'</span>]\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self)</span>:</span>\n        self.a = <span class=\"hljs-number\">1</span>\n</code></pre></div>\n\n\n<div><h3 id=\"copy\">Copy</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> copy <span class=\"hljs-keyword\">import</span> copy, deepcopy\n&lt;object&gt; = copy/deepcopy(&lt;object&gt;)\n</code></pre></div>\n\n<div><h2 id=\"ducktypes\"><a href=\"#ducktypes\" name=\"ducktypes\">#</a>Duck Types</h2><p><strong>A duck type is an implicit type that prescribes a set of special methods. Any object that has those methods defined is considered a member of that duck type.</strong></p><div><h3 id=\"comparable\">Comparable</h3><ul>\n<li><strong>If eq() method is not overridden, it returns <code class=\"python hljs\"><span class=\"hljs-string\">'id(self) == id(other)'</span></code>, which is the same as <code class=\"python hljs\"><span class=\"hljs-string\">'self is other'</span></code>.</strong></li>\n<li><strong>That means all objects compare not equal by default.</strong></li>\n<li><strong>Only the left side object has eq() method called, unless it returns NotImplemented, in which case the right object is consulted. False is returned if both return NotImplemented.</strong></li>\n<li><strong>Ne() automatically works on any object that has eq() defined.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyComparable</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, a)</span>:</span>\n        self.a = a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__eq__</span><span class=\"hljs-params\">(self, other)</span>:</span>\n        <span class=\"hljs-keyword\">if</span> isinstance(other, type(self)):\n            <span class=\"hljs-keyword\">return</span> self.a == other.a\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">NotImplemented</span>\n</code></pre></div></div>\n\n\n\n\n<div><h3 id=\"hashable\">Hashable</h3><ul>\n<li><strong>Hashable object needs both hash() and eq() methods and its hash value should never change.</strong></li>\n<li><strong>Hashable objects that compare equal must have the same hash value, meaning default hash() that returns <code class=\"python hljs\"><span class=\"hljs-string\">'id(self)'</span></code> will not do.</strong></li>\n<li><strong>That is why Python automatically makes classes unhashable if you only implement eq().</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyHashable</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, a)</span>:</span>\n        self._a = a\n<span class=\"hljs-meta\">    @property</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">a</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> self._a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__eq__</span><span class=\"hljs-params\">(self, other)</span>:</span>\n        <span class=\"hljs-keyword\">if</span> isinstance(other, type(self)):\n            <span class=\"hljs-keyword\">return</span> self.a == other.a\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">NotImplemented</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__hash__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> hash(self.a)\n</code></pre></div>\n\n\n<div><h3 id=\"sortable\">Sortable</h3><ul>\n<li><strong>With 'total_ordering' decorator, you only need to provide eq() and one of lt(), gt(), le() or ge() special methods and the rest will be automatically generated.</strong></li>\n<li><strong>Functions sorted() and min() only require lt() method, while max() only requires gt(). However, it is best to define them all so that confusion doesn't arise in other contexts.</strong></li>\n<li><strong>When two lists, strings or dataclasses are compared, their values get compared in order until a pair of unequal values is found. The comparison of this two values is then returned. The shorter sequence is considered smaller in case of all values being equal.</strong></li>\n<li><strong>To sort collection of strings in proper alphabetical order pass <code class=\"python hljs\"><span class=\"hljs-string\">'key=locale.strxfrm'</span></code> to sorted() after running <code class=\"python hljs\"><span class=\"hljs-string\">'locale.setlocale(locale.LC_COLLATE, \"en_US.UTF-8\")'</span></code>.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> total_ordering\n\n<span class=\"hljs-meta\">@total_ordering</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MySortable</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, a)</span>:</span>\n        self.a = a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__eq__</span><span class=\"hljs-params\">(self, other)</span>:</span>\n        <span class=\"hljs-keyword\">if</span> isinstance(other, type(self)):\n            <span class=\"hljs-keyword\">return</span> self.a == other.a\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">NotImplemented</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__lt__</span><span class=\"hljs-params\">(self, other)</span>:</span>\n        <span class=\"hljs-keyword\">if</span> isinstance(other, type(self)):\n            <span class=\"hljs-keyword\">return</span> self.a &lt; other.a\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">NotImplemented</span>\n</code></pre></div>\n\n\n<div><h3 id=\"iterator-1\">Iterator</h3><ul>\n<li><strong>Any object that has methods next() and iter() is an iterator.</strong></li>\n<li><strong>Next() should return next item or raise StopIteration exception.</strong></li>\n<li><strong>Iter() should return 'self', i.e. unmodified object on which it was called.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Counter</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self)</span>:</span>\n        self.i = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__next__</span><span class=\"hljs-params\">(self)</span>:</span>\n        self.i += <span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">return</span> self.i\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__iter__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> self\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>counter = Counter()\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>next(counter), next(counter), next(counter)\n(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>)\n</code></pre>\n<div><h4 id=\"pythonhasmanydifferentiteratorobjects\">Python has many different iterator objects:</h4><ul>\n<li><strong>Sequence iterators returned by the <a href=\"#iterator\">iter()</a> function, such as list_iterator and set_iterator.</strong></li>\n<li><strong>Objects returned by the <a href=\"#itertools\">itertools</a> module, such as count, repeat and cycle.</strong></li>\n<li><strong>Generators returned by the <a href=\"#generator\">generator functions</a> and <a href=\"#comprehensions\">generator expressions</a>.</strong></li>\n<li><strong>File objects returned by the <a href=\"#open\">open()</a> function, etc.</strong></li>\n</ul><div><h3 id=\"callable\">Callable</h3><ul>\n<li><strong>All functions and classes have a call() method, hence are callable.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'callable(&lt;obj&gt;)'</span></code> or <code class=\"python hljs\"><span class=\"hljs-string\">'isinstance(&lt;obj&gt;, collections.abc.Callable)'</span></code> to check if object is callable.</strong></li>\n<li><strong>When this cheatsheet uses <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;function&gt;'</span></code> as an argument, it means <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;callable&gt;'</span></code>.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Counter</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self)</span>:</span>\n        self.i = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__call__</span><span class=\"hljs-params\">(self)</span>:</span>\n        self.i += <span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">return</span> self.i\n</code></pre></div></div>\n\n\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>counter = Counter()\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>counter(), counter(), counter()\n(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>)\n</code></pre>\n<div><h3 id=\"contextmanager\">Context Manager</h3><ul>\n<li><strong>With statements only work on objects that have enter() and exit() special methods.</strong></li>\n<li><strong>Enter() should lock the resources and optionally return an object.</strong></li>\n<li><strong>Exit() should release the resources.</strong></li>\n<li><strong>Any exception that happens inside the with block is passed to the exit() method.</strong></li>\n<li><strong>The exit() method can suppress the exception by returning a true value.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyOpen</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, filename)</span>:</span>\n        self.filename = filename\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__enter__</span><span class=\"hljs-params\">(self)</span>:</span>\n        self.file = open(self.filename)\n        <span class=\"hljs-keyword\">return</span> self.file\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__exit__</span><span class=\"hljs-params\">(self, exc_type, exception, traceback)</span>:</span>\n        self.file.close()\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">with</span> open(<span class=\"hljs-string\">'test.txt'</span>, <span class=\"hljs-string\">'w'</span>) <span class=\"hljs-keyword\">as</span> file:\n<span class=\"hljs-meta\">... </span>    file.write(<span class=\"hljs-string\">'Hello World!'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">with</span> MyOpen(<span class=\"hljs-string\">'test.txt'</span>) <span class=\"hljs-keyword\">as</span> file:\n<span class=\"hljs-meta\">... </span>    print(file.read())\nHello World!\n</code></pre>\n<div><h2 id=\"iterableducktypes\"><a href=\"#iterableducktypes\" name=\"iterableducktypes\">#</a>Iterable Duck Types</h2><div><h3 id=\"iterable\">Iterable</h3><ul>\n<li><strong>Only required method is iter(). It should return an iterator of object's items.</strong></li>\n<li><strong>Contains() automatically works on any object that has iter() defined.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyIterable</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, a)</span>:</span>\n        self.a = a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__iter__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> iter(self.a)\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__contains__</span><span class=\"hljs-params\">(self, el)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> el <span class=\"hljs-keyword\">in</span> self.a\n</code></pre></div></div>\n\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>obj = MyIterable([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>])\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>[el <span class=\"hljs-keyword\">for</span> el <span class=\"hljs-keyword\">in</span> obj]\n[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">in</span> obj\n<span class=\"hljs-keyword\">True</span>\n</code></pre>\n<div><h3 id=\"collection\">Collection</h3><ul>\n<li><strong>Only required methods are iter() and len(). Len() should return the number of items.</strong></li>\n<li><strong>This cheatsheet actually means <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;iterable&gt;'</span></code> when it uses <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;collection&gt;'</span></code>.</strong></li>\n<li><strong>I chose not to use the name 'iterable' because it sounds scarier and more vague than 'collection'. The main drawback of this decision is that the reader could think a certain function doesn't accept iterators when it does, since iterators are the only built-in objects that are iterable but are not collections.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyCollection</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, a)</span>:</span>\n        self.a = a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__iter__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> iter(self.a)\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__contains__</span><span class=\"hljs-params\">(self, el)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> el <span class=\"hljs-keyword\">in</span> self.a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__len__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> len(self.a)\n</code></pre></div>\n\n\n<div><h3 id=\"sequence\">Sequence</h3><ul>\n<li><strong>Only required methods are getitem() and len().</strong></li>\n<li><strong>Getitem() should return an item at the passed index or raise IndexError.</strong></li>\n<li><strong>Iter() and contains() automatically work on any object that has getitem() defined.</strong></li>\n<li><strong>Reversed() automatically works on any object that has getitem() and len() defined. It returns reversed iterator of object's items.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MySequence</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, a)</span>:</span>\n        self.a = a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__iter__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> iter(self.a)\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__contains__</span><span class=\"hljs-params\">(self, el)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> el <span class=\"hljs-keyword\">in</span> self.a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__len__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> len(self.a)\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__getitem__</span><span class=\"hljs-params\">(self, i)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> self.a[i]\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__reversed__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> reversed(self.a)\n</code></pre></div>\n\n\n<div><h4 id=\"discrepanciesbetweenglossarydefinitionsandabstractbaseclasses\">Discrepancies between glossary definitions and abstract base classes:</h4><ul>\n<li><strong>Python's glossary defines iterable as any object with special methods iter() and/or getitem() and sequence as any object with getitem() and len(). It doesn't define collection.</strong></li>\n<li><strong>Passing ABC Iterable to isinstance() or issubclass() only checks whether object/class has special method iter(), while ABC Collection checks for iter(), contains() and len().</strong></li>\n</ul></div>\n\n\n\n\n<div><h3 id=\"abcsequence\">ABC Sequence</h3><ul>\n<li><strong>It's a richer interface than the basic sequence.</strong></li>\n<li><strong>Extending it generates iter(), contains(), reversed(), index() and count().</strong></li>\n<li><strong>Unlike <code class=\"python hljs\"><span class=\"hljs-string\">'abc.Iterable'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'abc.Collection'</span></code>, it is not a duck type. That is why <code class=\"python hljs\"><span class=\"hljs-string\">'issubclass(MySequence, abc.Sequence)'</span></code> would return False even if MySequence had all the methods defined. It however recognizes list, tuple, range, str, bytes, bytearray, array, memoryview and deque, since they are registered as Sequence's virtual subclasses.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> collections <span class=\"hljs-keyword\">import</span> abc\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyAbcSequence</span><span class=\"hljs-params\">(abc.Sequence)</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, a)</span>:</span>\n        self.a = a\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__len__</span><span class=\"hljs-params\">(self)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> len(self.a)\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__getitem__</span><span class=\"hljs-params\">(self, i)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> self.a[i]\n</code></pre></div><div><h4 id=\"tableofrequiredandautomaticallyavailablespecialmethods\">Table of required and automatically available special methods:</h4><pre><code class=\"text language-text\">┏━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━━━┓\n┃            │  Iterable  │ Collection │  Sequence  │ abc.Sequence ┃\n┠────────────┼────────────┼────────────┼────────────┼──────────────┨\n┃ iter()     │     !      │     !      │     ✓      │      ✓       ┃\n┃ contains() │     ✓      │     ✓      │     ✓      │      ✓       ┃\n┃ len()      │            │     !      │     !      │      !       ┃\n┃ getitem()  │            │            │     !      │      !       ┃\n┃ reversed() │            │            │     ✓      │      ✓       ┃\n┃ index()    │            │            │            │      ✓       ┃\n┃ count()    │            │            │            │      ✓       ┃\n┗━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━━━┛\n</code></pre></div>\n\n<ul>\n<li><strong>Method iter() is required for <code class=\"python hljs\"><span class=\"hljs-string\">'isinstance(&lt;obj&gt;, abc.Iterable)'</span></code> to return True, however any object with getitem() will work with any code expecting an iterable.</strong></li>\n<li><strong>MutableSequence, Set, MutableSet, Mapping and MutableMapping ABCs are also extendable. Use <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;abc&gt;.__abstractmethods__'</span></code> to get names of required methods.</strong></li>\n</ul>\n<div><h2 id=\"enum\"><a href=\"#enum\" name=\"enum\">#</a>Enum</h2><p><strong>Class of named constants called members.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> enum <span class=\"hljs-keyword\">import</span> Enum, auto\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> &lt;<span class=\"hljs-title\">enum_name</span>&gt;<span class=\"hljs-params\">(Enum)</span>:</span>\n    &lt;member_name&gt; = auto()              <span class=\"hljs-comment\"># Increment of the last numeric value or 1.</span>\n    &lt;member_name&gt; = &lt;value&gt;             <span class=\"hljs-comment\"># Values don't have to be hashable.</span>\n    &lt;member_name&gt; = &lt;el_1&gt;, &lt;el_2&gt;      <span class=\"hljs-comment\"># Values can be collections (this is a tuple).</span>\n</code></pre>\n<ul>\n<li><strong>Methods receive the member they were called on as the 'self' argument.</strong></li>\n<li><strong>Accessing a member named after a reserved keyword causes SyntaxError.</strong></li>\n</ul>\n<pre><code class=\"python language-python hljs\">&lt;member&gt; = &lt;enum&gt;.&lt;member_name&gt;         <span class=\"hljs-comment\"># Returns a member. Raises AttributeError.</span>\n&lt;member&gt; = &lt;enum&gt;[<span class=\"hljs-string\">'&lt;member_name&gt;'</span>]      <span class=\"hljs-comment\"># Returns a member. Raises KeyError.</span>\n&lt;member&gt; = &lt;enum&gt;(&lt;value&gt;)              <span class=\"hljs-comment\"># Returns a member. Raises ValueError.</span>\n&lt;str&gt;    = &lt;member&gt;.name                <span class=\"hljs-comment\"># Returns member's name.</span>\n&lt;obj&gt;    = &lt;member&gt;.value               <span class=\"hljs-comment\"># Returns member's value.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;list&gt;   = list(&lt;enum&gt;)                 <span class=\"hljs-comment\"># Returns enum's members.</span>\n&lt;list&gt;   = [a.name <span class=\"hljs-keyword\">for</span> a <span class=\"hljs-keyword\">in</span> &lt;enum&gt;]     <span class=\"hljs-comment\"># Returns enum's member names.</span>\n&lt;list&gt;   = [a.value <span class=\"hljs-keyword\">for</span> a <span class=\"hljs-keyword\">in</span> &lt;enum&gt;]    <span class=\"hljs-comment\"># Returns enum's member values.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;enum&gt;   = type(&lt;member&gt;)               <span class=\"hljs-comment\"># Returns member's enum.</span>\n&lt;iter&gt;   = itertools.cycle(&lt;enum&gt;)      <span class=\"hljs-comment\"># Returns endless iterator of members.</span>\n&lt;member&gt; = random.choice(list(&lt;enum&gt;))  <span class=\"hljs-comment\"># Returns a random member.</span>\n</code></pre>\n<div><h3 id=\"inline-1\">Inline</h3><pre><code class=\"python language-python hljs\">Cutlery = Enum(<span class=\"hljs-string\">'Cutlery'</span>, <span class=\"hljs-string\">'FORK KNIFE SPOON'</span>)\nCutlery = Enum(<span class=\"hljs-string\">'Cutlery'</span>, [<span class=\"hljs-string\">'FORK'</span>, <span class=\"hljs-string\">'KNIFE'</span>, <span class=\"hljs-string\">'SPOON'</span>])\nCutlery = Enum(<span class=\"hljs-string\">'Cutlery'</span>, {<span class=\"hljs-string\">'FORK'</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">'KNIFE'</span>: <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">'SPOON'</span>: <span class=\"hljs-number\">3</span>})\n</code></pre></div>\n\n<div><h4 id=\"userdefinedfunctionscannotbevaluessotheymustbewrapped\">User-defined functions cannot be values, so they must be wrapped:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial\nLogicOp = Enum(<span class=\"hljs-string\">'LogicOp'</span>, {<span class=\"hljs-string\">'AND'</span>: partial(<span class=\"hljs-keyword\">lambda</span> l, r: l <span class=\"hljs-keyword\">and</span> r),\n                           <span class=\"hljs-string\">'OR'</span>:  partial(<span class=\"hljs-keyword\">lambda</span> l, r: l <span class=\"hljs-keyword\">or</span> r)})\n</code></pre></div>\n\n<div><h2 id=\"exceptions\"><a href=\"#exceptions\" name=\"exceptions\">#</a>Exceptions</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">try</span>:\n    &lt;code&gt;\n<span class=\"hljs-keyword\">except</span> &lt;exception&gt;:\n    &lt;code&gt;\n</code></pre></div>\n\n<div><h3 id=\"complexexample\">Complex Example</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">try</span>:\n    &lt;code_1&gt;\n<span class=\"hljs-keyword\">except</span> &lt;exception_a&gt;:\n    &lt;code_2_a&gt;\n<span class=\"hljs-keyword\">except</span> &lt;exception_b&gt;:\n    &lt;code_2_b&gt;\n<span class=\"hljs-keyword\">else</span>:\n    &lt;code_2_c&gt;\n<span class=\"hljs-keyword\">finally</span>:\n    &lt;code_3&gt;\n</code></pre></div>\n\n<ul>\n<li><strong>Code inside the <code class=\"python hljs\"><span class=\"hljs-string\">'else'</span></code> block will only be executed if <code class=\"python hljs\"><span class=\"hljs-string\">'try'</span></code> block had no exceptions.</strong></li>\n<li><strong>Code inside the <code class=\"python hljs\"><span class=\"hljs-string\">'finally'</span></code> block will always be executed (unless a signal is received).</strong></li>\n<li><strong>All variables that are initialized in executed blocks are also visible in all subsequent blocks, as well as outside the try statement (only function block delimits scope).</strong></li>\n<li><strong>To catch signals use <code class=\"python hljs\"><span class=\"hljs-string\">'signal.signal(signal_number, &lt;func&gt;)'</span></code>.</strong></li>\n</ul>\n<div><h3 id=\"catchingexceptions\">Catching Exceptions</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">except</span> &lt;exception&gt;: ...\n<span class=\"hljs-keyword\">except</span> &lt;exception&gt; <span class=\"hljs-keyword\">as</span> &lt;name&gt;: ...\n<span class=\"hljs-keyword\">except</span> (&lt;exception&gt;, [...]): ...\n<span class=\"hljs-keyword\">except</span> (&lt;exception&gt;, [...]) <span class=\"hljs-keyword\">as</span> &lt;name&gt;: ...\n</code></pre></div>\n\n<ul>\n<li><strong>Also catches subclasses of the exception.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'traceback.print_exc()'</span></code> to print the full error message to stderr.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'print(&lt;name&gt;)'</span></code> to print just the cause of the exception (its arguments).</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'logging.exception(&lt;str&gt;)'</span></code> to log the passed message, followed by the full error message of the caught exception. For details see <a href=\"#logging\">Logging</a>.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'sys.exc_info()'</span></code> to get exception type, object, and traceback of caught exception.</strong></li>\n</ul>\n<div><h3 id=\"raisingexceptions\">Raising Exceptions</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">raise</span> &lt;exception&gt;\n<span class=\"hljs-keyword\">raise</span> &lt;exception&gt;()\n<span class=\"hljs-keyword\">raise</span> &lt;exception&gt;(&lt;obj&gt; [, ...])\n</code></pre></div>\n\n<div><h4 id=\"reraisingcaughtexception\">Re-raising caught exception:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">except</span> &lt;exception&gt; [<span class=\"hljs-keyword\">as</span> &lt;name&gt;]:\n    ...\n    <span class=\"hljs-keyword\">raise</span>\n</code></pre></div>\n\n<div><h3 id=\"exceptionobject\">Exception Object</h3><pre><code class=\"python language-python hljs\">arguments = &lt;name&gt;.args\nexc_type  = &lt;name&gt;.__class__\nfilename  = &lt;name&gt;.__traceback__.tb_frame.f_code.co_filename\nfunc_name = &lt;name&gt;.__traceback__.tb_frame.f_code.co_name\nline      = linecache.getline(filename, &lt;name&gt;.__traceback__.tb_lineno)\ntrace_str = <span class=\"hljs-string\">''</span>.join(traceback.format_tb(&lt;name&gt;.__traceback__))\nerror_msg = <span class=\"hljs-string\">''</span>.join(traceback.format_exception(type(&lt;name&gt;), &lt;name&gt;, &lt;name&gt;.__traceback__))\n</code></pre></div>\n\n<div><h3 id=\"builtinexceptions\">Built-in Exceptions</h3><pre><code class=\"text language-text\">BaseException\n ├── SystemExit                   <span class=\"hljs-comment\"># Raised by the sys.exit() function.</span>\n ├── KeyboardInterrupt            <span class=\"hljs-comment\"># Raised when the user hits the interrupt key (ctrl-c).</span>\n └── Exception                    <span class=\"hljs-comment\"># User-defined exceptions should be derived from this class.</span>\n      ├── ArithmeticError         <span class=\"hljs-comment\"># Base class for arithmetic errors such as ZeroDivisionError.</span>\n      ├── AssertionError          <span class=\"hljs-comment\"># Raised by `assert &lt;exp&gt;` if expression returns false value.</span>\n      ├── AttributeError          <span class=\"hljs-comment\"># Raised when object doesn't have requested attribute/method.</span>\n      ├── EOFError                <span class=\"hljs-comment\"># Raised by input() when it hits an end-of-file condition.</span>\n      ├── LookupError             <span class=\"hljs-comment\"># Base class for errors when a collection can't find an item.</span>\n      │    ├── IndexError         <span class=\"hljs-comment\"># Raised when a sequence index is out of range.</span>\n      │    └── KeyError           <span class=\"hljs-comment\"># Raised when a dictionary key or set element is missing.</span>\n      ├── MemoryError             <span class=\"hljs-comment\"># Out of memory. May be too late to start deleting variables.</span>\n      ├── NameError               <span class=\"hljs-comment\"># Raised when nonexistent name (variable/func/class) is used.</span>\n      │    └── UnboundLocalError  <span class=\"hljs-comment\"># Raised when local name is used before it's being defined.</span>\n      ├── OSError                 <span class=\"hljs-comment\"># Errors such as FileExistsError/TimeoutError (see #Open).</span>\n      │    └── ConnectionError    <span class=\"hljs-comment\"># Errors such as BrokenPipeError/ConnectionAbortedError.</span>\n      ├── RuntimeError            <span class=\"hljs-comment\"># Raised by errors that don't fall into other categories.</span>\n      │    ├── NotImplementedEr…  <span class=\"hljs-comment\"># Can be raised by abstract methods or by unfinished code.</span>\n      │    └── RecursionError     <span class=\"hljs-comment\"># Raised when the maximum recursion depth is exceeded.</span>\n      ├── StopIteration           <span class=\"hljs-comment\"># Raised when an empty iterator is passed to next().</span>\n      ├── TypeError               <span class=\"hljs-comment\"># When an argument of the wrong type is passed to function.</span>\n      └── ValueError              <span class=\"hljs-comment\"># When argument has the right type but inappropriate value.</span>\n</code></pre></div>\n\n<div><h4 id=\"collectionsandtheirexceptions\">Collections and their exceptions:</h4><pre><code class=\"text language-text\">┏━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┓\n┃           │    List    │    Set     │    Dict    ┃\n┠───────────┼────────────┼────────────┼────────────┨\n┃ getitem() │ IndexError │            │  KeyError  ┃\n┃ pop()     │ IndexError │  KeyError  │  KeyError  ┃\n┃ remove()  │ ValueError │  KeyError  │            ┃\n┃ index()   │ ValueError │            │            ┃\n┗━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┛\n</code></pre></div>\n\n<div><h4 id=\"usefulbuiltinexceptions\">Useful built-in exceptions:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">raise</span> TypeError(<span class=\"hljs-string\">'Argument is of the wrong type!'</span>)\n<span class=\"hljs-keyword\">raise</span> ValueError(<span class=\"hljs-string\">'Argument has the right type but an inappropriate value!'</span>)\n<span class=\"hljs-keyword\">raise</span> RuntimeError(<span class=\"hljs-string\">'I am too lazy to define my own exception!'</span>)\n</code></pre></div>\n\n<div><h3 id=\"userdefinedexceptions\">User-defined Exceptions</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyError</span><span class=\"hljs-params\">(Exception)</span>:</span> <span class=\"hljs-keyword\">pass</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyInputError</span><span class=\"hljs-params\">(MyError)</span>:</span> <span class=\"hljs-keyword\">pass</span>\n</code></pre></div>\n\n<div><h2 id=\"exit\"><a href=\"#exit\" name=\"exit\">#</a>Exit</h2><p><strong>Exits the interpreter by raising SystemExit exception.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> sys\nsys.exit()                        <span class=\"hljs-comment\"># Exits with exit code 0 (success).</span>\nsys.exit(&lt;int&gt;)                   <span class=\"hljs-comment\"># Exits with the passed exit code.</span>\nsys.exit(&lt;obj&gt;)                   <span class=\"hljs-comment\"># Prints to stderr and exits with 1.</span>\n</code></pre></div>\n\n\n<div><h2 id=\"print\"><a href=\"#print\" name=\"print\">#</a>Print</h2><pre><code class=\"python language-python hljs\">print(&lt;el_1&gt;, ..., sep=<span class=\"hljs-string\">' '</span>, end=<span class=\"hljs-string\">'\\n'</span>, file=sys.stdout, flush=<span class=\"hljs-keyword\">False</span>)\n</code></pre></div>\n\n<ul>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'file=sys.stderr'</span></code> for messages about errors.</strong></li>\n<li><strong>Stdout and stderr streams hold output in a buffer until they receive a string containing '\\n' or '\\r', buffer reaches 4096 characters, <code class=\"python hljs\"><span class=\"hljs-string\">'flush=True'</span></code> is used, or program exits.</strong></li>\n</ul>\n<div><h3 id=\"prettyprint\">Pretty Print</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> pprint <span class=\"hljs-keyword\">import</span> pprint\npprint(&lt;collection&gt;, width=<span class=\"hljs-number\">80</span>, depth=<span class=\"hljs-keyword\">None</span>, compact=<span class=\"hljs-keyword\">False</span>, sort_dicts=<span class=\"hljs-keyword\">True</span>)\n</code></pre></div>\n\n<ul>\n<li><strong>Each item is printed on its own line if collection exceeds 'width' characters.</strong></li>\n<li><strong>Nested collections that are 'depth' levels deep get printed as '…'.</strong></li>\n</ul>\n<div><h2 id=\"input\"><a href=\"#input\" name=\"input\">#</a>Input</h2><pre><code class=\"python language-python hljs\">&lt;str&gt; = input()\n</code></pre></div>\n\n<ul>\n<li><strong>Reads a line from the user input or pipe if present (trailing newline gets stripped).</strong></li>\n<li><strong>If argument is passed, it gets printed to the standard output before input is read.</strong></li>\n<li><strong>EOFError is raised if user hits EOF (ctrl-d/ctrl-z⏎) or input stream gets exhausted.</strong></li>\n</ul>\n<div><h2 id=\"commandlinearguments\"><a href=\"#commandlinearguments\" name=\"commandlinearguments\">#</a>Command Line Arguments</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> sys\nscripts_path = sys.argv[<span class=\"hljs-number\">0</span>]\narguments    = sys.argv[<span class=\"hljs-number\">1</span>:]\n</code></pre></div>\n\n<div><h3 id=\"argumentparser\">Argument Parser</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> argparse <span class=\"hljs-keyword\">import</span> ArgumentParser, FileType\np = ArgumentParser(description=&lt;str&gt;)                             <span class=\"hljs-comment\"># Returns a parser.</span>\np.add_argument(<span class=\"hljs-string\">'-&lt;short_name&gt;'</span>, <span class=\"hljs-string\">'--&lt;name&gt;'</span>, action=<span class=\"hljs-string\">'store_true'</span>)  <span class=\"hljs-comment\"># Flag (defaults to False).</span>\np.add_argument(<span class=\"hljs-string\">'-&lt;short_name&gt;'</span>, <span class=\"hljs-string\">'--&lt;name&gt;'</span>, type=&lt;type&gt;)          <span class=\"hljs-comment\"># Option (defaults to None).</span>\np.add_argument(<span class=\"hljs-string\">'&lt;name&gt;'</span>, type=&lt;type&gt;, nargs=<span class=\"hljs-number\">1</span>)                    <span class=\"hljs-comment\"># Mandatory first argument.</span>\np.add_argument(<span class=\"hljs-string\">'&lt;name&gt;'</span>, type=&lt;type&gt;, nargs=<span class=\"hljs-string\">'+'</span>)                  <span class=\"hljs-comment\"># Mandatory remaining args.</span>\np.add_argument(<span class=\"hljs-string\">'&lt;name&gt;'</span>, type=&lt;type&gt;, nargs=<span class=\"hljs-string\">'?/*'</span>)                <span class=\"hljs-comment\"># Optional argument/s.</span>\nargs  = p.parse_args()                                            <span class=\"hljs-comment\"># Exits on parsing error.</span>\n&lt;obj&gt; = args.&lt;name&gt;                                               <span class=\"hljs-comment\"># Returns `&lt;type&gt;(&lt;arg&gt;)`.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'help=&lt;str&gt;'</span></code> to set argument description that will be displayed in help message.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'default=&lt;obj&gt;'</span></code> to set option's or optional argument's default value.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'type=FileType(&lt;mode&gt;)'</span></code> for files. Accepts 'encoding', but 'newline' is None.</strong></li>\n</ul>\n<div><h2 id=\"open\"><a href=\"#open\" name=\"open\">#</a>Open</h2><p><strong>Opens a file and returns the corresponding file object.</strong></p><pre><code class=\"python language-python hljs\">&lt;file&gt; = open(&lt;path&gt;, mode=<span class=\"hljs-string\">'r'</span>, encoding=<span class=\"hljs-keyword\">None</span>, newline=<span class=\"hljs-keyword\">None</span>)\n</code></pre></div>\n\n\n<ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'encoding=None'</span></code> means that the default encoding is used, which is platform dependent. Best practice is to use <code class=\"python hljs\"><span class=\"hljs-string\">'encoding=\"utf-8\"'</span></code> whenever possible.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'newline=None'</span></code> means all different end of line combinations are converted to '\\n' on read, while on write all '\\n' characters are converted to system's default line separator.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'newline=\"\"'</span></code> means no conversions take place, but input is still broken into chunks by readline() and readlines() on every '\\n', '\\r' and '\\r\\n'.</strong></li>\n</ul>\n<div><h3 id=\"modes\">Modes</h3><ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'r'</span></code>  - Read. Used by default.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'w'</span></code>  - Write. Deletes existing contents.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'x'</span></code>  - Write or fail if the file already exists.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'a'</span></code>  - Append. Creates new file if it doesn't exist.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'w+'</span></code> - Read and write. Deletes existing contents.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'r+'</span></code> - Read and write from the start.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'a+'</span></code> - Read and write from the end.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'b'</span></code>  - Binary mode (<code class=\"python hljs\"><span class=\"hljs-string\">'rb'</span></code>, <code class=\"python hljs\"><span class=\"hljs-string\">'wb'</span></code>, <code class=\"python hljs\"><span class=\"hljs-string\">'xb'</span></code>, …).</strong></li>\n</ul><div><h3 id=\"exceptions-1\">Exceptions</h3><ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'FileNotFoundError'</span></code> can be raised when reading with <code class=\"python hljs\"><span class=\"hljs-string\">'r'</span></code> or <code class=\"python hljs\"><span class=\"hljs-string\">'r+'</span></code>.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'FileExistsError'</span></code> can be raised when writing with <code class=\"python hljs\"><span class=\"hljs-string\">'x'</span></code>.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'IsADirectoryError'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'PermissionError'</span></code> can be raised by any.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'OSError'</span></code> is the parent class of all listed exceptions.</strong></li>\n</ul><div><h3 id=\"fileobject\">File Object</h3><pre><code class=\"python language-python hljs\">&lt;file&gt;.seek(<span class=\"hljs-number\">0</span>)                      <span class=\"hljs-comment\"># Moves to the start of the file.</span>\n&lt;file&gt;.seek(offset)                 <span class=\"hljs-comment\"># Moves 'offset' chars/bytes from the start.</span>\n&lt;file&gt;.seek(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">2</span>)                   <span class=\"hljs-comment\"># Moves to the end of the file.</span>\n&lt;bin_file&gt;.seek(±offset, origin)    <span class=\"hljs-comment\"># Origin: 0 start, 1 current position, 2 end.</span>\n</code></pre></div></div></div>\n\n\n\n\n\n<pre><code class=\"python language-python hljs\">&lt;str/bytes&gt; = &lt;file&gt;.read(size=<span class=\"hljs-number\">-1</span>)  <span class=\"hljs-comment\"># Reads 'size' chars/bytes or until EOF.</span>\n&lt;str/bytes&gt; = &lt;file&gt;.readline()     <span class=\"hljs-comment\"># Returns a line or empty string/bytes on EOF.</span>\n&lt;list&gt;      = &lt;file&gt;.readlines()    <span class=\"hljs-comment\"># Returns a list of remaining lines.</span>\n&lt;str/bytes&gt; = next(&lt;file&gt;)          <span class=\"hljs-comment\"># Returns a line using buffer. Do not mix.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;file&gt;.write(&lt;str/bytes&gt;)           <span class=\"hljs-comment\"># Writes a string or bytes object.</span>\n&lt;file&gt;.writelines(&lt;collection&gt;)     <span class=\"hljs-comment\"># Writes a coll. of strings or bytes objects.</span>\n&lt;file&gt;.flush()                      <span class=\"hljs-comment\"># Flushes write buffer. Runs every 4096/8192 B.</span>\n&lt;file&gt;.close()                      <span class=\"hljs-comment\"># Closes the file after flushing write buffer.</span>\n</code></pre>\n<ul>\n<li><strong>Methods do not add or strip trailing newlines, not even writelines().</strong></li>\n</ul>\n<div><h3 id=\"readtextfromfile\">Read Text from File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">read_file</span><span class=\"hljs-params\">(filename)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, encoding=<span class=\"hljs-string\">'utf-8'</span>) <span class=\"hljs-keyword\">as</span> file:\n        <span class=\"hljs-keyword\">return</span> file.readlines()\n</code></pre></div>\n\n<div><h3 id=\"writetexttofile\">Write Text to File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">write_to_file</span><span class=\"hljs-params\">(filename, text)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, <span class=\"hljs-string\">'w'</span>, encoding=<span class=\"hljs-string\">'utf-8'</span>) <span class=\"hljs-keyword\">as</span> file:\n        file.write(text)\n</code></pre></div>\n\n<div><h2 id=\"paths\"><a href=\"#paths\" name=\"paths\">#</a>Paths</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> os, glob\n<span class=\"hljs-keyword\">from</span> pathlib <span class=\"hljs-keyword\">import</span> Path\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;str&gt;  = os.getcwd()                <span class=\"hljs-comment\"># Returns working dir. Starts as shell's $PWD.</span>\n&lt;str&gt;  = os.path.join(&lt;path&gt;, ...)  <span class=\"hljs-comment\"># Joins two or more pathname components.</span>\n&lt;str&gt;  = os.path.realpath(&lt;path&gt;)   <span class=\"hljs-comment\"># Resolves symlinks and calls path.abspath().</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;str&gt;  = os.path.basename(&lt;path&gt;)   <span class=\"hljs-comment\"># Returns final component of the path.</span>\n&lt;str&gt;  = os.path.dirname(&lt;path&gt;)    <span class=\"hljs-comment\"># Returns path without the final component.</span>\n&lt;tup.&gt; = os.path.splitext(&lt;path&gt;)   <span class=\"hljs-comment\"># Splits on last period of the final component.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;list&gt; = os.listdir(path=<span class=\"hljs-string\">'.'</span>)       <span class=\"hljs-comment\"># Returns filenames located at the path.</span>\n&lt;list&gt; = glob.glob(<span class=\"hljs-string\">'&lt;pattern&gt;'</span>)     <span class=\"hljs-comment\"># Returns paths matching the wildcard pattern.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;bool&gt; = os.path.exists(&lt;path&gt;)     <span class=\"hljs-comment\"># Or: &lt;Path&gt;.exists()</span>\n&lt;bool&gt; = os.path.isfile(&lt;path&gt;)     <span class=\"hljs-comment\"># Or: &lt;DirEntry/Path&gt;.is_file()</span>\n&lt;bool&gt; = os.path.isdir(&lt;path&gt;)      <span class=\"hljs-comment\"># Or: &lt;DirEntry/Path&gt;.is_dir()</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;stat&gt; = os.stat(&lt;path&gt;)            <span class=\"hljs-comment\"># Or: &lt;DirEntry/Path&gt;.stat()</span>\n&lt;num&gt;  = &lt;stat&gt;.st_mtime/st_size/…  <span class=\"hljs-comment\"># Modification time, size in bytes, etc.</span>\n</code></pre>\n<div><h3 id=\"direntry\">DirEntry</h3><p><strong>Unlike listdir(), scandir() returns DirEntry objects that cache isfile, isdir, and on Windows also stat information, thus significantly increasing the performance of code that requires it.</strong></p><pre><code class=\"python language-python hljs\">&lt;iter&gt; = os.scandir(path=<span class=\"hljs-string\">'.'</span>)       <span class=\"hljs-comment\"># Returns DirEntry objects located at the path.</span>\n&lt;str&gt;  = &lt;DirEntry&gt;.path            <span class=\"hljs-comment\"># Returns the whole path as a string.</span>\n&lt;str&gt;  = &lt;DirEntry&gt;.name            <span class=\"hljs-comment\"># Returns final component as a string.</span>\n&lt;file&gt; = open(&lt;DirEntry&gt;)           <span class=\"hljs-comment\"># Opens the file and returns a file object.</span>\n</code></pre></div>\n\n\n<div><h3 id=\"pathobject\">Path Object</h3><pre><code class=\"python language-python hljs\">&lt;Path&gt; = Path(&lt;path&gt; [, ...])       <span class=\"hljs-comment\"># Accepts strings, Paths, and DirEntry objects.</span>\n&lt;Path&gt; = &lt;path&gt; / &lt;path&gt; [/ ...]    <span class=\"hljs-comment\"># First or second path must be a Path object.</span>\n&lt;Path&gt; = &lt;Path&gt;.resolve()           <span class=\"hljs-comment\"># Returns absolute path with resolved symlinks.</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;Path&gt; = Path()                     <span class=\"hljs-comment\"># Returns relative CWD. Also Path('.').</span>\n&lt;Path&gt; = Path.cwd()                 <span class=\"hljs-comment\"># Returns absolute CWD. Also Path().resolve().</span>\n&lt;Path&gt; = Path.home()                <span class=\"hljs-comment\"># Returns user's home directory (absolute).</span>\n&lt;Path&gt; = Path(__file__).resolve()   <span class=\"hljs-comment\"># Returns script's path if CWD wasn't changed.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;Path&gt; = &lt;Path&gt;.parent              <span class=\"hljs-comment\"># Returns Path without the final component.</span>\n&lt;str&gt;  = &lt;Path&gt;.name                <span class=\"hljs-comment\"># Returns final component as a string.</span>\n&lt;str&gt;  = &lt;Path&gt;.stem                <span class=\"hljs-comment\"># Returns final component without extension.</span>\n&lt;str&gt;  = &lt;Path&gt;.suffix              <span class=\"hljs-comment\"># Returns final component's extension.</span>\n&lt;tup.&gt; = &lt;Path&gt;.parts               <span class=\"hljs-comment\"># Returns all components as strings.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;iter&gt; = &lt;Path&gt;.iterdir()           <span class=\"hljs-comment\"># Returns directory contents as Path objects.</span>\n&lt;iter&gt; = &lt;Path&gt;.glob(<span class=\"hljs-string\">'&lt;pattern&gt;'</span>)   <span class=\"hljs-comment\"># Returns Paths matching the wildcard pattern.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;str&gt;  = str(&lt;Path&gt;)                <span class=\"hljs-comment\"># Returns path as a string.</span>\n&lt;file&gt; = open(&lt;Path&gt;)               <span class=\"hljs-comment\"># Also &lt;Path&gt;.read/write_text/bytes(&lt;args&gt;).</span>\n</code></pre>\n<div><h2 id=\"oscommands\"><a href=\"#oscommands\" name=\"oscommands\">#</a>OS Commands</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> os, shutil, subprocess\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">os.chdir(&lt;path&gt;)                    <span class=\"hljs-comment\"># Changes the current working directory.</span>\nos.mkdir(&lt;path&gt;, mode=<span class=\"hljs-number\">0o777</span>)        <span class=\"hljs-comment\"># Creates a directory. Permissions are in octal.</span>\nos.makedirs(&lt;path&gt;, mode=<span class=\"hljs-number\">0o777</span>)     <span class=\"hljs-comment\"># Creates all path's dirs. Also `exist_ok=False`.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">shutil.copy(from, to)               <span class=\"hljs-comment\"># Copies the file. 'to' can exist or be a dir.</span>\nshutil.copy2(from, to)              <span class=\"hljs-comment\"># Also copies creation and modification time.</span>\nshutil.copytree(from, to)           <span class=\"hljs-comment\"># Copies the directory. 'to' must not exist.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">os.rename(from, to)                 <span class=\"hljs-comment\"># Renames/moves the file or directory.</span>\nos.replace(from, to)                <span class=\"hljs-comment\"># Same, but overwrites file 'to' even on Windows.</span>\nshutil.move(from, to)               <span class=\"hljs-comment\"># Rename() that moves into 'to' if it's a dir.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">os.remove(&lt;path&gt;)                   <span class=\"hljs-comment\"># Deletes the file.</span>\nos.rmdir(&lt;path&gt;)                    <span class=\"hljs-comment\"># Deletes the empty directory.</span>\nshutil.rmtree(&lt;path&gt;)               <span class=\"hljs-comment\"># Deletes the directory.</span>\n</code></pre>\n<ul>\n<li><strong>Paths can be either strings, Paths, or DirEntry objects.</strong></li>\n<li><strong>Functions report OS related errors by raising either OSError or one of its <a href=\"#exceptions-1\">subclasses</a>.</strong></li>\n</ul>\n<div><h3 id=\"shellcommands\">Shell Commands</h3><pre><code class=\"python language-python hljs\">&lt;pipe&gt; = os.popen(<span class=\"hljs-string\">'&lt;commands&gt;'</span>)     <span class=\"hljs-comment\"># Executes commands in sh/cmd. Returns combined stdout.</span>\n&lt;str&gt;  = &lt;pipe&gt;.read(size=<span class=\"hljs-number\">-1</span>)       <span class=\"hljs-comment\"># Reads 'size' chars or until EOF. Also readline/s().</span>\n&lt;int&gt;  = &lt;pipe&gt;.close()             <span class=\"hljs-comment\"># Returns None if last command exited with returncode 0.</span>\n</code></pre></div>\n\n<div><h4 id=\"sends11tothebasiccalculatorandcapturesitsoutput\">Sends '1 + 1' to the basic calculator and captures its output:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>subprocess.run(<span class=\"hljs-string\">'bc'</span>, input=<span class=\"hljs-string\">'1 + 1\\n'</span>, capture_output=<span class=\"hljs-keyword\">True</span>, text=<span class=\"hljs-keyword\">True</span>)\nCompletedProcess(args=<span class=\"hljs-string\">'bc'</span>, returncode=<span class=\"hljs-number\">0</span>, stdout=<span class=\"hljs-string\">'2\\n'</span>, stderr=<span class=\"hljs-string\">''</span>)\n</code></pre></div>\n\n<div><h4 id=\"sendstestintothebasiccalculatorrunninginstandardmodeandsavesitsoutputtotestout\">Sends test.in to the basic calculator running in standard mode and saves its output to test.out:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">from</span> shlex <span class=\"hljs-keyword\">import</span> split\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>os.popen(<span class=\"hljs-string\">'echo 1 + 1 &gt; test.in'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>subprocess.run(split(<span class=\"hljs-string\">'bc -s'</span>), stdin=open(<span class=\"hljs-string\">'test.in'</span>), stdout=open(<span class=\"hljs-string\">'test.out'</span>, <span class=\"hljs-string\">'w'</span>))\nCompletedProcess(args=[<span class=\"hljs-string\">'bc'</span>, <span class=\"hljs-string\">'-s'</span>], returncode=<span class=\"hljs-number\">0</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>open(<span class=\"hljs-string\">'test.out'</span>).read()\n<span class=\"hljs-string\">'2\\n'</span>\n</code></pre></div>\n\n<div><h2 id=\"json\"><a href=\"#json\" name=\"json\">#</a>JSON</h2><p><strong>Text file format for storing collections of strings and numbers.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> json\n&lt;str&gt;  = json.dumps(&lt;list/dict&gt;)    <span class=\"hljs-comment\"># Converts collection to JSON string.</span>\n&lt;coll&gt; = json.loads(&lt;str&gt;)          <span class=\"hljs-comment\"># Converts JSON string to collection.</span>\n</code></pre></div>\n\n\n<div><h3 id=\"readcollectionfromjsonfile\">Read Collection from JSON File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">read_json_file</span><span class=\"hljs-params\">(filename)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, encoding=<span class=\"hljs-string\">'utf-8'</span>) <span class=\"hljs-keyword\">as</span> file:\n        <span class=\"hljs-keyword\">return</span> json.load(file)\n</code></pre></div>\n\n<div><h3 id=\"writecollectiontojsonfile\">Write Collection to JSON File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">write_to_json_file</span><span class=\"hljs-params\">(filename, list_or_dict)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, <span class=\"hljs-string\">'w'</span>, encoding=<span class=\"hljs-string\">'utf-8'</span>) <span class=\"hljs-keyword\">as</span> file:\n        json.dump(list_or_dict, file, ensure_ascii=<span class=\"hljs-keyword\">False</span>, indent=<span class=\"hljs-number\">2</span>)\n</code></pre></div>\n\n<div><h2 id=\"pickle\"><a href=\"#pickle\" name=\"pickle\">#</a>Pickle</h2><p><strong>Binary file format for storing Python objects.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> pickle\n&lt;bytes&gt;  = pickle.dumps(&lt;object&gt;)   <span class=\"hljs-comment\"># Converts object to bytes object.</span>\n&lt;object&gt; = pickle.loads(&lt;bytes&gt;)    <span class=\"hljs-comment\"># Converts bytes object to object.</span>\n</code></pre></div>\n\n\n<div><h3 id=\"readobjectfromfile\">Read Object from File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">read_pickle_file</span><span class=\"hljs-params\">(filename)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, <span class=\"hljs-string\">'rb'</span>) <span class=\"hljs-keyword\">as</span> file:\n        <span class=\"hljs-keyword\">return</span> pickle.load(file)\n</code></pre></div>\n\n<div><h3 id=\"writeobjecttofile\">Write Object to File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">write_to_pickle_file</span><span class=\"hljs-params\">(filename, an_object)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, <span class=\"hljs-string\">'wb'</span>) <span class=\"hljs-keyword\">as</span> file:\n        pickle.dump(an_object, file)\n</code></pre></div>\n\n<div><h2 id=\"csv\"><a href=\"#csv\" name=\"csv\">#</a>CSV</h2><p><strong>Text file format for storing spreadsheets.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> csv\n</code></pre></div>\n\n\n<div><h3 id=\"read\">Read</h3><pre><code class=\"python language-python hljs\">&lt;reader&gt; = csv.reader(&lt;file&gt;)       <span class=\"hljs-comment\"># Also: `dialect='excel', delimiter=','`.</span>\n&lt;list&gt;   = next(&lt;reader&gt;)           <span class=\"hljs-comment\"># Returns next row as a list of strings.</span>\n&lt;list&gt;   = list(&lt;reader&gt;)           <span class=\"hljs-comment\"># Returns a list of remaining rows.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>File must be opened with a <code class=\"python hljs\"><span class=\"hljs-string\">'newline=\"\"'</span></code> argument, or newlines embedded inside quoted fields will not be interpreted correctly!</strong></li>\n<li><strong>To print the spreadsheet to the console use <a href=\"#table\">Tabulate</a> library.</strong></li>\n<li><strong>For XML and binary Excel files (xlsx, xlsm and xlsb) use <a href=\"#dataframeplotencodedecode\">Pandas</a> library.</strong></li>\n<li><strong>Reader accepts any iterator of strings, not just files.</strong></li>\n</ul>\n<div><h3 id=\"write\">Write</h3><pre><code class=\"python language-python hljs\">&lt;writer&gt; = csv.writer(&lt;file&gt;)       <span class=\"hljs-comment\"># Also: `dialect='excel', delimiter=','`.</span>\n&lt;writer&gt;.writerow(&lt;collection&gt;)     <span class=\"hljs-comment\"># Encodes objects using `str(&lt;el&gt;)`.</span>\n&lt;writer&gt;.writerows(&lt;coll_of_coll&gt;)  <span class=\"hljs-comment\"># Appends multiple rows.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>File must be opened with a <code class=\"python hljs\"><span class=\"hljs-string\">'newline=\"\"'</span></code> argument, or '\\r' will be added in front of every '\\n' on platforms that use '\\r\\n' line endings!</strong></li>\n<li><strong>Open existing file with <code class=\"python hljs\"><span class=\"hljs-string\">'mode=\"a\"'</span></code> to append to it or <code class=\"python hljs\"><span class=\"hljs-string\">'mode=\"w\"'</span></code> to overwrite it.</strong></li>\n</ul>\n<div><h3 id=\"parameters\">Parameters</h3><ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'dialect'</span></code> - Master parameter that sets the default values. String or a 'csv.Dialect' object.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'delimiter'</span></code> - A one-character string used to separate fields.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'lineterminator'</span></code> - How writer terminates rows. Reader is hardcoded to '\\n', '\\r', '\\r\\n'.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'quotechar'</span></code> - Character for quoting fields that contain special characters.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'escapechar'</span></code> - Character for escaping quotechars.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'doublequote'</span></code> - Whether quotechars inside fields are/get doubled or escaped.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'quoting'</span></code> - 0: As necessary, 1: All, 2: All but numbers which are read as floats, 3: None.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'skipinitialspace'</span></code> - Is space character at the start of the field stripped by the reader.</strong></li>\n</ul><div><h3 id=\"dialects\">Dialects</h3><pre><code class=\"text language-text\">┏━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┓\n┃                  │     excel    │   excel-tab  │     unix     ┃\n┠──────────────────┼──────────────┼──────────────┼──────────────┨\n┃ delimiter        │       ','    │      '\\t'    │       ','    ┃\n┃ lineterminator   │    '\\r\\n'    │    '\\r\\n'    │      '\\n'    ┃\n┃ quotechar        │       '\"'    │       '\"'    │       '\"'    ┃\n┃ escapechar       │      None    │      None    │      None    ┃\n┃ doublequote      │      True    │      True    │      True    ┃\n┃ quoting          │         0    │         0    │         1    ┃\n┃ skipinitialspace │     False    │     False    │     False    ┃\n┗━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┛\n</code></pre></div></div>\n\n\n\n<div><h3 id=\"readrowsfromcsvfile\">Read Rows from CSV File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">read_csv_file</span><span class=\"hljs-params\">(filename, **csv_params)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, encoding=<span class=\"hljs-string\">'utf-8'</span>, newline=<span class=\"hljs-string\">''</span>) <span class=\"hljs-keyword\">as</span> file:\n        <span class=\"hljs-keyword\">return</span> list(csv.reader(file, **csv_params))\n</code></pre></div>\n\n<div><h3 id=\"writerowstocsvfile\">Write Rows to CSV File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">write_to_csv_file</span><span class=\"hljs-params\">(filename, rows, mode=<span class=\"hljs-string\">'w'</span>, **csv_params)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, mode, encoding=<span class=\"hljs-string\">'utf-8'</span>, newline=<span class=\"hljs-string\">''</span>) <span class=\"hljs-keyword\">as</span> file:\n        writer = csv.writer(file, **csv_params)\n        writer.writerows(rows)\n</code></pre></div>\n\n<div><h2 id=\"sqlite\"><a href=\"#sqlite\" name=\"sqlite\">#</a>SQLite</h2><p><strong>A server-less database engine that stores each database into its own file.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> sqlite3\n&lt;conn&gt; = sqlite3.connect(&lt;path&gt;)               <span class=\"hljs-comment\"># Opens existing or new file. Also ':memory:'.</span>\n&lt;conn&gt;.close()                                 <span class=\"hljs-comment\"># Closes connection. Discards uncommitted data.</span>\n</code></pre></div>\n\n\n<div><h3 id=\"read-1\">Read</h3><pre><code class=\"python language-python hljs\">&lt;cursor&gt; = &lt;conn&gt;.execute(<span class=\"hljs-string\">'&lt;query&gt;'</span>)           <span class=\"hljs-comment\"># Can raise a subclass of sqlite3.Error.</span>\n&lt;tuple&gt;  = &lt;cursor&gt;.fetchone()                 <span class=\"hljs-comment\"># Returns next row. Also next(&lt;cursor&gt;).</span>\n&lt;list&gt;   = &lt;cursor&gt;.fetchall()                 <span class=\"hljs-comment\"># Returns remaining rows. Also list(&lt;cursor&gt;).</span>\n</code></pre></div>\n\n<div><h3 id=\"write-1\">Write</h3><pre><code class=\"python language-python hljs\">&lt;conn&gt;.execute(<span class=\"hljs-string\">'&lt;query&gt;'</span>)                      <span class=\"hljs-comment\"># Can raise a subclass of sqlite3.Error.</span>\n&lt;conn&gt;.commit()                                <span class=\"hljs-comment\"># Saves all changes since the last commit.</span>\n&lt;conn&gt;.rollback()                              <span class=\"hljs-comment\"># Discards all changes since the last commit.</span>\n</code></pre></div>\n\n<div><h4 id=\"or\">Or:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">with</span> &lt;conn&gt;:                                   <span class=\"hljs-comment\"># Exits the block with commit() or rollback(),</span>\n    &lt;conn&gt;.execute(<span class=\"hljs-string\">'&lt;query&gt;'</span>)                  <span class=\"hljs-comment\"># depending on whether any exception occurred.</span>\n</code></pre></div>\n\n<div><h3 id=\"placeholders\">Placeholders</h3><pre><code class=\"python language-python hljs\">&lt;conn&gt;.execute(<span class=\"hljs-string\">'&lt;query&gt;'</span>, &lt;list/tuple&gt;)        <span class=\"hljs-comment\"># Replaces '?'s in query with values.</span>\n&lt;conn&gt;.execute(<span class=\"hljs-string\">'&lt;query&gt;'</span>, &lt;dict/namedtuple&gt;)   <span class=\"hljs-comment\"># Replaces ':&lt;key&gt;'s with values.</span>\n&lt;conn&gt;.executemany(<span class=\"hljs-string\">'&lt;query&gt;'</span>, &lt;coll_of_coll&gt;)  <span class=\"hljs-comment\"># Runs execute() multiple times.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>Passed values can be of type str, int, float, bytes, None, or bool (stored as 1 or 0).</strong></li>\n</ul>\n<div><h3 id=\"example-1\">Example</h3><p><strong>Values are not actually saved in this example because <code class=\"python hljs\"><span class=\"hljs-string\">'conn.commit()'</span></code> is omitted!</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>conn = sqlite3.connect(<span class=\"hljs-string\">'test.db'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>conn.execute(<span class=\"hljs-string\">'CREATE TABLE person (person_id INTEGER PRIMARY KEY, name, height)'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>conn.execute(<span class=\"hljs-string\">'INSERT INTO person VALUES (NULL, ?, ?)'</span>, (<span class=\"hljs-string\">'Jean-Luc'</span>, <span class=\"hljs-number\">187</span>)).lastrowid\n<span class=\"hljs-number\">1</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>conn.execute(<span class=\"hljs-string\">'SELECT * FROM person'</span>).fetchall()\n[(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">'Jean-Luc'</span>, <span class=\"hljs-number\">187</span>)]\n</code></pre></div>\n\n\n<div><h3 id=\"sqlalchemy\">SQLAlchemy</h3><p><strong>Library for interacting with various DB systems via SQL, method chaining, or ORM.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install sqlalchemy</span>\n<span class=\"hljs-keyword\">from</span> sqlalchemy <span class=\"hljs-keyword\">import</span> create_engine, text\n&lt;engine&gt; = create_engine(<span class=\"hljs-string\">'&lt;url&gt;'</span>)              <span class=\"hljs-comment\"># Url: 'dialect://user:password@host/dbname'.</span>\n&lt;conn&gt;   = &lt;engine&gt;.connect()                  <span class=\"hljs-comment\"># Creates a connection. Also &lt;conn&gt;.close().</span>\n&lt;cursor&gt; = &lt;conn&gt;.execute(text(<span class=\"hljs-string\">'&lt;query&gt;'</span>), …)  <span class=\"hljs-comment\"># `&lt;dict&gt;`. Replaces ':&lt;key&gt;'s with values.</span>\n<span class=\"hljs-keyword\">with</span> &lt;conn&gt;.begin(): ...                       <span class=\"hljs-comment\"># Exits the block with commit or rollback.</span>\n</code></pre></div>\n\n\n<pre><code class=\"text language-text\">┏━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ Dialect         │ pip3 install │           Dependencies           ┃\n┠─────────────────┼──────────────┼──────────────────────────────────┨\n┃ mysql           │ mysqlclient  │ www.pypi.org/project/mysqlclient ┃\n┃ postgresql      │ psycopg2     │ www.pypi.org/project/psycopg2    ┃\n┃ mssql           │ pyodbc       │ www.pypi.org/project/pyodbc      ┃\n┃ oracle+oracledb │ oracledb     │ www.pypi.org/project/oracledb    ┃\n┗━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛\n</code></pre>\n<div><h2 id=\"bytes\"><a href=\"#bytes\" name=\"bytes\">#</a>Bytes</h2><p><strong>A bytes object is an immutable sequence of single bytes. Mutable version is called bytearray.</strong></p><pre><code class=\"python language-python hljs\">&lt;bytes&gt; = <span class=\"hljs-string\">b'&lt;str&gt;'</span>                       <span class=\"hljs-comment\"># Only accepts ASCII characters and \\x00-\\xff.</span>\n&lt;int&gt;   = &lt;bytes&gt;[index]                 <span class=\"hljs-comment\"># Returns an int in range from 0 to 255.</span>\n&lt;bytes&gt; = &lt;bytes&gt;[&lt;slice&gt;]               <span class=\"hljs-comment\"># Returns bytes even if it has only one element.</span>\n&lt;bytes&gt; = &lt;bytes&gt;.join(&lt;coll_of_bytes&gt;)  <span class=\"hljs-comment\"># Joins elements using bytes as a separator.</span>\n</code></pre></div>\n\n\n<div><h3 id=\"encode-1\">Encode</h3><pre><code class=\"python language-python hljs\">&lt;bytes&gt; = bytes(&lt;coll_of_ints&gt;)          <span class=\"hljs-comment\"># Ints must be in range from 0 to 255.</span>\n&lt;bytes&gt; = bytes(&lt;str&gt;, <span class=\"hljs-string\">'utf-8'</span>)          <span class=\"hljs-comment\"># Encodes the string. Also &lt;str&gt;.encode().</span>\n&lt;bytes&gt; = bytes.fromhex(<span class=\"hljs-string\">'&lt;hex&gt;'</span>)         <span class=\"hljs-comment\"># Hex pairs can be separated by whitespaces.</span>\n&lt;bytes&gt; = &lt;int&gt;.to_bytes(n_bytes, …)     <span class=\"hljs-comment\"># `byteorder='big/little', signed=False`.</span>\n</code></pre></div>\n\n<div><h3 id=\"decode-1\">Decode</h3><pre><code class=\"python language-python hljs\">&lt;list&gt;  = list(&lt;bytes&gt;)                  <span class=\"hljs-comment\"># Returns ints in range from 0 to 255.</span>\n&lt;str&gt;   = str(&lt;bytes&gt;, <span class=\"hljs-string\">'utf-8'</span>)          <span class=\"hljs-comment\"># Returns a string. Also &lt;bytes&gt;.decode().</span>\n&lt;str&gt;   = &lt;bytes&gt;.hex()                  <span class=\"hljs-comment\"># Returns hex pairs. Accepts `sep=&lt;str&gt;`.</span>\n&lt;int&gt;   = int.from_bytes(&lt;bytes&gt;, …)     <span class=\"hljs-comment\"># `byteorder='big/little', signed=False`.</span>\n</code></pre></div>\n\n<div><h3 id=\"readbytesfromfile\">Read Bytes from File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">read_bytes</span><span class=\"hljs-params\">(filename)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, <span class=\"hljs-string\">'rb'</span>) <span class=\"hljs-keyword\">as</span> file:\n        <span class=\"hljs-keyword\">return</span> file.read()\n</code></pre></div>\n\n<div><h3 id=\"writebytestofile\">Write Bytes to File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">write_bytes</span><span class=\"hljs-params\">(filename, bytes_obj)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, <span class=\"hljs-string\">'wb'</span>) <span class=\"hljs-keyword\">as</span> file:\n        file.write(bytes_obj)\n</code></pre></div>\n\n<div><h2 id=\"struct\"><a href=\"#struct\" name=\"struct\">#</a>Struct</h2><ul>\n<li><strong>Module that performs conversions between a sequence of numbers and a bytes object.</strong></li>\n<li><strong>System’s type sizes, byte order, and alignment rules are used by default.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> struct <span class=\"hljs-keyword\">import</span> pack, unpack\n\n&lt;bytes&gt; = pack(<span class=\"hljs-string\">'&lt;format&gt;'</span>, &lt;el_1&gt; [, ...])  <span class=\"hljs-comment\"># Packs objects according to format string.</span>\n&lt;tuple&gt; = unpack(<span class=\"hljs-string\">'&lt;format&gt;'</span>, &lt;bytes&gt;)       <span class=\"hljs-comment\"># Use iter_unpack() to get iterator of tuples.</span>\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>pack(<span class=\"hljs-string\">'&gt;hhl'</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>)\n<span class=\"hljs-string\">b'\\x00\\x01\\x00\\x02\\x00\\x00\\x00\\x03'</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>unpack(<span class=\"hljs-string\">'&gt;hhl'</span>, <span class=\"hljs-string\">b'\\x00\\x01\\x00\\x02\\x00\\x00\\x00\\x03'</span>)\n(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>)\n</code></pre>\n<h3 id=\"format-2\">Format</h3><div><h4 id=\"forstandardtypesizesandmanualalignmentpaddingstartformatstringwith\">For standard type sizes and manual alignment (padding) start format string with:</h4><ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'='</span></code> - System's byte order (usually little-endian).</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'&lt;'</span></code> - Little-endian (i.e. least significant byte first).</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'&gt;'</span></code> - Big-endian (also <code class=\"python hljs\"><span class=\"hljs-string\">'!'</span></code>).</strong></li>\n</ul><div><h4 id=\"besidesnumberspackandunpackalsosupportbytesobjectsasapartofthesequence\">Besides numbers, pack() and unpack() also support bytes objects as a part of the sequence:</h4><ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'c'</span></code> - A bytes object with a single element. For pad byte use <code class=\"python hljs\"><span class=\"hljs-string\">'x'</span></code>.</strong></li>\n<li><strong><code class=\"apache hljs\"><span class=\"hljs-section\">'&lt;n&gt;s'</span><span class=\"hljs-attribute\"></span></code> - A bytes object with n elements (not effected by byte order).</strong></li>\n</ul></div></div><div><div><h4 id=\"integertypesuseacapitalletterforunsignedtypeminimumandstandardsizesareinbrackets\">Integer types. Use a capital letter for unsigned type. Minimum and standard sizes are in brackets:</h4><ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'b'</span></code> - char (1/1)</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'h'</span></code> - short (2/2)</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'i'</span></code> - int (2/4)</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'l'</span></code> - long (4/4)</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'q'</span></code> - long long (8/8)</strong></li>\n</ul></div><div><h4 id=\"floatingpointtypesstructalwaysusesstandardsizes\">Floating point types (struct always uses standard sizes):</h4><ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'f'</span></code> - float (4/4)</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'d'</span></code> - double (8/8)</strong></li>\n</ul></div></div>\n\n\n\n\n\n\n\n\n<div><h2 id=\"array\"><a href=\"#array\" name=\"array\">#</a>Array</h2><p><strong>List that can only hold numbers of a predefined type. Available types and their minimum sizes in bytes are listed above. Type sizes and byte order are always determined by the system, however bytes of each element can be reversed with byteswap() method.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> array <span class=\"hljs-keyword\">import</span> array\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;array&gt; = array(<span class=\"hljs-string\">'&lt;typecode&gt;'</span>, &lt;coll_of_nums&gt;)  <span class=\"hljs-comment\"># Creates array from collection of numbers.</span>\n&lt;array&gt; = array(<span class=\"hljs-string\">'&lt;typecode&gt;'</span>, &lt;bytes&gt;)         <span class=\"hljs-comment\"># Writes passed bytes to array's memory.</span>\n&lt;array&gt; = array(<span class=\"hljs-string\">'&lt;typecode&gt;'</span>, &lt;array&gt;)         <span class=\"hljs-comment\"># Treats passed array as a sequence of numbers.</span>\n&lt;array&gt;.fromfile(&lt;file&gt;, n_items)              <span class=\"hljs-comment\"># Appends file's contents to array's memory.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;bytes&gt; = bytes(&lt;array&gt;)                       <span class=\"hljs-comment\"># Returns a copy of array's memory.</span>\n&lt;file&gt;.write(&lt;array&gt;)                          <span class=\"hljs-comment\"># Writes array's memory to the binary file.</span>\n</code></pre>\n<div><h2 id=\"memoryview\"><a href=\"#memoryview\" name=\"memoryview\">#</a>Memory View</h2><p><strong>A sequence object that points to the memory of another bytes-like object. Each element can reference a single or multiple consecutive bytes, depending on format. Order and number of elements can be changed with slicing.</strong></p><pre><code class=\"python language-python hljs\">&lt;mview&gt; = memoryview(&lt;bytes/bytearray/array&gt;)  <span class=\"hljs-comment\"># Immutable if bytes is passed, else mutable.</span>\n&lt;obj&gt;   = &lt;mview&gt;[index]                       <span class=\"hljs-comment\"># Returns int or float. Bytes if format is 'c'.</span>\n&lt;mview&gt; = &lt;mview&gt;[&lt;slice&gt;]                     <span class=\"hljs-comment\"># Returns memoryview with rearranged elements.</span>\n&lt;mview&gt; = &lt;mview&gt;.cast(<span class=\"hljs-string\">'&lt;typecode&gt;'</span>)           <span class=\"hljs-comment\"># Only works between B/b/c and other types.</span>\n&lt;mview&gt;.release()                              <span class=\"hljs-comment\"># Releases memory buffer of the base object.</span>\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;bytes&gt; = bytes(&lt;mview&gt;)                       <span class=\"hljs-comment\"># Returns a new bytes object. Also bytearray().</span>\n&lt;bytes&gt; = &lt;bytes&gt;.join(&lt;coll_of_mviews&gt;)       <span class=\"hljs-comment\"># Joins memoryviews using bytes as a separator.</span>\n&lt;array&gt; = array(<span class=\"hljs-string\">'&lt;typecode&gt;'</span>, &lt;mview&gt;)         <span class=\"hljs-comment\"># Treats memoryview as a sequence of numbers.</span>\n&lt;file&gt;.write(&lt;mview&gt;)                          <span class=\"hljs-comment\"># Writes `bytes(&lt;mview&gt;)` to the binary file.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;list&gt;  = list(&lt;mview&gt;)                        <span class=\"hljs-comment\"># Returns a list of ints, floats, or bytes.</span>\n&lt;str&gt;   = str(&lt;mview&gt;, <span class=\"hljs-string\">'utf-8'</span>)                <span class=\"hljs-comment\"># Treats memoryview as a bytes object.</span>\n&lt;str&gt;   = &lt;mview&gt;.hex()                        <span class=\"hljs-comment\"># Returns hex pairs. Accepts `sep=&lt;str&gt;`.</span>\n</code></pre>\n<div><h2 id=\"deque\"><a href=\"#deque\" name=\"deque\">#</a>Deque</h2><p><strong>List with efficient appends and pops from either side.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> collections <span class=\"hljs-keyword\">import</span> deque\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;deque&gt; = deque(&lt;collection&gt;)                  <span class=\"hljs-comment\"># Use `maxlen=&lt;int&gt;` to set size limit.</span>\n&lt;deque&gt;.appendleft(&lt;el&gt;)                       <span class=\"hljs-comment\"># Opposite element is dropped if full.</span>\n&lt;deque&gt;.extendleft(&lt;collection&gt;)               <span class=\"hljs-comment\"># Passed collection gets reversed.</span>\n&lt;deque&gt;.rotate(n=<span class=\"hljs-number\">1</span>)                            <span class=\"hljs-comment\"># Last element becomes first.</span>\n&lt;el&gt; = &lt;deque&gt;.popleft()                       <span class=\"hljs-comment\"># Raises IndexError if deque is empty.</span>\n</code></pre>\n<div><h2 id=\"operator\"><a href=\"#operator\" name=\"operator\">#</a>Operator</h2><p><strong>Module of functions that provide the functionality of operators. Functions are ordered and grouped by operator precedence, from least to most binding. Logical and arithmetic operators in lines 1, 3 and 5 are also ordered by precedence within their own group.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> operator <span class=\"hljs-keyword\">as</span> op\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;bool&gt; = op.not_(&lt;obj&gt;)                                        <span class=\"hljs-comment\"># or, and, not (or/and missing)</span>\n&lt;bool&gt; = op.eq/ne/lt/ge/is_/is_not/contains(&lt;obj&gt;, &lt;obj&gt;)      <span class=\"hljs-comment\"># ==, !=, &lt;, &gt;=, is, is not, in</span>\n&lt;obj&gt;  = op.or_/xor/and_(&lt;int/set&gt;, &lt;int/set&gt;)                 <span class=\"hljs-comment\"># |, ^, &amp;</span>\n&lt;int&gt;  = op.lshift/rshift(&lt;int&gt;, &lt;int&gt;)                        <span class=\"hljs-comment\"># &lt;&lt;, &gt;&gt;</span>\n&lt;obj&gt;  = op.add/sub/mul/truediv/floordiv/mod(&lt;obj&gt;, &lt;obj&gt;)     <span class=\"hljs-comment\"># +, -, *, /, //, %</span>\n&lt;num&gt;  = op.neg/invert(&lt;num&gt;)                                  <span class=\"hljs-comment\"># -, ~</span>\n&lt;num&gt;  = op.pow(&lt;num&gt;, &lt;num&gt;)                                  <span class=\"hljs-comment\"># **</span>\n&lt;func&gt; = op.itemgetter/attrgetter/methodcaller(&lt;obj&gt; [, ...])  <span class=\"hljs-comment\"># [index/key], .name, .name([…])</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">elementwise_sum  = map(op.add, list_a, list_b)\nsorted_by_second = sorted(&lt;coll&gt;, key=op.itemgetter(<span class=\"hljs-number\">1</span>))\nsorted_by_both   = sorted(&lt;coll&gt;, key=op.itemgetter(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>))\nfirst_element    = op.methodcaller(<span class=\"hljs-string\">'pop'</span>, <span class=\"hljs-number\">0</span>)(&lt;list&gt;)\n</code></pre>\n<ul>\n<li><strong>Most operators call the object's special method that is named after them (second object is passed as an argument), while logical operators call their own code that relies on bool().</strong></li>\n<li><strong>Comparisons can be chained: <code class=\"python hljs\"><span class=\"hljs-string\">'x &lt; y &lt; z'</span></code> gets converted to <code class=\"python hljs\"><span class=\"hljs-string\">'(x &lt; y) and (y &lt; z)</span></code>'.</strong></li>\n</ul>\n<div><h2 id=\"matchstatement\"><a href=\"#matchstatement\" name=\"matchstatement\">#</a>Match Statement</h2><p><strong>Executes the first block with matching pattern. Added in Python 3.10.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">match</span> &lt;object/expression&gt;:\n    <span class=\"hljs-keyword\">case</span> &lt;pattern&gt; [<span class=\"hljs-keyword\">if</span> &lt;condition&gt;]:\n        &lt;code&gt;\n    ...\n</code></pre></div>\n\n\n<div><h3 id=\"patterns\">Patterns</h3><pre><code class=\"python language-python hljs\">&lt;value_pattern&gt; = <span class=\"hljs-number\">1</span>/<span class=\"hljs-string\">'abc'</span>/<span class=\"hljs-keyword\">True</span>/<span class=\"hljs-keyword\">None</span>/math.pi        <span class=\"hljs-comment\"># Matches the literal or a dotted name.</span>\n&lt;class_pattern&gt; = &lt;type&gt;()                         <span class=\"hljs-comment\"># Matches any object of that type (or ABC).</span>\n&lt;wildcard_patt&gt; = _                                <span class=\"hljs-comment\"># Matches any object. Useful in last case.</span>\n&lt;capture_patt&gt;  = &lt;name&gt;                           <span class=\"hljs-comment\"># Matches any object and binds it to name.</span>\n&lt;as_pattern&gt;    = &lt;pattern&gt; <span class=\"hljs-keyword\">as</span> &lt;name&gt;              <span class=\"hljs-comment\"># Binds match to name. Also &lt;type&gt;(&lt;name&gt;).</span>\n&lt;or_pattern&gt;    = &lt;pattern&gt; | &lt;pattern&gt; [| ...]    <span class=\"hljs-comment\"># Matches any of the patterns.</span>\n&lt;sequence_patt&gt; = [&lt;pattern&gt;, ...]                 <span class=\"hljs-comment\"># Matches sequence with matching items.</span>\n&lt;mapping_patt&gt;  = {&lt;value_pattern&gt;: &lt;patt&gt;, ...}   <span class=\"hljs-comment\"># Matches dictionary with matching items.</span>\n&lt;class_pattern&gt; = &lt;type&gt;(&lt;attr_name&gt;=&lt;patt&gt;, ...)  <span class=\"hljs-comment\"># Matches object with matching attributes.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>Sequence pattern can also be written as a tuple.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'*&lt;name&gt;'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'**&lt;name&gt;'</span></code> in sequence/mapping patterns to bind remaining items.</strong></li>\n<li><strong>Sequence pattern must match all items of the collection, while mapping pattern does not.</strong></li>\n<li><strong>Patterns can be surrounded with brackets to override precedence (<code class=\"python hljs\"><span class=\"hljs-string\">'|'</span></code> &gt; <code class=\"python hljs\"><span class=\"hljs-string\">'as'</span></code> &gt; <code class=\"python hljs\"><span class=\"hljs-string\">','</span></code>).</strong></li>\n<li><strong>Built-in types allow a single positional pattern that is matched against the entire object.</strong></li>\n<li><strong>All names that are bound in the matching case, as well as variables initialized in its block, are visible after the match statement.</strong></li>\n</ul>\n<div><h3 id=\"example-2\">Example</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">from</span> pathlib <span class=\"hljs-keyword\">import</span> Path\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">match</span> Path(<span class=\"hljs-string\">'/home/gto/python-cheatsheet/README.md'</span>):\n<span class=\"hljs-meta\">... </span>    <span class=\"hljs-keyword\">case</span> Path(\n<span class=\"hljs-meta\">... </span>        parts=[<span class=\"hljs-string\">'/'</span>, <span class=\"hljs-string\">'home'</span>, user, *_]\n<span class=\"hljs-meta\">... </span>    ) <span class=\"hljs-keyword\">as</span> p <span class=\"hljs-keyword\">if</span> p.name.lower().startswith(<span class=\"hljs-string\">'readme'</span>) <span class=\"hljs-keyword\">and</span> p.is_file():\n<span class=\"hljs-meta\">... </span>        print(<span class=\"hljs-string\">f'<span class=\"hljs-subst\">{p.name}</span> is a readme file that belongs to user <span class=\"hljs-subst\">{user}</span>.'</span>)\nREADME.md is a readme file that belongs to user gto.\n</code></pre></div>\n\n<div><h2 id=\"logging\"><a href=\"#logging\" name=\"logging\">#</a>Logging</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> logging <span class=\"hljs-keyword\">as</span> log\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">log.basicConfig(filename=&lt;path&gt;, level=<span class=\"hljs-string\">'DEBUG'</span>)   <span class=\"hljs-comment\"># Configures the root logger (see Setup).</span>\nlog.debug/info/warning/error/critical(&lt;str&gt;)      <span class=\"hljs-comment\"># Sends message to the root logger.</span>\n&lt;Logger&gt; = log.getLogger(__name__)                <span class=\"hljs-comment\"># Returns logger named after the module.</span>\n&lt;Logger&gt;.&lt;level&gt;(&lt;str&gt;)                           <span class=\"hljs-comment\"># Sends message to the logger.</span>\n&lt;Logger&gt;.exception(&lt;str&gt;)                         <span class=\"hljs-comment\"># Error() that appends caught exception.</span>\n</code></pre>\n<div><h3 id=\"setup\">Setup</h3><pre><code class=\"python language-python hljs\">log.basicConfig(\n    filename=<span class=\"hljs-keyword\">None</span>,                                <span class=\"hljs-comment\"># Logs to stderr or appends to file.</span>\n    format=<span class=\"hljs-string\">'%(levelname)s:%(name)s:%(message)s'</span>,  <span class=\"hljs-comment\"># Add '%(asctime)s' for local datetime.</span>\n    level=log.WARNING,                            <span class=\"hljs-comment\"># Drops messages with lower priority.</span>\n    handlers=[log.StreamHandler(sys.stderr)]      <span class=\"hljs-comment\"># Uses FileHandler if filename is set.</span>\n)\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;Formatter&gt; = log.Formatter(<span class=\"hljs-string\">'&lt;format&gt;'</span>)           <span class=\"hljs-comment\"># Creates a Formatter.</span>\n&lt;Handler&gt; = log.FileHandler(&lt;path&gt;, mode=<span class=\"hljs-string\">'a'</span>)     <span class=\"hljs-comment\"># Creates a Handler. Also `encoding=None`.</span>\n&lt;Handler&gt;.setFormatter(&lt;Formatter&gt;)               <span class=\"hljs-comment\"># Adds Formatter to the Handler.</span>\n&lt;Handler&gt;.setLevel(&lt;int/str&gt;)                     <span class=\"hljs-comment\"># Processes all messages by default.</span>\n&lt;Logger&gt;.addHandler(&lt;Handler&gt;)                    <span class=\"hljs-comment\"># Adds Handler to the Logger.</span>\n&lt;Logger&gt;.setLevel(&lt;int/str&gt;)                      <span class=\"hljs-comment\"># What is sent to its/ancestors' handlers.</span>\n&lt;Logger&gt;.propagate = &lt;bool&gt;                       <span class=\"hljs-comment\"># Cuts off ancestors' handlers if False.</span>\n</code></pre>\n<ul>\n<li><strong>Parent logger can be specified by naming the child logger <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;parent&gt;.&lt;name&gt;'</span></code>.</strong></li>\n<li><strong>If logger doesn't have a set level, it inherits it from the first ancestor that does.</strong></li>\n<li><strong>Formatter also accepts: pathname, filename, funcName, lineno, thread and process.</strong></li>\n<li><strong>RotatingFileHandler creates and deletes files based on 'maxBytes', 'backupCount' args.</strong></li>\n<li><strong>An object with <code class=\"python hljs\"><span class=\"hljs-string\">'filter(&lt;LogRecord&gt;)'</span></code> method (or the method itself) can be added to loggers and handlers via addFilter(). Message is dropped if filter() returns a false value.</strong></li>\n</ul>\n<div><h4 id=\"createsaloggerthatwritesallmessagestoafileandsendsthemtotherootshandlerthatprintswarningsorhigher\">Creates a logger that writes all messages to a file and sends them to the root's handler that prints warnings or higher:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>logger = log.getLogger(<span class=\"hljs-string\">'my_module'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>handler = log.FileHandler(<span class=\"hljs-string\">'test.log'</span>, encoding=<span class=\"hljs-string\">'utf-8'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>handler.setFormatter(log.Formatter(<span class=\"hljs-string\">'%(asctime)s %(levelname)s:%(name)s:%(message)s'</span>))\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>logger.addHandler(handler)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>logger.setLevel(<span class=\"hljs-string\">'DEBUG'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>log.basicConfig()\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>log.root.handlers[<span class=\"hljs-number\">0</span>].setLevel(<span class=\"hljs-string\">'WARNING'</span>)\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>logger.critical(<span class=\"hljs-string\">'Running out of disk space.'</span>)\nCRITICAL:my_module:Running out of disk space.\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>print(open(<span class=\"hljs-string\">'test.log'</span>).read())\n2023-02-07 23:21:01,430 CRITICAL:my_module:Running out of disk space.\n</code></pre></div>\n\n<div><h2 id=\"introspection\"><a href=\"#introspection\" name=\"introspection\">#</a>Introspection</h2><pre><code class=\"python language-python hljs\">&lt;list&gt; = dir()                      <span class=\"hljs-comment\"># Local names of variables, functions, classes and modules.</span>\n&lt;dict&gt; = vars()                     <span class=\"hljs-comment\"># Dict of local names and their objects. Also locals().</span>\n&lt;dict&gt; = globals()                  <span class=\"hljs-comment\"># Dict of global names and their objects, e.g. __builtin__.</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;list&gt; = dir(&lt;obj&gt;)                 <span class=\"hljs-comment\"># Returns names of object's attributes (including methods).</span>\n&lt;dict&gt; = vars(&lt;obj&gt;)                <span class=\"hljs-comment\"># Returns dict of writable attributes. Also &lt;obj&gt;.__dict__.</span>\n&lt;bool&gt; = hasattr(&lt;obj&gt;, <span class=\"hljs-string\">'&lt;name&gt;'</span>)   <span class=\"hljs-comment\"># Checks if object possesses attribute with passed name.</span>\nvalue  = getattr(&lt;obj&gt;, <span class=\"hljs-string\">'&lt;name&gt;'</span>)   <span class=\"hljs-comment\"># Returns object's attribute or raises AttributeError.</span>\nsetattr(&lt;obj&gt;, <span class=\"hljs-string\">'&lt;name&gt;'</span>, value)     <span class=\"hljs-comment\"># Sets attribute. Only works on objects with __dict__ attr.</span>\ndelattr(&lt;obj&gt;, <span class=\"hljs-string\">'&lt;name&gt;'</span>)            <span class=\"hljs-comment\"># Deletes attribute from __dict__. Also `del &lt;obj&gt;.&lt;name&gt;`.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;Sig&gt;  = inspect.signature(&lt;func&gt;)  <span class=\"hljs-comment\"># Returns a Signature object of the passed function.</span>\n&lt;dict&gt; = &lt;Sig&gt;.parameters           <span class=\"hljs-comment\"># Returns dict of Parameters. Also &lt;Sig&gt;.return_annotation.</span>\n&lt;memb&gt; = &lt;Param&gt;.kind               <span class=\"hljs-comment\"># Returns ParameterKind member (Parameter.KEYWORD_ONLY, …).</span>\n&lt;type&gt; = &lt;Param&gt;.annotation         <span class=\"hljs-comment\"># Returns Parameter.empty if missing. Also &lt;Param&gt;.default.</span>\n</code></pre>\n<div><h2 id=\"threading\"><a href=\"#threading\" name=\"threading\">#</a>Threading</h2><p><strong>CPython interpreter can only run a single thread at a time. Using multiple threads won't result in a faster execution, unless at least one of the threads contains an I/O operation.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Thread, Lock, RLock, Semaphore, Event, Barrier\n<span class=\"hljs-keyword\">from</span> concurrent.futures <span class=\"hljs-keyword\">import</span> ThreadPoolExecutor, as_completed\n</code></pre></div>\n\n\n<div><h3 id=\"thread\">Thread</h3><pre><code class=\"python language-python hljs\">&lt;Thread&gt; = Thread(target=&lt;function&gt;)           <span class=\"hljs-comment\"># Use `args=&lt;collection&gt;` to set the arguments.</span>\n&lt;Thread&gt;.start()                               <span class=\"hljs-comment\"># Starts the thread. Also &lt;Thread&gt;.is_alive().</span>\n&lt;Thread&gt;.join()                                <span class=\"hljs-comment\"># Waits for the thread to finish.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'kwargs=&lt;dict&gt;'</span></code> to pass keyword arguments to the function.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'daemon=True'</span></code>, or the program will not be able to exit while the thread is alive.</strong></li>\n</ul>\n<div><h3 id=\"lock\">Lock</h3><pre><code class=\"python language-python hljs\">&lt;lock&gt; = Lock/RLock()                          <span class=\"hljs-comment\"># RLock can only be released by acquirer.</span>\n&lt;lock&gt;.acquire()                               <span class=\"hljs-comment\"># Waits for the lock to be available.</span>\n&lt;lock&gt;.release()                               <span class=\"hljs-comment\"># Makes the lock available again.</span>\n</code></pre></div>\n\n<div><h4 id=\"or-1\">Or:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">with</span> &lt;lock&gt;:                                   <span class=\"hljs-comment\"># Enters the block by calling acquire() and</span>\n    ...                                        <span class=\"hljs-comment\"># exits it with release(), even on error.</span>\n</code></pre></div>\n\n<div><h3 id=\"semaphoreeventbarrier\">Semaphore, Event, Barrier</h3><pre><code class=\"python language-python hljs\">&lt;Semaphore&gt; = Semaphore(value=<span class=\"hljs-number\">1</span>)               <span class=\"hljs-comment\"># Lock that can be acquired by 'value' threads.</span>\n&lt;Event&gt;     = Event()                          <span class=\"hljs-comment\"># Method wait() blocks until set() is called.</span>\n&lt;Barrier&gt;   = Barrier(n_times)                 <span class=\"hljs-comment\"># Wait() blocks until it's called n times.</span>\n</code></pre></div>\n\n<div><h3 id=\"queue\">Queue</h3><pre><code class=\"python language-python hljs\">&lt;Queue&gt; = queue.Queue(maxsize=<span class=\"hljs-number\">0</span>)               <span class=\"hljs-comment\"># A thread-safe first-in-first-out queue.</span>\n&lt;Queue&gt;.put(&lt;el&gt;)                              <span class=\"hljs-comment\"># Blocks until queue stops being full.</span>\n&lt;Queue&gt;.put_nowait(&lt;el&gt;)                       <span class=\"hljs-comment\"># Raises queue.Full exception if full.</span>\n&lt;el&gt; = &lt;Queue&gt;.get()                           <span class=\"hljs-comment\"># Blocks until queue stops being empty.</span>\n&lt;el&gt; = &lt;Queue&gt;.get_nowait()                    <span class=\"hljs-comment\"># Raises queue.Empty exception if empty.</span>\n</code></pre></div>\n\n<div><h3 id=\"threadpoolexecutor\">Thread Pool Executor</h3><pre><code class=\"python language-python hljs\">&lt;Exec&gt; = ThreadPoolExecutor(max_workers=<span class=\"hljs-keyword\">None</span>)  <span class=\"hljs-comment\"># Or: `with ThreadPoolExecutor() as &lt;name&gt;: ...`</span>\n&lt;iter&gt; = &lt;Exec&gt;.map(&lt;func&gt;, &lt;args_1&gt;, ...)     <span class=\"hljs-comment\"># Multithreaded and non-lazy map(). Keeps order.</span>\n&lt;Futr&gt; = &lt;Exec&gt;.submit(&lt;func&gt;, &lt;arg_1&gt;, ...)   <span class=\"hljs-comment\"># Creates a thread and returns its Future obj.</span>\n&lt;Exec&gt;.shutdown()                              <span class=\"hljs-comment\"># Blocks until all threads finish executing.</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;bool&gt; = &lt;Future&gt;.done()                       <span class=\"hljs-comment\"># Checks if the thread has finished executing.</span>\n&lt;obj&gt;  = &lt;Future&gt;.result(timeout=<span class=\"hljs-keyword\">None</span>)         <span class=\"hljs-comment\"># Waits for thread to finish and returns result.</span>\n&lt;bool&gt; = &lt;Future&gt;.cancel()                     <span class=\"hljs-comment\"># Cancels or returns False if running/finished.</span>\n&lt;iter&gt; = as_completed(&lt;coll_of_Futures&gt;)       <span class=\"hljs-comment\"># `next(&lt;iter&gt;)` returns next completed Future.</span>\n</code></pre>\n<ul>\n<li><strong>Map() and as_completed() also accept 'timeout'. It causes futures.TimeoutError when next() is called/blocking. Map() times from original call and as_completed() from first call to next(). As_completed() fails if next() is called too late, even if all threads are done.</strong></li>\n<li><strong>Exceptions that happen inside threads are raised when map iterator's next() or Future's result() are called. Future's exception() method returns exception object or None.</strong></li>\n<li><strong>ProcessPoolExecutor provides true parallelism but: everything sent to/from workers must be <a href=\"#pickle\">pickable</a>, queues must be sent using executor's 'initargs' and 'initializer' parameters, and executor should only be reachable via <code class=\"python hljs\"><span class=\"hljs-string\">'if __name__ == \"__main__\": ...'</span></code>.</strong></li>\n</ul>\n<div><h2 id=\"coroutines\"><a href=\"#coroutines\" name=\"coroutines\">#</a>Coroutines</h2><ul>\n<li><strong>Coroutines have a lot in common with threads, but unlike threads, they only give up control when they call another coroutine and they don’t use as much memory.</strong></li>\n<li><strong>Coroutine definition starts with <code class=\"python hljs\"><span class=\"hljs-string\">'async'</span></code> and its call with <code class=\"python hljs\"><span class=\"hljs-string\">'await'</span></code>.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'asyncio.run(&lt;coroutine&gt;)'</span></code> to start the first/main coroutine.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> asyncio <span class=\"hljs-keyword\">as</span> aio\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;coro&gt; = &lt;async_function&gt;(&lt;args&gt;)         <span class=\"hljs-comment\"># Creates a coroutine by calling async def function.</span>\n&lt;obj&gt;  = <span class=\"hljs-keyword\">await</span> &lt;coroutine&gt;                <span class=\"hljs-comment\"># Starts the coroutine and returns its result.</span>\n&lt;task&gt; = aio.create_task(&lt;coroutine&gt;)     <span class=\"hljs-comment\"># Schedules the coroutine for execution.</span>\n&lt;obj&gt;  = <span class=\"hljs-keyword\">await</span> &lt;task&gt;                     <span class=\"hljs-comment\"># Returns coroutine's result. Also &lt;task&gt;.cancel().</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;coro&gt; = aio.gather(&lt;coro/task&gt;, ...)     <span class=\"hljs-comment\"># Schedules coros. Returns list of results on await.</span>\n&lt;coro&gt; = aio.wait(&lt;tasks&gt;, …)             <span class=\"hljs-comment\"># `aio.ALL/FIRST_COMPLETED`. Returns (done, pending).</span>\n&lt;iter&gt; = aio.as_completed(&lt;coros/tasks&gt;)  <span class=\"hljs-comment\"># Iterator of coros. All return next result on await.</span>\n</code></pre>\n<div><h4 id=\"runsaterminalgamewhereyoucontrolanasteriskthatmustavoidnumbers\">Runs a terminal game where you control an asterisk that must avoid numbers:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> asyncio, collections, curses, curses.textpad, enum, random\n\nP = collections.namedtuple(<span class=\"hljs-string\">'P'</span>, <span class=\"hljs-string\">'x y'</span>)    <span class=\"hljs-comment\"># Position</span>\nD = enum.Enum(<span class=\"hljs-string\">'D'</span>, <span class=\"hljs-string\">'n e s w'</span>)             <span class=\"hljs-comment\"># Direction</span>\nW, H = <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">7</span>                              <span class=\"hljs-comment\"># Width, Height</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(screen)</span>:</span>\n    curses.curs_set(<span class=\"hljs-number\">0</span>)                    <span class=\"hljs-comment\"># Makes cursor invisible.</span>\n    screen.nodelay(<span class=\"hljs-keyword\">True</span>)                  <span class=\"hljs-comment\"># Makes getch() non-blocking.</span>\n    asyncio.run(main_coroutine(screen))   <span class=\"hljs-comment\"># Starts running asyncio code.</span>\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main_coroutine</span><span class=\"hljs-params\">(screen)</span>:</span>\n    moves = asyncio.Queue()\n    state = {<span class=\"hljs-string\">'*'</span>: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>)} | {id_: P(W//<span class=\"hljs-number\">2</span>, H//<span class=\"hljs-number\">2</span>) <span class=\"hljs-keyword\">for</span> id_ <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>)}\n    ai    = [random_controller(id_, moves) <span class=\"hljs-keyword\">for</span> id_ <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>)]\n    mvc   = [human_controller(screen, moves), model(moves, state), view(state, screen)]\n    tasks = [asyncio.create_task(coro) <span class=\"hljs-keyword\">for</span> coro <span class=\"hljs-keyword\">in</span> ai + mvc]\n    <span class=\"hljs-keyword\">await</span> asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">random_controller</span><span class=\"hljs-params\">(id_, moves)</span>:</span>\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">True</span>:\n        d = random.choice(list(D))\n        moves.put_nowait((id_, d))\n        <span class=\"hljs-keyword\">await</span> asyncio.sleep(random.triangular(<span class=\"hljs-number\">0.01</span>, <span class=\"hljs-number\">0.65</span>))\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">human_controller</span><span class=\"hljs-params\">(screen, moves)</span>:</span>\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">True</span>:\n        key_mappings = {<span class=\"hljs-number\">258</span>: D.s, <span class=\"hljs-number\">259</span>: D.n, <span class=\"hljs-number\">260</span>: D.w, <span class=\"hljs-number\">261</span>: D.e}\n        <span class=\"hljs-keyword\">if</span> d := key_mappings.get(screen.getch()):\n            moves.put_nowait((<span class=\"hljs-string\">'*'</span>, d))\n        <span class=\"hljs-keyword\">await</span> asyncio.sleep(<span class=\"hljs-number\">0.005</span>)\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">model</span><span class=\"hljs-params\">(moves, state)</span>:</span>\n    <span class=\"hljs-keyword\">while</span> state[<span class=\"hljs-string\">'*'</span>] <span class=\"hljs-keyword\">not</span> <span class=\"hljs-keyword\">in</span> (state[id_] <span class=\"hljs-keyword\">for</span> id_ <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>)):\n        id_, d = <span class=\"hljs-keyword\">await</span> moves.get()\n        deltas = {D.n: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">-1</span>), D.e: P(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>), D.s: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>), D.w: P(<span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">0</span>)}\n        state[id_] = P((state[id_].x + deltas[d].x) % W, (state[id_].y + deltas[d].y) % H)\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">view</span><span class=\"hljs-params\">(state, screen)</span>:</span>\n    offset = P(curses.COLS//<span class=\"hljs-number\">2</span> - W//<span class=\"hljs-number\">2</span>, curses.LINES//<span class=\"hljs-number\">2</span> - H//<span class=\"hljs-number\">2</span>)\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">True</span>:\n        screen.erase()\n        curses.textpad.rectangle(screen, offset.y-<span class=\"hljs-number\">1</span>, offset.x-<span class=\"hljs-number\">1</span>, offset.y+H, offset.x+W)\n        <span class=\"hljs-keyword\">for</span> id_, p <span class=\"hljs-keyword\">in</span> state.items():\n            screen.addstr(offset.y + (p.y - state[<span class=\"hljs-string\">'*'</span>].y + H//<span class=\"hljs-number\">2</span>) % H,\n                          offset.x + (p.x - state[<span class=\"hljs-string\">'*'</span>].x + W//<span class=\"hljs-number\">2</span>) % W, str(id_))\n        screen.refresh()\n        <span class=\"hljs-keyword\">await</span> asyncio.sleep(<span class=\"hljs-number\">0.005</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:\n    curses.wrapper(main)\n</code></pre></div>\n\n<p><br></p>\n<div><h1 id=\"libraries\">Libraries</h1><div><h2 id=\"progressbar\"><a href=\"#progressbar\" name=\"progressbar\">#</a>Progress Bar</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install tqdm</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">import</span> tqdm, time\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">for</span> el <span class=\"hljs-keyword\">in</span> tqdm.tqdm([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], desc=<span class=\"hljs-string\">'Processing'</span>):\n<span class=\"hljs-meta\">... </span>    time.sleep(<span class=\"hljs-number\">1</span>)\nProcessing: 100%|████████████████████| 3/3 [00:03&lt;00:00,  1.00s/it]\n</code></pre></div></div>\n\n\n<div><h2 id=\"plot\"><a href=\"#plot\" name=\"plot\">#</a>Plot</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install matplotlib</span>\n<span class=\"hljs-keyword\">import</span> matplotlib.pyplot <span class=\"hljs-keyword\">as</span> plt\n\nplt.plot/bar/scatter(x_data, y_data [, label=&lt;str&gt;])  <span class=\"hljs-comment\"># Also plt.plot(y_data).</span>\nplt.legend()                                          <span class=\"hljs-comment\"># Adds a legend.</span>\nplt.title/xlabel/ylabel(&lt;str&gt;)                        <span class=\"hljs-comment\"># Adds a title or label.</span>\nplt.savefig(&lt;path&gt;)                                   <span class=\"hljs-comment\"># Saves the plot.</span>\nplt.show()                                            <span class=\"hljs-comment\"># Displays the plot.</span>\nplt.clf()                                             <span class=\"hljs-comment\"># Clears the plot.</span>\n</code></pre></div>\n\n<div><h2 id=\"table\"><a href=\"#table\" name=\"table\">#</a>Table</h2><div><h4 id=\"printsacsvspreadsheettotheconsole\">Prints a CSV spreadsheet to the console:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install tabulate</span>\n<span class=\"hljs-keyword\">import</span> csv, tabulate\n<span class=\"hljs-keyword\">with</span> open(<span class=\"hljs-string\">'test.csv'</span>, encoding=<span class=\"hljs-string\">'utf-8'</span>, newline=<span class=\"hljs-string\">''</span>) <span class=\"hljs-keyword\">as</span> file:\n    rows = list(csv.reader(file))\nprint(tabulate.tabulate(rows, headers=<span class=\"hljs-string\">'firstrow'</span>))\n</code></pre></div></div>\n\n\n<div><h2 id=\"consoleapp\"><a href=\"#consoleapp\" name=\"consoleapp\">#</a>Console App</h2><div><h4 id=\"runsabasicfileexplorerintheconsole\">Runs a basic file explorer in the console:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install windows-curses</span>\n<span class=\"hljs-keyword\">import</span> curses, os\n<span class=\"hljs-keyword\">from</span> curses <span class=\"hljs-keyword\">import</span> A_REVERSE, KEY_DOWN, KEY_UP, KEY_LEFT, KEY_RIGHT, KEY_ENTER\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(screen)</span>:</span>\n    ch, first, selected, paths = <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, os.listdir()\n    <span class=\"hljs-keyword\">while</span> ch != ord(<span class=\"hljs-string\">'q'</span>):\n        height, width = screen.getmaxyx()\n        screen.erase()\n        <span class=\"hljs-keyword\">for</span> y, filename <span class=\"hljs-keyword\">in</span> enumerate(paths[first : first+height]):\n            color = A_REVERSE <span class=\"hljs-keyword\">if</span> filename == paths[selected] <span class=\"hljs-keyword\">else</span> <span class=\"hljs-number\">0</span>\n            screen.addnstr(y, <span class=\"hljs-number\">0</span>, filename, width-<span class=\"hljs-number\">1</span>, color)\n        ch = screen.getch()\n        selected += (ch == KEY_DOWN) - (ch == KEY_UP)\n        selected = max(<span class=\"hljs-number\">0</span>, min(len(paths)-<span class=\"hljs-number\">1</span>, selected))\n        first += (selected &gt;= first + height) - (selected &lt; first)\n        <span class=\"hljs-keyword\">if</span> ch <span class=\"hljs-keyword\">in</span> [KEY_LEFT, KEY_RIGHT, KEY_ENTER, ord(<span class=\"hljs-string\">'\\n'</span>), ord(<span class=\"hljs-string\">'\\r'</span>)]:\n            new_dir = <span class=\"hljs-string\">'..'</span> <span class=\"hljs-keyword\">if</span> ch == KEY_LEFT <span class=\"hljs-keyword\">else</span> paths[selected]\n            <span class=\"hljs-keyword\">if</span> os.path.isdir(new_dir):\n                os.chdir(new_dir)\n                first, selected, paths = <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, os.listdir()\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:\n    curses.wrapper(main)\n</code></pre></div></div>\n\n\n<div><h2 id=\"guiapp\"><a href=\"#guiapp\" name=\"guiapp\">#</a>GUI App</h2><div><h4 id=\"aweightconverterguiapplication\">A weight converter GUI application:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install PySimpleGUI</span>\n<span class=\"hljs-keyword\">import</span> PySimpleGUI <span class=\"hljs-keyword\">as</span> sg\n\ntext_box = sg.Input(default_text=<span class=\"hljs-string\">'100'</span>, enable_events=<span class=\"hljs-keyword\">True</span>, key=<span class=\"hljs-string\">'-QUANTITY-'</span>)\ndropdown = sg.InputCombo([<span class=\"hljs-string\">'g'</span>, <span class=\"hljs-string\">'kg'</span>, <span class=\"hljs-string\">'t'</span>], <span class=\"hljs-string\">'kg'</span>, readonly=<span class=\"hljs-keyword\">True</span>, enable_events=<span class=\"hljs-keyword\">True</span>, k=<span class=\"hljs-string\">'-UNIT-'</span>)\nlabel    = sg.Text(<span class=\"hljs-string\">'100 kg is 220.462 lbs.'</span>, key=<span class=\"hljs-string\">'-OUTPUT-'</span>)\nbutton   = sg.Button(<span class=\"hljs-string\">'Close'</span>)\nwindow   = sg.Window(<span class=\"hljs-string\">'Weight Converter'</span>, [[text_box, dropdown], [label], [button]])\n\n<span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">True</span>:\n    event, values = window.read()\n    <span class=\"hljs-keyword\">if</span> event <span class=\"hljs-keyword\">in</span> [sg.WIN_CLOSED, <span class=\"hljs-string\">'Close'</span>]:\n        <span class=\"hljs-keyword\">break</span>\n    <span class=\"hljs-keyword\">try</span>:\n        quantity = float(values[<span class=\"hljs-string\">'-QUANTITY-'</span>])\n    <span class=\"hljs-keyword\">except</span> ValueError:\n        <span class=\"hljs-keyword\">continue</span>\n    unit = values[<span class=\"hljs-string\">'-UNIT-'</span>]\n    factors = {<span class=\"hljs-string\">'g'</span>: <span class=\"hljs-number\">0.001</span>, <span class=\"hljs-string\">'kg'</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">'t'</span>: <span class=\"hljs-number\">1000</span>}\n    lbs = quantity * factors[unit] / <span class=\"hljs-number\">0.45359237</span>\n    window[<span class=\"hljs-string\">'-OUTPUT-'</span>].update(value=<span class=\"hljs-string\">f'<span class=\"hljs-subst\">{quantity}</span> <span class=\"hljs-subst\">{unit}</span> is <span class=\"hljs-subst\">{lbs:g}</span> lbs.'</span>)\nwindow.close()\n</code></pre></div></div>\n\n\n<div><h2 id=\"scraping\"><a href=\"#scraping\" name=\"scraping\">#</a>Scraping</h2><div><h4 id=\"scrapespythonsurlandlogofromitswikipediapage\">Scrapes Python's URL and logo from its Wikipedia page:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install requests beautifulsoup4</span>\n<span class=\"hljs-keyword\">import</span> requests, bs4, os\n\nresponse   = requests.get(<span class=\"hljs-string\">'https://en.wikipedia.org/wiki/Python_(programming_language)'</span>)\ndocument   = bs4.BeautifulSoup(response.text, <span class=\"hljs-string\">'html.parser'</span>)\ntable      = document.find(<span class=\"hljs-string\">'table'</span>, class_=<span class=\"hljs-string\">'infobox vevent'</span>)\npython_url = table.find(<span class=\"hljs-string\">'th'</span>, text=<span class=\"hljs-string\">'Website'</span>).next_sibling.a[<span class=\"hljs-string\">'href'</span>]\nlogo_url   = table.find(<span class=\"hljs-string\">'img'</span>)[<span class=\"hljs-string\">'src'</span>]\nfilename   = os.path.basename(logo_url)\n<span class=\"hljs-keyword\">with</span> open(filename, <span class=\"hljs-string\">'wb'</span>) <span class=\"hljs-keyword\">as</span> file:\n    file.write(requests.get(<span class=\"hljs-string\">f'https:<span class=\"hljs-subst\">{logo_url}</span>'</span>).content)\nprint(<span class=\"hljs-string\">f'<span class=\"hljs-subst\">{python_url}</span>, file://<span class=\"hljs-subst\">{os.path.abspath(filename)}</span>'</span>)\n</code></pre></div></div>\n\n\n<div><h3 id=\"selenium\">Selenium</h3><p><strong>Library for scraping websites with dynamic content.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install selenium</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n\n&lt;WebDrv&gt; = webdriver.Chrome/Firefox/Safari/Edge()     <span class=\"hljs-comment\"># Opens a browser. Also &lt;WebDrv&gt;.quit().</span>\n&lt;WebDrv&gt;.get(<span class=\"hljs-string\">'&lt;url&gt;'</span>)                                 <span class=\"hljs-comment\"># Also &lt;WebDrv&gt;.implicitly_wait(seconds).</span>\n&lt;str&gt;  = &lt;WebDrv&gt;.page_source                         <span class=\"hljs-comment\"># Returns HTML of fully rendered page.</span>\n&lt;El&gt;   = &lt;WebDrv/El&gt;.find_element(<span class=\"hljs-string\">'css selector'</span>, …)  <span class=\"hljs-comment\"># '&lt;tag&gt;#&lt;id&gt;.&lt;class&gt;[&lt;attr&gt;=\"&lt;val&gt;\"]…'.</span>\n&lt;list&gt; = &lt;WebDrv/El&gt;.find_elements(<span class=\"hljs-string\">'xpath'</span>, …)        <span class=\"hljs-comment\"># '//&lt;tag&gt;[@&lt;attr&gt;=\"&lt;val&gt;\"]…'. See XPath.</span>\n&lt;str&gt;  = &lt;El&gt;.get_attribute(&lt;str&gt;)                    <span class=\"hljs-comment\"># Property if exists. Also &lt;El&gt;.text.</span>\n&lt;El&gt;.click/clear()                                    <span class=\"hljs-comment\"># Also &lt;El&gt;.send_keys(&lt;str&gt;).</span>\n</code></pre></div>\n\n\n<div><h4 id=\"xpathalsoavailableinlxmlscrapyandbrowsersconsoleviadxxpath\">XPath — also available in lxml, Scrapy, and browser's console via <code class=\"python hljs\"><span class=\"hljs-string\">'$x(\"&lt;xpath&gt;\")'</span></code>:</h4><pre><code class=\"python language-python hljs\">&lt;xpath&gt;     = //&lt;element&gt;[/ <span class=\"hljs-keyword\">or</span> // &lt;element&gt;]          <span class=\"hljs-comment\"># /&lt;child&gt;, //&lt;descendant&gt;, /../&lt;sibling&gt;</span>\n&lt;xpath&gt;     = //&lt;element&gt;/following::&lt;element&gt;        <span class=\"hljs-comment\"># Next element. Also preceding/parent/…</span>\n&lt;element&gt;   = &lt;tag&gt;&lt;conditions&gt;&lt;index&gt;                <span class=\"hljs-comment\"># `&lt;tag&gt; = */a/…`, `&lt;index&gt; = [1/2/…]`.</span>\n&lt;condition&gt; = [&lt;sub_cond&gt; [<span class=\"hljs-keyword\">and</span>/<span class=\"hljs-keyword\">or</span> &lt;sub_cond&gt;]]        <span class=\"hljs-comment\"># For negation use `not(&lt;sub_cond&gt;)`.</span>\n&lt;sub_cond&gt;  = @&lt;attr&gt;[=<span class=\"hljs-string\">\"&lt;val&gt;\"</span>]                       <span class=\"hljs-comment\"># `text()=`, `.=` match (complete) text.</span>\n&lt;sub_cond&gt;  = contains(@&lt;attr&gt;, <span class=\"hljs-string\">\"&lt;val&gt;\"</span>)              <span class=\"hljs-comment\"># Is &lt;val&gt; a substring of attr's value?</span>\n&lt;sub_cond&gt;  = [//]&lt;element&gt;                           <span class=\"hljs-comment\"># Has matching child? Descendant if //.</span>\n</code></pre></div>\n\n<div><h2 id=\"webapp\"><a href=\"#webapp\" name=\"webapp\">#</a>Web App</h2><p><strong>Flask is a micro web framework/server. If you just want to open a html file in a web browser use <code class=\"python hljs\"><span class=\"hljs-string\">'webbrowser.open(&lt;path&gt;)'</span></code> instead.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install flask</span>\n<span class=\"hljs-keyword\">import</span> flask <span class=\"hljs-keyword\">as</span> fl\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">app = fl.Flask(__name__)                   <span class=\"hljs-comment\"># Returns the app object. Put at the top.</span>\napp.run(host=<span class=\"hljs-keyword\">None</span>, port=<span class=\"hljs-keyword\">None</span>, debug=<span class=\"hljs-keyword\">None</span>)  <span class=\"hljs-comment\"># Or: $ flask --app FILE run [--ARG[=VAL]]…</span>\n</code></pre>\n<ul>\n<li><strong>Starts the app at <code class=\"python hljs\"><span class=\"hljs-string\">'http://localhost:5000'</span></code>. Use <code class=\"python hljs\"><span class=\"hljs-string\">'host=\"0.0.0.0\"'</span></code> to run externally.</strong></li>\n<li><strong>Install a WSGI server like <a href=\"https://flask.palletsprojects.com/en/latest/deploying/waitress/\">Waitress</a> and a HTTP server such as <a href=\"https://flask.palletsprojects.com/en/latest/deploying/nginx/\">Nginx</a> for better security.</strong></li>\n<li><strong>Debug mode restarts the app whenever script changes and displays errors in the browser.</strong></li>\n</ul>\n<div><h3 id=\"staticrequest\">Static Request</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">@app.route('/img/&lt;path:filename&gt;')</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">serve_file</span><span class=\"hljs-params\">(filename)</span>:</span>\n    <span class=\"hljs-keyword\">return</span> fl.send_from_directory(<span class=\"hljs-string\">'dirname/'</span>, filename)\n</code></pre></div>\n\n<div><h3 id=\"dynamicrequest\">Dynamic Request</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">@app.route('/&lt;sport&gt;')</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">serve_html</span><span class=\"hljs-params\">(sport)</span>:</span>\n    <span class=\"hljs-keyword\">return</span> fl.render_template_string(<span class=\"hljs-string\">'&lt;h1&gt;{{title}}&lt;/h1&gt;'</span>, title=sport)\n</code></pre></div>\n\n<ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'fl.render_template(filename, &lt;kwargs&gt;)'</span></code> renders a file located in 'templates' dir.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'fl.abort(&lt;int&gt;)'</span></code> returns error code and <code class=\"python hljs\"><span class=\"hljs-string\">'return fl.redirect(&lt;url&gt;)'</span></code> redirects.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'fl.request.args[&lt;str&gt;]'</span></code> returns parameter from the query string (URL right of '?').</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'fl.session[&lt;str&gt;] = &lt;obj&gt;'</span></code> stores session data. It requires secret key to be set at the startup with <code class=\"python hljs\"><span class=\"hljs-string\">'app.secret_key = &lt;str&gt;'</span></code>.</strong></li>\n</ul>\n<div><h3 id=\"restrequest\">REST Request</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">@app.post('/&lt;sport&gt;/odds')</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">serve_json</span><span class=\"hljs-params\">(sport)</span>:</span>\n    team = fl.request.form[<span class=\"hljs-string\">'team'</span>]\n    <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">'team'</span>: team, <span class=\"hljs-string\">'odds'</span>: [<span class=\"hljs-number\">2.09</span>, <span class=\"hljs-number\">3.74</span>, <span class=\"hljs-number\">3.68</span>]}\n</code></pre></div>\n\n<div><h4 id=\"startstheappinitsownthreadandqueriesitsrestapi\">Starts the app in its own thread and queries its REST API:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install requests</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">import</span> threading, requests\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>threading.Thread(target=app.run, daemon=<span class=\"hljs-keyword\">True</span>).start()\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>url = <span class=\"hljs-string\">'http://localhost:5000/football/odds'</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>response = requests.post(url, data={<span class=\"hljs-string\">'team'</span>: <span class=\"hljs-string\">'arsenal f.c.'</span>})\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>response.json()\n{<span class=\"hljs-string\">'team'</span>: <span class=\"hljs-string\">'arsenal f.c.'</span>, <span class=\"hljs-string\">'odds'</span>: [<span class=\"hljs-number\">2.09</span>, <span class=\"hljs-number\">3.74</span>, <span class=\"hljs-number\">3.68</span>]}\n</code></pre></div>\n\n<div><h2 id=\"profiling\"><a href=\"#profiling\" name=\"profiling\">#</a>Profiling</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> time <span class=\"hljs-keyword\">import</span> perf_counter\nstart_time = perf_counter()\n...\nduration_in_seconds = perf_counter() - start_time\n</code></pre></div>\n\n<div><h3 id=\"timingasnippet\">Timing a Snippet</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">from</span> timeit <span class=\"hljs-keyword\">import</span> timeit\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>timeit(<span class=\"hljs-string\">'list(range(10000))'</span>, number=<span class=\"hljs-number\">1000</span>, globals=globals(), setup=<span class=\"hljs-string\">'pass'</span>)\n<span class=\"hljs-number\">0.19373</span>\n</code></pre></div>\n\n<div><h3 id=\"profilingbyline\">Profiling by Line</h3><pre><code class=\"text language-text\">$ pip3 install line_profiler\n$ echo '@profile\ndef main():\n    a = list(range(10000))\n    b = set(range(10000))\nmain()' &gt; test.py\n$ kernprof -lv test.py\nLine #      Hits         Time  Per Hit   % Time  Line Contents\n==============================================================\n     1                                           @profile\n     2                                           def main():\n     3         1        253.4    253.4     32.2      a = list(range(10000))\n     4         1        534.1    534.1     67.8      b = set(range(10000))\n</code></pre></div>\n\n<div><h3 id=\"callandflamegraphs\">Call and Flame Graphs</h3><pre><code class=\"bash language-bash hljs\">$ apt/brew install graphviz &amp;&amp; pip3 install gprof2dot snakeviz  <span class=\"hljs-comment\"># Or download installer.</span>\n$ tail --lines=+2 test.py &gt; test.py                             <span class=\"hljs-comment\"># Removes first line.</span>\n$ python3 -m cProfile -o test.prof test.py                      <span class=\"hljs-comment\"># Runs built-in profiler.</span>\n$ gprof2dot --format=pstats test.prof | dot -T png -o test.png  <span class=\"hljs-comment\"># Generates call graph.</span>\n$ xdg-open/open test.png                                        <span class=\"hljs-comment\"># Displays call graph.</span>\n$ snakeviz test.prof                                            <span class=\"hljs-comment\"># Displays flame graph.</span>\n</code></pre></div>\n\n<div><h3 id=\"samplingandmemoryprofilers\">Sampling and Memory Profilers</h3><pre><code class=\"text language-text\">┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━┯━━━━━━┓\n┃ pip3 install │   Target   │          How to run           │ Lines │ Live ┃\n┠──────────────┼────────────┼───────────────────────────────┼───────┼──────┨\n┃ pyinstrument │    CPU     │ pyinstrument test.py          │   ×   │  ×   ┃\n┃ py-spy       │    CPU     │ py-spy top -- python3 test.py │   ×   │  ✓   ┃\n┃ scalene      │ CPU+Memory │ scalene test.py               │   ✓   │  ×   ┃\n┃ memray       │   Memory   │ memray run --live test.py     │   ✓   │  ✓   ┃\n┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┷━━━━━━━┷━━━━━━┛\n</code></pre></div>\n\n<div><h2 id=\"numpy\"><a href=\"#numpy\" name=\"numpy\">#</a>NumPy</h2><p><strong>Array manipulation mini-language. It can run up to one hundred times faster than the equivalent Python code. An even faster alternative that runs on a GPU is called CuPy.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install numpy</span>\n<span class=\"hljs-keyword\">import</span> numpy <span class=\"hljs-keyword\">as</span> np\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;array&gt; = np.array(&lt;list/list_of_lists/…&gt;)              <span class=\"hljs-comment\"># Returns a 1d/2d/… NumPy array.</span>\n&lt;array&gt; = np.zeros/ones/empty(&lt;shape&gt;)                  <span class=\"hljs-comment\"># Also np.full(&lt;shape&gt;, &lt;el&gt;).</span>\n&lt;array&gt; = np.arange(from_inc, to_exc, ±step)            <span class=\"hljs-comment\"># Also np.linspace(start, stop, len).</span>\n&lt;array&gt; = np.random.randint(from_inc, to_exc, &lt;shape&gt;)  <span class=\"hljs-comment\"># Also np.random.random(&lt;shape&gt;).</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;view&gt;  = &lt;array&gt;.reshape(&lt;shape&gt;)                      <span class=\"hljs-comment\"># Also `&lt;array&gt;.shape = &lt;shape&gt;`.</span>\n&lt;array&gt; = &lt;array&gt;.flatten()                             <span class=\"hljs-comment\"># Also `&lt;view&gt; = &lt;array&gt;.ravel()`.</span>\n&lt;view&gt;  = &lt;array&gt;.transpose()                           <span class=\"hljs-comment\"># Or: &lt;array&gt;.T</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;array&gt; = np.copy/abs/sqrt/log/int64(&lt;array&gt;)           <span class=\"hljs-comment\"># Returns new array of the same shape.</span>\n&lt;array&gt; = &lt;array&gt;.sum/max/mean/argmax/all(axis)         <span class=\"hljs-comment\"># Aggregates specified dimension.</span>\n&lt;array&gt; = np.apply_along_axis(&lt;func&gt;, axis, &lt;array&gt;)    <span class=\"hljs-comment\"># Func can return a scalar or array.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;array&gt; = np.concatenate(&lt;list_of_arrays&gt;, axis=<span class=\"hljs-number\">0</span>)      <span class=\"hljs-comment\"># Links arrays along first axis (rows).</span>\n&lt;array&gt; = np.vstack/column_stack(&lt;list_of_arrays&gt;)      <span class=\"hljs-comment\"># Treats 1d arrays as rows or columns.</span>\n&lt;array&gt; = np.tile/repeat(&lt;array&gt;, &lt;int/list&gt; [, axis])  <span class=\"hljs-comment\"># Tiles array or repeats its elements.</span>\n</code></pre>\n<ul>\n<li><strong>Shape is a tuple of dimension sizes. A 100x50 RGB image has shape (50, 100, 3).</strong></li>\n<li><strong>Axis is an index of a dimension. Leftmost dimension has index 0. Summing the RGB image along axis 2 will return a greyscale image with shape (50, 100).</strong></li>\n</ul>\n<div><h3 id=\"indexing\">Indexing</h3><pre><code class=\"bash hljs\">&lt;el&gt;       = &lt;2d&gt;[row_index, col_index]                 <span class=\"hljs-comment\"># Or: &lt;3d&gt;[&lt;int&gt;, &lt;int&gt;, &lt;int&gt;]</span>\n&lt;1d_view&gt;  = &lt;2d&gt;[row_index]                            <span class=\"hljs-comment\"># Or: &lt;3d&gt;[&lt;int&gt;, &lt;int&gt;, &lt;slice&gt;]</span>\n&lt;1d_view&gt;  = &lt;2d&gt;[:, col_index]                         <span class=\"hljs-comment\"># Or: &lt;3d&gt;[&lt;int&gt;, &lt;slice&gt;, &lt;int&gt;]</span>\n&lt;2d_view&gt;  = &lt;2d&gt;[from:to_row_i, from:to_col_i]         <span class=\"hljs-comment\"># Or: &lt;3d&gt;[&lt;int&gt;, &lt;slice&gt;, &lt;slice&gt;]</span>\n</code></pre></div>\n\n<pre><code class=\"bash hljs\">&lt;1d_array&gt; = &lt;2d&gt;[row_indices, col_indices]             <span class=\"hljs-comment\"># Or: &lt;3d&gt;[&lt;int/1d&gt;, &lt;1d&gt;, &lt;1d&gt;]</span>\n&lt;2d_array&gt; = &lt;2d&gt;[row_indices]                          <span class=\"hljs-comment\"># Or: &lt;3d&gt;[&lt;int/1d&gt;, &lt;1d&gt;, &lt;slice&gt;]</span>\n&lt;2d_array&gt; = &lt;2d&gt;[:, col_indices]                       <span class=\"hljs-comment\"># Or: &lt;3d&gt;[&lt;int/1d&gt;, &lt;slice&gt;, &lt;1d&gt;]</span>\n&lt;2d_array&gt; = &lt;2d&gt;[np.ix_(row_indices, col_indices)]     <span class=\"hljs-comment\"># Or: &lt;3d&gt;[&lt;int/1d/2d&gt;, &lt;2d&gt;, &lt;2d&gt;]</span>\n</code></pre>\n<pre><code class=\"bash hljs\">&lt;2d_bools&gt; = &lt;2d&gt; &gt; &lt;el/1d/2d&gt;                          <span class=\"hljs-comment\"># 1d object must have size of a row.</span>\n&lt;1/2d_arr&gt; = &lt;2d&gt;[&lt;2d/1d_bools&gt;]                        <span class=\"hljs-comment\"># 1d_bools must have size of a column.</span>\n</code></pre>\n<ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">':'</span></code> returns a slice of all dimension's indices. Omitted dimensions default to <code class=\"python hljs\"><span class=\"hljs-string\">':'</span></code>.</strong></li>\n<li><strong>Python converts <code class=\"python hljs\"><span class=\"hljs-string\">'obj[i, j]'</span></code> to <code class=\"python hljs\"><span class=\"hljs-string\">'obj[(i, j)]'</span></code>. This makes <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;2d&gt;[row_i, col_i]'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;2d&gt;[row_indices]'</span></code> indistinguishable to NumPy if tuple of indices is passed!</strong></li>\n<li><strong>Indexing with a slice and 1d object works the same as when using two slices (lines 4, 6, 7).</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'ix_([1, 2], [3, 4])'</span></code> returns <code class=\"python hljs\"><span class=\"hljs-string\">'[[1], [2]]'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'[[3, 4]]'</span></code>. Due to broadcasting rules, this is the same as using <code class=\"python hljs\"><span class=\"hljs-string\">'[[1, 1], [2, 2]]'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'[[3, 4], [3, 4]]'</span></code>.</strong></li>\n<li><strong>Any value that is broadcastable to the indexed shape can be assigned to the selection.</strong></li>\n</ul>\n<div><h3 id=\"broadcasting\">Broadcasting</h3><p><strong>A set of rules by which NumPy functions operate on arrays of different shapes.</strong></p><pre><code class=\"python language-python hljs\">left  = np.array([<span class=\"hljs-number\">0.1</span>,  <span class=\"hljs-number\">0.6</span>,  <span class=\"hljs-number\">0.8</span>])                     <span class=\"hljs-comment\"># `left.shape  == (3,)`</span>\nright = np.array([[<span class=\"hljs-number\">0.1</span>], [<span class=\"hljs-number\">0.6</span>], [<span class=\"hljs-number\">0.8</span>]])                 <span class=\"hljs-comment\"># `right.shape == (3, 1)`</span>\n</code></pre></div>\n\n\n<div><h4 id=\"1ifarrayshapesdifferinlengthleftpadtheshortershapewithones\">1. If array shapes differ in length, left-pad the shorter shape with ones:</h4><pre><code class=\"python language-python hljs\">left  = np.array([[<span class=\"hljs-number\">0.1</span>,  <span class=\"hljs-number\">0.6</span>,  <span class=\"hljs-number\">0.8</span>]])                   <span class=\"hljs-comment\"># `left.shape  == (1, 3)`</span>\nright = np.array([[<span class=\"hljs-number\">0.1</span>], [<span class=\"hljs-number\">0.6</span>], [<span class=\"hljs-number\">0.8</span>]])                 <span class=\"hljs-comment\"># `right.shape == (3, 1)`</span>\n</code></pre></div>\n\n<div><h4 id=\"2ifanydimensionsdifferinsizeexpandtheonesthathavesize1byduplicatingtheirelements\">2. If any dimensions differ in size, expand the ones that have size 1 by duplicating their elements:</h4><pre><code class=\"python language-python hljs\">left  = np.array([[<span class=\"hljs-number\">0.1</span>,  <span class=\"hljs-number\">0.6</span>,  <span class=\"hljs-number\">0.8</span>],                    <span class=\"hljs-comment\"># `left.shape  == (3, 3)`</span>\n                  [<span class=\"hljs-number\">0.1</span>,  <span class=\"hljs-number\">0.6</span>,  <span class=\"hljs-number\">0.8</span>],\n                  [<span class=\"hljs-number\">0.1</span>,  <span class=\"hljs-number\">0.6</span>,  <span class=\"hljs-number\">0.8</span>]])\n\nright = np.array([[<span class=\"hljs-number\">0.1</span>,  <span class=\"hljs-number\">0.1</span>,  <span class=\"hljs-number\">0.1</span>],                    <span class=\"hljs-comment\"># `right.shape == (3, 3)`</span>\n                  [<span class=\"hljs-number\">0.6</span>,  <span class=\"hljs-number\">0.6</span>,  <span class=\"hljs-number\">0.6</span>],\n                  [<span class=\"hljs-number\">0.8</span>,  <span class=\"hljs-number\">0.8</span>,  <span class=\"hljs-number\">0.8</span>]])\n</code></pre></div>\n\n<div><h3 id=\"example-3\">Example</h3><div><h4 id=\"foreachpointreturnsindexofitsnearestpoint010608121\">For each point returns index of its nearest point (<code class=\"python hljs\">[<span class=\"hljs-number\">0.1</span>, <span class=\"hljs-number\">0.6</span>, <span class=\"hljs-number\">0.8</span>] =&gt; [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>]</code>):</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>print(points := np.array([<span class=\"hljs-number\">0.1</span>, <span class=\"hljs-number\">0.6</span>, <span class=\"hljs-number\">0.8</span>]))\n[<span class=\"hljs-number\">0.1</span>  <span class=\"hljs-number\">0.6</span>  <span class=\"hljs-number\">0.8</span>]\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>print(wrapped_points := points.reshape(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">1</span>))\n[[<span class=\"hljs-number\">0.1</span>]\n [<span class=\"hljs-number\">0.6</span>]\n [<span class=\"hljs-number\">0.8</span>]]\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>print(deltas := points - wrapped_points)\n[[ <span class=\"hljs-number\">0.</span>   <span class=\"hljs-number\">0.5</span>  <span class=\"hljs-number\">0.7</span>]\n [<span class=\"hljs-number\">-0.5</span>  <span class=\"hljs-number\">0.</span>   <span class=\"hljs-number\">0.2</span>]\n [<span class=\"hljs-number\">-0.7</span> <span class=\"hljs-number\">-0.2</span>  <span class=\"hljs-number\">0.</span> ]]\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>deltas[range(<span class=\"hljs-number\">3</span>), range(<span class=\"hljs-number\">3</span>)] = np.inf\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>print(distances := np.abs(deltas))\n[[inf  <span class=\"hljs-number\">0.5</span>  <span class=\"hljs-number\">0.7</span>]\n [<span class=\"hljs-number\">0.5</span>  inf  <span class=\"hljs-number\">0.2</span>]\n [<span class=\"hljs-number\">0.7</span>  <span class=\"hljs-number\">0.2</span>  inf]]\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>print(distances.argmin(axis=<span class=\"hljs-number\">1</span>))\n[<span class=\"hljs-number\">1</span> <span class=\"hljs-number\">2</span> <span class=\"hljs-number\">1</span>]\n</code></pre></div></div>\n\n\n<div><h2 id=\"image\"><a href=\"#image\" name=\"image\">#</a>Image</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install pillow</span>\n<span class=\"hljs-keyword\">from</span> PIL <span class=\"hljs-keyword\">import</span> Image\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;Image&gt; = Image.new(<span class=\"hljs-string\">'&lt;mode&gt;'</span>, (width, height))  <span class=\"hljs-comment\"># Creates new image. Also `color=&lt;int/tuple&gt;`.</span>\n&lt;Image&gt; = Image.open(&lt;path&gt;)                    <span class=\"hljs-comment\"># Identifies format based on file's contents.</span>\n&lt;Image&gt; = &lt;Image&gt;.convert(<span class=\"hljs-string\">'&lt;mode&gt;'</span>)             <span class=\"hljs-comment\"># Converts image to the new mode (see Modes).</span>\n&lt;Image&gt;.save(&lt;path&gt;)                            <span class=\"hljs-comment\"># Selects format based on extension (PNG/JPG…).</span>\n&lt;Image&gt;.show()                                  <span class=\"hljs-comment\"># Displays image in default preview app.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;int/tup&gt; = &lt;Image&gt;.getpixel((x, y))            <span class=\"hljs-comment\"># Returns pixel's value (its color).</span>\n&lt;ImgCore&gt; = &lt;Image&gt;.getdata()                   <span class=\"hljs-comment\"># Returns a flattened view of pixel values.</span>\n&lt;Image&gt;.putpixel((x, y), &lt;int/tuple&gt;)           <span class=\"hljs-comment\"># Updates pixel's value. Clips passed int/s.</span>\n&lt;Image&gt;.putdata(&lt;list/ImgCore&gt;)                 <span class=\"hljs-comment\"># Updates pixels with a copy of the sequence.</span>\n&lt;Image&gt;.paste(&lt;Image&gt;, (x, y))                  <span class=\"hljs-comment\"># Draws passed image at the specified location.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;Image&gt; = &lt;Image&gt;.filter(&lt;Filter&gt;)              <span class=\"hljs-comment\"># Use ImageFilter.&lt;name&gt;(&lt;args&gt;) for Filter.</span>\n&lt;Image&gt; = &lt;Enhance&gt;.enhance(&lt;float&gt;)            <span class=\"hljs-comment\"># Use ImageEnhance.&lt;name&gt;(&lt;Image&gt;) for Enhance.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;array&gt; = np.array(&lt;Image&gt;)                     <span class=\"hljs-comment\"># Creates a 2d/3d NumPy array from the image.</span>\n&lt;Image&gt; = Image.fromarray(np.uint8(&lt;array&gt;))    <span class=\"hljs-comment\"># Use &lt;array&gt;.clip(0, 255) to clip the values.</span>\n</code></pre>\n<div><h3 id=\"modes-1\">Modes</h3><ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'L'</span></code> - Lightness (greyscale image). Each pixel is an int between 0 and 255.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'RGB'</span></code> - Red, green, blue (true color image). Each pixel is a tuple of three ints.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'RGBA'</span></code> - RGB with alpha. Low alpha (i.e. forth int) makes pixels more transparent.</strong></li>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'HSV'</span></code> - Hue, saturation, value. Three ints representing color in HSV color space.</strong></li>\n</ul><div><h3 id=\"examples\">Examples</h3><div><h4 id=\"createsapngimageofarainbowgradient\">Creates a PNG image of a rainbow gradient:</h4><pre><code class=\"python language-python hljs\">WIDTH, HEIGHT = <span class=\"hljs-number\">100</span>, <span class=\"hljs-number\">100</span>\nn_pixels = WIDTH * HEIGHT\nhues = (<span class=\"hljs-number\">255</span> * i/n_pixels <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(n_pixels))\nimg = Image.new(<span class=\"hljs-string\">'HSV'</span>, (WIDTH, HEIGHT))\nimg.putdata([(int(h), <span class=\"hljs-number\">255</span>, <span class=\"hljs-number\">255</span>) <span class=\"hljs-keyword\">for</span> h <span class=\"hljs-keyword\">in</span> hues])\nimg.convert(<span class=\"hljs-string\">'RGB'</span>).save(<span class=\"hljs-string\">'test.png'</span>)\n</code></pre></div></div></div>\n\n\n\n\n<div><h4 id=\"addsnoisetothepngimageanddisplaysit\">Adds noise to the PNG image and displays it:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> random <span class=\"hljs-keyword\">import</span> randint\nadd_noise = <span class=\"hljs-keyword\">lambda</span> value: max(<span class=\"hljs-number\">0</span>, min(<span class=\"hljs-number\">255</span>, value + randint(<span class=\"hljs-number\">-20</span>, <span class=\"hljs-number\">20</span>)))\nimg = Image.open(<span class=\"hljs-string\">'test.png'</span>).convert(<span class=\"hljs-string\">'HSV'</span>)\nimg.putdata([(add_noise(h), s, v) <span class=\"hljs-keyword\">for</span> h, s, v <span class=\"hljs-keyword\">in</span> img.getdata()])\nimg.show()\n</code></pre></div>\n\n<div><h3 id=\"imagedraw\">Image Draw</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> PIL <span class=\"hljs-keyword\">import</span> ImageDraw\n&lt;Draw&gt; = ImageDraw.Draw(&lt;Image&gt;)                <span class=\"hljs-comment\"># Object for adding 2D graphics to the image.</span>\n&lt;Draw&gt;.point((x, y))                            <span class=\"hljs-comment\"># Draws a point. Truncates floats into ints.</span>\n&lt;Draw&gt;.line((x1, y1, x2, y2 [, ...]))           <span class=\"hljs-comment\"># To get anti-aliasing use Image's resize().</span>\n&lt;Draw&gt;.arc((x1, y1, x2, y2), deg1, deg2)        <span class=\"hljs-comment\"># Draws in clockwise dir. Also pieslice().</span>\n&lt;Draw&gt;.rectangle((x1, y1, x2, y2))              <span class=\"hljs-comment\"># Also rounded_rectangle(), regular_polygon().</span>\n&lt;Draw&gt;.polygon((x1, y1, x2, y2, ...))           <span class=\"hljs-comment\"># Last point gets connected to the first.</span>\n&lt;Draw&gt;.ellipse((x1, y1, x2, y2))                <span class=\"hljs-comment\"># To rotate use Image's rotate() and paste().</span>\n&lt;Draw&gt;.text((x, y), &lt;str&gt;, font=&lt;Font&gt;)         <span class=\"hljs-comment\"># `&lt;Font&gt; = ImageFont.truetype(&lt;path&gt;, size)`.</span>\n</code></pre></div>\n\n<ul>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'fill=&lt;color&gt;'</span></code> to set the primary color.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'width=&lt;int&gt;'</span></code> to set the width of lines or contours.</strong></li>\n<li><strong>Use <code class=\"python hljs\"><span class=\"hljs-string\">'outline=&lt;color&gt;'</span></code> to set the color of the contours.</strong></li>\n<li><strong>Color can be an int, tuple, <code class=\"python hljs\"><span class=\"hljs-string\">'#rrggbb[aa]'</span></code> string or a color name.</strong></li>\n</ul>\n<div><h2 id=\"animation\"><a href=\"#animation\" name=\"animation\">#</a>Animation</h2><div><h4 id=\"createsagifofabouncingball\">Creates a GIF of a bouncing ball:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install imageio</span>\n<span class=\"hljs-keyword\">from</span> PIL <span class=\"hljs-keyword\">import</span> Image, ImageDraw\n<span class=\"hljs-keyword\">import</span> imageio\n\nWIDTH, HEIGHT, R = <span class=\"hljs-number\">126</span>, <span class=\"hljs-number\">126</span>, <span class=\"hljs-number\">10</span>\nframes = []\n<span class=\"hljs-keyword\">for</span> velocity <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">16</span>):\n    y = sum(range(velocity))\n    frame = Image.new(<span class=\"hljs-string\">'L'</span>, (WIDTH, HEIGHT))\n    draw = ImageDraw.Draw(frame)\n    draw.ellipse((WIDTH/<span class=\"hljs-number\">2</span>-R, y, WIDTH/<span class=\"hljs-number\">2</span>+R, y+R*<span class=\"hljs-number\">2</span>), fill=<span class=\"hljs-string\">'white'</span>)\n    frames.append(frame)\nframes += reversed(frames[<span class=\"hljs-number\">1</span>:<span class=\"hljs-number\">-1</span>])\nimageio.mimsave(<span class=\"hljs-string\">'test.gif'</span>, frames, duration=<span class=\"hljs-number\">0.03</span>)\n</code></pre></div></div>\n\n\n<div><h2 id=\"audio\"><a href=\"#audio\" name=\"audio\">#</a>Audio</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> wave\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;Wave&gt;  = wave.open(<span class=\"hljs-string\">'&lt;path&gt;'</span>)         <span class=\"hljs-comment\"># Opens the WAV file for reading.</span>\n&lt;int&gt;   = &lt;Wave&gt;.getframerate()       <span class=\"hljs-comment\"># Returns number of frames per second.</span>\n&lt;int&gt;   = &lt;Wave&gt;.getnchannels()       <span class=\"hljs-comment\"># Returns number of samples per frame.</span>\n&lt;int&gt;   = &lt;Wave&gt;.getsampwidth()       <span class=\"hljs-comment\"># Returns number of bytes per sample.</span>\n&lt;tuple&gt; = &lt;Wave&gt;.getparams()          <span class=\"hljs-comment\"># Returns namedtuple of all parameters.</span>\n&lt;bytes&gt; = &lt;Wave&gt;.readframes(nframes)  <span class=\"hljs-comment\"># Returns next n frames (-1 returns all).</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;Wave&gt; = wave.open(<span class=\"hljs-string\">'&lt;path&gt;'</span>, <span class=\"hljs-string\">'wb'</span>)    <span class=\"hljs-comment\"># Creates/truncates a file for writing.</span>\n&lt;Wave&gt;.setframerate(&lt;int&gt;)            <span class=\"hljs-comment\"># Pass 44100 for CD, 48000 for video.</span>\n&lt;Wave&gt;.setnchannels(&lt;int&gt;)            <span class=\"hljs-comment\"># Pass 1 for mono, 2 for stereo.</span>\n&lt;Wave&gt;.setsampwidth(&lt;int&gt;)            <span class=\"hljs-comment\"># Pass 2 for CD, 3 for hi-res sound.</span>\n&lt;Wave&gt;.setparams(&lt;tuple&gt;)             <span class=\"hljs-comment\"># Tuple must contain all parameters.</span>\n&lt;Wave&gt;.writeframes(&lt;bytes&gt;)           <span class=\"hljs-comment\"># Appends frames to the file.</span>\n</code></pre>\n<ul>\n<li><strong>Bytes object contains a sequence of frames, each consisting of one or more samples.</strong></li>\n<li><strong>In a stereo signal, the first sample of a frame belongs to the left channel.</strong></li>\n<li><strong>Each sample consists of one or more bytes that, when converted to an integer, indicate the displacement of a speaker membrane at a given moment.</strong></li>\n<li><strong>If sample width is one byte, then the integer should be encoded unsigned. For all other sizes, the integer should be encoded signed with little-endian byte order.</strong></li>\n</ul>\n<div><h3 id=\"samplevalues\">Sample Values</h3><pre><code class=\"python hljs\">┏━━━━━━━━━━━┯━━━━━━━━━━━┯━━━━━━┯━━━━━━━━━━━┓\n┃ sampwidth │    min    │ zero │    max    ┃\n┠───────────┼───────────┼──────┼───────────┨\n┃     <span class=\"hljs-number\">1</span>     │         <span class=\"hljs-number\">0</span> │  <span class=\"hljs-number\">128</span> │       <span class=\"hljs-number\">255</span> ┃\n┃     <span class=\"hljs-number\">2</span>     │    <span class=\"hljs-number\">-32768</span> │    <span class=\"hljs-number\">0</span> │     <span class=\"hljs-number\">32767</span> ┃\n┃     <span class=\"hljs-number\">3</span>     │  <span class=\"hljs-number\">-8388608</span> │    <span class=\"hljs-number\">0</span> │   <span class=\"hljs-number\">8388607</span> ┃\n┗━━━━━━━━━━━┷━━━━━━━━━━━┷━━━━━━┷━━━━━━━━━━━┛\n</code></pre></div>\n\n<div><h3 id=\"readfloatsamplesfromwavfile\">Read Float Samples from WAV File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">read_wav_file</span><span class=\"hljs-params\">(filename)</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_int</span><span class=\"hljs-params\">(bytes_obj)</span>:</span>\n        an_int = int.from_bytes(bytes_obj, <span class=\"hljs-string\">'little'</span>, signed=(p.sampwidth != <span class=\"hljs-number\">1</span>))\n        <span class=\"hljs-keyword\">return</span> an_int - <span class=\"hljs-number\">128</span> * (p.sampwidth == <span class=\"hljs-number\">1</span>)\n    <span class=\"hljs-keyword\">with</span> wave.open(filename) <span class=\"hljs-keyword\">as</span> file:\n        p = file.getparams()\n        frames = file.readframes(<span class=\"hljs-number\">-1</span>)\n    bytes_samples = (frames[i : i + p.sampwidth] <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">0</span>, len(frames), p.sampwidth))\n    <span class=\"hljs-keyword\">return</span> [get_int(b) / pow(<span class=\"hljs-number\">2</span>, (p.sampwidth * <span class=\"hljs-number\">8</span>) - <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">for</span> b <span class=\"hljs-keyword\">in</span> bytes_samples], p\n</code></pre></div>\n\n<div><h3 id=\"writefloatsamplestowavfile\">Write Float Samples to WAV File</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">write_to_wav_file</span><span class=\"hljs-params\">(filename, samples_f, p=<span class=\"hljs-keyword\">None</span>, nchannels=<span class=\"hljs-number\">1</span>, sampwidth=<span class=\"hljs-number\">2</span>, framerate=<span class=\"hljs-number\">44100</span>)</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_bytes</span><span class=\"hljs-params\">(a_float)</span>:</span>\n        a_float = max(<span class=\"hljs-number\">-1</span>, min(<span class=\"hljs-number\">1</span> - <span class=\"hljs-number\">2e-16</span>, a_float))\n        a_float += p.sampwidth == <span class=\"hljs-number\">1</span>\n        a_float *= pow(<span class=\"hljs-number\">2</span>, (p.sampwidth * <span class=\"hljs-number\">8</span>) - <span class=\"hljs-number\">1</span>)\n        <span class=\"hljs-keyword\">return</span> int(a_float).to_bytes(p.sampwidth, <span class=\"hljs-string\">'little'</span>, signed=(p.sampwidth != <span class=\"hljs-number\">1</span>))\n    <span class=\"hljs-keyword\">if</span> p <span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">None</span>:\n        p = wave._wave_params(nchannels, sampwidth, framerate, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">'NONE'</span>, <span class=\"hljs-string\">'not compressed'</span>)\n    <span class=\"hljs-keyword\">with</span> wave.open(filename, <span class=\"hljs-string\">'wb'</span>) <span class=\"hljs-keyword\">as</span> file:\n        file.setparams(p)\n        file.writeframes(<span class=\"hljs-string\">b''</span>.join(get_bytes(f) <span class=\"hljs-keyword\">for</span> f <span class=\"hljs-keyword\">in</span> samples_f))\n</code></pre></div>\n\n<div><h3 id=\"examples-1\">Examples</h3><div><h4 id=\"savesa440hzsinewavetoamonowavfile\">Saves a 440 Hz sine wave to a mono WAV file:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> math <span class=\"hljs-keyword\">import</span> pi, sin\nsamples_f = (sin(i * <span class=\"hljs-number\">2</span> * pi * <span class=\"hljs-number\">440</span> / <span class=\"hljs-number\">44100</span>) <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">100_000</span>))\nwrite_to_wav_file(<span class=\"hljs-string\">'test.wav'</span>, samples_f)\n</code></pre></div></div>\n\n\n<div><h4 id=\"addsnoisetothewavfile\">Adds noise to the WAV file:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> random <span class=\"hljs-keyword\">import</span> uniform\nsamples_f, params = read_wav_file(<span class=\"hljs-string\">'test.wav'</span>)\nsamples_f = (f + uniform(<span class=\"hljs-number\">-0.05</span>, <span class=\"hljs-number\">0.05</span>) <span class=\"hljs-keyword\">for</span> f <span class=\"hljs-keyword\">in</span> samples_f)\nwrite_to_wav_file(<span class=\"hljs-string\">'test.wav'</span>, samples_f, params)\n</code></pre></div>\n\n<div><h4 id=\"playsthewavfile\">Plays the WAV file:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install simpleaudio</span>\n<span class=\"hljs-keyword\">from</span> simpleaudio <span class=\"hljs-keyword\">import</span> play_buffer\n<span class=\"hljs-keyword\">with</span> wave.open(<span class=\"hljs-string\">'test.wav'</span>) <span class=\"hljs-keyword\">as</span> file:\n    p = file.getparams()\n    frames = file.readframes(<span class=\"hljs-number\">-1</span>)\n    play_buffer(frames, p.nchannels, p.sampwidth, p.framerate).wait_done()\n</code></pre></div>\n\n<div><h3 id=\"texttospeech\">Text to Speech</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install pyttsx3</span>\n<span class=\"hljs-keyword\">import</span> pyttsx3\nengine = pyttsx3.init()\nengine.say(<span class=\"hljs-string\">'Sally sells seashells by the seashore.'</span>)\nengine.runAndWait()\n</code></pre></div>\n\n<div><h2 id=\"synthesizer\"><a href=\"#synthesizer\" name=\"synthesizer\">#</a>Synthesizer</h2><div><h4 id=\"playspopcornbygershonkingsley\">Plays Popcorn by Gershon Kingsley:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install simpleaudio</span>\n<span class=\"hljs-keyword\">import</span> array, itertools <span class=\"hljs-keyword\">as</span> it, math, simpleaudio\n\nF  = <span class=\"hljs-number\">44100</span>\nP1 = <span class=\"hljs-string\">'71♩,69♪,,71♩,66♪,,62♩,66♪,,59♩,,,71♩,69♪,,71♩,66♪,,62♩,66♪,,59♩,,,'</span>\nP2 = <span class=\"hljs-string\">'71♩,73♪,,74♩,73♪,,74♪,,71♪,,73♩,71♪,,73♪,,69♪,,71♩,69♪,,71♪,,67♪,,71♩,,,'</span>\nget_pause   = <span class=\"hljs-keyword\">lambda</span> seconds: it.repeat(<span class=\"hljs-number\">0</span>, int(seconds * F))\nsin_f       = <span class=\"hljs-keyword\">lambda</span> i, hz: math.sin(i * <span class=\"hljs-number\">2</span> * math.pi * hz / F)\nget_wave    = <span class=\"hljs-keyword\">lambda</span> hz, seconds: (sin_f(i, hz) <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(int(seconds * F)))\nget_hz      = <span class=\"hljs-keyword\">lambda</span> note: <span class=\"hljs-number\">440</span> * <span class=\"hljs-number\">2</span> ** ((int(note[:<span class=\"hljs-number\">2</span>]) - <span class=\"hljs-number\">69</span>) / <span class=\"hljs-number\">12</span>)\nget_sec     = <span class=\"hljs-keyword\">lambda</span> note: <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">4</span> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">'♩'</span> <span class=\"hljs-keyword\">in</span> note <span class=\"hljs-keyword\">else</span> <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">8</span>\nget_samples = <span class=\"hljs-keyword\">lambda</span> note: get_wave(get_hz(note), get_sec(note)) <span class=\"hljs-keyword\">if</span> note <span class=\"hljs-keyword\">else</span> get_pause(<span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">8</span>)\nsamples_f   = it.chain.from_iterable(get_samples(n) <span class=\"hljs-keyword\">for</span> n <span class=\"hljs-keyword\">in</span> (P1+P2).split(<span class=\"hljs-string\">','</span>))\nsamples_i   = array.array(<span class=\"hljs-string\">'h'</span>, (int(f * <span class=\"hljs-number\">30000</span>) <span class=\"hljs-keyword\">for</span> f <span class=\"hljs-keyword\">in</span> samples_f))\nsimpleaudio.play_buffer(samples_i, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, F).wait_done()\n</code></pre></div></div>\n\n\n<div><h2 id=\"pygame\"><a href=\"#pygame\" name=\"pygame\">#</a>Pygame</h2><div><h4 id=\"opesawindowanddrawsasquarethatcanbemovedwitharrowkeys\">Opes a window and draws a square that can be moved with arrow keys:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install pygame</span>\n<span class=\"hljs-keyword\">import</span> pygame <span class=\"hljs-keyword\">as</span> pg\n\npg.init()\nscreen = pg.display.set_mode((<span class=\"hljs-number\">500</span>, <span class=\"hljs-number\">500</span>))\nrect = pg.Rect(<span class=\"hljs-number\">240</span>, <span class=\"hljs-number\">240</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">20</span>)\n<span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">not</span> pg.event.get(pg.QUIT):\n    deltas = {pg.K_UP: (<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">-20</span>), pg.K_RIGHT: (<span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">0</span>), pg.K_DOWN: (<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">20</span>), pg.K_LEFT: (<span class=\"hljs-number\">-20</span>, <span class=\"hljs-number\">0</span>)}\n    <span class=\"hljs-keyword\">for</span> event <span class=\"hljs-keyword\">in</span> pg.event.get(pg.KEYDOWN):\n        dx, dy = deltas.get(event.key, (<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>))\n        rect = rect.move((dx, dy))\n    screen.fill(pg.Color(<span class=\"hljs-string\">'black'</span>))\n    pg.draw.rect(screen, pg.Color(<span class=\"hljs-string\">'white'</span>), rect)\n    pg.display.flip()\npg.quit()\n</code></pre></div></div>\n\n\n<div><h3 id=\"rect\">Rect</h3><p><strong>Object for storing rectangular coordinates.</strong></p><pre><code class=\"python language-python hljs\">&lt;Rect&gt; = pg.Rect(x, y, width, height)           <span class=\"hljs-comment\"># Creates Rect object. Truncates passed floats.</span>\n&lt;int&gt;  = &lt;Rect&gt;.x/y/centerx/centery/…           <span class=\"hljs-comment\"># Top, right, bottom, left. Allows assignments.</span>\n&lt;tup.&gt; = &lt;Rect&gt;.topleft/center/…                <span class=\"hljs-comment\"># Topright, bottomright, bottomleft. Same.</span>\n&lt;Rect&gt; = &lt;Rect&gt;.move((delta_x, delta_y))        <span class=\"hljs-comment\"># Use move_ip() to move in-place.</span>\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;bool&gt; = &lt;Rect&gt;.collidepoint((x, y))            <span class=\"hljs-comment\"># Checks if rectangle contains the point.</span>\n&lt;bool&gt; = &lt;Rect&gt;.colliderect(&lt;Rect&gt;)             <span class=\"hljs-comment\"># Checks if the two rectangles overlap.</span>\n&lt;int&gt;  = &lt;Rect&gt;.collidelist(&lt;list_of_Rect&gt;)     <span class=\"hljs-comment\"># Returns index of first colliding Rect or -1.</span>\n&lt;list&gt; = &lt;Rect&gt;.collidelistall(&lt;list_of_Rect&gt;)  <span class=\"hljs-comment\"># Returns indices of all colliding rectangles.</span>\n</code></pre>\n<div><h3 id=\"surface\">Surface</h3><p><strong>Object for representing images.</strong></p><pre><code class=\"python language-python hljs\">&lt;Surf&gt; = pg.display.set_mode((width, height))   <span class=\"hljs-comment\"># Opens new window and returns its surface.</span>\n&lt;Surf&gt; = pg.Surface((width, height))            <span class=\"hljs-comment\"># New RGB surface. RGBA if `flags=pg.SRCALPHA`.</span>\n&lt;Surf&gt; = pg.image.load(&lt;path/file&gt;)             <span class=\"hljs-comment\"># Loads the image. Format depends on source.</span>\n&lt;Surf&gt; = pg.surfarray.make_surface(&lt;np_array&gt;)  <span class=\"hljs-comment\"># Also `&lt;np_arr&gt; = surfarray.pixels3d(&lt;Surf&gt;)`.</span>\n&lt;Surf&gt; = &lt;Surf&gt;.subsurface(&lt;Rect&gt;)              <span class=\"hljs-comment\"># Creates a new surface from the cutout.</span>\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;Surf&gt;.fill(color)                              <span class=\"hljs-comment\"># Tuple, Color('#rrggbb[aa]') or Color(&lt;name&gt;).</span>\n&lt;Surf&gt;.set_at((x, y), color)                    <span class=\"hljs-comment\"># Updates pixel. Also &lt;Surf&gt;.get_at((x, y)).</span>\n&lt;Surf&gt;.blit(&lt;Surf&gt;, (x, y))                     <span class=\"hljs-comment\"># Draws passed surface at specified location.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> pygame.transform <span class=\"hljs-keyword\">import</span> scale, ...\n&lt;Surf&gt; = scale(&lt;Surf&gt;, (width, height))         <span class=\"hljs-comment\"># Returns scaled surface.</span>\n&lt;Surf&gt; = rotate(&lt;Surf&gt;, anticlock_degrees)      <span class=\"hljs-comment\"># Returns rotated and scaled surface.</span>\n&lt;Surf&gt; = flip(&lt;Surf&gt;, x_bool, y_bool)           <span class=\"hljs-comment\"># Returns flipped surface.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">from</span> pygame.draw <span class=\"hljs-keyword\">import</span> line, ...\nline(&lt;Surf&gt;, color, (x1, y1), (x2, y2), width)  <span class=\"hljs-comment\"># Draws a line to the surface.</span>\narc(&lt;Surf&gt;, color, &lt;Rect&gt;, from_rad, to_rad)    <span class=\"hljs-comment\"># Also ellipse(&lt;Surf&gt;, color, &lt;Rect&gt;, width=0).</span>\nrect(&lt;Surf&gt;, color, &lt;Rect&gt;, width=<span class=\"hljs-number\">0</span>)            <span class=\"hljs-comment\"># Also polygon(&lt;Surf&gt;, color, points, width=0).</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;Font&gt; = pg.font.Font(&lt;path/file&gt;, size)        <span class=\"hljs-comment\"># Loads TTF file. Pass None for default font.</span>\n&lt;Surf&gt; = &lt;Font&gt;.render(text, antialias, color)  <span class=\"hljs-comment\"># Background color can be specified at the end.</span>\n</code></pre>\n<div><h3 id=\"sound\">Sound</h3><pre><code class=\"python language-python hljs\">&lt;Sound&gt; = pg.mixer.Sound(&lt;path/file/bytes&gt;)     <span class=\"hljs-comment\"># WAV file or bytes/array of signed shorts.</span>\n&lt;Sound&gt;.play/stop()                             <span class=\"hljs-comment\"># Also set_volume(&lt;float&gt;), fadeout(msec).</span>\n</code></pre></div>\n\n<div><h3 id=\"basicmariobrothersexample\">Basic Mario Brothers Example</h3><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">import</span> collections, dataclasses, enum, io, itertools <span class=\"hljs-keyword\">as</span> it, pygame <span class=\"hljs-keyword\">as</span> pg, urllib.request\n<span class=\"hljs-keyword\">from</span> random <span class=\"hljs-keyword\">import</span> randint\n\nP = collections.namedtuple(<span class=\"hljs-string\">'P'</span>, <span class=\"hljs-string\">'x y'</span>)          <span class=\"hljs-comment\"># Position</span>\nD = enum.Enum(<span class=\"hljs-string\">'D'</span>, <span class=\"hljs-string\">'n e s w'</span>)                   <span class=\"hljs-comment\"># Direction</span>\nW, H, MAX_S = <span class=\"hljs-number\">50</span>, <span class=\"hljs-number\">50</span>, P(<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">10</span>)                  <span class=\"hljs-comment\"># Width, Height, Max speed</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_screen</span><span class=\"hljs-params\">()</span>:</span>\n        pg.init()\n        <span class=\"hljs-keyword\">return</span> pg.display.set_mode((W*<span class=\"hljs-number\">16</span>, H*<span class=\"hljs-number\">16</span>))\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_images</span><span class=\"hljs-params\">()</span>:</span>\n        url = <span class=\"hljs-string\">'https://gto76.github.io/python-cheatsheet/web/mario_bros.png'</span>\n        img = pg.image.load(io.BytesIO(urllib.request.urlopen(url).read()))\n        <span class=\"hljs-keyword\">return</span> [img.subsurface(get_rect(x, <span class=\"hljs-number\">0</span>)) <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> range(img.get_width() // <span class=\"hljs-number\">16</span>)]\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_mario</span><span class=\"hljs-params\">()</span>:</span>\n        Mario = dataclasses.make_dataclass(<span class=\"hljs-string\">'Mario'</span>, <span class=\"hljs-string\">'rect spd facing_left frame_cycle'</span>.split())\n        <span class=\"hljs-keyword\">return</span> Mario(get_rect(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>), P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>), <span class=\"hljs-keyword\">False</span>, it.cycle(range(<span class=\"hljs-number\">3</span>)))\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_tiles</span><span class=\"hljs-params\">()</span>:</span>\n        border = [(x, y) <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> range(W) <span class=\"hljs-keyword\">for</span> y <span class=\"hljs-keyword\">in</span> range(H) <span class=\"hljs-keyword\">if</span> x <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-number\">0</span>, W-<span class=\"hljs-number\">1</span>] <span class=\"hljs-keyword\">or</span> y <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-number\">0</span>, H-<span class=\"hljs-number\">1</span>]]\n        platforms = [(randint(<span class=\"hljs-number\">1</span>, W-<span class=\"hljs-number\">2</span>), randint(<span class=\"hljs-number\">2</span>, H-<span class=\"hljs-number\">2</span>)) <span class=\"hljs-keyword\">for</span> _ <span class=\"hljs-keyword\">in</span> range(W*H // <span class=\"hljs-number\">10</span>)]\n        <span class=\"hljs-keyword\">return</span> [get_rect(x, y) <span class=\"hljs-keyword\">for</span> x, y <span class=\"hljs-keyword\">in</span> border + platforms]\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_rect</span><span class=\"hljs-params\">(x, y)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> pg.Rect(x*<span class=\"hljs-number\">16</span>, y*<span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">16</span>)\n    run(get_screen(), get_images(), get_mario(), get_tiles())\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">run</span><span class=\"hljs-params\">(screen, images, mario, tiles)</span>:</span>\n    clock = pg.time.Clock()\n    pressed = set()\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">not</span> pg.event.get(pg.QUIT) <span class=\"hljs-keyword\">and</span> clock.tick(<span class=\"hljs-number\">28</span>):\n        keys = {pg.K_UP: D.n, pg.K_RIGHT: D.e, pg.K_DOWN: D.s, pg.K_LEFT: D.w}\n        pressed |= {keys.get(e.key) <span class=\"hljs-keyword\">for</span> e <span class=\"hljs-keyword\">in</span> pg.event.get(pg.KEYDOWN)}\n        pressed -= {keys.get(e.key) <span class=\"hljs-keyword\">for</span> e <span class=\"hljs-keyword\">in</span> pg.event.get(pg.KEYUP)}\n        update_speed(mario, tiles, pressed)\n        update_position(mario, tiles)\n        draw(screen, images, mario, tiles)\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">update_speed</span><span class=\"hljs-params\">(mario, tiles, pressed)</span>:</span>\n    x, y = mario.spd\n    x += <span class=\"hljs-number\">2</span> * ((D.e <span class=\"hljs-keyword\">in</span> pressed) - (D.w <span class=\"hljs-keyword\">in</span> pressed))\n    x += (x &lt; <span class=\"hljs-number\">0</span>) - (x &gt; <span class=\"hljs-number\">0</span>)\n    y += <span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">if</span> D.s <span class=\"hljs-keyword\">not</span> <span class=\"hljs-keyword\">in</span> get_boundaries(mario.rect, tiles) <span class=\"hljs-keyword\">else</span> (D.n <span class=\"hljs-keyword\">in</span> pressed) * <span class=\"hljs-number\">-10</span>\n    mario.spd = P(x=max(-MAX_S.x, min(MAX_S.x, x)), y=max(-MAX_S.y, min(MAX_S.y, y)))\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">update_position</span><span class=\"hljs-params\">(mario, tiles)</span>:</span>\n    x, y = mario.rect.topleft\n    n_steps = max(abs(s) <span class=\"hljs-keyword\">for</span> s <span class=\"hljs-keyword\">in</span> mario.spd)\n    <span class=\"hljs-keyword\">for</span> _ <span class=\"hljs-keyword\">in</span> range(n_steps):\n        mario.spd = stop_on_collision(mario.spd, get_boundaries(mario.rect, tiles))\n        x, y = x + (mario.spd.x / n_steps), y + (mario.spd.y / n_steps)\n        mario.rect.topleft = x, y\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_boundaries</span><span class=\"hljs-params\">(rect, tiles)</span>:</span>\n    deltas = {D.n: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">-1</span>), D.e: P(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>), D.s: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>), D.w: P(<span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">0</span>)}\n    <span class=\"hljs-keyword\">return</span> {d <span class=\"hljs-keyword\">for</span> d, delta <span class=\"hljs-keyword\">in</span> deltas.items() <span class=\"hljs-keyword\">if</span> rect.move(delta).collidelist(tiles) != <span class=\"hljs-number\">-1</span>}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">stop_on_collision</span><span class=\"hljs-params\">(spd, bounds)</span>:</span>\n    <span class=\"hljs-keyword\">return</span> P(x=<span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">if</span> (D.w <span class=\"hljs-keyword\">in</span> bounds <span class=\"hljs-keyword\">and</span> spd.x &lt; <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">or</span> (D.e <span class=\"hljs-keyword\">in</span> bounds <span class=\"hljs-keyword\">and</span> spd.x &gt; <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">else</span> spd.x,\n             y=<span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">if</span> (D.n <span class=\"hljs-keyword\">in</span> bounds <span class=\"hljs-keyword\">and</span> spd.y &lt; <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">or</span> (D.s <span class=\"hljs-keyword\">in</span> bounds <span class=\"hljs-keyword\">and</span> spd.y &gt; <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">else</span> spd.y)\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">draw</span><span class=\"hljs-params\">(screen, images, mario, tiles)</span>:</span>\n    screen.fill((<span class=\"hljs-number\">85</span>, <span class=\"hljs-number\">168</span>, <span class=\"hljs-number\">255</span>))\n    mario.facing_left = mario.spd.x &lt; <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">if</span> mario.spd.x <span class=\"hljs-keyword\">else</span> mario.facing_left\n    is_airborne = D.s <span class=\"hljs-keyword\">not</span> <span class=\"hljs-keyword\">in</span> get_boundaries(mario.rect, tiles)\n    image_index = <span class=\"hljs-number\">4</span> <span class=\"hljs-keyword\">if</span> is_airborne <span class=\"hljs-keyword\">else</span> (next(mario.frame_cycle) <span class=\"hljs-keyword\">if</span> mario.spd.x <span class=\"hljs-keyword\">else</span> <span class=\"hljs-number\">6</span>)\n    screen.blit(images[image_index + (mario.facing_left * <span class=\"hljs-number\">9</span>)], mario.rect)\n    <span class=\"hljs-keyword\">for</span> t <span class=\"hljs-keyword\">in</span> tiles:\n        is_border = t.x <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-number\">0</span>, (W-<span class=\"hljs-number\">1</span>)*<span class=\"hljs-number\">16</span>] <span class=\"hljs-keyword\">or</span> t.y <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-number\">0</span>, (H-<span class=\"hljs-number\">1</span>)*<span class=\"hljs-number\">16</span>]\n        screen.blit(images[<span class=\"hljs-number\">18</span> <span class=\"hljs-keyword\">if</span> is_border <span class=\"hljs-keyword\">else</span> <span class=\"hljs-number\">19</span>], t)\n    pg.display.flip()\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:\n    main()\n</code></pre></div>\n\n<div><h2 id=\"pandas\"><a href=\"#pandas\" name=\"pandas\">#</a>Pandas</h2><p><strong>Data analysis library. For examples see <a href=\"#plotly\">Plotly</a>.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install pandas matplotlib</span>\n<span class=\"hljs-keyword\">import</span> pandas <span class=\"hljs-keyword\">as</span> pd, matplotlib.pyplot <span class=\"hljs-keyword\">as</span> plt\n</code></pre></div>\n\n\n<div><h3 id=\"series\">Series</h3><p><strong>Ordered dictionary with a name.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>s = pd.Series([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>], index=[<span class=\"hljs-string\">'x'</span>, <span class=\"hljs-string\">'y'</span>], name=<span class=\"hljs-string\">'a'</span>); s\nx    <span class=\"hljs-number\">1</span>\ny    <span class=\"hljs-number\">2</span>\nName: a, dtype: int64\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;S&gt;  = pd.Series(&lt;list&gt;)                       <span class=\"hljs-comment\"># Uses list's indices for 'index'.</span>\n&lt;S&gt;  = pd.Series(&lt;dict&gt;)                       <span class=\"hljs-comment\"># Uses dictionary's keys for 'index'.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;el&gt; = &lt;S&gt;.loc[key]                            <span class=\"hljs-comment\"># Or: &lt;S&gt;.iloc[i]</span>\n&lt;S&gt;  = &lt;S&gt;.loc[coll_of_keys]                   <span class=\"hljs-comment\"># Or: &lt;S&gt;.iloc[coll_of_i]</span>\n&lt;S&gt;  = &lt;S&gt;.loc[from_key : to_key_inc]          <span class=\"hljs-comment\"># Or: &lt;S&gt;.iloc[from_i : to_i_exc]</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;el&gt; = &lt;S&gt;[key/i]                              <span class=\"hljs-comment\"># Or: &lt;S&gt;.&lt;key&gt;</span>\n&lt;S&gt;  = &lt;S&gt;[coll_of_keys/coll_of_i]             <span class=\"hljs-comment\"># Or: &lt;S&gt;[key/i : key/i]</span>\n&lt;S&gt;  = &lt;S&gt;[bools]                              <span class=\"hljs-comment\"># Or: &lt;S&gt;.loc/iloc[bools]</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;S&gt;  = &lt;S&gt; &gt; &lt;el/S&gt;                            <span class=\"hljs-comment\"># Returns S of bools. Pairs items by keys.</span>\n&lt;S&gt;  = &lt;S&gt; + &lt;el/S&gt;                            <span class=\"hljs-comment\"># Items with non-matching keys get value NaN.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;S&gt; = pd.concat(&lt;coll_of_S&gt;)                   <span class=\"hljs-comment\"># Concats multiple series into one long Series.</span>\n&lt;S&gt; = &lt;S&gt;.combine_first(&lt;S&gt;)                   <span class=\"hljs-comment\"># Adds items that are not yet present.</span>\n&lt;S&gt;.update(&lt;S&gt;)                                <span class=\"hljs-comment\"># Updates items that are already present.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;S&gt;.plot.line/area/bar/pie/hist()              <span class=\"hljs-comment\"># Generates a plot. `plt.show()` displays it.</span>\n</code></pre>\n<ul>\n<li><strong>Indexing objects can't be tuples because <code class=\"python hljs\"><span class=\"hljs-string\">'obj[x, y]'</span></code> is converted to <code class=\"python hljs\"><span class=\"hljs-string\">'obj[(x, y)]'</span></code>.</strong></li>\n<li><strong>Pandas uses NumPy types like <code class=\"python hljs\"><span class=\"hljs-string\">'np.int64'</span></code>. Series is converted to <code class=\"python hljs\"><span class=\"hljs-string\">'float64'</span></code> if we assign np.nan to any item. Use <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;S&gt;.astype(&lt;str/type&gt;)'</span></code> to get converted Series.</strong></li>\n<li><strong>Series will silently overflow if we run <code class=\"python hljs\"><span class=\"hljs-string\">'pd.Series([100], dtype=\"int8\") + 100'</span></code>!</strong></li>\n</ul>\n<div><h4 id=\"seriesaggregatetransformmap\">Series — Aggregate, Transform, Map:</h4><pre><code class=\"python language-python hljs\">&lt;el&gt; = &lt;S&gt;.sum/max/mean/idxmax/all()           <span class=\"hljs-comment\"># Or: &lt;S&gt;.agg(lambda &lt;S&gt;: &lt;el&gt;)</span>\n&lt;S&gt;  = &lt;S&gt;.rank/diff/cumsum/ffill/interpol…()  <span class=\"hljs-comment\"># Or: &lt;S&gt;.agg/transform(lambda &lt;S&gt;: &lt;S&gt;)</span>\n&lt;S&gt;  = &lt;S&gt;.isna/fillna/isin([&lt;el/coll&gt;])       <span class=\"hljs-comment\"># Or: &lt;S&gt;.agg/transform/map(lambda &lt;el&gt;: &lt;el&gt;)</span>\n</code></pre></div>\n\n<pre><code class=\"python hljs\">┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓\n┃              │    <span class=\"hljs-string\">'sum'</span>    │   [<span class=\"hljs-string\">'sum'</span>]   │ {<span class=\"hljs-string\">'s'</span>: <span class=\"hljs-string\">'sum'</span>}  ┃\n┠──────────────┼─────────────┼─────────────┼───────────────┨\n┃ s.apply(…)   │      <span class=\"hljs-number\">3</span>      │    sum  <span class=\"hljs-number\">3</span>   │     s  <span class=\"hljs-number\">3</span>      ┃\n┃ s.agg(…)     │             │             │               ┃\n┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛\n\n┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓\n┃              │    <span class=\"hljs-string\">'rank'</span>   │   [<span class=\"hljs-string\">'rank'</span>]  │ {<span class=\"hljs-string\">'r'</span>: <span class=\"hljs-string\">'rank'</span>} ┃\n┠──────────────┼─────────────┼─────────────┼───────────────┨\n┃ s.apply(…)   │             │      rank   │               ┃\n┃ s.agg(…)     │    x  <span class=\"hljs-number\">1.0</span>   │   x   <span class=\"hljs-number\">1.0</span>   │   r  x  <span class=\"hljs-number\">1.0</span>   ┃\n┃              │    y  <span class=\"hljs-number\">2.0</span>   │   y   <span class=\"hljs-number\">2.0</span>   │      y  <span class=\"hljs-number\">2.0</span>   ┃\n┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛\n</code></pre>\n\n<ul>\n<li><strong>Methods ffill(), interpolate(), fillna() and dropna() accept <code class=\"python hljs\"><span class=\"hljs-string\">'inplace=True'</span></code>.</strong></li>\n<li><strong>Agg() and transform() pass a Series to a function if it raises Type/Val/AttrError on a scalar.</strong></li>\n<li><strong>Last result has a multi-index. Use <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;S&gt;[key_1, key_2]'</span></code> to get its values.</strong></li>\n</ul>\n<div><h3 id=\"dataframe\">DataFrame</h3><p><strong>Table with labeled rows and columns.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>df = pd.DataFrame([[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>], [<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>]], index=[<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'b'</span>], columns=[<span class=\"hljs-string\">'x'</span>, <span class=\"hljs-string\">'y'</span>]); df\n   x  y\na  <span class=\"hljs-number\">1</span>  <span class=\"hljs-number\">2</span>\nb  <span class=\"hljs-number\">3</span>  <span class=\"hljs-number\">4</span>\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;DF&gt;   = pd.DataFrame(&lt;list_of_rows&gt;)          <span class=\"hljs-comment\"># Rows can be either lists, dicts or series.</span>\n&lt;DF&gt;   = pd.DataFrame(&lt;dict_of_columns&gt;)       <span class=\"hljs-comment\"># Columns can be either lists, dicts or series.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;el&gt;   = &lt;DF&gt;.loc[row_key, col_key]            <span class=\"hljs-comment\"># Or: &lt;DF&gt;.iloc[row_i, col_i]</span>\n&lt;S/DF&gt; = &lt;DF&gt;.loc[row_key/s]                   <span class=\"hljs-comment\"># Or: &lt;DF&gt;.iloc[row_i/s]</span>\n&lt;S/DF&gt; = &lt;DF&gt;.loc[:, col_key/s]                <span class=\"hljs-comment\"># Or: &lt;DF&gt;.iloc[:, col_i/s]</span>\n&lt;DF&gt;   = &lt;DF&gt;.loc[row_bools, col_bools]        <span class=\"hljs-comment\"># Or: &lt;DF&gt;.iloc[row_bools, col_bools]</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;S/DF&gt; = &lt;DF&gt;[col_key/s]                       <span class=\"hljs-comment\"># Or: &lt;DF&gt;.&lt;col_key&gt;</span>\n&lt;DF&gt;   = &lt;DF&gt;[&lt;S_of_bools&gt;]                    <span class=\"hljs-comment\"># Filters rows. For example `df[df.x &gt; 1]`.</span>\n&lt;DF&gt;   = &lt;DF&gt;[&lt;DF_of_bools&gt;]                   <span class=\"hljs-comment\"># Assigns NaN to items that are False in bools.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;DF&gt;   = &lt;DF&gt; &gt; &lt;el/S/DF&gt;                      <span class=\"hljs-comment\"># Returns DF of bools. S is treated as a row.</span>\n&lt;DF&gt;   = &lt;DF&gt; + &lt;el/S/DF&gt;                      <span class=\"hljs-comment\"># Items with non-matching keys get value NaN.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;DF&gt;   = &lt;DF&gt;.set_index(col_key)               <span class=\"hljs-comment\"># Replaces row keys with column's values.</span>\n&lt;DF&gt;   = &lt;DF&gt;.reset_index(drop=<span class=\"hljs-keyword\">False</span>)          <span class=\"hljs-comment\"># Drops or moves row keys to column named index.</span>\n&lt;DF&gt;   = &lt;DF&gt;.sort_index(ascending=<span class=\"hljs-keyword\">True</span>)       <span class=\"hljs-comment\"># Sorts rows by row keys. Use `axis=1` for cols.</span>\n&lt;DF&gt;   = &lt;DF&gt;.sort_values(col_key/s)           <span class=\"hljs-comment\"># Sorts rows by passed column/s. Also `axis=1`.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;DF&gt;   = &lt;DF&gt;.head/tail/sample(&lt;int&gt;)          <span class=\"hljs-comment\"># Returns first, last, or random n rows.</span>\n&lt;DF&gt;   = &lt;DF&gt;.describe()                       <span class=\"hljs-comment\"># Describes columns. Also info(), corr(), shape.</span>\n&lt;DF&gt;   = &lt;DF&gt;.query(<span class=\"hljs-string\">'&lt;query&gt;'</span>)                 <span class=\"hljs-comment\"># Filters rows. For example `df.query('x &gt; 1')`.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;DF&gt;.plot.line/area/bar/scatter(x=col_key, …)  <span class=\"hljs-comment\"># `y=col_key/s`. Also hist/box(by=col_key).</span>\nplt.show()                                     <span class=\"hljs-comment\"># Displays the plot. Also plt.savefig(&lt;path&gt;).</span>\n</code></pre>\n<div><h4 id=\"dataframemergejoinconcat\">DataFrame — Merge, Join, Concat:</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>df_2 = pd.DataFrame([[<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>], [<span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">7</span>]], index=[<span class=\"hljs-string\">'b'</span>, <span class=\"hljs-string\">'c'</span>], columns=[<span class=\"hljs-string\">'y'</span>, <span class=\"hljs-string\">'z'</span>]); df_2\n   y  z\nb  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">5</span>\nc  <span class=\"hljs-number\">6</span>  <span class=\"hljs-number\">7</span>\n</code></pre></div>\n\n<pre><code class=\"python hljs\">┏━━━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃                       │    <span class=\"hljs-string\">'outer'</span>    │   <span class=\"hljs-string\">'inner'</span>  │   <span class=\"hljs-string\">'left'</span>   │       Description         ┃\n┠───────────────────────┼───────────────┼────────────┼────────────┼───────────────────────────┨\n┃ df.merge(df_2,        │    x   y   z  │ x   y   z  │ x   y   z  │ Merges on column if 'on'  ┃\n┃          on=<span class=\"hljs-string\">'y'</span>,      │ <span class=\"hljs-number\">0</span>  <span class=\"hljs-number\">1</span>   <span class=\"hljs-number\">2</span>   .  │ <span class=\"hljs-number\">3</span>   <span class=\"hljs-number\">4</span>   <span class=\"hljs-number\">5</span>  │ <span class=\"hljs-number\">1</span>   <span class=\"hljs-number\">2</span>   .  │ or 'left_on/right_on' are ┃\n┃          how=…)       │ <span class=\"hljs-number\">1</span>  <span class=\"hljs-number\">3</span>   <span class=\"hljs-number\">4</span>   <span class=\"hljs-number\">5</span>  │            │ <span class=\"hljs-number\">3</span>   <span class=\"hljs-number\">4</span>   <span class=\"hljs-number\">5</span>  │ set, else on shared cols. ┃\n┃                       │ <span class=\"hljs-number\">2</span>  .   <span class=\"hljs-number\">6</span>   <span class=\"hljs-number\">7</span>  │            │            │ Uses <span class=\"hljs-string\">'inner'</span> by default.  ┃\n┠───────────────────────┼───────────────┼────────────┼────────────┼───────────────────────────┨\n┃ df.join(df_2,         │    x yl yr  z │            │ x yl yr  z │ Merges on row keys.       ┃\n┃         lsuffix=<span class=\"hljs-string\">'l'</span>,  │ a  <span class=\"hljs-number\">1</span>  <span class=\"hljs-number\">2</span>  .  . │ x yl yr  z │ <span class=\"hljs-number\">1</span>  <span class=\"hljs-number\">2</span>  .  . │ Uses <span class=\"hljs-string\">'left'</span> by default.   ┃\n┃         rsuffix=<span class=\"hljs-string\">'r'</span>,  │ b  <span class=\"hljs-number\">3</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">5</span> │ <span class=\"hljs-number\">3</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">5</span> │ <span class=\"hljs-number\">3</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">5</span> │ If Series is passed, it   ┃\n┃         how=…)        │ c  .  .  <span class=\"hljs-number\">6</span>  <span class=\"hljs-number\">7</span> │            │            │ is treated as a column.   ┃\n┠───────────────────────┼───────────────┼────────────┼────────────┼───────────────────────────┨\n┃ pd.concat([df, df_2], │    x   y   z  │     y      │            │ Adds rows at the bottom.  ┃\n┃           axis=<span class=\"hljs-number\">0</span>,     │ a  <span class=\"hljs-number\">1</span>   <span class=\"hljs-number\">2</span>   .  │     <span class=\"hljs-number\">2</span>      │            │ Uses <span class=\"hljs-string\">'outer'</span> by default.  ┃\n┃           join=…)     │ b  <span class=\"hljs-number\">3</span>   <span class=\"hljs-number\">4</span>   .  │     <span class=\"hljs-number\">4</span>      │            │ A Series is treated as a  ┃\n┃                       │ b  .   <span class=\"hljs-number\">4</span>   <span class=\"hljs-number\">5</span>  │     <span class=\"hljs-number\">4</span>      │            │ column. To add a row use  ┃\n┃                       │ c  .   <span class=\"hljs-number\">6</span>   <span class=\"hljs-number\">7</span>  │     <span class=\"hljs-number\">6</span>      │            │ pd.concat([df, DF([s])]). ┃\n┠───────────────────────┼───────────────┼────────────┼────────────┼───────────────────────────┨\n┃ pd.concat([df, df_2], │    x  y  y  z │            │            │ Adds columns at the       ┃\n┃           axis=<span class=\"hljs-number\">1</span>,     │ a  <span class=\"hljs-number\">1</span>  <span class=\"hljs-number\">2</span>  .  . │ x  y  y  z │            │ right end. Uses <span class=\"hljs-string\">'outer'</span>   ┃\n┃           join=…)     │ b  <span class=\"hljs-number\">3</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">5</span> │ <span class=\"hljs-number\">3</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">5</span> │            │ by default. A Series is   ┃\n┃                       │ c  .  .  <span class=\"hljs-number\">6</span>  <span class=\"hljs-number\">7</span> │            │            │ treated as a column.      ┃\n┗━━━━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━┛\n</code></pre>\n<div><h4 id=\"dataframeaggregatetransformmap\">DataFrame — Aggregate, Transform, Map:</h4><pre><code class=\"python language-python hljs\">&lt;S&gt;  = &lt;DF&gt;.sum/max/mean/idxmax/all()          <span class=\"hljs-comment\"># Or: &lt;DF&gt;.apply/agg(lambda &lt;S&gt;: &lt;el&gt;)</span>\n&lt;DF&gt; = &lt;DF&gt;.rank/diff/cumsum/ffill/interpo…()  <span class=\"hljs-comment\"># Or: &lt;DF&gt;.apply/agg/transform(lambda &lt;S&gt;: &lt;S&gt;)</span>\n&lt;DF&gt; = &lt;DF&gt;.isna/fillna/isin([&lt;el/coll&gt;])      <span class=\"hljs-comment\"># Or: &lt;DF&gt;.applymap(lambda &lt;el&gt;: &lt;el&gt;)</span>\n</code></pre></div>\n\n<pre><code class=\"python hljs\">┏━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓\n┃                 │     <span class=\"hljs-string\">'sum'</span>     │    [<span class=\"hljs-string\">'sum'</span>]    │ {<span class=\"hljs-string\">'x'</span>: <span class=\"hljs-string\">'sum'</span>}  ┃\n┠─────────────────┼───────────────┼───────────────┼───────────────┨\n┃ df.apply(…)     │      x  <span class=\"hljs-number\">4</span>     │        x  y   │     x  <span class=\"hljs-number\">4</span>      ┃\n┃ df.agg(…)       │      y  <span class=\"hljs-number\">6</span>     │   sum  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">6</span>   │               ┃\n┗━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛\n\n┏━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓\n┃                 │     <span class=\"hljs-string\">'rank'</span>    │    [<span class=\"hljs-string\">'rank'</span>]   │ {<span class=\"hljs-string\">'x'</span>: <span class=\"hljs-string\">'rank'</span>} ┃\n┠─────────────────┼───────────────┼───────────────┼───────────────┨\n┃ df.apply(…)     │               │       x    y  │               ┃\n┃ df.agg(…)       │       x    y  │    rank rank  │         x     ┃\n┃ df.transform(…) │  a  <span class=\"hljs-number\">1.0</span>  <span class=\"hljs-number\">1.0</span>  │  a  <span class=\"hljs-number\">1.0</span>  <span class=\"hljs-number\">1.0</span>  │    a  <span class=\"hljs-number\">1.0</span>     ┃\n┃                 │  b  <span class=\"hljs-number\">2.0</span>  <span class=\"hljs-number\">2.0</span>  │  b  <span class=\"hljs-number\">2.0</span>  <span class=\"hljs-number\">2.0</span>  │    b  <span class=\"hljs-number\">2.0</span>     ┃\n┗━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛\n</code></pre>\n\n<ul>\n<li><strong>All methods operate on columns by default. Pass <code class=\"python hljs\"><span class=\"hljs-string\">'axis=1'</span></code> to process the rows instead.</strong></li>\n<li><strong>Fifth result's columns are indexed with a multi-index. This means we need a tuple of column keys to specify a column: <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;DF&gt;.loc[row_key, (col_key_1, col_key_2)]'</span></code>.</strong></li>\n</ul>\n<div><h4 id=\"dataframemultiindex\">DataFrame — Multi-Index:</h4><pre><code class=\"python language-python hljs\">&lt;DF&gt;   = &lt;DF&gt;.xs(key, level=&lt;int&gt;)             <span class=\"hljs-comment\"># Rows with key on passed level of multi-index.</span>\n&lt;DF&gt;   = &lt;DF&gt;.xs(keys, level=&lt;ints&gt;, axis=<span class=\"hljs-number\">1</span>)   <span class=\"hljs-comment\"># Cols that have first key on first level, etc.</span>\n&lt;DF&gt;   = &lt;DF&gt;.set_index(col_keys)              <span class=\"hljs-comment\"># Creates index from cols. Also `append=False`.</span>\n&lt;S/DF&gt; = &lt;DF&gt;.stack/unstack(level=<span class=\"hljs-number\">-1</span>)          <span class=\"hljs-comment\"># Combines col keys with row keys or vice versa.</span>\n&lt;DF&gt;   = &lt;DF&gt;.pivot_table(index=col_key/s)     <span class=\"hljs-comment\"># `columns=key/s, values=key/s, aggfunc='mean'`.</span>\n</code></pre></div>\n\n<div><h3 id=\"fileformats\">File Formats</h3><pre><code class=\"python language-python hljs\">&lt;S/DF&gt; = pd.read_json/pickle(&lt;path/url/file&gt;)  <span class=\"hljs-comment\"># Also accepts io.StringIO/BytesIO(&lt;str/bytes&gt;).</span>\n&lt;DF&gt;   = pd.read_csv/excel(&lt;path/url/file&gt;)    <span class=\"hljs-comment\"># Also `header/index_col/dtype/usecols/…=&lt;obj&gt;`.</span>\n&lt;list&gt; = pd.read_html(&lt;path/url/file&gt;)         <span class=\"hljs-comment\"># Raises ImportError if webpage has zero tables.</span>\n&lt;S/DF&gt; = pd.read_parquet/feather/hdf(&lt;path…&gt;)  <span class=\"hljs-comment\"># Read_hdf() accepts `key='&lt;df_name&gt;'` argument.</span>\n&lt;DF&gt;   = pd.read_sql(<span class=\"hljs-string\">'&lt;table/query&gt;'</span>, &lt;conn&gt;)  <span class=\"hljs-comment\"># Pass SQLite3/Alchemy connection (see #SQLite).</span>\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;DF&gt;.to_json/csv/html/parquet/latex(&lt;path&gt;)    <span class=\"hljs-comment\"># Returns a string/bytes if path is omitted.</span>\n&lt;DF&gt;.to_pickle/excel/feather/hdf(&lt;path&gt;)       <span class=\"hljs-comment\"># To_hdf() requires `key='&lt;df_name&gt;'` argument.</span>\n&lt;DF&gt;.to_sql(<span class=\"hljs-string\">'&lt;table_name&gt;'</span>, &lt;connection&gt;)      <span class=\"hljs-comment\"># Also `if_exists='fail/replace/append'`.</span>\n</code></pre>\n<ul>\n<li><strong><code class=\"python hljs\"><span class=\"hljs-string\">'$ pip3 install \"pandas[excel]\" odfpy lxml pyarrow'</span></code> installs dependencies.</strong></li>\n<li><strong>Read_csv() only parses dates of columns that were specified by 'parse_dates' argument. It&nbsp;automatically tries to detect the format, but it can be helped with 'date_format' or 'dayfirst' arguments. Both dates and datetimes get stored as pd.Timestamp objects.</strong></li>\n<li><strong>If there's a single invalid date then it returns the whole column as a series of strings, unlike <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;S&gt; = pd.to_datetime(&lt;S&gt;, errors=\"coerce\")'</span></code>, which uses pd.NaT.</strong></li>\n<li><strong>To get specific attributes from a series of Timestamps use <code class=\"python hljs\"><span class=\"hljs-string\">'&lt;S&gt;.dt.year/date/…'</span></code>.</strong></li>\n</ul>\n<div><h3 id=\"groupby\">GroupBy</h3><p><strong>Object that groups together rows of a dataframe based on the value of the passed column.</strong></p><pre><code class=\"python language-python hljs\">&lt;GB&gt; = &lt;DF&gt;.groupby(col_key/s)                 <span class=\"hljs-comment\"># Splits DF into groups based on passed column.</span>\n&lt;DF&gt; = &lt;GB&gt;.apply/filter(&lt;func&gt;)               <span class=\"hljs-comment\"># Filter drops a group if func returns False.</span>\n&lt;DF&gt; = &lt;GB&gt;.get_group(&lt;el&gt;)                    <span class=\"hljs-comment\"># Selects a group by grouping column's value.</span>\n&lt;S&gt;  = &lt;GB&gt;.size()                             <span class=\"hljs-comment\"># S of group sizes. Same keys as get_group().</span>\n&lt;GB&gt; = &lt;GB&gt;[col_key]                           <span class=\"hljs-comment\"># Single column GB. All operations return S.</span>\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\">&lt;DF&gt; = &lt;GB&gt;.sum/max/mean/idxmax/all()          <span class=\"hljs-comment\"># Or: &lt;GB&gt;.agg(lambda &lt;S&gt;: &lt;el&gt;)</span>\n&lt;DF&gt; = &lt;GB&gt;.rank/diff/cumsum/ffill()           <span class=\"hljs-comment\"># Or: &lt;GB&gt;.transform(lambda &lt;S&gt;: &lt;S&gt;)</span>\n&lt;DF&gt; = &lt;GB&gt;.fillna(&lt;el&gt;)                       <span class=\"hljs-comment\"># Or: &lt;GB&gt;.transform(lambda &lt;S&gt;: &lt;S&gt;)</span>\n</code></pre>\n<div><h4 id=\"dividesrowsintogroupsandsumstheircolumnsresulthasanamedindexthatcreatescolumnzonreset_index\">Divides rows into groups and sums their columns. Result has a named index that creates column <code class=\"python hljs\"><span class=\"hljs-string\">'z'</span></code> on reset_index():</h4><pre><code class=\"python language-python hljs\"><span class=\"hljs-meta\">&gt;&gt;&gt; </span>df = pd.DataFrame([[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], [<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>], [<span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">6</span>]], list(<span class=\"hljs-string\">'abc'</span>), list(<span class=\"hljs-string\">'xyz'</span>))\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>gb = df.groupby(<span class=\"hljs-string\">'z'</span>); gb.apply(print)\n   x  y  z\na  <span class=\"hljs-number\">1</span>  <span class=\"hljs-number\">2</span>  <span class=\"hljs-number\">3</span>\n   x  y  z\nb  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">5</span>  <span class=\"hljs-number\">6</span>\nc  <span class=\"hljs-number\">7</span>  <span class=\"hljs-number\">8</span>  <span class=\"hljs-number\">6</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>gb.sum()\n    x   y\nz\n<span class=\"hljs-number\">3</span>   <span class=\"hljs-number\">1</span>   <span class=\"hljs-number\">2</span>\n<span class=\"hljs-number\">6</span>  <span class=\"hljs-number\">11</span>  <span class=\"hljs-number\">13</span></code></pre></div>\n\n<div><h3 id=\"rolling\">Rolling</h3><p><strong>Object for rolling window calculations.</strong></p><pre><code class=\"python language-python hljs\">&lt;RS/RDF/RGB&gt; = &lt;S/DF/GB&gt;.rolling(win_size)     <span class=\"hljs-comment\"># Also: `min_periods=None, center=False`.</span>\n&lt;RS/RDF/RGB&gt; = &lt;RDF/RGB&gt;[col_key/s]            <span class=\"hljs-comment\"># Or: &lt;RDF/RGB&gt;.&lt;col_key&gt;</span>\n&lt;S/DF&gt;       = &lt;R&gt;.mean/sum/max()              <span class=\"hljs-comment\"># Or: &lt;R&gt;.apply/agg(&lt;agg_func/str&gt;)</span>\n</code></pre></div>\n\n\n<div><h2 id=\"plotly\"><a href=\"#plotly\" name=\"plotly\">#</a>Plotly</h2><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install plotly kaleido pandas</span>\n<span class=\"hljs-keyword\">import</span> plotly.express <span class=\"hljs-keyword\">as</span> px, pandas <span class=\"hljs-keyword\">as</span> pd\n</code></pre></div>\n\n<pre><code class=\"python language-python hljs\">&lt;Fig&gt; = px.line(&lt;DF&gt;, x=col_key, y=col_key)            <span class=\"hljs-comment\"># Or: px.line(x=&lt;list&gt;, y=&lt;list&gt;)</span>\n&lt;Fig&gt;.update_layout(margin=dict(t=<span class=\"hljs-number\">0</span>, r=<span class=\"hljs-number\">0</span>, b=<span class=\"hljs-number\">0</span>, l=<span class=\"hljs-number\">0</span>))   <span class=\"hljs-comment\"># Also `paper_bgcolor='rgb(0, 0, 0)'`.</span>\n&lt;Fig&gt;.write_html/json/image(<span class=\"hljs-string\">'&lt;path&gt;'</span>)                  <span class=\"hljs-comment\"># &lt;Fig&gt;.show() displays the plot.</span>\n</code></pre>\n<pre><code class=\"python language-python hljs\">&lt;Fig&gt; = px.area/bar/box(&lt;DF&gt;, x=col_key, y=col_key)    <span class=\"hljs-comment\"># Also `color=col_key`.</span>\n&lt;Fig&gt; = px.scatter(&lt;DF&gt;, x=col_key, y=col_key)         <span class=\"hljs-comment\"># Also `color/size/symbol=col_key`.</span>\n&lt;Fig&gt; = px.scatter_3d(&lt;DF&gt;, x=col_key, y=col_key, …)   <span class=\"hljs-comment\"># `z=col_key`. Also color/size/symbol.</span>\n&lt;Fig&gt; = px.histogram(&lt;DF&gt;, x=col_key [, nbins=&lt;int&gt;])  <span class=\"hljs-comment\"># Number of bins depends on DF size.</span>\n</code></pre>\n<div><h4 id=\"displaysalinechartoftotalcoronavirusdeathspermilliongroupedbycontinent\">Displays a line chart of total coronavirus deaths per million grouped by continent:</h4><p></p><div id=\"2a950764-39fc-416d-97fe-0a6226a3095f\" class=\"plotly-graph-div\" style=\"height:312px; width:914px;\"></div><pre><code class=\"python language-python hljs\">covid = pd.read_csv(<span class=\"hljs-string\">'https://raw.githubusercontent.com/owid/covid-19-data/8dde8ca49b'</span>\n                    <span class=\"hljs-string\">'6e648c17dd420b2726ca0779402651/public/data/owid-covid-data.csv'</span>,\n                    usecols=[<span class=\"hljs-string\">'iso_code'</span>, <span class=\"hljs-string\">'date'</span>, <span class=\"hljs-string\">'total_deaths'</span>, <span class=\"hljs-string\">'population'</span>])\ncontinents = pd.read_csv(<span class=\"hljs-string\">'https://gto76.github.io/python-cheatsheet/web/continents.csv'</span>,\n                         usecols=[<span class=\"hljs-string\">'Three_Letter_Country_Code'</span>, <span class=\"hljs-string\">'Continent_Name'</span>])\ndf = pd.merge(covid, continents, left_on=<span class=\"hljs-string\">'iso_code'</span>, right_on=<span class=\"hljs-string\">'Three_Letter_Country_Code'</span>)\ndf = df.groupby([<span class=\"hljs-string\">'Continent_Name'</span>, <span class=\"hljs-string\">'date'</span>]).sum().reset_index()\ndf[<span class=\"hljs-string\">'Total Deaths per Million'</span>] = df.total_deaths * <span class=\"hljs-number\">1e6</span> / df.population\ndf = df[df.date &gt; <span class=\"hljs-string\">'2020-03-14'</span>]\ndf = df.rename({<span class=\"hljs-string\">'date'</span>: <span class=\"hljs-string\">'Date'</span>, <span class=\"hljs-string\">'Continent_Name'</span>: <span class=\"hljs-string\">'Continent'</span>}, axis=<span class=\"hljs-string\">'columns'</span>)\npx.line(df, x=<span class=\"hljs-string\">'Date'</span>, y=<span class=\"hljs-string\">'Total Deaths per Million'</span>, color=<span class=\"hljs-string\">'Continent'</span>).show()\n</code></pre></div>\n\n\n\n<div><h4 id=\"displaysamultiaxislinechartoftotalcoronaviruscasesandchangesinpricesofbitcoindowjonesandgold\">Displays a multi-axis line chart of total coronavirus cases and changes in prices of Bitcoin, Dow Jones and gold:</h4><p></p><div id=\"e23ccacc-a456-478b-b467-7282a2165921\" class=\"plotly-graph-div\" style=\"height:287px; width:935px;\"></div><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install pandas lxml selenium plotly</span>\n<span class=\"hljs-keyword\">import</span> pandas <span class=\"hljs-keyword\">as</span> pd, selenium.webdriver, plotly.graph_objects <span class=\"hljs-keyword\">as</span> go\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span>:</span>\n    covid, (bitcoin, gold, dow) = get_covid_cases(), get_tickers()\n    df = wrangle_data(covid, bitcoin, gold, dow)\n    display_data(df)\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_covid_cases</span><span class=\"hljs-params\">()</span>:</span>\n    url = <span class=\"hljs-string\">'https://covid.ourworldindata.org/data/owid-covid-data.csv'</span>\n    df = pd.read_csv(url, usecols=[<span class=\"hljs-string\">'location'</span>, <span class=\"hljs-string\">'date'</span>, <span class=\"hljs-string\">'total_cases'</span>], parse_dates=[<span class=\"hljs-string\">'date'</span>])\n    df = df[df.location == <span class=\"hljs-string\">'World'</span>]\n    s = df.set_index(<span class=\"hljs-string\">'date'</span>).total_cases\n    <span class=\"hljs-keyword\">return</span> s.rename(<span class=\"hljs-string\">'Total Cases'</span>)\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_tickers</span><span class=\"hljs-params\">()</span>:</span>\n    <span class=\"hljs-keyword\">with</span> selenium.webdriver.Chrome() <span class=\"hljs-keyword\">as</span> driver:\n        symbols = {<span class=\"hljs-string\">'Bitcoin'</span>: <span class=\"hljs-string\">'BTC-USD'</span>, <span class=\"hljs-string\">'Gold'</span>: <span class=\"hljs-string\">'GC=F'</span>, <span class=\"hljs-string\">'Dow Jones'</span>: <span class=\"hljs-string\">'%5EDJI'</span>}\n        <span class=\"hljs-keyword\">for</span> name, symbol <span class=\"hljs-keyword\">in</span> symbols.items():\n            <span class=\"hljs-keyword\">yield</span> get_ticker(driver, name, symbol)\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_ticker</span><span class=\"hljs-params\">(driver, name, symbol)</span>:</span>\n    url = <span class=\"hljs-string\">f'https://finance.yahoo.com/quote/<span class=\"hljs-subst\">{symbol}</span>/history/'</span>\n    driver.get(url + <span class=\"hljs-string\">'?period1=1579651200&amp;period2=9999999999'</span>)\n    <span class=\"hljs-keyword\">if</span> buttons := driver.find_elements(<span class=\"hljs-string\">'xpath'</span>, <span class=\"hljs-string\">'//button[@name=\"reject\"]'</span>):\n        buttons[<span class=\"hljs-number\">0</span>].click()\n    dataframes = pd.read_html(driver.page_source, parse_dates=[<span class=\"hljs-string\">'Date'</span>])\n    s = dataframes[<span class=\"hljs-number\">0</span>].set_index(<span class=\"hljs-string\">'Date'</span>).Open\n    <span class=\"hljs-keyword\">return</span> s.rename(name)\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">wrangle_data</span><span class=\"hljs-params\">(covid, bitcoin, gold, dow)</span>:</span>\n    df = pd.concat([bitcoin, gold, dow], axis=<span class=\"hljs-number\">1</span>)  <span class=\"hljs-comment\"># Creates table by joining columns on dates.</span>\n    df = df.sort_index().interpolate()            <span class=\"hljs-comment\"># Sorts rows by date and interpolates NaN-s.</span>\n    df = df.loc[<span class=\"hljs-string\">'2020-02-23'</span>:<span class=\"hljs-string\">'2021-12-20'</span>]        <span class=\"hljs-comment\"># Keeps rows between specified dates.</span>\n    df = (df / df.iloc[<span class=\"hljs-number\">0</span>]) * <span class=\"hljs-number\">100</span>                  <span class=\"hljs-comment\"># Calculates percentages relative to day 1.</span>\n    df = df.join(covid)                           <span class=\"hljs-comment\"># Adds column with covid cases.</span>\n    <span class=\"hljs-keyword\">return</span> df.sort_values(df.index[<span class=\"hljs-number\">-1</span>], axis=<span class=\"hljs-number\">1</span>)   <span class=\"hljs-comment\"># Sorts columns by last day's value.</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">display_data</span><span class=\"hljs-params\">(df)</span>:</span>\n    figure = go.Figure()\n    <span class=\"hljs-keyword\">for</span> col_name <span class=\"hljs-keyword\">in</span> reversed(df.columns):\n        yaxis = <span class=\"hljs-string\">'y1'</span> <span class=\"hljs-keyword\">if</span> col_name == <span class=\"hljs-string\">'Total Cases'</span> <span class=\"hljs-keyword\">else</span> <span class=\"hljs-string\">'y2'</span>\n        trace = go.Scatter(x=df.index, y=df[col_name], yaxis=yaxis, name=col_name)\n        figure.add_trace(trace)\n    figure.update_layout(\n        width=<span class=\"hljs-number\">944</span>,\n        height=<span class=\"hljs-number\">423</span>,\n        yaxis1=dict(title=<span class=\"hljs-string\">'Total Cases'</span>, rangemode=<span class=\"hljs-string\">'tozero'</span>),\n        yaxis2=dict(title=<span class=\"hljs-string\">'%'</span>, rangemode=<span class=\"hljs-string\">'tozero'</span>, overlaying=<span class=\"hljs-string\">'y'</span>, side=<span class=\"hljs-string\">'right'</span>),\n        colorway=[<span class=\"hljs-string\">'#EF553B'</span>, <span class=\"hljs-string\">'#636EFA'</span>, <span class=\"hljs-string\">'#00CC96'</span>, <span class=\"hljs-string\">'#FFA152'</span>],\n        legend=dict(x=<span class=\"hljs-number\">1.08</span>)\n    )\n    figure.show()\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:\n    main()\n</code></pre></div>\n\n\n\n<div><h2 id=\"appendix\"><a href=\"#appendix\" name=\"appendix\">#</a>Appendix</h2><div><h3 id=\"cython\">Cython</h3><p><strong>Library that compiles Python-like code into C.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\"># $ pip3 install cython</span>\n<span class=\"hljs-keyword\">import</span> pyximport; pyximport.install()  <span class=\"hljs-comment\"># Module that runs imported Cython scripts.</span>\n<span class=\"hljs-keyword\">import</span> &lt;cython_script&gt;                 <span class=\"hljs-comment\"># Script must be saved with '.pyx' extension.</span>\n&lt;cython_script&gt;.main()                 <span class=\"hljs-comment\"># Main() isn't automatically executed.</span>\n</code></pre></div></div>\n\n\n\n<div><h4 id=\"definitions\">Definitions:</h4><ul>\n<li><strong>All <code class=\"python hljs\"><span class=\"hljs-string\">'cdef'</span></code> definitions are optional, but they contribute to the speed-up.</strong></li>\n<li><strong>Also supports C pointers via <code class=\"python hljs\"><span class=\"hljs-string\">'*'</span></code> and <code class=\"python hljs\"><span class=\"hljs-string\">'&amp;'</span></code>, structs, unions, and enums.</strong></li>\n</ul><pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">cdef</span> &lt;ctype/type&gt; &lt;var_name&gt; [= &lt;obj&gt;]\n<span class=\"hljs-keyword\">cdef</span> &lt;ctype&gt;[n_elements] &lt;var_name&gt; [= &lt;coll_of_nums&gt;]\n<span class=\"hljs-keyword\">cdef</span> &lt;ctype/type/void&gt; &lt;func_name&gt;(&lt;ctype/type&gt; &lt;arg_name&gt;): ...\n</code></pre></div>\n\n\n<pre><code class=\"python language-python hljs\"><span class=\"hljs-keyword\">cdef</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> &lt;<span class=\"hljs-title\">class_name</span>&gt;:</span>\n    <span class=\"hljs-keyword\">cdef</span> <span class=\"hljs-keyword\">public</span> &lt;ctype/type&gt; &lt;attr_name&gt;\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, &lt;ctype/type&gt; &lt;arg_name&gt;)</span>:</span>\n        self.&lt;attr_name&gt; = &lt;arg_name&gt;\n</code></pre>\n<div><h3 id=\"virtualenvironments\">Virtual Environments</h3><p><strong>System for installing libraries directly into project's directory.</strong></p><pre><code class=\"python hljs\">$ python3 -m venv NAME      <span class=\"hljs-comment\"># Creates virtual environment in current directory.</span>\n$ source NAME/bin/activate  <span class=\"hljs-comment\"># Activates env. On Windows run `NAME\\Scripts\\activate`.</span>\n$ pip3 install LIBRARY      <span class=\"hljs-comment\"># Installs the library into active environment.</span>\n$ python3 FILE              <span class=\"hljs-comment\"># Runs the script in active environment. Also `./FILE`.</span>\n$ deactivate                <span class=\"hljs-comment\"># Deactivates the active virtual environment.</span>\n</code></pre></div>\n\n\n<div><h3 id=\"basicscripttemplate\">Basic Script Template</h3><p><strong>Run the script with <code class=\"python hljs\"><span class=\"hljs-string\">'$ python3 FILE'</span></code> or <code class=\"python hljs\"><span class=\"hljs-string\">'$ chmod u+x FILE; ./FILE'</span></code>. To automatically start the debugger when uncaught exception occurs run <code class=\"python hljs\"><span class=\"hljs-string\">'$ python3 -m pdb -cc FILE'</span></code>.</strong></p><pre><code class=\"python language-python hljs\"><span class=\"hljs-comment\">#!/usr/bin/env python3</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Usage: .py</span>\n<span class=\"hljs-comment\">#</span>\n\n<span class=\"hljs-keyword\">from</span> sys <span class=\"hljs-keyword\">import</span> argv, exit\n<span class=\"hljs-keyword\">from</span> collections <span class=\"hljs-keyword\">import</span> defaultdict, namedtuple\n<span class=\"hljs-keyword\">from</span> dataclasses <span class=\"hljs-keyword\">import</span> make_dataclass\n<span class=\"hljs-keyword\">from</span> enum <span class=\"hljs-keyword\">import</span> Enum\n<span class=\"hljs-keyword\">import</span> functools <span class=\"hljs-keyword\">as</span> ft, itertools <span class=\"hljs-keyword\">as</span> it, operator <span class=\"hljs-keyword\">as</span> op, re\n\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span>:</span>\n    <span class=\"hljs-keyword\">pass</span>\n\n\n<span class=\"hljs-comment\">###</span>\n<span class=\"hljs-comment\">##  UTIL</span>\n<span class=\"hljs-comment\">#</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">read_file</span><span class=\"hljs-params\">(filename)</span>:</span>\n    <span class=\"hljs-keyword\">with</span> open(filename, encoding=<span class=\"hljs-string\">'utf-8'</span>) <span class=\"hljs-keyword\">as</span> file:\n        <span class=\"hljs-keyword\">return</span> file.readlines()\n\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:\n    main()\n</code></pre></div>\n\n\n<div><h2 id=\"index\"><a href=\"#index\" name=\"index\">#</a>Index</h2><ul><li><strong>Ctrl+F / ⌘F is usually sufficient.</strong></li>\n<li><strong>Searching <code class=\"python hljs\"><span class=\"hljs-string\">'#&lt;title&gt;'</span></code> will limit the search to the titles.</strong></li>\n<li><strong>Click on the title's <code class=\"python hljs\"><span class=\"hljs-string\">'#'</span></code> to get a link to its section.</strong></li>\n</ul></div>\n \n\n  <footer>\n    <aside>December 31, 2024</aside>\n    <a href=\"https://gto76.github.io\" rel=\"author\">Jure Šorn</a>\n  </footer>\n\n  <a href=\"javascript:\" id=\"return-to-top\"><i class=\"icon-chevron-up\"></i></a>\n\n  <script src=\"web/jquery-3.4.0.min.js\"></script>\n  <script src=\"web/script_2.js\"></script>\n  <script type=\"text/javascript\" src=\"https://transactions.sendowl.com/assets/sendowl.js\" ></script>\n  <script src=\"web/plotly.min.js\"></script>\n  <script src=\"web/covid_deaths.js\"></script>\n  <script src=\"web/covid_cases.js\"></script>\n</body>\n\n</html>\n"
        },
        {
          "name": "parse.js",
          "type": "blob",
          "size": 75.96,
          "content": "#!/usr/bin/env node\n// Usage: node parse.js\n//\n// Script that creates index.html out of web/template.html and README.md.\n//\n// It is written in JS because this code used to be executed on the client side.\n// To install the Node.js and npm run:\n// $ sudo apt install nodejs npm  # On macOS use `brew install ...` instead.\n//\n// To install dependencies globally, run:\n// $ npm install -g jsdom jquery showdown highlightjs@9.12.0\n//\n// If running on macOS and modules can't be found after installation add:\n// export NODE_PATH=/usr/local/lib/node_modules\n// to the ~/.bash_profile or ~/.bashrc file and run '$ bash'.\n//\n// To avoid problems with permissions and path variables, install modules\n// into project's directory using:\n// $ npm install jsdom jquery showdown highlightjs@9.12.0\n//\n// It is also advisable to add a Bash script into .git/hooks directory, that will\n// run this script before every commit. It should be named 'pre-commit' and it\n// should contain the following line: `./parse.js`.\n\n\nconst fs = require('fs');\nconst jsdom = require('jsdom');\nconst showdown  = require('showdown');\nconst hljs = require('highlightjs');\n\n\nconst TOC =\n  '<pre style=\"border-left: none;padding-left: 1.9px;\"><code class=\"hljs bash\" style=\"line-height: 1.327em;\"><strong>ToC</strong> = {\\n' +\n  '    <strong><span class=\"hljs-string\">\\'1. Collections\\'</span></strong>: [<a href=\"#list\">List</a>, <a href=\"#dictionary\">Dictionary</a>, <a href=\"#set\">Set</a>, <a href=\"#tuple\">Tuple</a>, <a href=\"#range\">Range</a>, <a href=\"#enumerate\">Enumerate</a>, <a href=\"#iterator\">Iterator</a>, <a href=\"#generator\">Generator</a>],\\n' +\n  '    <strong><span class=\"hljs-string\">\\'2. Types\\'</span></strong>:       [<a href=\"#type\">Type</a>, <a href=\"#string\">String</a>, <a href=\"#regex\">Regular_Exp</a>, <a href=\"#format\">Format</a>, <a href=\"#numbers\">Numbers</a>, <a href=\"#combinatorics\">Combinatorics</a>, <a href=\"#datetime\">Datetime</a>],\\n' +\n  '    <strong><span class=\"hljs-string\">\\'3. Syntax\\'</span></strong>:      [<a href=\"#arguments\">Args</a>, <a href=\"#inline\">Inline</a>, <a href=\"#imports\">Import</a>, <a href=\"#decorator\">Decorator</a>, <a href=\"#class\">Class</a>, <a href=\"#ducktypes\">Duck_Types</a>, <a href=\"#enum\">Enum</a>, <a href=\"#exceptions\">Exception</a>],\\n' +\n  '    <strong><span class=\"hljs-string\">\\'4. System\\'</span></strong>:      [<a href=\"#exit\">Exit</a>, <a href=\"#print\">Print</a>, <a href=\"#input\">Input</a>, <a href=\"#commandlinearguments\">Command_Line_Arguments</a>, <a href=\"#open\">Open</a>, <a href=\"#paths\">Path</a>, <a href=\"#oscommands\">OS_Commands</a>],\\n' +\n  '    <strong><span class=\"hljs-string\">\\'5. Data\\'</span></strong>:        [<a href=\"#json\">JSON</a>, <a href=\"#pickle\">Pickle</a>, <a href=\"#csv\">CSV</a>, <a href=\"#sqlite\">SQLite</a>, <a href=\"#bytes\">Bytes</a>, <a href=\"#struct\">Struct</a>, <a href=\"#array\">Array</a>, <a href=\"#memoryview\">Memory_View</a>, <a href=\"#deque\">Deque</a>],\\n' +\n  '    <strong><span class=\"hljs-string\">\\'6. Advanced\\'</span></strong>:    [<a href=\"#operator\">Operator</a>, <a href=\"#matchstatement\">Match_Stmt</a>, <a href=\"#logging\">Logging</a>, <a href=\"#introspection\">Introspection</a>, <a href=\"#threading\">Threading</a>, <a href=\"#coroutines\">Coroutines</a>],\\n' +\n  '    <strong><span class=\"hljs-string\">\\'7. Libraries\\'</span></strong>:   [<a href=\"#progressbar\">Progress_Bar</a>, <a href=\"#plot\">Plot</a>, <a href=\"#table\">Table</a>, <a href=\"#consoleapp\">Console_App</a>, <a href=\"#guiapp\">GUI</a>, <a href=\"#scraping\">Scraping</a>, <a href=\"#webapp\">Web</a>, <a href=\"#profiling\">Profile</a>],\\n' +\n  '    <strong><span class=\"hljs-string\">\\'8. Multimedia\\'</span></strong>:  [<a href=\"#numpy\">NumPy</a>, <a href=\"#image\">Image</a>, <a href=\"#animation\">Animation</a>, <a href=\"#audio\">Audio</a>, <a href=\"#synthesizer\">Synthesizer</a>, <a href=\"#pygame\">Pygame</a>, <a href=\"#pandas\">Pandas</a>, <a href=\"#plotly\">Plotly</a>]\\n' +\n  '}\\n' +\n  '</code></pre>\\n';\n\nconst BIN_HEX =\n  '&lt;int&gt; = ±<span class=\"hljs-number\">0b</span>&lt;bin&gt;                                  <span class=\"hljs-comment\"># Or: ±0x&lt;hex&gt;</span>\\n' +\n  '&lt;int&gt; = int(<span class=\"hljs-string\">\\'±&lt;bin&gt;\\'</span>, <span class=\"hljs-number\">2</span>)                          <span class=\"hljs-comment\"># Or: int(\\'±&lt;hex&gt;\\', 16)</span>\\n' +\n  '&lt;int&gt; = int(<span class=\"hljs-string\">\\'±0b&lt;bin&gt;\\'</span>, <span class=\"hljs-number\">0</span>)                        <span class=\"hljs-comment\"># Or: int(\\'±0x&lt;hex&gt;\\', 0)</span>\\n' +\n  '&lt;str&gt; = bin(&lt;int&gt;)                                <span class=\"hljs-comment\"># Returns \\'[-]0b&lt;bin&gt;\\'. Also hex().</span>\\n';\n\nconst CACHE =\n  '<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> cache\\n' +\n  '\\n' +\n  '<span class=\"hljs-meta\">@cache</span>\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">fib</span><span class=\"hljs-params\">(n)</span>:</span>\\n' +\n  '    <span class=\"hljs-keyword\">return</span> n <span class=\"hljs-keyword\">if</span> n &lt; <span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">else</span> fib(n-<span class=\"hljs-number\">2</span>) + fib(n-<span class=\"hljs-number\">1</span>)';\n\nconst PARAMETRIZED_DECORATOR =\n  '<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> wraps\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">debug</span><span class=\"hljs-params\">(print_result=<span class=\"hljs-keyword\">False</span>)</span>:</span>\\n' +\n  '    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">decorator</span><span class=\"hljs-params\">(func)</span>:</span>\\n' +\n  '<span class=\"hljs-meta\">        @wraps(func)</span>\\n' +\n  '        <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">out</span><span class=\"hljs-params\">(*args, **kwargs)</span>:</span>\\n' +\n  '            result = func(*args, **kwargs)\\n' +\n  '            print(func.__name__, result <span class=\"hljs-keyword\">if</span> print_result <span class=\"hljs-keyword\">else</span> <span class=\"hljs-string\">\\'\\'</span>)\\n' +\n  '            <span class=\"hljs-keyword\">return</span> result\\n' +\n  '        <span class=\"hljs-keyword\">return</span> out\\n' +\n  '    <span class=\"hljs-keyword\">return</span> decorator\\n' +\n  '\\n' +\n  '<span class=\"hljs-meta\">@debug(print_result=True)</span>\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">add</span><span class=\"hljs-params\">(x, y)</span>:</span>\\n' +\n  '    <span class=\"hljs-keyword\">return</span> x + y\\n';\n\nconst REPR_USE_CASES =\n  'print/str/repr([&lt;obj&gt;])\\n' +\n  'print/str/repr({&lt;obj&gt;: &lt;obj&gt;})\\n' +\n  '<span class=\"hljs-string\">f\\'<span class=\"hljs-subst\">{&lt;obj&gt;!r}</span>\\'</span>\\n' +\n  'Z = dataclasses.make_dataclass(<span class=\"hljs-string\">\\'Z\\'</span>, [<span class=\"hljs-string\">\\'a\\'</span>]); print/str/repr(Z(&lt;obj&gt;))\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>&lt;obj&gt;\\n';\n\nconst CONSTRUCTOR_OVERLOADING =\n  '<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> &lt;<span class=\"hljs-title\">name</span>&gt;:</span>\\n' +\n  '    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, a=<span class=\"hljs-keyword\">None</span>)</span>:</span>\\n' +\n  '        self.a = a\\n';\n\nconst SHUTIL_COPY =\n  'shutil.copy(from, to)               <span class=\"hljs-comment\"># Copies the file. \\'to\\' can exist or be a dir.</span>\\n' +\n  'shutil.copy2(from, to)              <span class=\"hljs-comment\"># Also copies creation and modification time.</span>\\n' +\n  'shutil.copytree(from, to)           <span class=\"hljs-comment\"># Copies the directory. \\'to\\' must not exist.</span>\\n';\n\nconst OS_RENAME =\n  'os.rename(from, to)                 <span class=\"hljs-comment\"># Renames/moves the file or directory.</span>\\n' +\n  'os.replace(from, to)                <span class=\"hljs-comment\"># Same, but overwrites file \\'to\\' even on Windows.</span>\\n' +\n  'shutil.move(from, to)               <span class=\"hljs-comment\"># Rename() that moves into \\'to\\' if it\\'s a dir.</span>\\n';\n\nconst STRUCT_FORMAT =\n  '<span class=\"hljs-section\">\\'&lt;n&gt;s\\'</span><span class=\"hljs-attribute\"></span>';\n\nconst MATCH =\n  '<span class=\"hljs-keyword\">match</span> &lt;object/expression&gt;:\\n' +\n  '    <span class=\"hljs-keyword\">case</span> &lt;pattern&gt; [<span class=\"hljs-keyword\">if</span> &lt;condition&gt;]:\\n' +\n  '        &lt;code&gt;\\n' +\n  '    ...\\n';\n\nconst MATCH_EXAMPLE =\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">from</span> pathlib <span class=\"hljs-keyword\">import</span> Path\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">match</span> Path(<span class=\"hljs-string\">\\'/home/gto/python-cheatsheet/README.md\\'</span>):\\n' +\n  '<span class=\"hljs-meta\">... </span>    <span class=\"hljs-keyword\">case</span> Path(\\n' +\n  '<span class=\"hljs-meta\">... </span>        parts=[<span class=\"hljs-string\">\\'/\\'</span>, <span class=\"hljs-string\">\\'home\\'</span>, user, *_]\\n' +\n  '<span class=\"hljs-meta\">... </span>    ) <span class=\"hljs-keyword\">as</span> p <span class=\"hljs-keyword\">if</span> p.name.lower().startswith(<span class=\"hljs-string\">\\'readme\\'</span>) <span class=\"hljs-keyword\">and</span> p.is_file():\\n' +\n  '<span class=\"hljs-meta\">... </span>        print(<span class=\"hljs-string\">f\\'<span class=\"hljs-subst\">{p.name}</span> is a readme file that belongs to user <span class=\"hljs-subst\">{user}</span>.\\'</span>)\\n' +\n  'README.md is a readme file that belongs to user gto.\\n';\n\nconst COROUTINES =\n  '<span class=\"hljs-keyword\">import</span> asyncio, collections, curses, curses.textpad, enum, random\\n' +\n  '\\n' +\n  'P = collections.namedtuple(<span class=\"hljs-string\">\\'P\\'</span>, <span class=\"hljs-string\">\\'x y\\'</span>)    <span class=\"hljs-comment\"># Position</span>\\n' +\n  'D = enum.Enum(<span class=\"hljs-string\">\\'D\\'</span>, <span class=\"hljs-string\">\\'n e s w\\'</span>)             <span class=\"hljs-comment\"># Direction</span>\\n' +\n  'W, H = <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">7</span>                              <span class=\"hljs-comment\"># Width, Height</span>\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(screen)</span>:</span>\\n' +\n  '    curses.curs_set(<span class=\"hljs-number\">0</span>)                    <span class=\"hljs-comment\"># Makes cursor invisible.</span>\\n' +\n  '    screen.nodelay(<span class=\"hljs-keyword\">True</span>)                  <span class=\"hljs-comment\"># Makes getch() non-blocking.</span>\\n' +\n  '    asyncio.run(main_coroutine(screen))   <span class=\"hljs-comment\"># Starts running asyncio code.</span>\\n' +\n  '\\n' +\n  '<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main_coroutine</span><span class=\"hljs-params\">(screen)</span>:</span>\\n' +\n  '    moves = asyncio.Queue()\\n' +\n  '    state = {<span class=\"hljs-string\">\\'*\\'</span>: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>)} | {id_: P(W//<span class=\"hljs-number\">2</span>, H//<span class=\"hljs-number\">2</span>) <span class=\"hljs-keyword\">for</span> id_ <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>)}\\n' +\n  '    ai    = [random_controller(id_, moves) <span class=\"hljs-keyword\">for</span> id_ <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>)]\\n' +\n  '    mvc   = [human_controller(screen, moves), model(moves, state), view(state, screen)]\\n' +\n  '    tasks = [asyncio.create_task(coro) <span class=\"hljs-keyword\">for</span> coro <span class=\"hljs-keyword\">in</span> ai + mvc]\\n' +\n  '    <span class=\"hljs-keyword\">await</span> asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)\\n' +\n  '\\n' +\n  '<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">random_controller</span><span class=\"hljs-params\">(id_, moves)</span>:</span>\\n' +\n  '    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">True</span>:\\n' +\n  '        d = random.choice(list(D))\\n' +\n  '        moves.put_nowait((id_, d))\\n' +\n  '        <span class=\"hljs-keyword\">await</span> asyncio.sleep(random.triangular(<span class=\"hljs-number\">0.01</span>, <span class=\"hljs-number\">0.65</span>))\\n' +\n  '\\n' +\n  '<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">human_controller</span><span class=\"hljs-params\">(screen, moves)</span>:</span>\\n' +\n  '    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">True</span>:\\n' +\n  '        key_mappings = {<span class=\"hljs-number\">258</span>: D.s, <span class=\"hljs-number\">259</span>: D.n, <span class=\"hljs-number\">260</span>: D.w, <span class=\"hljs-number\">261</span>: D.e}\\n' +\n  '        <span class=\"hljs-keyword\">if</span> d := key_mappings.get(screen.getch()):\\n' +\n  '            moves.put_nowait((<span class=\"hljs-string\">\\'*\\'</span>, d))\\n' +\n  '        <span class=\"hljs-keyword\">await</span> asyncio.sleep(<span class=\"hljs-number\">0.005</span>)\\n' +\n  '\\n' +\n  '<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">model</span><span class=\"hljs-params\">(moves, state)</span>:</span>\\n' +\n  '    <span class=\"hljs-keyword\">while</span> state[<span class=\"hljs-string\">\\'*\\'</span>] <span class=\"hljs-keyword\">not</span> <span class=\"hljs-keyword\">in</span> (state[id_] <span class=\"hljs-keyword\">for</span> id_ <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">10</span>)):\\n' +\n  '        id_, d = <span class=\"hljs-keyword\">await</span> moves.get()\\n' +\n  '        deltas = {D.n: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">-1</span>), D.e: P(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>), D.s: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>), D.w: P(<span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">0</span>)}\\n' +\n  '        state[id_] = P((state[id_].x + deltas[d].x) % W, (state[id_].y + deltas[d].y) % H)\\n' +\n  '\\n' +\n  '<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">view</span><span class=\"hljs-params\">(state, screen)</span>:</span>\\n' +\n  '    offset = P(curses.COLS//<span class=\"hljs-number\">2</span> - W//<span class=\"hljs-number\">2</span>, curses.LINES//<span class=\"hljs-number\">2</span> - H//<span class=\"hljs-number\">2</span>)\\n' +\n  '    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">True</span>:\\n' +\n  '        screen.erase()\\n' +\n  '        curses.textpad.rectangle(screen, offset.y-<span class=\"hljs-number\">1</span>, offset.x-<span class=\"hljs-number\">1</span>, offset.y+H, offset.x+W)\\n' +\n  '        <span class=\"hljs-keyword\">for</span> id_, p <span class=\"hljs-keyword\">in</span> state.items():\\n' +\n  '            screen.addstr(offset.y + (p.y - state[<span class=\"hljs-string\">\\'*\\'</span>].y + H//<span class=\"hljs-number\">2</span>) % H,\\n' +\n  '                          offset.x + (p.x - state[<span class=\"hljs-string\">\\'*\\'</span>].x + W//<span class=\"hljs-number\">2</span>) % W, str(id_))\\n' +\n  '        screen.refresh()\\n' +\n  '        <span class=\"hljs-keyword\">await</span> asyncio.sleep(<span class=\"hljs-number\">0.005</span>)\\n' +\n  '\\n' +\n  '<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\\'__main__\\'</span>:\\n' +\n  '    curses.wrapper(main)\\n';\n\nconst CURSES =\n  '<span class=\"hljs-comment\"># $ pip3 install windows-curses</span>\\n' +\n  '<span class=\"hljs-keyword\">import</span> curses, os\\n' +\n  '<span class=\"hljs-keyword\">from</span> curses <span class=\"hljs-keyword\">import</span> A_REVERSE, KEY_DOWN, KEY_UP, KEY_LEFT, KEY_RIGHT, KEY_ENTER\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(screen)</span>:</span>\\n' +\n  '    ch, first, selected, paths = <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, os.listdir()\\n' +\n  '    <span class=\"hljs-keyword\">while</span> ch != ord(<span class=\"hljs-string\">\\'q\\'</span>):\\n' +\n  '        height, width = screen.getmaxyx()\\n' +\n  '        screen.erase()\\n' +\n  '        <span class=\"hljs-keyword\">for</span> y, filename <span class=\"hljs-keyword\">in</span> enumerate(paths[first : first+height]):\\n' +\n  '            color = A_REVERSE <span class=\"hljs-keyword\">if</span> filename == paths[selected] <span class=\"hljs-keyword\">else</span> <span class=\"hljs-number\">0</span>\\n' +\n  '            screen.addnstr(y, <span class=\"hljs-number\">0</span>, filename, width-<span class=\"hljs-number\">1</span>, color)\\n' +\n  '        ch = screen.getch()\\n' +\n  '        selected += (ch == KEY_DOWN) - (ch == KEY_UP)\\n' +\n  '        selected = max(<span class=\"hljs-number\">0</span>, min(len(paths)-<span class=\"hljs-number\">1</span>, selected))\\n' +\n  '        first += (selected &gt;= first + height) - (selected &lt; first)\\n' +\n  '        <span class=\"hljs-keyword\">if</span> ch <span class=\"hljs-keyword\">in</span> [KEY_LEFT, KEY_RIGHT, KEY_ENTER, ord(<span class=\"hljs-string\">\\'\\\\n\\'</span>), ord(<span class=\"hljs-string\">\\'\\\\r\\'</span>)]:\\n' +\n  '            new_dir = <span class=\"hljs-string\">\\'..\\'</span> <span class=\"hljs-keyword\">if</span> ch == KEY_LEFT <span class=\"hljs-keyword\">else</span> paths[selected]\\n' +\n  '            <span class=\"hljs-keyword\">if</span> os.path.isdir(new_dir):\\n' +\n  '                os.chdir(new_dir)\\n' +\n  '                first, selected, paths = <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, os.listdir()\\n' +\n  '\\n' +\n  '<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\\'__main__\\'</span>:\\n' +\n  '    curses.wrapper(main)\\n';\n\nconst PROGRESS_BAR =\n  '<span class=\"hljs-comment\"># $ pip3 install tqdm</span>\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">import</span> tqdm, time\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span><span class=\"hljs-keyword\">for</span> el <span class=\"hljs-keyword\">in</span> tqdm.tqdm([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], desc=<span class=\"hljs-string\">\\'Processing\\'</span>):\\n' +\n  '<span class=\"hljs-meta\">... </span>    time.sleep(<span class=\"hljs-number\">1</span>)\\n' +\n  'Processing: 100%|████████████████████| 3/3 [00:03&lt;00:00,  1.00s/it]\\n';\n\nconst LOGGING_EXAMPLE =\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>logger = log.getLogger(<span class=\"hljs-string\">\\'my_module\\'</span>)\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>handler = log.FileHandler(<span class=\"hljs-string\">\\'test.log\\'</span>, encoding=<span class=\"hljs-string\">\\'utf-8\\'</span>)\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>handler.setFormatter(log.Formatter(<span class=\"hljs-string\">\\'%(asctime)s %(levelname)s:%(name)s:%(message)s\\'</span>))\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>logger.addHandler(handler)\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>logger.setLevel(<span class=\"hljs-string\">\\'DEBUG\\'</span>)\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>log.basicConfig()\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>log.root.handlers[<span class=\"hljs-number\">0</span>].setLevel(<span class=\"hljs-string\">\\'WARNING\\'</span>)\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>logger.critical(<span class=\"hljs-string\">\\'Running out of disk space.\\'</span>)\\n' +\n  'CRITICAL:my_module:Running out of disk space.\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>print(open(<span class=\"hljs-string\">\\'test.log\\'</span>).read())\\n' +\n  '2023-02-07 23:21:01,430 CRITICAL:my_module:Running out of disk space.\\n';\n\nconst AUDIO_1 =\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">write_to_wav_file</span><span class=\"hljs-params\">(filename, samples_f, p=<span class=\"hljs-keyword\">None</span>, nchannels=<span class=\"hljs-number\">1</span>, sampwidth=<span class=\"hljs-number\">2</span>, framerate=<span class=\"hljs-number\">44100</span>)</span>:</span>\\n' +\n  '    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_bytes</span><span class=\"hljs-params\">(a_float)</span>:</span>\\n' +\n  '        a_float = max(<span class=\"hljs-number\">-1</span>, min(<span class=\"hljs-number\">1</span> - <span class=\"hljs-number\">2e-16</span>, a_float))\\n' +\n  '        a_float += p.sampwidth == <span class=\"hljs-number\">1</span>\\n' +\n  '        a_float *= pow(<span class=\"hljs-number\">2</span>, (p.sampwidth * <span class=\"hljs-number\">8</span>) - <span class=\"hljs-number\">1</span>)\\n' +\n  '        <span class=\"hljs-keyword\">return</span> int(a_float).to_bytes(p.sampwidth, <span class=\"hljs-string\">\\'little\\'</span>, signed=(p.sampwidth != <span class=\"hljs-number\">1</span>))\\n' +\n  '    <span class=\"hljs-keyword\">if</span> p <span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">None</span>:\\n' +\n  '        p = wave._wave_params(nchannels, sampwidth, framerate, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">\\'NONE\\'</span>, <span class=\"hljs-string\">\\'not compressed\\'</span>)\\n' +\n  '    <span class=\"hljs-keyword\">with</span> wave.open(filename, <span class=\"hljs-string\">\\'wb\\'</span>) <span class=\"hljs-keyword\">as</span> file:\\n' +\n  '        file.setparams(p)\\n' +\n  '        file.writeframes(<span class=\"hljs-string\">b\\'\\'</span>.join(get_bytes(f) <span class=\"hljs-keyword\">for</span> f <span class=\"hljs-keyword\">in</span> samples_f))\\n';\n\nconst AUDIO_2 =\n  '<span class=\"hljs-keyword\">from</span> math <span class=\"hljs-keyword\">import</span> pi, sin\\n' +\n  'samples_f = (sin(i * <span class=\"hljs-number\">2</span> * pi * <span class=\"hljs-number\">440</span> / <span class=\"hljs-number\">44100</span>) <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">100_000</span>))\\n' +\n  'write_to_wav_file(<span class=\"hljs-string\">\\'test.wav\\'</span>, samples_f)\\n';\n\nconst MARIO =\n  '<span class=\"hljs-keyword\">import</span> collections, dataclasses, enum, io, itertools <span class=\"hljs-keyword\">as</span> it, pygame <span class=\"hljs-keyword\">as</span> pg, urllib.request\\n' +\n  '<span class=\"hljs-keyword\">from</span> random <span class=\"hljs-keyword\">import</span> randint\\n' +\n  '\\n' +\n  'P = collections.namedtuple(<span class=\"hljs-string\">\\'P\\'</span>, <span class=\"hljs-string\">\\'x y\\'</span>)          <span class=\"hljs-comment\"># Position</span>\\n' +\n  'D = enum.Enum(<span class=\"hljs-string\">\\'D\\'</span>, <span class=\"hljs-string\">\\'n e s w\\'</span>)                   <span class=\"hljs-comment\"># Direction</span>\\n' +\n  'W, H, MAX_S = <span class=\"hljs-number\">50</span>, <span class=\"hljs-number\">50</span>, P(<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">10</span>)                  <span class=\"hljs-comment\"># Width, Height, Max speed</span>\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span>:</span>\\n' +\n  '    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_screen</span><span class=\"hljs-params\">()</span>:</span>\\n' +\n  '        pg.init()\\n' +\n  '        <span class=\"hljs-keyword\">return</span> pg.display.set_mode((W*<span class=\"hljs-number\">16</span>, H*<span class=\"hljs-number\">16</span>))\\n' +\n  '    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_images</span><span class=\"hljs-params\">()</span>:</span>\\n' +\n  '        url = <span class=\"hljs-string\">\\'https://gto76.github.io/python-cheatsheet/web/mario_bros.png\\'</span>\\n' +\n  '        img = pg.image.load(io.BytesIO(urllib.request.urlopen(url).read()))\\n' +\n  '        <span class=\"hljs-keyword\">return</span> [img.subsurface(get_rect(x, <span class=\"hljs-number\">0</span>)) <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> range(img.get_width() // <span class=\"hljs-number\">16</span>)]\\n' +\n  '    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_mario</span><span class=\"hljs-params\">()</span>:</span>\\n' +\n  '        Mario = dataclasses.make_dataclass(<span class=\"hljs-string\">\\'Mario\\'</span>, <span class=\"hljs-string\">\\'rect spd facing_left frame_cycle\\'</span>.split())\\n' +\n  '        <span class=\"hljs-keyword\">return</span> Mario(get_rect(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>), P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>), <span class=\"hljs-keyword\">False</span>, it.cycle(range(<span class=\"hljs-number\">3</span>)))\\n' +\n  '    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_tiles</span><span class=\"hljs-params\">()</span>:</span>\\n' +\n  '        border = [(x, y) <span class=\"hljs-keyword\">for</span> x <span class=\"hljs-keyword\">in</span> range(W) <span class=\"hljs-keyword\">for</span> y <span class=\"hljs-keyword\">in</span> range(H) <span class=\"hljs-keyword\">if</span> x <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-number\">0</span>, W-<span class=\"hljs-number\">1</span>] <span class=\"hljs-keyword\">or</span> y <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-number\">0</span>, H-<span class=\"hljs-number\">1</span>]]\\n' +\n  '        platforms = [(randint(<span class=\"hljs-number\">1</span>, W-<span class=\"hljs-number\">2</span>), randint(<span class=\"hljs-number\">2</span>, H-<span class=\"hljs-number\">2</span>)) <span class=\"hljs-keyword\">for</span> _ <span class=\"hljs-keyword\">in</span> range(W*H // <span class=\"hljs-number\">10</span>)]\\n' +\n  '        <span class=\"hljs-keyword\">return</span> [get_rect(x, y) <span class=\"hljs-keyword\">for</span> x, y <span class=\"hljs-keyword\">in</span> border + platforms]\\n' +\n  '    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_rect</span><span class=\"hljs-params\">(x, y)</span>:</span>\\n' +\n  '        <span class=\"hljs-keyword\">return</span> pg.Rect(x*<span class=\"hljs-number\">16</span>, y*<span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">16</span>)\\n' +\n  '    run(get_screen(), get_images(), get_mario(), get_tiles())\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">run</span><span class=\"hljs-params\">(screen, images, mario, tiles)</span>:</span>\\n' +\n  '    clock = pg.time.Clock()\\n' +\n  '    pressed = set()\\n' +\n  '    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">not</span> pg.event.get(pg.QUIT) <span class=\"hljs-keyword\">and</span> clock.tick(<span class=\"hljs-number\">28</span>):\\n' +\n  '        keys = {pg.K_UP: D.n, pg.K_RIGHT: D.e, pg.K_DOWN: D.s, pg.K_LEFT: D.w}\\n' +\n  '        pressed |= {keys.get(e.key) <span class=\"hljs-keyword\">for</span> e <span class=\"hljs-keyword\">in</span> pg.event.get(pg.KEYDOWN)}\\n' +\n  '        pressed -= {keys.get(e.key) <span class=\"hljs-keyword\">for</span> e <span class=\"hljs-keyword\">in</span> pg.event.get(pg.KEYUP)}\\n' +\n  '        update_speed(mario, tiles, pressed)\\n' +\n  '        update_position(mario, tiles)\\n' +\n  '        draw(screen, images, mario, tiles)\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">update_speed</span><span class=\"hljs-params\">(mario, tiles, pressed)</span>:</span>\\n' +\n  '    x, y = mario.spd\\n' +\n  '    x += <span class=\"hljs-number\">2</span> * ((D.e <span class=\"hljs-keyword\">in</span> pressed) - (D.w <span class=\"hljs-keyword\">in</span> pressed))\\n' +\n  '    x += (x &lt; <span class=\"hljs-number\">0</span>) - (x &gt; <span class=\"hljs-number\">0</span>)\\n' +\n  '    y += <span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">if</span> D.s <span class=\"hljs-keyword\">not</span> <span class=\"hljs-keyword\">in</span> get_boundaries(mario.rect, tiles) <span class=\"hljs-keyword\">else</span> (D.n <span class=\"hljs-keyword\">in</span> pressed) * <span class=\"hljs-number\">-10</span>\\n' +\n  '    mario.spd = P(x=max(-MAX_S.x, min(MAX_S.x, x)), y=max(-MAX_S.y, min(MAX_S.y, y)))\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">update_position</span><span class=\"hljs-params\">(mario, tiles)</span>:</span>\\n' +\n  '    x, y = mario.rect.topleft\\n' +\n  '    n_steps = max(abs(s) <span class=\"hljs-keyword\">for</span> s <span class=\"hljs-keyword\">in</span> mario.spd)\\n' +\n  '    <span class=\"hljs-keyword\">for</span> _ <span class=\"hljs-keyword\">in</span> range(n_steps):\\n' +\n  '        mario.spd = stop_on_collision(mario.spd, get_boundaries(mario.rect, tiles))\\n' +\n  '        x, y = x + (mario.spd.x / n_steps), y + (mario.spd.y / n_steps)\\n' +\n  '        mario.rect.topleft = x, y\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_boundaries</span><span class=\"hljs-params\">(rect, tiles)</span>:</span>\\n' +\n  '    deltas = {D.n: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">-1</span>), D.e: P(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>), D.s: P(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>), D.w: P(<span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">0</span>)}\\n' +\n  '    <span class=\"hljs-keyword\">return</span> {d <span class=\"hljs-keyword\">for</span> d, delta <span class=\"hljs-keyword\">in</span> deltas.items() <span class=\"hljs-keyword\">if</span> rect.move(delta).collidelist(tiles) != <span class=\"hljs-number\">-1</span>}\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">stop_on_collision</span><span class=\"hljs-params\">(spd, bounds)</span>:</span>\\n' +\n  '    <span class=\"hljs-keyword\">return</span> P(x=<span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">if</span> (D.w <span class=\"hljs-keyword\">in</span> bounds <span class=\"hljs-keyword\">and</span> spd.x &lt; <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">or</span> (D.e <span class=\"hljs-keyword\">in</span> bounds <span class=\"hljs-keyword\">and</span> spd.x &gt; <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">else</span> spd.x,\\n' +\n  '             y=<span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">if</span> (D.n <span class=\"hljs-keyword\">in</span> bounds <span class=\"hljs-keyword\">and</span> spd.y &lt; <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">or</span> (D.s <span class=\"hljs-keyword\">in</span> bounds <span class=\"hljs-keyword\">and</span> spd.y &gt; <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">else</span> spd.y)\\n' +\n  '\\n' +\n  '<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">draw</span><span class=\"hljs-params\">(screen, images, mario, tiles)</span>:</span>\\n' +\n  '    screen.fill((<span class=\"hljs-number\">85</span>, <span class=\"hljs-number\">168</span>, <span class=\"hljs-number\">255</span>))\\n' +\n  '    mario.facing_left = mario.spd.x &lt; <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">if</span> mario.spd.x <span class=\"hljs-keyword\">else</span> mario.facing_left\\n' +\n  '    is_airborne = D.s <span class=\"hljs-keyword\">not</span> <span class=\"hljs-keyword\">in</span> get_boundaries(mario.rect, tiles)\\n' +\n  '    image_index = <span class=\"hljs-number\">4</span> <span class=\"hljs-keyword\">if</span> is_airborne <span class=\"hljs-keyword\">else</span> (next(mario.frame_cycle) <span class=\"hljs-keyword\">if</span> mario.spd.x <span class=\"hljs-keyword\">else</span> <span class=\"hljs-number\">6</span>)\\n' +\n  '    screen.blit(images[image_index + (mario.facing_left * <span class=\"hljs-number\">9</span>)], mario.rect)\\n' +\n  '    <span class=\"hljs-keyword\">for</span> t <span class=\"hljs-keyword\">in</span> tiles:\\n' +\n  '        is_border = t.x <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-number\">0</span>, (W-<span class=\"hljs-number\">1</span>)*<span class=\"hljs-number\">16</span>] <span class=\"hljs-keyword\">or</span> t.y <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-number\">0</span>, (H-<span class=\"hljs-number\">1</span>)*<span class=\"hljs-number\">16</span>]\\n' +\n  '        screen.blit(images[<span class=\"hljs-number\">18</span> <span class=\"hljs-keyword\">if</span> is_border <span class=\"hljs-keyword\">else</span> <span class=\"hljs-number\">19</span>], t)\\n' +\n  '    pg.display.flip()\\n' +\n  '\\n' +\n  '<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\\'__main__\\'</span>:\\n' +\n  '    main()\\n';\n\nconst GROUPBY =\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>df = pd.DataFrame([[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], [<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>], [<span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">6</span>]], list(<span class=\"hljs-string\">\\'abc\\'</span>), list(<span class=\"hljs-string\">\\'xyz\\'</span>))\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>gb = df.groupby(<span class=\"hljs-string\">\\'z\\'</span>); gb.apply(print)\\n' +\n  '   x  y  z\\n' +\n  'a  <span class=\"hljs-number\">1</span>  <span class=\"hljs-number\">2</span>  <span class=\"hljs-number\">3</span>\\n' +\n  '   x  y  z\\n' +\n  'b  <span class=\"hljs-number\">4</span>  <span class=\"hljs-number\">5</span>  <span class=\"hljs-number\">6</span>\\n' +\n  'c  <span class=\"hljs-number\">7</span>  <span class=\"hljs-number\">8</span>  <span class=\"hljs-number\">6</span>\\n' +\n  '<span class=\"hljs-meta\">&gt;&gt;&gt; </span>gb.sum()\\n' +\n  '    x   y\\n' +\n  'z\\n' +\n  '<span class=\"hljs-number\">3</span>   <span class=\"hljs-number\">1</span>   <span class=\"hljs-number\">2</span>\\n' +\n  '<span class=\"hljs-number\">6</span>  <span class=\"hljs-number\">11</span>  <span class=\"hljs-number\">13</span>';\n\n\nconst CYTHON_1 =\n  '<span class=\"hljs-keyword\">cdef</span> &lt;ctype/type&gt; &lt;var_name&gt; [= &lt;obj&gt;]\\n' +\n  '<span class=\"hljs-keyword\">cdef</span> &lt;ctype&gt;[n_elements] &lt;var_name&gt; [= &lt;coll_of_nums&gt;]\\n' +\n  '<span class=\"hljs-keyword\">cdef</span> &lt;ctype/type/void&gt; &lt;func_name&gt;(&lt;ctype/type&gt; &lt;arg_name&gt;): ...\\n';\n\nconst CYTHON_2 =\n  '<span class=\"hljs-keyword\">cdef</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> &lt;<span class=\"hljs-title\">class_name</span>&gt;:</span>\\n' +\n  '    <span class=\"hljs-keyword\">cdef</span> <span class=\"hljs-keyword\">public</span> &lt;ctype/type&gt; &lt;attr_name&gt;\\n' +\n  '    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, &lt;ctype/type&gt; &lt;arg_name&gt;)</span>:</span>\\n' +\n  '        self.&lt;attr_name&gt; = &lt;arg_name&gt;\\n';\n\nconst INDEX =\n  '<li><strong>Ctrl+F / ⌘F is usually sufficient.</strong></li>\\n' +\n  '<li><strong>Searching <code class=\"python hljs\"><span class=\"hljs-string\">\\'#&lt;title&gt;\\'</span></code> will limit the search to the titles.</strong></li>\\n' +\n  '<li><strong>Click on the title\\'s <code class=\"python hljs\"><span class=\"hljs-string\">\\'#\\'</span></code> to get a link to its section.</strong></li>\\n';\n\n\nconst DIAGRAM_1_A =\n  '+------------------+------------+------------+------------+\\n' +\n  '|                  |  Iterable  | Collection |  Sequence  |\\n' +\n  '+------------------+------------+------------+------------+\\n';\n\nconst DIAGRAM_1_B =\n  '┏━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┓\\n' +\n  '┃                  │  Iterable  │ Collection │  Sequence  ┃\\n' +\n  '┠──────────────────┼────────────┼────────────┼────────────┨\\n' +\n  '┃ list, range, str │     ✓      │     ✓      │     ✓      ┃\\n' +\n  '┃ dict, set        │     ✓      │     ✓      │            ┃\\n' +\n  '┃ iter             │     ✓      │            │            ┃\\n' +\n  '┗━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┛\\n';\n\nconst DIAGRAM_2_A =\n  '+--------------------+----------+----------+----------+----------+----------+\\n' +\n  '|                    |  Number  |  Complex |   Real   | Rational | Integral |\\n' +\n  '+--------------------+----------+----------+----------+----------+----------+\\n';\n\nconst DIAGRAM_2_B =\n  '┏━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┓\\n' +\n  '┃                    │  Number  │  Complex │   Real   │ Rational │ Integral ┃\\n' +\n  '┠────────────────────┼──────────┼──────────┼──────────┼──────────┼──────────┨\\n' +\n  '┃ int                │    ✓     │    ✓     │    ✓     │    ✓     │    ✓     ┃\\n' +\n  '┃ fractions.Fraction │    ✓     │    ✓     │    ✓     │    ✓     │          ┃\\n' +\n  '┃ float              │    ✓     │    ✓     │    ✓     │          │          ┃\\n' +\n  '┃ complex            │    ✓     │    ✓     │          │          │          ┃\\n' +\n  '┃ decimal.Decimal    │    ✓     │          │          │          │          ┃\\n' +\n  '┗━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┛\\n';\n\nconst DIAGRAM_3_A =\n  '+---------------+----------+----------+----------+----------+----------+\\n';\n\nconst DIAGRAM_3_B =\n  '┏━━━━━━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┓\\n' +\n  '┃               │ [ !#$%…] │ [a-zA-Z] │  [¼½¾]   │  [²³¹]   │  [0-9]   ┃\\n' +\n  '┠───────────────┼──────────┼──────────┼──────────┼──────────┼──────────┨\\n' +\n  '┃ isprintable() │    ✓     │    ✓     │    ✓     │    ✓     │    ✓     ┃\\n' +\n  '┃ isalnum()     │          │    ✓     │    ✓     │    ✓     │    ✓     ┃\\n' +\n  '┃ isnumeric()   │          │          │    ✓     │    ✓     │    ✓     ┃\\n' +\n  '┃ isdigit()     │          │          │          │    ✓     │    ✓     ┃\\n' +\n  '┃ isdecimal()   │          │          │          │          │    ✓     ┃\\n' +\n  '┗━━━━━━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┛\\n';\n\nconst DIAGRAM_4_A =\n  \"+--------------+----------------+----------------+----------------+----------------+\\n\" +\n  \"|              |    {<float>}   |   {<float>:f}  |   {<float>:e}  |   {<float>:%}  |\\n\" +\n  \"+--------------+----------------+----------------+----------------+----------------+\\n\";\n\nconst DIAGRAM_4_B =\n  \"┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┓\\n\" +\n  \"┃              │    {&lt;float&gt;}   │   {&lt;float&gt;:f}  │   {&lt;float&gt;:e}  │   {&lt;float&gt;:%}  ┃\\n\" +\n  \"┠──────────────┼────────────────┼────────────────┼────────────────┼────────────────┨\\n\" +\n  \"┃  0.000056789 │   '5.6789e-05' │    '0.000057'  │ '5.678900e-05' │    '0.005679%' ┃\\n\" +\n  \"┃  0.00056789  │   '0.00056789' │    '0.000568'  │ '5.678900e-04' │    '0.056789%' ┃\\n\" +\n  \"┃  0.0056789   │   '0.0056789'  │    '0.005679'  │ '5.678900e-03' │    '0.567890%' ┃\\n\" +\n  \"┃  0.056789    │   '0.056789'   │    '0.056789'  │ '5.678900e-02' │    '5.678900%' ┃\\n\" +\n  \"┃  0.56789     │   '0.56789'    │    '0.567890'  │ '5.678900e-01' │   '56.789000%' ┃\\n\" +\n  \"┃  5.6789      │   '5.6789'     │    '5.678900'  │ '5.678900e+00' │  '567.890000%' ┃\\n\" +\n  \"┃ 56.789       │  '56.789'      │   '56.789000'  │ '5.678900e+01' │ '5678.900000%' ┃\\n\" +\n  \"┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┛\\n\" +\n  \"\\n\" +\n  \"┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━┓\\n\" +\n  \"┃              │  {&lt;float&gt;:.2}  │  {&lt;float&gt;:.2f} │  {&lt;float&gt;:.2e} │  {&lt;float&gt;:.2%} ┃\\n\" +\n  \"┠──────────────┼────────────────┼────────────────┼────────────────┼────────────────┨\\n\" +\n  \"┃  0.000056789 │    '5.7e-05'   │      '0.00'    │   '5.68e-05'   │      '0.01%'   ┃\\n\" +\n  \"┃  0.00056789  │    '0.00057'   │      '0.00'    │   '5.68e-04'   │      '0.06%'   ┃\\n\" +\n  \"┃  0.0056789   │    '0.0057'    │      '0.01'    │   '5.68e-03'   │      '0.57%'   ┃\\n\" +\n  \"┃  0.056789    │    '0.057'     │      '0.06'    │   '5.68e-02'   │      '5.68%'   ┃\\n\" +\n  \"┃  0.56789     │    '0.57'      │      '0.57'    │   '5.68e-01'   │     '56.79%'   ┃\\n\" +\n  \"┃  5.6789      │    '5.7'       │      '5.68'    │   '5.68e+00'   │    '567.89%'   ┃\\n\" +\n  \"┃ 56.789       │    '5.7e+01'   │     '56.79'    │   '5.68e+01'   │   '5678.90%'   ┃\\n\" +\n  \"┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━┛\\n\";\n\nconst DIAGRAM_5_A =\n  \"+--------------+----------------+----------------+----------------+----------------+\\n\" +\n  \"|              |  {<float>:.2}  |  {<float>:.2f} |  {<float>:.2e} |  {<float>:.2%} |\\n\" +\n  \"+--------------+----------------+----------------+----------------+----------------+\\n\";\n\nconst DIAGRAM_6_A =\n  '+------------+------------+------------+------------+--------------+\\n' +\n  '|            |  Iterable  | Collection |  Sequence  | abc.Sequence |\\n' +\n  '+------------+------------+------------+------------+--------------+\\n';\n\nconst DIAGRAM_6_B =\n  '┏━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━━━┓\\n' +\n  '┃            │  Iterable  │ Collection │  Sequence  │ abc.Sequence ┃\\n' +\n  '┠────────────┼────────────┼────────────┼────────────┼──────────────┨\\n' +\n  '┃ iter()     │     !      │     !      │     ✓      │      ✓       ┃\\n' +\n  '┃ contains() │     ✓      │     ✓      │     ✓      │      ✓       ┃\\n' +\n  '┃ len()      │            │     !      │     !      │      !       ┃\\n' +\n  '┃ getitem()  │            │            │     !      │      !       ┃\\n' +\n  '┃ reversed() │            │            │     ✓      │      ✓       ┃\\n' +\n  '┃ index()    │            │            │            │      ✓       ┃\\n' +\n  '┃ count()    │            │            │            │      ✓       ┃\\n' +\n  '┗━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━━━┛\\n';\n\nconst DIAGRAM_7_A =\n  'BaseException\\n' +\n  ' +-- SystemExit';\n\nconst DIAGRAM_7_B =\n  \"BaseException\\n\" +\n  \" ├── SystemExit                   <span class='hljs-comment'># Raised by the sys.exit() function.</span>\\n\" +\n  \" ├── KeyboardInterrupt            <span class='hljs-comment'># Raised when the user hits the interrupt key (ctrl-c).</span>\\n\" +\n  \" └── Exception                    <span class='hljs-comment'># User-defined exceptions should be derived from this class.</span>\\n\" +\n  \"      ├── ArithmeticError         <span class='hljs-comment'># Base class for arithmetic errors such as ZeroDivisionError.</span>\\n\" +\n  \"      ├── AssertionError          <span class='hljs-comment'># Raised by `assert &lt;exp&gt;` if expression returns false value.</span>\\n\" +\n  \"      ├── AttributeError          <span class='hljs-comment'># Raised when object doesn't have requested attribute/method.</span>\\n\" +\n  \"      ├── EOFError                <span class='hljs-comment'># Raised by input() when it hits an end-of-file condition.</span>\\n\" +\n  \"      ├── LookupError             <span class='hljs-comment'># Base class for errors when a collection can't find an item.</span>\\n\" +\n  \"      │    ├── IndexError         <span class='hljs-comment'># Raised when a sequence index is out of range.</span>\\n\" +\n  \"      │    └── KeyError           <span class='hljs-comment'># Raised when a dictionary key or set element is missing.</span>\\n\" +\n  \"      ├── MemoryError             <span class='hljs-comment'># Out of memory. May be too late to start deleting variables.</span>\\n\" +\n  \"      ├── NameError               <span class='hljs-comment'># Raised when nonexistent name (variable/func/class) is used.</span>\\n\" +\n  \"      │    └── UnboundLocalError  <span class='hljs-comment'># Raised when local name is used before it's being defined.</span>\\n\" +\n  \"      ├── OSError                 <span class='hljs-comment'># Errors such as FileExistsError/TimeoutError (see #Open).</span>\\n\" +\n  \"      │    └── ConnectionError    <span class='hljs-comment'># Errors such as BrokenPipeError/ConnectionAbortedError.</span>\\n\" +\n  \"      ├── RuntimeError            <span class='hljs-comment'># Raised by errors that don't fall into other categories.</span>\\n\" +\n  \"      │    ├── NotImplementedEr…  <span class='hljs-comment'># Can be raised by abstract methods or by unfinished code.</span>\\n\" +\n  \"      │    └── RecursionError     <span class='hljs-comment'># Raised when the maximum recursion depth is exceeded.</span>\\n\" +\n  \"      ├── StopIteration           <span class='hljs-comment'># Raised when an empty iterator is passed to next().</span>\\n\" +\n  \"      ├── TypeError               <span class='hljs-comment'># When an argument of the wrong type is passed to function.</span>\\n\" +\n  \"      └── ValueError              <span class='hljs-comment'># When argument has the right type but inappropriate value.</span>\\n\";\n\nconst DIAGRAM_8_A =\n  '+-----------+------------+------------+------------+\\n' +\n  '|           |    List    |    Set     |    Dict    |\\n' +\n  '+-----------+------------+------------+------------+\\n';\n\nconst DIAGRAM_8_B =\n  '┏━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┓\\n' +\n  '┃           │    List    │    Set     │    Dict    ┃\\n' +\n  '┠───────────┼────────────┼────────────┼────────────┨\\n' +\n  '┃ getitem() │ IndexError │            │  KeyError  ┃\\n' +\n  '┃ pop()     │ IndexError │  KeyError  │  KeyError  ┃\\n' +\n  '┃ remove()  │ ValueError │  KeyError  │            ┃\\n' +\n  '┃ index()   │ ValueError │            │            ┃\\n' +\n  '┗━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┛\\n';\n\nconst DIAGRAM_9_A =\n  '+------------------+--------------+--------------+--------------+\\n' +\n  '|                  |     excel    |   excel-tab  |     unix     |\\n' +\n  '+------------------+--------------+--------------+--------------+\\n';\n\nconst DIAGRAM_9_B =\n  \"┏━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┓\\n\" +\n  \"┃                  │     excel    │   excel-tab  │     unix     ┃\\n\" +\n  \"┠──────────────────┼──────────────┼──────────────┼──────────────┨\\n\" +\n  \"┃ delimiter        │       ','    │      '\\\\t'    │       ','    ┃\\n\" +\n  \"┃ lineterminator   │    '\\\\r\\\\n'    │    '\\\\r\\\\n'    │      '\\\\n'    ┃\\n\" +\n  \"┃ quotechar        │       '\\\"'    │       '\\\"'    │       '\\\"'    ┃\\n\" +\n  \"┃ escapechar       │      None    │      None    │      None    ┃\\n\" +\n  \"┃ doublequote      │      True    │      True    │      True    ┃\\n\" +\n  \"┃ quoting          │         0    │         0    │         1    ┃\\n\" +\n  \"┃ skipinitialspace │     False    │     False    │     False    ┃\\n\" +\n  \"┗━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┛\\n\";\n\nconst DIAGRAM_95_A =\n  '+-----------------+--------------+----------------------------------+\\n' +\n  '| Dialect         | pip3 install |           Dependencies           |\\n' +\n  '+-----------------+--------------+----------------------------------+\\n';\n\nconst DIAGRAM_95_B =\n  '┏━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\\n' +\n  '┃ Dialect         │ pip3 install │           Dependencies           ┃\\n' +\n  '┠─────────────────┼──────────────┼──────────────────────────────────┨\\n' +\n  '┃ mysql           │ mysqlclient  │ www.pypi.org/project/mysqlclient ┃\\n' +\n  '┃ postgresql      │ psycopg2     │ www.pypi.org/project/psycopg2    ┃\\n' +\n  '┃ mssql           │ pyodbc       │ www.pypi.org/project/pyodbc      ┃\\n' +\n  '┃ oracle+oracledb │ oracledb     │ www.pypi.org/project/oracledb    ┃\\n' +\n  '┗━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛\\n';\n\nconst DIAGRAM_10_A =\n  '+-------------+-------------+\\n' +\n  '|   Classes   | Metaclasses |\\n' +\n  '+-------------+-------------|\\n' +\n  '|   MyClass <-- MyMetaClass |\\n';\n\nconst DIAGRAM_10_B =\n  '┏━━━━━━━━━━━━━┯━━━━━━━━━━━━━┓\\n' +\n  '┃   Classes   │ Metaclasses ┃\\n' +\n  '┠─────────────┼─────────────┨\\n' +\n  '┃   MyClass ←──╴MyMetaClass ┃\\n' +\n  '┃             │     ↑       ┃\\n' +\n  '┃    object ←─────╴type ←╮  ┃\\n' +\n  '┃             │     │ ╰──╯  ┃\\n' +\n  '┃     str ←─────────╯       ┃\\n' +\n  '┗━━━━━━━━━━━━━┷━━━━━━━━━━━━━┛\\n';\n\nconst DIAGRAM_11_A =\n  '+-------------+-------------+\\n' +\n  '|   Classes   | Metaclasses |\\n' +\n  '+-------------+-------------|\\n' +\n  '|   MyClass   | MyMetaClass |\\n';\n\nconst DIAGRAM_11_B =\n  '┏━━━━━━━━━━━━━┯━━━━━━━━━━━━━┓\\n' +\n  '┃   Classes   │ Metaclasses ┃\\n' +\n  '┠─────────────┼─────────────┨\\n' +\n  '┃   MyClass   │ MyMetaClass ┃\\n' +\n  '┃      ↑      │     ↑       ┃\\n' +\n  '┃    object╶─────→ type     ┃\\n' +\n  '┃      ↓      │             ┃\\n' +\n  '┃     str     │             ┃\\n' +\n  '┗━━━━━━━━━━━━━┷━━━━━━━━━━━━━┛\\n';\n\nconst DIAGRAM_115_A =\n  '+--------------+------------+-------------------------------+-------+------+\\n' +\n  '| pip3 install |   Target   |          How to run           | Lines | Live |\\n' +\n  '+--------------+------------+-------------------------------+-------+------+\\n';\n\nconst DIAGRAM_115_B =\n  '┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━┯━━━━━━┓\\n' +\n  '┃ pip3 install │   Target   │          How to run           │ Lines │ Live ┃\\n' +\n  '┠──────────────┼────────────┼───────────────────────────────┼───────┼──────┨\\n' +\n  '┃ pyinstrument │    CPU     │ pyinstrument test.py          │   ×   │  ×   ┃\\n' +\n  '┃ py-spy       │    CPU     │ py-spy top -- python3 test.py │   ×   │  ✓   ┃\\n' +\n  '┃ scalene      │ CPU+Memory │ scalene test.py               │   ✓   │  ×   ┃\\n' +\n  '┃ memray       │   Memory   │ memray run --live test.py     │   ✓   │  ✓   ┃\\n' +\n  '┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┷━━━━━━━┷━━━━━━┛\\n';\n\nconst DIAGRAM_12_A =\n  '+-----------+-----------+------+-----------+\\n' +\n  '| sampwidth |    min    | zero |    max    |\\n' +\n  '+-----------+-----------+------+-----------+\\n';\n\nconst DIAGRAM_12_B =\n  '┏━━━━━━━━━━━┯━━━━━━━━━━━┯━━━━━━┯━━━━━━━━━━━┓\\n' +\n  '┃ sampwidth │    min    │ zero │    max    ┃\\n' +\n  '┠───────────┼───────────┼──────┼───────────┨\\n' +\n  '┃     1     │         0 │  128 │       255 ┃\\n' +\n  '┃     2     │    -32768 │    0 │     32767 ┃\\n' +\n  '┃     3     │  -8388608 │    0 │   8388607 ┃\\n' +\n  '┗━━━━━━━━━━━┷━━━━━━━━━━━┷━━━━━━┷━━━━━━━━━━━┛\\n';\n\nconst DIAGRAM_13_A =\n  '| s.apply(…)   |      3      |    sum  3   |     s  3      |';\n\nconst DIAGRAM_13_B =\n  \"┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓\\n\" +\n  \"┃              │    'sum'    │   ['sum']   │ {'s': 'sum'}  ┃\\n\" +\n  \"┠──────────────┼─────────────┼─────────────┼───────────────┨\\n\" +\n  \"┃ s.apply(…)   │      3      │    sum  3   │     s  3      ┃\\n\" +\n  \"┃ s.agg(…)     │             │             │               ┃\\n\" +\n  \"┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛\\n\" +\n  \"\\n\" +\n  \"┏━━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓\\n\" +\n  \"┃              │    'rank'   │   ['rank']  │ {'r': 'rank'} ┃\\n\" +\n  \"┠──────────────┼─────────────┼─────────────┼───────────────┨\\n\" +\n  \"┃ s.apply(…)   │             │      rank   │               ┃\\n\" +\n  \"┃ s.agg(…)     │    x  1.0   │   x   1.0   │   r  x  1.0   ┃\\n\" +\n  \"┃              │    y  2.0   │   y   2.0   │      y  2.0   ┃\\n\" +\n  \"┗━━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛\\n\";\n\nconst DIAGRAM_14_A =\n  \"|              |    'rank'   |   ['rank']  | {'r': 'rank'} |\";\n\nconst DIAGRAM_15_A =\n  '+-----------------------+---------------+------------+------------+---------------------------+';\n\nconst DIAGRAM_15_B =\n  \"┏━━━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\\n\" +\n  \"┃                       │    'outer'    │   'inner'  │   'left'   │       Description         ┃\\n\" +\n  \"┠───────────────────────┼───────────────┼────────────┼────────────┼───────────────────────────┨\\n\" +\n  \"┃ df.merge(df_2,        │    x   y   z  │ x   y   z  │ x   y   z  │ Merges on column if 'on'  ┃\\n\" +\n  \"┃          on='y',      │ 0  1   2   .  │ 3   4   5  │ 1   2   .  │ or 'left_on/right_on' are ┃\\n\" +\n  \"┃          how=…)       │ 1  3   4   5  │            │ 3   4   5  │ set, else on shared cols. ┃\\n\" +\n  \"┃                       │ 2  .   6   7  │            │            │ Uses 'inner' by default.  ┃\\n\" +\n  \"┠───────────────────────┼───────────────┼────────────┼────────────┼───────────────────────────┨\\n\" +\n  \"┃ df.join(df_2,         │    x yl yr  z │            │ x yl yr  z │ Merges on row keys.       ┃\\n\" +\n  \"┃         lsuffix='l',  │ a  1  2  .  . │ x yl yr  z │ 1  2  .  . │ Uses 'left' by default.   ┃\\n\" +\n  \"┃         rsuffix='r',  │ b  3  4  4  5 │ 3  4  4  5 │ 3  4  4  5 │ If Series is passed, it   ┃\\n\" +\n  \"┃         how=…)        │ c  .  .  6  7 │            │            │ is treated as a column.   ┃\\n\" +\n  \"┠───────────────────────┼───────────────┼────────────┼────────────┼───────────────────────────┨\\n\" +\n  \"┃ pd.concat([df, df_2], │    x   y   z  │     y      │            │ Adds rows at the bottom.  ┃\\n\" +\n  \"┃           axis=0,     │ a  1   2   .  │     2      │            │ Uses 'outer' by default.  ┃\\n\" +\n  \"┃           join=…)     │ b  3   4   .  │     4      │            │ A Series is treated as a  ┃\\n\" +\n  \"┃                       │ b  .   4   5  │     4      │            │ column. To add a row use  ┃\\n\" +\n  \"┃                       │ c  .   6   7  │     6      │            │ pd.concat([df, DF([s])]). ┃\\n\" +\n  \"┠───────────────────────┼───────────────┼────────────┼────────────┼───────────────────────────┨\\n\" +\n  \"┃ pd.concat([df, df_2], │    x  y  y  z │            │            │ Adds columns at the       ┃\\n\" +\n  \"┃           axis=1,     │ a  1  2  .  . │ x  y  y  z │            │ right end. Uses 'outer'   ┃\\n\" +\n  \"┃           join=…)     │ b  3  4  4  5 │ 3  4  4  5 │            │ by default. A Series is   ┃\\n\" +\n  \"┃                       │ c  .  .  6  7 │            │            │ treated as a column.      ┃\\n\" +\n  \"┗━━━━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━┛\\n\";\n\n\nconst DIAGRAM_16_A =\n  '| df.apply(…)     |      x  4     |        x  y   |     x  4      |';\n\nconst DIAGRAM_16_B =\n  \"┏━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓\\n\" +\n  \"┃                 │     'sum'     │    ['sum']    │ {'x': 'sum'}  ┃\\n\" +\n  \"┠─────────────────┼───────────────┼───────────────┼───────────────┨\\n\" +\n  \"┃ df.apply(…)     │      x  4     │        x  y   │     x  4      ┃\\n\" +\n  \"┃ df.agg(…)       │      y  6     │   sum  4  6   │               ┃\\n\" +\n  \"┗━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛\\n\" +\n  \"\\n\" +\n  \"┏━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓\\n\" +\n  \"┃                 │     'rank'    │    ['rank']   │ {'x': 'rank'} ┃\\n\" +\n  \"┠─────────────────┼───────────────┼───────────────┼───────────────┨\\n\" +\n  \"┃ df.apply(…)     │               │       x    y  │               ┃\\n\" +\n  \"┃ df.agg(…)       │       x    y  │    rank rank  │         x     ┃\\n\" +\n  \"┃ df.transform(…) │  a  1.0  1.0  │  a  1.0  1.0  │    a  1.0     ┃\\n\" +\n  \"┃                 │  b  2.0  2.0  │  b  2.0  2.0  │    b  2.0     ┃\\n\" +\n  \"┗━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛\\n\";\n\nconst DIAGRAM_17_A =\n  \"|                 |     'rank'    |    ['rank']   | {'x': 'rank'} |\";\n\nconst DIAGRAM_18_A =\n  '| gb.agg(…)       |      x   y  |             |      x    y |               |';\n\nconst DIAGRAM_18_B =\n  \"┏━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓\\n\" +\n  \"┃                 │    'sum'    │    'rank'   │   ['rank']  │ {'x': 'rank'} ┃\\n\" +\n  \"┠─────────────────┼─────────────┼─────────────┼─────────────┼───────────────┨\\n\" +\n  \"┃ gb.agg(…)       │      x   y  │             │      x    y │               ┃\\n\" +\n  \"┃                 │  z          │      x  y   │   rank rank │        x      ┃\\n\" +\n  \"┃                 │  3   1   2  │   a  1  1   │ a    1    1 │     a  1      ┃\\n\" +\n  \"┃                 │  6  11  13  │   b  1  1   │ b    1    1 │     b  1      ┃\\n\" +\n  \"┃                 │             │   c  2  2   │ c    2    2 │     c  2      ┃\\n\" +\n  \"┠─────────────────┼─────────────┼─────────────┼─────────────┼───────────────┨\\n\" +\n  \"┃ gb.transform(…) │      x   y  │      x  y   │             │               ┃\\n\" +\n  \"┃                 │  a   1   2  │   a  1  1   │             │               ┃\\n\" +\n  \"┃                 │  b  11  13  │   b  1  1   │             │               ┃\\n\" +\n  \"┃                 │  c  11  13  │   c  2  2   │             │               ┃\\n\" +\n  \"┗━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛\\n\";\n\nconst MENU = '<a href=\"https://raw.githubusercontent.com/gto76/python-cheatsheet/main/README.md\">Download text file</a>, <a href=\"https://github.com/gto76/python-cheatsheet\">Fork me on GitHub</a>, <a href=\"https://github.com/gto76/python-cheatsheet/wiki/Frequently-Asked-Questions\">Check out FAQ</a> or <a href=\"index.html?theme=dark3\">Switch to dark theme</a>.\\n';\n\nconst DARK_THEME_SCRIPT =\n  '<script>\\n' +\n  '  // Changes the image and link to theme if URL ends with \"index.html?theme=dark\". \\n' +\n  '  if (window.location.search.search(/[?&]theme=dark/) !== -1) {\\n' +\n  '\\n' +\n  '    var link_to_theme = document.createElement(\"a\")\\n' +\n  '    link_to_theme.href = \"index.html\"\\n' +\n  '    link_to_theme.text = \"Switch to light theme\"\\n' +\n  '    document.getElementsByClassName(\"banner\")[0].firstChild.children[4].replaceWith(link_to_theme)\\n' +\n  '\\n' +\n  '    var img_dark = document.createElement(\"img\");\\n' +\n  '    img_dark.src = \"web/image_orig_blue6.png\";\\n' +\n  '    img_dark.alt = \"Monthy Python\";\\n' +\n  '    if ((window.location.search.search(/[?&]theme=dark2/) !== -1) ||\\n' +\n  '        (window.location.search.search(/[?&]theme=dark3/) !== -1)) {\\n' +\n  '      img_dark.style = \"width: 910px;\";\\n' +\n  '    } else {\\n' +\n  '      img_dark.style = \"width: 960px;\";\\n' +\n  '    }\\n' +\n  '    document.getElementsByClassName(\"banner\")[1].firstChild.replaceWith(img_dark);\\n' +\n  '  }\\n' +\n  '</script>';\n\n\nfunction main() {\n  const html = getMd();\n  initDom(html);\n  modifyPage();\n  var template = readFile('web/template.html');\n  template = updateDate(template);\n  const tokens = template.split('<div id=main_container></div>');\n  const text = `${tokens[0]} ${document.body.innerHTML} ${tokens[1]}`;\n  writeToFile('index.html', text);\n}\n\nfunction getMd() {\n  var readme = readFile('README.md');\n  var readme = readme.replace(\"#semaphore-event-barrier\", \"#semaphoreeventbarrier\");\n  var readme = readme.replace(\"#semaphore-event-barrier\", \"#semaphoreeventbarrier\");\n  var readme = readme.replace(\"#dataframe-plot-encode-decode\", \"#dataframeplotencodedecode\");\n  const converter = new showdown.Converter();\n  return converter.makeHtml(readme);\n}\n\nfunction initDom(html) {\n  const { JSDOM } = jsdom;\n  const dom = new JSDOM(html);\n  const $ = (require('jquery'))(dom.window);\n  global.$ = $;\n  global.document = dom.window.document;\n}\n\nfunction modifyPage() {\n  changeMenu();\n  addDarkThemeScript();\n  removeOrigToc();\n  addToc();\n  insertLinks();\n  unindentBanner();\n  updateDiagrams();\n  highlightCode();\n  fixPandasDiagram();\n  removePlotImages();\n  fixABCSequenceDiv();\n  fixStructFormatDiv();\n}\n\nfunction changeMenu() {\n  $('sup').first().html(MENU)\n}\n\nfunction addDarkThemeScript() {\n  $('#main').before(DARK_THEME_SCRIPT);\n}\n\nfunction removeOrigToc() {\n  const headerContents = $('#contents');\n  const contentsList = headerContents.next();\n  headerContents.remove();\n  contentsList.remove();\n}\n\nfunction addToc() {\n  const nodes = $.parseHTML(TOC);\n  $('#main').before(nodes);\n}\n\nfunction insertLinks() {\n  $('h2').each(function() {\n    const aId = $(this).attr('id');\n    const text = $(this).text();\n    const line = `<a href=\"#${aId}\" name=\"${aId}\">#</a>${text}`;\n    $(this).html(line);\n  });\n}\n\nfunction unindentBanner() {\n  const montyImg = $('img').first();\n  montyImg.parent().addClass('banner');\n  montyImg.parent().css({\"margin-bottom\": \"20px\", \"padding-bottom\": \"7px\"})\n  const downloadPraragrapth = $('p').first();\n  downloadPraragrapth.addClass('banner');\n}\n\nfunction updateDiagrams() {\n  $(`code:contains(${DIAGRAM_1_A})`).html(DIAGRAM_1_B);\n  $(`code:contains(${DIAGRAM_2_A})`).html(DIAGRAM_2_B);\n  $(`code:contains(${DIAGRAM_4_A})`).html(DIAGRAM_4_B);\n  $(`code:contains(${DIAGRAM_5_A})`).parent().remove();\n  $(`code:contains(${DIAGRAM_6_A})`).html(DIAGRAM_6_B);\n  $(`code:contains(${DIAGRAM_7_A})`).html(DIAGRAM_7_B);\n  $(`code:contains(${DIAGRAM_8_A})`).html(DIAGRAM_8_B);\n  $(`code:contains(${DIAGRAM_9_A})`).html(DIAGRAM_9_B);\n  $(`code:contains(${DIAGRAM_95_A})`).html(DIAGRAM_95_B);\n  $(`code:contains(${DIAGRAM_115_A})`).html(DIAGRAM_115_B);\n  $(`code:contains(${DIAGRAM_12_A})`).html(DIAGRAM_12_B).removeClass(\"text\").removeClass(\"language-text\").addClass(\"python\");\n  $(`code:contains(${DIAGRAM_13_A})`).html(DIAGRAM_13_B).removeClass(\"text\").removeClass(\"language-text\").addClass(\"python\");\n  $(`code:contains(${DIAGRAM_14_A})`).parent().remove();\n  $(`code:contains(${DIAGRAM_15_A})`).html(DIAGRAM_15_B).removeClass(\"text\").removeClass(\"language-text\").addClass(\"python\");\n  $(`code:contains(${DIAGRAM_16_A})`).html(DIAGRAM_16_B).removeClass(\"text\").removeClass(\"language-text\").addClass(\"python\");\n  $(`code:contains(${DIAGRAM_17_A})`).parent().remove();\n}\n\nfunction highlightCode() {\n  changeCodeLanguages();\n  $('code').each(function(index) {\n      hljs.highlightBlock(this);\n  });\n  fixClasses();\n  fixHighlights();\n  preventPageBreaks();\n  fixPageBreaksFile();\n  fixPageBreaksStruct();\n  insertPageBreaks();\n}\n\nfunction changeCodeLanguages() {\n  setApaches(['<D>', '<T>', '<DT>', '<TD>', '<a>', '<n>']);\n  $('code').not('.python').not('.text').not('.bash').not('.apache').addClass('python');\n  $('code:contains(<el>       = <2d>[row_index, col_index])').removeClass().addClass('bash');\n  $('code:contains(<1d_array> = <2d>[row_indices, col_indices])').removeClass().addClass('bash');\n  $('code:contains(<2d_bools> = <2d> > <el/1d/2d>)').removeClass().addClass('bash');\n  $('code.perl').removeClass().addClass('python');\n}\n\nfunction setApaches(elements) {\n  for (el of elements) {\n    $(`code:contains(${el})`).addClass('apache');\n  }\n}\n\nfunction fixClasses() {\n  // Changes class=\"hljs-keyword\" to class=\"hljs-title\" of 'class' keyword.\n  $('.hljs-class').filter(':contains(class \\')').find(':first-child').removeClass('hljs-keyword').addClass('hljs-title')\n}\n\nfunction fixHighlights() {\n  $(`code:contains(<int> = ±0b<bin>)`).html(BIN_HEX);\n  $(`code:contains( + fib(n)`).html(CACHE);\n  $(`code:contains(@debug(print_result=True))`).html(PARAMETRIZED_DECORATOR);\n  $(`code:contains(print/str/repr([<obj>]))`).html(REPR_USE_CASES);\n  $(`code:contains((self, a=None):)`).html(CONSTRUCTOR_OVERLOADING);\n  $(`code:contains(shutil.copy)`).html(SHUTIL_COPY);\n  $(`code:contains(os.rename)`).html(OS_RENAME);\n  $(`code:contains(\\'<n>s\\')`).html(STRUCT_FORMAT);\n  $(`code:contains(match <object/expression>:)`).html(MATCH);\n  $(`code:contains(>>> match Path)`).html(MATCH_EXAMPLE);\n  $(`code:contains(import asyncio, collections, curses, curses.textpad, enum, random)`).html(COROUTINES);\n  $(`code:contains(import curses, os)`).html(CURSES);\n  $(`code:contains(pip3 install tqdm)`).html(PROGRESS_BAR);\n  $(`code:contains(>>> log.basicConfig()`).html(LOGGING_EXAMPLE);\n  $(`code:contains(a_float = max()`).html(AUDIO_1);\n  $(`code:contains(samples_f = (sin(i *)`).html(AUDIO_2);\n  $(`code:contains(collections, dataclasses, enum, io, itertools)`).html(MARIO);\n  $(`code:contains(>>> gb = df.groupby)`).html(GROUPBY);\n  $(`code:contains(cdef <ctype/type> <var_name> [= <obj>])`).html(CYTHON_1);\n  $(`code:contains(cdef class <class_name>:)`).html(CYTHON_2);\n  $(`ul:contains(Ctrl+F / ⌘F is usually sufficient.)`).html(INDEX);\n}\n\nfunction preventPageBreaks() {\n  $(':header').each(function(index) {\n    var el = $(this)\n    var untilPre = el.nextUntil('pre')\n    var untilH2 = el.nextUntil('h2')\n    if ((untilPre.length < untilH2.length) || el.prop('tagName') === 'H1') {\n      untilPre.add(el).next().add(el).wrapAll(\"<div></div>\");\n    } else {\n      untilH2.add(el).wrapAll(\"<div></div>\");\n    }\n  });\n}\n\nfunction fixPageBreaksFile() {\n  const modesDiv = $('#file').parent().parent().parent()\n  move(modesDiv, 'file')\n  move(modesDiv, 'exceptions-1')\n}\n\nfunction fixPageBreaksStruct() {\n  const formatDiv = $('#floatingpointtypesstructalwaysusesstandardsizes').parent().parent().parent().parent()\n  move(formatDiv, 'floatingpointtypesstructalwaysusesstandardsizes')\n  move(formatDiv, 'integertypesuseacapitalletterforunsignedtypeminimumandstandardsizesareinbrackets')\n  move(formatDiv, 'forstandardsizesstartformatstringwith')\n}\n\nfunction move(anchor_el, el_id) {\n  const el = $('#'+el_id).parent()\n  anchor_el.after(el)\n}\n\nfunction insertPageBreaks() {\n  insertPageBreakBefore('#decorator')\n  // insertPageBreakBefore('#print')\n}\n\nfunction insertPageBreakBefore(an_id) {\n  $('<div class=\"pagebreak\"></div>').insertBefore($(an_id).parent())\n}\n\nfunction fixPandasDiagram() {\n  const diagram_15 = '┏━━━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━━┓';\n  $(`code:contains(${diagram_15})`).find(\".hljs-keyword:contains(and)\").after(\"and\");\n  $(`code:contains(${diagram_15})`).find(\".hljs-keyword:contains(as)\").after(\"as\");\n  $(`code:contains(${diagram_15})`).find(\".hljs-keyword:contains(is)\").after(\"is\");\n  $(`code:contains(${diagram_15})`).find(\".hljs-keyword:contains(if)\").after(\"if\");\n  $(`code:contains(${diagram_15})`).find(\".hljs-keyword:contains(or)\").after(\"or\");\n  $(`code:contains(${diagram_15})`).find(\".hljs-keyword:contains(else)\").after(\"else\");\n  $(`code:contains(${diagram_15})`).find(\".hljs-keyword\").remove();\n  $(`code:contains(${diagram_15})`).find(\".hljs-string:contains(\\'left_on/right_on\\')\").after(\"\\'left_on/right_on\\'\");\n  $(`code:contains(${diagram_15})`).find(\".hljs-string:contains(\\'left_on/right_on\\')\").remove();\n  $(`code:contains(${diagram_15})`).find(\".hljs-string:contains('on')\").after(\"'on'\");\n  $(`code:contains(${diagram_15})`).find(\".hljs-string:contains('on')\").remove();\n}\n\nfunction removePlotImages() {\n  $('img[alt=\"Covid Deaths\"]').remove();\n  $('img[alt=\"Covid Cases\"]').remove();\n}\n\nfunction fixABCSequenceDiv() {\n  $('#abcsequence').parent().insertBefore($('#tableofrequiredandautomaticallyavailablespecialmethods').parent())\n}\n\nfunction fixStructFormatDiv() {\n  const div = $('#format-2').parent()\n  $('#format-2').insertBefore(div)\n  $('#forstandardtypesizesandmanualalignmentpaddingstartformatstringwith').parent().insertBefore(div)\n}\n\nfunction updateDate(template) {\n  const date = new Date();\n  const date_str = date.toLocaleString('en-us', {month: 'long', day: 'numeric', year: 'numeric'});\n  template = template.replace('May 20, 2021', date_str);\n  template = template.replace('May 20, 2021', date_str);\n  return template;\n}\n\n\n// UTIL\n\nfunction readFile(filename) {\n  try {  \n    return fs.readFileSync(filename, 'utf8');\n  } catch(e) {\n    console.error('Error:', e.stack);\n  }\n}\n\nfunction writeToFile(filename, text) {\n  try {  \n    return fs.writeFileSync(filename, text, 'utf8');\n  } catch(e) {\n    console.error('Error:', e.stack);\n  }\n}\n\nmain();\n"
        },
        {
          "name": "pdf",
          "type": "tree",
          "content": null
        },
        {
          "name": "web",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}