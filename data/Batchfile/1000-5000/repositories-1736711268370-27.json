{
  "metadata": {
    "timestamp": 1736711268370,
    "page": 27,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjMw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "alwsl/alwsl",
      "stars": 1304,
      "defaultBranch": "master",
      "files": [
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0478515625,
          "content": "MIT License\n\nCopyright (c) 2016 Turbo Developers\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 0.94140625,
          "content": "**Notice: This project is no longer maintained. I would recommend to not use the current install script, as the root system is severely out of date. Please refer to the WSL Distro switcher or official MS tooling for non-ubuntu distros. Of course the script and the download source will remain available.**\n\nThis project provides an easy way to install a custom, minimal, arch linux distribution as the WSL host.\n\nIf you want to try it right now, clone and run the alwsl batch file from a non-admin command prompt. \n\n###### Update Mar 2017\n\nWe are happy to announce Fastly as a sponsor for a reliable and global delivery of alwsl root images and future updates. Fastly commited a monthly four-figure credit to the alwsl project which will help with alwsl's transition into a new version later this month.\n\nCheckout Fastly's Open-Source efforts [here](https://www.fastly.com/open-source).\n\n![](http://i.imgur.com/rjcltwk.png)\n\n---\n\n![](http://imgur.com/1T2dyE5.png)\n"
        },
        {
          "name": "alwsl.bat",
          "type": "blob",
          "size": 12.333984375,
          "content": "@echo off\n:: == ignore this =======================================================================================\nSETLOCAL EnableDelayedExpansion\nfor /F \"tokens=1,2 delims=#\" %%a in ('\"prompt #$H#$E#&echo on&for %%b in (1) do rem\"') do (set \"DEL=%%a\")\nset fail=call :colbang 0c \"fail\" & set info=call :colbang 0b \"info\" & set warn=call :colbang 0e \"warn\"\n:: ======================================================================================================\n\nREM Todo\nREM - add user switching\n\n\nif \"%~1\" == \"update\" (\n\t%fail% \"Not yet implemented\"\n\tgoto :eof\n)\n\nif \"%~1\" == \"user\" (\n\tif not exist \"%localappdata%\\lxss\\rootfs\\usr\\share\\issue\" (\n\t\t%fail% \"alwsl is not installed. Try >alwsl install<.\"\n\t\tgoto :eof\n\t)\n\n\tif \"%~2\" == \"\" (\n\t\t%fail% \"user requires a subtask.\"\n\t\tgoto :eof\n\t)\n\n\tif \"%~2\" == \"default\" (\n\t\tREM This doesn't work at all.\n\t\tif \"%~3\" == \"\" (\n\t\t\t%fail% \"No username given to switch to.\"\n\t\t\tgoto :eof\n\t\t)\n\n\t\tlxrun /setdefaultuser \"%~3\"\n\t\tgoto :eof\n\t)\n\n\tif \"%~2\" == \"remove\" (\n\t\tREM Untested.\n\t\tif \"%~3\" == \"\" (\n\t\t\t%fail% \"No username given to remove.\"\n\t\t\tgoto :eof\n\t\t)\n\n\t\t%info% \"Removing %~3 and switching to root.\"\n\t\tlxrun /setdefaultuser \"root\"\n\t\tbash -c \"userdel %~3\"\n\t\tgoto :eof\n\t)\n)\n\n\nif \"%~1\" == \"snapshot\" (\n\tif not exist \"%localappdata%\\lxss\\rootfs\\usr\\share\\issue\" (\n\t\t%fail% \"alwsl is not installed. Try >alwsl install<.\"\n\t\tgoto :eof\n\t)\n\n\tif \"%~2\" == \"\" (\n\t\t%fail% \"snapshot requires a subtask\"\n\t\tgoto :eof\n\t)\n\n\tif \"%~2\" == \"list\" (\n\t\tfor /F %%i in ('dir /b \"%localappdata%\\lxss\\snapshots\\*\"') do (\n\t\t\techo %%~ni\n\t\t\tgoto :eof\n\t\t)\n\n\t\t%fail% \"There are no snapshots.\"\n\t\tgoto :eof\n\t)\n\n\tif \"%~2\" == \"restore\" (\n\t\tif \"%~3\" == \"\" (\n\t\t\t%fail% \"No timestamp given for restore.\"\n\t\t\tgoto :eof\n\t\t)\n\n\t\tif not exist \"%localappdata%\\lxss\\snapshots\\%~3.sfs\" (\n\t\t\t%fail% \"That snapshot doesn't exist.\"\n\t\t\tgoto :eof\n\t\t)\n\n\t\tcall :overwritefs \"%localappdata%\\lxss\\snapshots\\%~3.sfs\"\n\t\tcall :waitforexit\n\t\tcall :transpose\n\t)\n\n\tif \"%~2\" == \"restore-sfs\" (\n\t\tif \"%~3\" == \"\" (\n\t\t\t%fail% \"No file given for restore.\"\n\t\t\tgoto :eof\n\t\t)\n\n\t\tif not exist \"%~3\" (\n\t\t\t%fail% \"That file doesn't exist.\"\n\t\t\tgoto :eof\n\t\t)\n\n\t\tcall :overwritefs \"%~3\"\n\t\tcall :waitforexit\n\t\tcall :transpose\n\t)\n\n\tif \"%~2\" == \"create\" (\n\t\t%info% \"Creating snapshot...\"\n\t\tcd \"%localappdata%\\lxss\\snapshots\"\n\t\tbash -c \"mksquashfs / $(date +\"\"%%Y-%%m-%%d_%%H-%%M-%%S\"\").sfs -b 1048576 -comp xz -Xdict-size 100%% -all-root -e /mnt 2>/dev/null\"\n\t\tcd \"%~dp0\"\n\t\tgoto :eof\n\t)\n\n\tif \"%~2\" == \"remove-all\" (\n\t\tREM Don't add a choice here, del does that.\n\t\tdel \"%localappdata%\\lxss\\snapshots\\*\"\n\t\tgoto :eof\n\t)\n\n\tif \"%~2\" == \"remove\" (\n\t\tif \"%~3\" == \"\" (\n\t\t\t%fail% \"No timestamp given for remove.\"\n\t\t\tgoto :eof\n\t\t)\n\n\t\tif not exist \"%localappdata%\\lxss\\snapshots\\%~3.sfs\" (\n\t\t\t%fail% \"That snapshot doesn't exist.\"\n\t\t\tgoto :eof\n\t\t)\n\n\t\tdel \"%localappdata%\\lxss\\snapshots\\%~3.sfs\"\n\t\tif exist \"%localappdata%\\lxss\\snapshots\\%~3.sfs\" (\n\t\t\t%fail% \"Failed to remove snapshot.\"\n\t\t)\n\t\tgoto :eof\n\t)\n\n\tgoto :eof\n)\n\nif \"%~1\" == \"remove\" (\n\t%warn% \"This can't be undone.\"\n\tchoice /M \"Proceed and remove rootfs now?\"\n\tif errorlevel 2 goto :eof\n\tcall :purge\n\tif exist \"%localappdata%\\lxss\\rootfs\\usr\\share\\issue\" (\n\t\t%fail% \"Could not remove alwsl. Try again.\"\n\t\tgoto :eof\n\t)\n\t%info% \"Successfully removed al+wsl.\"\n\tgoto :eof\n)\n\nif \"%~1\" == \"install\" (\n\tFOR /F \"tokens=3,* skip=2\" %%L IN ('reg query \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\AppModelUnlock\" /v \"AllowDevelopmentWithoutDevLicense\"') DO (\n\t\tif not \"%%L\" == \"0x1\" (\n\t\t\treg add \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\AppModelUnlock\" /v \"AllowDevelopmentWithoutDevLicense\" /t REG_DWORD /d \"0x1\"\n\t\t)\n\t)\n\n\tif exist \"%localappdata%\\lxss\\sha256\" (\n\t\t%warn% \"There's already a WSL rootfs installed. We need to remove that. If you have data there,\"\n\t\t%warn% \"cancel this and backup your rootfs.\"\n\t\tchoice /M \"Proceed with alwsl install and remove old rootfs now?\"\n\t\tif errorlevel 2 goto :eof\n\t)\n\t%info% \"Cleaning old files.\"\n\tcall :purge\n\n\t%info% \"Installing base lxss fs from xenial server image. This will take A WHILE.\"\n\tlxrun /install /y  || (\n\t\t%warn% \"Problem with MWSL!\"\n\t\t%info% \"Make sure, that it is installed and enabled in windows components...\"\n\t\t%info% \"Try this following command in PowerShell:\"\n\t\t%info% \"Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux\"\n\t)\n\tif not exist \"%localappdata%\\lxss\\root\\.bashrc\" (\n\t\t%fail% \"lxrun failed to install Microsoft's rootfs. Try to restart alwsl again. If this\"\n\t\t%fail% \"error persists, check your firewall and AV. If all fails, open a GH issue.\"\n\t\tgoto :eof\n\t)\n\n\tbash -c \"apt-get -qq update >/dev/null ; apt-get -qq --force-yes install squashfs-tools >/dev/null\"\n\n\t%info% \"Downloading alwsl rootfs (this might take a while)...\"\n\tbitsadmin /RAWRETURN /transfer alwsl /download /priority FOREGROUND \"https://cdn.xorable.org/alwsl-june17.sfs\" \"%~dp0alwsl.sfs\"\n\tIf Not Exist \"%~dp0alwsl.sfs\" (\n\t\t%fail% \"Err, download failed. Try again (and check your firewall/AV settings).\"\n\t\tgoto :eof\n\t)\n\n\tcall :overwritefs \"%~dp0alwsl.sfs\"\n\tcall :waitforexit\n\tcall :transpose\n\n\t%info% \"Checking installation success...\"\n\tif not exist \"%localappdata%\\lxss\\rootfs\\usr\\share\\issue\" (\n\t\t%fail% \"Installation failed. Bash is still ubuntu. Try again.\"\n\t\tgoto :eof\n\t)\n\n\tmkdir \"%localappdata%\\lxss\\snapshots\"\n\n\t%info% \"Renaming shortcut.\"\n\tdel \"%USERPROFILE%\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Bash on Ubuntu on Windows.lnk\" > nul\n\t:: TODO : Replace internet resource via embed icon file? I'am just leave it here for maintain developers. Special thanks for a guys from github!\n\tbitsadmin /RAWRETURN /transfer alwsl /download /priority FOREGROUND \"https://cdn.xorable.org/archlinux.ico\" \"%localappdata%\\lxss\\archlinux.ico\"\n\tcall :create_shortcut \"%USERPROFILE%\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\\"\n\tdel /Q \"%~dp0*.sfs\" 2> nul\n\tdel /Q \"%~dp0checksum\" 2> nul\n\n\t%info% \"All done. Have fun! And open an issue for any ... issue you run into!\"\n\tchoice /M \"Do you want to start bash now?\"\n\tif errorlevel 2 goto :eof\n\tbash -c \"cat /usr/share/issue\" & bash\n\tgoto :eof\n)\n\necho\\\n%info% \"alwsl - install and manage archlinux as the WSL distro\"\n%warn% \"IMPORTANT: Read what NOT to do in alwsl at git.io/alwsl. alwsl is a non-standard distribution\"\n%warn% \"and therefore not supported at the archlinux BBS. Ask for support at the above URL only.\"\necho\\\necho Usage: alwsl task [subtask] [arg]\necho\\\necho List of tasks:\necho\\\necho install                Install alwsl from scratch. Implies remove task.\necho\\\necho remove                 Uninstall WSL completely.\necho\\\necho snapshot               Create and manage snapshots of the root file system. This does not include the /home of ANY\necho                        user (not even root). Create a snapshot if you think you're about to do something stupid and\necho                        need a way to get back to a working system.\necho     create             Capture the current rootfs.\necho     remove TIME        Delete snapshot TIME.\necho     list               List all available snapshots.\necho     remove-all         Delete all snapshots.\necho     restore TIME       Reset rootfs to TIME.\necho     restore-sfs SFS    Replace rootfs with third-party squashfs SFS. UNSUPPORTED.\necho\\\necho user                   Manage the user which hosts bash.\necho     remove             Delete this user account and switch default to root.\necho     default USER       Switch default to USER (you did remember to add them to sudoers, right?).\necho\\\necho update                 Check for and perform an update for the base alwsl rootfs. This will undo any changes you've\necho                        made not in a /home directory. You might want to create a snapshot before doing this.\n\ngoto :eof\n\n:overwritefs\nset wrfs=%~1\nset wrfs=%wrfs:~3%\nset wrfs=%wrfs:\\=/%\nset mountpoint=/mnt/%cd:~0,1%/\nset \"_UCASE=ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\nset \"_LCASE=abcdefghijklmnopqrstuvwxyz\"\nfor /l %%a in (0,1,25) do (\n\tcall set \"_FROM=%%_UCASE:~%%a,1%%\n\tcall set \"_TO=%%_LCASE:~%%a,1%%\n\tcall set \"mountpoint=%%mountpoint:!_FROM!=!_TO!%%\n)\nset mountpoint=%mountpoint%%wrfs%\n%info% \"Copying rootfs to temporary extraction destination.\"\nbash -c \"cd && mkdir -p rootfs-temp && cd rootfs-temp && cp \\\"%mountpoint%\\\" .\"\n%info% \"Unsquashing rootfs.\"\nbash -c \"cd && cd rootfs-temp && unsquashfs -f -x -d . %~n1.sfs 2>/dev/null\"\ngoto :eof\n\n:transpose\ntimeout /t 5 /nobreak >nul\n%info% \"Transforming...\"\nmove \"%localappdata%\\lxss\\rootfs\" \"%localappdata%\\lxss\\rootfs-backup\"\nmove \"%localappdata%\\lxss\\root\\rootfs-temp\" \"%localappdata%\\lxss\\rootfs\"\nmove \"%localappdata%\\lxss\\rootfs-backup\" \"%localappdata%\\lxss\\rootfs\\tmp\"\nbash -c \"cd / ; rm *.sfs ; rm -rf tmp ; mkdir -p tmp\"\ngoto :eof\n\n:waitforexit\nif exist \"%localappdata%\\lxss\\temp\" (\n\tgoto :waitforexit\n)\ngoto :eof\n\n:purge\ndel /Q \"%~dp0*.sfs\" 2> nul\ndel /Q \"%USERPROFILE%\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\ArchLinux.lnk\" 2> nul\ndel /Q \"%~dp0checksum\" 2> nul\nlxrun /uninstall /full /y > nul\ngoto :eof\n\n:colbang\necho off&set \"b=%~n0 (%~2)\"\n<nul set /p \".=%DEL%\">\"%b%\"\nfindstr /v /a:%1 /R \"^$\" \"%b%\" nul&del \"%b%\">nul 2>&1&echo : %~3\ngoto :eof\n\n:create_shortcut\n(\necho -----BEGIN CERTIFICATE-----\necho TAAAAAEUAgAAAAAAwAAAAAAAAEb7AggAIAAAALEIDfh79NEBFxuvoZP50QFXfbGh\necho k/nRAQAcAQAAAAAAAQAAAFQGAAAAAAAAAAAAADkBFAAfUOBP0CDqOmkQotgIACsw\necho MJ0ZAC9DOlwAAAAAAAAAAAAAAAAAAAAAAAAAVgAxAAAAAAAUSbB0EABXaW5kb3dz\necho AEAACQAEAO++E0k5ixRJsHQuAAAAyQEAAAAAUAAAAAAAAAAAAAAAAAAAADdqFAFX\necho AGkAbgBkAG8AdwBzAAAAFgBaADEAAAAAABVJTUQQAFN5c3RlbTMyAABCAAkABADv\necho vhNJOYsVSU1ELgAAAPkBAAAAABcAAAAAAAAAAAAAAAAAAAB6URwBUwB5AHMAdABl\necho AG0AMwAyAAAAGABaADIAABwBABJJIqggAGJhc2guZXhlAABCAAkABADvvgxJo0sS\necho SSKoLgAAAADHCwAAAAIAAAAAAPMAAAAAAAAAAACpahMAYgBhAHMAaAAuAGUAeABl\necho AAAAGAAAAEsAAAAcAAAAAQAAABwAAAAtAAAAAAAAAEoAAAARAAAAAwAAADLXYEwQ\necho AAAAAEM6XFdpbmRvd3NcU3lzdGVtMzJcYmFzaC5leGUAADEALgAuAFwALgAuAFwA\necho LgAuAFwALgAuAFwALgAuAFwALgAuAFwALgAuAFwALgAuAFwAVwBpAG4AZABvAHcA\necho cwBcAFMAeQBzAHQAZQBtADMAMgBcAGIAYQBzAGgALgBlAHgAZQAVACUAcwB5AHMA\necho dABlAG0AcgBvAG8AdAAlAFwAUwB5AHMAdABlAG0AMwAyAAEAfgAhACUAbABvAGMA\necho YQBsAGEAcABwAGQAYQB0AGEAJQBcAGwAeABzAHMAXABhAHIAYwBoAGwAaQBuAHUA\necho eAAuAGkAYwBvABAAAAAFAACgJQAAAN0AAAAcAAAACwAAoHdOwRrnAl1Ot0Qusa5R\necho mLfdAAAAYAAAAAMAAKBYAAAAAAAAAGRhbGVrAAAAAAAAAAAAAAAkPbRiR4o2TKiR\necho FNzMraJQr9G6bgZm5hGu02Btx4GgUiQ9tGJHijZMqJEU3MytolCv0bpuBmbmEa7T\necho YG3HgaBSFAMAAAEAAKAlc3lzdGVtcm9vdCVcU3lzdGVtMzJcYmFzaC5leGUAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUAcwB5AHMAdABlAG0A\necho cgBvAG8AdAAlAFwAUwB5AHMAdABlAG0AMwAyAFwAYgBhAHMAaAAuAGUAeABlAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\necho AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9AgAACQAAoFkAAAAxU1BT7TC92kMA\necho iUen+NATpHNmIj0AAABkAAAAAB8AAAAWAAAAUwB5AHMAdABlAG0AMwAyACAAKABD\necho ADoAXABXAGkAbgBkAG8AdwBzACkAAAAAAAAAjQAAADFTUFPiilhGvEw4Q7v8E5Mm\necho mG3OcQAAAAQAAAAAHwAAAC8AAABTAC0AMQAtADUALQAyADEALQAzADgAOAA0ADEA\necho NQA3ADEAMQA0AC0AMwA1ADAAMgA2ADMAOQA5ADEANQAtADQAMAA0ADEAMwA4ADkA\necho OAA5ADMALQAxADAAMAAxAAAAAAAAAAAAqQAAADFTUFMw8SW370caEKXxAmCMnuus\necho JQAAAAoAAAAAHwAAAAkAAABiAGEAcwBoAC4AZQB4AGUAAAAAABUAAAAPAAAAAEAA\necho AAAAXaL4e/TRARUAAAAMAAAAABUAAAAAHAEAAAAAACkAAAAEAAAAAB8AAAAMAAAA\necho QQBwAHAAbABpAGMAYQB0AGkAbwBuAAAAFQAAAA4AAAAAQAAAAFd9saGT+dEBAAAA\necho AGkAAAAxU1BTpmpjKD2V0hG11gDAT9kY0E0AAAAeAAAAAB8AAAAdAAAAQwA6AFwA\necho VwBpAG4AZABvAHcAcwBcAFMAeQBzAHQAZQBtADMAMgBcAGIAYQBzAGgALgBlAHgA\necho ZQAAAAAAAAAAADkAAAAxU1BTsRZtRK2NcEinSEAupD14jB0AAABoAAAAAEgAAABS\necho 7Al1AAAAAAAAUB8AAAAAAAAAAAAAAAAAAAAA\necho -----END CERTIFICATE-----\n)>file.tmp\ncertutil -decode file.tmp \"%~1ArchLinux.lnk\" >nul\ndel file.tmp\ngoto :eof\n:: =====================================================================================================\n"
        }
      ]
    }
  ]
}