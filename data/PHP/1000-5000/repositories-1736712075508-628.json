{
  "metadata": {
    "timestamp": 1736712075508,
    "page": 628,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjYzMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "mantisbt/mantisbt",
      "stars": 1674,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.9931640625,
          "content": "# Config files\nconfig/\nmantis_offline.php\n\n# Docbook builds\ndocbook/*/*/builddate\ndocbook/*/*/build\ndocbook/*/*/install\ndocbook/*/tmp\n!docbook/Admin_Guide/*/config\n\n# Local docbook from release tarballs\ndoc/en-US\n\n# Untracked plugins\nplugins/*\n!plugins/MantisCoreFormatting\n!plugins/MantisGraph\n!plugins/XmlImportExport\n!plugins/Gravatar\n\n# IDE/Editor temporary files\n*~\n*.swp\n*.bak\n.buildpath\n.cache\n.project\n.settings\n.idea/\n.vscode/\n*.kdev4\nnbproject/\n\n# Python bytecode\n__pycache__/\n*.py[cod]\n\n# MacOS\n.DS_Store\n\n# Libraries (outdated or installed via Composer)\nlibrary/FirePHPCore\nlibrary/ezc\nlibrary/adodb\nlibrary/disposable\nlibrary/parsedown\nlibrary/phpmailer\nlibrary/securimage\napi/rest/swagger\n\n# Composer\n/vendor/\ncomposer.phar\n\n# PHPUnit\n.phpunit.result.cache\n\n\n# Settings below are for convenience when switching branches on Dev machines\n\n# v1.2.x config files\nconfig_inc.php\ncustom_constants_inc.php\ncustom_functions_inc.php\ncustom_relationships_inc.php\ncustom_strings_inc.php\napi/soap/mc_config_inc.php\n"
        },
        {
          "name": ".imgbotconfig",
          "type": "blob",
          "size": 0.1337890625,
          "content": "{\n    \"schedule\": \"daily\",\n    \"ignoredFiles\": [\n        \"css/images/*\",\n        \"fonts/*\",\n    ],\n    \"aggressiveCompression\": \"false\"\n}"
        },
        {
          "name": ".mailmap",
          "type": "blob",
          "size": 4.03515625,
          "content": "Adrian Spinei <aspinei@users.sourceforge.net>\nAlbert Aribaud <albert.aribaud@free.fr>\nAlbert Aribaud <albert.aribaud@free.fr> <albert.aribaud@f-g.fr>\nAlexander Ishmuradov <ishmuradov@gmail.com>\nAllan Brazute <ethraza@gmail.com>\nAmethyst Reese <amethyst@n7.gg> <john@noswap.com>\nAmethyst Reese <amethyst@n7.gg> <jreese@leetcode.net>\nAndré Eisenbach <int2str@users.sourceforge.net>\nBastian Pfenningschmidt <bpfennigschmidt@users.sourceforge.net>\nCarlos Proensa <proensa@gmail.com>\nCas Nuy <cas@nuy.info>\nDamien Regad <dregad@mantisbt.org> <dr_mantis@regad.org>\nDamien Regad <dregad@mantisbt.org> <damien.regad@merckgroup.com>\nDamien Regad <dregad@mantisbt.org> <damien.regad@merckserono.net>\nDavid Hicks <d@hx.id.au> <hickseydr@optusnet.com.au>\nDavid Newcomb <davidnewcomb@users.sourceforge.net>\ndependabot[bot] <support@dependabot.com> <dependabot[bot]@users.noreply.github.com>\ndependabot[bot] <support@dependabot.com> <27856297+dependabot-preview[bot]@users.noreply.github.com>\ndependabot[bot] <support@dependabot.com> <49699333+dependabot[bot]@users.noreply.github.com>\nDmitriy V Kuranov <dkuranov@beeline.ru>\nFrank Rodgers <frodgers@redcom.com> <frodgers@iowa.redcom.com>\nGatis Ozols <ozols.gatis@gmail.com>\ng0tmi1k <have.you.g0tmi1k@gmail.com>\ng0tmi1k <have.you.g0tmi1k@gmail.com> <535942+g0tmi1k@users.noreply.github.com>\nGrigoriy Ermolaev <igflocal@gmail.com>\ngrummbeer <kde@streber24.de> <67791701+grummbeer@users.noreply.github.com>\njeckyhl <jeckyhl@sourceforge.net> jeckyll <jeckyll@mantisbt.org>\nJim Hanley <dgtlrift@users.sourceforge.net>\nJohan Guilbaud <git@lapinkiller.fr>\nJohan Guilbaud <git@lapinkiller.fr> Lapinkiller <lapinkiller@hotmail.fr>\nKornel Lesinski <kornel@aardvarkmedia.co.uk>\nLincoln Maskey <narcissus@users.sourceforge.net>\nLuke Lee <luke@mantishub.net>\nLuke Lee <luke@mantishub.net> <lr_dev@orientationsys.com>\nluzpaz <luzpaz@users.noreply.github.com>\nluzpaz <luzpaz@users.noreply.github.com> <luzpaz@@users.noreply.github.com>\nManilal <libregeek@gmail.com>\nMarcello Scata <marcelloscata@users.sourceforge.net>\nMarkus Schneider <schnueptus@schnueptus.de> <schnueptus@schnueptus-d430.(none)>\nmfoXen <inetgames@web.de> <mfoXen@users.noreply.github.com>\nMichael Lorer <info@01-scripts.de>\nPaul Richards <paul@mantisforge.org>\nPaul Richards <paul@mantisforge.org> <paul@minimoo.org>\nPaul Richards <paul@mantisforge.org> <Paul@.(none)>\nPaul Richards <paul@mantisforge.org> root <root@paul.shroudbox.com>\nPaul Richards <paul@mantisforge.org> <paul@issue-track.org>\nRafik Robeal <rafik@mantishub.net>\nRafik Robeal <rafik@mantishub.net> <rafik@futureadvisor.com>\nRafik Robeal <rafik@mantishub.net> <rafik@mantishub.com>\nRafik Robeal <rafik@mantishub.net> <rafikrobeal@gmail.com>\nRafik Robeal <rafik@mantishub.net> <syncguru@users.noreply.github.com>\nRobert Munteanu <robert@lmn.ro> <robert.munteanu@gmail.com>\nRobert Munteanu <robert@lmn.ro> <robert.munteanu@sdc.ro>\nRobert Munteanu <robert@lmn.ro> <rmuntean@adobe.com>\nRoland Becker <roland@atrol.de>\nRoland Becker <roland@atrol.de> <roland.becker@atrol.de>\nRoland Becker <roland@atrol.de> <roland@Rolands-Air.fritz.box>\nSaga Musix <saga-games@arcor.de> <sagamusix@users.noreply.github.com>\nSiebrand Mazeland <siebrand@kitano.nl>\nSiebrand Mazeland <siebrand@kitano.nl> <s.mazeland@xs4all.nl>\nSiebrand Mazeland <siebrand@kitano.nl> git <Administrator@.(none)>\nSiebrand Mazeland <siebrand@kitano.nl> unknown <Administrator@.(none)>\nStéphane Veyret <sveyret@axway.com>\nTamás Gulácsi <tgulacsi78@gmail.com> <gt-dev@gthomas.homelinux.org>\nTamás Gulácsi <tgulacsi78@gmail.com> <tgulacsi78+acer@gmail.com>\nTamás Gulácsi <tgulacsi78@gmail.com> <tgulacsi@users.noreply.github.com>\nTarik Sedlarevic <tazza70@users.sourceforge.net>\nVéronique Maginot <veronique.maginot@credit-agricole-sa.fr>\nVictor Boctor <vboctor@gmail.com> <root@localhost.localdomain>\nVictor Boctor <vboctor@gmail.com> <vboctor@localhost.localdomain>\nVictor Boctor <vboctor@gmail.com> <vboctor@new-host-3.home>\nVictor Boctor <vboctor@gmail.com> <victor@mantishub.com>\nVictor Boctor <vboctor@gmail.com> <victor@mantishub.net>\nVladimir Shulev <badfiles@mail.ru>\nZipher <zipher04@yahoo.com.tw>\n"
        },
        {
          "name": ".travis.yml",
          "type": "blob",
          "size": 1.7568359375,
          "content": "# -----------------------------------------------------------------------------\n# MantisBT Travis-CI build configuration file\n# -----------------------------------------------------------------------------\n\nlanguage: php\nos: linux\ndist: focal\n\n# -----------------------------------------------------------------------------\n# Environment setup and test scripts execution\n#\n\nservices:\n  - postgresql\n  - mysql\n\ninstall:\n  - composer install\n\nbefore_script:\n  # sendmail replacement\n  - chmod +x \"$TRAVIS_BUILD_DIR/tests/fakesendmail.sh\"\n  - echo 'sendmail_path = $TRAVIS_BUILD_DIR/tests/fakesendmail.sh' > ./tests/sendmail.ini\n  - phpenv config-add ./tests/sendmail.ini\n\n  # MantisBT setup\n  - ./build/travis_before_script.sh\n\nscript:\n  - ./build/travis_script.sh\n\n# -----------------------------------------------------------------------------\n# What to build, and on which platforms\n#\n\nbranches:\n  only:\n    - master\n    - /master-[0-9.]+/\n\nphp:\n  - 8.3\n  - 8.2\n  - 8.1\n  - 8.0\n  - 7.4\n\nenv:\n  - DB=mysql\n  - DB=pgsql\n\njobs:\n  include:\n    # Add a specific build for Documentation\n    - name: Documentation\n      env: DOCBOOK=1\n      # Using Ruby as it's preinstalled and we don't need PHP to build docs\n      language: ruby\n      addons:\n        apt:\n          packages:\n            - publican\n\n  allow_failures: []\n\n\n# -----------------------------------------------------------------------------\n# Notifications\n#\n\nnotifications:\n  email:\n    on_success: change\n    on_failure: always\n\n  irc:\n    on_success: change\n    on_failure: always\n    channels:\n       - \"chat.freenode.net#mantisbt\"\n    skip_join: true\n    template:\n      - \"Build #%{build_number}: %{repository} %{branch} (%{commit}) %{author} - %{message}\"\n      - \"Build details: %{build_url}\"\n      - \"Code Changes: %{compare_url}\"\n"
        },
        {
          "name": "KEYS.md",
          "type": "blob",
          "size": 40.8603515625,
          "content": "# MantisBT PGP Keys\n \nThis file contains the [PGP](https://en.wikipedia.org/wiki/Pretty_Good_Privacy)\nkeys of MantisBT Developers, which were used to sign official release packages \nand the corresponding tags in the Git repository. \n\nDo not use these keys for email or other purposes without asking their owner\nfirst, as some may be used for code signing only.\n\nPlease note that this file as well public key servers may be compromised.\nYou are encouraged to confirm the keys' authenticity with their respective\nowners.\n\n\n## Usage\n\n### For End-Users\n\nAdd the keys to your keyring\n```\ngpg --import KEYS.md\n```\n\nAfter importing the keys, you may want to review them and eventually decide to\nsign and trust them.\n```\ngpg --sign-key KEY\n```\n\nCheck a release's integrity\n\n```\ngpg --verify $SIGNATURE $RELEASE_FILE\n```\n\nWhere _$SIGNATURE_ is the ASCII-armored signature file you downloaded (e.g.\n`mantisbt-2.24.0.tar.gz.asc`) and _$RELEASE_FILE_ is the corresponding release's \nzip or tarball (e.g. `mantisbt-2.24.0.tar.gz`).\n\nThe above command's output should be similar to the following example, the \n**Good signature** mention confirming that the downloaded file has not been \ntampered with.\n\n```\ngpg: Signature made 2020-03-15T20:15:09 CET\ngpg:                using RSA key 5769AA4978E571A7BADB2A4DD4EAE2390A45E2D6\ngpg: Good signature from \"keybase.io/vboctor <vboctor@keybase.io>\" [full]\n```\n\n### For Developers\n\nTo append your Public Key to this file, follow the instructions below.\n\n1. Edit this file\n2. Go to the end and add a level 3 header (`###`) with your **username** on the\n[mantisbt.org bug tracker](https://mantisbt.org/bugs) \n3. Execute the following command\n    ```\n    (echo '```' && \n         gpg --fingerprint $YOUR_KEY && \n         gpg --export --armor $YOUR_KEY &&\n         echo '```'\n    ) >> KEYS.md\n    ```\n\nPlease also submit your key on a **public keyserver**, such as:\n- https://keyserver.ubuntu.com/\n- https://keys.openpgp.org\n- https://pgp.mit.edu/\n\n\n## Keys\n\n### mantisbt.org\n\nThis key is used to sign releases built by scheduled batch processes on \nthe mantisbt.org server, e.g. [Nightly Builds](https://mantisbt.org/builds.php).\n\nIt is also published on https://keyserver.ubuntu.com/.\n\n```\npub   rsa3072 2021-05-26 [SC] [expires: 2026-04-12]\n      AE13 FBCC 5F55 7C2A D1AA  0391 1665 0919 AE7A 01F2\nuid           [  full  ] MantisBT <mantisbt@mantisbt.org>\nsub   rsa3072 2021-05-26 [E] [expires: 2026-04-12]\n\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQGNBGCufKoBDADJiRD2CYK8dy1obA7sQDDusSjCYAktkuqeUAUqud09zpo2bDrz\n2rHp8V7x/0i56/lfsR6EByV0EkRHkP5m4Gk5WFROoRRAK8TlE9X7BF9Q0TlARUZE\ngPot/PRoCwPe3iXWlEIVeVS6FMMS8Y/mOqUrq561cj8pKoPVtXBA5BJ7ow8pACqd\nyixTY8z9okWIvhi0trqe6scbK1zy1gdp/fKZeNMzQNWHwgcMFoBz4N02Z0991QXw\nXZcNGWPYPZgAIPR54o+Z00LKHuHVK6GFMshdzDm8oxmP0KakwzjHZCPbTh7COfe9\nqxVLuw8pZzXj9LZxgCE9TB06x1fxZYKKahZyMA48RDehW/Xdr5cZu1sSK/I2NfqK\n2XouE5sAXUiQ8FehU/YNbRlSWKX2dAYfZ4z8c0Yg8a+LQUDXxnsGRgMgZzNMkUmK\nj8PPvl3POWOOFRaDLgqGvAj6K1XtyPONodZpfzmvUL8xsBKGnrCs6CG89WrztB3a\nqmD2+nkJCvFx+QkAEQEAAbQgTWFudGlzQlQgPG1hbnRpc2J0QG1hbnRpc2J0Lm9y\nZz6JAdQEEwEKAD4CGwMFCwkIBwIGFQoJCAsCBBYCAwECHgECF4AWIQSuE/vMX1V8\nKtGqA5EWZQkZrnoB8gUCZhk6qgUJCS0lAAAKCRAWZQkZrnoB8oWUC/9EO/jI3JPH\nIh0KCHeuHaO2KPpeBnpJ1+Nsyw1EvRsS64n+6PeDH+GrLWuGWXKdkR9/bZ9W3+tS\nv/W85aO3HZbxXWFqsjNC6niVAiO9MCJt/ucNXk3xHB7ZDfyAwCOABOdzvvjnRVg0\n0DnE2B9q7nYP9WO37WUFTj8sejRWcXdWMlqteHALEfu4LHyxNVhKOCVmRF8FJxn5\nJVrDoD+sufDoK9wc1V10b5Htao9M+UYPLJueGHYx/Jx6SNiuChZRdwvZ7MgGKVsJ\nGQWEYo9L9xE3d2FbrWVizkanOcPkAf6OV3s+dvunew+mMsH1Bbi/Fobsj7x1IPn5\nbQn/9NSUd+9i89W94HFjmW4A6xKZ1FR13b3ODB5euTwPf2GeLZ3t/pcHfOZXg4gZ\nLJgrD7fJDGKuf1rgISYdcY/essV0jIO3C7cJgvf6lWrDX9PYdCOGXeBJ9ol4Y9av\nUmMj7gn2TlFF8CkrfAJDYlW1Je8xejKksjhtxu7eYw2DSAj0d27RA1+5AY0EYK58\nqgEMALv+ofRkdpUX4Dnt326G+DRtf2aBxZT/iB9JOzHflMs1/0+2mYYqIv7m5TR1\nkwc4YYNoEOGfM5dvg/xwjQtdywlaobI8QgPycPVvatXc/6t78jCW7WW2gbiAjIII\nrLWeGfasHEKpb1zQI152Jf6r+4oLj8WIJOUgfdtmpf6Jy/qnTXnU9wSYM8KDCV92\n8qOLKWa1t7nVr7sgFgrazb8JhyVSan5/4BT1uKmmqjZiD4RRGkSTOE9MQHMYfdXf\nCtVMU6kKjS3xaVbCZfF5/pIgKE39wp637p//YPhdKVCikzA37oM04gSnvw6pkW8K\nTsGVrvv/kG2yGswqKOjhaKdpXX7Z1fTjPriblxErE6NrODkNWYvqwbR3ofo9tP3k\nNayEu7geXRyvEomu4i63Qw4tEquoZ3zx72ueR8LVh7K9Xb61b1DetbUURg1v1Uff\n0rBcoa/tJ3MjuKKA3oPlyobIQ+vP37BQMhCNMwG5M9y1Mkfy7tpFfs7anyAXyIzC\nzW7/OQARAQABiQG8BBgBCgAmAhsMFiEErhP7zF9VfCrRqgORFmUJGa56AfIFAmYZ\nOyoFCQktJYAACgkQFmUJGa56AfLPCwv/QMB3qI0Y8kkDSXNO18Clf6zUm3tT+WYY\n0Ga7blAfyJ8i+Oq/GBA32P5jBlQdXQyOI2r3GNN6AW/CrdDJ0NrVNCj+E6+I3YHZ\n56WiY2WeMg+aZEpPERawHYBXHHRfFo5EC38/RhZnH6wdTu8T/8GiJ2sbAuEL819j\nUWt7BMnNj8Azq5F4SVHXdl+oxezSpFJAjhIKttKKD2q3XdtXfwlpY/iDeHVNVWT8\n0p3iM/+p16pLCJLRSjr3hRrtqW3Hbf1LxYoVxfL7aRwHNqesxzZAFwL3Hr/B4Qac\n6vn99xedrQw8D+mngWAWSxdVY3vJW6e7rSKbSy3RGPU8qiOqSOpyLPl7tzZm6hOX\nEP1q6PjQr9Mf72lN6iDdrfJ7nP/90Xm3z2KK3ZfBZQizymTVBV1kBciyymbmyTec\n7Aj8rXryQ8+DXszQGofyhI/j5GaSjDon/s1hxJF5Chs37stInbE5NsZgTVNhkTTS\nQwqb/+lBgbPGjDvUaaq3uAtcppO5Bn6/\n=CceE\n-----END PGP PUBLIC KEY BLOCK-----\n```\n\n### vboctor\n```\npub   rsa4096 2015-06-01 [SCEA]\n      8079 96A5 AAFD C2F3 466D  D672 9839 9BB0 8EBC 1D10\nuid           [  full  ] keybase.io/vboctor <vboctor@keybase.io>\nsub   rsa2048 2015-06-01 [S] [expires: 2023-05-30]\nsub   rsa2048 2015-06-01 [E] [expires: 2023-05-30]\n\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINBFVssJABEADI8+xMSumDJr+OsaQ0839jtURXfYdjLFmxQC7keWwqjzaVoEao\nmFpzSEEmg/KBUks8UnY+xqm8hqZguT7NETwf6m/IKUv8JHSbdbO8uWto3mPb+lDu\nSuf/pMrK010x48A2K02iM7zKSsEQOyryuwLePc7t9Y5WDqak1mXqnucZnALg9l9T\nM8zNnVzrbvcZSNXaPudoL6I4Ki5l57Yb21VUjPatglGhr97FWnrJFqzbWKs/khsx\nL99UaCVC4dUNDZhVv2cKyNeTLkF3rxUcujbZxHyJYRRXJUdkXzEg23gAPDToAsPf\nEY0Rz0liV9bPzHgPeonzdnPNlVb/2OI0oIUkU7CjZUkPPyDcispk5QTjJiRAjE6G\nQmy+SrSOslMmtrNsw/QJCNbUcld653bFDUopqr+vv5dgZa/MRx9n78sB+kkN3HZh\n0GfpBLKooGanhDOGG8uzW8ivck1oEdxiKO91GRMrcvu3fz4lCvxl6hvcfImlS+cT\n7EOCN0ViXGpwYTqZ6ZdQtDYrxWWY+AJVHW3SyBbngK1u50u16OZiHxPFdUQPNJrG\ncUNuuklJwa+hbgYwey9yik1UmKo60kSgvFoYdMMfd50A0+Qe/v8bWa0CO6xc0dSM\nzgXNpdnNaTZQ6X1DnbBR0tsB3LWIFKa4yXt15JyWaksSrtcwJVjh89/qbQARAQAB\ntCdrZXliYXNlLmlvL3Zib2N0b3IgPHZib2N0b3JAa2V5YmFzZS5pbz6JAjAEEwEK\nABoFAlVssJACGy8DCwkHAxUKCAIeAQIXgAIZAQAKCRCYOZuwjrwdELvqEADG6GbU\nIzE5nhry+IIUZvdhz6QTQj4/eGJuHpLK/rIaSE9mLtVTeq9OG+xxTdguyMqIXvW4\nYaUA734i2UwMKJBlzdtn2b1KatdPEMXldlJ/6m9H4zwK38/PFYaaw03WHv4nsCxe\nxh657D7mYRdS/ACrOCDssa/lDSXAJd21kiQM4pxkK2etvD5H3ZF/2m4C2FcG/Ppb\nd2IwGhPbzknmLyxBihhluggCh0zlV2JOeeGu4oKp1dL8doUPoYxZ38gRXdlrdLdC\nuCkv6Mp2uBhlWxY2Z2CIF9LmIz6+ve7ySWrsJXf+cAqBJ8+Vzz8xAJRDIyPyxJvh\n3vihGNgrAN1uVJp7D6qQDQ0m+nWVG0ifxQhNLQiH8/EDJWMq0vhAKt7flyy40vAc\nNwPN+F59seyVVKyTmnd9AB3UdteEe/tjOYFHWM5+x6WvzgXP/UZCgTtAApQVyc2w\nWab0T1b0jzqURpnhFpj8m6S0NfJuctsYUFrZPl4b1Ma05nv8caKy4of//ajoG2A0\ndJgKaG9bqCwGsfmj07C/eP+CYP4n4ea4GfeYwv+W1vOLv/LcN7W+rnLadPKh31Rq\n+Ziif8PnbkhLHCenPddZrhB9mSfQxK3qKVJavgtW4JhlfxtoPwwYxp9CU991fGEB\n8h+6+yWUPakenig+RmcDM8msKifjHP0huoDLFLkBDQRVbLCQAQgAvDTDDkFM70I3\niUFEtPGOCUHtswcujsxt9jjF5librT++NgkEdRhrN3M6+LIpigT90F1WXR8bTJ3F\n73Vj/kQvujtvdXy0CzY74U4c7N9Or4hvbiGPGpS3Od4ZhqQhqAaCWhvuSV4aK56J\noiTMaS/TOhkIPxVP0uOUZoriQ7tl3Oiftb+7LY3LiVfH4kAdu0PoosqY7dTVuFZf\ni2yS8qNCdvbxc3TBwQRzxtyipPcfd5i5rP0bz+kcCiSWEnIZXZVlO+/ZmzxBh4La\nI0vGq/44+GwcuLL59ahBFFdUhX/ezhfH+u3b8pfG+7/oimfI3CM7WXTACe3V4h3K\nUnE+NMePnQARAQABiQNEBBgBCgAPBQJVbLCQBQkPCZwAAhsCASkJEJg5m7COvB0Q\nwF0gBBkBCgAGBQJVbLCQAAoJENTq4jkKReLW15YH/R+ySOENJy0dUSSxwgJafqa9\n8WT0idTZ5Qxd53qeO5JSQaJACsIuvesyhDFuWt0Jk2UAwlcijIS7bD9RrgUvhAtk\nCIV9Qw9UDFypubUtW15j08eApYjiXOuClDd5SI+p/1AUBk8DXYd65iOBwD0YFrCw\n08/738al1ctCTJANuxu+2DO95QMIZuWm2gYlKcdIn9MKeOlAk5fwwFWjQqiwi1LP\n+mKX171HpX3dugqRDFndnTwdGCB/MwSEVQ0ZyOH9RFbcMZVadWHzuUqy9opTss2C\naF7jR2mlX/04eRgmcB+88OAoEwFKmyAm6XgBcWgtj8IAb99PrP0V3CL2GAPiHF6z\nxg/+OBiEfjX0TPnKulSiFjm/iG35mqsdcnmDvoA1HA6y9UhGcR1y4O9mFVh+pLSu\nIgt6jkV9ta/nQPh9oCqLpebzruunBiAoYXFwtvute7e0HqhQ9libbtzxHnbT4Ft+\nTZw39OlzUHpBHH/2k3EAP5cNgj2hGO9Zg4Wp8UKHpTDXynnLMT4M+Lxyf2ztEbEg\nGFTqQGXYEjNeoMNzTNHYt/Io3W7YPsFKpAPy+R61Md45J58kicZDHUOE9HyP1kut\nb0EGLzyPfZFfq0HFv4bCohyi4NxeC7Lmk0QXrAmmdKmgkgzhDv3HJriWu2f0+xXk\nLYzsjKO2gsgQBmGvzj7+68GJIHN+GscftsZVBxqCA+9HaacY5dDiZiFQWbGYw0eu\nxOmykOuzc/6Xd2LD1ckE+PfhA08GElzrKAFy8QbQfsAQHXzdIVLljWJF+m/AifBC\nRaUf5LzpD4Hmm5ie8fnzflLMB6d1LBBC8xjWF4J8NRsxRKaFK8Oraeh90cf89LXk\nPitJEdK6osF6R4SsifDRJhm0zDm2jcQjWnWhhIOM3nTMb90zRMyPbEIAOFPTLMOA\nKsq7d1cENnmzQR3itg/Ii117QhO89xx7pu5MBxVn20R0VMs0Hqoo+Z+Y2X4OwRsT\nKncrrl849alKurbM//OEh0fPG1WjTiawqTkocZqX2Oc7fsO5AQ0EVWywkAEIALcd\n7XcAOAUyBHGMbQRqq40bA8LQTIGRaye0BUMLP1wWkOBKedxuzkg5rkYhgfwBGdqa\nNI1IvsjSN0X++LEhdWUaEkI3FKkyvsaU7i0jkJSnaCj/JXkW3rj/b8D248kWzGq6\n02QLsTt+215E7h+1yY9dJgauIp1OmKC39CYrifuNs5oFIvMVK08WnB+Lg6NQEd5M\nZfN+LnS7J0bEcF2I5KZgcvUi49NhjG7FcazABa5uwOoh8aqzWYVBd782JP3+Mnn1\n7uvD65x8Vkx8fkPsQkf9Ul3GZvhiIS2Q55ZCfW8evCjyjy2x23zXQHCSATIfhuQd\nt8KGAwwFWdpdjSZKvdUAEQEAAYkDRAQYAQoADwUCVWywkAUJDwmcAAIbDAEpCRCY\nOZuwjrwdEMBdIAQZAQoABgUCVWywkAAKCRCftKugvN0B7VC9B/wKLg7VwMDQc5z2\nwRg2zRGAUT9vtq/AYHygM0Zqfv+y6WkBmMdXoJq/gr6prH/kmln5KArtpbGeDGZq\nU/rXD0avyb04ZlIV6BBbBtVhQOO/A1DZj9/TnAUCFj+XYsHdVv/QFMrdLVv+h+sK\nWElh8TgHXzblKRM9zuZiNe7X4dMWiiZD16Mps7Haoj0z/60lb1mhE2SXnxPKoKEQ\nIKMiiRi/B4svvTJK5w+aC2sxbq3JDiBivCETXR+17sibw7XmJ6M+IAh6CFFVNh7X\nMMRUI71FO9xLjEoxTc30/cKoxNpar4cDx7y9AstSO6g8bMQ1sLHj6pR7v8/2PQJ7\nCJ8buUKrRWoP/2Eyx5pfHKh2Lg4RsW8vxa4sFl5ezvzme5zRb2ixPNGvzJlvZJ5M\nsc/JnGxzQb+Q8W//2R6SuZ1Y8pWLu0Yl1JF53nunPs6w9bO+BoOy9CeGzIrzF0PV\nugNyXIerCJByjHG1E5bkbY8ij24z1zoad/lRmK/Ahqcp1+PGlgOSsRj97u2FQxEk\noBCKeq8H6NuXUv2+SrFbZnhDqNS8XkQmU9eWSUChv/Yz+EeAR/koa8QmYagtxJNa\nctzb2xumA8x/eTiQp/o+7QhmNrccBaNKMch1Ipe8lCqUbEPXQ1LbQRWneUz9BIcu\nW17zINu2w8FnrqCx2SpsM/1WGotDUclsXI+Iyw4XrVFEknGLLiwQjeM2YYZnuYTh\n4qDADBSgigXr/bdrGfqiUfGeDrhfowf768P/kj2kVF/nxykKNdB1KWNsQhFVT9xz\nbKqjegF1DCQoBqxUl3D67sqtomkBEPTfWuuEd3vBWB2gnQA5ReXda+FuPINXdWaF\njcKvKDt56No8vWWQPlVfOB0v1hqRG5lbhOtE4CnS5s38qPy+CW0ofC3u31HWHh9T\ne/LGN4OT+MclNbAvGRHiRDUnANGhz3VDw4JknzDiLnk6Vhosp6D/GWUKoAwwBmtN\nKiRlaLD81RecU9AzvULy+vcsPsSzA3pc8bAebAYhvvXIdBBTBi2F/jIm\n=9aN+\n-----END PGP PUBLIC KEY BLOCK-----\n```\n\n```\npub   rsa2048 2014-12-08 [SC]\n      4EA1 D867 7022 073E A38D  3914 0223 93FF F8CD 7E90\nuid           [  full  ] Victor Boctor <vboctor@gmail.com>\nsub   rsa2048 2014-12-08 [E]\n\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQENBFSFK84BCAClEk0aouhRS0VKD0ccWrNQUpYpSrDS9dGD3jJj12a/pbxRhwtA\ntNtO88cWAdIjIgj9k3Z0X1sGBusjn73CsfMdxOiY1p5lFnpb/30HX2PevIijwNMW\naGRFDrt7Hs4wqX2hTkVKDT4Bzk0ME0JTSXh86TTRAiPrevr16akyLtP1UROTBQBF\nGqPUzes+xwiuP6e9ovF4fduqCqUxpOZ2IXg8lrb26wjOzB7matuU2gK/BPmKJym0\nHepcCxn55g4DwCaA7EUiWF1WOE1hejLnq1+eeexqYDVceigspcBhojFjnoA9CbJ+\nhPAzCybuRIMMQPWGonkVDH6LpjUjQh07bgvPABEBAAG0IVZpY3RvciBCb2N0b3Ig\nPHZib2N0b3JAZ21haWwuY29tPokBOAQTAQIAIgUCVIUrzgIbAwYLCQgHAwIGFQgC\nCQoLBBYCAwECHgECF4AACgkQAiOT//jNfpDykwf+LvwFEoy+I+SqqAaYDslWFAS5\nsfhOmvH03s9MxL3w0M3WvRB6fv5OvrAoCown1fZ0lXZy3jeL4VH3yqveBqYiPVTv\nRCxuuZAiKP64NI/UxKFI8nTmdqUqZXi/F1ovJThh3GYFloLwUOmc32M8mvEG8z2o\nmhRtWk2R4xK2uTgsn37fOV8jcranNTLMuYYqz52ZcqMAJRCdcN6t+Z5wdNFKVpR3\nMUDoDu6qOfPDsMFoyHCSZrJWvm/8LWf4sKpwKMGF114Ga49dlmJXhzzA7KnaVJP8\na2yPCbCyD4gUJfffXTxZvEUmOGGuRlY22Ih6NM+VLC2HAFTRgBgiy7i0w7d0AYkB\nMwQQAQoAHRYhBOqmPx8oTKj1FTdJBw/+d/t+CBBfBQJepKX6AAoJEA/+d/t+CBBf\nXLMH+QHBIOQy2fjp6KfzNB+RQSmH5bk4UppmC+eDZz5z84NluS7Or5t/46XFX8e3\niYTsWdQIH7A8PN5DDlAnh3tC1vx5Dxx0btGoj2Ji1VexfH/qpBMLx395dFHjLBin\noiWl1f8vk3Fzndu0YWXkotCAioCMtrw+ws+ds/UB9u+oYZHEyqBg4LZu/K9cQc/O\nXCBVlmdeJN9toUc8bw2e/nORDYKpKJtOqpq94xMcxvjei/sGwZwwBC/ohgCDDJKb\nyzGc7YoXInPNMN+3Tvyvj7A3iix4vSHOLqdD4v82yvHZ1wPNKIKrEl28BZxT0yBr\n1xBYdJ/IiShgcdfgOuNmHp6VxTG5AQ0EVIUrzgEIAK0fKxWax3WuwDqL7SaGae2Z\nvXWjHwt6Q45Y/XWQ6O2m8iuDSzY33UZNsJex6pVsLoqibIXGyWm8WMXZKpDx4LNM\nFSNq8GDYRnvThDjol9wVJ+lxlYeeDwOp3eei3bkNtpj2plceK1M2h3WN3C/BC2Hc\nvqZFippdCFFx7ZOlAqBUfOOyEFhnJiOn3IKQDQ2Aaa9nxh3qc6+Rnn7ZxvstQV4M\n1ajPoUAmDdt4RaLmruQAp6+4947N2A3T2biHdMAYM5bUziDrN7l5z3Ji1HALJ4ml\n/74GdopGTLTCjO9mYgbUZ4XdIRZD74gxH88DXZ/VOSCOVU+Ov0FbcmP6L4UVooEA\nEQEAAYkBHwQYAQIACQUCVIUrzgIbDAAKCRACI5P/+M1+kHRLCACHjq2H/lsPhQsn\nnoDHN8o6x5MAmfxkMb5OJQeYWbuNxJm6MdcitrnZ/hx8mEXZIWBc/UsZdREOaYjR\nkvCiD29FsaQ1Jwx0OElhKA/+8he0fZZuKe8UvBCq1dc1cOqqWRNzMwDd8VrTXnP5\ns2TTDZGojF5fGQDmvWa7rEY11SFBf+mRJc2YDkJg7t9h0PhO4acJU4TJEzn10pPt\nTRsjyI5fa8sxzh9uwCrG61jzO+3iyIf3AmM1wQuGD/hUN8N6SRX6qFCcr7AiLxT+\nSIZIVGLnIwVsNfXDdzZKMI9AFo8x+CIvkHACP4vjXVQhHBKwEaCckVIyvAlMg23b\n8Dj6H0+p\n=2jbn\n-----END PGP PUBLIC KEY BLOCK-----\n```\n\n### dregad\n```\npub   rsa2048 2010-11-20 [SC]\n      EAA6 3F1F 284C A8F5 1537  4907 0FFE 77FB 7E08 105F\nuid           [ultimate] Damien Regad (MantisBT dev) <dregad@mantisbt.org>\nuid           [ultimate] [jpeg image of size 7697]\nsub   rsa2048 2010-11-20 [E]\n\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQENBEznhOQBCADZZh6L+9YH/bjmhQAuqeZUvk9y/Q8GZNMYpLx9accXabL8fnnG\nUu1CERympAKZmSdVvPIuRapAcLJVh/m+i+eQo7QQW8jiT4TwtivfsjPm+gqqyDyL\nSFrbgXDCT32q4baAUoowfVP+stKpnTZLuthuh++DOZfJKKj4p6dy3qUEQf769lWq\noEzS6dHdtJrTLw6h5ORTpZrK4pLyo7w3BlxT4lso+a/BXFiWyQz17m2h63mNUDql\nQ6KahO66jJg0veYsKrziMkaDO/yglMcOXMNoFQVh3ZpYq6oT+7LSfU9u0p1J7BnN\n6fTZC9c8pTz707xJQWHjsKW8sBkI0iqVmVBpABEBAAG0MURhbWllbiBSZWdhZCAo\nTWFudGlzQlQgZGV2KSA8ZHJfbWFudGlzQHJlZ2FkLm9yZz6JATgEEwECACIFAlCd\nj8YCGwMGCwkIBwMCBhUIAgkKCwQWAgMBAh4BAheAAAoJEA/+d/t+CBBf5hsIALt2\n5cm4Qgz3eXTSSn0+Zb/6rf76IcuVrRCtF6G38g9sKvO1TOqAy1wrQOsmBmewKrC/\n89ku9nnZv7rWfwNCo/9LJPQQAy/wdse6jOjeWrSun8Zns+0NZilRvt4e4K9QvMO1\npJDUQGF72wrexYlDXhtlPfkdk2OJ0yEVBsUZPOMF9Z53YMqOsA3geMaphL10U/Tq\nnOiDfY10R/4HQYKlp2waCKjKU8NqqpvNnsQleuwJA352/BDgr5CINKm8Je9BoIzK\ndOsf2LscXYAqPnyd9eD/h3SHVMuE+7+R6yORYjAkOANU8bgcEjrKlDPqG3TW9Zkl\nFwGROcjQxn9MlDVQZHOJAU8EEwECADkCGwMGCwkIBwMCBhUIAgkKCwQWAgMBAh4B\nAheAFiEE6qY/HyhMqPUVN0kHD/53+34IEF8FAl6kD/QACgkQD/53+34IEF+E7gf/\ned+ANT3T9wqTZLo5TTRZugdolb6PfqOn7H3LTUosrXEEPXWXIi1invTGI/Zp+Xs4\nbjXZUe0+mzfa+9hCqhAUyRkSuVfi/rDi/UbTBnlIgsFvbVbGRgiMOEKR+xtr7sQl\nT7DOQKfXKpZa+QdzPR9LenmhK1UYVk6NA93B7oc9kRj4ff4KHCO6Vol47OK+xaki\nETr8S8SAIgXDFtCi5TBR4mUO7QUaIsBpPsT1PNw98gc7mr/Mm7cjES5gKhlEnDWk\nG7YvtzCi6K/zMTQWdtrqhXckRIhXNcxWxSkNehMQ0DGRg838uYQnmdl7v+N/d8xt\nco6tfsyLLxS1vu00N4ZRy9HdZN1iARAAAQEAAAAAAAAAAAAAAAD/2P/gABBKRklG\nAAEBAAABAAEAAP/+AD5DUkVBVE9SOiBnZC1qcGVnIHYxLjAgKHVzaW5nIElKRyBK\nUEVHIHY2MiksIGRlZmF1bHQgcXVhbGl0eQr/2wBDAAgGBgcGBQgHBwcJCQgKDBQN\nDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/\n2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy\nMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCADIAMgDASIAAhEBAxEB/8QAHwAAAQUB\nAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQID\nAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0\nNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKT\nlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl\n5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL\n/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHB\nCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpj\nZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3\nuLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIR\nAxEAPwC4nhOzhZrlofMl9+c0681fTtGgO61eOU/Koxya2/t0aDANcp4u+wrbtqMk\nTPLHtAG7j8q5VJ3szqei0OW8R3X2vUrR/N8xVjwh9F3Hir68+I7Qf3bRax7lZtUu\nLa6gtTsKZ2qMha6FbC5GtQXhQeT9nVAdw+9j0rpSsjm6k2vzeTa28gONsu79K4hZ\nA2pl8/ek3frXY+Jw7aZH5QLyLJyoXPGOtcnb6Xe+aszWkvl7hlipFTBDkdD4S5hm\nbocr/WqF8pbXrogcbT/Suj061gtINkMezdy3PWrDRIDJtVRv+9x1oukwtoYV9aJd\nSFjwyng0mgWssFvdNMuDLdR4569a07S3ildyw3fMetWXCRpAqADdOvT6GhaId76G\nlfxedasgOM/jXNyyW+nxvFIZVDrt3FMV0088UKlpJFVR13HpXL6lc2WqblhlEmw9\nlOPz6VmhtIveHXDW5CNuReFOMVuk4rlra+j0+FY4cb/Q1FNrF27YMwA/uIAabg2w\nTsWL1h/aUhPRbhTn6LUEkqSRHy5FJBrLkuGmf/loEPVt561AyKcHzXPbtxV8mg4z\nsaVoJIkUHGC7MR+NX7o7NcJ/h8j+tc010Y+AuT6BmXP5GtGHWTFCIpi2wfMC5zj8\naOWxXPct+JrKd4be8CDyVhRWORwSfStmNkjMT9VUqT9BXNXuoC6syqSocsvGO2a1\no13DLSMfocUXHFFp1tor+S7ti4Mj73WTGCaGnga6abZEsjfeMa8t9fWohDGGx1p8\nWCO2aVylBIfNOSmEib6k4qliQSRbggDOo9/X+laEwynFZ877BExH3X3fkCallWNX\nOKK5xfE3m3UUUVooDuEO52PU47YorL2bJZs6pqE0KDyF8xifXpXN351LUYnhd129\nSma2GhvkO/ykAHzZdt2KyfEdxc2TwlGBkwd2ABW6hYx57mzokBtdPSFyNyr2rWT7\norG0Wd5dMjlk++yc1qrIPKU0nuOxFqId7SVY5Gjcr8rqeRXPeRNNLumnkc/LnLcc\nV0M7Ygfrj1rJLxpKoLpnrjIqNb6DSXU2IF+RPpTn+VSRVezu4LhVEEyybeu3tVab\nWYFvWsjFJ5vTeCNoq9WJszSL0u7RjjP8JqS4nljtkWRGf5uQPXFS3TTW8sXkqrea\n+1jnGK5jXNZczvbRcKp5PcmlqLRF06jHbo6RoqBqpPqs7qyo6L6AVkrK0qnk7qQb\ntwJrSwrmpa3jtu3yNtXHT+I1cNwjybQCue+cZrER/KUtnoahkuGkTAPOc5piOhlu\nNkeyMKqA8igQRAMFyGb5s7qw4r07cSnK9K0ILhJlDA4dfvfjTAsvHsnYsy7mUbTn\noR1qSRtu5mAO7/awBVJ7nbOgfOFOd1WgzfeXDRlTx6Gi4rGTcXGx8pDknod2a29I\n1qRYMzJ8gbbjuKzpI4/O3bmjb+Eile1yo2OEbrx0NLQabWx28M0U6l0cE459qliZ\nVBOa4Szv7nT7wo653fw9jXS6LfzXM3lzIifKzfKPeoaZvCd9DZd9y4HNZd9IfKUh\nTt+fnH+yareIbiaB08mVozt/hbHrWNp7y4dXcv8AupW+Y5/hpWKcrOxHpw3anagd\nTMn8xRTtIA/tezH/AE2X+dFBJ3Av5JfEr6cyIYNnJ79K5nxGrm7eFkOYyBu/vCtV\nZX/4S6+eNdzpE20e+2s3W5xNdozAqWjUtlcfN3q+iOZBb3z2UdtbrGjJIvJOcir+\nm3c817PC7jy42O0YrBlmWS7t1XBC7a1dAfzNQuGbB6n9adla47u5Xv7iT+2bn522\nCNhtzx92s6xYfamI4/dt/I1YvGLatfN/CQQuapWUio0pJ/5ZsKIidze8NDb5gx/n\nmoJDnxI5/wCmg/pU/hk8uRVON93iST2m/OjqVbRGvqsy22nLcEY8uUn9K89cSXFw\n0r/eds5rrfE84NlDahvvSM7D8BWBbW5k+VByfSoiO12VPKKnbg04Qs23IORXSW2j\nqAC/NW5NPhVcBBSdRGqos494mJ6HHpUMkTogPSuknsh2HFVJLIsBnpQpoTosw44n\nkYIBV5I2jmCD7nc+9TCHyyWTtUyws4HFPnEqbKN1cFpURC2xVCj6960rG4RCqSKV\nJGeKi/s4u+dpNTrbTC5LKuWNF1Yfs5ITUY4/9bEcgnH6ZqmHc2+cn5f4fStoW7PF\nh02uOMVmxW7293Kn3kYnrQmJxaILiFpYR83zY3J9McitjRL/AMmdPOCqGAGfXNQT\n237svFgMvO2oSgMSdurL/OqvclKzNXxFKHeLH93P86zrRSfNIH/LCTH120t/P5sE\nLAk7V21Ug/eXIjOSpXNTY0v1LGin/id2meCsn9KKuWSoPEMRA7n/ANBainZCuaGo\n3l9b6zeTLAQqsUVhH1X696pa9qCm8Usm4eUm4dxxW3YxXNpLcR3kzTxk/u9xya5P\nW5RJqkjbR97jcKCL6bF6LTXcx3sbJ5eV4Lc/lWrpunPYTyEXEUnmL1jJO0/lUcW+\nS23bVTd821OgqyrlDwT9aTm9gUFuchqMzxX06HDOGIZiP1o05UmvYRKrFP48cZrS\n1eHyZGm+zJKjfxc5z71UsHWW+QJbeWP7xLZqovTQlptnX2Nva292wtI3jiYZ2s27\n9ad9iga4Vlt0WQvnzADuJ96W1jMdy3PCrjNPuJhbRPN95kG4DNZczvqaNaHLeLF2\n6wLYEHyVwWHdjTtGtQMMRVDULp7/AFaS4f7ztyP0roLBNkIok7RKpK7LQIFMfk+1\nLgseBxTvL45zWB2FR4xUTwBlxir/AJeTSeVk0XGkZLWO8YAFXrbTt2Mir8Vvk5rU\nt7bC9KakLlM6HTFVWJFLBpasS4HNbaQ8c81LDBtk2YyKfMFjn9QsmRdyr0+b8K5+\nV0UyM8YJ4/767H9P1r0W8tUaBhjnFcNqlntVyo5/iHSiLMZoxpLgO6Opwy0+QKWY\nqMDYGH5n/Gs0hoZQOSGrSh/dt5R+bdyP61utDnbHWSWyoPtiNJEF6K+3mmFLaW5L\n2cLxptxt3Fu9OmicKVj54/rS2lsbaN0kYxmRNwO7H0p3AXTEnTVIJJUODu5x/smi\nr1kFikG66yuQfmf/AOvRWfOFhmjrcNrESvcNIhB+90p91YtPO7pCrDce9VfC8gGp\n2yzOX8wlMlvu1qQl4ZpLaIGRt7HDdq2knoQmU4dUm88QeXGoVtu3npWr/rIw6FG5\nwcHNYKqo10ueitWtpozaXPOG856hq+o07FoWsN2JElnjQLyx3D5fr6VJbadpdu+4\nXMblRuwXH+FZRi2Jqkn96Jf5GqcUarc24Xvbjd+lPZaC3NLUtdFrcNFaxo6bfvjv\nWLLrV7dt5ZYhD6VnEE31zjkIFIH41uaRHDN84iRW2Nu49qLAZVhbm5vTx3ya6mKP\naqqOlZekRDE8wHDPhfp/k1rl1iXk81jUd2dVJJK5MqqgoJU1Re+QHLOKYL1D/GDU\nWNk0aC7WNOKANxVFJhuBzUzz4ANItFuNsYFa9sw2jkVzQuApzuq9bXYI/wBYPzoC\n6OmiiDCpPKCMMday7S92kfNxWzDKkoD0EtkcoLR8c1yupx7w424PvXXSDBPpWXf2\nYnRmA5qUyZLQ8wv0KS5AI9ahNwTOjjj2/nWzrUCISmPm9a5+WLgYrqhqcc1Y6PTI\nftm9SCdmeR9anltFjv1STJTyx97+EVj6fNPDZXLwyyI+0cqcetbvh+WW9trW5uJG\nkdreRWZuv3mFU4gpdBiw2EjbVaJj7EUVR8MxINeZNo6z/lhqKj2XmTzFWz0ya2e3\niEybrlFbPPyY5roYpHaTzJZUCoxGeRu47U37NIl7bfIdkUO0t6cVSS4VLFldwGMp\n4Y+1bXuZ2I/sbrqaMxX9790Z5/GtaO1it90MUnn4dpH4xj9arPC76hbvgfu1GT/w\nGls0LJfMQdu38uaRQ9498V8ArLHIqrvxkDrVB7eSC7ik2nyhCqCTacFuP8KsuM6U\n+cgtJxn6Uy/ONKsyXZSaLBcyRaSJdXzlGXKxhSRgHntVq0QQ216Edi/l46Y25rYv\nEM9vaw7mCtGrYzx1zU9+RHb7WYlFt9oU9qT0Q46vUy9NXydMQjqxP+H9KrXk2xSZ\nZAtW+YtPgRFOdu78+ayntGuZmkmU+1c17s60tDLup9jZYuA33cinWk6Fv9Z1q3ea\naJwpZydowKzFtGhkITkf7VbJxaM7STOnt87R3p08rbcA1Poenu9qu85z0+lSa3p7\nWtvvjHJrDqdC2MG4lcjG/FUDdTRP8sv5VHMJWY5/KnwwvIjL5YJxj6VskjCTb2NW\nw1eZGGXrsNL1zIVHH4155Dot27DY4FaEcd7psi+YuU9amUV0HCUup6rHMky/IwIN\nSgfLhhXK6Hqas6jPH1xXVCZHT5GDE/3egrBqxvc4nxVZospdQMNzXHypjgH3zXe+\nKtu1N3euIEDPdFFGQa3pvQ55rUYFfyhLEzYUHeo/3cV1fhywV/DllM07I+xl2Aej\nt/8AXqxolra6VGJp7YXEsi/cPRawtW1S40/VJoLYNFb8Msa4KqTycfjmtoS5tEZ1\nIOC5i1pNk9j4mZHIY+XM4I6EEH/GiotCvpLrVWurp1+W2lOenyjA/rRV2ZjzFObW\nFjhk3QPG4BwVcjmodMaAKZJ3+d+pZd386lm03XYDgi2nx26VnXE15CP9L0xlH95e\nK1apt+7IxXtY/EjpU1FBwtyn4xgUsV4QrRoICjcEBiDXIu5DKU3bP4QetNNyy5PN\nYNWZopXO2kmLxKhtzsVt3yyCor5oLuGFGWSJIwQMpn+tcet9IrfLIamTVJ14Erce\n9Fx3OtkvLeaaPbMEREVfmU54Oakvp47tW8p1YMipx9a5VNXlXkgN9ea09K1H7ZO0\nWxVcpu4FTLYun8RqlTJ8q/Ko4z/Sq1xasMsuDWgpCrUM0nHauQ9BK6Ml4ieqgVGl\nmjyBcCrkmCaltYwG3VVyuVHSaNbDai9lWrl9YpcRMjAEVFo781qyKSOelSx2PPNR\n0TyHZgmVqlFYtkeX1rvNQgDwufauSkiMM2VanGQuVMbDDdRuCVzWxFC08J8613L3\nIYnH/ATSWMgfAeup0+COQZXrQw5LHP29tbwOpAMKt92WPp/wJe1dFGSiBSwb3Wie\n1iRmDIPm6+9VR+5XYM7R92s2xWuY3iMJKoBGSrCoNMsrO2WOW72plu/vxS6i5n1O\nKAZPmMKn8T6eBbW8tu2RE22Rfw4P86u+liYwvLU3JrK2i0p5IpBIFBbcK5K5sLLV\nNVtWuYzhrYvJtbbuKsBWjpF1K1hcRMcp5Z4qrY4OshAc+VbsjfXcuf51dG6kPEQS\nhqVrK3sW1cxWsUkUL20se1ju2/MFb+RoqPTwW11mO0xAzrt+smf6j8qK67nm2LKa\n6ZkmkeC1k2RsxkXcpH/Ac1zU9zPdTM7ykcE4HT6U8v5WhMejTybf+Ajn+ZqCHT5b\niBXVlVOeaiMYp3Lbk9CosImlZFbO2o5LR1JwprobPTobCJ3crI8i5XH93v8AjUfl\n5hLbf4sA1pJxexkotbnNtA4blD+VMMWG5Uit+W3BhjO3JbvUVxZIpXaDyKkVjDK4\n6E1r+GR/xNQWbhY2P17VHLZfNtww+q0kEc1lOsyE7h7VL2Kho7nVytjFVpH+U1JN\nJmNW9RVKVjj+lcttT04ysh6ZklUcYrSARO2KwzMVOKkTUXibDnelVZj50djpcyE4\nDBa3DPG6bWkQY715uNTCgtHkEdqYut30jbY8Ae4o5WHPE7XX2ENg0kcgz7Vx/nFz\nljzVyW5mns8Syb8dayHk2vUqLHzo1beYxsDXTadfFFDA4NcXFKCODitewnO4LTYc\nx1slwZFyTVd3JFRQS5TBNO/hrIVzMggmbXEnZB5S5bNa8lt9ttUC8ea2dx6Cqd1c\nLaQb25LMqqPr/wDWq5atCAsiS/J1KGqSKjpqRQ20NjC6K27DfM3asTRQh1C5mzhR\nFn8Wct/SrGr668N8yJAjQYH314+uar2uo2BDBU+yvJgMVXcpx+XrXTTjZXOSvPmd\nivpUTf2gh6jy3dj7s1FaGn2C2zvLDcR3ClAP3fX8qK0OexyhlguLWJFtJjHD/EH4\n55Oflpw1SzEaxpBIhX73zg5rAhu5FkliLt5bHkbqeRtbcpytDSEmzXhuYjM77p3O\n3HCjj9asG6iEG0JPtPfyx/jVSwUmN2/vLitFjstwnPy07oGmVWnh8mFS0ygd/KHz\nf+PUT3FtI4ffOuOxhH+NEpLW1sgD/e+9jrT7g+YwP3QMCi5JHLcWr3AkWSZfYxf/\nAF6JZbV2J86QZPeL/wCvUZdG1Fdijbnpu/xq3cBRMR5a58zoOaWgyZ2WSFdhyuOp\nqtcZWrkhBkdcbdvaoZ13KAK5p6M7IO8TPS5tjN5MjbJPT1qYwwnjdzVTU7DzFSVR\n8696vwJBNFHlwrlOV/2qrS1yttyobZw2AVwat21ugHzSLmrNxphXaFbPOKWDSnku\nBHvwu3dmi67guQsJCjRnbIp/Gsu5gVJiC4qe9tTb2+7zed+3isH7Hc3Uu8mRE7mh\na9QlboaDKYvnWtWzciRdves2NONh5rXhQJGG9KmQLY2bebBxV9CGTk5rHsclt36V\npI4HesmikRNbG7v0z/q4+3vXM6le3kVzNFC6BPMIA8xV+XPua7iziw3PfmvK9an3\n6nKwHyM5Na0nqZ1pNI2ItSnYKswhI/66r/jVtvsk0efNijf1EgrjDkZ55pyybc7h\nmurQ4+ZnVBWidWiuIWx/00UEfrRWHDJbGNcxKzdwaKLDuZkKs80gA53VbRPJ+83P\n92pr+4KsoX5flx8oxmqW13B/hWkncNDZs7pJG+Zgvy7cDpWgXBTlvk9SayLNIhEV\nbdj2q3IZooOvyN91/wDGk0NMe6F44lSTcFbO3ipGRjHvYbcd3brWNLM6uM7Cw9hW\nnp8xlt3BVB9FxT6ErcYhRpvNPkt7A/0qWSf5t6Jgb93A4H61PIqLGhyhY9FKbjVa\naCdiP9Uob+FywFJDZLFeGfUHVeVbnO3FWnHGag0+2RJt3lxeYO8bMf51duowhG0j\nntmoqRNKM+jIPLDxkGsyeEbtrLWmjVHKuTyMisoux2plIzXDAA3cuB0yangdvMVm\nnldl6fNimNtDfcqe3YKwwgzWl0Ncq6GlbW/mjmMBB60t3CiR7VFTxTHZz1qvcSbm\nIzWMm2DaZmxQlpjWixyoQUlvEAd56VPHHvkB60EFm1Gxa0LePzXUD61UQbWC9a2L\nRAqZ70mC1LCqYlLe1eQanbTW128dxEyOOx4NewSQXF1E8Fshe4kUrGo9fX6VlfEr\nw61l4e0edk3z2y/Z5pAPvfLlfw4Nb0IaNnPiH0PInUqc5OB3FIJugNWHQ8lfvGkS\n3DL5kvyKO/8AerWxyEkCb1352r3NFQz3DNgKAsa/dC0U7DJDO8ud5zt6U9TuPoKh\nUHn0qwFZVyFNJDRPbyhBt3MvPatS7yNKU9OBWZbQuy7/ACnfntWrfxs+mKuGB449\nPrQ0CZiqxAAb/gLCr9tO0MWxirO3T2qk6+SqjBZsdTU1u8ygMhzn7waqBaG5FHFD\nCs0jDe38TU5CzsWjZz/uMv8AUGq5us2ahEDSKfmRqntN0qjdHtOeQhxiosUSxIy3\nCF2kBHZ9p/kBV+4hjmhG2eXafTHNUuVulGxhz3bdmri72hVvJdDj7o4H8qGJGOBt\nOPQ0pB7GoULNeTRAE/NmpuhrCUbHbTndDVhLHmrkFlkj5uarBtvTNWIp3Q1Nma8y\nLvl7AwIzj0qCSLdg9KcLgO2KgnuVL4HPr70lFkykidVyAuakWQIMA/jWcblQOWqa\nGRS249Kqz6EXubFuApB6sa39OtJ72Ty7eMu2Pptqn4e0SfUblXlVobf1ZeX/AN3/\nABr0ywsoLCERwRhV9u9aQoN6yJnXUVZEehadBZREgA3HR2P8vpVXx1p41HwlfxYy\n4iMigdcoM/0/Wrs04tLoNjO/+GrMMDXMcjTchh909661CyucMp3Z8vSWsMbeZv3j\n7wUd/rVG5ZpT834Adq6/xNoMmg69cQLG5iDFkLDhlPSsO5td6749v0C4qJIZi+Ww\n5WirUkDIeRRUAW/s4U/MqfQLinXO0Rxqq4+XtWhNavLbRfOimP5fmOAaz54fLbfI\nwO3+6cihFNE0EIhtVP2hgTz8pqzLBJLbZmnCf3ef5062e3EJlYZGdvK1cliimtzu\nH7vGaJSYkYVxG6kD7TuwvrSDcpiG7OR1zT5hbu42gKB8oy1XLWzglQEjO3phqSY7\nBqIVLRHAG77p96fp0kYRVO5TnIqzc2qTxIjEjb0qs6JFtjAzt6GmmBLCY3lXaZMf\nNy3Wo3+zgKftd0pKggDpTbeUx5yD91trD1qe0glupN88BjtYhy5/ix/CvvTUWwuT\naVJLZwzXTyERZxHjhnwexHIHrVeN5Li4lZ8KWO7aB606a4+0Nu27QvyxoOirUUMg\nS+UE/fXb/X+lE9rGsFbUmZXGOAfpUbO3pzViXgkVnzy4zzWCZvYWS4ZBgtxVN7tu\ngoSKa8mEUMbSOegWus0PwM0rCXUSQOvlqf5mtIwb3M3JI5rT7W61K6SG3jZ3Y9q9\nV8NeDLeyVJrxBPP1AP3V/Cp4dJgsIk+zRCNV7KP1rorSdHhEjMBjrW6ppK6MJVW9\nCS4g2xq6cbPSplvg6jy+XPX2NMld7pfKiHB60WcC2EhV+c/xVqlpqYN66FsWnmLu\nlOX7e1W7J2VzC/X+E0Kwz1plxIkAWQsA46D1qdXoVsYnjbwp/wAJHBCYZFinjzgt\n0b2P5V4nqmk3Wl3Ekc0ZSWNtrL2NfRltK8zebJGfQe1cP8RPDU2owSajYAvLGB5k\nY/iUdxSt0C54xKkdwPvFG9zRVo2ebUzkMJAW+nWisuVlGs/2i9UiIFIx944wzVjS\nWzxwlJ1zHv8A4VO6iis0WyZI4Y7XhZAjN3U8VexiDOCRt9M0UU2SjGbDOQy/xf3T\nWhZKfK6fpRRSGXVid2UKpJPoK3NO8DXl9Osl232aE/wkZc/h2/Giit6cUS2dfZ+C\ntF0lGup181EGW845A/4D0rl/Ed0b6UeWoS3T5UQcYFFFVLYcNziZ28mRyV+9ytUk\n3falmb+9RRWT2N+pqSMemM1dsPDM163mXBMcR/hHU0UVMEi5trY6aw0aHS5QY4wF\nb8zXUQKgUFcY9aKK36HJJ6i3V3FChQjezfwis62llMyiRikfr/n/AD1oorSC0M3u\ndTbzpHGEQUty5kibH3h92iipe5XQpJrawxiFRvuD91c1YtlW4vUa4l3N/Fnj8B7U\nUVo9CEdKjRqo2suPrVeaeFbgZZcY9aKKwW5bOK8X+C7bUbKe40hEjumUkxr8qyf4\nGiiiqA//2YkBOAQTAQIAIgUCUDkCswIbAwYLCQgHAwIGFQgCCQoLBBYCAwECHgEC\nF4AACgkQD/53+34IEF+J4gf/V5B6JfGJYCzfm+1WR9sTDf39JJombFh6hDjY7OmT\numpMKVE/rwRtKalZFglBB+opeqMgdViPweFtkB1kd9DvuDZzI3TWe+rxI79cuARh\n2IThhVfqv52CpcMp6VDcyuQFKWfgVrhB+3ugUxFeLML8qnq+DCeZ/BqQPKJwI4MQ\numG2MhE2DfAqa05NGFdywyUSKfkjBhjqQk0h9rgnIapBK2NSdvTkGlJIGKX72h4t\ntPKZyjRWXNhc5/FisjoDrQ2WfHV351N5XcXmCUvEqmDeeYXliPAG/BbgMoNKhCRh\n/BHgJ/C6G3H1izyFU4/PZzOVMd3m30zzMGFFQgYKLPAfnokBOwQTAQIAJQIbAwYL\nCQgHAwIGFQgCCQoLBBYCAwECHgECF4AFAlCdh5ACGQEACgkQD/53+34IEF91LQf8\nDq8QTJvWTrC8du9cDwiupI71bmDX5twvV8FpskOALshoRa/6qnJAzrpHnv5e9ywg\nKTgVOcAy9s3LResPg3ytUlxZVVZJ4gu45FWqED8bqYTV8TLbakw6uSSyzZ6ayIMq\nwvdWsTkC62JNby3Fq3WLs+/lUYceYngaUSNkCbLxyZC/o1nX0uA6R08NbITiFYUz\n3YO1/hAca7S1cWZAXpv7oAPRSda2VWVdeObaBJYdAv72GoW7PUPw3wk+MFhaaTCD\nb2zWbdG9xNmZQFfzmjMglgFLGzwkpfXKxUKJa9jgR3lhKtoPcZTBkXsbi/ORB/ar\niJQTM0eouTGBRRr/wkcGTbQxRGFtaWVuIFJlZ2FkIChXb3JrKSA8ZGFtaWVuLnJl\nZ2FkQG1lcmNrZ3JvdXAuY29tPokBWAQwAQoAQhYhBOqmPx8oTKj1FTdJBw/+d/t+\nCBBfBQJepBBpJB0gTm8gbG9uZ2VyIHdvcmtpbmcgZm9yIHRoaXMgY29tcGFueQAK\nCRAP/nf7fggQX9OEB/0VJZTcNu8UgFGgn0bfSgHLEGayvehgkbQ+WQrxCVxa2+my\n0/P+F4KsBSB4iM10bGzCcafwXOzp8Zh/28yz6WhDwuCtmedloRHPUKkN7exWZk0Y\niBggQeuio9DH3lZhLtP0LzUYlozKdGz6BVYW4cjAEVvGc2PmUri1Jfjzdt0C5GyT\njKX9JwEzBp0LFexo5jlA9UrORAcIagyVUWV8JMowwy7Zxs2R0YGJx3PUPjjzTrdP\ntntMjISblYD2orvwHFn3zhRFAgFyPrQOLOoH2k10uUSn1+rvyr9QsGI3Z8t3ZipW\npYP5SzLR2vUkVndsoR72xoK2PyRnC8j0zSkt85lyiQE4BBMBAgAiBQJQnY2RAhsD\nBgsJCAcDAgYVCAIJCgsEFgIDAQIeAQIXgAAKCRAP/nf7fggQX1UlB/9pvlOdk0lM\nh8uwEWtGLTTIYZNA+djdtPx+FYSa93kzwA5NE/MMREwUl9gL9bzS/S20KszUoVvw\nDJmCfe2euG+vPqXfIAXuPrldZ2BWqRU+akfeN/fGvTH2KIB0D8P0vAda2tuCIWcS\nSn/nhGYZa4rdx/8NoNEVDmpyYf2R84ygqSRwibZ466soFpEBhSqtBcO5EYqxIn4p\nsrH/D1GwDqhOl5KIcsayrf4x+oIOW1ci+FHSC2ripJOT0ErLXj5VXxgslyiW5KCH\nd8PYXqmC/+XSnB9I/z4Z92Y9D+MENIoFDQ9es4GXq6uora2k7+uT8uHI8DfISaUs\nbVBR+hxAY9RDtCdEYW1pZW4gUmVnYWQgKFBlcnNvKSA8ZGFtaWVuQHJlZ2FkLm9y\nZz6JAU8EEwECADkCGwMGCwkIBwMCBhUIAgkKCwQWAgMBAh4BAheAFiEE6qY/HyhM\nqPUVN0kHD/53+34IEF8FAl6kEIYACgkQD/53+34IEF8ysAgApIEwUAyQUBT4RGr0\ne19Cxwp0G54kctcRsgD7naxgv6HWJoh5TeFmjwO3fXGEYOACSBMFRQaIYt0dKW4W\nW4pAw3Q9pusNv8ERE0LAED3NMYtj+ivdE1W6PkjTZYNs6X1YZVtP9A8+MBslcMhc\nPF8AMHC+pfgUcOF3l4ZJ34GCMYrNmFZaVaoKBzzTVgeQzquPU/xIn5m9lrOjNDhT\nCzKXyQifgPf/6EVahqqcLNdfyiu4zfPKXVI4koE9TqpCDyqRwwlxm6BgRiL3ejJK\nMAK9d0tW/GVaLRYG9J+G7JrYDesJANXVgY8xnoIqRr5L/pDgabOyCnJqRGIHaS/F\nDPdaI7QxRGFtaWVuIFJlZ2FkIChNYW50aXNCVCBkZXYpIDxkcmVnYWRAbWFudGlz\nYnQub3JnPokBUgQTAQIAPAIbAwYLCQgHAwIGFQgCCQoLBBYCAwECHgECF4AWIQTq\npj8fKEyo9RU3SQcP/nf7fggQXwUCXqQQhgIZAQAKCRAP/nf7fggQX0KCB/9QYhUA\niOBvX3rFVnmYS+kmE3vUAKnViMd7gOoZunuyIW2+opLvvZt1q0gMmYl0YiUwT0qB\nCPTiIm7slMJnmfwsEyJu17/m4eVn4UfFut/cVm6Zq+9+ekQV++hmtB7f3Js2yXxz\nwi8nOHzMS2E+UVzzEMUXbdkhcITaXfQJzBC1+qOFsZSkbsz7tVBLY685lZPg5wtY\npUqQgrFoDrQeoqGW0J2sGH4fSRm20HjHo62hBBAHi09hPztnDLCC2xUGVd9J9Jgy\n6EZwZS8OIxu8lPIgP6lddbrcqGmG96I5zraWQ3RBBXRKij+tRP5pbyrxAtwrGf+Z\nAD0yRlcMt+TxiDIVtCpEYW1pZW4gUmVnYWQgPGRhbWllbi5yZWdhZEBtZXJja2dy\nb3VwLmNvbT6JAVgEMAEKAEIWIQTqpj8fKEyo9RU3SQcP/nf7fggQXwUCXqQQeiQd\nIE5vIGxvbmdlciB3b3JraW5nIGZvciB0aGlzIGNvbXBhbnkACgkQD/53+34IEF8B\n8wgAo+FtIEg82E1G2sYln7ijy0j951UrueZoxY8smryNrRU/5cAU9maUd9+MC8L4\n8QjWNvttinfhMFiw0A+beESPzt17u0H8b6+vz1PC1GDp+kt2ySGEirl+seU6fgVd\n/wsHT7xypyXzac0jvdx9W6PLsC5i8EsWfm7wpRXZn0yZhx4RkGiSdComuiLPKTFG\nsk380003tu/ac1X85h8YHnF1ncRijMFUKh6T7c+Tzz916qaRSnxexMlvgj7xhYFm\nxXNSF1ODm97ARFuQRRpo60B1zBwzlc8k3QedPeKQh0OZxo/3f4D85ZlO/bxUai4R\n5tz7QZcFUEkG5C77IgblpqQ3mYkBOAQTAQIAIgUCTOeE5AIbAwYLCQgHAwIGFQgC\nCQoLBBYCAwECHgECF4AACgkQD/53+34IEF80/wgAhTwLO8f7iiaIbdIJvAQ4uH/h\nRs5oKegwsiNGLcOc4/IwGelvN7K8445c8pwA1AMhPgrtm+JL5pRenRnRKwHGrznO\nGR2QPNM3IQzMPUbgu9t1qSywDtxGEgpo4JJ5uowPfcJ8UdNWCuFVvvs8bAd3RVC5\nKS6pc3QtW8TJhT7x70TSTjgxrgvPMm1JtHIPvUuYilcQ68J2/+0zan2WZqfWuC2T\nXVMoe2AcW0tX48emShkQo3bWYiO1p8P4d+7CkRngV1vu6Sl2L4IZMKUbYUwwYJu5\ngHuQLT/ZiJ620qQj36IQnC9riwjkBhW1sr+IyglI3Ezzsvkxj+O990XKjFLI9rkB\nDQRM54TkAQgA3zXciFE+FjtzwJvaB0fv1mu95Avd4Y8OIuAiaJah0UZpGoF5eyND\neBs2MdWbKJ0XhYaIFqMpTUSPyrWllY3ZyABFghmvlkDH7QbX39LDTkmS1t0S0Nv/\nbCwrs4rGujWr19cTSs4MP3pYJLevjsN/ZTIMQw0o7lirhgEEanehOBb2ol5iwmDV\n2DdNUNfnSIhF8k3PEbaZ6s4HNhnMtZwlNhd+qmQZURTqOK9BDBeNtzozBNu2segD\nupdqBcvBRQTowHw8tJhcFJxyjfEXMxuwx/rxiKfuvU/7KxyPpgKFr3xtHnCra7Xd\nZ5CostjDkScnlp7j6EaAE0hlXwkcT30wFwARAQABiQEfBBgBAgAJBQJM54TkAhsM\nAAoJEA/+d/t+CBBfJNUH/jQkV71vfbG+U4rjB6txj0RQy+Q9yuFMBifrpSA5SCSY\nJz632HCqe/LrKFYlGgBasu3EYoKZ7XoZ9k0s2EjOMoy1L1licV+77WLHLZovTbq+\nhczNQ0Hu0kUX6DSK9UUibeVAe+PHX4T50QaRH3k7YVtXfRCiRUn+vWpkpQV5gsSo\nSFgP1X7LDnjCHd35m8M97paplmtiWsgHt3QbFrOIla4t3MloAC453hRS7xL/vCS1\nonKYBh4pQVHQmrEJWodKSUgBqZ3lH88KG15KleOwAp2m+AgoobtX/gTOe5SwX81K\nTHmHhcJsZi5JnurOs68dN/lktqgKWslHTg5W0DF+xHQ=\n=iLrs\n-----END PGP PUBLIC KEY BLOCK-----\n```\n\n### jreese\n```\npub   dsa1024 2008-02-23 [SC]\n      1D5C CEEA 92DF 2E3F 7267  BA40 D53E A311 DE61 84DC\nuid           [  full  ] John Reese <jreese@leetcode.net>\nuid           [  full  ] John Reese (LeetCode.net) <jreese@leetcode.net>\nsub   elg2048 2008-02-23 [E]\n\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQGiBEe/olYRBACVdv6CEyeShbPUPZYnf6+l6sqaTHNAupf6YdGgJKN7mq9reern\nwmTvgxaI6RJ1KFMnR5QMoM8OJJx+uZKpabd7KGm5KKhhWGK9dNK0Rh+1J8m6j859\nn/3B/oa/nVU6+x8u9bob4QiccnT/iyuO9TbTRQAGf99unuz3ZJlgMRfcwwCg9IWB\n52F2Ior9WEgw4x4DSHIS6EMD/iycV7jHAMVA27iWs+FrFzkoKGU4mTELwpugZpym\nbet8eWlldwvZpYxGBatsVEUKDyAiIx3mTTEFn3bh3vY+R8q6gZRAatQ1sQlA9LjE\nr4G6pTQkZjq9Y0X6q/FMW1G/qSqzk4ocagy4C9LvBGnf2nhvMoUL9gJ8InX1L5Ud\nG5G4A/9Ztl6w5rhwLmVQh1Wjy3bNcfRtOmzJ8pcramy8p4ay3ku6DiIdTPRP+zks\nnB+1BBkqFdBmOdKmTY2olYe7Y7VVkKIfjjwgmXmlMjNowTX1tjJmEKGNG0msGtdz\nTOYXDTi72HC0P1UKSnTVwxoOrCp+J7S81leeKGs/6bqj8OFiEbQgSm9obiBSZWVz\nZSA8anJlZXNlQGxlZXRjb2RlLm5ldD6IYAQTEQIAIAUCST7GlgIbAwYLCQgHAwIE\nFQIIAwQWAgMBAh4BAheAAAoJENU+oxHeYYTcX2sAoISYx5Pqvhs+KxILb/3ypl/q\nod/1AKDo3qKJ2n6Emax6PjX8fkLh6JsQ7IkBMwQQAQoAHRYhBOqmPx8oTKj1FTdJ\nBw/+d/t+CBBfBQJepKTrAAoJEA/+d/t+CBBfhDcH/2paYJ/TD8fiaOMzhf7NsbYJ\nXvLnfWiSZELZwAiJd0SeeUZke7txuKyEhG3KUWOJfkQF6pqi4yjNSQo/JqHxuzxq\n+wiW/pjIxa5mtC0a2Flks4ZpiUNBoB+l6JCQ/1YMgDRfXYcgz1/IDHkSN93YUIlK\nkHDvHsUaMwPp/WhFr5l7SC03sGKkL+MGyH0vDXuFFCI+wBv4f8vT983MMqrsju9J\np3XgoGhBxD1m0gBT6+sIRKpSlQ9yvTE/0X+g8V8Es0AdRIzgD6piY3/tUUu6s68u\no+7kKWoH2gIT8/5kxLCK7ITbRwQW+JuIPhyAFyMxNASeXdDHTwzy3WM7mHVmcTG0\nL0pvaG4gUmVlc2UgKExlZXRDb2RlLm5ldCkgPGpyZWVzZUBsZWV0Y29kZS5uZXQ+\niGAEExECACAFAke/olYCGwMGCwkIBwMCBBUCCAMEFgIDAQIeAQIXgAAKCRDVPqMR\n3mGE3Bb3AKDVTdcs6zVhiyjbum0hISJSLDiw0QCfU38jvZBdgNT641iUZk2zLDa3\ntJqJATMEEAEKAB0WIQTqpj8fKEyo9RU3SQcP/nf7fggQXwUCXqSk6wAKCRAP/nf7\nfggQX0D9CACmQhz/H2ikMOR+YmlpStuFk/h9Azv0LLkRYfVgalAkfTsH5yytAaQH\nc1BMgiwzBxaQqhvHJaNQ9YUM+d6DJHNiWDpsDiZtyWdn2QOzE5U8I7TDz/njIs7h\nTS3+aid8Bw+EvETCvEewSvqMHU1DZQO2OJVlB2EBCrz9uL/E881qsea6vWb7+gfn\nSt3KJoJymwdwsgUvVqrAy0F99cEAJuq8+d0/x7Cl/3Pj4BMyIh9JXFSmKQPipmC4\nR9BnP8J9yQOc0pR5tqLFEsGrYH9c7J8G5m3Xh1XpYZp8p92ks+3pl/+Ozl7T3C5A\nD15WHwxGISgelxNVpy75T0zdEENQr9QIuQINBEe/olwQCACzzg2CHEA25KT1ZWdz\n+ks9vSpGHT2vXHTKh9o16V77MdTehrCa1jt6aUFbMKDSTVtQp0V5UYmYJ5FFnA2/\n5BdoojUFRch9TuS69He7NdoQc9GU7PLb6CB/WPciSplzmPQ1vwDxNvsx86GcRg/E\n52wJ52FWxNvGV7LVObWVqwTgW9bJzQaygvT4CJ60nq3CtGlIe/i71S/DItTASjDd\nYRmZRLoE6/xL+sRPuJKaF75qGEBJTc80o7dHsnMDlRrEgrQMJXW2PM3dxKwTdHkJ\noSt+I4a2iWZ4hrrSQHeYgNgLf3k6mIGlPx3erNYV2D4jeTDJVfYl6Oji8peoxsAM\nWx7jAAMGB/4ozG27Uyr2Xmtup/T11g4godFxYDz3o6JjnpIwJpQcncLSf39cDYUz\nHopd/MK3zuugo8NX5M5jNbUj4224DEyRXNFeLmeuxdcTpQwlw1e6AhUqkx2LlQDM\nmofFGX/JWLU0XrzDmhBWdedaDnmJEazx4wqVuIPV2LbMRRYl59wIA6fPXBNiA9i6\nzCKld8fwB8nOqZiB9qO0+kWy6wvAi+FnrHhUmvHHWCL0TlmyGypwWXjzcd1B7PcJ\ns8HZCThSdU+HXCCXVwD53gxyMh8Tv/so++RIKszhNy71JaKliENo5jQeIl6dzDal\nT/30XBDnlibGrQvydEUaUrec979V0ugoiEkEGBECAAkFAke/olwCGwwACgkQ1T6j\nEd5hhNzvywCfbE9m7CT78vbCmud/uGWCawJdd5wAnRf5SKDZUtQ01+ve1q61aCt+\nj7Jq\n=oym2\n-----END PGP PUBLIC KEY BLOCK-----\n```\n\n```\npub   rsa4096 2011-04-05 [SC]\n      9A24 B14A 6239 AA5A 4507  08B6 71FC FA26 C45D 960E\nuid           [  full  ] John Reese <john@noswap.com>\nsub   rsa4096 2011-04-05 [E]\n\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINBE2bKT4BEADeIl0g22z4kkif73KtxUNkd8Gai+9IMCgy/bLWVNSHV2gUFDyf\n5XdpJOMbL0UJgHw0YJLDeGF/CEhJwGJObsEhTKI8Qw1XdPyyVPG62zp6Ai4w+ID+\nLF5i7a41QVXwTl4M/vW5iP7NV7oI/cLjQquNWZDk/+fkKkVAJWyuAjYXh8dOget4\nAwksIti2zlRqjasCUxvpGBGGwNjRxKINlNRkxzkbQ/555I2qGgcl/p400SjNlEf9\nN6JGlXLaaOU6kOL2aaOICPMjwHIlGcGUxCo8l4SY11kBhOdA7Hr3ucD6fEdKnFa4\nQHD7IQOBMoUA11386FLg/TJdd4XAWaNQiHa9fZKOvgWygsKp4xKWWeoNfRJdCVVM\nIE30UKxpc+fti/sPTZGIWFc8bFWMn0hqgHgkSLG0fs3OM6XqrMZM+iF86xenGloE\ns+1nUmlMEv/kwqGLz0HKkDtdVWM2THXdEyGNl6tminfzD/Qu+SnfFxR6yKmehtNr\nBt1OblmTpNtg7X6nM6ji61Vs6X0UOzCTROlsJqOGhK+m1mLVGNt/ntRzSqoq9QKQ\nPx2KjkMqisgu/o0yQvLj96HEiej7i7TOF6ufxMlNuwT8kFm4FU5IfIauMvt2zRTK\nyVePAlaJ5YXgFE+7Wf5DUVy9qqrwFntdTsYrEmfb5QLUnUfKWriPYH9q3QARAQAB\ntBxKb2huIFJlZXNlIDxqb2huQG5vc3dhcC5jb20+iQI4BBMBAgAiBQJNmyk+AhsD\nBgsJCAcDAgYVCAIJCgsEFgIDAQIeAQIXgAAKCRBx/PomxF2WDjPQD/oD8WG6yjn+\n6AgBk+g2ihY2xM+YfKzfAzJEk9e2Bzq691Jq+Z5uvtjCF1kXr13lR7d3ivY6Y6lZ\npeBffAVFFNNvkDTj6/Lz8LZc0zVRcsu2pqbV7NTXDJ64EMjVqpYUwfA1lBwUnPb3\n7cKFvb4BS9aOQ0coYf5oB2PdjBBY5FOHb1jg7rQf8t65n5z/thmEhixralH9iYQ6\n8mqqlqWXiUtiUL6yBqXF8JA5E/h2EWZWeZ+9cHp9LkoGsQsWjofAGsdx1WR8/q/Z\nURjXZvaWt4zeRrbR8tddm0PMJcdvajZ1rlnfPDxXyfgiKN6PSQdF7ufGxAdatmLN\npkt7BIPaqjSrNmGYoWFm6dO9Qn0sN7uTuJ+bIo47nPJmbbC6QkAZS1/dVrAmoEHy\nW+32ebuxVl/0DOXYXibSED47GjtZ1CbiFkeSlJxtbIkInhSDjikkTlwXvNaNBRLF\n3WyuOUzedCpTrBJAzhnoUYvVUESybnH3Kq5hMILgkT2yECh/afMc07jw4+QCMsrA\n0YD0ZTV4MlPrZ+TWwHtF+QHfbWtVb0/jMXFjWihOwOoYeLpKWo1fHXHgCQUgpiK/\nic+giuJseCEvFRvMWRetIVWHFqM/bEqfZ2rwlWynHFs73hmBSQtU4ab6M2Tyfqo+\nPgPwBz9LPtQyNJ+dpR6F+LfQbYlO/AA8AYkBMwQQAQoAHRYhBOqmPx8oTKj1FTdJ\nBw/+d/t+CBBfBQJepKYPAAoJEA/+d/t+CBBfw20H/A+tZSHkKCXUNRiK0KmVztrZ\n/fFNMJZiO0PxW/0kvZL6bvdsb/UURal8w+q1q135WQ7KWG8Ukr/JPfMh72I3q08u\nJ9xpD5t1RTseiOnuKZVxBdoNlOGA3QTPt26KNKsstCp/2UOLxrGr1ckIZQCJJnmX\ni51127C3VfPi+A7xEtb19vaW4lFFq56p8Wwkp6wkmBGcbKqTZxDtXn6pNS8FtJBd\n5rDqBftnM7K7BvbIGQF6nmu+KYK6ibXUmYiVZpGejSuQ5+H/RIbynAdEL13lnCHJ\n/XOE1GW5sSMJyTIST/0+drrTfkPk69HOW8XPS0ARHs0MVuJwBW3IYnhdaz0/6Z65\nAg0ETZspPgEQAJxlZtHtzc+N7obLSKQGU5LmYjlNDf3sOUg57Bl48Eif1s6ygcy8\nGnjs4j8+o1PPWcm/WX6KvOInz+04U/w8Deh5mzKACgp65nMMuxqp8mEOzcJE98DZ\n7yg3mR57joGgXfq4ANrmFJEZa/UqzOZQ+5nBZmI64kGZCzx3UWvs2YbI3FOmfsWL\ny2v22gVb8T4h6IWMyWcGB3jzlGt8M4DHjBJC0zzr9Kxx2GVO01ML93KwNiXvMx6K\nAzjscALrjDtKZXymPqLi+Z+ZNZlBWDi0Orm+mZwFwJsZCPHc30F0DM1SLHXPbqSt\nE2k5dIIf7Zm1sgC80fq8ZZR7vQmqQshlTiP1jD9viuLqP2cAg5pOuN5BhHRW4jJS\nvQIhpkL6uoVuhH+THib6+YO8eBYNRUvfeWimybxTKXG70hnst1GQ0oafm5BtDVJ1\nDnDgnxpkoNKZkyyL9h/ESiThHnDj7pKI0Y+XbI0Ceg1DxlvEOngbTf9tbA4JXgnu\nekiTQxokSJv3xOWC+YYdMHBX+E6dvfD3qC3oPRTkemQ33Ar4VCHLVHOT+IlY0Hbl\nc/X3uuAFDIoAEAWCRTy6aoGE21K5oQnbETaZXCEjYOWeTDAerKCsUjNgGp6BBl4P\n+HwdaRr8jvmpgljoBRk3GQVXoAc6FTCTzWpC6wdjATlwe1xrjys+poPlABEBAAGJ\nAh8EGAECAAkFAk2bKT4CGwwACgkQcfz6JsRdlg7gBhAA3S4O4vslvKTUWfWQl0Lb\nwzrhhcl8JCR3kxcoJTBMikYYJD11TbkbBIa5UVV7l1nTYTasBYxcYZQAklyb12Vx\nl2ebsBn4HOQ8a5QnreMY+rUrlAi38+OhKuFteaTOGOUCvqrYEtWTxXtBYO5lDaUN\njWtjfxVgR+YXuPcbbzifGz+TnN5g0HUMhJF/aURJ1/CUQSWVfBBlaGTd8BMZTLPA\nERDHZ8iLufAAozqJbsMqh6M8S7oV3UtvUG8qz8j2yZOTYeauhGE8+PlpMaDaIatv\ndUDn1MPNzkqsJJx+Svn4xu38I2ibAwMY6aOfOetEHP6Eg13OeQASGk5XmmEKtJLI\nPk684CsCLR0axrPILZ/nyrm6Izp+ZXt4C6IzNBBSgkp8ehriYvcOAZ0HaKgd52aH\n9Djo2NjKBITn637FW4NURi0k2Lo7VyoL1Q3r57lLFCqw/WXcu3zq/6bYLikEZcMz\nxmIUFlMlTAI8IKQVKCbLvRez9zvpg+Aq0lUlB6TZPc0KaD8X6TVYL3DTmQutFYuI\n5wCV6goM1QxnevWmuuPzJeO64O5+hhb7LMeGU3S/EepSJg6fTyxwkkSi+EFrJWgY\n6Cgzfhy9l1Qh4wV+WvOZ7cOtNSPPVbtcq+/GXqN4Jh/NlmfVSYvlv41Su52bcIEr\n1QTF/3ROmMEh0OgRlzKa32o=\n=jTOG\n-----END PGP PUBLIC KEY BLOCK-----\n```\n\n### dhx\n```\npub   rsa4096 2011-03-12 [SC]\n      2442 14B5 2E51 CB0F CA3B  9DB8 59E0 E7B7 728F 3435\nuid           [  full  ] David Hicks <d@hx.id.au>\nuid           [  full  ] David Hicks <david@hx.id.au>\nuid           [  full  ] David Hicks <david@hicks.id.au>\nsub   rsa4096 2011-03-12 [E]\n\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINBE17ZqsBEAC8uLSsGOp9gmv/xoE6h/2jiMyjkMEgPC5NEV9v3IDNaOJ0KJtA\nAOv4TCcGpyFIpzAAxBOnNjeyTlnR5LTGBRQd+Qjem41KixHAQ8EY33PirfsAkcdk\nSmLHt3Cd5WIFqC9P16hsTlnKeUwSSzZNfO1s64UrA9/V2i4Jkjzn4lAco5nQ6sNT\niFlpV8C8SRcT4k3MHFrTIKn8wJNHhq+tXwcyeOzspJeUJddpLxlplihaHCoJUZjJ\n08SEgMAOQQYAfrTcT9E47IB2FCh1ir6N/0bgufyXRLewujMuUatyDSIg8cujNtxj\nUSyAXexXxC9THXGb1KW+L2xoqU/hvQ03XRMluvonGfQUJONqdboHjE/slux6F7gF\nW06ohZHM5Z57j0pDf7Kns9ob6zg6FMtx7gKyb0Y10YShHGVNSidcB/Y7W7q8MINd\nM6RKyjZCNYI9bcn0ErcNAzTF7WpG0Gv6zjT10qnaU6gNBOsNCDbS2FGsTMuebaiZ\nIMlFz5LaqycRswmwgU9DqDqdWXRguhexZFDO2HYZtoOQkQYAay0poe0h7Hr8i5MZ\nnJ51IVVFh1sfY7soLdAajaVlhaF144Y6qQmrsrzMaVCGDiK8YX42odmZknL/RzFm\nRteSmY/rBXdrLYPAkgRj0jrL5nd0G1yG1sDKb/3HUjQ2NK8ck5uNNqWSxwARAQAB\ntBhEYXZpZCBIaWNrcyA8ZEBoeC5pZC5hdT6IRgQQEQIABgUCTXtn4AAKCRDmSVXE\ngg1apppdAJ4zdP9cDTDPv/c3hgOywnp2dPwwuQCfdzyPlBD112wLh01SqSo05Gct\nt1KJAjsEEwECACUCGwMGCwkIBwMCBhUIAgkKCwQWAgMBAh4BAheABQJNe2f1AhkB\nAAoJEFng57dyjzQ16ZUP/j3fhS7NppcTqKWTWABgN7hDDcm7+fJGGWAC1O/SbYqz\nxHPBwkLOrcninaL27O5EshPw/ugJClbM9roFvy1hQKztAW59lmbP2+cjySwFgg5N\nP9GBPtLEFw1LJ9Y0cjXU231DQRMpa8wC4Y/bFPqyp+HUFSekD5vVZCB4KrjFgMOV\njfsxEtXKK4kPDWH90TwjX3qRYuDs2sFdmvRRYIjXvf3GR2cMsZN8xDthiDaatjvR\nlRQQiLQXADVIBNbavcWTVzWAnRWbuib87yk93HVMekpUCb2POTP6K3ig/03VruEc\nXtLnm4Kefh+q8djkPc1jWwR3J21sFVqmf+juvX/jvVPhokxUbid04Z8QfS0/TWEw\nxNKXEew4sAggvbB0EZfBtGqgCpv7Fx6BkI6+sKi3/yfPnc4+XtklQf6Xe4mFP4HO\n190ms1JhB9u3s/Ds2ae9RD3n8j0zbfflW4xrBWkXXxqGFuMWJ5afuYW5s3EhHosx\nJtA7AEqji5jQWtqf6/lnBym8Xnle6oKw7BQRyTY+NRFvIWAeLrCadZdRYcVMGENa\nsCNSlJ+gCA5U1kCTMCWI49P8J0EkDamnulkUT5c+oDL6LgXY/a8UT9sA4AX48R+l\nO4PxwtUE9pC71R1SJvyum4eaDdPhECRKQmC2GeL9/pou7SXobFhtyLfdCQbyfSeI\niQEzBBABCgAdFiEE6qY/HyhMqPUVN0kHD/53+34IEF8FAl6kpJ8ACgkQD/53+34I\nEF9DtQgAklrhrTxHJsv1A//SW9Z2DCZ2hxNhTDLIeBYhI+rHtW849EKYJUyUm6NG\nMD0ZC1gWRiQIYVi5nGPVKt1U0jIaULTzie1pIYMEBCa52GhqoO55hkMNFBb4UPw5\nj/N0J78I5l5B9mniW+E5JudRKGpsWVe9SMZdxiD2/tZoFsyyiV6CriunQ1qBcvkg\nFvQgclP2TOglNRrjzEwTYHOwmKgxBqBjnuM409DiRE1DCRH2mQncCr69diJD/SR0\nkTZYHde7v4hFzlEFLj+M6Bwajx35KP00pLFVT36+DTxD3+GZinFCFTHFSe0Zh84R\nDevWkcnHQWiCTGld19eb5oHV1AZJerQcRGF2aWQgSGlja3MgPGRhdmlkQGh4Lmlk\nLmF1PohGBBARAgAGBQJNe2f8AAoJEOZJVcSCDVqmqHMAn0E/Fw5+/zh2xn8HiNqh\nbPrmLh/jAJ9CnpbAptMnZaZYpS8kVKSf7xBYBokCOAQTAQIAIgUCTXtn6wIbAwYL\nCQgHAwIGFQgCCQoLBBYCAwECHgECF4AACgkQWeDnt3KPNDXEnQ//UHLI7L7B/htn\nItVmxmwBRBUXilACdGEr15VZ1laBcYvRlI7NEiJh96fGKchm3q48d9iEeLPtUqNQ\np84qF/T4AgIrSnjSv/F7iTJMLztc8tizGvxKoYenwUUVaKjEEZVUAlAK8zK6IASD\nOVKb5fl8OZZa+RIoU5IbrI25JztGbfUhQ9eXjRcmWWC+Y5Z7bNT7PBOVSa8Ra4Yx\nXAozAtKkbIKYMlE9jUDf8asOZDLqKcEp4yUPjz6LURUUoCRZaXC74cx1WliwfKfh\n0S9IEPr1e1UsZeUfkPHdV17chG5g7rnzc8GiR1OCkaP/AHCI1EPqdm6LaOP/015Q\n24ny6AazDNVxcoKN57Il7IttpbRb4hQPWRfvyrAG+eNiMLcOiN2CL37llML6Qh7j\nCYBhexBASu0GsDMbM8tnwgrT+drHAIEfvSamWeILRA+se/qRJbRIeB4Uq6/4txdX\nsEDr6Vj1DOPMipS1QIHieylzdGWhAqSwjWVLwKTdl9/IiczEA3pcKZXQw/utmZUf\ni05zEc29koiYflnmIkoJQUS/UnXE5vs63HuWuXuOfPnco+Zi5rDPvaSAoUoJGLu6\nnFlTQC3mUHoKtIh9CtKChxHT4bd1AgPmaB2kakFUR9dj766BbQP/ftTQoK0EVA1r\nfdXxYyzsFIzBBWioVNIrYm/dybKyAUSJATMEEAEKAB0WIQTqpj8fKEyo9RU3SQcP\n/nf7fggQXwUCXqSknwAKCRAP/nf7fggQXyXsB/47HXxh9+MWfJ1G4/rjSUsJ7Vsj\nctuZrygrfyDd8YmGcvnZrSkIc+DC25MtHyEjEI1HW9t6D8yvFd18dBpzrGA3EVdC\n30tkcnad+QCjOgwtsR5fH417VJBwIIon8ASTwq75BAjl9qaAHpOry/OoAzKoH6P8\nZ8Lq49kkP12mL947+dofLXecT92OwwDReUS/4z3rF+SyAsWh/3Szcl1wm7AXEe6n\nDaxONJw4iOU0lpoD0FvBcoJobDuQDTx+a05+dWlxvqH2B/MZwQuwRtdEbMPxn1yS\n93JSlJxm6MvBSiO2I7vKk9PbSn5pjaQ1KmI2FnlqDruc1ln8iutz/xJeISzAtB9E\nYXZpZCBIaWNrcyA8ZGF2aWRAaGlja3MuaWQuYXU+iQI4BBMBAgAiBQJOEYUKAhsD\nBgsJCAcDAgYVCAIJCgsEFgIDAQIeAQIXgAAKCRBZ4Oe3co80NcSeD/9BGpDcDlhd\n595ZUcv7deIFp/SzPPNmLcB391xrdWH/zwy/Ubq6usZmgaupBzSvVvlU7x6LZ9Hn\n8JUDgkmgs96qxrS6aTRiiVaKD2v4Gzva/IfaoMdPH2T9Eqxhvaqc2MqW281vprEb\nvQ33dfb3w8393qP5ABqcGGSuLiJH9W3hRyQDfTy60hTgnKrDR29xJRrzYvdF6Kjk\n/fky1xnMKZB/j3CTp7Z3nd4i4nyafXWVOOD9PE3eMzdPl88eXUK0jkfKVOq+BO09\nxRaBOL3PfphsOc6PJHiERNVn7NvHPByxlhwA4VU8hS7zhfH1ba/lfLoZtDw2yngq\nxwKuaQHZ8VgTr0foNr0Do47EZ4kAWhYb09cf5UjS0eeRNg+i7RNE3i1qQNZ2t2DS\nQjQSyDei+qdAX+fKRzsKyD8buIarkmo1hjq5wOS4YY2CqUAhmM/dPEfF7gRtHeMg\n1FkyA2BDgyFjmKlO9DPT0wSPzQZfZJYfUKVzNodUwpQm+mGzo3qMmHLsHsFQB+A5\n+ELFy8ux6I7rKJTjwRiXqWCuZ52MAkZvXANRAM4vocA5fVQbJ+6JbeujlqRAThv8\n8x49IU89A4PG41HaTYCxrqeYbhIpueUDfYL53SEt5OYMXEOxBOHWH2MXSNzOfvRN\ndXDVkEESDyXYo6dOg9Spvz4LIvakeBoSD4kBMwQQAQoAHRYhBOqmPx8oTKj1FTdJ\nBw/+d/t+CBBfBQJepKSfAAoJEA/+d/t+CBBfESQIAM8oyuA7SO5XuR33YZt8rc03\nQYKzOLCrf25uDbRsi99pRKQd1FMJgbjqtAen2Ungksd71T/JKIgySeprlk2ZAcdE\nJR/12V7cBKum3K7zPnS19oYzzuPB5aaVvUvEFAOLFqcZ5rzv3xjBoTuanf2DOsyv\nNG7xvLtJg5PgN+ERsk1UbuTRbmt43bhFkY2gwsGdhdpK9xaS4+a2eZ20VUHhRkP0\nyPEmTcU4UBHRESGu8eTrhXtknuZq6A1NhodRw2mhwzeGoA6cESwpSZzIubKFOnw2\nF06g7euBZ33PFdWOyfhPNI1DuaBYK5onqcikppbP0uSD6v1lpdMSwAvvqPCuPpe5\nAg0ETXtmqwEQAKT+xspCS98Fz7Jgb3Iw+1bH/k45E5l415cZzjU63L3I58rFYSSF\nQOCNvJi+qulhKFroO+DmOiDhmYVw39izkKyBKRNymd3bj+DIFYbrjcDqTWIaLdS4\nrb84W1F5LsoEpy0vJH7vE/52iv6HoP7AKNPpK6YVsS2i1lGiuc05vgeuL0idzbaW\nNlk+GsOj4rrwwlctMdkNA6YSAK30kI8b2oXg38RotiGc/pP105hYpsabKwqtYscd\nf8HnZhFdhlbMaZKuP6fIDorLa+myNyeQHZTl/ou3y3oihM6EPmTliYO9ocqz0iJU\n4JMpr1xJUaNojdR1ukF44zL2rq5Tz1GWdbiT5lmqIb5iIPpSvHg9X4z5MkyWE2yG\nnFnE+dQBYQS6BPTqoF2N0XZxXbRvYH3ptuRFuKir3kcOrlsGDjkI8C/TOlf8xg4e\nwzxXTc+SmWRFRAxGI3TR7c7rqHiMHpr5BrjO1mHmA6KbTiLOOaw81QrsKPqrqS6z\nwCTokXUMn9iPkUeRJbiAzjM7u8MfpHbyNGWIyx8ndbjwdKDUtY08C3jQ/nad5HxZ\nO0BkPQ2FTSWm+W358gRaDZdPKYgNdWuPz55Wa2r5cCUu5cxakuPSddfD4losXwn/\nzIkv1/q1R0HunVtXplL4tJu5umH/hIhmSeSEHIhYj8PT4JpAcjx2ZRUrABEBAAGJ\nAh8EGAECAAkFAk17ZqsCGwwACgkQWeDnt3KPNDUyNQ/9G6aQMyQzO01FOoE7goCg\nEhH36CJSczWdEkOC9TKaxVBpy/G9ADkF0sm0+sHPGGyrd1Lh8YyjLB9zlb/iMPYj\nRmXO8BuB6XyynHa3DwME5/whbXnlmFTSVUL+3YI/nRBIEFIq7zJxqYV4LGqxxuoB\nJZoJ7iLZjlGO7qWcb2zkpgVaFR7wnNXSiOa0vs1duNqTz5Kni//Qr/HcXgAb9maE\nm5HqDxwoSvxmSPfj10zypS1mIcCwMt9cuElASEw06muLOF865hEW80W7cjBXEgDg\nwV7iff40SNPTEZgDu38mb4jP8wKu0vNzM1agN3/cHzLARoqbJiAPi59BgSz3OX4a\nKIa8LZbN+3XCcTbVk2E++Mx3ZySy6+P2z5Lv2/OhXtHQ1E9P3m7ZksDjF9JAyvAf\nRMtv3ezM19zQtRMikaGDrxs3UBOGlqp0AQBZyC+c9bVsnppsuY6NxO1LOvspoZX2\nfHAJdBcb64uXJXRhnOZrvi5dVwVLZqe21Q5Z3MF9Op3l4ihPWGN4JjEpII4Zeuk3\nHPb7mtore9t5EUn7kMGiTq5w8arJFM16BFdohm3U7m5xBe56m7KjWJGB5GJJdCUF\nkgmcYEJG6giRW7yajtWQHsdLdSTw+wL4dl7AnVrBvMjlq6jjraYx+c+InEdJdHRo\nIYeGqkB/xuHgYKFWxfaIffA=\n=aw2m\n-----END PGP PUBLIC KEY BLOCK-----\n```\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 4.376953125,
          "content": "Mantis Bug Tracker (MantisBT)\n=============================\n\n[![Build Status](https://img.shields.io/travis/com/mantisbt/mantisbt/master?logo=travis)](https://app.travis-ci.com/mantisbt/mantisbt)\n[![Gitter](https://img.shields.io/gitter/room/mantisbt/mantisbt.svg?logo=gitter)](https://gitter.im/mantisbt/mantisbt)\n\nScreenshots\n-----------\n\n![Screenshot of View Issues page](doc/modern_view_issues.png)\n\n![Screenshot of My View page](doc/modern_my_view.png)\n\n![Screenshot of View Issue Details page](doc/modern_view_issue.png)\n\nDocumentation\n-------------\n\nFor complete documentation, please read the administration guide included with\nthis release in the `doc/<lang>` directory.  The guide is available in text, PDF,\nand HTML formats.\n\nRequirements\n------------\n\n* MySQL 5.5.35+, PostgreSQL 9.2+, or other supported database\n* PHP 7.4.0+\n* a webserver (e.g. Apache or IIS)\n\nPlease refer to section 2.2 in the administration guide for further details.\n\nInstallation\n------------\n\n* Extract the tarball into a location readable by your web server\n* Point your browser to https://path/to/mantisbt/admin/check/index.php to ensure\n  that your webserver is compatible with MantisBT and configured correctly\n* Point your browser to https://path/to/mantisbt/admin/install.php to begin the\n  database installation process\n* Select the database type and enter the credentials to access the database\n* Click install/upgrade\n* Installation is complete -- you may need to copy the default configuration\n  to `mantisbt/config/config_inc.php` if your web server does not have write access\n* Remove the `admin` directory from within the MantisBT installation path. The\n  scripts within this directory should not be accessible on a live MantisBT\n  site or on any installation that is accessible via the Internet.\n\nUPGRADING\n---------\n\n* Backup your existing installation and database -- really!\n* Extract the tarball into a clean directory; do not extract into an existing\n  installation, as some files have been moved or deleted between releases\n* Copy your configuration from the old installation to the new directory,\n  including `config_inc.php`, `custom_strings_inc.php`, `custom_relationships_inc.php`,\n  `custom_functions_inc.php` and `custom_constants_inc.php` if they exist\n* Point your browser to https://path/to/mantisbt/admin/check/index.php to ensure that\n  your webserver is compatible with MantisBT and configured correctly\n* Point your browser to https://path/to/mantisbt/admin/install.php to upgrade\n  the database schema\n* Click install/upgrade\n* Remove the `admin` directory from within the MantisBT installation path. The\n  scripts within this directory should not be accessible on a live MantisBT\n  site or on any installation that is accessible via the Internet.\n* Upgrading is complete\n\nCONFIGURATION\n-------------\n\nThis file contains information to help you customize MantisBT.  A more\ndetailed doc can be found at https://www.mantisbt.org/docs/\n\n* `config_defaults_inc.php`\n  * this file contains the default values for all the site-wide variables.\n* `config/config_inc.php`\n  * You should use this file to change config variable values.  Your\n    values from this file will be used instead of the defaults.  This file\n    will not be overwritten when you upgrade, but config_defaults_inc.php will.\n    Look at `config/config_inc.php.sample` for an example.\n\n* `core/*_api.php` - these files contains all the API library functions.\n\n* global variables are prefixed by `g_`\n* parameters in functions are prefixed with `p_` -- parameters shouldn't be modified within the function.\n* form variables are prefixed with `f_`\n* variables that have been cleaned for db insertiong are prefixed with `c_`\n* temporary variables are prefixed with `t_`.\n* count variables have the word `count` in the variable name\n\nMore detail can be seen in the coding guidelines at:\nhttps://www.mantisbt.org/guidelines.php\n\n* The files are split into three basic categories, viewable pages,\n  include files and pure scripts. Examining the viewable pages (suffix `_page`)\n  should make the basic file format fairly easy to see.  The file names\n  themselves should make their purpose apparent.  The approach used is to break the\n  work into many small files rather than have a small number of really\n  large files.\n\n* You can set `$g_top_include_page` and `$g_bottom_include_page`\n  to alter what should be visible at the top and bottom of each page.\n\n* All files were edited with TAB SPACES set to 4.\n"
        },
        {
          "name": "SECURITY.md",
          "type": "blob",
          "size": 2.619140625,
          "content": "# Security Policy\n\n## Supported Versions\n\nOnly the [latest 2.x stable release](https://mantisbt.org/download.php) \nis fully supported and receives security and bug fixes.\n\nThe legacy 1.3.x series is no longer actively supported, \nand only gets fixes for critical issues and vulnerabilities.\n\nEarlier releases (1.2.x and older) are not supported anymore.\n\n## Reporting a Vulnerability\n\nIf you discover a security issue (or what you think could be one), please \n[open a new issue](https://mantisbt.org/bugs/bug_report_page.php?category_id=36&view_state=50) \nin our bug tracker following the guidelines below.\nPlease note that you must sign up and be logged in with your \nmantisbt.org account to report issues.\n\n:warning: **Do not submit GitHub Pull Requests or post on the mailing list** :warning:  \nThese are public channels which would effectively disclose the security issue.\n\nOne of the core team members will review, reply and ask for additional information as required. \nWe will then discuss the means of fixing the vulnerability and agree on a calendar for disclosure. \nGenerally this discussion takes place within the issue itself, but in some cases it may happen \nprivately, e.g. by e-mail.\n\n1. Set **Category** to _security_ ①\n2. Make sure that **View Status** is set to _Private_ ①;\n   this will hide your report from the general public, and\n   only MantisBT developers will have access to it.\n3. Set the **Product Version** as appropriate; \n   if necessary (e.g. when multiple versions are affected), \n   include additional information in the Description field or in a bugnote.\n4. Provide a descriptive **Summary** and clear **Description** of the issue\n5. Do not forget detailed **Steps To Reproduce** \n   to facilitate our work in analyzing and fixing the problem\n6. If you already have a **patch** for the issue, please attach it to the issue\n\n① These fields will be preset if you use the provided \n[link](https://mantisbt.org/bugs/bug_report_page.php?category_id=36&vie&view_state=50).\n\n### CVE handling\n\nTo ensure a comprehensive, consistent and detailed declaration of the issue, \nwe generally prefer requesting CVE IDs ourselves. \nThe request is usually sent to MITRE after we have analyzed the issue and\nconfirmed the vulnerability. \n\nShould you wish to be credited for the finding, kindly indicate it under \n**Additional Information** or in a bug note.\nYour name/e-mail/company will be included in the CVE report as specified.\n\nIn case you have already obtained a CVE, do not forget to reference its ID in the bug report\n\nFor further information, please refer to the \n[MantisBT Wiki](https://mantisbt.org/wiki/doku.php/mantisbt:handling_security_problems).\n"
        },
        {
          "name": "account_delete.php",
          "type": "blob",
          "size": 3.2080078125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * CALLERS\n *\tThis page is called from:\n *\t- account_page.php\n *\n * EXPECTED BEHAVIOUR\n *\t- Delete the currently logged in user account\n *\t- Logout the current user\n *\t- Redirect to the page specified in the logout_redirect_page config option\n *\n * CALLS\n *\tThis page conditionally redirects upon completion\n *\n * RESTRICTIONS & PERMISSIONS\n *\t- User must be authenticated\n *\t- allow_account_delete config option must be enabled\n * @todo review form security tokens for this page\n * @todo should page_top1 be before meta redirect?\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\n\nform_security_validate( 'account_delete' );\n\nauth_ensure_user_authenticated();\n\ncurrent_user_ensure_unprotected();\n\n# Only allow users to delete their own accounts if allow_account_delete = ON or\n# the user has permission to manage user accounts.\nif( OFF == config_get( 'allow_account_delete' ) &&\n\t !access_has_global_level( config_get( 'manage_user_threshold' ) ) ) {\n\tprint_header_redirect( 'account_page.php' );\n}\n\n# check that we are not deleting the last administrator account\n$t_admin_threshold = config_get_global( 'admin_site_threshold' );\nif( current_user_is_administrator() &&\n\t user_count_level( $t_admin_threshold ) <= 1 ) {\n\ttrigger_error( ERROR_USER_CHANGE_LAST_ADMIN, ERROR );\n}\n\nhelper_ensure_confirmed( lang_get( 'confirm_delete_msg' ),\n\t\t\t\t\t\t lang_get( 'delete_account_button' ) );\n\nform_security_purge( 'account_delete' );\n\n$t_user_id = auth_get_current_user_id();\n\nauth_logout();\n\nuser_delete( $t_user_id );\n\nlayout_page_header();\n\nlayout_page_begin();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n<?php\necho lang_get( 'account_removed_msg' ) . '<br />';\nprint_link_button( config_get_global( 'logout_redirect_page' ), lang_get( 'proceed' ));\n?>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "account_manage_columns_page.php",
          "type": "blob",
          "size": 2.283203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page allows a user to manage the column api data stored in their profile.\n *\n * Users are presented with a list of available columns (fields). They mean then choose which types\n * of field to include on the following types of pages:\n * i) \"View Issues Columns\" - These are the fields displayed when viewing the list of bugs\n * ii) \"Print Issues Columns\" - These are the fields that are included when printing out bug\n * details.\n * iii) \"Export Issues Columns\" - These are the list of fields included when exporting an issue from\n * the bug tracker.\n * Note: These are now shared between different types of exports - for example, the core MantisBT\n * distribution can export to Excel and Word Documents.\n *\n * The settings defined here can be allocated to the current project, or All Projects. In addition,\n * it is possible to copy the column configuration between different projects.\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses current_user_api.php\n * @uses html_api.php\n * @uses lang_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\n\nlayout_page_header( lang_get( 'manage_columns_config' ) );\n\nlayout_page_begin();\n\ncurrent_user_ensure_unprotected();\n\n# Define constant that will be checked by the include page.\ndefine( 'ACCOUNT_COLUMNS', true );\n\ndefine( 'MANAGE_COLUMNS_INC_ALLOW', true );\ninclude( __DIR__ . '/manage_columns_inc.php' );\n\nlayout_page_end();\n"
        },
        {
          "name": "account_page.php",
          "type": "blob",
          "size": 10.3671875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * CALLERS\n * This page is called from:\n * - print_menu()\n * - print_account_menu()\n * - header redirects from account_*.php\n * - included by verify.php to allow user to change their password\n *\n * EXPECTED BEHAVIOUR\n * - Display the user's current settings\n * - Allow the user to edit their settings\n * - Allow the user to save their changes\n * - Allow the user to delete their account if account deletion is enabled\n *\n * CALLS\n * This page calls the following pages:\n * - account_update.php  (to save changes)\n * - account_delete.php  (to delete the user's account)\n *\n * RESTRICTIONS & PERMISSIONS\n * - User must be authenticated\n * - The user's account must not be protected\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses ldap_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'api_token_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'ldap_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\n#============ Permissions ============\nauth_ensure_user_authenticated();\n\nauth_reauthenticate();\n\ncurrent_user_ensure_unprotected();\n\nlayout_page_header( lang_get( 'account_link' ) );\n\nlayout_page_begin();\n\n# extracts the user information for the currently logged in user\n# and prefixes it with u_\n$t_row = user_get_row( auth_get_current_user_id() );\n\nextract( $t_row, EXTR_PREFIX_ALL, 'u' );\n\n$t_ldap = ( LDAP == config_get_global( 'login_method' ) );\n\n# In case we're using LDAP to get the email address... this will pull out\n#  that version instead of the one in the DB\n$u_email = user_get_email( $u_id );\n\n# If the password is the default password, then prompt user to change it.\n$t_reset_password = $u_username == 'administrator' && auth_does_password_match( $u_id, 'root' );\n\n$t_can_change_password = auth_can_set_password();\n$t_force_pw_reset = false;\n\n# Only show the update button if there is something to update.\n$t_show_update_button = false;\n\nif( $t_reset_password && $t_can_change_password ) {\n\t?>\n\t<div class=\"alert alert-danger\">\n\t\t<ul>\n\t\t\t<li><?php echo lang_get( 'warning_default_administrator_account_present' ) ?></li>\n\t\t</ul>\n\t</div>\n\t<?php\n\t$t_force_pw_reset = true;\n}\n\nprint_account_menu( 'account_page.php' );\n\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\n<div id=\"account-update-div\" class=\"form-container\">\n\t<form id=\"account-update-form\" method=\"post\" action=\"account_update.php\">\n\n<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'edit_account_title' ) ?>\n\t\t</h4>\n\t</div>\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div class=\"table-responsive\">\n\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'account_update' );\n\n\t\t\tif( !$t_can_change_password ) {\n\t\t\t\t# With LDAP -->\n\t\t\t?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo string_display_line( $u_username ) ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'password' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo auth_password_managed_elsewhere_message() ?>\n\t\t\t\t</td>\n\t\t\t</tr><?php\n\t\t\t} else {\n\t\t\t\t# Without LDAP\n\t\t\t\t$t_show_update_button = true;\n\t\t\t?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo string_display_line( $u_username ) ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<?php\n\t\t\t    $t_required = $t_force_pw_reset ? 'required' : '';\n\t\t\t    $t_class = $t_force_pw_reset ? 'class=\"required\"' : '';\n\t\t\t?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<span <?php echo $t_class . $t_required ?>><?php if( $t_force_pw_reset ) { ?> * <?php } ?></span> <?php echo lang_get( 'current_password' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input class=\"input-sm\" id=\"password-current\" type=\"password\" name=\"password_current\" size=\"32\" maxlength=\"<?php echo auth_get_password_max_size(); ?>\" <?php echo $t_required ?> />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<span <?php echo $t_class . $t_required ?>><?php if( $t_force_pw_reset ) { ?> * <?php } ?></span> <?php echo lang_get( 'new_password' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input class=\"input-sm\" id=\"password\" type=\"password\" name=\"password\" size=\"32\" maxlength=\"<?php echo auth_get_password_max_size(); ?>\" <?php echo $t_required ?> />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<span <?php echo $t_class . $t_required ?>><?php if( $t_force_pw_reset ) { ?> * <?php } ?></span> <?php echo lang_get( 'confirm_password' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input class=\"input-sm\" id=\"password-confirm\" type=\"password\" name=\"password_confirm\" size=\"32\" maxlength=\"<?php echo auth_get_password_max_size(); ?>\" <?php echo $t_required ?> />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<?php\n\t\t\t} ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'email' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t<?php\n\t\t\t\tif( $t_ldap && ON == config_get_global( 'use_ldap_email' ) ) {\n\t\t\t\t\t# With LDAP\n\t\t\t\t\techo string_display_line( $u_email );\n\t\t\t\t} else {\n\t\t\t\t\t# Without LDAP\n\t\t\t\t\t$t_show_update_button = true;\n\t\t\t\t\tprint_email_input( 'email', $u_email );\n\t\t\t\t\tif( config_get_global( 'email_ensure_unique' )\n\t\t\t\t\t\t&& !user_is_email_unique( $u_email, $u_id )\n\t\t\t\t\t) {\n\t\t\t\t\t\techo '<span class=\"padding-8\">';\n\t\t\t\t\t\tprint_icon('fa-exclamation-triangle',\n\t\t\t\t\t\t\t'ace-icon bigger-125 red padding-right-4'\n\t\t\t\t\t\t);\n\t\t\t\t\t\techo lang_get( 'email_not_unique' );\n\t\t\t\t\t\techo '</span>';\n\t\t\t\t\t}\n\t\t\t\t} ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr><?php\n\t\t\t\tif( $t_ldap && ON == config_get_global( 'use_ldap_realname' ) ) {\n\t\t\t\t\t# With LDAP\n\t\t\t\t\techo '<td class=\"category\">' . lang_get( 'realname' ) . '</td>';\n\t\t\t\t\techo '<td>';\n\t\t\t\t\techo string_display_line( ldap_realname_from_username( $u_username ) );\n\t\t\t\t\techo '</td>';\n\t\t\t\t} else {\n\t\t\t\t\t# Without LDAP\n\t\t\t\t\t$t_show_update_button = true;\n\t\t\t\t\techo '<td class=\"category\">' . lang_get( 'realname' ) . '</td>';\n\t\t\t\t\techo '<td>';\n\t\t\t\t\techo '<input class=\"input-sm\" id=\"realname\" type=\"text\" size=\"32\" maxlength=\"' . DB_FIELD_SIZE_REALNAME . '\" name=\"realname\" value=\"' . string_attribute( $u_realname ) . '\" />';\n\t\t\t\t\techo '</td>';\n\t\t\t\t} ?>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'access_level' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo get_enum_element( 'access_levels', $u_access_level ); ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'access_level_project' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo get_enum_element( 'access_levels', current_user_get_access_level() ); ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t\t</fieldset>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\t<?php if( $t_show_update_button ) { ?>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<?php if ($t_force_pw_reset) { ?>\n\t\t\t\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ); ?></span>\n\t\t\t<?php } ?>\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'update_user_button' ) ?>\" />\n\t\t</div>\n\t<?php } ?>\n\t</div>\n</div>\n\n<?php\n$t_projects = user_get_assigned_projects( auth_get_current_user_id() );\nif( !empty( $t_projects ) ) {\n?>\n\t<div class=\"space-10\"></div>\n\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-puzzle-piece', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'assigned_projects' ) ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'name' ) ?></th>\n\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'access_level' ) ?></th>\n\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'view_status' ) ?></th>\n\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'description' ) ?></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tforeach( $t_projects as $t_project_id => $t_project ) {\n\t\t\t\t\t\t\t$t_project_name = string_attribute( $t_project['name'] );\n\t\t\t\t\t\t\t$t_access_level = get_enum_element( 'access_levels', $t_project['access_level'] );\n\t\t\t\t\t\t\t$t_view_state = get_enum_element( 'project_view_state', $t_project['view_state'] );\n\t\t\t\t\t\t\t$t_description = string_display_links( project_get_field( $t_project_id, 'description' ) );\n\t\t\t\t\t\t\techo '<tr>';\n\t\t\t\t\t\t\techo '<td>' . $t_project_name . '</td>';\n\t\t\t\t\t\t\techo '<td>' . $t_access_level . '</td>';\n\t\t\t\t\t\t\techo '<td>' . $t_view_state . '</td>';\n\t\t\t\t\t\t\techo '<td>' . $t_description . '</td>';\n\t\t\t\t\t\t\techo '</tr>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<?php } ?>\n\n\t</form>\n</div>\n\n<?php # check if users can't delete their own accounts\nif( ON == config_get( 'allow_account_delete' ) ) { ?>\n\n<!-- Delete Button -->\n<div class=\"form-container\">\n\t<form method=\"post\" action=\"account_delete.php\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'account_delete' ) ?>\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'delete_account_button' ) ?>\" />\n\t\t</fieldset>\n\t</form>\n</div>\n<?php\n}\necho '</div>';\nlayout_page_end();\n"
        },
        {
          "name": "account_prefs_inc.php",
          "type": "blob",
          "size": 17.41015625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Account preferences include page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses user_api.php\n * @uses user_pref_api.php\n * @uses utility_api.php\n */\n\nif( !defined( 'ACCOUNT_PREFS_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'user_pref_api.php' );\nrequire_api( 'utility_api.php' );\n\n/**\n * Display html form to edit account preferences\n *\n * @param integer $p_user_id            A valid user identifier.\n * @param boolean $p_error_if_protected Whether to error if the account is protected.\n * @param boolean $p_accounts_menu      Display account preferences menu.\n * @param string  $p_redirect_url       Redirect URI.\n * @return void\n */\nfunction edit_account_prefs( $p_user_id = null, $p_error_if_protected = true, $p_accounts_menu = true, $p_redirect_url = '' ) {\n\tif( null === $p_user_id ) {\n\t\t$p_user_id = auth_get_current_user_id();\n\t}\n\n\t$t_redirect_url = $p_redirect_url;\n\tif( is_blank( $t_redirect_url ) ) {\n\t\t$t_redirect_url = 'account_prefs_page.php';\n\t}\n\n\t# protected account check\n\tif( user_is_protected( $p_user_id ) ) {\n\t\tif( $p_error_if_protected ) {\n\t\t\ttrigger_error( ERROR_PROTECTED_ACCOUNT, ERROR );\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t$t_pref = user_pref_get( $p_user_id );\n\t$t_email_full_issue = (int)config_get( 'email_notifications_verbose', /* default */ null, $p_user_id, ALL_PROJECTS );\n\n# Account Preferences Form BEGIN\n?>\n\n<?php\n\tif( $p_accounts_menu ) {\n\t\tprint_account_menu( 'account_prefs_page.php' );\n\t\techo '<div class=\"col-md-12 col-xs-12\">';\n\t}\n?>\n\n<div class=\"space-10\"></div>\n<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-sliders', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'default_account_preferences_title' ) ?>\n\t\t</h4>\n\t</div>\n\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div id=\"account-prefs-update-div\" class=\"form-container\">\n\t\t\t\t<form id=\"account-prefs-update-form\" method=\"post\" action=\"account_prefs_update.php\" class=\"form-inline\">\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t<?php echo form_security_field( 'account_prefs_update' ) ?>\n\t\t\t\t\t\t<input type=\"hidden\" name=\"user_id\" value=\"<?php echo $p_user_id ?>\" />\n\t\t\t\t\t\t<input type=\"hidden\" name=\"redirect_url\" value=\"<?php echo $t_redirect_url ?>\" />\n\n\t\t\t\t\t\t<div class=\"table-responsive\">\n\t<table class=\"table table-bordered table-condensed table-striped\">\n\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'default_project' ) ?>\n\t\t</td>\n\t\t<td>\n\t\t\t<select id=\"default-project-id\" name=\"default_project\" class=\"input-sm\">\n<?php\n\t# Count number of available projects\n\t$t_projects = current_user_get_accessible_projects();\n\t$t_num_proj = count( $t_projects );\n\tif( $t_num_proj == 1 ) {\n\t\t$t_num_proj += count( current_user_get_accessible_subprojects( $t_projects[0] ) );\n\t}\n\t# Don't display \"All projects\" in selection list if there is only 1\n\tprint_project_option_list( (int)$t_pref->default_project, $t_num_proj != 1 );\n?>\n\t\t\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'refresh_delay' ) ?>\n\t\t</td>\n\t\t<td>\n\t\t\t<input id=\"refresh-delay\" type=\"text\" name=\"refresh_delay\" class=\"input-sm\" size=\"4\" maxlength=\"4\" value=\"<?php echo $t_pref->refresh_delay ?>\" /> <?php echo lang_get( 'minutes' ) ?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'redirect_delay' ) ?>\n\t\t</td>\n\t\t<td>\n\t\t<input id=\"redirect-delay\" type=\"text\" name=\"redirect_delay\" class=\"input-sm\" size=\"4\" maxlength=\"3\" value=\"<?php echo $t_pref->redirect_delay ?>\" /> <?php echo lang_get( 'seconds' ) ?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'bugnote_order' ) ?>\n\t\t</td>\n\t\t<td>\n\t\t\t<label for=\"bugnote-order-desc\" class=\"inline padding-right-8\">\n\t\t\t\t<input type=\"radio\" class=\"ace input-sm\" id=\"bugnote-order-desc\" name=\"bugnote_order\" value=\"DESC\" <?php check_checked( $t_pref->bugnote_order, 'DESC' ); ?> />\n\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'bugnote_order_desc' ) ?></span>\n\t\t\t</label>\n\t\t\t<label for=\"bugnote-order-asc\" class=\"inline padding-right-8\">\n\t\t\t\t<input type=\"radio\" class=\"ace input-sm\" id=\"bugnote-order-asc\" name=\"bugnote_order\" value=\"ASC\" <?php check_checked( $t_pref->bugnote_order, 'ASC' ); ?> />\n\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'bugnote_order_asc' ) ?></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n\t<?php if( ON == config_get( 'enable_email_notification' ) ) { ?>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_on_new' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace input-sm\" id=\"email-on-new\" name=\"email_on_new\" <?php check_checked( (int)$t_pref->email_on_new, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-on-new-min-severity\" class=\"email-on-severity-label\"><span><?php echo lang_get( 'with_minimum_severity' ) ?></span></label>\n\t\t\t\t<select id=\"email-on-new-min-severity\" name=\"email_on_new_min_severity\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"<?php echo OFF ?>\"><?php echo lang_get( 'any' ) ?></option>\n\t\t\t\t\t\t<option disabled=\"disabled\">-----</option>\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'severity', (int)$t_pref->email_on_new_min_severity ) ?>\n\t\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_on_assigned' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"email-on-assigned\" name=\"email_on_assigned\" <?php check_checked( (int)$t_pref->email_on_assigned, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-on-assigned-min-severity\" class=\"email-on-severity-label\"><span><?php echo lang_get( 'with_minimum_severity' ) ?></span></label>\n\t\t\t\t<select id=\"email-on-assigned-min-severity\" name=\"email_on_assigned_min_severity\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"<?php echo OFF ?>\"><?php echo lang_get( 'any' ) ?></option>\n\t\t\t\t\t\t<option disabled=\"disabled\">-----</option>\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'severity', (int)$t_pref->email_on_assigned_min_severity ) ?>\n\t\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_on_feedback' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace input-sm\" id=\"email-on-feedback\" name=\"email_on_feedback\" <?php check_checked( (int)$t_pref->email_on_feedback, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-on-feedback-min-severity\" class=\"email-on-severity-label\"><span><?php echo lang_get( 'with_minimum_severity' ) ?></span></label>\n\t\t\t\t<select id=\"email-on-feedback-min-severity\" name=\"email_on_feedback_min_severity\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"<?php echo OFF ?>\"><?php echo lang_get( 'any' ) ?></option>\n\t\t\t\t\t\t<option disabled=\"disabled\">-----</option>\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'severity', (int)$t_pref->email_on_feedback_min_severity ) ?>\n\t\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_on_resolved' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace input-sm\" id=\"email-on-resolved\" name=\"email_on_resolved\" <?php check_checked( (int)$t_pref->email_on_resolved, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-on-resolved-min-severity\" class=\"email-on-severity-label\"><span><?php echo lang_get( 'with_minimum_severity' ) ?></span></label>\n\t\t\t\t<select id=\"email-on-resolved-min-severity\" name=\"email_on_resolved_min_severity\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"<?php echo OFF ?>\"><?php echo lang_get( 'any' ) ?></option>\n\t\t\t\t\t\t<option disabled=\"disabled\">-----</option>\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'severity', (int)$t_pref->email_on_resolved_min_severity ) ?>\n\t\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_on_closed' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace input-sm\" id=\"email-on-closed\" name=\"email_on_closed\" <?php check_checked( (int)$t_pref->email_on_closed, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-on-closed-min-severity\" class=\"email-on-severity-label\"><span><?php echo lang_get( 'with_minimum_severity' ) ?></span></label>\n\t\t\t\t<select id=\"email-on-closed-min-severity\" name=\"email_on_closed_min_severity\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"<?php echo OFF ?>\"><?php echo lang_get( 'any' ) ?></option>\n\t\t\t\t\t\t<option disabled=\"disabled\">-----</option>\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'severity', (int)$t_pref->email_on_closed_min_severity ) ?>\n\t\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_on_reopened' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace input-sm\" id=\"email-on-reopened\" name=\"email_on_reopened\" <?php check_checked( (int)$t_pref->email_on_reopened, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-on-reopened-min-severity\" class=\"email-on-severity-label\"><span><?php echo lang_get( 'with_minimum_severity' ) ?></span></label>\n\t\t\t\t<select id=\"email-on-reopened-min-severity\" name=\"email_on_reopened_min_severity\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"<?php echo OFF ?>\"><?php echo lang_get( 'any' ) ?></option>\n\t\t\t\t\t\t<option disabled=\"disabled\">-----</option>\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'severity', (int)$t_pref->email_on_reopened_min_severity ) ?>\n\t\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_on_bugnote_added' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace input-sm\" id=\"email-on-bugnote-added\" name=\"email_on_bugnote\" <?php check_checked( (int)$t_pref->email_on_bugnote, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-on-bugnote-min-severity\" class=\"email-on-severity-label\"><span><?php echo lang_get( 'with_minimum_severity' ) ?></span></label>\n\t\t\t\t<select id=\"email-on-bugnote-min-severity\" name=\"email_on_bugnote_min_severity\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"<?php echo OFF ?>\"><?php echo lang_get( 'any' ) ?></option>\n\t\t\t\t\t\t<option disabled=\"disabled\">-----</option>\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'severity', (int)$t_pref->email_on_bugnote_min_severity ) ?>\n\t\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_on_status_change' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace input-sm\" id=\"email-on-status\" name=\"email_on_status\" <?php check_checked( (int)$t_pref->email_on_status, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-on-status-min-severity\" class=\"email-on-severity-label\"><span><?php echo lang_get( 'with_minimum_severity' ) ?></span></label>\n\t\t\t\t<select id=\"email-on-status-min-severity\" name=\"email_on_status_min_severity\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"<?php echo OFF ?>\"><?php echo lang_get( 'any' ) ?></option>\n\t\t\t\t\t\t<option disabled=\"disabled\">-----</option>\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'severity', (int)$t_pref->email_on_status_min_severity ) ?>\n\t\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_on_priority_change' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace input-sm\" id=\"email-on-priority-change\" name=\"email_on_priority\" <?php check_checked( (int)$t_pref->email_on_priority, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-on-priority-min-severity\" class=\"email-on-severity-label\"><span><?php echo lang_get( 'with_minimum_severity' ) ?></span></label>\n\t\t\t\t<select id=\"email-on-priority-min-severity\" name=\"email_on_priority_min_severity\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"<?php echo OFF ?>\"><?php echo lang_get( 'any' ) ?></option>\n\t\t\t\t\t\t<option disabled=\"disabled\">-----</option>\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'severity', (int)$t_pref->email_on_priority_min_severity ) ?>\n\t\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category width-30\">\n\t\t\t\t<?php echo lang_get( 'email_bugnote_limit' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id=\"email-bugnote-limit\" type=\"text\" name=\"email_bugnote_limit\" class=\"input-sm\" maxlength=\"2\" size=\"2\" value=\"<?php echo $t_pref->email_bugnote_limit ?>\" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class=\"category\">\n\t\t\t\t<?php echo lang_get( 'email_full_issue_details' ) ?>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace input-sm\"\n\t\t\t\t\t\tid=\"email-full-issue\" name=\"email_full_issue\"\n\t\t\t\t\t\t<?php check_checked( $t_email_full_issue, ON ); ?> />\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t</tr>\n<?php } else { ?>\n\t\t\t<input type=\"hidden\" name=\"email_on_new\"      value=\"<?php echo $t_pref->email_on_new ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_assigned\" value=\"<?php echo $t_pref->email_on_assigned ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_feedback\" value=\"<?php echo $t_pref->email_on_feedback ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_resolved\" value=\"<?php echo $t_pref->email_on_resolved ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_closed\"   value=\"<?php echo $t_pref->email_on_closed ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_reopened\" value=\"<?php echo $t_pref->email_on_reopened ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_bugnote\"  value=\"<?php echo $t_pref->email_on_bugnote ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_status\"   value=\"<?php echo $t_pref->email_on_status ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_priority\" value=\"<?php echo $t_pref->email_on_priority ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_new_min_severity\"      value=\"<?php echo $t_pref->email_on_new_min_severity ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_assigned_min_severity\" value=\"<?php echo $t_pref->email_on_assigned_min_severity ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_feedback_min_severity\" value=\"<?php echo $t_pref->email_on_feedback_min_severity ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_resolved_min_severity\" value=\"<?php echo $t_pref->email_on_resolved_min_severity ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_closed_min_severity\"   value=\"<?php echo $t_pref->email_on_closed_min_severity ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_reopened_min_severity\" value=\"<?php echo $t_pref->email_on_reopened_min_severity ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_bugnote_min_severity\"  value=\"<?php echo $t_pref->email_on_bugnote_min_severity ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_status_min_severity\"   value=\"<?php echo $t_pref->email_on_status_min_severity ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_on_priority_min_severity\" value=\"<?php echo $t_pref->email_on_priority_min_severity ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_bugnote_limit\" value=\"<?php echo $t_pref->email_bugnote_limit ?>\" />\n\t\t\t<input type=\"hidden\" name=\"email_full_issue\" value=\"<?php echo $t_email_full_issue ?>\" />\n<?php } ?>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'timezone' ) ?>\n\t\t</td>\n\t\t<td>\n\t\t\t\t\t<select id=\"timezone\" name=\"timezone\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_timezone_option_list( $t_pref->timezone ?  $t_pref->timezone  : config_get_global( 'default_timezone' ) ) ?>\n\t\t\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'language' ) ?>\n\t\t</td>\n\t\t<td>\n\t\t\t\t\t<select id=\"language\" name=\"language\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_language_option_list( $t_pref->language ) ?>\n\t\t\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'font_family' ) ?>\n\t\t</td>\n\t\t<td>\n\t\t\t<select id=\"font_family\" name=\"font_family\" class=\"input-sm\">\n\t\t\t\t<?php print_font_option_list( config_get( 'font_family',null, $p_user_id, ALL_PROJECTS ) ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<?php event_signal( 'EVENT_ACCOUNT_PREF_UPDATE_FORM', array( $p_user_id ) ); ?>\n\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</fieldset>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<button form=\"account-prefs-update-form\"\n\t\t\t\t\tclass=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'update_prefs_button' ) ?>\n\t\t\t</button>\n\n<?php\n\tprint_form_button(\n\t\t'account_prefs_reset.php',\n\t\tlang_get( 'reset_prefs_button' ),\n\t\tarray( 'user_id' => $p_user_id, 'redirect_url' => $t_redirect_url ),\n\t\tnull,\n\t\t'btn btn-primary btn-white btn-round'\n\t);\n?>\n\t\t</div>\n\t</div>\n</div>\n\n<?php\n\tif( $p_accounts_menu ) {\n\t\techo '</div>';\n\t}\n} # end of edit_account_prefs()\n"
        },
        {
          "name": "account_prefs_page.php",
          "type": "blob",
          "size": 2.0888671875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * CALLERS\n * This page is called from:\n * - print_account_menu()\n * - header redirects from account_*.php\n *\n * EXPECTED BEHAVIOUR\n * - Display the user's current preferences\n * - Allow the user to edit the preferences\n * - Provide the option of saving changes or resetting to default values\n *\n * CALLS\n * This page calls the following pages:\n * - acount_prefs_update.php  (to save changes)\n * - account_prefs_reset.php  (to reset preferences to default values)\n *\n * RESTRICTIONS & PERMISSIONS\n * - User must be authenticated\n * - The user's account must not be protected\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses current_user_api.php\n * @uses html_api.php\n * @uses lang_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\n\n#============ Parameters ============\n# (none)\n\n#============ Permissions ============\nauth_ensure_user_authenticated();\n\ncurrent_user_ensure_unprotected();\n\ndefine( 'ACCOUNT_PREFS_INC_ALLOW', true );\ninclude( __DIR__ . '/account_prefs_inc.php' );\n\nlayout_page_header( lang_get( 'change_preferences_link' ) );\n\nlayout_page_begin();\nedit_account_prefs();\nlayout_page_end();\n"
        },
        {
          "name": "account_prefs_reset.php",
          "type": "blob",
          "size": 2.9326171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * CALLERS\n * This page is called from:\n * - account_prefs_inc.php\n *\n * EXPECTED BEHAVIOUR\n * - Reset the user's preferences to default values\n * - Redirect to account_prefs_page.php or another page, if given\n *\n * CALLS\n * This page conditionally redirects upon completion\n *\n * RESTRICTIONS & PERMISSIONS\n * - User must be authenticated\n *\t- User must not be protected\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses user_pref_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'user_pref_api.php' );\n\n#============ Parameters ============\n$f_user_id = gpc_get_int( 'user_id' );\n$f_redirect_url\t= string_sanitize_url( gpc_get_string( 'redirect_url', 'account_prefs_page.php' ) );\n\n#============ Permissions ============\nform_security_validate( 'account_prefs_reset' );\n\nauth_ensure_user_authenticated();\n\nuser_ensure_exists( $f_user_id );\n\n$t_user = user_get_row( $f_user_id );\n\n# This page is currently called from the manage_* namespace and thus we\n# have to allow authorised users to update the accounts of other users.\n# TODO: split this functionality into manage_user_prefs_reset.php\nif( auth_get_current_user_id() != $f_user_id ) {\n\taccess_ensure_global_level( config_get( 'manage_user_threshold' ) );\n\taccess_ensure_global_level( $t_user['access_level'] );\n} else {\n\t# Protected users should not be able to update the preferences of their\n\t# user account. The anonymous user is always considered a protected\n\t# user and hence will also not be allowed to update preferences.\n\tuser_ensure_unprotected( $f_user_id );\n}\n\nuser_pref_reset( $f_user_id, ALL_PROJECTS );\n\nform_security_purge( 'account_prefs_reset' );\n\nprint_header_redirect( $f_redirect_url, true, true );\n"
        },
        {
          "name": "account_prefs_update.php",
          "type": "blob",
          "size": 5.55078125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Updates prefs then redirect to account_prefs_page.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses user_api.php\n * @uses user_pref_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'user_pref_api.php' );\n\nform_security_validate( 'account_prefs_update' );\n\nauth_ensure_user_authenticated();\n\n$f_user_id\t\t\t\t\t= gpc_get_int( 'user_id' );\n$f_redirect_url\t\t\t\t= gpc_get_string( 'redirect_url' );\n\nuser_ensure_exists( $f_user_id );\n\n$t_user = user_get_row( $f_user_id );\n\n# This page is currently called from the manage_* namespace and thus we\n# have to allow authorised users to update the accounts of other users.\n# TODO: split this functionality into manage_user_prefs_update.php\nif( auth_get_current_user_id() != $f_user_id ) {\n\taccess_ensure_global_level( config_get( 'manage_user_threshold' ) );\n\taccess_ensure_global_level( $t_user['access_level'] );\n} else {\n\t# Protected users should not be able to update the preferences of their\n\t# user account. The anonymous user is always considered a protected\n\t# user and hence will also not be allowed to update preferences.\n\tuser_ensure_unprotected( $f_user_id );\n}\n\n$t_prefs = user_pref_get( $f_user_id );\n\n$t_prefs->redirect_delay\t= gpc_get_int( 'redirect_delay' );\n$t_prefs->refresh_delay\t\t= gpc_get_int( 'refresh_delay' );\n$t_prefs->default_project\t= gpc_get_int( 'default_project' );\n\n$t_lang = gpc_get_string( 'language' );\nif( lang_language_exists( $t_lang ) ) {\n\t$t_prefs->language = $t_lang;\n}\n\n$t_font = gpc_get_string( 'font_family' );\nif( config_get( 'font_family', null, $f_user_id, ALL_PROJECTS ) != $t_font ) {\n\tconfig_set( 'font_family', $t_font, $f_user_id, ALL_PROJECTS );\n}\n\n$t_prefs->email_on_new\t\t= gpc_get_bool( 'email_on_new' );\n$t_prefs->email_on_assigned\t= gpc_get_bool( 'email_on_assigned' );\n$t_prefs->email_on_feedback\t= gpc_get_bool( 'email_on_feedback' );\n$t_prefs->email_on_resolved\t= gpc_get_bool( 'email_on_resolved' );\n$t_prefs->email_on_closed\t= gpc_get_bool( 'email_on_closed' );\n$t_prefs->email_on_reopened\t= gpc_get_bool( 'email_on_reopened' );\n$t_prefs->email_on_bugnote\t= gpc_get_bool( 'email_on_bugnote' );\n$t_prefs->email_on_status\t= gpc_get_bool( 'email_on_status' );\n$t_prefs->email_on_priority\t= gpc_get_bool( 'email_on_priority' );\n$t_prefs->email_on_new_min_severity\t\t\t= gpc_get_int( 'email_on_new_min_severity' );\n$t_prefs->email_on_assigned_min_severity\t= gpc_get_int( 'email_on_assigned_min_severity' );\n$t_prefs->email_on_feedback_min_severity\t= gpc_get_int( 'email_on_feedback_min_severity' );\n$t_prefs->email_on_resolved_min_severity\t= gpc_get_int( 'email_on_resolved_min_severity' );\n$t_prefs->email_on_closed_min_severity\t\t= gpc_get_int( 'email_on_closed_min_severity' );\n$t_prefs->email_on_reopened_min_severity\t= gpc_get_int( 'email_on_reopened_min_severity' );\n$t_prefs->email_on_bugnote_min_severity\t\t= gpc_get_int( 'email_on_bugnote_min_severity' );\n$t_prefs->email_on_status_min_severity\t\t= gpc_get_int( 'email_on_status_min_severity' );\n$t_prefs->email_on_priority_min_severity\t= gpc_get_int( 'email_on_priority_min_severity' );\n\n$t_prefs->bugnote_order = gpc_get_string( 'bugnote_order' );\n$t_prefs->email_bugnote_limit = gpc_get_int( 'email_bugnote_limit' );\n\n# Save user preference with regards to getting full issue details in notifications or not.\n$t_email_full_issue = gpc_get_bool( 'email_full_issue' ) ? 1 : 0;\n$t_email_full_config_option = 'email_notifications_verbose';\nif( config_get( $t_email_full_config_option, /* default */ null, $f_user_id, ALL_PROJECTS ) != $t_email_full_issue ) {\n\tconfig_set( $t_email_full_config_option, $t_email_full_issue, $f_user_id, ALL_PROJECTS );\n}\n\n# make sure the delay isn't too low\nif( ( config_get( 'min_refresh_delay' ) > $t_prefs->refresh_delay )&&\n\t( $t_prefs->refresh_delay != 0 )) {\n\t$t_prefs->refresh_delay = config_get( 'min_refresh_delay' );\n}\n\n$t_timezone = gpc_get_string( 'timezone' );\nif( in_array( $t_timezone, timezone_identifiers_list() ) ) {\n\tif( $t_timezone == config_get_global( 'default_timezone' ) ) {\n\t\t$t_prefs->timezone = '';\n\t} else {\n\t\t$t_prefs->timezone = $t_timezone;\n\t}\n}\n\nevent_signal( 'EVENT_ACCOUNT_PREF_UPDATE', array( $f_user_id ) );\n\nuser_pref_set( $f_user_id, $t_prefs, ALL_PROJECTS );\n\nform_security_purge( 'account_prefs_update' );\n\nprint_header_redirect( $f_redirect_url );\n\n"
        },
        {
          "name": "account_prof_edit_page.php",
          "type": "blob",
          "size": 5.2265625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page allows the user to edit his/her profile\n * Changes get POSTed to account_prof_update.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses profile_api.php\n * @uses string_api.php\n *\n * @noinspection PhpUnhandledExceptionInspection\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'profile_api.php' );\nrequire_api( 'string_api.php' );\n\nif( !config_get( 'enable_profiles' ) ) {\n\ttrigger_error( ERROR_ACCESS_DENIED, ERROR );\n}\n\nauth_ensure_user_authenticated();\n\ncurrent_user_ensure_unprotected();\n\n$f_profile_id = gpc_get_int( 'profile_id' );\n$f_redirect_page = gpc_get_string( 'redirect', 'account_prof_menu_page.php' );\n\n$t_profile = new ProfileData( $f_profile_id );\n$t_profile->ensure_can_update();\n\nlayout_page_header();\n\nif( $t_profile->is_global() ) {\n\tlayout_page_begin( 'manage_overview_page.php' );\n\tprint_manage_menu( 'manage_prof_menu_page.php' );\n} else {\n\tlayout_page_begin();\n}\n\n# Edit Profile Form BEGIN\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<form method=\"post\" action=\"account_prof_update.php\">\n\t\t<?php  echo form_security_field( 'account_prof_update' )?>\n\t\t<input type=\"hidden\" name=\"action\" value=\"update\" />\n\t\t<input type=\"hidden\" name=\"profile_id\" value=\"<?php echo $t_profile->id ?>\" />\n\t\t<input type=\"hidden\" name=\"redirect\" value=\"<?php echo string_attribute( $f_redirect_page ) ?>\" />\n\n\t\t<div class=\"widget-box widget-color-blue2\">\n\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'edit_profile' ) ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-condensed\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t\t\t\t<label for=\"platform\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'platform' ) ?>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input id=\"platform\" name=\"platform\" type=\"text\" required\n\t\t\t\t\t\t\t\t\t\t   class=\"input-sm\" size=\"32\" maxlength=\"32\"\n\t\t\t\t\t\t\t\t\t\t   value=\"<?php echo string_attribute( $t_profile->platform ) ?>\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t\t\t\t<label for=\"os\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'os' ) ?>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input id=\"os\" name=\"os\" type=\"text\" required\n\t\t\t\t\t\t\t\t\t\t   class=\"input-sm\" size=\"32\" maxlength=\"32\"\n\t\t\t\t\t\t\t\t\t\t   value=\"<?php echo string_attribute( $t_profile->os ) ?>\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t\t\t\t<label for=\"os_build\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'os_build' ) ?>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input id=\"os_build\" name=\"os_build\" type=\"text\" required\n\t\t\t\t\t\t\t\t\t\t   class=\"input-sm\" size=\"16\" maxlength=\"16\"\n\t\t\t\t\t\t\t\t\t\t   value=\"<?php echo string_attribute( $t_profile->os_build ) ?>\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t\t\t\t<label for=\"description\">\n\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'profile_description' ) ?>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t\t\t\t\t\t<textarea id=\"description\" name=\"description\"\n\t\t\t\t\t\t\t\t\t\t\t  class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\t  cols=\"60\" rows=\"8\">\n<?php echo string_textarea( $t_profile->description ) ?>\n</textarea>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t<span class=\"required pull-right\">\n\t\t\t\t\t\t*\n\t\t\t\t\t\t<?php echo lang_get( 'required' ) ?>\n\t\t\t\t\t</span>\n\t\t\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t\t\t<?php echo lang_get( 'update_profile' ) ?>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "account_prof_menu_page.php",
          "type": "blob",
          "size": 8.908203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page allows users to add a new profile which is POSTed to\n * account_prof_add.php\n *\n * Users can also manage their profiles\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses profile_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'profile_api.php' );\n\nif( !config_get( 'enable_profiles' ) ) {\n\ttrigger_error( ERROR_ACCESS_DENIED, ERROR );\n}\n\nif( isset( $g_global_profiles ) ) {\n\t$g_global_profiles = true;\n} else {\n\t$g_global_profiles = false;\n}\n\nauth_ensure_user_authenticated();\ncurrent_user_ensure_unprotected();\n\n$t_manage_global_profile_threshold = config_get( 'manage_global_profile_threshold' );\n$t_can_manage_global_profile = access_has_global_level( $t_manage_global_profile_threshold );\nif( $g_global_profiles ) {\n\taccess_ensure_global_level( $t_manage_global_profile_threshold );\n} else {\n\taccess_ensure_global_level( config_get( 'add_profile_threshold' ) );\n}\n\nlayout_page_header( lang_get( 'manage_profiles_link' ) );\n\nif( $g_global_profiles ) {\n\tlayout_page_begin( 'manage_overview_page.php' );\n\tprint_manage_menu( 'manage_prof_menu_page.php' );\n} else {\n\tlayout_page_begin();\n}\n\nif( $g_global_profiles ) {\n\t$t_user_id = ALL_USERS;\n} else {\n\t$t_user_id = auth_get_current_user_id();\n\tprint_account_menu( 'account_prof_menu_page.php' );\n}\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\n<?php\n\t# Profiles list BEGIN\n\t$t_profiles = profile_get_all_for_user( $t_user_id );\n\tif( $t_profiles ) {\n?>\n<div class=\"space-10\"></div>\n<div id=\"categories\" class=\"form-container\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-file-o', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'manage_profiles_link' ) ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'platform' ) ?></th>\n\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'os' ) ?></th>\n\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'os_build' ) ?></th>\n<?php\n\t\t\tif( !$g_global_profiles ) {\n?>\n\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'global_profile' ) ?></th>\n\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'default_profile' ) ?></th>\n<?php\n\t\t\t}\n?>\n\t\t\t\t\t\t\t\t<th class=\"center\"><?php echo lang_get( 'actions' ) ?></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\n\t\t\t\t\t\t<tbody>\n<?php\n\t\t\t$t_security_token = form_security_token( 'account_prof_update' );\n\t\t\t$t_default_profile = current_user_get_pref( 'default_profile' );\n\n\t\t\tforeach( $t_profiles as $t_profile ) {\n\t\t\t\t/**\n\t\t\t\t * @var $v_id\n\t\t\t\t * @var $v_user_id\n\t\t\t\t * @var $v_platform\n\t\t\t\t * @var $v_os\n\t\t\t\t * @var $v_os_build\n\t\t\t\t */\n\t\t\t\textract( $t_profile, EXTR_PREFIX_ALL, 'v' );\n\t\t\t\t$t_is_global_profile = $v_user_id == ALL_USERS;\n\t\t\t\t$t_is_default_profile = $t_default_profile == $v_id\n?>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td><?php echo string_display_line( $v_platform ); ?></td>\n\t\t\t\t\t\t\t\t<td><?php echo string_display_line( $v_os ); ?></td>\n\t\t\t\t\t\t\t\t<td><?php echo string_display_line( $v_os_build );  ?></td>\n<?php\n\t\t\t\tif( !$g_global_profiles ) {\n?>\n\t\t\t\t\t\t\t\t<td class=\"center\">\n\t\t\t\t\t\t\t\t\t<?php if( $t_is_global_profile ) { ?>\n\t\t\t\t\t\t\t\t\t<?php print_icon( 'fa-check', 'ace-icon fa-lg' ); ?>\n\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"center\">\n\t\t\t\t\t\t\t\t\t<?php if( $t_is_default_profile ) { ?>\n\t\t\t\t\t\t\t\t\t<?php print_icon( 'fa-check', 'ace-icon fa-lg' ); ?>\n\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t</td>\n<?php\n\t\t\t\t}\n?>\n\t\t\t\t\t\t\t\t<td class=\"center\">\n\t\t\t\t\t\t\t\t\t<div class=\"btn-group inline\">\n<?php\n\t\t\t\t# Common POST parameters for action buttons\n\t\t\t\t$t_param = array(\n\t\t\t\t\t'profile_id' => $v_id,\n\t\t\t\t\t'redirect' => basename( $_SERVER[\"SCRIPT_FILENAME\"] ),\n\t\t\t\t);\n\n\t\t\t\t# Print the Edit and Delete buttons for local profiles, or\n\t\t\t\t# if user can manage global ones.\n\t\t\t\tif( !$t_is_global_profile || $t_can_manage_global_profile ) {\n\t\t\t\t\techo '<div class=\"pull-left\">';\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t'account_prof_edit_page.php',\n\t\t\t\t\t\tlang_get( 'edit' ),\n\t\t\t\t\t\t$t_param\n\t\t\t\t\t);\n\t\t\t\t\techo '</div>';\n\n\t\t\t\t\techo '<div class=\"pull-left\">';\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t'account_prof_update.php',\n\t\t\t\t\t\tlang_get( 'delete' ),\n\t\t\t\t\t\tarray_merge( $t_param, array( 'action' => 'delete' ) ),\n\t\t\t\t\t\t$t_security_token\n\t\t\t\t\t);\n\t\t\t\t\techo '</div>';\n\t\t\t\t}\n\n\t\t\t\t# Make / Clear Default button\n\t\t\t\tif( !$g_global_profiles ) {\n\t\t\t\t\techo '<div class=\"pull-left\">';\n\t\t\t\t\tif( $t_is_default_profile ) {\n\t\t\t\t\t\t$t_param['profile_id'] = 0;\n\t\t\t\t\t}\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t'account_prof_update.php',\n\t\t\t\t\t\tlang_get( $t_is_default_profile ? 'clear_default' : 'make_default' ),\n\t\t\t\t\t\tarray_merge( $t_param, array( 'action' => 'change_default' ) ),\n\t\t\t\t\t\t$t_security_token\n\t\t\t\t\t);\n\t\t\t\t\techo '</div>';\n\t\t\t\t}\n\n\n\t\t\t\techo '<div class=\"pull-left\">';\n\t\t\t\techo '</div>';\n?>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n<?php\n\t\t\t} # end foreach profile\n?>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<?php\n\t} # end if profiles\n\t# Profiles list END\n\n\t# Add Profile Form BEGIN\n?>\n\n<div class=\"space-10\"></div>\n<div id=\"account-profile-div\" class=\"form-container\">\n\t<form id=\"account-profile-form\" method=\"post\" action=\"account_prof_update.php\">\n\t\t<fieldset>\n\t\t\t<?php  echo form_security_field( 'account_prof_update' )?>\n\t\t\t<input type=\"hidden\" name=\"action\" value=\"add\" />\n\t\t\t<input type=\"hidden\" name=\"user_id\" value=\"<?php echo $t_user_id ?>\" />\n\n\t\t\t<div class=\"widget-box widget-color-blue2\">\n\n\t\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t\t<?php print_icon( 'fa-file-o', 'ace-icon' ); ?>\n\t\t\t\t\t\t<?php echo lang_get( 'add_profile' ) ?>\n\t\t\t\t\t</h4>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"widget-body\">\n\t\t\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t\t\t\t\t\t<label for=\"platform\">\n\t\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'platform' ) ?>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"input-sm\"\n\t\t\t\t\t\t\t\t\t\t\t   id=\"platform\" name=\"platform\"\n\t\t\t\t\t\t\t\t\t\t\t   size=\"32\" maxlength=\"32\" required />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t\t\t\t\t\t<label for=\"os\">\n\t\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'os' ) ?>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"input-sm\"\n\t\t\t\t\t\t\t\t\t\t\t   id=\"os\" name=\"os\"\n\t\t\t\t\t\t\t\t\t\t\t   size=\"32\" maxlength=\"32\" required />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t\t\t\t\t\t<label for=\"os_build\">\n\t\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'os_build' ) ?>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"input-sm\"\n\t\t\t\t\t\t\t\t\t\t\t   id=\"os_build\" name=\"os_build\"\n\t\t\t\t\t\t\t\t\t\t\t   size=\"16\" maxlength=\"16\" required />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t\t\t\t<label for=\"description\">\n\t\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'profile_description' ) ?>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<textarea  id=\"description\" name=\"description\"\n\t\t\t\t\t\t\t\t\t\t\t   class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\t   cols=\"80\" rows=\"8\"></textarea>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<span class=\"required pull-right\">\n\t\t\t\t\t* <?php echo lang_get( 'required' ); ?>\n\t\t\t\t</span>\n\t\t\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t\t\t<?php echo lang_get('add_profile'); ?>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</fieldset>\n\t</form>\n</div>\n\n</div>\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "account_prof_update.php",
          "type": "blob",
          "size": 3.5908203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page updates the users profile information then redirects to\n * account_prof_menu_page.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses profile_api.php\n *\n * @noinspection PhpUnhandledExceptionInspection\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'profile_api.php' );\n\nif( !config_get( 'enable_profiles' ) ) {\n\ttrigger_error( ERROR_ACCESS_DENIED, ERROR );\n}\n\n$t_form_name = 'account_prof_update';\nform_security_validate( $t_form_name );\n\nauth_ensure_user_authenticated();\ncurrent_user_ensure_unprotected();\n\n$f_action = gpc_get_string( 'action' );\n$f_redirect_page = gpc_get_string( 'redirect', 'account_prof_menu_page.php' );\n\nif( $f_action != 'add' ) {\n\t$f_profile_id = gpc_get_int( 'profile_id' );\n\tif( $f_action != 'change_default' ) {\t\n\t\t$t_profile = new ProfileData( $f_profile_id );\n\t\t$t_profile->ensure_can_update();\n\n\t\t$t_user_id = $t_profile->is_global() ? ALL_USERS : auth_get_current_user_id();\n\t}\n}\n\nswitch( $f_action ) {\n\tcase 'add':\n\t\t$f_platform\t\t= gpc_get_string( 'platform' );\n\t\t$f_os\t\t\t= gpc_get_string( 'os' );\n\t\t$f_os_build\t\t= gpc_get_string( 'os_build' );\n\t\t$f_description\t= gpc_get_string( 'description' );\n\t\t$t_user_id\t\t= gpc_get_int( 'user_id' );\n\n\t\tif( ALL_USERS != $t_user_id ) {\n\t\t\t$t_user_id = auth_get_current_user_id();\n\t\t\taccess_ensure_global_level( config_get( 'add_profile_threshold' ), $t_user_id );\n\t\t}\n\n\t\tprofile_create( $t_user_id, $f_platform, $f_os, $f_os_build, $f_description );\n\t\tbreak;\n\n\tcase 'update':\n\t\t$f_platform = gpc_get_string( 'platform' );\n\t\t$f_os = gpc_get_string( 'os' );\n\t\t$f_os_build = gpc_get_string( 'os_build' );\n\t\t$f_description = gpc_get_string( 'description' );\n\n\t\t/** @noinspection PhpUndefinedVariableInspection */\n\t\tprofile_update( $t_user_id, $f_profile_id, $f_platform, $f_os, $f_os_build, $f_description );\n\t\tbreak;\n\n\tcase 'delete':\n\t\t/** @noinspection PhpUndefinedVariableInspection */\n\t\thelper_ensure_confirmed(\n\t\t\tsprintf( lang_get( 'delete_profile_confirm_msg' ),\n\t\t\t\tstring_attribute( $t_profile->get_name() )\n\t\t\t),\n\t\t\tlang_get( 'delete_profile' )\n\t\t);\n\n\t\t/** @noinspection PhpUndefinedVariableInspection */\n\t\tprofile_delete( $t_user_id, $f_profile_id );\n\t\tbreak;\n\n\tcase 'change_default':\n\t\tcurrent_user_set_pref( 'default_profile', $f_profile_id );\n\t\tbreak;\n}\n\nform_security_purge( $t_form_name );\n\nprint_header_redirect( $f_redirect_page );\n"
        },
        {
          "name": "account_sponsor_page.php",
          "type": "blob",
          "size": 12.6484375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * CALLERS\n *\tThis page is called from:\n *\t- print_menu()\n *\t- print_account_menu()\n *\n * EXPECTED BEHAVIOUR\n *\t- Display the user's current sponsorships\n *\t- Allow the user to edit the payment flag\n *\n * CALLS\n *\tThis page calls the following pages:\n *\t- account_sponsor_update.php  (to save changes)\n *\n * RESTRICTIONS & PERMISSIONS\n *\t- User must be authenticated, and not anonymous\n *   - sponsorship must be enabled\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses database_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses sponsorship_api.php\n * @uses string_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'sponsorship_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'version_api.php' );\n\nrequire_css( 'status_config.php' );\n\nif( !config_get( 'enable_sponsorship' ) ) {\n\ttrigger_error( ERROR_SPONSORSHIP_NOT_ENABLED, ERROR );\n}\n\n# anonymous users are not allowed to sponsor issues\nif( current_user_is_anonymous() ) {\n\taccess_denied();\n}\n\n$t_show_all = gpc_get_bool( 'show_all', false );\n\n# start the page\nlayout_page_header( lang_get( 'my_sponsorship' ) );\n\nlayout_page_begin();\n\n$t_project = helper_get_current_project();\n\nprint_account_menu( 'account_sponsor_page.php' );\n\n?>\n<br />\n<table class=\"width100\" cellspacing=\"1\">\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo lang_get( 'my_sponsorship' ) ?>\n\t</td>\n</tr>\n</table>\n<?php\n# get issues user has sponsored\n$t_user = auth_get_current_user_id();\n$t_resolved = config_get( 'bug_resolved_status_threshold' );\n$t_payment = config_get( 'payment_enable', 0 );\n\n$t_project_clause = helper_project_specific_where( $t_project );\n\n$t_query = 'SELECT b.id as bug, s.id as sponsor, s.paid, b.project_id, b.fixed_in_version, b.status\n\tFROM {bug} b, {sponsorship} s\n\tWHERE s.user_id=' . db_param() . ' AND s.bug_id = b.id ' .\n\t( $t_show_all ? '' : 'AND ( b.status < ' . db_param() . ' OR s.paid < ' . SPONSORSHIP_PAID . ')' ) . '\n\tAND ' . $t_project_clause . '\n\tORDER BY s.paid ASC, b.project_id ASC, b.fixed_in_version ASC, b.status ASC, b.id DESC';\n\n$t_result = db_query( $t_query, $t_show_all ? array( $t_user ) : array( $t_user , $t_resolved ) );\n\n$t_sponsors = array();\nwhile( $t_row = db_fetch_array( $t_result ) ) {\n\t$t_sponsors[] = $t_row;\n}\n\n$t_sponsor_count = count( $t_sponsors );\nif( $t_sponsor_count === 0 ) {\n\techo '<p>' . lang_get( 'no_own_sponsored' ) . '</p>';\n} else {\n?>\n\n<!-- # Edit own sponsorship Form BEGIN -->\n<br />\n<div>\n<table class=\"width100\" cellspacing=\"1\">\n\t<colgroup>\n\t\t<col style=\"width:10%\" />\n\t\t<col style=\"width:8%\" />\n\t\t<col style=\"width:7%\" />\n\t\t<col style=\"width:10%\" />\n\t\t<col style=\"width:10%\" />\n\t\t<col style=\"width:30%\" />\n\t\t<col style=\"width:8%\" />\n\t\t<col style=\"width:7%\" />\n\t\t<col style=\"width:10%\" />\n\t</colgroup>\n\t<!-- Headings -->\n\t<tr>\n\t\t<td class=\"bold\" colspan=\"9\">\n\t\t\t<?php echo lang_get( 'own_sponsored' ) ?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'email_bug' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'email_project' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'fixed_in_version' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'email_status' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'email_handler' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'email_summary' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'amount' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'status' ) ?></td>\n\t\t<td class=\"form-title\">&#160;</td>\n\t</tr>\n<?php\n\t$t_total_owing = 0;\n\t$t_total_paid = 0;\n\tfor( $i = 0; $i < $t_sponsor_count; ++$i ) {\n\t\t$t_sponsor_row = $t_sponsors[$i];\n\t\t$t_bug = bug_get( $t_sponsor_row['bug'] );\n\t\t$t_sponsor = sponsorship_get( $t_sponsor_row['sponsor'] );\n\n\t\t# describe bug\n\t\t$t_status = string_attribute( get_enum_element( 'status', $t_bug->status, auth_get_current_user_id(), $t_bug->project_id ) );\n\t\t$t_resolution = string_attribute( get_enum_element( 'resolution', $t_bug->resolution, auth_get_current_user_id(), $t_bug->project_id ) );\n\t\t$t_version_id = version_get_id( $t_bug->fixed_in_version, $t_bug->project_id );\n\t\tif( ( false !== $t_version_id ) && ( VERSION_RELEASED == version_get_field( $t_version_id, 'released' ) ) ) {\n\t\t\t$t_released_label = '<a title=\"' . lang_get( 'released' ) . '\">' . $t_bug->fixed_in_version . '</a>';\n\t\t} else {\n\t\t\t$t_released_label = $t_bug->fixed_in_version;\n\t\t}\n\n\t\t# choose color based on status\n\t\t$t_status_css = html_get_status_css_bg( $t_bug->status, auth_get_current_user_id(), $t_bug->project_id );\n\n\t\techo '<tr class=\"' . $t_status_css .  '\">';\n\t\techo '<td><a href=\"' . string_get_bug_view_url( $t_sponsor_row['bug'] ) . '\">' . bug_format_id( $t_sponsor_row['bug'] ) . '</a></td>';\n\t\techo '<td>' . string_display_line( project_get_field( $t_bug->project_id, 'name' ) ) . '&#160;</td>';\n\t\techo '<td>' . $t_released_label . '&#160;</td>';\n\t\techo '<td><span class=\"issue-status\" title=\"' . $t_resolution . '\">' . $t_status . '</span></td>';\n\t\techo '<td>';\n\t\tprint_user( $t_bug->handler_id );\n\t\techo '</td>';\n\n\t\t# summary\n\t\techo '<td>' . string_display_line( $t_bug->summary );\n\t\tif( VS_PRIVATE == $t_bug->view_state ) {\n\t\t\techo ' ';\n\t\t\tprint_icon( 'fa-lock', '', lang_get( 'private' ) );\n\t\t}\n\t\techo '</td>';\n\n\t\t# describe sponsorship amount\n\t\techo '<td class=\"pull-right\">' . sponsorship_format_amount( $t_sponsor->amount ) . '</td>';\n\t\techo '<td>' . get_enum_element( 'sponsorship', $t_sponsor->paid ) . '</td>';\n\n\t\tif( SPONSORSHIP_PAID == $t_sponsor->paid ) {\n\t\t\t$t_total_paid += $t_sponsor->amount;\n\t\t} else {\n\t\t\t$t_total_owing += $t_sponsor->amount;\n\t\t}\n\n\t\techo '<td>';\n\t\tif( $t_payment ) {\n\t\t\techo '(paypal button)';\n\t\t} else {\n\t\t\techo '&#160;';\n\t\t}\n\t\techo '</td>';\n\t\techo '</tr>';\n\t}\n?>\n<!-- Totals -->\n<tr>\n\t<td colspan=\"5\"></td>\n\t<td><?php echo lang_get( 'total_owing' ) ?></td>\n\t<td class=\"pull-right\"><?php echo sponsorship_format_amount( $t_total_owing ) ?></td>\n\t<td colspan=\"2\"></td>\n</tr>\n<tr>\n\t<td colspan=\"5\"></td>\n\t<td><?php echo lang_get( 'total_paid' ) ?></td>\n\t<td class=\"pull-right\"><?php echo sponsorship_format_amount( $t_total_paid ) ?></td>\n\t<td colspan=\"2\"></td>\n</tr>\n</table>\n</div>\n<?php } # end sponsored issues\n\n$t_query = 'SELECT b.id as bug, s.id as sponsor, s.paid, b.project_id, b.fixed_in_version, b.status\n\tFROM {bug} b, {sponsorship} s\n\tWHERE b.handler_id=' . db_param() . ' AND s.bug_id = b.id ' .\n\t( $t_show_all ? '' : 'AND ( b.status < ' . db_param() . ' OR s.paid < ' . SPONSORSHIP_PAID . ')' ) . '\n\tAND ' . $t_project_clause . '\n\tORDER BY s.paid ASC, b.project_id ASC, b.fixed_in_version ASC, b.status ASC, b.id DESC';\n\n$t_result = db_query( $t_query, $t_show_all ? array( $t_user ) : array( $t_user , $t_resolved ) );\n\n$t_sponsors = array();\nwhile( $t_row = db_fetch_array( $t_result ) ) {\n\t$t_sponsors[] = $t_row;\n}\n\n$t_sponsor_count = count( $t_sponsors );\nif( $t_sponsor_count === 0 ) {\n\techo '<p>' . lang_get( 'no_sponsored' ) . '</p>';\n} else {\n?>\n\n<!-- # Edit sponsorship Form BEGIN -->\n<br />\n<div>\n<form method=\"post\" action=\"account_sponsor_update.php\">\n<?php echo form_security_field( 'account_sponsor_update' ) ?>\n<table class=\"width100\" cellspacing=\"1\">\n\t<colgroup>\n\t\t<col style=\"width:10%\" />\n\t\t<col style=\"width:8%\" />\n\t\t<col style=\"width:7%\" />\n\t\t<col style=\"width:10%\" />\n\t\t<col style=\"width:35%\" />\n\t\t<col style=\"width:10%\" />\n\t\t<col style=\"width:10%\" />\n\t\t<col style=\"width:10%\" />\n\t</colgroup>\n\t<!-- Headings -->\n\t<tr>\n\t\t<td class=\"bold\" colspan=\"8\">\n\t\t\t<?php echo lang_get( 'issues_handled' ) ?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'email_bug' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'email_project' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'fixed_in_version' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'email_status' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'email_summary' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'sponsor' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'amount' ) ?></td>\n\t\t<td class=\"form-title\"><?php echo lang_get( 'status' ) ?></td>\n\t</tr>\n<?php\n\t$t_bug_list = array();\n\t$t_total_owing = 0;\n\t$t_total_paid = 0;\n\tfor( $i = 0; $i < $t_sponsor_count; ++$i ) {\n\t\t$t_sponsor_row = $t_sponsors[$i];\n\t\t$t_bug = bug_get( $t_sponsor_row['bug'] );\n\t\t$t_sponsor = sponsorship_get( $t_sponsor_row['sponsor'] );\n\t\t$t_buglist[] = $t_sponsor_row['bug'] . ':' . $t_sponsor_row['sponsor'];\n\n\t\t# describe bug\n\t\t$t_status = string_attribute( get_enum_element( 'status', $t_bug->status, auth_get_current_user_id(), $t_bug->project_id ) );\n\t\t$t_resolution = string_attribute( get_enum_element( 'resolution', $t_bug->resolution, auth_get_current_user_id(), $t_bug->project_id ) );\n\t\t$t_version_id = version_get_id( $t_bug->fixed_in_version, $t_bug->project_id );\n\t\tif( ( false !== $t_version_id ) && ( VERSION_RELEASED == version_get_field( $t_version_id, 'released' ) ) ) {\n\t\t\t$t_released_label = '<a title=\"' . lang_get( 'released' ) . '\">' . $t_bug->fixed_in_version . '</a>';\n\t\t} else {\n\t\t\t$t_released_label = $t_bug->fixed_in_version;\n\t\t}\n\n\t\t# choose color based on status\n\t\t$t_status_css = html_get_status_css_bg( $t_bug->status, auth_get_current_user_id(), $t_bug->project_id );\n\n\t\techo '<tr class=\"' . $t_status_css .  '\">';\n\t\techo '<td><a href=\"' . string_get_bug_view_url( $t_sponsor_row['bug'] ) . '\">' . bug_format_id( $t_sponsor_row['bug'] ) . '</a></td>';\n\t\techo '<td>' . string_display_line( project_get_field( $t_bug->project_id, 'name' ) ) . '&#160;</td>';\n\t\techo '<td>' . $t_released_label . '&#160;</td>';\n\t\techo '<td><a title=\"' . $t_resolution . '\"><span class=\"underline\">' . $t_status . '</span>&#160;</a></td>';\n\n\t\t# summary\n\t\techo '<td>' . string_display_line( $t_bug->summary );\n\t\tif( VS_PRIVATE == $t_bug->view_state ) {\n\t\t\tprint_icon( 'fa-lock', '', lang_get( 'private' ) );\n\t\t}\n\t\techo '</td>';\n\n\t\t# describe sponsorship amount\n\t\techo '<td>';\n\t\tprint_user( $t_sponsor->user_id );\n\t\techo '</td>';\n\t\techo '<td>' . sponsorship_format_amount( $t_sponsor->amount ) . '</td>';\n\t\techo '<td><select class=\"input-sm\" name=\"sponsor_' . $t_row['bug'] . '_' . $t_sponsor->id . '\">';\n\t\tprint_enum_string_option_list( 'sponsorship', $t_sponsor->paid );\n\t\techo '</select></td>';\n\n\t\techo '</tr>';\n\t\tif( SPONSORSHIP_PAID == $t_sponsor->paid ) {\n\t\t\t$t_total_paid += $t_sponsor->amount;\n\t\t} else {\n\t\t\t$t_total_owing += $t_sponsor->amount;\n\t\t}\n\n\t}\n\t$t_hidden_bug_list = implode( ',', $t_buglist );\n?>\n<!-- Totals -->\n<tr>\n\t<td colspan=\"5\"></td>\n\t<td><?php echo lang_get( 'total_owing' ) ?></td>\n\t<td class=\"pull-right\"><?php echo sponsorship_format_amount( $t_total_owing ) ?></td>\n\t<td></td>\n</tr>\n<tr>\n\t<td colspan=\"5\"></td>\n\t<td><?php echo lang_get( 'total_paid' ) ?></td>\n\t<td class=\"pull-right\"><?php echo sponsorship_format_amount( $t_total_paid ) ?></td>\n\t<td></td>\n</tr>\n\t<!-- BUTTONS -->\n\t<tr>\n\t\t<td colspan=\"5\">&#160;</td>\n\t\t<!-- Update Button -->\n\t\t<td colspan=\"3\">\n\t\t\t<input type=\"hidden\" name=\"buglist\" value=\"<?php echo $t_hidden_bug_list ?>\" />\n\t\t\t<input type=\"submit\" class=\"button\" value=\"<?php echo lang_get( 'update_sponsorship_button' ) ?>\" />\n\t\t</td>\n\t</tr>\n</table>\n</form>\n</div>\n<?php } # end sponsored issues ?>\n\n<br />\n<div>\n<?php\nhtml_button( 'account_sponsor_page.php',\n\tlang_get( ( $t_show_all ? 'sponsor_hide' : 'sponsor_show' ) ),\n\tarray( 'show_all' => ( $t_show_all ? 0 : 1 ) ) );\n?>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "account_sponsor_update.php",
          "type": "blob",
          "size": 2.5908203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page updates a user's sponsorships\n * If an account is protected then changes are forbidden\n * The page gets redirected back to account_page.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses sponsorship_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'sponsorship_api.php' );\n\nif( !config_get( 'enable_sponsorship' ) ) {\n\ttrigger_error( ERROR_SPONSORSHIP_NOT_ENABLED, ERROR );\n}\n\nform_security_validate( 'account_sponsor_update' );\n\nauth_ensure_user_authenticated();\n\n$f_bug_list = gpc_get_string( 'buglist', '' );\n$t_bug_list = explode( ',', $f_bug_list );\n\nforeach( $t_bug_list as $t_bug ) {\n\tlist( $t_bug_id, $t_sponsor_id ) = explode( ':', $t_bug );\n\t$c_bug_id = (int)$t_bug_id;\n\n\tbug_ensure_exists( $c_bug_id ); # dies if bug doesn't exist\n\n\taccess_ensure_bug_level( config_get( 'handle_sponsored_bugs_threshold' ), $c_bug_id ); # dies if user can't handle bug\n\n\t$t_bug = bug_get( $c_bug_id );\n\t$t_sponsor = sponsorship_get( (int)$t_sponsor_id );\n\n\t$t_new_payment = gpc_get_int( 'sponsor_' . $c_bug_id . '_' . $t_sponsor->id, $t_sponsor->paid );\n\tif( $t_new_payment != $t_sponsor->paid ) {\n\t\tsponsorship_update_paid( $t_sponsor_id, $t_new_payment );\n\t}\n}\n\nform_security_purge( 'account_sponsor_update' );\n\nprint_header_redirect( 'account_sponsor_page.php' );\n"
        },
        {
          "name": "account_update.php",
          "type": "blob",
          "size": 5.4560546875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page updates a user's information\n * If an account is protected then changes are forbidden\n * The page gets redirected back to account_page.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses email_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n *\n * Unhandled exceptions will be caught by the default error handler\n * @noinspection PhpUnhandledExceptionInspection\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'email_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'account_update' );\n\n$t_verify_user_id = gpc_get_int( 'verify_user_id', 0 );\n$t_account_verification = (bool)$t_verify_user_id;\nif( $t_account_verification ) {\n\t# Password reset request from verify.php - validate the confirmation hash\n\t$f_confirm_hash = gpc_get_string( 'confirm_hash' );\n\t$t_token_confirm_hash = token_get_value( TOKEN_ACCOUNT_ACTIVATION, $t_verify_user_id );\n\tif( $t_token_confirm_hash == null || $f_confirm_hash !== $t_token_confirm_hash ) {\n\t\ttrigger_error( ERROR_LOST_PASSWORD_CONFIRM_HASH_INVALID, ERROR );\n\t}\n\n\t# Make sure the token is not expired\n\tif( null === token_get_value( TOKEN_ACCOUNT_VERIFY, $t_verify_user_id ) ) {\n\t\ttrigger_error( ERROR_SESSION_NOT_VALID, ERROR );\n\t}\n\n\t# set a temporary cookie so the login information is passed between pages.\n\tauth_set_cookies( $t_verify_user_id );\n\t# fake login so the user can set their password\n\tauth_attempt_script_login( user_get_username( $t_verify_user_id ) );\n\t$t_user_id = $t_verify_user_id;\n} else {\n\t# Normal account update - authenticate the user\n\tauth_reauthenticate();\n\t$t_user_id = auth_get_current_user_id();\n}\n\nauth_ensure_user_authenticated();\ncurrent_user_ensure_unprotected();\n\n$f_email           \t= gpc_get_string( 'email', '' );\n$f_realname        \t= gpc_get_string( 'realname', '' );\n$f_password_current = gpc_get_string( 'password_current', '' );\n$f_password        \t= gpc_get_string( 'password', '' );\n$f_password_confirm\t= gpc_get_string( 'password_confirm', '' );\n\n$t_update_email = false;\n$t_update_password = false;\n$t_update_realname = false;\n\n# Do not allow blank passwords in account verification/reset\nif( $t_account_verification && is_blank( $f_password ) ) {\n\t# log out of the temporary login used by verification\n\tauth_clear_cookies();\n\tauth_logout();\n\terror_parameters( lang_get( 'password' ) );\n\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n}\n\n$t_ldap = ( LDAP == config_get_global( 'login_method' ) );\n\n# Update email (but only if LDAP isn't being used)\n# Do not update email for a user verification\nif( !( $t_ldap && config_get_global( 'use_ldap_email' ) )\n\t&& !$t_account_verification ) {\n\tif( !is_blank( $f_email ) && $f_email != user_get_email( $t_user_id ) ) {\n\t\t$t_update_email = true;\n\t}\n}\n\n# Update real name (but only if LDAP isn't being used)\nif( !( $t_ldap && config_get_global( 'use_ldap_realname' ) ) ) {\n\t# strip extra spaces from real name\n\t$t_realname = string_normalize( $f_realname );\n\tif( $t_realname != user_get_field( $t_user_id, 'realname' ) ) {\n\t\t$t_update_realname = true;\n\t}\n}\n\n# Update password if the two match and are not empty\nif( !is_blank( $f_password ) ) {\n\tif( $f_password != $f_password_confirm ) {\n\t\tif( $t_account_verification ) {\n\t\t\t# log out of the temporary login used by verification\n\t\t\tauth_clear_cookies();\n\t\t\tauth_logout();\n\t\t}\n\t\ttrigger_error( ERROR_USER_CREATE_PASSWORD_MISMATCH, ERROR );\n\t} else {\n\t\tif( !$t_account_verification && !auth_does_password_match( $t_user_id, $f_password_current ) ) {\n\t\t\ttrigger_error( ERROR_USER_CURRENT_PASSWORD_MISMATCH, ERROR );\n\t\t}\n\n\t\tif( !auth_does_password_match( $t_user_id, $f_password ) ) {\n\t\t\t$t_update_password = true;\n\t\t}\n\t}\n}\n\nif( $t_update_email ) {\n\tuser_set_email( $t_user_id, $f_email );\n}\n\nif( $t_update_password ) {\n\tuser_set_password( $t_user_id, $f_password );\n\n\t# Clear the verification token\n\tif( $t_account_verification ) {\n\t\ttoken_delete( TOKEN_ACCOUNT_VERIFY, $t_user_id );\n\t}\n}\n\nif( $t_update_realname ) {\n\t/** @noinspection PhpUndefinedVariableInspection */\n\tuser_set_realname( $t_user_id, $t_realname );\n}\n\nform_security_purge( 'account_update' );\n\nprint_header_redirect( 'index.php' );\n"
        },
        {
          "name": "adm_config_delete.php",
          "type": "blob",
          "size": 2.0126953125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handles deleting configuration settings from the configuration management page\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'adm_config_delete' );\n\n$f_user_id = gpc_get_int( 'user_id' );\n$f_project_id = gpc_get_int( 'project_id' );\n$f_config_option = gpc_get_string( 'config_option' );\n\nhelper_ensure_confirmed( lang_get( 'delete_config_sure_msg' ), lang_get( 'delete' ) );\n\n$t_data = array(\n\t'payload' => array(\n\t\t'user' => array( 'id' => $f_user_id ),\n\t\t'project' => array( 'id' => $f_project_id ),\n\t\t'configs' => array(\n\t\t\tarray(\n\t\t\t\t'option' => $f_config_option,\n\t\t\t\t'value' => null,\n\t\t\t)\n\t\t)\n\t)\n);\n\n$t_command = new ConfigsSetCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'adm_config_delete' );\n\nprint_header_redirect( 'adm_config_report.php' );\n\n"
        },
        {
          "name": "adm_config_page.php",
          "type": "blob",
          "size": 9.0263671875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Mantis Configuration. View, edit, update a configuration option.\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api\n * @uses config_api\n * @uses constant_inc.php\n * @uses error_api\n * @uses form_api\n * @uses gpc_api\n * @uses helper_api\n * @uses lang_api\n * @uses layout_api\n * @uses print_api\n * @uses string_api\n * @uses user_api\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'layout_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\n\naccess_ensure_global_level( config_get( 'view_configuration_threshold' ) );\n$t_has_write_access = access_has_global_level( config_get( 'set_configuration_threshold' ) );\n\nlayout_page_header( lang_get( 'configuration_report' ) );\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( PAGE_CONFIG_DEFAULT );\nprint_manage_config_menu( 'adm_config_report.php' );\n\n# Get request values\n$f_edit_user_id         = gpc_get_int( 'user_id', ALL_USERS );\n$f_edit_project_id      = gpc_get_int( 'project_id', ALL_PROJECTS );\n$f_edit_option          = gpc_get_string( 'config_option', null );\n$f_edit_action          = gpc_get_string( 'action', MANAGE_CONFIG_ACTION_VIEW );\n\n# Ensure we exclusively use one of the defined, valid actions (XSS protection)\n$t_valid_actions = array(\n\tMANAGE_CONFIG_ACTION_CREATE,\n\tMANAGE_CONFIG_ACTION_CLONE,\n\tMANAGE_CONFIG_ACTION_EDIT,\n\tMANAGE_CONFIG_ACTION_VIEW\n);\n$t_edit_action = in_array( $f_edit_action, $t_valid_actions )\n\t? $f_edit_action\n\t: MANAGE_CONFIG_ACTION_CREATE;\n\n# if not creating a new option, the option name is required\nif( MANAGE_CONFIG_ACTION_CREATE != $t_edit_action && null == $f_edit_option ) {\n\terror_parameters( 'config_option' );\n\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n}\n\n# see if the user can modify configuration options\n$t_modify = MANAGE_CONFIG_ACTION_VIEW != $t_edit_action\n\t\t&& $t_has_write_access\n\t\t&& config_can_delete( $f_edit_option );\n\n# if can't modify, switch antion to \"view\"\nif( !$t_modify ) {\n\t$t_edit_action = MANAGE_CONFIG_ACTION_VIEW;\n}\n\n$t_action_label = lang_get( 'set_configuration_option_action_' . $t_edit_action );\n\nif( MANAGE_CONFIG_ACTION_CREATE != $t_edit_action ) {\n\t# retrieve existing config data from database for this option\n\t$t_query = new DbQuery( 'SELECT * FROM {config} WHERE config_id = :config AND user_id = :user AND project_id = :project' );\n\t$t_query->bind_values(  array(\n\t\t\t'config' => $f_edit_option,\n\t\t\t'user' => $f_edit_user_id,\n\t\t\t'project' => $f_edit_project_id\n\t\t) );\n\t$t_config_row = $t_query->fetch();\n\n\tif( !$t_config_row ) {\n\t\t# this error will be triggered if the exact config combination does not exist in database\n\t\terror_parameters( $f_edit_option );\n\t\ttrigger_error( ERROR_CONFIG_OPT_NOT_FOUND, ERROR );\n\t}\n\t$t_option_user_id = (int)$t_config_row['user_id'];\n\t$t_option_project_id = (int)$t_config_row['project_id'];\n\t$t_option_id = $t_config_row['config_id'];\n\t$t_option_type = $t_config_row['type'];\n\t$t_option_value = $t_config_row['value'];\n} else {\n\t# action is MANAGE_CONFIG_ACTION_CREATE\n\t# prepare new or default values\n\t$t_option_user_id = $f_edit_user_id;\n\t$t_option_project_id = $f_edit_project_id;\n\t$t_option_id = $f_edit_option ?? '';\n\t$t_option_type = CONFIG_TYPE_DEFAULT;\n\t$t_option_value = '';\n\n\tif( '' != $t_option_id ) {\n\t\t# if an option has been provided,\n\t\t# make sure that configuration option specified is a valid one.\n\t\t$t_not_found_value = '***CONFIG OPTION NOT FOUND***';\n\t\tif( config_get( $t_option_id, $t_not_found_value ) === $t_not_found_value ) {\n\t\t\terror_parameters( $t_option_id );\n\t\t\ttrigger_error( ERROR_CONFIG_OPT_NOT_FOUND, ERROR );\n\t\t}\n\t}\n}\n\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\n\t<div id=\"config-edit-div\">\n\t\t<form id=\"config_set_form\" method=\"post\" action=\"<?php echo ( $t_modify? 'adm_config_set.php' : '' ) ?>\">\n\n\t\t\t<!-- Title -->\n\t\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t\t<?php print_icon( 'fa-sliders', 'ace-icon' ); ?>\n\t\t\t\t\t\t<?php echo $t_action_label; ?>\n\t\t\t\t\t</h4>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"widget-body\">\n\t\t\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t\t\t<div id=\"config-edit-div\" class=\"form-container\">\n\t\t\t\t\t\t\t<div class=\"table-responsive\">\n\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t<fieldset>\n\t\t\t\t<?php\n\t\t\t\t\tif( $t_modify ) {\n\t\t\t\t\t\techo form_security_field( 'adm_config_set' );\n\t\t\t\t\t}\n\t\t\t\t?>\n\n\t\t\t\t<!-- Username -->\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tif( $t_modify ) {\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<select id=\"config-user-id\" name=\"user_id\" class=\"input-sm\">\n\t\t\t\t\t\t\t<option value=\"<?php echo ALL_USERS; ?>\"\n\t\t\t\t\t\t\t\t<?php check_selected( $t_option_user_id, ALL_USERS ) ?>>\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'all_users' ); ?>\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t<?php print_user_option_list( $t_option_user_id ) ?>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<input type=\"hidden\" name=\"original_user_id\" value=\"<?php echo $t_option_user_id; ?>\" />\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$t_username = ALL_USERS == $t_option_user_id ? lang_get( 'all_users' ) : user_get_name( $t_option_user_id );\n\t\t\t\t\t\t\techo string_display_line( $t_username );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\n\t\t\t\t<!-- Project -->\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'project_name' ) ?>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tif( $t_modify ) {\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<select id=\"config-project-id\" name=\"project_id\" class=\"input-sm\">\n\t\t\t\t\t\t\t<option value=\"<?php echo ALL_PROJECTS; ?>\"\n\t\t\t\t\t\t\t\t<?php check_selected( $t_option_project_id, ALL_PROJECTS ); ?>>\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'all_projects' ); ?>\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t<?php print_project_option_list( $t_option_project_id, false ) ?>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<input type=\"hidden\" name=\"original_project_id\" value=\"<?php echo $t_option_project_id; ?>\" />\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\techo string_display_line( project_get_name( $t_option_project_id ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\n\t\t\t\t<!-- Config option name -->\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'configuration_option' ) ?>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<?php\n                        $c_option_id = string_display_line( $t_option_id );\n\t\t\t\t\t\tif( $t_modify ) {\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<input type=\"text\" name=\"config_option\" class=\"input-sm\"\n\t\t\t\t\t\t\t   value=\"<?php echo $c_option_id ?>\"\n\t\t\t\t\t\t\t   size=\"64\" maxlength=\"64\" />\n\t\t\t\t\t\t<input type=\"hidden\" name=\"original_config_option\" value=\"<?php echo $c_option_id; ?>\" />\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\techo $c_option_id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\n\t\t\t\t<!-- Option type -->\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'configuration_option_type' ) ?>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tif( $t_modify ) {\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<select id=\"config-type\" name=\"type\" class=\"input-sm\">\n\t\t\t\t\t\t\t<?php print_option_list_from_array( config_get_types(), $t_option_type ); ?>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\techo string_display_line( config_get_type_string( $t_option_type ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\n\t\t\t\t<!-- Option Value -->\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'configuration_option_value' ) ?>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tif( $t_modify ) {\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<textarea class=\"form-control\" name=\"value\" cols=\"80\" rows=\"10\"><?php\n\t\t\t\t\t\t\techo config_get_value_as_string( $t_option_type, $t_option_value, false );\n\t\t\t\t\t\t\t?></textarea>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\techo config_get_value_as_string( $t_option_type, $t_option_value, true );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</fieldset>\n\t\t</table>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"widget-toolbox padding-4 clearfix\">\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tif( $t_modify ) {\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"action\" value=\"<?php echo $t_edit_action; ?>\" />\n\t\t\t\t\t\t\t<input type=\"submit\" name=\"config_set\" class=\"btn btn-primary btn-white btn-round\"\n\t\t\t\t\t\t\t\tvalue=\"<?php echo $t_action_label; ?>\"/>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "adm_config_report.php",
          "type": "blob",
          "size": 14.8564453125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Mantis Configuration Report\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\n\naccess_ensure_global_level( config_get( 'view_configuration_threshold' ) );\n\n$t_read_write_access = access_has_global_level( config_get( 'set_configuration_threshold' ) );\n\nrequire_js( 'adm_config_report.js' );\nlayout_page_header( lang_get( 'configuration_report' ) );\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( PAGE_CONFIG_DEFAULT );\nprint_manage_config_menu( 'adm_config_report.php' );\n\n/**\n * Ensures the given config is valid\n * @param string $p_config Configuration name\n * @return string|integer Config name if valid, or META_FILTER_NONE of not\n */\nfunction check_config_value( $p_config ) {\n\tif(    $p_config != META_FILTER_NONE\n\t   && !is_blank( $p_config )\n\t   && is_null( @config_get( $p_config ) )\n\t) {\n\t\treturn META_FILTER_NONE;\n\t}\n\treturn $p_config;\n}\n\n# Get filter values\n$t_filter_save          = gpc_get_bool( 'save' );\n$t_filter_default       = gpc_get_bool( 'default_filter_button', false );\n$t_filter_reset         = gpc_get_bool( 'reset_filter_button', false );\nif( $t_filter_default ) {\n\t$t_filter_user_value    = ALL_USERS;\n\t$t_filter_project_value = ALL_PROJECTS;\n\t$t_filter_config_value  = META_FILTER_NONE;\n} else if( $t_filter_reset ) {\n\t$t_filter_user_value    = META_FILTER_NONE;\n\t$t_filter_project_value = META_FILTER_NONE;\n\t$t_filter_config_value  = META_FILTER_NONE;\n} else {\n\t$t_filter_user_value    = gpc_get_int( 'filter_user_id', ALL_USERS );\n\t$t_filter_project_value = gpc_get_int( 'filter_project_id', ALL_PROJECTS );\n\t$t_filter_config_value  = check_config_value( gpc_get_string( 'filter_config_id', META_FILTER_NONE ) );\n}\n\n# Manage filter's persistency through cookie\n$t_cookie_name = config_get_global( 'manage_config_cookie' );\nif( $t_filter_save ) {\n\t# Save user's filter to the cookie\n\t$t_cookie_string = implode(\n\t\t':',\n\t\tarray(\n\t\t\t$t_filter_user_value,\n\t\t\t$t_filter_project_value,\n\t\t\t$t_filter_config_value,\n\t\t)\n\t);\n\tgpc_set_cookie( $t_cookie_name, $t_cookie_string, true );\n} else {\n\t# Retrieve the filter from the cookie if it exists\n\t$t_cookie_string = gpc_get_cookie( $t_cookie_name, null );\n\n\tif( null !== $t_cookie_string ) {\n\t\t$t_cookie_contents = explode( ':', $t_cookie_string );\n\n\t\t$t_filter_user_value    = (int)$t_cookie_contents[0];\n\t\t$t_filter_project_value = (int)$t_cookie_contents[1];\n\t\t$t_filter_config_value  = check_config_value( $t_cookie_contents[2] );\n\n\t\tif( !user_exists( $t_filter_user_value ) ) {\n\t\t\t$t_filter_user_value = ALL_USERS;\n\t\t}\n\n\t\tif( $t_filter_project_value != META_FILTER_NONE && !project_exists( $t_filter_project_value ) ) {\n\t\t\t$t_filter_project_value = ALL_PROJECTS;\n\t\t}\n\t}\n}\n\n# Apply filters\n\n# Get users in db having specific configs\n$t_sql = 'SELECT DISTINCT c.user_id AS config_uid, u.id, u.username, u.realname'\n\t\t. ' FROM {config} c LEFT JOIN {user} u ON c.user_id=u.id'\n\t\t. ' WHERE c.user_id <> :all_users ORDER BY c.user_id';\n$t_query = new DbQuery( $t_sql, array( 'all_users' => ALL_USERS ) );\n$t_users_list = array();\n$t_users_ids = array();\n$t_sort = array();\n$t_deleted_users = array();\nwhile( $t_row = $t_query->fetch() ) {\n\tif( empty( $t_row['id'] ) ) {\n\t\t# the user doesn't exist, deleted\n\t\t$t_deleted_users[] = (int)$t_row['config_uid'];\n\t\tcontinue;\n\t}\n\t$t_users_ids[] = (int)$t_row['id'];\n\t$t_users_list[] = user_get_name_from_row( $t_row );\n\t$t_sort[] = user_get_name_for_sorting_from_row( $t_row );\n}\nif( !empty( $t_deleted_users ) ) {\n\tuser_cache_array_rows( $t_deleted_users );\n\tforeach( $t_deleted_users as $t_id ) {\n\t\t$t_users_ids[] = $t_id;\n\t\t$t_name = user_get_name( $t_id );\n\t\t$t_users_list[] = $t_name;\n\t\t$t_sort[] = $t_name;\n\t}\n}\nif( $t_filter_user_value != META_FILTER_NONE && $t_filter_user_value != ALL_USERS ) {\n\t# Make sure the filter value exists in the list\n\t$t_row = user_get_row( $t_filter_user_value );\n\t$t_users_ids[] = $t_filter_user_value;\n\t$t_users_list[] = user_get_name_from_row( $t_row );\n\t$t_sort[] = user_get_name_for_sorting_from_row( $t_row );\n}\nuser_cache_array_rows( $t_users_ids );\narray_multisort( $t_sort, SORT_ASC, SORT_NATURAL | SORT_FLAG_CASE, $t_users_list, $t_users_ids );\n$t_users_list = array_combine( $t_users_ids, $t_users_list );\n\n# Prepend '[any]' and 'All Users' to the list\n$t_users_list = array(\n\t\tMETA_FILTER_NONE => '[' . lang_get( 'any' ) . ']',\n\t\tALL_USERS        => lang_get( 'all_users' ),\n\t)\n\t+ $t_users_list;\n\n# Get projects in db with specific configs\n$t_query = 'SELECT DISTINCT project_id, pt.name as project_name\n\tFROM {config} ct\n\tJOIN {project} pt ON pt.id = ct.project_id\n\tWHERE project_id!=0\n\tORDER BY project_name';\n$t_result = db_query( $t_query );\n$t_projects_list[META_FILTER_NONE] = '[' . lang_get( 'any' ) . ']';\n$t_projects_list[ALL_PROJECTS] = lang_get( 'all_projects' );\nwhile( $t_row = db_fetch_array( $t_result ) ) {\n\t/**\n\t * @var integer $v_project_id\n\t * @var string  $v_project_name\n\t */\n\textract( $t_row, EXTR_PREFIX_ALL, 'v' );\n\t$t_projects_list[$v_project_id] = $v_project_name;\n}\n\n# Get config list used in db\n$t_query = 'SELECT DISTINCT config_id FROM {config} ORDER BY config_id';\n$t_result = db_query( $t_query );\n$t_configs_list[META_FILTER_NONE] = '[' . lang_get( 'any' ) . ']';\nif( $t_filter_config_value != META_FILTER_NONE ) {\n\t# Make sure the filter value exists in the list\n\t$t_configs_list[$t_filter_config_value] = $t_filter_config_value;\n}\nwhile( $t_row = db_fetch_array( $t_result ) ) {\n\t/**\n\t * @var string $v_config_id\n\t */\n\textract( $t_row, EXTR_PREFIX_ALL, 'v' );\n\t$t_configs_list[$v_config_id] = $v_config_id;\n}\n\n# Build config query\n$t_sql = 'SELECT config_id, user_id, project_id, type, access_reqd,'\n\t\t. ' CASE type WHEN :complex THEN null ELSE value END AS value'\n\t\t. ' FROM {config} WHERE 1=1';\nif( $t_filter_user_value != META_FILTER_NONE ) {\n\t$t_sql .= ' AND user_id = :user_id';\n}\nif( $t_filter_project_value != META_FILTER_NONE ) {\n\t$t_sql .= ' AND project_id = :project_id';\n}\nif( $t_filter_config_value != META_FILTER_NONE ) {\n\t$t_sql .= ' AND config_id = :config_id';\n}\n$t_sql .= ' ORDER BY user_id, project_id, config_id ';\n$t_params = array(\n\t'user_id' => $t_filter_user_value,\n\t'project_id' => $t_filter_project_value,\n\t'config_id' => $t_filter_config_value,\n\t'complex' => CONFIG_TYPE_COMPLEX\n\t);\n$t_config_query = new DbQuery( $t_sql, $t_params );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n\n<!-- FILTER FORM -->\n<form id=\"filter_form\" method=\"post\">\n\t<?php # CSRF protection not required here - form does not result in modifications ?>\n\t\t<input type=\"hidden\" name=\"save\" value=\"1\" />\n\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n<h4 class=\"widget-title lighter\">\n\t<?php print_icon( 'fa-filter', 'ace-icon' ); ?>\n\t<?php echo lang_get( 'filters' ) ?>\n</h4>\n</div>\n\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t<table class=\"table table-striped table-bordered table-condensed\">\n\t\t<!-- Title -->\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>\n\t\t\t\t\t<label for=\"filter_user_id\"><?php echo lang_get( 'username' ); ?></label>\n\t\t\t\t</th>\n\t\t\t\t<th>\n\t\t\t\t\t<label for=\"filter_project_id\"><?php echo lang_get( 'project_name' ); ?></label>\n\t\t\t\t</th>\n\t\t\t\t<th>\n\t\t\t\t\t<label for=\"filter_config_id\"><?php echo lang_get( 'configuration_option' ); ?></label>\n\t\t\t\t</th>\n\t\t\t</tr>\n\t\t</thead>\n\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<select name=\"filter_user_id\" id=\"filter_user_id\" class=\"input-sm\">\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tprint_option_list_from_array( $t_users_list, $t_filter_user_value );\n\t\t\t\t\t\t?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select name=\"filter_project_id\" id=\"filter_project_id\" class=\"input-sm\">\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tprint_option_list_from_array( $t_projects_list, $t_filter_project_value );\n\t\t\t\t\t\t?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select name=\"filter_config_id\" id=\"filter_config_id\" class=\"input-sm\">\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tprint_option_list_from_array( $t_configs_list, $t_filter_config_value );\n\t\t\t\t\t\t?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n</div>\n<div class=\"widget-toolbox padding-8 clearfix\">\n\t<div class=\"btn-toolbar\">\n\t\t<div class=\"btn-group\">\n\t\t\t<input name=\"apply_filter_button\" type=\"submit\" class=\"btn btn-sm btn-primary btn-white btn-round\"\n\t\t\t\tvalue=\"<?php echo lang_get( 'filter_button' )?>\" />\n\n\t\t\t<input name=\"default_filter_button\" type=\"submit\" class=\"btn btn-sm btn-primary btn-white btn-round\"\n\t\t\t\tvalue=\"<?php echo lang_get( 'default_filter' )?>\" />\n\n\t\t\t<input name=\"reset_filter_button\" type=\"submit\" class=\"btn btn-sm btn-primary btn-white btn-round\"\n\t\t\t\tvalue=\"<?php echo lang_get( 'reset_query' )?>\" />\n\t\t</div>\n\t</div>\n</div>\n</div>\n</div>\n</form>\n\n\n<div class=\"space-10\"></div>\n\n<!-- CONFIGURATIONS LIST -->\n<a id=\"database_configuration\"></a>\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n<h4 class=\"widget-title lighter\">\n\t<?php print_icon( 'fa-database', 'ace-icon' ); ?>\n\t<?php echo lang_get( 'database_configuration' ) ?>\n</h4>\n</div>\n\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<?php\n\t\t$t_url_new = 'adm_config_page.php?action=' . MANAGE_CONFIG_ACTION_CREATE;\n\t\t$t_label = lang_get( 'set_configuration_option_action_' . MANAGE_CONFIG_ACTION_CREATE );\n\t\tprint_link_button( $t_url_new, $t_label );\n\n\t\tprint_link_button(\n\t\t\t'#database_configuration',\n\t\t\tsprintf( lang_get( 'show_all_complex' ), config_get_type_string( CONFIG_TYPE_COMPLEX ) ),\n\t\t\t'expand_all'\n\t\t);\n\t\t?>\n\t</div>\n<div class=\"table-responsive sortable\">\n\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th><?php echo lang_get( 'username' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'project_name' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'configuration_option' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'configuration_option_type' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'configuration_option_value' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'access_level' ) ?></th>\n\t\t\t\t<?php if( $t_read_write_access ) { ?>\n\t\t\t\t<th class=\"no-sort\"><?php echo lang_get( 'actions' ) ?></th>\n\t\t\t\t<?php } ?>\n\t\t\t</tr>\n\t\t</thead>\n\n\t\t<tbody>\n<?php\n# Pre-generate a form security token to avoid performance issues when the\n# db contains a large number of configurations\n$t_form_security_token = form_security_token( 'adm_config_delete' );\n\nwhile( $t_row = $t_config_query->fetch() ) {\n\t/**\n\t * @var integer $v_type\n\t * @var integer $v_user_id\n\t * @var integer $v_project_id\n\t * @var string  $v_config_id\n\t * @var mixed   $v_value\n\t * @var integer $v_access_reqd\n\t */\n\textract( $t_row, EXTR_PREFIX_ALL, 'v' );\n\n\t# For complex values, the content is not rendered\n\tif( CONFIG_TYPE_COMPLEX == $v_type ) {\n\t\t$t_url_params = array(\n\t\t\t\t\t'user_id'       => $v_user_id,\n\t\t\t\t\t'project_id'    => $v_project_id,\n\t\t\t\t\t'config_option' => $v_config_id,\n\t\t\t\t\t'action'        => MANAGE_CONFIG_ACTION_VIEW\n\t\t\t\t);\n\t\t$t_url_view = helper_url_combine( 'adm_config_page.php', http_build_query( $t_url_params ) );\n\t\t$t_html_value = '<div class=\"adm_config_expand\" data-config_id=\"' . $v_config_id . '\"'\n\t\t\t\t. ' data-project_id=\"' . $v_project_id . '\" data-user_id=\"' . $v_user_id . '\">'\n\t\t\t\t. '<span class =\"expand_show\"><a href=\"' . $t_url_view . '\" class=\"toggle small\">[' . lang_get( 'show_content' ) . ']</a></span>'\n\t\t\t\t. '<span class =\"expand_hide hidden\"><a href=\"#\" class=\"toggle small\">[' . lang_get( 'hide_content' ) . ']</a></span>'\n\t\t\t\t. '<div class=\"expand_content\"></div>'\n\t\t\t\t. '</div>';\n\t} else {\n\t\t$t_html_value = config_get_value_as_string( $v_type, $v_value );\n\t}\n\n?>\n<!-- Repeated Info Rows -->\n\t\t\t<tr class=\"visible-on-hover-toggle\">\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo ($v_user_id == 0) ? lang_get( 'all_users' ) : string_display_line( user_get_name( $v_user_id ) ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td><?php echo string_display_line( project_get_name( $v_project_id, false ) ) ?></td>\n\t\t\t\t<td><?php echo string_display_line( $v_config_id ) ?></td>\n\t\t\t\t<td><?php echo string_display_line( config_get_type_string( $v_type ) ) ?></td>\n\t\t\t\t<td style=\"overflow-x:auto;\"><?php echo $t_html_value ?></td>\n\t\t\t\t<td><?php echo get_enum_element( 'access_levels', $v_access_reqd ) ?></td>\n<?php\n\tif( $t_read_write_access ) {\n?>\n<td class=\"center\">\n\t<div class=\"btn-group inline visible-on-hover\">\n<?php\n\t\tif( config_can_delete( $v_config_id ) ) {\n\t\t\t$t_action_params = array(\n\t\t\t\t\t'user_id'       => $v_user_id,\n\t\t\t\t\t'project_id'    => $v_project_id,\n\t\t\t\t\t'config_option' => $v_config_id,\n\t\t\t\t);\n\n\t\t\t# Update button\n\t\t\t$t_action_params['action'] = MANAGE_CONFIG_ACTION_EDIT;\n\t\t\t$t_url_edit = helper_url_combine( 'adm_config_page.php', http_build_query( $t_action_params ) );\n\t\t\techo '<div class=\"pull-left\">';\n\t\t\tprint_link_button( $t_url_edit, lang_get( 'edit' ), 'btn-xs' );\n\t\t\techo '</div>';\n\n\t\t\t# Clone button\n\t\t\techo '<div class=\"pull-left\">';\n\t\t\t$t_action_params['action'] = MANAGE_CONFIG_ACTION_CLONE;\n\t\t\t$t_url_clone = helper_url_combine( 'adm_config_page.php', http_build_query( $t_action_params ) );\n\t\t\tprint_link_button( $t_url_clone, lang_get( 'create_child_bug_button' ), 'btn-xs' );\n\t\t\techo '</div>';\n\n\t\t\t# Delete button\n\t\t\techo '<div class=\"pull-left\">';\n\t\t\tprint_form_button(\n\t\t\t\t'adm_config_delete.php',\n\t\t\t\tlang_get( 'delete' ),\n\t\t\t\tarray(\n\t\t\t\t\t'user_id'       => $v_user_id,\n\t\t\t\t\t'project_id'    => $v_project_id,\n\t\t\t\t\t'config_option' => $v_config_id,\n\t\t\t\t),\n\t\t\t\t$t_form_security_token\n\t\t\t);\n\t\t\techo '</div>';\n\t\t} else {\n\t\t\techo '&#160;';\n\t\t}\n?>\n\t</div>\n\t\t\t\t</td>\n<?php\n\t} # end if config_can_delete\n?>\n\t\t\t</tr>\n<?php\n} # end while loop\n?>\n\t\t</tbody>\n\t</table>\n</div>\n</div>\n</div>\n</div>\n\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "adm_config_set.php",
          "type": "blob",
          "size": 3.6298828125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page stores the reported bug\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses error_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'adm_config_set' );\n\n$f_user_id = gpc_get_int( 'user_id' );\n$f_project_id = gpc_get_int( 'project_id' );\n$f_config_option = trim( gpc_get_string( 'config_option' ) );\n$f_type = gpc_get_string( 'type' );\n$f_value = gpc_get_string( 'value' );\n$f_original_user_id = gpc_get_int( 'original_user_id' );\n$f_original_project_id = gpc_get_int( 'original_project_id' );\n$f_original_config_option = gpc_get_string( 'original_config_option' );\n$f_edit_action = gpc_get_string( 'action' );\n\n# For 'default', behavior is based on the global variable's type\n# If value is empty, process as per default to ensure proper typecast\nif( $f_type == CONFIG_TYPE_DEFAULT || empty( $f_value ) ) {\n\t$t_config_global_value = config_get_global( $f_config_option );\n\tif( is_string( $t_config_global_value ) ) {\n\t\t$t_type = CONFIG_TYPE_STRING;\n\t} else if( is_int( $t_config_global_value ) ) {\n\t\t$t_type = CONFIG_TYPE_INT;\n\t} else if( is_float( $t_config_global_value ) ) {\n\t\t$t_type = CONFIG_TYPE_FLOAT;\n\t} else {\n\t\t# note that we consider bool and float as complex.\n\t\t# We use ON/OFF for bools which map to numeric.\n\t\t$t_type = CONFIG_TYPE_COMPLEX;\n\t}\n} else {\n\t$t_type = $f_type;\n}\n\n# Parse the value\n# - Strings are returned as-is\n# - Empty values are typecast as appropriate\n$t_value = $f_value;\nif( $t_type != CONFIG_TYPE_STRING ) {\n\ttry {\n\t\tif( !empty( $f_value ) ) {\n\t\t\t$t_parser = new ConfigParser( $f_value );\n\t\t\t$t_value = $t_parser->parse( ConfigParser::EXTRA_TOKENS_IGNORE );\n\t\t}\n\n\t\tswitch( $t_type ) {\n\t\t\tcase CONFIG_TYPE_INT:\n\t\t\t\t$t_value = (int)$t_value;\n\t\t\t\tbreak;\n\t\t\tcase CONFIG_TYPE_FLOAT:\n\t\t\t\t$t_value = (float)$t_value;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\tcatch (Exception $e) {\n\t\terror_parameters( $f_config_option, $e->getMessage() );\n\t\ttrigger_error(ERROR_CONFIG_OPT_BAD_SYNTAX, ERROR);\n\t}\n}\n\n$t_data = array(\n\t'payload' => array(\n\t\t'user' => array( 'id' => $f_user_id ),\n\t\t'project' => array( 'id' => $f_project_id ),\n\t\t'configs' => array(\n\t\t\tarray(\n\t\t\t\t'option' => $f_config_option,\n\t\t\t\t'value' => $t_value,\n\t\t\t)\n\t\t)\n\t),\n\t'options' => array(\n\t\t'edit_action' => $f_edit_action,\n\t\t'original_user_id' => $f_original_user_id,\n\t\t'original_project_id' => $f_original_project_id,\n\t\t'original_option' => $f_original_config_option,\n\t)\n);\n\n$t_command = new ConfigsSetCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'adm_config_set' );\n\nprint_header_redirect( 'adm_config_report.php' );\n"
        },
        {
          "name": "adm_permissions_report.php",
          "type": "blob",
          "size": 8.0908203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Permissions Report\n * @package MantisBT\n * @author Marcello Scata' <marcelloscata at users.sourceforge.net> ITALY\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'string_api.php' );\n\naccess_ensure_project_level( config_get( 'manage_configuration_threshold' ) );\n\nlayout_page_header( lang_get( 'permissions_summary_report' ) );\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( PAGE_CONFIG_DEFAULT );\nprint_manage_config_menu( 'adm_permissions_report.php' );\n\n\n/**\n * return html for start of administration report section\n * @param string $p_section_name Section name.\n * @return string\n */\nfunction get_section_begin_apr( $p_section_name ) {\n\t$t_access_levels = MantisEnum::getValues( config_get( 'access_levels_enum_string' ) );\n\n\t$t_output = '<div class=\"col-md-12 col-xs-12\">';\n\t$t_output .= '<div class=\"space-10\"></div>';\n\n\t$t_output .= '<div class=\"widget-box widget-color-blue2\">';\n\t$t_output .= '   <div class=\"widget-header widget-header-small\">';\n\t$t_output .= '        <h4 class=\"widget-title lighter uppercase\">';\n\t$t_output .= '            ' . icon_get( 'fa-lock', 'ace-icon' );\n\t$t_output .= $p_section_name;\n\t$t_output .= '       </h4>';\n\t$t_output .= '   </div>';\n\t$t_output .= '   <div class=\"widget-body\">';\n\t$t_output .= '   <div class=\"widget-main no-padding\">';\n\n\t$t_output .= '       <div class=\"table-responsive\">';\n\t$t_output .= '           <table class=\"table table-striped table-hover table-bordered table-condensed\">';\n\n\t$t_output .= '<thead>';\n\t$t_output .= '<tr>';\n\t$t_output .= '<th class=\"bold\">' . lang_get( 'perm_rpt_capability' ) . '</th>';\n\n\tforeach( $t_access_levels as $t_access_level ) {\n\t\t$t_output .= '<th class=\"bold\" style=\"text-align:center\">&#160;' . MantisEnum::getLabel( lang_get( 'access_levels_enum_string' ), $t_access_level ) . '&#160;</th>';\n\t}\n\n\t$t_output .= '</tr>' . \"\\n\";\n\t$t_output .= '</thead>';\n\t$t_output .= '<tbody>';\n\n\treturn $t_output;\n}\n\n/**\n * Return html for a row\n * @param string  $p_caption      Caption.\n * @param integer $p_access_level Access level.\n * @return string\n */\nfunction get_capability_row( $p_caption, $p_access_level ) {\n\t$t_access_levels = MantisEnum::getValues( config_get( 'access_levels_enum_string' ) );\n\n\t$t_output = '<tr><td>' . string_display_line( $p_caption ) . '</td>';\n\tforeach( $t_access_levels as $t_access_level ) {\n\t\tif( $t_access_level >= (int)$p_access_level ) {\n\t\t\t$t_value = icon_get( 'fa-check', 'fa-lg blue' );\n\t\t} else {\n\t\t\t$t_value = '&#160;';\n\t\t}\n\n\t\t$t_output .= '<td class=\"center\">' . $t_value . '</td>';\n\t}\n\n\t$t_output .= '</tr>' . \"\\n\";\n\n\treturn $t_output;\n}\n\n/**\n * return html for end of administration report section\n * @return string\n */\nfunction get_section_end() {\n\t$t_output = '</tbody></table></div> ' . \"\\n\";\n\t$t_output .= '</div></div></div></div> ' . \"\\n\";\n\t$t_output .= '<div class=\"space-10\"></div>';\n\treturn $t_output;\n}\n\n# News\nif( config_get( 'news_enabled' ) == ON ) {\n\techo get_section_begin_apr( lang_get( 'news' ) );\n\techo get_capability_row( lang_get( 'view_private_news' ), config_get( 'private_news_threshold' ) );\n\techo get_capability_row( lang_get( 'manage_news' ), config_get( 'manage_news_threshold' ) );\n\techo get_section_end();\n}\n\n# Attachments\nif( config_get( 'allow_file_upload' ) == ON ) {\n\techo get_section_begin_apr( lang_get( 'attachments' ) );\n\techo get_capability_row( lang_get( 'view_list_of_attachments' ), config_get( 'view_attachments_threshold' ) );\n\techo get_capability_row( lang_get( 'download_attachments' ), config_get( 'download_attachments_threshold' ) );\n\techo get_capability_row( lang_get( 'delete_attachments' ), config_get( 'delete_attachments_threshold' ) );\n\techo get_capability_row( lang_get( 'upload_issue_attachments' ), config_get( 'upload_bug_file_threshold' ) );\n\techo get_section_end();\n}\n\n# Filters\necho get_section_begin_apr( lang_get( 'filters' ) );\necho get_capability_row( lang_get( 'save_filters' ), config_get( 'stored_query_create_threshold' ) );\necho get_capability_row( lang_get( 'save_filters_as_shared' ), config_get( 'stored_query_create_shared_threshold' ) );\necho get_capability_row( lang_get( 'use_saved_filters' ), config_get( 'stored_query_use_threshold' ) );\necho get_section_end();\n\n# Projects\necho get_section_begin_apr( lang_get( 'projects_link' ) );\necho get_capability_row( lang_get( 'create_project' ), config_get( 'create_project_threshold' ) );\necho get_capability_row( lang_get( 'delete_project' ), config_get( 'delete_project_threshold' ) );\necho get_capability_row( lang_get( 'manage_projects_link' ), config_get( 'manage_project_threshold' ) );\necho get_capability_row( lang_get( 'manage_user_access_to_project' ), config_get( 'project_user_threshold' ) );\necho get_capability_row( lang_get( 'automatically_included_in_private_projects' ), config_get( 'private_project_threshold' ) );\necho get_section_end();\n\n# Project Documents\nif( config_get( 'enable_project_documentation' ) == ON ) {\n\techo get_section_begin_apr( lang_get( 'project_documents' ) );\n\techo get_capability_row( lang_get( 'view_project_documents' ), config_get( 'view_proj_doc_threshold' ) );\n\techo get_capability_row( lang_get( 'upload_project_documents' ), config_get( 'upload_project_file_threshold' ) );\n\techo get_section_end();\n}\n\n# Custom Fields\necho get_section_begin_apr( lang_get( 'custom_fields_setup' ) );\necho get_capability_row( lang_get( 'manage_custom_field_link' ), config_get( 'manage_custom_fields_threshold' ) );\necho get_capability_row( lang_get( 'link_custom_fields_to_projects' ), config_get( 'custom_field_link_threshold' ) );\necho get_section_end();\n\n# Sponsorships\nif( config_get( 'enable_sponsorship' ) == ON ) {\n\techo get_section_begin_apr( lang_get( 'sponsorships' ) );\n\techo get_capability_row( lang_get( 'view_sponsorship_details' ), config_get( 'view_sponsorship_details_threshold' ) );\n\techo get_capability_row( lang_get( 'view_sponsorship_total' ), config_get( 'view_sponsorship_total_threshold' ) );\n\techo get_capability_row( lang_get( 'sponsor_issue' ), config_get( 'sponsor_threshold' ) );\n\techo get_capability_row( lang_get( 'assign_sponsored_issue' ), config_get( 'assign_sponsored_bugs_threshold' ) );\n\techo get_capability_row( lang_get( 'handle_sponsored_issue' ), config_get( 'handle_sponsored_bugs_threshold' ) );\n\techo get_section_end();\n}\n\n# Others\necho get_section_begin_apr( lang_get( 'others' ) );\necho get_capability_row( lang_get( 'view' ) . ' ' . lang_get( 'summary_link' ), config_get( 'view_summary_threshold' ) );\necho get_capability_row( lang_get( 'see_email_addresses_of_other_users' ), config_get( 'show_user_email_threshold' ) );\necho get_capability_row( lang_get( 'send_reminders' ), config_get( 'bug_reminder_threshold' ) );\necho get_capability_row( lang_get( 'add_profiles' ), config_get( 'add_profile_threshold' ) );\necho get_capability_row( lang_get( 'manage_users_link' ), config_get( 'manage_user_threshold' ) );\necho get_capability_row( lang_get( 'notify_of_new_user_created' ), config_get( 'notify_new_user_created_threshold_min' ) );\necho get_section_end();\n\nlayout_page_end();\n"
        },
        {
          "name": "admin",
          "type": "tree",
          "content": null
        },
        {
          "name": "api",
          "type": "tree",
          "content": null
        },
        {
          "name": "api_token_create.php",
          "type": "blob",
          "size": 2.1376953125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page stores the reported bug\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses api_token_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'api_token_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'create_api_token_form' );\n\nauth_ensure_user_authenticated();\nauth_reauthenticate();\n\n$f_token_name = gpc_get_string( 'token_name' );\n$t_user_id = auth_get_current_user_id();\n\n$t_data = array(\n\t'query' => array(\n\t\t'user_id' => $t_user_id,\n\t),\n\t'payload' => array(\n\t\t'name' => $f_token_name,\n\t),\n);\n\n$t_command = new UserTokenCreateCommand( $t_data );\n$t_result = $t_command->execute();\n\n$t_token = $t_result['token'];\n\n$t_disclose_message = lang_get( 'api_token_disclose_message' );\n$t_display_once_message = lang_get( 'api_token_displayed_once' );\n\nform_security_purge( 'create_api_token_form' );\n\nlayout_page_header( lang_get( 'api_tokens_link' ) );\n\nlayout_page_begin();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<h2><?php echo $t_disclose_message ?></h2>\n<div class=\"lead red\"><?php echo $t_display_once_message ?></div>\n<div class=\"space-10\"></div>\n<div class=\"well\"><?php echo string_display_line( $t_token ) ?></div>\n<div class=\"space-10\"></div>\n<?php print_link_button( 'api_tokens_page.php', lang_get( 'api_tokens_link' ) ) ?>\n</div>\n<?php\nlayout_page_end();\n\n"
        },
        {
          "name": "api_token_revoke.php",
          "type": "blob",
          "size": 1.984375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page stores the reported bug\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses api_token_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'api_token_api.php' );\n\nform_security_validate( 'revoke_api_token_form' );\n\nauth_ensure_user_authenticated();\nauth_reauthenticate();\n\n$f_token_id = gpc_get_int( 'token_id' );\n$t_token_row = api_token_get( $f_token_id );\n$t_token_name = $t_token_row['name'];\n\n$t_user_id = auth_get_current_user_id();\n\n$t_data = array(\n\t'query' => array(\n\t\t'user_id' => $t_user_id,\n\t\t'id' => $f_token_id,\n\t),\n);\n\n$t_command = new UserTokenDeleteCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'revoke_api_token_form' );\n\nlayout_page_header_begin();\nhtml_meta_redirect( 'api_tokens_page.php' );\nlayout_page_header_end();\n\nlayout_page_begin( 'api_tokens_page.php' );\n\necho '<div class=\"col-md-12 col-xs-12\">';\necho '<div class=\"space-10\"></div>';\necho '<div class=\"lead\">' . sprintf( lang_get( 'api_token_revoked' ), string_display_line( $t_token_name ) ) . '</div>';\necho '<div class=\"space-10\"></div>';\nprint_link_button( 'api_tokens_page.php', lang_get( 'api_tokens_link' ) );\necho '</div>';\n\nlayout_page_end();\n\n"
        },
        {
          "name": "api_tokens_page.php",
          "type": "blob",
          "size": 4.7705078125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses api_token_api.php\n * @uses authentication_api.php\n * @uses current_user_api.php\n * @uses database_api.php\n * @uses html_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'api_token_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'html_api.php' );\n\nauth_ensure_user_authenticated();\nauth_reauthenticate();\n\ncurrent_user_ensure_unprotected();\n\nif( !api_token_can_create() ) {\n\taccess_denied();\n}\n\nlayout_page_header( lang_get( 'api_tokens_link' ) );\nlayout_page_begin();\nprint_account_menu( 'api_tokens_page.php' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\n<div id=\"api-token-create-div\" class=\"form-container\">\n\t<form id=\"account-create-api-token-form\" method=\"post\" action=\"api_token_create.php\">\n\n<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-plus', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'api_token_create_form_title' ) ?>\n\t\t</h4>\n\t</div>\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div class=\"table-responsive\">\n\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n<?php echo form_security_field( 'create_api_token_form' ); ?>\n\n<tr>\n\t<td class=\"category\">\n\t\t<span class=\"required\">*</span>\n\t\t<label for=\"token_name\" class=\"required\">\n\t\t\t<?php echo lang_get( 'api_token_name' ) ?>\n\t\t</label>\n\t</td>\n\t<td>\n\t\t<input id=\"token_name\" name=\"token_name\"\n\t\t\t   type=\"text\" required class=\"input-sm\" size=\"64\"\n\t\t\t   maxlength=\"<?php echo DB_FIELD_SIZE_API_TOKEN_NAME; ?>\"\n\t\t/>\n\t</td>\n</tr>\n\n\n</fieldset>\n</table>\n\t\t</div>\n\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'api_token_create_button' ) ?>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n\n\t</form>\n</div>\n<?php\n$t_user_id = auth_get_current_user_id();\n$t_tokens = api_token_get_all( $t_user_id );\n$t_date_format = config_get( 'normal_date_format' );\n\nif ( count( $t_tokens ) > 0 ) {\n?>\n\t<div class=\"space-10\"></div>\n\n\t<div id=\"api-token-list-div\" class=\"form-container\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-ticket', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'api_tokens_title' ) ?>\n\t\t</h4>\n\t</div>\n\t<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr class=\"row-category\">\n\t\t\t\t<th><?php echo lang_get( 'api_token_name' ); ?></th>\n\t\t\t\t<th><?php echo lang_get( 'date_created' ); ?></th>\n\t\t\t\t<th><?php echo lang_get( 'last_used' ); ?></th>\n\t\t\t\t<th><?php echo lang_get( 'actions' ); ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t<?php foreach( $t_tokens as $t_token ) {\n\t\t\textract( $t_token, EXTR_PREFIX_ALL, 'u' );\n\n\t\t\t$u_date_created  = date( $t_date_format, $u_date_created );\n\n\t\t\tif( api_token_is_used( $t_token ) ) {\n\t\t\t\t$u_date_used = date( $t_date_format, $u_date_used );\n\t\t\t} else {\n\t\t\t\t$u_date_used = lang_get( 'api_token_never_used' );\n\t\t\t}\n\t\t?>\n\t\t\t<tr>\n\t\t\t\t<td><?php echo string_display_line( $u_name ) ?></td>\n\t\t\t\t<td><?php echo string_display_line( $u_date_created ) ?></td>\n\t\t\t\t<td><?php echo string_display_line( $u_date_used ) ?></td>\n\t\t\t\t<td>\n\t\t\t\t\t<form id=\"revoke-api-token-form\" method=\"post\" action=\"api_token_revoke.php\">\n\t\t\t\t\t\t<?php echo form_security_field( 'revoke_api_token_form' ); ?>\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<input id=\"token_id\" type=\"hidden\" name=\"token_id\" value=\"<?php echo $u_id ; ?>\" />\n\t\t\t\t\t\t\t<input type=\"submit\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'api_token_revoke_button' ) ?>\" />\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t</form>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t<?php } ?>\n\t\t</tbody>\n\t</table>\n</div>\n</div>\n</div>\n<?php\n}\n\necho '</div>';\nlayout_page_end();"
        },
        {
          "name": "billing_export_to_csv.php",
          "type": "blob",
          "size": 3.1728515625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Export billing information to csv\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses billing_api.php\n * @uses bug_api.php\n * @uses csv_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'billing_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'csv_api.php' );\n\nhelper_begin_long_process();\n\n$t_date_format = config_get( 'normal_date_format' );\n\n$f_project_id = gpc_get_int( 'project_id' );\n$f_cost = gpc_get_int( 'cost' );\n$f_from = gpc_get_string( 'from' );\n$f_to = gpc_get_string( 'to' );\n$f_include_subprojects = gpc_get_bool( 'include_subprojects' );\n\n$t_new_line = csv_get_newline();\n$t_separator = csv_get_separator();\n\nbilling_ensure_reporting_access( $f_project_id );\n\n$t_show_cost = ON == config_get( 'time_tracking_with_billing' ) && $f_cost != 0;\n\n$t_billing_rows = billing_get_for_project( $f_project_id, $f_from, $f_to, $f_cost, $f_include_subprojects );\n\ncsv_start( csv_get_default_filename() );\n\necho csv_escape_string( lang_get( 'issue_id' ) ) . $t_separator;\necho csv_escape_string( lang_get( 'project_name' ) ) . $t_separator;\necho csv_escape_string( lang_get( 'category' ) ) . $t_separator;\necho csv_escape_string( lang_get( 'summary' ) ) . $t_separator;\necho csv_escape_string( lang_get( 'username' ) ) . $t_separator;\necho csv_escape_string( lang_get( 'timestamp' ) ) . $t_separator;\necho csv_escape_string( lang_get( 'minutes' ) ) . $t_separator;\necho csv_escape_string( lang_get( 'time_tracking_time_spent' ) ) . $t_separator;\n\nif( $t_show_cost ) {\n\techo csv_escape_string( 'cost' ) . $t_separator;\n}\n\necho csv_escape_string( 'note' );\necho $t_new_line;\n\nforeach( $t_billing_rows as $t_billing ) {\n\techo csv_escape_string( bug_format_id( $t_billing['bug_id'] ) ) . $t_separator;\n\techo csv_escape_string( $t_billing['project_name'] ) . $t_separator;\n\techo csv_escape_string( $t_billing['bug_category'] ) . $t_separator;\n\techo csv_escape_string( $t_billing['bug_summary'] ) . $t_separator;\n\techo csv_escape_string( $t_billing['reporter_name'] ) . $t_separator;\n\techo csv_escape_string( date( $t_date_format, $t_billing['date_submitted'] ) ) . $t_separator;\n\techo csv_escape_string( $t_billing['minutes'] ) . $t_separator;\n\techo csv_escape_string( $t_billing['duration'] ) . $t_separator;\n\n\tif( $t_show_cost ) {\n\t\techo csv_escape_string( $t_billing['cost'] ) . $t_separator;\n\t}\n\n\techo csv_escape_string( $t_billing['note'] );\n\techo $t_new_line;\n}\n\n\n"
        },
        {
          "name": "billing_export_to_excel.php",
          "type": "blob",
          "size": 3.2744140625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Excel (2003 SP2 and above) export page for billing information\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses billing_api.php\n * @uses bug_api.php\n * @uses excel_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'billing_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'excel_api.php' );\n\nhelper_begin_long_process();\n\n$t_filename = excel_get_default_filename();\n$t_date_format = config_get( 'normal_date_format' );\n\n$f_project_id = gpc_get_int( 'project_id' );\n$f_cost = gpc_get_int( 'cost' );\n$f_from = gpc_get_string( 'from' );\n$f_to = gpc_get_string( 'to' );\n$f_include_subprojects = gpc_get_bool( 'include_subprojects' );\n\nbilling_ensure_reporting_access( $f_project_id );\n\n$t_show_cost = ON == config_get( 'time_tracking_with_billing' ) && $f_cost != 0;\n\n$t_billing_rows = billing_get_for_project( $f_project_id, $f_from, $f_to, $f_cost, $f_include_subprojects );\n\nheader( 'Content-Type: application/vnd.ms-excel; charset=UTF-8' );\nheader( 'Pragma: public' );\nheader( 'Content-Disposition: attachment; filename=\"' . urlencode( file_clean_name( $t_filename ) ) . '.xml\"' ) ;\n\necho excel_get_header( $t_filename );\necho excel_get_start_row();\necho excel_format_column_title( lang_get( 'issue_id' ) );\necho excel_format_column_title( lang_get( 'project_name' ) );\necho excel_format_column_title( lang_get( 'category' ) );\necho excel_format_column_title( lang_get( 'summary' ) );\necho excel_format_column_title( lang_get( 'username' ) );\necho excel_format_column_title( lang_get( 'timestamp' ) );\necho excel_format_column_title( lang_get( 'minutes' ) );\necho excel_format_column_title( lang_get( 'time_tracking_time_spent' ) );\n\nif( $t_show_cost ) {\n\techo excel_format_column_title( 'cost' );\n}\n\necho excel_format_column_title( 'note' );\necho '</Row>';\n\nforeach( $t_billing_rows as $t_billing ) {\n\techo \"\\n<Row>\\n\";\n\techo excel_prepare_number( $t_billing['bug_id'] );\n\techo excel_prepare_string( $t_billing['project_name'] );\n\techo excel_prepare_string( $t_billing['bug_category'] );\n\techo excel_prepare_string( $t_billing['bug_summary'] );\n\techo excel_prepare_string( $t_billing['reporter_name'] );\n\techo excel_prepare_string( date( $t_date_format, $t_billing['date_submitted'] ) );\n\techo excel_prepare_number( $t_billing['minutes'] );\n\techo excel_prepare_string( $t_billing['duration'] );\n\n\tif( $t_show_cost ) {\n\t\techo excel_prepare_string( $t_billing['cost'] );\n\t}\n\n\techo excel_prepare_string( $t_billing['note'] );\n\techo \"</Row>\\n\";\n}\n\necho excel_get_footer();\n\n"
        },
        {
          "name": "billing_inc.php",
          "type": "blob",
          "size": 10.298828125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This include file prints out the bug bugnote_stats\n * $f_bug_id must already be defined\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses bugnote_api.php\n * @uses collapse_api.php\n * @uses config_api.php\n * @uses database_api.php\n * @uses filter_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nif( !defined( 'BILLING_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'collapse_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\n?>\n<?php\n\n$t_today = date( 'd:m:Y' );\n$t_date_submitted = isset( $t_bug ) ? date( 'd:m:Y', $t_bug->date_submitted ) : $t_today;\n\n$t_bugnote_stats_from_def = $t_date_submitted;\n$t_bugnote_stats_from_def_ar = explode( ':', $t_bugnote_stats_from_def );\n$t_bugnote_stats_from_def_d = $t_bugnote_stats_from_def_ar[0];\n$t_bugnote_stats_from_def_m = $t_bugnote_stats_from_def_ar[1];\n$t_bugnote_stats_from_def_y = $t_bugnote_stats_from_def_ar[2];\n\n$t_bugnote_stats_from_d = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_START_DAY, $t_bugnote_stats_from_def_d );\n$t_bugnote_stats_from_m = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_START_MONTH, $t_bugnote_stats_from_def_m );\n$t_bugnote_stats_from_y = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_START_YEAR, $t_bugnote_stats_from_def_y );\n\n$t_bugnote_stats_to_def = $t_today;\n$t_bugnote_stats_to_def_ar = explode( ':', $t_bugnote_stats_to_def );\n$t_bugnote_stats_to_def_d = $t_bugnote_stats_to_def_ar[0];\n$t_bugnote_stats_to_def_m = $t_bugnote_stats_to_def_ar[1];\n$t_bugnote_stats_to_def_y = $t_bugnote_stats_to_def_ar[2];\n\n$t_bugnote_stats_to_d = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_END_DAY, $t_bugnote_stats_to_def_d );\n$t_bugnote_stats_to_m = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_END_MONTH, $t_bugnote_stats_to_def_m );\n$t_bugnote_stats_to_y = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_END_YEAR, $t_bugnote_stats_to_def_y );\n\n$f_get_bugnote_stats_button = gpc_get_string( 'get_bugnote_stats_button', '' );\n\n# Retrieve the cost as a string and convert to floating point\n$f_bugnote_cost = floatval( gpc_get_string( 'bugnote_cost', config_get( 'time_tracking_billing_rate' ) ) );\n\n$f_include_subprojects = gpc_get_bool( 'include_subprojects', false );\n\n$f_project_id = helper_get_current_project();\n\nif( ON == config_get( 'time_tracking_with_billing' ) ) {\n\t$t_cost_col = true;\n} else {\n\t$t_cost_col = false;\n}\n\n$t_collapse_block = is_collapsed( 'time_tracking_stats' );\n$t_block_css = $t_collapse_block ? 'collapsed' : '';\n$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n\n# Time tracking date range input form\n# CSRF protection not required here - form does not result in modifications\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div id=\"time_tracking_stats\" class=\"widget-box widget-color-blue2 <?php echo $t_block_css ?>\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-clock-o', 'ace-icon' ); ?>\n\t\t<?php echo lang_get( 'time_tracking' ) ?>\n\t</h4>\n\t<div class=\"widget-toolbar\">\n\t\t<a data-action=\"collapse\" href=\"#\">\n\t\t\t<?php print_icon( $t_block_icon, 'ace-icon 1 bigger-125' ); ?>\n\t\t</a>\n\t</div>\n</div>\n\n<div class=\"widget-body\">\n<form method=\"post\" action=\"\">\n\t<div class=\"widget-main\">\n\t<input type=\"hidden\" name=\"id\" value=\"<?php echo isset( $f_bug_id ) ? $f_bug_id : 0 ?>\" />\n\t\t<?php\n\t\t\t$t_filter = array();\n\t\t\t$t_filter[FILTER_PROPERTY_FILTER_BY_DATE_SUBMITTED] = 'on';\n\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_START_DAY] = $t_bugnote_stats_from_d;\n\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_START_MONTH] = $t_bugnote_stats_from_m;\n\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_START_YEAR] = $t_bugnote_stats_from_y;\n\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_END_DAY] = $t_bugnote_stats_to_d;\n\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_END_MONTH] = $t_bugnote_stats_to_m;\n\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_END_YEAR] = $t_bugnote_stats_to_y;\n\t\t\tfilter_init( $t_filter );\n\t\t\tprint_filter_do_filter_by_date( true );\n\t\t?>\n\n<?php\n\tif( $t_cost_col ) {\n?>\n\t\t<div class=\"space-6\"></div>\n\t\t<?php echo lang_get( 'time_tracking_cost_per_hour_label' ) ?>\n\t\t<input type=\"text\" name=\"bugnote_cost\" class=\"input-sm\" value=\"<?php echo $f_bugnote_cost ?>\" />\n<?php\n\t}\n?>\n<?php\n\tif( $f_project_id != ALL_PROJECTS ) {\n?>\n\t\t<div class=\"space-6\"></div>\n\t\t<label>\n\t\t\t<input type=\"checkbox\" name=\"include_subprojects\" class=\"ace\"\n\t\t\t\t   <?php check_checked( $f_include_subprojects, true ); ?> />\n\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'subprojects' ) ?></span>\n\t\t</label>\n<?php\n\t}\n?>\n\t</div>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<input name=\"get_bugnote_stats_button\" class=\"btn btn-primary btn-sm btn-white btn-round\"\n\t\t\tvalue=\"<?php echo lang_get( 'time_tracking_get_info_button' ) ?>\" type=\"submit\">\n\t</div>\n\t</form>\n</div>\n</div>\n\n<?php\n\tif( !is_blank( $f_get_bugnote_stats_button ) ) {\n\t\t# Retrieve time tracking information\n\t\t$t_from = $t_bugnote_stats_from_y . '-' . $t_bugnote_stats_from_m . '-' . $t_bugnote_stats_from_d;\n\t\t$t_to = $t_bugnote_stats_to_y . '-' . $t_bugnote_stats_to_m . '-' . $t_bugnote_stats_to_d;\n\t\t$t_bugnote_stats = billing_get_summaries( $f_project_id, $t_from, $t_to, $f_bugnote_cost, $f_include_subprojects );\n\n\t\tif( is_blank( $f_bugnote_cost ) || ( (double)$f_bugnote_cost == 0 ) ) {\n\t\t\t$t_cost_col = false;\n\t\t}\n\n\t\techo '<br /><div class=\"noprint\">';\n\n\t\t$t_exports = array(\n\t\t\t'csv_export' => 'billing_export_to_csv.php',\n\t\t\t'excel_export' => 'billing_export_to_excel.php',\n\t\t);\n\n\t\tforeach( $t_exports as $t_export_label => $t_export_page ) {\n\t\t\techo '<a class=\"btn btn-primary btn-sm btn-white btn-round\" ';\n\t\t\techo ' <a href=\"' . $t_export_page . '?';\n\t\t\techo 'from=' . $t_from . '&amp;to=' . $t_to;\n\t\t\techo '&amp;cost=' . $f_bugnote_cost;\n\t\t\techo '&amp;project_id=' . $f_project_id;\n\t\t\techo '&amp;include_subprojects=' . $f_include_subprojects;\n\t\t\techo '\">' . lang_get( $t_export_label ) . '</a>';\n\t\t}\n\n\t\techo '</div><br />';\n\n?>\n<div class=\"space-6\"></div>\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-condensed table-striped\">\n\t<tr>\n\t\t<td class=\"small-caption\">\n\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t</td>\n\t\t<td class=\"small-caption\">\n\t\t\t<?php echo lang_get( 'time_tracking' ) ?>\n\t\t</td>\n<?php\tif( $t_cost_col ) { ?>\n\t\t<td class=\"small-caption pull-right\">\n\t\t\t<?php echo lang_get( 'time_tracking_cost' ) ?>\n\t\t</td>\n<?php\t} ?>\n\n\t</tr>\n<?php\n\t\tforeach ( $t_bugnote_stats['issues'] as $t_issue_id => $t_issue ) {\n\t\t\t$t_project_info = ( !isset( $f_bug_id ) && ( $f_project_id == ALL_PROJECTS || $f_include_subprojects ) ) ? '[' . project_get_name( $t_issue['project_id'] ) . ']' . lang_get( 'word_separator' ) : '';\n\t\t\t$t_link = sprintf( lang_get( 'label' ), string_get_bug_view_link( $t_issue_id ) ) . lang_get( 'word_separator' ) . $t_project_info . string_display_line( $t_issue['summary'] );\n\t\t\techo '<tr class=\"row-category-history\"><td colspan=\"4\">' . $t_link . '</td></tr>';\n\n\t\t\tuksort(\n\t\t\t\t$t_issue['users'],\n\t\t\t\tfunction ( $a, $b ) {\n\t\t\t\t\treturn strcasecmp( user_get_name( $a ), user_get_name( $b ) );\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tforeach( $t_issue['users'] as $t_user_id => $t_user_info ) {\n?>\n\t<tr>\n\t\t<td class=\"small-caption\">\n\t\t\t<?php print_user( $t_user_id ) ?>\n\t\t</td>\n\t\t<td class=\"small-caption\">\n\t\t\t<?php echo db_minutes_to_hhmm( $t_user_info['minutes'] ) ?>\n\t\t</td>\n<?php\t\tif( $t_cost_col ) { ?>\n\t\t<td class=\"small-caption right\">\n\t\t\t<?php echo string_attribute( number_format( $t_user_info['cost'], 2 ) ); ?>\n\t\t</td>\n<?php\t\t} ?>\n\t</tr>\n\n<?php\n\t\t\t} # end of users within issues loop\n\t\t} # end for issues loop ?>\n\n\t<tr>\n\t\t<td class=\"small-caption\">\n\t\t\t<?php echo lang_get( 'total_time' ); ?>\n\t\t</td>\n\t\t<td class=\"small-caption bold\">\n\t\t\t<?php echo db_minutes_to_hhmm( $t_bugnote_stats['total']['minutes'] ); ?>\n\t\t</td>\n<?php\tif( $t_cost_col ) { ?>\n\t\t<td class=\"small-caption bold right\">\n\t\t\t<?php echo string_attribute( number_format( $t_bugnote_stats['total']['cost'], 2 ) ); ?>\n\t\t</td>\n<?php \t} ?>\n\t</tr>\n</table>\n\n<div class=\"space-6\"></div>\n\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-condensed table-striped\">\n\t<tr>\n\t\t<td class=\"small-caption\">\n\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t</td>\n\t\t<td class=\"small-caption\">\n\t\t\t<?php echo lang_get( 'time_tracking' ) ?>\n\t\t</td>\n<?php\tif( $t_cost_col ) { ?>\n\t\t<td class=\"small-caption pull-right\">\n\t\t\t<?php echo lang_get( 'time_tracking_cost' ) ?>\n\t\t</td>\n<?php\t} ?>\n\t</tr>\n\n<?php\n\tuksort(\n\t\t$t_bugnote_stats['users'],\n\t\tfunction ( $a, $b ) {\n\t\t\treturn strcasecmp( user_get_name( $a ), user_get_name( $b ) );\n\t\t}\n\t);\n\n\tforeach ( $t_bugnote_stats['users'] as $t_user_id => $t_user_info ) {\n?>\n\t<tr>\n\t\t<td class=\"small-caption\">\n\t\t\t<?php print_user( $t_user_id ) ?>\n\t\t</td>\n\t\t<td class=\"small-caption\">\n\t\t\t<?php echo db_minutes_to_hhmm( $t_user_info['minutes'] ); ?>\n\t\t</td>\n<?php\t\tif( $t_cost_col ) { ?>\n\t\t<td class=\"small-caption right\">\n\t\t\t<?php echo string_attribute( number_format( $t_user_info['cost'], 2 ) ); ?>\n\t\t</td>\n<?php\t\t} ?>\n\t</tr>\n<?php\t} ?>\n\t<tr class=\"row-category2\">\n\t\t<td class=\"small-caption bold\">\n\t\t\t<?php echo lang_get( 'total_time' ); ?>\n\t\t</td>\n\t\t<td class=\"small-caption bold\">\n\t\t\t<?php echo db_minutes_to_hhmm( $t_bugnote_stats['total']['minutes'] ); ?>\n\t\t</td>\n<?php\tif( $t_cost_col ) { ?>\n\t\t<td class=\"small-caption bold right\">\n\t\t\t<?php echo string_attribute( number_format( $t_bugnote_stats['total']['cost'], 2 ) ); ?>\n\t\t</td>\n<?php\t} ?>\n\t</tr>\n</table>\n\n<?php\n\t} # end if\n?>\n\n</div>\n\n<?php\n"
        },
        {
          "name": "billing_page.php",
          "type": "blob",
          "size": 1.4931640625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Display Mantis Billing Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses html_api.php\n * @uses lang_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'billing_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\n\nbilling_ensure_reporting_access();\n\nlayout_page_header( lang_get( 'time_tracking_billing_link' ) );\n\nlayout_page_begin();\n\n# Work break-down\ndefine( 'BILLING_INC_ALLOW', true );\ninclude( __DIR__ . '/billing_inc.php' );\n\nlayout_page_end();\n\n"
        },
        {
          "name": "browser_search_plugin.php",
          "type": "blob",
          "size": 2.6025390625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Browser Search Functionality - outputs opensearchdescription xml\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses config_api.php\n * @uses gpc_api.php\n */\n\n# Prevent output of HTML in the content if errors occur\ndefine( 'DISABLE_INLINE_ERROR_REPORTING', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'gpc_api.php' );\n\n$f_type = strtolower( gpc_get_string( 'type', 'text' ) );\n\n$t_path = config_get_global( 'path' );\n$t_title = config_get( 'search_title' );\n$t_icon = $t_path . config_get_global( 'favicon_image' );\n$t_searchform = $t_path . 'view_all_bug_page.php';\n\n# Localized ShortName and Description elements\n$t_shortname = sprintf( lang_get( \"opensearch_{$f_type}_short\" ), $t_title );\n$t_description = sprintf( lang_get( \"opensearch_{$f_type}_description\" ), $t_title );\n\nif( $f_type == 'id' ) {\n\t$t_url = $t_path . 'view.php?id={searchTerms}';\n} else {\n\t$t_url = $t_path . 'view_all_set.php?type=' . FILTER_ACTION_PARSE_NEW . '&amp;temporary=y&amp;handler_id=[all]&amp;search={searchTerms}';\n}\n\nheader( 'Content-Type: application/opensearchdescription+xml' );\necho '<?xml version=\"1.0\" encoding=\"UTF-8\" ?>' . PHP_EOL;\n?>\n<OpenSearchDescription xmlns=\"http://a9.com/-/spec/opensearch/1.1/\"\n                       xmlns:moz=\"http://www.mozilla.org/2006/browser/search/\">\n\t<ShortName><?php echo htmlspecialchars( $t_shortname, ENT_XML1 | ENT_QUOTES); ?></ShortName>\n\t<Description><?php echo htmlspecialchars( $t_description, ENT_XML1 | ENT_QUOTES); ?></Description>\n\t<InputEncoding>UTF-8</InputEncoding>\n\t<Image width=\"16\" height=\"16\" type=\"image/x-icon\"><?php echo $t_icon; ?></Image>\n\t<Url type=\"text/html\" method=\"GET\" template=\"<?php echo $t_url; ?>\"></Url>';\n\t<moz:SearchForm><?php echo $t_searchform; ?></moz:SearchForm>\n</OpenSearchDescription>\n"
        },
        {
          "name": "bug_actiongroup.php",
          "type": "blob",
          "size": 15.0712890625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page allows actions to be performed an an array of bugs\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bugnote_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses utility_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_api( 'version_api.php' );\n\nauth_ensure_user_authenticated();\nhelper_begin_long_process();\n\n$f_action\t= gpc_get_string( 'action' );\n$f_custom_field_id = gpc_get_int( 'custom_field_id', 0 );\n$f_bug_arr\t= gpc_get_int_array( 'bug_arr', array() );\n$f_bug_notetext = gpc_get_string( 'bugnote_text', '' );\n$f_bug_noteprivate = gpc_get_bool( 'private' );\n$t_form_name = 'bug_actiongroup_' . $f_action;\nform_security_validate( $t_form_name );\n\n$t_custom_group_actions = config_get( 'custom_group_actions' );\n\nforeach( $t_custom_group_actions as $t_custom_group_action ) {\n\tif( $f_action == $t_custom_group_action['action'] ) {\n\t\trequire_once( $t_custom_group_action['action_page'] );\n\t\texit;\n\t}\n}\n\n$t_failed_ids = array();\n\nif( 0 != $f_custom_field_id ) {\n\t$t_custom_field_def = custom_field_get_definition( $f_custom_field_id );\n}\n\nforeach( $f_bug_arr as $t_bug_id ) {\n\tbug_ensure_exists( $t_bug_id );\n\t$t_bug = bug_get( $t_bug_id, true );\n\n\tif( $t_bug->project_id != helper_get_current_project() ) {\n\t\t# in case the current project is not the same project of the bug we are viewing...\n\t\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t\t$g_project_override = $t_bug->project_id;\n\t\t# @todo (thraxisp) the next line goes away if the cache was smarter and used project\n\t\tconfig_flush_cache(); # flush the config cache so that configs are refetched\n\t}\n\n\t# Make sure user has access to the bug\n\taccess_ensure_bug_level( config_get( 'view_bug_threshold' ), $t_bug_id );\n\n\t$t_status = $t_bug->status;\n\n\tswitch( $f_action ) {\n\t\tcase 'CLOSE':\n\t\t\t$t_closed = config_get( 'bug_closed_status_threshold' );\n\t\t\tif( access_can_close_bug( $t_bug ) ) {\n\t\t\t\tif( ( $t_status < $t_closed ) &&\n\t\t\t\t\tbug_check_workflow( $t_status, $t_closed ) ) {\n\n\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $f_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\tbug_close( $t_bug_id, $f_bug_notetext, $f_bug_noteprivate );\n\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t} else {\n\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_status' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'DELETE':\n\t\t\tif( access_has_bug_level( config_get( 'delete_bug_threshold' ), $t_bug_id ) ) {\n\t\t\t\t$t_data = array( 'query' => array( 'id' => $t_bug_id ) );\n\t\t\t\t$t_command = new IssueDeleteCommand( $t_data );\n\t\t\t\t$t_command->execute();\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'MOVE':\n\t\t\t$f_project_id = gpc_get_int( 'project_id' );\n\t\t\tif( access_has_bug_level( config_get( 'move_bug_threshold' ), $t_bug_id ) &&\n\t\t\t\taccess_has_project_level( config_get( 'report_bug_threshold', null, null, $f_project_id ), $f_project_id ) ) {\n\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\n\t\t\t\t# Add bugnote if supplied\n\t\t\t\tif( !is_blank( $f_bug_notetext ) ) {\n\t\t\t\t\t$t_bugnote_id = bugnote_add( $t_bug_id, $f_bug_notetext, null, $f_bug_noteprivate );\n\t\t\t\t\tbugnote_process_mentions( $t_bug_id, $t_bugnote_id, $f_bug_notetext );\n\t\t\t\t}\n\t\t\t\tbug_move( $t_bug_id, $f_project_id );\n\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'COPY':\n\t\t\t$f_project_id = gpc_get_int( 'project_id' );\n\n\t\t\tif( access_has_project_level( config_get( 'report_bug_threshold' ), $f_project_id ) ) {\n\t\t\t\t# Copy everything except history\n\t\t\t\tbug_copy( $t_bug_id, $f_project_id, true, true, false, true, true, true );\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'ASSIGN':\n\t\t\t$f_assign = gpc_get_int( 'assign' );\n\t\t\t$t_assign_status = bug_get_status_for_assign( $t_bug->handler_id, $f_assign, $t_status );\n\t\t\t# check that new handler has rights to handle the issue, and\n\t\t\t#  that current user has rights to assign the issue\n\t\t\t$t_threshold = access_get_status_threshold( $t_assign_status, $t_bug->project_id );\n\t\t\tif( access_has_bug_level( config_get( 'update_bug_assign_threshold', config_get( 'update_bug_threshold' ) ), $t_bug_id ) ) {\n\t\t\t\t# The new handler is checked at project level\n\t\t\t\tif( access_has_project_level( config_get( 'handle_bug_threshold' ), $t_bug->project_id, $f_assign ) ) {\n\t\t\t\t\tif( bug_check_workflow( $t_status, $t_assign_status ) ) {\n\t\t\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\t\t\tbug_assign( $t_bug_id, $f_assign, $f_bug_notetext, $f_bug_noteprivate );\n\t\t\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_status' );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_handler' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'RESOLVE':\n\t\t\t$t_resolved_status = config_get( 'bug_resolved_status_threshold' );\n\t\t\tif( access_has_bug_level( access_get_status_threshold( $t_resolved_status, $t_bug->project_id ), $t_bug_id ) ) {\n\t\t\t\tif( ( $t_status < $t_resolved_status ) &&\n\t\t\t\t\tbug_check_workflow( $t_status, $t_resolved_status )\n\t\t\t\t) {\n\t\t\t\t\t$f_resolution = gpc_get_int( 'resolution' );\n\t\t\t\t\t$f_fixed_in_version = gpc_get_string( 'fixed_in_version', '' );\n\t\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\t\tbug_resolve( $t_bug_id, $f_resolution, $f_fixed_in_version, $f_bug_notetext, null, null, $f_bug_noteprivate );\n\t\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t\t} else {\n\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_status' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'UP_PRIOR':\n\t\t\tif( access_has_bug_level( config_get( 'update_bug_threshold' ), $t_bug_id ) ) {\n\t\t\t\t$f_priority = gpc_get_int( 'priority' );\n\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\tbug_set_field( $t_bug_id, 'priority', $f_priority );\n\t\t\t\temail_bug_updated( $t_bug_id );\n\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'UP_STATUS':\n\t\t\t$f_status = gpc_get_int( 'status' );\n\t\t\tif( access_has_bug_level( access_get_status_threshold( $f_status, $t_bug->project_id ), $t_bug_id ) ) {\n\t\t\t\tif( true == bug_check_workflow( $t_status, $f_status ) ) {\n\t\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\t\tbug_set_field( $t_bug_id, 'status', $f_status );\n\n\t\t\t\t\t# Add bugnote if supplied\n\t\t\t\t\tif( !is_blank( $f_bug_notetext ) ) {\n\t\t\t\t\t\t$t_bugnote_id = bugnote_add( $t_bug_id, $f_bug_notetext, null, $f_bug_noteprivate );\n\t\t\t\t\t\tbugnote_process_mentions( $t_bug_id, $t_bugnote_id, $f_bug_notetext );\n\t\t\t\t\t\t# No need to call email_generic(), bugnote_add() does it\n\t\t\t\t\t} else {\n\t\t\t\t\t\temail_bug_updated( $t_bug_id );\n\t\t\t\t\t}\n\n\t\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t\t} else {\n\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_status' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'UP_CATEGORY':\n\t\t\t$f_category_id = gpc_get_int( 'category' );\n\t\t\tif( access_has_bug_level( config_get( 'update_bug_threshold' ), $t_bug_id ) ) {\n\t\t\t\tif( category_exists( $f_category_id )\n\t\t\t\t\t|| $f_category_id == 0 && config_get( 'allow_no_category' )\n\t\t\t\t) {\n\t\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\t\tbug_set_field( $t_bug_id, 'category_id', $f_category_id );\n\t\t\t\t\temail_bug_updated( $t_bug_id );\n\t\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t\t} else {\n\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_category' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'UP_PRODUCT_VERSION':\n\t\t\t$f_product_version = gpc_get_string( 'product_version' );\n\t\t\tif( access_has_bug_level( config_get( 'update_bug_threshold' ), $t_bug_id ) ) {\n\t\t\t\tif( $f_product_version === '' || version_get_id( $f_product_version, $t_bug->project_id ) !== false ) {\n\t\t\t\t\t/** @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) ); */\n\t\t\t\t\tbug_set_field( $t_bug_id, 'version', $f_product_version );\n\t\t\t\t\temail_bug_updated( $t_bug_id );\n\t\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t\t} else {\n\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_version' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'UP_FIXED_IN_VERSION':\n\t\t\t$f_fixed_in_version = gpc_get_string( 'fixed_in_version' );\n\t\t\tif( access_has_bug_level( config_get( 'update_bug_threshold' ), $t_bug_id ) ) {\n\t\t\t\tif( $f_fixed_in_version === '' || version_get_id( $f_fixed_in_version, $t_bug->project_id ) !== false ) {\n\t\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\t\tbug_set_field( $t_bug_id, 'fixed_in_version', $f_fixed_in_version );\n\t\t\t\t\temail_bug_updated( $t_bug_id );\n\t\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_version' );\n\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'UP_TARGET_VERSION':\n\t\t\t$f_target_version = gpc_get_string( 'target_version' );\n\t\t\tif( access_has_bug_level( config_get( 'roadmap_update_threshold' ), $t_bug_id ) ) {\n\t\t\t\tif( $f_target_version === '' || version_get_id( $f_target_version, $t_bug->project_id ) !== false ) {\n\t\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\t\tbug_set_field( $t_bug_id, 'target_version', $f_target_version );\n\t\t\t\t\temail_bug_updated( $t_bug_id );\n\t\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t\t} else {\n\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_version' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'UP_DUE_DATE':\n\t\t\t$t_due_date = gpc_get_string( 'due_date', null );\n\t\t\tif( $t_due_date !== null ) {\n\t\t\t\t$t_due_date = date_strtotime( $t_due_date );\n\n\t\t\t\tif( access_has_bug_level( config_get( 'due_date_update_threshold' ), $t_bug_id ) ) {\n\t\t\t\t\tbug_set_field( $t_bug_id, 'due_date', $t_due_date );\n\t\t\t\t} else {\n\t\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'VIEW_STATUS':\n\t\t\tif( access_has_bug_level( config_get( 'change_view_status_threshold' ), $t_bug_id ) ) {\n\t\t\t\t$f_view_status = gpc_get_int( 'view_status' );\n\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\tbug_set_field( $t_bug_id, 'view_state', $f_view_status );\n\t\t\t\temail_bug_updated( $t_bug_id );\n\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'SET_STICKY':\n\t\t\tif( access_has_bug_level( config_get( 'set_bug_sticky_threshold' ), $t_bug_id ) ) {\n\t\t\t\t$f_sticky = bug_get_field( $t_bug_id, 'sticky' );\n\t\t\t\t# The new value is the inverted old value\n\t\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t\tbug_set_field( $t_bug_id, 'sticky', intval( !$f_sticky ) );\n\t\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\t} else {\n\t\t\t\t$t_failed_ids[$t_bug_id] = lang_get( 'bug_actiongroup_access' );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'CUSTOM':\n\t\t\tif( 0 === $f_custom_field_id ) {\n\t\t\t\ttrigger_error( ERROR_GENERIC, ERROR );\n\t\t\t}\n\n\t\t\t# @todo we need to issue a helper_call_custom_function( 'issue_update_validate', array( $t_bug_id, $t_bug_data, $f_bugnote_text ) );\n\t\t\t$t_form_var = 'custom_field_' . $f_custom_field_id;\n\t\t\t$t_custom_field_value = gpc_get_custom_field( $t_form_var, $t_custom_field_def['type'], null );\n\t\t\tcustom_field_set_value( $f_custom_field_id, $t_bug_id, $t_custom_field_value );\n\t\t\tbug_update_date( $t_bug_id );\n\t\t\temail_bug_updated( $t_bug_id );\n\t\t\thelper_call_custom_function( 'issue_update_notify', array( $t_bug_id ) );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\ttrigger_error( ERROR_GENERIC, ERROR );\n\t}\n\n\t# Bug Action Event\n\tevent_signal( 'EVENT_BUG_ACTION', array( $f_action, $t_bug_id ) );\n}\n\nform_security_purge( $t_form_name );\n\nif( count( $t_failed_ids ) > 0 ) {\n\trequire_css( 'status_config.php' );\n\tbug_group_action_print_top();\n\tbug_group_action_print_results( $t_failed_ids );\n\tbug_group_action_print_bottom();\n} else {\n\tprint_header_redirect( 'view_all_bug_page.php' );\n}\n"
        },
        {
          "name": "bug_actiongroup_add_note_inc.php",
          "type": "blob",
          "size": 4.2333984375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Bugnote action group add include file\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses access_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses error_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nif( !defined( 'BUG_ACTIONGROUP_INC_ALLOW' ) ) {\n\treturn;\n}\n\n# This variable is defined in parent script\nglobal $t_event_params;\n$t_event_params['has_bugnote'] = true;\n\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\n/**\n * Prints the title for the custom action page.\n * @return void\n */\nfunction action_add_note_print_title() {\n\techo lang_get( 'add_bugnote_title' );\n}\n\n/**\n * Prints the field within the custom action form.  This has an entry for\n * every field the user need to supply + the submit button.  The fields are\n * added as rows in a table that is already created by the calling code.\n * A row has two columns.\n * @return void\n */\nfunction action_add_note_print_fields() {\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php echo lang_get( 'add_bugnote_title' ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<textarea class=\"form-control\" name=\"bugnote_text\" id=\"bugnote_text\" cols=\"80\" rows=\"10\"></textarea>\n\t\t</td>\n\t</tr>\n\n\t<!-- View Status -->\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t</th>\n\t\t<td>\n<?php\n\t$t_default_state = config_get( 'default_bugnote_view_status' );\n\tif( access_has_project_level( config_get( 'set_view_status_threshold' ) ) ) { ?>\n\t\t\t\t<select name=\"view_state\" class=\"input-sm\">\n\t\t\t\t\t<?php print_enum_string_option_list( 'view_state', $t_default_state ) ?>\n\t\t\t\t</select>\n<?php\n\t} else {\n\t\techo get_enum_element( 'view_state', $t_default_state );\n?>\n\t\t\t\t<input type=\"hidden\" name=\"view_state\" value=\"<?php echo $t_default_state; ?>\" />';\n<?php\n\t}\n?>\n\t\t</td>\n\t</tr>\n<?php\n}\n\n/**\n * Validates the action on the specified bug id.\n *\n * @param integer $p_bug_id A bug identifier.\n * @return string|null On failure: the reason why the action could not be validated. On success: null.\n */\nfunction action_add_note_validate( $p_bug_id ) {\n\t$f_bugnote_text = gpc_get_string( 'bugnote_text' );\n\n\tif( is_blank( $f_bugnote_text ) ) {\n\t\terror_parameters( lang_get( 'bugnote' ) );\n\t\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n\t}\n\n\t$t_add_bugnote_threshold = config_get( 'add_bugnote_threshold' );\n\t$t_bug_id = $p_bug_id;\n\n\tif( bug_is_readonly( $t_bug_id ) ) {\n\t\treturn lang_get( 'actiongroup_error_issue_is_readonly' );\n\t}\n\n\tif( !access_has_bug_level( $t_add_bugnote_threshold, $t_bug_id ) ) {\n\t\treturn lang_get( 'access_denied' );\n\t}\n\n\treturn null;\n}\n\n/**\n * Executes the custom action on the specified bug id.\n *\n * @param integer $p_bug_id The bug id to execute the custom action on.\n * @return null Previous validation ensures that this function doesn't fail. Therefore we can always return null to indicate no errors occurred.\n */\nfunction action_add_note_process( $p_bug_id ) {\n\t$f_bugnote_text = gpc_get_string( 'bugnote_text' );\n\t$f_view_state = gpc_get_int( 'view_state' );\n\t$t_bugnote_id = bugnote_add( $p_bug_id, $f_bugnote_text, '0:00', $f_view_state != VS_PUBLIC );\n\tbugnote_process_mentions( $p_bug_id, $t_bugnote_id, $f_bugnote_text );\n\treturn null;\n}\n"
        },
        {
          "name": "bug_actiongroup_attach_tags_inc.php",
          "type": "blob",
          "size": 4.1796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Bug action group attach tags include file\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses tag_api.php\n */\n\nif( !defined( 'BUG_ACTIONGROUP_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'tag_api.php' );\n\n/**\n * Prints the title for the custom action page.\n * @return void\n */\nfunction action_attach_tags_print_title() {\n\techo lang_get( 'tag_attach_long' );\n}\n\n/**\n * Prints the table and form for the Attach Tags group action page.\n * @return void\n */\nfunction action_attach_tags_print_fields() {\n\techo '<tr><th class=\"category\">', lang_get( 'tag_attach_long' ), '</th><td>';\n\tprint_tag_input();\n\techo '<input type=\"submit\" class=\"btn btn-primary btn-white btn-round btn-sm\" value=\"' . lang_get( 'tag_attach' ) . ' \" /></td></tr>';\n}\n\n/**\n * Validates the Attach Tags group action.\n * Checks if a user can attach the requested tags to a given bug.\n * @param integer $p_bug_id A bug identifier.\n * @return string|null On failure: the reason for tags failing validation for the given bug. On success: null.\n */\nfunction action_attach_tags_validate( $p_bug_id ) {\n\tglobal $g_action_attach_tags_tags;\n\tglobal $g_action_attach_tags_attach;\n\tglobal $g_action_attach_tags_create;\n\n\t$t_can_attach = access_has_bug_level( config_get( 'tag_attach_threshold' ), $p_bug_id );\n\tif( !$t_can_attach ) {\n\t\treturn lang_get( 'tag_attach_denied' );\n\t}\n\n\tif( !isset( $g_action_attach_tags_tags ) ) {\n\t\tif( !isset( $g_action_attach_tags_attach ) ) {\n\t\t\t$g_action_attach_tags_attach = array();\n\t\t\t$g_action_attach_tags_create = array();\n\t\t}\n\t\t$g_action_attach_tags_tags = tag_parse_string( gpc_get_string( 'tag_string' ) );\n\t\tforeach ( $g_action_attach_tags_tags as $t_tag_row ) {\n\t\t\tif( $t_tag_row['id'] == -1 ) {\n\t\t\t\t$g_action_attach_tags_create[$t_tag_row['name']] = $t_tag_row;\n\t\t\t} else if( $t_tag_row['id'] >= 0 ) {\n\t\t\t\t$g_action_attach_tags_attach[$t_tag_row['name']] = $t_tag_row;\n\t\t\t}\n\t\t}\n\t}\n\n\t$t_can_create = access_has_bug_level( config_get( 'tag_create_threshold' ), $p_bug_id );\n\tif( count( $g_action_attach_tags_create ) > 0 && !$t_can_create ) {\n\t\treturn lang_get( 'tag_create_denied' );\n\t}\n\n\tif( count( $g_action_attach_tags_create ) == 0 &&\n\t\tcount( $g_action_attach_tags_attach ) == 0 ) {\n\t\treturn lang_get( 'tag_none_attached' );\n\t}\n\n\treturn null;\n}\n\n/**\n * Attaches all the tags to each bug in the group action.\n * @param integer $p_bug_id A bug identifier.\n * @return null Previous validation ensures that this function doesn't fail. Therefore we can always return null to indicate no errors occurred.\n */\nfunction action_attach_tags_process( $p_bug_id ) {\n\tglobal $g_action_attach_tags_attach, $g_action_attach_tags_create;\n\n\tforeach( $g_action_attach_tags_create as $t_tag_row ) {\n\t\t$g_action_attach_tags_attach[] = array( 'name' => $t_tag_row['name'] );\n\t}\n\n\t$g_action_attach_tags_create = array();\n\n\t$t_data = array(\n\t\t'query' => array( 'issue_id' => $p_bug_id ),\n\t\t'payload' => array(\n\t\t\t'tags' => $g_action_attach_tags_attach\n\t\t)\n\t);\n\n\t$t_command = new TagAttachCommand( $t_data );\n\t$t_command->execute();\n\n\treturn null;\n}\n"
        },
        {
          "name": "bug_actiongroup_ext.php",
          "type": "blob",
          "size": 3.5244140625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Bug action group additional actions\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bug_group_action_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bug_group_action_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nauth_ensure_user_authenticated();\n\nhelper_begin_long_process();\n\n$f_action = gpc_get_string( 'action' );\n$f_bug_arr = gpc_get_int_array( 'bug_arr', array() );\n\n$t_form_name = 'bug_actiongroup_' . $f_action;\n\nform_security_validate( $t_form_name );\n\nbug_group_action_init( $f_action );\n\n# group bugs by project\n$t_projects_bugs = array();\n$t_view_bug_threshold = array();\n$t_user = auth_get_current_user_id();\nforeach( $f_bug_arr as $t_key => $t_bug_id ) {\n\tbug_ensure_exists( $t_bug_id );\n\t$t_bug = bug_get( $t_bug_id, true );\n\n\t# Per-project cache of the access threshold\n\tif( !isset( $t_view_bug_threshold[$t_bug->project_id] ) ) {\n\t\t$t_view_bug_threshold[$t_bug->project_id] = config_get(\n\t\t\t'view_bug_threshold',\n\t\t\tnull,\n\t\t\t$t_user,\n\t\t\t$t_bug->project_id\n\t\t);\n\t}\n\n\t# Remove any issues the user doesn't have access to\n\tif( !access_has_bug_level( $t_view_bug_threshold[$t_bug->project_id], $t_bug_id, $t_user ) ) {\n\t\tunset( $f_bug_arr[$t_key] );\n\t\tcontinue;\n\t}\n\n\tif( isset( $t_projects_bugs[$t_bug->project_id] ) ) {\n\t\t$t_projects_bugs[$t_bug->project_id][] = $t_bug_id;\n\t} else {\n\t\t$t_projects_bugs[$t_bug->project_id] = array( $t_bug_id );\n\t}\n}\n\n$t_failed_ids = array();\n\nforeach( $t_projects_bugs as $t_project_id => $t_bugs ) {\n\t$g_project_override = $t_project_id;\n\tforeach( $t_bugs as $t_bug_id ) {\n\t\t$t_fail_reason = bug_group_action_validate( $f_action, $t_bug_id );\n\t\tif( $t_fail_reason !== null ) {\n\t\t\t$t_failed_ids[$t_bug_id] = $t_fail_reason;\n\t\t}\n\t\tif( !isset( $t_failed_ids[$t_bug_id] ) ) {\n\t\t\t$t_fail_reason = bug_group_action_process( $f_action, $t_bug_id );\n\t\t\tif( $t_fail_reason !== null ) {\n\t\t\t\t$t_failed_ids[$t_bug_id] = $t_fail_reason;\n\t\t\t}\n\t\t}\n\t}\n}\n\n$g_project_override = null;\n\nform_security_purge( $t_form_name );\n\nif( count( $t_failed_ids ) > 0 ) {\n\trequire_css( 'status_config.php' );\n\tbug_group_action_print_top();\n\tbug_group_action_print_results( $t_failed_ids );\n\tbug_group_action_print_bottom();\n} else {\n\tprint_header_redirect( 'view_all_bug_page.php' );\n}\n"
        },
        {
          "name": "bug_actiongroup_ext_page.php",
          "type": "blob",
          "size": 3.1240234375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Bug action group additional actions\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses bug_group_action_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nif( !defined( 'BUG_ACTIONGROUP_INC_ALLOW' ) ) {\n\treturn;\n}\n\n# This variable is defined in parent script\nglobal $t_event_params;\n\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_group_action_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\nrequire_css( 'status_config.php');\n\n$t_external_action = mb_strtolower( mb_substr( $f_action, mb_strlen( $t_external_action_prefix ) ) );\n$t_form_fields_page = 'bug_actiongroup_' . $t_external_action . '_inc.php';\n$t_form_name = 'bug_actiongroup_' . $t_external_action;\n\nbug_group_action_init( $t_external_action );\n\nbug_group_action_print_top();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\n<div id=\"action-group-div\" class=\"form-container\" >\n<form method=\"post\" action=\"bug_actiongroup_ext.php\">\n\t<?php echo form_security_field( $t_form_name ); ?>\n\t<input type=\"hidden\" name=\"action\" value=\"<?php echo string_attribute( $t_external_action ) ?>\" />\n\t<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php bug_group_action_print_title( $t_external_action ); ?>\n\t\t</h4>\n\t</div>\n\t<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t<table class=\"table table-bordered table-condensed table-striped\">\n\t<tbody>\n<?php\n\tbug_group_action_print_hidden_fields( $f_bug_arr );\n\tbug_group_action_print_action_fields( $t_external_action );\n\n\t# signal plugin event for additional fields\n\tevent_signal( 'EVENT_BUG_ACTIONGROUP_FORM', array( $t_event_params ) );\n?>\n\t<tr class=\"spacer\"></tr>\n\t<?php bug_group_action_print_bug_list( $f_bug_arr ); ?>\n\t<tr class=\"spacer\"></tr>\n\t</tbody>\n\t</table>\n\t</div>\n\t</div>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php bug_group_action_print_title( $t_external_action ); ?>\" />\n\t</div>\n\t</div>\n\t</div>\n</form>\n</div>\n</div>\n\n\n\n<?php\nbug_group_action_print_bottom();\n"
        },
        {
          "name": "bug_actiongroup_page.php",
          "type": "blob",
          "size": 14.3037109375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page allows actions to be performed on an array of bugs\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bug_group_action_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses utility_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bug_group_action_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_api( 'version_api.php' );\n\nrequire_css( 'status_config.php' );\n\nauth_ensure_user_authenticated();\n\n$f_action = gpc_get_string( 'action', '' );\n$f_bug_arr = gpc_get_int_array( 'bug_arr', array() );\n\n# redirects to all_bug_page if nothing is selected\nif( is_blank( $f_action ) || ( 0 == count( $f_bug_arr ) ) ) {\n\tprint_header_redirect( 'view_all_bug_page.php' );\n}\n\n# run through the issues to see if they are all from one project\n$t_project_id = ALL_PROJECTS;\n$t_multiple_projects = false;\n$t_user = auth_get_current_user_id();\n$t_projects = array();\n$t_view_bug_threshold = array();\n\nbug_cache_array_rows( $f_bug_arr );\n\nforeach( $f_bug_arr as $t_key => $t_bug_id ) {\n\t$t_bug = bug_get( $t_bug_id );\n\n\t# Per-project cache of the access threshold\n\tif( !isset( $t_view_bug_threshold[$t_bug->project_id] ) ) {\n\t\t$t_view_bug_threshold[$t_bug->project_id] = config_get(\n\t\t\t'view_bug_threshold',\n\t\t\tnull,\n\t\t\t$t_user,\n\t\t\t$t_bug->project_id\n\t\t);\n\t}\n\n\t# Remove any issues the user doesn't have access to\n\tif( !access_has_bug_level( $t_view_bug_threshold[$t_bug->project_id], $t_bug_id, $t_user ) ) {\n\t\tunset( $f_bug_arr[$t_key] );\n\t\tcontinue;\n\t}\n\n\t# Multiple projects check\n\tif( $t_project_id != $t_bug->project_id ) {\n\t\tif( ( $t_project_id != ALL_PROJECTS ) && !$t_multiple_projects ) {\n\t\t\t$t_multiple_projects = true;\n\t\t} else {\n\t\t\t$t_project_id = $t_bug->project_id;\n\t\t\t$t_projects[$t_project_id] = $t_project_id;\n\t\t}\n\t}\n}\n\n# Array of parameters to be used with plugin event\n$t_event_params = array();\n$t_event_params['bug_ids'] = $f_bug_arr;\n$t_event_params['action'] = $f_action;\n$t_event_params['has_bugnote'] = false;\n$t_event_params['multiple_projects'] = $t_multiple_projects;\n\nif( $t_multiple_projects ) {\n\t$t_project_id = ALL_PROJECTS;\n\t$t_projects[ALL_PROJECTS] = ALL_PROJECTS;\n}\n# override the project if necessary\nif( $t_project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_project_id;\n}\n\ndefine( 'BUG_ACTIONGROUP_INC_ALLOW', true );\n\n$t_finished = false;\n$t_bugnote = false;\n\n$t_external_action_prefix = 'EXT_';\nif( strpos( $f_action, $t_external_action_prefix ) === 0 ) {\n\t$t_form_page = 'bug_actiongroup_ext_page.php';\n\trequire_once( $t_form_page );\n\texit;\n}\n\n$t_custom_group_actions = config_get( 'custom_group_actions' );\n\nforeach( $t_custom_group_actions as $t_custom_group_action ) {\n\tif( $f_action == $t_custom_group_action['action'] ) {\n\t\trequire_once( $t_custom_group_action['form_page'] );\n\t\texit;\n\t}\n}\n\n# Check if user selected to update a custom field.\n$t_custom_fields_prefix = 'custom_field_';\nif( strpos( $f_action, $t_custom_fields_prefix ) === 0 ) {\n\t$t_custom_field_id = (int)substr( $f_action, mb_strlen( $t_custom_fields_prefix ) );\n\t$f_action = 'CUSTOM';\n\t$t_event_params['action'] = $f_action;\n}\n\n# Form name\n$t_form_name = 'bug_actiongroup_' . $f_action;\n\nswitch( $f_action ) {\n\t# Use a simple confirmation page, if close or delete...\n\tcase 'CLOSE' :\n\t\t$t_finished \t\t\t= true;\n\t\t$t_question_title \t\t= lang_get( 'close_bugs_conf_msg' );\n\t\t$t_button_title \t\t= lang_get( 'close_group_bugs_button' );\n\t\t$t_bugnote\t\t\t\t= true;\n\t\tbreak;\n\tcase 'DELETE' :\n\t\t$t_finished \t\t\t= true;\n\t\t$t_question_title\t\t= lang_get( 'delete_bugs_conf_msg' );\n\t\t$t_button_title \t\t= lang_get( 'delete_group_bugs_button' );\n\t\tbreak;\n\tcase 'SET_STICKY' :\n\t\t$t_finished \t\t\t= true;\n\t\t$t_question_title\t\t= lang_get( 'set_sticky_bugs_conf_msg' );\n\t\t$t_button_title \t\t= lang_get( 'set_sticky_group_bugs_button' );\n\t\tbreak;\n\t# ...else we define the variables used in the form\n\tcase 'MOVE' :\n\t\t$t_question_title \t\t= lang_get( 'move_bugs_conf_msg' );\n\t\t$t_button_title \t\t= lang_get( 'move_group_bugs_button' );\n\t\t$t_form\t\t\t\t\t= 'project_id';\n\t\t$t_bugnote\t\t\t\t= true;\n\t\tbreak;\n\tcase 'COPY' :\n\t\t$t_question_title \t\t= lang_get( 'copy_bugs_conf_msg' );\n\t\t$t_button_title \t\t= lang_get( 'copy_group_bugs_button' );\n\t\t$t_form\t\t\t\t\t= 'project_id';\n\t\tbreak;\n\tcase 'ASSIGN' :\n\t\t$t_question_title \t\t= lang_get( 'assign_bugs_conf_msg' );\n\t\t$t_button_title \t\t= lang_get( 'assign_group_bugs_button' );\n\t\t$t_form \t\t\t\t= 'assign';\n\t\tbreak;\n\tcase 'RESOLVE' :\n\t\t$t_question_title \t\t= lang_get( 'resolve_bugs_conf_msg' );\n\t\t$t_button_title \t\t= lang_get( 'resolve_group_bugs_button' );\n\t\t$t_form \t\t\t\t= 'resolution';\n\t\tif( ALL_PROJECTS != $t_project_id ) {\n\t\t\t$t_question_title2 = lang_get( 'fixed_in_version' );\n\t\t\t$t_form2 = 'fixed_in_version';\n\t\t}\n\t\t$t_bugnote\t\t\t\t= true;\n\t\tbreak;\n\tcase 'UP_PRIOR' :\n\t\t$t_question_title \t\t= lang_get( 'priority_bugs_conf_msg' );\n\t\t$t_button_title \t\t= lang_get( 'priority_group_bugs_button' );\n\t\t$t_form \t\t\t\t= 'priority';\n\t\tbreak;\n\tcase 'UP_STATUS' :\n\t\t$t_question_title \t\t= lang_get( 'status_bugs_conf_msg' );\n\t\t$t_button_title \t\t= lang_get( 'status_group_bugs_button' );\n\t\t$t_form \t\t\t\t= 'status';\n\t\t$t_bugnote\t\t\t\t= true;\n\t\tbreak;\n\tcase 'UP_CATEGORY' :\n\t\t$t_question_title\t\t= lang_get( 'category_bugs_conf_msg' );\n\t\t$t_button_title\t\t\t= lang_get( 'category_group_bugs_button' );\n\t\t$t_form\t\t\t\t\t= 'category';\n\t\tbreak;\n\tcase 'VIEW_STATUS' :\n\t\t$t_question_title\t\t= lang_get( 'view_status_bugs_conf_msg' );\n\t\t$t_button_title\t\t\t= lang_get( 'view_status_group_bugs_button' );\n\t\t$t_form\t\t\t\t\t= 'view_status';\n\t\tbreak;\n\tcase 'UP_PRODUCT_VERSION':\n\t\t$t_question_title\t\t= lang_get( 'product_version_bugs_conf_msg' );\n\t\t$t_button_title\t\t\t= lang_get( 'product_version_group_bugs_button' );\n\t\t$t_form\t\t\t\t\t= 'product_version';\n\t\tbreak;\n\tcase 'UP_FIXED_IN_VERSION':\n\t\t$t_question_title\t\t= lang_get( 'fixed_in_version_bugs_conf_msg' );\n\t\t$t_button_title\t\t\t= lang_get( 'fixed_in_version_group_bugs_button' );\n\t\t$t_form\t\t\t\t\t= 'fixed_in_version';\n\t\tbreak;\n\tcase 'UP_TARGET_VERSION':\n\t\t$t_question_title\t\t= lang_get( 'target_version_bugs_conf_msg' );\n\t\t$t_button_title\t\t\t= lang_get( 'target_version_group_bugs_button' );\n\t\t$t_form\t\t\t\t\t= 'target_version';\n\t\tbreak;\n\tcase 'UP_DUE_DATE':\n\t\t$t_question_title\t\t= lang_get( 'due_date_bugs_conf_msg' );\n\t\t$t_button_title\t\t\t= lang_get( 'due_date_group_bugs_button' );\n\t\t$t_form\t\t\t\t\t= 'due_date';\n\t\tbreak;\n\tcase 'CUSTOM' :\n\t\t$t_custom_field_def = custom_field_get_definition( $t_custom_field_id );\n\t\t$t_question_title = sprintf( lang_get( 'actiongroup_menu_update_field' ),\n\t\t\tstring_attribute( lang_get_defaulted( $t_custom_field_def['name'] ) )\n\t\t);\n\t\t$t_button_title = $t_question_title;\n\t\t$t_form = 'custom_field_' . $t_custom_field_id;\n\t\t$t_event_params['custom_field_id'] = $t_custom_field_id;\n\t\tbreak;\n\tdefault:\n\t\ttrigger_error( ERROR_GENERIC, ERROR );\n}\n$t_event_params['has_bugnote'] = $t_bugnote;\n\nbug_group_action_print_top();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<?php\nif( $t_multiple_projects ) {\n\techo '<div class=\"alert alert-warning\"> <p class=\"bold\">' . lang_get( 'multiple_projects' ) . '</p> </div>';\n}\n?>\n<div id=\"action-group-div\" class=\"form-container\">\n\t<form method=\"post\" action=\"bug_actiongroup.php\">\n\t\t<?php echo form_security_field( $t_form_name ); ?>\n\t\t<input type=\"hidden\" name=\"action\" value=\"<?php echo string_attribute( $f_action ) ?>\" />\n<?php\n\tbug_group_action_print_hidden_fields( $f_bug_arr );\n\tif( $f_action === 'CUSTOM' ) {\n\t\techo \"<input type=\\\"hidden\\\" name=\\\"custom_field_id\\\" value=\\\"$t_custom_field_id\\\" />\";\n\t}\n?>\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php echo $t_question_title ?>\n\t</h4>\n</div>\n<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t<tbody>\n<?php\n\tif( !$t_finished ) {\n?>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t<?php echo $t_question_title ?>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td>\n<?php\n\t\tif( $f_action === 'CUSTOM' ) {\n\t\t\t$t_custom_field_def = custom_field_get_definition( $t_custom_field_id );\n\n\t\t\t$t_bug_id = null;\n\n\t\t\t# if there is only one issue, use its current value as default, otherwise,\n\t\t\t# use the default value specified in custom field definition.\n\t\t\tif( count( $f_bug_arr ) == 1 ) {\n\t\t\t\t$t_bug_id = $f_bug_arr[0];\n\t\t\t}\n\n\t\t\tprint_custom_field_input( $t_custom_field_def, $t_bug_id );\n\t\t} else if ( $f_action === 'UP_DUE_DATE' ) {\n\t\t\t$t_date_to_display = '';\n\t\t\t# if there is only one issue, use its current value as default\n\t\t\tif( count( $f_bug_arr ) == 1 ) {\n\t\t\t\t$t_bug_id = $f_bug_arr[0];\n\t\t\t\t$t_bug = bug_get( $t_bug_id );\n\t\t\t\tif( !date_is_null( $t_bug->due_date ) ) {\n\t\t\t\t\t$t_date_to_display = date( config_get( 'normal_date_format' ), $t_bug->due_date );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\techo '<input type=\"text\" id=\"due_date\" name=\"due_date\" class=\"datetimepicker input-sm\" size=\"16\" maxlength=\"16\" ' .\n\t\t\t\t'data-picker-locale=\"' . lang_get_current_datetime_locale() .\n\t\t\t\t'\" data-picker-format=\"' . config_get( 'datetime_picker_format' ) . '\"' .\n\t\t\t\t'\" value=\"' . $t_date_to_display . '\" />';\n\t\t\tprint_icon( 'fa-calendar', 'fa-xlg datetimepicker' );\n\t\t} else {\n\t\t\techo '<select name=\"' . $t_form . '\" class=\"input-sm\" required>';\n\n\t\t\tswitch( $f_action ) {\n\t\t\t\tcase 'COPY':\n\t\t\t\tcase 'MOVE':\n\t\t\t\t\tprint_project_option_list( null /* $p_project_id */, false /* $p_include_all_projects */,\n\t\t\t\t\t\t\tnull /* $p_filter_project_id */, false /* $p_trace */, true /* $p_can_report_only */ );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ASSIGN':\n\t\t\t\t\tprint_assign_to_option_list( 0, $t_project_id );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'RESOLVE':\n\t\t\t\t\tprint_enum_string_option_list( 'resolution', config_get( 'bug_resolution_fixed_threshold' ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'UP_PRIOR':\n\t\t\t\t\tprint_enum_string_option_list( 'priority', config_get( 'default_bug_priority' ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'UP_STATUS':\n\t\t\t\t\tprint_enum_string_option_list( 'status', config_get( 'bug_submit_status' ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'UP_CATEGORY':\n\t\t\t\t\tprint_category_option_list( 0, null, true );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VIEW_STATUS':\n\t\t\t\t\tprint_enum_string_option_list( 'view_state', config_get( 'default_bug_view_status' ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'UP_TARGET_VERSION':\n\t\t\t\t\tprint_version_option_list( '', $t_projects, VERSION_FUTURE, true );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'UP_PRODUCT_VERSION':\n\t\t\t\tcase 'UP_FIXED_IN_VERSION':\n\t\t\t\t\tprint_version_option_list( '', $t_projects, VERSION_ALL, true );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\techo '</select>';\n\t\t}\n?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n<?php\n\t\tif( isset( $t_question_title2 ) ) {\n\t\t\tswitch( $f_action ) {\n\t\t\t\tcase 'RESOLVE':\n\t\t\t\t\t$t_show_product_version = ( ON == config_get( 'show_product_version' ) )\n\t\t\t\t\t\t|| ( ( AUTO == config_get( 'show_product_version' ) )\n\t\t\t\t\t\t\t\t\t&& ( count( version_get_all_rows( $t_project_id ) ) > 0 ) );\n\t\t\t\t\tif( $t_show_product_version ) {\n?>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t<?php echo $t_question_title2 ?>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<select name=\"<?php echo $t_form2 ?>\" class=\"input-sm\">\n\t\t\t\t\t\t\t<?php print_version_option_list( '', null, VERSION_ALL );?>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n<?php\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t} else {\n?>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class=\"category\" colspan=\"2\">\n\t\t\t\t\t\t<?php echo $t_question_title; ?>\n\t\t\t\t\t</th>\n\t\t\t\t</tr>\n<?php\n\t}\n\n\t# signal plugin event for additional fields\n\tevent_signal( 'EVENT_BUG_ACTIONGROUP_FORM', array( $t_event_params ) );\n\n\tif( $t_bugnote ) {\n\t\t$t_default_bugnote_view_status = config_get( 'default_bugnote_view_status' );\n\t\t$t_bugnote_private = $t_default_bugnote_view_status == VS_PRIVATE;\n\t\t$t_bugnote_class = $t_bugnote_private ? 'form-control bugnote-private' : 'form-control';\n\n?>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'add_bugnote_title' ); ?>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<textarea name=\"bugnote_text\" id=\"bugnote_text\" class=\"<?php echo $t_bugnote_class ?>\" cols=\"80\" rows=\"7\"></textarea>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n<?php\n\t\tif( access_has_project_level( config_get( 'private_bugnote_threshold' ), $t_project_id ) ) {\n?>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td>\n<?php\n\t\t\tif( access_has_project_level( config_get( 'set_view_status_threshold' ), $t_project_id ) ) {\n?>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" name=\"private\" <?php check_checked( $t_default_bugnote_view_status, VS_PRIVATE ); ?> />\n\t\t\t\t\t\t<label class=\"lbl padding-6\"><?php echo lang_get( 'private' ); ?></label>\n<?php\n\t\t\t} else {\n\t\t\t\techo get_enum_element( 'view_state', $t_default_bugnote_view_status );\n\t\t\t}\n?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n<?php\n\t\t}\n\t}\n?>\n\t\t<tr class=\"spacer\"></tr>\n\t\t<?php bug_group_action_print_bug_list( $f_bug_arr ); ?>\n\t\t<tr class=\"spacer\"></tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo $t_button_title ?>\" />\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n</div>\n\n<?php\nbug_group_action_print_bottom();\n"
        },
        {
          "name": "bug_actiongroup_update_product_build_inc.php",
          "type": "blob",
          "size": 2.9384765625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Bug action group include file\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses access_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses gpc_api.php\n * @uses lang_api.php\n */\n\nif( !defined( 'BUG_ACTIONGROUP_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'lang_api.php' );\n\n/**\n * Prints the title for the custom action page.\n * @return void\n */\nfunction action_update_product_build_print_title() {\n\techo lang_get( 'actiongroup_menu_update_product_build' );\n}\n\n/**\n * Prints the field within the custom action form.  This has an entry for\n * every field the user need to supply + the submit button.  The fields are\n * added as rows in a table that is already created by the calling code.\n * A row has two columns.\n * @return void\n */\nfunction action_update_product_build_print_fields() {\n?>\n    <tr>\n        <th class=\"category\">\n            <?php echo lang_get( 'product_build' ); ?>\n        </th>\n        <td>\n            <input type=\"text\" name=\"build\" class=\"input-sm\" size=\"32\" maxlength=\"32\" />\n        </td>\n    </tr>\n<?php\n}\n\n/**\n * Validates the action on the specified bug id.\n *\n * @param integer $p_bug_id A bug identifier.\n * @return string|null On failure: the reason why the action could not be validated. On success: null.\n */\nfunction action_update_product_build_validate( $p_bug_id ) {\n\t$t_bug_id = (int)$p_bug_id;\n\n\tif( bug_is_readonly( $t_bug_id ) ) {\n\t\treturn lang_get( 'actiongroup_error_issue_is_readonly' );\n\t}\n\n\tif( !access_has_bug_level( config_get( 'update_bug_threshold' ), $t_bug_id ) ) {\n\t\treturn lang_get( 'access_denied' );\n\t}\n\n\treturn null;\n}\n\n/**\n * Executes the custom action on the specified bug id.\n *\n * @param integer $p_bug_id The bug id to execute the custom action on.\n * @return null Previous validation ensures that this function doesn't fail. Therefore we can always return null to indicate no errors occurred.\n */\nfunction action_update_product_build_process( $p_bug_id ) {\n\t$t_build = gpc_get_string( 'build' );\n\n\tbug_set_field( $p_bug_id, 'build', $t_build );\n\treturn null;\n}\n"
        },
        {
          "name": "bug_actiongroup_update_severity_inc.php",
          "type": "blob",
          "size": 3.01953125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Bug action group include file\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses access_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses gpc_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nif( !defined( 'BUG_ACTIONGROUP_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\n/**\n * Prints the title for the custom action page.\n * @return void\n */\nfunction action_update_severity_print_title() {\n\techo lang_get( 'update_severity_title' );\n}\n\n/**\n * Prints the field within the custom action form.  This has an entry for\n * every field the user need to supply + the submit button.  The fields are\n * added as rows in a table that is already created by the calling code.\n * A row has two columns.\n * @return void\n */\nfunction action_update_severity_print_fields() {\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php echo lang_get( 'update_severity_msg' ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<select name=\"severity\" class=\"input-sm\">';\n\t\t\t\t<?php print_enum_string_option_list( 'severity' ); ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php\n}\n\n/**\n * Validates the action on the specified bug id.\n *\n * @param integer $p_bug_id A bug identifier.\n * @return string|null On failure: the reason why the action could not be validated. On success: null.\n */\nfunction action_update_severity_validate( $p_bug_id ) {\n\t$t_update_severity_threshold = config_get( 'update_bug_threshold' );\n\t$t_bug_id = $p_bug_id;\n\n\tif( bug_is_readonly( $t_bug_id ) ) {\n\t\treturn lang_get( 'actiongroup_error_issue_is_readonly' );\n\t}\n\n\tif( !access_has_bug_level( $t_update_severity_threshold, $t_bug_id ) ) {\n\t\treturn lang_get( 'access_denied' );\n\t}\n\n\treturn null;\n}\n\n/**\n * Executes the custom action on the specified bug id.\n *\n * @param integer $p_bug_id The bug id to execute the custom action on.\n * @return null Previous validation ensures that this function doesn't fail. Therefore we can always return null to indicate no errors occurred.\n */\nfunction action_update_severity_process( $p_bug_id ) {\n\t$f_severity = gpc_get_string( 'severity' );\n\tbug_set_field( $p_bug_id, 'severity', $f_severity );\n\treturn null;\n}\n"
        },
        {
          "name": "bug_change_status_page.php",
          "type": "blob",
          "size": 13.5712890625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handling of Bug Status change\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses date_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses relationship_api.php\n * @uses sponsorship_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'date_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'relationship_api.php' );\nrequire_api( 'sponsorship_api.php' );\nrequire_api( 'version_api.php' );\n\nrequire_css( 'status_config.php' );\n\n$f_bug_id = gpc_get_int( 'id' );\n$t_bug = bug_get( $f_bug_id );\n\n$t_file = __FILE__;\n$t_mantis_dir = __DIR__ . DIRECTORY_SEPARATOR;\n$t_show_page_header = false;\n$t_force_readonly = true;\n\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\n$f_new_status = gpc_get_int( 'new_status' );\n$f_change_type = gpc_get_string( 'change_type', BUG_UPDATE_TYPE_CHANGE_STATUS );\n\n$t_reopen = config_get( 'bug_reopen_status', null, null, $t_bug->project_id );\n$t_resolved = config_get( 'bug_resolved_status_threshold', null, null, $t_bug->project_id );\n$t_closed = config_get( 'bug_closed_status_threshold', null, null, $t_bug->project_id );\n$t_resolution_fixed = config_get( 'bug_resolution_fixed_threshold', null, null, $t_bug->project_id );\n$t_current_user_id = auth_get_current_user_id();\n\n# Ensure user has proper access level before proceeding\nif( $f_new_status == $t_reopen && $f_change_type == BUG_UPDATE_TYPE_REOPEN ) {\n\taccess_ensure_can_reopen_bug( $t_bug, $t_current_user_id );\n} else if( $f_new_status == $t_closed ) {\n\taccess_ensure_can_close_bug( $t_bug, $t_current_user_id );\n} else if( bug_is_readonly( $f_bug_id )\n\t|| !access_has_bug_level( access_get_status_threshold( $f_new_status, $t_bug->project_id ), $f_bug_id, $t_current_user_id ) ) {\n\taccess_denied();\n}\n\n$t_can_update_due_date = access_has_bug_level( config_get( 'due_date_update_threshold' ), $f_bug_id );\n\n# get new issue handler if set, otherwise default to original handler\n$f_handler_id = gpc_get_int( 'handler_id', $t_bug->handler_id );\n\nif( config_get( 'bug_assigned_status' ) == $f_new_status ) {\n\t$t_bug_sponsored = config_get( 'enable_sponsorship' )\n\t\t&& sponsorship_get_amount( sponsorship_get_all_ids( $f_bug_id ) ) > 0;\n\tif( $t_bug_sponsored && !access_has_bug_level( config_get( 'assign_sponsored_bugs_threshold' ), $f_bug_id ) ) {\n\t\ttrigger_error( ERROR_SPONSORSHIP_ASSIGNER_ACCESS_LEVEL_TOO_LOW, ERROR );\n\t}\n\n\tif( $f_handler_id != NO_USER ) {\n\t\t# The new handler is checked at project level\n\t\tif( !access_has_project_level( config_get( 'handle_bug_threshold' ), $t_bug->project_id, $f_handler_id ) ) {\n\t\t\ttrigger_error( ERROR_HANDLER_ACCESS_TOO_LOW, ERROR );\n\t\t}\n\t\tif( $t_bug_sponsored && !access_has_project_level( config_get( 'handle_sponsored_bugs_threshold' ), $t_bug->project_id, $f_handler_id ) ) {\n\t\t\ttrigger_error( ERROR_SPONSORSHIP_HANDLER_ACCESS_LEVEL_TOO_LOW, ERROR );\n\t\t}\n\t}\n}\n\n$t_status_label = str_replace( ' ', '_', MantisEnum::getLabel( config_get( 'status_enum_string' ), $f_new_status ) );\n\nlayout_page_header( bug_format_summary( $f_bug_id, SUMMARY_CAPTION ) );\n\nlayout_page_begin();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\n\t<div id=\"bug-change-status-div\" class=\"form-container\">\n\t<form id=\"bug-change-status-form\" name=\"bug_change_status_form\" method=\"post\" action=\"bug_update.php\">\n\n\t<fieldset>\n\n\t<?php echo form_security_field( 'bug_update' ) ?>\n\t<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php echo lang_get( $t_status_label . '_bug_title' ) ?>\n\t\t</h4>\n\t</div>\n\n\t<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\n\t<div class=\"table-responsive\">\n\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<input type=\"hidden\" name=\"bug_id\" value=\"<?php echo $f_bug_id ?>\" />\n\t\t\t<input type=\"hidden\" name=\"status\" value=\"<?php echo $f_new_status ?>\" />\n\t\t\t<input type=\"hidden\" name=\"last_updated\" value=\"<?php echo $t_bug->last_updated ?>\" />\n\t\t\t<?php\n\t\t\t\tif( $f_new_status >= $t_resolved ) {\n\t\t\t\t\tif( relationship_can_resolve_bug( $f_bug_id ) == false ) {\n\t\t\t\t\t\tif( OFF == config_get( 'allow_parent_of_unresolved_to_close' ) ) {\n\t\t\t\t\t\t\ttrigger_error( ERROR_BUG_RESOLVE_DEPENDANTS_BLOCKING, ERROR );\n\t\t\t\t\t\t}\n\t\t\t\t\t\techo '<tr><td colspan=\"2\">' . lang_get( 'relationship_warning_blocking_bugs_not_resolved_2' ) . '</td></tr>';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t?>\n\t\t</thead>\n\t\t<tbody>\n<?php\n\t$t_current_resolution = $t_bug->resolution;\n\t$t_bug_resolution_is_fixed = $t_current_resolution >= $t_resolution_fixed;\n\n\tif( $f_new_status >= $t_resolved && ( $f_new_status < $t_closed || !$t_bug_resolution_is_fixed ) ) {\n?>\n<!-- Resolution -->\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'resolution' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<select name=\"resolution\" class=\"input-sm\">\n\t\t\t<?php\n\t\t\t\t$t_resolution = $t_bug_resolution_is_fixed ? $t_current_resolution : $t_resolution_fixed;\n\n\t\t\t\t$t_relationships = relationship_get_all_src( $f_bug_id );\n\t\t\t\tforeach( $t_relationships as $t_relationship ) {\n\t\t\t\t\tif( $t_relationship->type == BUG_DUPLICATE ) {\n\t\t\t\t\t\t$t_resolution = config_get( 'bug_duplicate_resolution' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprint_enum_string_option_list( 'resolution', $t_resolution );\n\t\t\t?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php\n\t\tif( $t_resolution != config_get( 'bug_duplicate_resolution' ) ) {\n?>\n<!-- Duplicate ID -->\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'duplicate_id' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" class=\"input-sm\" name=\"duplicate_id\" maxlength=\"10\" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\n<?php\n\t\t}\n\t}\n\n\tif( access_has_bug_level( config_get( 'update_bug_assign_threshold', config_get( 'update_bug_threshold' ) ), $f_bug_id ) ) {\n\t\t$t_suggested_handler_id = $t_bug->handler_id;\n\n\t\tif( $t_suggested_handler_id == NO_USER && access_has_bug_level( config_get( 'handle_bug_threshold' ), $f_bug_id ) ) {\n\t\t\t$t_suggested_handler_id = $t_current_user_id;\n\t\t}\n\n?>\n<!-- Assigned To -->\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'assigned_to' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<select name=\"handler_id\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"0\"></option>\n\t\t\t\t\t\t<?php print_assign_to_option_list( $t_suggested_handler_id, $t_bug->project_id ) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php } ?>\n\n<?php\n\tif( $t_can_update_due_date ) {\n\t\t$t_date_to_display = '';\n\n\t\tif( !date_is_null( $t_bug->due_date ) ) {\n\t\t\t$t_date_to_display = date( config_get( 'normal_date_format' ), $t_bug->due_date );\n\t\t}\n?>\n\t<!-- Due date -->\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php echo lang_get( 'due_date' ) ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<input type=\"text\" id=\"due_date\" name=\"due_date\" class=\"datetimepicker input-sm\" size=\"16\" maxlength=\"16\"\n\t\t\t\tdata-picker-locale=\"<?php lang_get_current_datetime_locale() ?>\"\n\t\t\t\tdata-picker-format=\"<?php echo config_get( 'datetime_picker_format' ) ?>\"\n\t\t\t\t<?php helper_get_tab_index() ?> value=\"<?php echo $t_date_to_display ?>\" />\n\t\t\t<?php print_icon( 'fa-calendar', 'fa-xlg datetimepicker' ); ?>\n\t\t</td>\n\t</tr>\n\n<?php\n\t}\n?>\n\n\t<!-- Custom Fields -->\n<?php\n\t/**\n\t * @todo thraxisp - I undid part of the change for #5068 for #5527\n\t * We really need to say what fields are shown in which statusses. For now,\n\t * this page will show required custom fields in update mode, or\n\t * display or required fields on resolve or close\n\t */\n\t$t_custom_status_label = 'update'; # Don't show custom fields by default\n\tif( ( $f_new_status >= $t_resolved ) && ( $f_new_status < $t_closed ) ) {\n\t\t$t_custom_status_label = 'resolved';\n\t}\n\tif( $t_closed == $f_new_status ) {\n\t\t$t_custom_status_label = 'closed';\n\t}\n\n\t$t_related_custom_field_ids = custom_field_get_linked_ids( $t_bug->project_id );\n\n\tforeach( $t_related_custom_field_ids as $t_id ) {\n\t\t$t_def = custom_field_get_definition( $t_id );\n\t\t$t_display = $t_def['display_' . $t_custom_status_label];\n\t\t$t_require = $t_def['require_' . $t_custom_status_label];\n\n\t\t$t_show_custom_field = $t_require;\n\n\t\tif( !$t_show_custom_field ) {\n\t\t\tif( in_array( $t_custom_status_label, array( 'resolved', 'closed' ) ) && $t_display ) {\n\t\t\t\t$t_show_custom_field = true;\n\t\t\t} else {\n\t\t\t\t$t_plugin_Event_result = event_signal( 'EVENT_UPDATE_BUG_SHOW_CUSTOM_FIELD', array( $t_bug, $t_id ) );\n\t\t\t\tforeach( $t_plugin_Event_result as $t_event_result ) {\n\t\t\t\t\tif( in_array( true, $t_event_result ) ) {\n\t\t\t\t\t\t$t_show_custom_field = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( !$t_show_custom_field ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t$t_has_write_access = custom_field_has_write_access( $t_id, $f_bug_id );\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php if( $t_require && $t_has_write_access ) {?><span class=\"required\">*</span><?php } ?>\n\t\t\t<?php echo string_attribute( lang_get_defaulted( $t_def['name'] ) ) ?>\n\t\t</th>\n\t\t<td>\n<?php\n\t\t\tif( $t_has_write_access ) {\n\t\t\t\tprint_custom_field_input( $t_def, $f_bug_id, $t_require );\n\t\t\t} elseif( custom_field_has_read_access( $t_id, $f_bug_id ) ) {\n\t\t\t\tprint_custom_field_value( $t_def, $t_id, $f_bug_id );\n\t\t\t}\n?>\n\t\t</td>\n\t</tr>\n\n<?php\n\t} # foreach( $t_related_custom_field_ids as $t_id )\n\n\tif( ( $f_new_status >= $t_resolved ) ) {\n\t\tif( version_should_show_product_version( $t_bug->project_id )\n\t\t\t&& !bug_is_readonly( $f_bug_id )\n\t\t\t&& access_has_bug_level( config_get( 'update_bug_threshold' ), $f_bug_id )\n\t\t) {\n?>\n\t\t\t<!-- Fixed in Version -->\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'fixed_in_version' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<select name=\"fixed_in_version\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_version_option_list( $t_bug->fixed_in_version, $t_bug->project_id, VERSION_ALL ) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php\n\t\t}\n\t}\n\n\tevent_signal( 'EVENT_UPDATE_BUG_STATUS_FORM', array( $f_bug_id, $f_new_status ) );\n\n\tif( $f_change_type == BUG_UPDATE_TYPE_REOPEN ) {\n?>\n\t<!-- Bug was re-opened -->\n<?php\n\t\tprintf( '\t<input type=\"hidden\" name=\"resolution\" value=\"%s\" />' . \"\\n\", config_get( 'bug_reopen_resolution' ) );\n\t}\n?>\n<?php\n\t$t_default_bugnote_view_status = config_get( 'default_bugnote_view_status' );\n\t$t_bugnote_private = $t_default_bugnote_view_status == VS_PRIVATE;\n\t$t_bugnote_class = $t_bugnote_private ? 'form-control bugnote-private' : 'form-control';\n\n\tif( access_has_bug_level( config_get( 'private_bugnote_threshold' ), $f_bug_id ) ) { ?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n<?php\n\t\tif( access_has_bug_level( config_get( 'set_view_status_threshold' ), $f_bug_id ) ) {\n?>\n\t\t\t<input type=\"checkbox\" id=\"bugnote_add_view_status\" class=\"ace\" name=\"private\"\n\t\t\t\t<?php check_checked( $t_default_bugnote_view_status, VS_PRIVATE ); ?> />\n\t\t\t<label class=\"lbl padding-6\" for=\"bugnote_add_view_status\"><?php echo lang_get( 'private' ) ?></label>\n<?php\n\t\t} else {\n\t\t\techo get_enum_element( 'view_state', $t_default_bugnote_view_status );\n\t\t}\n?>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php } ?>\n\t\t\t<!-- Bugnote -->\n\t\t\t<tr id=\"bug-change-status-note\">\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'add_bugnote_title' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<textarea name=\"bugnote_text\" id=\"bugnote_text\" class=\"<?php echo $t_bugnote_class ?>\" cols=\"80\" rows=\"7\"></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php\n\tif( config_get( 'time_tracking_enabled' )\n\t\t&& access_has_bug_level( config_get( 'private_bugnote_threshold' ), $f_bug_id )\n\t\t&& access_has_bug_level( config_get( 'time_tracking_edit_threshold' ), $f_bug_id )\n\t) {\n\t?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'time_tracking' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" name=\"time_tracking\" class=\"input-sm\" size=\"5\" placeholder=\"hh:mm\" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\n<?php\n\t}\n\n\tevent_signal( 'EVENT_BUGNOTE_ADD_FORM', array( $f_bug_id ) );\n?>\n\n</tbody>\n</table>\n<input type=\"hidden\" name=\"action_type\" value=\"<?php echo string_attribute( $f_change_type ); ?>\" />\n\n</div>\n</div>\n<div class=\"widget-toolbox padding-8 clearfix\">\n\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ) ?></span>\n\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( $t_status_label . '_bug_button' ) ?>\" />\n</div>\n</div>\n</div>\n</div>\n</form>\n<div class=\"space-10\"></div>\n</div>\n<?php\ndefine( 'BUG_VIEW_INC_ALLOW', true );\ninclude( __DIR__ . '/bug_view_inc.php' );\n"
        },
        {
          "name": "bug_file_delete.php",
          "type": "blob",
          "size": 2.4736328125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Delete a file from a bug and then view the bug\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'bug_file_delete' );\n\n$f_file_id = gpc_get_int( 'file_id' );\n\n$t_bug_id = file_get_field( $f_file_id, 'bug_id' );\n\n$t_bug = bug_get( $t_bug_id, true );\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\n$t_attachment_owner = file_get_field( $f_file_id, 'user_id' );\n$t_current_user_is_attachment_owner = $t_attachment_owner == auth_get_current_user_id();\nif( !$t_current_user_is_attachment_owner || ( $t_current_user_is_attachment_owner && !config_get( 'allow_delete_own_attachments' ) ) ) {\n\taccess_ensure_bug_level( config_get( 'delete_attachments_threshold' ), $t_bug_id );\n}\n\nhelper_ensure_confirmed( lang_get( 'delete_attachment_sure_msg' ), lang_get( 'delete' ) );\n\nfile_delete( $f_file_id, 'bug' );\n\nform_security_purge( 'bug_file_delete' );\n\nprint_header_redirect_view( $t_bug_id );\n"
        },
        {
          "name": "bug_monitor_add.php",
          "type": "blob",
          "size": 1.9951171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This file turns monitoring on or off for a bug for the current user\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'bug_monitor_add' );\n\n$f_bug_id = gpc_get_int( 'bug_id' );\n$f_usernames = trim( gpc_get_string( 'user_to_add', '' ) );\n\n$t_payload = array();\n\nif( !is_blank( $f_usernames ) ) {\n\t$t_usernames = preg_split( '/[,|]/', $f_usernames, -1, PREG_SPLIT_NO_EMPTY );\n\t$t_users = array();\n\tforeach( $t_usernames as $t_username ) {\n\t\t$t_users[] = array( 'name_or_realname' => trim( $t_username ) );\n\t}\n\n\t$t_payload['users'] = $t_users;\n}\n\n$t_data = array(\n\t'query' => array( 'issue_id' => $f_bug_id ),\n\t'payload' => $t_payload,\n);\n\n$t_command = new MonitorAddCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'bug_monitor_add' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "bug_monitor_delete.php",
          "type": "blob",
          "size": 2.6572265625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This file turns monitoring on or off for a bug for the current user\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses print_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\n\nform_security_validate( 'bug_monitor_delete' );\n\n$f_bug_id = gpc_get_int( 'bug_id' );\n$t_bug = bug_get( $f_bug_id, true );\n$f_user_id = gpc_get_int( 'user_id', NO_USER );\n\n$t_logged_in_user_id = auth_get_current_user_id();\n\nif( $f_user_id === NO_USER ) {\n\t$t_user_id = $t_logged_in_user_id;\n} else {\n\tuser_ensure_exists( $f_user_id );\n\t$t_user_id = $f_user_id;\n}\n\nif( user_is_anonymous( $t_user_id ) ) {\n\ttrigger_error( ERROR_PROTECTED_ACCOUNT, E_USER_ERROR );\n}\n\nbug_ensure_exists( $f_bug_id );\n\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\nif( $t_logged_in_user_id == $t_user_id ) {\n\taccess_ensure_bug_level( config_get( 'monitor_bug_threshold' ), $f_bug_id );\n} else {\n\taccess_ensure_bug_level( config_get( 'monitor_delete_others_bug_threshold' ), $f_bug_id );\n}\n\nbug_unmonitor( $f_bug_id, $t_user_id );\n\nform_security_purge( 'bug_monitor_delete' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "bug_relationship_add.php",
          "type": "blob",
          "size": 2.271484375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add bug relationships\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @author Marcello Scata' <marcelloscata at users.sourceforge.net> ITALY\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses history_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'history_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'bug_relationship_add' );\n\n$f_rel_type = gpc_get_int( 'rel_type' );\n$f_src_bug_id = gpc_get_int( 'src_bug_id' );\n$f_dest_bug_id_string = gpc_get_string( 'dest_bug_id' );\n\n$t_dest_bug_id_string = str_replace( ',', '|', $f_dest_bug_id_string );\n$t_dest_bug_id_array = explode( '|', $t_dest_bug_id_string );\n\nforeach( $t_dest_bug_id_array as $t_dest_bug_id ) {\n\t# Skip empty bug ids and ignore source bug when processing multiple targets\n\tif( count( $t_dest_bug_id_array ) > 1\n\t&& ( is_blank( $t_dest_bug_id ) || $f_src_bug_id == $t_dest_bug_id )\n\t) {\n\t\tcontinue;\n\t}\n\n\t$t_data = array(\n\t\t'query' => array( 'issue_id' => $f_src_bug_id ),\n\t\t'payload' => array(\n\t\t\t'type' => array( 'id' => $f_rel_type ),\n\t\t\t'issue' => array( 'id' => $t_dest_bug_id )\n\t\t)\n\t);\n\n\t$t_command = new IssueRelationshipAddCommand( $t_data );\n\t$t_command->execute();\n}\n\nform_security_purge( 'bug_relationship_add' );\n\nprint_header_redirect_view( $f_src_bug_id );\n"
        },
        {
          "name": "bug_relationship_delete.php",
          "type": "blob",
          "size": 1.798828125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @author Marcello Scata' <marcelloscata at users.sourceforge.net> ITALY\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'bug_relationship_delete' );\n\n$f_rel_id = gpc_get_int( 'rel_id' );\n$f_bug_id = gpc_get_int( 'bug_id' );\n\n$t_data = array(\n\t'query' => array(\n\t\t'issue_id' => $f_bug_id,\n\t\t'relationship_id' => $f_rel_id\n\t)\n);\n\nhelper_ensure_confirmed( lang_get( 'delete_relationship_sure_msg' ), lang_get( 'delete' ) );\n\n$t_command = new IssueRelationshipDeleteCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'bug_relationship_delete' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "bug_relationship_graph.php",
          "type": "blob",
          "size": 5.84765625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Display bug relationship graph\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses relationship_graph_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'relationship_graph_api.php' );\n\nrequire_css( 'status_config.php' );\n\n# If relationship graphs were made disabled, we disallow any access to\n# this script.\n\nauth_ensure_user_authenticated();\n\nif( ON != config_get( 'relationship_graph_enable' ) ) {\n\taccess_denied();\n}\n\n$f_bug_id\t\t= gpc_get_int( 'bug_id' );\n$f_type\t\t\t= gpc_get_string( 'graph', 'relation' );\n$f_orientation\t= gpc_get_string( 'orientation', config_get( 'relationship_graph_orientation' ) );\n$f_show_summary\t= gpc_get_bool( 'summary', false );\n\nif( 'relation' == $f_type ) {\n\t$t_graph_type = 'relation';\n\t$t_graph_type_switch = 'dependency';\n\t$t_graph_relation = true;\n\t$t_title = lang_get( 'relation_graph' );\n} else {\n\t$t_graph_type = 'dependency';\n\t$t_graph_type_switch = 'relation';\n\t$t_graph_relation = false;\n\t$t_title = lang_get( 'dependency_graph' );\n}\n\nif( 'horizontal' == $f_orientation ) {\n\t$t_graph_orientation = 'horizontal';\n\t$t_graph_orientation_switch = 'vertical';\n\t$t_graph_horizontal = true;\n} else {\n\t$t_graph_orientation = 'vertical';\n\t$t_graph_orientation_switch = 'horizontal';\n\t$t_graph_horizontal = false;\n}\n\n$t_bug = bug_get( $f_bug_id, true );\n\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\naccess_ensure_bug_level( config_get( 'view_bug_threshold' ), $f_bug_id );\n\ncompress_enable();\n\nlayout_page_header( bug_format_summary( $f_bug_id, SUMMARY_CAPTION ) );\nlayout_page_begin();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-sitemap', 'ace-icon' ); ?>\n\t\t\t\t<?php echo $t_title ?>\n\t\t\t</h4>\n\t\t</div>\n\n\t\t<div class=\"widget-body\">\n\t\t\t<!-- Buttons -->\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix noprint\">\n\t\t\t\t<div class=\"btn-group pull-left\">\n<?php\n\t# View Issue\n\n\tprint_link_button( 'view.php?id=' . $f_bug_id, lang_get( 'view_issue' ) );\n\n\t# Relation/Dependency Graph Switch\n\tprint_link_button(\n\t\t'bug_relationship_graph.php?bug_id=' . $f_bug_id\n\t\t. '&graph=' . $t_graph_type_switch\n\t\t. '&summary=' . $f_show_summary,\n\t\tlang_get( $t_graph_relation ? 'dependency_graph' : 'relation_graph' )\n\t);\n\n\t# Horizontal/Vertical Switch\n\tif( !$t_graph_relation ) {\n\t\tprint_link_button(\n\t\t\t'bug_relationship_graph.php?bug_id=' . $f_bug_id\n\t\t\t. '&graph=' . $t_graph_type\n\t\t\t. '&orientation=' . $t_graph_orientation_switch\n\t\t\t. '&summary=' . $f_show_summary,\n\t\t\tlang_get( $t_graph_orientation_switch )\n\t\t);\n\t}\n\n\tprint_link_button(\n\t\t'bug_relationship_graph.php?bug_id=' . $f_bug_id\n\t\t. '&graph=' . $t_graph_type\n\t\t. '&orientation=' . $t_graph_orientation\n\t\t. '&summary=' . !$f_show_summary,\n\t\tlang_get( $f_show_summary ? 'hide_summary' : 'show_summary' )\n\t);\n?>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Graph -->\n\t\t\t<div class=\"center padding-8\">\n<?php\n\tif( $t_graph_relation ) {\n\t\t$t_graph = relgraph_generate_rel_graph( $f_bug_id, $f_show_summary );\n\t} else {\n\t\t$t_graph = relgraph_generate_dep_graph( $f_bug_id, $t_graph_horizontal, $f_show_summary );\n\t}\n\n\t$t_map_name = 'relationship_graph_map';\n\trelgraph_output_map( $t_graph, $t_map_name );\n\n\t$t_graph_src = \"bug_relationship_graph_img.php?bug_id=$f_bug_id&graph=$t_graph_type&orientation=$t_graph_orientation&summary=$f_show_summary\";\n?>\n\t\t\t\t<img src=\"<?php echo $t_graph_src ?>\"\n\t\t\t\t\t usemap=\"#<?php echo $t_map_name ?>\"\n\t\t\t\t\t alt=\"<?php echo $t_title ?>\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<!-- Legend -->\n\t\t\t<div class=\"center widget-toolbox\">\n<?php\n\t$t_legend = array(\n\t\t'related_to' => 'rel_related.png',\n\t\t'blocks' => 'rel_dependant.png',\n\t\t'duplicate_of' => 'rel_duplicate.png',\n\t);\n\tforeach( $t_legend as $t_key => $t_image ) {\n\t\t$t_string = lang_get( $t_key );\n?>\n\t\t\t\t<span class=\"padding-8\">\n\t\t\t\t\t<img alt=\"<?php echo $t_string ?>\" src=\"images/<?php echo $t_image ?>\" />\n\t\t\t\t\t<?php echo $t_string ?>\n\t\t\t\t</span>\n<?php\n\t}\n?>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class=\"space-10\"></div>\n</div>\n\n<?php\n$_GET['id'] = $f_bug_id;\n$t_show_page_header = false;\n$t_force_readonly = true;\n$t_mantis_dir = __DIR__ . DIRECTORY_SEPARATOR;\n$t_file = __FILE__;\n\ndefine( 'BUG_VIEW_INC_ALLOW', true );\ninclude( __DIR__ . '/bug_view_inc.php' );\n"
        },
        {
          "name": "bug_relationship_graph_img.php",
          "type": "blob",
          "size": 2.3583984375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Display Bug relationship Graph\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses gpc_api.php\n * @uses relationship_graph_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'relationship_graph_api.php' );\n\n# If relationship graphs were made disabled, we disallow any access to\n# this script.\n\nauth_ensure_user_authenticated();\n\nif( ON != config_get( 'relationship_graph_enable' ) ) {\n\taccess_denied();\n}\n\n$f_bug_id\t\t= gpc_get_int( 'bug_id' );\n$f_type\t\t\t= gpc_get_string( 'graph', 'relation' );\n$f_orientation\t= gpc_get_string( 'orientation', config_get( 'relationship_graph_orientation' ) );\n$f_show_summary\t= gpc_get_bool( 'summary', false );\n\n$t_bug = bug_get( $f_bug_id, true );\n\naccess_ensure_bug_level( config_get( 'view_bug_threshold', null, null, $t_bug->project_id ), $f_bug_id );\n\ncompress_enable();\n\n$t_graph_relation = ( 'relation' == $f_type );\n$t_graph_horizontal = ( 'horizontal' == $f_orientation );\n\nif( $t_graph_relation ) {\n\t$t_graph = relgraph_generate_rel_graph( $f_bug_id, $f_show_summary );\n} else {\n\t$t_graph = relgraph_generate_dep_graph( $f_bug_id, $t_graph_horizontal, $f_show_summary );\n}\n\nrelgraph_output_image( $t_graph );\n"
        },
        {
          "name": "bug_reminder.php",
          "type": "blob",
          "size": 4.3232421875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page allows an authorized user to send a reminder by email to another user\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses bug_api.php\n * @uses bugnote_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses email_api.php\n * @uses error_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'email_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'bug_reminder' );\n\n$f_bug_id\t\t= gpc_get_int( 'bug_id' );\n$f_to\t\t\t= gpc_get_int_array( 'to' );\n$f_body\t\t\t= gpc_get_string( 'bugnote_text' );\n$f_view_state\t= gpc_get_bool( 'private' ) ? VS_PRIVATE : VS_PUBLIC;\n\n$t_bug = bug_get( $f_bug_id, true );\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\nif( bug_is_readonly( $f_bug_id ) ) {\n\terror_parameters( $f_bug_id );\n\ttrigger_error( ERROR_BUG_READ_ONLY_ACTION_DENIED, ERROR );\n}\n\n# Abort if user is not authorized to send reminders\naccess_ensure_bug_level( config_get( 'bug_reminder_threshold' ), $f_bug_id );\n\n# Ensure target users are allowed to receive reminders\n$t_receive_reminder = config_get( 'reminder_receive_threshold' );\nforeach( $f_to as $t_recipient ) {\n\tif( !access_has_bug_level( $t_receive_reminder, $f_bug_id, $t_recipient ) ) {\n\t\ttrigger_error( ERROR_USER_DOES_NOT_HAVE_REQ_ACCESS, ERROR );\n\t}\n}\n\n# Automatically add recipients to monitor list if they are above the monitor\n# threshold, option is enabled, and not reporter or handler.\n$t_reminder_recipients_monitor_bug = config_get( 'reminder_recipients_monitor_bug' );\n$t_monitor_bug_threshold = config_get( 'monitor_bug_threshold' );\n$t_handler = bug_get_field( $f_bug_id, 'handler_id' );\n$t_reporter = bug_get_field( $f_bug_id, 'reporter_id' );\nforeach( $f_to as $t_recipient ) {\n\tif( ON == $t_reminder_recipients_monitor_bug\n\t\t&& access_has_bug_level( $t_monitor_bug_threshold, $f_bug_id )\n\t\t&& $t_recipient != $t_handler\n\t\t&& $t_recipient != $t_reporter\n\t) {\n\t\tbug_monitor( $f_bug_id, $t_recipient );\n\t}\n}\n\n$t_result = email_bug_reminder( $f_to, $f_bug_id, $f_body );\n\n# Add reminder as bugnote if store reminders option is ON.\nif( ON == config_get( 'store_reminders' ) ) {\n\t# Build list of recipients, truncated to note_attr fields's length\n\t$t_attr = '|';\n\t$t_length = 0;\n\tforeach( $t_result as $t_id ) {\n\t\t$t_recipient = $t_id . '|';\n\t\t$t_length += strlen( $t_recipient );\n\t\tif( $t_length > 250 ) {\n\t\t\t# Remove trailing delimiter to indicate truncation\n\t\t\t$t_attr = rtrim( $t_attr, '|' );\n\t\t\tbreak;\n\t\t}\n\t\t$t_attr .= $t_recipient;\n\t}\n\n\tbugnote_add( $f_bug_id, $f_body, 0, $f_view_state == VS_PRIVATE, REMINDER, $t_attr, null, false );\n\n\t# Note: we won't trigger mentions here since reminders are triggered.\n}\n\nform_security_purge( 'bug_reminder' );\n\n$t_redirect = string_get_bug_view_url( $f_bug_id );\nprint_header_redirect( $t_redirect );\n"
        },
        {
          "name": "bug_reminder_page.php",
          "type": "blob",
          "size": 5.71484375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page allows an authorized user to send a reminder by email to another user\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses error_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nrequire_css( 'status_config.php' );\n\n$f_bug_id = gpc_get_int( 'bug_id' );\n\n$t_bug = bug_get( $f_bug_id, true );\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\nif( bug_is_readonly( $f_bug_id ) ) {\n\terror_parameters( $f_bug_id );\n\ttrigger_error( ERROR_BUG_READ_ONLY_ACTION_DENIED, ERROR );\n}\n\naccess_ensure_bug_level( config_get( 'bug_reminder_threshold' ), $f_bug_id );\n\nlayout_page_header( bug_format_summary( $f_bug_id, SUMMARY_CAPTION ) );\nlayout_page_begin();\n?>\n\n<?php # Send reminder Form BEGIN ?>\n\n<div id=\"send-reminder-div\" class=\"col-md-12 col-xs-12\">\n<form method=\"post\" action=\"bug_reminder.php\">\n<?php echo form_security_field( 'bug_reminder' ) ?>\n<input type=\"hidden\" name=\"bug_id\" value=\"<?php echo $f_bug_id ?>\" />\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-envelope', 'ace-icon' ); ?>\n\t\t<?php echo lang_get( 'bug_reminder' ) ?>\n\t</h4>\n</div>\n<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\n<table class=\"table table-bordered table-condensed table-striped\">\n<?php\n\t$t_store_reminders = ON == config_get( 'store_reminders' );\n\n\t# Only display view status checkbox/info if reminders are stored as bugnotes\n\tif( $t_store_reminders ) {\n\t\t$t_default_reminder_view_status = config_get( 'default_reminder_view_status' );\n\t\t$t_bugnote_class = $t_default_reminder_view_status == VS_PRIVATE\n\t\t\t? 'bugnote-private'\n\t\t\t: '';\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t</th>\n\t\t<td></td>\n\t\t<td>\n<?php\n\t\tif( access_has_bug_level( config_get( 'set_view_status_threshold' ), $f_bug_id ) ) {\n\t\t\t?>\n\t\t\t<input type=\"checkbox\" id=\"bugnote_add_view_status\" class=\"ace\" name=\"private\"\n\t\t\t\t<?php check_checked( $t_default_reminder_view_status, VS_PRIVATE ); ?> />\n\t\t\t<label class=\"lbl padding-6\" for=\"bugnote_add_view_status\"><?php echo lang_get( 'private' ) ?></label>\n\t\t\t<?php\n\t\t} else {\n\t\t\techo get_enum_element( 'view_state', $t_default_reminder_view_status );\n\t\t}\n?>\n\t\t</td>\n\t</tr>\n<?php\n\t} else {\n\t\t$t_bugnote_class = '';\n\t}\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php echo lang_get( 'to' ) ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<select id=\"recipient\" name=\"to[]\" multiple=\"multiple\" size=\"9\" class=\"width-100\">\n\t\t\t\t<?php\n\t\t\t\t$t_project_id = bug_get_field( $f_bug_id, 'project_id' );\n\t\t\t\t$t_access_level = config_get( 'reminder_receive_threshold' );\n\t\t\t\tif( $t_bug->view_state === VS_PRIVATE ) {\n\t\t\t\t\t$t_private_bug_threshold = config_get( 'private_bug_threshold' );\n\t\t\t\t\tif( $t_private_bug_threshold > $t_access_level ) {\n\t\t\t\t\t\t$t_access_level = $t_private_bug_threshold;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$t_selected_user_id = 0;\n\t\t\t\tprint_user_option_list( $t_selected_user_id, $t_project_id, $t_access_level );\n\t\t\t\t?>\n\t\t\t</select>\n\t\t</td>\n\t\t<td>\n\t\t\t<textarea name=\"bugnote_text\" cols=\"65\" rows=\"10\"\n\t\t\t\t\t  class=\"form-control <?php echo $t_bugnote_class; ?>\"></textarea>\n\t\t</td>\n\t</tr>\n</table>\n\n\t</div>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'bug_send_button' ) ?>\" />\n\t\t</div>\n\t</div>\n\t</div>\n\t</form>\n\t<br>\n\t<div class=\"alert alert-info\">\n\t\t<p>\n\t\t<?php\n\t\t\tprint_icon( 'fa-info-circle', 'fa-lg' );\n\t\t\techo ' ' . lang_get( 'reminder_explain' ) . ' ';\n\t\t\tif( ON == config_get( 'reminder_recipients_monitor_bug' ) ) {\n\t\t\t\techo lang_get( 'reminder_monitor' ) . ' ';\n\t\t\t}\n\t\t\tif( $t_store_reminders ) {\n\t\t\t\techo lang_get( 'reminder_store' );\n\t\t\t}\n\n\t\t\tif( mention_enabled() ) {\n\t\t\t\techo '<br /><br />', sprintf( lang_get( 'reminder_mentions' ), '<strong>' . mentions_tag() . user_get_username( auth_get_current_user_id() ) . '</strong>' );\n\t\t\t}\n\t\t?>\n\t\t</p>\n\t</div>\n</div>\n\n<?php\n$_GET['id'] = $f_bug_id;\n$t_show_page_header = false;\n$t_force_readonly = true;\n$t_mantis_dir = __DIR__ . DIRECTORY_SEPARATOR;\n$t_file = __FILE__;\n\ndefine( 'BUG_VIEW_INC_ALLOW', true );\ninclude( $t_mantis_dir . 'bug_view_inc.php' );\n"
        },
        {
          "name": "bug_report.php",
          "type": "blob",
          "size": 8.1943359375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page stores the reported bug\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses error_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'bug_report' );\n\n$f_master_bug_id = gpc_get_int( 'm_id', 0 );\n$f_rel_type = gpc_get_int( 'rel_type', BUG_REL_NONE );\n$f_copy_notes_from_parent = gpc_get_bool( 'copy_notes_from_parent', false );\n$f_copy_attachments_from_parent = gpc_get_bool( 'copy_attachments_from_parent', false );\n$f_report_stay = gpc_get_bool( 'report_stay', false );\n\n$t_clone_info = array(\n\t'master_issue_id' => $f_master_bug_id,\n\t'relationship_type' => $f_rel_type,\n\t'copy_notes' => $f_copy_notes_from_parent,\n\t'copy_files' => $f_copy_attachments_from_parent\n);\n\nif( $f_master_bug_id > 0 ) {\n\tbug_ensure_exists( $f_master_bug_id );\n\n\t# User can view the master bug\n\taccess_ensure_bug_level( config_get( 'view_bug_threshold' ), $f_master_bug_id );\n\n\tif( bug_is_readonly( $f_master_bug_id ) ) {\n\t\terror_parameters( $f_master_bug_id );\n\t\ttrigger_error( ERROR_BUG_READ_ONLY_ACTION_DENIED, ERROR );\n\t}\n\t$t_master_bug = bug_get( $f_master_bug_id, true );\n\t$t_project_id = $t_master_bug->project_id;\n} else {\n\t$f_project_id = gpc_get_int( 'project_id' );\n\t$t_project_id = $f_project_id;\n}\n\n$t_issue = array(\n\t'project' => array( 'id' => $t_project_id ),\n\t'reporter' => array( 'id' => auth_get_current_user_id() ),\n\t'summary' => gpc_get_string( 'summary' ),\n\t'description' => gpc_get_string( 'description' ),\n);\n\n$t_tag_string = '';\n$f_tag_select = gpc_get_int( 'tag_select', 0 );\nif( $f_tag_select != 0 ) {\n\t$t_tag_string = tag_get_name( $f_tag_select );\n}\n\n$f_tag_string = gpc_get_string( 'tag_string', '' );\nif( !is_blank( $f_tag_string ) ) {\n\t$t_tag_string = is_blank( $t_tag_string ) ? $f_tag_string : ',' . $f_tag_string;\n}\n\n$t_tags = tag_parse_string( $t_tag_string );\nif( !empty( $t_tags ) ) {\n\t$t_issue['tags'] = array();\n\tforeach( $t_tags as $t_tag ) {\n\t\t$t_issue['tags'][] = array( 'name' => $t_tag['name'] );\n\t}\n}\n\n$f_files = gpc_get_file( 'ufile', null );\nif( $f_files !== null && !empty( $f_files ) ) {\n\t$t_issue['files'] = helper_array_transpose( $f_files );\n}\n\n$t_build = gpc_get_string( 'build', '' );\nif( !is_blank( $t_build ) ) {\n\t$t_issue['build'] = $t_build;\n}\n\n$t_platform = gpc_get_string( 'platform', '' );\nif( !is_blank( $t_platform ) ) {\n\t$t_issue['platform'] = $t_platform;\n}\n\n$t_os = gpc_get_string( 'os', '' );\nif( !is_blank( $t_os ) ) {\n\t$t_issue['os'] = $t_os;\n}\n\n$t_os_build = gpc_get_string( 'os_build', '' );\nif( !is_blank( $t_os_build ) ) {\n\t$t_issue['os_build'] = $t_os_build;\n}\n\n$t_version = gpc_get_string( 'product_version', '' );\nif( !is_blank( $t_version ) ) {\n\t$t_issue['version'] = array( 'name' => $t_version );\n}\n\n$t_target_version = gpc_get_string( 'target_version', '' );\nif( !is_blank( $t_target_version ) ) {\n\t$t_issue['target_version'] = array( 'name' => $t_target_version );\n}\n\n$t_profile_id = gpc_get_int( 'profile_id', 0 );\nif( $t_profile_id != 0 ) {\n\t$t_issue['profile'] = array( 'id' => $t_profile_id );\n}\n\n$t_handler_id = gpc_get_int( 'handler_id', NO_USER );\nif( $t_handler_id != NO_USER ) {\n\t$t_issue['handler'] = array( 'id' => $t_handler_id );\n}\n\n$t_monitors = gpc_get_int_array( 'monitors', array() );\nif( $t_monitors ) {\n\t# The API expects a list of arrays with 'id' as key\n\t$t_list = array();\n\tforeach( $t_monitors as $t_monitor_id ) {\n\t\t$t_list[] = array( 'id' => $t_monitor_id );\n\t}\n\t$t_issue['monitors'] = $t_list;\n}\n\n$t_view_state = gpc_get_int( 'view_state', 0 );\nif( $t_view_state != 0 ) {\n\t$t_issue['view_state'] = array( 'id' => $t_view_state );\n}\n\n$t_category_id = gpc_get_int( 'category_id', 0 );\nif( $t_category_id != 0 ) {\n\t$t_issue['category'] = array( 'id' => $t_category_id );\n}\n\n$t_reproducibility = gpc_get_int( 'reproducibility', 0 );\nif( $t_reproducibility != 0 ) {\n\t$t_issue['reproducibility'] = array( 'id' => $t_reproducibility );\n}\n\n$t_severity = gpc_get_int( 'severity', 0 );\nif( $t_severity != 0 ) {\n\t$t_issue['severity'] = array( 'id' => $t_severity );\n}\n\n$t_priority = gpc_get_int( 'priority', 0 );\nif( $t_priority != 0 ) {\n\t$t_issue['priority'] = array( 'id' => $t_priority );\n}\n\n# @TODO decide what to do with projection field - see #27577\n# According to PHPDoc for $g_bug_report_page_fields, projection is not allowed\n# in the list; bug_report_page.php does not display it, so it does not really\n# make sense to process it here.\n$t_projection = gpc_get_int( 'projection', 0 );\nif( $t_projection != 0 ) {\n\t$t_issue['projection'] = array( 'id' => $t_projection );\n}\n\n$t_eta = gpc_get_int( 'eta', 0 );\nif( $t_eta != 0 ) {\n\t$t_issue['eta'] = array( 'id' => $t_eta );\n}\n\n$t_resolution = gpc_get_int( 'resolution', 0 );\nif( $t_resolution != 0 ) {\n\t$t_issue['resolution'] = array( 'id' => $t_resolution );\n}\n\n$t_status = gpc_get_int( 'status', 0 );\nif( $t_status != 0 ) {\n\t$t_issue['status'] = array( 'id' => $t_status );\n}\n\n$t_steps_to_reproduce = gpc_get_string( 'steps_to_reproduce', null );\nif( $t_steps_to_reproduce !== null ) {\n\t$t_issue['steps_to_reproduce'] = $t_steps_to_reproduce;\n}\n\n$t_additional_info = gpc_get_string( 'additional_info', null );\nif( $t_additional_info !== null ) {\n\t$t_issue['additional_information'] = $t_additional_info;\n}\n\n$t_due_date = gpc_get_string( 'due_date', null );\nif( $t_due_date !== null ) {\n\t$t_issue['due_date'] = $t_due_date;\n}\n\n# Validate the custom fields before adding the bug.\n$t_related_custom_field_ids = custom_field_get_linked_ids( $t_project_id );\n$t_custom_fields = array();\nforeach( $t_related_custom_field_ids as $t_id ) {\n\t$t_def = custom_field_get_definition( $t_id );\n\n\t# Produce an error if the field is required but wasn't posted\n\tif( gpc_isset_custom_field( $t_id, $t_def['type'] ) ) {\n\t\t$t_custom_fields[] = array(\n\t\t\t'field' => array( 'id' => $t_id ),\n\t\t\t'value' => gpc_get_custom_field( 'custom_field_' . $t_id, $t_def['type'], null )\n\t\t);\n\t}\n}\n\nif( !empty( $t_custom_fields ) ) {\n\t$t_issue['custom_fields'] = $t_custom_fields;\n}\n\n$t_data = array(\n\t'payload' => array( 'issue' => $t_issue ),\n);\n\nif( $f_master_bug_id > 0 ) {\n\t$t_data['options'] = array( 'clone_info' => $t_clone_info );\n}\n\n$t_command = new IssueAddCommand( $t_data );\n$t_result = $t_command->execute();\n$t_issue_id = (int)$t_result['issue_id'];\n\nform_security_purge( 'bug_report' );\n\nif( $f_report_stay ) {\n\t$t_fields = array(\n\t\t'category_id', 'severity', 'reproducibility', 'profile_id', 'platform',\n\t\t'os', 'os_build', 'target_version', 'build', 'view_state', 'due_date'\n\t);\n\n\t$t_issue = bug_get( $t_issue_id );\n\n\t$t_data = array();\n\tforeach( $t_fields as $t_field ) {\n\t\t$t_data[$t_field] = $t_issue->$t_field;\n\t}\n\n\t$t_data['product_version'] = $t_issue->version;\n\t$t_data['report_stay'] = 1;\n\n\t$t_report_more_bugs_url = string_get_bug_report_url() . '?' . http_build_query( $t_data );\n\n\tprint_header_redirect( $t_report_more_bugs_url );\n} else {\n\tprint_header_redirect_view( $t_issue_id );\n}\n"
        },
        {
          "name": "bug_report_page.php",
          "type": "blob",
          "size": 26.8154296875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This file POSTs data to report_bug.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses collapse_api.php\n * @uses columns_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses date_api.php\n * @uses error_api.php\n * @uses event_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses profile_api.php\n * @uses project_api.php\n * @uses relationship_api.php\n * @uses string_api.php\n * @uses utility_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'collapse_api.php' );\nrequire_api( 'columns_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'date_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'profile_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'relationship_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_api( 'version_api.php' );\n\n$f_master_bug_id = gpc_get_int( 'm_id', 0 );\n\nif( $f_master_bug_id > 0 ) {\n\t# master bug exists...\n\tbug_ensure_exists( $f_master_bug_id );\n\n\t# master bug is not read-only...\n\tif( bug_is_readonly( $f_master_bug_id ) ) {\n\t\terror_parameters( $f_master_bug_id );\n\t\ttrigger_error( ERROR_BUG_READ_ONLY_ACTION_DENIED, ERROR );\n\t}\n\n\t# User can view the master bug\n\taccess_ensure_bug_level( config_get( 'view_bug_threshold' ), $f_master_bug_id );\n\n\t$t_bug = bug_get( $f_master_bug_id, true );\n\n\t#@@@ (thraxisp) Note that the master bug is cloned into the same project as the master, independent of\n\t#       what the current project is set to.\n\tif( $t_bug->project_id != helper_get_current_project() ) {\n\t\t# in case the current project is not the same project of the bug we are viewing...\n\t\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t\t$g_project_override = $t_bug->project_id;\n\t\t$t_changed_project = true;\n\t} else {\n\t\t$t_changed_project = false;\n\t}\n\n\taccess_ensure_project_level( config_get( 'report_bug_threshold' ) );\n\n\t$f_build\t\t\t\t= $t_bug->build;\n\t$f_platform\t\t\t\t= $t_bug->platform;\n\t$f_os\t\t\t\t\t= $t_bug->os;\n\t$f_os_build\t\t\t\t= $t_bug->os_build;\n\t$f_product_version\t\t= $t_bug->version;\n\t$f_target_version\t\t= $t_bug->target_version;\n\t$f_profile_id\t\t\t= 0;\n\t$f_handler_id\t\t\t= $t_bug->handler_id;\n\n\t$f_category_id\t\t\t= $t_bug->category_id;\n\t$f_reproducibility\t\t= $t_bug->reproducibility;\n\t$f_eta\t\t\t\t\t= $t_bug->eta;\n\t$f_severity\t\t\t\t= $t_bug->severity;\n\t$f_priority\t\t\t\t= $t_bug->priority;\n\t$f_summary\t\t\t\t= $t_bug->summary;\n\t$f_description\t\t\t= $t_bug->description;\n\t$f_steps_to_reproduce\t= $t_bug->steps_to_reproduce;\n\t$f_additional_info\t\t= $t_bug->additional_information;\n\t$f_view_state\t\t\t= (int)$t_bug->view_state;\n\t$f_due_date\t\t\t\t= $t_bug->due_date;\n\n\t$t_project_id\t\t\t= $t_bug->project_id;\n} else {\n\t# Get Project Id and set it as current\n\t$t_current_project = helper_get_current_project();\n\t$t_project_id = gpc_get_int( 'project_id', $t_current_project );\n\n\t# If all projects, use default project if set\n\t$t_default_project = user_pref_get_pref( auth_get_current_user_id(), 'default_project' );\n\tif( ALL_PROJECTS == $t_project_id && ALL_PROJECTS != $t_default_project ) {\n\t\t$t_project_id = $t_default_project;\n\t}\n\n\t# Check for bug report threshold\n\tif( !access_has_project_level( config_get( 'report_bug_threshold' ) ) ) {\n\t\t# If can't report on current project, show project selector if there is any other allowed project\n\t\taccess_ensure_any_project_level( 'report_bug_threshold' );\n\t\tprint_header_redirect( 'login_select_proj_page.php?ref=bug_report_page.php' );\n\t}\n\n\tif( ( ALL_PROJECTS == $t_project_id || project_exists( $t_project_id ) )\n\t\t&& $t_project_id != $t_current_project\n\t\t&& project_enabled( $t_project_id ) ) {\n\t\thelper_set_current_project( $t_project_id );\n\t\t# Reloading the page is required so that the project browser\n\t\t# reflects the new current project\n\t\tprint_header_redirect( $_SERVER['REQUEST_URI'], true, false, true );\n\t}\n\n\t# New issues cannot be reported for the 'All Project' selection\n\tif( ALL_PROJECTS == $t_current_project ) {\n\t\tif( !print_header_redirect( 'login_select_proj_page.php?ref=bug_report_page.php' ) ) {\n\t\t\tdie;\n\t\t}\n\t}\n\n\taccess_ensure_project_level( config_get( 'report_bug_threshold' ) );\n\n\t$f_build\t\t\t\t= gpc_get_string( 'build', '' );\n\t$f_platform\t\t\t\t= gpc_get_string( 'platform', '' );\n\t$f_os\t\t\t\t\t= gpc_get_string( 'os', '' );\n\t$f_os_build\t\t\t\t= gpc_get_string( 'os_build', '' );\n\t$f_product_version\t\t= gpc_get_string( 'product_version', '' );\n\t$f_target_version\t\t= gpc_get_string( 'target_version', '' );\n\t$f_profile_id\t\t\t= gpc_get_int( 'profile_id', 0 );\n\t$f_handler_id\t\t\t= gpc_get_int( 'handler_id', 0 );\n\n\t$f_category_id\t\t\t= gpc_get_int( 'category_id', 0 );\n\t$f_reproducibility\t\t= gpc_get_int( 'reproducibility', (int)config_get( 'default_bug_reproducibility' ) );\n\t$f_eta\t\t\t\t\t= gpc_get_int( 'eta', (int)config_get( 'default_bug_eta' ) );\n\t$f_severity\t\t\t\t= gpc_get_int( 'severity', (int)config_get( 'default_bug_severity' ) );\n\t$f_priority\t\t\t\t= gpc_get_int( 'priority', (int)config_get( 'default_bug_priority' ) );\n\t$f_summary\t\t\t\t= gpc_get_string( 'summary', '' );\n\t$f_description\t\t\t= gpc_get_string( 'description', config_get( 'default_bug_description' ) );\n\t$f_steps_to_reproduce\t= gpc_get_string( 'steps_to_reproduce', config_get( 'default_bug_steps_to_reproduce' ) );\n\t$f_additional_info\t\t= gpc_get_string( 'additional_info', config_get( 'default_bug_additional_info' ) );\n\t$f_view_state\t\t\t= gpc_get_int( 'view_state', (int)config_get( 'default_bug_view_status' ) );\n\t$f_due_date\t\t\t\t= gpc_get_string( 'due_date', date_strtotime( config_get( 'due_date_default' ) ) );\n\n\tif( $f_due_date == '' ) {\n\t\t$f_due_date = date_get_null();\n\t}\n\n\t$t_changed_project\t\t= false;\n}\n\n$f_report_stay\t\t\t= gpc_get_bool( 'report_stay', false );\n$f_copy_notes_from_parent         = gpc_get_bool( 'copy_notes_from_parent', false );\n$f_copy_attachments_from_parent   = gpc_get_bool( 'copy_attachments_from_parent', false );\n\n$t_fields = config_get( 'bug_report_page_fields' );\n$t_fields = columns_filter_disabled( $t_fields );\n\n$t_show_category = in_array( 'category_id', $t_fields );\n$t_show_reproducibility = in_array( 'reproducibility', $t_fields );\n$t_show_eta = in_array( 'eta', $t_fields );\n$t_show_severity = in_array( 'severity', $t_fields );\n$t_show_priority = in_array( 'priority', $t_fields );\n$t_show_steps_to_reproduce = in_array( 'steps_to_reproduce', $t_fields );\n$t_show_handler = in_array( 'handler', $t_fields )\n\t&& access_has_project_level( config_get( 'update_bug_assign_threshold' ) );\n$t_show_monitors = in_array( 'monitors', $t_fields )\n\t&& access_has_project_level( config_get( 'monitor_add_others_bug_threshold' ) );\n$t_show_profiles = config_get( 'enable_profiles' );\n$t_show_platform = $t_show_profiles && in_array( 'platform', $t_fields );\n$t_show_os = $t_show_profiles && in_array( 'os', $t_fields );\n$t_show_os_build = $t_show_profiles && in_array( 'os_build', $t_fields );\n$t_show_resolution = in_array( 'resolution', $t_fields );\n$t_show_status = in_array( 'status', $t_fields );\n$t_show_tags =\n\tin_array( 'tags', $t_fields ) &&\n\taccess_has_project_level(\n\t\tconfig_get( 'tag_attach_threshold', /* default */ null, /* user */ null, $t_project_id ),\n\t\t$t_project_id );\n\n$t_show_versions = version_should_show_product_version( $t_project_id );\n$t_show_product_version = $t_show_versions && in_array( 'product_version', $t_fields );\n$t_show_product_build = $t_show_versions && in_array( 'product_build', $t_fields ) && config_get( 'enable_product_build' ) == ON;\n$t_show_target_version = $t_show_versions && in_array( 'target_version', $t_fields ) && access_has_project_level( config_get( 'roadmap_update_threshold' ) );\n$t_show_additional_info = in_array( 'additional_info', $t_fields );\n$t_show_due_date = in_array( 'due_date', $t_fields ) && access_has_project_level( config_get( 'due_date_update_threshold' ), helper_get_current_project(), auth_get_current_user_id() );\n$t_show_attachments = in_array( 'attachments', $t_fields ) && file_allow_bug_upload();\n$t_show_view_state = in_array( 'view_state', $t_fields ) && access_has_project_level( config_get( 'set_view_status_threshold' ) );\n\n# don't index bug report page\nhtml_robots_noindex();\n\nlayout_page_header( lang_get( 'report_bug_link' ) );\n\nlayout_page_begin( __FILE__ );\n\n$t_form_encoding = '';\nif( $t_show_attachments ) {\n\t$t_form_encoding = 'enctype=\"multipart/form-data\"';\n}\n?>\n<div class=\"col-md-12 col-xs-12\">\n<form id=\"report_bug_form\"\n\tmethod=\"post\" <?php echo $t_form_encoding; ?>\n\taction=\"bug_report.php\">\n<?php echo form_security_field( 'bug_report' ) ?>\n<input type=\"hidden\" name=\"m_id\" value=\"<?php echo $f_master_bug_id ?>\" />\n<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $t_project_id ?>\" />\n<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-edit', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'enter_report_details_title' ) ?>\n\t\t</h4>\n\t</div>\n<div class=\"widget-body dz-clickable\">\n<div class=\"widget-main no-padding\">\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-condensed\">\n<?php\n\tevent_signal( 'EVENT_REPORT_BUG_FORM_TOP', array( $t_project_id ) );\n\n\tif( $t_show_category ) {\n\t\t$t_allow_no_category = config_get( 'allow_no_category' );\n?>\n\t<tr>\n\t\t<th class=\"category width-30\">\n\t\t\t<?php echo $t_allow_no_category ? '' : '<span class=\"required\">*</span> '; ?>\n\t\t\t<label for=\"category_id\">\n\t\t\t\t<?php print_documentation_link( 'category' ); ?>\n\t\t\t</label>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php if( $t_changed_project ) {\n\t\t\t\t/** @noinspection PhpUndefinedVariableInspection */\n\t\t\t\techo '[' . project_get_field( $t_bug->project_id, 'name' ) . '] ';\n\t\t\t} ?>\n\t\t\t<select id=\"category_id\" name=\"category_id\" class=\"autofocus input-sm\" <?php\n\t\t\t\techo helper_get_tab_index();\n\t\t\t\techo $t_allow_no_category ? '' : ' required';\n\t\t\t?>>\n\t\t\t\t<?php\n\t\t\t\t\tprint_category_option_list( $f_category_id, null, true );\n\t\t\t\t?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n\n\tif( $t_show_reproducibility ) {\n?>\n\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"reproducibility\"><?php print_documentation_link( 'reproducibility' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select <?php echo helper_get_tab_index() ?> id=\"reproducibility\" name=\"reproducibility\" class=\"input-sm\">\n\t\t\t\t<?php print_enum_string_option_list( 'reproducibility', $f_reproducibility ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n\n\tif( $t_show_eta ) {\n?>\n\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"eta\"><?php print_documentation_link( 'eta' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select <?php echo helper_get_tab_index() ?> id=\"eta\" name=\"eta\" class=\"input-sm\">\n\t\t\t\t<?php print_enum_string_option_list( 'eta', $f_eta ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n\n\tif( $t_show_severity ) {\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"severity\"><?php print_documentation_link( 'severity' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select <?php echo helper_get_tab_index() ?> id=\"severity\" name=\"severity\" class=\"input-sm\">\n\t\t\t\t<?php print_enum_string_option_list( 'severity', $f_severity ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n\n\tif( $t_show_priority ) {\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"priority\"><?php print_documentation_link( 'priority' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select <?php echo helper_get_tab_index() ?> id=\"priority\" name=\"priority\" class=\"input-sm\">\n\t\t\t\t<?php print_enum_string_option_list( 'priority', $f_priority ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n\n\tif( $t_show_due_date ) {\n\t\t$t_date_to_display = '';\n\n\t\tif( !date_is_null( $f_due_date ) ) {\n\t\t\t$t_date_to_display = date( config_get( 'normal_date_format' ), $f_due_date );\n\t\t}\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"due_date\"><?php print_documentation_link( 'due_date' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php echo '<input ' . helper_get_tab_index() . ' type=\"text\" id=\"due_date\" name=\"due_date\" class=\"datetimepicker input-sm\" ' .\n\t\t\t\t'data-picker-locale=\"' . lang_get_current_datetime_locale() .\n\t\t\t\t'\" data-picker-format=\"' . config_get( 'datetime_picker_format' ) . '\" ' .\n\t\t\t\t'size=\"20\" maxlength=\"16\" value=\"' . $t_date_to_display . '\" />' ?>\n\t\t\t<?php print_icon( 'fa-calendar', 'fa-xlg datetimepicker' ); ?>\n\t\t</td>\n\t</tr>\n<?php } ?>\n<?php if( $t_show_platform || $t_show_os || $t_show_os_build ) { ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"profile_id\"><?php echo lang_get( 'select_profile' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php if( count( profile_get_all_for_user( auth_get_current_user_id() ) ) > 0 ) { ?>\n\t\t\t\t<select <?php echo helper_get_tab_index() ?> id=\"profile_id\" name=\"profile_id\" class=\"input-sm\">\n\t\t\t\t\t<?php print_profile_option_list( auth_get_current_user_id(), $f_profile_id ) ?>\n\t\t\t\t</select>\n\t\t\t<?php } ?>\n\t\t\t<?php collapse_open( 'profile' ); ?>\n\t\t\t<?php echo lang_get( 'or_fill_in' ); collapse_icon( 'profile' ); ?>\n\t\t\t<table class=\"table-bordered table-condensed\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th class=\"category width-30\">\n\t\t\t\t\t\t<label for=\"platform\"><?php echo lang_get( 'platform' ) ?></label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<?php if( config_get( 'allow_freetext_in_profile_fields' ) == OFF ) { ?>\n\t\t\t\t\t\t<select id=\"platform\" name=\"platform\" class=\"input-sm\">\n\t\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t\t<?php print_platform_option_list( $f_platform ); ?>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\techo '<input type=\"text\" id=\"platform\" name=\"platform\" class=\"typeahead input-sm\" autocomplete = \"off\" size=\"32\" maxlength=\"32\" tabindex=\"' . helper_get_tab_index_value() . '\" value=\"' . string_attribute( $f_platform ) . '\" />';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t<label for=\"os\"><?php echo lang_get( 'os' ) ?></label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<?php if( config_get( 'allow_freetext_in_profile_fields' ) == OFF ) { ?>\n\t\t\t\t\t\t<select id=\"os\" name=\"os\" class=\"input-sm\">\n\t\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t\t<?php print_os_option_list( $f_os ); ?>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\techo '<input type=\"text\" id=\"os\" name=\"os\" class=\"typeahead input-sm\" autocomplete = \"off\" size=\"32\" maxlength=\"32\" tabindex=\"' . helper_get_tab_index_value() . '\" value=\"' . string_attribute( $f_os ) . '\" />';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t<label for=\"os_build\"><?php echo lang_get( 'os_build' ) ?></label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tif( config_get( 'allow_freetext_in_profile_fields' ) == OFF ) {\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<select id=\"os_build\" name=\"os_build\" class=\"input-sm\">\n\t\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t\t\t<?php print_os_build_option_list( $f_os_build ); ?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\techo '<input type=\"text\" id=\"os_build\" name=\"os_build\" class=\"typeahead input-sm\" autocomplete = \"off\" size=\"16\" maxlength=\"16\" tabindex=\"' . helper_get_tab_index_value() . '\" value=\"' . string_attribute( $f_os_build ) . '\" />';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<?php collapse_closed( 'profile' ); ?>\n\t\t\t<?php echo lang_get( 'or_fill_in' ); collapse_icon( 'profile' ); ?>\n\t\t\t<?php collapse_end( 'profile' ); ?>\n\t\t</td>\n\t</tr>\n<?php } ?>\n<?php\n\tif( $t_show_product_version ) {\n\t\t$t_product_version_released_mask = VERSION_RELEASED;\n\n\t\tif( access_has_project_level( config_get( 'report_issues_for_unreleased_versions_threshold' ) ) ) {\n\t\t\t$t_product_version_released_mask = VERSION_ALL;\n\t\t}\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"product_version\"><?php echo lang_get( 'product_version' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select <?php echo helper_get_tab_index() ?> id=\"product_version\" name=\"product_version\" class=\"input-sm\">\n\t\t\t\t<?php print_version_option_list( $f_product_version, $t_project_id, $t_product_version_released_mask ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n?>\n<?php if( $t_show_product_build ) { ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"build\"><?php echo lang_get( 'product_build' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"text\" id=\"build\" name=\"build\" size=\"32\" maxlength=\"32\" value=\"<?php echo string_attribute( $f_build ) ?>\" />\n\t\t</td>\n\t</tr>\n<?php } ?>\n\n<?php if( $t_show_handler ) { ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"handler_id\"><?php echo lang_get( 'assign_to' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select <?php echo helper_get_tab_index() ?> id=\"handler_id\" name=\"handler_id\" class=\"input-sm\">\n\t\t\t\t<option value=\"0\" selected=\"selected\"></option>\n\t\t\t\t<?php print_assign_to_option_list( $f_handler_id ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php } ?>\n\n<?php if( $t_show_monitors ) { ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"monitors\"><?php echo lang_get( 'monitored_by' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select <?php echo helper_get_tab_index() ?> id=\"monitors\" name=\"monitors[]\" class=\"input-sm\" multiple>\n\t\t\t\t<?php print_user_option_list( NO_USER, $t_project_id, config_get( 'monitor_bug_threshold' ) ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php } ?>\n\n<?php if( $t_show_status ) { ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"status\"><?php echo lang_get( 'status' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select id=\"status\" <?php echo helper_get_tab_index() ?> name=\"status\" class=\"input-sm\">\n\t\t\t<?php\n\t\t\t$t_resolution_options = get_status_option_list(\n\t\t\t\taccess_get_project_level( $t_project_id ),\n\t\t\t\tconfig_get( 'bug_submit_status' ),\n\t\t\t\ttrue,\n\t\t\t\tON == config_get( 'allow_reporter_close' ),\n\t\t\t\t$t_project_id );\n\t\t\tforeach ( $t_resolution_options as $t_key => $t_value ) {\n\t\t\t?>\n\t\t\t\t<option value=\"<?php echo $t_key ?>\" <?php check_selected( $t_key, config_get( 'bug_submit_status' ) ); ?> >\n\t\t\t\t\t<?php echo $t_value ?>\n\t\t\t\t</option>\n\t\t\t<?php } ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php } ?>\n\n<?php if( $t_show_resolution ) { ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"resolution\"><?php echo lang_get( 'resolution' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select id=\"resolution\" <?php echo helper_get_tab_index() ?> name=\"resolution\" class=\"input-sm\">\n\t\t\t\t<?php\n\t\t\t\tprint_enum_string_option_list( 'resolution', config_get( 'default_bug_resolution' ) );\n\t\t\t\t?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php } ?>\n\n<?php # Target Version (if permissions allow)\n\tif( $t_show_target_version ) { ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"target_version\"><?php echo lang_get( 'target_version' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<select <?php echo helper_get_tab_index() ?> id=\"target_version\" name=\"target_version\" class=\"input-sm\">\n\t\t\t\t<?php print_version_option_list( $f_target_version, null, VERSION_FUTURE ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?php } ?>\n<?php event_signal( 'EVENT_REPORT_BUG_FORM', array( $t_project_id ) ) ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<span class=\"required\">*</span>\n\t\t\t<label for=\"summary\"><?php print_documentation_link( 'summary' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"text\" id=\"summary\" name=\"summary\" size=\"105\" maxlength=\"128\" value=\"<?php echo string_attribute( $f_summary ) ?>\" required />\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<span class=\"required\">*</span>\n\t\t\t<label for=\"description\"><?php print_documentation_link( 'description' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t<textarea class=\"form-control\" <?php echo helper_get_tab_index() ?> id=\"description\" name=\"description\" cols=\"80\" rows=\"10\" required>\n<?php echo string_textarea( $f_description ) ?>\n</textarea>\n\t\t</td>\n\t</tr>\n\n<?php if( $t_show_steps_to_reproduce ) { ?>\n\t\t<tr>\n\t\t\t<th class=\"category\">\n\t\t\t\t<label for=\"steps_to_reproduce\"><?php print_documentation_link( 'steps_to_reproduce' ) ?></label>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t<textarea class=\"form-control\" <?php echo helper_get_tab_index() ?> id=\"steps_to_reproduce\" name=\"steps_to_reproduce\" cols=\"80\" rows=\"10\">\n<?php echo string_textarea( $f_steps_to_reproduce ) ?>\n</textarea>\n\t\t\t</td>\n\t\t</tr>\n<?php } ?>\n\n<?php if( $t_show_additional_info ) { ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"additional_info\"><?php print_documentation_link( 'additional_information' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t<textarea class=\"form-control\" <?php echo helper_get_tab_index() ?> id=\"additional_info\" name=\"additional_info\" cols=\"80\" rows=\"10\">\n<?php echo string_textarea( $f_additional_info ) ?>\n</textarea>\n\t\t</td>\n\t</tr>\n<?php } ?>\n<?php if( $t_show_tags ) { ?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"attach_tag\"><?php echo lang_get( 'tag_attach_long' ) ?></label>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php\n\t\t\t\tif( $f_master_bug_id > 0 ) {\n\t\t\t\t\t# pre-fill tag string when cloning from master bug\n\t\t\t\t\t$t_tags = [];\n\t\t\t\t\tforeach( tag_bug_get_attached( $f_master_bug_id ) as $t_tag ) {\n\t\t\t\t\t\t$t_tags[] = $t_tag[\"name\"];\n\t\t\t\t\t}\n\t\t\t\t\t$t_tag_string = implode(\n\t\t\t\t\t\tconfig_get( 'tag_separator' ), $t_tags\n\t\t\t\t\t);\n\t\t\t\t\tprint_tag_input( 0, $t_tag_string );\n\t\t\t\t} else {\n\t\t\t\t\t# otherwise show just the default empty string\n\t\t\t\t\tprint_tag_input();\n\t\t\t\t}\n\t\t\t?>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n\n\t$t_custom_fields_found = false;\n\t$t_related_custom_field_ids = custom_field_get_linked_ids( $t_project_id );\n\n\tforeach( $t_related_custom_field_ids as $t_id ) {\n\t\t$t_def = custom_field_get_definition( $t_id );\n\t\tif( ( $t_def['display_report'] || $t_def['require_report']) && custom_field_has_write_access_to_project( $t_id, $t_project_id ) ) {\n\t\t\t$t_custom_fields_found = true;\n\n\t\t\tif( $t_def['type'] != CUSTOM_FIELD_TYPE_RADIO && $t_def['type'] != CUSTOM_FIELD_TYPE_CHECKBOX ) {\n\t\t\t\t$t_label_for = 'for=\"custom_field_' . string_attribute( $t_def['id'] ) . '\" ';\n\t\t\t} else {\n\t\t\t\t$t_label_for = '';\n\t\t\t}\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php if( $t_def['require_report'] ) {?><span class=\"required\">*</span><?php } ?>\n\t\t\t<?php if( $t_def['type'] != CUSTOM_FIELD_TYPE_RADIO && $t_def['type'] != CUSTOM_FIELD_TYPE_CHECKBOX ) { ?>\n\t\t\t\t<label for=\"custom_field_<?php echo string_attribute( $t_def['id'] ) ?>\">\n\t\t\t\t\t<?php echo string_attribute( lang_get_defaulted( $t_def['name'] ) ) ?>\n\t\t\t\t</label>\n\t\t\t<?php } else { echo string_attribute( lang_get_defaulted( $t_def['name'] ) ); } ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php print_custom_field_input( $t_def, ( $f_master_bug_id === 0 ) ? null : $f_master_bug_id, $t_def['require_report'] ) ?>\n\t\t</td>\n\t</tr>\n<?php\n\t\t}\n\t} # foreach( $t_related_custom_field_ids as $t_id )\n?>\n<?php\n\t# File Upload (if enabled)\n\tif( $t_show_attachments ) {\n\t\t$t_max_file_size = file_get_max_file_size();\n\t\t$t_file_upload_max_num = max( 1, config_get( 'file_upload_max_num' ) );\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<label for=\"ufile[]\"><?php echo lang_get( $t_file_upload_max_num == 1 ? 'upload_file' : 'upload_files' ) ?></label>\n\t\t\t<br />\n\t\t\t<?php print_max_filesize( $t_max_file_size ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php print_dropzone_template() ?>\n\t\t\t<input type=\"hidden\" name=\"max_file_size\" value=\"<?php echo $t_max_file_size ?>\" />\n\t\t\t<div class=\"dropzone center\" <?php print_dropzone_form_data() ?>>\n\t\t\t\t<?php print_icon( 'fa-cloud-upload', 'upload-icon ace-icon blue fa-3x' ); ?>\n\t\t\t\t<br>\n\t\t\t\t<span class=\"bigger-150 grey\"><?php echo lang_get( 'dropzone_default_message' ) ?></span>\n\t\t\t\t<div id=\"dropzone-previews-box\" class=\"dropzone-previews dz-max-files-reached\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"fallback\">\n\t\t\t\t<div class=\"dz-message\" data-dz-message></div>\n\t\t\t\t<input <?php echo helper_get_tab_index() ?> id=\"ufile[]\" name=\"ufile[]\" type=\"file\" size=\"60\" />\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n<?php\n\t}\n\n\tif( $t_show_view_state ) {\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"radio\" class=\"ace\" name=\"view_state\" value=\"<?php echo VS_PUBLIC ?>\" <?php check_checked( $f_view_state, VS_PUBLIC ) ?> />\n\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'public' ) ?></span>\n\t\t\t</label>\n\t\t\t&#160;&#160;&#160;&#160;\n\t\t\t<label>\n\t\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"radio\" class=\"ace\" name=\"view_state\" value=\"<?php echo VS_PRIVATE ?>\" <?php check_checked( $f_view_state, VS_PRIVATE ) ?> />\n\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'private' ) ?></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n\n\t# Relationship (in case of cloned bug creation...)\n\tif( $f_master_bug_id > 0 ) {\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php echo lang_get( 'relationship_with_parent' ) ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php print_relationship_list_box( config_get( 'default_bug_relationship_clone' ), \"rel_type\", false, true ) ?>\n\t\t\t<?php echo '<strong>' . lang_get( 'bug' ) . ' ' . bug_format_id( $f_master_bug_id ) . '</strong>' ?>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'copy_from_parent' ) ?>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"checkbox\" class=\"ace\" id=\"copy_notes_from_parent\" name=\"copy_notes_from_parent\" <?php check_checked( $f_copy_notes_from_parent ) ?> />\n\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'copy_notes_from_parent' ) ?></span>\n\t\t\t</label>\n\t\t\t&#160;&#160;&#160;&#160;\n\t\t\t<label>\n\t\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"checkbox\" class=\"ace\" id=\"copy_attachments_from_parent\" name=\"copy_attachments_from_parent\" <?php check_checked( $f_copy_attachments_from_parent ) ?> />\n\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'copy_attachments_from_parent' ) ?></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n?>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php print_documentation_link( 'report_stay' ) ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"checkbox\" class=\"ace\" id=\"report_stay\" name=\"report_stay\" <?php check_checked( $f_report_stay ) ?> />\n\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'check_report_more_bugs' ) ?></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n</table>\n</div>\n</div>\n<div class=\"widget-toolbox padding-8 clearfix\">\n\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ) ?></span>\n\t<input <?php echo helper_get_tab_index() ?> type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'submit_report_button' ) ?>\" />\n</div>\n</div>\n</div>\n</form>\n</div>\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "bug_revision_drop.php",
          "type": "blob",
          "size": 1.830078125,
          "content": "<?php\n# Mantis - a php based bugtracking system\n\n# Mantis is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# Mantis is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Mantis.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Remove Bug Revision\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team   - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses bug_revision_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_revision_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'bug_revision_drop' );\n\n$f_revision_id = gpc_get_int( 'id' );\n$t_revision = bug_revision_get( $f_revision_id );\n\naccess_ensure_bug_level( config_get( 'bug_revision_drop_threshold' ), $t_revision['bug_id'] );\nhelper_ensure_confirmed( lang_get( 'confirm_revision_drop' ), lang_get( 'revision_drop' ) );\n\nbug_revision_drop( $f_revision_id );\nform_security_purge( 'bug_revision_drop' );\n\nprint_header_redirect_view( $t_revision['bug_id'] );\n\n"
        },
        {
          "name": "bug_revision_view_page.php",
          "type": "blob",
          "size": 6.44921875,
          "content": "<?php\n# Mantis - a php based bugtracking system\n\n# Mantis is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# Mantis is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Mantis.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * View Bug Revisions\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team   - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses bug_api.php\n * @uses bugnote_api.php\n * @uses bug_revision_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'bug_revision_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\n\n$f_bug_id = gpc_get_int( 'bug_id', 0 );\n$f_bugnote_id = gpc_get_int( 'bugnote_id', 0 );\n$f_rev_id = gpc_get_int( 'rev_id', 0 );\n\n$t_title = '';\n\nif( $f_bug_id ) {\n\t$t_bug_id = (int)$f_bug_id;\n\t$t_bugnote_id = false;\n\t$t_bug_revisions = bug_revision_list( $t_bug_id );\n\n\t$t_title = lang_get( 'issue_id' ) . $t_bug_id;\n\n} elseif( $f_bugnote_id ) {\n\t$t_bugnote_id = (int)$f_bugnote_id;\n\t$t_bug_id = bugnote_get_field( $t_bugnote_id, 'bug_id' );\n\n\t$t_bug_revisions = bug_revision_list( $t_bug_id, REV_ANY, $f_bugnote_id );\n\n\t$t_title = lang_get( 'bugnote' ) . ' ' . $f_bugnote_id;\n\n} elseif( $f_rev_id ) {\n\t$t_bug_revisions = bug_revision_like( $f_rev_id );\n\n\tif( count( $t_bug_revisions ) < 1 ) {\n\t\ttrigger_error( ERROR_GENERIC, ERROR );\n\t}\n\n\t$t_rev = $t_bug_revisions[$f_rev_id];\n\t$t_bug_id = $t_rev['bug_id'];\n\t$t_bugnote_id = $t_rev['bugnote_id'];\n\n\t$t_title = lang_get( 'issue_id' ) . $t_bug_id;\n\n} else {\n\ttrigger_error( ERROR_GENERIC, ERROR );\n\texit;\n}\n\n# Make sure user is allowed to view revisions\n# If processing a bugnote, we don't need to check bug-level access as it is\n# already done at the lower level, and in fact we must not do it as a user may\n# be allowed to view their own bugnote's history, but not the parent issue's.\nif( $t_bugnote_id ) {\n\tif( !access_can_view_bugnote_revisions( $t_bugnote_id ) ) {\n\t\taccess_denied();\n\t}\n} elseif( $t_bug_id && !access_can_view_bug_revisions( $t_bug_id ) ) {\n\taccess_denied();\n}\n\n\n/**\n * Show Bug revision\n *\n * @param array $p_revision Bug Revision Data.\n */\nfunction show_revision( array $p_revision ) {\n\tstatic $s_view_bug_threshold = null;\n\tstatic $s_can_drop = null;\n\tstatic $s_date_format = null;\n\n\t/**\n\t * @var int    $v_id\n\t * @var int    $v_bug_id\n\t * @var int    $v_bugnote_id\n\t * @var int    $v_type\n\t * @var int    $v_user_id\n\t * @var int    $v_timestamp\n\t * @var string $v_value\n\t */\n\textract( $p_revision, EXTR_PREFIX_ALL, 'v' );\n\n\tif( is_null( $s_can_drop ) ) {\n\t\t$t_project_id = bug_get_field( $v_bug_id, 'project_id' );\n\n\t\t$t_bug_revision_drop_threshold = config_get( 'bug_revision_drop_threshold', null, null, $t_project_id );\n\t\t$s_view_bug_threshold = config_get( 'view_bug_threshold', null, null, $t_project_id );\n\t\t$s_can_drop = access_has_bug_level( $t_bug_revision_drop_threshold, $v_bug_id );\n\t\t$s_date_format = config_get( 'normal_date_format', null, null, $t_project_id );\n\t}\n\n\tswitch( $v_type ) {\n\t\tcase REV_DESCRIPTION:\n\t\t\t$t_label = lang_get( 'description' );\n\t\t\tbreak;\n\t\tcase REV_STEPS_TO_REPRODUCE:\n\t\t\t$t_label = lang_get( 'steps_to_reproduce' );\n\t\t\tbreak;\n\t\tcase REV_ADDITIONAL_INFO:\n\t\t\t$t_label = lang_get( 'additional_information' );\n\t\t\tbreak;\n\t\tcase REV_BUGNOTE:\n\t\t\tif( !access_has_bugnote_level( $s_view_bug_threshold, $v_bugnote_id ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$t_label = lang_get( 'bugnote' );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t$t_label = '';\n\t}\n\n\t$t_by_string = sprintf( lang_get( 'revision_by' ),\n\t\tstring_display_line( date( $s_date_format, $v_timestamp ) ),\n\t\tprepare_user_name( $v_user_id )\n\t);\n\n?>\n\t<tr class=\"spacer\">\n\t\t<td><a id=\"revision-<?php echo $v_id ?>\"></a></td>\n\t</tr>\n\n\t<tr>\n\t\t<th class=\"category\"><?php echo lang_get( 'revision' ) ?></th>\n\t\t<td>\n<?php\n\techo $t_by_string;\n\n\tif( $s_can_drop ) {\n\t\t$t_drop_token = form_security_param( 'bug_revision_drop' );\n\t\tprint_link_button(\n\t\t\t'bug_revision_drop.php?id=' . $v_id . $t_drop_token,\n\t\t\tlang_get( 'revision_drop' ),\n\t\t\t'btn-sm pull-right'\n\t\t);\n\t}\n?>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th class=\"category\"><?php echo $t_label ?></th>\n\t\t<td>\n\t\t\t<?php echo string_display_links( $v_value ) ?>\n\t\t</td>\n\t</tr>\n<?php\n} # End show_revision()\n\nlayout_page_header( bug_format_summary( $t_bug_id, SUMMARY_CAPTION ) );\nlayout_page_begin();\n\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-history', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'view_revisions' ), ': ', $t_title ?>\n\t\t\t</h4>\n\t\t</div>\n\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-toolbox\">\n\t\t\t\t<div class=\"btn-toolbar\">\n\t\t\t\t\t<div class=\"btn-group pull-right\">\n<?php\nif( !$f_bug_id && !$f_bugnote_id ) {\n\tprint_small_button( '?bug_id=' . $t_bug_id, lang_get( 'all_revisions' ) );\n}\nprint_small_button( 'view.php?id=' . $t_bug_id, lang_get( 'back_to_issue' ) );\n?>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th class=\"category width-20\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'summary' ) ?>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<?php echo bug_format_summary( $t_bug_id, SUMMARY_FIELD ) ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n<?php\nforeach( $t_bug_revisions as $t_rev ) {\n\tshow_revision( $t_rev );\n}\n?>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "bug_set_sponsorship.php",
          "type": "blob",
          "size": 3.30078125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Set sponsorship on a bug\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses sponsorship_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'sponsorship_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'bug_set_sponsorship' );\n\n# anonymous users are not allowed to sponsor issues\nif( current_user_is_anonymous() ) {\n\taccess_denied();\n}\n\n$f_bug_id\t= gpc_get_int( 'bug_id' );\n$f_amount\t= gpc_get_int( 'amount' );\n\n$t_bug = bug_get( $f_bug_id, true );\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\nif( config_get( 'enable_sponsorship' ) == OFF ) {\n\ttrigger_error( ERROR_SPONSORSHIP_NOT_ENABLED, ERROR );\n}\n\naccess_ensure_bug_level( config_get( 'sponsor_threshold' ), $f_bug_id );\n\nhelper_ensure_confirmed(\n\tsprintf( lang_get( 'confirm_sponsorship' ), $f_bug_id, sponsorship_format_amount( $f_amount ) ),\n\tlang_get( 'sponsor_issue' ) );\n\nif( $f_amount == 0 ) {\n\t# if amount == 0, delete sponsorship by current user (if any)\n\t$t_sponsorship_id = sponsorship_get_id( $f_bug_id );\n\tif( $t_sponsorship_id !== false ) {\n\t\tsponsorship_delete( $t_sponsorship_id );\n\t}\n} else {\n\t# add sponsorship\n\t$t_user = auth_get_current_user_id();\n\tif( is_blank( user_get_email( $t_user ) ) ) {\n\t\ttrigger_error( ERROR_SPONSORSHIP_SPONSOR_NO_EMAIL, ERROR );\n\t} else {\n\t\t$t_sponsorship = new SponsorshipData;\n\t\t$t_sponsorship->bug_id = $f_bug_id;\n\t\t$t_sponsorship->user_id = $t_user;\n\t\t$t_sponsorship->amount = $f_amount;\n\n\t\tsponsorship_set( $t_sponsorship );\n\t}\n}\n\nform_security_purge( 'bug_set_sponsorship' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "bug_sponsorship_list_view_inc.php",
          "type": "blob",
          "size": 5.3681640625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This include file prints out the list of users sponsoring the current\n * bug.\t$f_bug_id must be set to the bug id\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses access_api.php\n * @uses bug_api.php\n * @uses collapse_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses sponsorship_api.php\n * @uses utility_api.php\n */\n\nif( !defined( 'BUG_SPONSORSHIP_LIST_VIEW_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'collapse_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'sponsorship_api.php' );\nrequire_api( 'utility_api.php' );\n\n#\n# Determine whether the sponsorship section should be shown.\n#\n\nif( ( config_get( 'enable_sponsorship' ) == ON ) && ( access_has_bug_level( config_get( 'view_sponsorship_total_threshold' ), $f_bug_id ) ) ) {\n\t$t_sponsorship_ids = sponsorship_get_all_ids( $f_bug_id );\n\n\t$t_sponsorships_exist = count( $t_sponsorship_ids ) > 0;\n\t$t_can_sponsor = !bug_is_readonly( $f_bug_id ) && !current_user_is_anonymous();\n\n\t$t_show_sponsorships = $t_sponsorships_exist || $t_can_sponsor;\n} else {\n\t$t_show_sponsorships = false;\n}\n\n#\n# Sponsorship Box\n#\n\nif( $t_show_sponsorships ) {\n?>\n\n<a id=\"sponsorships\"></a> <br />\n\n<?php\n\tcollapse_open( 'sponsorship' );\n?>\n\n<table class=\"width100\" cellspacing=\"1\">\n\t<tr>\n\t\t<td width=\"50\" rowspan=\"3\">\n\t\t\t<?php print_icon( 'fa-usd', '', lang_get( 'sponsor_verb' ) ); ?>\n\t\t</td>\n\t\t<td class=\"form-title\" colspan=\"2\"><?php\n\t\t\tcollapse_icon( 'sponsorship' );\n\t\t\techo lang_get( 'users_sponsoring_bug' );\n\n\t\t\t$t_details_url = lang_get( 'sponsorship_process_url' );\n\t\t\tif( !is_blank( $t_details_url ) ) {\n\t\t\t\techo '&#160;[<a href=\"' . $t_details_url . '\">'\n\t\t\t\t\t. lang_get( 'sponsorship_more_info' ) . '</a>]';\n\t\t\t}\n\t\t?>\n\t\t</td>\n\t</tr>\n\n<?php\n\tif( $t_can_sponsor ) {\n?>\n\t<tr>\n\t\t<th class=\"category\" width=\"15%\"><?php echo lang_get( 'sponsor_issue' ) ?></th>\n\t\t<td>\n\t\t\t<form method=\"post\" action=\"bug_set_sponsorship.php\">\n\t\t\t\t<?php echo form_security_field( 'bug_set_sponsorship' ) ?>\n\t\t\t\t<?php echo sponsorship_get_currency() ?>\n\t\t\t\t<input type=\"hidden\" name=\"bug_id\" value=\"<?php echo $f_bug_id ?>\" size=\"4\" />\n\t\t\t\t<input type=\"text\" name=\"amount\" class=\"input-sm\" value=\"<?php echo config_get( 'minimum_sponsorship_amount' )  ?>\" size=\"4\" />\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" name=\"sponsor\" value=\"<?php echo lang_get( 'sponsor_verb' ) ?>\" />\n\t\t\t</form>\n\t\t</td>\n\t</tr>\n<?php\n\t}\n\n\t$t_total_sponsorship = bug_get_field( $f_bug_id, 'sponsorship_total' );\n\tif( $t_total_sponsorship > 0 ) {\n?>\n\t<tr>\n\t\t<th class=\"category\" width=\"15%\"><?php echo lang_get( 'sponsors_list' ) ?></th>\n\t\t<td>\n\t\t<?php\n\t\t\techo sprintf( lang_get( 'total_sponsorship_amount' ),\n\t\t\t\tsponsorship_format_amount( $t_total_sponsorship ) );\n\n\t\t\tif( access_has_bug_level( config_get( 'view_sponsorship_details_threshold' ), $f_bug_id ) ) {\n\t\t\t\techo '<br /><br />';\n\t\t\t\t$i = 0;\n\t\t\t\tforeach ( $t_sponsorship_ids as $t_id ) {\n\t\t\t\t\t$t_sponsorship = sponsorship_get( $t_id );\n\t\t\t\t\t$t_date_added = date( config_get( 'normal_date_format' ), $t_sponsorship->date_submitted );\n\n\t\t\t\t\techo ($i > 0) ? '<br />' : '';\n\t\t\t\t\t$i++;\n\n\t\t\t\t\techo sprintf( lang_get( 'label' ), $t_date_added ) . lang_get( 'word_separator' );\n\t\t\t\t\tprint_user( $t_sponsorship->user_id );\n\t\t\t\t\techo ' (' . sponsorship_format_amount( $t_sponsorship->amount ) . ')';\n\t\t\t\t\tif( access_has_bug_level( config_get( 'handle_sponsored_bugs_threshold' ), $f_bug_id ) ) {\n\t\t\t\t\t\techo ' ' . get_enum_element( 'sponsorship', $t_sponsorship->paid );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t?>\n\t\t</td>\n\t\t</tr>\n<?php\n\t\t}\n?>\n</table>\n\n<?php\n\tcollapse_closed( 'sponsorship' );\n?>\n\n<table class=\"width100\" cellspacing=\"1\">\n\t<tr>\n\t\t<td class=\"form-title\"><?php\n\t\t\tcollapse_icon( 'sponsorship' );\n\t\t\techo lang_get( 'users_sponsoring_bug' );\n\n\t\t\t$t_details_url = lang_get( 'sponsorship_process_url' );\n\t\t\tif( !is_blank( $t_details_url ) ) {\n\t\t\t\techo '&#160;[<a href=\"' . $t_details_url . '\">'\n\t\t\t\t\t. lang_get( 'sponsorship_more_info' ) . '</a>]';\n\t\t\t}\n\n\t\t\tif( $t_total_sponsorship > 0 ) {\n\t\t\t\techo ' <span style=\"font-weight: normal;\">(';\n\t\t\t\techo sprintf( lang_get( 'total_sponsorship_amount' ),\n\t\t\t\tsponsorship_format_amount( $t_total_sponsorship ) );\n\t\t\t\techo ')</span>';\n\t\t\t}\n?>\n\t\t</td>\n\t</tr>\n</table>\n\n<?php\n\tcollapse_end( 'sponsorship' );\n} # If sponsorship enabled\n"
        },
        {
          "name": "bug_stick.php",
          "type": "blob",
          "size": 2.005859375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This file sticks or unsticks a bug to the top of the view page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'bug_stick' );\n\n$f_bug_id = gpc_get_int( 'bug_id' );\n$t_bug = bug_get( $f_bug_id, true );\n$f_action = gpc_get_string( 'action' );\n\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\naccess_ensure_bug_level( config_get( 'set_bug_sticky_threshold' ), $f_bug_id );\n\nbug_set_field( $f_bug_id, 'sticky', 'stick' == $f_action );\n\nform_security_purge( 'bug_stick' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "bug_update.php",
          "type": "blob",
          "size": 20.41796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update bug data then redirect to the appropriate viewing page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bugnote_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses email_api.php\n * @uses error_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses history_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses relationship_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'email_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'history_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'relationship_api.php' );\n\n/**\n * Retrieves a version from form data and ensures it is valid.\n *\n * @param BugData $p_bug  Reference issue\n * @param string $p_field Field name (used for GPC var and BugData property)\n *\n * @return string|null\n */\nfunction get_valid_version( BugData $p_bug, $p_field ) {\n\t$t_reference_version = $p_bug->$p_field;\n\t$t_version = gpc_get_string( $p_field, $t_reference_version );\n\tif( !is_blank( $t_version )\n\t\t&& $t_version != $t_reference_version\n\t\t&& version_get_id( $t_version, $p_bug->project_id ) === false\n\t) {\n\t\terror_parameters( $t_version );\n\t\ttrigger_error( ERROR_VERSION_NOT_FOUND, ERROR );\n\t}\n\treturn $t_version;\n}\n\nform_security_validate( 'bug_update' );\n\n$f_bug_id = gpc_get_int( 'bug_id' );\n$t_existing_bug = bug_get( $f_bug_id, true );\n$f_update_type = gpc_get_string( 'action_type', BUG_UPDATE_TYPE_NORMAL );\n\n$t_current_user_id = auth_get_current_user_id();\n\nif( helper_get_current_project() != $t_existing_bug->project_id ) {\n\t$g_project_override = $t_existing_bug->project_id;\n}\n\n$t_updated_bug = clone $t_existing_bug;\n\n$t_updated_bug->additional_information = gpc_get_string( 'additional_information', $t_existing_bug->additional_information );\n$t_updated_bug->build = gpc_get_string( 'build', $t_existing_bug->build );\n$t_updated_bug->category_id = gpc_get_int( 'category_id', $t_existing_bug->category_id );\n$t_updated_bug->description = gpc_get_string( 'description', $t_existing_bug->description );\n$t_due_date = gpc_get_string( 'due_date', null );\nif( $t_due_date !== null ) {\n\t$t_updated_bug->due_date = date_strtotime( $t_due_date );\n}\n$t_updated_bug->duplicate_id = gpc_get_int( 'duplicate_id', 0 );\n$t_updated_bug->eta = gpc_get_int( 'eta', $t_existing_bug->eta );\n$t_updated_bug->handler_id = gpc_get_int( 'handler_id', $t_existing_bug->handler_id );\n$t_updated_bug->last_updated = gpc_get_string( 'last_updated' );\n$t_updated_bug->os = gpc_get_string( 'os', $t_existing_bug->os );\n$t_updated_bug->os_build = gpc_get_string( 'os_build', $t_existing_bug->os_build );\n$t_updated_bug->platform = gpc_get_string( 'platform', $t_existing_bug->platform );\n$t_updated_bug->priority = gpc_get_int( 'priority', $t_existing_bug->priority );\n$t_updated_bug->projection = gpc_get_int( 'projection', $t_existing_bug->projection );\n\n$t_reporter_id = gpc_get_int( 'reporter_id', $t_existing_bug->reporter_id );\n# Only validate the reporter if different from the recorded one; this avoids\n# blocking the update when changing another field and the original reporter's\n# account no longer exists.\nif( $t_reporter_id != $t_existing_bug->reporter_id ) {\n\tuser_ensure_exists( $t_reporter_id );\n\t$t_report_bug_threshold = config_get( 'report_bug_threshold',\n\t\tnull,\n\t\t$t_reporter_id,\n\t\t$t_existing_bug->project_id\n\t);\n\t$t_can_report = access_has_project_level(\n\t\t$t_report_bug_threshold,\n\t\t$t_existing_bug->project_id,\n\t\t$t_reporter_id\n\t);\n\tif( !$t_can_report ) {\n\t\ttrigger_error( ERROR_USER_DOES_NOT_HAVE_REQ_ACCESS, ERROR );\n\t}\n}\n$t_updated_bug->reporter_id = $t_reporter_id;\n\n$t_updated_bug->reproducibility = gpc_get_int( 'reproducibility', $t_existing_bug->reproducibility );\n$t_updated_bug->resolution = gpc_get_int( 'resolution', $t_existing_bug->resolution );\n$t_updated_bug->severity = gpc_get_int( 'severity', $t_existing_bug->severity );\n$t_updated_bug->status = gpc_get_int( 'status', $t_existing_bug->status );\n$t_updated_bug->steps_to_reproduce = gpc_get_string( 'steps_to_reproduce', $t_existing_bug->steps_to_reproduce );\n$t_updated_bug->summary = gpc_get_string( 'summary', $t_existing_bug->summary );\n\n$t_updated_bug->fixed_in_version = get_valid_version( $t_existing_bug, 'fixed_in_version' );\n$t_updated_bug->target_version = get_valid_version( $t_existing_bug, 'target_version' );\n$t_updated_bug->version = get_valid_version( $t_existing_bug, 'version' );\n\n$t_updated_bug->view_state = gpc_get_int( 'view_state', $t_existing_bug->view_state );\n\n$t_bug_note = new BugNoteData();\n$t_bug_note->note = gpc_get_string( 'bugnote_text', '' );\n$t_bug_note->view_state = gpc_get_bool( 'private' ) ? VS_PRIVATE : VS_PUBLIC;\n$t_bug_note->time_tracking = gpc_get_string( 'time_tracking', '0:00' );\n\nif( $t_existing_bug->last_updated != $t_updated_bug->last_updated ) {\n\ttrigger_error( ERROR_BUG_CONFLICTING_EDIT, ERROR );\n}\n\n# Determine whether the new status will reopen, resolve or close the issue.\n# Note that multiple resolved or closed states can exist and thus we need to\n# look at a range of statuses when performing this check.\n$t_resolved_status = config_get( 'bug_resolved_status_threshold' );\n$t_closed_status = config_get( 'bug_closed_status_threshold' );\n$t_reopen_resolution = config_get( 'bug_reopen_resolution' );\n$t_resolve_issue = false;\n$t_close_issue = false;\n$t_reopen_issue = false;\nif( $t_existing_bug->status < $t_resolved_status &&\n\t$t_updated_bug->status >= $t_resolved_status &&\n\t$t_updated_bug->status < $t_closed_status\n) {\n\t$t_resolve_issue = true;\n} else if( $t_existing_bug->status < $t_closed_status &&\n\t\t   $t_updated_bug->status >= $t_closed_status\n) {\n\t$t_close_issue = true;\n} else if( $t_existing_bug->status >= $t_resolved_status &&\n\t\t   $t_updated_bug->status <= config_get( 'bug_reopen_status' )\n) {\n\t$t_reopen_issue = true;\n}\n\n$t_reporter_closing =\n\t( $f_update_type == BUG_UPDATE_TYPE_CLOSE ) &&\n\tbug_is_user_reporter( $f_bug_id, $t_current_user_id ) &&\n\taccess_can_close_bug( $t_existing_bug, $t_current_user_id );\n\n$t_reporter_reopening =\n\t( ( $f_update_type == BUG_UPDATE_TYPE_REOPEN ) || $t_reopen_issue ) &&\n\tbug_is_user_reporter( $f_bug_id, $t_current_user_id ) &&\n\taccess_can_reopen_bug( $t_existing_bug, $t_current_user_id );\n\nif ( !$t_reporter_reopening && !$t_reporter_closing ) {\n\tswitch( $f_update_type ) {\n\t\tcase BUG_UPDATE_TYPE_ASSIGN:\n\t\t\t$t_threshold = 'update_bug_assign_threshold';\n\t\t\t$t_check_readonly = true;\n\t\t\tbreak;\n\t\tcase BUG_UPDATE_TYPE_CLOSE:\n\t\tcase BUG_UPDATE_TYPE_REOPEN:\n\t\t\t$t_threshold = 'update_bug_status_threshold';\n\t\t\t$t_check_readonly = false;\n\t\t\tbreak;\n\t\tcase BUG_UPDATE_TYPE_CHANGE_STATUS:\n\t\t\t$t_threshold = 'update_bug_status_threshold';\n\t\t\t$t_check_readonly = true;\n\t\t\tbreak;\n\t\tcase BUG_UPDATE_TYPE_NORMAL:\n\t\tdefault:\n\t\t\t$t_threshold = 'update_bug_threshold';\n\t\t\t$t_check_readonly = true;\n\t\t\tbreak;\n\t}\n\taccess_ensure_bug_level( config_get( $t_threshold ), $f_bug_id );\n\n\tif( $t_check_readonly ) {\n\t\t# Check if the bug is in a read-only state and whether the current user has\n\t\t# permission to update read-only bugs.\n\t\tif( bug_is_readonly( $f_bug_id ) ) {\n\t\t\terror_parameters( $f_bug_id );\n\t\t\ttrigger_error( ERROR_BUG_READ_ONLY_ACTION_DENIED, ERROR );\n\t\t}\n\t}\n}\n\n# If resolving or closing, ensure that all dependent issues have been resolved\n# unless config option enables closing parents with open children.\nif( ( $t_resolve_issue || $t_close_issue ) &&\n\t!relationship_can_resolve_bug( $f_bug_id ) &&\n\tOFF == config_get( 'allow_parent_of_unresolved_to_close' ) ) {\n\ttrigger_error( ERROR_BUG_RESOLVE_DEPENDANTS_BLOCKING, ERROR );\n}\n\n# Validate any change to the status of the issue.\nif( $t_existing_bug->status != $t_updated_bug->status ) {\n\tif( !bug_check_workflow( $t_existing_bug->status, $t_updated_bug->status ) ) {\n\t\terror_parameters( lang_get( 'status' ) );\n\t\ttrigger_error( ERROR_CUSTOM_FIELD_INVALID_VALUE, ERROR );\n\t}\n\tif( !access_has_bug_level( access_get_status_threshold( $t_updated_bug->status, $t_updated_bug->project_id ), $f_bug_id ) ) {\n\t\t# The reporter may be allowed to close or reopen the issue regardless.\n\t\t$t_can_bypass_status_access_thresholds = false;\n\t\tif( $t_close_issue &&\n\t\t\t$t_existing_bug->status >= $t_resolved_status &&\n\t\t\t$t_existing_bug->reporter_id == $t_current_user_id &&\n\t\t\tconfig_get( 'allow_reporter_close' )\n\t\t) {\n\t\t\t$t_can_bypass_status_access_thresholds = true;\n\t\t} else if( $t_reopen_issue &&\n\t\t\t\t   $t_existing_bug->status >= $t_resolved_status &&\n\t\t\t\t   $t_existing_bug->status <= $t_closed_status &&\n\t\t\t\t   $t_existing_bug->reporter_id == $t_current_user_id &&\n\t\t\t\t   config_get( 'allow_reporter_reopen' ) ) {\n\t\t\t$t_can_bypass_status_access_thresholds = true;\n\t\t}\n\t\tif( !$t_can_bypass_status_access_thresholds ) {\n\t\t\ttrigger_error( ERROR_ACCESS_DENIED, ERROR );\n\t\t}\n\t}\n\tif( $t_reopen_issue ) {\n\t\t# for everyone allowed to reopen an issue, set the reopen resolution\n\t\t$t_updated_bug->resolution = $t_reopen_resolution;\n\t}\n}\n\n# Validate any change to the handler of an issue.\n# The new handler is checked at project level.\nif( $t_existing_bug->handler_id != $t_updated_bug->handler_id ) {\n\t$t_issue_is_sponsored = config_get( 'enable_sponsorship' )\n\t\t&& sponsorship_get_amount( sponsorship_get_all_ids( $f_bug_id ) ) > 0;\n\taccess_ensure_bug_level( config_get( 'update_bug_assign_threshold' ), $f_bug_id );\n\tif( $t_issue_is_sponsored && !access_has_project_level( config_get( 'handle_sponsored_bugs_threshold' ),  $t_updated_bug->project_id, $t_updated_bug->handler_id ) ) {\n\t\ttrigger_error( ERROR_SPONSORSHIP_HANDLER_ACCESS_LEVEL_TOO_LOW, ERROR );\n\t}\n\tif( $t_updated_bug->handler_id != NO_USER ) {\n\t\tif( !access_has_project_level( config_get( 'handle_bug_threshold' ),  $t_updated_bug->project_id, $t_updated_bug->handler_id ) ) {\n\t\t\ttrigger_error( ERROR_HANDLER_ACCESS_TOO_LOW, ERROR );\n\t\t}\n\t\tif( $t_issue_is_sponsored && !access_has_bug_level( config_get( 'assign_sponsored_bugs_threshold' ), $f_bug_id ) ) {\n\t\t\ttrigger_error( ERROR_SPONSORSHIP_ASSIGNER_ACCESS_LEVEL_TOO_LOW, ERROR );\n\t\t}\n\t}\n}\n\n# Check whether the category has been undefined when it's compulsory.\nif( $t_existing_bug->category_id != $t_updated_bug->category_id ) {\n\tif( $t_updated_bug->category_id == 0 &&\n\t\t!config_get( 'allow_no_category' )\n\t) {\n\t\terror_parameters( lang_get( 'category' ) );\n\t\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n\t}\n\n\t# Make sure the category belongs to the given project's hierarchy\n\tcategory_ensure_exists_in_project(\n\t\t$t_updated_bug->category_id,\n\t\t$t_updated_bug->project_id\n\t);\n}\n\n# Don't allow changing the Resolution in the following cases:\n# - new status < RESOLVED and resolution denoting completion (>= fixed_threshold)\n# - new status >= RESOLVED and resolution < fixed_threshold\n# - resolution = REOPENED and current status < RESOLVED and new status >= RESOLVED\n# Refer to #15653 for further details (particularly note 37180)\n$t_resolution_fixed_threshold = config_get( 'bug_resolution_fixed_threshold' );\nif( $t_existing_bug->resolution != $t_updated_bug->resolution && (\n\t   (  $t_updated_bug->resolution >= $t_resolution_fixed_threshold\n\t   && $t_updated_bug->resolution != $t_reopen_resolution\n\t   && $t_updated_bug->status < $t_resolved_status\n\t   )\n\t|| (  $t_updated_bug->resolution == $t_reopen_resolution\n\t   && (  $t_existing_bug->status < $t_resolved_status\n\t\t  || $t_updated_bug->status >= $t_resolved_status\n\t   ) )\n\t|| (  $t_updated_bug->resolution < $t_resolution_fixed_threshold\n\t   && $t_updated_bug->status >= $t_resolved_status\n\t   )\n) ) {\n\terror_parameters(\n\t\tget_enum_element( 'resolution', $t_updated_bug->resolution ),\n\t\tget_enum_element( 'status', $t_updated_bug->status )\n\t);\n\ttrigger_error( ERROR_INVALID_RESOLUTION, ERROR );\n}\n\n# Ensure that the user has permission to change the target version of the issue.\nif( $t_existing_bug->target_version !== $t_updated_bug->target_version ) {\n\taccess_ensure_bug_level( config_get( 'roadmap_update_threshold' ), $f_bug_id );\n}\n\n# Ensure that the user has permission to change the view status of the issue.\nif( $t_existing_bug->view_state != $t_updated_bug->view_state ) {\n\taccess_ensure_bug_level( config_get( 'change_view_status_threshold' ), $f_bug_id );\n}\n\n# Determine the custom field \"require check\" to use for validating\n# whether fields can be undefined during this bug update.\nif( $t_close_issue ) {\n\t$t_cf_require_check = 'require_closed';\n} else if( $t_resolve_issue ) {\n\t$t_cf_require_check = 'require_resolved';\n} else {\n\t$t_cf_require_check = 'require_update';\n}\n\n$t_related_custom_field_ids = custom_field_get_linked_ids( $t_existing_bug->project_id );\n$t_custom_fields_to_set = array();\nforeach ( $t_related_custom_field_ids as $t_cf_id ) {\n\t$t_cf_def = custom_field_get_definition( $t_cf_id );\n\n\t# If the custom field is not set and is required, then complain!\n\tif( !gpc_isset_custom_field( $t_cf_id, $t_cf_def['type'] ) ) {\n\t\tif( $t_cf_def[$t_cf_require_check] &&\n\t\t\tcustom_field_is_present( $t_cf_id ) &&\n\t\t\tcustom_field_has_write_access( $t_cf_id, $f_bug_id ) ) {\n\t\t\t# A value for the custom field was expected however\n\t\t\t# no value was given by the user.\n\t\t\terror_parameters( lang_get_defaulted( custom_field_get_field( $t_cf_id, 'name' ) ) );\n\t\t\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n\t\t}\n\t}\n\n\t# Otherwise, if not present then skip it.\n\tif ( !custom_field_is_present( $t_cf_id ) ) {\n\t\tcontinue;\n\t}\n\n\tif( !custom_field_has_write_access( $t_cf_id, $f_bug_id ) ) {\n\t\ttrigger_error( ERROR_ACCESS_DENIED, ERROR );\n\t}\n\n\t$t_new_custom_field_value = gpc_get_custom_field( 'custom_field_' . $t_cf_id, $t_cf_def['type'], '' );\n\t$t_old_custom_field_value = custom_field_get_value( $t_cf_id, $f_bug_id );\n\n\t# Validate the value of the field against current validation rules.\n\t# This may cause an error if validation rules have recently been\n\t# modified such that old values that were once OK are now considered\n\t# invalid.\n\tif( !custom_field_validate( $t_cf_id, $t_new_custom_field_value ) ) {\n\t\terror_parameters( lang_get_defaulted( custom_field_get_field( $t_cf_id, 'name' ) ) );\n\t\ttrigger_error( ERROR_CUSTOM_FIELD_INVALID_VALUE, ERROR );\n\t}\n\n\t# Remember the new custom field values so we can set them when updating\n\t# the bug (done after all data passed to this update page has been\n\t# validated).\n\t$t_custom_fields_to_set[] = array( 'id' => $t_cf_id, 'value' => $t_new_custom_field_value );\n}\n\n# Perform validation of the duplicate ID of the bug.\nif( $t_updated_bug->duplicate_id != 0 ) {\n\tif( $t_updated_bug->duplicate_id == $f_bug_id ) {\n\t\ttrigger_error( ERROR_BUG_DUPLICATE_SELF, ERROR );\n\t}\n\n\tbug_ensure_exists( $t_updated_bug->duplicate_id );\n\n\tif( !access_has_bug_level( config_get( 'update_bug_threshold' ), $t_updated_bug->duplicate_id ) ) {\n\t\ttrigger_error( ERROR_RELATIONSHIP_ACCESS_LEVEL_TO_DEST_BUG_TOO_LOW, ERROR );\n\t}\n}\n\n# Validate the new bug note (if any is provided).\nif( $t_bug_note->note ||\n\t( config_get( 'time_tracking_enabled' ) &&\n\t  helper_duration_to_minutes( $t_bug_note->time_tracking ) > 0 )\n) {\n\taccess_ensure_bug_level( config_get( 'add_bugnote_threshold' ), $f_bug_id );\n\tif( !$t_bug_note->note &&\n\t\t!config_get( 'time_tracking_without_note' )\n\t) {\n\t\terror_parameters( lang_get( 'bugnote' ) );\n\t\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n\t}\n\tif( $t_bug_note->view_state != config_get( 'default_bugnote_view_status' ) ) {\n\t\taccess_ensure_bug_level( config_get( 'set_view_status_threshold' ), $f_bug_id );\n\t}\n}\n\n# Handle the reassign on feedback feature. Note that this feature generally\n# won't work very well with custom workflows as it makes a lot of assumptions\n# that may not be true. It assumes you don't have any statuses in the workflow\n# between 'bug_submit_status' and 'bug_feedback_status'. It assumes you only\n# have one feedback, assigned and submitted status.\nif( $t_bug_note->note &&\n\tconfig_get( 'reassign_on_feedback' ) &&\n\t$t_existing_bug->status == config_get( 'bug_feedback_status' ) &&\n\t$t_updated_bug->status == $t_existing_bug->status &&\n\t$t_updated_bug->handler_id != $t_current_user_id &&\n\t$t_updated_bug->reporter_id == $t_current_user_id\n) {\n\tif( $t_updated_bug->handler_id != NO_USER ) {\n\t\t$t_updated_bug->status = config_get( 'bug_assigned_status' );\n\t} else {\n\t\t$t_updated_bug->status = config_get( 'bug_submit_status' );\n\t}\n}\n\n# Handle automatic assignment of issues.\n$t_updated_bug->status = bug_get_status_for_assign( $t_existing_bug->handler_id, $t_updated_bug->handler_id, $t_existing_bug->status, $t_updated_bug->status );\n\n# Allow a custom function to validate the proposed bug updates. Note that\n# custom functions are being deprecated in MantisBT. You should migrate to\n# the new plugin system instead.\nhelper_call_custom_function( 'issue_update_validate', array( $f_bug_id, $t_updated_bug, $t_bug_note->note ) );\n\n# Allow plugins to validate/modify the update prior to it being committed.\n$t_updated_bug = event_signal( 'EVENT_UPDATE_BUG_DATA', $t_updated_bug, $t_existing_bug );\n\n# Commit the bug updates to the database.\n$t_text_field_update_required = ( $t_existing_bug->description != $t_updated_bug->description ) ||\n\t\t\t\t\t\t\t\t( $t_existing_bug->additional_information != $t_updated_bug->additional_information ) ||\n\t\t\t\t\t\t\t\t( $t_existing_bug->steps_to_reproduce != $t_updated_bug->steps_to_reproduce );\n$t_updated_bug->update( $t_text_field_update_required, true );\n\n# Update custom field values.\nforeach ( $t_custom_fields_to_set as $t_custom_field_to_set ) {\n\tcustom_field_set_value( $t_custom_field_to_set['id'], $f_bug_id, $t_custom_field_to_set['value'] );\n}\n\n# Add a bug note if there is one.\nif( $t_bug_note->note || helper_duration_to_minutes( $t_bug_note->time_tracking ) > 0 ) {\n\t$t_bugnote_id = bugnote_add( $f_bug_id, $t_bug_note->note, $t_bug_note->time_tracking, $t_bug_note->view_state == VS_PRIVATE, 0, '', null, false );\n\tbugnote_process_mentions( $f_bug_id, $t_bugnote_id, $t_bug_note->note );\n}\n\n# Add a duplicate relationship if requested.\nif( $t_updated_bug->duplicate_id != 0 ) {\n\trelationship_upsert( $f_bug_id, $t_updated_bug->duplicate_id, BUG_DUPLICATE, /* email_for_source */ false );\n\n\tif( user_exists( $t_existing_bug->reporter_id ) ) {\n\t\tbug_monitor( $t_updated_bug->duplicate_id, $t_existing_bug->reporter_id );\n\t}\n\tif( user_exists( $t_existing_bug->handler_id ) ) {\n\t\tbug_monitor( $t_updated_bug->duplicate_id, $t_existing_bug->handler_id );\n\t}\n\n\tbug_monitor_copy( $f_bug_id, $t_updated_bug->duplicate_id );\n}\n\nevent_signal( 'EVENT_UPDATE_BUG', array( $t_existing_bug, $t_updated_bug ) );\n\n# Allow a custom function to respond to the modifications made to the bug. Note\n# that custom functions are being deprecated in MantisBT. You should migrate to\n# the new plugin system instead.\nhelper_call_custom_function( 'issue_update_notify', array( $f_bug_id ) );\n\n# Send a notification of changes via email.\nif( $t_resolve_issue ) {\n\temail_resolved( $f_bug_id );\n\temail_relationship_child_resolved( $f_bug_id );\n} else if( $t_close_issue ) {\n\temail_close( $f_bug_id );\n\temail_relationship_child_closed( $f_bug_id );\n} else if( $t_reopen_issue ) {\n\temail_bug_reopened( $f_bug_id );\n} else if( $t_existing_bug->handler_id != $t_updated_bug->handler_id ) {\n\temail_owner_changed( $f_bug_id, $t_existing_bug->handler_id, $t_updated_bug->handler_id );\n} else if( $t_existing_bug->status != $t_updated_bug->status ) {\n\t$t_new_status_label = MantisEnum::getLabel( config_get( 'status_enum_string' ), $t_updated_bug->status );\n\t$t_new_status_label = str_replace( ' ', '_', $t_new_status_label );\n\temail_bug_status_changed( $f_bug_id, $t_new_status_label );\n} else {\n\temail_bug_updated( $f_bug_id );\n}\n\nform_security_purge( 'bug_update' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "bug_update_page.php",
          "type": "blob",
          "size": 26.4091796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Display advanced Bug update page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses columns_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses error_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses last_visited_api.php\n * @uses prepare_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'columns_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'last_visited_api.php' );\nrequire_api( 'prepare_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'version_api.php' );\n\nrequire_css( 'status_config.php' );\n\n$f_bug_id = gpc_get_int( 'bug_id' );\n$f_reporter_edit = gpc_get_bool( 'reporter_edit' );\n\n$t_bug = bug_get( $f_bug_id, true );\n\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\nif( bug_is_readonly( $f_bug_id ) ) {\n\terror_parameters( $f_bug_id );\n\ttrigger_error( ERROR_BUG_READ_ONLY_ACTION_DENIED, ERROR );\n}\n\naccess_ensure_bug_level( config_get( 'update_bug_threshold' ), $f_bug_id );\n\n$t_fields = config_get( 'bug_update_page_fields' );\n$t_fields = columns_filter_disabled( $t_fields );\n\n$t_bug_id = $f_bug_id;\n\n$t_action_button_position = config_get( 'action_button_position' );\n\n$t_top_buttons_enabled = $t_action_button_position == POSITION_TOP || $t_action_button_position == POSITION_BOTH;\n$t_bottom_buttons_enabled = $t_action_button_position == POSITION_BOTTOM || $t_action_button_position == POSITION_BOTH;\n\n$t_show_id = in_array( 'id', $t_fields );\n$t_show_project = in_array( 'project', $t_fields );\n$t_show_category = in_array( 'category_id', $t_fields );\n$t_show_view_state = in_array( 'view_state', $t_fields );\n$t_view_state = $t_show_view_state ? string_display_line( get_enum_element( 'view_state', $t_bug->view_state ) ) : '';\n$t_show_date_submitted = in_array( 'date_submitted', $t_fields );\n$t_show_last_updated = in_array( 'last_updated', $t_fields );\n$t_show_reporter = in_array( 'reporter', $t_fields );\n$t_show_handler = in_array( 'handler', $t_fields ) && access_has_bug_level( config_get( 'view_handler_threshold' ), $t_bug_id );\n$t_show_priority = in_array( 'priority', $t_fields );\n$t_show_severity = in_array( 'severity', $t_fields );\n$t_show_reproducibility = in_array( 'reproducibility', $t_fields );\n$t_show_status = in_array( 'status', $t_fields );\n$t_show_resolution = in_array( 'resolution', $t_fields );\n$t_show_projection = in_array( 'projection', $t_fields ) && config_get( 'enable_projection' ) == ON;\n$t_show_eta = in_array( 'eta', $t_fields ) && config_get( 'enable_eta' ) == ON;\n$t_show_profiles = config_get( 'enable_profiles' ) == ON;\n$t_show_platform = $t_show_profiles && in_array( 'platform', $t_fields );\n$t_show_os = $t_show_profiles && in_array( 'os', $t_fields );\n$t_show_os_build = $t_show_profiles && in_array( 'os_build', $t_fields );\n$t_show_versions = version_should_show_product_version( $t_bug->project_id );\n$t_show_product_version = $t_show_versions && in_array( 'product_version', $t_fields );\n$t_show_product_build = $t_show_versions && in_array( 'product_build', $t_fields ) && ( config_get( 'enable_product_build' ) == ON );\n$t_product_build_attribute = $t_show_product_build ? string_attribute( $t_bug->build ) : '';\n$t_show_target_version = $t_show_versions && in_array( 'target_version', $t_fields ) && access_has_bug_level( config_get( 'roadmap_update_threshold' ), $t_bug_id );\n$t_show_fixed_in_version = $t_show_versions && in_array( 'fixed_in_version', $t_fields );\n$t_show_due_date = in_array( 'due_date', $t_fields ) && access_has_bug_level( config_get( 'due_date_view_threshold' ), $t_bug_id );\n$t_show_summary = in_array( 'summary', $t_fields );\n$t_summary_attribute = $t_show_summary ? string_attribute( $t_bug->summary ) : '';\n$t_show_description = in_array( 'description', $t_fields );\n$t_description_textarea = $t_show_description ? string_textarea( $t_bug->description ) : '';\n$t_show_additional_information = in_array( 'additional_info', $t_fields );\n$t_additional_information_textarea = $t_show_additional_information ? string_textarea( $t_bug->additional_information ) : '';\n$t_show_steps_to_reproduce = in_array( 'steps_to_reproduce', $t_fields );\n$t_steps_to_reproduce_textarea = $t_show_steps_to_reproduce ? string_textarea( $t_bug->steps_to_reproduce ) : '';\nif( NO_USER == $t_bug->handler_id ) {\n\t$t_handler_name =  '';\n} else {\n\t$t_handler_name = string_display_line( user_get_name( $t_bug->handler_id ) );\n}\n\n$t_can_change_view_state = $t_show_view_state && access_has_project_level( config_get( 'change_view_status_threshold' ) );\n\nif( $t_show_product_version ) {\n\t$t_product_version_released_mask = VERSION_RELEASED;\n\n\tif( access_has_project_level( config_get( 'report_issues_for_unreleased_versions_threshold' ) ) ) {\n\t\t$t_product_version_released_mask = VERSION_ALL;\n\t}\n}\n\n$t_formatted_bug_id = $t_show_id ? bug_format_id( $f_bug_id ) : '';\n$t_project_name = $t_show_project ? string_display_line( project_get_name( $t_bug->project_id ) ) : '';\n\nlayout_page_header( bug_format_summary( $f_bug_id, SUMMARY_CAPTION ) );\n\nlayout_page_begin();\n\n?>\n<div class=\"col-md-12 col-xs-12\">\n<div id=\"bug-update\" class=\"form-container\">\n\t<form id=\"update_bug_form\" method=\"post\" action=\"bug_update.php\">\n\t\t<?php echo form_security_field( 'bug_update' ); ?>\n\t\t<input type=\"hidden\" name=\"bug_id\" value=\"<?php echo $t_bug_id ?>\" />\n        <input type=\"hidden\" name=\"last_updated\" value=\"<?php echo $t_bug->last_updated ?>\" />\n\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-comments', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'updating_bug_advanced_title' ) ?>\n\t\t\t</h4>\n\t\t\t<div class=\"widget-toolbar no-border\">\n\t\t\t\t<div class=\"widget-menu\">\n\t\t\t\t\t<?php print_extra_small_button( string_get_bug_view_url( $t_bug_id ), lang_get( 'back_to_bug_link' ) ); ?>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\n<?php\n# Submit Button\nif( $t_top_buttons_enabled ) {\n?>\n\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t<input <?php echo helper_get_tab_index(); ?>\n\t\t\t\t\t\ttype=\"submit\" class=\"btn btn-primary btn-white btn-round\"\n\t\t\t\t\t\tvalue=\"<?php echo lang_get( 'update_information_button' ); ?>\" />\n\t\t\t\t</div>\n<?php\n}\n?>\n\t\t\t<tbody>\n<?php\nevent_signal( 'EVENT_UPDATE_BUG_FORM_TOP', array( $t_bug_id ) );\n\nif( $t_show_id || $t_show_project || $t_show_category || $t_show_view_state || $t_show_date_submitted | $t_show_last_updated ) {\n\t#\n\t# Titles for Bug Id, Project Name, Category, View State, Date Submitted, Last Updated\n\t#\n\n\techo '<tr>';\n\techo '<td width=\"15%\" class=\"category\">', $t_show_id ? lang_get( 'id' ) : '', '</td>';\n\techo '<td width=\"20%\" class=\"category\">', $t_show_project ? lang_get( 'email_project' ) : '', '</td>';\n\techo '<td width=\"15%\" class=\"category\">';\n\tif( $t_show_category ) {\n\t\t$t_allow_no_category = config_get( 'allow_no_category' );\n\t\techo $t_allow_no_category ? '' : '<span class=\"required\">*</span> ';\n\t\techo '<label for=\"category_id\">' . lang_get( 'category' ) . '</label>';\n\t}\n\techo '</td>';\n\techo '<td width=\"20%\" class=\"category\">', $t_show_view_state ? '<label for=\"view_state\">' . lang_get( 'view_status' ) . '</label>' : '', '</td>';\n\techo '<td width=\"15%\" class=\"category\">', $t_show_date_submitted ? lang_get( 'date_submitted' ) : '', '</td>';\n\techo '<td width=\"15%\" class=\"category\">', $t_show_last_updated ? lang_get( 'last_update' ) : '', '</td>';\n\techo '</tr>';\n\n\t#\n\t# Values for Bug Id, Project Name, Category, View State, Date Submitted, Last Updated\n\t#\n\n\techo '<tr>';\n\n\t# Bug ID\n\techo '<td>', $t_formatted_bug_id, '</td>';\n\n\t# Project Name\n\techo '<td>', $t_project_name, '</td>';\n\n\t# Category\n\techo '<td>';\n\n\tif( $t_show_category ) {\n        if( !category_is_enabled( $t_bug->category_id ) ) {\n\t\t\tprint_icon( 'warning',\n\t\t\t\t'fa-status-box bigger-125 red',\n\t\t\t\tlang_get( 'category_disabled' )\n\t\t\t);\n\t\t\techo \"&nbsp;\";\n\t\t}\n\t\techo '<select ' . helper_get_tab_index()\n\t\t\t. ( $t_allow_no_category ? '' : ' required' )\n\t\t\t. ' id=\"category_id\" name=\"category_id\" class=\"input-sm\">';\n\t\tprint_category_option_list( $t_bug->category_id, $t_bug->project_id, true );\n\t\techo '</select>';\n\t}\n\n\techo '</td>';\n\n\t# View State\n\techo '<td>';\n\n\tif( $t_can_change_view_state ) {\n\t\techo '<select ' . helper_get_tab_index() . ' id=\"view_state\" name=\"view_state\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'view_state', (int)$t_bug->view_state );\n\t\techo '</select>';\n\t} else if( $t_show_view_state ) {\n\t\techo $t_view_state;\n\t}\n\n\techo '</td>';\n\n\t# Date Submitted\n\techo '<td>', $t_show_date_submitted ? date( config_get( 'normal_date_format' ), $t_bug->date_submitted ) : '', '</td>';\n\n\t# Date Updated\n\techo '<td>', $t_show_last_updated ? date( config_get( 'normal_date_format' ), $t_bug->last_updated ) : '', '</td>';\n\n\techo '</tr>';\n\n\t# spacer\n\techo '<tr class=\"spacer\"><td colspan=\"6\"></td></tr>';\n\techo '<tr class=\"hidden\"></tr>';\n}\n\n#\n# Reporter, Assigned To, Due Date\n#\n\nif( $t_show_reporter || $t_show_handler || $t_show_due_date ) {\n\techo '<tr>';\n\n\t$t_spacer = 0;\n\n\tif( $t_show_reporter ) {\n\t\t# Reporter\n\t\techo '<th class=\"category\"><label for=\"reporter_id\">' . lang_get( 'reporter' ) . '</label></th>';\n\t\techo '<td>';\n\n\t\t# Do not allow the bug's reporter to edit the Reporter field\n\t\t# when limit_reporters is ON\n\t\tif( access_has_limited_view( $t_bug->project_id ) ) {\n\t\t\techo string_attribute( user_get_name( $t_bug->reporter_id ) );\n\t\t} else {\n\t\t\tif ( $f_reporter_edit ) {\n\t\t\t\techo '<select ' . helper_get_tab_index() . ' id=\"reporter_id\" name=\"reporter_id\">';\n\t\t\t\tprint_reporter_option_list( $t_bug->reporter_id, $t_bug->project_id );\n\t\t\t\techo '</select>';\n\t\t\t} else {\n\t\t\t\techo string_attribute( user_get_name( $t_bug->reporter_id ) );\n\t\t\t\techo ' [<a href=\"#reporter_edit\" class=\"click-url\" url=\"' . string_get_bug_update_url( $f_bug_id ) . '&amp;reporter_edit=true\">' . lang_get( 'edit' ) . '</a>]';\n\t\t\t}\n\t\t}\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif ( $t_show_handler ) {\n\t\t# Assigned To\n\t\techo '<th class=\"category\"><label for=\"handler_id\">' . lang_get( 'assigned_to' ) . '</label></th>';\n\t\techo '<td>';\n\n\t\tif( access_has_project_level( config_get( 'update_bug_assign_threshold', config_get( 'update_bug_threshold' ) ) ) ) {\n\t\t\techo '<select ' . helper_get_tab_index() . ' id=\"handler_id\" name=\"handler_id\" class=\"input-sm\">';\n\t\t\techo '<option value=\"0\"></option>';\n\t\t\tprint_assign_to_option_list( $t_bug->handler_id, $t_bug->project_id );\n\t\t\techo '</select>';\n\t\t} else {\n\t\t\techo $t_handler_name;\n\t\t}\n\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif( $t_show_due_date ) {\n\t\t# Due Date\n\t\techo '<th class=\"category\"><label for=\"due_date\">' . lang_get( 'due_date' ) . '</label></th>';\n\n\t\t$t_level = bug_overdue_level( $t_bug_id );\n\t\tif( $t_level === false ) {\n\t\t\techo '<td>';\n\t\t} else {\n\t\t\techo '<td class=\"due-', $t_level, '\">';\n\t\t}\n\n\t\tif( access_has_bug_level( config_get( 'due_date_update_threshold' ), $t_bug_id ) ) {\n\t\t\t$t_date_to_display = '';\n\n\t\t\tif( !date_is_null( $t_bug->due_date ) ) {\n\t\t\t\t$t_date_to_display = date( config_get( 'normal_date_format' ), $t_bug->due_date );\n\t\t\t}\n\t\t\techo '<input ' . helper_get_tab_index() . ' type=\"text\" id=\"due_date\" name=\"due_date\" class=\"datetimepicker input-sm\" size=\"16\" ' .\n\t\t\t\t'data-picker-locale=\"' . lang_get_current_datetime_locale() .  '\" data-picker-format=\"' . config_get( 'datetime_picker_format' ) . '\" ' .\n\t\t\t\t'maxlength=\"16\" value=\"' . $t_date_to_display . '\" />';\n\t\t\tprint_icon( 'fa-calendar', 'fa-xlg datetimepicker' );\n\t\t} else {\n\t\t\tif( !date_is_null( $t_bug->due_date ) ) {\n\t\t\t\techo date( config_get( 'short_date_format' ), $t_bug->due_date );\n\t\t\t}\n\t\t}\n\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\tif( $t_spacer > 0 ) {\n\t\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\t}\n\techo '</tr>';\n}\n\n#\n# Priority, Severity, Reproducibility\n#\n\nif( $t_show_priority || $t_show_severity || $t_show_reproducibility ) {\n\techo '<tr>';\n\n\t$t_spacer = 0;\n\n\tif( $t_show_priority ) {\n\t\t# Priority\n\t\techo '<th class=\"category\"><label for=\"priority\">' . lang_get( 'priority' ) . '</label></th>';\n\t\techo '<td><select ' . helper_get_tab_index() . ' id=\"priority\" name=\"priority\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'priority', $t_bug->priority );\n\t\techo '</select></td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif( $t_show_severity ) {\n\t\t# Severity\n\t\techo '<th class=\"category\"><label for=\"severity\">' . lang_get( 'severity' ) . '</label></th>';\n\t\techo '<td><select ' . helper_get_tab_index() . ' id=\"severity\" name=\"severity\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'severity', $t_bug->severity );\n\t\techo '</select></td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif( $t_show_reproducibility ) {\n\t\t# Reproducibility\n\t\techo '<th class=\"category\"><label for=\"reproducibility\">' . lang_get( 'reproducibility' ) . '</label></th>';\n\t\techo '<td><select ' . helper_get_tab_index() . ' id=\"reproducibility\" name=\"reproducibility\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'reproducibility', $t_bug->reproducibility );\n\t\techo '</select></td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\tif( $t_spacer > 0 ) {\n\t\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\t}\n\n\techo '</tr>';\n}\n\n#\n# Status, Resolution\n#\n\nif( $t_show_status || $t_show_resolution ) {\n\techo '<tr>';\n\n\t$t_spacer = 2;\n\n\tif( $t_show_status ) {\n\t\t# Status\n\t\techo '<th class=\"category\"><label for=\"status\">' . lang_get( 'status' ) . '</label></th>';\n\n\t\t# choose color based on status\n\t\t$t_status_css = html_get_status_css_fg( $t_bug->status );\n\n\t\techo '<td class=\"bug-status\">';\n\t\tprint_icon( 'fa-square', 'fa-status-box ' . $t_status_css );\n\t\techo '&nbsp;';\n\t\tprint_status_option_list( 'status', $t_bug->status,\n\t\t\taccess_can_close_bug( $t_bug ),\n\t\t\t$t_bug->project_id );\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif( $t_show_resolution ) {\n\t\t# Resolution\n\t\techo '<th class=\"category\"><label for=\"resolution\">' . lang_get( 'resolution' ) . '</label></th>';\n\t\techo '<td><select ' . helper_get_tab_index() . ' id=\"resolution\" name=\"resolution\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'resolution', $t_bug->resolution );\n\t\techo '</select></td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\tif( $t_spacer > 0 ) {\n\t\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\t}\n\n\techo '</tr>';\n}\n\n#\n# Projection, ETA\n#\n\nif( $t_show_projection || $t_show_eta ) {\n\techo '<tr>';\n\n\t$t_spacer = 2;\n\n\tif( $t_show_projection ) {\n\t\t# Projection\n\t\techo '<th class=\"category\"><label for=\"projection\">' . lang_get( 'projection' ) . '</label></th>';\n\t\techo '<td><select ' . helper_get_tab_index() . ' id=\"projection\" name=\"projection\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'projection', $t_bug->projection );\n\t\techo '</select></td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# ETA\n\tif( $t_show_eta ) {\n\t\techo '<th class=\"category\"><label for=\"eta\">' . lang_get( 'eta' ) . '</label></th>';\n\t\techo '<td><select ' . helper_get_tab_index() . ' id=\"eta\" name=\"eta\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'eta', (int)$t_bug->eta );\n\t\techo '</select></td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\n\techo '</tr>';\n}\n\n#\n# Platform, OS, OS Version\n#\n\nif( $t_show_platform || $t_show_os || $t_show_os_build ) {\n\techo '<tr>';\n\n\t$t_spacer = 0;\n\n\tif( $t_show_platform ) {\n\t\t# Platform\n\t\techo '<th class=\"category\"><label for=\"platform\">' . lang_get( 'platform' ) . '</label></th>';\n\t\techo '<td>';\n\n\t\tif( config_get( 'allow_freetext_in_profile_fields' ) == OFF ) {\n\t\t\techo '<select ' . helper_get_tab_index() . ' id=\"platform\" name=\"platform\" class=\"input-sm\"><option value=\"\"></option>';\n\t\t\tprint_platform_option_list( $t_bug->platform );\n\t\t\techo '</select>';\n\t\t} else {\n\t\t\techo '<input type=\"text\" id=\"platform\" name=\"platform\" class=\"typeahead input-sm\" autocomplete = \"off\" size=\"16\" maxlength=\"32\" tabindex=\"' . helper_get_tab_index_value() . '\" value=\"' . string_attribute( $t_bug->platform ) . '\" />';\n\t\t}\n\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif( $t_show_os ) {\n\t\t# Operating System\n\t\techo '<th class=\"category\"><label for=\"os\">' . lang_get( 'os' ) . '</label></th>';\n\t\techo '<td>';\n\n\t\tif( config_get( 'allow_freetext_in_profile_fields' ) == OFF ) {\n\t\t\techo '<select ' . helper_get_tab_index() . ' id=\"os\" name=\"os\" class=\"input-sm\"><option value=\"\"></option>';\n\t\t\tprint_os_option_list( $t_bug->os );\n\t\t\techo '</select>';\n\t\t} else {\n\t\t\techo '<input type=\"text\" id=\"os\" name=\"os\" class=\"typeahead input-sm\" autocomplete = \"off\" size=\"16\" maxlength=\"32\" tabindex=\"' . helper_get_tab_index_value() . '\" value=\"' . string_attribute( $t_bug->os ) . '\" />';\n\t\t}\n\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif( $t_show_os_build ) {\n\t\t# OS Version\n\t\techo '<th class=\"category\"><label for=\"os_build\">' . lang_get( 'os_build' ) . '</label></th>';\n\t\techo '<td>';\n\n\t\tif( config_get( 'allow_freetext_in_profile_fields' ) == OFF ) {\n\t\t\techo '<select ' . helper_get_tab_index() . ' id=\"os_build\" name=\"os_build\" class=\"input-sm\"><option value=\"\"></option>';\n\t\t\tprint_os_build_option_list( $t_bug->os_build );\n\t\t\techo '</select>';\n\t\t} else {\n\t\t\techo '<input type=\"text\" id=\"os_build\" name=\"os_build\" class=\"typeahead input-sm\" autocomplete = \"off\" size=\"16\" maxlength=\"16\" tabindex=\"' . helper_get_tab_index_value() . '\" value=\"' . string_attribute( $t_bug->os_build ) . '\" />';\n\t\t}\n\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\tif( $t_spacer > 0 ) {\n\t\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\t}\n\n\techo '</tr>';\n}\n\n#\n# Product Version, Product Build\n#\n\nif( $t_show_product_version || $t_show_product_build ) {\n\techo '<tr>';\n\n\t$t_spacer = 2;\n\n\t# Product Version  or Product Build, if version is suppressed\n\tif( $t_show_product_version ) {\n\t\techo '<th class=\"category\"><label for=\"version\">' . lang_get( 'product_version' ) . '</label></th>';\n\t\techo '<td>', '<select ', helper_get_tab_index(), ' id=\"version\" name=\"version\" class=\"input-sm\">';\n\t\tprint_version_option_list( $t_bug->version, $t_bug->project_id, $t_product_version_released_mask );\n\t\techo '</select></td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif( $t_show_product_build ) {\n\t\techo '<th class=\"category\"><label for=\"build\">' . lang_get( 'product_build' ) . '</label></th>';\n\t\techo '<td>';\n\t\techo '<input type=\"text\" id=\"build\" name=\"build\" class=\"input-sm\" size=\"16\" maxlength=\"32\" ' . helper_get_tab_index() . ' value=\"' . $t_product_build_attribute . '\" />';\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\n\techo '</tr>';\n}\n\n#\n# Target Version, Fixed in Version\n#\n\nif( $t_show_target_version || $t_show_fixed_in_version ) {\n\techo '<tr>';\n\n\t$t_spacer = 2;\n\n\t# Target Version\n\tif( $t_show_target_version ) {\n\t\techo '<th class=\"category\"><label for=\"target_version\">' . lang_get( 'target_version' ) . '</label></th>';\n\t\techo '<td><select ' . helper_get_tab_index() . ' id=\"target_version\" name=\"target_version\" class=\"input-sm\">';\n\t\tprint_version_option_list( $t_bug->target_version, $t_bug->project_id, VERSION_FUTURE );\n\t\techo '</select></td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# Fixed in Version\n\tif( $t_show_fixed_in_version ) {\n\t\techo '<th class=\"category\"><label for=\"fixed_in_version\">' . lang_get( 'fixed_in_version' ) . '</label></th>';\n\t\techo '<td>';\n\t\techo '<select ' . helper_get_tab_index() . ' id=\"fixed_in_version\" name=\"fixed_in_version\" class=\"input-sm\">';\n\t\tprint_version_option_list( $t_bug->fixed_in_version, $t_bug->project_id, VERSION_ALL );\n\t\techo '</select>';\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\n\techo '</tr>';\n}\n\nevent_signal( 'EVENT_UPDATE_BUG_FORM', array( $t_bug_id ) );\n\n# spacer\necho '<tr class=\"spacer\"><td colspan=\"6\"></td></tr>';\necho '<tr class=\"hidden\"></tr>';\n\n# Summary\nif( $t_show_summary ) {\n\techo '<tr>';\n\techo '<th class=\"category\">';\n\techo '<span class=\"required\">*</span> ';\n\techo '<label for=\"summary\">' . lang_get( 'summary' ) . '</label>';\n\techo '</th>';\n\techo '<td colspan=\"5\">';\n\techo '<input ', helper_get_tab_index(),\n\t\t' type=\"text\" required id=\"summary\" name=\"summary\" size=\"105\" maxlength=\"128\" value=\"',\n\t\t$t_summary_attribute, '\" />';\n\techo '</td></tr>';\n}\n\n# Description\nif( $t_show_description ) {\n\techo '<tr>';\n\techo '<th class=\"category\">';\n\techo '<span class=\"required\">*</span> ';\n\techo '<label for=\"description\">' . lang_get( 'description' ) . '</label>';\n\techo '</th>';\n\techo '<td colspan=\"5\">';\n\techo '<textarea class=\"form-control\" required ', helper_get_tab_index(),\n\t\t' cols=\"80\" rows=\"10\" id=\"description\" name=\"description\">', \"\\n\",\n\t\t$t_description_textarea, '</textarea>';\n\techo '</td></tr>';\n}\n\n# Steps to Reproduce\nif( $t_show_steps_to_reproduce ) {\n\techo '<tr>';\n\techo '<th class=\"category\"><label for=\"steps_to_reproduce\">' . lang_get( 'steps_to_reproduce' ) . '</label></th>';\n\techo '<td colspan=\"5\">';\n\techo '<textarea class=\"form-control\" ', helper_get_tab_index(),\n\t\t' cols=\"80\" rows=\"10\" id=\"steps_to_reproduce\" name=\"steps_to_reproduce\">', \"\\n\",\n\t\t$t_steps_to_reproduce_textarea, '</textarea>';\n\techo '</td></tr>';\n}\n\n# Additional Information\nif( $t_show_additional_information ) {\n\techo '<tr>';\n\techo '<th class=\"category\"><label for=\"additional_information\">' . lang_get( 'additional_information' ) . '</label></th>';\n\techo '<td colspan=\"5\">';\n\techo '<textarea class=\"form-control\" ', helper_get_tab_index(),\n\t\t' cols=\"80\" rows=\"10\" id=\"additional_information\" name=\"additional_information\">', \"\\n\",\n\t\t$t_additional_information_textarea, '</textarea>';\n\techo '</td></tr>';\n}\n\necho '<tr class=\"spacer\"><td colspan=\"6\"></td></tr>';\necho '<tr class=\"hidden\"></tr>';\n\n# Custom Fields\n$t_custom_fields_found = false;\n$t_related_custom_field_ids = custom_field_get_linked_ids( $t_bug->project_id );\n\nforeach ( $t_related_custom_field_ids as $t_id ) {\n\t$t_def = custom_field_get_definition( $t_id );\n\tif( ( $t_def['display_update'] || $t_def['require_update'] ) && custom_field_has_write_access( $t_id, $t_bug_id ) ) {\n\t\t$t_custom_fields_found = true;\n\n\t\t$t_required_class = $t_def['require_update'] ? ' class=\"required\" ' : '';\n\n\t\tif( $t_def['type'] != CUSTOM_FIELD_TYPE_RADIO && $t_def['type'] != CUSTOM_FIELD_TYPE_CHECKBOX ) {\n\t\t\t$t_label_for = ' for=\"custom_field_' . string_attribute( $t_def['id'] ) . '\" ';\n\t\t} else {\n\t\t\t$t_label_for = '';\n\t\t}\n\n\t\techo '<tr>';\n\t\techo '<td class=\"category\">';\n\t\techo '<label', $t_required_class, $t_label_for, '>';\n\t\techo '<span>', string_attribute( lang_get_defaulted( $t_def['name'] ) ), '</span>';\n\t\techo '</label>';\n\t\techo '</td><td colspan=\"5\">';\n\t\tprint_custom_field_input( $t_def, $t_bug_id, $t_def['require_update'] );\n\t\techo '</td></tr>';\n\t}\n} # foreach( $t_related_custom_field_ids as $t_id )\n\nif( $t_custom_fields_found ) {\n\t# spacer\n\techo '<tr class=\"spacer\"><td colspan=\"6\"></td></tr>';\n\techo '<tr class=\"hidden\"></tr>';\n}\n\n# Bugnote Text Box\n$t_default_bugnote_view_status = config_get( 'default_bugnote_view_status' );\n$t_bugnote_private = $t_default_bugnote_view_status == VS_PRIVATE;\n$t_bugnote_class = $t_bugnote_private ? 'form-control bugnote-private' : 'form-control';\n\necho '<tr>';\necho '<th class=\"category\"><label for=\"bugnote_text\">' . lang_get( 'add_bugnote_title' ) . '</label></th>';\necho '<td colspan=\"5\"><textarea ', helper_get_tab_index(), ' id=\"bugnote_text\" name=\"bugnote_text\" class=\"', $t_bugnote_class, '\" cols=\"80\" rows=\"7\"></textarea></td></tr>';\n\n# Bugnote Private Checkbox (if permitted)\nif( access_has_bug_level( config_get( 'private_bugnote_threshold' ), $t_bug_id ) ) {\n\techo '<tr>';\n\techo '<th class=\"category\">' . lang_get( 'private' ) . '</th>';\n\techo '<td colspan=\"5\">';\n\n\tif( access_has_bug_level( config_get( 'set_view_status_threshold' ), $t_bug_id ) ) {\n\t\techo '<label>';\n\t\techo '<input ', helper_get_tab_index(), ' type=\"checkbox\" class=\"ace\" id=\"private\" name=\"private\" ', check_checked( config_get( 'default_bugnote_view_status' ), VS_PRIVATE ), ' />';\n\t\techo '<span class=\"lbl\"></span>';\n\t\techo '</label>';\n\t} else {\n\t\techo get_enum_element( 'view_state', $t_default_bugnote_view_status );\n\t}\n\n\techo '</td></tr>';\n}\n\n# Time Tracking (if permitted)\nif( config_get( 'time_tracking_enabled' ) ) {\n\tif( access_has_bug_level( config_get( 'time_tracking_edit_threshold' ), $t_bug_id ) ) {\n\t\techo '<tr>';\n\t\techo '<th class=\"category\"><label for=\"time_tracking\">' . lang_get( 'time_tracking' ) . '</label></th>';\n\t\techo '<td colspan=\"5\"><input type=\"text\" id=\"time_tracking\" name=\"time_tracking\" class=\"input-sm\"',\n\t\t\thelper_get_tab_index(), 'size=\"5\" placeholder=\"hh:mm\" /></td></tr>';\n\t}\n}\n\nevent_signal( 'EVENT_BUGNOTE_ADD_FORM', array( $t_bug_id ) );\n\necho '</table>';\necho '</div>';\necho '</div>';\necho '</div>';\n\n# Submit Button\nif( $t_bottom_buttons_enabled ) {\n?>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<input <?php echo helper_get_tab_index(); ?>\n\t\t\ttype=\"submit\" class=\"btn btn-primary btn-white btn-round\"\n\t\t\tvalue=\"<?php echo lang_get( 'update_information_button' ); ?>\" />\n\t</div>\n<?php\n}\n?>\n\n</div>\n</form>\n</div>\n</div>\n\n<?php\ndefine( 'BUGNOTE_VIEW_INC_ALLOW', true );\ninclude( __DIR__ . '/bugnote_view_inc.php' );\nlayout_page_end();\n\nlast_visited_issue( $t_bug_id );\n"
        },
        {
          "name": "bug_view_advanced_page.php",
          "type": "blob",
          "size": 1.1103515625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * View Bug Page\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses gpc_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'gpc_api.php' );\n\n# Copy 'bug_id' parameter into 'id' so it is found by the view page.\n$_GET['id'] = gpc_get_int( 'bug_id' );\n\ninclude 'view.php';\n"
        },
        {
          "name": "bug_view_inc.php",
          "type": "blob",
          "size": 41.9306640625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This include file prints out the bug information\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bug_activity_api.php\n * @uses category_api.php\n * @uses columns_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses custom_field_api.php\n * @uses date_api.php\n * @uses event_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses prepare_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses tag_api.php\n * @uses utility_api.php\n * @uses version_api.php\n *\n * Variables referenced in this include, but declared in the calling script.\n * @var bool   $t_force_readonly\n * @var bool   $t_show_page_header\n * @var string $t_mantis_dir\n\n * Ignoring warnings caused by includes with a dynamic path\n * @noinspection PhpIncludeInspection\n */\n\nuse Mantis\\Exceptions\\ClientException;\n\nif( !defined( 'BUG_VIEW_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bug_activity_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'columns_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'date_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'prepare_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'tag_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_api( 'version_api.php' );\n\nrequire_css( 'status_config.php' );\n\n/**\n * Variables defined in parent script including this one.\n * @var string $t_mantis_dir\n * @var bool $t_show_page_header\n * @var bool $t_force_readonly\n */\n\n$f_issue_id = gpc_get_int( 'id' );\n$f_history = gpc_get_bool( 'history', config_get( 'history_default_visible' ) );\n\n# compat variables for included pages\n$f_bug_id = $f_issue_id;\n$t_bug = bug_get( $f_bug_id, true );\n\n$t_data = array(\n\t'query' => array( 'id' => $f_issue_id ),\n\t'options' => array( 'force_readonly' => $t_force_readonly )\n);\n$t_cmd = new IssueViewPageCommand( $t_data );\n$t_result = $t_cmd->execute();\n\n$t_issue = $t_result['issue'];\n$t_issue_view = $t_result['issue_view'];\n$t_flags = $t_result['flags'];\n\ncompress_enable();\n\nif( $t_show_page_header ) {\n\tlayout_page_header( bug_format_summary( $f_issue_id, SUMMARY_CAPTION ), null, 'view-issue-page', 'view.php?id=' . $f_issue_id );\n\tlayout_page_begin( 'view_all_bug_page.php' );\n}\n\n$t_action_button_position = config_get( 'action_button_position' );\n\n$t_bugslist = gpc_get_cookie( config_get_global( 'bug_list_cookie' ), false );\n\n$t_top_buttons_enabled = !$t_force_readonly && ( $t_action_button_position == POSITION_TOP || $t_action_button_position == POSITION_BOTH );\n$t_bottom_buttons_enabled = !$t_force_readonly && ( $t_action_button_position == POSITION_BOTTOM || $t_action_button_position == POSITION_BOTH );\n\n#\n# Start of Template\n#\n\necho '<div class=\"col-md-12 col-xs-12\">';\necho '<div class=\"widget-box widget-color-blue2\">';\necho '<div class=\"widget-header widget-header-small\">';\necho '<h4 class=\"widget-title lighter\">';\nprint_icon( 'fa-bars', 'ace-icon' );\necho string_display_line( $t_issue_view['form_title'] );\necho '</h4>';\necho '</div>';\n\necho '<div class=\"widget-body\">';\n\necho '<div class=\"widget-toolbox padding-8 clearfix noprint\">';\necho '<div class=\"btn-group pull-left\">';\n\n# Send Bug Reminder\nif( $t_flags['reminder_can_add'] ) {\n\tprint_small_button( 'bug_reminder_page.php?bug_id=' . $f_issue_id, lang_get( 'bug_reminder' ) );\n}\n\nif( isset( $t_issue_view['wiki_link'] ) ) {\n\tprint_small_button( $t_issue_view['wiki_link'], lang_get( 'wiki' ) );\n}\n\n# TODO: should be moved to command\nforeach ( $t_issue_view['links'] as $t_plugin => $t_hooks ) {\n\tforeach( $t_hooks as $t_hook ) {\n\t\tif( is_array( $t_hook ) ) {\n\t\t\tforeach( $t_hook as $t_label => $t_href ) {\n\t\t\t\tif( is_numeric( $t_label ) ) {\n\t\t\t\t\tprint_bracket_link_prepared( $t_href );\n\t\t\t\t} else {\n\t\t\t\t\tprint_small_button( $t_href, $t_label );\n\t\t\t\t}\n\t\t\t}\n\t\t} elseif( !empty( $t_hook ) ) {\n\t\t\tprint_bracket_link_prepared( $t_hook );\n\t\t}\n\t}\n}\n\n# Jump to Bugnotes\nprint_small_button( '#bugnotes', lang_get( 'jump_to_bugnotes' ) );\n\n# Display or Jump to History\nif( $t_flags['history_show'] ) {\n\tif( $f_history ) {\n\t\t$t_history_link = '#history';\n\t\t$t_history_label = lang_get( 'jump_to_history' );\n\t} else {\n\t\t$t_history_link = 'view.php?id=' . $f_issue_id . '&history=1#history';\n\t\t$t_history_label = lang_get( 'display_history' );\n\t}\n\tprint_small_button( $t_history_link, $t_history_label );\n}\n\necho '</div>';\n\n# prev/next links\necho '<div class=\"btn-group pull-right\">';\nif( $t_bugslist ) {\n\t$t_bugslist = explode( ',', $t_bugslist );\n\t$t_index = array_search( $f_issue_id, $t_bugslist );\n\tif( false !== $t_index ) {\n\t\tif( isset( $t_bugslist[$t_index-1] ) ) {\n\t\t\tprint_small_button( 'view.php?id='.$t_bugslist[$t_index-1], '&lt;&lt;' );\n\t\t}\n\n\t\tif( isset( $t_bugslist[$t_index+1] ) ) {\n\t\t\tprint_small_button( 'view.php?id='.$t_bugslist[$t_index+1], '&gt;&gt;' );\n\t\t}\n\t}\n}\necho '</div>';\necho '</div>';\n\necho '<div class=\"widget-main no-padding\">';\necho '<div class=\"table-responsive\">';\necho '<table class=\"table table-bordered table-condensed\">';\n\nif( $t_top_buttons_enabled ) {\n\techo '<thead><tr class=\"bug-nav\">';\n\techo '<tr class=\"top-buttons noprint\">';\n\techo '<td colspan=\"6\">';\n\t/** @noinspection PhpUnhandledExceptionInspection */\n\tbug_view_action_buttons( $f_issue_id, $t_flags );\n\techo '</td>';\n\techo '</tr>';\n\techo '</thead>';\n}\n\nif( $t_bottom_buttons_enabled ) {\n\techo '<tfoot>';\n\techo '<tr class=\"noprint\"><td colspan=\"6\">';\n\t/** @noinspection PhpUnhandledExceptionInspection */\n\tbug_view_action_buttons( $f_issue_id, $t_flags );\n\techo '</td></tr>';\n\techo '</tfoot>';\n}\n\necho '<tbody>';\n\nif( $t_flags['id_show'] || $t_flags['project_show'] || $t_flags['category_show'] ||\n    $t_flags['view_state_show'] || $t_flags['created_at_show'] || $t_flags['updated_at_show']\n) {\n\n\t# Labels\n\techo '<tr class=\"bug-header\">';\n\techo '<th class=\"bug-id category width-15\">', $t_flags['id_show'] ? lang_get( 'id' ) : '', '</th>';\n\techo '<th class=\"bug-project category width-20\">', $t_flags['project_show'] ? lang_get( 'email_project' ) : '', '</th>';\n\techo '<th class=\"bug-category category width-15\">', $t_flags['category_show'] ? lang_get( 'category' ) : '', '</th>';\n\techo '<th class=\"bug-view-status category width-15\">', $t_flags['view_state_show'] ? lang_get( 'view_status' ) : '', '</th>';\n\techo '<th class=\"bug-date-submitted category width-15\">', $t_flags['created_at_show'] ? lang_get( 'date_submitted' ) : '', '</th>';\n\techo '<th class=\"bug-last-modified category width-20\">', $t_flags['updated_at_show'] ? lang_get( 'last_update' ) : '','</th>';\n\techo '</tr>';\n\n\techo '<tr class=\"bug-header-data\">';\n\n\t# Bug ID\n\techo '<td class=\"bug-id\">', $t_flags['id_show'] ? $t_issue_view['id_formatted'] : '', '</td>';\n\n\t# Project\n\techo '<td class=\"bug-project\">', $t_flags['project_show'] && isset( $t_issue['project']['name'] ) ? string_display_line( $t_issue['project']['name'] ) : '', '</td>';\n\n\t# Category\n\techo '<td class=\"bug-category\">';\n\tif( $t_flags['category_show'] && isset( $t_issue['category']['name'] ) ) {\n\t\tif( $t_flags['can_update'] && !category_is_enabled( $t_issue['category']['id'] ) ) {\n\t\t\tprint_icon( 'warning',\n\t\t\t\t'bigger-125 red',\n\t\t\t\tlang_get( 'category_disabled' )\n\t\t\t);\n\t\t\techo \"&nbsp;\";\n\t\t}\n\t\techo string_display_line( $t_issue['category']['name'] );\n\t}\n\techo '</td>';\n\n\t# View Status\n\techo '<td class=\"bug-view-status\">', $t_flags['view_state_show'] && isset( $t_issue['view_state']['label'] ) ? string_display_line( $t_issue['view_state']['label'] ) : '', '</td>';\n\n\t# Date Submitted\n\techo '<td class=\"bug-date-submitted\">', $t_flags['created_at_show'] ? $t_issue_view['created_at'] : '', '</td>';\n\n\t# Date Updated\n\techo '<td class=\"bug-last-modified\">',  $t_flags['updated_at_show'] ? $t_issue_view['updated_at'] : '', '</td>';\n\n\techo '</tr>';\n\n\t# spacer\n\techo '<tr class=\"spacer\"><td colspan=\"6\"></td></tr>';\n\techo '<tr class=\"hidden\"></tr>';\n}\n\n#\n# Reporter, Handler, Due Date\n#\n\nif( $t_flags['reporter_show'] || $t_flags['handler_show'] || $t_flags['due_date_show'] ) {\n\techo '<tr>';\n\n\t$t_spacer = 0;\n\n\t# Reporter\n\tif( $t_flags['reporter_show'] ) {\n\t\techo '<th class=\"bug-reporter category\">', lang_get( 'reporter' ), '</th>';\n\t\techo '<td class=\"bug-reporter\">';\n\t\tprint_user_with_subject( $t_issue['reporter']['id'], $f_issue_id );\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# Handler\n\tif( $t_flags['handler_show'] ) {\n\t\techo '<th class=\"bug-assigned-to category\">', lang_get( 'assigned_to' ), '</th>';\n\t\techo '<td class=\"bug-assigned-to\">';\n\t\tif( isset( $t_issue['handler'] ) ) {\n\t\t\tprint_user_with_subject( $t_issue['handler']['id'], $f_issue_id );\n\t\t}\n\t\techo '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# Due Date\n\tif( $t_flags['due_date_show'] ) {\n\t\techo '<th class=\"bug-due-date category\">', lang_get( 'due_date' ), '</th>';\n\n\t\t$t_css = 'bug-due-date';\n\t\tif( $t_issue_view['overdue'] !== false ) {\n\t\t\t$t_css .= ' due-' . $t_issue_view['overdue'];\n\t\t}\n\t\techo '<td class=\"' . $t_css . '\">', $t_issue_view['due_date'], '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif( $t_spacer > 0 ) {\n\t\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\t}\n\n\techo '</tr>';\n}\n\n#\n# Priority, Severity, Reproducibility\n#\n\nif( $t_flags['priority_show'] || $t_flags['severity_show'] || $t_flags['reproducibility_show'] ) {\n\techo '<tr>';\n\n\t$t_spacer = 0;\n\n\t# Priority\n\tif( $t_flags['priority_show'] ) {\n\t\techo '<th class=\"bug-priority category\">', lang_get( 'priority' ), '</th>';\n\t\techo '<td class=\"bug-priority\">', string_display_line( $t_issue['priority']['label'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# Severity\n\tif( $t_flags['severity_show'] ) {\n\t\techo '<th class=\"bug-severity category\">', lang_get( 'severity' ), '</th>';\n\t\techo '<td class=\"bug-severity\">', string_display_line( $t_issue['severity']['label'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# Reproducibility\n\tif( $t_flags['reproducibility_show'] ) {\n\t\techo '<th class=\"bug-reproducibility category\">', lang_get( 'reproducibility' ), '</th>';\n\t\techo '<td class=\"bug-reproducibility\">', string_display_line( $t_issue['reproducibility']['label'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\tif( $t_spacer > 0 ) {\n\t\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\t}\n\n\techo '</tr>';\n}\n\n#\n# Status, Resolution\n#\n\nif( $t_flags['status_show'] || $t_flags['resolution_show'] ) {\n\techo '<tr>';\n\n\t$t_spacer = 2;\n\n\t# Status\n\tif( $t_flags['status_show'] ) {\n\t\techo '<th class=\"bug-status category\">', lang_get( 'status' ), '</th>';\n\n\t\t# choose color based on status\n\t\t$t_status_css = html_get_status_css_fg( $t_issue['status']['id'] );\n\n\t\techo '<td class=\"bug-status\">';\n\t\tprint_icon( 'fa-square', 'fa-status-box ' . $t_status_css );\n\t\techo ' ' . string_display_line( $t_issue['status']['label'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# Resolution\n\tif( $t_flags['resolution_show'] ) {\n\t\techo '<th class=\"bug-resolution category\">', lang_get( 'resolution' ), '</th>';\n\t\techo '<td class=\"bug-resolution\">', string_display_line( $t_issue['resolution']['label'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\tif( $t_spacer > 0 ) {\n\t\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\t}\n\n\techo '</tr>';\n}\n\n#\n# Projection, ETA\n#\n\nif( $t_flags['projection_show'] || $t_flags['eta_show'] ) {\n\techo '<tr>';\n\n\t$t_spacer = 2;\n\n\tif( $t_flags['projection_show'] ) {\n\t\t# Projection\n\t\techo '<th class=\"bug-projection category\">', lang_get( 'projection' ), '</th>';\n\t\techo '<td class=\"bug-projection\">', string_display_line( $t_issue['projection']['label'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# ETA\n\tif( $t_flags['eta_show'] ) {\n\t\techo '<th class=\"bug-eta category\">', lang_get( 'eta' ), '</th>';\n\t\techo '<td class=\"bug-eta\">', string_display_line( $t_issue['eta']['label'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\techo '</tr>';\n}\n\n#\n# Platform, OS, OS Version\n#\n\nif( ( $t_flags['profiles_platform_show'] && isset( $t_issue['platform'] ) && !is_blank( $t_issue['platform'] ) ) ||\n\t( $t_flags['profiles_os_show'] && isset( $t_issue['os'] ) && !is_blank( $t_issue['os'] ) ) ||\n    ( $t_flags['profiles_os_build_show'] && isset( $t_issue['os_build'] ) && !is_blank( $t_issue['os_build'] ) ) ) {\n\t$t_spacer = 0;\n\n\techo '<tr>';\n\n\t# Platform\n\tif( $t_flags['profiles_platform_show'] && isset( $t_issue['platform'] ) && !is_blank( $t_issue['platform'] ) ) {\n\t\techo '<th class=\"bug-platform category\">', lang_get( 'platform' ), '</th>';\n\t\techo '<td class=\"bug-platform\">', string_display_line( $t_issue['platform'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# Operating System\n\tif( $t_flags['profiles_os_show'] && isset( $t_issue['os'] ) && !is_blank( $t_issue['os'] ) ) {\n\t\techo '<th class=\"bug-os category\">', lang_get( 'os' ), '</th>';\n\t\techo '<td class=\"bug-os\">', string_display_line( $t_issue['os'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# OS Version\n\tif( $t_flags['profiles_os_build_show'] && isset( $t_issue['os_build'] ) && !is_blank( $t_issue['os_build'] ) ) {\n\t\techo '<th class=\"bug-os-build category\">', lang_get( 'os_build' ), '</th>';\n\t\techo '<td class=\"bug-os-build\">', string_display_line( $t_issue['os_build'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\tif( $t_spacer > 0 ) {\n\t\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\t}\n\n\techo '</tr>';\n}\n\n#\n# Product Version, Product Build\n#\n\nif( ( $t_flags['versions_product_version_show'] && isset( $t_issue['version'] ) ) ||\n    ( $t_flags['versions_product_build_show'] && isset( $t_issue['build'] ) ) ) {\n\t$t_spacer = 2;\n\n\techo '<tr>';\n\n\t# Product Version\n\tif( $t_flags['versions_product_version_show'] && isset( $t_issue['version'] ) ) {\n\t\techo '<th class=\"bug-product-version category\">', lang_get( 'product_version' ), '</th>';\n\t\techo '<td class=\"bug-product-version\">', string_display_line( $t_issue_view['product_version'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# Product Build\n\tif( $t_flags['versions_product_build_show'] && isset( $t_issue['build'] ) ) {\n\t\techo '<th class=\"bug-product-build category\">', lang_get( 'product_build' ), '</th>';\n\t\techo '<td class=\"bug-product-build\">', string_display_line( $t_issue['build'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\n\techo '</tr>';\n}\n\n#\n# Target Version, Fixed In Version\n#\n\nif( ( $t_flags['versions_target_version_show'] && isset( $t_issue['target_version'] ) ) ||\n    ( $t_flags['versions_fixed_in_version_show'] && isset( $t_issue['fixed_in_version'] ) ) ) {\n\t$t_spacer = 2;\n\n\techo '<tr>';\n\n\t# target version\n\tif( $t_flags['versions_target_version_show'] && isset( $t_issue['target_version'] ) ) {\n\t\t# Target Version\n\t\techo '<th class=\"bug-target-version category\">', lang_get( 'target_version' ), '</th>';\n\t\techo '<td class=\"bug-target-version\">', string_display_line( $t_issue_view['target_version'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# fixed in version\n\tif( $t_flags['versions_fixed_in_version_show'] && isset( $t_issue['fixed_in_version'] ) ) {\n\t\techo '<th class=\"bug-fixed-in-version category\">', lang_get( 'fixed_in_version' ), '</th>';\n\t\techo '<td class=\"bug-fixed-in-version\">', string_display_line( $t_issue_view['fixed_in_version'] ), '</td>';\n\t} else {\n\t\t$t_spacer += 2;\n\t}\n\n\t# spacer\n\techo '<td colspan=\"', $t_spacer, '\">&#160;</td>';\n\n\techo '</tr>';\n}\n\n#\n# Bug Details Event Signal\n#\n\nevent_signal( 'EVENT_VIEW_BUG_DETAILS', array( $f_issue_id ) );\n\n# spacer\necho '<tr class=\"spacer\"><td colspan=\"6\"></td></tr>';\necho '<tr class=\"hidden\"></tr>';\n\n#\n# Bug Details (screen wide fields)\n#\n\n# Summary\nif( $t_flags['summary_show'] && isset( $t_issue['summary'] ) ) {\n\techo '<tr>';\n\techo '<th class=\"bug-summary category\">', lang_get( 'summary' ), '</th>';\n\techo '<td class=\"bug-summary\" colspan=\"5\">', bug_format_summary( $f_issue_id, SUMMARY_FIELD ), '</td>';\n\techo '</tr>';\n}\n\n# Description\nif( $t_flags['description_show'] && isset( $t_issue['description'] ) ) {\n\techo '<tr>';\n\techo '<th class=\"bug-description category\">', lang_get( 'description' ), '</th>';\n\techo '<td class=\"bug-description\" colspan=\"5\">', string_display_links( $t_issue['description'] ), '</td>';\n\techo '</tr>';\n}\n\n# Steps to Reproduce\nif( $t_flags['steps_to_reproduce_show'] && isset( $t_issue['steps_to_reproduce'] ) ) {\n\techo '<tr>';\n\techo '<th class=\"bug-steps-to-reproduce category\">', lang_get( 'steps_to_reproduce' ), '</th>';\n\techo '<td class=\"bug-steps-to-reproduce\" colspan=\"5\">', string_display_links( $t_issue['steps_to_reproduce'] ), '</td>';\n\techo '</tr>';\n}\n\n# Additional Information\nif( $t_flags['additional_information_show'] && isset( $t_issue['additional_information'] ) ) {\n\techo '<tr>';\n\techo '<th class=\"bug-additional-information category\">', lang_get( 'additional_information' ), '</th>';\n\techo '<td class=\"bug-additional-information\" colspan=\"5\">', string_display_links( $t_issue['additional_information'] ), '</td>';\n\techo '</tr>';\n}\n\n# Tagging\nif( $t_flags['tags_show'] ) {\n\techo '<tr>';\n\techo '<th class=\"bug-tags category\">', lang_get( 'tags' ), '</th>';\n\techo '<td class=\"bug-tags\" colspan=\"5\">';\n\ttag_display_attached( $f_issue_id );\n\techo '</td></tr>';\n}\n\n# Attach Tags\nif( $t_flags['tags_can_attach'] ) {\n\techo '<tr class=\"noprint\">';\n\techo '<th class=\"bug-attach-tags category\">', lang_get( 'tag_attach_long' ), '</th>';\n\techo '<td class=\"bug-attach-tags\" colspan=\"5\">';\n\tprint_tag_attach_form( $f_issue_id );\n\techo '</td></tr>';\n}\n\n# Attachments\nif( !empty( $t_result['issue']['attachments'] ) ) {\n\techo '<tr class=\"noprint\">';\n\techo '<th class=\"bug-attach-tags category\">', lang_get( 'attached_files' ), '</th>';\n\techo '<td class=\"bug-attach-tags\" colspan=\"5\">';\n\n\t$t_bug_activity_get_all_result = bug_activity_get_all( $f_issue_id, /* include_attachments */ true );\n\t$t_activities = $t_bug_activity_get_all_result['activities'];\n\t$t_security_token_attachments_delete = form_security_token( 'bug_file_delete' );\n\n\tforeach( $t_activities as $t_activity ) {\n\t\tif( $t_activity['type'] !== ENTRY_TYPE_ATTACHMENT ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tforeach( $t_activity['attachments'] as $t_attachment ) {\n\t\t\tprint_bug_attachment( $t_attachment, $t_security_token_attachments_delete );\n\t\t}\n\t}\n\n\techo '</td></tr>';\n}\n\n# spacer\necho '<tr class=\"spacer\"><td colspan=\"6\"></td></tr>';\necho '<tr class=\"hidden\"></tr>';\n\n# Custom Fields\nif( isset( $t_issue['custom_fields'] ) ) {\n\tforeach( $t_issue['custom_fields'] as $t_custom_field ) {\n\t\t$t_def = custom_field_get_definition( $t_custom_field['field']['id'] );\n\t\t$t_class = $t_def['type'] == CUSTOM_FIELD_TYPE_TEXTAREA ? ' cfdef-textarea' : '';\n\n\t\techo '<tr>';\n\t\techo '<th class=\"bug-custom-field category\">', string_attribute( lang_get_defaulted( $t_def['name'] ) ), '</th>';\n\t\techo '<td class=\"bug-custom-field' . $t_class . '\" colspan=\"5\">';\n\t\tprint_custom_field_value( $t_def, $t_custom_field['field']['id'], $f_issue_id );\n\t\techo '</td></tr>';\n\t}\n\n\t# spacer\n\techo '<tr class=\"spacer\"><td colspan=\"6\"></td></tr>';\n\techo '<tr class=\"hidden\"></tr>';\n}\n\necho '</tbody></table>';\necho '</div></div></div></div></div>';\n\n# User list sponsoring the bug\nif( $t_flags['sponsorships_show'] ) {\n\tdefine( 'BUG_SPONSORSHIP_LIST_VIEW_INC_ALLOW', true );\n\tinclude( $t_mantis_dir . 'bug_sponsorship_list_view_inc.php' );\n}\n\n# Bug Relationships\nif( $t_flags['relationships_show'] ) {\n\t/** @noinspection PhpUnhandledExceptionInspection */\n\tbug_view_relationship_view_box( $f_issue_id, /* can_update */ $t_flags['relationships_can_update'] );\n}\n\n# User list monitoring the bug\nif( $t_flags['monitor_show'] ) {\n\t$t_collapse_block = is_collapsed( 'monitoring' );\n\t$t_block_css = $t_collapse_block ? 'collapsed' : '';\n\t$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n?>\n\t<div class=\"col-md-12 col-xs-12\">\n\t<a id=\"monitors\"></a>\n\t<div class=\"space-10\"></div>\n\n\t<div id=\"monitoring\" class=\"widget-box widget-color-blue2 <?php echo $t_block_css ?>\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-users', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'users_monitoring_bug' ) ?>\n\t\t\t</h4>\n\t\t\t<div class=\"widget-toolbar\">\n\t\t\t\t<a data-action=\"collapse\" href=\"#\">\n\t\t\t\t\t<?php print_icon( $t_block_icon, '1 ace-icon bigger-125' ); ?>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main no-padding\">\n\n\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t<tr>\n\t\t<th class=\"category width-15\">\n\t\t\t<label for=\"bug_monitor_list_user_to_add\">\n\t\t\t\t<?php echo lang_get( 'monitoring_user_list' ); ?>\n\t\t\t</label>\n\t\t</th>\n\t\t<td class=\"width-85\">\n\t<?php\n\t\t\tif( !isset( $t_issue['monitors'] ) || count( $t_issue['monitors'] ) == 0 ) {\n\t\t\t\techo lang_get( 'no_users_monitoring_bug' );\n\t\t\t} else {\n\t\t\t\t$t_first_user = true;\n\t\t\t\tforeach( $t_issue['monitors'] as $t_monitor_user ) {\n\t\t\t\t\tif( $t_first_user ) {\n\t\t\t\t\t\t$t_first_user = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\techo ', ';\n\t\t\t\t\t}\n\n\t\t\t\t\tprint_user( $t_monitor_user['id'] );\n\t\t\t\t\tif( $t_flags['monitor_can_delete'] ) {\n\t\t\t\t\t\techo ' <a class=\"btn btn-xs btn-primary btn-white btn-round\" '\n\t\t\t\t\t\t\t. 'href=\"' . helper_mantis_url( 'bug_monitor_delete.php' )\n\t\t\t\t\t\t\t. '?bug_id=' . $f_issue_id . '&amp;user_id=' . $t_monitor_user['id']\n\t\t\t\t\t\t\t. htmlspecialchars(form_security_param( 'bug_monitor_delete' ))\n\t\t\t\t\t\t\t. '\">'\n\t\t\t\t\t\t\t. icon_get( 'fa-times' )\n\t\t\t\t\t\t\t. '</a>';\n\t\t\t\t\t}\n\t\t\t\t }\n\t\t\t}\n\t\n\t\t\tif( $t_flags['monitor_can_add'] ) {\n\t?>\n\t\t\t<br /><br />\n\t\t\t<form method=\"post\" action=\"bug_monitor_add.php\" class=\"form-inline noprint\">\n\t\t\t\t<?php echo form_security_field( 'bug_monitor_add' ) ?>\n\t\t\t\t<input type=\"hidden\" name=\"bug_id\" value=\"<?php echo (integer)$f_issue_id; ?>\" />\n\t\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t\t<input type=\"text\" class=\"input-sm\" id=\"bug_monitor_list_user_to_add\" name=\"user_to_add\" />\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\" value=\"<?php echo lang_get( 'add' ) ?>\" />\n\t\t\t</form>\n\t\t\t<?php } ?>\n\t\t</td>\n\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t</div>\n<?php\n}\n\n# Bugnotes and \"Add Note\" box\nif( 'ASC' == current_user_get_pref( 'bugnote_order' ) ) {\n\tdefine( 'BUGNOTE_VIEW_INC_ALLOW', true );\n\tinclude( $t_mantis_dir . 'bugnote_view_inc.php' );\n\n\tif( !$t_force_readonly ) {\n\t\tdefine( 'BUGNOTE_ADD_INC_ALLOW', true );\n\t\tinclude( $t_mantis_dir . 'bugnote_add_inc.php' );\n\t}\n} else {\n\tif( !$t_force_readonly ) {\n\t\tdefine( 'BUGNOTE_ADD_INC_ALLOW', true );\n\t\tinclude( $t_mantis_dir . 'bugnote_add_inc.php' );\n\t}\n\n\tdefine( 'BUGNOTE_VIEW_INC_ALLOW', true );\n\tinclude( $t_mantis_dir . 'bugnote_view_inc.php' );\n}\n\n# Allow plugins to display stuff after notes\nevent_signal( 'EVENT_VIEW_BUG_EXTRA', array( $f_issue_id ) );\n\n# Time tracking statistics\nif( config_get( 'time_tracking_enabled' ) &&\n\taccess_has_bug_level( config_get( 'time_tracking_view_threshold' ), $f_issue_id ) ) {\n\tdefine( 'BUGNOTE_STATS_INC_ALLOW', true );\n\tinclude( $t_mantis_dir . 'bugnote_stats_inc.php' );\n}\n\n# History\nif( $t_flags['history_show'] && $f_history ) {\n?>\n\t<div class=\"col-md-12 col-xs-12\">\n\t\t<a id=\"history\"></a>\n\t\t<div class=\"space-10\"></div>\n<?php\n\t$t_collapse_block = is_collapsed( 'history' );\n\t$t_block_css = $t_collapse_block ? 'collapsed' : '';\n\t$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n\t$t_history = history_get_events_array( $f_issue_id );\n?>\n\t\t<div id=\"history\" class=\"widget-box widget-color-blue2 <?php echo $t_block_css ?>\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-history', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'bug_history' ) ?>\n\t\t\t\t</h4>\n\t\t\t\t<div class=\"widget-toolbar\">\n\t\t\t\t\t<a data-action=\"collapse\" href=\"#\">\n\t\t\t\t\t\t<?php print_icon( $t_block_icon, '1 ace-icon bigger-125' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t\t<div class=\"table-responsive\">\n\t<table class=\"table table-bordered table-condensed table-hover table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"small-caption\">\n\t\t\t\t\t<?php echo lang_get( 'date_modified' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<th class=\"small-caption\">\n\t\t\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<th class=\"small-caption\">\n\t\t\t\t\t<?php echo lang_get( 'field' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<th class=\"small-caption\">\n\t\t\t\t\t<?php echo lang_get( 'change' ) ?>\n\t\t\t\t</th>\n\t\t\t</tr>\n\t\t</thead>\n\n\t\t<tbody>\n<?php\n\tforeach( $t_history as $t_item ) {\n?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"small-caption\">\n\t\t\t\t\t<?php echo $t_item['date'] ?>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"small-caption\">\n\t\t\t\t\t<?php print_user( $t_item['userid'] ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"small-caption\">\n\t\t\t\t\t<?php echo string_display_line( $t_item['note'] ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"small-caption\">\n\t\t\t\t\t<?php echo ( $t_item['raw'] ? string_display_line_links( $t_item['change'] ) : $t_item['change'] ) ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php\n\t} # end for loop\n?>\n\t\t</tbody>\n\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<?php\n}\n\nlayout_page_end();\n\n/**\n * Return formatted string with all the details on the requested relationship.\n *\n * @param integer             $p_bug_id       A bug identifier.\n * @param BugRelationshipData $p_relationship A bug relationship object.\n * @param boolean             $p_html_preview Whether to include\n *                                            style/hyperlinks - if preview is\n *                                            false, we prettify the output.\n * @param boolean             $p_show_project Show Project details.\n *\n * @return string\n *\n * @throws ClientException\n */\nfunction bug_view_relationship_get_details( $p_bug_id, BugRelationshipData $p_relationship, $p_html_preview = false, $p_show_project = false ) {\n\tif( $p_bug_id == $p_relationship->src_bug_id ) {\n\t\t# root bug is in the source side, related bug in the destination side\n\t\t$t_related_project_id = $p_relationship->dest_bug_id;\n\t\t$t_related_project_name = project_get_name( $p_relationship->dest_project_id );\n\t\t$t_related_bug_id = $p_relationship->dest_bug_id;\n\t\t$t_relationship_descr = relationship_get_description_src_side( $p_relationship->type );\n\t} else {\n\t\t# root bug is in the dest side, related bug in the source side\n\t\t$t_related_project_id = $p_relationship->src_bug_id;\n\t\t$t_related_bug_id = $p_relationship->src_bug_id;\n\t\t$t_related_project_name = project_get_name( $p_relationship->src_project_id );\n\t\t$t_relationship_descr = relationship_get_description_dest_side( $p_relationship->type );\n\t}\n\n\t# related bug not existing...\n\tif( !bug_exists( $t_related_bug_id ) ) {\n\t\treturn '';\n\t}\n\n\t# user can access to the related bug at least as a viewer\n\tif( !access_has_bug_level( config_get( 'view_bug_threshold', null, null, $t_related_project_id ), $t_related_bug_id ) ) {\n\t\treturn '';\n\t}\n\n\tif( !$p_html_preview ) {\n\t\t$t_td = '<td>';\n\t} else {\n\t\t$t_td = '<td class=\"print\">';\n\t}\n\n\t# get the information from the related bug and prepare the link\n\t$t_current_user_id = auth_get_current_user_id();\n\t$t_bug = bug_get( $t_related_bug_id );\n\t$t_status_string = get_enum_element( 'status', $t_bug->status, $t_current_user_id, $t_bug->project_id );\n\t$t_resolution_string = get_enum_element( 'resolution', $t_bug->resolution, $t_current_user_id, $t_bug->project_id );\n\n\t$t_relationship_info_html = $t_td . string_no_break( $t_relationship_descr ) . '&#160;</td>';\n\tif( !$p_html_preview ) {\n\t\t# choose color based on status\n\t\t$t_status_css = html_get_status_css_fg( $t_bug->status, $t_current_user_id, $t_bug->project_id );\n\t\t$t_relationship_info_html .= '<td><a href=\"' . string_get_bug_view_url( $t_related_bug_id ) . '\">' . string_display_line( bug_format_id( $t_related_bug_id ) ) . '</a></td>';\n\t\t$t_relationship_info_html .= '<td>' . icon_get( 'fa-square', 'fa-status-box ' . $t_status_css );\n\t\t$t_relationship_info_html .= ' <span class=\"issue-status\" title=\"' . string_attribute( $t_resolution_string ) . '\">' . string_display_line( $t_status_string ) . '</span></td>';\n\t} else {\n\t\t$t_relationship_info_html .= $t_td . string_display_line( bug_format_id( $t_related_bug_id ) ) . '</td>';\n\t\t$t_relationship_info_html .= $t_td . string_display_line( $t_status_string ) . '&#160;</td>';\n\t}\n\n\t# get the handler name of the related bug\n\t$t_relationship_info_html .= $t_td;\n\tif( $t_bug->handler_id > 0 ) {\n\t\t$t_relationship_info_html .= string_no_break( prepare_user_name( $t_bug->handler_id ) );\n\t}\n\n\t$t_relationship_info_html .= '&#160;</td>';\n\n\t# add project name\n\tif( $p_show_project ) {\n\t\t$t_relationship_info_html .= $t_td . string_display_line( $t_related_project_name ) . '&#160;</td>';\n\t}\n\n\t# add summary\n\t$t_relationship_info_html .= $t_td . string_display_line_links( $t_bug->summary );\n\tif( VS_PRIVATE == $t_bug->view_state ) {\n\t\t$t_relationship_info_html .= icon_get( 'fa-lock', '', lang_get( 'private' ) );\n\t}\n\n\t# add delete link if bug not read only and user has access level\n\tif( !bug_is_readonly( $p_bug_id ) && !current_user_is_anonymous() && !$p_html_preview ) {\n\t\tif( access_has_bug_level( config_get( 'update_bug_threshold' ), $p_bug_id ) ) {\n\t\t\t$t_relationship_info_html .= ' <a class=\"red noprint zoom-130\" '\n\t\t\t\t. 'href=\"bug_relationship_delete.php?bug_id=' . $p_bug_id\n\t\t\t\t. '&amp;rel_id=' . $p_relationship->id\n\t\t\t\t. htmlspecialchars( form_security_param( 'bug_relationship_delete' ) )\n\t\t\t\t. '\">'\n\t\t\t\t. icon_get( 'fa-trash-o', 'ace-icon bigger-115' )\n\t\t\t\t. '</a>';\n\t\t}\n\t}\n\n\t$t_relationship_info_html .= '&#160;</td>';\n\treturn '<tr>' . $t_relationship_info_html . '</tr>';\n}\n\n/**\n * Print all the relationships of a specific bug.\n *\n * @param integer $p_bug_id A bug identifier.\n * @return string\n *\n * @throws ClientException\n */\nfunction bug_view_relationship_get_summary_html( $p_bug_id ) {\n\t$t_summary = '';\n\n\t# A variable that will be set by the following call to indicate if relationships belong\n\t# to multiple projects.\n\t$t_show_project = false;\n\n\t$t_relationship_all = relationship_get_all( $p_bug_id, $t_show_project );\n\t$t_relationship_all_count = count( $t_relationship_all );\n\n\t# prepare the relationships table\n\tfor( $i = 0; $i < $t_relationship_all_count; $i++ ) {\n\t\t$t_summary .= bug_view_relationship_get_details( $p_bug_id, $t_relationship_all[$i], /* html_preview */ false, $t_show_project );\n\t}\n\n\tif( !is_blank( $t_summary ) ) {\n\t\tif( !relationship_can_resolve_bug( $p_bug_id ) ) {\n\t\t\t$t_summary .= '<tr><td colspan=\"' . ( 5 + $t_show_project ) . '\"><strong>' .\n\t\t\t\tlang_get( 'relationship_warning_blocking_bugs_not_resolved' ) . '</strong></td></tr>';\n\t\t}\n\t\t$t_summary = '<table class=\"table table-bordered table-condensed table-hover\">' . $t_summary . '</table>';\n\t}\n\n\treturn $t_summary;\n}\n\n/**\n * Print HTML relationship form.\n *\n * @param integer $p_bug_id     A bug identifier.\n * @param bool    $p_can_update Can update relationships?\n * @return void\n *\n * @throws ClientException\n */\nfunction bug_view_relationship_view_box( $p_bug_id, $p_can_update ) {\n\t$t_relationships_html = bug_view_relationship_get_summary_html( $p_bug_id );\n\n\tif( !$p_can_update && empty( $t_relationships_html ) ) {\n\t\treturn;\n\t}\n\n\t$t_relationship_graph = ON == config_get( 'relationship_graph_enable' );\n\t$t_event_buttons = event_signal( 'EVENT_MENU_ISSUE_RELATIONSHIP', $p_bug_id );\n\t$t_show_top_div = $p_can_update || $t_relationship_graph || !empty( $t_event_buttons );\n?>\n\t<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n<?php\n\t$t_collapse_block = is_collapsed( 'relationships' );\n\t$t_block_css = $t_collapse_block ? 'collapsed' : '';\n\t$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n?>\n\t<div id=\"relationships\" class=\"widget-box widget-color-blue2 <?php echo $t_block_css ?>\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-sitemap', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'bug_relationships' ) ?>\n\t\t</h4>\n\t\t<div class=\"widget-toolbar\">\n\t\t\t<a data-action=\"collapse\" href=\"#\">\n\t\t\t\t<?php print_icon( $t_block_icon, '1 ace-icon bigger-125' ); ?>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\t<div class=\"widget-body\">\n<?php\n\tif( $t_show_top_div ) {\n?>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n<?php\n\t\t# Default relationship buttons\n\t\t$t_buttons = array();\n\t\tif( $t_relationship_graph ) {\n\t\t\t$t_buttons[lang_get( 'relation_graph' )] =\n\t\t\t\t'bug_relationship_graph.php?bug_id=' . $p_bug_id . '&graph=relation';\n\t\t\t$t_buttons[lang_get( 'dependency_graph' )] =\n\t\t\t\t'bug_relationship_graph.php?bug_id=' . $p_bug_id . '&graph=dependency';\n\t\t}\n\n\t\t# Plugin-added buttons\n\t\tforeach( $t_event_buttons as $t_plugin_buttons ) {\n\t\t\tforeach( $t_plugin_buttons as $t_callback_buttons ) {\n\t\t\t\tif( is_array( $t_callback_buttons ) ) {\n\t\t\t\t\t$t_buttons = array_merge( $t_buttons, $t_callback_buttons );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n?>\n\t\t<div class=\"btn-group pull-right noprint\">\n<?php\n\t\t# Print the buttons, if any\n\t\tforeach( $t_buttons as $t_label => $t_url ) {\n\t\t\tprint_small_button( $t_url, $t_label );\n\t\t}\n?>\n\t\t</div>\n\n<?php\n\t\tif( $p_can_update ) {\n?>\n\t\t<form method=\"post\" action=\"bug_relationship_add.php\" class=\"form-inline noprint\">\n\t\t\t<?php echo form_security_field( 'bug_relationship_add' ) ?>\n\t\t\t<input type=\"hidden\" name=\"src_bug_id\" value=\"<?php echo $p_bug_id?>\" />\n\t\t\t<label class=\"inline\"><?php echo lang_get( 'this_bug' ) ?>&#160;&#160;</label>\n\t\t\t<?php print_relationship_list_box( config_get( 'default_bug_relationship' ) )?>\n\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t<input type=\"text\" class=\"input-sm\" name=\"dest_bug_id\" value=\"\" />\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\"\n\t\t\t\t   name=\"add_relationship\" value=\"<?php echo lang_get( 'add' )?>\" />\n\t\t</form>\n<?php\n\t\t} # can update\n?>\n\t\t</div>\n<?php\n\t} # show top div\n?>\n\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div class=\"table-responsive\">\n\t\t\t\t<?php echo $t_relationships_html; ?>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t</div>\n\t</div>\n<?php\n}\n\n/**\n * Print Change Status to: button\n * This code is similar to print_status_option_list except\n * there is no masking, except for the current state\n *\n * @param BugData $p_bug A valid bug object.\n *\n * @return void\n *\n * @throws ClientException\n */\nfunction bug_view_button_bug_change_status( BugData $p_bug ) {\n\t$t_current_access = access_get_project_level( $p_bug->project_id );\n\n\t$t_enum_list = get_status_option_list(\n\t\t$t_current_access,\n\t\t$p_bug->status,\n\t\tfalse,\n\t\t# Add close if user is bug's reporter, still has rights to report issues\n\t\t# (to prevent users downgraded to viewers from updating issues) and\n\t\t# reporters are allowed to close their own issues\n\t\t(  bug_is_user_reporter( $p_bug->id, auth_get_current_user_id() )\n\t\t&& access_has_bug_level( config_get( 'report_bug_threshold' ), $p_bug->id )\n\t\t&& ON == config_get( 'allow_reporter_close' )\n\t\t),\n\t\t$p_bug->project_id );\n\n\tif( count( $t_enum_list ) > 0 ) {\n\t\t# resort the list into ascending order after noting the key from the first element (the default)\n\t\t$t_default = key( $t_enum_list );\n\t\tksort( $t_enum_list );\n\n\t\techo '<form method=\"post\" action=\"bug_change_status_page.php\" class=\"form-inline\">';\n\t\t# CSRF protection not required here - form does not result in modifications\n\n\t\t$t_button_text = lang_get( 'bug_status_to_button' );\n\t\techo '<input type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\" value=\"' . $t_button_text . '\" />';\n\n\t\techo ' <select name=\"new_status\" class=\"input-sm\">';\n\n\t\t# space at beginning of line is important\n\t\tforeach( $t_enum_list as $t_key => $t_val ) {\n\t\t\techo '<option value=\"' . $t_key . '\" ';\n\t\t\tcheck_selected( $t_key, $t_default );\n\t\t\techo '>' . $t_val . '</option>';\n\t\t}\n\t\techo '</select>';\n\n\t\t$t_bug_id = string_attribute( $p_bug->id );\n\t\techo '<input type=\"hidden\" name=\"id\" value=\"' . $t_bug_id . '\" />' . \"\\n\";\n\t\techo '<input type=\"hidden\" name=\"change_type\" value=\"' . BUG_UPDATE_TYPE_CHANGE_STATUS . '\" />' . \"\\n\";\n\n\t\techo '</form>' . \"\\n\";\n\t}\n}\n\n/**\n * Print Assign To: combo box of possible handlers.\n *\n * @param BugData $p_bug Bug object.\n *\n * @return void\n *\n * @throws ClientException\n */\nfunction bug_view_button_bug_assign_to( BugData $p_bug ) {\n\t$t_current_user_id = auth_get_current_user_id();\n\t$t_options = array();\n\t$t_default_assign_to = null;\n\n\tif( ( $p_bug->handler_id != $t_current_user_id )\n\t\t&& access_has_bug_level( config_get( 'handle_bug_threshold' ), $p_bug->id, $t_current_user_id )\n\t) {\n\t\t$t_options[] = array(\n\t\t\t$t_current_user_id,\n\t\t\t'[' . lang_get( 'myself' ) . ']',\n\t\t);\n\t\t$t_default_assign_to = $t_current_user_id;\n\t}\n\n\tif( ( $p_bug->handler_id != $p_bug->reporter_id )\n\t\t&& user_exists( $p_bug->reporter_id )\n\t\t&& access_has_bug_level( config_get( 'handle_bug_threshold' ), $p_bug->id, $p_bug->reporter_id )\n\t) {\n\t\t$t_options[] = array(\n\t\t\t$p_bug->reporter_id,\n\t\t\t'[' . lang_get( 'reporter' ) . ']',\n\t\t);\n\n\t\tif( $t_default_assign_to === null ) {\n\t\t\t$t_default_assign_to = $p_bug->reporter_id;\n\t\t}\n\t}\n\n\techo '<form method=\"post\" action=\"bug_update.php\" class=\"form-inline\">';\n\techo form_security_field( 'bug_update' );\n\techo '<input type=\"hidden\" name=\"last_updated\" value=\"' . $p_bug->last_updated . '\" />';\n\techo '<input type=\"hidden\" name=\"action_type\" value=\"' . BUG_UPDATE_TYPE_ASSIGN . '\" />';\n\n\t$t_button_text = lang_get( 'bug_assign_to_button' );\n\techo '<input type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\" value=\"' . $t_button_text . '\" />';\n\n\techo ' <select class=\"input-sm\" name=\"handler_id\">';\n\n\t# space at beginning of line is important\n\n\t$t_already_selected = false;\n\n\tforeach( $t_options as $t_entry ) {\n\t\t$t_id = (int)$t_entry[0];\n\t\t$t_caption = string_attribute( $t_entry[1] );\n\n\t\t# if current user and reporter can't be selected, then select the first\n\t\t# user in the list.\n\t\tif( $t_default_assign_to === null ) {\n\t\t\t$t_default_assign_to = $t_id;\n\t\t}\n\n\t\techo '<option value=\"' . $t_id . '\" ';\n\n\t\tif( ( $t_id == $t_default_assign_to ) && !$t_already_selected ) {\n\t\t\tcheck_selected( $t_id, $t_default_assign_to );\n\t\t\t$t_already_selected = true;\n\t\t}\n\n\t\techo '>' . $t_caption . '</option>';\n\t}\n\n\t# allow un-assigning if already assigned.\n\tif( $p_bug->handler_id != 0 ) {\n\t\techo '<option value=\"0\"></option>';\n\t}\n\n\t# 0 means currently selected\n\tprint_assign_to_option_list( 0, $p_bug->project_id );\n\techo '</select>';\n\n\t$t_bug_id = string_attribute( $p_bug->id );\n\techo '<input type=\"hidden\" name=\"bug_id\" value=\"' . $t_bug_id . '\" />' . \"\\n\";\n\n\techo '</form>' . \"\\n\";\n}\n\n/**\n * Print all buttons for view bug pages.\n *\n * @param integer $p_bug_id A valid bug identifier.\n * @param array   $p_flags  Flags from issue view command\n *\n * @return void\n *\n * @throws ClientException\n */\nfunction bug_view_action_buttons( $p_bug_id, $p_flags ) {\n\t$t_bug = bug_get( $p_bug_id );\n\n\techo '<div class=\"btn-group\">';\n\t# UPDATE button\n\tif( $p_flags['can_update'] ) {\n\t\techo '<div class=\"pull-left padding-right-8\">';\n\t\thtml_button( string_get_bug_update_page(), lang_get( 'edit' ), array( 'bug_id' => $p_bug_id ) );\n\t\techo '</div>';\n\t}\n\n\t# ASSIGN button\n\tif( $p_flags['can_assign'] ) {\n\t\techo '<div class=\"pull-left padding-right-8\">';\n\t\tbug_view_button_bug_assign_to( $t_bug );\n\t\techo '</div>';\n\t}\n\n\t# Change status button/dropdown\n\tif( $p_flags['can_change_status'] ) {\n\t\techo '<div class=\"pull-left padding-right-8\">';\n\t\tbug_view_button_bug_change_status( $t_bug );\n\t\techo '</div>';\n\t}\n\n\t# Unmonitor\n\tif( $p_flags['can_unmonitor'] ) {\n\t\techo '<div class=\"pull-left padding-right-2\">';\n\t\thtml_button( 'bug_monitor_delete.php', lang_get( 'unmonitor_bug_button' ), array( 'bug_id' => $p_bug_id ) );\n\t\techo '</div>';\n\t}\n\n\t# Monitor\n\tif( $p_flags['can_monitor'] ) {\n\t\techo '<div class=\"pull-left padding-right-2\">';\n\t\thtml_button( 'bug_monitor_add.php', lang_get( 'monitor_bug_button' ), array( 'bug_id' => $p_bug_id ) );\n\t\techo '</div>';\n\t}\n\n\t# Stick\n\tif( $p_flags['can_sticky'] ) {\n\t\techo '<div class=\"pull-left padding-right-2\">';\n\t\thtml_button( 'bug_stick.php', lang_get( 'stick_bug_button' ), array( 'bug_id' => $p_bug_id, 'action' => 'stick' ) );\n\t\techo '</div>';\n\t}\n\n\t# Unstick\n\tif( $p_flags['can_unsticky'] ) {\n\t\techo '<div class=\"pull-left padding-right-2\">';\n\t\thtml_button( 'bug_stick.php', lang_get( 'unstick_bug_button' ), array( 'bug_id' => $p_bug_id, 'action' => 'unstick' ) );\n\t\techo '</div>';\n\t}\n\n\t# CLONE button\n\tif( $p_flags['can_clone'] ) {\n\t\techo '<div class=\"pull-left padding-right-2\">';\n\t\thtml_button( string_get_bug_report_url(), lang_get( 'create_child_bug_button' ), array( 'm_id' => $p_bug_id ) );\n\t\techo '</div>';\n\t}\n\n\t# REOPEN button\n\tif( $p_flags['can_reopen'] ) {\n\t\techo '<div class=\"pull-left padding-right-2\">';\n\t\t$t_reopen_status = config_get( 'bug_reopen_status', null, null, $t_bug->project_id );\n\t\thtml_button(\n\t\t\t'bug_change_status_page.php',\n\t\t\tlang_get( 'reopen_bug_button' ),\n\t\t\tarray( 'id' => $t_bug->id, 'new_status' => $t_reopen_status, 'change_type' => BUG_UPDATE_TYPE_REOPEN ) );\n\t\techo '</div>';\n\t}\n\n\t# CLOSE button\n\tif( $p_flags['can_close'] ) {\n\t\t$t_closed_status = config_get( 'bug_closed_status_threshold', null, null, $t_bug->project_id );\n\t\techo '<div class=\"pull-left padding-right-2\">';\n\t\thtml_button(\n\t\t\t'bug_change_status_page.php',\n\t\t\tlang_get( 'close' ),\n\t\t\tarray( 'id' => $t_bug->id, 'new_status' => $t_closed_status, 'change_type' => BUG_UPDATE_TYPE_CLOSE ) );\n\t\techo '</div>';\n\t}\n\n\t# MOVE button\n\tif( $p_flags['can_move'] ) {\n\t\techo '<div class=\"pull-left padding-right-2\">';\n\t\thtml_button( 'bug_actiongroup_page.php', lang_get( 'move' ), array( 'bug_arr[]' => $p_bug_id, 'action' => 'MOVE' ) );\n\t\techo '</div>';\n\t}\n\n\t# DELETE button\n\tif( $p_flags['can_delete'] ) {\n\t\techo '<div class=\"pull-left padding-right-2\">';\n\t\thtml_button( 'bug_actiongroup_page.php', lang_get( 'delete' ), array( 'bug_arr[]' => $p_bug_id, 'action' => 'DELETE' ) );\n\t\techo '</div>';\n\t}\n\n\thelper_call_custom_function( 'print_bug_view_page_custom_buttons', array( $p_bug_id ) );\n\n\techo '</div>';\n}\n\n"
        },
        {
          "name": "bug_view_page.php",
          "type": "blob",
          "size": 1.1220703125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * View an individual Bug\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses gpc_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'gpc_api.php' );\n\n# Copy 'bug_id' parameter into 'id' so it is found by the view page.\n$_GET['id'] = gpc_get_int( 'bug_id' );\n\ninclude 'view.php';\n"
        },
        {
          "name": "bugnote_add.php",
          "type": "blob",
          "size": 1.916015625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Insert the bugnote into the database then redirect to the bug page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'bugnote_add' );\n\n$f_bug_id = gpc_get_int( 'bug_id' );\n$f_text = gpc_get_string( 'bugnote_text', '' );\n$f_duration = gpc_get_string( 'time_tracking', '0:00' );\n$f_files = gpc_get_file( 'ufile', array() );\n\n$t_query = array( 'issue_id' => $f_bug_id );\n\n$t_payload = array(\n\t'text' => $f_text,\n\t'view_state' => array(\n\t\t'id' => gpc_get_bool( 'private' ) ? VS_PRIVATE : VS_PUBLIC\n\t),\n\t'time_tracking' => array(\n\t\t'duration' => $f_duration\n\t),\n\t'files' => helper_array_transpose( $f_files )\n);\n\n$t_data = array(\n\t'query' => $t_query,\n\t'payload' => $t_payload,\n);\n\n$t_command = new IssueNoteAddCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'bugnote_add' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "bugnote_add_inc.php",
          "type": "blob",
          "size": 6.0400390625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Bugnote add include file\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses access_api.php\n * @uses bug_api.php\n * @uses collapse_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n */\n\nif( !defined( 'BUGNOTE_ADD_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'collapse_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\n\n?>\n<?php if( ( !bug_is_readonly( $f_bug_id ) ) &&\n\t\t( access_has_bug_level( config_get( 'add_bugnote_threshold' ), $f_bug_id ) ) ) { ?>\n<?php # Bugnote Add Form BEGIN ?>\n\n<div class=\"col-md-12 col-xs-12 noprint\">\n<a id=\"addbugnote\"></a>\n<div class=\"space-10\"></div>\n\n<?php\n\t$t_collapse_block = is_collapsed( 'bugnote_add' );\n\t$t_block_css = $t_collapse_block ? 'collapsed' : '';\n\t$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n\t$t_allow_file_upload = file_allow_bug_upload( $f_bug_id );\n?>\n<form id=\"bugnoteadd\"\n\tmethod=\"post\"\n\taction=\"bugnote_add.php\"\n\tenctype=\"multipart/form-data\"\n\t>\n\t<?php echo form_security_field( 'bugnote_add' ) ?>\n\t<input type=\"hidden\" name=\"bug_id\" value=\"<?php echo $f_bug_id ?>\" />\n\t<div id=\"bugnote_add\" class=\"widget-box widget-color-blue2 <?php echo $t_block_css ?>\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-comment', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'add_bugnote_title' ) ?>\n\t\t\t</h4>\n\t\t\t<div class=\"widget-toolbar\">\n\t\t\t\t<a data-action=\"collapse\" href=\"#\">\n\t\t\t\t\t<?php print_icon( $t_block_icon, '1 ace-icon bigger-125' ); ?>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed\">\n\t\t<tbody>\n\n<?php\n\t$t_default_bugnote_view_status = config_get( 'default_bugnote_view_status' );\n\t$t_bugnote_private = $t_default_bugnote_view_status == VS_PRIVATE;\n\t$t_bugnote_class = $t_bugnote_private ? 'form-control bugnote-private' : 'form-control';\n\n\tif( access_has_bug_level( config_get( 'set_view_status_threshold' ), $f_bug_id ) ) {\n?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t<label for=\"bugnote_add_view_status\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"bugnote_add_view_status\" name=\"private\" <?php check_checked( $t_default_bugnote_view_status, VS_PRIVATE ); ?> />\n\t\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'private' ) ?></span>\n\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php }?>\n\n\t\t\t<tr>\n\t\t\t\t<th class=\"category width-15\">\n\t\t\t\t\t<?php echo lang_get( 'bugnote' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td class=\"width-85\">\n\t\t\t\t\t<textarea name=\"bugnote_text\" id=\"bugnote_text\" class=\"<?php echo $t_bugnote_class ?>\" rows=\"7\"></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n<?php\n\tif( config_get( 'time_tracking_enabled' ) ) {\n\t\tif( access_has_bug_level( config_get( 'time_tracking_edit_threshold' ), $f_bug_id ) ) {\n?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'time_tracking' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<?php if( config_get( 'time_tracking_stopwatch' ) ) { ?>\n\t\t\t\t\t<input type=\"text\" name=\"time_tracking\" class=\"stopwatch_time input-sm\" size=\"8\" placeholder=\"hh:mm:ss\" />\n\t\t\t\t\t<input type=\"button\" name=\"time_tracking_toggle\" class=\"stopwatch_toggle btn btn-sm btn-white btn-round\" value=\"<?php echo lang_get( 'time_tracking_stopwatch_start' ) ?>\" />\n\t\t\t\t\t<input type=\"button\" name=\"time_tracking_reset\" class=\"stopwatch_reset btn btn-sm btn-white btn-round\" value=\"<?php echo lang_get( 'time_tracking_stopwatch_reset' ) ?>\" />\n\t\t\t\t\t<?php } else { ?>\n\t\t\t\t\t<input type=\"text\" name=\"time_tracking\" class=\"input-sm\" size=\"5\" placeholder=\"hh:mm\" />\n\t\t\t\t\t<?php } ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php\n\t\t}\n\t}\n\n\tif( $t_allow_file_upload ) {\n\t\t$t_file_upload_max_num = max( 1, config_get( 'file_upload_max_num' ) );\n\t\t$t_max_file_size = file_get_max_file_size();\n?>\n\t\t\t<tr id=\"bugnote-attach-files\">\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( $t_file_upload_max_num == 1 ? 'upload_file' : 'upload_files' ) ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<?php print_max_filesize( $t_max_file_size ); ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<?php print_dropzone_template() ?>\n\t\t\t\t\t<input type=\"hidden\" name=\"max_file_size\" value=\"<?php echo $t_max_file_size ?>\" />\n\t\t\t\t\t<div class=\"dropzone center\" <?php print_dropzone_form_data() ?>>\n\t\t\t\t\t\t<?php print_icon( 'fa-cloud-upload', 'upload-icon ace-icon blue fa-3x' ); ?>\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t<span class=\"bigger-150 grey\"><?php echo lang_get( 'dropzone_default_message' ) ?></span>\n\t\t\t\t\t\t<div id=\"dropzone-previews-box\" class=\"dz dropzone-previews dz-max-files-reached\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"fallback\">\n\t\t\t\t\t\t<input id=\"ufile[]\" name=\"ufile[]\" type=\"file\" size=\"50\" />\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php\n\t}\n\n\tevent_signal( 'EVENT_BUGNOTE_ADD_FORM', array( $f_bug_id ) );\n?>\n\t\t</tbody>\n</table>\n</div>\n</div>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'add_bugnote_button' ) ?>\" />\n\t</div>\n</div>\n</div>\n</form>\n</div>\n<?php\n}\n"
        },
        {
          "name": "bugnote_delete.php",
          "type": "blob",
          "size": 1.68359375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Remove the bugnote and bugnote text and redirect back to\n * the viewing page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'bugnote_delete' );\n\n$f_bugnote_id = gpc_get_int( 'bugnote_id' );\n\nhelper_ensure_confirmed( lang_get( 'delete_bugnote_sure_msg' ),\n\t\t\t\t\t\t lang_get( 'delete_bugnote_button' ) );\n\n$t_data = array( 'query' => array( 'id' => $f_bugnote_id  ) );\n\n$t_command = new IssueNoteDeleteCommand( $t_data );\n$t_result = $t_command->execute();\n\nform_security_purge( 'bugnote_delete' );\n\nprint_header_redirect( string_get_bug_view_url( $t_result['issue_id'] ) . '#bugnotes' );\n"
        },
        {
          "name": "bugnote_edit_page.php",
          "type": "blob",
          "size": 5.3701171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * CALLERS\n *\tThis page is submitted to by the following pages:\n *\t- bugnote_inc.php\n *\n * EXPECTED BEHAVIOUR\n *\tAllow the user to modify the text of a bugnote, then submit to\n *\tbugnote_update.php with the new text\n *\n * RESTRICTIONS & PERMISSIONS\n *\t- none beyond API restrictions\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bugnote_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses error_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\n$f_bugnote_id = gpc_get_int( 'bugnote_id' );\n$t_bug_id = bugnote_get_field( $f_bugnote_id, 'bug_id' );\n\n$t_bug = bug_get( $t_bug_id, true );\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\n# Check if the current user is allowed to edit the bugnote\n$t_user_id = auth_get_current_user_id();\n$t_reporter_id = bugnote_get_field( $f_bugnote_id, 'reporter_id' );\n\nif( $t_user_id == $t_reporter_id ) {\n\taccess_ensure_bugnote_level( config_get( 'bugnote_user_edit_threshold' ), $f_bugnote_id );\n} else {\n\taccess_ensure_bugnote_level( config_get( 'update_bugnote_threshold' ), $f_bugnote_id );\n}\n\n# Check if the bug is readonly\nif( bug_is_readonly( $t_bug_id ) ) {\n\terror_parameters( $t_bug_id );\n\ttrigger_error( ERROR_BUG_READ_ONLY_ACTION_DENIED, ERROR );\n}\n\n$t_bugnote_text = string_textarea( bugnote_get_text( $f_bugnote_id ) );\n\n# No need to gather the extra information if not used\nif( config_get( 'time_tracking_enabled' ) &&\n\taccess_has_bug_level( config_get( 'time_tracking_edit_threshold' ), $t_bug_id ) ) {\n\t$t_time_tracking = bugnote_get_field( $f_bugnote_id, 'time_tracking' );\n\t$t_time_tracking = db_minutes_to_hhmm( $t_time_tracking );\n}\n\n# Determine which view page to redirect back to.\n$t_redirect_url = string_get_bug_view_url( $t_bug_id );\n\nlayout_page_header( bug_format_summary( $t_bug_id, SUMMARY_CAPTION ) );\n\nlayout_page_begin();\n\n$t_bugnote_class = bugnote_get_field( $f_bugnote_id, 'view_state' ) == VS_PUBLIC ? '' : 'bugnote-private';\n?>\n<div class=\"col-md-12 col-xs-12\">\n\n<form method=\"post\" action=\"bugnote_update.php\">\n<?php echo form_security_field( 'bugnote_update' ) ?>\n<input type=\"hidden\" name=\"bugnote_id\" value=\"<?php echo $f_bugnote_id ?>\" />\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-comment', 'ace-icon' ); ?>\n\t\t<?php echo lang_get( 'edit_bugnote_title' ) ?>\n\t</h4>\n\t</div>\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-condensed table-striped\">\n<tr>\n\t<td colspan=\"2\">\n\t\t<textarea class=\"form-control <?php echo $t_bugnote_class; ?>\" cols=\"80\" rows=\"10\" name=\"bugnote_text\"\n\t\tid=\"bugnote_text\"><?php echo $t_bugnote_text ?></textarea>\n\t</td>\n</tr>\n<?php if( config_get( 'time_tracking_enabled' ) ) { ?>\n<?php if( access_has_bug_level( config_get( 'time_tracking_edit_threshold' ), $t_bug_id ) ) { ?>\n<tr>\n\t<td class=\"center\" colspan=\"2\">\n\t\t<strong><?php echo lang_get( 'time_tracking' ) ?> (HH:MM)</strong><br />\n\t\t<input type=\"text\" name=\"time_tracking\" class=\"input-sm\" size=\"5\" value=\"<?php echo $t_time_tracking ?>\" />\n\t</td>\n</tr>\n<?php } ?>\n<?php } ?>\n\n<?php event_signal( 'EVENT_BUGNOTE_EDIT_FORM', array( $t_bug_id, $f_bugnote_id ) ); ?>\n\n</table>\n\t</div>\n\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'update_information_button' ) ?>\" />\n\t\t\t<?php print_link_button( $t_redirect_url, lang_get( 'go_back' ) ) ?>\n\t\t</div>\n\t</div>\n</div>\n</form>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "bugnote_set_view_state.php",
          "type": "blob",
          "size": 3.0869140625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Set an existing bugnote private or public.\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bug_activity_api.php\n * @uses bugnote_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses error_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_activity_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'bugnote_set_view_state' );\n\n$f_bugnote_id\t= gpc_get_int( 'bugnote_id' );\n$f_private\t\t= gpc_get_bool( 'private' );\n\n$t_bug_id = bugnote_get_field( $f_bugnote_id, 'bug_id' );\n\n$t_bug = bug_get( $t_bug_id, true );\nif( $t_bug->project_id != helper_get_current_project() ) {\n\t# in case the current project is not the same project of the bug we are viewing...\n\t# ... override the current project. This to avoid problems with categories and handlers lists etc.\n\t$g_project_override = $t_bug->project_id;\n}\n\n# Check if the bug is readonly\nif( bug_is_readonly( $t_bug_id ) ) {\n\terror_parameters( $t_bug_id );\n\ttrigger_error( ERROR_BUG_READ_ONLY_ACTION_DENIED, ERROR );\n}\n\n# Check if the current user is allowed to change the view state of this bugnote\n$t_user_id = bugnote_get_field( $f_bugnote_id, 'reporter_id' );\nif( $t_user_id == auth_get_current_user_id() ) {\n\taccess_ensure_bugnote_level( config_get( 'bugnote_user_change_view_state_threshold' ), $f_bugnote_id );\n} else {\n\taccess_ensure_bugnote_level( config_get( 'update_bugnote_threshold' ), $f_bugnote_id );\n\taccess_ensure_bugnote_level( config_get( 'change_view_status_threshold' ), $f_bugnote_id );\n}\n\nbug_activity_bugnote_link_attachments( $f_bugnote_id );\nbugnote_set_view_state( $f_bugnote_id, $f_private );\n\nform_security_purge( 'bugnote_set_view_state' );\n\nprint_header_redirect( string_get_bug_view_url( $t_bug_id ) . '#bugnotes' );\n"
        },
        {
          "name": "bugnote_stats_inc.php",
          "type": "blob",
          "size": 6.7255859375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This include file prints out the bug bugnote_stats\n * $f_bug_id must already be defined\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses bugnote_api.php\n * @uses collapse_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses filter_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses utility_api.php\n */\n\nif( !defined( 'BUGNOTE_STATS_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'collapse_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'utility_api.php' );\n\nif( OFF == config_get( 'time_tracking_enabled' ) ) {\n\treturn;\n}\n?>\n\n<?php\n\n$t_bugnote_stats_from_def = date( 'd:m:Y', $t_bug->date_submitted );\n$t_bugnote_stats_from_def_ar = explode( ':', $t_bugnote_stats_from_def );\n$t_bugnote_stats_from_def_d = $t_bugnote_stats_from_def_ar[0];\n$t_bugnote_stats_from_def_m = $t_bugnote_stats_from_def_ar[1];\n$t_bugnote_stats_from_def_y = $t_bugnote_stats_from_def_ar[2];\n\n$t_bugnote_stats_from_d = gpc_get_string( FILTER_PROPERTY_DATE_SUBMITTED_START_DAY, $t_bugnote_stats_from_def_d );\n$t_bugnote_stats_from_m = gpc_get_string( FILTER_PROPERTY_DATE_SUBMITTED_START_MONTH, $t_bugnote_stats_from_def_m );\n$t_bugnote_stats_from_y = gpc_get_string( FILTER_PROPERTY_DATE_SUBMITTED_START_YEAR, $t_bugnote_stats_from_def_y );\n\n$t_bugnote_stats_to_def = date( 'd:m:Y' );\n$t_bugnote_stats_to_def_ar = explode( ':', $t_bugnote_stats_to_def );\n$t_bugnote_stats_to_def_d = $t_bugnote_stats_to_def_ar[0];\n$t_bugnote_stats_to_def_m = $t_bugnote_stats_to_def_ar[1];\n$t_bugnote_stats_to_def_y = $t_bugnote_stats_to_def_ar[2];\n\n$t_bugnote_stats_to_d = gpc_get_string( FILTER_PROPERTY_DATE_SUBMITTED_END_DAY, $t_bugnote_stats_to_def_d );\n$t_bugnote_stats_to_m = gpc_get_string( FILTER_PROPERTY_DATE_SUBMITTED_END_MONTH, $t_bugnote_stats_to_def_m );\n$t_bugnote_stats_to_y = gpc_get_string( FILTER_PROPERTY_DATE_SUBMITTED_END_YEAR, $t_bugnote_stats_to_def_y );\n\n$f_get_bugnote_stats_button = gpc_get_string( 'get_bugnote_stats_button', '' );\n\n$t_collapse_block = is_collapsed( 'bugnotestats' );\n$t_block_css = $t_collapse_block ? 'collapsed' : '';\n$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n\n# Time tracking date range input form\n# CSRF protection not required here - form does not result in modifications\n?>\n<div class=\"col-md-12 col-xs-12 noprint\">\n\t<a id=\"bugnotestats\"></a>\n\t<div class=\"space-10\"></div>\n\t<div id=\"bugnotestats\" class=\"widget-box widget-color-blue2 <?php echo $t_block_css ?>\">\n\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-clock-o', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'time_tracking' ) ?>\n\t\t\t</h4>\n\t\t\t<div class=\"widget-toolbar\">\n\t\t\t\t<a data-action=\"collapse\" href=\"#\">\n\t\t\t\t\t<?php print_icon( $t_block_icon, '1 ace-icon bigger-125' ); ?>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<form method=\"post\" action=\"#bugnotestats\">\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main\">\n\t\t\t\t\t<input type=\"hidden\" name=\"id\" value=\"<?php echo $f_bug_id ?>\" />\n\t\t\t\t\t<?php\n\t\t\t\t\t\t$t_filter = array();\n\t\t\t\t\t\t$t_filter[FILTER_PROPERTY_FILTER_BY_DATE_SUBMITTED] = 'on';\n\t\t\t\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_START_DAY] = $t_bugnote_stats_from_d;\n\t\t\t\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_START_MONTH] = $t_bugnote_stats_from_m;\n\t\t\t\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_START_YEAR] = $t_bugnote_stats_from_y;\n\t\t\t\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_END_DAY] = $t_bugnote_stats_to_d;\n\t\t\t\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_END_MONTH] = $t_bugnote_stats_to_m;\n\t\t\t\t\t\t$t_filter[FILTER_PROPERTY_DATE_SUBMITTED_END_YEAR] = $t_bugnote_stats_to_y;\n\t\t\t\t\t\tfilter_init( $t_filter );\n\t\t\t\t\t\tprint_filter_do_filter_by_date( true );\n\t\t\t\t\t?>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t<input name=\"get_bugnote_stats_button\" class=\"btn btn-primary btn-sm btn-white btn-round\"\n\t\t\t\t\t\t   value=\"<?php echo lang_get( 'time_tracking_get_info_button' ) ?>\" type=\"submit\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n<?php\n\t# Print time tracking information if requested\n\tif( !is_blank( $f_get_bugnote_stats_button ) ) {\n\t\t# Retrieve time tracking information\n\t\t$t_from = $t_bugnote_stats_from_y . '-' . $t_bugnote_stats_from_m . '-' . $t_bugnote_stats_from_d;\n\t\t$t_to = $t_bugnote_stats_to_y . '-' . $t_bugnote_stats_to_m . '-' . $t_bugnote_stats_to_d;\n\t\t$t_bugnote_stats = bugnote_stats_get_events_array( $f_bug_id, $t_from, $t_to );\n\n\t\t# Sort the array by user name\n\t\t$t_sort_name = array();\n\t\tforeach ( $t_bugnote_stats as $t_key => $t_item ) {\n\t\t\t$t_sort_name[$t_key] = user_get_name_for_sorting_from_row( $t_item );\n\t\t}\n\n\t\tarray_multisort( $t_sort_name, $t_bugnote_stats );\n\t\tunset( $t_sort_name );\n?>\n\n\t\t\t<div class=\"space-10\"></div>\n\t\t\t<div class=\"table-responsive\">\n\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"small-caption align-left\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"small-caption align-left\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'time_tracking' ) ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t<?php\n\t\t\t\t\t\t# Loop on all time tracking entries\n\t\t\t\t\t\t$t_sum_in_minutes = 0;\n\t\t\t\t\t\tforeach ( $t_bugnote_stats as $t_item ) {\n\t\t\t\t\t\t\t$t_sum_in_minutes += $t_item['sum_time_tracking'];\n\t\t\t\t\t\t\t$t_item['sum_time_tracking'] = db_minutes_to_hhmm( $t_item['sum_time_tracking'] );\n\t\t\t\t?>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"small-caption\">\n\t\t\t\t\t\t\t<?php print_user( $t_item['user_id'] ) ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"small-caption\">\n\t\t\t\t\t\t\t<?php echo $t_item['sum_time_tracking'] ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t<?php\n\t\t\t\t\t\t} # end for loop\n\t\t\t\t?>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"small-caption\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'total_time' ) ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"small-caption\">\n\t\t\t\t\t\t\t<?php echo db_minutes_to_hhmm( $t_sum_in_minutes ) ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n<?php\n\t} # end if\n?>\n\t</div>\n</div>\n\n"
        },
        {
          "name": "bugnote_update.php",
          "type": "blob",
          "size": 3.025390625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update bugnote data then redirect to the appropriate viewing page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bugnote_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses error_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'helper_api.php' );\n\nform_security_validate( 'bugnote_update' );\n\n$f_bugnote_id\t = gpc_get_int( 'bugnote_id' );\n$f_bugnote_text\t = gpc_get_string( 'bugnote_text', '' );\n$f_time_tracking = gpc_get_string( 'time_tracking', '0:00' );\n\n# Check if the current user is allowed to edit the bugnote\n$t_user_id = auth_get_current_user_id();\n$t_reporter_id = bugnote_get_field( $f_bugnote_id, 'reporter_id' );\n$t_bug_id = bugnote_get_field( $f_bugnote_id, 'bug_id' );\n$t_project_id = bug_get_field( $t_bug_id, 'project_id' );\n\nif( helper_get_current_project() != $t_project_id ) {\n\t$g_project_override = $t_project_id;\n}\n\nif( $t_user_id == $t_reporter_id ) {\n\taccess_ensure_bugnote_level( config_get( 'bugnote_user_edit_threshold' ), $f_bugnote_id );\n} else {\n\taccess_ensure_bugnote_level( config_get( 'update_bugnote_threshold' ), $f_bugnote_id );\n}\n\n# Check if the bug is readonly\nif( bug_is_readonly( $t_bug_id ) ) {\n\terror_parameters( $t_bug_id );\n\ttrigger_error( ERROR_BUG_READ_ONLY_ACTION_DENIED, ERROR );\n}\n\n$f_bugnote_text = trim( $f_bugnote_text ) . \"\\n\";\n\nbugnote_set_text( $f_bugnote_id, $f_bugnote_text );\nbugnote_set_time_tracking( $f_bugnote_id, $f_time_tracking );\n\n# Plugin integration\nevent_signal( 'EVENT_BUGNOTE_EDIT', array( $t_bug_id, $f_bugnote_id ) );\n\nform_security_purge( 'bugnote_update' );\n\nprint_header_redirect( string_get_bugnote_view_url( $t_bug_id, $f_bugnote_id ) );\n"
        },
        {
          "name": "bugnote_view_inc.php",
          "type": "blob",
          "size": 11.57421875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This include file prints out the list of bugnotes attached to the bug\n * $f_bug_id must be set and be set to the bug id\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bug_revision_api.php\n * @uses bugnote_api.php\n * @uses collapse_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses database_api.php\n * @uses event_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses prepare_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n */\n\nif( !defined( 'BUGNOTE_VIEW_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_activity_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bug_revision_api.php' );\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'collapse_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'prepare_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\n\n#precache access levels\naccess_cache_matrix_project( helper_get_current_project() );\n\n$t_show_time_tracking = config_get( 'time_tracking_enabled' )\n\t&& access_has_bug_level( config_get( 'time_tracking_view_threshold' ), $f_bug_id );\n\n# get attachments data\n$t_fields = config_get( 'bug_view_page_fields' );\n$t_fields = columns_filter_disabled( $t_fields );\n\n$t_show_attachments = in_array( 'attachments', $t_fields );\n\n# If included from bug_view_inc.php, then this may already be set.\nif( !isset( $t_bug_activity_get_all_result ) ) {\n\t$t_bug_activity_get_all_result = bug_activity_get_all( $f_bug_id, /* include_attachments */ $t_show_attachments );\n}\n\n$t_activities = $t_bug_activity_get_all_result['activities'];\n$t_bugnotes = $t_bug_activity_get_all_result['bugnotes'];\n\n# Pre-cache users\n$t_users_to_cache = array();\n\nforeach( $t_activities as $t_activity ) {\n\t$t_users_to_cache[$t_activity['user_id']] = true;\n}\n\nuser_cache_array_rows( array_keys( $t_users_to_cache ) );\n\n$t_activities_count = count( $t_activities );\n?>\n\n<?php # Bugnotes BEGIN ?>\n<div class=\"col-md-12 col-xs-12\">\n<a id=\"attachments\"></a>\n<a id=\"bugnotes\"></a>\n<div class=\"space-10\"></div>\n\n<?php\n$t_collapse_block = is_collapsed( 'bugnotes' );\n$t_block_css = $t_collapse_block ? 'collapsed' : '';\n$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n\n?>\n<div id=\"bugnotes\" class=\"widget-box widget-color-blue2 <?php echo $t_block_css ?>\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-comments', 'ace-icon' ); ?>\n\t\t<?php echo lang_get( 'activities_title' ) ?>\n\t</h4>\n\t<div class=\"widget-toolbar\">\n\t\t<a data-action=\"collapse\" href=\"#\">\n\t\t\t<?php print_icon( $t_block_icon, '1 ace-icon bigger-125' ); ?>\n\t\t</a>\n\t</div>\n\t</div>\n\t<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t<table class=\"table table-bordered table-condensed table-striped\">\n<?php\n\t# no bugnotes\n\tif( 0 == $t_activities_count ) {\n?>\n<tr class=\"bugnotes-empty\">\n\t<td class=\"center\" colspan=\"2\">\n\t\t<?php echo lang_get( 'no_bugnotes_msg' ) ?>\n\t</td>\n</tr>\n<?php }\n\n\tevent_signal( 'EVENT_VIEW_BUGNOTES_START', array( $f_bug_id, $t_bugnotes ) );\n\n\t$t_normal_date_format = config_get( 'normal_date_format' );\n\t$t_total_time = 0;\n\n\tforeach( $t_activities as $t_activity ) {\n\t\tif( $t_activity['type'] !== ENTRY_TYPE_NOTE ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif( $t_activity['type'] == ENTRY_TYPE_NOTE && $t_activity['note']->time_tracking != 0 ) {\n\t\t\t$t_time_tracking_hhmm = db_minutes_to_hhmm( $t_activity['note']->time_tracking );\n\t\t\t$t_total_time += $t_activity['note']->time_tracking;\n\t\t} else {\n\t\t\t$t_time_tracking_hhmm = '';\n\t\t}\n?>\n<tr class=\"bugnote visible-on-hover-toggle\" id=\"c<?php echo $t_activity['id'] ?>\">\n\t\t<td class=\"category\">\n\t\t<div class=\"pull-left padding-2\"><?php print_avatar( $t_activity['user_id'], 'bugnote', 80 ); ?>\n\t\t</div>\n\t\t<div class=\"pull-left padding-2\">\n\t\t<p class=\"no-margin\">\n\t\t\t<?php\n\t\t\tprint_icon( 'fa-user', 'grey' );\n\t\t\techo ' ';\n\t\t\tprint_user( $t_activity['user_id'] );\n\t\t\t?>\n\t\t</p>\n\t\t<p class=\"no-margin small lighter\">\n\t\t\t<?php print_icon( 'fa-clock-o', 'grey' ); ?>\n\t\t\t<?php echo date( $t_normal_date_format, $t_activity['timestamp'] ); ?>\n\t\t\t<?php if( $t_activity['private'] ) { ?>\n\t\t\t\t&#160;&#160;\n\t\t\t\t<?php print_icon( 'fa-eye', 'red' ); ?>\n\t\t\t\t<?php echo lang_get( 'private' ) ?>\n\t\t\t<?php } ?>\n\t\t</p>\n\t\t<p class=\"no-margin\">\n\t\t\t<?php\n\t\t\tif( user_exists( $t_activity['user_id'] ) ) {\n\t\t\t\t$t_access_level = access_get_project_level( null, $t_activity['user_id'] );\n\t\t\t\t$t_label = layout_is_rtl() ? 'arrowed-right' : 'arrowed-in-right';\n\t\t\t\techo '<span class=\"label label-sm label-default ' . $t_label . '\">', access_level_get_string( $t_access_level ), '</span>';\n\t\t\t}\n\t\t\t?>\n\t\t\t&#160;\n\t\t\t<?php if( $t_activity['type'] == ENTRY_TYPE_NOTE ) { ?>\n\t\t\t<?php print_icon( 'fa-link', 'grey' ); ?>\n\t\t\t<a rel=\"bookmark\" href=\"<?php echo string_get_bugnote_view_url( $t_activity['note']->bug_id, $t_activity['note']->id) ?>\" class=\"lighter\" title=\"<?php echo lang_get( 'bugnote_link_title' ) ?>\">\n\t\t\t\t<?php echo htmlentities( config_get_global( 'bugnote_link_tag' ) ) . $t_activity['id_formatted'] ?>\n\t\t\t</a>\n\t\t\t<?php } ?>\n\t\t</p>\n\t\t<?php\n\t\tif( $t_activity['modified'] ) {\n\t\t\techo '<p class=\"no-margin small lighter\">';\n\t\t\tprint_icon( 'fa-retweet' );\n\t\t\techo ' ' . lang_get( 'last_edited')\n\t\t\t\t. lang_get( 'word_separator' )\n\t\t\t\t. date( $t_normal_date_format, $t_activity['last_modified'] )\n\t\t\t\t. '</p>';\n\t\t\tif( access_can_view_bugnote_revisions( $t_activity['id'] ) ) {\n\t\t\t\t$t_revision_count = bug_revision_count( $f_bug_id, REV_BUGNOTE, $t_activity['id'] );\n\t\t\t\tif( $t_revision_count >= 1 ) {\n\t\t\t\t\t$t_view_num_revisions_text = sprintf( lang_get( 'view_num_revisions' ), $t_revision_count );\n?>\n\t\t<p class=\"no-margin\">\n\t\t\t<span class=\"small bugnote-revisions-link\">\n\t\t\t\t<a href=\"bug_revision_view_page.php?bugnote_id=<?php echo $t_activity['id'] ?>\">\n\t\t\t\t\t<?php echo $t_view_num_revisions_text ?>\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t</p>\n<?php\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t?>\n\t\t<div class=\"clearfix\"></div>\n\t\t<div class=\"space-2\"></div>\n\t\t<div class=\"btn-group visible-on-hover\">\n\t\t<?php\n\t\t\t# show edit button if the user is allowed to edit this bugnote\n\t\t\tif( $t_activity['can_edit'] ) {\n\t\t\t\techo '<div class=\"pull-left\">';\n\t\t\t\tprint_form_button(\n\t\t\t\t\t'bugnote_edit_page.php',\n\t\t\t\t\tlang_get( 'edit' ),\n\t\t\t\t\tarray( 'bugnote_id' => $t_activity['id'] ),\n\t\t\t\t\tOFF );\n\t\t\t\techo '</div>';\n\t\t\t}\n\n\t\t\t# show delete button if the user is allowed to delete this bugnote\n\t\t\tif( $t_activity['can_delete'] ) {\n\t\t\t\techo '<div class=\"pull-left\">';\n\n\t\t\t\tif( $t_activity['type'] == ENTRY_TYPE_NOTE ) {\n\t\t\t\t\tif ( !isset( $t_security_token_notes_delete ) ) {\n\t\t\t\t\t\t$t_security_token_notes_delete = form_security_token( 'bugnote_delete' );\n\t\t\t\t\t}\n\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t'bugnote_delete.php',\n\t\t\t\t\t\tlang_get( 'delete' ),\n\t\t\t\t\t\tarray( 'bugnote_id' => $t_activity['id'] ),\n\t\t\t\t\t\t$t_security_token_notes_delete );\n\t\t\t\t} else {\n\t\t\t\t\tif ( !isset( $t_security_token_attachments_delete ) ) {\n\t\t\t\t\t\t$t_security_token_attachments_delete = form_security_token( 'bug_file_delete' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif( $t_activity['can_delete'] ) {\n\t\t\t\t\t\tprint_link_button( 'bug_file_delete.php?file_id=' . $t_activity['id'] . form_security_param( 'bug_file_delete', $t_security_token_attachments_delete ),\n\t\t\t\t\t\t\tlang_get( 'delete' ), 'btn-xs' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\techo '</div>';\n\t\t\t}\n\n\t\t\t# show make public or make private button if the user is allowed to change the view state of this bugnote\n\t\t\tif( $t_activity['can_change_view_state'] ) {\n\t\t\t\tif ( !isset( $t_security_token_state ) ) {\n\t\t\t\t\t$t_security_token_state = form_security_token( 'bugnote_set_view_state' );\n\t\t\t\t}\n\n\t\t\t\techo '<div class=\"pull-left\">';\n\t\t\t\tif( $t_activity['private'] ) {\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t'bugnote_set_view_state.php',\n\t\t\t\t\t\tlang_get( 'make_public' ),\n\t\t\t\t\t\tarray( 'private' => '0', 'bugnote_id' => $t_activity['id'] ),\n\t\t\t\t\t\t$t_security_token_state );\n\t\t\t\t} else {\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t'bugnote_set_view_state.php',\n\t\t\t\t\t\tlang_get( 'make_private' ),\n\t\t\t\t\t\tarray( 'private' => '1', 'bugnote_id' => $t_activity['id'] ),\n\t\t\t\t\t\t$t_security_token_state );\n\t\t\t\t}\n\t\t\t\techo '</div>';\n\t\t\t}\n\t\t?>\n\t\t</div>\n\t\t</div>\n\t</td>\n\t<td class=\"<?php echo $t_activity['style'] ?>\">\n\t<?php\n\t\tif( $t_activity['type'] == ENTRY_TYPE_NOTE ) {\n\t\t\t$t_add_space = false;\n\n\t\t\tswitch ( $t_activity['note']->note_type ) {\n\t\t\t\tcase REMINDER:\n\t\t\t\t\techo '<strong>';\n\n\t\t\t\t\t# List of recipients; remove surrounding delimiters\n\t\t\t\t\t$t_recipients = trim( $t_activity['note']->note_attr, '|' );\n\n\t\t\t\t\tif( empty( $t_recipients ) ) {\n\t\t\t\t\t\techo lang_get( 'reminder_sent_none' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t# If recipients list's last char is not a delimiter, it was truncated\n\t\t\t\t\t\t$t_truncated = ( '|' != mb_substr( $t_activity['note']->note_attr, mb_strlen( $t_activity['note']->note_attr ) - 1 ) );\n\n\t\t\t\t\t\t# Build recipients list for display\n\t\t\t\t\t\t$t_to = array();\n\t\t\t\t\t\tforeach ( explode( '|', $t_recipients ) as $t_recipient ) {\n\t\t\t\t\t\t\t$t_to[] = prepare_user_name( $t_recipient );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\techo lang_get( 'reminder_sent_to' ) . ': '\n\t\t\t\t\t\t\t. implode( ', ', $t_to )\n\t\t\t\t\t\t\t. ( $t_truncated ? ' (' . lang_get( 'reminder_list_truncated' ) . ')' : '' );\n\t\t\t\t\t}\n\n\t\t\t\t\techo '</strong><br /><br />';\n\t\t\t\t\t$t_add_space = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TIME_TRACKING:\n\t\t\t\t\tif( $t_show_time_tracking ) {\n\t\t\t\t\t\techo '<div class=\"time-tracked label label-grey label-sm\">', lang_get( 'time_tracking_time_spent' ) . ' ' . $t_time_tracking_hhmm, '</div>';\n\t\t\t\t\t\techo '<div class=\"clearfix\"></div>';\n\t\t\t\t\t\t$t_add_space = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif( !is_blank( $t_activity['note']->note ) ) {\n\t\t\t\techo string_display_links( $t_activity['note']->note );\n\t\t\t\t$t_add_space = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( !isset( $t_security_token_attachments_delete ) ) {\n\t\t\t$t_security_token_attachments_delete = form_security_token( 'bug_file_delete' );\n\t\t}\n\t\n\t\tforeach( $t_activity['attachments'] as $t_attachment ) {\n\t\t\tprint_bug_attachment( $t_attachment, $t_security_token_attachments_delete );\n\t\t}\n\t?>\n\t</td>\n</tr>\n<?php\nif( $t_activity['type'] == ENTRY_TYPE_NOTE ) {\n\tevent_signal( 'EVENT_VIEW_BUGNOTE', array( $f_bug_id, $t_activity['id'], $t_activity['private'] ) );\n}\n?>\n<tr class=\"spacer\">\n\t<td colspan=\"2\"></td>\n</tr>\n<?php\n\t} # end for loop\n\n\tevent_signal( 'EVENT_VIEW_BUGNOTES_END', $f_bug_id );\n?>\n</table>\n</div>\n</div>\n</div>\n</div>\n<?php\n\nif( $t_total_time > 0 && $t_show_time_tracking ) {\n\techo '<div class=\"time-tracking-total pull-right\">';\n\tprint_icon( 'fa-clock-o', 'ace-icon bigger-110 red' );\n\techo ' ';\n\tprintf( lang_get( 'total_time_for_issue' ),\n\t\t'<span class=\"time-tracked\">' . db_minutes_to_hhmm( $t_total_time ) . '</span>'\n\t);\n\techo '</div>';\n}\n?>\n</div>\n"
        },
        {
          "name": "build",
          "type": "tree",
          "content": null
        },
        {
          "name": "changelog_page.php",
          "type": "blob",
          "size": 13.453125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Display Project Changelog\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses error_api.php\n * @uses filter_api.php\n * @uses filter_constants_inc.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'filter_constants_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_api( 'version_api.php' );\n\nrequire_css( 'status_config.php' );\n\n/**\n * Print header for the specified project version.\n * @param integer $p_version_id A valid version identifier.\n * @return void\n */\nfunction print_version_header( $p_version_id ) {\n\t$t_project_id   = version_get_field( $p_version_id, 'project_id' );\n\t$t_version_name = version_get_field( $p_version_id, 'version' );\n\t$t_project_name = project_get_field( $t_project_id, 'name' );\n\n\t$t_release_title = '<a class=\"white\" href=\"changelog_page.php?project_id=' . $t_project_id . '\">' . string_display_line( $t_project_name ) . '</a>';\n\t$t_release_title .= ' - <a class=\"white\" href=\"changelog_page.php?version_id=' . $p_version_id . '\">' . string_display_line( $t_version_name ) . '</a>';\n\n\tif( config_get( 'show_changelog_dates' ) ) {\n\t\t$t_version_released = version_get_field( $p_version_id, 'released' );\n\t\t$t_release_timestamp = version_get_field( $p_version_id, 'date_order' );\n\n\t\tif( (bool)$t_version_released ) {\n\t\t\t$t_release_date = lang_get( 'released' ) . ' ' . string_display_line( date( config_get( 'short_date_format' ), $t_release_timestamp ) );\n\t\t} else {\n\t\t\t$t_release_date = lang_get( 'not_released' );\n\t\t}\n\t} else {\n\t\t$t_release_date = '';\n\t}\n\n\t$t_block_id = 'changelog_' . $p_version_id;\n\t$t_collapse_block = is_collapsed( $t_block_id );\n\t$t_block_css = $t_collapse_block ? 'collapsed' : '';\n\t$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n\n\techo '<div id=\"' . $t_block_id . '\" class=\"widget-box widget-color-blue2 ' . $t_block_css . '\">';\n\techo '<div class=\"widget-header widget-header-small\">';\n\techo PHP_EOL;\n\techo '<h4 class=\"widget-title lighter\">';\n\tprint_icon( 'fa-retweet', 'ace-icon' );\n\techo $t_release_title, lang_get( 'word_separator' );\n\techo '</h4>';\n\techo PHP_EOL;\n\techo '<div class=\"widget-toolbar\">';\n\techo '<a data-action=\"collapse\" href=\"#\">';\n\tprint_icon( $t_block_icon, '1 ace-icon bigger-125' );\n\techo '</a>';\n\techo '</div>';\n\techo '</div>';\n\techo PHP_EOL;\n\n\techo '<div class=\"widget-body\">';\n\techo '<div class=\"widget-toolbox padding-8 clearfix\">';\n\techo '<div class=\"pull-left\">' . icon_get( 'fa-calendar-o', 'fa-lg' ) . ' ' . $t_release_date . '</div>';\n\techo PHP_EOL;\n\techo '<div class=\"btn-toolbar pull-right\">';\n\tprint_extra_small_button(\n\t\t'view_all_set.php?type=' . FILTER_ACTION_PARSE_NEW\n\t\t. '&temporary=y&' . FILTER_PROPERTY_PROJECT_ID . '=' . $t_project_id\n\t\t. '&' . filter_encode_field_and_value( FILTER_PROPERTY_FIXED_IN_VERSION, $t_version_name )\n\t\t. '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . META_FILTER_NONE,\n\t\tlang_get( 'view_bugs_link' )\n\t);\n\tprint_extra_small_button(\n\t\t'changelog_page.php?version_id=' . $p_version_id,\n\t\tstring_display_line( $t_version_name )\n\t);\n\tprint_extra_small_button(\n\t\t'changelog_page.php?project_id=' . $t_project_id,\n\t\tstring_display_line( $t_project_name )\n\t);\n\techo '</div>';\n\techo PHP_EOL;\n\n\techo '</div>';\n\techo PHP_EOL;\n\techo '<div class=\"widget-main\">';\n\n}\n\n/**\n * Print footer for the specified project version.\n * @param int $p_version_id a valid version id\n * @param int $p_issues_resolved number of issues in resolved state\n * @return void\n */\nfunction print_version_footer( $p_version_id, $p_issues_resolved ) {\n\t$t_project_id   = version_get_field( $p_version_id, 'project_id' );\n\t$t_bug_string = $p_issues_resolved == 1 ? 'bug' : 'bugs';\n\t$t_version_name = version_get_field( $p_version_id, 'version' );\n\n\techo '</div>';\n\techo '<div class=\"widget-toolbox padding-8 clearfix\">';\n\techo ' ' . $p_issues_resolved . ' ' . lang_get( $t_bug_string ) . ' ';\n\tprint_extra_small_button(\n\t\t'view_all_set.php?type=' . FILTER_ACTION_PARSE_NEW\n\t\t. '&temporary=y&' . FILTER_PROPERTY_PROJECT_ID . '=' . $t_project_id\n\t\t. '&' . filter_encode_field_and_value( FILTER_PROPERTY_FIXED_IN_VERSION, $t_version_name )\n\t\t. '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . META_FILTER_NONE,\n\t\t lang_get( 'view_bugs_link' )\n\t);\n\techo '</div></div></div>';\n\techo '<div class=\"space-10\"></div>';\n\techo PHP_EOL;\n}\n\n/**\n * Print header for the specified project\n * @param string $p_project_name Project name to display.\n * @return void\n */\nfunction print_project_header_changelog( $p_project_name ) {\n\techo '<div class=\"page-header\">';\n\techo '<h1><strong>' . string_display_line( $p_project_name ), '</strong> - ', lang_get( 'changelog' ) . '</h1>';\n\techo '</div>';\n\techo PHP_EOL;\n}\n\n$t_issues_found = false;\n$t_user_id = auth_get_current_user_id();\n\n$f_project = gpc_get_string( 'project', '' );\nif( is_blank( $f_project ) ) {\n\t$f_project_id = gpc_get_int( 'project_id', -1 );\n} else {\n\t$f_project_id = project_get_id_by_name( $f_project );\n\n\tif( $f_project_id === 0 ) {\n\t\terror_parameters( $f_project );\n\t\ttrigger_error( ERROR_PROJECT_NOT_FOUND, ERROR );\n\t}\n}\n\n$f_version = gpc_get_string( 'version', '' );\n\nif( is_blank( $f_version ) ) {\n\t$f_version_id = gpc_get_int( 'version_id', -1 );\n\n\t# If both version_id and project_id parameters are supplied, then version_id take precedence.\n\tif( $f_version_id == -1 ) {\n\t\tif( $f_project_id == -1 ) {\n\t\t\t$t_project_id = helper_get_current_project();\n\t\t} else {\n\t\t\t$t_project_id = $f_project_id;\n\t\t}\n\t} else {\n\t\t$t_project_id = version_get_field( $f_version_id, 'project_id' );\n\t}\n} else {\n\tif( $f_project_id == -1 ) {\n\t\t$t_project_id = helper_get_current_project();\n\t} else {\n\t\t$t_project_id = $f_project_id;\n\t}\n\n\t$f_version_id = version_get_id( $f_version, $t_project_id );\n\n\tif( $f_version_id === false ) {\n\t\terror_parameters( $f_version );\n\t\ttrigger_error( ERROR_VERSION_NOT_FOUND, ERROR );\n\t}\n}\n\nif( ALL_PROJECTS == $t_project_id ) {\n\t$t_project_ids_to_check = user_get_all_accessible_projects( $t_user_id, ALL_PROJECTS );\n\t$t_project_ids = array();\n\n\tforeach ( $t_project_ids_to_check as $t_project_id ) {\n\t\t$t_changelog_view_access_level = config_get( 'view_changelog_threshold', null, null, $t_project_id );\n\t\tif( access_has_project_level( $t_changelog_view_access_level, $t_project_id ) ) {\n\t\t\t$t_project_ids[] = $t_project_id;\n\t\t}\n\t}\n} else {\n\taccess_ensure_project_level( config_get( 'view_changelog_threshold' ), $t_project_id );\n\t$t_project_ids = user_get_all_accessible_subprojects( $t_user_id, $t_project_id );\n\tarray_unshift( $t_project_ids, $t_project_id );\n}\n\n$t_project_id_for_access_check = $t_project_id;\n\nlayout_page_header( lang_get( 'changelog' ) );\n\nlayout_page_begin( __FILE__ );\n\necho '<div class=\"col-md-12 col-xs-12\">';\n\n$t_project_index = 0;\n\nversion_cache_array_rows( $t_project_ids );\ncategory_cache_array_rows_by_project( $t_project_ids );\n\nforeach( $t_project_ids as $t_project_id ) {\n\t$t_project_name = project_get_field( $t_project_id, 'name' );\n\t$t_resolved = config_get( 'bug_resolved_status_threshold' );\n\n\t# grab versions info for later use, excluding obsolete ones\n\t$t_version_rows = version_get_all_rows( $t_project_id, VERSION_ALL, false );\n\n\t# cache category info, but ignore the results for now\n\tcategory_get_all_rows( $t_project_id );\n\n\t$t_project_header_printed = false;\n\n\t$t_view_bug_threshold = config_get( 'view_bug_threshold', null, $t_user_id, $t_project_id );\n\n\tforeach( $t_version_rows as $t_version_row ) {\n\t\t$t_version_header_printed = false;\n\n\t\t$t_version = $t_version_row['version'];\n\t\t$t_version_id = $t_version_row['id'];\n\n\t\t# Skip all versions except the specified one (if any).\n\t\tif( $f_version_id != -1 && $f_version_id != $t_version_id ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t$t_query = 'SELECT sbt.*, dbt.fixed_in_version AS parent_version, rt.source_bug_id\n\t\t\tFROM {bug} sbt\n\t\t\tLEFT JOIN {bug_relationship} rt\n\t\t\t\tON sbt.id=rt.destination_bug_id AND rt.relationship_type=' . BUG_DEPENDANT . '\n\t\t\tLEFT JOIN {bug} dbt ON dbt.id=rt.source_bug_id\n\t\t\tWHERE sbt.project_id=' . db_param() . '\n\t\t\t  AND sbt.fixed_in_version=' . db_param() . '\n\t\t\tORDER BY sbt.status ASC, sbt.last_updated DESC';\n\n\t\t$t_description = version_get_field( $t_version_id, 'description' );\n\n\t\t$t_first_entry = true;\n\t\t$t_issue_ids = array();\n\t\t$t_issue_parents = array();\n\t\t$t_issue_handlers = array();\n\n\t\t$t_result = db_query( $t_query, array( $t_project_id, $t_version ) );\n\n\t\twhile( $t_row = db_fetch_array( $t_result ) ) {\n\t\t\tbug_cache_database_result( $t_row );\n\n\t\t\t# verify the user can view this issue\n\t\t\tif( !access_has_bug_level( $t_view_bug_threshold, $t_row['id'] ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t$t_issue_id = $t_row['id'];\n\t\t\t$t_issue_parent = $t_row['source_bug_id'];\n\t\t\t$t_parent_version = (string)$t_row['parent_version'];\n\n\t\t\tif( !helper_call_custom_function( 'changelog_include_issue', array( $t_issue_id ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( 0 === strcasecmp( $t_parent_version, $t_version ) ) {\n\t\t\t\t$t_issue_ids[] = $t_issue_id;\n\t\t\t\t$t_issue_parents[] = $t_issue_parent;\n\t\t\t} else if( !in_array( $t_issue_id, $t_issue_ids ) ) {\n\t\t\t\t$t_issue_ids[] = $t_issue_id;\n\t\t\t\t$t_issue_parents[] = null;\n\t\t\t}\n\n\t\t\t$t_issue_handlers[] = $t_row['handler_id'];\n\t\t}\n\n\t\tuser_cache_array_rows( array_unique( $t_issue_handlers ) );\n\n\t\t$t_issues_resolved = count( array_unique( $t_issue_ids ) );\n\n\t\tif( $t_issues_resolved > 0 ) {\n\t\t\tif( !$t_project_header_printed ) {\n\t\t\t\techo PHP_EOL;\n\t\t\t\tprint_project_header_changelog( $t_project_name );\n\t\t\t\t$t_project_header_printed = true;\n\t\t\t}\n\n\t\t\tif( !$t_version_header_printed ) {\n\t\t\t\tprint_version_header( $t_version_id );\n\t\t\t\t$t_version_header_printed = true;\n\t\t\t}\n\n\t\t\tif( !is_blank( $t_description ) ) {\n\t\t\t\techo '<div class=\"alert alert-warning\">',\n\t\t\t\t\tstring_display_links( $t_description ),\n\t\t\t\t\t'</div>';\n\t\t\t}\n\t\t} else {\n\t\t\tcontinue;\n\t\t}\n\n\t\t$t_issue_set_ids = array();\n\t\t$t_issue_set_levels = array();\n\t\t$k = 0;\n\n\t\t$t_cycle = false;\n\t\t$t_cycle_ids = array();\n\n\t\twhile( !empty( $t_issue_ids ) ) {\n\t\t\t$t_issue_id = $t_issue_ids[$k];\n\t\t\t$t_issue_parent = $t_issue_parents[$k];\n\n\t\t\tif( in_array( $t_issue_id, $t_cycle_ids ) && in_array( $t_issue_parent, $t_cycle_ids ) ) {\n\t\t\t\t$t_cycle = true;\n\t\t\t} else {\n\t\t\t\t$t_cycle = false;\n\t\t\t\t$t_cycle_ids[] = $t_issue_id;\n\t\t\t}\n\n\t\t\tif( $t_cycle || !in_array( $t_issue_parent, $t_issue_ids ) ) {\n\t\t\t\t$l = array_search( $t_issue_parent, $t_issue_set_ids );\n\t\t\t\tif( $l !== false ) {\n\t\t\t\t\tfor( $m = $l+1; $m < count( $t_issue_set_ids ) && $t_issue_set_levels[$m] > $t_issue_set_levels[$l]; $m++ ) {\n\t\t\t\t\t\t#do nothing\n\t\t\t\t\t}\n\t\t\t\t\t$t_issue_set_ids_end = array_splice( $t_issue_set_ids, $m );\n\t\t\t\t\t$t_issue_set_levels_end = array_splice( $t_issue_set_levels, $m );\n\t\t\t\t\t$t_issue_set_ids[] = $t_issue_id;\n\t\t\t\t\t$t_issue_set_levels[] = $t_issue_set_levels[$l] + 1;\n\t\t\t\t\t$t_issue_set_ids = array_merge( $t_issue_set_ids, $t_issue_set_ids_end );\n\t\t\t\t\t$t_issue_set_levels = array_merge( $t_issue_set_levels, $t_issue_set_levels_end );\n\t\t\t\t} else {\n\t\t\t\t\t$t_issue_set_ids[] = $t_issue_id;\n\t\t\t\t\t$t_issue_set_levels[] = 0;\n\t\t\t\t}\n\t\t\t\tarray_splice( $t_issue_ids, $k, 1 );\n\t\t\t\tarray_splice( $t_issue_parents, $k, 1 );\n\n\t\t\t\t$t_cycle_ids = array();\n\t\t\t} else {\n\t\t\t\t$k++;\n\t\t\t}\n\t\t\tif( count( $t_issue_ids ) <= $k ) {\n\t\t\t\t$k = 0;\n\t\t\t}\n\t\t}\n\n\t\techo '<ul class=\"changelog\">' . PHP_EOL;\n\t\tfor( $j = 0; $j < count( $t_issue_set_ids ); $j++ ) {\n\t\t\t$t_issue_set_id = $t_issue_set_ids[$j];\n\t\t\t$t_issue_set_level = $t_issue_set_levels[$j];\n\n\t\t\techo '<li>';\n\t\t\thelper_call_custom_function( 'changelog_print_issue', array( $t_issue_set_id, $t_issue_set_level ) );\n\t\t\techo '</li>' . PHP_EOL;\n\n\t\t\t$t_issues_found = true;\n\t\t}\n\t\techo '</ul>' . PHP_EOL;\n\n\tif( $t_version_header_printed ) {\n\t\tprint_version_footer( $t_version_id,  $t_issues_resolved);\n\t}\n}\n\n\t$t_project_index++;\n}\n\nif( !$t_issues_found ) {\n\tif( access_has_project_level( config_get( 'manage_project_threshold' ), $t_project_id_for_access_check ) ) {\n\t\t$t_string = 'changelog_empty_manager';\n\t} else {\n\t\t$t_string = 'changelog_empty';\n\t}\n\n\techo '<br />';\n\techo '<p class=\"lead\">' . lang_get( $t_string ) . '</p>';\n}\necho '</div>';\nlayout_page_end();\n"
        },
        {
          "name": "composer.json",
          "type": "blob",
          "size": 1.0849609375,
          "content": "{\n    \"name\": \"mantisbt/mantisbt\",\n    \"description\": \"Mantis Bug Tracker\",\n    \"type\": \"project\",\n    \"require\": {\n        \"php\": \"^7.4 || ^8.0\",\n        \"ext-mbstring\": \"*\",\n        \"ext-json\": \"*\",\n        \"ext-tokenizer\": \"*\",\n        \"slim/slim\": \"^3.0\",\n        \"guzzlehttp/guzzle\": \"^7.5\",\n        \"vboctor/disposable_email_checker\": \"^3.0\",\n        \"adodb/adodb-php\": \"^5.22\",\n        \"phpmailer/phpmailer\": \"~6.0\",\n        \"erusev/parsedown\": \"^1.7.4\",\n        \"ezyang/htmlpurifier\": \"^4.14\",\n        \"dapphp/securimage\": \"dev-mantis\"\n    },\n    \"require-dev\": {\n        \"ext-zip\": \"*\",\n        \"phpunit/phpunit\": \"^9.6\"\n    },\n    \"repositories\": [\n        {\n            \"type\": \"vcs\",\n            \"url\": \"https://github.com/mantisbt/securimage\",\n            \"no-api\": true\n        }\n    ],\n    \"license\": \"GPL-2.0-or-later\",\n    \"authors\": [\n        {\n            \"name\": \"MantisBT Team\",\n            \"email\": \"mantisbt-dev@lists.sourceforge.net\",\n            \"homepage\": \"https://www.mantisbt.org\"\n        }\n    ],\n    \"config\": {\n        \"platform\": {\n            \"php\": \"7.4.33\"\n        }\n    }\n}\n"
        },
        {
          "name": "composer.lock",
          "type": "blob",
          "size": 104.072265625,
          "content": "{\n    \"_readme\": [\n        \"This file locks the dependencies of your project to a known state\",\n        \"Read more about it at https://getcomposer.org/doc/01-basic-usage.md#installing-dependencies\",\n        \"This file is @generated automatically\"\n    ],\n    \"content-hash\": \"83d7d4140d35409a32390127222f5543\",\n    \"packages\": [\n        {\n            \"name\": \"adodb/adodb-php\",\n            \"version\": \"v5.22.7\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/ADOdb/ADOdb.git\",\n                \"reference\": \"e7150539d5707ae556172532e2b25ac4e88cb2a6\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/ADOdb/ADOdb/zipball/e7150539d5707ae556172532e2b25ac4e88cb2a6\",\n                \"reference\": \"e7150539d5707ae556172532e2b25ac4e88cb2a6\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.0 || ^8.0\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^8.5\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"files\": [\n                    \"adodb.inc.php\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\",\n                \"LGPL-2.1-or-later\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"John Lim\",\n                    \"email\": \"jlim@natsoft.com\",\n                    \"role\": \"Author\"\n                },\n                {\n                    \"name\": \"Damien Regad\",\n                    \"role\": \"Current maintainer\"\n                },\n                {\n                    \"name\": \"Mark Newnham\",\n                    \"role\": \"Developer\"\n                }\n            ],\n            \"description\": \"ADOdb is a PHP database abstraction layer library\",\n            \"homepage\": \"https://adodb.org/\",\n            \"keywords\": [\n                \"abstraction\",\n                \"database\",\n                \"layer\",\n                \"library\",\n                \"php\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/ADOdb/ADOdb/issues\",\n                \"source\": \"https://github.com/ADOdb/ADOdb\"\n            },\n            \"time\": \"2023-11-04T22:25:49+00:00\"\n        },\n        {\n            \"name\": \"dapphp/securimage\",\n            \"version\": \"dev-mantis\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/mantisbt/securimage\",\n                \"reference\": \"17a390243d831017f9ce9ee23c9dc481e7554ea0\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/mantisbt/securimage/zipball/17a390243d831017f9ce9ee23c9dc481e7554ea0\",\n                \"reference\": \"17a390243d831017f9ce9ee23c9dc481e7554ea0\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-gd\": \"*\",\n                \"php\": \">=5.4\"\n            },\n            \"suggest\": {\n                \"ext-pdo\": \"For database storage support\",\n                \"ext-pdo_mysql\": \"For MySQL database support\",\n                \"ext-pdo_sqlite\": \"For SQLite3 database support\"\n            },\n            \"default-branch\": true,\n            \"type\": \"library\",\n            \"autoload\": {\n                \"classmap\": [\n                    \"securimage.php\"\n                ]\n            },\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Drew Phillips\",\n                    \"email\": \"drew@drew-phillips.com\"\n                }\n            ],\n            \"description\": \"PHP CAPTCHA Library\",\n            \"homepage\": \"https://www.phpcaptcha.org\",\n            \"keywords\": [\n                \"anti-spam\",\n                \"captcha\",\n                \"forms\",\n                \"security\"\n            ],\n            \"time\": \"2022-07-24T17:11:14+00:00\"\n        },\n        {\n            \"name\": \"erusev/parsedown\",\n            \"version\": \"1.7.4\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/erusev/parsedown.git\",\n                \"reference\": \"cb17b6477dfff935958ba01325f2e8a2bfa6dab3\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/erusev/parsedown/zipball/cb17b6477dfff935958ba01325f2e8a2bfa6dab3\",\n                \"reference\": \"cb17b6477dfff935958ba01325f2e8a2bfa6dab3\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-mbstring\": \"*\",\n                \"php\": \">=5.3.0\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^4.8.35\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"psr-0\": {\n                    \"Parsedown\": \"\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Emanuil Rusev\",\n                    \"email\": \"hello@erusev.com\",\n                    \"homepage\": \"http://erusev.com\"\n                }\n            ],\n            \"description\": \"Parser for Markdown.\",\n            \"homepage\": \"http://parsedown.org\",\n            \"keywords\": [\n                \"markdown\",\n                \"parser\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/erusev/parsedown/issues\",\n                \"source\": \"https://github.com/erusev/parsedown/tree/1.7.x\"\n            },\n            \"time\": \"2019-12-30T22:54:17+00:00\"\n        },\n        {\n            \"name\": \"ezyang/htmlpurifier\",\n            \"version\": \"v4.18.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/ezyang/htmlpurifier.git\",\n                \"reference\": \"cb56001e54359df7ae76dc522d08845dc741621b\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/ezyang/htmlpurifier/zipball/cb56001e54359df7ae76dc522d08845dc741621b\",\n                \"reference\": \"cb56001e54359df7ae76dc522d08845dc741621b\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"~5.6.0 || ~7.0.0 || ~7.1.0 || ~7.2.0 || ~7.3.0 || ~7.4.0 || ~8.0.0 || ~8.1.0 || ~8.2.0 || ~8.3.0 || ~8.4.0\"\n            },\n            \"require-dev\": {\n                \"cerdic/css-tidy\": \"^1.7 || ^2.0\",\n                \"simpletest/simpletest\": \"dev-master\"\n            },\n            \"suggest\": {\n                \"cerdic/css-tidy\": \"If you want to use the filter 'Filter.ExtractStyleBlocks'.\",\n                \"ext-bcmath\": \"Used for unit conversion and imagecrash protection\",\n                \"ext-iconv\": \"Converts text to and from non-UTF-8 encodings\",\n                \"ext-tidy\": \"Used for pretty-printing HTML\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"files\": [\n                    \"library/HTMLPurifier.composer.php\"\n                ],\n                \"psr-0\": {\n                    \"HTMLPurifier\": \"library/\"\n                },\n                \"exclude-from-classmap\": [\n                    \"/library/HTMLPurifier/Language/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"LGPL-2.1-or-later\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Edward Z. Yang\",\n                    \"email\": \"admin@htmlpurifier.org\",\n                    \"homepage\": \"http://ezyang.com\"\n                }\n            ],\n            \"description\": \"Standards compliant HTML filter written in PHP\",\n            \"homepage\": \"http://htmlpurifier.org/\",\n            \"keywords\": [\n                \"html\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/ezyang/htmlpurifier/issues\",\n                \"source\": \"https://github.com/ezyang/htmlpurifier/tree/v4.18.0\"\n            },\n            \"time\": \"2024-11-01T03:51:45+00:00\"\n        },\n        {\n            \"name\": \"guzzlehttp/guzzle\",\n            \"version\": \"7.9.2\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/guzzle/guzzle.git\",\n                \"reference\": \"d281ed313b989f213357e3be1a179f02196ac99b\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/guzzle/guzzle/zipball/d281ed313b989f213357e3be1a179f02196ac99b\",\n                \"reference\": \"d281ed313b989f213357e3be1a179f02196ac99b\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-json\": \"*\",\n                \"guzzlehttp/promises\": \"^1.5.3 || ^2.0.3\",\n                \"guzzlehttp/psr7\": \"^2.7.0\",\n                \"php\": \"^7.2.5 || ^8.0\",\n                \"psr/http-client\": \"^1.0\",\n                \"symfony/deprecation-contracts\": \"^2.2 || ^3.0\"\n            },\n            \"provide\": {\n                \"psr/http-client-implementation\": \"1.0\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"ext-curl\": \"*\",\n                \"guzzle/client-integration-tests\": \"3.0.2\",\n                \"php-http/message-factory\": \"^1.1\",\n                \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\",\n                \"psr/log\": \"^1.1 || ^2.0 || ^3.0\"\n            },\n            \"suggest\": {\n                \"ext-curl\": \"Required for CURL handler support\",\n                \"ext-intl\": \"Required for Internationalized Domain Name (IDN) support\",\n                \"psr/log\": \"Required for using the Log middleware\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"bamarni-bin\": {\n                    \"bin-links\": true,\n                    \"forward-command\": false\n                }\n            },\n            \"autoload\": {\n                \"files\": [\n                    \"src/functions_include.php\"\n                ],\n                \"psr-4\": {\n                    \"GuzzleHttp\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                },\n                {\n                    \"name\": \"Michael Dowling\",\n                    \"email\": \"mtdowling@gmail.com\",\n                    \"homepage\": \"https://github.com/mtdowling\"\n                },\n                {\n                    \"name\": \"Jeremy Lindblom\",\n                    \"email\": \"jeremeamia@gmail.com\",\n                    \"homepage\": \"https://github.com/jeremeamia\"\n                },\n                {\n                    \"name\": \"George Mponos\",\n                    \"email\": \"gmponos@gmail.com\",\n                    \"homepage\": \"https://github.com/gmponos\"\n                },\n                {\n                    \"name\": \"Tobias Nyholm\",\n                    \"email\": \"tobias.nyholm@gmail.com\",\n                    \"homepage\": \"https://github.com/Nyholm\"\n                },\n                {\n                    \"name\": \"Márk Sági-Kazár\",\n                    \"email\": \"mark.sagikazar@gmail.com\",\n                    \"homepage\": \"https://github.com/sagikazarmark\"\n                },\n                {\n                    \"name\": \"Tobias Schultze\",\n                    \"email\": \"webmaster@tubo-world.de\",\n                    \"homepage\": \"https://github.com/Tobion\"\n                }\n            ],\n            \"description\": \"Guzzle is a PHP HTTP client library\",\n            \"keywords\": [\n                \"client\",\n                \"curl\",\n                \"framework\",\n                \"http\",\n                \"http client\",\n                \"psr-18\",\n                \"psr-7\",\n                \"rest\",\n                \"web service\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/guzzle/guzzle/issues\",\n                \"source\": \"https://github.com/guzzle/guzzle/tree/7.9.2\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://github.com/Nyholm\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/guzzlehttp/guzzle\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"time\": \"2024-07-24T11:22:20+00:00\"\n        },\n        {\n            \"name\": \"guzzlehttp/promises\",\n            \"version\": \"2.0.3\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/guzzle/promises.git\",\n                \"reference\": \"6ea8dd08867a2a42619d65c3deb2c0fcbf81c8f8\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/guzzle/promises/zipball/6ea8dd08867a2a42619d65c3deb2c0fcbf81c8f8\",\n                \"reference\": \"6ea8dd08867a2a42619d65c3deb2c0fcbf81c8f8\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2.5 || ^8.0\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"bamarni-bin\": {\n                    \"bin-links\": true,\n                    \"forward-command\": false\n                }\n            },\n            \"autoload\": {\n                \"psr-4\": {\n                    \"GuzzleHttp\\\\Promise\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                },\n                {\n                    \"name\": \"Michael Dowling\",\n                    \"email\": \"mtdowling@gmail.com\",\n                    \"homepage\": \"https://github.com/mtdowling\"\n                },\n                {\n                    \"name\": \"Tobias Nyholm\",\n                    \"email\": \"tobias.nyholm@gmail.com\",\n                    \"homepage\": \"https://github.com/Nyholm\"\n                },\n                {\n                    \"name\": \"Tobias Schultze\",\n                    \"email\": \"webmaster@tubo-world.de\",\n                    \"homepage\": \"https://github.com/Tobion\"\n                }\n            ],\n            \"description\": \"Guzzle promises library\",\n            \"keywords\": [\n                \"promise\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/guzzle/promises/issues\",\n                \"source\": \"https://github.com/guzzle/promises/tree/2.0.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://github.com/Nyholm\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/guzzlehttp/promises\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"time\": \"2024-07-18T10:29:17+00:00\"\n        },\n        {\n            \"name\": \"guzzlehttp/psr7\",\n            \"version\": \"2.7.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/guzzle/psr7.git\",\n                \"reference\": \"a70f5c95fb43bc83f07c9c948baa0dc1829bf201\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/guzzle/psr7/zipball/a70f5c95fb43bc83f07c9c948baa0dc1829bf201\",\n                \"reference\": \"a70f5c95fb43bc83f07c9c948baa0dc1829bf201\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2.5 || ^8.0\",\n                \"psr/http-factory\": \"^1.0\",\n                \"psr/http-message\": \"^1.1 || ^2.0\",\n                \"ralouphie/getallheaders\": \"^3.0\"\n            },\n            \"provide\": {\n                \"psr/http-factory-implementation\": \"1.0\",\n                \"psr/http-message-implementation\": \"1.0\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"http-interop/http-factory-tests\": \"0.9.0\",\n                \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\"\n            },\n            \"suggest\": {\n                \"laminas/laminas-httphandlerrunner\": \"Emit PSR-7 responses\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"bamarni-bin\": {\n                    \"bin-links\": true,\n                    \"forward-command\": false\n                }\n            },\n            \"autoload\": {\n                \"psr-4\": {\n                    \"GuzzleHttp\\\\Psr7\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                },\n                {\n                    \"name\": \"Michael Dowling\",\n                    \"email\": \"mtdowling@gmail.com\",\n                    \"homepage\": \"https://github.com/mtdowling\"\n                },\n                {\n                    \"name\": \"George Mponos\",\n                    \"email\": \"gmponos@gmail.com\",\n                    \"homepage\": \"https://github.com/gmponos\"\n                },\n                {\n                    \"name\": \"Tobias Nyholm\",\n                    \"email\": \"tobias.nyholm@gmail.com\",\n                    \"homepage\": \"https://github.com/Nyholm\"\n                },\n                {\n                    \"name\": \"Márk Sági-Kazár\",\n                    \"email\": \"mark.sagikazar@gmail.com\",\n                    \"homepage\": \"https://github.com/sagikazarmark\"\n                },\n                {\n                    \"name\": \"Tobias Schultze\",\n                    \"email\": \"webmaster@tubo-world.de\",\n                    \"homepage\": \"https://github.com/Tobion\"\n                },\n                {\n                    \"name\": \"Márk Sági-Kazár\",\n                    \"email\": \"mark.sagikazar@gmail.com\",\n                    \"homepage\": \"https://sagikazarmark.hu\"\n                }\n            ],\n            \"description\": \"PSR-7 message implementation that also provides common utility methods\",\n            \"keywords\": [\n                \"http\",\n                \"message\",\n                \"psr-7\",\n                \"request\",\n                \"response\",\n                \"stream\",\n                \"uri\",\n                \"url\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/guzzle/psr7/issues\",\n                \"source\": \"https://github.com/guzzle/psr7/tree/2.7.0\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://github.com/Nyholm\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/guzzlehttp/psr7\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"time\": \"2024-07-18T11:15:46+00:00\"\n        },\n        {\n            \"name\": \"nikic/fast-route\",\n            \"version\": \"v1.3.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/nikic/FastRoute.git\",\n                \"reference\": \"181d480e08d9476e61381e04a71b34dc0432e812\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/nikic/FastRoute/zipball/181d480e08d9476e61381e04a71b34dc0432e812\",\n                \"reference\": \"181d480e08d9476e61381e04a71b34dc0432e812\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=5.4.0\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^4.8.35|~5.7\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"files\": [\n                    \"src/functions.php\"\n                ],\n                \"psr-4\": {\n                    \"FastRoute\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Nikita Popov\",\n                    \"email\": \"nikic@php.net\"\n                }\n            ],\n            \"description\": \"Fast request router for PHP\",\n            \"keywords\": [\n                \"router\",\n                \"routing\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/nikic/FastRoute/issues\",\n                \"source\": \"https://github.com/nikic/FastRoute/tree/master\"\n            },\n            \"time\": \"2018-02-13T20:26:39+00:00\"\n        },\n        {\n            \"name\": \"phpmailer/phpmailer\",\n            \"version\": \"v6.9.3\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/PHPMailer/PHPMailer.git\",\n                \"reference\": \"2f5c94fe7493efc213f643c23b1b1c249d40f47e\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/PHPMailer/PHPMailer/zipball/2f5c94fe7493efc213f643c23b1b1c249d40f47e\",\n                \"reference\": \"2f5c94fe7493efc213f643c23b1b1c249d40f47e\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-ctype\": \"*\",\n                \"ext-filter\": \"*\",\n                \"ext-hash\": \"*\",\n                \"php\": \">=5.5.0\"\n            },\n            \"require-dev\": {\n                \"dealerdirect/phpcodesniffer-composer-installer\": \"^1.0\",\n                \"doctrine/annotations\": \"^1.2.6 || ^1.13.3\",\n                \"php-parallel-lint/php-console-highlighter\": \"^1.0.0\",\n                \"php-parallel-lint/php-parallel-lint\": \"^1.3.2\",\n                \"phpcompatibility/php-compatibility\": \"^9.3.5\",\n                \"roave/security-advisories\": \"dev-latest\",\n                \"squizlabs/php_codesniffer\": \"^3.7.2\",\n                \"yoast/phpunit-polyfills\": \"^1.0.4\"\n            },\n            \"suggest\": {\n                \"decomplexity/SendOauth2\": \"Adapter for using XOAUTH2 authentication\",\n                \"ext-mbstring\": \"Needed to send email in multibyte encoding charset or decode encoded addresses\",\n                \"ext-openssl\": \"Needed for secure SMTP sending and DKIM signing\",\n                \"greew/oauth2-azure-provider\": \"Needed for Microsoft Azure XOAUTH2 authentication\",\n                \"hayageek/oauth2-yahoo\": \"Needed for Yahoo XOAUTH2 authentication\",\n                \"league/oauth2-google\": \"Needed for Google XOAUTH2 authentication\",\n                \"psr/log\": \"For optional PSR-3 debug logging\",\n                \"symfony/polyfill-mbstring\": \"To support UTF-8 if the Mbstring PHP extension is not enabled (^1.2)\",\n                \"thenetworg/oauth2-azure\": \"Needed for Microsoft XOAUTH2 authentication\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"PHPMailer\\\\PHPMailer\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"LGPL-2.1-only\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Marcus Bointon\",\n                    \"email\": \"phpmailer@synchromedia.co.uk\"\n                },\n                {\n                    \"name\": \"Jim Jagielski\",\n                    \"email\": \"jimjag@gmail.com\"\n                },\n                {\n                    \"name\": \"Andy Prevost\",\n                    \"email\": \"codeworxtech@users.sourceforge.net\"\n                },\n                {\n                    \"name\": \"Brent R. Matzelle\"\n                }\n            ],\n            \"description\": \"PHPMailer is a full-featured email creation and transfer class for PHP\",\n            \"support\": {\n                \"issues\": \"https://github.com/PHPMailer/PHPMailer/issues\",\n                \"source\": \"https://github.com/PHPMailer/PHPMailer/tree/v6.9.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/Synchro\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2024-11-24T18:04:13+00:00\"\n        },\n        {\n            \"name\": \"pimple/pimple\",\n            \"version\": \"v3.5.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/silexphp/Pimple.git\",\n                \"reference\": \"a94b3a4db7fb774b3d78dad2315ddc07629e1bed\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/silexphp/Pimple/zipball/a94b3a4db7fb774b3d78dad2315ddc07629e1bed\",\n                \"reference\": \"a94b3a4db7fb774b3d78dad2315ddc07629e1bed\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.2.5\",\n                \"psr/container\": \"^1.1 || ^2.0\"\n            },\n            \"require-dev\": {\n                \"symfony/phpunit-bridge\": \"^5.4@dev\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"3.4.x-dev\"\n                }\n            },\n            \"autoload\": {\n                \"psr-0\": {\n                    \"Pimple\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Fabien Potencier\",\n                    \"email\": \"fabien@symfony.com\"\n                }\n            ],\n            \"description\": \"Pimple, a simple Dependency Injection Container\",\n            \"homepage\": \"https://pimple.symfony.com\",\n            \"keywords\": [\n                \"container\",\n                \"dependency injection\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/silexphp/Pimple/tree/v3.5.0\"\n            },\n            \"time\": \"2021-10-28T11:13:42+00:00\"\n        },\n        {\n            \"name\": \"psr/container\",\n            \"version\": \"1.1.2\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/php-fig/container.git\",\n                \"reference\": \"513e0666f7216c7459170d56df27dfcefe1689ea\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/php-fig/container/zipball/513e0666f7216c7459170d56df27dfcefe1689ea\",\n                \"reference\": \"513e0666f7216c7459170d56df27dfcefe1689ea\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.4.0\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Psr\\\\Container\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"PHP-FIG\",\n                    \"homepage\": \"https://www.php-fig.org/\"\n                }\n            ],\n            \"description\": \"Common Container Interface (PHP FIG PSR-11)\",\n            \"homepage\": \"https://github.com/php-fig/container\",\n            \"keywords\": [\n                \"PSR-11\",\n                \"container\",\n                \"container-interface\",\n                \"container-interop\",\n                \"psr\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/php-fig/container/issues\",\n                \"source\": \"https://github.com/php-fig/container/tree/1.1.2\"\n            },\n            \"time\": \"2021-11-05T16:50:12+00:00\"\n        },\n        {\n            \"name\": \"psr/http-client\",\n            \"version\": \"1.0.3\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/php-fig/http-client.git\",\n                \"reference\": \"bb5906edc1c324c9a05aa0873d40117941e5fa90\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/php-fig/http-client/zipball/bb5906edc1c324c9a05aa0873d40117941e5fa90\",\n                \"reference\": \"bb5906edc1c324c9a05aa0873d40117941e5fa90\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.0 || ^8.0\",\n                \"psr/http-message\": \"^1.0 || ^2.0\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"1.0.x-dev\"\n                }\n            },\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Psr\\\\Http\\\\Client\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"PHP-FIG\",\n                    \"homepage\": \"https://www.php-fig.org/\"\n                }\n            ],\n            \"description\": \"Common interface for HTTP clients\",\n            \"homepage\": \"https://github.com/php-fig/http-client\",\n            \"keywords\": [\n                \"http\",\n                \"http-client\",\n                \"psr\",\n                \"psr-18\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/php-fig/http-client\"\n            },\n            \"time\": \"2023-09-23T14:17:50+00:00\"\n        },\n        {\n            \"name\": \"psr/http-factory\",\n            \"version\": \"1.1.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/php-fig/http-factory.git\",\n                \"reference\": \"2b4765fddfe3b508ac62f829e852b1501d3f6e8a\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/php-fig/http-factory/zipball/2b4765fddfe3b508ac62f829e852b1501d3f6e8a\",\n                \"reference\": \"2b4765fddfe3b508ac62f829e852b1501d3f6e8a\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.1\",\n                \"psr/http-message\": \"^1.0 || ^2.0\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"1.0.x-dev\"\n                }\n            },\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Psr\\\\Http\\\\Message\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"PHP-FIG\",\n                    \"homepage\": \"https://www.php-fig.org/\"\n                }\n            ],\n            \"description\": \"PSR-17: Common interfaces for PSR-7 HTTP message factories\",\n            \"keywords\": [\n                \"factory\",\n                \"http\",\n                \"message\",\n                \"psr\",\n                \"psr-17\",\n                \"psr-7\",\n                \"request\",\n                \"response\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/php-fig/http-factory\"\n            },\n            \"time\": \"2024-04-15T12:06:14+00:00\"\n        },\n        {\n            \"name\": \"psr/http-message\",\n            \"version\": \"1.1\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/php-fig/http-message.git\",\n                \"reference\": \"cb6ce4845ce34a8ad9e68117c10ee90a29919eba\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/php-fig/http-message/zipball/cb6ce4845ce34a8ad9e68117c10ee90a29919eba\",\n                \"reference\": \"cb6ce4845ce34a8ad9e68117c10ee90a29919eba\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2 || ^8.0\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"1.1.x-dev\"\n                }\n            },\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Psr\\\\Http\\\\Message\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"PHP-FIG\",\n                    \"homepage\": \"http://www.php-fig.org/\"\n                }\n            ],\n            \"description\": \"Common interface for HTTP messages\",\n            \"homepage\": \"https://github.com/php-fig/http-message\",\n            \"keywords\": [\n                \"http\",\n                \"http-message\",\n                \"psr\",\n                \"psr-7\",\n                \"request\",\n                \"response\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/php-fig/http-message/tree/1.1\"\n            },\n            \"time\": \"2023-04-04T09:50:52+00:00\"\n        },\n        {\n            \"name\": \"ralouphie/getallheaders\",\n            \"version\": \"3.0.3\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/ralouphie/getallheaders.git\",\n                \"reference\": \"120b605dfeb996808c31b6477290a714d356e822\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/ralouphie/getallheaders/zipball/120b605dfeb996808c31b6477290a714d356e822\",\n                \"reference\": \"120b605dfeb996808c31b6477290a714d356e822\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=5.6\"\n            },\n            \"require-dev\": {\n                \"php-coveralls/php-coveralls\": \"^2.1\",\n                \"phpunit/phpunit\": \"^5 || ^6.5\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"files\": [\n                    \"src/getallheaders.php\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Ralph Khattar\",\n                    \"email\": \"ralph.khattar@gmail.com\"\n                }\n            ],\n            \"description\": \"A polyfill for getallheaders.\",\n            \"support\": {\n                \"issues\": \"https://github.com/ralouphie/getallheaders/issues\",\n                \"source\": \"https://github.com/ralouphie/getallheaders/tree/develop\"\n            },\n            \"time\": \"2019-03-08T08:55:37+00:00\"\n        },\n        {\n            \"name\": \"slim/slim\",\n            \"version\": \"3.12.5\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/slimphp/Slim.git\",\n                \"reference\": \"565632b2d9b64ecedf89546edbbf4f3648089f0c\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/slimphp/Slim/zipball/565632b2d9b64ecedf89546edbbf4f3648089f0c\",\n                \"reference\": \"565632b2d9b64ecedf89546edbbf4f3648089f0c\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-json\": \"*\",\n                \"ext-libxml\": \"*\",\n                \"ext-simplexml\": \"*\",\n                \"nikic/fast-route\": \"^1.0\",\n                \"php\": \">=5.5.0\",\n                \"pimple/pimple\": \"^3.0\",\n                \"psr/container\": \"^1.0\",\n                \"psr/http-message\": \"^1.0\"\n            },\n            \"provide\": {\n                \"psr/http-message-implementation\": \"1.0\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^4.0\",\n                \"squizlabs/php_codesniffer\": \"^3.6.0\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Slim\\\\\": \"Slim\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Josh Lockhart\",\n                    \"email\": \"hello@joshlockhart.com\",\n                    \"homepage\": \"https://joshlockhart.com\"\n                },\n                {\n                    \"name\": \"Andrew Smith\",\n                    \"email\": \"a.smith@silentworks.co.uk\",\n                    \"homepage\": \"http://silentworks.co.uk\"\n                },\n                {\n                    \"name\": \"Rob Allen\",\n                    \"email\": \"rob@akrabat.com\",\n                    \"homepage\": \"http://akrabat.com\"\n                },\n                {\n                    \"name\": \"Gabriel Manricks\",\n                    \"email\": \"gmanricks@me.com\",\n                    \"homepage\": \"http://gabrielmanricks.com\"\n                }\n            ],\n            \"description\": \"Slim is a PHP micro framework that helps you quickly write simple yet powerful web applications and APIs\",\n            \"homepage\": \"https://slimframework.com\",\n            \"keywords\": [\n                \"api\",\n                \"framework\",\n                \"micro\",\n                \"router\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/slimphp/Slim/issues\",\n                \"source\": \"https://github.com/slimphp/Slim/tree/3.12.5\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://opencollective.com/slimphp\",\n                    \"type\": \"open_collective\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/slim/slim\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"time\": \"2023-07-23T04:32:51+00:00\"\n        },\n        {\n            \"name\": \"symfony/deprecation-contracts\",\n            \"version\": \"v2.5.3\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/symfony/deprecation-contracts.git\",\n                \"reference\": \"80d075412b557d41002320b96a096ca65aa2c98d\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/symfony/deprecation-contracts/zipball/80d075412b557d41002320b96a096ca65aa2c98d\",\n                \"reference\": \"80d075412b557d41002320b96a096ca65aa2c98d\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.1\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-main\": \"2.5-dev\"\n                },\n                \"thanks\": {\n                    \"name\": \"symfony/contracts\",\n                    \"url\": \"https://github.com/symfony/contracts\"\n                }\n            },\n            \"autoload\": {\n                \"files\": [\n                    \"function.php\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Nicolas Grekas\",\n                    \"email\": \"p@tchwork.com\"\n                },\n                {\n                    \"name\": \"Symfony Community\",\n                    \"homepage\": \"https://symfony.com/contributors\"\n                }\n            ],\n            \"description\": \"A generic function and convention to trigger deprecation notices\",\n            \"homepage\": \"https://symfony.com\",\n            \"support\": {\n                \"source\": \"https://github.com/symfony/deprecation-contracts/tree/v2.5.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://symfony.com/sponsor\",\n                    \"type\": \"custom\"\n                },\n                {\n                    \"url\": \"https://github.com/fabpot\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/symfony/symfony\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"time\": \"2023-01-24T14:02:46+00:00\"\n        },\n        {\n            \"name\": \"vboctor/disposable_email_checker\",\n            \"version\": \"3.1.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/vboctor/disposable_email_checker.git\",\n                \"reference\": \"e73467c0fd4773bf5a7f0c1cddd6dac92b1c8f73\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/vboctor/disposable_email_checker/zipball/e73467c0fd4773bf5a7f0c1cddd6dac92b1c8f73\",\n                \"reference\": \"e73467c0fd4773bf5a7f0c1cddd6dac92b1c8f73\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=5.0.0\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^5.0\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"VBoctor\\\\Email\\\\\": \"php/src\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Victor Boctor\",\n                    \"email\": \"victor@mantishub.net\"\n                }\n            ],\n            \"description\": \"Library to detect disposable email addresses\",\n            \"keywords\": [\n                \"disposable\",\n                \"email\",\n                \"signup\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/vboctor/disposable_email_checker/issues\",\n                \"source\": \"https://github.com/vboctor/disposable_email_checker/tree/master\"\n            },\n            \"time\": \"2018-11-04T18:33:32+00:00\"\n        }\n    ],\n    \"packages-dev\": [\n        {\n            \"name\": \"doctrine/instantiator\",\n            \"version\": \"1.5.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/doctrine/instantiator.git\",\n                \"reference\": \"0a0fa9780f5d4e507415a065172d26a98d02047b\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/doctrine/instantiator/zipball/0a0fa9780f5d4e507415a065172d26a98d02047b\",\n                \"reference\": \"0a0fa9780f5d4e507415a065172d26a98d02047b\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.1 || ^8.0\"\n            },\n            \"require-dev\": {\n                \"doctrine/coding-standard\": \"^9 || ^11\",\n                \"ext-pdo\": \"*\",\n                \"ext-phar\": \"*\",\n                \"phpbench/phpbench\": \"^0.16 || ^1\",\n                \"phpstan/phpstan\": \"^1.4\",\n                \"phpstan/phpstan-phpunit\": \"^1\",\n                \"phpunit/phpunit\": \"^7.5 || ^8.5 || ^9.5\",\n                \"vimeo/psalm\": \"^4.30 || ^5.4\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Doctrine\\\\Instantiator\\\\\": \"src/Doctrine/Instantiator/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Marco Pivetta\",\n                    \"email\": \"ocramius@gmail.com\",\n                    \"homepage\": \"https://ocramius.github.io/\"\n                }\n            ],\n            \"description\": \"A small, lightweight utility to instantiate objects in PHP without invoking their constructors\",\n            \"homepage\": \"https://www.doctrine-project.org/projects/instantiator.html\",\n            \"keywords\": [\n                \"constructor\",\n                \"instantiate\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/doctrine/instantiator/issues\",\n                \"source\": \"https://github.com/doctrine/instantiator/tree/1.5.0\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://www.doctrine-project.org/sponsorship.html\",\n                    \"type\": \"custom\"\n                },\n                {\n                    \"url\": \"https://www.patreon.com/phpdoctrine\",\n                    \"type\": \"patreon\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/doctrine%2Finstantiator\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"time\": \"2022-12-30T00:15:36+00:00\"\n        },\n        {\n            \"name\": \"myclabs/deep-copy\",\n            \"version\": \"1.12.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/myclabs/DeepCopy.git\",\n                \"reference\": \"3a6b9a42cd8f8771bd4295d13e1423fa7f3d942c\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/myclabs/DeepCopy/zipball/3a6b9a42cd8f8771bd4295d13e1423fa7f3d942c\",\n                \"reference\": \"3a6b9a42cd8f8771bd4295d13e1423fa7f3d942c\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.1 || ^8.0\"\n            },\n            \"conflict\": {\n                \"doctrine/collections\": \"<1.6.8\",\n                \"doctrine/common\": \"<2.13.3 || >=3 <3.2.2\"\n            },\n            \"require-dev\": {\n                \"doctrine/collections\": \"^1.6.8\",\n                \"doctrine/common\": \"^2.13.3 || ^3.2.2\",\n                \"phpspec/prophecy\": \"^1.10\",\n                \"phpunit/phpunit\": \"^7.5.20 || ^8.5.23 || ^9.5.13\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"files\": [\n                    \"src/DeepCopy/deep_copy.php\"\n                ],\n                \"psr-4\": {\n                    \"DeepCopy\\\\\": \"src/DeepCopy/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"description\": \"Create deep copies (clones) of your objects\",\n            \"keywords\": [\n                \"clone\",\n                \"copy\",\n                \"duplicate\",\n                \"object\",\n                \"object graph\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/myclabs/DeepCopy/issues\",\n                \"source\": \"https://github.com/myclabs/DeepCopy/tree/1.12.0\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/myclabs/deep-copy\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"time\": \"2024-06-12T14:39:25+00:00\"\n        },\n        {\n            \"name\": \"nikic/php-parser\",\n            \"version\": \"v5.3.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/nikic/PHP-Parser.git\",\n                \"reference\": \"3abf7425cd284141dc5d8d14a9ee444de3345d1a\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/nikic/PHP-Parser/zipball/3abf7425cd284141dc5d8d14a9ee444de3345d1a\",\n                \"reference\": \"3abf7425cd284141dc5d8d14a9ee444de3345d1a\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-ctype\": \"*\",\n                \"ext-json\": \"*\",\n                \"ext-tokenizer\": \"*\",\n                \"php\": \">=7.4\"\n            },\n            \"require-dev\": {\n                \"ircmaxell/php-yacc\": \"^0.0.7\",\n                \"phpunit/phpunit\": \"^9.0\"\n            },\n            \"bin\": [\n                \"bin/php-parse\"\n            ],\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"5.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"psr-4\": {\n                    \"PhpParser\\\\\": \"lib/PhpParser\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Nikita Popov\"\n                }\n            ],\n            \"description\": \"A PHP parser written in PHP\",\n            \"keywords\": [\n                \"parser\",\n                \"php\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/nikic/PHP-Parser/issues\",\n                \"source\": \"https://github.com/nikic/PHP-Parser/tree/v5.3.0\"\n            },\n            \"time\": \"2024-09-29T13:56:26+00:00\"\n        },\n        {\n            \"name\": \"phar-io/manifest\",\n            \"version\": \"2.0.4\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/phar-io/manifest.git\",\n                \"reference\": \"54750ef60c58e43759730615a392c31c80e23176\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/phar-io/manifest/zipball/54750ef60c58e43759730615a392c31c80e23176\",\n                \"reference\": \"54750ef60c58e43759730615a392c31c80e23176\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-dom\": \"*\",\n                \"ext-libxml\": \"*\",\n                \"ext-phar\": \"*\",\n                \"ext-xmlwriter\": \"*\",\n                \"phar-io/version\": \"^3.0.1\",\n                \"php\": \"^7.2 || ^8.0\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"2.0.x-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Arne Blankerts\",\n                    \"email\": \"arne@blankerts.de\",\n                    \"role\": \"Developer\"\n                },\n                {\n                    \"name\": \"Sebastian Heuer\",\n                    \"email\": \"sebastian@phpeople.de\",\n                    \"role\": \"Developer\"\n                },\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"Developer\"\n                }\n            ],\n            \"description\": \"Component for reading phar.io manifest information from a PHP Archive (PHAR)\",\n            \"support\": {\n                \"issues\": \"https://github.com/phar-io/manifest/issues\",\n                \"source\": \"https://github.com/phar-io/manifest/tree/2.0.4\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/theseer\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2024-03-03T12:33:53+00:00\"\n        },\n        {\n            \"name\": \"phar-io/version\",\n            \"version\": \"3.2.1\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/phar-io/version.git\",\n                \"reference\": \"4f7fd7836c6f332bb2933569e566a0d6c4cbed74\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/phar-io/version/zipball/4f7fd7836c6f332bb2933569e566a0d6c4cbed74\",\n                \"reference\": \"4f7fd7836c6f332bb2933569e566a0d6c4cbed74\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2 || ^8.0\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Arne Blankerts\",\n                    \"email\": \"arne@blankerts.de\",\n                    \"role\": \"Developer\"\n                },\n                {\n                    \"name\": \"Sebastian Heuer\",\n                    \"email\": \"sebastian@phpeople.de\",\n                    \"role\": \"Developer\"\n                },\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"Developer\"\n                }\n            ],\n            \"description\": \"Library for handling version information and constraints\",\n            \"support\": {\n                \"issues\": \"https://github.com/phar-io/version/issues\",\n                \"source\": \"https://github.com/phar-io/version/tree/3.2.1\"\n            },\n            \"time\": \"2022-02-21T01:04:05+00:00\"\n        },\n        {\n            \"name\": \"phpunit/php-code-coverage\",\n            \"version\": \"9.2.32\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/php-code-coverage.git\",\n                \"reference\": \"85402a822d1ecf1db1096959413d35e1c37cf1a5\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/php-code-coverage/zipball/85402a822d1ecf1db1096959413d35e1c37cf1a5\",\n                \"reference\": \"85402a822d1ecf1db1096959413d35e1c37cf1a5\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-dom\": \"*\",\n                \"ext-libxml\": \"*\",\n                \"ext-xmlwriter\": \"*\",\n                \"nikic/php-parser\": \"^4.19.1 || ^5.1.0\",\n                \"php\": \">=7.3\",\n                \"phpunit/php-file-iterator\": \"^3.0.6\",\n                \"phpunit/php-text-template\": \"^2.0.4\",\n                \"sebastian/code-unit-reverse-lookup\": \"^2.0.3\",\n                \"sebastian/complexity\": \"^2.0.3\",\n                \"sebastian/environment\": \"^5.1.5\",\n                \"sebastian/lines-of-code\": \"^1.0.4\",\n                \"sebastian/version\": \"^3.0.2\",\n                \"theseer/tokenizer\": \"^1.2.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.6\"\n            },\n            \"suggest\": {\n                \"ext-pcov\": \"PHP extension that provides line coverage\",\n                \"ext-xdebug\": \"PHP extension that provides line coverage as well as branch and path coverage\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-main\": \"9.2.x-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Library that provides collection, processing, and rendering functionality for PHP code coverage information.\",\n            \"homepage\": \"https://github.com/sebastianbergmann/php-code-coverage\",\n            \"keywords\": [\n                \"coverage\",\n                \"testing\",\n                \"xunit\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/php-code-coverage/issues\",\n                \"security\": \"https://github.com/sebastianbergmann/php-code-coverage/security/policy\",\n                \"source\": \"https://github.com/sebastianbergmann/php-code-coverage/tree/9.2.32\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2024-08-22T04:23:01+00:00\"\n        },\n        {\n            \"name\": \"phpunit/php-file-iterator\",\n            \"version\": \"3.0.6\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/php-file-iterator.git\",\n                \"reference\": \"cf1c2e7c203ac650e352f4cc675a7021e7d1b3cf\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/php-file-iterator/zipball/cf1c2e7c203ac650e352f4cc675a7021e7d1b3cf\",\n                \"reference\": \"cf1c2e7c203ac650e352f4cc675a7021e7d1b3cf\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"3.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"FilterIterator implementation that filters files based on a list of suffixes.\",\n            \"homepage\": \"https://github.com/sebastianbergmann/php-file-iterator/\",\n            \"keywords\": [\n                \"filesystem\",\n                \"iterator\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/php-file-iterator/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/php-file-iterator/tree/3.0.6\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2021-12-02T12:48:52+00:00\"\n        },\n        {\n            \"name\": \"phpunit/php-invoker\",\n            \"version\": \"3.1.1\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/php-invoker.git\",\n                \"reference\": \"5a10147d0aaf65b58940a0b72f71c9ac0423cc67\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/php-invoker/zipball/5a10147d0aaf65b58940a0b72f71c9ac0423cc67\",\n                \"reference\": \"5a10147d0aaf65b58940a0b72f71c9ac0423cc67\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"ext-pcntl\": \"*\",\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"suggest\": {\n                \"ext-pcntl\": \"*\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"3.1-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Invoke callables with a timeout\",\n            \"homepage\": \"https://github.com/sebastianbergmann/php-invoker/\",\n            \"keywords\": [\n                \"process\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/php-invoker/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/php-invoker/tree/3.1.1\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2020-09-28T05:58:55+00:00\"\n        },\n        {\n            \"name\": \"phpunit/php-text-template\",\n            \"version\": \"2.0.4\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/php-text-template.git\",\n                \"reference\": \"5da5f67fc95621df9ff4c4e5a84d6a8a2acf7c28\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/php-text-template/zipball/5da5f67fc95621df9ff4c4e5a84d6a8a2acf7c28\",\n                \"reference\": \"5da5f67fc95621df9ff4c4e5a84d6a8a2acf7c28\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"2.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Simple template engine.\",\n            \"homepage\": \"https://github.com/sebastianbergmann/php-text-template/\",\n            \"keywords\": [\n                \"template\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/php-text-template/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/php-text-template/tree/2.0.4\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2020-10-26T05:33:50+00:00\"\n        },\n        {\n            \"name\": \"phpunit/php-timer\",\n            \"version\": \"5.0.3\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/php-timer.git\",\n                \"reference\": \"5a63ce20ed1b5bf577850e2c4e87f4aa902afbd2\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/php-timer/zipball/5a63ce20ed1b5bf577850e2c4e87f4aa902afbd2\",\n                \"reference\": \"5a63ce20ed1b5bf577850e2c4e87f4aa902afbd2\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"5.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Utility class for timing\",\n            \"homepage\": \"https://github.com/sebastianbergmann/php-timer/\",\n            \"keywords\": [\n                \"timer\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/php-timer/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/php-timer/tree/5.0.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2020-10-26T13:16:10+00:00\"\n        },\n        {\n            \"name\": \"phpunit/phpunit\",\n            \"version\": \"9.6.21\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/phpunit.git\",\n                \"reference\": \"de6abf3b6f8dd955fac3caad3af7a9504e8c2ffa\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/phpunit/zipball/de6abf3b6f8dd955fac3caad3af7a9504e8c2ffa\",\n                \"reference\": \"de6abf3b6f8dd955fac3caad3af7a9504e8c2ffa\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"doctrine/instantiator\": \"^1.5.0 || ^2\",\n                \"ext-dom\": \"*\",\n                \"ext-json\": \"*\",\n                \"ext-libxml\": \"*\",\n                \"ext-mbstring\": \"*\",\n                \"ext-xml\": \"*\",\n                \"ext-xmlwriter\": \"*\",\n                \"myclabs/deep-copy\": \"^1.12.0\",\n                \"phar-io/manifest\": \"^2.0.4\",\n                \"phar-io/version\": \"^3.2.1\",\n                \"php\": \">=7.3\",\n                \"phpunit/php-code-coverage\": \"^9.2.32\",\n                \"phpunit/php-file-iterator\": \"^3.0.6\",\n                \"phpunit/php-invoker\": \"^3.1.1\",\n                \"phpunit/php-text-template\": \"^2.0.4\",\n                \"phpunit/php-timer\": \"^5.0.3\",\n                \"sebastian/cli-parser\": \"^1.0.2\",\n                \"sebastian/code-unit\": \"^1.0.8\",\n                \"sebastian/comparator\": \"^4.0.8\",\n                \"sebastian/diff\": \"^4.0.6\",\n                \"sebastian/environment\": \"^5.1.5\",\n                \"sebastian/exporter\": \"^4.0.6\",\n                \"sebastian/global-state\": \"^5.0.7\",\n                \"sebastian/object-enumerator\": \"^4.0.4\",\n                \"sebastian/resource-operations\": \"^3.0.4\",\n                \"sebastian/type\": \"^3.2.1\",\n                \"sebastian/version\": \"^3.0.2\"\n            },\n            \"suggest\": {\n                \"ext-soap\": \"To be able to generate mocks based on WSDL files\",\n                \"ext-xdebug\": \"PHP extension that provides line coverage as well as branch and path coverage\"\n            },\n            \"bin\": [\n                \"phpunit\"\n            ],\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"9.6-dev\"\n                }\n            },\n            \"autoload\": {\n                \"files\": [\n                    \"src/Framework/Assert/Functions.php\"\n                ],\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"The PHP Unit Testing framework.\",\n            \"homepage\": \"https://phpunit.de/\",\n            \"keywords\": [\n                \"phpunit\",\n                \"testing\",\n                \"xunit\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/phpunit/issues\",\n                \"security\": \"https://github.com/sebastianbergmann/phpunit/security/policy\",\n                \"source\": \"https://github.com/sebastianbergmann/phpunit/tree/9.6.21\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://phpunit.de/sponsors.html\",\n                    \"type\": \"custom\"\n                },\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/phpunit/phpunit\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"time\": \"2024-09-19T10:50:18+00:00\"\n        },\n        {\n            \"name\": \"sebastian/cli-parser\",\n            \"version\": \"1.0.2\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/cli-parser.git\",\n                \"reference\": \"2b56bea83a09de3ac06bb18b92f068e60cc6f50b\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/cli-parser/zipball/2b56bea83a09de3ac06bb18b92f068e60cc6f50b\",\n                \"reference\": \"2b56bea83a09de3ac06bb18b92f068e60cc6f50b\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"1.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Library for parsing CLI options\",\n            \"homepage\": \"https://github.com/sebastianbergmann/cli-parser\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/cli-parser/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/cli-parser/tree/1.0.2\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2024-03-02T06:27:43+00:00\"\n        },\n        {\n            \"name\": \"sebastian/code-unit\",\n            \"version\": \"1.0.8\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/code-unit.git\",\n                \"reference\": \"1fc9f64c0927627ef78ba436c9b17d967e68e120\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/code-unit/zipball/1fc9f64c0927627ef78ba436c9b17d967e68e120\",\n                \"reference\": \"1fc9f64c0927627ef78ba436c9b17d967e68e120\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"1.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Collection of value objects that represent the PHP code units\",\n            \"homepage\": \"https://github.com/sebastianbergmann/code-unit\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/code-unit/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/code-unit/tree/1.0.8\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2020-10-26T13:08:54+00:00\"\n        },\n        {\n            \"name\": \"sebastian/code-unit-reverse-lookup\",\n            \"version\": \"2.0.3\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/code-unit-reverse-lookup.git\",\n                \"reference\": \"ac91f01ccec49fb77bdc6fd1e548bc70f7faa3e5\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/code-unit-reverse-lookup/zipball/ac91f01ccec49fb77bdc6fd1e548bc70f7faa3e5\",\n                \"reference\": \"ac91f01ccec49fb77bdc6fd1e548bc70f7faa3e5\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"2.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                }\n            ],\n            \"description\": \"Looks up which function or method a line of code belongs to\",\n            \"homepage\": \"https://github.com/sebastianbergmann/code-unit-reverse-lookup/\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/code-unit-reverse-lookup/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/code-unit-reverse-lookup/tree/2.0.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2020-09-28T05:30:19+00:00\"\n        },\n        {\n            \"name\": \"sebastian/comparator\",\n            \"version\": \"4.0.8\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/comparator.git\",\n                \"reference\": \"fa0f136dd2334583309d32b62544682ee972b51a\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/comparator/zipball/fa0f136dd2334583309d32b62544682ee972b51a\",\n                \"reference\": \"fa0f136dd2334583309d32b62544682ee972b51a\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\",\n                \"sebastian/diff\": \"^4.0\",\n                \"sebastian/exporter\": \"^4.0\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"4.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                },\n                {\n                    \"name\": \"Jeff Welch\",\n                    \"email\": \"whatthejeff@gmail.com\"\n                },\n                {\n                    \"name\": \"Volker Dusch\",\n                    \"email\": \"github@wallbash.com\"\n                },\n                {\n                    \"name\": \"Bernhard Schussek\",\n                    \"email\": \"bschussek@2bepublished.at\"\n                }\n            ],\n            \"description\": \"Provides the functionality to compare PHP values for equality\",\n            \"homepage\": \"https://github.com/sebastianbergmann/comparator\",\n            \"keywords\": [\n                \"comparator\",\n                \"compare\",\n                \"equality\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/comparator/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/comparator/tree/4.0.8\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2022-09-14T12:41:17+00:00\"\n        },\n        {\n            \"name\": \"sebastian/complexity\",\n            \"version\": \"2.0.3\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/complexity.git\",\n                \"reference\": \"25f207c40d62b8b7aa32f5ab026c53561964053a\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/complexity/zipball/25f207c40d62b8b7aa32f5ab026c53561964053a\",\n                \"reference\": \"25f207c40d62b8b7aa32f5ab026c53561964053a\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"nikic/php-parser\": \"^4.18 || ^5.0\",\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"2.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Library for calculating the complexity of PHP code units\",\n            \"homepage\": \"https://github.com/sebastianbergmann/complexity\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/complexity/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/complexity/tree/2.0.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2023-12-22T06:19:30+00:00\"\n        },\n        {\n            \"name\": \"sebastian/diff\",\n            \"version\": \"4.0.6\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/diff.git\",\n                \"reference\": \"ba01945089c3a293b01ba9badc29ad55b106b0bc\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/diff/zipball/ba01945089c3a293b01ba9badc29ad55b106b0bc\",\n                \"reference\": \"ba01945089c3a293b01ba9badc29ad55b106b0bc\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\",\n                \"symfony/process\": \"^4.2 || ^5\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"4.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                },\n                {\n                    \"name\": \"Kore Nordmann\",\n                    \"email\": \"mail@kore-nordmann.de\"\n                }\n            ],\n            \"description\": \"Diff implementation\",\n            \"homepage\": \"https://github.com/sebastianbergmann/diff\",\n            \"keywords\": [\n                \"diff\",\n                \"udiff\",\n                \"unidiff\",\n                \"unified diff\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/diff/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/diff/tree/4.0.6\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2024-03-02T06:30:58+00:00\"\n        },\n        {\n            \"name\": \"sebastian/environment\",\n            \"version\": \"5.1.5\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/environment.git\",\n                \"reference\": \"830c43a844f1f8d5b7a1f6d6076b784454d8b7ed\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/environment/zipball/830c43a844f1f8d5b7a1f6d6076b784454d8b7ed\",\n                \"reference\": \"830c43a844f1f8d5b7a1f6d6076b784454d8b7ed\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"suggest\": {\n                \"ext-posix\": \"*\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"5.1-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                }\n            ],\n            \"description\": \"Provides functionality to handle HHVM/PHP environments\",\n            \"homepage\": \"http://www.github.com/sebastianbergmann/environment\",\n            \"keywords\": [\n                \"Xdebug\",\n                \"environment\",\n                \"hhvm\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/environment/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/environment/tree/5.1.5\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2023-02-03T06:03:51+00:00\"\n        },\n        {\n            \"name\": \"sebastian/exporter\",\n            \"version\": \"4.0.6\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/exporter.git\",\n                \"reference\": \"78c00df8f170e02473b682df15bfcdacc3d32d72\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/exporter/zipball/78c00df8f170e02473b682df15bfcdacc3d32d72\",\n                \"reference\": \"78c00df8f170e02473b682df15bfcdacc3d32d72\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\",\n                \"sebastian/recursion-context\": \"^4.0\"\n            },\n            \"require-dev\": {\n                \"ext-mbstring\": \"*\",\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"4.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                },\n                {\n                    \"name\": \"Jeff Welch\",\n                    \"email\": \"whatthejeff@gmail.com\"\n                },\n                {\n                    \"name\": \"Volker Dusch\",\n                    \"email\": \"github@wallbash.com\"\n                },\n                {\n                    \"name\": \"Adam Harvey\",\n                    \"email\": \"aharvey@php.net\"\n                },\n                {\n                    \"name\": \"Bernhard Schussek\",\n                    \"email\": \"bschussek@gmail.com\"\n                }\n            ],\n            \"description\": \"Provides the functionality to export PHP variables for visualization\",\n            \"homepage\": \"https://www.github.com/sebastianbergmann/exporter\",\n            \"keywords\": [\n                \"export\",\n                \"exporter\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/exporter/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/exporter/tree/4.0.6\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2024-03-02T06:33:00+00:00\"\n        },\n        {\n            \"name\": \"sebastian/global-state\",\n            \"version\": \"5.0.7\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/global-state.git\",\n                \"reference\": \"bca7df1f32ee6fe93b4d4a9abbf69e13a4ada2c9\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/global-state/zipball/bca7df1f32ee6fe93b4d4a9abbf69e13a4ada2c9\",\n                \"reference\": \"bca7df1f32ee6fe93b4d4a9abbf69e13a4ada2c9\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\",\n                \"sebastian/object-reflector\": \"^2.0\",\n                \"sebastian/recursion-context\": \"^4.0\"\n            },\n            \"require-dev\": {\n                \"ext-dom\": \"*\",\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"suggest\": {\n                \"ext-uopz\": \"*\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"5.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                }\n            ],\n            \"description\": \"Snapshotting of global state\",\n            \"homepage\": \"http://www.github.com/sebastianbergmann/global-state\",\n            \"keywords\": [\n                \"global state\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/global-state/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/global-state/tree/5.0.7\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2024-03-02T06:35:11+00:00\"\n        },\n        {\n            \"name\": \"sebastian/lines-of-code\",\n            \"version\": \"1.0.4\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/lines-of-code.git\",\n                \"reference\": \"e1e4a170560925c26d424b6a03aed157e7dcc5c5\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/lines-of-code/zipball/e1e4a170560925c26d424b6a03aed157e7dcc5c5\",\n                \"reference\": \"e1e4a170560925c26d424b6a03aed157e7dcc5c5\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"nikic/php-parser\": \"^4.18 || ^5.0\",\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"1.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Library for counting the lines of code in PHP source code\",\n            \"homepage\": \"https://github.com/sebastianbergmann/lines-of-code\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/lines-of-code/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/lines-of-code/tree/1.0.4\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2023-12-22T06:20:34+00:00\"\n        },\n        {\n            \"name\": \"sebastian/object-enumerator\",\n            \"version\": \"4.0.4\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/object-enumerator.git\",\n                \"reference\": \"5c9eeac41b290a3712d88851518825ad78f45c71\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/object-enumerator/zipball/5c9eeac41b290a3712d88851518825ad78f45c71\",\n                \"reference\": \"5c9eeac41b290a3712d88851518825ad78f45c71\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\",\n                \"sebastian/object-reflector\": \"^2.0\",\n                \"sebastian/recursion-context\": \"^4.0\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"4.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                }\n            ],\n            \"description\": \"Traverses array structures and object graphs to enumerate all referenced objects\",\n            \"homepage\": \"https://github.com/sebastianbergmann/object-enumerator/\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/object-enumerator/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/object-enumerator/tree/4.0.4\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2020-10-26T13:12:34+00:00\"\n        },\n        {\n            \"name\": \"sebastian/object-reflector\",\n            \"version\": \"2.0.4\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/object-reflector.git\",\n                \"reference\": \"b4f479ebdbf63ac605d183ece17d8d7fe49c15c7\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/object-reflector/zipball/b4f479ebdbf63ac605d183ece17d8d7fe49c15c7\",\n                \"reference\": \"b4f479ebdbf63ac605d183ece17d8d7fe49c15c7\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"2.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                }\n            ],\n            \"description\": \"Allows reflection of object attributes, including inherited and non-public ones\",\n            \"homepage\": \"https://github.com/sebastianbergmann/object-reflector/\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/object-reflector/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/object-reflector/tree/2.0.4\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2020-10-26T13:14:26+00:00\"\n        },\n        {\n            \"name\": \"sebastian/recursion-context\",\n            \"version\": \"4.0.5\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/recursion-context.git\",\n                \"reference\": \"e75bd0f07204fec2a0af9b0f3cfe97d05f92efc1\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/recursion-context/zipball/e75bd0f07204fec2a0af9b0f3cfe97d05f92efc1\",\n                \"reference\": \"e75bd0f07204fec2a0af9b0f3cfe97d05f92efc1\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"4.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                },\n                {\n                    \"name\": \"Jeff Welch\",\n                    \"email\": \"whatthejeff@gmail.com\"\n                },\n                {\n                    \"name\": \"Adam Harvey\",\n                    \"email\": \"aharvey@php.net\"\n                }\n            ],\n            \"description\": \"Provides functionality to recursively process PHP variables\",\n            \"homepage\": \"https://github.com/sebastianbergmann/recursion-context\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/recursion-context/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/recursion-context/tree/4.0.5\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2023-02-03T06:07:39+00:00\"\n        },\n        {\n            \"name\": \"sebastian/resource-operations\",\n            \"version\": \"3.0.4\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/resource-operations.git\",\n                \"reference\": \"05d5692a7993ecccd56a03e40cd7e5b09b1d404e\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/resource-operations/zipball/05d5692a7993ecccd56a03e40cd7e5b09b1d404e\",\n                \"reference\": \"05d5692a7993ecccd56a03e40cd7e5b09b1d404e\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.0\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-main\": \"3.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\"\n                }\n            ],\n            \"description\": \"Provides a list of PHP built-in functions that operate on resources\",\n            \"homepage\": \"https://www.github.com/sebastianbergmann/resource-operations\",\n            \"support\": {\n                \"source\": \"https://github.com/sebastianbergmann/resource-operations/tree/3.0.4\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2024-03-14T16:00:52+00:00\"\n        },\n        {\n            \"name\": \"sebastian/type\",\n            \"version\": \"3.2.1\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/type.git\",\n                \"reference\": \"75e2c2a32f5e0b3aef905b9ed0b179b953b3d7c7\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/type/zipball/75e2c2a32f5e0b3aef905b9ed0b179b953b3d7c7\",\n                \"reference\": \"75e2c2a32f5e0b3aef905b9ed0b179b953b3d7c7\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^9.5\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"3.2-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Collection of value objects that represent the types of the PHP type system\",\n            \"homepage\": \"https://github.com/sebastianbergmann/type\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/type/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/type/tree/3.2.1\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2023-02-03T06:13:03+00:00\"\n        },\n        {\n            \"name\": \"sebastian/version\",\n            \"version\": \"3.0.2\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/sebastianbergmann/version.git\",\n                \"reference\": \"c6c1022351a901512170118436c764e473f6de8c\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/sebastianbergmann/version/zipball/c6c1022351a901512170118436c764e473f6de8c\",\n                \"reference\": \"c6c1022351a901512170118436c764e473f6de8c\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.3\"\n            },\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"3.0-dev\"\n                }\n            },\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Sebastian Bergmann\",\n                    \"email\": \"sebastian@phpunit.de\",\n                    \"role\": \"lead\"\n                }\n            ],\n            \"description\": \"Library that helps with managing the version number of Git-hosted PHP projects\",\n            \"homepage\": \"https://github.com/sebastianbergmann/version\",\n            \"support\": {\n                \"issues\": \"https://github.com/sebastianbergmann/version/issues\",\n                \"source\": \"https://github.com/sebastianbergmann/version/tree/3.0.2\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/sebastianbergmann\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2020-09-28T06:39:44+00:00\"\n        },\n        {\n            \"name\": \"theseer/tokenizer\",\n            \"version\": \"1.2.3\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/theseer/tokenizer.git\",\n                \"reference\": \"737eda637ed5e28c3413cb1ebe8bb52cbf1ca7a2\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/theseer/tokenizer/zipball/737eda637ed5e28c3413cb1ebe8bb52cbf1ca7a2\",\n                \"reference\": \"737eda637ed5e28c3413cb1ebe8bb52cbf1ca7a2\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-dom\": \"*\",\n                \"ext-tokenizer\": \"*\",\n                \"ext-xmlwriter\": \"*\",\n                \"php\": \"^7.2 || ^8.0\"\n            },\n            \"type\": \"library\",\n            \"autoload\": {\n                \"classmap\": [\n                    \"src/\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Arne Blankerts\",\n                    \"email\": \"arne@blankerts.de\",\n                    \"role\": \"Developer\"\n                }\n            ],\n            \"description\": \"A small library for converting tokenized PHP source code into XML and potentially other formats\",\n            \"support\": {\n                \"issues\": \"https://github.com/theseer/tokenizer/issues\",\n                \"source\": \"https://github.com/theseer/tokenizer/tree/1.2.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/theseer\",\n                    \"type\": \"github\"\n                }\n            ],\n            \"time\": \"2024-03-03T12:36:25+00:00\"\n        }\n    ],\n    \"aliases\": [],\n    \"minimum-stability\": \"stable\",\n    \"stability-flags\": {\n        \"dapphp/securimage\": 20\n    },\n    \"prefer-stable\": false,\n    \"prefer-lowest\": false,\n    \"platform\": {\n        \"php\": \"^7.4 || ^8.0\",\n        \"ext-mbstring\": \"*\",\n        \"ext-json\": \"*\",\n        \"ext-tokenizer\": \"*\"\n    },\n    \"platform-dev\": {\n        \"ext-zip\": \"*\"\n    },\n    \"platform-overrides\": {\n        \"php\": \"7.4.33\"\n    },\n    \"plugin-api-version\": \"2.6.0\"\n}\n"
        },
        {
          "name": "config",
          "type": "tree",
          "content": null
        },
        {
          "name": "config_defaults_inc.php",
          "type": "blob",
          "size": 148.9091796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Default Configuration Variables.\n *\n * This file should not be changed. If you want to override any of the values\n * defined here, define them in a file called config/config_inc.php, which will\n * be loaded after this file.\n *\n * In general a value of OFF means the feature is disabled and ON means the\n * feature is enabled.  Any other cases will have an explanation.\n *\n * For more details see https://www.mantisbt.org/docs/master/\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n */\n\n##############################\n# MantisBT Database Settings #\n##############################\n\n/**\n * Database Server host name.\n *\n * Hostname should be either a hostname or connection string to supply to adodb.\n *\n * For example, if you would like to connect to a database server on the local\n * machine, set this to 'localhost'.\n *\n * If you need to supply a port to connect to, set hostname as 'localhost:3306'.\n *\n * @global string $g_hostname\n */\n$g_hostname = 'localhost';\n\n/**\n * User name to use for connecting to the database.\n *\n * The user needs to have read/write access to the MantisBT database.\n * The default user name is \"root\".\n *\n * @global string $g_db_username\n */\n$g_db_username = 'root';\n\n/**\n * Password for the specified user name.\n *\n * The default password is empty.\n *\n * @global string $g_db_password\n */\n$g_db_password = '';\n\n/**\n * Name of database that contains MantisBT tables.\n *\n * The default database name is \"bugtracker\".\n *\n * @global string $g_database_name\n */\n$g_database_name = 'bugtracker';\n\n/**\n * Defines the database type.\n *\n * Supported types are listed below; the corresponding PHP extension must be enabled.\n *\n * RDBMS           db_type       PHP ext   Comments\n * -----           -------       -------   --------\n * MySQL           mysqli        mysqli    default\n * PostgreSQL      pgsql         pgsql\n * MS SQL Server   mssqlnative   sqlsrv    experimental\n * Oracle          oci8          oci8      experimental\n *\n * @global string $g_db_type\n */\n$g_db_type = 'mysqli';\n\n/**\n * Adodb Data Source Name.\n *\n * This is an EXPERIMENTAL field.\n *\n * If the above database settings, do not provide enough flexibility, it is\n * possible to specify a dsn for the database connection. For further details,\n * currently, you need to see the adodb manual at\n * http://phplens.com/adodb/code.initialization.html#dsnsupport. For example,\n * if db_type is odbc_mssql. The following is an example dsn:\n * \"Driver={SQL Server Native Client 10.0};SERVER=.\\sqlexpress;DATABASE=bugtracker;UID=mantis;PWD=password;\"\n *\n * NOTE: the installer does not yet fully support the use of dsn's\n *\n * @global string $g_dsn\n */\n$g_dsn = '';\n\n/**\n * Database Table prefix.\n *\n * The given string is added with an underscore before the base table name,\n * e.g. 'bug' => 'mantis_bug'.\n * To avoid the 30-char limit on identifiers in Oracle (< 12cR2), the prefix\n * should be set to blank or kept as short as possible (e.g. 'm')\n *\n * @global string $g_db_table_prefix\n */\n$g_db_table_prefix = 'mantis';\n\n/**\n * Database Table suffix.\n *\n * The given string is added with an underscore after the base table name,\n * e.g. 'bug' => 'bug_table'.\n * To avoid the 30-char limit on identifiers in Oracle (< 12cR2), the prefix\n * should be set to blank or kept as short as possible.\n * @see $g_db_table_prefix for size limitation recommendation\n *\n * @global string $g_db_table_suffix\n */\n$g_db_table_suffix = '_table';\n\n/**\n * Plugin Table prefix.\n *\n * The given string is added with an underscore between the table prefix and\n * the base table name, and the plugin basename is added after that\n * e.g. 'Example' plugin's table 'foo' => 'mantis_plugin_Example_foo_table'.\n * To avoid the 30-char limit on identifiers in Oracle (< 12cR2), the prefix\n * should be kept as short as possible (e.g. 'plg').\n * It is strongly recommended not to use an empty string here.\n *\n * @see $g_db_table_prefix\n * @global string $g_db_table_plugin_prefix\n */\n$g_db_table_plugin_prefix = 'plugin';\n\n####################\n# Folder Locations #\n####################\n\n/**\n * Path to root MantisBT folder.\n *\n * Requires trailing / or \\.\n *\n * @global string $g_absolute_path\n */\n$g_absolute_path = __DIR__ . DIRECTORY_SEPARATOR;\n\n/**\n * Path to core folder.\n *\n * The default is usually OK, unless you moved the 'core' directory out of your\n * webroot (recommended).\n *\n * @global string $g_core_path\n */\n$g_core_path = $g_absolute_path . 'core' . DIRECTORY_SEPARATOR;\n\n/**\n * Path to classes folder.\n *\n * Requires trailing / or \\.\n *\n * @global string $g_class_path\n */\n$g_class_path = $g_core_path . 'classes' . DIRECTORY_SEPARATOR;\n\n/**\n * Path to library folder for 3rd party libraries.\n *\n * Requires trailing / or \\.\n *\n * @global string $g_library_path\n */\n$g_library_path = $g_absolute_path . 'library' . DIRECTORY_SEPARATOR;\n\n/**\n * Path to vendor folder for 3rd party libraries.\n *\n * Requires trailing / or \\.\n *\n * @global string $g_library_path\n */\n$g_vendor_path = $g_absolute_path . 'vendor' . DIRECTORY_SEPARATOR;\n\n/**\n * Path to lang folder for language files.\n *\n * Requires trailing / or \\.\n *\n * @global string $g_language_path\n */\n$g_language_path = $g_absolute_path . 'lang' . DIRECTORY_SEPARATOR;\n\n/**\n * Path to custom configuration folder.\n *\n * Requires trailing / or \\.\n *\n * If MANTIS_CONFIG_FOLDER environment variable is set, it will be used.\n * This allows Apache vhost to be used to setup multiple instances serviced by\n * same code by multiple configs.\n *\n * @global string $g_config_path\n */\n$t_local_config = getenv( 'MANTIS_CONFIG_FOLDER' );\nif( $t_local_config && is_dir( $t_local_config ) ) {\n\t$g_config_path = $t_local_config;\n} else {\n\t$g_config_path = $g_absolute_path . 'config' . DIRECTORY_SEPARATOR;\n}\n\nunset( $t_local_config );\n\n##########################\n# MantisBT Path Settings #\n##########################\n\n/**\n * Full URL to your installation as seen from the web browser.\n *\n * Requires trailing `/`.\n *\n * If not set, MantisBT will default this to a working URL valid for most\n * installations.\n *\n * WARNING: The default is built based on headers from the HTTP request\n * ({@see set_default_path()} in core.php). This is a potential security risk,\n * as the system will be exposed to Host Header injection attacks, so it is\n * strongly recommended to initialize this in config_inc.php.\n *\n * @global string $g_path\n */\n$g_path\t= '';\n\n/**\n * Short web path without the domain name.\n *\n * requires trailing `/`.\n *\n * This is defined by MantisBT core based on the script being executed, and\n * should not be set in config_inc.php.\n *\n * @global string $g_short_path\n */\n$g_short_path = '';\n\n/**\n * Used to link to manual for User Documentation.\n *\n * This can be either a full URL or a relative path to the MantisBT root.\n * If a relative path does not exist, the link will fall back to the online\n * documentation at https://mantisbt.org. No check is performed on URLs.\n *\n * @global string $g_manual_url\n */\n$g_manual_url = 'doc/en-US/Admin_Guide/html-desktop/';\n\n##############\n# Web Server #\n##############\n\n/**\n * Session save path.\n *\n * If false, uses default value as set by session handler.\n *\n * @global bool $g_session_save_path\n */\n$g_session_save_path = false;\n\n/**\n * Session validation.\n *\n * WARNING: Disabling this could be a potential security risk!!\n *\n * @global int $g_session_validation\n */\n$g_session_validation = ON;\n\n/**\n * Form security validation.\n *\n * This protects against Cross-Site Request Forgery, but some proxy servers may\n * not correctly work with this option enabled because they cache pages\n * incorrectly.\n *\n * WARNING: Disabling this is a security risk!!\n *\n * @global int $g_form_security_validation\n */\n$g_form_security_validation = ON;\n\n#############################\n# Security and Cryptography #\n#############################\n\n/**\n * Master salt value used for cryptographic hashing throughout MantisBT.\n *\n * This value must be kept secret at all costs. You must generate a unique and\n * random salt value for each installation of MantisBT you control. The\n * minimum length of this string must be at least 16 characters.\n *\n * The value you select for this salt should be a long string generated using\n * a secure random number generator. An example for Linux systems is:\n *\n *    cat /dev/urandom | head -c 64 | base64\n *\n * Note that the number of bits of entropy per byte of output from /dev/urandom\n * is not 8. If you're particularly paranoid and don't mind waiting a long\n * time, you could use /dev/random to get much closer to 8 bits of entropy per\n * byte. Moving the mouse (if possible) while generating entropy via\n * /dev/random will greatly improve the speed at which /dev/random produces\n * entropy.\n *\n * WARNING: This configuration option has a profound impact on the security of\n * your MantisBT installation. Failure to set this configuration option\n * correctly could lead to your MantisBT installation being compromised. Ensure\n * that this value remains secret. Treat it with the same security that you'd\n * treat the password to your MantisDB database.\n *\n * This setting is blank by default. MantisBT will not operate in this state.\n * Hence, you are forced to change the value of this configuration option.\n *\n * @global string $g_crypto_master_salt\n */\n$g_crypto_master_salt = '';\n\n############################\n# Signup and Lost Password #\n############################\n\n/**\n * Allow users to signup for their own accounts.\n *\n * If ON, then $g_send_reset_password must be ON as well, and mail settings\n * must be correctly configured.\n *\n * @see $g_send_reset_password\n * @global int $g_allow_signup\n */\n$g_allow_signup = ON;\n\n/**\n * Maximum number of failed login attempts before the user's account is locked.\n *\n * Once locked, it is required to reset the password (lost password).\n * The counter is reset to zero after each successful login.\n *\n * Set to OFF to disable this feature and allow unlimited failed login attempts.\n *\n * @global int $g_max_failed_login_count\n */\n$g_max_failed_login_count = 5;\n\n/**\n * Access level required to be notified when a new user has been created using\n * the \"signup form\".\n *\n * @global int $g_notify_new_user_created_threshold_min\n */\n$g_notify_new_user_created_threshold_min = ADMINISTRATOR;\n\n/**\n * Send Password reset emails.\n *\n * If ON, users will be sent their password when their account is created\n * or password reset (this requires mail settings to be correctly configured).\n *\n * If OFF, then the Administrator will have to provide a password when\n * creating new accounts, and the password will be set to blank when reset.\n *\n * @global int $g_send_reset_password\n */\n$g_send_reset_password = ON;\n\n/**\n * Use captcha image to validate subscription it requires GD library installed.\n *\n * @global int $g_signup_use_captcha\n */\n$g_signup_use_captcha = ON;\n\n/**\n * Path to TrueType font files.\n *\n * Absolute path (with trailing slash!) to the folder containing the TrueType\n * Font files used for the Relationship and Workflow Graphs.\n *\n * @global string $g_system_font_folder\n */\n$g_system_font_folder = '';\n\n/**\n * Setting to disable the 'lost your password' feature.\n *\n * @global int $g_lost_password_feature\n */\n$g_lost_password_feature = ON;\n\n/**\n * Max. simultaneous requests of 'lost password'.\n *\n * When this value is reached, it's no longer possible to request new password\n * reset. Value resets to zero at each successfully login.\n *\n * @global int $g_max_lost_password_in_progress_count\n */\n$g_max_lost_password_in_progress_count = 3;\n\n#############\n# Anti-Spam #\n#############\n\n/**\n * Max number of events to allow for users with default access level.\n *\n * Use 0 for no limit. Default is 10.\n *\n * @global int $g_antispam_max_event_count\n * @see $g_default_new_account_access_level\n */\n$g_antispam_max_event_count = 10;\n\n/**\n * Time window to enforce max events within.\n *\n * Default is 3600 seconds (1 hour).\n *\n * @global int $g_antispam_time_window_in_seconds\n */\n$g_antispam_time_window_in_seconds = 3600;\n\n###########################\n# MantisBT Email Settings #\n###########################\n\n/**\n * Webmaster's email address.\n *\n * This is shown publicly at the bottom of each page and thus may be susceptible\n * to being detected by spam email harvesters.\n *\n * @global string $g_webmaster_email\n */\n$g_webmaster_email = 'webmaster@example.com';\n\n/**\n * The sender's address for email notifications.\n *\n * Part of 'From: ' header in emails.\n *\n * @global string $g_from_email\n */\n$g_from_email = 'noreply@example.com';\n\n/**\n * The sender name's for email notifications.\n *\n * Part of 'From: ' header in emails.\n *\n * @global string $g_from_name\n */\n$g_from_name = 'Mantis Bug Tracker';\n\n/**\n * The return address for bounced mail.\n *\n * @global string $g_return_path_email\n */\n$g_return_path_email = 'admin@example.com';\n\n/**\n * Allow email notifications.\n *\n * Set to ON to enable email notifications, OFF to disable them. Note that\n * disabling email notifications has no effect on emails generated as part\n * of the user signup process. When set to OFF, the password reset feature\n * is disabled. Additionally, notifications of administrators updating\n * accounts are not sent to users.\n *\n * @global int $g_enable_email_notification\n */\n$g_enable_email_notification = ON;\n\n/**\n * Send verbose email notifications.\n *\n * When enabled, the email notifications will send the full issue with\n * a hint about the change type at the top, rather than using dedicated\n * notifications that are focused on what changed.  This change can be\n * overridden in the database per user.\n *\n * @global int $g_email_notifications_verbose\n */\n$g_email_notifications_verbose = OFF;\n\n/**\n * Sets the default email notifications values for different user categories.\n *\n * In combination with *notify_flags* (see below), this config option controls\n * who should get email notifications on different actions/statuses.\n *\n * The user categories are:\n *\n *      'reporter': the reporter of the bug\n *       'handler': the handler of the bug\n *       'monitor': users who are monitoring a bug\n *      'bugnotes': users who have added a bugnote to the bug\n *      'category': category owners\n *      'explicit': users who are explicitly specified by the code based on the\n *                  action (e.g. user added to monitor list).\n * 'threshold_max': all users with access <= max\n * 'threshold_min': ..and with access >= min\n *\n * The second config option (notify_flags) sets overrides for specific\n * actions/statuses. If a user category is not listed for an action, the\n * default from the config option above is used.  The possible actions are:\n *\n *             'new': a new bug has been added\n *           'owner': a bug has been assigned to a new owner\n *        'reopened': a bug has been reopened\n *         'deleted': a bug has been deleted\n *         'updated': a bug has been updated\n *         'bugnote': a bugnote has been added to a bug\n *         'sponsor': sponsorship has changed on this bug\n *        'relation': a relationship has changed on this bug\n *         'monitor': an issue is monitored.\n *        '<status>': eg: 'resolved', 'closed', 'feedback', 'acknowledged', etc.\n *                     this list corresponds to $g_status_enum_string\n *\n * Examples:\n * - If you wanted to have all developers get notified of new bugs you might\n *   add the following lines to your config file:\n *\n *   $g_notify_flags['new']['threshold_min'] = DEVELOPER;\n *   $g_notify_flags['new']['threshold_max'] = DEVELOPER;\n *\n * - You might want to do something similar so all managers are notified when a\n *   bug is closed.\n * - If you did not want reporters to be notified when a bug is closed\n *   (only when it is resolved) you would use:\n *\n *   $g_notify_flags['closed']['reporter'] = OFF;\n *\n * @see $g_notify_flags\n * @global array $g_default_notify_flags\n */\n$g_default_notify_flags = array(\n\t'reporter'      => ON,\n\t'handler'       => ON,\n\t'monitor'       => ON,\n\t'bugnotes'      => ON,\n\t'category'      => ON,\n\t'explicit'      => ON,\n\t'threshold_min' => NOBODY,\n\t'threshold_max' => NOBODY\n);\n\n/**\n * Sets notifications overrides for specific actions/statuses.\n *\n * See above for detailed information. As an example of how to use this config\n * option, the default setting\n * - disables bugnotes notifications on new bugs (not needed in this case)\n * - disables all notifications for monitoring event, except explicit\n * example of how to use this config option.\n\n * @see $g_default_notify_flags\n * @global array $g_notify_flags\n */\n$g_notify_flags = array(\n\t'new' => array(\n\t\t'bugnotes'      => OFF,\n\t),\n\t'monitor' => array(\n\t\t'reporter'      => OFF,\n\t\t'handler'       => OFF,\n\t\t'monitor'       => OFF,\n\t\t'bugnotes'      => OFF,\n\t\t'explicit'      => ON,\n\t\t'threshold_min' => NOBODY,\n\t\t'threshold_max' => NOBODY,\n\t),\n);\n\n/**\n * Whether user's should receive emails for their own actions.\n *\n * @global int $g_email_receive_own\n */\n$g_email_receive_own = OFF;\n\n/**\n * Email addresses validation\n *\n * Determines whether email addresses are validated.\n * - When ON (default), validation is performed using the pattern given by the\n *   HTML5 specification for 'email' type form input elements\n *   {@link http://www.w3.org/TR/html5/forms.html#valid-e-mail-address}\n * - When OFF, validation is disabled.\n *\n * NOTE: Regardless of how this option is set, validation is never performed\n * when using LDAP email (i.e. when $g_use_ldap_email = ON), as we assume that\n * it is handled by the directory.\n * @see $g_use_ldap_email\n *\n * @global int $g_validate_email\n */\n$g_validate_email = ON;\n\n/**\n * Allow login with email address.\n *\n * When this is ON, users can log in with their registered email address, in\n * addition to their username.\n *\n * This will only work as long as there is a single user with the specified\n * email address, and the email address is not blank.\n *\n * @global int $g_email_login_enabled\n */\n$g_email_login_enabled = OFF;\n\n/**\n * Ensure that email addresses are unique.\n *\n * @global int $g_email_ensure_unique\n */\n$g_email_ensure_unique = ON;\n\n/**\n * Set to OFF to disable email check.\n *\n * @global int $g_check_mx_record\n */\n$g_check_mx_record = OFF;\n\n/**\n * If ON, allow the user to omit an email field.\n *\n * NOTE: If you allow users to create their own accounts, they\n * must specify an email at that point, no matter what the value\n * of this option is.  Otherwise they would not get their passwords.\n *\n * @global int $g_allow_blank_email\n */\n$g_allow_blank_email = OFF;\n\n/**\n * Only allow and send email to addresses in the given domain(s).\n *\n * For example:\n * $g_limit_email_domains = array( 'users.sourceforge.net', 'sourceforge.net' );\n *\n * @global array $g_limit_email_domains\n */\n$g_limit_email_domains = array();\n\n/**\n * This specifies the access level that is needed to get the mailto: links.\n *\n * @global int $g_show_user_email_threshold\n */\n$g_show_user_email_threshold = NOBODY;\n\n/**\n * Access level that needed to see realnames on user view page.\n *\n * @see $g_show_realname\n * @global int $g_show_user_realname_threshold\n */\n$g_show_user_realname_threshold = NOBODY;\n\n/**\n * Select the method to mail by.\n *\n * Possible values are:\n * - PHPMAILER_METHOD_MAIL - PHP mail() function\n * - PHPMAILER_METHOD_SENDMAIL - sendmail\n * - PHPMAILER_METHOD_SMTP - SMTP server\n *\n * @global int $g_phpMailer_method\n */\n$g_phpMailer_method = PHPMAILER_METHOD_MAIL;\n\n/**\n * Remote SMTP Host(s).\n *\n * Either a single hostname or multiple semicolon-delimited hostnames.\n * You can specify for each host a port other than the default, using format:\n * [hostname:port] (e.g. \"smtp1.example.com:25;smtp2.example.com\").\n * Hosts will be tried in the given order.\n *\n * NOTE: This is only used with PHPMAILER_METHOD_SMTP.\n *\n * @see $g_smtp_port\n * @global string $g_smtp_host\n */\n$g_smtp_host = 'localhost';\n\n/**\n * SMTP Server Authentication user.\n *\n * NOTE: must be set to '' if the SMTP host does not require authentication.\n *\n * @see $g_smtp_password\n * @global string $g_smtp_username\n */\n$g_smtp_username = '';\n\n/**\n * SMTP Server Authentication password.\n *\n * Not used when $g_smtp_username = ''\n *\n * @see $g_smtp_username\n * @global string $g_smtp_password\n */\n$g_smtp_password = '';\n\n/**\n * Allow secure connection to the SMTP server.\n *\n * Valid values are '' (no encryption), 'ssl' or 'tls'\n *\n * @global string $g_smtp_connection_mode\n */\n$g_smtp_connection_mode = '';\n\n/**\n * Default SMTP port.\n *\n * Typical ports are 25 and 587.\n * This can be overridden individually for specific hosts.\n *\n * @see $g_smtp_host\n * @global int $g_smtp_port\n */\n$g_smtp_port = 25;\n\n/**\n * Enable DomainKeys Identified Mail (DKIM) Signatures (rfc6376).\n *\n * To successfully sign mails you need to enable DKIM and provide at least:\n * - DKIM domain\n * - DKIM private key or key file path\n * - DKIM selector\n * - DKIM identity\n *\n * @see $g_email_dkim_domain\n * @see $g_email_dkim_private_key_file_path\n * @see $g_email_dkim_private_key_string\n * @see $g_email_dkim_selector\n * @see $g_email_dkim_identity\n * @global int $g_email_dkim_enable\n */\n$g_email_dkim_enable = OFF;\n\n/**\n * DomainKeys Identified Mail (DKIM) Signatures domain.\n *\n * This is usually the same as the domain of your from email.\n *\n * @see $g_from_email\n * @see $g_email_dkim_enable\n * @global string $g_email_dkim_domain\n */\n$g_email_dkim_domain = 'example.com';\n\n/**\n * DomainKeys Identified Mail (DKIM) Signatures private key path.\n *\n * Path to the private key. If $g_email_dkim_private_key_string is specified\n * this setting will not be used.\n *\n * @see $g_email_dkim_private_key_string\n * @see $g_email_dkim_enable\n * @global string $g_email_dkim_private_key_file_path\n */\n$g_email_dkim_private_key_file_path = '';\n\n\n/**\n * DomainKeys Identified Mail (DKIM) Signatures private key value.\n *\n * This string should contain private key for signing. Leave empty\n * string if you wish to load the key from the file defined with\n * $g_email_dkim_private_key_file_path.\n *\n * @see $g_email_dkim_enable\n * @see $g_email_dkim_private_key_file_path\n * @global string $g_email_dkim_private_key_string\n */\n$g_email_dkim_private_key_string = '';\n\n/**\n * DomainKeys Identified Mail (DKIM) Signatures selector.\n *\n * DNS selector for the signature (rfc6376)\n * DNS TXT field should have for instance:\n *   host mail.example._domainkey\n *   value v=DKIM1; t=s; n=core; k=rsa; p=[public key]\n *\n * @see $g_email_dkim_enable\n * @global string $g_email_dkim_selector\n */\n$g_email_dkim_selector = 'mail.example';\n\n/**\n * DomainKeys Identified Mail (DKIM) Signatures private key password.\n *\n * Leave empty string if your private key does not have password.\n *\n * @see $g_email_dkim_enable\n * @global string $g_email_dkim_passphrase\n */\n$g_email_dkim_passphrase = '';\n\n/**\n * DomainKeys Identified Mail (DKIM) Signatures identity.\n *\n * Identity you are signing the mails with (rfc6376).\n * This is usually the same as your from email.\n *\n * @see $g_from_email\n * @see $g_email_dkim_enable\n * @global string $g_email_dkim_identity\n */\n$g_email_dkim_identity = 'noreply@example.com';\n\n/**\n * Enable S/MIME signature.\n *\n * @global int $g_email_smime_enable\n */\n$g_email_smime_enable = OFF;\n\n/**\n * Path to the S/MIME certificate.\n *\n * The file must contain a PEM-encoded certificate.\n *\n * @global string $g_email_smime_cert_file\n */\n$g_email_smime_cert_file = '';\n\n/**\n * Path to the S/MIME private key file.\n *\n * The file must contain a PEM-encoded private key matching the S/MIME certificate.\n *\n * @see $g_email_smime_cert_file\n *\n * @global string $g_email_smime_key_file\n */\n$g_email_smime_key_file = '';\n\n/**\n * Password for the S/MIME private key.\n *\n * Leave blank if the private key is not protected by a passphrase.\n * @see $g_email_smime_key_file\n *\n * @global string $g_email_smime_key_password\n */\n$g_email_smime_key_password = '';\n\n/**\n * Optional path to S/MIME extra certificates.\n *\n * The file must contain one (or more) PEM-encoded certificates, which will be\n * included in the signature to help the recipient verify the certificate\n * specified in {@see $g_email_smime_cert_file} (\"CA Chain\").\n *\n * @global string $g_email_smime_extracerts_file\n */\n$g_email_smime_extracerts_file = '';\n\n/**\n * Use a cron scheduler to send emails.\n *\n * When this is ON (recommended), instead of sending of emails as soon as an\n * action is performed (typically at the end of each page), emails are queued\n * and must be sent manually by executing 'scripts/send_emails.php'. This script\n * can only be run from the CLI, not from the web interface, for security reasons.\n * The script's execution is typically handled by a cron job or a scheduler task,\n * set to run every few minutes.\n *\n * If no cronjob is used (default), then the user will have to wait for MantisBT\n * to process the email queue after each page load.\n *\n * @global int $g_email_send_using_cronjob\n */\n$g_email_send_using_cronjob = OFF;\n\n/**\n * Email separator and padding.\n *\n * @global string $g_email_separator1\n */\n$g_email_separator1 = str_pad('', 70, '=');\n\n/**\n * Email separator and padding.\n *\n * @global string $g_email_separator2\n */\n$g_email_separator2 = str_pad('', 70, '-');\n\n/**\n * Email separator and padding.\n *\n * @global int $g_email_padding_length\n */\n$g_email_padding_length = 28;\n\n/**\n * Duration (in days) to retry failed emails before deleting them from queue.\n *\n * @global int $g_email_retry_in_days\n */\n$g_email_retry_in_days = 7;\n\n###########################\n# MantisBT Version String #\n###########################\n\n/**\n * Display MantisBT Version number to users in the page footer.\n *\n * This is more of a cosmetic setting and should NOT be considered as a security\n * measure to avoid disclosure of version information to users. OFF by default.\n *\n * NOTE: When the REST API is enabled {@see $g_webservice_rest_enabled},\n * accessing an endpoint will always return the version number in the\n * `X-Mantis-Version` header, even if the request fails.\n *\n * @see MANTIS_VERSION\n * @global int $g_show_version\n */\n$g_show_version = OFF;\n\n/**\n * String appended to the MantisBT version when displayed to the user.\n *\n * @global string $g_version_suffix\n */\n$g_version_suffix = '';\n\n/**\n * Custom copyright and licensing statement shown at the footer of each page.\n *\n * Can contain HTML elements that are valid children of the `<address>` element.\n * This string is treated as raw HTML and thus you must use `&amp;` instead of `&`.\n *\n * @global string $g_copyright_statement\n */\n$g_copyright_statement = '';\n\n##############################\n# MantisBT Language Settings #\n##############################\n\n/**\n * Default language for MantisBT user interface.\n *\n * If the language is set to 'auto', the actual language is determined by the\n * user agent (web browser) language preference.\n *\n * @global string $g_default_language\n */\n$g_default_language = 'auto';\n\n/**\n * Languages that the users are allowed to choose.\n *\n * @global array $g_language_choices_arr\n */\n$g_language_choices_arr = array(\n\t'auto',\n\t'afrikaans',\n\t'amharic',\n\t'arabic',\n\t'arabicegyptianspoken',\n\t'asturian',\n\t'basque',\n\t'belarusian_tarask',\n\t'breton',\n\t'bulgarian',\n\t'catalan',\n\t'chinese_simplified',\n\t'chinese_traditional',\n\t'croatian',\n\t'czech',\n\t'danish',\n\t'dutch',\n\t'english',\n\t'estonian',\n\t'esperanto',\n\t'finnish',\n\t'french',\n\t'galician',\n\t'georgian',\n\t'german',\n\t'greek',\n\t'hebrew',\n\t'hindi',\n\t'hungarian',\n\t'icelandic',\n\t'interlingua',\n\t'italian',\n\t'japanese',\n\t'korean',\n\t'latvian',\n\t'lithuanian',\n\t'luxembourgish',\n\t'macedonian',\n\t'norwegian_bokmal',\n\t'norwegian_nynorsk',\n\t'occitan',\n\t'persian',\n\t'polish',\n\t'portuguese_brazil',\n\t'portuguese_standard',\n\t'ripoarisch',\n\t'romanian',\n\t'russian',\n\t'saraiki',\n\t'serbian',\n\t'serbian_latin',\n\t'slovak',\n\t'slovene',\n\t'spanish',\n\t'swedish',\n\t'swissgerman',\n\t'tagalog',\n\t'turkish',\n\t'ukrainian',\n\t'urdu',\n\t'vietnamese',\n\t'volapuk',\n\t'zazaki',\n);\n\n/**\n * Browser language mapping for 'auto' language selection.\n *\n * The mapping between a comma-separated list of BCP 47 language codes, usually\n * ending with the most generic one (i.e. the primary language without extended\n * subtag), and the corresponding MantisBT language code.\n *\n * @see lang_get_current_lang()\n * @see lang_get_current_datetime_locale()\n * @global array $g_language_auto_map\n */\n$g_language_auto_map = array(\n\t'af' => 'afrikaans',\n\t'am' => 'amharic',\n\t'ar' => 'arabic',\n\t'arz' => 'arabicegyptianspoken',\n\t'ast' => 'asturian',\n\t'eu' => 'basque',\n\t'be-tarask' => 'belarusian_tarask',\n\t'bg' => 'bulgarian',\n\t'br' => 'breton',\n\t'ca' => 'catalan',\n\t'zh-cn, zh-sg, zh' => 'chinese_simplified',\n\t'zh-hk, zh-tw' => 'chinese_traditional',\n\t'hr' => 'croatian',\n\t'cs' => 'czech',\n\t'da' => 'danish',\n\t'nl-be, nl' => 'dutch',\n\t'en-us, en-gb, en-au, en' => 'english',\n\t'eo' => 'esperanto',\n\t'et' => 'estonian',\n\t'fi' => 'finnish',\n\t'fr-ca, fr-be, fr-ch, fr' => 'french',\n\t'gl' => 'galician',\n\t'de-de, de-at, de-ch, de' => 'german',\n\t'el' => 'greek',\n\t'he' => 'hebrew',\n\t'hi' => 'hindi',\n\t'hu' => 'hungarian',\n\t'is' => 'icelandic',\n\t'ia' => 'interlingua',\n\t'it-ch, it' => 'italian',\n\t'ja' => 'japanese',\n\t'ka' => 'georgian',\n\t'ko' => 'korean',\n\t'lv' => 'latvian',\n\t'lt' => 'lithuanian',\n\t'lb' => 'luxembourgish',\n\t'mk' => 'macedonian',\n\t'no' => 'norwegian_bokmal',\n\t'nn' => 'norwegian_nynorsk',\n\t'oc' => 'occitan',\n\t'fa' => 'persian',\n\t'pl' => 'polish',\n\t'pt-br' => 'portuguese_brazil',\n\t'pt' => 'portuguese_standard',\n\t'ksh' => 'ripoarisch',\n\t'ro-mo, ro' => 'romanian',\n\t'ru-mo, ru-ru, ru-ua, ru' => 'russian',\n\t'skr' => 'saraiki', # skr does not actually exist as a browser language code\n\t'sr' => 'serbian',\n\t'sr-latn' => 'serbian_latin',\n\t'sk' => 'slovak',\n\t'sl' => 'slovene',\n\t'es-mx, es-co, es-ar, es-cl, es-pr, es' => 'spanish',\n\t'sv-fi, sv' => 'swedish',\n\t'gsw' => 'swissgerman',\n\t'tl' => 'tagalog',\n\t'tr' => 'turkish',\n\t'uk' => 'ukrainian',\n\t'ur' => 'urdu',\n\t'vi' => 'vietnamese',\n\t'vo' => 'volapuk',\n\t'diq' => 'zazaki',\n);\n\n/**\n * Fallback for automatic language selection.\n *\n * @global string $g_fallback_language\n */\n$g_fallback_language = 'english';\n\n##########################\n# MantisBT Font Settings #\n##########################\n\n/**\n * Name of font family to use.\n *\n * For a list of all available fonts, see {@link https://fonts.google.com/}.\n *\n * The chosen font should be listed in {@see $g_font_family_choices_local} to\n * ensure correct display even if {@see $g_cdn_enabled} option is OFF.\n *\n * @global string $g_font_family\n */\n$g_font_family = 'Open Sans';\n\n/**\n * List the Google fonts that the users are allowed to choose from.\n *\n * Google offers over 800 fonts. The list below is limited to the ones tested\n * with MantisBT UI.\n *\n * @global array $g_font_family_choices\n */\n$g_font_family_choices = array(\n\t'Amiko',\n\t'Architects Daughter',\n\t'Archivo Narrow',\n\t'Arvo',\n\t'Bitter',\n\t'Cabin',\n\t'Cinzel',\n\t'Comfortaa',\n\t'Courgette',\n\t'Droid Sans',\n\t'Gloria Hallelujah',\n\t'Inconsolata',\n\t'Josefin Sans',\n\t'Kadwa',\n\t'Karla',\n\t'Kaushan Script',\n\t'Lato',\n\t'Montserrat',\n\t'Open Sans',\n\t'Orbitron',\n\t'Oregano',\n\t'Palanquin',\n\t'Poppins',\n\t'Raleway',\n\t'Rhodium Libre',\n\t'Sarala',\n\t'Scope One',\n\t'Secular One',\n\t'Ubuntu',\n\t'Vollkorn'\n);\n\n/**\n * List of fonts that are installed as part of MantisBT.\n *\n * This list is used when {@see $g_cdn_enabled} is OFF.\n *\n * @global array $g_font_family_choices_local\n */\n$g_font_family_choices_local = array(\n\t'Montserrat',\n\t'Open Sans',\n\t'Poppins'\n);\n\n#############################\n# MantisBT Display Settings #\n#############################\n\n/**\n * Browser window title.\n *\n * @global string $g_window_title\n */\n$g_window_title = 'MantisBT';\n\n/**\n * OpenSearch engine title prefix.\n *\n * This is used to describe Browser Search entries, and must be short enough\n * so that when inserted into the 'opensearch_XXX_short' language string, the\n * resulting text is 16 characters or less, to be compliant with the limit for\n * the ShortName element as defined in the OpenSearch specification.\n *\n * @link https://github.com/dewitt/opensearch/blob/master/opensearch-1-1-draft-6.md\n * @see $g_window_title\n * @global string $g_search_title\n */\n$g_search_title = '%window_title%';\n\n/**\n * Check for admin directory, database upgrades, etc.\n *\n * @global int $g_admin_checks\n */\n$g_admin_checks = ON;\n\n/**\n * Favicon image.\n *\n * This icon should be of 'image/x-icon' MIME type, and its size 16x16 pixels.\n * It is also used to decorate OpenSearch Browser search entries.\n *\n * @global string $g_favicon_image\n */\n$g_favicon_image = 'images/favicon.ico';\n\n/**\n * Logo.\n *\n * @global string $g_logo_image\n */\n$g_logo_image = 'images/mantis_logo.png';\n\n/**\n * Logo URL link.\n *\n * @global string $g_logo_url\n */\n$g_logo_url = '%default_home_page%';\n\n/**\n * Specifies whether to enable support for project documents or not.\n *\n * This feature is deprecated and is expected to be moved to a plugin\n * in the future.\n *\n * @see $g_view_proj_doc_threshold\n * @see $g_upload_project_file_threshold\n * @global int $g_enable_project_documentation\n * @deprecated\n */\n$g_enable_project_documentation = OFF;\n\n/**\n * Show extra menu bar with all available projects.\n *\n * @global int $g_show_project_menu_bar\n */\n$g_show_project_menu_bar = OFF;\n\n/**\n * Show assigned to names.\n *\n * This is in the view all pages.\n *\n * @global int $g_show_assigned_names\n */\n$g_show_assigned_names = ON;\n\n/**\n * Show priority as icon.\n *\n * OFF: Shows priority as icon in view all bugs page\n * ON:  Shows priority as text in view all bugs page\n *\n * @global int $g_show_priority_text\n */\n$g_show_priority_text = OFF;\n\n/**\n * Define the priority level at which a bug becomes significant.\n *\n * Significant bugs are displayed with emphasis.\n *\n * Set this value to -1 to disable the feature.\n *\n * @global int $g_priority_significant_threshold\n */\n$g_priority_significant_threshold = HIGH;\n\n/**\n * Define the severity level at which a bug becomes significant.\n *\n * Significant bugs are displayed with emphasis.\n *\n * Set this value to -1 to disable the feature.\n *\n * @global int $g_severity_significant_threshold\n */\n$g_severity_significant_threshold = MAJOR;\n\n/**\n * The default columns to be included in the View Issues Page.\n *\n * This can be overridden using Manage > Manage Configuration > Manage Columns;\n * users can also configure their own columns using My Account > Manage Columns.\n *\n * The list of all available columns (i.e. the names to choose from) can be\n * retrieved from the above-mentioned pages. In addition to standard column\n * names, that will also include:\n * - Custom Fields: the column name will be the Custom Field's name prefixed\n *   with custom_, e.g. xyz should be included as custom_xyz.\n * - Plugin-specific columns (prefixed with the Plugin's basename)\n *\n * If one of the columns specified here is not accessible to the logged-in user\n * or corresponds to a disabled feature, then it will automatically be removed\n * from the list at runtime. The same configuration may therefore show a\n * different set of columns depending on the logged in user, the currently\n * selected project and enabled features.\n *\n * For example, the eta column will only be shown if usage of the ETA field is\n * enabled ({@see $g_enable_eta}), and the custom_xyz column will be removed if\n * the xyz Custom Field is not available in the current Project.\n *\n * @global array $g_view_issues_page_columns\n */\n$g_view_issues_page_columns = array(\n\t'selection', 'edit', 'priority', 'id', 'bugnotes_count', 'attachment_count',\n\t'category_id', 'severity', 'status', 'last_updated', 'summary',\n);\n\n/**\n * The default columns to be included in the Print Issues Page.\n *\n * See {@see $g_view_issues_page_columns} for details.\n *\n * @global array $g_print_issues_page_columns\n */\n$g_print_issues_page_columns = array(\n\t'selection', 'priority', 'id', 'bugnotes_count', 'attachment_count',\n\t'category_id', 'severity', 'status', 'last_updated', 'summary',\n);\n\n/**\n * The default columns to be included in the CSV export.\n *\n * See {@see $g_view_issues_page_columns} for details.\n *\n * @global array $g_csv_columns\n */\n$g_csv_columns = array(\n\t'id', 'project_id', 'reporter_id', 'handler_id', 'priority',\n\t'severity', 'reproducibility', 'version', 'projection', 'category_id',\n\t'date_submitted', 'eta', 'os', 'os_build', 'platform', 'view_state',\n\t'last_updated', 'summary', 'status', 'resolution', 'fixed_in_version'\n);\n\n/**\n * The default columns to be included in the Excel export.\n *\n * See {@see $g_view_issues_page_columns} for details.\n *\n * @global array $g_excel_columns\n */\n$g_excel_columns = array(\n\t'id', 'project_id', 'reporter_id', 'handler_id', 'priority', 'severity',\n\t'reproducibility', 'version', 'projection', 'category_id',\n\t'date_submitted', 'eta', 'os', 'os_build', 'platform', 'view_state',\n\t'last_updated', 'summary', 'status', 'resolution', 'fixed_in_version'\n);\n\n/**\n * Show projects when in All Projects mode.\n *\n * @global int $g_show_bug_project_links\n */\n$g_show_bug_project_links = ON;\n\n/**\n * Position of the filter box.\n *\n * Possible values are:\n * POSITION_TOP, POSITION_BOTTOM, or POSITION_NONE for none.\n * @global int $g_filter_position\n */\n$g_filter_position = FILTER_POSITION_TOP;\n\n/**\n * Position of action buttons when viewing issues.\n *\n * Can be: POSITION_TOP, POSITION_BOTTOM, or POSITION_BOTH.\n *\n * @global int $g_action_button_position\n */\n$g_action_button_position = POSITION_BOTTOM;\n\n/**\n * Show product versions in create, view and update screens.\n *\n * - ON forces display even if none are defined\n * - OFF suppresses display\n * - AUTO suppresses the display if there are no versions defined for the project\n *\n * @global int $g_show_product_version\n */\n$g_show_product_version = AUTO;\n\n/**\n * The access level threshold at which users will see the date of release\n * for product versions.\n *\n * Dates will be shown next to the product version, target version and fixed in\n * version fields. Set this threshold to NOBODY to disable the feature.\n *\n * @global int $g_show_version_dates_threshold\n */\n$g_show_version_dates_threshold = NOBODY;\n\n/**\n * Show users with their real name or not.\n *\n * @see $g_sort_by_last_name\n * @see $g_show_user_realname_threshold\n * @global int $g_show_realname\n */\n$g_show_realname = OFF;\n\n/**\n * Sorting for names in dropdown lists.\n *\n * If turned on, \"Jane Doe\" will be sorted with the \"D\"s.\n * @see $g_show_realname\n * @global int $g_sort_by_last_name\n */\n$g_sort_by_last_name = OFF;\n\n/**\n * Show user avatars.\n *\n * @global int $g_show_avatar\n * @see $g_show_avatar_threshold\n */\n$g_show_avatar = OFF;\n\n/**\n * Only users above this threshold will have their avatar shown.\n *\n * @global int $g_show_avatar_threshold\n */\n$g_show_avatar_threshold = DEVELOPER;\n\n/**\n * Show release dates on changelog.\n *\n * @global int $g_show_changelog_dates\n */\n$g_show_changelog_dates = ON;\n\n/**\n * Show release dates on roadmap.\n *\n * @global int $g_show_roadmap_dates\n */\n$g_show_roadmap_dates = ON;\n\n##########################\n# MantisBT Time Settings #\n##########################\n\n/**\n * Time for long lived cookie to live in seconds.\n *\n * It is also used as the default for permanent logins if\n * {@see $g_allow_permanent_cookie} is enabled and selected.\n *\n * @global int $g_cookie_time_length\n */\n$g_cookie_time_length = 60 * 60 * 24 * 365;\n\n/**\n * Allow users to opt for a 'permanent' cookie when logging in.\n *\n * Controls the display of the 'Remember my login in this browser' checkbox\n * on the login page.\n *\n * @see $g_cookie_time_length\n * @global int $g_allow_permanent_cookie\n */\n$g_allow_permanent_cookie = ON;\n\n/**\n * Time allowed for long processes execution.\n *\n * The time (in seconds) to allow for page execution during long processes\n * such as upgrading your database.\n *\n * The default value of 0 indicates that the page should be allowed to\n * execute until it is finished.\n *\n * @global int $g_long_process_timeout\n */\n$g_long_process_timeout = 0;\n\n##########################\n# MantisBT Date Settings #\n##########################\n\n/**\n * Date format strings defaults to ISO 8601 formatting.\n *\n * For detailed instructions on date formatting\n * @see http://www.php.net/manual/en/function.date.php\n *\n * @global string $g_short_date_format\n */\n$g_short_date_format = 'Y-m-d';\n\n/**\n * Date format strings defaults to ISO 8601 formatting.\n *\n * For detailed instructions on date formatting\n * @see http://www.php.net/manual/en/function.date.php\n *\n * @global string $g_normal_date_format\n */\n$g_normal_date_format = 'Y-m-d H:i';\n\n/**\n * Date format strings defaults to ISO 8601 formatting.\n *\n * For detailed instructions on date formatting\n *\n * @see http://www.php.net/manual/en/function.date.php\n * @global string $g_complete_date_format\n */\n$g_complete_date_format = 'Y-m-d H:i T';\n\n/**\n * Datetime picker widget format string.\n *\n * This format needs needs to match the one defined in {@see $g_normal_date_format}\n * For detailed instructions on date formatting\n * @see http://momentjs.com/docs/#/displaying/format/\n *\n * @global string $g_datetime_picker_format\n */\n$g_datetime_picker_format = 'Y-MM-DD HH:mm';\n\n\n##############################\n# MantisBT TimeZone Settings #\n##############################\n\n/**\n * Default timezone to use in MantisBT.\n *\n * This configuration is normally initialized when installing Mantis.\n * It should be set to one of the values specified in the\n * {@link http://php.net/timezones List of Supported Timezones}.\n * If this config is left blank, the timezone will be initialized by calling\n * {@link http://php.net/date-default-timezone-get date_default_timezone_get()}\n * (note that this function's behavior was modified in PHP 5.4.0), which will\n * fall back to 'UTC' if unable to determine the timezone.\n * Correct configuration of this variable can be confirmed by running the\n * administration checks.\n * Users can override the default timezone under their preferences.\n *\n * @global string $g_default_timezone\n */\n$g_default_timezone = '';\n\n##########################\n# MantisBT News Settings #\n##########################\n\n/**\n * Indicates whether the news feature should be enabled or disabled.\n *\n * This feature is deprecated and is expected to be moved to a plugin\n * in the future.\n *\n * @global int $g_news_enabled\n * @deprecated\n */\n$g_news_enabled = OFF;\n\n/**\n * Limit News Items.\n *\n * Limit by entry count or date\n * - BY_LIMIT - entry limit\n * - BY_DATE - by date\n *\n * @global int $g_news_limit_method\n * @deprecated\n */\n$g_news_limit_method = BY_LIMIT;\n\n/**\n * Limit by last X entries.\n *\n * @global int $g_news_view_limit\n * @deprecated\n */\n$g_news_view_limit = 7;\n\n/**\n * Limit by days.\n *\n * @global int $g_news_view_limit_days\n * @deprecated\n */\n$g_news_view_limit_days = 30;\n\n/**\n * Threshold for viewing private news.\n *\n * @global int $g_private_news_threshold\n * @deprecated\n */\n$g_private_news_threshold = DEVELOPER;\n\n################################\n# MantisBT Default Preferences #\n################################\n\n/**\n * Default access level assigned to new accounts when signing up.\n *\n * Look in constant_inc.php for values.\n *\n * @global int $g_default_new_account_access_level\n */\n$g_default_new_account_access_level = REPORTER;\n\n/**\n * Default Project View Status (VS_PUBLIC or VS_PRIVATE).\n *\n * @global int $g_default_project_view_status\n */\n$g_default_project_view_status = VS_PUBLIC;\n\n/**\n * Default Bug View Status (VS_PUBLIC or VS_PRIVATE).\n *\n * @global int $g_default_bug_view_status\n */\n$g_default_bug_view_status = VS_PUBLIC;\n\n/**\n * Default value for bug description field used on bug report page.\n *\n * @global string $g_default_bug_description\n */\n$g_default_bug_description = '';\n\n/**\n * Default value for steps to reproduce field.\n *\n * @global string $g_default_bug_steps_to_reproduce\n */\n$g_default_bug_steps_to_reproduce = '';\n\n/**\n * Default value for addition information field.\n *\n * @global string $g_default_bug_additional_info\n */\n$g_default_bug_additional_info = '';\n\n/**\n * Default Bugnote View Status (VS_PUBLIC or VS_PRIVATE).\n *\n * @global int $g_default_bugnote_view_status\n */\n$g_default_bugnote_view_status = VS_PUBLIC;\n\n/**\n * Default bug resolution when reporting a new bug.\n *\n * @global int $g_default_bug_resolution\n */\n$g_default_bug_resolution = OPEN;\n\n/**\n * Default bug severity when reporting a new bug.\n *\n * @global int $g_default_bug_severity\n */\n$g_default_bug_severity = MINOR;\n\n/**\n * Default bug priority when reporting a new bug.\n *\n * @global int $g_default_bug_priority\n */\n$g_default_bug_priority = NORMAL;\n\n/**\n * Default bug reproducibility when reporting a new bug.\n *\n * @global int $g_default_bug_reproducibility\n */\n$g_default_bug_reproducibility = REPRODUCIBILITY_HAVENOTTRIED;\n\n/**\n * Default bug projection when reporting a new bug.\n *\n * @global int $g_default_bug_projection\n */\n$g_default_bug_projection = PROJECTION_NONE;\n\n/**\n * Default bug ETA when reporting a new bug.\n *\n * @global int $g_default_bug_eta\n */\n$g_default_bug_eta = ETA_NONE;\n\n/**\n * Default relationship between a new bug and its parent when cloning it.\n *\n * @global int $g_default_bug_relationship_clone\n */\n$g_default_bug_relationship_clone = BUG_REL_NONE;\n\n/**\n * Allow parent bug to close regardless of child status.\n *\n * @global int $g_allow_parent_of_unresolved_to_close\n */\n$g_allow_parent_of_unresolved_to_close = OFF;\n\n/**\n * Default for new bug relationships.\n *\n * @global int $g_default_bug_relationship\n */\n$g_default_bug_relationship = BUG_RELATED;\n\n/**\n * Default category to use when moving issues.\n *\n * Default global category to be used when an issue is moved from a project to\n * another that does not have a category with a matching name.\n *\n * The default is 1 which is the \"General\" category that is created in the\n * default database.\n */\n$g_default_category_for_moves = 1;\n\n/**\n *\n * @global int $g_default_limit_view\n */\n$g_default_limit_view = 50;\n\n/**\n *\n * @global int $g_default_show_changed\n */\n$g_default_show_changed = 6;\n\n/**\n *\n * @global int $g_hide_status_default\n */\n$g_hide_status_default = CLOSED;\n\n/**\n *\n * @global int $g_show_sticky_issues\n */\n$g_show_sticky_issues = ON;\n\n/**\n * Minimum delay for automatic page refreshes (in minutes).\n *\n * Make sure people are not refreshing too often.\n *\n * @global int $g_min_refresh_delay\n */\n$g_min_refresh_delay = 10;\n\n/**\n * Default delay for automatic page refreshes (in minutes). * @global int $g_default_refresh_delay\n */\n$g_default_refresh_delay = 30;\n\n/**\n * Delay to redirect after displaying a confirmation page (in seconds).\n *\n * @global int $g_default_redirect_delay\n */\n$g_default_redirect_delay = 2;\n\n/**\n *\n * @global string $g_default_bugnote_order\n */\n$g_default_bugnote_order = 'ASC';\n\n/**\n *\n * @global int $g_default_email_on_new\n */\n$g_default_email_on_new = ON;\n\n/**\n *\n * @global int $g_default_email_on_assigned\n */\n$g_default_email_on_assigned = ON;\n\n/**\n *\n * @global int $g_default_email_on_feedback\n */\n$g_default_email_on_feedback = ON;\n\n/**\n *\n * @global int $g_default_email_on_resolved\n */\n$g_default_email_on_resolved = ON;\n\n/**\n *\n * @global int $g_default_email_on_closed\n */\n$g_default_email_on_closed = ON;\n\n/**\n *\n * @global int $g_default_email_on_reopened\n */\n$g_default_email_on_reopened = ON;\n\n/**\n *\n * @global int $g_default_email_on_bugnote\n */\n$g_default_email_on_bugnote = ON;\n\n/**\n * @global int $g_default_email_on_status\n */\n$g_default_email_on_status = OFF;\n\n/**\n * @global int $g_default_email_on_priority\n */\n$g_default_email_on_priority = OFF;\n\n/**\n * 'any'\n * @global int $g_default_email_on_new_minimum_severity\n */\n$g_default_email_on_new_minimum_severity = OFF;\n\n/**\n * 'any'\n * @global int $g_default_email_on_assigned_minimum_severity\n */\n$g_default_email_on_assigned_minimum_severity = OFF;\n\n/**\n * 'any'\n * @global int $g_default_email_on_feedback_minimum_severity\n */\n$g_default_email_on_feedback_minimum_severity = OFF;\n\n/**\n * 'any'\n * @global int $g_default_email_on_resolved_minimum_severity\n */\n$g_default_email_on_resolved_minimum_severity = OFF;\n\n/**\n * 'any'\n * @global int $g_default_email_on_closed_minimum_severity\n */\n$g_default_email_on_closed_minimum_severity = OFF;\n\n/**\n * 'any'\n * @global int $g_default_email_on_reopened_minimum_severity\n */\n$g_default_email_on_reopened_minimum_severity = OFF;\n\n/**\n * 'any'\n * @global int $g_default_email_on_bugnote_minimum_severity\n */\n$g_default_email_on_bugnote_minimum_severity = OFF;\n\n/**\n * 'any'\n * @global int $g_default_email_on_status_minimum_severity\n */\n$g_default_email_on_status_minimum_severity = OFF;\n\n/**\n * @todo Unused\n * @global int $g_default_email_on_priority_minimum_severity\n */\n$g_default_email_on_priority_minimum_severity = OFF;\n\n/**\n *\n * @global int $g_default_email_bugnote_limit\n */\n$g_default_email_bugnote_limit = 0;\n\n#############################\n# MantisBT Summary Settings #\n#############################\n\n/**\n * How many reporters to show.\n *\n * This is useful when there are hundreds of reporters\n *\n * @global int $g_reporter_summary_limit\n */\n$g_reporter_summary_limit = 10;\n\n/**\n * Summary date displays.\n *\n * date lengths to count bugs by (in days).\n *\n * @global array $g_date_partitions\n */\n$g_date_partitions = array( 1, 2, 3, 7, 30, 60, 90, 180, 365);\n\n/**\n * Shows project '[project] category' when 'All Projects' is selected.\n *\n * When OFF; only 'category name' is shown.\n *\n * @global int $g_summary_category_include_project\n */\n$g_summary_category_include_project = OFF;\n\n/**\n * Threshold for viewing summary.\n *\n * @global int $g_view_summary_threshold\n */\n$g_view_summary_threshold = MANAGER;\n\n/**\n * Severity multipliers used to determine reporters effectiveness.\n *\n * Define the multipliers which are used to determine the effectiveness\n * of reporters based on the severity of bugs. Higher multipliers will\n * result in an increase in reporter effectiveness.\n *\n * @global array $g_severity_multipliers\n */\n$g_severity_multipliers = array(\n\tFEATURE => 1,\n\tTRIVIAL => 2,\n\tTEXT    => 3,\n\tTWEAK   => 2,\n\tMINOR   => 5,\n\tMAJOR   => 8,\n\tCRASH   => 8,\n\tBLOCK   => 10\n);\n\n/**\n * Resolution multipliers used to determine reporters effectiveness.\n *\n * Define the resolutions which are used to determine the effectiveness\n * of reporters based on the resolution of bugs. Higher multipliers will\n * result in a decrease in reporter effectiveness. The only resolutions\n * that need to be defined here are those which match or exceed\n * $g_bug_resolution_not_fixed_threshold.\n *\n * @global array $g_resolution_multipliers\n */\n$g_resolution_multipliers = array(\n\tUNABLE_TO_REPRODUCE => 2,\n\tNOT_FIXABLE         => 1,\n\tDUPLICATE           => 3,\n\tNOT_A_BUG           => 5,\n\tSUSPENDED           => 1,\n\tWONT_FIX            => 1\n);\n\n#############################\n# MantisBT Bugnote Settings #\n#############################\n\n/**\n * Bugnote ordering.\n *\n * Change to ASC or DESC\n *\n * @global string $g_bugnote_order\n */\n$g_bugnote_order = 'DESC';\n\n#################################\n# MantisBT Bug History Settings #\n#################################\n\n/**\n * Bug history visible by default when you view a bug.\n *\n * change to ON or OFF.\n *\n * @global int $g_history_default_visible\n */\n$g_history_default_visible = ON;\n\n/**\n * Bug history ordering.\n *\n * change to ASC or DESC.\n *\n * @global string $g_history_order\n */\n$g_history_order = 'ASC';\n\n##########################################\n# MantisBT Reminder and Mention Settings #\n##########################################\n\n/**\n * Store reminders as bugnotes.\n *\n * @global int $g_store_reminders\n */\n$g_store_reminders = ON;\n\n/**\n * Automatically add recipients of reminders to monitor list.\n *\n * They will not be added if they are the handler or the reporter, since they\n * automatically get notified, if required.\n *\n * If recipients of the reminders are below the monitor threshold, they will\n * not be added.\n *\n * @global int $g_reminder_recipients_monitor_bug\n */\n$g_reminder_recipients_monitor_bug = ON;\n\n/**\n * Default Reminder View Status (VS_PUBLIC or VS_PRIVATE).\n *\n * @global int $g_default_reminder_view_status\n */\n$g_default_reminder_view_status = VS_PUBLIC;\n\n/**\n * Access level required to be a recipient for reminders.\n *\n * The access level is that of the project to which the issue belongs.\n *\n * @global int $g_reminder_receive_threshold\n */\n$g_reminder_receive_threshold = DEVELOPER;\n\n/**\n * Enables or disables @ mentions feature.\n *\n * @global int $g_mentions_enabled\n */\n$g_mentions_enabled = ON;\n\n/**\n * The tag to use for mentions.\n *\n * @global string $g_mentions_tag\n */\n$g_mentions_tag = '@';\n\n#################################\n# MantisBT Sponsorship Settings #\n#################################\n\n/**\n * Whether to enable/disable the whole issue sponsorship feature.\n *\n * @global int $g_enable_sponsorship\n */\n$g_enable_sponsorship = OFF;\n\n/**\n * Currency used for all sponsorships.\n *\n * @global string $g_sponsorship_currency\n */\n$g_sponsorship_currency = 'US$';\n\n/**\n * Access level threshold needed to view the total sponsorship for an issue by\n * all users.\n *\n * @global int $g_view_sponsorship_total_threshold\n */\n$g_view_sponsorship_total_threshold = VIEWER;\n\n/**\n * Access level threshold needed to view the users sponsoring an issue and the\n * sponsorship amount for each.\n *\n * @global int $g_view_sponsorship_details_threshold\n */\n$g_view_sponsorship_details_threshold = VIEWER;\n\n/**\n * Access level threshold needed to allow user to sponsor issues.\n *\n * @global int $g_sponsor_threshold\n */\n$g_sponsor_threshold = REPORTER;\n\n/**\n * Access level required to be able to handle sponsored issues.\n *\n * @global int $g_handle_sponsored_bugs_threshold\n */\n$g_handle_sponsored_bugs_threshold = DEVELOPER;\n\n/**\n * Access level required to be able to assign a sponsored issue.\n *\n * It is only possible to assign users having access level greater or equal to\n * {@see $g_handle_sponsored_bugs_threshold}.\n *\n * @global int $g_assign_sponsored_bugs_threshold\n */\n$g_assign_sponsored_bugs_threshold = MANAGER;\n\n/**\n * Minimum sponsorship amount.\n *\n * If the user enters a value less than this, an error will be prompted.\n *\n * @global int $g_minimum_sponsorship_amount\n */\n$g_minimum_sponsorship_amount = 5;\n\n#################################\n# MantisBT File Upload Settings #\n#################################\n\n/**\n * Allow File uploads.\n *\n * This is the master setting to disable *ALL* file uploading functionality.\n *\n * If you want to allow file uploads, you must also make sure that they are\n * enabled in PHP settings.  You may need to add 'file_uploads = TRUE' to your\n * php.ini.\n *\n * @see $g_upload_project_file_threshold\n * @see $g_upload_bug_file_threshold\n * @see $g_allow_reporter_upload\n * @global int $g_allow_file_upload\n */\n$g_allow_file_upload = ON;\n\n/**\n * Upload destination.\n *\n * Specify actual location in project settings: DISK or DATABASE.\n *\n * NOTE: FTP is now deprecated and will map to DISK.\n *\n * @global int $g_file_upload_method\n */\n$g_file_upload_method = DATABASE;\n\n/**\n * Use File dropzone.\n *\n * Enable drag and drop into a drop zone functionality for file upload fields.\n *\n * @global int $g_dropzone_enabled\n */\n$g_dropzone_enabled = ON;\n\n/**\n * File permissions for uploaded files.\n *\n * When using DISK for storing uploaded files, this setting controls\n * the access permissions they will have on the web server: with the default\n * value (0400) files will be read-only, and accessible only by the user\n * running the apache process (probably \"apache\" in Linux and \"Administrator\"\n * in Windows).\n *\n * For more details on unix style permissions:\n * @link https://en.wikipedia.org/wiki/Chmod\n *\n * @global int $g_attachments_file_permissions\n */\n$g_attachments_file_permissions = 0400;\n\n/**\n * Maximum file size that can be uploaded (in bytes).\n *\n * Defaults to 5 MiB. Also check your PHP settings for upload_max_filesize and\n * post_max_size (defaulted to 2 MiB and 8 MiB respectively), as well as\n * memory_limit.\n *\n * @global int $g_max_file_size\n */\n$g_max_file_size = 5 * 1024 * 1024;\n\n/**\n * Maximum number of files that can be uploaded simultaneously.\n *\n * @global int $g_file_upload_max_num\n */\n$g_file_upload_max_num = 10;\n\n/**\n * Authorized file types (whitelist).\n *\n * If $g_allowed_files is filled in, NO other file types will be allowed. If\n * empty, any extensions not specifically excluded by $g_disallowed_files list\n * will be authorized ($g_disallowed_files takes precedence over $g_allowed_files).\n * Separate items by commas, e.g. 'bmp,gif,jpg,png,txt,zip'.\n *\n * @see $g_allowed_files\n * @global string $g_allowed_files\n */\n$g_allowed_files = '';\n\n/**\n * Forbidden file types (blacklist).\n *\n * All file extensions in this list will be unauthorized.\n * Separate items by commas, e.g. 'php,html,java,exe,pl,svg'.\n *\n * SVG files are disabled by default, for security reasons. It is recommended to\n * also disable all extensions that can be executed by your server;\n *\n * @see $g_allowed_files\n * @global string $g_disallowed_files\n */\n$g_disallowed_files = 'svg';\n\n/**\n * Prefix to be used for the file system names of files uploaded to projects.\n *\n * Eg: doc-001-myprojdoc.zip\n *\n * @global string $g_document_files_prefix\n * @deprecated since 1.0, file names have been stored in a new format\n */\n$g_document_files_prefix = 'doc';\n\n/**\n * Absolute path to the default upload folder.\n *\n * Requires trailing / or \\.\n *\n * @global string $g_absolute_path_default_upload_folder\n */\n$g_absolute_path_default_upload_folder = '';\n\n/**\n * Enable support for sending files to users via a more efficient X-Sendfile\n * method.\n *\n * HTTP server software supporting this technique includes Lighttpd,\n * Cherokee, Apache with mod_xsendfile and nginx. You may need to set the\n * proceeding file_download_xsendfile_header_name option to suit the server you\n * are using.\n *\n * @global int $g_file_download_method\n */\n$g_file_download_xsendfile_enabled = OFF;\n\n/**\n * The name of the X-Sendfile header to use.\n *\n * Each server tends to implement this functionality in a slightly different way\n * and thus the naming conventions for the header differ between each server.\n * Lighttpd from v1.5, Apache with mod_xsendfile and Cherokee web servers use\n * X-Sendfile. nginx uses X-Accel-Redirect and Lighttpd v1.4 uses X-LIGHTTPD-send-file.\n *\n * @global string $g_file_download_xsendfile_header_name\n */\n$g_file_download_xsendfile_header_name = 'X-Sendfile';\n\n##########################\n# MantisBT HTML Settings #\n##########################\n\n/**\n * Convert URLs and e-mail addresses to html links.\n *\n * This flag controls whether URLs and email addresses are automatically\n * converted to clickable links. Additionally, for URL links, it determines\n * where they open when clicked (*target* attribute) and their type.\n *\n * The options below can be combined using bitwise operators (not all\n * possible combinations make sense):\n * - OFF                      Do not convert URLs or emails\n * - LINKS_SAME_WINDOW        Convert to links that open in the current window (DEFAULT)\n * - LINKS_NEW_WINDOW         Convert to links that open in a new window (overrides LINKS_SAME_WINDOW)\n * - LINKS_NOOPENER           Links have the `noopener` type (DEFAULT)\n *                            {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/noopener}\n * - LINKS_NOREFERRER         Links have the `noreferrer` type, i.e. they omit the *Referer*\n *                            header (implies LINKS_NOOPENER)\n *                            {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/noreferrer}\n * - LINKS_NOFOLLOW_EXTERNAL  Links to external sites (i.e. having a different root domain)\n *                            have the `nofollow` type, instructing search engines\n *                            not to follow these links (DEFAULT)\n *                            {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel#nofollow}\n *\n * @global int $g_html_make_links\n */\n$g_html_make_links = LINKS_SAME_WINDOW | LINKS_NOOPENER | LINKS_NOFOLLOW_EXTERNAL;\n\n/**\n * Valid html tags for multi-line fields (e.g. description).\n *\n * WARNING: For security reasons, do NOT include\n * - 'a' or 'img' tags\n * - tags that require attributes\n *\n * @global string $g_html_valid_tags\n */\n$g_html_valid_tags = 'p, li, ul, ol, br, pre, i, b, u, em, strong';\n\n/**\n * Valid html tags for single line fields (e.g. issue summary).\n *\n * WARNING: For security reasons, do NOT include\n *  - 'a' or 'img' tags\n *  - tags that require attributes\n *\n * @global string $g_html_valid_tags_single_line\n */\n$g_html_valid_tags_single_line = 'i, b, u, em, strong';\n\n/**\n * Maximum length of the description in a dropdown menu (for search).\n *\n * Set to 0 to disable truncations.\n *\n * @global int $g_max_dropdown_length\n */\n$g_max_dropdown_length = 40;\n\n/**\n * Wrap in pre-formatted text.\n *\n * This flag controls whether text delimited by HTML 'pre' tags is wrapped to a\n * maximum linelength (defaults to 100 chars in strings_api).\n *\n * If turned off, the display may be wide when viewing the text.\n *\n * @global int $g_wrap_in_preformatted_text\n */\n$g_wrap_in_preformatted_text = ON;\n\n#############################################\n# MantisBT Authentication and LDAP Settings #\n#############################################\n\n/**\n * Login authentication method.\n *\n * Must be one of MD5, LDAP, BASIC_AUTH or HTTP_AUTH.\n *\n * Note: you may not be able to easily switch encryption methods, so this\n * should be carefully chosen at install time. However, MantisBT will attempt\n * to \"fall back\" to older methods if possible.\n *\n * @global int $g_login_method\n */\n$g_login_method = MD5;\n\n/**\n * Re-authentication required for admin areas.\n *\n * @global int $g_reauthentication\n */\n$g_reauthentication = ON;\n\n/**\n * Duration of the reauthentication timeout, in seconds.\n *\n * @global int $g_reauthentication_expiry\n */\n$g_reauthentication_expiry = TOKEN_EXPIRY_AUTHENTICATED;\n\n\n/**\n * Specifies the LDAP or Active Directory server(s) to connect to.\n *\n * This must be a full LDAP URI (ldap[s]://hostname:port)\n * - Protocol must be either:\n *   - ldap - unencrypted or opportunistic TLS (STARTTLS) {@see $g_ldap_use_starttls}\n *   - ldaps - for TLS encryption\n * - Port number is optional, and defaults to 389. If this doesn't work, try\n *   using one of the following standard port numbers: 636 (ldaps); for Active\n *   Directory Global Catalog forest-wide search, use 3268 (ldap) or 3269 (ldaps)\n *\n * Examples of valid URI:\n *   ldap://ldap.example.com\n *   ldaps://ldap.example.com:3269/\n *\n * Multiple servers can be specified as a space-separated list.\n *\n * @global string $g_ldap_server\n */\n$g_ldap_server = 'ldap://ldap.example.com/';\n\n/**\n * Determines whether the connection will attempt an opportunistic upgrade\n * to a TLS connection (STARTTLS).\n *\n * For security, a failure aborts the entire connection, so make sure your\n * server supports StartTLS if this setting is ON, and use the ldap:// scheme\n * (not ldaps://).\n *\n * @global int $g_ldap_use_starttls\n */\n$g_ldap_use_starttls = ON;\n\n/**\n * The minimum version of the TLS protocol to allow.\n *\n * This maps to the LDAP_OPT_X_TLS_PROTOCOL_MIN ldap library option.\n * For example, LDAP_OPT_X_TLS_PROTOCOL_TLS1_2. If OFF (default), then the\n * protocol version is not set.\n *\n * Requires PHP 7.1 or later.\n * For security, a failure aborts the entire connection.\n *\n * @see https://www.php.net/manual/en/ldap.constants.php#constant.ldap-opt-x-tls-protocol-min\n *\n * @global int $g_ldap_tls_protocol_min\n */\n$g_ldap_tls_protocol_min = OFF;\n\n/**\n * The root distinguished name for LDAP searches.\n *\n * @global string $g_ldap_root_dn\n */\n$g_ldap_root_dn = 'dc=example,dc=com';\n\n/**\n * LDAP search filter for the organization.\n *\n * e.g. '(organizationname=*Traffic)'\n *\n * @global string $g_ldap_organization\n */\n$g_ldap_organization = '';\n\n/**\n * The LDAP Protocol Version.\n *\n * This maps to the LDAP_OPT_PROTOCOL_VERSION ldap library option.\n *\n * Possible values are 2, 3 (default) or 0. If 0, then the protocol version is\n * not set, and you get whatever default the underlying ldap library uses.\n * In almost all cases you should use 3. LDAPv3 was introduced back in 1997.\n * LDAPv2 was deprecated in 2003 by RFC3494.\n *\n * @global int $g_ldap_protocol_version\n */\n$g_ldap_protocol_version = 3;\n\n/**\n * Duration of the timeout for TCP connection to the LDAP server (in seconds).\n *\n * This maps to the LDAP_OPT_NETWORK_TIMEOUT ldap library option.\n *\n * Set this to a low value when the hostname defined in $g_ldap_server resolves\n * to multiple IP addresses, allowing rapid failover to the next available LDAP\n * server.\n * Defaults to 0 (infinite).\n *\n * @global int $g_ldap_network_timeout\n */\n$g_ldap_network_timeout = 0;\n\n/**\n * Determines whether the LDAP library automatically follows referrals returned\n * by LDAP servers or not.\n *\n * This maps to the LDAP_OPT_REFERRALS ldap library option.\n *\n * For Active Directory, this should be set to OFF.\n * If you have only one LDAP server, setting to this to OFF is advisable to prevent\n * any man-in-the-middle attacks.\n *\n * @global int $g_ldap_follow_referrals\n */\n$g_ldap_follow_referrals = ON;\n\n/**\n * The distinguished name of the service account to use for binding to the\n * LDAP server.\n *\n * For anonymous binding, leave empty.\n * For example, 'cn=ldap,ou=Administrators,dc=example,dc=com'.\n *\n * @global string $g_ldap_bind_dn\n */\n$g_ldap_bind_dn = '';\n\n/**\n * The password for the service account used to establish the connection to\n * the LDAP server.\n *\n * For anonymous binding, leave empty.\n *\n * @global string $g_ldap_bind_passwd\n */\n$g_ldap_bind_passwd = '';\n\n/**\n * The LDAP field for username.\n *\n * Use 'sAMAccountName' for Active Directory.\n *\n * @global string $g_ldap_uid_field\n */\n$g_ldap_uid_field = 'uid';\n\n/**\n * The LDAP field for the user's e-mail address.\n *\n * @see $g_use_ldap_email\n * @global string $g_ldap_email_field\n */\n$g_ldap_email_field = 'mail';\n\n/**\n * The LDAP field for the user's real name (i.e. common name).\n *\n * @see $g_use_ldap_realname\n * @global string $g_ldap_realname_field\n */\n$g_ldap_realname_field = 'cn';\n\n/**\n * Use the realname specified in LDAP (ON) rather than the one stored in the\n * database (OFF).\n *\n * Note that MantisBT will update the database with the data retrieved\n * from LDAP when ON.\n *\n * @see $g_ldap_realname_field\n * @global int $g_use_ldap_realname\n */\n$g_use_ldap_realname = OFF;\n\n/**\n * Use the email address specified in LDAP (ON) rather than the one stored\n * in the database (OFF).\n *\n * Note that MantisBT will update the database with the data retrieved\n * from LDAP when ON.\n *\n * @see $g_ldap_email_field\n * @global int $g_use_ldap_email\n */\n$g_use_ldap_email = OFF;\n\n/**\n * LDAP server simulation.\n *\n * This configuration option allows replacing the LDAP server with a comma-\n * delimited text file, useful for development or testing purposes.\n *\n * The LDAP simulation file format is as follows:\n *   - One line per user\n *   - Each line has 4 comma-delimited fields\n *        - username,\n *        - realname,\n *        - e-mail,\n *        - password\n *   - Any extra fields are ignored\n *\n * On production systems, this option should be set to ''.\n *\n * @global string $g_ldap_simulation_file_path\n */\n$g_ldap_simulation_file_path = '';\n\n###################\n# Status Settings #\n###################\n\n/**\n * Status to assign to the bug when submitted.\n *\n * @global int $g_bug_submit_status\n */\n$g_bug_submit_status = NEW_;\n\n/**\n * Status to assign to the bug when assigned.\n *\n * @global int $g_bug_assigned_status\n */\n$g_bug_assigned_status = ASSIGNED;\n\n/**\n * Status to assign to the bug when reopened.\n *\n * @global int $g_bug_reopen_status\n */\n$g_bug_reopen_status = FEEDBACK;\n\n/**\n * Status to assign to the bug when feedback is required from the issue reporter.\n *\n * Once the reporter adds a note the status moves back from feedback\n * to $g_bug_assigned_status or $g_bug_submit_status.\n *\n * @global int $g_bug_feedback_status\n */\n$g_bug_feedback_status = FEEDBACK;\n\n/**\n * Automatically reassign issue when feedback has been provided.\n *\n * When a note is added to a bug currently in $g_bug_feedback_status, and the note\n * author is the bug's reporter, this option will automatically set the bug status\n * to $g_bug_submit_status or $g_bug_assigned_status if the bug is assigned to a\n * developer.\n *\n * Defaults to enabled.\n *\n * @global boolean $g_reassign_on_feedback\n */\n$g_reassign_on_feedback = ON;\n\n/**\n * Resolution to assign to the bug when reopened.\n *\n * @global int $g_bug_reopen_resolution\n */\n$g_bug_reopen_resolution = REOPENED;\n\n/**\n * Default resolution to assign to a bug when it is resolved as being a\n * duplicate of another issue.\n *\n * @global int $g_bug_duplicate_resolution\n */\n$g_bug_duplicate_resolution = DUPLICATE;\n\n/**\n * Bug becomes readonly if its status is >= this status.\n *\n * The bug becomes read/write again if re-opened and its status becomes less\n * than this threshold.\n *\n * @global int $g_bug_readonly_status_threshold\n */\n$g_bug_readonly_status_threshold = RESOLVED;\n\n/**\n * Bug is resolved, ready to be closed or reopened.\n *\n * In some custom installations a bug may be considered as resolved when it is\n * moved to a custom (FIXED or TESTED) status.\n *\n * @global int $g_bug_resolved_status_threshold\n */\n$g_bug_resolved_status_threshold = RESOLVED;\n\n/**\n * Threshold resolution which denotes that a bug has been resolved and\n * successfully fixed by developers.\n *\n * Resolutions above this threshold\n * and below $g_bug_resolution_not_fixed_threshold are considered to be\n * resolved successfully.\n *\n * @global int $g_bug_resolution_fixed_threshold\n */\n$g_bug_resolution_fixed_threshold = FIXED;\n\n/**\n * Threshold resolution which denotes that a bug has been resolved without\n * being successfully fixed by developers.\n *\n * Resolutions above this threshold are considered to be resolved in an\n * unsuccessful way.\n *\n * @global int $g_bug_resolution_not_fixed_threshold\n */\n$g_bug_resolution_not_fixed_threshold = UNABLE_TO_REPRODUCE;\n\n/**\n * Bug is closed.\n *\n * In some custom installations a bug may be considered as closed when it is\n * moved to a custom (COMPLETED or IMPLEMENTED) status.\n *\n * @global int $g_bug_closed_status_threshold\n */\n$g_bug_closed_status_threshold = CLOSED;\n\n/**\n * Automatically set status to ASSIGNED whenever a bug is assigned to a person.\n *\n * This is useful for installations where assigned status is to be used when\n * the bug is in progress, rather than just put in a person's queue.\n *\n * @global int $g_auto_set_status_to_assigned\n */\n$g_auto_set_status_to_assigned = ON;\n\n/**\n * Status Workflow definition.\n *\n * The workflow is defined with a simple 2-dimensional matrix.\n *\n * For each status defined in {@see $g_status_enum_string}, you define which\n * statuses you can go to from that status, e.g. from NEW_ you might list\n *  '10:new,20:feedback,30:acknowledged' but not higher ones.\n *\n * The following example can be transferred to config/config_inc.php:\n * $g_status_enum_workflow[NEW_]='20:feedback,30:acknowledged,40:confirmed,50:assigned,80:resolved';\n * $g_status_enum_workflow[FEEDBACK] ='10:new,30:acknowledged,40:confirmed,50:assigned,80:resolved';\n * $g_status_enum_workflow[ACKNOWLEDGED] ='20:feedback,40:confirmed,50:assigned,80:resolved';\n * $g_status_enum_workflow[CONFIRMED] ='20:feedback,50:assigned,80:resolved';\n * $g_status_enum_workflow[ASSIGNED] ='20:feedback,80:resolved,90:closed';\n * $g_status_enum_workflow[RESOLVED] ='50:assigned,90:closed';\n * $g_status_enum_workflow[CLOSED] ='50:assigned';\n *\n * @global array $g_status_enum_workflow\n */\n$g_status_enum_workflow = array();\n\n############################\n# Bug Attachments Settings #\n############################\n\n/**\n * Specify the filename of the magic database file.\n *\n * This is used to guess what the MIME type of a file is.\n *\n * It is generally safe to leave this setting as the default (blank) as PHP is\n * usually able to find this file by itself.\n *\n * @global string $g_fileinfo_magic_db_file\n */\n$g_fileinfo_magic_db_file = '';\n\n/**\n * Specifies the maximum size (in bytes) below which an attachment is\n * previewed in the bug view pages.\n *\n * To disable the previewing of attachments, set max size to 0.\n *\n * @global int $g_preview_attachments_inline_max_size\n */\n$g_preview_attachments_inline_max_size = 256 * 1024;\n\n/**\n * Extensions for text files that can be expanded inline.\n *\n * @global array $g_preview_text_extensions\n */\n$g_preview_text_extensions = array(\n\t'', 'txt', 'diff', 'patch'\n);\n\n/**\n * Extensions for images that can be expanded inline.\n *\n * @global array $g_preview_image_extensions\n */\n$g_preview_image_extensions = array(\n\t'bmp', 'png', 'gif', 'jpg', 'jpeg'\n);\n\n/**\n * Specifies the maximum width for the auto-preview feature.\n *\n * If no maximum width should be imposed then it should be set to 0.\n *\n * @global int $g_preview_max_width\n */\n$g_preview_max_width = 0;\n\n/**\n * Specifies the maximum height for the auto-preview feature.\n *\n * If no maximum height should be imposed then it should be set to 0.\n *\n * @global int $g_preview_max_height\n */\n$g_preview_max_height = 250;\n\n/**\n * Access level needed to view bugs attachments.\n *\n * View means to see the file names, sizes, and timestamps of the attachments.\n *\n * @global int $g_view_attachments_threshold\n */\n$g_view_attachments_threshold = VIEWER;\n\n/**\n * Access level needed to download bug attachments.\n *\n * @global int $g_download_attachments_threshold\n */\n$g_download_attachments_threshold = VIEWER;\n\n/**\n * Access level needed to delete bug attachments.\n *\n * @global int $g_delete_attachments_threshold\n */\n$g_delete_attachments_threshold = DEVELOPER;\n\n/**\n * Allow users to view their own attachments.\n *\n * If ON, users will be able to view attachments they uploaded themselves,\n * even if their access level is below {@see $g_view_attachments_threshold}.\n *\n * @global int $g_allow_view_own_attachments\n */\n$g_allow_view_own_attachments = ON;\n\n/**\n * Allow users to download their own attachments.\n *\n * If ON, users will be able to download attachments they uploaded themselves,\n * even if their access level is below {@see $g_download_attachments_threshold}.\n *\n * @global int $g_allow_download_own_attachments\n */\n$g_allow_download_own_attachments = ON;\n\n/**\n * Allow users to delete their own attachments.\n *\n * If ON, users will be able to delete attachments they uploaded themselves,\n * even if their access level is below {@see $g_delete_attachments_threshold}.\n *\n * @global int $g_allow_delete_own_attachments\n */\n$g_allow_delete_own_attachments = OFF;\n\n/**\n * Controls the target for attachment links.\n *\n * When ON, attachments will be opened in a new tab when clicking on the link;\n * when OFF (default), they will open in the same tab.\n *\n * @global integer $g_attachments_to_new_tab\n */\n$g_attachments_to_new_tab = OFF;\n\n####################\n# Field Visibility #\n####################\n\n/**\n * Enable or disable usage of the ETA field.\n *\n * @global int $g_enable_eta\n */\n$g_enable_eta = OFF;\n\n/**\n * Enable or disable usage of the Projection field.\n *\n * @global int $g_enable_projection\n */\n$g_enable_projection = OFF;\n\n/**\n * Enable or disable usage of the Product Build field.\n *\n * @global int $g_enable_product_build\n */\n$g_enable_product_build = OFF;\n\n/**\n * An array of optional fields to show on the bug report page.\n *\n * The following optional fields are allowed:\n *   - additional_info\n *   - attachments\n *   - category_id\n *   - due_date\n *   - eta\n *   - handler\n *   - monitors\n *   - os\n *   - os_build\n *   - platform\n *   - priority\n *   - product_build\n *   - product_version\n *   - reproducibility\n *   - resolution\n *   - severity\n *   - status\n *   - steps_to_reproduce\n *   - tags\n *   - target_version\n *   - view_state\n *\n * The summary and description fields are always shown and do not need to be\n * listed in this option. Fields not listed above cannot be shown on the bug\n * report page. Visibility of custom fields is handled via the Manage =>\n * Custom Fields administrator page.\n *\n * Note that 'monitors' is not an actual field; adding it to the list will let\n * authorized reporters select users to add to the issue's monitoring list.\n * Monitors will only be notified of the submission if both their e-mail prefs\n * and the flags allow it (i.e. `$g_notify_flags['new']['monitor'] = ON`).\n * @see $g_monitor_add_others_bug_threshold\n * @see $g_notify_flags\n *\n * This setting can be set on a per-project basis by using the\n * Manage => Manage Configuration administrator page.\n *\n * @global array $g_bug_report_page_fields\n */\n$g_bug_report_page_fields = array(\n\t'additional_info',\n\t'attachments',\n\t'category_id',\n\t'due_date',\n\t'handler',\n\t'os',\n\t'os_build',\n\t'platform',\n\t'priority',\n\t'product_build',\n\t'product_version',\n\t'reproducibility',\n\t'severity',\n\t'steps_to_reproduce',\n\t'tags',\n\t'target_version',\n\t'view_state',\n);\n\n/**\n * An array of optional fields to show on the bug view page.\n *\n * The following optional fields are allowed:\n *   - additional_info\n *   - attachments\n *   - category_id\n *   - date_submitted\n *   - description\n *   - due_date\n *   - eta\n *   - fixed_in_version\n *   - handler\n *   - id\n *   - last_updated\n *   - os\n *   - os_build\n *   - platform\n *   - priority\n *   - product_build\n *   - product_version\n *   - project\n *   - projection\n *   - reporter\n *   - reproducibility\n *   - resolution\n *   - severity\n *   - status\n *   - steps_to_reproduce\n *   - summary\n *   - tags\n *   - target_version\n *   - view_state\n *\n * Fields not listed above cannot be shown on the bug view page. Visibility of\n * custom fields is handled via the Manage => Custom Fields\n * administrator page.\n *\n * This setting can be set on a per-project basis by using the\n * Manage => Manage Configuration administrator page.\n *\n * @global array $g_bug_view_page_fields\n */\n$g_bug_view_page_fields = array(\n\t'additional_info',\n\t'attachments',\n\t'category_id',\n\t'date_submitted',\n\t'description',\n\t'due_date',\n\t'eta',\n\t'fixed_in_version',\n\t'handler',\n\t'id',\n\t'last_updated',\n\t'os',\n\t'os_build',\n\t'platform',\n\t'priority',\n\t'product_build',\n\t'product_version',\n\t'project',\n\t'projection',\n\t'reporter',\n\t'reproducibility',\n\t'resolution',\n\t'severity',\n\t'status',\n\t'steps_to_reproduce',\n\t'summary',\n\t'tags',\n\t'target_version',\n\t'view_state',\n);\n\n/**\n * An array of optional fields to show on the bug update page.\n *\n * The following optional fields are allowed:\n *   - additional_info\n *   - category_id\n *   - date_submitted\n *   - description\n *   - due_date\n *   - eta\n *   - fixed_in_version\n *   - handler\n *   - id\n *   - last_updated\n *   - os\n *   - os_build\n *   - platform\n *   - priority\n *   - product_build\n *   - product_version\n *   - project\n *   - projection\n *   - reporter\n *   - reproducibility\n *   - resolution\n *   - severity\n *   - status\n *   - steps_to_reproduce\n *   - summary\n *   - target_version\n *   - view_state\n *\n * Fields not listed above cannot be shown on the bug update page. Visibility\n * of custom fields is handled via the Manage => Custom Fields\n * administrator page.\n *\n * This setting can be set on a per-project basis by using the\n * Manage => Manage Configuration administrator page.\n *\n * @global array $g_bug_update_page_fields\n */\n$g_bug_update_page_fields = array(\n\t'additional_info',\n\t'category_id',\n\t'date_submitted',\n\t'description',\n\t'due_date',\n\t'eta',\n\t'fixed_in_version',\n\t'handler',\n\t'id',\n\t'last_updated',\n\t'os',\n\t'os_build',\n\t'platform',\n\t'priority',\n\t'product_build',\n\t'product_version',\n\t'project',\n\t'projection',\n\t'reporter',\n\t'reproducibility',\n\t'resolution',\n\t'severity',\n\t'status',\n\t'steps_to_reproduce',\n\t'summary',\n\t'target_version',\n\t'view_state',\n);\n\n##########################\n# MantisBT Misc Settings #\n##########################\n\n/**\n * Access level needed to report a bug.\n *\n * @global int $g_report_bug_threshold\n */\n$g_report_bug_threshold = REPORTER;\n\n/**\n * Access level needed to update bugs (i.e., the update_bug_page).\n *\n * This controls whether the user sees the \"Update Bug\" button in bug_view*_page\n * and the pencil icon in view_all_bug_page.\n *\n * @global int $g_update_bug_threshold\n */\n$g_update_bug_threshold = UPDATER;\n\n/**\n * Access level needed to view bugs.\n *\n * @global int $g_view_bug_threshold\n */\n$g_view_bug_threshold = VIEWER;\n\n/**\n * Access level needed to monitor bugs.\n *\n * @global int $g_monitor_bug_threshold\n */\n$g_monitor_bug_threshold = REPORTER;\n\n/**\n * Threshold needed to show the list of users monitoring a bug on the bug view pages.\n *\n * @global int $g_show_monitor_list_threshold\n */\n$g_show_monitor_list_threshold = DEVELOPER;\n\n/**\n * Access level needed to add other users to the list of users monitoring a bug.\n *\n * This setting should not be lower than {@see $g_show_monitor_list_threshold}.\n *\n * @global int $g_monitor_add_others_bug_threshold\n */\n$g_monitor_add_others_bug_threshold = DEVELOPER;\n\n/**\n * Access level needed to delete other users from the list of users\n * monitoring a bug.\n *\n * This setting should not be lower than {@see $g_show_monitor_list_threshold}.\n *\n * @global int $g_monitor_delete_others_bug_threshold\n */\n$g_monitor_delete_others_bug_threshold = DEVELOPER;\n\n/**\n * Access level required to print issue reports.\n *\n * Grants users access to the Print Reports functionality (Word/HTML) from the\n * View Issues page (print_all_bug_page.php and print_all_bug_page_word.php).\n *\n * @global int $g_print_reports_threshold\n */\n$g_print_reports_threshold = UPDATER;\n\n/**\n * Access level required to export issues.\n *\n * Lets user export issues to CSV and Excel from the View Issues page.\n *\n * @global int $g_export_issues_threshold\n */\n$g_export_issues_threshold = VIEWER;\n\n/**\n * Access level needed to view private bugs.\n *\n * @global int $g_private_bug_threshold\n */\n$g_private_bug_threshold = DEVELOPER;\n\n/**\n * Access level needed to be able to be listed in the assign to field.\n *\n * @global int $g_handle_bug_threshold\n */\n$g_handle_bug_threshold = DEVELOPER;\n\n/**\n * Access level needed to assign issues.\n *\n * Allows control over who can route bugs, via display of the\n * - \"Assign To:\" button on bug_view*_page\n * - \"Assigned\" list in bug_update*_page.\n *\n * Defaults to {@see $g_handle_bug_threshold}.\n *\n * @global int $g_update_bug_assign_threshold\n */\n$g_update_bug_assign_threshold = '%handle_bug_threshold%';\n\n/**\n * Access level needed to view private bugnotes.\n *\n * @global int $g_private_bugnote_threshold\n */\n$g_private_bugnote_threshold = DEVELOPER;\n\n/**\n * Access level needed to view handler.\n *\n * @global int $g_view_handler_threshold\n */\n$g_view_handler_threshold = VIEWER;\n\n/**\n * Access level needed to view history.\n *\n * @global int $g_view_history_threshold\n */\n$g_view_history_threshold = VIEWER;\n\n/**\n * Access level needed to send a reminder from the bug view pages.\n *\n * Set to NOBODY to disable the feature.\n *\n * @global int $g_bug_reminder_threshold\n */\n$g_bug_reminder_threshold = DEVELOPER;\n\n/**\n * Access level required to view bug history revisions.\n *\n * Users can always see revisions for the issues and bugnotes they reported.\n *\n * @global int $g_bug_revision_view_threshold\n */\n$g_bug_revision_view_threshold = DEVELOPER;\n\n/**\n * Access level required to drop bug history revisions.\n *\n * @global int $g_bug_revision_drop_threshold\n */\n$g_bug_revision_drop_threshold = MANAGER;\n\n/**\n * Access level needed to upload files to the project documentation section.\n *\n * You can set this to NOBODY to prevent uploads to projects.\n *\n * @see $g_enable_project_documentation\n * @see $g_view_proj_doc_threshold\n * @see $g_allow_file_upload\n * @see $g_upload_bug_file_threshold\n * @global int $g_upload_project_file_threshold\n */\n$g_upload_project_file_threshold = MANAGER;\n\n/**\n * Access level needed to upload files to attach to a bug.\n *\n * You can set this to NOBODY to prevent uploads to bugs but note that\n * the reporter of the bug will still be able to upload unless you set\n * {@see $g_allow_reporter_upload} or {@see $g_allow_file_upload} to OFF.\n *\n * @see $g_upload_project_file_threshold\n * @global int $g_upload_bug_file_threshold\n */\n$g_upload_bug_file_threshold = REPORTER;\n\n/**\n * Add bugnote threshold.\n *\n * @global int $g_add_bugnote_threshold\n */\n$g_add_bugnote_threshold = REPORTER;\n\n/**\n * Threshold at which a user can edit the bugnotes of other users.\n *\n * @global int $g_update_bugnote_threshold\n */\n$g_update_bugnote_threshold = DEVELOPER;\n\n/**\n * Threshold needed to view project documentation.\n *\n * Note: setting this to ANYBODY will let any user download attachments\n * from private projects, regardless of their being a member of it.\n *\n * @see $g_enable_project_documentation\n * @see $g_upload_project_file_threshold\n * @global int $g_view_proj_doc_threshold\n */\n$g_view_proj_doc_threshold = VIEWER;\n\n/**\n * Site manager.\n *\n * @global int $g_manage_site_threshold\n */\n$g_manage_site_threshold = MANAGER;\n\n/**\n * Threshold at which a user is considered to be a site administrator.\n *\n * These users have \"superuser\" access to all aspects of MantisBT including\n * the admin/ directory.\n *\n * WARNING: DO NOT CHANGE THIS VALUE UNLESS YOU ABSOLUTELY KNOW WHAT YOU'RE DOING!\n * Users at this access level have the ability to damage your MantisBT installation\n * and data within the database. It is strongly advised you leave this option alone.\n *\n * @global int $g_admin_site_threshold\n */\n$g_admin_site_threshold = ADMINISTRATOR;\n\n/**\n * Threshold needed to manage a project.\n *\n * Allows changing project details and settings (not to add/delete projects).\n *\n * @global int $g_manage_project_threshold\n */\n$g_manage_project_threshold = MANAGER;\n\n/**\n * Threshold needed to add/delete/modify news.\n *\n * @global int $g_manage_news_threshold\n */\n$g_manage_news_threshold = MANAGER;\n\n/**\n * Threshold required to delete a project.\n *\n * @global int $g_delete_project_threshold\n */\n$g_delete_project_threshold = ADMINISTRATOR;\n\n/**\n * Threshold needed to create a new project.\n *\n * @global int $g_create_project_threshold\n */\n$g_create_project_threshold = ADMINISTRATOR;\n\n/**\n * Threshold needed to be automatically included in private projects.\n *\n * @global int $g_private_project_threshold\n */\n$g_private_project_threshold = ADMINISTRATOR;\n\n/**\n * Threshold needed to manage user access to a project.\n *\n * @global int $g_project_user_threshold\n */\n$g_project_user_threshold = MANAGER;\n\n/**\n * Threshold needed to manage user accounts.\n *\n * @global int $g_manage_user_threshold\n */\n$g_manage_user_threshold = ADMINISTRATOR;\n\n/**\n * Threshold needed to impersonate a user or NOBODY to disable the feature.\n *\n * @global int $g_impersonate_user_threshold\n */\n$g_impersonate_user_threshold = ADMINISTRATOR;\n\n/**\n * Delete bug threshold.\n *\n * @global int $g_delete_bug_threshold\n */\n$g_delete_bug_threshold = DEVELOPER;\n\n/**\n * Threshold at which a user can delete the bugnotes of other users.\n *\n * The default value is equal to {@see $g_delete_bug_threshold}.\n *\n * @global string $g_delete_bugnote_threshold\n */\n$g_delete_bugnote_threshold = '%delete_bug_threshold%';\n\n/**\n * Move bug threshold.\n *\n * @global int $g_move_bug_threshold\n */\n$g_move_bug_threshold = DEVELOPER;\n\n/**\n * Threshold needed to set the view status while reporting a bug or a bug note.\n *\n * @global int $g_set_view_status_threshold\n */\n$g_set_view_status_threshold = REPORTER;\n\n/**\n * Threshold needed to update the view status while updating a bug or a bug note.\n *\n * This threshold should be greater or equal to $g_set_view_status_threshold.\n *\n * @global int $g_change_view_status_threshold\n */\n$g_change_view_status_threshold = UPDATER;\n\n/**\n * Threshold needed to be able to use stored queries.\n *\n * @global int $g_stored_query_use_threshold\n */\n$g_stored_query_use_threshold = REPORTER;\n\n/**\n * Threshold needed to be able to create stored queries.\n *\n * @global int $g_stored_query_create_threshold\n */\n$g_stored_query_create_threshold = DEVELOPER;\n\n/**\n * Threshold needed to be able to create shared stored queries.\n *\n * @global int $g_stored_query_create_shared_threshold\n */\n$g_stored_query_create_shared_threshold = MANAGER;\n\n/**\n * Threshold needed to update read-only bugs.\n *\n * Read-only bugs are identified via {@see $g_bug_readonly_status_threshold}.\n *\n * @global int $g_update_readonly_bug_threshold\n */\n$g_update_readonly_bug_threshold = MANAGER;\n\n/**\n * Threshold for viewing Changelog.\n *\n * @global int $g_view_changelog_threshold\n */\n$g_view_changelog_threshold = VIEWER;\n\n/**\n * Threshold for viewing timeline.\n *\n * @global int $g_timeline_view_threshold\n */\n$g_timeline_view_threshold = VIEWER;\n\n/**\n * Threshold for viewing Roadmap.\n *\n * @global int $g_roadmap_view_threshold\n */\n$g_roadmap_view_threshold = VIEWER;\n\n/**\n * Threshold for updating roadmap, target_version, etc.\n *\n * @global int $g_roadmap_update_threshold\n */\n$g_roadmap_update_threshold = DEVELOPER;\n\n/**\n * Status change thresholds.\n *\n * @global int $g_update_bug_status_threshold\n */\n$g_update_bug_status_threshold = DEVELOPER;\n\n/**\n * Access level needed to re-open bugs.\n *\n * @global int $g_reopen_bug_threshold\n */\n$g_reopen_bug_threshold = DEVELOPER;\n\n/**\n * Access level needed to assign bugs to unreleased product versions.\n *\n * @global int $g_report_issues_for_unreleased_versions_threshold\n */\n$g_report_issues_for_unreleased_versions_threshold = DEVELOPER;\n\n/**\n * Access level needed to set a bug sticky.\n *\n * @global int $g_set_bug_sticky_threshold\n */\n$g_set_bug_sticky_threshold = MANAGER;\n\n/**\n * Define access thresholds needed to enter each status listed.\n *\n * If a status is not listed, it falls back to {@see $g_update_bug_status_threshold}\n *\n * Example:\n * $g_set_status_threshold = array(\n *     ACKNOWLEDGED => MANAGER,\n *     CONFIRMED => DEVELOPER,\n *     CLOSED => MANAGER\n * );\n * @global array $g_set_status_threshold\n */\n$g_set_status_threshold = array( NEW_ => REPORTER );\n\n/**\n * Threshold at which a user can edit his/her own bugnotes.\n *\n * The default value is equal to the configuration setting\n * {@see $g_update_bugnote_threshold.}\n *\n * @global int $g_bugnote_user_edit_threshold\n */\n$g_bugnote_user_edit_threshold = '%update_bugnote_threshold%';\n\n/**\n * Threshold at which a user can delete his/her own bugnotes.\n *\n * The default value is equal to the configuration setting\n * {@see $g_delete_bugnote_threshold}.\n *\n * @global int $g_bugnote_user_delete_threshold\n */\n$g_bugnote_user_delete_threshold = '%delete_bugnote_threshold%';\n\n/**\n * Threshold at which a user can change the view state of his/her own bugnotes.\n *\n * The default value is equal to the configuration setting\n * {@see $g_change_view_status_threshold}.\n *\n * @global int $g_bugnote_user_change_view_state_threshold\n */\n$g_bugnote_user_change_view_state_threshold = '%change_view_status_threshold%';\n\n/**\n * Allow a bug to have no category.\n *\n * @global int $g_allow_no_category\n */\n$g_allow_no_category = OFF;\n\n/**\n * Limit reporters.\n *\n * Set to ON if you wish to limit reporters to only viewing bugs that they report.\n *\n * This feature is deprecated and replaced by the 'limit_view_unless_threshold'\n * option. It must be OFF to enable the new one.\n *\n * @global int $g_limit_reporters\n * @deprecated 2.24.0 Use $g_limit_view_unless_threshold instead\n */\n$g_limit_reporters = OFF;\n\n/**\n * Threshold at which a user can view all issues in the project (as allowed by other permissions).\n *\n * Not meeting this threshold means the user can only see the issues they reported,\n * are handling or monitoring.\n *\n * A value of ANYBODY means that all users have full visibility (as default)\n *\n * This is a replacement for old option {@see $g_limit_reporters}.\n *\n * @global int $g_limit_view_unless_threshold\n */\n$g_limit_view_unless_threshold = ANYBODY;\n\n/**\n * Reporter can close.\n *\n * Allow reporters to close the bugs they reported, after they are marked resolved.\n *\n * @global int $g_allow_reporter_close\n */\n$g_allow_reporter_close = OFF;\n\n/**\n * Reporter can reopen.\n *\n * Allow reporters to reopen the bugs they reported, after they are marked resolved.\n *\n * @global int $g_allow_reporter_reopen\n */\n$g_allow_reporter_reopen = ON;\n\n/**\n * Reporter can upload.\n *\n * Allow reporters to upload attachments to bugs they reported.\n *\n * @global int $g_allow_reporter_upload\n */\n$g_allow_reporter_upload = ON;\n\n/**\n * Account delete.\n *\n * Allow users to delete their own accounts.\n *\n * @global int $g_allow_account_delete\n */\n$g_allow_account_delete = OFF;\n\n/**\n * Enable anonymous access to MantisBT.\n *\n * You must also specify {@see $g_anonymous_account} as the account which\n * anonymous users will browse MantisBT with.\n *\n * The default setting is OFF.\n *\n * @global int $g_allow_anonymous_login\n */\n$g_allow_anonymous_login = OFF;\n\n/**\n * Define the account which anonymous users will assume when using MantisBT.\n *\n * You only need to define this setting when {@see $g_allow_anonymous_login} is\n * set to ON. This account will always be treated as a protected account and\n * thus anonymous users will not be able to update the preferences or settings\n * of this account.\n *\n * It is suggested that the access level of this account have read only access\n * to your MantisBT installation (VIEWER). Please read the documentation on this\n * topic before setting up anonymous access to your MantisBT installation.\n *\n * @global string $g_anonymous_account\n */\n$g_anonymous_account = '';\n\n/**\n * Bug Linking.\n *\n * If a number matching an existing issue number follows this tag it, MantisBT\n * will create a link to that bug.\n *\n * Examples:\n * - for '#', a link would be '#45'\n * - for 'bug:' a link would be 'bug:98'\n *\n * @global string $g_bug_link_tag\n */\n$g_bug_link_tag = '#';\n\n/**\n * Bugnote Linking.\n *\n * if a number matching an existing bugnote id follows this tag, MantisBT\n * will create a link to that bugnote.\n *\n * Examples:\n * - for '~' a link would be '~45'\n * - for 'bugnote:' a link would be 'bugnote:98'\n *\n * @global string $g_bugnote_link_tag\n */\n$g_bugnote_link_tag = '~';\n\n/**\n * Bug Count Linking.\n *\n * This is the prefix to use when creating links to bug views from bug counts\n * (eg. on the Main page and the Summary page).\n *\n * - Temporary filter (default):\n *   'view_all_set.php?type=' . FILTER_ACTION_PARSE_NEW . '&amp;temporary=y'\n * - Permanent filter:\n *   'view_all_set.php?type=' . FILTER_ACTION_PARSE_NEW;\n *\n * NOTE: FILTER_ACTION_xxx constants are defined in core/constant_inc.php.\n *\n * @global string $g_bug_count_hyperlink_prefix\n */\n$g_bug_count_hyperlink_prefix = 'view_all_set.php?type=' . FILTER_ACTION_PARSE_NEW . '&amp;temporary=y';\n\n/**\n * The regular expression to use when validating new user login names.\n *\n * The default allows a-z, A-Z, 0-9, +, -, dot, space and underscore.\n *\n * If you change this, you may want to update the ERROR_USER_NAME_INVALID string\n * in the language files to explain the rules you are using on your site\n *\n * See {@link https://en.wikipedia.org/wiki/Regular_expression} for more details\n * about regular expressions. For testing them, use {@link https://rubular.com/}.\n *\n * @global string $g_user_login_valid_regex\n */\n$g_user_login_valid_regex = '/^([a-z\\d\\-.+_ ]+(@[a-z\\d\\-.]+\\.[a-z]{2,18})?)$/i';\n\n/**\n * Default tag prefix used to filter the list of tags in manage_tags_page.php.\n *\n * Change this to 'A' (or any other letter) if you have a lot of tags in the\n * system and loading the manage tags page takes a long time.\n *\n * @global string $g_default_manage_tag_prefix\n */\n$g_default_manage_tag_prefix = 'ALL';\n\n/**\n * The separator to use for CSV exports.\n *\n * @global string $g_csv_separator\n */\n$g_csv_separator = ',';\n\n/**\n * Protection against CSV Injection.\n *\n * When this setting is ON (default), any data that could be interpreted as a\n * formula by a spreadsheet program such as Excel (i.e. starting with `=`, `@`,\n * `-` or `+`), will be prefixed with a tab character (\\t) in order to prevent\n * CSV injection.\n *\n * Sometimes this may not be appropriate (e.g. if the CSV needs to be consumed\n * programmatically). In that case, $g_csv_injection_protection can be set to OFF,\n * resulting in raw data to be exported.\n *\n * Setting this to OFF is a security risk. An attacker could upload a crafted\n * CSV file containing formulas that will be executed when opened with Excel,\n * as described in this article {@link http://georgemauer.net/2017/10/07/csv-injection.html}.\n *\n * @global string $g_csv_injection_protection\n */\n$g_csv_injection_protection = ON;\n\n/**\n * The threshold required for users to be able to manage configuration of a project.\n *\n * This includes workflow, email notifications, columns to view, and others.\n *\n * @global int $g_manage_configuration_threshold\n */\n$g_manage_configuration_threshold = MANAGER;\n\n/**\n * Threshold for users to view the system configurations.\n *\n * @global int $g_view_configuration_threshold\n */\n$g_view_configuration_threshold = ADMINISTRATOR;\n\n/**\n * Threshold for users to set the system configurations generically via\n * MantisBT web interface.\n *\n * WARNING: Users who have access to set configuration via the interface MUST\n * be trusted.  This is due to the fact that such users can set configurations\n * to PHP code and hence there can be a security risk if such users are not\n * trusted.\n *\n * @global int $g_set_configuration_threshold\n */\n$g_set_configuration_threshold = ADMINISTRATOR;\n\n####################################\n# MantisBT Look and Feel Variables #\n####################################\n\n/**\n * Status color codes, using the Tango color palette.\n *\n * @global array $g_status_colors\n */\n$g_status_colors = array(\n\t'new'          => '#fcbdbd', # red    (scarlet red #ef2929)\n\t'feedback'     => '#e3b7eb', # purple (plum        #75507b)\n\t'acknowledged' => '#ffcd85', # orange (orango      #f57900)\n\t'confirmed'    => '#fff494', # yellow (butter      #fce94f)\n\t'assigned'     => '#c2dfff', # blue   (sky blue    #729fcf)\n\t'resolved'     => '#d2f5b0', # green  (chameleon   #8ae234)\n\t'closed'       => '#c9ccc4'  # grey   (aluminum    #babdb6)\n);\n\n/**\n * The padding level when displaying bug ids.\n *\n * The bug id will be padded with 0's up to the size given\n *\n * @global int $g_display_bug_padding\n */\n$g_display_bug_padding = 7;\n\n/**\n * The padding level when displaying bugnote ids.\n *\n * The bugnote id will be padded with 0's up to the size given.\n *\n * @global int $g_display_bugnote_padding\n */\n$g_display_bugnote_padding = 7;\n\n#############################\n# MantisBT Cookie Variables #\n#############################\n\n/**\n * Specifies the path under which a cookie is visible.\n *\n * All scripts in this directory and its sub-directories will be able\n * to access MantisBT cookies.\n *\n * It is recommended to set this to the actual MantisBT path.\n *\n * @link http://php.net/function.setcookie\n * @global string $g_cookie_path\n */\n$g_cookie_path = '/';\n\n/**\n * The domain that the MantisBT cookies are available to.\n *\n * @global string $g_cookie_domain\n */\n$g_cookie_domain = '';\n\n/**\n * Specifies the SameSite attribute to use for the MantisBT cookies.\n *\n * Valid values are Strict, Lax (default) or None.\n *\n * NOTE: While 'Strict' provides stronger protection against CSRF attacks, it\n * actually prevents the user's session from being recognized when clicking a\n * link from a notification e-mail, causing MantisBT to start an anonymous\n * session even if the user is already logged in.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite\n *\n * @global string $g_cookie_samesite\n */\n$g_cookie_samesite = 'Lax';\n\n/**\n * Prefix for all MantisBT cookies.\n *\n * This should be an identifier which does not include spaces or periods,\n * and should be unique per MantisBT installation, especially if\n * $g_cookie_path is not restricting the cookies' scope to the actual\n * MantisBT directory.\n *\n * @see $g_cookie_path\n * @global string $g_cookie_prefix\n */\n$g_cookie_prefix = 'MANTIS';\n\n/**\n *\n * @global string $g_string_cookie\n */\n$g_string_cookie = '%cookie_prefix%_STRING_COOKIE';\n\n/**\n *\n * @global string $g_project_cookie\n */\n$g_project_cookie = '%cookie_prefix%_PROJECT_COOKIE';\n\n/**\n *\n * @global string $g_view_all_cookie\n */\n$g_view_all_cookie = '%cookie_prefix%_VIEW_ALL_COOKIE';\n\n/**\n * Collapse settings cookie.\n * \n * Stores the open/closed state of the collapsible sections.\n * \n * @global string $g_collapse_settings_cookie\n */\n$g_collapse_settings_cookie = '%cookie_prefix%_collapse_settings';\n\n/**\n * Stores the filter criteria for the Manage User page.\n * \n * @global string $g_manage_users_cookie\n */\n$g_manage_users_cookie = '%cookie_prefix%_MANAGE_USERS_COOKIE';\n\n/**\n * Stores the filter criteria for the Manage Config Report page.\n * \n * @global string $g_manage_config_cookie\n */\n$g_manage_config_cookie = '%cookie_prefix%_MANAGE_CONFIG_COOKIE';\n\n/**\n *\n * @global string $g_logout_cookie\n */\n$g_logout_cookie = '%cookie_prefix%_LOGOUT_COOKIE';\n\n/**\n *\n * @global string $g_bug_list_cookie\n */\n$g_bug_list_cookie = '%cookie_prefix%_BUG_LIST_COOKIE';\n\n#############################\n# MantisBT Filter Variables #\n#############################\n\n/**\n * Show custom fields in the filter dialog and use these in filtering.\n *\n * @global int $g_filter_by_custom_fields\n */\n$g_filter_by_custom_fields = ON;\n\n/**\n * The number of filter fields to display per row.\n *\n * The default is 8.\n *\n * @global int $g_filter_custom_fields_per_row\n */\n$g_filter_custom_fields_per_row = 8;\n\n/**\n * Controls the display of the filter pages.\n *\n * Possible values are:\n * - SIMPLE_ONLY - only simple view\n * - ADVANCED_ONLY - only advanced view (allows multiple value selections)\n * - SIMPLE_DEFAULT - defaults to simple view, but shows a link for advanced\n * - ADVANCED_DEFAULT - defaults to advanced view, but shows a link for simple\n *\n * @global int $g_view_filters\n */\n$g_view_filters = SIMPLE_DEFAULT;\n\n/**\n * Allow use of dynamic filter controls.\n *\n * This switch enables the use of AJAX to dynamically load and create filter\n * form controls upon request. This method will reduce the amount of data that\n * needs to be transferred upon each page load dealing with filters and thus\n * will result in speed improvements and bandwidth reduction.\n *\n * @global int $g_use_dynamic_filters\n */\n$g_use_dynamic_filters = ON;\n\n/**\n * The threshold required for users to be able to create permalinks.\n *\n * To turn off this feature use NOBODY.\n * \n * @global int $g_create_permalink_threshold\n */\n$g_create_permalink_threshold = DEVELOPER;\n\n/**\n * The service to use to create a short URL.\n *\n * The %s will be replaced by the long URL.\n * To disable the feature set to ''.\n *\n * @global string $g_create_short_url\n */\n$g_create_short_url = 'https://tinyurl.com/create.php?url=%s';\n\n#########################\n# MantisBT Enum Strings #\n#########################\n\n/**\n * Access levels enumeration.\n *\n * Status from $g_status_index-1 to 79 are used for the onboard customization\n * (if enabled) directly use MantisBT to edit them.\n * @global string $g_access_levels_enum_string\n */\n$g_access_levels_enum_string = '10:viewer,25:reporter,40:updater,55:developer,70:manager,90:administrator';\n\n/**\n * Project statuses enumeration.\n *\n * @global string $g_project_status_enum_string\n */\n$g_project_status_enum_string = '10:development,30:release,50:stable,70:obsolete';\n\n/**\n * Project view state enumeration.\n *\n * @global string $g_project_view_state_enum_string\n */\n$g_project_view_state_enum_string = '10:public,50:private';\n\n/**\n * Bug view state enumeration.\n *\n * @global string $g_view_state_enum_string\n */\n$g_view_state_enum_string = '10:public,50:private';\n\n/**\n * Priority enumeration.\n *\n * @global string $g_priority_enum_string\n */\n$g_priority_enum_string = '10:none,20:low,30:normal,40:high,50:urgent,60:immediate';\n\n/**\n * Severity enumeration.\n *\n * @global string $g_severity_enum_string\n */\n$g_severity_enum_string = '10:feature,20:trivial,30:text,40:tweak,50:minor,60:major,70:crash,80:block';\n\n/**\n * Reproducibility enumeration.\n *\n * @global string $g_reproducibility_enum_string\n */\n$g_reproducibility_enum_string = '10:always,30:sometimes,50:random,70:have not tried,90:unable to duplicate,100:N/A';\n\n/**\n * Statuses enumeration.\n *\n * @global string $g_status_enum_string\n */\n$g_status_enum_string = '10:new,20:feedback,30:acknowledged,40:confirmed,50:assigned,80:resolved,90:closed';\n\n/**\n * Resolutions enumeration.\n *\n * @@@ for documentation, the values in this list are also used to define\n * variables in the language files (e.g., $s_new_bug_title referenced in\n * bug_change_status_page.php). Embedded spaces are converted to underscores\n * (e.g., \"working on\" references $s_working_on_bug_title). They are also\n * expected to be English names for the states\n * \n * @global string $g_resolution_enum_string\n */\n$g_resolution_enum_string = '10:open,20:fixed,30:reopened,40:unable to duplicate,50:not fixable,60:duplicate,70:not a bug,80:suspended,90:wont fix';\n\n/**\n * Projection enumeration.\n *\n * @global string $g_projection_enum_string\n */\n$g_projection_enum_string = '10:none,30:tweak,50:minor fix,70:major rework,90:redesign';\n\n/**\n * ETA enumeration.\n *\n * @global string $g_eta_enum_string\n */\n$g_eta_enum_string = '10:none,20:< 1 day,30:2-3 days,40:< 1 week,50:< 1 month,60:> 1 month';\n\n/**\n * Sponsorship enumeration.\n *\n * @global string $g_sponsorship_enum_string\n */\n$g_sponsorship_enum_string = '0:Unpaid,1:Requested,2:Paid';\n\n/**\n * Custom Field types enumeration.\n *\n * @global string $g_custom_field_type_enum_string\n */\n$g_custom_field_type_enum_string = '0:string,1:numeric,2:float,3:enum,4:email,5:checkbox,6:list,7:multiselection list,8:date,9:radio,10:textarea';\n\n###############################\n# MantisBT Speed Optimisation #\n###############################\n\n/**\n * Use compression of generated html if browser supports it.\n *\n * If you already have compression enabled in your php.ini file (either with\n * zlib.output_compression or output_handler=ob_gzhandler) this option will be\n * ignored.\n *\n * If you do not have zlib enabled in your PHP installation this option will\n * also be ignored.  PHP 4.3.0 and later have zlib included by default. Windows\n * users should uncomment the appropriate line in their php.ini files to load\n * the zlib DLL. You can check what extensions are loaded by running \"php -m\"\n * at the command line (look for 'zlib').\n * \n * @global int $g_compress_html\n */\n$g_compress_html = ON;\n\n/**\n * Use persistent database connections.\n * \n * @global int $g_use_persistent_connections\n */\n$g_use_persistent_connections = OFF;\n\n#################\n# Include files #\n#################\n\n/**\n * Specify your top/bottom include file (logos, banners, etc).\n * \n * @global string $g_bottom_include_page\n */\n$g_bottom_include_page = '%absolute_path%';\n\n/**\n * Specify your top/bottom include file (logos, banners, etc).\n *\n * If a top file is supplied, the default MantisBT logo at the top will be hidden.\n * For example, you could include a centered title at the top of the page with:\n *\n * <div class=\"center\"><span class=\"pagetitle\">TITLE</span></div>\n *\n * The default banner which is removed if you use an include file can be found in html_api.php in\n * the function called html_top_banner.\n *\n * @global string $g_top_include_page\n */\n$g_top_include_page = '%absolute_path%';\n\n/**\n * CSS file.\n * \n * @global string $g_css_include_file\n */\n$g_css_include_file = 'default.css';\n\n/**\n * RTL CSS file.\n * \n * @global string $g_css_rtl_include_file\n */\n$g_css_rtl_include_file = 'rtl.css';\n\n/**\n * Use CDN for loading javascript libraries and their associated CSS.\n *\n * Using Content Delivery Networks (CDN) can improve performance for loading\n * MantisBT pages.\n *\n * This can be disabled if MantisBT shouldn't reach out outside of the\n * corporate network.\n * \n * @global int $g_cdn_enabled\n */\n$g_cdn_enabled = OFF;\n\n################\n# Redirections #\n################\n\n/**\n * Default page after Login or Set Project.\n *\n * @global string $g_default_home_page\n */\n$g_default_home_page = 'my_view_page.php';\n\n/**\n * Specify where the user should be sent after logging out.\n *\n * @global string $g_logout_redirect_page\n */\n$g_logout_redirect_page = AUTH_PAGE_USERNAME;\n\n###########\n# Headers #\n###########\n\n/**\n * An array of custom headers to be sent with each page.\n *\n * For example, to allow your MantisBT installation to be viewed in a frame in\n * IE6 when the frameset is not at the same hostname as the MantisBT install,\n * you need to add a P3P header. You could try something like\n * 'P3P: CP=\"CUR ADM\"' in your config file, but make sure to check that the\n * your policy actually matches with what you are promising. See\n * http://msdn.microsoft.com/en-us/library/ms537343.aspx for more information.\n *\n * Even though this is not recommended, you could use this setting to disable\n * previously sent headers. For example, assuming you didn't want to benefit\n * from Content Security Policy, you could add 'Content-Security-Policy:' to\n * the array.\n *\n * @global array $g_custom_headers\n */\n$g_custom_headers = array();\n\n/**\n * Browser Caching Control.\n *\n * By default, we try to prevent the browser from caching anything. This setting\n * will allow the browser to cache all pages. The upside will be better\n * performance overall, but there may be cases where outdated information is\n * displayed.\n *\n * @global int $g_allow_browser_cache\n */\n$g_allow_browser_cache = OFF;\n\n#################\n# Custom Fields #\n#################\n\n/**\n * Threshold needed to manage custom fields.\n *\n * @global int $g_manage_custom_fields_threshold\n */\n$g_manage_custom_fields_threshold = ADMINISTRATOR;\n\n/**\n * Threshold needed to link/unlink custom field to/from a project.\n *\n * @global int $g_custom_field_link_threshold\n */\n$g_custom_field_link_threshold = MANAGER;\n\n/**\n * Whether to start editing a custom field immediately after creating it.\n *\n * @global int $g_custom_field_edit_after_create\n */\n$g_custom_field_edit_after_create = ON;\n\n################\n# Custom Menus #\n################\n\n/**\n * Add custom options to the main menu.\n *\n * For example:\n * $g_main_menu_custom_options = array(\n *     array(\n *         'title'        => 'My Link',\n *         'access_level' => MANAGER,\n *         'url'          => 'my_link.php',\n *         'icon'         => 'fa-plug'\n *     ),\n *     array(\n *         'title'        => 'My Link2',\n *         'access_level' => ADMINISTRATOR,\n *         'url'          => 'my_link2.php',\n *         'icon'         => 'fa-plug'\n *     )\n * );\n *\n * Note that if the caption is a localized string name (in strings_english.txt\n * or custom_strings_inc.php), then it will be replaced by the translated\n * string.  Options will only be added to the menu if the current logged in\n * user has the appropriate access level.\n *\n * Access level is an optional field, and no check will be done if it is not set.\n * Icon is an optional field, and 'fa-plug' will be used if it is not set.\n *\n * Use icons from http://fontawesome.io/icons/ - Add \"fa-\" prefix to icon name.\n *\n * @global array $g_main_menu_custom_options\n */\n$g_main_menu_custom_options = array();\n\n#########\n# Icons #\n#########\n\n/**\n * Maps a file extension to a file type icon.\n *\n * These icons are printed next to project documents and bug attachments.\n * Note:\n * - Extensions must be in lower case\n * - All icons will be displayed as 16x16 pixels.\n *\n * @global array $g_file_type_icons\n */\n$g_file_type_icons = array(\n\t''      => 'fa-file-text-o',\n\t'7z'    => 'fa-file-archive-o',\n\t'ace'   => 'fa-file-archive-o',\n\t'arj'   => 'fa-file-archive-o',\n\t'bz2'   => 'fa-file-archive-o',\n\t'c'     => 'fa-file-code-o',\n\t'chm'   => 'fa-file-o',\n\t'cpp'   => 'fa-file-code-o',\n\t'css'   => 'fa-file-code-o',\n\t'csv'   => 'fa-file-text-o',\n\t'cxx'   => 'fa-file-code-o',\n\t'diff'  => 'fa-file-text-o',\n\t'doc'   => 'fa-file-word-o',\n\t'docx'  => 'fa-file-word-o',\n\t'dot'   => 'fa-file-word-o',\n\t'eml'   => 'fa-envelope-o',\n\t'htm'   => 'fa-file-code-o',\n\t'html'  => 'fa-file-code-o',\n\t'gif'   => 'fa-file-image-o',\n\t'gz'    => 'fa-file-archive-o',\n\t'jpe'   => 'fa-file-image-o',\n\t'jpg'   => 'fa-file-image-o',\n\t'jpeg'  => 'fa-file-image-o',\n\t'log'   => 'fa-file-text-o',\n\t'lzh'   => 'fa-file-archive-o',\n\t'md'    => 'fa-file-text-o',\n\t'mhtml' => 'fa-file-code-o',\n\t'mid'   => 'fa-file-audio-o',\n\t'midi'  => 'fa-file-audio-o',\n\t'mov'   => 'fa-file-movie-o',\n\t'mp3'   => 'fa-file-audio-o',\n\t'mp4'   => 'fa-file-movie-o',\n\t'msg'   => 'fa-envelope-o',\n\t'one'   => 'fa-file-o',\n\t'ogg'   => 'fa-file-movie-o',\n\t'patch' => 'fa-file-text-o',\n\t'pcx'   => 'fa-file-image-o',\n\t'pdf'   => 'fa-file-pdf-o',\n\t'png'   => 'fa-file-image-o',\n\t'pot'   => 'fa-file-word-o',\n\t'pps'   => 'fa-file-powerpoint-o',\n\t'ppt'   => 'fa-file-powerpoint-o',\n\t'pptx'  => 'fa-file-powerpoint-o',\n\t'pub'   => 'fa-file-o',\n\t'rar'   => 'fa-file-archive-o',\n\t'reg'   => 'fa-file',\n\t'rtf'   => 'fa-file-word-o',\n\t'tar'   => 'fa-file-archive-o',\n\t'tgz'   => 'fa-file-archive-o',\n\t'txt'   => 'fa-file-text-o',\n\t'uc2'   => 'fa-file-archive-o',\n\t'vsd'   => 'fa-file-o',\n\t'vsl'   => 'fa-file-o',\n\t'vss'   => 'fa-file-o',\n\t'vst'   => 'fa-file-o',\n\t'vsu'   => 'fa-file-o',\n\t'vsw'   => 'fa-file-o',\n\t'vsx'   => 'fa-file-o',\n\t'?'     => 'fa-file-o'\n);\n\n/**\n * Content Types overrides.\n *\n * Content types which will be overridden when downloading files.\n *\n * @global array $g_file_download_content_type_overrides\n */\n$g_file_download_content_type_overrides = array(\n\t'docx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n\t'dotx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\n\t'pptx' => 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n\t'ppsx' => 'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\n\t'potx' => 'application/vnd.openxmlformats-officedocument.presentationml.template',\n\t'xlsx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n\t'xltx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.template'\n);\n\n/**\n * Icon associative arrays.\n *\n * Status to icon mapping.\n *\n * @global array $g_status_icon_arr\n */\n$g_status_icon_arr = array(\n\tNONE      => '',\n\tLOW       => 'fa-chevron-down fa-lg green',\n\tNORMAL    => 'fa-minus fa-lg orange2',\n\tHIGH      => 'fa-chevron-up fa-lg red',\n\tURGENT    => 'fa-arrow-up fa-lg red',\n\tIMMEDIATE => 'fa-exclamation-triangle fa-lg red'\n);\n\n/**\n * Sort direction to icon mapping.\n *\n * @global array $g_sort_icon_arr\n */\n$g_sort_icon_arr = array(\n\tASCENDING  => 'fa-caret-up',\n\tDESCENDING => 'fa-caret-down'\n);\n\n####################\n# My View Settings #\n####################\n\n/**\n * Number of bugs shown in each box.\n *\n * @global int $g_my_view_bug_count\n */\n$g_my_view_bug_count = 10;\n\n/**\n * Boxes to be shown and their order.\n *\n * A box that is not to be shown can have its value set to 0.\n *\n * @global array $g_my_view_boxes\n */\n$g_my_view_boxes = array(\n\t'assigned'      => '1',\n\t'unassigned'    => '2',\n\t'reported'      => '3',\n\t'resolved'      => '4',\n\t'recent_mod'    => '5',\n\t'monitored'     => '6',\n\t'feedback'      => '0',\n\t'verify'        => '0',\n\t'my_comments'   => '0'\n);\n\n\n#############\n# RSS Feeds #\n#############\n\n/**\n * This flag enables or disables RSS syndication.\n *\n * When RSS syndication is not used, it is recommended to set it to OFF.\n *\n * @global int $g_rss_enabled\n */\n$g_rss_enabled = ON;\n\n\n#####################\n# Bug Relationships #\n#####################\n\n/**\n * Enable relationship graphs support.\n *\n * Show issue relationships and workflow transitions using graphs.\n *\n * In order to use this feature, you must first install GraphViz.\n * @see https://www.graphviz.org/ Graphviz homepage\n * @see $g_graphviz_path\n *\n * @global int $g_relationship_graph_enable\n */\n$g_relationship_graph_enable = OFF;\n\n/**\n * Complete path to the Graphviz tools.\n *\n * {@see https://graphviz.org/ Graphviz} must be installed on your server.\n * Mantis uses the following tools :\n * - Relationship graphs: dot, neato\n * - Workflow transitions graph: dot\n *\n * NOTES:\n * - Requires trailing `/`\n * - The webserver must have execute permission to these programs in order to\n *   generate the graphs.\n * - On Windows, the IIS user may require permissions to cmd.exe to be able\n *   to use PHP's {@see proc_open()}\n *\n * @global string $g_graphviz_path\n */\n$g_graphviz_path = '/usr/bin/';\n\n/**\n * Graphviz output format.\n *\n * Can be `svg`, `png` (default) or any other\n * {@link https://www.graphviz.org/docs/outputs/ supported format}.\n *\n * NOTE: svg produces higher quality images compared to png, but it requires\n * Graphviz >= 2.42.4 due to a\n * {@link https://gitlab.com/graphviz/graphviz/-/issues/1687 bug in earlier versions}.\n * The fix will be included in Ubuntu 26.04 LTS; the default can be reconsidered\n * when it is released.\n *\n * @global string $g_graph_format\n */\n$g_graph_format = 'png';\n\n/**\n * Font name and size, as required by Graphviz.\n *\n * If Graphviz fails to run for you, you are probably using a font name that\n * GD can't find. On Linux, try the name of the font file without the extension.\n *\n * @global string $g_relationship_graph_fontname\n */\n$g_relationship_graph_fontname = 'Arial';\n\n/**\n * Font Size for relationship graphs.\n *\n * @global int $g_relationship_graph_fontsize\n */\n$g_relationship_graph_fontsize = 8;\n\n/**\n * Default dependency orientation.\n *\n * For best viewing, if you mostly have issues with lots of children or parents,\n * leave as 'horizontal', otherwise, if you have lots of \"chained\" issue\n * dependencies, change to 'vertical'.\n *\n * @global string $g_relationship_graph_orientation\n */\n$g_relationship_graph_orientation = 'horizontal';\n\n/**\n * Max depth for relation graphs.\n *\n * This only affects relation graphs, dependency graphs are drawn to the full\n * depth. A value of 3 is already enough to show issues really unrelated to the\n * one you are currently viewing.\n *\n * @global int $g_relationship_graph_max_depth\n */\n$g_relationship_graph_max_depth = 2;\n\n/**\n * Define behavior when clicking an issue in a relationship graph.\n *\n * If set to ON, clicking on an issue on the relationship graph will open\n * the bug view page for that issue, otherwise, will navigate to the\n * relationship graph for that issue.\n *\n * @global int $g_relationship_graph_view_on_click\n */\n$g_relationship_graph_view_on_click = OFF;\n\n/**\n * Number of years in the past that custom date fields will display in\n * drop down boxes.\n *\n * @global int $g_backward_year_count\n */\n$g_backward_year_count = 4;\n\n/**\n * Number of years in the future that custom date fields will display in\n * drop down boxes.\n *\n * @global int $g_forward_year_count\n */\n$g_forward_year_count = 4;\n\n/**\n * Custom Group Actions.\n *\n * This extensibility model allows developing new group custom actions.  This\n * can be implemented with a totally custom form and action pages or with a\n * pre-implemented form and action page and call-outs to some functions.  These\n * functions are to be implemented in a predefined file whose name is based on\n * the action name. For example, for an action to add a note, the action would\n * be EXT_ADD_NOTE and the file implementing it would be\n * bug_actiongroup_add_note_inc.php. See implementation of this file for\n * details.\n *\n * Sample:\n *\n * array(\n *\tarray(\n *\t\t'action' => 'my_custom_action',\n *\t\t'label' => 'my_label',   # string to be passed to lang_get_defaulted()\n *\t\t'form_page' => 'my_custom_action_page.php',\n *\t\t'action_page' => 'my_custom_action.php'\n *\t)\n *\tarray(\n *\t\t'action' => 'my_custom_action2',\n *\t\t'form_page' => 'my_custom_action2_page.php',\n *\t\t'action_page' => 'my_custom_action2.php'\n *\t)\n *\tarray(\n *\t\t'action' => 'EXT_ADD_NOTE',  # you need to implement bug_actiongroup_<action_without_'EXT_')_inc.php\n *\t\t'label' => 'actiongroup_menu_add_note' # see strings_english.txt for this label\n *\t)\n * );\n *\n * @global array $g_custom_group_actions\n */\n$g_custom_group_actions = array();\n\n####################\n# Wiki Integration #\n####################\n\n/**\n * Wiki Integration Enabled.\n *\n * @global int $g_wiki_enable\n */\n$g_wiki_enable = OFF;\n\n/**\n * Wiki Engine.\n *\n * Supported engines: 'dokuwiki', 'mediawiki', 'twiki', 'wackowiki', 'wikka', 'xwiki'.\n *\n * @global string $g_wiki_engine\n */\n$g_wiki_engine = '';\n\n/**\n * Wiki namespace.\n *\n * The namespace to be used as root for all pages relating to this MantisBT\n * installation.\n *\n * @global string $g_wiki_root_namespace\n */\n$g_wiki_root_namespace = 'mantis';\n\n/**\n * URL under which the wiki engine is hosted.\n *\n * Must be on the same server as MantisBT, requires trailing '/'.\n *\n * By default, this is derived from the global MantisBT path ($g_path),\n * replacing the URL's path component by the wiki engine string (i.e. if\n * $g_path = 'http://example.com/mantis/' and $g_wiki_engine = 'dokuwiki',\n * the wiki URL will be 'http://example.com/dokuwiki/')\n *\n * @global string $g_wiki_engine_url\n */\n$g_wiki_engine_url = '';\n\n####################\n# Recently Visited #\n####################\n\n/**\n * This controls whether to show the most recently visited issues by the current user or not.\n *\n * If set to 0, this feature is disabled. Otherwise it is the maximum number of issues to\n * keep in the recently visited list.\n *\n * @global int $g_recently_visited_count\n */\n$g_recently_visited_count = 5;\n\n###############\n# Bug Tagging #\n###############\n\n/**\n * String that will separate tags as entered for input.\n *\n * @global int $g_tag_separator\n */\n$g_tag_separator = ',';\n\n/**\n * Access level required to view tags attached to a bug.\n *\n * @global int $g_tag_view_threshold\n */\n$g_tag_view_threshold = VIEWER;\n\n/**\n * Access level required to attach tags to a bug.\n *\n * @global int $g_tag_attach_threshold\n */\n$g_tag_attach_threshold = REPORTER;\n\n/**\n * Access level required to detach tags from a bug\n * @global int $g_tag_detach_threshold\n */\n$g_tag_detach_threshold = DEVELOPER;\n\n/**\n * Access level required to detach tags attached by the same user.\n *\n * @global int $g_tag_detach_own_threshold\n */\n$g_tag_detach_own_threshold = REPORTER;\n\n/**\n * Access level required to create new tags.\n *\n * @global int $g_tag_create_threshold\n */\n$g_tag_create_threshold = REPORTER;\n\n/**\n * Access level required to edit tag names and descriptions.\n *\n * @global int $g_tag_edit_threshold\n */\n$g_tag_edit_threshold = DEVELOPER;\n\n/**\n * Access level required to edit descriptions by the creating user.\n *\n * @global int $g_tag_edit_own_threshold\n */\n$g_tag_edit_own_threshold = REPORTER;\n\n#################\n# Time tracking #\n#################\n\n/**\n * Turn on Time Tracking accounting.\n *\n * @global int $g_time_tracking_enabled\n */\n$g_time_tracking_enabled = OFF;\n\n/**\n * A billing sums.\n *\n * @global int $g_time_tracking_with_billing\n */\n$g_time_tracking_with_billing = OFF;\n\n/**\n * Stop watch to build time tracking field.\n *\n * @global int $g_time_tracking_stopwatch\n */\n$g_time_tracking_stopwatch = OFF;\n\n/**\n * Access level required to view time tracking information.\n *\n * @global int $g_time_tracking_view_threshold\n */\n$g_time_tracking_view_threshold = DEVELOPER;\n\n/**\n * Access level required to add/edit time tracking information.\n *\n * @global int $g_time_tracking_edit_threshold\n */\n$g_time_tracking_edit_threshold = DEVELOPER;\n\n/**\n * Access level required to run reports.\n *\n * @global int $g_time_tracking_reporting_threshold\n */\n$g_time_tracking_reporting_threshold = MANAGER;\n\n/**\n * Allow time tracking to be recorded without a bugnote.\n *\n * @global int $g_time_tracking_without_note\n */\n$g_time_tracking_without_note = ON;\n\n/**\n * Default billing rate per hour.\n *\n * @global int $g_time_tracking_billing_rate\n */\n$g_time_tracking_billing_rate = 0;\n\n############################\n# Profile Related Settings #\n############################\n\n/**\n * Enable Profiles.\n *\n * @global int $g_enable_profiles\n */\n$g_enable_profiles = ON;\n\n/**\n * Add profile threshold.\n *\n * @global int $g_add_profile_threshold\n */\n$g_add_profile_threshold = REPORTER;\n\n/**\n * Threshold needed to be able to create and modify global profiles.\n *\n * @global int $g_manage_global_profile_threshold\n */\n$g_manage_global_profile_threshold = MANAGER;\n\n/**\n * Allows the users to enter free text when reporting/updating issues.\n *\n * For the profile related fields (i.e. platform, os, os build)\n *\n * @global int $g_allow_freetext_in_profile_fields\n */\n$g_allow_freetext_in_profile_fields = ON;\n\n#################\n# Plugin System #\n#################\n\n/**\n * Enable/disable plugins.\n *\n * @global int $g_plugins_enabled\n */\n$g_plugins_enabled = ON;\n\n/**\n * Absolute path to plugin files.\n *\n * @global string $g_plugin_path\n */\n$g_plugin_path = $g_absolute_path . 'plugins' . DIRECTORY_SEPARATOR;\n\n/**\n * Threshold needed to manage plugins.\n *\n * @global int $g_manage_plugin_threshold\n */\n$g_manage_plugin_threshold = ADMINISTRATOR;\n\n/**\n * A mapping of file extensions to mime types, used when serving resources from plugins.\n *\n *\n * @global array $g_plugin_mime_types\n */\n$g_plugin_mime_types = array(\n\t'css' => 'text/css',\n\t'js'  => 'application/javascript',\n\t'gif' => 'image/gif',\n\t'png' => 'image/png',\n\t'jpg' => 'image/jpeg',\n\t'jpeg' => 'image/jpeg',\n\t'svg' => 'image/svg+xml',\n\t'webp' => 'image/webp'\n);\n\n/**\n * Force installation and protection of certain plugins.\n *\n * Note that this is not the preferred method of installing plugins,\n * which should generally be done directly through the plugin management\n * interface.  However, this method will prevent users with admin access\n * from uninstalling plugins through the plugin management interface.\n *\n * Entries in the array must be in the form of a key/value pair\n * consisting of the plugin basename and priority, as such:\n *\n * = array(\n *     'PluginA' => 5,\n *     'PluginB' => 5,\n *     ...\n *\n * @global $g_plugins_force_installed\n */\n$g_plugins_force_installed = array();\n\n############\n# Due Date #\n############\n\n/**\n * Threshold to update due date submitted.\n *\n * @global int $g_due_date_update_threshold\n */\n$g_due_date_update_threshold = NOBODY;\n\n/**\n * Threshold to see due date.\n *\n * @global int $g_due_date_view_threshold\n */\n$g_due_date_view_threshold = NOBODY;\n\n/**\n * Default due date value for newly submitted issues.\n *\n * A valid relative date format {@link https://php.net/manual/en/datetime.formats.relative.php}\n * e.g. 'today' or '+2 days', or empty string for no due date set (default).\n *\n * @global string $g_due_date_default\n */\n$g_due_date_default = '';\n\n/**\n * Due date warning levels.\n *\n * A variable number of Levels (defined as a number of seconds going backwards\n * from the current timestamp, compared to an issue's due date) can be defined.\n * Levels must be defined in ascending order.\n *\n * - The first entry (array key 0) defines \"Overdue\". Normally and by default,\n *   its value is `0` meaning that issues will be marked overdue as soon as\n *   their due date has passed. However, it is also possible to set it to a\n *   higher value to flag overdue issues earlier, or even use a negative value\n *   to allow a \"grace period\" after due date.\n * - Array keys 1 and 2 offer two levels of \"Due soon\": orange and green.\n *   By default, only the first one is set, to 7 days.\n *\n * Out of the box, MantisBT allows for 3 warning levels. Additional ones may\n * be defined, but in that case new `due-N` CSS rules (where N is the\n * array's index) must be created otherwise the extra levels will not be\n * highlighted in the UI.\n *\n * @global  array $g_due_date_warning_levels\n */\n$g_due_date_warning_levels = array(\n\t0,\n\t7 * SECONDS_PER_DAY,\n);\n\n################\n# Sub-projects #\n################\n\n/**\n * Whether sub-projects feature should be enabled.\n *\n * Before turning this flag OFF, make sure all sub-projects are moved to\n * top-level projects, otherwise they won't be accessible anymore.\n *\n * @global int $g_subprojects_enabled\n */\n$g_subprojects_enabled = ON;\n\n/**\n * Sub-projects should inherit categories from parent projects.\n *\n * @global int $g_subprojects_inherit_categories\n */\n$g_subprojects_inherit_categories = ON;\n\n/**\n * Sub-projects should inherit versions from parent projects.\n *\n * @global int $g_subprojects_inherit_versions\n */\n$g_subprojects_inherit_versions = ON;\n\n#########################################\n# System Logging and Debugging Settings #\n#########################################\n\n/**\n * Time page loads.\n *\n * The page execution timer shows at the bottom of each page.\n *\n * @global int $g_show_timer\n */\n$g_show_timer = OFF;\n\n/**\n * Show memory usage for each page load in the footer.\n *\n * @global int $g_show_memory_usage\n */\n$g_show_memory_usage = OFF;\n\n/**\n * Email address to use for debugging purposes.\n *\n * This option is used for debugging problems with the email features in mantis,\n * and can be set to a valid email address.\n *\n * This is blank by default, meaning that email notifications are sent to their\n * intended recipients (normal system behavior).\n *\n * If set, emails will only be sent to the specified address instead, and the\n * original recipients (To, Cc and Bcc) will be included in the message body.\n *\n * @global string $g_debug_email\n */\n$g_debug_email = '';\n\n/**\n * Shows the total number/unique number of queries executed to serve the page.\n *\n * @global int $g_show_queries_count\n */\n$g_show_queries_count = OFF;\n\n/**\n * Errors Display method.\n *\n * Defines what {@link http://php.net/errorfunc.constants errors}\n * are displayed and how. Available options are:\n * - DISPLAY_ERROR_HALT    Stop and display error message (including\n *                         variables and backtrace if\n *                         {@see $g_show_detailed_errors} is ON).\n * - DISPLAY_ERROR_INLINE  Display a one line error and continue execution.\n * - DISPLAY_ERROR_NONE    Suppress the error (no display). This is the default\n *                         behavior for unspecified errors constants.\n *\n * The default settings are recommended for use in Production, and will only\n * display MantisBT fatal errors, suppressing output of all other error types.\n *\n * Recommended config_inc.php settings for developers (these are automatically\n * set if the server is localhost):\n * $g_display_errors = array(\n *     E_WARNING           => DISPLAY_ERROR_HALT,\n *     E_ALL               => DISPLAY_ERROR_INLINE,\n * );\n *\n * NOTE: E_USER_ERROR, E_RECOVERABLE_ERROR and E_ERROR will always be set\n * to DISPLAY_ERROR_HALT internally, regardless of the configured value.\n *\n * @global array $g_display_errors\n */\n$g_display_errors = array();\n\n# Add developers defaults when server is localhost\n# Note: intentionally not using SERVER_ADDR as it's not guaranteed to exist\nif( isset( $_SERVER['SERVER_NAME'] ) &&\n\t( strcasecmp( $_SERVER['SERVER_NAME'], 'localhost' ) == 0 ||\n\t  $_SERVER['SERVER_NAME'] == '127.0.0.1' )\n) {\n\t$g_display_errors[E_WARNING] = DISPLAY_ERROR_HALT;\n\t$g_display_errors[E_ALL] = DISPLAY_ERROR_INLINE;\n}\n\n/**\n * Detailed error messages.\n *\n * Shows a list of variables and their values, as well as an execution stack\n * trace whenever a fatal error is triggered.\n *\n * Only applies to error types configured to DISPLAY_ERROR_HALT in\n * {@see $g_display_errors}.\n *\n * WARNING: Setting this to ON is a potential security hazard, as it can expose\n * sensitive system information. Only enable it when needed for debugging purposes.\n *\n * @global int $g_show_detailed_errors\n */\n$g_show_detailed_errors = OFF;\n\n/**\n * Prevent page redirections when non-fatal errors occur.\n *\n * If this option is turned OFF (default) page redirects will function normally,\n * preventing display of non-fatal error messages.\n *\n * It should only be set to ON during development or for debugging purposes.\n * This will prevent page redirections, allowing you to see the errors.\n *\n * NOTE: Non-fatal errors are those configured as DISPLAY_ERROR_INLINE in\n * {@see $g_display_errors}.\n *\n * @global int $g_stop_on_errors\n */\n$g_stop_on_errors = OFF;\n\n/**\n * System logging.\n *\n * This controls the type of logging information recorded.\n * The available log channels are:\n *\n * LOG_NONE, LOG_EMAIL, LOG_EMAIL_RECIPIENT, LOG_EMAIL_VERBOSE, LOG_FILTERING,\n * LOG_AJAX, LOG_LDAP, LOG_DATABASE, LOG_WEBSERVICE, LOG_PLUGIN, LOG_ALL\n *\n * and can be combined using\n * {@link http://php.net/language.operators.bitwise PHP bitwise operators}\n * Refer to {@see $g_log_destination} for details on where to save the logs.\n *\n * @global int $g_log_level\n */\n$g_log_level = LOG_NONE;\n\n/**\n * Specifies where the log data goes.\n *\n * The following five options are available:\n * - '':        The empty string means {@link http://php.net/error_log\n *              default PHP error log settings}\n * - 'none':    Don't output the logs, but would still trigger EVENT_LOG\n *              plugin event.\n * - 'file':    Log to a specific file, specified as an absolute path, e.g.\n *              'file:/var/log/mantis.log' (Unix) or\n *              'file:c:/temp/mantisbt.log' (Windows)\n * - 'page':    Display log output at bottom of the page. See also\n *              {@link $g_show_log_threshold} to restrict who can see log data.\n *\n * @global string $g_log_destination\n */\n$g_log_destination = '';\n\n/**\n * Indicates the access level required for a user to see the log output.\n *\n\t * This is only used when {@see $g_log_destination} is 'page'.\n *\n * Note that this threshold is compared against the user's global access level,\n * rather than the one from the currently active project.\n *\n * @global int $g_show_log_threshold\n */\n$g_show_log_threshold = ADMINISTRATOR;\n\n##########################\n# Configuration Settings #\n##########################\n\n/**\n * The following list of variables should never be in the database.\n *\n * It is used to bypass the database lookup and look in this or the\n * config_inc.php files for appropriate global settings.\n *\n * @global array $g_global_settings\n */\n$g_global_settings = array(\n\t'absolute_path',\n\t'absolute_path_default_upload_folder',\n\t'admin_checks',\n\t'allow_anonymous_login',\n\t'allow_browser_cache',\n\t'allow_permanent_cookie',\n\t'allow_signup',\n\t'anonymous_account',\n\t'bottom_include_page',\n\t'bug_list_cookie',\n\t'cdn_enabled',\n\t'class_path',\n\t'collapse_settings_cookie',\n\t'compress_html',\n\t'cookie_domain',\n\t'cookie_path',\n\t'cookie_prefix',\n\t'cookie_samesite',\n\t'cookie_time_length',\n\t'copyright_statement',\n\t'core_path',\n\t'crypto_master_salt',\n\t'css_include_file',\n\t'css_rtl_include_file',\n\t'custom_headers',\n\t'database_name',\n\t'db_password',\n\t'db_table_prefix',\n\t'db_table_suffix',\n\t'db_type',\n\t'db_username',\n\t'debug_email',\n\t'default_home_page',\n\t'default_language',\n\t'display_errors',\n\t'email_dkim_domain',\n\t'email_dkim_enable',\n\t'email_dkim_identity',\n\t'email_dkim_passphrase',\n\t'email_dkim_private_key_file_path',\n\t'email_dkim_private_key_string',\n\t'email_dkim_selector',\n\t'email_ensure_unique',\n\t'email_login_enabled',\n\t'email_retry_in_days',\n\t'email_smime_cert_file',\n\t'email_smime_enable',\n\t'email_smime_extracerts_file',\n\t'email_smime_key_file',\n\t'email_smime_key_password',\n\t'fallback_language',\n\t'favicon_image',\n\t'file_type_icons',\n\t'fileinfo_magic_db_file',\n\t'form_security_validation',\n\t'global_settings',\n\t'graphviz_path',\n\t'hostname',\n\t'html_valid_tags',\n\t'html_valid_tags_single_line',\n\t'impersonate_user_threshold',\n\t'language_auto_map',\n\t'language_path',\n\t'ldap_bind_dn',\n\t'ldap_bind_passwd',\n\t'ldap_email_field',\n\t'ldap_follow_referrals',\n\t'ldap_network_timeout',\n\t'ldap_organization',\n\t'ldap_protocol_version',\n\t'ldap_realname_field',\n\t'ldap_root_dn',\n\t'ldap_server',\n\t'ldap_simulation_file_path',\n\t'ldap_tls_protocol_min',\n\t'ldap_uid_field',\n\t'ldap_use_starttls',\n\t'library_path',\n\t'log_destination',\n\t'log_level',\n\t'login_method',\n\t'logo_image',\n\t'logo_url',\n\t'logout_cookie',\n\t'logout_redirect_page',\n\t'long_process_timeout',\n\t'manage_config_cookie',\n\t'manual_url',\n\t'path',\n\t'plugin_path',\n\t'plugins_enabled',\n\t'project_cookie',\n\t'public_config_names',\n\t'session_save_path',\n\t'session_validation',\n\t'short_path',\n\t'show_detailed_errors',\n\t'show_memory_usage',\n\t'show_queries_count',\n\t'show_timer',\n\t'show_version',\n\t'stop_on_errors',\n\t'string_cookie',\n\t'subprojects_enabled',\n\t'top_include_page',\n\t'use_ldap_email',\n\t'use_ldap_realname',\n\t'validate_email',\n\t'version_suffix',\n\t'view_all_cookie',\n\t'webmaster_email',\n\t'wiki_enable',\n\t'wiki_engine',\n\t'wiki_engine_url',\n\t'wiki_root_namespace',\n);\n\n/**\n * List of config options available via SOAP API.\n *\n * The following list of configuration options is used to check if it is\n * allowed to query a specific configuration option via SOAP API.\n *\n * @global array $g_public_config_names\n */\n$g_public_config_names = array(\n\t'access_levels_enum_string',\n\t'action_button_position',\n\t'add_bugnote_threshold',\n\t'add_profile_threshold',\n\t'admin_site_threshold',\n\t'allow_account_delete',\n\t'allow_anonymous_login',\n\t'allow_blank_email',\n\t'allow_delete_own_attachments',\n\t'allow_download_own_attachments',\n\t'allow_file_upload',\n\t'allow_freetext_in_profile_fields',\n\t'allow_no_category',\n\t'allow_parent_of_unresolved_to_close',\n\t'allow_permanent_cookie',\n\t'allow_reporter_close',\n\t'allow_reporter_reopen',\n\t'allow_reporter_upload',\n\t'allow_signup',\n\t'allowed_files',\n\t'anonymous_account',\n\t'antispam_max_event_count',\n\t'antispam_time_window_in_seconds',\n\t'assign_sponsored_bugs_threshold',\n\t'attachments_to_new_tab',\n\t'auto_set_status_to_assigned',\n\t'backward_year_count',\n\t'bottom_include_page',\n\t'bug_assigned_status',\n\t'bug_closed_status_threshold',\n\t'bug_count_hyperlink_prefix',\n\t'bug_duplicate_resolution',\n\t'bug_feedback_status',\n\t'bug_link_tag',\n\t'bug_list_cookie',\n\t'bug_readonly_status_threshold',\n\t'bug_reminder_threshold',\n\t'bug_reopen_resolution',\n\t'bug_reopen_status',\n\t'bug_report_page_fields',\n\t'bug_resolution_fixed_threshold',\n\t'bug_resolution_not_fixed_threshold',\n\t'bug_resolved_status_threshold',\n\t'bug_revision_drop_threshold',\n\t'bug_revision_view_threshold',\n\t'bug_submit_status',\n\t'bug_update_page_fields',\n\t'bug_view_page_fields',\n\t'bugnote_link_tag',\n\t'bugnote_order',\n\t'bugnote_user_change_view_state_threshold',\n\t'bugnote_user_delete_threshold',\n\t'bugnote_user_edit_threshold',\n\t'cdn_enabled',\n\t'change_view_status_threshold',\n\t'check_mx_record',\n\t'collapse_settings_cookie',\n\t'complete_date_format',\n\t'compress_html',\n\t'cookie_prefix',\n\t'cookie_time_length',\n\t'copyright_statement',\n\t'create_permalink_threshold',\n\t'create_project_threshold',\n\t'create_short_url',\n\t'css_include_file',\n\t'css_rtl_include_file',\n\t'csv_columns',\n\t'csv_separator',\n\t'custom_field_edit_after_create',\n\t'custom_field_link_threshold',\n\t'custom_field_type_enum_string',\n\t'custom_group_actions',\n\t'custom_headers',\n\t'date_partitions',\n\t'datetime_picker_format',\n\t'default_bug_additional_info',\n\t'default_bug_description',\n\t'default_bug_eta',\n\t'default_bug_priority',\n\t'default_bug_projection',\n\t'default_bug_relationship_clone',\n\t'default_bug_relationship',\n\t'default_bug_reproducibility',\n\t'default_bug_resolution',\n\t'default_bug_severity',\n\t'default_bug_steps_to_reproduce',\n\t'default_bug_view_status',\n\t'default_bugnote_order',\n\t'default_bugnote_view_status',\n\t'default_category_for_moves',\n\t'default_email_bugnote_limit',\n\t'default_email_on_assigned_minimum_severity',\n\t'default_email_on_assigned',\n\t'default_email_on_bugnote_minimum_severity',\n\t'default_email_on_bugnote',\n\t'default_email_on_closed_minimum_severity',\n\t'default_email_on_closed',\n\t'default_email_on_feedback_minimum_severity',\n\t'default_email_on_feedback',\n\t'default_email_on_new_minimum_severity',\n\t'default_email_on_new',\n\t'default_email_on_priority_minimum_severity',\n\t'default_email_on_priority',\n\t'default_email_on_reopened_minimum_severity',\n\t'default_email_on_reopened',\n\t'default_email_on_resolved_minimum_severity',\n\t'default_email_on_resolved',\n\t'default_email_on_status_minimum_severity',\n\t'default_email_on_status',\n\t'default_home_page',\n\t'default_language',\n\t'default_limit_view',\n\t'default_manage_tag_prefix',\n\t'default_new_account_access_level',\n\t'default_notify_flags',\n\t'default_project_view_status',\n\t'default_redirect_delay',\n\t'default_refresh_delay',\n\t'default_reminder_view_status',\n\t'default_show_changed',\n\t'default_timezone',\n\t'delete_bug_threshold',\n\t'delete_bugnote_threshold',\n\t'delete_project_threshold',\n\t'disallowed_files',\n\t'display_bug_padding',\n\t'display_bugnote_padding',\n\t'display_errors',\n\t'download_attachments_threshold',\n\t'due_date_default',\n\t'due_date_update_threshold',\n\t'due_date_view_threshold',\n\t'due_date_warning_levels',\n\t'email_ensure_unique',\n\t'email_dkim_domain',\n\t'email_dkim_enable',\n\t'email_dkim_identity',\n\t'email_dkim_selector',\n\t'email_login_enabled',\n\t'email_notifications_verbose',\n\t'email_padding_length',\n\t'email_receive_own',\n\t'email_separator1',\n\t'email_separator2',\n\t'enable_email_notification',\n\t'enable_eta',\n\t'enable_product_build',\n\t'enable_profiles',\n\t'enable_project_documentation',\n\t'enable_projection',\n\t'enable_sponsorship',\n\t'eta_enum_string',\n\t'excel_columns',\n\t'export_issues_threshold',\n\t'fallback_language',\n\t'favicon_image',\n\t'file_download_content_type_overrides',\n\t'file_type_icons',\n\t'file_upload_max_num',\n\t'filter_by_custom_fields',\n\t'filter_custom_fields_per_row',\n\t'filter_position',\n\t'font_family',\n\t'font_family_choices',\n\t'font_family_choices_local',\n\t'forward_year_count',\n\t'from_email',\n\t'from_name',\n\t'handle_bug_threshold',\n\t'handle_sponsored_bugs_threshold',\n\t'hide_status_default',\n\t'history_default_visible',\n\t'history_order',\n\t'html_make_links',\n\t'html_valid_tags_single_line',\n\t'html_valid_tags',\n\t'impersonate_user_threshold',\n\t'issue_activity_note_attachments_seconds_threshold',\n\t'language_auto_map',\n\t'language_choices_arr',\n\t'limit_email_domains',\n\t'limit_reporters',\n\t'limit_view_unless_threshold',\n\t'logo_image',\n\t'logo_url',\n\t'logout_cookie',\n\t'logout_redirect_page',\n\t'long_process_timeout',\n\t'lost_password_feature',\n\t'main_menu_custom_options',\n\t'manage_config_cookie',\n\t'manage_configuration_threshold',\n\t'manage_custom_fields_threshold',\n\t'manage_global_profile_threshold',\n\t'manage_news_threshold',\n\t'manage_plugin_threshold',\n\t'manage_project_threshold',\n\t'manage_site_threshold',\n\t'manage_user_threshold',\n\t'manage_users_cookie',\n\t'max_dropdown_length',\n\t'max_failed_login_count',\n\t'max_file_size',\n\t'max_lost_password_in_progress_count',\n\t'mentions_enabled',\n\t'mentions_tag',\n\t'min_refresh_delay',\n\t'minimum_sponsorship_amount',\n\t'monitor_add_others_bug_threshold',\n\t'monitor_bug_threshold',\n\t'monitor_delete_others_bug_threshold',\n\t'move_bug_threshold',\n\t'my_view_boxes',\n\t'my_view_bug_count',\n\t'news_enabled',\n\t'news_limit_method',\n\t'news_view_limit_days',\n\t'news_view_limit',\n\t'normal_date_format',\n\t'notify_flags',\n\t'notify_new_user_created_threshold_min',\n\t'plugin_mime_types',\n\t'plugins_enabled',\n\t'plugins_force_installed',\n\t'preview_attachments_inline_max_size',\n\t'preview_image_extensions',\n\t'preview_max_height',\n\t'preview_max_width',\n\t'preview_text_extensions',\n\t'print_issues_page_columns',\n\t'print_reports_threshold',\n\t'priority_enum_string',\n\t'priority_significant_threshold',\n\t'private_bug_threshold',\n\t'private_bugnote_threshold',\n\t'private_news_threshold',\n\t'private_project_threshold',\n\t'project_cookie',\n\t'project_status_enum_string',\n\t'project_user_threshold',\n\t'project_view_state_enum_string',\n\t'projection_enum_string',\n\t'reassign_on_feedback',\n\t'reauthentication_expiry',\n\t'reauthentication',\n\t'recently_visited_count',\n\t'relationship_graph_enable',\n\t'relationship_graph_fontname',\n\t'relationship_graph_fontsize',\n\t'relationship_graph_max_depth',\n\t'relationship_graph_orientation',\n\t'relationship_graph_view_on_click',\n\t'reminder_receive_threshold',\n\t'reminder_recipients_monitor_bug',\n\t'reopen_bug_threshold',\n\t'report_bug_threshold',\n\t'report_issues_for_unreleased_versions_threshold',\n\t'reporter_summary_limit',\n\t'reproducibility_enum_string',\n\t'resolution_enum_string',\n\t'resolution_multipliers',\n\t'return_path_email',\n\t'roadmap_update_threshold',\n\t'roadmap_view_threshold',\n\t'rss_enabled',\n\t'search_title',\n\t'set_bug_sticky_threshold',\n\t'set_configuration_threshold',\n\t'set_status_threshold',\n\t'set_view_status_threshold',\n\t'severity_enum_string',\n\t'severity_multipliers',\n\t'severity_significant_threshold',\n\t'short_date_format',\n\t'show_assigned_names',\n\t'show_avatar_threshold',\n\t'show_avatar',\n\t'show_bug_project_links',\n\t'show_changelog_dates',\n\t'show_detailed_errors',\n\t'show_log_threshold',\n\t'show_memory_usage',\n\t'show_monitor_list_threshold',\n\t'show_priority_text',\n\t'show_product_version',\n\t'show_project_menu_bar',\n\t'show_queries_count',\n\t'show_realname',\n\t'show_roadmap_dates',\n\t'show_sticky_issues',\n\t'show_timer',\n\t'show_user_email_threshold',\n\t'show_user_realname_threshold',\n\t'show_version_dates_threshold',\n\t'show_version',\n\t'signup_use_captcha',\n\t'sort_by_last_name',\n\t'sort_icon_arr',\n\t'sponsor_threshold',\n\t'sponsorship_currency',\n\t'sponsorship_enum_string',\n\t'status_colors',\n\t'status_enum_string',\n\t'status_enum_workflow',\n\t'status_icon_arr',\n\t'stop_on_errors',\n\t'store_reminders',\n\t'stored_query_create_shared_threshold',\n\t'stored_query_create_threshold',\n\t'stored_query_use_threshold',\n\t'string_cookie',\n\t'subprojects_enabled',\n\t'subprojects_inherit_categories',\n\t'subprojects_inherit_versions',\n\t'summary_category_include_project',\n\t'tag_attach_threshold',\n\t'tag_create_threshold',\n\t'tag_detach_own_threshold',\n\t'tag_detach_threshold',\n\t'tag_edit_own_threshold',\n\t'tag_edit_threshold',\n\t'tag_separator',\n\t'tag_view_threshold',\n\t'time_tracking_billing_rate',\n\t'time_tracking_edit_threshold',\n\t'time_tracking_enabled',\n\t'time_tracking_reporting_threshold',\n\t'time_tracking_stopwatch',\n\t'time_tracking_view_threshold',\n\t'time_tracking_with_billing',\n\t'time_tracking_without_note',\n\t'timeline_view_threshold',\n\t'top_include_page',\n\t'update_bug_assign_threshold',\n\t'update_bug_status_threshold',\n\t'update_bug_threshold',\n\t'update_bugnote_threshold',\n\t'update_readonly_bug_threshold',\n\t'upload_bug_file_threshold',\n\t'upload_project_file_threshold',\n\t'use_dynamic_filters',\n\t'user_login_valid_regex',\n\t'validate_email',\n\t'version_suffix',\n\t'view_all_cookie',\n\t'view_attachments_threshold',\n\t'view_bug_threshold',\n\t'view_changelog_threshold',\n\t'view_configuration_threshold',\n\t'view_filters',\n\t'view_handler_threshold',\n\t'view_history_threshold',\n\t'view_issues_page_columns',\n\t'view_proj_doc_threshold',\n\t'view_sponsorship_details_threshold',\n\t'view_sponsorship_total_threshold',\n\t'view_state_enum_string',\n\t'view_summary_threshold',\n\t'webmaster_email',\n\t'webservice_admin_access_level_threshold',\n\t'webservice_error_when_version_not_found',\n\t'webservice_eta_enum_default_when_not_found',\n\t'webservice_priority_enum_default_when_not_found',\n\t'webservice_projection_enum_default_when_not_found',\n\t'webservice_readonly_access_level_threshold',\n\t'webservice_readwrite_access_level_threshold',\n\t'webservice_resolution_enum_default_when_not_found',\n\t'webservice_rest_enabled',\n\t'webservice_severity_enum_default_when_not_found',\n\t'webservice_specify_reporter_on_add_access_level_threshold',\n\t'webservice_status_enum_default_when_not_found',\n\t'webservice_version_when_not_found',\n\t'wiki_enable',\n\t'wiki_engine_url',\n\t'wiki_engine',\n\t'wiki_root_namespace',\n\t'window_title',\n\t'wrap_in_preformatted_text'\n);\n\n############################\n# Webservice Configuration #\n############################\n\n/**\n * Whether the REST API is enabled or not.\n *\n * Note that this flag only impacts API Token based auth.  Hence, even if the\n * API is disabled, it can still be used from the Web UI using cookie based\n * authentication.\n *\n * @global int $g_webservice_rest_enabled\n */\n$g_webservice_rest_enabled = ON;\n\n/**\n * Minimum global access level required to access webservice for readonly operations.\n *\n * @global int $g_webservice_readonly_access_level_threshold\n */\n$g_webservice_readonly_access_level_threshold = VIEWER;\n\n/**\n * Minimum global access level required to access webservice for read/write operations.\n *\n * @global int $g_webservice_readwrite_access_level_threshold\n */\n$g_webservice_readwrite_access_level_threshold = REPORTER;\n\n/**\n * Minimum global access level required to access the administrator webservices.\n *\n * @global int $g_webservice_admin_access_level_threshold\n */\n$g_webservice_admin_access_level_threshold = MANAGER;\n\n/**\n * Minimum project access level required to be able to specify a reporter name when\n * adding an issue.\n *\n * Otherwise, the current user is used as the reporter.  Users who don't have\n * this access level can always do another step to modify the issue and specify\n * a different name, but in this case it will be logged in the history who\n * originally reported the issue.\n *\n * @global int $g_webservice_specify_reporter_on_add_access_level_threshold\n */\n$g_webservice_specify_reporter_on_add_access_level_threshold = DEVELOPER;\n\n/**\n * The following enum id is used when the webservices get enum labels that are not\n * defined in the associated MantisBT installation.\n *\n * In this case, the enum id is set to the value specified by the corresponding\n * configuration option.\n *\n * @global int $g_webservice_priority_enum_default_when_not_found\n */\n$g_webservice_priority_enum_default_when_not_found = 0;\n\n/**\n * The following enum id is used when the webservices get enum labels that are not\n * defined in the associated MantisBT installation.\n *\n * In this case, the enum id is set to the value specified by the corresponding\n * configuration option.\n *\n * @global int $g_webservice_severity_enum_default_when_not_found\n */\n$g_webservice_severity_enum_default_when_not_found = 0;\n\n/**\n * The following enum id is used when the webservices get enum labels that are not\n * defined in the associated MantisBT installation.\n *\n * In this case, the enum id is set to the value specified by the corresponding\n * configuration option.\n *\n * @global int $g_webservice_status_enum_default_when_not_found\n */\n$g_webservice_status_enum_default_when_not_found = 0;\n\n/**\n * The following enum id is used when the webservices get enum labels that are not\n * defined in the associated MantisBT installation.\n *\n * In this case, the enum id is set to the value specified by the corresponding\n * configuration option.\n *\n * @global int $g_webservice_resolution_enum_default_when_not_found\n */\n$g_webservice_resolution_enum_default_when_not_found = 0;\n\n/**\n * The following enum id is used when the webservices get enum labels that are not\n * defined in the associated MantisBT installation.\n *\n * In this case, the enum id is set to the value specified by the corresponding\n * configuration option.\n *\n * @global int $g_webservice_projection_enum_default_when_not_found\n */\n$g_webservice_projection_enum_default_when_not_found = 0;\n\n/**\n * The following enum id is used when the webservices get enum labels that are not\n * defined in the associated MantisBT installation.\n *\n * In this case, the enum id is set to the value specified by the corresponding\n * configuration option.\n *\n * @global int $g_webservice_eta_enum_default_when_not_found\n */\n$g_webservice_eta_enum_default_when_not_found = 0;\n\n/**\n * If ON and the supplied version is not found, then a SoapException will be raised.\n *\n * @global int $g_webservice_error_when_version_not_found\n */\n$g_webservice_error_when_version_not_found = ON;\n\n/**\n * Default version to be used if the specified version is not found and\n * $g_webservice_error_when_version_not_found == OFF.\n * (at the moment this value does not depend on the project).\n *\n * @global string $g_webservice_version_when_not_found\n */\n$g_webservice_version_when_not_found = '';\n\n####################\n# Issue Activities #\n####################\n\n/**\n * Combine activities that were submitted together in one entry.\n *\n * If a user submits a note with an attachment (within the specified # of seconds)\n * the attachment is linked to the note.\n *\n * Set to 0 to disable this feature.\n *\n * @global int $g_issue_activity_note_attachments_seconds_threshold\n */\n$g_issue_activity_note_attachments_seconds_threshold = 3;\n"
        },
        {
          "name": "core.php",
          "type": "blob",
          "size": 13.87890625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * MantisBT Core\n *\n * Initialises the MantisBT core, connects to the database, starts plugins and\n * performs other global operations that either help initialise MantisBT or\n * are required to be executed on every page load.\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses authentication_api.php\n * @uses collapse_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses config_defaults_inc.php\n * @uses config_inc.php\n * @uses constant_inc.php\n * @uses crypto_api.php\n * @uses custom_constants_inc.php\n * @uses custom_functions_inc.php\n * @uses database_api.php\n * @uses event_api.php\n * @uses http_api.php\n * @uses lang_api.php\n * @uses mantis_offline.php\n * @uses plugin_api.php\n * @uses php_api.php\n * @uses user_pref_api.php\n * @uses wiki_api.php\n *\n * @noinspection PhpIncludeInspection\n */\n\n/**\n * Before doing anything... check if MantisBT is down for maintenance\n *\n *   To make MantisBT 'offline' simply create a file called\n *   'mantis_offline.php' in the MantisBT root directory.\n *   Users are redirected to that file if it exists.\n *   If you have to test MantisBT while it's offline, add the\n *   parameter 'mbadmin=1' to the URL.\n */\nif( file_exists( 'mantis_offline.php' ) && !isset( $_GET['mbadmin'] ) ) {\n\tinclude( 'mantis_offline.php' );\n\texit;\n}\n\n$g_request_time = microtime( true );\n\n# Load supplied constants\nrequire_once( __DIR__ . '/core/constant_inc.php' );\n\n# Enforce our minimum PHP requirements\nif( version_compare( PHP_VERSION, PHP_MIN_VERSION, '<' ) ) {\n\techo '<strong>FATAL ERROR: Your version of PHP is too old. '\n\t\t. 'MantisBT requires ' . PHP_MIN_VERSION . ' or newer</strong><br />'\n\t\t. 'Your are running PHP version <em>' . PHP_VERSION . '</em>';\n\tdie();\n}\n\nensure_php_extension_loaded( 'mbstring', 'for Unicode (UTF-8) support' );\n\n# Ensure that encoding is always UTF-8 independent from any PHP default or ini setting\nmb_internal_encoding( 'UTF-8' );\n\nif( php_sapi_name() != 'cli' ) {\n\tob_start();\n}\n\n# Load Composer autoloader\nrequire_once( __DIR__ . '/vendor/autoload.php' );\n\n# Include default configuration settings\nrequire_once( __DIR__ . '/config_defaults_inc.php' );\n\n# Load user-defined constants (if required)\nglobal $g_config_path;\nif( file_exists( $g_config_path . 'custom_constants_inc.php' ) ) {\n\trequire_once( $g_config_path . 'custom_constants_inc.php' );\n}\n\n# config_inc may not be present if this is a new install\n$t_config_inc_found = file_exists( $g_config_path . 'config_inc.php' );\nif( $t_config_inc_found ) {\n\trequire_once( $g_config_path . 'config_inc.php' );\n}\n\n# Set global path variables\n# NOTE: We store whether $g_path was defaulted, so we can later warn the admin\n# about the exposure to host header injection attacks if they didn't set it.\nglobal $g_defaulted_path;\n$g_defaulted_path = set_default_path();\n\n# Ensure PHP LDAP extension is available when Login Method is LDAP\nglobal $g_login_method;\nif ( $g_login_method == LDAP ) {\n\tensure_php_extension_loaded( 'ldap', 'when using LDAP as Login Method' );\n}\n\n# Register the autoload function to make it effective immediately\nspl_autoload_register( 'autoload_mantis' );\n\n# Include PHP compatibility file\nrequire_api( 'php_api.php' );\n\n# Ensure that output is blank so far (output at this stage generally denotes\n# that an error has occurred)\nif( ( $t_output = ob_get_contents() ) != '' ) {\n\techo 'Possible Whitespace/Error in Configuration File - Aborting. Output so far follows:<br />';\n\tvar_dump( $t_output );\n\tdie;\n}\nunset( $t_output );\n\n# Start HTML compression handler (if enabled)\nrequire_api( 'compress_api.php' );\ncompress_start_handler();\n\n# If no configuration file exists, redirect the user to the admin page so\n# they can complete installation and configuration of MantisBT\nif( false === $t_config_inc_found ) {\n\tif( php_sapi_name() == 'cli' ) {\n\t\techo 'Error: ' . $g_config_path . \"config_inc.php file not found; ensure MantisBT is properly setup.\\n\";\n\t\texit( 1 );\n\t}\n\n\t# Do not load Core for dynamic javascript files when MantisBT is not installed\n\tif( isset( $_SERVER['SCRIPT_NAME'] ) && ( 0 < strpos( $_SERVER['SCRIPT_NAME'], 'javascript' ) ) ) {\n\t\thttp_response_code( HTTP_STATUS_NO_CONTENT );\n\t\texit;\n\t}\n\n\tif( !( isset( $_SERVER['SCRIPT_NAME'] ) && ( 0 < strpos( $_SERVER['SCRIPT_NAME'], 'admin' ) ) ) ) {\n\t\theader( 'Content-Type: text/html' );\n\t\t# Temporary redirect (307) instead of Found (302) default\n\t\theader( 'Location: admin/install.php', true, 307 );\n\t\t# Make sure it's not cached\n\t\theader( 'Cache-Control: no-store, no-cache, must-revalidate' );\n\t\texit;\n\t}\n}\n\n# Initialise cryptographic keys\nrequire_api( 'crypto_api.php' );\ncrypto_init();\n\n# Connect to the database\nrequire_api( 'database_api.php' );\nrequire_api( 'config_api.php' );\n\n# Set the default timezone\n# To reduce overhead, we assume that the timezone configuration is valid,\n# i.e. it exists in timezone_identifiers_list(). If not, a PHP NOTICE will\n# be raised and we fall back to the system's default timezone.\n# Use admin checks to validate configuration.\n$t_tz = config_get_global( 'default_timezone' );\nif( empty( $t_tz ) || !date_default_timezone_set( $t_tz ) ) {\n\t$t_tz = date_default_timezone_get();\n}\nconfig_set_global( 'default_timezone', $t_tz );\n\nif( !defined( 'MANTIS_MAINTENANCE_MODE' ) ) {\n\tglobal $g_use_persistent_connections, $g_hostname, $g_db_username, $g_db_password, $g_database_name;\n\tif( OFF == $g_use_persistent_connections ) {\n\t\tdb_connect( config_get_global( 'dsn', false ), $g_hostname, $g_db_username, $g_db_password, $g_database_name );\n\t} else {\n\t\tdb_connect( config_get_global( 'dsn', false ), $g_hostname, $g_db_username, $g_db_password, $g_database_name, true );\n\t}\n}\n\n# Register global shutdown function\nshutdown_functions_register();\n\n# Push default language to speed calls to lang_get\nif( !defined( 'LANG_LOAD_DISABLED' ) ) {\n\trequire_api( 'lang_api.php' );\n\tlang_push( lang_get_default() );\n}\n\n# Initialise plugins\nrequire_api( 'plugin_api.php' );  # necessary for some upgrade steps\nif( !defined( 'PLUGINS_DISABLED' ) && !defined( 'MANTIS_MAINTENANCE_MODE' ) ) {\n\tplugin_init_installed();\n}\n\n# Initialise Wiki integration\nif( config_get_global( 'wiki_enable' ) == ON ) {\n\trequire_api( 'wiki_api.php' );\n\twiki_init();\n}\n\nif( !isset( $g_login_anonymous ) ) {\n\t$g_login_anonymous = true;\n}\n\nif( !defined( 'MANTIS_MAINTENANCE_MODE' ) ) {\n\trequire_api( 'authentication_api.php' );\n\n\t# Override the default timezone according to user's preferences\n\tif( auth_is_user_authenticated() ) {\n\t\trequire_api( 'user_pref_api.php' );\n\t\t$t_tz = user_pref_get_pref( auth_get_current_user_id(), 'timezone' );\n\t\t@date_default_timezone_set( $t_tz );\n\t}\n}\nunset( $t_tz );\n\n# Cache current user's collapse API data\nif( !defined( 'MANTIS_MAINTENANCE_MODE' ) ) {\n\trequire_api( 'collapse_api.php' );\n\tcollapse_cache_token();\n}\n\n# Load custom functions\nrequire_api( 'custom_function_api.php' );\n\nif( file_exists( $g_config_path . 'custom_functions_inc.php' ) ) {\n\trequire_once( $g_config_path . 'custom_functions_inc.php' );\n}\n\n# Set HTTP response headers\nrequire_api( 'http_api.php' );\nevent_signal( 'EVENT_CORE_HEADERS' );\nhttp_all_headers();\n\n# Signal plugins that the core system is loaded\nif( !defined( 'PLUGINS_DISABLED' ) && !defined( 'MANTIS_MAINTENANCE_MODE' ) ) {\n\trequire_api( 'event_api.php' );\n\tevent_signal( 'EVENT_CORE_READY' );\n}\n\n/**\n * Define an API inclusion function to replace require_once\n *\n * @param string $p_api_name An API file name.\n * @return void\n */\nfunction require_api( $p_api_name ) {\n\tstatic $s_api_included;\n\tglobal $g_core_path;\n\tif( !isset( $s_api_included[$p_api_name] ) ) {\n\t\trequire_once( $g_core_path . $p_api_name );\n\t\t$t_new_globals = array_diff_key( get_defined_vars(), $GLOBALS, array( 't_new_globals' => 0 ) );\n\t\tforeach ( $t_new_globals as $t_global_name => $t_global_value ) {\n\t\t\t$GLOBALS[$t_global_name] = $t_global_value;\n\t\t}\n\t\t$s_api_included[$p_api_name] = 1;\n\t}\n}\n\n/**\n * Define an API inclusion function to replace require_once\n *\n * @param string $p_library_name A library file name.\n * @return void\n */\nfunction require_lib( $p_library_name ) {\n\tstatic $s_libraries_included;\n\n\tif( !isset( $s_libraries_included[$p_library_name] ) ) {\n\t\tglobal $g_library_path;\n\t\t$t_library_file_path = $g_library_path . $p_library_name;\n\n\t\tif( file_exists( $t_library_file_path ) ) {\n\t\t\trequire_once( $t_library_file_path );\n\t\t} else {\n\t\t\techo 'External library \\'' . $t_library_file_path . '\\' not found.';\n\t\t\texit;\n\t\t}\n\n\t\t$t_new_globals = array_diff_key( get_defined_vars(), $GLOBALS, array( 't_new_globals' => 0 ) );\n\t\tforeach ( $t_new_globals as $t_global_name => $t_global_value ) {\n\t\t\t$GLOBALS[$t_global_name] = $t_global_value;\n\t\t}\n\n\t\t$s_libraries_included[$p_library_name] = 1;\n\t}\n}\n\n/**\n * Checks to see if script was queried through the HTTPS protocol\n * @return boolean True if protocol is HTTPS\n */\nfunction http_is_protocol_https() {\n\tif( isset( $_SERVER['HTTP_X_FORWARDED_PROTO'] ) ) {\n\t\treturn strtolower( $_SERVER['HTTP_X_FORWARDED_PROTO'] ) == 'https';\n\t}\n\n\tif( !empty( $_SERVER['HTTPS'] ) && ( strtolower( $_SERVER['HTTPS'] ) != 'off' ) ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Set Global Path variables.\n *\n * @see $g_path\n * @see $g_short_path\n *\n * @return bool True if default $g_path was assigned, false if it was already set.\n */\nfunction set_default_path() {\n\tglobal $g_path, $g_short_path, $g_config_path;\n\n\t# $g_path is set in config_inc.php\n\tif( $g_path ) {\n\t\t# Derive $g_short_path from $g_path if not set\n\t\tif( !$g_short_path ) {\n\t\t\t$g_short_path = parse_url( $g_path, PHP_URL_PATH );\n\t\t}\n\t\treturn false;\n\t}\n\n\t$t_protocol = 'http';\n\t$t_host = 'localhost';\n\tif( isset( $_SERVER['SCRIPT_NAME'] ) ) {\n\t\t$t_protocol = http_is_protocol_https() ? 'https' : 'http';\n\n\t\t# $_SERVER['SERVER_PORT'] is not defined in case of php-cgi.exe\n\t\tif( isset( $_SERVER['SERVER_PORT'] ) ) {\n\t\t\t$t_port = ':' . $_SERVER['SERVER_PORT'];\n\t\t\tif( ( ':80' == $t_port && 'http' == $t_protocol )\n\t\t\t\t|| ( ':443' == $t_port && 'https' == $t_protocol )) {\n\t\t\t\t$t_port = '';\n\t\t\t}\n\t\t} else {\n\t\t\t$t_port = '';\n\t\t}\n\n\t\tif( isset( $_SERVER['HTTP_X_FORWARDED_HOST'] ) ) { # Support ProxyPass\n\t\t\t$t_hosts = explode( ',', $_SERVER['HTTP_X_FORWARDED_HOST'] );\n\t\t\t$t_host = $t_hosts[0];\n\t\t} else if( isset( $_SERVER['HTTP_HOST'] ) ) {\n\t\t\t$t_host = $_SERVER['HTTP_HOST'];\n\t\t} else if( isset( $_SERVER['SERVER_NAME'] ) ) {\n\t\t\t$t_host = $_SERVER['SERVER_NAME'] . $t_port;\n\t\t} else if( isset( $_SERVER['SERVER_ADDR'] ) ) {\n\t\t\t$t_host = $_SERVER['SERVER_ADDR'] . $t_port;\n\t\t}\n\n\t\t# Prevent XSS if the path is displayed later on. This is the equivalent of\n\t\t# FILTER_SANITIZE_STRING, which was deprecated in PHP 8.1:\n\t\t# strip tags and null bytes, then encode quotes into HTML entities\n\t\t$t_path = preg_replace( '/\\x00|<[^>]*>?/', '', $_SERVER['SCRIPT_NAME'] );\n\t\t$t_path = str_replace( [\"'\", '\"'], ['&#39;', '&#34;'], $t_path );\n\n\t\t$t_path = dirname( $t_path );\n\t\tswitch( basename( $t_path ) ) {\n\t\t\tcase 'admin':\n\t\t\t\t$t_path = dirname( $t_path );\n\t\t\t\tbreak;\n\t\t\tcase 'check': # admin checks dir\n\t\t\tcase 'soap':\n\t\t\tcase 'rest':\n\t\t\t\t$t_path = dirname( $t_path, 2 );\n\t\t\t\tbreak;\n\t\t\tcase 'swagger':\n\t\t\t\t$t_path = dirname( $t_path, 3 );\n\t\t\t\tbreak;\n\t\t}\n\t\t$t_path = rtrim( $t_path, '/\\\\' ) . '/';\n\n\t\tif( strpos( $t_path, '&#' ) ) {\n\t\t\techo 'Can not safely determine $g_path. Please set $g_path manually in ' . $g_config_path . 'config_inc.php';\n\t\t\tdie;\n\t\t}\n\t} else {\n\t\t$t_path = 'mantisbt/';\n\t}\n\n\t$g_path\t= $t_protocol . '://' . $t_host . $t_path;\n\t$g_short_path = $t_path;\n\n\treturn true;\n}\n\n/**\n * Define an autoload function to automatically load classes when referenced\n *\n * @param string $p_class Class name being autoloaded.\n * @return void\n */\nfunction autoload_mantis( $p_class ) {\n\tglobal $g_core_path;\n\n\t# Remove namespace from class name\n\t$t_end_of_namespace = strrpos( $p_class, '\\\\' );\n\tif( $t_end_of_namespace !== false ) {\n\t\t$p_class = substr( $p_class, $t_end_of_namespace + 1 );\n\t}\n\n\t# Commands\n\tif( substr( $p_class, -7 ) === 'Command' ) {\n\t\t$t_require_path = $g_core_path . 'commands/' . $p_class . '.php';\n\t\tif( file_exists( $t_require_path ) ) {\n\t\t\trequire_once( $t_require_path );\n\t\t\treturn;\n\t\t}\n\t}\n\n\t# Exceptions\n\tif( substr( $p_class, -9 ) === 'Exception' ) {\n\t\t$t_require_path = $g_core_path . 'exceptions/' . $p_class . '.php';\n\t\tif( file_exists( $t_require_path ) ) {\n\t\t\trequire_once( $t_require_path );\n\t\t\treturn;\n\t\t}\n\t}\n\n\tglobal $g_class_path;\n\tglobal $g_library_path;\n\n\t$t_require_path = $g_class_path . $p_class . '.class.php';\n\n\tif( file_exists( $t_require_path ) ) {\n\t\trequire_once( $t_require_path );\n\t\treturn;\n\t}\n\n\t$t_require_path = $g_library_path . 'rssbuilder/class.' . $p_class . '.inc.php';\n\n\tif( file_exists( $t_require_path ) ) {\n\t\trequire_once( $t_require_path );\n\t\treturn;\n\t}\n}\n\n/**\n * Ensures the given extension is loaded, dies with an error message if not.\n *\n * @param string $p_extension      Extension name\n * @param string $p_reason_message Justification for requiring the extension\n * @return bool\n */\nfunction ensure_php_extension_loaded( $p_extension, $p_reason_message ) {\n\tif( extension_loaded( $p_extension ) ) {\n\t\treturn true;\n\t}\n\n\t/** @noinspection HtmlUnknownTarget */\n\tprintf( '<strong>FATAL ERROR: PHP <i>%1$s</i> extension is not enabled.</strong><br>'\n\t\t. 'MantisBT requires this extension %2$s.<br>'\n\t\t. '<a href=\"%3$s\">%3$s</a>',\n\t\t$p_extension,\n\t\t$p_reason_message,\n\t\t\"https://www.php.net/manual/en/$p_extension.installation.php\"\n\t);\n\tdie;\n}\n"
        },
        {
          "name": "core",
          "type": "tree",
          "content": null
        },
        {
          "name": "css",
          "type": "tree",
          "content": null
        },
        {
          "name": "csv_export.php",
          "type": "blob",
          "size": 4.61328125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This file implements CSV export functionality within MantisBT\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses columns_api.php\n * @uses constant_inc.php\n * @uses csv_api.php\n * @uses file_api.php\n * @uses filter_api.php\n * @uses helper_api.php\n * @uses print_api.php\n */\n\n# Prevent output of HTML in the content if errors occur\ndefine( 'DISABLE_INLINE_ERROR_REPORTING', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'columns_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'csv_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'print_api.php' );\n\nauth_ensure_user_authenticated();\n\naccess_ensure_project_level( config_get( 'export_issues_threshold' ) );\n\nhelper_begin_long_process();\n\n$t_nl = csv_get_newline();\n$t_sep = csv_get_separator();\n\n# Get current filter\n$t_filter = filter_get_bug_rows_filter();\n\n$t_filter_query = new BugFilterQuery( $t_filter );\n$t_filter_query->set_limit( EXPORT_BLOCK_SIZE );\n\nif( 0 == $t_filter_query->get_bug_count() ) {\n\tprint_header_redirect( 'view_all_set.php?type=0' );\n}\n\n# Get columns to be exported\n$t_columns = csv_get_columns();\n\ncsv_start( csv_get_default_filename() );\n\n# export the titles\n$t_first_column = true;\nob_start();\n$t_titles = array();\nforeach ( $t_columns as $t_column ) {\n\tif( !$t_first_column ) {\n\t\techo $t_sep;\n\t} else {\n\t\t$t_first_column = false;\n\t}\n\n\techo column_get_title( $t_column );\n}\n\necho $t_nl;\n\n$t_header = ob_get_clean();\n\n# Fixed for a problem in Excel where it prompts error message \"SYLK: File Format Is Not Valid\"\n# See Microsoft Knowledge Base Article - 323626\n# http://support.microsoft.com/default.aspx?scid=kb;en-us;323626&Product=xlw\n$t_first_three_chars = mb_substr( $t_header, 0, 3 );\nif( strcmp( $t_first_three_chars, 'ID' . $t_sep ) == 0 ) {\n\t$t_header = str_replace( 'ID' . $t_sep, 'Id' . $t_sep, $t_header );\n}\n# end of fix\n\necho $t_header;\n\n$t_end_of_results = false;\n$t_offset = 0;\ndo {\n\t# Clear cache for next block\n\tbug_clear_cache_all();\n\n\t# select a new block\n\t$t_filter_query->set_offset( $t_offset );\n\t$t_result = $t_filter_query->execute();\n\t$t_offset += EXPORT_BLOCK_SIZE;\n\n\t# Keep reading until reaching max block size or end of result set\n\t$t_read_rows = array();\n\t$t_count = 0;\n\t$t_bug_id_array = array();\n\t$t_unique_user_ids = array();\n\twhile( $t_count < EXPORT_BLOCK_SIZE ) {\n\t\t$t_row = db_fetch_array( $t_result );\n\t\tif( false === $t_row ) {\n\t\t\t# a premature end indicates end of query results. Set flag as finished\n\t\t\t$t_end_of_results = true;\n\t\t\tbreak;\n\t\t}\n\t\t$t_bug_id_array[] = (int)$t_row['id'];\n\t\t$t_read_rows[] = $t_row;\n\t\t$t_count++;\n\t}\n\t# Max block size has been reached, or no more rows left to complete the block.\n\t# Either way, process what we have\n\n\t# convert and cache data\n\t$t_rows = filter_cache_result( $t_read_rows, $t_bug_id_array );\n\tbug_cache_columns_data( $t_rows, $t_columns );\n\n\t# Clear arrays that are not needed\n\tunset( $t_read_rows );\n\tunset( $t_unique_user_ids );\n\tunset( $t_bug_id_array );\n\n\t# export the rows\n\tforeach ( $t_rows as $t_row ) {\n\t\t$t_first_column = true;\n\n\t\tforeach ( $t_columns as $t_column ) {\n\t\t\tif( !$t_first_column ) {\n\t\t\t\techo $t_sep;\n\t\t\t} else {\n\t\t\t\t$t_first_column = false;\n\t\t\t}\n\n\t\t\t$t_custom_field = column_get_custom_field_name( $t_column );\n\t\t\tif( $t_custom_field !== null ) {\n\t\t\t\techo csv_format_custom_field( $t_row->id, $t_row->project_id, $t_custom_field );\n\t\t\t} else if( column_is_plugin_column( $t_column ) ) {\n\t\t\t\techo csv_format_plugin_column_value( $t_column, $t_row );\n\t\t\t} else {\n\t\t\t\t$t_function = 'csv_format_' . $t_column;\n\t\t\t\tif( function_exists( $t_function ) ) {\n\t\t\t\t\techo $t_function( $t_row );\n\t\t\t\t} else {\n\t\t\t\t\t# Field is unknown\n\t\t\t\t\techo '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\techo $t_nl;\n\t}\n\n} while ( false === $t_end_of_results );\n\n"
        },
        {
          "name": "doc",
          "type": "tree",
          "content": null
        },
        {
          "name": "docbook",
          "type": "tree",
          "content": null
        },
        {
          "name": "excel_xml_export.php",
          "type": "blob",
          "size": 4.6611328125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Excel (2003 SP2 and above) export page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses columns_api.php\n * @uses config_api.php\n * @uses excel_api.php\n * @uses file_api.php\n * @uses filter_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\n# Prevent output of HTML in the content if errors occur\ndefine( 'DISABLE_INLINE_ERROR_REPORTING', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'columns_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'excel_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nauth_ensure_user_authenticated();\n\naccess_ensure_project_level( config_get( 'export_issues_threshold' ) );\n\n$f_export = gpc_get_string( 'export', '' );\n\nhelper_begin_long_process();\n\n$t_export_title = excel_get_default_filename();\n\n$t_short_date_format = config_get( 'short_date_format' );\n\nheader( 'Content-Type: application/vnd.ms-excel; charset=UTF-8' );\nheader( 'Pragma: public' );\nheader( 'Content-Disposition: attachment; filename=\"' . urlencode( file_clean_name( $t_export_title ) ) . '.xml\"' ) ;\n\necho excel_get_header( $t_export_title );\necho excel_get_titles_row();\n\n$f_bug_arr = explode( ',', $f_export );\n\n$t_columns = excel_get_columns();\n\n\n# Get current filter\n$t_filter = filter_get_bug_rows_filter();\n\n$t_filter_query = new BugFilterQuery( $t_filter );\n$t_filter_query->set_limit( EXPORT_BLOCK_SIZE );\n\nif( 0 == $t_filter_query->get_bug_count() ) {\n\tprint_header_redirect( 'view_all_set.php?type=0&print=1' );\n}\n\n$t_end_of_results = false;\n$t_offset = 0;\ndo {\n\t# Clear cache for next block\n\tbug_clear_cache_all();\n\n\t# select a new block\n\t$t_filter_query->set_offset( $t_offset );\n\t$t_result = $t_filter_query->execute();\n\t$t_offset += EXPORT_BLOCK_SIZE;\n\n\t# Keep reading until reaching max block size or end of result set\n\t$t_read_rows = array();\n\t$t_count = 0;\n\t$t_bug_id_array = array();\n\t$t_unique_user_ids = array();\n\twhile( $t_count < EXPORT_BLOCK_SIZE ) {\n\t\t$t_row = db_fetch_array( $t_result );\n\t\tif( false === $t_row ) {\n\t\t\t# a premature end indicates end of query results. Set flag as finished\n\t\t\t$t_end_of_results = true;\n\t\t\tbreak;\n\t\t}\n\t\t# @TODO, the \"export\" bug list parameter functionality should be implemented in a more efficient way\n\t\tif( is_blank( $f_export ) || in_array( $t_row['id'], $f_bug_arr ) ) {\n\t\t\t$t_bug_id_array[] = (int)$t_row['id'];\n\t\t\t$t_read_rows[] = $t_row;\n\t\t\t$t_count++;\n\t\t}\n\t}\n\t# Max block size has been reached, or no more rows left to complete the block.\n\t# Either way, process what we have\n\tif( 0 === $t_count && !$t_end_of_results ) {\n\t\tcontinue;\n\t}\n\tif( 0 === $t_count && $t_end_of_results ) {\n\t\tbreak;\n\t}\n\n\t# convert and cache data\n\t$t_rows = filter_cache_result( $t_read_rows, $t_bug_id_array );\n\tbug_cache_columns_data( $t_rows, $t_columns );\n\n\t# Clear arrays that are not needed\n\tunset( $t_read_rows );\n\tunset( $t_unique_user_ids );\n\tunset( $t_bug_id_array );\n\n\t# export the rows\n\tforeach ( $t_rows as $t_row ) {\n\n\t\techo excel_get_start_row();\n\n\t\tforeach ( $t_columns as $t_column ) {\n\t\t\t$t_custom_field = column_get_custom_field_name( $t_column );\n\t\t\tif( $t_custom_field !== null ) {\n\t\t\t\techo excel_format_custom_field( $t_row->id, $t_row->project_id, $t_custom_field );\n\t\t\t} else if( column_is_plugin_column( $t_column ) ) {\n\t\t\t\techo excel_format_plugin_column_value( $t_column, $t_row );\n\t\t\t} else {\n\t\t\t\t$t_function = 'excel_format_' . $t_column;\n\t\t\t\tif( function_exists( $t_function ) ) {\n\t\t\t\t\techo $t_function( $t_row );\n\t\t\t\t} else {\n\t\t\t\t\t# field is unknown\n\t\t\t\t\techo '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\techo excel_get_end_row();\n\t}\n\n} while ( false === $t_end_of_results );\n\necho excel_get_footer();\n\n"
        },
        {
          "name": "file_download.php",
          "type": "blob",
          "size": 6.724609375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add file and redirect to the referring page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses file_api.php\n * @uses gpc_api.php\n * @uses http_api.php\n * @uses utility_api.php\n */\n\n# Prevent output of HTML in the content if errors occur\ndefine( 'DISABLE_INLINE_ERROR_REPORTING', true );\n\n$g_bypass_headers = true; # suppress headers as we will send our own later\ndefine( 'COMPRESSION_DISABLED', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'http_api.php' );\nrequire_api( 'utility_api.php' );\n\nauth_ensure_user_authenticated();\n\n$f_show_inline = gpc_get_bool( 'show_inline', false );\n\n# To prevent cross-domain inline hotlinking to attachments we require a CSRF\n# token from the user to show any attachment inline within the browser.\n# Without this security in place a malicious user could upload a HTML file\n# attachment and direct a user to file_download.php?file_id=X&type=bug&show_inline=1\n# and the malicious HTML content would be rendered in the user's browser,\n# violating cross-domain security.\nif( $f_show_inline ) {\n\t# Disable errors for form_security_validate as we need to send HTTP\n\t# headers prior to raising an error (the error handler\n\t# doesn't check that headers have been sent, it just\n\t# makes the assumption that they've been sent already).\n\tif( !@form_security_validate( 'file_show_inline' ) ) {\n\t\thttp_all_headers();\n\t\ttrigger_error( ERROR_FORM_TOKEN_INVALID, ERROR );\n\t}\n}\n\n$f_file_id = gpc_get_int( 'file_id' );\n$f_type\t= gpc_get_string( 'type' );\n\n$c_file_id = (integer)$f_file_id;\n\n# we handle the case where the file is attached to a bug\n# or attached to a project as a project doc.\n$t_query = '';\nswitch( $f_type ) {\n\tcase 'bug':\n\t\t$t_query = 'SELECT * FROM {bug_file} WHERE id=' . db_param();\n\t\tbreak;\n\tcase 'doc':\n\t\t$t_query = 'SELECT * FROM {project_file} WHERE id=' . db_param();\n\t\tbreak;\n\tdefault:\n\t\taccess_denied();\n}\n$t_result = db_query( $t_query, array( $c_file_id ) );\n$t_row = db_fetch_array( $t_result );\nif( false === $t_row ) {\n\t# Attachment not found\n\terror_parameters( $c_file_id );\n\ttrigger_error( ERROR_FILE_NOT_FOUND, ERROR );\n}\n/**\n * @var int    $v_bug_id\n * @var int    $v_project_id\n * @var string $v_diskfile\n * @var string $v_filename\n * @var int    $v_filesize\n * @var string $v_file_type\n * @var string $v_content\n * @var int    $v_date_added\n * @var int    $v_user_id\n * @var int    $v_bugnote_id\n */\nextract( $t_row, EXTR_PREFIX_ALL, 'v' );\n\nif( $f_type == 'bug' ) {\n\t$t_project_id = bug_get_field( $v_bug_id, 'project_id' );\n} else {\n\t$t_project_id = $v_project_id;\n}\n\n# Check access rights\nswitch( $f_type ) {\n\tcase 'bug':\n\t\tif( !file_can_download_bug_attachments( $v_bug_id, $v_user_id )\n\t\t|| !file_can_download_bugnote_attachments( $v_bugnote_id, $v_user_id )\n\t\t) {\n\t\t\taccess_denied();\n\t\t}\n\t\tbreak;\n\tcase 'doc':\n\t\t# Check if project documentation feature is enabled.\n\t\tif( OFF == config_get( 'enable_project_documentation' ) ) {\n\t\t\taccess_denied();\n\t\t}\n\n\t\taccess_ensure_project_level( config_get( 'view_proj_doc_threshold' ), $v_project_id );\n\t\tbreak;\n}\n\n# throw away output buffer contents (and disable it) to protect download\nwhile( @ob_end_clean() ) {\n}\n\nif( ini_get( 'zlib.output_compression' ) && function_exists( 'ini_set' ) ) {\n\tini_set( 'zlib.output_compression', false );\n}\n\nhttp_security_headers();\n\nheader( 'Expires: ' . gmdate( 'D, d M Y H:i:s \\G\\M\\T', time() ) );\nheader( 'Last-Modified: ' . gmdate( 'D, d M Y H:i:s \\G\\M\\T', $v_date_added ) );\n\n$t_upload_method = config_get( 'file_upload_method' );\n$t_filename = file_get_display_name( $v_filename );\n\n# Content headers\n$t_content_type = $v_file_type;\n\n$t_content_type_override = file_get_content_type_override( $t_filename );\n$t_file_info_type = false;\n\nswitch( $t_upload_method ) {\n\tcase DISK:\n\t\t$t_local_disk_file = file_normalize_attachment_path( $v_diskfile, $t_project_id );\n\t\tif( file_exists( $t_local_disk_file ) ) {\n\t\t\t$t_file_info_type = file_get_mime_type( $t_local_disk_file );\n\t\t}\n\t\tbreak;\n\tcase DATABASE:\n\t\t$t_file_info_type = file_get_mime_type_for_content( $v_content );\n\t\tbreak;\n\tdefault:\n\t\ttrigger_error( ERROR_GENERIC, ERROR );\n\n}\n\nif( $t_file_info_type !== false ) {\n\t$t_content_type = $t_file_info_type;\n}\n\nif( $t_content_type_override ) {\n\t$t_content_type = $t_content_type_override;\n}\n\n# Decide what should open inline in the browser vs. download as attachment\n# https://www.thoughtco.com/mime-types-by-content-type-3469108\n$t_show_inline = $f_show_inline;\n$t_mime_force_inline = array(\n\t'application/pdf',\n\t'image/bmp',\n\t'image/gif',\n\t'image/jpeg',\n\t'image/png',\n\t'image/tiff',\n);\n$t_mime_force_attachment = array(\n\t'application/x-shockwave-flash',\n\t'image/svg+xml', # SVG could contain CSS or scripting, see #30384\n\t'text/html',\n);\n\n# extract mime type from content type\n$t_mime_type = explode( ';', $t_content_type, 2 );\n$t_mime_type = $t_mime_type[0];\n\nif( in_array( $t_mime_type, $t_mime_force_inline ) ) {\n\t$t_show_inline = true;\n} else if( in_array( $t_mime_type, $t_mime_force_attachment ) ) {\n\t$t_show_inline = false;\n}\n\nhttp_content_disposition_header( $t_filename, $t_show_inline );\n\nheader( 'Content-Type: ' . $t_content_type );\nheader( 'Content-Length: ' . $v_filesize );\n\n# Don't let Internet Explorer second-guess our content-type [1]\n# Also disable Flash content-type sniffing [2]\n# [1] http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx\n# [2] http://50.56.33.56/blog/?p=242\nheader( 'X-Content-Type-Options: nosniff' );\n\n# dump file content to the connection.\nswitch( $t_upload_method ) {\n\tcase DISK:\n\t\treadfile( $t_local_disk_file );\n\t\tbreak;\n\tcase DATABASE:\n\t\techo $v_content;\n}\n"
        },
        {
          "name": "fonts",
          "type": "tree",
          "content": null
        },
        {
          "name": "images",
          "type": "tree",
          "content": null
        },
        {
          "name": "index.php",
          "type": "blob",
          "size": 1.3291015625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Default Index Page - redirects user to their home page or login page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'print_api.php' );\n\nif( auth_is_user_authenticated() ) {\n\tprint_header_redirect( config_get_global( 'default_home_page' ) );\n} else {\n\tprint_header_redirect( auth_login_page() );\n}\n"
        },
        {
          "name": "issues_rss.php",
          "type": "blob",
          "size": 6.89453125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * GET PARAMETERS FOR THIS PAGE\n *\n * project_id: 0 - all projects, otherwise project id.\n * filter_id: The filter id to use for generating the rss.\n * sort: This parameter is ignore if filter_id is supplied and is not equal to 0.\n *\t\t\"update\": issues ordered descending by last updated date.\n *       \"submit\": issues ordered descending by submit date (default).\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses bug_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses filter_api.php\n * @uses gpc_api.php\n * @uses lang_api.php\n * @uses project_api.php\n * @uses rss_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\n# Prevent output of HTML in the content if errors occur\ndefine( 'DISABLE_INLINE_ERROR_REPORTING', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'rss_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\n$f_project_id = gpc_get_int( 'project_id', ALL_PROJECTS );\n$f_filter_id = gpc_get_int( 'filter_id', 0 );\n$f_sort = gpc_get_string( 'sort', 'submit' );\n$f_username = gpc_get_string( 'username', null );\n$f_key = gpc_get_string( 'key', null );\n\n# make sure RSS syndication is enabled.\nif( OFF == config_get( 'rss_enabled' ) ) {\n\taccess_denied();\n}\n\n# authenticate the user\nif( $f_username !== null ) {\n\tif( !rss_login( $f_username, $f_key ) ) {\n\t\taccess_denied();\n\t}\n} else {\n\tif( !auth_anonymous_enabled() ) {\n\t\taccess_denied();\n\t}\n}\n\n# Make sure that the current user has access to the selected project (if not ALL PROJECTS).\nif( $f_project_id != ALL_PROJECTS ) {\n\taccess_ensure_project_level( config_get( 'view_bug_threshold', null, null, $f_project_id ), $f_project_id );\n}\n\nif( $f_sort === 'update' ) {\n\t$c_sort_field = 'last_updated';\n} else {\n\t$c_sort_field = 'date_submitted';\n}\n\n$t_path = config_get_global( 'path' );\n\n# construct rss file\n\n$t_encoding = 'utf-8';\n$t_about = $t_path;\n$t_title = config_get( 'window_title' );\n$t_image_link = $t_path . config_get_global( 'logo_image' );\n\n# only rss 2.0\n$t_category = project_get_name( $f_project_id );\nif( $f_project_id !== 0 ) {\n\t$t_title .= ' - ' . $t_category;\n}\n\n$t_title .= ' - ' . lang_get( 'issues' );\n\nif( $f_username !== null ) {\n\t$t_title .= ' - (' . $f_username . ')';\n}\n\nif( $f_filter_id !== 0 ) {\n\t$t_title .= ' (' . filter_get_field( $f_filter_id, 'name' ) . ')';\n}\n\n$t_description = $t_title;\n\n# in minutes (only rss 2.0)\n$t_cache = '10';\n\n$t_rssfile = new RSSBuilder(\t$t_encoding, $t_about, $t_title, $t_description, $t_image_link, $t_category, $t_cache );\n\n# person, an organization, or a service\n$t_publisher = '';\n\n# person, an organization, or a service\n$t_creator = '';\n\n$t_date = date( 'r' );\n$t_language = lang_get( 'phpmailer_language' );\n$t_rights = '';\n\n# spatial location , temporal period or jurisdiction\n$t_coverage = '';\n\n# person, an organization, or a service\n$t_contributor = '';\n\n$t_rssfile->addDCdata( $t_publisher, $t_creator, $t_date, $t_language, $t_rights, $t_coverage, $t_contributor );\n\n# hourly / daily / weekly / ...\n$t_period = 'hourly';\n\n# every X hours/days/...\n$t_frequency = 1;\n\n$t_base = date( 'Y-m-d\\TH:i:sO' );\n\n# add missing : in the O part of the date.  PHP 5 supports a 'c' format which will output the format\n# exactly as we want it.\n# 2002-10-02T10:00:00-0500 -> 2002-10-02T10:00:00-05:00\n$t_base = mb_substr( $t_base, 0, 22 ) . ':' . mb_substr( $t_base, -2 );\n\n$t_rssfile->addSYdata( $t_period, $t_frequency, $t_base );\n\n$t_page_number = 1;\n$t_issues_per_page = 25;\n$t_page_count = 0;\n$t_issues_count = 0;\n$t_project_id = $f_project_id;\nif( $f_username !== null ) {\n\t$t_user_id = user_get_id_by_name( $f_username );\n} else {\n\t$t_user_id = user_get_id_by_name( auth_anonymous_account() );\n}\n$t_show_sticky = null;\n\n# Override current user\ncurrent_user_set( $t_user_id );\n\nif( $f_filter_id == 0 ) {\n\t$t_custom_filter = filter_get_default();\n\t$t_custom_filter['sort'] = $c_sort_field;\n} else {\n\t# null will be returned if the user doesn't have access right to access the filter.\n\t$t_custom_filter = filter_get( $f_filter_id, null );\n\tif( null === $t_custom_filter ) {\n\t\taccess_denied();\n\t}\n}\n\n$t_issues = filter_get_bug_rows( $t_page_number, $t_issues_per_page, $t_page_count, $t_issues_count,\n\t\t\t\t\t\t\t\t $t_custom_filter, $t_project_id, $t_user_id, $t_show_sticky );\n$t_issues_count = count( $t_issues );\n\n# Loop through results\nfor( $i = 0; $i < $t_issues_count; $i++ ) {\n\t$t_bug = $t_issues[$i];\n\n\t$t_about = $t_link = $t_path . 'view.php?id=' . $t_bug->id;\n\t$t_title = bug_format_id( $t_bug->id ) . ': ' . $t_bug->summary;\n\n\tif( $t_bug->view_state == VS_PRIVATE ) {\n\t\t$t_title .= ' [' . lang_get( 'private' ) . ']';\n\t}\n\n\t$t_description = string_rss_links( $t_bug->description );\n\n\t# subject is category.\n\t$t_subject = category_full_name( $t_bug->category_id, false );\n\n\t# optional DC value\n\t$t_date = $t_bug->last_updated;\n\n\t# author of item\n\t$t_author = '';\n\tif( access_has_global_level( config_get( 'show_user_email_threshold' ) ) ) {\n\t\t$t_author_name = user_get_name( $t_bug->reporter_id );\n\t\t$t_author_email = user_get_field( $t_bug->reporter_id, 'email' );\n\n\t\tif( !is_blank( $t_author_email ) ) {\n\t\t\tif( !is_blank( $t_author_name ) ) {\n\t\t\t\t$t_author = $t_author_name . ' <' . $t_author_email . '>';\n\t\t\t} else {\n\t\t\t\t$t_author = $t_author_email;\n\t\t\t}\n\t\t}\n\t}\n\n\t# $comments = 'http://www.example.com/sometext.php?somevariable=somevalue&comments=1';\t# url to comment page rss 2.0 value\n\t$t_comments = $t_path . 'view.php?id=' . $t_bug->id . '#bugnotes';\n\n\t# optional mod_im value for dispaying a different pic for every item\n\t$t_image = '';\n\n\t$t_rssfile->addRSSItem( $t_about, $t_title, $t_link, $t_description, $t_subject, $t_date,\n\t\t\t\t\t\t$t_author, $t_comments, $t_image );\n}\n\n# @todo consider making this a configuration option - 0.91 / 1.0 / 2.0\n$t_version = '2.0';\n\n$t_rssfile->outputRSS( $t_version );\n\n"
        },
        {
          "name": "javascript_config.php",
          "type": "blob",
          "size": 2.701171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle configuration required for javascript\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses config_api.php\n */\n\n# Prevent output of HTML in the content if errors occur\ndefine( 'DISABLE_INLINE_ERROR_REPORTING', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'config_api.php' );\n\n/**\n * Print array of configuration option->values for javascript.\n * @param string $p_config_key Configuration option.\n * @return void\n */\nfunction print_config_value( $p_config_key ) {\n\techo \"config['\" . $p_config_key . \"'] = '\" . addslashes( config_get( $p_config_key ) ) . \"';\\n\";\n}\n\n# Send correct MIME Content-Type header for JavaScript content.\n# See http://www.rfc-editor.org/rfc/rfc4329.txt for details on why application/javascript is the correct MIME type.\nheader( 'Content-Type: application/javascript; charset=UTF-8' );\n\n\n# Don't let Internet Explorer second-guess our content-type, as per\n# http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx\nheader( 'X-Content-Type-Options: nosniff' );\n\n# rewrite headers to allow caching\nif( gpc_isset( 'cache_key' ) ) {\n\thttp_caching_headers( true );\n}\n\n# WARNING: DO NOT EXPOSE SENSITIVE CONFIGURATION VALUES!\n#\n# All configuration values below are publicly available to visitors of the bug\n# tracker regardless of whether they're authenticated. Server paths should not\n# be exposed. It is OK to expose paths that the user sees directly (short\n# paths) but you do need to be careful in your selections. Consider servers\n# using URL rewriting engines to mask/convert user-visible paths to paths that\n# should only be known internally to the server.\n\necho \"var config = new Array();\\n\";\nprint_config_value( 'datetime_picker_format' );\nprint_config_value( 'short_path' );\nprint_config_value( 'collapse_settings_cookie' );\nprint_config_value( 'cookie_path' );\nprint_config_value( 'cookie_domain' );\nprint_config_value( 'cookie_samesite' );\n"
        },
        {
          "name": "javascript_translations.php",
          "type": "blob",
          "size": 2.1025390625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle language translations for Javascript\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses lang_api.php\n */\n\n# Prevent output of HTML in the content if errors occur\ndefine( 'DISABLE_INLINE_ERROR_REPORTING', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'lang_api.php' );\n\n/**\n * Print Language translation for javascript\n * @param string $p_lang_key Language string being translated.\n * @return void\n */\nfunction print_translation( $p_lang_key ) {\n\techo \"translations['\" . $p_lang_key . \"'] = '\" . addslashes( lang_get( $p_lang_key ) ) . \"';\\n\";\n}\n\n# Send correct MIME Content-Type header for JavaScript content.\n# See http://www.rfc-editor.org/rfc/rfc4329.txt for details on why\n# application/javasscript is the correct MIME type.\nheader( 'Content-Type: application/javascript; charset=UTF-8' );\n\n# Don't let Internet Explorer second-guess our content-type, as per\n# http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx\nheader( 'X-Content-Type-Options: nosniff' );\n\n# rewrite headers to allow caching\nif( gpc_isset( 'cache_key' ) ) {\n\thttp_caching_headers( true );\n}\n\necho \"var translations = new Array();\\n\";\nprint_translation( 'time_tracking_stopwatch_start' );\nprint_translation( 'time_tracking_stopwatch_stop' );\nprint_translation( 'loading' );\n"
        },
        {
          "name": "js",
          "type": "tree",
          "content": null
        },
        {
          "name": "jump_to_bug.php",
          "type": "blob",
          "size": 1.322265625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Given a bug id, redirect user to the view bug page for the given id\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\n\nauth_ensure_user_authenticated();\n\n# Determine which view page to redirect back to.\n$f_bug_id\t\t= gpc_get_int( 'bug_id' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "lang",
          "type": "tree",
          "content": null
        },
        {
          "name": "library",
          "type": "tree",
          "content": null
        },
        {
          "name": "login.php",
          "type": "blob",
          "size": 3.23046875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Check login then redirect to main_page.php or to login_page.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses session_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'session_api.php' );\nrequire_api( 'string_api.php' );\n\n$f_username\t\t= gpc_get_string( 'username', '' );\n$f_password\t\t= gpc_get_string( 'password', '' );\n$t_return\t\t= string_url( string_sanitize_url( gpc_get_string( 'return', config_get_global( 'default_home_page' ) ) ) );\n$f_from\t\t\t= gpc_get_string( 'from', '' );\n$f_secure_session = gpc_get_bool( 'secure_session', false );\n$f_reauthenticate = gpc_get_bool( 'reauthenticate', false );\n$f_install = gpc_get_bool( 'install' );\n\n# If upgrade required, always redirect to install page.\nif( $f_install ) {\n\t$t_return = 'admin/install.php';\n}\n\n$f_username = auth_prepare_username( $f_username );\n$f_password = auth_prepare_password( $f_password );\n\n$t_user_id = auth_get_user_id_from_login_name( $f_username );\n$t_allow_perm_login = auth_allow_perm_login( $t_user_id, $f_username );\n$f_perm_login\t= $t_allow_perm_login && gpc_get_bool( 'perm_login' );\n\ngpc_set_cookie( config_get_global( 'cookie_prefix' ) . '_secure_session', $f_secure_session ? '1' : '0' );\n\nif( auth_attempt_login( $f_username, $f_password, $f_perm_login ) ) {\n\tsession_set( 'secure_session', $f_secure_session );\n\n\tif( $f_username == 'administrator' && $f_password == 'root' && ( is_blank( $t_return ) || $t_return == 'index.php' ) ) {\n\t\t$t_return = 'account_page.php';\n\t}\n\n\t$t_redirect_url = 'login_cookie_test.php?return=' . $t_return;\n} else {\n\t$t_query_args = array(\n\t\t'error' => 1,\n\t\t'username' => $f_username,\n\t\t'return' => $t_return,\n\t);\n\n\tif( $f_reauthenticate ) {\n\t\t$t_query_args['reauthenticate'] = 1;\n\t}\n\n\tif( $f_secure_session ) {\n\t\t$t_query_args['secure_session'] = 1;\n\t}\n\n\tif( $t_allow_perm_login && $f_perm_login ) {\n\t\t$t_query_args['perm_login'] = 1;\n\t}\n\n\t$t_query_text = http_build_query( $t_query_args, '', '&' );\n\n\t$t_redirect_url = auth_login_page( $t_query_text );\n\n\tif( HTTP_AUTH == config_get_global( 'login_method' ) ) {\n\t\tauth_http_prompt();\n\t\texit;\n\t}\n}\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "login_anon.php",
          "type": "blob",
          "size": 1.8369140625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * login_anon.php logs a user in anonymously without having to enter a username\n * or password.\n *\n * Depends on global configuration variables:\n * anonymous_login - false or name of account to login with.\n *\n * TODO:\n * Check how manage account is impacted.\n * Might be extended to allow redirects for bug links etc.\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses config_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\n$f_return = gpc_get_string( 'return', '' );\n\n$t_anonymous_account = auth_anonymous_account();\n\nif( $f_return !== '' ) {\n\t$t_return = string_url( string_sanitize_url( $f_return ) );\n\tprint_header_redirect( 'login.php?username=' . $t_anonymous_account . '&perm_login=false&return=' . $t_return );\n} else {\n\tprint_header_redirect( 'login.php?username=' . $t_anonymous_account . '&perm_login=false' );\n}\n"
        },
        {
          "name": "login_cookie_test.php",
          "type": "blob",
          "size": 1.8291015625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Check to see if cookies are working\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nif( auth_is_user_authenticated() ) {\n\t$f_return = gpc_get_string( 'return' );\n\t$c_return = string_prepare_header( $f_return );\n\n\t# If this is the first login for an instance, then redirect to create project page.\n\t# Use lack of projects as a hint for such scenario.\n\tif( is_blank( $f_return ) || $f_return == 'index.php' ) {\n\t\tif( current_user_is_administrator() && project_table_empty() ) {\n\t\t\t$c_return = 'manage_proj_create_page.php';\n\t\t}\n\t}\n\n\t$t_redirect_url = $c_return;\n} else {\n\t$t_redirect_url = auth_login_page( 'cookie_error=1' );\n}\n\nprint_header_redirect( $t_redirect_url, true, true );\n"
        },
        {
          "name": "login_page.php",
          "type": "blob",
          "size": 8.666015625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Login page accepts username and posts results to login_password_page.php,\n * which may take the users credential or redirect to a plugin specific page.\n *\n * This page also offers features like anonymous login and signup.\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses database_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_css( 'login.css' );\n\n$f_error                 = gpc_get_bool( 'error' );\n$f_cookie_error          = gpc_get_bool( 'cookie_error' );\n$f_return                = string_sanitize_url( gpc_get_string( 'return', '' ) );\n$f_username              = gpc_get_string( 'username', '' );\n$f_secure_session        = gpc_get_bool( 'secure_session', false );\n$f_secure_session_cookie = gpc_get_cookie( config_get_global( 'cookie_prefix' ) . '_secure_session', null );\n\n# Set username to blank if invalid to prevent possible XSS exploits\n$t_username = auth_prepare_username( $f_username );\n\nif( config_get_global( 'email_login_enabled' ) ) {\n\t$t_username_label = lang_get( 'username_or_email' );\n} else {\n\t$t_username_label = lang_get( 'username' );\n}\n\n$t_show_signup =\n\t( auth_signup_enabled() ) &&\n\t( LDAP != config_get_global( 'login_method' ) ) &&\n\t( ON == config_get( 'enable_email_notification' ) );\n\n$t_show_anonymous_login = auth_anonymous_enabled();\n\n$t_form_title = lang_get( 'login_title' );\n\n# If user is already authenticated and not anonymous\nif( auth_is_user_authenticated() && !current_user_is_anonymous() ) {\n\t# If return URL is specified redirect to it; otherwise use default page\n\tif( !is_blank( $f_return ) ) {\n\t\tprint_header_redirect( $f_return, false, false, true );\n\t} else {\n\t\tprint_header_redirect( config_get_global( 'default_home_page' ) );\n\t}\n}\n\n# Check for automatic logon methods where we want the logon to just be handled by login.php\nif( auth_automatic_logon_bypass_form() ) {\n\t$t_uri = 'login.php';\n\n\tif( auth_anonymous_enabled() ) {\n\t\t$t_uri = 'login_anon.php';\n\t}\n\n\tif( !is_blank( $f_return ) ) {\n\t\t$t_uri .= '?return=' . string_url( $f_return );\n\t}\n\n\tprint_header_redirect( $t_uri );\n\texit;\n}\n\n# Login page shouldn't be indexed by search engines\nhtml_robots_noindex();\n\nlayout_login_page_begin();\n?>\n\n<div class=\"col-md-offset-3 col-md-6 col-sm-10 col-sm-offset-1\">\n\t<div class=\"login-container\">\n\t\t<div class=\"space-12 hidden-480\"></div>\n\t\t<?php layout_login_page_logo() ?>\n\t\t<div class=\"space-24 hidden-480\"></div>\n<?php\nif( $f_error || $f_cookie_error ) {\n\techo '<div class=\"alert alert-danger\">';\n\n\t# Only echo error message if error variable is set\n\tif( $f_error ) {\n\t\techo '<p>' . lang_get( 'login_error' ) . '</p>';\n\t}\n\n\tif( $f_cookie_error ) {\n\t\techo '<p>' . lang_get( 'login_cookies_disabled' ) . '</p>';\n\t}\n\n\techo '</div>';\n}\n\n$t_warnings = array();\n$t_upgrade_required = false;\n\nif( config_get_global( 'admin_checks' ) == ON ) {\n\t# Check if the admin directory is accessible\n\t$t_admin_dir = __DIR__ . '/admin';\n\t$t_admin_dir_is_accessible = @is_readable( $t_admin_dir );\n\tif( $t_admin_dir_is_accessible ) {\n\t\t$t_warnings[] = lang_get( 'warning_admin_directory_present' );\n\t}\n\n\t# Generate a warning if default user administrator/root is valid.\n\t$t_admin_user_id = user_get_id_by_name( 'administrator' );\n\tif( $t_admin_user_id !== false ) {\n\t\tif( user_is_enabled( $t_admin_user_id ) && auth_does_password_match( $t_admin_user_id, 'root' ) ) {\n\t\t\t$t_warnings[] = lang_get( 'warning_default_administrator_account_present' );\n\t\t}\n\t}\n\n\t# $g_path was defaulted - risk of Host Header injection attack\n\tglobal $g_defaulted_path;\n\tif( $g_defaulted_path ) {\n\t\t$t_warnings[] = lang_get( 'warning_host_header_injection_hazard' );\n\t}\n\n\t/**\n\t * Display Warnings for enabled debugging / developer settings\n\t * @param string $p_type    Message Type.\n\t * @param string $p_setting Setting.\n\t * @param string $p_value   Value.\n\t * @return string\n\t */\n\tfunction debug_setting_message ( $p_type, $p_setting, $p_value ) {\n\t\treturn sprintf( lang_get( 'warning_change_setting' ), $p_setting, $p_value )\n\t\t\t. lang_get( 'word_separator' )\n\t\t\t. lang_get( \"warning_{$p_type}_hazard\" );\n\t}\n\n\t$t_config = 'show_detailed_errors';\n\tif( config_get_global( $t_config ) != OFF ) {\n\t\t$t_warnings[] = debug_setting_message( 'security', $t_config, 'OFF' );\n\t}\n\n\t# since admin directory and db_upgrade lists are available check for missing db upgrades\n\t# if db version is 0, we do not have a valid database.\n\t$t_db_version = config_get( 'database_version', 0, ALL_USERS, ALL_PROJECTS );\n\tif( $t_db_version == 0 ) {\n\t\t$t_warnings[] = lang_get( 'error_database_no_schema_version' );\n\t}\n\n\t# Check for db upgrade for versions > 1.0.0 using new installer and schema\n\tif( $t_admin_dir_is_accessible\n\t\t&& @include_once( $t_admin_dir . '/schema.php' )\n\t) {\n\t\t/** @var array $g_upgrade */\n\t\t$t_upgrades_reqd = count( $g_upgrade ) - 1;\n\n\t\tif( ( 0 < $t_db_version ) &&\n\t\t\t( $t_db_version != $t_upgrades_reqd ) ) {\n\n\t\t\tif( $t_db_version < $t_upgrades_reqd ) {\n\t\t\t\t$t_warnings[] = lang_get( 'error_database_version_out_of_date_2'\n\t\t\t\t);\n\t\t\t\t$t_upgrade_required = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$t_warnings[] = lang_get( 'error_code_version_out_of_date' );\n\t\t\t}\n\t\t}\n\t}\n}\n?>\n\n<div class=\"position-relative\">\n\t<div class=\"signup-box visible widget-box no-border\" id=\"login-box\">\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main\">\n\t\t\t\t<h4 class=\"header lighter bigger\">\n\t\t\t\t\t<?php print_icon( 'fa-sign-in', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo $t_form_title ?>\n\t\t\t\t</h4>\n\t\t\t\t<div class=\"space-10\"></div>\n\t<form id=\"login-form\" method=\"post\" action=\"<?php echo AUTH_PAGE_CREDENTIAL ?>\">\n\t\t<fieldset>\n\n\t\t\t<?php\n\t\t\tif( !is_blank( $f_return ) ) {\n\t\t\t\techo '<input type=\"hidden\" name=\"return\" value=\"', string_html_specialchars( $f_return ), '\" />';\n\t\t\t}\n\n\t\t\tif( $t_upgrade_required ) {\n\t\t\t\techo '<input type=\"hidden\" name=\"install\" value=\"true\" />';\n\t\t\t}\n\n\t\t\t# CSRF protection not required here - form does not result in modifications\n\t\t\t?>\n\n\t\t\t<label for=\"username\" class=\"block clearfix\">\n\t\t\t\t<span class=\"block input-icon input-icon-right\">\n\t\t\t\t\t<input id=\"username\" name=\"username\" type=\"text\" placeholder=\"<?php echo $t_username_label ?>\"\n\t\t\t\t\t\t   size=\"32\" maxlength=\"<?php echo DB_FIELD_SIZE_USERNAME;?>\" value=\"<?php echo string_attribute( $t_username ); ?>\"\n\t\t\t\t\t\t   class=\"form-control autofocus\">\n\t\t\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t\t</span>\n\t\t\t</label>\n\n\t\t\t<div class=\"space-10\"></div>\n\n\t\t\t<input type=\"submit\" class=\"width-40 pull-right btn btn-success btn-inverse bigger-110\" value=\"<?php echo lang_get( 'login' ) ?>\" />\n\t\t</fieldset>\n\t</form>\n\n<?php\n#\n# Do some checks to warn administrators of possible security holes.\n#\n\nif( count( $t_warnings ) > 0 ) {\n\techo '<div class=\"space-10\"></div>';\n\techo '<div class=\"alert alert-warning\">';\n\tforeach( $t_warnings AS $t_warning ) {\n\t\techo '<p>' . $t_warning . '</p>';\n\t}\n\techo '</div>';\n}\n?>\n</div>\n\n<?php\nif( $t_show_anonymous_login || $t_show_signup ) {\n\techo '<div class=\"toolbar center\">';\n\n\tif( $t_show_anonymous_login ) {\n\t\techo '<a class=\"back-to-login-link pull-right\" href=\"login_anon.php?return=' . string_url( $f_return ) . '\">' . lang_get( 'login_anonymously' ) . '</a>';\n\t}\n\n\tif( $t_show_signup ) {\n\t\techo '<a class=\"back-to-login-link pull-left\" href=\"signup_page.php\">', lang_get( 'signup_link' ), '</a>';\n\t}\n\n\techo '<div class=\"clearfix\"></div>';\n\techo '</div>';\n}\n?>\n\n\t\t</div>\n</div>\n</div>\n</div>\n</div>\n\n<?php\nlayout_login_page_end();\n"
        },
        {
          "name": "login_password_page.php",
          "type": "blob",
          "size": 9.6552734375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Login credential page asks user for password then posts to login.php page.\n * If an authentication plugin is installed and has its own credential page,\n * this page will re-direct to it.\n *\n * This page also offers features like remember me, secure session, and forgot password.\n *\n * @package MantisBT\n * @copyright Copyright MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses database_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_css( 'login.css' );\n\n$f_error                 = gpc_get_bool( 'error' );\n$f_cookie_error          = gpc_get_bool( 'cookie_error' );\n$f_return                = string_sanitize_url( gpc_get_string( 'return', '' ) );\n$f_username              = trim( gpc_get_string( 'username', '' ) );\n$f_reauthenticate        = gpc_get_bool( 'reauthenticate', false );\n$f_perm_login            = gpc_get_bool( 'perm_login', false );\n$f_secure_session        = gpc_get_bool( 'secure_session', false );\n$f_secure_session_cookie = gpc_get_cookie( config_get_global( 'cookie_prefix' ) . '_secure_session', null );\n\n# Set username to blank if invalid to prevent possible XSS exploits\n$t_username = auth_prepare_username( $f_username );\n\nif( is_blank( $t_username ) ) {\n\t$t_query_args = array(\n\t\t'error' => 1,\n\t\t'return' => $f_return,\n\t);\n\n\t$t_query_text = http_build_query( $t_query_args, '', '&' );\n\n\t$t_redirect_url = auth_login_page( $t_query_text );\n\tprint_header_redirect( $t_redirect_url );\n}\n\n# Get the user id and based on the user decide whether to continue with native password credential\n# page or one provided by a plugin.\n$t_user_id = auth_get_user_id_from_login_name( $t_username );\n# User id could be false if the user does not exist in DB, should be calling auth_credential_page\n# regardless if the user exists or not to give the plugin an opportunity to handle non-existent\n# users per #29517\n$t_should_redirect = AUTH_PAGE_CREDENTIAL != ( $t_user_id !== false\n\t\t? auth_credential_page( '', $t_user_id )\n\t\t: auth_credential_page( '', NO_USER, $t_username ) );\nif( $t_should_redirect ) {\n\t$t_query_args = array(\n\t\t'username' => $t_username,\n\t\t'cookie_error' => $f_cookie_error,\n\t\t'reauthenticate' => $f_reauthenticate,\n\t);\n\n\tif( !is_blank( $f_error ) ) {\n\t\t$t_query_args['error'] = $f_error;\n\t}\n\n\tif( !is_blank( $f_cookie_error ) ) {\n\t\t$t_query_args['cookie_error'] = $f_cookie_error;\n\t}\n\n\t$t_query_text = http_build_query( $t_query_args, '', '&' );\n\n\t# Determine the credential page URL based on user id (if it exists) or username\n\t$t_redirect_url = $t_user_id !== false\n\t\t? auth_credential_page( $t_query_text, $t_user_id )\n\t\t: auth_credential_page( $t_query_text, NO_USER, $t_username );\n\tprint_header_redirect( $t_redirect_url );\n}\n\n$t_session_validation = !$f_reauthenticate && ( ON == config_get_global( 'session_validation' ) );\n\n$t_show_reset_password = !$f_reauthenticate &&\n\t( LDAP != config_get_global( 'login_method' ) ) &&\n\t( ON == config_get( 'lost_password_feature' ) ) &&\n\t( ON == config_get( 'send_reset_password' ) ) &&\n\t( ON == config_get( 'enable_email_notification' ) );\n\n$t_show_remember_me = !$f_reauthenticate && auth_allow_perm_login( $t_user_id, $t_username );\n\n$t_form_title = $f_reauthenticate ? lang_get( 'reauthenticate_title' ) : lang_get( 'login_title' );\n\n# If user is already authenticated and not anonymous\nif( auth_is_user_authenticated() && !current_user_is_anonymous() && !$f_reauthenticate) {\n\t# If return URL is specified redirect to it; otherwise use default page\n\tif( !is_blank( $f_return ) ) {\n\t\tprint_header_redirect( $f_return, false, false, true );\n\t} else {\n\t\tprint_header_redirect( config_get_global( 'default_home_page' ) );\n\t}\n}\n\n# Determine if secure_session should default on or off?\n# - If no errors, and no cookies set, default to on.\n# - If no errors, but cookie is set, use the cookie value.\n# - If errors, use the value passed in.\nif( $t_session_validation ) {\n\tif( !$f_error && !$f_cookie_error ) {\n\t\t$t_default_secure_session = is_null( $f_secure_session_cookie ) ? true : $f_secure_session_cookie;\n\t} else {\n\t\t$t_default_secure_session = $f_secure_session;\n\t}\n}\n\n# Login page shouldn't be indexed by search engines\nhtml_robots_noindex();\n\nlayout_login_page_begin();\n\n?>\n\n<div class=\"col-md-offset-3 col-md-6 col-sm-10 col-sm-offset-1\">\n\t<div class=\"login-container\">\n\t\t<div class=\"space-12 hidden-480\"></div>\n\t\t<?php layout_login_page_logo() ?>\n\t\t<div class=\"space-24 hidden-480\"></div>\n<?php\nif( $f_error || $f_cookie_error || $f_reauthenticate ) {\n\techo '<div class=\"alert alert-danger\">';\n\n\tif( $f_reauthenticate ) {\n\t\techo '<p>' . lang_get( 'reauthenticate_message' ) . '</p>';\n\t}\n\n\t# Only echo error message if error variable is set\n\tif( $f_error ) {\n\t\techo '<p>' . lang_get( 'login_error' ) . '</p>';\n\t}\n\n\tif( $f_cookie_error ) {\n\t\techo '<p>' . lang_get( 'login_cookies_disabled' ) . '</p>';\n\t}\n\n\techo '</div>';\n}\n\n$t_upgrade_required = false;\nif( config_get_global( 'admin_checks' ) == ON && file_exists( __DIR__ .'/admin/.' ) ) {\n\t# since admin directory and db_upgrade lists are available check for missing db upgrades\n\t# if db version is 0, we do not have a valid database.\n\t$t_db_version = config_get( 'database_version', 0, ALL_USERS, ALL_PROJECTS );\n\tif( $t_db_version == 0 ) {\n\t\t$t_warnings[] = lang_get( 'error_database_no_schema_version' );\n\t}\n\n\t# Check for db upgrade for versions > 1.0.0 using new installer and schema\n\trequire_once( 'admin/schema.php' );\n\t$t_upgrades_reqd = count( $g_upgrade ) - 1;\n\n\tif( ( 0 < $t_db_version ) &&\n\t\t\t( $t_db_version != $t_upgrades_reqd ) ) {\n\n\t\tif( $t_db_version < $t_upgrades_reqd ) {\n\t\t\t$t_upgrade_required = true;\n\t\t}\n\t}\n}\n?>\n\n<div class=\"position-relative\">\n\t<div class=\"signup-box visible widget-box no-border\" id=\"login-box\">\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main\">\n\t\t\t\t<h4 class=\"header lighter bigger\">\n\t\t\t\t\t<?php print_icon( 'fa-sign-in', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo $t_form_title ?>\n\t\t\t\t</h4>\n\t\t\t\t<div class=\"space-10\"></div>\n\t<form id=\"login-form\" method=\"post\" action=\"login.php\">\n\t\t<fieldset>\n\n\t\t\t<?php\n\t\t\tif( !is_blank( $f_return ) ) {\n\t\t\t\techo '<input type=\"hidden\" name=\"return\" value=\"', string_html_specialchars( $f_return ), '\" />';\n\t\t\t}\n\n\t\t\tif( $t_upgrade_required ) {\n\t\t\t\techo '<input type=\"hidden\" name=\"install\" value=\"true\" />';\n\t\t\t}\n\n\n\t\t\techo sprintf( lang_get( 'enter_password' ), string_html_specialchars( $t_username ) );\n\n\t\t\t# CSRF protection not required here - form does not result in modifications\n\t\t\t?>\n\t\t\t<input hidden readonly type=\"text\" name=\"username\" class=\"hidden\" tabindex=\"-1\" value=\"<?php echo string_html_specialchars( $t_username ) ?>\" id=\"hidden_username\" />\n\t\t\t<label for=\"password\" class=\"block clearfix\">\n\t\t\t\t<span class=\"block input-icon input-icon-right\">\n\t\t\t\t\t<input id=\"password\" name=\"password\" type=\"password\" placeholder=\"<?php echo lang_get( 'password' ) ?>\"\n\t\t\t\t\t\t   size=\"32\" maxlength=\"<?php echo auth_get_password_max_size(); ?>\"\n\t\t\t\t\t\t   class=\"form-control autofocus\">\n\t\t\t\t\t<?php print_icon( 'fa-lock', 'ace-icon' ); ?>\n\t\t\t\t</span>\n\t\t\t</label>\n\n\t\t\t<?php if( $t_show_remember_me ) { ?>\n\t\t\t\t<div class=\"clearfix\">\n\t\t\t\t\t<label for=\"remember-login\" class=\"inline\">\n\t\t\t\t\t\t<input id=\"remember-login\" type=\"checkbox\" name=\"perm_login\" class=\"ace\" <?php echo ( $f_perm_login ? 'checked=\"checked\" ' : '' ) ?> />\n\t\t\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'save_login' ) ?></span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t<?php } ?>\n\t\t\t<?php if( $t_session_validation ) { ?>\n\t\t\t\t<div class=\"clearfix\">\n\t\t\t\t\t<label for=\"secure-session\" class=\"inline\">\n\t\t\t\t\t\t<input id=\"secure-session\" type=\"checkbox\" name=\"secure_session\" class=\"ace\" <?php echo ( $t_default_secure_session ? 'checked=\"checked\" ' : '' ) ?> />\n\t\t\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'secure_session_long' ) ?></span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t<?php } ?>\n\n\t\t\t<?php if( $f_reauthenticate ) {\n\t\t\t\techo '<input id=\"reauthenticate\" type=\"hidden\" name=\"reauthenticate\" value=\"1\" />';\n\t\t\t} ?>\n\n\t\t\t<div class=\"space-10\"></div>\n\n\t\t\t<input type=\"submit\" class=\"width-40 pull-right btn btn-success btn-inverse bigger-110\" value=\"<?php echo lang_get( 'login' ) ?>\" />\n\t\t\t<div class=\"clearfix\"></div>\n\t\t\t<?php\n\t\t\t# lost password feature disabled or reset password via email disabled -> stop here!\n\t\t\tif( $t_show_reset_password ) {\n\t\t\t\techo '<a class=\"pull-right\" href=\"lost_pwd_page.php?username=', urlencode( $t_username ), '\">', lang_get( 'lost_password_link' ), '</a>';\n\t\t\t}\n\t\t\t?>\n\t\t</fieldset>\n\t</form>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n\n<?php\nlayout_login_page_end();\n"
        },
        {
          "name": "login_select_proj_page.php",
          "type": "blob",
          "size": 3.6904296875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Allows the user to select a project that is visible to him\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nauth_ensure_user_authenticated();\n\n$f_ref = string_sanitize_url( gpc_get_string( 'ref', '' ) );\n\nif( count( current_user_get_accessible_projects() ) == 1 ) {\n\t$t_project_ids = current_user_get_accessible_projects();\n\t$t_project_id = (int)$t_project_ids[0];\n\tif( count( current_user_get_accessible_subprojects( $t_project_id ) ) == 0 ) {\n\t\t$t_ref_urlencoded = string_url( $f_ref );\n\t\tprint_header_redirect( 'set_project.php?project_id=' . $t_project_id . '&ref=' . $t_ref_urlencoded, true );\n\t\t# print_header_redirect terminates script execution\n\t}\n}\n\nlayout_page_header( lang_get( 'select_project_button' ) );\n\nlayout_page_begin();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\n<!-- Project Select Form BEGIN -->\n<div id=\"select-project-div\" class=\"form-container\">\n\t<form id=\"select-project-form\" method=\"post\" action=\"set_project.php\">\n\t\t<?php # CSRF protection not required here - form does not result in modifications ?>\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-puzzle-piece', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'choose_project' ) ?>\n\t\t\t</h4>\n\t\t</div>\n\t<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<input type=\"hidden\" name=\"ref\" value=\"<?php echo string_html_specialchars( $f_ref ) ?>\" />\n\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'select_project_button' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"select-project-id\" name=\"project_id\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_project_option_list( ALL_PROJECTS, false, null, true, true ) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'make_default' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"set-default\" name=\"make_default\" />\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</fieldset>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'select_project_button') ?>\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t</form>\n</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "logout_page.php",
          "type": "blob",
          "size": 1.3134765625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Logout Page\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'print_api.php' );\n\n# Cache the current logout redirect page as it will be cleared by auth_logout()\n$t_logout_redirect = auth_logout_redirect_page();\n\nauth_logout();\n\nprint_header_redirect( $t_logout_redirect, true, false );\n"
        },
        {
          "name": "lost_pwd.php",
          "type": "blob",
          "size": 3.509765625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Lost Password Requests\n *\n * @package MantisBT\n * @author Marcello Scata' <marcelloscata at users.sourceforge.net> ITALY\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses email_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'email_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'lost_pwd' );\n\n# lost password feature disabled or reset password via email disabled -> stop here!\nif( OFF == config_get( 'lost_password_feature' ) ||\n\tOFF == config_get( 'send_reset_password' ) ||\n\tOFF == config_get( 'enable_email_notification' ) ) {\n\ttrigger_error( ERROR_LOST_PASSWORD_NOT_ENABLED, ERROR );\n}\n\n# force logout on the current user if already authenticated\nif( auth_is_user_authenticated() ) {\n\tauth_logout();\n}\n\n$f_username = gpc_get_string( 'username' );\n$f_email = gpc_get_string( 'email' );\n\nemail_ensure_valid( $f_email );\n\n# @todo Consider moving this query to user_api.php\n$t_query = 'SELECT id FROM {user} WHERE username = ' . db_param() . ' AND email = ' . db_param() . ' AND enabled=' . db_param();\n$t_result = db_query( $t_query, array( $f_username, $f_email, true ) );\n$t_row = db_fetch_array( $t_result );\n\nif( !$t_row ) {\n\ttrigger_error( ERROR_LOST_PASSWORD_NOT_MATCHING_DATA, ERROR );\n}\n\nif( is_blank( $f_email ) ) {\n\ttrigger_error( ERROR_LOST_PASSWORD_NO_EMAIL_SPECIFIED, ERROR );\n}\n\n$t_user_id = $t_row['id'];\n\nif( user_is_protected( $t_user_id ) ) {\n\ttrigger_error( ERROR_PROTECTED_ACCOUNT, ERROR );\n}\n\nif( !user_is_lost_password_request_allowed( $t_user_id ) ) {\n\ttrigger_error( ERROR_LOST_PASSWORD_MAX_IN_PROGRESS_ATTEMPTS_REACHED, ERROR );\n}\n\n$t_confirm_hash = auth_generate_confirm_hash( $t_user_id );\ntoken_set( TOKEN_ACCOUNT_ACTIVATION, $t_confirm_hash, TOKEN_EXPIRY_ACCOUNT_ACTIVATION, $t_user_id );\nemail_send_confirm_hash_url( $t_user_id, $t_confirm_hash );\n\nuser_increment_lost_password_in_progress_count( $t_user_id );\n\nform_security_purge( 'lost_pwd' );\n\nlayout_page_header();\nlayout_page_begin();\n\nhtml_operation_successful(\n\tauth_login_page(),\n\t'<p class=\"bold bigger-110\">' . lang_get( 'lost_password_done_title' ) . '</p>'\n\t. lang_get( 'reset_request_in_progress_msg' )\n);\n\nlayout_page_end();\n"
        },
        {
          "name": "lost_pwd_page.php",
          "type": "blob",
          "size": 4.7353515625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Lost Password Functionality\n *\n * @package MantisBT\n * @author Marcello Scata' <marcelloscata at users.sourceforge.net> ITALY\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_css( 'login.css' );\n\n# lost password feature disabled or reset password via email disabled -> stop here!\nif( LDAP == config_get_global( 'login_method' ) ||\n\tOFF == config_get( 'lost_password_feature' ) ||\n\tOFF == config_get( 'send_reset_password' )  ||\n\tOFF == config_get( 'enable_email_notification' ) ) {\n\ttrigger_error( ERROR_LOST_PASSWORD_NOT_ENABLED, ERROR );\n}\n\n$f_username = gpc_get_string( 'username', '' );\n$t_username = auth_prepare_username( $f_username );\n\n# Determine whether the username or password field should receive automatic focus.\n$t_username_field_autofocus = 'autofocus';\n$t_email_field_autofocus = '';\nif( $t_username ) {\n\t$t_username_field_autofocus = '';\n\t$t_email_field_autofocus = 'autofocus';\n}\n\n# don't index lost password page\nhtml_robots_noindex();\n\nlayout_login_page_begin();\n?>\n\n<div class=\"col-md-offset-3 col-md-6 col-sm-10 col-sm-offset-1\">\n<div id=\"lost-password-div\" class=\"login-container\">\n\t<div class=\"space-12 hidden-480\"></div>\n\t<?php layout_login_page_logo() ?>\n\t<div class=\"space-24 hidden-480\"></div>\n\t<div class=\"position-relative\">\n\t<div class=\"signup-box visible widget-box no-border\" id=\"login-box\">\n\t<div class=\"widget-body\">\n\t<div class=\"widget-main\">\n\t\t<h4 class=\"header lighter bigger\">\n\t\t\t<?php print_icon( 'fa-key', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'lost_password_title' ) ?>\n\t\t</h4>\n\t\t<div class=\"space-10\"></div>\n\t<form id=\"lost-password-form\" method=\"post\" action=\"lost_pwd.php\">\n\t\t<fieldset>\n\t\t\t<?php\n\t\t\techo form_security_field( 'lost_pwd' );\n\n\t\t\t$t_allow_passwd = auth_can_set_password();\n\t\t\tif( $t_allow_passwd ) { ?>\n\t\t\t\t<label for=\"username\" class=\"block clearfix\">\n\t\t\t\t<span class=\"block input-icon input-icon-right\">\n\t\t\t\t\t<input id=\"username\" name=\"username\" type=\"text\"\n\t\t\t\t\t\tplaceholder=\"<?php echo lang_get( 'username' ) ?>\"\n                        value=\"<?php echo string_html_specialchars( $t_username ) ?>\"\n                        size=\"32\" maxlength=\"<?php echo DB_FIELD_SIZE_USERNAME;?>\" class=\"form-control <?php echo $t_username_field_autofocus ?>\">\n\t\t\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<label for=\"email-field\" class=\"block clearfix\">\n\t\t\t\t<span class=\"block input-icon input-icon-right\">\n\t\t\t\t\t<input id=\"email-field\" name=\"email\" type=\"text\"\n\t\t\t\t\t\t   placeholder=\"<?php echo lang_get( 'email' ) ?>\"\n\t\t\t\t\t\t   size=\"32\" maxlength=\"64\" class=\"form-control <?php echo $t_email_field_autofocus; ?>\">\n\t\t\t\t\t<?php print_icon( 'fa-envelope', 'ace-icon' ); ?>\n\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<div class=\"space-10\"></div>\n\t\t\t\t<?php echo lang_get( 'lost_password_info' ); ?>\n\t\t\t\t<div class=\"space-10\"></div>\n\t\t\t\t<input type=\"submit\" class=\"width-40 pull-right btn btn-success btn-inverse bigger-110\"  value=\"<?php echo lang_get( 'submit' ) ?>\" />\n\t\t\t<?php\n\t\t\t} else {\n\t\t\t\techo '<div class=\"space-10\"></div>';\n\t\t\t\techo '<div class=\"alert alert-danger\">';\n\t\t\t\techo auth_password_managed_elsewhere_message();\n\t\t\t\techo '</div>';\n\t\t\t} ?>\n\t\t</fieldset>\n\t</form>\n\t</div>\n\t\t<div class=\"toolbar center\">\n\t\t\t<a class=\"back-to-login-link pull-left\" href=\"<?php echo AUTH_PAGE_USERNAME ?>\"><?php echo lang_get( 'login' ); ?></a>\n\t\t\t<?php if( auth_signup_enabled() ) { ?>\n\t\t\t<a class=\"back-to-login-link pull-right\" href=\"signup_page.php\"><?php echo lang_get( 'signup_link' ); ?></a>\n\t\t\t<?php } ?>\n\t\t\t<div class=\"clearfix\"></div>\n\t\t</div>\n\t</div>\n\t</div>\n\t</div>\n</div>\n\n<?php\nlayout_login_page_end();\n"
        },
        {
          "name": "main_page.php",
          "type": "blob",
          "size": 4.8837890625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This is the first page a user sees when they login to the bugtracker\n * News is displayed which can notify users of any important changes\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses news_api.php\n * @uses print_api.php\n * @uses rss_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'news_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'rss_api.php' );\n\naccess_ensure_project_level( config_get( 'view_bug_threshold' ) );\n\n$f_offset = gpc_get_int( 'offset', 0 );\n\n$t_project_id = helper_get_current_project();\n\n$t_rss_enabled = config_get( 'rss_enabled' );\n\nif( OFF != $t_rss_enabled && news_is_enabled() ) {\n\t$t_rss_link = rss_get_news_feed_url( $t_project_id );\n\thtml_set_rss_link( $t_rss_link );\n}\n\nlayout_page_header( lang_get( 'main_link' ) );\n\nlayout_page_begin();\n\necho '<div class=\"col-md-6 col-xs-12\">';\n\nif( !current_user_is_anonymous() ) {\n\t$t_current_user_id = auth_get_current_user_id();\n\t$t_hide_status = config_get( 'bug_resolved_status_threshold' );\n\techo '<span class=\"bigger-120\">';\n\techo lang_get( 'open_and_assigned_to_me_label' ) . lang_get( 'word_separator' );\n\tprint_link( \"view_all_set.php?type=\" . FILTER_ACTION_PARSE_NEW\n\t\t. \"&handler_id=$t_current_user_id&hide_status=$t_hide_status\",\n\t\tcurrent_user_get_assigned_open_bug_count()\n\t);\n\n\techo '<br />';\n\n\techo lang_get( 'open_and_reported_to_me_label' ) . lang_get( 'word_separator' );\n\tprint_link( \"view_all_set.php?type=\" . FILTER_ACTION_PARSE_NEW\n\t\t. \"&reporter_id=$t_current_user_id&hide_status=$t_hide_status\",\n\t\tcurrent_user_get_reported_open_bug_count()\n\t);\n\n\techo '<br />';\n\n\techo lang_get( 'last_visit_label' ) . lang_get( 'word_separator' );\n\techo date( config_get( 'normal_date_format' ), current_user_get_field( 'last_visit' ) );\n\techo '</span>';\n}\n\necho '</div>';\necho '<div class=\"col-md-6 col-xs-12\">';\n\nif( news_is_enabled() && access_has_project_level( config_get( 'manage_news_threshold' ) ) ) {\n\t# Admin can edit news for All Projects (site-wide)\n\tif( ALL_PROJECTS != helper_get_current_project() || current_user_is_administrator() ) {\n\t\tprint_link_button( 'news_menu_page.php', lang_get( 'edit_news_link' ), 'pull-right');\n\t} else {\n\t\tprint_link_button( 'login_select_proj_page.php', lang_get( 'edit_news_link' ), 'pull-right');\n\t}\n}\necho '</div>';\n\necho '<div class=\"col-md-12 col-xs-12\">';\n\nif( news_is_enabled() ) {\n\t$t_news_rows = news_get_limited_rows( $f_offset, $t_project_id );\n\t$t_news_count = count( $t_news_rows );\n\n\tif( $t_news_count ) {\n\t\techo '<div id=\"news-items\">';\n\t\t# Loop through results\n\t\tfor( $i = 0; $i < $t_news_count; $i++ ) {\n\t\t\t$t_row = $t_news_rows[$i];\n\n\t\t\t# only show VS_PRIVATE posts to configured threshold and above\n\t\t\tif( ( VS_PRIVATE == $t_row['view_state'] ) &&\n\t\t\t\t !access_has_project_level( config_get( 'private_news_threshold' ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tprint_news_entry_from_row( $t_row );\n\t\t}  # end for loop\n\t\techo '</div>';\n\t}\n\n\techo '<div class=\"space-10\"></div>';\n\techo '<div class=\"btn-group\">';\n\n\tprint_link_button( 'news_list_page.php', lang_get( 'archives' ) );\n\t$t_news_view_limit = config_get( 'news_view_limit' );\n\t$f_offset_next = $f_offset + $t_news_view_limit;\n\t$f_offset_prev = $f_offset - $t_news_view_limit;\n\n\tif( $f_offset_prev >= 0 ) {\n\t\tprint_link_button( 'main_page.php?offset=' . $f_offset_prev, lang_get( 'newer_news_link' ) );\n\t}\n\n\tif( $t_news_count == $t_news_view_limit ) {\n\t\tprint_link_button( 'main_page.php?offset=' . $f_offset_next, lang_get( 'older_news_link' ) );\n\t}\n\n\tif( OFF != $t_rss_enabled ) {\n\t\tprint_link_button( $t_rss_link, lang_get( 'rss' ) );\n\t}\n\n\techo '</div>';\n}\necho '</div>';\nlayout_page_end();\n"
        },
        {
          "name": "manage_columns_copy.php",
          "type": "blob",
          "size": 4.111328125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Copy Columns between projects\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses columns_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'columns_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_columns_copy' );\n\nauth_reauthenticate();\n\n$f_project_id\t\t= gpc_get_int( 'project_id' );\n$f_other_project_id\t= gpc_get_int( 'other_project_id' );\n$f_copy_from\t\t= gpc_get_bool( 'copy_from' );\n$f_copy_to\t\t\t= gpc_get_bool( 'copy_to' );\n$f_manage_page\t\t= gpc_get_bool( 'manage_page' );\n\nif( $f_copy_from ) {\n\t$t_src_project_id = $f_other_project_id;\n\t$t_dst_project_id = $f_project_id;\n} else if( $f_copy_to ) {\n\t$t_src_project_id = $f_project_id;\n\t$t_dst_project_id = $f_other_project_id;\n} else {\n\ttrigger_error( ERROR_GENERIC, ERROR );\n}\n\n# only admins can set global defaults.for ALL_PROJECT\nif( $f_manage_page && $t_dst_project_id == ALL_PROJECTS && !current_user_is_administrator() ) {\n\taccess_denied();\n}\n\n# only MANAGERS can set global defaults.for a project\nif( $f_manage_page && $t_dst_project_id != ALL_PROJECTS ) {\n\taccess_ensure_project_level( MANAGER, $t_dst_project_id );\n}\n\n# user should only be able to set columns for a project that is accessible.\nif( $t_dst_project_id != ALL_PROJECTS ) {\n\taccess_ensure_project_level( config_get( 'view_bug_threshold', null, null, $t_dst_project_id ), $t_dst_project_id );\n}\n\n# Calculate the user id to set the configuration for.\nif( $f_manage_page ) {\n\t$t_user_id = NO_USER;\n} else {\n\t$t_user_id = auth_get_current_user_id();\n}\n\n$t_all_columns = columns_get_all();\n$t_default = null;\n\n$t_view_issues_page_columns = config_get( 'view_issues_page_columns', $t_default, $t_user_id, $t_src_project_id );\n$t_view_issues_page_columns = columns_remove_invalid( $t_view_issues_page_columns, $t_all_columns );\n\n$t_print_issues_page_columns = config_get( 'print_issues_page_columns', $t_default, $t_user_id, $t_src_project_id );\n$t_print_issues_page_columns = columns_remove_invalid( $t_print_issues_page_columns, $t_all_columns );\n\n$t_csv_columns = config_get( 'csv_columns', $t_default, $t_user_id, $t_src_project_id );\n$t_csv_columns = columns_remove_invalid( $t_csv_columns, $t_all_columns );\n\n$t_excel_columns = config_get( 'excel_columns', $t_default, $t_user_id, $t_src_project_id );\n$t_excel_columns = columns_remove_invalid( $t_excel_columns, $t_all_columns );\n\nconfig_set( 'view_issues_page_columns', $t_view_issues_page_columns, $t_user_id, $t_dst_project_id );\nconfig_set( 'print_issues_page_columns', $t_print_issues_page_columns, $t_user_id, $t_dst_project_id );\nconfig_set( 'csv_columns', $t_csv_columns, $t_user_id, $t_dst_project_id );\nconfig_set( 'excel_columns', $t_excel_columns, $t_user_id, $t_dst_project_id );\n\nform_security_purge( 'manage_columns_copy' );\n\n$t_redirect_url = $f_manage_page ? 'manage_config_columns_page.php' : 'account_manage_columns_page.php';\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_columns_inc.php",
          "type": "blob",
          "size": 8.33203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Columns include file\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses columns_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nif( !defined( 'MANAGE_COLUMNS_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'columns_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\n$t_manage_page = defined( 'MANAGE_COLUMNS' );\n$t_account_page = defined( 'ACCOUNT_COLUMNS' );\n\n$t_project_id = helper_get_current_project();\n\n# Calculate the user id to set the configuration for.\nif( $t_manage_page ) {\n\t$t_user_id = NO_USER;\n} else {\n\t$t_user_id = auth_get_current_user_id();\n}\n\n$t_columns = columns_get_all( $t_project_id );\n$t_all = implode( ', ', $t_columns );\n\n$t_columns = helper_get_columns_to_view( COLUMNS_TARGET_CSV_PAGE, false, $t_user_id );\n$t_csv = implode( ', ', $t_columns );\n\n$t_columns = helper_get_columns_to_view( COLUMNS_TARGET_VIEW_PAGE, false, $t_user_id );\n$t_view_issues = implode( ', ', $t_columns );\n\n$t_columns = helper_get_columns_to_view( COLUMNS_TARGET_PRINT_PAGE, false, $t_user_id );\n$t_print_issues = implode( ', ', $t_columns );\n\n$t_columns = helper_get_columns_to_view( COLUMNS_TARGET_EXCEL_PAGE, false, $t_user_id );\n$t_excel = implode( ', ', $t_columns );\n\nif( $t_account_page ) {\n\tprint_account_menu( 'account_manage_columns_page.php' );\n}\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-columns', 'ace-icon' ); ?>\n\t\t<?php echo lang_get( 'manage_columns_config' ) ?>\n\t</h4>\n</div>\n\n<div id=\"manage-columns-div\" class=\"form-container\">\n\t<form id=\"manage-columns-form\" method=\"post\" action=\"manage_config_columns_set.php\">\n\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_config_columns_set' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $t_project_id ?>\" />\n\t\t\t<input type=\"hidden\" name=\"form_page\" value=\"<?php echo $t_account_page ? 'account' : 'manage'; ?>\" />\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'all_columns_title' )?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t\t<textarea class=\"form-control\"  id=\"all-columns\" <?php echo helper_get_tab_index() ?> name=\"all_columns\" readonly=\"readonly\" cols=\"80\" rows=\"5\">\n<?php echo $t_all ?>\n</textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'view_issues_columns_title' )?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"view-issues-columns\" <?php echo helper_get_tab_index() ?> name=\"view_issues_columns\" cols=\"80\" rows=\"5\">\n<?php echo $t_view_issues ?>\n</textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'print_issues_columns_title' )?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"print-issues-columns\" <?php echo helper_get_tab_index() ?> name=\"print_issues_columns\" cols=\"80\" rows=\"5\">\n<?php echo $t_print_issues ?>\n</textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'csv_columns_title' )?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"csv-columns\" <?php echo helper_get_tab_index() ?> name=\"csv_columns\" cols=\"80\" rows=\"5\">\n<?php echo $t_csv ?>\n</textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'excel_columns_title' )?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"excel-columns\" <?php echo helper_get_tab_index() ?> name=\"excel_columns\" cols=\"80\" rows=\"5\">\n<?php echo $t_excel ?>\n</textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</fieldset>\n\t\t</table>\n\t</div>\n\t</div>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ); ?></span>\n\t\t\t<?php\n\t\t\tif( $t_account_page ) {\n\t\t\t\tif( $t_project_id == ALL_PROJECTS ) { ?>\n\t\t\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"submit\" <?php echo helper_get_tab_index() ?> class=\"btn btn-primary btn-sm btn-white btn-round\" name=\"update_columns_as_my_default\" value=\"<?php echo lang_get( 'update_columns_as_my_default' ) ?>\" /><?php\n\t\t\t\t} else { ?>\n\t\t\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"submit\" <?php echo helper_get_tab_index() ?> class=\"btn btn-primary btn-sm btn-white btn-round\" name=\"update_columns_for_current_project\" value=\"<?php echo lang_get( 'update_columns_for_current_project' ) ?>\" /><?php\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t# All Projects: only if admin can setup global default columns.\n\t\t\t# Specific Project: can set columns for that.  Switch to All Projects to set for all projects.\n\t\t\tif( $t_manage_page ) { ?>\n\t\t\t\t<?php\n\t\t\t\tif( $t_project_id != ALL_PROJECTS ) { ?>\n\t\t\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\" name=\"update_columns_as_global_default\" value=\"<?php echo lang_get( 'update_columns_for_current_project' ) ?>\" /><?php\n\t\t\t\t} else if( current_user_is_administrator() ) { ?>\n\t\t\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\" name=\"update_columns_as_global_default\" value=\"<?php echo lang_get( 'update_columns_as_global_default' ) ?>\" /><?php\n\t\t\t\t} ?>\n\t\t\t\t<?php\n\t\t\t} ?>\n\t</div>\n\t</div>\n\t</div>\n\t</form>\n</div>\n\n<div class=\"space-10\"></div>\n\n<div id=\"manage-columns-copy-div\" class=\"form-container\">\n\t<form id=\"manage-columns-copy-form\" method=\"post\" action=\"manage_columns_copy.php\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_columns_copy' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $t_project_id ?>\" />\n\t\t\t<input type=\"hidden\" name=\"manage_page\" value=\"<?php echo $t_manage_page ?>\" />\n\n\t\t\t<select name=\"other_project_id\" class=\"input-sm\">\n\t\t\t\t<?php print_project_option_list( null, true, $t_project_id ); ?>\n\t\t\t</select>\n\n\t\t\t<?php # Skip \"Copy From\" if the current project is ALL PROJECTS, the current page is management page, and the user is not administrator\n\t\t\tif( !$t_manage_page || ( $t_project_id != ALL_PROJECTS ) || current_user_is_administrator() ) { ?>\n\t\t\t<input type=\"submit\" name=\"copy_from\" class=\"btn btn-primary btn-sm btn-white btn-round\" value=\"<?php echo lang_get( 'copy_columns_from' ) ?>\" /><?php\n\t\t\t} ?>\n\t\t\t<input type=\"submit\" name=\"copy_to\" class=\"btn btn-primary btn-sm btn-white btn-round\" value=\"<?php echo lang_get( 'copy_columns_to' ) ?>\" />\n\t\t</fieldset>\n\t</form>\n</div>\n\n<?php\nif( $t_account_page ) {\n?>\n<div class=\"space-10\"></div>\n<div class=\"form-container\">\n\t<form method=\"post\" action=\"manage_config_columns_reset.php\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_config_columns_reset' ) ?>\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'reset_columns_configuration' ) ?>\" />\n\t\t</fieldset>\n\t</form>\n</div>\n<?php\n}\necho '</div>';\n"
        },
        {
          "name": "manage_config_columns_page.php",
          "type": "blob",
          "size": 1.5673828125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * View Column Fields Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses html_api.php\n * @uses lang_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\n\nauth_reauthenticate();\n\nlayout_page_header( lang_get( 'manage_columns_config' ) );\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( PAGE_CONFIG_DEFAULT );\nprint_manage_config_menu( 'manage_config_columns_page.php' );\n\n\n# Define constant that will be checked by the include page.\ndefine( 'MANAGE_COLUMNS', true );\n\ndefine( 'MANAGE_COLUMNS_INC_ALLOW', true );\ninclude( __DIR__ . '/manage_columns_inc.php' );\n\nlayout_page_end();\n"
        },
        {
          "name": "manage_config_columns_reset.php",
          "type": "blob",
          "size": 1.7294921875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Reset Column Configuration\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_config_columns_reset' );\n\n$t_user_id = auth_get_current_user_id();\n\nconfig_delete_for_user( 'view_issues_page_columns', $t_user_id );\nconfig_delete_for_user( 'print_issues_page_columns', $t_user_id );\nconfig_delete_for_user( 'csv_columns', $t_user_id );\nconfig_delete_for_user( 'excel_columns', $t_user_id );\n\nform_security_purge( 'manage_config_columns_reset' );\n\nprint_header_redirect( 'account_manage_columns_page.php' );\n"
        },
        {
          "name": "manage_config_columns_set.php",
          "type": "blob",
          "size": 4.455078125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Set Columns Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses columns_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'columns_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\n\nform_security_validate( 'manage_config_columns_set' );\n\n$f_project_id = gpc_get_int( 'project_id' );\n$f_view_issues_columns = gpc_get_string( 'view_issues_columns' );\n$f_print_issues_columns = gpc_get_string( 'print_issues_columns' );\n$f_csv_columns = gpc_get_string( 'csv_columns' );\n$f_excel_columns = gpc_get_string( 'excel_columns' );\n$f_form_page = gpc_get_string( 'form_page' );\n\nif( $f_project_id != ALL_PROJECTS ) {\n\tproject_ensure_exists( $f_project_id );\n}\n\n$g_project_override = $f_project_id;\n$t_project_id = $f_project_id;\n\n$t_account_page = $f_form_page === 'account';\n\nif( $f_project_id == ALL_PROJECTS ) {\n\tif( !$t_account_page ) {\n\t\t# From manage page, only admins can set global defaults for ALL_PROJECT\n\t\tif( !current_user_is_administrator() ) {\n\t\t\taccess_denied();\n\t\t}\n\t}\n} else {\n\tif( $t_account_page ) {\n\t\taccess_ensure_project_level( config_get( 'view_bug_threshold' ), $f_project_id );\n\t} else {\n\t\taccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\n\t}\n}\n\n# For Account Column Customization, use current user.\n# For Manage Column Customization, use no user.\nif( $t_account_page ) {\n\t$t_user_id = auth_get_current_user_id();\n} else {\n\t$t_user_id = NO_USER;\n}\n\n$t_all_columns = columns_get_all();\n\n$t_view_issues_columns = columns_string_to_array( $f_view_issues_columns );\ncolumns_ensure_valid( 'view_issues', $t_view_issues_columns, $t_all_columns );\n\n$t_print_issues_columns = columns_string_to_array( $f_print_issues_columns );\ncolumns_ensure_valid( 'print_issues', $t_print_issues_columns, $t_all_columns );\n\n$t_csv_columns = columns_string_to_array( $f_csv_columns );\ncolumns_ensure_valid( 'csv', $t_csv_columns, $t_all_columns );\n\n$t_excel_columns = columns_string_to_array( $f_excel_columns );\ncolumns_ensure_valid( 'excel', $t_excel_columns, $t_all_columns );\n\nif( json_encode( config_get( 'view_issues_page_columns', '', $t_user_id, $t_project_id ) ) !== json_encode( $t_view_issues_columns ) ) {\n\tconfig_set( 'view_issues_page_columns', $t_view_issues_columns, $t_user_id, $t_project_id );\n}\nif( json_encode( config_get( 'print_issues_page_columns', '', $t_user_id, $t_project_id ) ) !== json_encode( $t_print_issues_columns ) ) {\n\tconfig_set( 'print_issues_page_columns', $t_print_issues_columns, $t_user_id, $t_project_id );\n}\nif( json_encode( config_get( 'csv_columns', '', $t_user_id, $t_project_id ) ) !== json_encode( $t_csv_columns ) ) {\n\tconfig_set( 'csv_columns', $t_csv_columns, $t_user_id, $t_project_id );\n}\nif( json_encode( config_get( 'excel_columns', '', $t_user_id, $t_project_id ) ) !== json_encode( $t_excel_columns ) ) {\n\tconfig_set( 'excel_columns', $t_excel_columns, $t_user_id, $t_project_id );\n}\n\nform_security_purge( 'manage_config_columns_set' );\n\n$t_redirect_url = $t_account_page ? 'account_manage_columns_page.php' : 'manage_config_columns_page.php';\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_config_email_page.php",
          "type": "blob",
          "size": 14.978515625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage Email Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\n\nauth_reauthenticate();\n\n/**\n * array_merge_recursive2()\n *\n * Similar to array_merge_recursive but keyed-valued are always overwritten.\n * Priority goes to the 2nd array.\n *\n * @public yes\n * @param array|string|integer $p_array1 Array.\n * @param array|string|integer $p_array2 Array.\n * @return array\n */\nfunction array_merge_recursive2( $p_array1, $p_array2 ) {\n\tif( !is_array( $p_array1 ) || !is_array( $p_array2 ) ) {\n\t\treturn $p_array2;\n\t}\n\t$t_merged_array = $p_array1;\n\tforeach( $p_array2 as $t_key2 => $t_value2 ) {\n\t\tif( array_key_exists( $t_key2, $t_merged_array ) && is_array( $t_value2 ) ) {\n\t\t\t$t_merged_array[$t_key2] = array_merge_recursive2( $t_merged_array[$t_key2], $t_value2 );\n\t\t} else {\n\t\t\t$t_merged_array[$t_key2] = $t_value2;\n\t\t}\n\t}\n\treturn $t_merged_array;\n}\n\n/**\n * get_notify_flag cloned from email_notify_flag\n * Get the value associated with the specific action and flag.\n * For example, you can get the value associated with notifying \"admin\"\n * on action \"new\", i.e. notify administrators on new bugs which can be\n * ON or OFF.\n *\n * @param string $p_action Action.\n * @param string $p_flag   Flag.\n * @return string\n */\nfunction get_notify_flag( $p_action, $p_flag ) {\n\tglobal $g_notify_flags, $g_default_notify_flags;\n\n\t$t_val = OFF;\n\tif( isset( $g_notify_flags[$p_action][$p_flag] ) ) {\n\t\t$t_val = $g_notify_flags[$p_action][$p_flag];\n\t} else if( isset( $g_default_notify_flags[$p_flag] ) ) {\n\t\t$t_val = $g_default_notify_flags[$p_flag];\n\t}\n\treturn $t_val;\n}\n\n/**\n * Return CSS for flag\n *\n * @param string $p_action Action.\n * @param string $p_flag   Flag.\n * @return string\n */\nfunction color_notify_flag( $p_action, $p_flag ) {\n\tglobal $g_notify_flags, $g_global_notify_flags, $g_file_notify_flags;\n\n\t$t_file = isset( $g_file_notify_flags[$p_action][$p_flag] ) ? ( $g_file_notify_flags[$p_action][$p_flag] ? 1 : 0 ): -1;\n\t$t_global = isset( $g_global_notify_flags[$p_action][$p_flag] ) ? ( $g_global_notify_flags[$p_action][$p_flag]  ? 1 : 0 ): -1;\n\t$t_project = isset( $g_notify_flags[$p_action][$p_flag] ) ? ( $g_notify_flags[$p_action][$p_flag]  ? 1 : 0 ): -1;\n\n\t$t_color = ' class=\"center\" ';\n\n\t$t_effective_value = $t_file;\n\n\tif( $t_global >= 0 ) {\n\t\tif ( $t_global != $t_effective_value ) {\n\t\t\t$t_color = ' class=\"color-global center\" '; # all projects override\n\t\t}\n\n\t\t$t_effective_value = $t_global;\n\t}\n\n\tif( $t_project >= 0 && $t_project != $t_effective_value ) {\n\t\t$t_color = ' class=\"color-project center\" '; # project overrides\n\t}\n\n\treturn $t_color;\n}\n\n/**\n * Get the value associated with the specific action and flag.\n *\n * @param string $p_action Action.\n * @param string $p_flag   Flag.\n * @return string\n */\nfunction show_notify_flag( $p_action, $p_flag ) {\n\tglobal $g_can_change_flags , $g_can_change_defaults;\n\t$t_flag = (bool)get_notify_flag( $p_action, $p_flag );\n\tif( $g_can_change_flags || $g_can_change_defaults ) {\n\t\t$t_flag_name = $p_action . ':' . $p_flag;\n\t\t$t_set = $t_flag ? 'checked=\"checked\"' : '';\n\t\treturn '<label><input type=\"checkbox\" class=\"ace\" name=\"flag[]\" value=\"' . $t_flag_name. '\" ' . $t_set . ' /><span class=\"lbl\"></span></label>';\n\t} else {\n\t\treturn $t_flag ? icon_get( 'fa-check', 'fa-lg blue' ) : '&#160;';\n\t}\n}\n\n/**\n * Get CSS for threshold flags\n *\n * @param string $p_access Access.\n * @param string $p_action Action.\n * @return string\n */\nfunction color_threshold_flag( $p_access, $p_action ) {\n\tglobal $g_notify_flags, $g_global_notify_flags, $g_file_notify_flags;\n\n\t$t_file = ( $p_access >= $g_file_notify_flags[$p_action]['threshold_min'] )\n\t\t\t\t\t && ( $p_access <= $g_file_notify_flags[$p_action]['threshold_max'] );\n\t$t_global = ( $p_access >= $g_global_notify_flags[$p_action]['threshold_min'] )\n\t\t\t\t\t && ( $p_access <= $g_global_notify_flags[$p_action]['threshold_max'] );\n\t$t_project = ( $p_access >= $g_notify_flags[$p_action]['threshold_min'] )\n\t\t\t\t\t && ( $p_access <= $g_notify_flags[$p_action]['threshold_max'] );\n\n\t$t_color = ' class=\"center\" ';\n\n\tif( $t_global != $t_file ) {\n\t\t$t_color = ' class=\"color-global center\" '; # all projects override\n\t}\n\n\tif( $t_project != $t_global ) {\n\t\t$t_color = ' class=\"color-project center\" '; # project overrides\n\t}\n\n\treturn $t_color;\n}\n\n/**\n * HTML for Show notify threshold\n *\n * @param string $p_access Access.\n * @param string $p_action Action.\n * @return string\n */\nfunction show_notify_threshold( $p_access, $p_action ) {\n\tglobal $g_can_change_flags , $g_can_change_defaults;\n\t$t_flag = ( $p_access >= get_notify_flag( $p_action, 'threshold_min' ) )\n\t\t&& ( $p_access <= get_notify_flag( $p_action, 'threshold_max' ) );\n\tif( $g_can_change_flags  || $g_can_change_defaults ) {\n\t\t$t_flag_name = $p_action . ':' . $p_access;\n\t\t$t_set = $t_flag ? 'checked=\"checked\"' : '';\n\t\treturn '<label><input class=\"ace\" type=\"checkbox\" name=\"flag_threshold[]\" value=\"' . $t_flag_name . '\" ' . $t_set . ' />' . '<span class=\"lbl\"></span></label>';\n\t} else {\n\t\treturn $t_flag ? icon_get( 'fa-check', 'fa-lg blue' ) : '&#160;';\n\t}\n}\n\n/**\n * HTML for email section\n *\n * @param string $p_section_name Section name.\n * @return void\n */\nfunction get_section_begin_for_email( $p_section_name ) {\n\t$t_access_levels = MantisEnum::getValues( config_get( 'access_levels_enum_string' ) );\n\techo '<div class=\"space-10\"></div>';\n\techo '<div class=\"widget-box widget-color-blue2\">';\n\techo '   <div class=\"widget-header widget-header-small\">';\n\techo '        <h4 class=\"widget-title lighter uppercase\">';\n\techo '            ' . icon_get( 'fa-envelope', 'ace-icon' );\n\techo $p_section_name;\n\techo '       </h4>';\n\techo '   </div>';\n\techo '   <div class=\"widget-body\">';\n\techo '   <div class=\"widget-main no-padding\">';\n\techo '       <div class=\"table-responsive\">';\n\techo '<table class=\"table table-striped table-bordered table-condensed checkbox-range-selection\">' . \"\\n\";\n\techo '<thead>' . \"\\n\";\n\techo '<tr>' . \"\\n\";\n\techo '<th width=\"30%\" rowspan=\"2\">' . lang_get( 'message' ) . '</th>';\n\techo '<th class=\"bold\" style=\"text-align:center\" rowspan=\"2\">&#160;' . lang_get( 'issue_reporter' ) . '&#160;</th>' . \"\\n\";\n\techo '<th class=\"bold\" style=\"text-align:center\" rowspan=\"2\">&#160;' . lang_get( 'issue_handler' ) . '&#160;</th>' . \"\\n\";\n\techo '<th class=\"bold\" style=\"text-align:center\" rowspan=\"2\">&#160;' . lang_get( 'users_monitoring_bug' ) . '&#160;</th>' . \"\\n\";\n\techo '<th class=\"bold\" style=\"text-align:center\" rowspan=\"2\">&#160;' . lang_get( 'users_added_bugnote' ) . '&#160;</th>' . \"\\n\";\n\techo '<th class=\"bold\" style=\"text-align:center\" rowspan=\"2\">&#160;' . lang_get( 'category_assigned_to' ) . '&#160;</th>' . \"\\n\";\n\techo '<th class=\"bold\" style=\"text-align:center\" colspan=\"' . count( $t_access_levels ) . '\">&#160;' . lang_get( 'email_notify_users' ) . '&#160;</th>' . \"\\n\";\n\techo '  </tr><tr>' . \"\\n\";\n\n\tforeach( $t_access_levels as $t_access_level ) {\n\t\techo '  <th>&#160;' . MantisEnum::getLabel( lang_get( 'access_levels_enum_string' ), $t_access_level ) . '&#160;</th>' . \"\\n\";\n\t}\n\n\techo '</tr>' . \"\\n\";\n\techo '</thead>' . \"\\n\";\n\techo '<tbody>' . \"\\n\";\n}\n\n/**\n * HTML for Row\n *\n * @param string $p_caption      Caption.\n * @param string $p_message_type Message type.\n * @return void\n */\nfunction get_capability_row_for_email( $p_caption, $p_message_type ) {\n\t$t_access_levels = MantisEnum::getValues( config_get( 'access_levels_enum_string' ) );\n\n\techo '<tr><td>' . string_display( $p_caption ) . '</td>' . \"\\n\";\n\techo '  <td' . color_notify_flag( $p_message_type, 'reporter' ) . '>' . show_notify_flag( $p_message_type, 'reporter' )  . '</td>' . \"\\n\";\n\techo '  <td' . color_notify_flag( $p_message_type, 'handler' ) . '>' . show_notify_flag( $p_message_type, 'handler' ) . '</td>' . \"\\n\";\n\techo '  <td' . color_notify_flag( $p_message_type, 'monitor' ) . '>' . show_notify_flag( $p_message_type, 'monitor' ) . '</td>' . \"\\n\";\n\techo '  <td' . color_notify_flag( $p_message_type, 'bugnotes' ) . '>' . show_notify_flag( $p_message_type, 'bugnotes' ) . '</td>' . \"\\n\";\n\techo '  <td' . color_notify_flag( $p_message_type, 'category' ) . '>' . show_notify_flag( $p_message_type, 'category' ) . '</td>' . \"\\n\";\n\n\tforeach( $t_access_levels as $t_access_level ) {\n\t\techo '  <td' . color_threshold_flag( $t_access_level, $p_message_type ) . '>' . show_notify_threshold( $t_access_level, $p_message_type ) . '</td>' . \"\\n\";\n\t}\n\n\techo '</tr>' . \"\\n\";\n}\n\n/**\n * HTML for email section end\n * @return void\n */\nfunction get_section_end_for_email() {\n\techo '</tbody></table></div>' . \"\\n\";\n\techo '</div></div></div> ' . \"\\n\";\n\techo '<div class=\"space-10\"></div>';\n}\n\n\nlayout_page_header( lang_get( 'manage_email_config' ) );\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( PAGE_CONFIG_DEFAULT );\nprint_manage_config_menu( 'manage_config_email_page.php' );\n\n$t_access = current_user_get_access_level();\n$t_project = helper_get_current_project();\n\n# build a list of all of the actions\n$t_actions = email_get_actions();\n\n# build a composite of the status flags, exploding the defaults\n$t_global_default_notify_flags = config_get( 'default_notify_flags', null, ALL_USERS, ALL_PROJECTS );\n$g_global_notify_flags = array();\nforeach ( $t_global_default_notify_flags as $t_flag => $t_value ) {\n\tforeach ( $t_actions as $t_action ) {\n\t\t$g_global_notify_flags[$t_action][$t_flag] = $t_value;\n\t}\n}\n$g_global_notify_flags = array_merge_recursive2( $g_global_notify_flags, config_get( 'notify_flags', null, ALL_USERS, ALL_PROJECTS ) );\n\n$t_file_default_notify_flags = config_get_global( 'default_notify_flags' );\n$g_file_notify_flags = array();\nforeach ( $t_file_default_notify_flags as $t_flag => $t_value ) {\n\tforeach ( $t_actions as $t_action ) {\n\t\t$g_file_notify_flags[$t_action][$t_flag] = $t_value;\n\t}\n}\n$g_file_notify_flags = array_merge_recursive2( $g_file_notify_flags, config_get_global( 'notify_flags' ) );\n\n$g_default_notify_flags = config_get( 'default_notify_flags' );\n$g_notify_flags = array();\nforeach ( $g_default_notify_flags as $t_flag => $t_value ) {\n\tforeach ( $t_actions as $t_action ) {\n\t\t$g_notify_flags[$t_action][$t_flag] = $t_value;\n\t}\n}\n$g_notify_flags = array_merge_recursive2( $g_notify_flags, config_get( 'notify_flags' ) );\n\n$g_can_change_flags = $t_access >= config_get_access( 'notify_flags' );\n$g_can_change_defaults = $t_access >= config_get_access( 'default_notify_flags' );\n\necho '<div class=\"col-md-12 col-xs-12\">' . \"\\n\";\necho '<div class=\"space-10\"></div>';\n\n# Email notifications\nif( config_get( 'enable_email_notification' ) == ON ) {\n\n\tif( $g_can_change_flags  || $g_can_change_defaults ) {\n\t\techo '<form id=\"mail_config_action\" method=\"post\" action=\"manage_config_email_set.php\">' . \"\\n\";\n\t\techo form_security_field( 'manage_config_email_set' );\n\t}\n\n\tif( ALL_PROJECTS == $t_project ) {\n\t\t$t_project_title = lang_get( 'config_all_projects' );\n\t} else {\n\t\t$t_project_title = sprintf( lang_get( 'config_project' ), string_display_line( project_get_name( $t_project ) ) );\n\t}\n\n\techo '<div class=\"well\">' . \"\\n\";\n\techo '<p class=\"bold\">';\n\tprint_icon( 'fa-info-circle' );\n\techo ' ' . $t_project_title . '</p>' . \"\\n\";\n\techo '<p>' . lang_get( 'colour_coding' ) . '<br />';\n\tif( ALL_PROJECTS <> $t_project ) {\n\t\techo '<span class=\"color-project\">' . lang_get( 'colour_project' ) . '</span><br />';\n\t}\n\techo '<span class=\"color-global\">' . lang_get( 'colour_global' ) . '</span></p>';\n\techo '</div>' . \"\\n\";\n\t\n\tget_section_begin_for_email( lang_get( 'email_notification' ) );\n#\t\tget_capability_row_for_email( lang_get( 'email_on_new' ), 'new' );  # duplicate of status change to 'new'\n\tget_capability_row_for_email( lang_get( 'email_on_updated' ), 'updated' );\n\tget_capability_row_for_email( lang_get( 'email_on_assigned' ), 'owner' );\n\tget_capability_row_for_email( lang_get( 'email_on_reopened' ), 'reopened' );\n\tget_capability_row_for_email( lang_get( 'email_on_deleted' ), 'deleted' );\n\tget_capability_row_for_email( lang_get( 'email_on_bugnote_added' ), 'bugnote' );\n\tif( config_get( 'enable_sponsorship' ) == ON ) {\n\t\tget_capability_row_for_email( lang_get( 'email_on_sponsorship_changed' ), 'sponsor' );\n\t}\n\n\tget_capability_row_for_email( lang_get( 'email_on_relationship_changed' ), 'relation' );\n\tget_capability_row_for_email( lang_get( 'email_on_monitor' ), 'monitor' );\n\n\t$t_statuses = MantisEnum::getAssocArrayIndexedByValues( config_get( 'status_enum_string' ) );\n\tforeach ( $t_statuses as $t_status => $t_label ) {\n\t\tget_capability_row_for_email( lang_get( 'status_changed_to' ) . ' \\'' . get_enum_element( 'status', $t_status ) . '\\'', $t_label );\n\t}\n\n\tget_section_end_for_email();\n\n\tif( $g_can_change_flags  || $g_can_change_defaults ) {\n\t\techo '<p>' . lang_get( 'notify_actions_change_access' ) . \"\\n\";\n\t\techo '<select name=\"notify_actions_access\" class=\"input-sm\">' . \"\\n\";\n\t\tprint_enum_string_option_list( 'access_levels', config_get_access( 'notify_flags' ) );\n\t\techo \"\\n</select></p>\";\n\n\t\techo '<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"' . lang_get( 'change_configuration' ) . '\" />' . \"\\n\";\n\n\t\techo \"</form>\\n\";\n\n\t\techo '<div>' . \"\\n\";\n\t\techo '<form name=\"mail_config_action\" method=\"post\" action=\"manage_config_revert.php\">' . \"\\n\";\n\t\techo form_security_field( 'manage_config_revert' ) . \"\\n\";\n\t\techo '<input name=\"revert\" type=\"hidden\" value=\"notify_flags,default_notify_flags\" />' . \"\\n\";\n\t\techo '<input name=\"project\" type=\"hidden\" value=\"' . $t_project . '\" />' . \"\\n\";\n\t\techo '<input name=\"return\" type=\"hidden\" value=\"' . string_attribute( form_action_self() ) . '\" />' . \"\\n\";\n\t\techo '<input type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\" value=\"';\n\t\tif( ALL_PROJECTS == $t_project ) {\n\t\t\techo lang_get( 'revert_to_system' );\n\t\t} else {\n\t\t\techo lang_get( 'revert_to_all_project' );\n\t\t}\n\t\techo '\" />' . \"\\n\";\n\t\techo \"</form></div>\\n\";\n\t}\n\n}\necho '</div>';\nlayout_page_end();\n"
        },
        {
          "name": "manage_config_email_set.php",
          "type": "blob",
          "size": 5.8076171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage configuration for email\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_config_email_set' );\n\nauth_reauthenticate();\n\n$t_can_change_level = min( config_get_access( 'notify_flags' ), config_get_access( 'default_notify_flags' ) );\naccess_ensure_project_level( $t_can_change_level );\n\n$t_project = helper_get_current_project();\n\n$f_flags\t\t\t= gpc_get( 'flag', array() ) ?? [];\n$f_thresholds\t\t= gpc_get( 'flag_threshold', array() ) ?? [];\n$f_actions_access\t= gpc_get_int( 'notify_actions_access' );\n\n$t_access = current_user_get_access_level();\n$t_can_change_flags = $t_access >= config_get_access( 'notify_flags' );\n$t_can_change_defaults = $t_access >= config_get_access( 'default_notify_flags' );\n\n# build a list of the possible actions and flags\n$t_valid_actions = email_get_actions();\n$t_valid_flags = array( 'reporter', 'handler', 'monitor' , 'bugnotes', 'category' );\n\n# initialize the thresholds\nforeach( $t_valid_actions as $t_action ) {\n\t$t_thresholds_min[$t_action] = NOBODY;\n\t$t_thresholds_max[$t_action] = ANYBODY;\n}\n\n\n# parse flags and thresholds\nforeach( $f_flags as $t_flag_value ) {\n\tlist( $t_action, $t_flag ) = explode( ':', $t_flag_value );\n\t$t_flags[$t_action][$t_flag] = ON;\n}\nforeach( $f_thresholds as $t_threshold_value ) {\n\tlist( $t_action, $t_threshold ) = explode( ':', $t_threshold_value );\n\tif( $t_threshold < $t_thresholds_min[$t_action] ) {\n\t\t$t_thresholds_min[$t_action] = $t_threshold;\n\t}\n\tif( $t_threshold > $t_thresholds_max[$t_action] ) {\n\t\t$t_thresholds_max[$t_action] = $t_threshold;\n\t}\n}\n\n# if we can set defaults, find them\nif( $t_can_change_defaults ) {\n\t$t_first = true;\n\n\t# for flags, assume they are true, unless one of the actions has them off\n\tforeach ( $t_valid_flags as $t_flag ) {\n\t\t$t_default_flags[$t_flag] = ON;\n\t\tforeach ( $t_valid_actions as $t_action ) {\n\t\t\tif( !isset( $t_flags[$t_action][$t_flag] ) ) {\n\t\t\t\tunset( $t_default_flags[$t_flag] );\n\t\t\t}\n\t\t}\n\t}\n\t# for thresholds, find the subset that matches all of the actions\n\t$t_default_min = ANYBODY;\n\t$t_default_max = NOBODY;\n\tforeach ( $t_valid_actions as $t_action ) {\n\t\tif( $t_default_max > $t_thresholds_max[$t_action] ) {\n\t\t\t$t_default_max = $t_thresholds_max[$t_action];\n\t\t}\n\t\tif( $t_default_min < $t_thresholds_min[$t_action] ) {\n\t\t\t$t_default_min = $t_thresholds_min[$t_action];\n\t\t}\n\t}\n\n\t# We may end up with min = 100, max = 0 - make it 100, 100.\n\tif( $t_default_max < $t_default_min ) {\n\t\t$t_default_max = $t_default_min;\n\t}\n\n\t$t_default_flags['threshold_min'] = $t_default_min;\n\t$t_default_flags['threshold_max'] = $t_default_max;\n\n\t$t_existing_default_flags = config_get( 'default_notify_flags' );\n\t$t_existing_default_access = config_get_access( 'default_notify_flags' );\n\tif( ( $t_existing_default_flags != $t_default_flags )\n\t\t\t|| ( $t_existing_default_access != $f_actions_access ) ) { # only set the flags if they are different\n\t\tconfig_set( 'default_notify_flags', $t_default_flags, NO_USER, $t_project, $f_actions_access );\n\t}\n} else {\n\t$t_default_flags = config_get( 'default_notify_flags' );\n}\n\n# set the values for specific actions if different from the defaults\n$t_notify_flags = array();\nforeach ( $t_valid_actions as $t_action ) {\n\t$t_action_printed = false;\n\tforeach ( $t_valid_flags as $t_flag ) {\n\t\tif( !isset( $t_default_flags[$t_flag] ) ) {\n\t\t\t$t_default_flags[$t_flag] = OFF;\n\t\t}\n\n\t\t# Always generate a complete set of flag to have a full override that can be compared\n\t\t# against defaults later in the manage_config_email_page.php rendering.\n\t\t$t_notify_flags[$t_action][$t_flag] = isset( $t_flags[$t_action][$t_flag] ) ? ON : OFF;\n\t}\n\tif( $t_default_flags['threshold_min'] <> $t_thresholds_min[$t_action] ) {\n\t\t$t_notify_flags[$t_action]['threshold_min'] = $t_thresholds_min[$t_action];\n\t}\n\tif( $t_default_flags['threshold_max'] <> $t_thresholds_max[$t_action] ) {\n\t\t$t_notify_flags[$t_action]['threshold_max'] = $t_thresholds_max[$t_action];\n\t}\n}\nif( isset( $t_notify_flags ) ) {\n\t$t_existing_flags = config_get( 'notify_flags' );\n\t$t_existing_access = config_get_access( 'notify_flags' );\n\tif( ( $t_existing_flags != $t_notify_flags )\n\t\t\t|| ( $t_existing_access != $f_actions_access ) ) { # only set the flags if they are different\n\t\tconfig_set( 'notify_flags', $t_notify_flags, NO_USER, $t_project, $f_actions_access );\n\t}\n}\n\nform_security_purge( 'manage_config_email_set' );\n\nprint_header_redirect( 'manage_config_email_page.php' );\n"
        },
        {
          "name": "manage_config_revert.php",
          "type": "blob",
          "size": 2.5478515625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n */\n\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'manage_config_revert' );\n\nauth_reauthenticate();\n\n$f_project_id = gpc_get_int( 'project', 0 );\n$f_revert = gpc_get_string( 'revert', '' );\n$f_return = gpc_get_string( 'return' );\n\n$t_access = true;\n$t_revert_vars = explode( ',', $f_revert );\narray_walk( $t_revert_vars, 'trim' );\nforeach ( $t_revert_vars as $t_revert ) {\n\t$t_access &= access_has_project_level( config_get_access( $t_revert ), $f_project_id );\n}\n\nif( !$t_access ) {\n\taccess_denied();\n}\n\nif( '' != $f_revert ) {\n\t# Confirm with the user\n\thelper_ensure_confirmed(\n\t\tsprintf( lang_get( 'config_delete_sure' ),\n\t\t\tstring_html_specialchars( implode( ', ', $t_revert_vars ) ),\n\t\t\tstring_attribute( project_get_name( $f_project_id ) )\n\t\t),\n\t\tlang_get( 'delete_config_button' ) );\n\n\tforeach ( $t_revert_vars as $t_revert ) {\n\t\tconfig_delete( $t_revert, ALL_USERS, $f_project_id );\n\t}\n}\n\nform_security_purge( 'manage_config_revert' );\n\nprint_header_redirect( $f_return );\n"
        },
        {
          "name": "manage_config_work_threshold_page.php",
          "type": "blob",
          "size": 18.92578125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage configuration for workflow Config\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\n\nauth_reauthenticate();\n\nlayout_page_header( lang_get( 'manage_threshold_config' ) );\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( PAGE_CONFIG_DEFAULT );\nprint_manage_config_menu( 'manage_config_work_threshold_page.php' );\n\n$g_user = auth_get_current_user_id();\n$g_project_id = helper_get_current_project();\n$t_show_submit = false;\n\n$g_access_levels = MantisEnum::getAssocArrayIndexedByValues( config_get( 'access_levels_enum_string' ) );\n$g_overrides = array();\n\n/**\n * Set overrides\n * @param string $p_config Configuration value.\n * @return void\n */\nfunction set_overrides( $p_config ) {\n\tglobal $g_overrides;\n\tif( !in_array( $p_config, $g_overrides ) ) {\n\t\t$g_overrides[] = $p_config;\n\t}\n}\n\n/**\n * Section header\n * @param string $p_section_name Section name.\n * @return void\n */\nfunction get_section_begin_mcwt( $p_section_name ) {\n\tglobal $g_access_levels;\n\n\techo '<div class=\"space-10\"></div>';\n\techo '<div class=\"widget-box widget-color-blue2\">';\n\techo '   <div class=\"widget-header widget-header-small\">';\n\techo '        <h4 class=\"widget-title lighter uppercase\">';\n\tprint_icon( 'fa-sliders', 'ace-icon' );\n\techo $p_section_name;\n\techo '       </h4>';\n\techo '   </div>';\n\techo '   <div class=\"widget-body\">';\n\techo '   <div class=\"widget-main no-padding\">';\n\techo '       <div class=\"table-responsive\">';\n\techo '<table class=\"table table-striped table-bordered table-condensed\">';\n\techo '<thead>';\n\techo '<tr>';\n\techo '<th class=\"bold\" width=\"40%\" rowspan=\"2\">' . lang_get( 'perm_rpt_capability' ) . '</th>';\n\techo '<th class=\"bold\" style=\"text-align:center\"  width=\"40%\" colspan=\"' . count( $g_access_levels ) . '\">' . lang_get( 'allowed_access_levels' ) . '</th>';\n\techo '<th class=\"bold\" style=\"text-align:center\" rowspan=\"2\">&#160;' . lang_get( 'alter_level' ) . '&#160;</th>';\n\techo '</tr><tr>';\n\tforeach( $g_access_levels as $t_access_level => $t_access_label ) {\n\t\techo '<th class=\"bold\" style=\"text-align:center\">&#160;' . MantisEnum::getLabel( lang_get( 'access_levels_enum_string' ), $t_access_level ) . '&#160;</th>';\n\t}\n\techo '</tr>' . \"\\n\";\n\techo '</thead>';\n\techo '<tbody>';\n}\n\n/**\n * Defines the cell's background color and sets the overrides\n * @param string  $p_threshold    Configuration option.\n * @param string  $p_file         System default value.\n * @param string  $p_global       All projects value.\n * @param string  $p_project      Current project value.\n * @param boolean $p_set_override If true, will define an override if needed.\n * @return string HTML tag attribute for background color override\n */\nfunction set_color( $p_threshold, $p_file, $p_global, $p_project, $p_set_override ) {\n\tglobal $g_project_id;\n\n\t$t_color = '';\n\n\t# all projects override\n\tif( $p_global != $p_file ) {\n\t\t$t_color = 'color-global';\n\t\tif( $p_set_override && ALL_PROJECTS == $g_project_id ) {\n\t\t\tset_overrides( $p_threshold );\n\t\t}\n\t}\n\n\t# project overrides\n\tif( $p_project != $p_global ) {\n\t\t$t_color = 'color-project';\n\t\tif( $p_set_override && ALL_PROJECTS != $g_project_id ) {\n\t\t\tset_overrides( $p_threshold );\n\t\t}\n\t}\n\n\treturn $t_color;\n}\n\n/**\n * Prints selection list or value of who is allowed to change the capability\n * @param string  $p_threshold  Capability.\n * @param boolean $p_can_change If true, prints a selection list otherwise just display value.\n * @return void\n */\nfunction print_who_can_change( $p_threshold, $p_can_change ) {\n\tstatic $s_file_access = null;\n\n\tif( is_null( $s_file_access ) ) {\n\t\t$t_file_access = config_get_global( 'admin_site_threshold' );\n\t}\n\t$t_global_access = config_get_access( $p_threshold, ALL_USERS, ALL_PROJECTS );\n\t$t_project_access = config_get_access( $p_threshold );\n\n\t$t_color = set_color( $p_threshold, $t_file_access, $t_global_access, $t_project_access, $p_can_change );\n\n\techo '<td class=\"' . $t_color . '\">';\n\tif( $p_can_change ) {\n\t\techo '<select name=\"access_' . $p_threshold . '\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'access_levels', $t_project_access );\n\t\techo '</select>';\n\t} else {\n\t\techo MantisEnum::getLabel( lang_get( 'access_levels_enum_string' ), $t_project_access ) . '&#160;';\n\t}\n\techo \"</td>\\n\";\n}\n\n/**\n * Get row\n * @param string  $p_caption           Caption.\n * @param string  $p_threshold         Threshold.\n * @param boolean $p_all_projects_only All projects only.\n * @return void\n */\nfunction get_capability_row( $p_caption, $p_threshold, $p_all_projects_only = false ) {\n\tglobal $g_user, $g_project_id, $t_show_submit, $g_access_levels;\n\n\t$t_file = config_get_global( $p_threshold );\n\tif( !is_array( $t_file ) ) {\n\t\t$t_file_exp = array();\n\t\tforeach( $g_access_levels as $t_access_level => $t_label ) {\n\t\t\tif( $t_access_level >= $t_file ) {\n\t\t\t\t$t_file_exp[] = $t_access_level;\n\t\t\t}\n\t\t}\n\t} else {\n\t\t$t_file_exp = $t_file;\n\t}\n\n\t$t_global = config_get( $p_threshold, null, ALL_USERS, ALL_PROJECTS );\n\tif( !is_array( $t_global ) ) {\n\t\t$t_global_exp = array();\n\t\tforeach( $g_access_levels as $t_access_level => $t_label ) {\n\t\t\tif( $t_access_level >= $t_global ) {\n\t\t\t\t$t_global_exp[] = $t_access_level;\n\t\t\t}\n\t\t}\n\t} else {\n\t\t$t_global_exp = $t_global;\n\t}\n\n\t$t_project = config_get( $p_threshold );\n\tif( !is_array( $t_project ) ) {\n\t\t$t_project_exp = array();\n\t\tforeach( $g_access_levels as $t_access_level => $t_label ) {\n\t\t\tif( $t_access_level >= $t_project ) {\n\t\t\t\t$t_project_exp[] = $t_access_level;\n\t\t\t}\n\t\t}\n\t} else {\n\t\t$t_project_exp = $t_project;\n\t}\n\n\t$t_can_change = access_has_project_level( config_get_access( $p_threshold ), $g_project_id, $g_user )\n\t\t\t  && ( ( ALL_PROJECTS == $g_project_id ) || !$p_all_projects_only );\n\n\techo \"<tr>\\n\";\n\n\t# Access levels\n\techo '  <td>', string_display( $p_caption ),\n\t\t\t'<input type=\"hidden\" name=\"flag_exists_' . $p_threshold . '[]\" value=\"1\" />',\n\t\t\t\"</td>\\n\";\n\tforeach( $g_access_levels as $t_access_level => $t_access_label ) {\n\t\t$t_file = in_array( $t_access_level, $t_file_exp );\n\t\t$t_global = in_array( $t_access_level, $t_global_exp );\n\t\t$t_project = in_array( $t_access_level, $t_project_exp );\n\n\t\t$t_color = set_color( $p_threshold, $t_file, $t_global, $t_project, $t_can_change );\n\n\t\tif( $t_can_change ) {\n\t\t\t$t_checked = $t_project ? 'checked=\"checked\"' : '';\n\t\t\t$t_value = '<label><input type=\"checkbox\" class=\"ace\" name=\"flag_thres_' . $p_threshold .\n\t\t\t\t'[]\" value=\"' . $t_access_level . '\" ' . $t_checked . ' /><span class=\"lbl\"></span></label>';\n\t\t\t$t_show_submit = true;\n\t\t} else {\n\t\t\tif( $t_project ) {\n\t\t\t\t$t_value = icon_get( 'fa-check', 'fa-lg blue' );\n\t\t\t} else {\n\t\t\t\t$t_value = '&#160;';\n\t\t\t}\n\t\t}\n\t\techo '  <td class=\"center ' . $t_color . '\">' . $t_value . \"</td>\\n\";\n\t}\n\n\tprint_who_can_change( $p_threshold, $t_can_change );\n\n\techo \"</tr>\\n\";\n}\n\n/**\n * Get boolean row\n * @param string  $p_caption           Caption.\n * @param string  $p_threshold         Threshold.\n * @param boolean $p_all_projects_only All projects only.\n * @return void\n */\nfunction get_capability_boolean( $p_caption, $p_threshold, $p_all_projects_only = false ) {\n\tglobal $g_user, $g_project_id, $t_show_submit, $g_access_levels;\n\n\t$t_file = config_get_global( $p_threshold );\n\t$t_global = config_get( $p_threshold, null, ALL_USERS, ALL_PROJECTS );\n\t$t_project = config_get( $p_threshold );\n\n\t$t_can_change = access_has_project_level( config_get_access( $p_threshold ), $g_project_id, $g_user )\n\t\t\t  && ( ( ALL_PROJECTS == $g_project_id ) || !$p_all_projects_only );\n\n\techo \"<tr>\\n\\t<td>\", string_display_line( $p_caption ),\n\t\t\t'<input type=\"hidden\" name=\"flag_exists_' . $p_threshold . '[]\" value=\"1\" />',\n\t\t\t\"</td>\\n\";\n\n\t# Value\n\t$t_color = set_color( $p_threshold, $t_file, $t_global, $t_project, $t_can_change );\n\tif( $t_can_change ) {\n\t\t$t_checked = ( ON == config_get( $p_threshold ) ) ? 'checked=\"checked\"' : '';\n\t\t$t_value = '<label><input type=\"checkbox\" class=\"ace\" name=\"flag_' . $p_threshold . '\" value=\"1\" ' .\n\t\t\t$t_checked . ' /><span class=\"lbl\"></span></label>';\n\t\t$t_show_submit = true;\n\t} else {\n\t\tif( ON == config_get( $p_threshold ) ) {\n\t\t\t$t_value = icon_get( 'fa-check', 'fa-lg blue' );\n\t\t} else {\n\t\t\t$t_value = '&#160;';\n\t\t}\n\t}\n\techo \"\\t\" . '<td class=\"center ' . $t_color . '\">' . $t_value . '</td>' . \"\\n\\t\"\n\t\t. '<td class=\"left\" colspan=\"' . ( count( $g_access_levels ) - 1 ). '\"></td>';\n\n\tprint_who_can_change( $p_threshold, $t_can_change );\n\n\techo '</tr>' . \"\\n\";\n}\n\n/**\n * Get enumeration row\n * @param string  $p_caption           Caption.\n * @param string  $p_threshold         Threshold.\n * @param string  $p_enum              Enumeration.\n * @param boolean $p_all_projects_only All projects only.\n * @return void\n */\nfunction get_capability_enum( $p_caption, $p_threshold, $p_enum, $p_all_projects_only = false ) {\n\tglobal $g_user, $g_project_id, $t_show_submit, $g_access_levels;\n\n\t$t_file = config_get_global( $p_threshold );\n\t$t_global = config_get( $p_threshold, null, ALL_USERS, ALL_PROJECTS );\n\t$t_project = config_get( $p_threshold );\n\n\t$t_can_change = access_has_project_level( config_get_access( $p_threshold ), $g_project_id, $g_user )\n\t\t\t  && ( ( ALL_PROJECTS == $g_project_id ) || !$p_all_projects_only );\n\n\techo '<tr>' . \"\\n\";\n\techo \"\\t\" . '<td>' . string_display_line( $p_caption ) . '</td>' . \"\\n\";\n\n\t# Value\n\t$t_color = set_color( $p_threshold, $t_file, $t_global, $t_project, $t_can_change );\n\techo \"\\t\" . '<td class=\"left ' . $t_color . '\" colspan=\"3\">';\n\tif( $t_can_change ) {\n\t\techo '<select name=\"flag_' . $p_threshold . '\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( $p_enum, config_get( $p_threshold ) );\n\t\techo '</select>';\n\t\t$t_show_submit = true;\n\t} else {\n\t\t$t_value = MantisEnum::getLabel( lang_get( $p_enum . '_enum_string' ), config_get( $p_threshold ) ) . '&#160;';\n\t\techo $t_value;\n\t}\n\techo '</td>' . \"\\n\\t\" . '<td colspan=\"' . ( count( $g_access_levels ) - 3 ) . '\"></td>' . \"\\n\";\n\n\tprint_who_can_change( $p_threshold, $t_can_change );\n\n\techo '</tr>' . \"\\n\";\n}\n\n/**\n * Print section end\n * @return void\n */\nfunction get_section_end() {\n\techo '</tbody></table></div>' . \"\\n\";\n\techo '</div></div></div> ' . \"\\n\";\n\techo '<div class=\"space-10\"></div>';\n}\n\n\necho '<br />' . \"\\n\";\n\nif( ALL_PROJECTS == $g_project_id ) {\n\t$t_project_title = lang_get( 'config_all_projects' );\n} else {\n\t$t_project_title = sprintf( lang_get( 'config_project' ), string_display_line( project_get_name( $g_project_id ) ) );\n}\n\necho '<div class=\"col-md-12 col-xs-12\">' . \"\\n\";\necho '<div class=\"well\">' . \"\\n\";\necho '<p class=\"bold\">' . icon_get( 'fa-info-circle' ) . \" $t_project_title</p>\\n\";\necho '<p>' . lang_get( 'colour_coding' ) . '<br />';\nif( ALL_PROJECTS <> $g_project_id ) {\n\techo '<span class=\"color-project\">' . lang_get( 'colour_project' ) .'</span><br />';\n}\necho '<span class=\"color-global\">' . lang_get( 'colour_global' ) . '</span></p>';\necho '</div>' . \"\\n\";\n\necho '<form id=\"mail_config_action\" method=\"post\" action=\"manage_config_work_threshold_set.php\">' . \"\\n\";\necho form_security_field( 'manage_config_work_threshold_set' );\n\n# Issues\nget_section_begin_mcwt( lang_get( 'issues' ) );\nget_capability_row( lang_get( 'report_issue' ), 'report_bug_threshold' );\nget_capability_enum( lang_get( 'submit_status' ), 'bug_submit_status', 'status' );\nget_capability_row( lang_get( 'update_issue' ), 'update_bug_threshold' );\nget_capability_boolean( lang_get( 'allow_reporter_close' ), 'allow_reporter_close' );\nget_capability_row( lang_get( 'monitor_issue' ), 'monitor_bug_threshold' );\nget_capability_row( lang_get( 'handle_issue' ), 'handle_bug_threshold' );\nget_capability_row( lang_get( 'assign_issue' ), 'update_bug_assign_threshold' );\nget_capability_row( lang_get( 'move_issue' ), 'move_bug_threshold', true );\nget_capability_row( lang_get( 'delete_issue' ), 'delete_bug_threshold' );\nget_capability_row( lang_get( 'reopen_issue' ), 'reopen_bug_threshold' );\nget_capability_boolean( lang_get( 'allow_reporter_reopen' ), 'allow_reporter_reopen' );\nget_capability_enum( lang_get( 'reopen_status' ), 'bug_reopen_status', 'status' );\nget_capability_enum( lang_get( 'reopen_resolution' ), 'bug_reopen_resolution', 'resolution' );\nget_capability_enum( lang_get( 'resolved_status' ), 'bug_resolved_status_threshold', 'status' );\nget_capability_enum( lang_get( 'readonly_status' ), 'bug_readonly_status_threshold', 'status' );\nget_capability_row( lang_get( 'update_readonly_issues' ), 'update_readonly_bug_threshold' );\nget_capability_row( lang_get( 'update_issue_status' ), 'update_bug_status_threshold' );\nget_capability_row( lang_get( 'view_private_issues' ), 'private_bug_threshold' );\nget_capability_row( lang_get( 'set_view_status' ), 'set_view_status_threshold' );\nget_capability_row( lang_get( 'update_view_status' ), 'change_view_status_threshold' );\nget_capability_row( lang_get( 'view_issue_revisions' ), 'bug_revision_view_threshold' );\nget_capability_row( lang_get( 'drop_issue_revisions' ), 'bug_revision_drop_threshold' );\nget_capability_row( lang_get( 'set_sticky' ), 'set_bug_sticky_threshold' );\nget_capability_row( lang_get( 'show_list_of_users_monitoring_issue' ), 'show_monitor_list_threshold' );\nget_capability_row( lang_get( 'add_users_monitoring_issue' ), 'monitor_add_others_bug_threshold' );\nget_capability_row( lang_get( 'remove_users_monitoring_issue' ), 'monitor_delete_others_bug_threshold' );\nget_capability_boolean( lang_get( 'set_status_assigned' ), 'auto_set_status_to_assigned' );\nget_capability_enum( lang_get( 'assigned_status' ), 'bug_assigned_status', 'status' );\nif( ON == config_get( 'limit_reporters', null, ALL_USERS, ALL_PROJECTS ) ) {\n\tget_capability_boolean( lang_get( 'limit_access' ), 'limit_reporters', true );\n} else {\n\tget_capability_row( lang_get( 'limit_view_unless_threshold_option' ), 'limit_view_unless_threshold' );\n}\nget_capability_row( lang_get( 'print_all_bug_page_link' ), 'print_reports_threshold' );\nget_capability_row( lang_get( 'export_issues' ), 'export_issues_threshold' );\nget_section_end();\n\n# Notes\nget_section_begin_mcwt( lang_get( 'notes' ) );\nget_capability_row( lang_get( 'add_notes' ), 'add_bugnote_threshold' );\nget_capability_row( lang_get( 'edit_others_bugnotes' ), 'update_bugnote_threshold' );\nget_capability_row( lang_get( 'edit_own_bugnotes' ), 'bugnote_user_edit_threshold' );\nget_capability_row( lang_get( 'delete_others_bugnotes' ), 'delete_bugnote_threshold' );\nget_capability_row( lang_get( 'delete_own_bugnotes' ), 'bugnote_user_delete_threshold' );\nget_capability_row( lang_get( 'view_private_notes' ), 'private_bugnote_threshold' );\nget_capability_row( lang_get( 'change_view_state_own_bugnotes' ), 'bugnote_user_change_view_state_threshold' );\nget_section_end();\n\n# Tags\nget_section_begin_mcwt( lang_get( 'tags' ) );\nget_capability_row( lang_get( 'view_tags' ), 'tag_view_threshold' );\nget_capability_row( lang_get( 'attach_tags' ), 'tag_attach_threshold' );\nget_capability_row( lang_get( 'detach_tags' ), 'tag_detach_threshold' );\nget_capability_row( lang_get( 'detach_own_tags' ), 'tag_detach_own_threshold' );\nget_capability_row( lang_get( 'create_new_tags' ), 'tag_create_threshold' );\nget_capability_row( lang_get( 'edit_tags' ), 'tag_edit_threshold' );\nget_capability_row( lang_get( 'edit_own_tags' ), 'tag_edit_own_threshold' );\nget_section_end();\n\n# Attachments\nif( config_get( 'allow_file_upload' ) == ON ) {\n\tget_section_begin_mcwt( lang_get( 'attachments' ) );\n\tget_capability_row( lang_get( 'view_list_of_attachments' ), 'view_attachments_threshold' );\n\tget_capability_row( lang_get( 'download_attachments' ), 'download_attachments_threshold' );\n\tget_capability_row( lang_get( 'delete_attachments' ), 'delete_attachments_threshold' );\n\tget_capability_row( lang_get( 'upload_issue_attachments' ), 'upload_bug_file_threshold' );\n\tget_section_end();\n}\n\n# Filters\nget_section_begin_mcwt( lang_get( 'filters' ) );\nget_capability_row( lang_get( 'save_filters' ), 'stored_query_create_threshold' );\nget_capability_row( lang_get( 'save_filters_as_shared' ), 'stored_query_create_shared_threshold' );\nget_capability_row( lang_get( 'use_saved_filters' ), 'stored_query_use_threshold' );\nget_section_end();\n\n# Others\nget_section_begin_mcwt( lang_get( 'others' ) );\nget_capability_row( lang_get( 'view' ) . ' ' . lang_get( 'changelog_link' ), 'view_changelog_threshold' );\nget_capability_row( lang_get( 'view' ) . ' ' . lang_get( 'roadmap_link' ), 'roadmap_view_threshold' );\nget_capability_row( lang_get( 'view' ) . ' ' . lang_get( 'summary_link' ), 'view_summary_threshold' );\nget_capability_row( lang_get( 'view' ) . ' ' . lang_get( 'assigned_to' ), 'view_handler_threshold' );\nget_capability_row( lang_get( 'view' ) . ' ' . lang_get( 'bug_history' ), 'view_history_threshold' );\nget_capability_row( lang_get( 'send_reminders' ), 'bug_reminder_threshold' );\nget_capability_row( lang_get( 'receive_reminders' ), 'reminder_receive_threshold' );\nget_section_end();\n\n\nif( $t_show_submit ) {\n\techo '<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"' . lang_get( 'change_configuration' ) . '\" />' . \"\\n\";\n}\n\necho '</form>' . \"\\n\";\n\nif( $t_show_submit && ( 0 < count( $g_overrides ) ) ) {\n\techo '<div class=\"pull-right\"><form id=\"threshold_config_action\" method=\"post\" action=\"manage_config_revert.php\">' . \"\\n\";\n\techo form_security_field( 'manage_config_revert' );\n\techo '<input name=\"revert\" type=\"hidden\" value=\"' . implode( ',', $g_overrides ) . '\"></input>';\n\techo '<input name=\"project\" type=\"hidden\" value=\"' . $g_project_id . '\"></input>';\n\techo '<input name=\"return\" type=\"hidden\" value=\"' . string_attribute( form_action_self() ) .'\"></input>';\n\techo '<input type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\" value=\"';\n\tif( ALL_PROJECTS == $g_project_id ) {\n\t\techo lang_get( 'revert_to_system' );\n\t} else {\n\t\techo lang_get( 'revert_to_all_project' );\n\t}\n\techo '\" />' . \"\\n\";\n\techo '</form></div>' . \"\\n\";\n}\necho '</div>';\nlayout_page_end();\n"
        },
        {
          "name": "manage_config_work_threshold_set.php",
          "type": "blob",
          "size": 8.962890625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Workflow Threshold Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_config_work_threshold_set' );\n\nauth_reauthenticate();\n\n$g_access = current_user_get_access_level();\n$g_project = helper_get_current_project();\n\n/**\n * set row\n * @param string  $p_threshold         Threshold.\n * @param boolean $p_all_projects_only All projects only.\n * @return void\n */\nfunction set_capability_row( $p_threshold, $p_all_projects_only = false ) {\n\tglobal $g_access, $g_project;\n\n\tif( ( $g_access >= config_get_access( $p_threshold ) )\n\t\t\t  && ( ( ALL_PROJECTS == $g_project ) || !$p_all_projects_only ) ) {\n\t\t$f_threshold = gpc_get_int_array( 'flag_thres_' . $p_threshold, array() );\n\t\t$f_access = gpc_get_int( 'access_' . $p_threshold );\n\t\t# @@debug @@ echo \"<br />for $p_threshold \"; var_dump($f_threshold, $f_access); echo '<br />';\n\t\t$t_access_levels = MantisEnum::getAssocArrayIndexedByValues( config_get( 'access_levels_enum_string' ) );\n\t\tksort( $t_access_levels );\n\t\treset( $t_access_levels );\n\n\t\t$t_lower_threshold = NOBODY;\n\t\t$t_array_threshold = array();\n\n\t\tforeach( $t_access_levels as $t_access_level => $t_level_name ) {\n\t\t\tif( in_array( $t_access_level, $f_threshold ) ) {\n\t\t\t\tif( NOBODY == $t_lower_threshold ) {\n\t\t\t\t\t$t_lower_threshold = $t_access_level;\n\t\t\t\t}\n\t\t\t\t$t_array_threshold[] = $t_access_level;\n\t\t\t} else {\n\t\t\t\tif( NOBODY <> $t_lower_threshold ) {\n\t\t\t\t\t$t_lower_threshold = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t# @@debug @@ var_dump($$t_access_level, $t_lower_threshold, $t_array_threshold); echo '<br />';\n\t\t}\n\t\t$t_existing_threshold = config_get( $p_threshold );\n\t\t$t_existing_access = config_get_access( $p_threshold );\n\t\tif( -1 == $t_lower_threshold ) {\n\t\t\tif( ( $t_existing_threshold != $t_array_threshold )\n\t\t\t\t\t|| ( $t_existing_access != $f_access ) ) {\n\t\t\t\tconfig_set( $p_threshold, $t_array_threshold, NO_USER, $g_project, $f_access );\n\t\t\t}\n\t\t} else {\n\t\t\tif( ( $t_existing_threshold != $t_lower_threshold )\n\t\t\t\t\t|| ( $t_existing_access != $f_access ) ) {\n\t\t\t\tconfig_set( $p_threshold, $t_lower_threshold, NO_USER, $g_project, $f_access );\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Get capability boolean\n * @param string  $p_threshold         Threshold.\n * @param boolean $p_all_projects_only All projects only.\n * @return void\n */\nfunction set_capability_boolean( $p_threshold, $p_all_projects_only = false ) {\n\tglobal $g_access, $g_project;\n\n\tif( ( $g_access >= config_get_access( $p_threshold ) )\n\t\t\t  && ( ( ALL_PROJECTS == $g_project ) || !$p_all_projects_only ) ) {\n\t\t$f_flag = gpc_get( 'flag_' . $p_threshold, OFF );\n\t\t$f_access = gpc_get_int( 'access_' . $p_threshold );\n\t\t$f_flag = ( OFF == $f_flag ) ? OFF : ON;\n\t\t# @@debug @@ echo \"<br />for $p_threshold \"; var_dump($f_flag, $f_access); echo '<br />';\n\n\t\tif( ( $f_flag != config_get( $p_threshold ) ) || ( $f_access != config_get_access( $p_threshold ) ) ) {\n\t\t\tconfig_set( $p_threshold, $f_flag, NO_USER, $g_project, $f_access );\n\t\t}\n\t}\n}\n\n/**\n * Set capability enum\n * @param string  $p_threshold         Threshold.\n * @param boolean $p_all_projects_only All projects only.\n * @return void\n */\nfunction set_capability_enum( $p_threshold, $p_all_projects_only = false ) {\n\tglobal $g_access, $g_project;\n\n\tif( ( $g_access >= config_get_access( $p_threshold ) )\n\t\t\t  && ( ( ALL_PROJECTS == $g_project ) || !$p_all_projects_only ) ) {\n\t\t$f_flag = gpc_get( 'flag_' . $p_threshold );\n\t\t$f_access = gpc_get_int( 'access_' . $p_threshold );\n\n\t\tif( ( $f_flag != config_get( $p_threshold ) ) || ( $f_access != config_get_access( $p_threshold ) ) ) {\n\t\t\tconfig_set( $p_threshold, $f_flag, NO_USER, $g_project, $f_access );\n\t\t}\n\t}\n}\n\n/**\n * Check if a configuration option, of those rendered as checkbox inputs, was present\n * in the form. This only applies to threshold and boolean config options.\n *\n * Usually, when a checkbox input is submitted unchecked, there is no value in the\n * receiving post data, so we can't know if the input was present or not.\n * Those config options add a special hidden input when rendered in the form, so\n * we can check its existence with this function.\n *\n * @param string $p_name\tConfiguration option name\n * @return boolean\t\t\tWhether the option was present in the form.\n */\nfunction capability_exists( $p_name ) {\n\t$t_flag = 'flag_exists_' . $p_name;\n\treturn gpc_isset( $t_flag );\n}\n\n# Issues\nset_capability_row( 'report_bug_threshold' );\nset_capability_enum( 'bug_submit_status' );\nset_capability_row( 'update_bug_threshold' );\nset_capability_boolean( 'allow_reporter_close' );\nset_capability_row( 'monitor_bug_threshold' );\nset_capability_row( 'handle_bug_threshold' );\nset_capability_row( 'update_bug_assign_threshold' );\nset_capability_row( 'move_bug_threshold', true );\nset_capability_row( 'delete_bug_threshold' );\nset_capability_row( 'reopen_bug_threshold' );\nset_capability_boolean( 'allow_reporter_reopen' );\nset_capability_enum( 'bug_reopen_status' );\nset_capability_enum( 'bug_reopen_resolution' );\nset_capability_enum( 'bug_resolved_status_threshold' );\nset_capability_enum( 'bug_readonly_status_threshold' );\nset_capability_row( 'private_bug_threshold' );\nset_capability_row( 'update_readonly_bug_threshold' );\nset_capability_row( 'update_bug_status_threshold' );\nset_capability_row( 'set_view_status_threshold' );\nset_capability_row( 'change_view_status_threshold' );\nset_capability_row( 'bug_revision_view_threshold' );\nset_capability_row( 'bug_revision_drop_threshold' );\nset_capability_row( 'set_bug_sticky_threshold' );\nset_capability_row( 'show_monitor_list_threshold' );\nset_capability_row( 'monitor_add_others_bug_threshold' );\nset_capability_row( 'monitor_delete_others_bug_threshold' );\nset_capability_boolean( 'auto_set_status_to_assigned' );\nset_capability_enum( 'bug_assigned_status' );\nif( capability_exists( 'limit_reporters' ) ) {\n\tset_capability_boolean( 'limit_reporters', true );\n}\nif( capability_exists( 'limit_view_unless_threshold' ) ) {\n\tset_capability_row( 'limit_view_unless_threshold' );\n}\nset_capability_row( 'print_reports_threshold' );\nset_capability_row( 'export_issues_threshold' );\n\n# Notes\nset_capability_row( 'add_bugnote_threshold' );\nset_capability_row( 'update_bugnote_threshold' );\nset_capability_row( 'bugnote_user_edit_threshold' );\nset_capability_row( 'delete_bugnote_threshold' );\nset_capability_row( 'bugnote_user_delete_threshold' );\nset_capability_row( 'private_bugnote_threshold' );\nset_capability_row( 'bugnote_user_change_view_state_threshold' );\n\n# Tags\n\nset_capability_row( 'tag_view_threshold' );\nset_capability_row( 'tag_attach_threshold' );\nset_capability_row( 'tag_detach_threshold' );\nset_capability_row( 'tag_detach_own_threshold' );\nset_capability_row( 'tag_create_threshold' );\nset_capability_row( 'tag_edit_threshold' );\nset_capability_row( 'tag_edit_own_threshold' );\n\n# Attachments\nif( config_get( 'allow_file_upload' ) == ON ) {\n\tset_capability_row( 'view_attachments_threshold' );\n\tset_capability_row( 'download_attachments_threshold' );\n\tset_capability_row( 'delete_attachments_threshold' );\n\tset_capability_row( 'upload_bug_file_threshold' );\n}\n\n# Filters\nset_capability_row( 'stored_query_create_threshold' );\nset_capability_row( 'stored_query_create_shared_threshold' );\nset_capability_row( 'stored_query_use_threshold' );\n\n# Others\nset_capability_row( 'view_changelog_threshold' );\nset_capability_row( 'roadmap_view_threshold' );\nset_capability_row( 'view_summary_threshold' );\nset_capability_row( 'view_handler_threshold' );\nset_capability_row( 'view_history_threshold' );\nset_capability_row( 'bug_reminder_threshold' );\nset_capability_row( 'reminder_receive_threshold' );\n\nform_security_purge( 'manage_config_work_threshold_set' );\n\nprint_header_redirect( 'manage_config_work_threshold_page.php' );\n"
        },
        {
          "name": "manage_config_workflow_graph_page.php",
          "type": "blob",
          "size": 2.330078125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage configuration for workflow Config\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses workflow_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\n\nauth_reauthenticate();\n\nif( !config_get( 'relationship_graph_enable' ) ) {\n\taccess_denied();\n}\n\nlayout_page_header( lang_get( 'manage_workflow_graph' ) );\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'adm_permissions_report.php' );\nprint_manage_config_menu( 'manage_config_workflow_graph_page.php' );\n\n$t_project = helper_get_current_project();\n\nif( $t_project == ALL_PROJECTS ) {\n\t$t_project_title = lang_get( 'config_all_projects' );\n} else {\n\t$t_project_title = sprintf( lang_get( 'config_project' ), string_display_line( project_get_name( $t_project ) ) );\n}\n?>\n\t<br />\n\t<br />\n\t<div class=\"center\">\n\t\t<p class=\"bold\"><?php echo $t_project_title ?></p>\n\t\t<br />\n\t\t<img src=\"workflow_graph_img.php\" />\n\t</div>\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "manage_config_workflow_page.php",
          "type": "blob",
          "size": 21.4208984375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Workflow Configuration Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses workflow_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'workflow_api.php' );\n\nauth_reauthenticate();\n\nlayout_page_header( lang_get( 'manage_workflow_config' ) );\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( PAGE_CONFIG_DEFAULT );\nprint_manage_config_menu( 'manage_config_workflow_page.php' );\n\n# CSS class names for overrides color coding\ndefine( 'COLOR_GLOBAL', 'color-global' );\ndefine( 'COLOR_PROJECT', 'color-project' );\n\n$g_access = current_user_get_access_level();\n$t_project = helper_get_current_project();\n$g_can_change_workflow = ( $g_access >= config_get_access( 'status_enum_workflow' ) );\n$g_can_change_flags = $g_can_change_workflow;\n$g_overrides = array();\n\n/**\n * Set overrides\n * @param string $p_config     Configuration value.\n * @param bool   $p_can_change True if user has access level to change config\n * @param string $p_color      CSS class name\n * @return void\n */\nfunction set_overrides( $p_config, $p_can_change, $p_color ) {\n\tglobal $g_overrides;\n\n\tif( !$p_can_change ) {\n\t\treturn;\n\t}\n\n\t$t_project = helper_get_current_project();\n\tif(    $t_project == ALL_PROJECTS && $p_color == COLOR_GLOBAL\n\t\t|| $t_project != ALL_PROJECTS && $p_color == COLOR_PROJECT\n\t) {\n\t\t$g_overrides[$p_config] = $p_config;\n\t}\n}\n\n/**\n * Returns a string to define the background color attribute depending\n * on the level where it's overridden\n * @param integer $p_level_file    Config file's access level.\n * @param integer $p_level_global  All projects' access level.\n * @param integer $p_level_project Current project's access level.\n * @return string class name or '' if no override.\n */\nfunction set_color_override( $p_level_file, $p_level_global, $p_level_project ) {\n\tif( $p_level_project != $p_level_global ) {\n\t\t$t_color = COLOR_PROJECT;\n\t} else if( $p_level_global != $p_level_file ) {\n\t\t$t_color = COLOR_GLOBAL;\n\t} else {\n\t\t$t_color = '';\n\t}\n\n\treturn $t_color;\n}\n\n\n/**\n * Get the value associated with the specific action and flag.\n * @param integer $p_from_status_id From status id.\n * @param integer $p_to_status_id   To status id.\n * @return string\n */\nfunction show_flag( $p_from_status_id, $p_to_status_id ) {\n\tglobal $g_can_change_workflow,\n\t\t$g_file_workflow, $g_global_workflow, $g_project_workflow,\n\t\t$t_resolved_status, $t_reopen_status, $t_reopen_label;\n\tif( $p_from_status_id <> $p_to_status_id ) {\n\t\t$t_file = isset( $g_file_workflow['exit'][$p_from_status_id][$p_to_status_id] ) ? 1 : 0;\n\t\t$t_global = isset( $g_global_workflow['exit'][$p_from_status_id][$p_to_status_id] ) ? 1 : 0;\n\t\t$t_project = isset( $g_project_workflow['exit'][$p_from_status_id][$p_to_status_id] ) ? 1 : 0;\n\n\t\t$t_color = set_color_override( $t_file, $t_global, $t_project );\n\t\tset_overrides( 'status_enum_workflow', $g_can_change_workflow, $t_color );\n\t\t$t_value = '<td class=\"center ' . $t_color . '\">';\n\n\t\t$t_flag = ( 1 == $t_project );\n\n\t\tif( $g_can_change_workflow ) {\n\t\t\t$t_flag_name = $p_from_status_id . ':' . $p_to_status_id;\n\t\t\t$t_set = $t_flag ? 'checked=\"checked\"' : '';\n\t\t\t$t_value .= '<label><input type=\"checkbox\" class=\"ace\" name=\"flag[]\" value=\"' . $t_flag_name . '\" ' . $t_set . ' /><span class=\"lbl\"></span></label>';\n\t\t} else {\n\t\t\t$t_value .= $t_flag ? icon_get( 'fa-check', 'fa-lg blue' ) : '&#160;';\n\t\t}\n\n\t\t# Add 'reopened' label\n\t\tif( $p_from_status_id >= $t_resolved_status && $p_to_status_id == $t_reopen_status ) {\n\t\t\t$t_value .= '<br /><small>(' . $t_reopen_label . ')</small>';\n\t\t}\n\t} else {\n\t\t$t_value = '<td>&#160;';\n\t}\n\n\t$t_value .= '</td>';\n\n\treturn $t_value;\n}\n\n/**\n * section header\n * @param string $p_section_name Section name.\n * @return void\n */\nfunction section_begin( $p_section_name ) {\n\t$t_enum_statuses = MantisEnum::getValues( config_get( 'status_enum_string' ) );\n\techo '<div class=\"space-10\"></div>';\n\techo '<div class=\"widget-box widget-color-blue2\">';\n\techo '   <div class=\"widget-header widget-header-small\">';\n\techo '        <h4 class=\"widget-title lighter uppercase\">';\n\techo '            ' . icon_get( 'fa-random', 'ace-icon' );\n\techo $p_section_name;\n\techo '       </h4>';\n\techo '   </div>';\n\techo '   <div class=\"widget-body\">';\n\techo '   <div class=\"widget-main no-padding\">';\n\techo '       <div class=\"table-responsive\">';\n\techo \"\\t<table  class=\\\"table table-striped table-bordered table-condensed\\\">\\n\";\n\techo \"\\t\\t<thead>\\n\";\n\techo \"\\t\\t\" . '<tr>' . \"\\n\";\n\techo \"\\t\\t\\t\" . '<th class=\"bold\" rowspan=\"2\">' . lang_get( 'current_status' ) . '</th>'. \"\\n\";\n\techo \"\\t\\t\\t\" . '<th class=\"bold\" style=\"text-align:center\" colspan=\"' . ( count( $t_enum_statuses ) + 1 ) . '\">'\n\t\t. lang_get( 'next_status' ) . '</th>';\n\techo \"\\n\\t\\t\" . '</tr>'. \"\\n\";\n\techo \"\\t\\t\" . '<tr>' . \"\\n\";\n\n\tforeach( $t_enum_statuses as $t_status ) {\n\t\techo \"\\t\\t\\t\" . '<th class=\"bold\" style=\"text-align:center\">&#160;'\n\t\t\t. string_no_break( MantisEnum::getLabel( lang_get( 'status_enum_string' ), $t_status ) )\n\t\t\t. '&#160;</th>' .\"\\n\";\n\t}\n\n\techo \"\\t\\t\\t\" . '<th class=\"bold\" style=\"text-align:center\">' . lang_get( 'custom_field_default_value' ) . '</th>' . \"\\n\";\n\techo \"\\t\\t\" . '</tr>' . \"\\n\";\n\techo \"\\t\\t</thead>\\n\";\n\techo \"\\t\\t<tbody>\\n\";\n}\n\n/**\n * Print row\n * @param integer $p_from_status From status.\n * @return void\n */\nfunction capability_row( $p_from_status ) {\n\tglobal $g_file_workflow, $g_global_workflow, $g_project_workflow, $g_can_change_workflow;\n\t$t_enum_status = MantisEnum::getAssocArrayIndexedByValues( config_get( 'status_enum_string' ) );\n\techo \"\\t\\t\" .'<tr><td>' . string_no_break( MantisEnum::getLabel( lang_get( 'status_enum_string' ), $p_from_status ) ) . '</td>' . \"\\n\";\n\tforeach ( $t_enum_status as $t_to_status_id => $t_to_status_label ) {\n\t\techo show_flag( $p_from_status, $t_to_status_id );\n\t}\n\n\t$t_file = isset( $g_file_workflow['default'][$p_from_status] ) ? $g_file_workflow['default'][$p_from_status] : 0 ;\n\t$t_global = isset( $g_global_workflow['default'][$p_from_status] ) ? $g_global_workflow['default'][$p_from_status] : 0 ;\n\t$t_project = isset( $g_project_workflow['default'][$p_from_status] ) ? $g_project_workflow['default'][$p_from_status] : 0;\n\n\t$t_color = set_color_override( $t_file, $t_global, $t_project );\n\tset_overrides( 'status_enum_workflow', $g_can_change_workflow, $t_color );\n\n\techo \"\\t\\t\\t\" . '<td class=\"center ' . $t_color . '\">';\n\tif( $g_can_change_workflow ) {\n\t\techo '<select name=\"default_' . $p_from_status . '\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'status', $t_project );\n\t\techo '</select>';\n\t} else {\n\t\techo MantisEnum::getLabel( lang_get( 'status_enum_string' ), $t_project );\n\t}\n\techo ' </td>' . \"\\n\";\n\techo \"\\t\\t\" . '</tr>' . \"\\n\";\n}\n\n/**\n * section footer\n * @return void\n */\nfunction section_end() {\n\tglobal $g_can_change_workflow;\n\techo '</tbody></table></div>' . \"\\n\";\n\techo '</div></div></div>' . \"\\n\";\n\techo '<div class=\"space-10\"></div>';\n\n\tif( $g_can_change_workflow ) {\n\t\techo lang_get( 'workflow_change_access_label' ) . \"&nbsp;\\n\";\n\t\techo '<select name=\"workflow_access\">' . \"\\n\";\n\t\tprint_enum_string_option_list( 'access_levels', config_get_access( 'status_enum_workflow' ) );\n\t\techo \"\\n\" . '</select>' . \"\\n\";\n\t}\n\n\techo '<div class=\"space-10\"></div>';\n}\n\n/**\n * threshold section begin\n * @param string $p_section_name Section name.\n * @return void\n */\nfunction threshold_begin( $p_section_name ) {\n\techo '<div class=\"space-10\"></div>';\n\techo '<div class=\"widget-box widget-color-blue2\">';\n\techo '   <div class=\"widget-header widget-header-small\">';\n\techo '        <h4 class=\"widget-title lighter uppercase\">';\n\techo '            ' . icon_get( 'fa-sliders', 'ace-icon' );\n\techo $p_section_name;\n\techo '       </h4>';\n\techo '   </div>';\n\techo '   <div class=\"widget-body\">';\n\techo '   <div class=\"widget-main no-padding\">';\n\techo '       <div class=\"table-responsive\">';\n\techo '<table class=\"table table-striped table-bordered table-condensed\">';\n\techo '<thead>';\n\techo \"\\t\" . '<tr>';\n\techo \"\\t\\t\" . '<th class=\"bold\">' . lang_get( 'threshold' ) . '</th>' . \"\\n\";\n\techo \"\\t\\t\" . '<th class=\"bold\" >' . lang_get( 'status_level' ) . '</th>' . \"\\n\";\n\techo \"\\t\\t\" . '<th class=\"bold\" >' . lang_get( 'alter_level' ) . '</th></tr>' . \"\\n\";\n\techo \"\\n\";\n\techo '</thead>';\n\techo '<tbody>';\n}\n\n/**\n * threshold section row\n * @param string $p_threshold Threshold.\n * @return void\n */\nfunction threshold_row( $p_threshold ) {\n\tglobal $g_access, $g_can_change_flags;\n\n\t$t_can_change_threshold = ( $g_access >= config_get_access( $p_threshold ) );\n\n\t$t_file = config_get_global( $p_threshold );\n\t$t_global = config_get( $p_threshold, null, ALL_USERS, ALL_PROJECTS );\n\t$t_project = config_get( $p_threshold );\n\t$t_color = set_color_override( $t_file, $t_global, $t_project );\n\tset_overrides( $p_threshold, $t_can_change_threshold, $t_color );\n\n\t$t_file_access = config_get_global( 'admin_site_threshold' );\n\t$t_global_access = config_get_access( $p_threshold, ALL_USERS, ALL_PROJECTS);\n\t$t_project_access = config_get_access( $p_threshold );\n\t$t_color_access = set_color_override( $t_file_access, $t_global_access, $t_project_access );\n\tset_overrides( $p_threshold, $t_can_change_threshold, $t_color_access );\n\n\techo '<tr><td>' . lang_get( 'desc_' . $p_threshold ) . '</td>' . \"\\n\";\n\tif( $t_can_change_threshold ) {\n\t\techo '<td class=\"' . $t_color . '\"><select name=\"threshold_' . $p_threshold . '\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'status', $t_project );\n\t\techo '</select> </td>' . \"\\n\";\n\t\techo '<td class=\"' . $t_color_access . '\"><select name=\"access_' . $p_threshold . '\" class=\"input-sm\">';\n\t\tprint_enum_string_option_list( 'access_levels', config_get_access( $p_threshold ) );\n\t\techo '</select> </td>' . \"\\n\";\n\t\t$g_can_change_flags = true;\n\t} else {\n\t\techo '<td class=\"' . $t_color . '\">' . MantisEnum::getLabel( lang_get( 'status_enum_string' ), $t_project ) . '&#160;</td>' . \"\\n\";\n\t\techo '<td>' . MantisEnum::getLabel( lang_get( 'access_levels_enum_string' ), config_get_access( $p_threshold ) ) . '&#160;</td>' . \"\\n\";\n\t}\n\n\techo '</tr>' . \"\\n\";\n}\n\n/**\n * threshold section end\n * @return void\n */\nfunction threshold_end() {\n\techo '</tbody></table></div>' . \"\\n\";\n\techo '</div></div></div>' . \"\\n\";\n\techo '<div class=\"space-10\"></div>';\n}\n\n/**\n * access begin\n * @param string $p_section_name Section name.\n * @return void\n */\nfunction access_begin( $p_section_name ) {\n\techo '<div class=\"space-10\"></div>';\n\techo '<div class=\"widget-box widget-color-blue2\">';\n\techo '   <div class=\"widget-header widget-header-small\">';\n\techo '        <h4 class=\"widget-title lighter uppercase\">';\n\techo '            ' . icon_get( 'fa-lock', 'ace-icon' );\n\techo $p_section_name;\n\techo '       </h4>';\n\techo '   </div>';\n\techo '   <div class=\"widget-body\">';\n\techo '   <div class=\"widget-main no-padding\">';\n    echo '        <div class=\"widget-toolbox padding-8 clearfix\">';\n    echo            lang_get( 'access_change' );\n    echo '        </div>';\n    echo '        <div class=\"table-responsive\">';\n    echo '        <table class=\"table table-striped table-bordered table-condensed\">';\n    echo '        <tbody>';\n}\n\n/**\n * access row\n * @return void\n */\nfunction access_row() {\n\tglobal $g_access, $g_can_change_flags;\n\n\t$t_enum_status = MantisEnum::getAssocArrayIndexedByValues( config_get( 'status_enum_string' ) );\n\n\t$t_file_new = config_get_global( 'report_bug_threshold' );\n\t$t_global_new = config_get( 'report_bug_threshold', null, ALL_USERS, ALL_PROJECTS );\n\t$t_report_bug_threshold = config_get( 'report_bug_threshold' );\n\n\t$t_file_set = config_get_global( 'set_status_threshold' );\n\t$t_global_set = config_get( 'set_status_threshold', null, ALL_USERS, ALL_PROJECTS );\n\t$t_project_set = config_get( 'set_status_threshold' );\n\n\t$t_submit_status = config_get( 'bug_submit_status' );\n\n\t# Print the table rows\n\tforeach( $t_enum_status as $t_status => $t_status_label ) {\n\t\techo \"\\t\\t\" . '<tr><td>'\n\t\t\t. string_no_break( MantisEnum::getLabel( lang_get( 'status_enum_string' ), $t_status ) ) . '</td>' . \"\\n\";\n\n\t\tif( $t_status == $t_submit_status ) {\n\t\t\t# 'NEW' status\n\t\t\t$t_threshold = $t_report_bug_threshold;\n\n\t\t\t$t_can_change = $g_access >= config_get_access( 'report_bug_threshold' );\n\t\t\t$t_color = set_color_override( $t_file_new, $t_global_new, $t_report_bug_threshold );\n\t\t\tset_overrides( 'report_bug_threshold', $t_can_change, $t_color );\n\t\t} else {\n\t\t\t# Other statuses\n\n\t\t\t# File level: fallback if set_status_threshold is not defined\n\t\t\tif( isset( $t_file_set[$t_status] ) ) {\n\t\t\t\t$t_level_file = $t_file_set[$t_status];\n\t\t\t} else {\n\t\t\t\t$t_level_file = config_get_global( 'update_bug_status_threshold' );\n\t\t\t}\n\n\t\t\t$t_level_global  = isset( $t_global_set[$t_status] ) ? $t_global_set[$t_status] : $t_level_file;\n\t\t\t$t_threshold = isset( $t_project_set[$t_status] ) ? $t_project_set[$t_status] : $t_level_global;\n\n\t\t\t$t_can_change = ( $g_access >= config_get_access( 'set_status_threshold' ) );\n\n\t\t\t$t_color = set_color_override( $t_level_file, $t_level_global, $t_threshold );\n\t\t\tset_overrides( 'set_status_threshold', $t_can_change, $t_color );\n\t\t}\n\n\t\t# If threshold is an array (instead of an integer value), the input is not editable\n\t\t$t_can_edit = !is_array( $t_threshold );\n\t\t$t_min_level = access_threshold_min_level( $t_threshold );\n\t\tif( $t_can_change && $t_can_edit ) {\n\t\t\techo '<td class=\"' . $t_color . '\"><select name=\"access_change_' . $t_status . '\" class=\"input-sm\">' . \"\\n\";\n\t\t\tprint_enum_string_option_list( 'access_levels', $t_min_level );\n\t\t\techo '</select> </td>' . \"\\n\";\n\t\t\t$g_can_change_flags = true;\n\t\t} else {\n\t\t\techo '<td class=\"' . $t_color . '\">'\n\t\t\t\t. MantisEnum::getLabel( lang_get( 'access_levels_enum_string' ), $t_min_level )\n\t\t\t\t. '</td>' . \"\\n\";\n\t\t}\n\n\t\techo '</tr>' . \"\\n\";\n\t}\n} # end function access_row\n\n/**\n * access section end\n * @return void\n */\nfunction access_end() {\n\tglobal $g_access;\n\n\techo '</tbody></table></div>' . \"\\n\";\n\techo '</div></div></div>' . \"\\n\";\n\techo '<div class=\"space-10\"></div>';\n\n\tif( $g_access >= config_get_access( 'set_status_threshold' ) ) {\n\t\techo lang_get( 'access_change_access_label' ) . \"&nbsp;\\n\";\n\t\techo '<select name=\"status_access\">' . \"\\n\\t\\t\";\n\t\tprint_enum_string_option_list( 'access_levels', config_get_access( 'set_status_threshold' ) );\n\t\techo \"\\n\" . '</select>' . \"\\n\";\n\t}\n\n\techo '<div class=\"space-10\"></div>';\n}\n\necho '<div class=\"space-10\"></div>';\n\n# count arcs in and out of each status\n$t_enum_status = config_get( 'status_enum_string' );\n$t_status_arr  = MantisEnum::getAssocArrayIndexedByValues( $t_enum_status );\n\n$t_extra_enum_status = '0:non-existent,' . $t_enum_status;\n$t_lang_enum_status = '0:' . lang_get( 'non_existent' ) . ',' . lang_get( 'status_enum_string' );\n$t_all_status = explode( ',', $t_extra_enum_status );\n\n# gather all versions of the workflow\n$g_file_workflow = workflow_parse( config_get_global( 'status_enum_workflow' ) );\n$g_global_workflow = workflow_parse( config_get( 'status_enum_workflow', null, ALL_USERS, ALL_PROJECTS ) );\n$g_project_workflow = workflow_parse( config_get( 'status_enum_workflow', null, ALL_USERS, $t_project ) );\n\n# validate the project workflow\n$t_validation_result = '';\nforeach( $t_status_arr as $t_status => $t_label ) {\n\tif( isset( $g_project_workflow['exit'][$t_status][$t_status] ) ) {\n\t\t$t_validation_result .= '<tr><td>'\n\t\t\t\t\t\t. MantisEnum::getLabel( $t_lang_enum_status, $t_status )\n\t\t\t\t\t\t. '</td><td class=\"alert alert-warning\">' . lang_get( 'superfluous' ) . '</td></tr>';\n\t}\n}\n\n# check for entry == 0 without exit == 0, unreachable state\nforeach( $t_status_arr as $t_status => $t_status_label ) {\n\tif( ( 0 == count( $g_project_workflow['entry'][$t_status] ) ) && ( 0 < count( $g_project_workflow['exit'][$t_status] ) ) ) {\n\t\t$t_validation_result .= '<tr><td>'\n\t\t\t\t\t\t. MantisEnum::getLabel( $t_lang_enum_status, $t_status )\n\t\t\t\t\t\t. '</td><td class=\"alert alert-danger\">' . lang_get( 'unreachable' ) . '</td></tr>';\n\t}\n}\n\n# check for exit == 0 without entry == 0, unleaveable state\nforeach( $t_status_arr as $t_status => $t_status_label ) {\n\tif( ( 0 == count( $g_project_workflow['exit'][$t_status] ) ) && ( 0 < count( $g_project_workflow['entry'][$t_status] ) ) ) {\n\t\t$t_validation_result .= '<tr><td>'\n\t\t\t\t\t\t. MantisEnum::getLabel( $t_lang_enum_status, $t_status )\n\t\t\t\t\t\t. '</td><td class=\"alert alert-danger\">' . lang_get( 'no_exit' ) . '</td></tr>';\n\t}\n}\n\n# check for exit == 0 and entry == 0, isolated state\nforeach ( $t_status_arr as $t_status => $t_status_label ) {\n\tif( ( 0 == count( $g_project_workflow['exit'][$t_status] ) ) && ( 0 == count( $g_project_workflow['entry'][$t_status] ) ) ) {\n\t\t$t_validation_result .= '<tr><td>'\n\t\t\t\t\t\t. MantisEnum::getLabel( $t_lang_enum_status, $t_status )\n\t\t\t\t\t\t. '</td><td class=\"alert alert-danger\">' . lang_get( 'unreachable' ) . '<br />' . lang_get( 'no_exit' ) . '</td></tr>';\n\t}\n}\n\necho '<form id=\"workflow_config_action\" method=\"post\" action=\"manage_config_workflow_set.php\">' . \"\\n\";\necho '<fieldset>';\necho form_security_field( 'manage_config_workflow_set' );\necho '</fieldset>';\n\nif( ALL_PROJECTS == $t_project ) {\n\t$t_project_title = lang_get( 'config_all_projects' );\n} else {\n\t$t_project_title = sprintf( lang_get( 'config_project' ), string_display_line( project_get_name( $t_project ) ) );\n}\n\necho '<div class=\"col-md-12 col-xs-12\">' . \"\\n\";\necho '<div class=\"well\">' . \"\\n\";\necho '<p class=\"bold\">' . icon_get( 'fa-info-circle' ) . \" $t_project_title</p>\\n\";\necho '<p>' . lang_get( 'colour_coding' ) . '<br />';\nif( ALL_PROJECTS <> $t_project ) {\n\techo '<span class=\"' . COLOR_PROJECT . '\">' . lang_get( 'colour_project' ) .'</span><br />';\n}\necho '<span class=\"' . COLOR_GLOBAL . '\">' . lang_get( 'colour_global' ) . '</span></p>';\necho '</div>' . \"\\n\";\n\n# show the settings used to derive the table\nthreshold_begin( lang_get( 'workflow_thresholds' ) );\nif( !is_array( config_get( 'bug_submit_status' ) ) ) {\n\tthreshold_row( 'bug_submit_status' );\n}\nthreshold_row( 'bug_resolved_status_threshold' );\nthreshold_row( 'bug_reopen_status' );\nthreshold_end();\n\nif( '' <> $t_validation_result ) {\n\techo '<div class=\"widget-box widget-color-blue2\">';\n\techo '<div class=\"widget-header widget-header-small\">';\n\techo '\t<h4 class=\"widget-title lighter\">';\n\techo '\t\t' . icon_get( 'fa-hand-o-right', 'ace-icon' );\n\techo lang_get( 'validation' );\n\techo '\t</h4>';\n\techo '</div>';\n\techo '<div class=\"widget-body\">';\n\techo '\t<div class=\"widget-main no-padding\">';\n\techo '<div class=\"table-responsive\">';\n\techo '<table class=\"table table-bordered table-condensed table-striped\">';\n\techo '\t<tr><td class=\"bold\">' . lang_get( 'status' ) . '</td>';\n\techo '\t<td class=\"bold\" >' . lang_get( 'comment' ) . '</td></tr>';\n\techo $t_validation_result;\n\techo '</table></div></div></div></div>';\n}\n\n# Initialization for 'reopened' label handling\n$t_resolved_status = config_get( 'bug_resolved_status_threshold' );\n$t_reopen_status = config_get( 'bug_reopen_status' );\n$t_reopen_label = MantisEnum::getLabel( lang_get( 'resolution_enum_string' ), config_get( 'bug_reopen_resolution' ) );\n\n# display the graph as a matrix\nsection_begin( lang_get( 'workflow' ) );\nforeach ( $t_status_arr as $t_from_status => $t_from_label ) {\n\tcapability_row( $t_from_status );\n}\nsection_end();\n\n# display the access levels required to move an issue\necho \"\\n\\n\";\naccess_begin( lang_get( 'access_levels' ) );\naccess_row();\naccess_end();\necho '</div>';\n\nif( $g_can_change_flags ) {\n\techo '<div class=\"col-md-12\">';\n\techo '<button class=\"btn btn-primary btn-white btn-round\">'\n\t\t. lang_get( 'change_configuration' )\n\t\t. \"</button>\\n\";\n\n\t# Deported submit button for separate form defined below\n\t# included here to simplify page layout\n\tif( 0 < count( $g_overrides ) ) {\n\t\techo '<button form=\"mail_config_action\" class=\"btn btn-primary btn-white btn-round\">'\n\t\t\t. lang_get( ALL_PROJECTS == $t_project ? 'revert_to_system' : 'revert_to_all_project' )\n\t\t\t. \"</button>\\n\";\n\t}\n\techo '</div>';\n}\necho '</form>' . \"\\n\";\n\n# Secondary form to revert config - submit button is defined above\nif( $g_can_change_flags && 0 < count( $g_overrides ) ) {\n?>\n<form id=\"mail_config_action\" method=\"post\" action=\"manage_config_revert.php\">\n\t<fieldset>\n\t\t<?php echo form_security_field( 'manage_config_revert' ); ?>\n\t\t<input name=\"revert\" type=\"hidden\" value=\"<?php echo implode( ',', $g_overrides ) ?>\" />\n\t\t<input name=\"project\" type=\"hidden\" value=\"<?php echo $t_project ?>\" />\n\t\t<input name=\"return\" type=\"hidden\" value=\"<?php echo string_attribute( form_action_self() ) ?>\" />\n\t</fieldset>\n</form>\n\n<?php\n}\n\nlayout_page_end();\n"
        },
        {
          "name": "manage_config_workflow_set.php",
          "type": "blob",
          "size": 9.6103515625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage configuration for workflow Config\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_config_workflow_set' );\n\nauth_reauthenticate();\n\n/**\n * Retrieves the value of configuration option for the project's parent\n * (ALL_PROJECTS level if project, or file-level if all projects)\n * @param integer $p_project Project.\n * @param string  $p_option  Configuration option to retrieve.\n * @return mixed configuration option value\n */\nfunction config_get_parent( $p_project, $p_option ) {\n\tif( $p_project == ALL_PROJECTS ) {\n\t\treturn config_get_global( $p_option );\n\t} else {\n\t\treturn config_get( $p_option, null, null, ALL_PROJECTS );\n\t}\n}\n\n/**\n * Retrieves the access level needed to change the configuration option in the\n * project's parent (ALL_PROJECTS level if project, or file-level if all projects)\n * @param integer $p_project Project.\n * @param string  $p_option  Configuration option to retrieve.\n * @return integer access level\n */\nfunction config_get_access_parent( $p_project, $p_option ) {\n\tif( $p_project == ALL_PROJECTS ) {\n\t\treturn config_get_global( 'admin_site_threshold' );\n\t} else {\n\t\treturn config_get_access( $p_option, null, ALL_PROJECTS );\n\t}\n}\n\n\n$t_can_change_level = min( config_get_access( 'status_enum_workflow' ), config_get_access( 'report_bug_threshold' ), config_get_access( 'set_status_threshold' )\n\t\t, config_get_access( 'bug_submit_status' ), config_get_access( 'bug_resolved_status_threshold' ), config_get_access( 'bug_reopen_status' ) );\naccess_ensure_project_level( $t_can_change_level );\n\n$t_project = helper_get_current_project();\n$t_access = current_user_get_access_level();\n\n# process the changes to threshold values\n$t_valid_thresholds = array(\n\t'bug_submit_status',\n\t'bug_resolved_status_threshold',\n\t'bug_reopen_status',\n);\n\nforeach( $t_valid_thresholds as $t_threshold ) {\n\t$t_access_current = config_get_access( $t_threshold );\n\tif( $t_access >= $t_access_current ) {\n\t\t$f_value = gpc_get( 'threshold_' . $t_threshold );\n\t\t$t_value_current = config_get( $t_threshold );\n\t\t$t_value_parent = config_get_parent( $t_project, $t_threshold );\n\n\t\t$f_access = gpc_get( 'access_' . $t_threshold );\n\t\t$t_access_parent = config_get_access_parent( $t_project, $t_threshold );\n\n\t\tif( $f_value == $t_value_parent && $f_access == $t_access_parent ) {\n\t\t\t# If new value is equal to parent and access has not changed\n\t\t\tconfig_delete( $t_threshold, ALL_USERS, $t_project );\n\t\t} else if( $f_value != $t_value_current || $f_access != $t_access_current ) {\n\t\t\t# Set config if value or access have changed\n\t\t\tconfig_set( $t_threshold, $f_value, NO_USER, $t_project, $f_access );\n\t\t}\n\t}\n}\n\n$t_enum_status = MantisEnum::getAssocArrayIndexedByValues( config_get( 'status_enum_string' ) );\n\n# process the workflow by reversing the flags to a matrix and creating the appropriate string\nif( config_get_access( 'status_enum_workflow' ) <= $t_access ) {\n\t$f_value = gpc_get( 'flag', array() );\n\t$f_value = $f_value ?? [];\n\t$f_access = gpc_get( 'workflow_access' );\n\t$t_matrix = array();\n\n\tforeach( $f_value as $t_transition ) {\n\t\tlist( $t_from, $t_to ) = explode( ':', $t_transition );\n\t\t$t_matrix[$t_from][$t_to] = '';\n\t}\n\t$t_workflow = array();\n\tforeach( $t_enum_status as $t_state => $t_label ) {\n\t\t$t_workflow_row = '';\n\t\t$t_default = gpc_get_int( 'default_' . $t_state );\n\t\tif( isset( $t_matrix[$t_state] ) && isset( $t_matrix[$t_state][$t_default] ) ) {\n\t\t\t$t_workflow_row .= $t_default . ':' . get_enum_element( 'status', $t_default );\n\t\t\tunset( $t_matrix[$t_state][$t_default] );\n\t\t\t$t_first = false;\n\t\t} else {\n\t\t\t# error default state isn't in the matrix\n\t\t\techo '<p>' . sprintf( lang_get( 'default_not_in_flow' ), get_enum_element( 'status', $t_default ), get_enum_element( 'status', $t_state ) )  . '</p>';\n\t\t\t$t_first = true;\n\t\t}\n\t\tif( isset( $t_matrix[$t_state] ) ) {\n\t\t\tforeach ( $t_matrix[$t_state] as $t_next_state => $t_junk ) {\n\t\t\t\tif( false == $t_first ) {\n\t\t\t\t\t$t_workflow_row .= ',';\n\t\t\t\t}\n\t\t\t\t$t_workflow_row .= $t_next_state . ':' . get_enum_element( 'status', $t_next_state );\n\t\t\t\t$t_first = false;\n\t\t\t}\n\t\t}\n\t\t# $t_workflow_row is allowed to be empty ''\n\t\t$t_workflow[$t_state] = $t_workflow_row;\n\t}\n\n\t# Get the parent's workflow, if not set default to all transitions\n\t$t_access_parent = config_get_access_parent( $t_project, 'status_enum_workflow' );\n\t$t_access_current = config_get_access( 'status_enum_workflow' );\n\t$t_workflow_parent = config_get_parent( $t_project, 'status_enum_workflow' );\n\tif( 0 == count( $t_workflow_parent ) ) {\n\t\tforeach( $t_enum_status as $t_status => $t_label ) {\n\t\t\t$t_temp_workflow = array();\n\t\t\tforeach( $t_enum_status as $t_next => $t_next_label ) {\n\t\t\t\tif( $t_status != $t_next ) {\n\t\t\t\t\t$t_temp_workflow[] = $t_next . ':' . $t_next_label;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$t_workflow_parent[$t_status] = implode( ',', $t_temp_workflow );\n\t\t}\n\t}\n\n\tif( $t_workflow == $t_workflow_parent && $f_access == $t_access_parent ) {\n\t\t# If new value is equal to parent and access has not changed\n\t\tconfig_delete( 'status_enum_workflow', ALL_USERS, $t_project );\n\t} else if( $t_workflow != config_get( 'status_enum_workflow' ) || $f_access != $t_access_current ) {\n\t\t# Set config if value or access have changed\n\t\tconfig_set( 'status_enum_workflow', $t_workflow, NO_USER, $t_project, $f_access );\n\t}\n}\n\n# process the access level changes\nif( min( config_get_access( 'set_status_threshold' ), config_get_access( 'report_bug_threshold' ) ) <= $t_access ) {\n\t# get changes to access level to change these values\n\t$f_access = gpc_get( 'status_access' );\n\t$t_access_parent = config_get_access_parent( $t_project, 'set_status_threshold' );\n\t$t_access_current = config_get_access( 'set_status_threshold' );\n\n\t# Build access level reference arrays (parent level and current config)\n\t$t_set_parent = config_get_parent( $t_project, 'set_status_threshold' );\n\t$t_set_current = config_get( 'set_status_threshold' );\n\t$t_bug_submit_status = config_get( 'bug_submit_status' );\n\tforeach( $t_enum_status as $t_status => $t_status_label ) {\n\t\tif( !isset( $t_set_parent[$t_status] ) ) {\n\t\t\tif( $t_bug_submit_status == $t_status && config_get_access( 'report_bug_threshold' ) <= $t_access ) {\n\t\t\t\t$t_set_parent[$t_status] = config_get_parent( $t_project, 'report_bug_threshold' );\n\t\t\t} elseif( config_get_access( 'set_status_threshold' ) <= $t_access ) {\n\t\t\t\t$t_set_parent[$t_status] = config_get_parent( $t_project, 'update_bug_status_threshold' );\n\t\t\t}\n\t\t}\n\t\tif( !isset( $t_set_current[$t_status] ) ) {\n\t\t\tif( $t_bug_submit_status == $t_status && config_get_access( 'report_bug_threshold' ) <= $t_access ) {\n\t\t\t\t$t_set_current[$t_status] = config_get( 'report_bug_threshold' );\n\t\t\t} elseif( config_get_access( 'set_status_threshold' ) <= $t_access ) {\n\t\t\t\t$t_set_current[$t_status] = config_get( 'update_bug_status_threshold' );\n\t\t\t}\n\t\t}\n\t}\n\n\t# walk through the status labels to set the status threshold\n\t$t_set_new = array();\n\tforeach( $t_enum_status as $t_status_id => $t_status_label ) {\n\t\t$f_level = gpc_get_int( 'access_change_' . $t_status_id, -1 );\n\t\tif( config_get( 'bug_submit_status' ) == $t_status_id ) {\n\t\t\t# Check if input exists\n\t\t\tif( $f_level > -1 ) {\n\t\t\t\tif( $f_level != $t_set_parent[$t_status_id] ) {\n\t\t\t\t\tconfig_set( 'report_bug_threshold', (int)$f_level, ALL_USERS, $t_project, $f_access );\n\t\t\t\t} else {\n\t\t\t\t\tconfig_delete( 'report_bug_threshold', ALL_USERS, $t_project );\n\t\t\t\t}\n\t\t\t}\n\t\t\tunset( $t_set_parent[$t_status_id] );\n\t\t\tunset( $t_set_current[$t_status_id] );\n\t\t} else {\n\t\t\t# Only process those inputs that exist, since not all access_change_<status> may have been editable.\n\t\t\tif( $f_level > -1 ) {\n\t\t\t\t$t_set_new[$t_status_id] = $f_level;\n\t\t\t} else {\n\t\t\t\tif( isset( $t_set_current[$t_status_id] ) ) {\n\t\t\t\t\t$t_set_new[$t_status_id] = $t_set_current[$t_status_id];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif( $t_set_new == $t_set_parent && $f_access == $t_access_parent ) {\n\t\t# If new value is equal to parent and access has not changed\n\t\tconfig_delete( 'set_status_threshold', ALL_USERS, $t_project );\n\t} else if( $t_set_new != $t_set_current || $f_access != $t_access_current ) {\n\t\t# Set config if value or access have changed\n\t\tconfig_set( 'set_status_threshold', $t_set_new, ALL_USERS, $t_project, $f_access );\n\t}\n}\n\nform_security_purge( 'manage_config_workflow_set' );\n\nprint_header_redirect( 'manage_config_workflow_page.php' );\n"
        },
        {
          "name": "manage_custom_field_create.php",
          "type": "blob",
          "size": 2.048828125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Custom Field Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_custom_field_create' );\n\nauth_reauthenticate();\naccess_ensure_global_level( config_get( 'manage_custom_fields_threshold' ) );\n\n$f_name\t= gpc_get_string( 'name' );\n\n$t_field_id = custom_field_create( $f_name );\n\nform_security_purge( 'manage_custom_field_create' );\n\nif( ON == config_get( 'custom_field_edit_after_create' ) ) {\n\t$t_redirect_url = 'manage_custom_field_edit_page.php?field_id=' . $t_field_id;\n} else {\n\t$t_redirect_url = 'manage_custom_field_page.php';\n}\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_custom_field_delete.php",
          "type": "blob",
          "size": 2.345703125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Custom Field Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses custom_field_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'manage_custom_field_update' );\n\nauth_reauthenticate();\naccess_ensure_global_level( config_get( 'manage_custom_fields_threshold' ) );\n\n$f_field_id\t= gpc_get_int( 'field_id' );\n$f_return = strip_tags( gpc_get_string( 'return', 'manage_custom_field_page.php' ) );\n\n$t_definition = custom_field_get_definition( $f_field_id );\n\nif( 0 < count( custom_field_get_project_ids( $f_field_id ) ) ) {\n\t$t_msg = lang_get( 'confirm_used_custom_field_deletion' );\n} else {\n\t$t_msg = lang_get( 'confirm_custom_field_deletion' );\n}\nhelper_ensure_confirmed(\n\tsprintf( $t_msg, string_attribute( $t_definition['name'] ) ),\n\tlang_get( 'field_delete_button' )\n);\n\ncustom_field_destroy( $f_field_id );\n\nform_security_purge( 'manage_custom_field_update' );\n\nprint_header_redirect( $f_return );\n"
        },
        {
          "name": "manage_custom_field_edit_page.php",
          "type": "blob",
          "size": 13.134765625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Custom Field Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses custom_field_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nauth_reauthenticate();\n\naccess_ensure_global_level( config_get( 'manage_custom_fields_threshold' ) );\n\n$f_field_id\t= gpc_get_int( 'field_id' );\n$f_return\t= strip_tags( gpc_get_string( 'return', 'manage_custom_field_page.php' ) );\n\ncustom_field_ensure_exists( $f_field_id );\n\nrequire_js( 'manage_custom_field_edit_page.js' );\n\nlayout_page_header();\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_custom_field_page.php' );\n\n$t_definition = custom_field_get_definition( $f_field_id );\n?>\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n\n<div id=\"manage-custom-field-update-div\" class=\"form-container\">\n<form id=\"manage-custom-field-update-form\" method=\"post\" action=\"manage_custom_field_update.php\">\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-flask', 'ace-icon' ); ?>\n\t\t<?php echo lang_get( 'edit_custom_field_title' ) ?>\n\t</h4>\n</div>\n\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n<div class=\"table-responsive\">\n\t<fieldset>\n\t\t<?php echo form_security_field( 'manage_custom_field_update' ); ?>\n\t\t<input type=\"hidden\" name=\"field_id\" value=\"<?php echo $f_field_id ?>\" />\n\t\t<input type=\"hidden\" name=\"return\" value=\"<?php echo string_attribute( $f_return ); ?>\" />\n\n<table class=\"table table-bordered table-condensed table-striped\">\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-name\">\n\t\t\t\t<?php echo lang_get( 'custom_field_name' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<input type=\"text\" id=\"custom-field-name\" name=\"name\"\n\t\t\t\t   class=\"input-sm\" size=\"32\" maxlength=\"64\"\n\t\t\t\t   value=\"<?php echo string_attribute( $t_definition['name'] ) ?>\"\n\t\t\t/>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-type\">\n\t\t\t\t<?php echo lang_get( 'custom_field_type' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<select id=\"custom-field-type\" name=\"type\" class=\"input-sm\">\n\t\t\t\t<?php print_enum_string_option_list( 'custom_field_type', (int)$t_definition['type'] ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-possible-values\">\n\t\t\t\t<?php echo lang_get( 'custom_field_possible_values' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<input type=\"text\" id=\"custom-field-possible-values\" name=\"possible_values\"\n\t\t\t\t   class=\"input-sm\" size=\"80%\"\n\t\t\t\t   value=\"<?php echo string_attribute( $t_definition['possible_values'] ) ?>\"\n\t\t\t/>\n\t\t\t<small><?php echo sprintf( lang_get( 'separate_list_items_by' ), '|' ) ?></small>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-default-value\">\n\t\t\t\t<?php echo lang_get( 'custom_field_default_value' ) ?>\n\t\t\t</label>\n\t\t\t<label for=\"custom-field-default-value-textarea\">\n\t\t\t\t<?php echo lang_get( 'custom_field_default_value' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<div class=\"input\">\n\t\t\t\t<input type=\"text\" id=\"custom-field-default-value\" name=\"default_value\"\n\t\t\t\t\t   class=\"input-sm\" size=\"32\" maxlength=\"255\"\n\t\t\t\t\t   value=\"<?php echo string_attribute( $t_definition['default_value'] ) ?>\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"textarea\">\n\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t<textarea id=\"custom-field-default-value-textarea\" name=\"default_value\"\n\t\t\t\t\t\t  class=\"form-control\" cols=\"80\" rows=\"10\" disabled=\"disabled\">\n<?php echo string_attribute( $t_definition['default_value'] ) ?>\n</textarea>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-valid-regexp\">\n\t\t\t\t<?php echo lang_get( 'custom_field_valid_regexp' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<input type=\"text\" id=\"custom-field-valid-regexp\" name=\"valid_regexp\"\n\t\t\t\t   class=\"input-sm\" size=\"32\" maxlength=\"255\"\n\t\t\t\t   value=\"<?php echo string_attribute( $t_definition['valid_regexp'] ) ?>\"\n\t\t\t/>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-access-level-r\">\n\t\t\t\t<?php echo lang_get( 'custom_field_access_level_r' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<select id=\"custom-field-access-level-r\" name=\"access_level_r\" class=\"input-sm\">\n\t\t\t\t<?php print_enum_string_option_list( 'access_levels', (int)$t_definition['access_level_r'] ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-access-level-rw\">\n\t\t\t\t<?php echo lang_get( 'custom_field_access_level_rw' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<select id=\"custom-field-access-level-rw\" name=\"access_level_rw\" class=\"input-sm\">\n\t\t\t\t<?php print_enum_string_option_list( 'access_levels', (int)$t_definition['access_level_rw'] ) ?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-length-min\">\n\t\t\t\t<?php echo lang_get( 'custom_field_length_min' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<input type=\"text\" id=\"custom-field-length-min\" name=\"length_min\"\n\t\t\t\t   class=\"input-sm\" size=\"32\" maxlength=\"64\"\n\t\t\t\t   value=\"<?php echo $t_definition['length_min'] ?>\"\n\t\t\t/>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-length-max\">\n\t\t\t\t<?php echo lang_get( 'custom_field_length_max' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<input type=\"text\" id=\"custom-field-length-max\" name=\"length_max\"\n\t\t\t\t   class=\"input-sm\" size=\"32\" maxlength=\"64\"\n\t\t\t\t   value=\"<?php echo $t_definition['length_max'] ?>\"\n\t\t\t/>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-filter-by\">\n\t\t\t\t<?php echo lang_get( 'custom_field_filter_by' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" id=\"custom-field-filter-by\" name=\"filter_by\"\n\t\t\t\t\t   class=\"ace\" value=\"1\"\n\t\t\t\t\t<?php\n\t\t\t\t\tif( $t_definition['filter_by'] ) {\n\t\t\t\t\t\techo 'checked=\"checked\"';\n\t\t\t\t\t}\n\t\t\t\t\t?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-display-report\">\n\t\t\t\t<?php echo lang_get( 'custom_field_display_report' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" id=\"custom-field-display-report\" name=\"display_report\"\n\t\t\t\t\t   class=\"ace\" value=\"1\"\n\t\t\t\t\t   <?php check_checked( (bool)$t_definition['display_report'] ) ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-display-update\">\n\t\t\t\t<?php echo lang_get( 'custom_field_display_update' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" id=\"custom-field-display-update\" name=\"display_update\"\n\t\t\t\t\t   class=\"ace\" value=\"1\"\n\t\t\t\t\t   <?php check_checked( (bool)$t_definition['display_update'] ) ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-display-resolved\">\n\t\t\t\t<?php echo lang_get( 'custom_field_display_resolved' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" id=\"custom-field-display-resolved\" name=\"display_resolved\"\n\t\t\t\t\t   class=\"ace\" value=\"1\"\n\t\t\t\t\t   <?php check_checked( (bool)$t_definition['display_resolved'] ) ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-display-closed\">\n\t\t\t\t<?php echo lang_get( 'custom_field_display_closed' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" id=\"custom-field-display-closed\" name=\"display_closed\"\n\t\t\t\t\t   class=\"ace\" value=\"1\"\n\t\t\t\t\t   <?php check_checked( (bool)$t_definition['display_closed'] ) ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-require-report\">\n\t\t\t\t<?php echo lang_get( 'custom_field_require_report' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" id=\"custom-field-require-report\" name=\"require_report\"\n\t\t\t\t\t   class=\"ace\" value=\"1\"\n\t\t\t\t\t   <?php check_checked( (bool)$t_definition['require_report'] ) ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-require-update\">\n\t\t\t\t<?php echo lang_get( 'custom_field_require_update' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" id=\"custom-field-require-update\" name=\"require_update\"\n\t\t\t\t\t   class=\"ace\" value=\"1\"\n\t\t\t\t\t<?php check_checked( (bool)$t_definition['require_update'] ) ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-require-resolved\">\n\t\t\t\t<?php echo lang_get( 'custom_field_require_resolved' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" id=\"custom-field-require-resolved\" name=\"require_resolved\"\n\t\t\t\t\t   class=\"ace\" value=\"1\"\n\t\t\t\t\t   <?php check_checked( (bool)$t_definition['require_resolved'] ) ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<label for=\"custom-field-require-closed\">\n\t\t\t\t<?php echo lang_get( 'custom_field_require_closed' ) ?>\n\t\t\t</label>\n\t\t</td>\n\t\t<td>\n\t\t\t<label>\n\t\t\t\t<input type=\"checkbox\" id=\"custom-field-require-closed\" name=\"require_closed\"\n\t\t\t\t\t   class=\"ace\" value=\"1\"\n\t\t\t\t\t   <?php check_checked( (bool)$t_definition['require_closed'] ) ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t</label>\n\t\t</td>\n\t</tr>\n</table>\n\t</fieldset>\n</div>\n</div>\n</div>\n<div class=\"widget-toolbox padding-8 clearfix\">\n\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t<?php echo lang_get( 'update_custom_field_button' ) ?>\n\t</button>\n\t<button class=\"btn btn-primary btn-white btn-round\"\n\t\t\tformaction=\"manage_custom_field_delete.php\">\n\t\t<?php echo lang_get( 'delete_custom_field_button' ) ?>\n\t</button>\n</div>\n</div>\n</form>\n</div>\n</div>\n\n<?php /** @todo There is access checking in the ADD action page and at the top of this file.\n\t\t   * We may need to add extra checks to exclude projects from the list that the user\n\t\t   * can't link/unlink fields from/to. */\n?>\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\n\t<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-link', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'link_custom_field_to_project_title' ) ?>\n\t\t</h4>\n\t</div>\n\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div class=\"table-responsive\">\n\t\t\t\t<div class=\"form-container\" id=\"manage-custom-field-link-div\">\n\t\t\t\t\t<form id=\"manage-custom-field-link-form\" method=\"post\" action=\"manage_custom_field_proj_add.php\">\n\n\t\t\t\t\t\t<input type=\"hidden\" name=\"field_id\" value=\"<?php echo $f_field_id ?>\" />\n\t\t\t\t\t\t<?php echo form_security_field( 'manage_custom_field_proj_add' ); ?>\n\n\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t\t<tr id=\"custom-field-link-project\">\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'linked_projects_label' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php print_custom_field_projects_list( $f_field_id ); ?>\n\t\t\t\t</td>\n\t\t\t\t</tr>\n\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<label for=\"custom-field-project-id\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'projects_title_label' ) ?>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<select id=\"custom-field-project-id\" name=\"project_id[]\"\n\t\t\t\t\t\t\t\tclass=\"input-sm\" multiple=\"multiple\" size=\"5\">\n\t\t\t\t\t\t\t<?php print_project_option_list( null, false ); ?>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<label for=\"custom-field-sequence\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'custom_field_sequence_label' ) ?>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type=\"text\" id=\"custom-field-sequence\" name=\"sequence\" class=\"input-sm\" value=\"0\" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan=\"2\" class=\"no-padding\">\n\t\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\"\n\t\t\t\t\t\t\t   value=\"<?php echo lang_get( 'link_custom_field_to_project_button' ) ?>\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "manage_custom_field_page.php",
          "type": "blob",
          "size": 4.0703125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Custom Field Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses custom_field_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'string_api.php' );\n\nauth_reauthenticate();\n\naccess_ensure_global_level( config_get( 'manage_custom_fields_threshold' ) );\n\nlayout_page_header( lang_get( 'manage_custom_field_link' ) );\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_custom_field_page.php' );\n\n$t_all_ids = custom_field_get_ids();\n$t_all_defs = array();\nforeach( $t_all_ids as $t_id ) {\n\t$t_all_defs[] = custom_field_get_definition( $t_id );\n}\n$t_all_defs = multi_sort( $t_all_defs, 'name' );\n\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-flask', 'ace-icon' ); ?>\n\t\t<?php echo lang_get( 'custom_fields_setup' ) ?>\n\t</h4>\n</div>\n<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive sortable\">\n\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th><?php echo lang_get( 'custom_field_name' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'custom_field_project_count' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'custom_field_type' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'custom_field_possible_values' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'custom_field_default_value' ) ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<?php\n\t\t\tforeach( $t_all_defs as $t_def ) {\n\t\t\t?>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<a href=\"manage_custom_field_edit_page.php?field_id=<?php echo $t_def['id'] ?>\"><?php echo custom_field_get_display_name( $t_def['name'] ) ?></a>\n\t\t\t\t</td>\n\t\t\t\t<td><?php echo count( custom_field_get_project_ids( $t_def['id'] ) ) ?></td>\n\t\t\t\t<td><?php echo get_enum_element( 'custom_field_type', $t_def['type'] ) ?></td>\n\t\t\t\t<?php\n\t\t\t\t# workaround to enforce line break displaying custom field values\n\t\t\t\t# @todo replace by CSS after we don't support any longer browsers without CSS3 support\n\t\t\t\t?>\n\t\t\t\t<td><?php echo str_replace( '|', ' | ', string_display_line( $t_def['possible_values'] ) ) ?></td>\n\t\t\t\t<td><?php echo string_display( $t_def['default_value'] ) ?></td>\n\t\t\t</tr>\n\t\t\t<?php\n\t\t\t} # foreach end\n\t\t\t?>\n\t\t</tbody>\n\t</table>\n\t</div>\n</div>\n<div class=\"widget-toolbox padding-8 clearfix\">\n\t<form method=\"post\" action=\"manage_custom_field_create.php\" class=\"form-inline\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_custom_field_create' ); ?>\n\t\t\t<input type=\"text\" class=\"input-sm\" name=\"name\" size=\"32\" maxlength=\"64\" />\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\" value=\"<?php echo lang_get( 'add_custom_field_button' ) ?>\" />\n\t\t</fieldset>\n\t</form>\n</div>\n</div>\n</div>\n</div><?php\n\nlayout_page_end();\n"
        },
        {
          "name": "manage_custom_field_proj_add.php",
          "type": "blob",
          "size": 2.087890625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Custom Field Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses custom_field_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_custom_field_proj_add' );\n\nauth_reauthenticate();\n\n$f_field_id = gpc_get_int( 'field_id' );\n$f_project_id = gpc_get_int_array( 'project_id', array() );\n$f_sequence\t= gpc_get_int( 'sequence' );\n\n$t_manage_project_threshold = config_get( 'manage_project_threshold' );\n\nforeach ( $f_project_id as $t_proj_id ) {\n\tif( access_has_project_level( $t_manage_project_threshold, $t_proj_id ) ) {\n\t\tif( !custom_field_is_linked( $f_field_id, $t_proj_id ) ) {\n\t\t\tcustom_field_link( $f_field_id, $t_proj_id );\n\t\t}\n\n\t\tcustom_field_set_sequence( $f_field_id, $t_proj_id, $f_sequence );\n\t}\n}\n\nform_security_purge( 'manage_custom_field_proj_add' );\n\nprint_header_redirect( 'manage_custom_field_edit_page.php?field_id=' . $f_field_id );\n"
        },
        {
          "name": "manage_custom_field_update.php",
          "type": "blob",
          "size": 3.2685546875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update Custom Field Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses custom_field_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_custom_field_update' );\n\nauth_reauthenticate();\naccess_ensure_global_level( config_get( 'manage_custom_fields_threshold' ) );\n\n$f_field_id\t\t\t\t\t\t= gpc_get_int( 'field_id' );\n$f_return\t\t\t\t\t\t= strip_tags( gpc_get_string( 'return', 'manage_custom_field_page.php' ) );\n$t_values['name']\t\t\t\t= gpc_get_string( 'name' );\n$t_values['type']\t\t\t\t= gpc_get_int( 'type' );\n$t_values['possible_values']\t= gpc_get_string( 'possible_values' );\n$t_values['default_value']\t\t= gpc_get_string( 'default_value' );\n$t_values['valid_regexp']\t\t= gpc_get_string( 'valid_regexp' );\n$t_values['access_level_r']\t\t= gpc_get_int( 'access_level_r' );\n$t_values['access_level_rw']\t= gpc_get_int( 'access_level_rw' );\n$t_values['length_min']\t\t\t= gpc_get_int( 'length_min' );\n$t_values['length_max']\t\t\t= gpc_get_int( 'length_max' );\n$t_values['display_report']\t\t= gpc_get_bool( 'display_report' );\n$t_values['display_update']\t\t= gpc_get_bool( 'display_update' );\n$t_values['display_resolved']\t= gpc_get_bool( 'display_resolved' );\n$t_values['display_closed']\t\t= gpc_get_bool( 'display_closed' );\n$t_values['require_report']\t\t= gpc_get_bool( 'require_report' );\n$t_values['require_update']\t\t= gpc_get_bool( 'require_update' );\n$t_values['require_resolved']\t= gpc_get_bool( 'require_resolved' );\n$t_values['require_closed']\t\t= gpc_get_bool( 'require_closed' );\n$t_values['filter_by']\t\t\t= gpc_get_bool( 'filter_by' );\n\n$t_def = custom_field_get_definition( $f_field_id );\nif( $t_def['type'] != $t_values['type'] && custom_field_has_data( $f_field_id ) ) {\n\thelper_ensure_confirmed(\n\t\tsprintf( lang_get( 'warning_update_custom_field_type' ),\n\t\t\tstring_attribute( $t_def['name'] )\n\t\t),\n\t\tlang_get( 'update' )\n\t);\n}\n\ncustom_field_update( $f_field_id, $t_values );\n\nform_security_purge( 'manage_custom_field_update' );\n\nprint_header_redirect( $f_return );\n"
        },
        {
          "name": "manage_filter_delete.php",
          "type": "blob",
          "size": 1.94140625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handler to delete a stored query.\n *\n * Takes filter_id as a parameter\n *\n * @package MantisBT\n * @copyright Copyright 2016  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses filter_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_filter_delete' );\n\nauth_ensure_user_authenticated();\n\n$f_filter_id = gpc_get_int( 'filter_id' );\n$t_redirect_url = 'manage_filter_page.php';\n\nif( !filter_db_can_delete_filter( $f_filter_id ) ) {\n\tprint_header_redirect( $t_redirect_url );\n\texit;\n}\n\nhelper_ensure_confirmed(\n\tsprintf( lang_get( 'query_delete_msg' ),\n\t\tstring_attribute( filter_get_field( $f_filter_id, 'name' ) )\n\t),\n\tlang_get( 'delete_query' )\n);\n\nfilter_db_delete_filter( $f_filter_id );\n\nform_security_purge( 'manage_filter_delete' );\n\nprint_header_redirect( 'manage_filter_page.php' );\n"
        },
        {
          "name": "manage_filter_edit_page.php",
          "type": "blob",
          "size": 6.849609375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage filter edit page\n *\n * @package MantisBT\n * @copyright Copyright 2016  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses custom_field_api.php\n * @uses filter_api.php\n * @uses filter_constants_inc.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'filter_constants_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'version_api.php' );\n\nauth_ensure_user_authenticated();\n\nlayout_page_header( lang_get('manage_filter_edit_page_title' ) );\n\nlayout_page_begin( 'manage_filter_edit_page.php' );\n\n$f_filter_id = gpc_get_int( 'filter_id', null );\nif( null === $f_filter_id ) {\n\terror_parameters( 'FILTER_ID' );\n\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n}\n\n$t_filter = filter_get( $f_filter_id, null );\nif( null === $t_filter ) {\n\taccess_denied();\n}\n\n$f_view_type = gpc_get_string( 'view_type', $t_filter['_view_type'] );\n$t_filter['_view_type'] = $f_view_type;\n$t_filter = filter_ensure_valid_filter( $t_filter );\n\n$t_action = 'manage_filter_edit_update.php';\n$t_current_project_id = helper_get_current_project();\n$t_filter_project_id = filter_get_field( $f_filter_id, 'project_id' );\n\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\n\t<form method=\"post\" name=\"filters\" id=\"filters_form_open\" action=\"<?php echo $t_action; ?>\">\n\t<input type=\"hidden\" name=\"filter_id\" value=\"<?php echo $f_filter_id ?>\" >\n\t<input type=\"hidden\" name=\"view_type\" value=\"<?php echo $t_filter['_view_type'] ?>\" >\n\t<?php echo form_security_field( 'manage_filter_edit_update' ) ?>\n\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-filter', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get('edit_filter') ?>\n\t\t\t</h4>\n\n\t\t\t<div class=\"widget-toolbar\">\n\t\t\t\t<div class=\"widget-menu\">\n\t\t\t\t\t<a href=\"#\" data-action=\"settings\" data-toggle=\"dropdown\">\n\t\t\t\t\t\t<?php print_icon( 'fa-bars', 'ace-icon bigger-125' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t\t<ul class=\"dropdown-menu dropdown-menu-right dropdown-yellow dropdown-caret dropdown-closer\">\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t$t_url = 'manage_filter_edit_page.php?filter_id=' . $f_filter_id . '&view_type=';\n\t\t\t\t\t\t\tfilter_print_view_type_toggle( $t_url, $t_filter['_view_type'] );\n\t\t\t\t\t\t?>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main no-padding\">\n\n\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t<div class=\"btn-toolbar pull-left\">\n\t\t\t\t\t\t<div class=\"form-inline\">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'query_name' ) ?>&nbsp;\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"25\" name=\"filter_name\" maxlength=\"64\" value=\"<?php echo string_display_line( filter_get_field( $f_filter_id, 'name' ) ) ?>\">\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t<?php\n\t\t\t\t\t$t_for_screen = true;\n\t\t\t\t\t$t_static = gpc_get_bool( 'static', false );\n\t\t\t\t\tfilter_form_draw_inputs( $t_filter, $t_for_screen, $t_static );\n\t\t\t\t\t?>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tif( access_has_project_level( config_get( 'stored_query_create_shared_threshold' ) ) ) {\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" class=\"ace\" name=\"is_public\" value=\"1\" <?php check_checked( (bool)filter_get_field( $f_filter_id, 'is_public' ), true ) ?> />\n\t\t\t\t\t\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'public' ) ?></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t&#160;&#160;&#160;&#160;\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" class=\"ace\" name=\"is_public\" value=\"0\" <?php check_checked( (bool)filter_get_field( $f_filter_id, 'is_public' ), false ) ?> />\n\t\t\t\t\t\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'private' ) ?></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'email_project' ) ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label class=\"inline\">\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" class=\"ace input-sm\" name=\"filter_project_id\" value=\"<?php echo ALL_PROJECTS ?>\" <?php check_checked( ALL_PROJECTS == $t_filter_project_id ) ?>>\n\t\t\t\t\t\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'all_projects' ) ?></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t<?php if( ALL_PROJECTS != $t_filter_project_id ) { ?>\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" class=\"ace input-sm\" name=\"filter_project_id\" value=\"<?php echo $t_filter_project_id ?>\" <?php check_checked( ALL_PROJECTS != $t_filter_project_id ) ?>>\n\t\t\t\t\t\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'stored_project' ) . ' (' . string_display_line( project_get_name( $t_filter_project_id ) ) . ')' ?></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t<?php if( $t_filter_project_id != $t_current_project_id ) { ?>\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" class=\"ace input-sm\" name=\"filter_project_id\" value=\"<?php echo $t_current_project_id ?>\">\n\t\t\t\t\t\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'current_project' ) . ' (' . string_display_line( project_get_name( $t_current_project_id ) ) . ')' ?></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'update_filter' ) ?>\" />\n\t\t</div>\n\t</div>\n\t</form>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "manage_filter_edit_update.php",
          "type": "blob",
          "size": 3.2607421875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage filter edit update page\n *\n * @package MantisBT\n * @copyright Copyright 2016  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses filter_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'filter_api.php' );\n\nform_security_validate( 'manage_filter_edit_update' );\n\nauth_ensure_user_authenticated();\n\n$t_errors = array();\n\n$f_filter_id = gpc_get_int( 'filter_id', null );\nif( null === $f_filter_id ) {\n\terror_parameters( 'FILTER_ID' );\n\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n}\n\n$t_filter = filter_get( $f_filter_id, null );\nif( null === $t_filter ) {\n\taccess_denied();\n}\n\n$f_filter_name = gpc_get_string( 'filter_name', null );\n# Check if filter name has been modified\n# The filter name is now trimmed of white spaces before being saved, if the filter name\n# had untrimmed spaces but the user did not change it, we keep it as is for compatibility\nif( $f_filter_name != filter_get_field( $f_filter_id, 'name' ) ) {\n\t$f_filter_name = string_normalize( strip_tags( gpc_get_string( 'filter_name' ) ) );\n\t# Check for a blank name\n\tif( is_blank( $f_filter_name ) ) {\n\t\t$t_errors[] = lang_get( 'query_blank_name' );\n\t}\n\t# Check name length\n\tif( !filter_name_valid_length( $f_filter_name ) ) {\n\t\t$t_errors[] = lang_get( 'query_name_too_long' );\n\t}\n\t# Check and make sure they don't already have a query with the same name\n\t$t_query_arr = filter_db_get_available_queries();\n\tforeach( $t_query_arr as $t_name )\t{\n\t\tif( $f_filter_name == string_normalize( $t_name ) ) {\n\t\t\t$t_errors[] = lang_get( 'query_dupe_name' );\n\t\t\tbreak;\n\t\t}\n\t}\n} else {\n\t# filter name will not be updated\n\t$f_filter_name = null;\n}\n\nif( access_has_project_level( config_get( 'stored_query_create_shared_threshold' ) ) ) {\n\t$f_is_public = gpc_get_bool( 'is_public' );\n} else {\n\t# don't modify it\n\t$f_is_public = null;\n}\n\n$f_project_id = gpc_get_int( 'filter_project_id', null );\n\n$t_editable = filter_db_can_delete_filter( $f_filter_id );\nif( !$t_editable ) {\n\taccess_denied();\n}\n\n$t_filter = filter_gpc_get( $t_filter );\n\nform_security_purge( 'manage_filter_edit_update' );\n\nif( empty( $t_errors ) ) {\n\tfilter_db_update_filter( $f_filter_id, filter_serialize( $t_filter ), $f_project_id, $f_is_public, $f_filter_name );\n\tprint_header_redirect( 'manage_filter_page.php' );\n}\n\n# If there is any error message:\n$t_error_html = '<li>' . implode( '</li><li>', $t_errors ) . '</li>';\n\nlayout_page_header();\nlayout_admin_page_begin();\necho '<div class=\"space-10\"></div>';\nhtml_operation_failure(\n\t\t\t\thelper_mantis_url( 'manage_filter_edit_page.php?filter_id=' . $f_filter_id ),\n\t\t\t\t$t_error_html\n\t\t\t);\nlayout_admin_page_end();\n"
        },
        {
          "name": "manage_filter_page.php",
          "type": "blob",
          "size": 4.986328125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage Filter Page\n *\n * @package MantisBT\n * @copyright Copyright 2016  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses database_api.php\n * @uses filter_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses rss_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'rss_api.php' );\n\nauth_ensure_user_authenticated();\n\nlayout_page_header( lang_get('manage_filter_page_title' ) );\n\nlayout_page_begin( 'manage_filter_page.php' );\n\n$t_project_id = helper_get_current_project();\n$t_user_id = auth_get_current_user_id();\n\nif( !access_has_project_level( config_get( 'stored_query_use_threshold' ) ) ) {\n\taccess_denied();\n}\n\n$t_filter_ids_available =\n\t\tfilter_db_get_named_filters( ALL_PROJECTS, $t_user_id, false ) +\n\t\tfilter_db_get_named_filters( ALL_PROJECTS, null, true ) +\n\t\tfilter_db_get_named_filters( $t_project_id, $t_user_id, false ) +\n\t\tfilter_db_get_named_filters( $t_project_id, null, true )\n\t\t;\nfilter_cache_rows( $t_filter_ids_available );\n\n$t_rss_enabled = config_get( 'rss_enabled' );\n\nfunction table_print_filter_headers() {\n\tglobal $t_rss_enabled;\n?>\n\t<thead>\n\t\t<tr>\n\t\t\t<th><?php echo lang_get( 'query_name' ) ?></th>\n\t\t\t<?php if( $t_rss_enabled ) { ?>\n\t\t\t\t<th><?php echo lang_get( 'rss' ) ?></th>\n\t\t\t<?php } ?>\n\t\t\t<th><?php echo lang_get( 'email_project' ) ?></th>\n\t\t\t<th><?php echo lang_get( 'public' ) ?></th>\n\t\t\t<th><?php echo lang_get( 'owner' ) ?></th>\n\t\t\t<th><?php echo lang_get( 'actions' ) ?></th>\n\t\t</tr>\n\t</thead>\n<?php\n}\n\nfunction table_print_filter_row( $p_filter_id ) {\n\tglobal $t_rss_enabled;\n\t$t_editable = filter_db_can_delete_filter( $p_filter_id );\n\techo '<tr>';\n\t# Filter name\n\techo '<td>';\n\t$t_name = filter_get_field( $p_filter_id, 'name' );\n\tprint_link( 'view_filters_page.php?filter_id=' . $p_filter_id, $t_name );\n\techo '</td>';\n\t# RSS\n\tif( $t_rss_enabled ) {\n\t\techo '<td class=\"center\">';\n\t\tprint_rss( rss_get_issues_feed_url( null, null, $p_filter_id ), lang_get( 'rss' ) );\n\t\techo '</td>';\n\t}\n\t# Project\n\techo '<td>' . string_display_line( project_get_name( filter_get_field( $p_filter_id, 'project_id' ) ) ) . '</td>';\n\t# Public\n\techo '<td class=\"center\">' . trans_bool( filter_get_field( $p_filter_id, 'is_public' ) ) . '</td>';\n\t# Owner\n\techo '<td>' . user_get_name( filter_get_field( $p_filter_id, 'user_id' ) ) . '</td>';\n\t# Actions\n\techo '<td>';\n\techo '<div class=\"pull-left\">';\n\tprint_form_button( 'view_all_set.php', lang_get( 'apply_filter_button' ), array( 'type' => 3, 'source_query_id' =>  $p_filter_id ), /* security token */ OFF );\n\techo '</div>';\n\tif( $t_editable ) {\n\t\techo '<div class=\"pull-left\">';\n\t\tprint_form_button( 'manage_filter_edit_page.php', lang_get( 'edit' ), array( 'filter_id' =>  $p_filter_id ) );\n\t\techo '</div>';\n\t\techo '<div class=\"pull-left\">';\n\t\tprint_form_button( 'manage_filter_delete.php', lang_get( 'delete' ), array( 'filter_id' =>  $p_filter_id ) );\n\t\techo '</div>';\n\t}\n\techo '</div>';\n\techo '</td>';\n\techo '</tr>';\n}\n\nfunction table_print_filters( array $p_filter_array ) {\n\t?>\n\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t<?php table_print_filter_headers() ?>\n\t\t<tbody>\n\t\t<?php\n\t\t\tforeach( $p_filter_array as $t_id => $t_name ) {\n\t\t\t\tif( !is_blank( $t_name ) ) {\n\t\t\t\t\ttable_print_filter_row( $t_id );\n\t\t\t\t}\n\t\t\t}\n\t\t?>\n\t\t</tbody>\n\t</table>\n\t<?php\n}\n\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-filter', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get('available_filter_for_project') . ': ' . string_display_line( project_get_name( $t_project_id ) ) ?>\n\t\t\t</h4>\n\t\t</div>\n\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div class=\"table-responsive\">\n\t\t\t<?php\n\t\t\tif( count( $t_filter_ids_available ) > 0 ) {\n\t\t\t\ttable_print_filters( $t_filter_ids_available );\n\t\t\t}\n\t\t\t?>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<?php\n\nlayout_page_end();"
        },
        {
          "name": "manage_overview_page.php",
          "type": "blob",
          "size": 3.923828125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Overview Page\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses event_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\n\nauth_reauthenticate();\naccess_ensure_global_level( config_get( 'manage_site_threshold' ) );\n\nlayout_page_header( lang_get( 'manage_link' ) );\n\nlayout_page_begin( __FILE__ );\n\nprint_manage_menu( 'manage_overview_page.php' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-info', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get('site_information') ?>\n\t\t</h4>\n\t</div>\n\t<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t<table id=\"manage-overview-table\" class=\"table table-hover table-bordered table-condensed\">\n\t\t<tr>\n\t\t\t<th class=\"category\"><?php echo lang_get( 'mantis_version' ) ?></th>\n\t\t\t<td><?php echo MANTIS_VERSION . config_get_global( 'version_suffix' ) ?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"category\"><?php echo lang_get( 'schema_version' ) ?></th>\n\t\t\t<td><?php echo config_get( 'database_version', 0, ALL_USERS, ALL_PROJECTS ) ?></td>\n\t\t</tr>\n\t\t<tr class=\"spacer\">\n\t\t\t<td colspan=\"2\"></td>\n\t\t</tr>\n\t\t<tr class=\"hidden\"></tr>\n\t<?php\n\t$t_is_admin = current_user_is_administrator();\n\tif( $t_is_admin ) {\n\t?>\n\t\t<tr>\n\t\t\t<th class=\"category\"><?php echo lang_get( 'php_version' ) ?></th>\n\t\t\t<td><?php echo phpversion() ?></td>\n\t\t</tr>\n\t\t<tr>\n \t\t\t<th class=\"category\"><?php echo lang_get( 'os_information' ) ?></th>\n\t\t\t<td><?php echo php_uname() ?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"category\"><?php echo lang_get( 'database_driver' ) ?></th>\n\t\t\t<td><?php echo config_get_global( 'db_type' ) ?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"category\"><?php echo lang_get( 'database_version_description' ) ?></th>\n\t\t\t<td><?php\n\t\t\t\t\t$t_database_server_info = $g_db->ServerInfo();\n\t\t\t\t\techo $t_database_server_info['version'] . ', ' . $t_database_server_info['description']\n\t\t\t\t?>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr class=\"spacer\">\n\t\t\t<td colspan=\"2\"></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"category\"><?php echo lang_get( 'site_path' ) ?></th>\n\t\t\t<td><?php echo config_get_global( 'absolute_path' ) ?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"category\"><?php echo lang_get( 'core_path' ) ?></th>\n\t\t\t<td><?php echo config_get_global( 'core_path' ) ?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"category\"><?php echo lang_get( 'plugin_path' ) ?></th>\n\t\t\t<td><?php echo config_get_global( 'plugin_path' ) ?></td>\n\t\t</tr>\n\t\t<tr class=\"spacer\">\n\t\t\t<td colspan=\"2\"></td>\n\t\t</tr>\n\t<?php\n\t}\n\n\tevent_signal( 'EVENT_MANAGE_OVERVIEW_INFO', array( $t_is_admin ) )\n\t?>\n\t</table>\n\t</div>\n\t</div>\n\t</div>\n\t</div>\n</div>\n<?php\nlayout_page_end();\n\n"
        },
        {
          "name": "manage_plugin_install.php",
          "type": "blob",
          "size": 1.7099609375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Plugin Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses plugin_api.php\n * @uses print_api.php\n */\n\n/** @ignore */\ndefine( 'PLUGINS_DISABLED', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'plugin_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_plugin_install' );\n\nauth_reauthenticate();\naccess_ensure_global_level( config_get( 'manage_plugin_threshold' ) );\n\n$f_basename = gpc_get_string( 'name' );\n$t_plugin = plugin_register( $f_basename, true );\n\nif( !is_null( $t_plugin ) ) {\n\tplugin_install( $t_plugin );\n}\n\nform_security_purge( 'manage_plugin_install' );\n\nprint_header_redirect( 'manage_plugin_page.php' );\n"
        },
        {
          "name": "manage_plugin_page.php",
          "type": "blob",
          "size": 15.3359375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Plugin Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses plugin_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'plugin_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\nauth_reauthenticate();\naccess_ensure_global_level( config_get( 'manage_plugin_threshold' ) );\n\nlayout_page_header( lang_get( 'manage_plugin_link' ) );\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_plugin_page.php' );\n\n$t_plugins = new ListPluginsForDisplay();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\n<?php\n# Installed plugins section\nif( $t_plugins->countInstalled() ) {\n?>\n\n<div class=\"space-10\"></div>\n\n<a id=\"installed\"></a>\n<div class=\"form-container\">\n\t<form action=\"manage_plugin_update.php\" method=\"post\">\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-cubes', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get('plugins_installed') ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t<?php echo form_security_field( 'manage_plugin_update' ) ?>\n\n\t\t\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col style=\"width:20%\" />\n\t\t\t\t\t\t\t\t\t<col style=\"width:35%\" />\n\t\t\t\t\t\t\t\t\t<col style=\"width:20%\" />\n\t\t\t\t\t\t\t\t\t<col style=\"width:7%\" />\n\t\t\t\t\t\t\t\t\t<col style=\"width:8%\" />\n\t\t\t\t\t\t\t\t\t<col style=\"width:10%\" />\n\t\t\t\t\t\t\t\t</colgroup>\n\n\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin' ) ?></th>\n\t\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_description' ) ?></th>\n\t\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_depends' ) ?></th>\n\t\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_priority' ) ?></th>\n\t\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_protected' ) ?></th>\n\t\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_actions' ) ?></th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<?php $t_plugins->printInstalled(); ?>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t\t<input type=\"submit\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'update' ) ?>\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</fieldset>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t</form>\n</div>\n<?php\n} # End Installed plugins section\n\n# Invalid plugins section\nif( $t_plugins->countInvalid() ) {\n?>\n\t<div class=\"space-10\"></div>\n\t<a id=\"invalid\"></a>\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-exclamation-triangle', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'plugins_missing' ) ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<?php\n\t\t\tprintf(\n\t\t\t\tlang_get( 'plugins_missing_description' ),\n\t\t\t\tstring_attribute( config_get_global( 'plugin_path' ) )\n\t\t\t);\n\t\t\t?>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t<col>\n\t\t\t\t\t\t\t<col>\n\t\t\t\t\t\t\t<col style=\"width:10%\">\n\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin' ) ?></th>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_problem_description' ) ?></th>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_actions' ) ?></th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<?php $t_plugins->printInvalid(); ?>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<?php\n} # End Invalid plugins section\n\n# Available plugins section\nif( $t_plugins->countAvailable() ) {\n?>\n\n<a id=\"available\"></a>\n<div class=\"space-10\"></div>\n\n<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-cube', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get('plugins_available') ?>\n\t\t</h4>\n\t</div>\n\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div class=\"table-responsive\">\n\t\t\t\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t<col style=\"width:25%\" />\n\t\t\t\t\t\t<col style=\"width:45%\" />\n\t\t\t\t\t\t<col style=\"width:20%\" />\n\t\t\t\t\t\t<col style=\"width:10%\" />\n\t\t\t\t\t</colgroup>\n\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin' ) ?></th>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_description' ) ?></th>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_depends' ) ?></th>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'plugin_actions' ) ?></th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<?php $t_plugins->printAvailable(); ?>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<?php\n} # End Available plugins section\n\n# Plugin dependencies color key\n?>\n<div class=\"center\">\n\t<div class=\"space-10\"></div>\n\t<div class=\"well well-sm\">\n\t\t<?php print_icon( 'fa-key', 'ace-icon' ); ?>\n\t\t<?php echo lang_get('plugin_key_label') ?>\n\t\t<span class='dependency_met'><?php echo lang_get( 'plugin_key_met' ) ?></span>,\n\t\t<span class='dependency_unmet'><?php echo lang_get( 'plugin_key_unmet' ) ?></span>,\n\t\t<span class='dependency_dated'><?php echo lang_get( 'plugin_key_dated' ) ?></span>,\n\t\t<span class='dependency_upgrade'><?php echo lang_get( 'plugin_key_upgrade' ) ?></span>.\n\t</div>\n</div>\n</div>\n\n<?php\nlayout_page_end();\n\n/**\n * Class ListPluginsForDisplay\n *\n * Collects all Plugins and dispatches them in 3 categories: available,\n * installed and invalid. Provides functions to print each sub-list in the\n * appropriate format, depending on the category.\n */\nclass ListPluginsForDisplay {\n\t/**\n\t * @var AvailablePlugin[] List of available plugins (i.e. valid and not installed)\n\t */\n\tprotected $available = array();\n\n\t/**\n\t * @var InstalledPlugin[] List of installed (registered) plugins\n\t */\n\tprotected $installed = array();\n\n\t/**\n\t * @var InvalidPluginForDisplay[] List of invalid plugins\n\t */\n\tprotected $invalid = array();\n\n\t/**\n\t * PluginsListForDisplay constructor.\n\t */\n\tpublic function __construct() {\n\t\t# Get list of all available and installed plugins, sorted by name\n\t\t$t_plugins = plugin_find_all();\n\t\tuasort( $t_plugins,\n\t\t\tfunction ( $p_p1, $p_p2 ) {\n\t\t\t\treturn strcasecmp( $p_p1->name, $p_p2->name );\n\t\t\t}\n\t\t);\n\n\t\tforeach( $t_plugins as $t_basename => $t_plugin ) {\n\t\t\tif( !$t_plugin->isValid() ) {\n\t\t\t\t$this->invalid[$t_basename] = new InvalidPluginForDisplay( $t_plugin );\n\t\t\t} elseif( plugin_is_registered( $t_basename ) ) {\n\t\t\t\t$this->installed[$t_basename] = new InstalledPlugin( $t_plugin );\n\t\t\t} else {\n\t\t\t\t$this->available[$t_basename] = new AvailablePlugin( $t_plugin );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @return int Number of available plugins\n\t */\n\tpublic function countAvailable() {\n\t\treturn count( $this->available );\n\t}\n\n\t/**\n\t * @return int Number of installed plugins\n\t */\n\tpublic function countInstalled() {\n\t\treturn count( $this->installed );\n\t}\n\n\t/**\n\t * @return int Number of invalid plugins\n\t */\n\tpublic function countInvalid() {\n\t\treturn count( $this->invalid );\n\t}\n\n\t/**\n\t * Prints the list of available plugins\n\t */\n\tpublic function printAvailable() {\n\t\tforeach( $this->available as $t_plugin ) {\n\t\t\t$t_plugin->render();\n\t\t}\n\t}\n\n\t/**\n\t * Prints the list of installed plugins\n\t */\n\tpublic function printInstalled() {\n\t\tforeach( $this->installed as $t_plugin ) {\n\t\t\t$t_plugin->render();\n\t\t}\n\t}\n\n\t/**\n\t * Print the list of invalid plugins\n\t */\n\tpublic function printInvalid() {\n\t\tforeach( $this->invalid as $t_plugin ) {\n\t\t\t$t_plugin->render();\n\t\t}\n\t}\n}\n\nabstract class PluginForDisplay {\n\tprotected $basename = '';\n\tprotected $name = '';\n\tprotected $description = '';\n\tprotected $page = '';\n\n\tpublic function __construct( MantisPlugin $p_plugin ) {\n\t\t$this->basename = $p_plugin->basename;\n\t\t$this->name = $p_plugin->name;\n\t\tif( $p_plugin->version ) {\n\t\t\t$this->name .= ' ' . $p_plugin->version;\n\t\t}\n\t\t$this->page = $p_plugin->page;\n\t}\n\n\tpublic function render() {\n\t\techo \"<tr>\\n\";\n\t\t$this->renderColumns();\n\t\techo \"</tr>\\n\";\n\t}\n\n\tprotected function renderColumns() {\n\t\techo \"<td>\" . $this->pluginName() . \"</td>\\n\";\n\t\techo \"<td>$this->description</td>\\n\";\n\t}\n\n\tprotected function pluginName() {\n\t\treturn string_attribute( $this->name );\n\t}\n}\n\nclass InvalidPluginForDisplay extends PluginForDisplay {\n\tprotected $can_remove = false;\n\n\tpublic function __construct( MantisPlugin $p_plugin ) {\n\t\tparent::__construct( $p_plugin );\n\n\t\t# Descriptions from InvalidPlugin classes are trusted input\n\t\t$this->description = $p_plugin->description;\n\t\tif( $p_plugin->status_message ) {\n\t\t\t$this->description .= '<br><span class=\"small\">' . $p_plugin->status_message . '</span>';\n\t\t}\n\n\t\t$this->can_remove = $p_plugin->removable;\n\t}\n\n\tprotected function renderColumns() {\n\t\tparent::renderColumns();\n\n\t\t# Actions\n\t\techo '<td class=\"center\">';\n\t\tif( $this->can_remove ) {\n\t\t\tprint_link_button(\n\t\t\t\t'manage_plugin_uninstall.php?name=' . $this->basename\n\t\t\t\t. form_security_param( 'manage_plugin_uninstall'\n\t\t\t\t),\n\t\t\t\tlang_get( 'remove_link' ),\n\t\t\t\t'btn-xs'\n\t\t\t);\n\t\t} else {\n\t\t\techo lang_get( 'plugin_manual_fix' );\n\t\t}\n\t\techo '</td>', \"\\n\";\n\t}\n}\n\nclass AvailablePlugin extends PluginForDisplay {\n\tprotected $dependencies = array();\n\tprotected $upgrade_needed = false;\n\tprotected $can_install = false;\n\n\tpublic function __construct( MantisPlugin $p_plugin ) {\n\t\tparent::__construct( $p_plugin );\n\n\t\t$t_plugin_name = $p_plugin->name . ' ' . $p_plugin->version;\n\n\t\t# Plugin Author\n\t\t$t_author = $p_plugin->author;\n\t\tif( !empty( $t_author ) ) {\n\t\t\tif( is_array( $t_author ) ) {\n\t\t\t\t$t_author = implode( ', ', $t_author );\n\t\t\t}\n\t\t\tif( !is_blank( $p_plugin->contact ) ) {\n\t\t\t\t$t_subject = lang_get( 'plugin' ) . ' - ' . $t_plugin_name;\n\t\t\t\t$t_author = '<br>'\n\t\t\t\t\t. sprintf( lang_get( 'plugin_author' ),\n\t\t\t\t\t\tprepare_email_link( $p_plugin->contact, $t_author, $t_subject )\n\t\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t$t_author = '<br>' . string_display_line( sprintf( lang_get( 'plugin_author' ), $t_author ) );\n\t\t\t}\n\t\t}\n\n\t\t# Plugin Website URL\n\t\t$t_url = $p_plugin->url;\n\t\tif( !is_blank( $t_url ) ) {\n\t\t\t$t_url = '<br>'\n\t\t\t\t. lang_get( 'plugin_url' )\n\t\t\t\t. lang_get( 'word_separator' )\n\t\t\t\t. '<a href=\"' . $t_url . '\">' . $t_url . '</a>';\n\t\t}\n\n\t\t# Description\n\t\t$this->description = string_display_line_links( (string)$p_plugin->description )\n\t\t\t. '<span class=\"small\">' . $t_author . $t_url . '</span>';\n\n\t\t# Dependencies\n\t\tif( is_array( $p_plugin->requires ) && !empty( $p_plugin->requires ) ) {\n\t\t\t$t_all_plugins = plugin_find_all();\n\t\t\tforeach( $p_plugin->requires as $t_required_basename => $t_version ) {\n\t\t\t\t$this->can_install = false;\n\n\t\t\t\tswitch( plugin_dependency( $t_required_basename, $t_version ) ) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\t$t_upgrade_needed = plugin_is_registered( $t_required_basename )\n\t\t\t\t\t\t\t&& plugin_needs_upgrade( plugin_get( $t_required_basename ) );\n\t\t\t\t\t\tif( $t_upgrade_needed ) {\n\t\t\t\t\t\t\t$t_class = 'dependency_upgrade';\n\t\t\t\t\t\t\t$t_tooltip = lang_get( 'plugin_key_upgrade' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$t_class = 'dependency_met';\n\t\t\t\t\t\t\t$t_tooltip = lang_get( 'plugin_key_met' );\n\t\t\t\t\t\t\t$this->can_install = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase -1:\n\t\t\t\t\t\t$t_class = 'dependency_dated';\n\t\t\t\t\t\t$t_tooltip = lang_get( 'plugin_key_dated' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 0:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t$t_class = 'dependency_unmet';\n\t\t\t\t\t\t$t_tooltip = lang_get( 'plugin_key_unmet' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t$t_dependency_name = array_key_exists( $t_required_basename, $t_all_plugins )\n\t\t\t\t\t? $t_all_plugins[$t_required_basename]->name\n\t\t\t\t\t: $t_required_basename;\n\t\t\t\t$t_dependency_name .= ' ' . $t_version;\n\n\t\t\t\t$this->dependencies[] = sprintf( '<span class=\"%s\" title=\"%s\">%s</span>',\n\t\t\t\t\t$t_class,\n\t\t\t\t\t$t_tooltip,\n\t\t\t\t\tstring_display_line( $t_dependency_name )\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\t$this->dependencies[] = '<span class=\"dependency_met\">'\n\t\t\t\t. lang_get( 'plugin_no_depends' )\n\t\t\t\t. '</span>';\n            $this->can_install = true;\n\t\t}\n\n\t\t$this->upgrade_needed = plugin_needs_upgrade( $p_plugin );\n\t}\n\n\tprotected function renderColumns() {\n\t\tparent::renderColumns();\n\n\t\t# Dependencies\n\t\techo '<td>', implode( '<br>', $this->dependencies ), '</td>', \"\\n\";\n\n\t\t# Actions\n\t\t# Only displayed if current object is of AvailablePlugin class\n\t\tif( get_class( $this ) == 'AvailablePlugin' ) {\n\t\t\techo '<td class=\"center\">';\n\t\t\tif( $this->can_install ) {\n\t\t\t\tprint_small_button(\n\t\t\t\t\t'manage_plugin_install.php?name=' . $this->basename\n\t\t\t\t\t. form_security_param( 'manage_plugin_install' ),\n\t\t\t\t\tlang_get( 'plugin_install' )\n\t\t\t\t);\n\t\t\t}\n\t\t\techo '</td>', \"\\n\";\n\t\t}\n\t}\n}\n\nclass InstalledPlugin extends AvailablePlugin {\n\tprotected $priority;\n\tprotected $protected;\n\n\tpublic function __construct( MantisPlugin $p_plugin ) {\n\t\tparent::__construct( $p_plugin );\n\n\t\t$this->priority = plugin_priority( $p_plugin->basename );\n\t\t$this->protected =  plugin_protected( $p_plugin->basename );\n\t}\n\n\tprotected function renderColumns() {\n\t\tparent::renderColumns();\n\n\t\tif( $this->basename == 'MantisCore' ) {\n\t\t\techo \"<td>&nbsp;</td>\\n<td>&nbsp;</td>\\n\";\n\t\t} else {\n\t\t\techo '<input type=\"hidden\" name=\"change_', $this->basename, '\" value=\"1\"/>';\n\n\t\t\t# Priority\n\t\t\techo '<td class=\"center\">',\n\t\t\t\t'<select name=\"priority_' . $this->basename . '\" class=\"input-sm\">';\n\t\t\tprint_plugin_priority_list( $this->priority );\n\t\t\techo '</select>', '</td>', \"\\n\";\n\n\t\t\t# Protected\n\t\t\techo '<td class=\"center\">';\n\t\t\techo '<label>',\n\t\t\t\t'<input type=\"checkbox\" class=\"ace\" name=\"protected_' . $this->basename . '\"';\n\t\t\tcheck_checked( $this->protected );\n\t\t\techo ' />',\n\t\t\t\t'<span class=\"lbl\"></span>',\n\t\t\t\t'</label>';\n\t\t\techo '</td>', \"\\n\";\n\t\t}\n\n\t\t# Actions\n\t\techo '<td class=\"center\">';\n\t\tif( $this->upgrade_needed ) {\n\t\t\tprint_link_button(\n\t\t\t\t'manage_plugin_upgrade.php?name=' . $this->basename\n\t\t\t\t. form_security_param( 'manage_plugin_upgrade' ),\n\t\t\t\tlang_get( 'plugin_upgrade' ),\n\t\t\t\t'btn-xs'\n\t\t\t);\n\t\t}\n\t\tif( !$this->protected ) {\n\t\t\tprint_link_button(\n\t\t\t\t'manage_plugin_uninstall.php?name=' . $this->basename\n\t\t\t\t. form_security_param( 'manage_plugin_uninstall' ),\n\t\t\t\tlang_get( 'plugin_uninstall' ),\n\t\t\t\t'btn-xs'\n\t\t\t);\n\t\t}\n\t\techo '</td>', \"\\n\";\n\t}\n\n\tprotected function pluginName() {\n\t\t# If plugin has a config page, we create a link to it\n\t\tif( !is_blank( $this->page ) ) {\n\t\t\treturn '<a href=\"'\n\t\t\t\t. string_attribute( plugin_page( $this->page, false, $this->basename ) )\n\t\t\t\t. '\">'\n\t\t\t\t. string_display_line( $this->name )\n\t\t\t\t. '</a>';\n\t\t}\n\n\t\treturn parent::pluginName();\n\t}\n}\n"
        },
        {
          "name": "manage_plugin_uninstall.php",
          "type": "blob",
          "size": 2.33984375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Plugin Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses plugin_api.php\n * @uses print_api.php\n */\n\n/** @ignore */\ndefine( 'PLUGINS_DISABLED', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'plugin_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'manage_plugin_uninstall' );\n\nauth_reauthenticate();\naccess_ensure_global_level( config_get( 'manage_plugin_threshold' ) );\n\n# register plugins and metadata without initializing\nplugin_register_installed();\n\n$f_basename = gpc_get_string( 'name' );\n$t_plugin = plugin_register( $f_basename, true );\n\nswitch( $t_plugin->status ) {\n\tcase MantisPlugin::STATUS_MISSING_PLUGIN:\n\tcase MantisPlugin::STATUS_MISSING_BASE_CLASS:\n\t\t$t_message = 'plugin_remove_message';\n\t\t$t_button = 'remove_link';\n\t\tbreak;\n\tdefault:\n\t\t$t_message = 'plugin_uninstall_message';\n\t\t$t_button = 'plugin_uninstall';\n}\n\nhelper_ensure_confirmed(\n\tsprintf( lang_get( $t_message ), string_attribute( $t_plugin->name ) ),\n\tlang_get( $t_button )\n);\n\nif( !is_null( $t_plugin ) ) {\n\tplugin_uninstall( $t_plugin );\n}\n\nform_security_purge( 'manage_plugin_uninstall' );\n\nprint_header_redirect( 'manage_plugin_page.php' );\n"
        },
        {
          "name": "manage_plugin_update.php",
          "type": "blob",
          "size": 2.392578125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Plugin Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses database_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n */\n\n/** @ignore */\ndefine( 'PLUGINS_DISABLED', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_plugin_update' );\n\nauth_reauthenticate();\naccess_ensure_global_level( config_get( 'manage_plugin_threshold' ) );\n\n$t_update_query = new DbQuery( 'UPDATE {plugin}\n\tSET priority=:priority, protected=:protected\n\tWHERE basename=:basename'\n);\n\n$t_query = new DbQuery( 'SELECT basename FROM {plugin}' );\n\nforeach( $t_query->fetch_all() as $t_row ) {\n\t$t_basename = $t_row['basename'];\n\n\t$f_change = gpc_get_bool( 'change_'.$t_basename, 0 );\n\tif( !$f_change ) {\n\t\tcontinue;\n\t}\n\n\t$f_priority = gpc_get_int( 'priority_'.$t_basename, 3 );\n\tif( $f_priority < PLUGIN_PRIORITY_LOW || $f_priority > PLUGIN_PRIORITY_HIGH ) {\n\t\terror_parameters( 'priority_' . $t_basename );\n\t\ttrigger_error( ERROR_INVALID_FIELD_VALUE, ERROR );\n\t}\n\n\t$f_protected = gpc_get_bool( 'protected_'.$t_basename, 0 );\n\n\t$t_update_query->bind( 'basename', $t_basename );\n\t$t_update_query->bind( 'priority', $f_priority );\n\t$t_update_query->bind( 'protected', $f_protected );\n\t$t_update_query->execute();\n}\n\nform_security_purge( 'manage_plugin_update' );\n\nprint_header_redirect( 'manage_plugin_page.php' );\n"
        },
        {
          "name": "manage_plugin_upgrade.php",
          "type": "blob",
          "size": 1.7802734375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Plugin Configuration\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses plugin_api.php\n * @uses print_api.php\n */\n\n/** @ignore */\ndefine( 'PLUGINS_DISABLED', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'plugin_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_plugin_upgrade' );\n\nauth_reauthenticate();\naccess_ensure_global_level( config_get( 'manage_plugin_threshold' ) );\n\n$f_basename = gpc_get_string( 'name' );\n$t_plugin = plugin_register( $f_basename, true );\n\nif( !is_null( $t_plugin ) && $t_plugin->status != MantisPlugin::STATUS_MISSING_PLUGIN ) {\n\t$t_status = plugin_upgrade( $t_plugin );\n}\n\nform_security_purge( 'manage_plugin_upgrade' );\n\nprint_header_redirect( 'manage_plugin_page.php' );\n"
        },
        {
          "name": "manage_prof_menu_page.php",
          "type": "blob",
          "size": 0.9560546875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Profile menu page\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n */\n\n$g_global_profiles = true;\ninclude( 'account_prof_menu_page.php' );\n"
        },
        {
          "name": "manage_proj_cat_add.php",
          "type": "blob",
          "size": 3.07421875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Project Category Add\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses error_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'manage_proj_cat_add' );\n\nauth_reauthenticate();\n\n$f_project_id\t= gpc_get_int( 'project_id' );\n$f_name\t\t\t= gpc_get_string( 'name' );\n$f_add_and_edit\t= gpc_get_bool( 'add_and_edit_category' );\n\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\n\nif( is_blank( $f_name ) ) {\n\terror_parameters( lang_get( 'category' ) );\n\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n}\n\n$t_names = explode( '|', $f_name );\n# Only add a single category with the add and edit button\nif( $f_add_and_edit ) {\n\t$t_names = array_slice( $t_names, 0, 1 );\n}\n$t_category_count = count( $t_names );\n\nforeach( $t_names as $t_name ) {\n\tif( is_blank( $t_name ) ) {\n\t\tcontinue;\n\t}\n\n\t$t_name = trim( $t_name );\n\tif( category_is_unique( $f_project_id, $t_name ) ) {\n\t\t$t_id = category_add( $f_project_id, $t_name );\n\t} else if( 1 == $t_category_count ) {\n\t\t# We only error out on duplicates when a single value was\n\t\t#  given.  If multiple values were given, we just add the\n\t\t#  ones we can.  The others already exist so it isn't really\n\t\t#  an error.\n\n\t\ttrigger_error( ERROR_CATEGORY_DUPLICATE, ERROR );\n\t}\n}\n\nform_security_purge( 'manage_proj_cat_add' );\n\nif( $f_add_and_edit ) {\n\t$t_redirect_url = 'manage_proj_cat_edit_page.php?category_id=' . $t_id . '&project_id=' . $f_project_id;\n} else if( $f_project_id == ALL_PROJECTS ) {\n\t$t_redirect_url = 'manage_proj_page.php';\n} else {\n\t$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#categories';\n}\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_cat_copy.php",
          "type": "blob",
          "size": 2.6767578125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Copy Categories between projects\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_proj_cat_copy' );\n\nauth_reauthenticate();\n\n$f_project_id\t\t= gpc_get_int( 'project_id' );\n$f_other_project_id\t= gpc_get_int( 'other_project_id' );\n$f_copy_from\t\t= gpc_get_bool( 'copy_from' );\n$f_copy_to\t\t\t= gpc_get_bool( 'copy_to' );\n$f_exclude_inherited = gpc_get_bool( 'exclude_inherited' );\n\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_other_project_id );\n\nif( $f_copy_from ) {\n\t$t_src_project_id = $f_other_project_id;\n\t$t_dst_project_id = $f_project_id;\n} else if( $f_copy_to ) {\n\t$t_src_project_id = $f_project_id;\n\t$t_dst_project_id = $f_other_project_id;\n} else {\n\ttrigger_error( ERROR_NO_COPY_ACTION, ERROR );\n}\n\n$t_rows = category_get_all_rows( $t_src_project_id, !$f_exclude_inherited );\n\nforeach ( $t_rows as $t_row ) {\n\t$t_name = $t_row['name'];\n\n\tif( category_is_unique( $t_dst_project_id, $t_name ) ) {\n\t\tcategory_add( $t_dst_project_id, $t_name );\n\t}\n}\n\nform_security_purge( 'manage_proj_cat_copy' );\n\nif( $f_project_id == ALL_PROJECTS ) {\n\t$t_redirect_url = 'manage_proj_page.php';\n} else {\n\t$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#categories';\n}\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_cat_delete.php",
          "type": "blob",
          "size": 2.6884765625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Remove Project Category\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'manage_proj_cat_delete' );\n\nauth_reauthenticate();\n\n$f_category_id = gpc_get_int( 'category_id' );\n\n$t_row = category_get_row( $f_category_id );\n$t_name = category_full_name( $f_category_id );\n$t_project_id = $t_row['project_id'];\n\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $t_project_id );\n\n# Protect the 'default category for moves' from deletion\ncategory_ensure_can_remove( $f_category_id );\n\n# Protect the category from deletion which is associted with an issue.\ncategory_ensure_can_delete( $f_category_id );\n\n# Confirm with the user\nhelper_ensure_confirmed( sprintf( lang_get( 'category_delete_confirm_msg' ), string_display_line( $t_name ) ),\n\tlang_get( 'delete_category_button' ) );\n\ncategory_remove( $f_category_id );\n\nform_security_purge( 'manage_proj_cat_delete' );\n\nif( $t_project_id == ALL_PROJECTS ) {\n\t$t_redirect_url = 'manage_proj_page.php';\n} else {\n\t$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $t_project_id . '#categories';\n}\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_cat_edit_page.php",
          "type": "blob",
          "size": 4.1015625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Edit Project Categories\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nauth_reauthenticate();\n\n$f_category_id = gpc_get_int( 'category_id' );\n$f_project_id  = gpc_get_int( 'project_id' );\n\n$t_row = category_get_row( $f_category_id );\n$t_assigned_to = (int)$t_row['user_id'];\n$t_project_id = (int)$t_row['project_id'];\n$t_name = $t_row['name'];\n$t_status = (int)$t_row['status'];\n\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $t_project_id );\n\nlayout_page_header();\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_proj_cat_edit_page.php' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div id=\"manage-proj-category-update-div\" class=\"form-container\">\n\t<form id=\"manage-proj-category-update-form\" method=\"post\" action=\"manage_proj_cat_update.php\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-sitemap', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get('edit_project_category_title') ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_proj_cat_update' ) ?>\n\t\t\t<input type=\"hidden\" name=\"category_id\" value=\"<?php echo string_attribute( $f_category_id ) ?>\" />\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'category' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"proj-category-name\" name=\"name\" class=\"input-sm\" size=\"32\" maxlength=\"128\" value=\"<?php echo string_attribute( $t_name ) ?>\" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"category-status\">\n\t\t\t\t\t\t<?php echo lang_get( 'enabled' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"checkbox\" id=\"proj-category-status\" name=\"status\" class=\"ace\"\n\t\t\t\t\t\t<?php check_checked( $t_status, CATEGORY_STATUS_ENABLED ); ?>\n\t\t\t\t\t/>\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'assigned_to' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"proj-category-assigned-to\" name=\"assigned_to\" class=\"input-sm\">\n\t\t\t\t\t\t<option value=\"0\"></option>\n\t\t\t\t\t\t<?php print_assign_to_option_list( $t_assigned_to, $t_project_id ) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</fieldset>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'update_category_button' ) ?>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t</form>\n\t</div>\n</div>\n<?php\n\nlayout_page_end();\n"
        },
        {
          "name": "manage_proj_cat_update.php",
          "type": "blob",
          "size": 2.6494140625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update Project Categories\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'manage_proj_cat_update' );\n\nauth_reauthenticate();\n\n$f_category_id     = gpc_get_int( 'category_id' );\n$f_name            = trim( gpc_get_string( 'name' ) );\n$f_assigned_to     = gpc_get_int( 'assigned_to', 0 );\n$f_status          = gpc_get_bool( 'status', CATEGORY_STATUS_DISABLED );\n\nif( is_blank( $f_name ) ) {\n\terror_parameters( 'name' );\n\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n}\n\n$t_row = category_get_row( $f_category_id );\n$t_old_name = $t_row['name'];\n$t_project_id = $t_row['project_id'];\n\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $t_project_id );\n\n# check for duplicate\nif( mb_strtolower( $f_name ) != mb_strtolower( $t_old_name ) ) {\n\tcategory_ensure_unique( $t_project_id, $f_name );\n}\n\ncategory_update( $f_category_id, $f_name, $f_assigned_to, $f_status );\n\nform_security_purge( 'manage_proj_cat_update' );\n\nif( $t_project_id == ALL_PROJECTS ) {\n\t$t_redirect_url = 'manage_proj_page.php';\n} else {\n\t$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $t_project_id . '#categories';\n}\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_create.php",
          "type": "blob",
          "size": 3.0986328125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Create a project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\n\nform_security_validate( 'manage_proj_create' );\n\nauth_reauthenticate();\n\n$f_name \t\t= gpc_get_string( 'name' );\n$f_description \t= gpc_get_string( 'description' );\n$f_view_state\t= gpc_get_int( 'view_state' );\n$f_status\t\t= gpc_get_int( 'status' );\n$f_file_path\t= gpc_get_string( 'file_path', '' );\n$f_inherit_global = gpc_get_bool( 'inherit_global', 0 );\n\n$t_data = array(\n\t'payload' => array(\n\t\t'name' => $f_name,\n\t\t'description' => $f_description,\n\t\t'file_path' => $f_file_path,\n\t\t'inherit_global' => $f_inherit_global,\n\t\t'view_state' => array( 'id' => $f_view_state ),\n\t\t'status' => array( 'id' => $f_status )\n\t),\n\t'options' => array(\n\t\t'return_project' => false\n\t)\n);\n\n$t_command = new ProjectAddCommand( $t_data );\n$t_result = $t_command->execute();\n\n$t_project_id = $t_result['id'];\n\n$f_parent_id\t= gpc_get_int( 'parent_id', 0 );\n$f_inherit_parent = gpc_get_bool( 'inherit_parent', 0 );\n\n# If parent project id != 0 then we're creating a subproject\nif( 0 != $f_parent_id ) {\n\t$t_data = array(\n\t\t'query' => array(\n\t\t\t'project_id' => (int)$f_parent_id\n\t\t),\n\t\t'payload' => array(\n\t\t\t'project' => array(\n\t\t\t\t'id' => (int)$t_project_id\n\t\t\t ),\n\t\t\t'inherit_parent' => (bool)$f_inherit_parent\n\t\t)\n\t);\n\n\t$t_command = new ProjectHierarchyAddCommand( $t_data );\n\t$t_command->execute();\n\n\t$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_parent_id . '#subprojects';\n} else {\n\t$t_redirect_url = 'manage_proj_page.php';\n}\n\nform_security_purge( 'manage_proj_create' );\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_create_page.php",
          "type": "blob",
          "size": 5.7783203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Create a project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses current_user_api.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nauth_reauthenticate();\n\naccess_ensure_global_level( config_get( 'create_project_threshold' ) );\n\nlayout_page_header();\nlayout_page_begin( 'manage_overview_page.php' );\nprint_manage_menu( 'manage_proj_page.php' );\n\n$f_parent_id = gpc_get( 'parent_id', null );\n?>\n\n\t<div class=\"col-md-12 col-xs-12\">\n\t\t<div class=\"space-10\"></div>\n\n<?php if( project_table_empty() ) { ?>\n\t<div class=\"alert alert-sm alert-warning\" role=\"alert\">\n\t\t<?php print_icon( 'fa-warning', 'ace-icon fa-lg' ); ?>\n\t\t<?php echo lang_get( 'create_first_project' ) ?>\n\t</div>\n<?php } ?>\n\n\t<div id=\"manage-project-create-div\" class=\"form-container\">\n\t<form method=\"post\" id=\"manage-project-create-form\" action=\"manage_proj_create.php\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n<?php\n\tprint_icon( 'fa-puzzle-piece', 'ace-icon' );\n\tif( null !== $f_parent_id ) {\n\t\techo lang_get( 'add_subproject_title' );\n\t} else {\n\t\techo lang_get( 'add_project_title' );\n\t}\n?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n<?php\n\techo form_security_field( 'manage_proj_create' );\n\tif( null !== $f_parent_id ) {\n\t\t$f_parent_id = (int) $f_parent_id;\n?>\n\t\t\t\t<input type=\"hidden\" name=\"parent_id\" value=\"<?php echo $f_parent_id ?>\" />\n<?php } ?>\n\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t<?php echo lang_get( 'project_name' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"project-name\" name=\"name\"\n\t\t\t\t\t\t   class=\"input-sm\" size=\"60\" maxlength=\"128\" required />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'status' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"project-status\" name=\"status\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'project_status' ) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'inherit_global' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input id=\"project-inherit-global\" name=\"inherit_global\"\n\t\t\t\t\t\t\t   type=\"checkbox\" class=\"ace\" checked=\"checked\">\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php if( !is_null( $f_parent_id ) ) { ?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'inherit_parent' ) ?>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input id=\"project-inherit-parent\" name=\"inherit_parent\"\n\t\t\t\t\t\t\t\t   type=\"checkbox\" class=\"ace\" checked=\"checked\">\n\t\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n<?php } ?>\n\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"project-view-state\" name=\"view_state\" class=\"input-sm\">\n<?php\n\tprint_enum_string_option_list(\n\t\t'project_view_state',\n\t\tconfig_get( 'default_project_view_status',\n\t\t\t\tnull,\n\t\t\t\tALL_USERS,\n\t\t\t\tALL_PROJECTS )\n\t\t);\n?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n<?php\n\t$g_project_override = ALL_PROJECTS;\n\tif( file_is_uploading_enabled() && DATABASE !== config_get( 'file_upload_method' ) ) {\n\t\t$t_file_path = '';\n\t\t# Don't reveal the absolute path to non-administrators for security reasons\n\t\tif( current_user_is_administrator() ) {\n\t\t\t$t_file_path = config_get_global( 'absolute_path_default_upload_folder' );\n\t\t}\n?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'upload_file_path' ) ?>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type=\"text\" id=\"project-file-path\" name=\"file_path\"\n\t\t\t\t\t\t\t   class=\"input-sm\" size=\"60\" maxlength=\"<?php echo DB_FIELD_SIZE_FILENAME ?>\"\n\t\t\t\t\t\t\t   value=\"<?php echo $t_file_path ?>\" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n<?php } ?>\n\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'description' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<textarea id=\"project-description\" name=\"description\"\n\t\t\t\t\t\t\t  class=\"form-control\" cols=\"70\" rows=\"5\"></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\t\t\t<?php event_signal( 'EVENT_MANAGE_PROJECT_CREATE_FORM' ) ?>\n\t\t</fieldset>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ) ?></span>\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\"\n\t\t\t\t   value=\"<?php echo lang_get( 'add_project_button' ) ?>\" />\n\t\t</div>\n\t</div>\n\t</div>\n\t</form>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "manage_proj_custom_field_add_existing.php",
          "type": "blob",
          "size": 2.216796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add existing custom field to project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses custom_field_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_proj_custom_field_add_existing' );\n\nauth_reauthenticate();\n\n$f_field_id\t\t= gpc_get_int( 'field_id' );\n$f_project_id\t= gpc_get_int( 'project_id' );\n\n# We should check both since we are in the project section and an\n#  admin might raise the first threshold and not realize they need\n#  to raise the second\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\naccess_ensure_project_level( config_get( 'custom_field_link_threshold' ), $f_project_id );\n\ncustom_field_link( $f_field_id, $f_project_id );\n\nform_security_purge( 'manage_proj_custom_field_add_existing' );\n\n$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#customfields';\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_custom_field_copy.php",
          "type": "blob",
          "size": 2.3203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Copy Custom Fields\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses project_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\n\nform_security_validate( 'manage_proj_custom_field_copy' );\n\nauth_reauthenticate();\n\n$f_project_id\t\t= gpc_get_int( 'project_id' );\n$f_other_project_id\t= gpc_get_int( 'other_project_id' );\n$f_copy_from\t\t= gpc_get_bool( 'copy_from' );\n$f_copy_to\t\t\t= gpc_get_bool( 'copy_to' );\n\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_other_project_id );\n\nif( $f_copy_from ) {\n\t$t_src_project_id = $f_other_project_id;\n\t$t_dst_project_id = $f_project_id;\n} else if( $f_copy_to ) {\n\t$t_src_project_id = $f_project_id;\n\t$t_dst_project_id = $f_other_project_id;\n} else {\n\ttrigger_error( ERROR_NO_COPY_ACTION, ERROR );\n}\n\nproject_copy_custom_fields( $t_dst_project_id, $t_src_project_id );\n\nform_security_purge( 'manage_proj_custom_field_copy' );\n\nprint_header_redirect( 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#customfields');\n"
        },
        {
          "name": "manage_proj_custom_field_remove.php",
          "type": "blob",
          "size": 2.7177734375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Remove Custom Fields\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses custom_field_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'manage_proj_custom_field_remove' );\n\nauth_reauthenticate();\n\n$f_field_id = gpc_get_int( 'field_id' );\n$f_project_id = gpc_get_int( 'project_id' );\n$f_return = gpc_get_string( 'return', '' );\n\n# We should check both since we are in the project section and an\n# admin might raise the first threshold and not realize they need\n# to raise the second\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\naccess_ensure_project_level( config_get( 'custom_field_link_threshold' ), $f_project_id );\n\n$t_definition = custom_field_get_definition( $f_field_id );\n\n# Confirm with the user\nhelper_ensure_confirmed(\n\tsprintf(\n\t\tlang_get( 'confirm_custom_field_unlinking' ),\n\t\tstring_attribute( $t_definition['name'] )\n\t),\n\tlang_get( 'field_remove_button' )\n);\n\nif( $f_return == 'custom_field' ) {\n\t$t_redirect_url = 'manage_custom_field_edit_page.php?field_id=' . $f_field_id;\n} else {\n\t$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#customfields';\n}\n\ncustom_field_unlink( $f_field_id, $f_project_id );\n\nform_security_purge( 'manage_proj_custom_field_remove' );\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_custom_field_update.php",
          "type": "blob",
          "size": 2.2490234375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update Custom Fields\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses custom_field_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_proj_custom_field_update' );\n\nauth_reauthenticate();\n\n$f_field_id\t= gpc_get_int( 'field_id' );\n$f_project_id\t= gpc_get_int( 'project_id' );\n$f_sequence\t= gpc_get_int( 'sequence' );\n\n# We should check both since we are in the project section and an\n#  admin might raise the first threshold and not realize they need\n#  to raise the second\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\naccess_ensure_project_level( config_get( 'custom_field_link_threshold' ), $f_project_id );\n\ncustom_field_set_sequence( $f_field_id, $f_project_id, $f_sequence );\n\nform_security_purge( 'manage_proj_custom_field_update' );\n\n$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_project_id . \"#customfields\";\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_delete.php",
          "type": "blob",
          "size": 2.2841796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Project Delete\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\n\nform_security_validate( 'manage_proj_update' );\n\nauth_reauthenticate();\n\n$f_project_id = gpc_get_int( 'project_id' );\n\n$t_data = array(\n\t'query' => array(\n\t\t'id' => $f_project_id\n\t)\n);\n\n$t_command = new ProjectDeleteCommand( $t_data );\n$t_command->validate();\n\n$t_message = sprintf( lang_get( 'project_delete_msg' ),\n\tstring_attribute( project_get_name( $f_project_id ) ),\n\tproject_get_bug_count( $f_project_id )\n);\n\nhelper_ensure_confirmed( $t_message, lang_get( 'project_delete_button' ) );\n\n$t_command->execute();\n\nform_security_purge( 'manage_proj_update' );\n\n# Don't leave the current project set to a deleted project -\n#  set it to All Projects\nif( helper_get_current_project() == $f_project_id ) {\n\thelper_set_current_project( ALL_PROJECTS );\n}\n\nprint_header_redirect( 'manage_proj_page.php' );\n"
        },
        {
          "name": "manage_proj_edit_page.php",
          "type": "blob",
          "size": 36.693359375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Edit Project Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses custom_field_api.php\n * @uses date_api.php\n * @uses event_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses project_hierarchy_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'date_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'project_hierarchy_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_api( 'version_api.php' );\n\nauth_reauthenticate();\n\n$f_project_id = gpc_get_int( 'project_id' );\n$f_show_global_users = gpc_get_bool( 'show_global_users' );\n\nproject_ensure_exists( $f_project_id );\n$g_project_override = $f_project_id;\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\n\n$t_row = project_get_row( $f_project_id );\n\n$t_can_manage_users = access_has_project_level( config_get( 'project_user_threshold' ), $f_project_id );\n\nrequire_js( 'manage_proj_edit_page.js' );\n\nlayout_page_header( project_get_field( $f_project_id, 'name' ) );\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_proj_edit_page.php' );\n?>\n\n<!-- PROJECT PROPERTIES -->\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div id=\"manage-proj-update-div\" class=\"form-container\">\n\t<form id=\"manage-proj-update-form\" method=\"post\" action=\"manage_proj_update.php\">\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n<h4 class=\"widget-title lighter\">\n\t<?php print_icon( 'fa-puzzle-piece', 'ace-icon' ); ?>\n\t<?php echo lang_get('edit_project_title') ?>\n</h4>\n</div>\n\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_proj_update' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"project-name\">\n\t\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t\t<?php echo lang_get( 'project_name' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"project-name\" name=\"name\" required\n\t\t\t\t\t\t   class=\"input-sm\" size=\"60\" maxlength=\"128\"\n\t\t\t\t\t\t   value=\"<?php echo string_attribute( $t_row['name'] ) ?>\"\n\t\t\t\t\t/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"project-status\">\n\t\t\t\t\t\t<?php echo lang_get( 'status' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"project-status\" name=\"status\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'project_status', (int)$t_row['status'] ) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"project-enabled\">\n\t\t\t\t\t\t<?php echo lang_get( 'enabled' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"checkbox\" id=\"project-enabled\" name=\"enabled\" class=\"ace\"\n\t\t\t\t\t\t<?php check_checked( (int)$t_row['enabled'], ON ); ?>\n\t\t\t\t\t/>\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"project-inherit-global\">\n\t\t\t\t\t\t<?php echo lang_get( 'inherit_global' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"checkbox\" id=\"project-inherit-global\" name=\"inherit_global\" class=\"ace\"\n\t\t\t\t\t\t<?php check_checked( (int)$t_row['inherit_global'], ON ); ?>\n\t\t\t\t\t/>\n\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"project-view-state\">\n\t\t\t\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"project-view-state\" name=\"view_state\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'project_view_state', (int)$t_row['view_state']) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<?php\n\t\t\tif( file_is_uploading_enabled() && DATABASE !== config_get( 'file_upload_method' ) ) {\n\t\t\t\t$t_file_path = $t_row['file_path'];\n\t\t\t\t# Don't reveal the absolute path to non-administrators for security reasons\n\t\t\t\tif( is_blank( $t_file_path ) && current_user_is_administrator() ) {\n\t\t\t\t\t$t_file_path = config_get_global( 'absolute_path_default_upload_folder' );\n\t\t\t\t}\n\t\t\t\t?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t<label for=\"project-file-path\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'upload_file_path' ) ?>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type=\"text\" id=\"project-file-path\" name=\"file_path\"\n\t\t\t\t\t\t\t   class=\"input-sm\" size=\"60\" maxlength=\"<?php echo DB_FIELD_SIZE_FILENAME ?>\"\n\t\t\t\t\t\t\t   value=\"<?php echo string_attribute( $t_file_path ) ?>\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr><?php\n\t\t\t} ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"project-description\">\n\t\t\t\t\t\t<?php echo lang_get( 'description' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"project-description\" name=\"description\" cols=\"70\" rows=\"5\">\n<?php echo string_textarea( $t_row['description'] ) ?>\n</textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\t\t\t<?php event_signal( 'EVENT_MANAGE_PROJECT_UPDATE_FORM', array( $f_project_id ) ); ?>\n\t\t</fieldset>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ) ?></span>\n\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'update_project_button' ) ?>\n\t\t\t</button>\n<?php\n\t# You must have global permissions to delete projects\n\tif( access_has_global_level ( config_get( 'delete_project_threshold' ) ) ) {\n?>\n\t\t\t<button class=\"btn btn-primary btn-white btn-round\"\n\t\t\t\t\tformaction=\"manage_proj_delete.php\">\n\t\t\t\t<?php echo lang_get( 'delete_project_button' ) ?>\n\t\t\t</button>\n<?php\n\t}\n?>\n\t\t</div>\n\t</div>\n\t</form>\n</div>\n</div>\n\n<!-- SUBPROJECTS -->\n<?php\n\tif ( config_get_global( 'subprojects_enabled' ) == ON ) {\n?>\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div id=\"subprojects\" class=\"form-container\">\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-share-alt', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'subprojects' ); ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n<?php\n\t# Add an existing project as subproject form\n?>\n\t\t\t\t<form id=\"manage-project-subproject-add-form\"\n\t\t\t\t\t  action=\"manage_proj_subproj_add.php\"\n\t\t\t\t\t  class=\"form-inline pull-left padding-right-8\">\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t<?php echo form_security_field( 'manage_proj_subproj_add' ) ?>\n\t\t\t\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t\t\t\t<select name=\"subproject_id\" class=\"input-sm\" required>\n\t\t\t\t\t\t\t<option selected disabled value=\"\">\n\t\t\t\t\t\t\t\t<?php echo '[', lang_get( 'select_project_button' ), ']' ?>\n\t\t\t\t\t\t\t</option>\n<?php\n\t$t_all_subprojects = project_hierarchy_get_subprojects( $f_project_id, true );\n\t$t_all_subprojects[] = $f_project_id;\n\t$t_manage_access = config_get( 'manage_project_threshold' );\n\t$t_projects = project_get_all_rows();\n\t$t_projects = multi_sort( $t_projects, 'name' );\n\n\tforeach ( $t_projects as $t_project ) {\n\t\tif( in_array( $t_project['id'], $t_all_subprojects ) ||\n\t\t\tin_array( $f_project_id, project_hierarchy_get_all_subprojects( $t_project['id'] ) ) ||\n\t\t\t!access_has_project_level( $t_manage_access, $t_project['id'] )\n\t\t) {\n\t\t\tcontinue;\n\t\t}\n?>\n\t\t\t\t\t\t\t<option value=\"<?php echo $t_project['id'] ?>\">\n\t\t\t\t\t\t\t\t<?php echo string_attribute( $t_project['name'] ) ?>\n\t\t\t\t\t\t\t</option>\n<?php\n\t} # End looping over projects\n?>\n\t\t\t\t\t\t</select>\n\n\t\t\t\t\t\t<button class=\"btn btn-sm btn-primary btn-white btn-round\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'add_subproject' ); ?>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</fieldset>\n\t\t\t\t</form>\n<?php\n\t# Create project button, only shown if user's global access level allows\n\tif( access_has_global_level( config_get( 'create_project_threshold' ) ) ) {\n\t\tprint_form_button(\n\t\t\t'manage_proj_create_page.php',\n\t\t\tlang_get( 'create_new_subproject_link' ),\n\t\t\tarray( 'parent_id' => $f_project_id ),\n\t\t\tnull,\n\t\t\t'btn btn-sm btn-primary btn-white btn-round'\n\t\t);\n\t}\n?>\n\t\t\t</div>\n\n<?php\n\t\t# Subprojects listing / update form\n\t\t$t_subproject_ids = current_user_get_accessible_subprojects( $f_project_id, true );\n\t\tif( !empty( $t_subproject_ids ) ) {\n?>\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t\t<form id=\"manage-project-update-subprojects-form\"\n\t\t\t\t\t\t  action=\"manage_proj_update_children.php\" method=\"post\">\n\n\t\t\t\t\t\t<?php echo form_security_field( 'manage_proj_update_children' ) ?>\n\t\t\t\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\n\t\t\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-condensed\">\n\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'name' ) ?></th>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'status' ) ?></th>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'enabled' ) ?></th>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'inherit' ) ?></th>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'view_status' ) ?></th>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'description' ) ?></th>\n\t\t\t\t\t\t\t\t\t<th colspan=\"2\"><?php echo lang_get( 'actions' ) ?></th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\n\t\t\t\t\t\t\t\t<tbody>\n<?php\n\t\t\tforeach( $t_subproject_ids as $t_subproject_id ) {\n\t\t\t\t$t_subproject = project_get_row( $t_subproject_id );\n\t\t\t\t$t_inherit_parent = project_hierarchy_inherit_parent( $t_subproject_id, $f_project_id, true );\n?>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"manage_proj_edit_page.php?project_id=<?php echo $t_subproject['id'] ?>\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo string_display_line( $t_subproject['name'] ) ?>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td class=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t<?php echo get_enum_element( 'project_status', $t_subproject['status'] ) ?>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td class=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t<?php echo trans_bool( $t_subproject['enabled'] ) ?>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td class=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" name=\"inherit_child_<?php echo $t_subproject_id ?>\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php echo ( $t_inherit_parent ? 'checked=\"checked\"' : '' ) ?>  />\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td class=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t<?php echo get_enum_element( 'project_view_state', $t_subproject['view_state'] ) ?>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<?php echo string_display_links( $t_subproject['description'] ) ?>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td class=\"center\">\n<?php\n\t\t\t\tprint_link_button(\n\t\t\t\t\t'manage_proj_edit_page.php?project_id=' . $t_subproject['id'],\n\t\t\t\t\tlang_get( 'edit' ),\n\t\t\t\t\t'btn-xs'\n\t\t\t\t);\n\t\t\t\tprint_link_button(\n\t\t\t\t\t\"manage_proj_subproj_delete.php?project_id=$f_project_id&subproject_id=\" . $t_subproject['id']\n\t\t\t\t\t. form_security_param( 'manage_proj_subproj_delete' ),\n\t\t\t\t\tlang_get( 'unlink_link' ),\n\t\t\t\t\t'btn-xs'\n\t\t\t\t);\n?>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n<?php\n\t\t\t} # End foreach subproject\n?>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<button class=\"btn btn-primary btn-white btn-round\"\n\t\t\t\t\t\tform=\"manage-project-update-subprojects-form\">\n\t\t\t\t\t<?php echo lang_get( 'update_subproject_inheritance' ) ?>\n\t\t\t\t</button>\n\t\t\t</div>\n<?php\n\t\t} # End of subprojects listing / update form\n?>\n\t\t</div>\n\t</div>\n</div>\n<?php\n\t} # Subprojects enabled?\n?>\n\n<!-- CATEGORIES -->\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div id=\"categories\" class=\"form-container\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-sitemap', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'categories' ); ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t<form id=\"manage-project-category-copy-form\" method=\"post\" action=\"manage_proj_cat_copy.php\" class=\"form-inline\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_proj_cat_copy' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t<select name=\"other_project_id\" class=\"input-sm\" required>\n\t\t\t\t<option selected disabled value=\"\">\n\t\t\t\t\t<?php echo '[', lang_get( 'select_project_button' ), ']' ?>\n\t\t\t\t</option>\n\t\t\t\t<?php print_project_option_list( null, false, $f_project_id ); ?>\n\t\t\t</select>\n\t\t\t<button name=\"copy_from\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"1\">\n\t\t\t\t<?php echo lang_get( 'copy_categories_from' ) ?>\n\t\t\t</button>\n\t\t\t<button name=\"copy_to\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"1\">\n\t\t\t\t<?php echo lang_get( 'copy_categories_to' ) ?>\n\t\t\t</button>\n\t\t\t<div class=\"padding-left-8 inline\">\n\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"exclude_inherited\" name=\"exclude_inherited\">\n\t\t\t<label for=\"exclude_inherited\" class=\"lbl\">\n\t\t\t\t<?php echo lang_get( 'copy_categories_exclude_inherited' ); ?>\n\t\t\t</label>\n\t\t\t</div>\n\t\t</fieldset>\n\t</form>\n\t</div>\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main no-padding\">\n<?php\n\t$t_categories = category_get_all_rows( $f_project_id );\n\tif( count( $t_categories ) > 0 ) {\n?>\n\t<div class=\"table-responsive\">\n\t<table class=\"table table-striped table-bordered table-condensed\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th><?php echo lang_get( 'category' ) ?></th>\n\t\t\t\t<th class=\"center\"><?php echo lang_get( 'enabled' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'assign_to' ) ?></th>\n\t\t\t\t<th colspan=\"2\" class=\"center\"><?php echo lang_get( 'actions' ) ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n<?php\n\t\t$t_security_token = form_security_token( 'manage_proj_cat_delete' );\n\t\tforeach ( $t_categories as $t_category ) {\n\t\t\t$t_id = $t_category['id'];\n\t\t\t$t_inherited = ( $t_category['project_id'] != $f_project_id );\n?>\n\t\t\t<tr>\n\t\t\t\t<td><?php echo string_display_line( category_full_name( $t_id, $t_inherited, $f_project_id ) )  ?></td>\n\t\t\t\t<td class=\"center\"><?php echo trans_bool( $t_category['status'] ) ?></td>\n\t\t\t\t<td><?php echo prepare_user_name( $t_category['user_id'] ) ?></td>\n\t\t\t\t<td class=\"center\">\n\t\t\t\t\t<div class=\"inline\">\n<?php\n\t\t\tif( !$t_inherited ) {\n\t\t\t\tprint_form_button(\n\t\t\t\t\t'manage_proj_cat_edit_page.php',\n\t\t\t\t\tlang_get( 'edit' ),\n\t\t\t\t\tarray(\n\t\t\t\t\t\t'category_id' => $t_id,\n\t\t\t\t\t\t'project_id' => $f_project_id,\n\t\t\t\t\t),\n\t\t\t\t\tOFF,\n\t\t\t\t\t'btn btn-xs btn-primary btn-white btn-round'\n\t\t\t\t);\n\n\t\t\t\tprint_form_button(\n\t\t\t\t\t'manage_proj_cat_delete.php',\n\t\t\t\t\tlang_get( 'delete' ),\n\t\t\t\t\tarray(\n\t\t\t\t\t\t'category_id' => $t_id,\n\t\t\t\t\t\t'project_id' => $f_project_id,\n\t\t\t\t\t),\n\t\t\t\t\t$t_security_token,\n\t\t\t\t\t'btn btn-xs btn-primary btn-white btn-round'\n\t\t\t\t);\n\t\t\t}\n?>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php\n\t\t} # end for loop\n?>\n\t\t</tbody>\n\t</table>\n\t</div>\n<?php\n\t}\n?>\n</div>\n</div>\n<div class=\"widget-toolbox padding-8 clearfix\">\n\t<form id=\"project-add-category-form\" method=\"post\" action=\"manage_proj_cat_add.php\" class=\"form-inline\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_proj_cat_add' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t<input type=\"text\" name=\"name\" required size=\"32\" maxlength=\"128\" class=\"input-sm\" />\n\t\t\t<button class=\"btn btn-sm btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'add_category_button' ) ?>\n\t\t\t</button>\n\t\t\t<button name=\"add_and_edit_category\" value=\"1\"\n\t\t\t\t\tclass=\"btn btn-sm btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'add_and_edit_category_button' ) ?>\n\t\t\t</button>\n\t\t</fieldset>\n\t</form>\n</div>\n</div>\n</div>\n</div>\n\n<!-- VERSIONS -->\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n<div id=\"versions\" class=\"form-container\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-share-alt', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'versions' ); ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t<form id=\"manage-project-version-copy-form\" method=\"post\" action=\"manage_proj_ver_copy.php\" class=\"form-inline\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_proj_ver_copy' ) ?>\n\t\t\t<input type=\"hidden\" class=\"form-control input-sm\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t<select name=\"other_project_id\" class=\"input-sm\" required>\n\t\t\t\t<option selected disabled value=\"\"><?php echo '[', lang_get( 'select_project_button' ), ']' ?></option>\n\t\t\t\t<?php print_project_option_list( null, false, $f_project_id ); ?>\n\t\t\t</select>\n\t\t\t<button name=\"copy_from\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"1\">\n\t\t\t\t<?php echo lang_get( 'copy_versions_from' ) ?>\n\t\t\t</button>\n\t\t\t<button name=\"copy_to\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"1\">\n\t\t\t\t<?php echo lang_get( 'copy_versions_to' ) ?>\n\t\t\t</button>\n\t\t</fieldset>\n\t</form>\n\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t<?php\n\t$t_versions = version_get_all_rows( $f_project_id, VERSION_ALL, true );\n\tif( count( $t_versions ) > 0 ) { ?>\n\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-striped table-bordered table-condensed\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th><?php echo lang_get( 'version' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'released' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'obsolete' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'timestamp' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'actions' ) ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n<?php\n\t\t$t_security_token = form_security_token( 'manage_proj_ver_delete' );\n\t\tforeach ( $t_versions as $t_version ) {\n\t\t\t$t_inherited = $t_version['project_id'] != $f_project_id;\n\t\t\t/** @noinspection PhpUnhandledExceptionInspection */\n\t\t\t$t_name = version_full_name( $t_version['id'], $t_inherited, $f_project_id );\n\t\t\t$t_released = $t_version['released'];\n\t\t\t$t_obsolete = $t_version['obsolete'];\n\t\t\tif( !date_is_null( $t_version['date_order'] ) ) {\n\t\t\t\t$t_date_formatted = date( config_get( 'complete_date_format' ), $t_version['date_order'] );\n\t\t\t} else {\n\t\t\t\t$t_date_formatted = ' ';\n\t\t\t} ?>\n\n\t\t\t<tr>\n\t\t\t\t<td><?php echo string_display_line( $t_name ) ?></td>\n\t\t\t\t<td class=\"center\"><?php echo trans_bool( $t_released ) ?></td>\n\t\t\t\t<td class=\"center\"><?php echo trans_bool( $t_obsolete ) ?></td>\n\t\t\t\t<td class=\"center\"><?php echo $t_date_formatted ?></td>\n\t\t\t\t<td class=\"center\">\n\t\t\t\t\t<div class=\"inline\">\n\t\t\t\t\t<?php\n\t\t\t\t\t$t_version_id = version_get_id( $t_name, $f_project_id );\n\t\t\t\t\tif( !$t_inherited ) {\n\t\t\t\t\t\t$t_param = array( 'version_id' => $t_version_id);\n\t\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t\t'manage_proj_ver_edit_page.php',\n\t\t\t\t\t\t\tlang_get( 'edit' ),\n\t\t\t\t\t\t\t$t_param,\n\t\t\t\t\t\t\tOFF\n\t\t\t\t\t\t);\n\t\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t\t'manage_proj_ver_delete.php',\n\t\t\t\t\t\t\tlang_get( 'delete' ),\n\t\t\t\t\t\t\t$t_param,\n\t\t\t\t\t\t\t$t_security_token\n\t\t\t\t\t\t);\n\t\t\t\t\t} ?>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php\n\t\t} # end for loop\n?>\n\t\t</tbody>\n\t</table>\n\t</div>\n<?php\n\t}\n?>\n\t</div>\n\t</div>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t<form id=\"manage-project-add-version-form\" method=\"post\" action=\"manage_proj_ver_add.php\" class=\"form-inline\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_proj_ver_add' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t<input type=\"text\" class=\"input-sm\" required name=\"version\" size=\"32\" maxlength=\"64\" />\n\t\t\t<button name=\"add_version\" class=\"btn btn-sm btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'add_version_button' ) ?>\n\t\t\t</button>\n\t\t\t<button name=\"add_and_edit_version\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"1\">\n\t\t\t\t<?php echo lang_get( 'add_and_edit_version_button' ) ?>\n\t\t\t</button>\n\t\t</fieldset>\n\t</form>\n\t</div>\n\t</div>\n</div>\n</div>\n\n<!-- CUSTOM FIELDS -->\n<?php\n# You need either global permissions or project-specific permissions to link\n#  custom fields\n$t_custom_field_count = count( custom_field_get_ids() );\nif( access_has_project_level( config_get( 'custom_field_link_threshold' ), $f_project_id ) &&\n\t( $t_custom_field_count > 0 ) ) {\n?>\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n<div id=\"customfields\" class=\"form-container\">\n<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-flask', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'custom_fields_setup' ); ?>\n\t\t</h4>\n\t</div>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t<form id=\"manage-project-custom-field-copy-form\" method=\"post\" action=\"manage_proj_custom_field_copy.php\" class=\"form-inline\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_proj_custom_field_copy' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t<select name=\"other_project_id\" class=\"input-sm\" required>\n\t\t\t\t<option selected disabled value=\"\"><?php echo '[', lang_get( 'select_project_button' ), ']' ?></option>\n\t\t\t\t<?php print_project_option_list( null, false, $f_project_id ); ?>\n\t\t\t</select>\n\t\t\t<button name=\"copy_from\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"1\">\n\t\t\t\t<?php echo lang_get( 'copy_from' ) ?>\n\t\t\t</button>\n\t\t\t<button name=\"copy_to\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"1\">\n\t\t\t\t<?php echo lang_get( 'copy_to' ) ?>\n\t\t\t</button>\n\t\t</fieldset>\n\t</form>\n\t</div>\n<?php\n\t$t_custom_fields = custom_field_get_linked_ids( $f_project_id );\n\t$t_linked_count = count( $t_custom_fields );\n\tif( $t_linked_count > 0 ) { ?>\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div class=\"table-responsive\">\n\t<table class=\"table table-striped table-bordered table-condensed\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th><?php echo lang_get( 'custom_field' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'custom_field_sequence' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'actions' ); ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n<?php\n\t\tforeach( $t_custom_fields as $t_field_id ) {\n\t\t\t$t_desc = custom_field_get_definition( $t_field_id ); ?>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo custom_field_get_display_name( $t_desc['name'] ); ?>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"center\">\n\t\t\t\t\t<form method=\"post\" action=\"manage_proj_custom_field_update.php\" class=\"form-inline\">\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<?php echo form_security_field( 'manage_proj_custom_field_update' ) ?>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"field_id\" value=\"<?php echo $t_field_id ?>\" />\n\t\t\t\t\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t\t\t\t\t<input type=\"text\" class=\"input-sm\" name=\"sequence\" size=\"2\"\n\t\t\t\t\t\t\t\t   value=\"<?php echo custom_field_get_sequence( $t_field_id, $f_project_id ) ?>\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<button class=\"btn btn-sm btn-primary btn-white btn-round\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'update' ) ?>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t</form>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"center\">\n<?php\n\t\t\t\t\t# You need global permissions to edit custom field defs\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t'manage_custom_field_edit_page.php?field_id=' . $t_field_id,\n\t\t\t\t\t\tlang_get( 'edit' ),\n\t\t\t\t\t\tarray(\n\t\t\t\t\t\t\t'return' => 'manage_proj_edit_page.php?project_id='\n\t\t\t\t\t\t\t\t. $f_project_id . '#customfields',\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t'manage_proj_custom_field_remove.php',\n\t\t\t\t\t\tlang_get( 'remove_link' ),\n\t\t\t\t\t\tarray(\n\t\t\t\t\t\t\t'field_id' => $t_field_id,\n\t\t\t\t\t\t\t'project_id' => $f_project_id,\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n?>\n\t\t\t\t</td>\n\t\t\t</tr>\n<?php\n\t\t} # end for loop\n?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t</div>\n\t</div>\n<?php\n\t}\n\tif( $t_custom_field_count > $t_linked_count ) { ?>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t<form method=\"post\" action=\"manage_proj_custom_field_add_existing.php\" class=\"form-inline\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_proj_custom_field_add_existing' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t<select name=\"field_id\" class=\"input-sm\">\n\t\t\t\t<?php\n\t\t\t\t\t$t_cf_defs = array();\n\t\t\t\t\tforeach( custom_field_get_ids() as $t_cfid ) {\n\t\t\t\t\t\t$t_cf_defs[] = custom_field_get_definition( $t_cfid );\n\t\t\t\t\t}\n\t\t\t\t\t$t_custom_fields = multi_sort( $t_cf_defs, 'name' );\n\n\t\t\t\t\tforeach( $t_custom_fields as $t_field )\n\t\t\t\t\t{\n\t\t\t\t\t\tif( !custom_field_is_linked( $t_field['id'], $f_project_id ) ) {\n\t\t\t\t\t\t\techo '<option value=\"', $t_field['id'], '\">',\n\t\t\t\t\t\t\t\tstring_attribute( lang_get_defaulted( $t_field['name'] ) ),\n\t\t\t\t\t\t\t\t'</option>' ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t?>\n\t\t\t</select>\n\t\t\t<button class=\"btn btn-sm btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'add_existing_custom_field' ) ?>\n\t\t\t</button>\n\t\t</fieldset>\n\t</form>\n</div><?php\n\t} ?>\n</div>\n</div>\n</div><?php\n}\n\nevent_signal( 'EVENT_MANAGE_PROJECT_PAGE', array( $f_project_id ) );\n?>\n\n<!-- MANAGE ACCOUNTS -->\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div id=\"project-users\" class=\"alert alert-info\">\n\t\t<div class=\"center bigger-110\">\n\t<?php\n\tprint_icon( 'fa-info-circle' );\n\techo ' ';\n\tif( VS_PUBLIC == project_get_field( $f_project_id, 'view_state' ) ) {\n\t\techo lang_get( 'public_project_msg' );\n\t} else {\n\t\techo lang_get( 'private_project_msg' );\n\t} ?>\n\t\t</div>\n\t</div>\n\n\t<div id=\"manage-project-users-div\" class=\"form-container\">\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-users', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'manage_accounts_title' ); ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t\t<div class=\"widget-body\" id=\"manage-project-users-list\">\n\n\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t<form id=\"manage-project-users-copy-form\" method=\"post\" action=\"manage_proj_user_copy.php\" class=\"form-inline\">\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<?php echo form_security_field( 'manage_proj_user_copy' ) ?>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t\t\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t\t\t\t\t<select name=\"other_project_id\" class=\"input-sm\" required>\n\t\t\t\t\t\t\t\t<option selected disabled value=\"\">\n\t\t\t\t\t\t\t\t\t<?php echo '[', lang_get( 'select_project_button' ), ']' ?>\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t<?php print_project_option_list( null, false, $f_project_id ); ?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t<span class=form-inline\">\n\t\t\t\t\t\t\t\t<button name=\"copy_from\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"1\">\n\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'copy_users_from' ) ?>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button name=\"copy_to\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"1\">\n\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'copy_users_to' ) ?>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t<?php\n\t$t_users = project_get_all_user_rows( $f_project_id, ANYBODY, $f_show_global_users );\n\t$t_users_count = count( $t_users );\n\n\tif( $t_users_count > 0 ) {\n\n\t\t$t_user_ids = array();\n\t\t$t_sort = array();\n\t\tforeach ( $t_users as $t_ix => $t_user ) {\n\t\t\t$t_user_display_name = user_get_name_from_row( $t_user );\n\t\t\t$t_users[$t_ix]['display_name'] = $t_user_display_name;\n\t\t\t$t_user_ids[] = $t_user['id'];\n\t\t\t$t_sort[] = $t_user_display_name;\n\t\t}\n\n\t\tuser_cache_array_rows( $t_user_ids );\n\t\tarray_multisort( $t_sort, SORT_ASC, SORT_NATURAL | SORT_FLAG_CASE, $t_users );\n\n\t\t?>\n\t\t\t\t<div id=\"manage-project-users-form-toolbox\" class=\"hidden widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t<div class=\"btn-toolbar\">\n\t\t\t\t\t\t<div class=\"widget-toolbar no-border pull-left\">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"search input-sm\"\n\t\t\t\t\t\t\t\t\t   placeholder=\"<?php echo lang_get( 'filter_button' ) ?>\" />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"widget-toolbar pull-left\">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'show' ) ?>\n\t\t\t\t\t\t\t\t<input id=\"input-per-page\" type=\"text\" min=\"5\" size=\"2\" class=\"input-sm\"\n\t\t\t\t\t\t\t\t\t   value=\"<?php echo config_get( 'default_limit_view' ) ?>\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<?php echo '(', lang_get( 'total' ), ': ',\n\t\t\t\t\t\t\t\t$t_users_count, ' ', lang_get( 'users_link' ), ')'\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"widget-toolbar pull-left\">\n<?php\n\t\t# Show users with global access button\n\t\tprint_form_button(\n\t\t\t'manage_proj_edit_page.php#project-users',\n\t\t\tlang_get( $f_show_global_users ? 'hide_global_users' : 'show_global_users' ),\n\t\t\tarray(\n\t\t\t\t'project_id' => $f_project_id,\n\t\t\t\t'show_global_users' => !$f_show_global_users\n\t\t\t),\n\t\t\tOFF,\n\t\t\t'btn btn-sm btn-primary btn-white btn-round'\n\t\t);\n?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"btn-group pull-right\">\n\t\t\t\t\t\t\t<ul class=\"pagination small no-margin\"></ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"widget-main no-padding\" >\n\t\t\t\t\t<form id=\"manage-project-users-form\" method=\"post\" action=\"manage_proj_user_update.php\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t\t\t\t<?php echo form_security_field( 'manage_proj_user_update' ) ?>\n\t\t\t\t\t\t<div class=\"table-responsive listjs-table\">\n\t\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-condensed\">\n\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"sort\" role=\"button\" data-sort=\"key-name\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"sort\" role=\"button\" data-sort=\"key-email\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'email' ) ?>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t<th class=\"col-md-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"sort\" role=\"button\" data-sort=\"key-access\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'access_level' ) ?>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'remove_link' ) ?>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t<tbody class=\"list\">\n<?php\n\t\t# If including global users, fetch here all local user to later distinguish them\n\t\t$t_local_users = array();\n\t\tif( $f_show_global_users ) {\n\t\t\t$t_local_users = project_get_all_user_rows( $f_project_id, ANYBODY, false );\n\t\t}\n\n\t\tforeach( $t_users as $t_user ) {\n\t\t\t$t_username =  $t_user['display_name'];\n\t\t\t$t_email = user_get_email( $t_user['id'] );\n\t\t\t$t_can_manage_this_user = $t_can_manage_users\n\t\t\t\t\t&& access_has_project_level( $t_user['access_level'], $f_project_id )\n\t\t\t\t\t&& ( !$f_show_global_users || isset( $t_local_users[$t_user['id']]) );\n?>\n\t\t<tr>\n\t\t\t<td class=\"key-name\" data-sortvalue=\"<?php echo string_attribute( $t_username ) ?>\">\n\t\t\t\t<a href=\"manage_user_edit_page.php?user_id=<?php echo $t_user['id'] ?>\">\n\t\t\t\t<?php echo prepare_user_name( $t_user['id'], false ); ?>\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t\t<td class=\"key-email\" data-sortvalue=\"<?php echo string_attribute( $t_email ) ?>\">\n\t\t\t\t<?php print_email_link( $t_email, $t_email ); ?>\n\t\t\t</td>\n\t\t\t<?php\n\t\t\t$t_current_level_string = get_enum_element( 'access_levels', $t_user['access_level'] );\n\t\t\t?>\n\t\t\t<td class=\"key-access\" data-sortvalue=\"<?php echo $t_current_level_string ?>\">\n\t\t\t\t<?php\n\t\t\t\tif( $t_can_manage_this_user ) {\n\t\t\t\t\techo '<div class=\"editable_access_level\">';\n\t\t\t\t\techo \"<span>$t_current_level_string</span>\";\n\t\t\t\t\techo '<span class=\"hidden unchanged\">';\n\t\t\t\t\techo '&nbsp;<a href=\"#\" class=\"edit_link\">[' . lang_get( 'edit' ) . ']</a>';\n\t\t\t\t\techo '</span>';\n\t\t\t\t\t$t_arrow = layout_is_rtl() ? 'fa-long-arrow-left' : 'fa-long-arrow-right';\n\t\t\t\t\techo ' <span class=\"changed_to\">';\n\t\t\t\t\tprint_icon( $t_arrow, 'fa-lg' );\n\t\t\t\t\techo '</span>';\n\t\t\t\t\techo '<select name=\"user_access_level[' . $t_user['id'] . ']\" class=\"input-xs user_access_level\"'\n\t\t\t\t\t\t\t. ' data-original_val=\"' . $t_user['access_level'] . '\" data-user_id=\"' . $t_user['id'] . '\">';\n\t\t\t\t\t# only access levels that are less than or equal current user access level for current project\n\t\t\t\t\tprint_project_access_levels_option_list( (int)$t_user['access_level'], $f_project_id );\n\t\t\t\t\techo '</select>';\n\t\t\t\t\techo '</div>';\n\t\t\t\t} else {\n\t\t\t\t\techo $t_current_level_string;\n\t\t\t\t}\n\t\t\t\t?>\n\t\t\t</td>\n\t\t\t<td class=\"center\">\n\t\t\t\t<?php\n\t\t\t\t# You need global or project-specific permissions to remove users\n\t\t\t\t#  from this project\n\t\t\t\tif( $t_can_manage_this_user ) {\n\t\t\t\t\t?>\n\t\t\t\t\t<div class=\"checkbox no-padding no-margin editable_user_delete\">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"user_access_delete[]\"\n\t\t\t\t\t\t\t\t   class=\"ace user_access_delete\"\n\t\t\t\t\t\t\t\t   value=\"<?php echo $t_user['id'] ?>\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<?php\n\t\t\t\t}\n\t\t\t\t?>\n\t\t\t</td>\n\t\t</tr>\n\t\t<?php\n\t\t}  # end for\n\t\t?>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t\t\t<div class=\"form-inline pull-left\">\n\t\t\t\t\t\t\t\t<button name=\"submit-apply\" class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'apply_changes' ) ?>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"form-inline pull-right\">\n\t\t\t\t\t\t\t\t<?php echo form_security_field( 'manage_proj_user_remove' ) ?>\n\t\t\t\t\t\t\t\t<button name=\"btn-remove-all\"\n\t\t\t\t\t\t\t\t\t    class=\"btn btn-primary btn-white btn-round\"\n\t\t\t\t\t\t\t\t\t    formaction=\"manage_proj_user_remove.php\">\n\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'remove_all_link' ) ?>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button name=\"btn-undo-remove-all\" class=\"hidden btn btn-primary btn-white btn-round\">\n\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'undo' ). ': ', lang_get( 'remove_all_link' ) ?>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n<?php\n\t} // end if user count > 0\n?>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<!-- ADD USER TO PROJECT -->\n<?php\n# We want to allow people with global permissions and people with high enough\n#  permissions on the project we are editing\nif( $t_can_manage_users ) {\n$t_users = user_get_unassigned_by_project_id( $f_project_id );\nif( count( $t_users ) > 0 ) { ?>\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div class=\"form-container\">\n\t<form id=\"manage-project-add-user-form\" method=\"post\" action=\"manage_proj_user_add.php\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'add_user_title' ); ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n        <fieldset>\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t<?php echo form_security_field( 'manage_proj_user_add' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo $f_project_id ?>\" />\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"project-add-users-username\">\n\t\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"project-add-users-username\" name=\"user_id[]\"\n\t\t\t\t\t\t\tclass=\"input-sm\" multiple=\"multiple\" size=\"10\" required>\n<?php\n\t\t\t\t\t\tforeach( $t_users AS $t_user_id=>$t_display_name ) {\n\t\t\t\t\t\t\techo '<option value=\"', $t_user_id, '\">', string_attribute( $t_display_name ), '</option>';\n\t\t\t\t\t\t}\n?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"project-add-users-access-level\">\n\t\t\t\t\t\t<?php echo lang_get( 'access_level' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"project-add-users-access-level\" name=\"access_level\" class=\"input-sm\">\n<?php\n\t\t\t\t\t\t# only access levels that are less than or equal current user access level for current project\n\t\t\t\t\t\tprint_project_access_levels_option_list(\n\t\t\t\t\t\t\tconfig_get( 'default_new_account_access_level' ),\n\t\t\t\t\t\t\t$f_project_id\n\t\t\t\t\t\t);\n?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n        </fieldset>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ) ?></span>\n\t\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t\t<?php echo lang_get( 'add_user_button' ) ?>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n\t</div>\n</div>\n<?php\n\t}\n}\n?>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "manage_proj_page.php",
          "type": "blob",
          "size": 9.1796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Project Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses icon_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses project_hierarchy_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'icon_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'project_hierarchy_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\nauth_reauthenticate();\n\n$f_sort\t= gpc_get_string( 'sort', 'name' );\n$f_dir\t= gpc_get_string( 'dir', 'ASC' );\n\nif( 'ASC' == $f_dir ) {\n\t$t_direction = ASCENDING;\n} else {\n\t$t_direction = DESCENDING;\n}\n\nlayout_page_header( lang_get( 'manage_projects_link' ) );\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_proj_page.php' );\n\n# Project Menu Form BEGIN\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n    <div class=\"space-10\"></div>\n\t<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-puzzle-piece', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'projects_title' ) ?>\n\t\t</h4>\n\t</div>\n\t<div class=\"widget-body\">\n\t<div class=\"widget-main no-padding\">\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<?php\n\t\t# Check the user's global access level before allowing project creation\n\t\tif( access_has_global_level ( config_get( 'create_project_threshold' ) ) ) {\n\t\t\tprint_form_button(\n\t\t\t\t'manage_proj_create_page.php',\n\t\t\t\tlang_get( 'create_new_project_link' ),\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\t'btn btn-primary btn-white btn-round'\n\t\t\t);\n\t\t} ?>\n\t</div>\n\t<div class=\"table-responsive\">\n\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th><?php\n\t\t\t\t\tprint_manage_project_sort_link(\n\t\t\t\t\t\t'manage_proj_page.php', lang_get( 'name' ),\n\t\t\t\t\t\t'name',\n\t\t\t\t\t\t$t_direction,\n\t\t\t\t\t\t$f_sort\n\t\t\t\t\t);\n\t\t\t\t\tprint_sort_icon( $t_direction, $f_sort, 'name' ); ?>\n\t\t\t\t</th>\n\t\t\t\t<th><?php\n\t\t\t\t\tprint_manage_project_sort_link(\n\t\t\t\t\t\t'manage_proj_page.php',\n\t\t\t\t\t\tlang_get( 'status' ),\n\t\t\t\t\t\t'status',\n\t\t\t\t\t\t$t_direction,\n\t\t\t\t\t\t$f_sort\n\t\t\t\t\t);\n\t\t\t\t\tprint_sort_icon( $t_direction, $f_sort, 'status' ); ?>\n\t\t\t\t</th>\n\t\t\t\t<th class=\"center\"><?php\n\t\t\t\t\tprint_manage_project_sort_link(\n\t\t\t\t\t\t'manage_proj_page.php',\n\t\t\t\t\t\tlang_get( 'enabled' ),\n\t\t\t\t\t\t'enabled',\n\t\t\t\t\t\t$t_direction,\n\t\t\t\t\t\t$f_sort\n\t\t\t\t\t);\n\t\t\t\t\tprint_sort_icon( $t_direction, $f_sort, 'enabled' ); ?>\n\t\t\t\t</th>\n\t\t\t\t<th><?php\n\t\t\t\t\tprint_manage_project_sort_link(\n\t\t\t\t\t\t'manage_proj_page.php',\n\t\t\t\t\t\tlang_get( 'view_status' ),\n\t\t\t\t\t\t'view_state',\n\t\t\t\t\t\t$t_direction,\n\t\t\t\t\t\t$f_sort\n\t\t\t\t\t);\n\t\t\t\t\tprint_sort_icon( $t_direction, $f_sort, 'view_state' ); ?>\n\t\t\t\t</th>\n\t\t\t\t<th><?php\n\t\t\t\t\tprint_manage_project_sort_link(\n\t\t\t\t\t\t'manage_proj_page.php',\n\t\t\t\t\t\tlang_get( 'description' ),\n\t\t\t\t\t\t'description',\n\t\t\t\t\t\t$t_direction,\n\t\t\t\t\t\t$f_sort\n\t\t\t\t\t);\n\t\t\t\t\tprint_sort_icon( $t_direction, $f_sort, 'description' ); ?>\n\t\t\t\t</th>\n\t\t\t</tr>\n\t\t</thead>\n\n\t\t<tbody>\n<?php\n\t\t$t_manage_project_threshold = config_get( 'manage_project_threshold' );\n\t\t$t_projects = user_get_accessible_projects( auth_get_current_user_id(), true );\n\t\t$t_full_projects = array();\n\t\tforeach ( $t_projects as $t_project_id ) {\n\t\t\t$t_full_projects[] = project_get_row( $t_project_id );\n\t\t}\n\t\t$t_projects = multi_sort( $t_full_projects, $f_sort, $t_direction );\n\t\t$t_stack = array( $t_projects );\n\n\t\twhile( 0 < count( $t_stack ) ) {\n\t\t\t$t_projects = array_shift( $t_stack );\n\n\t\t\tif( 0 == count( $t_projects ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t$t_project = array_shift( $t_projects );\n\t\t\t$t_project_id = $t_project['id'];\n\t\t\t$t_level      = count( $t_stack );\n\n\t\t\t# only print row if user has project management privileges\n\t\t\tif( access_has_project_level( $t_manage_project_threshold, $t_project_id, auth_get_current_user_id() ) ) { ?>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<a href=\"manage_proj_edit_page.php?project_id=<?php echo $t_project['id'] ?>\">\n\t\t\t\t\t\t<?php echo str_repeat( \"&raquo; \", $t_level )\n\t\t\t\t\t\t\t. string_display_line( $t_project['name'] ) ?>\n\t\t\t\t\t</a>\n\t\t\t\t</td>\n\t\t\t\t<td><?php echo get_enum_element( 'project_status', $t_project['status'] ) ?></td>\n\t\t\t\t<td class=\"center\"><?php echo trans_bool( $t_project['enabled'] ) ?></td>\n\t\t\t\t<td><?php echo get_enum_element( 'project_view_state', $t_project['view_state'] ) ?></td>\n\t\t\t\t<td><?php echo string_display_links( $t_project['description'] ) ?></td>\n\t\t\t</tr><?php\n\t\t\t}\n\t\t\t$t_subprojects = project_hierarchy_get_subprojects( $t_project_id, true );\n\n\t\t\tif( 0 < count( $t_projects ) || 0 < count( $t_subprojects ) ) {\n\t\t\t\tarray_unshift( $t_stack, $t_projects );\n\t\t\t}\n\n\t\t\tif( 0 < count( $t_subprojects ) ) {\n\t\t\t\t$t_full_projects = array();\n\t\t\t\tforeach ( $t_subprojects as $t_project_id ) {\n\t\t\t\t\t$t_full_projects[] = project_get_row( $t_project_id );\n\t\t\t\t}\n\t\t\t\t$t_subprojects = multi_sort( $t_full_projects, $f_sort, $t_direction );\n\t\t\t\tarray_unshift( $t_stack, $t_subprojects );\n\t\t\t}\n\t\t} ?>\n\t\t</tbody>\n\t</table>\n</div>\n\t</div>\n\t</div>\n\t</div>\n\n\t<div class=\"space-10\"></div>\n\n\t<div id=\"categories\" class=\"form-container\">\n\n\t<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-sitemap', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'global_categories' ) ?>\n\t\t</h4>\n\t</div>\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n<?php\n\t\t$t_categories = category_get_all_rows( ALL_PROJECTS );\n\t\t$t_can_update_global_cat = access_has_global_level( config_get( 'manage_site_threshold' ) );\n\n\t\tif( count( $t_categories ) > 0 ) {\n?>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th><?php echo lang_get( 'category' ) ?></th>\n\t\t\t\t<th class=\"center\"><?php echo lang_get( 'enabled' ) ?></th>\n\t\t\t\t<th><?php echo lang_get( 'assign_to' ) ?></th>\n\t\t\t\t<?php if( $t_can_update_global_cat ) { ?>\n\t\t\t\t<th class=\"center\"><?php echo lang_get( 'actions' ) ?></th>\n\t\t\t\t<?php } ?>\n\t\t\t</tr>\n\t\t</thead>\n\n\t\t<tbody>\n<?php\n\t\t\tforeach( $t_categories as $t_category ) {\n\t\t\t\t$t_id = $t_category['id'];\n?>\n\t\t\t<tr>\n\t\t\t\t<td><?php echo string_display_line( category_full_name( $t_id, false ) )  ?></td>\n\t\t\t\t<td class=\"center\"><?php echo trans_bool( $t_category['status'] ) ?></td>\n\t\t\t\t<td><?php echo prepare_user_name( $t_category['user_id'] ) ?></td>\n\t\t\t\t<?php if( $t_can_update_global_cat ) { ?>\n\t\t\t\t<td class=\"center\">\n<?php\n\t\t\t\t\t$t_id = urlencode( $t_id );\n\t\t\t\t\t$t_project_id = urlencode( ALL_PROJECTS );\n\t\t\t\t\techo '<div class=\"btn-group inline\">';\n\t\t\t\t\techo '<div class=\"pull-left\">';\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t\"manage_proj_cat_edit_page.php?category_id=$t_id&project_id=$t_project_id\",\n\t\t\t\t\t\tlang_get( 'edit' )\n\t\t\t\t\t);\n\t\t\t\t\techo '</div>';\n\t\t\t\t\techo '<div class=\"pull-left\">';\n\t\t\t\t\tprint_form_button(\n\t\t\t\t\t\t\"manage_proj_cat_delete.php?category_id=$t_id&project_id=$t_project_id\",\n\t\t\t\t\t\tlang_get( 'delete' )\n\t\t\t\t\t);\n\t\t\t\t\techo '</div>';\n?>\n\t\t\t\t</td>\n\t\t\t<?php } ?>\n\t\t\t</tr>\n<?php\n\t\t\t} # end for loop\n?>\n\t\t</tbody>\n<?php\n\t\t} # end if\n?>\n\t</table>\n\t</div>\n\t</div>\n\n<?php if( $t_can_update_global_cat ) { ?>\n\t<form method=\"post\" action=\"manage_proj_cat_add.php\" class=\"form-inline\">\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<?php echo form_security_field( 'manage_proj_cat_add' ) ?>\n\t\t\t<input type=\"hidden\" name=\"project_id\" value=\"<?php echo ALL_PROJECTS ?>\" />\n\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t<input type=\"text\" name=\"name\" class=\"input-sm\" size=\"32\" maxlength=\"128\" />\n\t\t\t<button class=\"btn btn-primary btn-sm btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'add_category_button' ) ?>\n\t\t\t</button>\n\t\t\t<button name=\"add_and_edit_category\" value=\"1\"\n\t\t\t\t\tclass=\"btn btn-primary btn-sm btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'add_and_edit_category_button' ) ?>\n\t\t\t</button>\n\t\t</div>\n\t</form>\n<?php } ?>\n</div>\n</div>\n</div>\n<?php\necho '</div>';\nlayout_page_end();\n"
        },
        {
          "name": "manage_proj_subproj_add.php",
          "type": "blob",
          "size": 2.1484375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add subproject to Project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_proj_subproj_add' );\n\nauth_reauthenticate();\n\n$f_project_id    = gpc_get_int( 'project_id' );\n$f_subproject_id = gpc_get_int( 'subproject_id' );\n$f_inherit_parent = gpc_get_bool( 'inherit_parent', true );\n\n$t_data = array(\n\t'query' => array(\n\t\t'project_id' => (int)$f_project_id\n\t),\n\t'payload' => array(\n\t\t'project' => array(\n\t\t\t'id' => (int)$f_subproject_id\n\t\t ),\n\t\t'inherit_parent' => (bool)$f_inherit_parent\n\t)\n);\n\n$t_command = new ProjectHierarchyAddCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'manage_proj_subproj_add' );\n\n$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#subprojects';\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_subproj_delete.php",
          "type": "blob",
          "size": 1.958984375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Remove subproject from Project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_proj_subproj_delete' );\n\nauth_reauthenticate();\n\n$f_project_id    = gpc_get_int( 'project_id' );\n$f_subproject_id = gpc_get_int( 'subproject_id' );\n\n\n$t_data = array(\n\t'query' => array(\n\t\t'project_id' => (int)$f_project_id,\n\t\t'subproject_id' => (int)$f_subproject_id\n\t)\n);\n\n$t_command = new ProjectHierarchyDeleteCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'manage_proj_subproj_delete' );\n\n$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#subprojects';\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_update.php",
          "type": "blob",
          "size": 2.0400390625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update Project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\n\nform_security_validate( 'manage_proj_update' );\n\nauth_reauthenticate();\n\n$f_project_id \t= gpc_get_int( 'project_id' );\n$f_name \t\t= gpc_get_string( 'name' );\n$f_description \t= gpc_get_string( 'description' );\n$f_status \t\t= gpc_get_int( 'status' );\n$f_view_state \t= gpc_get_int( 'view_state' );\n$f_file_path \t= gpc_get_string( 'file_path', '' );\n$f_enabled\t \t= gpc_get_bool( 'enabled' );\n$f_inherit_global = gpc_get_bool( 'inherit_global', 0 );\n\n$t_data = array(\n\t'query' => array(\n\t\t'id' => $f_project_id\n\t),\n\t'payload' => array(\n\t\t'name' => $f_name,\n\t\t'description' => $f_description,\n\t\t'status' => array( 'id' => $f_status ),\n\t\t'view_state' => array( 'id' => $f_view_state ),\n\t\t'file_path' => $f_file_path,\n\t\t'enabled' => $f_enabled,\n\t\t'inherit_global' => $f_inherit_global\n\t)\n);\n\n$t_command = new ProjectUpdateCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'manage_proj_update' );\n\nprint_header_redirect( 'manage_proj_page.php' );\n"
        },
        {
          "name": "manage_proj_update_children.php",
          "type": "blob",
          "size": 2.1611328125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update project hierarchy\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_proj_update_children' );\n\nauth_reauthenticate();\n\n$f_project_id = gpc_get_int( 'project_id' );\n\n$t_subproject_ids = current_user_get_accessible_subprojects( $f_project_id, true );\nforeach ( $t_subproject_ids as $t_subproject_id ) {\n\t$f_inherit_child = gpc_get_bool( 'inherit_child_' . $t_subproject_id, false );\n\n\t$t_data = array(\n\t\t'query' => array(\n\t\t\t'project_id' => (int)$f_project_id,\n\t\t\t'subproject_id' => (int)$t_subproject_id\n\t\t),\n\t\t'payload' => array(\n\t\t\t'inherit_parent' => (bool)$f_inherit_child\n\t\t)\n\t);\n\t\n\t$t_command = new ProjectHierarchyUpdateCommand( $t_data );\n\t$t_command->execute();\n}\n\nform_security_purge( 'manage_proj_update_children' );\n\n$t_redirect_url =\n\t'manage_proj_edit_page.php?project_id=' . $f_project_id . '#subprojects';\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_user_add.php",
          "type": "blob",
          "size": 1.896484375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add User to Project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'manage_proj_user_add' );\n\nauth_reauthenticate();\n\n$f_project_id\t= gpc_get_int( 'project_id' );\n$f_user_id\t\t= gpc_get_int_array( 'user_id', array() );\n$f_access_level\t= gpc_get_int( 'access_level' );\n\n# Add user(s) to the specified project\nforeach( $f_user_id as $t_user_id ) {\n\t$t_data = array(\n\t\t'payload' => array(\n\t\t\t'project' => array(\n\t\t\t\t'id' => $f_project_id\n\t\t\t),\n\t\t\t'user' => array(\n\t\t\t\t'id' => $t_user_id\n\t\t\t),\n\t\t\t'access_level' => array(\n\t\t\t\t'id' => $f_access_level\n\t\t\t)\n\t\t)\n\t);\n\n\t$t_command = new ProjectUsersAddCommand( $t_data );\n\t$t_command->execute();\n}\n\nform_security_purge( 'manage_proj_user_add' );\n\nprint_header_redirect( 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#project-users');\n"
        },
        {
          "name": "manage_proj_user_copy.php",
          "type": "blob",
          "size": 2.5498046875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Copy Users between projects\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses project_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\n\nform_security_validate( 'manage_proj_user_copy' );\n\nauth_reauthenticate();\n\n$f_project_id\t\t= gpc_get_int( 'project_id' );\n$f_other_project_id\t= gpc_get_int( 'other_project_id' );\n$f_copy_from\t\t= gpc_get_bool( 'copy_from' );\n$f_copy_to\t\t\t= gpc_get_bool( 'copy_to' );\n\nif( $f_copy_from ) {\n\t$t_src_project_id = $f_other_project_id;\n\t$t_dst_project_id = $f_project_id;\n} else if( $f_copy_to ) {\n\t$t_src_project_id = $f_project_id;\n\t$t_dst_project_id = $f_other_project_id;\n} else {\n\t# @todo Should this become a separate error?\n\ttrigger_error( ERROR_NO_COPY_ACTION, ERROR );\n}\n\n# We should check both since we are in the project section and an\n#  admin might raise the first threshold and not realize they need\n#  to raise the second\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $t_dst_project_id );\naccess_ensure_project_level( config_get( 'project_user_threshold' ), $t_dst_project_id );\n\nproject_copy_users( $t_dst_project_id, $t_src_project_id, access_get_project_level( $t_dst_project_id ) );\n\nform_security_purge( 'manage_proj_user_copy' );\n\nprint_header_redirect( 'manage_proj_edit_page.php?project_id=' . $f_project_id . \"#project-users\");\n"
        },
        {
          "name": "manage_proj_user_remove.php",
          "type": "blob",
          "size": 2.3828125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Remove User from Project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\n\nform_security_validate( 'manage_proj_user_remove' );\nauth_reauthenticate();\n\n$f_project_id = gpc_get_int( 'project_id' );\n$f_user_id = gpc_get_int( 'user_id', 0 );\n\n$t_data = array(\n\t'payload' => array(\n\t\t'project' => array( 'id' => $f_project_id ),\n\t\t'user' => array( 'id' => $f_user_id )\n\t)\n);\n\n$t_command = new ProjectUsersDeleteCommand( $t_data );\n$t_command->validate();\n\nif( 0 == $f_user_id ) {\n\t# Confirm with the user\n\thelper_ensure_confirmed( lang_get( 'remove_all_users_sure_msg' ), lang_get( 'remove_all_users_button' ) );\n} else {\n\t$t_user = user_get_row( $f_user_id );\n\n\t# Confirm with the user\n\thelper_ensure_confirmed(\n\t\tsprintf( lang_get( 'remove_user_sure_msg' ),\n\t\t\tstring_attribute( $t_user['username'] ),\n\t\t\tstring_attribute( project_get_name( $f_project_id ) )\n\t\t),\n\t\tlang_get( 'remove_user_button' )\n\t);\n}\n\n$t_command->execute();\n\nform_security_purge( 'manage_proj_user_remove' );\n\n$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_project_id;\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_user_update.php",
          "type": "blob",
          "size": 9.6435546875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses layout_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'layout_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'user_api.php' );\n\nform_security_validate( 'manage_proj_user_update' );\nauth_reauthenticate();\n\n$f_project_id = gpc_get_int( 'project_id' );\n$f_confirmed = gpc_get_bool( '_confirmed' );\n\nproject_ensure_exists( $f_project_id );\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\naccess_ensure_project_level( config_get( 'project_user_threshold' ), $f_project_id );\n\n# If the form was managed by javascript, we recive relevant data in a json array\n# so we can ignore the standard inputs\n$f_form_json_updates = gpc_get_string( 'json_submit', null );\nif( $f_form_json_updates ) {\n\t$t_form_updates = json_decode( $f_form_json_updates, true );\n\t$f_form_updated_acls = $t_form_updates['user_access_level'];\n\t$f_form_deleted_ids = $t_form_updates['user_access_delete'];\n} else {\n\t$f_form_updated_acls = gpc_get_int_array( 'user_access_level', array() );\n\t$f_form_deleted_ids = gpc_get_int_array( 'user_access_delete', array() );\n}\n\n# Build and validate the set of changes\n\n$t_users_to_update = array();\n$t_users_to_delete = array();\n\n$t_all_local_users = project_get_all_user_rows( $f_project_id, ANYBODY, false );\n\nforeach( $f_form_deleted_ids as $t_id ) {\n\tif( !isset( $t_all_local_users[$t_id] ) ) {\n\t\t# a user id that is not explicitly assigned to the project\n\t\tcontinue;\n\t}\n\t$t_user = $t_all_local_users[$t_id];\n\t$t_can_manage_this_user = access_has_project_level( $t_user['access_level'], $f_project_id );\n\tif( !$t_can_manage_this_user ) {\n\t\t# this user can't be modified\n\t\tcontinue;\n\t}\n\t$t_users_to_delete[$t_id] = $t_id;\n}\n\n$t_current_user_access_level = access_get_project_level( $f_project_id );\n$t_enum_values = MantisEnum::getValues( config_get( 'access_levels_enum_string' ) );\n\nforeach( $f_form_updated_acls as $t_id => $t_value ) {\n\tif( isset( $t_users_to_delete[$t_id] ) ) {\n\t\t# this user is marked for deletion, ignore it\n\t\tcontinue;\n\t}\n\tif( !isset( $t_all_local_users[$t_id] ) ) {\n\t\t# a user id that is not explicitly assigned to the project\n\t\tcontinue;\n\t}\n\t$t_user = $t_all_local_users[$t_id];\n\tif( $t_value == $t_user['access_level'] ) {\n\t\t# the value is not changed, ignore it\n\t\tcontinue;\n\t}\n\t$t_can_manage_this_user = access_has_project_level( $t_user['access_level'], $f_project_id );\n\tif( !$t_can_manage_this_user ) {\n\t\t# this user can't be modified\n\t\tcontinue;\n\t}\n\n\tif( $t_value > $t_current_user_access_level ) {\n\t\t# can't assign a higer level that the one current use has\n\t\tcontinue;\n\t}\n\tif( !in_array( $t_value, $t_enum_values ) ) {\n\t\t# the submitted access level is not valid\n\t\tcontinue;\n\t}\n\n\t$t_users_to_update[$t_id] = $t_value;\n}\n\nif( !$f_confirmed ) {\n\t# Display a confirmation page with a summary of changes\n\n\t$t_affected_users = array_merge( array_keys( $t_users_to_update ), array_keys( $t_users_to_delete ) );\n\n\tlayout_page_header();\n\tlayout_page_begin();\n\t?>\n\t<div class=\"col-md-12 col-xs-12\">\n\t\t<div class=\"space-10\"></div>\n\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-bar-chart', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'review_changes' ) ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main no-padding\">\n\t<?php\n\tif( empty( $t_affected_users ) ) {\n\t\t$t_message = lang_get( 'review_changes_empty' );\n\t\t?>\n\t\t\t\t\t<div class=\"alert alert-warning center\">\n\t\t\t\t\t\t<p class=\"bigger-110\"><?php echo $t_message ?></p>\n\t\t\t\t\t\t<div class=\"space-10\"></div>\n\t\t\t\t\t</div>\n\t\t<?php\n\t} else {\n\t\t$t_message = lang_get( 'review_changes_confirmation' );\n\t\t$t_button_label = lang_get( 'yes' );\n\t\t?>\n\t\t\t\t\t<div class=\"alert alert-warning center\">\n\t\t\t\t\t\t<p class=\"bigger-110\"><?php echo $t_message ?></p>\n\t\t\t\t\t\t<div class=\"space-10\"></div>\n\n\t\t\t\t\t\t<form method=\"post\" class=\"center\" action=\"\">\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"_confirmed\" value=\"1\" />\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tprint_hidden_inputs( $_POST );\n\t\t\t\t\t\t\tprint_hidden_inputs( $_GET );\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo $t_button_label ?>\" />\n\t\t\t\t\t\t</form>\n\n\t\t\t\t\t\t<div class=\"space-10\"></div>\n\t\t\t\t\t</div>\n\t\t\t<?php\n\t}\n\t?>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t<?php\n\n\tuser_cache_array_rows( $t_affected_users );\n\n\t# Table for users to be deleted\n\tif( !empty( $t_users_to_delete ) ) {\n\t\t# prepare usernames to sort the results\n\t\t$t_usernames_val = Array();\n\t\tforeach( $t_users_to_delete as $t_id ) {\n\t\t\t$t_usernames_val[] = user_get_name( $t_id );\n\t\t}\n\t\t$t_users_to_delete = array_values( $t_users_to_delete );\n\t\tarray_multisort( $t_usernames_val, SORT_ASC, SORT_NATURAL | SORT_FLAG_CASE, $t_users_to_delete );\n\t?>\n\t\t<div class=\"space-10\"></div>\n\n\t\t<div class=\"widget-box widget-color-grey\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-user-times', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'remove_project_user_title' ) ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t\t<div class=\"table-responsive sortable\">\n\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-condensed\">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'username' ) ?></th>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'old_value' ), ': ', lang_get( 'access_level' ) ?></th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t$fn_print_tr = function( $p_td1, $p_td2 ) {\n\t\t\t\t\t\t\t\t\techo '<tr><td>' . $p_td1 . '</td><td>' . $p_td2 . '</td></tr>';\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tforeach( $t_users_to_delete as $t_id ) {\n\t\t\t\t\t\t\t\t\t$t_username = prepare_user_name( $t_id, false );\n\t\t\t\t\t\t\t\t\t$t_str_acl = get_enum_element( 'access_levels', $t_all_local_users[$t_id]['access_level'] );\n\t\t\t\t\t\t\t\t\t$fn_print_tr( $t_username, $t_str_acl );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t<?php\n\t}\n\n\t# Table for users to be modified\n\tif( !empty( $t_users_to_update ) ) {\n\t\t# prepare usernames to sort the results\n\t\t$t_usernames_val = Array();\n\t\tforeach( $t_users_to_update as $t_id => $t_val ) {\n\t\t\t$t_usernames_val[] = user_get_name( $t_id );\n\t\t}\n\t\t$t_update_key = array_keys( $t_users_to_update );\n\t\t$t_update_val = array_values( $t_users_to_update );\n\t\tarray_multisort( $t_usernames_val, SORT_ASC, SORT_NATURAL | SORT_FLAG_CASE, $t_update_key, $t_update_val );\n\t\t$t_users_to_update = array_combine( $t_update_key, $t_update_val );\n\t?>\n\t\t<div class=\"space-10\"></div>\n\n\t\t<div class=\"widget-box widget-color-grey\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'modify_project_user_title' ) ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t\t<div class=\"table-responsive sortable\">\n\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-condensed\">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'username' ) ?></th>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'old_value' ), ': ', lang_get( 'access_level' ) ?></th>\n\t\t\t\t\t\t\t\t\t<th><?php echo lang_get( 'new_value' ), ': ', lang_get( 'access_level' ) ?></th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t$fn_print_tr = function( $p_td1, $p_td2, $p_td3 ) {\n\t\t\t\t\t\t\t\t\techo '<tr><td>' . $p_td1 . '</td><td>' . $p_td2 . '</td><td>' . $p_td3 . '</td></tr>';\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tforeach( $t_users_to_update as $t_id => $t_new_acl ) {\n\t\t\t\t\t\t\t\t\t$t_username = prepare_user_name( $t_id, false );\n\t\t\t\t\t\t\t\t\t$t_old_acl = $t_all_local_users[$t_id]['access_level'];\n\t\t\t\t\t\t\t\t\t$t_str_new_acl = get_enum_element( 'access_levels', $t_new_acl );\n\t\t\t\t\t\t\t\t\t$t_str_old_acl = get_enum_element( 'access_levels', $t_old_acl );\n\t\t\t\t\t\t\t\t\t$fn_print_tr( $t_username, $t_str_old_acl, $t_str_new_acl );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t<?php\n\t}\n\t?>\n\t</div>\n\t<?php\n\n\tlayout_page_end();\n\n} else {\n\t# $f_confirmed is true\n\t# do the actual changes\n\tif( !empty( $t_users_to_update ) ) {\n\t\tproject_add_users( $f_project_id, $t_users_to_update );\n\t}\n\tif( !empty( $t_users_to_delete ) ) {\n\t\tproject_remove_users( $f_project_id, $t_users_to_delete );\n\t}\n\n\tform_security_purge( 'manage_proj_user_update' );\n\t\n\t$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#project-users';\n\tprint_header_redirect( $t_redirect_url );\n}\n"
        },
        {
          "name": "manage_proj_ver_add.php",
          "type": "blob",
          "size": 3.0146484375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add a new version to project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses utility_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_api( 'version_api.php' );\n\nform_security_validate( 'manage_proj_ver_add' );\n\nauth_reauthenticate();\n\n$f_project_id\t= gpc_get_int( 'project_id' );\n$f_version\t\t= gpc_get_string( 'version' );\n$f_add_and_edit = gpc_get_bool( 'add_and_edit_version' );\n\n# We reverse the array so that if the user enters multiple versions\n#  they will likely appear with the last item entered at the top of the list\n#  (i.e. in reverse chronological order).  Unless we find a way to make the\n#  date_order fields different for each one, however, this is fragile, since\n#  the DB may actually pull the rows out in any order\n$t_versions = array_reverse( explode( '|', $f_version ) );\n\n$t_version_id = 0;\n\nforeach ( $t_versions as $t_version ) {\n\tif( is_blank( $t_version ) ) {\n\t\tcontinue;\n\t}\n\n\t$t_data = array(\n\t\t'query' => array(\n\t\t\t'project_id' => (int)$f_project_id\n\t\t),\n\t\t'payload' => array(\n\t\t\t'name' => $t_version\n\t\t)\n\t);\n\n\t$t_command = new VersionAddCommand( $t_data );\n\t$t_result = $t_command->execute();\n\t$t_version_id = $t_result['version']['id'];\n}\n\nform_security_purge( 'manage_proj_ver_add' );\n\nif( $t_version_id == 0 ) {\n\terror_parameters( lang_get( 'version' ) );\n\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n}\n\nif( $f_add_and_edit ) {\n\t$t_redirect_url =\n\t\t'manage_proj_ver_edit_page.php?version_id=' . $t_version_id;\n} else {\n\t$t_redirect_url =\n\t\t'manage_proj_edit_page.php?project_id=' . $f_project_id . '#versions';\n}\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_ver_copy.php",
          "type": "blob",
          "size": 3.25,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Copy Versions between projects\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'version_api.php' );\n\nform_security_validate( 'manage_proj_ver_copy' );\n\nauth_reauthenticate();\n\n$f_project_id\t\t= gpc_get_int( 'project_id' );\n$f_other_project_id\t= gpc_get_int( 'other_project_id' );\n$f_copy_from\t\t= gpc_get_bool( 'copy_from' );\n$f_copy_to\t\t\t= gpc_get_bool( 'copy_to' );\n\nproject_ensure_exists( $f_project_id );\nproject_ensure_exists( $f_other_project_id );\n\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_project_id );\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $f_other_project_id );\n\nif( $f_copy_from ) {\n\t$t_src_project_id = $f_other_project_id;\n\t$t_dst_project_id = $f_project_id;\n} else if( $f_copy_to ) {\n\t$t_src_project_id = $f_project_id;\n\t$t_dst_project_id = $f_other_project_id;\n} else {\n\ttrigger_error( ERROR_NO_COPY_ACTION, ERROR );\n}\n\n# Get all active versions (i.e. exclude obsolete ones)\n$t_rows = version_get_all_rows( $t_src_project_id );\n\nforeach ( $t_rows as $t_row ) {\n\t$t_dst_version_id = version_get_id( $t_row['version'], $t_dst_project_id );\n\tif( $t_dst_version_id === false ) {\n\t\t# Version does not exist in target project\n\t\tversion_add(\n\t\t\t$t_dst_project_id,\n\t\t\t$t_row['version'],\n\t\t\t$t_row['released'],\n\t\t\t$t_row['description'],\n\t\t\t$t_row['date_order']\n\t\t);\n\t} else {\n\t\t# Update existing version\n\t\t# Since we're ignoring obsolete versions, those marked as such in the\n\t\t# source project after an earlier copy operation will not be updated\n\t\t# in the target project.\n\t\t$t_version_data = new VersionData( $t_row );\n\t\t$t_version_data->id = $t_dst_version_id;\n\t\t$t_version_data->project_id = $t_dst_project_id;\n\n\t\tversion_update( $t_version_data );\n\t}\n}\n\nform_security_purge( 'manage_proj_ver_copy' );\n\nprint_header_redirect( 'manage_proj_edit_page.php?project_id=' . $f_project_id . '#versions');\n"
        },
        {
          "name": "manage_proj_ver_delete.php",
          "type": "blob",
          "size": 2.013671875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Delete Project Version\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\n\nform_security_validate( 'manage_proj_ver_delete' );\n\nauth_reauthenticate();\n\n$f_version_id = gpc_get_int( 'version_id' );\n\n$t_version_info = version_get( $f_version_id );\n\n# Confirm with the user\nhelper_ensure_confirmed(\n\tsprintf( lang_get( 'version_delete_sure' ),\n\t\tstring_display_line( $t_version_info->version )\n\t),\n\tlang_get( 'delete_version_button' )\n);\n\n$t_data = array(\n\t'query' => array(\n\t\t'project_id' => $t_version_info->project_id,\n\t\t'version_id' => $f_version_id,\n\t)\n);\n\n$t_command = new VersionDeleteCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'manage_proj_ver_delete' );\n\n$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $t_version_info->project_id . '#versions';\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_proj_ver_edit_page.php",
          "type": "blob",
          "size": 5.3662109375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Edit Project Versions\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses string_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'version_api.php' );\n\nauth_reauthenticate();\n\n$f_version_id = gpc_get_int( 'version_id' );\n\n$t_version = version_get( $f_version_id );\n\naccess_ensure_project_level( config_get( 'manage_project_threshold' ), $t_version->project_id );\n\nlayout_page_header();\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_proj_ver_edit_page.php' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div id=\"manage-proj-version-update-div\" class=\"form-container\">\n\t<form id=\"manage-proj-version-update-form\" method=\"post\" action=\"manage_proj_ver_update.php\">\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-share-alt', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'edit_project_version_title' ) ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_proj_ver_update' ) ?>\n\t\t\t<input type=\"hidden\" name=\"version_id\" value=\"<?php echo string_attribute( $t_version->id ) ?>\" />\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'version' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"proj-version-new-version\" name=\"new_version\" class=\"input-sm\" size=\"32\" maxlength=\"64\" value=\"<?php echo string_attribute( $t_version->version ) ?>\" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'date_order' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"proj-version-date-order\" name=\"date_order\" class=\"datetimepicker input-sm\"\n\t\t\t\t\t\tdata-picker-locale=\"<?php echo lang_get_current_datetime_locale() ?>\"\n\t\t\t\t\t\tdata-picker-format=\"<?php echo config_get( 'datetime_picker_format' ) ?>\"\n\t\t\t\t\t\tsize=\"16\" value=\"<?php echo (date_is_null( $t_version->date_order ) ? '' : string_attribute( date( config_get( 'normal_date_format' ), $t_version->date_order ) ) ) ?>\" />\n\t\t\t\t\t<?php print_icon( 'fa-calendar', 'fa-xlg datetimepicker' ); ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'description' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"proj-version-description\" name=\"description\" cols=\"60\" rows=\"5\">\n<?php echo string_attribute( $t_version->description ) ?>\n</textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'released' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"proj-version-released\" name=\"released\" <?php check_checked( (boolean)$t_version->released, VERSION_RELEASED ); ?> />\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'obsolete' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"proj-version-obsolete\" name=\"obsolete\" <?php check_checked( (boolean)$t_version->obsolete, true ); ?> />\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<?php event_signal( 'EVENT_MANAGE_VERSION_UPDATE_FORM', array( $t_version->id ) ); ?>\n\t\t</fieldset>\n\t\t</table>\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ) ?></span>\n\t\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t\t<?php echo lang_get( 'update_version_button' ) ?>\n\t\t\t\t</button>\n\t\t\t\t<?php echo form_security_field( 'manage_proj_ver_delete' ) ?>\n\t\t\t\t<button class=\"btn btn-primary btn-white btn-round\"\n\t\t\t\t\t\tformaction=\"manage_proj_ver_delete.php\">\n\t\t\t\t\t<?php echo lang_get( 'delete_version_button' ) ?>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\t</form>\n</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "manage_proj_ver_update.php",
          "type": "blob",
          "size": 2.2685546875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update Project Versions\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'manage_proj_ver_update' );\n\nauth_reauthenticate();\n\n$f_version_id   = gpc_get_int( 'version_id' );\n$f_date_order\t= gpc_get_string( 'date_order' );\n$f_new_version\t= gpc_get_string( 'new_version' );\n$f_description  = gpc_get_string( 'description' );\n$f_released     = gpc_get_bool( 'released' );\n$f_obsolete\t    = gpc_get_bool( 'obsolete' );\n\n$f_new_version\t= trim( $f_new_version );\n$t_version = version_get( $f_version_id );\n\n$t_data = array(\n\t'query' => array(\n\t\t'project_id' => $t_version->project_id,\n\t\t'version_id' => $f_version_id\n\t),\n\t'payload' => array(\n\t\t'name' => $f_new_version,\n\t\t'description' => $f_description,\n\t\t'released' => $f_released,\n\t\t'obsolete' => $f_obsolete,\n\t\t'timestamp' => $f_date_order\n\t)\n);\n\n$t_command = new VersionUpdateCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'manage_proj_ver_update' );\n\n$t_redirect_url = 'manage_proj_edit_page.php?project_id=' . $t_version->project_id . '#versions';\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_tags_page.php",
          "type": "blob",
          "size": 7.3046875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tags Page\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses database_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\n\naccess_ensure_global_level( config_get( 'tag_edit_threshold' ) );\n\ncompress_enable();\n\n$t_can_edit = access_has_global_level( config_get( 'tag_edit_threshold' ) );\n$f_filter = mb_strtoupper( gpc_get_string( 'filter', config_get( 'default_manage_tag_prefix' ) ) );\n$f_page_number = gpc_get_int( 'page_number', 1 );\n\n# Start Index Menu\n$t_prefix_array = array_merge(\n\tarray( 'ALL' ),\n\trange( 'A', 'Z' ),\n\trange( '0', '9' )\n);\n\nif( $f_filter === 'ALL' ) {\n\t$t_name_filter = '';\n} else {\n\t$t_name_filter = $f_filter;\n}\n\n# Set the number of Tags per page.\n$t_per_page = 20;\n$t_offset = (( $f_page_number - 1 ) * $t_per_page );\n\n# Determine number of tags in tag table\n$t_total_tag_count = tag_count( $t_name_filter );\n\n# Number of pages from result\n$t_page_count = ceil( $t_total_tag_count / $t_per_page );\n\nif( $t_page_count < 1 ) {\n\t$t_page_count = 1;\n}\n\n# Make sure $p_page_number isn't past the last page.\nif( $f_page_number > $t_page_count ) {\n\t$f_page_number = $t_page_count;\n}\n\n# Make sure $p_page_number isn't before the first page\nif( $f_page_number < 1 ) {\n\t$f_page_number = 1;\n}\n\n# Retrieve Tags from table\n$t_result = tag_get_all( $t_name_filter, $t_per_page, $t_offset ) ;\n\nlayout_page_header( lang_get( 'manage_tags_link' ) );\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_tags_page.php' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div class=\"center\">\n\t\t<div class=\"btn-toolbar inline\">\n\t\t<div class=\"btn-group\">\n\t<?php\n\tforeach ( $t_prefix_array as $t_prefix ) {\n\t\t$t_caption = ( $t_prefix === 'ALL' ? lang_get( 'show_all_tags' ) : $t_prefix );\n\t\t$t_active = (string)$t_prefix == (string)$f_filter ? 'active' : '';\n\t\techo '<a class=\"btn btn-xs btn-white btn-primary ' . $t_active .\n\t\t'\" href=\"manage_tags_page.php?filter=' . $t_prefix .'\">' . $t_caption . '</a>' .\"\\n\";\n\t} ?>\n\t\t</div>\n\t</div>\n\t</div>\n\n<div class=\"space-10\"></div>\n\n<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-tags', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get('manage_tags_link') ?>\n\t\t\t<span class=\"badge\"><?php echo $t_total_tag_count ?></span>\n\t\t</h4>\n\t</div>\n\n\t<div class=\"widget-body\">\n\t\t<?php if ($t_can_edit) { ?>\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<?php print_small_button( '#tagcreate', lang_get('tag_create') ) ?>\n\t\t\t</div>\n\t\t<?php } ?>\n\t<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td><?php echo lang_get( 'tag_name' ) ?></td>\n\t\t\t\t<td><?php echo lang_get( 'tag_creator' ) ?></td>\n\t\t\t\t<td><?php echo lang_get( 'tag_created' ) ?></td>\n\t\t\t\t<td><?php echo lang_get( 'tag_updated' ) ?></td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n<?php\n\t\t# Display all tags\n\t\twhile( $t_tag_row = db_fetch_array( $t_result ) ) {\n\t\t\t$t_tag_name = string_display_line( $t_tag_row['name'] );\n\t\t\t$t_tag_description = string_display( $t_tag_row['description'] );\n?>\n\t\t\t<tr>\n\t\t\t<?php if( $t_can_edit ) { ?>\n\t\t\t\t<td><a href=\"tag_view_page.php?tag_id=<?php echo $t_tag_row['id'] ?>\" ><?php echo $t_tag_name ?></a></td>\n\t\t\t<?php } else { ?>\n\t\t\t\t<td><?php echo $t_tag_name ?></td>\n\t\t\t<?php } ?>\n\t\t\t\t<td><?php echo string_display_line( user_get_name( $t_tag_row['user_id'] ) ) ?></td>\n\t\t\t\t<td><?php echo date( config_get( 'normal_date_format' ), $t_tag_row['date_created'] ) ?></td>\n\t\t\t\t<td><?php echo date( config_get( 'normal_date_format' ), $t_tag_row['date_updated'] ) ?></td>\n\t\t\t</tr>\n<?php\n\t\t} # end while loop on tags\n?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t</div>\n<?php\n\t# Do not display the section's footer if we have only one page of users,\n\t# otherwise it will be empty as the navigation controls won't be shown.\n\tif( $t_total_tag_count > $t_per_page ) {\n?>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<div class=\"btn-toolbar pull-right\"><?php\n\t\t\t# @todo hack - pass in the hide inactive filter via cheating the actual filter value\n\t\t\tprint_page_links( 'manage_tags_page.php', 1, $t_page_count, (int)$f_page_number, $f_filter ); ?>\n\t\t</div>\n\t</div>\n<?php } ?>\n</div>\n</div>\n\n<?php if( $t_can_edit ) { ?>\n<div class=\"space-10\"></div>\n\t<form id=\"manage-tags-create-form\" method=\"post\" action=\"tag_create.php\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-tag', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get('tag_create') ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t\t<a id=\"tagcreate\"></a>\n\t\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"form-container\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'tag_create' ); ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"tag-name\">\n\t\t\t\t\t\t<span class=\"required\">*</span>\n\t\t\t\t\t\t<?php echo lang_get( 'tag_name' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"tag-name\" name=\"name\" class=\"input-sm\" size=\"40\" maxlength=\"100\" required />\n\t\t\t\t\t<small><?php echo sprintf( lang_get( 'tag_separate_by' ), config_get( 'tag_separator' ) ); ?></small>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<label for=\"tag-description\">\n\t\t\t\t\t\t<?php echo lang_get( 'tag_description' ) ?>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"tag-description\" name=\"description\" cols=\"80\" rows=\"6\"></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</fieldset>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ); ?></span>\n\t\t\t\t<input type=\"submit\" name=\"config_set\" class=\"btn btn-primary btn-sm btn-white btn-round\"\n\t\t\t\t\t   value=\"<?php echo lang_get('tag_create') ?>\"/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t</form>\n<?php\n} # End can Edit\n\necho '</div>';\nlayout_page_end();\n"
        },
        {
          "name": "manage_user_create.php",
          "type": "blob",
          "size": 3.451171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Create a User\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'manage_user_create' );\n\nauth_reauthenticate();\n\n$f_username        = gpc_get_string( 'username' );\n$f_realname        = gpc_get_string( 'realname', '' );\n$f_password        = gpc_get_string( 'password', '' );\n$f_password_verify = gpc_get_string( 'password_verify', '' );\n$f_email           = gpc_get_string( 'email', '' );\n$f_access_level    = gpc_get_string( 'access_level' );\n$f_protected       = gpc_get_bool( 'protected' );\n$f_enabled         = gpc_get_bool( 'enabled' );\n\nif( $f_password != $f_password_verify ) {\n\ttrigger_error( ERROR_USER_CREATE_PASSWORD_MISMATCH, ERROR );\n}\n\n# Password won't be sent by email. It is entered by the admin\n# Now, if the password is empty, confirm that that is what we wanted\nif( is_blank( $f_password ) && (\n\tON != config_get( 'send_reset_password' ) ||\n\tON != config_get( 'enable_email_notification' ) )\n) {\n\thelper_ensure_confirmed(\n\t\tlang_get( 'empty_password_sure_msg' ),\n\t\tlang_get( 'empty_password_button' ) );\n}\n\n$t_data = array(\n\t'query' => array(),\n\t'payload' => array(\n\t\t'username' => $f_username,\n\t\t'email' => $f_email,\n\t\t'access_level' => array( 'id' => $f_access_level ),\n\t\t'real_name' => $f_realname,\n\t\t'password' => $f_password,\n\t\t'protected' => $f_protected,\n\t\t'enabled' => $f_enabled\n\t)\n);\n\n$t_command = new UserCreateCommand( $t_data );\n$t_result = $t_command->execute();\n\nform_security_purge( 'manage_user_create' );\n\n$t_user_id = $t_result['id'];\n$t_redirect_url = 'manage_user_edit_page.php?user_id=' . $t_user_id;\n\nlayout_page_header( null, $t_redirect_url );\nlayout_page_begin( 'manage_overview_page.php' );\n\n$t_access_level = get_enum_element( 'access_levels', $f_access_level );\n$t_message = lang_get( 'created_user_part1' )\n\t. ' <span class=\"bold\">' . $f_username . '</span> '\n\t. lang_get( 'created_user_part2' )\n\t. ' <span class=\"bold\">' . $t_access_level . '</span><br />';\nhtml_operation_successful( $t_redirect_url, $t_message );\n\nlayout_page_end();\n"
        },
        {
          "name": "manage_user_create_page.php",
          "type": "blob",
          "size": 4.9560546875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * User Create Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\nauth_reauthenticate();\n\naccess_ensure_global_level( config_get( 'manage_user_threshold' ) );\n\n$t_ldap = ( LDAP == config_get_global( 'login_method' ) );\n\nlayout_page_header();\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_user_create_page.php' );\n?>\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n<div id=\"manage-user-create-div\" class=\"form-container\">\n\t<form id=\"manage-user-create-form\" method=\"post\" action=\"manage_user_create.php\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'create_new_account_title' ) ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'manage_user_create' ) ?>\n\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"user-username\" name=\"username\" class=\"input-sm\" size=\"32\" maxlength=\"<?php echo DB_FIELD_SIZE_USERNAME;?>\" />\n\t\t\t\t</td>\n\t\t\t</tr><?php\n\t\t\tif( !$t_ldap || config_get_global( 'use_ldap_realname' ) == OFF ) { ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'realname' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"user-realname\" name=\"realname\" class=\"input-sm\" size=\"32\" maxlength=\"<?php echo DB_FIELD_SIZE_REALNAME;?>\" />\n\t\t\t\t</td>\n\t\t\t</tr><?php\n\t\t\t}\n\t\t\tif( !$t_ldap || config_get_global( 'use_ldap_email' ) == OFF ) { ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'email' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php print_email_input( 'email', '' ) ?>\n\t\t\t\t</td>\n\t\t\t</tr><?php\n\t\t\t}\n\t\t\tif( OFF == config_get( 'send_reset_password' ) )  { ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'password' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"password\" id=\"user-password\" name=\"password\" size=\"32\" maxlength=\"<?php echo auth_get_password_max_size(); ?>\" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'verify_password' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"password\" id=\"user-verify-password\" name=\"password_verify\" size=\"32\" maxlength=\"<?php echo auth_get_password_max_size(); ?>\" />\n\t\t\t\t</td>\n\t\t\t</tr><?php\n\t\t\t} ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'access_level' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"user-access-level\" name=\"access_level\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_project_access_levels_option_list( config_get( 'default_new_account_access_level' ) ) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'enabled' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"user-enabled\" name=\"enabled\" checked=\"checked\">\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'protected' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"user-protected\" name=\"protected\">\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t</fieldset>\n\t\t\t</table>\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<?php event_signal( 'EVENT_MANAGE_USER_CREATE_FORM' ) ?>\n\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'create_user_button' ) ?>\" />\n\t\t\t</div>\n\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "manage_user_delete.php",
          "type": "blob",
          "size": 2.4755859375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * User Delete\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\n\nform_security_validate( 'manage_user_update' );\n\nauth_reauthenticate();\n\n$f_user_id\t= gpc_get_int( 'user_id' );\n\n$t_user = user_get_row( $f_user_id );\nhelper_ensure_confirmed(\n\tsprintf( lang_get( 'delete_account_sure_msg' ),\n\t\tstring_attribute( $t_user['username'] )\n\t),\n\tlang_get( 'delete_account_button' )\n);\n\n# If an administrator is trying to delete their own account, use\n# account_delete.php instead as it is handles logging out and redirection\n# of users who have just deleted their own accounts.\nif( auth_get_current_user_id() == $f_user_id ) {\n\tform_security_purge( 'manage_user_delete' );\n\tprint_header_redirect( 'account_delete.php?account_delete_token=' . form_security_token( 'account_delete' ), true, false );\n}\n\n$t_data = array(\n\t'query' => array( 'id' => $f_user_id )\n);\n\n$t_command = new UserDeleteCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'manage_user_delete' );\n\nprint_header_redirect( 'manage_user_page.php' );\n"
        },
        {
          "name": "manage_user_edit_page.php",
          "type": "blob",
          "size": 14.5244140625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * User Edit Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses error_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n *\n * @noinspection PhpUnhandledExceptionInspection\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\nauth_reauthenticate();\n\naccess_ensure_global_level( config_get( 'manage_user_threshold' ) );\n\n$f_username = gpc_get_string( 'username', '' );\n\nif( is_blank( $f_username ) ) {\n\t$t_user_id = gpc_get_int( 'user_id' );\n} else {\n\t$t_user_id = user_get_id_by_name( $f_username );\n\tif( $t_user_id === false ) {\n\t\t# If we can't find the user by name, attempt to find by email.\n\t\t$t_user_id = user_get_id_by_email( $f_username );\n\t\tif( $t_user_id === false ) {\n\t\t\t# If we can't find the user by email, attempt to find by realname.\n\t\t\t$t_user_id = user_get_id_by_realname( $f_username );\n\t\t\tif( $t_user_id === false ) {\n\t\t\t\terror_parameters( $f_username );\n\t\t\t\ttrigger_error( ERROR_USER_BY_NAME_NOT_FOUND, ERROR );\n\t\t\t}\n\t\t}\n\t}\n}\n\n$t_user = user_get_row( $t_user_id );\nif( !$t_user ) {\n\terror_parameters( $t_user_id );\n\ttrigger_error( ERROR_USER_BY_ID_NOT_FOUND, ERROR);\n}\n\n# Ensure that the account to be updated is of equal or lower access to the\n# current user.\naccess_ensure_global_level( $t_user['access_level'] );\n\n$t_ldap = ( LDAP == config_get_global( 'login_method' ) );\n\n# User action buttons: RESET/UNLOCK, IMPERSONATE and DELETE\n$t_reset = $t_user['id'] != auth_get_current_user_id()\n\t&& auth_can_set_password( $t_user['id'] )\n\t&& user_is_enabled( $t_user['id'] )\n\t&& !user_is_protected( $t_user['id'] );\n$t_unlock = !user_is_login_request_allowed( $t_user['id'] );\n$t_delete = !( user_is_administrator( $t_user_id )\n\t&& user_count_level( config_get_global( 'admin_site_threshold' ) ) <= 1\n);\n$t_impersonate = auth_can_impersonate( $t_user['id'] );\n$t_email_notification_enabled = ON == config_get( 'enable_email_notification' );\n$t_reset_password_msg = lang_get(\n\t( ON == config_get( 'send_reset_password' ) && $t_email_notification_enabled )\n\t? 'reset_password_msg'\n\t: 'reset_password_msg2'\n);\n\nlayout_page_header();\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_user_page.php' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\n<!-- EDIT USER INFO SECTION -->\n<div id=\"edit-user-div\" class=\"form-container\">\n<form id=\"edit-user-form\" method=\"post\" action=\"manage_user_update.php\">\n\t<?php echo form_security_field( 'manage_user_update' ) ?>\n\t<input type=\"hidden\" name=\"user_id\" value=\"<?php echo $t_user['id'] ?>\" />\n\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get('edit_user_title') ?>\n\t\t\t</h4>\n\t\t</div>\n\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main no-padding table-responsive\">\n\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\n\t\t\t\t\t<!-- Username -->\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"category width-30\">\n\t\t\t\t\t\t\t<label for=\"edit-username\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'username_label' ) ?>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id=\"edit-username\" name=\"username\"\n\t\t\t\t\t\t\t\t   type=\"text\" class=\"input-sm\"\n\t\t\t\t\t\t\t\t   size=\"32\" maxlength=\"<?php echo DB_FIELD_SIZE_USERNAME;?>\"\n\t\t\t\t\t\t\t\t   value=\"<?php echo string_attribute( $t_user['username'] ) ?>\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<!-- Realname -->\n\t\t\t\t\t<tr>\n<?php\n\tif( $t_ldap && ON == config_get_global( 'use_ldap_realname' ) ) {\n\t\t# With LDAP\n?>\n\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'realname_label' ) ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<?php echo string_display_line( user_get_realname( $t_user_id ) ) ?>\n\t\t\t\t\t\t</td>\n<?php\n\t} else {\n\t\t# Without LDAP\n?>\n\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t<label for=\"edit-realname\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'realname_label' ) ?>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id=\"edit-realname\" name=\"realname\"\n\t\t\t\t\t\t\t\t   type=\"text\" class=\"input-sm\"\n\t\t\t\t\t\t\t\t   size=\"32\" maxlength=\"<?php echo DB_FIELD_SIZE_REALNAME;?>\"\n\t\t\t\t\t\t\t\t   value=\"<?php echo string_attribute( $t_user['realname'] ) ?>\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</td>\n<?php\n\t}\n?>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<!-- Email -->\n\t\t\t\t\t<tr>\n<?php\n\tif( $t_ldap && ON == config_get_global( 'use_ldap_email' ) ) {\n\t\t# With LDAP\n?>\n\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'email_label' ) ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<?php echo string_display_line( user_get_email( $t_user_id ) ) ?>\n\t\t\t\t\t\t</td>\n<?php\n\t} else {\n\t\t# Without LDAP\n?>\n\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t<label for=\"edit-realname\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'email_label' ) ?>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n<?php\n\t\t\t\t\t\t\tprint_email_input( 'email', $t_user['email'] );\n\t\t\t\t\t\t\tif( config_get_global( 'email_ensure_unique' )\n\t\t\t\t\t\t\t\t&& !user_is_email_unique( $t_user['email'], $t_user_id )\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\techo '<span class=\"padding-8\">';\n\t\t\t\t\t\t\t\tprint_icon('fa-exclamation-triangle',\n\t\t\t\t\t\t\t\t\t'ace-icon bigger-125 red  padding-right-4'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\techo lang_get( 'email_not_unique' );\n\t\t\t\t\t\t\t\techo '</span>';\n\t\t\t\t\t\t\t}\n?>\n\t\t\t\t\t\t</td>\n<?php\n\t}\n?>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<!-- Access Level -->\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t<label for=\"edit-access-level\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'access_level_label' ) ?>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<select id=\"edit-access-level\" name=\"access_level\" class=\"input-sm\">\n<?php\n\t$t_access_level = $t_user['access_level'];\n\tif( !MantisEnum::hasValue( config_get( 'access_levels_enum_string' ), $t_access_level ) ) {\n\t\t$t_access_level = config_get( 'default_new_account_access_level' );\n\t}\n\tprint_project_access_levels_option_list( (int)$t_access_level );\n?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<!-- Enabled Checkbox -->\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'enabled_label' ) ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input id=\"edit-enabled\" name=\"enabled\"\n\t\t\t\t\t\t\t\t\t   type=\"checkbox\" class=\"ace\"\n\t\t\t\t\t\t\t\t\t   <?php check_checked( (int)$t_user['enabled'], ON ); ?>\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<!-- Protected Checkbox -->\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t<?php echo lang_get( 'protected_label' ) ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input id=\"edit-protected\" name=\"protected\"\n\t\t\t\t\t\t\t\t\t   type=\"checkbox\" class=\"ace\"\n\t\t\t\t\t\t\t\t\t   <?php check_checked( (int)$t_user['protected'], ON ); ?>\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<?php event_signal( 'EVENT_MANAGE_USER_UPDATE_FORM', array( $t_user['id'] ) ); ?>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'update_user_button' ) ?>\n\t\t\t</button>\n<?php\n\tif( $t_email_notification_enabled ) {\n?>\n\t\t\t&nbsp;\n\t\t\t<label class=\"inline\">\n\t\t\t\t<input id=\"send-email\" name=\"send_email_notification\"\n\t\t\t\t\t   type=\"checkbox\" class=\"ace\" checked=\"checked\"\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\">\n\t\t\t\t\t<?php echo lang_get( 'notify_user' ) ?>\n\t\t\t\t</span>\n\t\t\t</label>\n<?php } ?>\n\t\t\t<div class=\"btn-group pull-right\">\n<?php\n\t# Information button\n\tprint_link_button( 'view_user_page.php?id=' . $t_user['id'],\n\t\tlang_get( 'view_account_title' ),\n\t\t\"btn btn-primary btn-white btn-round pull-left\"\n\t);\n\n\t# Impersonate Button\n\tif( $t_impersonate ) {\n\t\techo form_security_field( 'manage_user_impersonate' )\n?>\n\t\t\t\t<button formaction=\"manage_user_impersonate.php\"\n\t\t\t\t\t\tclass=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t\t<?php echo lang_get( 'impersonate_user_button' ) ?>\n\t\t\t\t</button>\n<?php\n\t}\n\n\t# Reset/Unlock Button\n\tif( $t_reset || $t_unlock ) {\n?>\n\t\t\t\t<button formaction=\"manage_user_reset.php\"\n\t\t\t\t\t\ttitle=\"<?php echo $t_reset_password_msg ?>\"\n\t\t\t\t\t\tclass=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t\t<?php echo lang_get( $t_reset ? 'reset_password_button' : 'account_unlock_button' ) ?>\n\t\t\t\t</button>\n<?php\n\t}\n\n\t# Delete Button\n\tif( $t_delete ) {\n?>\n\n\t\t\t\t<button formaction=\"manage_user_delete.php\"\n\t\t\t\t\t\tclass=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t\t<?php echo lang_get( 'delete_user_button' ) ?>\n\t\t\t\t</button>\n<?php } ?>\n\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</form>\n</div>\n\n<?php event_signal( 'EVENT_MANAGE_USER_PAGE', array( $t_user_id ) ); ?>\n\n<?php\n# Project access sections are only shown if the current user's permissions\n# allow and the user being edited is not an Administrator.\nif( access_has_global_level( config_get( 'manage_user_threshold' ) )\n\t&& !user_is_administrator( $t_user_id )\n) {\n\n\t$t_projects = user_get_assigned_projects( $t_user['id'] );\n\tif( !empty( $t_projects ) ) {\n?>\n<!-- ASSIGNED PROJECTS SECTION -->\n<div class=\"space-10\"></div>\n<div id=\"project-access-div\" class=\"form-container\">\n<form id=\"project-access-form\" method=\"post\" action=\"manage_user_proj_delete.php\">\n\n\t<?php echo form_security_field( 'manage_user_proj_delete' ) ?>\n\t<input name=\"user_id\" type=\"hidden\" value=\"<?php echo (int)$t_user['id'] ?>\" />\n\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-puzzle-piece', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'assigned_projects_label' ) ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main no-padding table-responsive\">\n\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'remove_link' ) ?></th>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'project_name' ) ?></th>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'access_level' ) ?></th>\n\t\t\t\t\t\t\t<th><?php echo lang_get( 'view_status' ) ?></th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n<?php\n\t\t$t_projects = user_get_assigned_projects( $t_user['id'] );\n\t\tforeach( $t_projects as $t_project_id => $t_project ) {\n\t\t\t$t_can_remove = access_has_project_level( config_get( 'project_user_threshold' ), $t_project_id );\n\t\t\t$t_project_name = string_attribute( $t_project['name'] );\n\t\t\t$t_access_level = get_enum_element( 'access_levels', $t_project['access_level'] );\n\t\t\t$t_view_state = get_enum_element( 'project_view_state', $t_project['view_state'] );\n?>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"center\">\n<?php\n\t\t\tif( $t_can_remove ) {\n?>\n\t\t\t\t\t\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t\t\t\t\t\t<input name=\"project_id[]\" type=\"checkbox\" class=\"ace\"\n\t\t\t\t\t\t\t\t\t   value=\"<?php echo $t_project_id ?>\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"lbl\"></span>\n<?php\n\t\t\t}\n?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td><?php echo $t_project_name ?></td>\n\t\t\t\t\t\t\t<td><?php echo $t_access_level ?></td>\n\t\t\t\t\t\t\t<td><?php echo $t_view_state ?></td>\n\t\t\t\t\t\t</tr>\n<?php\n\t\t} # foreach project\n?>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<label>\n\t\t\t\t<input id=\"project_id_all\" name=\"project_id_all\"\n\t\t\t\t\t   type=\"checkbox\" class=\"ace check_all\"\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl\">\n\t\t\t\t\t<?php echo lang_get( 'select_all' ) ?>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t&nbsp;\n\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'remove_link' ) ?>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</form>\n</div>\n<?php\n\t} # end if user has assigned projects\n?>\n\n<!-- ADD USER TO PROJECT SECTION -->\n<div class=\"space-10\"></div>\n<div id=\"manage-user-project-add-div\" class=\"form-container\">\n<form id=\"manage-user-project-add-form\" method=\"post\" action=\"manage_user_proj_add.php\">\n\t<?php echo form_security_field( 'manage_user_proj_add' ) ?>\n\t<input type=\"hidden\" name=\"user_id\" value=\"<?php echo $t_user['id'] ?>\" />\n\n\t<div class=\"widget-box widget-color-blue2\">\n\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-puzzle-piece', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'add_user_title' ) ?>\n\t\t\t</h4>\n\t\t</div>\n\n\t\t<div class=\"widget-body\">\n\t\t\t<div class=\"widget-main no-padding table-responsive\">\n\t\t\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"category width-30\">\n\t\t\t\t\t\t\t<label for=\"add-user-project-id\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'unassigned_projects_label' ) ?>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<select id=\"add-user-project-id\" name=\"project_id[]\"\n\t\t\t\t\t\t\t\t\tclass=\"input-sm\" multiple=\"multiple\" size=\"5\">\n\t\t\t\t\t\t\t\t<?php print_project_user_list_option_list2( $t_user['id'] ) ?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"category\">\n\t\t\t\t\t\t\t<label for=\"add-user-project-access\">\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'access_level_label' ) ?>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<select id=\"add-user-project-access\" name=\"access_level\"\n\t\t\t\t\t\t\t\t\tclass=\"input-sm\">\n\t\t\t\t\t\t\t\t<?php print_project_access_levels_option_list(\n\t\t\t\t\t\t\t\t\t\t(int)config_get( 'default_new_account_access_level' ) )\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<button class=\"btn btn-primary btn-white btn-round\">\n\t\t\t\t<?php echo lang_get( 'add_user_button' ) ?>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</form>\n</div>\n\n<?php\n} # End of PROJECT ACCESS conditional section\n?>\n\n<!-- ACCOUNT PREFERENCES -->\n<?php\ndefine( 'ACCOUNT_PREFS_INC_ALLOW', true );\ninclude( __DIR__ . '/account_prefs_inc.php' );\nedit_account_prefs(\n\t$t_user['id'],\n\tfalse,\n\tfalse,\n\t'manage_user_edit_page.php?user_id=' . $t_user_id\n);\n?>\n\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "manage_user_impersonate.php",
          "type": "blob",
          "size": 1.5634765625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * User Impersonation\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\n\nform_security_validate( 'manage_user_impersonate' );\n\nauth_reauthenticate();\n\n$f_user_id\t= gpc_get_int( 'user_id' );\n\nauth_impersonate( $f_user_id );\n\nform_security_purge( 'manage_user_impersonate' );\n\n$t_redirect_url = config_get_global( 'default_home_page' );\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_user_page.php",
          "type": "blob",
          "size": 13.91796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * User Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses icon_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'icon_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\nauth_reauthenticate();\n\naccess_ensure_global_level( config_get( 'manage_user_threshold' ) );\n\n$t_cookie_name = config_get( 'manage_users_cookie' );\n$t_lock_image = icon_get( 'fa-lock', 'fa-lg', lang_get( 'protected' ) );\n\n$f_save = gpc_get_bool( 'save' );\n$f_filter = gpc_get_string( 'filter', 'ALL' );\n$f_search = gpc_get_string( 'search', '');\n$f_page_number   = gpc_get_int( 'page_number', 1 );\n\nif( !$f_save && !is_blank( gpc_get_cookie( $t_cookie_name, '' ) ) ) {\n\t$t_manage_arr = explode( ':', gpc_get_cookie( $t_cookie_name ) );\n\n\t# Hide Inactive\n\t$f_hide_inactive = (bool)$t_manage_arr[0];\n\n\t# Sort field\n\t$f_sort = $t_manage_arr[1] ?? 'username';\n\n\t# Sort order\n\t$f_dir = $t_manage_arr[2] ?? 'DESC';\n\n\t# Show Disabled\n\t$f_show_disabled = $t_manage_arr[3] ?? false;\n} else {\n\t$f_sort          = gpc_get_string( 'sort', 'username' );\n\t$f_dir           = gpc_get_string( 'dir', 'ASC' );\n\t$f_hide_inactive = gpc_get_bool( 'hideinactive' );\n\t$f_show_disabled = gpc_get_bool( 'showdisabled' );\n}\n\n# Clean up the form variables\nif( !db_field_exists( $f_sort, db_get_table( 'user' ) ) ) {\n\t$c_sort = 'username';\n} else {\n\t$c_sort = addslashes( $f_sort );\n}\n\n$c_dir = ( $f_dir == 'ASC' ) ? 'ASC' : 'DESC';\n\n# OFF = show inactive users, anything else = hide them\n$c_hide_inactive = ( $f_hide_inactive == OFF ) ? OFF : ON;\n$t_hide_inactive_filter = '&amp;hideinactive=' . $c_hide_inactive;\n\n# OFF = hide disabled users, anything else = show them\n$c_show_disabled = ( $f_show_disabled == OFF ) ? OFF : ON;\n$t_show_disabled_filter = '&amp;showdisabled=' . $c_show_disabled;\n\n# set cookie values for hide inactive, sort by, dir and show disabled\nif( $f_save ) {\n\t$t_manage_string = $c_hide_inactive.':'.$c_sort.':'.$c_dir.':'.$c_show_disabled;\n\tgpc_set_cookie( $t_cookie_name, $t_manage_string, true );\n}\n\nlayout_page_header( lang_get( 'manage_users_link' ) );\n\nlayout_page_begin( 'manage_overview_page.php' );\n\nprint_manage_menu( 'manage_user_page.php' );\n\n# New Accounts Form BEGIN\n\n$t_days_old = 7 * SECONDS_PER_DAY;\n$t_query = 'SELECT COUNT(*) AS new_user_count FROM {user}\n\tWHERE ' . db_helper_compare_time( db_param(), '<=', 'date_created', $t_days_old );\n$t_result = db_query( $t_query, array( db_now() ) );\n$t_row = db_fetch_array( $t_result );\n$t_new_user_count = $t_row['new_user_count'];\n\n# Never Logged In Form BEGIN\n\n$t_query = 'SELECT COUNT(*) AS unused_user_count FROM {user}\n\tWHERE ( login_count = 0 ) AND ( date_created = last_visit )';\n$t_result = db_query( $t_query );\n$t_row = db_fetch_array( $t_result );\n$t_unused_user_count = $t_row['unused_user_count'];\n\n# Manage Form BEGIN\n\n$t_prefix_array = array();\n\n$t_prefix_array['ALL'] = lang_get( 'show_all_users' );\n\nfor( $i = 'A'; $i != 'AA'; $i++ ) {\n\t$t_prefix_array[$i] = $i;\n}\n\nfor( $i = 0; $i <= 9; $i++ ) {\n\t$t_prefix_array[(string)$i] = (string)$i;\n}\n$t_prefix_array['UNUSED'] = lang_get( 'users_unused' );\n$t_prefix_array['NEW'] = lang_get( 'users_new' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n<div class=\"center\">\n\t<div class=\"btn-toolbar inline\">\n\t\t<div class=\"btn-group\">\n\n<?php\nforeach ( $t_prefix_array as $t_prefix => $t_caption ) {\n\tif( $t_prefix === 'UNUSED' ) {\n\t\t$t_search = '';\n\t\t$t_title = ' title=\"[' . $t_unused_user_count . '] (' . lang_get( 'never_logged_in_title' ) . ')\"';\n\t} else if( $t_prefix === 'NEW' ) {\n\t\t$t_search = '';\n\t\t$t_title = ' title=\"[' . $t_new_user_count . '] (' . lang_get( '1_week_title' ) . ')\"';\n\t} else {\n\t\t$t_search = $f_search;\n\t\t$t_title = '';\n\t}\n\t$t_active = (string)$t_prefix === $f_filter ? 'active' : '';\n\t\tprint_manage_user_sort_link( 'manage_user_page.php',\n\t\t\t$t_caption,\n\t\t\t$c_sort,\n\t\t\t$c_dir, null, $c_hide_inactive, $t_prefix, $t_search, $c_show_disabled,\n\t\t\t'btn btn-xs btn-white btn-primary ' . $t_active );\n}\n?>\n\t\t</div>\n\t</div>\n</div>\n<div class=\"space-10\"></div>\n\n<?php\n$t_where_params = array();\nif( $f_filter === 'ALL' ) {\n\t$t_where = '(1 = 1)';\n} else if( $f_filter === 'UNUSED' ) {\n\t$t_where = '(login_count = 0) AND ( date_created = last_visit )';\n} else if( $f_filter === 'NEW' ) {\n\t$t_where = db_helper_compare_time( db_param(), '<=', 'date_created', $t_days_old );\n\t$t_where_params[] = db_now();\n} else {\n\t$t_where_params[] = $f_filter . '%';\n\t$t_where = db_helper_like( 'username' );\n}\n\nif( $f_search !== '' ) {\n\t# break up search terms by spacing or quoting\n\tpreg_match_all( \"/-?([^'\\\"\\s]+|\\\"[^\\\"]+\\\"|'[^']+')/\", $f_search, $t_matches, PREG_SET_ORDER );\n\n\t# organize terms without quoting, paying attention to negation\n\t$t_search_terms = array();\n\tforeach( $t_matches as $t_match ) {\n\t\t$t_search_terms[trim( $t_match[1], \"\\'\\\"\" )] = ( $t_match[0][0] == '-' );\n\t}\n\n\t# build a big where-clause and param list for all search terms, including negations\n\t$t_first = true;\n\tforeach( $t_search_terms as $t_search_term => $t_negate ) {\n\t\tif( $t_first ) {\n\t\t\t$t_where .= ' AND ( ';\n\t\t\t$t_first = false;\n\t\t} else {\n\t\t\t$t_where .= ' AND ';\n\t\t}\n\n\t\tif( $t_negate ) {\n\t\t\t$t_where .= 'NOT ';\n\t\t}\n\n\t\t$c_search = '%' . $t_search_term . '%';\n\t\t$t_where .= '( ' . db_helper_like( 'realname' ) .\n\t\t\t' OR ' . db_helper_like( 'username' ) .\n\t\t\t' OR ' . db_helper_like( 'email' );\n\n\t\t$t_where_params[] = $c_search;\n\t\t$t_where_params[] = $c_search;\n\t\t$t_where_params[] = $c_search;\n\n\t\t$t_where .= ' )';\n\t}\n\tif( !$t_first ) {\n\t\t$t_where .= ' )';\n\t}\n}\n\n$p_per_page = 50;\n\n$t_offset = ( ( $f_page_number - 1 ) * $p_per_page );\n\n$t_total_user_count = 0;\n\n# Get the user data in $c_sort order\n$t_result = '';\n\nif( ON != $c_show_disabled ) {\n\t$t_where .= ' AND enabled = ' . db_param();\n\t$t_where_params[] = true;\n}\n\nif( OFF != $c_hide_inactive ) {\n\t$t_where .= ' AND ' . db_helper_compare_time( db_param(), '<', 'last_visit', $t_days_old );\n\t$t_where_params[] = db_now();\n}\n\n$t_query = 'SELECT count(*) as user_count FROM {user} WHERE ' . $t_where;\n$t_result = db_query( $t_query, $t_where_params );\n$t_row = db_fetch_array( $t_result );\n$t_total_user_count = $t_row['user_count'];\n\n$t_page_count = ceil( $t_total_user_count / $p_per_page );\nif( $t_page_count < 1 ) {\n\t$t_page_count = 1;\n}\n\n# Make sure $p_page_number isn't past the last page.\nif( $f_page_number > $t_page_count ) {\n\t$f_page_number = $t_page_count;\n}\n\n# Make sure $p_page_number isn't before the first page\nif( $f_page_number < 1 ) {\n\t$f_page_number = 1;\n}\n\n\n$t_query = 'SELECT * FROM {user} WHERE ' . $t_where . ' ORDER BY ' . $c_sort . ' ' . $c_dir;\n$t_result = db_query( $t_query, $t_where_params, $p_per_page, $t_offset );\n\n$t_users = array();\nwhile( $t_row = db_fetch_array( $t_result ) ) {\n\t$t_users[] = $t_row;\n}\n\n$t_user_count = count( $t_users );\n?>\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n<h4 class=\"widget-title lighter\">\n\t<?php print_icon( 'fa-users', 'ace-icon' ); ?>\n\t<?php echo lang_get('manage_accounts_title') ?>\n\t<span class=\"badge\"><?php echo $t_total_user_count ?></span>\n</h4>\n</div>\n\n<div class=\"widget-body\">\n<div class=\"widget-toolbox padding-8 clearfix\">\n\t<div id=\"manage-user-div\" class=\"form-container\">\n\t\t<div class=\"pull-left\">\n\t\t\t<?php print_link_button( 'manage_user_create_page.php',\n\t\t\t\tlang_get( 'create_new_account_link' ),\n\t\t\t\t'btn-sm' )\n\t\t\t?>\n\t\t</div>\n\t\t<?php if( $f_filter === 'UNUSED' ) { ?>\n\t\t<div class=\"pull-left\">\n\t\t\t<?php print_form_button('manage_user_prune.php',\n\t\t\t\tlang_get('prune_accounts'),\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\t'btn btn-primary btn-sm btn-white btn-round')\n\t\t\t?>\n\t\t</div>\n\t\t<?php } ?>\n\t<div class=\"pull-right\">\n\t<form id=\"manage-user-filter\" method=\"post\" action=\"manage_user_page.php\" class=\"form-inline\">\n\t\t<fieldset>\n\t\t\t<?php # CSRF protection not required here - form does not result in modifications ?>\n\t\t\t<input type=\"hidden\" name=\"sort\" value=\"<?php echo $c_sort ?>\" />\n\t\t\t<input type=\"hidden\" name=\"dir\" value=\"<?php echo $c_dir ?>\" />\n\t\t\t<input type=\"hidden\" name=\"save\" value=\"1\" />\n\t\t\t<input type=\"hidden\" name=\"filter\" value=\"<?php echo string_attribute( $f_filter ); ?>\" />\n\t\t\t<input type=\"hidden\" name=\"search\" value=\"<?php echo string_attribute( $f_search ); ?>\" />\n\t\t\t<label class=\"inline\">\n\t\t\t\t<input type=\"checkbox\" class=\"ace\" name=\"hideinactive\" value=\"<?php echo ON ?>\"\n\t\t\t\t\t<?php check_checked( $c_hide_inactive, ON ); ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'hide_inactive' ) ?></span>\n\t\t\t</label>\n\t\t\t<label class=\"inline\">\n\t\t\t\t<input type=\"checkbox\" class=\"ace\" name=\"showdisabled\" value=\"<?php echo ON ?>\"\n\t\t\t\t\t<?php check_checked( $c_show_disabled, ON ); ?>\n\t\t\t\t/>\n\t\t\t\t<span class=\"lbl padding-6\"><?php echo lang_get( 'show_disabled' ) ?></span>\n\t\t\t</label>\n\t\t\t<label for=\"search\">\n\t\t\t\t<input id=\"search\" type=\"text\" size=\"45\" name=\"search\" class=\"input-sm\"\n\t\t\t\t\t   value=\"<?php echo string_attribute ( $f_search );?>\"\n\t\t\t\t\t   placeholder=\"<?php echo lang_get( 'search_user_hint' ) ?>\"\n\t\t\t\t/>\n\t\t\t\t</label>\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round\"\n\t\t\t\t   value=\"<?php echo lang_get( 'filter_button' ) ?>\"\n\t\t\t/>\n\t\t</fieldset>\n\t</form>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=\"widget-main no-padding\">\n\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-striped table-bordered table-condensed table-hover\">\n\t\t<thead>\n\t\t\t<tr>\n<?php\n\t# Print column headers with sort links\n\t$t_columns = array(\n\t\t'username', 'realname', 'email', 'access_level',\n\t\t'enabled', 'protected', 'date_created', 'last_visit'\n\t);\n\t$t_display_failed_login_count = OFF != config_get( 'max_failed_login_count' );\n\tif( $t_display_failed_login_count ) {\n\t\t$t_columns[] = 'failed_login_count';\n\t}\n\tforeach( $t_columns as $t_col ) {\n\t\techo \"\\t<th>\";\n\t\tprint_manage_user_sort_link( 'manage_user_page.php',\n\t\t\tlang_get( $t_col ),\n\t\t\t$t_col,\n\t\t\t$c_dir, $c_sort, $c_hide_inactive, $f_filter, $f_search, $c_show_disabled );\n\t\tprint_sort_icon( $c_dir, $c_sort, $t_col );\n\t\techo \"</th>\\n\";\n\t}\n?>\n\t\t\t</tr>\n\t\t</thead>\n\n\t\t<tbody>\n<?php\n\t$t_date_format = config_get( 'normal_date_format' );\n\t$t_duplicate_emails =  config_get_global( 'email_ensure_unique' )\n\t\t? user_get_duplicate_emails()\n\t\t: [];\n\t$t_access_level = array();\n\tforeach( $t_users as $t_user ) {\n\t\t/**\n\t\t * @var int $v_id\n\t\t * @var string $v_username\n\t\t * @var string $v_realname\n\t\t * @var string $v_email\n\t\t * @var int $v_date_created\n\t\t * @var int $v_last_visit\n\t\t * @var int $v_access_level\n\t\t * @var bool $v_enabled\n\t\t * @var bool $v_protected\n\t\t */\n\t\textract( $t_user, EXTR_PREFIX_ALL, 'v' );\n\n\t\t$v_date_created  = date( $t_date_format, $v_date_created );\n\t\t$v_last_visit    = date( $t_date_format, $v_last_visit );\n\n\t\tif( !isset( $t_access_level[$v_access_level] ) ) {\n\t\t\t$t_access_level[$v_access_level] = get_enum_element( 'access_levels', $v_access_level );\n\t\t} ?>\n\t\t\t<tr>\n\t\t\t\t<td>\n<?php\n\t\tif( access_has_global_level( $v_access_level ) ) {\n\t\t\t/** @noinspection HtmlUnknownTarget */\n\t\t\tprintf( '<a href=\"%s\">%s</a>',\n\t\t\t\t'manage_user_edit_page.php?user_id=' . $v_id,\n\t\t\t\tstring_display_line( $v_username )\n\t\t\t);\n\t\t} else {\n\t\t\techo string_display_line( $v_username );\n\t\t}\n?>\n\t\t\t\t</td>\n\t\t\t\t<td><?php echo string_display_line( $v_realname ) ?></td>\n\t\t\t\t<td><?php\n\t\t\t\t\t# Display warning icon if emails should be unique and a duplicate exists\n\t\t\t\t\tif( array_key_exists( strtolower( $v_email ), $t_duplicate_emails ) ) {\n\t\t\t\t\t\tprint_icon( 'fa-exclamation-triangle',\n\t\t\t\t\t\t\t'ace-icon bigger-125 red padding-right-4',\n\t\t\t\t\t\t\tlang_get( 'email_not_unique' )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tprint_email_link( $v_email, $v_email )\n\t\t\t\t?></td>\n\t\t\t\t<td><?php echo $t_access_level[$v_access_level] ?></td>\n\t\t\t\t<td class=\"center\"><?php echo trans_bool( $v_enabled ) ?></td>\n\t\t\t\t<td class=\"center\"><?php\n\t\t\t\t\tif( $v_protected ) {\n\t\t\t\t\t\techo ' ' . $t_lock_image;\n\t\t\t\t\t} else {\n\t\t\t\t\t\techo '&#160;';\n\t\t\t\t\t} ?>\n\t\t\t\t</td>\n\t\t\t\t<td><?php echo $v_date_created ?></td>\n\t\t\t\t<td><?php echo $v_last_visit ?></td><?php if( $t_display_failed_login_count ) { ?>\n\t\t\t\t<td><?php echo $v_failed_login_count ?></td><?php } ?>\n\t\t\t</tr>\n<?php\n\t}  # end for\n?>\n\t\t</tbody>\n\t</table>\n</div>\n</div>\n\n<?php\n\t# Do not display the section's footer if we have only one page of users,\n\t# otherwise it will be empty as the navigation controls won't be shown.\n\tif( $t_total_user_count > $p_per_page ) {\n?>\n<div class=\"widget-toolbox padding-8 clearfix\">\n\t<div class=\"btn-toolbar pull-right\">\n<?php\n\t\t# @todo hack - pass in the hide inactive filter via cheating the actual filter value\n\t\tprint_page_links( 'manage_user_page.php',\n\t\t\t1, $t_page_count, (int)$f_page_number,\n\t\t\t$f_filter\n\t\t\t. \"&amp;search=$f_search\" . $t_hide_inactive_filter . $t_show_disabled_filter\n\t\t\t. \"&amp;sort=$c_sort&amp;dir=$c_dir\"\n\t\t);\n?>\n\t</div>\n</div>\n<?php } ?>\n\n</div>\n</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "manage_user_proj_add.php",
          "type": "blob",
          "size": 2.0166015625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * A user to Project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses project_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\n\nform_security_validate( 'manage_user_proj_add' );\n\nauth_reauthenticate();\n\n$f_user_id\t\t= gpc_get_int( 'user_id' );\n$f_access_level\t= gpc_get_int( 'access_level' );\n$f_project_id\t= gpc_get_int_array( 'project_id', array() );\n$t_manage_user_threshold = config_get( 'manage_user_threshold' );\n\nuser_ensure_exists( $f_user_id );\n\nforeach ( $f_project_id as $t_proj_id ) {\n\tif( access_has_project_level( $t_manage_user_threshold, $t_proj_id ) &&\n\t\taccess_has_project_level( $f_access_level, $t_proj_id ) ) {\n\t\tproject_add_user( $t_proj_id, $f_user_id, $f_access_level );\n\t}\n}\n\nform_security_purge( 'manage_user_proj_add' );\n\nprint_header_redirect( 'manage_user_edit_page.php?user_id=' . $f_user_id );\n"
        },
        {
          "name": "manage_user_proj_delete.php",
          "type": "blob",
          "size": 2.5888671875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Delete a user from a project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\n\nform_security_validate( 'manage_user_proj_delete' );\n\nauth_reauthenticate();\n\n$f_projects = gpc_get_int_array( 'project_id' );\n$f_user_id = gpc_get_int( 'user_id' );\n\nuser_ensure_exists( $f_user_id );\n\n$t_user = user_get_row( $f_user_id );\n\n# Make sure user is allowed to perform operation on all selected projects\n$t_project_names = array();\nforeach( $f_projects as $t_project_id ) {\n\taccess_ensure_project_level( config_get( 'project_user_threshold' ), $t_project_id );\n\taccess_ensure_project_level( $t_user['access_level'], $t_project_id );\n\n\t$t_project_names[] = project_get_name( $t_project_id );\n}\n\n# Confirm with the user\nhelper_ensure_confirmed(\n\tsprintf( lang_get( 'remove_user_sure_msg' ),\n\t\tstring_attribute( user_get_name( $f_user_id ) ),\n\t\tstring_attribute( implode( '\", \"', $t_project_names ) )\n\t),\n\tlang_get( 'remove_user_button' )\n);\n\nforeach( $f_projects as $t_project_id ) {\n\tproject_remove_user( $t_project_id, $f_user_id );\n}\nform_security_purge( 'manage_user_proj_delete' );\n\n$t_redirect_url = 'manage_user_edit_page.php?user_id=' . $f_user_id;\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "manage_user_prune.php",
          "type": "blob",
          "size": 2.607421875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Prune old/unused users from database\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\n\nform_security_validate( 'manage_user_prune' );\n\nauth_reauthenticate();\n\naccess_ensure_global_level( config_get( 'manage_user_threshold' ) );\n\n\n# Delete the users who have never logged in and are older than 1 week\n$t_days_old = (int)7 * SECONDS_PER_DAY;\n\n$t_query = 'SELECT id, access_level FROM {user}\n\t\tWHERE ( login_count = 0 ) AND ( date_created = last_visit ) AND ' .\n\t\t'( protected = 0 ) AND ' . db_helper_compare_time( db_param(), '>', 'date_created', $t_days_old );\n$t_result = db_query( $t_query, array( db_now() ) );\n\nif( !$t_result ) {\n\ttrigger_error( ERROR_GENERIC, ERROR );\n}\n\n$t_count = db_num_rows( $t_result );\n\nif( $t_count > 0 ) {\n\thelper_ensure_confirmed( lang_get( 'confirm_account_pruning' ),\n\t\t\t\t\t\t\t lang_get( 'prune_accounts_button' ) );\n}\n\nfor( $i=0; $i < $t_count; $i++ ) {\n\t$t_row = db_fetch_array( $t_result );\n\t# Don't prune accounts with a higher global access level than the current user\n\tif( access_has_global_level( $t_row['access_level'] ) ) {\n\t\tuser_delete( $t_row['id'] );\n\t}\n}\n\nform_security_purge( 'manage_user_prune' );\n\nprint_header_redirect( 'manage_user_page.php' );\n"
        },
        {
          "name": "manage_user_reset.php",
          "type": "blob",
          "size": 2.5498046875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Reset a Users Password\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\n\nform_security_validate( 'manage_user_update' );\n\nauth_reauthenticate();\n\n$f_user_id = gpc_get_int( 'user_id' );\n\n$t_data = array(\n\t'query' => array( 'id' => $f_user_id )\n);\n\n$t_command = new UserResetPasswordCommand( $t_data );\n# The case of trying to reset a protected account now causes the Command to\n# trigger an exception, so we do not need any special handling here.\n$t_result = $t_command->execute();\n\n$t_redirect_url = 'manage_user_page.php';\n\nform_security_purge( 'manage_user_reset' );\n\nlayout_page_header( null, $t_redirect_url );\nlayout_page_begin( 'manage_overview_page.php' );\n\nswitch( $t_result['action'] ) {\n\tcase UserResetPasswordCommand::RESULT_RESET:\n\t\tif(    ( ON == config_get( 'send_reset_password' ) )\n\t\t\t&& ( ON == config_get( 'enable_email_notification' ) )\n\t\t) {\n\t\t\t# Password reset confirmation sent by email\n\t\t\thtml_operation_successful( $t_redirect_url, lang_get( 'account_reset_msg' ) );\n\t\t} else {\n\t\t\t# Email notification disabled, password set to blank\n\t\t\thtml_operation_successful( $t_redirect_url, lang_get( 'account_reset_msg2' ) );\n\t\t}\n\t\tbreak;\n\tcase UserResetPasswordCommand::RESULT_UNLOCK:\n\t\thtml_operation_successful( $t_redirect_url, lang_get( 'account_unlock_msg' ) );\n\t\tbreak;\n}\n\nlayout_page_end();\n"
        },
        {
          "name": "manage_user_update.php",
          "type": "blob",
          "size": 2.248046875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update User\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\n\nform_security_validate( 'manage_user_update' );\n\nauth_reauthenticate();\n\n$f_protected\t= gpc_get_bool( 'protected' );\n$f_enabled\t\t= gpc_get_bool( 'enabled' );\n$f_email\t\t= gpc_get_string( 'email', '' );\n$f_username\t\t= gpc_get_string( 'username', '' );\n$f_realname\t\t= gpc_get_string( 'realname', '' );\n$f_access_level\t= gpc_get_int( 'access_level' );\n$f_user_id\t\t= gpc_get_int( 'user_id' );\n$f_send_email_notification = gpc_get_bool( 'send_email_notification' );\n\n$t_data = array(\n\t'query' => array(\n\t\t'user_id' => $f_user_id\n\t),\n\t'payload' => array(\n\t\t'user' => array(\n\t\t\t'username' => $f_username,\n\t\t\t'real_name' => $f_realname,\n\t\t\t'email' => $f_email,\n\t\t\t'access_level' => array( 'id' => $f_access_level ),\n\t\t\t'enabled' => $f_enabled,\n\t\t\t'protected' => $f_protected\n\t\t),\n\t\t'notify_user' => $f_send_email_notification\n\t)\n);\n\n$t_command = new UserUpdateCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'manage_user_update' );\n\n$t_redirect_url = 'manage_user_edit_page.php?user_id=' . (int)$f_user_id;\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "mantis_offline.php.sample",
          "type": "blob",
          "size": 1.353515625,
          "content": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\"\n    \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">\n\n<html>\n  <head>\n    <title>MantisBT</title>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n    <meta http-equiv=\"Refresh\" content=\"600\" />\n\n    <style type=\"text/css\"> <!--\n      body {\n        background-color: white;\n      }\n\n      h1 {\n        font-family: Verdana, Arial, Helvetica, sans-serif;\n        font-weight: bold;\n        font-size: 20px;\n        text-align: center;\n        margin: 0;\n        padding: 5px;\n        color: black;\n        background-color: #c8c8e8;\n      }\n\n      p {\n        font-family: Verdana, Arial, Helvetica, sans-serif;\n        text-align: left;\n        margin: 10px;\n        padding: 0;\n      }\n\n      #box {\n        padding: 0;\n        margin-top: 20%;\n        margin-left: 25%;\n        margin-right: 25%;\n        border: 1px solid #777;\n        background-color: #eee;\n      }\n\n    --> </style>\n  </head>\n\n  <body>\n\n    <div id=\"box\">\n\n      <h1>MantisBT</h1>\n\n      <p>\n        The MantisBT bug tracker is currently offline for maintenance.\n        Please check back later to see if MantisBT is online again\n        or contact your administrator for details.\n      </p>\n\n      <p>\n        Use your browser's refresh or reload function to try again\n        in a few minutes.\n      </p>\n\n    </div>\n\n  </body>\n</html>\n"
        },
        {
          "name": "my_view_inc.php",
          "type": "blob",
          "size": 14.111328125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * My View include file\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n * @package MantisBT\n *\n * @uses access_api.php\n * @uses bug_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses file_api.php\n * @uses filter_api.php\n * @uses filter_constants_inc.php\n * @uses helper_api.php\n * @uses icon_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n */\n\nif( !defined( 'MY_VIEW_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'access_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'filter_constants_inc.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'icon_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\n\n$t_filter = current_user_get_bug_filter();\nif( $t_filter === false ) {\n\t$t_filter = filter_get_default();\n}\n$t_sort = $t_filter['sort'];\n$t_dir = $t_filter['dir'];\n\n$t_bug_resolved_status_threshold = config_get( 'bug_resolved_status_threshold' );\n$t_hide_status_default = config_get( 'hide_status_default' );\n$t_default_show_changed = config_get( 'default_show_changed' );\n\n$c_filter['assigned'] = filter_create_assigned_to_unresolved( helper_get_current_project(), $t_current_user_id );\n$t_url_link_parameters['assigned'] = FILTER_PROPERTY_HANDLER_ID . '=' . $t_current_user_id . '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . $t_bug_resolved_status_threshold;\n\n# @TODO cproensa: make this value configurable\n$t_recent_days = 30;\n$c_filter['recent_mod'] = filter_create_recently_modified( $t_recent_days );\n$t_url_link_parameters['recent_mod'] = FILTER_PROPERTY_HIDE_STATUS . '=none'\n\t\t. '&' . FILTER_PROPERTY_FILTER_BY_LAST_UPDATED_DATE . '=' . $c_filter['recent_mod'][FILTER_PROPERTY_FILTER_BY_LAST_UPDATED_DATE]\n\t\t. '&' . FILTER_PROPERTY_LAST_UPDATED_END_DAY . '=' . $c_filter['recent_mod'][FILTER_PROPERTY_LAST_UPDATED_END_DAY]\n\t\t. '&' . FILTER_PROPERTY_LAST_UPDATED_END_MONTH . '=' . $c_filter['recent_mod'][FILTER_PROPERTY_LAST_UPDATED_END_MONTH]\n\t\t. '&' . FILTER_PROPERTY_LAST_UPDATED_END_YEAR . '=' . $c_filter['recent_mod'][FILTER_PROPERTY_LAST_UPDATED_END_YEAR]\n\t\t. '&' . FILTER_PROPERTY_LAST_UPDATED_START_DAY . '=' . $c_filter['recent_mod'][FILTER_PROPERTY_LAST_UPDATED_START_DAY]\n\t\t. '&' . FILTER_PROPERTY_LAST_UPDATED_START_MONTH . '=' . $c_filter['recent_mod'][FILTER_PROPERTY_LAST_UPDATED_START_MONTH]\n\t\t. '&' . FILTER_PROPERTY_LAST_UPDATED_START_YEAR . '=' . $c_filter['recent_mod'][FILTER_PROPERTY_LAST_UPDATED_START_YEAR];\n\n$c_filter['reported'] = filter_create_reported_by( helper_get_current_project(), $t_current_user_id );\n$t_url_link_parameters['reported'] = FILTER_PROPERTY_REPORTER_ID . '=' . $t_current_user_id . '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . $t_hide_status_default;\n\n$c_filter['resolved'] = array(\n\tFILTER_PROPERTY_CATEGORY_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_SEVERITY => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_STATUS => array(\n\t\t'0' => $t_bug_resolved_status_threshold,\n\t),\n\tFILTER_PROPERTY_HIGHLIGHT_CHANGED => $t_default_show_changed,\n\tFILTER_PROPERTY_REPORTER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_HANDLER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_RESOLUTION => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_BUILD => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_VERSION => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_HIDE_STATUS => array(\n\t\t'0' => $t_hide_status_default,\n\t),\n\tFILTER_PROPERTY_MONITOR_USER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n);\n$t_url_link_parameters['resolved'] = FILTER_PROPERTY_STATUS . '=' . $t_bug_resolved_status_threshold . '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . $t_hide_status_default;\n\n\n$c_filter['unassigned'] = filter_create_assigned_to_unresolved( helper_get_current_project(), 0 );\n$t_url_link_parameters['unassigned'] = FILTER_PROPERTY_HANDLER_ID . '=[none]' . '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . $t_hide_status_default;\n\n# TODO: check. handler value looks wrong\n\n$c_filter['monitored'] = filter_create_monitored_by( helper_get_current_project(), $t_current_user_id );\n$t_url_link_parameters['monitored'] = FILTER_PROPERTY_MONITOR_USER_ID . '=' . $t_current_user_id . '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . $t_hide_status_default;\n\n$c_filter['feedback'] = array(\n\tFILTER_PROPERTY_CATEGORY_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_SEVERITY => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_STATUS => array(\n\t\t'0' => config_get( 'bug_feedback_status' ),\n\t),\n\tFILTER_PROPERTY_HIGHLIGHT_CHANGED => $t_default_show_changed,\n\tFILTER_PROPERTY_REPORTER_ID => array(\n\t\t'0' => $t_current_user_id,\n\t),\n\tFILTER_PROPERTY_HANDLER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_RESOLUTION => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_BUILD => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_VERSION => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_HIDE_STATUS => array(\n\t\t'0' => $t_hide_status_default,\n\t),\n\tFILTER_PROPERTY_MONITOR_USER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n);\n$t_url_link_parameters['feedback'] = FILTER_PROPERTY_REPORTER_ID . '=' . $t_current_user_id . '&' . FILTER_PROPERTY_STATUS . '=' . config_get( 'bug_feedback_status' ) . '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . $t_hide_status_default;\n\n$c_filter['verify'] = array(\n\tFILTER_PROPERTY_CATEGORY_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_SEVERITY => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_STATUS => array(\n\t\t'0' => $t_bug_resolved_status_threshold,\n\t),\n\tFILTER_PROPERTY_HIGHLIGHT_CHANGED => $t_default_show_changed,\n\tFILTER_PROPERTY_REPORTER_ID => array(\n\t\t'0' => $t_current_user_id,\n\t),\n\tFILTER_PROPERTY_HANDLER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_RESOLUTION => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_BUILD => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_VERSION => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_HIDE_STATUS => array(\n\t\t'0' => $t_hide_status_default,\n\t),\n\tFILTER_PROPERTY_MONITOR_USER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n);\n$t_url_link_parameters['verify'] = FILTER_PROPERTY_REPORTER_ID . '=' . $t_current_user_id . '&' . FILTER_PROPERTY_STATUS . '=' . $t_bug_resolved_status_threshold;\n\n$c_filter['my_comments'] = array(\n\tFILTER_PROPERTY_CATEGORY_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_SEVERITY => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_STATUS => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_HIGHLIGHT_CHANGED => $t_default_show_changed,\n\tFILTER_PROPERTY_REPORTER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_HANDLER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_RESOLUTION => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_BUILD => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_VERSION => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_HIDE_STATUS => array(\n\t\t'0' => $t_hide_status_default,\n\t),\n\tFILTER_PROPERTY_MONITOR_USER_ID => array(\n\t\t'0' => META_FILTER_ANY,\n\t),\n\tFILTER_PROPERTY_NOTE_USER_ID=> array(\n\t\t'0' => META_FILTER_MYSELF,\n\t),\n);\n\n$t_url_link_parameters['my_comments'] = FILTER_PROPERTY_NOTE_USER_ID. '=' . META_FILTER_MYSELF . '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . $t_hide_status_default;\n$t_rows = filter_get_bug_rows( $f_page_number, $t_per_page, $t_page_count, $t_bug_count, $c_filter[$t_box_title] );\n\n# Improve performance by caching category data in one pass\nif( helper_get_current_project() == 0 ) {\n\t$t_categories = array();\n\tforeach( $t_rows as $t_row ) {\n\t\t$t_categories[] = $t_row->category_id;\n\t}\n\n\tcategory_cache_array_rows( array_unique( $t_categories ) );\n}\n\nbug_cache_columns_data( $t_rows , array( 'attachment_count' ) );\n\n$t_filter = array_merge( $c_filter[$t_box_title], $t_filter );\n\n$t_box_title_label = lang_get( 'my_view_title_' . $t_box_title );\nif( $t_box_title == 'recent_mod' ) {\n\t$t_box_title_label .= ' (' . $t_recent_days . ' ' . lang_get( 'days' ) . ')';\n}\n\n$t_collapse_block = is_collapsed( $t_box_title );\n$t_block_css = $t_collapse_block ? 'collapsed' : '';\n$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n\n$t_bug_string = $t_bug_count == 1 ? 'bug' : 'bugs';\n\n# -- ====================== BUG LIST ========================= --\n?>\n<div id=\"<?php echo $t_box_title ?>\" class=\"widget-box widget-color-blue2 <?php echo $t_block_css ?>\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-list-alt', 'ace-icon' ); ?>\n<?php\n#-- Box title\n$t_box_url = html_entity_decode( config_get( 'bug_count_hyperlink_prefix' ) ).'&' . $t_url_link_parameters[$t_box_title];\nprint_link( $t_box_url, $t_box_title_label, false, 'white' );\n\n# -- Viewing range info\nif( count( $t_rows ) > 0 ) {\n\t$v_start = $t_filter[FILTER_PROPERTY_ISSUES_PER_PAGE] * ( $f_page_number - 1 ) + 1;\n\t$v_end = $v_start + count( $t_rows ) - 1;\n} else {\n\t$v_start = 0;\n\t$v_end = 0;\n}\necho '<span class=\"badge\"> ' . \" $v_start - $v_end / $t_bug_count \" . ' </span>';\n?>\n\t\t</h4>\n\t\t<div class=\"widget-toolbar\">\n\t\t\t<a data-action=\"collapse\" href=\"#\">\n\t\t\t\t<?php print_icon( $t_block_icon, '1 ace-icon bigger-125' ); ?>\n\t\t\t</a>\n\t\t</div>\n\t\t<div class=\"widget-toolbar no-border hidden-xs\">\n\t\t\t<div class=\"widget-menu\">\n\t\t\t\t<?php print_extra_small_button( $t_box_url, lang_get( 'view_bugs_link' ) ); ?>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div class=\"table-responsive\">\n\t\t\t\t<table class=\"table table-bordered table-condensed table-striped table-hover\">\n<tbody>\n<?php\n# -- Loop over bug rows and create $v_* variables --\n$t_count = count( $t_rows );\nif( $t_count == 0 ) {\n\techo '<tr><td>&#160;</td></tr>';\n}\nfor( $i = 0;$i < $t_count; $i++ ) {\n\t$t_bug = $t_rows[$i];\n\n\t$t_summary = string_display_line_links( $t_bug->summary );\n\t$t_last_updated = date( config_get( 'normal_date_format' ), $t_bug->last_updated );\n\n\t# Check for attachments\n\t$t_attachment_count = 0;\n\t# TODO: factor in the allow_view_own_attachments configuration option\n\t# instead of just using a global check.\n\tif( ( file_can_view_bug_attachments( $t_bug->id, null ) ) ) {\n\t\t$t_attachment_count = file_bug_attachment_count( $t_bug->id );\n\t}\n\n\t# grab the project name\n\t$project_name = project_get_field( $t_bug->project_id, 'name' );\n\n\tif( VS_PRIVATE == $t_bug->view_state ) {\n\t    $t_bug_class = 'my-buglist-private';\n\t} else {\n\t\t$t_bug_class = '';\n\t}\n\t?>\n\n<tr class=\"my-buglist-bug <?php echo $t_bug_class?>\">\n\t<?php\n\t# -- Bug ID and details link + Pencil shortcut --?>\n\t<td class=\"nowrap width-13 my-buglist-id\">\n\t\t<?php\n\t\t\tprint_bug_link( $t_bug->id, false );\n\n\t\t\techo '<br />';\n\n\t\t\t# choose color based on status\n\t\t\t$t_status_css = html_get_status_css_fg( $t_bug->status, auth_get_current_user_id(), $t_bug->project_id );\n\t\t\t$t_status = string_attribute( get_enum_element( 'status', bug_get_field( $t_bug->id, 'status' ), $t_bug->project_id ) );\n\t\t\tprint_icon( 'fa-square', 'fa-status-box ' . $t_status_css, $t_status );\n\t\t\techo ' ';\n\n\t\t\t$t_can_update = !bug_is_readonly( $t_bug->id ) &&\n\t\t\t\taccess_has_bug_level( config_get( 'update_bug_threshold', null, $t_current_user_id, $t_bug->project_id  ), $t_bug->id );\n\t\t\tif( $t_can_update ) {\n\t\t\t\techo '<a class=\"edit\" href=\"' . string_get_bug_update_url( $t_bug->id ) . '\">';\n\t\t\t\tprint_icon( 'fa-pencil', 'bigger-130 padding-2 grey', lang_get( 'edit' ) );\n\t\t\t\techo '</a>';\n\t\t\t}\n\n\t\t\tif( ON == config_get( 'show_priority_text' ) ) {\n\t\t\t\tprint_formatted_priority_string( $t_bug );\n\t\t\t} else {\n\t\t\t\tprint_status_icon( $t_bug->priority );\n\t\t\t}\n\n\t\t\tif( $t_attachment_count > 0 ) {\n\t\t\t\t$t_href = string_get_bug_view_url( $t_bug->id ) . '#attachments';\n\t\t\t\t$t_href_title = sprintf( lang_get( 'view_attachments_for_issue' ), $t_attachment_count, $t_bug->id );\n\t\t\t\t$t_alt_text = $t_attachment_count . lang_get( 'word_separator' ) . lang_get( 'attachments' );\n\t\t\t\techo '<a class=\"attachments\" href=\"' . $t_href . '\" title=\"' . $t_href_title . '\"> ';\n\t\t\t\tprint_icon( 'fa-paperclip', 'fa-lg grey', $t_alt_text );\n\t\t\t\techo '</a>';\n\t\t\t}\n\n\t\t\tif( VS_PRIVATE == $t_bug->view_state ) {\n\t\t\t\techo ' ';\n\t\t\t\tprint_icon( 'fa-lock', 'fa-lg light-grey', lang_get( 'private' ) );\n\t\t\t}\n\t\t\t?>\n\t</td>\n\n\t<?php\n\t# -- Summary --?>\n\t<td>\n\t\t<?php\n\t\t\tif( ON == config_get( 'show_bug_project_links' ) && helper_get_current_project() != $t_bug->project_id ) {\n\t\t\t\techo '<span>[', string_display_line( project_get_name( $t_bug->project_id ) ), '] </span>';\n\t\t\t}\n\t\t\t$t_bug_url = string_get_bug_view_url( $t_bug->id );\n\t\t\techo '<span><a href=\"' . $t_bug_url . '\">' . $t_summary . '</a></span><br />';\n\t?>\n\t\t<?php\n\t# type project name if viewing 'all projects' or bug is in subproject\n\techo '<span class=\"small\">', string_display_line( category_full_name( $t_bug->category_id, true, $t_bug->project_id ) ), '</span>';\n\n\techo '<span class=\"small\"> - ';\n\tif( $t_bug->last_updated > strtotime( '-' . $t_filter[FILTER_PROPERTY_HIGHLIGHT_CHANGED] . ' hours' ) ) {\n\t\techo '<strong>' . $t_last_updated . '</strong>';\n\t} else {\n\t\techo $t_last_updated;\n\t}\n\techo '</span>';\n\t?>\n\t</td>\n</tr>\n<?php\n\t# -- end of Repeating bug row --\n}\n\n# -- ====================== end of BUG LIST ========================= --\n?>\n</tbody>\n</table>\n</div>\n</div>\n</div>\n</div>\n<?php\n# Free the memory allocated for the rows in this box since it is not longer needed.\nunset( $t_rows );\n\n"
        },
        {
          "name": "my_view_page.php",
          "type": "blob",
          "size": 5.908203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * My View Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses category_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'layout_api.php' );\nrequire_css( 'status_config.php' );\n\nconst TIMELINE_INC_ALLOW = true;\n\nauth_ensure_user_authenticated();\n\n$t_current_user_id = auth_get_current_user_id();\n$t_current_project_id = helper_get_current_project();\n\n# Improve performance by caching category data in one pass\ncategory_get_all_rows( $t_current_project_id );\n\ncompress_enable();\n\n# don't index my view page\nhtml_robots_noindex();\n\nlayout_page_header_begin( lang_get( 'my_view_link' ) );\n\n$t_refresh_delay = current_user_get_pref( 'refresh_delay' );\nif( $t_refresh_delay > 0 ) {\n\thtml_meta_redirect( 'my_view_page.php?refresh=true', $t_refresh_delay * 60 );\n}\n\nlayout_page_header_end();\n\nlayout_page_begin( __FILE__ );\n\n$f_page_number = gpc_get_int( 'page_number', 1 );\n\n$t_per_page = config_get( 'my_view_bug_count' );\n$t_bug_count = null;\n$t_page_count = null;\n\n# The projects that need to be evaluated are those that will be included in the filters\n# used for each box. At this point, those filter are created for \"current\" project, and\n# may include subprojects, or not, based on the default \"_view_type\" property\n# Unless these following checks are redesigned to account for the actual filters used,\n# we will assume if subprojects are included by inspecting a default filter for current project.\nif( $t_current_project_id == ALL_PROJECTS ) {\n\t$t_project_ids_to_check = null;\n} else {\n\t# this creates a filter with the specific project informes, in the same way that\n\t# those that will be used later for the boxes\n\t$t_test_filter = filter_ensure_valid_filter( array( FILTER_PROPERTY_PROJECT_ID => [$t_current_project_id]) );\n\t$t_project_ids_to_check = filter_get_included_projects( $t_test_filter );\n}\n\n# Retrieve the boxes to display\n# - exclude hidden boxes per configuration (order == 0)\n# - remove boxes that do not make sense in the user's context (access level)\n$t_boxes = array_filter( config_get( 'my_view_boxes' ) );\n$t_anonymous_user = current_user_is_anonymous();\nforeach( $t_boxes as $t_box_title => $t_box_display ) {\n\tif( # Remove \"Assigned to Me\" box for users that can't handle issues\n\t\t(  $t_box_title == 'assigned'\n\t\t&& (  $t_anonymous_user\n\t\t   || !access_has_any_project_level('handle_bug_threshold', $t_project_ids_to_check, $t_current_user_id )\n\t\t   )\n\t\t) ||\n\t\t# Remove \"Monitored by Me\" box for users that can't monitor issues\n\t\t(  $t_box_title == 'monitored'\n\t\t&& (  $t_anonymous_user\n\t\t   || !access_has_any_project_level( 'monitor_bug_threshold', $t_project_ids_to_check, $t_current_user_id )\n\t\t   )\n\t\t) ||\n\t\t# Remove display of \"Reported by Me\", \"Awaiting Feedback\" and\n\t\t# \"Awating confirmation of resolution\" boxes for users that can't report bugs\n\t\t(  in_array( $t_box_title, array( 'reported', 'feedback', 'verify' ) )\n\t\t&& (  $t_anonymous_user\n\t\t   || !access_has_any_project_level( 'report_bug_threshold', $t_project_ids_to_check, $t_current_user_id )\n\t\t   )\n\t\t)\n\t) {\n\t\tunset( $t_boxes[$t_box_title] );\n\t}\n}\nasort( $t_boxes );\n\n$t_timeline_view_threshold_access = access_has_any_project_level( config_get( 'timeline_view_threshold' ), $t_project_ids_to_check, $t_current_user_id );\n$t_timeline_view_class = ( $t_timeline_view_threshold_access ) ? \"col-md-7\" : \"col-md-6\";\n?>\n<div class=\"col-xs-12 <?php echo $t_timeline_view_class ?>\">\n\n<?php\ndefine( 'MY_VIEW_INC_ALLOW', true );\n\n# Determine the box number where column 2 should start\n# Use shift-right bitwise operator to divide by 2 as integer\n$t_column2_start = ( count( $t_boxes ) + 1 ) >> 1;\n\n$t_counter = 0;\nforeach( $t_boxes as $t_box_title => $t_box_display ) {\n    # If timeline is OFF, display boxes on 2 columns\n    if( !$t_timeline_view_threshold_access && $t_counter++ == $t_column2_start ) {\n        # End of 1st column\n        echo '</div>';\n        echo '<div class=\"col-xs-12 col-md-6\">';\n    }\n    include( __DIR__ . '/my_view_inc.php' );\n    echo '<div class=\"space-10\"></div>';\n}\n?>\n</div>\n\n<?php if( $t_timeline_view_threshold_access ) { ?>\n<div class=\"col-xs-12 col-md-5\">\n\t<?php\n\t\t# Build a simple filter that gets all bugs for current project\n\t\t$g_timeline_filter = array();\n\t\t$g_timeline_filter[FILTER_PROPERTY_HIDE_STATUS] = array( META_FILTER_NONE );\n\t\t$g_timeline_filter = filter_ensure_valid_filter( $g_timeline_filter );\n\t\tinclude( 'timeline_inc.php' );\n\t?>\n\t<div class=\"space-10\"></div>\n</div>\n<?php }\nlayout_page_end();\n"
        },
        {
          "name": "news_add.php",
          "type": "blob",
          "size": 2.1650390625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add News\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses news_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'news_api.php' );\nrequire_api( 'print_api.php' );\n\nnews_ensure_enabled();\n\nform_security_validate( 'news_add' );\n\naccess_ensure_project_level( config_get( 'manage_news_threshold' ) );\n\n$f_view_state\t= gpc_get_int( 'view_state' );\n$f_headline\t\t= gpc_get_string( 'headline' );\n$f_announcement\t= gpc_get_bool( 'announcement' );\n$f_body\t\t\t= gpc_get_string( 'body' );\n\n$t_news_id = news_create( helper_get_current_project(), auth_get_current_user_id(), $f_view_state, $f_announcement, $f_headline, $f_body );\n\nform_security_purge( 'news_add' );\n\n$t_news_row = news_get_row( $t_news_id );\n\nlayout_page_header();\nlayout_page_begin( 'main_page.php' );\nhtml_operation_successful( 'main_page.php' );\nprint_news_entry_from_row( $t_news_row );\nlayout_page_end();\n"
        },
        {
          "name": "news_edit_page.php",
          "type": "blob",
          "size": 5.46875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * News Edit Page\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses news_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'news_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\n\nnews_ensure_enabled();\n\n$f_news_id = gpc_get_int( 'news_id' );\n$f_action = gpc_get_string( 'action', '' );\n\n# If deleting item redirect to delete script\nif( 'delete' == $f_action ) {\n\tform_security_validate( 'news_delete' );\n\n\t$t_row = news_get_row( $f_news_id );\n\n\t# This check is to allow deleting of news items that were left orphan due to bug #3723\n\tif( project_exists( $t_row['project_id'] ) ) {\n\t\taccess_ensure_project_level( config_get( 'manage_news_threshold' ), $t_row['project_id'] );\n\t}\n\n\thelper_ensure_confirmed( lang_get( 'delete_news_sure_msg' ), lang_get( 'delete_news_item_button' ) );\n\n\tnews_delete( $f_news_id );\n\n\tform_security_purge( 'news_delete' );\n\n\tprint_header_redirect( 'news_menu_page.php', true );\n}\n\n# Retrieve news item data and prefix with v_\n$t_row = news_get_row( $f_news_id );\nif( $t_row ) {\n\textract( $t_row, EXTR_PREFIX_ALL, 'v' );\n}\n\naccess_ensure_project_level( config_get( 'manage_news_threshold' ), $v_project_id );\n\n$v_headline = string_attribute( $v_headline );\n$v_body \t= string_textarea( $v_body );\n\nlayout_page_header( lang_get( 'edit_news_title' ) );\n\nlayout_page_begin( 'main_page.php' );\n\n# Edit News Form BEGIN\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n<div id=\"news-update-div\" class=\"form-container\">\n\t<form id=\"news-update-form\" method=\"post\" action=\"news_update.php\">\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-edit', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'edit_post' ) ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'news_update' ); ?>\n\t\t\t<input type=\"hidden\" name=\"news_id\" value=\"<?php echo $v_id ?>\" />\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<span class=\"required\">*</span> <?php echo lang_get( 'headline' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"news-update-headline\" name=\"headline\" class=\"input-sm\" size=\"64\" maxlength=\"64\" value=\"<?php echo $v_headline ?>\" required />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<span class=\"required\">*</span> <?php echo lang_get( 'body' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"news-update-body\" name=\"body\" cols=\"60\" rows=\"10\" required>\n<?php echo $v_body ?>\n</textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'post_to' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select name=\"project_id\" class=\"input-sm\"><?php\n\t\t\t\t\t\t$t_sitewide = false;\n\t\t\t\t\t\tif( current_user_is_administrator() ) {\n\t\t\t\t\t\t\t$t_sitewide = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprint_project_option_list( $v_project_id, $t_sitewide ); ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'announcement' ) ?> <span class=\"help-text\"><?php echo lang_get( 'stays_on_top' ) ?></span>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"news-update-announcement\" name=\"announcement\" <?php check_checked( (int)$v_announcement, 1 ); ?> />\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select name=\"view_state\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'view_state', $v_view_state ) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</fieldset>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ); ?></span>\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'update_news_button' ) ?>\" />\n\t\t\t</div>\n\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n</div>\n<?php\n# Edit News Form END\n\nlayout_page_end();\n"
        },
        {
          "name": "news_list_page.php",
          "type": "blob",
          "size": 3.2041015625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * List News\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses news_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'news_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nnews_ensure_enabled();\n\naccess_ensure_project_level( config_get( 'view_bug_threshold' ) );\n\nlayout_page_header();\n\nlayout_page_begin( 'main_page.php' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-archive', 'ace-icon' ); ?>\n\t\t<?php echo lang_get( 'archives' ) ?>\n\t</h4>\n</div>\n\n<div class=\"widget-body\">\n\t<div class=\"widget-main\">\n\n<?php\n# Select the news posts\n$t_rows = news_get_rows( helper_get_current_project() );\n$t_count = count( $t_rows );\n\nif( $t_count > 0 ) {\n\t# Loop through results\n\tfor( $i=0; $i < $t_count; $i++ ) {\n\t\t/**\n\t\t * @var int $v_id\n\t\t * @var int $v_project_id\n\t\t * @var int $v_poster_id\n\t\t * @var int $v_view_state\n\t\t * @var int $v_announcement\n\t\t * @var string $v_headline\n\t\t * @var int $v_date_posted\n\t\t */\n\t\textract( $t_rows[$i], EXTR_PREFIX_ALL, 'v' );\n\t\tif( VS_PRIVATE == $v_view_state && !access_has_project_level( config_get( 'private_news_threshold' ), $v_project_id ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t$v_headline \t= string_display_line( $v_headline );\n\t\t$v_date_posted \t= date( config_get( 'complete_date_format' ), $v_date_posted ); ?>\n\t\t<p>\n\t\t\t<?php print_icon( 'fa-clock-o' ); ?>\n\t\t\t<span class=\"small\"> <?php echo $v_date_posted; ?> </span>\n\t\t\t<a href=\"news_view_page.php?news_id=<?php echo $v_id; ?>\"><?php echo $v_headline; ?></a>\n\t\t\t&#160;&#160;&#160;&#160;\n\t\t<?php\n\t\t\tprint_icon( 'fa-edit' );\n\t\t\techo ' ' . prepare_user_name( $v_poster_id );\n\t\t\tif( 1 == $v_announcement ) {\n\t\t\t\techo lang_get( 'announcement' );\n\t\t\t}\n\t\t\tif( VS_PRIVATE == $v_view_state ) {\n\t\t?>\n\t\t\t\t<span class=\"label label-info\"><?php echo lang_get( 'private' ); ?></span>\n\t\t<?php } ?>\n\t\t</p>\n<?php\n\t}  \t# end for loop\n}\n?>\n\t</div>\n</div>\n</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "news_menu_page.php",
          "type": "blob",
          "size": 5.5576171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage News\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses current_user_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses news_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'news_api.php' );\nrequire_api( 'print_api.php' );\n\nnews_ensure_enabled();\n\naccess_ensure_project_level( config_get( 'manage_news_threshold' ) );\n\nlayout_page_header( lang_get( 'edit_news_link' ) );\n\nlayout_page_begin( 'main_page.php' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div id=\"news-add-div\" class=\"form-container\">\n\t<form id=\"news-add-form\" method=\"post\" action=\"news_add.php\">\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-edit', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'add_news_title' ) ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'news_add' ); ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<span class=\"required\">*</span> <?php echo lang_get( 'headline' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" id=\"news-headline\" name=\"headline\" class=\"input-sm\" size=\"64\" maxlength=\"64\" required />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<span class=\"required\">*</span> <?php echo lang_get( 'body' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"news-body\" name=\"body\" cols=\"60\" rows=\"8\" required></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'announcement' ) ?> <span class=\"help-text\"><?php echo lang_get( 'stays_on_top' ) ?></span>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ace\" id=\"news-announcement\" name=\"announcement\" />\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'view_status' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"news-view-status\" name=\"view_state\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_enum_string_option_list( 'view_state' ) ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</fieldset>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<span class=\"required pull-right\"> * <?php echo lang_get( 'required' ) ?></span>\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'post_news_button' ) ?>\" />\n\t\t\t</div>\n\t\t</div>\n\t\t</div>\n\t</form>\n\t</div>\n</div>\n\n<?php\n# Add News Form END\n# Edit/Delete News Form BEGIN\nif( news_get_count( helper_get_current_project(), current_user_is_administrator() ) > 0 ) { ?>\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<div id=\"news-edit-div\" class=\"form-container\">\n\t<form id=\"news-edit-form\" method=\"post\" action=\"news_edit_page.php\">\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-edit', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get( 'edit_or_delete_news_title' ) ?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'news_delete' ); ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'edit_post' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"radio\" class=\"ace\" id=\"news-edit-action\" name=\"action\" value=\"edit\" checked=\"checked\">\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'delete_post' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"radio\" class=\"ace\" id=\"news-delete-action\" name=\"action\" value=\"delete\">\n\t\t\t\t\t\t<span class=\"lbl\"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'select_post' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<select id=\"news-edit-id\" name=\"news_id\" class=\"input-sm\">\n\t\t\t\t\t\t<?php print_news_item_option_list() ?>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</fieldset>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'submit' ) ?>\" />\n\t\t\t</div>\n\t\t</div>\n\t\t</div>\n\t</form>\n\t</div>\n</div>\n<?php\n} # Edit/Delete News Form END\n\nlayout_page_end();\n"
        },
        {
          "name": "news_rss.php",
          "type": "blob",
          "size": 5.462890625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Generate News Feed RSS\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses gpc_api.php\n * @uses lang_api.php\n * @uses news_api.php\n * @uses project_api.php\n * @uses rss_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n * @uses rssbuilder/class.RSSBuilder.inc.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'news_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'rss_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_lib( 'rssbuilder/class.RSSBuilder.inc.php' );\n\n$f_username = gpc_get_string( 'username', null );\n$f_key = gpc_get_string( 'key', null );\n$f_project_id = gpc_get_int( 'project_id', ALL_PROJECTS );\n\nnews_ensure_enabled();\n\n# make sure RSS syndication is enabled.\nif( OFF == config_get( 'rss_enabled' ) ) {\n\taccess_denied();\n}\n\n# authenticate the user\nif( $f_username !== null ) {\n\tif( !rss_login( $f_username, $f_key ) ) {\n\t\taccess_denied();\n\t}\n} else {\n\tif( !auth_anonymous_enabled() ) {\n\t\taccess_denied();\n\t}\n}\n\n# Make sure that the current user has access to the selected project (if not ALL PROJECTS).\nif( $f_project_id != ALL_PROJECTS ) {\n\taccess_ensure_project_level( config_get( 'view_bug_threshold', null, null, $f_project_id ), $f_project_id );\n}\n\n# construct rss file\n\n$t_encoding = 'utf-8';\n$t_about = config_get_global( 'path' );\n$t_title = string_rss_links( config_get( 'window_title' ) . ' - ' . lang_get( 'news' ) );\n\nif( $f_username !== null ) {\n\t$t_title .= ' - (' . $f_username . ')';\n}\n\n$t_description = $t_title;\n$t_image_link = config_get_global( 'path' ) . config_get_global( 'logo_image' );;\n\n# only rss 2.0\n$t_category = string_rss_links( project_get_name( $f_project_id ) );\n\n# in minutes (only rss 2.0)\n$t_cache = '60';\n\n$t_rssfile = new RSSBuilder( $t_encoding, $t_about, $t_title, $t_description,\n\t\t\t\t$t_image_link, $t_category, $t_cache );\n\n# person, an organization, or a service\n$t_publisher = '';\n\n# person, an organization, or a service\n$t_creator = '';\n\n$t_date = (string)date( 'r' );\n$t_language = lang_get( 'phpmailer_language' );\n$t_rights = '';\n\n# spatial location , temporal period or jurisdiction\n$t_coverage = (string)'';\n\n# person, an organization, or a service\n$t_contributor = (string)'';\n\n$t_rssfile->addDCdata( $t_publisher, $t_creator, $t_date, $t_language, $t_rights, $t_coverage, $t_contributor );\n\n# hourly / daily / weekly / ...\n$t_period = (string)'daily';\n\n# every X hours/days/...\n$t_frequency = (int)1;\n\n$t_base = (string)date( 'Y-m-d\\TH:i:sO' );\n\n# add missing : in the O part of the date.  @todo PHP 5 supports a 'c' format which will output the format\n# exactly as we want it.\n# 2002-10-02T10:00:00-0500 -> 2002-10-02T10:00:00-05:00\n$t_base = mb_substr( $t_base, 0, 22 ) . ':' . mb_substr( $t_base, -2 );\n\n$t_rssfile->addSYdata( $t_period, $t_frequency, $t_base );\n\n$t_news_rows = news_get_limited_rows( 0, $f_project_id );\n$t_news_count = count( $t_news_rows );\n\n# Loop through results\nfor( $i = 0; $i < $t_news_count; $i++ ) {\n\t$t_row = $t_news_rows[$i];\n\textract( $t_row, EXTR_PREFIX_ALL, 'v' );\n\n\t# skip news item if private, or\n\t# belongs to a private project (will only happen\n\tif( VS_PRIVATE == $v_view_state ) {\n\t\tcontinue;\n\t}\n\n\t$v_headline \t= string_rss_links( $v_headline );\n\t$v_body \t= string_rss_links( $v_body );\n\n\t$t_about = $t_link = config_get_global( 'path' ) . 'news_view_page.php?news_id=' . $v_id;\n\t$t_title = $v_headline;\n\t$t_description = $v_body;\n\n\t# optional DC value\n\t$t_subject = $t_title;\n\n\t# optional DC value\n\t$t_date = $v_date_posted;\n\n\t# author of item\n\t$t_author = '';\n\tif( access_has_global_level( config_get( 'show_user_email_threshold' ) ) ) {\n\t\t$t_author_name = string_rss_links( user_get_name( $v_poster_id ) );\n\t\t$t_author_email = user_get_field( $v_poster_id, 'email' );\n\n\t\tif( !is_blank( $t_author_email ) ) {\n\t\t\tif( !is_blank( $t_author_name ) ) {\n\t\t\t\t$t_author = $t_author_name . ' &lt;' . $t_author_email . '&gt;';\n\t\t\t} else {\n\t\t\t\t$t_author = $t_author_email;\n\t\t\t}\n\t\t}\n\t}\n\n\t# $comments = 'http://www.example.com/sometext.php?somevariable=somevalue&comments=1';\t# url to comment page rss 2.0 value\n\t$t_comments = '';\n\n\t# optional mod_im value for dispaying a different pic for every item\n\t$t_image = '';\n\n\t$t_rssfile->addRSSItem( $t_about, $t_title, $t_link, $t_description, $t_subject, $t_date, $t_author, $t_comments, $t_image );\n}\n\n# @todo consider making this a configuration option - 0.91 / 1.0 / 2.0\n$t_version = '2.0';\n\n$t_rssfile->outputRSS( $t_version );\n"
        },
        {
          "name": "news_update.php",
          "type": "blob",
          "size": 2.537109375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update News Post\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses news_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'news_api.php' );\nrequire_api( 'print_api.php' );\n\nnews_ensure_enabled();\n\nform_security_validate( 'news_update' );\n\n$f_news_id\t\t= gpc_get_int( 'news_id' );\n$f_project_id\t= gpc_get_int( 'project_id' );\n$f_view_state\t= gpc_get_int( 'view_state' );\n$f_headline\t\t= gpc_get_string( 'headline' );\n$f_announcement\t= gpc_get_bool( 'announcement' );\n$f_body\t\t\t= gpc_get_string( 'body', '' );\n\n$t_row = news_get_row( $f_news_id );\n\n# Check both the old project and the new project\naccess_ensure_project_level( config_get( 'manage_news_threshold' ), $t_row['project_id'] );\naccess_ensure_project_level( config_get( 'manage_news_threshold' ), $f_project_id );\n\nnews_update( $f_news_id, $f_project_id, $f_view_state, $f_announcement, $f_headline, $f_body );\n\nform_security_purge( 'news_update' );\n\nlayout_page_header();\n\nlayout_page_begin( 'main_page.php' );\n\necho '<div class=\"space-20\"></div>';\n\n$t_buttons = array(\n\tarray( 'news_menu_page.php' ),\n\tarray( 'news_edit_page.php?news_id=' . $f_news_id . '&action=edit', lang_get( 'edit' ) ),\n);\nhtml_operation_confirmation( $t_buttons, CONFIRMATION_TYPE_SUCCESS );\n\necho '<br />';\n\nprint_news_entry( $f_headline, $f_body, $t_row['poster_id'], $f_view_state, $f_announcement, $t_row['date_posted'] );\n\nlayout_page_end();\n"
        },
        {
          "name": "news_view_page.php",
          "type": "blob",
          "size": 2.0595703125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * News View Page\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses news_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'news_api.php' );\nrequire_api( 'print_api.php' );\n\nnews_ensure_enabled();\n\n$f_news_id = gpc_get_int( 'news_id', null );\n\nlayout_page_header();\n\nlayout_page_begin( 'main_page.php' );\n?>\n<div class=\"col-md-12 col-xs-12\">\n<?php\nif( $f_news_id !== null ) {\n\t$t_project_id = news_get_field( $f_news_id, 'project_id' );\n\tif( news_is_private( $f_news_id ) ) {\n\t\taccess_ensure_project_level(\tconfig_get( 'private_news_threshold' ),\n\t\t\t\t\t\t$t_project_id );\n\t} else {\n\t\taccess_ensure_project_level( config_get( 'view_bug_threshold', null, null, $t_project_id ), $t_project_id );\n\t}\n\n\tprint_news_string_by_news_id( $f_news_id );\n}\n?>\n\n<div class=\"space-10\"></div>\n\t<?php print_link_button( 'news_list_page.php', lang_get( 'archives' ) ); ?>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "permalink_page.php",
          "type": "blob",
          "size": 2.19921875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Generate Permanent link\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'permalink' );\n\nlayout_page_header();\nlayout_page_begin();\n\naccess_ensure_project_level( config_get( 'create_permalink_threshold' ) );\n\n$f_filter = gpc_get_string( 'filter' );\n\n$t_url = filter_get_url( filter_temporary_get( $f_filter ) );\n\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<p class=\"lead\">\n\t\t<?php echo lang_get( 'filter_permalink' ); ?>\n\t</p>\n\t<p>\n\t\t<?php printf( '<a href=\"%1$s\">%1$s</a>', string_attribute( $t_url ) ); ?>\n\t</p>\n\t<div class=\"space-10\"></div>\n\n<?php\n$t_create_short_url = config_get( 'create_short_url' );\nif( !is_blank( $t_create_short_url ) ) {\n\tprint_small_button(\n\t\tsprintf( $t_create_short_url, $t_url ),\n\t\tlang_get( 'create_short_link' ),\n\t\ttrue\n\t);\n}\n?>\n\n</div>\n\n<?php\nform_security_purge( 'permalink' );\nlayout_page_end();\n"
        },
        {
          "name": "phpunit.xml",
          "type": "blob",
          "size": 0.591796875,
          "content": "<!--\n    MantisBT PHPUnit configuration\n-->\n<phpunit\n    bootstrap=\"tests/bootstrap.php\"\n    colors=\"true\"\n    >\n\n    <testsuites>\n        <testsuite name=\"mantis\">\n            <directory>tests/Mantis</directory>\n        </testsuite>\n\n        <testsuite name=\"soap\">\n            <directory>tests/soap</directory>\n        </testsuite>\n\n        <testsuite name=\"rest\">\n            <directory>tests/rest</directory>\n        </testsuite>\n\n        <testsuite name=\"mantis core formatting\">\n            <directory>plugins/MantisCoreFormatting/tests</directory>\n        </testsuite>\n    </testsuites>\n\n</phpunit>\n"
        },
        {
          "name": "plugin.php",
          "type": "blob",
          "size": 2.1357421875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Plugin file loader\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses gpc_api.php\n * @uses plugin_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'plugin_api.php' );\n\n$t_plugin_path = config_get_global( 'plugin_path' );\n\n$f_page = gpc_get_string( 'page' );\n\nif( !preg_match( '/^([a-zA-Z0-9_-]+)\\/([a-zA-Z0-9_-]+[\\/a-zA-Z0-9_-]*)/', $f_page, $t_matches ) ) {\n\terror_parameters( $f_page );\n\ttrigger_error( ERROR_PLUGIN_INVALID_PAGE, ERROR );\n}\n\n$t_basename = $t_matches[1];\n$t_action = $t_matches[2];\n\n$t_plugin = plugin_get( $t_basename );\n\nif( plugin_needs_upgrade( $t_plugin ) ) {\n\terror_parameters( $t_basename );\n\ttrigger_error( ERROR_PLUGIN_UPGRADE_NEEDED, ERROR );\n}\n\n# Plugin can be registered but fail to load e.g. due to unmet dependencies\nif( !plugin_is_loaded( $t_basename ) ) {\n\terror_parameters( $t_basename );\n\ttrigger_error( ERROR_PLUGIN_NOT_LOADED, ERROR );\n}\n\n$t_page = $t_plugin_path . $t_basename . '/pages/' . $t_action . '.php';\n\nif( !is_file( $t_page ) ) {\n\terror_parameters( $t_basename, $t_action );\n\ttrigger_error( ERROR_PLUGIN_PAGE_NOT_FOUND, ERROR );\n}\n\n# rewrite headers to allow caching\nif( gpc_isset( 'cache_key' ) ) {\n\thttp_caching_headers( true );\n}\n\nplugin_push_current( $t_basename );\ninclude( $t_page );\n"
        },
        {
          "name": "plugin_file.php",
          "type": "blob",
          "size": 1.845703125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Loads plugin files\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses gpc_api.php\n * @uses plugin_api.php\n */\n\n$g_bypass_headers = true;\nheader( 'Content-type: ' );\n\nconst DISABLE_INLINE_ERROR_REPORTING = true;\n\nrequire_once( 'core.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'plugin_api.php' );\n\n$t_plugin_path = config_get_global( 'plugin_path' );\n\n$f_file = gpc_get_string( 'file' );\n\n$t_regex = '/^'\n\t# File must start with plugin name, ending with /\n\t. '([a-zA-Z0-9_-]+)\\/'\n\t# Path must not start with a '.' to avoid arbitrary includes higher in the file system\n\t. '('. '(?:(?:[a-zA-Z0-9_-][.a-zA-Z0-9_-]*\\/)*)'\n\t# Same goes for filename\n\t. '(?:[a-zA-Z0-9_-][.a-zA-Z0-9_-]*)'\n\t. ')$/';\n\nif( !preg_match( $t_regex, $f_file, $t_matches ) ) {\n\terror_parameters( $f_file );\n\ttrigger_error( ERROR_PLUGIN_INVALID_FILE, ERROR );\n}\n\n$t_basename = $t_matches[1];\n$t_file = $t_matches[2];\n\n$t_plugin = plugin_get( $t_basename );\n\nplugin_file_include( $t_file, $t_basename );\n"
        },
        {
          "name": "plugins",
          "type": "tree",
          "content": null
        },
        {
          "name": "print_all_bug_options_inc.php",
          "type": "blob",
          "size": 5.08984375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\tSee the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.\tIf not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Print all bug options include file\n * @package MantisBT\n * @copyright Copyright 2000 - 2002\t Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses authentication_api.php\n * @uses database_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\nif( !defined( 'PRINT_ALL_BUG_OPTIONS_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'authentication_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\n/**\n * this function only gets the field names, by appending strings\n * @return array\n */\nfunction get_field_names() {\n\treturn array (\n\t\t\t\t'id',\n\t\t\t\t'category',\n\t\t\t\t'severity',\n\t\t\t\t'reproducibility',\n\t\t\t\t'date_submitted',\n\t\t\t\t'last_update',\n\t\t\t\t'reporter',\n\t\t\t\t'assigned_to',\n\t\t\t\t'priority',\n\t\t\t\t'status',\n\t\t\t\t'build',\n\t\t\t\t'projection',\n\t\t\t\t'eta',\n\t\t\t\t'platform',\n\t\t\t\t'os',\n\t\t\t\t'os_build',\n\t\t\t\t'product_version',\n\t\t\t\t'resolution',\n\t\t\t\t'duplicate_id',\n\t\t\t\t'summary',\n\t\t\t\t'description',\n\t\t\t\t'steps_to_reproduce',\n\t\t\t\t'additional_information',\n\t\t\t\t'attached_files',\n\t\t\t\t'bugnote_title',\n\t\t\t\t'bugnote_date',\n\t\t\t\t'bugnote_description',\n\t\t\t\t'time_tracking' );\n}\n\n/**\n * Edit Printing preferences\n * @param integer $p_user_id            A valid user identifier.\n * @param boolean $p_error_if_protected Error if account protected.\n * @param string  $p_redirect_url       Redirect URL.\n * @return void\n */\nfunction edit_printing_prefs( $p_user_id = null, $p_error_if_protected = true, $p_redirect_url = '' ) {\n\tif( null === $p_user_id ) {\n\t\t$p_user_id = auth_get_current_user_id();\n\t}\n\n\t# protected account check\n\tif( $p_error_if_protected ) {\n\t\tuser_ensure_unprotected( $p_user_id );\n\t}\n\n\tif( is_blank( $p_redirect_url ) ) {\n\t\t$p_redirect_url = 'print_all_bug_page.php';\n\t}\n\n\t# get the fields list\n\t$t_field_name_arr = get_field_names();\n\t$t_field_name_count = count( $t_field_name_arr );\n\n\t# Grab the data\n\t$t_query = 'SELECT print_pref FROM {user_print_pref} WHERE user_id=' . db_param();\n\t$t_result = db_query( $t_query, array( $p_user_id ) );\n\n\t$t_row = db_fetch_array( $t_result );\n\n\t## OOPS, No entry in the database yet.\tLets make one\n\tif( !$t_row ) {\n\t\t# create a default array, same size than $t_field_name\n\t\tfor( $i=0; $i<$t_field_name_count; $i++ ) {\n\t\t\t$t_default_arr[$i] = 1 ;\n\t\t}\n\t\t$t_default = implode( '', $t_default_arr ) ;\n\n\t\t# all fields are added by default\n\t\t$t_query = 'INSERT\n\t\t\t\tINTO {user_print_pref}\n\t\t\t\t(user_id, print_pref)\n\t\t\t\tVALUES\n\t\t\t\t(' . db_param() . ',' . db_param() . ')';\n\t\tdb_query( $t_query, array( $p_user_id, $t_default ) );\n\n\t\t# Rerun select query\n\t\t$t_query = 'SELECT print_pref FROM {user_print_pref} WHERE user_id=' . db_param();\n\t\t$t_result = db_query( $t_query, array( $p_user_id ) );\n\n\t\t$t_row = db_fetch_array( $t_result );\n\t}\n\n\t# putting the query result into an array with the same size as $t_fields_arr\n\t$t_prefs = $t_row['print_pref'];\n\n\t# Account Preferences Form BEGIN\n?>\n<br />\n<div>\n<form method=\"post\" action=\"print_all_bug_options_update.php\">\n<?php echo form_security_field( 'print_all_bug_options_update' ) ?>\n<input type=\"hidden\" name=\"user_id\" value=\"<?php echo $p_user_id ?>\" />\n<input type=\"hidden\" name=\"redirect_url\" value=\"<?php echo string_attribute( $p_redirect_url ) ?>\" />\n<table class=\"width75\" cellspacing=\"1\">\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo lang_get( 'printing_preferences_title' ) ?>\n\t</td>\n\t<td class=\"pull-right\">\n\t</td>\n</tr>\n\n\n<?php # display the checkboxes\nfor( $i=0; $i <$t_field_name_count; $i++ ) {\n\n\techo '<tr>';\n?>\n\n\t<th class=\"category\">\n\t\t<?php echo lang_get( $t_field_name_arr[$i] ) ?>\n\t</th>\n\t<td>\n\t\t<input type=\"checkbox\" name=\"<?php echo 'print_' . $t_field_name_arr[$i]; ?>\"\n\t\t<?php\n\t\t\tif( isset( $t_prefs[$i] ) && ( $t_prefs[$i]==1 ) ) {\n\t\t\t\techo 'checked=\"checked\"';\n\t\t\t}\n\t\t?>\n\t\t/>\n\t</td>\n</tr>\n\n<?php\n}\n?>\n<tr>\n\t<td>&#160;</td>\n\t<td>\n\t\t<input type=\"submit\" class=\"button\" value=\"<?php echo lang_get( 'update_prefs_button' ) ?>\" />\n\t</td>\n</tr>\n</table>\n</form>\n</div>\n\n<br />\n\n<div class=\"border center\">\n\t<form method=\"post\" action=\"print_all_bug_options_reset.php\">\n\t<?php echo form_security_field( 'print_all_bug_options_reset' ) ?>\n\t<input type=\"submit\" class=\"button\" value=\"<?php echo lang_get( 'reset_prefs_button' ) ?>\" />\n\t</form>\n</div>\n\n<?php\n}\n"
        },
        {
          "name": "print_all_bug_options_page.php",
          "type": "blob",
          "size": 1.4306640625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This page allows the user to set the fields of the bugs he wants to print\n * Update is POSTed to acount_prefs_update.php\n * Reset is POSTed to acount_prefs_reset.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses html_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'html_api.php' );\n\ndefine( 'PRINT_ALL_BUG_OPTIONS_INC_ALLOW', true );\ninclude( __DIR__ . '/print_all_bug_options_inc.php' );\n\nauth_ensure_user_authenticated();\n\nlayout_page_header();\nlayout_page_begin();\nedit_printing_prefs();\nlayout_page_end();\n"
        },
        {
          "name": "print_all_bug_options_reset.php",
          "type": "blob",
          "size": 2.701171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Reset prefs to defaults then redirect to account_prefs_page.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses database_api.php\n * @uses error_api.php\n * @uses form_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\ndefine( 'PRINT_ALL_BUG_OPTIONS_INC_ALLOW', true );\ninclude( __DIR__ . '/print_all_bug_options_inc.php' );\n\nform_security_validate( 'print_all_bug_options_reset' );\n\nauth_ensure_user_authenticated();\n\n# protected account check\ncurrent_user_ensure_unprotected();\n\n# get user id\n$t_user_id = auth_get_current_user_id();\n\n# get the fields list\n$t_field_name_arr = get_field_names();\n$t_field_name_count = count( $t_field_name_arr );\n\n# create a default array, same size than $t_field_name\nfor( $i=0; $i<$t_field_name_count; $i++ ) {\n\t$t_default_arr[$i] = 0 ;\n}\n$t_default = implode( '', $t_default_arr );\n\n# reset to defaults\n$t_query = 'UPDATE {user_print_pref} SET print_pref=' . db_param() . ' WHERE user_id=' . db_param();\n\n$t_result = db_query( $t_query, array( $t_default, $t_user_id ) );\n\nform_security_purge( 'print_all_bug_options_reset' );\n\n$t_redirect_url = 'print_all_bug_options_page.php';\n\nif( $t_result ) {\n\tprint_header_redirect( $t_redirect_url );\n} else {\n\tlayout_page_header( null, $t_redirect_url );\n\tlayout_page_begin();\n\n\techo '<div class=\"failure-msg\">';\n\techo error_string( ERROR_GENERIC ) . '<br />';\n\tprint_link_button( $t_redirect_url, lang_get( 'proceed' ) );\n\techo '</div>';\n\n\tlayout_page_end();\n}\n"
        },
        {
          "name": "print_all_bug_options_update.php",
          "type": "blob",
          "size": 2.9072265625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Updates printing prefs then redirect to print_all_bug_page_page.php\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses error_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\ndefine( 'PRINT_ALL_BUG_OPTIONS_INC_ALLOW', true );\ninclude( __DIR__ . '/print_all_bug_options_inc.php' );\n\nform_security_validate( 'print_all_bug_options_update' );\n\nauth_ensure_user_authenticated();\n\n$f_user_id\t\t= gpc_get_int( 'user_id' );\n$f_redirect_url\t= gpc_get_string( 'redirect_url' );\n\n# the check for the protected state is already done in the form, there is\n# no need to duplicate it here.\n\n# get the fields list\n$t_field_name_arr = get_field_names();\n$t_field_name_count = count( $t_field_name_arr );\n\n# check the checkboxes\nfor( $i=0; $i <$t_field_name_count; $i++ ) {\n\t$t_name = 'print_' . mb_strtolower( str_replace( ' ', '_', $t_field_name_arr[$i] ) );\n\t$t_flag = gpc_get( $t_name, null );\n\n\tif( $t_flag === null ) {\n\t\t$t_prefs_arr[$i] = 0;\n\t} else {\n\t\t$t_prefs_arr[$i] = 1;\n\t}\n}\n\n# get user id\n$t_user_id = $f_user_id;\n\n$c_export = implode( '', $t_prefs_arr );\n\n# update preferences\n$t_query = 'UPDATE {user_print_pref} SET print_pref=' . db_param() . ' WHERE user_id=' . db_param();\n\n$t_result = db_query( $t_query, array( $c_export, $t_user_id ) );\n\nform_security_purge( 'print_all_bug_options_update' );\n\nif( $t_result ) {\n\tprint_header_redirect( $f_redirect_url );\n} else {\n\tlayout_page_header( null, $f_redirect_url );\n\tlayout_page_begin();\n\n\techo '<div class=\"failure-msg\">';\n\tprint error_string( ERROR_GENERIC ) . '<br />';\n\tprint_link_button( $f_redirect_url, lang_get( 'proceed' ) );\n\techo '</div>';\n\n\tlayout_page_end();\n}\n"
        },
        {
          "name": "print_all_bug_page.php",
          "type": "blob",
          "size": 7.36328125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Bugs to display / print / export can be selected with the checkboxes\n * A printing Options link allows to choose the fields to export\n * Export :\n *  - the bugs displayed in print_all_bug_page.php are saved in a .doc or .xls file\n *  - the IE icons allows to see or directly print the same result\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses filter_api.php\n * @uses filter_constants_inc.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'filter_constants_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\nrequire_css( 'status_config.php' );\n\nauth_ensure_user_authenticated();\n\naccess_ensure_project_level( config_get( 'print_reports_threshold' ) );\n\n$f_search\t\t= gpc_get_string( FILTER_PROPERTY_SEARCH, false ); # @todo need a better default\n$f_offset\t\t= gpc_get_int( 'offset', 0 );\n\n$f_highlight_changed \t= 0;\n$f_sort \t\t\t\t= null;\n$f_dir\t\t \t\t\t= null;\n$t_project_id \t\t\t= 0;\n\n$t_columns = helper_get_columns_to_view( COLUMNS_TARGET_PRINT_PAGE );\n$t_num_of_columns = count( $t_columns );\n\n# Get the filter in use\n$t_filter = current_user_get_bug_filter();\nfilter_init( $t_filter );\n\n$f_highlight_changed = $t_filter[FILTER_PROPERTY_HIGHLIGHT_CHANGED];\n$f_sort              = $t_filter[FILTER_PROPERTY_SORT_FIELD_NAME];\n$f_dir               = $t_filter[FILTER_PROPERTY_SORT_DIRECTION];\n$t_project_id        = helper_get_current_project();\n\n# This replaces the actual search that used to be here\n$f_page_number = gpc_get_int( 'page_number', 1 );\n$t_per_page = -1;\n$t_bug_count = null;\n$t_page_count = null;\n\n$t_result = filter_get_bug_rows( $f_page_number, $t_per_page, $t_page_count, $t_bug_count );\n$t_row_count = count( $t_result );\n\n# pre-cache column data\nbug_cache_columns_data( $t_result, $t_columns );\n\n# for export\n$t_show_flag = gpc_get_int( 'show_flag', 0 );\n\nlayout_page_header();\n?>\n\n<table class=\"table table-condensed no-margin\"><tr><td class=\"bold bigger-120\">\n\t<div class=\"center\">\n\t\t<?php echo string_display_line( config_get( 'window_title' ) ) . ' - ' . string_display_line( project_get_name( $t_project_id ) ); ?>\n\t</div>\n</td></tr></table>\n\n<form method=\"post\" action=\"view_all_set.php\">\n<?php # CSRF protection not required here - form does not result in modifications ?>\n\t<input type=\"hidden\" name=\"type\" value=\"1\" />\n\t<input type=\"hidden\" name=\"print\" value=\"1\" />\n\t<input type=\"hidden\" name=\"offset\" value=\"0\" />\n\t<input type=\"hidden\" name=\"<?php echo FILTER_PROPERTY_SORT_FIELD_NAME; ?>\" value=\"<?php echo $f_sort ?>\" />\n\t<input type=\"hidden\" name=\"<?php echo FILTER_PROPERTY_SORT_DIRECTION; ?>\" value=\"<?php echo $f_dir ?>\" />\n\n<table class=\"table table-striped table-bordered table-condensed no-margin\">\n<?php\n#<SQLI> Excel & Print export\n#$f_bug_array stores the number of the selected rows\n#$t_bug_arr_sort is used for displaying\n#$f_export is a string for the word and excel pages\n\n$f_bug_arr = gpc_get_int_array( 'bug_arr', array() );\n$f_bug_arr[$t_row_count]=-1;\n\nfor( $i=0; $i < $t_row_count; $i++ ) {\n\tif( isset( $f_bug_arr[$i] ) ) {\n\t\t$t_index = $f_bug_arr[$i];\n\t\t$t_bug_arr_sort[$t_index]=1;\n\t}\n}\n$f_export = implode( ',', $f_bug_arr );\n\n?>\n\n<tr>\n\t<td colspan=\"<?php echo $t_num_of_columns ?>\">\n<?php\n\tif( 'DESC' == $f_dir ) {\n\t\t$t_new_dir = 'ASC';\n\t} else {\n\t\t$t_new_dir = 'DESC';\n\t}\n\n\t$t_search = urlencode( $f_search );\n\n\t$t_icons = array(\n\t\tarray( 'print_all_bug_page_word', 'word', '', 'fa-file-word-o', 'Word 2000' ),\n\t\tarray( 'print_all_bug_page_word', 'html', 'target=\"_blank\"', 'fa-internet-explorer', 'Word View' ) );\n\n\tforeach ( $t_icons as $t_icon ) {\n\t\t$t_params = array(\n\t\t\tFILTER_PROPERTY_SEARCH => $t_search,\n\t\t\tFILTER_PROPERTY_SORT_FIELD_NAME => $f_sort,\n\t\t\tFILTER_PROPERTY_SORT_DIRECTION => $t_new_dir,\n\t\t\t'type_page' => $t_icon[1],\n\t\t\t'export' => $f_export,\n\t\t\t'show_flag' => $t_show_flag,\n\t\t);\n\t\tif( filter_is_temporary( $t_filter ) ) {\n\t\t\t$t_params['filter'] = filter_get_temporary_key( $t_filter );\n\t\t}\n\n\t\techo '<a href=\"' . $t_icon[0] . '.php?' . http_build_query( $t_params ) . '\" ' . $t_icon[2] . '>';\n\t\tprint_icon( $t_icon[3], '', $t_icon[4] );\n\t\techo '</a> ';\n\t}\n?>\n\n\t</td>\n</tr>\n</table>\n</form>\n\n<?php\n$t_form_url = 'print_all_bug_page.php';\nif( filter_is_temporary( $t_filter ) ) {\n\t$t_form_url .='?' . filter_get_temporary_key_param( $t_filter );\n}\n?>\n<form method=\"post\" action=\"<?php echo $t_form_url ?>\">\n<?php # CSRF protection not required here - form does not result in modifications ?>\n\n<table id=\"buglist\" class=\"table table-striped table-bordered table-condensed no-margin\">\n<tr>\n    <td class=\"bold bigger-110\" colspan=\"<?php echo $t_num_of_columns / 2 + $t_num_of_columns % 2; ?>\">\n\t\t<?php\n\t\t\techo lang_get( 'viewing_bugs_title' );\n\n\t\t\tif( $t_row_count > 0 ) {\n\t\t\t\t$v_start = $f_offset+1;\n\t\t\t\t$v_end   = $f_offset+$t_row_count;\n\t\t\t} else {\n\t\t\t\t$v_start = 0;\n\t\t\t\t$v_end   = 0;\n\t\t\t}\n\t\t\techo '( ' . $v_start . ' - ' . $v_end . ' )';\n\t\t?>\n\t</td>\n<tr>\n\t</td>\n</tr>\n<tr class=\"row-category\">\n\t<?php\n\t\t$t_sort_properties = filter_get_visible_sort_properties_array( $t_filter, COLUMNS_TARGET_PRINT_PAGE );\n\t\tforeach( $t_columns as $t_column ) {\n\t\t\thelper_call_custom_function( 'print_column_title', array( $t_column, COLUMNS_TARGET_PRINT_PAGE, $t_sort_properties ) );\n\t\t}\n\t?>\n</tr>\n<tr class=\"spacer\">\n\t<td colspan=\"<?php echo $t_num_of_columns ?>\"></td>\n</tr>\n</thead>\n\n<tbody>\n<?php\n\tfor( $i=0; $i < $t_row_count; $i++ ) {\n\t\t$t_row = $t_result[$i];\n\n\t\tif( isset( $t_bug_arr_sort[ $t_row->id ] ) || ( $t_show_flag==0 ) ) {\n?>\n<tr>\n<?php\n\t\t\tforeach( $t_columns as $t_column ) {\n\t\t\t\thelper_call_custom_function( 'print_column_value', array( $t_column, $t_row, COLUMNS_TARGET_PRINT_PAGE ) );\n\t\t\t}\n?>\n</tr>\n<?php\n\t\t} # isset_loop\n\t} # for_loop\n?>\n<tr class=\"spacer\">\n    <td colspan=\"<?php echo $t_num_of_columns ?>\"></td>\n</tr>\n<tr>\n    <td colspan=\"<?php echo $t_num_of_columns ?>\">\n        <input type=\"hidden\" name=\"show_flag\" value=\"1\" />\n        <input type=\"submit\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'hide_button' ) ?>\" />\n    </td>\n</tr>\n</table>\n</form>\n<?php\nlayout_body_javascript();\nhtml_body_end();\nhtml_end();\n"
        },
        {
          "name": "print_all_bug_page_word.php",
          "type": "blob",
          "size": 16.380859375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Word 2000 export page\n * The bugs displayed in print_all_bug_page.php are saved in a .doc file\n * The IE icon allows to see or directly print the same result\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses bugnote_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses date_api.php\n * @uses file_api.php\n * @uses filter_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses http_api.php\n * @uses lang_api.php\n * @uses prepare_api.php\n * @uses print_api.php\n * @uses profile_api.php\n * @uses project_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'bugnote_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'date_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'http_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'prepare_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'profile_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\n\nauth_ensure_user_authenticated();\naccess_ensure_project_level( config_get( 'print_reports_threshold' ) );\n\n$f_type_page\t= gpc_get_string( 'type_page', 'word' );\n$f_search\t\t= gpc_get_string( 'search', false ); # @todo need a better default\n$f_offset\t\t= gpc_get_int( 'offset', 0 );\n$f_export\t\t= gpc_get_string( 'export' );\n$f_show_flag\t= gpc_get_bool( 'show_flag' );\n\nhelper_begin_long_process();\n\n# word or html export\nif( $f_type_page != 'html' ) {\n\t$t_export_title = helper_get_default_export_filename( '' );\n\t$t_export_title = preg_replace( '/[\\/:*?\"<>|]/', '', $t_export_title );\n\t$t_export_title .= '.doc';\n\n\t# Make sure that IE can download the attachments under https.\n\theader( 'Pragma: public' );\n\n\theader( 'Content-Type: application/msword' );\n\n\thttp_content_disposition_header( $t_export_title );\n}\n\n# This is where we used to do the entire actual filter ourselves\n$t_page_number = gpc_get_int( 'page_number', 1 );\n$t_per_page = -1;\n$t_bug_count = null;\n$t_page_count = null;\n\n$t_result = filter_get_bug_rows( $t_page_number, $t_per_page, $t_page_count, $t_bug_count );\n$t_row_count = count( $t_result );\n\n# Headers depending on intended output\nif( $f_type_page == 'html' ) {\n\tlayout_page_header();\n} else {\n\techo '<html xmlns:o=\"urn:schemas-microsoft-com:office:office\"\n\t\txmlns:w=\"urn:schemas-microsoft-com:office:word\"\n\t\txmlns=\"http://www.w3.org/TR/REC-html40\">\n\t\t<head><meta charset=\"utf-8\"></head>';\n\techo '<body>';\n}\n\n$f_bug_arr = explode( ',', $f_export );\n$t_count_exported = 0;\n$t_date_format = config_get( 'normal_date_format' );\n$t_short_date_format = config_get( 'short_date_format' );\n\n$t_lang_bug_view_title = lang_get( 'bug_view_title' );\n$t_lang_id = lang_get( 'id' );\n$t_lang_category = lang_get( 'category' );\n$t_lang_severity = lang_get( 'severity' );\n$t_lang_reproducibility = lang_get( 'reproducibility' );\n$t_lang_date_submitted = lang_get( 'date_submitted' );\n$t_lang_last_update = lang_get( 'last_update' );\n$t_lang_reporter = lang_get( 'reporter' );\n$t_lang_assigned_to = lang_get( 'assigned_to' );\n$t_lang_platform = lang_get( 'platform' );\n$t_lang_due_date = lang_get( 'due_date' );\n$t_lang_os = lang_get( 'os' );\n$t_lang_os_build = lang_get( 'os_build' );\n$t_lang_fixed_in_version = lang_get( 'fixed_in_version' );\n$t_lang_resolution = lang_get( 'resolution' );\n$t_lang_priority = lang_get( 'priority' );\n$t_lang_product_build = lang_get( 'product_build' );\n$t_lang_eta = lang_get( 'eta' );\n$t_lang_status = lang_get( 'status' );\n$t_lang_product_version = lang_get( 'product_version' );\n$t_lang_no_bugnotes_msg = lang_get( 'no_bugnotes_msg' );\n$t_lang_projection = lang_get( 'projection' );\n$t_lang_target_version = lang_get( 'target_version' );\n$t_lang_summary = lang_get( 'summary' );\n$t_lang_description = lang_get( 'description' );\n$t_lang_steps_to_reproduce = lang_get( 'steps_to_reproduce' );\n$t_lang_additional_information = lang_get( 'additional_information' );\n$t_lang_bug_notes_title = lang_get( 'bug_notes_title' );\n$t_lang_system_profile = lang_get( 'profile_description' );\n$t_lang_attached_files = lang_get( 'attached_files' );\n$t_lang_tags = lang_get( 'tags' );\n\n$t_fields = config_get( 'bug_view_page_fields' );\n$t_fields = columns_filter_disabled( $t_fields );\n\n$t_show_tags = in_array( 'tags', $t_fields ) && access_has_global_level( config_get( 'tag_view_threshold' ) );\n\n$t_current_user_id = auth_get_current_user_id();\n$t_user_bugnote_order = user_pref_get_pref( $t_current_user_id, 'bugnote_order' );\n\nfor( $j=0; $j < $t_row_count; $j++ ) {\n\t$t_bug = $t_result[$j];\n\t$t_id = $t_bug->id;\n\n\tif( $j % 50 == 0 ) {\n\t\t# to save ram as report will list data once, clear cache after 50 bugs\n\t\tbug_clear_cache_all();\n\t\tbugnote_clear_cache();\n\t}\n\n\t# display the available and selected bugs\n\tif( in_array( $t_id, $f_bug_arr ) || !$f_show_flag ) {\n\t\tif( $t_count_exported > 0 ) {\n\t\t\techo '<br style=\"mso-special-character: line-break; page-break-before: always\" />';\n\t\t}\n\n\t\t$t_count_exported++;\n\n\t\t$t_last_updated = date( $g_short_date_format, $t_bug->last_updated );\n\n\t\t# grab the project name\n\t\t$t_project_name = project_get_field( $t_bug->project_id, 'name' );\n\t\t$t_category_name = category_full_name( $t_bug->category_id, false );\n?>\n<table class=\"table table-striped table-bordered table-condensed no-margin small\">\n<tr>\n\t<td class=\"bold\" colspan=\"6\">\n\t\t<?php echo $t_lang_bug_view_title ?>\n\t</td>\n</tr>\n<tr class=\"spacer\" >\n\t<td colspan=\"6\"></td>\n</tr>\n<tr class=\"bold\">\n\t<td width=\"16%\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_id ) ?>\n\t</td>\n\t<td width=\"16%\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_category ) ?>\n\t</td>\n\t<td width=\"16%\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_severity ) ?>\n\t</td>\n\t<td width=\"16%\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_reproducibility ) ?>\n\t</td>\n\t<td width=\"16%\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_date_submitted ) ?>\n\t</td>\n\t<td width=\"16%\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_last_update ) ?>\n\t</td>\n</tr>\n<tr>\n\t<td>\n\t\t<?php echo $t_id ?>\n\t</td>\n\t<td>\n\t\t<?php echo '[' . string_display_line( $t_project_name ) . '] ' . string_display_line( $t_category_name ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo get_enum_element( 'severity', $t_bug->severity, auth_get_current_user_id(), $t_bug->project_id ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo get_enum_element( 'reproducibility', $t_bug->reproducibility, auth_get_current_user_id(), $t_bug->project_id ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo date( $t_date_format, $t_bug->date_submitted ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo date( $t_date_format, $t_bug->last_updated ) ?>\n\t</td>\n</tr>\n<tr class=\"spacer\" >\n\t<td colspan=\"6\"></td>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_reporter ) ?>\n\t</td>\n\t<td>\n\t\t<?php print_user( $t_bug->reporter_id, false ) ?>\n\t</td>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_platform ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo string_display_line( $t_bug->platform ) ?>\n\t</td>\n<?php if( access_has_bug_level( config_get( 'due_date_view_threshold' ), $t_id ) ) { ?>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_due_date ) ?>\n\t</td>\n<?php\n\t\tif( bug_is_overdue( $t_id ) ) { ?>\n\t\t<td class=\"bold\">\n<?php\n\t\t} else { ?>\n\t\t<td>\n<?php\n\t\t}\n\t\tif( !date_is_null( $t_bug->due_date ) ) {\n\t\t\t\techo date( $t_short_date_format, $t_bug->due_date );\n\t\tprint \"\\t\\t</td>\\n\";\n\t\t}\n\t} else {\n?>\n\t<td colspan=\"2\">&#160;</td>\n<?php } ?>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_assigned_to ) ?>\n\t</td>\n\t<td>\n\t\t<?php\n\t\t\tif( access_has_bug_level( config_get( 'view_handler_threshold' ), $t_id ) ) {\n\t\t\t\tprint_user( $t_bug->handler_id, false );\n\t\t\t}\n\t\t?>\n\t</td>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_os ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo string_display_line( $t_bug->os ) ?>\n\t</td>\n\t<td colspan=\"2\">&#160;</td>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_priority ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo get_enum_element( 'priority', $t_bug->priority, auth_get_current_user_id(), $t_bug->project_id ) ?>\n\t</td>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_os_build ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo string_display_line( $t_bug->os_build ) ?>\n\t</td>\n\t<td colspan=\"2\">&#160;</td>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_status ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo get_enum_element( 'status', $t_bug->status, auth_get_current_user_id(), $t_bug->project_id ) ?>\n\t</td>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_product_version ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo string_display_line( $t_bug->version ) ?>\n\t</td>\n\t<td colspan=\"2\">&#160;</td>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_product_build ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo string_display_line( $t_bug->build ) ?>\n\t</td>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_resolution ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo get_enum_element( 'resolution', $t_bug->resolution, auth_get_current_user_id(), $t_bug->project_id ) ?>\n\t</td>\n\t<td colspan=\"2\">&#160;</td>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_projection ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo get_enum_element( 'projection', $t_bug->projection, auth_get_current_user_id(), $t_bug->project_id ) ?>\n\t</td>\n\t<td class=\"bold\">\n\t\t&#160;\n\t</td>\n\t<td>\n\t\t&#160;\n\t</td>\n\t<td colspan=\"2\">&#160;</td>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_eta ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo get_enum_element( 'eta', $t_bug->eta, auth_get_current_user_id(), $t_bug->project_id ) ?>\n\t</td>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_fixed_in_version ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo string_display_line( $t_bug->fixed_in_version ) ?>\n\t</td>\n\t<td colspan=\"2\">&#160;</td>\n\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t&#160;\n\t</td>\n\t<td>\n\t\t&#160;\n\t</td>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_target_version ) ?>\n\t</td>\n\t<td>\n\t\t<?php echo string_display_line( $t_bug->target_version ) ?>\n\t</td>\n\t<td colspan=\"2\">&#160;</td>\n</tr>\n<?php\n$t_related_custom_field_ids = custom_field_get_linked_ids( $t_bug->project_id );\nforeach( $t_related_custom_field_ids as $t_custom_field_id ) {\n\t# Don't display the field if user does not have read access to it\n\tif( !custom_field_has_read_access_by_project_id( $t_custom_field_id, $t_bug->project_id ) ) {\n\t\tcontinue;\n\t}\n\n\t$t_def = custom_field_get_definition( $t_custom_field_id );\n?>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo string_attribute( sprintf( lang_get( 'label' ), lang_get_defaulted( $t_def['name'] ) ) ) ?>\n\t</td>\n\t<td colspan=\"5\">\n\t\t<?php print_custom_field_value( $t_def, $t_custom_field_id, $t_id ); ?>\n\t</td>\n</tr>\n<?php\n}       # foreach\n?>\n<tr class=\"spacer\" >\n\t<td colspan=\"6\"></td>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_summary ) ?>\n\t</td>\n\t<td colspan=\"5\">\n\t\t<?php echo string_display_line_links( $t_bug->summary ) ?>\n\t</td>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_description ) ?>\n\t</td>\n\t<td colspan=\"5\">\n\t\t<?php echo string_display_links( $t_bug->description ) ?>\n\t</td>\n</tr>\n<?php if( $t_show_tags ) { ?>\n<tr>\n\t<td class=\"print\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_tags ) ?>\n\t</td>\n\t<td colspan=\"5\">\n\t\t<?php echo string_display_links( tag_bug_get_all( $t_bug->id ) ) ?>\n\t</td>\n</tr>\n<?php }?>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_steps_to_reproduce ) ?>\n\t</td>\n\t<td colspan=\"5\">\n\t\t<?php echo string_display_links( $t_bug->steps_to_reproduce ) ?>\n\t</td>\n</tr>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_additional_information ) ?>\n\t</td>\n\t<td colspan=\"5\">\n\t\t<?php echo string_display_links( $t_bug->additional_information ) ?>\n\t</td>\n</tr>\n<?php\n\t# account profile description\n\tif( $t_bug->profile_id > 0 ) {\n\t\t$t_profile = new ProfileData( $t_bug->profile_id );\n\t\t$t_profile_description = string_display( $t_profile->description );\n\n?>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo $t_lang_system_profile ?>\n\t</td>\n\t<td colspan=\"5\">\n\t\t<?php echo $t_profile_description ?>\n\t</td>\n</tr>\n<?php\n} # profile description\n?>\n<tr>\n\t<td class=\"bold\">\n\t\t<?php echo sprintf( lang_get( 'label' ), $t_lang_attached_files ) ?>\n\t</td>\n\t<td colspan=\"5\">\n\t\t<?php\n\t\t\t$t_attachments = file_get_visible_attachments( $t_id );\n\t\t\t$t_first_attachment = true;\n\t\t\t$t_path = config_get_global( 'path' );\n\n\t\t\tforeach ( $t_attachments as $t_attachment  ) {\n\t\t\t\tif( $t_first_attachment ) {\n\t\t\t\t\t$t_first_attachment = false;\n\t\t\t\t} else {\n\t\t\t\t\techo '<br />';\n\t\t\t\t}\n\n\t\t\t\t$c_filename = string_display_line( $t_attachment['display_name'] );\n\t\t\t\t$c_download_url = htmlspecialchars( $t_attachment['download_url'] );\n\t\t\t\t$c_filesize = number_format( $t_attachment['size'] );\n\t\t\t\t$c_date_added = date( $t_date_format, $t_attachment['date_added'] );\n\t\t\t\techo $c_filename . ' (' . $c_filesize . ' ' . lang_get( 'bytes' )\n\t\t\t\t\t. ') <span class=\"italic-small\">' . $c_date_added . '</span><br />'\n\t\t\t\t\t. string_display_line_links( $t_path . $c_download_url );\n\n\t\t\t\tif( $t_attachment['preview'] && $t_attachment['type'] == 'image' && $f_type_page == 'html' ) {\n\t\t\t\t\techo '<br /><img src=\"', $c_download_url, '\" alt=\"', $t_attachment['alt'], '\" /><br />';\n\t\t\t\t}\n\t\t\t}\n\t\t?>\n\t</td>\n</tr>\n\n<tr class=\"spacer\"><td colspan=\"6\"></td></tr>\n</table>\n\n<?php\n$t_user_bugnote_limit = 0;\n\n$t_bugnotes = bugnote_get_all_visible_bugnotes( $t_id, $t_user_bugnote_order, $t_user_bugnote_limit );\n?>\n\n<table class=\"table table-striped table-bordered table-condensed no-margin small\">\n<?php\n\t# no bugnotes\n\tif( 0 == count( $t_bugnotes ) ) {\n\t?>\n<tr>\n\t<td class=\"bold\" colspan=\"2\">\n\t\t<?php echo $t_lang_no_bugnotes_msg ?>\n\t</td>\n</tr>\n<?php\n\t} else { # print bugnotes ?>\n<tr>\n\t<td class=\"bold\" colspan=\"2\">\n\t\t\t<?php echo $t_lang_bug_notes_title ?>\n\t</td>\n</tr>\n\t<?php\n\t\tforeach ( $t_bugnotes as $t_bugnote ) {\n\t\t\t# prefix all bugnote data with v3_\n\t\t\t$t_date_submitted = date( $t_date_format, $t_bugnote->date_submitted );\n\t\t\t$t_last_modified = date( $t_date_format, $t_bugnote->last_modified );\n\n\t\t\t# grab the bugnote text and id and prefix with v3_\n\t\t\t$t_note = string_display_links( $t_bugnote->note );\n\t?>\n<tr>\n\t<td width=\"12%\">\n\t\t\t\t(<?php echo bugnote_format_id( $t_bugnote->id ) ?>)\n\t\t\t<br />\n\t\t\t\t<?php print_user( $t_bugnote->reporter_id, false ) ?>&#160;&#160;&#160;\n\t\t\t<br />\n\t\t\t\t<?php echo $t_date_submitted ?>&#160;&#160;&#160;\n\t\t\t\t<?php if( $t_bugnote->date_submitted != $t_bugnote->last_modified ) {\n\t\t\t\t\techo '<br />(' . lang_get( 'last_edited') . lang_get( 'word_separator' ) . $t_last_modified . ')';\n\t\t\t\t} ?>\n\t\t\t</td>\n\t<td>\n<?php\n\t\t\t\t\tswitch ( $t_bugnote->note_type ) {\n\t\t\t\t\t\tcase REMINDER:\n\t\t\t\t\t\t\techo lang_get( 'reminder_sent_to' ) . ': ';\n\t\t\t\t\t\t\t$t_note_attr = mb_substr( $t_bugnote->note_attr, 1, mb_strlen( $t_bugnote->note_attr ) - 2 );\n\t\t\t\t\t\t\t$t_to = array();\n\t\t\t\t\t\t\tforeach ( explode( '|', $t_note_attr ) as $t_recipient ) {\n\t\t\t\t\t\t\t\t$t_to[] = prepare_user_name( $t_recipient );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\techo implode( ', ', $t_to ) . '<br />';\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\techo string_display_links( $t_bugnote->note );\n\t\t\t\t\t}\n\t\t\t\t?>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr class=\"spacer\"><td colspan=\"2\"></td></tr>\n<?php\n\t\t} # end for\n\t} # end else\n?>\n</table>\n\n<?php # Bugnotes END ?>\n\n\n<?php\n\t\tif( $f_type_page != 'html' ) {\n\t\t\techo '<hr>';\n\t\t}\n\t} # end in_array\n}  # end main loop\n\nlayout_body_javascript();\nhtml_body_end();\nhtml_end();\n"
        },
        {
          "name": "proj_doc_add.php",
          "type": "blob",
          "size": 2.1748046875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add documentation to project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses error_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'proj_doc_add' );\n\n# Check if project documentation feature is enabled.\nif( OFF == config_get( 'enable_project_documentation' ) ) {\n\taccess_denied();\n}\n\naccess_ensure_project_level( config_get( 'upload_project_file_threshold' ) );\n\n$f_title = gpc_get_string( 'title' );\n$f_description = gpc_get_string( 'description' );\n$f_file = gpc_get_file( 'file' );\n\nif( is_blank( $f_title ) ) {\n\terror_parameters( lang_get( 'title' ) );\n\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n}\n\nfile_add( 0, $f_file, 'project', $f_title, $f_description );\n\nform_security_purge( 'proj_doc_add' );\n\nprint_header_redirect( 'proj_doc_page.php' );\n"
        },
        {
          "name": "proj_doc_add_page.php",
          "type": "blob",
          "size": 3.4482421875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add documentation to project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'utility_api.php' );\n\n# Check if project documentation feature is enabled.\nif( OFF == config_get( 'enable_project_documentation' ) ||\n\t!file_is_uploading_enabled() ||\n\t!file_allow_project_upload() ) {\n\taccess_denied();\n}\n\naccess_ensure_project_level( config_get( 'upload_project_file_threshold' ) );\n\n$t_max_file_size = file_get_max_file_size();\n\nlayout_page_header();\n\nlayout_page_begin( 'proj_doc_page.php' );\n\nprint_doc_menu('proj_doc_add_page.php');\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n<div class=\"form-container\">\n<form method=\"post\" enctype=\"multipart/form-data\" action=\"proj_doc_add.php\">\n\t<?php echo form_security_field( 'proj_doc_add' ) ?>\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-upload', 'ace-icon' ); ?>\n\t\t\t\t<?php echo lang_get( 'upload_file_title' ) ?>\n\t\t\t</h4>\n\t\t</div>\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-condensed table-striped\">\n<tr>\n\t<th class=\"category\" width=\"25%\">\n\t\t<span class=\"required\">*</span> <?php echo lang_get( 'title' ) ?>\n\t</th>\n\t<td width=\"75%\">\n\t\t<input type=\"text\" name=\"title\" class=\"input-sm\" size=\"70\" maxlength=\"250\" required />\n\t</td>\n</tr>\n<tr>\n\t<th class=\"category\">\n\t\t<?php echo lang_get( 'description' ) ?>\n\t</th>\n\t<td>\n\t\t<textarea class=\"form-control\" name=\"description\" cols=\"60\" rows=\"7\"></textarea>\n\t</td>\n</tr>\n<tr>\n\t<td class=\"category\">\n\t\t<span class=\"required\">*</span> <?php echo lang_get( 'select_file' ); ?>\n\t\t<br />\n\t\t<?php print_max_filesize( $t_max_file_size ); ?>\n\t</td>\n\t<td>\n\t\t<input type=\"hidden\" name=\"max_file_size\" value=\"<?php echo $t_max_file_size ?>\" required />\n\t\t<input name=\"file\" type=\"file\" size=\"70\" />\n\t</td>\n</tr>\n</table>\n\t\t</div>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<span class=\"required pull-right\"> * <?php echo lang_get('required') ?></span>\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get('upload_file_button') ?>\"/>\n\t\t</div>\n\t\t</div>\n\t</div>\n</form>\n</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "proj_doc_delete.php",
          "type": "blob",
          "size": 2.3740234375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Delete Project Documentation\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses database_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\n\nform_security_validate( 'proj_doc_delete' );\n\n# Check if project documentation feature is enabled.\nif( OFF == config_get( 'enable_project_documentation' ) ) {\n\taccess_denied();\n}\n\n$f_file_id = gpc_get_int( 'file_id' );\n\n$t_project_id = file_get_field( $f_file_id, 'project_id', 'project' );\n\naccess_ensure_project_level( config_get( 'upload_project_file_threshold' ), $t_project_id );\n\n$t_query = 'SELECT title FROM {project_file} WHERE id=' . db_param();\n$t_result = db_query( $t_query, array( $f_file_id ) );\n$t_title = db_result( $t_result );\n\n# Confirm with the user\nhelper_ensure_confirmed(\n\tsprintf( lang_get( 'confirm_file_delete_msg' ),\n\t\tstring_display_line( $t_title )\n\t),\n\tlang_get( 'file_delete_button' )\n);\n\nfile_delete( $f_file_id, 'project' );\n\nform_security_purge( 'proj_doc_delete' );\n\nprint_header_redirect( 'proj_doc_page.php' );\n"
        },
        {
          "name": "proj_doc_edit_page.php",
          "type": "blob",
          "size": 4.947265625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Edit Project Documentation\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses database_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\n# Check if project documentation feature is enabled.\nif( OFF == config_get( 'enable_project_documentation' ) ||\n\t!file_is_uploading_enabled() ||\n\t!file_allow_project_upload() ) {\n\taccess_denied();\n}\n\n$t_file_id = gpc_get_int( 'file_id' );\n\n$t_project_id = file_get_field( $t_file_id, 'project_id', 'project' );\n\naccess_ensure_project_level( config_get( 'upload_project_file_threshold' ), $t_project_id );\n\n$t_query = 'SELECT * FROM {project_file} WHERE id=' . db_param();\n$t_result = db_query( $t_query, array( $t_file_id ) );\n$t_row = db_fetch_array( $t_result );\nextract( $t_row, EXTR_PREFIX_ALL, 'v' );\n\n$v_title = string_attribute( $v_title );\n$v_description = string_textarea( $v_description );\n\n$t_max_file_size = file_get_max_file_size();\n\nlayout_page_header();\n\nlayout_page_begin( 'proj_doc_page.php' );\n\nprint_doc_menu();\n\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n<div class=\"form-container\">\n<form method=\"post\" enctype=\"multipart/form-data\" action=\"proj_doc_update.php\">\n<?php echo form_security_field( 'proj_doc_update' ) ?>\n<input type=\"hidden\" name=\"file_id\" value=\"<?php echo $t_file_id ?>\"/>\n<div class=\"widget-box widget-color-blue2\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-edit', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get('upload_file_title') ?>\n\t\t</h4>\n\t</div>\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-condensed table-striped\">\n<tr>\n\t<th class=\"category\" width=\"20%\">\n\t\t<span class=\"required\">*</span> <?php echo lang_get( 'title' ) ?>\n\t</th>\n\t<td width=\"80%\">\n\t\t<input type=\"text\" name=\"title\" class=\"input-sm\" size=\"70\" maxlength=\"250\" value=\"<?php echo $v_title ?>\" required />\n\t</td>\n</tr>\n<tr>\n\t<th class=\"category\">\n\t\t<?php echo lang_get( 'description' ) ?>\n\t</th>\n\t<td>\n\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t<textarea class=\"form-control\" name=\"description\" cols=\"60\" rows=\"7\">\n<?php echo $v_description ?>\n</textarea>\n\t</td>\n</tr>\n<tr>\n\t<th class=\"category\">\n\t\t<?php echo lang_get( 'filename' ) ?>\n\t</th>\n\t<td>\n\t\t<?php\n\t\t\t$t_href = '<a href=\"file_download.php?file_id='.$v_id.'&amp;type=doc\">';\n\t\t\techo $t_href;\n\t\t\tprint_file_icon( $v_filename );\n\t\t\techo '</a>&#160;' . $t_href . string_html_specialchars( file_get_display_name( $v_filename ) ) . '</a>';\n\t\t?>\n\t</td>\n</tr>\n<tr>\n\t<td class=\"category\">\n\t\t<?php echo lang_get( 'select_file' ); ?>\n\t\t<br />\n\t\t<?php print_max_filesize( $t_max_file_size ); ?>\n\t</td>\n\t<td>\n\t\t<input type=\"hidden\" name=\"max_file_size\" value=\"<?php echo $t_max_file_size ?>\" />\n\t\t<input name=\"file\" type=\"file\" size=\"70\" />\n\t</td>\n<tr>\n</table>\n</div>\n</div>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<span class=\"required pull-right\"> * <?php echo lang_get('required') ?></span>\n\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\"\n\t\t\tvalue=\"<?php echo lang_get('file_update_button') ?>\"/>\n\t</div>\n</div>\n</div>\n</form>\n</div>\n\n\t<div class=\"space-10\"></div>\n\t<form method=\"post\" action=\"proj_doc_delete.php\">\n\t<?php echo form_security_field( 'proj_doc_delete' ) ?>\n\t<input type=\"hidden\" name=\"file_id\" value=\"<?php echo $t_file_id ?>\" />\n\t<input type=\"hidden\" name=\"title\" value=\"<?php echo $v_title ?>\" />\n\t<input type=\"submit\" class=\"btn btn-sm btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'file_delete_button' ) ?>\" />\n\t</form>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "proj_doc_page.php",
          "type": "blob",
          "size": 6.091796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Project Document Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses file_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\n\n$f_project_id = gpc_get_int( 'project_id', helper_get_current_project() );\n\n# Check if project documentation feature is enabled.\nif( OFF == config_get( 'enable_project_documentation' ) || !file_is_uploading_enabled() ) {\n\taccess_denied();\n}\n\n# Override the current page to make sure we get the appropriate project-specific configuration\n$g_project_override = $f_project_id;\n\n$t_user_id = auth_get_current_user_id();\n$t_pub = VS_PUBLIC;\n$t_priv = VS_PRIVATE;\n$t_admin = config_get_global( 'admin_site_threshold' );\n\nif( $f_project_id == ALL_PROJECTS ) {\n\t# Select all the projects that the user has access to\n\t$t_projects = user_get_accessible_projects( $t_user_id );\n} else {\n\t# Select the specific project\n\t$t_projects = array( $f_project_id );\n}\n\n$t_projects[] = ALL_PROJECTS; # add \"ALL_PROJECTS to the list of projects to fetch\n\n$t_reqd_access = config_get( 'view_proj_doc_threshold' );\nif( is_array( $t_reqd_access ) ) {\n\tif( 1 == count( $t_reqd_access ) ) {\n\t\t$t_access_clause = '= ' . array_shift( $t_reqd_access ) . ' ';\n\t} else {\n\t\t$t_access_clause = 'IN (' . implode( ',', $t_reqd_access ) . ')';\n\t}\n} else {\n\t$t_access_clause = '>= ' . $t_reqd_access . ' ';\n}\n\n$t_query = 'SELECT pft.id, pft.project_id, pft.filename, pft.filesize, pft.title, pft.description, pft.date_added\n\t\t\tFROM {project_file} pft\n\t\t\t\tLEFT JOIN {project} pt ON pft.project_id = pt.id\n\t\t\t\tLEFT JOIN {project_user_list} pult\n\t\t\t\t\tON pft.project_id = pult.project_id AND pult.user_id = ' . db_param() . '\n\t\t\t\tLEFT JOIN {user} ut ON ut.id = ' . db_param() . '\n\t\t\tWHERE pft.project_id in (' . implode( ',', $t_projects ) . ') AND\n\t\t\t\t( ( ( pt.view_state = ' . db_param() . ' OR pt.view_state is null ) AND pult.user_id is null AND ut.access_level ' . $t_access_clause . ' ) OR\n\t\t\t\t\t( ( pult.user_id = ' . db_param() . ' ) AND ( pult.access_level ' . $t_access_clause . ' ) ) OR\n\t\t\t\t\t( ut.access_level >= ' . db_param() . ' ) )\n\t\t\tORDER BY pt.name ASC, pft.title ASC';\n$t_result = db_query( $t_query, array( $t_user_id, $t_user_id, $t_pub, $t_user_id, $t_admin ) );\n\nlayout_page_header( lang_get( 'docs_link' ) );\n\nlayout_page_begin( 'proj_doc_page.php' );\n\nprint_doc_menu( 'proj_doc_page.php' );\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-file', 'ace-icon' ); ?>\n\t\t<?php echo lang_get('project_documentation_title') ?>\n\t</h4>\n</div>\n\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-condensed table-striped\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th><?php echo lang_get( 'filename' ); ?></th>\n\t\t\t<th><?php echo lang_get( 'description' ); ?></th>\n\t\t\t<th><?php echo lang_get( 'project_name' ); ?></th>\n\t\t\t<th><?php echo lang_get( 'date_created' ); ?></th>\n\t\t\t<th><?php echo lang_get( 'actions' ); ?></th>\n\t\t</tr>\n\t</thead>\n<?php\n$t_form_token_delete = form_security_token( 'proj_doc_delete' );\n\n$i = 0;\nwhile( $t_row = db_fetch_array( $t_result ) ) {\n\t$i++;\n\textract( $t_row, EXTR_PREFIX_ALL, 'v' );\n\t$t_download_url = \"file_download.php?file_id=$v_id&amp;type=doc\";\n\t$t_filesize = number_format( $v_filesize ) . ' ' . lang_get( 'bytes' );\n\t$t_date_added = date( config_get( 'normal_date_format' ), $v_date_added );\n?>\n<tr>\n\t<td>\n\t\t<a href=\"<?php echo $t_download_url ?>\">\n\t\t\t<?php print_file_icon( $v_filename ); ?>\n\t\t</a>\n\t\t<?php\n\t\t\t/** @noinspection HtmlUnknownTarget */\n\t\t\tprintf( '<a href=\"%s\">%s</a> (%s)',\n\t\t\t\t$t_download_url,\n\t\t\t\tstring_display_line( $v_title ),\n\t\t\t\t$t_filesize\n\t\t\t);\n\t\t?>\n\t</td>\n\t<td>\n\t\t<?php echo string_display_links( $v_description ); ?>\n\t</td>\n\t<td>\n\t\t<?php\n\t\t\tif( $v_project_id == ALL_PROJECTS ) {\n\t\t\t\techo lang_get( 'all_projects' );\n\t\t\t} elseif( $v_project_id != $f_project_id ) {\n\t\t\t\techo string_attribute( project_get_name( $v_project_id ) );\n\t\t\t}\n\t\t?>\n\t</td>\n\t<td>\n\t\t<?php echo $t_date_added; ?>\n\t</td>\n\t<td class=\"center\">\n<?php\n\t\tif( access_has_project_level( config_get( 'upload_project_file_threshold', null, null, $v_project_id ), $v_project_id ) ) {\n\t\t\tprint_link_button( 'proj_doc_edit_page.php?file_id=' . $v_id, lang_get( 'edit' ), 'btn-xs' );\n\t\t\techo '&#160;';\n\t\t\tprint_form_button( 'proj_doc_delete.php',\n\t\t\t\tlang_get( 'delete' ),\n\t\t\t\t['file_id' => $v_id],\n\t\t\t\t$t_form_token_delete\n\t\t\t);\n\t\t}\n?>\n\t</td>\n</tr>\n<?php\n} # end for loop\n?>\n</table>\n</div>\n</div>\n</div>\n</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "proj_doc_update.php",
          "type": "blob",
          "size": 4.572265625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update Project Document\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses file_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'file_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'proj_doc_update' );\n\n# Check if project documentation feature is enabled.\nif( OFF == config_get( 'enable_project_documentation' ) ||\n\t!file_is_uploading_enabled() ||\n\t!file_allow_project_upload() ) {\n\taccess_denied();\n}\n\n$f_file_id = gpc_get_int( 'file_id' );\n$f_title = gpc_get_string( 'title' );\n$f_description\t= gpc_get_string( 'description' );\n$f_file = gpc_get_file( 'file' );\n\n$t_project_id = file_get_field( $f_file_id, 'project_id', 'project' );\n\naccess_ensure_project_level( config_get( 'upload_project_file_threshold' ), $t_project_id );\n\nif( is_blank( $f_title ) ) {\n\terror_parameters( lang_get( 'title' ) );\n\ttrigger_error( ERROR_EMPTY_FIELD, ERROR );\n}\n\n# @todo (thraxisp) this code should probably be integrated into file_api to share methods used to store files\n\nif( isset( $f_file['tmp_name'] ) && is_uploaded_file( $f_file['tmp_name'] ) ) {\n\tfile_ensure_uploaded( $f_file );\n\n\t$t_file_name = $f_file['name'];\n\tif( strlen( $t_file_name ) > DB_FIELD_SIZE_FILENAME ) {\n\t\terror_parameters( $t_file_name );\n\t\ttrigger_error( ERROR_FILE_NAME_TOO_LONG, ERROR );\n\t}\n\n\t$t_project_id = helper_get_current_project();\n\n\t# grab the original file path and name\n\t$t_disk_file_name = file_get_field( $f_file_id, 'diskfile', 'project' );\n\t$t_file_path = dirname( $t_disk_file_name );\n\n\t# prepare variables for insertion\n\t$t_file_size = filesize( $f_file['tmp_name'] );\n\t$t_max_file_size = file_get_max_file_size();\n\tif( $t_file_size > $t_max_file_size ) {\n\t\ttrigger_error( ERROR_FILE_TOO_BIG, ERROR );\n\t}\n\n\t$t_method = config_get( 'file_upload_method' );\n\tswitch( $t_method ) {\n\t\tcase DISK:\n\t\t\tfile_ensure_valid_upload_path( $t_file_path );\n\n\t\t\tif( file_exists( $t_disk_file_name ) ) {\n\t\t\t\tfile_delete_local( $t_disk_file_name );\n\t\t\t}\n\t\t\tif( !move_uploaded_file( $f_file['tmp_name'], $t_disk_file_name ) ) {\n\t\t\t\ttrigger_error( ERROR_FILE_MOVE_FAILED, ERROR );\n\t\t\t}\n\t\t\tchmod( $t_disk_file_name, config_get( 'attachments_file_permissions' ) );\n\n\t\t\t$c_content = '';\n\t\t\tbreak;\n\t\tcase DATABASE:\n\t\t\t$c_content = db_prepare_binary_string( fread( fopen( $f_file['tmp_name'], 'rb' ), $f_file['size'] ) );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t# @todo Such errors should be checked in the admin checks\n\t\t\ttrigger_error( ERROR_GENERIC, ERROR );\n\t}\n\t$t_query = 'UPDATE {project_file}\n\t\tSET title=' . db_param() . ', description=' . db_param() . ', date_added=' . db_param() . ',\n\t\t\tfilename=' . db_param() . ', filesize=' . db_param() . ', file_type=' .db_param() . ', content=' .db_param() . '\n\t\t\tWHERE id=' . db_param();\n\t$t_result = db_query( $t_query, array( $f_title, $f_description, db_now(), $t_file_name, $t_file_size, $f_file['type'], $c_content, $f_file_id ) );\n} else {\n\t$t_query = 'UPDATE {project_file}\n\t\t\tSET title=' . db_param() . ', description=' . db_param() . '\n\t\t\tWHERE id=' . db_param();\n\t$t_result = db_query( $t_query, array( $f_title, $f_description, $f_file_id ) );\n}\n\nif( !$t_result ) {\n\ttrigger_error( ERROR_GENERIC, ERROR );\n}\n\nform_security_purge( 'proj_doc_update' );\n\nprint_header_redirect( 'proj_doc_page.php' );\n"
        },
        {
          "name": "query_store.php",
          "type": "blob",
          "size": 4.181640625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handler to store a filter\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses filter_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'query_store' );\n\nauth_ensure_user_authenticated();\ncompress_enable();\n\n$f_query_name = strip_tags( gpc_get_string( 'query_name' ) );\n$f_is_public = gpc_get_bool( 'is_public' );\n$f_all_projects = gpc_get_bool( 'all_projects' );\n\n$t_query_redirect_url = 'query_store_page.php';\n\n# We can't have a blank name\nif( is_blank( $f_query_name ) ) {\n\t$t_query_redirect_url = $t_query_redirect_url . '?error_msg='\n\t\t. urlencode( lang_get( 'query_blank_name' ) );\n\tprint_header_redirect( $t_query_redirect_url );\n}\n\n# mantis_filters_table.name has a length of 64. Not allowing longer.\nif( !filter_name_valid_length( $f_query_name ) ) {\n\t$t_query_redirect_url = $t_query_redirect_url . '?error_msg='\n\t\t. urlencode( lang_get( 'query_name_too_long' ) );\n\tprint_header_redirect( $t_query_redirect_url );\n}\n\n# Check and make sure they don't already have a\n# query with the same name\n$t_query_arr = filter_db_get_available_queries();\nforeach( $t_query_arr as $t_id => $t_name )\t{\n\tif( $f_query_name == $t_name ) {\n\t\t$t_query_redirect_url = $t_query_redirect_url . '?error_msg='\n\t\t\t. urlencode( lang_get( 'query_dupe_name' ) );\n\t\tprint_header_redirect( $t_query_redirect_url );\n\t\texit;\n\t}\n}\n\n$t_project_id = helper_get_current_project();\nif( $f_all_projects ) {\n\t$t_project_id = 0;\n}\n\n# Get the filter in use\n$t_filter = current_user_get_bug_filter();\n\n# named filters must not reference source query id\nif( isset( $t_filter['_source_query_id'] ) ) {\n\tunset( $t_filter['_source_query_id'] );\n}\n\n# Check that the user has permission to create stored filters\nif( !access_has_project_level( config_get( 'stored_query_create_threshold' ) ) ) {\n\taccess_denied();\n}\n\n# ensure that we're not making this filter public if we're not allowed\nif( $f_is_public && !access_has_project_level( config_get( 'stored_query_create_shared_threshold' ) ) ) {\n\taccess_denied();\n}\n\n$t_filter_string = filter_serialize( $t_filter );\n$t_new_row_id = filter_db_create_filter( $t_filter_string, auth_get_current_user_id(), $t_project_id, $f_query_name , $f_is_public );\n\nform_security_purge( 'query_store' );\n\nif( $t_new_row_id == -1 ) {\n\t$t_query_redirect_url = $t_query_redirect_url . '?error_msg='\n\t\t. urlencode( lang_get( 'query_store_error' ) );\n\tprint_header_redirect( $t_query_redirect_url );\n} else {\n\t# Build a redirect to view_all_set to load the filter that was saved.\n\t# This will make the filter name appear as selected in the filter selection box.\n\t$t_params = array(\n\t\t'type' => 3,\n\t\t'source_query_id' => $t_new_row_id\n\t);\n\tif( filter_is_temporary( $t_filter ) ) {\n\t\t$t_params['filter'] = filter_get_temporary_key( $t_filter );\n\t}\n\t$t_redirect = 'view_all_set.php?' . http_build_query( $t_params );\n\tprint_header_redirect( $t_redirect );\n}\n"
        },
        {
          "name": "query_store_page.php",
          "type": "blob",
          "size": 4.5166015625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Page to allow user to store a stored filter\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses filter_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\n\nauth_ensure_user_authenticated();\n\ncompress_enable();\n\nlayout_page_header();\n\nlayout_page_begin();\n?>\n<div class=\"col-md-12 col-xs-12\">\n<div id=\"save-filter\" class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-filter', 'ace-icon' ); ?>\n\t\t<?php echo lang_get( 'save_query' ) ?>\n\t</h4>\n</div>\n<?php\n$t_filter = current_user_get_bug_filter();\n# We are comparing filters as serialized stringsd\n# filter_serialize will remove runtime properties, so they can compare\n# @TODO cproensa, implement a better method to compare filters? is it used besides here?\n$t_query_to_store = filter_serialize( $t_filter );\n$t_query_arr = filter_db_get_available_queries();\n\n# Let's just see if any of the current filters are the\n# same as the one we're about the try and save\nforeach( $t_query_arr as $t_id => $t_name ) {\n\tif( filter_db_get_filter_string( $t_id ) == $t_query_to_store ) {\n\t\tprint lang_get( 'query_exists' ) . ' (' . $t_name . ')<br />';\n\t}\n}\n\n# Check for an error\n$t_error_msg = strip_tags( gpc_get_string( 'error_msg', '' ) );\nif( $t_error_msg != null ) {\n\tprint '<br />' . $t_error_msg . '<br /><br />';\n}\n?>\n<div class=\"widget-body\">\n\t<div class=\"widget-main center\">\n<form method=\"post\" action=\"query_store.php\" class=\"form-inline\">\n<?php\necho form_security_field( 'query_store' );\nif( filter_is_temporary( $t_filter ) ) {\n\techo '<input type=\"hidden\" name=\"filter\" value=\"' . filter_get_temporary_key( $t_filter ) . '\" />';\n}\n?>\n<div class=\"space-10\"></div>\n<label class=\"bold inline\"> <?php echo lang_get( 'query_name_label' ) . lang_get( 'word_separator' ); ?> </label>\n<input type=\"text\" name=\"query_name\" class=\"input-sm\" />\n<div class=\"space-10\"></div>\n<?php\nif( access_has_project_level( config_get( 'stored_query_create_shared_threshold' ) ) ) { ?>\n\t<div class=\"checkbox\">\n\t\t<label>\n\t\t\t<input type=\"checkbox\" class=\"ace\" name=\"is_public\" value=\"on\" />\n\t\t\t<span class=\"lbl padding-6\"><?php print lang_get( 'make_public' ); ?></span>\n\t\t</label>\n\t</div>\n\t&#160;&#160;&#160;&#160;\n<?php }\n?>\n<div class=\"checkbox\">\n\t<label>\n\t\t<input type=\"checkbox\" class=\"ace\" name=\"all_projects\" value=\"on\" <?php check_checked( ALL_PROJECTS == helper_get_current_project() ) ?> />\n\t\t<span class=\"lbl padding-6\"><?php print lang_get( 'all_projects' ); ?></span>\n\t</label>\n</div>\n\n<div class=\"space-10\"></div>\n\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php print lang_get( 'save_query' ); ?>\" />\n</form>\n<div class=\"space-10\"></div>\n<form action=\"view_all_bug_page.php\">\n<?php # CSRF protection not required here - form does not result in modifications\nif( filter_is_temporary( $t_filter ) ) {\n\techo '<input type=\"hidden\" name=\"filter\" value=\"' . filter_get_temporary_key( $t_filter ) . '\" />';\n}\n?>\n<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php print lang_get( 'go_back' ); ?>\" />\n</form>\n</div>\n</div>\n<?php\necho '</div>';\necho '</div>';\nlayout_page_end();\n"
        },
        {
          "name": "return_dynamic_filters.php",
          "type": "blob",
          "size": 4.1025390625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Return Dynamic Filters\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses custom_field_api.php\n * @uses error_api.php\n * @uses filter_api.php\n * @uses filter_constants_inc.php\n * @uses filter_form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n */\n\nuse Mantis\\Exceptions\\StateException;\n\n# Prevent output of HTML in the content if errors occur\ndefine( 'DISABLE_INLINE_ERROR_REPORTING', true );\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'filter_constants_inc.php' );\nrequire_api( 'filter_form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\n\nif( !auth_is_user_authenticated() ) {\n\ttrigger_error( ERROR_ACCESS_DENIED, ERROR );\n}\n\ncompress_enable();\n\n$f_filter_id = gpc_get( 'filter_id', null );\nif( null !== $f_filter_id ) {\n\t$t_filter = filter_get( $f_filter_id, null );\n\tif( null === $t_filter ) {\n\t\ttrigger_error( ERROR_ACCESS_DENIED, ERROR );\n\t}\n} else {\n\t$t_filter = current_user_get_bug_filter();\n}\n\n$f_view_type = gpc_get_string( 'view_type', $t_filter['_view_type'] );\n$t_filter['_view_type'] = $f_view_type;\n# call to filter_ensure_valid_filter to clean up after adding unsafe values from gpc vars\n$t_filter = filter_ensure_valid_filter( $t_filter );\n\n/**\n * Prepend headers to the dynamic filter forms that are sent as the response from this page.\n * @return void\n */\nfunction return_dynamic_filters_prepend_headers() {\n\tif( !headers_sent() ) {\n\t\theader( 'Content-Type: text/html; charset=utf-8' );\n\t}\n}\n\n$f_filter_target = gpc_get_string( 'filter_target' );\n$filter_target = mb_substr( $f_filter_target, 0, -7 ); # -7 for '_filter'\n$t_found = false;\ntry {\n\t$t_content = filter_form_get_input( $t_filter, $filter_target );\n} catch( StateException $e ) {\n\t$t_content = false;\n}\n\nif( false !== $t_content ) {\n\treturn_dynamic_filters_prepend_headers();\n\t$t_found = true;\n\techo $t_content;\n} else if( 'custom_field' == mb_substr( $f_filter_target, 0, 12 ) ) {\n\t# Check existence of custom field id, and if the user has access to read and filter by\n\t$t_custom_id = mb_substr( $f_filter_target, 13, -7 );\n\t$t_cfdef = custom_field_get_definition( $t_custom_id );\n\tif( $t_cfdef && access_has_any_project_level( $t_cfdef['access_level_r'] ) && $t_cfdef['filter_by'] ) {\n\t\t$t_found = true;\n\t\treturn_dynamic_filters_prepend_headers();\n\t\tprint_filter_custom_field( $t_custom_id, $t_filter );\n\t} else {\n\t\ttrigger_error( ERROR_ACCESS_DENIED, ERROR );\n\t}\n} else {\n\t$t_plugin_filters = filter_get_plugin_filters();\n\tforeach ( $t_plugin_filters as $t_field_name => $t_filter_object ) {\n\t\tif( $t_field_name . '_filter' == $f_filter_target ) {\n\t\t\treturn_dynamic_filters_prepend_headers();\n\t\t\tprint_filter_plugin_field( $t_field_name, $t_filter_object, $t_filter );\n\t\t\t$t_found = true;\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nif( !$t_found ) {\n\t# error - no function to populate the target (e.g., print_filter_foo)\n\terror_parameters( $f_filter_target );\n\ttrigger_error( ERROR_FILTER_NOT_FOUND, ERROR );\n}\n"
        },
        {
          "name": "roadmap_page.php",
          "type": "blob",
          "size": 15.7490234375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Display Project Roadmap\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses bug_api.php\n * @uses category_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses error_api.php\n * @uses filter_api.php\n * @uses filter_constants_inc.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'category_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'filter_constants_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_api( 'version_api.php' );\n\nrequire_css( 'status_config.php' );\n\n/**\n * Class RoadmapProgress.\n *\n * Handles display of progress as percentage.\n */\nclass RoadmapProgress {\n\t/** @var int Number of resolved issues */\n\tprotected $resolved;\n\n\t/** @var int Number of planned issues */\n\tprotected $planned;\n\n\t/** @var int Percentage of resolved issues */\n\tprotected $percent;\n\n\t/**\n\t * RoadmapProgress constructor.\n\t * @param int $p_resolved\n\t * @param int $p_planned\n\t */\n\tpublic function __construct( $p_resolved, $p_planned ) {\n\t\t$this->resolved = $p_resolved;\n\t\t$this->planned = $p_planned;\n\n\t\tif( $this->hasIssues() ) {\n\t\t\t$this->percent = (int)( $p_resolved * 100 / $p_planned );\n\t\t}\n\t}\n\n\t/**\n\t * Return true if the version contains any issues.\n\t * @return bool\n\t */\n\tpublic function hasIssues() {\n\t\treturn $this->planned > 0;\n\t}\n\n\t/**\n\t * Progress as percentage.\n\t * @return string\n\t */\n\tpublic function percentage() {\n\t\treturn $this->percent . '%';\n\t}\n\n\t/**\n\t * Progress as a string \"x of y issues resolved\".\n\t * @return string\n\t */\n\tpublic function string() {\n\t\treturn sprintf( lang_get( 'resolved_progress' ),\n\t\t\t$this->resolved,\n\t\t\t$this->planned,\n\t\t\t$this->percentage() # backwards-compat, legacy string has 3 placeholders\n\t\t);\n\t}\n\n\t/**\n\t * Prints progress in the Roadmap's header.\n\t */\n\tpublic function printHeader() {\n\t\tif( $this->hasIssues() ) {\n\t\t\techo '<div class=\"widget-toolbar\" title=\"' . $this->string() . '\">'\n\t\t\t\t. $this->percentage()\n\t\t\t\t. '</div>';\n\t\t}\n\t}\n\n\t/**\n\t * Prints the Roadmap's progress bar\n\t */\n\tpublic function printProgressBar() {\n\t\techo '<div class=\"space-4\"></div>';\n\t\techo '<div class=\"col-md-7 col-xs-12 no-padding\">';\n\t\techo '<div class=\"progress progress-large progress-striped\" data-percent=\"'\n\t\t\t. $this->percentage() . '\" >';\n\t\techo '<div class=\"progress-bar progress-bar-success\" style=\"width:'\n\t\t\t. $this->percentage() . '\"></div>';\n\t\techo '</div></div>';\n\t\techo '<div class=\"clearfix\"></div>';\n\t}\n\n}\n\n/**\n * Print header for the specified project version.\n *\n * @param array $p_version_row Array containing project version data.\n * @param RoadmapProgress $p_progress\n *\n * @return void\n */\nfunction print_version_header( array $p_version_row, $p_progress ) {\n\t$t_project_id   = $p_version_row['project_id'];\n\t$t_version_id   = $p_version_row['id'];\n\t$t_version_name = $p_version_row['version'];\n\t$t_project_name = project_get_field( $t_project_id, 'name' );\n\n\t$t_release_title = '<a class=\"white\" href=\"roadmap_page.php?project_id=' . $t_project_id . '\">' . string_display_line( $t_project_name ) . '</a>';\n\t$t_release_title .= ' - <a class=\"white\" href=\"roadmap_page.php?version_id=' . $t_version_id . '\">' . string_display_line( $t_version_name ) . '</a>';\n\n\t$t_version_timestamp = $p_version_row['date_order'];\n\tif( config_get( 'show_roadmap_dates' ) && !date_is_null( $t_version_timestamp ) ) {\n\t\t$t_scheduled_release_date = lang_get( 'scheduled_release' ) . ' ' . string_display_line( date( config_get( 'short_date_format' ), $t_version_timestamp ) );\n\t} else {\n\t\t$t_scheduled_release_date = null;\n\t}\n\n\t$t_block_id = 'roadmap_' . $t_version_id;\n\t$t_collapse_block = is_collapsed( $t_block_id );\n\t$t_block_css = $t_collapse_block ? 'collapsed' : '';\n\t$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n\n\techo '<div id=\"' . $t_block_id . '\" class=\"widget-box widget-color-blue2 ' . $t_block_css . '\">';\n\techo '<div class=\"widget-header widget-header-small\">';\n\techo PHP_EOL;\n\techo '<h4 class=\"widget-title lighter\">';\n\tprint_icon( 'fa-road', 'ace-icon' );\n\techo $t_release_title, lang_get( 'word_separator' );\n\techo '</h4>';\n\techo PHP_EOL;\n\techo '<div class=\"widget-toolbar\">';\n\techo '<a data-action=\"collapse\" href=\"#\">';\n\tprint_icon( $t_block_icon, '1 ace-icon bigger-125' );\n\techo '</a>';\n\techo '</div>';\n\t$p_progress->printHeader();\n\techo '</div>';\n\techo PHP_EOL;\n\n\techo '<div class=\"widget-body\">';\n\techo '<div class=\"widget-toolbox padding-8 clearfix\">';\n\tif( $t_scheduled_release_date ) {\n\t\techo PHP_EOL;\n\t\techo '<div class=\"pull-left\">';\n\t\tprint_icon( 'fa-calendar-o', 'fa-lg' );\n\t\techo ' ' . $t_scheduled_release_date . '</div>';\n\t}\n\techo PHP_EOL;\n\techo '<div class=\"btn-toolbar pull-right\">';\n\tprint_extra_small_button(\n\t\t'view_all_set.php?type=' . FILTER_ACTION_PARSE_NEW\n\t\t. '&temporary=y&' . FILTER_PROPERTY_PROJECT_ID . '=' . $t_project_id\n\t\t. '&' . filter_encode_field_and_value( FILTER_PROPERTY_TARGET_VERSION, $t_version_name )\n\t\t. '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . META_FILTER_NONE,\n\t\tlang_get( 'view_bugs_link' )\n\t);\n\tprint_extra_small_button(\n\t\t'roadmap_page.php?version_id=' . $t_version_id,\n\t\tstring_display_line( $t_version_name )\n\t);\n\tprint_extra_small_button(\n\t\t'roadmap_page.php?project_id=' . $t_project_id,\n\t\tstring_display_line( $t_project_name )\n\t);\n\techo '</div>';\n\techo PHP_EOL;\n\n\techo '</div>';\n\techo PHP_EOL;\n\techo '<div class=\"widget-main\">';\n}\n\n/**\n * Print footer for the specified project version.\n *\n * @param array $p_version_row array contain project version data\n * @param RoadmapProgress $p_progress\n *\n * @noinspection PhpDocMissingThrowsInspection\n */\nfunction print_version_footer( $p_version_row, $p_progress ) {\n\t$t_project_id   = $p_version_row['project_id'];\n\t$t_version_id   = $p_version_row['id'];\n\t/** @noinspection PhpUnhandledExceptionInspection */\n\t$t_version_name = version_get_field( $t_version_id, 'version' );\n\n\techo '</div>';\n\n\tif( $p_progress->hasIssues() ) {\n\t\techo '<div class=\"widget-toolbox padding-8 clearfix\">';\n\t\techo $p_progress->string();\n\t\techo ' ';\n\t\tprint_extra_small_button(\n\t\t\t'view_all_set.php?type=' . FILTER_ACTION_PARSE_NEW\n\t\t\t. '&temporary=y&' . FILTER_PROPERTY_PROJECT_ID . '=' . $t_project_id\n\t\t\t. '&' . filter_encode_field_and_value( FILTER_PROPERTY_TARGET_VERSION, $t_version_name )\n\t\t\t. '&' . FILTER_PROPERTY_HIDE_STATUS . '=' . META_FILTER_NONE,\n\t\t\tlang_get( 'view_bugs_link' )\n\t\t);\n\t\techo '</div>';\n\t}\n\n\techo '</div></div>';\n\techo '<div class=\"space-10\"></div>';\n\techo PHP_EOL;\n}\n\n/**\n * print project header\n * @param string $p_project_name Project name.\n * @return void\n */\nfunction print_project_header_roadmap( $p_project_name ) {\n\techo '<div class=\"page-header\">';\n\techo '<h1><strong>' . string_display_line( $p_project_name ), '</strong> - ', lang_get( 'roadmap' ) . '</h1>';\n\techo '</div>';\n\techo PHP_EOL;\n}\n\n$t_issues_found = false;\n\n$t_user_id = auth_get_current_user_id();\n\n$f_project = gpc_get_string( 'project', '' );\nif( is_blank( $f_project ) ) {\n\t$f_project_id = gpc_get_int( 'project_id', -1 );\n} else {\n\t$f_project_id = project_get_id_by_name( $f_project );\n\n\tif( $f_project_id === 0 ) {\n\t\terror_parameters( $f_project );\n\t\ttrigger_error( ERROR_PROJECT_NOT_FOUND, ERROR );\n\t}\n}\n\n$f_version = gpc_get_string( 'version', '' );\n\nif( is_blank( $f_version ) ) {\n\t$f_version_id = gpc_get_int( 'version_id', -1 );\n\n\t# If both version_id and project_id parameters are supplied, then version_id take precedence.\n\tif( $f_version_id == -1 ) {\n\t\tif( $f_project_id == -1 ) {\n\t\t\t$t_project_id = helper_get_current_project();\n\t\t} else {\n\t\t\t$t_project_id = $f_project_id;\n\t\t}\n\t} else {\n\t\t/** @noinspection PhpUnhandledExceptionInspection */\n\t\t$t_project_id = version_get_field( $f_version_id, 'project_id' );\n\t}\n} else {\n\tif( $f_project_id == -1 ) {\n\t\t$t_project_id = helper_get_current_project();\n\t} else {\n\t\t$t_project_id = $f_project_id;\n\t}\n\n\t$f_version_id = version_get_id( $f_version, $t_project_id );\n\n\tif( $f_version_id === false ) {\n\t\terror_parameters( $f_version );\n\t\ttrigger_error( ERROR_VERSION_NOT_FOUND, ERROR );\n\t}\n}\n\nif( ALL_PROJECTS == $t_project_id ) {\n\t$t_project_ids_to_check = user_get_all_accessible_projects( $t_user_id, ALL_PROJECTS );\n\t$t_project_ids = array();\n\n\tforeach ( $t_project_ids_to_check as $t_project_id ) {\n\t\t$t_roadmap_view_access_level = config_get( 'roadmap_view_threshold', null, null, $t_project_id );\n\t\tif( access_has_project_level( $t_roadmap_view_access_level, $t_project_id ) ) {\n\t\t\t$t_project_ids[] = $t_project_id;\n\t\t}\n\t}\n} else {\n\taccess_ensure_project_level( config_get( 'roadmap_view_threshold' ), $t_project_id );\n\t$t_project_ids = user_get_all_accessible_subprojects( $t_user_id, $t_project_id );\n\tarray_unshift( $t_project_ids, $t_project_id );\n}\n\n$t_project_id_for_access_check = $t_project_id;\n\nlayout_page_header( lang_get( 'roadmap' ) );\n\nlayout_page_begin( __FILE__ );\n\necho '<div class=\"col-md-12 col-xs-12\">';\n\n$t_project_index = 0;\n\nversion_cache_array_rows( $t_project_ids );\ncategory_cache_array_rows_by_project( $t_project_ids );\n\nforeach( $t_project_ids as $t_project_id ) {\n\t$t_project_name = project_get_field( $t_project_id, 'name' );\n\t$t_resolved = config_get( 'bug_resolved_status_threshold' );\n\n\t$t_version_rows = array_reverse( version_get_all_rows( $t_project_id ) );\n\n\t# cache category info, but ignore the results for now\n\tcategory_get_all_rows( $t_project_id );\n\n\t$t_project_header_printed = false;\n\n\t$t_view_bug_threshold = config_get( 'view_bug_threshold', null, $t_user_id, $t_project_id );\n\n\tforeach( $t_version_rows as $t_version_row ) {\n\t\tif( $t_version_row['released'] == 1 ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t# Skip all versions except the specified one (if any).\n\t\tif( $f_version_id != -1 && $f_version_id != $t_version_row['id'] ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t$t_issues_planned = 0;\n\t\t$t_issues_resolved = 0;\n\t\t$t_issues_counted = array();\n\n\t\t$t_version_header_printed = false;\n\n\t\t$t_version = $t_version_row['version'];\n\n\t\t$t_query = 'SELECT sbt.*, {bug_relationship}.source_bug_id, dbt.target_version as parent_version FROM {bug} sbt\n\t\t\t\t\tLEFT JOIN {bug_relationship} ON sbt.id={bug_relationship}.destination_bug_id AND {bug_relationship}.relationship_type=2\n\t\t\t\t\tLEFT JOIN {bug} dbt ON dbt.id={bug_relationship}.source_bug_id\n\t\t\t\t\tWHERE sbt.project_id=' . db_param() . ' AND sbt.target_version=' . db_param() . ' ORDER BY sbt.status ASC, sbt.last_updated DESC';\n\n\t\t$t_description = $t_version_row['description'];\n\n\t\t$t_first_entry = true;\n\n\t\t$t_result = db_query( $t_query, array( $t_project_id, $t_version ) );\n\n\t\t$t_issue_ids = array();\n\t\t$t_issue_parents = array();\n\t\t$t_issue_handlers = array();\n\n\t\twhile( $t_row = db_fetch_array( $t_result ) ) {\n\t\t\tbug_cache_database_result( $t_row );\n\n\t\t\t# verify the user can view this issue\n\t\t\tif( !access_has_bug_level( $t_view_bug_threshold, $t_row['id'] ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t$t_issue_id = $t_row['id'];\n\t\t\t$t_issue_parent = $t_row['source_bug_id'];\n\t\t\t$t_parent_version = (string)$t_row['parent_version'];\n\n\t\t\tif( !helper_call_custom_function( 'roadmap_include_issue', array( $t_issue_id ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( !isset( $t_issues_counted[$t_issue_id] ) ) {\n\t\t\t\t$t_issues_planned++;\n\n\t\t\t\tif( bug_is_resolved( $t_issue_id ) ) {\n\t\t\t\t\t$t_issues_resolved++;\n\t\t\t\t}\n\n\t\t\t\t$t_issues_counted[$t_issue_id] = true;\n\t\t\t}\n\n\t\t\tif( 0 === strcasecmp( $t_parent_version, $t_version ) ) {\n\t\t\t\t$t_issue_ids[] = $t_issue_id;\n\t\t\t\t$t_issue_parents[] = $t_issue_parent;\n\t\t\t} else if( !in_array( $t_issue_id, $t_issue_ids ) ) {\n\t\t\t\t$t_issue_ids[] = $t_issue_id;\n\t\t\t\t$t_issue_parents[] = null;\n\t\t\t}\n\n\t\t\t$t_issue_handlers[] = $t_row['handler_id'];\n\t\t}\n\n\t\tuser_cache_array_rows( array_unique( $t_issue_handlers ) );\n\n\t\t$t_progress = new RoadmapProgress( $t_issues_resolved, $t_issues_planned );\n\n\t\tif( $t_progress->hasIssues() ) {\n\t\t\tif( !$t_project_header_printed ) {\n\t\t\t\techo PHP_EOL;\n\t\t\t\tprint_project_header_roadmap( $t_project_name );\n\t\t\t\t$t_project_header_printed = true;\n\t\t\t}\n\n\t\t\tif( !$t_version_header_printed ) {\n\t\t\t\tprint_version_header( $t_version_row, $t_progress );\n\t\t\t\t$t_version_header_printed = true;\n\t\t\t}\n\n\t\t\tif( !is_blank( $t_description ) ) {\n\t\t\t\techo '<div class=\"alert alert-warning\">',\n\t\t\t\t\tstring_display_links( $t_description ),\n\t\t\t\t\t'</div>';\n\t\t\t}\n\n\t\t\t$t_progress->printProgressBar();\n\t\t}\n\n\t\t$t_issue_set_ids = array();\n\t\t$t_issue_set_levels = array();\n\t\t$k = 0;\n\n\t\t$t_cycle = false;\n\t\t$t_cycle_ids = array();\n\n\t\twhile( 0 < count( $t_issue_ids ) ) {\n\t\t\t$t_issue_id = $t_issue_ids[$k];\n\t\t\t$t_issue_parent = $t_issue_parents[$k];\n\n\t\t\tif( in_array( $t_issue_id, $t_cycle_ids ) && in_array( $t_issue_parent, $t_cycle_ids ) ) {\n\t\t\t\t$t_cycle = true;\n\t\t\t} else {\n\t\t\t\t$t_cycle = false;\n\t\t\t\t$t_cycle_ids[] = $t_issue_id;\n\t\t\t}\n\n\t\t\tif( $t_cycle || !in_array( $t_issue_parent, $t_issue_ids ) ) {\n\t\t\t\t$l = array_search( $t_issue_parent, $t_issue_set_ids );\n\t\t\t\tif( $l !== false ) {\n\t\t\t\t\t/** @noinspection PhpStatementHasEmptyBodyInspection */\n\t\t\t\t\tfor( $m = $l+1; $m < count( $t_issue_set_ids ) && $t_issue_set_levels[$m] > $t_issue_set_levels[$l]; $m++ ) {\n\t\t\t\t\t\t#do nothing\n\t\t\t\t\t}\n\t\t\t\t\t$t_issue_set_ids_end = array_splice( $t_issue_set_ids, $m );\n\t\t\t\t\t$t_issue_set_levels_end = array_splice( $t_issue_set_levels, $m );\n\t\t\t\t\t$t_issue_set_ids[] = $t_issue_id;\n\t\t\t\t\t$t_issue_set_levels[] = $t_issue_set_levels[$l] + 1;\n\t\t\t\t\t$t_issue_set_ids = array_merge( $t_issue_set_ids, $t_issue_set_ids_end );\n\t\t\t\t\t$t_issue_set_levels = array_merge( $t_issue_set_levels, $t_issue_set_levels_end );\n\t\t\t\t} else {\n\t\t\t\t\t$t_issue_set_ids[] = $t_issue_id;\n\t\t\t\t\t$t_issue_set_levels[] = 0;\n\t\t\t\t}\n\t\t\t\tarray_splice( $t_issue_ids, $k, 1 );\n\t\t\t\tarray_splice( $t_issue_parents, $k, 1 );\n\n\t\t\t\t$t_cycle_ids = array();\n\t\t\t} else {\n\t\t\t\t$k++;\n\t\t\t}\n\t\t\tif( count( $t_issue_ids ) <= $k ) {\n\t\t\t\t$k = 0;\n\t\t\t}\n\t\t}\n\n\t\techo '<ul class=\"roadmap\">' . PHP_EOL;\n\t\t$t_count_ids = count( $t_issue_set_ids );\n\t\tfor( $j = 0; $j < $t_count_ids; $j++ ) {\n\t\t\t$t_issue_set_id = $t_issue_set_ids[$j];\n\t\t\t$t_issue_set_level = $t_issue_set_levels[$j];\n\n\t\t\techo '<li>';\n\t\t\thelper_call_custom_function( 'roadmap_print_issue', array( $t_issue_set_id, $t_issue_set_level ) );\n\t\t\techo '</li>' . PHP_EOL;\n\n\t\t\t$t_issues_found = true;\n\t\t}\n\t\techo '</ul>' . PHP_EOL;\n\n\t\tif( $t_version_header_printed ) {\n\t\t\tprint_version_footer( $t_version_row, $t_progress );\n\t\t}\n\t}\n}\n\nif( !$t_issues_found ) {\n\tif( access_has_project_level( config_get( 'manage_project_threshold' ), $t_project_id_for_access_check ) ) {\n\t\t$t_string = 'roadmap_empty_manager';\n\t} else {\n\t\t$t_string = 'roadmap_empty';\n\t}\n\n\techo '<br />';\n\techo '<p class=\"lead\">' . lang_get( $t_string ) . '</p>';\n}\necho '</div>';\nlayout_page_end();\n"
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "search.php",
          "type": "blob",
          "size": 9.9931640625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Search\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses filter_api.php\n * @uses filter_constants_inc.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'filter_constants_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'print_api.php' );\n\nauth_ensure_user_authenticated();\n\n$f_print = gpc_get_bool( 'print' );\n\ngpc_make_array( FILTER_PROPERTY_CATEGORY_ID );\ngpc_make_array( FILTER_PROPERTY_SEVERITY );\ngpc_make_array( FILTER_PROPERTY_STATUS );\ngpc_make_array( FILTER_PROPERTY_REPORTER_ID );\ngpc_make_array( FILTER_PROPERTY_HANDLER_ID );\ngpc_make_array( FILTER_PROPERTY_PROJECT_ID );\ngpc_make_array( FILTER_PROPERTY_PROJECTION );\ngpc_make_array( FILTER_PROPERTY_RESOLUTION );\ngpc_make_array( FILTER_PROPERTY_BUILD );\ngpc_make_array( FILTER_PROPERTY_VERSION );\ngpc_make_array( FILTER_PROPERTY_FIXED_IN_VERSION );\ngpc_make_array( FILTER_PROPERTY_TARGET_VERSION );\ngpc_make_array( FILTER_PROPERTY_PROFILE_ID );\ngpc_make_array( FILTER_PROPERTY_PLATFORM );\ngpc_make_array( FILTER_PROPERTY_OS );\ngpc_make_array( FILTER_PROPERTY_OS_BUILD );\ngpc_make_array( FILTER_PROPERTY_PRIORITY );\ngpc_make_array( FILTER_PROPERTY_MONITOR_USER_ID );\ngpc_make_array( FILTER_PROPERTY_VIEW_STATE );\ngpc_make_array( FILTER_PROPERTY_NOTE_USER_ID );\n\n$t_my_filter = filter_get_default();\n\n# gpc_get_*_array functions expect 2nd param to be an array\n$t_meta_filter_any_array = array( META_FILTER_ANY );\n\n$t_my_filter[FILTER_PROPERTY_SEARCH] = gpc_get_string( FILTER_PROPERTY_SEARCH, '' );\n$t_my_filter[FILTER_PROPERTY_CATEGORY_ID] = gpc_get_string_array( FILTER_PROPERTY_CATEGORY_ID, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_REPORTER_ID] = gpc_get_string_array( FILTER_PROPERTY_REPORTER_ID, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_HANDLER_ID] = gpc_get_string_array( FILTER_PROPERTY_HANDLER_ID, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_SEVERITY] = gpc_get_string_array( FILTER_PROPERTY_SEVERITY, $t_meta_filter_any_array );\n\n$t_my_filter[FILTER_PROPERTY_STATUS] = gpc_get_string_array( FILTER_PROPERTY_STATUS, $t_meta_filter_any_array );\n\n$t_my_filter[FILTER_PROPERTY_PROJECT_ID] = gpc_get_string_array( FILTER_PROPERTY_PROJECT_ID, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_PROJECTION] = gpc_get_string_array( FILTER_PROPERTY_PROJECTION, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_RESOLUTION] = gpc_get_string_array( FILTER_PROPERTY_RESOLUTION, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_BUILD] = gpc_get_string_array( FILTER_PROPERTY_BUILD, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_FIXED_IN_VERSION] = gpc_get_string_array( FILTER_PROPERTY_FIXED_IN_VERSION, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_TARGET_VERSION] = gpc_get_string_array( FILTER_PROPERTY_TARGET_VERSION, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_PRIORITY] = gpc_get_string_array( FILTER_PROPERTY_PRIORITY, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_MONITOR_USER_ID] = gpc_get_string_array( FILTER_PROPERTY_MONITOR_USER_ID, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_PROFILE_ID] = gpc_get_string_array( FILTER_PROPERTY_PROFILE_ID, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_PLATFORM] = gpc_get_string_array( FILTER_PROPERTY_PLATFORM, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_OS] = gpc_get_string_array( FILTER_PROPERTY_OS, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_OS_BUILD] = gpc_get_string_array( FILTER_PROPERTY_OS_BUILD, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_VIEW_STATE] = gpc_get_string_array( FILTER_PROPERTY_VIEW_STATE, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_VERSION] = gpc_get_string_array( FILTER_PROPERTY_VERSION, $t_meta_filter_any_array );\n$t_my_filter[FILTER_PROPERTY_MATCH_TYPE] = gpc_get_int( FILTER_PROPERTY_MATCH_TYPE, FILTER_MATCH_ALL );\n$t_my_filter[FILTER_PROPERTY_TAG_STRING] = gpc_get_string( FILTER_PROPERTY_TAG_STRING, '' );\n$t_my_filter[FILTER_PROPERTY_TAG_SELECT] = gpc_get_int( FILTER_PROPERTY_TAG_SELECT, 0 );\n$t_my_filter[FILTER_PROPERTY_NOTE_USER_ID] = gpc_get_string_array( FILTER_PROPERTY_NOTE_USER_ID, $t_meta_filter_any_array );\n\n# Filtering by Date\n# Creation Date\n$t_my_filter[FILTER_PROPERTY_FILTER_BY_DATE_SUBMITTED] = gpc_get_bool( FILTER_PROPERTY_FILTER_BY_DATE_SUBMITTED );\n$t_my_filter[FILTER_PROPERTY_DATE_SUBMITTED_START_MONTH] = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_START_MONTH, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_DATE_SUBMITTED_START_DAY] = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_START_DAY, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_DATE_SUBMITTED_START_YEAR] = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_START_YEAR, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_DATE_SUBMITTED_END_MONTH] = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_END_MONTH, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_DATE_SUBMITTED_END_DAY] = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_END_DAY, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_DATE_SUBMITTED_END_YEAR] = gpc_get_int( FILTER_PROPERTY_DATE_SUBMITTED_END_YEAR, META_FILTER_ANY );\n# Last Update Date\n$t_my_filter[FILTER_PROPERTY_FILTER_BY_LAST_UPDATED_DATE] = gpc_get_bool( FILTER_PROPERTY_FILTER_BY_LAST_UPDATED_DATE );\n$t_my_filter[FILTER_PROPERTY_LAST_UPDATED_START_MONTH] = gpc_get_int( FILTER_PROPERTY_LAST_UPDATED_START_MONTH, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_LAST_UPDATED_START_DAY] = gpc_get_int( FILTER_PROPERTY_LAST_UPDATED_START_DAY, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_LAST_UPDATED_START_YEAR] = gpc_get_int( FILTER_PROPERTY_LAST_UPDATED_START_YEAR, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_LAST_UPDATED_END_MONTH] = gpc_get_int( FILTER_PROPERTY_LAST_UPDATED_END_MONTH, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_LAST_UPDATED_END_DAY] = gpc_get_int( FILTER_PROPERTY_LAST_UPDATED_END_DAY, META_FILTER_ANY );\n$t_my_filter[FILTER_PROPERTY_LAST_UPDATED_END_YEAR] = gpc_get_int( FILTER_PROPERTY_LAST_UPDATED_END_YEAR, META_FILTER_ANY );\n\n$t_my_filter[FILTER_PROPERTY_RELATIONSHIP_TYPE] = gpc_get_int( FILTER_PROPERTY_RELATIONSHIP_TYPE, -1 );\n$t_my_filter[FILTER_PROPERTY_RELATIONSHIP_BUG] = gpc_get_int( FILTER_PROPERTY_RELATIONSHIP_BUG, 0 );\n\n$t_my_filter[FILTER_PROPERTY_HIDE_STATUS] = gpc_get_int( FILTER_PROPERTY_HIDE_STATUS, config_get( 'hide_status_default' ) );\n$t_my_filter[FILTER_PROPERTY_STICKY] = gpc_get_bool( FILTER_PROPERTY_STICKY, config_get( 'show_sticky_issues' ) );\n\n$t_my_filter[FILTER_PROPERTY_SORT_FIELD_NAME] = gpc_get_string( FILTER_PROPERTY_SORT_FIELD_NAME, '' );\n$t_my_filter[FILTER_PROPERTY_SORT_DIRECTION] = gpc_get_string( FILTER_PROPERTY_SORT_DIRECTION, '' );\n$t_my_filter[FILTER_PROPERTY_ISSUES_PER_PAGE] = gpc_get_int( FILTER_PROPERTY_ISSUES_PER_PAGE, config_get( 'default_limit_view' ) );\n\n$t_highlight_changed = gpc_get_int( FILTER_PROPERTY_HIGHLIGHT_CHANGED, -1 );\nif( $t_highlight_changed != -1 ) {\n\t$t_my_filter[FILTER_PROPERTY_HIGHLIGHT_CHANGED] = $t_highlight_changed;\n}\n\n# Handle custom fields.\n$t_custom_fields = array();\nforeach( $_GET as $t_var_name => $t_var_value ) {\n\tif( strpos( $t_var_name, 'custom_field_' ) === 0 ) {\n\t\t$t_custom_field_id = mb_substr( $t_var_name, 13 );\n\t\t$t_custom_fields[$t_custom_field_id] = $t_var_value;\n\t}\n}\n\n$t_my_filter['custom_fields'] = $t_custom_fields;\n\n# Handle class-based filters defined as plugins\n$t_plugin_filters = filter_get_plugin_filters();\nforeach( $t_plugin_filters as $t_field_name => $t_filter_object ) {\n    switch( $t_filter_object->type ) {\n        case FILTER_TYPE_STRING:\n            $t_my_filter[$t_field_name] = gpc_get_string( $t_field_name, $t_meta_filter_any_array[$t_field_name] );\n            break;\n        case FILTER_TYPE_INT:\n            $t_my_filter[$t_field_name] = gpc_get_int( $t_field_name, $t_meta_filter_any_array[$t_field_name] );\n            break;\n        case FILTER_TYPE_BOOLEAN:\n            $t_my_filter[$t_field_name] = gpc_get_bool( $t_field_name, $t_meta_filter_any_array[$t_field_name]);\n            break;\n        case FILTER_TYPE_MULTI_STRING:\n            $t_my_filter[$t_field_name] = gpc_get_string_array( $t_field_name, $t_meta_filter_any_array[$t_field_name] );\n            break;\n        case FILTER_TYPE_MULTI_INT:\n            $t_my_filter[$t_field_name] = gpc_get_int_array( $t_field_name, $t_meta_filter_any_array[$t_field_name] );\n            break;\n    }\n}\n\n# Must use advanced filter so that the project_id is applied and multiple\n# selections are handled.\n$t_my_filter['_view_type'] = FILTER_VIEW_TYPE_ADVANCED;\n\n$t_setting_arr = filter_ensure_valid_filter( $t_my_filter );\n\n# set the filter for use, for current user\n# Note: This will overwrite the filter in use/default for current project and user.\n$t_temporary_key = filter_temporary_set( $t_setting_arr );\n\n# redirect to print_all or view_all page\nif( $f_print ) {\n\t$t_redirect_url = 'print_all_bug_page.php';\n} else {\n\t$t_redirect_url = 'view_all_bug_page.php';\n}\n$t_redirect_url .= '?' . filter_get_temporary_key_param( $t_temporary_key );\n\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "set_project.php",
          "type": "blob",
          "size": 3.84765625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Set Active Project\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses filter_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses string_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\n$f_project_id\t= gpc_get_string( 'project_id' );\n$f_make_default\t= gpc_get_bool( 'make_default' );\n$f_ref\t\t\t= gpc_get_string( 'ref', '' );\n\n$c_ref = string_prepare_header( $f_ref );\n\n$t_project = explode( ';', $f_project_id );\n$t_top     = $t_project[0];\n$t_bottom  = $t_project[count( $t_project ) - 1];\n\nif( ALL_PROJECTS != $t_bottom ) {\n\tproject_ensure_exists( $t_bottom );\n}\n\n# Set default project\nif( $f_make_default ) {\n\tcurrent_user_set_default_project( $t_top );\n}\n\nhelper_set_current_project( $f_project_id );\n\n# redirect to 'same page' when switching projects.\n\n# for proxies that clear out HTTP_REFERER\nif( !is_blank( $c_ref ) ) {\n\t$t_redirect_url = $c_ref;\n} else if( !isset( $_SERVER['HTTP_REFERER'] ) || is_blank( $_SERVER['HTTP_REFERER'] ) ) {\n\t$t_redirect_url = config_get_global( 'default_home_page' );\n} else {\n\t$t_home_page = config_get_global( 'default_home_page' );\n\n\t# Check that referrer matches our address after squashing case (case insensitive compare)\n\t$t_path = rtrim( config_get_global( 'path' ), '/' );\n\tif( preg_match( '@^(' . $t_path . ')/(?:/*([^\\?#]*))(.*)?$@', $_SERVER['HTTP_REFERER'], $t_matches ) ) {\n\t\t$t_referrer_page = $t_matches[2];\n\t\t$t_param = $t_matches[3];\n\n\t\t# if view_all_bug_page, pass on filter\n\t\tif( strcasecmp( 'view_all_bug_page.php', $t_referrer_page ) == 0 ) {\n\t\t\t$t_source_filter_id = filter_db_get_project_current( $t_bottom );\n\t\t\t$t_redirect_url = 'view_all_set.php?type=' . FILTER_ACTION_GENERALIZE;\n\n\t\t\tif( $t_source_filter_id !== null ) {\n\t\t\t\t$t_redirect_url = 'view_all_set.php?type=' . FILTER_ACTION_LOAD . '&source_query_id=' . $t_source_filter_id;\n\t\t\t}\n\t\t} else if( stripos( $t_referrer_page, '_page.php' ) !== false ) {\n\t\t\tswitch( $t_referrer_page ) {\n\t\t\t\tcase 'bug_view_page.php':\n\t\t\t\tcase 'bug_view_advanced_page.php':\n\t\t\t\tcase 'bug_update_page.php':\n\t\t\t\tcase 'bug_change_status_page.php':\n\t\t\t\t\t$t_path = $t_home_page;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$t_path = $t_referrer_page . $t_param;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t$t_redirect_url = $t_path;\n\t\t} else if( $t_referrer_page == 'plugin.php' ) {\n\t\t\t$t_redirect_url = $t_referrer_page . $t_param; # redirect to same plugin page\n\t\t} else {\n\t\t\t$t_redirect_url = $t_home_page;\n\t\t}\n\t} else {\n\t\t$t_redirect_url = $t_home_page;\n\t}\n}\n\nprint_header_redirect( $t_redirect_url, true, true );\n"
        },
        {
          "name": "signup.php",
          "type": "blob",
          "size": 3.9580078125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Sign Up\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses crypto_api.php\n * @uses email_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'crypto_api.php' );\nrequire_api( 'email_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'signup' );\n\n$f_username\t\t= strip_tags( gpc_get_string( 'username' ) );\n$f_email\t\t= strip_tags( gpc_get_string( 'email' ) );\n$f_captcha\t\t= gpc_get_string( 'captcha', '' );\n\n$f_username = trim( $f_username );\n$f_email = trim( $f_email );\n$f_captcha = mb_strtolower( trim( $f_captcha ) );\n\n# force logout on the current user if already authenticated\nif( auth_is_user_authenticated() ) {\n\tauth_logout();\n}\n\n# Check to see if signup is allowed\nif( !auth_signup_enabled() ) {\n\tprint_header_redirect( auth_login_page() );\n\texit;\n}\n\nif( ON == config_get( 'signup_use_captcha' ) && get_gd_version() > 0 &&\n\thelper_call_custom_function( 'auth_can_change_password', array() ) ) {\n\t# captcha image requires GD library and related option to ON\n\t$t_securimage = new Securimage();\n\tif( $t_securimage->check( $f_captcha ) == false ) {\n\t\ttrigger_error( ERROR_SIGNUP_NOT_MATCHING_CAPTCHA, ERROR );\n\t}\n}\n\n# notify the selected group a new user has signed-up\nif( user_signup( $f_username, $f_email ) ) {\n\temail_notify_new_account( $f_username, $f_email );\n}\n\nform_security_purge( 'signup' );\n\nlayout_login_page_begin();\n?>\n\n\t<div class=\"col-md-offset-3 col-md-6 col-sm-10 col-sm-offset-1\">\n\t\t<div class=\"login-container\">\n\t\t\t<div class=\"space-12 hidden-480\"></div>\n\t\t\t<?php layout_login_page_logo() ?>\n\t\t\t<div class=\"space-24 hidden-480\"></div>\n\n\t\t\t<div class=\"position-relative\">\n\n\t\t\t\t<div class=\"signup-box visible widget-box no-border\" id=\"login-box\">\n\t\t\t\t\t<div class=\"widget-body\">\n\t\t\t\t\t\t<div class=\"widget-main\">\n\t\t\t\t\t\t\t<h4 class=\"header lighter bigger\">\n\t\t\t\t\t\t\t\t<?php print_icon( 'fa-pencil', 'ace-icon' ); ?>\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'signup_title' ) ?>\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<div class=\"space-10\"></div>\n\n\t\t\t\t\t\t\t<div class=\"center\">\n\t\t\t\t\t\t\t\t<strong><?php echo lang_get( 'signup_done_title' ) ?></strong><br />\n\t\t\t\t\t\t\t\t<?php echo '[' . $f_username . ' - ' . $f_email . '] ' ?>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'password_emailed_msg' ) ?>\n\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t<?php echo lang_get( 'no_reponse_msg' ) ?>\n\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<div class=\"center\">\n\t\t\t\t\t\t\t\t<a class=\"width-40 btn btn-inverse bigger-110 btn-success\" href=\"<?php echo AUTH_PAGE_USERNAME ?>\">\n\t\t\t\t\t\t\t\t\t<?php echo lang_get( 'proceed' ) ?>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\n<?php\nlayout_login_page_end();\n"
        },
        {
          "name": "signup_page.php",
          "type": "blob",
          "size": 6.72265625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Sign Up Page\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses crypto_api.php\n * @uses form_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'crypto_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nrequire_css( 'login.css' );\n\nrequire_js( 'login.js' );\n\n# Check for invalid access to signup page\nif( !auth_signup_enabled() || LDAP == config_get_global( 'login_method' ) ) {\n\tprint_header_redirect( auth_login_page() );\n}\n\n# signup page shouldn't be indexed by search engines\nhtml_robots_noindex();\n\nlayout_login_page_begin( lang_get( 'signup_title' ) );\n\n$t_public_key = crypto_generate_uri_safe_nonce( 64 );\n?>\n\n<div class=\"col-md-offset-3 col-md-6 col-sm-10 col-sm-offset-1\">\n<div class=\"login-container\">\n\t<div class=\"space-12 hidden-480\"></div>\n\t<?php layout_login_page_logo() ?>\n\t<div class=\"space-24 hidden-480\"></div>\n\n\t<div class=\"position-relative\">\n\n\t\t<div class=\"signup-box visible widget-box no-border\" id=\"login-box\">\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main\">\n\t\t\t\t\t<h4 class=\"header lighter bigger\">\n\t\t\t\t\t\t<?php print_icon( 'fa-pencil', 'ace-icon' ); ?>\n\t\t\t\t\t\t<?php echo lang_get( 'signup_title' ) ?>\n\t\t\t\t\t</h4>\n\t\t\t\t\t<div class=\"space-10\"></div>\n\n\t<form id=\"signup-form\" method=\"post\" action=\"signup.php\">\n\t\t<fieldset>\n\t\t\t<?php echo form_security_field( 'signup' ); ?>\n\n\t\t\t<label for=\"username\" class=\"block clearfix\">\n\t\t\t\t<span class=\"block input-icon input-icon-right\">\n\t\t\t\t\t<input id=\"username\" name=\"username\" type=\"text\" placeholder=\"<?php echo lang_get( 'username' ) ?>\"\n\t\t\t\t\t\tsize=\"32\" maxlength=\"<?php echo DB_FIELD_SIZE_USERNAME;?>\" class=\"form-control autofocus\">\n\t\t\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t\t</span>\n\t\t\t</label>\n\n\t\t\t<label for=\"email-field\" class=\"block clearfix\">\n\t\t\t\t<span class=\"block input-icon input-icon-right\">\n\t\t\t\t\t<input id=\"email-field\" name=\"email\" type=\"text\" placeholder=\"<?php echo lang_get( 'email_label' ) ?>\"\n\t\t\t\t\t\tsize=\"32\" maxlength=\"64\" class=\"form-control\">\n\t\t\t\t\t<?php print_icon( 'fa-envelope', 'ace-icon' ); ?>\n\t\t\t\t</span>\n\t\t\t</label>\n\n<?php\n\t$t_allow_passwd_change = helper_call_custom_function( 'auth_can_change_password', array() );\n\n\t# captcha image requires GD library and related option to ON\n\tif( ON == config_get( 'signup_use_captcha' ) && get_gd_version() > 0 && $t_allow_passwd_change ) {\n\t\t$t_securimage_path = 'vendor/dapphp/securimage';\n\t\t$t_securimage_show = $t_securimage_path . '/securimage_show.php';\n\t\t# Unique id prevents caching issues with audio captcha\n\t\t$t_securimage_play = $t_securimage_path . '/securimage_play.php?id=' . uniqid();\n\t\t$t_label_captcha_refresh = lang_get( 'signup_captcha_refresh' );\n\t\t$t_label_captcha_play = lang_get( 'signup_captcha_play' );\n?>\n\t\t\t\t<script type=\"text/javascript\" src=\"<?php echo $t_securimage_path . '/securimage.js'; ?>\"></script>\n\n\t\t\t\t<label for=\"captcha-field\" class=\"block clearfix\">\n\t\t\t\t\t<strong><?php echo lang_get( 'signup_captcha_request_label' ); ?></strong>\n\t\t\t\t</label>\n\n\t\t\t\t<div id=\"captcha-input\" class=\"input\">\n\t\t\t\t\t<?php print_captcha_input( 'captcha' ); ?>\n\n\t\t\t\t\t<div id=\"captcha-image\" class=\"captcha-image\">\n\t\t\t\t\t\t<img src=\"<?php echo $t_securimage_show; ?>\" alt=\"visual captcha\"\n\t\t\t\t\t\t\t title=\"<?php echo $t_label_captcha_refresh; ?>\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div id=\"captcha_image_audio_div\">\n\t\t\t\t\t\t<audio id=\"captcha_image_audio\" preload=\"none\">\n\t\t\t\t\t\t\t<source id=\"captcha_image_source_mp3\" src=\"<?php echo $t_securimage_play . '&format=mpeg'; ?>\" type=\"audio/mpeg\">\n\t\t\t\t\t\t\t<source id=\"captcha_image_source_wav\" src=\"<?php echo $t_securimage_play; ?>\" type=\"audio/wav\">\n\t\t\t\t\t\t</audio>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"captcha_image_audio_controls\">\n\t\t\t\t\t\t<a class=\"captcha_play_button\" href=\"<?php echo $t_securimage_play; ?>\"\n\t\t\t\t\t\t   title=\"<?php echo $t_label_captcha_play; ?>\"\n\t\t\t\t\t\t   aria-label=\"<?php echo $t_label_captcha_play; ?>\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<?php print_icon( 'volume-up', 'ace-icon bigger-250 captcha_play_image'); ?>\n\t\t\t\t\t\t\t<?php print_icon( 'spinner', 'ace-icon bigger-250 captcha_loading_image\" style=\"display: none'); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<noscript>Enable Javascript for audio controls</noscript>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a id=\"captcha-refresh\" href=\"#\"\n\t\t\t\t\t\ttitle=\"<?php echo $t_label_captcha_refresh; ?>\"\n\t\t\t\t\t\taria-label=\"<?php echo $t_label_captcha_refresh; ?>\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<?php print_icon( 'refresh', 'ace-icon bigger-250' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n<?php\n\t\t\t} // endif use captcha\n\n\t\t\tif( !$t_allow_passwd_change ) {\n\t\t\t\techo '<div class=\"space-10\"></div>';\n\t\t\t\techo '<div class=\"alert alert-danger\">';\n\t\t\t\techo lang_get( 'no_password_change' );\n\t\t\t\techo '</div>';\n\t\t\t}\n?>\n\n\t\t\t<div class=\"clearfix\"></div>\n\t\t\t<div class=\"space-10\"></div>\n\t\t\t<?php echo lang_get( 'signup_info' ); ?>\n\t\t\t<div class=\"space-10\"></div>\n\n\t\t\t<input type=\"submit\" class=\"width-40 pull-right btn btn-success btn-inverse bigger-110\" value=\"<?php echo lang_get( 'signup_button' ) ?>\" />\n\t\t</fieldset>\n\t</form>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"toolbar center\">\n\t\t\t\t\t<a class=\"back-to-login-link pull-left\" href=\"<?php echo AUTH_PAGE_USERNAME; ?>\">\n\t\t\t\t\t\t<?php echo lang_get( 'login' ); ?>\n\t\t\t\t\t</a>\n<?php\n\t\t# lost password feature disabled or reset password via email disabled\n\t\tif( ( LDAP != config_get_global( 'login_method' ) ) &&\n\t\t\t( ON == config_get( 'lost_password_feature' ) ) &&\n\t\t\t( ON == config_get( 'send_reset_password' ) ) &&\n\t\t\t( ON == config_get( 'enable_email_notification' ) ) ) {\n?>\n\t\t\t\t\t<a class=\"back-to-login-link pull-right\" href=\"lost_pwd_page.php\">\n\t\t\t\t\t\t<?php echo lang_get( 'lost_password_link' ); ?>\n\t\t\t\t\t</a>\n<?php } ?>\n\t\t\t\t\t<div class=\"clearfix\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n</div>\n\n<?php\nlayout_login_page_end();\n"
        },
        {
          "name": "summary_page.php",
          "type": "blob",
          "size": 10.78515625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Display summary page of Statistics\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses database_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses summary_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'database_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'summary_api.php' );\nrequire_api( 'user_api.php' );\n\n$f_project_id = gpc_get_int( 'project_id', helper_get_current_project() );\n\n# Override the current page to make sure we get the appropriate project-specific configuration\n$g_project_override = $f_project_id;\n\naccess_ensure_project_level( config_get( 'view_summary_threshold' ) );\n\n$t_filter = summary_get_filter();\n\n$t_time_stats = summary_helper_get_time_stats( $f_project_id, $t_filter );\n\n$t_summary_header_arr = explode( '/', lang_get( 'summary_header' ) );\n\n$t_summary_header = '';\nforeach ( $t_summary_header_arr as $t_summary_header_name ) {\n\t$t_summary_header .= '<th class=\"align-right\">';\n\t$t_summary_header .= $t_summary_header_name;\n\t$t_summary_header .= '</th>';\n}\n\nlayout_page_header( lang_get( 'summary_link' ) );\n\nlayout_page_begin( __FILE__ );\n\nprint_summary_menu( 'summary_page.php', $t_filter );\nprint_summary_submenu();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-bar-chart-o', 'ace-icon' ); ?>\n\t\t<?php echo lang_get('summary_title') ?>\n\t</h4>\n</div>\n\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n\n\n<!-- LEFT COLUMN -->\n<div class=\"col-md-6 col-xs-12\">\n\n\t<!-- BY PROJECT -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-35\"><?php echo lang_get( 'by_project' ) ?></th>\n\t\t\t\t<?php echo $t_summary_header ?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_project( array(), 0, null, $t_filter ); ?>\n\t</table>\n\t</div>\n\n\t<!-- BY STATUS -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-35\"><?php echo lang_get( 'by_status' ) ?></th>\n\t\t\t\t<?php echo $t_summary_header ?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_enum( 'status', $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- BY SEVERITY -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-35\"><?php echo lang_get( 'by_severity' ) ?></th>\n\t\t\t\t<?php echo $t_summary_header ?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_enum( 'severity', $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- BY CATEGORY -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-35\"><?php echo lang_get( 'by_category' ) ?></th>\n\t\t\t\t<?php echo $t_summary_header ?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_category( $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- TIME STATS -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th colspan=\"2\"><?php echo lang_get( 'time_stats' ) ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tr>\n\t\t\t<td><?php echo lang_get( 'longest_open_bug' ) ?></td>\n\t\t\t<td class=\"align-right\"><?php\n\t\t\t\tif( $t_time_stats['bug_id'] > 0 )  {\n\t\t\t\t\tprint_bug_link( $t_time_stats['bug_id'] );\n\t\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?php echo lang_get( 'longest_open' ) ?></td>\n\t\t\t<td class=\"align-right\"><?php echo $t_time_stats['largest_diff'] ?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?php echo lang_get( 'average_time' ) ?></td>\n\t\t\t<td class=\"align-right\"><?php echo $t_time_stats['average_time'] ?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?php echo lang_get( 'total_time' ) ?></td>\n\t\t\t<td class=\"align-right\"><?php echo $t_time_stats['total_time'] ?></td>\n\t\t</tr>\n\t</table>\n\t</div>\n\n\t<!-- DEVELOPER STATS -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th><?php echo lang_get( 'developer_stats' ) ?></th>\n\t\t\t\t<?php echo $t_summary_header ?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_developer( $t_filter ) ?>\n\t</table>\n</div>\n</div>\n\n<!-- RIGHT COLUMN -->\n<div class=\"col-md-6 col-xs-12\">\n\n\t<!-- BY DATE -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-35\"><?php echo lang_get( 'by_date' ) ?></th>\n\t\t\t\t<th class=\"align-right\"><?php echo lang_get( 'opened' ); ?></th>\n\t\t\t\t<th class=\"align-right\"><?php echo lang_get( 'resolved' ); ?></th>\n\t\t\t\t<th class=\"align-right\"><?php echo lang_get( 'balance' ); ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_date( config_get( 'date_partitions' ), $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- MOST ACTIVE -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-85\"><?php echo lang_get( 'most_active' ) ?></th>\n\t\t\t\t<th class=\"align-right\"><?php echo lang_get( 'score' ); ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_activity( $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- LONGEST OPEN -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-85\"><?php echo lang_get( 'longest_open' ) ?></th>\n\t\t\t\t<th class=\"align-right\"><?php echo lang_get( 'days' ); ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_age( $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- BY RESOLUTION -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-35\"><?php echo lang_get( 'by_resolution' ) ?></th>\n\t\t\t\t<?php echo $t_summary_header ?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_enum( 'resolution', $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- BY PRIORITY -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-35\"><?php echo lang_get( 'by_priority' ) ?></th>\n\t\t\t\t<?php echo $t_summary_header ?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_enum( 'priority', $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- REPORTER STATS -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-35\"><?php echo lang_get( 'reporter_stats' ) ?></th>\n\t\t\t\t<?php echo $t_summary_header ?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_by_reporter( $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- REPORTER EFFECTIVENESS -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-35\"><?php echo lang_get( 'reporter_effectiveness' ) ?></th>\n\t\t\t\t<th class=\"align-right\"><?php echo lang_get( 'severity' ); ?></th>\n\t\t\t\t<th class=\"align-right\"><?php echo lang_get( 'errors' ); ?></th>\n\t\t\t\t<th class=\"align-right\"><?php echo lang_get( 'total' ); ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_reporter_effectiveness( config_get( 'severity_enum_string' ), config_get( 'resolution_enum_string' ), $t_filter ) ?>\n\t</table>\n\t</div>\n\n</div>\n\n<!-- BOTTOM -->\n<div class=\"col-md-12 col-xs-12\">\n\n\t<!-- REPORTER BY RESOLUTION -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-15\"><?php echo lang_get( 'reporter_by_resolution' ) ?></th>\n\t\t\t\t<?php\n\t\t\t\t\t$t_resolutions = MantisEnum::getValues( config_get( 'resolution_enum_string' ) );\n\n\t\t\t\t\tforeach ( $t_resolutions as $t_resolution ) {\n\t\t\t\t\t\techo '<th class=\"align-right\">', get_enum_element( 'resolution', $t_resolution ), \"</th>\\n\";\n\t\t\t\t\t}\n\n\t\t\t\t\techo '<th class=\"align-right\">', lang_get( 'total' ), \"</th>\\n\";\n\t\t\t\t\techo '<th class=\"align-right\">', lang_get( 'percentage_errors' ), \"</th>\\n\";\n\t\t\t\t?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_reporter_resolution( config_get( 'resolution_enum_string' ), $t_filter ) ?>\n\t</table>\n\t</div>\n\n\t<!-- DEVELOPER BY RESOLUTION -->\n\t<div class=\"space-10\"></div>\n\t<div class=\"widget-box table-responsive\">\n\t\t<table class=\"table table-hover table-bordered table-condensed table-striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"width-15\"><?php echo lang_get( 'developer_by_resolution' ) ?></th>\n\t\t\t\t<?php\n\t\t\t\t\t$t_resolutions = MantisEnum::getValues( config_get( 'resolution_enum_string' ) );\n\n\t\t\t\t\tforeach ( $t_resolutions as $t_resolution ) {\n\t\t\t\t\t\techo '<th class=\"align-right\">', get_enum_element( 'resolution', $t_resolution ), \"</th>\\n\";\n\t\t\t\t\t}\n\n\t\t\t\t\techo '<th class=\"align-right\">', lang_get( 'total' ), \"</th>\\n\";\n\t\t\t\t\techo '<th class=\"align-right\">', lang_get( 'percentage_fixed' ), \"</th>\\n\";\n\t\t\t\t?>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<?php summary_print_developer_resolution( config_get( 'resolution_enum_string' ), $t_filter ) ?>\n\t</table>\n\t</div>\n\n</div>\n\n</div>\n</div>\n<div class=\"clearfix\"></div>\n<div class=\"space-10\"></div>\n</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "tag_attach.php",
          "type": "blob",
          "size": 2.115234375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tag Attach\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses bug_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses tag_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'utility_api.php' );\n\nform_security_validate( 'tag_attach' );\n\n$f_bug_id = gpc_get_int( 'bug_id' );\n$f_tag_select = gpc_get_int( 'tag_select' );\n$f_tag_string = gpc_get_string( 'tag_string' );\n\n$t_tags = array();\n\n$t_strings = explode( config_get( 'tag_separator' ), $f_tag_string );\nforeach( $t_strings as $t_name ) {\n\t$t_name = trim( $t_name );\n\tif( is_blank( $t_name ) ) {\n\t\tcontinue;\n\t}\n\n\t$t_tags[] = array( 'name' => $t_name );\n}\n\nif( $f_tag_select > 0 ) {\n\t$t_tags[] = array( 'id' => tag_get( $f_tag_select ) );\n}\n\n$t_data = array(\n\t'query' => array( 'issue_id' => $f_bug_id ),\n\t'payload' => array(\n\t\t'tags' => $t_tags\n\t)\n);\n\n$t_command = new TagAttachCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'tag_attach' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "tag_create.php",
          "type": "blob",
          "size": 1.779296875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tag Create\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses tag_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'tag_api.php' );\n\nform_security_validate( 'tag_create' );\n\n$f_tag_name = gpc_get_string( 'name' );\n$f_tag_description = gpc_get_string( 'description' );\n\n$t_tag_user = auth_get_current_user_id();\n\nif( !is_null( $f_tag_name ) ) {\n\t$t_tags = tag_parse_string( $f_tag_name );\n\tforeach ( $t_tags as $t_tag_row ) {\n\t\tswitch( $t_tag_row['id'] ) {\n\t\t\tcase -1:\n\t\t\t\ttag_create( $t_tag_row['name'], $t_tag_user, $f_tag_description );\n\t\t\t\tbreak;\n\t\t\tcase -2:\n\t\t\t\terror_parameters( $t_tag_row['name'] );\n\t\t\t\ttrigger_error( ERROR_TAG_NAME_INVALID, ERROR );\n\t\t}\n\t}\n}\n\nform_security_purge( 'tag_create' );\n\nprint_header_redirect( 'manage_tags_page.php' );\n"
        },
        {
          "name": "tag_delete.php",
          "type": "blob",
          "size": 1.701171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Delete a tag\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses tag_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'tag_api.php' );\n\nform_security_validate( 'tag_delete' );\n\naccess_ensure_global_level( config_get( 'tag_edit_threshold' ) );\n\n$f_tag_id = gpc_get_int( 'tag_id' );\ntag_ensure_exists( $f_tag_id );\n$t_tag_row = tag_get( $f_tag_id );\n\nhelper_ensure_confirmed( lang_get( 'tag_delete_message' ), lang_get( 'tag_delete_button' ) );\n\ntag_delete( $f_tag_id );\n\nform_security_purge( 'tag_delete' );\n\nprint_header_redirect( 'manage_tags_page.php' );\n"
        },
        {
          "name": "tag_detach.php",
          "type": "blob",
          "size": 1.4208984375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Detach a tag\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses event_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\n\nform_security_validate( 'tag_detach' );\n\n$f_tag_id = gpc_get_int( 'tag_id' );\n$f_bug_id = gpc_get_int( 'bug_id' );\n\n$t_data = array(\n\t'query' => array( 'issue_id' => $f_bug_id, 'tag_id' => $f_tag_id )\n);\n\n$t_command = new TagDetachCommand( $t_data );\n$t_command->execute();\n\nform_security_purge( 'tag_detach' );\n\nprint_header_redirect_view( $f_bug_id );\n"
        },
        {
          "name": "tag_update.php",
          "type": "blob",
          "size": 2.3212890625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tag Update\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses tag_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'tag_api.php' );\nrequire_api( 'user_api.php' );\n\nform_security_validate( 'tag_update' );\n\ncompress_enable();\n\n$f_tag_id = gpc_get_int( 'tag_id' );\ntag_ensure_exists( $f_tag_id );\n$t_tag_row = tag_get( $f_tag_id );\n\n$t_can_edit = access_has_global_level( config_get( 'tag_edit_threshold' ) );\nif( $t_can_edit ) {\n\t$f_new_user_id = gpc_get_int( 'user_id', $t_tag_row['user_id'] );\n} else {\n\t$t_can_edit_own_tag = access_has_global_level( config_get( 'tag_edit_own_threshold' ) );\n\tif( !( $t_can_edit_own_tag && auth_get_current_user_id() == $t_tag_row['user_id'] ) ) {\n\t\taccess_denied();\n\t}\n\t# Never change the owner when user is editing their own tag\n\t$f_new_user_id = $t_tag_row['user_id'];\n}\n\n$f_new_name = gpc_get_string( 'name', $t_tag_row['name'] );\n$f_new_description = gpc_get_string( 'description', $t_tag_row['description'] );\n\ntag_update( $f_tag_id, $f_new_name, $f_new_user_id, $f_new_description );\n\nform_security_purge( 'tag_update' );\n\n$t_url = 'tag_view_page.php?tag_id='.$f_tag_id;\nprint_header_redirect( $t_url );\n"
        },
        {
          "name": "tag_update_page.php",
          "type": "blob",
          "size": 5.19140625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tag Update Page\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses prepare_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses tag_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'prepare_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'tag_api.php' );\nrequire_api( 'user_api.php' );\n\ncompress_enable();\n\n$f_tag_id = gpc_get_int( 'tag_id' );\ntag_ensure_exists( $f_tag_id );\n$t_tag_row = tag_get( $f_tag_id );\n\n$t_name = string_display_line( $t_tag_row['name'] );\n$t_description = string_display( $t_tag_row['description'] );\n\nif( !( access_has_global_level( config_get( 'tag_edit_threshold' ) )\n\t|| ( auth_get_current_user_id() == $t_tag_row['user_id'] )\n\t\t&& access_has_global_level( config_get( 'tag_edit_own_threshold' ) ) ) ) {\n\taccess_denied();\n}\n\nlayout_page_header( sprintf( lang_get( 'tag_update' ), $t_name ) );\n\nlayout_page_begin();\n?>\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<form method=\"post\" action=\"tag_update.php\">\n\t<div class=\"widget-box widget-color-blue2\">\n\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t<?php print_icon( 'fa-tag', 'ace-icon' ); ?>\n\t\t\t\t<?php echo sprintf( lang_get( 'tag_update' ), $t_name ) ?>\n\t\t\t</h4>\n\t\t</div>\n\t\t<div class=\"widget-body\">\n\t\t<div class=\"widget-main no-padding\">\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<?php print_link_button( 'tag_view_page.php?tag_id='.$f_tag_id, lang_get( 'tag_update_return' ),\n\t\t\t\t'btn-sm pull-right' ); ?>\n\t\t</div>\n\t\t<div class=\"form-container\">\n\t\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\t\t<fieldset>\n\t\t\t<input type=\"hidden\" name=\"tag_id\" value=\"<?php echo $f_tag_id ?>\"/>\n\t\t\t<?php echo form_security_field( 'tag_update' ) ?>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'tag_id' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td><?php echo $t_tag_row['id'] ?></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'tag_name' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type=\"text\" <?php echo helper_get_tab_index() ?> id=\"tag-name\" name=\"name\" class=\"input-sm\" value=\"<?php echo $t_name ?>\"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<?php\n\t\t\t\tif( access_has_global_level( config_get( 'tag_edit_threshold' ) ) ) {\n\t\t\t\t\techo '<td class=\"category\">', lang_get( 'tag_creator' ), '</td>';\n\t\t\t\t\techo '<td><select ', helper_get_tab_index(), ' id=\"tag-user-id\" name=\"user_id\" class=\"input-sm\">';\n\t\t\t\t\tprint_user_option_list( (int)$t_tag_row['user_id'], ALL_PROJECTS, (int)config_get( 'tag_create_threshold' ) );\n\t\t\t\t\techo '</select></td>';\n\t\t\t\t} else { ?>\n\t\t\t\t\t<td class=\"category\"><?php echo lang_get( 'tag_creator' ); ?></td>\n\t\t\t\t\t<td><?php echo string_display_line( user_get_name($t_tag_row['user_id']) ); ?></td><?php\n\t\t\t\t} ?>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'tag_created' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td><?php echo date( config_get( 'normal_date_format' ), $t_tag_row['date_created'] ) ?></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'tag_updated' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td><?php echo date( config_get( 'normal_date_format' ), $t_tag_row['date_updated'] ) ?></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'tag_description' ) ?>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<?php # Newline after opening textarea tag is intentional, see #25839 ?>\n\t\t\t\t\t<textarea class=\"form-control\" id=\"tag-description\" name=\"description\" <?php echo helper_get_tab_index() ?> cols=\"80\" rows=\"6\">\n<?php echo string_textarea( $t_description ) ?>\n</textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</fieldset>\n\t\t</table>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t<input <?php echo helper_get_tab_index() ?> type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'tag_update_button' ) ?>\" />\n\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "tag_view_page.php",
          "type": "blob",
          "size": 5.8994140625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tag View Page\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses form_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses tag_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'form_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'tag_api.php' );\nrequire_api( 'user_api.php' );\n\naccess_ensure_global_level( config_get( 'tag_view_threshold' ) );\ncompress_enable();\n\n$f_tag_id = gpc_get_int( 'tag_id' );\ntag_ensure_exists( $f_tag_id );\n$t_tag_row = tag_get( $f_tag_id );\n\n$t_name = string_display_line( $t_tag_row['name'] );\n$t_description = string_display( $t_tag_row['description'] );\n$t_can_edit = access_has_global_level( config_get( 'tag_edit_threshold' ) );\n$t_can_edit_own = $t_can_edit || auth_get_current_user_id() == tag_get_field( $f_tag_id, 'user_id' )\n\t&& access_has_global_level( config_get( 'tag_edit_own_threshold' ) );\n\n\nlayout_page_header( sprintf( lang_get( 'tag_details' ), $t_name ) );\n\nlayout_page_begin();\n?>\n\n<div class=\"col-md-12 col-xs-12\">\n<div class=\"space-10\"></div>\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n<h4 class=\"widget-title lighter\">\n\t<?php print_icon( 'fa-tag', 'ace-icon' ); ?>\n\t<?php echo sprintf( lang_get( 'tag_details' ), $t_name ) ?>\n</h4>\n</div>\n\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<?php print_link_button( 'search.php?tag_string='.urlencode($t_tag_row['name']),\n\t\t\tsprintf( lang_get( 'tag_filter_default' ), tag_stats_attached( $f_tag_id ) ),\n\t\t\t'btn-sm pull-right'); ?>\n\t</div>\n\t<div class=\"table-responsive\">\n\t\t<table class=\"table table-bordered table-condensed table-striped\">\n\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'tag_id' ) ?>\n\t\t</td>\n\t\t<td><?php echo $t_tag_row['id'] ?></td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'tag_name' ) ?>\n\t\t</td>\n\t\t<td><?php echo $t_name ?></td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'tag_creator' ) ?>\n\t\t</td>\n\t\t<td><?php echo string_display_line( user_get_name($t_tag_row['user_id']) ) ?></td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'tag_created' ) ?>\n\t\t</td>\n\t\t<td><?php echo date( config_get( 'normal_date_format' ), $t_tag_row['date_created'] ) ?></td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'tag_updated' ) ?>\n\t\t</td>\n\t\t<td><?php echo date( config_get( 'normal_date_format' ), $t_tag_row['date_updated'] ) ?></td>\n\t</tr>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'tag_description' ) ?>\n\t\t</td>\n\t\t<td><?php echo $t_description ?></td>\n\t</tr>\n\n<?php\n\t# Related tags\n\n\t$t_tags_related = tag_stats_related( $f_tag_id );\n\tif( count( $t_tags_related ) ) {\n?>\n\t<tr>\n\t\t<td class=\"category\">\n\t\t\t<?php echo lang_get( 'tag_related' ) ?>\n\t\t</td>\n\t\t\t<td>\n<?php\n\t\tforeach( $t_tags_related as $t_tag ) {\n\t\t\t$t_name = string_display_line( $t_tag['name'] );\n\t\t\t$t_description = string_display_line( $t_tag['description'] );\n\t\t\t$t_count = $t_tag['count'];\n\t\t\t$t_link = string_html_specialchars( 'search.php?tag_string='.urlencode( '+' . $t_tag_row['name'] . config_get( 'tag_separator' ) . '+' . $t_name ) );\n\t\t\t$t_label = sprintf( lang_get( 'tag_related_issues' ), $t_tag['count'] ); ?>\n\t\t\t<div class=\"col-md-3 col-xs-6 no-padding\"><a href=\"tag_view_page.php?tag_id=<?php echo $t_tag['id']; ?>\" title=\"<?php echo $t_description; ?>\"><?php echo $t_name; ?></a></div>\n\t\t\t<div class=\"col-md-9 col-xs-6 no-padding\"><a href=\"<?php echo $t_link; ?>\" class=\"btn btn-xs btn-primary btn-white btn-round\"><?php echo $t_label; ?></a></div>\n\t\t\t<div class=\"clearfix\"></div>\n\t\t\t<div class=\"space-4\"></div>\n<?php\n\t\t}\n?>\n\t\t\t</td>\n\t</tr>\n<?php\n\t} ?>\n</table >\n</div >\n\n<?php\n\tif( $t_can_edit_own || $t_can_edit ) {\n?>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n<?php\n\t\tif( $t_can_edit_own ) {\n?>\n\t\t<form class=\"form-inline pull-left\" action=\"tag_update_page.php\" method=\"post\">\n\t\t\t<fieldset>\n\t\t\t\t<?php # CSRF protection not required here - form does not result in modifications ?>\n\t\t\t\t<input type=\"hidden\" name=\"tag_id\" value=\"<?php echo $f_tag_id ?>\" />\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'tag_update_button' ) ?>\" />\n\t\t\t</fieldset>\n\t\t</form><?php\n\t\t}\n\n\t\tif( $t_can_edit ) { ?>\n\t\t<form class=\"form-inline pull-left\" action=\"tag_delete.php\" method=\"post\">\n\t\t\t<fieldset>\n\t\t\t\t<?php echo form_security_field( 'tag_delete' ) ?>\n\t\t\t\t<input type=\"hidden\" name=\"tag_id\" value=\"<?php echo $f_tag_id ?>\" />\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'tag_delete_button' ) ?>\" />\n\t\t\t</fieldset>\n\t\t</form><?php\n\t\t} ?>\n\t</div><?php\n\t} ?>\n\t</div>\n\t</div>\n\t</div>\n</div>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "timeline_inc.php",
          "type": "blob",
          "size": 4.31640625,
          "content": "<?php\n# MantisBT - a php based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\nif( !defined( 'TIMELINE_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'timeline_api.php' );\n\ndefine( 'MAX_EVENTS', 50 );\n\n# Variables that are defined in parent script:\n#\n# $g_timeline_filter\tFilter array to be used to get timeline event\n#\t\t\t\t\t\tIf undefined, it's initialized as null.\n# $g_timeline_user\t\tUser id to limit timeline scope.\n#\t\t\t\t\t\tIf undefined, it's initialized as null.\n#\n\nif( !isset( $g_timeline_filter ) ) {\n\t$g_timeline_filter = null;\n}\nif( !isset( $g_timeline_user ) ) {\n\t$g_timeline_user = null;\n}\n\n$f_days = gpc_get_int( 'days', 0 );\n$f_all = gpc_get_int( 'all', 0 );\n$t_max_events = $f_all ? 0 : MAX_EVENTS + 1;\n\n$t_end_time = time() - ( $f_days * SECONDS_PER_DAY );\n$t_start_time = $t_end_time - ( 7 * SECONDS_PER_DAY );\n$t_events = timeline_events( $t_start_time, $t_end_time, $t_max_events, $g_timeline_filter, $g_timeline_user );\n\n$t_collapse_block = is_collapsed( 'timeline' );\n$t_block_css = $t_collapse_block ? 'collapsed' : '';\n$t_block_icon = $t_collapse_block ? 'fa-chevron-down' : 'fa-chevron-up';\n\n$t_url_page = string_sanitize_url( basename( $_SERVER['SCRIPT_NAME'] ) );\n# Timeline shows shows next/prev buttons that reload the page with new timeline parameters\n# we must preserve parent script query parameters\n$t_url_params = array();\nif( !empty( $_GET ) ) {\n\t# Sanitize request values to avoid xss\n\tforeach( $_GET as $t_key => $t_value ) {\n\t\t$t_url_params[$t_key] = htmlspecialchars( $t_value );\n\t}\n}\n# clear timeline own parameters, which will be added later as needed\nunset( $t_url_params['days'] );\nunset( $t_url_params['all'] );\n?>\n\n<div id=\"timeline\" class=\"widget-box widget-color-blue2 <?php echo $t_block_css ?>\">\n\t<div class=\"widget-header widget-header-small\">\n\t\t<h4 class=\"widget-title lighter\">\n\t\t\t<?php print_icon( 'fa-clock-o', 'ace-icon' ); ?>\n\t\t\t<?php echo lang_get( 'timeline_title' ) ?>\n\t\t</h4>\n\t\t<div class=\"widget-toolbar\">\n\t\t\t<a data-action=\"collapse\" href=\"#\">\n\t\t\t\t<?php print_icon( $t_block_icon, '1 ace-icon bigger-125' ); ?>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\n\t<div class=\"widget-body\">\n\t\t<div class=\"widget-toolbox\">\n\t\t\t<div class=\"btn-toolbar\">\n<?php\n\t\t\t\t$t_short_date_format = config_get( 'short_date_format' );\n\t\t\t\techo '&#160;&#160;';\n\t\t\t\techo '<span class=\"label label-grey\"> ' . date( $t_short_date_format, $t_start_time ) . ' </span>';\n\t\t\t\techo  ' .. ';\n\t\t\t\techo '<span class=\"label label-grey\"> ' . date( $t_short_date_format, $t_end_time ) . ' </span>';\n\t\t\t\techo '&#160;&#160;';\n\n\t\t\t\techo '<div class=\"btn-group\">';\n\t\t\t\t$t_url_params['days'] = $f_days + 7;\n\t\t\t\t$t_href = $t_url_page . '?' . http_build_query( $t_url_params );\n\t\t\t\techo ' <a class=\"btn btn-primary btn-xs btn-white btn-round\" href=\"' . $t_href . '\">' . lang_get( 'prev' ) . '</a>';\n\n\t\t\t\t$t_next_days = max( $f_days - 7, 0 );\n\n\t\t\t\tif( $t_next_days != $f_days ) {\n\t\t\t\t\t$t_url_params['days'] = $t_next_days;\n\t\t\t\t\t$t_href = $t_url_page . '?' . http_build_query( $t_url_params );\n\t\t\t\t\techo ' <a class=\"btn btn-primary btn-xs btn-white btn-round\" href=\"' . $t_href . '\">' . lang_get( 'next' ) . '</a>';\n\t\t\t\t}\n\t\t\t\techo '</div>';\n?>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"widget-main no-padding\">\n\t\t\t<div class=\"profile-feed\">\n\t\t\t</div>\n\t\t</div>\n\n<?php\n\tif( !$f_all && count( $t_events ) > MAX_EVENTS ) {\n\t\t$t_events = array_slice( $t_events, 0, MAX_EVENTS );\n\t\ttimeline_print_events( $t_events );\n\t\techo '<div class=\"widget-toolbox\">';\n\t\techo '<div class=\"btn-toolbar\">';\n\t\t$t_url_params['days'] = $f_days;\n\t\t$t_url_params['all'] = 1;\n\t\t$t_href = $t_url_page . '?' . http_build_query( $t_url_params );\n\t\techo '<a class=\"btn btn-primary btn-sm btn-white btn-round\" href=\"' . $t_href . '\">' . lang_get( 'timeline_more' ) . '</a>';\n\t\techo '</div>';\n\t\techo '</div>';\n\t} else {\n\t\ttimeline_print_events( $t_events );\n\t}\n?>\n\n\t</div>\n</div>\n"
        },
        {
          "name": "vendor",
          "type": "tree",
          "content": null
        },
        {
          "name": "verify.php",
          "type": "blob",
          "size": 6.2998046875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Verify Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @author Marcello Scata' <marcelloscata at users.sourceforge.net> ITALY\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses user_api.php\n *\n * Unhandled exceptions will be caught by the default error handler\n * @noinspection PhpUnhandledExceptionInspection\n */\n\n# don't auto-login when trying to verify new user\n$g_login_anonymous = false;\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\nrequire_css( 'login.css' );\n\n\n# check if at least one way to get here is enabled\nif( !auth_signup_enabled() &&\n\tOFF == config_get( 'lost_password_feature' ) &&\n\tOFF == config_get( 'send_reset_password' ) ) {\n\ttrigger_error( ERROR_LOST_PASSWORD_NOT_ENABLED, ERROR );\n}\n\n$f_user_id = gpc_get_string( 'id' );\n$f_confirm_hash = gpc_get_string( 'confirm_hash' );\n\n# force logout on the current user if already authenticated\nif( auth_is_user_authenticated() ) {\n\tauth_logout();\n\n\t# reload the page after logout\n\tprint_header_redirect( 'verify.php?id=' . $f_user_id . '&confirm_hash=' . $f_confirm_hash );\n}\n\n$t_token_confirm_hash = token_get_value( TOKEN_ACCOUNT_ACTIVATION, $f_user_id );\n\nif( $t_token_confirm_hash == null || $f_confirm_hash !== $t_token_confirm_hash ) {\n\ttrigger_error( ERROR_LOST_PASSWORD_CONFIRM_HASH_INVALID, ERROR );\n}\n\nuser_reset_failed_login_count_to_zero( $f_user_id );\nuser_reset_lost_password_in_progress_count_to_zero( $f_user_id );\n\n# fake login so the user can set their password\nauth_attempt_script_login( user_get_username( $f_user_id ) );\n\nuser_increment_login_count( $f_user_id );\n\n\n# extracts the user information\n# and prefixes it with u_\n$t_row = user_get_row( $f_user_id );\n\nextract( $t_row, EXTR_PREFIX_ALL, 'u' );\n\n$t_can_change_password = auth_can_set_password( $f_user_id );\n\nlayout_login_page_begin();\n\n?>\n\n<div class=\"col-md-offset-4 col-md-4 col-sm-8 col-sm-offset-1\">\n\t<div class=\"login-container\">\n\t\t<div class=\"space-12 hidden-480\"></div>\n\t\t<?php layout_login_page_logo() ?>\n\t\t<div class=\"space-24 hidden-480\"></div>\n\n\t\t<div id=\"reset-passwd-msg\" class=\"alert alert-sm alert-warning \">\n\t\t<?php\n\t\t\tif( $t_can_change_password ) {\n\t\t\t\techo lang_get( 'verify_warning' ) . '<br />';\n\t\t\t\techo lang_get( 'verify_change_password' );\n\t\t\t} else {\n\t\t\t\techo auth_password_managed_elsewhere_message();\n\t\t\t}\n\t\t?>\n\t\t</div>\n\n\t\t<?php\n\t\tif( $t_can_change_password ) {\n\t\t?>\n\n\t\t\t<div class=\"position-relative\">\n\t\t\t<div class=\"signup-box visible widget-box no-border\" id=\"login-box\">\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main\">\n\n\t\t\t\t\t<!-- Login Form BEGIN -->\n\n\t\t<div id=\"verify-div\" class=\"form-container\">\n\t\t\t<form id=\"account-update-form\" method=\"post\" action=\"account_update.php\">\n\t\t\t\t<fieldset>\n\t\t\t\t\t<legend><span><?php echo lang_get( 'edit_account_title' ) . ' - ' . string_display_line( $u_username ) ?></span></legend>\n\t\t\t\t\t<div class=\"space-10\"></div>\n\t\t\t\t\t<input type=\"hidden\" name=\"verify_user_id\" value=\"<?php echo $u_id ?>\">\n\t\t\t\t\t<input type=\"hidden\" name=\"confirm_hash\" value=\"<?php echo string_html_specialchars( $f_confirm_hash ) ?>\">\n\t\t\t\t\t<?php\n\t\t\t\t\techo form_security_field( 'account_update' );\n\t\t\t\t\t# When verifying account, set a token to limit time to submit new password\n\t\t\t\t\ttoken_set( TOKEN_ACCOUNT_VERIFY,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tconfig_get( 'reauthentication_expiry' ),\n\t\t\t\t\t\t$u_id\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t<div class=\"field-container\">\n\t\t\t\t\t\t<label class=\"block clearfix\">\n\t\t\t\t\t\t\t<span class=\"block input-icon input-icon-right\">\n\t\t\t\t\t\t\t\t<input id=\"realname\" class=\"form-control\" placeholder=\"<?php echo lang_get( 'realname' ) ?>\" type=\"text\" size=\"32\" maxlength=\"<?php echo DB_FIELD_SIZE_REALNAME ?>\" name=\"realname\" value=\"<?php echo string_attribute( $u_realname ) ?>\" />\n\t\t\t\t\t\t\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span class=\"label-style\"></span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"field-container\">\n\t\t\t\t\t\t<label class=\"block clearfix\">\n\t\t\t\t\t\t\t<span class=\"block input-icon input-icon-right\">\n\t\t\t\t\t\t\t\t<input id=\"password\" class=\"form-control\" placeholder=\"<?php echo lang_get( 'password' ) ?>\" type=\"password\" size=\"32\" maxlength=\"<?php echo auth_get_password_max_size(); ?>\" name=\"password\"/>\n\t\t\t\t\t\t\t\t<?php print_icon( 'fa-lock', 'ace-icon' ); ?>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span class=\"label-style\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"field-container\">\n\t\t\t\t\t\t<label class=\"block clearfix\">\n\t\t\t\t\t\t\t<span class=\"block input-icon input-icon-right\">\n\t\t\t\t\t\t\t\t<input id=\"password-confirm\" class=\"form-control\" placeholder=\"<?php echo lang_get( 'confirm_password' ) ?>\" type=\"password\" size=\"32\" maxlength=\"<?php echo auth_get_password_max_size(); ?>\" name=\"password_confirm\"/>\n\t\t\t\t\t\t\t\t<?php print_icon( 'fa-lock', 'ace-icon' ); ?>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span class=\"label-style\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"space-18\"></div>\n\t\t\t\t\t<span class=\"submit-button\">\n\t\t\t\t\t\t<button type=\"submit\" class=\"width-100 width-40 pull-right btn btn-success btn-inverse bigger-110\">\n\t\t\t\t\t\t\t<span class=\"bigger-110\"><?php echo lang_get( 'update_user_button' ) ?></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\n\t\t\t\t</fieldset>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</div>\n\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\n<?php\n}\n\nlayout_login_page_end();\n"
        },
        {
          "name": "view.php",
          "type": "blob",
          "size": 1.130859375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * View Bug\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n */\n\nrequire_once( 'core.php' );\n\n$t_file = __FILE__;\n$t_mantis_dir = __DIR__ . DIRECTORY_SEPARATOR;\n$t_show_page_header = true;\n$t_force_readonly = false;\n\ndefine( 'BUG_VIEW_INC_ALLOW', true );\ninclude( __DIR__ . '/bug_view_inc.php' );\n"
        },
        {
          "name": "view_all_bug_page.php",
          "type": "blob",
          "size": 3.3876953125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * View all bug page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses current_user_api.php\n * @uses filter_api.php\n * @uses gpc_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses user_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'user_api.php' );\n\nrequire_js( 'bugFilter.js' );\nrequire_css( 'status_config.php' );\n\nauth_ensure_user_authenticated();\n\n$f_page_number\t\t= gpc_get_int( 'page_number', 1 );\n# Get Project Id and set it as current\n$t_project_id = gpc_get_int( 'project_id', helper_get_current_project() );\nif( ( ALL_PROJECTS == $t_project_id || project_exists( $t_project_id ) ) && $t_project_id != helper_get_current_project() ) {\n\thelper_set_current_project( $t_project_id );\n\t# Reloading the page is required so that the project browser\n\t# reflects the new current project\n\tprint_header_redirect( $_SERVER['REQUEST_URI'], true, false, true );\n}\n\n$t_per_page = null;\n$t_bug_count = null;\n$t_page_count = null;\n\n$t_rows = filter_get_bug_rows( $f_page_number, $t_per_page, $t_page_count, $t_bug_count, null, null, null, true );\nif( $t_rows === false ) {\n\tprint_header_redirect( 'view_all_set.php?type=0' );\n}\n\n$t_bugslist = array();\n$t_unique_user_ids = array();\n$t_unique_project_ids = array();\n$t_row_count = count( $t_rows );\nfor( $i=0; $i < $t_row_count; $i++ ) {\n\tarray_push( $t_bugslist, $t_rows[$i]->id );\n\t$t_project_id = $t_rows[$i]->project_id;\n\t$t_unique_project_ids[$t_project_id] = $t_project_id;\n}\ngpc_set_cookie( config_get_global( 'bug_list_cookie' ), implode( ',', $t_bugslist ) );\n\ncompress_enable();\n\n# don't index view issues pages\nhtml_robots_noindex();\n\nlayout_page_header_begin( lang_get( 'view_bugs_link' ) );\n\n$t_refresh_delay = current_user_get_pref( 'refresh_delay' );\nif( $t_refresh_delay > 0 ) {\n\t$t_query = '?';\n\n\tif( $f_page_number > 1 )  {\n\t\t$t_query .= 'page_number=' . $f_page_number . '&';\n\t}\n\n\t$t_query .= 'refresh=true';\n\n\thtml_meta_redirect( 'view_all_bug_page.php' . $t_query, $t_refresh_delay * 60 );\n}\n\nlayout_page_header_end();\n\nlayout_page_begin( __FILE__ );\n\ndefine( 'VIEW_ALL_INC_ALLOW', true );\ninclude( __DIR__ . '/view_all_inc.php' );\n\nlayout_page_end();\n"
        },
        {
          "name": "view_all_inc.php",
          "type": "blob",
          "size": 9.1376953125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * View all bugs include file\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses category_api.php\n * @uses columns_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses event_api.php\n * @uses filter_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n */\n\nif( !defined( 'VIEW_ALL_INC_ALLOW' ) ) {\n\treturn;\n}\n\nrequire_api( 'category_api.php' );\nrequire_api( 'columns_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'event_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\n\n/**\n * Variables defined in parent script.\n * @var array $g_filter\n * @var array $t_rows\n * @var array $t_unique_project_ids\n * @var int $f_page_number\n * @var int $t_page_count\n * @var int $t_bug_count\n */\n$t_filter = current_user_get_bug_filter();\nfilter_init( $t_filter );\n\nlist( $t_sort, ) = explode( ',', $g_filter['sort'] );\nlist( $t_dir, ) = explode( ',', $g_filter['dir'] );\n\n$g_checkboxes_exist = false;\n\n$t_current_project = helper_get_current_project();\n# Improve performance by caching category data in one pass\nif( $t_current_project > 0 ) {\n\tcategory_get_all_rows( $t_current_project );\n}\n\n$g_columns = helper_get_columns_to_view( COLUMNS_TARGET_VIEW_PAGE );\n\nbug_cache_columns_data( $t_rows, $g_columns );\n\n$t_filter_position = config_get( 'filter_position' );\n\n# -- ====================== FILTER FORM ========================= --\nif( ( $t_filter_position & FILTER_POSITION_TOP ) == FILTER_POSITION_TOP ) {\n\tfilter_draw_selection_area();\n}\n# -- ====================== end of FILTER FORM ================== --\n\n\n# -- ====================== BUG LIST ============================ --\n\n?>\n<div class=\"col-md-12 col-xs-12\">\n\t<div class=\"space-10\"></div>\n\t<form id=\"bug_action\" method=\"post\" action=\"bug_actiongroup_page.php\">\n\t\t<?php # CSRF protection not required here - form does not result in modifications ?>\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n<?php\n\tprint_icon( 'fa-columns', 'ace-icon' );\n\techo lang_get( 'viewing_bugs_title' );\n\n\t# Viewing range info\n\t$v_start = 0;\n\t$v_end = 0;\n\tif (count($t_rows) > 0) {\n\t\t$v_start = $g_filter['per_page'] * ($f_page_number - 1) + 1;\n\t\t$v_end = $v_start + count($t_rows) - 1;\n\t}\n\techo '<span class=\"badge\"> ' . $v_start . ' - ' . $v_end . ' / ' . $t_bug_count . '</span>' ;\n?>\n\t\t\t\t</h4>\n\t\t\t</div>\n\n<?php\n\t# -- ====================== TOP TOOLBAR ============================ --\n\n\t$t_filter_param = filter_get_temporary_key_param( $t_filter );\n\tif( empty( $t_filter_param ) ) {\n\t\t$t_summary_link = 'view_all_set.php?summary=1&temporary=y';\n\t} else {\n\t\t$t_filter_param = '?' . $t_filter_param;\n\t\t$t_summary_link = 'summary_page.php' . $t_filter_param;\n\t}\n\n\t$t_can_print_reports = access_has_project_level( config_get( 'print_reports_threshold' ), $t_current_project );\n\t$t_can_export_issues = access_has_project_level( config_get( 'export_issues_threshold' ), $t_current_project );\n\t$t_can_view_summary = access_has_project_level( config_get( 'view_summary_threshold' ), $t_current_project );\n\n\t# Plugin menu items\n\t$t_event_menu_options = event_signal( 'EVENT_MENU_FILTER' );\n\tob_start();\n\tforeach( $t_event_menu_options as $t_plugin => $t_plugin_menu_options ) {\n\t\tforeach( $t_plugin_menu_options as $t_callback => $t_callback_menu_options ) {\n\t\t\tif( !is_array( $t_callback_menu_options ) ) {\n\t\t\t\t$t_callback_menu_options = array( $t_callback_menu_options );\n\t\t\t}\n\n\t\t\tforeach( $t_callback_menu_options as $t_menu_option ) {\n\t\t\t\tif( $t_menu_option ) {\n\t\t\t\t\techo $t_menu_option;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t$t_plugin_menu_items = ob_get_clean();\n\n\t# Page number links\n\tob_start();\n\tprint_page_links(\n\t\t'view_all_bug_page.php',\n\t\t1, $t_page_count, $f_page_number,\n\t\tfilter_get_temporary_key( $t_filter )\n\t);\n\t$t_page_number_links = ob_get_clean();\n\n\t# Only display the toolbar if there's anything to print in it\n\tif( $t_can_print_reports\n\t\t|| $t_can_export_issues\n\t\t|| $t_can_view_summary\n\t\t|| $t_plugin_menu_items\n\t\t|| $t_page_number_links\n\t) {\n?>\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t<div class=\"btn-toolbar\">\n\t\t\t\t\t\t<div class=\"btn-group pull-left\">\n<?php\n\t\tif( $t_can_print_reports ) {\n\t\t\tprint_small_button(\n\t\t\t\t'print_all_bug_page.php' . $t_filter_param,\n\t\t\t\tlang_get( 'print_all_bug_page_link' )\n\t\t\t);\n\t\t}\n\t\tif( $t_can_export_issues ) {\n\t\t\tprint_small_button( 'csv_export.php' . $t_filter_param, lang_get( 'csv_export' ) );\n\t\t\tprint_small_button( 'excel_xml_export.php' . $t_filter_param, lang_get( 'excel_export' ) );\n\t\t}\n\t\tif( $t_can_view_summary ) {\n\t\t\tprint_small_button( $t_summary_link, lang_get( 'summary_link' ) );\n\t\t}\n\n\t\techo $t_plugin_menu_items;\n?>\n\t\t\t\t\t\t</div>\n<?php\n\t\tif( $t_page_number_links ) {\n?>\n\t\t\t\t\t\t<div class=\"btn-group pull-right\">\n\t\t\t\t\t\t\t<?php echo $t_page_number_links ?>\n\t\t\t\t\t\t</div>\n<?php\n\t\t}\n?>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n<?php\n\t}\n\n\t# -- ====================== end of TOP TOOLBAR ============================ --\n?>\n\n\t\t\t<div class=\"widget-main no-padding\">\n\t\t\t\t<div class=\"table-responsive checkbox-range-selection\">\n\t\t\t\t\t<table id=\"buglist\" class=\"table table-bordered table-condensed table-hover table-striped\">\n\t\t\t\t\t\t<thead>\n<?php # -- Bug list column header row -- ?>\n\t\t\t\t\t\t\t<tr class=\"buglist-headers\">\n<?php\n\t$t_title_function = 'print_column_title';\n\t$t_sort_properties = filter_get_visible_sort_properties_array( $t_filter, COLUMNS_TARGET_VIEW_PAGE );\n\tforeach( $g_columns as $t_column ) {\n\t\thelper_call_custom_function( $t_title_function, array( $t_column, COLUMNS_TARGET_VIEW_PAGE, $t_sort_properties ) );\n\t}\n?>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\n\t\t\t\t\t\t<tbody>\n\n<?php\n\twrite_bug_rows( $t_rows );\n\t# -- ====================== end of BUG LIST ========================= --\n?>\n\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n<?php\n# -- ====================== MASS BUG MANIPULATION =================== --\n# @@@ ideally buglist-footer would be in <tfoot>, but that's not possible due to global g_checkboxes_exist set via write_bug_rows()\n?>\n\t\t\t\t\t<div class=\"form-inline pull-left\">\n<?php\n\t\t/**\n\t\t * Global $g_checkboxes_exist is set in write_bug_rows() via the\n\t\t * print_column_value custom function.\n\t\t * @noinspection PhpConditionAlreadyCheckedInspection\n\t\t */\n\t\tif( $g_checkboxes_exist ) {\n\t\t\techo '<label class=\"inline\">';\n\t\t\techo '<input class=\"ace check_all input-sm\" type=\"checkbox\" id=\"bug_arr_all\" name=\"bug_arr_all\" value=\"all\" />';\n\t\t\techo '<span class=\"lbl padding-6\">' . lang_get( 'select_all' ) . ' </span > ';\n\t\t\techo '</label>';\n?>\n\t\t\t<!--suppress HtmlFormInputWithoutLabel -->\n\t\t\t<select name=\"action\" class=\"input-sm\">\n\t\t\t\t<?php print_all_bug_action_option_list($t_unique_project_ids) ?>\n\t\t\t</select>\n\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-sm btn-round\" value=\"<?php echo lang_get('ok'); ?>\"/>\n<?php\n\t\t} else {\n\t\t\techo '&#160;';\n\t\t}\n?>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"btn-group pull-right\">\n\t\t\t\t\t\t<?php echo $t_page_number_links ?>\n\t\t\t\t\t</div>\n<?php # -- ====================== end of MASS BUG MANIPULATION ========================= -- ?>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n<?php\n\n# -- ====================== FILTER FORM ========================= --\nif( ( $t_filter_position & FILTER_POSITION_BOTTOM ) == FILTER_POSITION_BOTTOM ) {\n\tfilter_draw_selection_area();\n}\n# -- ====================== end of FILTER FORM ================== --\n\n/**\n * Output Bug Rows\n *\n * @param array $p_rows An array of bug objects.\n * @return void\n */\nfunction write_bug_rows( array $p_rows ) {\n\tglobal $g_columns, $g_filter;\n\n\t$t_in_stickies = ( $g_filter && ( 'on' == $g_filter[FILTER_PROPERTY_STICKY] ) );\n\n\t# Loop over bug rows\n\t$t_rows = count( $p_rows );\n\tfor( $i = 0; $i < $t_rows; $i++ ) {\n\t\t$t_row = $p_rows[$i];\n\n\t\tif( ( 0 == $t_row->sticky ) && ( 0 == $i ) ) {\n\t\t\t$t_in_stickies = false;\n\t\t}\n\t\tif( ( 0 == $t_row->sticky ) && $t_in_stickies ) {\n\t\t\t# demarcate stickies, if any have been shown\n\t\t\techo '<tr class=\"sticky-separator\"><td colspan=\"' . count( $g_columns ) . '\"></td></tr>';\n\t\t\t$t_in_stickies = false;\n\t\t}\n\n\t\techo '<tr>';\n\t\tforeach( $g_columns as $t_column ) {\n\t\t\thelper_call_custom_function( 'print_column_value', array( $t_column, $t_row ) );\n\t\t}\n\t\techo '</tr>';\n\t}\n}\n"
        },
        {
          "name": "view_all_set.php",
          "type": "blob",
          "size": 7.9951171875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Set cookie for View all bugs page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses custom_field_api.php\n * @uses error_api.php\n * @uses filter_api.php\n * @uses filter_constants_inc.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses logging_api.php\n * @uses print_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'filter_constants_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'logging_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'utility_api.php' );\n\nauth_ensure_user_authenticated();\n\n$f_type\t\t\t\t\t= gpc_get_int( 'type', -1 );\n$f_source_query_id\t\t= gpc_get_int( 'source_query_id', -1 );\n$f_isset_temporary\t\t= gpc_isset( 'temporary' );\n$f_make_temporary\t\t= gpc_get_bool( 'temporary' );\n$f_isset_new_key\t\t= gpc_isset( 'new' );\n$f_force_new_key\t\t= gpc_get_bool( 'new' );\n$f_project_id\t\t\t= gpc_get_int( 'set_project_id', -1 );\n\n# flags to redirect after changing the filter\n# 'print' will redirect to print_all_bug_page.php\n# 'summary' will redirect to summary_page.php\n# otherwise, the default redirect is to view_all_bug_page.php\n$f_print\t\t\t\t= gpc_get_bool( 'print' );\n$f_summary\t\t\t\t= gpc_get_bool( 'summary' );\n\n# Get the filter in use\n$t_setting_arr = current_user_get_bug_filter();\n\n# If there is an explicit \"temporary\" parameter true/false, will force the new filter\n# to be termporary (true) or persistent (false), according to its value.\n# If the parameter is not present, the filter will be kept the same as original.\nif( $f_isset_temporary ) {\n\t# when only changing the temporary status of a filter and no action is specified\n\t# we assume not to reset current filter\n\tif( $f_type == -1 ) {\n\t\t# use type 2 wich keeps current filter values\n\t\t$f_type = FILTER_ACTION_PARSE_ADD;\n\t}\n\t$t_temp_filter = $f_make_temporary;\n} else {\n\t$t_temp_filter = filter_is_temporary( $t_setting_arr );\n}\n\nif( $f_type == -1 && $f_isset_new_key ) {\n\t# use an action that keeps current filter values\n\t$f_type = FILTER_ACTION_PARSE_ADD;\n}\n\nif( $f_type == -1 ) {\n\tprint_header_redirect( 'view_all_bug_page.php' );\n}\n\n# -1 is a special case stored query: it means we want to reset our filter\nif( ( $f_type == FILTER_ACTION_LOAD ) && ( $f_source_query_id == -1 ) ) {\n\t$f_type = FILTER_ACTION_RESET;\n}\n\n# If user can't use persistent filters, force the creation of a temporary filter\nif( !filter_user_can_use_persistent( auth_get_current_user_id() ) ) {\n\t$t_temp_filter = true;\n}\n\n$t_previous_temporary_key = filter_get_temporary_key( $t_setting_arr );\n$t_force_new_key = $t_temp_filter && $f_force_new_key;\n\n# Clear the source query id.  Since we have entered new filter criteria.\nif( isset( $t_setting_arr['_source_query_id'] ) ) {\n\tunset( $t_setting_arr['_source_query_id'] );\n}\n\nswitch( $f_type ) {\n\t# Apply a new empty filter\n\tcase FILTER_ACTION_RESET:\n\t\tlog_event( LOG_FILTERING, 'view_all_set.php: New filter' );\n\t\t$t_setting_arr = array();\n\t\tbreak;\n\n\t# Read new filter parameters. (filter_gpc_get reads a new set of parameters)\n\t# Parameter that are not submitted, will be reset to defaults.\n\tcase FILTER_ACTION_PARSE_NEW:\n\t\tlog_event( LOG_FILTERING, 'view_all_set.php: Parse a new filter' );\n\t\t$t_setting_arr = filter_gpc_get();\n\t\tbreak;\n\n\t# Read and update filter parameters (filter_gpc_get is called over current filter)\n\t# Parameter that are not submitted, will not be modified\n\tcase FILTER_ACTION_PARSE_ADD:\n\t\tlog_event( LOG_FILTERING, 'view_all_set.php: Parse incremental filter values' );\n\t\t$t_setting_arr = filter_gpc_get( $t_setting_arr );\n\t\tbreak;\n\n\t# Fetch a stored filter from database\n\tcase FILTER_ACTION_LOAD:\n\t\tlog_event( LOG_FILTERING, 'view_all_set.php: Load stored filter' );\n\n\t\t$t_setting_arr = filter_get( $f_source_query_id, null );\n\t\tif( null === $t_setting_arr ) {\n\t\t\t# couldn't get the filter, if we were trying to use the filter, clear it and reload\n\t\t\terror_proceed_url( 'view_all_set.php?type=' . FILTER_ACTION_RESET );\n\t\t\ttrigger_error( ERROR_FILTER_NOT_FOUND, ERROR );\n\t\t\texit;\n\t\t} else {\n\t\t\t$t_setting_arr['_source_query_id'] = $f_source_query_id;\n\t\t}\n\t\tbreak;\n\n\t# Generalise the filter\n\tcase FILTER_ACTION_GENERALIZE:\n\t\tlog_event( LOG_FILTERING, 'view_all_set.php: Generalise the filter' );\n\n\t\t$t_setting_arr[FILTER_PROPERTY_CATEGORY_ID]\t\t\t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_REPORTER_ID] \t\t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_HANDLER_ID] \t\t\t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_BUILD] \t\t\t\t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_VERSION] \t\t\t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_PRIORITY]\t\t\t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_FIXED_IN_VERSION]\t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_TARGET_VERSION]\t\t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_MONITOR_USER_ID] \t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_NOTE_USER_ID]  \t\t= array( META_FILTER_ANY );\n\t\t$t_setting_arr[FILTER_PROPERTY_RELATIONSHIP_TYPE] = -1;\n\t\t$t_setting_arr[FILTER_PROPERTY_RELATIONSHIP_BUG] \t= 0;\n\n\t\t$t_custom_fields \t\t= custom_field_get_ids(); # @@@ (thraxisp) This should really be the linked ids, but we don't know the project\n\t\t$t_custom_fields_data \t= array();\n\t\tif( is_array( $t_custom_fields ) && ( count( $t_custom_fields ) > 0 ) ) {\n\t\t\tforeach( $t_custom_fields as $t_cfid ) {\n\t\t\t\t$t_custom_fields_data[$t_cfid] =  array( META_FILTER_ANY );\n\t\t\t}\n\t\t}\n\t\t$t_setting_arr['custom_fields'] = $t_custom_fields_data;\n\t\tbreak;\n\n\tdefault:\n\t\t# does nothing. catch all case\n\t\tlog_event( LOG_FILTERING, 'view_all_set.php: default - do nothing' );\n\t\tbreak;\n}\n\n$t_setting_arr = filter_ensure_valid_filter( $t_setting_arr );\n\n# If only using a temporary filter, don't store it in the database\nif( !$t_temp_filter ) {\n\t# get project if it was specified\n\t$t_project_id = ( $f_project_id >= 0 ) ? $f_project_id : null;\n\t# Store the filter in the database as the current filter for the project\n\tfilter_set_project_filter( $t_setting_arr, $t_project_id );\n}\n\n# evaluate redirect\nif( $f_print ) {\n\t$t_redirect_url = 'print_all_bug_page.php';\n} elseif( $f_summary ) {\n\t$t_redirect_url = 'summary_page.php';\n} else {\n\t$t_redirect_url = 'view_all_bug_page.php';\n}\n\nif( $t_temp_filter ) {\n\t# keeping the $t_previous_temporary_key, and using it to save back the filter\n\t# The key inside the filter array may have been deleted as part of some actions\n\t# Note, if we reset the key here, a new filter will be created after each filter change.\n\t# This adds a lot of orphaned filters to session store, but would allow consistency\n\t# through browser back button, for example.\n\tif( $t_force_new_key ) {\n\t\t$t_previous_temporary_key = null;\n\t\tunset( $t_setting_arr['_temporary_key'] );\n\t}\n\t$t_temporary_key = filter_temporary_set( $t_setting_arr, $t_previous_temporary_key );\n\t$t_redirect_url = $t_redirect_url . '?' . filter_get_temporary_key_param( $t_temporary_key );\n}\nprint_header_redirect( $t_redirect_url );\n"
        },
        {
          "name": "view_filters_page.php",
          "type": "blob",
          "size": 4.6005859375,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * View Filters Page\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses current_user_api.php\n * @uses custom_field_api.php\n * @uses filter_api.php\n * @uses filter_constants_inc.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses version_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'current_user_api.php' );\nrequire_api( 'custom_field_api.php' );\nrequire_api( 'filter_api.php' );\nrequire_api( 'filter_constants_inc.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'version_api.php' );\n\nauth_ensure_user_authenticated();\n\ncompress_enable();\n\nlayout_page_header();\n\nlayout_page_begin();\n\n$f_filter_id = gpc_get( 'filter_id', null );\nif( null === $f_filter_id ) {\n\t$t_filter = current_user_get_bug_filter();\n\t$t_named_filter = false;\n} else {\n\t$t_filter = filter_get( $f_filter_id, null );\n\tif( null === $t_filter ) {\n\t\taccess_denied();\n\t}\n\t$t_named_filter = true;\n}\n\n$f_for_screen = gpc_get_bool( 'for_screen', true );\n\n$t_action  = 'view_all_set.php?f=3';\n\nif( $f_for_screen == false ) {\n\t$t_action  = 'view_all_set.php';\n}\n\n$f_static = gpc_get_bool( 'static', false );\n\n$f_view_type = gpc_get_string( 'view_type', $t_filter['_view_type'] );\n$t_filter['_view_type'] = $f_view_type;\n$t_filter = filter_ensure_valid_filter( $t_filter );\n\n?>\n<div class=\"space-10\"></div>\n<div class=\"col-md-12 col-xs-12\">\n\n\t<form method=\"post\" name=\"filters\" id=\"filters_form_open\" action=\"<?php echo $t_action; ?>\">\n\n\t<?php # CSRF protection not required here - form does not result in modifications ?>\n\t<input type=\"hidden\" name=\"type\" value=\"1\" />\n\t<input type=\"hidden\" name=\"view_type\" value=\"<?php echo $t_filter['_view_type']; ?>\" />\n\t<?php\n\t\tif( $f_for_screen == false ) {\n\t\t\tprint '<input type=\"hidden\" name=\"print\" value=\"1\" />';\n\t\t\tprint '<input type=\"hidden\" name=\"offset\" value=\"0\" />';\n\t\t}\n\t?>\n\n\t\t<div class=\"widget-box widget-color-blue2\">\n\t\t\t<div class=\"widget-header widget-header-small\">\n\t\t\t\t<h4 class=\"widget-title lighter\">\n\t\t\t\t\t<?php print_icon( 'fa-filter', 'ace-icon' ); ?>\n\t\t\t\t\t<?php echo lang_get('filters') ?>\n\t\t\t\t</h4>\n\n\t\t\t\t<div class=\"widget-toolbar\">\n\t\t\t\t\t<div class=\"widget-menu\">\n\t\t\t\t\t\t<a href=\"#\" data-action=\"settings\" data-toggle=\"dropdown\">\n\t\t\t\t\t\t\t<?php print_icon( 'fa-bars', 'ace-icon bigger-125' ); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"dropdown-menu dropdown-menu-right dropdown-yellow dropdown-caret dropdown-closer\">\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t$t_url = 'view_filters_page.php?static=' . (int)$f_static;\n\t\t\t\t\t\t\t\tif( $t_named_filter ) {\n\t\t\t\t\t\t\t\t\t$t_url .= '&filter_id=' . $f_filter_id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$t_url .= '&view_type=';\n\t\t\t\t\t\t\t\tfilter_print_view_type_toggle( $t_url, $t_filter['_view_type'] );\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class=\"widget-body\">\n\t\t\t\t<div class=\"widget-main no-padding\">\n\n\t\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tfilter_form_draw_inputs( $t_filter, $f_for_screen, $f_static );\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t\t\t\t\t<div class=\"btn-toolbar pull-left\">\n\t\t\t\t\t\t\t<div class=\"form-inline\">\n\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-sm btn-white btn-round no-float\" name=\"filter\" value=\"<?php echo lang_get( 'use_query' )?>\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "view_user_page.php",
          "type": "blob",
          "size": 6.658203125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * View User Page\n *\n * @package MantisBT\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses access_api.php\n * @uses authentication_api.php\n * @uses config_api.php\n * @uses constant_inc.php\n * @uses error_api.php\n * @uses gpc_api.php\n * @uses helper_api.php\n * @uses html_api.php\n * @uses lang_api.php\n * @uses print_api.php\n * @uses string_api.php\n * @uses user_api.php\n * @uses utility_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'access_api.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'constant_inc.php' );\nrequire_api( 'error_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'helper_api.php' );\nrequire_api( 'html_api.php' );\nrequire_api( 'lang_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'string_api.php' );\nrequire_api( 'user_api.php' );\nrequire_api( 'utility_api.php' );\n\nconst TIMELINE_INC_ALLOW = true;\n\nauth_ensure_user_authenticated();\n\n# extracts the user information and prefixes it with u_\n$f_user_id = gpc_get_int( 'id', auth_get_current_user_id() );\n$t_row = user_get_row( $f_user_id );\nif( !$t_row ) {\n\terror_parameters( $f_user_id );\n\ttrigger_error( ERROR_USER_BY_ID_NOT_FOUND, ERROR );\n}\n\nextract( $t_row, EXTR_PREFIX_ALL, 'u' );\n\n$t_can_manage = access_has_global_level( config_get( 'manage_user_threshold' ) ) &&\n\taccess_has_global_level( $u_access_level );\n\n$t_can_see_realname = $t_can_manage || user_show_realname() ||\n    access_has_project_level( config_get( 'show_user_realname_threshold' ) );\n$t_can_see_email = $t_can_manage || access_has_project_level( config_get( 'show_user_email_threshold' ) );\n$t_can_impersonate = auth_can_impersonate( $f_user_id );\n\n# In case we're using LDAP to get the email address... this will pull out\n#  that version instead of the one in the DB\n$u_email = user_get_email( $u_id );\n$u_realname = user_get_realname( $u_id );\n\n$t_date_format = config_get( 'normal_date_format' );\n\nlayout_page_header();\n\nlayout_page_begin();\n$t_timeline_view_threshold_access = access_has_project_level( config_get( 'timeline_view_threshold' ) );\n$t_timeline_view_class = ( $t_timeline_view_threshold_access ) ? \"col-md-7\" : \"col-md-12\";\n?>\n<div class=\"<?php echo $t_timeline_view_class ?> col-xs-12\">\n<div class=\"widget-box widget-color-blue2\">\n<div class=\"widget-header widget-header-small\">\n\t<h4 class=\"widget-title lighter\">\n\t\t<?php print_icon( 'fa-user', 'ace-icon' ); ?>\n\t\t<?php echo lang_get('view_account_title') ?>\n\t</h4>\n</div>\n<div class=\"widget-body\">\n<div class=\"widget-main no-padding\">\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-condensed table-striped\">\n\t<fieldset>\n\t<tr>\n\t\t<th class=\"category\">\n\t\t\t<?php echo lang_get( 'username' ) ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php echo string_display_line( $u_username ) ?>\n\t\t</td>\n\t</tr>\n\t<?php\n\t\tif( $t_can_see_realname ) { ?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'realname' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo string_display_line( $u_realname ); ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t<?php } ?>\n\t<?php\n\t\tif( $t_can_see_email ) { ?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'email' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t    <?php\n\t\t\t\t\t\tif( !is_blank( $u_email ) ) {\n\t\t\t\t\t\t\tprint_email_link( $u_email, $u_email );\n\t\t\t\t\t\t}\n\t\t\t\t\t?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t<?php } ?>\n\t<?php\n\t\tif( $t_can_manage ) { ?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'access_level' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo string_display_line( get_enum_element( 'access_levels', $u_access_level ) ); ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'enabled' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo $u_enabled ? lang_get( 'yes' ) : lang_get( 'no' ); ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'protected' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo $u_protected ? lang_get( 'yes' ) : lang_get( 'no' ); ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'date_created' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo date( $t_date_format, $u_date_created ); ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<th class=\"category\">\n\t\t\t\t\t<?php echo lang_get( 'last_visit' ) ?>\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t<?php echo date( $t_date_format, $u_last_visit ); ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<?php\n\t\t\t\tif( OFF != config_get( 'max_failed_login_count' ) ) { ?>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class=\"category\">\n\t\t\t\t\t\t<?php echo lang_get( 'failed_login_count' ) ?>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<?php echo $u_failed_login_count ?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t<?php } ?>\n\t<?php } ?>\n\t</fieldset>\n</table>\n\t</div>\n\t</div>\n\t<?php if( $t_can_manage || $t_can_impersonate ) { ?>\n\t<div class=\"widget-toolbox padding-8 clearfix\">\n\t\t<?php if( $t_can_manage ) { ?>\n\t\t<form id=\"manage-user-form\" method=\"get\" action=\"manage_user_edit_page.php\" class=\"pull-left\">\n\t\t\t<fieldset>\n\t\t\t\t<input type=\"hidden\" name=\"user_id\" value=\"<?php echo $f_user_id ?>\" />\n\t\t\t\t<input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'manage_user' ) ?>\" /></span>\n\t\t\t</fieldset>\n\t\t</form>\n\t\t<?php } ?>\n\t\t<?php if( $t_can_impersonate ) { ?>\n\t\t<form id=\"manage-user-impersonate-form\" method=\"post\" action=\"manage_user_impersonate.php\" class=\"pull-right\">\n\t\t\t<fieldset>\n\t\t\t\t<?php echo form_security_field( 'manage_user_impersonate' ) ?>\n\t\t\t\t<input type=\"hidden\" name=\"user_id\" value=\"<?php echo $f_user_id ?>\" />\n\t\t\t\t<span><input type=\"submit\" class=\"btn btn-primary btn-white btn-round\" value=\"<?php echo lang_get( 'impersonate_user_button' ) ?>\" /></span>\n\t\t\t</fieldset>\n\t\t</form>\n\t\t<?php } ?>\n\t</div>\n\t<?php } ?>\n</div>\n</div>\n</div>\n\n<?php\nif( $t_timeline_view_threshold_access ) {\n\t# Build a filter to show all bugs in current projects\n\t$g_timeline_filter = array();\n\t$g_timeline_filter[FILTER_PROPERTY_HIDE_STATUS] = array( META_FILTER_NONE );\n\t$g_timeline_filter = filter_ensure_valid_filter( $g_timeline_filter );\n\t$g_timeline_user = $f_user_id;\n\t?>\n\t<div class=\"col-md-5 col-xs-12\">\n\t\t<?php include( 'timeline_inc.php' ); ?>\n\t\t<div class=\"space-10\"></div>\n\t</div>\n<?php } ?>\n\n<?php\nlayout_page_end();\n"
        },
        {
          "name": "wiki.php",
          "type": "blob",
          "size": 1.6142578125,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Wiki Functionality\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses bug_api.php\n * @uses gpc_api.php\n * @uses print_api.php\n * @uses project_api.php\n * @uses wiki_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'bug_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'print_api.php' );\nrequire_api( 'project_api.php' );\nrequire_api( 'wiki_api.php' );\n\n$f_id = gpc_get_int( 'id' );\n$f_type = gpc_get_string( 'type', 'issue' );\n\nif( $f_type == 'project' ) {\n\tif( $f_id !== 0 ) {\n\t\tproject_ensure_exists( $f_id );\n\t\taccess_ensure_project_level( VIEWER, $f_id );\n\t}\n\n\t$t_url = wiki_link_project( $f_id );\n} else {\n\tbug_ensure_exists( $f_id );\n\taccess_ensure_bug_level( VIEWER, $f_id );\n\t$t_url = wiki_link_bug( $f_id );\n}\n\nprint_header_redirect( $t_url, true, false, true );\n"
        },
        {
          "name": "workflow_graph_img.php",
          "type": "blob",
          "size": 2.7353515625,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Workflow Graph\n * @package MantisBT\n * @author Author Bernard de Rubinat - bernard@derubinat.net\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses compress_api.php\n * @uses config_api.php\n * @uses relationship_graph_api.php\n * @uses workflow_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'compress_api.php' );\nrequire_api( 'config_api.php' );\nrequire_api( 'graphviz_api.php' );\nrequire_api( 'workflow_api.php' );\n\nauth_ensure_user_authenticated();\n\nif( !config_get( 'relationship_graph_enable' ) ) {\n\taccess_denied();\n}\n\ncompress_enable();\n\n$t_status_enum   = config_get( 'status_enum_string' );\n$t_status_ids    = MantisEnum::getValues( $t_status_enum );\n$t_status_labels = lang_get( 'status_enum_string' );\n\n$t_graph_fontname = config_get( 'relationship_graph_fontname' );\n$t_graph_fontsize = config_get( 'relationship_graph_fontsize' );\n$t_graph_fontpath = get_font_path();\n\n$t_graph_attributes = array();\n\nif( !empty( $t_graph_fontpath ) ) {\n\t$t_graph_attributes['fontpath'] = $t_graph_fontpath;\n}\n\n$t_graph = new Graph( 'workflow', $t_graph_attributes, Graph::TOOL_CIRCO );\n\n$t_graph->set_default_node_attr( array ( 'fontname' => $t_graph_fontname,\n\t\t\t\t\t\t\t\t\t\t 'fontsize' => $t_graph_fontsize,\n\t\t\t\t\t\t\t\t\t\t 'shape'    => 'record',\n\t\t\t\t\t\t\t\t\t\t 'style'    => 'filled',\n\t\t\t\t\t\t\t\t\t\t 'height'   => '0.2',\n\t\t\t\t\t\t\t\t\t\t 'width'    => '0.4' ) );\n\n$t_graph->set_default_edge_attr( array ( 'style' => 'solid',\n\t\t\t\t\t\t\t\t\t\t 'color' => '#0000C0',\n\t\t\t\t\t\t\t\t\t\t 'dir'   => 'forward' ) );\n\nforeach ( $t_status_ids as $t_from_id ) {\n\t$t_graph->add_node(\n\t\t$t_from_id,\n\t\t[ 'label' => MantisEnum::getLocalizedLabel( $t_status_enum, $t_status_labels, $t_from_id ) ]\n\t);\n\n\tforeach ( $t_status_ids as $t_to_id ) {\n\t\tif( workflow_transition_edge_exists( $t_from_id, $t_to_id ) ) {\n\t\t\t$t_graph->add_edge( $t_from_id, $t_to_id );\n\t\t}\n\t}\n}\n\n$t_graph->output( config_get_global( 'graph_format' ), true );\n"
        },
        {
          "name": "xmlhttprequest.php",
          "type": "blob",
          "size": 1.7216796875,
          "content": "<?php\n# MantisBT - A PHP based bugtracking system\n\n# MantisBT is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 2 of the License, or\n# (at your option) any later version.\n#\n# MantisBT is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with MantisBT.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * WARNING: This approach for doing AJAX calls is now deprecated in favor of the\n * new REST API.\n *\n * @package MantisBT\n * @copyright Copyright 2000 - 2002  Kenzaburo Ito - kenito@300baud.org\n * @copyright Copyright 2002  MantisBT Team - mantisbt-dev@lists.sourceforge.net\n * @link http://www.mantisbt.org\n *\n * @uses core.php\n * @uses authentication_api.php\n * @uses gpc_api.php\n * @uses logging_api.php\n */\n\nrequire_once( 'core.php' );\nrequire_api( 'authentication_api.php' );\nrequire_api( 'gpc_api.php' );\nrequire_api( 'logging_api.php' );\n\nauth_ensure_user_authenticated();\n\n$f_entrypoint = gpc_get_string( 'entrypoint' );\n\n$t_function = 'xmlhttprequest_' . $f_entrypoint;\nif( function_exists( $t_function ) ) {\n\tlog_event( LOG_AJAX, 'DEPRECATED: Calling {' . $t_function . '}. Use REST API instead.' );\n\tcall_user_func( $t_function );\n} else {\n\t$t_msg = 'Unknown function for entry point: ' . $t_function;\n\tlog_event( LOG_AJAX, $t_msg );\n\theader(\n\t\t'HTTP/1.1 ' . HTTP_STATUS_BAD_REQUEST . ' ' . $t_msg,\n\t\tfalse,\n\t\tHTTP_STATUS_BAD_REQUEST\n\t);\n\techo string_attribute( $t_msg );\n}\n"
        }
      ]
    }
  ]
}