{
  "metadata": {
    "timestamp": 1736712084420,
    "page": 643,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjY1MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "hightman/xunsearch",
      "stars": 1656,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.466796875,
          "content": "# Package files\n*.tar.bz2\n*.zip\n.DS_Store\n\n# Files generated by autoconf/automake\nREADME\nVERSION\nVERSION.inc\nMakefile\nMakefile.in\naclocal.m4\nconfig.*\nconfigure\ndepcomp\ninstall-sh\nmissing\nstamp-h1\nautom4te.cache\nsdk/php/doc/api\nsrc/xs-ctl.sh\nsrc/xs-optimize.sh\nsrc/xs-indexd\nsrc/xs-searchd\nsrc/xs-import\nsrc/xs-logging\nsrc/user_mm.c\nsrc/xs_cmd.inc.php\nsdk/php/.idea\nsdk/php/lib/XS.php\nsdk/php/dev/tmp\nsdk/php/doc/html\nsdk/php/doc/guide/special.composer.txt\n*.o\n*.lo\n.libs\n.deps\n\n"
        },
        {
          "name": "AUTHORS",
          "type": "blob",
          "size": 0.0830078125,
          "content": "Authors of Xunsearch\n====================\n$Id$\n\n1. hightman <hightman2@yahoo.com.cn>\n"
        },
        {
          "name": "COPYING",
          "type": "blob",
          "size": 0.9658203125,
          "content": "Xunsearch 版权声明\n=================\n$Id$\n\nXunsearch 是一个免费开源的全文搜索软件，在以下描述的 GPL 通用许可证的条款下发布。\n\nCopyright (C) 2011, 著作权由杭州云圣网络科技有限公司所有。\n著作权人保留一切相关权利。\n\nCopyright (C) 2010-2011 by Hangzhou YunSheng Network Technology Co., Ltd.\nAll rights reserved.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nlong with this program.  If not, see <http://www.gnu.org/licenses/>.\n"
        },
        {
          "name": "ChangeLog",
          "type": "blob",
          "size": 1.5986328125,
          "content": "ChangesLog of Xunsearch\n=======================\n\n*** 本文件不再更新，参见 git 的提交日志 ***\n\n2011-09-05\thightman\n\t* xunsearch-1.0.0a 第一个内测版\n\n2011-07-23\thightman\n\t* 完善了 XSSearch, 支持 logQuery 记录净化后的搜索日志用以做相关搜索\n\n2011-07-22\thightman\n\t* 修改字段处理方式, 新增 XSFieldScheme 类用于存放字段方案\n\t* XS 新增只读属性 defaultCharset, 在 ini 里用 project.default_charset 指定\n\t* 修正 XSIndex::del() 以正确支持字符集编码(包含8BIT字符时务必与全局默认字符集一致)\n\t* 增加 XSSearch::setCharset() 能正确处理所有输入输出的编码转换\n\t* 修正 XSDocument 用 foreach 迭代读取字段时不能正确处理编码的问题\n\n2011-07-21\thightman\n\t* 基本完成 XSSearch 代码\n\t* 准备编写 PHPUnit 自动单元测试代码\n\n2011-07-20\thightman\n\t* 优化改进 CMD_DOC_TERM 指令, 让 arg1 支持 position, check stemmer 标识\n      空内容的 term 则触发 increase_termpos()\n\t* 开始着手编写 XSSearch 搜索功能\n\n2011-07-19\thightman\n\t* 实现索引平滑重建功能 (指令: CMD_INDEX_REBUILD), 重建过程中不允许 CMD_INDEX_CLEAN_DB\n      注: 重建是针对数据库来设置标识位的, 如果不同连接同时发起重建有可能引起冲突.\n\t* 完成 sdk-php 中的索引管理: XSIndex\n\n2011-07-01\thightman\n\t* 完成核心 C 代码编写, 含 xs-indexd, xs-import, xs-searchd\n\t* 开始着手编写 sdk-php\n\t...\n\n2011-04-20\thightman\n--------------------\n\t* NEWS: 开始构建本项目，并采用 autoconf 工具来管理和配置\n\t* configure.ac, Makefile.am: 开始着手编写\n"
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 1.3203125,
          "content": "# xunsearch-dev docker\n# created by hightman.20150826\n#\n# START COMMAND:\n\n# docker run -d --name xunsearch -p 8383:8383 -p 8384:8384 \\\n# -v /var/xunsearch/data:/usr/local/xunsearch/data hightman/xunsearch:latest\n#\nFROM ubuntu:14.04\nMAINTAINER hightman, hightman@twomice.net\n\n# Install required packages\nRUN apt-get update -qq\nRUN apt-get install -qy --no-install-recommends \\\n\twget make gcc g++ bzip2 zlib1g-dev \n\n# Download & Install xunsearch-dev\nRUN cd /root && wget -qO - http://www.xunsearch.com/download/xunsearch-full-dev.tar.bz2 | tar xj\nRUN cd /root/xunsearch-full-* && sh setup.sh --prefix=/usr/local/xunsearch\n\nRUN echo '' >> /usr/local/xunsearch/bin/xs-ctl.sh \\\n    && echo 'tail -f /dev/null' >> /usr/local/xunsearch/bin/xs-ctl.sh\n\n# Configure it\n#VOLUME [\"/usr/local/xunsearch/data\"]\nEXPOSE 8383\nEXPOSE 8384\n\nWORKDIR /usr/local/xunsearch\nRUN echo \"#!/bin/sh\" > bin/xs-docker.sh \\\n    && echo \"rm -f tmp/pid.*\" >> bin/xs-docker.sh \\\n    && echo \"echo -n > tmp/docker.log\" >> bin/xs-docker.sh \\\n    && echo \"bin/xs-indexd -l tmp/docker.log -k start\" >> bin/xs-docker.sh \\\n    && echo \"sleep 1\" >> bin/xs-docker.sh \\\n    && echo \"bin/xs-searchd -l tmp/docker.log -k start\" >> bin/xs-docker.sh \\\n    && echo \"sleep 1\" >> bin/xs-docker.sh \\\n    && echo \"tail -f tmp/docker.log\" >> bin/xs-docker.sh\n\nENTRYPOINT [\"sh\"]\nCMD [\"bin/xs-docker.sh\"]\n\n"
        },
        {
          "name": "Dockerfile.alpine",
          "type": "blob",
          "size": 0.736328125,
          "content": "# 基于Alpine镜像去构建\nFROM alpine:3.13\n\n# 设定时区和工作目录\nENV TZ Asia/Shanghai\nWORKDIR /usr/local/xunsearch\n\n# 安装迅搜\nRUN apk add --no-cache \\\n    tzdata \\\n    zlib-dev \\\n    libgcc \\\n    libstdc++ \\\n    && apk add --no-cache --virtual .build-deps \\\n    wget \\\n    bzip2 \\\n    make \\\n    g++ \\\n    gcc \\\n    && wget -qO - http://www.xunsearch.com/download/xunsearch-full-latest.tar.bz2 | tar xj \\\n    && cd xunsearch-full-* && sh setup.sh --prefix=/usr/local/xunsearch \\\n    && cd .. && rm -rf xunsearch-full-* && apk del .build-deps && rm -rf /var/cache/apk/*\n\n# 暴露端口\nEXPOSE 8383\nEXPOSE 8384\n\n#启动脚本\nCOPY docker-entrypoint.sh docker-entrypoint.sh\nRUN chmod +x docker-entrypoint.sh\n\nCMD [\"./docker-entrypoint.sh\"]"
        },
        {
          "name": "INSTALL",
          "type": "blob",
          "size": 15.396484375,
          "content": "Installation Instructions\n*************************\n\n   Copyright (C) 1994-1996, 1999-2002, 2004-2017, 2020-2021 Free\nSoftware Foundation, Inc.\n\n   Copying and distribution of this file, with or without modification,\nare permitted in any medium without royalty provided the copyright\nnotice and this notice are preserved.  This file is offered as-is,\nwithout warranty of any kind.\n\nBasic Installation\n==================\n\n   Briefly, the shell command './configure && make && make install'\nshould configure, build, and install this package.  The following\nmore-detailed instructions are generic; see the 'README' file for\ninstructions specific to this package.  Some packages provide this\n'INSTALL' file but do not implement all of the features documented\nbelow.  The lack of an optional feature in a given package is not\nnecessarily a bug.  More recommendations for GNU packages can be found\nin *note Makefile Conventions: (standards)Makefile Conventions.\n\n   The 'configure' shell script attempts to guess correct values for\nvarious system-dependent variables used during compilation.  It uses\nthose values to create a 'Makefile' in each directory of the package.\nIt may also create one or more '.h' files containing system-dependent\ndefinitions.  Finally, it creates a shell script 'config.status' that\nyou can run in the future to recreate the current configuration, and a\nfile 'config.log' containing compiler output (useful mainly for\ndebugging 'configure').\n\n   It can also use an optional file (typically called 'config.cache' and\nenabled with '--cache-file=config.cache' or simply '-C') that saves the\nresults of its tests to speed up reconfiguring.  Caching is disabled by\ndefault to prevent problems with accidental use of stale cache files.\n\n   If you need to do unusual things to compile the package, please try\nto figure out how 'configure' could check whether to do them, and mail\ndiffs or instructions to the address given in the 'README' so they can\nbe considered for the next release.  If you are using the cache, and at\nsome point 'config.cache' contains results you don't want to keep, you\nmay remove or edit it.\n\n   The file 'configure.ac' (or 'configure.in') is used to create\n'configure' by a program called 'autoconf'.  You need 'configure.ac' if\nyou want to change it or regenerate 'configure' using a newer version of\n'autoconf'.\n\n   The simplest way to compile this package is:\n\n  1. 'cd' to the directory containing the package's source code and type\n     './configure' to configure the package for your system.\n\n     Running 'configure' might take a while.  While running, it prints\n     some messages telling which features it is checking for.\n\n  2. Type 'make' to compile the package.\n\n  3. Optionally, type 'make check' to run any self-tests that come with\n     the package, generally using the just-built uninstalled binaries.\n\n  4. Type 'make install' to install the programs and any data files and\n     documentation.  When installing into a prefix owned by root, it is\n     recommended that the package be configured and built as a regular\n     user, and only the 'make install' phase executed with root\n     privileges.\n\n  5. Optionally, type 'make installcheck' to repeat any self-tests, but\n     this time using the binaries in their final installed location.\n     This target does not install anything.  Running this target as a\n     regular user, particularly if the prior 'make install' required\n     root privileges, verifies that the installation completed\n     correctly.\n\n  6. You can remove the program binaries and object files from the\n     source code directory by typing 'make clean'.  To also remove the\n     files that 'configure' created (so you can compile the package for\n     a different kind of computer), type 'make distclean'.  There is\n     also a 'make maintainer-clean' target, but that is intended mainly\n     for the package's developers.  If you use it, you may have to get\n     all sorts of other programs in order to regenerate files that came\n     with the distribution.\n\n  7. Often, you can also type 'make uninstall' to remove the installed\n     files again.  In practice, not all packages have tested that\n     uninstallation works correctly, even though it is required by the\n     GNU Coding Standards.\n\n  8. Some packages, particularly those that use Automake, provide 'make\n     distcheck', which can by used by developers to test that all other\n     targets like 'make install' and 'make uninstall' work correctly.\n     This target is generally not run by end users.\n\nCompilers and Options\n=====================\n\n   Some systems require unusual options for compilation or linking that\nthe 'configure' script does not know about.  Run './configure --help'\nfor details on some of the pertinent environment variables.\n\n   You can give 'configure' initial values for configuration parameters\nby setting variables in the command line or in the environment.  Here is\nan example:\n\n     ./configure CC=c99 CFLAGS=-g LIBS=-lposix\n\n   *Note Defining Variables::, for more details.\n\nCompiling For Multiple Architectures\n====================================\n\n   You can compile the package for more than one kind of computer at the\nsame time, by placing the object files for each architecture in their\nown directory.  To do this, you can use GNU 'make'.  'cd' to the\ndirectory where you want the object files and executables to go and run\nthe 'configure' script.  'configure' automatically checks for the source\ncode in the directory that 'configure' is in and in '..'.  This is known\nas a \"VPATH\" build.\n\n   With a non-GNU 'make', it is safer to compile the package for one\narchitecture at a time in the source code directory.  After you have\ninstalled the package for one architecture, use 'make distclean' before\nreconfiguring for another architecture.\n\n   On MacOS X 10.5 and later systems, you can create libraries and\nexecutables that work on multiple system types--known as \"fat\" or\n\"universal\" binaries--by specifying multiple '-arch' options to the\ncompiler but only a single '-arch' option to the preprocessor.  Like\nthis:\n\n     ./configure CC=\"gcc -arch i386 -arch x86_64 -arch ppc -arch ppc64\" \\\n                 CXX=\"g++ -arch i386 -arch x86_64 -arch ppc -arch ppc64\" \\\n                 CPP=\"gcc -E\" CXXCPP=\"g++ -E\"\n\n   This is not guaranteed to produce working output in all cases, you\nmay have to build one architecture at a time and combine the results\nusing the 'lipo' tool if you have problems.\n\nInstallation Names\n==================\n\n   By default, 'make install' installs the package's commands under\n'/usr/local/bin', include files under '/usr/local/include', etc.  You\ncan specify an installation prefix other than '/usr/local' by giving\n'configure' the option '--prefix=PREFIX', where PREFIX must be an\nabsolute file name.\n\n   You can specify separate installation prefixes for\narchitecture-specific files and architecture-independent files.  If you\npass the option '--exec-prefix=PREFIX' to 'configure', the package uses\nPREFIX as the prefix for installing programs and libraries.\nDocumentation and other data files still use the regular prefix.\n\n   In addition, if you use an unusual directory layout you can give\noptions like '--bindir=DIR' to specify different values for particular\nkinds of files.  Run 'configure --help' for a list of the directories\nyou can set and what kinds of files go in them.  In general, the default\nfor these options is expressed in terms of '${prefix}', so that\nspecifying just '--prefix' will affect all of the other directory\nspecifications that were not explicitly provided.\n\n   The most portable way to affect installation locations is to pass the\ncorrect locations to 'configure'; however, many packages provide one or\nboth of the following shortcuts of passing variable assignments to the\n'make install' command line to change installation locations without\nhaving to reconfigure or recompile.\n\n   The first method involves providing an override variable for each\naffected directory.  For example, 'make install\nprefix=/alternate/directory' will choose an alternate location for all\ndirectory configuration variables that were expressed in terms of\n'${prefix}'.  Any directories that were specified during 'configure',\nbut not in terms of '${prefix}', must each be overridden at install time\nfor the entire installation to be relocated.  The approach of makefile\nvariable overrides for each directory variable is required by the GNU\nCoding Standards, and ideally causes no recompilation.  However, some\nplatforms have known limitations with the semantics of shared libraries\nthat end up requiring recompilation when using this method, particularly\nnoticeable in packages that use GNU Libtool.\n\n   The second method involves providing the 'DESTDIR' variable.  For\nexample, 'make install DESTDIR=/alternate/directory' will prepend\n'/alternate/directory' before all installation names.  The approach of\n'DESTDIR' overrides is not required by the GNU Coding Standards, and\ndoes not work on platforms that have drive letters.  On the other hand,\nit does better at avoiding recompilation issues, and works well even\nwhen some directory options were not specified in terms of '${prefix}'\nat 'configure' time.\n\nOptional Features\n=================\n\n   If the package supports it, you can cause programs to be installed\nwith an extra prefix or suffix on their names by giving 'configure' the\noption '--program-prefix=PREFIX' or '--program-suffix=SUFFIX'.\n\n   Some packages pay attention to '--enable-FEATURE' options to\n'configure', where FEATURE indicates an optional part of the package.\nThey may also pay attention to '--with-PACKAGE' options, where PACKAGE\nis something like 'gnu-as' or 'x' (for the X Window System).  The\n'README' should mention any '--enable-' and '--with-' options that the\npackage recognizes.\n\n   For packages that use the X Window System, 'configure' can usually\nfind the X include and library files automatically, but if it doesn't,\nyou can use the 'configure' options '--x-includes=DIR' and\n'--x-libraries=DIR' to specify their locations.\n\n   Some packages offer the ability to configure how verbose the\nexecution of 'make' will be.  For these packages, running './configure\n--enable-silent-rules' sets the default to minimal output, which can be\noverridden with 'make V=1'; while running './configure\n--disable-silent-rules' sets the default to verbose, which can be\noverridden with 'make V=0'.\n\nParticular systems\n==================\n\n   On HP-UX, the default C compiler is not ANSI C compatible.  If GNU CC\nis not installed, it is recommended to use the following options in\norder to use an ANSI C compiler:\n\n     ./configure CC=\"cc -Ae -D_XOPEN_SOURCE=500\"\n\nand if that doesn't work, install pre-built binaries of GCC for HP-UX.\n\n   HP-UX 'make' updates targets which have the same timestamps as their\nprerequisites, which makes it generally unusable when shipped generated\nfiles such as 'configure' are involved.  Use GNU 'make' instead.\n\n   On OSF/1 a.k.a. Tru64, some versions of the default C compiler cannot\nparse its '<wchar.h>' header file.  The option '-nodtk' can be used as a\nworkaround.  If GNU CC is not installed, it is therefore recommended to\ntry\n\n     ./configure CC=\"cc\"\n\nand if that doesn't work, try\n\n     ./configure CC=\"cc -nodtk\"\n\n   On Solaris, don't put '/usr/ucb' early in your 'PATH'.  This\ndirectory contains several dysfunctional programs; working variants of\nthese programs are available in '/usr/bin'.  So, if you need '/usr/ucb'\nin your 'PATH', put it _after_ '/usr/bin'.\n\n   On Haiku, software installed for all users goes in '/boot/common',\nnot '/usr/local'.  It is recommended to use the following options:\n\n     ./configure --prefix=/boot/common\n\nSpecifying the System Type\n==========================\n\n   There may be some features 'configure' cannot figure out\nautomatically, but needs to determine by the type of machine the package\nwill run on.  Usually, assuming the package is built to be run on the\n_same_ architectures, 'configure' can figure that out, but if it prints\na message saying it cannot guess the machine type, give it the\n'--build=TYPE' option.  TYPE can either be a short name for the system\ntype, such as 'sun4', or a canonical name which has the form:\n\n     CPU-COMPANY-SYSTEM\n\nwhere SYSTEM can have one of these forms:\n\n     OS\n     KERNEL-OS\n\n   See the file 'config.sub' for the possible values of each field.  If\n'config.sub' isn't included in this package, then this package doesn't\nneed to know the machine type.\n\n   If you are _building_ compiler tools for cross-compiling, you should\nuse the option '--target=TYPE' to select the type of system they will\nproduce code for.\n\n   If you want to _use_ a cross compiler, that generates code for a\nplatform different from the build platform, you should specify the\n\"host\" platform (i.e., that on which the generated programs will\neventually be run) with '--host=TYPE'.\n\nSharing Defaults\n================\n\n   If you want to set default values for 'configure' scripts to share,\nyou can create a site shell script called 'config.site' that gives\ndefault values for variables like 'CC', 'cache_file', and 'prefix'.\n'configure' looks for 'PREFIX/share/config.site' if it exists, then\n'PREFIX/etc/config.site' if it exists.  Or, you can set the\n'CONFIG_SITE' environment variable to the location of the site script.\nA warning: not all 'configure' scripts look for a site script.\n\nDefining Variables\n==================\n\n   Variables not defined in a site shell script can be set in the\nenvironment passed to 'configure'.  However, some packages may run\nconfigure again during the build, and the customized values of these\nvariables may be lost.  In order to avoid this problem, you should set\nthem in the 'configure' command line, using 'VAR=value'.  For example:\n\n     ./configure CC=/usr/local2/bin/gcc\n\ncauses the specified 'gcc' to be used as the C compiler (unless it is\noverridden in the site shell script).\n\nUnfortunately, this technique does not work for 'CONFIG_SHELL' due to an\nAutoconf limitation.  Until the limitation is lifted, you can use this\nworkaround:\n\n     CONFIG_SHELL=/bin/bash ./configure CONFIG_SHELL=/bin/bash\n\n'configure' Invocation\n======================\n\n   'configure' recognizes the following options to control how it\noperates.\n\n'--help'\n'-h'\n     Print a summary of all of the options to 'configure', and exit.\n\n'--help=short'\n'--help=recursive'\n     Print a summary of the options unique to this package's\n     'configure', and exit.  The 'short' variant lists options used only\n     in the top level, while the 'recursive' variant lists options also\n     present in any nested packages.\n\n'--version'\n'-V'\n     Print the version of Autoconf used to generate the 'configure'\n     script, and exit.\n\n'--cache-file=FILE'\n     Enable the cache: use and save the results of the tests in FILE,\n     traditionally 'config.cache'.  FILE defaults to '/dev/null' to\n     disable caching.\n\n'--config-cache'\n'-C'\n     Alias for '--cache-file=config.cache'.\n\n'--quiet'\n'--silent'\n'-q'\n     Do not print messages saying which checks are being made.  To\n     suppress all normal output, redirect it to '/dev/null' (any error\n     messages will still be shown).\n\n'--srcdir=DIR'\n     Look for the package's source code in directory DIR.  Usually\n     'configure' can determine that directory automatically.\n\n'--prefix=DIR'\n     Use DIR as the installation prefix.  *note Installation Names:: for\n     more details, including other options available for fine-tuning the\n     installation locations.\n\n'--no-create'\n'-n'\n     Run the configure checks, but stop before creating any output\n     files.\n\n'configure' also accepts some other, not widely useful, options.  Run\n'configure --help' for more details.\n"
        },
        {
          "name": "Makefile.am",
          "type": "blob",
          "size": 2.1171875,
          "content": "# Automake file on top directory\n# $Id: $\n#\nAUTOMAKE_OPTIONS = 1.5 subdir-objects\n\nSUBDIRS = . src\nif ENABLE_PHP\nSUBDIRS += sdk\nendif\nsysconfDATA_INSTALL = $(INSTALL_DATA)\n\nDIST_SUBDIRS = src sdk\n\nsysconf_DATA = etc/py.xdb\n\ncustomdir = ${sysconfdir}\ncustom_DATA = etc/dict_user.txt etc/stopwords.txt\n\nEXTRA_DIST = README.md README.arch VERSION.inc notify-sh $(sysconf_DATA) $(custom_DATA)\n\npy_xdb_DEPS =\nversion_DEPS =\n\nif HAVE_SDK_PHP_DEV\npy_xdb_DEPS += sdk/php/dev/data/py.txt\nversion_DEPS += .git/refs/heads/master\nendif HAVE_SDK_PHP_DEV\n\netc/py.xdb: $(py_xdb_DEPS)\n\t@echo \"Generating pinyin dict by php ...\"\n\tphp sdk/php/dev/build.php pinyin make > /dev/null 2>&1\n\nVERSION.inc: $(version_DEPS)\n\t@echo \"Generating version info ...\"\n\tsh version-sh > VERSION.inc\n\ninstall-customDATA:\n\t@$(NORMAL_INSTALL)\n\ttest -z \"$(customdir)\" || $(MKDIR_P) \"$(DESTDIR)$(customdir)\"\n\t@list='$(custom_DATA)'; for p in $$list; do \\\n\t  if test -f \"$$p\"; then d=; else d=\"$(srcdir)/\"; fi; \\\n\t  $(am__strip_dir) \\\n\t  if test -f \"$(DESTDIR)$(customdir)/$$f\"; then \\\n\t    echo \" Ignore exists custom data file '$$p'\"; else \\\n\t    echo \" $(sysconfDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(customdir)/$$f'\"; \\\n\t    $(sysconfDATA_INSTALL) \"$$d$$p\" \"$(DESTDIR)$(customdir)/$$f\"; \\\n\t  fi; \\\n\tdone\n\t@sh notify-sh $(prefix)\n\nuninstall-customDATA:\n\t@$(NORMAL_UNINSTALL)\n\ndist-hook:\n\ndist-sdk: distdir\n\tcd $(distdir) \\\n\t\t&& cp -pR sdk xunsearch-sdk \\\n\t\t&& rm -f xunsearch-sdk/Makefile* xunsearch-sdk/*.sh \\\n\t\t&& sed -e 's#838#demo.xunsearch.com:939#g' \\\n\t\t\tsdk/php/app/demo.ini > xunsearch-sdk/php/app/demo.ini \\\n\t\t&& zip -qr9 ../xunsearch-sdk-$(VERSION).zip xunsearch-sdk \\\n\t\t&& rm -rf xunsearch-sdk\n\t\ndist-full: dist-sdk dist-bzip2\n\tsh -c 'cd xunsearch-full ; ./setup.sh --clean'\t\n\trm -f xunsearch-full/packages/xunsearch-*\n\tmv $(distdir).tar.bz2 xunsearch-sdk-$(VERSION).zip xunsearch-full/packages\n\t@echo \"Running distribute script ...\"\n\t@sh dist-sh\n\nweb-doc:\n\tcd sdk && make php-web-doc\n\tscp xunsearch-web-doc-latest.tar.bz2 xunsearch:./web/protected/data\n\tssh xunsearch tar -xjf ./web/protected/data/xunsearch-web-doc-latest.tar.bz2 -C ./web/protected/data\n\trm -f xunsearch-web-doc-latest.tar.bz2\n\t\n"
        },
        {
          "name": "NEWS",
          "type": "blob",
          "size": 0.1064453125,
          "content": "NEWS for Xunsearch\n==================\n$Id$\n\n正式发布 1.0.0 版 (2011-09-01)\n----------------------------\n"
        },
        {
          "name": "README.arch",
          "type": "blob",
          "size": 1.8349609375,
          "content": "XunSearch Architecture\n======================\n$Id$\n\n\n              ==============================\n              |   Your Search Application  |\n              ==============================\n                  /\\                /\\\n................ /||\\ ............ /||\\ ....................\n:                 ||                ||                     :\n:             +-----------------------------+              :\n:             |  [PHP]  | other lang (TODO) |              :\n:             |-----------------------------|              :\n:             |   SDK: (xunsearch devkit)   |              :\n:             +-----------------------------+              :\n:                 /                   \\                    :\n:                /                     \\                   :\n:    +-----------------+          +-------------------+    : \n:    |  Index-server   |          |   Search-server   |    :\n:    |-----------------|          |-------------------|    : \n:    |   xs-indexd     |          |    xs-searchd     |    :\n:    |   xs-import     |          |     1*master      |    :\n:    |   xs-logging    |          | N*worker(M*thread)|    :\n:    +-----------------+          +-------------------+    :\n:                |                       |                 :\n:                |                       |                 :\n:             +-----------------------------+              :\n:             |     Xapian-core + scws      |              :\n:             +-----------------------------+              :  \n:                |          |            |                 :\n:      +------------+  +--------+  +---------------+       :\n:      | Local Disk |  | Memory |  | Remote socket |       :\n:      +------------+  +--------+  +---------------+       :\n:                                                          :\n...................... Xun Search ..........................\n\n"
        },
        {
          "name": "README.install",
          "type": "blob",
          "size": 0.6767578125,
          "content": "INSTALLATION of Xunsearch\n=========================\n\n由于 xunsearch 运行需要依赖 xapian 和 scws 的库文件，故请直接下载使用我们的\n完整安装包文件，参见里面的 README 进行安装即可。\n\n完整安装包地址：\nhttp://www.xunsearch.com/download/xunsearch-full-latest.tar.bz2\n\n\nDocker 方式安装服务端\n---------------------\n\n下载映像：\n\n```\ndocker pull hightman/xunsearch`\n```\n\n启动映像：\n\n```\ndocker run --name xunsearch -d \\\n-p 8383:8383 -p 8384:8384 \\\n-v /var/xunsearch/data:/usr/local/xunsearch/data \\\nhightman/xunsearch:latest\n```\n\n> note: 以上启动参数可自行修改，该方式仅运行服务端，需要另外下载 PHP-SDK。\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 2.6787109375,
          "content": "README of Xunsearch\n===================\n$Id$\n\n综述\n----\n\nXunsearch （中文名：迅搜）是一套免费开源的专业中文全文检索解决方案，简单易用而且\n功能强大、性能卓越能轻松处理海量数据的全文检索。它包含后端索引、搜索服务程序和前端\n脚本语言编写的开发包(称之为 SDK) 。前端和后端甚至可以分离部署在不同服务器中。一般\n开发者只要在安装和设置完成后，通过提供的 SDK 包进行较为容易的二次开发即可打造出自己\n的全文搜索引擎，适用于 MySQL 数据库全文检索、web站内/论坛搜索、行业门户/垂直搜索、\n文档/文献检索等各种领域。\n\nXunsearch 底层采用 C/C++ 编写，索引设计基于著名而悠久的 [Xapian][1]，分词采用\n自主研发同样也是开源的 [SCWS分词][2]，两者完美结合，理论上单个搜索库支持 40 亿条\n记录。可编译运行于 Linux/FreeBSD 等各种 UNIX 类型的系统。\n\nXunsearch devkit SDK 理论上支持各种包含 socket 实现的脚本语言，目前我们只提供 \nPHP 的实现方式，其它脚本的 SDK 往后会陆续考虑和开发，也欢迎有能力开发的人加入或\n贡献相关代码。开发包代码可以运行于任何平台（包括 windows）。\n\nXunsearch 在确保高性能、全功能检索的基础上降低开发难度，支持字段检索、结果高亮、\n字段排序、布尔语法、区间检索、聚合搜索、相关搜索、权重微调、拼音搜索、搜索建议等\n专业搜索引擎具备的各项功能。\n\nXunsearch 全面开源，并使用最流行的开源许可协议 GPL 发布。您可以免费获取本项目的\n全部源代码，并在许可条件下修改和再分发，具体参见 [COPYING](COPYING) 文件。\n\n请关注我们的官方网站：<http://www.xunsearch.com>\n在这里可以获取本项目的最新消息，和参与社区讨论和获得免费技术支持。\n\n\n安装、升级\n---------\n\n请阅读 [README.install](README.install) 文件\n\n\nSDK 开发文档\n-----------\n\n请阅读 [PHP-SDK 文档](sdk/php/README.md)\n\n\n架构说明\n-------\n\n请参看 [README.arch](README.arch)\n\n\n开源捐赠\n-------\n\n我们一直在努力，我们一直想做得更好，开源事业离不开大家的支持！\n[捐赠我们](http://www.xunsearch.com/site/donate)\n\n\n商业、其它技术支持\n----------------\n\n为充分满足不同类型和层次的客户需求，我们在开源版本的基础上提供搜索相关的功能定制服务。\n我们的技术和经验积累将为您极大程度地节约开发成本和时间。\n\n具体请访问我们的支持页面：<http://www.xunsearch.com/support/>\n\n\n[1]: http://xapian.org/\n[2]: http://www.xunsearch.com/scws/\n"
        },
        {
          "name": "TODO",
          "type": "blob",
          "size": 8.76953125,
          "content": "Big Plans of Xunsearch\n======================\n\n标识符含义：* 暂定未做；+ 已完成；= 正在做；- 取消\n\n= 优化 task.cc 分为(db+db_a)时如果实时 update 某一条数据可能导致 docid 修改而 cache 扔起作用会出现空白内容\n\n+ 优化 task.cc 让 queryparser 可以复用与共享\n\n+ 优化日志，减少输出，记录错误为主；增加状态监控模块，各个进程的详细情况。\n  当前连接数，已处理请求数，最大并发数等……\n\n+ 支持为每个项目分配自定义词库，只要项目目录下的 etc/ 目录存在？\n\n+ 优化 xapian 的 queryparser 让它具备清除 prefix 等初始化功能\n  避免新建对象\n\n+ 增加同义词搜索、管理功能\n\n+ Xapian 底层支持自定义文本词库，要求 txt 格式即可\n\n+ 将代码使用 git 管理，并推送一份到 github 上托管\n\n+ 设置搜索工作线程的超时时间\n\n  某些搜索线程由于某些原因导致阻塞或死锁等问题长时间无法结束工作，\n  从而造成 too many opened files 以及更严重的资源消耗问题。\n\n  已完成，在线程池中标识每个线程的任务起始时间，然后由主线程调用检测函数来巡视。\n\n\n+ 解决复合长词的搜索问题\n\n  比如在搜索 “异常管理制度” 时经过分词后相当于检索 “异常、管理制度” 这 2 个词。\n  这种情况并不是在所有场合都适合，用户可能更希望能检索“异常、管理、制度”三个词。\n  \n  可以考虑把默认词典中这类复合长词统统删除，而只保留短词。\n\n+ 改进线程池\n\n  每个线程均不能忽略某些信号 (SIGFPE、SIGILL、SIGBUS、SIGSEGV)，\n  必须由收到信号的线程自行处理并中断运行。\n\n  线程池中的工作线程异常引发 signal 从而调用 tpool_destroy() 时不要直接试图\n  cancel 自己并等待结束，这样就会造成死等。\n\n+ 优化信号处理\n\n  signal_child() 中 status 参数依据 waitpid() 的 man 说明，\n  应当调用相应的宏提取进程实际终止字。即：WIFEXITED()、WIFSIGNALED()\n  此外还应还原 SIGFPE、SIGILL、SIGBUS、SIGSEGV 的默认行为以便导出 core 文件。\n\n+ 关于 zcmd_exec_*** 回调函数的返回值\n\n  除了 CMD_RES_UNIMP 外，其它的响应数据均由回调函数自行处理。\n  至于是否结束连接则由上层调用统一根据返回值处理，勿在处理函数中直接调用 conn_quit，\n  这会直接销毁整个 conn 结构从而引发不可预知的后果。\n\n  增加特殊返回值 CMD_RES_NEXT 表示让其它默认和全局处理函数继续处理该指令。\n\n+ 改进线程善后调用\n\n  当前的服务器模型当出现异常退出时，没有为各连接善后，只有处于任务中的线程有机会cleanup()\n  其它的连接在 exit() 后就直接退出了。不过由于进程已经终止，所有资源应当由系统直接回收了。\n\n+ 远程数据库解决方案\n\n  采用 stub 文件库数据库，其它路径则在目录底下创建软连接\n\n+ 搜索线程中屏蔽 USE 指令切换项目\n\n  当搜索服务器连接工作在线程中时，如果切换项目用户，当前的 zarg 内容就对不上了 (主要是 ->db 之类的指针)，\n  实际使用中不太可能有这样的作法但应考虑从程序层面避免这类情况。考虑把 conn_zcmd_exec handlers \n  执行顺序调整一下，让指定的 handler 最先执行，以便提前返回 wrongplace 。\n\n* 优化缓存设计方案\n\n  当前缓存是用 MD5 (用户名+查询字符串) 作为键值，这样做就只能对默认库做缓存，如果再经过一番\n  set_db/add_db 就不对了。\n\n  缓存有效与否目前根据 db.get_doccount() 来判断，严格讲应该加入 last_docid 来加强判断。\n\n+ 平滑重建索引\n\n  原先重建索引均是先清空旧的索引然后依次从头加入数据，这样做的弊端在于会有一个时间段索引被中断，\n  严重影响搜索体验，应当改为平滑过渡。\n\n  同时注意重建期间的 clean 操作(直接禁用?)，以免交叉操作引起 bug，\n  注意多个 conn 同时发出这个请求的情况时会交叉起作用。\n\n+ 索引切割优化\n\n  目前每个项目的索引数据全部集中在统一的一个 db 中，当数据量比较大时会导致更新速度极慢，\n  需要适当切割优化同时又保证前端一致。(从 xs-import 入手?) 需要通过 xs_import、xs_searchd、xs_index \n  三者有机配合实现 DB 自动切分功能，然后通过 xs-import 特殊的退出字来表示是否需要进行合并。\n\n* 改进 indexd 的 signal_child\n\n  目前承担的工作过多，不宜在信号中出现过多可能导致阻塞的操作，而应适当记录 flag 便立即返回。\n\n+ 让 CMD_DOC_TERM 支持 stemmer\n\n  目前这条指令只是简单的添加一个词，而没有考虑 stemmer 的支持，\n  在引入自定义分词器后显得很有必要加入此功能 (xs-import)，还应支持 posting 。\n\n* 改进搜索返回的高亮词\n\n  默认搜索时由于启用 stemmer 结果记录中可能存在一些词性不统一的匹配词未能正确高亮，\n  比如搜索 works ，而匹配的结果里却只是包含  working 可以在返回结果里补足高亮词表来解决。\n\n* 技术、理论背景及算法文档\n\n+ 整合 charset 字符集\n\n  已改进由 xs 对象控制一个默认的字符集，而 XSDocument 和 XSSsearch 也可单独指定字符集。\n\n+ 在 XSSearch 整合相关、热门搜索及搜索建议或修正\n  需要自动记录搜索日志，简化提取词汇进行记录，而不是原样记录那样太多垃圾词汇了。\n  展开搜索完全要求前缀，拼音只支持少量几个字就好了吧，\n  复合纠错也需要重点考虑深入搜索由于需要客户端加装 scws 扩展其实可以废除了，只保留相关搜索即可。\n\n+ 设计 C++ 的工具程序 xs-logging 用于处理上述功能\n\n  log_db 的内容:\n  0) 字段结构: 完整内容存在 data 区.\n     0:A. key,   主键, 小写的完整内容\n     1:B. pinyin,全拼、缩写索引, 类似 parts 作法\n        字数较短的全拼存入 spelling 以便模糊检索（0+raw), 针对整段完整的小拼音进行模糊音修正\n     2:C. partial, 用于展开搜索的, 最多索引 MAX_EXPAND_LEN(global.h) 个字节, \n               超出部分用 wildcard 做法来解决\n     3:D. total, 总计次数, 历史累计\n     4:E. last_num, 上轮计数(用于统计近期)\n     5:F. curr_num, 本轮计算\n     6:G. curr_tag, 本轮标记, 如果标记不匹配则将 set last_num = curr_num, curr_num = 1, total+1\n     \n  1) 默认检索库中的主要词表 (allterms)\n\n  2) 用户的搜索日志, 净化处理如下:\n     A. 过滤无效字符并智能组合\n     B. 消除英文与中文之间的多余空格\n     C. 最多保留3~4个词的组合, 最长 48个字节(折合16个汉字)\n\n  spelling和模糊音仅针对3个字和2个字的完整音节, 含前缀\n  用户输入的模糊音纠错也只针对可识别的完整音节(非转换的 PY_CHINESE)?\n\n  -- 模糊音在搜索时考虑 -- \n  如用户输入: zongguo 但匹配数据较少则自动尝试转换为 zhongguo \n  如用户输入: zhonguo 则会先修正为 zhongguo 如数据少则模糊修正为 zongguo 进行检索  \n\n  检索词扩展做法 (输入信息: query)\n\n  1. 净化 query 信息, 删除多余的空格, 并记录尾部是否带空格(如果有到时适当加权)\n\n  >>2. 如果长度 > MAX_EXPAND_LEN(global.h), 直接用 wildcard 方式扩展检索 A 字段\n       若纯英文同时尝试展开 pinyin 字段\n\n  >>3. 如果纯中文, 则检索 parts:query 加权 parts:query + ' '\n\n  4. 检索 parts:query (+权 parts:query + ' ')\n     如果纯英文: 检测 pinyin:query 是否存在, 若不存在尝试用 spelling 修正先(修正后当作拼音继续检索)\n                +OR pinyin:query  若数量少 \n\t\t\t\t+(若为完整拼音则尝试进行模糊修正 +OR pinyin:query2\n     若包含中文: \n     全部转换为拼音如果长度 <= MAX_EXPAND_LEN(global.h), + OR pinyin:query2 \n\n  检索词自动纠错做法(仅针对匹配少的词汇):\n\n  1. 净化 query 信息, 删除多余的空格, 按空格分段 [单字的强行组合起来?]\n\n  2. >>如果全部是英文, 消除所有空格尝试进行全拼(+模糊修正,+spelling修正)，缩写纠错, 英文纠错...\n\n  3. 分段进行修正\n  \n     英文的话: \n       长度: <= MAX_EXPAND_LEN(global.h)\n       如果是存在的拼音进行拼音检索 (pinyin:xxx) 检索, 其它的先进行 spelling 纠错\n       再判断是否为拼音, 如是拼音则继续检索拼音, 如不是则直接输出 英文原样 (长度<=\n\n       上面的尝试失败后, 则对于长段拼音适当进行分段纠错, 最多纠错 2个同音词, 除非频率\n       接近否则直接彩用最高频的那个, 纠错失败的单字则确认略不显示\n\n    中文的话进行拼音转换后查找更高频率的同音词, 如果没有则保持原样.\n\n"
        },
        {
          "name": "acprep",
          "type": "blob",
          "size": 1.1044921875,
          "content": "#!/bin/sh\n# $Id: $\n# This file is intended for developers only and is not included into dist\n# Please RUN this AFTER cvs checkout/update\n# This will re-create all needed stuff\n# (aclocal.m4, config.h.in, Makefile.in, configure)\n# or you may end up with old versions of that.\n#\n\n# libtoolize\nLIBTOOLIZE=libtoolize\nSYSNAME=`uname`\nif [ \"x$SYSNAME\" = \"xDarwin\" ] ; then\n\tLIBTOOLIZE=glibtoolize\nfi\n\n# clean\nif test \"x-$1\" = \"x---clean\" ; then\n\techo \"Cleaning ...\"\n\tif test -f Makefile ; then\n\t  make clean\n    fi\n\tfind . -name Makefile -exec rm -f {} \\;\n\tfind . -name Makefile.in -exec rm -f {} \\;\n\trm -f aclocal.m4 config.* configure depcomp install-sh missing stamp-h1\n\trm -rf autom4te.cache\n\trm -f README VERSION VERSION.inc src/xs-ctl.sh src/xs-optimize.sh\n\techo \"OK, done!\"\n\texit\nfi\n\n# init\nln -sf README.md README\nfor cmd in aclocal autoheader \\\n\t\t\"automake --add-missing --copy --force\" autoconf ; do\n\techo \"Running command: $cmd ...\"\n\t$cmd 2>&1 | grep -i -v warning\ndone\necho\necho \"--==*** You can run ./configure now ***==--\";\necho -n \"               Happy hacking\";\nif test -n $USER; then\n\techo -n \", $USER\";\nfi\necho !\necho\n\n"
        },
        {
          "name": "compile",
          "type": "blob",
          "size": 7.2265625,
          "content": "#! /bin/sh\n# Wrapper for compilers which do not understand '-c -o'.\n\nscriptversion=2018-03-07.03; # UTC\n\n# Copyright (C) 1999-2021 Free Software Foundation, Inc.\n# Written by Tom Tromey <tromey@cygnus.com>.\n#\n# This program is free software; you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation; either version 2, or (at your option)\n# any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n# As a special exception to the GNU General Public License, if you\n# distribute this file as part of a program that contains a\n# configuration script generated by Autoconf, you may include it under\n# the same distribution terms that you use for the rest of that program.\n\n# This file is maintained in Automake, please report\n# bugs to <bug-automake@gnu.org> or send patches to\n# <automake-patches@gnu.org>.\n\nnl='\n'\n\n# We need space, tab and new line, in precisely that order.  Quoting is\n# there to prevent tools from complaining about whitespace usage.\nIFS=\" \"\"\t$nl\"\n\nfile_conv=\n\n# func_file_conv build_file lazy\n# Convert a $build file to $host form and store it in $file\n# Currently only supports Windows hosts. If the determined conversion\n# type is listed in (the comma separated) LAZY, no conversion will\n# take place.\nfunc_file_conv ()\n{\n  file=$1\n  case $file in\n    / | /[!/]*) # absolute file, and not a UNC file\n      if test -z \"$file_conv\"; then\n\t# lazily determine how to convert abs files\n\tcase `uname -s` in\n\t  MINGW*)\n\t    file_conv=mingw\n\t    ;;\n\t  CYGWIN* | MSYS*)\n\t    file_conv=cygwin\n\t    ;;\n\t  *)\n\t    file_conv=wine\n\t    ;;\n\tesac\n      fi\n      case $file_conv/,$2, in\n\t*,$file_conv,*)\n\t  ;;\n\tmingw/*)\n\t  file=`cmd //C echo \"$file \" | sed -e 's/\"\\(.*\\) \" *$/\\1/'`\n\t  ;;\n\tcygwin/* | msys/*)\n\t  file=`cygpath -m \"$file\" || echo \"$file\"`\n\t  ;;\n\twine/*)\n\t  file=`winepath -w \"$file\" || echo \"$file\"`\n\t  ;;\n      esac\n      ;;\n  esac\n}\n\n# func_cl_dashL linkdir\n# Make cl look for libraries in LINKDIR\nfunc_cl_dashL ()\n{\n  func_file_conv \"$1\"\n  if test -z \"$lib_path\"; then\n    lib_path=$file\n  else\n    lib_path=\"$lib_path;$file\"\n  fi\n  linker_opts=\"$linker_opts -LIBPATH:$file\"\n}\n\n# func_cl_dashl library\n# Do a library search-path lookup for cl\nfunc_cl_dashl ()\n{\n  lib=$1\n  found=no\n  save_IFS=$IFS\n  IFS=';'\n  for dir in $lib_path $LIB\n  do\n    IFS=$save_IFS\n    if $shared && test -f \"$dir/$lib.dll.lib\"; then\n      found=yes\n      lib=$dir/$lib.dll.lib\n      break\n    fi\n    if test -f \"$dir/$lib.lib\"; then\n      found=yes\n      lib=$dir/$lib.lib\n      break\n    fi\n    if test -f \"$dir/lib$lib.a\"; then\n      found=yes\n      lib=$dir/lib$lib.a\n      break\n    fi\n  done\n  IFS=$save_IFS\n\n  if test \"$found\" != yes; then\n    lib=$lib.lib\n  fi\n}\n\n# func_cl_wrapper cl arg...\n# Adjust compile command to suit cl\nfunc_cl_wrapper ()\n{\n  # Assume a capable shell\n  lib_path=\n  shared=:\n  linker_opts=\n  for arg\n  do\n    if test -n \"$eat\"; then\n      eat=\n    else\n      case $1 in\n\t-o)\n\t  # configure might choose to run compile as 'compile cc -o foo foo.c'.\n\t  eat=1\n\t  case $2 in\n\t    *.o | *.[oO][bB][jJ])\n\t      func_file_conv \"$2\"\n\t      set x \"$@\" -Fo\"$file\"\n\t      shift\n\t      ;;\n\t    *)\n\t      func_file_conv \"$2\"\n\t      set x \"$@\" -Fe\"$file\"\n\t      shift\n\t      ;;\n\t  esac\n\t  ;;\n\t-I)\n\t  eat=1\n\t  func_file_conv \"$2\" mingw\n\t  set x \"$@\" -I\"$file\"\n\t  shift\n\t  ;;\n\t-I*)\n\t  func_file_conv \"${1#-I}\" mingw\n\t  set x \"$@\" -I\"$file\"\n\t  shift\n\t  ;;\n\t-l)\n\t  eat=1\n\t  func_cl_dashl \"$2\"\n\t  set x \"$@\" \"$lib\"\n\t  shift\n\t  ;;\n\t-l*)\n\t  func_cl_dashl \"${1#-l}\"\n\t  set x \"$@\" \"$lib\"\n\t  shift\n\t  ;;\n\t-L)\n\t  eat=1\n\t  func_cl_dashL \"$2\"\n\t  ;;\n\t-L*)\n\t  func_cl_dashL \"${1#-L}\"\n\t  ;;\n\t-static)\n\t  shared=false\n\t  ;;\n\t-Wl,*)\n\t  arg=${1#-Wl,}\n\t  save_ifs=\"$IFS\"; IFS=','\n\t  for flag in $arg; do\n\t    IFS=\"$save_ifs\"\n\t    linker_opts=\"$linker_opts $flag\"\n\t  done\n\t  IFS=\"$save_ifs\"\n\t  ;;\n\t-Xlinker)\n\t  eat=1\n\t  linker_opts=\"$linker_opts $2\"\n\t  ;;\n\t-*)\n\t  set x \"$@\" \"$1\"\n\t  shift\n\t  ;;\n\t*.cc | *.CC | *.cxx | *.CXX | *.[cC]++)\n\t  func_file_conv \"$1\"\n\t  set x \"$@\" -Tp\"$file\"\n\t  shift\n\t  ;;\n\t*.c | *.cpp | *.CPP | *.lib | *.LIB | *.Lib | *.OBJ | *.obj | *.[oO])\n\t  func_file_conv \"$1\" mingw\n\t  set x \"$@\" \"$file\"\n\t  shift\n\t  ;;\n\t*)\n\t  set x \"$@\" \"$1\"\n\t  shift\n\t  ;;\n      esac\n    fi\n    shift\n  done\n  if test -n \"$linker_opts\"; then\n    linker_opts=\"-link$linker_opts\"\n  fi\n  exec \"$@\" $linker_opts\n  exit 1\n}\n\neat=\n\ncase $1 in\n  '')\n     echo \"$0: No command.  Try '$0 --help' for more information.\" 1>&2\n     exit 1;\n     ;;\n  -h | --h*)\n    cat <<\\EOF\nUsage: compile [--help] [--version] PROGRAM [ARGS]\n\nWrapper for compilers which do not understand '-c -o'.\nRemove '-o dest.o' from ARGS, run PROGRAM with the remaining\narguments, and rename the output as expected.\n\nIf you are trying to build a whole package this is not the\nright script to run: please start by reading the file 'INSTALL'.\n\nReport bugs to <bug-automake@gnu.org>.\nEOF\n    exit $?\n    ;;\n  -v | --v*)\n    echo \"compile $scriptversion\"\n    exit $?\n    ;;\n  cl | *[/\\\\]cl | cl.exe | *[/\\\\]cl.exe | \\\n  icl | *[/\\\\]icl | icl.exe | *[/\\\\]icl.exe )\n    func_cl_wrapper \"$@\"      # Doesn't return...\n    ;;\nesac\n\nofile=\ncfile=\n\nfor arg\ndo\n  if test -n \"$eat\"; then\n    eat=\n  else\n    case $1 in\n      -o)\n\t# configure might choose to run compile as 'compile cc -o foo foo.c'.\n\t# So we strip '-o arg' only if arg is an object.\n\teat=1\n\tcase $2 in\n\t  *.o | *.obj)\n\t    ofile=$2\n\t    ;;\n\t  *)\n\t    set x \"$@\" -o \"$2\"\n\t    shift\n\t    ;;\n\tesac\n\t;;\n      *.c)\n\tcfile=$1\n\tset x \"$@\" \"$1\"\n\tshift\n\t;;\n      *)\n\tset x \"$@\" \"$1\"\n\tshift\n\t;;\n    esac\n  fi\n  shift\ndone\n\nif test -z \"$ofile\" || test -z \"$cfile\"; then\n  # If no '-o' option was seen then we might have been invoked from a\n  # pattern rule where we don't need one.  That is ok -- this is a\n  # normal compilation that the losing compiler can handle.  If no\n  # '.c' file was seen then we are probably linking.  That is also\n  # ok.\n  exec \"$@\"\nfi\n\n# Name of file we expect compiler to create.\ncofile=`echo \"$cfile\" | sed 's|^.*[\\\\/]||; s|^[a-zA-Z]:||; s/\\.c$/.o/'`\n\n# Create the lock directory.\n# Note: use '[/\\\\:.-]' here to ensure that we don't use the same name\n# that we are using for the .o file.  Also, base the name on the expected\n# object file name, since that is what matters with a parallel build.\nlockdir=`echo \"$cofile\" | sed -e 's|[/\\\\:.-]|_|g'`.d\nwhile true; do\n  if mkdir \"$lockdir\" >/dev/null 2>&1; then\n    break\n  fi\n  sleep 1\ndone\n# FIXME: race condition here if user kills between mkdir and trap.\ntrap \"rmdir '$lockdir'; exit 1\" 1 2 15\n\n# Run the compile.\n\"$@\"\nret=$?\n\nif test -f \"$cofile\"; then\n  test \"$cofile\" = \"$ofile\" || mv \"$cofile\" \"$ofile\"\nelif test -f \"${cofile}bj\"; then\n  test \"${cofile}bj\" = \"$ofile\" || mv \"${cofile}bj\" \"$ofile\"\nfi\n\nrmdir \"$lockdir\"\nexit $ret\n\n# Local Variables:\n# mode: shell-script\n# sh-indentation: 2\n# eval: (add-hook 'before-save-hook 'time-stamp)\n# time-stamp-start: \"scriptversion=\"\n# time-stamp-format: \"%:y-%02m-%02d.%02H\"\n# time-stamp-time-zone: \"UTC0\"\n# time-stamp-end: \"; # UTC\"\n# End:\n"
        },
        {
          "name": "configure.ac",
          "type": "blob",
          "size": 10.2607421875,
          "content": "#                                               -*- Autoconf -*-\n# Process this file with autoconf to produce a configure script.\n# $Id: $\n# xunsearch-0.0.x configure autoconf script\n#\n\nAC_PREREQ([2.71])\nAC_INIT([xunsearch],[1.4.17],[http://www.xunsearch.com/bugs])\n\n# for automake\nAM_INIT_AUTOMAKE\n\n# Copy wright\nAC_COPYRIGHT([Copyright (C)2007-2013, hightman\nThis package maybe copied, distributed and modified under\nthe terms of my License; see COPYING for more detials.])\n\n# sorce code tree\nAC_CONFIG_SRCDIR([src/conn.c])\nAC_CONFIG_HEADERS([config.h])\n\n# Checks for programs.\nAC_PROG_AWK\nAC_PROG_CXX\nAC_PROG_CC\nAC_PROG_SED\nAC_PROG_INSTALL\nAC_PROG_LN_S\nAC_PROG_MAKE_SET\nAC_PROG_CPP\nAC_PROG_EGREP\n\n# Check large file support?\nAC_SYS_LARGEFILE\n\n# Checks for union semnum\nAC_CACHE_CHECK([union semun for semaphore...], ac_cv_union_semun,\n\tAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <sys/types.h>\n#include <sys/ipc.h>\n#include <sys/sem.h>\n\t]], [[union semun arg;]])],[ac_cv_union_semun=yes],[ac_cv_union_semun=no])\n)\nif test \"$ac_cv_union_semun\" = \"yes\" ; then\n\tAC_DEFINE(HAVE_UNION_SEMUN, 1, [Define to 1 if you have union semun])\nfi\n\n# Check sun_len in sys/un.h\nAC_MSG_CHECKING([for sun_len in sys/un.h])\nAC_EGREP_HEADER([sun_len], [sys/un.h],\n\t[\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_SOCKADDR_UN_SUN_LEN], 1, [Define if sockaddr_un in sys/un.h contains a sun_len component])\n\t],\n\tAC_MSG_RESULT([no])\n)\n\n# Debug flag check\nAC_ARG_ENABLE(debug,\n\tAS_HELP_STRING([--enable-debug], [enable debug symbol, assert and other verbose log infos]),\n\t[ ], [enable_debug=no]\n)\nif test \"$enable_debug\" = \"yes\"; then\n\ttmp_cflags=`echo $CFLAGS | sed 's/-g//g'`\n\ttmp_cxxflags=`echo $CXXFLAGS | sed 's/-g//g'`\n\tif test \"$tmp_cflags\" = \"$CFLAGS\" ; then CFLAGS=\"$CFLAGS -g\"; fi\n\tif test \"$tmp_cxxflags\" = \"$CXXFLAGS\" ; then CXXFLAGS=\"$CXXFLAGS -g\"; fi\n\tCFLAGS=`echo $CFLAGS | sed 's/-O@<:@0-9@:>@/-O0/g'`\n\tCXXFLAGS=`echo $CXXFLAGS | sed 's/-O@<:@0-9@:>@/-O0/g'`\n\tAC_DEFINE(DEBUG, 1, [Define to 1 if you want to enable debug flags])\nelse\n\ttmp_cflags=`echo $CFLAGS | sed 's/-O//g'`\n\ttmp_cxxflags=`echo $CXXFLAGS | sed 's/-O//g'`\n\tif test \"$tmp_cflags\" = \"$CFLAGS\" ; then CFLAGS=\"$CFLAGS -O2\"; fi\n\tif test \"$tmp_cxxflags\" = \"$CXXFLAGS\" ; then CXXFLAGS=\"$CXXFLAGS -O2\"; fi\n\tAC_DEFINE(NDEBUG, 1, [Define to 1 if you want to turn off assert statements])\nfi\n\n# Memory Cache flag check\nAC_ARG_ENABLE(memory-cache,\n\tAS_HELP_STRING([--enable-memory-cache], [enable memory cache for search result. NOTE: cache may cause some un-stable in some platforms.]),\n\t[ ], [enable_memory_cache=no]\n)\nif test \"$enable_memory_cache\" != \"no\" ; then\n\tAC_DEFINE(HAVE_MEMORY_CACHE, 1, [Define to 1 if you want to enable memory cache for search result])\nfi\nAM_CONDITIONAL([HAVE_MEMORY_CACHE], [test \"$enable_memory_cache\" != \"no\"])\n\n# library search dirs\nac_extra_added=\nac_search_dirs=\"/usr/local/<name> /usr/local /opt/local /usr\"\nif test \"x$prefix\" != \"xNONE\" ; then\n\tac_search_dirs=\"$prefix/<name> $prefix $ac_search_dirs\"\nfi\n\n# Libevent package check\nAC_ARG_WITH(libevent,\n\tAS_HELP_STRING([--with-libevent@<:@=DIR@:>@],\n\t\t[specify the install directory of libevent, The version should be 2.0.0 or greater.]),\n\t[ ], [with_libevent=yes]\n)\nif test \"$with_libevent\" != \"no\" ; then\n\tAC_MSG_CHECKING([for event2/event.h of libevent])\n\tLIBEVENT_DIR=\"\"\n\tif test \"$with_libevent\" = \"yes\" ; then\n        search_dirs=`echo $ac_search_dirs | sed 's#<name>#libevent#g'`\n\t\tfor tmpdir in $search_dirs; do\n\t\t\tif test -f $tmpdir/include/event2/event.h ; then\n\t\t\t\tLIBEVENT_DIR=$tmpdir\n\t\t\t\tbreak\n\t\t\tfi\n\t\tdone\n\telif test -f \"$with_libevent/include/event2/event.h\" ; then\n\t\tLIBEVENT_DIR=$with_libevent\n\tfi\n\tif test \"$LIBEVENT_DIR\" = \"\" ; then\n\t\tAC_MSG_RESULT(no)\n\t\tAC_MSG_ERROR([event2/event.h NOT FOUND. please check your libevent install directory. >= 2.0.0])\n\telse\n\t\tAC_MSG_RESULT([yes: $LIBEVENT_DIR])\n\tfi\n\n\t# Check libevent version ( >= 2.0.0)\n\tAC_MSG_CHECKING([for correct libevent version])\n\tAC_EGREP_CPP(yes, [\n#include \"$LIBEVENT_DIR/include/event2/event-config.h\"\n#if _EVENT_NUMERIC_VERSION >= 0x02000000\nyes\n#endif\n#if EVENT__NUMERIC_VERSION >= 0x02000000\nyes\n#endif\n\t], [\n\t\tAC_MSG_RESULT(ok)\n\t], [\n\t\tAC_MSG_ERROR([libevent 2.0.0 or greater required.])\n\t])\n\n\t# Check libevent library\n\tAC_CHECK_LIB(event_core, event_base_new,\n\t\t[\n            tmp_extra_added=`echo $ac_extra_added | sed \"s#$LIBEVENT_DIR##\"`\n\t\t\tif test \"$ac_extra_added\" = \"$tmp_extra_added\" ; then\n              ac_extra_added=\"$ac_extra_added $LIBEVENT_DIR\"\n\t\t\t  ac_extra_added=`echo $ac_extra_added | sed \"s#^\\s*##\"`\n\t\t\t  LDFLAGS=\"$LDFLAGS -L$LIBEVENT_DIR/lib -Wl,-rpath,$LIBEVENT_DIR/lib\"\n\t\t\t  CFLAGS=\"$CFLAGS -I$LIBEVENT_DIR/include\"\n\t\t\t  CXXFLAGS=\"$CXXFLAGS -I$LIBEVENT_DIR/include\"\n            fi\n\t\t], [\n\t\t\tAC_MSG_ERROR([event_base_new() NOT found in libevent, please check it first.])\n\t\t], [\n\t\t\t-L$LIBEVENT_DIR/lib\n\t\t]\n\t)\nelse\n\tAC_MSG_ERROR([libevent is required, get it from: http://libevent.org/])\nfi\n\n# scws library check\nAC_ARG_WITH(scws,\n\tAS_HELP_STRING([--with-scws@<:@=DIR@:>@],\n\t\t[specify the install directory of scws.]),\n\t[ ], [with_scws=yes]\n)\nif test \"$with_scws\" != \"no\" ; then\n\tAC_MSG_CHECKING([for scws.h of scws])\n\tSCWS_DIR=\"\"\n\tif test \"$with_scws\" = \"yes\" ; then\n        search_dirs=`echo $ac_search_dirs | sed 's#<name>#scws#g'`\n\t\tfor tmpdir in $search_dirs; do\n\t\t\tif test -f $tmpdir/include/scws/scws.h ; then\n\t\t\t\tSCWS_DIR=$tmpdir\n\t\t\t\tbreak\n\t\t\tfi\n\t\tdone\n\telif test -f \"$with_scws/include/scws/scws.h\" ; then\n\t\tSCWS_DIR=$with_scws\n\tfi\n\tif test \"$SCWS_DIR\" = \"\" ; then\n\t\tAC_MSG_RESULT(no)\n\t\tAC_MSG_ERROR([scws.h NOT FOUND. please check your scws install directory. >= 1.1.6])\n\telse\n\t\tAC_MSG_RESULT([yes: $SCWS_DIR])\n\tfi\n\t\n\t# Etc directory (dictionary & rules)\n\tif test \"$SCWS_DIR\" = \"/usr\"; then\n\t\tSCWS_ETCDIR=/etc\n\telse\n\t\tSCWS_ETCDIR=$SCWS_DIR/etc\n\tfi\n\n\t# Check scws library\n\tAC_CHECK_LIB(scws, scws_new,\n\t\t[\n            tmp_extra_added=`echo $ac_extra_added | sed \"s#$SCWS_DIR##\"`\n\t\t\tif test \"$ac_extra_added\" = \"$tmp_extra_added\" ; then\n              ac_extra_added=\"$ac_extra_added $SCWS_DIR\"\n\t\t\t  ac_extra_added=`echo $ac_extra_added | sed \"s#^\\s*##\"`\n\t\t\t  LDFLAGS=\"$LDFLAGS -L$SCWS_DIR/lib -Wl,-rpath,$SCWS_DIR/lib\"\n\t\t\t  CFLAGS=\"$CFLAGS -I$SCWS_DIR/include\"\n\t\t\t  CXXFLAGS=\"$CXXFLAGS -I$SCWS_DIR/include\"\n            fi\n\t\t\tAC_DEFINE_UNQUOTED(SCWS_ETCDIR, \"$SCWS_ETCDIR\", [Resource directory of scws])\n\t\t], [\n\t\t\tAC_MSG_ERROR([scws_new() NOT found in libscws, please check it first.])\n\t\t], [\n\t\t\t-L$SCWS_DIR/lib\n\t\t]\n\t)\nelse\n\tAC_MSG_ERROR([scws is required, get it from: http://www.xunsearch.com/scws/])\nfi\n\n# Xapian-core package check\nAC_ARG_WITH(xapian,\n\tAS_HELP_STRING([--with-xapian@<:@=DIR@:>@],\n\t\t[specify the install directory of xapian-core-scws. The version should be 1.4.0 or greater.]),\n\t[ ], [with_xapian=yes]\n)\nif test \"$with_xapian\" != \"no\" ; then\n\tAC_MSG_CHECKING([for xapian.h of xapian-core])\n\tXAPIAN_DIR=\"\"\n\tif test \"$with_xapian\" = \"yes\" ; then\n        search_dirs=`echo $ac_search_dirs | sed 's#<name>#xapian#g'`       \n\t\tfor tmpdir in $search_dirs; do\n\t\t\tif test -f $tmpdir/include/xapian.h ; then\n\t\t\t\tXAPIAN_DIR=$tmpdir\n\t\t\t\tbreak\n\t\t\tfi\n\t\tdone\n\telif test -f \"$with_xapian/include/xapian.h\" ; then\n\t\tXAPIAN_DIR=$with_xapian\n\tfi\n\tif test \"$XAPIAN_DIR\" = \"\" ; then\n\t\tAC_MSG_RESULT(no)\n\t\tAC_MSG_ERROR([xapian.h NOT FOUND. Please check your xapian-core install directory.])\n\telse\n\t\tAC_MSG_RESULT([yes: $XAPIAN_DIR])\n\tfi\n\n\t# Check libxapian version ( >= 1.4.0)\n\tAC_MSG_CHECKING([for correct xapian version])\n\tAC_EGREP_CPP(yes, [\n#include \"$XAPIAN_DIR/include/xapian/version.h\"\n#if XAPIAN_MAJOR_VERSION >= 1 && (XAPIAN_MINOR_VERSION > 4 || XAPIAN_REVERSION >= 0)\nyes\n#endif\n\t], [\n\t\tAC_MSG_RESULT(ok)\n\t], [\n\t\tAC_MSG_ERROR([xapian-core 1.4.0 or greater required.])\n\t])\n\n\t# Check xapian-core library\n\tAC_MSG_CHECKING([for library of xapian-core])\n\tAC_LANG(C++)\n\tsaved_cxxflags=$CXXFLAGS\n\tCXXFLAGS=\"$CXXFLAGS -I$XAPIAN_DIR/include\"\n\tsaved_libs=$LIBS\n\tLIBS=\"$LIBS -lxapian -L$XAPIAN_DIR/lib\"\n\tAC_LINK_IFELSE(\n\t\t[\n\t\t\tAC_LANG_PROGRAM([\n#include <xapian.h>\n\t\t\t], [\nXapian::Document doc;\nXapian::TermGenerator indexer;\nindexer.load_scws(NULL, 0, 0);\nindexer.set_document(doc);\n\t\t\t])\n\t\t], [\n\t\t\tLIBS=$saved_libs\n\t\t\tCXXFLAGS=$saved_cxxflags\n            tmp_extra_added=`echo $ac_extra_added | sed \"s#$XAPIAN_DIR##\"`\n\t\t\tif test \"$ac_extra_added\" = \"$tmp_extra_added\" ; then\n              ac_extra_added=\"$ac_extra_added $XAPIAN_DIR\"\n\t\t\t  ac_extra_added=`echo $ac_extra_added | sed \"s#^\\s*##\"`\n\t\t\t  CXXFLAGS=\"$CXXFLAGS -I$XAPIAN_DIR/include\"\n\t\t\t  LDFLAGS=\"$LDFLAGS -L$XAPIAN_DIR/lib -Wl,-rpath,$XAPIAN_DIR/lib\"\n            fi\n\t\t\tAC_DEFINE_UNQUOTED(XAPIAN_DIR, \"$XAPIAN_DIR\", [Install directory of xapian])\n\t\t\tAC_MSG_RESULT(ok)\n\t\t], [\n\t\t\tAC_MSG_RESULT(no)\n\t\t\tAC_MSG_ERROR([Invalid xapian library, maybe not do the patch with scws?.]) \n\t\t]\n\t)\nelse\n\tAC_MSG_ERROR([xapian-core-scws is required, get it from: http://www.xunsearch.com/download/packages/])\nfi\n\n# Pthread check\nAC_CHECK_LIB(pthread, \n\tpthread_mutex_init,\n\t[ \n\t\tLIBS=\"$LIBS -lpthread\"\n\t], [\n\t\tAC_MSG_ERROR([You need to have lib-pthread around])\n\t]\n)\n\n# Has sdk dev files?\nAM_CONDITIONAL([HAVE_SDK_PHP_DEV], [test -d sdk/php/dev])\n\n# Checks for header files.\nAC_CHECK_HEADERS([arpa/inet.h fcntl.h limits.h netinet/in.h stdlib.h string.h strings.h sys/param.h sys/socket.h sys/time.h unistd.h])\n\n# Checks for typedefs, structures, and compiler characteristics.\nAC_HEADER_STDBOOL\nAC_C_INLINE\nAC_TYPE_OFF_T\nAC_TYPE_PID_T\nAC_TYPE_SIZE_T\n\n# Check sizeof off_t\nAC_CHECK_SIZEOF([off_t])\n\n# Checks for library functions.\nAC_FUNC_ERROR_AT_LINE\nAC_FUNC_FORK\nAC_FUNC_MALLOC\nAC_FUNC_MMAP\nAC_FUNC_STRTOD\n#AC_CHECK_FUNCS([alarm dup2 ftruncate getcwd inet_ntoa memchr memset mkdir munmap putenv realpath rmdir setproctitle socket strcasecmp strchr strdup strerror strncasecmp strrchr])\nAC_CHECK_FUNCS([setproctitle])\n\n# Define the prefix\nif test \"x$prefix\" = \"xNONE\" ; then\n  ac_install_prefix=$ac_default_prefix\nelse\n  ac_install_prefix=$prefix\nfi\nAC_DEFINE_UNQUOTED(PREFIX, [\"$ac_install_prefix\"], [Install prefix of the software])\n\n#php option\nAC_ARG_ENABLE(php,\n\tAS_HELP_STRING( [--enable-php], [install php sdk (yes|no, default=yes)]),\n\t[\n\t\tcase \"${enableval}\" in\n\t\t\tyes) enable_php=yes ;;\n\t\t\tno)  enable_php=no ;;\n\t\t\t*)   AC_MSG_ERROR(bad value ${enableval} for --enable-php) ;;\n\t\tesac\n\t], [\n\t\tenable_php=yes\n\t]\n)\nAM_CONDITIONAL([ENABLE_PHP], [test ${enable_php} = yes])\n\n# Generate the make file\nAC_CONFIG_FILES([Makefile src/Makefile sdk/Makefile])\nAC_CONFIG_FILES([src/xs-ctl.sh src/xs-optimize.sh])\nAC_OUTPUT\n"
        },
        {
          "name": "dist-sh",
          "type": "blob",
          "size": 1.994140625,
          "content": "#!/bin/sh\n# $Id: $\n# Distribute hook script, run by make automatically\n\n# update subtree\necho \"Updating substree xs-sdk-php ...\"\ngit subtree push --prefix=sdk/php local-sdk-php master > /dev/null 2>&1\n(cd ../xs-sdk-php; git push)\n\n# get fileinfo & version\nfileinfo=\nfiletype=BETA\ndevel=`cat config.h | grep PACKAGE_VERSION | cut -d \\\" -f 2 | grep \"dev$\"`\nif test -z \"$devel\" ; then\n  fileinfo=`cat VERSION.inc`\n  git tag $fileinfo -a -m \"Release: $fileinfo\" \n  if test $? -ne 0 ; then\n    exit -1\n  fi\n  (cd ../xs-sdk-php; git tag $fileinfo -a -m \"Release: $fileinfo\"; git push --tags)\n  fileinfo2=`echo $fileinfo | sed 's/[a-zA-Z]//g'`\n  if test \"$fileinfo\" = \"$fileinfo2\" ; then\n    filetype=RELEASE\n  fi\nelse\n  fileinfo=dev\nfi\n\n# make tar ball\necho \"Creating package file: xunsearch-full-$fileinfo ...\"\nln -s xunsearch-full xunsearch-full-$fileinfo\ntar -cHjf xunsearch-full-$fileinfo.tar.bz2 xunsearch-full-$fileinfo\nrm -f xunsearch-full-$fileinfo\n\n# upload to web server\necho \"Uploading file to web server ($filetype) ...\"\nif test \"$fileinfo\" = \"dev\" ; then\n  scp xunsearch-full-$fileinfo.tar.bz2 xunsearch:./web/download\n  scp xunsearch-full/packages/xunsearch-sdk-*-dev.zip xunsearch:./web/download/xunsearch-sdk-dev.zip\n  scp VERSION.inc xunsearch:./web/protected/data/VERSION\nelse\n  scp xunsearch-full-$fileinfo.tar.bz2 xunsearch:./web/download/xunsearch-full\n  if test \"$filetype\" = \"RELEASE\" ; then\n    ssh xunsearch ln -sf xunsearch-full/xunsearch-full-$fileinfo.tar.bz2 ./web/download/xunsearch-full-latest.tar.bz2 \n\tscp xunsearch-full/packages/xunsearch-sdk-$fileinfo.zip xunsearch:./web/download/xunsearch-sdk-latest.zip\n  fi\n  scp VERSION.inc xunsearch:./web/protected/data/$filetype\n  # also update dev\n  scp xunsearch-full-$fileinfo.tar.bz2 xunsearch:./web/download/xunsearch-full-dev.tar.bz2\n  scp xunsearch-full/packages/xunsearch-sdk-$fileinfo.zip xunsearch:./web/download/xunsearch-sdk-dev.zip\n  scp VERSION.inc xunsearch:./web/protected/data/VERSION\nfi\n\n# clean local file\nrm -f xunsearch-full-$fileinfo.tar.bz2\n\nexit 0\n"
        },
        {
          "name": "docker-entrypoint.sh",
          "type": "blob",
          "size": 0.1484375,
          "content": "#!/bin/sh\necho 'start xunsearch'\nrm -f tmp/pid.* && bin/xs-indexd -l /dev/stdout -k start && bin/xs-searchd -l /dev/stdout -k start && tail -f /dev/null"
        },
        {
          "name": "etc",
          "type": "tree",
          "content": null
        },
        {
          "name": "notify-sh",
          "type": "blob",
          "size": 0.802734375,
          "content": "#!/bin/sh\n# $Id: $\n# Distribute hook script, run by make automatically\n\n# install notify\nif test -x \"/usr/bin/nc\" || test -x \"/bin/nc\" ; then\n  t_type=install\n  t_ver=`cat VERSION.inc`\n  t_host=`hostname 2> /dev/null`\n  if test -x \"$1/bin/xs-searchd\" ; then\n    t_oldver=`$1/bin/xs-searchd -v | cut -d / -f 2 | cut -d ' ' -f 1`\n    if test \"$t_ver\" = \"$t_oldver\" ; then\n      t_type=reinstall\n    else\n      t_type=update_$t_oldver\n    fi\n  fi\n  t_get=\"TRG /genpxonpx?irefvba={i}&glcr={g}&ubfg={u} UGGC/1.0\"\n  t_get=`echo $t_get | tr 'A-M N-Z a-m n-z' 'N-Z A-M n-z a-m'`\n  t_get=`echo $t_get | sed -e 's#{t}#'$t_type'#' -e 's#{v}#'$t_ver'#' -e 's#{h}#'$t_host'#' 2> /dev/null`\n  t_host=`echo \"jjj.khafrnepu.pbz\" | tr 'A-M N-Z a-m n-z' 'N-Z A-M n-z a-m'`\n  nc $t_host 80 > /dev/null 2>&1 <<EOF\n$t_get\nHost: $t_host\n\nEOF\nfi\n"
        },
        {
          "name": "sdk",
          "type": "tree",
          "content": null
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "version-sh",
          "type": "blob",
          "size": 0.767578125,
          "content": "#!/bin/sh\n# $Id$\n# Generate VERSION.inc file\n\n# package version\nversion=`cat config.h | grep PACKAGE_VERSION | cut -d \\\" -f 2`\ndevel=`echo $version | grep \"dev$\"`\n\n# check git version, devel version\nif test -d \".git\" && ! test -z \"$devel\" ; then\n  branch=`git branch | grep ^\\* | cut -d ' ' -f 2` \n  if test \"$branch\" = \"master\" ; then\n    version=`git describe 2> /dev/null`\n    if test -z $version ; then\n\t  version=\"0.0.0\"\n    fi\n  else\n    current=`git describe --abbrev=0 2> /dev/null`\n    if test -z $current ; then\n      next=\"0.0.1\"\n    else\n      next=`echo $current | awk -F . '{ $NF=$NF+1; VER=$1; for(i=2;i<=NF;i++) VER=VER\".\"$i; print VER  }'`\n    fi\n    last=`git log -1 --pretty='format:%h'`\n    version=\"$next-$branch-g$last\"\n  fi\nfi\n\n# output the version\necho $version\n"
        },
        {
          "name": "xapian-scws",
          "type": "tree",
          "content": null
        },
        {
          "name": "xunsearch-full",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}