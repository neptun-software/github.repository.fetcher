{
  "metadata": {
    "timestamp": 1736712057678,
    "page": 593,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjYwMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "Tucker-Eric/EloquentFilter",
      "stars": 1740,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".editorconfig",
          "type": "blob",
          "size": 0.2119140625,
          "content": "root = true\n\n[*]\ncharset = utf-8\ninsert_final_newline = true\nindent_style = space\nindent_size = 4\ntrim_trailing_whitespace = true\n\n[*.md]\ntrim_trailing_whitespace = false\n\n[*.yml]\nindent_style = space\nindent_size = 2\n"
        },
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.4033203125,
          "content": "* text=auto\n\n# Path-based git attributes\n# https://git-scm.com/docs/gitattributes\n\n# Ignore all test and documentation with \"export-ignore\".\n/.editorconfig      export-ignore\n/.gitattributes     export-ignore\n/.github            export-ignore\n/.gitignore         export-ignore\n/.styleci.yml       export-ignore\n/CODE_OF_CONDUCT.md export-ignore\n/phpunit.xml        export-ignore\n/tests              export-ignore\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.046875,
          "content": "vendor\n.idea\ncomposer.lock\n.phpunit.result.cache"
        },
        {
          "name": ".styleci.yml",
          "type": "blob",
          "size": 0.0849609375,
          "content": "preset: laravel\n\nrisky: false\n\nfinder:\n  exclude:\n    - \"config\"\n  name:\n    - \"*.php\"\n"
        },
        {
          "name": "CODE_OF_CONDUCT.md",
          "type": "blob",
          "size": 3.1435546875,
          "content": "# Contributor Covenant Code of Conduct\n\n## Our Pledge\n\nIn the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to making participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, gender identity and expression, level of experience, nationality, personal appearance, race, religion, or sexual identity and orientation.\n\n## Our Standards\n\nExamples of behavior that contributes to creating a positive environment include:\n\n* Using welcoming and inclusive language\n* Being respectful of differing viewpoints and experiences\n* Gracefully accepting constructive criticism\n* Focusing on what is best for the community\n* Showing empathy towards other community members\n\nExamples of unacceptable behavior by participants include:\n\n* The use of sexualized language or imagery and unwelcome sexual attention or advances\n* Trolling, insulting/derogatory comments, and personal or political attacks\n* Public or private harassment\n* Publishing others' private information, such as a physical or electronic address, without explicit permission\n* Other conduct which could reasonably be considered inappropriate in a professional setting\n\n## Our Responsibilities\n\nProject maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.\n\nProject maintainers have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any contributor for other behaviors that they deem inappropriate, threatening, offensive, or harmful.\n\n## Scope\n\nThis Code of Conduct applies both within project spaces and in public spaces when an individual is representing the project or its community. Examples of representing a project or community include using an official project e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers.\n\n## Enforcement\n\nInstances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the project team at tucker.ericm@gmail.com. The project team will review and investigate all complaints, and will respond in a way that it deems appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately.\n\nProject maintainers who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by other members of the project's leadership.\n\n## Attribution\n\nThis Code of Conduct is adapted from the [Contributor Covenant][homepage], version 1.4, available at [http://contributor-covenant.org/version/1/4][version]\n\n[homepage]: http://contributor-covenant.org\n[version]: http://contributor-covenant.org/version/1/4/\n"
        },
        {
          "name": "LICENSE.txt",
          "type": "blob",
          "size": 1.0498046875,
          "content": "The MIT License (MIT)\n\nCopyright (c) <Eric Tucker>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 21.87890625,
          "content": "# Eloquent Filter\n\n[![Latest Stable Version](https://poser.pugx.org/tucker-eric/eloquentfilter/v/stable)](https://packagist.org/packages/tucker-eric/eloquentfilter)\n[![Total Downloads](https://poser.pugx.org/tucker-eric/eloquentfilter/downloads)](https://packagist.org/packages/tucker-eric/eloquentfilter)\n[![Daily Downloads](https://poser.pugx.org/tucker-eric/eloquentfilter/d/daily)](https://packagist.org/packages/tucker-eric/eloquentfilter)\n[![License](https://poser.pugx.org/tucker-eric/eloquentfilter/license)](https://packagist.org/packages/tucker-eric/eloquentfilter)\n[![StyleCI](https://styleci.io/repos/53163405/shield)](https://styleci.io/repos/53163405/)\n[![PHPUnit Status](https://github.com/Tucker-Eric/EloquentFilter/workflows/PHPUnit/badge.svg?branch=master)](https://github.com/Tucker-Eric/EloquentFilter/actions?query=branch%3Amaster)\n\nAn Eloquent way to filter Eloquent Models and their relationships.\n\n## Introduction\nLets say we want to return a list of users filtered by multiple parameters. When we navigate to:\n\n`/users?name=er&last_name=&company_id=2&roles[]=1&roles[]=4&roles[]=7&industry=5`\n\n`$request->all()` will return:\n\n```php\n[\n    'name'       => 'er',\n    'last_name'  => '',\n    'company_id' => '2',\n    'roles'      => ['1','4','7'],\n    'industry'   => '5'\n]\n```\n\nTo filter by all those parameters we would need to do something like:\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse App\\Http\\Requests;\nuse App\\User;\n\nclass UserController extends Controller\n{\n\n    public function index(Request $request)\n    {\n        $query = User::where('company_id', $request->input('company_id'));\n\n        if ($request->has('last_name'))\n        {\n            $query->where('last_name', 'LIKE', '%' . $request->input('last_name') . '%');\n        }\n\n        if ($request->has('name'))\n        {\n            $query->where(function ($q) use ($request)\n            {\n                return $q->where('first_name', 'LIKE', $request->input('name') . '%')\n                    ->orWhere('last_name', 'LIKE', '%' . $request->input('name') . '%');\n            });\n        }\n\n        $query->whereHas('roles', function ($q) use ($request)\n        {\n            return $q->whereIn('id', $request->input('roles'));\n        })\n            ->whereHas('clients', function ($q) use ($request)\n            {\n                return $q->whereHas('industry_id', $request->input('industry'));\n            });\n\n        return $query->get();\n    }\n\n}\n```\n\nTo filter that same input With Eloquent Filters:\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse App\\Http\\Requests;\nuse App\\User;\n\nclass UserController extends Controller\n{\n\n    public function index(Request $request)\n    {\n        return User::filter($request->all())->get();\n    }\n\n}\n```\n\n## Configuration\n### Install Through Composer\n```\ncomposer require tucker-eric/eloquentfilter\n```\n\nThere are a few ways to define the filter a model will use:\n\n- [Use EloquentFilter's Default Settings](#default-settings)\n- [Use A Custom Namespace For All Filters](#with-configuration-file-optional)\n- [Define A Model's Default Filter](#define-the-default-model-filter-optional)\n- [Dynamically Select A Model's Filter](#dynamic-filters)\n\n\n#### Default Settings\nThe default namespace for all filters is `App\\ModelFilters\\` and each Model expects the filter classname to follow the `{$ModelName}Filter` naming convention regardless of the namespace the model is in.  Here is an example of Models and their respective filters based on the default naming convention.\n\n|Model|ModelFilter|\n|-----|-----------|\n|`App\\User`|`App\\ModelFilters\\UserFilter`|\n|`App\\FrontEnd\\PrivatePost`|`App\\ModelFilters\\PrivatePostFilter`|\n|`App\\FrontEnd\\Public\\GuestPost`|`App\\ModelFilters\\GuestPostFilter`|\n\n#### Laravel\n\n##### With Configuration File (Optional)\n\n> Registering the service provider will give you access to the `php artisan model:filter {model}` command as well as allow you to publish the configuration file.  Registering the service provider is not required and only needed if you want to change the default namespace or use the artisan command\n\nAfter installing the Eloquent Filter library, register the `EloquentFilter\\ServiceProvider::class` in your `config/app.php` configuration file:\n\n```php\n'providers' => [\n    // Other service providers...\n\n    EloquentFilter\\ServiceProvider::class,\n],\n```\n\nCopy the package config to your local config with the publish command:\n\n```bash\nphp artisan vendor:publish --provider=\"EloquentFilter\\ServiceProvider\"\n```\n\nIn the `config/eloquentfilter.php` config file.  Set the namespace your model filters will reside in:\n\n```php\n'namespace' => \"App\\\\ModelFilters\\\\\",\n```\n\n#### Lumen\n\n##### Register The Service Provider (Optional)\n\n>This is only required if you want to use the `php artisan model:filter` command.\n\nIn `bootstrap/app.php`:\n\n```php\n$app->register(EloquentFilter\\LumenServiceProvider::class);\n```\n\n##### Change The Default Namespace\n\nIn `bootstrap/app.php`:\n\n```php\nconfig(['eloquentfilter.namespace' => \"App\\\\Models\\\\ModelFilters\\\\\"]);\n```\n\n#### Define The Default Model Filter (optional)\n\n> The following is optional. If no `modelFilter` method is found on the model the model's filter class will be resolved by the [default naming conventions](#default-settings)\n\nCreate a public method `modelFilter()` that returns `$this->provideFilter(Your\\Model\\Filter::class);` in your model.\n\n```php\n<?php\n\nnamespace App;\n\nuse EloquentFilter\\Filterable;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass User extends Model\n{\n    use Filterable;\n\n    public function modelFilter()\n    {\n        return $this->provideFilter(\\App\\ModelFilters\\CustomFilters\\CustomUserFilter::class);\n    }\n\n    //User Class\n}\n```\n#### Dynamic Filters\n\nYou can define the filter dynamically by passing the filter to use as the second parameter of the `filter()` method.  Defining a filter dynamically will take precedent over any other filters defined for the model.\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse App\\Http\\Requests;\nuse App\\User;\nuse App\\ModelFilters\\Admin\\UserFilter as AdminFilter;\nuse App\\ModelFilters\\User\\UserFilter as BasicUserFilter;\nuse Auth;\n\nclass UserController extends Controller\n{\n    public function index(Request $request)\n    {\n        $userFilter = Auth::user()->isAdmin() ? AdminFilter::class : BasicUserFilter::class;\n\n        return User::filter($request->all(), $userFilter)->get();\n    }\n}\n\n```\n\n### Generating The Filter\n> Only available if you have registered `EloquentFilter\\ServiceProvider::class` in the providers array in your `config/app.php'\n\nYou can create a model filter with the following artisan command:\n\n```bash\nphp artisan model:filter User\n```\n\nWhere `User` is the Eloquent Model you are creating the filter for.  This will create `app/ModelFilters/UserFilter.php`\n\nThe command also supports psr-4 namespacing for creating filters.  You just need to make sure you escape the backslashes in the class name.  For example:\n\n```bash\nphp artisan model:filter AdminFilters\\\\User\n```\n\nThis would create `app/ModelFilters/AdminFilters/UserFilter.php`\n\n## Usage\n\n### Defining The Filter Logic\nDefine the filter logic based on the camel cased input key passed to the `filter()` method.\n\n- Empty strings and null values are ignored by default.\n  - Empty strings and values can be configured not to be ignored by setting `protected $allowedEmptyFilters = false;` on a filter.\n- If a `setup()` method is defined it will be called once before any filter methods regardless of input\n- `_id` is dropped from the end of the input key to define the method so filtering `user_id` would use the `user()` method\n    - Can be changed with by definining `protected $drop_id = false;` on a filter\n- Input without a corresponding filter method are ignored\n- The value of the key is injected into the method\n- All values are accessible through the `$this->input()` method or a single value by key `$this->input($key)`\n- All Eloquent Builder methods are accessible in `$this` context in the model filter class.\n\nTo define methods for the following input:\n\n```php\n[\n    'company_id'   => 5,\n    'name'         => 'Tuck',\n    'mobile_phone' => '888555'\n]\n```\n\nYou would use the following methods:\n\n```php\n\nuse EloquentFilter\\ModelFilter;\n\nclass UserFilter extends ModelFilter\n{\n    protected $blacklist = ['secretMethod'];\n    \n    // This will filter 'company_id' OR 'company'\n    public function company($id)\n    {\n        return $this->where('company_id', $id);\n    }\n\n    public function name($name)\n    {\n        return $this->where(function($q) use ($name)\n        {\n            return $q->where('first_name', 'LIKE', \"%$name%\")\n                ->orWhere('last_name', 'LIKE', \"%$name%\");\n        });\n    }\n\n    public function mobilePhone($phone)\n    {\n        return $this->where('mobile_phone', 'LIKE', \"$phone%\");\n    }\n\n    public function setup()\n    {\n        $this->onlyShowDeletedForAdmins();\n    }\n\n    public function onlyShowDeletedForAdmins()\n    {\n        if(Auth::user()->isAdmin())\n        {\n            $this->withTrashed();\n        }\n    }\n    \n    public function secretMethod($secretParameter)\n    {\n        return $this->where('some_column', true);\n    }\n}\n```\n\n> **Note:**  In the above example if you do not want `_id` dropped from the end of the input you can set `protected $drop_id = false` on your filter class.  Doing this would allow you to have a `company()` filter method as well as a `companyId()` filter method.\n\n\n> **Note:**  In the above example if you do not want `mobile_phone` to be mapped to `mobilePhone()` you can set `protected $camel_cased_methods = false` on your filter class. Doing this would allow you to have a `mobile_phone()` filter method instead of `mobilePhone()`. By default, `mobilePhone()` filter method can be called thanks to one of the following input key: `mobile_phone`, `mobilePhone`, `mobile_phone_id`\n\n> **Note:** In the example above all methods inside `setup()` will be called every time `filter()` is called on the model\n\n#### Blacklist\n\nAny methods defined in the `blackist` array will not be called by the filter. Those methods are normally used for internal filter logic.\n\nThe `blacklistMethod()` and `whitelistMethod()` methods can be used to dynamically blacklist and whitelist methods.\n\nIn the example above `secretMethod()` will not be called, even if there is a `secret_method` key in the input array. In order to call this method it would need to be whitelisted dynamically:\n\nExample:\n```php\npublic function setup()\n{\n    if(Auth::user()->isAdmin()) {\n        $this->whitelistMethod('secretMethod');\n    }\n}\n```\n\n\n#### Additional Filter Methods\n\nThe `Filterable` trait also comes with the below query builder helper methods:\n\n|EloquentFilter Method|QueryBuilder Equivalent|\n|---|---|\n|`$this->whereLike($column, $string)`|`$query->where($column, 'LIKE', '%'.$string.'%')`|\n|`$this->whereLike($column, $string, 'or')`|`$query->orWhere($column, 'LIKE', '%'.$string.'%')`|\n|`$this->whereBeginsWith($column, $string)`|`$query->where($column, 'LIKE', $string.'%')`|\n|`$this->whereBeginsWith($column, $string, 'or')`|`$query->orWhere($column, 'LIKE', $string.'%')`|\n|`$this->whereEndsWith($column, $string)`|`$query->where($column, 'LIKE', '%'.$string)`|\n|`$this->whereEndsWith($column, $string, 'or')`|`$query->orWhere($column, 'LIKE', '%'.$string)`|\n\nSince these methods are part of the `Filterable` trait they are accessible from any model that implements the trait without the need to call in the Model's EloquentFilter.\n\n\n### Applying The Filter To A Model\n\nImplement the `EloquentFilter\\Filterable` trait on any Eloquent model:\n\n```php\n<?php\n\nnamespace App;\n\nuse EloquentFilter\\Filterable;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass User extends Model\n{\n    use Filterable;\n\n    //User Class\n}\n```\n\nThis gives you access to the `filter()` method that accepts an array of input:\n\n```php\nclass UserController extends Controller\n{\n    public function index(Request $request)\n    {\n        return User::filter($request->all())->get();\n    }\n}\n```\n\n## Filtering By Relationships\n>There are two ways to filter by related models.  Using the `$relations` array to define the input to be injected into the related Model's filter.  If the related model doesn't have a model filter of it's own or you just want to define how to filter that relationship locally instead of adding the logic to that Model's filter then use the `related()` method to filter by a related model that doesn't have a ModelFilter.  You can even combine the 2 and define which input fields in the `$relations` array you want to use that Model's filter for as well as use the `related()` method to define local methods on that same relation.  Both methods nest the filter constraints into the same `whereHas()` query on that relation.\n\nFor both examples we will use the following models:\n\nA `App\\User` that `hasMany` `App\\Client::class`:\n\n```php\nclass User extends Model\n{\n    use Filterable;\n\n    public function clients()\n    {\n        return $this->hasMany(Client::class);\n    }\n}\n```\n\nAnd each `App\\Client` belongs to `App\\Industry::class`:\n\n```php\nclass Client extends Model\n{\n    use Filterable;\n\n    public function industry()\n    {\n        return $this->belongsTo(Industry::class);\n    }\n    \n    public function scopeHasRevenue($query)\n    {\n        return $query->where('total_revenue', '>', 0);\n    }\n}\n```\n\n\nWe want to query our users and filter them by the industry and volume potential of their clients that have done revenue in the past.\n\nInput used to filter:\n\n```php\n$input = [\n    'industry'         => '5',\n    'potential_volume' => '10000'\n];\n```\n\n### Setup\n\nBoth methods will invoke a setup query on the relationship that will be called EVERY time this relationship is queried.  The setup methods signature is `{$related}Setup()` and is injected with an instance of that relations query builder.  For this example let's say when querying users by their clients I only ever want to show agents that have clients with revenue. Without choosing wich method to put it in (because sometimes we may not have all the input and miss the scope all together if we choose the wrong one) and to avoid query duplication by placing that constraint on ALL methods for that relation we call the related setup method in the `UserFilter` like:\n\n```php\nclass UserFilter extends ModelFilter\n{\n    public function clientsSetup($query)\n    {\n        return $query->hasRevenue();\n    }\n}\n```\nThis will prepend the query to the `clients()` relation with `hasRevenue()` whenever the `UserFilter` runs any constriants on the `clients()` relationship. If there are no queries to the `clients()` relationship then this method will not be invoked.\n\n> You can learn more about scopes [here](https://laravel.com/docs/master/eloquent#local-scopes)\n\n\n### Ways To Filter Related Models \n\n- [With The `related()` Method](#filter-related-models-with-the-related-method)\n- [Using The `$relations` Array](#filter-related-models-using-the-relations-array)\n- [With Both Methods](#filter-related-models-with-both-methods)\n\n#### Filter Related Models With The `related()` Method:\n\nThe `related()` method is a little easier to setup and is great if you aren't going to be using the related Model's filter to ever filter that Model explicitly.  The `related()` method takes the same parameters as the `Eloquent\\Builder`'s `where()` method except for the first parameter being the relationship name.\n\n##### Example:\n\n\n`UserFilter` with an `industry()` method that uses the `ModelFilter`'s `related()` method\n\n```php\nclass UserFilter extends ModelFilter\n{\n    public function industry($id)\n    {\n        return $this->related('clients', 'industry_id', '=', $id);\n        \n        // This would also be shorthand for the same query\n        // return $this->related('clients', 'industry_id', $id);\n    }\n    \n    public function potentialVolume($volume)\n    {\n        return $this->related('clients', 'potential_volume', '>=', $volume);\n    }\n}\n```\n\nOr you can even pass a closure as the second argument which will inject an instance of the related model's query builder like:\n\n```php\n    $this->related('clients', function($query) use ($id) {\n        return $query->where('industry_id', $id);\n    });\n```\n\n#### Filter Related Models Using The `$relations` Array:\n\nAdd the relation in the `$relations` array with the name of the relation as referred to on the model as the key and an array of input keys that was passed to the `filter()` method.\n\nThe related model **MUST** have a ModelFilter associated with it.  We instantiate the related model's filter and use the input values from the `$relations` array to call the associated methods.\n\nThis is helpful when querying multiple columns on a relation's table while avoiding multiple `whereHas()` calls for the same relationship.  For a single column using a `$this->whereHas()` method in the model filter works just fine.  In fact, under ther hood the model filter applies all constraints in the `whereHas()` method.\n\n##### Example:\n\n`UserFilter` with the relation defined so it's able to be queried.\n\n```php\nclass UserFilter extends ModelFilter\n{\n    public $relations = [\n        'clients' => ['industry', 'potential_volume'],\n    ];\n}\n```\n\n`ClientFilter` with the `industry` method that's used to filter:\n> **Note:** The `$relations` array should identify the relation and the input key to filter by that relation. Just as the `ModelFilter` works, this will access the camelCased method on that relation's filter. If the above example was using the key `industry_type` for the input the relations array would be `$relations = ['clients' => ['industry_type']]` and the `ClientFilter` would have the method `industryType()`.\n\n```php\nclass ClientFilter extends ModelFilter\n{\n    public $relations = [];\n\n    public function industry($id)\n    {\n        return $this->where('industry_id', $id);\n    }\n    \n    public function potentialVolume($volume)\n    {\n        return $this->where('potential_volume', '>=', $volume);\n    }\n}\n```\n##### `$relations` array alias support\nThe `$relations` array supports aliases. This is used when the input doesn't match the related model's filter method.\nThis will transform the input keys being passed to the related model filter's input.\n\n##### Example:\n```php\nclass UserFilter extends ModelFilter\n{\n    public $relations = [\n        'clients' => [\n            'client_industry'  => 'industry',\n            'client_potential' => 'potential_volume'\n        ]\n    ];\n}\n```\n\nThe above will receive an array like:\n```php\n[\n    'client_industry'  => 1,\n    'client_potential' => 100000\n]\n```\nAnd the `ClientFilter` will receive it as:\n```php\n[\n    'industry'         => 1,\n    'potential_volume' => 100000\n]\n```\nAllowing for more descriptive input names without filters needing to match. Allowing for more reuse of the same filters.\n\n#### Filter Related Models With Both Methods\nYou can even use both together and it will produce the same result and only query the related model once.  An example would be:\n\nIf the following array is passed to the `filter()` method:\n\n```php\n[\n    'name'             => 'er',\n    'last_name'        => '',\n    'company_id'       => 2,\n    'roles'            => [1,4,7],\n    'industry'         => 5,\n    'potential_volume' => '10000'\n]\n```\n\nIn `app/ModelFilters/UserFilter.php`:\n\n```php\n<?php namespace App\\ModelFilters;\n\nuse EloquentFilter\\ModelFilter;\n\nclass UserFilter extends ModelFilter\n{\n    public $relations = [\n        'clients' => ['industry'],\n    ];\n    \n    public function clientsSetup($query)\n    {\n        return $query->hasRevenue();\n    }\n\n    public function name($name)\n    {\n        return $this->where(function($q)\n        {\n            return $q->where('first_name', 'LIKE', $name . '%')->orWhere('last_name', 'LIKE', '%' . $name.'%');\n        });\n    }\n    \n    public function potentialVolume($volume)\n    {\n        return $this->related('clients', 'potential_volume', '>=', $volume);\n    }\n\n    public function lastName($lastName)\n    {\n        return $this->where('last_name', 'LIKE', '%' . $lastName);\n    }\n\n    public function company($id)\n    {\n        return $this->where('company_id',$id);\n    }\n\n    public function roles($ids)\n    {\n        return $this->whereHas('roles', function($query) use ($ids)\n        {\n            return $query->whereIn('id', $ids);\n        });\n    }\n}\n```\n\n##### Adding Relation Values To Filter\n\nSometimes, based on the value of a parameter you may need to push data to a relation filter.  The `push()` method does just this.\nIt accepts one argument as an array of key value pairs or two arguments as a key value pair `push($key, $value)`.\nRelated models are filtered AFTER all local values have been executed you can use this method in any filter method.\nThis avoids having to query a related table more than once.  For Example:\n\n```php\npublic $relations = [\n    'clients' => ['industry', 'status'],\n];\n\npublic function statusType($type)\n{\n    if($type === 'all') {\n        $this->push('status', 'all');\n    }\n}\n```\n\nThe above example will pass `'all'` to the `status()` method on the `clients` relation of the model.\n> Calling the `push()` method in the `setup()` method will allow you to push values to the input for filter it's called on\n\n#### Pagination\n\nIf you want to paginate your query and keep the url query string without having to use:\n\n```php\n{!! $pages->appends(Input::except('page'))->render() !!}\n```\n\nThe `paginateFilter()` and `simplePaginateFilter()` methods accept the same input as [Laravel's paginator](https://laravel.com/docs/master/pagination#basic-usage) and returns the respective paginator.\n\n```php\nclass UserController extends Controller\n{\n    public function index(Request $request)\n    {\n        $users = User::filter($request->all())->paginateFilter();\n\n        return view('users.index', compact('users'));\n    }\n```\n\nOR:\n\n```php\n    public function simpleIndex(Request $request)\n    {\n        $users = User::filter($request->all())->simplePaginateFilter();\n\n        return view('users.index', compact('users'));\n    }\n}\n```\n\nIn your view `$users->render()` will return pagination links as it normally would but with the original query string with empty input ignored if `protected $allowedEmptyFilters` is not set to `false` on the filter.\n\n\n# Contributing\nAny contributions are welcome!\n"
        },
        {
          "name": "composer.json",
          "type": "blob",
          "size": 1.2041015625,
          "content": "{\n  \"name\": \"tucker-eric/eloquentfilter\",\n  \"description\": \"An Eloquent way to filter Eloquent Models\",\n  \"keywords\": [\n    \"laravel\",\n    \"eloquent\",\n    \"model\",\n    \"search\",\n    \"query\",\n    \"filter\"\n  ],\n  \"license\": \"MIT\",\n  \"authors\": [\n    {\n      \"name\": \"Eric Tucker\",\n      \"email\": \"tucker.ericm@gmail.com\"\n    }\n  ],\n  \"require\": {\n    \"php\": \">=7.2\",\n    \"illuminate/console\": \"~6.0|~7.0|~8.0|~9.0|~10.0|~11.0\",\n    \"illuminate/filesystem\": \"~6.0|~7.0|~8.0|~9.0|~10.0|~11.0\",\n    \"illuminate/database\": \"~6.0|~7.0|~8.0|~9.0|~10.0|~11.0\",\n    \"illuminate/support\": \"~6.0|~7.0|~8.0|~9.0|~10.0|~11.0\",\n    \"illuminate/config\": \"~6.0|~7.0|~8.0|~9.0|~10.0|~11.0\",\n    \"illuminate/pagination\": \"~6.0|~7.0|~8.0|~9.0|~10.0|~11.0\"\n  },\n  \"require-dev\": {\n    \"phpunit/phpunit\": \"^8\",\n    \"mockery/mockery\": \"^1.3\"\n  },\n  \"autoload\": {\n    \"psr-4\": {\n      \"EloquentFilter\\\\\": \"src/\"\n    }\n  },\n  \"autoload-dev\": {\n    \"psr-4\": {\n        \"EloquentFilter\\\\TestClass\\\\\": \"tests/classes\"\n    }\n  },\n  \"config\": {\n        \"preferred-install\": \"dist\"\n    },\n  \"minimum-stability\": \"dev\",\n  \"prefer-stable\": true,\n  \"extra\": {\n    \"laravel\": {\n        \"providers\": [\n            \"EloquentFilter\\\\ServiceProvider\"\n        ]\n    }\n  }\n}\n"
        },
        {
          "name": "config",
          "type": "tree",
          "content": null
        },
        {
          "name": "phpunit.xml",
          "type": "blob",
          "size": 0.896484375,
          "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit backupGlobals=\"false\"\n         backupStaticAttributes=\"false\"\n         bootstrap=\"tests/bootstrap.php\"\n         colors=\"true\"\n         convertErrorsToExceptions=\"true\"\n         convertNoticesToExceptions=\"true\"\n         convertWarningsToExceptions=\"true\"\n         processIsolation=\"false\"\n         stopOnFailure=\"false\">\n    <testsuites>\n        <testsuite name=\"Application Test Suite\">\n            <directory>./tests/</directory>\n        </testsuite>\n    </testsuites>\n    <filter>\n        <whitelist>\n            <directory suffix=\".php\">src/</directory>\n        </whitelist>\n    </filter>\n    <php>\n        <env name=\"APP_ENV\" value=\"testing\"/>\n        <env name=\"CACHE_DRIVER\" value=\"array\"/>\n        <env name=\"SESSION_DRIVER\" value=\"array\"/>\n        <env name=\"QUEUE_DRIVER\" value=\"sync\"/>\n        <env name=\"DB_CONNECTION\" value=\"sqlite\"/>\n    </php>\n</phpunit>\n"
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}