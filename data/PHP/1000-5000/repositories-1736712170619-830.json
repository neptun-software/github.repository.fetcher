{
  "metadata": {
    "timestamp": 1736712170619,
    "page": 830,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjgzMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "darryldecode/laravelshoppingcart",
      "stars": 1356,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.0712890625,
          "content": "/vendor\ncomposer.phar\ncomposer.lock\n.DS_Store\n.idea\n.phpunit.result.cache"
        },
        {
          "name": ".travis.yml",
          "type": "blob",
          "size": 0.17578125,
          "content": "language: php\n\nphp:\n  - 7.3\n  - 7.4\n\nbefore_script:\n  - travis_retry composer self-update\n  - travis_retry composer install --prefer-source --no-interaction --dev\n\nscript: phpunit\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 35.8994140625,
          "content": "# Laravel 5 & 6 , 7 & 9 Shopping Cart\n[![Build Status](https://travis-ci.org/darryldecode/laravelshoppingcart.svg?branch=master)](https://travis-ci.org/darryldecode/laravelshoppingcart)\n[![Total Downloads](https://poser.pugx.org/darryldecode/cart/d/total.svg)](https://packagist.org/packages/darryldecode/cart)\n[![License](https://poser.pugx.org/darryldecode/cart/license.svg)](https://packagist.org/packages/darryldecode/cart)\n\nA Shopping Cart Implementation for Laravel Framework\n\n## QUICK PARTIAL DEMO\n\nDemo: https://shoppingcart-demo.darrylfernandez.com/cart\n\nGit repo of the demo: https://github.com/darryldecode/laravelshoppingcart-demo\n\n## INSTALLATION\n\nInstall the package through [Composer](http://getcomposer.org/).\n\nFor Laravel 5.1~:\n`composer require \"darryldecode/cart:~2.0\"`\n\nFor Laravel 5.5, 5.6, or 5.7~, 9:\n\n```composer require \"darryldecode/cart:~4.0\"``` or \n```composer require \"darryldecode/cart\"```\n\n## CONFIGURATION\n\n1. Open config/app.php and add this line to your Service Providers Array.\n\n```php\nDarryldecode\\Cart\\CartServiceProvider::class\n```\n\n2. Open config/app.php and add this line to your Aliases\n\n```php\n  'Cart' => Darryldecode\\Cart\\Facades\\CartFacade::class\n```\n\n3. Optional configuration file (useful if you plan to have full control)\n\n```php\nphp artisan vendor:publish --provider=\"Darryldecode\\Cart\\CartServiceProvider\" --tag=\"config\"\n```\n\n## HOW TO USE\n\n-   [Quick Usage](#usage-usage-example)\n-   [Usage](#usage)\n-   [Conditions](#conditions)\n-   [Items](#items)\n-   [Associating Models](#associating-models)\n-   [Instances](#instances)\n-   [Exceptions](#exceptions)\n-   [Events](#events)\n-   [Format Response](#format)\n-   [Examples](#examples)\n-   [Using Different Storage](#storage)\n-   [License](#license)\n\n## Quick Usage Example\n\n```php\n// Quick Usage with the Product Model Association & User session binding\n\n$Product = Product::find($productId); // assuming you have a Product model with id, name, description & price\n$rowId = 456; // generate a unique() row ID\n$userID = 2; // the user ID to bind the cart contents\n\n// add the product to cart\n\\Cart::session($userID)->add(array(\n    'id' => $rowId,\n    'name' => $Product->name,\n    'price' => $Product->price,\n    'quantity' => 4,\n    'attributes' => array(),\n    'associatedModel' => $Product\n));\n\n// update the item on cart\n\\Cart::session($userID)->update($rowId,[\n\t'quantity' => 2,\n\t'price' => 98.67\n]);\n\n// delete an item on cart\n\\Cart::session($userID)->remove($rowId);\n\n// view the cart items\n$items = \\Cart::getContent();\nforeach($items as $row) {\n\n\techo $row->id; // row ID\n\techo $row->name;\n\techo $row->qty;\n\techo $row->price;\n\t\n\techo $item->associatedModel->id; // whatever properties your model have\n        echo $item->associatedModel->name; // whatever properties your model have\n        echo $item->associatedModel->description; // whatever properties your model have\n}\n\n// FOR FULL USAGE, SEE BELOW..\n```\n\n## Usage\n\n### IMPORTANT NOTE!\n\nBy default, the cart has a default sessionKey that holds the cart data. This\nalso serves as a cart unique identifier which you can use to bind a cart to a specific user.\nTo override this default session Key, you will just simply call the `\\Cart::session($sessionKey)` method\nBEFORE ANY OTHER METHODS!!.\n\nExample:\n\n```php\n$userId // the current login user id\n\n// This tells the cart that we only need or manipulate\n// the cart data of a specific user. It doesn't need to be $userId,\n// you can use any unique key that represents a unique to a user or customer.\n// basically this binds the cart to a specific user.\n\\Cart::session($userId);\n\n// then followed by the normal cart usage\n\\Cart::add();\n\\Cart::update();\n\\Cart::remove();\n\\Cart::condition($condition1);\n\\Cart::getTotal();\n\\Cart::getSubTotal();\n\\Cart::getSubTotalWithoutConditions();\n\\Cart::addItemCondition($productID, $coupon101);\n// and so on..\n```\n\nSee More Examples below:\n\nAdding Item on Cart: **Cart::add()**\n\nThere are several ways you can add items on your cart, see below:\n\n```php\n/**\n * add item to the cart, it can be an array or multi dimensional array\n *\n * @param string|array $id\n * @param string $name\n * @param float $price\n * @param int $quantity\n * @param array $attributes\n * @param CartCondition|array $conditions\n * @return $this\n * @throws InvalidItemException\n */\n\n # ALWAYS REMEMBER TO BIND THE CART TO A USER BEFORE CALLING ANY CART FUNCTION\n # SO CART WILL KNOW WHO'S CART DATA YOU WANT TO MANIPULATE. SEE IMPORTANT NOTICE ABOVE.\n # EXAMPLE: \\Cart::session($userId); then followed by cart normal usage.\n \n # NOTE:\n # the 'id' field in adding a new item on cart is not intended for the Model ID (example Product ID)\n # instead make sure to put a unique ID for every unique product or product that has it's own unique prirce, \n # because it is used for updating cart and how each item on cart are segregated during calculation and quantities. \n # You can put the model_id instead as an attribute for full flexibility.\n # Example is that if you want to add same products on the cart but with totally different attribute and price.\n # If you use the Product's ID as the 'id' field in cart, it will result to increase in quanity instead\n # of adding it as a unique product with unique attribute and price.\n\n// Simplest form to add item on your cart\nCart::add(455, 'Sample Item', 100.99, 2, array());\n\n// array format\nCart::add(array(\n    'id' => 456, // inique row ID\n    'name' => 'Sample Item',\n    'price' => 67.99,\n    'quantity' => 4,\n    'attributes' => array()\n));\n\n// add multiple items at one time\nCart::add(array(\n  array(\n      'id' => 456,\n      'name' => 'Sample Item 1',\n      'price' => 67.99,\n      'quantity' => 4,\n      'attributes' => array()\n  ),\n  array(\n      'id' => 568,\n      'name' => 'Sample Item 2',\n      'price' => 69.25,\n      'quantity' => 4,\n      'attributes' => array(\n        'size' => 'L',\n        'color' => 'blue'\n      )\n  ),\n));\n\n// add cart items to a specific user\n$userId = auth()->user()->id; // or any string represents user identifier\nCart::session($userId)->add(array(\n    'id' => 456, // inique row ID\n    'name' => 'Sample Item',\n    'price' => 67.99,\n    'quantity' => 4,\n    'attributes' => array(),\n    'associatedModel' => $Product\n));\n\n// NOTE:\n// Please keep in mind that when adding an item on cart, the \"id\" should be unique as it serves as\n// row identifier as well. If you provide same ID, it will assume the operation will be an update to its quantity\n// to avoid cart item duplicates\n```\n\nUpdating an item on a cart: **Cart::update()**\n\nUpdating an item on a cart is very simple:\n\n```php\n/**\n * update a cart\n *\n * @param $id (the item ID)\n * @param array $data\n *\n * the $data will be an associative array, you don't need to pass all the data, only the key value\n * of the item you want to update on it\n */\n\nCart::update(456, array(\n  'name' => 'New Item Name', // new item name\n  'price' => 98.67, // new item price, price can also be a string format like so: '98.67'\n));\n\n// you may also want to update a product's quantity\nCart::update(456, array(\n  'quantity' => 2, // so if the current product has a quantity of 4, another 2 will be added so this will result to 6\n));\n\n// you may also want to update a product by reducing its quantity, you do this like so:\nCart::update(456, array(\n  'quantity' => -1, // so if the current product has a quantity of 4, it will subtract 1 and will result to 3\n));\n\n// NOTE: as you can see by default, the quantity update is relative to its current value\n// if you want to just totally replace the quantity instead of incrementing or decrementing its current quantity value\n// you can pass an array in quantity value like so:\nCart::update(456, array(\n  'quantity' => array(\n      'relative' => false,\n      'value' => 5\n  ),\n));\n// so with that code above as relative is flagged as false, if the item's quantity before is 2 it will now be 5 instead of\n// 5 + 2 which results to 7 if updated relatively..\n\n// updating a cart for a specific user\n$userId = auth()->user()->id; // or any string represents user identifier\nCart::session($userId)->update(456, array(\n  'name' => 'New Item Name', // new item name\n  'price' => 98.67, // new item price, price can also be a string format like so: '98.67'\n));\n```\n\nRemoving an item on a cart: **Cart::remove()**\n\nRemoving an item on a cart is very easy:\n\n```php\n/**\n * removes an item on cart by item ID\n *\n * @param $id\n */\n\nCart::remove(456);\n\n// removing cart item for a specific user's cart\n$userId = auth()->user()->id; // or any string represents user identifier\nCart::session($userId)->remove(456);\n```\n\nGetting an item on a cart: **Cart::get()**\n\n```php\n\n/**\n * get an item on a cart by item ID\n * if item ID is not found, this will return null\n *\n * @param $itemId\n * @return null|array\n */\n\n$itemId = 456;\n\nCart::get($itemId);\n\n// You can also get the sum of the Item multiplied by its quantity, see below:\n$summedPrice = Cart::get($itemId)->getPriceSum();\n\n// get an item on a cart by item ID for a specific user's cart\n$userId = auth()->user()->id; // or any string represents user identifier\nCart::session($userId)->get($itemId);\n```\n\nGetting cart's contents and count: **Cart::getContent()**\n\n```php\n\n/**\n * get the cart\n *\n * @return CartCollection\n */\n\n$cartCollection = Cart::getContent();\n\n// NOTE: Because cart collection extends Laravel's Collection\n// You can use methods you already know about Laravel's Collection\n// See some of its method below:\n\n// count carts contents\n$cartCollection->count();\n\n// transformations\n$cartCollection->toArray();\n$cartCollection->toJson();\n\n// Getting cart's contents for a specific user\n$userId = auth()->user()->id; // or any string represents user identifier\nCart::session($userId)->getContent($itemId);\n```\n\nCheck if cart is empty: **Cart::isEmpty()**\n\n```php\n/**\n* check if cart is empty\n*\n* @return bool\n*/\nCart::isEmpty();\n\n// Check if cart's contents is empty for a specific user\n$userId = auth()->user()->id; // or any string represents user identifier\nCart::session($userId)->isEmpty();\n```\n\nGet cart total quantity: **Cart::getTotalQuantity()**\n\n```php\n/**\n* get total quantity of items in the cart\n*\n* @return int\n*/\n$cartTotalQuantity = Cart::getTotalQuantity();\n\n// for a specific user\n$cartTotalQuantity = Cart::session($userId)->getTotalQuantity();\n```\n\nGet cart subtotal: **Cart::getSubTotal()**\n\n```php\n/**\n* get cart sub total\n*\n* @return float\n*/\n$subTotal = Cart::getSubTotal();\n\n// for a specific user\n$subTotal = Cart::session($userId)->getSubTotal();\n```\n\nGet cart subtotal with out conditions: **Cart::getSubTotalWithoutConditions()**\n\n```php\n/**\n* get cart sub total with out conditions\n*\n* @param bool $formatted\n* @return float\n*/\n$subTotalWithoutConditions = Cart::getSubTotalWithoutConditions();\n\n// for a specific user\n$subTotalWithoutConditions = Cart::session($userId)->getSubTotalWithoutConditions();\n```\n\nGet cart total: **Cart::getTotal()**\n\n```php\n/**\n * the new total in which conditions are already applied\n *\n * @return float\n */\n$total = Cart::getTotal();\n\n// for a specific user\n$total = Cart::session($userId)->getTotal();\n```\n\nClearing the Cart: **Cart::clear()**\n\n```php\n/**\n* clear cart\n*\n* @return void\n*/\nCart::clear();\nCart::session($userId)->clear();\n```\n\n## Conditions\n\nLaravel Shopping Cart supports cart conditions.\nConditions are very useful in terms of (coupons,discounts,sale,per-item sale and discounts etc.)\nSee below carefully on how to use conditions.\n\nConditions can be added on:\n\n1.) Whole Cart Value bases\n\n2.) Per-Item Bases\n\nFirst let's add a condition on a Cart Bases:\n\nThere are also several ways of adding a condition on a cart:\nNOTE:\n\nWhen adding a condition on a cart bases, the 'target' should have value of 'subtotal' or 'total'.\nIf the target is \"subtotal\" then this condition will be applied to subtotal.\nIf the target is \"total\" then this condition will be applied to total.\nThe order of operation also during calculation will vary on the order you have added the conditions.\n\nAlso, when adding conditions, the 'value' field will be the bases of calculation. You can change this order\nby adding 'order' parameter in CartCondition.\n\n```php\n\n// add single condition on a cart bases\n$condition = new \\Darryldecode\\Cart\\CartCondition(array(\n    'name' => 'VAT 12.5%',\n    'type' => 'tax',\n    'target' => 'subtotal', // this condition will be applied to cart's subtotal when getSubTotal() is called.\n    'value' => '12.5%',\n    'attributes' => array( // attributes field is optional\n    \t'description' => 'Value added tax',\n    \t'more_data' => 'more data here'\n    )\n));\n\nCart::condition($condition);\nCart::session($userId)->condition($condition); // for a speicifc user's cart\n\n// or add multiple conditions from different condition instances\n$condition1 = new \\Darryldecode\\Cart\\CartCondition(array(\n    'name' => 'VAT 12.5%',\n    'type' => 'tax',\n    'target' => 'subtotal', // this condition will be applied to cart's subtotal when getSubTotal() is called.\n    'value' => '12.5%',\n    'order' => 2\n));\n$condition2 = new \\Darryldecode\\Cart\\CartCondition(array(\n    'name' => 'Express Shipping $15',\n    'type' => 'shipping',\n    'target' => 'subtotal', // this condition will be applied to cart's subtotal when getSubTotal() is called.\n    'value' => '+15',\n    'order' => 1\n));\nCart::condition($condition1);\nCart::condition($condition2);\n\n// Note that after adding conditions that are targeted to be applied on subtotal, the result on getTotal()\n// will also be affected as getTotal() depends in getSubTotal() which is the subtotal.\n\n// add condition to only apply on totals, not in subtotal\n$condition = new \\Darryldecode\\Cart\\CartCondition(array(\n    'name' => 'Express Shipping $15',\n    'type' => 'shipping',\n    'target' => 'total', // this condition will be applied to cart's total when getTotal() is called.\n    'value' => '+15',\n    'order' => 1 // the order of calculation of cart base conditions. The bigger the later to be applied.\n));\nCart::condition($condition);\n\n// The property 'order' lets you control the sequence of conditions when calculated. Also it lets you add different conditions through for example a shopping process with multiple\n// pages and still be able to set an order to apply the conditions. If no order is defined defaults to 0\n\n// NOTE!! On current version, 'order' parameter is only applicable for conditions for cart bases. It does not support on per item conditions.\n\n// or add multiple conditions as array\nCart::condition([$condition1, $condition2]);\n\n// To get all applied conditions on a cart, use below:\n$cartConditions = Cart::getConditions();\nforeach($cartConditions as $condition)\n{\n    $condition->getTarget(); // the target of which the condition was applied\n    $condition->getName(); // the name of the condition\n    $condition->getType(); // the type\n    $condition->getValue(); // the value of the condition\n    $condition->getOrder(); // the order of the condition\n    $condition->getAttributes(); // the attributes of the condition, returns an empty [] if no attributes added\n}\n\n// You can also get a condition that has been applied on the cart by using its name, use below:\n$condition = Cart::getCondition('VAT 12.5%');\n$condition->getTarget(); // the target of which the condition was applied\n$condition->getName(); // the name of the condition\n$condition->getType(); // the type\n$condition->getValue(); // the value of the condition\n$condition->getAttributes(); // the attributes of the condition, returns an empty [] if no attributes added\n\n// You can get the conditions calculated value by providing the subtotal, see below:\n$subTotal = Cart::getSubTotal();\n$condition = Cart::getCondition('VAT 12.5%');\n$conditionCalculatedValue = $condition->getCalculatedValue($subTotal);\n```\n\n> NOTE: All cart based conditions should be added to cart's conditions before calling **Cart::getTotal()**\n> and if there are also conditions that are targeted to be applied to subtotal, it should be added to cart's conditions\n> before calling **Cart::getSubTotal()**\n\n```php\n$cartTotal = Cart::getSubTotal(); // the subtotal with the conditions targeted to \"subtotal\" applied\n$cartTotal = Cart::getTotal(); // the total with the conditions targeted to \"total\" applied\n$cartTotal = Cart::session($userId)->getSubTotal(); // for a specific user's cart\n$cartTotal = Cart::session($userId)->getTotal(); // for a specific user's cart\n```\n\nNext is the Condition on Per-Item Bases.\n\nThis is very useful if you have coupons to be applied specifically on an item and not on the whole cart value.\n\n> NOTE: When adding a condition on a per-item bases, the 'target' parameter is not needed or can be omitted.\n> unlike when adding conditions or per cart bases.\n\nNow let's add condition on an item.\n\n```php\n\n// lets create first our condition instance\n$saleCondition = new \\Darryldecode\\Cart\\CartCondition(array(\n            'name' => 'SALE 5%',\n            'type' => 'tax',\n            'value' => '-5%',\n        ));\n\n// now the product to be added on cart\n$product = array(\n            'id' => 456,\n            'name' => 'Sample Item 1',\n            'price' => 100,\n            'quantity' => 1,\n            'attributes' => array(),\n            'conditions' => $saleCondition\n        );\n\n// finally add the product on the cart\nCart::add($product);\n\n// you may also add multiple condition on an item\n$itemCondition1 = new \\Darryldecode\\Cart\\CartCondition(array(\n    'name' => 'SALE 5%',\n    'type' => 'sale',\n    'value' => '-5%',\n));\n$itemCondition2 = new CartCondition(array(\n    'name' => 'Item Gift Pack 25.00',\n    'type' => 'promo',\n    'value' => '-25',\n));\n$itemCondition3 = new \\Darryldecode\\Cart\\CartCondition(array(\n    'name' => 'MISC',\n    'type' => 'misc',\n    'value' => '+10',\n));\n\n$item = array(\n          'id' => 456,\n          'name' => 'Sample Item 1',\n          'price' => 100,\n          'quantity' => 1,\n          'attributes' => array(),\n          'conditions' => [$itemCondition1, $itemCondition2, $itemCondition3]\n      );\n\nCart::add($item);\n```\n\n> NOTE: All cart per-item conditions should be added before calling **Cart::getSubTotal()**\n\nThen Finally you can call **Cart::getSubTotal()** to get the Cart sub total with the applied conditions on each of the items.\n\n```php\n// the subtotal will be calculated based on the conditions added that has target => \"subtotal\"\n// and also conditions that are added on per item\n$cartSubTotal = Cart::getSubTotal();\n```\n\nAdd condition to existing Item on the cart: **Cart::addItemCondition($productId, $itemCondition)**\n\nAdding Condition to an existing Item on the cart is simple as well.\n\nThis is very useful when adding new conditions on an item during checkout process like coupons and promo codes.\nLet's see the example how to do it:\n\n```php\n$productID = 456;\n$coupon101 = new CartCondition(array(\n            'name' => 'COUPON 101',\n            'type' => 'coupon',\n            'value' => '-5%',\n        ));\n\nCart::addItemCondition($productID, $coupon101);\n```\n\nClearing Cart Conditions: **Cart::clearCartConditions()**\n\n```php\n/**\n* clears all conditions on a cart,\n* this does not remove conditions that has been added specifically to an item/product.\n* If you wish to remove a specific condition to a product, you may use the method: removeItemCondition($itemId,$conditionName)\n*\n* @return void\n*/\nCart::clearCartConditions()\n```\n\nRemove Specific Cart Condition: **Cart::removeCartCondition(\\$conditionName)**\n\n```php\n/**\n* removes a condition on a cart by condition name,\n* this can only remove conditions that are added on cart bases not conditions that are added on an item/product.\n* If you wish to remove a condition that has been added for a specific item/product, you may\n* use the removeItemCondition(itemId, conditionName) method instead.\n*\n* @param $conditionName\n* @return void\n*/\n$conditionName = 'Summer Sale 5%';\n\nCart::removeCartCondition($conditionName)\n```\n\nRemove Specific Item Condition: **Cart::removeItemCondition($itemId, $conditionName)**\n\n```php\n/**\n* remove a condition that has been applied on an item that is already on the cart\n*\n* @param $itemId\n* @param $conditionName\n* @return bool\n*/\nCart::removeItemCondition($itemId, $conditionName)\n```\n\nClear all Item Conditions: **Cart::clearItemConditions(\\$itemId)**\n\n```php\n/**\n* remove all conditions that has been applied on an item that is already on the cart\n*\n* @param $itemId\n* @return bool\n*/\nCart::clearItemConditions($itemId)\n```\n\nGet conditions by type: **Cart::getConditionsByType(\\$type)**\n\n```php\n/**\n* Get all the condition filtered by Type\n* Please Note that this will only return condition added on cart bases, not those conditions added\n* specifically on an per item bases\n*\n* @param $type\n* @return CartConditionCollection\n*/\npublic function getConditionsByType($type)\n```\n\nRemove conditions by type: **Cart::removeConditionsByType(\\$type)**\n\n```php\n/**\n* Remove all the condition with the $type specified\n* Please Note that this will only remove condition added on cart bases, not those conditions added\n* specifically on an per item bases\n*\n* @param $type\n* @return $this\n*/\npublic function removeConditionsByType($type)\n```\n\n## Items\n\nThe method **Cart::getContent()** returns a collection of items.\n\nTo get the id of an item, use the property **\\$item->id**.\n\nTo get the name of an item, use the property **\\$item->name**.\n\nTo get the quantity of an item, use the property **\\$item->quantity**.\n\nTo get the attributes of an item, use the property **\\$item->attributes**.\n\nTo get the price of a single item without the conditions applied, use the property **\\$item->price**.\n\nTo get the subtotal of an item without the conditions applied, use the method **\\$item->getPriceSum()**.\n\n```php\n/**\n* get the sum of price\n*\n* @return mixed|null\n*/\npublic function getPriceSum()\n\n```\n\nTo get the price of a single item without the conditions applied, use the method\n\n**\\$item->getPriceWithConditions()**.\n\n```php\n/**\n* get the single price in which conditions are already applied\n*\n* @return mixed|null\n*/\npublic function getPriceWithConditions()\n\n```\n\nTo get the subtotal of an item with the conditions applied, use the method\n\n**\\$item->getPriceSumWithConditions()**\n\n```php\n/**\n* get the sum of price in which conditions are already applied\n*\n* @return mixed|null\n*/\npublic function getPriceSumWithConditions()\n\n```\n\n**NOTE**: When you get price with conditions applied, only the conditions assigned to the current item will be calculated.\nCart conditions won't be applied to price.\n\n## Associating Models\n\nOne can associate a cart item to a model. Let's say you have a `Product` model in your application. With the `associate()` method, you can tell the cart that an item in the cart, is associated to the `Product` model.\n\nThat way you can access your model using the property **\\$item->model**.\n\nHere is an example:\n\n```php\n\n// add the item to the cart.\n$cartItem = Cart::add(455, 'Sample Item', 100.99, 2, array())->associate('Product');\n\n// array format\nCart::add(array(\n    'id' => 456,\n    'name' => 'Sample Item',\n    'price' => 67.99,\n    'quantity' => 4,\n    'attributes' => array(),\n    'associatedModel' => 'Product'\n));\n\n// add multiple items at one time\nCart::add(array(\n  array(\n      'id' => 456,\n      'name' => 'Sample Item 1',\n      'price' => 67.99,\n      'quantity' => 4,\n      'attributes' => array(),\n      'associatedModel' => 'Product'\n  ),\n  array(\n      'id' => 568,\n      'name' => 'Sample Item 2',\n      'price' => 69.25,\n      'quantity' => 4,\n      'attributes' => array(\n        'size' => 'L',\n        'color' => 'blue'\n      ),\n      'associatedModel' => 'Product'\n  ),\n));\n\n// Now, when iterating over the content of the cart, you can access the model.\nforeach(Cart::getContent() as $row) {\n\techo 'You have ' . $row->qty . ' items of ' . $row->model->name . ' with description: \"' . $row->model->description . '\" in your cart.';\n}\n```\n\n**NOTE**: This only works when adding an item to cart.\n\n## Instances\n\nYou may also want multiple cart instances on the same page without conflicts.\nTo do that,\n\nCreate a new Service Provider and then on register() method, you can put this like so:\n\n```php\n$this->app['wishlist'] = $this->app->share(function($app)\n\t\t{\n\t\t\t$storage = $app['session']; // laravel session storage\n\t\t\t$events = $app['events']; // laravel event handler\n\t\t\t$instanceName = 'wishlist'; // your cart instance name\n\t\t\t$session_key = 'AsASDMCks0ks1'; // your unique session key to hold cart items\n\n\t\t\treturn new Cart(\n\t\t\t\t$storage,\n\t\t\t\t$events,\n\t\t\t\t$instanceName,\n\t\t\t\t$session_key\n\t\t\t);\n\t\t});\n\n// for 5.4 or newer\nuse Darryldecode\\Cart\\Cart;\nuse Illuminate\\Support\\ServiceProvider;\n\nclass WishListProvider extends ServiceProvider\n{\n    /**\n     * Bootstrap the application services.\n     *\n     * @return void\n     */\n    public function boot()\n    {\n        //\n    }\n    /**\n     * Register the application services.\n     *\n     * @return void\n     */\n    public function register()\n    {\n        $this->app->singleton('wishlist', function($app)\n        {\n            $storage = $app['session'];\n            $events = $app['events'];\n            $instanceName = 'cart_2';\n            $session_key = '88uuiioo99888';\n            return new Cart(\n                $storage,\n                $events,\n                $instanceName,\n                $session_key,\n                config('shopping_cart')\n            );\n        });\n    }\n}\n```\n\nIF you are having problem with multiple cart instance, please see the codes on\nthis demo repo here: [DEMO](https://github.com/darryldecode/laravelshoppingcart-demo)\n\n## Exceptions\n\nThere are currently only two exceptions.\n\n| Exception                   | Description                                                               |\n| --------------------------- | ------------------------------------------------------------------------- |\n| _InvalidConditionException_ | When there is an invalid field value during instantiating a new Condition |\n| _InvalidItemException_      | When a new product has invalid field values (id,name,price,quantity)      |\n| _UnknownModelException_     | When you try to associate a none existing model to a cart item.           |\n\n## Events\n\nThe cart has currently 9 events you can listen and hook some actons.\n\n| Event                        | Fired                                  |\n| ---------------------------- | -------------------------------------- |\n| cart.created(\\$cart)         | When a cart is instantiated            |\n| cart.adding($items, $cart)   | When an item is attempted to be added  |\n| cart.added($items, $cart)    | When an item is added on cart          |\n| cart.updating($items, $cart) | When an item is being updated          |\n| cart.updated($items, $cart)  | When an item is updated                |\n| cart.removing($id, $cart)    | When an item is being remove           |\n| cart.removed($id, $cart)     | When an item is removed                |\n| cart.clearing(\\$cart)        | When a cart is attempted to be cleared |\n| cart.cleared(\\$cart)         | When a cart is cleared                 |\n\n**NOTE**: For different cart instance, dealing events is simple. For example you have created another cart instance which\nyou have given an instance name of \"wishlist\". The Events will be something like: {$instanceName}.created($cart)\n\nSo for you wishlist cart instance, events will look like this:\n\n-   wishlist.created(\\$cart)\n-   wishlist.adding($items, $cart)\n-   wishlist.added($items, $cart) and so on..\n\n## Format Response\n\nNow you can format all the responses. You can publish the config file from the package or use env vars to set the configuration.\nThe options you have are:\n\n-   format_numbers or env('SHOPPING_FORMAT_VALUES', false) => Activate or deactivate this feature. Default to false,\n-   decimals or env('SHOPPING_DECIMALS', 0) => Number of decimals you want to show. Defaults to 0.\n-   dec_point or env('SHOPPING_DEC_POINT', '.') => Decimal point type. Defaults to a '.'.\n-   thousands_sep or env('SHOPPING_THOUSANDS_SEP', ',') => Thousands separator for value. Defaults to ','.\n\n## Examples\n\n```php\n\n// add items to cart\nCart::add(array(\n  array(\n      'id' => 456,\n      'name' => 'Sample Item 1',\n      'price' => 67.99,\n      'quantity' => 4,\n      'attributes' => array()\n  ),\n  array(\n      'id' => 568,\n      'name' => 'Sample Item 2',\n      'price' => 69.25,\n      'quantity' => 4,\n      'attributes' => array(\n        'size' => 'L',\n        'color' => 'blue'\n      )\n  ),\n));\n\n// then you can:\n$items = Cart::getContent();\n\nforeach($items as $item)\n{\n    $item->id; // the Id of the item\n    $item->name; // the name\n    $item->price; // the single price without conditions applied\n    $item->getPriceSum(); // the subtotal without conditions applied\n    $item->getPriceWithConditions(); // the single price with conditions applied\n    $item->getPriceSumWithConditions(); // the subtotal with conditions applied\n    $item->quantity; // the quantity\n    $item->attributes; // the attributes\n\n    // Note that attribute returns ItemAttributeCollection object that extends the native laravel collection\n    // so you can do things like below:\n\n    if( $item->attributes->has('size') )\n    {\n        // item has attribute size\n    }\n    else\n    {\n        // item has no attribute size\n    }\n}\n\n// or\n$items->each(function($item)\n{\n    $item->id; // the Id of the item\n    $item->name; // the name\n    $item->price; // the single price without conditions applied\n    $item->getPriceSum(); // the subtotal without conditions applied\n    $item->getPriceWithConditions(); // the single price with conditions applied\n    $item->getPriceSumWithConditions(); // the subtotal with conditions applied\n    $item->quantity; // the quantity\n    $item->attributes; // the attributes\n\n    if( $item->attributes->has('size') )\n    {\n        // item has attribute size\n    }\n    else\n    {\n        // item has no attribute size\n    }\n});\n\n```\n\n## Storage\n\nUsing different storage for the carts items is pretty straight forward. The storage\nclass that is injected to the Cart's instance will only need methods.\n\nExample we will need a wishlist, and we want to store its key value pair in database instead\nof the default session.\n\nTo do this, we will need first a database table that will hold our cart data.\nLet's create it by issuing `php artisan make:migration create_cart_storage_table`\n\nExample Code:\n\n```php\nuse Illuminate\\Support\\Facades\\Schema;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass CreateCartStorageTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('cart_storage', function (Blueprint $table) {\n            $table->string('id')->index();\n            $table->longText('cart_data');\n            $table->timestamps();\n\n            $table->primary('id');\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('cart_storage');\n    }\n}\n```\n\nNext, lets create an eloquent Model on this table so we can easily deal with the data. It is up to you where you want\nto store this model. For this example, lets just assume to store it in our App namespace.\n\nCode:\n\n```php\nnamespace App;\n\nuse Illuminate\\Database\\Eloquent\\Model;\n\n\nclass DatabaseStorageModel extends Model\n{\n    protected $table = 'cart_storage';\n\n    /**\n     * The attributes that are mass assignable.\n     *\n     * @var array\n     */\n    protected $fillable = [\n        'id', 'cart_data',\n    ];\n\n    public function setCartDataAttribute($value)\n    {\n        $this->attributes['cart_data'] = serialize($value);\n    }\n\n    public function getCartDataAttribute($value)\n    {\n        return unserialize($value);\n    }\n}\n```\n\nNext, Create a new class for your storage to be injected to our cart instance:\n\nEg.\n\n```php\nclass DBStorage {\n\n    public function has($key)\n    {\n        return DatabaseStorageModel::find($key);\n    }\n\n    public function get($key)\n    {\n        if($this->has($key))\n        {\n            return new CartCollection(DatabaseStorageModel::find($key)->cart_data);\n        }\n        else\n        {\n            return [];\n        }\n    }\n\n    public function put($key, $value)\n    {\n        if($row = DatabaseStorageModel::find($key))\n        {\n            // update\n            $row->cart_data = $value;\n            $row->save();\n        }\n        else\n        {\n            DatabaseStorageModel::create([\n                'id' => $key,\n                'cart_data' => $value\n            ]);\n        }\n    }\n}\n```\n\nFor example you can also leverage Laravel's Caching (redis, memcached, file, dynamo, etc) using the example below. Example also includes cookie persistance, so that cart would be still available for 30 days. Sessions by default persists only 20 minutes. \n\n```php\nnamespace App\\Cart;\n\nuse Carbon\\Carbon;\nuse Cookie;\nuse Darryldecode\\Cart\\CartCollection;\n\nclass CacheStorage\n{\n    private $data = [];\n    private $cart_id;\n\n    public function __construct()\n    {\n        $this->cart_id = \\Cookie::get('cart');\n        if ($this->cart_id) {\n            $this->data = \\Cache::get('cart_' . $this->cart_id, []);\n        } else {\n            $this->cart_id = uniqid();\n        }\n    }\n\n    public function has($key)\n    {\n        return isset($this->data[$key]);\n    }\n\n    public function get($key)\n    {\n        return new CartCollection($this->data[$key] ?? []);\n    }\n\n    public function put($key, $value)\n    {\n        $this->data[$key] = $value;\n        \\Cache::put('cart_' . $this->cart_id, $this->data, Carbon::now()->addDays(30));\n\n        if (!Cookie::hasQueued('cart')) {\n            Cookie::queue(\n                Cookie::make('cart', $this->cart_id, 60 * 24 * 30)\n            );\n        }\n    }\n}\n```\n\nTo make this the cart's default storage, let's update the cart's configuration file.\nFirst, let us publish first the cart config file for us to enable to override it.\n`php artisan vendor:publish --provider=\"Darryldecode\\Cart\\CartServiceProvider\" --tag=\"config\"`\n\nafter running that command, there should be a new file on your config folder name `shopping_cart.php`\n\nOpen this file and let's update the storage use. Find the key which says `'storage' => null,`\nAnd update it to your newly created DBStorage Class, which on our example,\n`'storage' => \\App\\DBStorage::class,`\n\nOR If you have multiple cart instance (example WishList), you can inject the custom database storage\nto your cart instance by injecting it to the service provider of your wishlist cart, you replace the storage\nto use your custom storage. See below:\n\n```php\nuse Darryldecode\\Cart\\Cart;\nuse Illuminate\\Support\\ServiceProvider;\n\nclass WishListProvider extends ServiceProvider\n{\n    /**\n     * Bootstrap the application services.\n     *\n     * @return void\n     */\n    public function boot()\n    {\n        //\n    }\n    /**\n     * Register the application services.\n     *\n     * @return void\n     */\n    public function register()\n    {\n        $this->app->singleton('wishlist', function($app)\n        {\n            $storage = new DBStorage(); <-- Your new custom storage\n            $events = $app['events'];\n            $instanceName = 'cart_2';\n            $session_key = '88uuiioo99888';\n            return new Cart(\n                $storage,\n                $events,\n                $instanceName,\n                $session_key,\n                config('shopping_cart')\n            );\n        });\n    }\n}\n```\n\nStill feeling confuse on how to do custom database storage? Or maybe doing multiple cart instances?\nSee the demo repo to see the codes and how you can possibly do it and expand base on your needs or make it\nas a guide & reference. See links below:\n\n[See Demo App Here](https://shoppingcart-demo.darrylfernandez.com/cart)\n\nOR\n\n[See Demo App Repo Here](https://github.com/darryldecode/laravelshoppingcart-demo)\n\n## License\n\nThe Laravel Shopping Cart is open-sourced software licensed under the [MIT license](http://opensource.org/licenses/MIT)\n\n### Disclaimer\n\nTHIS SOFTWARE IS PROVIDED \"AS IS\" AND ANY EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR, OR ANY OF THE CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n"
        },
        {
          "name": "composer.json",
          "type": "blob",
          "size": 1.2109375,
          "content": "{\n    \"name\": \"saleem189/cart\",\n    \"description\": \"Laravel 5 Shopping cart\",\n    \"keywords\": [\"laravel\", \"shopping cart\", \"cart\"],\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Darryl Fernandez\",\n            \"email\": \"engrdarrylfernandez@gmail.com\"\n        }\n    ],\n    \"require\": {\n        \"php\": \">=7.3\",\n        \"illuminate/support\": \"5.0.*|5.1.*|5.2.*|5.3.*|5.4.*|5.5.*|5.6.*|5.7.*|5.8.*|^6.0|^7.0|^8.0|^9.0|^10.0|^11.0\",\n        \"illuminate/validation\": \"5.0.*|5.1.*|5.2.*|5.3.*|5.4.*|5.5.*|5.6.*|5.7.*|5.8.*|^6.0|^7.0|^8.0|^9.0|^10.0|^11.0\",\n        \"illuminate/translation\": \"5.0.*|5.1.*|5.2.*|5.3.*|5.4.*|5.5.*|5.6.*|5.7.*|5.8.*|^6.0|^7.0|^8.0|^9.0|^10.0|^11.0\"\n    },\n    \"require-dev\": {\n        \"mockery/mockery\": \"^1.4.2\",\n        \"phpunit/phpunit\": \"^9.0\",\n        \"symfony/var-dumper\": \"5.1.5.*@dev\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"Darryldecode\\\\\": \"src/Darryldecode\"\n        }\n    },\n    \"minimum-stability\": \"dev\",\n    \"extra\": {\n        \"laravel\": {\n            \"providers\": [\n                \"Darryldecode\\\\Cart\\\\CartServiceProvider\"\n            ],\n            \"aliases\": {\n                \"Cart\": \"Darryldecode\\\\Cart\\\\Facades\\\\CartFacade\"\n            }\n        }\n    }\n}\n"
        },
        {
          "name": "phpunit.xml",
          "type": "blob",
          "size": 0.556640625,
          "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit backupGlobals=\"false\"\n         backupStaticAttributes=\"false\"\n         bootstrap=\"vendor/autoload.php\"\n         colors=\"true\"\n         convertErrorsToExceptions=\"true\"\n         convertNoticesToExceptions=\"true\"\n         convertWarningsToExceptions=\"true\"\n         processIsolation=\"false\"\n         stopOnFailure=\"false\"\n         syntaxCheck=\"false\"\n>\n    <testsuites>\n        <testsuite name=\"Package Test Suite\">\n            <directory suffix=\".php\">./tests/</directory>\n        </testsuite>\n    </testsuites>\n</phpunit>\n"
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}