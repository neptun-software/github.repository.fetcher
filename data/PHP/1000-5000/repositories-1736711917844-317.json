{
  "metadata": {
    "timestamp": 1736711917844,
    "page": 317,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjMyMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "laravel/valet",
      "stars": 2536,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".editorconfig",
          "type": "blob",
          "size": 0.21484375,
          "content": "root = true\n\n[*]\ncharset = utf-8\nend_of_line = lf\ninsert_final_newline = true\nindent_style = space\nindent_size = 4\ntrim_trailing_whitespace = true\n\n[*.md]\ntrim_trailing_whitespace = false\n\n[*.{yml,yaml}]\nindent_size = 2\n"
        },
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.34765625,
          "content": "* text=auto\n\n*.blade.php diff=html\n*.css diff=css\n*.html diff=html\n*.md diff=markdown\n*.php diff=php\n\n/.github export-ignore\n/art export-ignore\n/tests export-ignore\n.editorconfig export-ignore\n.gitattributes export-ignore\n.gitignore export-ignore\nphpunit.xml export-ignore\nCHANGELOG.md export-ignore\nphpunit.xml.dist export-ignore\nUPGRADE.md export-ignore\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.095703125,
          "content": ".DS_Store\n/vendor/\ncomposer.lock\nerror.log\n.idea\n.phpunit.result.cache\ntests/conf.d\ntests/config/\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 12.7041015625,
          "content": "# Release Notes\n\n## [Unreleased](https://github.com/laravel/valet/compare/v4.8.2...master)\n\n## [v4.8.2](https://github.com/laravel/valet/compare/v4.8.1...v4.8.2) - 2024-12-20\n\n* Add the ability to renew the Certificate Authority certificate by [@adrum](https://github.com/adrum) in https://github.com/laravel/valet/pull/1498\n* Fixes bad regex for loopback replacement for Issue #1503 by [@mitchkramez](https://github.com/mitchkramez) in https://github.com/laravel/valet/pull/1504\n* Change latest php version to 8.4 by [@mischabraam](https://github.com/mischabraam) in https://github.com/laravel/valet/pull/1507\n* fix(entry-script): use correct php binary for proxy commands by [@saibotk](https://github.com/saibotk) in https://github.com/laravel/valet/pull/1510\n\n## [v4.8.1](https://github.com/laravel/valet/compare/v4.8.0...v4.8.1) - 2024-11-25\n\n* Add support for PHP 8.4 by [@SupianIDz](https://github.com/SupianIDz) in https://github.com/laravel/valet/pull/1499\n* Fix extra parameters for share tool, fixes #1494 by [@rcknr](https://github.com/rcknr) in https://github.com/laravel/valet/pull/1495\n* Update logo to support dark/light theme by [@milewski](https://github.com/milewski) in https://github.com/laravel/valet/pull/1497\n\n## [v4.8.0](https://github.com/laravel/valet/compare/v4.7.1...v4.8.0) - 2024-09-03\n\n* Add a new share tool, cloudflared by [@rcknr](https://github.com/rcknr) in https://github.com/laravel/valet/pull/1467\n\n## [v4.7.1](https://github.com/laravel/valet/compare/v4.7.0...v4.7.1) - 2024-06-25\n\n* Require Trusting CA when securing sites by [@adrum](https://github.com/adrum) in https://github.com/laravel/valet/pull/1488\n\n## [v4.7.0](https://github.com/laravel/valet/compare/v4.6.3...v4.7.0) - 2024-06-18\n\n* Trust CA Certificate only by [@adrum](https://github.com/adrum) in https://github.com/laravel/valet/pull/1463\n* Allow specifying php version to restart by [@N-Silbernagel](https://github.com/N-Silbernagel) in https://github.com/laravel/valet/pull/1469\n* Update KirbyValetDriver.php by [@Werbschaft](https://github.com/Werbschaft) in https://github.com/laravel/valet/pull/1471\n* fix: Warning: Constant VALET_* already defined in X by [@NickSdot](https://github.com/NickSdot) in https://github.com/laravel/valet/pull/1485\n* Add values() call to reset keys after modifying paths by [@adriaanzon](https://github.com/adriaanzon) in https://github.com/laravel/valet/pull/1477\n* Adding support for Nette Framework. by [@antonL95](https://github.com/antonL95) in https://github.com/laravel/valet/pull/1486\n\n## [v4.6.3](https://github.com/laravel/valet/compare/v4.6.2...v4.6.3) - 2024-05-21\n\n* add server name to valet.conf by [@Oleg339](https://github.com/Oleg339) in https://github.com/laravel/valet/pull/1458\n\n## [v4.6.2](https://github.com/laravel/valet/compare/v4.6.1...v4.6.2) - 2024-05-07\n\n* Add quotes around $PHP by [@drbyte](https://github.com/drbyte) in https://github.com/laravel/valet/pull/1473\n* Support Illuminate:11 and Symfony:7 by [@drbyte](https://github.com/drbyte) in https://github.com/laravel/valet/pull/1481\n* Ignore invalid paths by [@ahmedash95](https://github.com/ahmedash95) in https://github.com/laravel/valet/pull/1478\n\n## [v4.6.1](https://github.com/laravel/valet/compare/v4.6.0...v4.6.1) - 2024-01-01\n\n* Allow renew() to be called without parameters by [@drbyte](https://github.com/drbyte) in https://github.com/laravel/valet/pull/1465\n\n## [v4.6.0](https://github.com/laravel/valet/compare/v4.5.0...v4.6.0) - 2023-12-27\n\n* Bandage for 502 errors using Gettext/PostgreSQL/MongoDB by [@drbyte](https://github.com/drbyte) in https://github.com/laravel/valet/pull/1452\n* handle deprecated http2_push_preload conf for nginx >= 1.25.1 by [@OpJePl44tsm4n](https://github.com/OpJePl44tsm4n) in https://github.com/laravel/valet/pull/1451\n* Update \"fetch-share-url\" to pull correct URL for HTTPS tunnels, not just HTTP by [@rana01645](https://github.com/rana01645) in https://github.com/laravel/valet/pull/1460\n* added the ability to renew certs and view their expiration dates by [@adrum](https://github.com/adrum) in https://github.com/laravel/valet/pull/1461\n\n## [v4.5.0](https://github.com/laravel/valet/compare/v4.4.1...v4.5.0) - 2023-10-10\n\n- Add support for proxying multiple domains at once by [@RobertBoes](https://github.com/RobertBoes) in https://github.com/laravel/valet/pull/1437\n\n## [v4.4.1](https://github.com/laravel/valet/compare/v4.4.0...v4.4.1) - 2023-10-03\n\n- Fix magento2 driver by [@mischabraam](https://github.com/mischabraam) in https://github.com/laravel/valet/pull/1420\n\n## [v4.4.0](https://github.com/laravel/valet/compare/v4.3.0...v4.4.0) - 2023-09-26\n\n- Allow LaravelValetDriver to serve other /public/*.php files by [@drbyte](https://github.com/drbyte) in https://github.com/laravel/valet/pull/1439\n- Support static caching in Statamic by [@jasonvarga](https://github.com/jasonvarga) in https://github.com/laravel/valet/pull/1440\n- Fix link command's `--isolate` argument with custom name by [@mcaskill](https://github.com/mcaskill) in https://github.com/laravel/valet/pull/1428\n\n## [v4.3.0](https://github.com/laravel/valet/compare/v4.1.4...v4.3.0) - 2023-09-05\n\n- Add \"valet stop dnsmasq\" option by [@drbyte](https://github.com/drbyte) in https://github.com/laravel/valet/pull/1422\n- Drop Mailhog and Redis from default logs list, since Valet doesn't install them by [@mattstauffer](https://github.com/mattstauffer) in https://github.com/laravel/valet/pull/1438\n\n## [v4.1.4](https://github.com/laravel/valet/compare/v4.1.3...v4.1.4) - 2023-08-14\n\n### What's Changed\n\n- Only delete DNSMasq resolver when Herd is not installed by [@mpociot](https://github.com/mpociot) in https://github.com/laravel/valet/pull/1434\n\n**Full Changelog**: https://github.com/laravel/valet/compare/v4.1.3...v4.1.4\n\n## [v4.1.3](https://github.com/laravel/valet/compare/v4.1.2...v4.1.3) - 2023-07-21\n\n- Add quotes around $PHP by [@datashaman](https://github.com/datashaman) in https://github.com/laravel/valet/pull/1431\n\n## [v4.1.2](https://github.com/laravel/valet/compare/v4.1.1...v4.1.2) - 2023-05-30\n\n- Load specific drivers before custom drivers to allow for extension. by @mattstauffer in https://github.com/laravel/valet/pull/1414\n- Ensure base configuration is correct even if file already exists by @mattstauffer in https://github.com/laravel/valet/pull/1415\n\n## [v4.1.1](https://github.com/laravel/valet/compare/v4.1.0...v4.1.1) - 2023-05-16\n\n- Install older PHP versions via alternate tap by @drbyte in https://github.com/laravel/valet/pull/1411\n\n## [v4.1.0](https://github.com/laravel/valet/compare/v4.0.2...v4.1.0) - 2023-05-09\n\n- Add driver for Radicle by @csorrentino in https://github.com/laravel/valet/pull/1413\n\n## [v4.0.2](https://github.com/laravel/valet/compare/v4.0.1...v4.0.2) - 2023-04-26\n\n- Fix ngrok.io proxy/forwarding detection by @drbyte in https://github.com/laravel/valet/pull/1404\n- Fix read non existing config file by @mischabraam in https://github.com/laravel/valet/pull/1398\n\n## [v4.0.1](https://github.com/laravel/valet/compare/v4.0.0...v4.0.1) - 2023-03-27\n\n- Fixes Valet\\Drivers\\LocalValetDriver not found error by @fylzero in https://github.com/laravel/valet/pull/1388\n- More robust check for Bedrock environments by @ethanclevenger91 in https://github.com/laravel/valet/pull/1390\n\n## [v4.0.0](https://github.com/laravel/valet/compare/v3.3.2...v4.0.0) - 2023-03-14\n\nWelcome to Valet v4! This release is mostly about re-writing the internals so they're easier to debug, fix, and modify. There are a few user-facing additions and improvements, including but not limited to: ngrok is now managed by Homebrew, `.valetphprc` is replaced with a more powerful `.valetrc`, you can use [Expose](https://expose.dev/) to share, there's a new `status` command to make sure all your services are running correctly, and a lot of the other existing commands work even better than ever before.\n\n### Added\n\n- Add Expose support by @mattstauffer in https://github.com/laravel/valet/pull/1344 and https://github.com/laravel/valet/pull/1349\n- Add status command by @mattstauffer in https://github.com/laravel/valet/pull/1329\n- Check whether services are running as the correct user in `valet status` by @mattstauffer in https://github.com/laravel/valet/pull/1348\n- Add the ability for drivers to check Composer dependencies by @mattstauffer in https://github.com/laravel/valet/pull/1345\n- Add php isolation from link command by @joelbutcher in https://github.com/laravel/valet/pull/1360\n\n### Changed\n\n- Replace `.valetphprc. with `.valetrc` by @mattstauffer in https://github.com/laravel/valet/pull/1347\n- Update php and composer commands to allow passing in specific site by @mattstauffer in https://github.com/laravel/valet/pull/1370\n- Require PHP 8.0 to be installed, but support PHP 7.1+ for isolated sites (https://github.com/laravel/valet/pull/1328 and https://github.com/laravel/valet/pull/1346)\n- Re-work how BasicValetDriver serves files in projects with and without `public/` directory by @mattstauffer in https://github.com/laravel/valet/pull/1311\n- Extract Server class and refactor loading of drivers by @mattstauffer in https://github.com/laravel/valet/pull/1319\n- Add type hints and return types by @mattstauffer in https://github.com/laravel/valet/pull/1321\n- Drop unnecessary doc blocks by @mattstauffer in https://github.com/laravel/valet/pull/1339\n- Add CLI command tests by @mattstauffer in https://github.com/laravel/valet/pull/1332 and https://github.com/laravel/valet/pull/1335\n- Implement `valet fetch-share-url` when working with Expose by @mattstauffer in\n- Use Pint for Code Styling by @driesvints in https://github.com/laravel/valet/pull/1366\n- Release Version 4 by @mattstauffer in https://github.com/laravel/valet/pull/1318, https://github.com/laravel/valet/pull/1365\n\n### Fixed\n\n- Unsecure when unlinking by @mattstauffer in https://github.com/laravel/valet/pull/1364\n- Update phpRc reader to check cwd before checking config, if cwd specified by @mattstauffer in https://github.com/laravel/valet/pull/1361\n- Remove Valet Certificate Authority on uninstall by @mattstauffer in https://github.com/laravel/valet/pull/1358\n\n## [v3.3.2](https://github.com/laravel/valet/compare/v3.3.1...v3.3.2) - 2023-02-07\n\n### Fixed\n\n- Enable local network sharing by @thinkverse in https://github.com/laravel/valet/pull/1284\n\n## [v3.3.1](https://github.com/laravel/valet/compare/v3.3.0...v3.3.1) - 2023-01-31\n\n### Fixed\n\n- Make 127.0.0.1 SERVER_ADDR definition only if null by @mattstauffer in https://github.com/laravel/valet/pull/1356\n\n## [v3.3.0](https://github.com/laravel/valet/compare/v3.2.2...v3.3.0) - 2023-01-17\n\n### Added\n\n- Add `set-ngrok-token` command by @mattstauffer in https://github.com/laravel/valet/pull/1325\n- Laravel v10 Support by @driesvints in https://github.com/laravel/valet/pull/1341\n\n### Fixed\n\n- Fixes permission denied check when result starts with 'Permission denied' by @matthewjohns0n in https://github.com/laravel/valet/pull/1343\n\n## [v3.2.2](https://github.com/laravel/valet/compare/v3.2.1...v3.2.2) - 2022-12-08\n\n### Fixed\n\n- Fix how drivers are available for extension by @mattstauffer in https://github.com/laravel/valet/pull/1317\n\n## [v3.2.1](https://github.com/laravel/valet/compare/v3.2.0...v3.2.1) - 2022-12-06\n\n### Fixed\n\n- Fix autoloading in distribution by @mattstauffer in https://github.com/laravel/valet/commit/35998a0f86b9d57b5766f2663a41a2c99af3d579\n\n## [v3.2.0](https://github.com/laravel/valet/compare/v3.1.13...v3.2.0) - 2022-12-06\n\n### Changed\n\n- When formatting provided site name, only remove .tld if it's at the end by @ErikDohmen in https://github.com/laravel/valet/pull/1297\n- Set files path as a static path for concrete5 driver by @KorvinSzanto in https://github.com/laravel/valet/pull/514\n- Allow users to provide custom stub files by @jjpmann in https://github.com/laravel/valet/pull/1238\n- Disable brew auto cleanup on installation, to avoid upgrade errors failing install by @JoshuaBehrens in https://github.com/laravel/valet/pull/995\n- Move all drivers to PSR autoload, and write tests for drivers by @mattstauffer in https://github.com/laravel/valet/pull/1310\n\n### Fixed\n\n- Retain secure proxies by @ashleyshenton in https://github.com/laravel/valet/pull/1305\n- Prevent 502 errors when using AJAX by @mattkingshott in https://github.com/laravel/valet/pull/1079\n\n## [v3.1.13](https://github.com/laravel/valet/compare/v3.1.12...v3.1.13) - 2022-11-15\n\n### Fixed\n\n- Fix bedrockvaletdriver by @EHLOVader in https://github.com/laravel/valet/pull/1289\n\n## [v3.1.12](https://github.com/laravel/valet/compare/v3.1.11...v3.1.12) - 2022-10-25\n\n### Changed\n\n- Valet fetch-share-url issue fix by @NasirNobin in https://github.com/laravel/valet/pull/1285\n- Add description to `secured` command by @EvanGoss in https://github.com/laravel/valet/pull/1288\n\n## [v3.1.11](https://github.com/laravel/valet/compare/v3.1.9...v3.1.11) - 2022-09-08\n\n### Fixed\n\n- Update version by @driesvints in https://github.com/laravel/valet/commit/6f1e4d421bfa7a206133e971a186de708c963adf\n"
        },
        {
          "name": "LICENSE.md",
          "type": "blob",
          "size": 1.064453125,
          "content": "The MIT License (MIT)\n\nCopyright (c) <Taylor Otwell, Adam Wathan>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 2.158203125,
          "content": "<p align=\"center\"><img width=\"304\" height=\"52\" src=\"/art/logo.svg\"></p>\n\n<p align=\"center\">\n<a href=\"https://github.com/laravel/valet/actions?query=workflow%3ATests\"><img src=\"https://github.com/laravel/valet/actions/workflows/tests.yml/badge.svg?branch=master\" alt=\"Build Status\"></a>\n<a href=\"https://packagist.org/packages/laravel/valet\"><img src=\"https://poser.pugx.org/laravel/valet/d/total.svg\" alt=\"Total Downloads\"></a>\n<a href=\"https://packagist.org/packages/laravel/valet\"><img src=\"https://poser.pugx.org/laravel/valet/v/stable.svg\" alt=\"Latest Stable Version\"></a>\n<a href=\"https://packagist.org/packages/laravel/valet\"><img src=\"https://poser.pugx.org/laravel/valet/license.svg\" alt=\"License\"></a>\n</p>\n\n## Introduction\n\nValet is a Laravel development environment for Mac minimalists. No Vagrant, no `/etc/hosts` file. You can even share your sites publicly using local tunnels. _Yeah, we like it too._\n\nLaravel Valet configures your Mac to always run Nginx in the background when your machine starts. Then, using [DnsMasq](https://en.wikipedia.org/wiki/Dnsmasq), Valet proxies all requests on the `*.test` domain to point to sites installed on your local machine.\n\nIn other words, a blazing fast Laravel development environment that uses roughly 7mb of RAM. Valet isn't a complete replacement for Vagrant or Homestead, but provides a great alternative if you want flexible basics, prefer extreme speed, or are working on a machine with a limited amount of RAM.\n\n## Official Documentation\n\nDocumentation for Valet can be found on the [Laravel website](https://laravel.com/docs/valet).\n\n## Contributing\n\nThank you for considering contributing to Valet! You can read the contribution guide [here](.github/CONTRIBUTING.md).\n\n## Code of Conduct\n\nIn order to ensure that the Laravel community is welcoming to all, please review and abide by the [Code of Conduct](https://laravel.com/docs/contributions#code-of-conduct).\n\n## Security Vulnerabilities\n\nPlease review [our security policy](https://github.com/laravel/valet/security/policy) on how to report security vulnerabilities.\n\n## License\n\nLaravel Valet is open-sourced software licensed under the [MIT license](https://opensource.org/licenses/MIT).\n"
        },
        {
          "name": "RELEASE.md",
          "type": "blob",
          "size": 0.216796875,
          "content": "# Release Instructions\n\n1. Update the `$version` variable in [`app.php`](./cli/app.php) and commit it\n2. [Create a new GitHub release](https://github.com/laravel/valet/releases/new) for this version with the release notes\n"
        },
        {
          "name": "UPGRADE.md",
          "type": "blob",
          "size": 1.1396484375,
          "content": "# Upgrading to v4\n\n- You must have PHP 8.0+ installed, and set as your primary/linked PHP install when you install v4; you can use 7.4+ as your primary after that, but need to keep a version of 8+ installed at all times\n- You must run `valet` once for the upgrader to run; this will attempt to update all of your configuration items and custom local drivers for v4\n- If you have any issues with your drivers, all custom drivers (including the `SampleValetDriver` published by previous versions of Valet) must have the following; see the [new SampleValetDriver](https://github.com/laravel/valet/blob/d7787c025e60abc24a5195dc7d4c5c6f2d984339/cli/stubs/SampleValetDriver.php) for an example:\n    - Match the new type hints of the base ValetDriver\n    - Extend the new namespaced drivers instead of the old globally-namespaced drivers\n    - Have their own namespace\n- If you have any `.valetphprc` files in your projects, update them to use the new `.valetrc` syntax:\n    - Rename `.valetphprc` to `.valetrc`\n    - Add `php=` before the version number; e.g. `php=php@8.2`\n- If you're using Expose and want to connect it to Valet, make sure to upgrade to v2.6.0 or higher\n"
        },
        {
          "name": "art",
          "type": "tree",
          "content": null
        },
        {
          "name": "cli",
          "type": "tree",
          "content": null
        },
        {
          "name": "composer.json",
          "type": "blob",
          "size": 1.671875,
          "content": "{\n    \"name\": \"laravel/valet\",\n    \"description\": \"A more enjoyable local development experience for Mac.\",\n    \"keywords\": [\"laravel\", \"zonda\", \"wwdhhd\"],\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Taylor Otwell\",\n            \"email\": \"taylor@laravel.com\"\n        },\n        {\n            \"name\": \"Adam Wathan\",\n            \"email\": \"adam.wathan@gmail.com\"\n        },\n        {\n            \"name\": \"Matt Stauffer\",\n            \"email\": \"matt@tighten.co\"\n        }\n    ],\n    \"autoload\": {\n        \"files\": [\n            \"cli/includes/compatibility.php\",\n            \"cli/includes/facades.php\",\n            \"cli/includes/helpers.php\"\n        ],\n        \"psr-4\": {\n            \"Valet\\\\\": \"cli/Valet/\"\n        }\n    },\n    \"autoload-dev\": {\n        \"files\": [\n            \"tests/UsesNullWriter.php\",\n            \"tests/BaseApplicationTestCase.php\",\n            \"tests/Drivers/BaseDriverTestCase.php\"\n        ]\n    },\n    \"conflict\": {\n        \"mnapoli/silly\": \">=1.8.1 <1.8.3\"\n    },\n    \"require\": {\n        \"php\": \"^7.1|^8.0\",\n        \"illuminate/collections\": \"^8.0|^9.0|^10.0|^11.0\",\n        \"illuminate/container\": \"~5.1|^6.0|^7.0|^8.0|^9.0|^10.0|^11.0\",\n        \"mnapoli/silly\": \"^1.5\",\n        \"symfony/console\": \"^3.0|^4.0|^5.0|^6.0|^7.0\",\n        \"symfony/process\": \"^3.0|^4.0|^5.0|^6.0|^7.0\",\n        \"guzzlehttp/guzzle\": \"^6.0|^7.4\",\n        \"symfony/event-dispatcher\": \"^3.0|^4.0|^5.0|^6.0|^7.0\"\n    },\n    \"require-dev\": {\n        \"mockery/mockery\": \"^1.2.3\",\n        \"yoast/phpunit-polyfills\": \"^0.2.0\",\n        \"laravel/pint\": \"^1.4\"\n    },\n    \"bin\": [\n        \"valet\"\n    ],\n    \"extra\": {\n        \"branch-alias\": {\n            \"dev-master\": \"4.x-dev\"\n        }\n    }\n}\n"
        },
        {
          "name": "find-usable-php.php",
          "type": "blob",
          "size": 2.81640625,
          "content": "<?php\n\n$minimumPhpVersion = '8.0';\n\n// First, check if the system's linked \"php\" is 8+; if so, return that. This\n// is the most likely, most ideal, and fastest possible case\n$linkedPhpVersion = shell_exec('php -r \"echo phpversion();\"');\n\nif (version_compare($linkedPhpVersion, $minimumPhpVersion) >= 0) {\n    echo exec('which php');\n\n    return;\n}\n\n// If not, let's find it whether we have a version of PHP installed that's 8+;\n// all users that run through this code path will see Valet run more slowly\n$phps = explode(PHP_EOL, trim(shell_exec('brew list --formula | grep php')));\n\n// Normalize version numbers\n$phps = array_reduce($phps, function ($carry, $php) {\n    $carry[$php] = presumePhpVersionFromBrewFormulaName($php);\n\n    return $carry;\n}, []);\n\n// Filter out older versions of PHP\n$modernPhps = array_filter($phps, function ($php) use ($minimumPhpVersion) {\n    return version_compare($php, $minimumPhpVersion) >= 0;\n});\n\n// If we don't have any modern versions of PHP, throw an error\nif (empty($modernPhps)) {\n    throw new Exception('Sorry, but you do not have a version of PHP installed that is compatible with Valet (8+).');\n}\n\n// Sort newest version to oldest\nsort($modernPhps);\n$modernPhps = array_reverse($modernPhps);\n\n// Grab the highest, set as $foundVersion, and output its path\n$foundVersion = reset($modernPhps);\necho getPhpExecutablePath(array_search($foundVersion, $phps));\n\n/**\n * Function definitions.\n */\n\n/**\n * Extract PHP executable path from PHP Version.\n * Copied from Brew.php and modified.\n *\n * @param  string|null  $phpFormulaName  For example, \"php@8.1\"\n * @return string\n */\nfunction getPhpExecutablePath(?string $phpFormulaName = null)\n{\n    $brewPrefix = exec('printf $(brew --prefix)');\n\n    // Check the default `/opt/homebrew/opt/php@8.1/bin/php` location first\n    if (file_exists($brewPrefix.\"/opt/{$phpFormulaName}/bin/php\")) {\n        return $brewPrefix.\"/opt/{$phpFormulaName}/bin/php\";\n    }\n\n    // Check the `/opt/homebrew/opt/php71/bin/php` location for older installations\n    $oldPhpFormulaName = str_replace(['@', '.'], '', $phpFormulaName); // php@7.1 to php71\n    if (file_exists($brewPrefix.\"/opt/{$oldPhpFormulaName}/bin/php\")) {\n        return $brewPrefix.\"/opt/{$oldPhpFormulaName}/bin/php\";\n    }\n\n    throw new Exception('Cannot find an executable path for provided PHP version: '.$phpFormulaName);\n}\n\nfunction presumePhpVersionFromBrewFormulaName(string $formulaName)\n{\n    if ($formulaName === 'php') {\n        // Figure out its link\n        $details = json_decode(shell_exec(\"brew info $formulaName --json\"));\n\n        if (! empty($details[0]->aliases[0])) {\n            $formulaName = $details[0]->aliases[0];\n        } else {\n            return null;\n        }\n    }\n\n    if (strpos($formulaName, 'php@') === false) {\n        return null;\n    }\n\n    return substr($formulaName, strpos($formulaName, '@') + 1);\n}\n"
        },
        {
          "name": "phpunit.xml.dist",
          "type": "blob",
          "size": 0.697265625,
          "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit backupGlobals=\"false\"\n         backupStaticAttributes=\"false\"\n         bootstrap=\"vendor/autoload.php\"\n         colors=\"true\"\n         convertDeprecationsToExceptions=\"true\"\n         convertErrorsToExceptions=\"true\"\n         convertNoticesToExceptions=\"true\"\n         convertWarningsToExceptions=\"true\"\n         processIsolation=\"false\"\n         stopOnFailure=\"false\"\n         beStrictAboutTestsThatDoNotTestAnything=\"false\"\n>\n    <testsuites>\n        <testsuite name=\"Valet Test Suite\">\n            <directory suffix=\"Test.php\">./tests</directory>\n        </testsuite>\n    </testsuites>\n    <php>\n        <env name=\"APP_ENV\" value=\"testing\"/>\n    </php>\n</phpunit>\n"
        },
        {
          "name": "server.php",
          "type": "blob",
          "size": 3.083984375,
          "content": "<?php\n\nrequire_once './cli/includes/require-drivers.php';\nrequire_once './cli/Valet/Server.php';\n\nuse Valet\\Drivers\\ValetDriver;\nuse Valet\\Server;\n\n/**\n * Define the user's \"~/.config/valet\" path.\n */\ndefined('VALET_HOME_PATH') or define('VALET_HOME_PATH', posix_getpwuid(fileowner(__FILE__))['dir'].'/.config/valet');\ndefined('VALET_STATIC_PREFIX') or define('VALET_STATIC_PREFIX', '41c270e4-5535-4daa-b23e-c269744c2f45');\n\n/**\n * Load the Valet configuration.\n */\n$valetConfig = json_decode(\n    file_get_contents(VALET_HOME_PATH.'/config.json'), true\n);\n\n/**\n * If the HTTP_HOST is an IP address, check the start of the REQUEST_URI for a\n * valid hostname, extract and use it as the effective HTTP_HOST in place\n * of the IP. It enables the use of Valet in a local network.\n */\nif (Server::hostIsIpAddress($_SERVER['HTTP_HOST'])) {\n    $uriForIpAddressExtraction = ltrim($_SERVER['REQUEST_URI'], '/');\n\n    if ($host = Server::valetSiteFromIpAddressUri($uriForIpAddressExtraction, $valetConfig['tld'])) {\n        $_SERVER['HTTP_HOST'] = $host;\n        $_SERVER['REQUEST_URI'] = str_replace($host, '', $uriForIpAddressExtraction);\n    }\n}\n\n$server = new Server($valetConfig);\n\n/**\n * Parse the URI and site / host for the incoming request.\n */\n$uri = Server::uriFromRequestUri($_SERVER['REQUEST_URI']);\n$siteName = $server->siteNameFromHttpHost($_SERVER['HTTP_HOST']);\n$valetSitePath = $server->sitePath($siteName);\n\nif (is_null($valetSitePath) && is_null($valetSitePath = $server->defaultSitePath())) {\n    Server::show404();\n}\n\n$valetSitePath = realpath($valetSitePath);\n\n/**\n * Find the appropriate Valet driver for the request.\n */\n$valetDriver = ValetDriver::assign($valetSitePath, $siteName, $uri);\n\nif (! $valetDriver) {\n    Server::show404();\n}\n\n/**\n * ngrok uses the X-Original-Host to store the forwarded hostname.\n */\nif (isset($_SERVER['HTTP_X_ORIGINAL_HOST']) && ! isset($_SERVER['HTTP_X_FORWARDED_HOST'])) {\n    $_SERVER['HTTP_X_FORWARDED_HOST'] = $_SERVER['HTTP_X_ORIGINAL_HOST'];\n}\n\n/**\n * Attempt to load server environment variables.\n */\n$valetDriver->loadServerEnvironmentVariables(\n    $valetSitePath, $siteName\n);\n\n/**\n * Allow driver to mutate incoming URL.\n */\n$uri = $valetDriver->mutateUri($uri);\n\n/**\n * Determine if the incoming request is for a static file.\n */\n$isPhpFile = pathinfo($uri, PATHINFO_EXTENSION) === 'php';\n\nif ($uri !== '/' && ! $isPhpFile && $staticFilePath = $valetDriver->isStaticFile($valetSitePath, $siteName, $uri)) {\n    return $valetDriver->serveStaticFile($staticFilePath, $valetSitePath, $siteName, $uri);\n}\n\n/**\n * Allow for drivers to take pre-loading actions (e.g. setting server variables).\n */\n$valetDriver->beforeLoading($valetSitePath, $siteName, $uri);\n\n/**\n * Attempt to dispatch to a front controller.\n */\n$frontControllerPath = $valetDriver->frontControllerPath(\n    $valetSitePath, $siteName, $uri\n);\n\nif (! $frontControllerPath) {\n    if (isset($valetConfig['directory-listing']) && $valetConfig['directory-listing'] == 'on') {\n        Server::showDirectoryListing($valetSitePath, $uri);\n    }\n\n    Server::show404();\n}\n\nchdir(dirname($frontControllerPath));\n\nrequire $frontControllerPath;\n"
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "valet",
          "type": "blob",
          "size": 4.888671875,
          "content": "#!/usr/bin/env bash\n\nSOURCE=\"${BASH_SOURCE[0]}\"\n\n# If the current source is a symbolic link, we need to resolve it to an\n# actual directory name. We'll use PHP to do this easier than we can\n# do it in pure Bash. So, we'll call into PHP CLI here to resolve.\nif [[ -L \"$SOURCE\" ]]\nthen\n    DIR=$(php -r \"echo dirname(realpath('$SOURCE'));\")\nelse\n    DIR=\"$( cd \"$( dirname \"$SOURCE\" )\" && pwd )\"\nfi\n\n# If we are in the global Composer \"bin\" directory, we need to bump our\n# current directory up two, so that we will correctly proxy into the\n# Valet CLI script which is written in PHP. Will use PHP to do it.\nif [ ! -f \"$DIR/cli/valet.php\" ]\nthen\n    DIR=$(php -r \"echo realpath('$DIR/../laravel/valet');\")\nfi\n\n# Get a command-line executable we can use for php that's 8+; if this\n# is the inside loop (Valet runs itself 2x in some settings), skip\n# checking and pulling again by reading the exported env var\nif [[ \"$PHP_EXECUTABLE\" = \"\" ]]\nthen\n    PHP=\"$(php $DIR/find-usable-php.php)\"\n\n    # Validate output before running it on the CLI\n    if [[ ! -f \"$PHP\" ]]; then\n        echo \"Error finding executable PHP. Quitting for safety.\"\n        echo \"Provided output from find-usable-php.php:\"\n        echo $PHP\n        exit\n    fi\n\n    export PHP_EXECUTABLE=\"$PHP\"\nelse\n    PHP=\"$PHP_EXECUTABLE\"\nfi\n\n# If the command is the \"share\" command we will need to resolve out any\n# symbolic links for the site. Before starting the share tool, we will fire a\n# process to retrieve the live the share tool tunnel URL in the background.\nif [[ \"$1\" = \"share\" ]]\nthen\n    SHARETOOL=\"$(\"$PHP\" \"$DIR/cli/valet.php\" share-tool)\"\n\n    # Check for parameters to pass through to share tool (these will start with '-' or '--')\n    PARAMS=(${@:2})\n\n    for PARAM in ${PARAMS[@]}\n    do\n        if [[ ${PARAM:0:1} != '-' ]]; then\n            PARAMS=(\"${PARAMS[@]/$PARAM}\") # Quotes when working with strings\n        fi\n    done\n\n    PARAMS=${PARAMS[@]}\n\n    HOST=\"${PWD##*/}\"\n\n    # Find the first linked site for the current dir, if one exists\n    for linkname in ~/.config/valet/Sites/*; do\n        if [[ \"$(readlink $linkname)\" = \"$PWD\" ]]\n        then\n            HOST=\"${linkname##*/}\"\n            break\n        fi\n    done\n\n    # Lowercase the host to match how the rest of our domains are looked up\n    HOST=$(echo \"$HOST\" | tr '[:upper:]' '[:lower:]')\n    TLD=$(\"$PHP\" \"$DIR/cli/valet.php\" tld)\n    $(grep --quiet --no-messages 443 ~/.config/valet/Nginx/$HOST*)\n    SECURED=$?\n\n    if [[ $SHARETOOL = \"ngrok\" ]]\n    then\n    # ngrok\n        # Check to make sure ngrok is configured correctly\n        BREW_PREFIX=$(brew --prefix)\n        $($BREW_PREFIX/bin/ngrok config check >/dev/null 2>&1)\n\n        if [[ $? -ne 0 ]]; then\n            echo \"Please sign up for a free ngrok account and then run valet set-ngrok-token {yourTokenHere}.\"\n            exit\n        fi\n\n        # Decide the correct PORT: uses 60 for secure, else 80\n        if [[ $SECURED -eq 0 ]]; then\n            PORT=60\n        else\n            PORT=80\n        fi\n\n        sudo -u \"$USER\" \"$BREW_PREFIX/bin/ngrok\" http \"$HOST.$TLD:$PORT\" --host-header=rewrite $PARAMS\n\n        exit\n\n    elif [[ $SHARETOOL = \"expose\" ]]\n    then\n\n    # expose\n        # Decide the correct PORT: uses 443 for secure, else 80\n        if [[ $SECURED -eq 0 ]]; then\n            PORT=443\n        else\n            PORT=80\n        fi\n\n        sudo -u \"$USER\" expose share \"$HOST.$TLD:$PORT\" $PARAMS\n\n        exit\n\n    elif [[ $SHARETOOL = \"cloudflared\" ]]\n    then\n    # cloudflared\n        if [[ $SECURED -eq 0 ]]; then\n            SCHEME=\"https\"\n        else\n            SCHEME=\"http\"\n        fi\n\n        sudo -u \"$USER\" cloudflared tunnel --no-tls-verify --url \"$SCHEME://localhost\" \\\n            --http-host-header \"$HOST.$TLD\" $PARAMS\n\n        exit\n\n    else\n        echo ''\n        echo \"Please use 'valet share-tool cloudflared', 'valet share-tool expose' or 'valet share-tool ngrok'\"\n        echo \"to set your preferred share tool.\"\n        exit\n    fi\n\n# Proxy PHP commands to the \"php\" executable on the isolated site\nelif [[ \"$1\" = \"php\" ]]\nthen\n    if [[ $2 == *\"--site=\"* ]]; then\n        SITE=${2#*=}\n        $(\"$PHP\" \"$DIR/cli/valet.php\" which-php $SITE) \"${@:3}\"\n    else\n        $(\"$PHP\" \"$DIR/cli/valet.php\" which-php) \"${@:2}\"\n    fi\n\n    exit\n\n# Proxy Composer commands with the \"php\" executable on the isolated site\nelif [[ \"$1\" = \"composer\" ]]\nthen\n    if [[ $2 == *\"--site=\"* ]]; then\n        SITE=${2#*=}\n        $(\"$PHP\" \"$DIR/cli/valet.php\" which-php $SITE) $(which composer) \"${@:3}\"\n    else\n        $(\"$PHP\" \"$DIR/cli/valet.php\" which-php) $(which composer) \"${@:2}\"\n    fi\n\n    exit\n\n# Finally, for every other command we will just proxy into the PHP tool\n# and let it handle the request. These are commands which can be run\n# without sudo and don't require taking over terminals like Ngrok.\nelse\n    if [[ \"$EUID\" -ne 0 ]]\n    then\n        sudo USER=\"$USER\" --preserve-env \"$SOURCE\" \"$@\"\n        exit\n    fi\n\n    \"$PHP\" \"$DIR/cli/valet.php\" \"$@\"\nfi\n"
        }
      ]
    }
  ]
}