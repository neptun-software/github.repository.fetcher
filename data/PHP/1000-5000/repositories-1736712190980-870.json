{
  "metadata": {
    "timestamp": 1736712190980,
    "page": 870,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjg3MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "overtrue/socialite",
      "stars": 1312,
      "defaultBranch": "4.x",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.154296875,
          "content": "/vendor\ncomposer.phar\ncomposer.lock\n.DS_Store\n/.idea\nThumbs.db\n/*.php\nsftp-config.json\n*.cache.phpunit.result.cache\n.phpunit.result.cache\n.php-cs-fixer.cache\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0654296875,
          "content": "The MIT License (MIT)\n\nCopyright (c) 2021 overtrue <i@overtrue.me>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 21.185546875,
          "content": "# Socialite\n\nSocialite æ˜¯ä¸€ä¸ª [OAuth2](https://oauth.net/2/) è®¤è¯å·¥å…·ã€‚ å®ƒçš„çµæ„Ÿæ¥æºäº [laravel/socialite](https://github.com/laravel/socialite) ï¼Œ ä½ å¯ä»¥å¾ˆè½»æ˜“çš„åœ¨ä»»ä½• PHP é¡¹ç›®ä¸­ä½¿ç”¨å®ƒã€‚[è‹±æ–‡æ–‡æ¡£](/README_EN.md)\n\n[![GitHub release (latest SemVer)](https://img.shields.io/github/v/release/overtrue/socialite?style=flat-square)](https://github.com/overtrue/socialite/releases)\n[![GitHub License](https://img.shields.io/github/license/overtrue/socialite?style=flat-square)](https://github.com/overtrue/socialite/blob/master/LICENSE)\n[![Packagist Downloads](https://img.shields.io/packagist/dt/overtrue/socialite?style=flat-square)](https://packagist.org/packages/overtrue/socialite)\n\n[![Sponsor me](https://github.com/overtrue/overtrue/blob/master/sponsor-me-button-s.svg?raw=true)](https://github.com/sponsors/overtrue)\n\nè¯¥å·¥å…·ç°å·²æ”¯æŒå¹³å°æœ‰ï¼šFacebookï¼ŒGithubï¼ŒGoogleï¼ŒLinkedinï¼ŒOutlookï¼ŒQQï¼ŒTAPDï¼Œæ”¯ä»˜å®ï¼Œæ·˜å®ï¼Œç™¾åº¦ï¼Œé’‰é’‰ï¼Œå¾®åšï¼Œå¾®ä¿¡ï¼ŒæŠ–éŸ³ï¼Œé£ä¹¦ï¼ŒLarkï¼Œè±†ç“£ï¼Œä¼ä¸šå¾®ä¿¡ï¼Œè…¾è®¯äº‘ï¼ŒLineï¼ŒGiteeï¼ŒCodingã€‚\n\nå¦‚æœä½ å–œæ¬¢æˆ‘çš„é¡¹ç›®å¹¶æƒ³æ”¯æŒæˆ‘ï¼Œ[ç‚¹å‡»è¿™é‡Œ :heart:](https://github.com/sponsors/overtrue)\n\n## ç‰ˆæœ¬è¦æ±‚\n\nPHP >= 8.0.2\n\n## å®‰è£…\n\n```shell\ncomposer require \"overtrue/socialite\" -vvv\n```\n\n## ä½¿ç”¨æŒ‡å—\n\nç”¨æˆ·åªéœ€è¦åˆ›å»ºç›¸åº”é…ç½®å˜é‡ï¼Œç„¶åé€šè¿‡å·¥å…·ä¸ºå„ä¸ªå¹³å°åˆ›å»ºè®¤è¯åº”ç”¨ï¼Œå¹¶è½»æ¾è·å–è¯¥å¹³å°çš„ access_token å’Œç”¨æˆ·ç›¸å…³ä¿¡æ¯ã€‚å·¥å…·å®ç°é€»è¾‘è¯¦è§å‚ç…§å„å¤§å¹³å° OAuth2 æ–‡æ¡£ã€‚\n\nå·¥å…·ä½¿ç”¨å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š\n\n1. é…ç½®å¹³å°è®¾ç½®\n2. åˆ›å»ºå¯¹åº”å¹³å°åº”ç”¨\n3. è®©ç”¨æˆ·è·³è½¬è‡³å¹³å°è®¤è¯\n4. æœåŠ¡å™¨æ”¶åˆ°å¹³å°å›è°ƒ Codeï¼Œä½¿ç”¨ Code æ¢å–å¹³å°å¤„ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…æ‹¬ access_tokenï¼‰\n\nä¸º Laravel ç”¨æˆ·åˆ›å»ºçš„æ›´æ–¹ä¾¿çš„æ•´åˆçš„åŒ…ï¼š [overtrue/laravel-socialite](https://github.com/overtrue/laravel-socialite)\n\n`authorize.php`: è®©ç”¨æˆ·è·³è½¬è‡³å¹³å°è®¤è¯\n\n```php\n<?php\n\nuse Overtrue\\Socialite\\SocialiteManager;\n\n$config = [\n    'github' => [\n        'client_id'     => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect'      => 'http://localhost/socialite/callback.php',\n    ],\n];\n\n$socialite = new SocialiteManager($config);\n\n$url = $socialite->create('github')->redirect();\n\nreturn redirect($url);\n```\n\n`callback.php`:\n\n```php\n<?php\n\nuse Overtrue\\Socialite\\SocialiteManager;\n\n$config = [\n    'github' => [\n        'client_id' => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect' => 'http://localhost/socialite/callback.php',\n    ],\n];\n\n$socialite = new SocialiteManager($config);\n\n$code = request()->query('code');\n\n$user = $socialite->create('github')->userFromCode($code);\n\n$user->getId();        // 1472352\n$user->getNickname();  // \"overtrue\"\n$user->getUsername();  // \"overtrue\"\n$user->getName();      // \"å®‰æ­£è¶…\"\n$user->getEmail();     // \"anzhengchao@gmail.com\"\n...\n```\n\n## é…ç½®\n\nä¸ºæ¯ä¸ªå¹³å°è®¾ç½®ç›¸åŒçš„é”®å€¼å¯¹åå°±èƒ½å¼€ç®±å³ç”¨ï¼š`client_id`, `client_secret`, `redirect`.\n\nç¤ºä¾‹ï¼š\n\n```php\n$config = [\n  'weibo' => [\n    'client_id'     => 'your-app-id',\n    'client_secret' => 'your-app-secret',\n    'redirect'      => 'http://localhost/socialite/callback.php',\n  ],\n  'facebook' => [\n    'client_id'     => 'your-app-id',\n    'client_secret' => 'your-app-secret',\n    'redirect'      => 'http://localhost/socialite/callback.php',\n  ],\n];\n```\n\n### è‡ªå®šä¹‰åº”ç”¨å\n\nä½ å¯ä»¥ä½¿ç”¨ä»»æ„ä½ å–œæ¬¢çš„åå­—å¯¹æ¯ä¸ªå¹³å°è¿›è¡Œå‘½åï¼Œæ¯”å¦‚è¯´ `foo`ï¼Œ é‡‡ç”¨åˆ«åçš„æ–¹æ³•åéœ€è¦åœ¨é…ç½®ä¸­å¤šè®¾ç½®ä¸€ä¸ª `provider` é”®ï¼Œè¿™æ ·æ‰èƒ½å‘Šè¯‰å·¥å…·åŒ…å¦‚ä½•æ­£ç¡®æ‰¾åˆ°ä½ æƒ³è¦çš„ç¨‹åºï¼š\n\n```php\n$config = [\n  // ä¸º github åº”ç”¨èµ·åˆ«åä¸º foo\n    'foo' => [\n        'provider'    => 'github',  // <-- provider name\n        'client_id'   => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect'    => 'http://localhost/socialite/callback.php',\n    ],\n\n    // å¦å¤–ä¸€ä¸ªåå­—å«åš bar çš„ github åº”ç”¨\n    'bar' => [\n        'provider'    => 'github',  // <-- provider name\n        'client_id'   => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect'    => 'http://localhost/socialite/callback.php',\n    ],\n\n    //...\n];\n\n$socialite = new SocialiteManager($config);\n\n$appFoo = $socialite->create('foo');\n$appBar = $socialite->create('bar');\n```\n\n### æ‰©å±•è‡ªå®šä¹‰æœåŠ¡æä¾›ç¨‹åº\n\nä½ å¯ä»¥å¾ˆå®¹æ˜“çš„ä»è‡ªå®šä¹‰çš„æœåŠ¡æä¾›ä¸­åˆ›å»ºåº”ç”¨ï¼Œåªéœ€è¦éµå¾ªå¦‚ä¸‹ä¸¤ç‚¹ï¼š\n\n1. ä½¿ç”¨è‡ªå®šä¹‰åˆ›å»ºå™¨\n\n   å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œä¸º foo åº”ç”¨å®šä¹‰äº†æœåŠ¡æä¾›åï¼Œä½†æ˜¯å·¥å…·æœ¬èº«è¿˜æœªæ”¯æŒï¼Œæ‰€ä»¥ä½¿ç”¨åˆ›å»ºå™¨ `extend()`ï¼Œä»¥é—­åŒ…å‡½æ•°çš„å½¢å¼ä¸ºè¯¥æœåŠ¡æä¾›åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚\n\n```php\n$config = [\n    'foo' => [\n        'provider' => 'myprovider',  // <-- ä¸€ä¸ªå·¥å…·è¿˜æœªæ”¯æŒçš„æœåŠ¡æä¾›ç¨‹åº\n        'client_id' => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect' => 'http://localhost/socialite/callback.php',\n    ],\n];\n\n$socialite = new SocialiteManager($config);\n\n$socialite->extend('myprovider', function(array $config) {\n    return new MyCustomProvider($config);\n});\n\n$app = $socialite->create('foo');\n```\n\n1. ä½¿ç”¨æœåŠ¡æä¾›ç±»\n\n> [!IMPORTANT]  \n> \n> ğŸ‘‹ğŸ» ä½ çš„è‡ªå®šä¹‰æœåŠ¡æä¾›ç±»å¿…é¡»å®ç° `Overtrue\\Socialite\\Contracts\\ProviderInterface` æ¥å£\n\n```php\nclass MyCustomProvider implements \\Overtrue\\Socialite\\Contracts\\ProviderInterface\n{\n    //...\n}\n```\n\næ¥ä¸‹æ¥ä¸º `provider` è®¾ç½®è¯¥ç±»åè®©å·¥å…·å¯ä»¥æ‰¾åˆ°è¯¥ç±»å¹¶å®ä¾‹åŒ–ï¼š\n\n```php\n$config = [\n    'foo' => [\n        'provider'    => MyCustomProvider::class,  // <-- ç±»å\n        'client_id'   => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect'    => 'http://localhost/socialite/callback.php',\n    ],\n];\n\n$socialite = new SocialiteManager($config);\n$app = $socialite->create('foo');\n```\n\n## å¹³å°\n\nä¸åŒçš„å¹³å°æœ‰ä¸åŒçš„é…ç½®æ–¹æ³•ï¼Œä¸ºäº†ç¡®ä¿å·¥å…·çš„æ­£å¸¸è¿è¡Œï¼Œæ‰€ä»¥è¯·ç¡®ä¿ä½ æ‰€ä½¿ç”¨çš„å¹³å°çš„é…ç½®éƒ½æ˜¯å¦‚æœŸè®¾ç½®çš„ã€‚\n\n### [æ”¯ä»˜å®](https://opendocs.alipay.com/open/200/105310#s2)\n\nè¯·æŒ‰å¦‚ä¸‹æ–¹å¼é…ç½®\n\n```php\n$config = [\n  'alipay' => [\n    // è¿™ä¸ªé”®åè¿˜èƒ½åƒå®˜æ–¹æ–‡æ¡£é‚£æ ·å«åš 'app_id'\n    'client_id' => 'your-app-id',\n\n    // è¯·æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œåœ¨å®˜æ–¹ç®¡ç†åå°é…ç½® RSA2\n    // æ³¨æ„ï¼š è¿™æ˜¯ä½ è‡ªå·±çš„ç§é’¥\n    // æ³¨æ„ï¼š ä¸å…è®¸ç§é’¥å†…å®¹æœ‰å…¶ä»–å­—ç¬¦\n    // å»ºè®®ï¼š ä¸ºäº†ä¿è¯å®‰å…¨ï¼Œä½ å¯ä»¥å°†æ–‡æœ¬ä¿¡æ¯ä»ç£ç›˜æ–‡ä»¶ä¸­è¯»å–ï¼Œè€Œä¸æ˜¯åœ¨è¿™é‡Œæ˜æ–‡\n    'rsa_private_key' => 'your-rsa-private-key',\n\n    // ç¡®ä¿è¿™é‡Œçš„å€¼ä¸ä½ åœ¨æœåŠ¡åå°ç»‘å®šçš„åœ°å€å€¼ä¸€è‡´\n    // è¿™ä¸ªé”®åè¿˜èƒ½åƒå®˜æ–¹æ–‡æ¡£é‚£æ ·å«åš 'redirect_url'\n    'redirect' => 'http://localhost/socialite/callback.php',\n\n    // æ²™ç®±æ¨¡å¼æ¥å…¥åœ°å€è§ https://opendocs.alipay.com/open/220/105337#%E5%85%B3%E4%BA%8E%E6%B2%99%E7%AE%B1\n    'sandbox' => false,\n  ]\n  ...\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('alipay')->userFromCode('here is auth code');\n\n// è¯¦è§æ–‡æ¡£åé¢ \"User interface\"\n$user->getId();        // 1472352\n$user->getNickname();  // \"overtrue\"\n$user->getUsername();  // \"overtrue\"\n$user->getName();      // \"å®‰æ­£è¶…\"\n...\n```\n\næœ¬å·¥å…·æš‚æ—¶åªæ”¯æŒ RSA2 ä¸ªäººç§é’¥è®¤è¯æ–¹å¼ã€‚\n\n### [é’‰é’‰](https://ding-doc.dingtalk.com/doc#/serverapi3/mrugr3)\n\nå¦‚æ–‡æ¡£æ‰€ç¤º\n\n> æ³¨æ„ï¼šè¯¥å·¥å…·ä»…æ”¯æŒ QR code è¿æ¥åˆ°ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œç”¨æ¥è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆopeidï¼Œ unionid å’Œ nicknameï¼‰\n\n```php\n$config = [\n  'dingtalk' => [\n      // or 'app_id'\n      'client_id' => 'your app id',\n\n      // or 'app_secret'\n      'client_secret' => 'your app secret',\n\n      // or 'redirect_url'\n      'redirect' => 'redirect URL'\n  ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('dingtalk')->userFromCode('here is auth code');\n\n// è¯¦è§æ–‡æ¡£åé¢ \"User interface\"\n$user->getId();        // 1472352\n$user->getNickname();  // \"overtrue\"\n$user->getUsername();  // \"overtrue\"\n$user->getName();      // \"å®‰æ­£è¶…\"\n...\n```\n\n### [æŠ–éŸ³](https://open.douyin.com/platform/doc/OpenAPI-oauth2)\n\n> æ³¨æ„ï¼š ä½¿ç”¨æŠ–éŸ³æœåŠ¡æä¾›çš„æ—¶å€™ï¼Œå¦‚æœä½ æƒ³ç›´æ¥ä½¿ç”¨ access_token è·å–ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œè¯·å…ˆè®¾ç½® openidã€‚ å…ˆè°ƒç”¨ `withOpenId()` å†è°ƒç”¨ `userFromToken()`\n\n```php\n$config = [\n  'douyin' => [\n      'client_id' => 'your app id',\n\n      'client_secret' => 'your app secret',\n\n      'redirect' => 'redirect URL'\n  ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('douyin')->userFromCode('here is auth code');\n\n$user = $socialite->create('douyin')->withOpenId('openId')->userFromToken('here is the access token');\n```\n\n### [å¤´æ¡](https://open.douyin.com/platform/resource/docs/develop/permission/toutiao-or-xigua/OAuth2.0/)\n\n> æ³¨æ„ï¼š ä½¿ç”¨`å¤´æ¡`æœåŠ¡æä¾›çš„æ—¶å€™ï¼Œå¦‚æœä½ æƒ³ç›´æ¥ä½¿ç”¨ access_token è·å–ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œè¯·å…ˆè®¾ç½® openidã€‚ å…ˆè°ƒç”¨ `withOpenId()` å†è°ƒç”¨ `userFromToken()`\n\n```php\n$config = [\n  'toutiao' => [\n    'client_id' => 'your app id',\n    'client_secret' => 'your app secret',\n    'redirect' => 'redirect URL'\n  ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('toutiao')->userFromCode('here is auth code');\n$user = $socialite->create('toutiao')->withOpenId('openId')->userFromToken('here is the access token');\n```\n\n### [è¥¿ç“œ](https://open.douyin.com/platform/resource/docs/develop/permission/toutiao-or-xigua/OAuth2.0/)\n\n> æ³¨æ„ï¼š ä½¿ç”¨`è¥¿ç“œ`æœåŠ¡æä¾›çš„æ—¶å€™ï¼Œå¦‚æœä½ æƒ³ç›´æ¥ä½¿ç”¨ access_token è·å–ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œè¯·å…ˆè®¾ç½® openidã€‚ å…ˆè°ƒç”¨ `withOpenId()` å†è°ƒç”¨ `userFromToken()`\n\n```php\n$config = [\n  'xigua' => [\n    'client_id' => 'your app id',\n    'client_secret' => 'your app secret',\n    'redirect' => 'redirect URL'\n  ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('xigua')->userFromCode('here is auth code');\n$user = $socialite->create('xigua')->withOpenId('openId')->userFromToken('here is the access token');\n```\n\n### [ç™¾åº¦](https://developer.baidu.com/wiki/index.php?title=docs/oauth)\n\nå…¶ä»–é…ç½®æ²¡å•¥åŒºåˆ«ï¼Œåœ¨ç”¨æ³•ä¸Šï¼Œå¯ä»¥å¾ˆè½»æ˜“çš„é€‰æ‹©é‡å®šå‘ç™»å½•é¡µé¢çš„æ¨¡å¼ï¼Œé€šè¿‡ `withDisplay()`\n\n- **pageï¼š**å…¨å±å½¢å¼çš„æˆæƒé¡µé¢ (é»˜è®¤)ï¼Œé€‚ç”¨äº web åº”ç”¨ã€‚\n- **popup:** å¼¹æ¡†å½¢å¼çš„æˆæƒé¡µé¢ï¼Œé€‚ç”¨äºæ¡Œé¢è½¯ä»¶åº”ç”¨å’Œ web åº”ç”¨ã€‚\n- **dialog:** æµ®å±‚å½¢å¼çš„æˆæƒé¡µé¢ï¼Œåªèƒ½ç”¨äºç«™å†… web åº”ç”¨ã€‚\n- **mobile:** Iphone/Android ç­‰æ™ºèƒ½ç§»åŠ¨ç»ˆç«¯ä¸Šç”¨çš„æˆæƒé¡µé¢ï¼Œé€‚ç”¨äº Iphone/Android ç­‰æ™ºèƒ½ç§»åŠ¨ç»ˆç«¯ä¸Šçš„åº”ç”¨ã€‚\n- **tv:** ç”µè§†ç­‰è¶…å¤§æ˜¾ç¤ºå±ä½¿ç”¨çš„æˆæƒé¡µé¢ã€‚\n- **pad:** IPad/Android ç­‰æ™ºèƒ½å¹³æ¿ç”µè„‘ä½¿ç”¨çš„æˆæƒé¡µé¢ã€‚\n\n```php\n$authUrl = $socialite->create('baidu')->withDisplay('mobile')->redirect();\n\n```\n\n`popup` æ¨¡å¼æ˜¯å·¥å…·å†…é»˜è®¤çš„ä½¿ç”¨æ¨¡å¼ã€‚`basic` æ˜¯é»˜è®¤ä½¿ç”¨çš„ scopes å€¼ã€‚\n\n### [é£ä¹¦](https://open.feishu.cn/document/ukTMukTMukTM/uITNz4iM1MjLyUzM)\n\né€šè¿‡ä¸€äº›ç®€å•çš„æ–¹æ³•é…ç½®  app_ticket å°±èƒ½ä½¿ç”¨å†…éƒ¨åº”ç”¨æ¨¡å¼\n\n```php\n$config = [\n    'feishu' => [\n        // or 'app_id'\n        'client_id' => 'your app id',\n\n        // or 'app_secret'\n        'client_secret' => 'your app secret',\n\n        // or 'redirect_url'\n        'redirect' => 'redirect URL',\n\n        // å¦‚æœä½ æƒ³ä½¿ç”¨ä½¿ç”¨å†…éƒ¨åº”ç”¨çš„æ–¹å¼è·å– app_access_token\n        // å¯¹è¿™ä¸ªé”®è®¾ç½®äº† 'internal' å€¼é‚£ä¹ˆä½ å·²ç»å¼€å¯äº†å†…éƒ¨åº”ç”¨æ¨¡å¼\n        'app_mode' => 'internal'\n    ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$feishuDriver = $socialite->create('feishu');\n\n$feishuDriver->withInternalAppMode()->userFromCode('here is code');\n$feishuDriver->withDefaultMode()->withAppTicket('app_ticket')->userFromCode('here is code');\n```\n\n### [Lark](https://open.larksuite.com/document/ukTMukTMukTM/uITNz4iM1MjLyUzM)\n\né€šè¿‡ä¸€äº›ç®€å•çš„æ–¹æ³•é…ç½®  app_ticket å°±èƒ½ä½¿ç”¨å†…éƒ¨åº”ç”¨æ¨¡å¼\n\n```php\n$config = [\n    'lark' => [\n        // or 'app_id'\n        'client_id' => 'your app id',\n\n        // or 'app_secret'\n        'client_secret' => 'your app secret',\n\n        // or 'redirect_url'\n        'redirect' => 'redirect URL',\n\n        // å¦‚æœä½ æƒ³ä½¿ç”¨ä½¿ç”¨å†…éƒ¨åº”ç”¨çš„æ–¹å¼è·å– app_access_token\n        // å¯¹è¿™ä¸ªé”®è®¾ç½®äº† 'internal' å€¼é‚£ä¹ˆä½ å·²ç»å¼€å¯äº†å†…éƒ¨åº”ç”¨æ¨¡å¼\n        'app_mode' => 'internal'\n    ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$larkDriver = $socialite->create('lark');\n\n$larkDriver->withInternalAppMode()->userFromCode('here is code');\n$larkDriver->withDefaultMode()->withAppTicket('app_ticket')->userFromCode('here is code');\n```\n\n### [æ·˜å®](https://open.taobao.com/doc.htm?docId=102635&docType=1&source=search)\n\nå…¶ä»–é…ç½®ä¸å…¶ä»–å¹³å°çš„ä¸€æ ·ï¼Œä½ èƒ½é€‰æ‹©ä½ æƒ³è¦å±•ç¤ºçš„é‡å®šå‘é¡µé¢ç±»å‹é€šè¿‡ä½¿ç”¨ `withView()`\n\n```php\n$authUrl = $socialite->create('taobao')->withView('wap')->redirect();\n```\n\n`web` æ¨¡å¼æ˜¯å·¥å…·é»˜è®¤ä½¿ç”¨çš„å±•ç¤ºæ–¹å¼ï¼Œ `user_info` æ˜¯é»˜è®¤ä½¿ç”¨çš„ scopes èŒƒå›´å€¼ã€‚\n\n### [å¾®ä¿¡](https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/Official_Accounts/official_account_website_authorization.html)\n\næˆ‘ä»¬æ”¯æŒå¼€æ”¾å¹³å°ä»£è¡¨å…¬ä¼—å·è¿›è¡Œç¬¬ä¸‰æ–¹å¹³å°ç½‘é¡µæˆæƒã€‚\n\nä½ åªéœ€è¦åƒä¸‹é¢è¿™æ ·è¾“å…¥ä½ çš„é…ç½®ã€‚å®˜æ–¹è´¦å·ä¸éœ€è¦æˆæƒã€‚\n\n```php\n...\n[\n    'wechat' =>\n        [\n            'client_id'   => 'client_id',\n            'client_secret' => 'client_secret',\n            'redirect'    => 'redirect-url',\n\n            // å¼€æ”¾å¹³å° - ç¬¬ä¸‰æ–¹å¹³å°æ‰€éœ€\n            'component' => [\n                // or 'app_id', 'component_app_id' as key\n                'id' => 'component-app-id',\n                // or 'app_token', 'access_token', 'component_access_token' as key\n                'token' => 'component-access-token',\n            ]\n        ]\n],\n...\n```\n\n### [Coding](https://coding.net/help/openapi#oauth)\n\næ‚¨éœ€è¦é¢å¤–é…ç½® `team_url` ä¸ºæ‚¨çš„å›¢é˜ŸåŸŸåï¼Œä¾‹å¦‚ï¼š\n\n```php\n$config = [\n    'coding' => [\n        'team_url' => 'https://{your-team}.coding.net',\n        'client_id' => 'your app id',\n        'client_secret' => 'your app secret',\n        'redirect' => 'redirect URL',\n    ]\n];\n```\n\n### [PayPal](https://developer.paypal.com/docs/log-in-with-paypal/)\n\næ‚¨å¯èƒ½éœ€è¦è®¾ç½®responseTypeï¼Œå¯ä»¥ä½¿ç”¨`withResponseType`å‡½æ•°è¿›è¡Œè®¾ç½®ï¼Œé»˜è®¤æ˜¯`code` è¿˜å¯ä»¥è®¾ç½®ä¸º`id_token` æˆ–`code` & `id_token`\n\n> <https://developer.paypal.com/docs/log-in-with-paypal/integrate/generate-button/>\n\n```php\n$config = [\n    'paypal' => [\n        'client_id'     => 'AT******************',\n        'client_secret' => 'EK**************',\n        'sandbox'      => false,\n        'redirect_url'=>\"nativexo://paypalpay\",\n    ],\n];\n```\n\n## å…¶ä»–ä¸€äº›æŠ€å·§\n\n### Scopes\n\nåœ¨é‡å®šå‘ç”¨æˆ·ä¹‹å‰ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ `scopes()` æ–¹æ³•åœ¨è¯·æ±‚ä¸Šè®¾ç½® â€œèŒƒå›´â€ã€‚æ­¤æ–¹æ³•å°†è¦†ç›–æ‰€æœ‰ç°æœ‰çš„ä½œç”¨åŸŸï¼š\n\n```php\n$response = $socialite->create('github')\n                ->scopes(['scope1', 'scope2'])->redirect();\n```\n\n### Redirect URL\n\nä½ ä¹Ÿå¯ä»¥åŠ¨æ€è®¾ç½®' redirect_uri 'ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ¥æ”¹å˜ `redirect_uri` URL:\n\n```php\n$url = 'your callback url.';\n\n$socialite->redirect($url);\n// or\n$socialite->withRedirectUrl($url)->redirect();\n```\n\n### State\n\nä½ çš„åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ä¸€ä¸ªçŠ¶æ€å‚æ•°æ¥ç¡®ä¿å“åº”å±äºåŒä¸€ä¸ªç”¨æˆ·å‘èµ·çš„è¯·æ±‚ï¼Œä»è€Œé˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€  (CSFR) æ”»å‡»ã€‚å½“æ¶æ„æ”»å‡»è€…æ¬ºéª—ç”¨æˆ·æ‰§è¡Œä¸éœ€è¦çš„æ“ä½œ (åªæœ‰ç”¨æˆ·æœ‰æƒåœ¨å—ä¿¡ä»»çš„ web åº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œ) æ—¶ï¼Œå°±ä¼šå‘ç”Ÿ CSFR æ”»å‡»ï¼Œæ‰€æœ‰æ“ä½œéƒ½å°†åœ¨ä¸æ¶‰åŠæˆ–è­¦å‘Šç”¨æˆ·çš„æƒ…å†µä¸‹å®Œæˆã€‚\n\nè¿™é‡Œæœ‰ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œè¯´æ˜äº†å¦‚ä½•æä¾›çŠ¶æ€å¯ä»¥è®©ä½ çš„åº”ç”¨ç¨‹åºæ›´å®‰å…¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼šè¯ ID ä½œä¸ºçŠ¶æ€å‚æ•°ï¼Œä½†æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨æ‚¨æƒ³è¦ä¸ºçŠ¶æ€åˆ›å»ºå€¼çš„ä»»ä½•é€»è¾‘ã€‚\n\n### å¸¦ç€ `state` å‚æ•°çš„é‡å®šå‘\n\n```php\n<?php\nsession_start();\n\n$config = [\n    //...\n];\n\n// Assign to state the hashing of the session ID\n$state = hash('sha256', session_id());\n\n$socialite = new SocialiteManager($config);\n\n$url = $socialite->create('github')->withState($state)->redirect();\n\nreturn redirect($url);\n```\n\n### æ£€éªŒå›è°ƒçš„ `state`\n\nä¸€æ—¦ç”¨æˆ·æˆæƒä½ çš„åº”ç”¨ç¨‹åºï¼Œç”¨æˆ·å°†è¢«é‡å®šå‘å›ä½ çš„åº”ç”¨ç¨‹åºçš„ redirect_uriã€‚OAuth æœåŠ¡å™¨å°†ä¸åŠ ä¿®æ”¹åœ°è¿”å›çŠ¶æ€å‚æ•°ã€‚æ£€æŸ¥ redirect_uri ä¸­æä¾›çš„çŠ¶æ€æ˜¯å¦ä¸åº”ç”¨ç¨‹åºç”Ÿæˆçš„çŠ¶æ€ç›¸åŒ¹é…ï¼š\n\n```php\n<?php\nsession_start();\n\n$state = request()->query('state');\n$code = request()->query('code');\n\n// Check the state received with current session id\nif ($state != hash('sha256', session_id())) {\n    exit('State does not match!');\n}\n$user = $socialite->create('github')->userFromCode($code);\n\n// authorized\n```\n\n[æŸ¥çœ‹æ›´å¤šå…³äº `state` å‚æ•°çš„æ–‡æ¡£](https://auth0.com/docs/protocols/oauth2/oauth-state)\n\n### å…¶ä»–çš„ä¸€äº›å‚æ•°\n\nè¦åœ¨è¯·æ±‚ä¸­åŒ…å«ä»»ä½•å¯é€‰å‚æ•°ï¼Œè°ƒç”¨ `with()` æ–¹æ³•ä¼ å…¥ä¸€ä¸ªä½ æƒ³è¦è®¾ç½®çš„å…³è”æ•°ç»„ï¼š\n\n```php\n$response = $socialite->create('google')\n                    ->with(['hd' => 'example.com'])->redirect();\n```\n\n## User interface\n\n### æ ‡å‡†çš„ user api\n\n```php\n$user = $socialite->create('github')->userFromCode($code);\n```\n\n```json\n{\n  \"id\": 1472352,\n  \"nickname\": \"overtrue\",\n  \"name\": \"å®‰æ­£è¶…\",\n  \"email\": \"anzhengchao@gmail.com\",\n  \"avatar\": \"https://avatars.githubusercontent.com/u/1472352?v=3\",\n  \"raw\": {\n    \"login\": \"overtrue\",\n    \"id\": 1472352,\n    \"avatar_url\": \"https://avatars.githubusercontent.com/u/1472352?v=3\",\n    \"gravatar_id\": \"\",\n    \"url\": \"https://api.github.com/users/overtrue\",\n    \"html_url\": \"https://github.com/overtrue\",\n    ...\n  },\n  \"token_response\": {\n    \"access_token\": \"5b1dc56d64fffbd052359f032716cc4e0a1cb9a0\",\n    \"token_type\": \"bearer\",\n    \"scope\": \"user:email\"\n  }\n}\n```\n\nä½ å¯ä»¥åƒè¿™æ ·ä»¥æ•°ç»„é”®çš„å½¢å¼è·å– user å±æ€§ï¼š\n\n```php\n$user['id'];        // 1472352\n$user['nickname'];  // \"overtrue\"\n$user['name'];      // \"å®‰æ­£è¶…\"\n$user['email'];     // \"anzhengchao@gmail.com\"\n...\n```\n\næˆ–è€…ä½¿ç”¨è¯¥ `User` å¯¹è±¡çš„æ–¹æ³•ï¼š\n\n```php\nmixed   $user->getId();\n?string $user->getNickname();\n?string $user->getName();\n?string $user->getEmail();\n?string $user->getAvatar();\n?string $user->getRaw();\n?string $user->getAccessToken();\n?string $user->getRefreshToken();\n?int    $user->getExpiresIn();\n?array  $user->getTokenResponse();\n\n\n```\n\n### ä» OAuth API å“åº”ä¸­å–å¾—åŸå§‹æ•°æ®\n\n`$user->getRaw()` æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª **array**ã€‚\n\n### å½“ä½ ä½¿ç”¨ userFromCode() æƒ³è¦è·å– token å“åº”çš„åŸå§‹æ•°æ®\n\n`$user->getTokenResponse()` æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª **array** é‡Œé¢æ˜¯å“åº”ä»è·å– token æ—¶å€™ API è¿”å›çš„å“åº”ã€‚\n\n> æ³¨æ„ï¼šå½“ä½ ä½¿ç”¨ `userFromCode()` æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•åªè¿”å›ä¸€ä¸ª **æœ‰æ•ˆçš„æ•°ç»„**ï¼Œå¦åˆ™å°†è¿”å› **null**ï¼Œå› ä¸º `userFromToken()` æ²¡æœ‰ token çš„ HTTP å“åº”ã€‚\n\n### é€šè¿‡ access token è·å–ç”¨æˆ·ä¿¡æ¯\n\n```php\n$accessToken = 'xxxxxxxxxxx';\n$user = $socialite->userFromToken($accessToken);\n```\n\n## Enjoy it! :heart:\n\n## å‚ç…§\n\n- [Alipay - ç”¨æˆ·ä¿¡æ¯æˆæƒ](https://opendocs.alipay.com/open/289/105656)\n- [DingTalk - æ‰«ç ç™»å½•ç¬¬ä¸‰æ–¹ç½‘ç«™](https://ding-doc.dingtalk.com/doc#/serverapi3/mrugr3)\n- [Google - OpenID Connect](https://developers.google.com/identity/protocols/OpenIDConnect)\n- [Github - Authorizing OAuth Apps](https://developer.github.com/apps/building-oauth-apps/authorizing-oauth-apps/)\n- [Facebook - Graph API](https://developers.facebook.com/docs/graph-api)\n- [Linkedin - Authenticating with OAuth 2.0](https://developer.linkedin.com/docs/oauth2)\n- [å¾®åš - OAuth 2.0 æˆæƒæœºåˆ¶è¯´æ˜](http://open.weibo.com/wiki/%E6%8E%88%E6%9D%83%E6%9C%BA%E5%88%B6%E8%AF%B4%E6%98%8E)\n- [QQ - OAuth 2.0 ç™»å½• QQ](http://wiki.connect.qq.com/oauth2-0%E7%AE%80%E4%BB%8B)\n- [è…¾è®¯äº‘ - OAuth2.0](https://cloud.tencent.com/document/product/306/37730#.E6.8E.A5.E5.85.A5.E8.85.BE.E8.AE.AF.E4.BA.91-oauth)\n- [å¾®ä¿¡å…¬ä¼—å¹³å° - OAuth æ–‡æ¡£](http://mp.weixin.qq.com/wiki/9/01f711493b5a02f24b04365ac5d8fd95.html)\n- [å¾®ä¿¡å¼€æ”¾å¹³å° - ç½‘ç«™åº”ç”¨å¾®ä¿¡ç™»å½•å¼€å‘æŒ‡å—](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419316505&token=&lang=zh_CN)\n- [å¾®ä¿¡å¼€æ”¾å¹³å° - ä»£å…¬ä¼—å·å‘èµ·ç½‘é¡µæˆæƒ](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419318590&token=&lang=zh_CN)\n- [ä¼ä¸šå¾®ä¿¡ - OAuth æ–‡æ¡£](https://open.work.weixin.qq.com/api/doc/90000/90135/91020)\n- [ä¼ä¸šå¾®ä¿¡ç¬¬ä¸‰æ–¹åº”ç”¨ - OAuth æ–‡æ¡£](https://open.work.weixin.qq.com/api/doc/90001/90143/91118)\n- [è±†ç“£ - OAuth 2.0 æˆæƒæœºåˆ¶è¯´æ˜](http://developers.douban.com/wiki/?title=oauth2)\n- [æŠ–éŸ³ - ç½‘ç«™åº”ç”¨å¼€å‘æŒ‡å—](http://open.douyin.com/platform/doc)\n- [é£ä¹¦ - æˆæƒè¯´æ˜](https://open.feishu.cn/document/ukTMukTMukTM/uMTNz4yM1MjLzUzM)\n- [Lark - æˆæƒè¯´æ˜](https://open.larksuite.com/document/ukTMukTMukTM/uMTNz4yM1MjLzUzM)\n- [Tapd - ç”¨æˆ·æˆæƒè¯´æ˜](https://www.tapd.cn/help/show#1120003271001000093)\n- [Line - OAuth 2.0](https://developers.line.biz/en/docs/line-login/integrate-line-login/)\n- [Gitee - OAuthæ–‡æ¡£](https://gitee.com/api/v5/oauth_doc#/)\n- [PayPal - OAuthæ–‡æ¡£](https://developer.paypal.com/docs/log-in-with-paypal/)\n\n## PHP æ‰©å±•åŒ…å¼€å‘\n\n> æƒ³çŸ¥é“å¦‚ä½•ä»é›¶å¼€å§‹æ„å»º PHP æ‰©å±•åŒ…ï¼Ÿ\n>\n> è¯·å…³æ³¨æˆ‘çš„å®æˆ˜è¯¾ç¨‹ï¼Œæˆ‘ä¼šåœ¨æ­¤è¯¾ç¨‹ä¸­åˆ†äº«ä¸€äº›æ‰©å±•å¼€å‘ç»éªŒ â€”â€” [ã€ŠPHP æ‰©å±•åŒ…å®æˆ˜æ•™ç¨‹ - ä»å…¥é—¨åˆ°å‘å¸ƒã€‹](https://learnku.com/courses/creating-package)\n\n## License\n\nMIT\n"
        },
        {
          "name": "README_EN.md",
          "type": "blob",
          "size": 21.265625,
          "content": "# Socialite\n\nSocialite is an [OAuth2](https://oauth.net/2/)  Authentication tool. It is inspired by [laravel/socialite](https://github.com/laravel/socialite), You can easily use it in any PHP project.  [ä¸­æ–‡æ–‡æ¡£](/README.md)\n\n[![GitHub release (latest SemVer)](https://img.shields.io/github/v/release/overtrue/socialite?style=flat-square)](https://github.com/overtrue/socialite/releases)\n[![GitHub License](https://img.shields.io/github/license/overtrue/socialite?style=flat-square)](https://github.com/overtrue/socialite/blob/master/LICENSE)\n[![Packagist Downloads](https://img.shields.io/packagist/dt/overtrue/socialite?style=flat-square)](https://packagist.org/packages/overtrue/socialite)\n\n[![Sponsor me](https://github.com/overtrue/overtrue/blob/master/sponsor-me-button-s.svg?raw=true)](https://github.com/sponsors/overtrue)\n\nThis tool now supports platforms such as Facebook, GitHub, Google, Figma, LinkedIn, Outlook, QQ, Tapd, Alipay, Taobao, Baidu, DingTalk, Weibo, WeChat, Douyin, Feishu, Lark, Douban, WeWork, Tencent Cloud, Line, Gitee and Coding.\n\nå¦‚æœä½ å–œæ¬¢æˆ‘çš„é¡¹ç›®å¹¶æƒ³æ”¯æŒæˆ‘ï¼Œ[ç‚¹å‡»è¿™é‡Œ :heart:](https://github.com/sponsors/overtrue)\n\n# Requirement\n\n```\nPHP >= 8.0.2\n```\n# Installation\n\n```shell\n$ composer require \"overtrue/socialite\" -vvv\n```\n\n# Usage\n\nUsers just need to create the corresponding configuration variables, then create the authentication application for each platform through the tool, and easily obtain the access_token and user  information for that platform. The implementation logic of the tool is referred to OAuth2 documents of major platforms for details.\n\nThe tool is used in the following steps:\n\n1. Configurate platform config\n2. Use this tool to create a platform application\n3. Let the user redirect to platform authentication\n4. The server receives a Code callback from the platform, and uses the Code to exchange the user information on the platform (including access_token).\n\nPackages created for Laravel users are easier to integrate:  [overtrue/laravel-socialite](https://github.com/overtrue/laravel-socialite)\n\n`authorize.php`:\n\n```php\n<?php\n\nuse Overtrue\\Socialite\\SocialiteManager;\n\n$config = [\n    'github' => [\n        'client_id'     => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect'      => 'http://localhost/socialite/callback.php',\n    ],\n];\n\n$socialite = new SocialiteManager($config);\n\n$url = $socialite->create('github')->redirect();\n\nreturn redirect($url); \n```\n\n`callback.php`:\n\n```php\n<?php\n\nuse Overtrue\\Socialite\\SocialiteManager;\n\n$config = [\n    'github' => [\n        'client_id' => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect' => 'http://localhost/socialite/callback.php',\n    ],\n];\n\n$socialite = new SocialiteManager($config);\n\n$code = request()->query('code');\n\n$user = $socialite->create('github')->userFromCode($code);\n\n$user->getId();        // 1472352\n$user->getNickname();  // \"overtrue\"\n$user->getUsername();  // \"overtrue\"\n$user->getName();      // \"å®‰æ­£è¶…\"\n$user->getEmail();     // \"anzhengchao@gmail.com\"\n...\n```\n\n## Configuration\n\nEach create uses the same configuration keys: `client_id`, `client_secret`, `redirect`.\n\nExample:\n```php\n$config = [\n  'weibo' => [\n    'client_id'     => 'your-app-id',\n    'client_secret' => 'your-app-secret',\n    'redirect'      => 'http://localhost/socialite/callback.php',\n  ],\n  'facebook' => [\n    'client_id'     => 'your-app-id',\n    'client_secret' => 'your-app-secret',\n    'redirect'      => 'http://localhost/socialite/callback.php',\n  ],\n];\n```\n\n### Custom app name\n\nYou can use any name you like as the name of the application, such as `foo`, and set provider using `provider` keyï¼š\n\n```php\n$config = [\n    'foo' => [\n        'provider' => 'github',  // <-- provider name\n        'client_id' => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect' => 'http://localhost/socialite/callback.php',\n    ],\n       \n    // another github app\n    'bar' => [\n        'provider' => 'github',  // <-- provider name\n        'client_id' => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect' => 'http://localhost/socialite/callback.php',\n    ],\n    //...\n];\n```\n\n### Extends custom provider\n\nYou can create application from you custom provider easilyï¼Œyou have to ways to do this: \n\n1. Using custom creator:\n   As shown in the following code, the service provider name is defined for the Foo application, but the tool itself does not support it, so use the creator `extend()` to create an instance of the service provider as a closure function.\n\n```php\n$config = [\n    'foo' => [\n        'provider' => 'myprovider',  // <-- provider name\n        'client_id' => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect' => 'http://localhost/socialite/callback.php',\n    ],\n];\n\n$socialite = new SocialiteManager($config);\n   \n$socialite->extend('myprovider', function(array $config) {\n    return new MyCustomProvider($config);\n});\n\n$app = $socialite->create('foo');\n```\n\n2. Using provider:\n\n>ğŸ‘‹ğŸ» Your custom provider class must be implements of `Overtrue\\Socialite\\Contracts\\ProviderInterface`.\n\n```php\nclass MyCustomProvider implements \\Overtrue\\Socialite\\Contracts\\ProviderInterface \n{\n    //...\n}\n```\n\nthen set `provider` with the class name:\n\n```php\n$config = [\n    'foo' => [\n        'provider' => MyCustomProvider::class,  // <-- class name\n        'client_id' => 'your-app-id',\n        'client_secret' => 'your-app-secret',\n        'redirect' => 'http://localhost/socialite/callback.php',\n    ],\n];\n\n$socialite = new SocialiteManager($config);\n$app = $socialite->create('foo');\n```\n\n\n\n## Platform\n\nDifferent platforms have different configuration methods, so please check the platform Settings you are using.\n\n### [Alipay](https://opendocs.alipay.com/open/200/105310#s2)\n\nYou must have the following configuration.\n```php\n$config = [\n  'alipay' => [\n    // This can also be named as 'app_id' like the official documentation.\n    'client_id' => 'your-app-id', \n \n    // Please refer to the official documentation, in the official management background configuration RSA2.\n    // Note: This is your own private key.\n    // Note: Do not allow the private key content to have extra characters.\n    // Recommendation: For security, you can read directly from the file. But here as long as the value, please remember to remove the head and tail of the decoration.\n    'rsa_private_key' => 'your-rsa-private-key',\n\n    // Be sure to set this value and make sure that it is the same address value as set in the official admin system.\n    // This can also be named as 'redirect_url' like the official documentation.\n    'redirect' => 'http://localhost/socialite/callback.php',\n  ]\n  ...\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('alipay')->userFromCode('here is auth code');\n\n// See this documents \"User interface\"\n$user->getId();        // 1472352\n$user->getNickname();  // \"overtrue\"\n$user->getUsername();  // \"overtrue\"\n$user->getName();      // \"å®‰æ­£è¶…\"\n...\n```\nOnly RSA2 personal private keys are supported, so stay tuned if you want to log in with a certificate.\n\n### [DingTalk](https://ding-doc.dingtalk.com/doc#/serverapi3/mrugr3)\n\nFollow the documentation and configure it like following.\n\n> Note: It only supported QR code access to third-part websites. i.e exchange for user information(opendid, unionid and nickname)\n\n```php\n$config = [\n  'dingtalk' => [\n      // or 'app_id'\n      'client_id' => 'your app id',\n\n      // or 'app_secret' \n      'client_secret' => 'your app secret',\n\n      // or 'redirect_url'\n      'redirect' => 'redirect URL'\n  ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('dingtalk')->userFromCode('here is auth code');\n\n// See this documents \"User interface\"\n$user->getId();        // 1472352\n$user->getNickname();  // \"overtrue\"\n$user->getUsername();  // \"overtrue\"\n$user->getName();      // \"å®‰æ­£è¶…\"\n...\n```\n\n### [Douyin](https://open.douyin.com/platform/doc/OpenAPI-oauth2)\n\n> Noteï¼š using the Douyin create that if you get user information directly using access token, set up the openid first. the openid can be obtained by code when access is obtained, so call `userFromCode()` automatically configured for you openid, if call `userFromToken()` first call `withOpenId()`\n\n```php\n$config = [\n  'douyin' => [\n      'client_id' => 'your app id',\n\n      'client_secret' => 'your app secret',\n\n      'redirect' => 'redirect URL'\n  ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('douyin')->userFromCode('here is auth code');\n\n$user = $socialite->create('douyin')->withOpenId('openId')->userFromToken('here is the access token');\n```\n\n### [TouTiao](https://open.douyin.com/platform/resource/docs/develop/permission/toutiao-or-xigua/OAuth2.0/)\n\n> Noteï¼š using the `toutiao` create that if you get user information directly using access token, set up the openid first. the openid can be obtained by code when access is obtained, so call `userFromCode()` automatically configured for you openid, if call `userFromToken()` first call `withOpenId()`\n\n```php\n$config = [\n  'toutiao' => [\n    'client_id' => 'your app id',\n    'client_secret' => 'your app secret',\n    'redirect' => 'redirect URL'\n  ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('toutiao')->userFromCode('here is auth code');\n$user = $socialite->create('toutiao')->withOpenId('openId')->userFromToken('here is the access token');\n```\n\n### [XiGua](https://open.douyin.com/platform/resource/docs/develop/permission/toutiao-or-xigua/OAuth2.0/)\n\n> Noteï¼š using the `xigua` create that if you get user information directly using access token, set up the openid first. the openid can be obtained by code when access is obtained, so call `userFromCode()` automatically configured for you openid, if call `userFromToken()` first call `withOpenId()`\n\n```php\n$config = [\n  'xigua' => [\n    'client_id' => 'your app id',\n    'client_secret' => 'your app secret',\n    'redirect' => 'redirect URL'\n  ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$user = $socialite->create('xigua')->userFromCode('here is auth code');\n$user = $socialite->create('xigua')->withOpenId('openId')->userFromToken('here is the access token');\n```\n\n\n### [Baidu](https://developer.baidu.com/wiki/index.php?title=docs/oauth)\n\nYou can choose the form you want display by using `withDisplay()`.\n\n- **page**\n- **popup**\n- **dialog**\n- **mobile**\n- **tv**\n- **pad**\n\n```php\n$authUrl = $socialite->create('baidu')->withDisplay('mobile')->redirect();\n\n```\n`popup` mode is the default setting with display. `basic` is the default with scopes.\n\n### [Feishu](https://open.feishu.cn/document/ukTMukTMukTM/uITNz4iM1MjLyUzM)\n\nSome simple way to use by internal app mode and config app_ticket.\n\n```php\n$config = [\n    'feishu' => [\n        // or 'app_id'\n        'client_id' => 'your app id',\n\n        // or 'app_secret' \n        'client_secret' => 'your app secret',\n\n        // or 'redirect_url'\n        'redirect' => 'redirect URL',\n\n        // if you want to use internal way to get app_access_token\n        // set this key by 'internal' then you already turn on the internal app mode \n        'app_mode' => 'internal'\n    ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$feishuDriver = $socialite->create('feishu');\n\n$feishuDriver->withInternalAppMode()->userFromCode('here is code');\n$feishuDriver->withDefaultMode()->withAppTicket('app_ticket')->userFromCode('here is code');\n```\n\n### [Lark](https://open.larksuite.com/document/ukTMukTMukTM/uITNz4iM1MjLyUzM)\n\nSome simple way to use by internal app mode and config app_ticket.\n\n```php\n$config = [\n    'lark' => [\n        // or 'app_id'\n        'client_id' => 'your app id',\n\n        // or 'app_secret' \n        'client_secret' => 'your app secret',\n\n        // or 'redirect_url'\n        'redirect' => 'redirect URL',\n\n        // if you want to use internal way to get app_access_token\n        // set this key by 'internal' then you already turn on the internal app mode \n        'app_mode' => 'internal'\n    ]\n];\n\n$socialite = new SocialiteManager($config);\n\n$larkDriver = $socialite->create('lark');\n\n$larkDriver->withInternalAppMode()->userFromCode('here is code');\n$larkDriver->withDefaultMode()->withAppTicket('app_ticket')->userFromCode('here is code');\n```\n\n### [Taobao](https://open.taobao.com/doc.htm?docId=102635&docType=1&source=search)\n\nYou can choose the form you want display by using `withView()`.\n\n```php\n$authUrl = $socialite->create('taobao')->withView('wap')->redirect();\n```\n`web` mode is the default setting with display. `user_info` is the default with scopes.\n\n### [WeChat](https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/Official_Accounts/official_account_website_authorization.html)\n\nWe support Open Platform Third-party Platform webpage authorizations on behalf of Official Account.\n\nYou just need input your config like below config. Official Accounts authorizations only doesn't need.\n```php\n...\n[\n    'wechat' =>\n        [\n            'client_id' => 'client_id',\n            'client_secret' => 'client_secret',\n            'redirect' => 'redirect-url',\n\n            // Open Platform - Third-party Platform Need\n            'component' => [\n                'id' => 'component-app-id',\n                'token' => 'component-access-token', // or Using a callable as value.\n            ]\n        ]\n],\n...\n```\n\n### [Coding](https://coding.net/help/openapi#oauth)\n\nPlease add the `team_url` parameter to the configuration file to specify the team domain name as follows:\n\n```php\n$config = [\n    'coding' => [\n        'team_url' => 'https://{your-team}.coding.net',\n        'client_id' => 'your app id',\n        'client_secret' => 'your app secret',\n        'redirect' => 'redirect URL',\n    ]\n];\n```\n\n### [PayPal](https://developer.paypal.com/docs/log-in-with-paypal/)\n\nYou may need to set the responseType, which can be set using the `withResponseType` function. The default is `code` and can also be set to `id_token` or `code` & `id_token`\n\n> https://developer.paypal.com/docs/log-in-with-paypal/integrate/generate-button/\n\n\n```php\n$config = [\n    'paypal' => [\n        'client_id'     => 'AT******************',\n        'client_secret' => 'EK**************',\n        'sandbox'      => false,\n        'redirect_url'=>\"nativexo://paypalpay\",\n    ],\n];\n```\n\n\n\n## Some Skill\n\n### Scopes\n\nBefore redirecting the user, you may also set \"scopes\" on the request using the `scopes()` method. This method will overwrite all existing scopes:\n\n```php\n$response = $socialite->create('github')\n                ->scopes(['scope1', 'scope2'])->redirect();\n```\n\n### Redirect URL\n\nYou may also want to dynamically set `redirect_uri`ï¼Œyou can use the following methods to change the `redirect_uri` URL:\n\n```php\n$url = 'your callback url.';\n\n$socialite->redirect($url);\n// or\n$socialite->withRedirectUrl($url)->redirect();\n```\n\n### State\n\nYour app can use a state parameter for making sure the response belongs to a request initiated by the same user, therefore preventing cross-site request forgery (CSFR) attacks. A CSFR attack occurs when a malicious attacker tricks the user into performing unwanted actions that only the user is authorized to perform on a trusted web application, and all will be done without involving or alerting the user.\n\nHere's the simplest example of how providing the state can make your app more secure. in this example, we use the session ID as the state parameter, but you can use whatever logic you want to create value for the state.\n\n### Redirect with `state` parameter \n```php\n<?php\nsession_start();\n \n$config = [\n    //...\n];\n\n// Assign to state the hashing of the session ID\n$state = hash('sha256', session_id());\n\n$socialite = new SocialiteManager($config);\n\n$url = $socialite->create('github')->withState($state)->redirect();\n\nreturn redirect($url); \n```\n\n### Validate the callback `state`\n\nOnce the user has authorized your app, the user will be redirected back to your app's redirect_uri. The OAuth server will return the state parameter unchanged. Check if the state provided in the redirect_uri matches the state generated by your app:\n\n```php\n<?php\nsession_start();\n \n$state = request()->query('state');\n$code = request()->query('code');\n \n// Check the state received with current session id\nif ($state != hash('sha256', session_id())) {\n    exit('State does not match!');\n}\n$user = $socialite->create('github')->userFromCode($code);\n\n// authorized\n```\n\n[Read more about `state` parameter](https://auth0.com/docs/protocols/oauth2/oauth-state)\n\n### Additional parameters\n\nTo include any optional parameters in the request, call the `with()` method with an associative array:\n\n```php\n$response = $socialite->create('google')\n                    ->with(['hd' => 'example.com'])->redirect();\n```\n\n\n## User interface\n\n### Standard user api:\n\n```php\n$user = $socialite->create('github')->userFromCode($code);\n```\n\n```json\n{\n  \"id\": 1472352,\n  \"nickname\": \"overtrue\",\n  \"name\": \"å®‰æ­£è¶…\",\n  \"email\": \"anzhengchao@gmail.com\",\n  \"avatar\": \"https://avatars.githubusercontent.com/u/1472352?v=3\",\n  \"raw\": {\n    \"login\": \"overtrue\",\n    \"id\": 1472352,\n    \"avatar_url\": \"https://avatars.githubusercontent.com/u/1472352?v=3\",\n    \"gravatar_id\": \"\",\n    \"url\": \"https://api.github.com/users/overtrue\",\n    \"html_url\": \"https://github.com/overtrue\",\n    ...\n  },\n  \"token_response\": {\n    \"access_token\": \"5b1dc56d64fffbd052359f032716cc4e0a1cb9a0\",\n    \"token_type\": \"bearer\",\n    \"scope\": \"user:email\"\n  }\n}\n```\n\nYou can fetch the user attribute as a array keys like these:\n\n```php\n$user['id'];        // 1472352\n$user['nickname'];  // \"overtrue\"\n$user['name'];      // \"å®‰æ­£è¶…\"\n$user['email'];     // \"anzhengchao@gmail.com\"\n...\n```\n\nOr using the method:\n\n```php\nmixed   $user->getId();\n?string $user->getNickname();\n?string $user->getName();\n?string $user->getEmail();\n?string $user->getAvatar();\n?string $user->getRaw();\n?string $user->getAccessToken(); \n?string $user->getRefreshToken();\n?int    $user->getExpiresIn();\n?array  $user->getTokenResponse();\n\n\n```\n\n### Get raw response from OAuth API\n\nThe `$user->getRaw()` method will return an **array** of the API raw response.\n\n### Get the token response when you use userFromCode()\n\nThe `$user->getTokenResponse()` method will return an **array** of the get token(access token) API response.\n\n> Note: This method only return a **valid array** when you use `userFromCode()`, else will return **null** because use `userFromToken()` have no token response. \n\n### Get user with access token\n\n```php\n$accessToken = 'xxxxxxxxxxx';\n$user = $socialite->userFromToken($accessToken);\n```\n\n\n\n# Enjoy it! :heart:\n\n# Reference\n\n- [Alipay - ç”¨æˆ·ä¿¡æ¯æˆæƒ](https://opendocs.alipay.com/open/289/105656)\n- [DingTalk - æ‰«ç ç™»å½•ç¬¬ä¸‰æ–¹ç½‘ç«™](https://ding-doc.dingtalk.com/doc#/serverapi3/mrugr3)\n- [Google - OpenID Connect](https://developers.google.com/identity/protocols/OpenIDConnect)\n- [GitHub - Authorizing OAuth Apps](https://developer.github.com/apps/building-oauth-apps/authorizing-oauth-apps/)\n- [Figma - OAuth 2](https://www.figma.com/developers/api#auth-oauth2)\n- [Facebook - Graph API](https://developers.facebook.com/docs/graph-api)\n- [Linkedin - Authenticating with OAuth 2.0](https://developer.linkedin.com/docs/oauth2)\n- [å¾®åš - OAuth 2.0 æˆæƒæœºåˆ¶è¯´æ˜](http://open.weibo.com/wiki/%E6%8E%88%E6%9D%83%E6%9C%BA%E5%88%B6%E8%AF%B4%E6%98%8E)\n- [QQ - OAuth 2.0 ç™»å½• QQ](http://wiki.connect.qq.com/oauth2-0%E7%AE%80%E4%BB%8B)\n- [è…¾è®¯äº‘ - OAuth2.0](https://cloud.tencent.com/document/product/306/37730#.E6.8E.A5.E5.85.A5.E8.85.BE.E8.AE.AF.E4.BA.91-oauth)\n- [å¾®ä¿¡å…¬ä¼—å¹³å° - OAuth æ–‡æ¡£](http://mp.weixin.qq.com/wiki/9/01f711493b5a02f24b04365ac5d8fd95.html)\n- [å¾®ä¿¡å¼€æ”¾å¹³å° - ç½‘ç«™åº”ç”¨å¾®ä¿¡ç™»å½•å¼€å‘æŒ‡å—](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419316505&token=&lang=zh_CN)\n- [å¾®ä¿¡å¼€æ”¾å¹³å° - ä»£å…¬ä¼—å·å‘èµ·ç½‘é¡µæˆæƒ](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419318590&token=&lang=zh_CN)\n- [ä¼ä¸šå¾®ä¿¡ - OAuth æ–‡æ¡£](https://open.work.weixin.qq.com/api/doc/90000/90135/91020)\n- [ä¼ä¸šå¾®ä¿¡ç¬¬ä¸‰æ–¹åº”ç”¨ - OAuth æ–‡æ¡£](https://open.work.weixin.qq.com/api/doc/90001/90143/91118)\n- [è±†ç“£ - OAuth 2.0 æˆæƒæœºåˆ¶è¯´æ˜](http://developers.douban.com/wiki/?title=oauth2)\n- [æŠ–éŸ³ - ç½‘ç«™åº”ç”¨å¼€å‘æŒ‡å—](http://open.douyin.com/platform/doc)\n- [é£ä¹¦ - æˆæƒè¯´æ˜](https://open.feishu.cn/document/ukTMukTMukTM/uMTNz4yM1MjLzUzM)\n- [Lark - æˆæƒè¯´æ˜](https://open.larksuite.com/document/ukTMukTMukTM/uMTNz4yM1MjLzUzM)\n- [Tapd - ç”¨æˆ·æˆæƒè¯´æ˜](https://www.tapd.cn/help/show#1120003271001000093)\n- [Line - OAuth 2.0](https://developers.line.biz/en/docs/line-login/integrate-line-login/)\n- [Gitee - OAuthæ–‡æ¡£](https://gitee.com/api/v5/oauth_doc#/)\n- [PayPal - OAuthæ–‡æ¡£](https://developer.paypal.com/docs/log-in-with-paypal/)\n\n[![Sponsor me](https://github.com/overtrue/overtrue/blob/master/sponsor-me.svg?raw=true)](https://github.com/sponsors/overtrue)\n\n## Project supported by JetBrains\n\nMany thanks to Jetbrains for kindly providing a license for me to work on this and other open-source projects.\n\n[![](https://resources.jetbrains.com/storage/products/company/brand/logos/jb_beam.svg)](https://www.jetbrains.com/?from=https://github.com/overtrue)\n\n\n# PHP æ‰©å±•åŒ…å¼€å‘\n\n> æƒ³çŸ¥é“å¦‚ä½•ä»é›¶å¼€å§‹æ„å»º PHP æ‰©å±•åŒ…ï¼Ÿ\n>\n> è¯·å…³æ³¨æˆ‘çš„å®æˆ˜è¯¾ç¨‹ï¼Œæˆ‘ä¼šåœ¨æ­¤è¯¾ç¨‹ä¸­åˆ†äº«ä¸€äº›æ‰©å±•å¼€å‘ç»éªŒ â€”â€” [ã€ŠPHP æ‰©å±•åŒ…å®æˆ˜æ•™ç¨‹ - ä»å…¥é—¨åˆ°å‘å¸ƒã€‹](https://learnku.com/courses/creating-package)\n\n# License\n\nMIT\n"
        },
        {
          "name": "composer.json",
          "type": "blob",
          "size": 1.064453125,
          "content": "{\n  \"name\": \"overtrue/socialite\",\n  \"description\": \"A collection of OAuth 2 packages.\",\n  \"keywords\": [\n    \"oauth\",\n    \"social\",\n    \"login\",\n    \"weibo\",\n    \"wechat\",\n    \"qq\",\n    \"feishu\",\n    \"qcloud\"\n  ],\n  \"autoload\": {\n    \"files\": [\n      \"src/Contracts/FactoryInterface.php\",\n      \"src/Contracts/UserInterface.php\",\n      \"src/Contracts/ProviderInterface.php\"\n    ],\n    \"psr-4\": {\n      \"Overtrue\\\\Socialite\\\\\": \"src/\"\n    }\n  },\n  \"require\": {\n    \"php\": \">=8.0.2\",\n    \"ext-json\": \"*\",\n    \"ext-openssl\": \"*\",\n    \"guzzlehttp/guzzle\": \"^7.0\"\n  },\n  \"require-dev\": {\n    \"mockery/mockery\": \"^1.3\",\n    \"phpunit/phpunit\": \"^11.3\",\n    \"jetbrains/phpstorm-attributes\": \"^1.0\",\n    \"phpstan/phpstan\": \"^1.7\",\n    \"laravel/pint\": \"^1.2\"\n  },\n  \"license\": \"MIT\",\n  \"authors\": [\n    {\n      \"name\": \"overtrue\",\n      \"email\": \"anzhengchao@gmail.com\"\n    }\n  ],\n  \"scripts\": {\n    \"check-style\": \"@php vendor/bin/pint --test\",\n    \"fix-style\": \"@php vendor/bin/pint\",\n    \"test\": \"@php vendor/bin/phpunit --colors=always\",\n    \"phpstan\": \"@php vendor/bin/phpstan analyse src\"\n  }\n}\n"
        },
        {
          "name": "phpstan.neon.dist",
          "type": "blob",
          "size": 0.12109375,
          "content": "parameters:\n\tcheckMissingIterableValueType: false\n\tcheckGenericClassInNonGenericObjectType: false\n\tlevel: 8\n\tpaths:\n\t\t- src\n"
        },
        {
          "name": "phpunit.xml",
          "type": "blob",
          "size": 0.5283203125,
          "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit backupGlobals=\"false\"\n         backupStaticAttributes=\"false\"\n         bootstrap=\"vendor/autoload.php\"\n         colors=\"true\"\n         convertErrorsToExceptions=\"true\"\n         convertNoticesToExceptions=\"true\"\n         convertWarningsToExceptions=\"true\"\n         processIsolation=\"false\"\n         stopOnFailure=\"false\"\n>\n    <testsuites>\n        <testsuite name=\"Package Test Suite\">\n            <directory suffix=\".php\">./tests/</directory>\n        </testsuite>\n    </testsuites>\n</phpunit>\n"
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}