{
  "metadata": {
    "timestamp": 1736711831246,
    "page": 136,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjE0MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "shlinkio/shlink",
      "stars": 3449,
      "defaultBranch": "develop",
      "files": [
        {
          "name": ".dockerignore",
          "type": "blob",
          "size": 0.3623046875,
          "content": "bin/rr\nconfig/autoload/*local*\nconfig/params/shlink_dev_env.*\ndata/infra\ndata/cache/*\ndata/log/*\ndata/locks/*\ndata/proxies/*\ndata/migrations_template.txt\ndata/GeoLite2-City*\ndata/database.sqlite\ndata/shlink-tests.db\nCHANGELOG.md\nCONTRIBUTING.md\nUPGRADE.md\ncomposer.lock\nvendor\ndocs\nindocker\ndocker-*\nphpstan.neon\nphp*xml*\n**/test*\nbuild*\n**/.*\n!config/roadrunner/.rr.yml\n"
        },
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.611328125,
          "content": "/config/test export-ignore\n/data/infra export-ignore\n/docs export-ignore\n/module/CLI/test export-ignore\n/module/CLI/test-resources export-ignore\n/module/Core/test export-ignore\n/module/Core/test-db export-ignore\n/module/Rest/test export-ignore\n/module/Rest/test-api export-ignore\n.gitattributes export-ignore\n.gitignore export-ignore\n.phpstorm.meta.php export-ignore\n.travis.yml export-ignore\nbuild.sh export-ignore\nCHANGELOG.md export-ignore\ndocker-compose.yml export-ignore\nindocker export-ignore\nphpcs.xml export-ignore\nphpunit.xml.dist export-ignore\nphpunit-api.xml export-ignore\nphpunit-db.xml export-ignore\nphpstan.neon\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.2236328125,
          "content": ".idea\nbin/rr\n.pid\nbuild\n!docker/build\ncomposer.lock\ncomposer.phar\nvendor/\ndata/database.sqlite\ndata/shlink-tests.db\ndata/GeoLite2-City.*\ndata/infra/matomo\ndocs/mercure.html\n.phpunit.result.cache\ndocs/swagger/openapi-inlined.json\n"
        },
        {
          "name": ".phpstorm.meta.php",
          "type": "blob",
          "size": 0.5283203125,
          "content": "<?php\nnamespace PHPSTORM_META;\n\nuse Psr\\Container\\ContainerInterface;\nuse Laminas\\ServiceManager\\ServiceLocatorInterface;\n\n/**\n * PhpStorm Container Interop code completion\n *\n * Add code completion for container-interop.\n *\n * \\App\\ClassName::class will automatically resolve to it's own name.\n *\n * Custom strings like ``\"cache\"`` or ``\"logger\"`` need to be added manually.\n */\n$STATIC_METHOD_TYPES = [\n    ContainerInterface::get('') => [\n        '' == '@',\n    ],\n    ServiceLocatorInterface::build('') => [\n        '' == '@',\n    ],\n];\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 46.0205078125,
          "content": "# CHANGELOG\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com), and this project adheres to [Semantic Versioning](https://semver.org).\n\n# [4.4.0] - 2024-12-27\n### Added\n* [#2265](https://github.com/shlinkio/shlink/issues/2265) Add a new `REDIRECT_EXTRA_PATH_MODE` option that accepts three values:\n\n    * `default`: Short URLs only match if the path matches their short code or custom slug.\n    * `append`: Short URLs are matched as soon as the path starts with the short code or custom slug, and the extra path is appended to the long URL before redirecting.\n    * `ignore`: Short URLs are matched as soon as the path starts with the short code or custom slug, and the extra path is ignored.\n\n    This option effectively replaces the old `REDIRECT_APPEND_EXTRA_PATH` option, which is now deprecated and will be removed in Shlink 5.0.0\n\n* [#2156](https://github.com/shlinkio/shlink/issues/2156) Be less restrictive on what characters are disallowed in custom slugs.\n\n    All [URI-reserved characters](https://datatracker.ietf.org/doc/html/rfc3986#section-2.2) were disallowed up until now, but from now on, only the gen-delimiters are.\n\n* [#2229](https://github.com/shlinkio/shlink/issues/2229) Add `logo=disabled` query param to dynamically disable the default logo on QR codes.\n* [#2206](https://github.com/shlinkio/shlink/issues/2206) Add new `DB_USE_ENCRYPTION` config option to enable SSL database connections trusting any server certificate.\n* [#2209](https://github.com/shlinkio/shlink/issues/2209) Redirect rules are now imported when importing short URLs from a Shlink >=4.0 instance.\n\n### Changed\n* [#2281](https://github.com/shlinkio/shlink/issues/2281) Update docker image to PHP 8.4\n* [#2124](https://github.com/shlinkio/shlink/issues/2124) Improve how Shlink decides if a GeoLite db file needs to be downloaded, and reduces the chances for API limits to be reached.\n\n    Now Shlink tracks all download attempts, and knows which of them failed and succeeded. This lets it know when was the last error or success, how many consecutive errors have happened, etc.\n\n    It also tracks now the reason for a download to be attempted, and the error that happened when one fails.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* [#2247](https://github.com/shlinkio/shlink/issues/2247) Drop support for PHP 8.2\n\n### Fixed\n* *Nothing*\n\n\n# [4.3.1] - 2024-11-25\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2285](https://github.com/shlinkio/shlink/issues/2285) Fix performance degradation when using Microsoft SQL due to incorrect order of columns in `unique_short_code_plus_domain` index.\n\n\n## [4.3.0] - 2024-11-24\n### Added\n* [#2159](https://github.com/shlinkio/shlink/issues/2159) Add support for PHP 8.4.\n* [#2207](https://github.com/shlinkio/shlink/issues/2207) Add `hasRedirectRules` flag to short URL API model. This flag tells if a specific short URL has any redirect rules attached to it.\n* [#1520](https://github.com/shlinkio/shlink/issues/1520) Allow short URLs list to be filtered by `domain`.\n\n    This change applies both to the `GET /short-urls` endpoint, via the `domain` query parameter, and the `short-url:list` console command, via the `--domain`|`-d` flag.\n\n* [#1774](https://github.com/shlinkio/shlink/issues/1774) Add new geolocation redirect rules for the dynamic redirects system.\n\n    * `geolocation-country-code`: Allows to perform redirections based on the ISO 3166-1 alpha-2 two-letter country code resolved while geolocating the visitor.\n    * `geolocation-city-name`: Allows to perform redirections based on the city name resolved while geolocating the visitor.\n\n* [#2032](https://github.com/shlinkio/shlink/issues/2032) Save the URL to which a visitor is redirected when a visit is tracked.\n\n    The value is exposed in the API as a new `redirectUrl` field for visit objects.\n\n    This is useful to know where a visitor was redirected for a short URL with dynamic redirect rules, for special redirects, or simply in case the long URL was changed over time, and you still want to know where visitors were redirected originally.\n\n    Some visits may not have a redirect URL if a redirect didn't happen, like for orphan visits when no special redirects are configured, or when a visit is tracked as part of the pixel action.\n\n### Changed\n* [#2193](https://github.com/shlinkio/shlink/issues/2193) API keys are now hashed using SHA256, instead of being saved in plain text.\n\n    As a side effect, API key names have now become more important, and are considered unique.\n\n    When people update to this Shlink version, existing API keys will be hashed for everything to continue working.\n\n    In order to avoid data to be lost, plain-text keys will be written in the `name` field, either together with any existing name, or as the name itself. Then users are responsible for renaming them using the new `api-key:rename` command.\n\n    For newly created API keys, it is recommended to provide a name, but if not provided, a name will be generated from a redacted version of the new API key.\n\n* Update to Shlink PHP coding standard 2.4\n* Update to `hidehalo/nanoid-php` 2.0\n* Update to PHPStan 2.0\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2264](https://github.com/shlinkio/shlink/issues/2264) Fix visits counts not being deleted when deleting short URL or orphan visits.\n\n\n## [4.2.5] - 2024-11-03\n### Added\n* *Nothing*\n\n### Changed\n* Update to Shlink PHP coding standard 2.4\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2244](https://github.com/shlinkio/shlink/issues/2244) Fix integration with Redis 7.4 and Valkey.\n\n\n## [4.2.4] - 2024-10-27\n### Added\n* *Nothing*\n\n### Changed\n* [#2231](https://github.com/shlinkio/shlink/issues/2231) Update to `endroid/qr-code` 6.0.\n* [#2221](https://github.com/shlinkio/shlink/issues/2221) Switch to env vars to handle dev/local options.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2232](https://github.com/shlinkio/shlink/issues/2232) Run RoadRunner in docker with `exec` to ensure signals are properly handled.\n\n\n## [4.2.3] - 2024-10-17\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2225](https://github.com/shlinkio/shlink/issues/2225) Fix regression introduced in v4.2.2, making config options with `null` value to be promoted as env vars with value `''`, instead of being skipped.\n\n\n## [4.2.2] - 2024-10-14\n### Added\n* *Nothing*\n\n### Changed\n* [#2208](https://github.com/shlinkio/shlink/issues/2208) Explicitly promote installer config options as env vars, instead of as a side effect of loading the app config.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2213](https://github.com/shlinkio/shlink/issues/2213) Fix spaces being replaced with underscores in query parameter names, when forwarded from short URL to long URL.\n* [#2217](https://github.com/shlinkio/shlink/issues/2217) Fix docker image tag suffix being leaked to the version set inside Shlink, producing invalid SemVer version patterns.\n* [#2212](https://github.com/shlinkio/shlink/issues/2212) Fix env vars read in docker entry point not properly falling back to their `_FILE` suffixed counterpart.\n\n\n## [4.2.1] - 2024-10-04\n### Added\n* [#2183](https://github.com/shlinkio/shlink/issues/2183) Redis database index to be used can now be specified in the connection URI path, and Shlink will honor it.\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2201](https://github.com/shlinkio/shlink/issues/2201) Fix `MEMORY_LIMIT` option being ignored when provided via installer options.\n\n\n## [4.2.0] - 2024-08-11\n### Added\n* [#2120](https://github.com/shlinkio/shlink/issues/2120) Add new IP address condition for the dynamic rules redirections system.\n\n  The conditions allow you to define IP addresses to match as static IP (1.2.3.4), CIDR block (192.168.1.0/24) or wildcard pattern (1.2.\\*.\\*).\n\n* [#2018](https://github.com/shlinkio/shlink/issues/2018) Add option to allow all short URLs to be unconditionally crawlable in robots.txt, via `ROBOTS_ALLOW_ALL_SHORT_URLS=true` env var, or config option.\n* [#2109](https://github.com/shlinkio/shlink/issues/2109) Add option to customize user agents robots.txt, via `ROBOTS_USER_AGENTS=foo,bar,baz` env var, or config option.\n* [#2163](https://github.com/shlinkio/shlink/issues/2163) Add `short-urls:edit` command to edit existing short URLs.\n\n  This brings CLI and API interfaces capabilities closer, and solves an overlook since the feature was implemented years ago.\n\n* [#2164](https://github.com/shlinkio/shlink/pull/2164) Add missing `--title` option to `short-url:create` and `short-url:edit` commands.\n\n### Changed\n* [#2096](https://github.com/shlinkio/shlink/issues/2096) Update to RoadRunner 2024.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* *Nothing*\n\n\n## [4.1.1] - 2024-05-23\n### Added\n* *Nothing*\n\n### Changed\n* Use new reusable workflow to publish docker image\n* [#2015](https://github.com/shlinkio/shlink/issues/2015) Update to PHPUnit 11.\n* [#2130](https://github.com/shlinkio/shlink/pull/2130) Replace deprecated `pugx/shortid-php` package with `hidehalo/nanoid-php`.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2111](https://github.com/shlinkio/shlink/issues/2111) Fix typo in OAS docs examples where redirect rules with `query-param` condition type were defined as `query`.\n* [#2129](https://github.com/shlinkio/shlink/issues/2129) Fix error when resolving title for sites not using UTF-8 charset (detected with Japanese charsets).\n\n\n## [4.1.0] - 2024-04-14\n### Added\n* [#1330](https://github.com/shlinkio/shlink/issues/1330) All visit-related endpoints now expose the `visitedUrl` prop for any visit.\n\n  Previously, this was exposed only for orphan visits, since this can be an arbitrary value for those.\n\n* [#2077](https://github.com/shlinkio/shlink/issues/2077) When sending visits to Matomo, the short URL title is now used as document title in matomo.\n* [#2059](https://github.com/shlinkio/shlink/issues/2059) Add new `short-url:delete-expired` command that can be used to programmatically delete expired short URLs.\n\n  Expired short URLs are those that have a `validUntil` date in the past, or optionally, that have reached the max amount of visits.\n\n  This command can be run periodically by those who create many disposable URLs which are valid only for a period of time, and then can be deleted to save space.\n\n* [#1925](https://github.com/shlinkio/shlink/issues/1925) Add new `integration:matomo:send-visits` console command that can be used to send existing visits to integrated Matomo instance.\n* [#2087](https://github.com/shlinkio/shlink/issues/2087) Allow `memory_limit` to be configured via the new `MEMORY_LIMIT` env var or configuration option.\n\n### Changed\n* [#2034](https://github.com/shlinkio/shlink/issues/2034) Modernize entities, using constructor property promotion and readonly wherever possible.\n* [#2036](https://github.com/shlinkio/shlink/issues/2036) Deep performance improvement in some endpoints which involve counting visits:\n\n  * listing short URLs ordered by visits counts.\n  * loading tags with stats.\n  * visits overview.\n\n  This has been achieved by introducing a new table which tracks slotted visits counts. We can then `SUM` all counts for certain short URL, avoiding `COUNT(visits)` aggregates which are much less performant when there are a lot of visits.\n\n* [#2049](https://github.com/shlinkio/shlink/issues/2049) Request ID is now propagated to the background tasks/jobs scheduled during a request.\n\n  This allows for a better traceability, as the logs generated during those jobs will have a matching UUID as the logs generated during the request the triggered the job.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2095](https://github.com/shlinkio/shlink/issues/2095) Fix custom slugs not being properly imported from bitly\n* Fix error when importing short URLs and visits from a Shlink 4.x instance\n\n\n## [4.0.3] - 2024-03-15\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2058](https://github.com/shlinkio/shlink/issues/2058) Fix DB credentials provided as env vars being casted to `int` if they include only numbers.\n* [#2060](https://github.com/shlinkio/shlink/issues/2060) Fix error when trying to redirect to a non-http long URL.\n\n\n## [4.0.2] - 2024-03-09\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2021](https://github.com/shlinkio/shlink/issues/2021) Fix infinite GeoLite2 downloads.\n\n\n## [4.0.1] - 2024-03-08\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#2041](https://github.com/shlinkio/shlink/issues/2041) Document missing `color` and `bgColor` params for the QR code route in the OAS docs.\n* [#2043](https://github.com/shlinkio/shlink/issues/2043) Fix language redirect conditions matching too low quality accepted languages.\n\n\n## [4.0.0] - 2024-03-03\n### Added\n* [#1914](https://github.com/shlinkio/shlink/issues/1914) Add new dynamic redirects engine based on rules. Rules are conditions checked against the visitor's request, and when matching, they can result in a redirect to a different long URL.\n\n  Rules can be based on things like the presence of specific params, headers, locations, etc. This version ships with three initial rule condition types: device, query param and language.\n\n* [#1902](https://github.com/shlinkio/shlink/issues/1902) Add dynamic redirects based on query parameters.\n\n  This is implemented on top of the new [rule-based redirects](https://github.com/shlinkio/shlink/discussions/1912).\n\n* [#1915](https://github.com/shlinkio/shlink/issues/1915) Add dynamic redirects based on accept language.\n\n  This is implemented on top of the new [rule-based redirects](https://github.com/shlinkio/shlink/discussions/1912).\n\n* [#1868](https://github.com/shlinkio/shlink/issues/1868) Add support for [docker compose secrets](https://docs.docker.com/compose/use-secrets/) to the docker image.\n* [#1979](https://github.com/shlinkio/shlink/issues/1979) Allow orphan visits lists to be filtered by type.\n\n  This is supported both by the `GET /visits/orphan` API endpoint via `type=...` query param, and by the `visit:orphan` CLI command, via `--type` flag.\n\n* [#1904](https://github.com/shlinkio/shlink/issues/1904) Allow to customize QR codes foreground color, background color and logo.\n* [#1884](https://github.com/shlinkio/shlink/issues/1884) Allow a path prefix to be provided during short URL creation.\n\n  This can be useful to let Shlink generate partially random URLs, but with a known prefix.\n\n  Path prefixes are validated and filtered taking multi-segment slugs into consideration, which means slashes are replaced with dashes as long as multi-segment slugs are disabled.\n\n### Changed\n* [#1935](https://github.com/shlinkio/shlink/issues/1935) Replace dependency on abandoned `php-middleware/request-id` with userland simple middleware.\n* [#1988](https://github.com/shlinkio/shlink/issues/1988) Remove dependency on `league\\uri` package.\n* [#1909](https://github.com/shlinkio/shlink/issues/1909) Update docker image to PHP 8.3.\n* [#1786](https://github.com/shlinkio/shlink/issues/1786) Run API tests with RoadRunner by default.\n* [#2008](https://github.com/shlinkio/shlink/issues/2008) Update to Doctrine ORM 3.0.\n* [#2010](https://github.com/shlinkio/shlink/issues/2010) Update to Symfony 7.0 components.\n* [#2016](https://github.com/shlinkio/shlink/issues/2016) Simplify and improve how code coverage is generated in API and CLI tests.\n* [#1674](https://github.com/shlinkio/shlink/issues/1674) Database columns persisting long URLs have now `TEXT` type, which allows for much longer values.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* [#1908](https://github.com/shlinkio/shlink/issues/1908) Remove support for openswoole (and swoole).\n\n### Fixed\n* [#2000](https://github.com/shlinkio/shlink/issues/2000) Fix short URL creation/edition getting stuck when trying to resolve the title of a long URL which never returns a response.\n\n\n## [3.7.3] - 2024-01-04\n### Added\n* *Nothing*\n\n### Changed\n* [#1968](https://github.com/shlinkio/shlink/issues/1968) Move migrations from `data` to `module/Core`.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1967](https://github.com/shlinkio/shlink/issues/1967) Allow an empty dir to be mounted in `data` when using the docker image.\n\n\n## [3.7.2] - 2023-12-26\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1960](https://github.com/shlinkio/shlink/issues/1960) Allow QR codes to be optionally resolved even when corresponding short URL is not enabled.\n\n\n## [3.7.1] - 2023-12-17\n### Added\n* *Nothing*\n\n### Changed\n* Remove dependency on functional-php library\n* [#1939](https://github.com/shlinkio/shlink/issues/1939) Fine-tune RoadRunner logs to avoid too many useless info.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1947](https://github.com/shlinkio/shlink/issues/1947) Fix error when importing short URLs while using Postgres.\n\n\n## [3.7.0] - 2023-11-25\n### Added\n* [#1798](https://github.com/shlinkio/shlink/issues/1798) Experimental support to send visits to an external Matomo instance.\n* [#1780](https://github.com/shlinkio/shlink/issues/1780) Add new `NO_ORPHAN_VISITS` API key role.\n\n  Keys with this role will always get `0` when fetching orphan visits.\n\n  When trying to delete orphan visits the result will also be `0` and no visits will actually get deleted.\n\n* [#1879](https://github.com/shlinkio/shlink/issues/1879) Cache namespace can now be customized via config option or `CACHE_NAMESPACE` env var.\n\n  This is important if you are running multiple Shlink instance on the same server, or they share the same Redis instance (even more so if they are on different versions).\n\n* [#1905](https://github.com/shlinkio/shlink/issues/1905) Add support for PHP 8.3.\n* [#1927](https://github.com/shlinkio/shlink/issues/1927) Allow redis credentials be URL-decoded before passing them to connection.\n* [#1834](https://github.com/shlinkio/shlink/issues/1834) Add support for redis encrypted connections using SSL/TLS.\n\n  Encryption should work out of the box if servers schema is set tp `tls` or `rediss`, including support for self-signed certificates.\n\n  This has been tested with AWS ElasticCache using in-transit encryption, and with Digital Ocean Redis database.\n\n* [#1906](https://github.com/shlinkio/shlink/issues/1906) Add support for RabbitMQ encrypted connections using SSL/TLS.\n\n  In order to enable SLL, you need to pass `RABBITMQ_USE_SSL=true` or the corresponding config option.\n\n  Connections using self-signed certificates should work out of the box.\n\n  This has been tested with AWS RabbitMQ using in-transit encryption, and with CloudAMQP.\n\n### Changed\n* [#1799](https://github.com/shlinkio/shlink/issues/1799) RoadRunner/openswoole jobs are not run anymore for tasks that are actually disabled.\n\n  For example, if you did not enable RabbitMQ real-time updates, instead of triggering a job that ends immediately, the job will not even be enqueued.\n\n* [#1835](https://github.com/shlinkio/shlink/issues/1835) Docker image is now built only when a release is tagged, and new tags are included, for minor and major versions.\n* [#1055](https://github.com/shlinkio/shlink/issues/1055) Update OAS definition to v3.1.\n* [#1885](https://github.com/shlinkio/shlink/issues/1885) Update to chronos 3.0.\n* [#1896](https://github.com/shlinkio/shlink/issues/1896) Requests to health endpoint are no longer logged.\n* [#1877](https://github.com/shlinkio/shlink/issues/1877) Print a warning when manually running `visit:download-db` command and a GeoLite2 license was not provided.\n\n### Deprecated\n* [#1783](https://github.com/shlinkio/shlink/issues/1783) Deprecated support for openswoole. RoadRunner is the best replacement, with the same capabilities, but much easier and convenient to install and manage.\n\n### Removed\n* [#1790](https://github.com/shlinkio/shlink/issues/1790) Drop support for PHP 8.1.\n\n### Fixed\n* [#1819](https://github.com/shlinkio/shlink/issues/1819) Fix incorrect timeout when running DB commands during Shlink start-up.\n* [#1901](https://github.com/shlinkio/shlink/issues/1901) Do not allow short URLs with custom slugs containing URL-reserved characters, as they will not work at all afterward.\n* [#1900](https://github.com/shlinkio/shlink/issues/1900) Fix short URL visits deletion when multi-segment slugs are enabled.\n\n\n## [3.6.4] - 2023-09-23\n### Added\n* *Nothing*\n\n### Changed\n* [#1866](https://github.com/shlinkio/shlink/issues/1866) The `INITIAL_API_KEY` env var is now only relevant for the official docker image.\n\n  Going forward, new non-docker Shlink installations provisioned with env vars that also wish to provide an initial API key, should do it by using the `vendor/bin/shlink-installer init --initial-api-key=%SOME_KEY%` command, instead of using `INITIAL_API_KEY`.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1819](https://github.com/shlinkio/shlink/issues/1819) Fix incorrect timeout when running DB commands during Shlink start-up.\n* [#1870](https://github.com/shlinkio/shlink/issues/1870) Make sure shared locks include the cache prefix when using Redis.\n* [#1866](https://github.com/shlinkio/shlink/issues/1866) Fix error when starting docker image with `INITIAL_API_KEY` env var.\n\n\n## [3.6.3] - 2023-06-14\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1817](https://github.com/shlinkio/shlink/issues/1817) Fix Shlink trying to create SQLite database tables even if they already exist.\n\n\n## [3.6.2] - 2023-06-08\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1808](https://github.com/shlinkio/shlink/issues/1808) Fix `rr` binary downloading during Shlink update.\n\n\n## [3.6.1] - 2023-06-04\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1413](https://github.com/shlinkio/shlink/issues/1413) Fix error when creating initial DB in Postgres in a cluster where a default `postgres` db does not exist or the credentials do not grant permissions to connect.\n* [#1803](https://github.com/shlinkio/shlink/issues/1803) Fix default RoadRunner port when not using docker image.\n\n\n## [3.6.0] - 2023-05-24\n### Added\n* [#1148](https://github.com/shlinkio/shlink/issues/1148) Add support to delete short URL visits.\n\n  This can be done via `DELETE /short-urls/{shortCode}/visits` REST endpoint or via `short-url:visits-delete` console command.\n\n  The CLI command includes a warning and requires the user to confirm before proceeding.\n\n* [#1681](https://github.com/shlinkio/shlink/issues/1681) Add support to delete orphan visits.\n\n  This can be done via `DELETE /visits/orphan` REST endpoint or via `visit:orphan-delete` console command.\n\n  The CLI command includes a warning and requires the user to confirm before proceeding.\n\n* [#1753](https://github.com/shlinkio/shlink/issues/1753) Add a new `vendor/bin/shlink-installer init` command that can be used to automate Shlink installations.\n\n  This command can create the initial database, update it, create proxies, clean cache, download initial GeoLite db files, etc\n\n  The official docker image also uses it on its entry point script.\n\n* [#1656](https://github.com/shlinkio/shlink/issues/1656) Add support for openswoole 22\n* [#1784](https://github.com/shlinkio/shlink/issues/1784) Add new docker tag where the container runs as a non-root user.\n* [#953](https://github.com/shlinkio/shlink/issues/953) Add locks that prevent errors on duplicated keys when creating short URLs in parallel that depend on the same new tag or domain.\n\n### Changed\n* [#1755](https://github.com/shlinkio/shlink/issues/1755) Update to roadrunner 2023\n* [#1745](https://github.com/shlinkio/shlink/issues/1745) Roadrunner is now the default docker runtime.\n\n  There are now three different docker images published:\n\n  * Versions without suffix (like `3.6.0`) will contain the default runtime, whichever it is.\n  * Versions with `-roadrunner` suffix (like `3.6.0-roadrunner`) will always use roadrunner as the runtime, even if default one changes in the future.\n  * Versions with `-openswoole` suffix (like `3.6.0-openswoole`) will always use openswoole as the runtime, even if default one changes in the future.\n\n### Deprecated\n* Deprecated `ENABLE_PERIODIC_VISIT_LOCATE` env var. Use an external mechanism to automate visit locations.\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1760](https://github.com/shlinkio/shlink/issues/1760) Fix domain not being set to null when importing short URLs with default domain.\n* [#953](https://github.com/shlinkio/shlink/issues/953) Fix duplicated key errors and short URL creation failing when creating short URLs in parallel that depend on the same new tag or domain.\n* [#1741](https://github.com/shlinkio/shlink/issues/1741) Fix randomly using 100% CPU in task workers when trying to download GeoLite DB files.\n* Fix Shlink trying to connect to RabbitMQ even if configuration set to not connect.\n\n\n## [3.5.4] - 2023-04-12\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1742](https://github.com/shlinkio/shlink/issues/1742) Fix URLs using schemas which do not contain `//`, like `mailto:`, to no longer be considered valid.\n* [#1743](https://github.com/shlinkio/shlink/issues/1743) Fix Error when trying to create short URLs from CLI on an openswoole context.\n\n  Unfortunately the reason are real-time updates do not work with openswoole when outside an openswoole request, so the feature has been disabled for that context.\n\n\n## [3.5.3] - 2023-03-31\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1715](https://github.com/shlinkio/shlink/issues/1715) Fix short URL creation/edition allowing long URLs without schema. Now a validation error is thrown.\n* [#1537](https://github.com/shlinkio/shlink/issues/1537) Fix incorrect list of tags being returned for some author-only API keys.\n* [#1738](https://github.com/shlinkio/shlink/issues/1738) Fix memory leak when importing short URLs with many visits.\n\n\n## [3.5.2] - 2023-02-16\n### Added\n* *Nothing*\n\n### Changed\n* [#1696](https://github.com/shlinkio/shlink/issues/1696) Migrated to PHPUnit 10.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1698](https://github.com/shlinkio/shlink/issues/1698) Fixed error 500 in `robots.txt`.\n* [#1688](https://github.com/shlinkio/shlink/issues/1688) Fixed huge performance degradation on `/tags/stats` endpoint.\n* [#1693](https://github.com/shlinkio/shlink/issues/1693) Fixed Shlink thinking database already exists if it finds foreign tables.\n\n\n## [3.5.1] - 2023-02-04\n### Added\n* *Nothing*\n\n### Changed\n* [#1685](https://github.com/shlinkio/shlink/issues/1685) Changed `loosely` mode to `loose`, as it was a typo. The old one keeps working and maps to the new one, but it's considered deprecated.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1682](https://github.com/shlinkio/shlink/issues/1682) Fixed incorrect case-insensitive checks in short URLs when using Microsoft SQL server.\n* [#1684](https://github.com/shlinkio/shlink/issues/1684) Fixed entities metadata cache not being cleared at docker container start-up when using redis with replication.\n\n\n## [3.5.0] - 2023-01-28\n### Added\n* [#1557](https://github.com/shlinkio/shlink/issues/1557) Added support to dynamically redirect to different long URLs based on the visitor's device type.\n\n  For the moment, only `android`, `ios` and `desktop` can have their own specific long URL, and when the visitor cannot be matched against any of them, the regular long URL will be used.\n\n  In the future, more granular device types could be added if appropriate (iOS tablet, android table, tablet, mobile phone, Linux, Mac, Windows, etc).\n\n  In order to match the visitor's device, the `User-Agent` header is used.\n\n* [#1632](https://github.com/shlinkio/shlink/issues/1632) Added amount of bots, non-bots and total visits to the visits summary endpoint.\n* [#1633](https://github.com/shlinkio/shlink/issues/1633) Added amount of bots, non-bots and total visits to the tag stats endpoint.\n* [#1653](https://github.com/shlinkio/shlink/issues/1653) Added support for all HTTP methods in short URLs, together with two new redirect status codes, 307 and 308.\n\n  Existing Shlink instances will continue to work the same. However, if you decide to set the redirect status codes as 307 or 308, Shlink will also return a redirect for short URLs even when the request method is different from `GET`.\n\n  The status 308 is equivalent to 301, and 307 is equivalent to 302. The difference is that the spec requires the client to respect the original HTTP method when performing the redirect. With 301 and 302, some old clients might perform a `GET` request during the redirect, regardless the original request method.\n\n* [#1662](https://github.com/shlinkio/shlink/issues/1662) Added support to provide openswoole-specific config options via env vars prefixed with `OPENSWOOLE_`.\n* [#1389](https://github.com/shlinkio/shlink/issues/1389) and [#706](https://github.com/shlinkio/shlink/issues/706) Added support for case-insensitive short URLs.\n\n  In order to achieve this, a new env var/config option has been implemented (`SHORT_URL_MODE`), which allows either `strict` or ~~`loosely`~~ `loose`.\n\n  Default value is `strict`, but if `loose` is provided, then short URLs will be matched in a case-insensitive way, and new short URLs will be generated with short-codes in lowercase only.\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* [#1676](https://github.com/shlinkio/shlink/issues/1676) Deprecated `GET /short-urls/shorten` endpoint. Use `POST /short-urls` to create short URLs instead.\n* [#1678](https://github.com/shlinkio/shlink/issues/1678) Deprecated `validateUrl` option on URL creation/edition.\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1639](https://github.com/shlinkio/shlink/issues/1639) Fixed 500 error returned when request body is not valid JSON, instead of a proper descriptive error.\n\n\n## [3.4.0] - 2022-12-16\n### Added\n* [#1612](https://github.com/shlinkio/shlink/issues/1612) Allowed to filter short URLs out of lists, when `validUntil` date is in the past or have reached their maximum amount of visits.\n\n  This can be done by:\n\n  * Providing `excludeMaxVisitsReached=true` and/or `excludePastValidUntil=true` to the `GET /short-urls` endpoint.\n  * Providing `--exclude-max-visits-reached` and/or `--exclude-past-valid-until` to the `short-urls:list` command.\n\n* [#1613](https://github.com/shlinkio/shlink/issues/1613) Added amount of visits coming from bots, non-bots and total to every short URL in the short URLs list.\n\n  Additionally, added option to order by non-bot visits, by passing `nonBotVisits-DESC` or `nonBotVisits-ASC`.\n\n* [#1599](https://github.com/shlinkio/shlink/issues/1599) Added support for credentials on redis DSNs, either only password, or both username and password.\n* [#1616](https://github.com/shlinkio/shlink/issues/1616) Added support to import orphan visits when importing short URLs from another Shlink instance.\n* [#1519](https://github.com/shlinkio/shlink/issues/1519) Allowing to search short URLs by default domain.\n* [#1555](https://github.com/shlinkio/shlink/issues/1555) and [#1625](https://github.com/shlinkio/shlink/issues/1625) Added full support for PHP 8.2, updating the docker image to this version.\n\n### Changed\n* [#1563](https://github.com/shlinkio/shlink/issues/1563) Moved logic to reuse command options to option classes instead of base abstract command classes.\n* [#1569](https://github.com/shlinkio/shlink/issues/1569) Migrated test doubles from phpspec/prophecy to PHPUnit mocks.\n* [#1329](https://github.com/shlinkio/shlink/issues/1329) Split some logic from `VisitRepository` and `ShortUrlRepository` into separated repository classes.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1618](https://github.com/shlinkio/shlink/issues/1618) Fixed imported short URLs and visits dates not being set to the target server timezone.\n* [#1578](https://github.com/shlinkio/shlink/issues/1578) Fixed short URL allowing an empty string as the domain during creation.\n* [#1580](https://github.com/shlinkio/shlink/issues/1580) Fixed `FLUSHDB` being run on Shlink docker start-up when using redis, causing full cache to be flushed.\n\n\n## [3.3.2] - 2022-10-18\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1576](https://github.com/shlinkio/shlink/issues/1576) Fixed error when trying to retry visits location from CLI.\n\n\n## [3.3.1] - 2022-09-30\n### Added\n* *Nothing*\n\n### Changed\n* [#1474](https://github.com/shlinkio/shlink/issues/1474) Added preliminary support for PHP 8.2 during CI workflow.\n* [#1551](https://github.com/shlinkio/shlink/issues/1551) Moved services related to geolocating visits to the `Visit\\Geolocation` namespace.\n* [#1550](https://github.com/shlinkio/shlink/issues/1550) Reorganized main namespaces from Core module.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1556](https://github.com/shlinkio/shlink/issues/1556) Fixed trailing slash not working when enabling multi-segment slashes.\n\n\n## [3.3.0] - 2022-09-18\n### Added\n* [#1221](https://github.com/shlinkio/shlink/issues/1221) Added experimental support to run Shlink with [RoadRunner](https://roadrunner.dev) instead of openswoole.\n* [#1531](https://github.com/shlinkio/shlink/issues/1531) and [#1090](https://github.com/shlinkio/shlink/issues/1090) Added support for trailing slashes in short URLs.\n* [#1406](https://github.com/shlinkio/shlink/issues/1406) Added new REST API version 3.\n\n  When making requests to the REST API with `/rest/v3/...` and an error occurs, all error types will be different, with the next correlation:\n\n  * `INVALID_ARGUMENT` -> `https://shlink.io/api/error/invalid-data`\n  * `INVALID_SHORT_URL_DELETION` -> `https://shlink.io/api/error/invalid-short-url-deletion`\n  * `DOMAIN_NOT_FOUND` -> `https://shlink.io/api/error/domain-not-found`\n  * `FORBIDDEN_OPERATION` -> `https://shlink.io/api/error/forbidden-tag-operation`\n  * `INVALID_URL` -> `https://shlink.io/api/error/invalid-url`\n  * `INVALID_SLUG` -> `https://shlink.io/api/error/non-unique-slug`\n  * `INVALID_SHORTCODE` -> `https://shlink.io/api/error/short-url-not-found`\n  * `TAG_CONFLICT` -> `https://shlink.io/api/error/tag-conflict`\n  * `TAG_NOT_FOUND` -> `https://shlink.io/api/error/tag-not-found`\n  * `MERCURE_NOT_CONFIGURED` -> `https://shlink.io/api/error/mercure-not-configured`\n  * `INVALID_AUTHORIZATION` -> `https://shlink.io/api/error/missing-authentication`\n  * `INVALID_API_KEY` -> `https://shlink.io/api/error/invalid-api-key`\n\n  If you make a request to the API with v2 or v1, the old error types will be returned, until Shlink 4 is released, when only the new ones will be used.\n\n  Non-error responses are not affected.\n\n* [#1513](https://github.com/shlinkio/shlink/issues/1513) Added publishing of the docker image in GHCR.\n* [#1114](https://github.com/shlinkio/shlink/issues/1114) Added support to provide an initial API key via `INITIAL_API_KEY` env var, when running Shlink with openswoole or RoadRunner.\n\n  Also, the installer tool now allows to generate an initial API key that can be copy-pasted (this tool is run interactively), in case you use php-fpm or you don't want to use env vars.\n\n* [#1528](https://github.com/shlinkio/shlink/issues/1528) Added support to delay when the GeoLite2 DB file is downloaded in docker images, speeding up its startup time.\n\n  In order to do it, pass `SKIP_INITIAL_GEOLITE_DOWNLOAD=true` when creating the container.\n\n### Changed\n* [#1339](https://github.com/shlinkio/shlink/issues/1339) Added new test suite for CLI E2E tests.\n* [#1503](https://github.com/shlinkio/shlink/issues/1503) Drastically improved build time in GitHub Actions, by optimizing parallelization and adding php extensions cache.\n* [#1525](https://github.com/shlinkio/shlink/issues/1525) Migrated to custom doctrine CLI entry point.\n* [#1492](https://github.com/shlinkio/shlink/issues/1492) Migrated to immutable options objects, mapped with [cuyz/valinor](https://github.com/CuyZ/Valinor).\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* *Nothing*\n\n\n## [3.2.1] - 2022-08-08\n### Added\n* *Nothing*\n\n### Changed\n* [#1495](https://github.com/shlinkio/shlink/issues/1495) Centralized how routes are configured to support multi-segment slugs.\n* [#1497](https://github.com/shlinkio/shlink/issues/1497) Updated to latest shlink dependencies with support for PHP 8.1 only.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1499](https://github.com/shlinkio/shlink/issues/1499) Fixed loading of config options as env vars, which was making all default configurations to be loaded unless env vars were explicitly provided.\n\n\n## [3.2.0] - 2022-08-05\n### Added\n* [#854](https://github.com/shlinkio/shlink/issues/854) Added support for multi-segment custom slugs.\n\n  The feature is disabled by default, but you can optionally opt in. If you do, you will be able to create short URLs with multiple segments in the custom slug, like `https://example.com/foo/bar/baz`.\n\n* [#1280](https://github.com/shlinkio/shlink/issues/1280) Added missing visit-related commands.\n\n  Now you can run `tag:visits`, `domain:visits`, `visit:orphan` or `visit:non-orphan` to get the corresponding list of visits from the command line.\n\n* [#962](https://github.com/shlinkio/shlink/issues/962) Added new real-time update for new short URLs.\n\n  You can now subscribe to the `https://shlink.io/new-short-url` topic on any of the supported async updates technologies in order to get notified when a short URL is created.\n\n* [#1367](https://github.com/shlinkio/shlink/issues/1367) Added support to publish real-time updates in redis pub/sub.\n\n  The publishing will happen in the same redis instance/cluster configured for caching.\n\n### Changed\n* [#1452](https://github.com/shlinkio/shlink/issues/1452) Updated to monolog 3\n* [#1485](https://github.com/shlinkio/shlink/issues/1485) Changed payload published in RabbitMQ for all visits events, in order to conform with the Async API spec.\n\n  Since this is a breaking change, also provided a new `RABBITMQ_LEGACY_VISITS_PUBLISHING=true` env var that can be provided in order to keep the old payload.\n\n  This env var is considered deprecated and will be removed in Shlink 4, when the legacy format will no longer be supported.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* [#1280](https://github.com/shlinkio/shlink/issues/1280) Dropped support for PHP 8.0\n\n### Fixed\n* [#1471](https://github.com/shlinkio/shlink/issues/1471) Fixed error when running `visit:locate` command with any extra parameter (like `--retry`).\n\n\n## [3.1.2] - 2022-06-04\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1448](https://github.com/shlinkio/shlink/issues/1448) Fixed HTML entities not being properly parsed when auto-resolving page titles.\n* [#1458](https://github.com/shlinkio/shlink/issues/1458) Fixed 500 error when filtering short URLs by ALL tags and search term.\n\n\n## [3.1.1] - 2022-05-09\n### Added\n* *Nothing*\n\n### Changed\n* [#1444](https://github.com/shlinkio/shlink/issues/1444) Updated docker image to openswoole 4.11.1, in an attempt to fix error.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1439](https://github.com/shlinkio/shlink/issues/1439) Fixed crash when trying to auto-resolve titles for URLs which serve large binary files.\n\n\n## [3.1.0] - 2022-04-23\n### Added\n* [#1294](https://github.com/shlinkio/shlink/issues/1294) Allowed to provide a specific domain when importing URLs from YOURLS.\n* [#1416](https://github.com/shlinkio/shlink/issues/1416) Added support to import URLs from Kutt.it.\n* [#1418](https://github.com/shlinkio/shlink/issues/1418) Added support to customize the timezone used by Shlink, falling back to the default one set in PHP config.\n\n  The timezone can be set via the `TIMEZONE` env var, or using the installer tool.\n\n* [#1309](https://github.com/shlinkio/shlink/issues/1309) Improved URL importing, ensuring individual errors do not make the whole process fail, and instead, failing URLs are skipped.\n* [#1162](https://github.com/shlinkio/shlink/issues/1162) Added new endpoint to get visits by domain.\n\n  The endpoint is `GET /domains/{domain}/visits`, and it has the same capabilities as any other visits endpoint, allowing pagination and filtering.\n\n### Changed\n* [#1359](https://github.com/shlinkio/shlink/issues/1359) Hidden database commands.\n* [#1385](https://github.com/shlinkio/shlink/issues/1385) Prevented a big error message from being logged when using Shlink without mercure.\n* [#1398](https://github.com/shlinkio/shlink/issues/1398) Increased required mutation score for unit tests to 85%.\n* [#1419](https://github.com/shlinkio/shlink/issues/1419) Input dates are now parsed to Shlink's configured timezone or default timezone before using them for database queries.\n* [#1428](https://github.com/shlinkio/shlink/issues/1428) Updated native dependencies in docker image and base image to PHP v8.1.5.\n\n### Deprecated\n* [#1340](https://github.com/shlinkio/shlink/issues/1340) Deprecated webhooks. New events will only be added to other real-time updates approaches, and webhooks will be completely removed in Shlink 4.0.0.\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1397](https://github.com/shlinkio/shlink/issues/1397) Fixed `db:create` command always reporting the schema exists if the `db:migrate` command has been run before by mistake.\n* [#1402](https://github.com/shlinkio/shlink/issues/1402) Fixed the base path getting appended with the default domain by mistake, causing multiple side effects in several places.\n\n\n## [3.0.3] - 2022-02-19\n### Added\n* *Nothing*\n\n### Changed\n* [#1382](https://github.com/shlinkio/shlink/issues/1382) Updated docker image to PHP 8.1.3.\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1377](https://github.com/shlinkio/shlink/issues/1377) Fixed installer always setting delete threshold with value 1.\n* [#1379](https://github.com/shlinkio/shlink/issues/1379) Ensured API keys cannot be created with a domain-only role linked to default domain.\n\n\n## [3.0.2] - 2022-02-10\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1373](https://github.com/shlinkio/shlink/issues/1373) Fixed incorrect config import when updating from Shlink 2.x using SQLite.\n* [#1369](https://github.com/shlinkio/shlink/issues/1369) Fixed slow regexps in `.htaccess` file.\n\n\n## [3.0.1] - 2022-02-04\n### Added\n* *Nothing*\n\n### Changed\n* *Nothing*\n\n### Deprecated\n* *Nothing*\n\n### Removed\n* *Nothing*\n\n### Fixed\n* [#1363](https://github.com/shlinkio/shlink/issues/1363) Fixed titles being resolved no matter what when `validateUrl` is not set or is explicitly set to true.\n* [#1352](https://github.com/shlinkio/shlink/issues/1352) Updated to stable pdo_sqlsrv in docker image.\n\n\n## [3.0.0] - 2022-01-28\n### Added\n* [#767](https://github.com/shlinkio/shlink/issues/767) Added full support to use emojis everywhere, whether it is custom slugs, titles, referrers, etc.\n* [#1274](https://github.com/shlinkio/shlink/issues/1274) Added support to filter short URLs lists by all provided tags.\n\n  The `GET /short-urls` endpoint now accepts a `tagsMode=all` param which will make only short URLs matching **all** the tags in the `tags[]` query param, to be returned.\n\n  The `short-urls:list` command now accepts a `-i`/`--including-all-tags` flag which behaves the same.\n\n* [#1273](https://github.com/shlinkio/shlink/issues/1273) Added support for pagination in tags lists, allowing to improve performance by loading subsets of tags.\n\n  For backwards compatibility, lists continue returning all items by default, but the `GET /tags` endpoint now supports `page` and `itemsPerPage` query params, to make sure only a subset of the tags is returned.\n\n  This is supported both when invoking the endpoint with and without `withStats=true` query param.\n\n  Additionally, the endpoint also supports filtering by `searchTerm` query param. When provided, only tags matching it will be returned.\n\n* [#1063](https://github.com/shlinkio/shlink/issues/1063) Added new endpoint that allows fetching all existing non-orphan visits, in case you need a global view of all visits received by your Shlink instance.\n\n  This can be achieved using the `GET /visits/non-orphan` endpoint.\n\n### Changed\n* [#1277](https://github.com/shlinkio/shlink/issues/1277) Reduced docker image size to 45% of the original size.\n* [#1268](https://github.com/shlinkio/shlink/issues/1268) Updated dependencies, including symfony/console 6 and mezzio/mezzio-swoole 4.\n* [#1283](https://github.com/shlinkio/shlink/issues/1283) Changed behavior of `DELETE_SHORT_URL_THRESHOLD` env var, disabling the feature if a value was not provided.\n* [#1300](https://github.com/shlinkio/shlink/issues/1300) Changed default ordering for short URLs list, returning always from newest to oldest.\n* [#1299](https://github.com/shlinkio/shlink/issues/1299) Updated to the latest base docker images, based in PHP 8.1.1, and bumped openswoole to v4.9.1.\n* [#1282](https://github.com/shlinkio/shlink/issues/1282) Env vars now have precedence over installer options.\n* [#1328](https://github.com/shlinkio/shlink/issues/1328) Refactored ShortUrlsRepository to use DTOs in methods with too many arguments.\n\n### Deprecated\n* [#1315](https://github.com/shlinkio/shlink/issues/1315) Deprecated `GET /tags?withStats=true` endpoint. Use `GET /tags/stats` instead.\n\n### Removed\n* [#1275](https://github.com/shlinkio/shlink/issues/1275) Removed everything that was deprecated in Shlink 2.x.\n\n  See [UPGRADE](UPGRADE.md#from-v2x-to-v3x) doc in order to get details on how to migrate to this version.\n\n* [#1347](https://github.com/shlinkio/shlink/issues/1347) Dropped support for regular swoole in favor of openswoole.\n\n  Since openswoole support was introduced in the previous release version, Shlink will still consider the swoole extension as openswoole, as at the moment, functionality hasn't deviated too much, and will simplify migrating to Shlink 3.0.0\n\n  However, there's no longer active testing with regular swoole, and it is considered no longer supported. If some incompatibility arises, the only supported solution will be to migrate to openswoole.\n\n### Fixed\n* *Nothing*\n\n\n## Older versions\n* [2.x.x](docs/changelog-archive/CHANGELOG-2.x.md)\n* [1.x.x](docs/changelog-archive/CHANGELOG-1.x.md)\n"
        },
        {
          "name": "CONTRIBUTING.md",
          "type": "blob",
          "size": 8.017578125,
          "content": "# Contributing\n\nThis file will guide you through the process of getting to project up and running, in case you want to provide coding contributions.\n\nYou will also see how to ensure the code fulfills the expected code checks, and how to create a pull request.\n\n## System dependencies\n\nThe project provides all its dependencies as docker containers through a `docker compose` configuration.\n\nBecause of this, the only actual dependencies are [docker](https://docs.docker.com/get-docker/) and [docker compose](https://docs.docker.com/compose/install/).\n\n## Setting up the project\n\nThe first thing you need to do is fork the repository, and clone it in your local machine.\n\nThen you will have to follow these steps:\n\n* Copy the `config/params/shlink_dev_env.php.dist` in the same directory, but removing the `.dist` extension:\n\n    ```\n    cp config/params/shlink_dev_env.php.dist config/params/shlink_dev_env.php\n    ```\n\n    The `shlink_dev_env.php` file is gitignored, so you can customize it as you want. For example, by adding your own GeoLite license key.\n\n* Start-up the project by running `docker compose up`.\n\n    The first time this command is run, it will create several containers that are used during development, so it may take some time.\n\n    It will also create some empty databases and install the project dependencies with composer.\n\n* Run `./indocker bin/cli db:create` to create the initial database.\n* Run `./indocker bin/cli db:migrate` to get database migrations up to date.\n* Run `./indocker bin/cli api-key:generate` to get your first API key generated.\n\nOnce you finish this, you will have the project exposed in ports `8800` through RoadRunner and `8000` through nginx+php-fpm.\n\n> Note: The `indocker` shell script is a helper tool used to run commands inside the main docker container.\n\n## Project structure\n\nThis project is structured as a modular application, using [laminas/laminas-config-aggregator](https://github.com/laminas/laminas-config-aggregator) to merge the configuration provided by every module.\n\nAll modules are inside the `module` folder, and each one has its own `src`, `test` and `config` folders, with the source code, tests and configuration. They also have their own `ConfigProvider` class, which is consumed by the config aggregator.\n\nThis is a simplified version of the project structure:\n\n```\nshlink\n├── bin\n│   ├── cli\n│   └── [...]\n├── config\n│   ├── autoload\n│   ├── params\n│   ├── config.php\n│   ├── container.php\n│   └── [...]\n├── data\n│   ├── cache\n│   ├── locks\n│   ├── log\n│   └── proxies\n├── docs\n│   ├── adr\n│   ├── async-api\n│   └── swagger\n├── module\n│   ├── CLI\n│   ├── Core\n│   └── Rest\n├── public\n│   └── [...]\n├── composer.json\n└── README.md\n```\n\nThe purposes of every folder are:\n\n* `bin`: It contains the CLI tools. The `cli` one is the main entry point to run Shlink from the command line.\n* `config`: Contains application-wide configurations, which are later merged with the ones provided by every module.\n* `data`: Common git-ignored assets, like logs, caches, lock files, GeoLite DB files, etc. It's the only location where Shlink may need to write at runtime.\n* `docs`: Any project documentation is stored here, like API spec definitions or architectural decision records.\n* `module`: Contains a sub-folder for every module in the project. Modules contain the source code, tests and configurations for every context in the project.\n* `public`: Few assets (like `favicon.ico` or `robots.txt`) and the web entry point are stored here. This web entry point is not used when serving the app with RoadRunner.\n\n## Project tests\n\nIn order to ensure stability and no regressions are introduced while developing new features, this project has different types of tests.\n\n* **Unit tests**: These are the simplest to run, and usually test individual pieces of code, replacing any external dependency by mocks.\n\n    The code coverage of unit tests is pretty high, and only components which work closer to the database, like entity repositories, are excluded because of their nature.\n\n* **Database tests**: These are integration tests that run against a real database, and only cover components which work closer to the database.\n\n    Its purpose is to verify all the database queries behave as expected and return what's expected.\n\n    The project provides some tooling to run them against any of the supported database engines.\n\n* **API tests**: These are E2E tests that spin up an instance of the app with RoadRunner, and test it from the outside by interacting with the REST API.\n\n    These are the best tests to catch regressions, and to verify everything behaves as expected.\n\n    They use Postgres as the database engine, and include some fixtures that ensure the same data exists at the beginning of the execution.\n\n    Since the app instance is run on a process different from the one running the tests, when a test fails it might not be obvious why. To help debugging that, the app will dump all its logs inside `data/log/api-tests`, where you will find the `shlink.log` and `access.log` files.\n\n* **CLI tests**: These are E2E tests too, but they test console commands instead of REST endpoints.\n\n    They use Maria DB as the database engine, and include the same fixtures as the API tests, that ensure the same data exists at the beginning of the execution.\n\nDepending on the kind of contribution, maybe not all kinds of tests are needed, but the more you provide, the better.\n\n## Running code checks\n\n* Run `./indocker composer cs` to check coding styles are fulfilled.\n* Run `./indocker composer cs:fix` to fix coding styles (some may not be fixable from the CLI)\n* Run `./indocker composer stan` to statically analyze the code with [phpstan](https://phpstan.org/). This tool is the closest to \"compile\" PHP and verify everything would work as expected.\n* Run `./indocker composer test:unit` to run the unit tests.\n* Run `./indocker composer test:db` to run the database integration tests.\n\n    This command runs the same test suite against all supported database engines in parallel. If you just want to run one of them, you can add one of `:sqlite`, `:mysql`, `:maria`, `:postgres`, `:mssql` at the end of the command.\n    \n    For example, `test:db:postgres`.\n\n* Run `./indocker composer test:api` to run API E2E tests. For these, the Postgres database engine is used.\n* Run `./indocker composer test:cli` to run CLI E2E tests. For these, the Maria DB database engine is used.\n* Run `./indocker composer ci` to run all previous commands together, parallelizing non-conflicting tasks as much as possible.\n\n## Testing endpoints\n\nThe project provides a Swagger UI container for dev envs, which can be accessed in http://localhost:8005.\n\nIt will automatically load the contents of `docs/swagger`, so you can make any updates and they will get reflected.\n\n## Pull request process\n\n**Important!**: Before starting to work on a pull request, make sure you always [open an issue](https://github.com/shlinkio/shlink/issues/new/choose) first.\n\nThis is important because any contribution needs to be discussed first. Maybe there's someone else already working on something similar, or there are other considerations to have in mind.\n\nOnce everything is clear, to provide a pull request to this project, you should always start by creating a new branch, where you will make all desired changes.\n\nThe base branch should always be `develop`, and the target branch for the pull request should also be `develop`.\n\nBefore your branch can be merged, all the checks described in [Running code checks](#running-code-checks) have to be passing. You can verify that manually by running `./indocker composer ci`, or wait for the build to be run automatically after the pull request is created.\n\n## Architectural Decision Records\n\nThe project includes logs for some architectural decisions, using the [adr](https://adr.github.io/) proposal.\n\nIf you are curious or want to understand why something has been built in some specific way, [take a look at them](docs/adr).\n"
        },
        {
          "name": "Dockerfile",
          "type": "blob",
          "size": 2.4736328125,
          "content": "FROM php:8.4-alpine3.21 AS base\n\nARG SHLINK_VERSION=latest\nENV SHLINK_VERSION ${SHLINK_VERSION}\nARG SHLINK_RUNTIME=rr\nENV SHLINK_RUNTIME ${SHLINK_RUNTIME}\n\nENV USER_ID '1001'\nENV PDO_SQLSRV_VERSION 5.12.0\nENV MS_ODBC_DOWNLOAD '7/6/d/76de322a-d860-4894-9945-f0cc5d6a45f8'\nENV MS_ODBC_SQL_VERSION 18_18.4.1.1\nENV LC_ALL 'C'\n\nWORKDIR /etc/shlink\n\n# Install required PHP extensions\nRUN \\\n    # Temp install dev dependencies needed to compile the extensions\n    apk add --no-cache --virtual .dev-deps sqlite-dev postgresql-dev icu-dev libzip-dev zlib-dev libpng-dev linux-headers && \\\n    docker-php-ext-install -j\"$(nproc)\" pdo_mysql pdo_pgsql intl calendar sockets bcmath zip gd && \\\n    apk add --no-cache sqlite-libs && \\\n    docker-php-ext-install -j\"$(nproc)\" pdo_sqlite && \\\n    # Remove temp dev extensions, and install prod equivalents that are required at runtime\n    apk del .dev-deps && \\\n    apk add --no-cache postgresql icu libzip libpng\n\n# Install sqlsrv driver for x86_64 builds\nRUN apk add --no-cache --virtual .phpize-deps ${PHPIZE_DEPS} unixodbc-dev && \\\n    if [ $(uname -m) == \"x86_64\" ]; then \\\n      wget https://download.microsoft.com/download/${MS_ODBC_DOWNLOAD}/msodbcsql${MS_ODBC_SQL_VERSION}-1_amd64.apk && \\\n      apk add --allow-untrusted msodbcsql${MS_ODBC_SQL_VERSION}-1_amd64.apk && \\\n      pecl install pdo_sqlsrv-${PDO_SQLSRV_VERSION} && \\\n      docker-php-ext-enable pdo_sqlsrv && \\\n      rm msodbcsql${MS_ODBC_SQL_VERSION}-1_amd64.apk ; \\\n    fi; \\\n    apk del .phpize-deps\n\n# Install shlink\nFROM base AS builder\nCOPY . .\nCOPY --from=composer:2 /usr/bin/composer ./composer.phar\nRUN apk add --no-cache git && \\\n    php composer.phar install --no-dev --prefer-dist --optimize-autoloader --no-progress --no-interaction && \\\n    php composer.phar clear-cache && \\\n    rm -r docker composer.* && \\\n    sed -i \"s/%SHLINK_VERSION%/${SHLINK_VERSION}/g\" module/Core/src/Config/Options/AppOptions.php\n\n\n# Prepare final image\nFROM base\nLABEL maintainer=\"Alejandro Celaya <alejandro@alejandrocelaya.com>\"\n\nCOPY --from=builder --chown=${USER_ID} /etc/shlink .\nRUN ln -s /etc/shlink/bin/cli /usr/local/bin/shlink && \\\n    if [ \"$SHLINK_RUNTIME\" == 'rr' ]; then \\\n      php ./vendor/bin/rr get --no-interaction --no-config --location bin/ && chmod +x bin/rr ; \\\n    fi;\n\n# Expose default port\nEXPOSE 8080\n\n# Copy config specific for the image\nCOPY docker/docker-entrypoint.sh docker-entrypoint.sh\nCOPY docker/config/php.ini ${PHP_INI_DIR}/conf.d/\n\nUSER ${USER_ID}\n\nENTRYPOINT [\"/bin/sh\", \"./docker-entrypoint.sh\"]\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0625,
          "content": "The MIT License (MIT)\n\nCopyright (c) 2016-2024 Alejandro Celaya\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 6.5517578125,
          "content": "![Shlink](https://raw.githubusercontent.com/shlinkio/shlink.io/main/public/images/shlink-hero.png)\n\n[![Build Status](https://img.shields.io/github/actions/workflow/status/shlinkio/shlink/ci.yml?branch=develop&logo=github&style=flat-square)](https://github.com/shlinkio/shlink/actions/workflows/ci.yml?query=workflow%3A%22Continuous+integration%22)\n[![Code Coverage](https://img.shields.io/codecov/c/gh/shlinkio/shlink/develop?style=flat-square)](https://app.codecov.io/gh/shlinkio/shlink)\n[![Latest Stable Version](https://img.shields.io/github/release/shlinkio/shlink.svg?style=flat-square)](https://packagist.org/packages/shlinkio/shlink)\n[![Docker pulls](https://img.shields.io/docker/pulls/shlinkio/shlink.svg?logo=docker&style=flat-square)](https://hub.docker.com/r/shlinkio/shlink/)\n[![License](https://img.shields.io/github/license/shlinkio/shlink.svg?style=flat-square)](https://github.com/shlinkio/shlink/blob/main/LICENSE)\n\n[![Mastodon](https://img.shields.io/mastodon/follow/109329425426175098?color=%236364ff&domain=https%3A%2F%2Ffosstodon.org&label=follow&logo=mastodon&logoColor=white&style=flat-square)](https://fosstodon.org/@shlinkio)\n[![Bluesky](https://img.shields.io/badge/follow-shlinkio-0285FF.svg?style=flat-square&logo=bluesky&logoColor=white)](https://bsky.app/profile/shlink.io)\n[![Paypal donate](https://img.shields.io/badge/Donate-paypal-blue.svg?style=flat-square&logo=paypal&colorA=aaaaaa)](https://slnk.to/donate)\n\nA PHP-based self-hosted URL shortener that can be used to serve shortened URLs under your own domain.\n\n## Table of Contents\n\n- [Full documentation](#full-documentation)\n- [Docker image](#docker-image)\n- [Self-hosted](#self-hosted)\n    - [Download](#download)\n    - [Configure](#configure)\n- [Using shlink](#using-shlink)\n- [Contributing](#contributing)\n\n## Full documentation\n\nThis document contains the very basics to get started with Shlink. If you want to learn everything you can do with it, visit the [full searchable documentation](https://shlink.io/documentation/).\n\n## Docker image\n\nYou can learn how to use the official docker image by reading [the docs](https://shlink.io/documentation/install-docker-image/).\n\nThe idea is that you can just generate a container using the image and provide the custom config via env vars.\n\n## Self-hosted\n\nFirst, make sure the host where you are going to run shlink fulfills these requirements:\n\n* PHP 8.3 or 8.4\n* The next PHP extensions: json, curl, pdo, intl, gd and gmp/bcmath.\n    * apcu extension is recommended if you don't plan to use RoadRunner.\n    * xml extension is required if you want to generate QR codes in svg format.\n    * sockets and bcmath extensions are required if you want to integrate with a RabbitMQ instance.\n* MySQL, MariaDB, PostgreSQL, MicrosoftSQL or SQLite.\n    * You will also need the corresponding pdo variation for the database you are planning to use: `pdo_mysql`, `pdo_pgsql`, `pdo_sqlsrv` or `pdo_sqlite`.\n\n### Download\n\nIn order to run Shlink, you will need a built version of the project. There are two ways to get it.\n\n* **Using a dist file**\n\n    The easiest way to install shlink is by using one of the pre-bundled distributable packages.\n\n    Go to the [latest version](https://github.com/shlinkio/shlink/releases/latest) and download the `shlink*_dist.zip` file that suits your needs. You will find one for every supported PHP version.\n\n    Finally, decompress the file in the location of your choice.\n\n* **Building from sources**\n\n    If for any reason you want to build the project yourself, follow these steps:\n\n    * Clone the project with git (`git clone https://github.com/shlinkio/shlink.git`), or download it by clicking the **Clone or download** green button.\n    * Download the [Composer](https://getcomposer.org/download/) PHP package manager inside the project folder.\n    * Run `./build.sh 3.0.0`, replacing the version with the version number you are going to build (the version number is used as part of the generated dist file name, and to set the value returned when running `shlink -V` from the command line).\n\n    After that, you will have a dist file inside the `build` directory, that you need to decompress in the location of your choice.\n\n    > **Note**\n    >\n    > This is the process used when releasing new Shlink versions. After tagging the new version with git, the GitHub release is automatically created by a [GitHub workflow](https://github.com/shlinkio/shlink/actions?query=workflow%3A%22Publish+release%22), attaching the generated dist file to it.\n\n### Configure\n\nDespite how you built the project, you now need to configure it, by following these steps:\n\n* If you are going to use MySQL, MariaDB, PostgreSQL or Microsoft SQL Server, create an empty database with the name of your choice.\n* Recursively grant write permissions to the `data` directory. Shlink uses it to cache some information.\n* Set up the application by running the `vendor/bin/shlink-installer install` script. It is a command line tool that will guide you through the installation process. **Take into account that this tool has to be run directly on the server where you plan to host Shlink. Do not run it before uploading/moving it there.**\n* Generate your first API key by running `bin/cli api-key:generate`. You will need the key in order to interact with Shlink's API.\n\n## Using shlink\n\nOnce shlink is installed, there are two main ways to interact with it:\n\n* **The command line**: Try running `bin/cli` to see all the available commands.\n\n    All of them can be run with the `--help`/`-h` flag in order to see how to use them and all the available options.\n\n    It is probably a good idea to symlink the CLI entry point (`bin/cli`) to somewhere in your path, so that you can run shlink from any directory.\n\n* **The REST API**: The complete docs on how to use the API can be found [here](https://shlink.io/documentation/api-docs), and a sandbox which also documents every endpoint can be found in the [API Spec](https://api-spec.shlink.io/) portal.\n\n    However, you probably don't want to consume the raw API yourself. That's why a nice [web client](https://github.com/shlinkio/shlink-web-client) is provided that can be directly used from [https://app.shlink.io](https://app.shlink.io), or hosted by yourself.\n\nBoth the API and CLI allow you to do mostly the same operations, except for API key management, which can be done from the command line interface only.\n\n## Contributing\n\nIf you are trying to find out how to run the project in development mode or how to provide contributions, read the [CONTRIBUTING](CONTRIBUTING.md) doc.\n\n---\n\n> This product includes GeoLite2 data created by MaxMind, available from [https://www.maxmind.com](https://www.maxmind.com)\n"
        },
        {
          "name": "UPGRADE.md",
          "type": "blob",
          "size": 12.03125,
          "content": "# Upgrading\n\n## From v3.x to v4.x\n\n### General\n\n* Swoole and Openswoole are no longer officially supported runtimes. The recommended alternative is RoadRunner.\n* Dist files for swoole/openswoole are no longer published.\n* Webhooks are no longer supported. Migrate to one of the other [real-time updates](https://shlink.io/documentation/advanced/real-time-updates/) mechanisms.\n* When using RoadRunner, the amount of web workers, task workers and the port number can no longer be provided via config options. Use `WEB_WORKER_NUM`, `TASK_WORKER_NUM` and `PORT` env vars instead.\n\n### Changes in URL shortener\n\n* The short URLs `loosely` mode is no longer supported, as it was a typo. Use `loose` mode instead.\n* QR codes URLs now work by default, even for short URLs that cannot be visited due to max visits or date range limitations.\n  If you want to keep previous behavior, pass `QR_CODE_FOR_DISABLED_SHORT_URLS=false` or the equivalent configuration option.\n* Long URL title resolution is now enabled by default. You can still disable it by passing `AUTO_RESOLVE_TITLES=false` or the equivalent configuration option.\n* Shlink no longer allows to opt-in for long URL verification. Long URLs are unconditionally considered correct during short URL creation/edition.\n* Device long URLs have been migrated to the new Dynamic rule-based redirects system and will continue to work as expected, but the API surface has changed.\n  If you use shlink-web-client and rely on this feature when creating/updating short URLs, **DO NOT UPDATE YET**. Support for dynamic rule-based redirects will be added to shlink-web-client soon, in v4.1.0\n\n### Changes in REST API\n\n* REST API v1/v2 now behave like v3. This only affects error codes, which are now proper URIs.\n  * `INVALID_ARGUMENT` -> `https://shlink.io/api/error/invalid-data`\n  * `INVALID_SHORT_URL_DELETION` -> `https://shlink.io/api/error/invalid-short-url-deletion`\n  * `DOMAIN_NOT_FOUND` -> `https://shlink.io/api/error/domain-not-found`\n  * `FORBIDDEN_OPERATION` -> `https://shlink.io/api/error/forbidden-tag-operation`\n  * `INVALID_SLUG` -> `https://shlink.io/api/error/non-unique-slug`\n  * `INVALID_SHORTCODE` -> `https://shlink.io/api/error/short-url-not-found`\n  * `TAG_CONFLICT` -> `https://shlink.io/api/error/tag-conflict`\n  * `TAG_NOT_FOUND` -> `https://shlink.io/api/error/tag-not-found`\n  * `MERCURE_NOT_CONFIGURED` -> `https://shlink.io/api/error/mercure-not-configured`\n  * `INVALID_AUTHORIZATION` -> `https://shlink.io/api/error/missing-authentication`\n  * `INVALID_API_KEY` -> `https://shlink.io/api/error/invalid-api-key`\n* Endpoints previously returning props like `\"visitsCount\": {number}` no longer do it. There should be an alternative `\"visitsSummary\": {}` object with the amount nested on it.\n* It is no longer possible to order the short URLs list with `orderBy=visitsCount-ASC`/`orderBy=visitsCount-DESC`. Use `orderBy=visits-ASC`/`orderBy=visits-DESC` instead.\n* It is no longer possible to get tags with stats using `GET /tags?withStats=true`. Use `GET /tags/stats` endpoint instead.\n* The `deviceLongUrls` are ignored when calling `POST /short-urls` or `PATCH /short-urls/{shortCode}`. These should now be configured as dynamic rule-based redirects via `POST /short-urls/{shortCode}/redirect-rules`.\n\n### Changes in Docker image\n\n* Since openswoole is no longer supported, there are no longer image tags suffixed with `openswoole`. You should migrate to the default or `roadrunner` ones.\n* The `non-root` docker tag is no longer published, as all docker images are now running without super-user permissions.\n* Due to previous point, it is no longer possible to pass `ENABLE_PERIODIC_VISIT_LOCATE=true` in order to configure a cron job that locates visits periodically.\n  This was not really needed in the docker image, as visits are located on the fly.\n\n### Changes in integrations\n\n* Credentials in redis URLs should now be URL-encoded, as they are unconditionally url-decoded before being used. Previously, it was possible to customize this behavior via `REDIS_DECODE_CREDENTIALS=true|false`.\n* Providing redis URIs in the form of `tcp://password@6.6.6.6:6379` is no longer supported. If you want to provide password with no username, do `tcp://:password@6.6.6.6:6379` instead.\n\n## From v2.x to v3.x\n\n### Changes in REST API\n\n* The `type` property returned when trying to delete a URL that reached the visits threshold, when using the `DELETE /short-urls/{shortCode}` endpoint, is now `INVALID_SHORT_URL_DELETION` instead of `INVALID_SHORTCODE_DELETION`.\n* The `INVALID_AUTHORIZATION` error no longer includes the `expectedTypes` property. Use `expectedHeaders` one instead.\n* The `GET /rest/v2/short-urls` endpoint no longer allows ordering by `visitsCount`, `visitCount` or `originalUrl`. Use `visits` instead of the first two, and `longUrl` instead of the last one.\n* The `GET /rest/v2/short-urls` endpoint no longer allows providing the ordering params with array notation, as in `/shortUrls?orderBy[longUrl]=DESC`. Instead, use the following notation `/shortUrls?orderBy=longUrl-DESC`.\n* The `GET /rest/v2/short-urls` endpoint now has a default ordering of newest-to-oldest. Use `/shortUrls?orderBy=dateCreated-ASC` in order to keep the oldest-to-newest behavior.\n* Requests expecting a body no longer support url-encoded payloads. Instead, always use JSON bodies with `Content-Type: application/json`.\n* The next endpoints have been removed:\n  * `PUT /rest/v2/short-urls/{shortCode}/tags`: Use the `PATCH /rest/v2/short-urls/{shortCode}` endpoint to set the short URL tags.\n  * `POST /rest/v2/tags`: Use `POST /rest/v2/short-urls` or `PATCH /rest/v2/short-urls/{shortCodes}` to create new tags already attached to a short URL. Creating orphan tags makes no sense.\n\n### Changes in CLI\n\n* The next commands have been removed:\n  * `short-url:generate`: Use `short-url:create` instead.\n  * `tag:create`: Creating orphan tags makes no sense.\n* Params in camelCase format are no longer supported. They all have an equivalent kebab-case replacement. (for example, from `--startDate` to `--start-date`).\n* The `short-url:create` command no longer accepts the `--no-validate-url` flag. Now URLs are never validated, unless `--validate-url` is passed.\n* The CLI installer tool entry-points have changed.\n  * `bin/install`: replaced by `vendor/bin/shlink-installer install`\n  * `bin/update`: replaced by `vendor/bin/shlink-installer update`\n  * `bin/set-option`: replaced by `vendor/bin/shlink-installer set-option`\n\n### Changes in config\n\n* The next env vars have been removed:\n  * `INVALID_SHORT_URL_REDIRECT_TO`: Replaced by `DEFAULT_INVALID_SHORT_URL_REDIRECT`.\n  * `REGULAR_404_REDIRECT_TO`: Replaced by `DEFAULT_REGULAR_404_REDIRECT`.\n  * `BASE_URL_REDIRECT_TO`: Replaced by `DEFAULT_BASE_URL_REDIRECT`.\n  * `SHORT_DOMAIN_HOST`: Replaced by `DEFAULT_DOMAIN`.\n  * `SHORT_DOMAIN_SCHEMA`: Replaced by `IS_HTTPS_ENABLED`.\n  * `USE_HTTPS`: Replaced by `IS_HTTPS_ENABLED`.\n  * `VALIDATE_URLS`: There's no replacement. URLs are not validated, unless explicitly requested during creation or edition.\n* The next env vars behavior has changed:\n  * `DELETE_SHORT_URL_THRESHOLD`: Now, if this env var is not provided, the \"visits threshold\" won't be checked at all when deleting short URLs. Make sure you explicitly provide a value if you want to enable this feature.\n* Environment variables now have precedence over configuration set via the installer tool.\n\n### Other changes\n\n* A default GeoLite2 license key is no longer provided. If you don't provide your own as explained in [the docs](https://shlink.io/documentation/geolite-license-key/), Shlink will not try to update the file anymore.\n* The docker image no longer accepts providing configuration via json files mounted in the `config/params` folder. Only env vars are supported now.\n* If you were manually serving Shlink with swoole, the entry script has to be changed from `/path/to/shlink/vendor/bin/mezzio-swoole start` to `/path/to/shlink/vendor/bin/laminas mezzio:swoole:start`\n* The `GET /{shortCode}/qr-code/{size}` url has been removed. Use `GET /{shortCode}/qr-code?size={size}` instead.\n* Regular swoole extension is no longer supported. Use openswoole instead, as a direct replacement. In most of the cases you just need to uninstall one and install the other, the rest is transparent.\n\n## From v1.x to v2.x\n\n### PHP 7.4 required\n\nThis new version takes advantage of several new features introduced in PHP 7.4.\n\nThanks to that, the code is more reliable and robust, and easier to maintain and improve.\n\nHowever, that means that any previous PHP version is no longer supported.\n\n### Preview generation\n\nThe ability to generate website previews has been completely removed and has no replacement.\n\nThe feature never properly worked, and it wasn't really useful. Because of that, the feature is no longer available on Shlink 2.x\n\nRemoving this feature has these implications:\n\n* The `short-url:process-previews` CLI command no longer exists, and an error will be thrown if executed.\n* The `/{shortCode}/preview` path is no longer valid, and will return a 404 status.\n\n### Removed paths\n\nThese routes have been removed, but have a direct replacement:\n\n* `/qr/{shortCode}[/{size}]` -> `/{shortCode}/qr-code[/{size}]`\n* `PUT /rest/v{version}/short-urls/{shortCode}` -> `PATCH /rest/v{version}/short-urls/{shortCode}`\n\nWhen using the old ones, a 404 status will be returned now.\n\n### Removed command and route aliases\n\nAll the aliases for the CLI commands in the `short-urls` namespace have been removed. If you were using any of those commands with the `shortcode` or `short-code` prefixes, make sure to update them to use the `short-urls` prefix instead.\n\nThe same happens for all REST endpoints starting with `/short-code`. They were previously aliased to `/short-urls` ones, but they will return a 404 now. Make sure to update them accordingly.\n\n### JWT authentication removed\n\nShlink's REST API no longer accepts authentication using a JWT token. The API key has to be passed now in the `x-api-key` header.\n\nRemoving this feature has these implications:\n\n* Shlink will no longer introspect the `Authorization` header for Bearer tokens.\n* The `POST /rest/v{version}/authenticate` endpoint no longer exists and will return a 404.\n\n### API version is now required\n\nEndpoints need to provide a version in the path now. Previously, not providing a version used to fall back to v1. Now, it will return a 404 status, as no route will match.\n\nThe only exception is the `/rest/health` endpoint, which will continue working without the version.\n\n### API errors\n\nShlink v1.21.0 introduced support for API errors using the Problem Details format, as well as the v2 of the API.\n\nFor backwards compatibility reasons, requests performed to v1 continued to return the old `error` and `message` properties.\n\nStarting with Shlink v2.0.0, both versions of the API will no longer return those two properties.\n\nAs a replacement, use `type` instead of `error`, and `detail` instead of `message`.\n\n### Changes in models\n\nThe next REST API models have changed:\n\n* **ShortUrl**: The `originalUrl` property was deprecated and has been removed. Use `longUrl` instead.\n* **Visit**: The `remoteAddr` property was deprecated and has been removed. It has no replacement.\n* **VisitLocation**: The `latitude` and `longitude` properties are no longer strings, but float.\n\n### URL validation\n\nShlink can verify provided long URLs are valid before trying to shorten them. Starting with v2, it no longer does it by default and needs to be explicitly enabled instead of explicitly disabled.\n\n### Removed config options\n\nThe `not_found_redirect_to` config option and the `NOT_FOUND_REDIRECT_TO` env var are no longer taken into consideration for the docker image.\n\nInstead, use `invalid_short_url_redirect_to` and `INVALID_SHORT_URL_REDIRECT_TO` respectively.\n\n### Migrated to Laminas\n\nThe project has been using Zend Framework components since the beginning. Since it has been re-branded as [Laminas](https://getlaminas.org/), this version updates to the new set of components.\n\nUpdating to Laminas components has these implications:\n\n* If you were manually serving Shlink with swoole, the entry script has to be changed from `/path/to/shlink/vendor/bin/zend-expressive-swoole` to `/path/to/shlink/vendor/bin/mezzio-swoole`\n"
        },
        {
          "name": "bin",
          "type": "tree",
          "content": null
        },
        {
          "name": "build.sh",
          "type": "blob",
          "size": 1.2529296875,
          "content": "#!/usr/bin/env bash\nset -e\n\nif [ \"$#\" -lt 1 ]; then\n  echo \"Usage:\" >&2\n  echo \"   $0 {version}\" >&2\n  exit 1\nfi\n\nversion=$1\nphpVersion=$(php -r 'echo PHP_MAJOR_VERSION . \".\" . PHP_MINOR_VERSION;')\ndistId=\"shlink${version}_php${phpVersion}_dist\"\nbuiltContent=\"./build/${distId}\"\nprojectdir=$(pwd)\n[[ -f ./composer.phar ]] && composerBin='./composer.phar' || composerBin='composer'\n\n# Copy project content to temp dir\necho 'Copying project files...'\nrm -rf \"${builtContent}\"\nmkdir -p \"${builtContent}\"\nrsync -av * \"${builtContent}\" \\\n    --exclude=*docker* \\\n    --exclude=Dockerfile \\\n    --include=.htaccess \\\n    --include=config/roadrunner/.rr.yml \\\n    --exclude-from=./.dockerignore\ncd \"${builtContent}\"\n\n# Install dependencies\necho \"Installing dependencies with $composerBin...\"\n${composerBin} self-update\n${composerBin} install --no-dev --prefer-dist --optimize-autoloader --no-progress --no-interaction\n\n# Delete development files\necho 'Deleting dev files...'\nrm composer.*\n\n# Update Shlink version\nsed -i \"s/%SHLINK_VERSION%/${version}/g\" module/Core/src/Config/Options/AppOptions.php\n\n# Compressing file\necho 'Compressing files...'\ncd \"${projectdir}\"/build\nrm -f ./${distId}.zip\nzip -ry ./${distId}.zip ./${distId}\ncd \"${projectdir}\"\nrm -rf \"${builtContent}\"\n\necho 'Done!'\n"
        },
        {
          "name": "composer.json",
          "type": "blob",
          "size": 7.6298828125,
          "content": "{\n    \"name\": \"shlinkio/shlink\",\n    \"type\": \"project\",\n    \"homepage\": \"https://shlink.io\",\n    \"description\": \"A self-hosted and PHP-based URL shortener application with CLI and REST interfaces\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Alejandro Celaya Alastrué\",\n            \"homepage\": \"https://www.alejandrocelaya.com\",\n            \"email\": \"alejandro@alejandrocelaya.com\"\n        }\n    ],\n    \"require\": {\n        \"php\": \"^8.3\",\n        \"ext-curl\": \"*\",\n        \"ext-gd\": \"*\",\n        \"ext-json\": \"*\",\n        \"ext-mbstring\": \"*\",\n        \"ext-pdo\": \"*\",\n        \"akrabat/ip-address-middleware\": \"^2.5\",\n        \"cakephp/chronos\": \"^3.1\",\n        \"doctrine/dbal\": \"^4.2\",\n        \"doctrine/migrations\": \"^3.8\",\n        \"doctrine/orm\": \"^3.3\",\n        \"donatj/phpuseragentparser\": \"^1.10\",\n        \"endroid/qr-code\": \"^6.0\",\n        \"friendsofphp/proxy-manager-lts\": \"^1.0\",\n        \"geoip2/geoip2\": \"^3.1\",\n        \"guzzlehttp/guzzle\": \"^7.9\",\n        \"hidehalo/nanoid-php\": \"^2.0\",\n        \"jaybizzle/crawler-detect\": \"^1.3\",\n        \"laminas/laminas-config-aggregator\": \"^1.17\",\n        \"laminas/laminas-diactoros\": \"^3.5\",\n        \"laminas/laminas-inputfilter\": \"^2.31\",\n        \"laminas/laminas-servicemanager\": \"^3.23\",\n        \"laminas/laminas-stdlib\": \"^3.20\",\n        \"matomo/matomo-php-tracker\": \"^3.3\",\n        \"mezzio/mezzio\": \"^3.20\",\n        \"mezzio/mezzio-fastroute\": \"^3.12\",\n        \"mezzio/mezzio-problem-details\": \"^1.15\",\n        \"mlocati/ip-lib\": \"^1.18.1\",\n        \"pagerfanta/core\": \"^3.8\",\n        \"ramsey/uuid\": \"^4.7\",\n        \"shlinkio/doctrine-specification\": \"^2.2\",\n        \"shlinkio/shlink-common\": \"^6.6\",\n        \"shlinkio/shlink-config\": \"^3.4\",\n        \"shlinkio/shlink-event-dispatcher\": \"^4.1\",\n        \"shlinkio/shlink-importer\": \"^5.5\",\n        \"shlinkio/shlink-installer\": \"^9.4\",\n        \"shlinkio/shlink-ip-geolocation\": \"^4.2\",\n        \"shlinkio/shlink-json\": \"^1.2\",\n        \"spiral/roadrunner\": \"^2024.3\",\n        \"spiral/roadrunner-cli\": \"^2.6\",\n        \"spiral/roadrunner-http\": \"^3.5\",\n        \"spiral/roadrunner-jobs\": \"^4.6\",\n        \"symfony/console\": \"^7.2\",\n        \"symfony/filesystem\": \"^7.2\",\n        \"symfony/lock\": \"^7.2\",\n        \"symfony/process\": \"^7.2\",\n        \"symfony/string\": \"^7.2\"\n    },\n    \"require-dev\": {\n        \"devizzent/cebe-php-openapi\": \"^1.1.2\",\n        \"devster/ubench\": \"^2.1\",\n        \"phpstan/phpstan\": \"^2.0\",\n        \"phpstan/phpstan-doctrine\": \"^2.0\",\n        \"phpstan/phpstan-phpunit\": \"^2.0\",\n        \"phpstan/phpstan-symfony\": \"^2.0\",\n        \"phpunit/php-code-coverage\": \"^11.0\",\n        \"phpunit/phpcov\": \"^10.0\",\n        \"phpunit/phpunit\": \"^11.5\",\n        \"roave/security-advisories\": \"dev-master\",\n        \"shlinkio/php-coding-standard\": \"~2.4.0\",\n        \"shlinkio/shlink-test-utils\": \"^4.2\",\n        \"symfony/var-dumper\": \"^7.2\",\n        \"veewee/composer-run-parallel\": \"^1.4\"\n    },\n    \"conflict\": {\n        \"symfony/var-exporter\": \">=6.3.9,<=6.4.0\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"Shlinkio\\\\Shlink\\\\CLI\\\\\": \"module/CLI/src\",\n            \"Shlinkio\\\\Shlink\\\\Rest\\\\\": \"module/Rest/src\",\n            \"Shlinkio\\\\Shlink\\\\Core\\\\\": \"module/Core/src\"\n        },\n        \"files\": [\n            \"config/constants.php\",\n            \"module/Core/functions/array-utils.php\",\n            \"module/Core/functions/functions.php\"\n        ]\n    },\n    \"autoload-dev\": {\n        \"psr-4\": {\n            \"ShlinkioTest\\\\Shlink\\\\CLI\\\\\": \"module/CLI/test\",\n            \"ShlinkioCliTest\\\\Shlink\\\\CLI\\\\\": \"module/CLI/test-cli\",\n            \"ShlinkioTest\\\\Shlink\\\\Rest\\\\\": \"module/Rest/test\",\n            \"ShlinkioApiTest\\\\Shlink\\\\Rest\\\\\": \"module/Rest/test-api\",\n            \"ShlinkioDbTest\\\\Shlink\\\\Rest\\\\\": \"module/Rest/test-db\",\n            \"ShlinkioTest\\\\Shlink\\\\Core\\\\\": \"module/Core/test\",\n            \"ShlinkioDbTest\\\\Shlink\\\\Core\\\\\": \"module/Core/test-db\",\n            \"ShlinkioApiTest\\\\Shlink\\\\Core\\\\\": \"module/Core/test-api\"\n        },\n        \"files\": [\n            \"config/test/constants.php\"\n        ]\n    },\n    \"scripts\": {\n        \"ci\": [\n            \"@parallel cs stan openapi:validate test:unit:ci test:db:sqlite:ci test:db:postgres test:db:mysql test:db:maria test:db:ms\",\n            \"@parallel test:api:ci test:cli:ci\"\n        ],\n        \"cs\": \"phpcs -s\",\n        \"cs:fix\": \"phpcbf\",\n        \"stan\": [\"@putenv APP_ENV=test\", \"phpstan analyse\"],\n        \"test\": [\n            \"@parallel test:unit test:db\",\n            \"@parallel test:api test:cli\"\n        ],\n        \"test:unit\": [\"@putenv COLUMNS=120\", \"phpunit --order-by=random --testdox --testdox-summary\"],\n        \"test:unit:ci\": [\"@putenv XDEBUG_MODE=coverage\", \"@test:unit --coverage-php=build/coverage-unit.cov\"],\n        \"test:unit:pretty\": [\"@putenv XDEBUG_MODE=coverage\", \"@test:unit --coverage-html build/coverage-unit/coverage-html\"],\n        \"test:db\": \"@parallel test:db:sqlite:ci test:db:mysql test:db:maria test:db:postgres test:db:ms\",\n        \"test:db:sqlite\": [\"@putenv APP_ENV=test\", \"phpunit --order-by=random --testdox --testdox-summary -c phpunit-db.xml\"],\n        \"test:db:sqlite:ci\": [\"@putenv XDEBUG_MODE=coverage\", \"@test:db:sqlite --coverage-php build/coverage-db.cov\"],\n        \"test:db:mysql\": [\"@putenv DB_DRIVER=mysql\", \"@test:db:sqlite\"],\n        \"test:db:maria\": [\"@putenv DB_DRIVER=maria\", \"@test:db:sqlite\"],\n        \"test:db:postgres\": [\"@putenv DB_DRIVER=postgres\", \"@test:db:sqlite\"],\n        \"test:db:ms\": [\"@putenv DB_DRIVER=mssql\", \"@test:db:sqlite\"],\n        \"test:api\": \"bin/test/run-api-tests.sh\",\n        \"test:api:sqlite\": [\"@putenv DB_DRIVER=sqlite\", \"@test:api\"],\n        \"test:api:mysql\": [\"@putenv DB_DRIVER=mysql\", \"@test:api\"],\n        \"test:api:maria\": [\"@putenv DB_DRIVER=maria\", \"@test:api\"],\n        \"test:api:mssql\": [\"@putenv DB_DRIVER=mssql\", \"@test:api\"],\n        \"test:api:ci\": [\n            \"@putenv GENERATE_COVERAGE=yes\",\n            \"@test:api\",\n            \"phpcov merge build/coverage-api --php build/coverage-api.cov && rm build/coverage-api/*.cov\"\n        ],\n        \"test:api:pretty\": [\n            \"@putenv GENERATE_COVERAGE=yes\",\n            \"@test:api\",\n            \"phpcov merge build/coverage-api --html build/coverage-api/coverage-html && rm build/coverage-api/*.cov\"\n        ],\n        \"test:cli\": \"bin/test/run-cli-tests.sh\",\n        \"test:cli:ci\": [\n            \"@putenv GENERATE_COVERAGE=yes\",\n            \"@test:cli\",\n            \"vendor/bin/phpcov merge build/coverage-cli --php build/coverage-cli.cov && rm build/coverage-cli/*.cov\"\n        ],\n        \"test:cli:pretty\": [\n            \"@putenv GENERATE_COVERAGE=yes\",\n            \"@test:cli\",\n            \"phpcov merge build/coverage-cli --html build/coverage-cli/coverage-html && rm build/coverage-cli/*.cov\"\n        ],\n        \"openapi:validate\": \"@php -d error_reporting=\\\"E_ALL & ~E_DEPRECATED & ~E_USER_DEPRECATED\\\" vendor/bin/php-openapi validate docs/swagger/swagger.json\",\n        \"openapi:inline\": \"@php -d error_reporting=\\\"E_ALL & ~E_DEPRECATED & ~E_USER_DEPRECATED\\\" vendor/bin/php-openapi inline docs/swagger/swagger.json docs/swagger/openapi-inlined.json\",\n        \"swagger:validate\": [\n            \"echo \\\"This command is deprecated. Use openapi:validate instead\\\"\",\n            \"@openapi:validate\"\n        ],\n        \"swagger:inline\": [\n            \"echo \\\"This command is deprecated. Use openapi:inline instead\\\"\",\n            \"@openapi:inline\"\n        ],\n        \"clean:dev\": \"rm -f data/database.sqlite && rm -f config/params/generated_config.php\"\n    },\n    \"config\": {\n        \"sort-packages\": true,\n        \"platform-check\": false,\n        \"allow-plugins\": {\n            \"composer/package-versions-deprecated\": true,\n            \"dealerdirect/phpcodesniffer-composer-installer\": true,\n            \"veewee/composer-run-parallel\": true\n        }\n    }\n}\n"
        },
        {
          "name": "config",
          "type": "tree",
          "content": null
        },
        {
          "name": "data",
          "type": "tree",
          "content": null
        },
        {
          "name": "docker-compose.ci.yml",
          "type": "blob",
          "size": 0.3046875,
          "content": "services:\n    shlink_db_mysql:\n        user: '0'\n        environment:\n            MYSQL_DATABASE: shlink_test\n\n    shlink_db_postgres:\n        user: '0'\n        environment:\n            POSTGRES_DB: shlink_test\n\n    shlink_db_maria:\n        user: '0'\n        environment:\n            MYSQL_DATABASE: shlink_test\n"
        },
        {
          "name": "docker-compose.yml",
          "type": "blob",
          "size": 5.6474609375,
          "content": "services:\n    shlink_nginx:\n        container_name: shlink_nginx\n        image: nginx:1.25-alpine\n        ports:\n            - \"8000:80\"\n        volumes:\n            - ./:/home/shlink/www\n            - ./docs:/home/shlink/www/public/docs\n            - ./data/infra/vhost.conf:/etc/nginx/conf.d/default.conf\n        links:\n            - shlink_php\n\n    shlink_php:\n        container_name: shlink_php\n        user: 1000:1000\n        build:\n            context: .\n            dockerfile: ./data/infra/php.Dockerfile\n        ports:\n            - '8888:8888'\n        volumes:\n            - ./:/home/shlink/www\n            - ./data/infra/php.ini:/usr/local/etc/php/php.ini\n        links:\n            - shlink_db_mysql\n            - shlink_db_postgres\n            - shlink_db_maria\n            - shlink_db_ms\n            - shlink_redis\n            - shlink_redis_acl\n            - shlink_mercure\n            - shlink_mercure_proxy\n            - shlink_rabbitmq\n            - shlink_matomo\n        environment:\n            LC_ALL: C\n            DEFAULT_DOMAIN: localhost:8000\n        extra_hosts:\n            - 'host.docker.internal:host-gateway'\n\n    shlink_roadrunner:\n        container_name: shlink_roadrunner\n        user: 1000:1000\n        build:\n            context: .\n            dockerfile: ./data/infra/roadrunner.Dockerfile\n        ports:\n            - \"8800:8080\"\n        volumes:\n            - ./:/home/shlink\n            - ./data/infra/php.ini:/usr/local/etc/php/php.ini\n        links:\n            - shlink_db_mysql\n            - shlink_db_postgres\n            - shlink_db_maria\n            - shlink_db_ms\n            - shlink_redis\n            - shlink_redis_acl\n            - shlink_mercure\n            - shlink_mercure_proxy\n            - shlink_rabbitmq\n            - shlink_matomo\n        environment:\n            LC_ALL: C\n        extra_hosts:\n            - 'host.docker.internal:host-gateway'\n\n    shlink_db_mysql:\n        container_name: shlink_db_mysql\n        user: 1000:1000\n        image: mysql:8.0\n        ports:\n            - \"3307:3306\"\n        volumes:\n            - ./:/home/shlink/www\n            - ./data/infra/database:/var/lib/mysql\n        environment:\n            MYSQL_ROOT_PASSWORD: root\n            MYSQL_DATABASE: shlink\n\n    shlink_db_postgres:\n        container_name: shlink_db_postgres\n        user: 1000:1000\n        image: postgres:16.3-alpine\n        ports:\n            - \"5434:5432\"\n        volumes:\n            - ./:/home/shlink/www\n            - ./data/infra/database_pg:/var/lib/postgresql/data\n        environment:\n            POSTGRES_PASSWORD: root\n            POSTGRES_DB: shlink\n            PGDATA: /var/lib/postgresql/data/pgdata\n\n    shlink_db_maria:\n        container_name: shlink_db_maria\n        user: 1000:1000\n        image: mariadb:10.7\n        ports:\n            - \"3308:3306\"\n        volumes:\n            - ./:/home/shlink/www\n            - ./data/infra/database_maria:/var/lib/mysql\n        environment:\n            MYSQL_ROOT_PASSWORD: root\n            MYSQL_DATABASE: shlink\n            MYSQL_INITDB_SKIP_TZINFO: 1\n\n    shlink_db_ms:\n        container_name: shlink_db_ms\n        image: mcr.microsoft.com/mssql/server:2022-latest\n        ports:\n            - \"1433:1433\"\n        environment:\n            ACCEPT_EULA: Y\n            SA_PASSWORD: \"Passw0rd!\"\n\n    shlink_redis:\n        container_name: shlink_redis\n        image: redis:7.4-alpine\n        ports:\n            - \"6380:6379\"\n\n    shlink_redis_acl:\n        container_name: shlink_redis_acl\n        image: redis:7.4-alpine\n        command: [\"redis-server\", \"/usr/local/etc/redis/redis.conf\"]\n        ports:\n            - \"6382:6379\"\n        volumes:\n            - ./data/infra/redis/redis-acl.conf:/usr/local/etc/redis/redis.conf\n\n    shlink_mercure_proxy:\n        container_name: shlink_mercure_proxy\n        image: nginx:1.25-alpine\n        ports:\n            - \"8002:80\"\n        volumes:\n            - ./:/home/shlink/www\n            - ./data/infra/mercure_proxy_vhost.conf:/etc/nginx/conf.d/default.conf\n        links:\n            - shlink_mercure\n\n    shlink_mercure:\n        container_name: shlink_mercure\n        image: dunglas/mercure:v0.15\n        ports:\n            - \"3080:80\"\n        environment:\n            SERVER_NAME: \":80\"\n            MERCURE_PUBLISHER_JWT_KEY: mercure_jwt_key_long_enough_to_avoid_error\n            MERCURE_SUBSCRIBER_JWT_KEY: mercure_jwt_key_long_enough_to_avoid_error\n            MERCURE_EXTRA_DIRECTIVES: \"cors_origins https://app.shlink.io http://localhost:3000 http://127.0.0.1:3000 http://localhost:3002 http://127.0.0.1:3002 http://localhost:3005 http://127.0.0.1:3005\"\n\n    shlink_rabbitmq:\n        container_name: shlink_rabbitmq\n        image: rabbitmq:3.11-management-alpine\n        ports:\n            - \"15673:15672\"\n            - \"5673:5672\"\n        environment:\n            RABBITMQ_DEFAULT_USER: \"rabbit\"\n            RABBITMQ_DEFAULT_PASS: \"rabbit\"\n\n    shlink_swagger_ui:\n        container_name: shlink_swagger_ui\n        image: swaggerapi/swagger-ui:v5.11.3\n        ports:\n            - \"8005:8080\"\n        volumes:\n            - ./docs/swagger:/app\n\n    shlink_matomo:\n        container_name: shlink_matomo\n        image: matomo:5.0-apache\n        ports:\n            - \"8003:80\"\n        volumes:\n            # Matomo does not persist port in trusted hosts. This volume is needed to edit config afterward\n            # https://github.com/matomo-org/matomo/issues/9549\n            - ./data/infra/matomo:/var/www/html\n        links:\n            - shlink_db_mysql\n        environment:\n            MATOMO_DATABASE_HOST: \"shlink_db_mysql\"\n            MATOMO_DATABASE_ADAPTER: \"mysql\"\n            MATOMO_DATABASE_DBNAME: \"matomo\"\n            MATOMO_DATABASE_USERNAME: \"root\"\n            MATOMO_DATABASE_PASSWORD: \"root\"\n"
        },
        {
          "name": "docker",
          "type": "tree",
          "content": null
        },
        {
          "name": "docs",
          "type": "tree",
          "content": null
        },
        {
          "name": "indocker",
          "type": "blob",
          "size": 0.197265625,
          "content": "#!/usr/bin/env bash\n\n# Run docker containers if they are not up yet\nif ! [[ $(docker ps | grep shlink_roadrunner) ]]; then\n    docker compose up -d\nfi\n\ndocker exec -it shlink_roadrunner /bin/sh -c \"$*\"\n"
        },
        {
          "name": "module",
          "type": "tree",
          "content": null
        },
        {
          "name": "phpcs.xml",
          "type": "blob",
          "size": 0.4912109375,
          "content": "<?xml version=\"1.0\"?>\n<ruleset name=\"Coding standard\">\n    <description>Coding standard</description>\n\n    <!-- display progress -->\n    <arg value=\"p\" />\n    <arg name=\"colors\" />\n\n    <!-- inherit rules from: -->\n    <rule ref=\"Shlinkio\" />\n\n    <!-- Paths to check -->\n    <file>bin</file>\n    <file>module</file>\n    <file>config</file>\n    <file>docker/config</file>\n    <file>public/index.php</file>\n\n    <!-- Paths to exclude -->\n    <exclude-pattern>config/params/*</exclude-pattern>\n</ruleset>\n"
        },
        {
          "name": "phpstan.neon",
          "type": "blob",
          "size": 0.697265625,
          "content": "includes:\n    - vendor/phpstan/phpstan-doctrine/extension.neon\n    - vendor/phpstan/phpstan-symfony/extension.neon\n    - vendor/phpstan/phpstan-phpunit/extension.neon\n    - vendor/phpstan/phpstan-phpunit/rules.neon\nparameters:\n    level: 8\n    paths:\n        - module\n        - config\n        - docker/config\n    symfony:\n        consoleApplicationLoader: 'config/cli-app.php'\n    doctrine:\n        repositoryClass: Happyr\\DoctrineSpecification\\Repository\\EntitySpecificationRepository\n        objectManagerLoader: 'config/entity-manager.php'\n    ignoreErrors:\n        - '#should return int<0, max> but returns int#'\n        - '#expects -1\\|int<1, max>, int given#'\n        - identifier: missingType.iterableValue\n"
        },
        {
          "name": "phpunit-api.xml",
          "type": "blob",
          "size": 0.7138671875,
          "content": "<?xml version=\"1.0\"?>\n<phpunit\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:noNamespaceSchemaLocation=\"vendor/phpunit/phpunit/phpunit.xsd\"\n    bootstrap=\"./config/test/bootstrap_api_tests.php\"\n    colors=\"true\"\n    cacheDirectory=\"build/.phpunit/api-tests.cache\"\n    displayDetailsOnTestsThatTriggerWarnings=\"true\"\n    displayDetailsOnTestsThatTriggerDeprecations=\"true\"\n>\n    <testsuites>\n        <testsuite name=\"Shlink API tests\">\n            <directory>./module/*/test-api</directory>\n        </testsuite>\n    </testsuites>\n\n    <source>\n        <include>\n            <directory>./module/Core/src</directory>\n            <directory>./module/Rest/src</directory>\n        </include>\n    </source>\n</phpunit>\n"
        },
        {
          "name": "phpunit-cli.xml",
          "type": "blob",
          "size": 0.712890625,
          "content": "<?xml version=\"1.0\"?>\n<phpunit\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:noNamespaceSchemaLocation=\"vendor/phpunit/phpunit/phpunit.xsd\"\n    bootstrap=\"./config/test/bootstrap_cli_tests.php\"\n    colors=\"true\"\n    cacheDirectory=\"build/.phpunit/cli-tests.cache\"\n    displayDetailsOnTestsThatTriggerWarnings=\"true\"\n    displayDetailsOnTestsThatTriggerDeprecations=\"true\"\n>\n    <testsuites>\n        <testsuite name=\"Shlink CLI tests\">\n            <directory>./module/*/test-cli</directory>\n        </testsuite>\n    </testsuites>\n\n    <source>\n        <include>\n            <directory>./module/CLI/src</directory>\n            <directory>./module/Core/src</directory>\n        </include>\n    </source>\n</phpunit>\n"
        },
        {
          "name": "phpunit-db.xml",
          "type": "blob",
          "size": 1.0322265625,
          "content": "<?xml version=\"1.0\"?>\n<phpunit\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:noNamespaceSchemaLocation=\"vendor/phpunit/phpunit/phpunit.xsd\"\n    bootstrap=\"./config/test/bootstrap_db_tests.php\"\n    colors=\"true\"\n    cacheDirectory=\"build/.phpunit/db-tests.cache\"\n    displayDetailsOnTestsThatTriggerWarnings=\"true\"\n    displayDetailsOnTestsThatTriggerDeprecations=\"true\"\n>\n    <testsuites>\n        <testsuite name=\"Shlink database tests\">\n            <directory>./module/*/test-db</directory>\n        </testsuite>\n    </testsuites>\n\n    <source>\n        <include>\n            <directory>./module/*/src/Repository</directory>\n            <directory>./module/*/src/**/Repository</directory>\n            <directory>./module/*/src/**/**/Repository</directory>\n            <directory>./module/*/src/Spec</directory>\n            <directory>./module/*/src/**/Spec</directory>\n            <directory>./module/*/src/**/**/Spec</directory>\n            <file>./module/Core/src/Visit/Listener/*.php</file>\n        </include>\n    </source>\n</phpunit>\n"
        },
        {
          "name": "phpunit.xml.dist",
          "type": "blob",
          "size": 1.3125,
          "content": "<?xml version=\"1.0\"?>\n<phpunit\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:noNamespaceSchemaLocation=\"vendor/phpunit/phpunit/phpunit.xsd\"\n    bootstrap=\"./vendor/autoload.php\"\n    colors=\"true\"\n    cacheDirectory=\"build/.phpunit/unit-tests.cache\"\n    displayDetailsOnTestsThatTriggerWarnings=\"true\"\n    displayDetailsOnTestsThatTriggerDeprecations=\"true\"\n>\n    <testsuites>\n        <testsuite name=\"Core\">\n            <directory>./module/Core/test</directory>\n        </testsuite>\n        <testsuite name=\"Rest\">\n            <directory>./module/Rest/test</directory>\n        </testsuite>\n        <testsuite name=\"CLI\">\n            <directory>./module/CLI/test</directory>\n        </testsuite>\n    </testsuites>\n\n    <source>\n        <include>\n            <directory>./module/*/src</directory>\n        </include>\n        <exclude>\n            <directory>./module/Core/src/Repository</directory>\n            <directory>./module/Core/src/**/Repository</directory>\n            <directory>./module/Core/src/**/**/Repository</directory>\n            <directory>./module/Core/src/Spec</directory>\n            <directory>./module/Core/src/**/Spec</directory>\n            <directory>./module/Core/src/**/**/Spec</directory>\n            <file>./module/Core/src/Visit/Listener/*.php</file>\n        </exclude>\n    </source>\n</phpunit>\n"
        },
        {
          "name": "public",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}