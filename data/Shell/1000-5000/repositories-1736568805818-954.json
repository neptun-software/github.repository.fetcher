{
  "metadata": {
    "timestamp": 1736568805818,
    "page": 954,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjk1OQ==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "n4ru/1vyrain",
      "stars": 1054,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".gitmodules",
          "type": "blob",
          "size": 0.1787109375,
          "content": "[submodule \"patched-bios\"]\r\n\tpath = patched-bios\r\n\turl = https://github.com/n4ru/patched-bioses\r\n[submodule \"tools/IVPrep\"]\n\tpath = tools/IVPrep\n\turl = https://github.com/n4ru/IVPrep\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 8.2998046875,
          "content": "<pre>\n d888                                      d8b          \nd8888                                      Y8P          \n  888                                                   \n  888   888  888 888  888 888d888  8888b.  888 88888b.  \n  888   888  888 888  888 888P\"       \"88b 888 888 \"88b \n  888   Y88  88P 888  888 888     .d888888 888 888  888 \n  888    Y8bd8P  Y88b 888 888     888  888 888 888  888 \n8888888   Y88P    \"Y88888 888     \"Y888888 888 888  888 \n                      888                               \n                 Y8b d88P                               \n                  \"Y88P\"                                \n</pre>\n\n### Revision 5 (MD5: `dd30313a8665e870360920b00cec55c4`) \nWhile the website is down **[this is the link for REV 5](https://drive.google.com/open?id=1yusq98ja6NmI4G4txKVueFqY_ZEwaZvO)**\n\nSoftware-based \"jailbreak\" allowing all ivybridge-based xx30 thinkpads to softmod custom bios images.\n\nThis repo contains the main script and pre-compiled binary files used in the 1vyrain image to flash machines.\n\nThe main link to the ready to go live USB image can be found **[here](https://1vyra.in/)**.\n\nUpdates will be published here in the form of scripts that can be downloaded and run on the USB image.\n\n**Although 1vyrain has been very thoroughly tested and there were zero bricks during testing, there are some random quirks associated with bypassing normal flashing methods and things can always randomly go awry. There is no warranty or support guaranteed so please keep this in mind if you intend to use this software. I am not responsible for broken devices. Fortunately, it is impossible to permanently brick a device with this method. Worst case scenario, you can flash a backup or fresh BIOS using a hardware programmer.**\n\n# Issue reporting:\n- Read the [long form FAQ](https://medium.com/@n4ru/1vyrain-an-xx30-thinkpad-jailbreak-fd4bb0bdb654) before opening an issue.\n- Search for prior issues with the problem you are having\n- Only open issues related to 1vyrain, and IVprep\n- Do not open version compatibility issues for already supported machines\n\n# Features:\n- Automatic exploit chain unlocking bios region for flashing\n- Model detection and automatic bios flashing\n- Support for custom bios images (coreboot, skulls, heads)\n\n# BIOS Mod Features:\n- Overclocking support (35xx, 37xx, 38xx, 39xx CPUs)\n- Whitelist removal to use any WLAN/WWAN adapter\n- Advanced menu (custom fan curve, TDP, etc)\n- Intel ME \"Soft Temporary Disable\" via advanced menu\n\n# Before Installing\n**Please pay careful attention to this section.** Ensure you're on a compatible BIOS version before beginning (check compatibility [here](https://github.com/gch1p/thinkpad-bios-software-flashing-guide#bios-versions)). Run [IVprep](https://github.com/n4ru/IVprep) if you are not or are unsure. Clear any BIOS passwords or settings prior to flashing, and do a BIOS setting reset if you can. Ensure your ThinkPad is charged and your adapter is plugged in. If you intend to use a custom binary, make sure you plug in ethernet prior to boot and that your binary is directly accessible via URL.\n\n# Supported Systems\n- X230\n- X330*\n- X230t\n- T430\n- T430s\n- T530\n- W530\n\n*X330 machines are supported but not automatically detected. They are detected as normal X230 machines. The flashing menu has an additional option to flash a BIOS with the LVDS patch for machines detected as an X230.*\n*-i models of the above are also supported because of a shared firmware and motherboard*\n\n# Supporting New Systems and Opening Issues\nPlease read the [longform FAQ](https://medium.com/@n4ru/1vyrain-an-xx30-thinkpad-jailbreak-fd4bb0bdb654) before asking about compatibility or reporting an issue to make sure it is not a duplicate.\n\n# Installing\n\n1. Burn the 1vyrain image onto a flash drive. Validated and recommended tools are: `dd`, `Win32DiskImager`, and `Rufus (note you have to use DD mode)`\n2. Boot in UEFI mode from the flash drive, with Secure Boot off. Only boot the USB via onboard USB ports. USB ports on a docking station, ultrabase, and external USB hubs can cause issues.\n3. Follow the on-screen instructions.\n4. That's it! \n\nDon't be alarmed if your ThinkPad/ThinkLight power cycles a few times after a flash, or you get a CRC Security error. That is *normal* and will go away after another restart!\n\n\n**NOTE:** This will NOT modify your EC. You are safe to flash your EC with the battery or keyboard mod at any time as long as you are on a version compatible with the EC mod (check compatibility [here](https://github.com/hamishcoleman/thinkpad-ec#compatibilty-warning)). Both IVprep and 1vyrain will only modify the BIOS region! You can safely use this image to update to the latest modded BIOS without losing your EC mod!\n\n# Custom binaries\nBy default, the image includes the latest BIOS versions for all models, but you can flash a custom image such as heads, skulls, or a coreboot build. Make sure you have wired ethernet attached on boot, and that your image is *EXACTLY* 4MB and uploaded somewhere that you can grab with a simple `wget` command(http only, https currently not supported, you can also use the `--ignore-check-certificates` flag when running wget manually.). When asked what to flash, select \"Flash a custom BIOS from URL\" (option 2). Input the URL. That's it!\n\nDon't worry, if your download screws up or the filesize was wrong, the flashing will simply fail. You won't brick.\n\n# Custom splash image\nTo get a custom splash image follow this procedure:\n1. Update with original Lenovo update tool following LOGO.txt instructions\n2. Read back the `bios` region with flashrom or FPTW\n3. Chop off first 8M of the rom `dd if=backup.rom of=4M.rom bs=1M skip=8`\n4. Apply xx30 patches for your specific model from [firmware-patches](https://github.com/digmorepaka/thinkpad-firmware-patches) repo and fix checksum with [uefi-sign](https://github.com/thrimbor/thinkpad-uefi-sign)\n5. Downgrade with IVprep\n6. Write as a custom binary from liveUSB\n\n# Upgrading\n\nTo update from an older version of 1vyrain, to a newer version follow the follwing steps. Updates may include security bug fixes.\n\n1. Remove any BIOS passwords, including supervisor passwords\n2. It is suggested to reset BIOS to default settings, and save\n3. Take out any non-whitelisted devices because the FL1's are untouched\n4. Use IVprep to downgrade to a flashable stock BIOS version (very important, do not skip!)\n5. Obtain the latest 1vyrain image compatible with your machine.\n6. Follow the original installation steps above.\n\n**DO NOT SKIP**  the IVprep process at step 4. This is needed to safely reset to a stock BIOS version. This is different from using IVprep during installation to ensure you are using the proper image. Do not skip step 4 above, this is a crucial step.\n\nThe steps to upgrade are essentially the same for downgrading, or moving to any version. Ensure you obtain a compatible 1vyrain image for your machine, reset all passwords, reset to default, and use IVprep to downgrade. You would then go through the installation steps to install the desired 1vyrain version.\n\n# [Buy Stickers](https://thinkmods.store/collections/all-mods-1/products/1vyrain-sticker)\n<img src=\"https://i.imgur.com/pciprJ8.png\" width=\"250\" />\n\n\n# License\n\nI retain all rights to the code found in this repo (excluding the BIOS roms and the patcher binary), and no one may reproduce, distribute, or create derivative works from this repo without including this README.md file in its entirety!\n\nYou are not permitted to share this project on the ThinkPad subreddit.\n\n---\n\n# Credits\n\nThis was a monumental amount of work to put together and release, and took a lot of time. \n\nSpecial thanks goes to the ThinkPad discord for their efforts testing, especially \\x for helping create and finalize the BIOS patches, and digmorepaka for helping shrink the Linux image down significantly and continuing to maintain the repo.\n\nHuge thanks go out to [gch1p](https://github.com/gch1p/thinkpad-bios-software-flashing-guide) for publishing the method used and [pgera](https://github.com/hamishcoleman/thinkpad-ec/issues/70#issuecomment-417903315) for the working commands, without them this would have not been possible.\n\nSomehow we had ZERO bricks throughout the entire process! No hardware programmers were needed for recovery!\n\nPlease consider donating to the current maintainer if this helped you.\n\nTip digmorepaka (maintainer)\n- BTC bc1qq795vlcjzutl2nc8cclepz50yhvj07esx6vvwy\n- ETH 0x3883E27f38f0B7Cd450e56c1b8BD5B699174836d\n"
        },
        {
          "name": "patched-bios",
          "type": "commit",
          "content": null
        },
        {
          "name": "start.sh",
          "type": "blob",
          "size": 5.439453125,
          "content": "#!/bin/bash\n# init\nclear\necho \" d888                                      d8b          \"\necho \"d8888                                      Y8P          \"\necho \"  888                                                   \"\necho \"  888   888  888 888  888 888d888  8888b.  888 88888b.  \"\necho \"  888   888  888 888  888 888P\\`       \\`88b 888 888 \\`88b \"\necho \"  888   Y88  88P 888  888 888     .d888888 888 888  888 \"\necho \"  888    Y8bd8P  Y88b 888 888     888  888 888 888  888 \"\necho \"8888888   Y88P    \\`Y88888 888     \\`Y888888 888 888  888 \"\necho \"                      888                               \"\necho \"                 Y8b d88P                               \"\necho \"                  \\`Y88P\\`                              \"\necho \"Software-based jailbreak for IvyBridge (xx30) series ThinkPads\"\necho \"Revision 5\"\n# Give the network time to come online\nif ! ping -q -c 1 -W 1 8.8.8.8 >/dev/null; then echo -e \"\\e[1;32mWaiting 10 seconds for Network...\\e[0m\" && sleep 10; fi\n\n# verify EFI vars\nif [ ! -d \"/sys/firmware/efivars\" ] && [ ! -d \"/sys/firmware/efi\" ]; then\n    echo -e \"\\e[1;31mEFI Vars not found! Make sure you are running in UEFI mode! Exiting.\\e[0m\"\n    exit 1\nfi\n\n# Get BIOS version\nbios=$(dmidecode -t bios | grep -i version | awk {'print $2'})\nmachine=$(dmidecode -t system | grep -i \"Family\" | awk {'print $3$4'})\nversion=$(dmidecode -t bios | grep -i \"Version\" | awk {'print $3'} | sed 's/(//g' | sed 's/\\.//g')\nvalid=\"false\"\nflashsize=$(/root/flashrom/flashrom -p internal:laptop=force_I_want_a_brick --ifd -i bios -N -r /tmp/backup.rom > /dev/null && du /tmp/backup.rom | sed \"s/[^0-9]//g\")\npadding=$(expr $flashsize - 4096)\n\necho \"You may see an error about flash regions being locked, this is expected and should not be a concern.\"\n\n# Check if BIOS version is valid\ncase $machine in  \n    X230Tablet|X230t)\n        if [ \"259\" -gt \"$version\" ]; then machine=\"X230t\" && valid=\"true\"; fi ;;\n    X230|T530)\n        if [ \"261\" -gt \"$version\" ]; then valid=\"true\"; fi ;;\n    T430)\n        if [ \"265\" -gt \"$version\" ]; then valid=\"true\"; fi ;;\n    T430s)\n        if [ \"260\" -gt \"$version\" ]; then valid=\"true\"; fi ;;\n    W530)\n        if [ \"259\" -gt \"$version\" ]; then valid=\"true\"; fi ;;\n# Flash unlock works, fw patches don't. Temporarily disabled.\n#    L430)\n#        if [ \"255\" -gt \"$version\" ]; then valid=\"true\"; fi ;;\nesac\n\nif [ $valid == \"false\" ]; then\n    echo -e \"\\e[1;31mNo Valid BIOS detected, but you can still attempt the S3 exploit to see if your machine may be compatible in the future.\"\n    echo -e \"\\eYou will not be able to flash a custom BIOS, but this data can help make your device compatible in the future.\\e[0m\"\nelse\n    echo -e \"\\e[1;32mDetected Compatible Configuration - $machine $bios ($(dmidecode -t bios | grep -i \"Version\" | awk {'print $3'} | sed 's/(//g')).\\e[0m\"\nfi\n\nread -p \"Press Enter key to attempt BIOS exploit. Your ThinkPad will suspend as part of the process. Press the power button to wake it up!\"\n\n/root/chipsec/chipsec_main.py -m tools.uefi.s3script_modify -a replace_op,mmio_wr,0xFED1F804,0x6009,0x2\n\nsystemctl suspend\n\necho \"Waiting for wake from S3 sleep...\"\n\nsleep 5\n\nsetpci -s 00:1f.0 dc.b=09\n/root/chipsec/chipsec_util.py mmio write SPIBAR 0x74 0x4 0xAAF0800\n/root/chipsec/chipsec_util.py mmio write SPIBAR 0x78 0x4 0xADE0AD0\n/root/chipsec/chipsec_util.py mmio write SPIBAR 0x7C 0x4 0xB100B10\n/root/chipsec/chipsec_util.py mmio write SPIBAR 0x80 0x4 0xBFF0B40\n\n# make sure BIOS is writable now\nif [ $(/root/chipsec/chipsec_main.py -m common.bios_wp | sed 's/\\n//g' | grep -c 'None of the SPI protected ranges write-protect BIOS region') == 0 ]; then\n    echo -e \"\\e[1;31mBIOS still write-protected! Something went wrong or your device is not compatible. Exiting.\\e[0m\"\n    exit 1\nelif [ $valid == \"false\" ]; then\n    echo -e \"\\e[1;32mBIOS no longer write-protected! Your machine is compatible but unsupported. Please report the following details as a GitHub issue:\"\n    echo -e \"Machine: $machine\\nBIOS: $bios\\nVersion: $(dmidecode -t bios | grep -i \"Version\" | awk {'print $3'} | sed 's/(//g')\\nFlashsize: $flashsize \\e[0m\"\n    read -p \"Press Enter to exit the script.\"\n    exit 1\nfi\n\necho -e \"\\e[1;32mPlease enter a choice:\\e[0m\"\n$([[ $valid == \"true\" ]]) && echo \"1) Flash Modified Lenovo BIOS\"\n$([[ $machine == \"X230\" ]]) && echo \"0) Flash LVDS Modified Lenovo BIOS for X330(X230 FHD/QHD)\"\necho \"2) Flash a custom BIOS from URL\" \necho \"3) Shutdown / Abort Procedure\"\nread choice\ncase $choice in\n    \"0\") if [[ $machine == \"X230\" ]]; then machine=\"X330\"; fi ;;\n    \"2\")\n        echo \"Enter the full URL for your 4MB BIOS file. Double, triple, and QUADRUPLE check that you are providing the CORRECT file! \"\n        read userInput\n        if [[ -n \"$userInput\" ]]\n        then\n            echo \"Downloading from $userInput\"\n            wget $userInput -O /root/bios/custom.rom\n            machine=\"custom\"\n        fi\n        ;;\n    \"3\") shutdown NOW ;;\n    *) ;;\nesac\n\nread -p \"Press Enter key to begin flashing your jailbroken BIOS! Do NOT let the ThinkPad shut off during this process, you will need a hardware programmer to fix it!\"\n\necho -e \"\\e[1;32mFlashing BIOS...\\e[0m\"\n\n# pad the BIOS to 12MB or 16MB before flashing\ndd if=/dev/zero of=/root/bios/pad bs=1K count=$padding\ncat /root/bios/pad /root/bios/$machine.rom > /root/bios/rom.temp\n\n/root/flashrom/flashrom -p internal:laptop=force_I_want_a_brick -w /root/bios/rom.temp --ifd -i bios -N\n\nrm /root/bios/pad\nrm /root/bios/rom.temp\n\nread -p \"All done! Press Enter key to restart your ThinkPad or CTRL+C to exit to shell.\"\n\nreboot NOW\n"
        },
        {
          "name": "tools",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}