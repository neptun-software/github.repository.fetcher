{
  "metadata": {
    "timestamp": 1736568773315,
    "page": 894,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjg5OQ==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "yuru7/PlemolJP",
      "stars": 1108,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.056640625,
          "content": "bak/*\n!bak/.gitkeep\nwork/\nerror.log\nbuild/\nrelease_files/\n"
        },
        {
          "name": ".vscode",
          "type": "tree",
          "content": null
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 5.66796875,
          "content": "# Licensing\n\n- Source fonts are licensed under SIL OPEN FONT LICENSE Version 1.1.\n  For more information, see \"LICENSE_<FontName>\" file contained in the \"source\" directory.\n- \"PlemolJP\" are licensed under SIL OPEN FONT LICENSE Version 1.1.\n- Other source code, such as generating scripts, will use the MIT license.\n\n## \"PlemolJP\" licensing\n\nCopyright (c) 2021, Yuko OTAWARA. with Reserved Font Name \"PlemolJP\"\n\nThis Font Software is licensed under the SIL Open Font License, Version 1.1.\nThis license is copied below, and is also available with a FAQ at:\nhttps://scripts.sil.org/OFL\n\n\n-----------------------------------------------------------\nSIL OPEN FONT LICENSE Version 1.1 - 26 February 2007\n-----------------------------------------------------------\n\nPREAMBLE\nThe goals of the Open Font License (OFL) are to stimulate worldwide\ndevelopment of collaborative font projects, to support the font creation\nefforts of academic and linguistic communities, and to provide a free and\nopen framework in which fonts may be shared and improved in partnership\nwith others.\n\nThe OFL allows the licensed fonts to be used, studied, modified and\nredistributed freely as long as they are not sold by themselves. The\nfonts, including any derivative works, can be bundled, embedded, \nredistributed and/or sold with any software provided that any reserved\nnames are not used by derivative works. The fonts and derivatives,\nhowever, cannot be released under any other type of license. The\nrequirement for fonts to remain under this license does not apply\nto any document created using the fonts or their derivatives.\n\nDEFINITIONS\n\"Font Software\" refers to the set of files released by the Copyright\nHolder(s) under this license and clearly marked as such. This may\ninclude source files, build scripts and documentation.\n\n\"Reserved Font Name\" refers to any names specified as such after the\ncopyright statement(s).\n\n\"Original Version\" refers to the collection of Font Software components as\ndistributed by the Copyright Holder(s).\n\n\"Modified Version\" refers to any derivative made by adding to, deleting,\nor substituting -- in part or in whole -- any of the components of the\nOriginal Version, by changing formats or by porting the Font Software to a\nnew environment.\n\n\"Author\" refers to any designer, engineer, programmer, technical\nwriter or other person who contributed to the Font Software.\n\nPERMISSION & CONDITIONS\nPermission is hereby granted, free of charge, to any person obtaining\na copy of the Font Software, to use, study, copy, merge, embed, modify,\nredistribute, and sell modified and unmodified copies of the Font\nSoftware, subject to the following conditions:\n\n1) Neither the Font Software nor any of its individual components,\nin Original or Modified Versions, may be sold by itself.\n\n2) Original or Modified Versions of the Font Software may be bundled,\nredistributed and/or sold with any software, provided that each copy\ncontains the above copyright notice and this license. These can be\nincluded either as stand-alone text files, human-readable headers or\nin the appropriate machine-readable metadata fields within text or\nbinary files as long as those fields can be easily viewed by the user.\n\n3) No Modified Version of the Font Software may use the Reserved Font\nName(s) unless explicit written permission is granted by the corresponding\nCopyright Holder. This restriction only applies to the primary font name as\npresented to the users.\n\n4) The name(s) of the Copyright Holder(s) or the Author(s) of the Font\nSoftware shall not be used to promote, endorse or advertise any\nModified Version, except to acknowledge the contribution(s) of the\nCopyright Holder(s) and the Author(s) or with their explicit written\npermission.\n\n5) The Font Software, modified or unmodified, in part or in whole,\nmust be distributed entirely under this license, and must not be\ndistributed under any other license. The requirement for fonts to\nremain under this license does not apply to any document created\nusing the Font Software.\n\nTERMINATION\nThis license becomes null and void if any of the above conditions are\nnot met.\n\nDISCLAIMER\nTHE FONT SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT\nOF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL THE\nCOPYRIGHT HOLDER BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nINCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\nDAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM\nOTHER DEALINGS IN THE FONT SOFTWARE.\n\n## Other source licensing (MIT)\n\nCopyright (c) 2021 Yuko OTAWARA\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 3.8408203125,
          "content": "# PlemolJP (ãƒ—ãƒ¬ãƒ¢ãƒ« ã‚¸ã‚§ã‚¤ãƒ”ãƒ¼)\n\n***Ple***x ***Mo***no ***L***anguage ***JP***\n\nIBM Plex Mono ã¨ IBM Plex Sans JP ã‚’åˆæˆã—ãŸæ—¥æœ¬èªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ•ã‚©ãƒ³ãƒˆ PlemolJP (ãƒ—ãƒ¬ãƒ¢ãƒ« ã‚¸ã‚§ã‚¤ãƒ”ãƒ¼)\n\n**ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ â¡ [Releases](https://github.com/yuru7/PlemolJP/releases/latest)**\n\n> ğŸ’¡ [Homebrew (Mac) ã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•](doc/install_via_homebrew.md)\n\n![image](https://github.com/yuru7/PlemolJP/raw/images/beer.jpg)\n\nPlemolJP ã§ã¯åˆæˆå…ƒã® [IBM Plex Mono](https://github.com/IBM/plex) ã‚·ãƒªãƒ¼ã‚ºã¨åŒæ§˜ã«ã€ãƒãƒ¼ãƒãƒ«ãƒ»ã‚¤ã‚¿ãƒªãƒƒã‚¯ã®ä¸¡ã‚¹ã‚¿ã‚¤ãƒ«ã«å¯¾å¿œã—ã¾ã—ãŸã€‚ã¾ãŸã€å„ã‚¹ã‚¿ã‚¤ãƒ«ã”ã¨ã«8ç¨®ã®ã‚¦ã‚§ã‚¤ãƒˆ (Thin~Bold) ã‚’ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚  \n\nã•ã‚‰ã«æ—¥æœ¬èªç’°å¢ƒã§ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ã¤ã¾ãšããŒã¡ãªå…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã®èª¤å…¥åŠ›ã«æ°—ã¥ã‘ã‚‹ã‚ˆã†ã€å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å¯è¦–åŒ–ã™ã‚‹ä¿®æ­£ã‚’åŠ ãˆã¦ã„ã¾ã™ã€‚  \n\n> ğŸ’¡ å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã®å¯è¦–åŒ–ãŒä¸è¦ãªå ´åˆã¯ã€ãƒªãƒªãƒ¼ã‚¹ã® Assets ã‚ˆã‚Š `PlemolJP_HS_vx.x.x.zip` ã®åå‰å½¢å¼ã«ãªã£ã¦ã„ã‚‹ zip ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚(HS: Hidden Space)\n\n> ğŸ’¡ Powerline è¨˜å·ç­‰ãŒå«ã¾ã‚Œã‚‹ Nerd Fonts å¯¾å¿œç‰ˆã¯ã€ãƒªãƒªãƒ¼ã‚¹ã® Assets ã‚ˆã‚Š `PlemolJP_NF_vx.x.x.zip` ã®åå‰å½¢å¼ã«ãªã£ã¦ã„ã‚‹ zip ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚(NF: Nerd Fonts)\n\n|**ãƒ•ã‚©ãƒ³ãƒˆ ãƒ•ã‚¡ãƒŸãƒªãƒ¼**|**èª¬æ˜**|\n|:------------:|:---|\n|**PlemolJP**|æ–‡å­—å¹…æ¯”ç‡ã€ŒåŠè§’1:å…¨è§’2ã€ã®é€šå¸¸ç‰ˆã® PlemolJPã€‚ä¸»ã«ASCIIã‚³ãƒ¼ãƒ‰ã®è‹±æ•°å­—è¨˜å·ã« IBM Plex Mono ã®å­—ä½“ã‚’ä½¿ã„ã€ãã®ä»–ã®æ—¥æœ¬èªæ–‡å­—ã‚„è¨˜å·é¡ã« IBM Plex Sans JP ã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚|\n|**PlemolJP Console**|IBM Plex Mono ã®å­—ä½“ã‚’é™¤å¤–ã›ãšã«å…¨ã¦é©ç”¨ã—ãŸãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã€‚çŸ¢å°è¨˜å·ãªã©ã®å¤šãã®è¨˜å·ãŒåŠè§’ã§è¡¨ç¤ºã•ã‚Œã‚‹ãŸã‚ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã®åˆ©ç”¨ã‚„è¨˜å·é¡ã¯å¯èƒ½ãªé™ã‚ŠåŠè§’ã§è¡¨ç¤ºã—ãŸã„äººã«ã‚ªã‚¹ã‚¹ãƒ¡ã€‚|\n|**PlemolJP35**|é€šå¸¸ç‰ˆã® PlemolJP ã®æ–‡å­—å¹…æ¯”ç‡ã‚’ã€ŒåŠè§’3:å…¨è§’5ã€ã«ã—ãŸãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã€‚è‹±æ•°å­—ãŒé€šå¸¸ç‰ˆã® PlemolJP ã‚ˆã‚Šã‚‚å¤§ããè¡¨ç¤ºã•ã‚Œã‚‹ã€‚æ—¥æœ¬èªãŒå°‘ãªã„æ–‡æ›¸ã‚„ã‚³ãƒ¼ãƒ‰ã®å ´åˆã«ã¯ã“ã¡ã‚‰ã®æ–¹ãŒèª­ã¿ã‚„ã™ã„ã¨æ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚|\n|**PlemolJP35 Console**|PlemolJP Console ã®æ–‡å­—å¹…æ¯”ç‡ã‚’ åŠè§’3:å…¨è§’5 ã«ã—ãŸãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼|\n\n> ğŸ’¡ ãã®ä»–ã€å…¬é–‹ä¸­ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ•ã‚©ãƒ³ãƒˆ\n> - æ—¥æœ¬èªæ–‡å­—ã«æºæŸ”ã‚´ã‚·ãƒƒã‚¯ã€è‹±æ•°å­—éƒ¨åˆ†ã« Hack ã‚’ä½¿ã£ãŸ [**ç™½æº (ã¯ãã’ã‚“ï¼HackGen)**](https://github.com/yuru7/HackGen)\n> - æ—¥æœ¬èªæ–‡å­—ã«æºçœŸã‚´ã‚·ãƒƒã‚¯ã€è‹±æ•°å­—éƒ¨åˆ†ã« Fira Mono ã‚’ä½¿ã£ãŸ [**Firge (ãƒ•ã‚¡ãƒ¼ã‚¸)**](https://github.com/yuru7/Firge)\n> - æ—¥æœ¬èªæ–‡å­—ã«BIZ UDã‚´ã‚·ãƒƒã‚¯ã€è‹±æ•°å­—éƒ¨åˆ†ã« JetBrains Mono ã‚’ä½¿ã£ãŸ [**UDEV Gothic**](https://github.com/yuru7/udev-gothic)\n\n|Thin|ExtraLight|Light|Regular|\n|:---:|:---:|:---:|:---:|\n|![Thin](https://user-images.githubusercontent.com/13458509/133928702-21f1f391-e83a-4825-9059-36cf3d35f6f7.png)|![ExtraLight](https://user-images.githubusercontent.com/13458509/133928717-f5e17c66-b4e1-47fe-950f-ca3bc574a874.png)|![Light](https://user-images.githubusercontent.com/13458509/133928734-3ca98395-97b9-417b-96a1-ef83f614739a.png)|![Regular](https://user-images.githubusercontent.com/13458509/133928745-fe85ba2e-0d5e-406c-9d23-c832e11bc7b4.png)|\n\n|Text|Medium|SemiBold|Bold|\n|:---:|:---:|:---:|:---:|\n|![Text](https://user-images.githubusercontent.com/13458509/133928757-af5b6b82-5e1f-41bb-a925-f03769bdad00.png)|![Medium](https://user-images.githubusercontent.com/13458509/133928766-a4b22651-cc1c-48d7-b729-15a6a4070f44.png)|![SemiBold](https://user-images.githubusercontent.com/13458509/133928774-d8467d02-c301-4bef-84e5-1702f9f9645d.png)|![Bold](https://user-images.githubusercontent.com/13458509/133928784-7cc5f571-1161-41de-81b8-b97573e3f524.png)|\n"
        },
        {
          "name": "bak",
          "type": "tree",
          "content": null
        },
        {
          "name": "build.ini",
          "type": "blob",
          "size": 0.6220703125,
          "content": "[DEFAULT]\nVERSION = v2.0.2\nFONT_NAME = PlemolJP\nJP_FONT = IBM-Plex-Sans-JP/unhinted/IBMPlexSansJP-{style}.ttf\nENG_FONT = IBM-Plex-Mono/IBMPlexMono-{style}.ttf\nHACK_FONT = hack/Hack-{style}.ttf\nSOURCE_FONTS_DIR = source\nBUILD_FONTS_DIR = build\nVENDER_NAME = TWR\nFONTFORGE_PREFIX = fontforge_\nFONTTOOLS_PREFIX = fonttools_\nIDEOGRAPHIC_SPACE = AdjustedGlyphs/ideographic_space.sfd\nADJUST_R = AdjustedGlyphs/r-{style}.sfd\nCONSOLE_STR = Console\nWIDTH_35_STR = 35\nNERD_FONTS_STR = NF\nINVISIBLE_ZENKAKU_SPACE_STR = HS\nEM_ASCENT = 880\nEM_DESCENT = 120\nOS2_ASCENT = 950\nOS2_DESCENT = 225\nHALF_WIDTH_12 = 528\nFULL_WIDTH_35 = 1000\nITALIC_ANGLE = 9\n"
        },
        {
          "name": "doc",
          "type": "tree",
          "content": null
        },
        {
          "name": "fontforge_script.py",
          "type": "blob",
          "size": 41.15625,
          "content": "#!fontforge --lang=py -script\n\n# 2ã¤ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’åˆæˆã™ã‚‹\n\nimport configparser\nimport math\nimport os\nimport shutil\nimport sys\nimport uuid\nfrom decimal import ROUND_HALF_UP, Decimal\n\nimport fontforge\nimport psMat\n\n# iniãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€\nsettings = configparser.ConfigParser()\nsettings.read(\"build.ini\", encoding=\"utf-8\")\n\nVERSION = settings.get(\"DEFAULT\", \"VERSION\")\nFONT_NAME = settings.get(\"DEFAULT\", \"FONT_NAME\")\nJP_FONT = settings.get(\"DEFAULT\", \"JP_FONT\")\nENG_FONT = settings.get(\"DEFAULT\", \"ENG_FONT\")\nHACK_FONT = settings.get(\"DEFAULT\", \"HACK_FONT\")\nSOURCE_FONTS_DIR = settings.get(\"DEFAULT\", \"SOURCE_FONTS_DIR\")\nBUILD_FONTS_DIR = settings.get(\"DEFAULT\", \"BUILD_FONTS_DIR\")\nVENDER_NAME = settings.get(\"DEFAULT\", \"VENDER_NAME\")\nFONTFORGE_PREFIX = settings.get(\"DEFAULT\", \"FONTFORGE_PREFIX\")\nIDEOGRAPHIC_SPACE = settings.get(\"DEFAULT\", \"IDEOGRAPHIC_SPACE\")\nADJUST_R = settings.get(\"DEFAULT\", \"ADJUST_R\")\nCONSOLE_STR = settings.get(\"DEFAULT\", \"CONSOLE_STR\")\nWIDTH_35_STR = settings.get(\"DEFAULT\", \"WIDTH_35_STR\")\nINVISIBLE_ZENKAKU_SPACE_STR = settings.get(\"DEFAULT\", \"INVISIBLE_ZENKAKU_SPACE_STR\")\nNERD_FONTS_STR = settings.get(\"DEFAULT\", \"NERD_FONTS_STR\")\nEM_ASCENT = int(settings.get(\"DEFAULT\", \"EM_ASCENT\"))\nEM_DESCENT = int(settings.get(\"DEFAULT\", \"EM_DESCENT\"))\nOS2_ASCENT = int(settings.get(\"DEFAULT\", \"OS2_ASCENT\"))\nOS2_DESCENT = int(settings.get(\"DEFAULT\", \"OS2_DESCENT\"))\nHALF_WIDTH_12 = int(settings.get(\"DEFAULT\", \"HALF_WIDTH_12\"))\nFULL_WIDTH_35 = int(settings.get(\"DEFAULT\", \"FULL_WIDTH_35\"))\nITALIC_ANGLE = int(settings.get(\"DEFAULT\", \"ITALIC_ANGLE\"))\n\nCOPYRIGHT = \"\"\"[IBM Plex]\nCopyright (c) 2017 IBM Corp. https://github.com/IBM/plex\n\n[Hack]\nCopyright 2018 Source Foundry Authors https://github.com/source-foundry/Hack\n\n[Nerd Fonts]\nCopyright (c) 2014, Ryan L McIntyre https://ryanlmcintyre.com\n\n[PlemolJP]\nCopyright (c) 2021, Yuko Otawara\n\"\"\"  # noqa: E501\n\noptions = {}\nnerd_font = None\n\n\ndef main():\n    # ã‚ªãƒ—ã‚·ãƒ§ãƒ³åˆ¤å®š\n    get_options()\n    if options.get(\"unknown-option\"):\n        usage()\n        return\n\n    # buildãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹\n    if os.path.exists(BUILD_FONTS_DIR) and not options.get(\"do-not-delete-build-dir\"):\n        shutil.rmtree(BUILD_FONTS_DIR)\n        os.mkdir(BUILD_FONTS_DIR)\n    if not os.path.exists(BUILD_FONTS_DIR):\n        os.mkdir(BUILD_FONTS_DIR)\n\n    generate_font(\n        jp_style=\"Regular\",\n        eng_style=\"Regular\",\n        merged_style=\"Regular\",\n    )\n\n    # ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯ã“ã“ã§çµ‚äº†\n    if options.get(\"debug\"):\n        return\n\n    generate_font(\n        jp_style=\"Bold\",\n        eng_style=\"Bold\",\n        merged_style=\"Bold\",\n    )\n\n    generate_font(\n        jp_style=\"Thin\",\n        eng_style=\"Thin\",\n        merged_style=\"Thin\",\n    )\n    generate_font(\n        jp_style=\"ExtraLight\",\n        eng_style=\"ExtraLight\",\n        merged_style=\"ExtraLight\",\n    )\n    generate_font(\n        jp_style=\"Light\",\n        eng_style=\"Light\",\n        merged_style=\"Light\",\n    )\n    generate_font(\n        jp_style=\"Text\",\n        eng_style=\"Text\",\n        merged_style=\"Text\",\n    )\n    generate_font(\n        jp_style=\"Medium\",\n        eng_style=\"Medium\",\n        merged_style=\"Medium\",\n    )\n    generate_font(\n        jp_style=\"SemiBold\",\n        eng_style=\"SemiBold\",\n        merged_style=\"SemiBold\",\n    )\n\n    generate_font(\n        jp_style=\"Regular\",\n        eng_style=\"Italic\",\n        merged_style=\"Italic\",\n    )\n    generate_font(\n        jp_style=\"Bold\",\n        eng_style=\"BoldItalic\",\n        merged_style=\"BoldItalic\",\n    )\n    generate_font(\n        jp_style=\"Thin\",\n        eng_style=\"ThinItalic\",\n        merged_style=\"ThinItalic\",\n    )\n    generate_font(\n        jp_style=\"ExtraLight\",\n        eng_style=\"ExtraLightItalic\",\n        merged_style=\"ExtraLightItalic\",\n    )\n    generate_font(\n        jp_style=\"Light\",\n        eng_style=\"LightItalic\",\n        merged_style=\"LightItalic\",\n    )\n    generate_font(\n        jp_style=\"Text\",\n        eng_style=\"TextItalic\",\n        merged_style=\"TextItalic\",\n    )\n    generate_font(\n        jp_style=\"Medium\",\n        eng_style=\"MediumItalic\",\n        merged_style=\"MediumItalic\",\n    )\n    generate_font(\n        jp_style=\"SemiBold\",\n        eng_style=\"SemiBoldItalic\",\n        merged_style=\"SemiBoldItalic\",\n    )\n\n\ndef usage():\n    print(\n        f\"Usage: {sys.argv[0]} \"\n        \"[--hidden-zenkaku-space] [--35] [--console] [--nerd-font]\"\n    )\n\n\ndef get_options():\n    \"\"\"ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å–å¾—ã™ã‚‹\"\"\"\n\n    global options\n\n    # ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„\n    if len(sys.argv) == 1:\n        return\n\n    for arg in sys.argv[1:]:\n        # ã‚ªãƒ—ã‚·ãƒ§ãƒ³åˆ¤å®š\n        if arg == \"--do-not-delete-build-dir\":\n            options[\"do-not-delete-build-dir\"] = True\n        elif arg == \"--debug\":\n            options[\"debug\"] = True\n        elif arg == \"--hidden-zenkaku-space\":\n            options[\"hidden-zenkaku-space\"] = True\n        elif arg == \"--35\":\n            options[\"35\"] = True\n        elif arg == \"--console\":\n            options[\"console\"] = True\n        elif arg == \"--nerd-font\":\n            options[\"nerd-font\"] = True\n        else:\n            options[\"unknown-option\"] = True\n            return\n\n\ndef generate_font(jp_style, eng_style, merged_style):\n    print(f\"=== Generate {merged_style} ===\")\n\n    # åˆæˆã™ã‚‹ãƒ•ã‚©ãƒ³ãƒˆã‚’é–‹ã\n    jp_font, eng_font = open_fonts(jp_style, eng_style)\n\n    # ãƒ•ã‚©ãƒ³ãƒˆã®EMã‚’æƒãˆã‚‹\n    adjust_em(eng_font)\n\n    # Hack ãƒ•ã‚©ãƒ³ãƒˆã‚’ãƒãƒ¼ã‚¸ã™ã‚‹\n    merge_hack(jp_font, eng_font, merged_style)\n\n    if options.get(\"console\"):\n        # East Asian Ambiguous Width æ–‡å­—ã®åŠè§’åŒ–\n        eaaw_width_to_half(jp_font)\n        # ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨ã‚°ãƒªãƒ•ã‚’è¿½åŠ ã™ã‚‹\n        add_console_glyphs(eng_font)\n\n    if not options.get(\"console\"):\n        delete_not_console_glyphs(eng_font)\n\n    # é‡è¤‡ã™ã‚‹ã‚°ãƒªãƒ•ã‚’å‰Šé™¤ã™ã‚‹\n    jp_font = delete_duplicate_glyphs(jp_font, eng_font)\n\n    # ã„ãã¤ã‹ã®ã‚°ãƒªãƒ•å½¢çŠ¶ã«èª¿æ•´ã‚’åŠ ãˆã‚‹\n    adjust_some_glyph(jp_font, eng_font, merged_style)\n\n    # æ—¥æœ¬èªã‚°ãƒªãƒ•ã®æ–œä½“ã‚’ç”Ÿæˆã™ã‚‹\n    if \"Italic\" in merged_style:\n        transform_italic_glyphs(jp_font)\n\n    # åŠè§’å¹…ã‹å…¨è§’å¹…ã«ãªã‚‹ã‚ˆã†ã«å¤‰æ›ã™ã‚‹\n    set_width_600_or_1000(jp_font)\n\n    if options.get(\"35\"):\n        # eng_fontã‚’3:5å¹…ã«ã™ã‚‹\n        adjust_width_35_eng(eng_font)\n        # jp_fontã‚’3:5å¹…ã«ã™ã‚‹\n        adjust_width_35_jp(jp_font)\n    else:\n        # 1:2 å¹…ã«ã™ã‚‹\n        transform_half_width(jp_font, eng_font)\n        # è¦å®šã®å¹…ã‹ã‚‰ã¯ã¿å‡ºã—ãŸã‚°ãƒªãƒ•ã‚µã‚¤ã‚ºã‚’ç¸®å°ã™ã‚‹\n        down_scale_redundant_size_glyph(eng_font)\n\n    # GPOSãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤ã™ã‚‹\n    remove_lookups(jp_font, remove_gsub=False, remove_gpos=True)\n\n    # ç½«ç·šã‚’å…¨è§’ã«ã™ã‚‹\n    if not options.get(\"console\"):\n        make_box_drawing_full_width(eng_font, jp_font)\n\n    # å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å¯è¦–åŒ–ã™ã‚‹\n    if not options.get(\"hidden-zenkaku-space\"):\n        visualize_zenkaku_space(jp_font)\n\n    # Nerd Fontã®ã‚°ãƒªãƒ•ã‚’è¿½åŠ ã™ã‚‹\n    if options.get(\"nerd-font\"):\n        add_nerd_font_glyphs(jp_font, eng_font)\n\n    # ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ¯ã®ä¿®é£¾å­ã‚’è¿½åŠ ã™ã‚‹\n    variant = f\"{WIDTH_35_STR} \" if options.get(\"35\") else \"\"\n    variant += f\"{CONSOLE_STR} \" if options.get(\"console\") else \"\"\n    variant += (\n        INVISIBLE_ZENKAKU_SPACE_STR if options.get(\"hidden-zenkaku-space\") else \"\"\n    )\n    variant += NERD_FONTS_STR if options.get(\"nerd-font\") else \"\"\n    variant = variant.strip()\n\n    # macOSã§ã®postãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½¿ç”¨æ€§ã‚¨ãƒ©ãƒ¼å¯¾ç­–\n    # é‡è¤‡ã™ã‚‹ã‚°ãƒªãƒ•åã‚’æŒã¤ã‚°ãƒªãƒ•ã‚’ãƒªãƒãƒ¼ãƒ ã™ã‚‹\n    delete_glyphs_with_duplicate_glyph_names(eng_font)\n    delete_glyphs_with_duplicate_glyph_names(jp_font)\n\n    # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç·¨é›†ã™ã‚‹\n    cap_height = int(\n        Decimal(str(eng_font[0x0048].boundingBox()[3])).quantize(\n            Decimal(\"0\"), ROUND_HALF_UP\n        )\n    )\n    x_height = int(\n        Decimal(str(eng_font[0x0078].boundingBox()[3])).quantize(\n            Decimal(\"0\"), ROUND_HALF_UP\n        )\n    )\n    edit_meta_data(eng_font, merged_style, variant, cap_height, x_height)\n    edit_meta_data(jp_font, merged_style, variant, cap_height, x_height)\n\n    # ttfãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜\n    # ãƒ’ãƒ³ãƒ†ã‚£ãƒ³ã‚°ãŒæ®‹ã£ã¦ã„ã‚‹ã¨ä¸å…·åˆã«ç¹‹ãŒã‚ŠãŒã¡ãªã®ã§å¤–ã™ã€‚\n    # ãƒ’ãƒ³ãƒ†ã‚£ãƒ³ã‚°ã¯ã‚ã¨ã§ ttfautohint ã§è¡Œã†ã€‚\n    # flags=(\"no-hints\", \"omit-instructions\") ã‚’ä½¿ã†ã¨ãƒ’ãƒ³ãƒ†ã‚£ãƒ³ã‚°ã ã‘ã§ãªã GPOS ã‚„ GSUB ã‚‚å‰Šé™¤ã•ã‚Œã¦ã—ã¾ã†ã®ã§ä½¿ã‚ãªã„\n    font_name = f\"{FONT_NAME}{variant}\".replace(\" \", \"\")\n    eng_font.generate(\n        f\"{BUILD_FONTS_DIR}/{FONTFORGE_PREFIX}{font_name}-{merged_style}-eng.ttf\",\n    )\n    jp_font.generate(\n        f\"{BUILD_FONTS_DIR}/{FONTFORGE_PREFIX}{font_name}-{merged_style}-jp.ttf\",\n    )\n\n    # ttfã‚’é–‰ã˜ã‚‹\n    jp_font.close()\n    eng_font.close()\n\n\ndef open_fonts(jp_style: str, eng_style: str):\n    \"\"\"ãƒ•ã‚©ãƒ³ãƒˆã‚’é–‹ã\"\"\"\n    jp_font = fontforge.open(\n        SOURCE_FONTS_DIR + \"/\" + JP_FONT.replace(\"{style}\", jp_style)\n    )\n    eng_font = fontforge.open(\n        SOURCE_FONTS_DIR + \"/\" + ENG_FONT.replace(\"{style}\", eng_style)\n    )\n\n    # ãƒ•ã‚©ãƒ³ãƒˆå‚ç…§ã‚’è§£é™¤ã™ã‚‹\n    for glyph in jp_font.glyphs():\n        if glyph.isWorthOutputting():\n            jp_font.selection.select((\"more\", None), glyph)\n    jp_font.unlinkReferences()\n    for glyph in eng_font.glyphs():\n        if glyph.isWorthOutputting():\n            eng_font.selection.select((\"more\", None), glyph)\n    eng_font.unlinkReferences()\n    jp_font.selection.none()\n    eng_font.selection.none()\n\n    return jp_font, eng_font\n\n\ndef adjust_some_glyph(jp_font, eng_font, style=\"Regular\"):\n    \"\"\"ã„ãã¤ã‹ã®ã‚°ãƒªãƒ•å½¢çŠ¶ã«èª¿æ•´ã‚’åŠ ãˆã‚‹\"\"\"\n    eng_glyph_width = eng_font[0x0020].width\n    full_width = jp_font[0x3042].width\n    if options.get(\"35\"):\n        half_width = eng_glyph_width\n    else:\n        half_width = int(full_width / 2)\n\n    # ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®æ‹¡å¤§\n    eng_font.selection.select((\"unicode\", None), 0x0060)\n    for glyph in eng_font.selection.byGlyphs:\n        glyph.transform(psMat.rotate(math.radians(-25)))\n        glyph.transform(psMat.scale(1.08, 1.2))\n        glyph.transform(psMat.rotate(math.radians(33)))\n        glyph.transform(psMat.translate(110, -135))\n        glyph.width = eng_glyph_width\n    eng_font.selection.select((\"unicode\", None), 0x0027)\n    eng_font.selection.select((\"unicode\", \"more\"), 0x0022)\n    for glyph in eng_font.selection.byGlyphs:\n        glyph.transform(psMat.scale(1.09, 1.06))\n        glyph.transform(psMat.translate((eng_glyph_width - glyph.width) / 2, 0))\n        glyph.width = eng_glyph_width\n    # ; : , . ã®æ‹¡å¤§\n    eng_font.selection.select((\"unicode\", None), 0x003A)\n    eng_font.selection.select((\"unicode\", \"more\"), 0x003B)\n    eng_font.selection.select((\"unicode\", \"more\"), 0x002C)\n    eng_font.selection.select((\"unicode\", \"more\"), 0x002E)\n    for glyph in eng_font.selection.byGlyphs:\n        glyph.transform(psMat.scale(1.08, 1.08))\n        glyph.transform(psMat.translate((eng_glyph_width - glyph.width) / 2, 0))\n        glyph.width = eng_glyph_width\n    # Eclipse Pleiades åŠè§’ã‚¹ãƒšãƒ¼ã‚¹è¨˜å· (U+1d1c) å¯¾ç­–\n    eng_font.selection.select((\"unicode\", None), 0x054D)\n    eng_font.copy()\n    eng_font.selection.select((\"unicode\", None), 0x1D1C)\n    eng_font.paste()\n    for glyph in eng_font.selection.byGlyphs:\n        glyph.transform(psMat.scale(0.85, 0.6))\n        glyph.transform(psMat.translate((eng_glyph_width - glyph.width) / 2, 0))\n        glyph.width = eng_glyph_width\n\n    # å…¨è§’æ‹¬å¼§ã®é–‹ãã‚’åºƒãã™ã‚‹\n    for glyph_name in [0xFF08, 0xFF3B, 0xFF5B]:\n        glyph = jp_font[glyph_name]\n        glyph.transform(psMat.translate(-180, 0))\n        glyph.width = full_width\n    for glyph_name in [0xFF09, 0xFF3D, 0xFF5D]:\n        glyph = jp_font[glyph_name]\n        glyph.transform(psMat.translate(180, 0))\n        glyph.width = full_width\n    # å…¨è§’ãƒ”ãƒªã‚ªãƒ‰ã€ã‚«ãƒ³ãƒã‚’æ‹¡å¤§ã™ã‚‹\n    for glyph in jp_font.selection.select((\"unicode\", None), 0xFF0E).byGlyphs:\n        glyph.transform(psMat.scale(1.45, 1.45))\n        glyph.width = full_width\n    for glyph in jp_font.selection.select((\"unicode\", None), 0xFF0C).byGlyphs:\n        glyph.transform(psMat.scale(1.40, 1.40))\n        glyph.width = full_width\n    # LEFT SINGLE QUOTATION MARK (U+2018) ï½ DOUBLE LOW-9 QUOTATION MARK (U+201E) ã®å¹…ã‚’å…¨è§’å¹…ã«ã™ã‚‹\n    for glyph in jp_font.selection.select(\n        (\"unicode\", \"ranges\"), 0x2018, 0x2019\n    ).byGlyphs:\n        glyph.transform(psMat.scale(1.25, 1.25))\n        glyph.transform(psMat.translate((full_width - glyph.width) / 2, -150))\n        glyph.width = full_width\n    for glyph in jp_font.selection.select(\n        (\"unicode\", \"ranges\"), 0x201C, 0x201D\n    ).byGlyphs:\n        glyph.transform(psMat.scale(1.25, 1.25))\n        glyph.transform(psMat.translate((full_width - glyph.width) / 2, -150))\n        glyph.width = full_width\n\n    # Cent Sign, Pound Sign, Yen Sign ã¯åŠè§’è¨˜å·ã« IBM Plex Sans JP ã‚’ä½¿ç”¨\n    jp_font.selection.select((\"unicode\", None), 0x00A2)\n    jp_font.selection.select((\"unicode\", \"more\"), 0x00A3)\n    jp_font.selection.select((\"unicode\", \"more\"), 0x00A5)\n    for glyph in jp_font.selection.byGlyphs:\n        x_scale = half_width / glyph.width\n        if x_scale < 1:\n            glyph.transform(psMat.scale(x_scale, 1))\n        # å¾Œã‹ã‚‰è‹±èªãƒ•ã‚©ãƒ³ãƒˆã¨åŒã˜å¹…ã«ã™ã‚‹ãŸã‚ã«ä¸€æ—¦500å¹…ã¨ã—ã¦æ‰±ã†\n        glyph.transform(psMat.translate((500 - glyph.width) / 2, 0))\n        glyph.width = 500\n\n    # r ã‚°ãƒªãƒ•ã®èª¿æ•´\n    if \"Italic\" not in style:\n        eng_font[0x0072].clear()\n        eng_font[0x0155].clear()\n        eng_font[0x0157].clear()\n        eng_font[0x0159].clear()\n        eng_font.mergeFonts(f\"{SOURCE_FONTS_DIR}/\" + ADJUST_R.replace(\"{style}\", style))\n\n    # çŸ¢å°è¨˜å·ã®èª­ã¿ã¥ã‚‰ã•å¯¾ç­–\n    for uni in [*range(0x21CD, 0x21CF + 1), 0x21D0, 0x21D2, 0x21D4, 0x21DA, 0x21DB]:\n        eng_font.selection.select((\"unicode\", None), uni)\n        for glyph in eng_font.selection.byGlyphs:\n            scale_glyph_from_center(glyph, 1, 1.3)\n    for uni in [0x21D1, 0x21D3]:\n        eng_font.selection.select((\"unicode\", None), uni)\n        for glyph in eng_font.selection.byGlyphs:\n            scale_glyph_from_center(glyph, 1.3, 1)\n    for uni in range(0x21D6, 0x21D9 + 1):\n        eng_font.selection.select((\"unicode\", None), uni)\n        for glyph in eng_font.selection.byGlyphs:\n            scale_glyph_from_center(glyph, 1.3, 1.3)\n\n    # é¸æŠè§£é™¤\n    jp_font.selection.none()\n    eng_font.selection.none()\n\n\ndef adjust_em(font):\n    \"\"\"ãƒ•ã‚©ãƒ³ãƒˆã®EMã‚’æƒãˆã‚‹\"\"\"\n    font.em = EM_ASCENT + EM_DESCENT\n\n\ndef delete_duplicate_glyphs(jp_font, eng_font):\n    \"\"\"jp_fontã¨eng_fontã®ã‚°ãƒªãƒ•ã‚’æ¯”è¼ƒã—ã€é‡è¤‡ã™ã‚‹ã‚°ãƒªãƒ•ã‚’å‰Šé™¤ã™ã‚‹\"\"\"\n\n    eng_font.selection.none()\n    jp_font.selection.none()\n\n    # IBM Plex Sans JP ã‚°ãƒªãƒ•ã‚’ä½¿ç”¨\n    eng_font[0x00A2].clear()  # Cent Sign\n    eng_font[0x00A3].clear()  # Pound Sign\n    eng_font[0x00A5].clear()  # Yen Sign\n    eng_font[0x3000].clear()  # å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹\n    # U+274C (CROSS MARK) ã‚’å‰Šé™¤ (OSã«å«ã¾ã‚Œã‚‹çµµæ–‡å­—ãƒ•ã‚©ãƒ³ãƒˆã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã•ã›ã‚‹ãŸã‚)\n    eng_font[0x274C].clear()\n    # LATIN ç³»ã‚°ãƒªãƒ•ã«ã¯ IBM Plex Mono ã‚’ä½¿ç”¨\n    for glyph in jp_font.glyphs():\n        if 0x00C0 <= glyph.unicode <= 0x00D6:\n            glyph.clear()\n        elif 0x00D8 <= glyph.unicode <= 0x00F6:\n            glyph.clear()\n        elif 0x00F8 <= glyph.unicode <= 0x0259:\n            glyph.clear()\n\n    for glyph in jp_font.glyphs(\"encoding\"):\n        try:\n            if glyph.isWorthOutputting() and glyph.unicode > 0:\n                eng_font.selection.select((\"more\", \"unicode\"), glyph.unicode)\n        except ValueError:\n            # Encoding is out of range ã®ã¨ãã¯ç¶™ç¶šã™ã‚‹\n            continue\n\n    # å‰Šé™¤ç®‡æ‰€ã« altuni ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯å‰Šé™¤ã™ã‚‹å‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹\n    for glyph in eng_font.selection.byGlyphs:\n        jp_font.selection.select((\"more\", \"unicode\"), glyph.unicode)\n    altuni_glyph_list = []\n    for glyph in jp_font.selection.byGlyphs:\n        if glyph.altuni:\n            altuni_glyph_list.append(glyph.unicode)\n            for u in glyph.altuni:\n                print(f\"Copying glyph U+{glyph.unicode:04X} to U+{u[0]:04X}\")\n    jp_font = materialize_altuni_glyphs(jp_font, altuni_glyph_list)\n    jp_font.selection.none()\n\n    # é‡è¤‡ã™ã‚‹ã‚°ãƒªãƒ•ã‚’å‰Šé™¤\n    for glyph in eng_font.selection.byGlyphs:\n        jp_font.selection.select((\"more\", \"unicode\"), glyph.unicode)\n    for glyph in jp_font.selection.byGlyphs:\n        glyph.clear()\n\n    jp_font.selection.none()\n    eng_font.selection.none()\n\n    return jp_font\n\n\ndef materialize_altuni_glyphs(font, entity_glyph_unicode_list):\n    \"\"\"altuni ã‚’æŒ‡å®šã—ã¦ã„ã‚‹å‚ç…§å…ƒã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ã‚°ãƒªãƒ•ã‚’ã‚³ãƒ”ãƒ¼ã—ã€\n    å‚ç…§å…ˆ (å®Ÿä½“) ã® altuni ã‚’å‰Šé™¤ã™ã‚‹ã€‚ç•°ä½“å­—ã‚»ãƒ¬ã‚¯ã‚¿åˆ†ã¯ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã€‚\n    \"\"\"\n\n    for unicode in entity_glyph_unicode_list:\n        entity_glyph = font[unicode]\n        if not entity_glyph.altuni:\n            continue\n\n        # ä»¥ä¸‹å½¢å¼ã®ã‚¿ãƒ—ãƒ«ã§è¿”ã£ã¦ãã‚‹\n        # (unicode-value, variation-selector, reserved-field)\n        # ç¬¬3ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯å¸¸ã«0ãªã®ã§ç„¡è¦–\n        altunis = entity_glyph.altuni\n\n        # å‚ç…§å…ˆã® altuni ã‚’å‰Šé™¤\n        # ã“ã‚Œã‚’ã‚„ã‚‰ãªã„ã¨ã€ã‚°ãƒªãƒ•ã®ã‚³ãƒ”ãƒ¼æ™‚ã« altuni ãŒå‚ç…§ã•ã‚Œã¦ã—ã¾ã„ã€\n        # åŒã˜ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«è²¼ã‚Šä»˜ã„ã¦ã—ã¾ã£ã¦æ„å‘³ãŒãªã„\n        entity_glyph.altuni = None\n\n        processed = []\n        for altuni in altunis:\n            if altuni[0] in processed:\n                continue\n            if altuni[1] != -1:\n                # variation-selector ãŒ -1 ä»¥å¤–ã®å ´åˆã¯ç•°ä½“å­—ã‚»ãƒ¬ã‚¯ã‚¿ãªã®ã§ã‚¹ã‚­ãƒƒãƒ—\n                continue\n            processed.append(altuni[0])\n            # altuni å‚ç…§å…ƒã«ç©ºã‚°ãƒªãƒ•ã‚’ä½œæˆ\n            copy_target_unicode = altuni[0]\n            try:\n                entity_glyph.glyphname = f\"uni{entity_glyph.unicode:04X}\"\n                copied_glyph_name = f\"uni{copy_target_unicode:04X}\"\n                if copied_glyph_name == entity_glyph.glyphname:\n                    copied_glyph_name += \"copy\"\n                copy_target_glyph = font.createChar(\n                    copy_target_unicode,\n                    copied_glyph_name,\n                )\n            except Exception:\n                copy_target_glyph = font[copy_target_unicode]\n            copy_target_glyph.width = entity_glyph.width\n            # altuni å‚ç…§å…ƒã¸ã‚°ãƒªãƒ•ã‚’ã‚³ãƒ”ãƒ¼\n            font.selection.select(entity_glyph.glyphname)\n            font.copy()\n            font.selection.select(copy_target_glyph.glyphname)\n            font.paste()\n\n    # alt_uni å‡¦ç†å¾Œã€ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒãšã‚Œã‚‹ãŸã‚ã‹ä¸€éƒ¨ã®ã‚°ãƒªãƒ•ã® select() ãŒã†ã¾ãã„ã‹ãªããªã‚‹ã®ã§é–‹ãç›´ã™\n    font_path = f\"{BUILD_FONTS_DIR}/{font.fullname}_{uuid.uuid4()}.ttf\"\n    font.generate(font_path)\n    font.close()\n    font = fontforge.open(font_path)\n    # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤\n    os.remove(font_path)\n\n    return font\n\n\ndef delete_not_console_glyphs(eng_font):\n    eng_font.selection.none()\n\n    # è¨˜å·\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x00A1, 0x00A5)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x00A7, 0x00AA)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x00AC, 0x00B8)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x00D7)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x00F7)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x0401)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x0410, 0x044F)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x0451)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2010, 0x2026)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x2030)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2032, 0x2033)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x203B)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x203E)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2113, 0x2122)\n    # çŸ¢å°\n    # TODO: IBM Plex Sans JP v1.002 ã¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹ã¨çŸ¢å°ãŒæ‹¡å¼µã•ã‚Œã‚‹è¦‹è¾¼ã¿ã ãŒã€å½“è©²ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¯ä¸€éƒ¨ã‚°ãƒªãƒ•æ¬ ã‘ãŒã‚ã‚‹ãŸã‚ã•ã‚‰ã«ä¸Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå‡ºã¦ããŸéš›ã«å–ã‚Šè¾¼ã‚€\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2190, 0x2193)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x21C4, 0x21C6)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x21D2)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x21D4)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x21E6, 0x21E9)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x21F5)\n\n    # æ•°å­¦è¨˜å·\n    eng_font.selection.select((\"more\", \"unicode\"), 0x2200)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x2202)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x2211)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x2219)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x221A)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x221D, 0x2220)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2227, 0x222E)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2234, 0x2235)\n    eng_font.selection.select((\"more\", \"unicode\"), 0x2252)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2260, 0x2261)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2266, 0x2267)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x226A, 0x226B)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2282, 0x2283)\n    eng_font.selection.select((\"more\", \"unicode\", \"ranges\"), 0x2286, 0x2287)\n\n    # ä¸€éƒ¨ IBMPlexMono ãƒ™ãƒ¼ã‚¹ã«ã™ã‚‹\n    # å„ã‚¨ãƒ‡ã‚£ã‚¿ã®å¯è¦–åŒ–æ–‡å­—å¯¾ç­–\n    eng_font.selection.select((\"less\", \"unicode\"), 0x2022)\n    eng_font.selection.select((\"less\", \"unicode\"), 0x00B7)\n    eng_font.selection.select((\"less\", \"unicode\"), 0x2024)\n    eng_font.selection.select((\"less\", \"unicode\"), 0x2219)\n    eng_font.selection.select((\"less\", \"unicode\"), 0x25D8)\n    eng_font.selection.select((\"less\", \"unicode\"), 0x25E6)\n\n    for glyph in eng_font.selection.byGlyphs:\n        glyph.clear()\n\n    eng_font.selection.none()\n\n\ndef remove_lookups(font, remove_gsub=True, remove_gpos=True):\n    \"\"\"GSUB, GPOSãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤ã™ã‚‹\"\"\"\n    if remove_gsub:\n        for lookup in font.gsub_lookups:\n            font.removeLookup(lookup)\n    if remove_gpos:\n        for lookup in font.gpos_lookups:\n            font.removeLookup(lookup)\n\n\ndef transform_italic_glyphs(font):\n    \"\"\"æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã®æ–œä½“ã‚’ç”Ÿæˆã™ã‚‹\"\"\"\n    # å‚¾ãã‚’è¨­å®šã™ã‚‹\n    font.italicangle = -ITALIC_ANGLE\n    # å…¨ã‚°ãƒªãƒ•ã‚’æ–œä½“ã«å¤‰æ›\n    for glyph in font.glyphs():\n        orig_width = glyph.width\n        glyph.transform(psMat.skew(ITALIC_ANGLE * math.pi / 180))\n        glyph.transform(psMat.translate(-40, 0))\n        glyph.width = orig_width\n\n\ndef set_width_600_or_1000(jp_font):\n    \"\"\"åŠè§’å¹…ã‹å…¨è§’å¹…ã«ãªã‚‹ã‚ˆã†ã«å¤‰æ›ã™ã‚‹\"\"\"\n    for glyph in jp_font.glyphs():\n        if 0 < glyph.width < 500:\n            # ã‚°ãƒªãƒ•ä½ç½®ã‚’èª¿æ•´ã—ã¦ã‹ã‚‰å¹…ã‚’è¨­å®š\n            glyph.transform(psMat.translate((500 - glyph.width) / 2, 0))\n            glyph.width = 500\n        elif (\n            500 < glyph.width < 1000 or 0xC0 <= glyph.unicode <= 0x192\n        ):  # ç‰¹å®šã®ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé–¢é€£æ–‡å­— 0xC0 - 0x192 ã¯å…¨è§’å¹…ã«ã™ã‚‹\n            # ã‚°ãƒªãƒ•ä½ç½®ã‚’èª¿æ•´ã—ã¦ã‹ã‚‰å¹…ã‚’è¨­å®š\n            glyph.transform(psMat.translate((1000 - glyph.width) / 2, 0))\n            glyph.width = 1000\n\n        # 500å¹…ã®å ´åˆã¯ä¸€æ—¦ 600 å¹…ã«ã™ã‚‹\n        if glyph.width == 500:\n            glyph.transform(psMat.translate((600 - glyph.width) / 2, 0))\n            glyph.width = 600\n\n        # ãªãœã‹æ¨™æº–ã®å¹…ã§ã¯ãªã„ã‚°ãƒªãƒ•ã®å€‹åˆ¥èª¿æ•´\n        if glyph.unicode == 0x51F0:\n            glyph.transform(psMat.translate((1000 - glyph.width) / 2, 0))\n            glyph.width = 1000\n        if glyph.glyphname == \"perthousand.full\":\n            glyph.width = 1000\n\n\ndef adjust_width_35_eng(eng_font):\n    \"\"\"è‹±èªãƒ•ã‚©ãƒ³ãƒˆã‚’åŠè§’3:å…¨è§’5å¹…ã«ãªã‚‹ã‚ˆã†ã«å¤‰æ›ã™ã‚‹\"\"\"\n    original_half_width = eng_font[0x0030].width\n    after_width = int(FULL_WIDTH_35 * 3 / 5)\n    x_scale = after_width / original_half_width\n    for glyph in eng_font.glyphs():\n        if 0 < glyph.width < after_width:\n            # after_width ã‚ˆã‚Šå¹…ãŒç‹­ã„å ´åˆã¯ä½ç½®åˆã‚ã›ã—ã¦ã‹ã‚‰å¹…ã‚’è¨­å®š\n            glyph.transform(psMat.translate((after_width - glyph.width) / 2, 0))\n            glyph.width = after_width\n        elif after_width < glyph.width <= original_half_width:\n            # after_width ã‚ˆã‚Šå¹…ãŒåºƒã„ã€ã‹ã¤å…ƒã®åŠè§’å¹…ã‚ˆã‚Šç‹­ã„å ´åˆã¯ç¸®å°ã—ã¦ã‹ã‚‰å¹…ã‚’è¨­å®š\n            glyph.transform(psMat.scale(x_scale, 1))\n            glyph.width = after_width\n        elif original_half_width < glyph.width:\n            # after_width ã‚ˆã‚Šå¹…ãŒåºƒã„ (ãŠãã‚‰ãå…¨ã¦ãƒªã‚¬ãƒãƒ£) ã®å ´åˆã¯å€æ•°ã«ã™ã‚‹\n            multiply_number = round(glyph.width / original_half_width)\n            glyph.transform(psMat.scale(x_scale, 1))\n            glyph.width = after_width * multiply_number\n\n\ndef adjust_width_35_jp(jp_font):\n    \"\"\"æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã‚’åŠè§’3:å…¨è§’5å¹…ã«ãªã‚‹ã‚ˆã†ã«å¤‰æ›ã™ã‚‹\"\"\"\n    after_width = int(FULL_WIDTH_35 * 3 / 5)\n    jp_half_width = jp_font[0x3000].width / 2\n    jp_full_width = jp_font[0x3000].width\n    for glyph in jp_font.glyphs():\n        if glyph.width == jp_half_width:\n            glyph.transform(psMat.translate((after_width - glyph.width) / 2, 0))\n            glyph.width = after_width\n        elif glyph.width == jp_full_width:\n            glyph.transform(psMat.translate((FULL_WIDTH_35 - glyph.width) / 2, 0))\n            glyph.width = FULL_WIDTH_35\n\n\ndef transform_half_width(jp_font, eng_font):\n    \"\"\"1:2å¹…ã«ãªã‚‹ã‚ˆã†ã«å¤‰æ›ã™ã‚‹\"\"\"\n    before_width_eng = eng_font[0x0030].width\n    after_width_eng = HALF_WIDTH_12\n    # å˜ç´”ãª ç¸®å°å¾Œå¹… / å…ƒã®å¹… ã ã¨ç‹­ããªã‚Šã™ã‚Šãã‚‹ã®ã§ã€\n    # å€ç‡ã‚’è€ƒæ…®ã—ã¦åˆ†å­ã¯å¤§ãã‚ã«ã—ã¦ã„ã‚‹\n    x_scale = 546 / before_width_eng\n    for glyph in eng_font.glyphs():\n        if glyph.width > 0:\n            # ãƒªã‚¬ãƒãƒ£è€ƒæ…®\n            after_width_eng_multiply = after_width_eng * round(\n                glyph.width / before_width_eng\n            )\n            # ç¸®å°\n            glyph.transform(psMat.scale(x_scale, 0.97))\n            # å¹…ã‚’è¨­å®š\n            glyph.transform(\n                psMat.translate((after_width_eng_multiply - glyph.width) / 2, 0)\n            )\n            glyph.width = after_width_eng_multiply\n\n    for glyph in jp_font.glyphs():\n        if glyph.width == 600:\n            # è‹±æ•°å­—ã‚°ãƒªãƒ•ã¨åŒã˜å¹…ã«ã™ã‚‹\n            glyph.transform(psMat.translate((after_width_eng - glyph.width) / 2, 0))\n            glyph.width = after_width_eng\n        elif glyph.width == 1000:\n            # å…¨è§’ã¯ after_width_eng ã®å€ã®å¹…ã«ã™ã‚‹\n            glyph.transform(psMat.translate((after_width_eng * 2 - glyph.width) / 2, 0))\n            glyph.width = after_width_eng * 2\n\n\ndef make_box_drawing_full_width(eng_font, jp_font):\n    \"\"\"ç½«ç·šã‚’å…¨è§’ã«ã™ã‚‹\"\"\"\n    # è‹±èªãƒ•ã‚©ãƒ³ãƒˆå´ã¯å®Œå…¨ã«å‰Šé™¤\n    eng_font.selection.select((\"unicode\", \"ranges\"), 0x2500, 0x257F)\n    for glyph in eng_font.selection.byGlyphs:\n        glyph.clear()\n    eng_font.selection.none()\n    # æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆå´ã¯å‰Šé™¤ã—ã¦ã‹ã‚‰å…¨è§’ç”¨ã‚°ãƒªãƒ•ã‚’ãƒãƒ¼ã‚¸ã™ã‚‹\n    jp_font.selection.select((\"unicode\", \"ranges\"), 0x2500, 0x257F)\n    for glyph in jp_font.selection.byGlyphs:\n        glyph.clear()\n    jp_font.selection.none()\n    jp_font.mergeFonts(fontforge.open(f\"{SOURCE_FONTS_DIR}/FullWidthBoxDrawings.sfd\"))\n    # å¹…è¨­å®šã¨ä½ç½®èª¿æ•´\n    width_to = jp_font[0x3042].width\n    jp_font.selection.select((\"unicode\", \"ranges\"), 0x2500, 0x257F)\n    for glyph in jp_font.selection.byGlyphs:\n        # å¹…ãŒèª¿æ•´å‰ã‚ˆã‚ŠåºƒãŒã‚‹å ´åˆã¯æ‹¡å¤§ã™ã‚‹\n        width_from = glyph.width\n        if width_from < width_to:\n            glyph.transform(psMat.scale(width_to / width_from, 1))\n        width_from = glyph.width\n        glyph.transform(psMat.translate((width_to - width_from) / 2, 0))\n        glyph.width = width_to\n    jp_font.selection.none()\n\n\ndef visualize_zenkaku_space(jp_font):\n    \"\"\"å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å¯è¦–åŒ–ã™ã‚‹\"\"\"\n    # å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å·®ã—æ›¿ãˆ\n    glyph = jp_font[0x3000]\n    width_to = glyph.width\n    glyph.clear()\n    jp_font.mergeFonts(fontforge.open(f\"{SOURCE_FONTS_DIR}/{IDEOGRAPHIC_SPACE}\"))\n    # å¹…ã‚’è¨­å®šã—ä½ç½®èª¿æ•´\n    jp_font.selection.select(\"U+3000\")\n    for glyph in jp_font.selection.byGlyphs:\n        width_from = glyph.width\n        glyph.transform(psMat.translate((width_to - width_from) / 2, 0))\n        glyph.width = width_to\n    jp_font.selection.none()\n\n\ndef merge_hack(jp_font, eng_font, style):\n    \"\"\"Hack ãƒ•ã‚©ãƒ³ãƒˆã‚’ãƒãƒ¼ã‚¸ã™ã‚‹\"\"\"\n    if \"Bold\" in style:\n        hack_font = fontforge.open(\n            f\"{SOURCE_FONTS_DIR}/\" + HACK_FONT.replace(\"{style}\", \"Bold\")\n        )\n    else:\n        hack_font = fontforge.open(\n            f\"{SOURCE_FONTS_DIR}/\" + HACK_FONT.replace(\"{style}\", \"Regular\")\n        )\n    hack_font.em = EM_ASCENT + EM_DESCENT\n    # æ—¢ã«è‹±èªãƒ•ã‚©ãƒ³ãƒˆå´ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯hackã‚°ãƒªãƒ•ã¯å‰Šé™¤ã™ã‚‹\n    for glyph in eng_font.glyphs():\n        if glyph.unicode != -1:\n            try:\n                for g in hack_font.selection.select(\n                    (\"unicode\", None), glyph.unicode\n                ).byGlyphs:\n                    g.clear()\n            except Exception:\n                pass\n    if options.get(\"console\"):\n        # Consoleç‰ˆã§ã¯ã€æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã‚ˆã‚Šhackãƒ•ã‚©ãƒ³ãƒˆã®ã‚°ãƒªãƒ•ã‚’å„ªå…ˆã™ã‚‹\n        for glyph in hack_font.glyphs():\n            if glyph.unicode != -1:\n                try:\n                    for g in jp_font.selection.select(\n                        (\"unicode\", None), glyph.unicode\n                    ).byGlyphs:\n                        g.clear()\n                except Exception:\n                    pass\n    else:\n        # æ—¢ã«æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆå´ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯hackã‚°ãƒªãƒ•ã¯å‰Šé™¤ã™ã‚‹\n        for glyph in jp_font.glyphs():\n            if glyph.unicode != -1:\n                try:\n                    for g in hack_font.selection.select(\n                        (\"unicode\", None), glyph.unicode\n                    ).byGlyphs:\n                        g.clear()\n                except Exception:\n                    pass\n    # EM 1000 ã«ã—ãŸã¨ãã®å¹…ã«åˆã‚ã›ã¦èª¿æ•´\n    half_width = int(FULL_WIDTH_35 * 3 / 5)\n    for glyph in hack_font.glyphs():\n        if glyph.width > 0:\n            glyph.transform(psMat.translate((half_width - glyph.width) / 2, 0))\n            glyph.width = half_width\n    # Hack ãƒ•ã‚©ãƒ³ãƒˆã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æ‰±ã„ãŸããªã„ã®ã§ã€ä¸€æ—¦ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã—ã¦ç›´æ¥ãƒãƒ¼ã‚¸ã™ã‚‹\n    font_path = f\"{BUILD_FONTS_DIR}/tmp_hack_{uuid.uuid4()}.ttf\"\n    hack_font.generate(font_path)\n    hack_font.close()\n\n    eng_font.mergeFonts(font_path)\n    os.remove(font_path)\n\n\ndef eaaw_width_to_half(jp_font):\n    \"\"\"East Asian Ambiguous Width æ–‡å­—ã®åŠè§’åŒ–\"\"\"\n    # ref: https://www.unicode.org/Public/15.1.0/ucd/EastAsianWidth.txt\n\n    eaaw_unicode_list = (\n        0x203B,  # REFERENCE MARK\n        0x2103,\n        0x2109,\n        0x2121,\n        0x212B,\n        *range(0x2160, 0x216B + 1),\n        *range(0x2170, 0x217B + 1),\n        0x221F,\n        0x222E,\n        *range(0x226A, 0x226B + 1),\n        0x22A5,\n        0x22BF,\n        0x2312,\n        *range(0x2460, 0x2490 + 1),\n        *range(0x249C, 0x24B5 + 1),\n        *range(0x2605, 0x2606 + 1),\n        0x260E,\n        0x261C,\n        0x261E,\n        0x2640,\n        0x2642,\n        *range(0x2660, 0x2665 + 1),\n        0x2667,\n        0x266A,\n        0x266D,\n        0x266F,\n        0x1F100,\n    )\n    half_width = 500\n    for glyph in jp_font.glyphs():\n        if glyph.unicode in eaaw_unicode_list and glyph.width > half_width:\n            glyph.transform(psMat.scale(0.67, 0.9))\n            glyph.transform(psMat.translate((half_width - glyph.width) / 2, 0))\n            glyph.width = half_width\n\n\ndef add_console_glyphs(eng_font):\n    eng_width = eng_font[0x0030].width\n\n    # HEAVY CHECK MARK (U+2714) ã‚’è¿½åŠ \n    # ã“ã®è¨˜å·ã¯ Docker ã‚³ãƒãƒ³ãƒ‰ãªã©ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹\n    eng_font.selection.select((\"unicode\", None), 0x2713)\n    eng_font.copy()\n    eng_font.selection.select((\"unicode\", None), 0x2714)\n    eng_font.paste()\n    for glyph in eng_font.selection.byGlyphs:\n        glyph.stroke(\"circular\", 35, removeinternal=True)\n        glyph.width = eng_width\n\n    eng_font.selection.none()\n\n\ndef scale_glyph_from_center(glyph, scale_x, scale_y):\n    \"\"\"ã‚°ãƒªãƒ•ã®ä¸­å¿ƒä½ç½®ã‚’åŸºç‚¹ã¨ã—ãŸã‚¹ã‚±ãƒ¼ãƒ«èª¿æ•´\"\"\"\n    original_width = glyph.width\n    # ã‚¹ã‚±ãƒ¼ãƒ«å‰ã®ä¸­å¿ƒä½ç½®ã‚’æ±‚ã‚ã‚‹\n    before_bb = glyph.boundingBox()\n    before_center_x = (before_bb[0] + before_bb[2]) / 2\n    before_center_y = (before_bb[1] + before_bb[3]) / 2\n    # ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›\n    glyph.transform(psMat.scale(scale_x, scale_y))\n    # ã‚¹ã‚±ãƒ¼ãƒ«å¾Œã®ä¸­å¿ƒä½ç½®ã‚’æ±‚ã‚ã‚‹\n    after_bb = glyph.boundingBox()\n    after_center_x = (after_bb[0] + after_bb[2]) / 2\n    after_center_y = (after_bb[1] + after_bb[3]) / 2\n    # æ‹¡å¤§ã§å¢—ãˆãŸåˆ†ã‚’è€ƒæ…®ã—ã¦ä¸­å¿ƒä½ç½®ã‚’èª¿æ•´\n    glyph.transform(\n        psMat.translate(\n            before_center_x - after_center_x,\n            before_center_y - after_center_y,\n        )\n    )\n    glyph.width = original_width\n\n\ndef down_scale_redundant_size_glyph(eng_font):\n    \"\"\"è¦å®šã®å¹…ã‹ã‚‰ã¯ã¿å‡ºã—ãŸã‚°ãƒªãƒ•ã‚µã‚¤ã‚ºã‚’ç¸®å°ã™ã‚‹\"\"\"\n\n    for glyph in eng_font.glyphs():\n        xmin = glyph.boundingBox()[0]\n        xmax = glyph.boundingBox()[2]\n\n        if (\n            glyph.width > 0\n            and -15\n            < xmin\n            < 0  # ç‰¹å®šå¹…ã‚ˆã‚Šå·¦ã«ã¯ã¿å‡ºã—ã¦ã„ã‚‹å ´åˆã€æ„å›³çš„ã«ã¯ã¿å‡ºã—ã¦ã„ã‚‹ã‚‚ã®ã¨è¦‹ãªã—ã¦ç„¡è¦–\n            and abs(xmin) - 10\n            < xmax - glyph.width\n            < abs(xmin) + 10  # ã¯ã¿å‡ºã—å¹…ãŒå·¦å´ã¨å³å´ã§æ¥µç«¯ã«ç•°ãªã‚‹å ´åˆã¯ç„¡è¦–\n            and not (\n                0x0020 <= glyph.unicode <= 0x02AF\n            )  # latin ç³»ã®ã‚°ãƒªãƒ• 0x0020 - 0x0192 ã¯ç„¡è¦–\n            and not (\n                0xE0B0 <= glyph.unicode <= 0xE0D4\n            )  # Powerlineç³»ã®ã‚°ãƒªãƒ• 0xE0B0 - 0xE0D4 ã¯ç„¡è¦–\n            and not (\n                0x2500 <= glyph.unicode <= 0x257F\n            )  # ç½«ç·šç³»ã®ã‚°ãƒªãƒ• 0x2500 - 0x257F ã¯ç„¡è¦–\n            and not (\n                0x2591 <= glyph.unicode <= 0x2593\n            )  # SHADE ã‚°ãƒªãƒ• 0x2591 - 0x2593 ã¯ç„¡è¦–\n        ):\n            scale_glyph_from_center(glyph, 1 + (xmin / glyph.width) * 2, 1)\n\n\ndef add_nerd_font_glyphs(jp_font, eng_font):\n    \"\"\"Nerd Fontã®ã‚°ãƒªãƒ•ã‚’è¿½åŠ ã™ã‚‹\"\"\"\n    global nerd_font\n    # Nerd Fontã®ã‚°ãƒªãƒ•ã‚’è¿½åŠ ã™ã‚‹\n    if nerd_font is None:\n        nerd_font = fontforge.open(\n            f\"{SOURCE_FONTS_DIR}/nerd-fonts/SymbolsNerdFont-Regular.ttf\"\n        )\n        nerd_font.em = EM_ASCENT + EM_DESCENT\n        glyph_names = set()\n        for nerd_glyph in nerd_font.glyphs():\n            # Nerd Fontsã®ã‚°ãƒªãƒ•åã‚’ãƒ¦ãƒ‹ãƒ¼ã‚¯ã«ã™ã‚‹ãŸã‚æ¥å°¾è¾ã‚’ä»˜ã‘ã‚‹\n            nerd_glyph.glyphname = f\"{nerd_glyph.glyphname}-nf\"\n            # postãƒ†ãƒ¼ãƒ–ãƒ«ã§ã®ã‚°ãƒªãƒ•åé‡è¤‡å¯¾ç­–\n            # fonttools merge ã§åˆæˆã—ãŸå¾Œã€MacOSã§ `'post'ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½¿ç”¨æ€§` ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã¸ã®å¯¾å‡¦\n            if nerd_glyph.glyphname in glyph_names:\n                nerd_glyph.glyphname = f\"{nerd_glyph.glyphname}-{nerd_glyph.encoding}\"\n            glyph_names.add(nerd_glyph.glyphname)\n            # å¹…ã‚’èª¿æ•´ã™ã‚‹\n            half_width = eng_font[0x0030].width\n            # Powerline Symbols ã®èª¿æ•´\n            if 0xE0B0 <= nerd_glyph.unicode <= 0xE0D7:\n                # ä½ç½®ã¨å¹…åˆã‚ã›\n                if nerd_glyph.width < half_width:\n                    nerd_glyph.transform(\n                        psMat.translate((half_width - nerd_glyph.width) / 2, 0)\n                    )\n                elif nerd_glyph.width > half_width:\n                    nerd_glyph.transform(psMat.scale(half_width / nerd_glyph.width, 1))\n                # ã‚°ãƒªãƒ•ã®é«˜ã•ãƒ»ä½ç½®ã‚’èª¿æ•´ã™ã‚‹\n                nerd_glyph.transform(psMat.scale(1, 1.14))\n                nerd_glyph.transform(psMat.translate(0, 21))\n            elif nerd_glyph.width < (EM_ASCENT + EM_DESCENT) * 0.6:\n                # å¹…ãŒç‹­ã„ã‚°ãƒªãƒ•ã¯ä¸­å¤®å¯„ã›ã¨ã¿ãªã—ã¦èª¿æ•´ã™ã‚‹\n                nerd_glyph.transform(\n                    psMat.translate((half_width - nerd_glyph.width) / 2, 0)\n                )\n            # å¹…ã‚’è¨­å®š\n            nerd_glyph.width = half_width\n    # æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã«ãƒãƒ¼ã‚¸ã™ã‚‹ãŸã‚ã€æ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯å‰Šé™¤ã™ã‚‹\n    for nerd_glyph in nerd_font.glyphs():\n        if nerd_glyph.unicode != -1:\n            # æ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯å‰Šé™¤ã™ã‚‹\n            try:\n                for glyph in jp_font.selection.select(\n                    (\"unicode\", None), nerd_glyph.unicode\n                ).byGlyphs:\n                    glyph.clear()\n            except Exception:\n                pass\n            try:\n                for glyph in eng_font.selection.select(\n                    (\"unicode\", None), nerd_glyph.unicode\n                ).byGlyphs:\n                    glyph.clear()\n            except Exception:\n                pass\n\n    jp_font.mergeFonts(nerd_font)\n\n    jp_font.selection.none()\n    eng_font.selection.none()\n\n\ndef delete_glyphs_with_duplicate_glyph_names(font):\n    \"\"\"é‡è¤‡ã™ã‚‹ã‚°ãƒªãƒ•åã‚’æŒã¤ã‚°ãƒªãƒ•ã‚’ãƒªãƒãƒ¼ãƒ ã™ã‚‹\"\"\"\n    glyph_name_set = set()\n    for glyph in font.glyphs():\n        if glyph.glyphname in glyph_name_set:\n            glyph.glyphname = f\"{glyph.glyphname}_{glyph.encoding}\"\n        else:\n            glyph_name_set.add(glyph.glyphname)\n\n\ndef edit_meta_data(font, weight: str, variant: str, cap_height: int, x_height: int):\n    \"\"\"ãƒ•ã‚©ãƒ³ãƒˆå†…ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç·¨é›†ã™ã‚‹\"\"\"\n    font.ascent = EM_ASCENT\n    font.descent = EM_DESCENT\n\n    if WIDTH_35_STR in variant and not options.get(\"nerd-font\"):\n        os2_ascent = OS2_ASCENT + 60\n        os2_descent = OS2_DESCENT + 60\n    else:\n        os2_ascent = OS2_ASCENT\n        os2_descent = OS2_DESCENT\n\n    font.os2_winascent = os2_ascent\n    font.os2_windescent = os2_descent\n\n    font.os2_typoascent = os2_ascent\n    font.os2_typodescent = -os2_descent\n    font.os2_typolinegap = 0\n\n    font.hhea_ascent = os2_ascent\n    font.hhea_descent = -os2_descent\n    font.hhea_linegap = 0\n\n    font.os2_xheight = x_height\n    font.os2_capheight = cap_height\n\n    # VSCode ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã®ãƒœãƒˆãƒ ä½ç½®ã®è¡¨ç¤ºã§ g, j ãªã©ãŒè¦‹åˆ‡ã‚Œã‚‹å•é¡Œã¸ã®å¯¾å‡¦\n    # æ°´å¹³ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤\n    font.horizontalBaseline = None\n\n    if \"Regular\" == weight or \"Italic\" == weight:\n        font.os2_weight = 400\n    elif \"Thin\" in weight:\n        font.os2_weight = 100\n    elif \"ExtraLight\" in weight:\n        font.os2_weight = 200\n    elif \"Light\" in weight:\n        font.os2_weight = 300\n    elif \"Text\" in weight:\n        font.os2_weight = 450\n    elif \"Medium\" in weight:\n        font.os2_weight = 500\n    elif \"SemiBold\" in weight:\n        font.os2_weight = 600\n    elif \"Bold\" in weight:\n        font.os2_weight = 700\n\n    font.os2_vendor = VENDER_NAME\n\n    font.sfnt_names = (\n        (\n            \"English (US)\",\n            \"License\",\n            \"\"\"This Font Software is licensed under the SIL Open Font License,\nVersion 1.1. This license is available with a FAQ\nat: http://scripts.sil.org/OFL\"\"\",\n        ),\n        (\"English (US)\", \"License URL\", \"http://scripts.sil.org/OFL\"),\n        (\"English (US)\", \"Version\", VERSION),\n        (\"English (US)\", \"Copyright\", COPYRIGHT),\n    )\n\n    # ãƒ•ã‚©ãƒ³ãƒˆåã‚’è¨­å®šã™ã‚‹\n    if (\n        \"Regular\" == weight\n        or \"Italic\" == weight\n        or \"Bold\" == weight\n        or \"BoldItalic\" == weight\n    ):\n        font_family = FONT_NAME\n        if variant != \"\":\n            font_family += f\" {variant}\".replace(\" 35\", \"35\")\n        font_weight = weight\n        if \"Italic\" in weight:\n            font_weight = font_weight.replace(\"Italic\", \" Italic\")\n        font.familyname = font_family\n        # ãƒ•ã‚©ãƒ³ãƒˆã‚µãƒ–ãƒ•ã‚¡ãƒŸãƒªãƒ¼å\n        font.appendSFNTName(0x409, 2, font_weight)\n        font.fontname = f\"{font_family}-{font_weight}\".replace(\" \", \"\")\n        font.fullname = f\"{font_family} {font_weight}\"\n        font.weight = font_weight.split(\" \")[0]\n    else:\n        font_family = FONT_NAME\n        if variant != \"\":\n            font_family += f\" {variant}\".replace(\" 35\", \"35\")\n        font_weight = weight\n        if \"Italic\" in weight:\n            font_weight = font_weight.replace(\"Italic\", \" Italic\")\n        font.familyname = f\"{font_family} \" + font_weight.split(\" \")[0]\n        # ãƒ•ã‚©ãƒ³ãƒˆã‚µãƒ–ãƒ•ã‚¡ãƒŸãƒªãƒ¼å\n        if \"Italic\" in weight:\n            font.appendSFNTName(0x409, 2, \"Italic\")\n        else:\n            font.appendSFNTName(0x409, 2, \"Regular\")\n        font.fontname = f\"{font_family}-{font_weight}\".replace(\" \", \"\")\n        font.fullname = f\"{font_family} {font_weight}\"\n        font.weight = font_weight.split(\" \")[0]\n        # å„ªå…ˆãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼å\n        font.appendSFNTName(0x409, 16, font_family)\n        # å„ªå…ˆãƒ•ã‚©ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«\n        font.appendSFNTName(0x409, 17, font_weight)\n\n\nif __name__ == \"__main__\":\n    main()\n"
        },
        {
          "name": "fonttools_script.py",
          "type": "blob",
          "size": 8.404296875,
          "content": "#!/bin/env python3\n\nimport configparser\nimport glob\nimport os\nimport sys\nimport xml.etree.ElementTree as ET\nfrom pathlib import Path\n\nfrom fontTools import merge, ttLib, ttx\nfrom ttfautohint import options, ttfautohint\n\n# iniãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€\nsettings = configparser.ConfigParser()\nsettings.read(\"build.ini\", encoding=\"utf-8\")\n\nFONT_NAME = settings.get(\"DEFAULT\", \"FONT_NAME\")\nFONTFORGE_PREFIX = settings.get(\"DEFAULT\", \"FONTFORGE_PREFIX\")\nFONTTOOLS_PREFIX = settings.get(\"DEFAULT\", \"FONTTOOLS_PREFIX\")\nBUILD_FONTS_DIR = settings.get(\"DEFAULT\", \"BUILD_FONTS_DIR\")\nHALF_WIDTH_12 = int(settings.get(\"DEFAULT\", \"HALF_WIDTH_12\"))\nFULL_WIDTH_35 = int(settings.get(\"DEFAULT\", \"FULL_WIDTH_35\"))\nWIDTH_35_STR = settings.get(\"DEFAULT\", \"WIDTH_35_STR\")\nCONSOLE_STR = settings.get(\"DEFAULT\", \"CONSOLE_STR\")\n\n\ndef main():\n    # ç¬¬ä¸€å¼•æ•°ã‚’å–å¾—\n    # ç‰¹å®šã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿ã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã®æŒ‡å®š\n    specific_variant = sys.argv[1] if len(sys.argv) > 1 else None\n\n    edit_fonts(specific_variant)\n\n\ndef edit_fonts(specific_variant: str):\n    \"\"\"ãƒ•ã‚©ãƒ³ãƒˆã‚’ç·¨é›†ã™ã‚‹\"\"\"\n\n    if specific_variant is None:\n        specific_variant = \"\"\n\n    # ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ã§æŒ‡å®š\n    file_pattern = f\"{FONTFORGE_PREFIX}{FONT_NAME}{specific_variant}*-eng.ttf\"\n    filenames = glob.glob(f\"{BUILD_FONTS_DIR}/{file_pattern}\")\n    # ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼\n    if len(filenames) == 0:\n        print(f\"Error: {file_pattern} not found\")\n        return\n    paths = [Path(f) for f in filenames]\n    for path in paths:\n        print(f\"edit {str(path)}\")\n        style = path.stem.split(\"-\")[1]\n        variant = path.stem.split(\"-\")[0].replace(f\"{FONTFORGE_PREFIX}{FONT_NAME}\", \"\")\n        add_hinting(str(path), str(path).replace(\".ttf\", \"-hinted.ttf\"), variant, style)\n        merge_fonts(style, variant)\n        fix_font_tables(style, variant)\n\n    # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤\n    # ã‚¹ã‚¿ã‚¤ãƒ«éƒ¨åˆ†ä»¥é™ã¯ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã§æŒ‡å®š\n    for filename in glob.glob(\n        f\"{BUILD_FONTS_DIR}/{FONTTOOLS_PREFIX}{FONT_NAME}{specific_variant}*\"\n    ):\n        os.remove(filename)\n    for filename in glob.glob(\n        f\"{BUILD_FONTS_DIR}/{FONTFORGE_PREFIX}{FONT_NAME}{specific_variant}*\"\n    ):\n        os.remove(filename)\n\n\ndef add_hinting(input_font_path, output_font_path, variant, style):\n    \"\"\"ãƒ•ã‚©ãƒ³ãƒˆã«ãƒ’ãƒ³ãƒ†ã‚£ãƒ³ã‚°ã‚’ä»˜ã‘ã‚‹\"\"\"\n    if \"Italic\" not in style:\n        width_variant = \"35\" if WIDTH_35_STR in variant else \"normal\"\n        ctrl_file = [\n            \"-m\",\n            f\"hinting_post_process/{width_variant}-{style}-ctrl.txt\",\n        ]\n    else:\n        ctrl_file = []\n\n    args = ctrl_file + [\n        \"-l\",\n        \"6\",\n        \"-r\",\n        \"45\",\n        \"-D\",\n        \"latn\",\n        \"-f\",\n        \"none\",\n        \"-S\",\n        \"-W\",\n        \"-X\",\n        \"13-\",\n        \"-I\",\n        input_font_path,\n        output_font_path,\n    ]\n    options_ = options.parse_args(args)\n    print(\"exec hinting\", options_)\n    ttfautohint(**options_)\n\n\ndef merge_fonts(style, variant):\n    \"\"\"ãƒ•ã‚©ãƒ³ãƒˆã‚’çµåˆã™ã‚‹\"\"\"\n    eng_font_path = f\"{BUILD_FONTS_DIR}/{FONTFORGE_PREFIX}{FONT_NAME}{variant}-{style}-eng-hinted.ttf\"\n    jp_font_path = (\n        f\"{BUILD_FONTS_DIR}/{FONTFORGE_PREFIX}{FONT_NAME}{variant}-{style}-jp.ttf\"\n    )\n    # vhea, vmtxãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤\n    jp_font_object = ttLib.TTFont(jp_font_path)\n    if \"vhea\" in jp_font_object:\n        del jp_font_object[\"vhea\"]\n    if \"vmtx\" in jp_font_object:\n        del jp_font_object[\"vmtx\"]\n    jp_font_object.save(jp_font_path)\n    # ãƒ•ã‚©ãƒ³ãƒˆã‚’çµåˆ\n    merger = merge.Merger()\n    merged_font = merger.merge([eng_font_path, jp_font_path])\n    merged_font.save(\n        f\"{BUILD_FONTS_DIR}/{FONTTOOLS_PREFIX}{FONT_NAME}{variant}-{style}_merged.ttf\"\n    )\n\n\ndef fix_font_tables(style, variant):\n    \"\"\"ãƒ•ã‚©ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç·¨é›†ã™ã‚‹\"\"\"\n\n    input_font_name = f\"{FONTTOOLS_PREFIX}{FONT_NAME}{variant}-{style}_merged.ttf\"\n    output_name_base = f\"{FONTTOOLS_PREFIX}{FONT_NAME}{variant}-{style}\"\n    completed_name_base = f\"{FONT_NAME.replace(' ', '')}{variant}-{style}\"\n\n    # OS/2, post ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã¿ã®ttxãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡ºåŠ›\n    xml = dump_ttx(input_font_name, output_name_base)\n    # OS/2 ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç·¨é›†\n    fix_os2_table(xml, style, flag_35=WIDTH_35_STR in variant)\n    # post ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç·¨é›†\n    fix_post_table(xml, flag_35=WIDTH_35_STR in variant)\n    # name ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç·¨é›†\n    fix_name_table(xml)\n\n    # ttxãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ãä¿å­˜\n    xml.write(\n        f\"{BUILD_FONTS_DIR}/{output_name_base}.ttx\",\n        encoding=\"utf-8\",\n        xml_declaration=True,\n    )\n\n    # ttxãƒ•ã‚¡ã‚¤ãƒ«ã‚’ttfãƒ•ã‚¡ã‚¤ãƒ«ã«é©ç”¨\n    ttx.main(\n        [\n            \"-o\",\n            f\"{BUILD_FONTS_DIR}/{output_name_base}_os2_post.ttf\",\n            \"-m\",\n            f\"{BUILD_FONTS_DIR}/{input_font_name}\",\n            f\"{BUILD_FONTS_DIR}/{output_name_base}.ttx\",\n        ]\n    )\n\n    # ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å¤‰æ›´\n    os.rename(\n        f\"{BUILD_FONTS_DIR}/{output_name_base}_os2_post.ttf\",\n        f\"{BUILD_FONTS_DIR}/{completed_name_base}.ttf\",\n    )\n\n\ndef dump_ttx(input_name_base, output_name_base) -> ET:\n    \"\"\"OS/2, post ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã¿ã®ttxãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡ºåŠ›\"\"\"\n    ttx.main(\n        [\n            \"-t\",\n            \"OS/2\",\n            \"-t\",\n            \"post\",\n            \"-t\",\n            \"name\",\n            \"-f\",\n            \"-o\",\n            f\"{BUILD_FONTS_DIR}/{output_name_base}.ttx\",\n            f\"{BUILD_FONTS_DIR}/{input_name_base}\",\n        ]\n    )\n\n    return ET.parse(f\"{BUILD_FONTS_DIR}/{output_name_base}.ttx\")\n\n\ndef fix_os2_table(xml: ET, style: str, flag_35: bool = False):\n    \"\"\"OS/2 ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç·¨é›†ã™ã‚‹\"\"\"\n    # xAvgCharWidthã‚’ç·¨é›†\n    # ã‚¿ã‚°å½¢å¼: <xAvgCharWidth value=\"1000\"/>\n    if flag_35:\n        x_avg_char_width = FULL_WIDTH_35\n    else:\n        x_avg_char_width = HALF_WIDTH_12\n    xml.find(\"OS_2/xAvgCharWidth\").set(\"value\", str(x_avg_char_width))\n\n    # fsSelectionã‚’ç·¨é›†\n    # ã‚¿ã‚°å½¢å¼: <fsSelection value=\"00000000 11000000\" />\n    # ã‚¹ã‚¿ã‚¤ãƒ«ã«å¿œã˜ãŸãƒ“ãƒƒãƒˆã‚’ç«‹ã¦ã‚‹\n    fs_selection = None\n    if style == \"Regular\":\n        fs_selection = \"00000001 01000000\"\n    elif style == \"Italic\":\n        fs_selection = \"00000001 00000001\"\n    elif style == \"Bold\":\n        fs_selection = \"00000001 00100000\"\n    elif style == \"BoldItalic\":\n        fs_selection = \"00000001 00100001\"\n\n    if fs_selection is not None:\n        xml.find(\"OS_2/fsSelection\").set(\"value\", fs_selection)\n\n    # panoseã‚’ç·¨é›†\n    # ã‚¿ã‚°å½¢å¼:\n    # <panose>\n    #   <bFamilyType value=\"2\" />\n    #   <bSerifStyle value=\"11\" />\n    #   <bWeight value=\"6\" />\n    #   <bProportion value=\"9\" />\n    #   <bContrast value=\"6\" />\n    #   <bStrokeVariation value=\"3\" />\n    #   <bArmStyle value=\"0\" />\n    #   <bLetterForm value=\"2\" />\n    #   <bMidline value=\"0\" />\n    #   <bXHeight value=\"4\" />\n    # </panose>\n    if style == \"Regular\" or style == \"Italic\":\n        bWeight = 5\n    else:\n        bWeight = 8\n    if flag_35:\n        panose = {\n            \"bFamilyType\": 2,\n            \"bSerifStyle\": 11,\n            \"bWeight\": bWeight,\n            \"bProportion\": 3,\n            \"bContrast\": 5,\n            \"bStrokeVariation\": 2,\n            \"bArmStyle\": 3,\n            \"bLetterForm\": 0,\n            \"bMidline\": 2,\n            \"bXHeight\": 3,\n        }\n    else:\n        panose = {\n            \"bFamilyType\": 2,\n            \"bSerifStyle\": 11,\n            \"bWeight\": bWeight,\n            \"bProportion\": 9,\n            \"bContrast\": 5,\n            \"bStrokeVariation\": 2,\n            \"bArmStyle\": 3,\n            \"bLetterForm\": 0,\n            \"bMidline\": 2,\n            \"bXHeight\": 3,\n        }\n\n    for key, value in panose.items():\n        xml.find(f\"OS_2/panose/{key}\").set(\"value\", str(value))\n\n\ndef fix_post_table(xml: ET, flag_35):\n    \"\"\"post ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç·¨é›†ã™ã‚‹\"\"\"\n    # isFixedPitchã‚’ç·¨é›†\n    # ã‚¿ã‚°å½¢å¼: <isFixedPitch value=\"0\"/>\n    is_fixed_pitch = 0 if flag_35 else 1\n    xml.find(\"post/isFixedPitch\").set(\"value\", str(is_fixed_pitch))\n\n\ndef fix_name_table(xml: ET):\n    \"\"\"name ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç·¨é›†ã™ã‚‹\n    ä½•æ•…ã‹è¬ã®å†…å®¹ã®è‘—ä½œæ¨©ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒå«ã¾ã‚Œã¦ã—ã¾ã†ã®ã§ã€å‰Šé™¤ã™ã‚‹ã€‚\n    \"\"\"\n    # ã‚¿ã‚°å½¢å¼: <namerecord nameID=\"0\" platformID=\"1\" platEncID=\"0\" langID=\"0x0\" unicode=\"True\">COPYLIGHT</namerecord>\n    parent = xml.find(\"name\")\n    for element in parent.findall(\"namerecord[@nameID='0']\"):\n        if \"PlemolJP\" not in element.text:\n            parent.remove(element)\n\n\nif __name__ == \"__main__\":\n    main()\n"
        },
        {
          "name": "hinting_post_process",
          "type": "tree",
          "content": null
        },
        {
          "name": "make.ps1",
          "type": "blob",
          "size": 2.9931640625,
          "content": "# ini ã‹ã‚‰ VERSION ã‚’å–å¾—\n$ini = Get-Content .\\build.ini\n$version = ($ini | Select-String -Pattern \"VERSION\").ToString().Split(\"=\")[1].Trim()\n\n# ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´æ‰€ã«ç§»å‹•ã™ã‚‹\nSet-Location -Path $PSScriptRoot\n# å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ããƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ\nNew-Item -ItemType Directory -Force -Path \".\\release_files\\\"\n# ãƒ“ãƒ«ãƒ‰ãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤\nRemove-Item -Path .\\build -Recurse -Force\n\n# ä¸¦åˆ—å‡¦ç†å†…ã§ã€å‡¦ç†ãŒé‡ã„Nerd Fontsã®ãƒ“ãƒ«ãƒ‰ã‚’å„ªå…ˆã—ã¦å‡¦ç†ã™ã‚‹\n$option_and_output_folder = @(\n    @(\"--console --nerd-font\", \"ConsoleNF-\"), # ãƒ“ãƒ«ãƒ‰ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨ é€šå¸¸ç‰ˆ + Nerd Fonts\n    @(\"--console --35 --nerd-font\", \"35ConsoleNF-\"), # ãƒ“ãƒ«ãƒ‰ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨ 3:5å¹…ç‰ˆ + Nerd Fonts\n    @(\"\", \"-\"), # ãƒ“ãƒ«ãƒ‰ é€šå¸¸ç‰ˆ\n    @(\"--35\", \"35-\"), # ãƒ“ãƒ«ãƒ‰ 3:5å¹…ç‰ˆ\n    @(\"--console\", \"Console-\"), # ãƒ“ãƒ«ãƒ‰ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨ é€šå¸¸ç‰ˆ\n    @(\"--console --35\", \"35Console-\"), # ãƒ“ãƒ«ãƒ‰ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨ 1:2å¹…ç‰ˆ\n    @(\"--hidden-zenkaku-space \", \"HS-\"), # ãƒ“ãƒ«ãƒ‰ é€šå¸¸ç‰ˆ å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ä¸å¯è¦–\n    @(\"--hidden-zenkaku-space --35\", \"35HS-\"), # ãƒ“ãƒ«ãƒ‰ 3:5å¹…ç‰ˆ å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ä¸å¯è¦–\n    @(\"--hidden-zenkaku-space --console\", \"ConsoleHS-\"), # ãƒ“ãƒ«ãƒ‰ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨ é€šå¸¸ç‰ˆ å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ä¸å¯è¦–\n    @(\"--hidden-zenkaku-space --console --35\", \"35ConsoleHS-\") # ãƒ“ãƒ«ãƒ‰ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨ 1:2å¹…ç‰ˆ å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ä¸å¯è¦–\n)\n\n$option_and_output_folder | Foreach-Object -ThrottleLimit 4 -Parallel {\n    Write-Host \"fontforge script start. option: `\"$($_[0])`\"\"\n    Invoke-Expression \"& `\"C:\\Program Files (x86)\\FontForgeBuilds\\bin\\ffpython.exe`\" .\\fontforge_script.py --do-not-delete-build-dir $($_[0])\" `\n        && Write-Host \"fonttools script start. option: `\"$($_[1])`\"\" `\n        && python fonttools_script.py $_[1]\n}\n\n$move_file_src_dest = @(\n    @(\"PlemolJP*NF*-*.ttf\", \"PlemolJP_NF_$version\", \"NF\"),\n    @(\"PlemolJP*HS*-*.ttf\", \"PlemolJP_HS_$version\", \"HS\"),\n    @(\"PlemolJP*-*.ttf\", \"PlemolJP_$version\", \"\")\n)\n\n$timestamp = Get-Date -Format \"yyyyMMddHHmmss\"\n$move_dir = \".\\release_files\\build_$timestamp\"\n\n$move_file_src_dest | Foreach-Object {\n    $folder_path = \"$move_dir\\$($_[1])\"\n    New-Item -ItemType Directory -Force -Path $folder_path\n    Move-Item -Path \".\\build\\$($_[0])\" -Destination $folder_path -Force\n\n    $variant = \"\"\n    if ($_[2] -ne \"\") {\n        $variant = \"_$($_[2])\"\n    }\n    @(\n        @(\"*35Console*.ttf\", \"PlemolJP35Console$($variant)\"),\n        @(\"*Console*.ttf\", \"PlemolJPConsole$($variant)\"),\n        @(\"*35*.ttf\", \"PlemolJP35$($variant)\"),\n        @(\"*.ttf\", \"PlemolJP$($variant)\")\n    ) | Foreach-Object {\n        $individual_folder_path = \"$folder_path\\$($_[1])\"\n        # ãƒ•ã‚¡ã‚¤ãƒ«ä»¶æ•°ãŒ0ä»¶ã®å ´åˆã¯ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ãªã„\n        if ((Get-ChildItem -Path $folder_path\\$($_[0])).Count -eq 0) {\n            return\n        }\n        New-Item -ItemType Directory -Force -Path $individual_folder_path\n        Move-Item -Path $folder_path\\$($_[0]) -Destination $individual_folder_path -Force\n    }\n}\n\n"
        },
        {
          "name": "note.md",
          "type": "blob",
          "size": 0.1181640625,
          "content": "### r ã‚°ãƒªãƒ•ã®æ‰‹å‹•èª¿æ•´\n\n- ä¸­å¤®ä»˜è¿‘ã®ãƒã‚¤ãƒ³ãƒˆã¯ x: -35\n- åº•è¾ºã®ç·šã®å³ç«¯ã®ãƒã‚¤ãƒ³ãƒˆã¯ x: -50\n"
        },
        {
          "name": "old_script",
          "type": "tree",
          "content": null
        },
        {
          "name": "source",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}