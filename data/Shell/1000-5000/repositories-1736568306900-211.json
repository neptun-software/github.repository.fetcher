{
  "metadata": {
    "timestamp": 1736568306900,
    "page": 211,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjIyMA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "nextcloud/nextcloudpi",
      "stars": 2604,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".dockerignore",
          "type": "blob",
          "size": 0.109375,
          "content": "torrent/\ntmp/\ncache/\noutput/\nraspbian_root/\nraspbian_boot/\nqemu-raspbian-network/\narmbian/\n*.img\n*.tar.bz2\n.git\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.1923828125,
          "content": ".*.swp\n/qemu-raspbian-network/\n/archive/\n/output/\n/cache/\n/torrent/\n/armbian/\n/raspbian_root\n/raspbian_boot\n/ncp-web/wizard.cfg\n/ncp-web/ncp-web.cfg\n/docker-armhf/qemu-arm-static\n.vagrant/\n/.idea/\n"
        },
        {
          "name": "CONTRIBUTING.md",
          "type": "blob",
          "size": 0.1611328125,
          "content": "# Contributing\n\nCheck this wiki article if you want to learn how you can help.\n\n[Ways to contribute](https://help.nextcloud.com/t/contribute-to-nextcloudpi/126384)\n\n"
        },
        {
          "name": "FUNDING.yml",
          "type": "blob",
          "size": 0.8193359375,
          "content": "# These are supported funding model platforms\n\ngithub: # Replace with up to 4 GitHub Sponsors-enabled usernames e.g., [user1, user2]\npatreon: # Replace with a single Patreon username\nopen_collective: # Replace with a single Open Collective username\nko_fi: thecalcaholic\ntidelift: # Replace with a single Tidelift platform-name/package-name e.g., npm/babel\ncommunity_bridge: # Replace with a single Community Bridge project-name e.g., cloud-foundry\nliberapay: # Replace with a single Liberapay username\nissuehunt: # Replace with a single IssueHunt username\nlfx_crowdfunding: # Replace with a single LFX Crowdfunding project-name e.g., cloud-foundry\npolar: # Replace with a single Polar username\nbuy_me_a_coffee: # Replace with a single Buy Me a Coffee username\ncustom: # Replace with up to 4 custom sponsorship URLs e.g., ['link1', 'link2']"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 9.7685546875,
          "content": "English | [Traditional Chinese 繁體中文](i18n/README-zh_TW.md) | [Simplified Chinese 简体中文](i18n/README-zh_CN.md)\n\n_(The translated README pages are not updated at this time)_\n\n# NextcloudPi\n\n[![Telegram icon][telegram-badge]][chat-telegram] [![Matrix icon][matrix-badge]][chat-matrix]  [![Nextcloud icon][nc-badge]][nc-github]\n\n[![Forum icon][forum-badge]][nc-forum-support]\n\n<p align=\"center\">\n  <img src=\"https://github.com/nextcloud/nextcloudpi/blob/master/ncp-app/img/app.svg\"\n       width=\"120\"\n       height=\"85\"\n       alt=\"NextcloudPi logo\">\n</p>\n\nThis is the build code for the [NextcloudPi][ncp-website] open-source community project.\n\nNextcloudPi is a ready to use image for Virtual Machines, Raspberry Pi, Odroid HC1, Rock64 and other boards. ([⇒ Downloads][ncp-releases])\n\nThis code also generates the NextcloudPi LXD and LXC containers and there is an install script for the latest supported Debian based system as well.\n\nFind the documentation at [docs.nextcloudpi.com][ncp-docs-website], the documentation is all written by volunteers.\n\nPlease reach out in the [Matrix][chat-matrix-wiki] or [Telegram][chat-telegram-wiki] Wiki group chats if you want to help out to keep them up-to-date and we'll add you to the [Wiki Group][nc-forum-wiki-group] on the [forum][nc-forum].\n\n---\n\n### Test Status\n\n`master`\n\n[![Release](https://github.com/nextcloud/nextcloudpi/actions/workflows/release.yml/badge.svg)](https://github.com/nextcloud/nextcloudpi/actions/workflows/release.yml)\n\n`devel`\n\n[![Release](https://github.com/nextcloud/nextcloudpi/actions/workflows/release.yml/badge.svg?branch=devel)](https://github.com/nextcloud/nextcloudpi/actions/workflows/release.yml)\n\n---\n\n## Features\n\n * Raspberry Pi OS/Debian 12 _(Bookworm)_\n * Nextcloud\n * Apache, with HTTP2 enabled\n * PHP 8.1\n * MariaDB\n * Redis memory cache\n * ncp-config TUI for easy setup ( RAM logs, USB drive and more )\n * Automatic redirection to HTTPS\n * APCu PHP cache\n * PHP Zend OPcache enabled with file cache\n * HSTS\n * Cron jobs for Nextcloud\n * Sane configuration defaults\n * Full emoji support\n * Postfix email\n * Secure\n\n## Extras\n\n * Setup wizard\n * NextcloudPi Web Panel\n * Wi-Fi ready\n * Ram logs\n * Automatic security updates, activated by default.\n * Let’s Encrypt for trusted HTTPS certificates.\n * Fail2Ban protection against brute force attacks.\n * UFW firewall\n * Dynamic DNS support for no-ip.org\n * Dynamic DNS support for freeDNS\n * Dynamic DNS support for duckDNS\n * Dynamic DNS support for spDYN\n * Dynamic DNS support for Namecheap\n * dnsmasq DNS server with DNS cache\n * ModSecurity Web Application Firewall\n * NFS ready to mount your files over LAN\n * SAMBA ready to share your files with Windows/Mac/Linux\n * USB automount\n * Remote updates\n * Automatic NCP updates\n * Automatic Nextcloud updates\n * Update notifications\n * Nextcloud backup and restore\n * Nextcloud online installation\n * Format USB drive to BTRFS\n * BTRFS snapshots\n * Automatic BTRFS snapshots\n * BTRFS snapshot auto sync\n * scheduled rsync\n * UPnP automatic port forwarding\n * Security audits with Lynis and Debsecan\n * ZRAM\n * SMART hard drive health monitoring\n\nExtras can be activated and configured using the web interface at HTTPS port 4443\n\n![ncp-web][ncp-web-image]\n\nOr from the command line using\n\n```\nsudo ncp-config\n```\n\n![NCP-config][ncp-config-image]\n\n## Docker has been discontinued\n\nDocker has been discontinued for the time being, please read the announcement here: https://help.nextcloud.com/t/nextcloudpi-planning-to-discontinue-its-docker-version-with-nc-25/158895\n\n## Run in LXD\n\n```\n# Imports the LXC image, replace the X's with version number\nlxc image import \"NextcloudPi_LXD_vX.XX.X.tar.gz\" --alias \"nextcloudpi\"\n\n# Launches a container from the image\nlxc launch \"nextcloudpi\" ncp\n\n# Starts the container you've launched from the imported image\nlxc start ncp\n```\n\n## Run in Proxmox\n\nThere are two ways to run NCP on Proxmox:\n\n### 1. Using the official release image\n\nIn your Proxmox web interface, head to any storage pool that has CT Templates enabled, go to CT Templates, \nclick \"Download from URL\" and enter the link to the latest LXC image from the [Nextcloudpi releases page](https://github.com/nextcloud/nextcloudpi/releases)\nand press \"Download\".\n\n<img height=\"300\" alt=\"Download from URL dialog\" src=\"https://nextcloudpi.com/images/ncp-proxmox-download-screenshot.png\">\n\nOptionally, you can copy the corresponding md5 sum from the releases page and paste it in the \"Checksum\" field to have\nProxmox check that the downloaded image was not corrupted\n\n### 2. Installer by tteck\n\nUse the [install script][ncp-proxmox-install-script-v5] from [tteck][tteck-profile] to install the LXC container on your Proxmox instance\n\nHe has multiple helper scripts available for Proxmox on his [website][website-helper-scripts], do go have a look if you're using Proxmox. :+1:\n\nInstallation: `bash -c \"$(wget -qLO - https://github.com/tteck/Proxmox/raw/main/ct/nextcloudpi.sh)\"`\n\nDefault Settings: `2GB RAM - 8GB Storage - 2vCPU`\n\n_(Check his [website][website-helper-scripts] if this has changed and we haven't had the time to update it here yet, it's located under: Media - Photo > NextcloudPi LXC)_\n\nThenk you [tteck][tteck-profile] :heart: for making the helper script & letting us use this for Proxmox installations :pray:\n\nYou can find his GitHub repository with his helper scripts [here][gh-helper-scripts-repo].\n\n## How to build\n\nPackages\n\n- `apt-utils`\n- `apt-transport-https`\n- `build-essential`\n- `binfmt-support`\n- `binutils`\n- `bzip2`\n- `ca-certificates`\n- `chroot`\n- `cron`\n- `curl`\n- `dialog`\n- `lsb-release`\n- `jq`\n- `git`\n- `psmisc`\n- `procps`\n- `wget`\n- `whiptail`\n- `qemu`\n- `qemu-user-static`\n\n### Raspberry Pi IMG\n\n```\ngit clone https://github.com/nextcloud/nextcloudpi.git\ncd nextcloudpi\n./build/build-SD-rpi.sh\n```\n\n### Armbian-based board\n\n```\n./build-SD-armbian.sh odroidxu4   # supported board code name\n```\n\n### LXD\n\n```\n./build/build-LXD.sh\n```\n\nNextcloudPi can be installed in any architecture running the latest Debian\n\n_Note: this assumes a clean Debian install, and there is no rollback method_\n\n### Curl install scripts\n\nThis is executed as `root` as indicated by the `#`\n\n```\n# curl -sSL https://raw.githubusercontent.com/nextcloud/nextcloudpi/master/install.sh | bash\n```\n\nIf you're not `root` you can run it with `sudo` like so\n\n```\ncurl -sSL https://raw.githubusercontent.com/nextcloud/nextcloudpi/master/install.sh | sudo bash\n```\n\n## Links\n\n[Website][ncp-website]\n\n[Downloads][ncp-releases]\n\n<!-- [Docker Hub][ncp-docker-hub] -->\n\n[Nextcloud Forum][nc-forum]\n\n[Nextcloud Forum Support][nc-forum-support]\n\n_(Use the Forum for Support questions please, there's a NCP tag available, it will bridge your post to the Matrix and Telegram chats)_\n\n## Contact\n\nYou can find us on the [Forum][nc-forum], [Telegram][chat-telegram] or [Matrix][chat-matrix]\n\n<!-- LINKS -->\n\n[ncp-website]: https://nextcloudpi.com\n\n[ncp-docs-website]: http://docs.nextcloudpi.com\n\n[ncp-docker-hub]: https://hub.docker.com/r/ownyourbits/nextcloudpi\n\n[ncp-releases]: https://github.com/nextcloud/nextcloudpi/releases\n\n[nc-github]: https://github.com/nextcloud\n\n<!-- FORUM -->\n\n[nc-forum]: https://help.nextcloud.com/\n\n[nc-forum-support]: https://help.nextcloud.com/c/support/appliances-docker-snappy-vm\n\n[nc-forum-wiki-group]: https://help.nextcloud.com/g/NCP_Wiki_Team/members\n\n<!-- CHAT -->\n\n[chat-matrix]: https://matrix.to/#/#nextcloudpi:matrix.org\n\n[chat-matrix-wiki]: https://matrix.to/#/#NCP_Wiki_Team:matrix.org\n\n[chat-telegram]: https://t.me/NextcloudPi\n\n[chat-telegram-wiki]: https://t.me/NCP_Wiki_Team\n\n<!-- TESTS -->\n\n[vm-tests]: https://github.com/nextcloud/nextcloudpi/actions/workflows/vm-tests.yml\n\n[docker-tests]: https://github.com/nextcloud/nextcloudpi/actions/workflows/build-docker.yml\n\n<!-- BADGES -->\n\n[gh-vm-tests-badge]: https://github.com/nextcloud/nextcloudpi/actions/workflows/vm-tests.yml/badge.svg\n\n[gh-docker-tests-badge]: https://github.com/nextcloud/nextcloudpi/actions/workflows/build-docker.yml/badge.svg\n\n[gh-vm-tests-badge-devel]: https://github.com/nextcloud/nextcloudpi/actions/workflows/vm-tests.yml/badge.svg?branch=devel\n\n[gh-docker-tests-badge-devel]: https://github.com/nextcloud/nextcloudpi/actions/workflows/build-docker.yml/badge.svg?branch=devel\n\n[vm-tests-badge]: https://github.com/nextcloud/nextcloudpi/workflows/VM%20Integration%20Tests/badge.svg\n\n[docker-tests-badge]: https://github.com/nextcloud/nextcloudpi/actions/workflows/build-docker.yml/badge.svg\n\n[telegram-badge]: https://img.shields.io/badge/Telegram-2CA5E0?style=for-the-badge&logo=telegram&logoColor=white\n\n[matrix-badge]: https://img.shields.io/badge/matrix-000000?style=for-the-badge&logo=Matrix&logoColor=white\n\n[forum-badge]: https://img.shields.io/badge/help-forums-blue.svg\n\n[nc-badge]: https://img.shields.io/badge/Nextcloud-0082C9?style=for-the-badge&logo=Nextcloud&logoColor=white\n\n<!-- TTECK -->\n\n[tteck-profile]: https://github.com/tteck\n\n[gh-helper-scripts-repo]: https://github.com/tteck/Proxmox\n\n[website-helper-scripts]: https://tteck.github.io/Proxmox/\n\n[ncp-proxmox-install-script-v5]: https://github.com/tteck/Proxmox/blob/main/install/nextcloudpi-v5-install.sh\n\n<!-- IMAGES -->\n\n[ncp-web-image]: https://user-images.githubusercontent.com/21343324/136853829-f4e99ec0-6307-431f-b4c7-21b2330cae7f.png\n\n[ncp-config-image]: https://help.nextcloud.com/uploads/default/original/3X/b/3/b3d157022a32296ab54428b14b5df02104a91f18.png\n\n<!-- EXTRAS & BACKUPS\n\n[telegram-badge]: https://patrolavia.github.io/telegram-badge/chat.png\n\n[rpi-badge]: https://img.shields.io/badge/Raspberry%20Pi-A22846?style=for-the-badge&logo=Raspberry%20Pi&logoColor=white\n\n[linux-badge]: https://img.shields.io/badge/Linux-FCC624?style=for-the-badge&logo=linux&logoColor=black\n\n[debian-badge]: https://img.shields.io/badge/Debian-A81D33?style=for-the-badge&logo=debian&logoColor=white\n\n[gh-badge]: https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white\n\n-->\n"
        },
        {
          "name": "bin",
          "type": "tree",
          "content": null
        },
        {
          "name": "build",
          "type": "tree",
          "content": null
        },
        {
          "name": "changelog.md",
          "type": "blob",
          "size": 110.74609375,
          "content": "# NextcloudPi Changelog\n\n## [v1.55.3](https://github.com/nextcloud/nextcloudpi/tree/v1.55.3) (2024-11-08) Nextcloud 30 and fixes\n\n### Changes\n\n- Support for Nextcloud 30 ([#1957](https://github.com/nextcloud/nextcloudpi/issues/1957))\n\n### Fixes\n\n- Fix resetting failed state of previous ncp-update-nc job ([#1992](https://github.com/nextcloud/nextcloudpi/issues/1992))\n- Fix installer on systems using resolvconf as DNS manager ([#1926](](https://github.com/nextcloud/nextcloudpi/issues/1926))\n- Fix typo that prevents ncp-previews from being disabled (Thanks @m-breitbach)\n\n## [v1.55.2](https://github.com/nextcloud/nextcloudpi/tree/v1.55.2) (2024-09-24) Hotfix release\n\n### Fixes\n\n- Increase the maximum package size for mysqldump to 256M (fixes [#1979](https://github.com/nextcloud/nextcloudpi/issues/1979))\n- Fix repeated erroneous update success messages for auto updates (fixes [#1979](https://github.com/nextcloud/nextcloudpi/issues/1979), [#1981](https://github.com/nextcloud/nextcloudpi/issues/1981))\n\n## [v1.55.1](https://github.com/nextcloud/nextcloudpi/tree/v1.55.1) (2024-09-08) Hotfix release\n\n### Fixes\n\n- Prevent attempted downgrade in ncp-update-nc\n\n## [v1.55.0](https://github.com/nextcloud/nextcloudpi/tree/v1.55.0) (2024-09-07) Support for PHP 8.3 and Nextcloud 29\n\n### Changes\n\n- Support for Nextcloud 29\n- Support for PHP 8.3\n- Run `maintenance:repair --include-expensive` after NC update if necessary\n- Add logrotate for redis, apache and mysql logs\n- Add support for the OrangePi 5 and OrangePi 5 Plus boards\n\n### Fixes\n\n- Fix bug in nc-format-USB.sh (thanks @m-breitbach)\n- Nextcloud updater fixes \n  - Fix constant retries of the auto update if on a version that's later than the last officially supported one [#1965](https://github.com/nextcloud/nextcloudpi/issues/1965)\n  - Fix incorrect detection of os constraints for NC updates beyond v28 [#1960](https://github.com/nextcloud/nextcloudpi/issues/1960)\n  - Fix user requested version being ignored if a later version was available\n- Improve stability of nc-encrypt by daemonizing the encryption process [#1874](https://github.com/nextcloud/nextcloudpi/issues/1874)\n\n### Development related\n\n- Perform nc update tests for both lxd as well as vms during CI/CD\n\n## [v1.54.3](https://github.com/nextcloud/nextcloudpi/tree/v1.54.3) (2024-08-11) Improved Nextcloud (auto) updates\n\n### Fixes\n\n- Prevent dependency conflict during distribution upgrade to debian 12\n\n### Changes\n\n- Nextcloud updates now automatically determine the next valid version to upgrade to. Auto updates always update to the latest minor version.\n\n## [v1.54.2](https://github.com/nextcloud/nextcloudpi/tree/v1.54.2) (2024-05-08) Fixes for ncp-dist-upgrade (bookworm)\n\n### Fixes\n\n- Make sure zstd is installed [#1921](https://github.com/nextcloud/nextcloudpi/issues/1921)\n- Dynamically determine DB prefix [#1818](https://github.com/nextcloud/nextcloudpi/issues/1818)\n\n## [v1.54.1](https://github.com/nextcloud/nextcloudpi/tree/v1.54.1) (2024-05-08) Fixes for ncp-dist-upgrade (bookworm)\n\n### Fixes\n\n- Reenable erroneously disabled apt package sources\n- Remove login message about available dist-upgrade if already on Debian 12\n\n## [v1.54.0](https://github.com/nextcloud/nextcloudpi/tree/v1.54.0) (2024-05-01) Support Debian 12 and Nextcloud 28.0.5\n\n### Changes\n\n- Add support for Nextcloud 28.0.5\n- Add ncp-dist-upgrade script to upgrade to Debian 12 (bookworm)\n- Change mechanism to prevent root login by default\n- Add support for Raspberry Pi 5\n- Use Armbian instead of Raspbian as base for Raspberry Pi images\n\n### Development related\n\n- (CICD) Add integration tests for dist-upgrade\n- Add support for building with incus\n\n## [v1.53.3](https://github.com/nextcloud/nextcloudpi/tree/v1.53.3) (2024-04-24) Support Nextcloud 28.0.4\n\n### Changes\n\n- Add support for Nextcloud 28.0.4\n\n\n## [v1.53.2](https://github.com/nextcloud/nextcloudpi/tree/v1.53.2) (2024-03-28) Support Nextcloud 28\n\n### Changes\n\n- Add support for Nextcloud 28.0.3\n\n\n## [v1.53.1](https://github.com/nextcloud/nextcloudpi/tree/v1.53.1) (2024-02-01) Support Nextcloud 27.1.6\n\n### Changes\n\n- Add support for Nextcloud 27.1.6\n\n### Development related\n\n- minor fixes to the build process\n\n## [v1.53.0](https://github.com/nextcloud/nextcloudpi/tree/v1.53.0) (2023-11-15) Staged Rollouts and NC 27.1.3\n\n### Changes\n\n- Add support for Nextcloud 27.1.3\n- Add support for staged rollouts\n- Add admin notification and community participation options\n- Add NCP section in Nextcloud settings \n\n### Development related\n\n- Use latest armbian build stack (armbian next)\n- Support latest Selenium version in integration tests\n\n## [v1.52.4](https://github.com/nextcloud/nextcloudpi/tree/v1.52.4) (2023-07-31) Fix error in NCP updater\n\n### Fixes\n\n- Fix missing command in NCP updater\n\n## [v1.52.3](https://github.com/nextcloud/nextcloudpi/tree/v1.52.3) (2023-07-26) Add support for Nextcloud 27.0.1\n\n### Changes\n\n- Add support for Nextcloud 27.0.1\n\n## [v1.52.2](https://github.com/nextcloud/nextcloudpi/tree/v1.52.2) (2023-07-19) Hotfix: Fix crash in ncp-restore\n\n### Fixes\n\n- Fix crash in `ncp-restore`\n\n## [v1.52.1](https://github.com/nextcloud/nextcloudpi/tree/v1.52.1) (2023-07-17) Add support for Nextcloud 26.0.3\n\n### Changes\n\n- Adds support for NC 26.0.3\n- Add ZFS support for the data directory (#1767)\n\n### Fixes\n\n- Fix bug in ncp-backup (#1791)\n- Fix missing configuration field for nc-backup-auto (#1787)\n\n## [v1.52.0](https://github.com/nextcloud/nextcloudpi/tree/v1.52.0) (2023-05-01) Add support for Nextcloud 26.0.1\n\n### Changes\n\n- Add support for NC 26.0.1\n\n### Fixes\n\n- Fix possible folder name collision in ncp-restore\n\n## [v1.51.3](https://github.com/nextcloud/nextcloudpi/tree/v1.51.3) (2023-04-26) Add support for Nextcloud 25.0.6\n\n### Changes\n\n- Add support for NC 25.0.6\n\n## [v1.51.2](https://github.com/nextcloud/nextcloudpi/tree/v1.51.2) (2023-04-16) Restore support for LXC images\n\n### Changes\n\n- LXC images are being provided again (generated from the LXD ones)\n- root/webui users are not disabled on container images anymore\n- Add a new utility (command line) script `nc-broadcast` to notify all Nextcloud users\n- Notify docker users about the discontinuation of NCP docker (more information [here](https://help.nextcloud.com/t/nextcloudpi-planning-to-discontinue-its-docker-version-with-nc-25))\n- LXD/LXC images receive support for the following ncp apps:\n  - nc-autoupdate-ncp\n  - nc-update\n  - nc-datadir\n  - nc-database\n  - UFW\n  - nc-audit\n  - SSH\n  - fail2ban\n  - nc-nextcloud\n  - nc-init\n  - samba\n\n### Fixes\n\n- Exclude btrfs snapshots from backup monitoring in `ncp-metrics` for all container variants\n- Use systemd backend for ssh jail in `fail2ban` (/var/log/auth.log may not be available)\n- Increase mysql max_allowed_packet (fixes [#1752](https://github.com/nextcloud/nextcloudpi/issues/1752))\n\n## [v1.51.1](https://github.com/nextcloud/nextcloudpi/tree/v1.51.1) (2023-04-08) Support for Nextcloud 25.0.5 and SSH/updater fixes\n\n### Changes\n\n- Add support for Nextcloud 25.0.5\n- Allow arbitrary users to be created during SSH activation from the web UI\n\n### Fixes\n\n- Prevent PHP upgrades from the web UI\n- Prevent docker container startup if the installed Nextcloud version is not compatible\n- Fix missing NCP logo on login page\n\n## [v1.51.0](https://github.com/nextcloud/nextcloudpi/tree/v1.51.0) (2023-01-22) Update to Nextcloud 25.0.3 and new PortCheck Service\n\n### Changes\n\n- Push latest supported version of Nextcloud to 25.0.3\n- Use new PortCheck backend (shoutout to [@ZendaiOwl](https://github.com/ZendaiOwl))\n- Add ncp app for manually clearing the PHP opcache (including file cache)\n\n### Fixes\n\n- Remove deprecated apt package `php-json` and warn users if `php8.2-*` packages are detected on their instance\n- Whenever ncp sends a notification, all NC users in the admin group will now receive it (instead of the first admin user)\n- Fix bug in ncp-update-nc that would prevent the backup from being restored on error in some cases\n- Adjust PHP opcache config to hopefully avoid one source of opcache JIT segmentation fault errors\n- Disable PHP opcache for cli usage (so the segmentation faults don't affect ncp tools and ncc commands)\n- (docker) Fix display of nextcloud logs in container output in some cases\n- (docker) Config files of new ncp apps are now properly installed\n\n### Development related\n\n- (CI/CD) Include NC updates in update integration tests\n- (CI/CD) Improve output formatting and robustness for sd image tests\n- (CI/CD) Disable image builds and tests that are known to fail for reasons out of our influence\n\n## [v1.50.5](https://github.com/nextcloud/nextcloudpi/tree/v1.50.5) (2023-01-08) Various fixes and update to NC 24.0.8\n\n### Changes\n\n- Move default location of data directory out of nextcloud directory (partial fix for [#1417](https://github.com/nextcloud/nextcloudpi/issues/1417))\n- ssh: Add option to add ssh user to sudo group\n- Disable root user for login\n- Install various templates on docker container start (improves config persistence)\n\n### Fixes\n\n- Keep old data directory if present (partial fix for [#1417](https://github.com/nextcloud/nextcloudpi/issues/1417))\n- Temporarily move and restore user files during nc-restore (partial fix for [#1417](https://github.com/nextcloud/nextcloudpi/issues/1417))\n- Improve robustness of the setup process for notify_push\n\n### Development related\n\n- build-docker.yml: Fix update-test on architectures other than x86\n- Many fixes and improvements for the CICD pipelines\n- Add basic integration test for nc-backup\n\n## [v1.50.4](https://github.com/nextcloud/nextcloudpi/tree/v1.50.4) (2022-12-17) Installer Fix\n\n- Don't install deprecated PHP packages during installation (`php-json`)\n\n## [v1.50.3](https://github.com/nextcloud/nextcloudpi/tree/v1.50.3) (2022-10-03) Fix SSH login on raspberry pi\n\n- Fix ssh users staying disabled when activating SSH\n\n## [v1.50.2](https://github.com/nextcloud/nextcloudpi/tree/v1.50.2) (2022-09-27) Various bug fixes\n\n### docker\n\n- Fix misconfigured database directory on docker (/data-ro)\n- Create backup on container startup\n- Fix changed user ids between container versions\n- Remove nc-update from docker\n\n### CI/CD\n\n- Add tests for container updates\n\n## [v1.50.1](https://github.com/nextcloud/nextcloudpi/tree/v1.50.1) (2022-09-27) Various bug fixes\n\n- Fix CI/CD armbian builds\n- ncp-update: Prevent running ncp-update inside docker without explicit confirmation [#1568](https://github.com/nextcloud/nextcloudpi/issues/1568)\n- ncp-dist-upgrade: Fix attempt to install php version that is not in apt repositories of bullseye [#1570](https://github.com/nextcloud/nextcloudpi/issues/1570)\n- Automatically restart notify_push on error (all but docker) [#1565](https://github.com/nextcloud/nextcloudpi/issues/1565)\n- Fix ncp-report failing to censor gateway IP [#1561](https://github.com/nextcloud/nextcloudpi/pull/1561)\n\n## [v1.50.0](https://github.com/nextcloud/nextcloudpi/tree/v1.50.0) (2022-09-22) Update PHP to version 8.1 and Nextcloud to version 24\n\n- Add support for Nextcloud v24.0.5\n- Upgrade PHP to version 8.1 when upgrading Nextcloud to version >=24\n\n## [v1.49.1](https://github.com/nextcloud/nextcloudpi/tree/v1.49.0) (2022-09-14) Minor fixes\n\n- ncp-diag: Fix port check if ncp is running behind a dual stack lite (no publicly visible ipv4 address)\n- Improve architecture detection for containerized setups\n- Make it harder to break things with nc-format-usb\n\n## [v1.49.0](https://github.com/nextcloud/nextcloudpi/tree/v1.49.0) (2022-08-15) Update to Nextcloud 24; Fix port check\n\n## [v1.48.2](https://github.com/nextcloud/nextcloudpi/tree/v1.48.2) (2022-07-20) Fix notify_push using invalid domain; Fix Nextcloud v23.0.6 not being installed by default \n\n## [v1.48.1](https://github.com/nextcloud/nextcloudpi/tree/v1.48.1) (2022-06-12) Fix docker release missing latest tags\n\n## [v1.48.0](https://github.com/nextcloud/nextcloudpi/tree/v1.48.0) (2022-06-12) Update Nextcloud to version 23.0.6\n\n## [v1.47.2](https://github.com/nextcloud/nextcloudpi/commit/b66ce17) (2022-05-05) docker-build.yml: Add CI/CD integration tests for docker images\n\n## [v1.47.1 ](https://github.com/nextcloud/nextcloudpi/commit/9663ef7) (2022-04-13) system_tests.py: Remove deprecated wicd_curses check\n\n## [v1.47.0, feature/custom-prometheus-exporter](https://github.com/nextcloud/nextcloudpi/commit/d42a0c8) (2022-04-08) metrics.sh: Reinstall metrics when upgrading\n\n## [v1.46.10](https://github.com/nextcloud/nextcloudpi/commit/99a3c45) (2022-03-26) dnsmasq.sh: Workaround dnsmasq startup failure bug\n\n## [v1.46.9 ](https://github.com/nextcloud/nextcloudpi/commit/cd98b50) (2022-03-07) docker: adjust PHP version in apache config\n\n## [v1.46.8 ](https://github.com/nextcloud/nextcloudpi/commit/21b7fe7) (2022-03-04) SSH: cannot check for default password because of Debian bug #1003151\n\n## [v1.46.7 ](https://github.com/nextcloud/nextcloudpi/commit/f473f73) (2022-03-04) nc-hdd-monitor: fix Bullseye service name\n\n## [v1.46.6 ](https://github.com/nextcloud/nextcloudpi/commit/c9610e4) (2022-03-03) ncp-dist-upgrade: fix VM grub-pc issue\n\n## [v1.46.5 ](https://github.com/nextcloud/nextcloudpi/commit/062c803) (2022-03-02) ncp-dist-upgrade: add DHCP fix for raspios\n\n## [v1.46.4 ](https://github.com/nextcloud/nextcloudpi/commit/06ba8a0) (2022-03-02) nc-scan: check for maintenance mode enabled\n\n## [v1.46.3 ](https://github.com/nextcloud/nextcloudpi/commit/6245770) (2022-03-02) nc-trusted-domains: dont return 1 if last domain is empty\n\n## [v1.46.2 ](https://github.com/nextcloud/nextcloudpi/commit/a834ba0) (2022-03-02) samba: fix usernames with spaces\n\n## [v1.46.1 ](https://github.com/nextcloud/nextcloudpi/commit/f8af35b) (2022-03-02) nc-datadir: include dotfiles\n\n## [v1.46.0 ](https://github.com/nextcloud/nextcloudpi/commit/878f08f) (2022-03-01) upgrade to NC23.0.2\n\n## [v1.45.0 ](https://github.com/nextcloud/nextcloudpi/commit/9bf5ff0) (2021-11-09) update to Debian 11 Bullseye\n\n## [v1.44.8 ](https://github.com/nextcloud/nextcloudpi/commit/dd8fc3d) (2022-01-10) fix update from pre-1.46 to post-1.46 not working in docker (#1406)\n\n## [v1.44.7 ](https://github.com/nextcloud/nextcloudpi/commit/bcd850c) (2021-12-13) letsencrypt: fix invalid arithmetic operator error\n\n## [v1.44.6 ](https://github.com/nextcloud/nextcloudpi/commit/26a7778) (2021-12-06) notify_push: fix service not restarting on binary update (#1398)\n\n## [v1.44.5 ](https://github.com/nextcloud/nextcloudpi/commit/5a404c0) (2021-11-29) ncp-previewgenerator: fix app enable in NC22\n\n## [v1.44.4 ](https://github.com/nextcloud/nextcloudpi/commit/0a4f8c1) (2021-11-19) ncp-web: fix spurious characters in power menu\n\n## [v1.44.3 ](https://github.com/nextcloud/nextcloudpi/commit/4717eb3) (2021-11-18) tweak ncc command\n\n## [v1.44.2 ](https://github.com/nextcloud/nextcloudpi/commit/0c589ff) (2021-11-16) ncp-app: bump to NC22\n\n## [v1.44.1 ](https://github.com/nextcloud/nextcloudpi/commit/2aa95c6) (2021-11-16) ncp-previewgenerator: update to NC22\n\n## [v1.43.7 ](https://github.com/nextcloud/nextcloudpi/commit/6aba9b9) (2021-11-05) nc-restore: improve restoring data from SD to docker\n\n## [v1.43.6 ](https://github.com/nextcloud/nextcloudpi/commit/c56a4db) (2021-11-05) ncp-web: hide power menu on docker\n\n## [v1.43.5 ](https://github.com/nextcloud/nextcloudpi/commit/13f69cd) (2021-11-04) ncp-web: tweak invalid character set\n\n## [v1.43.4 ](https://github.com/nextcloud/nextcloudpi/commit/d4bca07) (2021-11-04) nc-restore: Adding ZFS to filesystem whitelist / updating error message\n\n## [v1.43.3 ](https://github.com/nextcloud/nextcloudpi/commit/19ede8a) (2021-11-02) nc-datadir: support for nc-encrypted folders\n\n## [v1.43.2 ](https://github.com/nextcloud/nextcloudpi/commit/ee01a70) (2021-10-27) ncp-web: tweak password suggestions\n\n## [v1.43.1 ](https://github.com/nextcloud/nextcloudpi/commit/a828576) (2021-10-30) Clarify documentation of nc-previews-auto command (#1370)\n\n## [v1.43.0 ](https://github.com/nextcloud/nextcloudpi/commit/7b73d1d) (2021-10-22) add nc-encrypt\n\n## [v1.42.5 ](https://github.com/nextcloud/nextcloudpi/commit/532a6a8) (2021-10-27) letsencrypt: sync ncp and nc cert paths\n\n## [v1.42.4 ](https://github.com/nextcloud/nextcloudpi/commit/41368fe) (2021-10-27) ncp-vm: add automatic testing and change default root password\n\n## [v1.42.3 ](https://github.com/nextcloud/nextcloudpi/commit/b1e7323) (2021-10-25) nextcloud-domain: fix variable collision\n\n## [v1.42.2 ](https://github.com/nextcloud/nextcloudpi/commit/9ff21bb) (2021-10-23) nc-backup-auto: ncc path\n\n## [v1.42.1 ](https://github.com/nextcloud/nextcloudpi/commit/e11ce59) (2021-10-22) ncp-web: fix log download bug\n\n## [v1.42.0 ](https://github.com/nextcloud/nextcloudpi/commit/3f57513) (2021-10-21) ncp-web: add Russion translations\n\n## [v1.41.12](https://github.com/nextcloud/nextcloudpi/commit/36c1f46) (2021-10-20) letsencrypt: disable also ncp web certs if OFF\n\n## [v1.41.11](https://github.com/nextcloud/nextcloudpi/commit/dcfd1cf) (2021-10-15) ncp-backup: added help message (#1231)\n\n## [v1.41.10](https://github.com/nextcloud/nextcloudpi/commit/ec94e6f) (2021-10-18) nc-static-IP: use ifdown/ifup\n\n## [v1.41.9 ](https://github.com/nextcloud/nextcloudpi/commit/f9c9e37) (2021-10-18) fail2ban: fix UFW jail\n\n## [v1.41.8 ](https://github.com/nextcloud/nextcloudpi/commit/326de1d) (2021-10-15) fix dual IPv6 stack port checking\n\n## [v1.41.7 ](https://github.com/nextcloud/nextcloudpi/commit/78a88eb) (2021-10-18) ncp-web: remove dir indicator on nc-backup\n\n## [v1.41.6 ](https://github.com/nextcloud/nextcloudpi/commit/06ffb1e) (2021-10-18) nc-static-IP: make sure dhclient is no longer running\n\n## [v1.41.5 ](https://github.com/nextcloud/nextcloudpi/commit/74ed53f) (2021-10-15) letsencrypt: hardcode cert name to avoid -0001 paths\n\n## [v1.41.4 ](https://github.com/nextcloud/nextcloudpi/commit/0a866ca) (2021-10-15) save and restore maintenance mode status in ncp-apps\n\n## [v1.41.3 ](https://github.com/nextcloud/nextcloudpi/commit/80575ae) (2021-10-15) ncp-update-nc: check skip major versions\n\n## [v1.41.2 ](https://github.com/nextcloud/nextcloudpi/commit/cf4cfd8) (2021-10-15) also save hostname in trusted domains\n\n## [v1.41.1 ](https://github.com/nextcloud/nextcloudpi/commit/c75db63) (2021-10-14) letsencrypt: take into account the possibility of the ncp-nextcloud folder being used\n\n## [v1.41.0 ](https://github.com/nextcloud/nextcloudpi/commit/b41fad0) (2021-10-13) ncp-web: add NCP logs section\n\n## [v1.40.10](https://github.com/nextcloud/nextcloudpi/commit/85cb1f0) (2021-10-12) nc-import-ncp: run activated apps upon import\n\n## [v1.40.9 ](https://github.com/nextcloud/nextcloudpi/commit/35a3a54) (2021-10-12) letsencrypt: favor most recent cert if there are many\n\n## [v1.40.8 ](https://github.com/nextcloud/nextcloudpi/commit/9bddfad) (2021-10-12) fix HPB with dynamic IP\n\n## [v1.40.7 ](https://github.com/nextcloud/nextcloudpi/commit/4e790e4) (2021-10-12) letsencrypt: fix template generation\n\n## [v1.40.6 ](https://github.com/nextcloud/nextcloudpi/commit/b64859e) (2021-10-11) add architecture and kernel info to ncp-info (#1360)\n\n## [v1.40.5](https://github.com/nextcloud/nextcloudpi/commit/cc3f336) (2021-10-11) letsencrypt: keep original cert name\n\n## [v1.40.4 ](https://github.com/nextcloud/nextcloudpi/commit/de104a5) (2021-10-06) Make templating safer and more verbose (#1343)\n\n## [v1.40.3 ](https://github.com/nextcloud/nextcloudpi/commit/8a6c1c0) (2021-10-06) ncp-check-nc-version: dont notify the same version more than once\n\n## [v1.40.2 ](https://github.com/nextcloud/nextcloudpi/commit/ea1e00c) (2021-10-05) nc-update-nc: BTRFS support\n\n## [v1.40.1 ](https://github.com/nextcloud/nextcloudpi/commit/7c361c5) (2021-10-05) update: improve check for apt (#1356)\n\n## [v1.40.0 ](https://github.com/nextcloud/nextcloudpi/commit/a0728d7) (2021-10-04) nc-notify-updates: notify of new supported NC versions\n\n## [v1.39.21](https://github.com/nextcloud/nextcloudpi/commit/2037064) (2021-10-04) ncp-web: disable activation page once activated\n\n## [v1.39.20](https://github.com/nextcloud/nextcloudpi/commit/714c3e5) (2021-10-04) ncp-config: fix first time error with no known latest version\n\n## [v1.39.19](https://github.com/nextcloud/nextcloudpi/commit/05f0d35) (2021-09-30) ncp-web: fix upload from local file path\n\n## [v1.39.18](https://github.com/nextcloud/nextcloudpi/commit/f1c90f5) (2021-09-30) nc-httpsonly: always use overwriteprotocol https in all cases\n\n## [v1.39.17](https://github.com/nextcloud/nextcloudpi/commit/c037c11) (2021-09-29) add bash completion to ncc\n\n## [v1.39.16](https://github.com/nextcloud/nextcloudpi/commit/2be666b) (2021-09-27) nc-https: proto logic was inverted fix\n\n## [v1.39.15](https://github.com/nextcloud/nextcloudpi/commit/b067844) (2021-09-27) add get_ip function\n\n## [v1.39.14](https://github.com/nextcloud/nextcloudpi/commit/6ad96ed) (2021-09-25) nc-https:only fix infinite redirects behind proxy\n\n## [v1.39.13](https://github.com/nextcloud/nextcloudpi/commit/eef7b09) (2021-09-23) ncp-web: make letsencrypt detection more robust\n\n## [v1.39.12](https://github.com/nextcloud/nextcloudpi/commit/814569b) (2021-09-22) fix junk in overwrite.cli.url because of Redis not being yet ready\n\n## [v1.39.11](https://github.com/nextcloud/nextcloudpi/commit/4039da9) (2021-09-21) letsencrypt: take into account duplicate domains ending in -0001\n\n## [v1.39.10](https://github.com/nextcloud/nextcloudpi/commit/2b51476) (2021-09-21) fix inverted template logic for docker\n\n## [v1.39.9 ](https://github.com/nextcloud/nextcloudpi/commit/a4851dc) (2021-09-21) letsencrypt: fix renewal with httpsonly enabled\n\n## [v1.39.8 ](https://github.com/nextcloud/nextcloudpi/commit/1046a24) (2021-09-21) letsencrypt: fix active status check\n\n## [v1.39.7 ](https://github.com/nextcloud/nextcloudpi/commit/98976c9) (2021-09-22) dont update config if Redis is not yet ready\n\n## [v1.39.6 ](https://github.com/nextcloud/nextcloudpi/commit/534b9b5) (2021-09-19) ncp-update-nc: pre-check that NC is currently working fine\n\n## [v1.39.5 ](https://github.com/nextcloud/nextcloudpi/commit/cb184d2) (2021-09-19) ncp-update-nc: dont keep notifying when there is nothing to upgrade\n\n## [v1.39.4 ](https://github.com/nextcloud/nextcloudpi/commit/311cd2b) (2021-09-19) improve btrfs/ext checks\n\n## [v1.39.3 ](https://github.com/nextcloud/nextcloudpi/commit/f3e3b01) (2021-09-18) letsencrypt: improve active status check\n\n## [v1.39.2 ](https://github.com/nextcloud/nextcloudpi/commit/110311f) (2021-09-18) nextcloud-domain: make sure redis is running before it starts\n\n## [v1.39.1 ](https://github.com/nextcloud/nextcloudpi/commit/6290c1f) (2021-09-09) nc-static-IP: take into account httpsonly\n\n## [v1.39.0 ](https://github.com/nextcloud/nextcloudpi/commit/c10d4bd) (2021-09-05) upgrade to NC21.0.4\n\n## [v1.38.6](https://github.com/nextcloud/nextcloudpi/commit/3bf746b) (2021-08-25) raspi: allow oldstable origins\n\n## [v1.38.5 ](https://github.com/nextcloud/nextcloudpi/commit/e23b252) (2021-08-17) nc-init: drop News for 32-bit :(\n\n## [v1.38.4 ](https://github.com/nextcloud/nextcloudpi/commit/bb720be) (2021-08-17) build: make sure we clean /.ncp-image in old builds\n\n## [v1.38.3](https://github.com/nextcloud/nextcloudpi/commit/9642cf9) (2021-08-17) unattended-upgrades: update raspbian origins\n\n## [v1.38.2 ](https://github.com/nextcloud/nextcloudpi/commit/956eea4) (2021-08-16) nc-restore: try to detect old datadir in dataless restoration\n\n## [v1.38.1 ](https://github.com/nextcloud/nextcloudpi/commit/4f29d94) (2021-08-16) nextcloud.conf.sh: Prevent apache config test output to end up in generated template\n\n## [v1.38.0 ](https://github.com/nextcloud/nextcloudpi/commit/6e2dca5) (2021-08-09) upgrade to NC20.0.12\n\n## [v1.37.9 ](https://github.com/nextcloud/nextcloudpi/commit/b8c1409) (2021-08-09) letsencrypt: ability to disable it and roll back to self-signed certificates\n\n## [v1.37.8 ](https://github.com/nextcloud/nextcloudpi/commit/5a05b89) (2021-08-08) nextcloud: remove beta option\n\n## [v1.37.7 ](https://github.com/nextcloud/nextcloudpi/commit/1d696f0) (2021-08-07) nc-backup-auto.sh: don't smash ncp.log\n\n## [v1.37.6 ](https://github.com/nextcloud/nextcloudpi/commit/b840245) (2021-08-03) metrics.sh: Fix inverted is_active result\n\n## [v1.37.5 ](https://github.com/nextcloud/nextcloudpi/commit/fb102d2) (2021-08-03) metrics.sh: Fix USER variable being ignored\n\n## [v1.37.4 ](https://github.com/nextcloud/nextcloudpi/commit/e492032) (2021-08-02) nextcloud.conf.sh: Allow any user name for metrics endpoint and fix docker build\n\n## [v1.37.3 ](https://github.com/nextcloud/nextcloudpi/commit/b8a990e) (2021-08-02) Add ncp-app for prometheus (system) metrics\n\n## [v1.37.2](https://github.com/nextcloud/nextcloudpi/commit/4300e30) (2021-07-31) unattended-upgrades: update raspbian origins\n\n## [v1.37.1 ](https://github.com/nextcloud/nextcloudpi/commit/b1ffd70) (2021-07-06) ncp-app: bump to NC21\n\n## [v1.37.0 ](https://github.com/nextcloud/nextcloudpi/commit/effdd6c) (2021-07-03) upgrade to NC20.0.11\n\n## [v1.36.3 ](https://github.com/nextcloud/nextcloudpi/commit/7b809d1) (2021-05-13) ncp-web: fix port checking for IPv6 dual stack\n\n## [v1.36.2 ](https://github.com/nextcloud/nextcloudpi/commit/1a8ac71) (2021-05-11) ncp-web: fix port checking\n\n## [v1.36.1 ](https://github.com/nextcloud/nextcloudpi/commit/67aa599) (2021-05-09) lamp: allow only TLSv12 and TLSv13\n\n## [v1.36.0 ](https://github.com/nextcloud/nextcloudpi/commit/7aef967) (2020-09-16) Namecheap dynamic DNS client\n\n## [v1.35.2 ](https://github.com/nextcloud/nextcloudpi/commit/8d76a6b) (2021-04-29) ncp-web: fix display of big files for 32 bit\n\n## [v1.35.1 ](https://github.com/nextcloud/nextcloudpi/commit/0ee3aa9) (2021-04-29) ncp-web: fix backup download for big files in 32-bit\n\n## [v1.35.0 ](https://github.com/nextcloud/nextcloudpi/commit/be30663) (2021-02-27) upgrade to NC20.0.8\n\n## [v1.34.9 ](https://github.com/nextcloud/nextcloudpi/commit/7d15924) (2021-01-19) nc-autoupdate-ncp: Append to log instead of replace\n\n## [v1.34.8 ](https://github.com/nextcloud/nextcloudpi/commit/117b8ea) (2021-01-20) nc-automount: udiskie verbose output\n\n## [v1.34.7 ](https://github.com/nextcloud/nextcloudpi/commit/b978184) (2021-01-19) docker: fix datadir path contents\n\n## [v1.34.6 ](https://github.com/nextcloud/nextcloudpi/commit/84ccf94) (2021-01-18) docker: fix datadir path\n\n## [v1.34.5 ](https://github.com/nextcloud/nextcloudpi/commit/afa39fb) (2021-01-18) ncp-config: shorten descriptions\n\n## [v1.34.4 ](https://github.com/nextcloud/nextcloudpi/commit/3a3b6a7) (2021-01-17) btrfs-sync: check for existing keys\n\n## [v1.34.3 ](https://github.com/nextcloud/nextcloudpi/commit/6cb682a) (2021-01-17) update cron interval\n\n## [v1.34.2 ](https://github.com/nextcloud/nextcloudpi/commit/20bd14f) (2021-01-17) wizard: fix letsencrypt empty email\n\n## [v1.34.1](https://github.com/nextcloud/nextcloudpi/commit/23eecff) (2021-01-01) unattended-upgrades: fix raspbian origin\n\n## [v1.34.0 ](https://github.com/nextcloud/nextcloudpi/commit/ec428a2) (2021-01-01) upgrade to NC20.0.4\n\n## [v1.33.2 ](https://github.com/nextcloud/nextcloudpi/commit/82d00c8) (2021-01-01) ncp-config: fix empty values\n\n## [v1.33.1 ](https://github.com/nextcloud/nextcloudpi/commit/42fd597) (2020-12-12) nc-update-nc: improve error messages\n\n## [v1.33.0 ](https://github.com/nextcloud/nextcloudpi/commit/ffd0b44) (2020-12-10) upgrade to NC20.0.3\n\n## [v1.32.1 ](https://github.com/nextcloud/nextcloudpi/commit/35c0d96) (2020-11-30) nc-update-nc: ncp apps might not exist\n\n## [v1.32.0 ](https://github.com/nextcloud/nextcloudpi/commit/7afdc0f) (2020-11-24) upgrade to NC20.0.2\n\n## [v1.31.0 ](https://github.com/nextcloud/nextcloudpi/commit/ab9184c) (2020-10-19) upgrade to NC19.0.4\n\n## [v1.30.1 ](https://github.com/nextcloud/nextcloudpi/commit/9450613) (2020-10-20) nc-info: fixed api change for portchecker (#1194)\n\n## [v1.30.0 ](https://github.com/nextcloud/nextcloudpi/commit/f00fe21) (2020-09-19) upgrade to NC19.0.2\n\n## [v1.29.11](https://github.com/nextcloud/nextcloudpi/commit/82baebf) (2020-09-03) ncp-web: added a lot of german locales\n\n## [v1.29.10](https://github.com/nextcloud/nextcloudpi/commit/3706ed0) (2020-09-12) nc-previews: fix killing generate-all\n\n## [v1.29.9 ](https://github.com/nextcloud/nextcloudpi/commit/9d65011) (2020-09-07) nc-restore: also set tempdirectory\n\n## [v1.29.8 ](https://github.com/nextcloud/nextcloudpi/commit/21a791d) (2020-08-30) nc-limits: minimum 6 PHP threads (for NC talk)\n\n## [v1.29.7 ](https://github.com/nextcloud/nextcloudpi/commit/c143acc) (2020-07-24) do not hsts preload by default, only serve hsts header over https\n\n## [v1.29.6 ](https://github.com/nextcloud/nextcloudpi/commit/14b78e3) (2020-08-29) ncp-web: Fix the style of the language selection dropdown (chrome)\n\n## [v1.29.5 ](https://github.com/nextcloud/nextcloudpi/commit/34e84ba) (2020-08-30) ncp-web: fix initial screen displaying all sections\n\n## [v1.29.4 ](https://github.com/nextcloud/nextcloudpi/commit/17aae56) (2020-08-30) ncp-update-nc: check for ncc commands before using them\n\n## [v1.29.3 ](https://github.com/nextcloud/nextcloudpi/commit/76ffaec) (2020-08-26) nc-static-IP: Restricting gateway to one\n\n## [v1.29.0 ](https://github.com/nextcloud/nextcloudpi/commit/3cf269a) (2020-08-28) upgrade to NC19.0.2\n\n## [v1.28.4 ](https://github.com/nextcloud/nextcloudpi/commit/4c5b207) (2020-08-02) ncp-backup-auto: fix exit status for cron\n\n## [v1.28.3 ](https://github.com/nextcloud/nextcloudpi/commit/81fcd14) (2020-08-02) ncp-autoupdate-apps: dont fail cron if no updates\n\n## [v1.28.2 ](https://github.com/nextcloud/nextcloudpi/commit/06017a4) (2020-08-02) nc-limits: adjust db size\n\n## [v1.28.1 ](https://github.com/nextcloud/nextcloudpi/commit/dda010b) (2020-08-02) nc-ramlogs: pin version\n\n## [v1.28.0 ](https://github.com/nextcloud/nextcloudpi/commit/99cfe9b) (2020-07-23) upgrade to NC18.0.7\n\n## [v1.27.0 ](https://github.com/nextcloud/nextcloudpi/commit/3c96d2e) (2020-07-05) upgrade to NC18.0.6\n\n## [v1.26.2 ](https://github.com/nextcloud/nextcloudpi/commit/337ffeb) (2020-06-13) ncp-autoupdate: cronjob write to the log only (#1144)\n\n## [v1.26.1 ](https://github.com/nextcloud/nextcloudpi/commit/4e79386) (2020-06-13) ncp-web: fix port checking\n\n## [v1.26.0 ](https://github.com/nextcloud/nextcloudpi/commit/aedd8f0) (2020-06-11) upgrade to NC18.0.5\n\n## [v1.25.0 ](https://github.com/nextcloud/nextcloudpi/commit/ed3619f) (2020-04-24) upgrade to NC18.0.4\n\n## [v1.24.3 ](https://github.com/nextcloud/nextcloudpi/commit/1c45e0d) (2020-04-18) ncp-web: cache backup info\n\n## [v1.24.2 ](https://github.com/nextcloud/nextcloudpi/commit/ff565d6) (2020-04-06) build: small tweaks\n\n## [v1.24.1 ](https://github.com/nextcloud/nextcloudpi/commit/ae6c88f) (2020-04-06) nc-backup-auto: fix notify_admin\n\n## [v1.24.0 ](https://github.com/nextcloud/nextcloudpi/commit/a3dbec1) (2020-03-24) upgrade to NC18.0.3\n\n## [v1.23.2 ](https://github.com/nextcloud/nextcloudpi/commit/0a97f77) (2020-03-22) lamp: disable old TLS versions\n\n## [v1.23.1 ](https://github.com/nextcloud/nextcloudpi/commit/84e6b4e) (2020-03-15) ncp-web: check for possibly missing index\n\n## [v1.23.0 ](https://github.com/nextcloud/nextcloudpi/commit/d108fad) (2020-03-13) upgrade to NC18.0.2\n\n## [v1.22.3 ](https://github.com/nextcloud/nextcloudpi/commit/c09dfd9) (2020-03-02) nc-snapshot-auto: read datadir location during execution\n\n## [v1.22.2 ](https://github.com/nextcloud/nextcloudpi/commit/f71c8c8) (2020-03-02) nc-maintenance: add is_active\n\n## [v1.22.1 ](https://github.com/nextcloud/nextcloudpi/commit/c49c390) (2020-03-03) samba: option to apply only to a NC group (#1048)\n\n## [v1.22.0 ](https://github.com/nextcloud/nextcloudpi/commit/9304c86) (2020-03-03) Add nc-trusted-proxies (#1094)\n\n## [v1.21.0 ](https://github.com/nextcloud/nextcloudpi/commit/4a51c1f) (2020-02-28) upgrade to NC18.0.1\n\n## [v1.20.11](https://github.com/nextcloud/nextcloudpi/commit/f066b03) (2020-02-27) redis: make sure we have the right permissions for conf file\n\n## [v1.20.10](https://github.com/nextcloud/nextcloudpi/commit/c0cee6b) (2020-02-12) fail2ban: fix regex for NC18\n\n## [v1.20.9 ](https://github.com/nextcloud/nextcloudpi/commit/0c538ae) (2020-02-04) add notify_admin functionality\n\n## [v1.20.8 ](https://github.com/nextcloud/nextcloudpi/commit/986046f) (2020-02-05) nc-backup: add more info to description (#1073)\n\n## [v1.20.7 ](https://github.com/nextcloud/nextcloudpi/commit/b404765) (2020-01-26) fail2ban: update regex for NC17\n\n## [v1.20.6 ](https://github.com/nextcloud/nextcloudpi/commit/4a99207) (2020-01-21) ncp-config: dont save passwords\n\n## [v1.20.5 ](https://github.com/nextcloud/nextcloudpi/commit/a98baee) (2020-01-18) update: fix case where there is no current version file\n\n## [v1.20.4 ](https://github.com/nextcloud/nextcloudpi/commit/e0ae40b) (2020-01-19) Add user only if it does not exist. (#1059)\n\n## [v1.20.3 ](https://github.com/nextcloud/nextcloudpi/commit/6359ca3) (2020-01-14) nc-ramlogs: disable armbian-ramlog when inactive\n\n## [v1.20.2 ](https://github.com/nextcloud/nextcloudpi/commit/953c47a) (2019-11-13) Extend the ssh configuration check by calling the echo command if the first check fails.\n\n## [v1.20.1 ](https://github.com/nextcloud/nextcloudpi/commit/6d0bc6b) (2019-12-19) Revert \"build: dont use empty values by default\"\n\n## [v1.20.0 ](https://github.com/nextcloud/nextcloudpi/commit/f75c415) (2019-12-19) upgrade to NC17.0.2\n\n## [v1.19.1 ](https://github.com/nextcloud/nextcloudpi/commit/f9deb25) (2019-12-08) pre-generate: fix permissions\n\n## [v1.19.0 ](https://github.com/nextcloud/nextcloudpi/commit/72d2d00) (2019-11-30) upgrade to NC17.0.1\n\n## [v1.18.2 ](https://github.com/nextcloud/nextcloudpi/commit/c42bcc1) (2019-11-17) update: fix matching values\n\n## [v1.18.1 ](https://github.com/nextcloud/nextcloudpi/commit/310877f) (2019-11-18) Letsencrypt: support second domain (#1025)\n\n## [v1.18.0 ](https://github.com/nextcloud/nextcloudpi/commit/0fc2390) (2019-10-27) add ncp-previews\n\n## [v1.17.1 ](https://github.com/nextcloud/nextcloudpi/commit/c63cb27) (2019-09-29) nc-backup: exclude group folders in dataless backup\n\n## [v1.17.0 ](https://github.com/nextcloud/nextcloudpi/commit/05e78cc) (2019-09-28) upgrade to NC16.0.5\n\n## [v1.16.9 ](https://github.com/nextcloud/nextcloudpi/commit/46b2187) (2019-09-28) fix apt stuck in interactive conf file dialog\n\n## [v1.16.8 ](https://github.com/nextcloud/nextcloudpi/commit/f885861) (2019-09-16) unattended-upgrades: fix armbian disabling UU\n\n## [v1.16.7 ](https://github.com/nextcloud/nextcloudpi/commit/9ee9947) (2019-09-11) Increased modsecurity bodynofileslimit so larger files can be synced (#993)\n\n## [v1.16.6 ](https://github.com/nextcloud/nextcloudpi/commit/dbf129f) (2019-09-13) nc-datadir: fix\n\n## [v1.16.5 ](https://github.com/nextcloud/nextcloudpi/commit/789f0b5) (2019-09-12) nc-datadir: make sure dir exists before check\n\n## [v1.16.4 ](https://github.com/nextcloud/nextcloudpi/commit/4bd06e6) (2019-09-10) fail2ban: dont need ufw check in docker\n\n## [v1.16.3 ](https://github.com/nextcloud/nextcloudpi/commit/06005e1) (2019-09-09) nc-datadir: avoid using the symlink\n\n## [v1.16.2 ](https://github.com/nextcloud/nextcloudpi/commit/f4b4a65) (2019-09-04) custom code before/after auto-backup\n\n## [v1.16.1 ](https://github.com/nextcloud/nextcloudpi/commit/fd2b74b) (2019-09-02) Add missing port in nc-rsync-auto.sh (#983)\n\n## [v1.16.0 ](https://github.com/nextcloud/nextcloudpi/commit/1a367a6) (2019-08-23) upgrade to NC16.0.4\n\n## [v1.15.5 ](https://github.com/nextcloud/nextcloudpi/commit/954366e) (2019-08-18) make sure ufw.log always exists for fail2ban (#937)\n\n## [v1.15.4 ](https://github.com/nextcloud/nextcloudpi/commit/bf30c4f) (2019-07-28) add warning to add LABEL when formating\n\n## [v1.15.3 ](https://github.com/nextcloud/nextcloudpi/commit/bcef6bf) (2019-07-24) nc-snapshot: update btrfs-snp\n\n## [v1.15.2 ](https://github.com/nextcloud/nextcloudpi/commit/212bd46) (2019-07-19) update: restore smbclient after dist upgrade\n\n## [v1.15.1 ](https://github.com/nextcloud/nextcloudpi/commit/7663a90) (2019-07-17) exclude versions, trash, uploads from backups\n\n## [v1.15.0 ](https://github.com/nextcloud/nextcloudpi/commit/e4bd5fe) (2019-07-08) move to buster/PHP7.3\n\n## [v1.14.4 ](https://github.com/nextcloud/nextcloudpi/commit/68b3f8a) (2019-07-08) nc-previews: active by default\n\n## [v1.14.3 ](https://github.com/nextcloud/nextcloudpi/commit/85ebb39) (2019-07-06) nc-snapshot-sync: update btrfs-sync\n\n## [v1.14.2 ](https://github.com/nextcloud/nextcloudpi/commit/53d02fe) (2019-07-06) nc-hdd-monitor: fix detection\n\n## [v1.14.0 ](https://github.com/nextcloud/nextcloudpi/commit/fa9ddca) (2019-07-05) upgrade to NC16.0.2\n\n## [v1.13.6 ](https://github.com/nextcloud/nextcloudpi/commit/88da901) (2019-06-29) ncp-update: fixes on the new step based upgrade system\n\n## [v1.13.5 ](https://github.com/nextcloud/nextcloudpi/commit/fbdab43) (2019-06-29) ncp-web: adjust ipv6 local restrictions\n\n## [v1.13.4 ](https://github.com/nextcloud/nextcloudpi/commit/ce4477c) (2019-06-29) nc-previews: adjust preview sizes\n\n## [v1.13.3 ](https://github.com/nextcloud/nextcloudpi/commit/0701949) (2019-06-23) spDYN: remove unused IPV6 argument in spDYN.sh\n\n## [v1.13.2 ](https://github.com/nextcloud/nextcloudpi/commit/c392529) (2019-06-17) nc-backup: fix exclusion of ncp backups\n\n## [v1.13.1 ](https://github.com/nextcloud/nextcloudpi/commit/5de855f) (2019-06-01) ncp-web: avoid quotes in fields\n\n## [v1.13.0 ](https://github.com/nextcloud/nextcloudpi/commit/86f14ae) (2019-06-01) upgrade to NC15.0.8\n\n## [v1.12.10](https://github.com/nextcloud/nextcloudpi/commit/5924131) (2019-06-01) fail2ban: fix missing ufw filter\n\n## [v1.12.9 ](https://github.com/nextcloud/nextcloudpi/commit/c71b37f) (2019-05-27) ncp-notify-updates: dont spam cron mail\n\n## [v1.12.8 ](https://github.com/nextcloud/nextcloudpi/commit/bfdc475) (2019-05-25) docker: mount timezone\n\n## [v1.12.7 ](https://github.com/nextcloud/nextcloudpi/commit/76137ed) (2019-05-25) ncp-app: bump to NC16\n\n## [v1.12.6 ](https://github.com/nextcloud/nextcloudpi/commit/da09dc9) (2019-05-25) fail2ban: add a ufw jail and filter (dmaroulidis)\n\n## [v1.12.5 ](https://github.com/nextcloud/nextcloudpi/commit/30c0f57) (2019-05-25) ncp-web: update config reference URL\n\n## [v1.12.4 ](https://github.com/nextcloud/nextcloudpi/commit/c8d6222) (2019-05-26) ncp-web: Pt Translate (#907)\n\n## [v1.12.3 ](https://github.com/nextcloud/nextcloudpi/commit/d938481) (2019-05-11) nc-scan-auto: recursive and home-only options\n\n## [v1.12.2 ](https://github.com/nextcloud/nextcloudpi/commit/7589081) (2019-05-11) fix logrotate files\n\n## [v1.12.1 ](https://github.com/nextcloud/nextcloudpi/commit/1be5ddd) (2019-05-01) Rename configuration variables into self-documenting ones (#889)\n\n## [v1.12.0 ](https://github.com/nextcloud/nextcloudpi/commit/f34354c) (2019-04-29) ncp-web: add backups panel\n\n## [v1.11.5 ](https://github.com/nextcloud/nextcloudpi/commit/01cd421) (2019-04-29) letsencrypt: force renewal by default\n\n## [v1.11.4 ](https://github.com/nextcloud/nextcloudpi/commit/b3c7d13) (2019-04-28) letsencrypt: switch to apt version\n\n## [v1.11.3 ](https://github.com/nextcloud/nextcloudpi/commit/02efd61) (2019-04-09) nc-restore: check btrfs command\n\n## [v1.11.2 ](https://github.com/nextcloud/nextcloudpi/commit/3754609) (2019-04-06) armbian: fix uu\n\n## [v1.11.1 ](https://github.com/nextcloud/nextcloudpi/commit/a712935) (2019-04-05) nc-backup: fix space calculation\n\n## [v1.11.0 ](https://github.com/nextcloud/nextcloudpi/commit/5dedeaf) (2019-04-05) upgrade to NC15.0.6\n\n## [v1.10.12](https://github.com/nextcloud/nextcloudpi/commit/a6e33b1) (2019-04-05) update UPDATE config section\n\n## [v1.10.11](https://github.com/nextcloud/nextcloudpi/commit/194d111) (2019-04-04) create UPDATE config section\n\n## [v1.10.10](https://github.com/nextcloud/nextcloudpi/commit/b11c13e) (2019-04-05) nc-backup: improve needed space calculation (#864)\n\n## [v1.10.9 ](https://github.com/nextcloud/nextcloudpi/commit/5af854b) (2019-04-01) letsencrypt: dont return error if notif fails\n\n## [v1.10.8 ](https://github.com/nextcloud/nextcloudpi/commit/c18273a) (2019-03-26) nc-backup: fix space calculation\n\n## [v1.10.7 ](https://github.com/nextcloud/nextcloudpi/commit/41a4e84) (2019-03-14) nc-restore: Check for free space in $TMPDIR before extracting tar file\n\n## [v1.10.6 ](https://github.com/nextcloud/nextcloudpi/commit/38799fd) (2019-03-23) letsencrypt: rework notification\n\n## [v1.10.5 ](https://github.com/nextcloud/nextcloudpi/commit/2460264) (2019-03-23) fix cron path\n\n## [v1.10.4 ](https://github.com/nextcloud/nextcloudpi/commit/f0b467b) (2019-03-18) nc-update-nc-apps-auto: only notify if there was update\n\n## [v1.10.3 ](https://github.com/nextcloud/nextcloudpi/commit/4b6572a) (2019-03-18) nc-update-nc: fix case where imported cfg from non docker to docker\n\n## [v1.10.2 ](https://github.com/nextcloud/nextcloudpi/commit/ec66e40) (2019-03-16) freeDNS: fix hash\n\n## [v1.10.1 ](https://github.com/nextcloud/nextcloudpi/commit/311ccc7) (2019-03-13) nc-update-nc-apps-auto: notify user\n\n## [v1.10.0 ](https://github.com/nextcloud/nextcloudpi/commit/06073ed) (2019-03-13) add nc-previews-auto\n\n## [v1.9.8  ](https://github.com/nextcloud/nextcloudpi/commit/d7bbe25) (2019-03-13) nc-scan: improvements\n\n## [v1.9.7  ](https://github.com/nextcloud/nextcloudpi/commit/e03b095) (2019-03-13) nc-previews: improvements\n\n## [v1.9.6  ](https://github.com/nextcloud/nextcloudpi/commit/ccb6fc1) (2019-03-13) nc-scan-auto: improvements\n\n## [v1.9.5  ](https://github.com/nextcloud/nextcloudpi/commit/89cc042) (2019-03-09) nc-init: previews settings\n\n## [v1.9.4  ](https://github.com/nextcloud/nextcloudpi/commit/0c95243) (2019-03-09) unattended upgrades: update labels\n\n## [v1.9.3  ](https://github.com/nextcloud/nextcloudpi/commit/f5ba0b1) (2019-03-09) wizard: fix headers\n\n## [v1.9.2  ](https://github.com/nextcloud/nextcloudpi/commit/1a46667) (2019-03-08) cleanup update.sh\n\n## [v1.9.1  ](https://github.com/nextcloud/nextcloudpi/commit/060f004) (2019-03-03) fix LE cron\n\n## [v1.9.0  ](https://github.com/nextcloud/nextcloudpi/commit/a9d4775) (2019-03-03) upgrade to NC15.0.5\n\n## [v1.8.4  ](https://github.com/nextcloud/nextcloudpi/commit/9c39606) (2019-02-23) nc-nextcloud: disable .user.ini\n\n## [v1.8.3  ](https://github.com/nextcloud/nextcloudpi/commit/bf1fc1f) (2019-02-23) nc-limits: autocalculate database memory\n\n## [v1.8.2  ](https://github.com/nextcloud/nextcloudpi/commit/e39c3ab) (2019-02-22) lamp: adjust mariadb parameters\n\n## [v1.8.1  ](https://github.com/nextcloud/nextcloudpi/commit/160e295) (2019-03-05) nc-datadir: Add SATA to description (#822)\n\n## [v1.8.0  ](https://github.com/nextcloud/nextcloudpi/commit/602b3f2) (2019-02-23) add nc-maintenance-mode (#809)\n\n## [v1.7.0  ](https://github.com/nextcloud/nextcloudpi/commit/5e1ea77) (2019-02-17) add nc-restore-snapshot\n\n## [v1.6.7  ](https://github.com/nextcloud/nextcloudpi/commit/41a48c9) (2019-02-17) nc-backup-auto: notify failures\n\n## [v1.6.6  ](https://github.com/nextcloud/nextcloudpi/commit/743cb24) (2019-02-15) nc-automount: fix NFS delay\n\n## [v1.6.5  ](https://github.com/nextcloud/nextcloudpi/commit/c28868d) (2019-02-15) nc-trusted-domains: empty values by default\n\n## [v1.6.4  ](https://github.com/nextcloud/nextcloudpi/commit/4e04339) (2019-02-14) nc-nextcloud: update description\n\n## [v1.6.3  ](https://github.com/nextcloud/nextcloudpi/commit/af5e35d) (2019-02-13) ncp-update-nc: BTRFS basedir not supported\n\n## [v1.6.2  ](https://github.com/nextcloud/nextcloudpi/commit/b070387) (2019-02-13) nc-datadir: lift mountpoint restriction\n\n## [v1.6.1  ](https://github.com/nextcloud/nextcloudpi/commit/3e566f5) (2019-02-10) nc-nextcloud: add a warning\n\n## [v1.6.0  ](https://github.com/nextcloud/nextcloudpi/commit/b4bb86d) (2019-02-07) upgrade to NC15.0.4\n\n## [v1.5.2  ](https://github.com/nextcloud/nextcloudpi/commit/1a6b7df) (2019-02-07) nc-trusted-domains: add description\n\n## [v1.5.1  ](https://github.com/nextcloud/nextcloudpi/commit/a1842bc) (2019-01-30) nc-update-nc-apps-auto: log upgrades\n\n## [v1.5.0  ](https://github.com/nextcloud/nextcloudpi/commit/8ca3535) (2019-01-30) added nc-update-nc-apps and nc-update-nc-apps-auto\n\n## [v1.4.11 ](https://github.com/nextcloud/nextcloudpi/commit/6331ce5) (2019-01-28) update: make letsencrypt update more resiliant (2)\n\n## [v1.4.10 ](https://github.com/nextcloud/nextcloudpi/commit/55121d4) (2019-01-27) update: make letsencrypt update more resiliant\n\n## [v1.4.9  ](https://github.com/nextcloud/nextcloudpi/commit/9a36ceb) (2019-01-25) letsencrypt: use the latest github version\n\n## [v1.4.8  ](https://github.com/nextcloud/nextcloudpi/commit/338da33) (2019-01-26) ncp-update-nc: fix unnecessary quotes\n\n## [v1.4.7  ](https://github.com/nextcloud/nextcloudpi/commit/ffc1fa5) (2019-01-25) ncp-config: fix local variables\n\n## [v1.4.6  ](https://github.com/nextcloud/nextcloudpi/commit/b338ede) (2019-01-24) ncp-config: fix missing variable\n\n## [v1.4.5  ](https://github.com/nextcloud/nextcloudpi/commit/b7efa7a) (2019-01-22) armbian: fix cron permissions bug (2)\n\n## [v1.4.4  ](https://github.com/nextcloud/nextcloudpi/commit/af426a5) (2019-01-22) armbian: fix cron permissions bug\n\n## [v1.4.3  ](https://github.com/nextcloud/nextcloudpi/commit/0e062aa) (2019-01-21) dnsmasq: detect IP from config file (#782)\n\n## [v1.4.2  ](https://github.com/nextcloud/nextcloudpi/commit/57728e2) (2019-01-21) Proposed fix for issue #773 (#781)\n\n## [v1.4.1  ](https://github.com/nextcloud/nextcloudpi/commit/d0ca44a) (2019-01-16) docker: support for ncp-update-nc\n\n## [v1.4.0  ](https://github.com/nextcloud/nextcloudpi/commit/1dd1bb7) (2019-01-16) add nc-trusted-domains\n\n## [v1.3.12 ](https://github.com/nextcloud/nextcloudpi/commit/1f11d40) (2019-01-16) add public IP to trusted domains\n\n## [v1.3.11 ](https://github.com/nextcloud/nextcloudpi/commit/84ac075) (2019-01-16) nc-backup: parallel compression\n\n## [v1.3.10 ](https://github.com/nextcloud/nextcloudpi/commit/2419e57) (2019-01-15) nc-backup: compress in place and exclude previews folder\n\n## [v1.3.9  ](https://github.com/nextcloud/nextcloudpi/commit/0b8252b) (2019-01-15) build: add exfat utils for external storage\n\n## [v1.3.8  ](https://github.com/nextcloud/nextcloudpi/commit/193d89b) (2019-01-14) nc-datadir: fix fail2ban logpath\n\n## [v1.3.7  ](https://github.com/nextcloud/nextcloudpi/commit/2ac9b8b) (2019-01-14) ncp-web: allow private IPv6 addresses\n\n## [v1.3.6  ](https://github.com/nextcloud/nextcloudpi/commit/34cba9f) (2019-01-14) nc-automount: add delays to some services in a persistent way\n\n## [v1.3.5  ](https://github.com/nextcloud/nextcloudpi/commit/6fb9c9b) (2019-01-14) nc-hdd-test: try to detect device type if auto doesnt work\n\n## [v1.3.4  ](https://github.com/nextcloud/nextcloudpi/commit/9b1ecbb) (2019-01-14) nc-info: fix automount reporting\n\n## [v1.3.3  ](https://github.com/nextcloud/nextcloudpi/commit/389ed0c) (2019-01-14) nc-ramlog: adapt to armbian\n\n## [v1.3.2  ](https://github.com/nextcloud/nextcloudpi/commit/be9a546) (2019-01-14) nc-automount: fix description\n\n## [v1.3.1  ](https://github.com/nextcloud/nextcloudpi/commit/61e3ff3) (2019-01-13) ncp-update: fail if version cant be parsed\n\n## [v1.3.0  ](https://github.com/nextcloud/nextcloudpi/commit/2c943b7) (2019-01-12) upgrade to NC15.0.2\n\n## [v1.2.0  ](https://github.com/nextcloud/nextcloudpi/commit/9eaab31) (2019-01-08) add NCP Nextcloud app\n\n## [v1.1.3  ](https://github.com/nextcloud/nextcloudpi/commit/d21592c) (2019-01-11) nc-update-nextcloud: only try to restore on reboot once\n\n## [v1.1.2  ](https://github.com/nextcloud/nextcloudpi/commit/228c818) (2019-01-10) ncp-web: fix section unselected when sidebar reloads\n\n## [v1.1.1  ](https://github.com/nextcloud/nextcloudpi/commit/6ba0cb0) (2019-01-10) ncp-web: escape HTML in details box\n\n## [v1.1.0  ](https://github.com/nextcloud/nextcloudpi/commit/0ff1df9) (2019-01-08) upgrade to NC15\n\n## [v1.0.2  ](https://github.com/nextcloud/nextcloudpi/commit/06b00e4) (2019-01-09) wizard: dont change missing parameters\n\n## [v1.0.1  ](https://github.com/nextcloud/nextcloudpi/commit/f722c45) (2019-01-08) nc-update-nc: remove backup after restoring\n\n## [v1.0.0  ](https://github.com/nextcloud/nextcloudpi/commit/013198c) (2019-01-08) ncp-config: allow empty values\n\n## [v0.67.13](https://github.com/nextcloud/nextcloudpi/commit/21fee19) (2018-12-31) ncp-web: new chinese translate and update chinese translate. (#721)\n\n## [v0.67.12](https://github.com/nextcloud/nextcloudpi/commit/a38be5e) (2018-12-29) curl installer: add provisioning step\n\n## [v0.67.11](https://github.com/nextcloud/nextcloudpi/commit/4307b14) (2018-12-27) dynDNS: pdate cron execution interval (#754)\n\n## [v0.67.10](https://github.com/nextcloud/nextcloudpi/commit/2e9440d) (2018-12-23) log2ram:  adapt to new name in armbian (#749)\n\n## [v0.67.9 ](https://github.com/nextcloud/nextcloudpi/commit/e87c972) (2018-12-21) docker: fix DATADIR variable in nc-backup (#746)\n\n## [v0.67.8 ](https://github.com/nextcloud/nextcloudpi/commit/9766dc2) (2018-12-17) nc-init: update echo at end when init done. (#738)\n\n## [v0.67.7 ](https://github.com/nextcloud/nextcloudpi/commit/d75ecc2) (2018-12-16) fix tempdir config\n\n## [v0.67.6 ](https://github.com/nextcloud/nextcloudpi/commit/ca7bc90) (2018-12-06) nc-init: fix missing variable\n\n## [v0.67.5 ](https://github.com/nextcloud/nextcloudpi/commit/d19a7f7) (2018-12-01) nc-datadir: also use tempdirectory setting\n\n## [v0.67.4 ](https://github.com/nextcloud/nextcloudpi/commit/88d9fe2) (2018-11-26) nc-restore: check that we are in linux fs\n\n## [v0.67.3 ](https://github.com/nextcloud/nextcloudpi/commit/5278bfd) (2018-11-26) nc-datadir: shorten short description\n\n## [v0.67.2 ](https://github.com/nextcloud/nextcloudpi/commit/5e4be44) (2018-11-26) change dialog text width to 120\n\n## [v0.67.1 ](https://github.com/nextcloud/nextcloudpi/commit/b0262f9) (2018-11-23) referrer policy already in .htaccess in NC14.0.4\n\n## [v0.67.0 ](https://github.com/nextcloud/nextcloudpi/commit/bcac4bc) (2018-11-22) upgrade to NC14.0.4\n\n## [v0.66.6 ](https://github.com/nextcloud/nextcloudpi/commit/5aeb83c) (2018-11-18) nc-static-IP: clarify usage\n\n## [v0.66.4 ](https://github.com/nextcloud/nextcloudpi/commit/f3666d6) (2018-11-11) build: package php7.2-imagick now available\n\n## [v0.66.3 ](https://github.com/nextcloud/nextcloudpi/commit/d4206f7) (2018-11-11) nc-hdd-test: remove redundancy\n\n## [v0.66.2 ](https://github.com/nextcloud/nextcloudpi/commit/1b25141) (2018-11-06) dont fail removing cronfile\n\n## [v0.66.1 ](https://github.com/nextcloud/nextcloudpi/commit/089bebb) (2018-11-04) nc-info: speedup\n\n## [v0.66.0 ](https://github.com/nextcloud/nextcloudpi/commit/3cd1cd5) (2018-11-04) add nc-hdd-monitor\n\n## [v0.65.0 ](https://github.com/nextcloud/nextcloudpi/commit/6138183) (2018-11-03) add nc-test-hdd\n\n## [v0.64.12](https://github.com/nextcloud/nextcloudpi/commit/5e7f3da) (2018-11-03) docker: fix provisioning on a stopped the container\n\n## [v0.64.11](https://github.com/nextcloud/nextcloudpi/commit/1758331) (2018-10-27) check for path transversal\n\n## [v0.64.10](https://github.com/nextcloud/nextcloudpi/commit/26083e9) (2018-10-24) update: update sources\n\n## [v0.64.9 ](https://github.com/nextcloud/nextcloudpi/commit/54e5c21) (2018-10-23) ncp-config: use simple characters\n\n## [v0.64.8 ](https://github.com/nextcloud/nextcloudpi/commit/9d998ae) (2018-10-22) ncp-web: update chinese translations\n\n## [v0.64.7 ](https://github.com/nextcloud/nextcloudpi/commit/20a4147) (2018-10-21) ncp-web: update chinese translations\n\n## [v0.64.6 ](https://github.com/nextcloud/nextcloudpi/commit/bd9b9f1) (2018-10-21) DDNS_spDYN: switch to wget and more\n\n## [v0.64.5 ](https://github.com/nextcloud/nextcloudpi/commit/b5ba95a) (2018-10-21) ncp-web: fixed hover text for ncp wizard icon (#688)\n\n## [v0.64.4 ](https://github.com/nextcloud/nextcloudpi/commit/d2155b0) (2018-10-21) nc-rsync: dont preserve ACL\n\n## [v0.64.3 ](https://github.com/nextcloud/nextcloudpi/commit/6fb1c06) (2018-10-21) nc-rsync: sync datadir, not only content (#686) (#687)\n\n## [v0.64.2 ](https://github.com/nextcloud/nextcloudpi/commit/d6b7267) (2018-10-14) ncp-update-nc: make sure cron.php is not running and there are no pending jobs\n\n## [v0.64.1 ](https://github.com/nextcloud/nextcloudpi/commit/c036525) (2018-10-12) docker: make bin persistent too\n\n## [v0.64.0 ](https://github.com/nextcloud/nextcloudpi/commit/a9b1542) (2018-10-12) upgrade to NC14.0.3\n\n## [v0.63.0 ](https://github.com/nextcloud/nextcloudpi/commit/b4555ba) (2018-10-11) upgrade to NC14.0.2\n\n## [v0.62.10](https://github.com/nextcloud/nextcloudpi/commit/48ac238) (2018-10-07) limit logs size with logrotate\n\n## [v0.62.9 ](https://github.com/nextcloud/nextcloudpi/commit/694a885) (2018-10-07) DDNS_spDYN reinstall DDNS_spDYN for use of IPv6 (#642)\n\n## [v0.62.8 ](https://github.com/nextcloud/nextcloudpi/commit/c6da8a9) (2018-10-07) Use DIG instead of NSLOOKUP in DDNS apps (#666)\n\n## [v0.62.7 ](https://github.com/nextcloud/nextcloudpi/commit/54e0968) (2018-10-07) nc-prettyURL: Catch failure of maintenance:update:htaccess (#654)\n\n## [v0.62.6 ](https://github.com/nextcloud/nextcloudpi/commit/5e3d411) (2018-10-06) nc-limits: fix PHP service restart\n\n## [v0.62.5 ](https://github.com/nextcloud/nextcloudpi/commit/0bf6045) (2018-10-03) nc-update-nc: dont fix the news app if there is no news app\n\n## [v0.62.4 ](https://github.com/nextcloud/nextcloudpi/commit/aa886f9) (2018-10-03) nc-update-nextcloud: option to upgrade to the latest version\n\n## [v0.62.3 ](https://github.com/nextcloud/nextcloudpi/commit/af4b646) (2018-10-03) nc-autoupdate-nc: fix repeating notification\n\n## [v0.62.2 ](https://github.com/nextcloud/nextcloudpi/commit/6324949) (2018-10-02) nc-prettyURL: make sure URL is correct\n\n## [v0.62.1 ](https://github.com/nextcloud/nextcloudpi/commit/4f20b71) (2018-09-30) redis: change eviction policy\n\n## [v0.62.0 ](https://github.com/nextcloud/nextcloudpi/commit/4bce1bb) (2018-09-26) upgrade to PHP7.2\n\n## [v0.61.0 ](https://github.com/nextcloud/nextcloudpi/commit/66e4d83) (2018-09-26) upgrade to NC14\n\n## [v0.60.8 ](https://github.com/nextcloud/nextcloudpi/commit/6152e7e) (2018-09-24) ncp-web: put configuration in a separate file from available languages\n\n## [v0.60.7 ](https://github.com/nextcloud/nextcloudpi/commit/cdbb750) (2018-09-24) docker: disable auto-upgrade until it is adapted to containers\n\n## [v0.60.6 ](https://github.com/nextcloud/nextcloudpi/commit/1150ed8) (2018-09-24) nc-format-USB: fix\n\n## [v0.60.5 ](https://github.com/nextcloud/nextcloudpi/commit/3de5fe0) (2018-09-23) armbian: fix locales for ncp-config\n\n## [v0.60.4 ](https://github.com/nextcloud/nextcloudpi/commit/a7f0fd2) (2018-09-23) build: use a separate file for NCP database config\n\n## [v0.60.3 ](https://github.com/nextcloud/nextcloudpi/commit/1bfcebc) (2018-09-23) nc-update-nextcloud: workaround news integrity bug\n\n## [v0.60.2 ](https://github.com/nextcloud/nextcloudpi/commit/5914624) (2018-09-21) DDNS_spdyn.sh : Send new IP only when changed.\n\n## [v0.60.1 ](https://github.com/nextcloud/nextcloudpi/commit/f80ee23) (2018-07-31) nc-restore: restore to volume in docker container\n\n## [v0.60.0 ](https://github.com/nextcloud/nextcloudpi/commit/3a1b974) (2018-09-22) add nc-previews\n\n## [v0.59.20](https://github.com/nextcloud/nextcloudpi/commit/4457485) (2018-09-21) autoupdate: log everything to ncp.log\n\n## [v0.59.19](https://github.com/nextcloud/nextcloudpi/commit/cc53f40) (2018-09-21) ncp-report: remove sensitive data\n\n## [v0.59.18](https://github.com/nextcloud/nextcloudpi/commit/7a8c0e4) (2018-09-20) docker: build fixes\n\n## [v0.59.17](https://github.com/nextcloud/nextcloudpi/commit/9ee4282) (2018-09-09) docker: fix letsencrypt not persistent\n\n## [v0.59.16](https://github.com/nextcloud/nextcloudpi/commit/7443425) (2018-09-09) docker: allow domains in command line, not only IPs\n\n## [v0.59.15](https://github.com/nextcloud/nextcloudpi/commit/41f21fa) (2018-09-17) Don't overwrite an existing mail_smtpmode, if it is not \"PHP\"\n\n## [v0.59.14](https://github.com/nextcloud/nextcloudpi/commit/1420348) (2018-09-18) spDYN: fix misspelled variables\n\n## [v0.59.13](https://github.com/nextcloud/nextcloudpi/commit/3479014) (2018-09-15) spDYN: support IPv6\n\n## [v0.59.12](https://github.com/nextcloud/nextcloudpi/commit/241f2e0) (2018-09-07) Change email program from PHP to Sendmail\n\n## [v0.59.11](https://github.com/nextcloud/nextcloudpi/commit/5be7866) (2018-09-16) lamp: add referrer policy for enhanced privacy\n\n## [v0.59.10](https://github.com/nextcloud/nextcloudpi/commit/fcbd661) (2018-09-04) ncp-web: add hover text for ncp admin header icons\n\n## [v0.59.9 ](https://github.com/nextcloud/nextcloudpi/commit/6a755c3) (2018-09-16) nc-prettyURL: fixes\n\n## [v0.59.8 ](https://github.com/nextcloud/nextcloudpi/commit/a00cd0b) (2018-09-15) nc-format-USB: drive number was off by one (#631)\n\n## [v0.59.7 ](https://github.com/nextcloud/nextcloudpi/commit/e26a834) (2018-08-22) Rename DDNS apps so they show up together\n\n## [v0.59.6 ](https://github.com/nextcloud/nextcloudpi/commit/1210517) (2018-09-12) wizard: fix instructions for BTRFS\n\n## [v0.59.5 ](https://github.com/nextcloud/nextcloudpi/commit/ed96a0c) (2018-09-09) nc-limits: fix error when specifying units\n\n## [v0.59.4 ](https://github.com/nextcloud/nextcloudpi/commit/ee370f1) (2018-09-03) ncp-suggestions: fix Raspbian parsing\n\n## [v0.59.3 ](https://github.com/nextcloud/nextcloudpi/commit/6e1a1a9) (2018-08-31) build: add imagick for gallery\n\n## [v0.59.2 ](https://github.com/nextcloud/nextcloudpi/commit/e25f5d1) (2018-09-10) nc-format-USB: fix wrong detection of USB drives present\n\n## [v0.59.1 ](https://github.com/nextcloud/nextcloudpi/commit/378ca60) (2018-09-10) nc-datadir: support specifying the root of the mountpoint\n\n## [v0.59.0 ](https://github.com/nextcloud/nextcloudpi/commit/9113ab2) (2018-08-31) update to NC 13.0.6\n\n## [v0.58.1 ](https://github.com/nextcloud/nextcloudpi/commit/dad9900) (2018-07-25) nc-datadir: backup existing datadir after checks\n\n## [v0.58.0 ](https://github.com/nextcloud/nextcloudpi/commit/df7a277) (2018-07-23) update to NC 13.0.5\n\n## [v0.57.21](https://github.com/nextcloud/nextcloudpi/commit/965716d) (2018-07-23) Fixes #566 Remove redundant opcache configuration (#572)\n\n## [v0.57.20](https://github.com/nextcloud/nextcloudpi/commit/bf91e4c) (2018-07-20) ncp-config: add spaces to invalid characters\n\n## [v0.57.19](https://github.com/nextcloud/nextcloudpi/commit/baaf79a) (2018-07-20) nc-backup: fix space check error message\n\n## [v0.57.18](https://github.com/nextcloud/nextcloudpi/commit/b81b3e6) (2018-07-13) fix ncc command repeating itself\n\n## [v0.57.17](https://github.com/nextcloud/nextcloudpi/commit/dc089bf) (2018-07-03) armbian: fix image tag preventing updates\n\n## [v0.57.16](https://github.com/nextcloud/nextcloudpi/commit/2aa0e8f) (2018-06-27) SSH: fix root password in Raspbian\n\n## [v0.57.15](https://github.com/nextcloud/nextcloudpi/commit/2c01a87) (2018-06-26) nc-automount: fix udiskie not installed in latest image\n\n## [v0.57.14](https://github.com/nextcloud/nextcloudpi/commit/f1cc627) (2018-06-26) added database dir to ncp-info (#553)\n\n## [v0.57.13](https://github.com/nextcloud/nextcloudpi/commit/fe12ff9) (2018-06-24) nc-limits: fix units\n\n## [v0.57.12](https://github.com/nextcloud/nextcloudpi/commit/bbb25fa) (2018-06-21) nc-limits: autolimits enhancements\n\n## [v0.57.11](https://github.com/nextcloud/nextcloudpi/commit/9983b7c) (2018-06-20) letsencrypt: notify of renewals\n\n## [v0.57.10](https://github.com/nextcloud/nextcloudpi/commit/a0a31b4) (2018-06-20) ncp-web: fix JS docker detection\n\n## [v0.57.9 ](https://github.com/nextcloud/nextcloudpi/commit/de5d9fb) (2018-06-21) nc-format-USB: fix when ZRAM active\n\n## [v0.57.8 ](https://github.com/nextcloud/nextcloudpi/commit/3ee6409) (2018-06-19) docker: adapt wizard\n\n## [v0.57.7 ](https://github.com/nextcloud/nextcloudpi/commit/c727d65) (2018-06-19) docker: fix persist ncp-web password\n\n## [v0.57.6 ](https://github.com/nextcloud/nextcloudpi/commit/865ad08) (2018-06-19) fix mysqld service named mysql\n\n## [v0.57.5 ](https://github.com/nextcloud/nextcloudpi/commit/1a9a53f) (2018-06-18) fix nextcloud-domain running before default GW is ready\n\n## [v0.57.4 ](https://github.com/nextcloud/nextcloudpi/commit/9210fb2) (2018-06-18) letsencrypt: install from debian package\n\n## [v0.57.3 ](https://github.com/nextcloud/nextcloudpi/commit/5aa071e) (2018-06-18) armbian: default to SSH disabled\n\n## [v0.57.2 ](https://github.com/nextcloud/nextcloudpi/commit/7b2737b) (2018-06-18) nc-static-IP: autodetect default interface\n\n## [v0.57.1 ](https://github.com/nextcloud/nextcloudpi/commit/7ac1847) (2018-06-18) docker: replace systemd for service\n\n## [v0.57.0 ](https://github.com/nextcloud/nextcloudpi/commit/676776f) (2018-06-18) update to NC 13.0.4\n\n## [v0.56.25](https://github.com/nextcloud/nextcloudpi/commit/57852ad) (2018-06-18) nc-snapshot-sync: upgrade\n\n## [v0.56.24](https://github.com/nextcloud/nextcloudpi/commit/0d7ceb5) (2018-06-18) nc-datadir: make sure we have the correct permissions\n\n## [v0.56.23](https://github.com/nextcloud/nextcloudpi/commit/005ed80) (2018-06-18) nc-info: fix typo\n\n## [v0.56.22](https://github.com/nextcloud/nextcloudpi/commit/cef7cb4) (2018-06-14) nc-restore: fix redis restart in docker\n\n## [v0.56.21](https://github.com/nextcloud/nextcloudpi/commit/598e1c8) (2018-06-11) docker: persist SSL certificates\n\n## [v0.56.20](https://github.com/nextcloud/nextcloudpi/commit/75cfd80) (2018-06-11) ncp-web: fix sanitization for fail2ban\n\n## [v0.56.19](https://github.com/nextcloud/nextcloudpi/commit/b78c9e2) (2018-06-06) add ncc command, shortcut of occ\n\n## [v0.56.18](https://github.com/nextcloud/nextcloudpi/commit/412eee2) (2018-06-06) NFS: fix dependency with automount\n\n## [v0.56.17](https://github.com/nextcloud/nextcloudpi/commit/05c14ce) (2018-06-04) ncp-web: sanitize the ref parameter\n\n## [v0.56.16](https://github.com/nextcloud/nextcloudpi/commit/3862eca) (2018-05-29) build: fix cleanup armbian images\n\n## [v0.56.15](https://github.com/nextcloud/nextcloudpi/commit/b45e68f) (2018-05-28) ncp-web: added chinese translations\n\n## [v0.56.14](https://github.com/nextcloud/nextcloudpi/commit/a070860) (2018-05-27) re-rename to NCPi\n\n## [v0.56.13](https://github.com/nextcloud/nextcloudpi/commit/003c29c) (2018-05-28) spDYN: install curl for docker\n\n## [v0.56.12](https://github.com/nextcloud/nextcloudpi/commit/ed0a368) (2018-05-28) nc-format-USB: fix when ZRAM active\n\n## [v0.56.11](https://github.com/nextcloud/nextcloudpi/commit/fae7ba2) (2018-05-27) ncp-config: silence connectivity errors\n\n## [v0.56.10](https://github.com/nextcloud/nextcloudpi/commit/027a2a0) (2018-05-25) nc-ramlogs: fix docker installation from latest upstream changes\n\n## [v0.56.9 ](https://github.com/nextcloud/nextcloudpi/commit/438e73d) (2018-05-24) remove old systemd timer config in running systems\n\n## [v0.56.8 ](https://github.com/nextcloud/nextcloudpi/commit/9e8fc92) (2018-05-22) fix php cli tmpdir for running instances\n\n## [v0.56.7 ](https://github.com/nextcloud/nextcloudpi/commit/061d2ae) (2018-05-22) move NC httpd logs to /var/log\n\n## [v0.56.6 ](https://github.com/nextcloud/nextcloudpi/commit/fac99a6) (2018-05-20) fix update httpd log location in virtual host after nc-datadir\n\n## [v0.56.5 ](https://github.com/nextcloud/nextcloudpi/commit/c97acf8) (2018-05-20) ncp-autoupdate: dont return 0 if no updates available\n\n## [v0.56.4 ](https://github.com/nextcloud/nextcloudpi/commit/cd32b30) (2018-05-18) nc-info: change port checker providers\n\n## [v0.56.3 ](https://github.com/nextcloud/nextcloudpi/commit/f04de1f) (2018-05-17) nc-update-nextcloud: make sure backup syncs to disk\n\n## [v0.56.2 ](https://github.com/nextcloud/nextcloudpi/commit/741e79a) (2018-05-15) nc-restore: refuse to restore from /var/www/nextcloud\n\n## [v0.56.1 ](https://github.com/nextcloud/nextcloudpi/commit/88dcfef) (2018-05-15) nc-update-nextcloud: rollback in case of power cut\n\n## [v0.56.0 ](https://github.com/nextcloud/nextcloudpi/commit/9bd6f81) (2018-05-15) added nc-autoupdate-nc\n\n## [v0.55.4 ](https://github.com/nextcloud/nextcloudpi/commit/ee92111) (2018-05-15) nc-autoupdate-ncp: fix wrong user\n\n## [v0.55.3 ](https://github.com/nextcloud/nextcloudpi/commit/191ea16) (2018-05-15) nc-update-netcloud: include version in backup name\n\n## [v0.55.2 ](https://github.com/nextcloud/nextcloudpi/commit/2507cc6) (2018-05-15) nc-backup: faster free space calculation. Minimize maintenance mode time\n\n## [v0.55.1 ](https://github.com/nextcloud/nextcloudpi/commit/5e3da08) (2018-05-14) nc-backup: exclude ncp-update-nc backups\n\n## [v0.55.0 ](https://github.com/nextcloud/nextcloudpi/commit/8d01fc4) (2018-05-11) added nc-update-nextcloud\n\n## [v0.54.14](https://github.com/nextcloud/nextcloudpi/commit/8ef0881) (2018-05-14) samba: fix permissions\n\n## [v0.54.13](https://github.com/nextcloud/nextcloudpi/commit/b08e45f) (2018-05-11) nc-nextcloud: fix upload tmp dir\n\n## [v0.54.12](https://github.com/nextcloud/nextcloudpi/commit/eb1cf1a) (2018-05-11) nc-restore: fix tmp dirs in backups without data\n\n## [v0.54.11](https://github.com/nextcloud/nextcloudpi/commit/40a8431) (2018-05-11) nc-backup: make more robust to unexpected failure\n\n## [v0.54.10](https://github.com/nextcloud/nextcloudpi/commit/2ef575c) (2018-05-11) nc-restore: make more robust to unexpected failure\n\n## [v0.54.9 ](https://github.com/nextcloud/nextcloudpi/commit/b93aec5) (2018-05-11) nc-restore: separate in its own executable\n\n## [v0.54.8 ](https://github.com/nextcloud/nextcloudpi/commit/dbc3094) (2018-05-10) nc-backup: better avoid duplicates\n\n## [v0.54.7 ](https://github.com/nextcloud/nextcloudpi/commit/5dca250) (2018-05-10) armbian: fix static IP\n\n## [v0.54.6 ](https://github.com/nextcloud/nextcloudpi/commit/09741e1) (2018-05-10) nc-notify-updates: fix wrong user\n\n## [v0.54.5 ](https://github.com/nextcloud/nextcloudpi/commit/688d6d8) (2018-05-10) armbian: fix mDNS\n\n## [v0.54.4 ](https://github.com/nextcloud/nextcloudpi/commit/63f83da) (2018-05-09) avoid temp dir vulnerabilities\n\n## [v0.54.3 ](https://github.com/nextcloud/nextcloudpi/commit/28d2332) (2018-05-03) nc-datadir: avoid using occ for faster execution\n\n## [v0.54.2 ](https://github.com/nextcloud/nextcloudpi/commit/73bc22a) (2018-05-03) samba: restart after configuration change\n\n## [v0.54.1 ](https://github.com/nextcloud/nextcloudpi/commit/9a6d371) (2018-04-27) nc-snapshot-sync: upgrade\n\n## [v0.54.0 ](https://github.com/nextcloud/nextcloudpi/commit/99f1e1e) (2018-04-27) update to NC 13.0.2\n\n## [v0.53.33](https://github.com/nextcloud/nextcloudpi/commit/b199121) (2018-04-25) nc-info: provide timeout for wget\n\n## [v0.53.32](https://github.com/nextcloud/nextcloudpi/commit/3bb8cad) (2018-04-22) nc-info: check for existance of ncp-baseimage\n\n## [v0.53.31](https://github.com/nextcloud/nextcloudpi/commit/20c734b) (2018-04-21) fix double default gateway\n\n## [v0.53.30](https://github.com/nextcloud/nextcloudpi/commit/9c600bd) (2018-04-20) ncp-report: fix root execution\n\n## [v0.53.29](https://github.com/nextcloud/nextcloudpi/commit/a9458f5) (2018-04-05) renamed to NextCloudPlus\n\n## [v0.53.28](https://github.com/nextcloud/nextcloudpi/commit/0d6c780) (2018-04-18) ncp-web: added spanish translations\n\n## [v0.53.27](https://github.com/nextcloud/nextcloudpi/commit/20c0d80) (2018-04-09) ncp-web: added language dropdown selector\n\n## [v0.53.26](https://github.com/nextcloud/nextcloudpi/commit/a9b37ab) (2018-04-06) nc-automount: remove directories left from unclean shutdown\n\n## [v0.53.25](https://github.com/nextcloud/nextcloudpi/commit/7aba9c5) (2018-04-09) build: clean docker-env\n\n## [v0.53.24](https://github.com/nextcloud/nextcloudpi/commit/b9116e7) (2018-04-05) ncp-web: faster first load by asynchronous call to is_active()\n\n## [v0.53.23](https://github.com/nextcloud/nextcloudpi/commit/7eecd81) (2018-04-05) ncp-web: force reload CSRF tokens every time\n\n## [v0.53.22](https://github.com/nextcloud/nextcloudpi/commit/eece4d0) (2018-04-05) ncp-web: collapse sidebar menu when clicking in new sections\n\n## [v0.53.21](https://github.com/nextcloud/nextcloudpi/commit/6031440) (2018-04-05) ncp-web: make config.php into a table\n\n## [v0.53.20](https://github.com/nextcloud/nextcloudpi/commit/16e245c) (2018-04-04) ncp-web: check for updates upon first run\n\n## [v0.53.19](https://github.com/nextcloud/nextcloudpi/commit/8a2d30a) (2018-04-04) ncp-web: replace textarea with div for output\n\n## [v0.53.18](https://github.com/nextcloud/nextcloudpi/commit/4f321cc) (2018-04-04) ncp-web: refresh sidebar after launching actions\n\n## [v0.53.17](https://github.com/nextcloud/nextcloudpi/commit/e652777) (2018-04-04) ncp-web: reload ncp-web after nc-update\n\n## [v0.53.16](https://github.com/nextcloud/nextcloudpi/commit/df9e09e) (2018-04-04) ncp-web: implement is_active()\n\n## [v0.53.15](https://github.com/nextcloud/nextcloudpi/commit/490d84d) (2018-04-04) docker: add column command\n\n## [v0.53.14](https://github.com/nextcloud/nextcloudpi/commit/fb2ad5d) (2018-04-04) ncp-web: fix scroll bar\n\n## [v0.53.13](https://github.com/nextcloud/nextcloudpi/commit/e559f74) (2018-04-04) ncp-web: fix ncp-app selection\n\n## [v0.53.12](https://github.com/nextcloud/nextcloudpi/commit/30da787) (2018-04-03) ncp-web: added nc-config and helper buttons\n\n## [v0.53.11](https://github.com/nextcloud/nextcloudpi/commit/d133c73) (2018-04-03) ncp-web: fix glitch showing power dialog\n\n## [v0.53.10](https://github.com/nextcloud/nextcloudpi/commit/fa1ec75) (2018-04-03) ncp-web: implement dashboard\n\n## [v0.53.9 ](https://github.com/nextcloud/nextcloudpi/commit/d79e10a) (2018-04-02) SSH: stop service upon activation\n\n## [v0.53.8 ](https://github.com/nextcloud/nextcloudpi/commit/ca66dac) (2018-04-02) ncp-web: fix update notification\n\n## [v0.53.7 ](https://github.com/nextcloud/nextcloudpi/commit/925c6fe) (2018-03-29) ncp-web: use random passwords for NC and ncp-web\n\n## [v0.53.6 ](https://github.com/nextcloud/nextcloudpi/commit/f1bbf57) (2018-03-27) samba: dont force NAME_REGEX for username\n\n## [v0.53.5 ](https://github.com/nextcloud/nextcloudpi/commit/062438b) (2018-03-20) NFS: check user and group existence\n\n## [v0.53.4 ](https://github.com/nextcloud/nextcloudpi/commit/1830d77) (2018-03-18) nc-ramlogs: fix enabled by default upon installoation\n\n## [v0.53.3 ](https://github.com/nextcloud/nextcloudpi/commit/423ea0e) (2018-03-17) docker: fix development container script folder\n\n## [v0.53.2 ](https://github.com/nextcloud/nextcloudpi/commit/85127d7) (2018-03-17) letsencrypt: remove .well-known dir after renewal\n\n## [v0.53.1 ](https://github.com/nextcloud/nextcloudpi/commit/30f5756) (2018-03-17) fix web update to NC13.0.1 with .well-known existence\n\n## [v0.53.0 ](https://github.com/nextcloud/nextcloudpi/commit/436cd9f) (2018-03-17) update to NC 13.0.1\n\n## [v0.52.2 ](https://github.com/nextcloud/nextcloudpi/commit/1f81611) (2018-03-17) build: small script adjustments\n\n## [v0.52.1 ](https://github.com/nextcloud/nextcloudpi/commit/c6aeb4e) (2018-03-16) docker: include nc-webui\n\n## [v0.52.0 ](https://github.com/nextcloud/nextcloudpi/commit/ed26128) (2018-03-12) added nc-rsync-auto\n\n## [v0.51.0 ](https://github.com/nextcloud/nextcloudpi/commit/26c88d0) (2018-03-12) added nc-rsync\n\n## [v0.50.0 ](https://github.com/nextcloud/nextcloudpi/commit/84f27f2) (2018-03-12) added nc-snapshot-sync\n\n## [v0.47.4 ](https://github.com/nextcloud/nextcloudpi/commit/4ed6b52) (2018-03-14) Add template generation functionality to L10N.php (activate by setting constant GENERATE_TEMPLATES to true).\n\n## [v0.47.3 ](https://github.com/nextcloud/nextcloudpi/commit/38dfa60) (2018-03-16) fix for nc-automount-links\n\n## [v0.47.2 ](https://github.com/nextcloud/nextcloudpi/commit/b3be948) (2018-03-15) improve dependency of database with automount\n\n## [v0.47.1 ](https://github.com/nextcloud/nextcloudpi/commit/2c1f8b4) (2018-03-10) update: make sure redis log exists\n\n## [v0.47.0 ](https://github.com/nextcloud/nextcloudpi/commit/7a3976b) (2018-03-05) added nc-zram\n\n## [v0.46.40](https://github.com/nextcloud/nextcloudpi/commit/1c23fa7) (2018-03-04) nc-backup-auto: change to using cron\n\n## [v0.46.39](https://github.com/nextcloud/nextcloudpi/commit/e912749) (2018-03-04) nc-ramlogs: change implementation to use log2ram\n\n## [v0.46.38](https://github.com/nextcloud/nextcloudpi/commit/b346cbe) (2018-03-04) disable ncp user login\n\n## [v0.46.37](https://github.com/nextcloud/nextcloudpi/commit/18e35df) (2018-03-03) nc-automount: fix dependencies\n\n## [v0.46.36](https://github.com/nextcloud/nextcloudpi/commit/45a8800) (2018-03-03) build: fix systemd dir not existing\n\n## [v0.46.35](https://github.com/nextcloud/nextcloudpi/commit/1a7c8b9) (2018-02-26) ncp-web: add localization (#372)\n\n## [v0.46.34](https://github.com/nextcloud/nextcloudpi/commit/c4a111c) (2018-02-26) ncp-web: fix responsive in iPad\n\n## [v0.46.33](https://github.com/nextcloud/nextcloudpi/commit/9f819f4) (2018-02-23) Added some useful comments for first time users\n\n## [v0.46.32](https://github.com/nextcloud/nextcloudpi/commit/e3a19b9) (2018-02-23) disable unused services for SMB and NFS\n\n## [v0.46.31](https://github.com/nextcloud/nextcloudpi/commit/d3c7354) (2018-02-23) update: print info first\n\n## [v0.46.30](https://github.com/nextcloud/nextcloudpi/commit/36a803f) (2018-02-22) add ncp-provisioning to SD card images\n\n## [v0.46.29](https://github.com/nextcloud/nextcloudpi/commit/d05b069) (2018-02-22) ncp-web: fix overlay z-index\n\n## [v0.46.28](https://github.com/nextcloud/nextcloudpi/commit/0d6ad68) (2018-02-22) wizard: fix logbox overflow\n\n## [v0.46.27](https://github.com/nextcloud/nextcloudpi/commit/d2318a4) (2018-02-20) wizard: animate side logs\n\n## [v0.46.26](https://github.com/nextcloud/nextcloudpi/commit/6dd70a7) (2018-02-21) ncp-web: animate script textbox\n\n## [v0.46.25](https://github.com/nextcloud/nextcloudpi/commit/8389ac7) (2018-02-21) ncp-web: fix backend request without arguments\n\n## [v0.46.24](https://github.com/nextcloud/nextcloudpi/commit/8d100b9) (2018-02-21) ncp-web: link to wizard and Nextcloud instance\n\n## [v0.46.23](https://github.com/nextcloud/nextcloudpi/commit/63b74a8) (2018-02-19) ncp-web: support for small screens\n\n## [v0.46.22](https://github.com/nextcloud/nextcloudpi/commit/bf4d2fc) (2018-02-19) UFW: make it work with nc-forward-ports\n\n## [v0.46.21](https://github.com/nextcloud/nextcloudpi/commit/94bd3b9) (2018-02-19) docker: use docker networks for x86\n\n## [v0.46.20](https://github.com/nextcloud/nextcloudpi/commit/a9a1809) (2018-02-15) random password provisioning on boot/startup\n\n## [v0.46.19](https://github.com/nextcloud/nextcloudpi/commit/648f53b) (2018-02-18) ncp-web: re-style poweroff menu\n\n## [v0.46.18](https://github.com/nextcloud/nextcloudpi/commit/7d03e84) (2018-02-18) ncp-web: disable event handler after poweroff\n\n## [v0.46.17](https://github.com/nextcloud/nextcloudpi/commit/f1d41e3) (2018-02-10) Add dialog for shutdown.\n\n## [v0.46.16](https://github.com/nextcloud/nextcloudpi/commit/26afda9) (2018-02-16) remove redundant configuration from unattended upgrades\n\n## [v0.46.15](https://github.com/nextcloud/nextcloudpi/commit/8546ea6) (2018-02-16) lamp: enhance SSL security (chacha cypher), and OCSP stapling\n\n## [v0.46.14](https://github.com/nextcloud/nextcloudpi/commit/f8381f4) (2018-02-16) log all NCP actions to /var/log/ncp.log\n\n## [v0.46.13](https://github.com/nextcloud/nextcloudpi/commit/51b1e5d) (2018-02-16) update: accept github branch as an argument to ncp-update to test development branch\n\n## [v0.46.12](https://github.com/nextcloud/nextcloudpi/commit/67a4093) (2018-02-15) lamp: protect apache fingerprinting\n\n## [v0.46.11](https://github.com/nextcloud/nextcloudpi/commit/875ce59) (2018-02-15) SSH: dont create user if it doesnt exist\n\n## [v0.46.10](https://github.com/nextcloud/nextcloudpi/commit/cac81ec) (2018-02-09) samba: create share per NC user\n\n## [v0.46.9 ](https://github.com/nextcloud/nextcloudpi/commit/30a8bdd) (2018-02-13) letsencrypt: only call update-rc.d in docker builds\n\n## [v0.46.8 ](https://github.com/nextcloud/nextcloudpi/commit/34a3bd5) (2018-02-12) preactivate useful apps for a selfhosted instance\n\n## [v0.46.7 ](https://github.com/nextcloud/nextcloudpi/commit/c14b056) (2018-02-12) update: fix typo in check version\n\n## [v0.46.6 ](https://github.com/nextcloud/nextcloudpi/commit/dc88dcb) (2018-02-08) Update ncp-check-version\n\n## [v0.46.5 ](https://github.com/nextcloud/nextcloudpi/commit/3b458f3) (2018-02-09) nc-backup: stronger permissions for backup file\n\n## [v0.46.4 ](https://github.com/nextcloud/nextcloudpi/commit/fc0d3f9) (2018-02-08) do not rely on pings, just return value of operations\n\n## [v0.46.3 ](https://github.com/nextcloud/nextcloudpi/commit/ab86551) (2018-02-07) unattended upgrades: fix unattended upgrades not working because of modified files\n\n## [v0.46.2 ](https://github.com/nextcloud/nextcloudpi/commit/91eeeea) (2018-02-07) modsecurity: turn off logging, its too spammy for ramlogs\n\n## [v0.46.1 ](https://github.com/nextcloud/nextcloudpi/commit/d7f253e) (2018-02-07) ping to 4.2.2.2 because google is blocked in china\n\n## [v0.46.0 ](https://github.com/nextcloud/nextcloudpi/commit/64f9673) (2018-02-06) update to NC 13.0.0\n\n## [v0.45.4 ](https://github.com/nextcloud/nextcloudpi/commit/048ee6a) (2018-02-06) added ncp-config link to nextcloudpi-config\n\n## [v0.45.3 ](https://github.com/nextcloud/nextcloudpi/commit/257787a) (2018-02-05) lamp: add ldap support (#377)\n\n## [v0.45.2 ](https://github.com/nextcloud/nextcloudpi/commit/4dce600) (2018-02-05) nc-nextcloud: fixes for beta versions\n\n## [v0.45.1 ](https://github.com/nextcloud/nextcloudpi/commit/67b12bb) (2018-02-05) nc-backup: fixes in checking space and auto\n\n## [v0.45.0 ](https://github.com/nextcloud/nextcloudpi/commit/ec40fe6) (2018-02-03) update to NC 12.0.5\n\n## [v0.44.15](https://github.com/nextcloud/nextcloudpi/commit/85742a5) (2018-01-10) nc-init and samba: default to ncp user\n\n## [v0.44.14](https://github.com/nextcloud/nextcloudpi/commit/978781c) (2018-01-10) nc-ramlogs: limit tmpfs to 100M\n\n## [v0.44.13](https://github.com/nextcloud/nextcloudpi/commit/7d105f8) (2018-01-10) letsencrypt: revert pip.conf pre-workaround, tweak cron\n\n## [v0.44.12](https://github.com/nextcloud/nextcloudpi/commit/db322f2) (2018-01-10) nc-swapfile: improved, and take BTRFS into account\n\n## [v0.44.11](https://github.com/nextcloud/nextcloudpi/commit/0587ca3) (2018-01-07) nc-restore: check validity of backup file\n\n## [v0.44.10](https://github.com/nextcloud/nextcloudpi/commit/614c57d) (2018-01-07) nc-restore: refresh trusted domains\n\n## [v0.44.9 ](https://github.com/nextcloud/nextcloudpi/commit/0972d57) (2018-01-07) nc-restore: fix bug detecting data\n\n## [v0.44.8 ](https://github.com/nextcloud/nextcloudpi/commit/459fe39) (2018-01-06) nc-restore: restore to a btrfs subvolume\n\n## [v0.44.7 ](https://github.com/nextcloud/nextcloudpi/commit/3beff63) (2018-01-06) nc-backup: make binary work standalone\n\n## [v0.44.6 ](https://github.com/nextcloud/nextcloudpi/commit/f63a353) (2018-01-05) nc-restore: restore compressed backups\n\n## [v0.44.5 ](https://github.com/nextcloud/nextcloudpi/commit/54631e2) (2018-01-04) nc-backup: compress backups and refactoring\n\n## [v0.44.4 ](https://github.com/nextcloud/nextcloudpi/commit/a1a2f51) (2018-01-03) nc-restore: update redis password\n\n## [v0.44.3 ](https://github.com/nextcloud/nextcloudpi/commit/fd71cb6) (2018-01-03) nc-export: protect file from read\n\n## [v0.44.2 ](https://github.com/nextcloud/nextcloudpi/commit/2687fdb) (2018-01-01) nc-snapshot: update btrfs-snp\n\n## [v0.44.1 ](https://github.com/nextcloud/nextcloudpi/commit/6fb4fef) (2017-12-28) nc-snapshot: use btrfs-snp\n\n## [v0.44.0 ](https://github.com/nextcloud/nextcloudpi/commit/9e1da02) (2017-12-28) added nc-snapshot-auto\n\n## [v0.43.3 ](https://github.com/nextcloud/nextcloudpi/commit/e10dd39) (2017-12-26) nc-datadir: use clone on btrfs systems\n\n## [v0.43.2 ](https://github.com/nextcloud/nextcloudpi/commit/803a1f1) (2017-12-19) UFW: prettier output\n\n## [v0.43.1 ](https://github.com/nextcloud/nextcloudpi/commit/66e50d8) (2017-12-19) ncp-config: validate input\n\n## [v0.43.0 ](https://github.com/nextcloud/nextcloudpi/commit/c0a9997) (2017-12-18) added nc-audit\n\n## [v0.42.0 ](https://github.com/nextcloud/nextcloudpi/commit/71f676e) (2017-12-18) added UFW\n\n## [v0.41.13](https://github.com/nextcloud/nextcloudpi/commit/34fc851) (2017-12-17) security hardening part 3\n\n## [v0.41.12](https://github.com/nextcloud/nextcloudpi/commit/af54edb) (2017-12-17) security hardening part 2\n\n## [v0.41.11](https://github.com/nextcloud/nextcloudpi/commit/bd5cb8e) (2017-12-16) security hardening\n\n## [v0.41.10](https://github.com/nextcloud/nextcloudpi/commit/85c8722) (2017-12-16) dnsmasq: added interface\n\n## [v0.41.9 ](https://github.com/nextcloud/nextcloudpi/commit/4b07f0b) (2017-12-14) fix occ command without execute permissions\n\n## [v0.41.8 ](https://github.com/nextcloud/nextcloudpi/commit/3f09cd5) (2017-12-13) Fixed configuration interoperability between nc-datadit and fail2ban. (#323)\n\n## [v0.41.7 ](https://github.com/nextcloud/nextcloudpi/commit/f7030f5) (2017-12-12) replace ping to github.com to google.com\n\n## [v0.41.6 ](https://github.com/nextcloud/nextcloudpi/commit/3fedf4f) (2017-12-05) ncp-config: show changelog on updates\n\n## [v0.41.5 ](https://github.com/nextcloud/nextcloudpi/commit/3896b7f) (2017-12-05) nc-database: accept BTRFS filesystems\n\n## [v0.41.4 ](https://github.com/nextcloud/nextcloudpi/commit/3c85b80) (2017-11-29) nc-limits: added PHP threads and Redis mem limits\n\n## [v0.41.3 ](https://github.com/nextcloud/nextcloudpi/commit/30c34d8) (2017-12-05) SSH: enhance security\n\n## [v0.41.2 ](https://github.com/nextcloud/nextcloudpi/commit/030bbed) (2017-12-04) nc-automount: check for USBdrive labeled drive case\n\n## [v0.41.1 ](https://github.com/nextcloud/nextcloudpi/commit/29da1b5) (2017-12-04) nc-info: warn of long operation\n\n## [v0.41.0 ](https://github.com/nextcloud/nextcloudpi/commit/ad26b87) (2017-12-04) updated to NC12.0.4\n\n## [v0.40.0 ](https://github.com/nextcloud/nextcloudpi/commit/d40360c) (2017-12-03) added btrfs snapshots\n\n## [v0.39.3 ](https://github.com/nextcloud/nextcloudpi/commit/7726f09) (2017-11-29) nc-export: silent cd\n\n## [v0.39.2 ](https://github.com/nextcloud/nextcloudpi/commit/7aaf31c) (2017-11-29) nc-import: fix ncp-web appearing to fail when activating options that restart httpd\n\n## [v0.39.1 ](https://github.com/nextcloud/nextcloudpi/commit/1e2de68) (2017-11-28) motd: update logo\n\n## [v0.39.0 ](https://github.com/nextcloud/nextcloudpi/commit/f8b328e) (2017-11-27) added nc-export-ncp and nc-import-ncp\n\n## [v0.38.1 ](https://github.com/nextcloud/nextcloudpi/commit/6c7cd4b) (2017-11-27) nc-info: warn distro\n\n## [v0.38.0 ](https://github.com/nextcloud/nextcloudpi/commit/58d4ca6) (2017-11-27) added SSH\n\n## [v0.37.5 ](https://github.com/nextcloud/nextcloudpi/commit/39064cc) (2017-11-25) nc-info: provide suggestions\n\n## [v0.37.4 ](https://github.com/nextcloud/nextcloudpi/commit/5d7188e) (2017-11-25) dnsmasq: improve output\n\n## [v0.37.3 ](https://github.com/nextcloud/nextcloudpi/commit/86ab526) (2017-11-24) build: fix cleanup\n\n## [v0.37.2 ](https://github.com/nextcloud/nextcloudpi/commit/2c884b7) (2017-11-20) nc-datadir: dont create dir if not exists\n\n## [v0.37.1 ](https://github.com/nextcloud/nextcloudpi/commit/dd1d6e6) (2017-11-19) nc-restore: fix restore passwod\n\n## [v0.37.0 ](https://github.com/nextcloud/nextcloudpi/commit/de4e0c7) (2017-11-19) added nc-info\n\n## [v0.36.2 ](https://github.com/nextcloud/nextcloudpi/commit/d1e529e) (2017-11-19) nc-diag: small fixes\n\n## [v0.36.1 ](https://github.com/nextcloud/nextcloudpi/commit/c1eb908) (2017-11-18) update: fix return value\n\n## [v0.36.0 ](https://github.com/nextcloud/nextcloudpi/commit/ede912f) (2017-11-18) added ncp-diag and ncp-report\n\n## [v0.35.2 ](https://github.com/nextcloud/nextcloudpi/commit/2c25fa9) (2017-11-17) nextcloudpi-config: inform changelog\n\n## [v0.35.1 ](https://github.com/nextcloud/nextcloudpi/commit/bccbb5b) (2017-11-17) nc-datadir: make backup if non empty\n\n## [v0.35.0 ](https://github.com/nextcloud/nextcloudpi/commit/75fe8d4) (2017-11-17) added nc-passwd\n\n## [v0.34.16](https://github.com/nextcloud/nextcloudpi/commit/370fc74) (2017-11-17) nc-datadir: refuse to move to SD card\n\n## [v0.34.15](https://github.com/nextcloud/nextcloudpi/commit/ba76566) (2017-11-16) update: check existence ncp.conf\n\n## [v0.34.14](https://github.com/nextcloud/nextcloudpi/commit/95240ca) (2017-11-16) update: check return code\n\n## [v0.34.13](https://github.com/nextcloud/nextcloudpi/commit/7e126fd) (2017-11-16) improve IP detection\n\n## [v0.34.12](https://github.com/nextcloud/nextcloudpi/commit/ac9989d) (2017-11-16) fail2ban: fix accidentally deleted line\n\n## [v0.34.11](https://github.com/nextcloud/nextcloudpi/commit/509206c) (2017-11-15) ncp-web: only show wizard button if it exists, delete from  docker\n\n## [v0.34.10](https://github.com/nextcloud/nextcloudpi/commit/dc2ddd7) (2017-11-14) noip: fix return value\n\n## [v0.34.9 ](https://github.com/nextcloud/nextcloudpi/commit/a7af6e4) (2017-11-12) nc-nextcloud: restart php after redis\n\n## [v0.34.8 ](https://github.com/nextcloud/nextcloudpi/commit/88815bb) (2017-11-12) nc-init: install notifications\n\n## [v0.34.7 ](https://github.com/nextcloud/nextcloudpi/commit/c2143b9) (2017-11-12) redis: fix update bug\n\n## [v0.34.6 ](https://github.com/nextcloud/nextcloudpi/commit/a71ec05) (2017-11-11) redis: fix socket permissions\n\n## [v0.34.5 ](https://github.com/nextcloud/nextcloudpi/commit/10488be) (2017-11-10) update: wait running apt processes (fix)\n\n## [v0.34.4 ](https://github.com/nextcloud/nextcloudpi/commit/fa5f56e) (2017-11-09) redis: fixes with ramlogs and modsecurity\n\n## [v0.34.3 ](https://github.com/nextcloud/nextcloudpi/commit/9657f7f) (2017-11-09) redis: change overcommit memory on update\n\n## [v0.34.2 ](https://github.com/nextcloud/nextcloudpi/commit/f557c8d) (2017-11-09) Revert \"update: wait running apt processes\"\n\n## [v0.34.1 ](https://github.com/nextcloud/nextcloudpi/commit/94b7021) (2017-11-09) nc-nextcloud: added more logging\n\n## [v0.34.0 ](https://github.com/nextcloud/nextcloudpi/commit/958beef) (2017-11-07) added NCP custom theme with new logo\n\n## [v0.33.0 ](https://github.com/nextcloud/nextcloudpi/commit/7e2abc9) (2017-11-06) added redis\n\n## [v0.32.7 ](https://github.com/nextcloud/nextcloudpi/commit/1955ece) (2017-11-09) nc-notify-updates: fixes\n\n## [v0.32.6 ](https://github.com/nextcloud/nextcloudpi/commit/4329eea) (2017-11-08) noip: manage many interfaces and fix return value\n\n## [v0.32.5 ](https://github.com/nextcloud/nextcloudpi/commit/8dbd282) (2017-11-08) update: wait running apt processes\n\n## [v0.32.4 ](https://github.com/nextcloud/nextcloudpi/commit/01a33d4) (2017-11-08) fail2ban: update logpath on nc-datadir or nc-restore\n\n## [v0.32.3 ](https://github.com/nextcloud/nextcloudpi/commit/963542b) (2017-11-06) nc-notify-updates: rework for more accuracy\n\n## [v0.32.2 ](https://github.com/nextcloud/nextcloudpi/commit/fa2279f) (2017-11-04) ncp-web: fix return value\n\n## [v0.32.1 ](https://github.com/nextcloud/nextcloudpi/commit/961008c) (2017-11-04) build: replace user pi for user ncp\n\n## [v0.32.0 ](https://github.com/nextcloud/nextcloudpi/commit/06294c5) (2017-11-03) spDYN: initial adjustments\n\n## [v0.31.29](https://github.com/nextcloud/nextcloudpi/commit/74fd94c) (2017-11-02) ncp-web: fix timeout in long operations\n\n## [v0.31.28](https://github.com/nextcloud/nextcloudpi/commit/b27974f) (2017-10-31) build: expand filesystem during first boot\n\n## [v0.31.27](https://github.com/nextcloud/nextcloudpi/commit/515b731) (2017-10-31) nc-backup: check available space\n\n## [v0.31.26](https://github.com/nextcloud/nextcloudpi/commit/6fdb761) (2017-10-30) build: check ncp-launcher existence for old images\n\n## [v0.31.25](https://github.com/nextcloud/nextcloudpi/commit/447585d) (2017-10-29) letsencrypt: remove workaround. fixed upstream\n\n## [v0.31.24](https://github.com/nextcloud/nextcloudpi/commit/36af04b) (2017-10-27) nc-forward-ports: more info in output\n\n## [v0.31.23](https://github.com/nextcloud/nextcloudpi/commit/a494e69) (2017-10-27) nc-format-USB: more info in output\n\n## [v0.31.22](https://github.com/nextcloud/nextcloudpi/commit/0bc5e09) (2017-10-25) wizard: chain configurations and improved feedback\n\n## [v0.31.20](https://github.com/nextcloud/nextcloudpi/commit/d8b6eb3) (2017-10-26) nc-notify-updates: fix repeated lines\n\n## [v0.31.19](https://github.com/nextcloud/nextcloudpi/commit/2f1a9c9) (2017-10-25) samba: disable homes share by default\n\n## [v0.31.18](https://github.com/nextcloud/nextcloudpi/commit/84a2d61) (2017-10-25) letsencrypt: fix return value\n\n## [v0.31.17](https://github.com/nextcloud/nextcloudpi/commit/8f54ff7) (2017-10-25) noip: make possible to reconfigure while running\n\n## [v0.31.16](https://github.com/nextcloud/nextcloudpi/commit/4c7e562) (2017-10-22) freeDNS: fix periodic update typo\n\n## [v0.31.15](https://github.com/nextcloud/nextcloudpi/commit/7ffc801) (2017-10-19) ncp-web: improve password prompt permissions\n\n## [v0.31.14](https://github.com/nextcloud/nextcloudpi/commit/bd74eb4) (2017-10-09) ncp-web: integrate ncp-wizard with ncp-web\n\n## [v0.31.13](https://github.com/nextcloud/nextcloudpi/commit/a5ce511) (2017-10-07) letsencrypt: fix workaround for old images\n\n## [v0.31.12](https://github.com/nextcloud/nextcloudpi/commit/dcbafb2) (2017-10-05) fail2ban: email notification (Closes #232)\n\n## [v0.31.11](https://github.com/nextcloud/nextcloudpi/commit/a4e5df7) (2017-10-04) nc-backup: fix excludes\n\n## [v0.31.10](https://github.com/nextcloud/nextcloudpi/commit/c00e1e9) (2017-10-04) nc-forward-ports: exit status on failure\n\n## [v0.31.9 ](https://github.com/nextcloud/nextcloudpi/commit/6eab4ff) (2017-10-03) nc-wifi: improve instructions\n\n## [v0.31.8 ](https://github.com/nextcloud/nextcloudpi/commit/6e129da) (2017-09-30) ncp-web: small fixes\n\n## [v0.31.7 ](https://github.com/nextcloud/nextcloudpi/commit/99126b6) (2017-10-03) letsencrypt: dont change config if not successful\n\n## [v0.31.6 ](https://github.com/nextcloud/nextcloudpi/commit/9623e48) (2017-10-03) letsencrypt: fix external bug (Closes #230)\n\n## [v0.31.5 ](https://github.com/nextcloud/nextcloudpi/commit/ba9d6fd) (2017-09-30) nc-format-USB: fix format disks >2TB and more (Closes #223)\n\n## [v0.31.4 ](https://github.com/nextcloud/nextcloudpi/commit/cfcb535) (2017-09-30) nc-format-USB: speed up ext4 creation with lazy initialization\n\n## [v0.31.3 ](https://github.com/nextcloud/nextcloudpi/commit/b2500f3) (2017-09-30) letsencrypt: fix uppercase domains cert path (Closes #229)\n\n## [v0.31.2 ](https://github.com/nextcloud/nextcloudpi/commit/2f83da0) (2017-09-30) ncp-web: remove http2 push headers. They dont play well with pwauth (#224)\n\n## [v0.31.1 ](https://github.com/nextcloud/nextcloudpi/commit/8c590e9) (2017-09-28) nc-static-IP: fix occ path\n\n## [v0.31.0 ](https://github.com/nextcloud/nextcloudpi/commit/5b50ec3) (2017-09-27) wizard: connect backend with frontend. Modifications for first release\n\n## [v0.30.0 ](https://github.com/nextcloud/nextcloudpi/commit/0c535b5) (2017-09-25) reviewed duckDNS: small adaptations\n\n## [v0.29.4 ](https://github.com/nextcloud/nextcloudpi/commit/192a9fc) (2017-09-23) nc-backup: apply limit before backup\n\n## [v0.29.3 ](https://github.com/nextcloud/nextcloudpi/commit/3a5cc3f) (2017-09-24) ncp-web: authentication fixes\n\n## [v0.29.2 ](https://github.com/nextcloud/nextcloudpi/commit/786728c) (2017-09-20) changed hostname\n\n## [v0.29.1 ](https://github.com/nextcloud/nextcloudpi/commit/a42e379) (2017-09-20) lamp: add fileinfo mcrypt packages\n\n## [v0.29.0 ](https://github.com/nextcloud/nextcloudpi/commit/189e34b) (2017-09-20) updated to NC12.0.3\n\n## [v0.28.2 ](https://github.com/nextcloud/nextcloudpi/commit/c141989) (2017-09-18) ncp-web: point changelog to master\n\n## [v0.28.1 ](https://github.com/nextcloud/nextcloudpi/commit/019c2f0) (2017-09-15) nc-static-IP: add new IP to trusted domain\n\n## [v0.28.0 ](https://github.com/nextcloud/nextcloudpi/commit/bd79fb9) (2017-09-14) added nc-static-IP\n\n## [v0.27.0 ](https://github.com/nextcloud/nextcloudpi/commit/111cc78) (2017-09-14) added nc-fix-permissions\n\n## [v0.26.32](https://github.com/nextcloud/nextcloudpi/commit/bb91d83) (2017-09-12) split library.sh\n\n## [v0.26.31](https://github.com/nextcloud/nextcloudpi/commit/020cfdc) (2017-09-12) fail2ban: autodetect log path\n\n## [v0.26.30](https://github.com/nextcloud/nextcloudpi/commit/c982deb) (2017-09-11) ncp-web: fix php exec with background restarting of processes\n\n## [v0.26.29](https://github.com/nextcloud/nextcloudpi/commit/c20649d) (2017-09-11) remove config txt output\n\n## [v0.26.28](https://github.com/nextcloud/nextcloudpi/commit/ef402e7) (2017-09-08) nc-backup: small fixes\n\n## [v0.26.27](https://github.com/nextcloud/nextcloudpi/commit/1630425) (2017-09-10) ncp-web: link to wiki info for each extra\n\n## [v0.26.26](https://github.com/nextcloud/nextcloudpi/commit/cdad339) (2017-09-10) ncp-web: minor tweaks\n\n## [v0.26.25](https://github.com/nextcloud/nextcloudpi/commit/60711f3) (2017-09-10) ncp-web: click version for changelog. click new version notification to nc-update\n\n## [v0.26.24](https://github.com/nextcloud/nextcloudpi/commit/1da6b12) (2017-09-10) nc-format-USB: silent mkfs output\n\n## [v0.26.23](https://github.com/nextcloud/nextcloudpi/commit/70aac8e) (2017-09-10) ncp-web: display info for each option\n\n## [v0.26.22](https://github.com/nextcloud/nextcloudpi/commit/1f055f8) (2017-09-09) nc-format-USB: adjust to the new automount system\n\n## [v0.26.21](https://github.com/nextcloud/nextcloudpi/commit/82d72e9) (2017-09-08) tag images\n\n## [v0.26.20](https://github.com/nextcloud/nextcloudpi/commit/4a0a182) (2017-09-08) backend: is_active() functionality\n\n## [v0.26.19](https://github.com/nextcloud/nextcloudpi/commit/6e63b55) (2017-09-08) letsencrypt: occ path fix\n\n## [v0.26.18](https://github.com/nextcloud/nextcloudpi/commit/e7e0786) (2017-09-07) refactor show_info(), make it only depend on variables\n\n## [v0.26.17](https://github.com/nextcloud/nextcloudpi/commit/74c8d95) (2017-09-07) ncp-web: link to changelog\n\n## [v0.26.16](https://github.com/nextcloud/nextcloudpi/commit/4d01fd8) (2017-09-06) added sendmail and mail configuration\n\n## [v0.26.15](https://github.com/nextcloud/nextcloudpi/commit/abe0ee7) (2017-09-06) disable not needed apache modules\n\n## [v0.26.14](https://github.com/nextcloud/nextcloudpi/commit/21832c1) (2017-09-06) modsecurity: fix in Stretch\n\n## [v0.26.13](https://github.com/nextcloud/nextcloudpi/commit/b5f037e) (2017-09-06) apache: set default Servername\n\n## [v0.26.12](https://github.com/nextcloud/nextcloudpi/commit/14dcde4) (2017-09-06) nc-automount: more logging and safety delay\n\n## [v0.26.11](https://github.com/nextcloud/nextcloudpi/commit/ce42e1a) (2017-09-05) nc-automount: small fix\n\n## [v0.26.10](https://github.com/nextcloud/nextcloudpi/commit/a5beae8) (2017-09-05) nc-autoupdate-ncp: ability to choose the user to notify\n\n## [v0.26.9 ](https://github.com/nextcloud/nextcloudpi/commit/4c70d15) (2017-09-04) cleanup: dont disable ssh in extras, only in nextcloudpi.sh\n\n## [v0.26.8 ](https://github.com/nextcloud/nextcloudpi/commit/00e8c77) (2017-09-04) samba: always use NC datadir\n\n## [v0.26.7 ](https://github.com/nextcloud/nextcloudpi/commit/4074eda) (2017-09-04) samba: disable SMB1\n\n## [v0.26.6 ](https://github.com/nextcloud/nextcloudpi/commit/6a2dd48) (2017-09-04) ncp-web: disable PHP restart in update, (doesnt work) (#176)\n\n## [v0.26.5 ](https://github.com/nextcloud/nextcloudpi/commit/997f610) (2017-09-04) unattended upgrades: delete default config in stretch\n\n## [v0.26.4 ](https://github.com/nextcloud/nextcloudpi/commit/87b1509) (2017-09-03) nc-automount: small fix\n\n## [v0.26.3 ](https://github.com/nextcloud/nextcloudpi/commit/0b28b96) (2017-09-03) freeDNS: fix\n\n## [v0.26.2 ](https://github.com/nextcloud/nextcloudpi/commit/88a7d5e) (2017-09-03) nc-automount: improve links more\n\n## [v0.26.1 ](https://github.com/nextcloud/nextcloudpi/commit/5f943ac) (2017-09-02) freeDNS: fixes\n\n## [v0.26.0 ](https://github.com/nextcloud/nextcloudpi/commit/dd08a39) (2017-09-01) Add FreeDNS client installation for Raspbian\n\n## [v0.25.2 ](https://github.com/nextcloud/nextcloudpi/commit/3393477) (2017-09-02) nc-automount: improve links\n\n## [v0.25.1 ](https://github.com/nextcloud/nextcloudpi/commit/ee74875) (2017-09-01) nc-notify-updates: notify also of unattended upgrades\n\n## [v0.25.0 ](https://github.com/nextcloud/nextcloudpi/commit/bb58ac7) (2017-09-01) added nc-webui\n\n## [v0.24.18](https://github.com/nextcloud/nextcloudpi/commit/e5790d4) (2017-09-01) fix IP regex\n\n## [v0.24.17](https://github.com/nextcloud/nextcloudpi/commit/a695c16) (2017-09-01) nc-notify-updates: allow specifying user\n\n## [v0.24.16](https://github.com/nextcloud/nextcloudpi/commit/c4d2e41) (2017-08-31) nc-automount: complete overhaul\n\n## [v0.24.15](https://github.com/nextcloud/nextcloudpi/commit/b25fd33) (2017-08-31) cleanup qemu rules\n\n## [v0.24.14](https://github.com/nextcloud/nextcloudpi/commit/1a33e38) (2017-08-31) noip: update description\n\n## [v0.24.13](https://github.com/nextcloud/nextcloudpi/commit/f492269) (2017-08-31) use always no-install-recommends\n\n## [v0.24.12](https://github.com/nextcloud/nextcloudpi/commit/009c82e) (2017-08-31) shellcheck style fixes\n\n## [v0.24.11](https://github.com/nextcloud/nextcloudpi/commit/cfc7599) (2017-08-31) nc-backup: exclude opcachedir and logs\n\n## [v0.24.10](https://github.com/nextcloud/nextcloudpi/commit/a86efea) (2017-08-31) various extras: check internet connectivity\n\n## [v0.24.9 ](https://github.com/nextcloud/nextcloudpi/commit/2c911be) (2017-08-30) nc-automount: small fix\n\n## [v0.24.8 ](https://github.com/nextcloud/nextcloudpi/commit/8374a70) (2017-08-30) nc-news: remove it, it is already in the app store\n\n## [v0.24.7 ](https://github.com/nextcloud/nextcloudpi/commit/9e212e6) (2017-08-30) fix nextcloud-domain service with ipv6\n\n## [v0.24.6 ](https://github.com/nextcloud/nextcloudpi/commit/a8cfd17) (2017-08-29) nc-automount: only modify fstab when active\n\n## [v0.24.5 ](https://github.com/nextcloud/nextcloudpi/commit/263e15a) (2017-08-29) adjust max PHP processes\n\n## [v0.24.4 ](https://github.com/nextcloud/nextcloudpi/commit/8846df1) (2017-08-29) samba: fix permissions\n\n## [v0.24.3 ](https://github.com/nextcloud/nextcloudpi/commit/06a07cb) (2017-08-24) remove special characters from output, for ncp-web\n\n## [v0.24.2 ](https://github.com/nextcloud/nextcloudpi/commit/f044c6d) (2017-08-24) ncp-web: use SSE to display process output in real time. Exit status green/red\n\n## [v0.24.1 ](https://github.com/nextcloud/nextcloudpi/commit/edccf4a) (2017-08-22) fix fail2ban with stretch\n\n## [v0.24.0 ](https://github.com/nextcloud/nextcloudpi/commit/5e711e9) (2017-08-20) update to Raspbian Stretch\n\n## [v0.23.0 ](https://github.com/nextcloud/nextcloudpi/commit/3d80632) (2017-08-17) ncp-web: poweroff button\n\n## [v0.22.1 ](https://github.com/nextcloud/nextcloudpi/commit/ba95342) (2017-08-17) nc-notify-updates: simplify parameters\n\n## [v0.22.0 ](https://github.com/nextcloud/nextcloudpi/commit/53c498b) (2017-08-16) update to nextcloud 12.0.2\n\n## [v0.21.2 ](https://github.com/nextcloud/nextcloudpi/commit/e10bf3b) (2017-08-16) nc-notify-updates: only notify once\n\n## [v0.21.1 ](https://github.com/nextcloud/nextcloudpi/commit/b95f6d5) (2017-08-16) nc-automount: added info\n\n## [v0.21.0 ](https://github.com/nextcloud/nextcloudpi/commit/d638cf9) (2017-08-16) added nc-autoupdate-ncp\n\n## [v0.20.4 ](https://github.com/nextcloud/nextcloudpi/commit/8f349c9) (2017-08-16) faster remote updates and version checks\n\n## [v0.20.3 ](https://github.com/nextcloud/nextcloudpi/commit/96685c2) (2017-08-15) nc-automount: fixed persistence of links and more\n\n## [v0.20.2 ](https://github.com/nextcloud/nextcloudpi/commit/9176473) (2017-08-14) nc-database: fail gracefully if mv fails\n\n## [v0.20.1 ](https://github.com/nextcloud/nextcloudpi/commit/7dde92a) (2017-08-14) ncp-web: allow commas\n\n## [v0.20.0 ](https://github.com/nextcloud/nextcloudpi/commit/5ebeaf1) (2017-08-12) added nc-notify-updates\n\n## [v0.19.11](https://github.com/nextcloud/nextcloudpi/commit/c2ca13e) (2017-08-11) fix version check\n\n## [v0.19.10](https://github.com/nextcloud/nextcloudpi/commit/20fea70) (2017-08-11) alert of updates\n\n## [v0.19.9 ](https://github.com/nextcloud/nextcloudpi/commit/a0154aa) (2017-08-10) ncp-web: show version\n\n## [v0.19.8 ](https://github.com/nextcloud/nextcloudpi/commit/77567c4) (2017-08-10) ncp-web: visually indicate selected extra\n\n## [v0.19.7 ](https://github.com/nextcloud/nextcloudpi/commit/08b3e1f) (2017-08-10) ncp-web: active mark\n\n## [v0.19.6 ](https://github.com/nextcloud/nextcloudpi/commit/f58ca62) (2017-08-10) nc-restore: inform of existing data backup\n\n## [v0.19.5 ](https://github.com/nextcloud/nextcloudpi/commit/b1c3073) (2017-08-10) ncp-web: use checkboxes for yes/no fields\n\n## [v0.19.4 ](https://github.com/nextcloud/nextcloudpi/commit/6f74658) (2017-08-10) ncp-web: LAN access restrictions ipv6\n\n## [v0.19.3 ](https://github.com/nextcloud/nextcloudpi/commit/390b313) (2017-08-10) nc-restore: dont destroy existing datadir\n\n## [v0.19.2 ](https://github.com/nextcloud/nextcloudpi/commit/3dd9945) (2017-08-10) restore from other instance fix\n\n## [v0.19.1 ](https://github.com/nextcloud/nextcloudpi/commit/a6b79b4) (2017-08-08) fix web update to NC12.0.1\n\n## [v0.19.0 ](https://github.com/nextcloud/nextcloudpi/commit/fc4ea8a) (2017-08-08) update to nextcloud 12.0.1\n\n## [v0.18.9 ](https://github.com/nextcloud/nextcloudpi/commit/4ecfccb) (2017-08-08) dont install php-smbclient: breaks samba\n\n## [v0.18.8 ](https://github.com/nextcloud/nextcloudpi/commit/bce67d3) (2017-08-08) letsencrypt: info about open ports\n\n## [v0.18.7 ](https://github.com/nextcloud/nextcloudpi/commit/744c716) (2017-08-07) stop script if noip config fails\n\n## [v0.18.6 ](https://github.com/nextcloud/nextcloudpi/commit/6617f29) (2017-08-01) nc-backup: small fix\n\n## [v0.18.5 ](https://github.com/nextcloud/nextcloudpi/commit/d819bbb) (2017-07-31) simplify parameters\n\n## [v0.18.4 ](https://github.com/nextcloud/nextcloudpi/commit/c4210c5) (2017-07-31) fix swapfile with automount\n\n## [v0.18.3 ](https://github.com/nextcloud/nextcloudpi/commit/6f8d553) (2017-07-31) output some more information in nc-backup-auto and nc-scan-auto\n\n## [v0.18.2 ](https://github.com/nextcloud/nextcloudpi/commit/c5c5a8e) (2017-07-31) fix nc-scan-auto\n\n## [v0.18.1 ](https://github.com/nextcloud/nextcloudpi/commit/e0d9aea) (2017-07-31) use letsencrypt certificate for ncp-web\n\n## [v0.18.0 ](https://github.com/nextcloud/nextcloudpi/commit/182c41a) (2017-07-30) added nc-backup-auto\n\n## [v0.17.21](https://github.com/nextcloud/nextcloudpi/commit/74c0f57) (2017-07-30) fix ncadmin password\n\n## [v0.17.20](https://github.com/nextcloud/nextcloudpi/commit/6257eb6) (2017-07-30) refactor nc-scan-auto\n\n## [v0.17.19](https://github.com/nextcloud/nextcloudpi/commit/90dd8d6) (2017-07-29) backup/restore: include datadir\n\n## [v0.17.18](https://github.com/nextcloud/nextcloudpi/commit/530e3a1) (2017-07-29) randomize database password (fixes)\n\n## [v0.17.17](https://github.com/nextcloud/nextcloudpi/commit/558e3a5) (2017-07-28) manage overwrite.cli.url\n\n## [v0.17.16](https://github.com/nextcloud/nextcloudpi/commit/24ccde4) (2017-07-28) fix smbclient segfault\n\n## [v0.17.15](https://github.com/nextcloud/nextcloudpi/commit/6df5f73) (2017-07-27) nc-restore: fix situation opcache dir was moved\n\n## [v0.17.14](https://github.com/nextcloud/nextcloudpi/commit/edbfa67) (2017-07-27) randomize database password\n\n## [v0.17.13](https://github.com/nextcloud/nextcloudpi/commit/3ee3a28) (2017-07-27) added HTTP port to port forwarding rules\n\n## [v0.17.12](https://github.com/nextcloud/nextcloudpi/commit/8127734) (2017-07-27) fix unattended-upgrades\n\n## [v0.17.11](https://github.com/nextcloud/nextcloudpi/commit/00a483a) (2017-07-27) output some more information in automount,datadir,unattended-upgrades\n\n## [v0.17.10](https://github.com/nextcloud/nextcloudpi/commit/efa3a90) (2017-07-26) secure mysqld\n\n## [v0.17.9 ](https://github.com/nextcloud/nextcloudpi/commit/20c35ea) (2017-07-26) nc-backup: make sure destination dir exists\n\n## [v0.17.8 ](https://github.com/nextcloud/nextcloudpi/commit/47a9caf) (2017-07-26) nc-nextcloud: fixes for docker build process\n\n## [v0.17.7 ](https://github.com/nextcloud/nextcloudpi/commit/93a2b0a) (2017-07-26) nc-init: check mariaDB up\n\n## [v0.17.6 ](https://github.com/nextcloud/nextcloudpi/commit/1344a7d) (2017-07-26) dnsmasq detect ip\n\n## [v0.17.5 ](https://github.com/nextcloud/nextcloudpi/commit/a7a4637) (2017-07-26) enable nc-news\n\n## [v0.17.3 ](https://github.com/nextcloud/nextcloudpi/commit/90ff8b5) (2017-07-24) letsencrypt without restarting apache\n\n## [v0.17.2 ](https://github.com/nextcloud/nextcloudpi/commit/bec9cdb) (2017-07-24) ncp-web HTTPS only\n\n## [v0.17.1 ](https://github.com/nextcloud/nextcloudpi/commit/1e98c8e) (2017-07-23) restart HTTPd delayed on the bg, so it does not kill AJAX response\n\n## [v0.17.0 ](https://github.com/nextcloud/nextcloudpi/commit/41e71b4) (2017-07-13) added ncp-web\n\n## [v0.16.2 ](https://github.com/nextcloud/nextcloudpi/commit/33e01e7) (2017-07-07) changed mysql config file location\n\n## [v0.16.1 ](https://github.com/nextcloud/nextcloudpi/commit/a98bf79) (2017-07-05) improve info letsencrypt\n\n## [v0.16.0 ](https://github.com/nextcloud/nextcloudpi/commit/a82d2d1) (2017-06-28) added nc-format-USB\n\n## [v0.15.2 ](https://github.com/nextcloud/nextcloudpi/commit/83af8e7) (2017-06-29) add smbclient for external storage\n\n## [v0.15.1 ](https://github.com/nextcloud/nextcloudpi/commit/0e5d8ac) (2017-06-29) nc-automount improvements\n\n## [v0.15.0 ](https://github.com/nextcloud/nextcloudpi/commit/dbbdfea) (2017-06-29) add nc-forward-ports\n\n## [v0.14.9 ](https://github.com/nextcloud/nextcloudpi/commit/4aba049) (2017-06-29) init noip service in installation step\n\n## [v0.14.8 ](https://github.com/nextcloud/nextcloudpi/commit/ea1a3d6) (2017-06-29) add info message nc-news\n\n## [v0.14.7 ](https://github.com/nextcloud/nextcloudpi/commit/10a9d2e) (2017-06-29) clear screen before nextcloudpi output\n\n## [v0.14.6 ](https://github.com/nextcloud/nextcloudpi/commit/27830f5) (2017-06-28) change config message\n\n## [v0.14.5 ](https://github.com/nextcloud/nextcloudpi/commit/88bf2c7) (2017-06-28) nc-wifi and trusted domain fixes\n\n## [v0.14.4 ](https://github.com/nextcloud/nextcloudpi/commit/c94bc52) (2017-06-27) nc-automount fixes\n\n## [v0.14.3 ](https://github.com/nextcloud/nextcloudpi/commit/bb61bb7) (2017-06-27) protect nextcloudpi-config files from reading. They can contain sensitive information\n\n## [v0.14.2 ](https://github.com/nextcloud/nextcloudpi/commit/36b3f49) (2017-06-25) More warnings for nc-database\n\n## [v0.14.1 ](https://github.com/nextcloud/nextcloudpi/commit/709cd60) (2017-06-25) Show current version in MOTD when there is an update available\n\n## [v0.14.0 ](https://github.com/nextcloud/nextcloudpi/commit/c33cabc) (2017-06-14) nc-init as a nextcloudpi-config option\n\n## [v0.13.0 ](https://github.com/nextcloud/nextcloudpi/commit/f2f0687) (2017-06-14) nc-news, install news app\n\n## [v0.12.19](https://github.com/nextcloud/nextcloudpi/commit/c03bb6f) (2017-06-13) support for utf8 4byte char\n\n## [v0.12.18](https://github.com/nextcloud/nextcloudpi/commit/ecedf91) (2017-06-13) check version format\n\n## [v0.12.17](https://github.com/nextcloud/nextcloudpi/commit/338adfb) (2017-06-13) instructions for dnsmasq and noip\n\n## [v0.12.16](https://github.com/nextcloud/nextcloudpi/commit/463eee9) (2017-06-06) update trusted domains also from letsencrypt config\n\n## [v0.12.14](https://github.com/nextcloud/nextcloudpi/commit/fb0ad98) (2017-05-28) nc-automount fixes\n\n## [v0.12.13](https://github.com/nextcloud/nextcloudpi/commit/e917409) (2017-05-28) nc-datadir detect occ errors\n\n## [v0.12.12](https://github.com/nextcloud/nextcloudpi/commit/eb4e0d4) (2017-05-28) protect ncp-update from self modifications. fix\n\n## [v0.12.11](https://github.com/nextcloud/nextcloudpi/commit/eb438ed) (2017-05-28) also ask to press a key if script fails, to see failed output\n\n## [v0.12.10](https://github.com/nextcloud/nextcloudpi/commit/dd01b64) (2017-05-28) rpi-update to prune old modules\n\n## [v0.12.9 ](https://github.com/nextcloud/nextcloudpi/commit/b428b0f) (2017-05-27) nc-datadir: move .opcache location too\n\n## [v0.12.8 ](https://github.com/nextcloud/nextcloudpi/commit/2a58cc2) (2017-05-26) more checks fail2ban\n\n## [v0.12.7 ](https://github.com/nextcloud/nextcloudpi/commit/f0df477) (2017-05-26) only show \"press any key\" if not canceled\n\n## [v0.12.5 ](https://github.com/nextcloud/nextcloudpi/commit/3dbfd2b) (2017-05-25) fix nextcloud-domain service with wicd service\n\n## [v0.12.4 ](https://github.com/nextcloud/nextcloudpi/commit/59c981b) (2017-05-25) press key after going back to menu ncp-config\n\n## [v0.12.3 ](https://github.com/nextcloud/nextcloudpi/commit/c8ee570) (2017-05-25) improvements for nc-backup and nc-restore\n\n## [v0.12.2 ](https://github.com/nextcloud/nextcloudpi/commit/7ea3dbe) (2017-05-25) test for write permissions for mysql and www-data user for nc-datadir and nc-database\n\n## [v0.12.1 ](https://github.com/nextcloud/nextcloudpi/commit/c02bc6b) (2017-05-25) revisited modsecurity rules. Fixed photo uploads and notes app\n\n## [v0.12.0 ](https://github.com/nextcloud/nextcloudpi/commit/e3a4878) (2017-05-20) add automount feature\n\n## [v0.11.1 ](https://github.com/nextcloud/nextcloudpi/commit/06423bf) (2017-05-23) if ACTIVE=yes by default, launch configure for that script on update\n\n## [v0.11.0 ](https://github.com/nextcloud/nextcloudpi/commit/0479dbb) (2017-05-22) add NC12\n\n## [v0.10.1 ](https://github.com/nextcloud/nextcloudpi/commit/7eaedb4) (2017-05-22) cal nextcloud-domain from nc-wifi\n\n## [v0.10.0 ](https://github.com/nextcloud/nextcloudpi/commit/f77b769) (2017-05-21) add nc-backup and nc-restore\n\n## [v0.9.0  ](https://github.com/nextcloud/nextcloudpi/commit/0909fce) (2017-05-20) add nextcloud instance installation command to ncp-config\n\n## [v0.8.8  ](https://github.com/nextcloud/nextcloudpi/commit/addd0a8) (2017-05-20) check destination filesystem in nc-datadir nc-databasedir\n\n## [v0.8.7  ](https://github.com/nextcloud/nextcloudpi/commit/0f0c860) (2017-05-20) add trusted domains also when setting up no-ip\n\n## [v0.8.6  ](https://github.com/nextcloud/nextcloudpi/commit/aae7663) (2017-04-27) show ✓ if an item is activated in nextcloudpi-config\n\n## [v0.8.5  ](https://github.com/nextcloud/nextcloudpi/commit/092d22a) (2017-05-20) fix update.sh\n\n## [v0.8.4  ](https://github.com/nextcloud/nextcloudpi/commit/2877a28) (2017-04-27) return to menu in nextcloudpi-config\n\n## [v0.8.3  ](https://github.com/nextcloud/nextcloudpi/commit/8200602) (2017-04-27) dont ask for confirmation on exiting config\n\n## [v0.8.2  ](https://github.com/nextcloud/nextcloudpi/commit/be2e4e6) (2017-04-27) keep current configuration on remote updates\n\n## [v0.8.1  ](https://github.com/nextcloud/nextcloudpi/commit/64bf42f) (2017-04-27) added show_info() to nextcloudpi-config\n\n## [v0.8.0  ](https://github.com/nextcloud/nextcloudpi/commit/117f72a) (2017-04-26) [update 11.0.3] split installation between base LAMP and NC. Cleaner to just update NC releases over the base\n\n## [v0.7.2  ](https://github.com/nextcloud/nextcloudpi/commit/cb7c5ca) (2017-04-21) fix issue #6 First booting with a connected ethernet cable makes wicd daemon start with an empty wireless interface\n\n## [v0.7.1  ](https://github.com/nextcloud/nextcloudpi/commit/1483c72) (2017-04-16) do not cleanup as part of ncp-update\n\n## [v0.7.0  ](https://github.com/nextcloud/nextcloudpi/commit/c726250) (2017-04-14) added samba/cifs\n\n## [v0.6.0  ](https://github.com/nextcloud/nextcloudpi/commit/47f4c75) (2017-04-11) NFS and nc-scan\n\n## [v0.5.10 ](https://github.com/nextcloud/nextcloudpi/commit/714f6b2) (2017-04-07) fixes enabling services\n\n## [v0.5.9  ](https://github.com/nextcloud/nextcloudpi/commit/a17c393) (2017-04-04) disable dhcpcd when enabling wicd\n\n## [v0.5.8  ](https://github.com/nextcloud/nextcloudpi/commit/a340077) (2017-04-04) ncp-update: only root\n\n## [v0.5.7  ](https://github.com/nextcloud/nextcloudpi/commit/c60ee01) (2017-04-04) protect ncp-update from self modifications\n\n## [v0.5.6  ](https://github.com/nextcloud/nextcloudpi/commit/1c19f4c) (2017-04-04) fix ncp-update with no internet access\n\n## [v0.5.5  ](https://github.com/nextcloud/nextcloudpi/commit/eaf3fe7) (2017-04-04) fix print version nextcloudpi-config\n\n## [v0.5.4  ](https://github.com/nextcloud/nextcloudpi/commit/f363412) (2017-04-03) nc-wifi fixes: not enabled by default\n\n## [v0.5.3  ](https://github.com/nextcloud/nextcloudpi/commit/9b5cd81) (2017-04-03) check for updates (and update) upon launching nextcloudpi-config\n\n## [v0.5.2  ](https://github.com/nextcloud/nextcloudpi/commit/138fecc) (2017-04-02) fix empty wireless_interfaces in nc-wifi\n\n## [v0.5.1  ](https://github.com/nextcloud/nextcloudpi/commit/aec77e4) (2017-04-01) bugfixes RAM logs, swap and nc-database\n\n## [v0.5.0  ](https://github.com/nextcloud/nextcloudpi/commit/e1c46b5) (2017-03-31) added RAM logs\n\n## [v0.4.0  ](https://github.com/nextcloud/nextcloudpi/commit/ef12ceb) (2017-03-31) added configure swap file\n\n## [v0.3.0  ](https://github.com/nextcloud/nextcloudpi/commit/fd942a5) (2017-03-31) added database location config\n\n## [v0.2.0  ](https://github.com/nextcloud/nextcloudpi/commit/d7ced8d) (2017-03-31) added wifi-curses\n\n## [v0.1.0  ](https://github.com/nextcloud/nextcloudpi/commit/75b4268) (2017-03-29) ncp updates and motd. structure directories\n\n## [v0.0.1  ](https://github.com/nextcloud/nextcloudpi/commit/28accd2) (2017-03-24) add HTTPS only setting to nextcloudpi-config\n"
        },
        {
          "name": "etc",
          "type": "tree",
          "content": null
        },
        {
          "name": "generate_cohortes.sh",
          "type": "blob",
          "size": 0.6650390625,
          "content": "#!/usr/bin/env bash\n#min=$((101-${1:-50}))\ntotal_count=\"${1?}\"\ntarget_file=\"${2?}\"\nall=({100..1})\ncohortes=()\n\ntouch \"${target_file?}\"\n\nwhile IFS=\"\" read -r line || [ -n \"$line\" ]\ndo\n  [[ -n \"$line\" ]] || continue\n  cohortes+=(\"$line\")\ndone < \"${target_file}\"\n\ncohortes_count=${#cohortes[@]}\ncount=$(( total_count - cohortes_count ))\n\nfor i in \"${all[@]:0:${count}}\"\ndo\n  cohorte_id=$((RANDOM % i))\n  while [[ \" ${cohortes[*]} \" =~ .*\" ${cohorte_id} \".* ]]\n  do\n    cohorte_id=$((cohorte_id+1))\n    if [[ $cohorte_id -eq 101 ]]\n    then\n      cohorte_id=1\n    fi\n  done\n  cohortes+=($cohorte_id)\ndone\n\n(IFS=$'\\n'; echo -n \"${cohortes[*]}\" | sort -h | head -c -1 >| \"$target_file\")\n"
        },
        {
          "name": "i18n",
          "type": "tree",
          "content": null
        },
        {
          "name": "install.sh",
          "type": "blob",
          "size": 4.3857421875,
          "content": "#!/bin/bash\n\n# NextCloudPi installation script\n#\n# Copyleft 2017 by Ignacio Nunez Hernanz <nacho _a_t_ ownyourbits _d_o_t_ com>\n# GPL licensed (see end of file) * Use at your own risk!\n#\n# Usage: ./install.sh\n#\n# more details at https://ownyourbits.com\n\nBRANCH=\"${BRANCH:-master}\"\n#DBG=x\n\nset -e$DBG\n\nTEMPDIR=\"$(mktemp -d /tmp/nextcloudpi.XXXXXX || (echo \"Failed to create temp dir. Exiting\" >&2 ; exit 1) )\"\ntrap \"rm -rf \\\"${TEMPDIR}\\\"\" 0 1 2 3 15\n\n[[ ${EUID} -ne 0 ]] && {\n  printf \"Must be run as root. Try 'sudo $0'\\n\"\n  exit 1\n}\n\nexport PATH=\"/usr/local/sbin:/usr/sbin:/sbin:${PATH}\"\n\n# check installed software\ntype mysqld &>/dev/null && echo \">>> WARNING: existing mysqld configuration will be changed <<<\"\ntype mysqld &>/dev/null && mysql -e 'use nextcloud' &>/dev/null && { echo \"The 'nextcloud' database already exists. Aborting\"; exit 1; }\n\n[[ \"$CI\" == \"true\" ]] || {\n  echo \"WARNING: This installer will disable SSH login for the root user and reset its password.\nIf you need to login with root, you should make sure, you have a root session open that you can use,\nto revert these changes afterwards (set PermitRootLogin to 'yes' in /etc/ssh/sshd_config and run passwd as root).\"\n  for i in {1..10}\n  do\n    echo \"Continuing in $((30-(3*i)))s (press Ctrl+C to abort)...\"\n    sleep 3\n  done\n}\n\n# get dependencies\napt-get update\nDEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y git ca-certificates sudo lsb-release wget jq gnupg2\n\n# get install code\nif [[ \"${CODE_DIR}\" == \"\" ]]; then\n  echo \"Getting build code...\"\n  CODE_DIR_TMP=\"${TEMPDIR}\"/nextcloudpi\n  git clone -b \"${BRANCH}\" https://github.com/nextcloud/nextcloudpi.git \"${CODE_DIR_TMP}\"\n  cd \"$CODE_DIR_TMP\"\nelse\n  cd \"${CODE_DIR}\"\nfi\n\n# install NCP\necho -e \"\\nInstalling NextCloudPi...\"\nsource etc/library.sh\n\n# check distro\ncheck_distro etc/ncp.cfg || {\n  echo \"ERROR: distro not supported:\";\n  cat /etc/issue\n  exit 1;\n}\n\n# indicate that this will be an image build\ntouch /.ncp-image\n\nmkdir -p /usr/local/etc/ncp-config.d/\ncp etc/ncp-config.d/nc-nextcloud.cfg /usr/local/etc/ncp-config.d/\ncp etc/library.sh /usr/local/etc/\ncp etc/ncp.cfg /usr/local/etc/\n\ncp -r etc/ncp-templates /usr/local/etc/\ninstall_app    lamp.sh\ninstall_app    bin/ncp/CONFIG/nc-nextcloud.sh\nrun_app_unsafe bin/ncp/CONFIG/nc-nextcloud.sh\nrm /usr/local/etc/ncp-config.d/nc-nextcloud.cfg    # armbian overlay is ro\nsystemctl restart mysqld # TODO this shouldn't be necessary, but somehow it's needed in Debian 9.6. Fixme\ninstall_app    ncp.sh\nrun_app_unsafe bin/ncp/CONFIG/nc-init.sh\necho 'Moving data directory to a more sensible location'\ndf -h\nmkdir -p /opt/ncdata\n[[ -f \"/usr/local/etc/ncp-config.d/nc-datadir.cfg\" ]] || {\n  should_rm_datadir_cfg=true\n  cp etc/ncp-config.d/nc-datadir.cfg /usr/local/etc/ncp-config.d/nc-datadir.cfg\n}\nDISABLE_FS_CHECK=1 NCPCFG=\"/usr/local/etc/ncp.cfg\" run_app_unsafe bin/ncp/CONFIG/nc-datadir.sh\n[[ -z \"$should_rm_datadir_cfg\" ]] || rm /usr/local/etc/ncp-config.d/nc-datadir.cfg\nrm /.ncp-image\nrm -f /opt/ncdata/data/nextcloud.log\n\n# skip on Armbian / Vagrant / LXD ...\n[[ \"${CODE_DIR}\" != \"\" ]] || bash /usr/local/bin/ncp-provisioning.sh\n\ncd -\nrm -rf \"${TEMPDIR}\"\n\nIP=\"$(get_ip)\"\n\necho \"Done.\n\nFirst: Visit https://$IP/  https://nextcloudpi.local/ (also https://nextcloudpi.lan/ or https://nextcloudpi/ on windows and mac)\nto activate your instance of NC, and save the auto generated passwords. You may review or reset them\nanytime by using nc-admin and nc-passwd.\nSecond: Type 'sudo ncp-config' to further configure NCP, or access ncp-web on https://$IP:4443/\nNote: You will have to add an exception, to bypass your browser warning when you\nfirst load the activation and :4443 pages. You can run letsencrypt to get rid of\nthe warning if you have a (sub)domain available.\n\"\n\n# License\n#\n# This script is free software; you can redistribute it and/or modify it\n# under the terms of the GNU General Public License as published by\n# the Free Software Foundation; either version 2 of the License, or\n# (at your option) any later version.\n#\n# This script is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this script; if not, write to the\n# Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n# Boston, MA  02111-1307  USA\n"
        },
        {
          "name": "lamp.sh",
          "type": "blob",
          "size": 3.99609375,
          "content": "#!/bin/bash\n\n# Nextcloud LAMP base installation on Raspbian\n#\n# Copyleft 2017 by Ignacio Nunez Hernanz <nacho _a_t_ ownyourbits _d_o_t_ com>\n# GPL licensed (see end of file) * Use at your own risk!\n#\n# Usage:\n#\n#   ./installer.sh lamp.sh <IP> (<img>)\n#\n# See installer.sh instructions for details\n#\n# Notes:\n#   Upon each necessary restart, the system will cut the SSH session, therefore\n#   it is required to save the state of the installation. See variable $STATE_FILE\n#   It will be necessary to invoke this a number of times for a complete installation\n#\n# More at https://ownyourbits.com/2017/02/13/nextcloud-ready-raspberry-pi-image/\n#\n\nAPTINSTALL=\"apt-get install -y --no-install-recommends\"\nexport DEBIAN_FRONTEND=noninteractive\n\ninstall()\n{\n    set -x\n    # Setup apt repository for php 8\n    wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg\n    echo \"deb https://packages.sury.org/php/ ${RELEASE%-security} main\" > /etc/apt/sources.list.d/php.list\n    apt-get update\n    $APTINSTALL apt-utils cron curl\n    ls -l /var/lock || true\n    $APTINSTALL apache2\n    # Fix missing lock directory\n    mkdir -p /run/lock\n    apache2ctl -V || true\n\n    # Create systemd users to keep uids persistent between containers\n    install_with_shadow_workaround --no-install-recommends systemd\n    $APTINSTALL -t $RELEASE php${PHPVER} php${PHPVER}-curl php${PHPVER}-gd php${PHPVER}-fpm php${PHPVER}-cli php${PHPVER}-opcache \\\n                            php${PHPVER}-mbstring php${PHPVER}-xml php${PHPVER}-zip php${PHPVER}-fileinfo php${PHPVER}-ldap \\\n                            php${PHPVER}-intl php${PHPVER}-bz2\n\n    mkdir -p /run/php\n\n    # mariaDB password\n    local DBPASSWD=\"default\"\n    echo -e \"[client]\\npassword=$DBPASSWD\" > /root/.my.cnf\n    chmod 600 /root/.my.cnf\n\n    debconf-set-selections <<< \"mariadb-server-5.5 mysql-server/root_password password $DBPASSWD\"\n    debconf-set-selections <<< \"mariadb-server-5.5 mysql-server/root_password_again password $DBPASSWD\"\n    $APTINSTALL mariadb-server php${PHPVER}-mysql\n    mkdir -p /run/mysqld\n    chown mysql /run/mysqld\n\n    # CONFIGURE APACHE\n    ##########################################\n\n    install_template apache2/http2.conf.sh /etc/apache2/conf-available/http2.conf --defaults\n\n    # CONFIGURE PHP\n    ##########################################\n\n    install_template \"php/opcache.ini.sh\" \"/etc/php/${PHPVER}/mods-available/opcache.ini\" --defaults\n\n    a2enmod http2\n    a2enconf http2\n    a2enmod proxy_fcgi setenvif\n    a2enconf php${PHPVER}-fpm\n    a2enmod rewrite\n    a2enmod headers\n    a2enmod dir\n    a2enmod mime\n    a2enmod ssl\n\n    echo \"ServerName localhost\" >> /etc/apache2/apache2.conf\n\n\n    # CONFIGURE LAMP FOR NEXTCLOUD\n    ##########################################\n\n    $APTINSTALL ssl-cert # self signed snakeoil certs\n\n    install_template \"mysql/90-ncp.cnf.sh\" \"/etc/mysql/mariadb.conf.d/90-ncp.cnf\" --defaults\n\n    install_template \"mysql/91-ncp.cnf.sh\" \"/etc/mysql/mariadb.conf.d/91-ncp.cnf\" --defaults\n\n  # launch mariadb if not already running\n  if ! [[ -f /run/mysqld/mysqld.pid ]]; then\n    echo \"Starting mariaDB\"\n    sudo -u mysql mysqld &\n  fi\n\n  # wait for mariadb\n  while :; do\n    [[ -S /run/mysqld/mysqld.sock ]] && break\n    sleep 0.5\n  done\n\n  cd /tmp\n  mysql_secure_installation <<EOF\n$DBPASSWD\ny\n$DBPASSWD\n$DBPASSWD\ny\ny\ny\ny\nEOF\n}\n\nconfigure() { :; }\n\n\n# License\n#\n# This script is free software; you can redistribute it and/or modify it\n# under the terms of the GNU General Public License as published by\n# the Free Software Foundation; either version 2 of the License, or\n# (at your option) any later version.\n#\n# This script is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this script; if not, write to the\n# Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n# Boston, MA  02111-1307  USA\n\n"
        },
        {
          "name": "ncp-activation",
          "type": "tree",
          "content": null
        },
        {
          "name": "ncp-app",
          "type": "tree",
          "content": null
        },
        {
          "name": "ncp-previewgenerator",
          "type": "tree",
          "content": null
        },
        {
          "name": "ncp-web",
          "type": "tree",
          "content": null
        },
        {
          "name": "ncp.sh",
          "type": "blob",
          "size": 9.0263671875,
          "content": "#!/bin/bash\n\n# NextcloudPi additions to Raspbian\n#\n# Copyleft 2017 by Ignacio Nunez Hernanz <nacho _a_t_ ownyourbits _d_o_t_ com>\n# GPL licensed (see end of file) * Use at your own risk!\n#\n# More at https://nextcloudpi.com\n#\n\nWEBADMIN=ncp\nWEBPASSWD=ownyourbits\nBRANCH=\"${BRANCH:-master}\"\n\nBINDIR=/usr/local/bin/ncp\nCONFDIR=/usr/local/etc/ncp-config.d/\nAPTINSTALL=\"apt-get install -y --no-install-recommends\"\nexport DEBIAN_FRONTEND=noninteractive\n\n\ninstall()\n{\n  # NCP-CONFIG\n  apt-get update\n  $APTINSTALL git dialog whiptail jq file lsb-release tmux logrotate\n\n  mkdir -p \"$CONFDIR\" \"$BINDIR\"\n\n  # This has changed, pi user no longer exists by default, the user needs to create it with Raspberry Pi imager\n  # The raspi-config layout and options have also changed\n  # https://github.com/RPi-Distro/raspi-config/blob/master/raspi-config\n  test -f /usr/bin/raspi-config && {\n    # shellcheck disable=SC1003\n    sed -i '/S3 Password/i \"S0 NextcloudPi Configuration\" \"Configuration of NextcloudPi\" \\\\' /usr/bin/raspi-config\n    sed -i '/S3\\\\ \\*) do_change_pass ;;/i S0\\\\ *) ncp-config ;;'                             /usr/bin/raspi-config\n  }\n\n  # add the ncc shortcut\n  cat > /usr/local/bin/ncc <<'EOF'\n#!/bin/bash\n[[ ${EUID} -eq 0 ]] && SUDO=\"sudo -E -u www-data\"\n${SUDO} php /var/www/nextcloud/occ \"$@\"\nEOF\n  chmod +x /usr/local/bin/ncc\n\n  # NCP-WEB\n\n  ## VIRTUAL HOST\n  cat > /etc/apache2/sites-available/ncp-activation.conf <<EOF\n<VirtualHost _default_:443>\n  DocumentRoot /var/www/ncp-web/\n  SSLEngine on\n  SSLCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem\n  SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key\n\n</VirtualHost>\n<Directory /var/www/ncp-web/>\n  <RequireAll>\n\n   <RequireAny>\n      Require host localhost\n      Require local\n      Require ip 192.168\n      Require ip 172\n      Require ip 10\n      Require ip fe80::/10\n      Require ip fd00::/8\n   </RequireAny>\n\n  </RequireAll>\n</Directory>\nEOF\n\n  install_template apache2/ncp.conf.sh /etc/apache2/sites-available/ncp.conf --defaults\n\n  $APTINSTALL libapache2-mod-authnz-external pwauth\n  a2enmod authnz_external authn_core auth_basic\n  a2dissite 001-nextcloud\n  a2ensite ncp-activation\n\n  ## NCP USER FOR AUTHENTICATION\n  id -u \"$WEBADMIN\" &>/dev/null || useradd --home-dir /nonexistent \"$WEBADMIN\"\n  echo -e \"$WEBPASSWD\\n$WEBPASSWD\" | passwd \"$WEBADMIN\"\n  is_docker || is_lxc || {\n    chsh -s /usr/sbin/nologin \"$WEBADMIN\"\n    passwd -l root\n  }\n\n  ## NCP LAUNCHER\n  mkdir -p /home/www\n  chown www-data:www-data /home/www\n  chmod 700 /home/www\n\n  cat > /home/www/ncp-launcher.sh <<'EOF'\n#!/bin/bash\ngrep -q '[\\\\&#;`|*?~<>^()[{}$&[:space:]]' <<< \"$*\" && exit 1\nsource /usr/local/etc/library.sh\nrun_app $1\nEOF\n  chmod 700 /home/www/ncp-launcher.sh\n\n  cat > /home/www/ncp-backup-launcher.sh <<'EOF'\n#!/bin/bash\naction=\"${1}\"\nfile=\"${2}\"\ncompressed=\"${3}\"\ngrep -q '[\\\\&#;`|*?~<>^()[{}$&]' <<< \"$*\" && exit 1\n[[ \"$file\" =~ \"..\" ]] && exit 1\n[[ \"${action}\" == \"chksnp\" ]] && {\n  btrfs subvolume show \"$file\" &>/dev/null || exit 1\n  exit\n}\n[[ \"${action}\" == \"delsnp\" ]] && {\n  btrfs subvolume delete \"$file\" || exit 1\n  exit\n}\n[[ -f \"$file\" ]] || exit 1\n[[ \"$file\" =~ \".tar\" ]] || exit 1\n[[ \"${action}\" == \"del\" ]] && {\n  [[ \"$(file \"$file\")\" =~ \"tar archive\" ]] || [[ \"$(file \"$file\")\" =~ \"gzip compressed data\" ]] || exit 1\n  rm \"$file\" || exit 1\n  exit\n}\n[[ \"$compressed\" != \"\" ]] && pigz=\"-I pigz\"\ntar $pigz -tf \"$file\" data &>/dev/null\nEOF\n  chmod 700 /home/www/ncp-backup-launcher.sh\n\n  cat > /home/www/ncp-app-bridge.sh <<'EOF'\n#!/bin/bash\nset -e\ngrep -q '[\\\\&#;`|*?~<>^()[{}$&]' <<< \"$*\" && exit 1\naction=\"${1?}\"\n[[ \"$action\" == \"config\" ]] && {\n  config_type=\"${2?}\"\n  arg=\"${3}\"\n\n  [[ -z \"$arg\" ]] || {\n    key=\"${arg%=*}\"\n    val=\"${arg#*=}\"\n  }\n\n  if [[ \"$config_type\" == \"ncp\" ]]\n  then\n    config_path=\"/usr/local/etc/ncp.cfg\"\n  elif [[ \"$config_type\" == \"ncp-community\" ]]\n  then\n    . /usr/local/etc/library.sh\n    [[ -z \"${key}\" ]] || {\n      set_app_param ncp-community.sh \"${key}\" \"${val}\"\n    }\n    get_app_params ncp-community.sh\n    exit $?\n  else\n    echo \"ERROR: Invalid config name '${config_type}'\" >&2\n    exit 1\n  fi\n\n  [[ -z \"${key}\" ]] || {\n    cfg=\"$(jq \".${key} = \\\"${val}\\\"\" <\"$config_path\")\"\n    echo \"$cfg\" > \"$config_path\"\n  }\n  cat \"$config_path\"\n  exit 0\n}\n\n[[ \"$action\" == \"file\" ]] && {\n  file=\"${2?}\"\n  if [[ \"$file\" == \"ncp-version\" ]]\n  then\n    cat /usr/local/etc/ncp-version\n  else\n    echo \"ERROR: Invalid file '${file}'\" >&2\n    exit 1\n  fi\n  exit 0\n}\nEOF\n  chmod 700 /home/www/ncp-app-bridge.sh\n  echo \"www-data ALL = NOPASSWD: /home/www/ncp-launcher.sh , /home/www/ncp-backup-launcher.sh, /home/www/ncp-app-bridge.sh, /sbin/halt, /sbin/reboot\" >> /etc/sudoers\n\n  # NCP AUTO TRUSTED DOMAIN\n  mkdir -p /usr/lib/systemd/system\n  cat > /usr/lib/systemd/system/nextcloud-domain.service <<'EOF'\n[Unit]\nDescription=Register Current IP as Nextcloud trusted domain\nRequires=network.target\nAfter=mysql.service redis.service\n\n[Service]\nExecStart=/bin/bash /usr/local/bin/nextcloud-domain.sh\nRestart=on-failure\nRestartSec=5s\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n  [[ \"$DOCKERBUILD\" != 1 ]] && systemctl enable nextcloud-domain\n\n  # NEXTCLOUDPI UPDATES\n  cat > /etc/cron.daily/ncp-check-version <<EOF\n#!/bin/sh\n/usr/local/bin/ncp-check-version\nEOF\n  chmod a+x /etc/cron.daily/ncp-check-version\n  touch               /var/run/.ncp-latest-version\n  chown root:www-data /var/run/.ncp-latest-version\n  chmod g+w           /var/run/.ncp-latest-version\n\n  # Install all ncp-apps\n  ALLOW_UPDATE_SCRIPT=1 bin/ncp-update \"$BRANCH\" || exit $?\n\n  # LIMIT LOG SIZE\n  grep -q maxsize /etc/logrotate.d/apache2 || sed -i /weekly/amaxsize2M /etc/logrotate.d/apache2\n  cat > /etc/logrotate.d/ncp <<'EOF'\n/var/log/ncp.log\n{\n        rotate 4\n        size 500K\n        missingok\n        notifempty\n        compress\n}\nEOF\n  chmod 0444 /etc/logrotate.d/ncp\n\n  # ONLY FOR IMAGE BUILDS\n  if [[ -f /.ncp-image ]]; then\n    rm -rf /var/log/ncp.log\n\n    ## NEXTCLOUDPI MOTD\n    rm -rf /etc/update-motd.d\n    mkdir /etc/update-motd.d\n    rm /etc/motd\n    ln -s /var/run/motd /etc/motd\n\n    cat > /etc/update-motd.d/10logo <<EOF\n#!/bin/sh\necho\ncat /usr/local/etc/ncp-ascii.txt\nEOF\n\n    cat > /etc/update-motd.d/20updates <<'EOF'\n#!/bin/bash\n/usr/local/bin/ncp-check-updates\nEOF\n\n    echo '\nNCP is not activated yet. Please enter https://nextcloudpi.local or this instance'\"'\"'s local IP address in your webbrowser to complete activation. You can find detailed instructions at https://nextcloudpi.com/activate\n' >> /etc/issue\n    chmod a+x /etc/update-motd.d/*\n\n    ## HOSTNAME AND mDNS\n    [[ -f /.docker-image ]] || {\n      $APTINSTALL avahi-daemon\n      sed -i '/^127.0.1.1/d'           /etc/hosts\n      sed -i \"\\$a127.0.1.1 nextcloudpi $(hostname)\" /etc/hosts\n    }\n    echo nextcloudpi > /etc/hostname\n\n    ## tag image\n    is_docker && local DOCKER_TAG=\"_docker\"\n    is_lxc && local DOCKER_TAG=\"_lxc\"\n    echo \"NextcloudPi${DOCKER_TAG}_$( date  \"+%m-%d-%y\" )\" > /usr/local/etc/ncp-baseimage\n\n    ## SSH hardening\n    if [[ -f /etc/ssh/sshd_config ]]; then\n      sed -i 's|^#AllowTcpForwarding .*|AllowTcpForwarding no|'     /etc/ssh/sshd_config\n      sed -i 's|^#ClientAliveCountMax .*|ClientAliveCountMax 2|'    /etc/ssh/sshd_config\n      sed -i 's|^MaxAuthTries .*|MaxAuthTries 1|'                   /etc/ssh/sshd_config\n      sed -i 's|^#MaxSessions .*|MaxSessions 2|'                    /etc/ssh/sshd_config\n      sed -i 's|^#TCPKeepAlive .*|TCPKeepAlive no|'                 /etc/ssh/sshd_config\n      sed -i 's|^X11Forwarding .*|X11Forwarding no|'                /etc/ssh/sshd_config\n      sed -i 's|^#LogLevel .*|LogLevel VERBOSE|'                    /etc/ssh/sshd_config\n      sed -i 's|^#Compression .*|Compression no|'                   /etc/ssh/sshd_config\n      sed -i 's|^#AllowAgentForwarding .*|AllowAgentForwarding no|' /etc/ssh/sshd_config\n    fi\n\n    ## kernel hardening\n    cat >> /etc/sysctl.conf <<EOF\nfs.protected_hardlinks=1\nfs.protected_symlinks=1\nkernel.core_uses_pid=1\nkernel.dmesg_restrict=1\nkernel.kptr_restrict=2\nkernel.sysrq=0\nnet.ipv4.conf.all.accept_redirects=0\nnet.ipv4.conf.all.log_martians=1\nnet.ipv4.conf.all.rp_filter=1\nnet.ipv4.conf.all.send_redirects=0\nnet.ipv4.conf.default.accept_redirects=0\nnet.ipv4.conf.default.accept_source_route=0\nnet.ipv4.conf.default.log_martians=1\nnet.ipv4.tcp_timestamps=0\nnet.ipv6.conf.all.accept_redirects=0\nnet.ipv6.conf.default.accept_redirects=0\nEOF\n\n    ## other tweaks\n    sed -i \"s|^UMASK.*|UMASK           027|\" /etc/login.defs\n  fi\n}\n\nconfigure() { :; }\n\n\n# License\n#\n# This script is free software; you can redistribute it and/or modify it\n# under the terms of the GNU General Public License as published by\n# the Free Software Foundation; either version 2 of the License, or\n# (at your option) any later version.\n#\n# This script is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this script; if not, write to the\n# Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n# Boston, MA  02111-1307  USA\n"
        },
        {
          "name": "post-inst.sh",
          "type": "blob",
          "size": 1.552734375,
          "content": "#!/bin/bash\n\n# Cleanup step NCP image\n#\n# Copyleft 2017 by Ignacio Nunez Hernanz <nacho _a_t_ ownyourbits _d_o_t_ com>\n# GPL licensed (see end of file) * Use at your own risk!\n#\n# More at nextcloudpi.com\n#\n\nconfigure()\n{\n(\n  set +e\n\n  # stop services\n  pkill -x redis-server\n  [[ -f /run/mysqld/mysqld.pid ]] && mysqladmin -u root shutdown\n  [[ -f /run/crond.pid ]]     && kill \"$(cat /run/crond.pid)\"\n  pkill -f php-fpm\n  pkill -f notify_push\n  killall postdrop\n  killall sendmail\n\n  [[ -f /usr/local/etc/ncp-config.d/SSH.cfg ]] && systemctl disable ssh\n\n  # cleanup all NCP extras\n  find /usr/local/bin/ncp -name '*.sh' | \\\n    while read script; do cleanup_script $script; done\n\n  # clean packages and installation logs\n  apt-get autoremove -y\n  apt-get clean\n  rm /var/lib/apt/lists/* -r\n  find /var/log -type f -exec rm {} \\;\n\n  # clean build flags\n  rm -f /.ncp-image\n)\n}\n\n# License\n#\n# This script is free software; you can redistribute it and/or modify it\n# under the terms of the GNU General Public License as published by\n# the Free Software Foundation; either version 2 of the License, or\n# (at your option) any later version.\n#\n# This script is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this script; if not, write to the\n# Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n# Boston, MA  02111-1307  USA\n"
        },
        {
          "name": "run_update_history.sh",
          "type": "blob",
          "size": 3.7314453125,
          "content": "#!/bin/bash\n\n# Backward updates mechanism\n\nset -e\n\nsource /usr/local/etc/library.sh\n\n# Updates folder contains the \"history\" of updates\nupdates_dir=\"$1\"\n[ -d \"$updates_dir\" ] || { echo \"$updates_dir does not exist. Abort\" >&2; exit 1; }\n\n# Get the array of updates dir\n# The files in updates dir are sorted by tag number\n# Files names follow the syntax of a tag: x.y.z.sh\nwhile read line ; do\n  updates_list+=(\"$line\")\ndone < <( ls -1 \"$updates_dir\" | sort -V)\n\nstarting_checkpoint=0\nlen=${#updates_list[@]}\nend_of_list=$((len - 1))\n\n# The latest checkpoint is the newer version in updates dir\nlatest_checkpoint=${updates_list[$end_of_list]}\nlatest_checkpoint_version=$( basename \"$latest_checkpoint\" .sh )\nif [[ -f /usr/local/etc/ncp-version ]]; then\n  current_version=$( grep -oP \"\\d+\\.\\d+\\.\\d+\" /usr/local/etc/ncp-version | cut -d'v' -f1 )\nelse\n  current_version=\"v0.0.0\"\nfi\n\n# Compare current version with latest checkpoint\n# If the current version is more recent than the latest checkpoint there is no need for backward updates\n\nif is_more_recent_than \"$latest_checkpoint_version\" \"$current_version\" ; then\n\n  # Execute a series of updates of older versions\n\n  # Binary search to find the right checkpoint to begin the updates\n  # Checkpoints are considered the updates files\n  # An update file will update the system to the version it has as a tag\n  # <tag>.sh will update ncp to <tag> version\n\n  # An update is *applicable* when it is more recent than the current version\n  # An older update/checkpoint is not *applicable* to our system\n\n  lower_bound=0\n  upper_bound=$end_of_list\n  while [ $lower_bound -le $upper_bound ]; do\n    x=$((upper_bound + lower_bound))\n    mid=$((x / 2))\n\n    #Compare mid's version with current version\n\n    mid_version=$( basename ${updates_list[$mid]} .sh )\n\n    if is_more_recent_than \"$mid_version\" \"$current_version\" ; then \n      # Mid's version update is applicable to the current version\n      # Check if the previous checkpoint (mid-1) is applicable\n\n      previous=$((mid - 1))\n      previous_version=$( basename ${updates_list[$previous]} .sh )\n      if [ \"$mid\" -gt 0 ] ; then\n        #Compare previous's version with current version\n\t# If the previous checkpoint is not applicable then mid is the starting checkpoint\n\t# Otherwise keep on binary searching\n\tif is_more_recent_than \"$current_version\" \"$previous_version\" ; then\n          starting_checkpoint=$mid\n\t  break\n\tfi\n      else\n        # mid is at 0, so this is the starting checkpoint\n\tstarting_checkpoint=$mid\n\tbreak\n      fi\n      # Continue searching for starting checkpoint\n      upper_bound=$((mid - 1))\n\n    else\n      # Mid's version update is not applicable to the current version\n      # Check if the next checkpoint (mid+1) is applicable\n\n      next=$((mid + 1))\n      next_version=$( basename ${updates_list[$next]} .sh )\n\n      #Compare next's version with current version\n      # If next checkpoint is not applicable then next is the starting checkpoint\n      # Otherwise keep on binary searching\n      if is_more_recent_than \"$current_version\" \"$next_version\" ; then\n        # Continue searching for starting checkpoint\n\tlower_bound=$((mid + 1))\n      else\n        # The next version is the starting checkpoint\n\tstarting_checkpoint=$next\n\tbreak\n      fi\n    fi\n  done\n\n  # Starting checkpoint has been found so update the system for the rest updates\n\n  for(( i=\"$starting_checkpoint\"; i<=\"$end_of_list\"; i++)); do\n    update_file=${updates_list[$i]}\n    tag_update=$( basename \"$update_file\" .sh )\n    bash \"$updates_dir/$update_file\" || {\n      echo \"Error while applying update $(basename \"$update_file\" .sh). Exiting...\"\n      exit 1\n    }\n    echo \"v$tag_update\" > /usr/local/etc/ncp-version\n    [[ $i != $end_of_list ]] && echo -e \"NextcloudPi updated to version v$tag_update\" || true\n  done\nfi\n\n"
        },
        {
          "name": "staged_rollouts",
          "type": "tree",
          "content": null
        },
        {
          "name": "tag_and_push.sh",
          "type": "blob",
          "size": 1.2001953125,
          "content": "#!/bin/bash\n\n# Tag current commit, generate changelog and push to current branch\n#\n# Copyleft 2018 by Ignacio Nunez Hernanz <nacho _a_t_ ownyourbits _d_o_t_ com>\n# GPL licensed (see end of file) * Use at your own risk!\n#\n# Usage:\n#\n#  To install to an image using QEMU\n#\n#      ./tag_and_push.sh <tag>\n#\n# More at: https://ownyourbits.com\n#\n\nset -e\n\nTAG=\"$*\"\n \nsource build/buildlib.sh\ngit tag -f \"$TAG\"\ngenerate_changelog\ngit add changelog.md\ngit commit -C HEAD --amend\ngit tag -f \"$TAG\"\ngit push origin HEAD --tags\n\n# License\n#\n# This script is free software; you can redistribute it and/or modify it\n# under the terms of the GNU General Public License as published by\n# the Free Software Foundation; either version 2 of the License, or\n# (at your option) any later version.\n#\n# This script is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this script; if not, write to the\n# Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n# Boston, MA  02111-1307  USA\n"
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "update.sh",
          "type": "blob",
          "size": 6.734375,
          "content": "#!/bin/bash\n\n# Updater for NextcloudPi\n#\n# Copyleft 2017 by Ignacio Nunez Hernanz <nacho _a_t_ ownyourbits _d_o_t_ com>\n# GPL licensed (see end of file) * Use at your own risk!\n#\n# More at https://ownyourbits.com/\n#\n\nsource /usr/local/etc/library.sh\n\nset -e$DBG\n\n\nif is_docker\nthen\n  echo \"WARNING: Docker images should be updated by replacing the container from the latest docker image\" \\\n    \"(refer to the documentation for instructions: https://docs.nextcloudpi.com).\" \\\n    \"If you are sure that you know what you are doing, you can still execute the update script by running it like this:\"\n  echo \"> ALLOW_UPDATE_SCRIPT=1 ncp-update\"\n  [[ \"$ALLOW_UPDATE_SCRIPT\" == \"1\" ]] || exit 1\nfi\n\nCONFDIR=/usr/local/etc/ncp-config.d\nUPDATESDIR=updates\n\n# don't make sense in containers\nEXCL_CONTAINER=\"\nnc-automount\nnc-format-USB\nnc-ramlogs\nnc-swapfile\nnc-static-IP\nnc-wifi\nnc-snapshot\nnc-snapshot-auto\nnc-snapshot-sync\nnc-restore-snapshot\nnc-hdd-monitor\nnc-hdd-test\nnc-zram\nNFS\n\"\n\n# don't make sense in a docker container\nEXCL_DOCKER=\"\n$EXCL_CONTAINER\nnc-autoupdate-ncp\nnc-update\nnc-datadir\nnc-database\nUFW\nnc-audit\nSSH\nfail2ban\nnc-nextcloud\nnc-init\nsamba\n\"\n\n\n# check running apt or apt-get\npgrep -x \"apt|apt-get\" &>/dev/null && { echo \"apt is currently running. Try again later\";  exit 1; }\n\ncp etc/library.sh /usr/local/etc/\n\nsource /usr/local/etc/library.sh\n\nmkdir -p \"$CONFDIR\"\n\n# prevent installing some ncp-apps in the containerized versions\n\nEXCL_APPS=\"\"\nis_docker && EXCL_APPS=\"$EXCL_DOCKER\"\nis_lxc && EXCL_APPS=\"$EXCL_CONTAINER\"\n\nfor opt in $EXCL_APPS; do\n  touch $CONFDIR/$opt.cfg\ndone\n\n# copy all files in bin and etc\ncp -r bin/* /usr/local/bin/\nfind etc -maxdepth 1 -type f ! -path etc/ncp.cfg -exec cp '{}' /usr/local/etc \\;\ncp -n etc/ncp.cfg /usr/local/etc\ncp -r etc/ncp-templates /usr/local/etc/\n\n# install new entries of ncp-config and update others\nfor file in etc/ncp-config.d/*; do\n  [ -f \"$file\" ] || continue;    # skip dirs\n\n  # install new ncp_apps\n  [ -f /usr/local/\"$file\" ] || {\n    install_app \"$(basename \"$file\" .cfg)\"\n  }\n\n  # keep saved cfg values\n  [ -f /usr/local/\"$file\" ] && {\n    len=\"$(jq '.params | length' /usr/local/\"$file\")\"\n    for (( i = 0 ; i < len ; i++ )); do\n      id=\"$(jq -r \".params[$i].id\" /usr/local/\"$file\")\"\n      val=\"$(jq -r \".params[$i].value\" /usr/local/\"$file\")\"\n\n      for (( j = 0 ; j < len ; j++ )); do\n        idnew=\"$(jq -r \".params[$j].id\" \"$file\")\"\n        [ \"$idnew\" == \"$id\" ] && {\n          cfg=\"$(jq \".params[$j].value = \\\"$val\\\"\" \"$file\")\"\n          break\n        }\n      done\n\n      echo \"$cfg\" > \"$file\"\n    done\n  }\n\n  # configure if active by default\n  [ -f /usr/local/\"$file\" ] || {\n    [[ \"$(jq -r \".params[0].id\"    \"$file\")\" == \"ACTIVE\" ]] && \\\n    [[ \"$(jq -r \".params[0].value\" \"$file\")\" == \"yes\"    ]] && {\n      cp \"$file\" /usr/local/\"$file\"\n      run_app \"$(basename \"$file\" .cfg)\"\n    }\n  }\n\n  cp \"$file\" /usr/local/\"$file\"\n\ndone\n\n# update NCVER in ncp.cfg and nc-nextcloud.cfg (for nc-autoupdate-nc and nc-update-nextcloud)\nnc_version=$(jq -r .nextcloud_version < etc/ncp.cfg)\ncfg=\"$(jq '.' /usr/local/etc/ncp.cfg)\"\ncfg=\"$(jq \".nextcloud_version = \\\"$nc_version\\\"\" <<<\"$cfg\")\"\necho \"$cfg\" > /usr/local/etc/ncp.cfg\n\ncfg=\"$(jq '.' etc/ncp-config.d/nc-nextcloud.cfg)\"\ncfg=\"$(jq \".params[0].value = \\\"$nc_version\\\"\" <<<\"$cfg\")\"\necho \"$cfg\" > /usr/local/etc/ncp-config.d/nc-nextcloud.cfg\n\n# install localization files\ncp -rT etc/ncp-config.d/l10n \"$CONFDIR\"/l10n\n\n# these files can contain sensitive information, such as passwords\nchown -R root:www-data \"$CONFDIR\"\nchmod 660 \"$CONFDIR\"/*\nchmod 750 \"$CONFDIR\"/l10n\n\n# install web interface\ncp -r ncp-web /var/www/\nchown -R www-data:www-data /var/www/ncp-web\nchmod 770                  /var/www/ncp-web\n\n# install NC app\nrm -rf /var/www/ncp-app\nmkdir -p /var/www/ncp-app\ncp -r ncp-app/{appinfo,css,img,js,lib,templates} /var/www/ncp-app/\n\n# install ncp-previewgenerator\nrm -rf /var/www/ncp-previewgenerator\ncp -r ncp-previewgenerator /var/www/\nchown -R www-data:         /var/www/ncp-previewgenerator\n\n# copy NC app to nextcloud directory and enable it\nrm -rf /var/www/nextcloud/apps/nextcloudpi\ncp -r /var/www/ncp-app /var/www/nextcloud/apps/nextcloudpi\nchown -R www-data:     /var/www/nextcloud/apps/nextcloudpi\n\n# remove unwanted ncp-apps for containerized versions\nif is_docker || is_lxc; then\n  for opt in $EXCL_APPS; do\n    rm $CONFDIR/$opt.cfg\n    find /usr/local/bin/ncp -name \"$opt.sh\" -exec rm '{}' \\;\n  done\nfi\n\n# update services for docker\nif is_docker; then\n  cp build/docker/{lamp/010lamp,nextcloud/020nextcloud,nextcloudpi/000ncp} /etc/services-enabled.d\nfi\n\n# only live updates from here\n[[ -f /.ncp-image ]] && exit 0\n\n# update old images\n./run_update_history.sh \"$UPDATESDIR\"\n\n# update to the latest NC version\nis_active_app nc-autoupdate-nc && run_app nc-autoupdate-nc\n\nstart_notify_push\n\n# Refresh ncp config values\nsource /usr/local/etc/library.sh\n\n# check dist-upgrade\ncheck_distro \"$NCPCFG\" && check_distro etc/ncp.cfg || {\n  php_ver_new=$(jq -r '.php_version'   < etc/ncp.cfg)\n  release_new=$(jq -r '.release'       < etc/ncp.cfg)\n\n  cfg=\"$(jq '.' \"$NCPCFG\")\"\n  cfg=\"$(jq '.php_version   = \"'$php_ver_new'\"' <<<\"$cfg\")\"\n  cfg=\"$(jq '.release       = \"'$release_new'\"' <<<\"$cfg\")\"\n  echo \"$cfg\" > /usr/local/etc/ncp-recommended.cfg\n\n  msg=\"Update to $release_new available. Type 'sudo ncp-dist-upgrade' to upgrade\"\n  echo \"${msg}\"\n  notify_admin \"New distribution available\" \"${msg}\"\n  wall \"${msg}\"\n  cat > /etc/update-motd.d/30ncp-dist-upgrade <<EOF\n#!/bin/bash\nnew_cfg=/usr/local/etc/ncp-recommended.cfg\n[[ -f \"\\${new_cfg}\" ]] || exit 0\necho -e \"${msg}\"\nEOF\nchmod +x /etc/update-motd.d/30ncp-dist-upgrade\n}\n\n# Remove redundant opcache configuration.\n# Related to https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=815968\n# Bug #416 reappeared after we moved to php7.3 and debian buster packages.\n[[ \"$( ls -l /etc/php/\"${PHPVER}\"/fpm/conf.d/*-opcache.ini 2> /dev/null |  wc -l )\" -gt 1 ]] && rm \"$( ls /etc/php/\"${PHPVER}\"/fpm/conf.d/*-opcache.ini | tail -1 )\"\n[[ \"$( ls -l /etc/php/\"${PHPVER}\"/cli/conf.d/*-opcache.ini 2> /dev/null |  wc -l )\" -gt 1 ]] && rm \"$( ls /etc/php/\"${PHPVER}\"/cli/conf.d/*-opcache.ini | tail -1 )\"\n\nexit 0\n\n# License\n#\n# This script is free software; you can redistribute it and/or modify it\n# under the terms of the GNU General Public License as published by\n# the Free Software Foundation; either version 2 of the License, or\n# (at your option) any later version.\n#\n# This script is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this script; if not, write to the\n# Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n# Boston, MA  02111-1307  USA\n"
        },
        {
          "name": "updates",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}