{
  "metadata": {
    "timestamp": 1736568325076,
    "page": 249,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjI1MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "monlor/docker-xiaoya",
      "stars": 2454,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 0.75390625,
          "content": "Creative Commons Attribution-NonCommercial 4.0 International\n\nYou are free to:\n\n- Share â€” copy and redistribute the material in any medium or format\n- Adapt â€” remix, transform, and build upon the material\n\nUnder the following terms:\n\n- Attribution â€” You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.\n- NonCommercial â€” You may not use the material for commercial purposes.\n\nNo additional restrictions â€” You may not apply legal terms or technological measures that legally restrict others from doing anything the license permits.\n\nFor more details, visit https://creativecommons.org/licenses/by-nc/4.0/"
        },
        {
          "name": "Questions.md",
          "type": "blob",
          "size": 0.634765625,
          "content": "### å¸¸è§é—®é¢˜\n\n#### è·å–file idå¤±è´¥\n\n1. è¯·æ£€æŸ¥ä½ çš„é˜¿é‡Œäº‘ç›˜tokenï¼Œopentokenå’Œfolderidé…ç½®æ˜¯å¦æ­£ç¡®ï¼Œ\n2. é˜¿é‡Œäº‘ç›˜ç©ºé—´æ˜¯å¦é¥±å’Œï¼Œ\n3. å¤šæ¬¡å°è¯•æ›´æ¢tokenå’Œopentokenã€‚\n\n#### è®¿é—®502\n\næ£€æŸ¥æ—¥å¿—ï¼ŒæŸ¥çœ‹æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨\n\n#### æ€ä¹ˆæ›´æ–°æœåŠ¡ï¼Œæ€ä¹ˆä¿®æ”¹é˜¿é‡Œäº‘ç›˜å’Œå¤¸å…‹äº‘ç›˜é…ç½®ï¼Ÿ\n\né‡æ–°æ‰§è¡Œå®‰è£…è„šæœ¬å¯ä»¥æ›´æ–°æœåŠ¡é…ç½®\n\n#### æ˜¯å¦å¯ä»¥æ›´æ–°å°é›…çš„é•œåƒï¼Ÿ\n\n1. ä¸€èˆ¬æƒ…å†µä¸‹æ²¡æœ‰å¿…è¦åŒæ­¥æ›´æ–°å°é›…çš„é•œåƒï¼Œé™¤éæœ‰æ–°åŠŸèƒ½ä¸Šçš„å˜åŠ¨ï¼Œè¿™ç§æƒ…å†µä¸‹ç»™æˆ‘æfeatureï¼Œæˆ‘ä¼šåŒæ­¥æ›´æ–°\n2. å°é›…çš„alistæ•°æ®ä¼šæ¯å¤©è‡ªåŠ¨æ›´æ–°ï¼Œä¸éœ€è¦æ›´æ–°é•œåƒ"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 8.658203125,
          "content": "![docker-xiaoya](https://socialify.git.ci/monlor/docker-xiaoya/image?description=0&font=Rokkitt&forks=1&issues=1&language=1&logo=https%3A%2F%2Fcdn.monlor.com%2F2024%2F6%2F4%2F2024-06-04%252017.30.47.jpeg&name=1&owner=1&pattern=Circuit%20Board&pulls=1&stargazers=1&theme=Auto)\n\n<div align=\"center\">\n<h2>å°é›…å…¨å®¶æ¡¶éƒ¨ç½²</h2>\n<p><em>ä½¿ç”¨ Docker Compose ä¸€é”®éƒ¨ç½² Alist + Emby + Jellyfin</em></p>\n</div>\n\n<p align=\"center\">\n<a href=\"https://github.com/monlor/docker-xiaoya/actions/workflows/docker-build.yml\"><img src=\"https://github.com/monlor/docker-xiaoya/actions/workflows/docker-build.yml/badge.svg\" alt=\"Build Status\"></a> \n<a><img src=\"https://img.shields.io/github/repo-size/monlor/docker-xiaoya.svg?style=flat\" alt=\"repo size\"></a> \n<a href=\"https://github.com/monlor/docker-xiaoya/releases/latest\"><img src=\"https://img.shields.io/github/v/release/monlor/docker-xiaoya\" alt=\"GitHub release (latest by date)\"></a> \n<a href=\"https://github.com/monlor/docker-xiaoya/graphs/contributors\"><img src=\"https://img.shields.io/badge/Contributors-6-orange.svg\" alt=\"All Contributors\"></a> \n<a href=\"https://buymeacoffee.com/monlor\"><img src=\"https://img.shields.io/badge/Buy%20me%20a%20coffee-048754?logo=buymeacoffee\" alt=\"buymeacoffee\"></a>\n</p>\n\n## åŠŸèƒ½ç‰¹æ€§\n\n![](https://cdn.monlor.com/2024/6/4/SCR-20240603-kpvb.jpeg)\n\nğŸš€ ä½¿ç”¨ Docker Compose ä¸€é”®éƒ¨ç½²æœåŠ¡ï¼Œå…¼å®¹ç¾¤æ™–ï¼ŒLinuxï¼ŒWindowsï¼ŒMacï¼ŒåŒ…å«æ‰€æœ‰X86å’ŒArmæ¶æ„\n\nâœ¨ éƒ¨ç½²alist+ä¸‹è½½å…ƒæ•°æ®+éƒ¨ç½²emby/jellyfinæœåŠ¡å…¨æµç¨‹è‡ªåŠ¨ï¼Œæ— éœ€äººå·¥å¹²é¢„\n\n* æ‰€æœ‰è„šæœ¬é›†æˆåˆ° Docker é•œåƒï¼Œé¿å…æ±¡æŸ“ç³»ç»Ÿç¯å¢ƒ\n* åˆå¹¶jellyfinå’Œembyçš„x86å’Œarmé•œåƒï¼Œéƒ¨ç½²æ—¶æ— éœ€åŒºåˆ†é•œåƒå\n* è‡ªåŠ¨æ¸…ç†é˜¿é‡Œäº‘ç›˜ï¼Œé»˜è®¤æ¯10åˆ†é’Ÿä¸€æ¬¡\n* è‡ªåŠ¨æ›´æ–°å°é›…alistä¸­çš„äº‘ç›˜æ•°æ®ï¼Œé»˜è®¤æ¯å¤©ä¸€æ¬¡\n* è‡ªåŠ¨æ›´æ–°embyæœåŠ¡é…ç½®ï¼Œé»˜è®¤æ¯å‘¨ä¸€æ¬¡\n* è‡ªåŠ¨æ›´æ–°embyåª’ä½“æ•°æ®ï¼Œé»˜è®¤æ¯å¤©ä¸€æ¬¡\n* æ”¯æŒå°é›…å¤¸å…‹ç½‘ç›˜èµ„æºï¼ŒæŒ‚è½½è‡ªå®šä¹‰å¤¸å…‹ç½‘ç›˜èµ„æº\n* æ”¯æŒå°é›…PikPakç½‘ç›˜èµ„æºï¼ŒæŒ‚è½½è‡ªå®šä¹‰PikPakèµ„æº\n* æ”¯æŒå°é›…é˜¿é‡Œäº‘ç›˜èµ„æºï¼ŒæŒ‚è½½è‡ªå®šä¹‰é˜¿é‡Œäº‘ç›˜èµ„æº\n* æ”¯æŒWebDavï¼ŒTvBoxæœåŠ¡\n* [Beta]é€‚é…Armv7è®¾å¤‡ï¼ŒåŒ…æ‹¬alist, embyå’Œjellyfin\n\n## æé—®è§„åˆ™\n\n1. æBUGå’Œéœ€æ±‚ï¼Œåœ¨ [Issues](https://github.com/monlor/docker-xiaoya/issues) é‡Œæ\n2. ç›¸å…³é—®é¢˜è®¨è®ºæˆ–å…¶ä»–å†…å®¹ï¼Œåœ¨ [Discussions](https://github.com/monlor/docker-xiaoya/discussions) é‡Œæ\n\n## ä¸€é”®éƒ¨ç½²\n\n### éƒ¨ç½²æˆ–æ›´æ–°è„šæœ¬\n\n> è„šæœ¬æ”¯æŒé‡å¤æ‰§è¡Œï¼Œæ¯å¤©è‡ªåŠ¨åŒæ­¥æœ€æ–°é•œåƒï¼ˆä¸éœ€è¦åŒæ­¥è¯·é€‰æ‹©ä¸‹é¢çš„ç¨³å®šç‰ˆæœ¬ï¼‰\n\n```bash\nexport VERSION=main && bash -c \"$(curl -fsSL ${GH_PROXY}https://raw.githubusercontent.com/monlor/docker-xiaoya/${VERSION:-main}/install.sh)\"\n```\n\n**ä½¿ç”¨åŠ é€Ÿæº**\n\n```bash\nexport VERSION=main GH_PROXY=https://gh.monlor.com/ IMAGE_PROXY=ghcr.monlor.com && bash -c \"$(curl -fsSL ${GH_PROXY}https://raw.githubusercontent.com/monlor/docker-xiaoya/${VERSION:-main}/install.sh)\"\n```\n\n**ç¯å¢ƒä¿¡æ¯**\n\n| ç±»å‹  | åœ°å€ | é»˜è®¤ç”¨æˆ·å¯†ç  |\n| --- | --- | --- |\n| alist | http://ip:5678 | - |\n| webdav | http://ip:5678/dav | guest/guest_Api789 |\n| tvbox | http://ip:5678/tvbox/my_ext.json | - |\n| emby | http://ip:2345 | xiaoya/1234 |\n| jellyfin | http://ip:2346 | ailg/5678 |\n\n### å¸è½½è„šæœ¬\n\n```bash\nbash -c \"$(curl -fsSL https://raw.githubusercontent.com/monlor/docker-xiaoya/main/uninstall.sh)\"\n```\n\n**ä½¿ç”¨åŠ é€Ÿæº**\n\n```bash\nexport GH_PROXY=https://gh.monlor.com/ IMAGE_PROXY=ghcr.monlor.com && bash -c \"$(curl -fsSL ${GH_PROXY}https://raw.githubusercontent.com/monlor/docker-xiaoya/main/uninstall.sh)\"\n```\n\n### è‡ªå®šä¹‰é…ç½®\n\nã€**éå¿…é¡»ï¼Œå°ç™½è·³è¿‡è¿™ä¸€æ­¥**ã€‘è„šæœ¬æ²¡æœ‰è®¡åˆ’æ”¯æŒç¡¬è§£ï¼Œåœ¨æˆ‘çœ‹æ¥è¿™ä¸ªåŠŸèƒ½æ²¡æœ‰å¿…è¦ã€‚å¦‚æœä½ éœ€è¦ä¿®æ”¹ç¡¬è§£ï¼Œç«¯å£ï¼Œæ•°æ®ç›®å½•ï¼Œç¯å¢ƒå˜é‡ï¼Œè¯·è‡ªè¡Œä¿®æ”¹docker-compose.ymlå’Œenvæ–‡ä»¶ï¼Œä¿®æ”¹å®Œæˆåæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½¿é…ç½®ç”Ÿæ•ˆã€‚**ä¿®æ”¹åæ³¨æ„**ï¼šæ‰§è¡Œæ›´æ–°è„šæœ¬ä¼šè¦†ç›–docker-compose.ymlï¼Œä¸ä¼šè¦†ç›–envæ–‡ä»¶ã€‚\n\n```bash\ncd ä½ çš„å®‰è£…ç›®å½•\ndocker-compose up --remove-orphans -d\n```\n\n### ç¨³å®šç‰ˆ\n\n> release ç‰ˆæœ¬\n\n```bash\nbash -c \"$(curl -fsSL https://raw.githubusercontent.com/monlor/docker-xiaoya/main/install.sh)\"\n```\n\n## éƒ¨ç½²é…ç½®æ¨è\n\n| éƒ¨ç½²æ–¹æ¡ˆ          | CPU      | å†…å­˜      | ç¡¬ç›˜      |\n| ----------------- | -------- | --------- | --------- |\n| Alist + Emby      | 2æ ¸   | 4G    | 140G  |\n| ä»…éƒ¨ç½² Alist      | 1æ ¸   | 512M  | 512M  |\n| Alist + Emby + Jellyfin      | 4æ ¸   | 8G    | 300G  |\n| Alist + Jellyfin      | 4æ ¸   | 8G    | 155G  |\n\n## é…ç½®ç¤ºä¾‹\n\n* [åªéƒ¨ç½²å°é›…alist](/docker-compose-alist.yml)\n* [éƒ¨ç½²å°é›…alist+emby](/docker-compose.yml)\n* [éƒ¨ç½²å°é›…alist+jellyfin](/docker-compose-jellyfin.yml)\n* [éƒ¨ç½²å°é›…alist+emby+jellyfin](/docker-compose-all.yml)\n\n## æœåŠ¡ç»„ä»¶ä»‹ç»\n\n* [Alist](/alist): æä¾›èµ„æºåœ¨çº¿æ’­æ”¾ï¼ŒWebDavæœåŠ¡\n* [Metadata](/metadata): Embyå’ŒJellyfinçš„å…ƒæ•°æ®ç®¡ç†\n* [Emby](/emby): ç”¨å®¶åº­å½±è§†åº“çš„æ–¹å¼ï¼Œå¯è§†åŒ–å±•ç¤ºAlistä¸­çš„èµ„æº\n* [Jellyfin](/jellyfin): Embyçš„å¼€æºç‰ˆæœ¬ï¼ŒåŠŸèƒ½æ˜¯ä¸€æ ·çš„\n\n## æ‰‹åŠ¨éƒ¨ç½²\n\nä»…å±•ç¤ºå°é›…alist+embyçš„éƒ¨ç½²æ–¹å¼\n\n### ä½¿ç”¨Docker Compose\n\n1. åˆ›å»ºcomposeæ–‡ä»¶å¤¹\n\n```bash\nmkdir /opt/xiaoya\ncd /opt/xiaoya\n```\n\n2. ä¸‹è½½é…ç½®\n\n```bash\ncurl -#LO https://raw.githubusercontent.com/monlor/docker-xiaoya/main/docker-compose.yml\ncurl -#LO https://raw.githubusercontent.com/monlor/docker-xiaoya/main/env\n```\n\n3. ä¿®æ”¹é…ç½®envé‡Œé¢çš„é˜¿é‡Œäº‘ç›˜ç›¸å…³å˜é‡ï¼Œå¯åŠ¨æœåŠ¡\n\n```bash\ndocker compose up -d\n```\n\n4. æŸ¥çœ‹æ—¥å¿—\n\n```bash\ndocker compose logs\n```\n\n### éƒ¨ç½²åœ¨ Kubernetes\n\n1. å®‰è£…helm\n\n```bash\ncurl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n```\n\n2. å®‰è£…helmfile\n\n```bash\nver=0.161.0\ncurl -LO https://github.com/helmfile/helmfile/releases/download/v${ver}/helmfile_${ver}_linux_arm64.tar.gz\ntar zxvf helmfile_${ver}_linux_arm64.tar.gz -C helmfile\nmv helmfile/helmfile /usr/local/bin\nrm -rf helmfile helmfile_${ver}_linux_arm64.tar.gz\nhelm plugin install https://github.com/databus23/helm-diff\n```\n\n3. ä¸‹è½½helmfileé…ç½®\n\n```bash\ncurl -#LO https://raw.githubusercontent.com/monlor/docker-xiaoya/main/helmfile.yaml\n```\n\n4. ä¿®æ”¹helmfileçš„ç¯å¢ƒå˜é‡ï¼Œç¯å¢ƒå˜é‡å«ä¹‰çœ‹è¿™é‡Œ[alist](/alist)\n\n```yaml\nenv:\n    ...\n    WEBDAV_PASSWORD: \n    ALIYUN_TOKEN: \n    ALIYUN_OPEN_TOKEN: \n    ALIYUN_FOLDER_ID: \n    QUARK_COOKIE:\n    PAN115_COOKIE:\n    PIKPAK_USER:\n    ...\n```\n\n5. éƒ¨ç½²helmæœåŠ¡\n\n```bash\nhelmfile sync -f helmfile.yaml\n```\n\n### ä½¿ç”¨dockeréƒ¨ç½²ã€ä¸æ¨èã€‘\n\n1. åˆ›å»ºvolume\n\n```bash\ndocker volume create xiaoya\ndocker volume create media\ndocker volume create config\ndocker volume create meta\ndocker volume create cache\n```\n\n2. åˆ›å»ºç½‘ç»œ\n\n```bash\ndocker network create xiaoya\n```\n\n3. å¯åŠ¨å°é›…alistï¼Œä¿®æ”¹ä¸‹é¢çš„é˜¿é‡Œäº‘ç›˜é…ç½®ï¼Œå†æ‰§è¡Œå‘½ä»¤\n\n```bash\ndocker run -d --name alist \\\n    -v xiaoya:/data \\\n    -p 5678:5678 -p 2345:2345 -p 2346:2346 \\\n    -e TZ=Asia/Shanghai \\\n    -e ALIYUN_TOKEN=é˜¿é‡Œäº‘ç›˜TOKEN \\\n    -e ALIYUN_OPEN_TOKEN=é˜¿é‡Œäº‘ç›˜Open Token \\\n    -e ALIYUN_FOLDER_ID=é˜¿é‡Œäº‘ç›˜æ–‡ä»¶å¤¹ID \\\n    -e QUARK_COOKIE=å¤¸å…‹ç½‘ç›˜cookie \\\n    -e AUTO_UPDATE_ENABLED=true \\\n    -e AUTO_CLEAR_ENABLED=true \\\n    --network=xiaoya \\\n    ghcr.io/monlor/xiaoya-alist \n```\n\n4. å¯åŠ¨metadataç”¨äºå…ƒæ•°æ®åŒæ­¥\n\n```bash\ndocker run -d --name metadata \\\n    -e LANG=C.UTF-8 \\\n    -e EMBY_ENABLED=true \\\n    -e JELLYFIN_ENABLED=false \\\n    -e AUTO_UPDATE_EMBY_CONFIG_ENABLED=true \\\n    -v xiaoya:/etc/xiaoya \\\n    -v media:/media/xiaoya \\\n    -v config:/media/config \\\n    -v cache:/media/config/cache \\\n    -v meta:/media/temp \\\n    --network=xiaoya \\\n    ghcr.io/monlor/xiaoya-metadata\n```\n\n5. å¯åŠ¨embyæœåŠ¡\n\n```bash\ndocker run -d --name emby\n    -e TZ=Asia/Shanghai \\\n    -e GIDLIST=0 \\\n    -e ALIST_ADDR=http://alist:5678 \\\n    -v media:/media \\\n    -v config:/config \\\n    -v cache:/cache \\\n    -p 6908:6908 \\\n    --network=xiaoya \\\n    ghcr.io/monlor/xiaoya-embyserver\n```\n\n6. æŸ¥çœ‹æ—¥å¿—\n\n```\ndocker logs alist\ndocker logs metadata\ndocker logs emby\n```\n\n## å®‰å…¨å»ºè®®\n\n* å¼€å¯alistçš„ç™»é™†ï¼ŒalistæœåŠ¡è®¾ç½®webdavçš„å¯†ç `WEBDAV_PASSWORD`\n* åœ¨embyæ§åˆ¶å°ä¿®æ”¹ApiKeyï¼Œè¿™ä¸ªkeyéœ€è¦é…ç½®åˆ°metadataå’ŒalistæœåŠ¡ï¼Œå˜é‡åï¼š`EMBY_APIKEY`\n\n## èµåŠ©\n\n<a href=\"https://www.buymeacoffee.com/monlor\" target=\"_blank\"><img src=\"https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png\" alt=\"Buy Me A Coffee\" style=\"height: 60px !important;width: 217px !important;\" ></a>\n\n## License\n\nThis project is licensed under the [Creative Commons Attribution-NonCommercial 4.0 International License](https://creativecommons.org/licenses/by-nc/4.0/).\n\n## å‚è€ƒ\n\nhttps://github.com/DDS-Derek/xiaoya-alist\n\nhttps://www.kdocs.cn/l/cvEe3cv6dGkH\n\nhttps://xiaoyaliu.notion.site/xiaoya-docker-69404af849504fa5bcf9f2dd5ecaa75f"
        },
        {
          "name": "alist",
          "type": "tree",
          "content": null
        },
        {
          "name": "build.sh",
          "type": "blob",
          "size": 0.287109375,
          "content": "#!/bin/bash\n\nservice=\"$1\"\nservices=(\n    \"alist\"\n    \"emby\"\n    \"jellyfin\"\n    \"metadata\"\n)\n\nif [ -z \"$service\" ]; then\n    for service in \"${services[@]}\"; do\n        docker build -t \"monlor/xiaoya-$service\" \"$service\"\n    done\nelse\n    docker build -t \"monlor/xiaoya-$service\" \"$service\"\nfi\n\n"
        },
        {
          "name": "docker-compose-alist.yml",
          "type": "blob",
          "size": 0.2880859375,
          "content": "services:\n  alist:\n    image: ghcr.io/monlor/xiaoya-alist:latest\n    volumes:\n      - xiaoya:/data\n    ports:\n      - \"5678:5678\"\n      - \"2345:2345\"\n      - \"2346:2346\"\n    env_file:\n      - env\n    restart: unless-stopped\n    networks:\n      - default\n\nnetworks:\n  default:\n\nvolumes:\n  xiaoya:"
        },
        {
          "name": "docker-compose-all.yml",
          "type": "blob",
          "size": 1.4765625,
          "content": "services:\n  alist:\n    image: ghcr.io/monlor/xiaoya-alist:latest\n    volumes:\n      - xiaoya:/data\n    ports:\n      - \"5678:5678\"\n      - \"2345:2345\"\n      - \"2346:2346\"\n    env_file:\n      - env\n    restart: unless-stopped\n    networks:\n      - default\n  metadata:\n    image: ghcr.io/monlor/xiaoya-metadata:latest\n    environment:\n      - EMBY_ENABLED=true\n      - JELLYFIN_ENABLED=true\n    env_file:\n      - env\n    volumes:\n      - xiaoya:/etc/xiaoya\n      - media:/media/xiaoya\n      - config:/media/config\n      - cache:/media/config/cache\n      - jf_media:/media/jf_xiaoya\n      - jf_config:/media/jf_config\n      - jf_cache:/media/jf_config/cache\n      - meta:/media/temp\n    depends_on:\n      - alist\n    restart: unless-stopped\n    networks:\n      - default\n  emby:\n    image: ghcr.io/monlor/xiaoya-embyserver:latest\n    env_file:\n      - env\n    depends_on:\n      - metadata\n      - alist\n    volumes:\n      - media:/media\n      - config:/config\n      - cache:/cache\n    ports:\n      - \"6908:6908\"\n    restart: unless-stopped\n    networks:\n      - default\n  jellyfin:\n    image: ghcr.io/monlor/xiaoya-jellyfin:latest\n    env_file:\n      - env\n    privileged: true\n    depends_on:\n      - metadata\n      - alist\n    volumes:\n      - jf_media:/media\n      - jf_config:/config\n      - jf_cache:/cache\n    ports:\n      - 8096:8096\n    restart: unless-stopped\n    networks:\n      - default\n\nnetworks:\n  default:\n\nvolumes:\n  xiaoya:\n  media:\n  config:\n  cache:\n  jf_media:\n  jf_config:\n  jf_cache:\n  meta:\n  "
        },
        {
          "name": "docker-compose-jellyfin.yml",
          "type": "blob",
          "size": 1.06640625,
          "content": "services:\n  alist:\n    image: ghcr.io/monlor/xiaoya-alist:latest\n    volumes:\n      - xiaoya:/data\n    ports:\n      - \"5678:5678\"\n      - \"2345:2345\"\n      - \"2346:2346\"\n    env_file:\n      - env\n    restart: unless-stopped\n    networks:\n      - default\n  metadata:\n    image: ghcr.io/monlor/xiaoya-metadata:latest\n    environment:\n      - EMBY_ENABLED=false\n      - JELLYFIN_ENABLED=true\n    env_file:\n      - env\n    volumes:\n      - xiaoya:/etc/xiaoya\n      - jf_media:/media/jf_xiaoya\n      - jf_config:/media/jf_config\n      - jf_cache:/media/jf_config/cache\n      - meta:/media/temp\n    depends_on:\n      - alist\n    restart: unless-stopped\n    networks:\n      - default\n  jellyfin:\n    image: ghcr.io/monlor/xiaoya-jellyfin:latest\n    env_file:\n      - env\n    privileged: true\n    depends_on:\n      - metadata\n      - alist\n    volumes:\n      - jf_media:/media\n      - jf_config:/config\n      - jf_cache:/cache\n    ports:\n      - 8096:8096\n    restart: unless-stopped\n    networks:\n      - default\n\nnetworks:\n  default:\n\nvolumes:\n  xiaoya:\n  jf_media:\n  jf_config:\n  jf_cache:\n  meta:"
        },
        {
          "name": "docker-compose.yml",
          "type": "blob",
          "size": 0.9384765625,
          "content": "services:\n  alist:\n    image: ghcr.io/monlor/xiaoya-alist:latest\n    volumes:\n      - xiaoya:/data\n    ports:\n      - \"5678:5678\"\n      - \"2345:2345\"\n      - \"2346:2346\"\n    env_file:\n      - env\n    restart: unless-stopped\n    networks:\n      - default\n  metadata:\n    image: ghcr.io/monlor/xiaoya-metadata:latest\n    env_file:\n      - env\n    volumes:\n      - xiaoya:/etc/xiaoya\n      - media:/media/xiaoya\n      - config:/media/config\n      - cache:/media/config/cache\n      - meta:/media/temp\n    depends_on:\n      - alist\n    restart: unless-stopped\n    networks:\n      - default\n  emby:\n    image: ghcr.io/monlor/xiaoya-embyserver:latest\n    env_file:\n      - env\n    depends_on:\n      - metadata\n      - alist\n    volumes:\n      - media:/media\n      - config:/config\n      - cache:/cache\n    ports:\n      - \"6908:6908\"\n    restart: unless-stopped\n    networks:\n      - default\n\nnetworks:\n  default:\n\nvolumes:\n  xiaoya:\n  media:\n  config:\n  meta:\n  cache:"
        },
        {
          "name": "emby",
          "type": "tree",
          "content": null
        },
        {
          "name": "env",
          "type": "blob",
          "size": 1.435546875,
          "content": "TZ=Asia/Shanghai\n# é˜¿é‡Œäº‘ç›˜token\nALIYUN_TOKEN=\n# é˜¿é‡Œäº‘ç›˜open token\nALIYUN_OPEN_TOKEN=\n# é˜¿é‡Œäº‘ç›˜æ–‡ä»¶å¤¹ID\nALIYUN_FOLDER_ID=\n# å¤¸å…‹ç½‘ç›˜çš„cookie\nQUARK_COOKIE=\n# 115ç½‘ç›˜çš„cookie\nPAN115_COOKIE=\n# é˜¿é‡Œäº‘ç›˜è½¬å­˜115æ’­æ”¾\nALIYUN_TO_115=\n# è‡ªåŠ¨æ›´æ–°å°é›…alistæ–‡ä»¶\nAUTO_UPDATE_ENABLED=false\n# è‡ªåŠ¨æ¸…ç†é˜¿é‡Œäº‘ç›˜\nAUTO_CLEAR_ENABLED=true\n# é˜¿é‡Œäº‘ç›˜è‡ªåŠ¨æ¸…ç†é—´éš”ï¼Œå•ä½åˆ†é’Ÿï¼ŒèŒƒå›´0-60åˆ†é’Ÿï¼Œé»˜è®¤10åˆ†é’Ÿ\nAUTO_CLEAR_INTERVAL=\n# pikpak è´¦å·ï¼Œç”¨æ¥è§‚çœ‹å°é›…ä¸­pikpakåˆ†äº«ç»™ä½ çš„èµ„æºï¼Œæ ¼å¼ï¼š`qqq@qq.com:aaadds`\nPIKPAK_USER=\n# å¼€å¯tvboxéšæœºè®¢é˜…åœ°å€ï¼Œtrue/falseï¼Œé»˜è®¤false\nTVBOX_SECURITY=\n# webdavç”¨æˆ·åä¸ºdavï¼Œè®¾ç½®å¯†ç ã€‚é»˜è®¤ç”¨æˆ·å¯†ç ï¼šguest/guest_Api789\nWEBDAV_PASSWORD=\n\n# emby åœ°å€ï¼Œå®¹å™¨å†…éƒ¨ä½¿ç”¨åœ°å€ï¼Œä¸€èˆ¬ä¸ç”¨æ”¹\nEMBY_ADDR=http://emby:6908\n# jellyfin åœ°å€ï¼Œå®¹å™¨å†…éƒ¨ä½¿ç”¨åœ°å€ï¼Œä¸€èˆ¬ä¸ç”¨æ”¹\nJELLYFIN_ADDR=http://jellyfin:8096\n# alist åœ°å€ï¼Œå®¹å™¨å†…éƒ¨ä½¿ç”¨åœ°å€ï¼Œä¸€èˆ¬ä¸ç”¨æ”¹\nALIST_ADDR=http://alist:5678\n\n# æ˜¯å¦å¯ç”¨emby\nEMBY_ENABLED=true\n# æ˜¯å¦å¯ç”¨jellyfin\nJELLYFIN_ENABLED=false\n# è‡ªåŠ¨æ›´æ–°embyçš„é…ç½®ï¼Œä¾èµ–EMBY_APIKEY\nAUTO_UPDATE_EMBY_CONFIG_ENABLED=false\n# è‡ªåŠ¨æ›´æ–°embyé…ç½®ï¼Œconfig.mp4é—´éš”ï¼Œå•ä½å¤©ï¼Œé»˜è®¤7å¤©\nAUTO_UPDATE_EMBY_INTERVAL=\n# è‡ªåŠ¨æ›´æ–°embyå…ƒæ•°æ®\nAUTO_UPDATE_EMBY_METADATA_ENABLED=true\n# embyçš„apikey\nEMBY_APIKEY=\n# ä¸‹è½½è§£å‹å®Œæ˜¯å¦æ¸…é™¤æºæ–‡ä»¶ï¼Œtrue/falseï¼Œé»˜è®¤false\nCLEAR_TEMP=\n"
        },
        {
          "name": "helmfile.yaml",
          "type": "blob",
          "size": 4.06640625,
          "content": "# å®šä¹‰å…¨å±€çš„repositories\nrepositories:\n  - name: monlor\n    url: https://monlor.github.io/helm-charts\n\nreleases:\n  - name: alist\n    namespace: media\n    chart: monlor/quickchart\n    version: 0.3.2\n    values:\n      - port: 5678\n        extraPort:\n        - port: 2345\n          protocol: TCP\n        - port: 2346\n          protocol: TCP\n        nodeSelector:\n          kubernetes.io/hostname: nuc-1-node-1\n        image:\n          repository: ghcr.io\n          name: monlor/xiaoya-alist\n          tag: latest\n          pullPolicy: Always\n        env:\n          TZ: Asia/Shanghai\n          AUTO_UPDATE_ENABLED: true\n          AUTO_CLEAR_ENABLED: true\n          WEBDAV_PASSWORD: \n          ALIYUN_TOKEN: \n          ALIYUN_OPEN_TOKEN: \n          ALIYUN_FOLDER_ID: \n          QUARK_COOKIE:\n          PAN115_COOKIE:\n          PIKPAK_USER:\n        volumes:\n        - name: data\n          mountPath: /data\n          hostPath: \n            path: /opt/xiaoya/data\n            type: DirectoryOrCreate\n        health:\n          enabled: false\n        strategy:\n          type: Recreate\n        resources: \n          limits:\n            cpu: 2\n            memory: 4Gi\n          requests:\n            cpu: 100m\n            memory: 1Gi\n        ingress:\n          enabled: true\n          className: nginx\n          clusterIssuer: cloudflare\n          hosts:\n          - host: alist.monlor.cn\n          - host: emby.monlor.cn\n            port: 2345\n  \n  - name: metadata\n    namespace: media\n    chart: monlor/quickchart\n    version: 0.3.2\n    values:\n      - nodeSelector:\n          kubernetes.io/hostname: nuc-1-node-1\n        image:\n          repository: ghcr.io\n          name: monlor/xiaoya-metadata\n          tag: latest\n          pullPolicy: Always  \n        env:\n          TZ: Asia/Shanghai\n          # ALIST_ADDR: http://alist:5678\n          EMBY_ENABLED: true\n          JELLYFIN_ENABLED: false\n          AUTO_UPDATE_EMBY_CONFIG_ENABLED: true\n          AUTO_UPDATE_EMBY_METADATA_ENABLED: true\n        volumes:\n        - name: data\n          mountPath: /etc/xiaoya\n          hostPath: \n            path: /opt/xiaoya/data\n            type: DirectoryOrCreate\n        - name: media\n          mountPath: /media/xiaoya\n          hostPath: \n            path: /opt/xiaoya/media\n            type: DirectoryOrCreate\n        - name: config\n          mountPath: /media/config\n          hostPath: \n            path: /opt/xiaoya/config\n            type: DirectoryOrCreate\n        - name: meta\n          mountPath: /media/temp\n          hostPath: \n            path: /opt/xiaoya/temp\n            type: DirectoryOrCreate\n        health:\n          enabled: false\n        strategy:\n          type: Recreate\n        resources: \n          limits:\n            cpu: 4\n            memory: 8Gi\n          requests:\n            cpu: 100m\n            memory: 512Mi\n\n  - name: emby\n    namespace: media\n    chart: monlor/quickchart\n    version: 0.3.2\n    values:\n      - port: 6908\n        extraPort:\n          - port: 8080\n            protocol: TCP\n        nodeSelector:\n          kubernetes.io/hostname: nuc-1-node-1\n        image:\n          repository: ghcr.io\n          name: monlor/xiaoya-embyserver\n          tag: latest\n          pullPolicy: Always  \n        env:\n          TZ: Asia/Shanghai\n          # ALIST_ADDR: http://alist:5678\n        volumes:\n        - name: media\n          mountPath: /media\n          hostPath: \n            path: /opt/xiaoya/media\n            type: DirectoryOrCreate\n        - name: config\n          mountPath: /config\n          hostPath: \n            path: /opt/xiaoya/config\n            type: DirectoryOrCreate\n        - name: cache\n          mountPath: /cache\n          hostPath: \n            path: /opt/xiaoya/config/cache\n            type: DirectoryOrCreate\n        health:\n          enabled: false\n        strategy:\n          type: Recreate\n        resources: \n          limits:\n            cpu: 4\n            memory: 8Gi\n          requests:\n            cpu: 500m\n            memory: 1Gi\n        # ingress:\n        #   enabled: true\n        #   className: nginx\n        #   clusterIssuer: cloudflare\n        #   hosts:\n        #   - host: emby.monlor.cn\n"
        },
        {
          "name": "install.sh",
          "type": "blob",
          "size": 10.869140625,
          "content": "#!/bin/bash\n\nset -eu\n\nsedsh() {\n  if [[ \"$(uname -o)\" = \"Darwin\" ]]; then\n    # macOS\n    sed -i '' \"$@\"\n  else\n    # Linux\n    sed -i \"$@\"\n  fi\n}\n\n# è§£é™¤readè¾“å…¥é•¿åº¦é™åˆ¶\nif [[ \"$(uname -o)\" = \"Darwin\" ]]; then\n  stty -icanon\nfi\n\n# æ ¼å¼https://xxx.com/\nGH_PROXY=\"${GH_PROXY:=}\"\n# æ ¼å¼xxx.com\nIMAGE_PROXY=\"${IMAGE_PROXY:=}\"\n\n# æœåŠ¡é•œåƒ\nIMAGE_TAG=\"${VERSION:-latest}\"\n# æœåŠ¡ä¸‹è½½åœ°å€\nDOWNLOAD_URL=\"${GH_PROXY}https://raw.githubusercontent.com/monlor/docker-xiaoya/${VERSION:-main}\"\n\n# æ¬¢è¿ä¿¡æ¯\necho \"æ¬¢è¿ä½¿ç”¨xiaoyaæœåŠ¡éƒ¨ç½²è„šæœ¬\"\necho \"é¡¹ç›®åœ°å€ï¼šhttps://github.com/monlor/docker-xiaoya\"\necho \"ä½œè€…ï¼šmonlor (https://link.monlor.com)\"\necho\n\n# æ£€æŸ¥dockeræœåŠ¡æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™è¯¢é—®ç”¨æˆ·æ˜¯å¦å®‰è£…ï¼Œä¸å®‰è£…é€€å‡ºè„šæœ¬\nif ! command -v docker &> /dev/null; then\n  if [ \"$(uname -o)\" = \"Darwin\" ]; then\n    echo \"Docker æœªå®‰è£…ï¼Œè¯·å®‰è£…dockeråå†è¿è¡Œè„šæœ¬ï¼Œæ¨èOrbStackï¼šhttps://orbstack.dev/\"\n    exit 1\n  fi\n  read -rp \"Docker æœªå®‰è£…ï¼Œæ˜¯å¦å®‰è£…ï¼Ÿ(y/n): \" install\n  if [ \"$install\" = \"y\" ]; then\n    echo \"å®‰è£…docker...\"\n    curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun\n    systemctl enable docker\n    systemctl start docker\n  else \n    echo \"é€€å‡ºå®‰è£…\"\n    exit 1\n  fi\nfi\n\nDOCKER_COMPOSE=\"docker compose\"\n\n# æ£€æŸ¥æ˜¯å¦å®‰è£…äº†composeæ’ä»¶,docker compose å‘½ä»¤\nif ! docker compose &> /dev/null && ! which docker-compose &> /dev/null; then\n  read -rp \"Docker Compose æœªå®‰è£…ï¼Œæ˜¯å¦å®‰è£…ï¼Ÿ(y/n): \" install\n  if [ \"$install\" = \"y\" ]; then\n    echo \"å®‰è£…docker compose...\"\n    # åˆ¤æ–­ç³»ç»Ÿæ˜¯x86è¿˜æ˜¯armï¼Œarmæœ‰å¾ˆå¤šç§ç±»ï¼Œéƒ½è¦åˆ¤æ–­\n    if [ \"$(uname -m)\" = \"aarch64\" ]; then\n      file=docker-compose-linux-aarch64\n    elif [ \"$(uname -m)\" = \"x86_64\" ]; then\n      file=docker-compose-linux-x86_64\n    else\n      echo \"ä¸æ”¯æŒçš„ç³»ç»Ÿæ¶æ„$(uname -m), è¯·è‡ªè¡Œå®‰è£…docker compose(https://docs.docker.com/compose/install/linux/#install-using-the-repository)\"\n      exit 1\n    fi\n    curl -SL \"${GH_PROXY}https://github.com/docker/compose/releases/download/v2.27.1/$file\" -o /usr/local/bin/docker-compose\n    chmod +x /usr/local/bin/docker-compose\n  else\n    echo \"é€€å‡ºå®‰è£…\"\n    exit 1\n  fi\nfi\n\nif ! docker compose &> /dev/null; then\n  DOCKER_COMPOSE=\"docker-compose\"\nfi\n\n# è®©ç”¨æˆ·è¾“å…¥æœåŠ¡éƒ¨ç½²ç›®å½•ï¼Œé»˜è®¤/opt/xiaoya\nread -rp \"è¯·è¾“å…¥æœåŠ¡éƒ¨ç½²ç›®å½•ï¼ˆé»˜è®¤/opt/xiaoyaï¼‰: \" install_path\ninstall_path=${install_path:=/opt/xiaoya}\n\n# æ£€æŸ¥æœåŠ¡æ˜¯å¦å·²ç»è¿è¡Œ\nupdate=0\nif [ -f \"$install_path/docker-compose.yml\" ]; then\n  # è¯¢é—®ç”¨æˆ·æ˜¯å¦è¦æ›´æ–°æœåŠ¡\n  cat <<-EOF\n\næ›´æ–°æ–¹å¼ï¼š\n1. å…¨éƒ¨æ›´æ–°ï¼Œä¼šè¦†ç›–æ›´æ–°docker-compose.ymlå’Œenvé…ç½®\n2. éƒ¨åˆ†æ›´æ–°ï¼Œä»…è¦†ç›–æ›´æ–°docker-compose.yml\n3. é€€å‡ºè„šæœ¬ï¼Œä¸æ›´æ–°\nEOF\n  read -rp \"è¯·é€‰æ‹©æ›´æ–°æ–¹å¼ï¼ˆé»˜è®¤ä¸º1ï¼‰: \" update\n  update=${update:-1}\n  case $update in\n    1|2)\n      # å¤‡ä»½\n      cp -rf \"$install_path/env\" \"$install_path/env.bak\"\n      cp -rf \"$install_path/docker-compose.yml\" \"$install_path/docker-compose.yml.bak\"\n      ;;\n    *)\n      echo \"é€€å‡ºå®‰è£…\"\n      exit 1\n      ;;\n  esac\n  \nfi\n\nDOCKER_HOME=\"$(docker info | grep \"Docker Root Dir\" | awk -F ':' '{print$2}')\"\n\n# é€‰æ‹©æ•°æ®ä¿å­˜ä½ç½®\ndata_location=1\nif [ -d \"$install_path/data\" ]; then\n  data_location=2\nfi\ncat <<-EOF\n\næ•°æ®ä¿å­˜ä½ç½®ï¼š\n1. Dockerå·ï¼ˆæ•°æ®ä¿å­˜åœ¨: ${DOCKER_HOME}/volumesï¼‰\n2. æœåŠ¡éƒ¨ç½²ç›®å½•ï¼ˆæ•°æ®ä¿å­˜åœ¨: ${install_path}ï¼‰\nEOF\nread -rp \"è¯·é€‰æ‹©æ•°æ®ä¿å­˜ä½ç½®ï¼ˆé»˜è®¤ä¸º${data_location}ï¼‰: \" res\ndata_location=${res:-${data_location}}\n\ntoken=\"\"\nopen_token=\"\"\nfolder_id=\"\"\nquark_cookie=\"\"\npan115_cookie=\"\"\naliyun_to_115=\"false\"\n\n# å¦‚æœæ˜¯æ›´æ–°æœåŠ¡ï¼Œåˆ™ä»åŸæœ‰çš„composeé…ç½®ä¸­è·å–tokenç­‰ä¿¡æ¯\nif [ \"${update}\" != \"0\" ]; then\n  token=$(grep ALIYUN_TOKEN \"$install_path/env\" 2> /dev/null | cut -d '=' -f2-)\n  open_token=$(grep ALIYUN_OPEN_TOKEN \"$install_path/env\" 2> /dev/null | cut -d '=' -f2-)\n  folder_id=$(grep ALIYUN_FOLDER_ID \"$install_path/env\" 2> /dev/null | cut -d '=' -f2-)\n  quark_cookie=$(grep QUARK_COOKIE \"$install_path/env\" 2> /dev/null | cut -d '=' -f2-)\n  pan115_cookie=$(grep PAN115_COOKIE \"$install_path/env\" 2> /dev/null | cut -d '=' -f2-)\n  aliyun_to_115=$(grep ALIYUN_TO_115 \"$install_path/env\" 2> /dev/null | cut -d '=' -f2-)\nfi\n\n# è®©ç”¨æˆ·è¾“å…¥é˜¿é‡Œäº‘ç›˜TOKENï¼Œtokenè·å–æ–¹å¼æ•™ç¨‹ï¼šhttps://alist.nn.ci/zh/guide/drivers/aliyundrive.html \necho\necho \"é˜¿é‡Œäº‘ç›˜tokenè·å–æ–¹å¼æ•™ç¨‹ï¼šhttps://alist.nn.ci/zh/guide/drivers/aliyundrive.html\"\nread -rp \"è¯·è¾“å…¥é˜¿é‡Œäº‘ç›˜TOKEN(é»˜è®¤ä¸º$token): \" res\ntoken=${res:=$token}\nif [ ${#token} -ne 32 ]; then\n  echo \"é•¿åº¦ä¸å¯¹,é˜¿é‡Œäº‘ç›˜ Tokenæ˜¯32ä½\"\n  exit 1\nfi\n\n# è®©ç”¨æˆ·è¾“å…¥é˜¿é‡Œäº‘ç›˜OpenTOKENï¼Œtokenè·å–æ–¹å¼æ•™ç¨‹ï¼šhttps://alist.nn.ci/zh/guide/drivers/aliyundrive_open.html\necho\necho \"é˜¿é‡Œäº‘ç›˜Open tokenè·å–æ–¹å¼æ•™ç¨‹ï¼šhttps://alist.nn.ci/zh/guide/drivers/aliyundrive_open.html\"\nread -rp \"è¯·è¾“å…¥é˜¿é‡Œäº‘ç›˜Open TOKEN(é»˜è®¤ä¸º$open_token): \" res\nopen_token=${res:=$open_token}\nif [ ${#open_token} -le 334 ]; then\n  echo \"é•¿åº¦ä¸å¯¹,é˜¿é‡Œäº‘ç›˜ Open Tokenæ˜¯335ä½\"\n  exit 1\nfi\n\n# è®©ç”¨æˆ·è¾“å…¥é˜¿é‡Œäº‘ç›˜è½¬å­˜ç›®å½•folder_idï¼Œfolder_idè·å–æ–¹å¼æ•™ç¨‹ï¼šhttps://www.aliyundrive.com/s/rP9gP3h9asE\necho\necho \"è¿›å…¥é˜¿é‡Œäº‘ç›˜ç½‘é¡µç‰ˆï¼Œèµ„æºç›˜é‡Œé¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç‚¹å‡»æ–‡ä»¶å¤¹ï¼Œå¤åˆ¶æµè§ˆå™¨é˜¿é‡Œäº‘ç›˜åœ°å€æœ«å°¾çš„æ–‡ä»¶å¤¹IDï¼ˆæœ€åä¸€ä¸ªæ–œæ /åé¢çš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼‰\"\nread -rp \"è¯·è¾“å…¥é˜¿é‡Œäº‘ç›˜ç¼“å­˜ç›®å½•ID(é»˜è®¤ä¸º$folder_id): \" res\nfolder_id=${res:=$folder_id}\nif [ ${#folder_id} -ne 40 ]; then\n  echo \"é•¿åº¦ä¸å¯¹,é˜¿é‡Œäº‘ç›˜ folder idæ˜¯40ä½\"\n  exit 1\nfi\n\necho \necho \"ç™»é™†å¤¸å…‹ç½‘ç›˜ï¼Œæµè§ˆå™¨F12ï¼Œç‚¹å‡»networkï¼Œéšä¾¿ç‚¹ä¸€ä¸ªè¯·æ±‚ï¼Œæ‰¾åˆ°é‡Œé¢çš„Cookieå€¼\"\nread -rp \"è¯·è¾“å…¥å¤¸å…‹ç½‘ç›˜Cookieå€¼(é»˜è®¤ä¸º$quark_cookie): \" res\nquark_cookie=${res:=$quark_cookie}\n\necho \necho \"ç™»é™†115ç½‘ç›˜ï¼Œæµè§ˆå™¨F12ï¼Œç‚¹å‡»networkï¼Œéšä¾¿ç‚¹ä¸€ä¸ªè¯·æ±‚ï¼Œæ‰¾åˆ°é‡Œé¢çš„Cookieå€¼\"\nread -rp \"è¯·è¾“å…¥115ç½‘ç›˜Cookieå€¼(é»˜è®¤ä¸º$pan115_cookie): \" res\npan115_cookie=${res:=$pan115_cookie}\n\nif [ -n \"${pan115_cookie}\" ]; then\n  read -rp \"æ˜¯å¦å¼€å¯å°†é˜¿é‡Œäº‘ç›˜è½¬å­˜åˆ°115æ’­æ”¾ï¼Ÿ[y/n]: \" res\n  if [ \"${res}\" = \"y\" ]; then\n    aliyun_to_115=\"true\"\n  else\n    aliyun_to_115=\"false\"\n  fi\nfi\n\n# é€‰æ‹©éƒ¨ç½²æœåŠ¡ç±»å‹ï¼Œalist + emby (é»˜è®¤), alist, alist + jellyfin, alist + emby + jellyfin\necho\necho \"éƒ¨ç½²ç±»å‹ï¼š\"\necho \"1. alist + emby (é»˜è®¤)\"\necho \"2. alist\"\n# echo \"3. alist + jellyfin\"\n# echo \"4. alist + emby + jellyfin\"\nread -rp \"è¯·é€‰æ‹©éƒ¨ç½²æœåŠ¡ç±»å‹: \" service_type\ncase $service_type in\n  1)\n    service_type=\"\"\n    ;;\n  2)\n    service_type=\"-alist\"\n    ;;\n  3)\n    service_type=\"-jellyfin\"\n    ;;\n  4)\n    service_type=\"-all\"\n    ;;\n  *)\n    service_type=\"\"\n    ;;\nesac\n\n\n# æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º\nif [ ! -d \"$install_path\" ]; then\n  mkdir -p \"$install_path\"\nfi\n\ncd \"$install_path\"\n\necho \"å¼€å§‹ç”Ÿæˆé…ç½®æ–‡ä»¶docker-compose${service_type}.yml...\"\ncurl -#Lo \"$install_path/docker-compose.yml\" \"${DOWNLOAD_URL}/docker-compose${service_type}.yml\"\nif [ \"${update}\" != \"2\" ]; then\n  curl -#Lo \"$install_path/env\" \"${DOWNLOAD_URL}/env\"\nfi\nsedsh \"s#ALIYUN_TOKEN=.*#ALIYUN_TOKEN=$token#g\" env\nsedsh \"s#ALIYUN_OPEN_TOKEN=.*#ALIYUN_OPEN_TOKEN=$open_token#g\" env\nsedsh \"s#ALIYUN_FOLDER_ID=.*#ALIYUN_FOLDER_ID=$folder_id#g\" env\nsedsh \"s#QUARK_COOKIE=.*#QUARK_COOKIE=$quark_cookie#g\" env\nsedsh \"s#PAN115_COOKIE=.*#PAN115_COOKIE=$pan115_cookie#g\" env\nsedsh \"s#ALIYUN_TO_115=.*#ALIYUN_TO_115=$aliyun_to_115#g\" env\n\nif [ -n \"$IMAGE_PROXY\" ]; then\n  sedsh -E \"s#image: [^/]+#image: ${IMAGE_PROXY}#g\" docker-compose.yml\nfi\n\n# ä¿®æ”¹é•œåƒç‰ˆæœ¬\nsedsh \"s#:latest#:$IMAGE_TAG#g\" docker-compose.yml\n\n# ä¿®æ”¹æ•°æ®ä¿å­˜ä½ç½®\nif [ \"$data_location\" = \"2\" ]; then\n  sed -n '/^volumes/,$p' ./docker-compose.yml | sed -e 's/://g' | grep -v volumes | while read -r volume; do\n    if [ -z \"${volume}\" ]; then\n      continue\n    fi\n    if [ ! -d \"$install_path/data/$volume\" ]; then\n      mkdir -p \"$install_path/data/$volume\"\n    fi\n    sedsh \"s#- $volume:#- $install_path/data/$volume:#g\" docker-compose.yml\n  done\n  sedsh \"/^volumes/,\\$d\" docker-compose.yml\nfi\n\necho \"å¼€å§‹éƒ¨ç½²æœåŠ¡...\"\n$DOCKER_COMPOSE -f docker-compose.yml up --remove-orphans --pull=always -d\n\necho \"æœåŠ¡å¼€å§‹éƒ¨ç½²ï¼Œå¦‚æœéƒ¨ç½²emby/jellyfinï¼Œä¸‹è½½å¹¶è§£å‹60Gå…ƒæ•°æ®éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…...\"\necho \"è„šæœ¬æ‰§è¡Œå®Œæˆä¸ä»£è¡¨æœåŠ¡å¯åŠ¨å®Œæˆï¼Œè¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æ—¥å¿—æ¥æ£€æŸ¥éƒ¨ç½²æƒ…å†µ.\"\n\necho \necho \"> æœåŠ¡ç®¡ç†ï¼ˆè¯·ç‰¢è®°ä»¥ä¸‹å‘½ä»¤ï¼‰\"\n# æç¤ºç”¨æˆ·composeå¦‚ä½•æŸ¥çœ‹æ—¥å¿—ï¼Œå¯åŠ¨ï¼Œé‡å¯ï¼Œåœæ­¢æœåŠ¡\necho \"æŸ¥çœ‹æ—¥å¿—ï¼š$install_path/manage.sh logs\"\n# æ›´æ–°æœåŠ¡\necho \"å¯åŠ¨æœåŠ¡ï¼š$install_path/manage.sh start\"\necho \"åœæ­¢æœåŠ¡ï¼š$install_path/manage.sh stop\"\necho \"é‡å¯æœåŠ¡ï¼š$install_path/manage.sh restart\"\necho \"åŠ è½½é…ç½®ï¼š$install_path/manage.sh reload\"\necho \"æ›´æ–°æœåŠ¡ï¼š$install_path/manage.sh update\"\necho \"é«˜çº§ç”¨æˆ·è‡ªå®šä¹‰é…ç½®ï¼š$install_path/env\"\necho \"ä¿®æ”¹envæˆ–è€…composeé…ç½®åï¼Œéœ€è¦æ‰§è¡Œä¸Šé¢çš„åŠ è½½é…ç½®reloadå‘½ä»¤ç”Ÿæ•ˆï¼\"\n\n# è·å–å½“å‰æœåŠ¡å™¨ip\nip=$(curl -s ip.3322.net 2> /dev/null)\n# å†…ç½‘ip\nlocal_ip=\"\"\nif [[ \"$(uname -o)\" = \"Darwin\" ]]; then\n  interface=\"$(route -n get default | grep interface | awk -F ':' '{print$2}' | awk '{$1=$1};1')\"\n  local_ip=\"$(ifconfig \"${interface}\" | grep 'inet ' | awk '{print$2}')\"\nelse\n  interface=\"$(ip route | grep default | awk '{print$5}')\"\n  local_ip=\"$(ip -o -4 addr show \"${interface}\" | awk '{print $4}' | cut -d/ -f1)\"\nfi\n\necho \necho \"> æœåŠ¡æ­£åœ¨éƒ¨ç½²ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—ç­‰å¾…éƒ¨ç½²æˆåŠŸåï¼Œå°è¯•è®¿é—®ä¸‹é¢çš„åœ°å€\"\necho \"alist: http://$local_ip:5678, http://$ip:5678\"\necho \"webdav: http://$local_ip:5678/dav, http://$ip:5678/dav, é»˜è®¤ç”¨æˆ·å¯†ç : guest/guest_Api789\"\necho \"tvbox: http://$local_ip:5678/tvbox/my_ext.json, http://$ip:5678/tvbox/my_ext.json\"\necho \"emby: http://$local_ip:2345, http://$ip:2345, é»˜è®¤ç”¨æˆ·å¯†ç : xiaoya/1234\"\necho \"jellyfin: http://$local_ip:2346, http://$ip:2346, é»˜è®¤ç”¨æˆ·å¯†ç ï¼šailg/5678\"\n\necho\necho \"æœåŠ¡æ­£åœ¨åå°éƒ¨ç½²ï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤æŸ¥çœ‹æ—¥å¿—ï¼š$install_path/manage.sh logs\"\necho \"éƒ¨ç½²alistéœ€è¦10åˆ†é’Ÿï¼Œemby/jellyfinéœ€è¦1-24å°æ—¶ï¼Œè¯·è€å¿ƒç­‰å¾…...\"\n# æ·»åŠ ç®¡ç†è„šæœ¬ï¼Œå¯åŠ¨ï¼Œåœæ­¢ï¼ŒæŸ¥çœ‹æ—¥å¿—\ncat > \"$install_path/manage.sh\" <<-EOF\n#!/bin/bash\n\nset -e\n\ncase \\$1 in\n  start)\n    $DOCKER_COMPOSE -f \"$install_path/docker-compose.yml\" start\n    ;;\n  stop)\n    $DOCKER_COMPOSE -f \"$install_path/docker-compose.yml\" stop\n    ;;\n  restart)\n    $DOCKER_COMPOSE -f \"$install_path/docker-compose.yml\" restart\n    ;;\n  reload)\n    $DOCKER_COMPOSE -f \"$install_path/docker-compose.yml\" up --remove-orphans -d\n    ;;\n  logs)\n    $DOCKER_COMPOSE -f \"$install_path/docker-compose.yml\" logs -f\n    ;;\n  update)\n    $DOCKER_COMPOSE -f \"$install_path/docker-compose.yml\" up --remove-orphans --pull=always -d \n    ;;\n  *)\n    echo \"Usage: \\$0 {start|stop|restart|reload|logs|update}\"\n    exit 1\n    ;;\nesac\nEOF\n\nchmod +x \"$install_path/manage.sh\"\n"
        },
        {
          "name": "jellyfin",
          "type": "tree",
          "content": null
        },
        {
          "name": "metadata",
          "type": "tree",
          "content": null
        },
        {
          "name": "uninstall.sh",
          "type": "blob",
          "size": 0.71484375,
          "content": "#!/bin/bash\n\nset -eu\n\nread -rp \"è¯·è¾“å…¥æœåŠ¡éƒ¨ç½²ç›®å½•ï¼ˆé»˜è®¤/opt/xiaoyaï¼‰: \" install_path\ninstall_path=${install_path:=/opt/xiaoya}\n\nif [ ! -d \"$install_path\" ]; then\n  echo \"ç›®å½•ä¸å­˜åœ¨ï¼Œé€€å‡ºå¸è½½\"\n  exit 1\nfi\n\nDOCKER_COMPOSE=\"docker compose\"\n\nif ! docker compose &> /dev/null; then\n  DOCKER_COMPOSE=\"docker-compose\"\nfi\n\ndocker_params=\"\"\nread -rp \"æ˜¯å¦åˆ é™¤æ•°æ®å·ï¼Ÿ(y/n): \" delete_volume\nif [ \"$delete_volume\" = \"y\" ]; then\n  docker_params=\"--volumes\"\nfi\n\necho \"åœæ­¢æœåŠ¡...\"\n$DOCKER_COMPOSE -f \"$install_path/docker-compose.yml\" down $docker_params\n\nif [ \"$delete_volume\" = \"y\" ]; then\n  rm -rf \"${install_path:?}\"/*\nelse\n  find \"${install_path:?}\" -type f -not -path \"${install_path}/data/*\" -delete\nfi"
        }
      ]
    }
  ]
}