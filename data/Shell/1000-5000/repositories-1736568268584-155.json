{
  "metadata": {
    "timestamp": 1736568268584,
    "page": 155,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjE2MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "P3TERX/aria2.sh",
      "stars": 2918,
      "defaultBranch": "master",
      "files": [
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0869140625,
          "content": "MIT License\n\nCopyright (c) 2017 Toyo\nCopyright (c) 2018-2020 P3TERX <https://p3terx.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 8.28125,
          "content": "# Aria2 一键安装管理脚本 增强版\n\n[![LICENSE](https://img.shields.io/github/license/P3TERX/aria2.sh?style=flat-square)](https://github.com/P3TERX/aria2.sh/blob/master/LICENSE)\n[![GitHub Stars](https://img.shields.io/github/stars/P3TERX/aria2.sh.svg?style=flat-square&label=Stars&logo=github)](https://github.com/P3TERX/aria2.sh/stargazers)\n[![GitHub Forks](https://img.shields.io/github/forks/P3TERX/aria2.sh.svg?style=flat-square&label=Forks&logo=github)](https://github.com/P3TERX/aria2.sh/fork)\n\nAria2 是目前最强大的全能型下载工具，它支持 BT、磁力、HTTP、FTP 等下载协议，常用做离线下载的服务端。Aria2 一键安装管理脚本是 Toyo (逗比) 大佬最为知名的脚本作品之一，2018年11月14日逗比大佬因未知原因突然失联。由于博主非常喜欢 Aria2 所以自2018年12月7日起开始接手这个项目并进行了大量的功能与细节优化，一直持续维护至今。增强版脚本整合了 [Aria2 完美配置](https://github.com/P3TERX/aria2.conf)，在安装 Aria2 的过程中会下载这套配置方案，这套方案包含了配置文件、附加功能脚本等文件，用于实现 Aria2 功能的增强和扩展，提升 Aria2 的下载速度与使用体验，解决 Aria2 在使用中遇到的 BT 下载无速度、文件残留占用磁盘空间、任务丢失、重复下载等问题。\n\n## 功能特性\n\n- 使用 [Aria2 完美配置](https://github.com/P3TERX/aria2.conf)方案\n    * BT 下载率高、速度快\n    * 重启后不丢失任务进度、不重复下载\n    * 删除正在下载的任务自动删除未完成的文件\n    * 下载错误自动删除未完成的文件\n    * 下载完成自动删除控制文件(`.aria2`后缀名文件)\n    * 下载完成自动删除种子文件(`.torrent`后缀名文件)\n    * 下载完成自动删除空目录\n    * BT 下载完成自动清除垃圾文件(文件类型过滤功能)\n    * BT 下载完成自动清除小文件(文件大小过滤功能)\n    * 有一定的防版权投诉、防迅雷吸血效果\n    * 更好的 PT 下载支持\n\n- 使用 [Aria2 Pro Core](https://github.com/P3TERX/Aria2-Pro-Core) 项目最新静态编译二进制文件\n    - 多平台：`amd64`, `i386`, `arm64`, `armhf`\n    - 全功能：`Async DNS`, `BitTorrent`, `Firefox3 Cookie`, `GZip`, `HTTPS`, `Message Digest`, `Metalink`, `XML-RPC`, `SFTP`\n    - 单服务器线程数最大值无上限（已破解线程数限制）\n    - 防掉线程优化\n    - 最新依赖库，下载更安全、稳定、快速\n    - 持续更新最新版本\n\n- 支持与 [RCLONE](https://rclone.org/) 联动，更多扩展功能与玩法：\n    - [OneDrive、Google Drive 等网盘离线下载](https://p3terx.com/archives/offline-download-of-onedrive-gdrive.html)\n    - [百度网盘转存到 OneDrive 、Google Drive 等其他网盘](https://p3terx.com/archives/baidunetdisk-transfer-to-onedrive-and-google-drive.html)\n\n- 支持新一代互联网协议 IPv6\n- 定时自动更新 BT tracker 列表（无需重启）\n\n## 项目地址\n\nhttps://github.com/P3TERX/aria2.sh\n\n支持项目请随手点个`star`，可以让更多的人发现、使用并受益。你的支持是我持续开发维护的动力。\n\n## 系统要求\n\nCentOS 6+ / Debian 6+ / Ubuntu 14.04+\n\n## 架构支持\n\nx86_64 / i386 / ARM64 / ARM32v7 / ARM32v6\n\n## 使用说明\n\n* 为了确保能正常使用，请先安装基础组件`wget`、`curl`、`ca-certificates`，以 Debian 为例子：\n```\napt install wget curl ca-certificates\n```\n\n* 下载脚本\n```\nwget -N git.io/aria2.sh && chmod +x aria2.sh\n```\n\n* 运行脚本\n```\n./aria2.sh\n```\n\n* 选择你要执行的选项\n```\n Aria2 一键安装管理脚本 增强版 [v2.7.4] by P3TERX.COM\n \n  0. 升级脚本\n ———————————————————————\n  1. 安装 Aria2\n  2. 更新 Aria2\n  3. 卸载 Aria2\n ———————————————————————\n  4. 启动 Aria2\n  5. 停止 Aria2\n  6. 重启 Aria2\n ———————————————————————\n  7. 修改 配置\n  8. 查看 配置\n  9. 查看 日志\n 10. 清空 日志\n ———————————————————————\n 11. 手动更新 BT-Tracker\n 12. 自动更新 BT-Tracker\n ———————————————————————\n\n Aria2 状态: 已安装 | 已启动\n\n 自动更新 BT-Tracker: 已开启\n\n 请输入数字 [0-12]:\n```\n\n## 其他操作\n\n启动：`/etc/init.d/aria2 start` | `service aria2 start`\n\n停止：`/etc/init.d/aria2 stop` | `service aria2 stop`\n\n重启：`/etc/init.d/aria2 restart` | `service aria2 restart`\n\n查看状态：`/etc/init.d/aria2 status` | `service aria2 status`\n\n配置文件路径：`/root/.aria2c/aria2.conf` （配置文件有中文注释，若语言设置有问题会导致中文乱码）\n\n默认下载目录：`/root/downloads`\n\nRPC 密钥：随机生成，可使用选项`7. 修改 配置文件`自定义\n\n## 遇到问题如何处理\n\n遇到问题先看 [FAQ](https://p3terx.com/archives/aria2_perfect_config-faq.html) 再提问，你还可以加入 [Aria2 TG 群](https://t.me/Aria2c)和小伙伴们一起讨论。要注意提问的方式和提供有用的信息，提问前建议去学习《[提问的智慧](https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/master/README-zh_CN.md)》，这能更好的帮助你去解决问题和节约时间。诸如 “为什么不能使用？”、“那你能帮帮我吗？” 之类的问题应该没有人会知道。\n\n## 更新日志\n\n更新推送：[Aria2 Channel](https://t.me/Aria2_Channel)\n\n### 2020-12-26 v2.7.4 Final\n\n> **NOTICE:** 由于脚本代码历史包袱太重，这将是最后一次维护更新。未来可能会写一个全新的脚本来替代。\n\n- 更换 Aria2 二进制文件下载链接\n- 修复若干 bug\n\n<details>\n<summary>历史记录</summary>\n\n### 2020-08-15 v2.7.0\n\n- 新增 AriaNg 链接功能\n\n### 2020-08-09 v2.6.2\n\n- 修改 资源下载链接\n- 优化 IP检测接口\n\n### 2020-07-12 v2.6.0\n\n- 适配新版 [Aria2 完美配置](https://github.com/P3TERX/aria2.conf)\n- 移除 Aria2 版本选择功能\n\n### 2020-06-27 v2.5.3\n\n- 同步 Aria2 完美配置文件名改动\n- 安装过程优化\n- 修复 bug\n\n### 2020-05-21 v2.5.0\n\n- 解决 CLI 下`aria2c`无法直接下载的问题\n- 修改配置目录为`/root/.aria2c`\n- 修改下载目录为`/root/downloads`\n\n### 2020-05-20 v2.4.5\n\n- 新增自动更新 BT Tracker 状态显示\n- 改进脚本升级策略\n- 优化文案细节\n- 修复部分历史遗留 bug\n\n### 2020-05-17 v2.3.0\n\n- 优化 中国大陆“局域网”环境下的安装体验\n\n### 2020-05-09 v2.2.5\n\n- 新增 IPv6 地址检测功能\n- 优化防火墙设置，自动开放必要的端口。\n- 修复部分历史遗留 bug\n\n### 2020-04-14 v2.2.1\n\n- 优化 BT Tracker 列表更新策略，以无重启方式进行（**自动更新 BT Tracker** 功能需重新进行设置）\n- 优化代码细节，修复部分历史遗留 bug\n\n### 2020-02-18 v2.2.0\n\n- 更换静态编译二进制文件下载来源（[P3TERX/aria2-builder](https://github.com/P3TERX/aria2-builder)）\n- 适配 ARM64、ARM32v7、ARM32v6 架构。\n- 优化文案细节。\n\n### 2020-02-17 v2.1.0\n\n- 适配新版 [Aria2 完美配置](https://github.com/P3TERX/aria2.conf)\n- 分离 trackers 更新功能\n- 优化功能，完善细节，修复若干 bug\n\n### 2019-11-23 v2.0.8\n\n- 修改 Trackers 来源([XIU2/TrackersListCollection](https://github.com/XIU2/TrackersListCollection))\n\n### 2019-10-12 v2.0.7\n\n- 修复 Aria2 版本更新时因未获取 CPU 架构导致版本下载错误且无法启动的 bug\n\n### 2019-09-30 v2.0.6\n\n- 获取 DHT（IPv6）文件\n\n### 2019-06-08 v2.0.5\n\n- 增加 清空日志 功能\n- 调整 部分文案\n\n### 2018-12-25 v2.0.4\n\n- 优化调整\n\n### 2018-12-24 v2.0.3\n\n- 增加 重置/更新 Aria2 完美配置 选项\n- 优化 修改配置文件下载路径时同步修改附加功能脚本中的下载路径\n\n### 2018-12-8 v2.0.2\n\n- 修复 附加功能脚本没有执行权限的 bug\n\n### 2018-12-7 v2.0.1\n\n- 修复 设置下载文件夹提示不存在的 bug\n- 解锁 更新 BT-Tracker服务器 选项\n\n### 2018-12-7 v2.0.0α\n\n- 整合 [Aria2 完美配置](https://github.com/P3TERX/aria2_perfect_config)\n\n### 2018-10-18 v1.1.10\n\n- 取自[一个逗比写的逗比脚本](https://github.com/P3TERX/doubi_backup)\n- 感谢 Toyo 大佬\n\n</details>\n\n## Lisence\n[MIT](https://github.com/P3TERX/aria2.sh/blob/master/LICENSE) © Toyo x P3TERX\n"
        },
        {
          "name": "aria2.sh",
          "type": "blob",
          "size": 28.8046875,
          "content": "#!/usr/bin/env bash\n#\n# Copyright (c) 2017 Toyo\n# Copyright (c) 2018-2020 P3TERX <https://p3terx.com>\n#\n# This is free software, licensed under the MIT License.\n# See /LICENSE for more information.\n#\n# https://github.com/P3TERX/aria2.sh\n# Description: Aria2 One-click installation management script\n# System Required: CentOS/Debian/Ubuntu\n# Version: 2.7.4\n#\n\nsh_ver=\"2.7.4\"\nexport PATH=~/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/sbin:/bin\naria2_conf_dir=\"/root/.aria2c\"\ndownload_path=\"/root/downloads\"\naria2_conf=\"${aria2_conf_dir}/aria2.conf\"\naria2_log=\"${aria2_conf_dir}/aria2.log\"\naria2c=\"/usr/local/bin/aria2c\"\nCrontab_file=\"/usr/bin/crontab\"\nGreen_font_prefix=\"\\033[32m\"\nRed_font_prefix=\"\\033[31m\"\nGreen_background_prefix=\"\\033[42;37m\"\nRed_background_prefix=\"\\033[41;37m\"\nFont_color_suffix=\"\\033[0m\"\nInfo=\"[${Green_font_prefix}信息${Font_color_suffix}]\"\nError=\"[${Red_font_prefix}错误${Font_color_suffix}]\"\nTip=\"[${Green_font_prefix}注意${Font_color_suffix}]\"\n\ncheck_root() {\n    [[ $EUID != 0 ]] && echo -e \"${Error} 当前非ROOT账号(或没有ROOT权限)，无法继续操作，请更换ROOT账号或使用 ${Green_background_prefix}sudo su${Font_color_suffix} 命令获取临时ROOT权限（执行后可能会提示输入当前账号的密码）。\" && exit 1\n}\n#检查系统\ncheck_sys() {\n    if [[ -f /etc/redhat-release ]]; then\n        release=\"centos\"\n    elif cat /etc/issue | grep -q -E -i \"debian\"; then\n        release=\"debian\"\n    elif cat /etc/issue | grep -q -E -i \"ubuntu\"; then\n        release=\"ubuntu\"\n    elif cat /etc/issue | grep -q -E -i \"centos|red hat|redhat\"; then\n        release=\"centos\"\n    elif cat /proc/version | grep -q -E -i \"debian\"; then\n        release=\"debian\"\n    elif cat /proc/version | grep -q -E -i \"ubuntu\"; then\n        release=\"ubuntu\"\n    elif cat /proc/version | grep -q -E -i \"centos|red hat|redhat\"; then\n        release=\"centos\"\n    fi\n    ARCH=$(uname -m)\n    [ $(command -v dpkg) ] && dpkgARCH=$(dpkg --print-architecture | awk -F- '{ print $NF }')\n}\ncheck_installed_status() {\n    [[ ! -e ${aria2c} ]] && echo -e \"${Error} Aria2 没有安装，请检查 !\" && exit 1\n    [[ ! -e ${aria2_conf} ]] && echo -e \"${Error} Aria2 配置文件不存在，请检查 !\" && [[ $1 != \"un\" ]] && exit 1\n}\ncheck_crontab_installed_status() {\n    if [[ ! -e ${Crontab_file} ]]; then\n        echo -e \"${Error} Crontab 没有安装，开始安装...\"\n        if [[ ${release} == \"centos\" ]]; then\n            yum install crond -y\n        else\n            apt-get install cron -y\n        fi\n        if [[ ! -e ${Crontab_file} ]]; then\n            echo -e \"${Error} Crontab 安装失败，请检查！\" && exit 1\n        else\n            echo -e \"${Info} Crontab 安装成功！\"\n        fi\n    fi\n}\ncheck_pid() {\n    PID=$(ps -ef | grep \"aria2c\" | grep -v grep | grep -v \"aria2.sh\" | grep -v \"init.d\" | grep -v \"service\" | awk '{print $2}')\n}\ncheck_new_ver() {\n    aria2_new_ver=$(\n        {\n            wget -t2 -T3 -qO- \"https://api.github.com/repos/P3TERX/Aria2-Pro-Core/releases/latest\" ||\n                wget -t2 -T3 -qO- \"https://gh-api.p3terx.com/repos/P3TERX/Aria2-Pro-Core/releases/latest\"\n        } | grep -o '\"tag_name\": \".*\"' | head -n 1 | cut -d'\"' -f4\n    )\n    if [[ -z ${aria2_new_ver} ]]; then\n        echo -e \"${Error} Aria2 最新版本获取失败，请手动获取最新版本号[ https://github.com/P3TERX/Aria2-Pro-Core/releases ]\"\n        read -e -p \"请输入版本号:\" aria2_new_ver\n        [[ -z \"${aria2_new_ver}\" ]] && echo \"取消...\" && exit 1\n    fi\n}\ncheck_ver_comparison() {\n    read -e -p \"是否更新(会中断当前下载任务) ? [Y/n] :\" yn\n    [[ -z \"${yn}\" ]] && yn=\"y\"\n    if [[ $yn == [Yy] ]]; then\n        check_pid\n        [[ ! -z $PID ]] && kill -9 ${PID}\n        check_sys\n        Download_aria2 \"update\"\n        Start_aria2\n    fi\n}\nDownload_aria2() {\n    update_dl=$1\n    if [[ $ARCH == i*86 || $dpkgARCH == i*86 ]]; then\n        ARCH=\"i386\"\n    elif [[ $ARCH == \"x86_64\" || $dpkgARCH == \"amd64\" ]]; then\n        ARCH=\"amd64\"\n    elif [[ $ARCH == \"aarch64\" || $dpkgARCH == \"arm64\" ]]; then\n        ARCH=\"arm64\"\n    elif [[ $ARCH == \"armv7l\" || $dpkgARCH == \"armhf\" ]]; then\n        ARCH=\"armhf\"\n    else\n        echo -e \"${Error} 不支持此 CPU 架构。\"\n        exit 1\n    fi\n    while [[ $(which aria2c) ]]; do\n        echo -e \"${Info} 删除旧版 Aria2 二进制文件...\"\n        rm -vf $(which aria2c)\n    done\n    DOWNLOAD_URL=\"https://github.com/P3TERX/Aria2-Pro-Core/releases/download/${aria2_new_ver}/aria2-${aria2_new_ver%_*}-static-linux-${ARCH}.tar.gz\"\n    {\n        wget -t2 -T3 -O- \"${DOWNLOAD_URL}\" ||\n            wget -t2 -T3 -O- \"https://gh-acc.p3terx.com/${DOWNLOAD_URL}\"\n    } | tar -zx\n    [[ ! -s \"aria2c\" ]] && echo -e \"${Error} Aria2 下载失败 !\" && exit 1\n    [[ ${update_dl} = \"update\" ]] && rm -f \"${aria2c}\"\n    mv -f aria2c \"${aria2c}\"\n    [[ ! -e ${aria2c} ]] && echo -e \"${Error} Aria2 主程序安装失败！\" && exit 1\n    chmod +x ${aria2c}\n    echo -e \"${Info} Aria2 主程序安装完成！\"\n}\nDownload_aria2_conf() {\n    PROFILE_URL1=\"https://p3terx.github.io/aria2.conf\"\n    PROFILE_URL2=\"https://aria2c.now.sh\"\n    PROFILE_URL3=\"https://cdn.jsdelivr.net/gh/P3TERX/aria2.conf@master\"\n    PROFILE_LIST=\"\naria2.conf\nclean.sh\ncore\nscript.conf\nrclone.env\nupload.sh\ndelete.sh\ndht.dat\ndht6.dat\nmove.sh\nLICENSE\n\"\n    mkdir -p \"${aria2_conf_dir}\" && cd \"${aria2_conf_dir}\"\n    for PROFILE in ${PROFILE_LIST}; do\n        [[ ! -f ${PROFILE} ]] && rm -rf ${PROFILE}\n        wget -N -t2 -T3 ${PROFILE_URL1}/${PROFILE} ||\n            wget -N -t2 -T3 ${PROFILE_URL2}/${PROFILE} ||\n            wget -N -t2 -T3 ${PROFILE_URL3}/${PROFILE}\n        [[ ! -s ${PROFILE} ]] && {\n            echo -e \"${Error} '${PROFILE}' 下载失败！清理残留文件...\"\n            rm -vrf \"${aria2_conf_dir}\"\n            exit 1\n        }\n    done\n    sed -i \"s@^\\(dir=\\).*@\\1${download_path}@\" ${aria2_conf}\n    sed -i \"s@/root/.aria2/@${aria2_conf_dir}/@\" ${aria2_conf_dir}/*.conf\n    sed -i \"s@^\\(rpc-secret=\\).*@\\1$(date +%s%N | md5sum | head -c 20)@\" ${aria2_conf}\n    sed -i \"s@^#\\(retry-on-.*=\\).*@\\1true@\" ${aria2_conf}\n    sed -i \"s@^\\(max-connection-per-server=\\).*@\\132@\" ${aria2_conf}\n    touch aria2.session\n    chmod +x *.sh\n    echo -e \"${Info} Aria2 完美配置下载完成！\"\n}\nService_aria2() {\n    if [[ ${release} = \"centos\" ]]; then\n        wget -N -t2 -T3 \"https://raw.githubusercontent.com/P3TERX/aria2.sh/master/service/aria2_centos\" -O /etc/init.d/aria2 ||\n            wget -N -t2 -T3 \"https://cdn.jsdelivr.net/gh/P3TERX/aria2.sh@master/service/aria2_centos\" -O /etc/init.d/aria2 ||\n            wget -N -t2 -T3 \"https://gh-raw.p3terx.com/P3TERX/aria2.sh/master/service/aria2_centos\" -O /etc/init.d/aria2\n        [[ ! -s /etc/init.d/aria2 ]] && {\n            echo -e \"${Error} Aria2服务 管理脚本下载失败 !\"\n            exit 1\n        }\n        chmod +x /etc/init.d/aria2\n        chkconfig --add aria2\n        chkconfig aria2 on\n    else\n        wget -N -t2 -T3 \"https://raw.githubusercontent.com/P3TERX/aria2.sh/master/service/aria2_debian\" -O /etc/init.d/aria2 ||\n            wget -N -t2 -T3 \"https://cdn.jsdelivr.net/gh/P3TERX/aria2.sh@master/service/aria2_debian\" -O /etc/init.d/aria2 ||\n            wget -N -t2 -T3 \"https://gh-raw.p3terx.com/P3TERX/aria2.sh/master/service/aria2_debian\" -O /etc/init.d/aria2\n        [[ ! -s /etc/init.d/aria2 ]] && {\n            echo -e \"${Error} Aria2服务 管理脚本下载失败 !\"\n            exit 1\n        }\n        chmod +x /etc/init.d/aria2\n        update-rc.d -f aria2 defaults\n    fi\n    echo -e \"${Info} Aria2服务 管理脚本下载完成 !\"\n}\nInstallation_dependency() {\n    if [[ ${release} = \"centos\" ]]; then\n        yum update\n        yum install -y wget curl nano ca-certificates findutils jq tar gzip dpkg\n    else\n        apt-get update\n        apt-get install -y wget curl nano ca-certificates findutils jq tar gzip dpkg\n    fi\n    if [[ ! -s /etc/ssl/certs/ca-certificates.crt ]]; then\n        wget -qO- git.io/ca-certificates.sh | bash\n    fi\n}\nInstall_aria2() {\n    check_root\n    [[ -e ${aria2c} ]] && echo -e \"${Error} Aria2 已安装，请检查 !\" && exit 1\n    check_sys\n    echo -e \"${Info} 开始安装/配置 依赖...\"\n    Installation_dependency\n    echo -e \"${Info} 开始下载/安装 主程序...\"\n    check_new_ver\n    Download_aria2\n    echo -e \"${Info} 开始下载/安装 Aria2 完美配置...\"\n    Download_aria2_conf\n    echo -e \"${Info} 开始下载/安装 服务脚本(init)...\"\n    Service_aria2\n    Read_config\n    aria2_RPC_port=${aria2_port}\n    echo -e \"${Info} 开始设置 iptables 防火墙...\"\n    Set_iptables\n    echo -e \"${Info} 开始添加 iptables 防火墙规则...\"\n    Add_iptables\n    echo -e \"${Info} 开始保存 iptables 防火墙规则...\"\n    Save_iptables\n    echo -e \"${Info} 开始创建 下载目录...\"\n    mkdir -p ${download_path}\n    echo -e \"${Info} 所有步骤 安装完毕，开始启动...\"\n    Start_aria2\n}\nStart_aria2() {\n    check_installed_status\n    check_pid\n    [[ ! -z ${PID} ]] && echo -e \"${Error} Aria2 正在运行，请检查 !\" && exit 1\n    /etc/init.d/aria2 start\n}\nStop_aria2() {\n    check_installed_status\n    check_pid\n    [[ -z ${PID} ]] && echo -e \"${Error} Aria2 没有运行，请检查 !\" && exit 1\n    /etc/init.d/aria2 stop\n}\nRestart_aria2() {\n    check_installed_status\n    check_pid\n    [[ ! -z ${PID} ]] && /etc/init.d/aria2 stop\n    /etc/init.d/aria2 start\n}\nSet_aria2() {\n    check_installed_status\n    echo -e \"\n ${Green_font_prefix}1.${Font_color_suffix} 修改 Aria2 RPC 密钥\n ${Green_font_prefix}2.${Font_color_suffix} 修改 Aria2 RPC 端口\n ${Green_font_prefix}3.${Font_color_suffix} 修改 Aria2 下载目录\n ${Green_font_prefix}4.${Font_color_suffix} 修改 Aria2 密钥 + 端口 + 下载目录\n ${Green_font_prefix}5.${Font_color_suffix} 手动 打开配置文件修改\n ————————————\n ${Green_font_prefix}0.${Font_color_suffix} 重置/更新 Aria2 完美配置\n\"\n    read -e -p \" 请输入数字 [0-5]:\" aria2_modify\n    if [[ ${aria2_modify} == \"1\" ]]; then\n        Set_aria2_RPC_passwd\n    elif [[ ${aria2_modify} == \"2\" ]]; then\n        Set_aria2_RPC_port\n    elif [[ ${aria2_modify} == \"3\" ]]; then\n        Set_aria2_RPC_dir\n    elif [[ ${aria2_modify} == \"4\" ]]; then\n        Set_aria2_RPC_passwd_port_dir\n    elif [[ ${aria2_modify} == \"5\" ]]; then\n        Set_aria2_vim_conf\n    elif [[ ${aria2_modify} == \"0\" ]]; then\n        Reset_aria2_conf\n    else\n        echo\n        echo -e \" ${Error} 请输入正确的数字\"\n        exit 1\n    fi\n}\nSet_aria2_RPC_passwd() {\n    read_123=$1\n    if [[ ${read_123} != \"1\" ]]; then\n        Read_config\n    fi\n    if [[ -z \"${aria2_passwd}\" ]]; then\n        aria2_passwd_1=\"空(没有检测到配置，可能手动删除或注释了)\"\n    else\n        aria2_passwd_1=${aria2_passwd}\n    fi\n    echo -e \"\n ${Tip} Aria2 RPC 密钥不要包含等号(=)和井号(#)，留空为随机生成。\n\n 当前 RPC 密钥为: ${Green_font_prefix}${aria2_passwd_1}${Font_color_suffix}\n\"\n    read -e -p \" 请输入新的 RPC 密钥: \" aria2_RPC_passwd\n    echo\n    [[ -z \"${aria2_RPC_passwd}\" ]] && aria2_RPC_passwd=$(date +%s%N | md5sum | head -c 20)\n    if [[ \"${aria2_passwd}\" != \"${aria2_RPC_passwd}\" ]]; then\n        if [[ -z \"${aria2_passwd}\" ]]; then\n            echo -e \"\\nrpc-secret=${aria2_RPC_passwd}\" >>${aria2_conf}\n            if [[ $? -eq 0 ]]; then\n                echo -e \"${Info} RPC 密钥修改成功！新密钥为：${Green_font_prefix}${aria2_RPC_passwd}${Font_color_suffix}(配置文件中缺少相关选项参数，已自动加入配置文件底部)\"\n                if [[ ${read_123} != \"1\" ]]; then\n                    Restart_aria2\n                fi\n            else\n                echo -e \"${Error} RPC 密钥修改失败！旧密钥为：${Green_font_prefix}${aria2_passwd}${Font_color_suffix}\"\n            fi\n        else\n            sed -i 's/^rpc-secret='${aria2_passwd}'/rpc-secret='${aria2_RPC_passwd}'/g' ${aria2_conf}\n            if [[ $? -eq 0 ]]; then\n                echo -e \"${Info} RPC 密钥修改成功！新密钥为：${Green_font_prefix}${aria2_RPC_passwd}${Font_color_suffix}\"\n                if [[ ${read_123} != \"1\" ]]; then\n                    Restart_aria2\n                fi\n            else\n                echo -e \"${Error} RPC 密钥修改失败！旧密钥为：${Green_font_prefix}${aria2_passwd}${Font_color_suffix}\"\n            fi\n        fi\n    else\n        echo -e \"${Error} 与旧配置一致，无需修改...\"\n    fi\n}\nSet_aria2_RPC_port() {\n    read_123=$1\n    if [[ ${read_123} != \"1\" ]]; then\n        Read_config\n    fi\n    if [[ -z \"${aria2_port}\" ]]; then\n        aria2_port_1=\"空(没有检测到配置，可能手动删除或注释了)\"\n    else\n        aria2_port_1=${aria2_port}\n    fi\n    echo -e \"\n 当前 RPC 端口为: ${Green_font_prefix}${aria2_port_1}${Font_color_suffix}\n\"\n    read -e -p \" 请输入新的 RPC 端口(默认: 6800): \" aria2_RPC_port\n    echo\n    [[ -z \"${aria2_RPC_port}\" ]] && aria2_RPC_port=\"6800\"\n    if [[ \"${aria2_port}\" != \"${aria2_RPC_port}\" ]]; then\n        if [[ -z \"${aria2_port}\" ]]; then\n            echo -e \"\\nrpc-listen-port=${aria2_RPC_port}\" >>${aria2_conf}\n            if [[ $? -eq 0 ]]; then\n                echo -e \"${Info} RPC 端口修改成功！新端口为：${Green_font_prefix}${aria2_RPC_port}${Font_color_suffix}(配置文件中缺少相关选项参数，已自动加入配置文件底部)\"\n                Del_iptables\n                Add_iptables\n                Save_iptables\n                if [[ ${read_123} != \"1\" ]]; then\n                    Restart_aria2\n                fi\n            else\n                echo -e \"${Error} RPC 端口修改失败！旧端口为：${Green_font_prefix}${aria2_port}${Font_color_suffix}\"\n            fi\n        else\n            sed -i 's/^rpc-listen-port='${aria2_port}'/rpc-listen-port='${aria2_RPC_port}'/g' ${aria2_conf}\n            if [[ $? -eq 0 ]]; then\n                echo -e \"${Info} RPC 端口修改成功！新端口为：${Green_font_prefix}${aria2_RPC_port}${Font_color_suffix}\"\n                Del_iptables\n                Add_iptables\n                Save_iptables\n                if [[ ${read_123} != \"1\" ]]; then\n                    Restart_aria2\n                fi\n            else\n                echo -e \"${Error} RPC 端口修改失败！旧端口为：${Green_font_prefix}${aria2_port}${Font_color_suffix}\"\n            fi\n        fi\n    else\n        echo -e \"${Error} 与旧配置一致，无需修改...\"\n    fi\n}\nSet_aria2_RPC_dir() {\n    read_123=$1\n    if [[ ${read_123} != \"1\" ]]; then\n        Read_config\n    fi\n    if [[ -z \"${aria2_dir}\" ]]; then\n        aria2_dir_1=\"空(没有检测到配置，可能手动删除或注释了)\"\n    else\n        aria2_dir_1=${aria2_dir}\n    fi\n    echo -e \"\n 当前下载目录为: ${Green_font_prefix}${aria2_dir_1}${Font_color_suffix}\n\"\n    read -e -p \" 请输入新的下载目录(默认: ${download_path}): \" aria2_RPC_dir\n    [[ -z \"${aria2_RPC_dir}\" ]] && aria2_RPC_dir=\"${download_path}\"\n    mkdir -p ${aria2_RPC_dir}\n    echo\n    if [[ \"${aria2_dir}\" != \"${aria2_RPC_dir}\" ]]; then\n        if [[ -z \"${aria2_dir}\" ]]; then\n            echo -e \"\\ndir=${aria2_RPC_dir}\" >>${aria2_conf}\n            if [[ $? -eq 0 ]]; then\n                echo -e \"${Info} 下载目录修改成功！新位置为：${Green_font_prefix}${aria2_RPC_dir}${Font_color_suffix}(配置文件中缺少相关选项参数，已自动加入配置文件底部)\"\n                if [[ ${read_123} != \"1\" ]]; then\n                    Restart_aria2\n                fi\n            else\n                echo -e \"${Error} 下载目录修改失败！旧位置为：${Green_font_prefix}${aria2_dir}${Font_color_suffix}\"\n            fi\n        else\n            aria2_dir_2=$(echo \"${aria2_dir}\" | sed 's/\\//\\\\\\//g')\n            aria2_RPC_dir_2=$(echo \"${aria2_RPC_dir}\" | sed 's/\\//\\\\\\//g')\n            sed -i \"s@^\\(dir=\\).*@\\1${aria2_RPC_dir_2}@\" ${aria2_conf}\n            sed -i \"s@^\\(DOWNLOAD_PATH='\\).*@\\1${aria2_RPC_dir_2}'@\" ${aria2_conf_dir}/*.sh\n            if [[ $? -eq 0 ]]; then\n                echo -e \"${Info} 下载目录修改成功！新位置为：${Green_font_prefix}${aria2_RPC_dir}${Font_color_suffix}\"\n                if [[ ${read_123} != \"1\" ]]; then\n                    Restart_aria2\n                fi\n            else\n                echo -e \"${Error} 下载目录修改失败！旧位置为：${Green_font_prefix}${aria2_dir}${Font_color_suffix}\"\n            fi\n        fi\n    else\n        echo -e \"${Error} 与旧配置一致，无需修改...\"\n    fi\n}\nSet_aria2_RPC_passwd_port_dir() {\n    Read_config\n    Set_aria2_RPC_passwd \"1\"\n    Set_aria2_RPC_port \"1\"\n    Set_aria2_RPC_dir \"1\"\n    Restart_aria2\n}\nSet_aria2_vim_conf() {\n    Read_config\n    aria2_port_old=${aria2_port}\n    aria2_dir_old=${aria2_dir}\n    echo -e \"\n 配置文件位置：${Green_font_prefix}${aria2_conf}${Font_color_suffix}\n\n ${Tip} 手动修改配置文件须知：\n \n ${Green_font_prefix}1.${Font_color_suffix} 默认使用 nano 文本编辑器打开\n ${Green_font_prefix}2.${Font_color_suffix} 退出并保存文件：按 ${Green_font_prefix}Ctrl+X${Font_color_suffix} 组合键，输入 ${Green_font_prefix}y${Font_color_suffix} ，按 ${Green_font_prefix}Enter${Font_color_suffix} 键\n ${Green_font_prefix}3.${Font_color_suffix} 退出不保存文件：按 ${Green_font_prefix}Ctrl+X${Font_color_suffix} 组合键，输入 ${Green_font_prefix}n${Font_color_suffix}\n ${Green_font_prefix}4.${Font_color_suffix} nano 详细使用教程：${Green_font_prefix}https://p3terx.com/archives/linux-nano-tutorial.html${Font_color_suffix}\n ${Green_font_prefix}5.${Font_color_suffix} 配置文件有中文注释，若语言设置有问题会导致中文乱码\n \"\n    read -e -p \"按任意键继续，按 Ctrl+C 组合键取消\" var\n    nano \"${aria2_conf}\"\n    Read_config\n    if [[ ${aria2_port_old} != ${aria2_port} ]]; then\n        aria2_RPC_port=${aria2_port}\n        aria2_port=${aria2_port_old}\n        Del_iptables\n        Add_iptables\n        Save_iptables\n    fi\n    if [[ ${aria2_dir_old} != ${aria2_dir} ]]; then\n        mkdir -p ${aria2_dir}\n        aria2_dir_2=$(echo \"${aria2_dir}\" | sed 's/\\//\\\\\\//g')\n        aria2_dir_old_2=$(echo \"${aria2_dir_old}\" | sed 's/\\//\\\\\\//g')\n        sed -i \"s@^\\(DOWNLOAD_PATH='\\).*@\\1${aria2_dir_2}'@\" ${aria2_conf_dir}/*.sh\n    fi\n    Restart_aria2\n}\nReset_aria2_conf() {\n    Read_config\n    aria2_port_old=${aria2_port}\n    echo\n    echo -e \"${Tip} 此操作将重新下载 Aria2 完美配置方案，所有已设定的配置将丢失。\"\n    echo\n    read -e -p \"按任意键继续，按 Ctrl+C 组合键取消\" var\n    Download_aria2_conf\n    Read_config\n    if [[ ${aria2_port_old} != ${aria2_port} ]]; then\n        aria2_RPC_port=${aria2_port}\n        aria2_port=${aria2_port_old}\n        Del_iptables\n        Add_iptables\n        Save_iptables\n    fi\n    Restart_aria2\n}\nRead_config() {\n    status_type=$1\n    if [[ ! -e ${aria2_conf} ]]; then\n        if [[ ${status_type} != \"un\" ]]; then\n            echo -e \"${Error} Aria2 配置文件不存在 !\" && exit 1\n        fi\n    else\n        conf_text=$(cat ${aria2_conf} | grep -v '#')\n        aria2_dir=$(echo -e \"${conf_text}\" | grep \"^dir=\" | awk -F \"=\" '{print $NF}')\n        aria2_port=$(echo -e \"${conf_text}\" | grep \"^rpc-listen-port=\" | awk -F \"=\" '{print $NF}')\n        aria2_passwd=$(echo -e \"${conf_text}\" | grep \"^rpc-secret=\" | awk -F \"=\" '{print $NF}')\n        aria2_bt_port=$(echo -e \"${conf_text}\" | grep \"^listen-port=\" | awk -F \"=\" '{print $NF}')\n        aria2_dht_port=$(echo -e \"${conf_text}\" | grep \"^dht-listen-port=\" | awk -F \"=\" '{print $NF}')\n    fi\n}\nView_Aria2() {\n    check_installed_status\n    Read_config\n    IPV4=$(\n        wget -qO- -t1 -T2 -4 api.ip.sb/ip ||\n            wget -qO- -t1 -T2 -4 ifconfig.io/ip ||\n            wget -qO- -t1 -T2 -4 www.trackip.net/ip\n    )\n    IPV6=$(\n        wget -qO- -t1 -T2 -6 api.ip.sb/ip ||\n            wget -qO- -t1 -T2 -6 ifconfig.io/ip ||\n            wget -qO- -t1 -T2 -6 www.trackip.net/ip\n    )\n    [[ -z \"${IPV4}\" ]] && IPV4=\"IPv4 地址检测失败\"\n    [[ -z \"${IPV6}\" ]] && IPV6=\"IPv6 地址检测失败\"\n    [[ -z \"${aria2_dir}\" ]] && aria2_dir=\"找不到配置参数\"\n    [[ -z \"${aria2_port}\" ]] && aria2_port=\"找不到配置参数\"\n    [[ -z \"${aria2_passwd}\" ]] && aria2_passwd=\"找不到配置参数(或无密钥)\"\n    if [[ -z \"${IPV4}\" || -z \"${aria2_port}\" ]]; then\n        AriaNg_URL=\"null\"\n    else\n        AriaNg_API=\"/#!/settings/rpc/set/ws/${IPV4}/${aria2_port}/jsonrpc/$(echo -n ${aria2_passwd} | base64)\"\n        AriaNg_URL=\"http://ariang.js.org${AriaNg_API}\"\n    fi\n    clear\n    echo -e \"\\nAria2 简单配置信息：\\n\n IPv4 地址\\t: ${Green_font_prefix}${IPV4}${Font_color_suffix}\n IPv6 地址\\t: ${Green_font_prefix}${IPV6}${Font_color_suffix}\n RPC 端口\\t: ${Green_font_prefix}${aria2_port}${Font_color_suffix}\n RPC 密钥\\t: ${Green_font_prefix}${aria2_passwd}${Font_color_suffix}\n 下载目录\\t: ${Green_font_prefix}${aria2_dir}${Font_color_suffix}\n AriaNg 链接\\t: ${Green_font_prefix}${AriaNg_URL}${Font_color_suffix}\\n\"\n}\nView_Log() {\n    [[ ! -e ${aria2_log} ]] && echo -e \"${Error} Aria2 日志文件不存在 !\" && exit 1\n    echo && echo -e \"${Tip} 按 ${Red_font_prefix}Ctrl+C${Font_color_suffix} 终止查看日志\" && echo -e \"如果需要查看完整日志内容，请用 ${Red_font_prefix}cat ${aria2_log}${Font_color_suffix} 命令。\" && echo\n    tail -f ${aria2_log}\n}\nClean_Log() {\n    [[ ! -e ${aria2_log} ]] && echo -e \"${Error} Aria2 日志文件不存在 !\" && exit 1\n    echo >${aria2_log}\n    echo -e \"${Info} Aria2 日志已清空 !\"\n}\ncrontab_update_status() {\n    crontab -l | grep \"tracker.sh\"\n}\nUpdate_bt_tracker_cron() {\n    check_installed_status\n    check_crontab_installed_status\n    if [[ -z $(crontab_update_status) ]]; then\n        echo\n        echo -e \" 是否开启 ${Green_font_prefix}自动更新 BT-Tracker${Font_color_suffix} 功能？(可能会增强 BT 下载速率)[Y/n] \\c\"\n        read -e crontab_update_status_ny\n        [[ -z \"${crontab_update_status_ny}\" ]] && crontab_update_status_ny=\"y\"\n        if [[ ${crontab_update_status_ny} == [Yy] ]]; then\n            crontab_update_start\n        else\n            echo && echo \" 已取消...\"\n        fi\n    else\n        echo\n        echo -e \" 是否关闭 ${Red_font_prefix}自动更新 BT-Tracker${Font_color_suffix} 功能？[y/N] \\c\"\n        read -e crontab_update_status_ny\n        [[ -z \"${crontab_update_status_ny}\" ]] && crontab_update_status_ny=\"n\"\n        if [[ ${crontab_update_status_ny} == [Yy] ]]; then\n            crontab_update_stop\n        else\n            echo && echo \" 已取消...\"\n        fi\n    fi\n}\ncrontab_update_start() {\n    crontab -l >\"/tmp/crontab.bak\"\n    sed -i \"/aria2.sh update-bt-tracker/d\" \"/tmp/crontab.bak\"\n    sed -i \"/tracker.sh/d\" \"/tmp/crontab.bak\"\n    echo -e \"\\n0 7 * * * /bin/bash <(wget -qO- git.io/tracker.sh) ${aria2_conf} RPC 2>&1 | tee ${aria2_conf_dir}/tracker.log\" >>\"/tmp/crontab.bak\"\n    crontab \"/tmp/crontab.bak\"\n    rm -f \"/tmp/crontab.bak\"\n    if [[ -z $(crontab_update_status) ]]; then\n        echo && echo -e \"${Error} 自动更新 BT-Tracker 开启失败 !\" && exit 1\n    else\n        Update_bt_tracker\n        echo && echo -e \"${Info} 自动更新 BT-Tracker 开启成功 !\"\n    fi\n}\ncrontab_update_stop() {\n    crontab -l >\"/tmp/crontab.bak\"\n    sed -i \"/aria2.sh update-bt-tracker/d\" \"/tmp/crontab.bak\"\n    sed -i \"/tracker.sh/d\" \"/tmp/crontab.bak\"\n    crontab \"/tmp/crontab.bak\"\n    rm -f \"/tmp/crontab.bak\"\n    if [[ -n $(crontab_update_status) ]]; then\n        echo && echo -e \"${Error} 自动更新 BT-Tracker 关闭失败 !\" && exit 1\n    else\n        echo && echo -e \"${Info} 自动更新 BT-Tracker 关闭成功 !\"\n    fi\n}\nUpdate_bt_tracker() {\n    check_installed_status\n    check_pid\n    [[ -z $PID ]] && {\n        bash <(wget -qO- git.io/tracker.sh) ${aria2_conf}\n    } || {\n        bash <(wget -qO- git.io/tracker.sh) ${aria2_conf} RPC\n    }\n}\nUpdate_aria2() {\n    check_installed_status\n    check_new_ver\n    check_ver_comparison\n}\nUninstall_aria2() {\n    check_installed_status \"un\"\n    echo \"确定要卸载 Aria2 ? (y/N)\"\n    echo\n    read -e -p \"(默认: n):\" unyn\n    [[ -z ${unyn} ]] && unyn=\"n\"\n    if [[ ${unyn} == [Yy] ]]; then\n        crontab -l >\"/tmp/crontab.bak\"\n        sed -i \"/aria2.sh/d\" \"/tmp/crontab.bak\"\n        sed -i \"/tracker.sh/d\" \"/tmp/crontab.bak\"\n        crontab \"/tmp/crontab.bak\"\n        rm -f \"/tmp/crontab.bak\"\n        check_pid\n        [[ ! -z $PID ]] && kill -9 ${PID}\n        Read_config \"un\"\n        Del_iptables\n        Save_iptables\n        rm -rf \"${aria2c}\"\n        rm -rf \"${aria2_conf_dir}\"\n        if [[ ${release} = \"centos\" ]]; then\n            chkconfig --del aria2\n        else\n            update-rc.d -f aria2 remove\n        fi\n        rm -rf \"/etc/init.d/aria2\"\n        echo && echo \"Aria2 卸载完成 !\" && echo\n    else\n        echo && echo \"卸载已取消...\" && echo\n    fi\n}\nAdd_iptables() {\n    iptables -I INPUT -m state --state NEW -m tcp -p tcp --dport ${aria2_RPC_port} -j ACCEPT\n    iptables -I INPUT -m state --state NEW -m tcp -p tcp --dport ${aria2_bt_port} -j ACCEPT\n    iptables -I INPUT -m state --state NEW -m udp -p udp --dport ${aria2_dht_port} -j ACCEPT\n}\nDel_iptables() {\n    iptables -D INPUT -m state --state NEW -m tcp -p tcp --dport ${aria2_port} -j ACCEPT\n    iptables -D INPUT -m state --state NEW -m tcp -p tcp --dport ${aria2_bt_port} -j ACCEPT\n    iptables -D INPUT -m state --state NEW -m udp -p udp --dport ${aria2_dht_port} -j ACCEPT\n}\nSave_iptables() {\n    if [[ ${release} == \"centos\" ]]; then\n        service iptables save\n    else\n        iptables-save >/etc/iptables.up.rules\n    fi\n}\nSet_iptables() {\n    if [[ ${release} == \"centos\" ]]; then\n        service iptables save\n        chkconfig --level 2345 iptables on\n    else\n        iptables-save >/etc/iptables.up.rules\n        echo -e '#!/bin/bash\\n/sbin/iptables-restore < /etc/iptables.up.rules' >/etc/network/if-pre-up.d/iptables\n        chmod +x /etc/network/if-pre-up.d/iptables\n    fi\n}\nUpdate_Shell() {\n    sh_new_ver=$(wget -qO- -t1 -T3 \"https://raw.githubusercontent.com/P3TERX/aria2.sh/master/aria2.sh\" | grep 'sh_ver=\"' | awk -F \"=\" '{print $NF}' | sed 's/\\\"//g' | head -1) && sh_new_type=\"github\"\n    [[ -z ${sh_new_ver} ]] && echo -e \"${Error} 无法链接到 Github !\" && exit 0\n    if [[ -e \"/etc/init.d/aria2\" ]]; then\n        rm -rf /etc/init.d/aria2\n        Service_aria2\n        Restart_aria2\n    fi\n    if [[ -n $(crontab_update_status) ]]; then\n        crontab_update_stop\n    fi\n    wget -N \"https://raw.githubusercontent.com/P3TERX/aria2.sh/master/aria2.sh\" && chmod +x aria2.sh\n    echo -e \"脚本已更新为最新版本[ ${sh_new_ver} ] !(注意：因为更新方式为直接覆盖当前运行的脚本，所以可能下面会提示一些报错，无视即可)\" && exit 0\n}\n\necho && echo -e \" Aria2 一键安装管理脚本 增强版 ${Red_font_prefix}[v${sh_ver}]${Font_color_suffix} by \\033[1;35mP3TERX.COM\\033[0m\n \n ${Green_font_prefix} 0.${Font_color_suffix} 升级脚本\n ———————————————————————\n ${Green_font_prefix} 1.${Font_color_suffix} 安装 Aria2\n ${Green_font_prefix} 2.${Font_color_suffix} 更新 Aria2\n ${Green_font_prefix} 3.${Font_color_suffix} 卸载 Aria2\n ———————————————————————\n ${Green_font_prefix} 4.${Font_color_suffix} 启动 Aria2\n ${Green_font_prefix} 5.${Font_color_suffix} 停止 Aria2\n ${Green_font_prefix} 6.${Font_color_suffix} 重启 Aria2\n ———————————————————————\n ${Green_font_prefix} 7.${Font_color_suffix} 修改 配置\n ${Green_font_prefix} 8.${Font_color_suffix} 查看 配置\n ${Green_font_prefix} 9.${Font_color_suffix} 查看 日志\n ${Green_font_prefix}10.${Font_color_suffix} 清空 日志\n ———————————————————————\n ${Green_font_prefix}11.${Font_color_suffix} 手动更新 BT-Tracker\n ${Green_font_prefix}12.${Font_color_suffix} 自动更新 BT-Tracker\n ———————————————————————\" && echo\nif [[ -e ${aria2c} ]]; then\n    check_pid\n    if [[ ! -z \"${PID}\" ]]; then\n        echo -e \" Aria2 状态: ${Green_font_prefix}已安装${Font_color_suffix} | ${Green_font_prefix}已启动${Font_color_suffix}\"\n    else\n        echo -e \" Aria2 状态: ${Green_font_prefix}已安装${Font_color_suffix} | ${Red_font_prefix}未启动${Font_color_suffix}\"\n    fi\n    if [[ -n $(crontab_update_status) ]]; then\n        echo\n        echo -e \" 自动更新 BT-Tracker: ${Green_font_prefix}已开启${Font_color_suffix}\"\n    else\n        echo\n        echo -e \" 自动更新 BT-Tracker: ${Red_font_prefix}未开启${Font_color_suffix}\"\n    fi\nelse\n    echo -e \" Aria2 状态: ${Red_font_prefix}未安装${Font_color_suffix}\"\nfi\necho\nread -e -p \" 请输入数字 [0-12]:\" num\ncase \"$num\" in\n0)\n    Update_Shell\n    ;;\n1)\n    Install_aria2\n    ;;\n2)\n    Update_aria2\n    ;;\n3)\n    Uninstall_aria2\n    ;;\n4)\n    Start_aria2\n    ;;\n5)\n    Stop_aria2\n    ;;\n6)\n    Restart_aria2\n    ;;\n7)\n    Set_aria2\n    ;;\n8)\n    View_Aria2\n    ;;\n9)\n    View_Log\n    ;;\n10)\n    Clean_Log\n    ;;\n11)\n    Update_bt_tracker\n    ;;\n12)\n    Update_bt_tracker_cron\n    ;;\n*)\n    echo\n    echo -e \" ${Error} 请输入正确的数字\"\n    ;;\nesac\n"
        },
        {
          "name": "service",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}