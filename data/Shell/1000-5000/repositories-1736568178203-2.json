{
  "metadata": {
    "timestamp": 1736568178203,
    "page": 2,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjEw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "appleboy/ssh-action",
      "stars": 4948,
      "defaultBranch": "master",
      "files": [
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".goreleaser.yaml",
          "type": "blob",
          "size": 0.65234375,
          "content": "builds:\n  - # If true, skip the build.\n    # Useful for library projects.\n    # Default is false\n    skip: true\n\nchangelog:\n  use: github\n  groups:\n    - title: Features\n      regexp: \"^.*feat[(\\\\w)]*:+.*$\"\n      order: 0\n    - title: \"Bug fixes\"\n      regexp: \"^.*fix[(\\\\w)]*:+.*$\"\n      order: 1\n    - title: \"Enhancements\"\n      regexp: \"^.*chore[(\\\\w)]*:+.*$\"\n      order: 2\n    - title: \"Refactor\"\n      regexp: \"^.*refactor[(\\\\w)]*:+.*$\"\n      order: 3\n    - title: \"Build process updates\"\n      regexp: ^.*?(build|ci)(\\(.+\\))??!?:.+$\n      order: 4\n    - title: \"Documentation updates\"\n      regexp: ^.*?docs?(\\(.+\\))??!?:.+$\n      order: 4\n    - title: Others\n"
        },
        {
          "name": "LICENSE",
          "type": "blob",
          "size": 1.0400390625,
          "content": "MIT License\n\nCopyright (c) 2019 Bo-Yi Wu\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 14.4990234375,
          "content": "# üöÄ SSH for GitHub Actions\n\n[ÁπÅÈ´î‰∏≠Êñá](./README.zh-tw.md) | [ÁÆÄ‰Ωì‰∏≠Êñá](./README.zh-cn.md)\n\n[GitHub Action](https://github.com/features/actions) for executing remote SSH commands.\n\n![ssh workflow](./images/ssh-workflow.png)\n\n[![testing main branch](https://github.com/appleboy/ssh-action/actions/workflows/main.yml/badge.svg)](https://github.com/appleboy/ssh-action/actions/workflows/main.yml)\n\nThis project is built using [Golang](https://go.dev) and [drone-ssh](https://github.com/appleboy/drone-ssh). üöÄ\n\n## Input variables\n\nSee [action.yml](./action.yml) for more detailed information.\n\n| Input Parameter           | Description                                                                              | Default Value |\n| ------------------------- | ---------------------------------------------------------------------------------------- | ------------- |\n| host                      | SSH host address                                                                         |               |\n| port                      | SSH port number                                                                          | 22            |\n| passphrase                | SSH key passphrase                                                                       |               |\n| username                  | SSH username                                                                             |               |\n| password                  | SSH password                                                                             |               |\n| protocol                  | SSH protocol version (tcp, tcp4, tcp6)                                                   | tcp           |\n| sync                      | Enable synchronous execution if multiple hosts                                           | false         |\n| use_insecure_cipher       | Include more ciphers with use_insecure_cipher                                            | false         |\n| cipher                    | Allowed cipher algorithms. If unspecified, a sensible default                            |               |\n| timeout                   | Timeout duration for SSH to host                                                         | 30s           |\n| command_timeout           | Timeout duration for SSH command                                                         | 10m           |\n| key                       | Content of SSH private key. e.g., raw content of ~/.ssh/id_rsa                           |               |\n| key_path                  | Path of SSH private key                                                                  |               |\n| fingerprint               | SHA256 fingerprint of the host public key                                                |               |\n| proxy_host                | SSH proxy host                                                                           |               |\n| proxy_port                | SSH proxy port                                                                           | 22            |\n| proxy_protocol            | SSH proxy protocol version (tcp, tcp4, tcp6)                                             | tcp           |\n| proxy_username            | SSH proxy username                                                                       |               |\n| proxy_password            | SSH proxy password                                                                       |               |\n| proxy_passphrase          | SSH proxy key passphrase                                                                 |               |\n| proxy_timeout             | Timeout for SSH to proxy host                                                            | 30s           |\n| proxy_key                 | Content of SSH proxy private key                                                         |               |\n| proxy_key_path            | Path of SSH proxy private key                                                            |               |\n| proxy_fingerprint         | SHA256 fingerprint of the proxy host public key                                          |               |\n| proxy_cipher              | Allowed cipher algorithms for the proxy                                                  |               |\n| proxy_use_insecure_cipher | Include more ciphers with use_insecure_cipher for the proxy                              | false         |\n| script                    | Execute commands                                                                         |               |\n| script_path               | Execute commands from a file                                                             |               |\n| envs                      | Pass environment variables to shell script                                               |               |\n| envs_format               | Flexible configuration of environment value transfer                                     |               |\n| debug                     | Enable debug mode                                                                        | false         |\n| allenvs                   | Pass the environment variables with prefix value of `GITHUB_` and `INPUT_` to the script | false         |\n| request_pty               | Request a pseudo-terminal from the server                                                | false         |\n\n## Usage\n\nExecuting remote SSH commands.\n\n```yaml\nname: remote ssh command\non: [push]\njobs:\n  build:\n    name: Build\n    runs-on: ubuntu-latest\n    steps:\n      - name: executing remote ssh commands using password\n        uses: appleboy/ssh-action@v1.2.0\n        with:\n          host: ${{ secrets.HOST }}\n          username: linuxserver.io\n          password: ${{ secrets.PASSWORD }}\n          port: ${{ secrets.PORT }}\n          script: whoami\n```\n\noutput:\n\n```sh\n======CMD======\nwhoami\n======END======\nlinuxserver.io\n===============================================\n‚úÖ Successfully executed commands to all hosts.\n===============================================\n```\n\n### Setting up a SSH Key\n\nMake sure to follow the below steps while creating SSH Keys and using them.\nThe best practice is create the SSH Keys on local machine not remote machine.\nLogin with username specified in Github Secrets. Generate a RSA Key-Pair:\n\n### Generate rsa key\n\n```bash\nssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n```\n\n### Generate ed25519 key\n\n```bash\nssh-keygen -t ed25519 -a 200 -C \"your_email@example.com\"\n```\n\nAdd newly generated key into Authorized keys. Read more about authorized keys [here](https://www.ssh.com/ssh/authorized_keys/).\n\n### Add rsa key into Authorized keys\n\n```bash\ncat .ssh/id_rsa.pub | ssh b@B 'cat >> .ssh/authorized_keys'\n```\n\n### Add ed25519 key into Authorized keys\n\n```bash\ncat .ssh/id_ed25519.pub | ssh b@B 'cat >> .ssh/authorized_keys'\n```\n\nCopy Private Key content and paste in Github Secrets.\n\n### Copy rsa Private key\n\nBefore copying the private key, install `clip` command as shown below:\n\n```bash\n# Ubuntu\nsudo apt-get install xclip\n```\n\ncopy the private key:\n\n```bash\n# macOS\npbcopy < ~/.ssh/id_rsa\n# Ubuntu\nxclip < ~/.ssh/id_rsa\n```\n\n### Copy ed25519 Private key\n\n```bash\n# macOS\npbcopy < ~/.ssh/id_ed25519\n# Ubuntu\nxclip < ~/.ssh/id_ed25519\n```\n\nSee the detail information about [SSH login without password](http://www.linuxproblem.org/art_9.html).\n\n**A note** from one of our readers: Depending on your version of SSH you might also have to do the following changes:\n\n- Put the public key in `.ssh/authorized_keys2`\n- Change the permissions of `.ssh` to 700\n- Change the permissions of `.ssh/authorized_keys2` to 640\n\n### If you are using OpenSSH\n\nIf you are currently using OpenSSH and are getting the following error:\n\n```bash\nssh: handshake failed: ssh: unable to authenticate, attempted methods [none publickey]\n```\n\nMake sure that your key algorithm of choice is supported. On Ubuntu 20.04 or later you must explicitly allow the use of the ssh-rsa algorithm. Add the following line to your OpenSSH daemon file (which is either `/etc/ssh/sshd_config` or a drop-in file under `/etc/ssh/sshd_config.d/`):\n\n```bash\nCASignatureAlgorithms +ssh-rsa\n```\n\nAlternatively, `ed25519` keys are accepted by default in OpenSSH. You could use this instead of rsa if needed:\n\n```bash\nssh-keygen -t ed25519 -a 200 -C \"your_email@example.com\"\n```\n\n### Example\n\n#### Executing remote ssh commands using password\n\n```yaml\n- name: executing remote ssh commands using password\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    password: ${{ secrets.PASSWORD }}\n    port: ${{ secrets.PORT }}\n    script: whoami\n```\n\n#### Using private key\n\n```yaml\n- name: executing remote ssh commands using ssh key\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    key: ${{ secrets.KEY }}\n    port: ${{ secrets.PORT }}\n    script: whoami\n```\n\n#### Multiple Commands\n\n```yaml\n- name: multiple command\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    key: ${{ secrets.KEY }}\n    port: ${{ secrets.PORT }}\n    script: |\n      whoami\n      ls -al\n```\n\n![result](./images/output-result.png)\n\n#### Commands from a file\n\n```yaml\n- name: file commands\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    key: ${{ secrets.KEY }}\n    port: ${{ secrets.PORT }}\n    script_path: scripts/script.sh\n```\n\n#### Multiple Hosts\n\n```diff\n  - name: multiple host\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n-     host: \"foo.com\"\n+     host: \"foo.com,bar.com\"\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n      script: |\n        whoami\n        ls -al\n```\n\nThe default value of `port` is `22`.\n\n#### Multiple hosts with different port\n\n```diff\n  - name: multiple host\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n-     host: \"foo.com\"\n+     host: \"foo.com:1234,bar.com:5678\"\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### Synchronous execution on multiple hosts\n\n```diff\n  - name: multiple host\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: \"foo.com,bar.com\"\n+     sync: true\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### Pass environment variable to shell script\n\n```diff\n  - name: pass environment\n    uses: appleboy/ssh-action@v1.2.0\n+   env:\n+     FOO: \"BAR\"\n+     BAR: \"FOO\"\n+     SHA: ${{ github.sha }}\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     envs: FOO,BAR,SHA\n      script: |\n        echo \"I am $FOO\"\n        echo \"I am $BAR\"\n        echo \"sha: $SHA\"\n```\n\n_Inside `env` object, you need to pass every environment variable as a string, passing `Integer` data type or any other may output unexpected results._\n\n#### How to connect remote server using `ProxyCommand`?\n\n```bash\n+--------+       +----------+      +-----------+\n| Laptop | <-->  | Jumphost | <--> | FooServer |\n+--------+       +----------+      +-----------+\n```\n\nin your `~/.ssh/config`, you will see the following.\n\n```bash\nHost Jumphost\n  HostName Jumphost\n  User ubuntu\n  Port 22\n  IdentityFile ~/.ssh/keys/jump_host.pem\n\nHost FooServer\n  HostName FooServer\n  User ubuntu\n  Port 22\n  ProxyCommand ssh -q -W %h:%p Jumphost\n```\n\n#### How to convert to YAML format of GitHubActions\n\n```diff\n  - name: ssh proxy command\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     proxy_host: ${{ secrets.PROXY_HOST }}\n+     proxy_username: ${{ secrets.PROXY_USERNAME }}\n+     proxy_key: ${{ secrets.PROXY_KEY }}\n+     proxy_port: ${{ secrets.PROXY_PORT }}\n      script: |\n        mkdir abc/def\n        ls -al\n```\n\n#### Protecting a Private Key\n\nThe purpose of the passphrase is usually to encrypt the private key.\nThis makes the key file by itself useless to an attacker.\nIt is not uncommon for files to leak from backups or decommissioned hardware, and hackers commonly exfiltrate files from compromised systems.\n\n```diff\n  - name: ssh key passphrase\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     passphrase: ${{ secrets.PASSPHRASE }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### Using host fingerprint verification\n\nSetting up SSH host fingerprint verification can help to prevent Person-in-the-Middle attacks. Before setting this up, run the command below to get your SSH host fingerprint. Remember to replace `ed25519` with your appropriate key type (`rsa`, `dsa`, etc.) that your server is using and `example.com` with your host.\n\nIn modern OpenSSH releases, the _default_ key types to be fetched are `rsa` (since version 5.1), `ecdsa` (since version 6.0), and `ed25519` (since version 6.7).\n\n```sh\nssh example.com ssh-keygen -l -f /etc/ssh/ssh_host_ed25519_key.pub | cut -d ' ' -f2\n```\n\nNow you can adjust you config:\n\n```diff\n  - name: ssh key passphrase\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     fingerprint: ${{ secrets.FINGERPRINT }}\n      script: |\n        whoami\n        ls -al\n```\n\n## Q&A\n\n### Command not found (npm or other command)\n\nSee the [issue comment](https://github.com/appleboy/ssh-action/issues/31#issuecomment-1006565847) about interactive vs non interactive shell. Thanks @kocyigityunus for the solution.\n\nBasically, if you are running a command in a non interactive shell, like ssh-action, on many linux distros,\n\n`/etc/bash.bashrc` file has a specific command that returns only, so some of the files didn't run and some specific commands doesn't add to path,\n\n```sh\n# /etc/bash.bashrc\n# System-wide .bashrc file for interactive bash(1) shells.\n\n# To enable the settings / commands in this file for login shells as well,\n# this file has to be sourced in /etc/profile.\n\n# If not running interactively, don't do anything\n[ -z \"$PS1\" ] && return`\n```\n\njust comment out the line that returns early and everything should work fine, or you can use the real paths of the commands that you would like to use.\n\n## Contributing\n\nWe would love for you to contribute to `appleboy/ssh-action`, pull requests are welcome!\n\n## License\n\nThe scripts and documentation in this project are released under the [MIT License](LICENSE)\n"
        },
        {
          "name": "README.zh-cn.md",
          "type": "blob",
          "size": 12.0927734375,
          "content": "# üöÄ Áî®‰∫é GitHub Actions ÁöÑ SSH\n\n[English](./README.md) | [ÁπÅÈ´î‰∏≠Êñá](./README.zh-tw.md)\n\n[GitHub Action](https://github.com/features/actions) Áî®‰∫éÊâßË°åËøúÁ®ã SSH ÂëΩ‰ª§„ÄÇ\n\n![ssh workflow](./images/ssh-workflow.png)\n\n[![testing main branch](https://github.com/appleboy/ssh-action/actions/workflows/main.yml/badge.svg)](https://github.com/appleboy/ssh-action/actions/workflows/main.yml)\n\nËØ•È°πÁõÆ‰ΩøÁî® [Golang](https://go.dev) Âíå [drone-ssh](https://github.com/appleboy/drone-ssh) ÊûÑÂª∫„ÄÇüöÄ\n\n## ËæìÂÖ•ÂèòÈáè\n\nÊõ¥ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºåËØ∑ÂèÇËÄÉ [action.yml](./action.yml)„ÄÇ\n\n| ËæìÂÖ•ÂèÇÊï∞                  | ÊèèËø∞                                                  | ÈªòËÆ§ÂÄº |\n| ------------------------- | ----------------------------------------------------- | ------ |\n| host                      | SSH ‰∏ªÊú∫Âú∞ÂùÄ                                          |        |\n| port                      | SSH Á´ØÂè£Âè∑                                            | 22     |\n| passphrase                | SSH ÂØÜÈí•ÂØÜÁ†ÅÁü≠ËØ≠                                      |        |\n| username                  | SSH Áî®Êà∑Âêç                                            |        |\n| password                  | SSH ÂØÜÁ†Å                                              |        |\n| protocol                  | SSH ÂçèËÆÆÁâàÊú¨Ôºàtcp, tcp4, tcp6Ôºâ                       | tcp    |\n| sync                      | Â¶ÇÊûúÊúâÂ§ö‰∏™‰∏ªÊú∫ÔºåÂêØÁî®ÂêåÊ≠•ÊâßË°å                          | false  |\n| use_insecure_cipher       | ‰ΩøÁî®‰∏çÂÆâÂÖ®ÁöÑÂØÜÁ†ÅÁÆóÊ≥ï                                  | false  |\n| cipher                    | ÂÖÅËÆ∏ÁöÑÂØÜÁ†ÅÁÆóÊ≥ï„ÄÇÂ¶ÇÊûúÊú™ÊåáÂÆöÔºåÂàô‰ΩøÁî®ÈÄÇÂΩìÁöÑÁÆóÊ≥ï          |        |\n| timeout                   | SSH ËøûÊé•Âà∞‰∏ªÊú∫ÁöÑË∂ÖÊó∂Êó∂Èó¥                              | 30s    |\n| command_timeout           | SSH ÂëΩ‰ª§ÁöÑË∂ÖÊó∂Êó∂Èó¥                                    | 10m    |\n| key                       | SSH ÁßÅÈí•ÁöÑÂÜÖÂÆπÔºå‰æãÂ¶Ç ~/.ssh/id_rsa ÁöÑÂéüÂßãÂÜÖÂÆπ         |        |\n| key_path                  | SSH ÁßÅÈí•ÁöÑË∑ØÂæÑ                                        |        |\n| fingerprint               | ‰∏ªÊú∫ÂÖ¨Èí•ÁöÑ SHA256 ÊåáÁ∫π                                |        |\n| proxy_host                | SSH ‰ª£ÁêÜ‰∏ªÊú∫                                          |        |\n| proxy_port                | SSH ‰ª£ÁêÜÁ´ØÂè£                                          | 22     |\n| proxy_protocol            | SSH ‰ª£ÁêÜÂçèËÆÆÁâàÊú¨Ôºàtcp, tcp4, tcp6Ôºâ                   | tcp    |\n| proxy_username            | SSH ‰ª£ÁêÜÁî®Êà∑Âêç                                        |        |\n| proxy_password            | SSH ‰ª£ÁêÜÂØÜÁ†Å                                          |        |\n| proxy_passphrase          | SSH ‰ª£ÁêÜÂØÜÈí•ÂØÜÁ†ÅÁü≠ËØ≠                                  |        |\n| proxy_timeout             | SSH ËøûÊé•Âà∞‰ª£ÁêÜ‰∏ªÊú∫ÁöÑË∂ÖÊó∂Êó∂Èó¥                          | 30s    |\n| proxy_key                 | SSH ‰ª£ÁêÜÁßÅÈí•ÁöÑÂÜÖÂÆπ                                    |        |\n| proxy_key_path            | SSH ‰ª£ÁêÜÁßÅÈí•ÁöÑË∑ØÂæÑ                                    |        |\n| proxy_fingerprint         | ‰ª£ÁêÜ‰∏ªÊú∫ÂÖ¨Èí•ÁöÑ SHA256 ÊåáÁ∫π                            |        |\n| proxy_cipher              | ‰ª£ÁêÜÂÖÅËÆ∏ÁöÑÂØÜÁ†ÅÁÆóÊ≥ï                                    |        |\n| proxy_use_insecure_cipher | ‰ΩøÁî®‰∏çÂÆâÂÖ®ÁöÑÂØÜÁ†ÅÁÆóÊ≥ï                                  | false  |\n| script                    | ÊâßË°åÂëΩ‰ª§                                              |        |\n| script_path               | ‰ªéÊñá‰ª∂ÊâßË°åÂëΩ‰ª§                                        |        |\n| envs                      | ‰º†ÈÄíÁéØÂ¢ÉÂèòÈáèÂà∞ shell ËÑöÊú¨                             |        |\n| envs_format               | ÁéØÂ¢ÉÂèòÈáè‰º†ÈÄíÁöÑÁÅµÊ¥ªÈÖçÁΩÆ                                |        |\n| debug                     | ÂêØÁî®Ë∞ÉËØïÊ®°Âºè                                          | false  |\n| allenvs                   | Â∞ÜÂ∏¶Êúâ `GITHUB_` Âíå `INPUT_` ÂâçÁºÄÁöÑÁéØÂ¢ÉÂèòÈáè‰º†ÈÄíÁªôËÑöÊú¨ | false  |\n| request_pty               | ËØ∑Ê±Ç‰º™ÁªàÁ´Ø                                            | false  |\n\n## ‰ΩøÁî®ÊñπÊ≥ï\n\nÊâßË°åËøúÁ®ã SSH ÂëΩ‰ª§\n\n```yaml\nname: remote ssh command\non: [push]\njobs:\n  build:\n    name: Build\n    runs-on: ubuntu-latest\n    steps:\n      - name: executing remote ssh commands using password\n        uses: appleboy/ssh-action@v1.2.0\n        with:\n          host: ${{ secrets.HOST }}\n          username: ${{ secrets.USERNAME }}\n          password: ${{ secrets.PASSWORD }}\n          port: ${{ secrets.PORT }}\n          script: whoami\n```\n\nÁîªÈù¢ËæìÂá∫\n\n```sh\n======CMD======\nwhoami\n======END======\nout: ***\n===============================================\n‚úÖ Successfully executed commands to all hosts.\n===============================================\n```\n\n### ËÆæÁΩÆ SSH ÂØÜÈí•\n\nËØ∑Âú®ÂàõÂª∫ SSH ÂØÜÈí•Âπ∂‰ΩøÁî® SSH ÂØÜÈí•Êó∂ÈÅµÂæ™‰ª•‰∏ãÊ≠•È™§„ÄÇÊúÄ‰Ω≥ÂÅöÊ≥ïÊòØÂú®Êú¨Âú∞Êú∫Âô®‰∏äÂàõÂª∫ SSH ÂØÜÈí•ËÄå‰∏çÊòØËøúÁ®ãÊú∫Âô®‰∏ä„ÄÇËØ∑‰ΩøÁî® Github Secrets ‰∏≠ÊåáÂÆöÁöÑÁî®Êà∑ÂêçÁôªÂΩï„ÄÇÁîüÊàê RSA ÂØÜÈí•Ôºö\n\n### ÁîüÊàê RSA ÂØÜÈí•\n\n```bash\nssh-keygen -t rsa -b 4096 -C ‚Äùyour_email@example.com‚Äú\n```\n\n### ÁîüÊàê ed25519 ÂØÜÈí•\n\n```bash\nssh-keygen -t ed25519 -a 200 -C ‚Äùyour_email@example.com‚Äú\n```\n\nÂ∞ÜÊñ∞ÁîüÊàêÁöÑÂØÜÈí•Ê∑ªÂä†Âà∞Â∑≤ÊéàÊùÉÁöÑÂØÜÈí•‰∏≠„ÄÇËØ¶ÁªÜ‰∫ÜËß£Â∑≤ÊéàÊùÉÁöÑÂØÜÈí•ËØ∑ÁÇπ[Ê≠§Â§Ñ](https://www.ssh.com/ssh/authorized_keys/)„ÄÇ\n\n### Â∞Ü RSA ÂØÜÈí•Ê∑ªÂä†Âà∞Â∑≤ÊéàÊùÉÂØÜÈí•‰∏≠\n\n```bash\ncat .ssh/id_rsa.pub | ssh b@B ‚Äôcat >> .ssh/authorized_keys‚Äò\n```\n\n### Â∞Ü ed25519 ÂØÜÈí•Ê∑ªÂä†Âà∞Â∑≤ÊéàÊùÉÂØÜÈí•‰∏≠\n\n```bash\ncat .ssh/id_ed25519.pub | ssh b@B ‚Äôcat >> .ssh/authorized_keys‚Äò\n```\n\nÂ§çÂà∂ÁßÅÈí•ÂÜÖÂÆπÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂Á≤òË¥¥Âà∞ Github Secrets ‰∏≠„ÄÇ\n\n### Â§çÂà∂ rsa ÁßÅÈí•ÂÜÖÂÆπ\n\n```bash\nclip < ~/.ssh/id_rsa\n```\n\n### Â§çÂà∂ ed25519 ÁßÅÈí•ÂÜÖÂÆπ\n\n```bash\nclip < ~/.ssh/id_ed25519\n```\n\nÊúâÂÖ≥Êó†ÈúÄÂØÜÁ†ÅÁôªÂΩï SSH ÁöÑËØ¶ÁªÜ‰ø°ÊÅØÔºåËØ∑[ËßÅËØ•ÁΩëÁ´ô](http://www.linuxproblem.org/art_9.html)„ÄÇ\n\n**Êù•Ëá™ËØªËÄÖÁöÑÊ≥®ÊÑè‰∫ãÈ°π**Ôºö Ê†πÊçÆÊÇ®ÁöÑ SSH ÁâàÊú¨ÔºåÊÇ®ÂèØËÉΩËøòÈúÄË¶ÅËøõË°å‰ª•‰∏ãÊõ¥ÊîπÔºö\n\n- Â∞ÜÂÖ¨Èí•ÊîæÂú® `.ssh/authorized_keys2` ‰∏≠\n- Â∞Ü `.ssh` ÁöÑÊùÉÈôêÊõ¥Êîπ‰∏∫ 700\n- Â∞Ü `.ssh/authorized_keys2` ÁöÑÊùÉÈôêÊõ¥Êîπ‰∏∫ 640\n\n### Â¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØ OpenSSH\n\nÂ¶ÇÊûúÊÇ®Ê≠£Âú®‰ΩøÁî® OpenSSHÔºåÂπ∂Âá∫Áé∞‰ª•‰∏ãÈîôËØØÔºö\n\n```bash\nssh: handshake failed: ssh: unable to authenticate, attempted methods [none publickey]\n```\n\nËØ∑Á°Æ‰øùÊÇ®ÊâÄÈÄâÊã©ÁöÑÂØÜÈí•ÁÆóÊ≥ïÂæóÂà∞ÊîØÊåÅ„ÄÇÂú® Ubuntu 20.04 ÊàñÊõ¥È´òÁâàÊú¨‰∏äÔºåÊÇ®ÂøÖÈ°ªÊòéÁ°ÆÂÖÅËÆ∏‰ΩøÁî® SSH-RSA ÁÆóÊ≥ï„ÄÇËØ∑Âú® OpenSSH ÂÆàÊä§ËøõÁ®ãÊñá‰ª∂‰∏≠Ê∑ªÂä†‰ª•‰∏ãË°åÔºàÂÆÉÂèØ‰ª•ÊòØ `/etc/ssh/sshd_config` Êàñ `/etc/ssh/sshd_config.d/` ‰∏≠ÁöÑ‰∏Ä‰∏™ÈôÑÂä†Êñá‰ª∂ÔºâÔºö\n\n```bash\nCASignatureAlgorithms +ssh-rsa\n```\n\nÊàñËÄÖÔºå`Ed25519` ÂØÜÈí•Âú® OpenSSH ‰∏≠ÈªòËÆ§Ë¢´Êé•Âèó„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®ÂÆÉÊù•Êõø‰ª£ RSA„ÄÇ\n\n```bash\nssh-keygen -t ed25519 -a 200 -C ‚Äùyour_email@example.com‚Äú\n```\n\n### Example\n\n#### ‰ΩøÁî®ÂØÜÁ†ÅÊâßË°åËøúÁ®ã SSH ÂëΩ‰ª§\n\n```yaml\n- name: executing remote ssh commands using password\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    password: ${{ secrets.PASSWORD }}\n    port: ${{ secrets.PORT }}\n    script: whoami\n```\n\n#### ‰ΩøÁî®ÁßÅÈí•\n\n```yaml\n- name: executing remote ssh commands using ssh key\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    key: ${{ secrets.KEY }}\n    port: ${{ secrets.PORT }}\n    script: whoami\n```\n\n#### Â§ö‰∏™ÂëΩ‰ª§\n\n```yaml\n- name: multiple command\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    key: ${{ secrets.KEY }}\n    port: ${{ secrets.PORT }}\n    script: |\n      whoami\n      ls -al\n```\n\n![result](./images/output-result.png)\n\n#### Â§öÂè∞‰∏ªÊú∫\n\n```diff\n  - name: multiple host\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n-     host: ‚Äùfoo.com‚Äú\n+     host: ‚Äùfoo.com,bar.com‚Äú\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### Commands from a file\n\n```yaml\n- name: file commands\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    key: ${{ secrets.KEY }}\n    port: ${{ secrets.PORT }}\n    script_path: scripts/script.sh\n```\n\n#### Â§ö‰∏™‰∏çÂêåÁ´ØÂè£ÁöÑ‰∏ªÊú∫\n\n```diff\n  - name: multiple host\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n-     host: ‚Äùfoo.com‚Äú\n+     host: ‚Äùfoo.com:1234,bar.com:5678‚Äú\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### Âú®Â§öÂè∞‰∏ªÊú∫‰∏äÂêåÊ≠•ÊâßË°å\n\n```diff\n  - name: multiple host\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ‚Äùfoo.com,bar.com‚Äú\n+     sync: true\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### Â∞ÜÁéØÂ¢ÉÂèòÈáè‰º†ÈÄíÂà∞ Shell ËÑöÊú¨\n\n```diff\n  - name: pass environment\n    uses: appleboy/ssh-action@v1.2.0\n+   env:\n+     FOO: ‚ÄùBAR‚Äú\n+     BAR: ‚ÄùFOO‚Äú\n+     SHA: ${{ github.sha }}\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     envs: FOO,BAR,SHA\n      script: |\n        echo ‚ÄùI am $FOO‚Äú\n        echo ‚ÄùI am $BAR‚Äú\n        echo ‚Äùsha: $SHA‚Äú\n```\n\n_Âú® `env` ÂØπË±°‰∏≠ÔºåÊÇ®ÈúÄË¶ÅÂ∞ÜÊØè‰∏™ÁéØÂ¢ÉÂèòÈáè‰Ωú‰∏∫Â≠óÁ¨¶‰∏≤‰º†ÈÄíÔºå‰º†ÈÄí `Integer` Êï∞ÊçÆÁ±ªÂûãÊàñ‰ªª‰ΩïÂÖ∂‰ªñÁ±ªÂûãÂèØËÉΩ‰ºö‰∫ßÁîüÊÑèÂ§ñÁªìÊûú„ÄÇ_\n\n#### Â¶Ç‰Ωï‰ΩøÁî® `ProxyCommand` ËøûÊé•ËøúÁ®ãÊúçÂä°Âô®Ôºü\n\n```bash\n+‚Äî‚Äî‚Äî+       +-‚Äî‚Äî‚Äî+      +‚Äî‚Äî‚Äî‚Äî+\n| Laptop | <‚Äî>  | Jumphost | <‚Äî> | FooServer |\n+‚Äî‚Äî‚Äî+       +-‚Äî‚Äî‚Äî+      +‚Äî‚Äî‚Äî‚Äî+\n```\n\nÂú®ÊÇ®ÁöÑ `~/.ssh/config` Êñá‰ª∂‰∏≠ÔºåÊÇ®‰ºöÁúãÂà∞‰ª•‰∏ãÂÜÖÂÆπ„ÄÇ\n\n```bash\nHost Jumphost\n  HostName Jumphost\n  User ubuntu\n  Port 22\n  IdentityFile ~/.ssh/keys/jump_host.pem\n\nHost FooServer\n  HostName FooServer\n  User ubuntu\n  Port 22\n  ProxyCommand ssh -q -W %h:%p Jumphost\n```\n\n#### Â¶Ç‰ΩïÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫ GitHubActions ÁöÑ YAML Ê†ºÂºèÔºü\n\n```diff\n  - name: ssh proxy command\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     proxy_host: ${{ secrets.PROXY_HOST }}\n+     proxy_username: ${{ secrets.PROXY_USERNAME }}\n+     proxy_key: ${{ secrets.PROXY_KEY }}\n+     proxy_port: ${{ secrets.PROXY_PORT }}\n      script: |\n        mkdir abc/def\n        ls -al\n```\n\n#### Â¶Ç‰Ωï‰øùÊä§ÁßÅÈí•Ôºü\n\nÂØÜÁ†ÅÁü≠ËØ≠ÈÄöÂ∏∏Áî®‰∫éÂä†ÂØÜÁßÅÈí•„ÄÇËøô‰ΩøÂæóÊîªÂáªËÄÖÊó†Ê≥ïÂçïÁã¨‰ΩøÁî®ÂØÜÈí•Êñá‰ª∂„ÄÇÊñá‰ª∂Ê≥ÑÈú≤ÂèØËÉΩÊù•Ëá™Â§á‰ªΩÊàñÂÅúÁî®ÁöÑÁ°¨‰ª∂ÔºåÈªëÂÆ¢ÈÄöÂ∏∏ÂèØ‰ª•‰ªéÂèóÊîªÂáªÁ≥ªÁªü‰∏≠Ê≥ÑÈú≤Êñá‰ª∂„ÄÇÂõ†Ê≠§Ôºå‰øùÊä§ÁßÅÈí•ÈùûÂ∏∏ÈáçË¶Å„ÄÇ\n\n```diff\n  - name: ssh key passphrase\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     passphrase: ${{ secrets.PASSPHRASE }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### ‰ΩøÁî®‰∏ªÊú∫ÊåáÁ∫πÈ™åËØÅ\n\nËÆæÁΩÆ SSH ‰∏ªÊú∫ÊåáÁ∫πÈ™åËØÅÂèØ‰ª•Â∏ÆÂä©Èò≤Ê≠¢‰∏≠Èó¥‰∫∫ÊîªÂáª„ÄÇÂú®ËÆæÁΩÆ‰πãÂâçÔºåËøêË°å‰ª•‰∏ãÂëΩ‰ª§‰ª•Ëé∑Âèñ SSH ‰∏ªÊú∫ÊåáÁ∫π„ÄÇËØ∑ËÆ∞ÂæóÂ∞Ü `ed25519` ÊõøÊç¢‰∏∫ÊÇ®ÈÄÇÂΩìÁöÑÂØÜÈí•Á±ªÂûãÔºà`rsa`„ÄÅ `dsa`Á≠âÔºâÔºåËÄå `example.com` ÂàôÊõøÊç¢‰∏∫ÊÇ®ÁöÑ‰∏ªÊú∫„ÄÇ\n\nÁé∞‰ª£ OpenSSH ÁâàÊú¨‰∏≠ÔºåÈúÄË¶ÅÊèêÂèñÁöÑ**ÈªòËÆ§ÂØÜÈí•**Á±ªÂûãÊòØ `rsa`Ôºà‰ªéÁâàÊú¨ 5.1 ÂºÄÂßãÔºâ„ÄÅ`ecdsa`Ôºà‰ªéÁâàÊú¨ 6.0 ÂºÄÂßãÔºâÂíå `ed25519`Ôºà‰ªéÁâàÊú¨ 6.7 ÂºÄÂßãÔºâ„ÄÇ\n\n```sh\nssh example.com ssh-keygen -l -f /etc/ssh/ssh_host_ed25519_key.pub | cut -d ‚Äô ‚Äò -f2\n```\n\nÁé∞Âú®ÊÇ®ÂèØ‰ª•Ë∞ÉÊï¥ÊÇ®ÁöÑÈÖçÁΩÆÔºö\n\n```diff\n  - name: ssh key passphrase\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     fingerprint: ${{ secrets.FINGERPRINT }}\n      script: |\n        whoami\n        ls -al\n```\n\n## Ë¥°ÁåÆ\n\nÊàë‰ª¨ÈùûÂ∏∏Â∏åÊúõÊÇ®‰∏∫ `appleboy/ssh-action` ÂÅöÂá∫Ë¥°ÁåÆÔºåÊ¨¢ËøéÊèê‰∫§ËØ∑Ê±ÇÔºÅ\n\n## ÊéàÊùÉÊñπÂºè\n\nÊú¨È°πÁõÆ‰∏≠ÁöÑËÑöÊú¨ÂíåÊñáÊ°£ÈááÁî® [MIT](LICENSE) ËÆ∏ÂèØËØÅ ÂèëÂ∏É„ÄÇ\n"
        },
        {
          "name": "README.zh-tw.md",
          "type": "blob",
          "size": 12.0322265625,
          "content": "# üöÄ GitHub Actions ÁöÑ SSH\n\n[English](./README.md) | [ÁÆÄ‰Ωì‰∏≠Êñá](./README.zh-cn.md)\n\n[GitHub Action](https://github.com/features/actions) Áî®ÊñºÂü∑Ë°åÈÅ†Á´Ø SSH ÂëΩ‰ª§„ÄÇ\n\n![ssh workflow](./images/ssh-workflow.png)\n\n[![testing main branch](https://github.com/appleboy/ssh-action/actions/workflows/main.yml/badge.svg)](https://github.com/appleboy/ssh-action/actions/workflows/main.yml)\n\nÊ≠§Â∞àÊ°à‰ΩøÁî® [Golang](https://go.dev) Âíå [drone-ssh](https://github.com/appleboy/drone-ssh) Âª∫Á´ã„ÄÇüöÄ\n\n## Ëº∏ÂÖ•ËÆäÊï∏\n\nË´ãÂèÉÈñ± [action.yml](./action.yml) ‰ª•Áç≤ÂèñÊõ¥Ë©≥Á¥∞ÁöÑ‰ø°ÊÅØ„ÄÇ\n\n| Ëº∏ÂÖ•ÂèÉÊï∏                  | ÊèèËø∞                                                  | È†êË®≠ÂÄº |\n| ------------------------- | ----------------------------------------------------- | ------ |\n| host                      | SSH ‰∏ªÊ©üÂú∞ÂùÄ                                          |        |\n| port                      | SSH Âü†Ëôü                                              | 22     |\n| passphrase                | SSH ÈáëÈë∞ÂØÜÁ¢º                                          |        |\n| username                  | SSH ‰ΩøÁî®ËÄÖÂêçÁ®±                                        |        |\n| password                  | SSH ÂØÜÁ¢º                                              |        |\n| protocol                  | SSH ÂçîË≠∞ÁâàÊú¨ (tcp, tcp4, tcp6)                        | tcp    |\n| sync                      | Â¶ÇÊûúÊúâÂ§öÂÄã‰∏ªÊ©üÔºåÂïüÁî®ÂêåÊ≠•Âü∑Ë°å                          | false  |\n| use_insecure_cipher       | ÂåÖÂê´Êõ¥Â§ö‰∏çÂÆâÂÖ®ÁöÑÂä†ÂØÜÁÆóÊ≥ï                              | false  |\n| cipher                    | ÂÖÅË®±ÁöÑÂä†ÂØÜÁÆóÊ≥ï„ÄÇÂ¶ÇÊûúÊú™ÊåáÂÆöÔºåÂâá‰ΩøÁî®ÂêàÁêÜÁöÑÈ†êË®≠ÂÄº        |        |\n| timeout                   | SSH ÈÄ£Êé•‰∏ªÊ©üÁöÑË∂ÖÊôÇÊôÇÈñì                                | 30s    |\n| command_timeout           | SSH ÂëΩ‰ª§ÁöÑË∂ÖÊôÇÊôÇÈñì                                    | 10m    |\n| key                       | SSH ÁßÅÈë∞ÁöÑÂÖßÂÆπ„ÄÇ‰æãÂ¶ÇÔºå~/.ssh/id_rsa ÁöÑÂéüÂßãÂÖßÂÆπ        |        |\n| key_path                  | SSH ÁßÅÈë∞ÁöÑË∑ØÂæë                                        |        |\n| fingerprint               | ‰∏ªÊ©üÂÖ¨Èë∞ÁöÑ SHA256 ÊåáÁ¥ã                                |        |\n| proxy_host                | SSH ‰ª£ÁêÜ‰∏ªÊ©ü                                          |        |\n| proxy_port                | SSH ‰ª£ÁêÜÂü†Ëôü                                          | 22     |\n| proxy_protocol            | SSH ‰ª£ÁêÜÂçîË≠∞ÁâàÊú¨ (tcp, tcp4, tcp6)                    | tcp    |\n| proxy_username            | SSH ‰ª£ÁêÜ‰ΩøÁî®ËÄÖÂêçÁ®±                                    |        |\n| proxy_password            | SSH ‰ª£ÁêÜÂØÜÁ¢º                                          |        |\n| proxy_passphrase          | SSH ‰ª£ÁêÜÈáëÈë∞ÂØÜÁ¢º                                      |        |\n| proxy_timeout             | SSH ÈÄ£Êé•‰ª£ÁêÜ‰∏ªÊ©üÁöÑË∂ÖÊôÇÊôÇÈñì                            | 30s    |\n| proxy_key                 | SSH ‰ª£ÁêÜÁßÅÈë∞ÁöÑÂÖßÂÆπ                                    |        |\n| proxy_key_path            | SSH ‰ª£ÁêÜÁßÅÈë∞ÁöÑË∑ØÂæë                                    |        |\n| proxy_fingerprint         | ‰ª£ÁêÜ‰∏ªÊ©üÂÖ¨Èë∞ÁöÑ SHA256 ÊåáÁ¥ã                            |        |\n| proxy_cipher              | ‰ª£ÁêÜÂÖÅË®±ÁöÑÂä†ÂØÜÁÆóÊ≥ï                                    |        |\n| proxy_use_insecure_cipher | ÂåÖÂê´Êõ¥Â§ö‰∏çÂÆâÂÖ®ÁöÑÂä†ÂØÜÁÆóÊ≥ï                              | false  |\n| script                    | Âü∑Ë°åÂëΩ‰ª§                                              |        |\n| script_path               | ÂæûÊñá‰ª∂‰∏≠Âü∑Ë°åÂëΩ‰ª§                                      |        |\n| envs                      | Â∞áÁí∞Â¢ÉËÆäÊï∏ÂÇ≥ÈÅûÁµ¶ shell ËÖ≥Êú¨                           |        |\n| envs_format               | Áí∞Â¢ÉÂÄºÂÇ≥ÈÅûÁöÑÈùàÊ¥ªÈÖçÁΩÆ                                  |        |\n| debug                     | ÂïüÁî®Ë™øË©¶Ê®°Âºè                                          | false  |\n| allenvs                   | Â∞áÂ∏∂Êúâ `GITHUB_` Âíå `INPUT_` ÂâçÁ∂¥ÁöÑÁí∞Â¢ÉËÆäÊï∏ÂÇ≥ÈÅûÁµ¶ËÖ≥Êú¨ | false  |\n| request_pty               | Âæû‰º∫ÊúçÂô®Ë´ãÊ±ÇÂÅΩÁµÇÁ´Ø                                    | false  |\n\n## Áî®Ê≥ï\n\nÂü∑Ë°åÈÅ†Á´Ø SSH ÂëΩ‰ª§\n\n```yaml\nname: remote ssh command\non: [push]\njobs:\n  build:\n    name: Build\n    runs-on: ubuntu-latest\n    steps:\n      - name: executing remote ssh commands using password\n        uses: appleboy/ssh-action@v1.2.0\n        with:\n          host: ${{ secrets.HOST }}\n          username: ${{ secrets.USERNAME }}\n          password: ${{ secrets.PASSWORD }}\n          port: ${{ secrets.PORT }}\n          script: whoami\n```\n\nÁï´Èù¢Ëº∏Âá∫\n\n```sh\n======CMD======\nwhoami\n======END======\nout: ***\n===============================================\n‚úÖ Successfully executed commands to all hosts.\n===============================================\n```\n\n### Ë®≠ÁΩÆ SSH ÈáëÈë∞\n\nË´ãÂú®ÂâµÂª∫ SSH ÈáëÈë∞‰∏¶‰ΩøÁî® SSH ÈáëÈë∞ÊôÇÈÅµÂæ™‰ª•‰∏ãÊ≠•È©ü„ÄÇÊúÄ‰Ω≥ÂÅöÊ≥ïÊòØÂú®Êú¨Âú∞Ê©üÂô®‰∏äÂâµÂª∫ SSH ÈáëÈë∞ËÄå‰∏çÊòØÈÅ†Á´ØÊ©üÂô®‰∏ä„ÄÇË´ã‰ΩøÁî® Github Secrets ‰∏≠ÊåáÂÆöÁöÑÁî®Êà∂ÂêçÁôªÈåÑ„ÄÇÁîüÊàê RSA ÈáëÈë∞Ôºö\n\n### ÁîüÊàê RSA ÈáëÈë∞\n\n```bash\nssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n```\n\n### ÁîüÊàê ed25519 ÈáëÈë∞\n\n```bash\nssh-keygen -t ed25519 -a 200 -C \"your_email@example.com\"\n```\n\nÂ∞áÊñ∞ÁîüÊàêÁöÑÈáëÈë∞Ê∑ªÂä†Âà∞Â∑≤ÊéàÊ¨äÁöÑÈáëÈë∞‰∏≠„ÄÇË©≥Á¥∞‰∫ÜËß£Â∑≤ÊéàÊ¨äÁöÑÈáëÈë∞Ë´ãÈªûÊìä[Ê≠§Ëôï](https://www.ssh.com/ssh/authorized_keys/).\n\n### Â∞á RSA ÈáëÈë∞Ê∑ªÂä†Âà∞Â∑≤ÊéàÊ¨äÈáëÈë∞‰∏≠\n\n```bash\ncat .ssh/id_rsa.pub | ssh b@B 'cat >> .ssh/authorized_keys'\n```\n\n### Â∞á ed25519 ÈáëÈë∞Ê∑ªÂä†Âà∞Â∑≤ÊéàÊ¨äÈáëÈë∞‰∏≠\n\n```bash\ncat .ssh/id_ed25519.pub | ssh b@B 'cat >> .ssh/authorized_keys'\n```\n\nË§áË£ΩÁßÅÈë∞ÂÖßÂÆπÔºåÁÑ∂ÂæåÂ∞áÂÖ∂Á≤òË≤ºÂà∞ Github Secrets ‰∏≠„ÄÇ\n\n### Ë§áË£Ω rsa ÁßÅÈë∞ÂÖßÂÆπ\n\n```bash\nclip < ~/.ssh/id_rsa\n```\n\n### Ë§áË£Ω ed25519 ÁßÅÈë∞ÂÖßÂÆπ\n\n```bash\nclip < ~/.ssh/id_ed25519\n```\n\nÊúâÈóúÁÑ°ÈúÄÂØÜÁ¢ºÁôªÈåÑ SSH ÁöÑË©≥Á¥∞‰ø°ÊÅØÔºåË´ã[ÂèÉË¶ãË©≤Á∂≤Á´ô](http://www.linuxproblem.org/art_9.html)„ÄÇ\n\n**‰æÜËá™ËÆÄËÄÖÁöÑÊ≥®ÊÑè‰∫ãÈ†Ö**Ôºö Ê†πÊìöÊÇ®ÁöÑ SSH ÁâàÊú¨ÔºåÊÇ®ÂèØËÉΩÈÇÑÈúÄË¶ÅÈÄ≤Ë°å‰ª•‰∏ãÊõ¥ÊîπÔºö\n\n- Â∞áÂÖ¨Èë∞ÊîæÂú® `.ssh/authorized_keys2` ‰∏≠\n- Â∞á `.ssh` ÁöÑÊ¨äÈôêÊõ¥ÊîπÁÇ∫ 700\n- Â∞á `.ssh/authorized_keys2` ÁöÑÊ¨äÈôêÊõ¥ÊîπÁÇ∫ 640\n\n### Â¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØ OpenSSH\n\nÂ¶ÇÊûúÊÇ®Ê≠£Âú®‰ΩøÁî® OpenSSHÔºå‰∏¶Âá∫Áèæ‰ª•‰∏ãÈåØË™§Ôºö\n\n```bash\nssh: handshake failed: ssh: unable to authenticate, attempted methods [none publickey]\n```\n\nË´ãÁ¢∫‰øùÊÇ®ÊâÄÈÅ∏ÊìáÁöÑÂØÜÈë∞ÊºîÁÆóÊ≥ïÂæóÂà∞ÊîØÊè¥„ÄÇÂú® Ubuntu 20.04 ÊàñÊõ¥È´òÁâàÊú¨‰∏äÔºåÊÇ®ÂøÖÈ†àÊòéÁ¢∫ÂÖÅË®±‰ΩøÁî® SSH-RSA ÊºîÁÆóÊ≥ï„ÄÇË´ãÂú® OpenSSH ÂÆàË≠∑ÈÄ≤Á®ãÊñá‰ª∂‰∏≠Ê∑ªÂä†‰ª•‰∏ãË°åÔºàÂÆÉÂèØ‰ª•ÊòØ `/etc/ssh/sshd_config` Êàñ `/etc/ssh/sshd_config.d/` ‰∏≠ÁöÑ‰∏ÄÂÄãÈôÑËëóÊñá‰ª∂ÔºâÔºö\n\n```bash\nCASignatureAlgorithms +ssh-rsa\n```\n\nÊàñËÄÖÔºå`Ed25519` ÂØÜÈë∞Âú® OpenSSH ‰∏≠ÈªòË™çË¢´Êé•Âèó„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®ÂÆÉ‰æÜÊõø‰ª£ RSA„ÄÇ\n\n```bash\nssh-keygen -t ed25519 -a 200 -C \"your_email@example.com\"\n```\n\n### Example\n\n#### ‰ΩøÁî®ÂØÜÁ¢ºÂü∑Ë°åÈÅ†Á´Ø SSH ÂëΩ‰ª§\n\n```yaml\n- name: executing remote ssh commands using password\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    password: ${{ secrets.PASSWORD }}\n    port: ${{ secrets.PORT }}\n    script: whoami\n```\n\n#### ‰ΩøÁî®ÁßÅÈë∞\n\n```yaml\n- name: executing remote ssh commands using ssh key\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    key: ${{ secrets.KEY }}\n    port: ${{ secrets.PORT }}\n    script: whoami\n```\n\n#### Â§öÂÄãÂëΩ‰ª§\n\n```yaml\n- name: multiple command\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    key: ${{ secrets.KEY }}\n    port: ${{ secrets.PORT }}\n    script: |\n      whoami\n      ls -al\n```\n\n![result](./images/output-result.png)\n\n#### Commands from a file\n\n```yaml\n- name: file commands\n  uses: appleboy/ssh-action@v1.2.0\n  with:\n    host: ${{ secrets.HOST }}\n    username: ${{ secrets.USERNAME }}\n    key: ${{ secrets.KEY }}\n    port: ${{ secrets.PORT }}\n    script_path: scripts/script.sh\n```\n\n#### Â§öÂè∞‰∏ªÊ©ü\n\n```diff\n  - name: multiple host\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n-     host: \"foo.com\"\n+     host: \"foo.com,bar.com\"\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### Â§öÂÄã‰∏çÂêåÁ´ØÂè£ÁöÑ‰∏ªÊ©ü\n\n```diff\n  - name: multiple host\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n-     host: \"foo.com\"\n+     host: \"foo.com:1234,bar.com:5678\"\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### Âú®Â§öÂÄã‰∏ªÊ©ü‰∏äÂêåÊ≠•Âü∑Ë°å\n\n```diff\n  - name: multiple host\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: \"foo.com,bar.com\"\n+     sync: true\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### Â∞áÁí∞Â¢ÉËÆäÈáèÂÇ≥ÈÅûÂà∞ Shell ËÖ≥Êú¨\n\n```diff\n  - name: pass environment\n    uses: appleboy/ssh-action@v1.2.0\n+   env:\n+     FOO: \"BAR\"\n+     BAR: \"FOO\"\n+     SHA: ${{ github.sha }}\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     envs: FOO,BAR,SHA\n      script: |\n        echo \"I am $FOO\"\n        echo \"I am $BAR\"\n        echo \"sha: $SHA\"\n```\n\n_Âú® `env` Â∞çË±°‰∏≠ÔºåÊÇ®ÈúÄË¶ÅÂ∞áÊØèÂÄãÁí∞Â¢ÉËÆäÈáè‰ΩúÁÇ∫Â≠óÁ¨¶‰∏≤ÂÇ≥ÈÅûÔºåÂÇ≥ÈÅû `Integer` Êï∏ÊìöÈ°ûÂûãÊàñ‰ªª‰ΩïÂÖ∂‰ªñÈ°ûÂûãÂèØËÉΩÊúÉÁî¢ÁîüÊÑèÂ§ñÁµêÊûú„ÄÇ_\n\n#### Â¶Ç‰Ωï‰ΩøÁî® `ProxyCommand` ÈÄ£Êé•ÈÅ†Á®ãÊúçÂãôÂô®Ôºü\n\n```bash\n+--------+       +----------+      +-----------+\n| Laptop | <-->  | Jumphost | <--> | FooServer |\n+--------+       +----------+      +-----------+\n```\n\nÂú®ÊÇ®ÁöÑ `~/.ssh/config` Êñá‰ª∂‰∏≠ÔºåÊÇ®ÊúÉÁúãÂà∞‰ª•‰∏ãÂÖßÂÆπ„ÄÇ\n\n```bash\nHost Jumphost\n  HostName Jumphost\n  User ubuntu\n  Port 22\n  IdentityFile ~/.ssh/keys/jump_host.pem\n\nHost FooServer\n  HostName FooServer\n  User ubuntu\n  Port 22\n  ProxyCommand ssh -q -W %h:%p Jumphost\n```\n\n#### Â¶Ç‰ΩïÂ∞áÂÖ∂ËΩâÊèõÁÇ∫ GitHubActions ÁöÑ YAML Ê†ºÂºèÔºü\n\n```diff\n  - name: ssh proxy command\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     proxy_host: ${{ secrets.PROXY_HOST }}\n+     proxy_username: ${{ secrets.PROXY_USERNAME }}\n+     proxy_key: ${{ secrets.PROXY_KEY }}\n+     proxy_port: ${{ secrets.PROXY_PORT }}\n      script: |\n        mkdir abc/def\n        ls -al\n```\n\n#### Â¶Ç‰Ωï‰øùË≠∑ÁßÅÈë∞Ôºü\n\nÂØÜÁ¢ºÁü≠Ë™ûÈÄöÂ∏∏Áî®ÊñºÂä†ÂØÜÁßÅÈë∞„ÄÇÈÄô‰ΩøÂæóÊîªÊìäËÄÖÁÑ°Ê≥ïÂñÆÁç®‰ΩøÁî®ÂØÜÈë∞Êñá‰ª∂„ÄÇÊñá‰ª∂Ê≥ÑÈú≤ÂèØËÉΩ‰æÜËá™ÂÇô‰ªΩÊàñÂÅúÁî®ÁöÑÁ°¨‰ª∂ÔºåÈªëÂÆ¢ÈÄöÂ∏∏ÂèØ‰ª•ÂæûÂèóÊîªÊìäÁ≥ªÁµ±‰∏≠Ê¥©Èú≤Êñá‰ª∂„ÄÇÂõ†Ê≠§Ôºå‰øùË≠∑ÁßÅÈë∞ÈùûÂ∏∏ÈáçË¶Å„ÄÇ\n\n```diff\n  - name: ssh key passphrase\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     passphrase: ${{ secrets.PASSPHRASE }}\n      script: |\n        whoami\n        ls -al\n```\n\n#### ‰ΩøÁî®‰∏ªÊ©üÊåáÁ¥ãÈ©óË≠â\n\nË®≠ÁΩÆ SSH ‰∏ªÊ©üÊåáÁ¥ãÈ©óË≠âÂèØ‰ª•Âπ´Âä©Èò≤Ê≠¢‰∏≠Èñì‰∫∫ÊîªÊìä„ÄÇÂú®Ë®≠ÁΩÆ‰πãÂâçÔºåÈÅãË°å‰ª•‰∏ãÂëΩ‰ª§‰ª•Áç≤Âèñ SSH ‰∏ªÊ©üÊåáÁ¥ã„ÄÇË´ãË®òÂæóÂ∞á `ed25519` ÊõøÊèõÁÇ∫ÊÇ®ÁöÑÈÅ©Áï∂ÈáëÈë∞È°ûÂûãÔºà`rsa`„ÄÅ `dsa`Á≠âÔºâÔºåËÄå `example.com` ÂâáÊõøÊèõÁÇ∫ÊÇ®ÁöÑ‰∏ªÊ©ü„ÄÇ\n\nÁèæ‰ª£ OpenSSH ÁâàÊú¨‰∏≠ÔºåÈúÄË¶ÅÊèêÂèñÁöÑ**ÈªòË™çÈáëÈë∞**È°ûÂûãÊòØ `rsa`ÔºàÂæûÁâàÊú¨ 5.1 ÈñãÂßãÔºâ„ÄÅ`ecdsa`ÔºàÂæûÁâàÊú¨ 6.0 ÈñãÂßãÔºâÂíå `ed25519`ÔºàÂæûÁâàÊú¨ 6.7 ÈñãÂßãÔºâ„ÄÇ\n\n```sh\nssh example.com ssh-keygen -l -f /etc/ssh/ssh_host_ed25519_key.pub | cut -d ' ' -f2\n```\n\nÁèæÂú®ÊÇ®ÂèØ‰ª•Ë™øÊï¥ÊÇ®ÁöÑÈÖçÁΩÆÔºö\n\n```diff\n  - name: ssh key passphrase\n    uses: appleboy/ssh-action@v1.2.0\n    with:\n      host: ${{ secrets.HOST }}\n      username: ${{ secrets.USERNAME }}\n      key: ${{ secrets.KEY }}\n      port: ${{ secrets.PORT }}\n+     fingerprint: ${{ secrets.FINGERPRINT }}\n      script: |\n        whoami\n        ls -al\n```\n\n## Ë≤¢Áçª\n\nÊàëÂÄëÈùûÂ∏∏Â∏åÊúõÊÇ®ÁÇ∫ `appleboy/ssh-action` ÂÅöÂá∫Ë≤¢ÁçªÔºåÊ≠°ËøéÊèê‰∫§Ë´ãÊ±ÇÔºÅ\n\n## ÊéàÊ¨äÊñπÂºè\n\nÊú¨È†ÖÁõÆ‰∏≠ÁöÑËÖ≥Êú¨ÂíåÊñáÊ™îÈááÁî® [MIT](LICENSE) Ë®±ÂèØË≠â ÁôºÂ∏É„ÄÇ\n"
        },
        {
          "name": "action.yml",
          "type": "blob",
          "size": 5.0419921875,
          "content": "name: \"SSH Remote Commands\"\ndescription: \"Executing remote ssh commands\"\nauthor: \"Bo-Yi Wu\"\ninputs:\n  host:\n    description: \"SSH host address.\"\n  port:\n    description: \"SSH port number.\"\n    default: \"22\"\n  passphrase:\n    description: \"Passphrase for the SSH key.\"\n  username:\n    description: \"SSH username.\"\n  password:\n    description: \"SSH password.\"\n  protocol:\n    description: 'The IP protocol to use. Valid values are \"tcp\". \"tcp4\" or \"tcp6\". Default to tcp.'\n    default: \"tcp\"\n  sync:\n    description: \"Enable synchronous execution if multiple hosts are involved.\"\n  use_insecure_cipher:\n    description: \"Include more ciphers by using insecure ciphers.\"\n  cipher:\n    description: \"Allowed cipher algorithms. If unspecified, a sensible default is used.\"\n  timeout:\n    description: \"Timeout duration for establishing SSH connection to the host.\"\n    default: \"30s\"\n  command_timeout:\n    description: \"Timeout duration for SSH commands execution.\"\n    default: \"10m\"\n  key:\n    description: \"Content of the SSH private key. For example, the raw content of ~/.ssh/id_rsa.\"\n  key_path:\n    description: \"Path to the SSH private key file.\"\n  fingerprint:\n    description: \"SHA256 fingerprint of the host public key.\"\n  proxy_host:\n    description: \"SSH proxy host address.\"\n  proxy_port:\n    description: \"SSH proxy port number.\"\n    default: \"22\"\n  proxy_username:\n    description: \"SSH proxy username.\"\n  proxy_password:\n    description: \"SSH proxy password.\"\n  proxy_protocol:\n    description: 'The IP protocol to use. Valid values are \"tcp\". \"tcp4\" or \"tcp6\". Default to tcp.'\n    default: \"tcp\"\n  proxy_passphrase:\n    description: \"SSH proxy key passphrase.\"\n  proxy_timeout:\n    description: \"Timeout duration for establishing SSH connection to the proxy host.\"\n    default: \"30s\"\n  proxy_key:\n    description: \"Content of the SSH proxy private key. For example, the raw content of ~/.ssh/id_rsa.\"\n  proxy_key_path:\n    description: \"Path to the SSH proxy private key file.\"\n  proxy_fingerprint:\n    description: \"SHA256 fingerprint of the proxy host public key.\"\n  proxy_cipher:\n    description: \"Allowed cipher algorithms for the proxy. If unspecified, a sensible default is used.\"\n  proxy_use_insecure_cipher:\n    description: \"Include more ciphers for the proxy by using insecure ciphers.\"\n  script:\n    description: \"Commands to be executed.\"\n  script_path:\n    description: \"Path to the file containing commands to be executed.\"\n  envs:\n    description: \"Environment variables to be passed to the shell script.\"\n  envs_format:\n    description: \"Flexible configuration for environment value transfer.\"\n  debug:\n    description: \"Enable debug mode.\"\n  allenvs:\n    description: \"pass all environment variable to shell script.\"\n  request_pty:\n    description: \"Request a pseudo-terminal from the server.\"\n  capture_stdout:\n    description: \"Capture the stdout of the commands.\"\n    default: \"false\"\n\noutputs:\n  stdout:\n    description: 'Standard output of the executed commands.'\n    value: ${{ steps.entrypoint.outputs.stdout }}\n\nruns:\n  using: \"composite\"\n  steps:\n    - name: Set GitHub Path\n      run: echo \"$GITHUB_ACTION_PATH\" >> $GITHUB_PATH\n      shell: bash\n      env:\n        GITHUB_ACTION_PATH: ${{ github.action_path }}\n    - id: entrypoint\n      name: Run entrypoint.sh\n      run: entrypoint.sh\n      shell: bash\n      env:\n        GITHUB_ACTION_PATH: ${{ github.action_path }}\n        INPUT_HOST: ${{ inputs.host }}\n        INPUT_PORT: ${{ inputs.port }}\n        INPUT_PROTOCOL: ${{ inputs.protocol }}\n        INPUT_USERNAME: ${{ inputs.username }}\n        INPUT_PASSWORD: ${{ inputs.password }}\n        INPUT_PASSPHRASE: ${{ inputs.passphrase }}\n        INPUT_KEY: ${{ inputs.key }}\n        INPUT_KEY_PATH: ${{ inputs.key_path }}\n        INPUT_FINGERPRINT: ${{ inputs.fingerprint }}\n        INPUT_PROXY_HOST: ${{ inputs.proxy_host }}\n        INPUT_PROXY_PORT: ${{ inputs.proxy_port }}\n        INPUT_PROXY_USERNAME: ${{ inputs.proxy_username }}\n        INPUT_PROXY_PASSWORD: ${{ inputs.proxy_password }}\n        INPUT_PROXY_PASSPHRASE: ${{ inputs.proxy_passphrase }}\n        INPUT_PROXY_KEY: ${{ inputs.proxy_key }}\n        INPUT_PROXY_KEY_PATH: ${{ inputs.proxy_key_path }}\n        INPUT_PROXY_FINGERPRINT: ${{ inputs.proxy_fingerprint }}\n        INPUT_TIMEOUT: ${{ inputs.timeout }}\n        INPUT_PROXY_TIMEOUT: ${{ inputs.proxy_timeout }}\n        INPUT_COMMAND_TIMEOUT: ${{ inputs.command_timeout }}\n        INPUT_SCRIPT: ${{ inputs.script }}\n        INPUT_SCRIPT_FILE: ${{ inputs.script_path }}\n        INPUT_ENVS: ${{ inputs.envs }}\n        INPUT_ENVS_FORMAT: ${{ inputs.envs_format }}\n        INPUT_DEBUG: ${{ inputs.debug }}\n        INPUT_ALL_ENVS: ${{ inputs.allenvs }}\n        INPUT_REQUEST_PTY: ${{ inputs.request_pty }}\n        INPUT_USE_INSECURE_CIPHER: ${{ inputs.use_insecure_cipher }}\n        INPUT_CIPHER: ${{ inputs.cipher }}\n        INPUT_PROXY_USE_INSECURE_CIPHER: ${{ inputs.proxy_use_insecure_cipher }}\n        INPUT_PROXY_CIPHER: ${{ inputs.proxy_cipher }}\n        INPUT_SYNC: ${{ inputs.sync }}\n        INPUT_CAPTURE_STDOUT: ${{ inputs.capture_stdout }}\n\nbranding:\n  icon: \"terminal\"\n  color: \"gray-dark\"\n"
        },
        {
          "name": "entrypoint.sh",
          "type": "blob",
          "size": 2.0390625,
          "content": "#!/usr/bin/env bash\n\nset -o errexit\nset -o nounset\nset -o pipefail\n\nexport GITHUB=\"true\"\n\nGITHUB_ACTION_PATH=\"${GITHUB_ACTION_PATH%/}\"\nDRONE_SSH_RELEASE_URL=\"${DRONE_SSH_RELEASE_URL:-https://github.com/appleboy/drone-ssh/releases/download}\"\nDRONE_SSH_VERSION=\"${DRONE_SSH_VERSION:-1.8.0}\"\n\nfunction detect_client_info() {\n  if [ -n \"${SSH_CLIENT_OS-}\" ]; then\n    CLIENT_PLATFORM=\"${SSH_CLIENT_OS}\"\n  else\n    local kernel\n    kernel=\"$(uname -s)\"\n    case \"${kernel}\" in\n    Darwin)\n      CLIENT_PLATFORM=\"darwin\"\n      ;;\n    Linux)\n      CLIENT_PLATFORM=\"linux\"\n      ;;\n    Windows)\n      CLIENT_PLATFORM=\"windows\"\n      ;;\n    *)\n      echo \"Unknown, unsupported platform: ${kernel}.\" >&2\n      echo \"Supported platforms: Linux, Darwin and Windows.\" >&2\n      echo \"Bailing out.\" >&2\n      exit 2\n      ;;\n    esac\n  fi\n\n  if [ -n \"${SSH_CLIENT_ARCH-}\" ]; then\n    CLIENT_ARCH=\"${SSH_CLIENT_ARCH}\"\n  else\n    local machine\n    machine=\"$(uname -m)\"\n    case \"${machine}\" in\n    x86_64* | i?86_64* | amd64*)\n      CLIENT_ARCH=\"amd64\"\n      ;;\n    aarch64* | arm64*)\n      CLIENT_ARCH=\"arm64\"\n      ;;\n    *)\n      echo \"Unknown, unsupported architecture (${machine}).\" >&2\n      echo \"Supported architectures x86_64, i686, arm64.\" >&2\n      echo \"Bailing out.\" >&2\n      exit 3\n      ;;\n    esac\n  fi\n}\n\ndetect_client_info\nDOWNLOAD_URL_PREFIX=\"${DRONE_SSH_RELEASE_URL}/v${DRONE_SSH_VERSION}\"\nCLIENT_BINARY=\"drone-ssh-${DRONE_SSH_VERSION}-${CLIENT_PLATFORM}-${CLIENT_ARCH}\"\nTARGET=\"${GITHUB_ACTION_PATH}/${CLIENT_BINARY}\"\necho \"Will download ${CLIENT_BINARY} from ${DOWNLOAD_URL_PREFIX}\"\ncurl -fsSL --retry 5 --keepalive-time 2 \"${DOWNLOAD_URL_PREFIX}/${CLIENT_BINARY}\" -o ${TARGET}\nchmod +x ${TARGET}\n\necho \"======= CLI Version =======\"\nsh -c \"${TARGET} --version\" # print version\necho \"===========================\"\nif [[ \"$INPUT_CAPTURE_STDOUT\" == 'true' ]]; then\n  echo 'stdout<<EOF' >> $GITHUB_OUTPUT # use heredoc for multiline output\n  sh -c \"${TARGET} $*\" | tee -a $GITHUB_OUTPUT # run the command\n  echo 'EOF' >> $GITHUB_OUTPUT\nelse\n  sh -c \"${TARGET} $*\" # run the command\nfi\n"
        },
        {
          "name": "images",
          "type": "tree",
          "content": null
        },
        {
          "name": "testdata",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}