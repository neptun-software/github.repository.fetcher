{
  "metadata": {
    "timestamp": 1736557724626,
    "page": 862,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjg4MA==",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "rethinkdb/rethinkdb",
      "stars": 26819,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.22,
          "content": "# Auto-detect other text files\n*  text=auto\n\n# Always text\n*.cc   text\n*.hpp  text\n*.h    text\n*.tcc  text\n\n# Ensure shell scripts keep unix line endings\n*.sh       text eol=lf\nconfigure  text eol=lf\nmk/support/pkg/* text eol=lf\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.5,
          "content": "*.pyc\n*.sw?\n*~\n.DS_Store\n.tags\nTAGS\n.cscope\ncscope.files\ncscope.out\n\nlast_tested_versions\n\n/custom.mk\n/config.mk\n/mk/gen/*\n/build\n\n/packaging/ami/build-ami-files/static-web\n\n/**/rethinkdb_data\n/**/rethinkdb_metadata\n\n/scripts/netrecord/netrecord\n/scripts/cluster_directory_*\n\n/test/performance/comparisons/comparison*\n/test/performance/results/\n/test/performance/run/\n\n/test/results\n/**/.rethinkdbTestTemp-*\n/**/run\n/test_results.*\n\n/windows_deps/\n/x64/\n/RethinkDB.sdf\n/RethinkDB*.vcxproj*\n*.xml\n*.iml\n/.vscode\n/.vs\n"
        },
        {
          "name": "CONTRIBUTING.md",
          "type": "blob",
          "size": 1.49,
          "content": "# Contributing\n\nWe're happy you want to contribute! You can help us in different ways:\n\n- [Open an issue][1] with suggestions for improvements\n- Fork this repository and submit a pull request\n- Improve the [documentation][2] (separate repository)\n\n[1]: https://github.com/rethinkdb/rethinkdb/issues\n[2]: https://github.com/rethinkdb/docs\n\nTo submit a pull request, fork the [RethinkDB repository][3] and then clone your fork:\n\n    git clone git@github.com:<your-name>/rethinkdb.git\n\n[3]: https://github.com/rethinkdb/rethinkdb\n\nMake your suggested changes, `git push` and then [submit a pull\nrequest][4]. Note that before we can accept your pull requests, you\nneed to sign our [Contributor License Agreement][5].\n\n[4]: https://github.com/rethinkdb/rethinkdb/compare/\n[5]: http://rethinkdb.com/community/cla/\n\n## Building the admin UI\n\nThe code for the admin UI is now in a separate branch,\n[`old_admin`][old_admin].  It is used to generate the file\n`src/gen/web_assets.cc`, which contains the static content served by\nRethinkDB's admin UI.  Development instructions are in that repo.\n\n[old_admin]: https://github.com/rethinkdb/rethinkdb/tree/old_admin\n\n## Resources\n\nSome useful resources to get started:\n* [Building RethinkDB][6] from source\n* Overview of [what to find where][7] in the server source directory\n* Introduction to the [RethinkDB driver protocol][8]\n* [C++ coding style][9] for the RethinkDB server\n\n[6]: http://rethinkdb.com/docs/build/\n[7]: src/README.md\n[8]: http://rethinkdb.com/docs/driver-spec/\n[9]: STYLE.md\n"
        },
        {
          "name": "COPYRIGHT",
          "type": "blob",
          "size": 11.35,
          "content": "RethinkDB Database System\n\nCopyright 2010-present, The Linux Foundation, portions copyright Google and \nothers and used with permission or subject to their respective license\nagreements.\n\nThe software is released under the terms of the Apache License, version 2.0.\n\n\n                                 Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n   APPENDIX: How to apply the Apache License to your work.\n\n      To apply the Apache License to your work, attach the following\n      boilerplate notice, with the fields enclosed by brackets \"[]\"\n      replaced with your own identifying information. (Don't include\n      the brackets!)  The text should be enclosed in the appropriate\n      comment syntax for the file format. We also recommend that a\n      file or class name and description of purpose be included on the\n      same \"printed page\" as the copyright notice for easier\n      identification within third-party archives.\n\n   Copyright [yyyy] [name of copyright owner]\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n"
        },
        {
          "name": "Makefile",
          "type": "blob",
          "size": 3.57,
          "content": "# Copyright 2010-2013 RethinkDB, all rights reserved.\n\n# Build instructions for rethinkdb are available on the rethinkdb website:\n# http://www.rethinkdb.com/docs/build/\n\n# There is additional information about the build system in the mk/README file\n\n# This Makefile sets up the environment before delegating to mk/main.mk\n\nifeq (,$(filter else-if,$(.FEATURES)))\n\t$(error GNU Make >= 3.8.1 is required)\nendif\n\n# $(TOP) is the root of the rethinkdb source tree\nTOP ?= .\n\nifeq (/,$(firstword $(subst /,/ ,$(TOP))))\n  # if $(TOP) is absolute, make $(CWD) absolute\n  CWD := $(shell pwd)\nelse\n  # if $(TOP) is relative, $(CWD) is $(TOP) followed by the relative path from $(TOP) to the working directory\n  CWD_ABSPATH := $(shell pwd)\n  ROOT_ABSPATH := $(abspath $(CWD_ABSPATH)/$(TOP))\n  CWD := $(patsubst $(ROOT_ABSPATH)%,$(patsubst %/,%,$(TOP))%,$(CWD_ABSPATH))\nendif\n\n# Prefix $(CWD) to $1 and collapse unecessary ../'s\nfixpath = $(patsubst ./%,%,$(shell echo $(CWD)/$1 | sed 's|[^/]\\+/\\.\\./||'))\n\nMAKECMDGOALS ?=\n\n# Build the make command line\nMAKE_CMD_LINE = $(MAKE) -f $(TOP)/mk/main.mk\nMAKE_CMD_LINE += --no-print-directory\nMAKE_CMD_LINE += --warn-undefined-variables\nMAKE_CMD_LINE += --no-builtin-rules\nMAKE_CMD_LINE += --no-builtin-variables\nMAKE_CMD_LINE += TOP=$(TOP) CWD=$(CWD)\n\n# Makefiles can override the goals by setting OVERRIDE_GOALS=<goal>=<replacement>\nOVERRIDE_GOALS ?=\nNEW_MAKECMDGOALS := $(if $(MAKECMDGOALS),$(MAKECMDGOALS),default-goal)\ncomma := ,\n$(foreach _, $(OVERRIDE_GOALS), $(eval NEW_MAKECMDGOALS := $$(patsubst $(subst =,$(comma),$_), $$(NEW_MAKECMDGOALS))))\n\n# Call fixpath on all goals that aren't phony\nMAKE_GOALS = $(foreach goal,$(filter-out $(PHONY_LIST),$(NEW_MAKECMDGOALS)),$(call fixpath,$(goal))) $(filter $(PHONY_LIST),$(NEW_MAKECMDGOALS))\n\n# Delegate the build to mk/main.mk\n.PHONY: make\nmake:\n\t@$(CHECK_ARG_VARIABLES)\n\t+@$(MAKE_CMD_LINE) COUNTDOWN_TOTAL=$(COUNTDOWN_TOTAL) $(MAKE_GOALS)\n\n.PHONY: command-line\ncommand-line:\n\t@echo $(MAKE_CMD_LINE)\n\n%: make\n\t@true\n\n# List all rules\n.PHONY: dump-db\ndump-db:\n\t+@$(CHECK_ARG_VARIABLES)\n\t+@$(MAKE_CMD_LINE) --print-data-base --question JUST_SCAN_MAKEFILES=1 || true\n\n# Load the configuration\ninclude $(TOP)/mk/configure.mk\n\n# Require CHECK_ARG_VARIABLES\ninclude $(TOP)/mk/check-env.mk\n\n# Require pipe-stderr\ninclude $(TOP)/mk/pipe-stderr.mk\n\n# The cached list of phony targets\nPHONY_LIST = var-%\n-include $(TOP)/mk/gen/phony-list.mk\n\n# Explicitely add `deps' to the phony list, which was not being rebuilt properly (see review 1773).\n# This line can be removed after #2700 is fixed.\nPHONY_LIST += deps\n\n.PHONY: debug-count\ndebug-count:\n\t@$(eval MAKE_GOALS := $(filter-out $@,$(MAKE_GOALS)))$(COUNTDOWN_COMMAND)\n\nCOUNTDOWN_COMMAND = MAKEFLAGS='$(MAKEFLAGS)' $(MAKE_CMD_LINE) $(MAKE_GOALS) --dry-run JUST_SCAN_MAKEFILES=1 -j1\nifneq (1,$(SHOW_COUNTDOWN))\n  COUNTDOWN_TOTAL :=\nelse ifeq (Windows,$(OS))\n  COUNTDOWN_TOTAL :=\nelse\n  # See mk/lib.mk for JUST_SCAN_MAKEFILES\n  COUNTDOWN_TOTAL = $(firstword $(shell $(COUNTDOWN_COMMAND) 2>&1 | grep \"[!!!]\" | wc -l 2>/dev/null))\nendif\n\n# Build the list of phony targets\n$(TOP)/mk/gen/phony-list.mk: $(CONFIG)\n\t+@MAKEFLAGS= $(MAKE_CMD_LINE) --print-data-base var-MAKEFILE_LIST JUST_SCAN_MAKEFILES=1 \\\n\t  | grep -E '^.PHONY: |^MAKEFILE_LIST = ' \\\n\t  | grep -E -v '\\$$' \\\n\t  | sed 's/^.PHONY:/PHONY_LIST +=/' \\\n\t  | sed 's|^MAKEFILE_LIST =|$$(TOP)/mk/gen/phony-list.mk: $$(patsubst $(TOP)/%,$$(TOP)/%,$$(filter-out %.d,|;s|$$|))|' \\\n\t  > $@ 2>/dev/null\n\n# Don't try to rebuild any of the Makefiles\nMakefile:\n\t@true\n\n%/Makefile:\n\t@true\n\n%.mk:\n\t@true\n\n##### Cancel builtin rules\n\n.SUFFIXES:\n\n%: %,v\n%: RCS/%,v\n%: RCS/%\n%: s.%\n%: SCCS/s.%\n"
        },
        {
          "name": "NOTES.md",
          "type": "blob",
          "size": 163.37,
          "content": "# Release 2.4.4 (Night of the Living Dead)\n\nFixes for Data Explorer autocomplete, compilation fixes, other small\nfixes.\n\n### API-breaking changes ###\n\nNone.\n\n### Changes ###\n\n* Server\n  * Avoid unaligned memory accesses and bus errors on 32-bit ARM (#7128)\n* Compilation\n  * Replace bad zlib URL with working one (#7121)\n  * Fix new include errors (#7119)\n  * Avoid using deprecated `fstat64` function (#7141)\n* Web UI\n  * Fix data explorer auto-complete (#7111, #7113)\n  * Update ReQL documentation link (#7112, #7114)\n\n### Contributors ###\n\n* @sg5506844\n* Sam Hughes (@srh)\n\n# Release 2.4.3 (Night of the Living Dead)\n\nWindows release, FreeBSD 13 compilation, certificate chain support,\nno update checker complaint.\n\n### API-breaking changes ###\n\nNone.  Some console output is altered, though.\n\n### Changes ###\n\n* Server\n  * Fail correctly when failing to remove directory (#4647)\n  * Improve --initial-password help text (#7064)\n  * Add machine arch and uname to rethinkdb version output (#7060)\n  * Improve general help formatting (#7095)\n  * Update OpenSSL version (if fetched and statically linked) to 3.0.7 (#7099)\n  * Make TLS configuration support certificate chains (#6969)\n  * Regenerate the version correctly (eliminating update checker annoyance) (#7100)\n* Compilation\n  * Get the Windows build working (#7074, #7075, #7082, #7083)\n    * Switch from QuickJS to QuickJSpp (our fork hosted at\n      https://github.com/rethinkdb/quickjspp )\n  * Include <time.h> in files using time function (#7091)\n    * and add more explicit includes for future-proofing (#7098)\n  * Get FreeBSD build working (#7088, #7098)\n  * Avoid some uses of egrep (#7092)\n* Web UI\n  * Update jQuery to 3.6.1 (#6937)\n\n### Contributors ###\n\n* Mariano Rodríguez (@MarianoRD)\n* Hung-Te Lin (@hungte)\n* Antoni Mróz (@MrBoombastic)\n* unx (@unxcepted)\n* Russel Beswick (@besworks)\n* Sam Hughes (@srh)\n* Gábor Boros (@gabor-boros)\n\nSpecial thanks are due to Antoni Mróz and unx for getting the Windows\nrelease working.\n\n# Release 2.4.2 (Night of the Living Dead)\n\nReleased on 2022-04-24\n\nBitrot, futureproofing, and bug fix release.\n\n### Compatibility ###\n\nNo migration is required when upgrading from RethinkDB 2.4.x. Please read the\n[RethinkDB 2.4.0 release notes][release-notes-2.4.0] if you're upgrading from\nan older version.\n\n[release-notes-2.4.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.4.0\n\nRethinkDB 2.4.x servers cannot be mixed with servers running RethinkDB\n2.3.x or earlier in the same cluster.\n\n### API-breaking changes ###\n\nThe `r.js` ReQL command now uses QuickJS to run instead of v8.\nBecause RethinkDB's v8 version was old, this will allow you to use\nnewer JavaScript features.  However, performance and the results of\nyour JavaScript code may differ.\n\n### Substantive Changes ###\n\n(Issue numbers point into the https://github.com/rethinkdb/rethinkdb\nbugtracker.  For a completionist list of changes, run `git log\nv2.4.1..v2.4.2`.)\n\n* Server\n  * Fix 32-bit overflow bug with Raft log indexes (#7036)\n  * Make `r.http` requests use HTTP/1.1 (#7012).  This works around\n    `r.http`'s inability to parse HTTP/2 responses.\n  * Fix saslname decode logic (#7016)\n  * The limit of 127 threads has been removed (#6895)\n  * On newer MacOSes, make assertion failures abort the process (#7049)\n  * On newer MacOS builds, upon assertion failures, generate backtraces correctly (#7049)\n  * Fix an O(1) memory leak (#7010)\n  * Fix some newer MacOS warnings and compilation errors (#7014)\n  * Fix some other GCC warnings (various commits)\n  * Update curl dependency to 7.82.0\n  * Update jemalloc dependency to 5.2.1\n  * Update libidn dependency to 1.38\n  * Update openssl dependency (if fetched) to 3.0.1\n  * Get Apple M1 building working\n* Compilation\n  * Split out web assets code and its build dependency chain to the\n    `old_admin` branch (#6979)\n  * Package generation updates for Ubuntu 21.10, 22.04, and Debian Bullseye (#7021)\n  * More package generation updates for Debian (commit da34c2f)\n  * Make install-include depend on dependency install witness (commit 79c6857)\n  * Make RPM building explicitly name fetched dependencies and dynamically link (#7035)\n  * Add RDB_NO_BACKTRACE flag for musl users (#7052)\n  * A patch for wider boost compatibility was supplied (#6934)\n* Web UI\n  * The web UI was excised to the branch\n    https://github.com/rethinkdb/rethinkdb/tree/old_admin (#6979)\n\n## Contributors ##\n\nMany thanks to the following contributors whose patches made it into\nthe RethinkDB 2.4.2 server release:\n\n* Rui Chen (@chenrui333)\n* Mathieu Schroeter (@Skywalker13)\n* Yong-Hao Zou (@zouyonghao)\n* zadcha (@zadsza)\n* Leo Arias (@elopio)\n\nAnd many thanks go to the driver committers, alternative admin console\nclient developers, bug reporters, and other helpful people who are not\nlisted here.\n\n--\n\n# Release 2.4.1 (Night of the Living Dead)\n\nReleased on 2020-08-13\n\nBug fix release.\n\n### Compatibility ###\n\nNo migration is required when upgrading from RethinkDB 2.4.x. Please read the\n[RethinkDB 2.4.0 release notes][release-notes-2.4.0] if you're upgrading from\nan older version.\n\n[release-notes-2.4.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.4.0\n\nRethinkDB 2.4.0 servers cannot be mixed with servers running RethinkDB\n2.3.x or earlier in the same cluster.\n\n### Changes ###\n\n(Issue numbers point into the https://github.com/rethinkdb/rethinkdb\nbugtracker.)\n\n* Server\n  * Force flushing when stdout isn't on a TTY (#6819)\n  * Fix code style issues (#6842)\n  * Fix warnings about missing assignment definitions in clang 10.0.0 (commit 3ca96904)\n* Compilation\n  * Fix aarch64 builds in 2.4.x using clang++ (commit 01683d3e)\n  * Fix Linux Mint 20 build errors (commit 328ebfb)\n* Web UI\n  * Reintroduce update checker (#6879)\n  * Allow hyphens in table and database names (#6908)\n\n# Release 2.4.0 (Night of the Living Dead)\n\nReleased on 2019-12-19\n\nRethinkDB 2.4 introduces write hooks and a few other enhancements.\n\n### Compatibility ###\n\nData files from RethinkDB version 1.16 onward will be automatically\nmigrated.  As with any major release, back up your data files before\nperforming the upgrade.  Please read the [RethinkDB 2.3.0 release\nnotes][release-notes-2.3.0] if you're upgrading from version 2.2.x or\nearlier.\n\n[release-notes-2.3.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.3.0\n\nRethinkDB 2.4.0 servers cannot be mixed with servers running RethinkDB\n2.3.x or earlier in the same cluster.\n\n### Official Drivers ###\n\nExcept for JavaScript, the official drivers are now generally\nmaintained as separate projects.  But note that there is some coupling\nof RethinkDB console commands, like `rethinkdb dump`, with the Python\ndriver.  RethinkDB 2.4 contains some old copies of the drivers to keep\n`./test/run` working with minimal effort.  The JavaScript driver is\nstill used in the Web UI.  However, the web assets are now\npre-generated, at src/gen/web_assets.cc, making the presence of the\ndriver in the repository not strictly necessary.\n\nHere are links to the official drivers:\n\n * Python: https://github.com/rethinkdb/rethinkdb-python/\n * Ruby: https://github.com/rethinkdb/rethinkdb-ruby/\n * Java: https://github.com/rethinkdb/rethinkdb-java/\n * JavaScript: https://github.com/rethinkdb/rethinkdb/tree/next/drivers/javascript\n\n### API-breaking changes ###\n\n* Write hooks add a new field to the table configuration.\n* A bugfix changes the `match` command's behavior on empty regexes.\n  It had previously been behaving incorrectly.\n\n### Substantive Changes ###\n\n(Issue numbers point into the https://github.com/rethinkdb/rethinkdb\nbugtracker.)\n\n* ReQL\n  * Added the `set_write_hook` and `get_write_hook` commands, which attach to\n    tables a function that can modify the behavior of any write. (#5813)\n  * Added bitwise operators for number types: `bit_and`, `bit_not`, `bit_or`,\n    `bit_sal` (or `bit_shl`), `bit_sar`, `bit_shr`, and `bit_xor`. (#6534)\n  * Permitted the hyphen character (`-`) to be used in table names. (#5537)\n  * Users may be granted permissions on system tables. (#5692)\n  * Make `iso8601` command round, not truncate. (#6909)\n  * Fix timestamp millisecond down-truncation bug. (#6272)\n* Server\n  * Fixed crash with limit change feed `inserted` guarantee failure. (#6710)\n  * Avoid using DNS resolution when finding network interface addresses. (#6588)\n  * Removed update checker. (#6791)\n  * Added experimental support for arm64/aarch64. (#6438)\n  * Added experimental  support for Power8/LE platform. (#6317)\n  * Fixed race condition in the query cache. (#6564)\n  * Avoid quadratic growth in segmented vector. (#6385)\n  * Big-Endian fixes and s390x support. (#6242)\n* Web UI\n  * Implemented a new table viewer widget for browsing the contents of tables. (#6767)\n  * Improved table page performance in case with many databases. (#6790)\n* Compilation\n  * The web assets are now pre-generated, so that macOS users can build them. (#6770)\n  * Debian package building is now parallelized. (#6780)\n  * Fixed extproc spawner bug. (#5572)\n  * Allowed building against libressl. (#6671)\n* JavaScript Driver\n  * Avoided mutating object passed to `r.connect`. (#6575)\n* Python Driver\n  * See more details at https://github.com/rethinkdb/rethinkdb-python/releases\n* Other Drivers\n  * Changes omitted, as they're in separate repositories.\n\n# Release 2.3.6 (Fantasia)\n\nReleased on 2017-07-17\n\nBug fix release\n\n### Notes ###\n\nThis is the first release of RethinkDB since October 2016. The\nRethinkDB project has [joined the Linux\nFoundation][blog-new-rethinkdb]. This release is brought to you by\nvolunteers from the Open RethinkDB team. The RethinkDB source code is\nnow licensed under an [ASLv2 license][ASLv2-license].\n\n[blog-new-rethinkdb]: https://rethinkdb.com/blog/rethinkdb-joins-linux-foundation/\n[ASLv2-license]: https://www.apache.org/licenses/LICENSE-2.0\n\n### Compatibility ###\n\nOn 32-bit platforms and on Windows (64 and 32 bit), RethinkDB 2.3.6 servers should not\nbe mixed with servers running RethinkDB 2.3.3 or older in the same cluster. Doing so can lead to\nserver crashes when using the web UI or when accessing the `logs` system table.\n\nOn 64-bit platforms, RethinkDB 2.3.6 servers can be mixed with older RethinkDB 2.3.x\nservers in the same cluster. We recommend that you run a mixed-version cluster only\ntemporarily for upgrading purposes.\n\nNo migration is required when upgrading from RethinkDB 2.3.x. Please read the\n[RethinkDB 2.3.0 release notes][release-notes-2.3.0] if you're upgrading from an\nolder version.\n\n### Changes ###\n\n* Server\n  * Improved the compatibility of the web UI with Chrome 49 and Edge (#5878, #5426, #5300) -- @danielmewes\n  * Fixed a crash caused by unwanted connections (#6084) -- @danielmewes\n  * Fixed a crash caused by recreating indexes with active changefeeds (#6093) -- @danielmewes\n  * Sizes passed to `sample` are now bound by the array size limit (#6148) -- @AtnNn\n  * Fixed a crashing bug in the implementation of the `interleave` argument to `union` (#6139) -- @AtnNn\n  * Fixed a crash caused by `eqJoin` of system tables when using the `uuid` `identifierFormat` (#6108) -- @nighelles\n  * Fixed a bug that caused `r.match('')` to return wrong results (#6241) -- @AtnNn\n  * Miscellaneous regression fixes and code improvements by @srh and @VeXocide\n  * Fixed argument order in pretty-printed queries in the jobs table (#6240) -- @AtnNn\n* Packaging\n  * Fix glibc version detection in RPM packaging script (#6229) -- @gamename\n  * Add packages for Ubuntu Yakkety and Zesty (#6364) -- @AtnNn\n\n--\n\n# Release 2.3.5 (Fantasia)\n\nReleased on 2016-08-26\n\nBug fix release\n\n### Compatibility ###\n\nOn 32-bit platforms and on Windows (64 and 32 bit), RethinkDB 2.3.5 servers should not\nbe mixed with servers running RethinkDB 2.3.3 or older in the same cluster. Doing so can lead to\nserver crashes when using the web UI or when accessing the `logs` system table.\n\nOn 64-bit platforms, RethinkDB 2.3.5 servers can be mixed with older RethinkDB 2.3.x\nservers in the same cluster. We recommend that you run a mixed-version cluster only\ntemporarily for upgrading purposes.\n\nNo migration is required when upgrading from RethinkDB 2.3.x. Please read the\n[RethinkDB 2.3.0 release notes][release-notes-2.3.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.3.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.3.0\n\n### Bug fixes ###\n\n* Server\n  * Improved the efficiency of the on-disk garbage collector to reduce the risk of\n    excessive file growth (#5923)\n  * Improved the latency of read queries under heavy write loads (#6072)\n  * Fixed a bug that could cause the server to crash with a deserialization error\n    or to stop completing any table reads (#6033)\n  * Fixed a bug in the implementation of the `interleave` option of the `union` command,\n    which could potentially lead to results being generated in the wrong order (#6041)\n  * Fixed a bug in the batch handling of the `fold` and multi-stream `map` commands,\n    that would stop results from being generated correctly if these commands were\n   applied to a changefeed (#6007)\n  * Fixed an issue that could cause proxies to remain listed in the `connected_to`\n    field of the `server_status` table, even after they had disconnected (#5871)\n  * Fixed the detection of non-deterministic conflict functions in the `insert` command\n    (#5842)\n  * Improved the Raft election timeout logic to avoid infinite Raft election loops (#6038)\n  * Improved the response time when reading from the `table_status` system table (#4589)\n  * The server no longer logs the message\n    `Rejected a connection from server X since one is already open` when trying to connect\n    to itself (#5456)\n  * Fixed a bug that could cause an `Uncaught exception` server crash if a TLS-encrypted\n    connection was closed during a certain connection stage (#5904)\n  * Fixed a bug in `merge` that could cause `r.literal` objects to remain after the `merge`\n   and be stored in a table (#5977)\n  * On Windows: Fixed a bug in the `r.http` command that resulted in decoding issues (#5924)\n  * On Windows: RethinkDB now binds TCP ports exclusively (#6008)\n  * On Windows: No longer print an error to the log whenever a connection attempt fails\n    (no issue #)\n  * Fixed a build issue that caused system libraries to not be found during `make` on\n    OpenSUSE (#2363)\n* JavaScript driver\n  * Fixed the server nonce validation in the connection handshake (#5916)\n  * The `host` argument to `connect` is now optional (#5846)\n* Java driver\n  * Cursors now implement the `Closeable` interface (#5468)\n  * Fixed no-reply queries as run through `runNoReply` (#5938)\n  * Fixed a bug in the `reconnect` method (#5841)\n  * Fixed a memory leak in the `Connection` object that was caused by the driver not\n    properly cleaning up closed cursors (#5980)\n* Python driver\n  * The `asyncio` loop type is now available when using the driver from a Python .egg\n    file (#6043)\n* Ruby driver\n  * Fixed a rounding issue with time objects (#5825)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.3.5.\n\n* Arve Seljebu (@arve0)\n* Ben Sharpe (@bsharpe)\n* Brian Chavez (@bchavez)\n* Dan Wiechert (@DWiechert)\n* mbains (@mbains)\n* QianJin2013 (@QianJin2013)\n* Raman Gupta (@rocketraman)\n\n--\n\n# Release 2.3.4 (Fantasia)\n\nReleased on 2016-06-03\n\nBug fix release\n\n### Compatibility ###\n\nOn 32-bit platforms and on Windows (64 and 32 bit), RethinkDB 2.3.4 servers should not\nbe mixed with older RethinkDB 2.3.x servers in the same cluster. Doing so can lead to\nserver crashes when using the web UI or when accessing the `logs` system table.\n\nOn 64-bit platforms, RethinkDB 2.3.4 servers can be mixed with older RethinkDB 2.3.x\nservers in the same cluster. We recommend that you run a mixed-version cluster only\ntemporarily for upgrading purposes.\n\nNo migration is required when upgrading from RethinkDB 2.3.x. Please read the\n[RethinkDB 2.3.0 release notes][release-notes-2.3.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.3.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.3.0\n\n### Bug fixes ###\n\n* Server\n  * Fixed a segmentation fault in the `orderBy.limit` changefeed implementation (#5824)\n  * Fixed an incompatibility in the cluster protocol between Windows and Linux / OS X\n    servers (#5819)\n* Python driver\n  * Fixed various bugs in the connection class for the asyncio event loop (#5795, #5816, #5820)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.3.4.\n\n* Ultrabug (@ultrabug)\n\n--\n\n# Release 2.3.3 (Fantasia)\n\nReleased on 2016-06-01\n\nBug fix release\n\n### Compatibility ###\n\nRethinkDB 2.3.3 servers can be mixed with older RethinkDB 2.3.x servers in the same\ncluster. We recommend that you run a mixed-version cluster only temporarily for upgrading\npurposes.\n\nNo migration is required when upgrading from RethinkDB 2.3.x. Please read the\n[RethinkDB 2.3.0 release notes][release-notes-2.3.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.3.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.3.0\n\n### Windows support ###\n\nRethinkDB 2.3.0 was the first version to include native Windows compatibility. In\nRethinkDB 2.3.3, the Windows port is ready to emerge from \"beta\" testing. We now\nofficially support RethinkDB on the Windows platform alongside our existing support for\nLinux and Mac OS X. We're also extending our [commercial support][comm-support] services\nto include RethinkDB on Windows.\n\nAlthough RethinkDB is now stable on Windows, there are still a few [remaining limitations][windows-tag]\nthat we are actively working to address. We also haven't yet carried out as much\nperformance tuning on the Windows port as we have on the Linux and OS X releases.\n\n[comm-support]: https://rethinkdb.com/services/\n[windows-tag]: https://github.com/rethinkdb/rethinkdb/issues?q=is%3Aopen+is%3Aissue+label%3Awindows\n\n### Bug fixes ###\n\n* Server\n  * Fixed a bug in `orderBy.limit` changefeeds that caused the server to crash with\n    `Guarantee failed: [sub_it != real_added.end()]` (#5561)\n  * Improved the performance of the `table_status` system table when the cluster is under\n    high load (#5586)\n  * Fixed a race condition in the cluster connection logic that could cause occasional\n    crashes with a `Guarantee failed: [refcount == 0]` error (#5783)\n  * Fixed a stack overflow when executing queries with a very high number of chained\n    commands (#5792)\n  * Made the `fold` command work on a changefeed stream (#5800)\n  * Fixed the server uptime calculation on Windows (#5388)\n  * Fixed source code incompatibilities with GCC 6.0 (#5757)\n* JavaScript driver\n  * The `Connection` class is now exported from the RethinkDB JavaScript module (#5758)\n* Java driver\n  * Added the `clientPort` and `clientAddress` methods to the `Connection` class in the\n    Java driver (#5571)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.3.3.\n\n* Gergely Nemeth (@gergelyke)\n\n--\n\n# Release 2.3.2 (Fantasia)\n\nReleased on 2016-05-06\n\nBug fix release\n\n### Compatibility ###\n\nRethinkDB 2.3.2 servers can be mixed with older RethinkDB 2.3.x servers in the same\ncluster. We recommend that you run a mixed-version cluster only temporarily for upgrading\npurposes.\n\nNo migration is required when upgrading from RethinkDB 2.3.x. Please read the\n[RethinkDB 2.3.0 release notes][release-notes-2.3.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.3.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.3.0\n\n### Bug fixes ###\n\n* Server\n  * Fixed a data corruption issue in the secondary index construction logic. The issue\n    could be triggered by creating a secondary index while the table is under write load\n    and could result in a `Guarantee failed: [token.has()]` error when accessing\n    the index (#5715)\n  * Fixed an issue in the Windows beta release that caused data corruption whenever\n    growing a table to more than 4 GB (#5719)\n  * Fixed a crash with the message `Guarantee failed: [num_subs == 0]` that could occur\n    when shutting down a server while trying to start new changefeeds at the same time\n    (#5708)\n  * Fixed a crash with the message\n    `Guarantee failed: [!pair.first.inner.overlaps(region.inner)]` that could occur when\n    using changefeeds while resharding (#5745)\n  * Added a `--tls-min-protocol` server option for reducing the minimum required TLS\n    protocol version. Drivers using an old OpenSSL version (e.g. on OS X) might require\n    this option in order to connect to a TLS-enabled RethinkDB server (#5734)\n  * Added a check to disallow using `order_by` with a non-deterministic predicate function\n    (#5548)\n  * Fixed a segmentation fault at address 0x18 that could occur in low-memory conditions\n    on Linux (#5348)\n  * Fixed a stack overflow issue when parsing very deeply nested objects (#5601)\n  * Improved the stack protection logic in order to avoid exceeding the system's memory\n    map limit. This issue affected Linux servers when having a very high number of\n    concurrently running queries (#5591)\n  * The server is now built with jemalloc version 4.1 on Linux (#5712)\n  * Fixed the message that is displayed when a query times out in the Data Explorer\n    (#5113)\n  * Improved the handling and reporting of OpenSSL-related errors (#5551)\n  * Added a new server option `--cluster-reconnect-timeout` to control how quickly\n    RethinkDB gives up trying to reconnect to a previously connected server (#5701)\n  * Fixed a race condition when writing to system tables that could lead to incorrect\n    update results (#5711)\n  * A custom conflict resolution function for the `insert` command can now return `null`\n    in order to delete a conflicting document (#5713)\n  * Improved the error message emitted when opening a changefeed on an `orderBy.limit`\n    query that has additional transformations (#5721)\n  * Fixed an incompatibility with Safari that could cause undesired page reloads in the\n    web UI (#3983)\n* Python driver\n  * The Python driver's `ssl` option now supports older Python versions from 2.7 up\n    (#4815)\n  * Added a REPL mode that can be launched through the new `python -m rethinkdb` command\n    (#5147)\n  * Added a cache for PBKDF2 authentication tokens to reduce the costs of repeatedly\n    opening connections (#5614)\n  * Refactored how the RethinkDB import and export scripts load the driver (#4970)\n  * Improved the error message reported when attempting to connect to a pre-2.3.0 server\n    (#5678)\n  * Fixed an incompatibility with Python 3 in the `rethinkdb dump` script that caused\n    `name 'file' is not defined` errors (#5694)\n  * Fixed an incompatibility with Python 3.3 in the protocol handshake code (#5742)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.3.2. In no particular order:\n\n* Matt Broadstone (@mbroadst)\n* Saad Abdullah (@saadqc)\n\n--\n\n# Release 2.3.1 (Fantasia)\n\nReleased on 2016-04-22\n\nBug fix release\n\n### Compatibility ###\n\nRethinkDB 2.3.1 servers can be mixed with RethinkDB 2.3.0 servers in the same cluster.\nWe recommend that you run a mixed-version cluster only temporarily for upgrading\npurposes.\n\nNo migration is required when upgrading from RethinkDB 2.3.0. Please read the\n[RethinkDB 2.3.0 release notes][release-notes-2.3.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.3.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.3.0\n\n### Supported systems ###\n\nWe now provide packages for Ubuntu 16.04 (Xenial Xerus).\n\nThe `r.http` command no longer supports fetching data from encrypted `https` resources on\nOS X 10.7 and 10.8 (#5681). Newer releases of OS X are not affected.\n\n### Bug fixes ###\n\n* Server\n  * Fixed a segmentation fault triggered by performing a batched `insert` with multiple\n    occurrences of the same primary key (#5683)\n  * Fixed an uncaught exception bug in the `hostname_to_ips` function that could be\n    triggered by connecting a server with an unresolvable address (#5629)\n  * Fixed a query failure when opening a changefeed with the `squash: true` option on a\n    system table (#5644)\n  * Fixed a crash that was triggered when joining servers with identical server names\n    (#5643)\n  * Fixed an issue with the random number generator that stopped initial server names from\n    getting randomized correctly (#5655)\n  * Fixed a bug that caused memory to not be released properly after dropping a table or\n    removing its replicas from a server (#5666)\n  * Fixed a bug causing `eqJoin` to freeze the server when chained after a `changes`\n    command (#5696)\n  * Fixed an issue that caused the `returnChanges: \"always\"` option of the `insert`\n    command to miss certain types of errors in the `changes` result (#5366)\n  * Fixed a crash on OS X 10.7 when using the .dmg uninstaller (#5671)\n  * The OS X .dmg uninstaller is now signed (#5615)\n  * Fixed an edge case in the error handling for auto-generated primary keys when\n    inserting into a system table (#5691)\n  * RethinkDB can now be compiled with GCC 5.3 (#5635)\n* JavaScript driver\n  * Renamed the `username` option of the `r.connect` command to `user`. The `username`\n    option is still supported for backwards-compatibility with existing code (#5659)\n  * Improved the error message shown when connecting with the 2.3 driver to an older\n    server (#5667)\n* Python driver\n  * Improved the error message that is emitted when trying to connect to a server with a\n    wrong password (#5624)\n  * Fixed the \"global name 'options' is not defined\" bug in the `rethinkdb import` script\n    (#5637)\n  * Fixed a Python 3 incompatibility in the `rethinkdb restore` script (#5647)\n* Java driver\n  * Implemented the timeout option for `getNext` (#5603)\n  * Losing the server connection while having a changefeed open now correctly results in\n    an error (#5660)\n  * The driver now caches authentication nonces in order to speed up connection setup\n    (#5614)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.3.1. In no particular order:\n\n* Brian Chavez (@bchavez)\n* Neil Hanlon (@NeilHanlon)\n* Jason Soares (@JasonSoares)\n* Magnus Lundgren (@iorlas1)\n\n--\n\n# Release 2.3.0 (Fantasia)\n\nReleased on 2016-04-06\n\nRethinkDB 2.3 introduces a users and permissions system, TLS encrypted connections, a\nWindows beta, and numerous improvements to the ReQL query language. ReQL improvements\ninclude up to 10x better performance for distributed joins, and a new `fold` command that\nallows you to implement efficient stateful transformations on streams.\n\nRead the [blog post][2.3-release] for more details.\n\n[2.3-release]: http://rethinkdb.com/blog/2.3-release/\n\n## Compatibility ##\n\nData files from RethinkDB version 1.16 onward will be automatically migrated.\nAs with any major release, back up your data files before performing the upgrade.\n\nIf you're upgrading from RethinkDB 1.15.x or earlier, please read the\n[data migration guide][data-migration-docs] to find out about the required migration steps.\n\nRethinkDB 2.3.0 servers cannot be mixed with servers running RethinkDB 2.2.x or earlier\nin the same cluster.\n\n[data-migration-docs]: http://www.rethinkdb.com/docs/migration/\n\n### Managing password-protected clusters ###\n\nIf you migrate a cluster from a previous version of RethinkDB and have an `auth_key` set,\nthe `auth_key` is turned into the password for the `\"admin\"` user. If no `auth_key` is\nset, a new `\"admin\"` user with an empty password is automatically created during\nmigration.\n\nRethinkDB 2.3 adds a new restriction when adding a server to an existing cluster. If\nthe existing cluster has a non-empty password set for the `\"admin\"` user, a new server\nis only allowed to join the cluster if it has a password set as well. This is to avoid\ninsecure states during the join process. You can use the new `--initial-password auto`\ncommand line option for joining a new server or proxy to a password-protected cluster.\nThe `--initial-password auto` option assigns a random `\"admin\"` password on startup,\nwhich gets overwritten by the previously configured password on the cluster once the join\nprocess is complete.\n\n### API-breaking changes ###\n\n* The `eqJoin` command no longer returns results in the order of its first input. You can\n  pass in the new `{ordered: true}` option to restore the previous behavior.\n* Operations on geospatial multi-indexes now emit duplicate results if multiple index\n  keys of a given document match the query. You can append the `.distinct()` command in\n  order to restore the previous behavior.\n* Changefeeds on queries of the form `orderBy(...).limit(...).filter(...)` are no longer\n  allowed. Previous versions of RethinkDB allowed the creation of such changefeeds, but\n  did not provide the correct semantics.\n* The commands `r.wait`, `r.rebalance` and `r.reconfigure` can no longer be called on the\n  global `r` scope. Previously, these commands defaulted to the `\"test\"` database\n  implicitly. Now they have to be explicitly called on either a database or table object.\n  For example: `r.db(\"test\").wait()`, `r.db(\"test\").rebalance()`, etc.\n* The `{returnChanges: \"always\"}` option with the `insert` command will now add\n  `{error: \"...\"}` documents to the `changes` array if the insert fails for some\n  documents. Previously failed documents were simply omitted from the `changes` result.\n* The special values `r.minval` and `r.maxval` are no longer permitted as return values\n  of secondary index functions.\n\n### Deprecated APIs ###\n\n* The JavaScript `each` function is deprecated in favor of `eachAsync`. In a\n  future release, `each` will be turned into an alias of `eachAsync`. We recommend\n  converting existing calls of the form `.each(function(err, row) {})` into the\n  `eachAsync` equivalent `.eachAsync(function(row) {}, function(err) {})`.\n  You can read more about [`eachAsync` in the documentation][eachAsync-api].\n* The `auth_key` option to `connect` in the official drivers is deprecated in favor of\n  the new `user` and `password` options. For now, a provided `auth_key` value is mapped\n  by the drivers to a password for the `\"admin\"` user, so existing code will keep\n  working.\n\n[eachAsync-api]: http://rethinkdb.com/api/javascript/each_async/\n\n### Discontinued packages ###\n\nWe no longer provide packages for the Debian oldstable distribution 7.x (Wheezy).\n\nWhen compiling from source, the minimum required GCC version is now 4.7.4.\n\n## New features ##\n\n* Added support for user accounts, user authentication, and access permissions. Users can\n  be configured through the `\"users\"` system table. Permissions can be configured through\n  either the new `\"permissions\"` system table or through the `grant` command. (#4519)\n* Driver, intracluster and web UI connections can now be configured to use TLS\n  encryption. For driver and intracluster connections, the server additionally supports\n  certificate verification. (Linux and OS X only, #5381)\n* Added beta support for running RethinkDB on Windows (64 bit only, Windows 7 and up).\n  (#1100)\n* Added a `fold` command to allow stateful transformations on ordered streams. (#3736)\n* Added support for changefeeds on `getIntersecting` queries. (#4777)\n\n## Improvements ##\n\n* Server\n  * The `--bind` option can now be specified separately for the web UI (`--bind-http`),\n    client driver port (`--bind-driver`) and cluster port (`--bind-cluster`). (#5467)\n  * RethinkDB servers now detect non-transitive connectivity in the cluster and raise a\n    `\"non_transitive_error\"` issue in the `\"current_issues\"` system table when detecting\n    an issue. Additionally, the `\"server_status\"` system table now contains information on\n    each server's connectivity in the new `connected_to` field. (#4936)\n  * Added a new `\"memory_error\"` issue type for the `\"current_issues\"` system table that\n    is displayed when the RethinkDB process starts using swap space. (Linux only) (#1023)\n  * Reduced the number of scenarios that require index migration after a RethinkDB\n    upgrade. Indexes no longer need to be migrated unless they use a custom index\n    function. (#5175)\n  * Added support for compiling RethinkDB on Alpine Linux. (#4437)\n  * Proxy servers now print their server ID on startup. (#5515)\n  * Raised the maximum query size from 64 MB to 128 MB. (#4529)\n  * Increased the maximum number of shards for a table from 32 to 64. (#5311)\n  * Implemented a `--join-delay` option to better tolerate unstable network conditions\n    (#5319)\n  * Added an `--initial-password` command line option to secure the process of adding new\n    servers to a password-protected cluster. (#5490)\n  * Implemented a new client protocol handshake to support user authentication. (#5406)\n* ReQL\n  * Added an `interleave` option to the `union` command to allow merging streams in a\n    particular order. (#5090)\n  * Added support for custom conflict-resolution functions to the `insert` command.\n    (#3753)\n  * The `insert` command now returns changes in the same order in which they were passed\n    in when the `returnChanges` option is used. (#5041)\n  * Added an `includeOffsets` option to the `changes` command to obtain the positions\n    of changed elements in an `orderBy.limit` changefeeds. (#5334)\n  * Added an `includeTypes` option to the `changes` command that adds a `type` field to\n    every changefeed result. (#5188)\n  * Made geospatial multi-indexes behave consistently with non-geospatial multi-indexes\n    if a document is indexed under multiple matching keys. `getIntersecting` and\n    `getNearest` now return duplicates if multiple index keys match. (#3351)\n  * The `and`, `or` and `getAll` commands can now be called with zero arguments.\n    (#4696, #2588)\n  * Disallowed calling `r.wait`, `r.rebalance` and `r.reconfigure` on the global scope to\n    avoid confusing semantics. (#4382)\n  * The `count` and `slice` commands can now be applied to strings. (#4227, #4228)\n  * Improved the error message from `reconfigure` if too many servers are unreachable.\n    (#5267)\n  * Improved the error message for invalid timezone specifications. (#1280)\n* Performance\n  * Implemented efficient batching for distributed joins using the `eqJoin` command.\n    (#5115)\n  * Optimized `tableCreate` to complete more quickly. (#4746)\n  * Reduced the CPU overhead of ReQL function calls and term evaluation. (no issue number)\n* Web UI\n  * The web UI now uses the `conn.server()` command for getting information about the\n    connected server. (#5059)\n* All drivers\n  * Implemented a new protocol handshake and added `user` and `password` options to the\n    `connect` method to enable user authentication. (#5458, #5459, #5460, #5461)\n  * Added `clientPort` and `clientAddress` functions to the connection objects in the\n    JavaScript, Python and Ruby drivers. (#4796)\n* JavaScript driver\n  * Added new variants of the `cursor.eachAsync` function. (#5056)\n  * Added a `concurrency` option for `cursor.eachAsync`. (#5529)\n  * `r.min`, `r.max`, `r.sum`, `r.avg` and `r.distinct` now accept an array argument\n    (#4594)\n* Python driver\n  * Added a `\"gevent\"` loop type to the Python driver. (#4433)\n  * Printing a cursor object now displays the first few results. (#5331)\n  * Removed the dependency on `tar` for the `rethinkdb restore` and `rethinkdb dump`\n    commands. (#5399)\n  * Added a `--tls-cert` option to the `rethinkdb import`, `rethinkdb export`,\n    `rethinkdb dump`, `rethinkdb restore` and `rethinkdb index-rebuild` commands to enable\n    TLS connections. (#5330)\n  * Added `--password` and `--password-file` options to the `rethinkdb import`,\n    `rethinkdb export`, `rethinkdb dump`, `rethinkdb restore` and\n    `rethinkdb index-rebuild` commands to connect to password-protected servers. (#5464)\n  * Added a `--format ndjson` option to `rethinkdb export` that allows exporting tables\n    in a newline-separated JSON format. (#5101)\n  * Made `rethinkdb dump` `rethinkdb restore` and `rethinkdb import` able to write to\n    stdout and load data from stdin respectively. (#5525, #3838)\n  * `r.min`, `r.max`, `r.sum`, `r.avg` and `r.distinct` now accept an array argument\n    (#5494)\n* Java driver:\n  * Made it easier to publish the driver on local Ivy and Maven repositories. (#5054)\n\n## Bug fixes ##\n\n* Server\n  * Fixed a crash with the message `[cmp != 0]` when querying with `r.minval` or\n    `r.maxval` values inside of an array. (#5542)\n  * Fixed in issue that caused orphaned tables to be left behind when deleting a database\n    through the `\"db_config\"` system table. (#4465)\n  * Fixed a crash when trying to restore a backup from a version of RethinkDB that is too\n    new. (#5104)\n  * Fixed a bug in data migration from RethinkDB 2.0.x and earlier. (#5570)\n  * Fixed a race condition causing server crashes with the message\n    `Guarantee failed: [!pair.first.inner.overlaps(region.inner)]` when rebalancing a\n    table while simultaneously opening new changefeeds. (#5576)\n  * Fixed an issue causing backfill jobs to remain in the `jobs` system table even after\n    finishing. (#5223)\n* ReQL\n  * Disallowed changefeeds on queries of the form `orderBy(...).limit(...).filter(...)`,\n    since they do not provide the correct semantics. (#5325)\n  * Coercing a binary value to a string value now properly checks for illegal characters\n    in the string. (#5536)\n* Web UI\n  * Fixed the \"The request to retrieve data failed\" error when having an orphaned table\n    whose database has been deleted. (#4985)\n  * Fixed the maximum number of shards display for clusters with more than 32 servers.\n    (#5311)\n  * Fixed an empty \"Connected to\" field when accessing the web UI through a RethinkDB\n    proxy server. (#3182)\n* JavaScript driver\n  * Fixed the behavior of `cursor.close` when there are remaining items in the buffer.\n    (#5432)\n* Python driver\n  * Fixed a bug in the `__str__` function of cursor objects. (#5567)\n  * Fixed the handling of the error generated for over-sized queries. (#4771)\n* Ruby driver\n  * Fixed the handling of the error generated for over-sized queries. (#4771)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.3. In no particular order:\n\n* Aaron Rosen (@aaronorosen)\n* @crockpotveggies\n* Daniel Hokka Zakrisson (@dhozac)\n* Igor Lukanin (@igorlukanin)\n* @janisz\n* Joshua Bronson (@jab)\n* Josh Hawn (@jlhawn)\n* Josh Smith (@Qinusty)\n* Marshall Cottrell (@marshall007)\n* Mike Mintz (@mikemintz)\n* Niklas Hambüchen (@nh2)\n* Qian Jin (@QianJin2013)\n* Taylor Murphy (@tayloramurphy)\n* Vladislav Botvin (@darrrk)\n* Adam Grandquist (@grandquista)\n* @bakape\n* Bernardo Santana (@bsantanas)\n* Bheesham Persaud (@bheesham)\n* Christopher Cadieux (@ccadieux)\n* Chuck Bassett (@chuckSMASH)\n* Diney Wankhede (@dineyw23)\n* Heinz Fiedler (@heinzf)\n* Mark Yu (@vafada)\n* Mike Krumlauf (@mjkrumlauf)\n* Nicolás Santángelo (@NicoSantangelo)\n* Samuel Volin (@untra)\n* Stefan de Konink (@skinkie)\n* Tommaso (@raspo)\n\n--\n\n# Release 2.2.6 (Modern Times)\n\nReleased on 2016-03-25\n\nBug fix release\n\n### Compatibility ###\n\nRethinkDB 2.2.6 servers cannot be mixed with servers running RethinkDB 2.2.1 or earlier\nin the same cluster.\n\nNo migration is required when upgrading from RethinkDB 2.2.0 or higher. Please read the\n[RethinkDB 2.2.0 release notes][release-notes-2.2.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.2.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.2.0\n\n### Bug fixes ###\n\n* Fixed two bugs in the changefeed code that caused crashes with an \"Unreachable code\"\n  error in certain edge cases (#5438, #5535)\n* Fixed a `SANITY CHECK FAILED: [d.has()]` error when using the `map` command on\n  a combination of empty and non-empty input streams (#5481)\n* The result of `conn.server()` now includes a `proxy` field (#5485)\n* Changed the connection behavior of proxy servers to avoid repeating \"Rejected a\n  connection from server X since one is open already\" warnings (#5456)\n* The Python driver now supports connecting to a server via IPv6, even when using the\n  async API (asyncio, tornado, twisted) (#5445)\n* Fixed an incompatibility with certain versions of Python that made the driver unable to\n  load the `backports.ssl_match_hostname` module (#5470)\n* Fixed a resource leak in the Java driver's `cursor.close()` call (#5448)\n* Cursors in the Java driver now implement the `Closeable` interface (#5468)\n* Fixed a remaining incompatibility with Internet Explorer 10 in the JavaScript driver\n  (#5499)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.2.6. In no particular order:\n\n* Paulo Pires (@pires)\n* Mike Mintz (@mikemintz)\n\n--\n\n# Release 2.2.5 (Modern Times)\n\nReleased on 2016-02-23\n\nBug fix release\n\n### Compatibility ###\n\nRethinkDB 2.2.5 servers cannot be mixed with servers running RethinkDB 2.2.1 or earlier\nin the same cluster.\n\nNo migration is required when upgrading from RethinkDB 2.2.0 or higher. Please read the\n[RethinkDB 2.2.0 release notes][release-notes-2.2.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.2.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.2.0\n\n### Improvements ###\n\n* Improved the CPU efficiency of `orderBy` queries on secondary indexes (#5280)\n* Improved the efficiency of geospatial queries on indexes with point values (#5411)\n* Connections in the Java driver are now thread-safe (#5166)\n* Made the JavaScript driver compatible with Internet Explorer 10 (#5067)\n* The Ruby driver now supports nested pseudotypes (#5373)\n\n### Bug fixes ###\n\n* Fixed an issue that caused servers to not connect and/or reconnect properly (#2755)\n* Fixed an issue that caused servers to time out when running queries on secondary\n  indexes with long index keys (#5280)\n* Changefeeds now always emit events for documents leaving or entering the changefeed\n  range (#5205)\n* Fixed a bug in the Java driver that caused null pointer exceptions (#5355)\n* Fixed the `isFeed()` function in the Java driver (#5390, #5400)\n* The `r.now` command now performs arity checking correctly (#5405)\n* Fixed a test failure in the `unit.ClusteringBranch` test (#5182)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.2.5. In no particular order:\n\n* Mike Mintz (@mikemintz)\n* Paulo Pires (@pires)\n* Nicolas Viennot (@nviennot)\n* Brian Chavez (@bchavez)\n\n--\n\n# Release 2.2.4 (Modern Times)\n\nReleased on 2016-02-01\n\nThis bug fix release addresses a [critical bug][issue-5289-details] in RethinkDB's clustering system,\nthat can lead to data loss and invalid query results under certain rare\ncircumstances. The bug can appear if a table is reconfigured during a network\npartition (read more in [GitHub issue #5289][issue-5289-details]).\n\nWe recommend upgrading to this release as soon as possible to avoid data loss.\n\nIf you see replicas get stuck in the `transitioning` state during a reconfiguration\nafter upgrading, you can run `.reconfigure({emergencyRepair: '_debug_recommit'})`\non the table to allow the reconfiguration to complete. Please make sure that the\ncluster is idle when running this operation, as RethinkDB does not guarantee\nconsistency during the emergency repair.\n\n[issue-5289-details]: https://github.com/rethinkdb/rethinkdb/issues/5289#issuecomment-175394540\n\n### Compatibility ###\n\nRethinkDB 2.2.4 servers cannot be mixed with servers running RethinkDB 2.2.1 or earlier\nin the same cluster.\n\nNo migration is required when upgrading from RethinkDB 2.2.0 or higher. Please read the\n[RethinkDB 2.2.0 release notes][release-notes-2.2.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.2.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.2.0\n\n### Bug fixes ###\n\n* Fixed a bug in the clustering system that could lead to data loss, inconsistent\n  reads, and server crashes after reconfiguring a table during incomplete connectivity\n  (#5289, #4949)\n* Fixed a segmentation fault that occurred when requesting certain documents from the\n  `stats` system table (#5327)\n* Changefeeds on system tables now support `map`, `filter` and related commands (#5241)\n* Backtraces are now printed even if the `addr2line` tool is not installed (#5321)\n* The Java driver now supports SSL connections thanks to a contribution by @pires (#5284)\n* Fixed the \"Serialized query\" debug output in the Java driver (#5306)\n* Fixed an incompatibility of the `rethinkdb import` script with Python 2.6 (#5294)\n\n--\n\n# Release 2.1.6 (Forbidden Planet)\n\nReleased on 2016-02-01\n\nLegacy bug fix release\n\n### Legacy support release ###\nThis release maintains full compatibility with RethinkDB 2.1.5, while fixing a\n[critical bug][issue-5289-details] in RethinkDB's clustering system.\n\nWe recommend installing this version only if upgrading to RethinkDB 2.2.4 is not\nan option, for example if you depend on a driver that still uses the old protocol buffer\nclient protocol.\n\n[issue-5289-details]: https://github.com/rethinkdb/rethinkdb/issues/5289#issuecomment-175394540\n\n### Bug fixes ###\n\n* Fixed a bug in the clustering system that could lead to data loss, inconsistent\n  reads, and server crashes after reconfiguring a table during incomplete connectivity\n  (#5289, #4949)\n\n--\n\n# Release 2.2.3 (Modern Times)\n\nReleased on 2016-01-11\n\nBug fix release\n\n### Compatibility ###\n\nRethinkDB 2.2.3 servers cannot be mixed with servers running RethinkDB 2.2.1 or earlier\nin the same cluster.\n\nNo migration is required when upgrading from RethinkDB 2.2.0 or higher. Please read the\n[RethinkDB 2.2.0 release notes][release-notes-2.2.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.2.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.2.0\n\n### Bug fixes ###\n\n* Fixed a bug in the changefeed code that caused crashes with the message\n  `Guarantee failed: [env.has()]` (#5238)\n* Fixed a crash in `r.http` when using pagination (#5256)\n* Fixed a bug that made `orderBy.limit` changefeeds prevent other changefeeds on the same\n  table from becoming ready (#5247)\n* Replaced a call to the deprecated `Object#timeout` function in the Ruby driver (#5232)\n\n--\n\n# Release 2.2.2 (Modern Times)\n\nReleased on 2015-12-21\n\nBug fix release\n\n### Compatibility ###\n\nRethinkDB 2.2.2 servers cannot be mixed with servers running RethinkDB 2.2.1 or earlier\nin the same cluster. The protocol change was necessary to address correctness issues in\nthe changefeed implementation.\n\nNo migration is required when upgrading from RethinkDB 2.2.0 or higher. Please read the\n[RethinkDB 2.2.0 release notes][release-notes-2.2.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.2.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.2.0\n\n### Bug fixes ###\n\n* Server\n  * Fixed an issue causing `include_initial` changefeeds to miss changes (#5216)\n  * Fixed an issue causing `include_initial` changefeeds to stall and never reach the\n    `\"ready\"` state (#5157)\n  * Fixed an issue causing `include_initial` changefeeds to emit unexpected initial\n    results with a `null` value (#5153)\n  * Improved the efficiency of `skip` in combination with `limit` (#5155)\n  * Fixed an issue with determinism checking in geospatial commands (#5130)\n  * Fixed an invalid memory access that caused segmentation faults on ARM (#5093)\n  * Fixed a crash with \"Unreachable code\" when migrating from versions of RethinkDB older\n    than 1.16 (#5158)\n  * Fixed an issue where the server would send an extra response to the client after\n    a cursor completed (#5159)\n  * Fixed a build dependency issue with OpenSSL on OS X 10.11 (#4963)\n  * Fixed compiler warnings on ARM (#4541)\n  * Made the APT repository compatible with APT 1.1 (#5174)\n* Drivers\n  * Fixed missing backtraces on `ReQLCompileError` in the JavaScript driver (#4803)\n  * Upgraded the version of CoffeeScript used to compile the JavaScript driver in order\n    to avoid errors in strict mode (#5198)\n  * Fixed a syntax error warning in the Python driver during installation on older Python\n   versions (#4702)\n  * `rethinkdb restore` now waits for tables to be available (#5154)\n\n--\n\n# Release 2.2.1 (Modern Times)\n\nReleased on 2015-11-16\n\nBug fix release\n\n### Compatibility ###\n\nRethinkDB 2.2.1 is fully compatible with RethinkDB 2.2.0. Please read the\n[RethinkDB 2.2.0 release notes][release-notes-2.2.0] if you're upgrading from an\nolder version.\n\n[release-notes-2.2.0]: https://github.com/rethinkdb/rethinkdb/releases/tag/v2.2.0\n\n### Bug fixes ###\n\n* Fixed a crash with the message \"Guarantee failed: [found_hash_pair]\" when running\n  `getAll` queries (#5085)\n* `rethinkdb export` and `rethinkdb dump` now limit the number of subprocesses to\n  reduce memory consumption (#4809)\n* Fixed a segmentation fault in  `orderBy.limit` changefeeds (#5081)\n* Fixed a crash when using `getAll` with illegal keys (#5086)\n* `r.uuid` is now considered a deterministic operation if it is passed a single\n  argument (#5092)\n* Fixed the \"Task was destroyed but it is pending!\" error when using the `asyncio`\n  event loop on Python (#5043)\n\n--\n\n# Release 2.2.0 (Modern Times)\n\nReleased on 2015-11-12\n\nRethinkDB 2.2 introduces atomic changefeeds. Atomic changefeeds include existing values\nfrom the database into the changefeed result, and then atomically transition to streaming\nupdates.\n\nAtomic changefeeds make building realtime apps dramatically easier: you can use\na single code path to populate your application with initial data, and continue receiving\nrealtime data updates.\n\nThis release also includes numerous performance and scalability improvements designed to\nhelp RethinkDB clusters scale to larger sizes while using fewer resources.\n\nRead the [blog post][2.2-release] for more details.\n\n[2.2-release]: http://rethinkdb.com/blog/2.2-release/\n\n## Compatibility ##\n\nData files from RethinkDB version 1.16 onward will be automatically migrated.\nAs with any major release, back up your data files before performing the upgrade.\n\nIf you're upgrading from RethinkDB 1.14.x or 1.15.x, you need to migrate your secondary\nindexes first. You can do this by following these steps:\n* Install RethinkDB 2.0.5.\n* Update the RethinkDB Python driver (`sudo pip install 'rethinkdb<2.1.0'`).\n* Rebuild your indexes with `rethinkdb index-rebuild`.\n\nAfterwards, you can install RethinkDB 2.2 and start it on the existing data files.\n\nIf you're upgrading directly from RethinkDB 1.13 or earlier, you will need to manually\nupgrade using `rethinkdb dump`.\n\n### API-breaking changes ###\n\n* Changefeeds on `.orderBy.limit` as well as `.get` queries previously provided\n  initial results by default. You now need to include the optional argument\n  `includeInitial: true` to `.changes` to achieve the same behavior.\n* The deprecated protocol buffer driver protocol is no longer supported. The newer JSON\n  protocol is now the only supported driver protocol. Older drivers using the deprecated\n  protocol no longer work with RethinkDB 2.2.0. See the [drivers][drivers] list for\n  up-to-date drivers.\n  * If you're using Java, please note that at the time of writing, existing community\n    drivers have not been updated to use the newer JSON protocol. However, an\n    [official Java driver][java-driver] is in active development and will be available\n    soon.\n* Certain argument errors that used to throw `ReqlDriverError` exceptions now throw\n  `ReqlCompileError` exceptions. See [#4669][issue-4669] for a full list of changes.\n\n[drivers]: http://rethinkdb.com/docs/install-drivers/\n[java-driver]: https://github.com/rethinkdb/rethinkdb/issues/3930\n[issue-4669]: https://github.com/rethinkdb/rethinkdb/issues/4669#issue-100428248\n\n### Supported distributions ###\n\nRethinkDB 2.2.0 now comes with official packages for Ubuntu 15.10 (Wily Werewolf) and\nCentOS 7.\n\nWe no longer provide packages for Ubuntu 10.04 (Lucid Lynx), which has reached end of\nlife.\n\n## New features ##\n\n* Added full support for atomic changefeeds through the `include_initial` optarg (#3579)\n* Added a `values` command to obtain the values of an object as an array (#2945)\n* Added a `conn.server` command to identify the server for a given connection (#3934)\n* Extended `r.uuid` to accept a string and work as a hash function (#4636)\n\n## Improvements ##\n\n* Server\n  * Improved the scalability of range queries on sharded tables (#4343)\n  * Improved the performance of `between` queries on secondary indexes (#4862)\n  * Reduced the memory overhead for large data sets (#1951)\n  * Redesigned the internal representation of queries to improve efficiency (#4601)\n  * Removed the deprecated protocol buffer driver protocol (#4601)\n  * Improved the construction of secondary indexes to make them resumable and to reduce\n    their impact on any production workload (#4959)\n  * Improved the performance when using `getAll` with a secondary index in some edge cases\n    (#4948)\n  * Removed the limit of 1024 concurrent changefeeds on a single connection (#4732)\n  * Implemented automatically growing coroutine stacks to avoid stack overflows (#4462)\n  * Optimized the deserialization of network messages to avoid an extra copy (#3734)\n  * Added a `raft_leader` field to a table's status to expose its current Raft leader\n    (#4902)\n  * Made the handling of invalid lines in the `'logs'` system table more robust (#4929)\n* ReQL\n  * `indexStatus` now exposes the secondary index function (#3231)\n  * Added an optarg called `changefeed_queue_size` to specify how many changes the server\n    should buffer on a changefeed before generating an error (#3607)\n  * Extended `branch` to accept an arbitrary number of conditions and values (#3199)\n  * Strings can now contain null characters (except in primary keys) (#3163)\n  * Streams can now be coerced directly to an object (#2802)\n  * Made `coerceTo('BOOL')` consistent with `branch` (#3133)\n  * Changefeeds on `filter` and `map` queries involving geospatial terms are now allowed\n    (#4063)\n  * Extended `or` and `and` to accept zero arguments (#4132)\n* Web UI\n  * The Data Explorer now allows executing only parts of a query be selecting them (#4814)\n* All drivers\n  * Improved the consistency of ReQL error types by throwing `ReqlCompileError` rather\n    than `ReqlDriverError` for certain errors (#4669)\n* JavaScript driver\n  * Added an `eachAsync` method on cursors that behaves like `each` but also returns a\n    promise (#4784)\n* Python driver\n  * Implemented an API to override the default JSON encoder and decoder (#4825, #4818)\n\n## Bug fixes ##\n\n* Server\n  * Fixed a segmentation fault that could happen when disconnecting a server while\n    having open changefeeds (#4972)\n  * Updated the description of the `--server-name` parameter in `rethinkdb --help` (#4739)\n  * Fixed a crash with the message \"Guarantee failed: [ts->tv_nsec >= 0 &&\n    ts->tv_nsec < (1000LL * (1000LL * 1000LL))] \" (#4931)\n  * Fixed a problem where backfill jobs didn't get removed from the `'jobs'` table (#4923)\n  * Fixed a memory corruption that could trigger a segmentation fault during\n    `getIntersecting` queries (#4937)\n  * Fixed an issue that could stop data files from RethinkDB 1.13 from migrating properly\n    (#4991)\n  * Fixed a \"Guarantee failed: [pair.second] key for entry_t already exists\" crash when\n    rapidly reconnecting servers (#4968)\n  * Fixed an \"Uncaught exception of type interrupted_exc_t\" crash (#4977)\n  * Added a check to catch `r.minval` and `r.maxval` values when writing to the\n    `'_debug_scratch'` system table (#4032)\n* ReQL\n  * Fixed the error message that's generated when passing in a function with the wrong\n    arity (#4189)\n  * Fixed a regression that caused `r.asc(\"test\")` to not fail as it should (#4951)\n* JavaScript driver\n  * Object keys in `toString` are now properly quoted (#4997)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.2. In no particular order:\n\n* Peter Hollows (@captainpete)\n* Zhenchao Li (@fantasticsid)\n* Marshall Cottrell (@marshall007)\n* Adam Grandquist (@grandquista)\n* Ville Immonen (@fson)\n* Matt Broadstone (@mbroadst)\n* Pritam Baral (@pritambaral)\n* Elian Gidoni (@eliangidoni)\n* Mike Mintz (@mikemintz)\n* Daniel Compton (@danielcompton)\n* Vinh Quốc Nguyễn (@kureikain)\n* Shayne Hodge (@schodge)\n* Alexander Zeillinger (@alexanderzeillinger)\n* Ben Gesoff (@bengesoff)\n* Dmitriy Lazarev (@wKich)\n* Chris Gaudreau (@clessg)\n* Paweł Świątkowski (@katafrakt)\n* Wang Zuo (@wangzuo)\n* Chris Goller (@goller)\n* Mateus Craveiro (@mccraveiro)\n\n--\n\n# Release 2.1.5-2 (Forbidden Planet)\n\nReleased on 2015-10-08\n\nBug fix release\n\n### Compatibility ###\n\n* RethinkDB 2.1.5 servers cannot be mixed with servers running RethinkDB 2.1.4 or earlier\n  in the same cluster\n\n### Bug fixes ###\n\n* Fixed a memory corruption bug that caused segmentation faults on some systems\n  (#4917)\n* Made the build system compatible with OS X El Capitan (#4602)\n* Fixed spurious \"Query terminated by `rethinkdb.jobs` table\" errors (#4819)\n* Fixed an issue that caused changefeeds to keep failing after a table finished\n  reconfiguring (#4838)\n* Fixed a race condition that resulted in a crash with the message\n  `std::terminate() called without any exception.` when losing a cluster connection\n  (#4878)\n* Fixed a segmentation fault in the `mark_ready()` function that could occur when\n  reconfiguring a table (#4875)\n* Fixed a segmentation fault when using changefeeds on `orderBy.limit` queries (#4850)\n* Made the Data Explorer handle changefeeds on `orderBy.limit` queries correctly (#4852)\n* Fixed a \"Branch history is incomplete\" crash when reconfiguring a table repeatedly in\n  quick succession (#4866)\n* Fixed a problem that caused `indexStatus` to report results for additional indexes that\n  were not specified in its arguments (#4868)\n* Fixed a segmentation fault when running RethinkDB on certain ARM systems (#4839)\n* Fixed a compilation issue in the UTF-8 unit test with recent versions of Xcode (#4861)\n* Fixed an `Assertion failed: [ptr_]` error when reconfiguring tables quickly with a\n  debug-mode binary (#4871)\n* Improved the detection of unsupported values in `r.js` functions to avoid a\n  `Guarantee failed: [!key.IsEmpty() && !val.IsEmpty()]` crash in the worker process\n  (#4879)\n* Fixed an unitialized data access issue on shutdown (#4918)\n\n### Performance improvements ###\n\n* Improved the performance of `getAll` queries that fetch multiple keys at once (#1526)\n* Optimized the distribution of tasks across threads on multi-core servers (#4905)\n\n--\n\n# Release 2.1.4 (Forbidden Planet)\n\nReleased on 2015-09-16\n\nBug fix release\n\n### Compatibility ###\n\n* RethinkDB 2.1.4 servers cannot be mixed with servers running RethinkDB 2.1.1 or earlier\n  in the same cluster\n\n### Bug fixes ###\n\n* Fixed a data corruption bug that could occur when deleting documents (#4769)\n* The web UI no longer ignores errors during table configuration (#4811)\n* Added a check in case `reconfigure` is called with a non-existent server tag (#4840)\n* Removed a spurious debug-mode assertion that caused a server crash when trying\n  to write to the `stats` system table (#4837)\n* The `rethinkdb restore` and `rethinkdb import` commands now wait for secondary\n  indexes to become ready before beginning the data import (#4832)\n\n--\n\n# Release 2.1.3 (Forbidden Planet)\n\nReleased on 2015-09-04\n\nBug fix release\n\n### Compatibility ###\n\n* RethinkDB 2.1.3 servers cannot be mixed with servers running RethinkDB 2.1.1 or earlier\n  in the same cluster\n\n### Bug fixes ###\n\n* Fixed a data corruption bug in the b-tree implementation (#4769)\n* Fixed the `ssl` option in the JavaScript driver (#4786)\n* Made the Ruby driver compatible with Ruby on Rails 3.2 (#4753)\n* Added the `backports.ssl_match_hostname` library to the Python driver package (#4683)\n* Changed the update check to use an encrypted https connection (#3988, #4643)\n* Fixed access to `https` sources in `r.http` on OS X (#3112)\n* Fixed an `Unexpected exception` error (#4758)\n* Fixed a `Guarantee failed: [pair.second]` crash that could occur during resharding\n  (#4774)\n* Fixed a bug that caused some queries to not report an error when interrupted (#4762)\n* Added a new `\"_debug_recommit\"` recovery option to `emergency_repair` (#4720)\n* Made error reporting in the Python driver compatible with `celery` and `nose` (#4764)\n* Changed the handling of outdated indexes from RethinkDB 1.13 during an import to no\n  longer terminate the server (#4766)\n\n### Performance improvements ###\n\n* Improved the latency when reading from a system table in `r.db('rethinkdb')` while the\n  server is under load (#4773)\n* Improved the parallelism of JSON encoding on the server to utilize multiple CPU cores\n* Refactored JSON decoding in the Python driver to allow the use of custom JSON parsers\n  and to speed up pseudo type conversion (#4585)\n* Improved the prefetching logic in the Python driver to increase the throughput of\n  cursors\n* Changed the Python driver to use a more efficient data structure to store cursor\n  results (#4782)\n\n### Contributors ###\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.1.3. In no particular order:\n\n* Adam Grandquist (@grandquista)\n* ajose01 (@ajose01)\n* Paulius Uza (@pauliusuza)\n\n--\n\n# Release 2.1.2 (Forbidden Planet)\n\nReleased on 2015-08-25\n\nBug fix release\n\n### Compatibility ###\n\n* RethinkDB 2.1.2 servers cannot be mixed with servers running earlier versions in the\n  same cluster\n* Changefeeds on a `get_all` query no longer return initial values. This restores the\n  behavior from RethinkDB 2.0\n\n### Bug fixes ###\n\n* Fixed an issue where writes could be acknowledged before all necessary data was written\n  to disk\n* Restored the 2.0 behavior for changefeeds on `get_all` queries to avoid various\n  issues and incompatibilities\n* Fixed an issue that caused previously migrated tables to be shown as unavailable (#4723)\n* Made outdated secondary index warnings disappear once the problem is resolved (#4664)\n* Made `index_create` atomic to avoid race conditions when multiple indexes were created\n  in quick succession (#4694)\n* Improved how query execution times are reported in the Data Explorer (#4752)\n* Fixed a memory leak in `r.js` (#4663)\n* Fixed the `Branch history is missing pieces` error (#4721)\n* Fixed a race condition causing a crash with\n  `Guarantee failed: [!send_mutex.is_locked()]` (#4710)\n* Fixed a bug in the changefeed code that could cause crashes with the message\n  `Guarantee failed: [active()]` (#4678)\n* Fixed various race conditions that could cause crashes if changefeeds were present\n  during resharding (#4735, #4734, #4678)\n* Fixed a race condition causing a crash with `Guarantee failed: [val.has()]` (#4736)\n* Fixed an `Assertion failed` issue when running a debug-mode binary (#4685)\n* Added a workaround for an `eglibc` bug that caused an `unexpected address family`\n  error on startup (#4470)\n* Added precautions to avoid secondary index migration issues in subsequent releases\n* Out-of-memory errors in the server's JSON parser are now correctly reported (#4751)\n\n--\n\n# Release 2.0.5 (Yojimbo)\n\nReleased on 2015-08-25\n\nBug fix release\n\n* Added precautions to avoid secondary index migration issues in subsequent releases\n* Fixed a memory leak in `r.js` (#4663)\n* Added a workaround for an `eglibc` bug that caused an `unexpected address family`\n  error on startup (#4470)\n* Fixed a bug in the changefeed code that could cause crashes with the message\n  `Guarantee failed: [active()]` (#4678)\n* Fixed a bug that caused intermittent server crashes with the message\n  `Guarantee failed: [fn_id != __null]` in combination with the `r.js` command (#4611)\n* Improved the performance of the `is_empty` term (#4592)\n\n--\n\n# Release 2.1.1 (Forbidden Planet)\n\nReleased on 2015-08-12\n\nBug fix release\n\n* Fixed a problem where after migration, some replicas remained unavailable when\n  reconfiguring a table (#4668)\n* Removed the defunct `--migrate-inconsistent-data` command line argument (#4665)\n* Fixed the slider for setting write durability during table creation in the web UI\n  (#4660)\n* Fixed a race condition in the clustering subsystem (#4670)\n* Improved the handling of error messages in the testing system (#4657)\n\n--\n\n# Release 2.1.0 (Forbidden Planet)\n\nReleased on 2015-08-11\n\nRelease highlights:\n\n* Automatic failover using a Raft-based protocol\n* More flexible administration for servers and tables\n* Advanced recovery features\n\nRead the [blog post][2.1-release] for more details.\n\n[2.1-release]: http://rethinkdb.com/blog/2.1-release/\n\n## Compatibility ##\n\nData files from RethinkDB versions 1.14.0 onward will be automatically migrated.\nAs with any major release, back up your data files before performing the upgrade.\n\nIf you're upgrading directly from RethinkDB 1.13 or earlier, you will need to manually\nupgrade using `rethinkdb dump`.\n\nNote that files from the RethinkDB 2.1.0 beta release are not compatible with this\nversion.\n\n### Changed handling of server failures ###\nThis release introduces a new system for dealing with server failures and network\npartitions based on the Raft consensus algorithm.\n\nPreviously, unreachable servers had to be manually removed from the cluster in order to\nrestore availability. RethinkDB 2.1 can resolve many cases of availability loss\nautomatically, and keeps the cluster in an administrable state even while servers are\nmissing.\n\nThere are three important scenarios in RethinkDB 2.1 when it comes to restoring the\navailability of a given table after a server failure:\n\n* The table has three or more replicas, and a majority of the servers that are hosting\n  these replicas are connected. RethinkDB 2.1 automatically elects new primary replicas\n  to replace unavailable servers and restore availability. No manual intervention is\n  required, and data consistency is maintained.\n* A majority of the servers for the table are connected, regardless of the number of\n  replicas. The table can be manually reconfigured using the usual commands, and data\n  consistency is always maintained.\n* A majority of servers for the table are unavailable. The new `emergency_repair` option\n  to `table.reconfigure` can be used to restore table availability in this case.\n\n### System table changes ###\nTo reflect changes in the underlying cluster administration logic, some of the tables in\nthe `rethinkdb` database changed.\n\n**Changes to `table_config`:**\n\n* Each shard subdocument now has a new field `nonvoting_replicas`, that can be set to a\n  subset of the servers in the `replicas` field.\n* `write_acks` must now be either `\"single\"` or `\"majority\"`. Custom write ack\n  specifications are no longer supported. Instead, non-voting replicas can be used to set\n  up replicas that do not count towards the write ack requirements.\n* Tables that have all of their replicas disconnected are now listed as special documents\n  with an `\"error\"` field.\n* Servers that are disconnected from the cluster are no longer included in the table.\n* The new `indexes` field lists the secondary indexes on the given table.\n\n**Changes to `table_status`:**\n\n* The `primary_replica` field is now called `primary_replicas` and has an array of\n  current primary replicas as its value. While under normal circumstances only a single\n  server will be serving as the primary replica for a given shard, there can temporarily\n  be multiple primary replicas during handover or while data is being transferred between\n  servers.\n* The possible values of the `state` field now are `\"ready\"`, `\"transitioning\"`,\n  `\"backfilling\"`, `\"disconnected\"`, `\"waiting_for_primary\"` and `\"waiting_for_quorum\"`.\n* Servers that are disconnected from the cluster are no longer included in the table.\n\n**Changes to `current_issues`:**\n\n* The issue types `\"table_needs_primary\"`, `\"data_lost\"`, `\"write_acks\"`,\n  `\"server_ghost\"` and `\"server_disconnected\"` can no longer occur.\n* A new issue type `\"table_availability\"` was added and appears whenever a table is\n  missing at least one server. Note that no issue is generated if a server which is not\n  hosting any replicas disconnects.\n\n**Changes to `cluster_config`:**\n\n* A new document with the `id` `\"heartbeat\"` allows configuring the heartbeat timeout for\n  intracluster connections.\n\n### New ReQL error types ###\nRethinkDB 2.1 introduces new error types that allow you to handle different error classes\nseparately in your application if you need to. You can find the\n[complete list][error-types] of new error types in the documentation.\n\nAs part of this change, ReQL error types now use the `Reql` name prefix instead of `Rql`\n(for example `ReqlRuntimeError` instead of `RqlRuntimeError`).\nThe old type names are still supported in our drivers for backwards compatibility.\n\n[error-types]: http://rethinkdb.com/docs/error-types/\n\n### Other API-breaking changes ###\n\n* `.split('')` now treats the input as UTF-8 instead of an array of bytes\n* `null` values in compound index are no longer discarded\n* The new `read_mode=\"outdated\"` optional argument replaces `use_outdated=True`\n\n### Deprecated functionality ###\nThe older protocol-buffer-based client protocol is deprecated in this release. RethinkDB\n2.2 will no longer support clients that still use it. All \"current\" drivers listed on\nthe [drivers page][drivers] use the new JSON-based protocol and will continue to work\nwith RethinkDB 2.2.\n\n[drivers]: http://rethinkdb.com/docs/install-drivers/\n\n## New features ##\n\n* Server\n  * Added automatic failover and semi-lossless rebalance based on Raft (#223)\n  * Backfills are now interuptible and reversible (#3886, #3885)\n  * `table.reconfigure` now works even if some servers are disconnected (#3913)\n  * Replicas can now be marked as voting or non-voting (#3891)\n  * Added an emergency repair feature to restore table availability if consensus is lost\n    (#3893)\n  * Reads can now be made against a majority of replicas (#3895)\n  * Added an emergency read mode that extracts data directly from a given replica for data\n    recovery purposes (#4388)\n  * Servers with no responsibilities can now be removed from clusters without raising an\n    issue (#1790)\n  * Made the intracluster heartbeat timeout configurable (#4449)\n* ReQL\n  * Added `ceil`, `floor` and `round` (#866)\n  * Extended the ReQL error type hierarchy to be more fine-grained (#4544)\n* All drivers\n  * Added driver-side support for SSL connections and CA verification (#4075, #4076,\n    #4080)\n* Python driver\n  * Added Python 3 asyncio support (#4071)\n  * Added Twisted support (#4096)\n  * `rethinkdb export` now supports the `--delimiter` option for CSV files (#3916)\n\n## Improvements ##\n\n* Server\n  * Improved the handling of cluster membership and removal of servers (#3262, #3897,\n    #1790)\n  * Changed the formatting of the `table_status` system table (#3882, #4196)\n  * Added an `indexes` field to the `table_config` system table (#4525)\n  * Improved efficiency by making `datum_t` movable (#4056)\n  * ReQL backtraces are now faster and smaller (#2900)\n  * Replaced cJSON with rapidjson (#3844)\n  * Failed meta operations are now transparently retried (#4199)\n  * Added more detailed logging of cluster events (#3878)\n  * Improved unsaved data limit throttling to increase write performance (#4441)\n  * Improved the performance of the `is_empty` term (#4592)\n  * Small backfills are now prioritized to make tables available more quickly after a\n    server restart (#4383)\n  * Reduced the memory requirements when backfilling large documents (#4474)\n  * Changefeeds using the `squash` option now send batches early if the changefeed queue\n    gets too full (#3942)\n* ReQL\n  * `.split('')` is now UTF-8 aware (#2518)\n  * Improved the behaviour of compound index values containing `null` (#4146)\n  * Errors now distinguish failed writes from indeterminate writes (#4296)\n  * `r.union` is now a top-level term (#4030)\n  * `condition.branch(...)` now works just like `r.branch(condition, ...)` (#4438)\n  * Improved the detection of non-atomic `update` and `replace` arguments (#4582)\n* Web UI\n  * Added new dependency and namespace management system to the web UI (#3465, #3660)\n  * Improved the information visible on the dashboard (#4461)\n  * Improved layout of server and replica assignment lists (#4372)\n  * Updated to reflect the new clustering features and changes (#4283, #4330, #4288, ...)\n* JavaScript driver\n  * The version of bluebird was updated to 2.9.32 (#4178, #4475)\n  * Improved compatibility with Internet Explorer 10 (#4534)\n  * TCP keepalive is now enabled for all connections (#4572)\n* Python driver\n  * Added a new `--max-document-size` option to the `rethinkdb import` script to handle\n    very large JSON documents (#4452)\n  * Added an `r.__version__` property (#3100)\n  * TCP keepalive is now enabled for all connections (#4572)\n* Ruby driver\n  * TCP keepalive is now enabled for all connections (#4572)\n\n## Bug fixes ##\n\n* `time_of_date` and `date` now respect timezones (#4149)\n* Added code to work around a bug in some versions of GLIBC and EGLIBC (#4470)\n* Updated the OS X uninstall script to avoid spurious error messages (#3773)\n* Fixed a starvation issue with squashing changefeeds (#3903)\n* `has_fields` now returns a selection when called on a table (#2609)\n* Fixed a bug that caused intermittent server crashes with the message\n  `Guarantee failed: [fn_id != __null]` in combination with the `r.js` command (#4611)\n* Web UI\n  * Fixed an issue in the table list that caused it to get stuck showing\n    \"Loading tables...\" if no database existed (#4464)\n  * Fixed the tick marks in the shard distribution graph (#4294)\n* Python driver\n  * Fixed a missing argument error (#4402)\n* JavaScript driver\n  * Made the handling of the `db` optional argument to `run` consistent with the Ruby and\n    Python drivers (#4347)\n  * Fixed a problem that could cause connections to not be closed correctly (#4526)\n* Ruby driver\n  * Made the EventMachine API raise an error when a connection is closed while handlers\n    are active (#4626)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.1. In no particular order:\n\n* Thomas Kluyver (@takluyver)\n* Jonathan Phillips (@jipperinbham)\n* Yohan Graterol (@yograterol)\n* Adam Grandquist (@grandquista)\n* Peter Hamilton (@hamiltop)\n* Marshall Cottrell (@marshall007)\n* Elias Levy (@eliaslevy)\n* Ian Beringer (@ianberinger)\n* Jason Dobry (@jmdobry)\n* Wankai Zhang (@wankai)\n* Elifarley Cruz (@elifarley)\n* Brandon Mills (@btmills)\n* Daniel Compton (@danielcompton)\n* Ed Costello (@epc)\n* Lowe Thiderman (@thiderman)\n* Andy Wilson (@wilsaj)\n* Nicolas Viennot (@nviennot)\n* bnosrat (@bnosrat)\n* Mike Mintz (@mikemintz)\n* Lahfa Ryan (@raitobezarius)\n* Sebastien Diaz (@sebadiaz)\n\n--\n\n# Release 2.0.4 (Yojimbo)\n\nReleased on 2015-07-08\n\nBug fix release\n\n* Fixed the version number used by the JavaScript driver (#4436)\n* Fixed a bug that caused crashes with a \"Guarantee failed: [stop]\" error (#4430)\n* Fixed a latency issue when processing indexed `distinct` queries over low-cardinality data sets (#4362)\n* Changed the implementation of compile time assertions (#4346)\n* Changed the Data Explorer to render empty results more clearly (#4110)\n* Fixed a linking issue on ARM (#4064)\n* Improved the message showing the query execution time in the Data Explorer (#3454, #3927)\n* Fixed an error that happened when calling `info` on an ordered table stream (#4242)\n* Fixed a bug that caused an error to be thrown for certain streams in the Data Explorer (#4242)\n* Increased the coroutine stack safety buffer to detect stack overflows in optarg processing (#4473)\n\n--\n\n# Release 2.0.3 (Yojimbo)\n\nReleased on 2015-06-10\n\nBug fix release\n\n* Fixed a bug that broke autocompletion in the Data Explorer (#4261)\n* No longer crash for certain types of stack overflows during query execution (#2639)\n* No longer crash when returning a function from `r.js` (#4190)\n* Fixed a race condition when closing cursors in the JavaScript driver (#4240)\n* Fixed a race condition when closing connections in the JavaScript driver (#4250)\n* Added support for building with GCC 5.1 (#4264)\n* Improved handling of coroutine stack overflows on OS X (#4299)\n* Removed an invalid assertion in the server (#4313)\n\n--\n\n# Release 2.0.2 (Yojimbo)\n\nReleased on 2015-05-22\n\nBug fix release\n\n* Fixed \"duplicate token\" error in the web UI that happened with certain browsers (#4174)\n* Fixed a cross site request forgery vulnerability in the HTTP admin interface (#2018)\n* Fixed the EventEmitter interface in the JavaScript driver (#4192)\n* Fixed a problem with the RDBInterrupt.InsertOp unit test in some compilation modes (#4038)\n* Added packages for Ubuntu 15.04 (#4123)\n* Added a `return_changes: 'always'` option to restore the `return_changes` behavior from before 2.0.0 (#4068)\n* Fixed a bug with `return_changes` where it would populate `changes` despite an error occurring (#4208)\n* Fixed a performance regression when calling `get_all` with many keys (#4218)\n* Added support for using `r.row` with the `contains` command in the JavaScript driver (#4125)\n\n--\n\n# Release 2.0.1 (Yojimbo)\n\nReleased on 2015-04-20\n\nBug fix release\n\n* Fixed a regression in the backup scripts that detected the server version incorrectly (#3706)\n* Fixed a bug in the cache balancer that could degrade performance (#4066)\n\n--\n\n# Release 2.0.0 (Yojimbo)\n\nReleased on 2015-04-14\n\nRelease highlights:\n* Support for attaching a changefeed to the `get_all` and `union` commands\n* Improved support for asynchronous queries\n* The first production-ready release of RethinkDB\n\nRead the [release blog post][2.0-blog] for more details.\n\n[2.0-blog]: http://rethinkdb.com/blog/2.0-release/\n\n## Compatibility ##\n\nData files from RethinkDB versions 1.13.0 onward will be automatically\nmigrated to version 2.0. As with any major release, back up your data files\nbefore performing the upgrade.\n\n### Handling of negative zero in indexes ###\n\nIEEE 754 floating point numbers distinguish between negative (-0) and\npositive (+0) zero.  The following information is only relevant if you\nare storing negative zero values in your documents.  We expect very\nfew users to be affected by this change.\n\nReQL compares -0 and +0 as equal in accordance with IEEE 754.  In\nprevious versions of RethinkDB, -0 and +0 were however treated as\ndistinct values in primary and secondary indexes.  This could lead to\ninconsistent behavior and wrong query results in some rare cases.\n\nStarting with RethinkDB 2.0, -0 and +0 are indexed as equal values.\nSecondary indexes can be [migrated online][1.14-outdated-index] using\nthe `rethinkdb index-rebuild` utility.  If any of your documents have\nnegative zero values in their primary keys, those documents will\nbecome partially inaccessible in RethinkDB 2.0. You will need to\nre-import the affected tables using the `rethinkdb dump` and\n`rethinkdb restore` commands. See the article \"[Back up your\ndata][backup-docs]\" for more information.\n\nIf you are unsure if any of your documents are affected, you can run\n`python -m rethinkdb._negative_zero_check` after upgrading both the\nserver and Python driver.  See the output of `python -m\nrethinkdb._negative_zero_check --help` for additional options.\n\n[1.14-outdated-index]: http://rethinkdb.com/docs/troubleshooting/#my-secondary-index-is-outdated\n[backup-docs]: http://www.rethinkdb.com/docs/backup/\n\n### API-breaking changes ###\n\n* `between` no longer accepts `null` bounds. The new `r.minval` and\n  `r.maxval` can be used instead\n\n* The `any` and `all` commands have been removed. The `or` and `and`\n  commands can be used instead\n\n* `indexes_of` has been renamed to `offsets_of`\n\n* The `squash` argument to `changes` now defaults to `false`\n\n* The type hierarchy for exception types in the Python driver changed.\n  All exceptions including `RqlDriverError` now inherit from the\n  `RqlError` type.  `RqlRuntimeError`, `RqlCompileError` and\n  `RqlClientError` additionally inherit from the new `RqlQueryError`\n  type\n\n## New features ##\n\n* Overall\n  * Reached a production-ready state (#1174)\n* ReQL\n  * Added support for changefeeds on `get_all` and `union` queries (#3642)\n  * `between` no longer accepts `null` as a bound. The new `r.minval` and `r.maxval` can be used instead (#1023)\n  * Added support for getting the state of a changefeed using the new `include_states` optarg to `changes` (#3709)\n* Drivers\n  * Added support for non-blocking `cursor.next` (#3529)\n  * Added support for executing multiple queries in parallel on a single connection (#3754)\n  * Consolidated the return types and use the new `ResponseNotes` field to convey extra information (#3715)\n* Python driver\n  * Added an optional script that warns for documents with negative zero in a primary key (#3637)\n  * Added an asynchronous API based on Tornado (#2622)\n* Ruby driver\n  * Added an asynchronous API based on EventMachine (#2622)\n\n## Improvements ##\n\n* Server\n  * Report open cursors as a single entry in the jobs table (#3662)\n  * Timestamps are no longer sent between servers in `batchspec_t` (#2671)\n  * Some expensive changefeed checks are no longer performed in release mode (#3656)\n  * Include the remote port number in the heartbeat timeout message (#2891)\n  * Improved the ordering and throttling of reads and writes (#1606)\n  * Limit the number of documents per write batch to reduce the impact of large writes on other queries (#3806)\n  * Execute multiple queries in parallel on a single connection (#3296)\n  * Improved the performance of sending responses (#3744)\n  * Immediately send back an empty first batch when the result is a changefeed (#3852)\n  * Simplified the `multi_throttling` infrastructure (#4021)\n  * The server now reports handshake errors to client drivers earlier (#4011)\n  * Set `TCP_NODELAY` in the Python and Ruby driver to avoid delays in combination with `noreply` (#3998)\n* Web UI\n  * Added a configurable limit for the results per page in the Data Explorer (#3910)\n  * Added an \"add table\" button to each database (#3522)\n* ReQL\n  * `table.rebalance` with insufficient data is no longer an error (#3679)\n  * Renamed `indexes_of` to `offsets_of` to avoid confusion with secondary indexes (#3265)\n  * Removed `any` and `all` in favor of `or` and `and` (#1581)\n  * Trivial changes are filtered out from `return_changes` (#3697)\n  * Reduced the size of profiles (#3218)\n  * Changefeeds are no longer squashed by default (#3904)\n* JavaScript driver\n  * Added an upper bound to the bluebird dependency (#3823)\n* Ruby driver\n  * Added a `timeout` option to `r.connect` (#1666)\n  * Improved the code style (#3900, #3901, #3906)\n  * Strings are now allowed as keys in the config options (#3905)\n* Build\n  * Upgraded to a more recent version of V8 and dropped support for out-of-tree V8 (#3472)\n  * Added support for building with Python 3 (#3731)\n* Packaging\n  * Got rid of the outdated bash completion script (#719)\n  * Allow installing RethinkDB in 32-bit OS X on a 64-bit processor (#1595)\n* Tests\n  * Increased the number of retries in the `RDBBtree` tests to avoid false positives (#3805)\n\n## Bug Fixes ##\n\n* Server\n  * Fixed a race condition that could be caused by concurrent queries (#3766)\n  * Deleted servers and tables are no longer counted during version checks (#3692)\n  * Made JSON parsing more strict (#3810)\n  * Fixed a bug that could cause the server to crash when killed (#3792)\n  * Databases can no longer be renamed to \"rethinkdb\" (#3858)\n  * Return an initial value for point changefeeds on system tables (#3723)\n  * Improved the handling of negative zero (#3637)\n  * Correctly abort `order_by.limit` changefeeds when a table become unavailable (#3932)\n  * Do not unlink files early to avoid crashing in virtual environments (#3791)\n  * Fallback to TCP4 when binding sockets (#4000)\n  * No longer crash when the data files are in a VirtualBox shared folder (#3791)\n* ReQL\n  * Fixed the behavior of point changefeeds on system tables (#3944)\n  * `noreplyWait` no longer waits for non-`noreply` queries (#3812)\n  * Initial values for `order_by` changefeeds are now returned in order (#3993)\n  * Reduced the size of profiles when deleting documents (#3218)\n* Web UI\n  * Fixed a bug that caused the status icon to be green when a table was unavailable (#3500)\n  * Fixed a bug that truncated labels in the performance graph (#3751)\n  * Correctly handle the escape key in modal dialogs (#3872)\n  * Fixed a bug that caused an `InternalError` when loading large tables (#3873)\n  * Fixed a bug that caused the Data Explorer to break when reading older data from `localStorage` (#3935)\n  * Fixed a bug that caused autocompletion to fail in certain cases (#3143)\n* Python driver\n  * Fixed `rethinkdb export` compatibility between Python 2 and Python 3 (#3911)\n  * Fixed a bug that caused `rethinkdb export` to hang when certain errors occur (#4005)\n* JavaScript driver\n  * Fixed a bug that caused `cursor.each` to fail with an exception (#3826)\n  * Fixed a bug that caused connection errors to be discarded (#3733)\n  * Fixed a bug that could be triggered by calling `close` twice (#4017)\n  * Fixed a bug in `feed.close` (#3967)\n* Ruby driver\n  * Fixed a bug that caused failures when using JRuby (#3795)\n  * Signals are now handled correctly (#4029)\n  * Fixed a bug in the arity check (#3968)\n* Build\n  * Fetching Browserify during the build process is now more reliable (#4009)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 2.0. In no particular order:\n\n* Andrey Deryabin (@aderyabin)\n* Krishna Narasimhan (@krishnanm86)\n* Elian Gidoni (@eliangidoni)\n* Sherzod Kuchkarov (@tundrax)\n* Jason Dobry (@jmdobry)\n* Justin Mealey (@justinmealey)\n* Jonathan Ong (@jonathanong)\n* Andrey Deryabin (@aderyabin)\n* Angelo Ashmore (@angeloashmore)\n* Bill Barsch (@billbarsch)\n* Ed Costello (@epc)\n* Ilya Radchenko (@knownasilya)\n* Kai Curry (@webmasterkai)\n* Loring Dodge (@loringdodge)\n* Mike Marcacci (@mike-marcacci)\n* Param Aggarwal (@paramaggarwal)\n* Tinco Andringa (@tinco)\n* Armen Filipetyan (@armenfilipetyan)\n* Andrei Horak (@linkyndy)\n* Shirow Miura (@sharow)\n\n--\n\n# Release 1.16.3 (Stand By Me)\n\nReleased on 2015-03-26\n\nBug fix update.\n\n* Fixed a bug that could cause a crash when reading from a secondary index in some rare circumstances (#3976)\n* Fixed a bug that could cause a connection to hang indefinitely on OS X (#3954)\n* Fixed `rethinkdb export` compatibility between Python 2 and Python 3 (#3911)\n* Heartbeat timeout messages now include the remote port number (#2891)\n* Python driver: patched to work in PyPy (#3969)\n* Python driver: fixed an \"Unterminated string\" error during `rethinkdb restore` (#3859)\n* JavaScript driver: fixed a bug that caused `cursor.each` to fail with an exception (#3826)\n* JavaScript driver: fixed a bug that caused connection errors to be discarded (#3733)\n* Ruby driver: fixed a bug that caused failures when using JRuby (#3795)\n\n## Contributors ##\n\n* Sherzod Kuchkarov (@tundrax)\n* Elian Gidoni (@eliangidoni)\n\n--\n\n# Release 1.16.2 (Stand By Me)\n\nReleased on 2015-02-16\n\nBug fix update.\n\n* Fixed a bug in `r.range` that caused query failures (#3767)\n* Fixed a race condition in the implementation of `.order_by.limit.changes` (#3765)\n* Fixed a build error that caused very slow `r.js` performance (#3757)\n* Removed spurious comma in the Data Explorer (#3730)\n\n--\n\n# Release 1.16.1 (Stand By Me)\n\nReleased on 2015-02-12\n\nBug fix update.\n\n* Write a message to the log every time a file is deleted (#1780)\n* Fixed `rethinkdb dump` and other backup scripts to correctly detect the server version (#3706)\n* Changed the output of `rethinkdb dump` to clarify that indexes are being saved (#3708)\n* Fixed unbounded memory consumption when using the official OS X package or when building with boost 1.56.0 or higher (#3712)\n* Fixed the `written_docs_total` field of `rethinkdb.stats` (#3713)\n* Fixed a bug that caused the web UI to hang when creating or deleting indexes (#3717, #3721)\n* Fixed rounding of document counts in the web UI (#3722)\n* Fixed a bug that broke the `-f` flag of `rethinkdb import` (#3728)\n* Fixed a bug that prevented the web UI from loading data properly (#3729)\n* Fixed a bug that caused RethinkDB to refuse to link with jemalloc dynamically (#3741)\n* Fixed an uncaught exception in the handling of `r.js` (#3745)\n\n--\n\n# Release 1.16.0 (Stand By Me)\n\nReleased on 2015-01-29\n\nThe highlights of this release are:\n* A new administration API\n* Changefeeds on complex queries\n* Numerous improvements and enhancements throughout RethinkDB\n\nRead the [release blog post][1.16-blog] for more details.\n\n[1.16-blog]: http://rethinkdb.com/blog/1.16-release/\n\n## Compatibility ##\n\n### Backwards-compatible changes ###\n\nData files from RethinkDB versions 1.13.0 onward will be automatically\nmigrated to version 1.16.x. As with any major release, back up your data files\nbefore performing the upgrade. If you are upgrading from a release earlier\nthan 1.13.0, follow the [migration instructions][migration-documentation] before upgrading.\n\n[migration-documentation]: http://rethinkdb.com/docs/migration/\n\nSecondary indexes now use a new format; old indexes will continue to work, but\nyou should rebuild indexes after upgrading to 1.16.x. A warning about outdated\nindexes will be issued on startup.\n\nIndexes can be migrated to the new format with the `rethinkdb index-rebuild`\nutility. Consult the [troubleshooting document][outdated-indexes-documentation] for more information.\n\n[outdated-indexes-documentation]: http://rethinkdb.com/docs/troubleshooting#my-secondary-index-is-outdated\n\nThe abstraction of datacenters has been replaced by [server tags][server-tags-documentation].\nExisting datacenter assignments will be converted to server tags automatically.\n\n[server-tags-documentation]: http://rethinkdb.com/docs/sharding-and-replication/\n\n### API-breaking changes ###\n\nThe `tableCreate`, `tableDrop`, `dbCreate` and `dbDrop` terms have a new set of return values.\nThe previous return values `created` and `dropped` have been renamed to `tables_creates` / `dbs_created` and\n`tables_dropped` / `dbs_dropped` respectively. The terms now additionally return a `config_changes` field.\n\nConsult the API documentation for these commands for details:\n[tableCreate][tableCreate-api-docs], [tableDrop][tableDrop-api-docs], [dbCreate][dbCreate-api-docs], [dbDrop][dbDrop-api-docs]\n\n[tableCreate-api-docs]: http://rethinkdb.com/api/javascript/tableCreate\n[tableDrop-api-docs]: http://rethinkdb.com/api/javascript/tableDrop\n[dbCreate-api-docs]: http://rethinkdb.com/api/javascript/dbCreate\n[dbDrop-api-docs]: http://rethinkdb.com/api/javascript/dbDrop\n\nChangefeeds on a table now combine multiple changes to the same document into a single notification if they happen rapidly.\nYou can turn this behavior off by passing the `squash: false` optional argument (see the\n[API documentation][changes-api-docs] for details).\n\n[changes-api-docs]: http://rethinkdb.com/api/javascript/changes\n\nStrings passed to ReQL are now rejected if they are not valid UTF-8.\nNon UTF-8 conformant data can be stored as [binary][binary-api-docs] data instead.\n\n[binary-api-docs]: http://rethinkdb.com/api/javascript/binary/\n\n\n## New features ##\n\n* ReQL admin: a new cluster management and monitoring API (#2169)\n  * Added a special system database named `rethinkdb`\n    * The `table_config` table allows changing a table's configuration (#2870)\n    * The `server_config` table allows listing and managing servers in the cluster (#2873)\n    * The `db_config` table allows listing and renaming databases (#151, #2871)\n    * The `cluster_config` table contains cluster-wide settings (#2924)\n    * The `table_status` table displays each table's availability and replication status (#2983, #3269)\n    * The `server_status` table contains information about the servers in the cluster (#2923, #3270)\n    * The `current_issues` table lists issues affecting the cluster and suggests solutions (#2864, #3258)\n    * The `jobs` table lists running queries and background tasks (#3115)\n    * The `stats` table contains real-time statistics about the server (#2885)\n    * The `logs` table provides access to the server logs (#2884)\n    * The `identifierFormat` optional argument to `table` switches how databases, tables and servers are referenced in the system tables. Can be either \"name\" or \"uuid\" (#3266)\n    * Added hidden debug tables (`_debug_table_status`, `_debug_stats`). These tables are subject to change and not part of the official administration interface (#2901, #3385)\n  * Improved cluster management\n    * Servers can now be associated with multiple tags using the `--server-tag` flag or by updating the `server_config` table (#2856)\n    * Removed the datacenter abstraction and changed the arguments to `tableCreate` (#2876)\n    * Removed the `rethinkdb admin` command line interface\n    * Added a `reconfigure` command to change the replication and sharding settings of a table (#2932)\n    * Added a `rebalance` command to even out the size of a table's shards (#2981)\n    * Added a `config` command for tables and databases as an alias for the corresponding row in `db_config` or `table_config`\n    * Added a `status` command for tables as an alias for the corresponding row in `table_status`\n    * Most of the `/ajax` endpoints have been removed. Their functionality has been moved to the system tables (#2878, #2879)\n    * The stats now contains the number of client connections (#2989)\n    * Added more information to the return value of `db_create`, `db_drop`, `table_create` and `table_drop` (#3001)\n    * Changed how `durability` and `write_acks` are configured (#3066)\n    * The cache size can now be changed at runtime (#3166)\n    * Improved the scalability for large table creation and reconfiguration in large clusters (#3198)\n    * Added a new UI for table configuration (#3229)\n    * Empty tables can now be sharded (#3271, #1679)\n* ReQL\n  * Added `r.range` which generates all numbers from a given range (#875)\n  * Enforce UTF-8 encoding on input strings (#1181)\n  * Added a `wait` command which waits for a table to be ready (#2259)\n  * Added `toJsonString` which converts a datum into a JSON string (#2513)\n  * Turned `map` into a variadic function for mapping over multiple sequences in parallel (#2574)\n  * Added a prefix version of `map` (#3321)\n  * Added an optional `squash` argument to the `changes` command, which lets the server combine multiple changes to the same document (defaults to `true`) (#2726, #3558)\n  * `min` and `max` now use an index when passed the new `index` parameter (#2974, #2981)\n  * It is now possible to get changefeeds for more types of queries. `changes` can now be chained onto:\n    * Ranges generated with `between` (#3232)\n    * Single documents with `get`\n    * Subsets with `filter`\n    * Sub-documents and modified documents with `map` and other commands that are stream-polymorphic such as `merge`\n    * Certain reductions such as `min` and `max`\n    * Top scoring documents with `orderBy` and `limit`\n    * Combinations of the above, such as `between` followed by `map`\n* Server\n  * Made buffered IO the default, added a `--direct-io` flag to enable direct IO and deprecated the `--no-direct-io` flag (#3391)\n* Python driver\n  * `rethinkdb export` now exports secondary index information and `rethinkdb import` re-creates those indexes unless it is given the `--no-secondary-indexes` flag (#3484)\n\n## Improvements ##\n\n* Web UI\n  * The web assets are now compiled into the `rethinkdb` executable (#1093)\n  * `getAll` queries on secondary indexes are now shown in the performance graph (#2379)\n  * Added `getField` to the autocompletion in the Data Explorer (#2624)\n  * Added live updates for changefeeds in the Data Explorer (#2643)\n  * Reduced the amount of data transferred to and processed by the browser by the dashboard (#2786)\n  * The database view was removed (#3491)\n  * Added a secondary index monitor to the dashboard (#3493)\n* Server\n  * Removed code used to support outdated tests (#1524)\n  * Improved implementation of erase range operations (#2034)\n  * `jemalloc` is now used by default instead of `tcmalloc`, which solves some memory inflation (#2279)\n  * Replaced vector clocks with automatic timestamp-based conflict resolution (#2784)\n  * No longer complain when `stderr` can't be flushed (#2790)\n  * Replaced uses of the word \"machine\" to use \"server\" instead. The old `--machine-name` flag is now `--server-name` (#2877, #3254)\n  * The server now prints its own name on startup (#2992)\n  * Adjusted the formatting of log levels, no longer print `info:` lines to stderr and added a `notice` log level (#3040)\n  * Added a `--no-default-bind` option that prevents the server from listening on loopback addresses (#3154)\n  * Lower the CPU load of an idle server (#3185)\n  * The OS disk cache is now ignored when calculating available memory (#3193)\n  * `kqueue` is now used instead of `poll` for events on OS X for better performance (#3403)\n  * Tables now become available faster and table metadata takes less space on disk (#3463)\n  * Queries that perform multiple HTTP requests now share the same cookies (#3469)\n  * Made resolving of ties in secondary indexes more consistent (#3550)\n  * The server now calls home to RethinkDB HQ to check for newer versions and send anonymized statistics. This can be turned off with the new `--no-update-check` flag (#3170)\n* Testing\n  * The ReQL tests can now run in parallel (#2305, #2672)\n  * The Ruby driver is now tested against different versions of Ruby (#2526)\n  * Relaxing floating point comparison to account for rounding issues (#2912)\n  * No longer depend on external HTTP servers (#3047)\n  * Switched to using the new cluster management features in the test suite (#3398, #3401)\n* ReQL\n  * Allow querying the version of the server (#2698)\n  * Improved the error message when pseudo-types are used as objects (#2766)\n  * The names of types returned by `typeOf` and `info` now match (#3059)\n  * No longer silently ignore unknown global optional arguments (#2052)\n  * Improved handling of socket, protocol and cursor errors (#3207)\n  * Added an `isOpen` method to connections (#2113)\n  * `info` on tables now works when `useOutdated` is true (#3355)\n  * `info` on tables now includes the table id (#3358)\n* Driver protocol\n  * Made internal names of commands more consistent (#3147)\n  * Added the `SUCCESS_ATOM_FEED` return type, used when returning changes for a single document (#3389)\n* JavaScript driver\n  * Upgrade to bluebird 2 (#2973)\n* Python driver\n  * Added a `next` method for cursors (#3042)\n  * `r.expr` now accepts any iterable or mapping (#3146)\n  * `rethinkdb export` now avoids traversing each table twice by using an estimated document count (#3483)\n* Build\n  * Updated code to build with post-Yosemite versions of Xcode (#3219)\n  * Fetch Curl 7.40.0 when not using the system-installed one (#3540)\n* Packaging\n  * Added `procps` as a dependency in the Debian packages (#3404)\n  * Now depend on `jemalloc` instead of `gperftools` (#3419)\n\n## Bug fixes ##\n\n* Tests\n  * Fixed the `TimerTest` test (#549)\n  * Always use the in-tree driver for testing (#711)\n* Server\n  * Some startup log messages are now consolidated into a single log entry (#925)\n  * Fixed continuation of partially-interrupted vectored I/O (#2665)\n  * Fixed an issue in the log file parser (#3694)\n* ReQL\n  * Changed type of `between` queries to from `TABLE` to the more correct `TABLE_SLICE` (#1728)\n* Web UI\n  * Use a real fixed width font for backtraces to make them align correctly (#2065)\n  * No longer show empty batches when more data is available (#3432)\n* Python driver\n  * Correctly handle Unicode characters in error messages (#3051)\n* JavaScript driver\n  * Added support for passing batch configuration arguments to `run` (#3161)\n* Ruby driver\n  * Optional arguments can now be passed to `order_by` (#3221)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 1.16. In no particular order:\n\n* Adam Grandquist (@grandquista)\n* Ilya Radchenko (@knownasilya)\n* Gianluca Ciccarelli (@sturmer)\n* Alexis Okuwa (@wojons)\n* Mike Ma (@cosql)\n* Patrick Stapleton (@gdi2290)\n* Mike Marcacci (@mike-marcacci)\n* Andrei Horak (@linkyndy)\n* Param Aggarwal (@paramaggarwal)\n* Brandon Zylstra (@brandondrew)\n* Ed Costello (@epc)\n* Alessio Basso (@alexdown)\n* Benjamin Goodger (@goodgerster)\n* Vinh Quốc Nguyễn (@kureikain)\n\n--\n\n# Release 1.15.3 (Lawrence of Arabia)\n\nReleased on 2015-01-08\n\nBug fix update.\n\n* Fixed a bug that caused the endpoints of a reversed range to not be\n  correctly included or excluded (#3449)\n* Fixed the `reverse_iterator` implementation for leaf nodes (#3446)\n* Fixed a bug that could cause a bad ordering of secondary indexes for\n  rows with different primary key sizes (#3444)\n* Fixed a bug that could cause a crash under high load when using\n  changefeeds (#3393)\n* Fixed a bug that made it impossible to chain `between` and\n  `distinct` (#3346)\n* Changed some calls to avoid passing `NULL` to `memcpy` (#3317)\n* Fixed the installer artwork on OS X Yosemite (#3253)\n* Changed the version scheme for the JavaScript driver to avoid\n  mis-use of pre-release numbers (#3281)\n* Fixed a bug that could cause `rethinkdb import` and `rethinkdb\n  export` to hang (#3458)\n\n---\n\n# Release 1.15.2 (Lawrence of Arabia)\n\nReleased on 2014-11-07\n\nBug fix update.\n\n* Added packages for Ubuntu 14.10 \"Utopic Unicorn\" (#3237)\n* Fixed a bug with memory handling in S2 (#3201)\n* Fixed a bug handling paged results in the Data Explorer (#3111)\n* Fixed a bug that caused a crash on exit if a joined server with an open\n  changefeed crashed (#3038)\n* Fixed a bug that caused a crash when unsharding discarded more rows than\n  expected when batching results (#3264)\n* Fixed a bug that could lead to crashes when changefeeds were frequently\n  registered and unregistered (#3205)\n* Changed the `r.point` constructor to be deterministic, allowing it to be used\n  in secondary index functions (#3287)\n* Fixed an incompatibility problem between Python 3.4 and the `import` command\n  (#3259)\n* Fixed a buffer alignment issue with `object_buffer_t` data (#3300)\n\n---\n\n# Release 1.15.1 (Lawrence of Arabia)\n\nReleased on 2014-10-07\n\nBug fix update.\n\n* Fixed a bug where tables were always created with hard durability, regardless\n  of the `durability` option (#3128)\n* Fixed a bug that caused HTTPS access with `r.http` to fail under OS X (#3112)\n* Fixed a bug in the Python driver that caused pickling/unpickling of time\n  objects to fail (#3024)\n* Changed the Data Explorer autocomplete to not override Ctrl+Tab on Firefox\n  (#2959)\n* Fixed a bug that caused a crash when a non-directory file was specified as\n  RethinkDB's startup directory (#3036)\n* Added native packages for Debian (#3125, #3107)\n* Fixed a compilation error on ARM CPUs (#3116)\n* Support building with Protobuf 2.6.0 (#3137)\n\n---\n\n# Release 1.15.0 (Lawrence of Arabia)\n\nReleased on 2014-09-23\n\nThe highlights of this release are support for geospatial objects and queries,\nand significant performance upgrades relating to datum serialization (twice as\nfast for many analytical workloads). Read the [release blog post][1.15-blog]\nfor more details.\n\n[1.15-blog]: http://rethinkdb.com/blog/1.15-release/\n\nOnly documents modified after upgrading to 1.15 will receive these performance\ngains. You may \"upgrade\" older documents by performing any write that modifies\ntheir contents. For example, you could add a dummy field to all the documents in\na table and then remove it:\n\n    r.table('tablename').update({dummy_field: true})\n    r.table('tablename').replace(r.row.without('dummy_field'))\n\nThere are no API-breaking changes in this release.\n\n## New features ##\n\n* ReQL\n  * Added geospatial query and index support (#2571, #2847, #2851, #2854, #2859,\n    #3003, #3011)\n  * Added `r.uuid` for generating unique IDs (#2063)\n  * Added a `BRACKET` term to the query language, to improve the bracket\n    operator in client drivers (#1179)\n\n## Improvements ##\n\n* Server\n  * Significantly improved performance of read operations by lazily\n    deserializing data: ~1.15x faster for simple queries, ~2x faster for many\n    analytical queries, and ~50x for count queries (#1915, #2244, #2652)\n  * Removed the option for `datum_t` to be uninitialized (#2985)\n  * Improved the performance of `zip` by replacing the `zip_datum_stream_t` type\n    with a transformer function (#2654)\n  * Clarified error messages when the data in the selection could not be printed\n    (#972)\n  * Improved performance of `r.match` by adding regex caching and a framework\n    for generic query-based caches (#2196)\n* Testing\n  * Removed unnecessary files from `test/common` (#2829)\n  * Changed all tests to run with `--cache-size` parameter (#2816)\n* Python driver\n  * Modified `r.row` to provide an error message on an attempt to call it like a\n    function (#2960)\n* JavaScript driver\n  * Errors thrown by the driver now have a stack trace (#3087)\n\n## Fixed bugs ##\n\n* ReQL\n  * Fixed a bug for `r.literal` corner cases (#2710)\n  * Improved error message when `r.literal` is used in an invalid context\n    (#1600)\n* Web UI\n  * Fixed a bug that caused selection in the query text area to become\n    unresponsive with large queries (#3043)\n  * Fixed a bug that caused \"more data is available\" to be displayed incorrectly\n    in certain cases (#3037)\n* Server\n  * Fixed a display bug with log entries in the web UI (#2627)\n  * Fixed a bug where Makefile miscounted dependencies when `ql2.proto` was\n    changed (#2965)\n  * Fixed a bug where the connection authorization key was improperly encoded\n    (#2952)\n  * Fixed an uninitialized variable warning during builds (#2977)\n* Testing\n  * Fixed various bugs in tests (#2940, #2887, #2844, #2837, #2603, #2793)\n* JavaScript driver\n  * Fixed a bug in the JavaScript driver that caused backtraces to not print\n    properly (#2793)\n* Python driver\n  * Replaced `or isinstance` with a tuple of types (#2968)\n  * Removed unused `kwarg` assignments (#2969)\n* Ruby driver\n  * Fixed a bug where `default_db`, `host` and `port` were not exposed in the\n    Connection object (#2849)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 1.15. In no particular order:\n\n* Sathyanarayanan Gunasekaran (@gsathya)\n* Adam Grandquist (@grandquista)\n* Duane Johnson (@canadaduane)\n* Colin Mattson(@cmattson)\n* Justas Brazauskas (@jutaz)\n* Matt Stith (@stith)\n* Dmitry Minkovsky (@dminkovsky)\n\n---\n\n# Release 1.14.1 (Brazil)\n\nReleased on 2014-09-09\n\nBug fix update.\n\n* Fixed a bug that caused `rethinkdb index-rebuild` to fail with auth keys (#2970)\n* Changed `rethinkdb export` to specify `binary_format='raw'` to work with binary data correctly (#2964)\n* Fixed `rethinkdb import` to handle Unicode in CSV files (#2963)\n* Updated the Valgrind suppressions file to fix false \"uninitialized value\" warnings (#2961)\n* Fixed a bug that caused duplicate perfmons when recreating an index (#2951)\n* Fixed a bug that could cause `r.http` to crash when used with pagination and `coerce_to` (#2947)\n* Improved the printing of binary data in Python and Ruby REPLs (#2942)\n* Fixed a bug that could corrupt databases larger than 4GB on 32-bit systems (#2928)\n* Fixed permission issues with the web admin interface files (#2927)\n* Fixed a bug that caused a crash due to incorrect error handling in profile mode (#2718)\n* Fixed a bug that caused a crash when existing servers tried to connect to a new server with an unresolvable hostname (#2708)\n\n---\n\n# Release 1.14.0 (Brazil)\n\nReleased on 2014-08-20\n\nThe highlights of this release are:\n\n* Support for storing binary data\n* Seamless database migration\n* Support for Python 3\n\nRead the [release blog post][1.14-blog] for more details.\n\n[1.14-blog]: http://rethinkdb.com/blog/1.14-release/\n\n## Compatibility ##\n\n### Backwards-compatible changes ###\n\nData files from RethinkDB versions 1.13.0 onward will be automatically\nmigrated to version 1.14.x. As with any major release, back up your data files\nbefore performing the upgrade. If you are upgrading from a release earlier\nthan 1.13.0, follow the [migration instructions][1.14-migration] before upgrading:\n\n[1.14-migration]: http://rethinkdb.com/docs/migration/\n\nSecondary indexes now use a new format; old indexes will continue to work, but\nyou should rebuild indexes after upgrading to 1.14.x. A warning about outdated\nindexes will be issued on startup.\n\nIndexes can be migrated to the new format with the `rethinkdb index-rebuild`\nutility. Consult the [troubleshooting document][1.14-outdated-index] for more\ninformation:\n\n[1.14-outdated-index]: http://rethinkdb.com/docs/troubleshooting/#my-secondary-index-is-outdated\n\n### API-breaking changes ###\n\nThe `return_vals` optional argument for `insert`, `delete` and `update` has\nbeen changed to `return_changes`, and works with all write operations\n(previously, this only worked with single-document writes). The returned\nobject is in a new format that is backwards-incompatible with previous\nversions. Consult the API documentation for [insert][1.14-insert], [delete][1.14-delete],\nand [update][1.14-update] for details:\n\n[1.14-insert]: http://rethinkdb.com/api/javascript/insert\n[1.14-delete]: http://rethinkdb.com/api/javascript/delete\n[1.14-update]: http://rethinkdb.com/api/javascript/update\n\nThe `upsert` optional argument to `insert` has been replaced with `conflict`\nand new allowed values of `error`, `replace` or `update`. This is a\nbackwards-incompatible change. Consult the API documentation for more\ninformation.\n\n## New features ##\n\n* Server\n  * Return old/new values for multi-row write operations (#1382)\n  * `upsert` replaced with `conflict` argument for `insert` (#1838)\n  * Added binary data type support via `binary` (#137, #2612, #2931)\n  * `binary_format=\"raw\"` added to `run` (#2762)\n  * Secondary indexes can be renamed with `index_rename` (#2794)\n  * Secondary indexes can be duplicated (#2797)\n  * Out of date secondary indexes logged on startup (#2798)\n  * `r.http` can return a binary object (#2806)\n* Python driver\n  * Added Python 3 support (#2502)\n* Data Explorer\n  * Support for displaying binary types (#2804, #2865)\n\n## Improvements ##\n\n* Server\n  * Server names now default to the hostname of the machine (#236, #2548)\n  * `distinct` is faster and now works on indexes (#1864)\n  * Improve secondary index queue handling (#1947)\n  * The array limit is now configurable (#2059)\n  * Allow initializing an empty directory (#2359)\n  * Max number of extprocs raised (#2391, #2584)\n  * Argument count errors are prettier (#2568)\n  * Better error reporting in `r.js` (#2748)\n  * `index_status` provides more info (#2791)\n* Command line\n  * Table names in the CLI are disambiguated (#2360, #2550)\n* Python driver\n  * Cleanup unneeded files (#2610)\n  * Documentation examples are now PEP8 compliant (#2534)\n* Testing\n  * Polyglot targets for Ruby 1.8, 1.9, 2.0, 2.1 (#773)\n  * Multiple versions of Python can be tested simultaneously\n* Web UI\n  * Added a notification and helpful message for out-of-date secondary indexes\n    (#2799)\n\n## Fixed bugs ##\n\n* Server\n  * `--runuser` and `--rungroup` set proper permissions when used with\n    `rethinkdb create` (#1722)\n  * Improved behavior and error messages for write acks (#2039)\n  * Fix `getaddrinfo` error handling (#2110)\n  * Fix a bug with machine name generation (#2552, #2569)\n  * Fix a bug when compiling on GCC 4.7.2 (#2572)\n  * Fix memory corruption error (#2589)\n  * Fix stream cache error (#2607)\n  * Fix linking issue with RE2 (#2685)\n  * Miscellaneous build fixes (#2666, #2827)\n  * Fix rare conflict bug in cluster config (#2738)\n  * Fix variable initialization error (#2741)\n  * Fix bug in `RPCSemilatticeTest.MetadataExchange` (#2758)\n  * Changefeeds work on multiple joined servers (#2761)\n  * Secondary index functions ignore global optargs (#2767)\n  * Secondary indexes sort correctly (#2774, #2789)\n  * Fix crashing bug with undefined ordering (#2777)\n  * Fix dependency includes in Makefile (#2779)\n  * Convert `query_params` to a `map` (#2812)\n  * Convert `header_lines` into a `map` (#2818)\n  * Improve robustness with big documents (#2832)\n  * Wipe out old secondary index tree when post-constructing (#2925)\n  * Preliminary fix for web permission issues on CentOS (#2927)\n* ReQL\n  * Fix a bug in `delete_at` (#2696)\n  * `insert` and `splice` now check array size limit (#2697)\n  * Fix error in undocumented `batch_conf` option (#2709)\n* Web UI\n  * Improve interval notation for shard boundaries (#2081, #2635)\n  * The Data Explorer now remembers the current query on disconnects (#2460)\n  * The Data Explorer now hides overflowing text in its popup containers\n    (#2593)\n* Testing\n  * Miscellaneous testing improvements (#2396, #2583, #2760, #2787, #2788,\n    #2795)\n  * Update testing scripts for drivers (#2815)\n* Python driver\n  * Make `all` and `any` behave like `and_` and `or_` (#2659)\n  * Use `os.path.splitext` to check file extensions (#2681)\n* JavaScript driver\n  * Return errors rather than throw them (#2852, #2883)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for helping\nus ship RethinkDB 1.14. In no particular order:\n\n* Sathyanarayanan Gunasekaran (@gsathya)\n* James Costian (@jamescostian)\n* Ed Rooth (@sym3tri)\n* Cole Gleason (@colegleason)\n* Mikhail Goncharov (@metaflow)\n* Elian Gidoni (@eliangidoni)\n* Ivan Fraixedes (@ifraixedes)\n* Brett Griffin (@brettgriffin)\n* Ed Costello (@epc)\n* Juuso Haavisto (@9uuso)\n* Nick Verlinde (@npiv)\n* Ayman Mackouly (@1N50MN14)\n* Adam Grandquist (@grandquista)\n\n---\n\n# Release 1.13.4 (My Name is Nobody)\n\nReleased on 2014-08-14\n\nBug fix update.\n\n* Resolved several memory leaks (#2899, #2840, #2744)\n* Added a `--temp-dir` option to `rethinkdb dump` and `rethinkdb restore` (#2783)\n* The `batchConf` argument to `run` now works in the JavaScript driver (#2707)\n* Fixed the `Accept-Encoding` header sent by `r.http` (#2695)\n* Improved the performance of inserting large objects from the JavaScript driver (#2641)\n* `cursor.close` now takes a callback in the JavaScript driver (#2591)\n* Fixed a bug that caused `illegal to destroy fifo_enforcer_sink_t` errors (#2264)\n* Fixed a bug that caused `Assertion failed: [!parent->draining.is_pulsed()]` errors (#2811)\n* Improved the error message when running into version incompatibilities (#2657)\n* Improved the garbage collection for `r.js` (#2642)\n\n---\n\n# Release 1.13.3 (My Name is Nobody)\n\nReleased on 2014-07-07\n\nBug fix update.\n\n* Fix a compiler warning: `cluster_version may be used uninitialized` (#2640)\n* Fix code that used `std::move` twice on the same object (#2638)\n* Prepare for live cluster upgrades (#2563)\n* Fix a bug that could lead to inconsistent data (#2579)\n\n---\n\n# Release 1.13.1 (My Name is Nobody)\n\nReleased on 2014-06-26\n\nBug fix update.\n\n* Fixed a bug that caused `Assertion failed: [ptr_]` errors when shutting down (#2594)\n* Fixed a performance issue in the JSON parser (#2585)\n* The JavaScript driver no longer buffers change feeds (#2582)\n* Fixed a bug that caused `Uncaught exception of type \"cannot_perform_query_exc_t\"` errors (#2576)\n* No longer crash when a secondary index is named `primary` (#2575)\n* Queries that return `null` are now handled correctly in the Data Explorer (#2573)\n* `r.http` now properly parses headers when following a redirection (#2556)\n* Improved the performance of write operations on sharded tables (#2551)\n* Fixed a bug that caused `r.js` to crash in certain circumstances (#2435)\n* Correctly handle `EPIPE` errors when connecting to an old version of the server (#2422)\n* Fixed a bug that caused `Could not bind socket` errors when using `--bind` (#2405)\n* Fixed a bug that caused `Failed to parse  as valid uuid` errors (#2401)\n* Improved the `bad magic number` error message (#2302)\n* `default` now catches index out of bounds errors on streams (#1922)\n* Improved arity error messages in the JavaScript driver (#2449)\n\n---\n\n# Release 1.13.0 (My Name is Nobody)\n\nReleased on 2014-06-13\n\nThe highlights of this release are the `r.http` command for external\ndata access, change feed support via the new `changes` command, and\nfull support for Node.js promises in the JavaScript driver.\n\nRead the [release blog post][1.13-blog] for more details.\n\n[1.13-blog]: http://rethinkdb.com/blog/1.13-release/\n\n## Compatibility ##\n\nThis release is not compatible with data files from earlier\nreleases. If you have data you want to migrate from an older version\nof RethinkDB, please follow the [migration instructions][1.13-migration] before\nupgrading:\n\n[1.13-migration]: http://rethinkdb.com/docs/migration/\n\nThere are also some backwards incompatible changes in the JavaScript driver.\n\n* The `hasNext` command for cursors has been removed. `next` can be used instead.\n\n## New features ##\n\n* ReQL\n  * Added `r.random` for generating random numbers (#865)\n  * Made the second argument to `slice` optional ([#2048](http://gabrielecirulli.github.io/2048/))\n  * `eq_join` now accepts a function as its first argument, and does not fail if the field doesn't exist (#1764)\n  * `nth` can now return a selection, just like `get` (#348)\n  * Improved the `master not available` error message (#1811)\n  * Switched to the JSON protocol in the Ruby, JavaScript and Python drivers (#2224, #2390)\n  * Added the `changes` command for creating live change feeds (#997)\n  * Added `r.args` to allow specifying a dynamic number of arguments to commands such as `get_all` (#1854)\n  * Added `r.http` for interfacing with external APIs (#1383)\n* Server\n  * Added a JSON protocol to replace the protobuf protocol, which is now deprecated (#1868)\n  * Added a README describing the structure of the `src/` folder (#2301)\n  * Switched to manual versioning of the intra-cluster protocol (#2295)\n  * Made the serialization format version-aware (#2308, #2353)\n  * Improved the error message when running out of disk space (#1945)\n* JavaScript driver\n  * Added support for promises (using bluebird) (#1395)\n  * Removed the `hasNext` command (#2497)\n  * Added the `on`, `once`, `removeListener` and `removeAllListeners` methods to cursors (#2223)\n  * The first argument to `r.connect` has been made optional (#2273)\n* Tests\n  * Improved the run-test script and ported it to Python (#2235)\n  * Improved the ReQL tests (#1402)\n* Build\n  * Symbol files are now generated (#2330)\n  * Build with debugging symbols by default (#2323)\n  * Added a signature to the OS X package (#1565)\n  * Dropped support for GCC 4.4 (#1748)\n  * Added an explicit dependency on Python 2 in the `configure` script (#2478)\n  * Added a dependency on libcurl (#2400)\n\n## Improved performance ##\n\n* Server\n  * Allocate smaller pages in the cache (#2130)\n  * Reduce overhead by handling requests locally on the primary if possible (#2083)\n  * Adjusted the value of `chunk_processing_semaphore` (#2392)\n  * Improved backfilling on rotational drives (#2393)\n  * Metadata is no longer copied when evaluating `r.db` (#1907)\n  * No longer update the stat block when updating secondary indexes (#2431)\n  * Block writes are better combined in the cache (#2127)\n  * Concurrent garbage collection to improve disk space efficiency (#2457)\n* Testing\n  * Added automated performance regression tests (#1963)\n\n## Fixed bugs ##\n\n* Server\n  * Fixed the threaded coroutine implementation (#2168, #2332)\n  * HTTP 500 errors are now accompanied by an error message (#511)\n  * Got rid of vestigial memcache support (#803)\n  * Made `order_by` and other sortings be stable (#2155)\n  * Cleaned up blob_t code to make it more reliable (#2227)\n  * Fixed a bug that caused crashes when dropping secondary indexes under load (#2251)\n  * Fixed a bug in the JSON parsing code that caused a crash (#2489)\n  * Fixed a bug that could cause segfaults (#2491)\n  * Avoid high memory consumption on startup (#2329)\n  * Disabled Nagle algorithm for outgoing TCP connections (#2529)\n  * Remove some potentially objectionable server names (#2468)\n  * Fixed a bug that caused `Callstack overflow in a coroutine` errors (#2357)\n  * Merged upstream fixes to `cJSON` (#2496)\n  * Fixed a bug that could cause a segmentation fault (#2500)\n  * Fixed a bug in the serializer garbage byte calculation (#2541)\n* ReQL\n  * Added the database name to error messages (#2280)\n  * No longer report run-time errors as client errors (#1908)\n  * Arguments to `r.expr` are now properly validated (#2384)\n  * No longer crash when `r.js` returns a bad datum (#2409)\n  * Fixed handling of global optargs (#2525)\n* Ruby driver\n  * Ignore `close` errors when reconnecting (#2276)\n  * Fixed conflicts with active support (#2284)\n  * Added a missing `nesting_depth` argument to `r.expr` (#2408)\n  * Modified the driver to work with JRuby (#2296)\n  * The driver now prefetches cursor data (#2373)\n* JavaScript driver\n  * Improved the variable names in error messages (#2461)\n* Web UI\n  * Fixed a bug that caused JavaScript exceptions (#2503)\n  * Fixed the per-server document count (#1836)\n  * The database name is now shown on the table page (#2366)\n  * Removed the inconsistent green tick next to the secondary index status (#2084)\n  * Fixed email highlighting (#2378)\n  * Large responses no longer cause the Data Explorer to become unresponsive (#2481)\n  * Fixed a bug triggered by clearing the Data Explorer history (#2389)\n* Tests\n  * Converted the memcache tests to use ReQL (#803)\n\n## Contributors ##\n\nMany thanks to external contributors from the RethinkDB community for\nhelping us ship RethinkDB 1.13. In no particular order:\n\n* Liu Aleaxander (@Aleaxander)\n* Nicolas Viennot (@nviennot)\n* Elian Gidoni (@eliangidoni)\n* Matthew Frazier (@leafstorm)\n* Masatoshi Ishida (@Masatoshi)\n\n---\n\n# Release 1.12.5 (The Wizard of Oz)\n\nReleased on 2014-05-21\n\nBug fix update.\n\n* Fixed a bug that caused `Guarantee failed: [!mod_info->deleted.second.empty() && mod_info->added.second.empty()]` errors (#2285)\n* Fixed the behaviour of `order_by` following `between` (#2307)\n* Fixed a bug that caused `Deserialization of rdb value failed with error archive_result_t::RANGE_ERROR` errors (#2399)\n* JavaScript driver: `reduce` no longer accepts the `base` argument (#2288)\n* Python driver: improved the error message when a cursor's connection is closed (#2291)\n* Python driver: improved the implementation of cursors (#2364, #2337)\n\n---\n\n# Release 1.12.4 (The Wizard of Oz)\n\nReleased on 2014-04-22\n\nBug fix update.\n\n* Fixed a bug that caused `Assertion failed: [page->is_disk_backed()]` errors (#2260)\n* Fixed a bug that caused incorrect query results and frequent server crashes under low memory conditions (#2237)\n\n---\n\n# Release 1.12.3 (The Wizard of Oz)\n\nReleased on 2014-04-17\n\nBug fix update.\n\n* Compilation no longer fails with SEMANTIC_SERIALIZER_CHECK=1 (#2239)\n* Identical `--join` options no longer cause a crash (#2219)\n* Fixed a race condition in the Ruby driver (#2194)\n* Concurrent backfills are now limited to 4 per peer and 12 total (#2211)\n* Failure to `fsync` a directory is now a warning instead of an error (#2255)\n* Packages are now available for Ubuntu 14.04, codename Trusty Tahr (#2101)\n\n---\n\n# Release 1.12.2 (The Wizard of Oz)\n\nReleased on 2014-04-08\n\nBug fix update.\n\n* Fixed a bug that caused `illegal to destroy fifo_enforcer_sink_t` errors (#2092)\n* Fixed a bug that caused `Guarantee failed: [resp != __null]` errors (#2214)\n* Fixed a bug that caused `Segmentation fault` errors (#2222)\n* Use less memory for common operations (#2164, #2213)\n* Ruby 2.1.1 support (#2177)\n* Fixed the `PageTest` unit test (#2187)\n* Updated the documentation (#2197)\n* Updated the sample config file (#2205)\n\n---\n\n# Release 1.12.1 (The Wizard of Oz)\n\nReleased on 2014-03-27\n\nBug fix update.\n\n* Fixed crash `evicter.cc at line 124: Guarantee failed: [initialized_]` (#2182)\n* Fixed `index_wait` which did not always work (#2170, #2179)\n* Fixed a segmentation fault (#2178)\n* Added a `--hard-durability` option to import/restore\n* Changed the default `--cache-size` to be more friendly towards machines with less free RAM\n* Changed tables to scale their soft durability throttling based on their cache size\n* Fixed some build failures (#2183, #2174)\n* Fixed the Centos i686 packages (#2176)\n\n---\n\n# Release 1.12.0 (The Wizard of Oz)\n\nReleased on 2014-03-26\n\nThe highlights of this release are a simplified map/reduce, an\nexperimental ARM port, and a new caching infrastructure.\n\nRead the [release blog post][1.12-blog] for more details.\n\n[1.12-blog]: http://rethinkdb.com/blog/1.12-release/\n\n## Compatibility ##\n\nThis release is not compatible with data files from earlier\nreleases. If you have data you want to migrate from an older version\nof RethinkDB, please follow the [migration instructions][1.12-migration] before\nupgrading:\n\n[1.12-migration]: http://rethinkdb.com/docs/migration/\n\nThere are also some backwards incompatible changes in ReQL, the query\nlanguage.\n\n* `grouped_map_reduce` and `group_by` were replaced by `group`\n* `reduce` no longer takes a `base` argument; use `default` instead\n* `table_create` no longer takes a `cache_size` argument\n* In JavaScript, the calling convention for `run` has changed.\n\n## New features ##\n\n* Server\n  * Added support for the ARM architecture (#1625)\n  * Added per-instance cache quota and removed per-table quotas (#97)\n    * Added a `--cache-size` command line option that sets the cache size in MiB for a single instance\n    * Removed the `cache_size` optional argument for `table_create`\n  * Wrote a new and improved cache (#1642)\n  * Added gzip compression to the built-in web server (#1746)\n* ReQL\n  * `merge` now accepts functions as an argument (#1345)\n  * Added an `object` command to build objects from dynamic field names (#1857)\n  * Removed the optional `base` argument to `reduce` (#888)\n  * Added a `split` command to split strings (#1099)\n  * Added `upcase` and `downcase` commands to change the case of a string (#874)\n  * Change how aggregation and grouping is performed (#1096)\n    * Removed `grouped_map_reduce` and `groupBy`\n    * Added `group` and `ungroup`\n    * Changed the behavior of `count`, `sum` and `avg` and added `max` and `min`\n* Web UI\n  * Display index status and progress bars in the web UI (#1614)\n\n## Improved performance ##\n\n* Server\n  * Improved the scalability of meta operations (such as table creation) to allow for more nodes in a cluster (#1648)\n  * Changed the CPU sharding factor to 8 for improved multi-core scalability (#1043)\n  * Batch sizes now scale better, which speeds up operations like `limit` (#1786)\n  * Tweaked batch sizes to avoid computing unused results (#1962)\n  * Improved throttling and LBA garbage collection to avoid stalls in query throughput (#1820)\n  * Many optimizations to avoid having the web UI time out when the server is under load (#1183)\n  * Improved backfill performance by using batches for sending and inserting data (#1971)\n  * Reduced wasteful copies when serializing (#1431)\n  * Evaluating queries now yields occasionally to avoid timeouts (#1631)\n  * Reduced performance impact of backfilling on other queries (#2071)\n* Web UI\n  * Improved how the web UI handles large clusters with many tables (#1662)\n* Ruby driver\n  * Removed inefficient construction-location backtraces (#1843)\n* Tests\n  * Added automated performance tests (#1806)\n\n## Fixed bugs ##\n\n* Server\n  * Improved the code to avoid heartbeat timeout errors when resharding (#1708)\n  * Resharding one table no longer makes other tables unavailable (#1751)\n  * Improved the blueprint suggester to distribute shards more evenly (#344)\n  * Queries from the data explorer are now interruptible (#1888)\n  * No longer fail if IPv6 is not available (#1925)\n  * Added support for the new v8 scope API (#1510)\n  * Coroutine stacks now freed to reduce memory consumption (#1670)\n  * Added range get, backfill and secondary index reads to the stats (#660)\n  * `r.table(...).count()` no longer stalls inserts (#1870)\n  * Fixed crashes when adding a secondary index (#1621, #1437)\n  * Improve the handling of out-of-memory conditions (#2003)\n  * Secondary index construction is now reported as a write operation in the stats (#1953)\n  * Fixed a crash that occasionally happened during replication (#1389)\n  * `linux_file_t::set_size` no longer makes blocking syscalls (#265)\n  * Fixed a crash caught by the unit tests (#1084)\n* Command line\n  * `rethinkdb admin` now prints warnings to stderr instead of stdout (#1316)\n  * The `import` and `export` scripts now display a row count when done (#1659)\n  * Added support for `log_file` and `no_direct_io` in the init script (#1769, #1892)\n  * Do not display a stack trace for regular errors printed by the backup scripts (#2098)\n  * `rethinkdb export` no longer fails when there are no tables (#1904)\n  * `rethinkdb import` no longer tries to parse CSV files as JSON (#2097)\n* Web UI\n  * No longer display wrong number of rows when a string is returned (#1669)\n  * The data explorer now properly closes cursors (#1569)\n  * The data explorer now displays empty tables correctly (#1698)\n  * Links are now relative so they can be proxied from a subdirectory (#1791)\n  * The server time reported by the profiler is now accurate (#1784)\n  * Improved the flow for removing dead servers (#1366)\n  * No longer lower replicas to 0 if the datacenter is primary (#1834)\n  * Now displays consistent availability information (#1756)\n  * Fixed a XSS security issue (#2018)\n  * Changing the number of acks no longer displays the sharding bar (#2023)\n  * The backfilling progress bar doesn't disappear when refreshing the page (#1997)\n  * Correctly handle newlines in the data explorer (#2021)\n  * Sort the table list in alphabetical order (#1704)\n  * Added mouseover text to the query execution time (#1940)\n  * The replication status no longer blinks (#2019)\n  * Fix inconsistencies in dates caused by DST (#2047)\n* Ruby driver\n  * Added a missing `close` method on cursors (#1568)\n  * Improved conflict handling (#1814)\n  * Use `define_method` instead of `method_missing`, which improves compatibility with Sinatra (#1896)\n* Python driver\n  * Improved the quality of the generated documentation (#1729)\n  * Added missing `and_` and `or_` and a warning for misuse of `|` and `&` (#1582)\n  * Added support for `r.row` in `eq_join` (#1810)\n  * Added a detailed error message when brackets are not used properly (#1434)\n  * `count` with an argument now behaves correctly (#1992)\n  * Added missing `get_field` command (#1941)\n* JavaScript driver\n  * Added support for `r.row` in `eqJoin` (#1810)\n  * Timeout events on the socket are now handled correctly (#1909)\n  * No longer use the deprecated ArrayBuffer API (#1803)\n  * Fix backtraces for optional arguments (#1935)\n  * Changed the syntax of `run` (#1890)\n  * Exposed the error constructors (#1926)\n  * Fixed the string representation of functions (#1919, #1894)\n  * Backtrace printing now works correctly for both protobufjs and node-protobuf (#1879)\n  * No longer extend `Array.prototype` (#2112)\n* Build\n  * `./configure` now checks for `boost` and can fetch it if it is not installed (#1699)\n  * The source distribution now includes the v8 source (#1844)\n  * Use Python 2 to build v8 (#1873)\n  * Improved how the build system fetches and builds external packages, and changed the default to not fetch anything (#1231)\n\n## Packaging ##\n\n* Support for Ubuntu Raring has been dropped (#1924)\n\n---\n\n# Release 1.11.3 (Breakfast at Tiffany's)\n\nReleased on 2014-01-14\n\nBug fix update.\n\n* Fixed a crash on multiple ctrl-c (#1848)\n* Ruby driver: fixed mutable backtraces (#1846)\n* Fixed a build failure on older versions of GCC (#1824)\n* Added missing durability argument to the Javascript driver (#1821)\n* Fixed a crash caused by changing the cluster configuration when there are unresolved issues (#1813)\n* Fixed a bug triggered by using `order_by` followed by `count` (#1796)\n* Tables can now be referenced by full name (e.g. `database.table`) in `rethinkdb admin` (#1795)\n* Fixed a bug triggered by chaining multiple joins (#1793)\n* Fixed a crash occasionally triggered by dropping an index (#1789)\n* The init script now fails when given wrong arguments (#1779)\n* RethinkDB now refuses to start if it cannot open the log file (#1778)\n* Fixed a JavaScript error in the Web UI (#1754)\n* Speed up count queries (#1733)\n* Fix a bug with thread-local storage that caused a segfault on certain platforms (#1731)\n* `get` of a non-existent document followed by `replace` now works as documented (#1570)\n\n---\n\n# Release 1.11.2 (Breakfast at Tiffany's)\n\nReleased on 2013-12-06\n\nBug fix update.\n\n* Fixed a bug caused by suggesting `r.ISO8601` in the Data Explorer\n* Cursor in the Data Explorer is restored when a command is selected via dropdown\n* Fixed a bug where queries returning null in the Data Explorer could not be parsed (#1739)\n* Always `fsync` parent directories to avoid data loss (#1703)\n* Fixed IPv6 issues with link-local addresses (#1694)\n* Add some support for Python 3 in the build scripts (#1709)\n\n---\n\n# Release 1.11.1 (Breakfast at Tiffany's)\n\nReleased on 2013-12-02\n\nBug fix update.\n\n* Drivers no longer ignore the timeFormat flag (#1719)\n* RethinkDB now correctly sets the `ResponseType` field in responses to `STOP` queries (#1715)\n* Fixed a bug that caused RethinkDB to crash with a failed guarantee (#1691)\n\n---\n\n# Release 1.11.0 (Breakfast at Tiffany's)\n\nReleased on 2013-11-25\n\nThis release introduces a new query profiler, an overhauled streaming infrastructure,\nand many enhancements that improve ease and robustness of operation.\n\nRead the [release blog post][1.11-blog] for more details.\n\n[1.11-blog]: http://rethinkdb.com/blog/1.11-release/\n\n## New Features ##\n\n* Server\n  * Removed anaphoric macros (#806)\n  * Changed the array size limit to 100,000 (#971)\n  * The server now reads blobs off of disk simultaneously (#1296)\n  * Improved the batch replace logic (#1468)\n  * Added IPv6 support (#1469)\n  * Reduced random disk seeks during write transactions (#1470)\n  * Merged writebacks on the serializer level (#1471)\n  * Streaming improvements: smarter batch sizes are sent to clients (#1543)\n  * Reduced the impact of index creation on realtime performance (#1556)\n  * Optimized insert performance (#1559)\n  * Added support for sending data back as JSON, improving driver performance (#1571)\n  * Backtraces now span coroutine boundaries (#1602)\n* Command line\n  * Added a progress bar to `rethinkdb import` and `rethinkdb export` (#1415)\n* ReQL\n  * Added query profiling, enabled by passing `profile=True` to `run` (#175)\n  * Added a sync command that flushes soft writes made on a table (#1046)\n  * Made it possible to wait for no-reply writes to complete (#1388)\n    * Added a `wait` command\n    * Added an optional argument to `close` and `reconnect`\n  * Added `index_status` and `index_wait` commands (#1562)\n* Python driver\n  * Added documentation strings (#808)\n  * Added streaming and performance improvements (#1371)\n  * Changed the installation procedure for using the C++ protobuf implementation (#1394)\n  * Improved the streaming logic (#1364)\n* JavaScript driver\n  * Changed the installation procedure for using the C++ protobuf implementation (#1172)\n  * Improved the streaming logic (#1364)\n* Packaging\n  * Made the version more explicit in the OS X package (#1413)\n\n## Fixed Bugs ##\n\n* Server\n  * No longer access `perfmon_collection_t` after destruction (#1497)\n  * Fixed a bug that caused nodes to become unresponsize and added a coroutine profiler (#1516)\n  * Made database files compatible between 32-bit and 64-bit versions (#1535)\n  * No longer use four times more cache space (#1538)\n  * Fix handling of errors in continue queries (#1619)\n  * Fixed heartbeat timeout when deleting many tables at once (#1624)\n  * Improved signal handling (#1630)\n  * Reduced the load caused by using the Web UI on a large cluster (#1660)\n* Command line\n  * Made `rethinkdb export` more resilient to low-memory conditions (#1546)\n  * Fixed a race condition in `rethinkdb import` (#1597)\n* ReQL\n  * Non-indexed `order_by` queries now return arrays (#1566)\n  * Type system now includes selections on both arrays and streams (#1566)\n  * Fixed wrong `inserted` result (#1547)\n  * Fixed crash caused by using unusual strings in `r.js` (#1638)\n  * Redefined batched stream semantics (includes a specific fix for the JavaScipt driver as well) (#1544)\n  * `r.js` now works with time values (#1513)\n* Python driver\n  * Handle interrupted system calls (#1362)\n  * Improved the error message when inserting dates with no timezone (#1509)\n  * Made `RqlTzInfo` copyable (#1588)\n* JavaScript driver\n  * Fixed argument handling (#1555, #1577)\n  * Fixed `ArrayResult` (#1578, #1584)\n  * Fixed pretty-printing of `limit` (#1617)\n* Web UI\n  * Made it obvious when errors are JavaScript errors or database errors (#1293)\n  * Improved the message displayed when there are more than 40 documents (#1307)\n  * Fixed date formatting (#1596)\n  * Fixed typo (#1668)\n* Build\n  * Fixed item counts in make (#1443)\n  * Bump the fetched version of `gperftools` (#1594)\n  * Fixed how `termcap` is handled by `./configure` (#1622)\n  * Generate a better version number when compiling from a shallow clone (#1636)\n\n---\n\n# Release 1.10.1 (Von Ryan's Express)\n\nReleased on 2013-10-23\n\nBug fix update.\n\n* Server\n  * `r.js` no longer fails when interrupted too early (#1553)\n  * Data for some `get_all` queries is no longer duplicated (#1541)\n  * Fixed crash `Guarantee failed: [!token_pair->sindex_write_token.has()]` (#1380)\n  * Fixed crash caused by rapid resharding (#728)\n* ReQL\n  * `pluck` in combination with `limit` now returns a stream when possible (#1502)\n* Python driver\n  * Fixed `undefined variable` error in `tzname()` (#1512)\n* Ruby driver\n  * Fixed error message when calling unbound function (#1336)\n* Packaging\n  * Added support for Ubuntu 13.10 (Saucy) (#1554)\n\n# Release 1.10.0 (Von Ryan's Express)\n\nReleased on 2013-09-26\n\nRead the [release blog post][1.10-blog] for more details.\n\n[1.10-blog]: http://rethinkdb.com/blog/1.10-release/\n\n## New Features ##\n\n* Added multi-indexes (#933)\n* Added selective history deletion to the Data Explorer (#1297)\n* Made `filter` support the nested object syntax (#1325)\n* Added `r.not_` to the Python driver (#1329)\n* The backup scripts are now installed by the Python driver (#1355)\n* Implemented variable-width object length encoding and other improvements to serialization (#1424)\n* Lowered the I/O pool threads' stack size (#1425)\n* Improved datum integer serialization (#1426)\n* Added a thin wrapper struct `threadnum_t` instead of using raw ints for thread numbers (#1445)\n* Re-enabled full perfmon capability (#1474)\n\n## Fixed Bugs ##\n\n* Fixed the output of `rethinkdb admin help` (#936, #1447)\n* `make` no longer runs `./configure` (#979)\n* Made the Python code mostly Python 3 compatible (still a work in progress) (#1050)\n* The Data Explorer now correctly handles unexpected token errors (#1334)\n* Improved the performance of JSON parsing (#1403)\n* `batched_rget_stream_t` no longer uses an out-of-date interruptor (#1411)\n* The missing `protobuf_implementation` variable was added to the JavaScript driver (#1416)\n* Improved the error and help messages in the backup scripts (#1417)\n* `r.json` is no longer incorrectly marked as non-deterministic (#1430)\n* Fixed the import of `rethinkdb_pbcpp` in the Python driver (#1438)\n* Made some stores go on threads other than just 0 through 3 (#1446)\n* Fixed the error message when using `groupBy` with illegal pattern (#1460)\n* `default` is no longer unprintable in Python (#1476)\n\n---\n\n# Release 1.9.0 (Kagemusha)\n\nReleased on 2013-09-09\n\nRead the [release blog post][1.9-blog] for more details.\n\n[1.9-blog]: http://rethinkdb.com/blog/1.9-release/\n\nBug fix update.\n\n* Server\n  * Fixed a potential crash caused by a coroutine switch in exception handlers (#153)\n  * No longer duplicate documents in the secondary indexes (#752)\n  * Removed unnecessary conversions between `datum_t` and `cJSON` (#1041)\n  * No longer load documents from disk for count queries (#1295)\n  * Changed extproc code to use `datum_t` instead of `cJSON_t` (#1326)\n* ReQL\n  * Use `Buffer` instead of `ArrayBuffer` in the JavaScript driver (#1244)\n  * `orderBy` on an index no longer destroys the preceding `between` (#1333)\n  * Fixed error in the python driver caused by multiple threads using lambdas (#1377)\n  * Fixed Unicode handling in the Python driver (#1378)\n* Web UI\n  * No longer truncate server names (#1313)\n* CLI\n  * `rethinkdb import` now works with Python 2.6 (#1349)\n\n---\n\n# Release 1.8.1 (High Noon)\n\nReleased on 2013-08-21\n\nBug fix update.\n\n* The shard suggester now works with times (#1335)\n* The Python backup scripts no longer rely on `pip show` (#1331)\n* `rethinkdb help` no longer uses a pager (#1315, #1308)\n* The web UI now correctly positions `SVGRectElement` (#1314)\n* Fixed a bug that caused a crash when using `filter` with a non-deterministic value (#1299)\n\n---\n\n# Release 1.8.0 (High Noon)\n\nReleased on 2013-08-14\n\nThis release introduces date and time support, a new syntax for querying nested objects and 8x improvement in disk usage.\n\nRead the [release blog post][1.8-blog] for more details.\n\n[1.8-blog]: http://rethinkdb.com/blog/1.8-release/\n\n## New Features ##\n\n* ReQL\n  * `order_by` now accepts a function as an argument and can efficiently sort by index (#159, #1120, #1258)\n  * `slice` and `between` are now half-open by default (#869)\n    * The behaviour can be changed by setting the new optional `right_bound` argument to `closed`\n      or by setting `left_bound` to `open`\n  * `contains` can now be passed a predicate (#870)\n  * `merge` is now deep by default (#872)\n    * Introduced `literal` to merge flat values\n  * `coerce_to` can now convert strings to numbers (#877)\n  * Added support for times (#977)\n    * `+`, `-`, `<`, `<=`, `>`, `>=`, `==` and `!=`: arithmetic and comparison\n    * `during`: match a time with an interval\n    * `in_timezone`: change the timezone offset\n    * `date`, `time_of_day`, `timezone`, `year`, `month`, `day`, `weekday`, `hour`, `minute` and `second`: accessors\n    * `time`, `epoch_time` and `iso8601`: constructors\n    * `monday` to `sunday` and `january` to `december`: constants\n    * `now`: current time\n    * `to_iso8601`, `to_epoch_time`: conversion\n  * Add the nested document syntax to functions other than `pluck` (#1094)\n    * `without`, `group_by`, `with_fields` and `has_fields`\n  * Remove Google Closure from the JavaScript driver (#1194)\n    * It now depends on the `protobufjs` and `node-protobuf` libraries\n* Server\n  * Added a `--canonical-address HOST[:PORT]` command line option for connecting RethinkDB nodes across different networks (#486)\n    * Two instances behind proxies can now be configured to connect to each other\n  * Optimize space efficiency by allowing smaller block sizes (#939)\n  * Added a `--no-direct-io` startup flag that turns off direct IO (#1051)\n  * Rewrote the `extproc` code, making `r.js` interuptible and fixing many crashes (#1097, #1106)\n  * Added support for V8 >= 3.19 (#1195)\n  * Clear blobs when they are unused (#1286)\n* Web UI\n  * Use relative paths (#1053)\n* Build\n  * Add support for Emacs' `flymake-mode` (#1161)\n\n## Fixed Bugs ##\n\n* ReQL\n  * Check the type of the callback passed to `next` and `each` in the JavaScript driver (#656)\n  * Fixed how some backtraces are printed in the JavaScript driver (#973)\n  * Coerce the port argument to a number in the Python driver (#1017)\n  * Functions that are polymorphic on objects and sequences now only recurse one level deep (#1045)\n    * Affects `pluck`, `has_fields`, `with_fields`, etc\n  * In the JavaScript driver, no longer fail when requiring the module twice (#1047)\n  * `r.union` now returns a stream when given two streams (#1081)\n  * `r.db` can now be chained with `do` in the JavaScript driver (#1082)\n  * Improve the error message when combining `for_each` and `return_vals` (#1104)\n  * Fixed a bug causing the JavaScript driver to overflow the stack when given an object with circular references (#1133)\n  * Don't leak internal functions in the JavaScript driver (#1164)\n  * Fix the qurey printing in the Python driver (#1178)\n  * Correctly depend on node >= 0.10 in the JavaScript driver (#1197)\n* Server\n  * Improved the error message when there is a version mismatch in data files (#521)\n  * The `--no-http-admin` option now disables the check for the web assets folder (#1092)\n  * No longer compile JavaScript expressions once per row (#1105)\n  * Fixed a crash in the 32-bit version caused by not using 64-bit file offsets (#1129)\n  * Fixed a crash caused by malformed json documents (#1132)\n  * Fixed a crash caused by moving `func_t` betweek threads (#1157)\n  * Improved the scheduling the coroutines that sometimes caused heartbeat timeouts (#1169)\n  * Fixed `conflict_resolving_diskmgr_t` to suport files over 1TB (#1170)\n  * Fixed a crash caused by disconnecting too fast (#1182)\n  * Fixed the error message when `js_runner_t::call` times out (#1218)\n  * Fixed a crash caused by serializing unintitialised values (#1219)\n  * Fixed a bug that caused an assertion failure in `protob_server_t` (#1220)\n  * Fixed a bug causing too many file descriptors to be open (#1225)\n  * Fixed memory leaks reported by valgrind (#1233)\n  * Fixed a crash triggered by the BTreeSindex test (#1237)\n  * Fixed some problems with import performance, interruption, parsing, and error reporting (#1252)\n  * RethinkDB proxy no longer crashes when interacting with the Web UI (#1276)\n* Tests\n  * Fixed the connectivity tests for OS X (#613)\n  * Fix the python connection tests (#1110)\n* Web UI\n  * Provide a less scary error message when a request times out (#1074)\n  * Provide proper suggestions in the presence of comments in the Data Explorer (#1214)\n  * The `More data` link in the data explorer now works consistently (#1222)\n* Documentation\n  * Improved the documentaiton for `update` and `pluck` (#1141)\n* Build\n  * Fixed bugs that caused make to not rebuild certain files or build files it should not (#1162, #1215, #1216, #1229, #1230, #1272)\n\n---\n\n# Release 1.7.3 (Nights of Cabiria)\n\nReleased on 2013-07-19\n\nBug fix update.\n\n* RethinkDB no longer fails to create the data directory when using `--daemon` (#1191)\n\n---\n\n# Release 1.7.2 (Nights of Cabiria)\n\nReleased on 2013-07-18\n\nBug fix update.\n\n* Fixed `wire_func_t` serialization that caused inserts to fail (#1155)\n* Fixed a bug in the JavaScript driver that caused asynchronous connections to fail (#1150)\n* Removed `nice_crash` and `nice_guarantee` to improve error messages and logging (#1144)\n* `rethinkdb import` now warns when unexpected files are found (#1143)\n* `rethinkdb import` now correctly imports nested objects (#1142)\n* Fixed the connection timeout in the JavaScript driver (#1140)\n* Fixed `r.without` (#1139)\n* Add a warning to `rethinkdb dump` about indexes and cluster config (#1137)\n* Fixed the `debian/rules` makefile to properly build the rethinkdb-dbg package (#1130)\n* Allow multiple instances with different port offsets in the init script (#1126)\n* Fixed `make install` to not use `/dev/stdin` (#1125)\n* Added missing files to the OS X uninstall script (#1123)\n* Fixed the documentation for insert with the returnVals flag in JavaScript (#1122)\n* No longer cache `index.html` in the web UI (#1117)\n* The init script now waits for rethinkdb to stop before restarting (#1115)\n* `rethinkdb` porcelain now removes the new directory if it fails (#1070)\n* Added cooperative locking to the rethinkdb data directory to detect conflicts earlier (#1109)\n* Improved the comments in the sample configuration file (#1078)\n* Config file parsing now allows options that apply to other modes of rethinkdb (#1077)\n* The init script now creates folders with the correct permissions (#1069)\n* Client drivers now time out if the connection handshake takes too long (#1033)\n\n---\n\n# Release 1.7.1 (Nights of Cabiria)\n\nReleased on 2013-07-04\n\nBug fix update.\n\n* Fixed a bug causing `rethinkdb import` to crash on single files\n* Added options to `rethinkdb import` for custom CSV separators and no headers (#1112)\n\n---\n\n# Release 1.7.0 (Nights of Cabiria)\n\nReleased on 2013-07-03\n\nThis release introduces hot backup, atomic set and get operations, significant insert performance improvements, nested document syntax, and native binaries for CentOS / RHEL.\n\nRead the [release blog post][1.7-blog] for more details.\n\n[1.7-blog]: http://rethinkdb.com/blog/1.7-release/\n\n\n## New Features ##\n\n* ReQL\n  * Added `r.json` for parsing JSON strings server-side (#887)\n  * Added syntax to `pluck` to access nested documents (#889)\n  * `get_all` now takes a variable number of arguments (#915)\n  * Added atomic set and get operations (#976)\n    * `update`, `insert`, `delete` and `replace` now take an optional `return_vals` argument that returns the values that have been atomically modified\n  * Renamed `getattr` to `get_field` and make it polymorphic on arrays (#993)\n  * Drivers now use faster protobuf libraries when possible (#1027, #1026, #1025)\n  * Drivers now use `r.json` to improve the performance of inserts (#1085)\n  * Improved the behaviour of `pluck` (#1095)\n    * A field with a non-pluckable value is considered absent\n* Web UI\n  * It is now possible to resolve `auth_key` conflicts via the web UI (#1028)\n  * The web UI now uses relative paths (#1053)\n* Server\n  * Flushes to disk less often to improve performance without affecting durability (#520)\n* CLI\n  * Import and export JSON and CSV files (#193)\n    * Four new subcommands: `rethinkdb import`, `rethinkdb export`, `rethinkdb dump` and `rethinkdb restore`\n  * `rethinkdb admin` no longer requires the `--join` option (#1052)\n    * It now connects to localhost:29015 by default\n* Documentation\n  * Documented durability settings correctly (#1008)\n  * Improved instructions for migration (#1013)\n  * Documented the allowed character names for tables (#1039)\n* Packaging\n  * RPMs for CentOS (#268)\n\n## Fixed Bugs ##\n\n* ReQL\n  * Fixed the behaviour of `between` with `null` and secondary indexes (#1001)\n* Web UI\n  * Moved to using a patched Bootstrap, Handlebars.js 1.0.0 and LESS 1.4.0 (#954)\n  * Fixed bug causing nested arrays to be shown as `{...}` in the Data Explorer (#1038)\n  * Inline comments are now parsed correctly in the Data Explorer (#1060)\n  * Properly remove event listeners from the dashboard view (#1044)\n* Server\n  * Fixed a crash caused by shutting down the server during secondary index creation (#1056)\n  * Fixed a potential btree corruption bug (#986)\n* Tests\n  * ReQL tests no longer leave zombie processes (#1055)\n\n---\n\n# Release 1.6.1 (Fargo)\n\nReleased on 2013-06-19\n\n## Critical Security Fixes ##\n\n* Fixed a buffer overflow in the networking code\n* Fixed a possible timing attack on the API key\n\n## Other Changes ##\n\n* In python, `r.table_list()` no longer throws an error (#1005)\n* Fixed compilation failures with clang 3.2 (#1006)\n* Fixed compilation failures with gcc 4.4 (#1011)\n* Fixed problems with resolving a conflicted auth_key (#1024)\n\n---\n\n# Release 1.6.0 (Fargo)\n\nReleased on 2013-06-13\n\nThis release introduces basic access control, regular expression matching, new array operations, random sampling, better error handling, and many bug fixes.\n\nRead the [release blog post][1.6-blog] for more details.\n\n[1.6-blog]: http://rethinkdb.com/blog/1.6-release/\n\n## New Features ##\n\n* ReQL\n  * Added access control with a single, common API key (#266)\n  * Improved handshake to the client driver protocol (#978)\n  * Added `sample` command for random sampling of sequences (#861, #182)\n  * Secondary indexes can be queried with boolean values (#854)\n  * Added `onFinished` callback to `each` in JavaScript to improve cursors (#443)\n  * Added per-command durability settings (#890)\n    * Changed `hard_durability=True` to `durability = 'soft' | 'hard'`\n    * Added a `durability` option to `run`\n  * Added `with_fields` command, and `pluck` no longer throws on missing attributes (#886)\n  * Renamed `contains` to `has_fields` (#885)\n    * `has_fields` runs on tables, objects, and arrays, and doesn't throw on missing attributes\n    * `contains` now checks if an element is in an array\n  * Added `default` command: replaces missing fields with a default value (#884)\n  * Added new array operations (#868, #198, #341)\n      * `prepend`: prepends an element to an array\n      * `append`: appends an element to an array\n      * `insert_at`: inserts an element at the specified index\n      * `splice_at`: splices a list into another list at the specified index\n      * `delete_at`: deletes the element at the specified index\n      * `change_at`: changes the element at the specified index to the specified value\n      * `+` operator: adds two arrays -- returns the ordered union\n      * `*` operator: repeats an array `n` times\n      * `difference`: removes all instances of specified elements from an array\n      * `count`: returns the number of elements in an array\n      * `indexes_of`: returns positions of elements that match the specified value in an array\n      * `is_empty`: check if an array or table is empty\n      * `set_insert`: adds an element to a set\n      * `set_intersection`: finds the intersection of two sets\n      * `set_union`: returns the union of two sets\n      * `set_difference`: returns the difference of two sets\n  * Added `match` command for regular expression matching (#867)\n  * Added `keys` command that returns the fields of an object (#181)\n* Web UI\n  * Document fields are now sorted in alphabetical order in the table view (#832)\n* CLI\n  * Added `-v` flag as an alias for `--version` (#839)\n  * Added `--io-threads` flag to allow limiting the amount of concurrent I/O operations (#928)\n* Build system\n  * Allow building the documentation with Python 3 (#826, #815)\n  * Have `make` build the Ruby and Python drivers (#923)\n\n## Fixed Bugs ##\n\n* Server\n  * Fixed a crash caused by resharding during secondary index creation (#852)\n  * Fixed style problems: code hygiene (#805)\n  * Server code cleanup (#920, #924)\n  * Properly check permissions for writing the pid file (#916)\n* ReQL\n  * Use the correct function name in backtraces (#995)\n  * Fixed callback issues in the JavaScript driver (#846)\n  * In JavaScript, call the callback when the connection is closed (#758)\n  * In JavaScript, GETATTR now checks the argument count (#992)\n  * Tweaked the CoffeeScript source to work with older versions of coffee and node (#963)\n  * Fixed a typo in the error handling of the JavaScript driver (#961)\n  * Fixed performance regression for `pluck` and `without` (#947)\n  * Make sure callbacks get cleared in the Javascript driver (#942)\n  * Improved errors when `return` is omitted in Javascript (#914)\n* Web UI\n  * Correctly distinguish case sensitive table names (#822)\n  * No longer display some results as `{ ... }` in the table view (#937)\n  * Ensured tables are available before listing their indexes (#926)\n  * Fixed the autocompletion for opening square brackets (#917)\n* Tests\n  * Modified the polyglot test framework to catch more possible errors (#724)\n  * Polyglot tests can now run in debug mode (#614)\n* Build\n  * Look for `libprotobuf` in the correct path (#860, #853)\n  * Always fetch and use the same version of Handlebars.js (#821, #819, #958)\n  * Check for versions of LESS that are known to work (#956)\n  * Removed bitrotted MOCK_CACHE_CHECK option (#804)\n\n---\n\n# Release 1.5.2 (Le Gras de Ouate)\n\nReleased on 2013-05-24\n\nBug fix update.\n\n## Changes ##\n\n* Fix #844: Compilation error when using `./configure --fetch protobuf` resolved\n* Fix #840: Using `.run` in the data explorer gives a more helpful error message\n* Fix #817: Fix a crash caused by adding a secondary index while under load\n* Fix #831: Some invalid queries no longer cause a crash\n\n---\n\n# Release 1.5.1 (The Grad You Ate) #\n\nReleased on 2013-05-16\n\nBug fix update.\n\n## Changes ###\n\n* Fix a build error\n* Fix #816: Table view in the data explorer is no longer broken\n\n---\n\n# Release 1.5.0 (The Graduate)\n\nReleased on 2013-05-16\n\nThis release introduces secondary indexes, stability and performance enhancements and many bug fixes.\n\nRead the [release blog post][1.5-blog] for more details.\n\n[1.5-blog]: http://rethinkdb.com/blog/1.5-release/\n\n## New Features ##\n\n* Server\n  * #69: Bad JavaScript snippets can no longer hang the server\n    * `r.js` now takes an optional `timeout` argument\n  * #88: Added secondary and compound indexes\n  * #165: Backtraces on OS X\n  * #207: Added soft durability option\n  * #311: Added daemon mode (via --daemon)\n  * #423: Allow logging to a specific file (via --log-file)\n  * #457: Significant performance improvement for batched inserts\n  * #496: Links against libc++ on OS X\n  * #672: Replaced environment checkpoints with shared pointers in the ReQL layer, reducing the memory footprint\n  * #715: Adds support for noreply writes\n* CLI\n  * #566: In the admin CLI, `ls tables --long` now includes a `durability` column\n* Web UI\n  * #331: Improved data explorer indentation and brace pairing\n  * #355: Checks for new versions of RethinkDB from the admin UI\n  * #395: Auto-completes databases and tables names in the data explorer\n  * #514: Rewrote and improved the documentation generator\n  * #569: Added toggle for Data Explorer brace pairing\n  * #572: Changed button styles in the Data Explorer\n  * #707: Two step confirmation added to the delete database button\n* ReQL\n  * #469: Added an `info` command that provides information on any ReQL value (useful for retreiving the primary key)\n  * #604: Allow iterating over result arrays as if they were cursors in the JavaScript client\n  * #670: Added a soft durability option to `table_create`\n* Testing\n  * #480: Run [tests on Travis-CI](https://travis-ci.org/rethinkdb/rethinkdb)\n  * #517: Improved the integration tests\n  * #587: Validate API documentation examples\n  * #669: Added color to `make test` output\n\n## Fixed bugs ##\n\n* Server\n  * Fix #403: Serialization of `perfmon_result_t` is no longer 32-bit/64-bit dependent\n  * Fix #505: Reduced memory consumption to avoid failure on read query \"tcmalloc: allocation failed\"\n  * Fix #510: Make bind to `0.0.0.0` be equivalent to `all`\n  * Fix #639: Fixed bug where 100% cpu utilization was reported on OSX\n  * Fix #645: Fixed server crash when updating replicas / acks\n  * Fix #665: Fixed queries across shards that would trigger `Assertion failed: [!br.point_replaces.empty()] in src/rdb_protocol/protocol.cc`\n  * Fix #750: Resolved intermittent RPCSemilatticeTest.MetadataExchange failure\n  * Fix #757: Fixed a crashing bug in the environment checkpointing code\n  * Fix #796: Crash when running batched writes to a sharded table in debug mode\n* Documentation\n  * Fix #387: Documented the command line option --web-static-directory (custom location for web assets)\n  * Fix #503: Updated outdated useOutdated documentation\n  * Fix #563: Fixed documentation for `typeof()`\n  * Fix #610: Documented optional arguments for `table_create`: `datacenter` and `cache_size`\n  * Fix #631: Fixed missing parameters in documentation for `reduce`\n  * Fix #651: Updated comments in protobuf file to reflect current spec\n  * Fix #679: Fixed incorrect examples in protobuf spec\n  * Fix #691: Fixed faulty example for `zip` in API documentation\n* Web UI\n  * Fix #529: Suggestion arrow no longer goes out of bounds\n  * Fix #583: Improved Data Explorer suggestions for `table`\n  * Fix #584: Improved Data Explorer suggestion style and content\n  * Fix #623: Improved margins on modals\n  * Fix #629: Updated buttons and button styles on the Tables View (and throughout the UI)\n  * Fix #662: Command key no longer deletes text selection in Data Explorer\n  * Fix #725: Improved documentation in the Data Explorer\n  * Fix #790: False values in a document no longer show up as blank in the tree view\n* ReQL\n  * Fix #46: Added top-level `tableCreate`, `tableDrop` and `tableList` to drivers\n  * Fix #125: Grouped reductions now return a stream, not an array\n  * Fix #370: `map` after `dbList` and `tableList` no longer errors\n  * Fix #421: Return values from mutation operations now include all attributes, even if zero (`inserted`,`deleted`,`skipped`,`replaced`,`unchanged`,`errors`)\n  * Fix #525: Improved error for `groupBy`\n  * Fix #527: Numbers that can be represented as integers are returned as native integers\n  * Fix #603: Check the number of arguments correctly in the JavaScript client\n  * Fix #632: Keys of objects are no longer magically converted to strings in the drivers\n  * Fix #640: Clients handle system interrupts better\n  * Fix #642: Ruby client no longer has a bad error message when queries are run on a closed connection\n  * Fix #650: Python driver successfully sends `STOP` query when the connection is closed\n  * Fix #663: Undefined values are handled correctly in JavaScript objects\n  * Fix #678: `limit` no longer automatically converts streams to arrays\n  * Fix #689: Python driver no longer hardcodes the default database\n  * Fix #704: `typeOf` is no longer broken in JavaScript driver\n  * Fix #730: Ruby driver no longer accepts spurious methods\n  * Fix #733: `groupBy` can now handle both a `MAKE_OBJ` protobuf and a literal `R_OBJECT` datum protobuf\n  * Fix #767: Server now detects `NaN` in all cases\n  * Fix #777: Ruby driver no longer occasionally truncates messages\n  * Fix #779: Server now rejects strings that contain a null byte\n  * Fix #789: Style improvements in Ruby driver\n  * Fix #799: Python driver handles `use_outdated` when specified as a global option argument\n* Testing\n  * Fix #653: `make test` now works on OS X\n* Build\n  * Fix #475: Added a workaround to avoid `make -j2` segfaulting when building on older versions of `make`\n  * Fix #541: `make clean` is more aggressive\n  * Fix #630: Removed cruft from the RethinkDB source tree\n  * Fix #635: Building fails quickly with troublesome versions of `coffee-script`\n  * Fix #694: Improved warnings when building with `clang` and `ccache`\n  * Fix #717: Fixed `./configure --fetch-protobuf`\n* Migration\n  * Fix #782: Improved speed in migration script\n\n## Other ##\n\n  * #508: Removed the JavaScript mock server\n  * [All closed issues between 1.4.5 and 1.5.0](https://github.com/rethinkdb/rethinkdb/issues?milestone=8&page=1&state=closed)\n\n---\n\n# Release 1.4.5 (Some Like It Hot) #\n\nReleased on 2013-05-03.\n\n## Changes ##\n\nBug fix update:\n\n* Increase the TCP accept backlog (#369).\n\n---\n\n# Release 1.4.4 (Some Like It Hot) #\n\nReleased on 2013-04-19.\n\n## Changes ##\n\nBug fix update:\n\n* Improved the documentation\n  * Made the output of `rethinkdb help` and `--help` consistent (#643)\n  * Clarify details about the client protocol (#649)\n* Cap the size of data returned from rgets not just the number of values (#597)\n  * The limit changed from 4000 rows to 1MiB\n* Partial bug fix: Rethinkdb server crashing (#621)\n* Fixed bug: Can't insert objects that use 'self' as a key with Python driver (#619)\n* Fixed bug: [Web UI] Statistics graphs are not plotted correctly in background tabs (#373)\n* Fixed bug: [Web UI] Large JSON Causes Data Explorer to Hang (#536)\n* Fixed bug: Import command doesn't import last row if doesn't have end-of-line (#637)\n* Fixed bug: [Web UI] Cubism doesn't unbind some listeners (#622)\n* Fixed crash: Made global optargs actually propagate to the shards properly (#683)\n\n---\n\n# Release 1.4.3 (Some Like It Hot) #\n\nReleased on 2013-04-10.\n\n## Changes ##\n\nBug fix update:\n\n* Improve the networking code in the Python driver\n* Fix a crash triggered by a type error when using concatMap (#568)\n* Fix a crash when running `rethinkdb proxy --help` (#565)\n* Fix a bug in the Python driver that caused it to occasionally return `None` (#564)\n\n---\n\n# Release 1.4.2 (Some Like It Hot) #\n\nReleased on 2013-03-30.\n\n## Changes ##\n\nBug fix update:\n\n* Replace `~` with `About` in the web UI (#485)\n* Add framing documentation to the protobuf spec (#500)\n* Fix crashes triggered by .orderBy().skip() and .reduce(r.js()) (#522, #545)\n* Replace MB with GB in an error message (#526)\n* Remove some semicolons from the protobuf spec (#530)\n* Fix the `rethinkdb import` command (#535)\n* Improve handling of very large queries in the data explorer (#536)\n* Fix variable shadowing in the javascript driver (#546)\n\n---\n\n# Release 1.4.1 (Some Like It Hot) #\n\nReleased on 2013-03-22.\n\n## Changes ##\n\nBug fix update:\n\n* Python driver fix for TCP streams (#495)\n* Web UI fix that reduces the number of AJAX requests (#481)\n* JS driver: added useOutdated to r.table() (#502)\n* RDB protocol performance fix in release mode.\n* Performance fix when using filter with object shortcut syntax.\n* Do not abort when the `runuser` or `rungroup` options are present (#512)\n\n---\n\n# Release 1.4.0 (Some Like It Hot)\n\nRelased on 2013-03-18.\n\n## Changes ##\n\n* Improved ReQL wire protocol and client drivers\n* New build system\n* Data explorer query history\n\n---\n\n# Release 1.3.2 (Metropolis) #\n\nReleased on 2013-01-15.\n\n## Changes ##\n\n* Fixed security bug in http server.\n\n---\n\n# Release 1.3.1 (Metropolis) #\n\nReleased on 2012-12-20.\n\n## Changes ##\n\n* Fixed OS X crash on ReQL exceptions.\n\n---\n\n# Release 1.3.0 (Metropolis)\n\nReleased on 2012-12-20.\n\n## Changes ##\n\n* Native OS X support.\n* 32-bit support.\n* Support for legacy systems (e.g. Ubuntu 10.04)\n\n---\n\n# Release 1.2.8 (Rashomon) #\n\nReleased on 2012-12-15.\n\n## Changes ##\n\n* Updating data explorer suggestions to account for recent `r.row`\n  changes.\n\n---\n\n# Release 1.2.7 (Rashomon) #\n\nReleased on 2012-12-14.\n\n## Changes ##\n\n* Lots and lots of bug fixes\n\n---\n\n# Release 1.2.6 (Rashomon) #\n\nReleased on 2012-11-13.\n\n## Changes ##\n\n* Fixed the version string\n* Fixed 'crashing after crashed'\n* Fixed json docs\n\n---\n\n# Release 1.2.5 (Rashomon) #\n\nReleased on 2012-11-11.\n\n## Changes ##\n\n* Checking for a null ifaattrs\n\n---\n\n# Release 1.2.4 (Rashomon) #\n\nReleased on 2012-11-11.\n\n## Changes ##\n\n* Local interface lookup is now more robust.\n\n---\n\n# Release 1.2.3 (Rashomon) #\n\nReleased on 2012-11-09.\n\n## Changes ##\n\n* Fixes a bug in the query engine that causes large range queries to\n  return incorrect results.\n\n---\n\n# Release 1.2.0 (Rashomon)\n\nReleased on 2012-11-09.\n\n## Changes ##\n\nThis is the first release of the product. It includes:\n\n* JSON data model and immediate consistency support\n* Distributed joins, subqueries, aggregation, atomic updates\n* Hadoop-style map/reduce\n* Friendly web and command-line administration tools\n* Takes care of machine failures and network interrupts\n* Multi-datacenter replication and failover\n* Sharding and replication to multiple nodes\n* Queries are automatically parallelized and distributed\n* Lock-free operation via MVCC concurrency\n\n## Limitations ##\n\nThere are a number of technical limitations that aren't baked into the\narchitecture, but were not resolved in this release due to time\npressure. They will be resolved in subsequent releases.\n\n* Write requests have minimal batching in memory and are flushed to\n  disk on every write. This significantly limits write performance,\n  expecially on rotational disks.\n* Range commands currently don't use an index.\n* The clustering system has a bottleneck in cluster metadata\n  propagation. Cluster management slows down significantly when more\n  than sixteen shards are used.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 6.1,
          "content": "<img style=\"width:100%;\" src=\"/github-banner.png\">\n\n[RethinkDB](https://www.rethinkdb.com)\n======================================\n\n[![CII Best Practices](https://bestpractices.coreinfrastructure.org/projects/3038/badge)](https://bestpractices.coreinfrastructure.org/projects/3038)\n[![Codacy Badge](https://api.codacy.com/project/badge/Grade/6e0fed97691941b1aa3fc5098bfc9385)](https://www.codacy.com/app/RethinkDB/rethinkdb?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=rethinkdb/rethinkdb&amp;utm_campaign=Badge_Grade)\n\nWhat is RethinkDB?\n------------------\n\n* **Open-source** database for building realtime web applications\n* **NoSQL** database that stores schemaless JSON documents\n* **Distributed** database that is easy to scale\n* **High availability** database with automatic failover and robust fault tolerance\n\nRethinkDB is the first open-source scalable database built for\nrealtime applications. It exposes a new database access model, in\nwhich the developer can tell the database to continuously push updated\nquery results to applications without polling for changes.  RethinkDB\nallows developers to build scalable realtime apps in a fraction of the\ntime with less effort.\n\nTo learn more, check out [rethinkdb.com](https://rethinkdb.com).\n\nNot sure what types of projects RethinkDB can help you build? Here are a few examples:\n\n* Build a [realtime liveblog](https://rethinkdb.com/blog/rethinkdb-pubnub/) with RethinkDB and PubNub\n* Create a [collaborative photo sharing whiteboard](https://www.youtube.com/watch?v=pdPRp3UxL_s)\n* Build an [IRC bot in Go](https://rethinkdb.com/blog/go-irc-bot/) with RethinkDB changefeeds\n* Look at [cats on Instagram in realtime](https://rethinkdb.com/blog/cats-of-instagram/)\n* Watch [how Platzi uses RethinkDB](https://www.youtube.com/watch?v=Nb_UzRYDB40) to educate\n\n\nQuickstart\n----------\n\nFor a thirty-second RethinkDB quickstart, check out\n[rethinkdb.com/docs/quickstart](https://www.rethinkdb.com/docs/quickstart).\n\nOr, get started right away with our ten-minute guide in these languages:\n\n* [**JavaScript**](https://rethinkdb.com/docs/guide/javascript/)\n* [**Python**](https://rethinkdb.com/docs/guide/python/)\n* [**Ruby**](https://rethinkdb.com/docs/guide/ruby/)\n* [**Java**](https://rethinkdb.com/docs/guide/java/)\n\nBesides our four official drivers, we also have many [third-party drivers](https://rethinkdb.com/docs/install-drivers/) supported by the RethinkDB community. Here are a few of them:\n\n* **C#/.NET:** [RethinkDb.Driver](https://github.com/bchavez/RethinkDb.Driver), [rethinkdb-net](https://github.com/mfenniak/rethinkdb-net)\n* **C++:** [librethinkdbxx](https://github.com/AtnNn/librethinkdbxx)\n* **Clojure:** [clj-rethinkdb](https://github.com/apa512/clj-rethinkdb)\n* **Elixir:** [rethinkdb-elixir](https://github.com/rethinkdb/rethinkdb-elixir)\n* **Go:** [GoRethink](https://github.com/dancannon/gorethink)\n* **Haskell:** [haskell-rethinkdb](https://github.com/atnnn/haskell-rethinkdb)\n* **PHP:** [php-rql](https://github.com/danielmewes/php-rql)\n* **Rust:** [reql](https://github.com/rust-rethinkdb/reql)\n* **Scala:** [rethink-scala](https://github.com/kclay/rethink-scala)\n\nLooking to explore what else RethinkDB offers or the specifics of\nReQL? Check out [our RethinkDB docs](https://rethinkdb.com/docs/) and\n[ReQL API](https://rethinkdb.com/api/).\n\nBuilding\n--------\n\nFirst install some dependencies.  For example, on Ubuntu or Debian:\n\n    sudo apt-get install build-essential protobuf-compiler \\\n        # python \\  # for older distros\n        python3 python-is-python3 \\\n        libprotobuf-dev libcurl4-openssl-dev \\\n        libncurses5-dev libjemalloc-dev wget m4 g++ libssl-dev\n\nGenerally, you will need\n\n* GCC or Clang\n* Protocol Buffers\n* jemalloc\n* Ncurses\n* Python 2 or Python 3\n* libcurl\n* libcrypto (OpenSSL)\n* libssl-dev\n\nThen, to build:\n\n    ./configure --allow-fetch\n    # or run ./configure --allow-fetch CXX=clang++\n\n    make -j4\n    # or run make -j4 DEBUG=1\n\n    sudo make install\n    # or run ./build/debug_clang/rethinkdb\n\nSee WINDOWS.md and mk/README.md for build instructions for Windows and\nFreeBSD.\n\nNeed help?\n----------\n\nA great place to start is\n[rethinkdb.com/community](https://rethinkdb.com/community). Here you\ncan find out how to ask us questions, reach out to us, or [report an\nissue](https://github.com/rethinkdb/rethinkdb/issues). You'll be able\nto find all the places we frequent online and at which conference or\nmeetups you might be able to meet us next.\n\nIf you need help right now, you can also find us [on\nSlack](https://join.slack.com/t/rethinkdb/shared_invite/enQtNzAxOTUzNTk1NzMzLWY5ZTA0OTNmMWJiOWFmOGVhNTUxZjQzODQyZjIzNjgzZjdjZDFjNDg1NDY3MjFhYmNhOTY1MDVkNDgzMWZiZWM),\n[Twitter](https://twitter.com/rethinkdb), or IRC at\n[#rethinkdb](irc://chat.freenode.net/#rethinkdb) on Freenode.\n\nContributing\n------------\n\nRethinkDB was built by a dedicated team, but it wouldn't have been\npossible without the support and contributions of hundreds of people\nfrom all over the world. We could use your help too! Check out our\n[contributing guidelines](CONTRIBUTING.md) to get started.\n\nDonors\n------\n\n* [CNCF](https://www.cncf.io/)\n* [Digital Ocean](https://www.digitalocean.com/) provides infrastructure and servers needed for serving mission-critical sites like download.rethinkdb.com or update.rethinkdb.com\n* [Atlassian](https://www.atlassian.com/) provides OSS license to be able to handle internal tickets like vulnerability issues\n* [Netlify](https://www.netlify.com/) OSS license to be able to migrate rethinkdb.com\n* [DNSimple](https://dnsimple.com) provides DNS services for the RethinkDB project\n* [ZeroTier](https://www.zerotier.com) sponsored the development of per-table configurable write aggregation including the ability to set write delay to infinite to create a memory-only table ([PR #6392](https://github.com/rethinkdb/rethinkdb/pull/6392))\n\nLicensing\n---------\n\nRethinkDB is licensed by the Linux Foundation under the open-source\nApache 2.0 license. Portions of the software are licensed by Google\nand others and used with permission or subject to their respective\nlicense agreements.\n\nWhere's the changelog?\n----------------------\nWe keep [a list of changes and feature explanations here](NOTES.md).\n"
        },
        {
          "name": "STYLE.md",
          "type": "blob",
          "size": 2.88,
          "content": "# C++ Coding Style\n\nThe general rule is:\n\n - Write code in a manner similar to that around it.\n\nThis document describes guidelines that people new to the codebase\ntend not to immediately pick up on.  These aren't universal rules\n(besides the first rule) and situations might require your better\njudgement.\n\n1. Use `if (...) {`, `while (...) {`, and `switch (...) {`, not `if(...){`,\n`while(...){`, and `switch(...){`.  Use braces.\n\n2.  Header files should be included in the following order:\n  1. Your parent .hpp file (if you are a .cc file),\n  2. C system headers (`<math.h>`, `<unistd.h>`, etc),\n  3. Standard C++ headers (`<vector>`, `<algorithm>`, etc),\n  4. Boost headers, with `\"errors.hpp\"` included before them, if there are any.\n  5. Local headers with full paths (`\"rdb_protocol/protocol.hpp\"`, etc).\n\n  > Reason: It's always good to have one .cc file include each .hpp file first,\n    so that you know it includes all of its dependencies.  The Google Style\n    Guide specifies the C/C++/Local order and we blindly assume there's a\n    reason.  errors.hpp defines `BOOST_ENABLE_ASSERT_HANDLER` to make Boost\n    assertion failures get forwarded to the RethinkDB assertion mechanism, so\n    it needs to go before boost headers.\n\n3. Don't use non-const lvalue references, except, perhaps, in return values.\n\n  > Reason: The entire codebase does things this way.  Right now,\n    somebody seeing `foo(bar)` can currently expect `bar` not to be\n    modified.\n\n  > Exception: `std::swap` and STL-like `swap` methods, perhaps, and\n    other peculiar situations.\n\n4. Don't make fields whose type is a reference type (const or non-const), and\ndon't turn references into pointers in ways that might surprise the caller.\n\n  > Reason: This makes object lifetime dependencies easier to see (somebody\n    calling `foo(bar)` can assume there's no new restrictions on the lifetime\n    of `bar` -- the code must become `foo(&bar)` which shows that something\n    spooky is happening).\n\n  > Null pointer dereferences are also easier to track down than use-after-free\n    bugs.  (Also, they generally don't happen: a function taking a pointer\n    argument does not imply that it accepts a null pointer value, and this\n    hasn't been a problem.)\n\n5. If your type should not be copied, use the `DISABLE_COPYING` macro to make\nit non-copyable.\n\n  > Or declare its copy constructor and assignment operator with `= delete;`\n    yourself.\n\n6. Run (from the src directory) `../scripts/check_style.sh` to see if your\ncode has introduced any of a certain class of style errors.\n\n  > The include-what-you-use errors exist to make you suffer -- but keeping\n    awareness of this makes efforts to untangle header file dependences a lot\n    less labor-intensive.\n\n  > Bogus errors can be suppressed with `// NOLINT(specific/category)`.\n\n  > This script has caught several bugs (mostly race conditions caused by not\n    using reentrant \"_r\" versions of libc functions).\n"
        },
        {
          "name": "WINDOWS.md",
          "type": "blob",
          "size": 1.05,
          "content": "# Building the Windows version of RethinkDB\n\n## Requirements\n\n### [Visual Studio 2022](https://visualstudio.microsoft.com/vs)\n> **Note**\n> VS must be installed in default directory (any drive)\n\n* In installer tick desktop C++ workload, and in individual components:\n* MSVC v141\n* Windows 10 SDK 10.0.19041.0\n* CMake tool\n\n### [Cygwin](https://cygwin.com/install.html)\n> **Warning**\n> Make sure that `perl` package IS NOT installed in cygwin!\n\nAdditional Cygwin packages:\n* make\n* curl\n* wget\n* patch\n\n### [Strawberry Perl](https://strawberryperl.com/) (Required for OpenSSL)\nInstall and make sure it's added to PATH\n\n### [Premake5](https://premake.github.io/download/) (Required for quickjspp)\nDownload, unpack anywhere and add to PATH\n\n## Build Instructions\n\nFrom a Cygwin shell:\n\n```\n./configure\n\nmake -j$(nproc)\n```\n\nWill first download and build the libraries that RethinkDB needs, then\nbuild RethinkDB itself and place it in `build\\Release_x64\\rethinkdb.exe`\n\nIf `make` complains about missing files in `mk/gen`, run `mkdir mk/gen` manually.\nThen run `make -j` again.\n"
        },
        {
          "name": "configure",
          "type": "blob",
          "size": 34.72,
          "content": "#!/usr/bin/env bash\n# Copyright 2010-2015 RethinkDB, all rights reserved.\n\n# This script detects the build settings local to the local build\n# environment and saves them in the config.mk file.\n#\n# See ./configure --help for more information.\n\nset -u\n\n# Lists of dependencies and versions\ninit () {\n    min_gcc_version=$(read_version 4.7.4)\n    min_clang_version=0\n    min_icc_version=0\n    min_python_version=2.6.0\n\n    # QuickJS also has this configuration\n    osx_min_version=10.9\n\n    min_msbuild_version=15.0\n    min_nmake_version=14.0\n    min_cl_version=19.0\n\n    must_fetch_list='quickjs'\n    please_fetch_list=\"gtest re2 $must_fetch_list\"\n\n    optional_libs=\"gtest termcap boost_system\"\n    required_libs=\"protobuf re2 z crypto ssl curl quickjs\"\n    other_libs=\"tcmalloc jemalloc\"\n    all_libs=\"$required_libs $optional_libs $other_libs\"\n    default_static=\"tcmalloc jemalloc\"\n\n    required_bin_deps=\"protoc python\"\n    optional_bin_deps=\"wget curl\"\n    bin_deps=\"cxx $required_bin_deps $optional_bin_deps\"\n    all_deps=\"$bin_deps $all_libs boost\"\n\n    default_allocator_linux=jemalloc\n    default_allocator_osx=system\n    default_allocator_freebsd=system\n\n    allowed_arg_vars=\"CXXFLAGS LDFLAGS PLATFORM MSBUILD VCVARSALL NMAKE\"\n}\n\n# The main configuration steps\nconfigure () {\n    require \"Bash\"\n    show \"$BASH_VERSION\"\n    var FETCH_LIST \"\"\n    var FETCH_VERSIONS \"\"\n    for var in $allowed_arg_vars; do\n        local val\n        if lookup \"$arg_vars\" $var val; then\n            require $var\n            var $var \"$val\"\n        fi\n    done\n    check_windows\n    if $windows; then\n        configure_windows\n    else\n        configure_unixlike\n    fi\n    require Installation prefix\n    var PREFIX ${arg_prefix:-/usr/local}\n    require Configuration prefix\n    var SYSCONFDIR ${arg_sysconfdir:-$PREFIX/etc}\n    require Runtime data prefix\n    var LOCALSTATEDIR ${arg_localstatedir:-$PREFIX/var}\n}\n\nconfigure_unixlike () {\n    var LIB_SEARCH_PATHS $(for path in $lib_paths; do echo \" -L$path\"; done)\n    require \"Use ccache\"\n    boolvar USE_CCACHE $use_ccache\n    check_cxx\n    require \"Host System\"\n    var MACHINE $($CXX -dumpmachine)\n    require \"Build System\"\n    require \"Operating System\"\n    var OS $(uname)\n    require \"OS Version\"\n    show \"`uname -msr`\"\n    check_cross_compiling\n    require \"Host Operating System\"\n    case \"${MACHINE#*-}\" in\n        *apple-darwin*)\n            var OS \"Darwin\"\n            default_allocator=$default_allocator_osx\n            var PTHREAD_LIBS \"\" ;\n            var RT_LIBS \"\" ;;\n        *linux*)\n            var OS \"Linux\"\n            default_allocator=$default_allocator_linux\n            var PTHREAD_LIBS -pthread ;\n            var RT_LIBS -lrt ;;\n        *freebsd*)\n            var OS \"FreeBSD\"\n            default_allocator=$default_allocator_freebsd\n            var PTHREAD_LIBS -pthread ;\n            var RT_LIBS -lrt\n            [[ -z \"$lib_paths\" ]] && lib_paths=\"/usr/local/lib\"\n            ;;\n        *) error \"unsupported operating system: $MACHINE\" ;;\n    esac\n    case \"${MACHINE%%-*}\" in\n        x86_64|i?86)\n            true ;;\n        arm*|arm64*|aarch64*)\n            var_append LDFLAGS -ldl\n            final_warning=\"ARM support is still experimental\" ;;\n        s390x)\n            final_warning=\"s390x support is still experimental\" ;;\n        ppc64le|powerpc64le|powerpc64el)\n            final_warning=\"PowerPC support is still experimental\" ;;\n        *)\n            error \"unsupported architecture: $MACHINE\"\n    esac\n    var M_LIBS -lm\n    require \"Build Architecture\"\n    var GCC_ARCH $(uname -m | grep '^[A-Za-z0-9_]*$' | head -n 1)\n    var GCC_ARCH_REDUCED $(echo \"$GCC_ARCH\" | sed -e 's/^i[56]86$$/i486/g')\n    if [ \"$COMPILER\" = CLANG ]; then\n        require stdlib\n        case \"$OS\" in\n            Darwin) var_append LDFLAGS -stdlib=libc++ -lc++\n                    var_append LDFLAGS -mmacosx-version-min=\"$osx_min_version\"\n                    var_append CFLAGS -mmacosx-version-min=\"$osx_min_version\"\n                    var_append CXXFLAGS -stdlib=libc++\n                    var_append CXXFLAGS -mmacosx-version-min=\"$osx_min_version\" ;;\n            *) var_append LDFLAGS -lstdc++ ;;\n        esac\n\n        check_clang_bug_5424\n\n    fi\n    check_cxx11\n    for bin in $required_bin_deps; do\n        require_dep $bin\n        check_bin $bin\n    done\n    for bin in $optional_bin_deps; do\n        optional_dep $bin\n        check_bin $bin\n    done\n    build_try_lib_paths\n    for lib in $optional_libs; do\n        check_lib $lib optional\n    done\n    for lib in $required_libs; do\n        check_lib $lib require\n    done\n\n    require malloc\n    var ALLOCATOR \"${custom_allocator:-$default_allocator}\"\n    var DEFAULT_ALLOCATOR \"$default_allocator\"\n    if [[ \"$ALLOCATOR\" = system ]]; then\n        var MALLOC_LIBS \"\"\n        var MALLOC_LIBS_DEP \"\"\n        boolvar STATIC_MALLOC false\n    else\n        check_lib \"$ALLOCATOR\" require\n        boolvar STATIC_MALLOC contains \"$static_libs\" \"$ALLOCATOR\"\n        macro MALLOC_LIBS     \"\\$($(uc $ALLOCATOR)_LIBS)\"\n        macro MALLOC_LIBS_DEP \"\\$($(uc $ALLOCATOR)_LIBS_DEP)\"\n    fi\n\n    test_protobuf\n    check_boost\n    boolvar ALLOW_FETCH $allow_fetch\n    for pkg in $must_fetch_list; do\n        if ! contains \"$FETCH_LIST\" $pkg; then\n            require_dep $pkg\n            fetch_pkg $pkg\n        fi\n    done\n    if [ -n \"${final_warning:-}\" ]; then\n        echo \"* Warning: $final_warning\"\n    fi\n}\n\nconfigure_windows () {\n    for tool in msbuild vcvarsall cmake; do\n        require $tool\n        check_vs_bin $tool\n    done\n    require Platform\n    check_windows_platform\n    var COMPILER MSC\n    var DEFAULT_ALLOCATOR system\n    var ALLOCATOR system\n    var PTHREAD_LIBS\n    var CROSS_COMPILING 0\n    var CXX false\n    for pkg in protobuf curl zlib re2 openssl gtest boost quickjs; do\n        require_dep $pkg\n        fetch_lib $pkg\n    done\n    fetch_bin protoc\n    optional Python\n    check_bin python\n}\n\n# Entry point\nmain () {\n    init\n\n    if test -e configure.default; then\n        echo \"* Reading arguments from 'configure.default'\"\n        default_args=$(cat configure.default)\n        echo \"* Prepending the following arguments:\" $default_args\n    fi\n\n    read_args ${default_args:-} \"$@\"\n\n    echo \"* Detecting system configuration\"\n\n    trap \"show error; echo '* Aborting configure'\" EXIT\n\n    write \"# Automatically generated by $0\" 3> \"$config\"\n    write \"# Command line: $@\" 3>> \"$config\"\n    write \"CONFIGURE_STATUS := started\" 3>> \"$config\"\n    write \"CONFIGURE_ERROR := \" 3>> \"$config\"\n    write \"CONFIGURE_COMMAND_LINE := $(echo ${default_args:-}) $@\" 3>> \"$config\"\n    write \"CONFIGURE_MAGIC_NUMBER := 2\" 3>> \"$config\"\n    configure 3>> \"$config\"\n\n    trap - EXIT\n\n    if ! $failed; then\n        write \"CONFIGURE_STATUS := success\" 3>> \"$config\"\n        echo \"* Wrote configuration to $config\"\n    else\n        write \"CONFIGURE_STATUS := failed\" 3>> \"$config\"\n        echo \"* Aborting configure\"\n        exit 1\n    fi\n}\n\n# Parse the command line arguments\nread_args () {\n    local no_arg\n    local has_arg\n    local arg\n    local option\n    local dep\n\n    exit_on_error=true\n    config=config.mk\n    failed=false\n\n    allow_fetch=false\n    force_paths='=|'\n    can_show=false\n    required=false\n    arg_vars=$'\\1\\2'\n    lib_paths=\n    static_libs=$default_static\n    arg_prefix=\n    arg_sysconfdir=\n    arg_localstatedir=\n    custom_allocator=\n    use_ccache=false\n\n    while [[ $# -ne 0 ]]; do\n        arg=${1#*=}\n        if [[ \"$arg\" = \"$1\" ]]; then\n            no_arg=shift\n            if [[ $# -eq 1 ]]; then\n                has_arg=\"error_missing_arg $(quote \"$1\")\"\n            else\n                arg=$2\n                has_arg='shift 2'\n            fi\n        else\n            no_arg=\"error_no_arg $(quote \"$1\")\"\n            has_arg=shift\n        fi\n        option=\"${1%%=*}\"\n        case \"$option\" in\n            --debug-configure) $no_arg; set -x ;;\n            --config) $has_arg; config=$arg ;;\n            --continue) $no_arg; exit_on_error=false ;;\n            --allow-fetch) $no_arg; allow_fetch=true ;;\n            --fetch) $has_arg\n                if [[ \"$arg\" = \"all\" ]]; then\n                    please_fetch_list=\"$(all_fetch_deps)\"\n                elif can_fetch $(guess_pkg_name \"$arg\"); then\n                    please_fetch_list=\"$please_fetch_list $(guess_pkg_name \"$arg\")\"\n                else\n                    die \"Don't know how to fetch '$arg'\"\n                fi ;;\n            --static) $has_arg\n                if [[ \"$arg\" = none ]]; then\n                    static_libs=\n                elif [[ \"$arg\" = all ]]; then\n                    static_libs=$all_libs\n                elif contains \"$all_libs\" \"$arg\"; then\n                    static_libs=\"$static_libs $arg\"\n                else\n                    die \"Unknown library: $arg\"\n                fi ;;\n            --dynamic) $has_arg\n                if [[ \"$arg\" = none ]]; then\n                    static_libs=$all_libs\n                elif [[ \"$arg\" = all ]]; then\n                    static_libs=\n                elif contains \"$all_libs\" \"$arg\"; then\n                    static_libs=$(remove \"$static_libs\" \"$arg\")\n                    please_fetch_list=$(remove \"$please_fetch_list\" $(guess_pkg_name \"$arg\"))\n                else\n                    die \"Unknown library: $arg\"\n                fi ;;\n            --lib-path) $has_arg; lib_paths=\"$lib_paths $arg\" ;;\n            --with-tcmalloc) $no_arg; set_custom_allocator tcmalloc ;;\n            --with-jemalloc) $no_arg; set_custom_allocator jemalloc ;;\n            --with-system-malloc) $no_arg; set_custom_allocator system ;;\n            --ccache) $no_arg; use_ccache=true ;;\n            --prefix) $has_arg; arg_prefix=$arg ;;\n            --sysconfdir) $has_arg; arg_sysconfdir=$arg ;;\n            --localstatedir) $has_arg; arg_localstatedir=$arg ;;\n            --windows-platform) $has_arg; requested_platform=$arg ;;\n            --help) show_help; exit ;;\n            -*) die \"Unknown option '$option'\" ;;\n            *) if contains \"$all_deps\" \"$(lc $option)\"; then\n                 $has_arg\n                 force_paths=\"$force_paths|$(lc $option)=$arg|\"\n               elif contains \"$allowed_arg_vars\" \"$option\"; then\n                 $has_arg\n                 arg_vars=\"$arg_vars\"$'\\2'\"$option\"$'\\1'\"$arg\"\n               else\n                 die \"Unknown variable argument: $option\"\n               fi ;;\n        esac\n    done\n}\n\nset_custom_allocator () {\n    if [[ -n \"$custom_allocator\" ]]; then\n        die \"incompatible options: --with-$custom_allocator and --with-$1\"\n    fi\n    custom_allocator=$1\n}\n\n# Description of some of the dependencies\ndep_descrs=':\ncxx:C++ Compiler\nprotoc:Protobuf compiler\nprotobuf:Protobuf library\nre2:RE2\nz:zlib\ngtest:Google Test'\n\n# Output of --help\nshow_help () {\n    cat <<EOF\nConfigure a RethinkDB build from source\n\nUsage: $0 [arguments]\n\n  --help                  Display this help\n  --config <file>         Output file (default config.mk)\n  --continue              Do not stop after encountering an error\n\n  --allow-fetch           Allow fetching missing dependencies\n  --lib-path <dir>        Add dir to the library search path\n  <var>=<val>             Set the value of a variable\n                            CXXFLAGS  C++ compiler arguments\n                            LDFLAGS   C++ linker arguments\n  --fetch <dep>           Force fetching <dep>.\n  <dep>=<path>            Library or executable path. <dep> can be\nEOF\n    for dep in $all_deps; do\n        local padded=\"$dep                        \"\n        local descr\n        lookup \"$dep_descrs\" $dep descr || descr=\n        echo \"                            ${padded:0:24} $descr\"\n    done\n    cat <<EOF\n  --static <lib>          Statically link some libraries. <lib> is a library name, 'all' or 'none'\n  --dynamic <lib>         Dynamically link some libraries. <lib> is a library name, 'all' or 'none'\n  --prefix <dir>          Installation prefix. Defaults to /usr/local\n  --sysconfdir <dir>      Configuration prefix. Defaults to /usr/local/etc\n  --localstatedir <dir>   Runtime data prefix. Defaults to /usr/local/var\n  --with-tcmalloc         Use TCMalloc\n  --with-jemalloc         Use jemalloc (default on Linux)\n  --with-system-malloc    Use the system malloc (default on OS X)\n  --ccache                Speed up the build using ccache\n  --windows-platform      Windows platform: Win32 (32 bit, default) or x64 (64 bit)\nEOF\n}\n\n# Quote for re-use in the shell\n# quote 'a b' -> 'a\\ b'\nquote () {\n    printf %q \"$1\"\n}\n\n# Some error messages\nerror_no_arg () { die \"option ${1%%=*} does not take any arguments\"; }\nerror_missing_arg () { die \"option ${1%%=*} takes an argument\"; }\n\n# error <message>\n# Try to generate an error\n# If $delayed_errors, then save the error for later\n# If not $required, turn it into a warning\nerror () {\n    local req=$required\n    if ${delay_errors:-false}; then\n        delayed_error=\"$*\"\n        return\n    fi\n    local type\n    if $req; then\n        show \"error\"\n        type=Error\n    else\n        show \"no\"\n        type=Warning\n    fi\n    if $req || ! ${ignore_warnings:-false}; then\n        echo \"* $type: $*\" >&2\n    fi\n    write \"CONFIGURE_ERROR := $*\"\n    if $req; then\n        echo \"${error_details:-}\" | head -n 5\n        if $exit_on_error; then\n            exit 1\n        fi\n    fi\n    failed=$req\n}\n\n# Like error, but fatal\ndie () {\n    show error\n    required=true\n    error \"$@\"\n    exit 1\n}\n\n# not_found <name>\n# Generate a not found error\nnot_found () {\n    if $required; then\n        if can_fetch $(guess_pkg_name \"`lc $1`\"); then\n            error \"missing $1. Install it, specify the full path with $(uc $1)= or run ./configure with --allow-fetch\"\n        else\n            error \"missing $1. Install it or specify the full path with $(uc $1)=\"\n        fi\n    else\n        show no\n    fi\n}\n\n# write <line>\n# Write to the config file\nwrite () {\n    echo \"$*\" >&3\n}\n\n# show_descr <description>\n# Describe what the script is looking for next\n# A call to show will complete the line\nshow_descr () {\n    if ${can_show:-false}; then\n        show no\n    fi\n    local padded=\"$*:                               \"\n    echo -n \"${padded:0:32}\"\n    write \"# $*\"\n    can_show=true\n    error_details=\n}\n\n# show_no [package_descr] [package_name]\n# Like 'show no', but show the delayed error if there is one\nshow_no () {\n    local req=$required\n    local err=$delayed_error\n    local info=\"\"\n    show no\n    if $req; then\n        if can_fetch \"$(guess_pkg_name \"${2:-$1}\")\"; then\n            info=\" Try running ./configure with the --fetch ${2:-$1} or --allow-fetch flags.\"\n        fi\n        error \"${err:-${1:-} not found.$info}\"\n    elif [[ -n \"$delayed_error\" ]]; then\n        error \"$err\"\n    fi\n}\n\n# show <value>\n# Display the value that was found\nshow () {\n    if $can_show; then\n        echo \"$*\"\n        can_show=false\n    fi\n    delayed_error=\n    delay_errors=false\n}\n\n# Like show_descr, but set $required to true\nrequire () {\n    required=true\n    show_descr \"$@\"\n}\n\n# Like show_descr, but set $required to false\noptional () {\n    required=false\n    show_descr \"$@\"\n}\n\n# var <name> <value>\n# Set the value of a variable in the config file\nvar () {\n    local name=$1\n    shift\n    local val=$*\n    show \"$val\"\n    write \"$name := $val\"\n    eval \"$name=$(quote \"$val\")\" 2>/dev/null\n}\n\n# macro <name> <value>\n# Set the value of a macro variable in the config file\nmacro () {\n    local name=$1\n    shift\n    local val=$*\n    show \"$val\"\n    write \"$name = $val\"\n}\n\n# var_append <name> <value>\n# Append a value to a variable in to the config file\nvar_append () {\n    local name=$1\n    shift\n    local val=$*\n    show \"$val\"\n    write \"$name += $val\"\n    eval \"$name=\\${$name:-}\\ $(quote \"$val\")\"\n}\n\n# boolvar <name> <command> <arguments ...>\n# Run the command and set the variable to its boolean return value\nboolvar () {\n    local name=$1\n    shift\n    if \"$@\"; then\n        show yes\n        var $name 1\n    else\n        show no\n        var $name 0\n    fi\n}\n\n# Find a C++ compiler that rethinkdb supports\ncheck_cxx () {\n    require \"C++ Compiler\"\n    local force_CXX\n    lookup \"$force_paths\" cxx force_CXX || :\n    CXX=\"${force_CXX:-${CXX:-}}\"\n    if test -z \"$CXX\" || ! $CXX --version >/dev/null 2>&1; then\n        if [[ -n \"${force_CXX:-}\" ]]; then\n            error \"unable to run $force_CXX\"\n            return\n        fi\n        CXX=$(command -v c++ 2>/dev/null || command -v g++ 2>/dev/null || command -v clang 2>/dev/null || command -v icc 2>/dev/null)\n        if [[ -z \"$CXX\" ]]; then\n            not_found CXX\n            return\n        fi\n    fi\n    local description=$($CXX --version 2>/dev/null)$($CXX --help 2>/dev/null)\n    local version_string=$(echo \"$description\" | extract_version_string)\n    local type=$(echo \"$description\" | grep -E -io 'gcc|g\\+\\+|clang|icc' | head -n 1)\n    case \"$(uc $type)\" in\n        GCC|G++) min_version=$min_gcc_version\n                 type=GCC ;;\n        CLANG) min_version=$min_clang_version ;;\n        ICC) min_version=$min_icc_version\n             type=INTEL ;;\n        *) show \"unknown\"\n           error \"Could not determine C++ compiler type of $CXX (gcc, clang or icc is required)\"\n           return\n    esac\n    if [[ -z \"$version_string\" ]]; then\n        show \"$(uc $type) (unknown version)\"\n        error \"Could not determine C++ compiler version (>= $(write_version $min_version) required)\"\n        return\n    else\n        show \"$(uc $type) $version_string ($CXX)\"\n        test_version_ge $(uc $type) $(read_version \"$version_string\") $min_version || return\n    fi\n\n    var COMPILER \"$(uc $type)\"\n    var CXX \"$CXX\"\n}\n\n# foo --version | extract_version_string\n# find a version string in the output of foo --version\nextract_version_string () {\n    sed 's/([^)]*)//g' | grep -E -o '[0-9]+\\.[0-9]+(\\.[0-9]+)?' | head -n 1\n}\n\n# read_version \"1.2.3\" -> 10203\n# read_version \"2.14\" -> 21400\nread_version () {\n    local one=${1%%.*}\n    local rest=${1#*.}\n    local two=${rest%%.*}\n    rest=${rest#*.}\n    local three=${rest%%.*}\n    if [[ \"$three\" != \"$rest\" ]]; then three=0; fi\n    printf %d%02d%02d \"$one\" \"$two\" \"$three\"\n}\n\n# write_version \"10203\" -> \"1.2.3\"\nwrite_version () {\n    local v=$(printf %06d \"$1\")\n    local v1=${v:0:2}\n    local v2=${v:2:2}\n    local v3=${v:4:2}\n    printf %d.%d.%d \"${v1#0}\" \"${v2#0}\" \"${v3#0}\"\n}\n\n# test_version_ge <name> <version> <min version>\ntest_version_ge () {\n    local fetch_message=\n    if ! [[ $2 -ge $3 ]]; then\n        if can_fetch \"$(bin_pkg_name \"$1\")\"; then\n            fetch_message=\" Try running ./configure with --allow-fetch\"\n        fi\n        error \"$1 $(write_version $2) is too old. At least $1 $(write_version $3) is required.$fetch_message\"\n        return 1\n    fi\n}\n\n# test_version_le <name> <version> <max version>\ntest_version_le () {\n    local fetch_message=\n    if ! [[ $2 -le $3 ]]; then\n        if can_fetch \"$(bin_pkg_name \"$1\")\"; then\n            fetch_message=\" Try running ./configure with --allow-fetch\"\n        fi\n        error \"$1 $(write_version $2) is too recent. At most $1 $(write_version $3) is required.$fetch_message\"\n        return 1\n    fi\n}\n\n# test_bin_version <name> <path>\ntest_bin_version () {\n    local min_var=min_$1_version\n    local min=${!min_var:-}\n    local max_var=max_$1_version\n    local max=${!max_var:-}\n    local invalid_var=invalid_$1_versions\n    local invalid=${!invalid_var:-}\n    test -z \"$min$max$invalid\" && return 0\n    local output\n    local ver\n    output=$(\"$2\" ${3:---version} 2>&1)\n    if ver=$(echo \"$output\" | extract_version_string) &&\n       test -n \"$ver\" ;\n    then\n        local version=$(read_version \"$ver\")\n        test -z \"$min\" || test_version_ge $1 $version $(read_version $min) || return 1\n        test -z \"$max\" || test_version_le $1 $version $(read_version $max) || return 1\n        if contains \"$invalid\" \"$ver\" ; then\n            error \"$1 ($ver) is not supported\"\n            return 1\n        fi\n    else\n        error \"Could not determine $1 version\"\n        return 1\n    fi\n    show \"$1 $ver\"\n}\n\n# contains <haystack> <needle>\n# Test if the space-separated list haystack contains needle\ncontains () {\n    local d=\" $1 \"\n    [[ \"${d% $2 *}\" != \"$d\" ]]\n}\n\n# remove <list> <item>\n# remove an item from a space-separated list\nremove () {\n    if contains \"$1\" \"$2\"; then\n        local outputlist=\"\"\n        for item in $1; do\n            if [ \"$item\" != \"$2\" ]; then\n                if [ -z \"$outputlist\" ]; then\n                    outputlist=\"$item\"\n                else\n                    outputlist=\"$outputlist $item\"\n                fi\n            fi\n        done\n        echo -n \"$outputlist\"\n    else\n        echo -n \"$1\"\n    fi\n}\n\n# any \"<list>\" <command>\n# Test if the command is true for any element of the space seperated list\nany () {\n    local list=$1\n    shift\n    for x in $list; do\n        if \"$@\" $x; then\n            return 0\n        fi\n    done\n    return 1\n}\n\n# lookup <dict> <key> [var]\n# dict is an assoc-list composed of two seperators followed by a list of pairs\n# eg: ':|foo:bar|test:123|baz:quux' or '= a=b c=d'\nlookup () {\n    local _val=${1#*${1:1:1}$2${1:0:1}}\n    if [[ \"$_val\" = \"$1\" ]]; then\n        unset ${3:-$2}\n        return 1\n    fi\n    eval \"${3:-$2}=$(quote \"${_val%%${1:1:1}*}\")\"\n}\n\n# check_bin <name>\n# Check for a binary\ncheck_bin () {\n    local force_bin\n    lookup \"$force_paths\" $1 force_bin || force_bin=\n    if test -z \"$force_bin\" && contains \"$please_fetch_list\" $(bin_pkg_name \"$1\"); then\n        fetch_bin $1\n        return\n    fi\n    local ucbin=$(uc $1)\n    local bin=${force_bin:-${!ucbin:-$1}}\n    bin=$(command -v \"$bin\" 2>/dev/null)\n    if [[ ! -x \"$bin\" ]]; then\n        if [[ -n \"${force_bin:-}\" ]]; then\n            bin=$force_bin\n        elif fetch_allowed $(bin_pkg_name $1); then\n            fetch_bin $1\n            return\n        else\n            not_found $(uc $1)\n            return\n        fi\n    fi\n    local version\n    delay_errors=true\n    if ! test_bin_version $1 \"$bin\"; then\n        if fetch_allowed $(bin_pkg_name $1); then\n            fetch_bin $1\n            return\n        else\n            show_no \"$1\"\n            return\n        fi\n    fi\n    var \"$(uc $1)\" \"$bin\"\n    var \"$(uc $1)_BIN_DEP\" \"\"\n}\n\n# Invoke pkg.sh with the required environment variables\npkg () {\n    FETCH_LIST=\"$FETCH_LIST\" PLATFORM=\"${PLATFORM:-}\" OS=\"$OS\" bash $root/mk/support/pkg/pkg.sh \"$@\"\n}\n\n# add_fetch <name>\n# Instruct make to fetch and build the dependency\n# Sets the version variable\nadd_fetch () {\n    local pkg\n    pkg=\"$1\"\n    if ! version=$(pkg version \"$pkg\"); then\n        error \"Internal error: cannot fetch $pkg\"\n        return 1\n    fi\n    show external/${pkg}_$version\n    if ! contains \"$FETCH_LIST\" \"$pkg\"; then\n        local depends\n        depends=$(pkg depends \"$pkg\")\n        for dep in $depends; do\n            fetch_pkg $dep\n        done\n        var_append FETCH_LIST \"$pkg\"\n        var \"${pkg}_VERSION\" \"$version\"\n        var \"${pkg}_DEPENDS\" \"$depends\"\n    fi\n}\n\n# Wrapper around add_fetch\nfetch_pkg () {\n    local version\n    add_fetch \"$1\"\n}\n\n# Chose to fetch the given binary\nfetch_bin () {\n    local version\n    pkg=$(bin_pkg_name \"$1\")\n    add_fetch \"$pkg\"\n    macro \"$(uc \"$1\")\"         \"\\$(abspath \\$(SUPPORT_BUILD_DIR)/${pkg}_$version/bin/$1)\"\n    macro \"$(uc \"$1\")_BIN_DEP\" \"\\$(SUPPORT_BUILD_DIR)/${pkg}_$version/bin/$1\"\n}\n\n# Chose to fetch the given library\nfetch_lib () {\n    local pkg\n    local version\n    pkg=$(lib_pkg_name \"$1\")\n    add_fetch \"$pkg\"\n    var_append \"$pkg\"_LIB_NAME \"$(uc \"$1\")\"\n    var \"HAS_$(uc \"$1\")\" 1\n    macro \"$(uc \"$1\")_LIBS_DEP\"         \"\\$(SUPPORT_BUILD_DIR)/${pkg}_$version/lib/lib$1.a\"\n    macro \"$(uc \"$1\")_INCLUDE\" \"-isystem \\$(SUPPORT_BUILD_DIR)/${pkg}_$version/include\"\n    if pkg separate-install-include \"$pkg\"; then\n        macro \"$(uc \"$1\")_INCLUDE_DEP\"  \"\\$(SUPPORT_BUILD_DIR)/${pkg}_$version/include\"\n    else\n        macro \"$(uc \"$1\")_INCLUDE_DEP\"  \"\\$(SUPPORT_BUILD_DIR)/${pkg}_$version/lib/lib$1.a\"\n    fi\n    static_libs=\"$static_libs $1\"\n}\n\n# require_dep <name>\n# Like require, but looks up the description for name\nrequire_dep () {\n    local descr\n    lookup \"$dep_descrs\" $1 descr || descr=$1\n    require $descr\n}\n\n# optional_dep <name>\n# Like optional, but looks up the description for name\noptional_dep () {\n    local descr\n    lookup \"$dep_descrs\" $1 descr || descr=$1\n    optional $descr\n}\n\n# An assoc-list of c++ code to test if a library works\nlib_test_code=':~\n\n~termcap:\n#include <termcap.h>\nint main(){ tgetent(0, \"xterm\"); return 0; }\n\n~boost:\n#include <boost/bind.hpp>\nint main(){ return 0; }\n\n~cxx11:\n// Verify that std::map uses the move constructor\n\n#include <map>\n\nstruct C {\n    C(const C&) = delete;\n\n    C() { }\n    C(C &&) { }\n};\n\nint main() {\n    std::map<int, C> m;\n    m.insert(std::make_pair(0, C()));\n}\n\n~jemalloc:\n\n#include <jemalloc/jemalloc.h>\n\nint main(){\n    // Jemalloc 4 fixes some bugs concerning the handling of OOM conditions\n    static_assert(JEMALLOC_VERSION_MAJOR >= 4, \"jemalloc version 4 or above is required\");\n}\n\n~crypto:\n\n#include <openssl/bn.h>\n#include <openssl/crypto.h>\n#include <openssl/evp.h>\nint main(){\n    CRYPTO_THREADID_set_callback([](CRYPTO_THREADID *id){ CRYPTO_THREADID_set_numeric(id, 0); });\n    unsigned char out[4];\n    PKCS5_PBKDF2_HMAC(static_cast<char const *>(\"pass\"), 4, nullptr, 0, 1, EVP_sha256(), sizeof(out), out);\n    return 0;\n}\n\n~ssl:\n\n#include <openssl/ssl.h>\nint main(){\n    SSL_CTX_set_options(\n        SSL_CTX_new(SSLv23_method()),\n        SSL_OP_NO_SSLv2|SSL_OP_NO_SSLv3|SSL_OP_NO_TLSv1|SSL_OP_NO_TLSv1_1|SSL_OP_CIPHER_SERVER_PREFERENCE|SSL_OP_SINGLE_DH_USE|SSL_OP_SINGLE_ECDH_USE);\n    return 0;\n}\n\n~'\n\n# An assoc-list of possible library aliases\nlib_alias=':\ntermcap:termcap tinfo ncurses\ntcmalloc:tcmalloc_minimal'\n\n# List the paths where static libraries can be found into the try_lib_paths variable\nbuild_try_lib_paths () {\n    cc_paths=$($CXX -print-search-dirs 2>/dev/null | grep ^libraries | sed -e 's/^libraries[: =]*//; s/:/ /g')\n    ld_paths=\"/usr/lib /usr/local/lib\"  # Default ld search paths.\n    LDCONFIG=$(PATH=\"$PATH:/sbin:/usr/sbin\" command -v ldconfig 2>/dev/null)\n    if [[ -n \"$LDCONFIG\" ]]; then\n        local ld_output=\"$($LDCONFIG -v -N -X 2>/dev/null)\"\n        if [[ -n \"$ld_output\" ]]; then\n          ld_paths=$(echo \"$ld_output\" | grep -v '^\t' | sed -e 's/:$//' )\n        fi\n    fi\n    try_lib_paths=\"$lib_paths $cc_paths $ld_paths\"\n    try_lib_paths=$(for path in $try_lib_paths; do\n            test -d \"$path\" && niceabspath \"$path\"\n        done | sort -u)\n}\n\n# check_lib <name> <required/optional>\n# Check for the presence of a library and set the correct make flags for it\n# WISHLIST: Properly detect the presence of the headers and check that the\n#           installed version is compatible. Try using pkg-config.\ncheck_lib () {\n    local info=$2\n    local path\n    if contains \"$please_fetch_list $FETCH_LIST\" $(lib_pkg_name \"$1\"); then\n        ${info}_dep $1\n        fetch_lib $1\n        return\n    fi\n    if lookup \"$force_paths\" $1 path; then\n        ${info}_dep $1\n        check_lib_compile \"$path\" $1\n        if $can_show; then\n            show_no \"$path\" \"$1\"\n            empty_deps_lib $1 false\n        fi\n        return\n    fi\n    local check\n    if contains \"$static_libs\" $1; then\n        static_info=\" (static)\"\n        check=check_static_lib\n    else\n        static_info=\n        check=check_dyn_lib\n    fi\n    $info \"$1$static_info\"\n    delay_errors=true\n    local aliases\n    lookup \"$lib_alias\" $1 aliases || aliases=$1\n    for lib in $aliases; do\n        $check $lib $1\n        if ! $can_show; then\n            empty_deps_lib $1 true\n            return\n        fi\n    done\n    if fetch_allowed $(lib_pkg_name $1); then\n        fetch_lib $1\n    else\n        show_no \"lib$1$static_info\" \"$1\"\n        empty_deps_lib $1 false\n    fi\n}\n\nempty_deps_lib () {\n    if ! \"$2\"; then\n        var \"HAS_$(uc $1)\" 0\n        var \"$(uc $1)_LIBS\" \"\"\n    else\n        var \"HAS_$(uc $1)\" 1\n    fi\n    var \"$(uc $1)_INCLUDE\" \"\"\n    var \"$(uc $1)_INCLUDE_DEP\" \"\"\n    var \"$(uc $1)_LIBS_DEP\" \"\"\n}\n\ncheck_dyn_lib () {\n    check_lib_compile -l$1 $2\n}\n\n# Test if the c++ compiler knows about the library\ncheck_lib_compile () {\n    local bfile=$root/mk/gen/check_$2\n    local code\n    if ! lookup \"$lib_test_code\" $2 code; then\n        code='int main(){ return 0; }'\n    fi\n    echo \"$code\" > \"$bfile.cc\"\n    if $CXX -std=gnu++0x ${CXXFLAGS:-} ${LDFLAGS:-} ${LIB_SEARCH_PATHS:-} \"$bfile.cc\" $1 -o \"$bfile.out\" 1>\"$bfile.log\" 2>&1; then\n        show \"${1:-ok}\"\n        var_append $(uc $2)_LIBS \"$1\"\n        var HAS_$(uc $2) 1\n    else\n        error_details=\"${error_details:-}\"$(cat \"$bfile.log\")\n    fi\n}\n\n# Test if we are cross-compiling\ncheck_cross_compiling () {\n    require \"Cross-compiling\"\n    local bfile=\"$root/mk/gen/check_cross_compile\"\n    echo \"int main(){ return 0; }\" > \"$bfile.cc\"\n    if ! $CXX ${CXXFLAGS:-} ${LDFLAGS:-} \"$bfile.cc\" -o \"$bfile.out\" 1>\"$bfile.log\" 2>&1; then\n        error_details=$(cat \"$bfile.log\")\n        error \"Failed to compile\"\n    else\n        if \"$bfile.out\" >/dev/null 2>&1; then\n            boolvar CROSS_COMPILING false\n        else\n            boolvar CROSS_COMPILING true\n        fi\n    fi\n}\n\ncheck_static_lib () {\n    local found=false\n    for path in $try_lib_paths; do\n        local l=$path/lib$1.a\n        if test -e \"$l\"; then\n            found=true\n            check_lib_compile \"$l\" \"$2\"\n            if ! $can_show; then\n                return 0\n            fi\n        fi\n    done\n    if ! $found; then\n        error_details=\"${error_details:-}\"$\"lib$1.a not found\\n\"\n    fi\n}\n\n# Some utility functions\n# When bash 4 becomes ubiquitous, we can use ${//}, ${^^} and ${,,}\nuc () { echo \"$*\" | tr '[:lower:]' '[:upper:]'; }\nlc () { echo \"$*\" | tr '[:upper:]' '[:lower:]'; }\nsubst () { echo \"${1%%$2*}$3${1#*$2}\"; }\n\n# bash's ! as a command\nnot () {\n    ! \"$@\"\n}\n\n# Make the path absolute and prettier (with no /..)\nniceabspath () {\n    if [[ -d \"$1\" ]]; then\n        (cd \"$1\" && pwd) && return\n    fi\n    local dir=$(dirname \"$1\")\n    if [[ -d \"$dir\" ]] && dir=$(cd \"$dir\" && pwd); then\n        echo \"$dir/$(basename \"$1\")\" | sed 's|^//|/|'\n        return\n    fi\n    if [[ \"${1:0:1}\" = / ]]; then\n        echo \"$1\"\n    else\n        echo \"$(pwd)/$1\"\n    fi\n}\n\n# Test that PROTOC and PROTOBUF_LIBS work together\ntest_protobuf () {\n    require \"Test protobuf\"\n    if any \"protoc protobuf\" contains \"$FETCH_LIST\"; then\n        if [[ -z \"${PROTOC_BIN_DEP:-}\" ]]; then\n            fetch_bin protoc\n        fi\n        show fetch\n        return\n    fi\n    if ! test -e \"$PROTOC\"; then\n        required=false\n        error \"$PROTOC does not exist\"\n        return\n    fi\n    local pbdir=$root/mk/gen/protoc/\n    mkdir -p \"$pbdir\"\n    echo 'message Foo { enum Bar { Baz = 1; } }' > \"$pbdir/test.proto\"\n    echo 'int main(){ return 0; }' > \"$pbdir/main.cc\"\n    local out\n    if ! out=$(\n            \"$PROTOC\" \"$pbdir/test.proto\" --cpp_out=. 2>&1 &&\n            $CXX \"$pbdir/test.pb.cc\" \"$pbdir/main.cc\" -I \"$root\" $PROTOBUF_LIBS $PTHREAD_LIBS $M_LIBS ${CXXFLAGS:-} ${LDFLAGS:-} ${LIB_SEARCH_PATHS:-} -o \"$pbdir/a.out\" 2>&1)\n    then\n        error_details=\"$out\"\n        error \"Unable to compile sample protobuf file. Try running ./configure with the --fetch protoc option\"\n        return\n    fi\n    show ok\n}\n\n# fetch_allowed <pkg>\n# Fails if the package cannot be fetched\nfetch_allowed () {\n     { contains \"$please_fetch_list\" $1 ||\n         { can_fetch $1 && $allow_fetch ; } ; } || return 1\n}\n\ncheck_clang_bug_5424 () {\n    local tmpfile=$root/mk/gen/check_clang_bug_5424\n    cat > \"$tmpfile.cc\" <<EOF\n#include <iostream>\nint output = 1;\nclass data_t {\npublic:\n    data_t(int num) {\n    }\n    ~data_t() {\n        output = 0;\n    }\n};\nstruct data_struct_t {\n    data_t some_data;\n    data_t some_other_data;\n};\nint main() {\n  output = 1;\n    {\n        data_struct_t{1, 2};\n    }\n    return output;\n}\nEOF\n    if !($CXX ${CXXFLAGS:-} ${LDFLAGS:-} ${LIB_SEARCH_PATHS:-} \"$tmpfile.cc\" \\\n          -std=c++11 -o \"$tmpfile.out\" 1>\"$tmpfile.log\" 2>&1;\n        $tmpfile.out)\n    then\n       error \"You seem to be using a version of Clang with a bug that may affect Rethink DB. Please upgrade Clang or specify a different compiler.\"\n    fi\n}\n\n# Check for boost\ncheck_boost () {\n    require \"Test boost\"\n    if contains \"$please_fetch_list\" boost; then\n        fetch_lib boost\n        return\n    fi\n    check_lib_compile \"\" boost\n    if $can_show; then\n        if fetch_allowed boost; then\n            fetch_lib boost\n        else\n            show_no \"boost\"\n        fi\n    else\n        empty_deps_lib boost true\n    fi\n}\n\n# bin_pkg_name <bin>\n# The support package name that contains the application\nbin_pkg_name () {\n    case \"$1\" in\n        protoc) echo protobuf ;;\n        # The curl-bin package doesn't exist. It is placed here to avoid\n        # the circular dependency of curl being used to fetch curl.\n        curl) echo curl-bin ;;\n        *) echo \"$1\" ;;\n    esac\n}\n\n# lib_pkg_name <lib>\n# The support package name that contains the library\nlib_pkg_name () {\n    case \"$1\" in\n        tcmalloc) echo gperftools ;;\n        z) echo zlib ;;\n        boost_system) echo boost ;;\n        crypto) echo openssl ;;\n        ssl) echo openssl ;;\n        *) echo \"$1\" ;;\n    esac\n}\n\n# guess_pkg_name <name>\n# Find the name of a package associated with the given name\nguess_pkg_name () {\n    local pkg\n    case \"$1\" in\n        # Assume that curl here means libcurl, not curl itself\n        curl) echo curl ; return ;;\n    esac\n    pkg=$(lib_pkg_name \"$1\")\n    if [[ \"$pkg\" != \"$1\" ]]; then\n        echo \"$pkg\"\n    else\n        bin_pkg_name \"$1\"\n    fi\n}\n\n# can_fetch <pkg>\n# Check if we know how to fetch pkg\ncan_fetch () {\n    test -e $root/mk/support/pkg/\"$1\".sh\n}\n\n# List all the packages that can be fetched\nall_fetch_deps () {\n    local ret=\n    local pkg\n    for dep in $all_deps; do\n        pkg=$(guess_pkg_name \"$dep\")\n        if can_fetch $pkg; then\n            ret=\"$ret $pkg\"\n        fi\n    done\n    echo \"$ret\"\n}\n\ncheck_cxx11 () {\n    require \"C++11\"\n    check_lib_compile \"\" cxx11\n    if $can_show; then\n        show_no \"C++11\"\n    fi\n}\n\ncheck_vs_bin () {\n    local ucname=$(uc $1)\n    local exe=${!ucname:-}\n    if [[ -z \"$exe\" ]] || ! lookup \"$arg_vars\" $ucname exe; then\n        # TODO: what is a better way to find these?\n        for it in /cygdrive/*/Program\\ Files*/Microsoft\\ Visual\\ Studio/2022/*/{MSBuild/Current,VC/Auxiliary/Build,Common7/IDE/CommonExtensions/Microsoft/CMake/CMake}{,/Bin}/$1.{exe,bat}; do\n            case \"$it\" in\n                *\\**) ;;\n                *) exe=$it; break;;\n            esac\n        done\n    fi\n\n    if [[ -n \"$exe\" ]]; then\n        test_bin_version $1 \"$exe\" /version\n        var $ucname \"$exe\"\n    else\n        not_found $1\n    fi\n}\n\ncheck_windows () {\n    if winver=`cmd /c ver 2>&1`; then\n        require \"Operating System\"\n        show \"$winver\"\n        windows=true\n        var OS Windows\n    else\n        windows=false\n    fi\n}\n\ncheck_windows_platform () {\n    if [[ -n \"${requested_platform:-}\" ]]; then\n        case \"$requested_platform\" in\n            x64) var PLATFORM x64 ;;\n            Win32) var PLATFORM Win32 ;;\n            *) error \"invalid platform '$requested_platform', should be Win32 or x64\"\n        esac\n    else\n        case \"`uname -m`\" in\n            *64*) var PLATFORM x64 ;;\n            *) var PLATFORM Win32 ;;\n        esac\n    fi\n}\n\n# The root of the source tree\nroot=$(dirname $0)\n\n# Call the main command with the command line arguments\nmain \"$@\" 3>/dev/null\n"
        },
        {
          "name": "demos",
          "type": "tree",
          "content": null
        },
        {
          "name": "external",
          "type": "tree",
          "content": null
        },
        {
          "name": "github-banner.png",
          "type": "blob",
          "size": 151.82,
          "content": null
        },
        {
          "name": "mk",
          "type": "tree",
          "content": null
        },
        {
          "name": "packaging",
          "type": "tree",
          "content": null
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "snap",
          "type": "tree",
          "content": null
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "test",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}