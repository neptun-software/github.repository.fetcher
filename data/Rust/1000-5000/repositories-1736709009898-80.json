{
  "metadata": {
    "timestamp": 1736709009898,
    "page": 80,
    "hasNextPage": true,
    "endCursor": "Y3Vyc29yOjgw",
    "completionStatus": "IN_PROGRESS"
  },
  "repositories": [
    {
      "nameWithOwner": "rhaiscript/rhai",
      "stars": 3960,
      "defaultBranch": "main",
      "files": [
        {
          "name": ".gitattributes",
          "type": "blob",
          "size": 0.03515625,
          "content": "*.rhai linguist-language=JavaScript\n"
        },
        {
          "name": ".github",
          "type": "tree",
          "content": null
        },
        {
          "name": ".gitignore",
          "type": "blob",
          "size": 0.1630859375,
          "content": "target/\nCargo.lock\n.vscode/\n.cargo/\nbenches/results\nclippy.toml\nRhai.toml\n**/*.bat\n**/*.exe\ndoc/rhai-sync.json\ndoc/rhai.json\n.idea/\n.idea\n.idea/*\nsrc/eval/chaining.rs\n"
        },
        {
          "name": "CHANGELOG.md",
          "type": "blob",
          "size": 111.318359375,
          "content": "Rhai Release Notes\n==================\n\nVersion 1.21.0\n==============\n\nBug fixes\n---------\n\n* Fixed bug in raw strings (thanks [`@benatkin`](https://github.com/benatkin) [944](https://github.com/rhaiscript/rhai/pull/944)).\n* `get_fn_metadata_list` function is marked `volatile`.\n* `no-std` plus `sync` should now build correctly (thanks [`stargazing-dino`](https://github.com/stargazing-dino) [947](https://github.com/rhaiscript/rhai/pull/947)).\n\nEnhancements\n------------\n\n* A new `internals` function, `Engine::collect_fn_metadata`, is added to collect all functions metadata. This is to facilitate better error reporting for missing functions (thanks [`therealprof`](https://github.com/therealprof) [945](https://github.com/rhaiscript/rhai/pull/945)).\n\n\nVersion 1.20.1\n==============\n\nBug fixes\n---------\n\n* Fixed bug in raw strings with newlines (thanks [`@benatkin`](https://github.com/benatkin) [940](https://github.com/rhaiscript/rhai/pull/940)).\n\nEnhancements\n------------\n\n* If a string slice refers to the entire string, the slice is not cloned but returned as-is.\n\n\nVersion 1.20.0\n==============\n\nBug fixes\n---------\n\n* (Fuzzing) An integer-overflow bug from an inclusive range in the bits iterator is fixed.\n* (Fuzzing) An integer-underflow bug from an inclusive range is fixed.\n* Copy strings if the strings interner is busy instead of panicing (thanks [`@irevoire`](https://github.com/irevoire) [917](https://github.com/rhaiscript/rhai/pull/917)).\n* Deserialization of `Scope` now works correctly (thanks [`@AngelicosPhosphoros`](https://github.com/AngelicosPhosphoros) [918](https://github.com/rhaiscript/rhai/pull/918)).\n* Support for `thumbv6m` target is fixed (thanks [`chxry`](https://github.com/chxry) [919](https://github.com/rhaiscript/rhai/pull/919))\n\nNew features\n------------\n\n* Added support for _raw strings_ with the syntax `##..#\" ... \"#..##` (thanks [`@cellomath`](https://github.com/cellomath) [908](https://github.com/rhaiscript/rhai/pull/908) [910](https://github.com/rhaiscript/rhai/pull/910)).\n\nEnhancements\n------------\n\n* New `as_immutable_string_ref`, `as_array_ref`, `as_blob_ref`, `as_map_ref` plus their `_mut` variants for `Dynamic` (thanks [`@madonuko`](https://github.com/madonuko) [904](https://github.com/rhaiscript/rhai/pull/904)).\n* The `break`, `return` and `throw` statements can now be simply used as `switch` case statement expressions. Previously it is required that the statement be wrapped in a block.\n\n\nVersion 1.19.0\n==============\n\nBug fixes\n---------\n\n* Variable resolver now correctly resolves variables that are captured in a closure.\n* `NativeCallContext<'_>` (with a lifetime parameter) now parses correctly in the `#[export_module]` macro. This is to allow for `rust_2018_idioms` lints (thanks [`@ltabis`](https://github.com/ltabis) [864](https://github.com/rhaiscript/rhai/issues/864)).\n* The `sync` feature now works properly in `no-std` builds (thanks [`@misssonder`](https://github.com/misssonder) [874](https://github.com/rhaiscript/rhai/pull/874)).\n* More data-race conditions are caught and returned as errors instead of panicking.\n* Missing `min` and `max` functions where both operands are floats or `Decimal` are added.\n* Fixed stack overflow when calling closures recursively (thanks [`@MageWeiG`](https://github.com/MageWeiG) [880](https://github.com/rhaiscript/rhai/issues/880)).\n* `Engine::call_fn` and `Engine::call_fn_with_options` now correctly use the `AST`'s `source` field.\n* (Fuzzing) Fixed crash when using `..=` in strings.\n* (Fuzzing) A recursive stack-overflow bug in `Dynamic::is_hashable` is fixed.\n\nNew features\n------------\n\n* The `break`, `continue`, `return` and `throw` statements can now follow the `??` operator to short-circuit operations where the value is `()`.\n* A new symbol, `$func$`, is added to custom syntax to allow parsing of anonymous functions.\n* The `filter`, `drain` and `retain` methods are added to object maps.\n\n\nVersion 1.18.0\n==============\n\nStarting from this version, we try to put contributors' names on features/enhancements/fixes that they contributed. We apologize for neglecting to adopt this practice earlier, but late is better than never!\n\nBug fixes\n---------\n\n* The position of an undefined operation call now points to the operator instead of the first operand.\n* The `optimize` command in `rhai-repl` now works properly and cycles through `None`->`Simple`->`Full`.\n* `Engine::call_fn_XXX` no longer return errors unnecessarily wrapped in `EvalAltResult::ErrorInFunctionCall`.\n* Some tests that panic on 32-bit architecture are fixed (thanks [`@alexanderkjall`](https://github.com/alexanderkjall) [851](https://github.com/rhaiscript/rhai/issues/851)).\n* The optimizer no longer goes into an infinite loop when optimizing a `try` statement with an empty body.\n\nDeprecated API's\n----------------\n\n* The plugin macros `export_fn`, `register_exported_fn!`, `set_exported_fn!` and `set_exported_global_fn!` are deprecated because they do not add value over existing direct API's.\n\nNew features\n------------\n\n* Sub-strings can now be selected from full strings by indexing via ranges, e.g. `s[1..4]` (thanks [`@zitsen`](https://github.com/zitsen) [#845](https://github.com/rhaiscript/rhai/pull/845)).\n* Doc-comments are now automatically added to function registrations and custom types via the `CustomType` derive macro (thanks [`@Itabis`](https://github.com/ltabis) [#847](https://github.com/rhaiscript/rhai/pull/847)).\n* New options `Engine::set_max_strings_interned` and `Engine::max_strings_interned` are added to limit the maximum number of strings interned in the `Engine`'s string interner.\n* A new advanced callback, `Engine::on_invalid_array_index`, is added (gated under the `internals` feature) to handle access to missing properties in object maps.\n* A new advanced callback, `Engine::on_missing_map_property`, is added (gated under the `internals` feature) to handle out-of-bound index into arrays.\n\nEnhancements\n------------\n\n* `parse_json` is also available without the `metadata` or `serde` feature -- it uses `Engine::parse_json` to parse the JSON text (thanks [`@Mathieu-Lala`](https://github.com/Mathieu-Lala) [#840](https://github.com/rhaiscript/rhai/pull/840)).\n* `FuncRegistration::in_global_namespace` and `FuncRegistration::in_internal_namespace` are added to avoid pulling in `FnNamespace`.\n* Array/BLOB/string iterators are defined also within the `BasicIteratorPackage` in addition to the regular array/BLOB/string packages.\n* `LexError::Runtime` is added for use with `Engine::on_parse_token`.\n* Shared values under `sync` are now handled more elegantly -- instead of deadlocking and hanging indefinitely, it spins for a number of tries (waiting one second between each), then errors out.\n\n\nVersion 1.17.2\n==============\n\nBug fixes\n---------\n\n* The engine no longer crashes when accessing a property or indexed item from a shared value returned from a variables resolver.\n\n\nVersion 1.17.1\n==============\n\nThis is a bug-fix release that bumps `rhai_codegen` version to `2.0.0` to satisfy semver rules.\n\n\nVersion 1.17.0\n==============\n\nStarting from this version, the official preferred method of registering an API for a custom type is via the `#[derive(CustomType)]` macro. The old API is still available for types that reside in external crates (and thus cannot implement `CustomType`).\n\nStarting from this version, the new `FuncRegistration` API is preferred for registering native Rust functions into a `Module`. The old API is still available but deprecated.\n\nStarting from this version, fuzzing via [Google OSS-Fuzz](https://github.com/google/oss-fuzz) is used to flush out hidden bugs and edge cases. This should result in higher code quality, better stability and improved security. And indeed, a large number of bugs have been discovered from this and fixed.\n\nPotentially breaking changes\n----------------------------\n\n* `ImmutableString` now derefs to `&str` instead of `&SmartString`. Normally this should not be a breaking change.\n* Traits implemented by `ImmutableString` are cleaned up. Normally this should not be a breaking change.\n* `EvalContext::new`, `FloatWrapper` and `ConditionalExpr` are now gated under `internals`.\n* Previously, Rhai follows [Unicode's definition for _whitespace_](https://en.wikipedia.org/wiki/Template:Whitespace_(Unicode)), which allows many exotic whitespace characters in scripts. Starting from this version, whitespace follows [WhatWG](https://infra.spec.whatwg.org/#ascii-whitespace)'s definition of five ASCII characters (TAB, SPACE, CR, LF and FF), which is the same as Rust. All other Unicode whitespace characters (not inside strings) are not considered whitespace by Rhai. If a script used to contain non-ASCII whitespace characters, it now fails to parse with a syntax error.\n\nNew features\n------------\n\n* Great thanks to [`@silvergasp`](https://github.com/silvergasp) for setting up fuzzing.\n* `#[derive(CustomType)]` is now available, driven by procedural macros in `rhai_codegen` (thanks [`@MavethGH`](https://github.com/MavethGH) [#817](https://github.com/rhaiscript/rhai/pull/817)).\n* A new `FuncRegistration` API is added to assist in registering native Rust functions into modules with various settings. Some of the original `Module::set_fn...` API is now deprecated.\n* Functions defined in plugin modules can now be marked as `volatile` which prevents it from being optimized away even under `OptimizationLevel::Full`.\n* Added `Engine::max_functions` and `Engine::set_max_functions` to limit the maximum number of functions allowed in a script. This is to guard against DOS attacks -- e.g. a simple closure `||` (two characters) is a function. When `max_function` is exceeded during script compilation, a new parse error, `ParseErrorType::TooManyFunctions`, is returned.\n* `Engine::get_interned_string` is made public instead of gated under `internals`.\n\nDeprecated API's\n----------------\n\n* `rhai::config::hashing::set_ahash_seed`, `rhai::config::hashing::get_ahash_seed` and the `RHAI_AHASH_SEED` environment variable are deprecated in favor of `rhai::config::hashing::set_hashing_seed`, `rhai::config::hashing::get_hashing_seed` and `RHAI_HASHING_SEED`.\n* `AST::clear_doc` is deprecated.\n* Much of the `Module::update_XXX` API is deprecated in favor of using the `FuncRegistration` API.\n* `Module::gen_fn_signatures` is deprecated in favor of `Module::gen_fn_signatures_with_mapper`.\n\nFixes to bugs found via fuzzing\n-------------------------------\n\n* Fixed crash when parsing multi-segment interpolated string longer than maximum.\n* Fixed crash when parsing unterminated comment.\n* Fixed crash when parsing deeply-nested right-associated operators such as `**`.\n* Fixed crash when parsing combo-chaining expressions such as `(a.b).c`.\n* Fixed crash when calling functions that have `Dynamic` parameters with more than 16 parameters.\n* Fixed crash when indexing into an empty array with negative index.\n* Indexing into an array with a negative index that is larger than the length of the array now throws an out-of-bounds error (similar to positive indices) instead of defaulting to the first element.\n* Fixed edge-case crash in timestamp functions.\n* Fixed crash when indenting a block doc-comment with Unicode multi-byte space characters.\n* Fixed improper parsing of numbers with too many decimal points.\n* Fixed exponential running time when raising a decimal number to a very large power (> 1 million) -- it now returns an overflow error.\n* Shared values that contain reference loops no longer cause a stack overflow when printing.\n* `sleep` no longer panics on `NaN`.\n* `switch` on ranges now work properly.\n\nOther bug fixes\n---------------\n\n* Arrays in object maps now serialize to JSON correctly via `to_json()` when the `serde` feature is not enabled.\n* `Engine::format_map_as_json` now serializes arrays correctly.\n* `Engine::gen_fn_signatures(false)` now properly skips functions in the standard library.\n* `TypeBuilder::with_name` now properly sets the display-name of the type for use in generating metadata.\n\nEnhancements\n------------\n\n* Avoid cloning values unless needed when performing constants propagation in optimization.\n* Added `to_int` method for characters.\n* `Token::FloatConstant` and `Token::DecimalConstant` now carry the original text representation for use in, say, a _token mapper_.\n* `Dynamic::is_fnptr` is made a public API.\n* `Scope::get_value_ref` and `Scope::get_value_mut` are added.\n* `TypeBuilder::with_name` now takes any `&str` instead of just `&'static str`.\n* `Engine::gen_fn_signatures` now formats the function signatures using pretty-print names of custom types.\n\n\nVersion 1.16.3\n==============\n\nPublic fields of `VarDefInfo` are marked deprecated but still accessible.\n\n\nVersion 1.16.2\n==============\n\nFixes compilation error when importing multiple modules.\n\n\nVersion 1.16.1\n==============\n\nFixes compilation error when using the `serde` feature with `metadata`.\n\n\nVersion 1.16.0\n==============\n\nCompiler version\n----------------\n\nThe minimum Rust compiler version is raised to `1.66.0`.\n\nPotentially-breaking changes\n----------------------------\n\n* Limit functions (e.g. `max_operations`, `max_array_size` etc.) as well as `Engine::ensure_data_size_within_limits` are no longer exported under `unchecked`. This should be the correct behavior instead of returning `None` or zero.\n* The type `OptimizationLevel` is no longer exported under `no_optimize`. Originally it was mapped to `()` under `no_optimize`.\n* O/S features such as file access and time are no longer disabled when using `wasm32-wasi` (or any WASM target other than `wasm32-unknown`).\n\nBug fixes\n---------\n\n* Fixes a panic when using `this` as the first parameter in a namespace-qualified function call.\n* Comparing two different data types (e.g. a custom type and a standard type) now correctly defaults to `false` (except for `!=` which defaults to `true`).\n* `max` and `min` for integers, strings and characters were missing from the standard library. They are now added.\n\nDependencies\n------------\n\n* Minimal version numbers for dependencies are now specified in `Cargo.toml` to avoid breaking changes in future versions.\n* [`bitflags`](https://crates.io/crates/bitflags) is bumped to version 2.\n* [`syn`](https://crates.io/crates/syn) in [`rhai_codegen`](https://crates.io/crates/rhai_codegen) is bumped to version 2.\n* [`hashbrown`](https://crates.io/crates/hashbrown) (used in `no-std` builds) is bumped to version 0.14.\n\nDeprecated API's\n----------------\n\n* `ParseErrorType::MalformedCallExpr` and `ParseErrorType::MalformedInExpr` are deprecated and will be removed in the next major version.\n* `Module::get_custom_type` is deprecated in favor of `Module::get_custom_type_display_by_name` and other new methods.\n\nNew features\n------------\n\n* New `exit` function that terminates script evaluation regardless of where it is called, even inside deeply-nested function calls.\n* Added `Engine::max_variables` and `Engine::set_max_variables` to limit the maximum number of variables allowed within a scope at any time. This is to guard against defining a huge number of variables containing large data just beyond individual data size limits. When `max_variables` is exceeded a new error, `ErrorTooManyVariables`, is returned.\n* Added `zip` function for arrays.\n* Added `on_print` and `on_debug` definitions for `TypeBuilder`.\n* Doc-comments are now included in custom type definitions within plugin modules. They can be accessed via `Module::get_custom_type_raw`. These doc-comments for custom types are also exported in JSON via `Engine::gen_fn_metadata_to_json`.\n\nEnhancements\n------------\n\n* [`once_cell`](https://crates.io/crates/once_cell) is used in `std` environments instead of the home-brew `SusLock` which is removed.\n* Originally, unit tests use the `?` operator liberally to simplify code. However, this causes the loss of proper line numbers when a test fails, making it difficult to identify the exact location of the failure. This is now fixed by changing to `unwrap()`.\n* Many inlined collections are turned back into `Vec` because they are not transient and do not appear to improve performance.  Using `Vec` seems to be yield better performance as it probably enables more compiler optimizations.\n* General code clean-up to remove optimizations tricks that are not obviously beneficial in favor of clearer code.\n\n\nVersion 1.15.1\n==============\n\nBug fixes\n---------\n\n* `Dynamic::deep_scan` is fixed so now it properly scans arrays, object maps and function pointers embedded inside data.\n\n\nVersion 1.15.0\n==============\n\nBug fixes\n---------\n\n* Fixes a concurrency error in static hashing keys (thanks [`garypen`](https://github.com/garypen)!).\n\nEnhancements\n------------\n\n* Expressions involving `this` should now run slightly faster due to a dedicated `AST` node `ThisPtr`.\n* A `take` function is added to the standard library to take ownership of any data (replacing with `()`) in order to avoid cloning.\n* `Dynamic::take` is added to take ownership of the data (replacing with `()`) in order to avoid cloning.\n* `EvalAltResult::ErrorMismatchOutputType` now gives a better name for the requested generic type (e.g. `&str` is now `&str` and not `string`).\n\n\nVersion 1.14.0\n==============\n\nThis new version contains a substantial number of bug fixes for edge cases.\n\nA new syntax is supported to facilitate writing object methods in script.\n\nThe code hacks that attempt to optimize branch prediction performance are removed because benchmarks do not show any material speed improvements.\n\nBug fixes\n----------\n\n* `is_shared` is a reserved keyword and is now handled properly (e.g. it cannot be the target of a function pointer).\n* Re-optimizing an AST via `optimize_ast` with constants now works correctly for closures. Previously the hidden `Share` nodes are not removed and causes variable-not-found errors during runtime if the constants are not available in the scope.\n* Expressions such as `(v[0].func()).prop` now parse correctly.\n* Shadowed variable exports are now handled correctly.\n* Shadowed constant definitions are now optimized correctly when propagated (e.g. `const X = 1; const X = 1 + 1 + 1; X` now evaluates to 3 instead of 0).\n* Identifiers and comma's in the middle of custom syntax now register correctly.\n* Exporting an object map from a module with closures defined on properties now works correctly when those properties are called to mimic method calls in OOP-style.\n* Compiling for `thumbv6m-none-eabi` target (e.g. Raspberry Pi Pico) now completes successfully. Dependency to `no-std-compat` is now pointed to the latest repo instead of `crates.io`.\n\nNew features\n------------\n\n* It is now possible to require a specific _type_ to the `this` pointer for a particular script-defined function so that it is called only when the `this` pointer contains the specified type.\n* `is_def_fn` is extended to support checking for typed methods, with syntax `is_def_fn(this_type, fn_name, arity)`\n* `Dynamic::take` is added as a short-cut for `std::mem::take(&mut value)`.\n\nEnhancements\n------------\n\n* `Engine::is_symbol_disabled` is added to test whether a particular keyword/symbol is disabled.\n* Support is added to deserialize a `Dynamic` value containing custom types or shared values back into another `Dynamic` (essentially a straight cloned copy).\n\n\nVersion 1.13.0\n==============\n\nThis version attempts a number of optimizations that may yield small speed improvements:\n\n* Simple operators (e.g. integer arithmetic) are inlined to avoid the overhead of a function call.\n* The tokenizer uses pre-calculated tables (generated by GNU `gperf`) for keyword recognition.\n* A black-arts trick (see `Engine::black_box`) is used to prevent LLVM from optimizing hand-tuned AST node matches back into a lookup table, which messes up branch prediction on modern CPU's.\n\nBug fixes\n---------\n\n* Complex indexing/dotting chains now parse correctly, for example: `a[b][c[d]].e`\n* `map` and `filter` for arrays are marked `pure`. Warnings are added to the documentation of pure array methods that take `this` closures.\n* Syntax such as `foo.bar::baz` no longer panics, but returns a proper parse error.\n* Expressions such as `!inside` now parses correctly instead of as `!in` followed by `side`.\n* Custom syntax starting with symbols now works correctly and no longer raises a parse error.\n* Comparing different custom types now works correctly when the appropriate comparison operators are registered.\n* Some op-assignments, such as `x += y` where `x` and `y` are `char`, now work correctly instead of failing silently.\n* Op-assignments to bit flags or bit ranges now work correctly.\n\nPotentially breaking changes\n----------------------------\n\n* The trait method `ModuleResolver::resolve_raw` (which is a low-level API) now takes a `&mut Scope` parameter.  This is a breaking change because the signature is modified, but this trait method has a default and is rarely called/implemented in practice.\n* `Module::eval_ast_as_new_raw` (a low-level API) now takes a `&mut Scope` instead of the `Scope` parameter.  This is a breaking change because the `&mut` is now required.\n* `Engine::allow_loop_expressions` now correctly defaults to `true` (was erroneously `false` by default).\n\nEnhancements\n------------\n\n* `Engine::new_raw` is now `const` and runs very fast, delaying all other initialization until first use.\n* The functions `min` and `max` are added for numbers.\n* Range cases in `switch` statements now also match floating-point and decimal values. In order to support this, however, small numeric ranges cases are no longer unrolled.\n* Loading a module via `import` now gives the module access to the current scope, including variables and constants defined inside.\n* Some very simple operator calls (e.g. integer add) are inlined to avoid the overhead of a function call, resulting in a small speed improvement.\n* The tokenizer now uses table-driven keyword recognizers generated by GNU `gperf`. At least _theoretically_ it should be faster...\n* The field `isAnonymous` is added to JSON functions metadata.\n\n\nVersion 1.12.0\n==============\n\nBug fixes\n---------\n\n* Integer numbers that are too large to deserialize into `INT` now fall back to `Decimal` or `FLOAT` instead of silently truncating.\n* Parsing deeply-nested closures (e.g. `||{||{||{||{||{||{||{...}}}}}}}`) no longer panics but will be confined to the nesting limit.\n* Closures containing a single expression are now allowed in `Engine::eval_expression` etc.\n* Strings interpolation now works under `Engine::new_raw` without any standard package.\n* `Fn` now throws an error if the name is a reserved keyword as it cannot possibly map to such a function. This also disallows creating function pointers to custom operators which are defined as disabled keywords (a mouthful), but such custom operators are designed primarily to be used as operators.\n\nBreaking API changes\n--------------------\n\n* The callback for initializing a debugger instance has changed to `Fn(&Engine, Debugger) -> Debugger`. This allows more control over the initial setup of the debugger.\n* The internal macro `reify!` is no longer available publicly.\n\nDeprecated API's\n----------------\n\n* `Module::with_capacity` is deprecated.\n* The internal method `Engine::eval_statements_raw` is deprecated.\n* Array overloaded methods that take function names (as string) are deprecated in favor of using the `Fn(\"...\")` call.\n\nSpeed improvements\n------------------\n\n* The function registration mechanism is revamped to take advantage of constant generics, among others, to omit checking code where possible. This yields a 10-20% speed improvements on certain real-life, function-call-heavy workloads.\n* Functions taking function pointers as parameters, usually called with closures, now run faster because a link to the anonymous function (generated by the closure) is stored together with the function pointer itself. This allows short-circuiting the function lookup step.\n\nNet features\n------------\n\n### First class functions (sort of)\n\n* A function pointer created via a closure definition now links to the particular anonymous function itself.\n* This avoids a potentially expensive function lookup when the function pointer is called, speeding up closures.\n* Closures now also encapsulate their defining environment, so function pointers can now be freely `export`ed from modules!\n\n### `!in`\n\n* A new operator `!in` is added which maps to `!(... in ...)`.\n\n### `Engine::call_fn_with_options`\n\n* `Engine::call_fn_raw` is deprecated in favor of `Engine::call_fn_with_options` which allows setting options for the function call.\n* The options are for future-proofing the API.\n* In this version, it gains the ability to set the value of the _custom state_ (accessible via `NativeCallContext::tag`) for a function evaluation, overriding `Engine::set_default_tag`.\n\n### Compact a script for compression\n\n* `Engine::compact_script` is added which takes a valid script (it still returns parsing errors) and returns a _compacted_ version of the script with all insignificant whitespaces and all comments removed.\n* A compact script compresses better than one with liberal whitespaces and comments.\n* Unlike some uglifiers or minifiers, `Engine::compact_script` does not optimize the script in any way, nor does it rename variables.\n\n### Enhanced array API\n\n* Array methods that take a function pointer, usually a closure (e.g. `map`, `filter`, `index_of`, `reduce` etc.), can now bind the array element to `this` when calling a closure.\n* This vastly improves performance when working with arrays of large types (e.g. object maps) by avoiding unnecessary cloning.\n* `find` and `find_map` are added for arrays.\n* `for_each` is also added for arrays, allowing a closure to mutate array elements (bound to `this`) in turn.\n\nEnhancements\n------------\n\n* Optimizations have been done to key data structures to minimize size and creation time, which involves turning rarely-used fields into `Option<Box<T>>`. This resulted in some speed improvements.\n* `CallableFunction` is exported under `internals`.\n* The `TypeBuilder` type and `CustomType` trait are no longer marked as volatile.\n* `FuncArgs` is also implemented for arrays.\n* `Engine::set_XXX` API can now be chained.\n* `EvalContext::scope_mut` now returns `&mut Scope` instead of `&mut &mut Scope`.\n* Line-style doc-comments are now merged into a single string to avoid creating many strings. Block-style doc-comments continue to be independent strings.\n* Block-style doc-comments are now \"un-indented\" for better formatting.\n* Doc-comments on plugin modules are now captured in the module's `doc` field.\n* Expression nesting levels is refined such that it grows less excessively for common patterns.\n* The traits `Index` and `IndexMut` are added to `FnPtr`.\n* `FnPtr::iter_curry` and `FnPtr::iter_curry_mut` are added.\n* `Dynamic::deep_scan` is added to recursively scan for `Dynamic` values.\n* `>>` and `<<` operators on integers no longer throw errors when the number of bits to shift is out of bounds.  Shifting by a negative number of bits simply reverses the shift direction.\n\n\nVersion 1.11.0\n==============\n\nSpeed improvements\n------------------\n\n* Due to a code refactor, built-in operators for standard types now run even faster, in certain cases by 20-30%.\n\nBug fixes\n---------\n\n* `Engine::parse_json` now returns an error on unquoted keys to be consistent with JSON specifications.\n* `import` statements inside `eval` no longer cause errors in subsequent code.\n* Functions marked `global` in `import`ed modules with no alias names now work properly.\n* Incorrect loop optimizations that are too aggressive (e.g. unrolling a `do { ... } until true` with a `break` statement inside) and cause crashes are removed.\n* `Dynamic::is` now works properly for shared values.\n\nBreaking changes\n----------------\n\n* `NativeCallContext::new` is completely deprecated and unimplemented (always panics) in favor of new API's.\n\nNew features\n------------\n\n### `Dynamic` detection API\n\n* New methods are added to `Dynamic` in the form of `is_XXX()` where `XXX` is a type (e.g. `is_int`, `is_unit`, `is_bool`, `is_array`).\n* This new API is to make it easier to detect the data type, instead of having to call `is::<XXX>()`.\n\n### Loop expressions\n\n* Loops (such as `loop`, `do`, `while` and `for`) can now act as _expressions_, with the `break` statement returning an optional value.\n* Normal loops return `()` as the value.\n* Loop expressions can be enabled/disabled via `Engine::set_allow_loop_expressions`\n\n### Static hashing\n\n* It is now possible to specify a fixed _seed_ for use with the `ahash` hasher, via a static function `rhai::config::hashing::set_ahash_seed` or an environment variable (`RHAI_AHASH_SEED`), in order to force static (i.e. deterministic) hashes for function signatures.\n* This is necessary when using Rhai across shared-library boundaries.\n* A build script is used to extract the environment variable (`RHAI_AHASH_SEED`, if any) and splice it into the source code before compilation.\n\n### `no_time` for no timestamps\n\n* A new feature, `no_time`, is added to disable support for timestamps.\n* This may be necessary when building for architectures without time support, such as raw WASM.\n\n### Serializable `Scope`\n\n* `Scope` is now serializable and deserializable via `serde`.\n\n### Store and recreate `NativeCallContext`\n\n* A convenient API is added to store a `NativeCallContext` into a new `NativeCallContextStore` type.\n* This allows a `NativeCallContext` to be stored and recreated later on.\n\n### Call native Rust functions in `NativeCallContext`\n\n* `NativeCallContext::call_native_fn` is added to call registered native Rust functions only.\n* `NativeCallContext::call_native_fn_raw` is added as the advanced version.\n* This is often desirable as Rust functions typically do not want a similar-named scripted function to hijack the process -- which will cause brittleness.\n\n### Custom syntax improvements\n\n* The look-ahead symbol for custom syntax now renders a string literal in quotes (instead of the generic term `string`).\n* This facilitates more accurate parsing by separating strings and identifiers.\n\n### Limits API\n\n* Methods returning maximum limits (e.g. `Engine::max_string_len`) are now available even under `unchecked`.\n* This helps avoid the proliferation of unnecessary feature flags in third-party library code.\n\nEnhancements\n------------\n\n* `parse_json` function is added to parse a JSON string into an object map.\n* `Error::ErrorNonPureMethodCallOnConstant` is added which is raised when a non-pure method is called on a constant value.\n\n\nVersion 1.10.1\n==============\n\nBug fixes\n---------\n\n* Compiling on 32-bit architectures no longer cause a compilation error.\n* Fix type-size test for 32-bit architectures without the `decimal` feature.\n\nCustom syntax with state\n------------------------\n\n* [`Engine::register_custom_syntax_with_state_raw`] is added. The custom syntax parser and implementation functions take on an additional parameter that holds a user-defined custom _state_ which should substantially simplify writing some custom parsers.\n* [`Engine::register_custom_syntax_raw`] is deprecated.\n\n\nVersion 1.10.0\n==============\n\nThis version introduces _Fast Operators_ mode, which is turned on by default but can be disabled via\na new options API: `Engine::set_fast_operators`.\n\n_Fast Operators_ mode assumes that none of Rhai's built-in operators for standard data types are\noverloaded by user-registered functions. In the vast majority of cases this should be so (really,\nwho overloads the `+` operator for integers anyway?).\n\nThis assumption allows the `Engine` to avoid checking for overloads for every single operator call.\nThis usually results in substantial speed improvements, especially for expressions.\n\nMinimum Rust Version\n--------------------\n\nThe minimum Rust version is now `1.61.0` in order to use some `const` generics.\n\nBug fixes\n---------\n\n* API for registering property getters/setters and indexers to an `Engine` now works with functions that take a first parameter of `NativeCallContext`.\n* Missing API function `Module::set_getter_setter_fn` is added.\n* To avoid subtle errors, simple optimization is used for `rhai-run`; previous it was full optimization.\n\nDeprecated API\n--------------\n\n* All versions of the `Engine::register_XXX_result` API that register a function returning `Result<T, Box<EvalAltResult>>` are now deprecated. The regular, non-`result` versions handle all functions correctly.\n\nNew features\n------------\n\n### Fast operators\n\n* A new option `Engine::fast_operators` is introduced (default to `true`) to enable/disable _Fast Operators_ mode.\n\n### Fallible type iterators\n\n* For very special needs, the ability to register fallible type iterators is added.\n\n### Expressions\n\n* `if`-expressions are allowed in `Engine::eval_expression` and `Engine::compile_expression` provided that both statement blocks each contain at most a single expression.\n* `switch`-expressions are allowed in `Engine::eval_expression` and `Engine::compile_expression` provided that match actions are expressions only.\n\nEnhancements\n------------\n\n* `is_empty` method is added to arrays, BLOB's, object maps, strings and ranges.\n* `StaticModuleResolver` now stores the path in the module's `id` field.\n* `Engine::module_resolver` is added to grant access to the `Engine`'s module resolver.\n* Constants and variables now have types in generated definition files.\n\n\nVersion 1.9.1\n=============\n\nThis is a bug-fix version that fixes a bug.\n\nAccessing properties in _Strict Variables Mode_ no longer generates a _variable not found_ error.\n\n\nVersion 1.9.0\n=============\n\nThe minimum Rust version is now `1.60.0` in order to use the `dep:` syntax for dependencies.\n\nBug fixes\n---------\n\n* `switch` cases with conditions that evaluate to constant `()` no longer optimize to `false` (should raise a type error during runtime).\n* Fixes concatenation of BLOB's and strings, where the BLOB's should be interpreted as UTF-8 encoded strings.\n* Capturing an unknown variable in a closure no longer panics.\n* Fixes panic in interpolated strings with constant expressions.\n* Using `call_fn_raw` on a function without evaluating the AST no longer panics on namespace-qualified function calls due to `import` statements not run.\n* Some reserved tokens (such as \"?\", \"++\") cannot be used in custom syntax; this is now fixed.\n\nBreaking changes\n----------------\n\n* The first closure passed to `Engine::register_debugger` now takes a single parameter which is a reference to the current `Engine`.\n\nNew features\n------------\n\n### New feature flags\n\n* A new feature flag, `std`, which is enabled by default, is added due to requirements from dependency crates.\n* A new feature flag, `no_custom_syntax`, is added to remove custom syntax support from Rhai for applications that do not require it (which should be most).\n\n### Module documentation\n\n* Comment lines beginning with `//!` (requires the `metadata` feature) are now collected as the script file's _module documentation_.\n* `AST` and `Module` have methods to access and manipulate documentation.\n\n### Output definition files\n\n* An API is added to automatically generate definition files from a fully-configured `Engine`, for use with the Rhai Language Server.\n\n### Short-hand to function pointers\n\n* Using a script-defined function's name (in place of a variable) implicitly creates a function pointer to the function.\n\n### Top-level functions\n\n* Crate-level functions `rhai::eval`, `rhai::run`, `rhai::eval_file`, `rhai::run_file` are added as convenient wrappers.\n\n### CustomType trait and TypeBuilder\n\n* A new volatile API, `Engine::build_type`, enables registration of the entire API of a custom type in one go, provided that the custom type implements the `CustomType` trait (which uses `TypeBuilder` to register the API functions).\n\n### Simpler Package API\n\n* It is now easier to register packages via the `Package::register_into_engine` and `Package::register_into_engine_as` API.\n* Defining a custom package with base packages is also much easier with a new syntax - put the new base packages after a colon.\n\nEnhancements\n------------\n\n### `switch` statement\n\n* `switch` cases can now include multiple values separated by `|`.\n* Duplicated `switch` cases are now allowed.\n* The error `ParseErrorType::DuplicatedSwitchCase` is deprecated.\n* Ranges in `switch` statements that are small (currently no more than 16 items) are unrolled if possible.\n\n### Others\n\n* `EvalContext::eval_expression_tree_raw` and `Expression::eval_with_context_raw` are added to allow for not rewinding the `Scope` at the end of a statements block.\n* A new `range` function variant that takes an exclusive range with a step.\n* `as_string` is added to BLOB's to convert it into a string by interpreting it as a UTF-8 byte stream.\n* `FnAccess::is_private`, `FnAccess::is_public`, `FnNamespace::is_module_namespace` and `FnNameSpace::is_global_namespace` are added for convenience.\n* `Iterator<Item=T>` type for functions metadata is simplified to `Iterator<T>`.\n* `Scope::remove` is added to remove a variable from a `Scope`, returning its value.\n* The code base is cleaner by running it through Clippy.\n* `ParseError::err_type` and `ParseError::position` are added for convenience.\n* The source of an `AST` compiled from a script file is set to the file's path.\n* `|>` and `<|` are now reserved symbols.\n\n\nVersion 1.8.0\n=============\n\nBug fixes\n---------\n\n* Self-contained `AST` now works properly with `Engine::call_fn`.\n* Missing `to_int` from `Decimal` is added.\n* Parsing of index expressions is relaxed and many cases no longer result in an index-type error to allow for custom indexers.\n* Merging or combining a self-contained `AST` into another `AST` now works properly.\n* Plugin modules/functions no longer generate errors under `#![deny(missing_docs)]`.\n* Calling a property on a function call that returns a shared value no longer causes an error.\n* _Strict Variables Mode_ now checks for module namespaces within functions as well.\n* Module defined via `Engine::register_static_module` are now checked in _Strict Variables Mode_.\n\nReserved Symbols\n----------------\n\n* `?`, `??`, `?.`, `?[` and `!.` are now reserved symbols.\n\nDeprecated API's\n----------------\n\n* `FnPtr::num_curried` is deprecated in favor of `FnPtr::curry().len()`.\n\nNew features\n------------\n\n* The _Elvis operators_ (`?.` and `?[`) are now supported for property access, method calls and indexing.\n* The _null-coalescing operator_ (`??`) is now supported to short-circuit `()` values.\n\nEnhancements\n------------\n\n* Indexing and property access are now faster.\n* `EvalAltResult::IndexNotFound` is added to aid in raising errors for indexers.\n* `Engine::def_tag`, `Engine::def_tag_mut` and `Engine::set_tag` are added to manage a default value for the custom evaluation state, accessible via `EvalState::tag()` (which is the same as `NativeCallContext::tag()`).\n* Originally, the debugger's custom state uses the same state as `EvalState::tag()` (which is the same as `NativeCallContext::tag()`).  It is now split into its own variable accessible under `Debugger::state()`.\n* Non-borrowed string keys can now be deserialized for object maps via `serde`.\n* `Scope::get` is added to get a reference to a variable's value.\n* Variable resolvers can now return a _shared_ value which can be mutated.\n\n\nVersion 1.7.0\n=============\n\nBug fixes\n---------\n\n* Compound assignments now work properly with indexers.\n* Cloning a `Scope` no longer turns all constants to mutable.\n\nScript-breaking changes\n-----------------------\n\n* _Strict Variables Mode_ no longer returns an error when an undeclared variable matches a variable/constant in the provided external `Scope`.\n\nPotentially breaking API changes\n--------------------------------\n\n* The `Engine::on_var` and `Engine::on_parse_token` API's are now marked unstable/volatile.\n* The closures passed to `Engine::on_var`, `Engine::on_def_var` and `Engine::register_debugger` take `EvalContext` instead of `&EvalContext` or `&mut EvalContext`.\n* The following enum's are marked `non_exhaustive`: `AccessMode`, `FnAccess`, `FnNamespace`, `FnMetadata`, `OptimizationLevel`\n\nNew API\n-------\n\n* `Module::eval_ast_as_new_raw` is made public as a low-level API.\n* `format_map_as_json` is provided globally, which is the same as `to_json` for object maps.\n* `Engine::call_fn_raw_raw` is added to add speed to repeated function calls.\n* `Engine::eval_statements_raw` is added to evaluate a sequence of statements.\n\nNew features\n------------\n\n* A custom state is provided that is persistent during the entire evaluation run. This custom state is a `Dynamic`, which can hold any data, and can be accessed by the host via `EvalContext::tag`, `EvalContext::tag_mut`, `NativeCallContext::tag` and `GlobalRuntimeState.tag`.\n\nEnhancements\n------------\n\n* Improper `switch` case condition syntax is now caught at parse time.\n* `Engine::parse_json` now natively handles nested JSON inputs (using a token remap filter) without needing to replace `{` with `#{`.\n* `to_json` is added to object maps to cheaply convert it to JSON format (`()` is mapped to `null`, all other data types must be supported by JSON)\n* `FileModuleResolver` now accepts a custom `Scope` to provide constants for optimization.\n* New variants, `Start` and `End`, are added to `DebuggerEvent` triggered at the start/end of script evaluation.\n\n\nVersion 1.6.1\n=============\n\nBug fixes\n---------\n\n* Functions with `Dynamic` parameters now work in qualified calls from `import`ed modules.\n* `rhai-repl` now compiles with the new patch version of `rustyline`.\n* `rhai_codegen` dependency is now explicitly `1.4` or higher.\n\nScript-breaking changes\n-----------------------\n\n* `split` now splits a string by whitespaces instead of splitting it into individual characters. This is more in line with common practices.\n* A new function `to_chars` for strings is added to split the string into individual characters.\n\nEnhancements\n------------\n\n* Strings are now directly iterable (via `for .. in`) yielding individual characters.\n\n\nVersion 1.6.0\n=============\n\nThis version, in particular, fixes a plugin macro hygiene error for the nightly compiler:\n\n```text\nerror[E0425]: cannot find value `args` in this scope\n```\n\nCompiler version\n----------------\n\n* Minimum compiler version is now `1.57` due to [`smartstring`](https://crates.io/crates/smartstring) dependency.\n\nBug fixes\n---------\n\n* Fixed macro hygiene error with nightly compiler.\n* Invalid property or method access such as `a.b::c.d` or `a.b::func()` no longer panics but properly returns a syntax error.\n* `Scope::is_constant` now returns the correct value.\n* Exporting a variable that contains a local function pointer (including anonymous function or closure) now raises a runtime error.\n* Full optimization is now skipped for method calls.\n\nNew features\n------------\n\n* [Type aliases](https://doc.rust-lang.org/reference/items/type-aliases.html) in plugin modules are now used as friendly names for custom types. This makes plugin modules more self-contained when they are used to define a custom type's API.\n\nEnhancements\n------------\n\n* Variable definitions are optimized so that shadowed variables are reused as much as possible to reduce memory consumption.\n* `FnAccess` and `FnNamespace` now implement `Ord` and `PartialOrd`.\n* The `event_handler_map` example is enhanced to prevent shadowing of the state object map.\n* Separation of constants in function calls is removed as its performance benefit is dubious.\n* A function `sleep` is added to block the current thread by a specified number of seconds.\n* `Scope::set_alias` is added to export a variable under a particular alias name.\n* `starts_with` and `ends_with` are added for strings.\n* Variables in modules registered via `register_global_module` can now be accessed in the global namespace.\n* `Dynamic::into_read_only` is added to convert a `Dynamic` value into constant.\n* `Module` now holds a collection of custom types with an API.\n\n\nVersion 1.5.0\n=============\n\nThis version adds a debugging interface, which can be used to integrate a debugger.\n\nBased on popular demand, an option is added to throw exceptions when invalid properties are accessed on object maps (default is to return `()`).\n\nAlso based on popular demand, the `REPL` tool now uses a slightly-enhanced version of [`rustyline`](https://crates.io/crates/rustyline) for line editing and history.\n\nBug fixes\n---------\n\n* In `Scope::clone_visible`, constants are now properly cloned as constants.\n* Variables introduced inside `try` blocks are now properly cleaned up upon an exception.\n* Off-by-one error in character positions after a comment line is now fixed.\n* Globally-defined constants are now encapsulated correctly inside a loaded module and no longer spill across call boundaries.\n* Type names display is fixed.\n* Exceptions thrown inside function calls now unwrap correctly when `catch`-ed.\n* Error messages for certain invalid property accesses are fixed.\n\nScript-breaking changes\n-----------------------\n\n* For consistency with the `import` statement, the `export` statement no longer exports multiple variables.\n* Appending a BLOB to a string (via `+`, `+=`, `append` or string interpolation) now treats the BLOB as a UTF-8 encoded string.\n* Appending a string/character to a BLOB (via `+=` or `append`) now adds the string/character as a UTF-8 encoded byte stream.\n\nNew features\n------------\n\n* A debugging interface is added.\n* A new bin tool, `rhai-dbg` (aka _The Rhai Debugger_), is added to showcase the debugging interface.\n* A new package, `DebuggingPackage`, is added which contains the `back_trace` function to get the current call stack anywhere in a script.\n* `Engine::set_fail_on_invalid_map_property` is added to control whether to raise an error (new `EvalAltResult::ErrorPropertyNotFound`) when invalid properties are accessed on object maps.\n* `Engine::set_allow_shadowing` is added to allow/disallow variables _shadowing_, with new errors `EvalAltResult::ErrorVariableExists` and `ParseErrorType::VariableExists`.\n* `Engine::on_def_var` allows registering a closure which can decide whether a variable definition is allow to continue, during compilation or runtime, or should fail with an error (`ParseErrorType::ForbiddenVariable` or `EvalAltResult::ErrorForbiddenVariable`).\n* A new syntax for defining custom packages is introduced that removes the need to specify the Rhai crate name (internally uses the `$crate` meta variable).\n\nEnhancements\n------------\n\n* Default features for dependencies (such as `ahash/std` and `num-traits/std`) are no longer required.\n* The `no_module` feature now eliminates large sections of code via feature gates.\n* Debug display of `AST` is improved.\n* `NativeCallContext::call_level()` is added to give the current nesting level of function calls.\n* A new feature, `bin-features`, pulls in all the required features for `bin` tools.\n* `AST` position display is improved:\n  * `Expr::start_position` is added to give the beginning of the expression (not the operator's position).\n  * `StmtBlock` and `Stmt::Block` now keep the position of the closing `}` as well.\n* `EvalAltResult::unwrap_inner` is added to access the base error inside multiple layers of wrappings (e.g. `EvalAltResult::ErrorInFunction`).\n* Yet another new syntax is introduced for `def_package!` that further simplifies the old syntax.\n* A new method `to_blob` is added to convert a string into a BLOB as UTF-8 encoded bytes.\n* A new method `to_array` is added to convert a BLOB into array of integers.\n\nREPL tool changes\n-----------------\n\nThe REPL bin tool, `rhai-rpl`, has been enhanced.\n\n### Build changes\n\n* The `rustyline` feature is now required in order to build `rhai-repl`.\n* Therefore, `rhai-repl` is no longer automatically built when using a simple `cargo build` with default features.\n\n### Line editor\n\n* `rhai-repl` now uses a modified version of [`rustyline`](https://crates.io/crates/rustyline) as a line editor with history.\n* Ctrl-Enter can now be used to enter multiple lines without having to attach the `\\` continuation character the end of each line.\n* Bracketed paste is supported, even on Windows (version 10 or above), so pasting code directly into `rhai-repl` is made much more convenient.\n\n### New commands\n\n* `strict` to turn on/off _Strict Variables Mode_.\n* `optimize` to turn on/off script optimization.\n* `history` to print lines history.\n* `!!`, `!`_num_, `!`_text_ and `!?`_text_ to recall a history line.\n* `keys` to print all key bindings.\n\n\nVersion 1.4.1\n=============\n\nThis is primarily a bug-fix version which fixes a large number of bugs.\n\nBug fixes\n---------\n\n* Expressions such as `x = x + 1` no longer panics.\n* Padding arrays with another array via `pad` no longer loops indefinitely.\n* `chop` for arrays and BLOB's now works properly.\n* `set_bit` for bit-flags with negative index now works correctly.\n* Misnamed `params` field `name` in the JSON output of `Engine::gen_fn_metadata_to_json` is fixed (was incorrectly named `type`).\n* Fixes a potential `unsafe` violation in `for` loop.\n* Missing `to_hex`, `to_octal` and `to_binary` for `i128` and `u128` are added.\n* `remove` for arrays and BLOB's now treat negative index correctly.\n* `parse_int` now works properly for negative numbers.\n* `Engine::gen_fn_signatures` now generates signatures for external packages registered via `Engine::register_global_module`.\n* `\\r\\n` pairs are now recognized correctly for doc-comments.\n\nEnhancements\n------------\n\n* Formatting of return types in functions metadata info is improved.\n* Use `SmartString` for `Scope` variable names and remove `unsafe` lifetime casting.\n* Functions in the standard library now have doc-comments (which can be obtained via `Engine::gen_fn_metadata_to_json`).\n* `get` and `set` methods are added to arrays, BLOB's, object maps and strings.\n\n\nVersion 1.4.0\n=============\n\nThis version adds support for integer _ranges_ via the `..` and `..=` operators.\nMany standard API's are extended with range parameters where appropriate.\n\nScript-breaking changes\n-----------------------\n\n* `is` is (pun intended) now a reserved keyword to prepare for possible future type checking expressions (e.g. `x is \"string\"`).\n\nBreaking changes\n----------------\n\n* `LogicPackage` is removed from `CorePackage`.\n* Bit-field functions are moved into a new `BitFieldPackage` (used to be in `LogicPackage`) which makes more sense.\n\nBug fixes\n---------\n\n* Custom syntax now works properly inside binary expressions and with method calls.\n* Hex numbers with the high-bit set now parse correctly into negative integer numbers.\n* Constructing a literal array or object map now checks for size limits for each item instead of at the very end when it is already too late.\n* Non-`INT` integer types are now treated exactly as custom types under `only_i64` and `only_i32`.\n* Calling `pad` on an array now checks for total size over limit after each item added.\n\nNew features\n------------\n\n* Added support for integer _ranges_ via the `..` and `..=` operators.\n* Added `EvalAltResult::ErrorCustomSyntax` to catch errors in custom syntax, which should not happen unless an `AST` is compiled on one `Engine` but evaluated on another unrelated `Engine`.\n\nEnhancements\n------------\n\n* `BLOB`'s are refined to display in a more compact hex format.\n* A new syntax is introduced for `def_package!` that will replace the old syntax in future versions.\n* Added `NativeCallContext::call_fn` to easily call a function.\n* Doc-comments on plugin module functions are extracted into the functions' metadata.\n\nDeprecated API's\n----------------\n\n* `Expression::get_variable_name` is deprecated in favor of the new `Expression::get_string_value`.\n* The old syntax of `def_package!` is deprecated in favor of the new syntax.\n\n\nVersion 1.3.0\n=============\n\nThis version adds native support for `BLOB`'s (byte arrays), as well as a number of configuration\nsettings to fine-tun language features.\n\nCompiler requirement\n--------------------\n\n* Minimum compiler version is now 1.51.\n\nBug fixes\n---------\n\n* `from_dynamic` now supports deserializing `Option`.\n\nNew features\n------------\n\n* `BLOB` (essentially a byte array) is added as a supported primitive value type parallel to arrays.\n* New options for `Engine` which allows disabling `if`-expressions, `switch`-expressions, statement expressions, anonymous functions and/or looping (i.e. `while`, `loop`, `do` and `for` statements):\n  * `Engine::set_allow_if_expression`\n  * `Engine::set_allow_switch_expression`\n  * `Engine::set_allow_statement_expression`\n  * `Engine::set_allow_anonymous_fn`\n  * `Engine::set_allow_looping`\n* New _strict variables_ mode for `Engine` (enabled via `Engine::set_strict_variables`) to throw parse errors on undefined variable usage. Two new parse error variants, `ParseErrorType::VariableNotFound` and `ParseErrorType::ModuleNotFound`, are added.\n\nEnhancements\n------------\n\n* Two double quotes (`\"\"`) in a string literal now maps to `\"`; two back-ticks (``` `` ```) in a literal string now maps to `` ` ``.\n* Added `Engine::register_type_with_name_raw` to register a custom type based on a fully-qualified type path.\n* Added `into_array` and `into_typed_array` for `Dynamic`.\n* Added `FnPtr::call` and `FnPtr::call_within_context` to simplify calling a function pointer.\n* A function's hashes are included in its JSON metadata to assist in debugging. Each function's `baseHash` field in the JSON object should map directly to the pre-calculated hash in the function call.\n* `Expression` now derefs to `Expr`.\n\nDeprecated and Gated API's\n--------------------------\n\n* `NativeCallContext::new` is deprecated because it is simpler to call a function pointer via `FnPtr::call`.\n* `AST::merge_filtered` and `AST::combine_filtered` are no longer exported under `no_function`.\n* `AST::new` and `AST::new_with_source` are moved under `internals`.\n* `FnPtr::call_dynamic` is deprecated in favor of `FnPtr::call_raw`.\n\n\nVersion 1.2.1\n=============\n\nBug fixes\n---------\n\n* Array methods (such as `map`) taking a closure with captures as argument now works properly.\n\n\nVersion 1.2.0\n=============\n\nBug fixes (potentially script-breaking)\n--------------------------------------\n\n* As originally intended, function calls with a bang (`!`) now operates directly on the caller's scope, allowing variables inside the scope to be mutated.\n* As originally intended, `Engine::XXX_with_scope` API's now properly propagate constants within the provided scope also to _functions_ in the script.\n* Printing of integral floating-point numbers is fixed (used to only prints `0.0`).\n* `func!()` calls now work properly under `no_closure`.\n* Fixed parsing of unary negation such that expressions like `if foo { ... } -x` parses correctly.\n\nNew features\n------------\n\n* `#[cfg(...)]` attributes can now be put directly on plugin functions or function defined in a plugin module.\n* A custom syntax parser can now return a symbol starting with `$$` to inform the implementation function which syntax variant was actually parsed.\n* `AST::iter_literal_variables` is added to extract all top-level literal constant/variable definitions from a script without running it.\n* `Engine::call_fn_dynamic` is deprecated and `Engine::call_fn_raw` is added which allows keeping new variables in the custom scope.\n\nEnhancements\n------------\n\n* Array methods now avoid cloning as much as possible (although most predicates will involve cloning anyway if passed a closure).\n* Array methods that take function pointers (e.g. closures) now optionally take the function name as a string.\n* Array adds the `dedup` method.\n* Array adds a `sort` method with no parameters which sorts homogeneous arrays of built-in comparable types (e.g. `INT`).\n* Inlining is disabled for error-path functions because errors are exceptional and scripts usually fail completely when an error is encountered.\n* The `optimize` module is completely eliminated under `no_optimize`, which should yield smaller code size.\n* `NativeCallContext::position` is added to return the position of the function call.\n* `Scope::clone_visible` is added that copies only the last instance of each variable, omitting all shadowed variables.\n\nDeprecated API's\n----------------\n\n* `NativeCallContext::call_fn_dynamic_raw` is deprecated and `NativeCallContext::call_fn_raw` is added.\n* `From<EvalAltResult>` for `Result<T, Box<EvalAltResult> >` is deprecated so it will no longer be possible to do `EvalAltResult::ErrorXXXXX.into()` to convert to a `Result`; instead, `Err(EvalAltResult:ErrorXXXXX.into())` must be used. Code is clearer if errors are explicitly wrapped in `Err`.\n\n\nVersion 1.1.2\n=============\n\nBug fixes\n---------\n\n* `0.0` now prints correctly (used to print `0e0`).\n* Unary operators are now properly recognized as an expression statement.\n* Reverses a regression on string `+` operations.\n* The global namespace is now searched before packages, which is the correct behavior.\n\n\nVersion 1.1.1\n=============\n\nBug fixes\n---------\n\n* Assignment to indexing expression with dot expressions inside no longer cause a compilation error.\n* The `no_module` and `internals` features now work together without a compilation error.\n* String literal operations (such as `\"hello\" + \", world\"`) now optimizes correctly.\n\n\nVersion 1.1.0\n=============\n\nBug fixes\n---------\n\n* Custom syntax starting with a disabled standard keyword now works properly.\n* When calling `Engine::call_fn`, new variables defined during evaluation of the body script are removed and no longer spill into the function call.\n* `NamespaceRef::new` is fixed.\n\nEnhancements\n------------\n\n### `Engine` API\n\n* `Engine::consume_XXX` methods are renamed to `Engine::run_XXX` to make meanings clearer. The `consume_XXX` API is deprecated.\n* `Engine::register_type_XXX` are now available even under `no_object`.\n* Added `Engine::on_parse_token` to allow remapping certain tokens during parsing.\n* Added `Engine::const_empty_string` to merge empty strings into a single instance.\n\n### Custom Syntax\n\n* `$symbol$` is supported in custom syntax to match any symbol.\n* Custom syntax with `$block$`, `}` or `;` as the last symbol are now self-terminating (i.e. no need to attach a terminating `;`).\n\n### `Dynamic` Values\n\n* `Dynamic::as_string` and `Dynamic::as_immutable_string` are deprecated and replaced by `into_string` and `into_immutable_string` respectively.\n* Added a number of constants to `Dynamic`.\n* Added a number of constants and `fromXXX` constant methods to `Dynamic`.\n* Added `sin`, `cos` and `tan` for `Decimal` values.\n\n### `Decimal` Values\n\n* `parse_float()`, `PI()` and `E()` now defer to `Decimal` under `no_float` if `decimal` is turned on.\n* Added `log10()` for `Decimal`.\n* `ln` for `Decimal` is now checked and won't panic.\n\n### String Values\n\n* `SmartString` now uses `LazyCompact` instead of `Compact` to minimize allocations.\n* Added `pop` for strings.\n* Added `ImmutableString::ptr_eq` to test if two strings point to the same allocation.\n* The `serde` feature of `SmartString` is turned on under `metadata` to make `Map` serializable.\n\n### `Scope` API\n\n* `Scope::set_value` now takes anything that implements `Into<Cow<str> >`.\n* Added `Scope::is_constant` to check if a variable is constant.\n* Added `Scope::set_or_push` to add a new variable only if one doesn't already exist.\n\n### `AST` API\n\n* Added `ASTNode::position`.\n* `ReturnType` is removed in favor of option flags for `Stmt::Return`.\n* `Stmt::Break` and `Stmt::Continue` are merged into `Stmt::BreakLoop` via an option flag.\n* `StaticVec` is changed to keep three items inline instead of four.\n\n\nVersion 1.0.6\n=============\n\nBug fixes\n---------\n\n* Eliminate unnecessary property write-back when accessed via a getter since property getters are assumed to be _pure_.\n* Writing to a property of an indexed valued obtained via an indexer now works properly by writing back the changed value via an index setter.\n\nEnhancements\n------------\n\n* `MultiInputsStream`, `ParseState`, `TokenIterator`, `IdentifierBuilder` and `AccessMode` are exported under the `internals` feature.\n\n\nVersion 1.0.5\n=============\n\nBug fixes\n---------\n\n* `FloatWrapper` is no longer erroneously exported under `no_float+internals`.\n* The `sign` function now works properly for float values that are `NaN`.\n\n\nVersion 1.0.4\n=============\n\n* Fixed bug with `catch` variable used in `catch` block.\n\n\nVersion 1.0.2\n=============\n\nBug fixes\n---------\n\n* Fixed bug in method call followed by an array indexing.\n\n\nVersion 1.0.1\n=============\n\nBug fixes\n---------\n\n* Fixed bug in using indexing/dotting inside index bracket.\n* `while` and `loop` statements are no longer considered _pure_ (since a loop can go on forever and this is a side effect).\n\n\nVersion 1.0.0\n=============\n\nThe official version `1.0`.\n\nAlmost the same version as `0.20.3` but with deprecated API's removed.\n\nBug fixes\n---------\n\n* Fixed infinite loop in certain script optimizations.\n* Building for `no-std` no longer requires patching `smartstring`.\n* Parsing a lone `return` or `throw` without a semicolon at the end of a block no longer raises an error.\n\nBreaking changes\n----------------\n\n* All deprecated API's (e.g. the `RegisterFn` and `RegisterResultFn` traits) are removed.\n* `Module::set_id` is split into `Module::set_id` and `Module::clear_id` pair.\n* `begin`, `end`, `each`, `then`, `unless` are no longer reserved keywords.\n\nEnhancements\n------------\n\n* New methods `is_odd`, `is_even` for integers, and `is_zero` for all numbers.\n* `From<BTreeSet>` and `From<HashSet>` are added for `Dynamic`, which create object maps with `()` values.\n\n\nVersion 0.20.3\n==============\n\nThis version adds support to index into an integer number, treating it as a bit-field.\n\nBug fixes\n---------\n\n* Fixed incorrect optimization regarding chain-indexing with non-numeric index.\n* Variable values are checked for over-sized violations after assignments and setters.\n\nBreaking changes\n----------------\n\n* To keep the API consistent, strings are no longer iterable by default.  Use the `chars` method to iterate through the characters in a string.\n* `Dynamic::take_string` and `Dynamic::take_immutable_string` are renamed to `Dynamic::as_string` and `Dynamic::as_immutable_string` respectively.\n\nNew features\n------------\n\n* New syntax for `for` statement to include counter variable.\n* An integer value can now be indexed to get/set a single bit.\n* The `bits` method of an integer can be used to iterate through its bits.\n* New `$bool$`, `$int$`, `$float$` and `$string$` expression types for custom syntax.\n* New methods `to_hex`, `to_octal` and `to_binary` for integer numbers.\n* New methods `to_upper`, `to_lower`, `make_upper`, `make_lower` for strings/characters.\n\n\nVersion 0.20.2\n==============\n\nThis version adds a number of convenience features:\n\n* Ability for a `Dynamic` to hold an `i32` _tag_ of arbitrary data\n\n* Simplifies dynamic properties access by falling back to an indexer (passing the name of the property as a string) when a property is not found.\n\nBug fixes\n---------\n\n* Propagation of constants held in a custom scope now works properly instead of always replacing by `()`.\n\nBreaking changes\n----------------\n\n* `Engine::disable_doc_comments` is removed because doc-comments are now placed under the `metadata` feature flag.\n* Registering a custom syntax now only requires specifying whether the `Scope` is adjusted (i.e. whether variables are added or removed). There is no need to specify the number of variables added/removed.\n* Assigning to a property of a constant is now allowed and no longer raise an `EvalAltResult::ErrorAssignmentToConstant` error. This is to facilitate the Singleton pattern. Registered setter functions are automatically guarded against setters calling on constants and will continue to raise errors unless the `pure` attribute is present (for plugins).\n* If a property getter/setter is not found, an indexer with string index, if any, is tried.\n* The indexers API (`Engine::register_indexer_XXX` and `Module::set_indexer_XXX`) are now also exposed under `no_index`.\n\nNew features\n------------\n\n* Each `Dynamic` value can now contain arbitrary data (type `i32`) in the form of a _tag_. This is to use up otherwise wasted space in the `Dynamic` type.\n* A new internal feature `no_smartstring` to turn off `SmartString` for those rare cases that it is needed.\n* `DynamicReadLock` and `DynamicWriteLoc` are exposed under `internals`.\n* `From< Shared< Locked<Dynamic> > >` is added for `Dynamic` mapping directly to a shared value, together with support for `Dynamic::from`.\n* An indexer with string index acts as a _fallback_ to a property getter/setter.\n\nEnhancements\n------------\n\n* Registering a custom syntax now only requires specifying whether the `Scope` is adjusted (i.e. whether variables are added or removed). This allows more flexibility for cases where the number of new variables declared depends on internal logic.\n* Putting a `pure` attribute on a plugin property/index setter now enables it to be used on constants.\n\n\nVersion 0.20.1\n==============\n\nThis version enables functions to access constants declared at global level via the special `global` module.\n\nBug fixes\n---------\n\n* Fixed bug when position is zero in `insert` and `split_at` methods for arrays.\n* Indexing operations with pure index values are no longer considered pure due to the possibility of indexers.\n\nBreaking changes\n----------------\n\n* `Dynamic::is_shared` and `Dynamic::is_locked` are removed under the `no_closure` feature. They used to always return `false`.\n* `Engine::call_fn` now evaluates the `AST` before calling the function.\n* `Engine::on_progress` is disabled with `unchecked`.\n\nEnhancements\n------------\n\n* The crate [`no-std-compat`](https://crates.io/crates/no_std_compat) is used to compile for `no-std`. This removes the need to use a special `crate::stdlib` namespace for `std` imports.\n\nNew features\n------------\n\n* A module called `global` is automatically created to hold global-level constants, which can then be accessed from functions.\n* A new feature `no_position` is added to turn off position tracking during parsing to squeeze out the last drop of performance.\n\n\nVersion 0.20.0\n==============\n\nThis version adds string interpolation with `` `... ${`` ... ``} ...` `` syntax.\n\n`switch` statement cases can now have conditions.\n\nNegative indices for arrays and strings are allowed and now count from the end (-1 = last item/character).\n\nBug fixes\n---------\n\n* Property setter op-assignments now work properly.\n* Off-by-one bug in `Array::drain` method with range is fixed.\n\nBreaking changes\n----------------\n\n* Negative index to an array or string yields the appropriate element/character counting from the _end_.\n* The default `_` case of a `switch` statement now must be the last case, together with two new error variants: `EvalAltResult::WrongSwitchDefaultCase` and `EvalAltResult::WrongSwitchCaseCondition`.\n* `ModuleResolver` trait methods take an additional parameter `source_path` that contains the path of the current environment. This is to facilitate loading other script files always from the current directory.\n* `FileModuleResolver` now resolves relative paths under the source path if there is no base path set.\n* `FileModuleResolver::base_path` now returns `Option<&str>` which is `None` if there is no base path set.\n* Doc-comments now require the `metadata` feature.\n\nEnhancements\n------------\n\n* `Array::drain` and `Array::retain` methods with predicate now scan the array in forward order instead of in reverse.\n\nNew features\n------------\n\n* String interpolation support is added via the `` `... ${`` ... ``} ...` `` syntax.\n* `FileModuleResolver` resolves relative paths under the parent path (i.e. the path holding the script that does the loading). This allows seamless cross-loading of scripts from a directory hierarchy instead of having all relative paths load from the current working directory.\n* Negative index to an array or string yields the appropriate element/character counting from the _end_.\n* `switch` statement cases can now have an optional `if` clause.\n\n\nVersion 0.19.15\n===============\n\nThis version replaces all internal usage of `HashMap` with `BTreeMap`, which should result\nin some speed improvement because a `BTreeMap` is leaner when the number of items held is small.\nMost, if not all, collections in Rhai hold very few data items, so this is a typical scenario of\nmany tiny-sized collections.\n\nThe Rhai object map type, `Map`, used to be an alias to `HashMap` and is now aliased to `BTreeMap`\ninstead. This is also because, in the vast majority of usage cases, the number of properties held by\nan object map is small.\n\n`HashMap` and `BTreeMap` have almost identical public API's so this change is unlikely to break\nexisting code.\n\n[`SmartString`](https://crates.io/crates/smartstring) is used to store identifiers (which tend to\nbe short, fewer than 23 characters, and ASCII-based) because they can usually be stored inline.\n`Map` keys now also use [`SmartString`](https://crates.io/crates/smartstring).\n\nIn addition, there is now support for line continuation in strings (put `\\` at the end of line) as\nwell as multi-line literal strings (wrapped by back-ticks: `` `...` ``).\n\nFinally, all function signature/metadata methods are now grouped under the umbrella `metadata` feature.\nThis avoids spending precious resources maintaining metadata for functions for the vast majority of\nuse cases where such information is not required.\n\n\nBug fixes\n---------\n\n* The feature flags `no_index + no_object` now compile without errors.\n\nBreaking changes\n----------------\n\n* The traits `RegisterFn` and `RegisterResultFn` are removed.  `Engine::register_fn` and `Engine::register_result_fn` are now implemented directly on `Engine`.\n* `FnPtr::call_dynamic` now takes `&NativeCallContext` instead of consuming it.\n* All `Module::set_fn_XXX` methods are removed, in favor of `Module::set_native_fn`.\n* `Array::reduce` and `Array::reduce_rev` now take a `Dynamic` as initial value instead of a function pointer.\n* `protected`, `super` are now reserved keywords.\n* The `Module::set_fn_XXX` API now take `&str` as the function name instead of `Into<String>`.\n* The _reflections_ API such as `Engine::gen_fn_signatures`, `Module::update_fn_metadata` etc. are put under the `metadata` feature gate.\n* The shebang `#!` is now a reserved symbol.\n* Shebangs at the very beginning of script files are skipped when loading them.\n* [`SmartString`](https://crates.io/crates/smartstring) is used for identifiers by default. Currently, a PR branch is pulled for `no-std` builds. The official crate will be used once `SmartString` is fixed to support `no-std`.\n* `Map` is now an alias to `BTreeMap<SmartString, Dynamic>` instead of `HashMap` because most object maps hold few properties.\n* `EvalAltResult::FnWrongDefinition` is renamed `WrongFnDefinition` for consistency.\n\nNew features\n------------\n\n* Line continuation (via `\\`) and multi-line literal strings (wrapped with `` ` ``) support are added.\n* Rhai scripts can now start with a shebang `#!` which is ignored.\n\nEnhancements\n------------\n\n* Replaced all `HashMap` usage with `BTreeMap` for better performance because collections in Rhai are tiny.\n* `Engine::register_result_fn` no longer requires the successful return type to be `Dynamic`.  It can now be any clonable type.\n* `#[rhai_fn(return_raw)]` can now return `Result<T, Box<EvalAltResult> >` where `T` is any clonable\n  type instead of `Result<Dynamic, Box<EvalAltResult> >`.\n* `Dynamic::clone_cast` is added to simplify casting from a `&Dynamic`.\n\n\nVersion 0.19.14\n===============\n\nThis version runs faster due to optimizations done on AST node structures. It also fixes a number of\npanic bugs related to passing shared values as function call arguments.\n\nBug fixes\n---------\n\n* Panic when passing a shared string into a registered function as `&str` argument is fixed.\n* Panic when calling `switch` statements on custom types is fixed.\n* Potential overflow panics in `range(from, to, step)` is fixed.\n* `&mut String` parameters in registered functions no longer panic when passed a string.\n* Some expressions involving shared variables now work properly, for example `x in shared_value`, `return shared_value`, `obj.field = shared_value` etc. Previously, the resultant value is still shared which is counter-intuitive.\n* Errors in native Rust functions now contain the correct function call positions.\n* Fixed error types in `EvalAltResult::ErrorMismatchDataType` which were swapped.\n\nBreaking changes\n----------------\n\n* `Dynamic::as_str` is removed because it does not properly handle shared values.\n* Zero step in the `range` function now raises an error instead of creating an infinite stream.\n* Error variable captured by `catch` is now an _object map_ containing error fields.\n* `EvalAltResult::clear_position` is renamed `EvalAltResult::take_position` and returns the position taken.\n* `private` functions in an `AST` can now be called with `call_fn` etc.\n* `NativeCallContext::call_fn_dynamic_raw` no longer has the `pub_only` parameter.\n* `Module::update_fn_metadata` input parameter is changed.\n* Function keywords (e.g. `type_of`, `eval`, `Fn`) can no longer be overloaded. It is more trouble than worth. To disable these keywords, use `Engine::disable_symbol`.\n* `is_def_var` and `is_def_fn` are now reserved keywords.\n* `Engine::id` field is removed because it is never used.\n* `num-traits` is now a required dependency.\n* The `in` operator is now implemented on top of the `contains` function and is no longer restricted to a few specific types.\n* `EvalAltResult::ErrorInExpr` is removed because the `in` operator now calls `contains`.\n* The methods `AST::walk`, `Expr::walk`, `Stmt::walk` and `ASTNode::walk` and the callbacks they take now return `bool` to optionally terminate the recursive walk.\n\nEnhancements\n------------\n\n* Layout of AST nodes is optimized to reduce redirections, so speed is improved.\n* Function calls are more optimized and should now run faster.\n* `range` function now supports negative step and decreasing streams (i.e. to < from).\n* More information is provided to the error variable captured by the `catch` statement in an _object map_.\n* Previously, `private` functions in an `AST` cannot be called with `call_fn` etc. This is inconvenient when trying to call a function inside a script which also serves as a loadable module exporting part (but not all) of the functions. Now, all functions (`private` or not) can be called in an `AST`. The `private` keyword is relegated to preventing a function from being exported.\n* `Dynamic::as_unit` just for completeness sake.\n* `bytes` method added for strings to get length quickly (if the string is ASCII-only).\n* `FileModuleResolver` can now enable/disable caching.\n* Recursively walking an `AST` can now be terminated in the middle.\n\n\nVersion 0.19.13\n===============\n\nThis version introduces functions with `Dynamic` parameters acting as wildcards.\n\nBug fixes\n---------\n\n* Bug in `Position::is_beginning_of_line` is fixed.\n\nBreaking changes\n----------------\n\n* For plugin functions, constants passed to methods (i.e. `&mut` parameter) now raise an error unless the functions are marked with `#[rhai_fn(pure)]`.\n* Visibility (i.e. `pub` or not) for generated _plugin_ modules now follow the visibility of the underlying module.\n* Comparison operators between the sames types or different _numeric_ types now throw errors when they're not defined instead of returning the default. Only comparing between _different_ types will return the default.\n* Default stack-overflow and top-level expression nesting limits for release builds are lowered to 64 from 128.\n* `Engine::call_fn_dynamic` takes an additional parameter to optionally evaluate the given `AST` before calling the function.\n\nNew features\n------------\n\n* Functions are now allowed to have `Dynamic` arguments.\n* `#[rhai_fn(pure)]` attribute to mark a plugin function with `&mut` parameter as _pure_ so constants can be passed to it. Without it, passing a constant value into the `&mut` parameter will now raise an error.\n\nEnhancements\n------------\n\n* Built-in operators between `FLOAT`/[`Decimal`](https://crates.io/crates/rust_decimal) and `INT` are now implemented for more speed under those cases.\n* Error position in `eval` statements is now wrapped in an `EvalAltResult::ErrorInFunctionCall`.\n* `Position` now implements `Add` and `AddAssign`.\n* `Scope` now implements `IntoIterator`.\n* Strings now have the `-`/`-=` operators and the `remove` method to delete a sub-string/character.\n* Strings now have the `split_rev` method and variations of `split` with maximum number of segments.\n* Arrays now have the `split` method.\n* Comparisons between `FLOAT`/[`Decimal`](https://crates.io/crates/rust_decimal) and `INT` are now built in.\n* Comparisons between string and `char` are now built in.\n* `Engine::call_fn_dynamic` can now optionally evaluate the given `AST` before calling the function.\n\n\nVersion 0.19.12\n===============\n\nThis version is an incremental release with a number of enhancements and bug fixes.\n\nNotice that there are a number of breaking changes, especially with regards to replacing the `~`\nexponential  operator with `**`, and the addition of the `decimal` feature that turns on\n[`Decimal`](https://crates.io/crates/rust_decimal) support.\n\nBug fixes\n---------\n\n* Empty statements (i.e. statements with only one `;`) now parse correctly and no longer hang.\n* `continue`, `break` and `return` statements no longer panic inside a `try .. catch` block.\n* `round` function for `f64` is now implemented correctly.\n\nBreaking changes\n----------------\n\n* In order to be consistent with other scripting languages:\n  * the power/exponentiation operator is changed from `~` to `**`; `~` is now a reserved symbol\n  * the power/exponentiation operator now binds to the right\n  * trigonometry functions now take radians and return radians instead of degrees\n* `Dynamic::into_shared` is no longer available under `no_closure`. It used to panic.\n* `Token::is_operator` is renamed to `Token::is_symbol`.\n* `AST::clone_functions_only_filtered`, `AST::merge_filtered`, `AST::combine_filtered` and `AST::retain_functions` now take `Fn` instead of `FnMut` as the filter predicate.\n\nNew features\n------------\n\n* Scientific notation is supported for floating-point number literals.\n* A new feature, `decimal`, enables the [`Decimal`](https://crates.io/crates/rust_decimal) data type. When both `no_float` and `decimal` features are enabled, floating-point literals parse to `Decimal`.\n\nEnhancements\n------------\n\n* Functions resolution cache is used in more cases, making repeated function calls faster.\n* Added `atan(x, y)` and `hypot(x, y)` to `BasicMathPackage`.\n* Added standard arithmetic operators between `FLOAT`/[`Decimal`](https://crates.io/crates/rust_decimal) and `INT`.\n\n\nVersion 0.19.11\n===============\n\nThis version streamlines compiling for WASM.\n\nRust compiler minimum version is raised to 1.49.\n\nBug fixes\n---------\n\n* Parameters passed to plugin module functions were sometimes erroneously consumed. This is now fixed.\n* Fixes compilation errors in `metadata` feature build.\n* Stacking `!` operators now work properly.\n* Off-by-one error in `insert` method for arrays is fixed.\n* Invalid property access now throws the appropriate error instead of panics.\n\nBreaking changes\n----------------\n\n* Rust compiler requirement raised to 1.49.\n* `NativeCallContext::new` taker an additional parameter containing the name of the function called.\n* `Engine::set_doc_comments` is renamed `Engine::enable_doc_comments`.\n\nNew features\n------------\n\n* Two new features, `wasm-bindgen` and `stdweb`, to specify the JS interop layer for WASM builds. `wasm-bindgen` used to be required.\n\nEnhancements\n------------\n\n* `ahash` is used to hash function call parameters. This should yield speed improvements.\n* `Dynamic` and `ImmutableString` now implement `serde::Serialize` and `serde::Deserialize`.\n* `NativeCallContext` has a new field containing the name of the function called, useful when the same Rust function is registered under multiple names in Rhai.\n* New functions `PI()` and `E()` to return mathematical constants, and `to_radians` and `to_degrees` to convert between radians and degrees.\n\n\nVersion 0.19.10\n===============\n\nBug fixes\n---------\n\n* `no_std` feature now compiles correctly (bug introduced in `0.19.9`).\n* Bug in `FileModuleResolver::clear_cache_for_path` path mapping fixed.\n* Some optimizer fringe cases are fixed - related to constants propagation when the evil `eval` is present.\n\nBreaking changes\n----------------\n\n* The error variant `EvalAltResult::ErrorInFunctionCall` has a new parameter holding the _source_ of the function.\n* `ParseErrorType::WrongFnDefinition` is renamed `FnWrongDefinition`.\n* Redefining an existing function within the same script now throws a new `ParseErrorType::FnDuplicatedDefinition`. This is to prevent accidental overwriting an earlier function definition.\n* `AST::set_source` is now split into `AST::set_source` and `AST::clear_source`.\n\nNew features\n------------\n\n* `Engine::compile_into_self_contained` compiles a script into an `AST` and _eagerly_ resolves all `import` statements with string literal paths. The resolved modules are directly embedded into the `AST`. When the `AST` is later evaluated, `import` statements directly yield the pre-resolved modules without going through the resolution process once again.\n* `AST::walk`, `Stmt::walk` and `Expr::walk` internal API's to recursively walk an `AST`.\n\nEnhancements\n------------\n\n* Source information is provided when there is an error within a call to a function defined in another module.\n* Source information is provided to the `NativeCallContext` for native Rust functions.\n* `EvalAltResult::clear_position` to clear the position information of an error - useful when only the message is needed and the position doesn't need to be printed out.\n* A new optional function `resolve_ast` is added to the `ModuleResolver` trait for advanced usage.\n\n\nVersion 0.19.9\n==============\n\nThis version fixes a bug introduced in `0.19.8` which breaks property access\nwithin closures.\n\nIt also removes the confusing differences between _packages_ and _modules_\nby unifying the terminology and API under the global umbrella of _modules_.\n\nBug fixes\n---------\n\n* Fix bug when accessing properties in closures.\n* Fix bug when accessing a deep index with a function call.\n* Fix bug that sometimes allow assigning to an invalid l-value.\n* Fix off-by-one error with `Engine::set_max_call_levels`.\n\nBreaking changes\n----------------\n\n* `Engine::load_package` is renamed `Engine::register_global_module` and now must explicitly pass a shared [`Module`].\n* `Engine::register_module` is renamed `Engine::register_static_module` and now must explicitly pass a shared [`Module`].\n* `Package::get` is renamed `Package::as_shared_module`.\n* `Engine::set_module_resolver` now takes a straight module resolver instead of an `Option`. To disable module resolving, use the new `DummyModuleResolver`.\n\nEnhancements\n------------\n\n* `Scope` is now `Clone + Hash`.\n* `Engine::register_static_module` now supports sub-module paths (e.g. `foo::bar::baz`).\n* `Engine::register_custom_operator` now accepts reserved symbols.\n* `Engine::register_custom_operator` now returns an error if given a precedence of zero.\n* The examples `repl` and `rhai_runner` are moved into `bin` and renamed `rhai-repl` and `rhai-run` respectively.\n\n\nVersion 0.19.8\n==============\n\nThis version makes it easier to generate documentation for a Rhai code base.\n\nEach function defined in an `AST` can optionally attach _doc-comments_ (which, as in Rust,\nare comments prefixed by either `///` or `/**`).  Doc-comments allow third-party tools to\nautomatically generate documentation for functions defined in a Rhai script.\n\nA new API, `Engine::gen_fn_metadata_to_json` and `Engine::gen_fn_metadata_with_ast_to_json`,\npaired with the new `metadata` feature, exports the full list of functions metadata\n(including those in an `AST`) as a JSON document.\n\nThere are also a sizable number of bug fixes.\n\nBug fixes\n---------\n\n* Unary prefix operators `-`, `+` and `!` now bind correctly when applied to an expression. Previously, `-x.len` is parsed as `(-x).len` which is obviously counter-intuitive.\n* Indexing of namespace-qualified variables now work properly, such as `path::to::var[x]`.\n* Constants are no longer propagated by the optimizer if shadowed by a non-constant variable.\n* A constant passed as the `this` parameter to Rhai functions now throws an error if assigned to.\n* Generic type parameter of `Engine::register_iterator` is `IntoIterator` instead of `Iterator`.\n* Fixes parsing of block comments ending with `**/` or inner blocks starting with `//*`.\n\nBreaking changes\n----------------\n\n* `Engine::on_progress` now takes `u64` instead of `&u64`.\n* The closure for `Engine::on_debug` now takes two additional parameters: `source: Option<&str>` and `pos: Position`.\n* `AST::iter_functions` now returns `ScriptFnMetadata`.\n* The parser function passed to `Engine::register_custom_syntax_raw` now takes an additional parameter containing the _look-ahead_ symbol.\n\nNew features\n------------\n\n* `AST::iter_functions` now returns `ScriptFnMetadata` which includes, among others, _doc-comments_ for functions prefixed by `///` or `/**`.\n* _Doc-comments_ can be enabled/disabled with the new `Engine::set_doc_comments` method.\n* A new feature `metadata` is added that pulls in `serde_json` and enables `Engine::gen_fn_metadata_to_json` and `Engine::gen_fn_metadata_with_ast_to_json` which exports the full list of functions metadata (including those inside an `AST`) in JSON format.\n* `Engine::on_debug` provides two additional parameters: `source: Option<&str>` and `pos: Position`, containing the current source (if any) and position of the `debug` statement.\n* `NativeCallContext` and `EvalContext` both expose `source()` which returns the current source, if any.\n\nEnhancements\n------------\n\n* A functions lookup cache is added to make function call resolution faster.\n* Capturing a constant variable in a closure is now supported, with no cloning.\n* A _look-ahead_ symbol is provided to custom syntax parsers, which can be used to parse variable-length symbol streams.\n\n\nVersion 0.19.7\n==============\n\nBug fixes\n---------\n\n* Fixes compilation errors with certain feature flag combinations.\n\nEnhancements\n------------\n\n* Property getters/setters and indexers defined in a plugin module are by default `#[rhai_fn(global)]`.\n* `to_debug` is a new standard function for converting a value into debug format.\n* Arrays and object maps now print values using `to_debug` (if available).\n\n\nVersion 0.19.6\n==============\n\nThis version adds the `switch` statement.\n\nIt also allows exposing selected module functions (usually methods) to the global namespace.\nThis is very convenient when encapsulating the API of a custom Rust type into a module while having methods\nand iterators registered on the custom type work normally.\n\nA new `gen_fn_signatures` API enables enumerating the registered functions of an `Engine` for documentation purposes.\nIt also prepares the way for a future reflection API.\n\nBug fixes\n---------\n\n* Custom syntax that introduces a shadowing variable now works properly.\n\nBreaking changes\n----------------\n\n* `Module::set_fn`, `Module::set_raw_fn` and `Module::set_fn_XXX_mut` all take an additional parameter of `FnNamespace`.\n* `Module::set_fn` takes a further parameter with a list of parameter names/types plus the function return type, if any.\n* `Module::get_sub_module_mut` is removed.\n* `begin`, `end`, `unless` are now reserved keywords.\n* `EvalPackage` is removed in favor of `Engine::disable_symbol`.\n\nNew features\n------------\n\n* New `switch` statement.\n* New `do ... while` and `do ... until` statements.\n* New `Engine::gen_fn_signatures`, `Module::gen_fn_signatures` and `PackagesCollection::gen_fn_signatures` to generate a list of signatures for functions registered.\n* New `Engine::register_static_module` to register a module as a sub-module in the global namespace.\n* New `set_exported_global_fn!` macro to register a plugin function and expose it to the global namespace.\n* `Module::set_fn_XXX_mut` can expose a module function to the global namespace. This is convenient when registering an API for a custom type.\n* `Module::set_getter_fn`, `Module::set_setter_fn`, `Module::set_indexer_get_fn`, `Module::set_indexer_set_fn` all expose the function to the global namespace by default. This is convenient when registering an API for a custom type.\n* New `Module::update_fn_metadata` to update a module function's parameter names and types.\n* New `#[rhai_fn(global)]` and `#[rhai_fn(internal)]` attributes to determine whether a function defined in a plugin module should be exposed to the global namespace. This is convenient when defining an API for a custom type.\n* New `get_fn_metadata_list` to get the metadata of all script-defined functions in scope.\n\nEnhancements\n------------\n\n* New constants under `Dynamic` including `UNIT`, `TRUE`, `FALSE`, `ZERO`, `ONE` etc.\n* Floating-point numbers ending with a decimal point without a trailing `0` are supported.\n\n\nVersion 0.19.5\n==============\n\nThis version fixes a bug that prevents compilation with the `internals` feature.\nIt also speeds up importing modules.\n\nBug fixes\n---------\n\n* Fixes compilation error when using the `internals` feature.  Bug introduced in `0.19.4`.\n* Importing script files recursively no longer panics.\n\nBreaking changes\n----------------\n\n* Modules imported at global level can now be accessed in functions.\n* `ModuleResolver::resolve` now returns `Shared<Module>` for better resources sharing when loading modules.\n* `ParseErrorType::DuplicatedExport` is removed as multiple `export`'s are now allowed.\n\nEnhancements\n------------\n\n* Modules imported via `import` statements at global level can now be used in functions. There is no longer any need to re-`import` the modules at the beginning of each function block.\n* Modules imported via `import` statements are encapsulated into the `AST` when loading a module from a script file.\n* `export` keyword can now be tagged onto `let` and `const` statements as a short-hand, e.g.: `export let x = 42;`\n* Variables can now be `export`-ed multiple times under different names.\n* `index_of`, `==` and `!=` are defined for arrays.\n* `==` and `!=` are defined for object maps.\n\n\nVersion 0.19.4\n==============\n\nThis version basically cleans up the code structure in preparation for a potential `1.0` release in the future.\nMost scripts should see a material speed increase.\n\nThis version also adds a low-level API for more flexibility when defining custom syntax.\n\nBug fixes\n---------\n\n* Fixes `Send + Sync` for `EvalAltResult` under the `sync` feature. Bug introduced with `0.19.3`.\n\nBreaking changes\n----------------\n\n* Custom syntax can no longer start with a keyword (even a _reserved_ one), even if it has been disabled. That is to avoid breaking scripts later when the keyword is no longer disabled.\n\nChanges to Error Handling\n------------------------\n\n* `EvalAltResult::ErrorAssignmentToUnknownLHS` is moved to `ParseError::AssignmentToInvalidLHS`. `ParseError::AssignmentToCopy` is removed.\n* `EvalAltResult::ErrorDataTooLarge` is simplified.\n* `Engine::on_progress` closure signature now returns `Option<Dynamic>` with the termination value passed on to `EvalAltResult::ErrorTerminated`.\n* `ParseErrorType::BadInput` now wraps a `LexError` instead of a text string.\n\nNew features\n------------\n\n* `f32_float` feature to set `FLOAT` to `f32`.\n* Low-level API for custom syntax allowing more flexibility in designing the syntax.\n* `Module::fill_with` to poly-fill a module with another.\n* Scripts terminated via `Engine::on_progress` can now pass on a value as a termination token.\n\nEnhancements\n------------\n\n* Essential AST structures like `Expr` and `Stmt` are packed into smaller sizes (16 bytes and 32 bytes on 64-bit), stored inline for more cache friendliness, and de-`Box`ed as much as possible.\n* `Scope` is optimized for cache friendliness.\n\n\nVersion 0.19.3\n==============\n\nThis version streamlines some of the advanced API's, and adds the `try` ... `catch` statement\nto catch exceptions.\n\nBreaking changes\n----------------\n\n* `EvalAltResult::ErrorReadingScriptFile` is removed in favor of the new `EvalAltResult::ErrorSystem`.\n* `EvalAltResult::ErrorLoopBreak` is renamed to `EvalAltResult::LoopBreak`.\n* `Engine::register_raw_fn` and `FnPtr::call_dynamic` function signatures have changed.\n* Callback signatures to `Engine::on_var` and `Engine::register_custom_syntax` have changed.\n* `EvalAltResult::ErrorRuntime` now wraps a `Dynamic` instead of a string.\n* Default call stack depth for `debug` builds is reduced to 8 (from 12) because it keeps overflowing the stack in GitHub CI!\n* Keyword `thread` is reserved.\n\nNew features\n------------\n\n* The plugins system is enhanced to support functions taking a `NativeCallContext` as the first parameter.\n* `throw` statement can now throw any value instead of just text strings.\n* New `try` ... `catch` statement to catch exceptions.\n\nEnhancements\n------------\n\n* Calling `eval` or `Fn` in method-call style, which is an error, is now caught during parsing.\n* `func!()` call style is valid even under `no_closure` feature.\n\n\nVersion 0.19.2\n==============\n\nBug fix on call module functions.\n\n\nVersion 0.19.1\n==============\n\nThis version adds a variable resolver with the ability to short-circuit variable access,\nplus a whole bunch of array methods.\n\nBreaking changes\n----------------\n\n* `AST::iter_functions` now returns an iterator instead of taking a closure.\n* `Module::get_script_function_by_signature` renamed to `Module::get_script_fn` and returns `&<Shared<ScriptFnDef> >`.\n* `Module::num_fn`, `Module::num_var` and `Module::num_iter` are removed and merged into `Module::count`.\n* The `merge_namespaces` parameter to `Module::eval_ast_as_new` is removed and now defaults to `true`.\n* `GlobalFileModuleResolver` is removed because its performance gain over the `FileModuleResolver` is no longer very significant.\n* The following `EvalAltResult` variants are removed and merged into `EvalAltResult::ErrorMismatchDataType`: `ErrorCharMismatch`, `ErrorNumericIndexExpr`, `ErrorStringIndexExpr`, `ErrorImportExpr`, `ErrorLogicGuard`, `ErrorBooleanArgMismatch`\n* `Scope::iter_raw` returns an iterator with an additional field indicating whether the variable is constant or not.\n* `rhai::ser` and `rhai::de` namespaces are merged into `rhai::serde`.\n* New reserved symbols: `++`, `--`, `..`, `...`.\n* Callback signature for custom syntax implementation function is changed to allow for more flexibility.\n* Default call stack depth for `debug` builds is reduced to 12 (from 16).\n* Precedence for `~` is raised, while `in` is moved below logic comparison operators.\n\nNew features\n------------\n\n* New `Engine::on_var` to register a _variable resolver_.\n* `const` statements can now take any expression (or none at all) instead of only constant values.\n* `OptimizationLevel::Simple` now eagerly evaluates built-in binary operators of primary types (if not overloaded).\n* `is_def_var()` to detect if variable is defined, and `is_def_fn()` to detect if script function is defined.\n* `Dynamic::from(&str)` now constructs a `Dynamic` with a copy of the string as value.\n* `AST::combine` and `AST::combine_filtered` allows combining two `AST`'s without creating a new one.\n* `map`, `filter`, `reduce`, `reduce_rev`, `some`, `all`, `extract`, `splice`, `chop` and `sort` functions for arrays.\n* New `Module::set_iterable` and `Module::set_iterator` to define type iterators more easily. `Engine::register_iterator` is changed to use the simpler version.\n\nEnhancements\n------------\n\n* Many one-liners and few-liners are now marked `#[inline]` or `[inline(always)]`, just in case it helps when LTO is not turned on.\n\n\nVersion 0.19.0\n==============\n\nThe major new feature for this version is _Plugins_ support, powered by procedural macros.\nPlugins make it extremely easy to develop and register Rust functions with an `Engine`.\n\nBug fixes\n---------\n\n* `if` statement with an empty `true` block would not evaluate the `false` block.  This is now fixed.\n* Fixes a bug in `Module::set_fn_4_mut`.\n* Module API's now properly handle `&str` and `String` parameters.\n* Indexers are available under `no_object`.\n* Registered operator-assignment functions (e.g. `+=`) now work correctly.\n\nBreaking changes\n----------------\n\n* `Engine::register_set_result` and `Engine::register_indexer_set_result` now take a function that returns `Result<(), Box<EvalAltResult> >`.\n* `Engine::register_indexer_XXX` and `Module::set_indexer_XXX` panic when the type is `Array`, `Map` or `String`.\n* `EvalAltResult` has a new variant `ErrorInModule` which holds errors when loading an external module.\n* `Module::eval_ast_as_new` now takes an extra boolean parameter, indicating whether to encapsulate the entire module into a separate namespace.\n* Functions in `FileModuleResolver` loaded modules now can cross-call each other in addition to functions in the global namespace. For the old behavior, use `MergingFileModuleResolver` instead.\n* New `EvalAltResult::ErrorInModule` variant capturing errors when loading a module from a script file.\n\nNew features\n------------\n\n* Plugins support via procedural macros.\n* Scripted functions are allowed in packages.\n* `parse_int` and `parse_float` functions for parsing numbers; `split` function for splitting strings.\n* `AST::iter_functions` and `Module::iter_script_fn_info` to iterate functions.\n* Functions iteration functions for `AST` and `Module` now take `FnMut` instead of `Fn`.\n* New `FileModuleResolver` that encapsulates the entire `AST` of the module script, allowing function cross-calling. The old version is renamed `MergingFileModuleResolver`.\n* `+` and `-` operators for timestamps to increment/decrement by seconds.\n\n\nVersion 0.18.3\n==============\n\nBug fixes\n---------\n\n* `Engine::compile_expression`, `Engine::eval_expression` etc. no longer parse anonymous functions and closures.\n* Imported modules now work inside closures.\n* Closures that capture now work under `no_object`.\n\nNew features\n------------\n\n* Adds `Module::combine_flatten` to combine two modules while flattening to the root level.\n\n\nVersion 0.18.2\n==============\n\nBug fixes\n---------\n\n* Fixes bug that prevents calling functions in closures.\n* Fixes bug that erroneously consumes the first argument to a namespace-qualified function call.\n\nBreaking changes\n----------------\n\n* `Module::contains_fn` and `Module::get_script_fn` no longer take the `public_only` parameter.\n\nNew features\n------------\n\n* Adds `Engine::register_get_result`, `Engine::register_set_result`, `Engine::register_indexer_get_result`, `Engine::register_indexer_set_result` API.\n* Adds `Module::combine` to combine two modules.\n* `Engine::parse_json` now also accepts a JSON object starting with `#{`.\n\n\nVersion 0.18.1\n==============\n\nThis version adds:\n\n* Anonymous functions (in Rust closure syntax).  Simplifies creation of single-use ad-hoc functions.\n* Currying of function pointers.\n* Closures - auto-currying of anonymous functions to capture shared variables from the external scope. Use the `no_closure` feature to disable sharing values and capturing.\n* Binding the `this` pointer in a function pointer `call`.\n* Capturing call scope via `func!(...)` syntax.\n\nNew features\n------------\n\n* `call` can now be called function-call style for function pointers - this is to handle builds with `no_object`.\n* Reserve language keywords, such as `print`, `eval`, `call`, `this` etc.\n* `x.call(f, ...)` allows binding `x` to `this` for the function referenced by the function pointer `f`.\n* Anonymous functions are supported in the syntax of a Rust closure, e.g. `|x, y, z| x + y - z`.\n* Custom syntax now works even without the `internals` feature.\n* Currying of function pointers is supported via the new `curry` keyword.\n* Automatic currying of anonymous functions to capture shared variables from the external scope.\n* Capturing of the calling scope for function call via the `func!(...)` syntax.\n* `Module::set_indexer_get_set_fn` is added as a short-hand of both `Module::set_indexer_get_fn` and `Module::set_indexer_set_fn`.\n* New `unicode-xid-ident` feature to allow [Unicode Standard Annex #31](http://www.unicode.org/reports/tr31/) for identifiers.\n* `Scope::iter_raw` returns an iterator with a reference to the underlying `Dynamic` value (which may be shared).\n\nBreaking changes\n----------------\n\n* Language keywords are now _reserved_ (even when disabled) and they can no longer be used as variable names.\n* Function signature for defining custom syntax is simplified.\n* `Engine::register_raw_fn_XXX` API shortcuts are removed.\n* `PackagesCollection::get_fn`, `PackagesCollection::contains_fn`, `Module::get_fn` and `Module::contains_fn` now take an additional `public_only` parameter indicating whether only public functions are accepted.\n* The iterator returned by `Scope::iter` now contains a clone of the `Dynamic` value (unshared).\n* `Engine::register_global_module` takes any type that is `Into<PackageLibrary>`.\n* Error in `Engine::register_custom_syntax` is no longer `Box`-ed.\n\nHousekeeping\n------------\n\n* Most compilation warnings are eliminated via feature gates.\n\n\nVersion 0.17.0\n==============\n\nThis version adds:\n\n* [`serde`](https://crates.io/crates/serde) support for working with `Dynamic` values (particularly _object maps_).\n* Low-level API to register functions.\n* Surgically disable keywords and/or operators in the language.\n* Define custom operators.\n* Extend the language via custom syntax.\n\nBug fixes\n---------\n\n* Fixed method calls in the middle of a dot chain.\n\nBreaking changes\n----------------\n\n* `EvalAltResult::ErrorMismatchOutputType` has an extra argument containing the name of the requested type.\n* `Engine::call_fn_dynamic` take an extra argument, allowing a `Dynamic` value to be bound to the `this` pointer.\n* Precedence of the `%` (modulo) operator is lowered to below bit shifts. This is to handle the case of `x < < 3 % 10`.\n\nNew features\n------------\n\n* New `serde` feature to allow serializing/deserializing to/from `Dynamic` values using [`serde`](https://crates.io/crates/serde).\n  This is particularly useful when converting a Rust `struct` to a `Dynamic` _object map_ and back.\n* `Engine::disable_symbol` to surgically disable keywords and/or operators.\n* `Engine::register_custom_operator` to define a custom operator.\n* `Engine::register_custom_syntax` to define a custom syntax.\n* New low-level API `Engine::register_raw_fn`.\n* New low-level API `Module::set_raw_fn` mirroring `Engine::register_raw_fn`.\n* `AST::clone_functions_only`, `AST::clone_functions_only_filtered` and `AST::clone_statements_only` to clone only part of an `AST`.\n* The boolean `^` (XOR) operator is added.\n* `FnPtr` is exposed as the function pointer type.\n* `rhai::module_resolvers::ModuleResolversCollection` added to try a list of module resolvers.\n* It is now possible to mutate the first argument of a namespace-qualified function call when the argument is a simple variable (but not a module constant).\n* Many configuration/setting API's now returns `&mut Self` so that the calls can be chained.\n* `String` parameters in functions are supported (but inefficiently).\n\n\nVersion 0.16.1\n==============\n\nBug fix release to fix errors when compiling with features.\n\n\nVersion 0.16.0\n==============\n\nThe major new feature in this version is OOP - well, poor man's OOP, that is.\n\nThe `README` is officially transferred to [The Rhai Book](https://rhai.rs/book).\n\nAn online [Playground](https://alvinhochun.github.io/rhai-demo/) is available.\n\nBreaking changes\n----------------\n\n* The trait function `ModuleResolver::resolve` no longer takes a `Scope` as argument.\n* Functions defined in script now differentiates between using method-call style and normal function-call style.\n  The method-call style will bind the object to the `this` parameter instead of consuming the first parameter.\n* Imported modules are no longer stored in the `Scope`.  `Scope::push_module` is removed.\n  Therefore, cannot rely on module imports to persist across invocations using a `Scope`.\n* `AST::retain_functions` is used for another purpose. The old `AST::retain_functions` is renamed to `AST::clear_statements`.\n\nNew features\n------------\n\n* Support for _function pointers_ via `Fn(name)` and `Fn.call(...)` syntax - a poor man's first-class function.\n* Support for calling script-defined functions in method-call style with `this` binding to the object.\n* Special support in object maps for OOP.\n* Expanded the `AST` API for fine-tuned manipulation of functions.\n\nEnhancements\n------------\n\n* [The Rhai Book](https://rhai.rs/book) is online.  Most content in the original `README` was transferred to the Book.\n* New feature `internals` to expose internal data structures (e.g. the AST nodes).\n\n\nVersion 0.15.1\n==============\n\nThis is a minor release which enables updating indexers (via registered indexer setters) and supports functions\nwith `&str` parameters (maps transparently to `ImmutableString`). WASM is also a tested target.\n\nBug fix\n-------\n\n* `let s=\"abc\"; s[1].change_to('X');` now correctly sets the character '`X`' into '`s`' yielding `\"aXc\"`.\n\nBreaking changes\n----------------\n\n* Callback closure passed to `Engine::on_progress` now takes `&u64` instead of `u64` to be consistent with other callback signatures.\n* `Engine::register_indexer` is renamed to `Engine::register_indexer_get`.\n* `Module::set_indexer_fn` is renamed to `Module::set_indexer_get_fn`.\n* The tuple `ParseError` now exposes the internal fields and the `ParseError::error_type` and `ParseError::position` methods are removed.  The first tuple field is the `ParseErrorType` and the second tuple field is the `Position`.\n* `Engine::call_fn_dynamic` now takes any type that implements `IntoIterator<Item = Dynamic>`.\n\nNew features\n------------\n\n* Indexers are now split into getters and setters (which now support updates).  The API is split into `Engine::register_indexer_get` and `Engine::register_indexer_set` with `Engine::register_indexer_get_set` being a short-hand.  Similarly, `Module::set_indexer_get_fn` and `Module::set_indexer_set_fn` are added.\n* `Engine:register_fn` and `Engine:register_result_fn` accepts functions that take parameters of type `&str` (immutable string slice), which maps directly to `ImmutableString`. This is to avoid needing wrappers for functions taking string parameters.\n* Set maximum limit on data sizes: `Engine::set_max_string_size`, `Engine::set_max_array_size` and `Engine::set_max_map_size`.\n* Supports trailing commas on array literals, object map literals, function definitions and function calls.\n* Enhances support for compiling to WASM.\n\n\nVersion 0.15.0\n==============\n\nThis version uses immutable strings (`ImmutableString` type) and built-in operator functions (e.g. `+`, `>`, `+=`) to improve speed, plus some bug fixes.\n\nRegression fix\n--------------\n\n* Do not optimize script with `eval_expression` - it is assumed to be one-off and short.\n\nBug fixes\n---------\n\n* Indexing with an index or dot expression now works property (it compiled wrongly before).\n  For example, `let s = \"hello\"; s[s.len-1] = 'x';` now works property instead of causing a runtime error.\n* `if` expressions are not supposed to be allowed when compiling for expressions only. This is fixed.\n\nBreaking changes\n----------------\n\n* `Engine::compile_XXX` functions now return `ParseError` instead of `Box<ParseError>`.\n* The `RegisterDynamicFn` trait is merged into the `RegisterResultFn` trait which now always returns `RhaiResult`.\n* Default maximum limit on levels of nested function calls is fine-tuned and set to a different value.\n* Some operator functions are now built in (see _Speed enhancements_ below), so they are available even under `Engine::new_raw`.\n* Strings are now immutable. The type `rhai::ImmutableString` is used instead of `std::string::String`. This is to avoid excessive cloning of strings.  All native-Rust functions taking string parameters should switch to `rhai::ImmutableString` (which is either `Rc<String>` or `Arc<String>` depending on whether the `sync` feature is used).\n* Native Rust functions registered with the `Engine` also mutates the first argument when called in normal function-call style (previously the first argument will be passed by _value_ if not called in method-call style).  Of course, if the first argument is a calculated value (e.g. result of an expression), then mutating it has no effect, but at least it is not cloned.\n* Some built-in methods (e.g. `len` for string, `floor` for `FLOAT`) now have _property_ versions in addition to methods to simplify coding.\n\nNew features\n------------\n\n* Set limit on maximum level of nesting expressions and statements to avoid panics during parsing.\n* New `EvalPackage` to disable `eval`.\n* `Module::set_getter_fn`, `Module::set_setter_fn` and `Module:set_indexer_fn` to register getter/setter/indexer functions.\n* `Engine::call_fn_dynamic` for more control in calling script functions.\n\nSpeed enhancements\n------------------\n\n* Common operators (e.g. `+`, `>`, `==`) now call into highly efficient built-in implementations for standard types (i.e. `INT`, `FLOAT`, `bool`, `char`, `()` and `ImmutableString`) if not overridden by a registered function. This yields a 5-10% speed benefit depending on script operator usage. Scripts running tight loops will see significant speed-up.\n* Common assignment operators (e.g. `+=`, `%=`) now call into highly efficient built-in implementations for standard types (i.e. `INT`, `FLOAT`, `bool`, `char`, `()` and `ImmutableString`) if not overridden by a registered function.\n* Implementations of common operators for standard types are removed from the `ArithmeticPackage` and `LogicPackage` (and therefore the `CorePackage`) because they are now always available, even under `Engine::new_raw`.\n* Operator-assignment statements (e.g. `+=`) are now handled directly and much faster.\n* Strings are now _immutable_ and use the `rhai::ImmutableString` type, eliminating large amounts of cloning.\n* For Native Rust functions taking a first `&mut` parameter, the first argument is passed by reference instead of by value, even if not called in method-call style.  This allows many functions declared with `&mut` parameter to avoid excessive cloning. For example, if `a` is a large array, getting its length in this manner: `len(a)` used to result in a full clone of `a` before taking the length and throwing the copy away. Now, `a` is simply passed by reference, avoiding the cloning altogether.\n* A custom hasher simply passes through `u64` keys without hashing to avoid function call hash keys (which are by themselves `u64`) being hashed twice.\n\n\nVersion 0.14.1\n==============\n\nThe major features for this release is modules, script resource limits, and speed improvements\n(mainly due to avoiding allocations).\n\nNew features\n------------\n\n* Modules and _module resolvers_ allow loading external scripts under a module namespace. A module can contain constant variables, Rust functions and Rhai functions.\n* `export` variables and `private` functions.\n* _Indexers_ for Rust types.\n* Track script evaluation progress and terminate script run.\n* Set limit on maximum number of operations allowed per script run.\n* Set limit on maximum number of modules loaded per script run.\n* A new API, `Engine::compile_scripts_with_scope`, can compile a list of script segments without needing to first concatenate them together into one large string.\n* Stepped `range` function with a custom step.\n\nSpeed improvements\n------------------\n\n### `StaticVec`\n\nA script contains many lists - statements in a block, arguments to a function call etc.\nIn a typical script, most of these lists tend to be short - e.g. the vast majority of function calls contain\nfewer than 4 arguments, while most statement blocks have fewer than 4-5 statements, with one or two being\nthe most common. Before, dynamic `Vec`'s are used to hold these short lists for very brief periods of time,\ncausing allocations churn.\n\nIn this version, large amounts of allocations are avoided by converting to a `StaticVec` -\na list type based on a static array for a small number of items (currently four) -\nwherever possible plus other tricks. Most real-life scripts should see material speed increases.\n\n### Pre-computed variable lookups\n\nAlmost all variable lookups, as well as lookups in loaded modules, are now pre-computed.\nA variable's name is almost never used to search for the variable in the current scope.\n\n_Getters_ and _setter_ function names are also pre-computed and cached, so no string allocations are\nperformed during a property get/set call.\n\n### Pre-computed function call hashes\n\nLookup of all function calls, including Rust and Rhai ones, are now through pre-computed hashes.\nThe function name is no longer used to search for a function, making function call dispatches\nmuch faster.\n\n### Large Boxes for expressions and statements\n\nThe expression (`Expr`) and statement (`Stmt`) types are modified so that all of the variants contain only\none single `Box` to a large allocated structure containing _all_ the fields.  This makes the `Expr` and\n`Stmt` types very small (only one single pointer) and improves evaluation speed due to cache efficiency.\n\nError handling\n--------------\n\nPreviously, when an error occurs inside a function call, the error position reported is the function\ncall site. This makes it difficult to diagnose the actual location of the error within the function.\n\nA new error variant `EvalAltResult::ErrorInFunctionCall` is added in this version.\nIt wraps the internal error returned by the called function, including the error position within the function.\n"
        },
        {
          "name": "Cargo.toml",
          "type": "blob",
          "size": 6.8251953125,
          "content": "[workspace]\nmembers = [\".\", \"codegen\"]\n\n[package]\nname = \"rhai\"\nversion = \"1.20.1\"\nrust-version = \"1.66.0\"\nedition = \"2018\"\nresolver = \"2\"\nauthors = [\"Jonathan Turner\", \"Luk Hozda\", \"Stephen Chung\", \"jhwgh1968\"]\ndescription = \"Embedded scripting for Rust\"\nhomepage = \"https://rhai.rs\"\nrepository = \"https://github.com/rhaiscript/rhai\"\nreadme = \"README.md\"\nlicense = \"MIT OR Apache-2.0\"\ninclude = [\"/src/**/*\", \"/Cargo.toml\", \"/README.md\", \"LICENSE*\"]\nkeywords = [\"scripting\", \"scripting-engine\", \"scripting-language\", \"embedded\"]\ncategories = [\"no-std\", \"embedded\", \"wasm\", \"parser-implementations\"]\n\n[dependencies]\nsmallvec = { version = \"1.7.0\", default-features = false, features = [\"union\", \"const_new\", \"const_generics\"] }\nthin-vec = { version = \"0.2.13\", default-features = false }\nahash = { version = \"0.8.2\", default-features = false, features = [\"compile-time-rng\"] }\nnum-traits = { version = \"0.2.0\", default-features = false }\nonce_cell = { version = \"1.20.1\", default-features = false, features = [\"race\", \"portable-atomic\", \"alloc\"] }\nbitflags = { version = \"2.0.0\", default-features = false }\nsmartstring = { version = \"1.0.0\", default-features = false }\nrhai_codegen = { version = \"2.1.0\", path = \"codegen\" }\n\nno-std-compat = { git = \"https://gitlab.com/jD91mZM2/no-std-compat\", version = \"0.4.1\", default-features = false, features = [\"alloc\"], optional = true }\nlibm = { version = \"0.2.0\", default-features = false, optional = true }\nhashbrown = { version = \"0.15.0\", optional = true }\ncore-error = { version = \"0.0.0\", default-features = false, features = [\"alloc\"], optional = true }\nserde = { version = \"1.0.96\", default-features = false, features = [\"derive\", \"alloc\"], optional = true }\nserde_json = { version = \"1.0.45\", default-features = false, features = [\"alloc\"], optional = true }\nunicode-xid = { version = \"0.2.0\", default-features = false, optional = true }\nrust_decimal = { version = \"1.16.0\", default-features = false, features = [\"maths\"], optional = true }\ngetrandom = { version = \"0.2.0\", optional = true }\nrustyline = { version = \"13.0.0\", optional = true }\ndocument-features = { version = \"0.2.0\", optional = true }\narbitrary = { version = \"1.3.2\", optional = true, features = [\"derive\"] }\n\n[dev-dependencies]\nrmp-serde = \"1.1.0\"\nserde_json = { version = \"1.0.45\", default-features = false, features = [\"alloc\"] }\n\n[features]\n\n## Default features: `std`, uses runtime random numbers for hashing.\ndefault = [\"std\", \"ahash/runtime-rng\"] # ahash/runtime-rng trumps ahash/compile-time-rng\n## Standard features: uses compile-time random number for hashing.\nstd = [\"once_cell/std\", \"ahash/std\", \"num-traits/std\", \"smartstring/std\"]\n\n#! ### Enable Special Functionalities\n\n## Require that all data types implement `Send + Sync` (for multi-threaded usage).\nsync = [\"no-std-compat/compat_sync\"]\n## Add support for the [`Decimal`](https://crates.io/crates/rust_decimal) data type (acts as the system floating-point type under `no_float`).\ndecimal = [\"rust_decimal\"]\n## Enable serialization/deserialization of Rhai data types via [`serde`](https://crates.io/crates/serde).\nserde = [\"dep:serde\", \"smartstring/serde\", \"smallvec/serde\", \"thin-vec/serde\"]\n## Allow [Unicode Standard Annex #31](https://unicode.org/reports/tr31/) for identifiers.\nunicode-xid-ident = [\"unicode-xid\"]\n## Enable functions metadata (including doc-comments); implies [`serde`](#feature-serde).\nmetadata = [\"serde\", \"serde_json\", \"rhai_codegen/metadata\", \"smartstring/serde\"]\n## Expose internal data structures (e.g. `AST` nodes).\ninternals = []\n## Enable the debugging interface (implies [`internals`](#feature-internals)).\ndebugging = [\"internals\"]\n## Features and dependencies required by `bin` tools: `decimal`, `metadata`, `serde`, `debugging` and [`rustyline`](https://crates.io/crates/rustyline).\nbin-features = [\"decimal\", \"metadata\", \"serde\", \"debugging\", \"rustyline\"]\n## Enable fuzzing via the [`arbitrary`](https://crates.io/crates/arbitrary) crate.\nfuzz = [\"arbitrary\", \"rust_decimal/rust-fuzz\", \"serde\"]\n\n#! ### System Configuration Features\n\n## Use `f32` instead of `f64` as the system floating-point number type.\nf32_float = []\n## Use `i32` instead of `i64` for the system integer number type (useful for 32-bit architectures).\n## All other integer types (e.g. `u8`) are disabled.\nonly_i32 = []\n## Disable all integer types (e.g. `u8`) other than `i64`.\nonly_i64 = []\n\n#! ### Disable Language Features\n\n## Remove support for floating-point numbers.\nno_float = []\n## Remove support for arrays and indexing.\nno_index = []\n## Remove support for custom types, properties, method-style calls and object maps.\nno_object = []\n## Remove support for time-stamps.\nno_time = []\n## Remove support for script-defined functions (implies [`no_closure`](#feature-no_closure)).\nno_function = [\"no_closure\"]\n## Remove support for capturing external variables in anonymous functions (i.e. closures).\nno_closure = []\n## Remove support for loading external modules.\nno_module = []\n## Remove support for custom syntax.\nno_custom_syntax = []\n\n#! ### Performance-Related Features\n\n## Disable all safety checks.\nunchecked = []\n## Do not track position when parsing.\nno_position = []\n## Disable the script optimizer.\nno_optimize = []\n\n#! ### Compiling for `no-std`\n\n## Turn on `no-std` compilation (nightly only).\nno_std = [\"no-std-compat\", \"num-traits/libm\", \"core-error\", \"libm\", \"hashbrown\", \"no_time\"]\n\n#! ### JavaScript Interface for WASM\n\n## Use [`wasm-bindgen`](https://crates.io/crates/wasm-bindgen) as JavaScript interface.\nwasm-bindgen = [\"getrandom/js\", \"instant/wasm-bindgen\"]\n## Use [`stdweb`](https://crates.io/crates/stdweb) as JavaScript interface.\nstdweb = [\"getrandom/js\", \"instant/stdweb\"]\n\n#! ### Features used in testing environments only\n\n## Compiled with a non-stable compiler (i.e. beta or nightly)\nunstable = []\n\n## Running under a testing environment.\ntesting-environ = []\n\n[[bin]]\nname = \"rhai-repl\"\nrequired-features = [\"rustyline\"]\n\n[[bin]]\nname = \"rhai-run\"\n\n[[bin]]\nname = \"rhai-dbg\"\nrequired-features = [\"debugging\"]\n\n[[example]]\nname = \"serde\"\nrequired-features = [\"serde\"]\n\n[[example]]\nname = \"definitions\"\nrequired-features = [\"metadata\", \"internals\"]\n\n[profile.release]\nlto = \"fat\"\ncodegen-units = 1\n#opt-level = \"z\"     # optimize for size\n#panic = 'abort'     # remove stack backtrace for no-std\n\n[target.'cfg(target_family = \"wasm\")'.dependencies]\ninstant = { version = \"0.1.10\" } # WASM implementation of std::time::Instant\n\n[package.metadata.docs.rs]\nfeatures = [\"document-features\", \"metadata\", \"serde\", \"internals\", \"decimal\", \"debugging\"]\n\n[patch.crates-io]\n# Notice that a custom modified version of `rustyline` is used which supports bracketed paste on Windows.\n# This can be moved to the official version when bracketed paste is added.\nrustyline = { git = \"https://github.com/schungx/rustyline\", branch = \"v13\" }\n\n# Patch SmartString to resolve an UB issue.\n#smartstring = { git = \"https://github.com/bodil/smartstring\", ref = \"refs/pull/34/head\" }\n"
        },
        {
          "name": "LICENSE-APACHE.txt",
          "type": "blob",
          "size": 9.9345703125,
          "content": "                                 Apache License\n                           Version 2.0, January 2004\n                        http://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      \"License\" shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      \"Licensor\" shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      \"Legal Entity\" shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      \"control\" means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      \"Source\" form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      \"Object\" form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      \"Work\" shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      \"Derivative Works\" shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      \"Contribution\" shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, \"submitted\"\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as \"Not a Contribution.\"\n\n      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a \"NOTICE\" text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n"
        },
        {
          "name": "LICENSE-MIT.txt",
          "type": "blob",
          "size": 0.9990234375,
          "content": "Permission is hereby granted, free of charge, to any\nperson obtaining a copy of this software and associated\ndocumentation files (the \"Software\"), to deal in the\nSoftware without restriction, including without\nlimitation the rights to use, copy, modify, merge,\npublish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software\nis furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice\nshall be included in all copies or substantial portions\nof the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF\nANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\nTO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT\nSHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR\nIN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\nDEALINGS IN THE SOFTWARE.\n"
        },
        {
          "name": "README.md",
          "type": "blob",
          "size": 8.73046875,
          "content": "Rhai - Embedded Scripting for Rust\n==================================\n\n![GitHub last commit](https://img.shields.io/github/last-commit/rhaiscript/rhai?logo=github)\n[![Build Status](https://github.com/rhaiscript/rhai/workflows/Build/badge.svg)](https://github.com/rhaiscript/rhai/actions)\n[![Stars](https://img.shields.io/github/stars/rhaiscript/rhai?style=flat&logo=github)](https://github.com/rhaiscript/rhai)\n[![License](https://img.shields.io/crates/l/rhai)](https://github.com/license/rhaiscript/rhai)\n[![crates.io](https://img.shields.io/crates/v/rhai?logo=rust)](https://crates.io/crates/rhai/)\n[![crates.io](https://img.shields.io/crates/d/rhai?logo=rust)](https://crates.io/crates/rhai/)\n[![API Docs](https://docs.rs/rhai/badge.svg?logo=docs-rs)](https://docs.rs/rhai/)\n[![VS Code plugin installs](https://img.shields.io/visual-studio-marketplace/i/rhaiscript.vscode-rhai?logo=visual-studio-code&label=vs%20code)](https://marketplace.visualstudio.com/items?itemName=rhaiscript.vscode-rhai)\n[![Sublime Text package downloads](https://img.shields.io/packagecontrol/dt/Rhai.svg?logo=sublime-text&label=sublime%20text)](https://packagecontrol.io/packages/Rhai)\n[![Discord Chat](https://img.shields.io/discord/767611025456889857.svg?logo=discord&label=discord)](https://discord.gg/HquqbYFcZ9)\n[![Zulip Chat](https://img.shields.io/badge/zulip-join_chat-brightgreen.svg?logo=zulip)](https://rhaiscript.zulipchat.com)\n[![Reddit Channel](https://img.shields.io/reddit/subreddit-subscribers/Rhai?logo=reddit&label=reddit)](https://www.reddit.com/r/Rhai)\n\n[![Rhai logo](https://rhai.rs/book/images/logo/rhai-banner-transparent-colour.svg)](https://rhai.rs)\n\nRhai is an embedded scripting language and evaluation engine for Rust that gives a safe and easy way\nto add scripting to any application.\n\n\nTargets and builds\n------------------\n\n* All CPU and O/S targets supported by Rust, including:\n  * WebAssembly (WASM)\n  * `no-std`\n* Minimum Rust version 1.66.0\n\n\nStandard features\n-----------------\n\n* Simple language similar to JavaScript+Rust with [dynamic](https://rhai.rs/book/language/dynamic.html) typing.\n* Fairly efficient evaluation (1 million iterations in 0.14 sec on a single-core 2.6 GHz Linux VM).\n* Tight integration with native Rust [functions](https://rhai.rs/book/rust/functions.html) and [types](https://rhai.rs/book/rust/custom-types.html), including [getters/setters](https://rhai.rs/book/rust/getters-setters.html), [methods](https://rhai.rs/book/rust/methods.html) and [indexers](https://rhai.rs/book/rust/indexers.html).\n* Freely pass Rust values into a script as [variables](https://rhai.rs/book/language/variables.html)/[constants](https://rhai.rs/book/language/constants.html) via an external [`Scope`](https://rhai.rs/book/engine/scope.html) - all clonable Rust types are supported; no need to implement any special trait. Or tap directly into the [variable resolution process](https://rhai.rs/book/engine/var.html).\n* Built-in support for most common [data types](https://rhai.rs/book/language/values-and-types.html) including booleans, [integers](https://rhai.rs/book/language/numbers.html), [floating-point numbers](https://rhai.rs/book/language/numbers.html) (including [`Decimal`](https://crates.io/crates/rust_decimal)), [strings](https://rhai.rs/book/language/strings-chars.html), [Unicode characters](https://rhai.rs/book/language/strings-chars.html), [arrays](https://rhai.rs/book/language/arrays.html) (including packed [byte arrays](https://rhai.rs/book/language/blobs.html)) and [object maps](https://rhai.rs/book/language/object-maps.html).\n* Easily [call a script-defined function](https://rhai.rs/book/engine/call-fn.html) from Rust.\n* Relatively little `unsafe` code (yes there are some for performance reasons).\n* Few dependencies - currently only [`smallvec`](https://crates.io/crates/smallvec), [`thin-vec`](https://crates.io/crates/thin-vec), [`num-traits`](https://crates.io/crates/num-traits), [`once_cell`](https://crates.io/crates/once_cell), [`ahash`](https://crates.io/crates/ahash), [`bitflags`](https://crates.io/crates/bitflags) and [`smartstring`](https://crates.io/crates/smartstring).\n* Re-entrant scripting engine can be made `Send + Sync` (via the `sync` feature).\n* Compile once to [AST](https://rhai.rs/book/engine/compile.html) form for repeated evaluations.\n* Scripts are [optimized](https://rhai.rs/book/engine/optimize) (useful for template-based machine-generated scripts).\n* Easy custom API development via [plugins](https://rhai.rs/book/plugins) system powered by procedural macros.\n* [Function overloading](https://rhai.rs/book/language/overload.html) and [operator overloading](https://rhai.rs/book/rust/operators.html).\n* Dynamic dispatch via [function pointers](https://rhai.rs/book/language/fn-ptr.html) with additional support for [currying](https://rhai.rs/book/language/fn-curry.html).\n* [Closures](https://rhai.rs/book/language/fn-closure.html) (anonymous functions) that can capture shared values.\n* Some syntactic support for [object-oriented programming (OOP)](https://rhai.rs/book/patterns/oop.html).\n* Organize code base with dynamically-loadable [modules](https://rhai.rs/book/language/modules), optionally [overriding the resolution process](https://rhai.rs/book/rust/modules/resolvers.html).\n* Serialization/deserialization support via [serde](https://crates.io/crates/serde) (requires the `serde` feature).\n* Support for [minimal builds](https://rhai.rs/book/start/builds/minimal.html) by excluding unneeded language [features](https://rhai.rs/book/start/features.html).\n* A [debugging](https://rhai.rs/book/engine/debugging) interface.\n\n\nProtected against attacks\n-------------------------\n\n* [_Don't Panic_](https://rhai.rs/book/safety/index.html#dont-panic-guarantee--any-panic-is-a-bug) guarantee - Any panic is a bug. Rhai subscribes to the motto that a library should never panic the host system, and is coded with this in mind.\n* [Sand-boxed](https://rhai.rs/book/safety/sandbox.html) - the scripting engine, if declared immutable, cannot mutate the containing environment unless [explicitly permitted](https://rhai.rs/book/patterns/control.html).\n* Rugged - protected against malicious attacks (such as [stack-overflow](https://rhai.rs/book/safety/max-call-stack.html), [over-sized data](https://rhai.rs/book/safety/max-string-size.html), and [runaway scripts](https://rhai.rs/book/safety/max-operations.html) etc.) that may come from untrusted third-party user-land scripts.\n* Track script evaluation [progress](https://rhai.rs/book/safety/progress.html) and manually terminate a script run.\n* Passes Miri.\n\n\nFor those who actually want their own language\n----------------------------------------------\n\n* Use as a [DSL](https://rhai.rs/book/engine/dsl.html).\n* Disable certain [language features](https://rhai.rs/book/engine/options.html#language-features) such as [looping](https://rhai.rs/book/engine/disable-looping.html).\n* Further restrict the language by surgically [disabling keywords and operators](https://rhai.rs/book/engine/disable-keywords.html).\n* Define [custom operators](https://rhai.rs/book/engine/custom-op.html).\n* Extend the language with [custom syntax](https://rhai.rs/book/engine/custom-syntax.html).\n\n\nExample\n-------\n\nThe [`scripts`](https://github.com/rhaiscript/rhai/tree/master/scripts) subdirectory contains sample Rhai scripts.\n\nBelow is the standard _Fibonacci_ example for scripting languages:\n\n```ts\n// This Rhai script calculates the n-th Fibonacci number using a\n// really dumb algorithm to test the speed of the scripting engine.\n\nconst TARGET = 28;\nconst REPEAT = 5;\nconst ANSWER = 317_811;\n\nfn fib(n) {\n    if n < 2 {\n        n\n    } else {\n        fib(n-1) + fib(n-2)\n    }\n}\n\nprint(`Running Fibonacci(${TARGET}) x ${REPEAT} times...`);\nprint(\"Ready... Go!\");\n\nlet result;\nlet now = timestamp();\n\nfor n in 0..REPEAT {\n    result = fib(TARGET);\n}\n\nprint(`Finished. Run time = ${now.elapsed} seconds.`);\n\nprint(`Fibonacci number #${TARGET} = ${result}`);\n\nif result != ANSWER {\n    print(`The answer is WRONG! Should be ${ANSWER}!`);\n}\n```\n\nProject Site\n------------\n\n[`rhai.rs`](https://rhai.rs)\n\n\nDocumentation\n-------------\n\nSee [_The Rhai Book_](https://rhai.rs/book) for details on the Rhai scripting engine and language.\n\n\nPlayground\n----------\n\nAn [_Online Playground_](https://rhai.rs/playground) is available with syntax-highlighting editor,\npowered by WebAssembly.\n\nScripts can be evaluated directly from the editor.\n\n\nLicense\n-------\n\nLicensed under either of the following, at your choice:\n\n* [Apache License, Version 2.0](https://github.com/rhaiscript/rhai/blob/master/LICENSE-APACHE.txt), or\n* [MIT license](https://github.com/rhaiscript/rhai/blob/master/LICENSE-MIT.txt)\n\nUnless explicitly stated otherwise, any contribution intentionally submitted\nfor inclusion in this crate, as defined in the Apache-2.0 license, shall\nbe dual-licensed as above, without any additional terms or conditions.\n"
        },
        {
          "name": "benches",
          "type": "tree",
          "content": null
        },
        {
          "name": "build.rs",
          "type": "blob",
          "size": 0.9521484375,
          "content": "use std::{\n    env,\n    fs::File,\n    io::{Read, Write},\n};\n\nfn main() {\n    // Tell Cargo that if the given environment variable changes, to rerun this build script.\n    println!(\"cargo:rerun-if-changed=build.template\");\n    println!(\"cargo:rerun-if-env-changed=RHAI_AHASH_SEED\");\n    println!(\"cargo:rerun-if-env-changed=RHAI_HASHING_SEED\");\n    let mut contents = String::new();\n\n    File::open(\"build.template\")\n        .expect(\"cannot open `build.template`\")\n        .read_to_string(&mut contents)\n        .expect(\"cannot read from `build.template`\");\n\n    let seed = env::var(\"RHAI_HASHING_SEED\")\n        .or_else(|_| env::var(\"RHAI_AHASH_SEED\"))\n        .map_or_else(|_| \"None\".into(), |s| format!(\"Some({s})\"));\n\n    contents = contents.replace(\"{{HASHING_SEED}}\", &seed);\n\n    File::create(\"src/config/hashing_env.rs\")\n        .expect(\"cannot create `config.rs`\")\n        .write_all(contents.as_bytes())\n        .expect(\"cannot write to `config/hashing_env.rs`\");\n}\n"
        },
        {
          "name": "build.template",
          "type": "blob",
          "size": 0.154296875,
          "content": "//! This file is automatically recreated during build time by `build.rs` from `build.template`.\n\npub const HASHING_SEED: Option<[u64; 4]> = {{HASHING_SEED}};\n"
        },
        {
          "name": "codegen",
          "type": "tree",
          "content": null
        },
        {
          "name": "examples",
          "type": "tree",
          "content": null
        },
        {
          "name": "fuzz",
          "type": "tree",
          "content": null
        },
        {
          "name": "no_std",
          "type": "tree",
          "content": null
        },
        {
          "name": "scripts",
          "type": "tree",
          "content": null
        },
        {
          "name": "src",
          "type": "tree",
          "content": null
        },
        {
          "name": "tests",
          "type": "tree",
          "content": null
        },
        {
          "name": "tools",
          "type": "tree",
          "content": null
        }
      ]
    }
  ]
}